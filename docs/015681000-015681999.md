# StackOverflow 问答 15681000-15681999

# sql-server - 使用 Service Broker，如何知道目标服务何时处理了所有发送的消息？

> ID：15681002
> 
> 赞同：0
> 
> 时间：2013-03-28T11:44:40.523
> 
> 标签：sql-server, architecture, service-broker

SS Service Broker 的使用相当新，我无法找到一种简单的方法来了解所有发送的消息何时已被处理。

我正在使用 Service Broker 通过将任务拆分为许多小块来对任务进行多线程处理，但是执行流程需要所有原子任务都已成功处理才能继续执行。

关于我们可以如何构建事物以实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:57:52.847

您必须从目标显式发送响应，确认处理。请记住，这对于目标在您发送消息**一个月**后处理消息是完全有效的。所以不要阻塞等待响应，发起者应该是事件驱动的并响应*他*队列中的消息。

# c++ - 在 qt 中获取正确版本的项目

> ID：15681004
> 
> 赞同：0
> 
> 时间：2013-03-28T11:49:19.907
> 
> 标签：c++, qt

我有一个`QListWidget`我使用它的图像过滤器列表，这个过滤器是通过上下文菜单添加的，我重新实现了 contextMenuEvent，我有 2 个上下文菜单：添加过滤器菜单和删除过滤器菜单，当我添加过滤器时，我只是将项目添加到列表中这 ：

```
MenuFiler::MenuFiler()
{

    Laplace = new QAction("Laplace" , this);
    QObject::connect(Laplace , SIGNAL(triggered()) , this , SLOT(LaplaceSlot()) );

    QObject::connect(this, SIGNAL(itemDoubleClicked(QListWidgetItem*)), this, `SLOT(ManageControls(QListWidgetItem*)));  // to show controls for clicked item`           
    .
    . 
    .
}

void MenuFiler::LaplaceSlot()
{
    this->addItem("Laplace");
} 
```

现在在其他功能上，我检查是否有项目我得到这个项目文本并为此过滤器创建控件，我这样做

```
void MenuFiler::ManageControls(QListWidgetItem*item)
{
 if (item->text() == "Laplace")
    {
        if (_laplacianeffect.get() == NULL)
        {
             _laplacianeffect =  unique_ptr<Laplacianeffect> (new Laplacianeffect());
        }
        _laplacianeffect.get()->show();

    }
    .
    .
    // etc
} 
```

控件只是链接到 qframe 的一些按钮和滑块，我在这里没有问题。我的问题是当我想创建一个向量来保存重复效果时，例如用户将此过滤器添加到代表过滤器列表的 qListWidget：

拉普拉斯其他效应拉普拉斯

所以我会做这样的事情

```
void MenuFiler::LaplaceSlot()
{
  _laplacianeffect.push_back(new Laplacianeffect() );

    this->addItem("Laplace");
} 
```

我如何检测女巫过滤器被选中

```
void MenuFiler::ManageControls(QListWidgetItem*item)
    {
     if (item->text() == "Laplace")

        {
 // what is the code that i should use to detect witch effect id is selected)

               _laplacianeffect.at(filterid).show()

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:03:13.170

您可以在`QListWidgetItem`s 中保存其他用户定义的数据，例如，您可以保存效果的所有参数。使用`setData`和`data`函数进行存储和检索。例子：

```
//Let these be the things you want to save for the filter.
int filterParameter1;
QString filterParameter2;
//etc...

//Save them in your QListWidgetItem* :
item->setData(Qt::UserRole + 0, filterParameter1);
item->setData(Qt::UserRole + 1, filterParameter2);

//Retrieve them later by having the QListWidgetItem* pointer:
filterParameter1 = item->data(Qt::UserRole + 0).toInt();
filterParameter2 = item->data(Qt::UserRole + 1).toString(); 
```

`Qt::UserRole`是您可以保存数据的第一个位置，您可以在下一个位置保存任意数量的数据。您可以确保保存并获取正确的类型。

**但是，在您的情况下，**一种更简单的方法可能是将指向实际效果的数字存储在结构或其他东西中，或者您甚至可以保存**指向`Laplacianeffect`包含参数的类**的指针。

**编辑：用于存储指针：**

存储指针可能有点棘手，标准类型系统兼容方式[在这个问题中](https://stackoverflow.com/questions/9248001/storing-pointers-using-qlistwidgetitemsetdata)进行了描述，但作为一种简单的替代方法，您可以将指针转换为`uintptr_t`并保存它们，并在检索它们时将它们转换回您的指针类型。

但是，如果您想尝试第二种方法，我建议您要么使用第一种方法，要么阅读更多关于指针整数转换的内容（因为滥用强制转换可能很危险，因为 32 位和 64 位差异等）。

# java - 在hibernate和thrift之间转换

> ID：15681009
> 
> 赞同：1
> 
> 时间：2013-03-28T11:49:32.803
> 
> 标签：java, generics

这既与hibernate无关，也与thrift本身无关。

我正在开发一个 Java 应用程序，我通过 Hibernate 从数据库中获取数据，并希望通过 apache thrift 服务为这些对象提供服务。到目前为止，我只有几个模型，但对于每个模型，我都必须遍历休眠对象列表并构造节俭对象列表。

例如，考虑以下代码片段（这是 thrift 服务处理程序，它将 hibernate 集合作为 IN 并返回 thrift 集合）：

```
@Override
public List<TOutcome> getUserOutcomes(int user_id) throws TException {
    List<Outcome> outcomes = this.dataProvider.getOutcomesByUserId(user_id);
    List<TOutcome> result = new ArrayList<>();
    for (Iterator iterator = outcomes.iterator(); iterator.hasNext();) {
        Outcome outcome = (Outcome) iterator.next();
        TOutcome t_outcome = new TOutcome(
                (double) (Math.round(outcome.getAmount() * 100)) / 100,
                outcome.getUser().getName(),
                String.valueOf(outcome.getCategory().getName()));
        t_outcome.setComment(outcome.getComment());
        result.add(t_outcome);
    }
    return result;
}

@Override
public List<TIncome> getUserIncomes(int user_id) throws TException {
    List<Income> incomes = this.dataProvider.getIncomesByUserId(user_id);
    List<TIncome> result = new ArrayList<>();
    for (Iterator iterator = incomes.iterator(); iterator.hasNext();) {
        Income income = (Income) iterator.next();
        TIncome t_income = new TIncome(
                (double) (Math.round(income.getAmount() * 100)) / 100,
                income.getUser().getName(),
                String.valueOf(income.getCategory().getName()));
        t_income.setComment(income.getComment());
        result.add(t_income);
    }
    return result;
} 
```

`Outcome`, `Income`- 这些是 Hibernate 注释类，并且`TOutcome`, `TIncome`- 是相关的 thrift 对象（共享 80-90% 的字段）。

现在违反了“DRY”原则，因为这段代码非常非常相似。我想提供一种通用方法来迭代休眠对象并返回节俭对象。我在考虑泛型和设计模式。

在动态语言中，我可以只使用字符串来构建类名和构造对象（没有类型检查）。我想有可能在 Java 中使用泛型做类似的事情，但我不确定我应该从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:30:11.730

正如我所见，只有大约 10 行代码是常见的，而且它们是偶然常见的，而不是业务需求。当然，您可以重构代码以提取一些接口：一个供数据提供者在 和 之间进行选择`getOutcomesByUserId`，`getIncomesByUserId`另一个供对象工厂使用 - 要么`new TIncome`要么`new TOutcome`. 或者使用反射。然而，这些代码变体看起来更复杂，更难支持。我认为目前已经足够好了，不值得改变。期望更好地使用`for(Income income : incomes)`而不是迭代器样板。

但是，如果您要映射复杂但相似的数据结构，则有一些库可以显着简化映射，例如看一下[Dozer](http://dozer.sourceforge.net/)。

# wpf - 如何在垂直包装的 VariableSizedWrapGrid 的特定行和列中定位项目？

> ID：15681015
> 
> 赞同：0
> 
> 时间：2013-03-28T11:49:57.873
> 
> 标签：wpf, windows, xaml, gridview, windows-8

我想在 VariableSizedWrapGrid 的自动生成的垂直包装列表中的特定行和列中找到一个项目。我的视图模型公开了一个集合，我希望第一个项目位于第一行和第一列（我的意思是 0,0 - 这不是问题）。此外，我希望集合中的第二项位于第二列和第一行 (0,1) 中，并且我希望第三项位于第二项下方的 (1,1) 中。 . 其余项目位于剩余可用空间中....我发现这是一个问题，因为我不知道这个垂直环绕可调网格中的行数是多少...

你建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:18:03.390

使用带有[ItemsControl的](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)[UniformGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.uniformgrid.aspx)应该会为您提供所需的结果。例如，如果是 DataContext：`List<string>`

```
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <-- set the desired number of columns and omit the number of rows -->
            <UniformGrid Columns="2" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Border Margin="2"
                    BorderBrush="Tomato"
                    BorderThickness="1">
                <Grid>
                    <TextBlock Text="{Binding}" />
                </Grid>
            </Border>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# c - 为什么下面的 C 代码被发送一个 SIGSEGV 信号？

> ID：15681017
> 
> 赞同：0
> 
> 时间：2013-03-28T11:50:03.193
> 
> 标签：c, pointers, segmentation-fault

我有以下结构：

```
typedef struct binTree_t {
  int key;
  enum {lMore, rMore, equal} ratio;
  struct binTree_t* parent;
  struct binTree_t*   left;
  struct binTree_t*  right;
  struct binTree_t**  root;
} binTree_t; 
```

它表示 AVL 树。问题似乎是根双指针。这个想法是，这种方式的更改`*(node->root)`将传播到所有指向相同的节点`node->root`。这种双重抽象应该确保`**(node->root)`始终指向正确的根节点。但是，我为其分配内存的方式似乎存在问题：

```
binTree_t* createNode(int key, binTree_t* root) {
  binTree_t* node = malloc(sizeof(binTree_t));
  node->key    = key;
  node->ratio  = equal;
  node->parent =
  node->left   =
  node->right  = NULL;
  node->root   = root?&root:&node;
  return node;
} 
```

以下代码均正确返回`12`：

```
int main(void) {
  binTree_t* root = createNode(12, NULL);
  printf("%d", root->key); free(root);
  return EXIT_SUCCESS;
}

int main(void) {
  binTree_t* root = createNode(12, NULL);
  printf("%d", (*(root->root))->key); free(root);
  return EXIT_SUCCESS;
} 
```

但是，以下代码返回`12`and `0`：

```
int main(void) {
  binTree_t* root = createNode(12, NULL);
  printf("Text");
  printf("%d", root->key); free(root);
  return EXIT_SUCCESS;
}

int main(void) {
  binTree_t* root = createNode(12, NULL);
  printf("Text");
  printf("%d", (*(root->root))->key); free(root);
  return EXIT_SUCCESS;
} 
```

看起来好像`root->root`指针是在`createNode`函数的堆栈上分配的？如果是这样，你建议我如何修复它，以便它使用分配的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:52:04.547

在`createNode()`中，您清楚地存储了局部变量 ( `&node`) 的地址：

```
node->root   = root?&root:&node; 
```

那不会飞；一旦该函数退出，存储的地址就无效并且无法访问。

# python - Python 如果有很多或以收缩形式

> ID：15681028
> 
> 赞同：2
> 
> 时间：2013-03-28T11:50:32.917
> 
> 标签：python, if-statement, boolean

我正在学习 python，我发现自己在尝试创建一个 if 语句时迷失了方向，如果用户输入 y 或 yes，该语句应该是真的。

```
#!/usr/bin/env python3

user_input = input('Would you like to go on?')
lowui = user_input.lower

if lowui == ('y' or 'yes'):
   print('You want to go on')
else
   print('See you later, bye') 
```

问题是，只有当我输入 y 而不是 yes 时它才会变为 true。如果我删除括号，它总是错误的。好的，我可以做一个解决方法

```
if lowui == 'y' or lowui == 'yes': 
```

但我想知道是否有任何技巧不会强迫我写这么多次变量。
先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:51:45.803

将其更改为

```
if lowui in ('y', 'yes'): 
```

这也是错误的：

```
lowui = user_input.lower 
```

它应该是：

```
lowui = user_input.lower() # Actually call the lower function 
```

# ios - 从响应中获取数据

> ID：15681031
> 
> 赞同：-4
> 
> 时间：2013-03-28T11:50:45.637
> 
> 标签：ios, json

我是 iOS 开发新手。我有如下响应字符串：

> {"7":"阿富汗","8":"阿尔巴尼亚","9":"阿尔及利亚","10":"安道尔","11":"安哥拉","12":"安提瓜和巴布达" ,"13":"阿根廷","14":"亚美尼亚","15":"奥地利","16":"阿塞拜疆","17":"巴哈马","18":"巴林"," 19":"孟加拉国","20":"巴巴多斯","21":"白俄罗斯","22":"比利时","23":"伯利兹","24":"贝宁","25" :"不丹","26":"玻利维亚","27":"波斯尼亚和黑塞哥维那","28":"博茨瓦纳","29":"巴西","30":"文莱","31":"保加利亚","32":"布基纳法索","33":"布隆迪","34":"柬埔寨","35":"喀麦隆","36": "加拿大","37":"佛得角","38":"中非共和国","39":"乍得","40":"智利","41":"中国","42" :"哥伦比亚","43":"科摩罗","44":"哥斯达黎加","45":"科特迪瓦","46":"克罗地亚","47":"古巴"," 48":"塞浦路斯","49":"捷克共和国","50":"刚果民主共和国","51":"丹麦","52":"吉布提","53":"多米尼克","54":"多米尼加共和国","55":"东帝汶","56":"厄瓜多尔","57":"埃及","58":"萨尔瓦多","59":"赤道几内亚","60":"厄立特里亚","61":"爱沙尼亚","62":"埃塞俄比亚"}

请帮我获取国家名单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:56:51.530

尝试下面的代码来解析 iOS 5 以上的 JSON 数据

```
NSError *jsonError = nil;
NSDictionary *tempDict = [NSJSONSerialization JSONObjectWithData:JsonData options:0 error:&jsonError]; 
// here JsonData is nsmutabledata in which your response is append 
NSLog(@"%@",tempDict); 
```

试试这个你会成功使用 iOS 5.0 和 5.0 以上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:59:34.130

我想你不知道 JSON 解析。

在谷歌搜索“iOS JSON Parsing”，你会得到很多教程。

让我在这里为您列出一些。

1\. [在 iOS 5 教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)
2 中使用 JSON。 iPhone 3[的 JSON 框架。](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)[如何在 iOS App 中解析 JSON](https://stackoverflow.com/questions/7530173/how-to-parse-json-in-ios-app)

学习 JSON 解析尝试在您的应用程序中进行，如果您遇到问题，请在此处发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:39:11.817

您首先需要执行以下操作：将此代码嵌入到 viewdidLoad 函数中：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http:your URL path for json file"]];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
}); 
```

那么你必须添加这个功能：

```
-(void)fetchedData:(NSData *)responseData{
NSError *error;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
jsonResults = [json objectForKey:@"Content"];
}

[self.tableView reloadData]; 
```

}

希望对你有帮助

# ruby-on-rails - 从 Rails 中的单个 ajax 方法返回许多响应

> ID：15681034
> 
> 赞同：0
> 
> 时间：2013-03-28T11:51:01.370
> 
> 标签：ruby-on-rails, ruby, ajax

我必须在 Rails 应用程序中发出 ajax 请求。这个 ajax 请求必须向一些服务器发出许多其他 http 请求。可能**有很多（请求）**。

```
def ajax_request
  # request to the server1....
  # request to the server2....
  # request to the server3....
  # request to the server4....
  respond_to {|format| format.js }
end 
```

问题是，当然，这可能需要很多时间。请注意，每个请求都会返回数据的**独立**部分，该部分可以显示在页面上，并且不依赖于其他请求。

我想做的是像这样部分返回数据

```
def ajax_request
  # request to the server1....
  respond_to {|format| format.js }

  # request to the server2....
  respond_to {|format| format.js }

  # request to the server3....
  respond_to {|format| format.js }

  # request to the server4....
  respond_to {|format| format.js }
end 
```

我知道它行不通，但是我正在寻找可以按照我提到的方式工作的代码。你会推荐我什么？

另一种选择是发送许多 ajax 请求

```
def ajax_request1
  # request to the server1....
  respond_to {|format| format.js }
end

def ajax_request2
  # request to the server2....
  respond_to {|format| format.js }
end

def ajax_request3
  # request to the server3....
  respond_to {|format| format.js }
end 
```

但它可能会损害**我的**服务器的性能，不是吗？

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:02:56.550

3 个快速响应优于 1 个长响应。这是分页的原因之一。

每个请求只能有一个响应。Rails 4 确实支持服务器发送的事件，这会改变一点，但不太可能是你想要的。

它实际上最终是一个平衡，如果你有大量的请求而不是 1，那会很糟糕，但如果你将 1 个请求分成 2 个或 3 个，那很好，实际上可能会表现得更好。

在大量请求的情况下，您只需将数据存储在 ivars 中，而不是有多个响应，然后将其传递给您的视图进行处理。

如果您不在这里进行阻塞 I/O，那么您也可以将它们分成单独的线程以提高响应时间……如果您正在执行阻塞 I/O，并且期望有很多此类请求，那么它可能考虑使用执行真正线程（JRuby 或 Rubinius）而不是 MRI 的 Ruby 实现是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:44:27.097

这是一个使用缓存服务器和后台处理工作者的想法。例如，让我们假设 Redis 用于缓存，Resque 用于后台处理，但您也可以使用 memcached 和 backburner (beanstalkd) 或任何其他服务于该功能的东西。

当初始请求进来时，为请求创建一个唯一的 id，可能是一个 GUID，并将其作为 JSON 响应返回给客户端。使用 GUID 作为缓存键（可能有一些过期时间）来保存结果，并为您需要从中请求数据的每台服务器创建一个后台任务。这些后台任务应包括任何请求参数以及缓存键的 GUID。

您的 resque 工作人员可以从队列中拉出这些任务，运行请求，并将响应作为 JSON 放入 redis/memcached 缓存存储中。如果你有足够的工人，它们都可以并行，如果没有，它们最终都会完成，先进先出。同时，初始客户端可以使用长轮询每隔 1-2 秒请求一次新结果。它可能找不到任何结果、1 个新结果或多个。只需要跟踪已经看到哪些结果，以及何时获得所有结果。这样，用户将看到逐渐返回的更多信息，您甚至可以显示百分比或“4 / 20 完成”类型的信息。

# bash - 我可以从文件中获取一半输入并从终端中休息吗

> ID：15681035
> 
> 赞同：0
> 
> 时间：2013-03-28T11:51:06.700
> 
> 标签：bash, user-input, file-io

我有一个可执行文件（语法），它在运行时从终端获取输入（事实）并按 Ctrl+D（EOF）结束。之后程序开始再次接受另一个输入（查询）以结束我按 Ctrl+D。所以我想做的是从文件中输入事实并从终端查询。我试过了

```
./grammer < facts.pl #this assumes that all the input is from file so program terminates after inputting only facts
cat facts.pl queries.pl | ./grammer #this merges both file and removes the EOF in between files 
```

我可以按顺序输入多个文件，即在结束时首先执行 eof，然后开始从 file2 获取输入吗？

我可以在文件实际结束之前以某种方式输入 EOF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:23:25.770

`cat`是 的缩写`concatenate`，因此当然会丢失两个输入文件之间的区别。如果`./grammer`无法通过将文件名作为参数传递来读取文件目录

```
./grammer facts.pl queries.pl 
```

您需要`./grammer`为每个文件单独调用。

```
for f in facts.pl queries.pl; do
    ./grammer < "$f"
done 
```

# wpf - 在 DataGrid 中设置命令

> ID：15681039
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:51:17.733
> 
> 标签：wpf, xaml, datagrid

我想将按钮放入 DataGrid 的单元格 ListBox 中。我在 DataGrid 周围搜索了一下，但只发现了两件事：

1.  使用 DataGridTemplateColumn 并在模板中设置命令
2.  使用 DataGridHyperLinkColumn 并设置事件处理程序

我尝试了第一个变体（当我单击按钮时，什么也没有发生，如果我在没有 ListBox 作为按钮的情况下使用它）：

```
<DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ListBox ItemsSource="{Binding diffs}">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Button Command="{Binding ElementName=Root, 
                                                        Path=DataContext.viewSimpleRoute, Mode=OneTime}"
                                                        CommandParameter="{Binding}">
                                                aaa
                                            </Button>

                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox> 
```

第二个变体对我来说不可用，因为我想在 DataGrid 的单元格中创建几个命令绑定（或事件处理程序）。这样我只能重写 DataGridHyperlinkColumn.ElementStyle 的样式并只设置一个事件处理程序（因为我知道我不能在这里设置命令）。

* * *

更新

```
 <DataTemplate DataType="{x:Type tdm:TVZ+SimpleTvzDiffModel}">

                <StackPanel Orientation="Vertical">
                    <Button Width="100" Height="23" 
                                            Command="{Binding ElementName=Root, Path=DataContext.viewSimpleRoute, Mode=OneTime}"
                                            CommandParameter="{Binding}">
                        WORKS
                    </Button>
                    <DataGrid ItemsSource="{Binding diffRoutes}" AutoGenerateColumns="False">
                        <DataGrid.Columns>                            
                            <DataGridTemplateColumn Header="Маршруты">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Width="100" Height="23" 
                                            Command="{Binding ElementName=Root, Path=DataContext.viewSimpleRoute, Mode=OneTime}"
                                            CommandParameter="{Binding}">
                                            DOES NOT WORK
                                        </Button>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn> 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:26.977

使用 将`RelayCommand`您的 Button 绑定到您的 ViewModel。
为了简化解决方案，我只是放出`ViewModel`并在窗口本身中编写了属性。
你应该考虑改变它。

```
Class MainWindow

      Public Property diffs As List(Of String)
      Public Property ButtonCommand As New RelayCommand(AddressOf ButtonClick)

      Private Sub ButtonClick()
      End Sub

End Class 
```

XAML 代码：（
我使用 diff`DataGrid.ItemsSource`和 for`ListBox.ItemsSource`来简化它。

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" 
    x:Name="Root">
  <Grid>
    <DataGrid x:Name="DataGridButtons" ItemsSource="{Binding ElementName=Root, Path=diffs}">
      <DataGrid.Columns>
        <DataGridTemplateColumn>
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <ListBox ItemsSource="{Binding ElementName=Root, Path=diffs}">
                <ListBox.ItemTemplate>
                  <DataTemplate>
                    <Button Width="100" Height="23" Command="{Binding ElementName=Root, Path=ButtonCommand, Mode=OneTime}" CommandParameter="{Binding}">aaa</Button>
                  </DataTemplate>
                </ListBox.ItemTemplate>
              </ListBox>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</Window> 
```

RelayCommand 类的来源：

```
Imports System.Collections.Generic
Imports System.Linq
Imports System.Text
Imports System.Windows.Input
Imports System.Diagnostics

Public Class RelayCommand
    Implements ICommand

    ReadOnly _execute As Action(Of Object)
    ReadOnly _canExecute As Predicate(Of Object)

    Public Sub New(execute As Action(Of Object))
        Me.New(execute, Nothing)
    End Sub

    Public Sub New(execute As Action(Of Object), canExecute As Predicate(Of Object))
        If execute Is Nothing Then
            Throw New ArgumentNullException("execute")
        End If

        _execute = execute
        _canExecute = canExecute
    End Sub

    <DebuggerStepThrough()> _
    Public Function CanExecute(parameter As Object) As Boolean Implements System.Windows.Input.ICommand.CanExecute
        Return If(_canExecute Is Nothing, True, _canExecute(parameter))
    End Function

    Public Sub Execute(parameter As Object) Implements System.Windows.Input.ICommand.Execute
        _execute(parameter)
    End Sub

    Public Sub UpdateCanExecute()
        RaiseEvent CanExecuteChanged(Me, New EventArgs())
    End Sub

    Public Sub RaiseCanExecuteChanged()
        CommandManager.InvalidateRequerySuggested()
    End Sub

    ''' <summary>
    ''' To prevent the following calls to invalidate the CanExecuteProperty
    ''' StartCommand.RaiseCanExecuteChanged()
    ''' StopCommand.RaiseCanExecuteChanged()
    ''' </summary>
    ''' <remarks></remarks>
    Public Custom Event CanExecuteChanged As EventHandler Implements System.Windows.Input.ICommand.CanExecuteChanged
        AddHandler(ByVal value As EventHandler)
            AddHandler CommandManager.RequerySuggested, value
        End AddHandler
        RemoveHandler(ByVal value As EventHandler)
            RemoveHandler CommandManager.RequerySuggested, value
        End RemoveHandler

        RaiseEvent(ByVal sender As Object, ByVal e As System.EventArgs)
        End RaiseEvent
    End Event

    'Public Event CanExecuteChanged(sender As Object, e As System.EventArgs) Implements System.Windows.Input.ICommand.CanExecuteChanged

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:58:50.400

我做了一些与@BastiOnWpf 非常相似的事情，但在 xaml 中对其进行了轻微更改，如下所示；

```
<UserControl.Resources>
    <DataTemplate x:Key="RowButtons">
        <StackPanel Orientation="Horizontal">
            <Button Content="SomeCommand" Command="{Binding SomeCommand}" Width="50"/>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>

        <ListView Name="ListView" Height="70" Width="700"
                  ItemsSource="{Binding diffs}">
            <ListView.View>
                <GridView>
                    <GridViewColumn CellTemplate="{StaticResource RowButtons}"/>
                    <!-- Rows goes here-->
                </GridView>
            </ListView.View>
        </ListView> 
```

如您所见，在我的资源中，我设置了`datatemplate`您希望能够在`listbox`.

视图模型；

```
 private ICommand _Command;
        public ICommand SomeCommand
        {
            get
            {
                if (this._Command == null)
                {
                    this._Command = new new RelayCommand(this.SomeMethod); //The method/procedure you want to use for the listbox
                }
                return this._Command;
            }
        } 
```

我还使用了`RelayCommand`, 并且您可以看到我`bind`从视图模型到视图的项目。

希望这可以帮助 ：）。

# sql-server - 告诉 sql server 进行二分搜索？

> ID：15681040
> 
> 赞同：0
> 
> 时间：2013-03-28T11:51:19.357
> 
> 标签：sql-server, algorithm, search, binary-search

我有点想以某种方式指示 sql server 使用特定算法执行搜索。

我的场景就像我有一个排序的单词列表。我将其上传到数据库表。我想搜索表格以查找该单词是否存在。这就是我的要求有多远。

sql server 是为这样的用例设计的吗？如果没有这样的事情，我可以使用哪些选项来快速检索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:53:43.407

SQL Server 应该已经对您的数据实现了最快的搜索。事实上，如果你在你搜索的那个字段上创建一个索引，你会得到比二分搜索更好的结果。

# javascript - 获取另一个类中的一个类的实例

> ID：15681042
> 
> 赞同：0
> 
> 时间：2013-03-28T11:51:21.120
> 
> 标签：javascript, class, instance

编辑：我发现我的代码有问题 - 请参阅我的解决方案答案。

只是一个简单的问题：

我想访问另一个类中的一个类的实例 - 我该怎么做？这是我的问题的一个简单示例：

```
var instanceA = new ClassA();

function ClassA(){
    var instanceB = null;

    this.start = function(){
        instanceB = new ClassB();
        instanceB.start();
    }

    this.action = function(){
        console.log('works not');
    }
} 

function ClassB(){
    this.start = function(){
        instanceA.action(); // this throws: Uncaught ReferenceError: instacneA is not defined 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:54:06.823

将其传递给函数：

```
this.start = function(instA) { ... }
instanceB.start(instanceA); 
```

或者，如果要在多个方法中重用此实例，请将其传递给构造函数

```
function ClassB(instA) {
    this.instanceA = instA;
    this.start = function() { this.instanceA.action(); }
} 
```

PS 全局变量是邪恶的（大多数时候）。`var instanceA = ...`创建一个。所以，如果它只是一个快速原型 - 没关系。如果不是 - 尽量避免这种情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:57:43.000

[虽然当您调用 instanceA.start() - http://jsfiddle.net/infernalbadger/U5aUd/](http://jsfiddle.net/infernalbadger/U5aUd/)时，您的示例似乎工作正常

将 ClassA ( `this`) 的实例传递给 ClassB 可能会更好，而不是依赖于全局：

```
function ClassA(){
    var instanceB = null;
    var self = this;             // Save instance of ClassA
    this.start = function(){
        instanceB = new ClassB();
        instanceB.start(self);   // Pass to ClassB
    }

    this.action = function(){
        console.log('works not');
    }
} 

function ClassB(){
    this.start = function(a){       // Use passed in instance of ClassA
        a.action(); 
    }
} 
```

[http://jsfiddle.net/infernalbadger/U5aUd/1/](http://jsfiddle.net/infernalbadger/U5aUd/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:00:59.670

好的，我很抱歉 - 我发现了问题：

我正在使用 jquery 并在 $(document).ready 函数中创建了 instanceA 变量。

当我在 $(document).ready 函数之前创建 instanceA 时，它可以工作。

所以，即使我解决了我的问题，我也不明白。有人可以向我解释为什么我的第一种方法不起作用吗？

# c# - petapoco 共享连接

> ID：15681052
> 
> 赞同：3
> 
> 时间：2013-03-28T11:51:46.437
> 
> 标签：c#, winforms, petapoco

我是 .net 新手，这是我第一个使用 c# winforms 的项目。对于 DAL，我选择 petapoco。

我浏览了 petapoco 的示例代码，我有一些基本的问题让我感到困惑

我的项目是多用户桌面应用程序，性能优先。

1) 我是否应该使用 OpenSharedConnection。

2）我们可以使用sharedconnection进行插入/更新吗？请仔细阅读以下答案，其中 sharedconnection 仅用于选择 在某些示例[中，在 DAL 层（ASP.NET Web Forms VB.NET）中使用 PetaPoco 的正确方法](https://stackoverflow.com/questions/14161176/correct-way-to-use-petapoco-in-dal-layer-asp-net-web-forms-vb-net#new-answer)我观察到 sharedconnection 仅用于选择和他们使用的 crud

```
var db = new Database("connectionstring"); 
```

这是正确的方法。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T17:54:20.957

您不必`OpenSharedConnection()`显式调用。当您执行查询时，它将为您调用。

# c# - 使用 Moq 测试多线程情况会引发奇怪的错误

> ID：15681053
> 
> 赞同：3
> 
> 时间：2013-03-28T11:51:54.563
> 
> 标签：c#, unit-testing, moq

我有以下测试代码。

```
for (int z = 0; z < 1000; z++)
{
    ....
    const int threads = 5;
    CountdownEvent ce = new CountdownEvent(threads);
    for (int i = 0; i < threads; i++)
    {
        ThreadPool.QueueUserWorkItem(delegate
        {
            checkerMock.GetCurrentlyReleasedVersion();
            ce.Signal();
        });
    }

    ce.Wait();
    mock = Mock.Get(checkerMock);
    mock.Verify(a => a.GetCurrentlyReleasedVersion(), Times.Exactly(threads), string.Format("on try {0} failed", z + 1));
} 
```

有时测试多次运行良好。但它永远不会运行`1,000`。

有时它会抛出以下错误：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at Moq.MethodCall.Matches(ICallContext call)
   at System.Linq.Enumerable.WhereListIterator`1.MoveNext()
   at System.Linq.Enumerable.Count(IEnumerable`1 source)
   at Moq.Mock.VerifyCalls(Interceptor targetInterceptor, MethodCall expected, Expression expression, Times times)
   at Moq.Mock.Verify(Mock mock, Expression`1 expression, Times times, String failMessage)
   at Moq.Mock`1.Verify(Expression`1 expression, Times times, String failMessage) 
```

其他时候出现以下错误：

```
Moq.MockException: on try 14 failed
Expected invocation on the mock exactly 5 times, but was 4 times: a => a.GetCurrentlyReleasedVersion()
No setups configured. 
```

我相信这是起订量的问题。还是我的代码有问题？

如果我等待倒计时事件 5 次，它应该被调用 5 次，而不是 4 次。第一个错误是病态的。

或者在这种情况下起订量根本不是线程安全的？

编辑：这只是测试的一部分，据说不是问题，我已经删除了我实际测试的内容，并留下了产生错误的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T09:45:10.487

Moq 存在一个问题，即在 moq 对象上记录调用不是线程安全的。我相信现在在某些版本的 4.1 中已修复此问题

请参阅[第 249](https://code.google.com/p/moq/issues/detail?id=249)期和[第 62 期](https://github.com/Moq/moq4/issues/62)

# python - 字典文字的评估顺序

> ID：15681054
> 
> 赞同：5
> 
> 时间：2013-03-28T11:51:58.237
> 
> 标签：python, dictionary

```
def key(): print 'key'
def val(): print 'val'

{key() : val()} 
```

prints `val, key`，即首先评估值。这是行为吗

*   在 python 版本和实现之间保持一致？
*   记录在任何地方？（[http://docs.python.org/2/reference/expressions.html#dictionary-displays](http://docs.python.org/2/reference/expressions.html#dictionary-displays)什么也没说）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:04:39.917

参考手册的这一部分记录了订单，但声称它与您所看到的不同：http: [//docs.python.org/2/reference/expressions.html#evaluation-order](http://docs.python.org/2/reference/expressions.html#evaluation-order)

> 在以下几行中，表达式将按照其后缀的算术顺序进行计算：

```
expr1, expr2, expr3, expr4
(expr1, expr2, expr3, expr4)
{expr1: expr2, expr3: expr4}
expr1 + expr2 * (expr3 - expr4)
expr1(expr2, expr3, *expr4, **expr5)
expr3, expr4 = expr1, expr2 
```

并且有一个针对它的实现的开放错误： [字典显示的评估顺序与参考手册不同](http://bugs.python.org/issue11205)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T12:08:45.797

事实证明，它在实现之间*并不*一致。

```
def p(x):
    print(x)
    return x

{p('k1'): p('v1'), p('k2'): p('v2'), p('k3'): p('v3')} 
```

给出：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
IronPython 2.7.3 (2.7.0.40) on Mono 4.0.30319.1 (32-bit)
[PyPy 2.0.0-beta1 with GCC 4.4.3] on linux2

v1
k1
v2
k2
v3
k3 
```

但

```
Jython 2.5.1+ (Release_2_5_1, Oct 31 2011, 11:44:27) 
[OpenJDK Server VM (Sun Microsystems Inc.)] on java1.6.0_27
Jython 2.7b1 (default:ac42d59644e9, Feb 9 2013, 15:24:52) 
[OpenJDK Server VM (Sun Microsystems Inc.)] on java1.6.0_27

k1
v1
k2
v2
k3
v3 
```

# extjs - extjs4：用于 fieldSet 的 checkboxCmp

> ID：15681055
> 
> 赞同：0
> 
> 时间：2013-03-28T11:52:01.743
> 
> 标签：extjs, fieldset

在 extjs4 中，我在表单中使用 FieldSet，并且我喜欢属性“checkboxToggle”，当它为 true 时，fieldSet 标题的位置将出现一个复选框，这是我预期的 UI。但这不是我执行的：当复选框选中字段集展开时，当复选框未选中时，字段集折叠。我想要这样：当复选框选中启用字段集时，当复选框未选中禁用字段集时。我能怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T02:23:57.133

你应该提到 fieldset 属性

> 禁用：真/假

在侦听器上选中/取消选中时，您可以修改**禁用的值**

# vb.net - 无法使用 .show() 在 VB.net 2010 中打开表单

> ID：15681056
> 
> 赞同：0
> 
> 时间：2013-03-28T11:52:01.907
> 
> 标签：vb.net

我只是尝试使用“Exercise.show()”打开一个新表单，因为它到目前为止一直有效，但是对于这个练习表单，它没有显示为表单的选项，所以我无法打开它。我应该在这里做什么？

```
Private Sub Exercises_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Exercises.Click
    Exercises.Show()

    Me.Hide()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:55:19.313

尝试这个：

```
Dim oForm As Exercises
oForm = New Exercises()
oForm.Show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T12:33:28.490

如果您的实际表格称为“练习”，那么您需要输入：

> ```
>  Dim frm As New Exercises        
>     frm.ShowDialog() 
> ```

谢谢

埃迪·贾德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:28:07.143

使用 ShowDialog() 更改 .Show

```
Exercises.ShowDialog() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T08:41:49.860

```
 Dim objPDetails As PFErrors

    Dim IsOpen As Boolean = False
    For Each f As Form In Application.OpenForms
        If f.Name = "PFErrors" Then
            IsOpen = True
            f.Focus()
            Exit For
        End If
    Next

    If IsOpen = False Then
        objPDetails = New PFErrors
        objPDetails.WindowState = FormWindowState.Maximized
        objPDetails.MdiParent = Me
        objPDetails.Show()
    End If 
```

# qt - 使用 qthread 调用的多个线程

> ID：15681063
> 
> 赞同：0
> 
> 时间：2013-03-28T11:52:19.627
> 
> 标签：qt, qthread

这是我的基本问题，我想在开始编码之前向专家询问我的设计

我必须调用五个不同的线程

> UDP send/recv 的 3 具有单独的结构 组播 UDP 的 2 具有单独的 Serial 结构 1

我可以为每个 qthread 对象创建一个类，还是在 qt 中有其他更好的方法可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:43:47.490

[http://qt-project.org/doc/qt-4.8/qthread.html#details](http://qt-project.org/doc/qt-4.8/qthread.html#details)

这描述了创建函数并让它由线程管理的两种方法，第一种方法是首选方法。

希望有帮助。

# android - Android简单的textview文本更改与计时器

> ID：15681065
> 
> 赞同：1
> 
> 时间：2013-03-28T11:52:26.027
> 
> 标签：android, android-layout, android-intent

我是 android 新手，刚开始浏览一些教程视频。我的要求是最初我需要将 textview 文本显示为“红色”，5-10 秒后，需要将其更改为“你好红色”。

我交替尝试了两种方法。在第一种方法中它给了我异常，而在第二种方法中它在给定延迟后启动应用程序并直接向我显示“hello red”文本。我可能在这里遗漏了一些基本概念。你能帮帮我吗？

```
 TextView myText;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myText = (TextView)findViewById(R.id.displayTv);
    // ------ first method start ---------
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(6000);
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                myText.setText("Hello red");
            }
        }
    };
    timer.start();
    // ------ first method end ---------
    // ------ second method start ---------
    try {
        Thread.sleep(10000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    myText.setText("Hello red");
    // ------ second method end ---------
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T11:55:02.593

尝试使用处理程序，

```
Handler h=new Handler();
h.postDelayed(new Runnable(){
public void run(){
//change your text here
}
}, time_delay); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T12:05:34.720

```
 _tv = (TextView) findViewById( R.id.textView1 );
     tv2 = (TextView) findViewById( R.id.textView2 );
    _tv.setText( "red" );
    _t = new Timer();

    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 
                     tv2.setText(""+_count);
                     if(_count==5)
                     {
                    _tv.setText("hello red" );
                    _tv.setTextColor(Color.RED);
                     }
                 }
                 });
            }
        }, 1000, 1000 ); 
```

# ios - iOS Core Plot CPTAxisLabel 对齐到 CPTPlot

> ID：15681070
> 
> 赞同：3
> 
> 时间：2013-03-28T11:52:43.713
> 
> 标签：ios, core-plot

请看下面这张图片。我已附上文件。我的`CPTAxisLabel`标签问题。它们被放置在勾号下，但它们没有`CPTPlot`按我的意愿放置在下面。

如何向此标签添加左偏移量？我需要将我的标签放置在`CPTPlot`对象中间。

![在此处输入图像描述](../Images/4e4021f4161635d560c6d82ffa88b3e1.png)

（更新：）

```
-(void)configureGraph
{

    NSInteger max = 0;
    for (NSNumber *number in self.values) {
        NSInteger num = [number integerValue];
        if (num > max) {
            max = num;
        }
    }

    CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:self.bounds];

    graph.plotAreaFrame.masksToBorder = NO;

    self.hostedGraph = graph;

    graph.paddingBottom = 80.0f;
    graph.paddingLeft  = 0.0f;
    graph.paddingTop    = 50.0f;
    graph.paddingRight  = 0.0f;

    CGFloat xMin = -0.5f;
    CGFloat xMax = [self.titles count];
    if (xMax < 7.0) {
        xMax = 7.0;
    }
    CGFloat yMin = 0.0f;
    CGFloat yMax = max + 25;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(yMax)];

    //graph.backgroundColor = [[UIColor grayColor] CGColor];
    //graph.plotAreaFrame.fill = [CPTFill fillWithColor:[CPTColor redColor]];

}

-(void)configurePlots
{    
    CPTBarPlot *plot = [[CPTBarPlot alloc] init];
    //plot.barOffset = CPTDecimalFromFloat(0.30);
    plot.fill = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:190.0f/255.0f green:203.0f/255.0f blue:103.0f/255.0f alpha:1.0]];
    //plot.barWidth = CPTDecimalFromDouble(0.75);
    plot.lineStyle = nil;
    plot.barCornerRadius = 1.0;
    plot.dataSource = self;
    plot.delegate = self;

    CPTGraph *graph = self.hostedGraph;
    [graph addPlot:plot toPlotSpace:graph.defaultPlotSpace];

}

#pragma mark - CPTPlotDataSource methods
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    return [self.titles count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
    if ((fieldEnum == CPTBarPlotFieldBarTip) && (index < [self.titles count])) {
            return [self.values objectAtIndex:index];
    }
    return [NSDecimalNumber numberWithUnsignedInteger:index];
}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)idx
{

    plot.labelOffset = 0;

    CPTMutableTextStyle *style = [CPTMutableTextStyle textStyle];
    style.color = [[CPTColor whiteColor] colorWithAlphaComponent:1];
    style.fontName = @"Helvetica-Bold";
    style.fontSize = 12.0f;

    NSString *valueString = [NSString stringWithFormat:@"%@", [self.values objectAtIndex:idx]];

    return [[CPTTextLayer alloc] initWithText:valueString style:style];
}

- (void)configureAxes
{

    CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostedGraph.axisSet;
    axisSet.xAxis.hidden = YES;
    axisSet.yAxis.hidden = YES;

    CPTMutableTextStyle *style = [CPTMutableTextStyle textStyle];
    style.color = [[CPTColor whiteColor] colorWithAlphaComponent:1];
    style.fontName = @"Helvetica-Bold";
    style.fontSize = 12.0f;

    NSMutableArray *labels = [[NSMutableArray alloc] initWithCapacity:5];
    int idx =0;
    for (NSString *string in self.titles)
    {
        CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:string textStyle:style];
        label.rotation = M_PI/2;
        label.tickLocation = CPTDecimalFromInt(idx);
        label.offset = 10.0f;
        [labels addObject:label];
        idx+=1;
    }

    axisSet.xAxis.axisLabels = [NSSet setWithArray:labels];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:32:11.950

将 设置`barOffset`为零 (0) 并使条形位置与刻度位置相同，或者调整数据源返回的条形位置以考虑`barOffset`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:36:22.443

CPTAxis 类有一个属性 labelOffset，根据文档，它是“刻度线和标签之间的偏移距离。”

有很多方法可以从 CPTAxis 类自定义标签，您应该检查： [https ://core-plot.googlecode.com/hg-history/efa73ee50d8edfd0e1d4294cf4bd2c07d9f8af77/documentation/html/iOS/interface_c_p_t_axis.html](https://core-plot.googlecode.com/hg-history/efa73ee50d8edfd0e1d4294cf4bd2c07d9f8af77/documentation/html/iOS/interface_c_p_t_axis.html)

# android - 如何检测列表视图中的向上滚动

> ID：15681073
> 
> 赞同：0
> 
> 时间：2013-03-28T11:52:57.760
> 
> 标签：android, android-listview, android-scroll

我想在向上滚动列表视图时隐藏操作栏，并在向下滚动列表视图时再次显示操作栏。有什么方法可以检测列表视图的上下滚动吗？如果是，请提供一些参考。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:02:30.297

也许您可以尝试以下方法来完成此操作：

```
listView.setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) { }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {

        if(listView.getFirstVisiblePosition() == 0)
            getActionBar().show();
        else
            getActionBar().hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T11:02:51.780

这是来自 Google IO 2014 的 Android 应用程序。提供一个很好的向上或向下滚动检测以在滚动一些行后显示/隐藏工具栏。

```
private int mActionBarAutoHideSensivity = 0;
private int mActionBarAutoHideMinY = 0;
private int mActionBarAutoHideSignal = 0;
private boolean mActionBarShown = true;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
    // ...

    ListView listView = (ListView) contentView.findViewById(R.id.listView);
    initActionBarAutoHide();
    listView.setOnScrollListener(new ListViewOnScrollListener());

    // ...
}

private void initActionBarAutoHide() {
    mActionBarAutoHideMinY = getResources().getDimensionPixelSize(R.dimen.action_bar_auto_hide_min_y); //152dp
    mActionBarAutoHideSensivity = getResources().getDimensionPixelSize(R.dimen.action_bar_auto_hide_sensivity); //48dp
}

public class ListViewOnScrollListener implements OnScrollListener {
    final static int ITEMS_THRESHOLD = 3;
    int lastFvi = 0;

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        onMainContentScrolled(firstVisibleItem <= ITEMS_THRESHOLD ? 0 : Integer.MAX_VALUE,
                lastFvi - firstVisibleItem > 0 ? Integer.MIN_VALUE :
                        lastFvi == firstVisibleItem ? 0 : Integer.MAX_VALUE
        );
        lastFvi = firstVisibleItem;
    }
}

private void onMainContentScrolled(int currentY, int deltaY) {
    if (deltaY > mActionBarAutoHideSensivity) {
        deltaY = mActionBarAutoHideSensivity;
    } else if (deltaY < -mActionBarAutoHideSensivity) {
        deltaY = -mActionBarAutoHideSensivity;
    }

    if (Math.signum(deltaY) * Math.signum(mActionBarAutoHideSignal) < 0) {
        // deltaY is a motion opposite to the accumulated signal, so reset signal
        mActionBarAutoHideSignal = deltaY;
    } else {
        // add to accumulated signal
        mActionBarAutoHideSignal += deltaY;
    }

    boolean shouldShow = currentY < mActionBarAutoHideMinY || (mActionBarAutoHideSignal <= -mActionBarAutoHideSensivity);
    autoShowOrHideActionBar(shouldShow);
}

protected void autoShowOrHideActionBar(boolean show) {
    if (show == mActionBarShown) {
        return;
    }

    mActionBarShown = show;
    if (show) {
        onScrollingUp();
    } else {
        onScrollingDown();
    }
}

public void onScrollingUp() {
    // ...
}

public void onScrollingDown() {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:04:43.430

API 提供了这样的方法，但它们是受保护的，所以我认为最好的做法是创建包装类（扩展 ScrollView）并将这些方法公开，特别是`onScrollChanged`和`onOverScroll`.

您可以查看以下问题以了解如何执行此操作：

[http://pastebin.com/ePeyswyQ](http://pastebin.com/ePeyswyQ)

[检测适配器中的滚动方向（上/下）](https://stackoverflow.com/questions/12114963/detecting-the-scrolling-direction-in-the-adapter-up-down)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T03:13:16.920

在android listview上检测向上/向下滚动的简单方法

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount){
  if(prevVisibleItem != firstVisibleItem){
    if(prevVisibleItem < firstVisibleItem)
      //ScrollDown
    else
      //ScrollUp

  prevVisibleItem = firstVisibleItem;
} 
```

不要忘记

```
yourListView.setOnScrollListener(yourScrollListener); 
```

# syntax-highlighting - Umbraco 中 TinyMCE 的语法荧光笔

> ID：15681074
> 
> 赞同：0
> 
> 时间：2013-03-28T11:52:58.300
> 
> 标签：syntax-highlighting, umbraco, client-dependency

我从 umbraco 存储库下载了 umbraco 的 EyeCatch 语法荧光笔作为一个包。但是一旦我将宏添加到我的 MVC 视图中，它就开始抱怨客户端依赖关系（在服务器端级别）。所以首先......你们知道的任何解决方法..或任何调试它的方法？..因为包使用用户控件..甚至可以将它添加到我的 Mvc 设置中吗？有没有其他已知的用于语法高亮的好包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:47:09.927

开箱即用，它很可能不适用于 MVC。您可能需要自己进行一些修改。这里有关于在 MVC 中注册文件的详细信息

[http://clientdependency.codeplex.com/wikipage?title=MVCFileRegistration&referringTitle=Documentation](http://clientdependency.codeplex.com/wikipage?title=MVCFileRegistration&referringTitle=Documentation)

# twitter-bootstrap - 在 Twitter Bootstrap 输入框后显示帮助块

> ID：15681080
> 
> 赞同：0
> 
> 时间：2013-03-28T11:53:20.593
> 
> 标签：twitter-bootstrap

我正在使用带有*jqBootstrapValidation插件的**Twitter Bootstrap*来验证表单输入数据。

 *当用户输入时，输入框内没有输入数据`<input type="email" name="email" required/>` 并尝试提交表单；消息“这是必填字段”。出现在输入框下方。如何使该消息出现在输入框之后（不在下一行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T16:01:45.033

为了让它工作，我还必须将输入本身设置为“显示：内联”，因为“表单控制”类的输入似乎默认使用“显示：块”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:45:42.597

确保错误所在的容器（在这种情况下`p.help-block`）是`display: inline`或`float: right`并且在输入之后也有足够的空间，如果没有，它将无法工作。

请注意，这也有一些副作用，例如如果您在输入后有某种帮助文本，则此更改也会将它们移动到输入旁边。*

# php - Highcharts 使用 tcpdf 将多个图表导出为 pdf

> ID：15681081
> 
> 赞同：0
> 
> 时间：2013-03-28T11:53:25.153
> 
> 标签：php, highcharts, tcpdf

在我的网站上，我有一些 html 表格和一些来自 highcharts 的图表。我需要使用 tcpdf 导出所有内容。

所以我搜索了它，我创建的唯一东西是关于 svg 的。但我不知道如何将它与 tcpdf 一起使用。我想过将每个图表导出为 png 图像，然后将这些图像添加到 pdf 中，但我失败了。因为每次我导出图像时它都会询问我如何保存它，但我需要自动保存它。

请问您的解决方案是什么？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:00:19.073

有很多[TCPD 示例](http://www.tcpdf.org/examples.php)- 在那里您可以看到可以将图像导出为 pdf。或者你想要一些特别的东西？

注意：您可以找到一种如何从 highcharts 导出图像的方法：[喜欢这里](https://stackoverflow.com/questions/9277039/highcharts-image-export)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T09:26:40.433

我有一个相当简单的页面报告一些数字，屏幕上有几个图表。我认为 TCPDF 支持 SVG 并且图形是在 SVG 中生成的，这将是捕获它们的最佳格式，令人惊讶的是我找不到太多关于这样做的信息，所以这是我的 phantomjs 脚本的通用版本：

```
var dest_folder = 'C:\\myfolder\\subfolder\\';
console.log('Destination Folder: ' + dest_folder);

var page = require('webpage').create();
page.open('http://www.example.com/graphs_page/', function(status) {
if (status !== 'success') {
    console.log('Unable to load the address!');
    phantom.exit();
} else {
    console.log('Loaded Page');

    // Get the first graph
    graph_1_svg = page.evaluate(function() {
            return document.getElementById('results_graph_1').children[0].innerHTML;
    });
    console.log('graph_1_svg: ' + graph_1_svg.length + ' chars long');
    // Write to destination folder or report error to console
    var fs = require('fs');
    try {
        fs.write(dest_folder + 'graph_1.svg', graph_1_svg, 'w');
    } catch(e) {
        console.log(e);
    }

    // Get the second graph
    graph_2_svg = page.evaluate(function() {
            return document.getElementById('results_graph_2').children[0].innerHTML;
    });
    console.log('graph_2_svg: ' + graph_2_svg.length + ' chars long');
    // Write to destination folder or report error to console
    var fs = require('fs');
    try {
        fs.write(dest_folder + 'graph_2.svg', graph_2_svg, 'w');
    } catch(e) {
        console.log(e);
    }

    phantom.exit();
}
}); 
```

该页面具有两个用于 highcharts 的目标 div，results_graph_1 和 results_graph_2，highcharts 在其中创建一个子 div，然后在其中创建 svg，因此通过访问每个目标的第一个子 div 的内容，我们可以复制出 svg 并将其写入服务器上的一个文件。

之后拿起 SVG 文件放入您的 PDF。我不确定您的情况是什么，但我希望用户在单击下载 PDF 之前先在屏幕上查看报告，所以我将在第一阶段保存图表，并且 SVG 文件将在生成 PDF 之前准备好.

就运行 phantomjs 而言，如果您下载它，将这里脚本保存为 test.js，然后在命令提示符中转到您提取它的位置，例如 c:\phantomjs 并运行：

```
phantomjs.exe test.js 
```

脚本的 console.log 部分将通知您其进度。哦，在运行之前更改脚本中的目标文件夹和目标网址。

# android - android:layout_weight 意外行为？

> ID：15681082
> 
> 赞同：2
> 
> 时间：2013-03-28T11:53:27.303
> 
> 标签：android, xml, android-layout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="5"
        android:text="Button1"
        android:textSize="20dp" >
    </Button>

    <Button
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="Button2"
        android:textSize="20dp" >
    </Button>

</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="5"
        android:text="Button1"
        android:textSize="20dp" >
    </Button>

    <Button
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:text="Button2"
        android:textSize="20dp" >
    </Button>

</LinearLayout> 
```

在代码版本 1 中，按钮 1 的高度是按钮 2 的 5 倍

在代码版本 2 中，按钮 2 的高度是按钮 1 的 5 倍

当 android:layout_height="0dp" 被 android:layout_height="match_patent" 替换时，权重是相反的。您能否解释这种行为以及 android:layout_weights 的实际工作原理，并解释每种情况的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:15:19.823

Layout_weight 设置为那些其值将被指定为 0 的组件。这意味着它们没有自己的高度/宽度，并且将占据由权重指定的屏幕百分比。

# python - 在数组python中存储两个值

> ID：15681083
> 
> 赞同：0
> 
> 时间：2013-03-28T11:53:32.523
> 
> 标签：python, arrays, 2d

嗨，我确定有一种更有效的编码方式，我主要是一名 java 程序员，但试图用一些基本的 python 帮助一些人。

我需要一个包含一组随机坐标的二维数组，例如 (2, 10)。我最初的想法是创建数组，然后填充包含两个坐标的较小数组。

```
import numpy
import random

a = numpy.zeros(10000).reshape(100, 100)
temp = []
for i in range(0,100):
    for j in range(0,100):
        temp.append(random.randint(0,100))
        temp.append(random.randint(0,100))
        a[i][j]=temp

print a 
```

这会产生错误 ValueError: setting an array element with a sequence。

那么解决这个问题的最佳方法是什么？对不起，我以前从未真正使用过 python 的这段代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:02:23.033

这是一个三个暗淡的数组，您可以通过以下方式创建它：

```
np.random.randint(0, 100, (100, 100, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:27:18.587

如果我理解您要做什么，@HYRY 会给出正确答案。您收到 Value 错误的原因是因为您将序列或 python 列表（tmp）分配给单个浮点数（ a[i][j] ）。@HalCana​​ry 向您展示了如何修复您的代码以解决此错误，但 HYRY 的代码应该最适合 python 计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:22:41.863

```
import numpy
import random
a = numpy.zeros((100, 100, 2))
for i in range(0,100):
    for j in range(0,100):
        a[i,j,:] = (random.randint(0,100),
                    random.randint(0,100))
print 'x-coords:\n', a[:,:,0]
print 'y-coords:\n', a[:,:,1] 
```

# jquery - jQuery：提交并保持在同一页面

> ID：15681084
> 
> 赞同：1
> 
> 时间：2013-03-28T11:53:33.003
> 
> 标签：jquery

提交表单后是否可以保留文本框中的值并使用 jQuery ajax 保持同一页面？

很抱歉，我没有示例可以演示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:58:52.097

在您的提交回调中，您可以`preventDefault`提交事件。然后，您只需使用 ajax 自己处理它。

```
$('#yourform').submit(function(event) {
    event.preventDefault(); // disable default submit behaviour of the browser
    $.post($(this).attr('action'), $(this).serialize()); // handle the post via ajax
}); 
```

```
<form id="yourform" action="script.php">
    <input type="text" name="field">
    <input type="submit" value"Go">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:59:33.367

您可以使用 jquery/ajax 提交您的页面看看它 - 假设 html 代码是 -

```
<form id="target" action="destination.html">
<input type="text" value="Hello there" />
<input type="submit" value="Go" />
</form> 
```

现在ajax代码将是-

```
$('#target').submit(function() {
alert('Handler for .submit() called.');
return false;
}); 
```

# c# - 如何检查从 LINQ 返回的负值

> ID：15681087
> 
> 赞同：1
> 
> 时间：2013-03-28T11:53:37.350
> 
> 标签：c#, asp.net, linq, asp.net-3.5

我正在使用 LINQ 来获取我的正确数据，在此 LINQ 内部调用一种方法来检查日期差异。如果日期差异为负 LINQ 返回我的匿名类型。我如何处理这个问题以及我将如何获得这个负数我还需要这个来进一步使用。

```
var daysCount = (from projCount in dtExpiring.AsEnumerable()
                 where projCount.Field<int>("AccountId") == accId
                 && (checkDate(projCount.Field<DateTime>("ValidFor"))) <= 5
                 && (checkDate(projCount.Field<DateTime>("ValidFor"))) >= 0
                 select new { daysRemain = (checkDate(projCount.Field<DateTime>("ValidFor"))) }).Distinct(); 
```

```
private int checkDate(DateTime validFor)
{
    try
    {
         DateTime date = DateTime.Now;
          int diffDays = Convert.ToInt32(Math.Round((validFor - date).TotalDays));

          return diffDays;
      }
      catch (Exception)
      {
           return 0;
      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:00:01.283

编辑：如果我理解正确，那么您当前的 LINQ 查询不会返回负天数差异，您也希望如此。如果是这种情况，那么您必须删除支票

```
&& (checkDate(projCount.Field<DateTime>("ValidFor"))) >= 0 
```

因为它只选择天数为 0 或正数的记录。

* * *

*（旧答案）*

您也可以`AccountID`在匿名对象中进行选择，以便将返回的差异与记录相关联。就像是：

```
select new { daysRemain = (checkDate(projCount.Field<DateTime>("ValidFor"))),
             accID =  projCount.Field<int>("AccountId"}) 
```

进而：

```
foreach(var item in daysCount)
{
    Debug.WriteLine("{0},{1}", item.accID, item.daysRemain);
} 
```

要获取负数的 AccID，您可以尝试：

```
var negativeAccIDs = daysCount.Where(r=> r.daysRemain < 0); 
```

# jquery - jquery将div的背景颜色更改为闪烁

> ID：15681091
> 
> 赞同：1
> 
> 时间：2013-03-28T11:53:43.970
> 
> 标签：jquery, html, background-color

我想更改 div 的颜色并在一秒钟后将其更改回原始颜色。但我想连续做 2-3 次以引起用户的注意。

这是将颜色更改为红色并仅更改回原始一次的 jquery 代码。

```
$('.b').on('click', function() {

var $el = $(".a"),
x = 500,
originalColor = $el.css("background");

$el.css("background", "red");
setTimeout(function(){
  $el.css("background", originalColor);
}, x);

}); 
```

如何更改颜色并将其更改回 3 次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:00:00.027

使用递归`setTimeout`：

```
$('.b').on('click', function () {
    var $el = $(".a"),
        x = 500,
        originalColor = $el.css("background"),
        i = 3; //counter

    (function loop() { //recurisve IIFE
        $el.css("background", "red");    
        setTimeout(function () {
            $el.css("background", originalColor);
            if (--i) setTimeout(loop, x); //restart loop
        }, x);
    }());
}); 
```

[**小提琴**](http://jsfiddle.net/ByakC/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:00:43.590

```
$('.b').on('click', function() {
    var i     = 0,
        orgCl = $('.a').css("background"),
        timer = setInterval(function() {
            $('.a').css('background', 'red').delay(500).show(1, function() {
                $('.a').css('background', orgCl).delay(500).show(1, function() {
                    if (i++ > 2) clearInterval(timer);
                });
            });
        },1000);
}); 
```

[**小提琴**](http://jsfiddle.net/MBHQ3/)

# php - 如何在 mySQL 中动态更改限制

> ID：15681092
> 
> 赞同：1
> 
> 时间：2013-03-28T11:53:48.940
> 
> 标签：php, mysql, limits

```
public function getAllCelebDataFinal ($database,$celebrityId,$lastOutputId) 
{
    $getalldata = $database->executeObjectList("
        SELECT *
        FROM (
            (SELECT v.vidId, NULL as newsId, NULL as photoId, NULL as imageFile,
                    v.title as vidTitle, NULL as newsTitle, v.videoLink AS vidLink,
                    NULL as newsVidLink, NULL as newDetail , v.addDate
             FROM videos v
             WHERE v.celebrityId='".$celebrityId."' AND v.isPublished=1)
          UNION ALL
            (SELECT NULL as vidId, n.newsId,NULL as photoId,NULL as imageFile,
                    NULL as vidTitle, n.title as newsTitle, NULL AS vidLink,
                    n.videoLink as newsVidLink, n.details as newDetail,
                    n.addDate
             FROM news n
             WHERE n.celebrityId='".$celebrityId."' AND n.isPublished=1)
          UNION ALL
            (SELECT NULL as vidId,NULL as newsId,p.photoId,p.imageFile,
                    NULL as vidTitle, NULL as newsTitle, NULL AS vidLink,
                    NULL as newsVidLink,  NULL as newDetail , p.addDate
             FROM photos p
             WHERE p.celebrityId='".$celebrityId."' AND p.isPublished=1)
        ) results
        ORDER BY addDate DESC
        LIMIT 5");
    return $getalldata; 
} 
```

将其视为第二个查询，如果我正在运行限制为 5 的第一个查询，我将作为 $lastOutputId 作为参数发送 5，并且我想将此查询作为 5 到 5+5 运行，并且以同样的方式，下一个查询将以 10 到 15 的限制运行。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:59:20.617

LIMIT 可能有 2 个参数。在我们的例子中，我认为您可以像这样使用 LIMIT ：

```
LIMIT $lastOutputId, 5 
```

文档： http: [//php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:59:19.847

mysql中的limit选项可以带两个参数，start，length。因此你可以这样做：

```
limit 0,5 
```

获得前 5 个

```
limit 5,5 
```

获得下一个 5

```
limit 10,5 
```

获得下一个等。您只需要根据您的 lastOutputId 设置第一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:09:21.900

我同意上面的答案，LIMIT 采用 2 个参数或 1 个参数：

*   SELECT ... LIMIT 偏移量 num_records
*   SELECT ... LIMIT num_records --> 相当于 LIMIT 0 num_records

不过，出于性能原因，我确实警告不要使用这种方法。

每次您的网站需要 5 行时，一条 SQL SELECT 语句都会遍历所有 MySQL 服务器软件层（连接、身份验证、查询解析、查询结果缓存、存储引擎、结果序列化）。

SELECT something FROM something LIMIT 1000000,10 实际上会从表中读取 1,000,010 条记录，从而对存储引擎造成很大的负载！结果序列化中仅忽略前 1M 行。

在一个查询中获取全部数据并将结果保存在 Web 服务器上的本地内存或共享的易失性存储（如 memcached）中可能更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:02:34.113

```
class celeb {
    public function getAllCelebDataFinal ($database,$celebrityId,$lastOutputId, $limit)
    // Your query

    }
}
$numberOfRepeat = 5; //just example

$limit = new Celeb();

$limit->getAllCelebDataFinal($val, $val, $val, $val); 
```

}

然后将对象放入 foreach 循环中，并通过按钮或 get 变量使该数字动态化，您就完成了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:08:04.220

```
$limit = $_REQUEST['limit'];
$start = $_REQUEST['start'];

$getRec = "SELECT * FROM MyUser LIMIT $start , $limit"; 
```

# c# - 使用泛型的脑残错误

> ID：15681105
> 
> 赞同：2
> 
> 时间：2013-03-28T11:54:19.147
> 
> 标签：c#, .net, generics

我正在尝试制作通用`Repository pattern`基类，从中将实现成员。这是一个代码：

```
public abstract class RepositoryBase<TEntity, TType> : IRepository<TEntity, TType>
    where TEntity : EntityBase<TType>
{
    public IAdNetMsSqlContext Context { get; set; }
    public DbSet<TEntity> DbSet { get; set; }

    public RepositoryBase(IAdNetMsSqlContext context)
    {
        Context = context;
        DbSet = context.Set<TEntity>();
    }

    public IQueryable<TEntity> Get(TType id)
    {
        //!!! Here is an error
        return DbSet.FirstOrDefault(e => e.Id == id);
    }
    ....
} 
```

我得到了错误：

```
 Error    1   Operator '==' cannot be applied to operands of type 'TType' and    `'TType' .... AdNet.Common.Base 
```

在行中：

```
 return DbSet.FirstOrDefault(e => e.Id == id); 
```

我不知道该怎么想。TType 肯定等于 TType。

感谢任何提前！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T11:59:02.443

这里有两个问题：

*   你试图返回一个`IQueryable<TEntity>`when`FirstOrDefault`只会返回一个`TEntity`，所以你应该改变返回类型
*   您正在尝试使用`==`which 在不受约束的泛型上是不允许的。您可以约束`TType`成为一个类，此时它将执行引用相等，但这可能不是您想要给出的示例。

鉴于无论如何这都会被翻译成 SQL（所以你不必担心装箱的影响），我只需将其转换为 use `Equals`：

```
public TEntity Get(TType id)
{
    return DbSet.FirstOrDefault(e => e.Id.Equals(id));
} 
```

或者你不能一开始就使用[`DbSet<TEntity>.Find`](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx)吗？

```
public TEntity Get(TType id)
{
    return DbSet.Find(id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:01:09.160

您可能知道这`TType`显然等于`TType`，但编译器不知道任何任意的、不受约束的`TType`是否会有一个`==`运算符（又名`op_Equality`）。

可以`Equals`改用吗？

```
return DbSet.FirstOrDefault(e => e.Id.Equals(id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:01:06.230

碰巧两个泛型共享相同的名称：TType

从编译器的角度来看，它没有意识到 e.Id 与 id 相同，并且您很可能可以编写一些代码来使场景真实。

我假设 TType 的比较检查它在物理上是相同的对象，而不是具有相同值的 2 个对象。如果您将两者都转换为 Object ，则比较应该有效

# ruby - Ruby 中 gsub 的奇怪行为

> ID：15681109
> 
> 赞同：2
> 
> 时间：2013-03-28T11:54:37.817
> 
> 标签：ruby, regex, replace

```
puts 'the\t\'arget'.gsub("'", "\\'") 
```

产生以下输出：

```
the\targetarget 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:14:06.027

gsub 中的`\\'`替换实际上是一个反向引用，它用原始字符串中的字符`'`之后的所有内容替换一个字符，即*arget*。`'`

 *这是来自[ruby​​ 文档`String#gsub`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)的引用：

> 如果替换是一个字符串，它将被替换为匹配的文本。它可能包含对模式捕获组的反向引用，形式为 \\d，其中 d 是组号，或 \\k，其中 n 是组名。如果它是双引号字符串，则两个反向引用都必须以附加的反斜杠开头。但是，在替换中，特殊匹配变量（例如 &$）不会引用当前匹配。*

# php - header() 函数中的属性

> ID：15681111
> 
> 赞同：0
> 
> 时间：2013-03-28T11:54:46.263
> 
> 标签：php, redirect, header

使用 header() 函数重定向时，有没有办法发送一些属性？

我想在重定向（PHP5）时发送一些错误消息。

我知道我可以只显示错误页面 5 秒左右，然后重定向。或者在链接中使用查询重定向，但这不是重点。

像这样的东西：

```
header('Location: /mvc/index.php', $some_attributes); 
```

以及如何在索引页面上获取它们？

顺便说一句，我认为位置不可能是相对的，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:56:29.460

URL 是一个 URL。您可以通过与任何其他 URL 相同的方式在其中传递数据（即将其编码为查询字符串，然后使用 读取它们`$_GET`）。

> 顺便说一句，我认为位置不可能是相对的，对吗？

是的。大多数浏览器将对位置标头中的相对 URI 执行错误恢复（Lynx 会在向用户发出警告时这样做），但规范要求它们是绝对的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T11:56:56.617

你可以像这样使用它

```
header('Location: /mvc/index.php?attr='.$some_attributes); 
```

并像这样检索它`index.php`

```
echo $_GET['attr']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:04:07.693

您可以将错误消息放入会话中，重定向，在错误页面上显示错误消息，然后将其从会话中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:00:17.290

如果您的**var**是**Array**：

```
header('Location: /mvc/index.php?'.http_build_query($some_attributes)); 
```

# xcode - 创建发布版本时项目找不到框架

> ID：15681112
> 
> 赞同：1
> 
> 时间：2013-03-28T11:54:47.107
> 
> 标签：xcode, macos, cocoa, frameworks, linker

我在我的项目中添加了一个新框架。我将框架的 .xcodeproj 文件作为我项目的子项进行了拖动。我将该项目的产品添加到主项目的目标依赖项中，将二进制文件与库和复制文件（框架）进行链接。我在构建测试版本或执行我的项目时没有问题。

但是，如果我尝试创建存档版本或尝试分析项目，则会失败并出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_Something", referenced from:
      objc-class-ref in DasProject-F7DB55F503641F0A.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

**tl;dr：**我可以毫无问题地创建和执行调试版本，存档版本找不到特定的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:55:09.240

尝试将您的“库搜索路径”（“构建设置”->“搜索路径”）设置为“$(TARGET_BUILD_DIR)”或“$(BUILT_PRODUCTS_DIR)”（在我的项目中它们是相同的）
同时选中相应的复选框目标的构建方案，如[iOS 工具工作流程指南中](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/AA-Developing_a_Static_Library_and_Incorporating_It_in_Your_Application/archiving_an_application_that_uses_a_static_library.html)所述（忽略它是 iOS 文档，只看图像）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:54:48.247

我从头开始创建了一个新的 Cocoa 框架，并复制了我需要的 .h 和 .m 文件。这解决了问题。

在比较了这个框架和我正在使用的其他框架之间的构建选项并且没有看到任何不合适的地方之后，我真的怀疑这是 Xcode 中的一个错误。

# delphi - Delphi在属性中创建子类运行时间

> ID：15681113
> 
> 赞同：0
> 
> 时间：2013-03-28T11:54:52.077
> 
> 标签：delphi, oop, properties, subclass, rtti

您好，我有一个问题可以在 Delphi 中为创建子类做一个循环吗？我看到了一些关于 RTTI 的信息，但我找不到如何在运行时在属性中创建一个类

例子

谢谢你

```
Type
  TclassX = class
  private
  public
     X1 : integer;
     X2 : String;
end;

Type

  TRecord = class
     ID : TClassX;
     NAME : TClassX;
  private
  public
     contructor Create();
     property ID : TClassX read FY1 write SetY1;
     property NAME : TClassX read FY2 write SetY2;
end;

implementation

constructor TRecord.Create;
begin
   ///HERE I WHANT MAKE A LOOP AND DON'T MAKE ONE BY ONE
   // property[0] := ID;
   // property[1] := NAME;
   // FOR I:= 0 TO 1 DO BEGIN
   // ***PROPERTY[i] := TClassX.Create; ---*** not correct just exemple
   // END; 

   ID := TClassY.Create;  
   NAME := TClassY.Create;  
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:04:37.293

我会将类引用存储在一个数组中。然后为了语法上的方便，使用[索引属性](http://docwiki.embarcadero.com/RADStudio/en/Properties#Index_Specifiers)：

```
type
  TMyClass = class
  private
    FY: array [1..2] of TClassX;
    function GetY(Index: Integer): TClassX;
    procedure SetY(Index: Integer; const Value: TClassX);
  public
    constructor Create;
    property Y1: TClassX index 1 read GetY write SetY;
    property Y2: TClassX index 2 read GetY write SetY;
  end;

function TMyClass.GetY(Index: Integer): TClassX;
begin
  Result := FY[Index];
end;

procedure TMyClass.SetY(Index: Integer; const Value: TClassX);
begin
  FY[Index] := Value;
end; 
```

然后你可以简单地循环`FY`来实例化对象。

```
constructor TMyClass.Create;
var
  i: Integer;
begin
  inherited;
  for i := low(FY) to high(FY) do begin
    FY[i] := TClassY.Create;
  end;
end; 
```

说了这么多，所有这些脚手架真的有必要吗？[使用数组属性](http://docwiki.embarcadero.com/RADStudio/en/Properties#Array_Properties)不仅更容易吗？

```
type
  TMyClass = class
  private
    FY: array [1..2] of TClassX;
    function GetY(Index: Integer): TClassX;
    procedure SetY(Index: Integer; const Value: TClassX);
  public
    constructor Create;
    property Y[Index: Integer]: TClassX read GetY write SetY;
  end; 
```

然后，而不是写`Y1`你写`Y[1]`。使用数组属性为您提供了更大的灵活性，因为您可以使用变量对它们进行索引，从而在运行时而不是编译时决定您所指的是哪个对象。

# c# - 无法使用 xmlTextReader 读取 RSS 提要 - “名为‘链接’的列已属于此数据表”

> ID：15681114
> 
> 赞同：1
> 
> 时间：2013-03-28T11:54:56.107
> 
> 标签：c#, xml, asp.net-mvc, rss, xmltextreader

多年来，我一直在使用 xmlDataReader 来读取 RSS，但突然之间，我使用的两个提要引入了一个额外的行，这会导致 xmlDataReader 解析器出错。

问题是这里的第二行与第一行冲突：

```
<link>http://www.eventjobsearch.co.uk/jobsrss/</link>
<atom:link href="http://www.eventjobsearch.co.uk/jobsrss/" rel="self" type="application/rss+xml"/> 
```

解析器认为 atom:link 元素是 link 元素的副本。我个人并不需要 atom:link 行，但是当我使用流时，我看不到任何删除此行或删除冒号的方法（这将解决问题）。

我怎样才能摆脱流中的冒号，以便内置解析器再次工作？

```
 HttpWebRequest req = (HttpWebRequest)WebRequest.Create(WebConfigurationManager.AppSettings["XmlJobsFeedUrl"]);
 req.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)"; 

 WebResponse response = req.GetResponse();
 Stream stream = response.GetResponseStream();
 XmlTextReader xmlTextReader = new XmlTextReader(stream);
 DataSet jobs = new DataSet("Jobs");
 jobs.ReadXml(xmlTextReader); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:00:58.780

请参阅此[问题](https://stackoverflow.com/q/4349748/265165)和[解决方案](https://stackoverflow.com/a/4355030/265165)。直接在调用之前`jobs.ReadXml(...)`，您可以阅读架构：

```
jobs.ReadXmlSchema("http://www.thearchitect.co.uk/schemas/rss-2_0.xsd"); 
```

可能建议将 xsd 文件复制到您自己的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:04:51.670

我想你可能会这样做：

```
Stream stream = response.GetResponseStream();
Stream cleanStream = new Stream();

using (StreamWriter writer = new StreamWriter(cleanStream))
{
    using (StreamReader reader = new StreamReader(stream))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            // if the line doesn't match the problem then write it to the stream like this
            writer.WriteLine(line);
        }
    }
}

// and now use the cleanStream instead
XmlTextReader xmlTextReader = new XmlTextReader(cleanStream); 
```

这应该可以让你清理你收到的流。

# c# - 在 ODBC 连接的帮助下，从 oracle db 获取外键

> ID：15681125
> 
> 赞同：-2
> 
> 时间：2013-03-28T11:55:49.400
> 
> 标签：c#, oracle, odbc, key

我想从数据库中收集所有设计信息。我可以收集到最多的信息，但我无法获得有关外键的信息！是否有可能通过 ODBC 连接从 Oracle DB 获取外键？！？！？

例如，MSSql 在 C# 中提供了以下可能性：

```
SqlCommand myCommand = new SqlCommand("sp_fkeys", myConnection); 
```

C# 中是否存在 ODBC 的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:38:54.473

ODBC 具有允许对元数据进行独立于数据库的查询的功能。[从 ODBC Programmer's Reference 中的这一页](http://msdn.microsoft.com/en-us/library/windows/desktop/ms712628%28v=vs.85%29.aspx)开始，并查看标有“获取有关数据源的系统表（目录函数）的信息”的部分。特别是，您可能对[SQLForeignKeys](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709315%28v=vs.85%29.aspx)函数感兴趣。

分享和享受。

# c# - WinBioDeleteTemplate 函数返回 80098002？

> ID：15681130
> 
> 赞同：0
> 
> 时间：2013-03-28T11:56:18.277
> 
> 标签：c#, windows-7, biometrics, credential-providers

我正在用 c# 编程来开发 WBF FMA（Windows 生物识别框架指纹管理应用程序）。

我正在使用`WinBioDeleteTemplate()`函数来删除模板。它在大多数情况下都可以正常工作。

但有时它会返回 80098002 返回码。

我重新启动系统后，它工作正常。

那么，什么是问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:56:13.383

此错误表明单元 ID 号与有效的生物识别设备不对应。您可能将无效的单元 ID 传递给 WinBioDeleteTemplate()，这就是您收到此错误的原因。

# php - 使用 Facebook 登录登录 Facebook 用户

> ID：15681141
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:56:49.227
> 
> 标签：php, facebook, facebook-graph-api

我无法将 Facebook 登录集成到我的网站，因为它给了我一个错误：

> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

config.php 中的代码也是：

```
<?php
session_start();
$appID='Your App Id';
$appSecret='Your App Secret';
if($_SERVER['HTTP_HOST']=='localhost'){
$base_url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
}else{
$base_url='http://'.$_SERVER['HTTP_HOST'];
}
?> 
```

[我从http://www.idiotminds.com/login-with-facebook-using-php-sdk/](http://www.idiotminds.com/login-with-facebook-using-php-sdk/)找到了教程

Facebook 应用程序中的网站 URL 是：[http ://www.angeloscleanthous.com/chat/facebook/](http://www.angeloscleanthous.com/chat/facebook/)

画布 URL 与站点 URL 相同。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:02:25.130

如果 facebook 应用程序中的站点 URL 是：[http ://www.angeloscleanthous.com/chat/facebook/](http://www.angeloscleanthous.com/chat/facebook/)

然后

您必须通过以下方式访问 facebook api 代码

[http://www.angeloscleanthous.com/chat/facebook/](http://www.angeloscleanthous.com/chat/facebook/)

换句话说，当您将站点 URL 放在浏览器上时，您的访问 facebook api 的代码应该会运行。

# java - java 从字符串中提取 CEST/CET

> ID：15681144
> 
> 赞同：-1
> 
> 时间：2013-03-28T11:56:55.207
> 
> 标签：java, date, timezone

我的字符串如下：
02/03/07 11:13:33 CEST 或
02/03/07 11:13:33 CET。

如何以它认为 cet/cest 的方式将其解析为 util.Date？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:00:22.133

你需要使用`SimpleDateFormat`对象来做到这一点：

`Date d=new SimpleDateFormat("dd/MM/yy HH:mm:ss z").parse(string);`

这里`z`代表区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:01:19.543

使用`SimpleDateFormat`带有正确格式字符串的 a：

```
DateFormat df = new SimpleDateFormat("dd/MM/yy HH:mm:ss z");

String text1 = "02/03/07 11:13:33 CEST";
String text2 = "02/03/07 11:13:33 CET";

Date d1 = df.parse(text1);
Date d2 = df.parse(text2); 
```

# php - ASP.NET MVC 或任何其他现代 Web 开发框架是否提供一个单一的 Web 开发环境？

> ID：15681148
> 
> 赞同：-5
> 
> 时间：2013-03-28T11:57:01.957
> 
> 标签：php, asp.net, html, asp.net-mvc, web

我一直在网上搜索这个没有答案。我了解 Web 开发您担心前端（HTML、CSS、javascript）和后端（PHP、JSP、ASP.NET 等）。所有这些都使用不同的语言、技术、开发环境。那么我的问题是 ASP.NET MVC 是否提供了一个单一的 IDE（Visual Studio）和一种需要担心的语言/语法（C#）？如果是这样，是否有与此相比的开源比较？如果不是，那么使用微软的专有技术有哪些优点和缺点（即许可证、费用）？

* * *

因此，如果即使使用框架也没有单一语言，它是否只是一个 IDE（如 Visual Studio）？这本身就是一个优势吗？你对 PHP Cake 和其他框架有同样的看法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:03:58.307

ASP.NET MVC 使用 C#、html。在 MVC 4 中工作是一种乐趣。有很多书，我开始阅读 Jon Galloway:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:04:09.543

前端和后端没有一种语言。使用 PHP 或 C#/VB.net 之类的语言，您可以获得服务器解析的语言 (PHP/C#/VB) 和客户端浏览器解析的语言/标记 (Javacript/jquery/HTML/ CSS）。而且，您可以将两者混合使用（即：服务器可以解析 HTML 等）。所有 OO IDE 都支持其特定的后端代码 + 所有客户端代码。随着新技术的出现，大多数 IDE 将内置支持（即，对于 jquery）。.Net 有一个开源代码（[http://www.icsharpcode.net/opensource/sd/](http://www.icsharpcode.net/opensource/sd/)），但我从未使用过它。微软确实提供了免费版本的 .Net Studio（搜索快速版）

# sql-server-2008 - Sql server 的强制主键

> ID：15681150
> 
> 赞同：2
> 
> 时间：2013-03-28T11:57:03.607
> 
> 标签：sql-server-2008

创建新表时是否有任何配置设置`SQL Server 2008`？`Primary key must`

我知道 Oracle 不允许创建没有主键的表。但是 SQL Server 2008 没有这样的限制。

你知道这样做的任何方法吗（大多数时候我忘记创建它，SQL Azure 会为此给出错误）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:01:05.953

您可以为此使用 DDL 触发器，并且您必须解析 Sql 以检查是否正在创建 PK。我认为没有其他选择。

例子：

```
create trigger trgTable
on database
for create_table, alter_table
as
set nocount on

declare @data xml, @obj varchar(255), @type varchar(255), @cmd varchar(max)
set @data = EVENTDATA()

select 
    @obj    = @data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'varchar(256)'), 
    @type   = @data.value('(/EVENT_INSTANCE/ObjectType)[1]', 'varchar(25)'), 
    @cmd    = @data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'varchar(max)')

-- now do your logic here 
```

# ipython - IPython 笔记本的外部编辑器

> ID：15681153
> 
> 赞同：15
> 
> 时间：2013-03-28T11:57:22.860
> 
> 标签：ipython, ipython-notebook

我正在使用 IPython 笔记本，我想在外部编辑器中编辑程序。我如何`%edit file_name.py`才能打开 Notepad++ 等编辑器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T18:31:18.657

运行`%edit?`将为您提供`%edit`魔术功能的帮助。

您需要设置`c.TerminalInteractiveShell.editor`，它位于您的 ipython_config.py 中。我不太确定它在 Windows 中的位置；在 OS X 和 Linux 上，它位于 ~/.ipython 中。您需要将变量设置为所需编辑器的完整路径。

或者，您可以在 Windows 本身中创建一个环境变量 EDITOR，并将其设置为您想要的编辑器的完整路径。iPython 应该使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-15T05:11:35.067

我正在使用 Windows 7 和 8（以及 10TP）和 Python 3.4.2。

我开始`ipython locate`告诉我 ipython 认为其他地方建议的配置文件应该在哪里。当我看到它有所不同时，我四处阅读并得出以下结论：

*   在我的系统上，`ipython locate`给了我`c:\users\osmith\.ipython`，而不是`_ipython`你会在使用 Windows XP 完成的 YouTube 视频中看到的，
*   在目录中查找`ipython locate`为配置文件指定的目录；如果您没有积极地使用 ipython 配置文件做任何事情，那么应该是`.ipython\profile_default`，如果您正在使用配置文件，那么我将它留给您 s/profile_default/${YOUR_PROFILE_NAME}/ **g**
*   检查 profile_default 目录中的`ipython_config.py`文件，如果它不存在，告诉 IPython 初始化自己：`ipython profile create`
*   在文本编辑器中打开配置文件，

如果您是那种没有过多使用控制台并将东西安装在标准位置的人，您可以通过键入以下内容直接跳到此步骤：`ipython profile create`后跟`start notepad .ipython\profile_default\ipython_config.py`.

*   搜索字符串`c.TerminalInteractiveShell.editor`，
*   上面的注释表明您也可以使用 EDITOR 环境变量，但硬编码文件路径永远不会伤害任何人，所以让我们做一下：
*   复制该行并从副本中删除前导哈希和空格。
*   将撇号 ( `'notepad'`) 之间的文本替换为所需编辑器的路径，例如

    c.TerminalInteractiveShell.editor = 'c:/程序文件 (x86)/noddyeditor/noddy.exe'

不过，这里有一个问题。一些现代编辑器变得有点花哨和自动，当像这样调用时，会从控制台分离。例如 Notepad++ 和 Sublime Text。Sublime 接受一个“--wait”选项，它在某些时候有效；这告诉命令调用在你关闭文件之前一直存在，`until`对于`close`.

但是，以下设置在大多数情况下都适用于 sublime 文本：

```
c.TerminalInteractiveShell.editor = '"c:/program files/sublime text 3/subl.exe" --wait' 
```

（假设 c:\program files\ 是您的 sublime text 3 目录所在的位置）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T11:51:38.537

试试 'Pycharm' 编辑器
这对我有用。

# bash - 目录中文件的 Bash 脚本（备份）

> ID：15681154
> 
> 赞同：0
> 
> 时间：2013-03-28T11:57:22.917
> 
> 标签：bash, file, backup

所以，我需要在 bash 中编写一个脚本来备份目录文件。

脚本获取文件（备份文件列表）作为参数，最后一个参数必须是目标文件夹（目录）。如果目标文件夹不存在，则必须由脚本创建。

我打算使用 for 循环来移动参数列表（文件），但我不知道如何使用最后一个参数，并检查它是否存在。

脚本调用：

```
./myScript.sh file1 file2 file3... fileN target_folder 
```

谢谢。:)

我开始了这个：

```
#!/bin/bash

#doing backup of files passed as list of arguments.

if [ "$#" lt "2" ]
then 
    echo usage:  "./myScript.sh <list of arguments -files for backup.>"
    exit
fi
for arg in "$#"
do
    if #last argument exist as folder in directory, just copy all files in
            else #make targer folder and copy all files in 

done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:21:25.443

使用[`getopts`](http://wiki.bash-hackers.org/howto/getopts_tutorial)并将目录作为命名参数传递：

```
./myScript.sh -d target_folder file1 file2 file3... fileN 
```

# wpf - 数据绑定到 XAML 中的父数据上下文

> ID：15681156
> 
> 赞同：4
> 
> 时间：2013-03-28T11:57:25.937
> 
> 标签：wpf, xaml

这两个元素所在的用户控件有一个名为 ColumnTypes 的属性。

这些元素中的每一个都以相同的表达式相对地引用主数据上下文，但第一个不起作用**，**而后者起作用。

你知道如何调查吗？

```
<DataGrid  x:Name="DataGrid" AutoGenerateColumns="False" ItemsSource="{Binding Table}"  >
    <DataGrid.Columns>
            <DataGridComboBoxColumn  Header="Type"   >
                <DataGridComboBoxColumn.ItemsSource>
                    <Binding Path="DataContext.GetColumnTypes"   RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type UserControl}}" />
                </DataGridComboBoxColumn.ItemsSource>
            </DataGridComboBoxColumn>
    </DataGrid.Columns>
</DataGrid>
<ComboBox Grid.Row="1">
    <ComboBox.ItemsSource>
        <Binding Path="DataContext.GetColumnTypes"   RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type UserControl}}" />
    </ComboBox.ItemsSource>
</ComboBox> 
```

System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.UserControl'，AncestorLevel='1''的绑定源。BindingExpression:Path=DataContext.GetColumnTypes; 数据项=空；目标元素是“DataGridComboBoxColumn”（HashCode=53813616）；目标属性是“ItemsSource”（类型“IEnumerable”）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T13:18:48.700

这是`DataGridComboBoxColumn`.

您可以[在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcomboboxcolumn.aspx)查看可以将哪些内容绑定到它的`ItemsSource`属性。常规财产不是其中之一，因此您的情况将不起作用。

实现您想要的另一种方法是制作`DataGridTemplateColumn`包含 a 的 a `ComboBox`。

在你的情况下，看起来像这样：

```
<DataGrid.Columns>
    <DataGridTemplateColumn Header="Type">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <ComboBox ItemsSource="{Binding DataContext.GetColumnTypes, 
                        RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" />
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:18:39.453

`DataGridColumn`不在于`Visual Tree`DataGrid 因此它`can't inherit its DataContext`。但是有一些解决方法，即您可以明确地将 DataContext 提供给您的 DataGridColumns ，可以找到其详细信息将[DataContext 提供给 DataGrid Columns](http://blogs.msdn.com/b/jaimer/archive/2008/11/22/forwarding-the-datagrid-s-datacontext-to-its-columns.aspx)。

另外，我个人喜欢这里描述的方法 -[使用 Freezable 继承父 DataContext](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)或使用类继承`Freezable`。

`first link`万一链接将来不起作用的代码-

将此添加到您的`App.xaml.cs in App() constructor`-

```
FrameworkElement.DataContextProperty.AddOwner(typeof(DataGridColumn));
FrameworkElement.DataContextProperty.OverrideMetadata ( typeof(DataGrid),
new FrameworkPropertyMetadata 
   (null, FrameworkPropertyMetadataOptions.Inherits, 
   new PropertyChangedCallback(OnDataContextChanged))); 
```

OnDataContextChanged 回调只是将 DataContext 从 DataGrid 转发到其列：

```
public static void OnDataContextChanged ( DependencyObject d, 
                                          DependencyPropertyChangedEventArgs e)
{ 
    DataGrid grid = d as DataGrid ; 
    if ( grid != null  ) 
    {                 
        foreach ( DataGridColumn col in grid.Columns ) 
        { 
            col.SetValue ( FrameworkElement.DataContextProperty,  e.NewValue ); 
        } 
    } 
} 
```

# c# - 忽略字符串数组的第一项

> ID：15681158
> 
> 赞同：2
> 
> 时间：2013-03-28T11:57:28.933
> 
> 标签：c#

如果我的代码像这样`item`，如何忽略第一个`string[]``if (item=="")`

```
string[] temp3 = clearstring.Split(new string[]{@",","\r\n","\n","]", "\"", "}"}, StringSplitOptions.None);
temp.Close();

StreamWriter sW = new StreamWriter(Npath);

foreach (string item in temp3)
{
    if (item == "")
    {
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:02:18.703

使用[StringSplitOptions.RemoveEmptyEntries](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)

```
string[] temp3 = clearstring.Split(new string[]{@",","\r\n","\n","]", "\"", "}"}, StringSplitOptions.RemoveEmptyEntries); 
```

**编辑：**仅输入第一个空字符串的选项：

```
for(int i=0; i<temp3.Length; i++)
{
    string item = temp3[i];
    if(i==0 && item == string.Empty)
       continue;

    //do work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:58:41.377

您应该使用`continue`关键字。

话虽如此，您可能应该使用[String.IsNullOrEmpty](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)方法，而不是自己检查“”。

```
if (String.IsNullOrEmpty(item))
{
   continue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T11:58:50.640

见下文。您可以使用 continue 关键字。

```
for (int i=0; i < temp3.Length; i++)
    {
                        if (i == 0 && item3[i] == "")
                        {
                           continue;
                        }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:10:22.197

```
string[] temp3 = clearstring.Split(new string[]{@",","\r\n","\n","]", "\"", "}"}, StringSplitOptions.None);
temp.Close();

StreamWriter sW = new StreamWriter(Npath);

int i = 0;
foreach (string item in temp3)
{
    if (item == string.empty && i == 0)
    {
        continue;
    }
    // do your stuff here
    i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:10:53.153

你提到如果它是空的，你需要先跳过，最后跳过

```
string[] temp3 = clearstring.Split(new string[]{@",","\r\n","\n","]", "\"", "}"}, StringSplitOptions.None);
temp.Close();

StreamWriter sW = new StreamWriter(Npath);

for (int i=0; i< temp3.Length; i++)
{
    if ((i == 0 || i == temp3.Length-1) && string.IsNullOrEmpty(temp3[i]))
       continue;
    //do your stuff here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:40:54.343

为了完整起见，这里有几个 Linq 答案：

```
var stringsOmittingFirstIfEmpty = temp3.Skip(temp3[0] == "" ? 1 : 0);

var stringsOmittingFirstIfEmpty = temp3.Skip(string.IsNullOrEmpty(temp3[0]) ? 1 : 0);

var stringsOmittingFirstIfEmpty = temp3.Skip(1-Math.Sign(temp3[0].Length)); // Yuck! :) 
```

我认为我实际上不会使用其中任何一个（尤其是最后一个，这真是个笑话）。

我可能会去：

```
bool isFirst = true;

foreach (var item in temp3)
{
    if (!isFirst || !string.IsNullOrEmpty(item))
    {
        // Process item.
    }

    isFirst = false;
} 
```

或者

```
bool isFirst = true;

foreach (var item in temp3)
{
    if (!isFirst || item != "")
    {
        // Process item.
    }

    isFirst = false;
} 
```

甚至

```
bool passedFirst = false;

foreach (var item in temp3)
{
    Contract.Assume(item != null);

    if (passedFirst || item != "")
    {
        // Process item.
    }

    passedFirst = true;
} 
```

# asp.net-mvc - 在 MVC 4 应用程序中处理带有自定义错误的 UnauthorizedAccessException

> ID：15681159
> 
> 赞同：4
> 
> 时间：2013-03-28T11:57:31.960
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authorization, custom-error-pages, custom-error-handling

我通过在 filterConfig 注册中应用 HandleError 属性为应用程序启用了全局错误处理。

```
 public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }
} 
```

然后，我使用自定义错误（web.config）希望为每个服务器错误显示友好的错误消息。

```
 <customErrors mode="On"  ></customErrors> 
```

对于大多数异常，这似乎工作正常，并且我得到了预期的行为，因为正在显示自定义错误页面视图（共享视图文件夹中的 Error.cshtml）。

但是，我最近注意到，如果抛出的错误是 UnauthorizedAccessException，这不是我看到的行为。

我对此感到有些困惑，因为在 fiddler 中我看到这个 UnauthorizedAccessException 异常返回一个普通的 500 内部服务器错误，就像标准异常一样。

那么标准异常怎么会遵守我的 customError 设置而 UnauthorizedAccessException 却没有呢？

以及如何让它们表现相同，因为它们本质上都是一个错误，我想阻止最终用户看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:43:09.977

这篇博文为我提供了异常处理的概述，使我能够决定如何处理未授权访问异常，这实质上意味着在 Application_OnStart 中处理它们。

[http://prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc](http://prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)

出于我的目的，使用 HandleErrorAttribute 和全局 Application_OnStart 处理错误似乎没有多大意义，因此出于我的目的，我决定最好在 Application_OnSTart 中处理所有内容，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T19:04:01.053

如果您只想强制“未处理”异常，例如`UnauthorizedAccessException`通过正常的自定义错误页面，那么您可以覆盖控制器的 OnException 方法，如下所示：

```
 protected override void OnException(ExceptionContext filterContext)
    {
        base.OnException(filterContext);

        if (!filterContext.ExceptionHandled && filterContext.RequestContext.HttpContext.IsCustomErrorEnabled)
        {
            filterContext.ExceptionHandled = true;

            filterContext.HttpContext.Response.StatusCode = (int)System.Net.HttpStatusCode.InternalServerError;
            filterContext.Result = View("Error",
                new HandleErrorInfo(filterContext.Exception, filterContext.GetCurrentControllerName(), filterContext.GetCurrentActionName()));
        }
    } 
```

不过，您引用的文章是更全面地解释错误处理技术的极好资源，也应该加以考虑。

# android - 在 AndEngine 中为 Android 游戏使用 .obj 和 .max 文件

> ID：15681163
> 
> 赞同：0
> 
> 时间：2013-03-28T11:57:36.200
> 
> 标签：android, andengine

我正在使用**AndEngine**进行开发的游戏中工作。我在其中成功使用了*.jpg*和*.png*文件。但是当我尝试使用***Maya***动画文件（扩展名为*.max ）和**. obj*文件。谁能建议我如何使用*.max*文件。或者至少*.obj*文件在我的程序中。希望每个人都能清楚地理解我的问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:56:43.920

我不完全确定：但 AndEngine 是一个 2D 游戏引擎，而*.max*和*.obj*文件通常描述 3D 对象/动画。例如 obj 文件可以包含顶点，而 AndEngine 不能直接使用顶点（尽管某些扩展可能）。

我确信：您总是可以为您的 Maya 动画制作小屏幕截图，然后将它们全部放在一个 png 文件中，然后使用 png 图像代替。

# android - Android:startActivityForResult() 没有调用

> ID：15681169
> 
> 赞同：2
> 
> 时间：2013-03-28T11:57:53.717
> 
> 标签：android, android-intent, android-tabhost

我有一个应用程序，当我单击设置按钮时，我需要移动到另一个包含选项卡的活动。我构建了所有代码，它在 Acer 选项卡上运行良好。当我在三星 Galaxy(4.1.1) 中运行相同的应用程序时，它显示“不幸的是，应用程序已停止”错误。在下面检查我的代码：

```
settingsBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent prefIntent = new Intent(v.getContext(), Preferences.class);
                startActivityForResult(prefIntent, 0);
           }
    }); 
```

//Preferences.java

```
 setContentView(R.layout.preferences);
    private Button pref_close;
    pref_close   = (Button) findViewById(R.id.close_prefs);
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);
    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("wifi").setIndicator("Wifi Settings",null).setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent(this, AppSettings.class);
    spec = tabHost.newTabSpec("settings").setIndicator(" Clock Settings",null).setContent(intent);
    tabHost.addTab(spec);
    tabHost.setCurrentTab(0);

    pref_close.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            //finish();
                             setResult(RESULT_OK);
        }
    }); 
```

当我评论 startActivityForResult() 然后我的应用程序没有强制关闭并且preferences.java 文件没有调用时，问题就在这里。在我的 logcat 中显示任何错误，但显示为

```
03-28 11:30:37.734: E/AndroidRuntime(4668): java.lang.RuntimeException: Unable to resume activity {com.vision.clock/com.vision.clock.activity.Preferences}: java.lang.RuntimeException: Unable to resume activity {com.android.settings/com.android.settings.wifi.WifiPickerActivity}: java.lang.SecurityException: Given caller package com.android.settings is not running in process ProcessRecord 
```

我没有找到解决问题的解决方案。任何人都可以找到解决方案。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:05:26.240

```
settingsBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent prefIntent = new Intent(v.getApplicationContext(), Preferences.class);
                startActivityForResult(prefIntent, 0);
           }
    }); 
```

将 v.getContext() 更改为 v.getApplicationContext()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:39:16.960

由于您没有将任何数据从 Preference Activity 传递回第一个 Activity，因此您不需要首先实现 startActivityForResult。

在第一个活动中：

```
settingsBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent prefIntent = new Intent(v.getContext(), Preferences.class);
                startActivityForResult(prefIntent);
           }
    }); 
```

在首选项活动中：

```
pref_close.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            finish();

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T04:30:10.327

第一个活动

```
 settingsBtn.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent prefIntent = new Intent(v.getContext(), Preferences.class);
            startActivityForResult(prefIntent, 0);
       }
});

 ////this one add to your first activity after oncreate close

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data); 

    if (resultCode == RESULT_OK) {
       // your code  
             }
         } 
```

首选项.java

```
 pref_close.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) { 

      setResult(RESULT_OK);
      finish();
    }
}); 
```

# asp.net - Firebird 插入...返回 asp.net

> ID：15681172
> 
> 赞同：1
> 
> 时间：2013-03-28T11:58:02.307
> 
> 标签：asp.net, sql, firebird

我正在使用 Firebird 2.5 和 asp.net (4.5)。

我正在尝试找出如何使用插入...返回或类似的方法。

使用 fbDataReader，它执行插入 OK，但无论如何我都找不到访问返回值的方法。使用 fbDataReader.GetName(0) 似乎工作正常，在“返回”子句中返回变量名。这甚至适用于子选择中的 max()：..... 返回 (select max(userid) as newid from users) 返回文本“newid”。我找不到该值在哪里或是否可用。

使用 fbDataAdaptor 填充 DataTable，插入工作正常，但数据表似乎为空。

有谁知道这是否可行，如果可以，它是如何完成的？

谢谢

提供的编辑
代码：

```
strConn = .... 
dbConn = New FirebirdSql.Data.FirebirdClient.FbConnection(strConn)
dbConn.Open()

MySQL = "insert into  users (Firstname, Lastname) VALUES (@fname,@lname) returning userid"
FbC = New FirebirdSql.Data.FirebirdClient.FbCommand(MySQL, dbConn)
FbC.Parameters.Add("fname", FirebirdSql.Data.FirebirdClient.FbDbType.Text).Value = "Pete"
FbC.Parameters.Add("lname", FirebirdSql.Data.FirebirdClient.FbDbType.Text).Value = "Davis"

FbDataReader = FbC.ExecuteReader()
FbDataReader.Read()
TextBox1.Text = FbDataReader.GetName(0)
'TextBox1.Text  = str(FbDataReader.GetInt64())
'TextBox1.Text = FbDataReader.GetString(0)
TextBox1.Text = FbDataReader.GetValue(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:21:14.063

根据[此线程](http://firebird.1100200.n4.nabble.com/RETURNING-clause-and-Firebird-NET-Provider-td3039724.html) `INSERT ... RETURNING ...`的行为类似于 Firebird .NET 提供程序的输出参数。所以你需要添加一个输出参数。

所以类似下面的代码应该可以工作：

```
FbParameter outParam = new FbParam("userid", FbDbType.Integer) 
   {
      Direction = ParameterDirection.Output
   };
FbC.Parameters.Add(outParam);
FbC.ExecuteNonQuery();
int? userId = outParam.Value as int?; 
```

# sql - 用于更新 url 端口的数据库脚本

> ID：15681175
> 
> 赞同：0
> 
> 时间：2013-03-28T11:58:09.777
> 
> 标签：sql, database, relational-database

我有像这样的数据库表

```
Attachement
URL VARCHAR(300),
USER VARCHAR(100),
NAME VARCHAR (1000) 
```

URL 包含如下信息

`http://xample1.test.com:8081/test`, `http://example1.test.com:8081/test2`.

我想写一个脚本来更新这个 URL 的端口

`http://xample1.test.com:8083/test`, `http://xample1.test.com:8083/test2`.

数据库包含数百万条记录，因此`Update`需要执行查询。
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:15:38.427

你没有提到你的 RDBMS。

在 MySQL 中，它将是：

```
UPDATE Attachement
SET URL = REPLACE(URL, ':8081/', ':8083/') 
```

自己决定这是多么安全。您可能需要备份。

> 数据库包含数百万条记录，因此需要执行更新查询。

它需要尽可能长的时间，因为无论如何您都必须查找每一行，实际上没有改进的余地。

# ruby-on-rails - Ruby 中 gsub 的非正则表达式版本

> ID：15681177
> 
> 赞同：0
> 
> 时间：2013-03-28T11:58:15.367
> 
> 标签：ruby-on-rails, regex, replace, gsub

我正在寻找一个`gsub`不尝试将其输入解释为正则表达式并使用正常的类似 C 的转义字符串的版本。

**更新**

这个问题是由一个奇怪的行为引发的：

```
text.gsub("pattern", "\\\\\\") 
```

和

```
text.gsub("pattern", "\\\\\\\\") 
```

被视为相同，并且

```
text.gsub("pattern", "\\\\") 
```

被视为单个反斜杠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:45:41.747

gsub的第二个参数有两层转义：

第一层是 Ruby 字符串常量。如果它写得像`\\\\\\`Ruby 那样没有转义`\\\`

第二层是 gsub 本身：`\\\`被视为`\\`+`\`

双反斜杠被解析为 single: `\\`=>`\`并且末尾的单个尾随反斜杠被解析为自身。

8个反斜杠以类似的方式解析：

```
"\\\\\\\\" => "\\\\" 
```

进而

```
"\\\\" => "\\" 
```

所以由六个和八个反斜杠组成的常量被分解为两个反斜杠。

为了让生活更轻松，可以在 gsub 函数中使用一个块。块中的字符串常量仅通过 Ruby 层传递（感谢@Sorrow）。

```
"foo\\bar".gsub("\\") {"\\\\"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:03:07.467

`gsub`接受字符串作为第一个参数：

```
the pattern is typically a Regexp; if given as
a String, any regular expression metacharacters
it contains will be interpreted literally 
```

例子：

```
"hello world, i am thy code".gsub("o", "-foo-")
=> "hell-foo- w-foo-rld, i am thy c-foo-de" 
```

# java - 从文件系统以编程方式打开 Eclipse 自定义编辑器文件

> ID：15681179
> 
> 赞同：3
> 
> 时间：2013-03-28T11:58:16.920
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我正在使用我的自定义文本编辑器开发一个 Eclipse 插件。

我需要在这个自定义编辑器中以编程方式打开文件。当我使用 Eclipse 的 DefaultTextEditor 打开它时，文件会打开文件，我可以编辑文本等。

但是当我尝试使用我的编辑器打开文件时，编辑器变成空白并且不可编辑。这是我正在使用的来源。

```
 File file = new File(filename);
    IFileStore fileOnLocalDisk = EFS.getLocalFileSystem().getStore(file.toURI());
    FileStoreEditorInput editorInput = new FileStoreEditorInput(fileOnLocalDisk);

    IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    IWorkbenchPage page = window.getActivePage();

    try {
          // this works fine    
          page.openEditor(editorInput, "org.eclipse.ui.DefaultTextEditor");         

          // this is where the issue is
          page.openEditor(editorInput, "MyEditor.editor");          

    } catch (PartInitException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-08T21:18:47.743

尝试使用`IDE.openEditor(...)`.

这个 Eclipse wiki 有更多关于这个的信息：

[http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_programmatically%3F](http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_programmatically%3F)

# c++ - 在选定文件上设置光标位置 C++ Win API

> ID：15681182
> 
> 赞同：0
> 
> 时间：2013-03-28T11:58:20.717
> 
> 标签：c++, windows, winapi, visual-c++

如何在 C++ WIN API 中的选定文件上设置鼠标光标位置。

我想在选定的文件上移动鼠标光标，怎么做？

光标有一些很酷的视觉效果。我想做个好东西

我知道在 WIN API 中是一个函数 SetCursorPos(pt.x , pt.y); ，但是有没有解决方案来获取选定的文件位置，只需将光标位置设置为与选定文件相同的位置

# json.net - 需要帮助来解析 JSON 文件

> ID：15681189
> 
> 赞同：1
> 
> 时间：2013-03-28T11:58:35.753
> 
> 标签：json.net

这是我第一次编写相关的 JSON 文件。我下载使用 Newtonsoft.Json。我阅读了 Json.Net 上的文档，但我仍然无法弄清楚如何检索 Json 文件中的数据。希望可以有人帮帮我。我的问题是如何通过使用 LINQ 查询 JSON 来提取折扣信息？提前致谢。

有Json文件。

```
{"id":"id2356T14-Mar-2013",
 "date":"14-Mar-2013",
 "productInfo":[{"packing":"box",  "Qty":"36 dozen",
 "Discount":[{"Qty":"50 dozen", "percentage":"1"},
                   {"Qty":"100 dozen", "percentage":"2"}    ]
   }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:05:01.137

**C# 类：**

```
public class Discount
{
    public string Qty { get; set; }
    public string percentage { get; set; }
}

public class ProductInfo
{
    public string packing { get; set; }
    public string Qty { get; set; }
    public List<Discount> Discount { get; set; }
}

public class RootObject
{
    public string id { get; set; }
    public string date { get; set; }
    public List<ProductInfo> productInfo { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:07:33.743

JSON 不完整。它需要一个尾随 ] 和 } 才能正确关闭它。

```
{"id":"id2356T14-Mar-2013",
 "date":"14-Mar-2013",
 "productInfo":[{
   "packing":"box",  "Qty":"36 dozen",                     
   "Discount":[{"Qty":"50 dozen", "percentage":"1"},
              {"Qty":"100 dozen", "percentage":"2"}]
  }] 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:13:21.137

以下是你如何阅读你的第一个`Qty`和`percentage`价值

```
JObject myObj = (JObject)JsonConvert.DeserializeObject(jsonString);
foreach(var resource in myObj["Discount"])
{
    var props = resource.Children<JObject>().First();
    Console.WriteLine(props["Qty"] + " " + props["percentage"]);
} 
```

# solr - 在 Solr 中搜索 Null 和特定值

> ID：15681196
> 
> 赞同：0
> 
> 时间：2013-03-28T11:58:52.487
> 
> 标签：solr

我有一列 COUNTRY AS

```
<field name="COUNTRY" type="string" indexed="true" stored="true"> 
```

我需要将国家/地区的值搜索为美国或空白值，但我无法做到。

我试过了

```
fq=country[ U]

fq=country['' U]

fq=country[NULL U] 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:48:09.237

基于这些先前问题的答案

*   [如何在 Apache Solr 查询中 OR 空值？](https://stackoverflow.com/questions/7672259/how-to-or-null-value-in-apache-solr-query)
*   [在 Solr 中搜索日期范围或空/无字段](https://stackoverflow.com/questions/1343794/searching-for-date-range-or-null-no-field-in-solr)

您应该能够使用以下其中一项：

```
 -(-(country:usa)+(country:{* TO *})) 

 (-country:[* TO *] AND *:*) OR country:usa 
```

# jquery - nivo滑块和灯箱冲突jquery

> ID：15681198
> 
> 赞同：0
> 
> 时间：2013-03-28T11:58:55.037
> 
> 标签：jquery, lightbox, nivo-slider

任何人都可以帮助我使用这个 jquery 功能。我知道这两者都有冲突，但我不知道我必须改变什么。

它在页面上都允许使用。但是加在一起的灯箱不起作用。

灯箱

```
<script src="js/prototype.js" type="text/javascript"></script>
<script src="js/scriptaculous.js?load=effects,builder" type="text/javascript"></script>
<script src="js/lightbox.js" type="text/javascript"></script> 
```

尼沃滑块

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="slider/jquery.nivo.slider.js"></script>
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider({
    effect:'fade',
    slices:10,
    animSpeed:1500,
    pauseTime:10000,
    directionNav:true, //Next & Prev
    directionNavHide:true, //Only show on hover
    controlNav:true, //1,2,3...
    keyboardNav:true, //Use left & right arrows
    pauseOnHover:true, //Stop animation while hovering
    manualAdvance:false, //Force manual transitions
    captionOpacity:0.8, //Universal caption opacity
    beforeChange: function(){},
    afterChange: function(){},
    slideshowEnd: function(){} //Triggers after all slides have been shown
    });
  });
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:04:00.593

试试这个：

```
<script type="text/javascript">
var j = jQuery.noConflict();
j(window).load(function() {
  j('#slider').nivoSlider({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:49:47.500

只是说我有同样的问题。

插件：

*   原生画廊的 jQuery 灯箱
*   用于 WordPress 的 Nivo 滑块

我通过删除第 32 行使其工作：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
```

来自位于 \plugins\nivo-slider-for-wordpress\ 中的 nivoslider4wp-shop.php

我希望这会有所帮助。

# windows-7 - 是否有可能：使用代理服务器修改数据包

> ID：15681201
> 
> 赞同：0
> 
> 时间：2013-03-28T11:59:02.533
> 
> 标签：windows-7, proxy

是否可以为 windows (7) 设置代理并且所有数据包都通过代理服务器？我的意思是所有数据包甚至 ARP 数据包！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:04:45.160

当然，看一下 arp 欺骗/中毒基本上 arp 协议由机器工作，说这是我的 IP 地址，路由器记下并将具有此 IP 的任何数据包转发到该机器（Mac 地址）。所以基本上你必须以更快的速度发送arp消息，欺骗路由器，消息应该绑定到你的机器，而不是IP应该属于的实际mac地址。

只是要注意（arp 是 LAN 协议），所以如果您的代理不在子网中作为机器，您可能攻击它们是无法获得这些数据包的

# jquery - 在 jsPlumb 中使用“位置：相对”？

> ID：15681211
> 
> 赞同：0
> 
> 时间：2013-03-28T11:59:20.640
> 
> 标签：jquery, positioning, jsplumb

首先，我正在尝试（新手）jsPlumb。我似乎无法在 jsPlumb 文档中或通过谷歌搜索找到以下内容，现在我在兜圈子，所以必须是时候继续问了：基本上，我可以相对定位元素并让它们与 jsPlumb 一起使用吗？

例如，以下工作完美

```
<!DOCTYPE html><html>
<head>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
   <script type='text/javascript' src="PATH/TO/jquery.jsPlumb-1.3.16-all-min.js"></script>
</head>
<body>
   <div style='position: absolute; background-color: yellow; width: 100px; height: 100px' id='box1'>Box 1</div>
   <div style='position: absolute; background-color: pink; width: 100px; height: 100px' id='box2'>Box 2</div>
</body>

<script type='text/javascript'>
    jQuery(document).ready( function(){

       jsPlumb.draggable("box1");
       jsPlumb.draggable("box2");

       var e0 = jsPlumb.addEndpoint("box1", {
           endpoint:"Dot",
           anchor:"AutoDefault"
       });

       var e1 = jsPlumb.addEndpoint("box2", {
           endpoint:"Dot",
           anchor:"AutoDefault"
       });

       jsPlumb.connect({ source:e0, target:e1 });
})
</script>

</html> 
```

但是如果我将框的“位置：绝对”更改为“位置：相对”，那么行为就会变得不稳定（特别是在将框拖到当前视图之外时）。jsPlumb 是否只需要绝对定位的元素？如果我希望我的元素初始化相对定位会发生什么？如果有人问过这个（某种）问题或者它在某个地方的文档中，我深表歉意 - 但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:23:46.223

您的 div 必须是绝对定位的。具有相对定位的 Div 不适用于拖动[Check this](https://groups.google.com/forum/?fromgroups=#!searchin/jsplumb/hierarchical/jsplumb/pIdJeUnuAeU/30MS7mOwYPgJ)。

# verilog - 结构 Verilog 和行为 Verilog 有什么区别？

> ID：15681218
> 
> 赞同：9
> 
> 时间：2013-03-28T11:59:40.287
> 
> 标签：verilog

如标题所示，结构 Verilog 和行为 Verilog 之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T13:04:22.490

根据 IEEE 标准，这些术语没有严格的定义。然而，通常，**结构**是指使用模块实例来描述设计（尤其是对于较低级别的构建块，例如与门和触发器），而**行为**是指使用`always`模块来描述设计。

门网表总是**结构性**的，而 RTL 代码通常是**行为性**的。RTL 通常具有时钟门和同步器单元的实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-06T05:59:14.907

**结构**

> 这里的功能是使用基本组件定义的，例如反相器、MUX、加法器、解码器、基本数字逻辑门等。就像连接和布置可用于实现功能的电路的不同部分一样。

**行为的**

> Verilog 中的行为描述用于以算法的方式描述设计的功能。Verilog 中的行为建模使用类似于 C 语言结构的结构。此外，这分为 2 个子类别。

*   (a)**连续**

> 将数据分配给输出是连续的。这将使用显式的“分配”语句或通过在其声明期间为其分配一个值来实现。在分配的情况下，输入的任何变化都会立即影响输出。因此输出将被声明为 `wire`

*   (b)**程序**

> 这里的数据分配不是连续进行的，而是发生在敏感度列表中指定的特定事件上。这种类型的建模方案是使用诸如“always”或“initial”之类的程序块来实现的。
> 
> 在这里，必须将输出变量定义为，`reg`因为它们需要保持先前的值，直到在指定的敏感度列表发生任何变化后发生新的赋值。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T10:47:55.683

结构 Verilog 通常指的是可合成的（具有准确且有意义的硬件实现）的 Verilog 代码，通常以寄存器传输级别 (RTL) 编写。另一方面，行为 Verilog 通常是对更高级别的硬件或功能的行为描述。行为代码不必是可合成的，例如，当您在按时间尺度缩放的 verilog 代码中定义延迟时，合成器在将代码转换为逻辑和硬件时不会考​​虑它，而是具有模拟目的。结构和行为 VHDL 也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-04T01:33:22.977

行为不使用逻辑门描述您可以使用已经在 verilog 中定义的 And,Or,Not 门，而结构使用逻辑门描述您需要一个名为 (And/Or/Not) 的模块并描述它的作用& / | /~。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-17T09:35:31.803

结构 Verilog 用简单的词处理原语，如和、或、非等。原语从库中调用/推断，并与输入输出端口连接。例子

```
 module structural(y,a,b);
    input a,b;
    output y;
    and a1 (y,a,b); // and is the primitive inferred and a1 is the instance name.
 endmodule 
```

行为verilog处理系统的逻辑或行为。它处理复杂的逻辑实现，这就是为什么在工业上都实现称为 RTL 的系统行为模型。一旦前端工程师使用 SV/UVM 验证行为 RTL，然后此 RTL 将转换为门级，即用于综合的结构。

有关详细信息，请参阅 Samir Palnitkar 编写的 verilog 书。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-15T04:35:43.247

**Verilog**既是一种行为语言，又是一种结构语言。根据设计的需要，每个模块的内部可以在四个抽象级别上定义。结构 Verilog 描述了一个模块如何由更简单的模块或基本原语（如门或晶体管）组成。行为 Verilog 描述了如何将输出计算为输入的函数。

**行为级别**
-> 这是 Verilog HDL 提供的最高抽象级别。主要使用“always”和“initial”块构建。

**数据流级别**
-> 在这个级别，通过指定数据流来设计模块。条件描述使用“分配”关键字。

**门级**
-> 模块根据逻辑门和这些门之间的互连来实现。

**Switch level**
-> 这是 Verilog 提供的最低级别的抽象。一个模块可以通过交换机、存储节点以及它们之间的互连来实现。

# perl - 使用 perl 的列宽自动调整功能

> ID：15681221
> 
> 赞同：2
> 
> 时间：2013-03-28T11:59:53.113
> 
> 标签：perl, excel, ole

我已经使用 perl 脚本使用一组 csv 文件生成了 excel 表。我需要将列的宽度设置为**自动适应**。我想做什么我有在名为 OLE 的模块中执行此操作的方法我不知道该怎么做，请你帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:20:09.203

无法将文件的列设置为“AutoFit”，因为这不是文件的设置。Excel 对此进行计算并在运行时设置列宽。

一种选择是根据您的数据自己计算“AutoFit”宽度，然后将列宽设置为您计算的值。 [这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/spreadsheet-writeexcel/6XZBtM3mS5M)给出了一些解决方法代码。

另一个选项是用于[将`Win32::OLE`](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)列设置为 AutoFit。模块本身没有记录如何做到这一点；您必须搜索 Microsoft OLE 文档才能找到合适的命令。

**更新：** [这个网站](http://www.ngbdigital.com/perl_ole_excel.html)似乎展示了如何使用 AutoFit 和`Win32::OLE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:04:33.403

您可以使用[Excel::Writer::XLSX模块生成 Excel 文件，并使用](http://search.cpan.org/perldoc?Excel%3a%3aWriter%3a%3aXLSX)[set_column](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX-0.65/lib/Excel/Writer/XLSX.pm#set_column%28_%24first_col,_%24last_col,_%24width,_%24format,_%24hidden,_%24level,_%24collapsed_%29)方法调整列宽

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:52:24.170

[在此处](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel/Examples.pm#Example%3a_autofit.pl)查看 autofit.pl 示例

# azure - 将 Azure 连接示例移植到 Windows 商店 javascript 导航应用程序

> ID：15681232
> 
> 赞同：0
> 
> 时间：2013-03-28T12:00:30.417
> 
> 标签：azure, winjs, azure-mobile-services

我正在开发一个 Windows 商店 javascript 应用程序。该应用程序将使用来自 azure 的数据。当我尝试将 azure 连接示例移植到导航模板时，列表视图显示了表中的整个列。我使用了示例中相同的数据读取代码。html 页面和 css 与示例相同。

```
<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8" />
<!--head segment-->
<title>QuickStart</title>

<!-- WinJS references -->    
<link href="//Microsoft.WinJS.1.0/css/ui-light.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script>
<script type="text/javascript" src="/MobileServicesJavaScriptClient/MobileServices.js"></script>
<!-- QuickStart references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
<script src="/pages/Advertisement/advertisement.js"></script>
<link href="/pages/Advertisement/advertisement.css" rel="stylesheet" />    
</head>
<body>
<!--body segment-->
<div style="margin: 50px 10px 10px 50px" id="overalldiv">
<div style="display: -ms-grid; -ms-grid-columns: 1fr 1fr; -ms-grid-rows: auto 1fr;">

<div style="-ms-grid-column-span: 2; margin: 0px 0px 20px 0px;">
<div style="color: #0094ff; font-size: 8pt">WINDOWS AZURE MOBILE SERVICES</div>
<div style="color: #808080; font-size: 32pt">Sample</div>
</div>

        <div style="-ms-grid-row: 2; -ms-grid-column: 1;">
            <div style="display: -ms-grid; -ms-grid-columns: auto 1fr">
                <div style="-ms-grid-column: 1;" class="tasknumber">
                    1
                </div>
                <div style="-ms-grid-column: 2">
                    <strong>Insert a TodoItem</strong><br />
                    <span style="font-size: small">Enter some text below and click Save to insert a new todo item into your database</span>
                </div>
            </div>
            <div style="margin: 5px 0px 0px 72px; -ms-grid-column: 2">
                <input type="text" id="textInput" />
                <button id="buttonSave" style="margin-left: 5px">Save</button>
            </div>
        </div>

        <div style="-ms-grid-column: 2; -ms-grid-row: 2;">
            <div style="display: -ms-grid; -ms-grid-rows: auto 1fr">
                <div style="-ms-grid-row: 1">
                    <div style="display: -ms-grid; -ms-grid-columns: auto 1fr">
                        <div style="-ms-grid-column: 1; float: left;" class="tasknumber">
                            2
                        </div>
                        <div style="-ms-grid-column: 2">
                            <strong>Query and Update Data</strong><br />
                            <span style="font-size: small">Click refresh below to load the unfinished TodoItems from your database. Use the checkbox to complete and update your TodoItems</span>
                        </div>
                    </div>
                    <div style="margin: 5px 0px 0px 72px">
                        <button id="buttonRefresh">Refresh</button>
                    </div>
                </div>
            </div>

            <div id="TemplateItem" data-win-control="WinJS.Binding.Template">
                <div style="display: -ms-grid; -ms-grid-columns: auto 1fr">
                    <input class="itemCheckbox" type="checkbox" data-win-bind="checked: complete; dataContext: this" />
                    <div style="-ms-grid-column: 2; -ms-grid-row-align: center; margin-left: 5px" data-win-bind="innerText: text">
                    </div>
                </div>
            </div>

            <div id="listItems" style="-ms-grid-row: 2; margin: 20px 0px 0px 0px; -ms-grid-row-align: stretch"
                data-win-control="WinJS.UI.ListView"
                data-win-options="{ itemTemplate: TemplateItem, layout: {type: WinJS.UI.ListLayout} }">
            </div>

        </div>
    </div>
</div>
</body>
</html> 
```

实际示例项目仅显示 azure 数据库表中的文本字段，如下图所示。 ![Screenshot of the Actual Sample Output](../Images/4bc5031012ca461c5b492e6df18108df.png)

但在我的情况下，所有列字段都被显示 ![Screenshot of my application output](../Images/2761a08a983851313aca3c51d20a5142.png)

我应该如何只显示所需的内容以及我应该如何为列表视图内容进行格式化。我想以下列方式显示内容

1个
抗体

2
drag

3
dragon

4
arm .. .. ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:35:20.657

Have you set the [itemTemplate](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700705.aspx) for the ListView? You need to tell the ListView how to display each item of the itemDataSource

# java - 如何在 Java 中编写 DropDownButton

> ID：15681237
> 
> 赞同：7
> 
> 时间：2013-03-28T12:00:42.987
> 
> 标签：java, button, drop-down-menu

我需要在 Java 中创建一个这样的按钮：

![上下文菜单按钮](../Images/76e891ed4ffcecf75694be84a213e35f.png)

您可以单击按钮的左侧部分进行正常的按钮操作，也可以单击右侧的箭头打开下拉菜单。

是否可以在java中创建类似的东西？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:05:06.950

在本教程中，作者展示了如何创建一个按钮并在单击它时在其旁边显示一个下拉菜单。这看起来很像您尝试实现的目标。希望这可以帮助。

[http://java.dzone.com/news/drop-down-buttons-swing-new-al](http://java.dzone.com/news/drop-down-buttons-swing-new-al)

如果 Gnu Lesser GPL 适合您，拆分按钮可能会提供更简单的解决方案

[http://code.google.com/p/jsplitbutton/](http://code.google.com/p/jsplitbutton/)

# javascript - 将 javascript 变量放在 javascript 代码中包含的 html 链接中

> ID：15681241
> 
> 赞同：0
> 
> 时间：2013-03-28T12:00:49.747
> 
> 标签：javascript, html, google-maps-api-3

我想要一种简单的方法来在 google 地图信息框中从 javascipt 中的变量显示 html 中的图片。目前信息框显示图片链接：

```
var address = xmldata.getElementsByTagName('postalCode')[0].firstChild.data;
var picture = xmldata.getElementsByTagName('viewItemURL')[0].firstChild.data;
var info_text = picture + '<br />' + address; 
```

我试过了

```
var info_text = address + '<a href="picture"></a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:50.107

试试这个：

```
var info_text = address + '<img src="'+picture+'" alt="some alt text" />'; 
```

# ruby-on-rails-3 - Bootstrap 突出显示导航列表中的选定项目

> ID：15681246
> 
> 赞同：0
> 
> 时间：2013-03-28T12:00:55.463
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, slim-lang

所以我使用 bootstrap 和 slim 来构建一些可导航的页面。我坚持在列表中突出显示所选项目作为“激活”类应用。我确实找到了一个叫做 affix 或 scrollspy 的东西，但这些与我需要做的不同，即在页面之间导航。我有以下代码：

```
 .container-fluid
      .row-fluid
        .span2
          ul.nav.nav-list
            li.active = link_to 'Home', root_path
            li.divider
            li = link_to 'Openings', openings_path
            ...
        .span10
          ==yield 
```

我相信在这方面应该有一些最佳实践。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T16:38:30.930

如果您正在动态创建页面，那么您通常可以使用您的框架将**活动**类添加到菜单链接。我没有使用 ruby​​ on rails 的经验，所以我不能给你太多帮助。

不过，还有很多其他方法可以实现相同的目标。例如，您可以将类添加到各种页面的 body 标签，调整导航列表项的 HTML，添加 CSS 样式，一切顺利。

**HTML**

```
<body class="home"> 
or  
<body class="contact">  

<ul class="nav nav-list">
  <li class="home"> <a href="#">home</li>
  <li class="contact"> <a href="#">contact</li>
</ul> 
```

**CSS**

```
.home li.home a, .contact li.contact a{  
background-color#999;
color:white;
}

or if you want to go with the built-in Bootstrap active styling, 
something similar to this:  

.home li.home a, .contact li.contact a,
.home li.home a, .contact li.contact a:hover,
.home li.home a, .contact li.contact a:focus {  
color: #555555;
text-decoration: none;
background-color: #e5e5e5;
-webkit-box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
-moz-box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
} 
```

您可以将此方法用于动态和静态站点。

希望这可以让你开始！

# java - 当一个动作发生时中断一个线程然后恢复它？

> ID：15681247
> 
> 赞同：0
> 
> 时间：2013-03-28T12:00:57.563
> 
> 标签：java

我将使用一个名为**TaskThread**的线程对象来执行某些任务（实际上是 TimerTasks）。所有定时器任务仅由一个线程运行。我的程序的用户可以随时中断这个线程。当中断发生时，一个**方法**将运行，**TaskThread**只能在该**方法**完成后恢复。

是否可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:37:16.470

你不能中断一个线程，但是你可以让一个线程定期检查一个条件，通常是一个布尔标志，然后采取行动。

确保标志是`volatile`。`

# iphone - libYAJLIPhone 在哪里

> ID：15681250
> 
> 赞同：0
> 
> 时间：2013-03-28T12:01:04.253
> 
> 标签：iphone, xcode, static-libraries, yajl

我在哪里可以得到我的 iphone 项目的 libYAJLIPhone-0.2.2？只能找到失效的源码和旧版本链接

下面的链接都在下面进一步给出了错误：

[1](https://rel.me.s3.amazonaws.com/yajl/libYAJLIPhone-0.2.2.zip) [2](https://rel.me.s3.amazonaws.com/yajl/libYAJLIPhone-0.2.6.zip)

```
This XML file does not appear to have any style information associated with it. The document tree is shown below. 
```

GIT[站点](https://github.com/gabriel/yajl-objc)说要将副本复制`YAJLiOS.framework`到您的项目目录。但是我在master分支上找不到这个文件......

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:38:59.833

最新的文件可以在[这里找到](https://github.com/gabriel/yajl-objc/downloads)

# algorithm - QUEUE 的链表实现

> ID：15681252
> 
> 赞同：0
> 
> 时间：2013-03-28T12:01:07.053
> 
> 标签：algorithm, linked-list, queue, pseudocode

这是我使用双向链表的队列实现：

```
QUEUE-EMPTY
if L.head == NIL
    return True
else return False

QUEUE(x):
if L.head == NIL:
    x.prev = NIL
    L.head = x
else
    cur = L.head
    while cur.next != NIL
        cur = cur.next
    cur.next = x
    x.prev = cur
    x.next = NIL

DEQUEUE():
x = L.head
L.head = x.next
x.next.prev = L.head
return x 
```

怎么提高 ？那是对的吗 ？

有没有办法让 QUEUE O(1) ？

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:33:01.970

请参阅下面的更改+评论：

```
QUEUE(x):
if L.head == NIL:
    x.prev = **x.next =** NIL // otherwise you never set up next
    L.head = x
else
    cur = L.head
    while cur.next != NIL
        cur = cur.next
    cur.next = x
    x.prev = cur
    x.next = NIL

DEQUEUE():
// handle empty queue
**if L.head == NIL:
    ERROR! // or something
else**
    x = L.head
    L.head = x.next
    **if x.next != NIL:** // handle empty queue
        x.next.prev = ~~L.head~~ NIL // otherwise it points to itself
    return x
```

**要制作`QUEUE(x)`O(1)，您需要保留指向尾部的指针。**

```
QUEUE(x):
if L.head == NIL:
    x.prev = NIL
    L.head = L.tail = x
else
    cur = L.tail
    cur.next = L.tail = x
    x.prev = cur
    x.next = NIL

DEQUEUE():
if L.head == NIL:
    ERROR! // or something
else
    x = L.head
    L.head = x.next
    if x.next != NIL:
        x.next.prev = NIL
    else
        L.tail = NIL
    return x 
```

此外，您实际上并不需要双链表。单链表应该可以正常工作（除非您还想支持其他操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:47:11.683

队列有两种标准实现。

环形缓冲区可以存储在数组中，带有指向头部和尾部的指针。所有算术都是以数组的长度为模完成的。如果尾部赶上头部，则队列已经溢出，不能再使用。

另一种实现使用两个链表。第一个列表是队列的最前面，按顺序排列；第二个列表是队列的后面，以相反的顺序。项目被添加到第二个列表并从第一个列表中检索。每当第一个列表为空并且要获取一个项目时，第二个列表就会反转并成为第一个列表，并创建一个新的（空的）第二个列表。

两种实现都具有插入和获取/删除的时间复杂度 O(1)。环形缓冲区实现具有绝对时间复杂度 O(1)，但预先定义了队列的最大大小。假设有足够的内存可用，链表实现已摊销时间复杂度 O(1)，但对队列的最大大小没有限制。

# c++ - 复制构造函数...一个难题

> ID：15681261
> 
> 赞同：0
> 
> 时间：2013-03-28T12:01:34.140
> 
> 标签：c++, c++11, compiler-errors, unique-ptr

我有一个树类，它声明和定义了移动构造函数和移动赋值运算符。

为什么编译器会觉得需要合成一个复制构造函数，然后抱怨`std::unique_ptr`有私有成员？

这似乎适得其反。编译器是否应该不知道没有正文或根本未定义的隐藏副本和赋值是为了防止尝试复制 a `std::unique_ptr`？

而且，为什么用空主体声明和定义复制构造函数和赋值运算符会使编译器高兴？

当我继续使用这个类编写和构建代码时，这是否会引起关注？

**补充**：

1.  没有源代码，因为没有源代码错误……这是一个
    不需要源代码存在的问题。

2.  当复制构造函数是私有的时编译器会抱怨，所以我将它们公开；将再次设为私有并验证编译器是否存在问题。

3.  我正在使用 Visual Studio 2012 Professional IDE 及其相关的编译器。

为什么编译器在存在移动构造函数的情况下生成复制构造函数？似乎违反直觉，特别是如果没有在第一处定义复制构造函数。

**附加问题**：

好吧，Visual Studio 2012 似乎不支持 = delete 构造函数或赋值运算符的声明，隐藏我的声明会导致编译器在我的代码中哭泣。现在我该怎么做？我同意（如下）声明不做任何事情的复制构造函数是个坏主意，那么我还有什么其他选择？

如果真的想要小例子，这里就是。我的编译器不支持 = delete

```
class Tree{
    class TreeNode{
         "declaration of unique_ptr, cstrs, move cstrs, hidden copy cstrs"
    };
public:
     "declaration of unique_ptrs, cstrs, move cstrs, copy cstrs <----- compiler 
      complains if hidden"
}; 
```

对此使用 boost::variant

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:04:25.250

如果没有复制构造函数，编译器将尝试生成一个。默认的复制构造函数非常愚蠢，因此它会绊倒您的类的一些部分也就不足为奇了。

定义一个空的会为您提供一个不执行任何操作的复制构造函数，它会替换编译器原本会生成的复制构造函数，从而避免了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:18:52.103

> 为什么编译器会觉得需要合成一个复制构造函数，然后抱怨`std::unique_ptr`有私有成员？

它不应该，除非你的标准库是不兼容的，并且声明一个私有的而不是删除的复制构造函数`unique_ptr`; 即便如此，只有在您没有声明移动构造函数时才应该合成它。

如果你的类有`unique_ptr`成员，或者如果你声明了一个移动构造函数，那么它应该抱怨复制构造函数被删除；然后仅当您编写尝试复制它的代码时。

> 编译器是否应该不知道没有正文或根本未定义的隐藏副本和赋值是为了防止尝试复制 a `std::unique_ptr`？

这是正确的; 除了合成的复制构造函数和赋值被删除，而不是未定义。

> 而且，为什么用空主体声明和定义复制构造函数和赋值运算符会使编译器高兴？

因为您明确表示您希望它使用该（空）代码进行复制，而不是它可能（或可能不会）隐式生成的任何代码。不过这是个坏主意；如果您的类不可复制，那么您希望尝试复制它以生成错误，而不是不正确的运行时行为。

# java - 制作一个允许用户查看服务器桌面的 Web 应用程序

> ID：15681266
> 
> 赞同：0
> 
> 时间：2013-03-28T12:01:48.657
> 
> 标签：java, python, web-applications

我做了相当多的搜索，但找不到任何有用的东西来回答我的问题。要么，要么我问错了问题。

我正在尝试制作一个 Web 应用程序，它为用户提供服务器桌面的图形视图。我知道这里的某个地方必须调用 X 引擎，而且我也明白这不是 php 可以完成的事情，主要是因为它是一种在发送请求之前处理的语言，如果我在这方面错了，请纠正我。

你可能会说我想要完成的事情类似于 teamviewer 仅在网络上所做的事情。我的困境是我应该使用 python 还是 java 来完成这项任务，两者都非常适合这项任务，但哪个更好？

请提出你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:16:43.217

要允许用户与桌面实时交互，您需要在用户 Web 浏览器中运行应用程序。与网络服务器的交互太慢了，无法做任何有意义的事情。我不知道在网络浏览器中执行 Python 的任何方法，所以我会排除它。客户端代码执行的一些选项是：

*   Javascript（最近添加的 Canvas 和 WebSocket 使其适合此类问题）
*   Java Applets（最近因为安全问题而失宠）
*   ActiveX（仅限 IE 和 Windows，现在很少在公共环境中使用）
*   Flash（一种流行但正在消亡的技术）

# c - “程序中出现访问冲突（分段错误）”是什么意思？

> ID：15681269
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:01:53.800
> 
> 标签：c, multidimensional-array, matrix, int

我的 C 程序编译并运行良好，直到我从 main() 调用此函数

```
void rearrangeMainDiagonal(int mat[MAX_ORDER][MAX_ORDER], int order)
{
    int i, j, k=0, l=0, n=0;
    int temp[20], odd_temp[20], even_temp[20];

    for(i=0;i<order;i++) 
    {
        for(j=0;j<order;j++)
        {
            temp[k] = mat[i][i];
            k++;
        }
    }

    for(i=0;i<=k;i++)
    {
        if(temp[i]%2==0)
        {
            even_temp[l] = temp[i];
            l++;
        }
        else
        {
            odd_temp[n] = temp[i];
            n++;
        }
    }

    for(j=0;j<=n;j++)
    {
        temp[j] = odd_temp[j];
    }

    for(i=0;i<=l;i++,j++)
    {
        temp[j] = even_temp[i];
    }

    k=0;
    for(i=0;i<order;i++)
    {
        for(j=0;j<order;j++)
        {
            mat[i][i] = temp[k] ;
            k++;
        }
    }
} 
```

当我运行程序时，会弹出一条消息说'程序已停止工作。请关闭程序。当我尝试逐步执行它时，它显示“您的程序中出现访问冲突”并停止。包含行“temp[j] =odd_temp[j];”的“for 循环”弹出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:27:25.757

当您的程序尝试访问未分配给该程序的内存时，会发生分段错误。

分段错误（解除引用 NULL 指针除外）的最常见原因是访问超出其边界的数组。

前：

```
int arr[5];
for (int i=0; i<=5; i++)
    arr[i]=i; 
```

将引发分段错误，因为您访问了`arr`不存在的第 5 个元素（因此您尝试访问其后面未分配给您的内存。

您的程序中有多个地方可能会发生这种情况。

```
void rearrangeMainDiagonal(int mat[MAX_ORDER][MAX_ORDER], int order)
{
    int i, j, k=0, l=0, n=0; 
```

您创建固定大小的数组，但在使用它们时从不检查索引。如果我所有的其他调整都是正确的，最好使用：

```
 int temp[MAX_ORDER], odd_temp[MAX_ORDER], even_temp[MAX_ORDER]; 
```

并强制订单低于或等于 MAX_ORDER：

```
 assert(order <= MAX_ORDER); 
```

基于函数名我怀疑这个

```
 for(i=0;i<order;i++) 
    {
        for(j=0;j<order;j++)
        {
            temp[k] = mat[i][i];
            k++;
        }
    } 
```

需要尺寸`temp`；`order*order`

应该更像

```
 for(i=0;i<order;i++) 
    {
        temp[i] = mat[i][i];
    } 
```

因此将每个元素放在主对角线上一次在`temp`数组中，现在应该只有`order`大小

在这里，您循环 temp 直到第`k`'th 元素，您没有在上述循环的版本中设置该元素，因为您在分配后确实增加了 k，因此您应该循环直到`k-1`使用`i<k`而不是`i<=k`;

```
 for(i=0;i<=k;i++) 
```

应该变成（在上面的循环改变之后）；

```
 for(i=0;i<order;i++)
    {
        if(temp[i]%2==0)
        {
            even_temp[l] = temp[i];
            l++;
        }
        else
        {
            odd_temp[n] = temp[i];
            n++;
        }
    } 
```

再次没有设置`n`的第'个元素，使用`odd_temp``j<n`

```
 for(j=0;j<n;j++)
    {
        temp[j] = odd_temp[j];
    } 
```

再次没有设置`l`的第'个元素，使用`even_temp``i<l`

```
 for(i=0;i<l;i++,j++)
    {
        temp[j] = even_temp[i];
    } 
```

这里发生了与第一个循环相同的错误。这应该变成：

```
 for(i=0;i<order;i++)
    {
        mat[i][i] = temp[i];
    }
} 
```

现在您还可以删除变量 k 因为它未使用，并且如果该函数仍然执行您希望它执行的操作，它应该能够处理顺序为`MAX_ORDER`

# php - 带有内部 HTML 和 Javascript 的梅西弹出框

> ID：15681270
> 
> 赞同：0
> 
> 时间：2013-03-28T12:01:57.900
> 
> 标签：php, javascript, jquery, html, popup

我正在开发一个php应用程序，使用Messi，一个jquery弹出框： http: [//marcosesperon.es/apps/messi/](http://marcosesperon.es/apps/messi/)

在我的应用程序中，我有一个定价计划，我试图使其可编辑。这个想法是当他们点击一个按钮时，messi弹出框出现，他们可以选择一些选项并输入数据，然后将这些数据添加到表格中。

我已经到了单击按钮并弹出messi弹出框的阶段，显示用户可以选择不同选项的选择框。

代码如下：

```
function new_header()
{
    var content = "<form class='format_form' action='add_category.php' method='POST'>
                       <fieldset>
                           <legend>Choose a Pricing Category</legend>

                           <ol>
                               <li>
                                   <label for='category'>Category</label>

                                   <select id='category' name='category'>
                                       <option value='short_break'>Short Break</option>
                                       <option value='nightly_rate'>Nightly Rate</option>
                                       <option value='percentage_off'>Percentage Off</option>
                                       <option value='free_nights'>Free Nights</option>
                                   </select>
                               </li>
                           </ol>
                       </fieldset>

                       <fieldset>
                           <button type='submit' name='add_category' onclick='return validate_form();' id='add_category'>Add the Pricing Category</button>
                       </fieldset>
                   </form>";

    new Messi(content, {title: "Add a New Pricing Category", modal: true, width: '650px'});
} 
```

表格中是一个可点击的图片弹出messi弹出框，代码如下：

```
<th scope="col" class="rounded-topright">
    <img class='hover_off' src='../../../includes/images/table/add_header.png' width='25px' height='25px'>

    <a href='#' onclick='new_header()'>
        <img class='hover_on' src='../../../includes/images/table/add_header_hover.png' width='25px' height='25px'>
    </a>
</th> 
```

然后出现在messi 弹出框中的内容取决于用户在选择框中的选择。作为测试，我试图让系统在选择框选项更改时显示 javascript 警报，如下所示：

```
$(document).ready(function()
{ 
    var category_number;

    $("#category").change(function()    //When the category is changed
    { 
        category_number = document.getElementById('category').selectedIndex;        //Get the property location in the array

        alert(category_number);
    }); 
}); 
```

我已经尝试将此代码首先放入包含所有其他 javascript 的 .js 文件中，然后当它不起作用时，我将其放入带有原始定价表的 .php 文件中，但这也没有不行。

任何人都可以帮忙吗？还是失败了，想出一个更好的方法让我实现同样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:30:15.217

通过添加解决了该问题：

```
onchange='category_change(this)' 
```

进入选择框属性，然后创建一个函数**category_change()**来处理选定的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:30:57.683

尝试添加：

```
var category_number;

$("#category").change(function()    //When the category is changed
{ 
    category_number = document.getElementById('category').selectedIndex;        //Get the property location in the array

    alert(category_number);
}); 
```

在`var content`并使用 messi 弹出窗口启动它们

# yii - 带有所选 jquery 插件的相关下拉列表。动态更新

> ID：15681276
> 
> 赞同：0
> 
> 时间：2013-03-28T12:02:15.907
> 
> 标签：yii, yii-components

我是yii的新手，所以不要严格。我有来自模型的国家/州的依赖下拉列表。在选择 jquery 插件之前，它可以完美运行。我使用[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)。所以问题在于如何触发 liszt:updated，所以 2nd select 可以从标准 select 中获取数据。这是制作该列表的视图代码。

```
if ($field->varname=='country') {
        echo $form->dropDownList($profile, $field->varname,CHtml::listData(Countries::model()->findAll(),'short','title'), array(
        'class'=>"chzn-select",
        'empty'=>"Select country",  
        'ajax' => array(
                        'type' => 'POST',
                        'url'=>$this->createUrl('registration/state'),   
                        'update' => '#Profile_state',                        
                        'data'=>array('country'=>'js:this.value',),     

        )));

        }

        elseif($field->varname=='state') {
        echo $form->dropDownList($profile, $field->varname,array(), array(
        'empty'=>"Select state",
        'class'=>"chzn-select",

        )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:51:17.803

行。我找到了解决方案。把它写在这里（也许有人会觉得它有用）。在我们的视图文件中

```
echo $form->dropDownList($profile, $field->varname,CHtml::listData(Countries::model()->findAll(),'short','title'), array(
        'class'=>"chzn-select",
        'empty'=>"Select country",  
        'ajax' => array(
                        'type' => 'POST',
                        'url'=>$this->createUrl('registration/state'),   
                        'update' => '#Profile_state',                        
                        'data'=>array('country'=>'js:this.value',), 
                        'success'=> 'function(data) {
                                        $("#Profile_state").empty();
                                        $("#Profile_state").append(data);
                                        $("#Profile_state").trigger("liszt:updated");

                                                } ',

        ))); 
```

然后在第二个下拉列表中将数据留空：

```
echo $form->dropDownlist($profile, $field->varname, array(),array(
    'class'=>"chzn-select",
    'empty'=>"Select state",
    )); 
```

非常适合我，但给了我数小时的研究工作。

# c# - c#中如何获取远程服务器的SSL证书信息

> ID：15681283
> 
> 赞同：6
> 
> 时间：2013-03-28T12:02:27.773
> 
> 标签：c#, ssl, ssl-certificate

我必须在 c# 中开发一个应用程序来获取 SSL 证书信息，如到期日期、颁发者等基于我提供的 DNS（比如 *.google.com），以便如果到期日期临近，我可以主动处理它。如果我将 DNS 提供为 *.google.com，那么我需要获取该域的 SSL 证书信息的详细信息。

我尝试遵循[http://awesomeideas.net/page/Cert-Expiry-Check.aspx](http://awesomeideas.net/page/Cert-Expiry-Check.aspx)，但我觉得它适用于存储在本地系统中的证书。我也尝试使用 HttpWebRequest 来获取 SSL 证书的详细信息，但它要求我输入一个有效的 URI，在我的情况下这是不可用的。我只有 DNS 名称

下面是我用来使用 HttpWebRequest 获取信息的代码。但它要求我输入 https://*.domain.com 类型的有效 URI

```
Uri uri = new Uri(DNSEntry); 
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri); 
request.Method = WebRequestMethods.Http.Get; 
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
X509Certificate cert1 = request.ServicePoint.Certificate; 
X509Certificate2 cert = new X509Certificate2(cert1); 
DateTime dtCertExpiry = Convert.ToDateTime(cert.NotAfter.ToString()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T07:35:43.390

我尝试使用以下它工作正常：

string strDNSEntry 是您需要 SSL 的 DNS

```
public X509Certificate2 DownloadSslCertificate(string strDNSEntry)
{

    X509Certificate2 cert = null;
    using (TcpClient client = new TcpClient())
    {
        //ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;           
        client.Connect(strDNSEntry, 443);

        SslStream ssl = new SslStream(client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);
        try
        {
            ssl.AuthenticateAsClient(strDNSEntry);
        }
        catch (AuthenticationException e)
        {
            log.Debug(e.Message);
            ssl.Close();
            client.Close();
            return cert;
        }
        catch (Exception e)
        {
            log.Debug(e.Message);
            ssl.Close();
            client.Close();
            return cert;
        }
        cert = new X509Certificate2(ssl.RemoteCertificate);
        ssl.Close();
        client.Close();
        return cert;
    }
}

public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
        return true;

    Console.WriteLine("Certificate error: {0}", sslPolicyErrors);

    // Do not allow this client to communicate with unauthenticated servers. 
    return false;
} 
```

# java - 按开始位置到结束位置切片android中的视频

> ID：15681290
> 
> 赞同：4
> 
> 时间：2013-03-28T12:02:39.630
> 
> 标签：java, android

嗨，我有一个 30 分钟的视频文件，但我想将视频`00:09:23`从`00:25:33`. 当用户通过我的应用程序播放视频时，我想提取视频的一部分。在播放视频时，用户可以指定开始和结束持续时间来剪切视频。那么有什么方法可以根据持续时间剪切视频并保存到 SD 卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:37:46.093

您必须使用 JNI 约定编写一些 C 胶水代码，以将 FFmpeg 功能公开给 Java 代码。以下是 Android NDK 示例中用 C 语言实现的 JNI 方法示例：

```
jstring
Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
                                                  jobject thiz )
{
    return (*env)->NewStringUTF(env, "Hello from JNI !");
} 
```

您还需要一些 Java 代码来加载库并声明本机方法。

```
public class HelloJni
{
    public native String  stringFromJNI();

     static {
        System.loadLibrary("hello-jni");
    }
} 
```

我[在 sourceforge 上找到了这个项目，](http://jffmpeg.sourceforge.net/)它已经为 ffmpeg 实现了一些 JNI 接口，以将其与 Java 媒体框架集成。您可能会发现它很有用。

还有另一种称为 JNA（Java Native Access）的 Java FFI 技术允许您在 Java 中声明本机函数原型并直接调用它们。使用它可能需要更少的样板代码。有关 Android 实现，请参阅[此项目](http://code.google.com/p/javacv/wiki/JNAOnAndroid)。（我自己没用过）

您将需要包含可以从 Java 调用的[JNI](http://java.sun.com/docs/books/jni/)包装器方法，这些方法将依次调用 FFmpeg 函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T04:25:34.280

没有办法通过包含的 android api 来做到这一点。您将需要编写自己的逻辑来处理此问题。大多数视频编辑应用程序使用[ffmpeg](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20compile%20FFmpeg%20for%20Android)来处理这个，你需要编写一些 C 代码并使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)来完成这个。如果你搜索谷歌和堆栈溢出，你会发现很多问题和资源来开始这个。如果您不熟悉 NDK 和/或 ffmpeg，它可能会让人不知所措，但一旦您开始，您应该能够完成您正在寻找的东西。

# c++ - 在 C++/Excel 中连接圆圈

> ID：15681295
> 
> 赞同：0
> 
> 时间：2013-03-28T12:02:47.507
> 
> 标签：c++

这解释起来很复杂，所以我会尽力而为，如果有什么遗漏的地方，请告诉我，我会改正的。

我的问题是，我的任务是画出这个形状，

[![新月](../Images/9698970adaf33ceccfe3c757d40491c2.png)](https://i.stack.imgur.com/U7FwR.gif)
[（来源：[learnersdictionary.com](http://www.learnersdictionary.com/art/ld/crescent.gif)）]

这将使用 C++ 编写代码来计算此形状上的点。

重要细节。

用户输入 - 中心点 (X, Y)、要显示的点数、字体大小（影响半径）

输出 - 形状上的坐标列表。

一旦我有了这些点，总体目标就是将它们放入 Excel 上的图表中，并希望它会以用户输入的大小为我绘制它！

我知道最大半径为 165 毫米，最小为 35 毫米。我已经决定我的基础 [Font Size][1] 应该是 20。然后我做了一些思考并想出了这个等式。

半径 =（选择的字体大小/20）*130。这只是一个估计，我意识到它可能不对，但我认为它至少可以作为一个模板。

然后我决定我应该创建两个不同的圆，两个不同的中心点，然后将它们连接在一起以创建形状。我认为 INSIDE 线必须有一个更大的半径和一个沿 X 轴更远的中心点（Y 保持不变），因为它可以切入外线。*

*（我知道这不是图片上的样子，只是我的思路，因为它仍然会给出相同的形状）

所以我将第二个中心点定义为 (X+4, Y)。（再次，只是估计，认为它们相距多远并不重要）。

然后我决定 Radius 2 = (Chosen Font Size/20)*165 (max radius)

所以，我有我的 2 个半径和两个中心点。

到目前为止，这是我的代码（它有效，并且所有内容都在上面声明/输入）

```
for(int i=0; i<=n; i++) //output displayed to user
{                                          
Xnew = -i*(Y+R1)/n; //calculate x coordinate
Ynew = pow((((Y+R1)*(Y+R1)) - (Xnew*Xnew)), 0.5); //calculate y coordinate 
```

和

```
 for(int j=0; j<=n; j++)//calculation for angles and output displayed to user
{
Xnew2 = -j*(Y+R2)/((n)+((0.00001)*(n==0))); //calculate x coordinate
Ynew2 = Y*(pow(abs(1-(pow((Xnew2/X),2))),0.5));
if(abs(Ynew2) <= R1)
    cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl; 
```

我在绘制新月时遇到问题，我无法让两个圆圈具有相同的起点？

我已经设法将结果放到 Excel 中。这方面的一切都有效。但是当我在 Excel 上的图表上绘制点时，它们没有相同的起点。它本质上只是两个半圆，一个比另一个小（停在 Y 轴上，形成半个甜甜圈形状）。

如果这是有道理的，我试图让两个部分的圆来绘制形状，使它们具有相同的起点和终点。

如果有人对如何做到这一点有任何建议，那就太好了，由于圆圈没有连接，目前我正在获得更多的“半甜甜圈”形状。

所以。有没有人可以与我分享有关如何准确解决此问题的任何提示/提示/链接？

再次感谢，问题有任何问题，如果你让我知道，对不起，我会尽力纠正。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:23:01.467

圆上点的公式：

```
(x-h)^2+(y-k)^2=r^2

The center of the circle is at (h/k) 
```

求解 y

```
 2y1 = k +/- sqrt( -x^2 + 2hx +r^2 - h^2) 
```

所以现在如果内圈有它的中心 @ `h/k`，半月形将从 @ h 开始并延伸到`h - r2`

现在您需要求解内圆和外圆的端点公式并绘制它。每 x 你应该得到 4 分（解方程两次，每次有两个解）

我没有实现它，但这将是我的思路......

# java - BufferedReader 替换

> ID：15681296
> 
> 赞同：0
> 
> 时间：2013-03-28T12:02:52.050
> 
> 标签：java, text, bufferedreader

此方法用于将单词添加到 txt 文件然后对其进行排序，但我不允许在我的课程中使用缓冲阅读器功能。是否可以使用扫描仪来做到这一点

```
public static void Option1Method() throws IOException 
{
    FileWriter aFileWriter = new FileWriter("wordlist.txt", true);
    PrintWriter out = new PrintWriter(aFileWriter);
    String word = JOptionPane.showInputDialog(null, "Enter a word");

    out.println(word);
    out.close();

    aFileWriter.close();

    String inputFile = "wordlist.txt";
    String outputFile = "wordlist.txt";
    FileReader fileReader = new FileReader(inputFile);
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    String inputLine;
    List<String> lineList = new ArrayList<String>();
    while ((inputLine = bufferedReader.readLine()) != null) {
        lineList.add(inputLine);
    }
    fileReader.close();

    Collections.sort(lineList);

    FileWriter fileWriter = new FileWriter(outputFile);
    PrintWriter out1 = new PrintWriter(fileWriter);
    for (String outputLine : lineList) {
        out1.println(outputLine);
    }
    out1.flush();
    out1.close();
    fileWriter.close(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:10:53.017

你当然可以。`BufferedReader`这是使用和的等效代码`Scanner`

```
public void bufferedReaderVersion() throws Exception{
    File f = new File("filePath");
    Reader reader = new FileReader(f);
    BufferedReader bufferedReader = new BufferedReader(reader);

    String line = null;

    while((line = bufferedReader.readLine()) != null){
        System.out.println(line);
    }

    bufferedReader.close();
    reader.close();
}

public void scannerVersion() throws Exception{
    File f = new File("filePath");
    Scanner sc = new Scanner(f);

    while(sc.hasNext()){
        System.out.println(sc.nextLine());
    }

    sc.close();
} 
```

# android - Jsoup错误循环解析

> ID：15681299
> 
> 赞同：0
> 
> 时间：2013-03-28T12:03:01.427
> 
> 标签：android, parsing, jsoup

需要解析一些文本并将它们放在一个列表中。我喜欢这样：

```
try {
            Document doc = Jsoup.connect(URL).get();

            Elements main = doc.select("div.day");
            for (i = 0; i < main.size(); i++) {
                Element m = main.get(i);

                Elements date = m.select("h2");
                for (j = 0; j < date.size(); j++) {
                    Element m1 = date.get(j);
                    dates = m1.select("a").attr("href");    
                }

                Elements titles = m.select("div.ep_box");
                for (k = 0; k < titles.size(); k++) {
                    Element tts = titles.get(k);
                    title = tts.select("h3 a[href]").text();  // titles
                    time = tts.select("small").text();  // time 
                    url = tts.select("h3 a").attr("href"); // links

                    if (title.contains(inputSearch)) {  // search type
                        Order o = new Order();
                        o.setTextName(title);
                        o.setTextEpisode(time);
                        o.setTextDate(dates);
                        o.setDetailsUrl(url);
                        listItems.add(o);   

System.out.println("Title: " + title + "\n" + "Time: " + time + "\n" + "Link: " + url + "\n" + "========================");
                    } 
                }
            }               

        } 
```

在日志中一切都很完美：

```
03-28 17:50:29.421: I/System.out(13409): Title: Naruto SD: Rock Lee no Seishun Full-Power Ninden
03-28 17:50:29.421: I/System.out(13409): Time: Ep: 48 (17:30) - TV Tokyo
03-28 17:50:29.421: I/System.out(13409): Link: /show/601/Naruto_SD%3A_Rock_Lee_no_Seishun_Full-Power_Ninden
03-28 17:50:29.421: I/System.out(13409): ========================
03-28 17:50:29.449: I/System.out(13409): Title: Naruto Shippuuden
03-28 17:50:29.449: I/System.out(13409): Time: Ep: 303 (19:30) - TV Tokyo
03-28 17:50:29.449: I/System.out(13409): Link: /show/18/Naruto_Shippuuden 
```

但在列表中的模拟器中仅显示最后的标题、时间和链接。我该如何解决？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:53.243

我认为问题出在你的`object o`. 我认为您必须为循环中的每个新元素创建它 new：

```
 Order o = new Order();
 o.setTextName(title);
 o.setTextEpisode(time);
 o.setTextDate(dates);
 o.setDetailsUrl(url);
 listItems.add(o); 
```

否则，您每次迭代都会更改对象 o 的相同引用，这就是您只获得一个列表项的原因。

# google-code-prettify - 谷歌代码美化 xml 缩进

> ID：15681303
> 
> 赞同：3
> 
> 时间：2013-03-28T12:03:16.467
> 
> 标签：google-code-prettify

我在生成的 xml 文档中添加了换行符。

```
<aa>"\n"
<bb>some text etc.</bb>"\n"
</aa>"\n" 
```

这最终应该是：

```
<aa>
  <bb>some text etc.</bb>
</aa> 
```

这是否可以通过 google-code-prettify - 或者我应该在生成 xml 的代码中自己完成？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:05:24.963

Prettify 可以对源代码进行样式设置，但它不会重新缩进或换行。

它将在您的代码中保留标签，因此您可以使用换行符缩进您的代码，或者您可以使用 HTML 布局来执行此操作，如

```
<style>
  code.prettyprint { display: block; white-space: pre-wrap }
  div.el {margin-left: 2em}
</style>
<code class="prettyprint">
  <div class=el>&lt;aa&gt;<div class=el>&lt;bb&gt;...&lt;/bb&gt;</div>&lt;/aa&gt;</div>
</code> 
```

缩进一定量的`<div class=el>`用途，以及导致行在缩进块内换行的原因。`margin-left``pre-wrap`

# java - 在使用相同实例时从外部类调用内部类方法

> ID：15681305
> 
> 赞同：0
> 
> 时间：2013-03-28T12:03:20.410
> 
> 标签：java, multithreading, timer, scope

我试图创建一个 Timer 类，该类在时间到期时更改布尔值，但是我正在努力寻找一种方法来保持 Light 类的相同“实例”（因为我将拥有多个）我怀疑静态类和方法是答案，因为我总共有大约 5 盏灯

这是代码，我已经包含了我试图从实际 Light 类中的线程调用的方法以供参考。

```
 import java.util.TimerTask;

public class Light extends RoomObject{
    //Constructors
    public Light(String n, String r, boolean s){
        super(s, r, n);
    }

    //Class methods

    public String toString(){
        return "Light|" + super.getName() + "|" + super.toString() + "|";
    }

    public void setState(boolean s){
        super.setState(s);
    }
}

class TimedLight extends TimerTask{

    public void run() {

    }
} 
```

注意。我正在尝试从线程调用 setState 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:13:46.047

你可以试试这样的

```
class TimedLight  extends TimerTask{
Light light ;
TimedLight (Light light){
this.light = light;
}
 public void run() {
 light.setState(..);

 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:16:38.093

因为没有像错误所说的那样`TimedLight`包含*在 Light 类中。*要引用 Light，您需要引用它，为此您可以在构造函数中传递它。

```
public TimedLight(Light light){
   light.setState(..);
} 
```

`TimedLight`与嵌套类处于*同一级别*而*不是嵌套类*。所以你无权访问 TimedLight 中的 Light 实例。`Light`

# excel - 在 EXCEL 2010 中：我如何进行条件格式化以可视化两组变量的差异......？

> ID：15681309
> 
> 赞同：0
> 
> 时间：2013-03-28T12:03:40.490
> 
> 标签：excel, conditional-formatting

我想可视化两组变量之间的差异，例如我有两组变量 Original 并获得为：

```
Original = {1, 5, 7, 9}
obtained = {2, 5, 6, 8} 
```

现在，在 Excel 中，我想可视化两组之间的差异，这意味着变量是原始的，也可以在“获得”中找到，它可以用绿色（单元格颜色）着色。在“已获取”中找不到的变量可能是橙色，其他变量可能是红色。

（我的算法使用 VC++ 生成“Obtained”集，我想使用 MS Excel 进行条件格式化）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:26:19.063

是的，使用条件格式。

以下是一些可以帮助您的链接：

*   [Chip Pearson（Excel MVP 传奇）/cpearson.com](http://www.cpearson.com/excel/cformatting.htm)
*   [Debra Dalglish (Excel MVP Legend) / Contextures.com)](http://www.contextures.com/xlCondFormat01.html)

那应该让你开始

菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:29:14.197

我想也许你可能会在某个地方做一个隐藏的行，比如：

```
=IF(ISNA(HLOOKUP(A1;$A$2:$D$2;1;0));"";"+") 
```

假设您的第一组在第一行，第二组在第二行 - 然后当然沿着整行拖动公式 - 如果您更改比较集范围，请记住保持绝对引用。上面的符号是 openoffice calc 但它在 MSExcel 中是相同的（例如 ; -> ,）。现在你有条件地用“公式是”（不是“值是”）格式化第二行（“获得”）：

```
(A3="+") 
for the positive case setting background to green and 
(A3="") 
for the negative case setting background to orange 
```

希望它有帮助。

# xna - XNA 全屏问题

> ID：15681311
> 
> 赞同：0
> 
> 时间：2013-03-28T12:03:46.490
> 
> 标签：xna, fullscreen

我使用 XNA 制作游戏。我想在屏幕中心对齐精灵。这在全屏设置为 false 时效果很好。但是当我将 IsFullScreen 设置为 true 时，它​​不起作用。

我激活了控制台并在上面打印了屏幕尺寸。尺寸不错（1366 * 768）。我还打印了鼠标指针的当前位置，当我在右下角时，它显示 1279*719，这就是我的精灵不是居中对齐的原因。为什么 ？

```
width = GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Width;
height = GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Height;

_positionStart = new Vector2(width * 0.5F - _startButton.Width * 0.5F, height * 0.5F - 20); 
```

PS：我在 VS2012 中使用 XNA 4.0

PS2：对不起我的语法，我不会说流利的英语:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T03:01:58.607

可能是因为你的精灵的左上角被绘制在屏幕的中间，这意味着精灵将被稍微绘制在右侧并且稍微低一些。尝试比 0.5、0.45 甚至更低的值情人。这应该会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T16:22:38.310

好吧，如果另一个答案不起作用，那么更长但更有效的方法也将是：

1.  将 a 设置`Rectangle()`为对象，并使其充当边界框，并使用该`.Center`特征对齐它的中心。
2.  `height`和你一样除以`width`2，然后减去图像本身的高度和宽度的一半（如果你找不到，那么只需使用上面的边界框）。

希望这会有所帮助，我知道这篇文章现在有点老了，但其他人可能会偶然发现这个，并感谢这个答案！

# php - 在 PHP 中回显 HTML

> ID：15681317
> 
> 赞同：4
> 
> 时间：2013-03-28T12:04:02.703
> 
> 标签：php, html, echo

这更像是一个疑惑而不是技术问题，如果这个问题看起来很愚蠢或者答案对某些人来说是显而易见的，我很抱歉，但我想知道......

总是回显您需要编写的任何 HTML 或在需要编写 HTML 并在之后重新打开时关闭 PHP 标记会更好吗？本质上将 PHP 嵌入 HTML 中？

以下是每个示例：

```
 for($x=0;$x<count($customers);$x++)
            {

                echo '<tr>';
                echo '<td><a class=summary href=mailto:'.$customers[$x]["Email"].'>'.$customers[$x]["Email"].'</td>';
                echo '<td>'.$customers[$x]["Title"].'</td>';
                echo '<td>'.$customers[$x]["FirstName"].'</td>';
                echo '<td>'.$customers[$x]["Surname"].'</td>';
                echo '<td>'.$customers[$x]["DeliveryCountryID"].'</td>';
                echo '<td>'.$customers[$x]["LanguageID"].'</td>';
                echo '</tr>';
            } 
```

显示所有 HTML 都被回显

```
 <?php
                for($x=0;$x<count($customers);$x++)
                {
            ?>
                    <tr>
                    <td><?=$customers[$x]["Email"]?></td>
                    <td><?=$customers[$x]["Title"]?></td>
                    <td><?=$customers[$x]["FirstName"]?></td>
                    <td><?=$customers[$x]["Surname"]?></td>
                    <td><?=$customers[$x]["DeliveryCountryID"]?></td>
                    <td><?=$customers[$x]["LanguageID"]?></td>
                    </tr>
            <?php
                }
?> 
```

有在 HTML 中嵌入 PHP 的示例。

我问的原因是因为我刚开始我的编程生涯，我的经验不足，我加入了一家公司，他们的老开发人员显然比我更有经验，回应了一切。

我从来没有这样做过，因为我喜欢将 PHP 嵌入到我的 HTML 中，而且我发现他的代码有时难以阅读。

他这样做是有原因的，还是最好的方式，或者值得我慢慢地改变代码，让它更像我做事的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:19:01.917

有很多方法可以回显您的代码。你不能认为这是最好的方法。

一切都取决于你。你喜欢什么？在我的路上，我喜欢在 HTML 中嵌入 PHP（第二种方法）。但可能是其他的，比如在 php 中回显所有 HTML 代码。

整个事情取决于你。你选择什么。都一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:24:10.243

最好的方法是使用 Smarty 之类的模板引擎，并将您的业务逻辑和表示分离。这为您的代码提供了更大的灵活性。

在您的情况下，我更喜欢第二种方法`("<td><?=$customers[$x]["Email"]?></td>")`，因为它易于阅读和理解。这还有两个好处，

1.  如果您有其他人（例如设计师）在应用程序上工作，那么对他来说进行更改会更容易。
2.  将来，如果您决定使用模板引擎，您可以轻松地转换您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:25:32.027

首先问问自己“更好”是什么意思。

如果“更好”是更具可读性的东西，您可能会面临以下问题：

1.  在 HTML 代码中，如果有一些`<?php echo $var[attr]; ?>`你很容易错过它们。
2.  在 PHP 代码中，如果有很多`echo '<tr><td ............................ ';`你可能无法理解里面的内容，特别是如果你有很多转义字符。您必须添加换行符。

我的回答：这取决于对您来说更重要的是什么：HTML？使用 1\. PHP？使用 2。

如果“更好”比使用 1 更快，那么解析越少，耗时越少。但是这个时间真的很重要吗？

如果“更好”是更短且占用内存更少的内容，则 HTML 文件的文本更少。但是这些字节真的很重要吗？

无论如何，我总是避免合并这两种方法，例如：

```
<div>
  <p>Some text....</p>
<!-- some other stuff like lots of form fields -->
<?php
// some php code
echo '</div>'; 
```

这是因为在 IDE 中，如果不查看 PHP，您可以更轻松地找到未关闭标签等错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:33:44.287

这是个人喜好，但我见过的最常见的做法是以 HTML 为基础并在必要时插入 PHP。正如其他人所说，将您的业务逻辑与您的演示分开。为函数或代码隐藏使用单独的目录，然后在文档的开头执行 include_once。这样，您的演示代码是相当简单的 HTML（通常对设计人员来说更容易处理），并且 PHP 用于插入需要的内容。

当 PHP 像 CMS 一样使用或使用数据库驱动的 Web 内容时，这尤其有用。尽可能将你的逻辑与你的演示分开。

# java - 滚动的 Java 鼠标位置计算区域

> ID：15681319
> 
> 赞同：0
> 
> 时间：2013-03-28T12:04:06.063
> 
> 标签：java, swing, jscrollpane, mouse-position, jviewport

我不知道如何为此取一个好标题..但是我们开始吧：

我试图在单击标签时获得准确的鼠标位置，使用添加到 JScrollPane 的 JViewPort 中的 MouseAdapter 我的面板本身已添加到 JScrollPane 内。

当我尝试获取鼠标位置的坐标时，总是相对于可见的面板区域..它不计算不可见的区域，因为滚动..

我不知道如果我说清楚了，我希望如此.. 已经尝试使用来自 JViewPort 和 JScrollPane 的 getMousePosition 并且也没有工作.. 非常感谢！

这是一些代码：内部有面板的框架的构造..

```
public GraphViewer(ArrayList<TimeSlot> graph) throws HeadlessException {
    final MyCustomPanel panel = new MyCustomPanel(graph);
    panel.setPreferredSize(panel.getLargestSize());

    scroll = new JScrollPane(panel);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());
    add(scroll, BorderLayout.CENTER);

    JViewport v = scroll.getViewport();
    ViewportDragScrollListener l = new ViewportDragScrollListener(panel);
    v.addMouseMotionListener(l);
    v.addMouseListener(l);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:16:18.667

将 JViewport.getViewPosition() 添加到从 getMousePosition() 获得的坐标中怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T20:50:18.880

```
evento mouseClicked...

x= event.getX();

luego:

Point pos =    scrollImagen.getViewport().getViewPosition();
pos.translate(x, y);
...
double nuevaPosx = pos.getX(); 
```

# java - 创建 BasicClientCookie

> ID：15681328
> 
> 赞同：1
> 
> 时间：2013-03-28T12:04:39.247
> 
> 标签：java, android, cookies, httpclient

我需要存储 cookie 才能在关闭应用程序后保持会话。为此，我需要能够保存 cookie，然后重新创建它。我当前的问题是我无法正确创建 BasicClientCookie。域为空，或其他数据为空。

测试代码：

```
List<Cookie> cookies = this.httpClient.getCookieStore().getCookies();
if (cookies != null) {
    Log.print("SAVING TO COOKIE CACHE");
    for (Cookie cookie : cookies) {
        String cookieString = cookie.getName() + "=" + cookie.getValue()
                + "; domain=" + cookie.getDomain();
        Log.d("Saving cookie: %s", cookieString);
        String[] keyValueSets = cookieString.split(";");
        if (keyValueSets.length == 0 || keyValueSets[0] == null) {
            break;
        }
        String[] keyValue = keyValueSets[0].split("=");
        if (keyValue.length == 0 || keyValue[0] == null) {
            break;
        }
        String key = keyValue[0];
        Log.d("Adding cookie with key %s and value %s", key, cookieString);
            Cookie co = new BasicClientCookie(key, cookieString);
        Log.print("Cookie domain: " + co.getDomain());
        Log.print("Cookie name: " + co.getName());
        Log.print("Cookie val: " + co.getValue());
        Log.print("Cookie comment: " + co.getComment());
        Log.print("Cookie commentUrl: " + co.getCommentURL());
        Log.print("Cookie path: " + co.getPath());
        Log.print("Cookie version: " + co.getVersion());
        Log.print("Cookie date: " + co.getExpiryDate());
        CookieManager.getInstance().setCookie(cookie.getDomain(), cookieString);
        this.cacheManager.setString(TAG, cookie.getDomain());
    }
}
CookieSyncManager.getInstance().sync(); 
```

日志猫：

```
03-28 13:56:35.405: E/PRINTER(9714): SAVING TO COOKIE CACHE
03-28 13:56:35.405: D/Debug(9714): Saving cookie: ci_session=a%3A5%3A%7Bs%3A10%3A%22session_id%22%3Bs%3A32%3A%22123e722edd173a295c1e8f3efae7c0ba%22%3Bs%3A10%3A%22ip_address%22%3Bs%3A13%3A%2287.32.150.212%22%3Bs%3A10%3A%22user_agent%22%3Bb%3A0%3Bs%3A13%3A%22last_activity%22%3Bi%3A1364471789%3Bs%3A9%3A%22user_data%22%3Bs%3A0%3A%22%22%3B%7D784e1b95d3e5b11fb969d137a67676bb; domain=test.address.lt
03-28 13:56:35.405: D/Debug(9714): Adding cookie with key ci_session and value ci_session=a%3A5%3A%7Bs%3A10%3A%22session_id%22%3Bs%3A32%3A%22123e722edd173a295c1e8f3efae7c0ba%22%3Bs%3A10%3A%22ip_address%22%3Bs%3A13%3A%2287.32.150.212%22%3Bs%3A10%3A%22user_agent%22%3Bb%3A0%3Bs%3A13%3A%22last_activity%22%3Bi%3A1364471789%3Bs%3A9%3A%22user_data%22%3Bs%3A0%3A%22%22%3B%7D784e1b95d3e5b11fb969d137a67676bb; domain=test.address.lt
03-28 13:56:35.405: E/PRINTER(9714): Cookie domain: null
03-28 13:56:35.405: E/PRINTER(9714): Cookie name: ci_session
03-28 13:56:35.405: E/PRINTER(9714): Cookie val: ci_session=a%3A5%3A%7Bs%3A10%3A%22session_id%22%3Bs%3A32%3A%22123e722edd173a295c1e8f3efae7c0ba%22%3Bs%3A10%3A%22ip_address%22%3Bs%3A13%3A%2287.32.150.212%22%3Bs%3A10%3A%22user_agent%22%3Bb%3A0%3Bs%3A13%3A%22last_activity%22%3Bi%3A1364471789%3Bs%3A9%3A%22user_data%22%3Bs%3A0%3A%22%22%3B%7D784e1b95d3e5b11fb969d137a67676bb; domain=test.address.lt
03-28 13:56:35.405: E/PRINTER(9714): Cookie comment: null
03-28 13:56:35.405: E/PRINTER(9714): Cookie commentUrl: null
03-28 13:56:35.405: E/PRINTER(9714): Cookie path: null
03-28 13:56:35.405: E/PRINTER(9714): Cookie version: 0
03-28 13:56:35.405: E/PRINTER(9714): Cookie date: null
03-28 13:56:35.890: D/Debug(9714): Saving cookie: PHPSESSID=97eotn8964tgvv9j80uk8dddh5; domain=test.address.lt
03-28 13:56:35.890: D/Debug(9714): Adding cookie with key PHPSESSID and value PHPSESSID=97eotn8964tgvv9j80uk8dddh5; domain=test.address.lt
03-28 13:56:35.890: E/PRINTER(9714): Cookie domain: null
03-28 13:56:35.890: E/PRINTER(9714): Cookie name: PHPSESSID
03-28 13:56:35.890: E/PRINTER(9714): Cookie val: PHPSESSID=97eotn8964tgvv9j80uk8dddh5; domain=test.address.lt
03-28 13:56:35.890: E/PRINTER(9714): Cookie comment: null
03-28 13:56:35.890: E/PRINTER(9714): Cookie commentUrl: null
03-28 13:56:35.890: E/PRINTER(9714): Cookie path: null
03-28 13:56:35.890: E/PRINTER(9714): Cookie version: 0
03-28 13:56:35.890: E/PRINTER(9714): Cookie date: null 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:50:56.770

我找不到任何关于 BasicClientCookie 的好文档，所以我决定在关闭程序时将所有组件（如 getDomain()、getValue() 等）存储在由特殊符号序列分隔的字符串中，以及稍后再次启动程序时，我从内存中加载该字符串，解析单独的值，然后使用 setDomain()、setValue() 等方法来创建有效的 cookie。现在这似乎工作得很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T23:52:02.513

为了让会话保持活动状态并存储 cookie，您实际上可以实现 Cookie 接口，这是一个示例：

```
package com.transit.http;

import java.util.Date;
import org.apache.http.cookie.Cookie;

public class TransitCookie implements Cookie {

private String name;
private String value;
private String comment;
private String commentURL;
private String domain;
private String path;
private Date expiryDate;
private boolean persistent;
private boolean secure;
private int[] ports;
private int version;

@Override
public String getName() {

    return name;
}

@Override
public String getValue() {
    return value;
}

@Override
public String getComment() {
    return comment;
}

@Override
public String getCommentURL() {
    return commentURL;
}

@Override
public Date getExpiryDate() {
    return expiryDate;
}

@Override
public boolean isPersistent() {
    return persistent;
}

@Override
public String getDomain() {
    return domain;
}

@Override
public String getPath() {
    return path;
}

@Override
public int[] getPorts() {
    return ports;
}

@Override
public boolean isSecure() {
    return secure;
}

@Override
public int getVersion() {
    return version;
}

@Override
public boolean isExpired(Date date) {
    if (expiryDate != null) {
        return date.after(expiryDate);
    }
    /**
     * In this case, we must return false otherwise this cookie will be
     * rejected
     */
    return false;
}

public void setName(String name) {
    this.name = name;
}

public void setValue(String value) {
    this.value = value;
}

public void setComment(String comment) {
    this.comment = comment;
}

public void setCommentURL(String commentURL) {
    this.commentURL = commentURL;
}

public void setDomain(String domain) {
    this.domain = domain;
}

public void setPath(String path) {
    this.path = path;
}

public void setExpiryDate(Date expiryDate) {
    this.expiryDate = expiryDate;
}

public void setPersistent(boolean persistent) {
    this.persistent = persistent;
}

public void setSecure(boolean secure) {
    this.secure = secure;
}

public void setPorts(int[] ports) {
    this.ports = ports;
}

public void setVersion(int version) {
    this.version = version;
}

} 
```

如果您想对其进行序列化，请实现 java.io.Serializable。祝你好运。

# c# - 具有两个 GET 操作的 WebApi 控制器

> ID：15681330
> 
> 赞同：8
> 
> 时间：2013-03-28T12:04:40.623
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我想要两个不同的 GET 操作来查询数据，名称和 ID，

我有这些路线：

```
 config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "ActionApiByName",
            routeTemplate: "api/{controller}/{action}/{name}",
            defaults: new { name = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

以及控制器中的这些操作：

```
 [HttpGet]
    public CompanyModel CompanyId(Guid id)
    {
          //Do something
    }

    [HttpGet]
    public CompanyModel CompanyName(string name)
    {
            //Do something
    } 
```

而像这样的调用：`http://localhost:51119/api/companies/CompanyId/3cd97fbc-524e-47cd-836c-d709e94c5e1e` 工作并获得'CompanyId'方法，

一个类似的电话`http://localhost:51119/api/companies/CompanyName/something`让我找不到 404

但是这个：' `http://localhost:51119/api/companies/CompanyName/?name=something`'工作正常

谁能解释这种行为以及我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:13:53.743

Web API 路由选择器无法知道 URL 末尾的字符串是否为 GUID。因此，它不会为适当的 GET 操作选择正确的路由。

为了选择正确的路由，您需要为 GUID uri 模板添加路由约束。

```
 public class GuidConstraint : IHttpRouteConstraint
    {
        public bool Match(HttpRequestMessage request, IHttpRoute route, string parameterName, IDictionary<string, object> values,
                          HttpRouteDirection routeDirection)
        {
            if (values.ContainsKey(parameterName))
            {
                string stringValue = values[parameterName] as string;

                if (!string.IsNullOrEmpty(stringValue))
                {
                    Guid guidValue;

                    return Guid.TryParse(stringValue, out guidValue) && (guidValue != Guid.Empty);
                }
            }

            return false;
        }
    } 
```

然后，将约束添加到将处理 GUID 的路由。

```
config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = new GuidConstraint() }  // Added
        ); 
```

由于此路由比一般的“字符串”路由更具体，因此需要将其放置在要解析名称的路由之上。

这应该适当地路由到操作。

希望这可以帮助。

# javascript - 从屏幕上给定的像素区域生成 png

> ID：15681331
> 
> 赞同：2
> 
> 时间：2013-03-28T12:04:43.087
> 
> 标签：javascript, image, png, client-side

我知道可以使用 javascript 从 canvas 元素生成图像，但是如果您有一个给定区域（仅限 div 和图像）并且您想将该给定区域设为 png 以供某人下载客户端怎么办？

这甚至可以用 javascript 实现吗？如果不能用 js，那么其他语言也可以吗？

也许某种自动截取屏幕截图并以编程方式裁剪到正确大小的方法？我不知道...谢谢:)

# jquery - JQuery Mobile pageShow 和 pageCreate 事件未触发

> ID：15681335
> 
> 赞同：2
> 
> 时间：2013-03-28T12:04:48.340
> 
> 标签：jquery, jquery-mobile

我有一个 JQuery 移动应用程序。在应用程序的第一页上，我正在尝试在加载时设置一些字段值（如果之前已设置）。为了做到这一点，我目前有以下内容：

## 索引.html

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="stylesheet" href="/resources/css/themes/mobile/core.css" />
    <link rel="stylesheet" href="/resources/css/themes/mobile/app.css" />

    <script type="text/javascript" src="/resources/scripts/jquery-1.9.1.min.js"></script>  
    <script type="text/javascript" src="/resources/scripts/app.ui-1.0.js"></script>     
    <script type="text/javascript" src="/resources/scripts/jquery.mobile-1.3.0.min.js"></script>
  </head>
  <body>
    <div id="loginPage" data-role="page">
      <div data-role="header" data-position="fixed"><h1>AppName</h1></div>
      <div data-role="content">
        <label for="usernameTextBox">Username</label>
        <input id="usernameTextBox" type="text" autocomplete="false" /><br />

        <label for="passwordTextBox">Password</label>
        <input id="passwordTextBox" type="password" /><br />

        <div class="ui-grid-a"><div class="ui-block-a">
          <a href="#" id="loginButton" data-role="button" class="dd-btn-a" onclick="return loginButton_Click();">Login</a></div>
        </div>
      </div>
    </div>
  </body>
</html> 
```

## app.ui.js

```
$("#loginPage").on("pagecreate", function () {
    alert("here 1");
    $.mobile.hidePageLoadingMsg();
});

$("#loginPage").on("pageshow", function () {
    alert("here 2");
    $.mobile.hidePageLoadingMsg();

    var us = false;
    var ps = false;

    var u = window.localStorage.getItem("username");
    if ((u != null) && (u != undefined) && (u.length > 0)) {
        if (u != "undefined") {
            $("#usernameTextBox").val(u);
            us = true;
        }
    }
    alert(u);

    var p = window.localStorage.getItem("password");
    if ((p != null) && (p != undefined) && (p.length > 0)) {
        if (p != "undefined") {
            $("#passwordTextBox").val(p);
            ps = true;
        }
    }

    if ((us == true) && (ps == true)) {
        loginButton_Click();
    }
}); 
```

奇怪的是，我的“警报”框都没有被触发。此外，我在控制台窗口中看不到任何错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:11:21.730

在结束正文标记`app.ui-1.0.js`之前导入您的。`</body>`然后它会工作。原因是您的 js 文件将在加载 DOM 以及 jQuery 文件之前执行。所以不会火。

始终确保按以下顺序导入

1.  jQuery 框架
2.  jQuery 移动框架
3.  jQuery插件
4.  您的自定义 js 文件

正如 Gajotres 提到的，将您的代码包装在以下代码段中是一种很好的做法。

```
$(document).on("pagecreate", "#loginPage", function () { 
// your code here
}); 
```

如下所示

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="stylesheet" href="/resources/css/themes/mobile/core.css" />
    <link rel="stylesheet" href="/resources/css/themes/mobile/app.css" />

    <script type="text/javascript" src="/resources/scripts/jquery-1.9.1.min.js"></script>   
    <script type="text/javascript" src="/resources/scripts/jquery.mobile-1.3.0.min.js"></script>
  </head>
  <body>
    <div id="loginPage" data-role="page">
      <div data-role="header" data-position="fixed"><h1>AppName</h1></div>
      <div data-role="content">
        <label for="usernameTextBox">Username</label>
        <input id="usernameTextBox" type="text" autocomplete="false" /><br />

        <label for="passwordTextBox">Password</label>
        <input id="passwordTextBox" type="password" /><br />

        <div class="ui-grid-a"><div class="ui-block-a">
          <a href="#" id="loginButton" data-role="button" class="dd-btn-a" onclick="return loginButton_Click();">Login</a></div>
        </div>
      </div>
    </div>
        <script type="text/javascript" src="/resources/scripts/app.ui-1.0.js"></script>   
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:10:35.493

将您的代码更改为：

```
$(document).on("pagecreate", "#loginPage", function () {
    alert("here 1");
    $.mobile.hidePageLoadingMsg();
});

$(document).on("pageshow", "#loginPage", function () {
    alert("here 2"); 
```

因为您在将 HTML 加载到 DOM 之前绑定了页面事件。并移动这一行：

```
<script type="text/javascript" src="/resources/scripts/app.ui-1.0.js"></script> 
```

在 jQuery 移动脚本标签下方。

# php - 为什么 mktime() 返回意外结果？

> ID：15681336
> 
> 赞同：2
> 
> 时间：2013-03-28T12:04:51.107
> 
> 标签：php

```
$date['start'] = date("o-m-d", mktime(0, 0, 0, 1, 1, 2010));
$date['end'] = date("o-m-d", mktime(0, 0, 0, 2, 1, 2010)); 
```

每个元素`2009-01-01`分别包含`2010-02-01`。为什么第一个元素返回 2009，而它已被指定为 2010？

我想要实现的是指定可以在 MySQL 查询中使用的日期，例如：

`SELECT subject, created_on FROM issues WHERE created_on BETWEEN 2010-01-01 AND 2010-02-01 ORDER BY created_on`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:06:28.533

`"Y-m-d"`日期格式不应该`"o-m-d"`

参考：[http ://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

```
o   ISO-8601 year number. This has the same value as Y, except that if the ISO week number (W) belongs to the previous or next year, that year is used instead. (added in PHP 5.1.0)    Examples: 1999 or 2003
Y   A full numeric representation of a year, 4 digits   Examples: 1999 or 2003 
```

# c# - 字符串未被识别为有效的 DateTime ParseExact 错误

> ID：15681338
> 
> 赞同：0
> 
> 时间：2013-03-28T12:04:55.880
> 
> 标签：c#, datetime

我正在尝试将数据行项目转换为日期时间，然后我只想显示小时和分钟。

当我运行它时，我收到以下错误“字符串未被识别为有效的日期时间。” 代码

```
 DateTime PushinValue = DateTime.ParseExact(dataRow[0].ToString(), "HH:mm", null); 
```

dataRow[0] 是一个`DateTime`

导致错误的原因有没有人知道解决此错误的任何方法。

我试图用 .Parse Ect 来做到这一点。

任何帮助都可以得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:10:34.970

试试这个

```
String _mydatestring = DateTime.ParseExact(dataRow[0].ToString,"dd.MM.yyyy HH:mm:ss").ToString("HH:mm") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:12:21.533

您正在尝试将“28.03.2013 13:11:28”解析为“hh:mm”:-) 为什么要将 DateTime 解析为 DateTime 然后对其进行格式化？

为什么不简单地这样做：

```
 DateTime dt = DateTime.Now;
        Debug.WriteLine(dt.ToString("hh:mm")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:18:53.733

如果您只想获取 HH:mm 格式的时间元素，那么；

```
DateTime PushinValue = DateTime.Parse(dataRow[0].ToString());
    String myTime = PushinValue.ToString("HH:mm"); 
```

# ios - 让您的应用在 Retina 显示屏上与 armv6 相比看起来更棒

> ID：15681341
> 
> 赞同：0
> 
> 时间：2013-03-28T12:04:57.937
> 
> 标签：ios, iphone

您可能知道，Apple 宣布了两个消息：

*   [让您的应用在 Retina 显示屏和 iPhone 5 上看起来很棒](https://developer.apple.com/news/?id=3212013b)
*   还有一个和UDID有关的

我有一个关于第一个的问题。所以我们有一个以 iOS3.2 作为最低部署目标并支持 armv6 的应用程序。之所以会这样，是因为很多用户还有一部iPhone 3G，所以我们需要对armv6的支持。但是因为这个公告，我们不得不放弃对 armv6 的支持并使用 iOS6 SDK（具有 iOS4.3 min 部署目标）来正确构建具有 4 cols 启动图像的应用程序。

我正在阅读和搜索很多关于这个主题的内容，我发现了这些：

目前我们有 armv6 支持。你不能放弃它，你可以将最低操作系统版本设置为 4.3。但是使用 XCode 4.5，您无法为 armv6 架构构建，因此应用程序中将缺少此切片。这就是 Apple 在下次上传时不会接受您的应用程序的原因，因为您限制了支持的设备列表。但是如果你使用的是旧版 XCode，你就不能添加支持 iPhone5 全屏模式的大启动图像。重点是缺少 armv6 切片。有人告诉苹果可以检测到这一点，如果你的应用程序包含这样的切片，它将在 5 月 1 日之后被拒绝。但是你不能用 armv6 支持更新你现有的应用程序，因为你不能为此构建。

我还读到你可以结合使用 XCode 4.x 和 4.5 构建的应用程序来支持所有架构，但如果 Apple 在 5 月 1 日之后接受这个，这对我们来说风险太大。

那么，是否所有应用程序仍支持 armv6 的开发人员都必须将具有不同应用程序 ID 的新应用程序上传到 App Store？或者是否有任何其他解决方案可以在 5 月 1 日之后以正确的方式到达所有当前用户？

谢谢马迪克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:26:02.220

不再支持 armv6 设备或 OS < 5.0 没有意义。*除非*您的产品针对购买新设备不常见的国家/地区，否则该市场极为有限。在大多数主要市场中，支持古老的 iOS 设备的努力是不值得的。我们仅支持新应用版本的 5.x 和 armv7 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:45:09.183

一旦过时，删除对以前支持的*架构的支持并没有错，就像这里的情况一样。*但是，您将无法为这些用户发布更多更新，仅此而已。

您*不能*做的是删除对设备组的支持。也就是说，您不能拥有一个通用应用程序，然后再删除对 iPad 的支持。

# bash - 在启动时获得 bash newgrp 功能

> ID：15681347
> 
> 赞同：7
> 
> 时间：2013-03-28T12:05:07.957
> 
> 标签：bash

作为我设置的一部分，我经常需要在我们的环境中使用

```
newgrp voodoo 
```

如果我尝试将其放入`.bashrc`文件中，则会出现无限循环。

任何想法如何在启动时自动加载相同的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:24:22.617

启动 bash 后，将启动 2 个脚本：

*   `.bashrc`用于交互式外壳

*   `.bash_profile`用于登录外壳

根据您运行`newgrp`命令的方式，其中之一将被执行：

*   `newgrp - your_group`将启动一个新的登录 shell 并因此读取`.bash_profile`

*   `newgrp your_group`（**没有**破折号）将开始一个新的交互式 shell 阅读`.bashrc`

如果您不从另一个文件中获取一个文件，您应该能够通过选择启动脚本和 newgrp 开关的正确组合来规避递归

*   `newgrp - ...`在`.bashrc`将工作

*   `newgrp ...`在`.bash_profile`将工作

其他两种组合将导致您已经描述的递归。如果两个文件中的一个像经常看到的那样来自另一个文件，那么无论如何您都会遇到麻烦。

顺便说一句：如果`.bash_profile`不存在 bash 将改为读取文件`.profile`。我只是提到它，因为一些专家甚至设法`.bashrc`从那里采购。

如果这两种组合都不适用于您的设置，则您可能不得不求助于 shell 脚本。环境变量`$GROUPS`应该报告您所属的组，例如：

```
[ "$GROUPS" = "200" ] || newgrp your_group 
```

或者您的巫毒教团体的 id 可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-19T16:06:43.497

您可以使用命令检查当前组 id `id -gn`，然后`newgrp`仅在您不在正确组中时才调用。所以你`.bashrc`可以包括

```
# Switch groups, but only if necessary
if [[ `id -gn` != "mygroup" ]]
then
    newgrp mygroup
    exit
fi 
```

旁注，此语法也适用于 ksh。

# c# - 从 Windows 窗体过渡到 WPF

> ID：15681352
> 
> 赞同：114
> 
> 时间：2013-03-28T12:05:18.703
> 
> 标签：c#, wpf, windows, winforms, windows-forms-designer

很长一段时间以来，我一直坚持使用 Windows 窗体开发（从 VB6 开始，一直持续到 C# .NET 4.5），而且我几乎已经达到了 Windows 窗体可以做的极限，两者都使用纯 .NET ，以及使用本机代码的特殊效果。

我曾尝试学习 WPF 和 XAML，但我被 WPF 的新设计师卡住了。与 Windows 窗体设计器相比，它确实似乎很难使用。

我想知道 .NET 的 WPF 设计器是否有更适合 Windows 窗体开发人员的替代方案？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-03-28T14:32:58.377

我喜欢写有关 WPF 初学者文章的博客，其中有一些特别可以帮助您：

*   [了解从 WinForms 切换到 WPF 时的心态变化](http://rachel53461.wordpress.com/2012/10/12/switching-from-winforms-to-wpfmvvm/)
*   [你说的这个“DataContext”是什么？](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)
*   [一个简单的 MVVM 示例](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)

总而言之，Winforms 和 WPF 之间最大的区别在于，在 WPF 中，您的数据层 (the `DataContext`) 是您的应用程序，而在 Winforms 中，您的 UI 层是您的应用程序。

换个角度来看，使用 WPF，您的应用程序由您创建的对象组成，您使用模板和其他 UI 对象来告诉 WPF 如何绘制您的应用程序组件。

![](../Images/bd14ecb96e740232341abd5ebe16d793.png)

这与 WinForms 相反，在 WinForms 中，您从 UI 对象构建应用程序，然后为它们提供所需的数据。

![](../Images/2732e10e4c1f2fc6e9e3413d6748bdac.png)

正因为如此，设计器实际上并没有太多使用，因为您的应用程序组件是用代码设计的，并且设计器只需要绘制一个反映您的数据类的用户友好界面（通常是`Models`和`ViewModels`）

就个人而言，我更喜欢手动输入我的所有 XAML，因为它更快并且不会像拖放 WPF 设计器那样造成混乱，尽管我有时会使用设计器来预览我的 UI 的外观像。

因此，为了回答您是否有其他适合 WinForms 开发人员的 WPF 设计器的问题，我建议不要寻找其他设计器，而是学习如何以预期的方式使用 WPF。像 WinForms 一样使用 WPF 意味着您会错过很多让它如此出色的东西 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T14:21:49.373

好吧，尽管有些人不同意，但我也建议不要使用 VS 设计器。至少不要创建接口。如果您可能想在不启动应用程序的情况下获得对实现的第一印象，那么它是一个很好的查看器，至少只要不使用像`Styles`和这样的复杂的东西`Templates`。但是，恕我直言，它的*拖放结果*应仅用作原型，因此在不再需要后将其丢弃。

以下是一些对我不使用它很重要的原因。

1.  VS 设计器正在使用修复边距和对齐方式（如果您正在使用布局控件，这通常不是必需的），这意味着如果需求发生更改，您必须触摸许多控件。如果您深入研究 XAML 和 WPF 机制，您可以创建一个应用程序，在外观方面可以轻松修改。

2.  由于设计人员正在生成 xaml，因此组合不是最佳的，UI 可能表现不佳。我没量过，只是感觉。

一个更好的选择是*MS Blend*，虽然开始是一切，但很容易。它的*拖放结果*比 VS 设计器的结果要好得多。
但它是一个非常强大的工具，它可以帮助您使用非常强大的元素来创建最先进的 UI。我建议至少参观一个简短的研讨会，以了解它的机会。

回到你的问题，恕我直言，我想很多人都同意，给自己买一本好书，例如*WPF Unleashed*，然后，如果你想了解更多细节，*WPF Pro*。有很多与`Winforms`. 您不会通过使用任何设计师来了解它们。我认为这是最好的方法。

还请考虑到那里有许多框架和库（例如[MVVM light](http://mvvmlight.codeplex.com/)、[WPFToolkit](https://www.google.de/search?q=wpftoolkit&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3ade%3aofficial&client=firefox-a&channel=fflb)），它们已经解决了一些常见问题。所以没有必要重新发明轮子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-31T23:54:44.207

我知道这是一个老问题，但为了其他人的利益，我想我应该稍微调整一下平衡 - 阅读其他一些答案，我觉得有些“不要使用设计师” '情绪来自没有正确使用它。 [本教程](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/layout-techniques-for-windows-forms-developers.aspx?wa=wsignin1.0)非常适合帮助您学习并回答其他帖子中的一些批评。

例如，您可以通过右键单击并选择“重置布局”从类似于 Winforms 的基于边距的布局（这是您放置控件时的默认布局）切换到更 WPF 风格的样式

[该视频](http://msdn.microsoft.com/en-us/vstudio/cc707833)涵盖了类似的领域。

我仍然更喜欢 VS2010 设计器——在拖放到 TabItems ** 时，VS2013 似乎有点错误（我当前的项目经常使用它）——但是 VS2013 文档大纲视图也可以让你在该视图中移动东西，这可能是一个真正的优势。

但是，实际上，要充分利用 WPF 和 xaml，您需要相当流利地使用设计器视图和 xaml 视图并在它们之间切换；如果你回避设计师，你就会错过一些对你有很大帮助的东西。

** 编辑 - 虽然这似乎在 VS 2013 的更新 3 和 VS14 的预览版中得到了改进，但迄今为止我仍然有时会出现奇怪的行为。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-28T12:08:38.430

首先，在 Visual Studio deisgner 中的 WPF (XAML) 中，您应该始终使用 xaml 代码来构建您的 UI，而不是拖放您的控件！你需要保持你的代码干净。您可以使用 Expression Blend 来帮助您，它通过拖放更加面向图形，但它不是免费的。

这不是一个很大的学习曲线，但我认为您应该学习如何手动完成 xaml，而不是寻找替代方法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-01-18T12:37:48.917

我和你一样经历过这个过程。之后，我在公司 WPF 中教每个人。我学到了一些重要的经验教训，我认识的每个人都在使用 WPF。

1.  如果您在后面的代码中使用 UI 控件，......那么您做错了。您绝对不需要在后面的代码中处理 UI 控件。
2.  您不需要视觉开发人员来单击它。只处理 XAML 会提高工作效率。使用复制/粘贴。不要相信你的打字能力。它会省去很多麻烦。
3.  将 XAML 视为一个查看数据的窗口。在您背后的代码中，您正在更改数据。在 XAML 中，您正在定义 UI 如何解释数据。
4.  转换器很棒。一旦您获得关键数量的转换器，您的工作效率就会飞涨。他们将接管大量隐藏或调整大小的控制事件处理程序的角色，或者关于 UI 的任何事情，

它使 UI 开发变得有趣。尤其是当您发现它喜欢与 Asyc 进程一起使用时。它确实消除了许多由 Winforms 引起的头痛。

# hibernate - 在休眠中使用@Formula 计算属性和继承的问题

> ID：15681354
> 
> 赞同：2
> 
> 时间：2013-03-28T12:05:20.967
> 
> 标签：hibernate, jakarta-ee, jpa, annotations

嗨，我对 Hibernate 很陌生，所以我可能会做一些愚蠢的事情。

我有一个实体

```
@Entity
@Table(name="criterion")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class AbstractCriteria implements Criteria{

Criteria child;
List<Criteria> parents;

@Override
@OneToOne(targetEntity=AbstractCriteria.class, cascade={CascadeType.ALL})
@Fetch(FetchMode.SELECT)
@Lazy(true)
public Criteria getChild() {
    return _child;
} 
```

我希望父母是一个经过计算的财产。一个标准只能有一个孩子（保存在数据库中，但它可以有多个父母），我想使用@Formula 从数据库中获取。

我尝试在父字段定义上添加@Formula，但它似乎没有做任何事情。当我为父母添加一个吸气剂时

```
@Formula("(select from betsy.criterion where child_id=id)")
@Override
public List<Criteria> getParents() {
    return _parent;
} 
```

我有：

```
org.hibernate.PropertyNotFoundException: Could not find a setter for property parent in class
enter code here`com.bge.domain.data.criteria.RangeCriteria 
```

RangeCriteria 扩展了 AbstractCriteria。

```
@Entity
@Table(name="Range_criterion")
@ForeignKey(name = "Range_criteria_id")
public class RangeCriteria extends AbstractCriteria {

  private double _fromRange;
  private double _toRange;
} 
```

任何帮助将不胜感激。谢谢。

# javascript - 如何将文本注入带有 Firefox 扩展的文本框

> ID：15681358
> 
> 赞同：0
> 
> 时间：2013-03-28T12:05:28.703
> 
> 标签：javascript, firefox, firefox-addon, xul

这个问题现在可能被问过几次......但我在过去 2 天没有找到任何解决方案，所以我在这里问它。
我需要将一些文本注入到具有 ID 的文本框中，并且我已经知道它。场景是这样的：

*   用户在我的工具栏内的文本框中插入文本。
*   用户单击我工具中的按钮。
*   按钮中的功能应该将用户重定向到后台的新页面，将文本注入指定的文本框并单击该网页中的按钮。
*   返回网页上生成的链接。

我知道如何打开一个新网页。现在剩下的就是剩下的了。我似乎无法将文本注入指定的文本框。

还要注意，我不能在这个项目上使用greasemonkey，这就是为什么我必须写下我需要写的所有东西。

如果您可以将我引导到此问题的起点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:51:51.697

文本框是 XUL 文本框还是 html 文本区域？

看起来您的场景是在后台模拟提交表单，为什么不直接创建一个 XMLHttpRequest 来执行此操作，无需与 UI 交互。

**更新：**

如果是 XUL 文本框，可以使用[value 属性](https://developer.mozilla.org/en-US/docs/XUL/textbox#p-textbox.value)

```
var textbox = window.document.getElementById(textboxId);
if (textbox) {
    textbox.value = 'your text';
} 
```

# android - Android翻译动画：移动的视图重叠

> ID：15681359
> 
> 赞同：0
> 
> 时间：2013-03-28T12:05:34.560
> 
> 标签：android, translate

`TextViews`我有两个`Activity`（我们称它们为 TV1 和 TV2），它们都属于不同的`RelativeLayouts`. 我创建了一个`TranslateAnimation`将 TV1 从其位置移动到 TV2 的位置。问题是，当 TV1 到达 TV2's 时`RelativeLayout`，它会在它下方（移动`TextView`的内容与 TV2 的布局重叠），我希望 TV1 位于此布局之上。有没有办法把它带到前面？

谢谢！

[编辑]

我添加了我的布局代码。我想将**timeText**移动到**numTimeValue**。可以看到，timeText 是在 numTimeValue 之后声明的。另外，我试过这个：

```
mTimeTextView.bringToFront();
((View)mTimeTextView.getParent()).bringToFront(); 
```

它仍然重叠。

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/outer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/pointsLayout"
            style="@style/ScoreBar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:baselineAligned="false"
            android:orientation="horizontal" >

            <LinearLayout
                android:id="@+id/numCorrectLayout"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/numCorrectTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="@string/num_correct_title"
                    android:textSize="16sp" />

                <TextView
                    android:id="@+id/numGuessed"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:textSize="22sp" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/numTimeLayout"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/numTimeTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:text="@string/num_time_title"
                    android:textSize="16sp" />

                <TextView
                    android:id="@+id/numTimeValue"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:textSize="22sp" />
            </LinearLayout>
        </LinearLayout>

        <RelativeLayout
            android:id="@+id/timeLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ProgressBar
                android:id="@+id/time_progbar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_marginRight="10dp"
                android:layout_toLeftOf="@+id/timeText"
                android:indeterminateDrawable="@android:drawable/progress_indeterminate_horizontal"
                android:indeterminateOnly="false"
                android:maxHeight="20dip"
                android:minHeight="20dip"
                android:padding="15dp"
                android:progressDrawable="@drawable/time_progressbar" />

            <TextView
                android:id="@+id/timeText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_marginRight="5dp"
                android:textSize="30sp" />
        </RelativeLayout>
    </LinearLayout>

    <ImageView
        android:id="@+id/movieImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/header"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="30dp"
        android:contentDescription="@string/movie_to_guess" />
</RelativeLayout> 
```

[编辑2]

简化版：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/game_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/pointsLayout"
        style="@style/ScoreBar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

            <TextView
                android:id="@+id/numTimeValue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:textSize="22sp" />
        <!--  </LinearLayout> -->
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/timeLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/pointsLayout"
        android:orientation="horizontal" >

        <ProgressBar
            android:id="@+id/time_progbar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="10dp"
            android:layout_toLeftOf="@+id/timeText"
            android:indeterminateDrawable="@android:drawable/progress_indeterminate_horizontal"
            android:indeterminateOnly="false"
            android:maxHeight="20dip"
            android:minHeight="20dip"
            android:padding="15dp"
            android:progressDrawable="@drawable/time_progressbar" />

        <TextView
            android:id="@+id/timeText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dp"
            android:textSize="30sp" />
    </RelativeLayout>

    <ImageView
        android:id="@+id/movieImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/timeLayout"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="30dp"
        android:contentDescription="@string/movie_to_guess" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:17:39.343

这可能与各个布局元素的 z 顺序（即垂直堆叠）有关。两种解决方案：

(1)[更改您的 java 代码中的 z 顺序，](https://stackoverflow.com/questions/3740100/setting-z-order-of-view-with-bringchildtofront)以便将您想要在顶部的视图移动到前面。在您的情况下，您将想要将包含`TextView`您想要的顶部的整个相对布局移动到前面。仅移动文本视图本身是行不通的。

(2)[控制 xml 中的 z 顺序](https://stackoverflow.com/questions/2614393/defining-z-order-of-views-of-relativelayout-in-android)。默认情况下，在您的 XML 文件中向下添加的视图将在 z 顺序中更高。尝试交换相对布局的位置，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T17:09:34.570

尝试在您的 xml 中使用 android:elevation。

对于 TV1，提供 android:elevation = "1dp"

对于 TV2，提供 android:elevation = "0dp"

# jsp - JSP 页面无法工作：Java.lang.ClassNotFoundException

> ID：15681362
> 
> 赞同：0
> 
> 时间：2013-03-28T12:05:45.410
> 
> 标签：jsp, jstl

**这是我的 register.jsp 文件中的所有代码**

```
<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%>

<html>
<head>
    <title>register</title>
</head>
<body>
    <form action="register.jsp" method="post">
        account:
        <input type="text" name="user"></input><br>
        password   :
        <input type="password" name="password"></input><br>
        <input type="submit" name = "submit" value = "Submit"></input>
        <input type="reset" name = "reset" value = "Reset"></input>
    </form>
</body>
    </html>

<c:set var="user" value = ${param.user } scope = request></c:set>
<c:set var="password" value = ${param.password } scope = request></c:set>
<sql:setDataSource driver="oracle.jdbc.driver.OracleDriver" user="scott"     password="669193"
url = "jdbc:oracle:thin:@//localhost:1521/orcl"/>
<sql:query var="query" sql = "select * from users where user =? and password = ?">
   <sql:param value = ${user }></sql:param>
   <sql:param value = ${password }></sql:param>
</sql:query>
<c:choose>
<c:when test="${!empty query.rows}">
    <jsp:forward page="Hello.jsp"></jsp:forward>
</c:when>
</c:choose> 
```

当我打开它时，浏览器显示此错误**HTTP Status 500**

非常感谢任何帮助:) 谢谢！

**这是堆栈跟踪**

> 类型异常报告
> 
> 信息
> 
> 描述 服务器遇到了一个内部错误 ()，导致它无法完成 >this 请求。
> 
> 例外
> 
> org.apache.jasper.JasperException: org.apache.jasper.JasperException: 无法为 JSP 加载类 > org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:156) org.apache.jasper.servlet.JspServletWrapper .service(JspServletWrapper.java:329) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266) javax.servlet.http .HttpServlet.service(HttpServlet.java:803)
> 
> 根本原因
> 
> org.apache.jasper.JasperException：无法为 JSP 加载类 org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:600) org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:144) org. apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java: 266）javax.servlet.http.HttpServlet.service（HttpServlet.java:803）
> 
> 根本原因
> 
> java.lang.ClassNotFoundException: org.apache.jsp.register_jsp java.net.URLClassLoader$1.run(URLClassLoader.java:366) java.net.URLClassLoader$1.run(URLClassLoader.java:355) java.security.AccessController.doPrivileged (本机方法) java.net.URLClassLoader.findClass(URLClassLoader.java:354) org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:134) org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader. java:66) org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:598) org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:144) org.apache.jasper.servlet.JspServletWrapper.service( JspServletWrapper.java:329) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266）javax.servlet.http.HttpServlet.service（HttpServlet.java:803）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:57.750

您可以发布整个堆栈跟踪吗？另外，为什么要在视图（JSP）中嵌入数据库连接逻辑？它们应该在控制器中的某个地方。

# python - 在 Python 中导入文件？

> ID：15681366
> 
> 赞同：6
> 
> 时间：2013-03-28T12:06:04.820
> 
> 标签：python, file, import

如何在执行期间导入 Python 文件？

我创建了 3 个文件`a.py`，`b.py`并且`c.py`在一个路径中`C:\Users\qksr\Desktop\Samples`

这些文件包含如下所示的代码：

**一个.py**

```
from c import MyGlobals

def func2():
    print MyGlobals.x
    MyGlobals.x = 2 
```

**b.py**

```
import a
from c import MyGlobals

def func1():
    MyGlobals.x = 1      

if __name__ == "__main__":
    print MyGlobals.x
    func1()
    print MyGlobals.x
    a.func2()
    print MyGlobals.x 
```

**py**

```
class MyGlobals(object):
    x = 0 
```

当我执行代码 b.py 时，会引发以下错误：

```
ImportError: No module named a 
```

我相信我的工作目录是默认的，所有文件 a、b、c 都是我在示例文件夹中创建的。

如何在 Python 中导入 python 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:17:36.597

如果您在同一目录中工作，即与`b.py`位于同一文件夹中`a.py`，我无法重现此问题（并且不知道为什么会出现此问题），但如果您发布`os.getcwd()`返回的内容会很有帮助`b.py`。

如果不是这种情况，请将其添加到顶部`b.py`

```
import sys
sys.path.append('PATH TO a.py') 
```

或者，如果它们在同一条路径上，

```
import sys
sys.path.append(os.basename(sys.argv[0])) # It should be there anyway but still.. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-12T15:05:19.880

## 有很多方法可以导入 python 文件：

不要匆忙选择第一个适合您的导入策略，否则当您发现它不满足您的需求时，您将不得不重写代码库。

我开始解释最简单的控制台示例#1，然后转向最专业、最强大的程序示例#5

**示例 1，使用 python 解释器导入 python 模块：**

1.  把它放在 /home/el/foo/fox.py 中：

    ```
    def what_does_the_fox_say():
      print "vixens cry" 
    ```

2.  进入python解释器：

    ```
    el@apollo:/home/el/foo$ python
    Python 2.7.3 (default, Sep 26 2013, 20:03:06) 
    >>> import fox
    >>> fox.what_does_the_fox_say()
    vixens cry
    >>> 
    ```

    您通过 python 解释器`what_does_the_fox_say()`从文件中调用了 python 函数。`fox`

**选项 2，在脚本中使用 execfile 来执行其他 python 文件：**

1.  把它放在 /home/el/foo2/mylib.py 中：

    ```
    def moobar():
      print "hi" 
    ```

2.  把它放在 /home/el/foo2/main.py 中：

    ```
    execfile("/home/el/foo2/mylib.py")
    moobar() 
    ```

3.  运行文件：

    ```
    el@apollo:/home/el/foo$ python main.py
    hi 
    ```

    moobar 函数是从 mylib.py 导入的，并在 main.py 中可用

**选项 3，使用 from ... import ... 功能：**

1.  把它放在 /home/el/foo3/chekov.py 中：

    ```
    def question():
      print "where are the nuclear wessels?" 
    ```

2.  把它放在 /home/el/foo3/main.py 中：

    ```
    from chekov import question
    question() 
    ```

3.  像这样运行它：

    ```
    el@apollo:/home/el/foo3$ python main.py 
    where are the nuclear wessels? 
    ```

    如果您在 chekov.py 中定义了其他函数，它们将不可用，除非您`import *`

**选项 4，如果 riaa.py 位于与导入位置不同的文件位置，则导入**

1.  把它放在 /home/el/foo4/bittorrent/riaa.py 中：

    ```
    def watchout_for_riaa_mpaa():
      print "there are honeypot kesha songs on bittorrent that log IP " +
      "addresses of seeders and leechers. Then comcast records strikes against " +
      "that user and thus, the free internet was transmogified into " +
      "a pay-per-view cable-tv enslavement device back in the 20th century." 
    ```

2.  把它放在 /home/el/foo4/main.py 中：

    ```
    import sys 
    import os
    sys.path.append(os.path.abspath("/home/el/foo4/bittorrent"))
    from riaa import *

    watchout_for_riaa_mpaa() 
    ```

3.  运行：

    ```
    el@apollo:/home/el/foo4$ python main.py 
    there are honeypot kesha songs on bittorrent... 
    ```

    这会从不同的目录导入外部文件中的所有内容。

**选项 5，在 python 中使用裸导入命令导入文件：**

1.  创建一个新目录`/home/el/foo5/`
2.  创建一个新目录`/home/el/foo5/herp`
3.  `__init__.py`创建一个名为herp的空文件：

    ```
    el@apollo:/home/el/foo5/herp$ touch __init__.py
    el@apollo:/home/el/foo5/herp$ ls
    __init__.py 
    ```

4.  创建一个新目录 /home/el/foo5/herp/derp

5.  在derp下，制作另一个`__init__.py`文件：

    ```
    el@apollo:/home/el/foo5/herp/derp$ touch __init__.py
    el@apollo:/home/el/foo5/herp/derp$ ls
    __init__.py 
    ```

6.  在 /home/el/foo5/herp/derp 下创建一个名为`yolo.py`Put this in there 的新文件：

    ```
    def skycake():
      print "SkyCake evolves to stay just beyond the cognitive reach of " +
      "the bulk of men. SKYCAKE!!" 
    ```

7.  关键时刻，制作新文件`/home/el/foo5/main.py`，把它放在那里；

    ```
    from herp.derp.yolo import skycake
    skycake() 
    ```

8.  运行：

    ```
    el@apollo:/home/el/foo5$ python main.py
    SkyCake evolves to stay just beyond the cognitive reach of the bulk 
    of men. SKYCAKE!! 
    ```

    空`__init__.py`文件与 python 解释器通信，开发人员打算将此目录作为可导入包。

如果您想查看我关于如何在目录下包含所有 .py 文件的帖子，请参见此处：[https ://stackoverflow.com/a/20753073/445131](https://stackoverflow.com/a/20753073/445131)

额外的提示，无论您使用的是 Mac、Linux 还是 Windows，您都需要使用[python 的空闲编辑器](http://www.annedawson.net/Python_Editor_IDLE.htm)，如此处所述。它将解锁您的蟒蛇世界。 [http://www.youtube.com/watch?v=DkW5CSZ_VII](http://www.youtube.com/watch?v=DkW5CSZ_VII)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-28T12:18:28.847

调整`PYTHONPATH`通常不是一个好主意。

更好的方法是通过添加一个名为 的文件来使您的当前目录表现得像一个模块，该文件`__init__.py`可以为空。

然后 python 解释器允许您从该目录导入文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:09:33.197

参考：我想知道如何导入在默认路径之外的任何路径中创建的文件？

```
import sys

sys.path.append(directory_path) # a.py should be located here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:14:44.503

默认情况下，Python 不会从当前工作目录导入模块。有 2（也许更多）解决方案：

```
PYTHONPATH=. python my_file.py 
```

它告诉 python 寻找要导入的模块`.`，或者：

```
sys.path.append(os.path.dirname(__file__)) 
```

它在运行时修改导入路径，添加“当前”文件的目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-30T03:38:15.983

***第一个选项：***将文件的路径添加到 Pythons 查看的默认路径。

```
import sys
sys.path.insert(0, 'C:/complete/path/to/my/directory') 
```

***第二个选项：***添加相对于环境当前根目录（当前目录）的路径，使用以下内容：

```
#Learn your current root 
import os
os.getcwd()  

#Change your current root (optional)
os.chdir('C:/new/root')

#Add the path from your current root '.' to your directory
import sys
sys.path.insert(0, './Path/from/current/root/to/my/directory') 
```

# php - 如何从mysql中的2个数据库表中选择数据......？

> ID：15681367
> 
> 赞同：3
> 
> 时间：2013-03-28T12:06:05.837
> 
> 标签：php, mysql, sql, multi-select

我有 2 个日期表，`student_info`并且`student_payment`在我的数据库中...

在`student_info`我有：

id, student_id,student_mail,student_pass,student_name,...

并且`student_payment`有：

id,student_id,student_payment_id,student_payment_date,...

所以我的问题就在这里，我想选择student_info的`student_name`位置，`student_id`但我有问题，mysql给我一个错误：

```
$db->connect();

$sql = "SELECT * FROM `student_payment`";
$rows = $db->fetch_all_array($sql);
$student_id = $rows['student_id'];

$sql2 = "SELECT * FROM `student_info` WHERE student_id=$student_id";
$rows2 = $db->fetch_all_array($sql2);

$db->close();

foreach($rows as $record ){ 
        // i wanna to use student_name in first line 
    echo "\n<tr>
            <td>$record[student_id]</td> 
            <td dir=\"ltr\">$record[student_payment]</td>
            <td dir=\"ltr\">$record[student_payment_id]</td>
            <td dir=\"ltr\">$record[student_payment_bank]</td>
            <td dir=\"ltr\">$record[student_payment_type]</td>
            <td dir=\"ltr\">$record[student_payment_date]</td>
            <td dir=\"ltr\"></td>
            </tr>\n"; 
} 
```

但我不知道如何连接 student_id 和 student_name 并使用，`foreach`因为我有 2 行数据。

（我是 PHP / MySql 的初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:08:16.103

试试这个

```
 $sql2 = "SELECT * FROM `student_info` WHERE student_id IN ($student_id)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:08:26.507

您可以代替查询数据库两次，而是加入表以获取所需的行。尝试在 PhpMyAdmin 中或直接在 MySQL 浏览器中执行以下查询。

```
SELECT  a.*, b.*
FROM    student_info a
        INNER JOIN student_payment b
            ON a.student_ID  = b.student_ID
-- WHERE ...if you have extra conditions...
ORDER   BY b.student_payment_date DESC 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T12:09:31.610

可以使用 INNER JOIN 修复它，您可以连接 2 个表并使用 1 个查询中的两个值。

[http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

或者您可以使用 OOP 方式，不确定这是否是您需要的。从 2 个查询中创建 2 个对象并将它们放在一个 foreach 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:10:40.617

试试这个

```
 $sql2 = " SELECT * FROM `student_info` WHERE student_id= '$student_id'   "; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T12:21:17.980

```
foreach($rows as $record ){ 
    // i wanna to use student_name in first line 
echo "\n<tr>
        <td>$record[student_id]</td> 
        <td dir=\"ltr\">".$record['student_payment']."</td>
        <td dir=\"ltr\">".$record['student_payment_id']."</td>
        <td dir=\"ltr\">".$record['student_payment_bank']."</td>
        <td dir=\"ltr\">".$record['student_payment_type']."</td>
        <td dir=\"ltr\">".$record['student_payment_date']."</td>
        <td dir=\"ltr\"></td>
        </tr>\n"; 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:16:54.640

使用[Mahmoud Gamal](https://stackoverflow.com/users/722783/mahmoud-gamal)代码

但始终只选择所需的列，而不是全部，因为

将来表中的列数可能会增加，这可能会降低应用程序的性能。它还可能包含一些不可泄露的重要信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T12:26:50.590

您似乎想要一份所有付款的报告。学生姓名将与付款信息一起显示。结果可能会为每个学生支付不止一笔款项。

此结果按学生姓名排序，然后是付款日期（最近的在前）

```
SELECT s.student_name, sp.*
  FROM student_payment sp
  INNER JOIN student_info s ON s.student_ID=sp.student_ID
  ORDER BY s.student_name ASC, sp.student_payment_date DESC 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T13:09:59.613

尝试加入表并使用单个查询而不是两个 - $sql = "SELECT * FROM student_info, student_payment WHERE student_info.student_id=student_payment.student_id"

# highcharts - Highcharts，导出 i 3.0 的旧外观

> ID：15681368
> 
> 赞同：0
> 
> 时间：2013-03-28T12:06:08.690
> 
> 标签：highcharts

即使您运行的是 3.0 版，也有一些代码可以改回导出按钮的旧外观。它在这里： [https ://github.com/highslide-software/highcharts.com/blob/master/js/modules/exporting-old-look.src.js](https://github.com/highslide-software/highcharts.com/blob/master/js/modules/exporting-old-look.src.js)

我唯一的问题是，如何将此代码包含到我的图表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:01:27.333

您可以将该 javascript 复制到您自己的项目中和标签之间，

或者

您可以从 github 将其包含在脚本标记中：

或者

您可以将其下载到您自己的项目区域，并将其包含在您自己的 Web 服务器的脚本标记中。

该脚本将在页面加载时加载并运行，因此请确保将其包含在 highcharts 之后。

# php - 显示 3 个来自特色类别的最新帖子 (Wordpress)

> ID：15681369
> 
> 赞同：0
> 
> 时间：2013-03-28T12:06:09.287
> 
> 标签：php, wordpress, loops, posts

在我正在处理的起始页上，我只想显示 3 个最新帖子，女巫具有该标签。必须是与“The Loop”有关的非常基本的事情，但我在任何地方都找不到答案，感觉就像我真的到处都看过:(

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:15:22.330

您应该查看 WP 参考[https://codex.wordpress.org/Class_Reference/WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query) 它会是这样的：

```
$featured_posts = new WP_Query(array(
    'tag' => 'featured',
    'posts_per_page' => 3,
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:13:45.000

```
query_posts('tag=featured&posts_per_page=3&order=DESC'); // show latest 3 posts on featured tag

//query_posts('category_name=featured&tag=featured&posts_per_page=3&order=DESC'); // show latest 3 posts on featured tag and featured categorey

<?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>    
        <!-- do stuff ... -->
        <?php endwhile; ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T12:11:31.967

使用以下查询获取最新的 3 个帖子。

```
"SELECT * FROM tablename WHERE featured=1 ORDER BY id DESC LIMIT 3" 
```

*id=pk

# pointers - Fortran 未处理的异常 (msvcr100d.dll)

> ID：15681370
> 
> 赞同：0
> 
> 时间：2013-03-28T12:06:09.547
> 
> 标签：pointers, memory-management, fortran, unhandled-exception, fortran-iso-c-binding

当我退出我的程序时，我得到了这个未处理的异常：

```
Unhandled exception at 0x102fe274 (msvcr100d.dll) in Parameters.exe: 0xC0000005: Access violation reading location 0x00000005. 
```

调试器在此行的名为 crtdll.c 的模块中停止：

```
onexitbegin_new = (_PVFV *) DecodePointer(__onexitbegin); 
```

调用堆栈的第一行内容如下：

> msvcr100d.dll!__clean_type_info_names_internal(__type_info_node * p_type_info_root_node=0x04a6506c) 第 359 行 + 0x3 字节 C++

然后程序会一直保留在内存中，直到我关闭 IDE。

我更习惯于使用托管语言进行开发，所以我希望我的代码维护有问题。代码本身读取内存映射文件并将其与指针关联：

```
SUBROUTINE READ_MMF ()
  USE IFWIN
  USE, INTRINSIC :: iso_c_binding
  USE, INTRINSIC :: iso_fortran_env 

  INTEGER(HANDLE) file_mapping_handle
  INTEGER(LPVOID) memory_location
  TYPE(C_PTR) memory_location_cptr
  INTEGER memory_size  
  INTEGER (HANDLE) file_map      
  CHARACTER(5)                   :: map_name 
  TYPE(C_PTR)                    :: cdata
  integer                        :: n = 3
  integer(4), POINTER            :: A, C
  real(8), POINTER               :: B

  TYPE STRUCT
    integer(4) :: A 
    real(8)    :: B
    integer(4) :: C
  END TYPE STRUCT
  TYPE(STRUCT), pointer :: STRUCT_PTR

  memory_size = 100000
  map_name = 'myMMF'

  file_map = CreateFileMapping(INVALID_HANDLE_VALUE,
 + NULL,
 + PAGE_READWRITE,
 + 0,
 + memory_size,
 + map_name // C_NULL_CHAR )  

  memory_location = MapViewOfFile(file_map,
 +IOR(FILE_MAP_WRITE, FILE_MAP_READ),
 + 0, 0, 0 )          

  cdata = TRANSFER(memory_location, memory_location_cptr)
  call c_f_pointer(cdata, STRUCT_PTR, [n]) 

  A => STRUCT_PTR%A
  B => STRUCT_PTR%B
  C => STRUCT_PTR%C

  RETURN
  END 
```

当我完成它们时，我应该释放 c 指针吗？我调查了一下，但看不到我在 Fortran 中是如何做到的......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:05:36.970

访问冲突的性质（在运行时库清理期间）表明您的程序正在以某种方式破坏内存。有许多编程错误可能导致这种情况 - 并且负责的错误或错误可能出现在您的程序中的任何地方。通常的“在启用所有诊断和调试选项的情况下编译和运行”方法可能有助于识别这些。

也就是说，显示的代码示例中存在编程错误。ISO_C_BINDING 内部模块中的 C_F_POINTER 过程可以对标量或数组 Fortran 指针（第二个参数）进行操作。如果 Fortran 指针是标量，则第三个“shape”参数不得存在（如果 Fortran 指针是数组，则必须存在）。

您的代码打破了这一要求 - 代码中的 Fortran 指针`STRUCT_PTR`是一个标量，但您提供了第三个 shape 参数（as `[n]`）。这个错误很可能会导致内存损坏 - 通常 C_F_POINTER 的实现会尝试在内存中填充 Fortran 指针的描述符，并且指向数组的指针的描述符可能与指向标量的指针非常不同.

随后的引用`STRUCT_PTR`可能会进一步破坏。

虽然标准不需要诊断这种情况，但我有点惊讶编译器没有发出诊断（假设您的示例代码是您实际正在编译的）。如果您将此报告给编译器的供应商（英特尔，大概是 IFWIN 等），我怀疑他们会将其视为编译器的缺陷。

要释放与文件映射关联的内存，请使用 UnmapViewOfFile 和 CloseHandle API。要使用这些，您应该“存储”（您的程序需要以某种方式记住）由 MapViewOfFile 返回的基`memory_location`地址`STRUCT_PTR`（`file_map`) 由 CreateFileMapping 返回；分别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:17:45.547

我只用 Cray 指针做过这个：不是用 ISO 绑定，我知道它确实适用于 Cray 指针。

您没有说的是这是第一次还是第二次调用例程时发生这种情况。如果它被多次调用，那么编码中存在问题，因为 Create/OpenFileMapping 应该只被调用一次以获得句柄。

你不需要释放内存，因为内存不是你要释放的：你需要调用 UnmapViewOfFile(memory_location)。在您调用它之后，memory_location、memory_location_cptr 和可能的 cdata 不再有效。

它的工作方式是使用两个或多个程序：

一个程序调用 CreateFileMapping，其他程序调用 OpenFileMapping 来获取数据的句柄。这只需要在程序开始时调用一次：而不是每次您需要访问文件时。在没有相应关闭的情况下多次调用 Create/OpenFileMapping 可能会导致崩溃。

然后他们调用 MapViewOfFile 将文件映射到内存中。请注意，一次只有一个程序可以执行此操作。当程序处理完内存文件后，它会调用 UnmapViewOfFile。另一个程序现在可以访问该文件。有一个阻塞机制。如果不调用 UnmapViewOfFile，其他使用 MapViewOfFile 的程序将被阻塞。

完成后，在 Create/OpenFileMapping 创建的句柄上调用 close。

# javascript - 如何通过按键盘键 S 更改 div？

> ID：15681373
> 
> 赞同：-6
> 
> 时间：2013-03-28T12:06:21.127
> 
> 标签：javascript, jquery, css, html, keyboard

我有两个 div

```
<div class="summary">Summary</div>

<div class="summary-cont"><p>Content...</p></div> 
```

div "summary-cont" 被隐藏，显示：无；

我想这样工作：我按下键盘按钮“S”然后div“summary”隐藏并显示div“summary-cont”

有人知道如何用 javascript 做到这一点吗？

这是工作代码：

```
<script>
$(document).keyup(function(e) {
  if (e.keyCode == 83) { $('.summary').hide(); }     // S
  if (e.keyCode == 83) { $('.summary-cont').show(); }   // S
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:14:30.167

这对你`S`或`s`角色都有好处。

使用`Javascript`

```
document.onkeydown = function(e) { // or document.onkeypress
    e = e || window.event;
    if (e.keyCode == 115 || e.keyCode == 83) {
        alert("do something");
    }
}; 
```

使用`jQuery`库。如果你有任何`input`盒子。

```
$('input').bind('keypress', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 115 || code == 83) { //Keycode for alphabets S(83) & s(115)
       //Do something (show your div)
    }
}); 
```

对于没有`input`盒子的解决方案，你可以试试这个。

```
$(document).bind('keypress', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 115 || code == 83) { //Keycode for alphabets S(83) & s(115)
       //Do something (show your div)
    }
}); 
```

# android - 无需采样的通用图像加载器

> ID：15681375
> 
> 赞同：0
> 
> 时间：2013-03-28T12:06:24.250
> 
> 标签：android, universal-image-loader

我想要来自 url 的图像没有被采样，但是在使用 nostra 的通用图像加载器时，图像正在被采样。我应该如何避免这种情况是否有任何选项可以包含在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:15:37.750

`imageScaleType(ImageScaleType.NONE)`在显示选项 ( `DisplayImageOptions`)中启用。

# c# - 映射骨架关节以创建骨架

> ID：15681378
> 
> 赞同：0
> 
> 时间：2013-03-28T12:06:31.723
> 
> 标签：c#, kinect

我已经研究了好几天了，但没有成功，看看其他问题是堆栈溢出是我的来源之一。我正在使用 Kinect for Windows 创建一个程序，它将跟踪用户的关节并在单独的“屏幕”上绘制骨架，我已经映射了关节本身，并且我正在使用图像（红点）来演示位置映射的关节。

我的下一步是通过从一个关节到另一个关节画一条线来构建骨架本身，我遇到的问题是如何画线......我倾向于使事情过于复杂，所以我想知道我是否只是在制作对自己来说困难的事情，而不是仅仅找到最简单的解决方案。

我觉得我已经完成了 99% 的工作，但我仍然遇到一个我无法理解的错误，请在错误消息和相关的 C# 代码下方找到。

```
"cannot convert from 'Microsoft.Kinect.SkeletonPoint' to 'System.Windows.Point" 
```

代码：

```
private void DrawBone (Joint jointFrom, Joint jointTo)
{
    Brush centerPointBrush;
    Pen trackedBonePen = new Pen(Brushes.White, TrackedBoneThickness);
    inferredBonePen = new Pen(Brushes.Gray, InferredBoneThickness);
    DrawingVisual visual = new DrawingVisual();
    DrawingContext context = visual.RenderOpen();

    centerPointBrush = Brushes.Red;

    if (jointFrom.TrackingState == JointTrackingState.NotTracked
        || jointTo.TrackingState == JointTrackingState.NotTracked)
    {
        return;
    }

    if (jointFrom.TrackingState == JointTrackingState.Inferred
        || jointTo.TrackingState == JointTrackingState.Inferred)
    {       
        context.DrawLine(inferredBonePen,jointFrom.Position, jointTo.Position);
    }

    if (jointFrom.TrackingState == JointTrackingState.Tracked
        || jointTo.TrackingState == JointTrackingState.Tracked)
    {
        context.DrawLine(trackedBonePen, jointFrom.Position, jointTo.Position);
    }
} 
```

与开头的行相关的错误`context.DrawLine`，因为这些是`DrawLine`函数的不正确参数，我得到一个伴随的错误：

```
Error 4 The best overloaded method match for
'System.Windows.Media.DrawingContext.DrawLine(System.Windows.Media.Pen,
System.Windows.Point, System.Windows.Point)' has some invalid arguments 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-28T15:32:16.977

不要重新发明轮子。微软的人在那里做得很好。也许这段代码可以帮助你：

```
private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
        {
            // Render Torso
            this.DrawBone(skeleton, drawingContext, JointType.Head, JointType.ShoulderCenter);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderRight);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.Spine);
            this.DrawBone(skeleton, drawingContext, JointType.Spine, JointType.HipCenter);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipLeft);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipRight);

            // Left Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderLeft, JointType.ElbowLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowLeft, JointType.WristLeft);
            this.DrawBone(skeleton, drawingContext, JointType.WristLeft, JointType.HandLeft);

            // Right Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderRight, JointType.ElbowRight);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowRight, JointType.WristRight);
            this.DrawBone(skeleton, drawingContext, JointType.WristRight, JointType.HandRight);

            // Left Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipLeft, JointType.KneeLeft);
            this.DrawBone(skeleton, drawingContext, JointType.KneeLeft, JointType.AnkleLeft);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleLeft, JointType.FootLeft);

            // Right Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipRight, JointType.KneeRight);
            this.DrawBone(skeleton, drawingContext, JointType.KneeRight, JointType.AnkleRight);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleRight, JointType.FootRight);

            // Render Joints
            foreach (Joint joint in skeleton.Joints)
            {
                Brush drawBrush = null;

                if (joint.TrackingState == JointTrackingState.Tracked)
                {
                    drawBrush = this.trackedJointBrush;                    
                }
                else if (joint.TrackingState == JointTrackingState.Inferred)
                {
                    drawBrush = this.inferredJointBrush;                    
                }

                if (drawBrush != null)
                {
                    drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T16:08:15.717

也许我没有理解正确，但是你为什么要做已经做过的事情呢？这是来自 Kinect Developer Toolkit 1.8 的示例代码。

```
 private void DrawBone(Skeleton skeleton, DrawingContext drawingContext, JointType jointType0, JointType jointType1)
    {
        Joint joint0 = skeleton.Joints[jointType0];
        Joint joint1 = skeleton.Joints[jointType1];

        // If we can't find either of these joints, exit
        if (joint0.TrackingState == JointTrackingState.NotTracked || joint1.TrackingState == JointTrackingState.NotTracked)
        {
            return;
        }

        // Don't draw if both points are inferred
        if (joint0.TrackingState == JointTrackingState.Inferred && joint1.TrackingState == JointTrackingState.Inferred)
        {
            return;
        }

        // We assume all drawn bones are inferred unless BOTH joints are tracked
        Pen drawPen = this.inferredBonePen;

        if (joint0.TrackingState == JointTrackingState.Tracked && joint1.TrackingState == JointTrackingState.Tracked)
        {
            drawPen = this.trackedBonePen;
        }

        drawingContext.DrawLine(drawPen, this.SkeletonPointToScreen(joint0.Position), this.SkeletonPointToScreen(joint1.Position));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T15:12:00.553

正如 Miky Dinescu 指出的那样，您的直接问题是需要将 a 转换`Microsoft.Kinect.Joint.Position`为 a `System.Windows.Point`。

您可能不关心`Z`值（深度），因此需要将`X`和标准化`Y`为您的窗口大小。根据您希望绘制的骨架的行为方式，这可能就像始终将 放置`JointType.Spine`在窗口的中心一样简单；或者您可能需要进行额外的数学运算，以便根据玩家在 Kinect 的 FOV 中的位置来转换骨架需要出现在窗口中的位置。

根据 Kinect 的输入绘制骨架在多个示例中进行了演示，这些示例可从[Kinect for Windows Toolkit 获得](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)。“Skeleton Basics”和“Shape Game”示例是立即浮现在脑海中的两个示例。您还可以仅在[Kinect for Windows Samples CodePlex](http://kinectforwindows.codeplex.com/)页面上找到代码（这些示例针对 SDK 1.6 进行编码，在 SDK 1.7 中都可以正常工作）。

这是“Skeleton Basics”示例的[MainWindow.xaml.cs](http://kinectforwindows.codeplex.com/SourceControl/changeset/view/861462899ae7ca81363f60454e2d44d5370875ae#v1.x/ToolkitSamples1.6.0/C#/SkeletonBasics-WPF/MainWindow.xaml.cs)。记下`DrawBonesAndJoints' and`DrawBone 的函数以演示您想要做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:11:01.437

错误消息说明了一切。而不是`jointFrom.Position`直接使用，您需要创建一个`System.Windows.Point`来表示坐标`jointFrom`并将其传递给`DrawLine`。

…… `jointTo`</p>

复杂之处在于骨架位置，因此`fromJoint.Position`表示 3D 坐标，而用于绘制线条的点是 2D 坐标。所以直接转换是不可能的。相反，您需要在 2D 中投影关节位置并使用投影点来绘制线。

您的另一个选择是[在 WPF 中使用 3D 绘图，](http://msdn.microsoft.com/en-us/library/ms747437.aspx)而不仅仅是绘制到视觉对象。

# java - ModelMap没有将bean传递给jsp

> ID：15681386
> 
> 赞同：0
> 
> 时间：2013-03-28T12:07:10.190
> 
> 标签：java, jsp, spring-mvc

我的应用程序有问题。我正在使用 SpringMVC、Maven、Hibernate。只是我试图在 jsp 视图中打印一些数据。
我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <display-name>app</display-name> 
    <servlet>
        <servlet-name>springmvc</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>springmvc</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的控制器的一部分：

```
@RequestMapping(value="/", method=RequestMethod.GET)
public String generateMainPage(ModelMap model)
{
    UserModel um = new UserModel();
    // setting UserModel data which are 100% not null
    String simpleString = "hello "+new Date().toString();
    int simpleNumber = 1234;
    model.addAttribute("userModel", um);
    model.addAttribute("string", simpleString);
    model.addAttribute("number", simpleNumber);
    return "mainPage";
} 
```

我的模型：

```
public class UserModel
{
    private String name;
    private String age;
    // setters and getters
} 
```

现在，问题是我的jsp 不只从bean 返回**值**。我在[**这里**](https://stackoverflow.com/questions/6970897/modelmap-attribute-not-passing-the-value)发现了类似的问题，但没有解决任何问题。

我的jsp“mainPage”页面的一部分：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Welcome page</title>
</head>
<body>
     ${simpleString} <br/> <!-- this works fine -->
     ${simpleNumber} <br/> <!-- this works fine also -->
     ${um.name} <!-- this return nothing -->
     ${um.age} <!-- same here -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:24:53.340

```
${um.name} <!-- this return nothing --> 
```

它应该是

```
${userModel.name} 
```

因为在控制器中你这样做

```
model.addAttribute("userModel", um); 
```

字符串是属性的名称，可以是任何你想要的

# python - sqlite - 适用于文件，死于 :memory:

> ID：15681387
> 
> 赞同：6
> 
> 时间：2013-03-28T12:07:11.397
> 
> 标签：python, sqlite, sqlalchemy

[我的脚本在使用创建的SQLite](http://en.wikipedia.org/wiki/SQLite)基础（通过[sqlalchemy](http://www.sqlalchemy.org/)）时测试失败，`:memory:`并且在使用使用物理文件创建的基础时通过测试。

该脚本是多线程的。我知道将 SQLite 与多个线程（锁定等）一起使用并不是最好的主意，但我只使用 SQLite 来测试脚本的数据库接口。

当我使用`:memory:`时，脚本死了，抱怨没有表：

```
OperationalError: (OperationalError)
    no such table: content_info u'INSERT INTO content_info ... 
```

测试程序（带[鼻](http://nose.readthedocs.org/en/latest/)）如下：

```
def setup_database():
    global global_engine
    # create database columns
    engine = sqlalchemy.create_engine(...)
    Base.metadata.create_all(engine)
    global_engine = engine

@with_setup(setup_database)
def test_task_spoolers():
    check_database_content_from_another_thread()

def check_database_content_from_another_thread():
    global global_engine
    # from within other thread
    # create new session using global_engine
    # do some inserts 
```

所以在设置中我*确实*创建了数据库和列。我也可以在日志（`echo=True`）中看到它：

```
12:41:08 INFO sqlalchemy.engine.base.Engine 
CREATE TABLE content_info (...

12:41:08 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
12:41:08 INFO sqlalchemy.engine.base.Engine INSERT INTO
    content_info (base_id, request_id, timestamp, ...
12:41:08 INFO sqlalchemy.engine.base.Engine (0, 0, 0, 'dummy_variant',
    None, 0)
12:41:08 INFO sqlalchemy.engine.base.Engine ROLLBACK
Exception in thread Thread-1:
Traceback (most recent call last):
OperationalError: (OperationalError)
    no such table: content_info u'INSERT INTO ... 
```

我的猜测是，当我在线程 A 中创建基础，然后在线程 B 中使用它时，B 在实际创建之前就开始对基础进行操作。但是，我后来添加`time.sleep(3)`了`create_all`它并没有工作。

而且，如前所述，当我使用文件而不是`:memory:`. 知道为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T12:21:47.663

您不能创建到内存数据库的多个连接。相反，一个新的连接会`:memory:`创建一个*新*的数据库。

从[SQLite 文档](http://www.sqlite.org/inmemorydb.html)：

> 每个 :memory: 数据库都彼此不同。因此，打开两个数据库连接，每个连接的文件名为“:memory:”，将创建两个独立的内存数据库。

这与磁盘数据库不同，在磁盘数据库中，使用相同的连接字符串创建多个连接意味着您正在连接到一个数据库。

您正在为线程创建一个新连接，从而创建一个没有创建表的*新数据库。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-01T20:05:10.720

您可以使用这种方法来共享多个线程之间的连接：

```
from sqlalchemy.pool import StaticPool
engine = create_engine('sqlite://',
                connect_args {'check_same_thread':False},
                poolclass=StaticPool) 
```

[https://docs.sqlalchemy.org/en/13/dialects/sqlite.html#using-a-memory-database-in-multiple-threads](https://docs.sqlalchemy.org/en/13/dialects/sqlite.html#using-a-memory-database-in-multiple-threads)

# android - 将本地 css/js 文件从资产文件夹添加到远程网页

> ID：15681389
> 
> 赞同：1
> 
> 时间：2013-03-28T12:07:30.010
> 
> 标签：android

我有一个加载远程网页的 Android webView。由于此页面的代码由一位同事控制，我可以要求他更改它，但我更愿意完全在客户端找到一个独奏。

出于流量和性能方面的原因，我们希望将 css 和 javascript 文件本地存储在客户端上，而不是从服务器加载它们。

我想出了两个想法，但到目前为止都没有成功。

1.  将所有文件存储在资产文件夹中并让 html 引用它们

    问题：webview 似乎不允许访问“file:///...”url

    问题：有没有办法解决这个问题？

2.  只需忽略 html 中的所有这些引用，并在将它们加载到 webview 后注入所有这些文件

    问题：如何将这些文件（.css / .js）添加到我已经加载的 html 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:55:02.627

# 您可以通过以下方式构建本地WebView

*   活动 (LocalWebviewActivity.java)
*   布局 (activity_localwebview.xml)
*   Assets 文件夹（在“assets”文件夹的根目录下，创建文件夹“css”并将“style.css”放在这里）
*   引用 JS 文件的方式与引用 CSS 样式表的方式相同

## LocalWebviewActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class LocalWebviewActivity extends Activity {

    WebView myWebView;
    StringBuilder mySBcontent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_localwebview);

        myWebView = (WebView) findViewById(R.id.webkit);
        mySBcontent = new StringBuilder();

        mySBcontent.append("<html>");
        mySBcontent.append("<head>");
        mySBcontent.append("<link type='text/css' rel='stylesheet' href='css/style.css'>");
        mySBcontent.append("</head>");
        mySBcontent.append("<body>");
        mySBcontent.append("<h1>My Heading</h1>");
        mySBcontent.append("<p>My HTML content</p>");
        mySBcontent.append("<p><img style='width:150px;' src='myImg.png' /></p>");
        mySBcontent.append("</body>");
        mySBcontent.append("</html>");

        myWebView.loadDataWithBaseURL("file:///android_asset/", mySBcontent.toString(), "text/html", "UTF-8", "");
    }
} 
```

## activity_localwebview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <WebView 
        android:id="@+id/webkit"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

# java - Bndtools 输出到控制台

> ID：15681390
> 
> 赞同：0
> 
> 时间：2013-03-28T12:07:32.467
> 
> 标签：java, osgi, bnd, blueprint-osgi, bndtools

我刚刚开始为我的 OSGi 项目使用 bndtools，但我似乎无法配置项目以将信息输出（Hibernate 信息、Spring DM 信息）输出到控制台（在 Eclipse 中）。我在这个项目上遇到了困难，因为我没有得到任何反馈，而且似乎没有创建日志文件。

爱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:43:13.167

您可能会遇到日志库看不到属性的问题。由于这些属性是作为资源查找的，因此只能在同一模块中查看它们。我知道有一个片段（恶心）的解决方案。我不是所有这些日志记录 API 的用户，但您可能想查看 PAX 日志记录。我认为它们为 OSGi 中大多数主要日志库的日志记录提供了适当的设置。

# delphi - 与 Windows 8 平板电脑上的摄像头集成

> ID：15681396
> 
> 赞同：0
> 
> 时间：2013-03-28T12:07:40.563
> 
> 标签：delphi

我们想将设备相机集成到用 Delphi 编写的应用程序中。该设备是戴尔 Windows 8 平板电脑。我们需要的很简单。一个按钮将启动相机，传递存储图像的文件名。一旦照片被拍摄并存储在指定的文件名中，控制权就会传回给我们的应用程序。将控制权返回到 Delphi 应用程序并不那么重要。我们可以编写一个循环来查找它，一旦找到它就会出现在前面。

完成此任务的最简单方法是什么？

可以通过文件名参数调用相机吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:41:19.357

Windows 带有 WIA，[Window Image Acquisition](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630368%28v=vs.85%29.aspx)可用于此。

下面是一些 Delphi 特定的链接：

*   [Delphi：WIA 从连接到 USB 的数码相机中获取图像](https://gist.github.com/stijnsanders/1724324)
*   [如何用德尔福控制相机](https://stackoverflow.com/questions/2012630/how-to-control-a-camera-with-delphi)
*   [http://www.neunbeere.de/UseNet/WIA.html](http://www.neunbeere.de/UseNet/WIA.html)

# session - Imageresizer授权事件中访问Session

> ID：15681399
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:07:45.550
> 
> 标签：session, asp.net-mvc-4, authorization, imageresizer

我正在尝试在 ImageResizer (3.3.2) 的 MVC 4 应用程序中实现自定义授权，并且在我尝试访问会话变量之前一切正常。

在 global.asax 中，我已将以下事件侦听器添加到管道中：

```
ImageResizer.Configuration.Config.Current.Pipeline.AuthorizeImage += (m, c, args) =>
{
    // check authorization only for asset path
    if (args.VirtualPath.IndexOf("/Assets/", StringComparison.OrdinalIgnoreCase) > -1)
    {
        // HttpContext from parameter
        // c.Session is always null

        // Static access
        // HttpContext.Current.Session is also null
    }
}; 
```

如代码中所述，Session 始终为空。有没有办法将模块配置为启用会话或访问会话变量的任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:55:00.953

### FormsAuthentication 模块未配置为在您的应用程序中为 .jpg 请求运行。您可以在 FormsAuthentication 模块级别更改此设置，或[启用 RAMMFAR（这可能会影响其他静态请求的性能）](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)。

[这个问题](https://stackoverflow.com/questions/6279643/prevent-iis-from-serving-static-files-through-asp-net-pipeline)本质上是一样的。

# jquery - Asp.Net MVC4中DBFirst和CodeFirst的区别

> ID：15681401
> 
> 赞同：-3
> 
> 时间：2013-03-28T12:07:51.143
> 
> 标签：jquery, asp.net-mvc

我想使用 MVC4 开发一个大型应用程序（大多数人建议这是它的新功能并且具有更多功能）和 EF。

我很确定我将有超过 100 个表和每个表中超过 50,000 条记录，所以我主要关心应用程序的速度。我将搜索上述数据。

现在的问题是

1-我应该使用 DBFirst 还是 CodeFirst 或其他什么？

2-哪一个会快速运行。我需要速度。

3-如何避免服务器控制/使用以提高速度。

请注意，我在 dotnet 中使用 EF。

现在我一直在使用什么来开发 webforms 中的应用程序。请检查我下面的代码并告诉我可以在 MVC 中做吗？

```
$.ajax({

        type: 'POST',
        url: 'Default.aspx/GetGenCategories',
        data: "{}",
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (msg) {
            var table = '<thead><tr><th></th></tr></thead><tbody>';

            //loop each record
            for (var i = 0; i < msg.d.length; i++) {
                table += '<tr><td class="text16size_hyper">' + msg.d[i].CategoryName + '</td></tr>';

            }
            table += '</tbody>';
            $('#gen_Cat').html(table).dataTable();

        }

    }); 
```

现在在代码页上我有这个

```
[System.Web.Services.WebMethod()]
[System.Web.Script.Services.ScriptMethod()]
public static List<clsGeneral> GetGenCategories()
{
    //make object of city class
    clsGeneral cl = new clsGeneral();
    return cl.GetGenCategories();

} 
```

amd 这是我的课

```
public List<clsGeneral> GetGenCategories()
{

    try
    {

        Database db = DatabaseFactory.CreateDatabase();

        DbCommand oCmd = db.GetStoredProcCommand("SP");

        DataSet dsResult = db.ExecuteDataSet(oCmd);

        var query = from o in dsResult.Tables[0].AsEnumerable()
                    select new clsGeneral
                    {
                        Cat_id = o.Field<int>("Cat_id"),
                        CategoryName = o.Field<string>("CategoryName")

                    };
        List<clsGeneral> lstDisplay = new List<clsGeneral>();
        lstDisplay.AddRange(query);
        return lstDisplay;

    } 
```

…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:21:13.110

查看显示 Code First 与 Model First 之间区别的线程，然后选择适合您的[。](https://stackoverflow.com/questions/5446316/ef-4-1-code-first-vs-model-database-first)

Asp.net MVC 中没有服务器控件。事实上，您可以控制要呈现的 HTML。

你可以用 web 表单做什么，当然你可以在 MVC 中做。方法会有所不同。

# android - 两个 IDE 和 1 个 android sdk 管理器，是否无冲突？

> ID：15681402
> 
> 赞同：0
> 
> 时间：2013-03-28T12:07:51.597
> 
> 标签：android, eclipse, ide

两个 IDE 和 1 个 android sdk 管理器，是否无冲突？是的，关于我的两个 IDE 使用相同的 android sdk 管理器.. 我需要担心冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:16:16.660

我认为这不应该让你担心。您只有一个由 Android SDK 构建工具创建的签名。因此，您可以在同一部手机上同时使用它们进行开发。如果您从两个 IDE 运行相同的应用程序，那么最后一个运行的应用程序将覆盖另一个。

# vb.net - 使用 VB.Net 读取和写入 xml 文件

> ID：15681403
> 
> 赞同：3
> 
> 时间：2013-03-28T12:07:52.867
> 
> 标签：vb.net, xml-parsing

我对编程世界相当陌生（我是网络人）。然而，我被要求开发一个为控制台应用程序配置 xml 文件的前端。控制台应用程序从这个 xml 文件中读取并打开浏览器的多个实例，每个监视器一个实例（总共 6 个监视器）。有4个控制中心，每个控制中心有6个监视器。每个控制中心都由单独的 PC 运行。这些电脑不在网络上，也无法相互访问。有人告诉我我也不能使用数据库。

每个监视器一次将显示一个网站，可能会列出多个站点以显示在特定监视器上，因此它们会定期更改。每个控制中心将显示不同的站点。

我的第一个问题：这个 XML 有效吗？

```
<ControlCenter>
  <Monitor>
      <monitor_id>0</monitor_id>
      <browser_short_na>ie</browser_short_na>
  <url_list>
    <url>
    <url_id>0</url_id>
    <url_na><![CDATA[http://www.hmv.com]]></url_na>
         <parameter><![CDATA[]]></parameter>
    </url>
    <url>
    <url_id>1</url_id>
    <url_na><![CDATA[http://www.amazon.com]]></url_na>
         <parameter><![CDATA[]]></parameter>
    </url>
    <url>
    <url_id>2</url_id>
    <url_na><![CDATA[http://www.google.com]]></url_na>
         <parameter><![CDATA[]]></parameter>
    </url>
 </url_list>
   </Monitor>
   <Monitor>
   <monitor_id>1</monitor_id>
   <browser_short_na>ie</browser_short_na>
    <url_list>
    <url>
            <url_id>0</url_id>
            <url_na><![CDATA[http://www.amazon.com]]></url_na>
            <parameter><![CDATA[]]></parameter>
    </url>
    </url_list>
   </Monitor>
</ControlCenter> 
```

到目前为止我所做的是打开 xml 文件并将所有监视器添加到组合框

```
 Dim dom As New Xml.XmlDocument
    dom.Load("test.xml")
    ComboBox1.Items.Clear()
    Dim monitorid As String = String.Empty
    For Each node As Xml.XmlNode In  dom.SelectNodes("//ControlCenter/Monitor/monitor_id")
        monitorid = node.InnerText
        ComboBox1.Items.Add(monitorid)
    Next 
```

这就是我现在卡住的地方。一旦用户从组合框中选择了一个监视器，我就需要获取该监视器的所有信息。所以我需要browser_short_na，所有的url都基于选择的monitor_id。

我尝试创建一个数据集，使用 readxml 加载 xmlfile。然后我尝试创建一个指向该数据集的数据视图。尝试将 RowFilter 添加到数据视图。

```
Dim val As String = ComboBox1.SelectedItem.ToString

    Dim dsXmlFile As New DataSet
    dsXmlFile.ReadXml("test.xml")

Dim dv As New DataView
    dv.Table = dsXmlFile.Tables(0)

    Dim drv As DataRowView
    dv.RowFilter = "monitor_id = " & val

Dim url As String = ""
    'Retrieve my values returned in the result
    For Each drv In dv
        url = drv("url_na")
    Next 
```

当我单步执行代码并查看 for each 循环时，它失败并显示消息“url_na 既不是 DataColumn 也不是表监视器的 DataRelation”。

我在想我没有正确处理 url_list 部分。

读取所选监视器的所有信息后，我将在文本框/列表框中显示值，然后用户可以对其进行编辑。如果他们随后保存，则应将新值写入 xml 文件。他们还可以选择在列表中添加额外的 url，甚至创建一个全新的监控部分。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:42:25.403

您应该使用 XPath 来解析 XML 文档。

*   在 XMLDocument 中加载 xml 文件
*   创建一个 XMLNodeList 并使用 XPath 从加载的 xml
    文档中选择节点。
*   然后解析节点列表并根据 id提取所选监控节点的所有信息。

以下是对您有帮助的 XPath 表达式：

1.  从文件中选择监控节点：“ **/ControlCenter/Monitor** ”
2.  根据监视器 ID 选择 browser_na 字段：“ **/ControlCenter/Monitor[monitor_id='0']/browser_short_na** ”
3.  对于基于监​​视器 ID 的选择 url：“ **/ControlCenter/Monitor[monitor_id='0']/url_list/url/url_na** ”

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:42:48.773

对于您的问题，我会反过来：

1.  定义一个类（或多个类）来保存您需要的数据。
2.  使用简单的序列化程序从该文件加载/保存。

如果您这样做，那么您的选择问题只是一个经典的 WPF 问题。

```
Public Class Monitor
    Public Property MonitorId As integer
    Public Property ListOfUrl As List(Of String)
End Class 
```

`MonitorsConfiguration`然后将引用一个`List(Of Monitor)`对象。

您可以使用`ViewModel`对象`MonitorsConfiguration`轻松处理。
这`ViewModel`有一个`SelectedMonitorIndex`属性，并在索引属性更改时更新一个`UrlForThisMonitor`url 列表。
（显然它应该实现`INotifyPropertyChanged`）

好的，对 ViewModel 的外观有一点看法：

```
Public Class MonitorsConfigurationVM
       Implement INotifyPropertyChanged

   ' creates a new VM. Throws exception if file name is not valid 
   Public Sub New(ConfigFileName As String)
      _FileName = ConfigFileName
      _MonitorsConfiguration = // Deserialization of the file //
      _MonitorIndex = 0 
   End Sub

  Public Property MonitorIndex As integer
   Get
     return _MonitorIndex
   End Get
   Set (Value)
     if (_MonitorIndex = value) then return
     ' you might want to perform check here and allow only valid index
     _MonitorIndex = value
     _UrlIndex=0
     NotifyPropertyChanged("MonitorIndex")
     NotifyPropertyChanged("MonitorUrls")
     NotifyPropertyChanged("HasUrl")
     NotifyPropertyChanged("UrlIndex")
   End Set
  End Property

  Public ReadOnly Property HasUrl As Boolean  
   Get
      return Not (MonitorUrls Is Nothing OrElse MonitorUrls.count = 0 )
      ' ( might be used to disable the listbox bound to MonitorUrl )
   End Get
  End Property

  Public ReadOnly Property MonitorUrls As List(Of String)
  Get
    return _MonitorConfiguration(_MonitorIndex).ListOfUrl  '(you might want to chk)
  End Get
  End Property

  Public Property UrlIndex As Integer 
  Get
     return _UrlIndex
  End Get
  Set (value)
    if value = _UrlIndex then return
    ' you might want to perform some check here
    _UrlIndex = value
    NotifyPropertyChanged("UrlIndex")
  End Set
  End Property

 ' And Also : AddMonitor  /   AddUrl  /  SaveConfiguration / ...

  Private _FileName As String = Nothing
  Private _MonitorsConfiguration As List(Of Monitor)=Nothing
  Private _MonitorIndex As integer = 0

   Protected Sub NotifyPropertyChanged(ByVal name As String)
       RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
   End Sub

   Public Event PropertyChanged(ByVal sender As Object, ByVal e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

End Class 
```

# android - 我可以将自己的 Google Play 帐户转为测试帐户而没有任何问题吗？

> ID：15681412
> 
> 赞同：2
> 
> 时间：2013-03-28T12:08:18.677
> 
> 标签：android, testing, google-play

我正在开发我们的第一个应用程序购买中使用的应用程序，并且需要测试它是否正常工作。

目前，如果我尝试在“android.test.purchased”项目上进行购买，我会收到一条错误消息，说“invalidClient”。我被引导相信这是因为我的帐户不是测试用户。

我找到了这个页面：

[http://developer.android.com/google/play/billing/billing_admin.html#billing-testing-setup](http://developer.android.com/google/play/billing/billing_admin.html#billing-testing-setup)

它告诉我如何设置测试用户。我可以设置一个新的用户帐户，但我手头只有一个 Android 设备，这意味着要进行出厂重置以使其成为主要帐户，如果可能的话，我宁愿避免这种情况。

或者，我可以将我自己的个人帐户加倍为测试用户吗？上面的链接说测试用户有限制，其中之一是：

> 测试帐户只能用于购买在应用程序的产品列表中列出（和发布）的项目。

这似乎意味着我只能使用我的帐户在我正在开发的应用程序中购买东西，而不能像往常一样从其他应用程序中购买东西。

那么我是否可以将自己的个人账户转为测试用户，正常使用该账户购买其他应用程序时不会出现任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:06:39.267

它不会影响您将测试帐户用作 Google Play 上其他应用的普通帐户的能力。

因此，您可以简单地使用自己的帐户作为测试帐户。（其实如果你的账号是发布者账号，就不需要添加为测试账号了。）

文档中提到的限制是与发布者帐户的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:00:48.317

不幸的是，没有办法解决它。如果您只有一个设备，则必须擦除该设备，然后首先使用您要用作测试帐户的电子邮件地址登录。只有这样，您才能测试应用内计费。您还可以从 Google Play 商店下载其他项目。我已经这样做了，没有任何问题。

# asp.net-mvc - Ninject mvc InRequestScope

> ID：15681417
> 
> 赞同：0
> 
> 时间：2013-03-28T12:08:29.140
> 
> 标签：asp.net-mvc, ninject.web.mvc

我将 NuGet 的 ninject 与 MVC 4 应用程序一起使用

```
public class MvcApplication : System.Web.HttpApplication 
```

我知道我可以使用 ninject 类作为 bas 类，但我没有。

在我的 global.asax.cs 我

```
ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory()); 
```

在哪里

```
public class NinjectControllerFactory : DefaultControllerFactory  {
    private IKernel _ninjectKernel;

    public NinjectControllerFactory() {
        _ninjectKernel = new StandardKernel();
        AddBindings();
    }

    public T GetInstance<T>() {
        return _ninjectKernel.Get<T>();
    }

    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType) {
        return controllerType == null
            ? null
            : (IController)_ninjectKernel.Get(controllerType);
    }

    private void AddBindings() {
        _ninjectKernel.Bind<IVIPRepository>().To<VIPRepository>().InRequestScope().
            WithConstructorArgument("connectionString", ConfigurationManager.ConnectionStrings["VIPFullContext"].ConnectionString);
        _ninjectKernel.Bind<IPrezentationProvider>().To<HardPrezProvider.HardPrezentationProvider>().InRequestScope(); ;
    }
} 
```

在我的 web.config 中，我加载了模块（并检查它是否加载良好）

```
<system.webServer>
    <modules>
        <add name="OnePerRequestHttpModule" type="Ninject.Web.Common.OnePerRequestHttpModule"/>
    </modules>
</system.webServer> 
```

我的控制器源自`BaseController(IVIPRepository repo)`. 并且应用程序运行良好......但似乎永远不会释放存储库（以及相关的上下文）（VIPRepository 的 dispose 方法中的断点）

我还通过删除来清除 app_start，`NinjectWebCommon.cs`因为我认为我已经正确设置了 Ninject.... 似乎没有。

我做错什么了 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:38:59.170

我建议您查看这篇关于 MVC 3 / 4 的 Ninject nuget 包的优秀且易于遵循的帖子：[使用 NInject DI 容器在 Asp.NET MVC 4 中实现依赖注入](http://web.archive.org/web/20130824184025/http://dotnetfever.com/implementing-dependency-injection-in-asp-net-mvc-4-using-ninject-di-container)

使用 nuget 包，设置看起来非常简单，可以在 30 秒内完成。

# java - 此处不允许使用 void 类型 (java) (s != null)

> ID：15681418
> 
> 赞同：3
> 
> 时间：2013-03-28T12:08:30.920
> 
> 标签：java

我有这段代码，它说这里不允许使用 void 类型（我放 //error 注释的地方）当我删除 && ..... 它不会给出错误

```
public void actionPerformed(ActionEvent ae) {
if (ae.getSource() == ok) {
    Contact nweC = null;

    String vnm = tfVoor.getText();
    String anm = tfAchter.getText();
    String em = tfEmail.getText();
    if (em.trim().length() > 0 && !hetBoek.heeftContact(em)) {
        nweC = new Contact(vnm, anm, em);
    } else {
        tfEmail.setText("");
        JOptionPane.showMessageDialog(null, "Onjuist emailadres", "Mislukt", JOptionPane.PLAIN_MESSAGE);
    }
    //error if (nweC != null && hetBoek.voegContactToe(nweC)) {
                JOptionPane.showMessageDialog(null, "Toevoegen gelukt", "Succes", JOptionPane.PLAIN_MESSAGE);
    }
} else if (ae.getSource() == cancel) {
    tfVoor.setText("");
    tfAchter.setText("");
    tfEmail.setText("");
} else if (ae.getSource() == toon) {
    String s = hetBoek.toString();
    JOptionPane.showMessageDialog(null, s, "Druk op OK",
    JOptionPane.PLAIN_MESSAGE);
}
} 
```

我希望有一个人可以帮助我！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:10:27.123

`hetBoek.voegContactToe(nweC)`返回`void`（无）。它必须返回 a`boolean`才能在`if`语句的表达式中使用它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:10:07.407

`hetBoek.voegContactToe(nweC)`返回一个 void 。你应该有`boolean`类型`if()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T12:10:29.497

该方法`hetBoek.voegContactToe`最有可能`void`。它不返回值，所以在`if`语句中使用它时您的意图是什么：

```
if (nweC != null && hetBoek.voegContactToe(nweC)) { 
```

该方法应该返回`boolean`而不是返回`void`吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-28T12:10:36.303

我认为这个方法的返回类型是无效的

```
hetBoek.voegContactToe(nweC); 
```

它的返回类型应该是布尔值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-28T12:14:36.440

您缺少布尔值

```
public boolean hetBoek.voegContactToe(Contact contact)

if (e1 op1 e2 op2 e3 ... )
{
...
} 
```

e - 需要返回布尔值的表达式

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-28T12:18:41.233

目前`hetBoek.voegContactToe(nweC);`无效。它的返回类型应该是布尔值。

找到您的方法`voegContactToe`() 并将其 reutrn 类型更改为布尔值并根据逻辑添加 return 语句。

# c# - C#/apsx.net - 动态创建的按钮不起作用

> ID：15681430
> 
> 赞同：0
> 
> 时间：2013-03-28T12:09:07.197
> 
> 标签：c#, .net, button, buttonclick, preinit

这是我的问题：我在页面中动态创建了一些按钮（在 Page_PreInit 方法中），所有按钮都链接到同一个事件处理程序。但是当我点击它们时，这些按钮不会触发事件......有人可以帮助我吗？

这是我的一些代码：

按钮创建（在 Page_PreInit 方法的 foreach 循环上）：

```
Button b = new Button();
field.Controls.Add(b);

b.Text = "Download";
b.ID = tmp_out[type] as String;
b.Click += new EventHandler(Download_Click); 
```

OnClick 方法：

```
private void Download_Click(object sender, EventArgs e)
{
    //doing some stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:12:27.533

必须在 Page PreInit 或 Init 期间添加动态控件，而不是在加载时添加。这是因为页面生命周期和视图状态加载......所以先试试看是否能解决问题。

另外，我相信我读到最好以这种方式订购您的代码：

```
Button b = new Button();
field.Controls.Add(b);

b.Text = "Download";
b.ID = tmp_out[type] as String;
b.Click += new EventHandler(Download_Click); 
```

首先将控件添加到内部集合，然后更改它的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:17:17.000

您的事件处理程序语句是

```
b.Click += new EventHandler(Download_Click); 
```

但你的方法是

```
private void Download_Command(object sender, CommandEventArgs e) 
```

你确定它是正确的触发方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:18:54.520

不应该是这样吗？

```
...
b.Click += new EventHandler(Download_Command);
...

private void Download_Command(object sender, EventArgs e)
{
    //doing some stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T10:28:06.943

好的，我解决了我的问题。

按钮的 ID 包含一些“\”。我刚刚删除了那些'\'，它工作得很好。

谢谢大家的回复！

# c# - 为什么相同的 LINQ 表达式在两个不同的 foreach 循环中表现不同？

> ID：15681431
> 
> 赞同：0
> 
> 时间：2013-03-28T12:09:10.587
> 
> 标签：c#, .net, linq, linq-to-xml

我有以下 XML。

```
<Parts>
  <Part name="Part1" disabled="true"></Part>
  <Part name="Part2" disabled="false"></Part>
  <Part name="Part3" ></Part>
  <Part name="Part4" disabled="true"></Part>  
</Parts> 
```

我想删除`disabled`属性设置为的节点`true`。如果 'disabled' 属性没有用于任何 'Part' 元素，则意味着它没有被禁用。

我写了以下代码：

```
XmlNode root = xmlDoc.DocumentElement;
List<XmlNode> disabledNodes = new List<XmlNode>();
foreach(XmlNode node in root.ChildNodes)
{
    if(node.Attributes["disabled"] != null && 
        Convert.ToBoolean(node.Attributes["disabled"].Value))
    {
        disabledNodes.Add(node);
    }
}

foreach (XmlNode node in disabledNodes)
{
    root .RemoveChild(node);
} 
```

此代码按预期从 XML 中删除 2 个节点。

然后我编写了以下代码以使代码紧凑：

```
foreach (XmlNode node in root.ChildNodes.Cast<XmlNode>()
    .Where(child => child.Attributes["disabled"] != null && 
    Convert.ToBoolean(child.Attributes["disabled"].Value)))
{
    root.RemoveChild(node); // This line works fine without any exception.
} 
```

**我发现这个循环只迭代一次，只从 XML 中删除一个节点。**

* * *

编辑问题：

现在，当我更改`foreach`循环时，这次我将 LINQ 表达式的结果转换为`List<T>`using`ToList()`方法（正如@Toni Petrina 在他的回答中所建议的那样）。这次它工作正常！

```
 foreach (XmlNode node in root.ChildNodes.Cast<XmlNode>()
        .Where(child => child.Attributes["disabled"] != null && 
        Convert.ToBoolean(child.Attributes["disabled"].Value)).ToList())
    {
        root.RemoveChild(node); // This line works fine without any exception.
    } 
```

**为什么使用`ToList()`made LINQ表达式`foreach`按预期循环工作？**为什么 LINQ 的结果在两种不同情况下表现不同的任何技术原因？

我正在使用 .NET 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:20:37.243

您的问题是您在枚举时更改了集合。这是错误的。你应该使用这样的东西：

```
var disabledNodes = root.ChildNodes.Cast<XmlNode>()
    .Where(child => child.Attributes["disabled"] != null && 
    Convert.ToBoolean(child.Attributes["disabled"].Value)).ToArray();

foreach (XmlNode node in disabledNodes)
{
    root.RemoveChild(node);
} 
```

**更新**

这是由于延迟执行。如果不使用 ToArray() 或 ToList()，IEnumerator 会在需要下一个元素时（即 foreach 转到下一轮时）一个接一个地返回值。当 foreach 执行第一轮时，您的源代码会更改并且迭代停止。但是如果你调用 ToArray()，你会得到一个包含 disabledNodes 数组的新变量，并且 foreach 不会改变它迭代的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:14:04.117

写：

```
foreach (XmlNode node in root.ChildNodes.Cast<XmlNode>()
    .Where(child => child.Attributes["disabled"] != null && 
    Convert.ToBoolean(child.Attributes["disabled"].Value)).ToList())
{
    root.RemoveChild(node);
} 
```

我添加了额外的 ToList() 来强制立即执行 LINQ 表达式。

当你创建一个 LINQ 查询时，你会得到一个 IEnumerable 集合，它实际上并不包含任何结果。即使您编写了所有这些 Select 和 Where 以及许多其他子句，但在开始迭代**之前不会执行完整的查询。**只有这样才能运行实际的查询。

在原始代码中，您创建了一个查询并开始对其进行迭代。您收到了通过所有 LINQ 子句的第一个项目并删除了第一个节点。但是由于您正在迭代现在已修改的根集合，因此迭代停止。

您不能在 foreach 循环的主体中更改您正在迭代的集合。

# php - 使用 PHP 在 for 循环索引中添加静态数字

> ID：15681433
> 
> 赞同：1
> 
> 时间：2013-03-28T12:09:16.567
> 
> 标签：php, for-loop

我在 PHP 中有以下 for 循环代码

```
for($i=10; $i<=50; $i=$i+10)
        {
            echo $i;
        } 
```

它将打印 10 20 30 40 50

我想添加一些特定的 $i 值，例如 $i=15 和 $i=28

所以它会打印 10 15 20 28 30 40 50

我应该如何编辑代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:10:32.697

如果你想要特定的值，你应该用这些值创建一个数组并遍历它：

```
$vals = array(10, 15, 20, 28, 30, 40, 50);
foreach ($vals as $i) {
    echo $i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:25:20.433

您可以将 15 和 28 值放入数组中，并使用 array_intersect 获取值。

创建一个数组来保存 15 和 28 值（中间值）。

```
$new_vals = array(15,28); 
```

现在在您的 for 循环中，您可以调用 array_insersect 函数来获取中间值。您的最终代码将如下所示。

```
$new_vals = array(15,28);

for($i=10; $i<=50; $i=$i+10)
{
    echo $i;
    $val_range = range($i,$i+10);
    $new_array = array_intersect($new_vals , $val_range);
    foreach($new_array as $value)
    {
        echo $value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:12:07.100

如果您有固定显示这些值的位置..那么您可以使用简单的 if

```
 for($i=10; $i<=50; $i=$i+10)
    {

         echo $i;
        if($i == 10)
        {
          echo '15';
        }
        if($i == 20)
        {
           echo '28';
        }

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T12:13:26.687

好的，我来玩“面试题”游戏：

```
for($i=10; $i<=50; $i++) {
    if ($i % 10 === 0) {
        echo $i;
    }
    else if ($i === 15 || $i === 28) {
        echo $i;
    }
} 
```

结果在[http://codepad.org/JBPkm8W1](http://codepad.org/JBPkm8W1)

您可以通过添加“允许值”表来改进此答案：

```
$allowed = array (15, 28); // List here all the non % 10 value you want to print
for($i=10; $i<=50; $i++) {
    if ($i % 10 === 0) {
        echo $i;
    }
    else if (in_array($i, $allowed)) {
        echo $i;
    }
} 
```

结果在[http://codepad.org/w8Erv17K](http://codepad.org/w8Erv17K)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-28T12:15:40.817

尝试这个 ：

```
$extra      = array(15,28);
$res        = array();
for($i=10; $i<=50; $i=$i+10){
    $res[]  = $i;
}

$result     = array_merge($res,$extra);
sort($result);

echo "<pre>";
print_r($result); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-28T12:13:27.997

最简单的方法是使用`foreach`像@WaleedKhan 写的循环。

要准备数组，您可以`for`像以前一样使用循环：

```
$vals = array(); 
for($i = 10; $i <= 50; $i = $i + 10){
  $vals[] = $i;
  }
$vals[] = 15;
$vals[] = 28;
sort($vals);
foreach(... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T12:11:21.690

你可以这样做：

```
function EchoLoopStuff($start, $to, $step) {
  for($i=$start; $i<=$to; $i=$i+$step) {
    echo $i;
  }
} 
```

但是您需要添加一些检查以在输入矛盾时避免出现问题。

# google-maps-api-3 - KML 文件超过 2000 个地标

> ID：15681434
> 
> 赞同：0
> 
> 时间：2013-03-28T12:09:21.253
> 
> 标签：google-maps-api-3, kml

我想将包含 2000 多个地标的 kml 文件导入到 googla 地图中。我使用谷歌 api v3。我只能显示 200 个地标。我知道我可以使用更多层，但我只想要一个，因为我必须每周刷新它，而且我不想每次都拆分。

感谢您的重播

这是代码：

```
<script>

  var map;
  function initialize() {

    var mapOptions = {
      zoom: 8,
      center: new google.maps.LatLng(47.25,19.5),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);

    loadKmlLayer(map);

  }

  function loadKmlLayer(map) {
      var ctaLayer2 = new google.maps.KmlLayer('https://.../asdf.kml', {
        suppressInfoWindows: false,
        preserveViewport: false,
        map: map 
    });
}

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:47:10.813

如果您的 KML 不是很复杂，您可以尝试使用第三方 KML 解析器（[geoxml3](https://code.google.com/p/geoxml3/)或[geoxml-v3](https://code.google.com/p/geoxml-v3/)）进行渲染，看看是否可行（或指出您在使用 KmlLayer 时遇到的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:50:12.167

（功能（） {

```
window.onload = function() {

    // Creating a new map
    var map = new google.maps.Map(document.getElementById("map"), {
      center: new google.maps.LatLng(47.10,19.5),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    // Creating the JSON data
    var json = [ 
```

此处的数据如下：

{"title" :"City ZIP CODE STREET" , "lat" :47.2876 , "lng" :20.4978 ,"description" :"YOUR DESCRIPTION"},

```
 ]

    // Creating a global infoWindow object that will be reused by all markers
    var infoWindow = new google.maps.InfoWindow();

    // Looping through the JSON data
    for (var i = 0, length = json.length; i < length; i++)
    {
        var data = json[i],
            latLng = new google.maps.LatLng(data.lat, data.lng);

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: data.title,
        //  icon: iconimage

        });

        // Creating a closure to retain the correct data, notice how I pass the current data in the loop into the closure (marker, data)
        (function(marker, data) {

            // Attaching a click event to the current marker
            google.maps.event.addListener(marker, "click", function(e) {
                infoWindow.setContent(data.description);
                infoWindow.open(map, marker);
            });

        })

        //OnClick event
        (marker, data);

    }
} })(); 
```

# gwt - 动态定位 GWT 小部件

> ID：15681440
> 
> 赞同：1
> 
> 时间：2013-03-28T12:09:36.630
> 
> 标签：gwt

我的目标是有一个带有背景图像的按钮和一个标签。我想将标签放在按钮的中心并垂直对齐它的文本。我希望按钮按标签中的字符数扩展。什么是用于构建这种类型的复合小部件的最佳面板类型，因为我在使用 AbsolutePanel 时遇到问题，因为它不会随其子元素动态增长。

```
private PushButton button;
private Label label = new Label();
private AbsolutePanel panel = new AbsolutePanel();
private Image image = new Image("images/rectangle_blue.png");

public ExpandingRectangularButton(String text)
{
    label.setText(text);
    String width = "120px";
    String height = "160px";
    image.setWidth(width);
    image.setHeight(height);
    button = new PushButton(image);

    panel.add(button, 0, 0);
    panel.setWidth(width);
    panel.setHeight(height);
    initWidget( panel );
} 
```

在这种情况下使用的最佳面板类型是什么？我已经尝试过流、水平和弹性表，但我无法让它们正确地将小部件堆叠在一起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:23:55.450

[流量面板？？](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FlowPanel.html).

[FlowPanel](https://developers.google.com/web-toolkit/tools/gwtdesigner/layoutmanagers/gwt/flowpanel)以定向流的形式排列组件，就像段落中的文本行一样。

# c - 函数声明为静态但从未定义

> ID：15681442
> 
> 赞同：53
> 
> 时间：2013-03-28T12:09:42.157
> 
> 标签：c, gcc-warning

我有一个头文件假设 abc.h，其中我的函数声明为：

```
static int function1(); 
```

我在 abc.c 中包含了这个头文件，并定义了函数并使用了它。

```
static int function1()
{
 < function definition>
} 
```

编译后我收到警告：

```
warning: function1 declared static but never defined 
```

如何在不删除静电的情况下删除警告。谢谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-28T12:32:56.087

静态函数可以在头文件中声明，但这会导致包含头文件的每个源文件都有自己的函数私有副本，这可能不是预期的。

你确定你没有在任何其他 .c 文件中包含**abc.h**文件吗？

因为将函数声明为静态，需要在包含它的**所有**.c 文件中定义该函数。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-12-09T22:08:04.743

好的做法：在定义它们的源文件中声明静态函数（请同时提供原型），因为这是它们可见的唯一文件。

这样，函数只对该文件可见，这样的可见性问题可以减少可能的代码冲突！因此，只需在 .c 文件中提供原型和静态函数定义即可。不要在头文件中包含静态函数；.h 文件供外部使用。

重复：[C 中的静态函数](https://stackoverflow.com/questions/14149814/static-functions-in-c/41069834#41069834)

# java - 为什么这段代码在 Java 1.6 中可以编译，而在 Java 1.7 中却没有？

> ID：15681444
> 
> 赞同：16
> 
> 时间：2013-03-28T12:09:47.730
> 
> 标签：java, generics, java-7, javac, java-6

以下代码在 Java 1.6 中编译良好，但在 Java 1.7 中编译失败。为什么？

代码的相关部分是对私有“数据”字段的引用。该引用来自定义该字段的同一类中，因此看起来是合法的。但它是通过一个通用类型的变量发生的。这段代码——一个基于内部库中的类的精简示例——在 Java 1.6 中有效，但现在在 Java 1.7 中无效。

我不是在问如何解决这个问题。我已经这样做了。我试图找到解释为什么这不再起作用。想到了三种可能性：

*   根据 JLS，这段代码*不合法*​​，不应该编译（1.6 编译器中有一个错误，在 1.7 中修复）
*   根据 JLS，这段代码是*合法*的，应该可以编译（1.7 编译器中引入了向后兼容性错误）
*   此代码属于JLS 中的*灰色区域*

Foo.java：

```
import java.util.TreeMap;
import java.util.Map;

public abstract class Foo<V extends Foo<V>> {

    private final Map<String,Object> data = new TreeMap<String,Object>();

    protected Foo() { ; }

    // Subclasses should implement this as 'return this;'
    public abstract V getThis();

    // Subclasses should implement this as 'return new SubclassOfFoo();'
    public abstract V getEmpty();

    // ... more methods here ...

    public V copy() {
        V x = getEmpty();
        x.data.clear();      // Won't compile in Java 1.7
        x.data.putAll(data); // "
        return x;
    }

} 
```

编译器输出：

```
> c:\tools\jdk1.6.0_11\bin\javac -version
javac 1.6.0_11

> c:\tools\jdk1.6.0_11\bin\javac c:\temp\Foo.java

> c:\tools\jdk1.7.0_10\bin\javac -version
javac 1.7.0_10

> c:\tools\jdk1.7.0_10\bin\javac c:\temp\Foo.java
Foo.java:18: error: data has private access in Foo
        x.data.clear();
         ^
Foo.java:19: error: data has private access in Foo
        x.data.putAll(data);
         ^
2 errors 
```

附录。如果引用的是私有方法而不是私有成员变量，则会出现同样的问题。这适用于 Java 1.6，但不适用于 1.7。

Foo2.java：

```
import java.util.TreeMap;
import java.util.Map;

public abstract class Foo2<V extends Foo2<V>> {

    private final Map<String,Object> data = new TreeMap<String,Object>();

    protected Foo2() { ; }

    // Subclasses should implement this as 'return this;'
    public abstract V getThis();

    // Subclasses should implement this as 'return new SubclassOfFoo();'
    public abstract V getEmpty();

    // ... more methods here ...

    public V copy() {
        V x = getEmpty();
        x.theData().clear();      // Won't compile in Java 1.7
        x.theData().putAll(data); // "
        return x;
    }

    private Map<String,Object> theData() {
        return data;
    }

} 
```

编译器输出：

```
> c:\tools\jdk1.6.0_11\bin\javac c:\temp\Foo2.java

> c:\tools\jdk1.7.0_10\bin\javac c:\temp\Foo2.java
Foo2.java:18: error: theData() has private access in Foo2
        x.theData().clear();
         ^
Foo2.java:19: error: theData() has private access in Foo2
        x.theData().putAll(data);
         ^ 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T04:56:41.237

演示的问题似乎与[Oracle 错误 6904536](http://bugs.sun.com/view_bug.do?bug_id=6904536)中报告的行为相匹配。该错误已作为“不是问题”关闭，解释如下：

> javac 的行为符合 JLS。另请参阅[6558551、6711619](http://bugs.sun.com/view_bug.do?bug_id=6558551)和相关的 JLS[问题](http://bugs.sun.com/view_bug.do?bug_id=6644562)[6644562](http://bugs.sun.com/view_bug.do?bug_id=6711619)。

对应的 JLS 问题未解决，注释如下：

> 欢迎对类型变量的成员资格进行简化解释。类型变量边界的私有成员存在普遍的困难。正式地，这些成员不会成为类型变量本身的成员，尽管 javac 和 Eclipse 传统上使它们成为成员并且代码已经开始依赖它：
> 
> ```
> class Test {
>   private int count = 0;
>   <Z extends Test> void m(Z z) {
>     count = z.count;  // Legal in javac 1.6, illegal in javac 1.7 due to fix for 6711619
>   }
> } 
> ```
> 
> 彼得提交了一个类似的测试：
> 
> ```
> class A {
>   static class B { private String f; }
> 
>   abstract static class Builder<T extends B> {
>     abstract T getB();
> 
>     {
>       ((B)getB()).f.hashCode();
>       getB().f.hashCode(); // error: f has private access in A.B
>     }
> 
>   }
> } 
> ```
> 
> 由于交集类型是通过继承构造的，而私有成员永远不会被继承，因此重新指定交集类型以具有私有成员是很棘手的。尽管如此，这将是兼容的事情。

作为参考，JLS 的相关部分是[§4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)。

**编辑：**

实际上，我倾向于同意这里的 JLS，因为当我们从图片中删除泛型时，它会与自身匹配。考虑这个例子：

```
static class Parent {

    private int i;

    void m(Child child) {
        i = child.i; //compile error
    }
}

static class Child extends Parent { } 
```

`child.i`不可见，因为不继承对私有成员的访问。这一点很重要，因为它可以在没有任何阴影的情况下`Child`拥有自己的：`i`

```
static class Child extends Parent {
    private int i; //totally fine
} 
```

所以这将是一个罕见的需要*向上转换*的例子：

```
void m(Child child) {
    i = ((Parent)child).i;
} 
```

因此，由于继承了可访问性，因此 JLS 在这里似乎是正确的，因为`V`in`Foo<V extends Foo<V>>`不一定是，`Foo<V>`但可能是扩展的某种类型`Foo<V>`。

# hibernate - 错误的联接类型或缺少条件，具有一对多的多个表

> ID：15681445
> 
> 赞同：0
> 
> 时间：2013-03-28T12:09:49.043
> 
> 标签：hibernate, jpa, jpa-2.0, hibernate-mapping

我想在我的几个实体中使用下面的连接，但是任何时候我尝试都会遇到 FK 问题。我相信这是因为它使用实体的 ID 列来匹配 image_relation 列。也许我一起使用了错误的连接类型？

我的目标是能够拥有多个实体，每个实体都有多个图像。

```
@JoinColumn(name = "image_relation")
@OneToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL)
private Set<Image> productOptionImageGroup; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:12:46.653

我在一篇相关的文章中找到了答案。[相关的SO问题](https://stackoverflow.com/questions/1275481/hibernate-onetomany-mapping-to-multiple-join-tables)

```
// ENTRY
@OneToMany
@JoinTable(
        name="ENTRY_COMMENTS",
        joinColumns = @JoinColumn( name="entry_id"),
        inverseJoinColumns = @JoinColumn( name="comment_id")
)
public List<Comment> getComments()

// ISSUE
@OneToMany
@JoinTable(
        name="ISSUE_COMMENTS",
        joinColumns = @JoinColumn( name="issue_id"),
        inverseJoinColumns = @JoinColumn( name="comment_id")
)
public List<Comment> getComments() 
```

# http - 使用 Netty 管理服务器的 HTTP 保持活动超时

> ID：15681456
> 
> 赞同：3
> 
> 时间：2013-03-28T12:10:31.697
> 
> 标签：http, playframework-2.0, netty, keep-alive

我正在使用 Play 运行应用程序服务器！框架，它使用 Netty 进行实际的 IO 繁重工作。

HTTP 连接已启用 keep-alive（这是 HTTP 1.1 的默认设置），我对此很满意。但是，我希望这些保持活动连接在一定数量的不活动（例如 15 秒）后超时。据我了解，这将涉及服务器主动关闭连接。

这似乎是一个标准配置选项，实际上[Apache 也有这样的设置](http://httpd.apache.org/docs/2.2/mod/core.html#keepalivetimeout)。但是，我在 Netty/Play 中看不到任何方法。似乎连接保持打开状态，直到客户端关闭它们，或者套接字在操作系统级别超时（大约两个小时）。

开箱即用是否支持此功能？如果没有，手动实现是否可行（特别是，我如何知道 Channel 上次使用的时间，或者即使它现在正在使用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:36:52.037

您可以放入`IdleStateHandler`应用程序管道。

# php - 在 MySQL 数据库表中存储多个字符串

> ID：15681458
> 
> 赞同：2
> 
> 时间：2013-03-28T12:10:34.503
> 
> 标签：php, html, mysql, phpmyadmin

在我提出问题之前，我只想感谢昨天回答我问题的所有人 ->[使用 javascript 倒计时](https://stackoverflow.com/questions/15662369/countdown-using-javascript)。

**主意：**

我使用 php 创建了一个测验，但我想创建一个 MySQL 数据库并有一个表，其中存储了所有问题、答案和多项选择。

**问题：**

由于测验是多项选择，我不知道如何将多项选择存储在表格中。我可以存储选项并让每个答案用特殊字符分隔，然后让 php 获取字符串并分隔选项吗？

例如：问题：你最喜欢的颜色是什么？选项：蓝色=红色=紫色=黄色。（数据库视图）

你们认为这种情况的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:12:52.773

我认为最好的做法是使用多个表。一个用于问题，一个用于答案。该`answer`表将包含`question_id`一个标志，它是否是正确的答案

它可能看起来像这样

```
TABLE questions
FIELDS: id, text

TABLE answers
FIELDS: id, question_id, text, correct 
```

将一个字段用于所有答案的问题在于，您可能会不小心使用用于拆分答案文本的字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:13:39.687

简单地说，创建两个表：

*   问题

    question_id，问题

*   答案

    answer_id, question_id, 答案

**现在，您可以使用question_id**链接这两个表

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:13:43.037

表：

**测验**

```
quiz id (pk)
quiz info (other columns) 
```

**问题**

```
question id(pk)
quiz id
question text 
```

**答案**

```
answer id(pk)
question id
answer text 
```

要显示给定的问题，请加入测验、问题和答案。

**编辑**：您可以为“正确/错误答案（0/1）”添加一列，也可以有另一个表：

**解决方案**

解决方案 id(pk)
问题 id
答案 id

我没有将“正确答案”放在`answers`表中，因为这不是很好的标准化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T12:13:57.547

有几种方法可以解决这个问题：

*   “正确”的方法是创建另一个表（这样您就有一个名为“questions”的表，每个表都有一个唯一的 id，另一个称为“answers”，每个表都有问题 id）
*   “简单”的方式，即使用 JSON（参见[json_encode](http://php.net/manual/en/function.json-encode.php)和[json_decode](http://php.net/manual/en/function.json-decode.php)），它负责在字段中使用特殊字符等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T12:14:12.557

可能有很多可能的架构设计，但我的建议是这样的：

**永远不要在表格上存储用逗号分隔的值。**

这张桌子有测验。

**测验表**

*   ***测验ID（PK）***
*   其他栏目..

这包含每个测验的问题。

**问题表**

*   ***问题 ID (PK)***
*   问题详情
*   测验ID (FK)
*   其他栏目...

这包含了答案。

**答案表**

*   ***答案ID (PK)***
*   答案详情

这包含每个测验中每个问题的正确答案，或者换句话说，这是答案的关键。

**Question_Answer_Correct Table**

*   QuestionID (FK) -- 也是带有 AnswerID 的复合主键
*   答案 ID (FK)

这包含用户列表。

**用户表**

*   ***用户 ID (PK)***
*   用户名
*   其他栏目...

这包含用户对指定问题的回答。这里没有`QuizID`，因为问题已经连接到测验表上。

**User_Answers 表**

*   用户 ID (FK)
*   问题 ID (FK)
*   答案 ID (FK)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-28T12:15:49.110

你会有一张`questions`桌子，像这样：

```
id  |            question
0             Do you even lift? 
```

`id`会 会`INT(11) PRIMARY_KEY AUTO_INCREMENT`会`question`会 只是`TEXT`。然后，您将有一张`answers`桌子：

```
id  | question_id | answer
0          0         Yes
1          0         No
2          0         Maybe 
```

这里，`question_id`指的是`questions`表中问题的ID。这些答案都属于一个问题。这被称为`Has many`关系，因为一个问题有很多答案。

这就是它通常的做法。实现它并不难，即使您没有使用框架（其中大多数为您完成工作）。

希望这可以帮助**

# java - 我的 Maven 项目中不存在资源文件夹

> ID：15681469
> 
> 赞同：1
> 
> 时间：2013-03-28T12:11:03.447
> 
> 标签：java, eclipse, maven

我正在尝试使用 Eclipse 创建一个 Maven 项目。我需要将我的休眠配置文件放在名为 Resources 的文件夹中。应该存在于 src/main/Resources 中。我找不到它，我不知道如何创建它。

我使用了 webapp-javaee6 原型。

我应该使用另一个 Archetype 吗？手动创建我的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:15:45.713

在我看来，您可以创建一个新的简单 Maven 项目，选中“跳过原型选择”复选框。

无论如何，您也可以尝试在 Project Explorer > Maven > Update project configuration 中右键单击您的项目。这会创建缺少的（重新）源文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:29:31.987

*   您的目录名称不正确。它应该是小写的`src/main/resources`。Maven 区分大小写。

*   如果该目录不存在，只需创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T09:35:57.673

转到配置项目的构建路径。在源选项卡下添加文件夹`resources`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T06:23:02.400

刷新项目或自己创建一个

# java - Solr：如何搜索以数字开头并且还包含数字以外的字符的关键字？

> ID：15681472
> 
> 赞同：0
> 
> 时间：2013-03-28T12:11:14.300
> 
> 标签：java, solr, lucene, solrj

如何定义预测搜索字段以搜索“1902 故事”等关键字？

如果我输入字符“1”，它应该返回所有以数字 1 开头的短语/单词。

当前字段定义如下，不支持上述场景：

```
<fieldType name="text_en_suggest" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
        <analyzer type="index">
            <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>
            <filter class="solr.TrimFilterFactory" />
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true" />
            <!-- can have a few filters of course -->
            <charFilter class="solr.MappingCharFilterFactory" mapping="lang/mapping-ISOLatin1Accent.txt"/>

            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.PatternTokenizerFactory" pattern=","/>
            <filter class="solr.TrimFilterFactory" />
            <!-- can have a few filters of course -->
            <charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt" enablePositionIncrements="true"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
        </analyzer>
    </fieldType> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:04:02.157

你想使用一些自动完成功能吗？

如果是这样，您可能想看看[http://wiki.apache.org/solr/Suggester](http://wiki.apache.org/solr/Suggester)

您可以使用此处描述的 RequestHandler 来获取结果。

您将获得以输入值开头的单词列表。

# mysql - SQL 字符串的正则表达式仅允许对变量命名表进行 SELECT 查询？

> ID：15681478
> 
> 赞同：1
> 
> 时间：2013-03-28T12:11:43.587
> 
> 标签：mysql, sql, regex

表名是可变的，但可以肯定的是只允许 SELECT 并且排除某些表（即用户、日志）。我正在制作一个报告表单，用户可以在其中输入 sql 查询来制作模板报告。

```
SELECT 'field1' As 'foo', 'field2' as 'bar'.. 'fieldn' 
FROM 'table1',..'tablen'
JOIN ... ON ...
WHERE CONDITION 
```

虽然我认为我可以在现有表的 html 选择列表中包含表名。

还要让用户reporter_appname@localhost 仅对除Users 和Log 之外的所有表具有SELECT 访问权限？在那种情况下，我不需要对查询进行正则表达式检查？

（这将在 PHP 中）

（理想情况下，我只想要一个文本区域，管理员可以在其中键入他们的查询，然后我的报告功能将获取输出并很好地呈现它等等。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:32:07.153

我建议你重新考虑你的设计。

*   如果不完全解析 SQL，则基本上不可能识别有效的 select 语句（并排除所有其他语句）。正则表达式无法胜任这项任务。

*   即使您只允许选择语句，用户也可以对您的数据库执行拒绝服务攻击。创建永远运行的选择语句非常容易（我们都做过）。恶意用户可能会在匆忙中使您的网站崩溃。即使是好心的用户也可能会意外地这样做。

为用户提供更多有限的选项来创建报告会更好。让他们从列表中选择某些表和列，并为它们创建适当的查询。

可能有免费的 MySQL 报告软件可以作为一个很好的起点，尽管我自己对此没有任何经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:41:36.017

我认为你应该重新考虑你的应用程序的设计。用户和日志表应该在一个数据库上，而包含报告数据的表应该在另一个数据库上。

如果您将它们全部放在一个数据库中，则只需创建另一个数据库，将它们链接起来，然后仅为用户可以通过其查询访问的表创建从一个数据库到另一个数据库的同义词。

用户将在您刚刚创建的数据库上运行他的查询，并且他将仅限于那些具有同义词的表。

我不知道这是否是最佳选择，因为您对案件的描述相对模糊，但根据我掌握的信息，这可能是一个解决方案。

# magento - 一个网站多个 商店在magento

> ID：15681486
> 
> 赞同：2
> 
> 时间：2013-03-28T12:12:11.397
> 
> 标签：magento, magento-1.7

请帮助我。如何使用单个安装的 magento 创建多个商店。这不像你想的那样。

> 假设我的网站是 www.pstall.com，在科技商店中它将是 tech.pstall.com 或在子域的帮助下花店将是flower.pstall.com。商店订单将在他们商店的管理员中。他们不会共享任何数据，但会共享客户的登录信息。这样客户就可以使用相同的 id 和 pass 登录每个商店。我将为母店使用静态页面。这样顾客就可以轻松地访问商店。子商店将是儿童。商店不会共享任何数据，即使是管理员。只是客户信息和登录。请帮助我，我该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T05:11:39.943

试试这个.. [在一个网站上创建多个商店](https://www.properhost.com/members/knowledgebase/30/How-to-Setup-Magento-with-Multiple-Stores-and-Domains.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:47:05.680

您可以通过以下几种方式做到这一点：

1.  创建许多网站
2.  在一个网站上创建许多商店（然后您将拥有商店切换器）
3.  创建许多商店视图（然后您将拥有语言切换器）

您在这里没有任何限制，但只需要为每个网站/商店/商店视图设置 Base Url。
我想向您推荐一种#1 方式并创建网站。稍后您可能想以 2 种语言显示一些网站

在这里我做了同样的事情：http:
[//innativelife.com/](http://innativelife.com/)
[http://body.innativelife.com/](http://body.innativelife.com/)
[http://soul.innativelife.com/](http://soul.innativelife.com/)

还有一些商店可以有专用域
[http://www.rastrat.net/](http://www.rastrat.net/)

但将被放置在同一个管理员上

唯一的问题是 Magento CE 不支持每个商店的管理员分离。这意味着 - 每个管理员都会看到来自所有商店的数据。但我知道如何解决它；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:08:22.367

在 Magento 中，Multistore 是用 --一个网站和许多商店或 -- 多个网站创建的，每个网站都有一个或多个商店。

设置将取决于您想要共享的所有内容以及您不想共享的内容。域可以是子域 (store1.site.com) 或相同域 (site.com/store1) 或完全不同的单个域。

要跨商店共享客户，您需要创建一个网站，但在该网站内创建多个商店。

# c# - C#减去时间（小时分钟）

> ID：15681487
> 
> 赞同：4
> 
> 时间：2013-03-28T12:12:11.877
> 
> 标签：c#, datetime

大家好，我有一些有趣的情况。

我想计算从 20:00 到 01:00 AM 有多少小时（以分钟为单位），但我不知道如何计算，因为我所做的是：

```
pabaigosLaikoLaukelis = 01:00;
pradziosLaikoLaukelis = 20:00;
TimeSpan dt = Convert.ToDateTime(pabaigosLaikoLaukelis)- Convert.ToDateTime(pradziosLaikoLaukelis);
int minutes = (int)dt.TotalMinutes; 
```

我得到结果 -> -1140 分钟，但我需要从 20:00 到 01:00 的答案只有 5 小时。

我知道这很容易，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T13:01:45.300

你可以做这样的事情

```
 //Datetime(Year,month,day,hour,min,sec)
        DateTime date1 = new DateTime(2012, 1, 1, 20, 0, 0);
        DateTime date2 = new DateTime(2012, 1, 2, 1, 0, 0);
        string minutes = (date2.Subtract(date1).TotalMinutes).ToString(); 
```

经过测试并工作 300 分钟（5 小时）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:19:35.903

使用包含日期部分的完整日期时间字符串，以显示 01:00 AM 比 20:00 晚一天 - 如下所示：

```
int minutes = Convert.ToDateTime("01/02/2012 01:00").Substract(Convert.ToDateTime("01/01/2012 20:00")).TotalMinutes; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:17:08.167

您需要指定日期，您正在减去（今天凌晨 1:00）-（今天晚上 8:00）

我认为您需要减去（明天上午 1:00）-（今天晚上 8:00）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:21:44.027

您需要在第一天添加一天`TimeSpan`并使用`TotalHours`.

```
var pabaigosLaikoLaukelis = "01:00";
var pradziosLaikoLaukelis = "20:00";
var oneDayTimeSpan = new TimeSpan(1, 0, 0, 0);
TimeSpan dt = TimeSpan.Parse(pabaigosLaikoLaukelis).Add(oneDayTimeSpan) - TimeSpan.Parse(pradziosLaikoLaukelis);
int minutes = (int)dt.TotalHours; // 5 hours 
```

使用关联操作：

```
var pabaigosLaikoLaukelis = "21:00";
var pradziosLaikoLaukelis = "20:00";
var leftHours = (int)TimeSpan.Parse(pabaigosLaikoLaukelis).TotalHours;
var rightHours = (int)TimeSpan.Parse(pradziosLaikoLaukelis).TotalHours;
// Now we do a Modulus operation which will assure
// 23 > hours > 0
// Make sure to check that leftHours != 0 or rightHours != 0
int hours = (Math.Abs(leftHours * rightHours) + leftHours) % rightHours; //Modulus
var hoursTimeSpan = TimeSpan.FromHours(hours); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:29:10.960

小心在 endTime 中添加一天，因为这样 20:00 和 22:00 之间的差异将是 26 小时而不是 2！

只需检查差异是正数（当天）还是负数（第二天）

```
string pabaigosLaikoLaukelis = "01:00";
string pradziosLaikoLaukelis = "20:00";
// This should be 5 hours
TimeSpan dt = Convert.ToDateTime(pabaigosLaikoLaukelis) - Convert.ToDateTime(pradziosLaikoLaukelis);
int hours = (int)dt.TotalHours;
hours = hours < 0 ? 24 + hours : hours;
// This should be 19 hours
dt = Convert.ToDateTime(pradziosLaikoLaukelis) - Convert.ToDateTime(pabaigosLaikoLaukelis);
hours = (int)dt.TotalHours;
hours = hours < 0 ? 24 + hours : hours; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:29:52.577

在尝试数据计算之前，需要对两个字符串变量进行一些准备

```
string pabaigosLaikoLaukelis = "01:00";
string pradziosLaikoLaukelis = "20:00";
pabaigosLaikoLaukelis = DateTime.Today.ToString("dd/MM/yyyy") + " " + pabaigosLaikoLaukelis;
pradziosLaikoLaukelis = DateTime.Today.AddDays(-1).ToString("dd/MM/yyyy") + " " + pradziosLaikoLaukelis;

TimeSpan dt = Convert.ToDateTime(pabaigosLaikoLaukelis) - Convert.ToDateTime(pradziosLaikoLaukelis);
Console.WriteLine("{0:D2}:{1:D2}", dt.Hours, dt.Minutes); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-10T18:55:40.253

这个怎么样：

```
pabaigosLaikoLaukelis = 01:00;
pradziosLaikoLaukelis = 20:00;
TimeSpan startTime = Convert.ToDateTime(pradziosLaikoLaukelis).TimeOfDay;
TimeSpan endTime = Convert.ToDateTime(pabaigosLaikoLaukelis).TimeOfDay;
TimeSpan diff = endTime > startTime ? endTime - startTime : endTime - startTime + TimeSpan.FromDays(1);
int minutes = (int)diff.TotalMinutes; 
```

# c++ - 在 C++ 中对数组进行排序并保存旧索引

> ID：15681493
> 
> 赞同：0
> 
> 时间：2013-03-28T12:12:20.497
> 
> 标签：c++, arrays

我正在做在线挑战，必须做到以下几点。

村子里有一场比赛。因此，在第一行输入两个数字 N（即有多少人将参加比赛）和 K（其中有多少人可以进入第 2 阶段）。

之后，我们在两个阶段为每个候选人输入 N 次选票。

示例输入：

```
5 3
9 2
3 10
5 6
8 4
6 5 
```

正如你所看到的，我们输入`N=5`, `K=3`，这意味着 5 个候选者，所以 5 个额外的行，其中 3 个进入第 2 阶段。

在我们对数组进行排序后，得票最多的候选人是 6、8 和 9 的候选人。所以他们将进入第 2 阶段。获胜者是在第 2 阶段中得票最多的候选人。在这种情况下，6 有 5 票，这是最多的（8 有 4，9 有 2），因此我们输出 6 的索引，即 5。

到目前为止我得到了什么：

```
#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
    int arr[50],nizabackup[50],n,k,niza2[50],saveindex[50],indexp=0;
    cin >> n >> k;
    for(int i=0;i<n;i++)
    {
        cin >> arr[i] >> niza2[i];
        nizabackup[i] = arr[i];
    }
    sort(arr,arr+n);
    for(int j=n;j>=k;j--)
    {
        for(int k=0;k<n;k++)
        {
            if(arr[j]==nizabackup[k])
            {
                saveindex[0]=k;
                indexp++;
            }
        }
    }
    sort(saveindex,saveindex+indexp);
    cout << saveindex[indexp];
    return 0;
} 
```

我需要提示该怎么做以及其他问题——为什么我的调试器没有读取第二个 for 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:56:44.720

好的，替代实现。还有更多设置，但请先阅读`main`，看看实际逻辑有多简单。

```
#include <vector>
#include <iostream>
#include <algorithm>

struct Contestant {
    int index;
    int firstVote;
    int secondVote;
    Contestant(int i, int v1, int v2) : index(i), firstVote(v1), secondVote(v2)
    {}
};
// return true if l should come before r in sorted result
bool byFirstVote(Contestant const &l, Contestant const &r) {
    return l.firstVote > r.firstVote; // sort by first vote
}
bool bySecondVote(Contestant const &l, Contestant const &r) {
    return l.secondVote > r.secondVote; // sort by second vote
}

int main()
{
    int n, k;
    std::cin >> n >> k;
    // populate a single vector of {index, firstVote, secondVote}
    std::vector<Contestant> contestants;
    for(int i=0; i<n; i++) {
        int v1, v2;
        std::cin >> v1 >> v2;
        contestants.push_back(Contestant(i+1, v1, v2));
    }
    // sort all by firstVote, then sort first k by secondVote
    std::sort(contestants.begin(), contestants.end(), byFirstVote);
    std::sort(contestants.begin(), contestants.begin()+k, bySecondVote);
    std::cout << contestants.front().index << std::endl;
} 
```

我将索引（根据您的示例从 1 开始，而不是 0）和两个投票都存储在一个结构中。

然后，我只需更改排序的字段。

# algorithm - 红/黑树上的孩子？

> ID：15681496
> 
> 赞同：2
> 
> 时间：2013-03-28T12:12:22.267
> 
> 标签：algorithm, red-black-tree

根据红黑树的这种[解释，树必须具有以下性质：](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree#Properties)

1.  一个节点要么是红色的，要么是黑色的。
2.  根是黑色的。（这条规则有时会被省略。由于根总是可以从红色变为黑色，但不一定反过来，这条规则对分析影响不大。）
3.  所有叶子 (NIL) 都是黑色的。（所有叶子的颜色都与根相同。）
4.  每个红色节点的两个孩子都是黑色的。
5.  从给定节点到其任何后代叶子的每条简单路径都包含相同数量的黑色节点。

是什么阻止了有人将每个节点都变黑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:19:17.927

有可能的。但是为了保持条件 5，有时您可能希望将节点着色为红色。

例如，考虑以下示例。

```
 a
 / \
b   c 
```

这里所有节点都可以是黑色的

现在如果你想插入一个新节点，你会选择哪种颜色？红色的。因为如果选择黑色，则条件 5 将不满足。所以基本上你可以继续插入RED节点，除非任何条件（1-4）没有被打破

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:18:15.463

您引用的最后一条规则是“从给定节点到其任何后代叶子的每个简单路径都包含相同数量的黑色节点。”

如果所有节点都是黑色的，那么从根到任何叶子的路径必须包含相同数量的节点。换句话说，所有的叶子都处于相同的深度——所以这仅适用于[完美的二叉树](http://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)。

# bash - 用于计算数据文件中数字列表平均值的脚本

> ID：15681498
> 
> 赞同：45
> 
> 时间：2013-03-28T12:12:31.070
> 
> 标签：bash, sed, awk

该文件`data.txt`包含以下内容：

```
1.00 1.23 54.4 213.2 3.4 
```

脚本的输出应该是：

```
ave: 54.646 
```

一些简单的脚本是首选。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-28T12:14:31.460

这是一种方法：

```
$ awk '{s+=$1}END{print "ave:",s/NR}' RS=" " file
ave: 54.646 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-12-16T18:14:22.283

另一种选择是使用`jq`：

```
$ seq 100|jq -s add/length
50.5 
```

`-s`( `--slurp`) 在将每一行解析为 JSON 或在本例中为数字后，为输入行创建一个数组。

或者在 OP 的情况下：

```
tr \  \\n<file|jq -s add/length|sed s/^/ave:\ / 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-28T13:18:36.830

```
perl -lane '$a+=$_ for(@F);print "ave: ".$a/scalar(@F)' file 
```

如果您有多行并且只需要一个平均值：

```
perl -lane '$a+=$_ for(@F);$f+=scalar(@F);END{print "ave: ".$a/$f}' file 
```

# mysql - 负载平衡器和 SQL 备份

> ID：15681515
> 
> 赞同：0
> 
> 时间：2013-03-28T12:13:36.070
> 
> 标签：mysql, apache, backup, load-balancing

我们的生产环境通常包含 4-8 个 Apache Web 服务器和 2 个（My）SQL 服务器：

*   每个 Web 服务器都隶属于一个 SQL 服务器
*   SQL 服务器具有循环复制设置
*   所有 Web 服务器都是负载平衡的，例如 Pound。

每晚都有一个作业备份其中一个 SQL 服务器，将附属的 Web 服务器锁定大约 10-15 分钟。

有没有办法配置平衡以避免在短时间内到达那些锁定的服务器？

除了备份非生产第三台服务器之外，还有其他方法可以处理此锁定吗？

PS：我们设想在备份之前和之后重新加载 Pound 配置，使用适当的配置文件，但感觉有点奇怪......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:27:00.147

如何使用`poundctl`禁用和重新启用后端服务器？它必须在本地运行（命令协议使用 unix 套接字），但您可以通过 ssh 会话远程启动它。

从手册页：

> 选项
> 
> [...]
> 
> -B/-bnmr
> 
> ```
>  Enable/disable a back-end. A disabled back-end will not be passed requests to answer. Note however that existing sessions may still cause requests to be sent their way. 
> ```
> 
> -nnmk
> 
> ```
>  Remove a session from service m in listener n. The session key is k. 
> ```

# sorting - XSLT 在单个输出中连接来自多个节点的输入

> ID：15681523
> 
> 赞同：0
> 
> 时间：2013-03-28T12:13:49.593
> 
> 标签：sorting, xslt, concatenation

我正在尝试制定一个转换，它将包含多个航班的输入（具有出发和到达）处理为具有航班完整路线的单个输出。

输入如下：

```
<FlightTrip>
   <flights>
      <departureAirport>
         <airportCode>LocB</airportCode>
      </departureAirport>
      <departureTime>2013-03-28T10:00:00.000</departureTime>
      <arrivalAirport>
         <airportCode>LocC</airportCode>
      </arrivalAirport>
   </flights>
   <flights>
      <departureAirport>
         <airportCode>LocA</airportCode>
      </departureAirport>
      <departureTime>2013-03-27T15:00:00.000</departureTime>
      <arrivalAirport>
         <airportCode>LocB</airportCode>
      </arrivalAirport>
   </flights>
   <flights>
      <departureAirport>
         <airportCode>LocC</airportCode>
      </departureAirport>
      <departureTime>2013-03-30T14:00:00.000</departureTime>
      <arrivalAirport>
         <airportCode>LocD</airportCode>
      </arrivalAirport>
   </flights>
</FlightTrip> 
```

所需的输出将是这样的：

```
<FullTrip>LocA LocB LocC LocD</FullTrip> 
```

我尝试在输出变量中使用 foreach ，但我做错了。我还需要根据出发日期对输入进行排序，因为航班的顺序可能不同（根据示例输入）。

关于如何实现这一目标的任何想法？

非常感谢！

布鲁诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:06:44.437

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes"/>

    <xsl:template match="FlightTrip">
        <FullTrip>
            <xsl:apply-templates select="flights">
                <xsl:sort select="departureTime"/>
            </xsl:apply-templates>
        </FullTrip>
    </xsl:template>

    <xsl:template match="flights">
        <xsl:value-of select="departureAirport/airportCode"/><xsl:text> </xsl:text>
        <xsl:if test="position()=last()">
            <xsl:value-of select="arrivalAirport/airportCode"/>
        </xsl:if>
    </xsl:template>

</xsl:transform> 
```

将产生：

```
<FullTrip>LocA LocB LocC LocD</FullTrip> 
```

**[工作示例](http://xsltransform.net/jyyiVhf)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:07:18.747

感谢 Joepie 的启发。我不得不对其进行一些修改以使其在我的环境中工作，最终使用 foreach 如下：

```
 <xsl:template match="/">
      <xsl:variable name="locations">
        <xsl:for-each select="/FlightTrip/flights">
          <xsl:sort select="departureTime" order="ascending" data-type="text"/>
            <xsl:value-of select="concat(departureAirport/airportCode,' - ')"/>
            <xsl:if test="position() = last()">
                <xsl:value-of select="arrivalAirport/airportCode"/>
            </xsl:if>
         </xsl:for-each>
      </xsl:variable>

      <FullTrip>
          <xsl:value-of select="$locations"/>
      </FullTrip>

  </xsl:template> 
```

应用于示例时会产生以下输出：

```
<FullTrip>LocA - LocB - LocC - LocD</FullTrip> 
```

再次感谢！

# hibernate - Spring Data - 没有属性匹配的客户@Query

> ID：15681526
> 
> 赞同：1
> 
> 时间：2013-03-28T12:13:56.133
> 
> 标签：hibernate, spring-mvc, spring-data, spring-data-jpa

我正在尝试设置一个不会自动生成的自定义@Query，但无论我尝试什么，它都会尝试将方法名称中的属性与返回对象中的属性相匹配。

如何在不尝试构建查询的情况下运行此查询，并因 org.springframework.data.mapping.PropertyReferenceException 而失败？也许@Query 是错误的注释？

我的回购目前看起来像这样：

```
@Repository
public interface ScheduleRepository extends CrudRepository<Schedule, Integer>
{
    @Query
    List<Schedule> findByTypeAndAirDateBetweenOrderByAirDateDesc(String type, Date startDate, Date endDate);

    @Query("SELECT s FROM Schedule s WHERE s.type = 'A' AND (s.airDate BETWEEN :startDate AND :endDate) ORDER BY ABS(DATEDIFF(s.airDate, NOW())) LIMIT 1")
    List<Schedule> findCurrentAd(Date startDate, Date endDate);
} 
```

当它在我的 Schedule 类中找不到匹配的“当前”字段时，就会发生异常。我不希望它。我只希望它按照我定义的方式运行查询，不问任何问题。

正如您可能已经看出的那样，我是 Spring MVC & Data 的新手。

感谢任何人的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:15:25.250

如果您使用绑定参数，例如`:VALUE`，您应该使用`@Param("value")`来匹配您的`@Query`注释。尝试这个：

```
@Repository
public interface ScheduleRepository extends CrudRepository<Schedule, Integer>
{
    @Query
    List<Schedule> findByTypeAndAirDateBetweenOrderByAirDateDesc(String type, Date startDate, Date endDate);

    @Query("SELECT s FROM Schedule s WHERE s.type = 'A' AND (s.airDate BETWEEN :startDate AND :endDate) ORDER BY ABS(DATEDIFF(s.airDate, NOW())) LIMIT 1")
    List<Schedule> findCurrentAd(@Param("startDate") Date startDate, @Param("endDate") Date endDate);
} 
```

如果您选择使用没有 @Param 注释的构造函数，则可以使用`?n`如下绑定：

```
@Repository
public interface ScheduleRepository extends CrudRepository<Schedule, Integer>
{
    @Query
    List<Schedule> findByTypeAndAirDateBetweenOrderByAirDateDesc(String type, Date startDate, Date endDate);

    @Query("SELECT s FROM Schedule s WHERE s.type = 'A' AND (s.airDate BETWEEN ?1 AND ?2) ORDER BY ABS(DATEDIFF(s.airDate, NOW())) LIMIT 1")
    List<Schedule> findCurrentAd(Date startDate, Date endDate);
} 
```

?n 绑定表示方法中的参数序列。?1 = 开始日期，?2 = 结束日期。

参考：[Spring 文档](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/jpa.repositories.html#jpa.query-methods.at-query)

# r - 在 R 中使用 ARIMAX 进行预测

> ID：15681529
> 
> 赞同：3
> 
> 时间：2013-03-05T12:42:40.200
> 
> 标签：r, time-series, modeling, forecasting

我曾经在 SAS 中每周根据两个参数预测计算机的销售量 - 定价和营销支出（车辆级别 - 因此有几个变量）。这在 SAS 中很容易，因为我可以使用`PROC ARIMA`.

你能帮我过渡到 R 吗？我已经导入了数据集，执行`auto.arima`并分析了一些变量的 p 值。但是，我不知道如何在接下来的 26 周内进行预测。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:15:47.533

R 有一个内置的 ARIMAX 过程，称为`arima`. 要获取 X 部分，请使用`xreg=`参数。如果您没有外生变量并且不使用`xreg=`，请注意“拦截”结果可能无法表明您认为它所指示的内容。

因此，如果您使用的是 ARIMAX(1, 2, 3)(1, 0, 0) 模型，该模型具有因变量销售额（月度数据）和外生变量 nasdaq（并且您对 nasdaq 的预测为 nasdaq.pred） ，你会这样做：

```
model <- arima (sales, order=c(1, 2, 3), seasonal=list (order=c(1, 0, 0), freq=12),
                xreg=nasdaq)

pred <- predict (model, newxreg=nasdaq.predict) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T07:10:35.437

假设您的 ARIMA 模型正在测试，那么未来 26 周的预测是：

```
Forecastedvalue<-forecast.Arima(Testing, h=26) 
```

希望这可以帮助

# ruby-on-rails - Ruby on Rails 中 options.dup 的用途是什么？

> ID：15681531
> 
> 赞同：3
> 
> 时间：2013-03-28T12:14:02.737
> 
> 标签：ruby-on-rails, ruby

浏览 Rails 代码库，我发现许多对 options.dup 的引用。

```
def to_xml(options = {})
  require 'builder' unless defined?(Builder)
  options = options.dup
  ....
end 
```

显然 options.dup 是在复制 options 哈希，但你为什么要在这种情况下这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:36:56.307

`dup`克隆一个对象。当您将对象传递给方法时，任何更改该对象内部状态的内容都将反映在调用范围中。例如，试试这个代码：

```
def replace_two(options)
  options[:two] = "hi there"
end

options = { one: "foo", two: "bar" }
replace_two(options)
puts options[:two] 
```

那将打印`hi there`，因为`replace_two()`修改了哈希内容。

如果您想避免更改传入的`options`，您可以调用`.dup`它，然后对克隆所做的任何更改都不会反映在调用范围中：

```
def replace_two(options)
  options = options.dup
  options[:two] = "hi there"
end

options = { one: "foo", two: "bar" }
replace_two(options)
puts options[:two] 
```

将打印`bar`。这是遵循[最小惊讶原则的](http://c2.com/cgi/wiki?PrincipleOfLeastAstonishment)常见模式。在 Ruby 中，修改其参数的方法通常以`!`后缀命名，以提醒用户它们是破坏性/修改操作。`dup`应该调用该方法的非版本`replace_two!`来指示这种副作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T12:32:21.723

`dup`创建对象的浅表副本。这是红宝石核心的东西。由于像 Hash 和 Array 这样的 ruby​​ 对象是通过引用传递的，因此当您在函数内部更改对象时，这将更改原始对象。如果这不是所需的行为 - 您创建一个副本......那么代码就可以了。

见[红宝石文档](http://ruby-doc.org/core-2.0/Object.html#method-i-dup)

**更新**

还有一件事。由于对象是通过引用传递的，`options = options.dup`因此将分配给`options`新创建的副本的变量引用。对原始对象的引用在内部丢失`to_xml`。但它仍然可能在调用的代码中被引用`to_xml`

# php - 如何在现有的上添加 target="_blank" ？

> ID：15681532
> 
> 赞同：0
> 
> 时间：2013-03-28T12:14:02.883
> 
> 标签：php, html, tags

我有一个变量，其中包含 PhP 中的以下文本：

```
$description = "Flash <a href=\"http://www.aaa.com/\">this coupon</a> <br > <a href="http://www.ggg.com/">Visit here</a> for details <br >"; 
```

我如何添加

> 目标="_空白"

缺少`$description`变量？

**所以结果会变成如下：**

```
$description = "Flash <a href=\"http://www.aaa.com/\" target="_blank">this coupon</a> <br > <a href="http://www.ggg.com/" target="_blank">Visit here</a> for details <br >"; 
```

我正在寻找变量 $description 被用户意外记录的解决方案。但是我需要系统通过将 target="blank" 添加到现有变量中并更新记录来找出并纠正它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-28T12:20:33.323

我不知道你到底是什么意思。但是，建议在您的 HTML 中使用 '。并且只有 " 用于回声。所以它将是：

```
$description = "Flash <a href='http://www.aaa.com/' target='_blank'>this coupon</a><br ><a href='http://www.ggg.com/' target='_blank'>Visit here</a> for details <br >"; 
```

要添加目标，您可以使用：

```
$string = preg_replace("/<a(.*?)>/", "<a$1 target=\"_blank\">", $string); 
```

发现于：[preg_replace 文本中的链接 <a> 有一些例外](https://stackoverflow.com/questions/10845369/preg-replace-links-in-text-with-a-with-some-exception)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:19:30.877

```
$description = str_replace('<a href="','<a target="_blank" href="',$description); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:18:27.400

您已经这样做了，但是您的代码会产生错误，因为您没有`"`在第二个链接中转义

```
$description = "Flash <a href=\"http://www.aaa.com/\" target=\"_blank\">this coupon</a> <br > <a href=\"http://www.ggg.com/\" target=\"_blank\">Visit here</a> for details <br >"; 
```

或者你可以使用`'`然后你不必逃避

```
$description = 'Flash <a href="http://www.aaa.com/" target="_blank">this coupon</a> <br > <a href="http://www.ggg.com/" target="_blank">Visit here</a> for details <br >'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:18:05.140

如果您注意到标签的属性没有特定的顺序，您可以简单地替换`<a href`为`<a target=\"_blank\" href`

# .net - 动态 LINQ 语言函数

> ID：15681535
> 
> 赞同：2
> 
> 时间：2013-03-28T12:14:10.843
> 
> 标签：.net, linq

嘿那里，

这是我在stackoverflow中的第一个问题，希望你能帮助我。

我在 linq 查询中填写了以下属性：

```
FieldLabel = (currentLanguage == "de" ? forum.language.German :
         currentLanguage == "fr" ? forum.language.French :
         currentLanguage == "en" ? forum.language.English :
         forum.language.English) 
```

而且我需要这是通用的，因为我的“论坛”实体可以是其他东西，例如具有某些语言列（德语，法语，英语）的“帖子”等。我想要一些接收实体类型的动态方法，例如“论坛”或“帖子”或其他任何具有列语言的内容，并根据链接的 If 返回选择的列。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T13:00:21.043

如果您使用的是 .NET 4.0 或更高版本并且您的所有实体都具有“语言”属性，则可以使用[dynamic](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)关键字：

```
private dynamic GetLanguage(String currentLanguage, dynamic entity)
{
    return (currentLanguage == "de" ? entity.language.German :
     currentLanguage == "fr" ? entity.language.French :
     currentLanguage == "en" ? entity.language.English :
     entity.language.English);
} 
```

# ruby-on-rails - 如何使用 Paperclip 正确处理 Rails 中的“找不到图像”错误

> ID：15681539
> 
> 赞同：2
> 
> 时间：2013-03-28T12:14:24.323
> 
> 标签：ruby-on-rails, paperclip

我正在使用 Paperclip 为用户存储个人资料图片。我试图变得非常严格，只允许某些文件类型等。然而，用户设法错误处理某些东西是很常见的。

在我的 index.html.erb 文件中，我列出了所有用户配置文件，但是此列表通常会在生产环境中引发应用程序错误，如果其中一个图像损坏，找不到等，整个事情都会失败，并且整个页面失败。

目前我找到这样的图像

```
<% @members.each do |member| %>
  <tr>
<td><%= image_tag member.avatar.url(:thumb) %></td>
</tr>
<% end %> 
```

我如何将其包装在代码中，如果由于某种原因图像失败，则不允许页面失败，并且会显示替代图像，如 PaperClip 文档（又名默认图像）中指定的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:46:56.133

我建议在模型中编写一个方法来检查条件并从 View 调用该方法。

```
Model: 

def image_url(image_size)
  avatar_image = member.avatar
  if avatar_image.present? && avatar_image.url(image_size).present?
    return avatar_image.url(image_size)
  else
    return "/images/default_image.jpg"
  end
end

View:
<%= image_tag member.image_url(:thumb) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:49:31.217

试试这个。

在您的模型中：

```
has_attached_file :image, :default_url => "/images/no-image.jpg" 
```

# java - Safari 5.7.1 不允许第三方 cookie

> ID：15681540
> 
> 赞同：0
> 
> 时间：2013-03-28T12:14:26.180
> 
> 标签：java, jsp, iframe, browser, safari

Safari 不允许第三方 cookie。我尝试通过将 JSP 中的响应标头设置为：

```
response.setHeader("P3P","CP='IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT'"); 
```

它适用于除 Safari 之外的所有浏览器。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T12:32:43.047

默认情况下，Safari 会阻止第三方 cookie。

# parallel-processing - 数据竞争和竞争条件有什么区别？

> ID：15681545
> 
> 赞同：1
> 
> 时间：2013-03-28T12:14:37.597
> 
> 标签：parallel-processing, dependencies, race-condition

我一直在阅读有关数据竞争和竞争条件的信息，但似乎它们是相互替代的。

那么真正的区别是什么？

# jquery-mobile - mvc4 razor 网页在转换为 jquery mobile 后偶尔填充下拉列表

> ID：15681549
> 
> 赞同：0
> 
> 时间：2013-03-28T12:15:02.677
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在将几个工作的 asp.net mvc 4 (razor) 网页转换为 jquery mobile，我看到了一些我不明白的东西。

@Html.DropDownListFor 并不总是填充......我已经使用 firebug 检查了 html，有时当网页出现时，它的下拉列表没有值......但它是零星的......我讨厌零星的问题...... ..它把我逼到墙上了...

这是控制器...我检查了问题何时发生...它始终在生成数据并发送它...

```
public ActionResult SelectWorkCenter()
{
    SelectWorkCenterInputModel model = new SelectWorkCenterInputModel();
    model.WorkCenterList = wcService.GetWorkCenters().OrderBy(p=>p.WorkCenterName).ToList();
    return View(model);
} 
```

这是带有偶尔工作的下拉菜单的网页：

```
@using TBS.Etracs.Web.Main.Areas.WorkCenter.Models
@model SelectWorkCenterInputModel

@{
    ViewBag.Title = "Select Work Center";
}

@using (Html.BeginForm("SelectWorkOrder", "Mobile", new {Model.SelectedWorkCenterID }))
{          
    <div class="divTable">
        <div class="divTableRow">
            <div class="divTableCell"></div>
            <div class="divTableCell">[WorkCenterName (#Vehicles)]</div>
        </div>
        <div class="divTableRow">
            <div class="divTableCell"><label><strong> WorkCenter</strong></label></div>
            <div class="divTableCell">   
                @Html.DropDownListFor(p => p.SelectedWorkCenterID,
                                     new SelectList(Model.WorkCenterList, "WorkCenterID", "WorkCenterName"),
                                     "Select a Work Center",
                                     new { Class    = "dropdownstyle",
                                           onchange = "this.form.submit();",
                                           style    = "width:220px; height: 40px;font-size: 1.2em;font-weight:bold"
                                         })   
                </div> 
        </div>
    </div>    
     <input type="submit" value="Back" onclick="history.back(); return false;" style="margin-right: 20px" />
} 
```

我正在将 divTable 转换为数据角色....奇怪的事情有时是在我转换为数据角色之后情况有所改善，而其他时候它会使问题变得更糟....

我不明白为什么转换为 jquery mobile 会对此产生任何影响.....

我遇到的另一个问题是我的按钮并不总是将事件返回给我的控制器，因为我已经转换为 jquery mobile ......我不知道这是否是一个相关的问题......

有什么我错过的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:29:18.630

好的......我不明白，但这是解决方案......

问题出在 dropDownListFor 中 Style 的规范上……通过消除 Style 行，一切正常……

```
 @Html.DropDownListFor(p => p.SelectedWorkOrderCode,   
                         new SelectList (Model.WorkOrders, "WorkCenterID", "WorkOrderCodeDesc"),   
                                                        "Select a Work Order",     
                                            new { id       = "WorkCenterID",
                                                Class    = "dropdownstyle" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:10:49.817

更多细节......现在我知道更多发生了什么，我看到这个问题之前已经被问过......我仍然没有解决这个问题，但它似乎不是最有可能的问题我在其他帖子中看到的......这是我的模型......这应该是正确的（因为它正在工作）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

using TBS.Etracs.Web.Main.Models;

namespace TBS.Etracs.Web.Main.Areas.WorkCenter.Models
{
    public class SelectWorkCenterInputModel
    {
        public int SelectedWorkCenterID { get; set; }
        public List<AssignedWorkCenter> WorkCenterList { get; set; }
    }
} 
```

和

```
AssignedWorkCenter is an EF generated type with values of
     System.Int32 WorkCenterID
     System.String WorkCenterName 
```

# android - android:如何解决 ViewPager TouchEvent 与我的自定义 View 冲突？

> ID：15681551
> 
> 赞同：2
> 
> 时间：2013-03-28T12:15:15.740
> 
> 标签：android

在我的应用程序中，我有一个自定义`View`（扩展`ImageView`），我们在其中处理触摸事件以移动图像。

然后我`ViewPager`向右或向左滑动以显示下一个布局。

自定义`View` `onTouchEvent`代码本身可以正常工作。该`ViewPager`代码也可以正常工作。但是，如果我同时添加它们，我`View`用于向左或向右移动图像的自定义代码将停止工作。

这是`OnTouchEvent`custom 中的代码`View`：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    super.onTouchEvent(event);

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        //TODO
        break;
    case MotionEvent.ACTION_MOVE:
        //TODO
        break;
    case MotionEvent.ACTION_UP:
        //TODO
        break;
    }
    return true;
} 
```

希望得到任何帮助！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:48:43.580

请检查这个帖子：

[android: ViewPager 和 Horizo​​ntalScrollVIew](https://stackoverflow.com/questions/6920137/android-viewpager-and-horizontalscrollview)

`ViewPager`当内容也可以滚动时，有几个解决方案如何处理这种情况。

您将必须创建自己的自定义`ViewPager`并覆盖该`onInterceptTouchEvent`方法。

# graph - 从最少节点数的弱连接图遍历

> ID：15681556
> 
> 赞同：0
> 
> 时间：2013-03-28T12:15:29.423
> 
> 标签：graph, traversal

我得到了以下练习：有一个未加权、有向、弱连接的图，有 n 个节点（n < 1 000 000）。我们想遍历整个图，从最少的节点开始。问题是：我从哪些节点开始遍历？我找不到有关此特定主题的任何内容。但是，我设法想出了一个算法，但效率不够：

*   我将图形存储在邻接列表中（对于二维矩阵，n 可能太高）
*   我从每个节点 i 开始一个 BFS，并将它到达的节点存储在`x[i][...]`( `x = List<List<int>>`)
*   我检查是否有`x[i].Count == n`
*   我检查是否有`(x[i] union x[j]).Count == n`
*   我检查是否有`(x[i] union x[j] union x[k]).Count == n` ......所以我将所有可能的 2、3、4...... x 子集的并集，并检查它的计数是否为 n。

如果 n 不太高，它可以正常工作，但我需要一个更有效的算法来获得更大的 n。

任何帮助表示赞赏（你会让我能够再次入睡）！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:41:51.210

查找没有任何传入边的节点。循环遍历这些节点，对于每个节点 v，开始遍历图。记住您访问了哪些节点（通过将它们放入哈希表或标记它们）。当您到达您已经访问过的节点时停止遍历。

您将需要一个邻接列表表示，其中每个节点都有一个传入边缘列表和一个传出边列表。然后做这样的事情：

```
Set nodesToVisit = emptySet;
for i=1 to n:
    if incoming[i].size() == 0:
        nodesToVisit.add(i)

Set visited = emptySet;
for v in nodesToVisit:
    nodesToVisit.remove(v)
    if(v is not in visited):
        visit(v);
        visited.add(v);
        for u in outgoing[v]:
            nodesToVisit.add(u) 
```

# cocos3d - 创建了 3D 对象，但它不会在 cocos3d 中旋转

> ID：15681564
> 
> 赞同：0
> 
> 时间：2013-03-28T12:15:40.390
> 
> 标签：cocos3d

我使用**Blender 2.66**和**PowerVR Graphics SDK**创建了一个 3D 对象。我添加了 pod 文件并仅通过替换 pod 文件名和节点名来更改 hello-world 项目。但是 3D 对象没有旋转。我必须在代码中做任何其他更改吗？pod文件创建是否有错误的机会？谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T07:11:40.903

在 cocos3d 中创建项目时，默认的 pod 文件语法是 [self addContentFromPODFile:@"hello-world.pod"]; 你用你使用任何节点名称的地方替换它

> withName:@"HelloText"

[self addContentFromPODFile:@"hello-world.pod" withName:@" **abc** "];

而你在哪里 cc3meshnode 用你上面设置的替换 getnodenamed

CC3MeshNode* hellotext = (CC3MeshNode*)[self getNodeNamed:@ **"abc"** ];

# java - 为什么在指定类型的HashSets中不能推断equals？

> ID：15681570
> 
> 赞同：1
> 
> 时间：2013-03-28T12:15:57.977
> 
> 标签：java, object, collections, hash, equals

我不明白 Java 中有什么愚蠢的东西，希望你能帮我弄清楚。

我已经定义`Hashset<Point> myHashSet = new HashSet<Point>();`

然后，我创建两个相等的 Point 点 ，`Point p1 and Point p2`并将它们放在不同的变量/内存位置。然后我重写 .equals() 方法`public boolean equals(Point other)`并将我的第一个点 p1 添加到 HashSet。

然后我打电话`System.out.println(myHashSet.contains(p2)); // prints false`

为什么编译器不能从创建时推断出“哦，这个哈希集的类型是 Point”，并说“我应该检查 Point 是否覆盖了默认的 equals 方法......是的，让我们称之为一个！” .

相反，我相信它调用对象的通用 equals 方法，从而比较内存位置，我相信？

这样做的原因仅仅是 HashSet 可以包含 Point 的子类，它使用不同的 Equals 方法吗？这是我能看到当前行为的唯一原因，尽管我确信我忽略了一些东西:)。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:20:18.417

`Object.equals(Object)`您必须覆盖的集合使用。如果您创建另一个方法，`equals(Point)`它不会调用它。

> 相反，我相信它调用对象的通用 equals 方法，从而比较内存位置，我相信？

是的，因为唯一`HashSet`可以通用调用的方法是`equals(Object)`

> 这样做的原因仅仅是 HashSet 可以包含 Point 的子类，它使用不同的 Equals 方法吗？

HashSet 无法知道您想在运行时使用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:21:36.613

您应该根据此文档[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)覆盖 equals() 和 hashCode() ，因为 HashSet 使用这两种方法都可以检查对象是否相等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:23:11.010

您的问题在于`public boolean equals(Point other)`，因为这不是`Object`类中定义的默认 equals 方法。

`public boolean equals(Object other)`如果您希望 HashMap 使用您的实现，则必须覆盖（注意 Object 而不是 Point）。请参阅[Object 的文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)并注意，如果您覆盖，`equals`您也应该覆盖该`hashCode()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T12:25:28.687

尝试添加`@Override`注释。您一定拼错了 equals 方法及其签名。

```
 @Override
    public boolean equals(Object obj) {
        // TODO Auto-generated method stub
        return super.equals(obj);
    } 
```

# push-notification - IOS Push Notification Error

> ID：15681572
> 
> 赞同：0
> 
> 时间：2013-03-28T12:16:08.343
> 
> 标签：push-notification, ibm-mobilefirst

I am trying to develope PushNotification app for IOS. I download the sample code from IBM Getting Started Tutorials. I create NativeAPi Project in IOS and copy the file of sample project in this project. My IBM worklight version is 5.0.5\. When i deploy this project in Native API but its giving these error in console:

```
 Activating Worklight project: IOS... 
```

[2013-03-28 16:59:56] Worklight Server stopped successfully on localhost:8080

[2013-03-28 16:59:57] Worklight Server started successfully on localhost:8080

[2013-03-28 16:59:58] FWLST0011E: ====== Worklight Project IOS-project-customization failed to start: Class 'com.worklight.core.auth.ext.RejectingLoginModule' defined in login module 'rejectAll' in the authentication configuration file doesn't exist.

[2013-03-28 16:59:58] Activation failed. Bundle didn't start:C:\Users\Mohsin\workspace3\IOS\bin\IOS-customization.jar

Any help would be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:07:16.830

The samples at [http://www.ibm.com/developerworks/mobile/worklight/getting-started.html](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html) (where I assume you got your sample code) are intended for Worklight V5.0.6\. You will receive the error you saw when you try to use a V5.0.6 sample with an older version of Worklight (v5.0.5 in your case). Your best bet is to update to V5.0.6.

# wcf - WCF Error : Relative end point addresses

> ID：15681573
> 
> 赞同：14
> 
> 时间：2013-03-28T12:16:11.867
> 
> 标签：wcf, iis, iis-7, wcf-rest

Um quite new to WCF . I think I have messed up a bit. So this is what I did so far and I ve hosted my WCF service in IIS

First the Contracts

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using YangkeeServer.dto;

namespace YangkeeServer
   {

public class Service1 : IService1
{
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "single")]
    public YangkeeTrailerDTO getTrailor()
    {
        return new YangkeeTrailerDTO()
        {
            loanFrom = "heaven"
        };
    }

    [WebInvoke(Method = "GET",
       ResponseFormat = WebMessageFormat.Json,
       UriTemplate = "datum/{id}")]
    public Test getName(string id)
    {
        return new Test()
        {
            Id = Convert.ToInt32(id) * 12,
            Name = "Leo Messi"
        };
    }
}
} 
```

and this is my web.config file

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

  </system.web>
  <system.serviceModel>

    <services>

      <service name="YangkeeServer.Service1">

        <endpoint
          contract="YangkeeServer.IService1"
         binding="webHttpBinding"
         behaviorConfiguration="WebHttp"
         address="http://localhost:7000/Service1.svc">
       </endpoint>

     </service>

      <service name="YangkeeServer.Service2">

       <endpoint
          contract="YangkeeServer.IService2"
         binding="webHttpBinding"
         behaviorConfiguration="WebHttp"
         address="http://localhost:7000/Service2.svc">
       </endpoint>

     </service>

      <service name="YangkeeServer.YangkeeTrailer">

        <endpoint
          contract="YangkeeServer.IYangkeeTrailor"
          binding="webHttpBinding"
          behaviorConfiguration="WebHttp"
         address="http://localhost:7000/YangkeeTrailor.svc">
        </endpoint>

      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
       <behavior name="WebHttp">
         <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
   <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
 </system.serviceModel>
 <system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/>
 </system.webServer>

 </configuration> 
```

and um using this urlhttp://localhost:7000/Service1.svc and um getting this error

```
Server Error in '/' Application.

When 'system.serviceModel/serviceHostingEnvironment/multipleSiteBindingsEnabled' is set to true     in configuration, the endpoints are required to specify a relative address. If you are specifying a     relative listen URI on the endpoint, then the address can be absolute. To fix this problem, specify a relative uri for endpoint 'http://localhost:7000/Service1.svc'. 
```

can any one tell me where did I do wrong? Thank you in advance.![enter image description here](../Images/b277dd99d47eda37d8868c5c2cb5e75e.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-01T04:13:58.793

Set the service endpoint address to just the service filename (this is the relative part):

```
address="Service1.svc" 
```

or set the address to blank for each endpoint (I don't think its needed when hosting in the development environment or in IIS)

```
address="" 
```

See [this answer to another question](https://stackoverflow.com/a/8410978/322415)

The relevant part is:

> the virtual directory (in IIS) where your *.svc file exists defines your service endpoint's address.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-25T15:50:09.177

To fix this error, I added... **listenUri="/"** ... to the service endpoint.

Example:

```
<service name="_name_">
  <endpoint address="http://localhost:_port_/.../_servicename_.svc"
    name="_servicename_Endpoint" 
    binding="basicHttpBinding"
    bindingConfiguration="GenericServiceBinding"
    contract="_contractpath_._contractname_"
    listenUri="/" />
</service> 
```

[MSDN: Multiple Endpoints at a Single ListenUri](http://msdn.microsoft.com/en-us/library/aa395210(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-23T18:26:40.740

This works for me:

**1\. Insert this lines inside service:**

```
 <host>
      <baseAddresses>
        <add baseAddress="http://localhost:7000/Service1.svc" />
      </baseAddresses>
    </host> 
```

**2\. Set the value of address as bellow:**

*address=""*

The full code:

```
<service name="YangkeeServer.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:7000/Service1.svc" />
          </baseAddresses>
        </host>
        <endpoint
           contract="YangkeeServer.IService1"
          binding="webHttpBinding"
          behaviorConfiguration="WebHttp"
          address="">
        </endpoint>
      </service> 
```

# c++ - 如何在 C++ 中实现我自己的 IO 文件 API

> ID：15681574
> 
> 赞同：2
> 
> 时间：2013-03-28T12:16:12.073
> 
> 标签：c++, file-io, television

我想实现我自己的输入/输出文件 API。我想要这样做的原因是，在低级别上会有很多文件系统（硬盘、HTTP 等等），我需要为用户提供一个通用接口。API 看起来有点像这样：

```
class GIO_CORE
{
public:
GIO_CORE(void);
virtual int open(char* path, int openMode) = 0;
virtual int close() = 0;
virtual void write(char* s, int size) = 0;
virtual void read(char* s, int size) = 0;
    //many more
}; 
```

所以现在我正在实现硬盘内存，这是最简单的。我想要这样做的方法是保留一个指向当前使用的文件的 ifstream 和 ofstream 指针。所以我想在 Open 函数中使用我的 ifstream 或 ofstream 指针（取决于 OpenMode）指向打开的文件，然后在 write 或 read 函数中对该 fstream 进行操作。**有没有更好的想法来做到这一点？**

**编辑：以下问题已解决**

无论如何，在标题中添加 ifstream 和 ofstream 时出现编译错误：

```
class GIO_Persistent_File_System : public GIO_CORE
{
public:
GIO_Persistent_File_System(void);
int open(char*, int);
int close();
void write(char* s, int size);
void read(char* s, int size);
ifstream infile; **this causes compilation error** 
```

错误是：“缺少；在标识符 infile 之前。缺少类型说明符 - 假定为 int。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:17:11.400

不要忘记在 C++ 标准库头文件中定义的类型是在`std`命名空间中定义的：

```
std::ifstream infile; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T12:19:39.227

```
#include <fstream>
using namespace std; 
```

可能会解决你的问题

# mysql - 使用 Mysql 数据库进行 Solr 搜索，任何用于数据导入的实用程序

> ID：15681577
> 
> 赞同：1
> 
> 时间：2013-03-28T12:16:20.247
> 
> 标签：mysql, search, solr, lucene

我们正在寻找在我们的大型业务应用程序中改进“搜索”功能的方法，该应用程序目前使用 SQL Like 语法来执行此操作。所以我们开始评估 Solr 服务器，并且能够索引我们的几个数据库表并进行搜索。但我是新手，想知道是否

1）我们的应用程序中有大量表。是否有任何实用程序可以使用数据库表在 solr 中生成模式 xml？

~~2）我们当前的搜索列出了符合搜索条件的数据库行（这是使用 SQL 'like' 编写的，需要大量时间来生成搜索结果）。我们想使用 solr 模拟确切的功能。那可能吗？~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:13:32.420

要将数据库导入 SOLR，您可能需要查看[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)。

它需要相当多的配置，定义要导入的表和列，应该存储什么，以及应该如何建立索引。

# c# - 正则表达式获取文件扩展名

> ID：15681578
> 
> 赞同：7
> 
> 时间：2013-03-28T12:16:23.917
> 
> 标签：c#, regex

我有一个包含文件名的列表（没有完整路径）

```
List<string> list=new List<string>();

list.Add("File1.doc");
list.Add("File2.pdf");
list.Add("File3.xls");

foreach(var item in list) {
    var val=item.Split('.');
    var ext=val[1];
} 
```

我不想使用`String.Split`，如何使用正则表达式获取文件的扩展名？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T12:18:08.423

您不需要为此使用正则表达式。你可以使用[`Path.GetExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)方法。

> 返回指定路径字符串的扩展名。

```
string name = "notepad.exe";
string ext = Path.GetExtension(name).Replace(".", ""); // exe 
```

这是一个[`DEMO`](http://ideone.com/Tw2QEF).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T12:38:54.557

要使用正则表达式获取扩展：

```
foreach (var item in list) {
    var ext = Regex.Match( item, "[^.]+$" ).Value;
} 
```

或者，如果您想确保有一个点：

```
@"(?<=\.)[^.]+$" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T12:17:35.960

你可以使用[`Path.GetExtension()`](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx).

示例（也删除了点）：

```
string filename  = "MyAwesomeFileName.ext";
string extension = Path.GetExtension(filename).Replace(".", ""); 

// extension now contains "ext" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-28T12:24:49.713

正则表达式是

```
\.([A-Za-z0-9]+)$ 
```

转义句点、1 个或多个字母数字字符、字符串结尾

* * *

您也可以使用 LastIndexOf(".")

```
int delim = fileName.LastIndexOf(".");
string ext = fileName.Substring(delim >= 0 ? delim : 0); 
```

* * *

但是使用内置函数总是更方便。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-17T22:47:08.470

为了谷歌员工的利益——

我正在处理奇怪的文件名，例如 FirstPart.SecondPart.xml，扩展名未知。

在这种情况下， Path.GetFileExtension() 被多余的点弄糊涂了。

我使用的正则表达式是

```
\.[A-z]{3,4}$ 
```

即仅匹配前面带有点的 3 或 4 个字符的最后一个实例。你可以在[Regexr](http://regexr.com?35kbh)测试它。不是获奖者，但成功了。

明显的缺陷是，如果第二部分是 3-4 个字符并且文件没有扩展名，它会选择它，但我知道我不会遇到这种情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T12:24:05.367

`"\\.[^\\.]+"`匹配任何以`.`字符开头后跟 1 个或多个无`.`字符的内容。

顺便说一句，其他人是对的，正则表达式在这里是多余的。

# lotus-notes - 文档在 Lotus Notes 数据库中被随机锁定

> ID：15681581
> 
> 赞同：0
> 
> 时间：2013-03-28T12:16:30.867
> 
> 标签：lotus-notes, lotus-domino

我有一个遗留的 Lotus Notes 应用程序，即使没有人打开文档，它也会开始随机锁定文档。因此，当有人尝试编辑文档时，Notes 会说“该文档已被用户 1/域锁定”，但是当我与用户 1 核对时，该人没有打开该文档，管理员或用户 1 必须手动右键单击文档并选择“解锁文档”。

有什么建议可以尝试找出这个问题的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:08:29.353

如果用户没有手动锁定文档，那么一定有一些代码代表他们执行此操作。查看代码中使用方法的地方`NotesDocument.Lock()`或公式`@DocLock`

我将使用设计概要功能生成所有表单、脚本库和代理的报告，然后对这些方法/公式进行文本搜索。这可能有助于缩小锁定发生的位置。

或者，如果您希望完全关闭文档锁定：

*   选择文件 - 应用程序 - 属性，然后单击基本选项卡。
*   取消选择“允许文档锁定”。

# php - Facebook Graph API - 自日期

> ID：15681583
> 
> 赞同：0
> 
> 时间：2013-03-28T12:16:37.950
> 
> 标签：php, facebook-graph-api

是否有可能从特定时间（UNIX 时间戳）获取用户的提要？

例如，我想获取用户的提要，因为`1364428800`

我在 facebook 上找不到这方面的信息，但我真的很感激有一个链接到此信息所在位置的答案，而不仅仅是问题的答案:)

* * *

忘了说，我用的是PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:39:38.317

在 facebook.stackoverflow 找到答案，我可以使用`?since=<value>`

这`<value>`可以是时间字符串或时间戳，所以它符合我的需要！

# java - Android intent.getData() Nullpointer 异常

> ID：15681585
> 
> 赞同：0
> 
> 时间：2013-03-28T12:16:41.017
> 
> 标签：java, android

我有一个启动智能手机相机的安卓应用

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST ); 
```

为了显示拍摄的照片，我使用了这段代码，

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    setImage=true;
    if (requestCode == CAMERA_PIC_REQUEST && resultCode == RESULT_OK) {
        if(data!=null)
        {
            ImageView image = (ImageView) findViewById(R.id.imagePreview);
            Bundle extras = data.getExtras();
             Bitmap mImageBitmap = (Bitmap) extras.get("data");
             image.setImageBitmap(mImageBitmap);
        }
   }
} 
```

这工作得很好，但如果我想获得拍摄照片的路径，我必须使用`(intent)data.getData()`，但这会返回一个`null`值。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:25:21.120

试试这个希望它可以帮助你。

```
Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            String imageName = picturePath.substring(picturePath.lastIndexOf(
                    "/", picturePath.length())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:27:38.777

尝试如下：

> ```
>  Bitmap m_photo = (Bitmap) p_data.getExtras().get("data");
>     if (m_photo != null)
>     {
>     ByteArrayOutputStream m_upByteArrayOutputStream = new ByteArrayOutputStream();
>     m_photo.compress(Bitmap.CompressFormat.PNG, 40, m_upByteArrayOutputStream);
>     Drawable m_imageFromCamera = new BitmapDrawable(m_photo);
>              image.setBackgroundDrawable(m_photo);
>       } 
> ```

**编辑：**

要获取图像的路径，请尝试以下代码：

> ```
>  Uri selectedImage = data.getData();
>         String[] filePathColumn = { MediaStore.Images.Media.DATA };
>         Cursor cursor = getContentResolver().query(selectedImage,
>                 filePathColumn, null, null, null);
>         cursor.moveToFirst();
>         int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
>         String imagePath = cursor.getString(columnIndex); <---- Here is your image path.
>         cursor.close(); 
> ```

# asp.net-mvc - 如何通过超过 1 个模型

> ID：15681591
> 
> 赞同：0
> 
> 时间：2013-03-28T12:16:52.817
> 
> 标签：asp.net-mvc, asp.net-mvc-4

[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller)

我的问题是：我怎样才能发送超过 1 `@model IEnumerable<MvcMovie.Models.Movie>`？

例如 - 我想从 Controler:`db.Movies.ToList()`和`db.Letters.ToList()`. 怎么寄？
以及如何在我的视图中分离：IEnumerable with Movies 和 IEnumerable with Letters？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:20:04.053

> 我的问题是：如何发送超过 1 个 @model IEnumerable？

通过使用视图模型：

```
public class MyViewModel
{
    public FooBarModel TheFooBar { get; set; }
    public IEnumerable<Movie> Movies { get; set; }
} 
```

然后让您的控制器将此视图模型返回给视图：

```
public ActionResult SomeAction()
{
    var model = new MyViewModel();
    model.Movies = ...
    model.TheFooBar = ...
    return View(model);
} 
```

最后，您的视图将被强输入到视图模型中：

```
@model MyViewModel 
```

您将能够访问其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:20:10.547

最简单的解决方案是只创建一个包含`Movies`和`Letters`列表的 Wrapper 类。

# c - GDB：你如何测量堆和栈之间的可用内存空间？

> ID：15681601
> 
> 赞同：0
> 
> 时间：2013-03-28T12:17:14.080
> 
> 标签：c, memory, gdb

我正在阅读关于可用内存段的 C 文本。文本说两个最高的段是堆和堆栈，它们彼此相向增长。

```
Segments:
 ________
|Text (Machine code)
|________
|Data
|________
|BSS
|________
|Heap   (grows towards stack)
|
|
|Stack  (grows towards heap) 
|________ 
```

创建一个简单的程序来打印在较低的四个段中创建的变量的内存位置会产生以下结果：

```
initialized in  | Hex Address | Decimal Value
Data        - 0x080497ec    134,518,764
BSS         - 0x080497f8    134,518,776
Heap        - 0x0804a008    134,520,840
Stack       - 0xbffff844    3,221,223,524 
```

堆和堆栈之间有**大约 30 亿**字节要共享的解释吗？我正在使用的计算机只有 1 GB 的内存，这让我怀疑这种解释的准确性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:23:50.550

那里有 3GB 的地址空间，这并不意味着它必须被映射（很可能不是）。它只是空间，当程序要求时，操作系统仍然必须将物理内存映射到该空间。

您读到的这种内存模型已经过时了。现代操作系统具有更复杂的内存布局，堆不必线性增长，堆栈有时位于其他所有内容的下方，文本和数据不一定必须彼此相邻。添加共享库，地址空间布局随机化，事情变得非常时髦。

# c++ - C++ 编译问题 - 架构 x86_64 的未定义符号 - Mac Os X Mountain Lion

> ID：15681603
> 
> 赞同：0
> 
> 时间：2013-03-28T12:17:26.383
> 
> 标签：c++, macos, compilation, linker, g++

我遇到了无法解决的编译问题。我正在 Mac Os X 10.8 和 Windows 上开发跨平台 C++ 项目编码。该代码在 Windows 和 Mac Os X Leopard 上也能正常编译和运行。

由于 Apple 出于各种原因推动开发人员坚持使用最新平台，我被迫在 Mountain Lion 上进行开发，我正试图让该项目再次运行。

我正确编译了我需要的所有库（wxWidgets 等），并在最新版本的 Eclipse 中导入了项目。当我尝试构建项目时，它会尝试编译第一个 .cpp 文件，最后它（为什么？）尝试调用链接器，导致我自己定义的类缺少一系列符号。其他 .cpp 文件都没有被编译，所以整个过程失败的原因是可以理解的。

我还尝试从 CLI 调用 make，结果相同。我进入了makefile，一切似乎都是正确的。它看起来像一个非常新手的问题，我觉得我在这里错过了一些巨大的东西。

我粘贴在编译器的输出下方，以防万一编译大师介入。请随时询问更多详细信息。

## 编译器输出

Pastebin 链接：[编译器输出](http://pastebin.com/6a06EyyC)

我使用了 PB，因为输出非常大。

相关部分是在第一个 .cpp 文件的编译阶段之后不久调用*as*和*collect2 。*缺少的符号在同一目录中的其他 .cpp 文件中定义。

```
/usr/llvm-gcc-4.2/bin/../libexec/gcc/i686-apple-darwin11/4.2.1/as -arch x86_64 -force_cpusubtype_ALL -o /var/folders/br/h6ln_j014ll56zwc8x6xjmk80000gn/T//ccSUmHal.o /var/folders/br/h6ln_j014ll56zwc8x6xjmk80000gn/T//ccn8ex81.s

/usr/llvm-gcc-4.2/bin/../libexec/gcc/i686-apple-darwin11/4.2.1/collect2 -dynamic -arch x86_64 -macosx_version_min 10.8.3 -weak_reference_mismatches non-weak -o Calcoli.o -lcrt1.10.6.o -L/usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/x86_64 -L/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/x86_64 -L/usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1 -L/usr/llvm-gcc-4.2/bin/../lib/gcc -L/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1 -L/usr/llvm-gcc-4.2/bin/../lib/gcc/i686-apple-darwin11/4.2.1/../../.. -L/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple-darwin11/4.2.1/../../.. /var/folders/br/h6ln_j014ll56zwc8x6xjmk80000gn/T//ccSUmHal.o -lstdc++ -lSystem -lgcc -lSystem 
```

编译器输出以“经典”未定义符号问题结束。所有*强调文字**强调文字**强调文字*

```
Undefined symbols for architecture x86_64:
  "typeinfo for TipoPuntoCalc", referenced from:
      Calcoli::setPuntoS(GTGraphicObject*)      in ccSUmHal.o
  "typeinfo for TipoPali", referenced from:
      Calcoli::setPaloS(GTGraphicObject*)      in ccSUmHal.o
  "typeinfo for TipoRett", referenced from:
      Calcoli::setFondazioneS(GTGraphicObject*)       in ccSUmHal.o
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [Calcoli.o] Error 1 
```

这不应该是与架构相关的问题，因为将 i386 指定为目标具有相同的结果（未找到架构 i386 的符号）。

谢谢，

伊芙琳娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:35:28.030

转到目标的“构建阶段”部分并验证您需要编译和链接的所有文件实际上都包含在正确的部分中。

听起来好像没有告诉编译器包含您需要的一些东西。

# php - Codeigniter - 输入类型文件作为必填字段

> ID：15681605
> 
> 赞同：1
> 
> 时间：2013-03-28T12:17:32.900
> 
> 标签：php, codeigniter

我创建了一个包含 2 个文件上传字段的表单，基本上我想让它们成为必填字段。我创建了一个回调函数，但似乎无法使其正常工作。如果其他一些字段留空，它正在使用回调并发布错误，但无论文件是否附加都发送表单。我对 Codeigniter 很陌生。任何帮助将不胜感激！

控制器：

```
class Form extends CI_Controller {

function index()
{
    $this->load->helper(array('form', 'url'));

    $this->load->library('form_validation');

    //Upload errors array
    $up_errors = array();

    $this->form_validation->set_rules('first_name', 'First Name', 'required|alpha');
    $this->form_validation->set_rules('last_name', 'Surname', 'required|alpha');
    $this->form_validation->set_rules('dob', 'Date of Birth', 'required');
    $this->form_validation->set_rules('nationality', 'Nationality', 'required|alpha');
    $this->form_validation->set_rules('gender', 'Gender', 'required');
    $this->form_validation->set_rules('address_l1', 'Address Line 1', 'required|alpha_dash_space');
    //$this->form_validation->set_rules('address_l2', 'Address Line 2', 'alpha');
    $this->form_validation->set_rules('address_city', 'City', 'required|alpha');
    $this->form_validation->set_rules('address_postcode', 'Post Code', 'required|alpha_dash_space');
    //$this->form_validation->set_rules('address_country', 'Country', 'required|alpha_dash_space');
    $this->form_validation->set_rules('e_address', 'Email Address', 'required|valid_email');
    $this->form_validation->set_rules('h_tel', 'Home Telephone Number', 'required|numeric');
    $this->form_validation->set_rules('mobile', 'Mobile Number', 'required|numeric');
    $this->form_validation->set_rules('university', 'University', 'required|alpha_dash_space');
    $this->form_validation->set_rules('campus', 'Campus Name', 'required|alpha_dash_space');
    $this->form_validation->set_rules('course', 'Course Title', 'required|alpha_dash_space');
    $this->form_validation->set_rules('end_date', 'Course End Date', 'required');
    //Custom callback
    $this->form_validation->set_rules('file', 'Attachment', 'callback_handle_upload');
    //Check if file attached
    //if (isset($_FILES['file']))
    //{

    //}

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('home');
    }
    else
    {

        //Display Success page
        $this->load->view('formsuccess');

        //Array helper
        $this->load->helper('array');

        //Set form data array
        $fields = $this->input->post('first_name')."\n".
        $this->input->post('last_name')."\n".
        $this->input->post('dob')."\n".
        $this->input->post('nationality')."\n".
        $this->input->post('gender')."\n".
        $this->input->post('address_l1')."\n".
        $this->input->post('address_l2')."\n".
        $this->input->post('address_city')."\n".
        $this->input->post('address_postcode')."\n".
        $this->input->post('address_country')."\n".
        $this->input->post('e_address')."\n".
        $this->input->post('h_tel')."\n".
        $this->input->post('mobile')."\n".
        $this->input->post('university')."\n".
        $this->input->post('campus')."\n".
        $this->input->post('course')."\n".
        $this->input->post('end_date');

        $msg = serialize($fields);

        //Upload files to server
        $this->load->library('upload');

        //Send Email
        $this->load->library('email');

        //Set config
        $config['upload_path']   = './attachments'; //if the files does not exist it'll be created
        $config['allowed_types'] = 'gif|jpg|png|doc|docx|txt|pdf';
        $config['max_size']   = '4000'; //size in kilobytes
        $config['encrypt_name']  = TRUE;

        $this->upload->initialize($config);

        $uploaded = $this->upload->up(FALSE); //Pass true if you want to create the index.php files

        //Attach the 2 files to email
        foreach($_FILES as $key => $value)
        {
            //var_dump($uploaded['success'][$key]['full_path']); //FOR TESTING
            $file = $uploaded['success'][$key]['full_path'];
            $this->email->attach($file);
            //unlink($file);
        }

        //var_dump($msg); //FOR TESTING
        $this->email->from($this->input->post('e_address'),$this->input->post('first_name') . $this->input->post('last_name'));
        $this->email->to('tom@shu.ac.uk'); 

        $this->email->subject('NON-SHU STUDENT REQUEST');
        $this->email->message($msg);    

        $this->email->send();

        //echo $this->email->print_debugger();
    }
}
function alpha_dash_space($str_in)
{
    if (! preg_match("/^([-a-z0-9_ ])+$/i", $str_in)) {
    $this->form_validation->set_message('_alpha_dash_space', 'The %s field may only contain alpha-numeric characters, spaces, underscores, and dashes.');
    return FALSE;
    } else {
    return TRUE;
}
}
 function handle_upload()
{
    if (count($_FILES['file']['name'] < 2)
    {
        // throw an error because nothing was uploaded
        $this->form_validation->set_message('handle_upload', "You must attach both files!");
        return false;
    }
    else
    {
        return TRUE;
    }
} 
```

} ?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:55:03.527

检查以下表单验证扩展，它可以帮助您验证文件，带有 CI 表单验证库的图像复制代码并在应用程序库中创建 MY_Form_validation.php 文件并将代码粘贴到该文件中并保存

[表单文件验证](http://devbro.com/testing/ci_form_validation/)

[要复制的代码](http://devbro.com/testing/ci_form_validation/code.php?v=2.1)

# ruby-on-rails - 如何使用 rake 测试的回溯调试“TypeError：无法将 nil 转换为字符串”？

> ID：15681613
> 
> 赞同：0
> 
> 时间：2013-03-28T12:17:49.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, rake-test

在 ruby​​ on rails 项目 [1] 中有很多 rake 测试失败，都出现相同的错误（无法将 nil 转换为字符串），我不知道为什么会发生这种情况，也不知道我应该如何调试它.

例如，这是 rake 测试的第一个 tracebak（我在消息 [2] 的末尾附上了完整的 rake 测试回溯）。

```
Error:
test_update(Admin::BazarDistrictsControllerTest):
TypeError: can't convert nil into String
    /usr/lib/ruby/1.9.1/psych.rb:154:in `parse'
    /usr/lib/ruby/1.9.1/psych.rb:154:in `parse_stream'
    /usr/lib/ruby/1.9.1/psych.rb:125:in `parse'
    /usr/lib/ruby/1.9.1/psych.rb:112:in `load' 
    /srv/www/gamersmafia/current/app/models/users_skill.rb:178:in `role_data_yaml'
    /srv/www/gamersmafia/current/app/models/alert.rb:200:in `block in update_pending_alerts'
    /srv/www/gamersmafia/current/app/models/alert.rb:198:in `each'
    /srv/www/gamersmafia/current/app/models/alert.rb:198:in `update_pending_alerts'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/performable_method.rb:26:in `perform'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/backend/base.rb:95:in `block in invoke_job'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/lifecycle.rb:60:in `call'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/lifecycle.rb:60:in `block in initialize'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/lifecycle.rb:65:in `call'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/lifecycle.rb:65:in `execute'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/lifecycle.rb:38:in `run_callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/backend/base.rb:92:in `invoke_job'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/backend/base.rb:37:in `block in enqueue'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/backend/base.rb:36:in `tap'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/backend/base.rb:36:in `enqueue'
    /usr/lib/ruby/gems/1.9.1/gems/delayed_job-3.0.5/lib/delayed/message_sending.rb:13:in `method_missing'
    /srv/www/gamersmafia/current/app/models/alert.rb:182:in `block in update_pending_alerts'
    /srv/www/gamersmafia/current/app/models/alert.rb:180:in `each'
    /srv/www/gamersmafia/current/app/models/alert.rb:180:in `update_pending_alerts'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:460:in `_run__1673722312823048322__save__808729243992924512__callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/callbacks.rb:264:in `create_or_update'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/persistence.rb:84:in `save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/validations.rb:50:in `save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
    /usr/lib/ruby/gems/1.9.1/gems/deadlock_retry-1.2.0/lib/deadlock_retry.rb:31:in `transaction_with_deadlock_handling'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:in `save'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/persistence.rb:45:in `create'
    /srv/www/gamersmafia/current/app/models/bazar_district.rb:158:in `update_single_person_staff'
    /srv/www/gamersmafia/current/app/models/bazar_district.rb:83:in `update_don'
    /srv/www/gamersmafia/current/app/controllers/admin/bazar_districts_controller.rb:43:in `update'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:503:in `block in _run__1141341086633682237__process_action__2809844012775858444__callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_5310'
    /srv/www/gamersmafia/current/app/controllers/application_controller.rb:233:in `block (2 levels) in gm_process'
    /srv/www/gamersmafia/current/app/controllers/application_controller.rb:232:in `catch'
    /srv/www/gamersmafia/current/app/controllers/application_controller.rb:232:in `block in gm_process'
    /usr/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
    /srv/www/gamersmafia/current/app/controllers/application_controller.rb:231:in `gm_process'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:214:in `_conditional_callback_around_5310'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:469:in `_run__1141341086633682237__process_action__2809844012775858444__callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'
    /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'
    /srv/www/gamersmafia/current/test/functional/admin/bazar_districts_controller_test.rb:42:in `block in <class:BazarDistrictsControllerTest>' 
```

我有超过 200 次测试，总共有 1448 次测试的错误。

问题是，我必须从哪里开始调试它？为什么我在 +90% 的测试中得到相同的错误？

[1] [https://github.com/gamersmafia/gamersmafia](https://github.com/gamersmafia/gamersmafia)

[2] [https://dl.dropbox.com/u/42306424/salida_rake.txt](https://dl.dropbox.com/u/42306424/salida_rake.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:23:25.227

在调试的情况下。我建议使用 gem 'pry-rails'。只需捆绑这个 gem 并将 'binding.pry' 添加到失败的测试中。它将打开包含测试中所有变量的控制台，因此您可以手动检查它。我希望它可以帮助您找出问题所在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T12:22:25.233

这可能是 Cucumber 版本的问题之一。

您可以通过将 cucumber-rails 升级到最新版本来解决此问题。只需编辑您的 Gemfile 即可显示：

`gem 'cucumber-rails', '>= 1.1.1'`或更新版本

当我得到相同的错误时，它解决了我的错误。

在你的情况下，它指出`delayed_job gem`

如果您正在使用`bundler`尝试在脚本或 rake 任务前加上“ `bundle exec`”，例如

```
bundle exec script/delayed_job -n 2 start 
```

并尝试！！！！

# google-apps-script - 如何使用水豚has_text

> ID：15681615
> 
> 赞同：1
> 
> 时间：2013-03-28T12:17:51.183
> 
> 标签：google-apps-script, cucumber, capybara, bdd

所以现在我让黄瓜/水豚/硒击中了一个谷歌应用程序脚本，这很棒，但由于某种原因，我似乎无法以我期望的方式检查页面正文中的文本。在调试器中，我可以抓取页面对象，我可以在浏览器中获得预期的文本。扫描html直接显示出现两次的文本，然而page.has_text？出现错误：

```
(rdb:1) p page.html.scan(/Introduction Video/)
["Introduction Video", "Introduction Video"]
(rdb:1) p page.has_text? 'Introduction Video'
false 
```

备用扫描可提供有关周围文本的更多信息：

```
(rdb:1) p page.html.scan(/.{10}Introduction Video.{10}/)
["&amp;#34; Introduction Video\\u003C\\/a&", "lank\\\"&gt;Introduction Video\\u003C\\/a&"] 
```

这让我想知道这是否是一个编码问题。我想看看has_text到底是什么？方法确实如此，所以我查看了文档：

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_text%3F-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_text%3F-instance_method)

但我无法接受附加参数：

```
(rdb:1) p page.has_text? :all, "Introduction Video"
ArgumentError Exception: wrong number of arguments (2 for 1) 
```

这让我想知道我正在运行的代码是否与文档中的代码相同——这让我回到了我通常的 Ruby 问题，即不确定去哪里找到我所依赖的开源代码......

无论如何，我使用的所有代码都在这里：

[https://github.com/tansaku/GoogleAppScriptBDD](https://github.com/tansaku/GoogleAppScriptBDD)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T20:18:51.610

在 Capybara 2.0`has_text?`中只有一个参数 - `content`。

`type``has_text?`（带有可能值`:all`和）的参数`:visible`出现在当前处于测试阶段的 2.1 版中。

但是，Capybara 2.1.0.beta1 是稳定的，没有任何已知的回归错误。目前它仅由内置的 Selenium 和 Racktest 驱动程序支持。在编写 Capybara-Webkit 的可用 gem 版本时，Poltergeist 和 Terminus 不支持 Capybara 2.1。

我使用 2.1.0.beta1，所以如果你使用内置的 selenium 或 racktest 驱动程序，我可以推荐你使用它。

# netlogo - 如何计算netlogo中受感染海龟的累积平均值

> ID：15681616
> 
> 赞同：0
> 
> 时间：2013-03-28T12:17:53.073
> 
> 标签：netlogo

我试图计算 netlogo 中受感染海龟的累积平均值我不知道我应该使用什么代码以及将它放在 netlogo 代码中的什么位置我做了一些测试并尝试计算节点的平均值，但那是不正确的。我也尝试创建一个列表，但我也没有成功。我应该在代码中的哪个位置放置这些行？

这里有一些代码：

```
observer> show mean [num-infected] of turtles
observer: 198
observer> show mean [num-infected] of turtles / length num-infected
observer> show mean [num-infected] of turtles / length [num-infected] of turtles
observer: 0.99
observer> show sum [num-infected] of turtles / length [num-infected] of turtles
observer: 197
observer> show count [num-infected] of turtles / length [num-infected] of turtles
observer> show mean [num-infected] of turtles / length [num-infected] of turtles
observer: 0.955
observer> show sum [num-infected] of turtles / length [num-infected] of turtles
observer: 191
observer> show sum [mean num-infected] of turtles
observer> show mean [ num-infected] of turtles
observer: 191
observer> show mean [ num-infected] of turtles
observer: 1
observer> show mean [ num-infected] of turtles
observer: 198
observer> show mean [ num-infected] of turtles
observer: 198
observer> show mean [ num-infected] of turtles
observer: 198
observer> show  [ num-infected] of turtles
observer> show count turtles with [infected? = true]
observer: 198
observer> show count turtles with [infected? = true] / length [num-infected] of turtles
observer: 0.99
observer> show count num-infected / count turtles with [infected? = true] 
ERROR: Expected an agentset here, rather than a list or block. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T15:09:09.417

[请参阅http://groups.yahoo.com/neo/groups/netlogo-users/conversations/topics/16345](http://groups.yahoo.com/neo/groups/netlogo-users/conversations/topics/16345)上的 netlogo-users 组的答案

特拉维斯欣克尔曼写道：

> 如果我对您的理解正确，那么您的报告程序应如下所示：

```
to-report cumul-av-sum
;; drop the first member of the list, but not until there are at least 200 items in the list
if (length cumul-av-list > 200) [ set cumul-av-list but-first
cumul-av-list ]
;; add the number of raindrops created in last tick to the end of the list
set cumul-av-list lput num-infected cumul-av-list
report sum cumul-av-list
end 
```

> 这个报告程序需要在每个刻度上调用（可能是图的一部分）才能正确更新列表。

# mongodb - MongoDB：进行原子创建和返回操作

> ID：15681617
> 
> 赞同：0
> 
> 时间：2013-03-28T12:17:56.007
> 
> 标签：mongodb

我需要在 mongodb 中创建一个文档，然后立即希望它在我的应用程序中可用。执行此操作的正常方法是（在 Python 代码中）：

```
doc_id = collection.insert({'name':'mike', 'email':'mike@gmail.com'})
doc = collection.find_one({'_id':doc_id}) 
```

这有两个问题：

*   对服务器的两个请求
*   不是原子的

因此，我尝试使用该`find_and_modify`操作在这样的帮助下有效地执行“创建和返回” `upserts`：

```
doc = collection.find_and_modify(
    # so that no doc can be found
    query= { '__no_field__':'__no_value__'},

    # If the <update> argument contains only field and value pairs,
    # and no $set or $unset, the method REPLACES the existing document
    # with the document in the <update> argument,
    # except for the _id field
    document= {'name':'mike', 'email':'mike@gmail.com'},

    # since the document does not exist, this will create it
    upsert= True,

    #this will return the updated (in our case, newly created) document
    new= True
) 
```

这确实按预期工作。我的问题是：这是否是完成“创建和返回”的正确方法，还是我缺少任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:20:07.100

您从一个普通的旧常规插入调用中究竟缺少什么？

如果不知道 _id 是什么，您可以先自己创建 _id 并插入文档。然后你就知道它会是什么样子了。其他字段都不会与您发送到数据库的字段不同。

如果您担心插入成功的保证，您可以检查返回代码，并设置一个[写关注点](http://docs.mongodb.org/manual/core/write-operations/#write-concern)，以提供足够的保证（例如它已被刷新到磁盘或复制到足够的节点）。

# delphi - 带背景图像的 Delphi 按钮

> ID：15681618
> 
> 赞同：6
> 
> 时间：2013-03-28T12:18:03.640
> 
> 标签：delphi, delphi-xe2, vcl

我有 Delphi 7，现在安装了 Delphi XE2。我对设计、VCL 等方面并没有真正的经验，但我想要一个按钮（带标题！）和一个简单的背景图像（PNG）。我有 3 张自定义按钮的图片（1 张用于单击，1 张用于鼠标悬停，1 张用于鼠标悬停）。我几乎尝试了所有方法，但我似乎无法找到一种方法来设置一个简单的按钮，中间有标题，背景有图像。请帮忙。

PS.：按钮不应该在点击时在视觉上下降（这已经在 png 图像中。）

![按钮打开](../Images/c021e7f0424226df72f2e3749452c954.png) ![按钮关闭](../Images/09e468927be89d9a6db036679bff1217.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T13:39:44.527

您可以调整这个微小的组件，无需安装测试

测试：

```
procedure TForm1.MyOnClick(Sender: TObject);
begin

  ShowMessage('Hallo');
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
   With TImageButton.Create(self) do
      begin
      parent := Self;
      images := Imagelist1;
      index := 0;
      hoverindex := 1;
      DownIndex := 2;
      Caption := 'test';
      OnClick := MyOnClick;
      Width := Imagelist1.Width;
      Height := Imagelist1.Height;
      Font.Size := 12;
      Font.Style := [fsBold];
      end;
end; 
```

![在此处输入图像描述](../Images/e611570a580129683ba7448cb1e23599.png)

和代码：

```
unit ImageButton;

// 2013 bummi

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  ExtCtrls, StdCtrls,ImgList;

Type

  TState = (MouseIn, MouseOut, Pressed);

  TImageButton = class(TGraphicControl)
  private
    FChangeLink:TChangeLink;
    FImages: TCustomImageList;
    FDownIndex: Integer;
    FIndex: Integer;
    FHoverIndex: Integer;
    FState: TState;
    FCaption: String;
    FOwner: TComponent;
    FAutoWidth: Boolean;
    procedure CMMouseEnter(var Message: TMessage); message CM_MOUSEENTER;
    procedure CMMouseLeave(var Message: TMessage); message CM_MOUSELEAVE;
    procedure CMTextChanged(var Message: TMessage); message CM_TEXTCHANGED;
    procedure CMFontChanged(var Message: TMessage); message CM_FONTCHANGED;
    procedure WMLBUTTONDOWN(var Message: TMessage); message WM_LBUTTONDOWN;
    procedure WMLBUTTONUP(var Message: TMessage); message WM_LBUTTONUP;
    procedure SetDownIndex(const Value: Integer);
    procedure SetHoverIndex(const Value: Integer);
    procedure SetIndex(const Value: Integer);
    procedure SetImages(const Value: TCustomImageList);
    procedure SetCaption(const Value: String);
    procedure ImagelistChange(Sender: TObject);
    procedure SetAutoWidth(const Value: Boolean);
    procedure CheckAutoWidth;
  protected
    procedure Paint; override;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; Override;
  published
    property AutoWidth:Boolean read FAutoWidth Write SetAutoWidth;
    property Caption;
    property DownIndex: Integer read FDownIndex Write SetDownIndex;
    property Font;
    property HoverIndex: Integer read FHoverIndex Write SetHoverIndex;
    property Images: TCustomImageList read FImages write SetImages;
    property Index: Integer read FIndex Write SetIndex;
  End;

procedure Register;

implementation

procedure TImageButton.ImagelistChange(Sender:TObject);
begin
   invalidate;
   CheckAutoWidth;
end;

Constructor TImageButton.create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FOwner := AOwner;
  FState := MouseOut;
  Width := 200;
  Height := 200;
  FChangeLink:=TChangeLink.Create;
  FChangeLink.OnChange := ImagelistChange;
end;

Destructor TImageButton.Destroy;
begin
  if Assigned(FImages) then FImages.UnRegisterChanges(FChangeLink);
  FChangeLink.Free;
  inherited Destroy;
end;

procedure TImageButton.Paint;
var
  ico: TIcon;
  idx: Integer;
  DestRect: TRect;
  L_Caption: String;
begin
  inherited;
  idx := -1;
  if Assigned(FImages) then
  begin
    case FState of
      MouseIn:
        if FImages.Count > HoverIndex then
          idx := HoverIndex;
      MouseOut:
        if FImages.Count > Index then
          idx := Index;
      Pressed:
        if FImages.Count > DownIndex then
          idx := DownIndex;
    end;
    if idx > -1 then
      try
        ico := TIcon.create;
        FImages.GetIcon(idx, ico);
        Canvas.Draw(0, 0, ico);
      finally
        ico.Free;
      end;
  end
  else
  begin
    Canvas.Rectangle(ClientRect);
  end;
  Canvas.Brush.Style := bsClear;
  DestRect := ClientRect;
  L_Caption := Caption;
  Canvas.Font.Assign(Font);
  Canvas.TextRect(DestRect, L_Caption, [tfVerticalCenter, tfCenter, tfSingleLine]);
end;

procedure TImageButton.CheckAutoWidth;
begin
  if FAutoWidth and Assigned(FImages) then
    begin
      Width := FImages.Width;
      Height := FImages.Height;
    end;

end;

procedure TImageButton.SetAutoWidth(const Value: Boolean);
begin
  FAutoWidth := Value;
  CheckAutoWidth;
end;

procedure TImageButton.SetCaption(const Value: String);
begin
  FCaption := Value;
  Invalidate;
end;

procedure TImageButton.SetDownIndex(const Value: Integer);
begin
  FDownIndex := Value;
  Invalidate;
end;

procedure TImageButton.SetHoverIndex(const Value: Integer);
begin
  FHoverIndex := Value;
  Invalidate;
end;

procedure TImageButton.SetImages(const Value: TCustomImageList);
begin
  if Assigned(FImages) then FImages.UnRegisterChanges(FChangeLink);
  FImages := Value;
  if Assigned(FImages) then
      begin
        FImages.RegisterChanges(FChangeLink);
        FImages.FreeNotification(FOwner);
        CheckAutoWidth;
      end;
  Invalidate;
end;

procedure TImageButton.SetIndex(const Value: Integer);
begin
  FIndex := Value;
  Invalidate;
end;

procedure TImageButton.WMLBUTTONDOWN(var Message: TMessage);
begin
  inherited;
  FState := Pressed;
  Invalidate;
end;

procedure TImageButton.WMLBUTTONUP(var Message: TMessage);
begin
  inherited;
  FState := MouseIn;
  Invalidate;
end;

procedure TImageButton.CMFontChanged(var Message: TMessage);
begin
  Invalidate;
end;

Procedure TImageButton.CMMouseEnter(var Message: TMessage);
Begin
  inherited;
  if (csDesigning in ComponentState) then
    Exit;
  if FState <> MouseIn then
  begin
    FState := MouseIn;
    Invalidate;
  end;
end;

Procedure TImageButton.CMMouseLeave(var Message: TMessage);
Begin
  inherited;
  if (csDesigning in ComponentState) then
    Exit;
  if FState <> MouseOut then
  begin
    FState := MouseOut;
    Invalidate;
  end;
end;

procedure TImageButton.CMTextChanged(var Message: TMessage);
begin
  invalidate;
end;

procedure Register;
begin
  RegisterComponents('Own', [TImageButton])
end;

end. 
```

如果与 PNG 和 Imagelist cd32Bit 一起使用，将尊重透明胶片

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T11:15:53.960

您可以从 TBitBtn 继承并覆盖 CN_DRAWITEM 消息处理程序 - 这将创建一个完全正常的具有焦点的按钮、您需要的任何图片作为背景以及按钮需要的所有窗口消息（请参阅 BM_XXX 消息）。您还可以实现一个虚拟方法来执行其他类型的按钮，只需覆盖此方法。

像这样的东西：

```
TOwnerDrawBtn = class(TBitBtn)
private
  procedure CNDrawItem(var Message: TWMDrawItem); message CN_DRAWITEM;
  procedure CMFocusChanged(var Message: TMessage); message CM_FOCUSCHANGED;
protected
  procedure DrawButton(const DrawItemStruct: TDrawItemStruct); virtual;
end;

procedure TOwnerDrawBtn.CNDrawItem(var Message: TWMDrawItem);
begin
  DrawButton(Message.DrawItemStruct^);
  Message.Result := Integer(True);
end;

procedure TOwnerDrawBtn.CMFocusChanged(var Message: TMessage);
begin
  inherited;
  Invalidate;
end;

procedure TOwnerDrawBtn.DrawButton(const DrawItemStruct: TDrawItemStruct);
var 
  Canvas: TCanvas;
begin
  Canvas := TCanvas.Create;
  try
    Canvas.Handle := DrawItemStruct.hDC;

    //do any drawing here
  finally
    Canvas.Handle := 0;
    Canvas.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T21:57:02.310

您可以简单地`TJvTransparentButton`从[JEDI-Project JVCL](http://www.delphi-jedi.org)中使用。
使用此组件，您可以将单个图像列表用于所有事件和所有其他按钮，更多事件与图像状态，更多样式，Caption，Glyph，PressOffset 和...。

# html - 在电子邮件中垂直旋转 TEXT

> ID：15681638
> 
> 赞同：6
> 
> 时间：2013-03-28T12:19:02.980
> 
> 标签：html, html-email

我处于需要在电子邮件正文中以垂直顺序设置一些文本的情况，就像这样

![在此处输入图像描述](../Images/354246fd7f9ed9dc904d0c77a61651eb.png)

使用以下 css 我可以在 HTML 中垂直设置文本，但不能在 GMAIL 电子邮件正文中设置相同的文本。

**我的 Gmail 正文中的代码：**

```
<div style=" width:50px; float:left; position:relative;padding-top:80px;transform: rotate(-90deg); -ms-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -webkit-transform: rotate(-90deg); -o-transform: rotate(-90deg);"> 
    <h1 id="Header" style="direction: rtl;font-family: Arial, Helvetica, sans-serif; font-size: 24px; font-weight: normal; color: #434242; white-space: nowrap; position:relative; height:auto; "> newsletter 1 </h1> 
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:27:54.650

您只能在 Gmail 中使用内联 CSS。试穿`style=""`你的元素

编辑：当然，您不能在 Gmail 中使用所有 CSS 属性。这是一个可能有用的[列表。](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:27:30.603

gmail 不支持 body 中的样式标签。你在正文部分使用过样式标签吗？

# java - 将 sql server 2008 r2 连接到 netbeans

> ID：15681641
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:19:14.823
> 
> 标签：java, sql, netbeans

我想创建一个必须创建数据库并稍后访问它的 java 应用程序。我的问题是我无法将 sql server 2008 r2 数据库驱动程序连接到 netbeans。我的系统上安装了 sql server 2008 r2。请建议我逐步建立连接的过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:43:49.613

首先，您需要为 jdbc [http://www.microsoft.com/en-us/download/details.aspx?id=11774](http://www.microsoft.com/en-us/download/details.aspx?id=11774)下载 Microsoft 驱动程序，以实现更顺畅的数据库连接。将其安装在您的 C: 驱动器中/按照安装文件夹中 default.html 文件中的说明进行操作。要在 NetBeans 中使用它，请在项目的 Library 节点中右键单击添加 jar 库，然后导航到安装路径，为 jdk5 及以下版本添加 sqljdbc.jar，否则为 sqljdbc4.jar。查找帮助文件以了解如何制作连接和 getDriverManager 参数。将它用作企业应用程序时会变得更有趣。如果您需要更多帮助，请告诉我

# git - 如何从 zip 中克隆 git 存储库

> ID：15681643
> 
> 赞同：59
> 
> 时间：2013-03-28T12:19:29.223
> 
> 标签：git, github, zip, git-clone

我正在尝试在github上克隆一个远程存储库，但是它很大并且我的连接似乎不够稳定，所以我无法成功克隆它。

但是我已经成功下载了存储库的 .zip。

有没有办法使用这个 zip，因为它是由 git clone 创建的，所以我可以推、拉等。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-08-03T06:49:26.597

[此处](https://stackoverflow.com/questions/2199897/how-to-convert-a-normal-git-repository-to-a-bare-one#answer-15300001)的相关帖子提供了获取`.git`目录并简化[umläute](https://stackoverflow.com/users/1169096/uml%c3%a4ute)提供的答案所需的信息：

*   `.git`通过克隆一个裸存储库来获取目录

    ```
    $ mkdir repo
    $ git clone --bare http://github/user/repo repo 
    ```

*   创建`.git`目录并移动克隆的文件

    ```
    $ mkdir repo/.git
    $ mv repo/* repo/.git 
    ```

*   解压存储库

    ```
    $ unzip repo.zip 
    ```

*   重新初始化存储库

    ```
    $ cd repo
    $ git init 
    ```

*   验证您已同步

    ```
    $ git pull 
    ```

*   重置 HEAD 以清理状态

    ```
    $ git reset HEAD 
    ```

*   这是回购的日志......回购位置 - [http://github.com/udacity/fullstack-nanodegree-vm](http://github.com/udacity/fullstack-nanodegree-vm)

    ```
    $ git log
    commit ebcbda650bc81d7f4856f5314a0689cea5b43086
    Merge: 574774b b5b787e
    Author: Karl Krueger <karl@udacity.com>
    Date:   Tue Apr 7 11:39:54 2015 -0700`

            Merge pull request #3 from pmallory/sharedDirAlert

            Add a login alert to explain how to access Vagrant's shared directory

    commit b5b787efdb1ecec0c3c9c7f9c0fd4732f984fcb3
    Author: Philip Mallory <philip@udacity.com>
    Date:   Mon Apr 6 15:40:32 2015 -0700`

           move the alert into the motd

    commit b8012f33c86b0d19fc4c2b972af092e88d00978f
    Author: Philip Mallory <philip@udacity.com>
    Date:   Mon Apr 6 14:32:01 2015 -0700`

           Add a login alert to explain how to access Vagrant's shared directory

    commit 574774ba29ccd661154431d5600240f090440c37
    Author: Lorenzo Brown <lorenzo@udacity.com>
    Date:   Wed Mar 11 14:08:02 2015 -0700`

           Update pg_config.sh

           Added installs for Auth&Auth

    commit 88fc5537b1a0017a1d76af4587a22412473809a4
    Author: Lorenzo Brown <lorenzo@udacity.com>
    Date:   Wed Mar 4 13:00:25 2015 -0800`

           Update and rename vagrant to vagrant/catalog/README.txt

    commit f978cdc14c62b7295d8da1a95452faaa1bd108b8
    Author: Lorenzo Brown <lorenzo@udacity.com>
    Date:   Wed Feb 4 11:06:03 2015 -0800`

           Update Vagrantfile

           switched to port forwarding on 8080

    commit d6a3a26578ef3c6d01d28abca76d817938892c7f
    Author: Lorenzo Brown <lorenzo@udacity.com>
    Date:   Tue Feb 3 14:52:34 2015 -0800`

           Update Vagrantfile

           Added:

           config.vm.network "forwarded_port", guest: 80, host: 8080
           config.vm.network "forwarded_port", guest: 5000, host: 5000

           FSF uses these two ports for lessons 2 & 3 respectively.

    commit 752a79e408c7328ef7f1766d1b97bb468ffed90a
    Author: Mike Wales <michael.wales@udacity.com>
    Date:   Mon Feb 2 11:21:29 2015 -0800`

           Removed .vagrant directory

    commit 5af9d19adf9ab19b1d886f6cc78e556f864b42dd
    Author: Mike Wales <michael.wales@udacity.com>
    Date:   Mon Feb 2 11:16:45 2015 -0800`

           Initial commit. 
    ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-28T12:49:31.730

如果您已经下载了存储库（包括`.git`目录），这非常简单。

*   解压缩存储库

    ```
    $ unzip repo.zip 
    ```

*   在您的存储库中配置一个`remote`指向克隆 URI

    ```
    $ cd repo
    $ git init
    $ git remote add origin https://github.com/user/repo.git 
    ```

*   重新同步存储库

    ```
    $ git pull 
    ```

实际上，从 github 下载的“zip”*似乎不*包含该`.git`目录，所以这无济于事:-(

最好的选择可能是在具有稳定访问权限的机器上进行克隆，然后压缩 .git 目录并以某种方式获取它......

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-12T02:38:21.743

虽然接受的答案可以解决问题，但这似乎更直截了当。

```
unzip <repo>.zip
cd <repo>
git init
git add .
git remote add origin https://github.com/<user>/<repo>.git
git remote update
git checkout master 
```

只需确保将`<user>`&替换`<repo>`为您的 github 用户名和您的 repo 名称；）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-29T16:29:13.710

克隆的唯一*类似 zip 的*替代方法是交换[“捆绑包”](https://www.kernel.org/pub/software/scm/git/docs/git-bundle.html)，但恐怕 github 不提供捆绑包的创建/下载。

可从 github 下载的 zip 存档只是您的存储库历史记录（通常是分支的尖端）的一个特定提交的快照，它不包含任何历史记录——这个工具旨在自动为您的代码库的用户提供 (不是开发人员！），可以方便地下载项目源代码的快照。请注意，单纯的用户，例如为操作系统打包软件的下游维护者，通常不会克隆整个历史记录，而是使用 tarball。

换句话说，下载 zip 存档就像`git archive`在远程端运行，然后将生成的文件传递给您。

另请注意，托管在 github（和其他 Git 托管服务提供商）上的存储库是“裸”的，也就是说，它们不包含“.git”子目录。

无论如何，解决这个问题的唯一方法似乎是找到一个快速可靠的链接并使用它进行初始下载。

但请注意，如果您对没有完整的历史记录感到满意，*情况就会发生变化。*然后，您可以通过将“--depth”命令行参数传递给`git clone`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-21T04:04:27.833

根据您的用例，初始化可能不是要走的路。如果有一个非常大的存储库（我的存储库是 16GB 并且需要这样做），这将特别乏味，并且实际上`refs+objects`如果您的存档代表一个远程不再存在的存档，那么这将是不好的。

您需要分两步复制存储库：

1.  “数据文件”（HEAD 修订版可能未暂存）
2.  指数和对象，即。history+refs+objects ：这会记录你的基线、增量、分支指针和标签。

目的是**减少必须从远程克隆或无法从不再存在的远程重新创建的对象的**数量。此外，您希望**您的配置不与最初创建存储库的本地配置文件冲突**

您希望为远程中不再存在或您不想复制的**对象和引用保留存储库布局（例如，它们是大图像资产）。**出于这个原因，你不想初始化和拉动，特别是如果你没有遥控器了。

相反，存储库已经处于可接受的状态，引用和对象完好无损。唯一的问题可能是遥控器不再正确设置并且您的配置可能设置不正确。

运行`git config --local -l`以验证提交标识未在存储库中本地设置，并以您不希望的方式更改任何覆盖全局设置的键。

现在它已配置好，现在将存储库视为您自己的（因为它是），git 被设计为分布式工作，因此一旦您更改任何本地配置，它实际上与克隆它没有什么不同。剩下的唯一事情是您必须确保您的遥控器设置正确。

如果您没有远程但希望创建一个，请使用在远程服务器上创建它，`git init --bare`然后像往常一样添加一个远程并推送所有 refs `git push --all`。使存储库裸露意味着它将接受第一次推送，而不会抱怨历史分歧。

如果您有现有的远程存储库，请将其添加为远程并拉取。存档分支可能指向错误的 url，具体取决于存档的制作时间，如果是这种情况，请使用`git remote`将它们分配到新位置或删除任何无效的 url。

一旦设置了遥控器，就可以获取并拉取最新版本。如果有分离的 HEAD，请检查所需的分支。如果归档存储库的历史与远程不同，git 将产生合并冲突，正常解决，必要时隐藏更改。

# iphone - 使用 tableView willDisplayCell: 委托方法自定义 tableview 背景

> ID：15681646
> 
> 赞同：2
> 
> 时间：2013-03-28T12:19:33.333
> 
> 标签：iphone, ios5, uitableview, uiimage

我想用我自己的图像自定义表格视图背景我正在使用下面的代码来自定义单元格背景视图

```
-(void)tableView:(UITableView *)tableView
 willDisplayCell:(UITableViewCell *)cell
forRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSInteger rowCount = [self tableView:[self tableView] numberOfRowsInSection:0];
    NSInteger rowIndex = indexPath.row;
    UIImage *background = nil;

    if (rowIndex == 0) {
        background = [UIImage imageNamed:@"TableTopBackground.png"];
    } else if (rowIndex == rowCount - 1) {
        background = [UIImage imageNamed:@"TableBottomBackground.png"];
    } else {
        background = [UIImage imageNamed:@"TableMiddleBackground.png"];
    }

    [cell setBackgroundView:[[UIImageView alloc]initWithImage:background]];

} 
```

我的问题是当我在 ios5（图 1）中运行时底部单元格图像和中间单元格图像互换，但在 ios6 中它很好（图 2）。

![ios 5 图片](../Images/6776b67f88ae6e4253744d34f322b8a4.png)

![ios 6 图片](../Images/5eb72f65cbfa5b44eada7d43f2dd07de.png)

但是设置背景颜色在 ios5 和 ios 6 中都可以正常工作。任何人都可以帮助我解决它。

在 cellForRowatindexpath 中编写代码它可以工作，但为什么它在 willdisplaycell 中不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:26:55.863

放入方法`image` 并`cellForRowAtIndexPath`添加

```
 cell.backgroundView.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

这段代码写在

```
if(cell == nil)
 {
 } 
```

# asp.net-mvc - 在 Ef 中编辑实体 - UnitOfWork

> ID：15681650
> 
> 赞同：0
> 
> 时间：2013-03-28T12:19:49.687
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0, unit-of-work

我正在为我的项目使用这个模板

```
 public interface IUnitOfWork
    {
        IDbSet<TEntity> Set<TEntity>() where TEntity : class;
        int SaveChanges();
        void RejectChanges();
        DbEntityEntry<TEntity> Entry<TEntity>(TEntity entity) where TEntity : class;
    } 
```

执行：

```
 public   class BookStoreDbContext : DbContext, IUnitOfWork

  {

    public DbSet<Categori> Categoris { get; set; }

    public new DbEntityEntry<TEntity> Entry<TEntity>(TEntity entity) where TEntity : class
    {
        return base.Entry(entity);

    }

    public override int SaveChanges()
    {

        return base.SaveChanges();
    } 
```

控制器：

```
 public class CategoriController : Controller
   {

    private IUnitOfWork _uw;

    private ICategoriService _categoriService;

    public CategoriController(IUnitOfWork uw,ICategoriService categoriservice )
    {
        _uw = uw;
        _categoriService = categoriservice;
    }

   public ActionResult Edit(int id = 0)
    {
        var categori = _categoriService.Find(i => i.Id == id);
        if (categori == null)
        {
            return HttpNotFound();
        }
        return View(categori);
    }

    [HttpPost]
    public ActionResult Edit(Categori categori)
    {
        if (ModelState.IsValid)
        {

              _uw.Entry(categori).State = EntityState.Modified;
                _uw.SaveChanges();
        }
        return View(categori);
    }
} 
```

存储库或服务层：

```
 public interface IGenericService<T> : IDisposable where T : class
    {
    void Add(T entity);

    void Delete(T entity);
    T Find(Func<T, bool> predicate);
    IList<T> GetAll();
    IList<T> GetAll(Func<T, bool> predicate);

    }

 public interface ICategoriService : IGenericService<DomainClasses.Models.Categori>
   {

   } 
```

暗示存储库：

```
 public class EfGenericService<TEntity> : IGenericService<TEntity> where TEntity : class
{
    protected IUnitOfWork _uow;
    protected IDbSet<TEntity> _tEntities;

    public EfGenericService(IUnitOfWork uow)
    {
        _uow = uow;
        _tEntities = _uow.Set<TEntity>();
    }

    public virtual void Add(TEntity entity)
    {
        _tEntities.Add(entity);
    }

    public void Delete(TEntity entity)
    {
        _tEntities.Remove(entity);
    }

    public TEntity Find(Func<TEntity, bool> predicate)
    {
        return _tEntities.Where(predicate).FirstOrDefault();
    }

    public IList<TEntity> GetAll()
    {
        return _tEntities.ToList();
    }

    public IList<TEntity> GetAll(Func<TEntity, bool> predicate)
    {
        return _tEntities.Where(predicate).ToList();
    }

 public class EfCategoriService : EfGenericService<Categori>,ICategoriService
{
      public EfCategoriService(IUnitOfWork uow)
        : base(uow)
      {
    }

} 
```

全球.asax

```
 private static void InitStructureMap()
    {
        ObjectFactory.Initialize(
            x =>
                {
                    x.For<IUnitOfWork>().HttpContextScoped().Use(() => new BookStoreDbContext());
                     x.ForRequestedType<ServiceLayer.Interfaces.ICategoriService>()
                     .TheDefaultIsConcreteType<EfCategoriService>();

} 
```

但是更新实体时出现此错误：

存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目

请帮我解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:46:40.670

您的片段中唯一相关的行是：

```
_uw.Entry(categori).State = EntityState.Modified;
_uw.SaveChanges(); 
```

现在，看看你得到的异常：

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。

*   是否设置实体状态以`Modified` *插入*实体？不。
*   它会*删除*实体吗？不。
*   它会*更新*实体吗？是的。

*   EF 尝试更新的实体是否已被*删除*？好吧，也许。如何检查？删除实体时，数据库必须知道键才能知道要删除哪一行。要确认键是否正确，请在控制器发布操作中使用调试器，检查**传递给方法****的键值。`categori`它有预期值吗？如果没有，您的视图或将表单和路由值绑定到`categori`模型可能存在问题。**如果是，请检查数据库中具有该键的实体是否在数据库表中。如果是，下一点。

*   实体是否已被*修改*？`Categori`如果您已将模型中的另一个属性标记为并发标记，则 EF 可能会“认为”它已在数据库中修改（即使它没有） 。如果该属性在数据库*中或在*GET 请求中加载实体和重新附加（将状态设置为`Modified`）之间的视图中发生更改，并且`SaveChanges`在 POST 请求中，您将遇到并发冲突。

优先级在上面用粗体进行了测试，因为在我看来它是问题的最可能原因。如果事实证明密钥没有预期值，最好提出一个新问题，因为这将是一个纯 ASP.NET MVC 问题，与 EF 以及您的 UOW 和服务架构无关。

# layout - 如何控制具有不同字体大小的非块级元素之间的行高？

> ID：15681651
> 
> 赞同：0
> 
> 时间：2013-03-28T12:19:52.443
> 
> 标签：layout, css

我有一个布局，我需要控制包装的非块级元素之间的行高：

`<p class="payments"><small class="light">You Pay</small><abbr title="GBP">£</abbr>121.50<br><small>per month</small></p>`

我想要实现的是：

![例子](../Images/a7ff89b00a79a66871b5e4f50da43d73.png)

我不想依赖绝对定位，因为下面会有元素需要清除它，只需在段落上设置低行高会导致对象脱离其框，请参见下面的小提琴：

[http://jsfiddle.net/mdHKy/2/](http://jsfiddle.net/mdHKy/2/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:53:08.640

您可以先给出`p`a`height`然后将其设置`line-height`为该数量的一半（即 2 行）。

```
p.payments {
    line-height: 1em;
    height:2em;
} 
```

然后将`line-height`of设置`small`为`1em`并给出 a `vertical-align`：

```
p.payments small {
    line-height:1em;
    vertical-align:top;
} 
```

然后设置`vertical-align`你的`.light`：

```
p.payments small.light {
    vertical-align:baseline;
} 
```

[JSFiddle 示例](http://jsfiddle.net/mdHKy/3/)。

# ios - 我们是否需要处理任何图像尺寸以支持 iPad mini？

> ID：15681655
> 
> 赞同：0
> 
> 时间：2013-03-28T12:20:03.157
> 
> 标签：ios, ipad

嗨，他们有任何额外的东西，比如图像尺寸或任何 plist 属性设置或任何额外设置，我们需要照顾我的 iPad 应用程序以支持 iPad mini

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:24:09.703

一点也不。您应该将每个图像分为两个版本，非视网膜和视网膜分辨率（@2x 的东西）。但无论如何你都应该这样做来支持视网膜。

iPad mini 使用非视网膜分辨率。从 UI 的角度来看，您可以将其与 iPad (1) 和 iPad 2 进行比较。

# database - 我可以只使用 DBMS，还是应该发明自己的 DataStructure？

> ID：15681657
> 
> 赞同：0
> 
> 时间：2013-03-28T12:20:04.420
> 
> 标签：database, algorithm, data-structures

我正在制作一个处理大量数据的程序，但我面临两个方向，算法可以在每次需要数据时查询数据库，或者我应该创建自己的数据结构并只提供一次数据。

我认为对于大数据，您真的不知道 DBMS 将如何处理您的查询？这可能需要一段时间，尤其是在流量很大的情况下，所以最好自己发明数据结构，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:54:24.223

我认为你只需要 ak/v 存储，试试 LevelDB ( [http://code.google.com/p/LevelDB](http://code.google.com/p/LevelDB) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:01:50.590

如果您只对列的一个子集感兴趣，您可以在数据库中创建一个视图。这样该表并不总是被扫描。

# c# - Handsontable Grid - 从 aspx 网页加载和保存数据

> ID：15681661
> 
> 赞同：0
> 
> 时间：2013-03-28T12:20:13.177
> 
> 标签：c#, .net, handsontable

是否可以使用 aspx 页面后面的 c# 代码将数据加载到网格或从网格中保存数据，还是必须使用 Web 服务（或 PHP）？我尝试过使用 JSON.Net 映射一个非常简单的结构来编码后端结构，但失败了

是否可以使用 JQuery（`GET`我认为是 ajax）来调用后端代码文件（.aspx.cs）中的方法？我试过使用这个论坛上各种帖子的代码，但后端代码（c#）的信息很少，而且似乎都指的是网络服务。任何帮助/建议将不胜感激。

以下是相关的 JavaScript 代码：

```
var handsontable = $container.data('handsontable');
$(document).find('button[name=load]').click(function () {
    $.ajax({
        url: "Default.aspx/getJSData",
        dataType: 'json',
        type: 'GET',
        //contentType: "application/json; charset=utf-8",
        success: function (res) {
            handsontable.loadData(res.data);
            $console.text('Data loaded');
        },
        error: function () {
            $console.text('Load error');
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:48:19.100

您仍然需要执行 Ajax 调用，但不需要执行 Web 服务（可以）。您希望向 Ajax 调用公开的函数将`[WebMethod]`属性打开并使用脚本管理器，并将 EnablePageMethods 属性设置为 true。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True">
</asp:ScriptManager> 
```

访问方法：

```
[WebMethod]
public static void SomeFunction(string message, string name)
{

} 
```

使用 jQuery 的 Ajax 调用

```
(function($) {
        $.ajax({
            type: "POST",
            url: "test.aspx/SomeFunction",
            data: "{message:'Hello World', name: 'Bob'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                alert('success');
            }
        });
    }); 
```

参考：[使用 WebMethod 属性](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.71%29.aspx)

# c# - “var objectName= new SomeObject()”和“interfaceName objectName= new SomeObject()”之间的区别

> ID：15681665
> 
> 赞同：0
> 
> 时间：2013-03-28T12:20:20.377
> 
> 标签：c#, .net, interface, resharper, code-inspection

我正在通过 resharper 的代码检查进行一些代码分析，我收到了下一个警告：

> 仅使用属性“propertyname”的实现

我的界面上有这个警告，如果我用谷歌搜索，我发现了这个 jetbrains 页面： [http ://confluence.jetbrains.com/display/ReSharper/Only+implementations+of+property+are+used](http://confluence.jetbrains.com/display/ReSharper/Only+implementations+of+property+are+used)

那根本没有帮助我，因为那样我就没有界面了......

所以我开始测试如何摆脱那个警告。在以下虚拟接口和类上：

```
public interface ITest
{
    string Name { get; set; }
}

public class Test: ITest
{
    public string Name { get; set; }
} 
```

如果我使用：

```
var newTest = new Test();
newTest.Name= "newName"; 
```

然后出现警告。但是当我使用下一行时，警告会消失。

```
ITest newTest = new Test();
newTest.Name = "newName"; 
```

我不是界面忍者，所以我想知道，这两种方式有什么区别..？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:26:11.007

这推断出具体类型：

```
//X is of type X
var x = new X(); 
```

这不

```
//X is of type IX
IX x = new X(); 
```

我猜如果你写，警告仍然会发生

```
//X is of type X
X x = new X(); 
```

以下内容是否也删除了警告？

```
public void TestX()
{
    //X is of type X
    var x = new X();
    UseIX(x);
}

public void UseIX(IX interfaceParam)
{
    interfaceParam.Foo = 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:25:34.617

var newTest = new Test() 将 newTest 的类型设置为 Test。ITest newTest = new Test() 将 newTest 的类型设置为 ITest。

因此，不需要以前的 ITest，因为它从未使用过。

所以 resharper 只是说你不需要 ITest。是否同意，由你决定。您需要 ITest 吗？

# python-2.7 - 如何使用 tkFileDialog 将变量保存和打开到文件中？

> ID：15681667
> 
> 赞同：1
> 
> 时间：2013-03-28T12:20:32.563
> 
> 标签：python-2.7, tkinter

我正在尝试使用 tkFileDialog 保存选项将几个变量保存在文件中。在后面的部分中，我必须检索相同的变量。我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:28:07.267

您可以使用泡菜：

```
import tkFileDialog
filename = tkFileDialog.asksaveasfilename()
a = 1
b = []
c = {}
f = open(filename, 'wb') # wb is important
import pickle
pickle.dump((a,b,c), f)
f.close() 
```

现在加载：

```
import tkFileDialog
filename = tkFileDialog.askopenfilename()
f = open(filename, 'rb') # rb is important
import pickle
a, b, c = pickle.load(f)
f.close() 
```

# osx-mountain-lion - CodeBlocks 在 Mac OS 上意外退出

> ID：15681669
> 
> 赞同：4
> 
> 时间：2013-03-28T12:20:36.533
> 
> 标签：osx-mountain-lion, codeblocks

我已经在 MacBook Air 上安装了 CodeBlocks。我安装了 XCode 4.6 和 XCode 命令行工具。但问题是任何时候我尝试打开现有项目 CodeBlock 都会意外退出。如果我创建一个新项目，当我打开项目的任何 .cpp 文件时，CodeBlocks 会以同样的方式粉碎。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T12:29:52.657

好的，我解决了。如果有人遇到同样的问题，请尝试在 CodeBlocks 中禁用代码完成插件（插件 -> 管理插件，在列表中找到“代码完成”，单击“禁用”）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T23:37:30.633

CodeBlocks 网站说“Mac 的 Code::Blocks 目前不如其他端口稳定，尤其是在 Mountain Lion 上。换句话说，我们可以使用额外的 Mac 开发人员（或两个）来解决 Mac 兼容性问题。” 它很可能会崩溃。

# network-programming - 流量饱和时收到的吞吐量问题

> ID：15681671
> 
> 赞同：3
> 
> 时间：2013-03-28T12:20:37.487
> 
> 标签：network-programming, ns-3

我在如下配置的基础架构拓扑中使用 NS3 (v3.13) Wi-Fi 模型（附加模拟文件）：

*   单 AP (BSS)
*   多个STA（站）
*   应用持续时间 = 10s
*   从 AP 到所有 STA 的饱和下行链路流量（OnOffApplication，**OnTime=2s 和 OffTime=0 ）**
*   物理层：802.11a
*   默认 YansWifiChannelHelper 和 YansWifiPhyHelper
*   速率控制：ConstantRateWifiManager
*   移动性：ConstantPositionMobilityModel（STA 位于 AP 周围 2 米半径的圆上）

虽然一切顺利，但对于高比特率（饱和流量），当每个 BSS 的 STA 数量增加很多时，一些 STA 不会收到任何 BYTE ！

实验：

*   OnOffApplication DataRate = **60Mb/s** , Phy DataMode=OfdmRate **54** Mbps 和 30 个 STA，一个 STA 接收比特率为 7.2Mb/s 的数据包，另一个接收 15.3Mb/s 的数据包（所有其他 28 个 STA 不接收任何 BYTE）
*   OnOffApplication DataRate = **60Mb/s** , DataMode=OfdmRate **6** Mbps 和 30 个 STA，一个 STA 接收比特率为 1.95Mb/s 的数据包，另一个接收 4.3Mb/s 的数据包（所有其他 28 个 STA 不接收任何 BYTE）

我认为问题来自 OnOff Application 配置；我应该如何配置它来模拟一个完整的缓冲区下行流量？

提前感谢您的任何建议。

```
#include "ns3/core-module.h"
#include "ns3/point-to-point-module.h"
#include "ns3/network-module.h"
#include "ns3/applications-module.h"
#include "ns3/wifi-module.h"
#include "ns3/mobility-module.h"
#include "ns3/csma-module.h"
#include "ns3/internet-module.h"
#include "ns3/flow-monitor-helper.h"
#include "ns3/flow-monitor-module.h"
#include "ns3/applications-module.h"
#include "ns3/internet-module.h"
#include "ns3/gnuplot.h"
#include "ns3/constant-velocity-helper.h"
#include "ns3/integer.h"
#include "ns3/mpi-interface.h"
#include "math.h"
#include <iostream>

/**
 *  PARAMETERS
 */
#define StaNb       30
#define Distance    2
#define Duration    10
#define DataRate    90000000
#define PacketSize  1500

#define couleur(param) printf("\033[%sm",param)

using namespace ns3;

class Experiment {
public:
    Experiment();
    void CreateArchi(void);
    void CreateApplis();

private:

    Ptr<ListPositionAllocator> positionAllocAp;
    Ptr<ListPositionAllocator> positionAllocSta;
    Ptr<GridPositionAllocator> positionAllocStaCouloir;
    Ptr<RandomDiscPositionAllocator> positionAllocStaAmphi;

    std::vector<Ptr<ConstantPositionMobilityModel> > constant;

    NodeContainer m_wifiAP, m_wifiQSta;

    NetDeviceContainer m_APDevice;

    NetDeviceContainer m_QStaDevice;

    YansWifiChannelHelper m_channel;
    Ptr<YansWifiChannel> channel;

    YansWifiPhyHelper m_phyLayer_Sta, m_phyLayer_AP;
    WifiHelper m_wifi;

    QosWifiMacHelper m_macSta, m_macAP;

    InternetStackHelper m_stack;
    Ipv4InterfaceContainer m_StaInterface;
    Ipv4InterfaceContainer m_ApInterface;

    Ssid m_ssid;
};

Experiment::Experiment() {

    positionAllocStaCouloir = CreateObject<GridPositionAllocator>();
    positionAllocAp = CreateObject<ListPositionAllocator>();
    positionAllocSta = CreateObject<ListPositionAllocator>();
    positionAllocStaAmphi = CreateObject<RandomDiscPositionAllocator>();

    m_wifi = WifiHelper::Default();

    constant.resize(StaNb + 1);
    for (int i = 0; i < StaNb + 1; i++) {
        constant[i] = CreateObject<ConstantPositionMobilityModel>();
    }
}

void Experiment::CreateArchi(void) {

    m_wifiQSta.Create(StaNb);

    m_wifiAP.Create(1);

    m_ssid = Ssid("BSS_circle");

    m_channel = YansWifiChannelHelper::Default();

    channel = m_channel.Create();

    m_wifi.SetStandard(WIFI_PHY_STANDARD_80211a);
    m_wifi.SetRemoteStationManager("ns3::ConstantRateWifiManager", "DataMode",
            StringValue("OfdmRate6Mbps"));

    m_phyLayer_Sta = YansWifiPhyHelper::Default();
    m_phyLayer_AP = YansWifiPhyHelper::Default();

    m_phyLayer_Sta.SetChannel(channel);
    m_phyLayer_AP.SetChannel(channel);

    positionAllocAp->Add(Vector3D(0.0, 0.0, 0.0));

    MobilityHelper mobilityAp;
    mobilityAp.SetPositionAllocator(positionAllocAp);
    mobilityAp.SetMobilityModel("ns3::ConstantPositionMobilityModel");
    mobilityAp.Install(m_wifiAP.Get(0));

    constant[0]->SetPosition(Vector3D(0.0, 0.0, 0.0));

    float deltaAngle = 2 * M_PI / StaNb;
    float angle = 0.0;
    double x = 0.0;
    double y = 0.0;

    for (int i = 0; i < StaNb; i++) {
        x = cos(angle) * Distance;
        y = sin(angle) * Distance;

        positionAllocSta->Add(Vector3D(x, y, 0.0));

        MobilityHelper mobilitySta;
        mobilitySta.SetPositionAllocator(positionAllocSta);
        mobilitySta.SetMobilityModel("ns3::ConstantPositionMobilityModel");
        mobilitySta.Install(m_wifiQSta.Get(i));

        constant[i]->SetPosition(Vector3D(x, y, 0.0));

        angle += deltaAngle;
    }

    m_macSta = QosWifiMacHelper::Default();

    m_macSta.SetType("ns3::StaWifiMac", "ActiveProbing", BooleanValue(true),
            "Ssid", SsidValue(m_ssid));

    m_macAP = QosWifiMacHelper::Default();

    m_macAP.SetType("ns3::ApWifiMac", "Ssid", SsidValue(m_ssid),
            "BeaconInterval", TimeValue(Time(std::string("100ms"))));

    m_APDevice.Add(m_wifi.Install(m_phyLayer_AP, m_macAP, m_wifiAP));

    for (int i = 0; i < StaNb; i++) {
        m_QStaDevice.Add(
                m_wifi.Install(m_phyLayer_Sta, m_macSta, m_wifiQSta.Get(i)));
    }

    m_stack.Install(m_wifiAP);
    m_stack.Install(m_wifiQSta);

    Ipv4AddressHelper address;
    address.SetBase("192.168.1.0", "255.255.255.0");

    m_ApInterface.Add(address.Assign(m_APDevice.Get(0)));

    for (int i = 0; i < StaNb; i++) {
        m_StaInterface.Add(address.Assign(m_QStaDevice.Get(i)));
    }

    Ipv4GlobalRoutingHelper::PopulateRoutingTables();
}

void Experiment::CreateApplis() {

    ApplicationContainer source;

    OnOffHelper onoff("ns3::UdpSocketFactory", Address());
    onoff.SetAttribute("OnTime", RandomVariableValue(ConstantVariable(2)));
    onoff.SetAttribute("OffTime", RandomVariableValue(ConstantVariable(0)));
    onoff.SetAttribute("DataRate", StringValue("500kb/s"));

    for (int i = 0; i < StaNb; i++) {
        AddressValue remoteAddress(
                InetSocketAddress(m_StaInterface.GetAddress(i), 5010));
        onoff.SetAttribute("Remote", remoteAddress);
        source.Add(onoff.Install(m_wifiAP.Get(0)));
        source.Start(Seconds(3.0));
        source.Stop(Seconds(Duration));
    }

    ApplicationContainer sinks;
    PacketSinkHelper packetSinkHelper("ns3::UdpSocketFactory",
            Address(InetSocketAddress(Ipv4Address::GetAny(), 5010)));

    for (int i = 0; i < StaNb; i++) {

        sinks.Add(packetSinkHelper.Install(m_wifiQSta.Get(i)));
        sinks.Start(Seconds(3.0));
        sinks.Stop(Seconds(Duration));
    }

}

int main(int argc, char *argv[]) {

    Experiment exp = Experiment();

    Config::SetDefault("ns3::WifiRemoteStationManager::RtsCtsThreshold",
            StringValue("2346"));

    exp.CreateArchi();

    exp.CreateApplis();

    FlowMonitorHelper flowmon;
    Ptr<FlowMonitor> monitor = flowmon.InstallAll();

    Simulator::Stop(Seconds(Duration));

    Simulator::Run();

    monitor->CheckForLostPackets();
    Ptr<Ipv4FlowClassifier> classifier = DynamicCast<Ipv4FlowClassifier>(
            flowmon.GetClassifier());
    std::map<FlowId, FlowMonitor::FlowStats> stats = monitor->GetFlowStats();
    int c = 0;
    for (std::map<FlowId, FlowMonitor::FlowStats>::const_iterator i =
            stats.begin(); i != stats.end(); ++i) {
        Ipv4FlowClassifier::FiveTuple t = classifier->FindFlow(i->first);
        std::cout << "Flux " << i->first << " (" << t.sourceAddress << " -> "
                << t.destinationAddress << ")\n";
        std::cout << "  Tx Bytes :   " << i->second.txBytes << "\n";
        std::cout << "  Rx Bytes :   " << i->second.rxBytes << "\n";

        couleur("33");
        std::cout << "  Bitrate  :   "
                << i->second.rxBytes * 8.0
                        / (i->second.timeLastRxPacket.GetSeconds()
                                - i->second.timeFirstRxPacket.GetSeconds())
                        / 1000000 << " Mbps\n\n";
        couleur("0");

        if (i->second.rxBytes > 0)
            c++;
    }

    std::cout << "  Number of receiving nodes  :   " << c << "\n";

    Simulator::Destroy();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T16:37:49.750

我认为媒体太忙了。

您需要调低 onoff 数据速率，例如 1 mbps。实际上，全缓冲 720p 视频只需要不超过 1mbps

您还可以使用 pcap、ascii 或 netanim 检查跟踪，也可以查看数据包丢失、数据包从未发送或代码中的错误

# php - 插入 php 代码不起作用，但 phpmyadmin 工作正常

> ID：15681673
> 
> 赞同：-3
> 
> 时间：2013-03-28T12:20:40.703
> 
> 标签：php, mysql

我有以下表格，以下是我使用所有可能的检查来解决此问题的查询。问题是插入适用于 phpMyAdmin 但不适用于 PHP。我尝试了一切，但仍然有同样的问题。

这是我的表格代码：

```
 CREATE TABLE IF NOT EXISTS `cle` (
      `id` int(40) NOT NULL AUTO_INCREMENT,
       `title` varchar(444) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Article',
       `content` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
       `url` varchar(222) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
       `status` int(11) DEFAULT '0',
       `alt` varchar(400) DEFAULT NULL,
       PRIMARY KEY (`id`),
       KEY `url` (`url`,`status`)
       ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

这是插入代码：

```
 INSERT INTO cle (content,url,alt) VALUES (' <br> <span name=KonaFilter style=\"width:100%;\"><center><font size=\"4\"><b>Rate? Part 1</b> by<b>  </b></font></center></span> <span> <br> <center>         <br><td><img src=\"http://a1.abc.com/a/spacer.gif\" height=\"0\" width=\"1\"></td></tr> <tr><td>Article Posted: 04/04/2005</td></tr> </table> </td> </tr> </table> <table cellspacing=\"0\" cellpadding=\"1\" width=\"100%\" border=0> <tr> <td><h1 style=\"color:02679D; font-size:16\"><b><span name=KonaFilter>Howe? Part 1</span></b></h1></td> <td align=\"right\">     <table border=0 cellpadding=4> <tr> <td valign=\"top\"> <img name=\"btn36\" src=\"http://a4.abc.com/a/js_feed_article.gif\" width=48 height=38 onclick=\"ClipBoard(input36);\" onmouseover=\"this.style.cursor = \'hand\';\"> <input type=\"hidden\" name=\"input36\" value=\'</td> <td valign=\"top\"> <a href=\"http://www.a.com/Email_Article.cfm?articleid=36\"><img src=\"http://a4.abc.com/a/email_me.gif\" width=38 height=33 border=0></a> </td> </tr>    </table> </td> </tr> <tr> <td colspan=2> </td> </tr> <tr><td><br>&nbsp;<br></td></tr> <tr>     <td valign=\"bottom\" colspan=2> <form name=\"formx\" action=\"/article_detail.cfm?articleid=36\" method=\"post\"> <input type=\"hidden\" name=\"flagged\" value=1> <input type=\"image\" src=\"http://a1.abc.com/a/categorize.gif\" alt=\"Is gory?\" onclick=\"flag();\"> </form> </td></tr> </tr> <tr><td colspan=2><img src=\"http://a1.abc.com/a/spacer.gif\" height=\"5\" width=\"1\"></td></tr> <tr><td colspan=2> <div align=left style=\"width:370; height:315;\">s we’ll sues. <br> Question 1:? Do on such as “read more here” or? <br> What bsite. “Read More Here” us ASP vendors, rates, why itrates. <br> <p><br<!-- --> <table cellspacing=1 cellpadding=\"1\" border=0 width=\"130\" bgcolor=\"5A5A5A\"> <tr> <td valign=\"middle\" align=\"right\" height=\"10\" style=\"background-repeat:no-repeat;\" bgcolor=\"ffffff\" background=\"http://a15.abc.com/a/catbox.gif\">&nbsp;<font face=\"arial\" style=\'font-size:12\'><b><font style=\'font-family:verdana; font-size:9\'>Rate This Article</font> <img onclick=\'closeWindow();\' src=\'/a/close.gif\'>&nbsp;</b></font></td> </tr> <tr><td bgcolor=\"dddcdd\"> <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" width=\"100%\">       <tr> <td align=\"center\"> <table border=0> <form name=\"form2\" action=\"\" method=\"post\"> <tr><td colspan=5><input type=\"text\" name=\"xDesc\" value=\"\" style=\"border:0 px; font-size:10;background-color:dddcdd\" contenteditable=\"false\"></td>          </form> <tr> <td width=\"20%\">  </td> <td width=\"20%\"> <form name=\"rateform2\"            action=\"/feedback.cfm/36?articleid=36&title=2C1\" method=\"post\"> <input type=\"hidden\" name=\"rating\" value=2> <img src=\"http://a2.abc.com/a/empty_star.gif\" name=\"imagetwo\" alt=\"Minimal useful information.\" style=\"border:0px\" onclick=\"rate(2);\" onmouseover=\"starDesc(2);\" onmouseout=\"starDesc(0);emptyStar(2);\"> </form> </td> <td          width=\"20%\"> <form name=\"rateform3\" action=\"/f.cfm/36?articleid=36C1\" method=\"post\"> <input type=\"hidden\" name=\"rating\" value=3> <img src=\"http://a3.abc.c.gif\" name=\"imagethree\" alt=\"Decent and informative.\"  style=\"border:0px\" onclick=\"rate(3);\" onmouseover=\"starDesc(3);\" onmouseout=\"starDesc(0);emptyStar(3);\"> </form> </td> <td width=\"20%\"> <form name=\"rateform4\" action=\"/feedback.cfm/36?articleid=36&title=C1\" method=\"post\">          <input type=\"hidden\" name=\"rating\" value=4> <img src=\"http://a4.abc.com/a/emptyr.gif\" name=\"imagefour\" alt=\"Gre.\" style=\"border:0px\" onclick=\"rate(4);\" onmouseover=\"starDesc(4);\" onmouseout=\"starDesc(0);emptyStar(4);\"> </form> </td> <td width=\"20%\"> <form name=\"rateform5\" action=\"/fem/36?articleid=36&title=C1\" method=\"post\"> <input type=\"hidden\" name=\"rating\" value=5> <img src=\"http://a5.abc.com/a/empty_star.gif\" name=\"imagefive\" alt=\"A \'Must Read\'.\" style=\"border:0px\" onclick=\"rate(5);\" onmouseover=\"starDesc(5);\" onmouseout=\"starDesc(0);emptyStar(5);\"> </form> </td> </tr> </table> </td> </tr> </table>         </td> </tr> <tr><td bgcolor=\"5A5A5A\"><img src=\"http://a1.aer.gif\" height=\"8\" width=\"100%\"></td></tr> </table>  </div> <script type=\"text/javascript\"> //Enter \"frombottom\" or \"fromtop\" var verticalpos=\"frombottom\" function JSFX_FloatTopDiv() {    var tmpcookie = new Date();    chkcookie = (tmpcookie.getTime() + \'\');    document.cookie = \"chkcookie=\" + chkcookie + \"; path=/\"; if (document.cookie.indexOf(chkcookie,0) < 0) { divStayTopLeft.style.left=-1000;       }     else { starDesc(0); var startX = 0, startY = 100; var ns = (navigator.appName.indexOf(\"Netscape\") != -1); var d = document; function ml(id) { var el=d.getElementById?d.getElementById(id):d.all?d.all[id]:d.layers[id]; if(d.layers)el.style=el; el.sP=function(x,y){this.style.left=x;this.style.top=y;}; el.x = startX; if (verticalpos==\"fromtop\") el.y = startY; else{ el.y = ns ? page
              <p> </td> </tr> <tr><td align=\"center\" > <p>&nbsp;<p> <font size=3 color=990000>Doe?  Have a Comment?  POST IT!</font><p> <table cellspacing=1 cellpadding=\"4\" border=0 width=\"100%\" bgcolor=\"4D4D4D\" align=\"center\"> <tr> <td align=\"right\" height=\"23\" style=\"background-repeat:no-repeat;\" bgcolor=\"ffffff\" background=\"\">&nbsp;<font face=\"arial\" style=\'font-size:12\'><b>Re</b></font>&nbsp;    </td> </tr> <tr><td  bgcolor=\"dddddd\"> <form action=\"/post_.cfm\" method=\"post\">       <table width=\"100%\" cellpadding=3 border=0 cellspacing=1> </table> <table width=\"100%\" cellpadding=5 border=0> <tr><td colspan=2><font size=2><strong>Sue.</strong></font></td></tr> <tr> <td colspan=2 align=\"center\">Make this comment <input type=radio  selected name=PublicPrivate value=\"Public\" label=\"Public\"> <label for=\"Public\">Public</label> or <input type=radio  name=PublicPrivate value=\"Private\" label=\"Private\"> <label for=\"Private\">Private</label> to th:</td> </tr> <tr> <td align=\"right\">Name:</td> <td>     <input type=\"text\" name=\"name\" value=\"\" size=50> </td> </tr> <tr> <td align=\"right\" valign=\"top\">Email:</td> <td><input type=\"text\" name=\"Emss\" value=\"\" size=50><br>   <font size=1 color=\"ff0000\">*Youy.</font></td> </tr> <tr> <td align=\"right\" valign=\"top\">Comments:</td> <td><font size=1 color=\"ff0000\">*Yongly.</font><br>     <textarea cols=45 rows=10 name=\"Comments\"></textarea></td> </tr> <tr> <td>&nbsp;</td>       <td><img src=\"http://a6.abc.com/f.jpg\"></td> </tr> <tr> <td align=\"right\" valign=\"top\">Pge:</td> <td align=\"left\"><input type=\"text\" maxlength=6 name=\"ImageCode\" value=\"\" size=10></td> </tr> <tr> <td colspan=2 align=\"center\">      <input type=\"hidden\" name=\"ArticleID\" value=\"36\"> <input type=\"hidden\" name=\"x\" value=\"gwSIMR\"> <input type=\"hidden\" name=\"Author
       ID\" value=\"\"> <input type=\"hidden\" name=\"ReturnTo\" value=\"/article_detail.cfm?articleid=36\"> <input type=\"Submit\" value=\"Sut\" name=\"PostComment\"> </td> </tr> </table> </form> </td>         </tr> <tr><td  bgcolor=\"4D4D4D\"><img src=\"http://a1.abc.com/er.gif\" height=\"8\" width=\"100%\"></td></tr> </table>  </td></tr> </table> </span>                            <br>','http://www.a.com/article_detail.cfm?articleid=36','-') 
```

这是一个[sqlfiddle](http://sqlfiddle.com/#!2/02327/1)。

我在哪里犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:24:32.173

如果您将它们从 PHP 直接扔到 MySQL 中，您将需要转义两次。第一个反斜杠将由 PHP 而非 MySQL 解释。

如果您有如下调用的函数（例如）：

```
function_called("this\' quote"); 
```

该函数实际上将接收“this' quote”，而不是反斜杠版本。

为了解决这个问题，有两种解决方案：

1.  依赖 PDO 或 MySQLi 提供的查询参数化（从长远来看也更安全）
2.  双逃的东西。这个\' 引用然后变为`This\\\' quote`. 在第一次通过时，\ 被解释为 \，\' 变为 '。在第二遍（MySQL）中，剩下的是 \'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:26:44.940

我认为您的插入查询错误

你可以使用`name=\"KonaFilter\"`而不是`name=KonaFilter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:29:00.343

我认为问题出在这一行 - “我们会起诉。
问题 1：？” 尝试将此行替换为“我们将起诉。
问题 1：？”

# iphone - 找到两个位置之间的角度

> ID：15681674
> 
> 赞同：0
> 
> 时间：2013-03-28T12:20:42.680
> 
> 标签：iphone, ios, cllocationmanager, angle

我有两个位置的纬度和经度。

我已经找出这两个位置之间的距离。

```
CLLocation *locA = [[CLLocation alloc] initWithLatitude:[player.strLatitude floatValue] longitude:[player.strLongitude floatValue]];
CLLocation *locB = [[CLLocation alloc] initWithLatitude:app.lat longitude:app.lag];
CLLocationDistance distance = [locB distanceFromLocation:locA];
NSLog(@"Distance%f",distance);
[locA release]; [locB release]; 
```

现在我想找出这两个位置之间的角度。

在中心有一个用户位置，我想在该 Cicle 中以适当的角度显示其他用户位置。

感谢帮助。

![在此处输入图像描述](../Images/876131caa02da13cc962aea6b0c0d93f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:24:14.203

也许这会对你有所帮助

```
- (CGFloat)angleBetweenLinesInRadians:(CGPoint)line1Start 
                         line1End:(CGPoint)line1End 
                       line2Start:(CGPoint)line2Start 
                         line2End:(CGPoint)line2End 
{
CGFloat a = line1End.x - line1Start.x;
CGFloat b = line1End.y - line1Start.y;
CGFloat c = line2End.x - line2Start.x;
CGFloat d = line2End.y - line2Start.y;

CGFloat line1Slope = (line1End.y - line1Start.y) / (line1End.x - line1Start.x);
CGFloat line2Slope = (line2End.y - line2Start.y) / (line2End.x - line2Start.x);

CGFloat degs = acosf(((a*c) + (b*d)) / ((sqrt(a*a + b*b)) * (sqrt(c*c + d*d))));

return (line2Slope > line1Slope) ? degs : -degs; 
```

}

# android - JSON解析器适用于模拟器但不适用于手机

> ID：15681678
> 
> 赞同：0
> 
> 时间：2013-03-28T12:21:01.647
> 
> 标签：android, json

我有一个要求，我的代码使用 json 解析器从 url 中提取信息。它在具有 android 2.2 部署的模拟器上运行良好。但是当我将它们部署在手机上时（galaxy y duos(2.3) 或 S2(4.0)），它不会给出空指针异常。您能否说明为什么会出现这种行为以及要在移动设备上进行哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:26:10.890

我遇到同样的问题，试试下面的代码

**您应该从 org.apache.http.conn.ssl.SSLSocketFactory 创建一个自定义类**

**MySSLSocketFactory.java**

```
public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
        super(truststore);

        TrustManager tm = new X509TrustManager() {
            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }

            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        };

        sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
        return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
        return sslContext.getSocketFactory().createSocket();
    }
} 
```

调用 HttpClient

```
HttpClient httpclient = getNewHttpClient();

StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

public HttpClient getNewHttpClient() {
        try {
            KeyStore trustStore = KeyStore.getInstance(KeyStore
                    .getDefaultType());
            trustStore.load(null, null);

            SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            HttpParams params = new BasicHttpParams();
            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory
                    .getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));

            ClientConnectionManager ccm = new ThreadSafeClientConnManager(
                    params, registry);

            return new DefaultHttpClient(ccm, params);
        } catch (Exception e) {
            return new DefaultHttpClient();
        }
    } 
```

# shell - 如何使用 Vim 更改现有文件的编码

> ID：15681681
> 
> 赞同：5
> 
> 时间：2013-03-28T12:21:15.817
> 
> 标签：shell, vim, encoding, character-encoding, batch-file

[这是http://subscene.com/subtitles/crank/farsi_persian/281992](http://subscene.com/subtitles/crank/farsi_persian/281992)上的字幕文件。如果你下载它，你会看到一些代码，如：

```
1
00:02:05,360 --> 00:02:07,430
åßÊæÑ¡ ãÇ åäæÒ ÏÇÑíã ãí ÑÎíã¿
ÎæÈå

2
00:02:07,600 --> 00:02:10,956
áíæÓ! ãÇ ÏÇÑíã í ÇÑ ãíäíã Èå ¿
æ Ïíå åí æÞÊ ãä Ñæ ÕÏÇ äãíÒäí 
```

我期望的是：

```
1
00:02:05,360 --> 00:02:07,430
هكتور، ما هنوز داريم مي چرخيم؟
خوبه

2
00:02:07,600 --> 00:02:10,956
چليوس! ما داريم چي کار ميکنيم بچه ؟
و ديگه هيچ وقت من رو صدا نميزني 
```

我通过将文件扩展名从 srt 更改为 txt，使用 chrome 浏览器打开它，将编码转换为阿拉伯窗口并通过选择所有文本重新保存文件内容来达到它。

我不知道如何使用 vim 或 shell 脚本来做到这一点。我试过`:write ++enc=utf-8 russian.txt`or `set encoding`or `set fileencoding`，但没有运气。

谢谢，莫娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:38:29.673

在**vim**中：

加载文件后，不要进行任何修改。那么你可以这样做：

```
:e ++enc=cp1256 
```

要保存为 utf-8，只需

```
:w ++enc=utf-8 
```

或者您可以在**shell**中执行此操作：

```
iconv -cf WINDOWS-1256 -t utf-8 problem.srt -o correct.srt 
```

# iphone - 滚动视图中的动态标签

> ID：15681688
> 
> 赞同：0
> 
> 时间：2013-03-28T12:21:40.723
> 
> 标签：iphone, objective-c, xcode, uiscrollview, uilabel

我想实现以下目标：

1.  我有两个数组

    ```
     NSMutableArray *languageArray=[[NSMutableArray alloc]initWithObjects:@"Chinese bla blub",@"Spanish",@"English",@"Arabic",@"Hindi",@"Bengali",@"Portuguese",@"Russian",@"Japanee",@"German",@"German",@"German",@"German",@"German",nil];

     NSMutableArray *languageArray2=[[NSMutableArray alloc]initWithObjects:@"Hier kommt nun was ganz langes, jetzt mach ich das noch länger, damit der scheiß auch wirklich funktioniert.",@"Spanish jetzt hist hier auch mehr drin das sieht ja super aus wieviel bekomme ich den hier rein ",@"English",@"Arabic",@"Hindi",@"Bengali",@"Portuguese",@"Russian ajkslasdöadfnaklsdmnklsd",@"Japanese",@"German",@"German",@"German hier steht jetzt was ganz langes drin",@"German",@"German",nil]; 
    ```

2.  我有一个`UIScrollView`

3.  如您所见，我`ObjectAtIndex:0`在两个数组中的内容和长度都不同

4.  我想为 My Array 中的每个 Object 设置一个标签，该标签用于 Array 1 屏幕的左侧站点，另一个从标签 1 的末尾开始。

喜欢这张照片。

[看到这个链接](https://docs.google.com/file/d/0B39VLJYVNyVgNEhRLTNjRkk1c1E/edit?usp=sharing)

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:26:23.463

您可以`UILable`使用我的这个方法设置动态高度：

```
-(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
[text retain];
[withFont retain];
CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

[text release];
[withFont release];

return suggestedSize.height;
} 
```

并像下面这样使用它：

```
UILabel *lblAddress = [[UILabel alloc]init];
[lblAddress setFrame:CGRectMake(110, 31, 200, 50)];        
lblAddress.text = @"your Text ";
lblAddress.lineBreakMode = UILineBreakModeWordWrap;
lblAddress.numberOfLines = 0;
lblAddress.font = [UIFont fontWithName:@"Helvetica" size:12];

lblAddress.frame = CGRectMake(lblAddress.frame.origin.x, lblAddress.frame.origin.y, 
                         200,[self calculateHeightOfTextFromWidth:lblAddress.text :lblAddress.font :200 :UILineBreakModeWordWrap] ); 

lblAddress.textColor = [UIColor darkGrayColor];

[self.view addSubview:lblAddress]; 
```

然后`UIScrollView's`像下面这样设置内容大小..

```
float fscrview = lblAddress.frame.origin.y + lblAddress.frame.size.height + 20;
yourScrollView.contentSize=CGSizeMake(320, fscrview); 
```

# sql - SQL 是否在日期范围内记录？

> ID：15681690
> 
> 赞同：0
> 
> 时间：2013-03-28T12:21:44.193
> 
> 标签：sql, sql-server, date, range

我的作业需要一个 sql 查询。查询必须返回正确的结果。

我的错误查询：

```
SELECT RZ.* FROM TBL_HOTEL_RESERVATION AS RZ
INNER JOIN TBL_HOTEL_ROOM AS ROOM
ON ROOM.ROOM_CODE <> RZ.ROOM_CODE 
WHERE 
(CONVERT(DATETIME,LEFT(RZ.ARRIVAL_TIME,12)) <= CONVERT(DATETIME,LEFT('3/12/2013',12))
AND
CONVERT(DATETIME,LEFT(RZ.LEAVE_TIME,12)) > CONVERT(DATETIME,LEFT('3/12/2013',12)))
OR
(CONVERT(DATETIME,LEFT(RZ.ARRIVAL_TIME,12)) < CONVERT(DATETIME,LEFT('3/14/2013',12))
AND
CONVERT(DATETIME,LEFT(RZ.LEAVE_TIME,12)) >= CONVERT(DATETIME,LEFT('3/14/2013',12))) 
```

例如

```
room no : 1040
first reservation: 12 march  2013 -15 march 2013
second reservation: 13 march 2013 - 16 march 2013 
```

我正在尝试，如果房间有这些日期范围的预订，则不应进行第二次预订。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:26:09.360

您正在使用太多功能。日期范围查询很简单

```
where YourDateField >= TheStartofYourDateRange
and YourDateField < TheDayAfterTheEndOfYourDateRange 
```

当你弄清楚你的任务时，请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T08:32:18.497

你试试这个希望它有帮助

```
WHERE 
CONVERT(DATETIME(RZ.ARRIVAL_TIME)) >= CONVERT(DATETIME('3/12/2013'))
AND
CONVERT(DATETIME(RZ.LEAVE_TIME)) <= CONVERT(DATETIME('3/14/2013')) 
```

# c++ - 返回 const 引用和 rvalue 引用之间的区别

> ID：15681691
> 
> 赞同：7
> 
> 时间：2013-03-28T12:21:45.320
> 
> 标签：c++, c++11, rvalue-reference

如果我没记错的话，我认为 const 引用和 rvalue 引用都可以绑定到 rvalue。返回前者的函数和返回后者的函数之间有什么实际区别吗？

编辑。我不能修改前者，但为什么我会对修改右值感兴趣？是否有意义？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-28T12:23:44.270

左值`const`引用可以绑定到任何东西。右值引用只能绑定到非右值`const`。

```
 non-const lvalue   const lvalue   non-const rvalue   const rvalue
const T&    yes                yes            yes                yes
T&&         no                 no             yes                no 
```

如您所见，它们非常不同。

此外，如果函数调用返回左值引用，则该表达式是左值，但如果函数调用返回对对象的右值引用，则该表达式是 xvalue。

> 如果结果类型是左值引用类型或对函数类型的右值引用，则函数调用是左值，如果结果类型是对对象类型的右值引用，则为 xvalue，否则为纯右值。

至于你什么时候想要修改一个右值——这正是移动语义的全部意义所在。考虑以下函数调用：

```
void func(std::string);

func(std::string("Hello")); 
```

该表达式`std::string("Hello")`是一个创建临时对象的右值。使用此右值初始化`std::string`参数时，它将选择采用右值引用的构造函数 -*移动构造函数*。然后，此构造函数从右值中窃取内容，这通常比进行完整复制要快得多。我们可以从中窃取，因为我们*知道*它是暂时的。

至于何时应该返回`const`左值引用或右值引用：

*   `const`当您想要授予读取“内部”对象（可能是类的成员）但不允许人们修改它的访问权限时，最常使用返回左值引用。

*   当您希望允许调用代码从“内部”对象（可能是类的成员）移动时，最常用（根本不常见）返回右值引用。因此，它们不是从临时返回的对象移动（就像按值返回时那样），而是从内部对象移动。

    这也可以通过非`const`左值引用来实现，但是他们必须明确地指出`std::move`它。

因此，您不太可能需要返回右值引用。

并不是那种[`std::forward`](http://en.cppreference.com/w/cpp/utility/forward)返回类型看起来像`T&&`. 但是，这是具有欺骗性的，因为它可能是也可能不是右值引用，具体取决于`T`. 请参阅[通用参考](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T13:05:17.070

> 返回前者的函数和返回后者的函数之间有什么实际区别吗？

这个问题似乎不正确。返回常量*左值引用*的函数提供对对象的访问仅用于*读取*，而返回*右值引用*的函数提供对*移动*的访问，这意味着调用者可以获取引用对象的内容并将其*移动*到不同的目的。它们在任何方面都没有可比性。

在这两种情况下，引用必须指向一个对象，其生命周期超出返回它的函数的末尾，否则调用者将在使用该引用时出现未定义的行为。

# function - d3.js：在鼠标点击时在 topojson 地图之间交换？

> ID：15681693
> 
> 赞同：0
> 
> 时间：2013-03-28T12:21:52.223
> 
> 标签：function, map, d3.js, mouseclick-event, geojson

我正在用 d3.js 制作一个 topojson 地图。我在一个大的 topojson 中有三个数据集，它们绘制不同的地图，我想在鼠标点击时在地图之间交换。

我想我可以通过向 mouseclick 事件添加一个函数并将结果放入`.datum()`运算符来实现这一点。

* * *

更新：这是工作代码，谢谢拉尔斯！

```
var mapPath = d3.geo.path().projection(mapProjection),
    jsondata,
    jsonobject,
    jsonobjectkeys,
    numberOfKeys,
    currentMap
    mapNumber;

d3.json("test.json", function(error, json){
      if (error) return console.warn(error);
      jsondata = json; //Store data in the variable "jsondata"
      jsonobject = json.objects;
      jsonobjectkeys = [];
      numberOfKeys = 0;

      //Get the maps(keys) from the jsonobject
      for(var k in jsonobject) jsonobjectkeys.push(k);

      //Find number of objects in jsondata
      for (objects in jsonobject){
        if((jsonobject).hasOwnProperty(objects)){
            numberOfKeys++;
        }
      }

mapNumber = jsonobjectkeys[0];

currentMap = eval("jsonobject." + (mapNumber));

//Map
var mapSVG = d3.select(".the_map")
                .append("svg")
                .attr("width", mapW)
                .attr("height", mapH);
    mapSVG.append("path")
            .datum(topojson.object(jsondata, currentMap))
            .attr("d", mapPath)
            .attr("width", mapW)
            .attr("height", mapH)
            .attr("class", "land");

//Timeline

//Create scale
var xScale = d3.scale.linear()
    .domain([0, (numberOfKeys-1)])
    .range([timelinePadding, timelineW - timelinePadding]);

//Axis
var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom")
    .ticks(numberOfKeys-1);

var timeline = d3.select("#timeline")
        .append("svg")
        .attr("width", timelineW)
        .attr("height", timelineH);
    timeline.append("g")
        .attr("class", "axis")
        .attr("transform", "translate(0, " + timelinePadding + ")")
        .call(xAxis);
    timeline.selectAll("circle")
       .data(jsonobjectkeys)
       .enter()
       .append("circle")
       .attr("width", timelineW)
       .attr("height", timelineH)
       .attr("cx", function(d,i){return xScale(i);})
       .attr("cy", timelinePadding)
       .attr("r", 7)
       .attr("class", "events")
       .style("cursor", "hand")
       .on("click", function(d){
            redrawMap(d);
       });

 function redrawMap(i){
            currentMap = eval("jsonobject." + (i));
    //Update
    mapSVG.selectAll("path")
    .datum(topojson.object(jsondata, currentMap))
    .attr("d", mapPath);
}

}); 
```

* * *

原始的，不工作的代码：

```
var mapPath = d3.geo.path().projection(mapProjection),
    jsondata,
    jsonobject,
    jsonobjectkeys,
    numberOfKeys;

d3.json("test.json", function(error, json){
      if (error) return console.warn(error);
      jsondata = json; //Store data in the variable "jsondata"
      jsonobject = json.objects;
      jsonobjectkeys = [];
      numberOfKeys = 0;

      //Get the maps(keys) from the jsonobject
      for(var k in jsonobject) jsonobjectkeys.push(k);

      //Find number of objects in jsondata
      for (objects in jsonobject){
        if((jsonobject).hasOwnProperty(objects)){
            numberOfKeys++;
        }
      }

var mapNumber = jsonobjectkeys[0];

var currentMap = eval("jsonobject." + (mapNumber));

currentMapData(mapNumber);

//Map
var mapSVG = d3.select(".the_map")
                .append("svg")
                .attr("width", mapW)
                .attr("height", mapH);
    mapSVG.append("path")
            .datum(topojson.object(jsondata, currentMap))
            .attr("d", mapPath)
            .attr("width", mapW)
            .attr("height", mapH)
            .attr("class", "land");

//Timeline

//Create scale
var xScale = d3.scale.linear()
    .domain([0, (numberOfKeys-1)])
    .range([timelinePadding, timelineW - timelinePadding]);

//Axis
var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom")
    .ticks(numberOfKeys-1);

var timeline = d3.select("#timeline")
        .append("svg")
        .attr("width", timelineW)
        .attr("height", timelineH);
    timeline.append("g")
        .attr("class", "axis")
        .attr("transform", "translate(0, " + timelinePadding + ")")
        .call(xAxis);
    timeline.selectAll("circle")
       .data(jsonobjectkeys)
       .enter()
       .append("circle")
       .attr("width", timelineW)
       .attr("height", timelineH)
       .attr("cx", function(d,i){return xScale(i);})
       .attr("cy", timelinePadding)
       .attr("r", 7)
       .attr("class", "events")
       .style("cursor", "hand")
       .on("click", function(d,i){
            currentMapData(i);
       });

 function currentMapData(i){
            mapNumber = jsonobjectkeys[i];
    console.log("showing this map: " + mapNumber);
    currentMap = eval("jsonobject." + (mapNumber));
    return currentMap;
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:14:38.790

看起来您将对象键绑定为数据，但希望在`currentMapData()`. 因此，您看到的错误是由您尝试使用键来索引数组引起的。您可以使用处理程序的第二个参数传递索引而不是键`onclick`，即替换

```
.on("click", function(d){
     currentMapData(d);
}); 
```

和

```
.on("click", function(d, i){
     currentMapData(i);
}); 
```

# c - 所有数组元素的比较 - C 算法

> ID：15681695
> 
> 赞同：5
> 
> 时间：2013-03-28T12:21:57.500
> 
> 标签：c, arrays, algorithm, matrix, comparison

我有一个矩阵*m* * *n*，对于每一行，我需要比较它们之间的所有元素。对于我找到的每一对，我都会调用一个函数来执行一些计算。

例子：

```
my_array -> {1, 2, 3, 4, 5, ...}

I take 1 and I have: (1,2)(1,3)(1,4)(1,5)
I take 2 and I have: (2,1)(2,3)(2,4)(2,5)
and so on 
```

使用 CI 写道：

```
for (i=0; i<array_length; i++) {
    for (k=0; k<array_length; k++) {
        if (i==k) continue;

           //Do something
        }
    }
} 
```

我想知道是否可以使用复杂度较低的算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T12:28:45.153

不，根据定义它是 O(n^2) [这里解释太长了，但相信我 (-: ]
但是你可以将迭代次数减少一半：

```
for (i=0; i<array_length; i++) {
    for (k=i+1; k<array_length; k++) { // <-- no need to check the values before "i"
           //Do something
           //If the order of i and k make a different then here you should:
           //'Do something' for (i,k) and 'Do something' for (k,i)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:36:58.337

您可能会做几件事，但哪些是可能的，哪些不取决于数组性质和您应用的公式。总体复杂性可能会保持不变甚至增加，即使计算可以更快，除非公式的复杂性依赖于它的参数，在这种情况下，复杂性的降低是可以实现的。

此外，如果 B 比 A 足够小，对于某个范围的 N，从 AO(N^a) 到*b > a （更高复杂度）的 BO(N^b) 仍然值得追求。*

没有特别的顺序：

*   如果矩阵有多个重复项，使用缓存功能会很方便：

    结果函数(arg1, arg2) { int i = index(arg1, arg2); // 根据值，它可能是 // 类似于 arg1*(MAX_ARG2+1) + arg2; if (!stored[i]) { // 存储和值被分配和初始化 // 在其他地方 - 或者在这个函数中使用 // 静态标志。存储[i] = 1; 值[i] = true_function(arg1, arg2); } 返回值[i]; }

    然后，您的内存开销与可用的不同值对的数量成正比。调用开销可能为 O(|arg1|*|arg2|)，但在某些情况下（例如`true_function()`昂贵），节省的费用将超过增加的复杂性。

    *   将公式切成小块（并非*每个*公式都可能）并将其表示为：

        F(x,y) = G(x) 运算 H(y) 运算 J(x,y)

    然后，您可以执行 O(max(M,N)) 循环预先计算 G[] 和 H[]。这也有 O(M+N) 的内存成本。仅当 F 和 J 之间的计算开销差异显着时才方便。或者你可以这样做：

    ```
    for (i in 0..N) {
        g = G(array[i]);
        for (j in 0..N) {
            if (i != j) {
                result = f(array[i], array[j], g);
            }
        }
    } 
    ```

    这将*一些*复杂性从 O(N^2) 降低到 O(N)。

    *   如果 G() 或 H() 可用于缓存（参数范围有限，函数昂贵），则前两种技术可以串联使用。

    *   找到将 F(a, b) 与 F(a+c, b+d) 联系起来的“法则”。然后，您可以更有效地运行缓存算法，重用相同的计算。这将一些复杂性从 O(N^2) 转移到 O(N) 甚至 O(log N)，因此虽然总体成本仍然是二次方，但它的增长要慢得多，并且 N 的更高界限变得实用。如果 F 本身的复杂度比 (a,b) 中的常数高，这也可能会降低这个顺序（作为一个极端的例子，假设 F 在 a 和/或 b 中是迭代的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T12:24:25.993

不，只有包含数组内容的知识以及优化算法的操作语义，才能降低计算复杂度。

# joomla - 如何路由 joomla

> ID：15681698
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:22:05.483
> 
> 标签：joomla, joomla2.5

我在 joomla 2.5 中有一个组件。

我有几个视图，其中一个我有一个组合框，当我点击它时，我想调用一个函数，我有这个

```
<form class="product_filter" action="<?php echo JURI::root()?>index.php/com_productos/buscarCategoria" method="POST">
    <input type="hidden" class="type" name="type" value="HEALTH_FOOD"/>
    <div class="select_wrapper small first">
        <?php echo JHTML::_('select.genericlist', $nameCombo,'name','onChange="this.form.submit()"','value','text'); ?>
    </div> 
```

我的组件的名称是 com_productos 所以在 producto.php 我有这个

```
class ProductosController extends JController
{
    function buscarCategoria(){
        $jinput = JFactory::getApplication()->input;
        $view = $jinput->getCmd('view', 'productos');
        JFactory::getApplication()->input->set('view', $view);
        $model = &$this->getModel($view);
        $view = &$this->getView($view, 'html');
        $view->setModel($model, true);
        $view->categoria();
    } 
```

但从不执行此功能。

任何的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:29:30.127

您应该在隐藏字段中传递任务（和控制器作为其中的一部分），如下所示：

```
<input type="hidden" name="task" value="productos.buscarCategoria"/> 
```

而你的动作可以简单的 index.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:25:15.303

最后我解决了问题

```
 <input type="hidden" name="controller" value="field" />
        <input type="hidden" name="option" value="com_productos" />
        <input type="hidden" name="task" value="buscarCategoria" />
    </form> 
```

# javascript - gsp、groovy、encodeURI 组件、内联 javascript

> ID：15681708
> 
> 赞同：0
> 
> 时间：2013-03-28T12:22:27.760
> 
> 标签：javascript, groovy, escaping, encode, gsp

我对每个循环都有问题

我有一个选择，你选择一个选项，按下一个按钮，选定的值通过 ajax 作为 encodeURIcomponent 发送到后端，答案更新这个 ul：

```
<g:each in="${items}">
<li class="${fieldName}_item" >${it}<span onclick="deleteItem('${fieldName}','${id}','${reloadForm}', '${it}');" class="editdropdel ${fieldName}_button"></span></li>
</g:each> 
```

只要`${it}`包含特殊字符，如“”“”，内联的东西就会被破坏，

有这样的可能吗？

```
onclick="deleteItem('${fieldName}','${id}','${reloadForm}', 'encodeURIcomponent(${it})');" 
```

我只是不明白

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:07:34.457

当然，这在`${it}`contains时会中断`"`，因为这实际上意味着您的 onclick 属性的值在第二个`"`发生的地方终止。

encodeURIComponent 在这里当然帮不了你，因为它“来得太晚了”——你不能调用 JavaScript 方法来修复损坏的 HTML 代码。

你想要的是`"`重写`&quot;`——这样它就不会结束属性值。对于在您的模板语言中使用哪种方法 - 请查阅文档。

# mysql - Mysql random 总是显示相同的模式

> ID：15681718
> 
> 赞同：0
> 
> 时间：2013-03-28T12:23:12.610
> 
> 标签：mysql

我有一个名为问题的表，字段是

```
ID -- QUESTION      --- OPTIONS-- CORRECT_OPTION
 1     some question     1,2,3  --    1
 2     some question     1,2,3  --    2
 3     some question     1,2,3  --    3
 4     some question     1,2,3  --    2 
```

这是我的查询

```
SELECT * FROM questions ORDER BY RAND() 
```

当我调用此查询时，随机函数运行良好，但是：- 当我在一段时间后提出问题时，rand() 函数正在重复我之前得到的相同模式！为什么会这样？rand() 有其他选择吗？或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:37:34.803

随机效果很好，你可能有`session`你输出结果的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:41:31.293

试试这个：

```
 SELECT *, RAND() AS rrank FROM questions ORDER BY rrank 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:41:39.503

我在这里试过：

`select * from questions order by rand();`

它对我有用： [http ://sqlfiddle.com/#!2/a9f6d/3](http://sqlfiddle.com/#!2/a9f6d/3)

请检查您的数据库结构或您的mysql版本

# php - 通过 JavaScript 改变值

> ID：15681720
> 
> 赞同：0
> 
> 时间：2013-03-28T12:23:19.403
> 
> 标签：php, javascript, forms, function, button

按钮的值应该在 1 或 0 中变化，但 echo $_POST["ordina"] 总是给出 1，我不明白，因为代码看起来是正确的。

```
<script> function order() {
if (document.ordination.ordina.value == "1") { 
    document.ordination.ordina.value = "0";
} else { 
    document.ordination.ordina.value = "1"; 
} }</script>

<?php echo $_POST["ordina"]; ?>

<form id="ordination" name="ordination" method="POST" action="">
<button type="submit" value="1" class="button" name="ordina" onclick="order();return true;">Ordina</button> 
```

alert(document.ordination.ordina.value) 总是给出 1。

有些可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:29:05.603

现在检查..

```
<script> function order() {
if (document.ordination.ordina.value == "1") {
     alert(document.ordination.ordina.value);  // this one shows 1
    document.ordination.ordina.value = "0";
} else { 
    alert(document.ordination.ordina.value);  // this one shows 0
    document.ordination.ordina.value = "1"; 
} }</script>

<?php echo $_POST['ordina'];?>

<form id="ordination" name="ordination" method="POST" action="">
<button type="submit" value="<?php if(isset($_POST['ordina'])){echo $_POST['ordina'];}else{ echo '1';}?>" class="button" name="ordina" id="ordina" onclick="order();return true;">Ordina</button> 
```

提交此表单后`<?php echo $_POST['ordina'];?>` 为 0... 并将按钮值设置为 0 并再次提交该值可以更改为 1。

因此它从 0 变为 1 变为 0 到 1，但您第一次加载此页面意味着警报仅显示 1..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:34:40.170

这总是返回 1，因为您的按钮是“提交”按钮，因此每次单击按钮时都会重新加载正文。

```
 <script>
    function order() {
    if (document.ordination.ordina.value == "1") { 
        document.ordination.ordina.value = "0";
    } else { 
        document.ordination.ordina.value = "1"; 
    }
    alert(document.ordination.ordina.value);
    }
    </script>

    <form id="ordination" name="ordination" method="POST" action="">
    <button type="button" value="1" class="button" name="ordina" id="ordina" onclick="order();return true;">Ordina</button>

    </form> 
```

我将“按钮”的“提交”类型更改为“按钮”，然后它就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:28:30.563

```
<script> function order() {
if ($("#ordina").val() == "1") { 
    $("#ordina").val(0);
} else { 
    $("#ordina").val(1); 
} }</script>

<?php echo $_POST["ordina"]; ?>

<form id="ordination" name="ordination" method="POST" action="">
<button type="submit" value="1" class="button" name="ordina" id="ordina" onclick="order();return true;">Ordina</button> 
```

# razor - 分页 - Webmatrix/razor

> ID：15681724
> 
> 赞同：4
> 
> 时间：2013-03-28T12:23:26.790
> 
> 标签：razor, twitter-bootstrap, webmatrix

我使用 Mike Brind 的指南来设置分页，这是一种享受。我还使用引导程序在页面底部创建了一个更好看的页面导航。你能告诉我我需要做什么才能让 NEXT 和 PREV 按钮工作吗？我想它类似于 i+1 和 i-1，但我还没有弄清楚。这是我的代码：

编辑代码：

```
//Paging

var pageSize = 6; 
var totalPages = 0; 
var count = 0;
var page = UrlData[0].IsInt() ? UrlData[0].AsInt() : 1;
var offset = (page -1) * pageSize;

var db = Database.Open("StayInFlorida");
var sql = "Select Count(*) From PropertyInfo ";
count = (int)db.QueryValue(sql);
totalPages = count/pageSize;        
if(count % pageSize > 0){
    totalPages += 1;
}
sql = "SELECT PropertyName, PropertyID, ResortName, NumBedrooms, NumBathrooms, NumSleeps, BriefDescription, PrimaryImage FROM PropertyInfo "+
           "Order By PropertyID OFFSET @0 ROWS FETCH NEXT @1 ROWS  ONLY;";

var result = db.Query(sql, offset, pageSize);

<!--Pagination Start-->
<div class="pagination pagination-centered">
<ul>  
@{   
    if(page > 1){     
    <li><a href="/portfolio1/@(page-1)">Prev</a></li>
    }
    for (var i = 1; i < totalPages + 1; i++){
    <li><a href="/portfolio1/@i">@i</a></li>
    }
    if(page > 1){
    <li><a href="/portfolio1/@(page + 1)">Next</a></li>
    }
}
</ul>
</div>
<br>
<!--Pagination Finish--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T13:09:28.487

如果有下一页或上一页要转到，您可能只想显示下一页或上一页按钮？如果是这样，并假设您正在跟踪名为 page 的变量中的当前页码，您可以这样做：

```
<!--Pagination Start-->
<div class="pagination pagination-large">
<ul>
   @if(page > 1){
       <li><a href="/portfolio1/@(page-1)">Prev</a></li>
   }
   for (var i = 1; i < totalPages + 1; i++){
       <li><a href="/portfolio1/@i">@i</a></li>
   }
   if(page < totalPages){
       <li><a href="/portfolio1/@(page + 1)">Next</a></li>
   }
</ul>
</div>
<br>
<!--Pagination Finish--> 
```

# neo4j - 努力在 Neo4jClient.NET 中执行索引密码查询

> ID：15681725
> 
> 赞同：0
> 
> 时间：2013-03-28T12:23:29.893
> 
> 标签：neo4j, cypher, neo4jclient

我尝试使用适用于 .NET 的 Neo4jClient 在 Neo4j 中对我的 NameIndex 执行查询，但出现此错误：

```
{"Received an unexpected HTTP status when executing the request.\r\n\r\nThe response status was: 500 Internal Server Error\r\n\r\nThe raw response body was: {\"exception\":\"NullPointerException\",\"stacktrace\":[\"org.apache.lucene.util.SimpleStringInterner.intern(SimpleStringInterner.java:54)\",\"org.apache.lucene.util.StringHelper.intern(StringHelper.java:39)\",\"org.apache.lucene.index.Term.<init>(Term.java:38)\",\"org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:643)\",\"org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1421)\",\"org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1309)\",\"org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1237)\",\"org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1226)\",\"org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)\",\"org.neo4j.index.impl.lucene.IndexType.query(IndexType.java:300)\",\"org.neo4j.index.impl.lucene.LuceneIndex.query(LuceneIndex.java:227)\",\"org.neo4j.server.rest.web.DatabaseActions.getIndexedNodesByQuery(DatabaseActions.java:977)\",\"org.neo4j.server.rest.web.DatabaseActions.getIndexedNodesByQuery(DatabaseActions.java:960)\",\"org.neo4j.server.rest.web.RestfulGraphDatabase.getIndexedNodesByQuery(RestfulGraphDatabase.java:692)\",\"java.lang.reflect.Method.invoke(Unknown Source)\"]}"} 
```

我的方法如下所示：

```
public IEnumerable GraphGetNodeByName(string NodeName)
        {
            GraphOperationsLogger.Trace("Now entering GraphGetNodeByName() method");

            IEnumerable QueryResult = null;

                GraphOperationsLogger.Trace("Now performing the query");
                var query = client_connection.QueryIndex<GraphNode>("NameIndex", IndexFor.Node,
                //Here I want to pass in the NodeName into the query
                //@"Start n = node:NameIndex(Name = '"+ NodeName +"') return n;");
                //Here I am hard-coding the NodeName
                    @"Start n = node:NameIndex(Name = ""Mike"") return n;");
                QueryResult = query.ToList();

            return QueryResult;
        } 
```

理想情况下，我想将 NodeName 传递到查询中，但这不起作用，因此我尝试对其进行硬编码，但这也不起作用。两种情况都会产生相同的错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:05:17.323

您正在调用的方法`IGraphClient.QueryIndex`不是 Cypher 方法。[它是http://docs.neo4j.org/chunked/milestone/rest-api-indexes.html#rest-api-find-node-by-query](http://docs.neo4j.org/chunked/milestone/rest-api-indexes.html#rest-api-find-node-by-query)的包装。这是一个较旧的 API，在 Cypher 存在之前。

不过，您已经完成了一半，因为您的代码注释包括 Cypher 查询：

```
Start n = node:NameIndex(Name = "Mike")
return n; 
```

所以，让我们把它翻译成 C#：

```
client
    .Cypher
    .Start(new CypherStartBitWithNodeIndexLookup("n", "NameIndex", "Name", "Mike"))
    .Return<Node<Person>>("n"); 
```

始终从`IGraphClient.Cypher`or开始您的 Cypher 查询`NodeReference.StartCypher`（这只是前者的快捷方式）。

您的方法还有一些其他问题：

1.  你返回一个 raw `IEnumerable`。里边啥啊？你应该返回`IEnumerable<T>`。
2.  你在打电话`query.ToList()`。如果这甚至可以编译，我会感到惊讶。您想调用`ToList`结果以便命中枚举。
3.  在 C# 中，您的局部变量应位于`camelCase`not `PascalCase`. 也就是说，`queryResult`而不是`QueryResults`.

结合所有这些要点，您的方法应该是：

```
public IEnumerable<Person> GetPeopleByName(string name)
{
    return graphClient
        .Cypher
        .Start(new CypherStartBitWithNodeIndexLookup("n", "NameIndex", "Name", "Mike"))
        .Return<Node<Person>>("n")
        .Results
        .ToList();
} 
```

# c# - 服务级别的 WCF REST 异常处理不是全局的

> ID：15681726
> 
> 赞同：0
> 
> 时间：2013-03-28T12:23:37.137
> 
> 标签：c#, wcf, wcf-rest

我正在开发 WCF 服务，它以 RESTful 格式公开其功能。每个服务都遵循 SOA 格式，我需要在服务部署方式上具有灵活性。因此，当涉及到异常处理时，我希望它们在服务级别的单点处理，而不是在全局级别处理。我想避免为每个服务 API 编写 try/catch 块。是否可以在特定于每个服务的一个公共位置处理异常。换句话说，是否有任何方法可以连接到 WCF 调用堆栈中，以处理所有异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:16:07.520

我已经使用自定义行为扩展来做这种事情。基本上，您创建一个实现 IErrorHandler 的新类，然后将代码放入您的代码中，以按照您的意愿处理错误以及调度级别（IServiceBehavior、IEndpointBehavior、IContractBehavior 等）。将错误处理程序添加到服务行为并设置好。

这是我在网上找到的一个示例，可用作起点（您也可以在配置文件中设置行为）： [http ://wcfpro.wordpress.com/2010/11/18/wcf-extensions-error-handler/](http://wcfpro.wordpress.com/2010/11/18/wcf-extensions-error-handler/)

# c# - C#将锁对象传递给通用缓存访问方法

> ID：15681728
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:23:45.873
> 
> 标签：c#, generics, static, locking, scope

我在一个接受三个参数的单例类中有一个通用的缓存访问方法。

1.  一个委托（没有参数的 void 返回类型）
2.  缓存标签
3.  旨在停止并发缓存设置的锁定对象

见下文：

```
protected delegate T GetDataMethod<T>();

protected override D GetCachedData<D>(GetDataMethod<D> dataAccessMethod, string cachelabel, object lockObject)
    {

        if (MemoryCache.Default[cachelabel] == null)
        {
            lock (lockObject)
            {
                //Inside the lock, test once again in case the cache object has been set already
                if (MemoryCache.Default[cachelabel] == null)
                {
                    umbraco.BusinessLogic.Log.Add(umbraco.BusinessLogic.LogTypes.Debug, -10, cachelabel + " inside lock, cache empty");

                    D data = default(D);

                        try
                        {
                            data = dataAccessMethod();
                        }
                        catch (Exception ex)
                        {

                          //Logging                               
                        }

                    MemoryCache.Default.Add(cachelabel, data, GetCacheItemPolicy());
                }
            }
        }

        return (D)MemoryCache.Default[cachelabel];
    } 
```

对于每个缓存设置为静态只读对象的数据集合，我都有单独的锁定对象。但是，通过将它们传递给方法，它们的范围仅存在于方法中，因此锁变得无关紧要。

我不能使用“ref”，因为你不能通过 ref 传递静态对象，因为周围的类是一个单例，如果我使锁定对象非静态有关系吗？如果可以，任何人都可以推荐一种更好的方法来处理它而不使用基于 cacheLabel 的 switch 语句吗？

编辑：为了清楚起见，方法足迹：

```
 protected override D GetCachedData<D>(GetDataMethod<D> dataAccessMethod, string cachelabel, ref object lockObject) 
```

由于锁定对象是静态的，因此不起作用。我想问题真的是 - 在单例中，锁对象是否需要是静态的才能线程安全？（是的，这是一个线程安全的单例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:25:34.297

我认为您错过了`ref`关键字的重点-您不需要它。您正在传递一个`object`已经是引用类型的。添加`ref`关键字将使其成为对引用的引用。

# io - Fortran 将我的输出添加到星号 - 为什么？

> ID：15681735
> 
> 赞同：12
> 
> 时间：2013-03-28T12:24:05.337
> 
> 标签：io, formatting, fortran

我很难理解 Fortran 中的格式化语句。

在不格式化我的输出的情况下，这就是我所做的（在循环内，所以这种情况发生了几次）：

```
write(*,*) t*1E9 
```

`t`这里是`real*8`。输出正是我所期望的——增量为 0.1，带有一些舍入误差：

```
0.0000000000000000     
0.10000000000000001     
0.20000000000000001     
0.29999999999999999     
0.40000000000000002     
0.50000000000000000     
0.59999999999999998     
0.69999999999999996     
0.79999999999999993     
0.89999999999999991     
0.99999999999999989 
```

现在，我尝试添加格式语句：

```
write(*, '(F1.2)') t*1E9 
```

并且（其他一切都相同）相反，我的输出中只有星号：

```
**
**
(etc...) 
```

我试图了解这应该如何工作，但我无法弄清楚为什么会这样。我尝试了具有更多数字空间的格式（`F15.15`每行只给我更多的星号），我尝试将格式语句移动到它自己的标记行...我似乎无法获得我想要的输出像。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T15:13:11.410

Fortran 格式语句定义为：

`Fw.d`，其中 w 是总共要使用的字符数，d 是小数点后的字符数。在这里，您告诉它您需要一个浮点数，总共 1 个字符宽，小数点后 2 个字符，这显然是不正确的。因此，例如，要获得一个总共 4 个字符、小数点后 3 位的浮点数，您可以这样写：

```
write(*, '(F4.3)') t*1E9 
```

见[http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap05/format.html](http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap05/format.html)

另外，我应该提到星号表示该数字不能以所述格式显示。

编辑：

在下面添加来自乔治的评论：

“对于 E 格式，字段宽度必须至少比小数位数多 7，例如 E15.8。四个用于指数，两个用于前导 0。一个用于可能的 '-'。我通常会多加一个空格所以数字不会一起运行，E16.8"

# ios - NSURLConnection scheduleInRunLoop '泄漏'

> ID：15681739
> 
> 赞同：0
> 
> 时间：2013-03-28T12:24:11.407
> 
> 标签：ios, memory-leaks, automatic-ref-counting, nsurlconnection, nsurlrequest

我正在使用 NSURLConnection 异步发布表单数据。使用工具我可以看到启动连接时内存使用量增加，但是一旦连接完成，内存使用量就会下降到高于之前基线的水平。我将此称为“泄漏”，因为在连接开始/结束后大约 60 秒，内存被释放并且图形回落到原始基线。

为什么这段记忆会被保留到这个时候？我怎样才能立即释放它？

```
- (id)initWithPostURL:(NSURL *)url content:(NSData *)content completionBlock:(void (^)(NSData *data))completionBlock boundary:(NSString *)boundary;
{
    self = [super init];
    if (self) {        
        NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30.0f];
        [urlRequest setHTTPMethod:@"POST"];
        [urlRequest setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-type"];
        [urlRequest setValue:[NSString stringWithFormat:@"%d", content.length] forHTTPHeaderField:@"Content-length"];
        [urlRequest setHTTPBody:content];

        _urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:NO];
        [_urlConnection scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];
        [_urlConnection start];
        _data = [NSMutableData data];
        _dataSemaphore = NULL;
        _completionBlock = completionBlock;
    }
    return self;
} 
```

# php - 未在 xpath 中获取数组值

> ID：15681749
> 
> 赞同：1
> 
> 时间：2013-03-28T12:24:30.780
> 
> 标签：php, xml, arrays, xpath

**这是我的 reg.xml：**

```
<childrens>
<child_4 entity_id="4" value="Activities" parent_id="2">
    <child_10066 entity_id="10066" value="Physical1" parent_id="4">
    <child_10067 entity_id="10067" value="Cricket" parent_id="10066">
        <child_10068 entity_id="10068" value="One Day" parent_id="10067"/>
    </child_10067>
    </child_10066>
</child_4>
<child_4331 entity_id="4331" value="Region" parent_id="2">
    <child_5069 entity_id="5069" value="Irungattukottai" parent_id="4331"/>
</child_4331>
</childrens> 
```

**这是我的`product.xml`文件：**

```
<products>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1"/>
      <region_timezone value="1"/>
      <registrationstatus value="2"/>
      <eventstatus value="2"/>
      <dist_activity value="5"/>
      <dist_activity value="10068"/>
      <dist_activity value="10070"/>
      <dist_region value="5069"/>
      <dist_region value="5069"/>
      <dist_region value="5069"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
      <tab_name value="test2"/>
      <region_timezone value="1"/>
      <registrationstatus value="2"/>
      <eventstatus value="2"/>
      <dist_activity value="5"/>
      <dist_activity value="10069"/>
      <dist_activity value="10070"/>
      <dist_region value="4457"/>
      <dist_region value="7140"/>
      <dist_region value="5069"/>
   </tab_id>
  </product_id>
</products> 
```

**这是我的尝试：**

```
<?php
 $abc= $_POST['name'];
 list($first,$second) = explode('in',$abc);

 $text1[]=$first;
 $text2[]=$second;
 foreach($text1 as $event)
{
$event;
}
foreach($text2 as $region1)
{
$region1;
}
$r = file_get_contents('reg.xml');
$p = file_get_contents('product.xml');

$region = simplexml_load_string($r);
$product = simplexml_load_string($p);

list($entity) = $region->xpath("//*[@value='$event']/@entity_id");
$entity=(string)$entity;
echo "event:- $event, Region:- $region1, entity:- $entity";
 ?> 
```

**这是我的 HTML 文件：**

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script>
    <script>
    $(function(){
$("#filter").click(function(){
    var name = $('#select').val();
    alert(name);
    $.ajax({
        type: "POST",
        data: {"name":name} ,
        url: "array.php",
        async: false,       
        success: function(result) { 
        alert(result);
        $("#result").text(result);
        } 
    });   

    });
});
    </script>
</head>
<body>
    <input type="text" id="select">
    <input  type="button" id="filter" name="button" value="Search">
    <div id="result">
    </div>
</body>
</html> 
```

**我在文本框中输入了这个值：** `One Day in Irungattukottai`
我试过这段代码，但它不起作用，它没有给我`$entity`.
如果我尝试手动设置`$event`eg:- `$event`= `"One Day"`value 然后工作
所以帮我解决这个问题，我认为我的`foreach`. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:47:29.117

foreach 代码看起来很奇怪——不知道你想在那里做什么。但我认为您遇到的实际问题是explode（），因为它不会查看“in”一词两侧的空格，因此您的One Day 最后会出现一个空格，而Irungattukottai 会开头有空格。

您可以通过在explode() 中包含空格或在它产生的两个字符串上使用trim() 来解决这个问题。

# rrdtool - 了解 rrdtool 中的打印选项

> ID：15681751
> 
> 赞同：1
> 
> 时间：2013-03-28T12:24:32.437
> 
> 标签：rrdtool

我不需要创建图表，而是需要简单地输出一个数字，该数字是提供的某个日期范围的平均值、最大值或最小值。我使用以下代码取得了很好的成功：

```
rrdtool graph a.png --start=1325484000 --end=1364472365 DEF:power=/data1/bpoll/rrd/ws3/pdu/pdu316/a.rrd:ct12:AVERAGE 'PRINT:power:AVERAGE:%2.1lf' 
```

但是，查看文档，它说不`CF`推荐使用（在这种情况下为 AVERAGE）。然而，我对新格式完全迷失了。至少我似乎无法绕过它。如果我省略`CF`，它会出错。我到底哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T03:14:22.690

```
PRINT:power:AVERAGE:%2.1lf 
```

这是“旧式”语法，您将数据集和合并函数传递给`PRINT`指令。

使用新格式，您可以使用 a `VDEF`，因此不需要函数，因为 a`VDEF`是单值的。但是，您需要`VDEF`事先定义。

这是新格式：

```
VDEF:avgpower:power,AVERAGE
PRINT:avgpower:%2.1lf 
```

在此示例中，我们定义了一个新`VDEF`值`avgpower`并打印它。它与之前的旧语法代码具有相同的效果，但在新的语法中，这允许我们还可以在`PRINT`语句中添加修饰符，例如`:strftime`打印最大值的时间点等。

# php - 如何转换 使用 preg_replace php 到 [div style="xyz"]

> ID：15681752
> 
> 赞同：-3
> 
> 时间：2013-03-28T12:24:43.110
> 
> 标签：php, preg-replace, bbcode

我有一个 html 字符串

```
$html = '<div style="background-color:#000;border:1px solid #000">
<b>Some Text</b></div><span>I have amount > 1000 USD</span>'; 
```

我想把它转换成这个

```
$html = '[div style="background-color:#000;border:1px solid #000"]
[b]Some Text[/b][/div][span]I have amount > 1000 USD[/span]'; 
```

我在谷歌上搜索了很多以获取一些将 html 转换为 bbcode 的 php 脚本，但找不到。我不知道正则表达式。如果你给我一些想法，用示例代码，它会给我启动。

如果可以用其他一些php函数来完成，请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:27:46.760

用这个

```
$html = '<div style="background-color:#000;border:1px solid #000">
<b>Some Text</b></div><span>This is an other text</span>';

echo str_replace(array("<",">"),array("[","]"),$html); 
```

[http://codepad.org/kjKVCzjw](http://codepad.org/kjKVCzjw)

**输出**

```
[div style="background-color:#000;border:1px solid #000"]
[b]Some Text[/b][/div][span]This is an other text[/span] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:28:04.940

你可以使用`str_replace`：

```
$html = str_replace(array('<', '>'), array('[', ']'), $html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:28:08.133

您所需要的只是`<`用`[`和`>`替换`]`。只需使用`str_replace()`.

```
$newString = str_replace( "<", "[", str_replace(">", "]", $StringInput) ); 
```

# jquery - 在 Iphone Safari 浏览器上，在文本框中输入时整个页面会跳转？

> ID：15681758
> 
> 赞同：0
> 
> 时间：2013-03-28T12:24:59.510
> 
> 标签：jquery, iphone, ios, css

当我第一次关注文本框时，页面会跳起来。

然后，当我按键打字时，页面不断地上下跳动。

它在 Android 浏览器中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:49:20.193

尝试将此添加到 HTML 的 HEAD

```
<meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

# c# - C# .NET 4 任务可以在 UI 线程上提供通知吗？

> ID：15681759
> 
> 赞同：0
> 
> 时间：2013-03-28T12:25:00.830
> 
> 标签：c#, .net, parallel-processing

我在我的应用程序中使用任务类。这不是 WPF 应用程序！问题是是否有可能从 UI 线程上的 Task 主体调用函数，如下所示：

```
var task = new Task(() => DoSmth(1));
task.Start();

public void DoSmth(int arg)
    {
        //smth
        CallNotifFuncOnUIThread(() => Notify(1));
        //smth ELSE
        CallNotifFuncOnUIThread(() => Notify(2));//notify AGAIN
        //smth ELSE
    }

public void Notify(int arg)
    {
        progressBar1.Value = arg;
    } 
```

或者也许这个问题还有其他解决方案？我知道 BackgroundWorker 类，但是 Tasks 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:27:02.927

您可以随时在 DoSth() 中调用其他方法

```
Dispatcher.Invoke(...);
Dispatcher.BeginInvoke(...); 
```

您也可以`Task.ContinueWith(...)`在任务完成处理后用户做某事......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:28:55.407

如果你有一个任务，你可以通过提供正确的调度程序在 gui 线程上启动它：

```
Task.Factory.StartNew(() => DoSomethingOnGUI(), TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:06:14.793

UI 通常是 STA 参见： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680112 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680112(v=vs.85).aspx)

因此，为了从 UI 中的任何 UI 线程执行某些操作，您需要以某种方式将 msg 注入线程，例如 htis winform 示例：

[http://weblogs.asp.net/justin_rogers/articles/126345.aspx](http://weblogs.asp.net/justin_rogers/articles/126345.aspx)

您正在使用的 waterever UI 您将需要一个类似的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:45:01.980

有了windows Form和progressBar1组件，就可以使用TPL`IProgress`接口`Task`。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Progress<int> progress = new Progress<int>();
        var task = Alg(progress);
        progress.ProgressChanged += (s, i) => { UpdateProgress(i); };
        task.Start();
    }

    public void Notify(int arg)
    {
        progressBar1.Value = arg;
    }

    public static Task Alg(IProgress<int> progress)
    {
        Task t = new Task
        (
            () =>
            {
                for (int i = 0; i < 100; i++)
                {
                    Thread.Sleep(100);
                    ((IProgress<int>)progress).Report(i);
                }
            }
        );
        return t;
    } 
```

# java - Android进度条填充

> ID：15681760
> 
> 赞同：1
> 
> 时间：2013-03-28T12:25:03.090
> 
> 标签：java, android, progress-bar, gradient, radial

我想要一个圆形的加载条。我想用一个整数填充它我试过这个

```
 <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"

        android:indeterminateDrawable="@xml/progress" >
    </ProgressBar> 
```

进度.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
android:pivotX="50%"
android:pivotY="50%"
android:toDegrees="360" >

<shape
    android:innerRadiusRatio="3"
    android:shape="ring"
    android:thicknessRatio="8"
    android:useLevel="false" >
    <size
        android:height="48dip"
        android:width="48dip" />

    <gradient

        android:centerY="0.50"
        android:endColor="#000000"
        android:startColor="#ffffff"
        android:gradientRadius="20"
        android:type="radial"
        android:useLevel="false" />
</shape> 
```

在我的活动中

```
 protected void onPostExecute(Void result) {

            bar.setProgress(50);
            bar.setMax(100);
            bar.setVisibility(View.VISIBLE);
    } 
```

圆圈保持黑色。如果我将渐变类型设置为扫描，则圆圈将填充黑色起始色和白色结束色......并且它会不断重复。

但我希望圆圈被填充一次......所以它从黑色开始填充白色；只有1次。。

这可能吗？

我想达到这个结果：

[http://ultimateprogrammingtutorials.blogspot.be/2013/02/how-to-draw-circular-progress-bar-in.html](http://ultimateprogrammingtutorials.blogspot.be/2013/02/how-to-draw-circular-progress-bar-in.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:07:48.480

[这](https://github.com/passsy/android-HoloCircularProgressBar)是 CircularProgressBar 的一个很好的例子，根据您的要求希望这可以帮助您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:35:46.217

如何执行此操作的示例：
[https ://github.com/Todd-Davies/ProgressWheel](https://github.com/Todd-Davies/ProgressWheel)

stackoverflow上有很多类似的问题：

1.  [我怎样才能建立一个进步圈](https://stackoverflow.com/questions/12875678/how-can-i-make-progress-circle)
2.  [圆形进度条](https://stackoverflow.com/questions/15222239/circle-progressbar)
3.  [ProgressBar/ProgressDialog 的自定义 Drawable](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)
4.  [如何在 Android 中制作圆形自定义进度条](https://stackoverflow.com/questions/14688117/how-to-make-circle-custom-progress-bar-in-android)

# javascript - 将变量作为属性传递给 HTML 按钮

> ID：15681764
> 
> 赞同：0
> 
> 时间：2013-03-28T12:25:16.800
> 
> 标签：javascript, html, button

假设我在 Javascript 中定义了一个变量：var user_name = "John Doe"。现在我想要下面的按钮来显示这个变量的内容来代替“user_name”：

```
 <input class="button" value= "user_name" /> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:26:34.277

你可以简单地这样做：

```
document.getElementById('myButton').value = 'John Doe' 
```

不过，您必须`id`在输入中添加一个：

```
<input id="myButton" class="button" value= "user_name" /> 
```

**[小提琴](http://jsfiddle.net/qxVCy/)**

# ios - 如何将手势从 UITextView 传递到 UICollectionViewCell

> ID：15681765
> 
> 赞同：2
> 
> 时间：2013-03-28T12:25:17.747
> 
> 标签：ios, uitextview, uicollectionviewcell

我有一个带有 UICollectionViewCells 的水平滚动 UICollectionView，其中包含一个 UITextView。有没有办法将 textview 上的手势传递给单元格，以便调用 didSelectItemAtIndexPath ？我尝试将 UITextView 子类化并将 touchesbegin/end 传递给单元格，但这没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T13:08:39.510

您可以使视图非交互式，这将导致触摸通过：

```
textView.userInteractionEnabled = NO; 
```

如果你需要它是交互式的，你可以试试这个：

```
textView.editable = NO;
UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped)];
[textView addGestureRecognizer:tap]; 
```

...然后将此函数添加到您的`UICollectionViewCell`子类中：

```
-(void) tapped {
    UICollectionView *collectionView = (UICollectionView*)self.superview;
    NSIndexPath *indexPath = [collectionView indexPathForCell:self];
   [collectionView.delegate collectionView:collectionView didSelectItemAtIndexPath:indexPath];
} 
```

虽然我没有测试过...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:31:44.200

好吧，如果你的单元格是文本视图的超级视图，你可以在`UITextViewDelegate`方法中实现类似的东西`textViewDidBeginEditing:`。

```
- (void)textViewDidBeginEditing:(UITextView *)textView {
    NSIndexPath *indexPath = [self.collectionView indexPathForCell:(UICollectionViewCell *)textView.superview];
    [self.collectionView selectItemAtIndexPath:indexPath animated:YES scrollPosition:UICollectionViewScrollPositionTop];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T04:20:48.507

这似乎在 iOS6.x 中不起作用： UICollectionViewCell 中的所有视图似乎都嵌入在作为单元格的第一个子项的 UIView 中。为了获得 UITextView 所在的实际单元格，您需要再次取消引用。换句话说，顺序是（从下到上）：

UITextView->enclosureUIView->UICollectionViewCell

# scala - 在 PlayFramework 2.1 中将 Json 日期和时间字符串解析为带有日期的案例类

> ID：15681769
> 
> 赞同：0
> 
> 时间：2013-03-28T12:25:23.143
> 
> 标签：scala, playframework-2.1

在 PlayFramework 2.1 中，我想读取一个 json 并创建一个案例类。结构不同，所以我不能使用默认阅读器。我必须写什么才能将两个字符串合并到 java.util.Date？

```
import play.api.libs.functional.syntax._
import play.api.libs.json._
import play.api.libs.json.util._
import play.api.libs.json.Reads._

case class Person(name: String, lastSeen: Date)
val jsonString = Json.parse("""{name: "Joe", day: "2013-03-28", time: "09:35"}""")

val personLastSeen: Reads[Person] = (
  (__ \ "name").read[String] ~
  // (__ \ "day").read[String] (__ \ "time").read[String] // @TODO
)(Person) 
```

我应该交换这个阅读吗？我试过`val dateStructure = new SimpleDateFormat("yyyy-MM-dd HH:mm")`了，但`dateStructure.parse(...)`我想我需要一个`Reads[Date]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:58:58.087

我认为你不能使用 Reads[T] 组合器来做到这一点，但你可以定义一个特征 Reads 及其方法`def read(json: JsValue): JsResult[T]`

```
import play.api.libs.functional.syntax._
import play.api.libs.json._
import play.api.libs.json.util._
import play.api.libs.json.Reads._
import java.util.Date
import java.text.SimpleDateFormat

case class Person(name: String, lastSeen: Date) {      
}

object Person {
  implicit val personLastSeen = new Reads[Person] {
    val sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm")
    def reads(js: JsValue): JsResult[Person] = {
      JsSuccess(Person(
        (js \ "name").as[String],
        sdf.parse((js \ "day").as[String] + " " + (js \ "time").as[Float])))
    }
  }
}
object Test extends App {
    val jsonString = Json.parse("""{name: "Joe", day: "2013-03-28", time: "09:35"}""")
} 
```

# sql - sql - 在设置日期之前获取最大值（日期）

> ID：15681770
> 
> 赞同：0
> 
> 时间：2013-03-28T12:25:25.753
> 
> 标签：sql

我有结果表

```
2013-01-28 00:00:00 0001101 669.170000
2013-01-29 00:00:00 0001101 669.170000
2013-01-30 00:00:00 0001101 669.170000
2013-01-31 00:00:00 0001101 669.170000
2013-02-04 00:00:00 0001101 669.170000
2013-02-05 00:00:00 0001101 669.170000
2013-02-06 00:00:00 0001101 669.170000 
```

如果我有一个不在此结果集中的日期，我需要在第二列之前获取第一个日期，以返回第三列

例如，对于日期 2013-02-03，我没有结果，所以我需要先从 2013-01-31 开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:30:12.723

假设您的上述结果集在 tbl1 中，并且您想要结果并用于 SQL Server dbms

```
SELECT TOP 1 *
FROM tbl1
WHERE  Date <= '2013-02-03' 
ORDER BY Date DESC 
```

# android - 在Android中点击设置壁纸时的回调

> ID：15681774
> 
> 赞同：5
> 
> 时间：2013-03-28T12:25:40.107
> 
> 标签：android, live-wallpaper

谁能告诉我在动态壁纸中单击 setwallpaper 时如何获取回调。当用户点击设置壁纸时，我想做一些事情......

我已经尝试了很多事情 bt cudnt 让它工作..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T12:19:06.893

如果您想在墙纸应用程序中执行某些操作，可以使用 onCreate() 或 onResume() 函数。

# android - Android Webview：检测页面何时呈现

> ID：15681795
> 
> 赞同：1
> 
> 时间：2013-03-28T12:26:26.387
> 
> 标签：android, webview

我正在编写一个使用大量 webviews 的高级 Android 应用程序。问题是，当页面加载但可能尚未呈现时，会触发 webview 的 onPageFinished 事件。

我相信有一个 onNewPicture 但自第 12 版以来已被删除。

有没有人遇到过同样的问题，我的微调器在页面实际呈现前大约 3-4 秒基本上消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T09:56:26.607

对于长文档，WebView 的渲染可能需要很长时间，实际上[onNewPicture](http://developer.android.com/reference/android/webkit/WebView.PictureListener.html)自 API 12 (Honeycomb 3.1) 以来已被弃用，并且自 API 级别 18 (Jellybean 4.3) 以来返回空图片。

我已经测试了 API 级别 17 (JB 4.2)，它仍然可以正常工作。如果您不需要实际的`Picture`详细信息，可能在 API 18 中也可以正常工作。

请[在问题跟踪器](https://code.google.com/p/android/issues/detail?id=38646)上解决此问题，以便我们获得未弃用的替代品。

```
if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        PictureListener pictureListener = new PictureListener() {
            @Override
            @Deprecated
            public void onNewPicture(WebView view, Picture picture) {
                Log.i(TAG, "Picture changed!");
            }

        };
        webView.setPictureListener(pictureListener);
} 
```

# javascript - 如何在 AngularJS 中观察数组的变化

> ID：15681801
> 
> 赞同：29
> 
> 时间：2013-03-28T12:26:37.173
> 
> 标签：javascript, angularjs, angularjs-scope

我基本上想要绑定到 Backbone 集合中的“添加”和“删除”事件。我认为在 AngularJS 中基本上没有办法做到这一点，而我们目前解决的解决方法是`$watch()`读取数组`length`并手动比较/重新计算整个事情。这真的是酷孩子所做的吗？

*编辑*：具体来说，观察数组的长度意味着我不容易知道哪个元素已更改，我需要手动“区分”。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-04-08T10:46:56.987

我认为 using[`$watch`](http://docs.angularjs.org/api/ng/type/%24rootScope.Scope#%24watch)是一个很好的解决方案，但[`$watchCollection`](http://docs.angularjs.org/api/ng/type/%24rootScope.Scope#%24watchCollection)对你来说可能更好。[`$watchCollection`](http://docs.angularjs.org/api/ng/type/%24rootScope.Scope#%24watchCollection)不执行深度比较，只监视数组修改，如插入、删除或排序（**不是项目更新**）。

例如，如果要保持属性`order`与数组顺序同步：

```
$scope.sortableItems = [
    {order: 1, text: 'foo'},
    {order: 2, text: 'bar'},
    {order: 3, text: 'baz'}
];

$scope.$watchCollection('sortableItems', function(newCol, oldCol, scope) {
    for (var index in newCol) {
        var item = newCol[index];
        item.order = parseInt(index) + 1;
    }
}); 
```

但是对于你的问题，不知道有没有比手动浏览数组来识别变化更好的解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-28T12:41:18.840

在 Angular 中观察数组的方法是 `$watch(array, function(){} ,true)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-08T08:35:22.660

我会创建子范围并单独观察它们。这是一个例子：

```
$scope.myCollection = [];
var addChild = function()
{
  var Child = $scope.$new();
  Child.name = 'Your Name here';

  Child.$watch('name', function(newValue) {
     // .... do something when the attribute 'name' is changed ...
  });

  Child.$on('$destroy', function() {
    //... do something when this child gets destroyed 
  });

  $scope.myCollection.push(Child); // add the child to collection array

};

// Pass the item to this method as parameter, 
// do it within an ngRepeat of the collection in your views 
$scope.deleteButtonClicked = function(item)
{
  var index = $scope.myCollection.indexOf(item); //gets the item index
  delete $scope.myCollection[index]; // removes the item on the array
  item.$destroy(); // destroys the original items
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:04:24.870

请详细说明您的用例。跟踪元素持久性的解决方案之一是使用带有自定义指令的 ngRepeat 指令来监听元素的 $destroy 事件：

```
<div ng-repeat="item in items" on-delete="doSomething(item)">

angular.module("app").directive("onDelete", function() {
    return {
        link: function (scope, element, attrs) {
            element.on("$destroy", function () {
                scope.$eval(attrs.onDelete);
            });
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T14:19:08.670

也许解决方案是创建集合类（就像主干一样），您也可以很容易地挂钩事件。

我在这里所做的解决方案并不是很全面，但应该给你一个关于如何做到这一点的一般指导。

[http://beta.plnkr.co/edit/dGJFDhf9p5KJqeUfcTys?p=preview](http://beta.plnkr.co/edit/dGJFDhf9p5KJqeUfcTys?p=preview)

# python - 导入excel文件错误python pandas

> ID：15681802
> 
> 赞同：2
> 
> 时间：2013-03-28T12:26:39.980
> 
> 标签：python, excel, pandas, spyder

我无法使用 ExcelFile() 将 excel 文件加载到数据框中。我已经导入了 pandas、xlrd 和 openpyxl。我正在使用 spyder 进行交互式数据分析。我是 pandas 和 python 的新手，所以我会提出一个初学者可以理解的答案。有人可以帮助我吗？

```
>>> import xlrd
>>> import openpyxl
>>> from pandas import *
>>> xls = ExcelFile('C:\RWFC\test.xls')
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\site-packages\pandas\io\parsers.py", line 1294, in __init__
self.book = xlrd.open_workbook(path_or_buf)
File "C:\Python27\lib\site-packages\xlrd\__init__.py", line 400, in open_workbook
f = open(filename, "rb")
IOError: [Errno 22] invalid mode ('rb') or filename: 'C:\\RWFC\test.xls' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:38:06.277

问题出在这一行：

```
>>> xls = ExcelFile('C:\RWFC\test.xls') 
```

反斜杠有特殊含义。例如，普通字符串中的字符“\t”是制表符：

```
>>> "\t"
'\t'
>>> len("\t")
1 
```

这就是为什么在您的错误消息中：

```
IOError: [Errno 22] invalid mode ('rb') or filename: 'C:\\RWFC\test.xls' 
```

`R`您会在--前面看到一个双斜杠，`\R`没有任何特殊含义，因此它知道您的意思是一个“真正的”斜杠：

```
>>> s = "\\"
>>> s
'\\'
>>> print s
\
>>> len(s)
1 
```

但`\t`确实有特殊的含义。要解决此问题，您可以使用“原始字符串”，并在字符串文字前添加“r”：

```
>>> "C:\RWFC\test.xls"
'C:\\RWFC\test.xls'
>>> r"C:\RWFC\test.xls"
'C:\\RWFC\\test.xls' 
```

或者，您可以简单地使用正斜杠（Windows 支持）并避免所有麻烦：

```
>>> "C:/RWFC/test.xls"
'C:/RWFC/test.xls' 
```

无论哪种方式都应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T08:32:21.970

我遇到了类似的问题。我以这种方式解决了这个问题：

```
path = r"Drive:\path\to\your\file.extension"
workbook = xlrd.open_workbook(path) ##assuming you have imported xlrd already 
```

希望这可以帮助。:)

# objective-c - 使用 sizetofit 和 Landscape 时标签之间的间距未更新

> ID：15681808
> 
> 赞同：0
> 
> 时间：2013-03-28T12:26:51.900
> 
> 标签：objective-c, xcode, ios6, autolayout

我有两个`UILabel`由间隔符分隔的，用视觉格式语言表示。

```
@"V:[label1]-[label2]" 
```

当 label1 的文本更改时，我调用：

```
[label1 sizeToFit]; 
```

在纵向模式下，label2 重新计算它的约束，就像它应该做的那样，并相对于 label1 向上或向下移动

但是，在横向模式下，如果视图仍为纵向，则 label2 将放置在原处。

在此处查看屏幕截图：

[https://www.dropbox.com/sh/1nh0qjrffx6gxdz/e_RQxdtbKn](https://www.dropbox.com/sh/1nh0qjrffx6gxdz/e_RQxdtbKn)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:15:11.830

这可能有多种原因：

1.  它可能取决于其他约束，可能通过 IB 或代码设置
2.  你可能忘记调用`updateConstraints`superview

# c# - 将对象复制到另一个对象但删除某些属性 Windows Phone 8

> ID：15681809
> 
> 赞同：0
> 
> 时间：2013-03-28T12:26:52.270
> 
> 标签：c#, object, copy, windows-phone-8, clone

我想将一个对象复制到另一个对象，但删除某些属性。例如

```
public  class A
{
    public bool IsResizeCancel { get; set; }
    public double MaxSliderValue { get; set; }
    public double CurrentWidth { get; private set; }
    public double CurrentHeight { get; private set; }
} 
```

将对象 A 复制到对象 B 但删除 CurrentWidth 和 CurrentHeight 属性

```
public class B
{
    public bool IsResizeCancel { get; set; }
    public double MaxSliderValue { get; set; }
} 
```

如何用最少的代码有效地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:28:05.580

```
public class B
{
    public B(A a)
    {
        IsResizeCancel = a.IsResizeCancel;
        MaxSliderValue = a.MaxSliderValue;
    }
    public bool IsResizeCancel { get; set; }
    public double MaxSliderValue { get; set; }
} 
```

# excel - Excel 使用 VBA 计算范围中的值是否满足某些条件

> ID：15681819
> 
> 赞同：0
> 
> 时间：2013-03-28T12:27:35.657
> 
> 标签：excel, vba, if-statement, range

我在excel中有两个范围，比如：

```
x   |    y
------------
 5  |   -1
46  |   -4
 2  |    1
67  |   -1
22  |    1
 6  |    0
34  |    0
 7  |   -2 
```

只有当第一列中的相应值小于 10 （即 `sum(y(i)`for`i<0`和`x(i)<10`）时，我才想计算小于 O 的值的第二列的总和。因此，在这种情况下，总和将为-3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:37:10.667

假设您的标题在 A1:B1 并且您的数据是 A2:B9 使用这个：

```
=SUMIFS(B2:B9,A2:A9,"<10",B2:B9,"<0") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:37:55.497

尝试类似的东西

```
Function calc() AS Integer

    Dim sum AS Integer: sum = 0
    Dim c AS Range

    For Each c In ThisWorkbook.Worksheets(1).Range("A1:A15")
        If c.Value < 10  And c.Offset(0, 1).Value < 0 Then
            sum = sum + c.Offset(0, 1).Value
        End If
    Next c

    calc = sum

End Function 
```

# ios - iOS 中的 pathForResource 为空

> ID：15681821
> 
> 赞同：1
> 
> 时间：2013-03-28T12:27:42.650
> 
> 标签：ios, objective-c, xcode, cocoa-touch, plist

无法理解，为什么这行代码返回`(null)`？

```
// Get path of data.plist file to be created

plistPath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"]; 
```

我需要创建新的 plist 但不明白，是否应该先创建空文件才能获取它的路径。有什么想法吗？

PS 我现在的项目中只有 h,m 并且没有 plist 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T12:32:41.590

部署后，您不会在包中创建新文件。该捆绑包包含您的应用程序附带的所有资源和文件。

相反，您在应用的 Documents 文件夹中创建新文件。要获取文档文件夹路径，您可以使用这样的方法（包括在一些应用程序模板项目中）：

```
- (NSString *)applicationDocumentsDirectory {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

然后，您只需附加要使用的文件名。

```
NSString *path = [self applicationDocumentsDirectory];
path = [path stringByAppendingPathComponent:@"data.plist"]; 
```

出于组织目的，您可能还希望在 Documents 文件夹中添加一些其他文件夹。你可以用它`NSFileManager`来做到这一点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T12:36:27.360

是的，您的猜测是正确的——您需要先创建一个文件。以下是类参考文档中关于方法返回值的内容

"返回值资源文件的完整路径名，*如果找不到文件，则返回 nil。* "

您可以执行以下操作：

```
if ( [ [NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"] )
    plistPath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
else
    // Create new file here 
```

此外，如果您正在搜索唯一的文件名，则可以在上面的方法调用中省略类型扩展名。

来源：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)

# java - 如何加载集成测试数据

> ID：15681822
> 
> 赞同：1
> 
> 时间：2013-03-28T12:27:42.953
> 
> 标签：java, spring, maven, jpa

我们有一个 Java-Tomcat 项目，使用 Spring、JPA、maven 构建、用于单元测试的 JUnit 和用于集成测试的 TestNG。

一些集成测试需要数据库，因此每次`mvn verify`运行时都会创建一个新数据库。现在的问题是填充它以获得测试数据。

我应该查看[dbunit](http://www.dbunit.org/)，使用 JPA 或其他方式自己保存对象吗？

如何在数据库中加载测试数据，每次运行集成测试以获得稳定的测试环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:45:34.780

我正在使用`dbunit`内存数据库。加载特定的测试数据集、运行测试、在每次测试后验证数据库内容以及在运行测试后清理数据库都是很有帮助的。

的“优点”`dbunit`是它允许您在每次测试之前和之后控制数据库的状态。“缺点”是您将使用自定义 xml 格式的测试数据集，而不是 SQL。您可以从 sql 导出到此自定义 xml 格式，但您仍需要偶尔手动编辑 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:31:20.430

我获取实时数据库的副本并使测试具有事务性，因此每次都会回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:45:07.823

我们使用 Dbunit。我们使用 @BeforeClass 方法在 junit 中加载测试数据。并删除/清理 @BeforeClass 和 @AfterClass 方法中的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:46:48.040

> 现在的问题是填充它以获得测试数据

由于每个集成测试可能需要不同的测试数据，我认为这应该作为每个集成测试的设置阶段的一部分来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-15T08:47:34.620

有两种模式需要考虑 Fresh Fixture 和 Shared Fixture。第一个提供了更好的测试隔离，因为它是关于为每个测试用例重新创建测试数据，即确保一个干净的状态。后者引入了测试耦合的风险，但速度更快，因为在许多测试中重用相同的测试数据实例。两者都在 Meszaros: *xUnit Test Patterns*中有详细描述。

无论选择如何，都值得考虑在测试安排器之上设计的随机数据驱动方法：[如何使用测试安排器组织测试](https://github.com/ocadotechnology/test-arranger#how-to-organize-tests-with-test-arranger)。据我所知，就维护成本和所需代码量而言，这是最便宜的方法。

# jquery - Jquery'colorbox'注册表单的最佳实践？

> ID：15681827
> 
> 赞同：0
> 
> 时间：2013-03-28T12:27:53.053
> 
> 标签：jquery, colorbox

我正在创建一个使用 jquery colorbox 插件启动的注册表单。目前我将表单作为一个完全独立的 html 文件，我使用 colorbox iframe 函数来显示它，如下所示：

```
<a class="iframe" id="register" href="/register.htm">Login</a> 
```

我在使用单独的 html 表单/iframe 背后的想法是，它避免了在我的每个网站页面上包含（和隐藏）表单的 html 代码，并可能防止任何 SEO 灾难。

但是，当用户单击“注册”按钮时，我想对用户输入执行 jquery 表单验证。我猜的简单解决方案是在 register.htm 页面上包含 jquery 库和自定义验证代码，但这似乎不是很干净......

有没有办法让父页面访问 iframe 并执行表单验证？我尝试了以下似乎不会触发或产生任何错误的方法：

```
$("#register").contents().find("#join_submit").click(function() { alert('booyahh'); }); 
```

帮助表示赞赏！

# clickonce - 将文件嵌入 ClickOnce setup.exe

> ID：15681829
> 
> 赞同：0
> 
> 时间：2013-03-28T12:27:58.130
> 
> 标签：clickonce

我有 ClickOnce 安装程序。有些人的互联网连接速度很慢，所以我想将所有文件嵌入到 setup.exe 中。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:59:36.820

无法使用 ClickOnce 将文件嵌入到一个 setup.exe 文件中。ClickOnce 需要访问清单和提取的文件才能知道要更新哪些文件。ClickOnce 仅更新随每个版本更改的文件。但是，您可以在 IIS 上使用 HTTP 压缩来为连接速度较慢的用户大大减少下载的总大小。

这是一个相关的 SO 问题，提供有关如何使用 ClickOnce 启用 IIS 压缩的信息。

[使用 ClickOnce 进行 IIS 压缩](https://stackoverflow.com/questions/515254/can-clickonce-deployed-application-setup-be-compressed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T00:44:45.410

我不会推荐这种做法。如果您将文件嵌入到 exe 中，则每次发布更新时都将花费同样多的时间来下载它们。如果它们是分开的，并且文件在部署之间没有更改，它们将从本地缓存的版本中复制，而不是再次通过网络复制。

# javascript - 布料模拟系统的并行化算法？

> ID：15681833
> 
> 赞同：8
> 
> 时间：2013-03-28T12:28:11.353
> 
> 标签：javascript, algorithm, math, parallel-processing

![在此处输入图像描述](../Images/0c47f60b90bde80f98d0b1845add4690.png)

可以使用以下算法完成简单的布料模拟：

```
def tick(dt):
    for p1 in particles:
        for bound in p.bounds:
            p2 = bound.particle
            p2.vel += p1.pos + bound.stable_pos - p2.pos
        p1.pos += p1.vel * dt 
```

作为测试，我尝试在 JavaScript 中[实现它。](http://maia.im/cloth)不幸的是，这很难扩展。随着粒子数量的增加，性能下降非常快，并且限制非常低。有没有办法并行化这个算法？你能把它描述为一个简单的伪代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:25:55.440

以下是并行布料模拟设计的详细说明：http: [//atarazanas.sci.uma.es/docs/tesisuma/16614860.pdf](http://atarazanas.sci.uma.es/docs/tesisuma/16614860.pdf)

# php - 在Phonegap中重新进入Web应用程序时如何记住用户按下了一个按钮

> ID：15681834
> 
> 赞同：0
> 
> 时间：2013-03-28T12:28:15.217
> 
> 标签：php, javascript, android, html, cordova

如果用户已经单击“接受”按钮，我想让我的网站跳过 index.html 文件，该按钮重定向到主网站页面。

我尝试使用 PHP 写入 .txt 文件并读取其内容，但网站应用程序处于脱机状态，我无法运行 PHP。有没有简单的方法可以离线做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:35:24.233

关于什么

*   饼干
*   本地存储
*   会话存储

localStorage 和 sessionStorage 不是很好的候选者，因为它们很容易被清除。所以你应该试试[Cookies](http://www.w3schools.com/js/js_cookies.asp)（JavaScript cookie）。您可以使用 cookie 使数据保持离线状态，如果用户接受了它，则将信息保存在 cookie 中。即使应用程序处于离线状态，cookie 也将可用。

当应用上线时，不断更新用户同意用户协议的cookie。

# android - 如何从 DialogPreference 类中的 onDialogClosed 方法返回到主要活动

> ID：15681838
> 
> 赞同：0
> 
> 时间：2013-03-28T12:28:24.393
> 
> 标签：android, android-activity, dialog-preference

我已经为设置活动定义了扩展 Dialogpreference 类的自定义首选项类，

```
public class YesNoPreference extends DialogPreference {

private boolean mWasPositiveResult;
    DashboardActivity dashboardActivity;
Context prefContext;

public YesNoPreference(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    userSession = new UserSessions(context);
    prefContext = context;
}

@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);

    if (callChangeListener(positiveResult)) {
        setValue(positiveResult);

        /* Unset all user shared preferences */
        userSession.unsetSessionData();

    try {   
    dashboardActivity = new DashboardActivity();
    //dashboardActivity.loginScreen();
    Intent dashboard = new Intent(prefContext, DashboardActivity.class);
    dashboardActivity.startActivity(dashboard);

     } catch (Exception e) {
     e.printStackTrace();
     }
    }
}

/**
 * Sets the value of this preference, and saves it to the persistent store
 * if required.
 * 
 * @param value The value of the preference.
 */
public void setValue(boolean value) {
    mWasPositiveResult = value;

    persistBoolean(value);

    notifyDependencyChange(!value);
} 
```

我正在使用对话框首选项从应用程序中注销用户。因此，如果用户选择“确定”，则将取消设置共享首选项，然后将用户定向到登录页面。

我尝试在 Activity 类中创建一个函数，然后在此类中调用它。也使用了 Intent 类，但执行停止在

```
dashboardActivity.startActivity(dashboard); 
```

并生成空指针异常。

请帮助我，找到解决方案。

```
public class SettingsActivity extends Activity {

@Override
   protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Display the fragment as the main content.
    getFragmentManager().beginTransaction()
            .replace(android.R.id.content, new SettingsFragment())
            .commit();
   }

}

public class SettingsFragment extends PreferenceFragment {

@Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       // Load the preferences from an XML resource
       addPreferencesFromResource(R.xml.pref_settings);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:33:44.370

采用

```
prefContext.startActivity(dashboard); 
```

代替

```
dashboardActivity.startActivity(dashboard); 
```

访问`startActivity`方法。目前您正在尝试创建`DashboardActivity`Activity 实例以访问`startActivity`方法。用于`prefContext`启动 Activity

# vb.net - Biarc 渲染

> ID：15681849
> 
> 赞同：1
> 
> 时间：2013-03-28T12:28:51.897
> 
> 标签：vb.net, graphics, gdi+, dxf

我正在创建一个供工业机器人使用的 DXF 解析器。机器人只能沿直线和弧线移动，所以我不得不将椭圆实体分解成一系列的 biarc（感谢[Keeper](https://stackoverflow.com/questions/2898089/c-sharp-drawing-arc-with-3-points)提供的弧功能）。转换效果很好，但是当我尝试在画布上绘制弧线作为路径时，有些未对齐。

我知道这些弧确实是余切的，否则我的轮廓分组算法会使它们成为单独的路径，所以这绝对是一个显示问题（我还手动检查了起点和终点并确认了这一点）。我还使用相同的方法从 SolidWorks 手动导出了一系列 biarcs，并且遇到了同样的问题。

这是表单上的输出图像，我在 biarcs 未对齐的地方圈出了：

![在此处输入图像描述](../Images/d1edf4d688557c31d905447e64fc3fe4.png)

这是椭圆转换代码供参考，它只是对椭圆段`2n`时间进行采样，其中`n`是所需的弧数。然后使用[Keeper](https://stackoverflow.com/questions/2898089/c-sharp-drawing-arc-with-3-points)的 3 点圆弧功能，它为每组 3 个点绘制圆弧。

```
Public Function Ellipse2DToArcs(ByVal CenterPoint As XYZPoint, ByVal MajorRadius As Double, ByVal MinorRadius As Double, ByVal StartAngle As Double, ByVal EndAngle As Double, ByVal OffsetAngle As Double)

 Dim PointList As New List(Of XYZPoint)
 Dim ArcList As New List(Of ShapeClasses.ArcClass)

 For i = StartAngle To EndAngle Step (EndAngle - StartAngle) / (My.Settings.EllipseApprox * 2)
   PointList.Add(New XYZPoint With {.X = CenterPoint.X + MajorRadius * Math.Cos(i) * Math.Cos(OffsetAngle) - MinorRadius * Math.Sin(i) * Math.Sin(OffsetAngle), .Y = CenterPoint.Y + MajorRadius * Math.Cos(i) * Math.Sin(OffsetAngle) + MinorRadius * Math.Sin(i) * Math.Cos(OffsetAngle)})
 Next

 For i As UInteger = 1 To PointList.Count - 2 Step 2
   Dim D As Double = 2 * (PointList(i - 1).X - PointList(i + 1).X) * (PointList(i + 1).Y - PointList(i).Y) + 2 * (PointList(i).X - PointList(i + 1).X) * (PointList(i - 1).Y - PointList(i + 1).Y)
   Dim M1 As Double = ((PointList(i - 1).X ^ 2) - (PointList(i + 1).X ^ 2) + (PointList(i - 1).Y ^ 2) - (PointList(i + 1).Y ^ 2))
   Dim M2 As Double = ((PointList(i + 1).X ^ 2) - (PointList(i).X ^ 2) + (PointList(i + 1).Y ^ 2) - (PointList(i).Y ^ 2))
   Dim NX As Double = M1 * (PointList(i + 1).Y - PointList(i).Y) + M2 * (PointList(i + 1).Y - PointList(i - 1).Y)
   Dim NY As Double = M1 * (PointList(i).X - PointList(i + 1).X) + M2 * (PointList(i - 1).X - PointList(i + 1).X)
   Dim CX As Double = NX / D
   Dim CY As Double = NY / D

   ArcList.Add(New ShapeClasses.ArcClass With {.Radius = Math.Sqrt((CX - PointList(i + 1).X) ^ 2 + (CY - PointList(i + 1).Y) ^ 2), .CenterPoint = New XYZPoint With {.X = CX, .Y = CY}, .StartPoint = PointList(i - 1), .EndPoint = PointList(i + 1)})

 Next
 Return ArcList.ToArray
End Function 
```

这是将 Arc Object 转换为图形的代码（它存储为起点、终点、中心点和半径）：

```
Public Function Arc2DToDraw(ByVal Arc As ShapeClasses.ArcClass)

  'calculate start angle
  Dim StartAngle As Single = Math.Atan2(Arc.StartPoint.Y - Arc.CenterPoint.Y, Arc.StartPoint.X - Arc.CenterPoint.X) * (180 / Math.PI)

  'calculate end angle
  Dim EndAngle As Single = Math.Atan2(Arc.EndPoint.Y - Arc.CenterPoint.Y, Arc.EndPoint.X - Arc.CenterPoint.X) * (180 / Math.PI)

  If StartAngle = EndAngle Then 'is a circle

    '359.99 is a kludge to prevent a chord forming between 0 and 270 (why I have no idea)
    Return {New System.Drawing.Rectangle(Arc.CenterPoint.X - Arc.Radius, Arc.CenterPoint.Y - Arc.Radius, Arc.Radius * 2, Arc.Radius * 2), StartAngle, CSng(359.99)} 
  Else

    Return {New System.Drawing.Rectangle(Arc.CenterPoint.X - Arc.Radius, Arc.CenterPoint.Y - Arc.Radius, Arc.Radius * 2, Arc.Radius * 2), StartAngle, -(StartAngle - EndAngle)}

  End If
End Function 
```

有没有解决这个问题的方法，或者它是一个固有的显示问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:08:52.247

**解决了：**

问题是我使用的是基于整数`Rectangle`而不是基于浮点数`RectangleF`，它在绘制弧线时调用了缩小转换。

```
New System.Drawing.Rectangle(Arc.CenterPoint.X - Arc.Radius, Arc.CenterPoint.Y - Arc.Radius, Arc.Radius * 2, Arc.Radius * 2) 
```

应改为：

```
New System.Drawing.RectangleF(Arc.CenterPoint.X - Arc.Radius, Arc.CenterPoint.Y - Arc.Radius, Arc.Radius * 2, Arc.Radius * 2) 
```

# json - zend 发送 Json 助手

> ID：15681855
> 
> 赞同：0
> 
> 时间：2013-03-28T12:29:09.057
> 
> 标签：json, zend-framework

我正在尝试使用发送 Json 文本，`$this_helper->json->sendJson('Ôtre'=>'Être'` 但问题是无法识别的特殊字符。我怎样才能强制zend发送适当的Json。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:20:37.230

编码特殊字符时，某些 PHP 版本存在问题。您可以通过设置以下内容来解决问题：

```
Zend_Json::$useBuiltinEncoderDecoder = true; 
```

# java - java Thread：线程的异常行为

> ID：15681859
> 
> 赞同：0
> 
> 时间：2013-03-28T12:29:22.133
> 
> 标签：java, multithreading

我正在尝试具有两个线程的代码，一个线程增加一个共享长变量，另一个线程减少 var。

```
class Shared {
    private long a;
    public void incr() {
        a++;
    }
    public void dec() { a--; }
    public long getA(){return a;}
} 
```

我将此共享对象传递给两个线程。在每个线程中增加或减少的 Nitems 次数

```
Shared obj = new Shared();
Incrementer incrementer = new Incrementer(obj, nitems);
Decrementer decrementer = new Decrementer(obj , nitems); 
```

递减线程的run方法：-

```
public void run()
{
    for(int i=0; i<nitems; ++i)
    {
        s.dec();
    }
} 
```

增量线程的运行方法：-

```
public void run()
{
    for(int i=0; i<nitems; ++i)
    {
        s.incr();

    }
} 
```

当我运行它时。我可以清楚地看到问题所在。运行整个代码 20 次后结果不为零。好的，现在像这样更改时相同的运行方法

```
//increment
    public void run()
    {
        for(int i=0; i<nitems; ++i)
        {
            s.incr();
            System.out.println("ghijk");

        }
    }

//decrement
    public void run()
{
    for(int i=0; i<nitems; ++i)
    {
        s.dec();
        System.out.println("abcdef");
    }
} 
```

结果几乎一直为零，除了一两次值不为零的情况。我的问题是什么时候引入这个 SOP 是什么让这个代码正常工作？？？我认为只有在同步 incr() 和 dec() 方法之后才会产生零作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:35:08.440

如果多个线程可以访问一个字段，则需要对其进行[同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:44:15.630

正如其他人所指出的，`incr()`如果`dec()`没有`synchronize`.

添加`System.out.println`可能只是因为它改变了时间而改变了行为。此外，隐藏在此调用中的是充当 ersatz 的同步`synchronize`。这比完全不同步要好。以下是一系列可能的事件：

1.  **Thread-1**将计数器加 1（它先启动，所以它先行）
2.  **Thread-1**开始打印。
3.  当**Thread-1**忙于打印时，**Thread-2**递减计数器。
4.  **Thread-2**完成递减（在**Thread-1**完成打印之前）。
5.  **Thread-2**开始打印，但它必须等待，因为**Thread-1**已锁定输出流。
6.  当**Thread-2**忙于打印时，**Thread-1**循环回到步骤 1。

所以，因为打印有一个同步块，它允许两个线程交替哪个正在更改变量，哪个正在打印。有时，计时会错过，会出现竞争条件并且计数会不同步。

您在多核系统上可能遇到的另一个问题是 Java 线程可以维护变量值的本地版本，因此*每个线程可能会看到自己的副本*。为了防止这种情况，您需要声明变量`volatile`。`synchronize`当遇到块时，非易失性变量将在线程之间同步，所以`volatile`这里不需要。（另一个副作用`println`可能是确保`a`在两个线程之间同步。）

为简单起见，请`AtomicLong`从并发包中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:41:52.250

同步访问改变`a`.

```
class Shared {
    private long a;
    public synchronized void incr() {
        a++;
    }
    public synchronized void dec() {
        a--;
    }
    public long getA(){return a;}
} 
```

# javascript - Node.js - 如何从模块中找出类/对象的属性？

> ID：15681862
> 
> 赞同：3
> 
> 时间：2013-03-28T12:29:27.547
> 
> 标签：javascript, node.js

我最近开始使用 node.js。我不明白的一件事是如何找出模块中的类或对象具有哪些属性，即字段/属性，例如 url 或 http 模块。

我查看了官方文档，只有关于类函数的信息，而不是类的属性。

所以我要问的是，有没有办法从特定模块中找出对象或类的所有属性？

我来自 Java 背景，你们都知道不同类和库的文档非常详细 - 您可以找到每个类中的每个字段和方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:23:00.320

如果你需要一个节点模块，你会得到一个对象。可能是一个函数 thou（它又是一个对象）。因为你得到的是一个对象，你可以使用标准的 javascript 方法来获取键。

```
var module = require("module_to_require");
for (var key in Object.keys(module)) {
    console.log(key);
} 
```

# f# - 是否可以在 F# 中使用正常顺序评估

> ID：15681865
> 
> 赞同：4
> 
> 时间：2013-03-28T12:29:30.320
> 
> 标签：f#, operator-precedence

在 Scala 中，您可以在应用或正常顺序评估之间进行选择，请参阅“<a href="http://omgo.wordpress.com/2010/06/07/scala-call-by-name-vs-call-by-type /" rel="nofollow">Scala call-by-name (=>) vs call-by-type" 例如。

```
 def byName(a: => Unit) = {
    for (i <- 0 until 10) {println(a)}

  }

  def byValue(a: Unit) = {
    for (i <- 0 until 10) {println(a)}

  }

  var i = 1;

  byValue(i = i + 1)
  println(i); // 2

  byName(i = i + 1)
  println(i) // 12 
```

在 F# 中是否同样可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T13:26:09.963

正如 Lee 所指出的，F# 不允许您指定函数参数的评估策略。这当然是一个有用的特性，但我认为它有时可能会令人困惑——例如，如果你有一个`int -> int`像或将其限制为命名函数。

除了显式使用 lambda 函数外，F# 还使用`lazy`关键字和`Lazy<'T>`类型提供对惰性求值的支持（即，惰性求值，但缓存结果）：

```
let foo (a:Lazy<int>) (b:Lazy<int>) = 
  if a.Value = 0 then 0
  else b.Value 
```

仅当第一个参数不为零时，此函数才会评估第二个参数：

```
foo (lazy (printfn "a"; 0)) (lazy (printfn "b"; 10))   // Prints just 'a'
foo (lazy (printfn "a"; 10)) (lazy (printfn "b"; 10))  // Prints both 'a' and 'b' 
```

这比使用函数在语法上更轻量级，但它仍然需要在调用站点上明确说明，而不仅仅是在声明站点上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:17:58.400

据我所知，没有对此的内置支持，因此您可以获得的最接近的方法是通过使用函数延迟计算来模拟它。

```
let cnst a b = a
let apply (f: unit -> unit) = Seq.iter (fun i -> printfn "%A" (f())) [1..10]
let byName (f: unit -> unit) = apply (cnst (f()))
let byValue (f: unit -> unit) = apply f 
```

那么你的例子是：

```
let i = ref 1
byValue (fun _ -> do i := !i + 1)

printfn "%d" !i

i := 1
byName (fun _ -> do i := !i + 1)
printfn "%d" !i 
```

# jboss7.x - Jboss AS7 部署警告：没有指向类路径引用的有效 jar

> ID：15681870
> 
> 赞同：44
> 
> 时间：2013-03-28T12:29:45.027
> 
> 标签：jboss7.x

在 jboss AS7 中部署 .war 时，我收到以下警告。任何的想法？

（MSC服务线程1-4）“/content/test-1.0.0.war/WEB-INF/lib/struts-1.2.9.jar”中的类路径入口commons-beanutils.jar没有指向有效的jar用于类路径参考。

PS。commons-beanutils-1.7.0.jar 已经在 lib 文件夹中。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-29T00:52:20.053

这只是一个警告，在大多数情况下您可以放心地忽略它。

它告诉您的是，在您的 struts-1.2.9.jar 中，在 Class-Path 中的 META-INF/MANIFEST.MF 中引用了“commons-beanutils.jar”，并且无法引用此文件/jar。但是鉴于您有 commons-beanutils-1.7.0.jar 一切都会正常工作。

要摆脱警告，您可以做两件事：

*   将 commons-beanutils-1.7.0.jar 重命名为 commons-beanutils.jar 或
*   打开 struts-1.2.9.jar!META-INF/MANIFEST.MF 并删除该 Class-Path 元素。

但正如我所说，这主要是信息警告。

# java - Xuggler：仅添加 arch-i686-w64-mingw32 jar

> ID：15681873
> 
> 赞同：1
> 
> 时间：2013-03-28T12:30:00.483
> 
> 标签：java, maven, applet, dependency-management, xuggler

我在我的小程序中使用 Xuggler 5.4，将它包含到带有 Maven 的项目中（它有太多的依赖关系，无法直接包含在 .jar 文件中）。这是我的 pom.xml 的一部分。

```
<repositories>
    <repository> <!--Xuggler repo-->
        <id>xuggle repo</id>
        <url>http://xuggle.googlecode.com/svn/trunk/repo/share/java/</url>
    </repository>
</repositories>

<dependencies>
    <dependency> <!--Xuggler dependency-->
        <groupId>xuggle</groupId>
        <artifactId>xuggle-xuggler</artifactId>
        <version>5.4</version>
    </dependency>
</dependencies> 
```

这不是什么秘密，这个库的大小相当大（接近 40mb）。不过，在 Xuggler 的[下载页面](http://www.xuggle.com/downloads)上有一些特殊的库。例如 xuggle‑xuggler‑arch‑i686‑w64‑mingw32.jar 仅适用于 32 位 Win PC，但它比通用库小得多。问题是，我不知道如何将这个 .jar 包含到一个带有 Maven 的项目中（我对它很陌生）。

两者都不

```
<artifactId>xuggle‑xuggler‑arch‑i686‑w64‑mingw32.jar</artifactId>
<version>5.4</version> 
```

也不

```
<artifactId>xuggle‑xuggler</artifactId>
<version>arch‑i686‑w64‑mingw32</version> 
```

没有结果。

我做错了什么？

# java - 如何计算Java中列表对象中的重复值？

> ID：15681874
> 
> 赞同：-3
> 
> 时间：2013-03-28T12:30:01.260
> 
> 标签：java, arrays, count

在java中，我有一个这样的数组：

```
String[] city = {"texas", "ny", "sydney", "ny", "paris", "texas", "ny"}; 
```

我想用计数对它们进行排序/分组......就像 -

```
texas = 2
ny = 3
sydney = 1
paris = 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T12:41:37.790

使用`Collections.frequency()`方法。

```
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Test{
    public static void main(String[] args) {
        String[] city = {"texas", "ny", "sydney", "ny", "paris", "texas", "ny"};
        List<String> asList = Arrays.asList(city);
        Map<String, Integer> map= new HashMap<String, Integer>();
        for(String s: city){
            map.put(s,Collections.frequency(asList,s));
        }
        System.out.println(map);

    }
} 
```

# jquery - 图库和彩盒组图像

> ID：15681876
> 
> 赞同：1
> 
> 时间：2013-03-28T12:30:10.317
> 
> 标签：jquery, image, gallery, colorbox, rel

我有一个小画廊：

*   大合照
*   底部的小拇指

当用户单击拇指时，大照片会发生变化，当您单击它时会加载 ColorBox，到目前为止一切都很好。

现在我希望当用户在 ColorBox 中时，他可以使用下一个 prev 箭头浏览图像，但我该怎么做呢？使用正常的'rel：'gallery''它不会工作？

**这是我的js**：

```
$("#wrapper #right #detail #photo ul li .thumb").click(function() {
    var image = $(this).attr("rel");
    $('#image').hide();
    $('#image').fadeIn('fast');
    $('#image').html('<table><tr><td><a href="' + image + '" class="gallery"><img src="' + image + '" alt="" /></a></td></tr></table>');
    return false;
});

$('#wrapper #right #detail #big #image').on('click', 'a', function(e){
    e.preventDefault();
    $.colorbox({
        transition: 'elastic',
        href: this.href,
        rel: 'gallery',
        speed: 200,
        opacity: 0.4,
        scalePhotos : true,
        maxWidth : '800px',
        maxHeight : '700px'
    });
}); 
```

**和 HTML**：

```
<div id="photo">
    <div id="big"><div id="image"><table><tr><td><a href="gfx/detail/1.jpg" class="gallery"><img src="gfx/detail/1.jpg" alt="" /></a></td></tr></table></div></div>

    <ul>
        <li><a href="#" rel="gfx/detail/1.jpg" class="thumb gallery"><img src="gfx/detail/1.jpg" alt="" /></a></li>
        <li><a href="#" rel="gfx/detail/2.jpg" class="thumb gallery"><img src="gfx/detail/2.jpg" alt="" /></a></li>
        <li><a href="#" rel="gfx/detail/3.jpg" class="thumb gallery"><img src="gfx/detail/3.jpg" alt="" /></a></li>
    </ul>
</div> 
```

有人可以帮助我，让 colorbox 制作他的下一个和上一个画廊吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:25:15.093

在调用之前尝试初始化组`colorbox`：

```
$('.gallery').colorbox({ rel:'gallery' }); 
```

有成功吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T20:37:23.183

colorbox 的“rel”属性是指`<a>`标签上的“rel”属性。尝试：

```
<div id="photo">
<div id="big"><div id="image"><table><tr><td><a href="gfx/detail/1.jpg" class="gallery">    <img src="gfx/detail/1.jpg" alt="" /></a></td></tr></table></div></div>

<ul>
    <li><a href="gfx/detail/1.jpg" rel="gallery" class="thumb gallery"><img src="gfx/detail/1.jpg" alt="" /></a></li>
    <li><a href="gfx/detail/2.jpg" rel="gallery" class="thumb gallery"><img src="gfx/detail/2.jpg" alt="" /></a></li>
    <li><a href="gfx/detail/3.jpg" rel="gallery" class="thumb gallery"><img src="gfx/detail/3.jpg" alt="" /></a></li>
</ul>
</div> 
```

# c# - c#扩展基类的方法

> ID：15681880
> 
> 赞同：1
> 
> 时间：2013-03-28T12:30:16.363
> 
> 标签：c#

有没有办法做到这一点：

```
class BetList : List<Bet>
{
    public uint Sum { get; private set; }
    void Add(Bet bet) : base.Add(bet)  // <-- I mean this
    {
        Sum += bet.Amount;
    } 
} 
```

我想使用基础 List 类来执行 List 操作。我只想实现 Summming。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:31:18.353

你应该使用组合，而不是推导

```
class BetList
{
     List<Bet> _internalList=new List<Bet>();
     //forward all your related operations to _internalList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:43:03.353

如果您需要扩展现有的集合类型，您应该使用`Collection<T>`专为此目的设计的集合类型。例如：

```
public class BetList : Collection<Bet>
{
    public uint Sum { get; private set; }

    protected override void ClearItems()
    {
        Sum = 0;
        base.ClearItems();
    }

    protected override void InsertItem(int index, Bet item)
    {
        Sum += item.Amount;
        base.InsertItem(index, item);
    }

    protected override void RemoveItem(int index)
    {
        Sum -= item.Amount;
        base.RemoveItem(index);
    }

    protected override void SetItem(int index, Bet item)
    {
        Sum -= this[i].Amount;
        Sum += item.Amount;
        base.SetItem(index, item);
    }
} 
```

可以在这里找到对`List<T>`和之间差异的一个很好的解释： [List (of T) 和 Collection(of T) 之间的区别是什么？](https://stackoverflow.com/questions/398903/what-is-the-difference-between-list-of-t-and-collectionof-t)`Collection<T>`

上面的类将像这样使用：

```
var list = new BetList();
list.Add( bet );  // this will cause InsertItem to be called 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:36:39.210

如果您想保留类派生而不是组合，请尝试以下操作：

```
class BetList : List<Bet>
{
    public uint Sum { get; private set; }
    new void Add(Bet bet) 
    {
        base.Add(bet);
        Sum += bet.Amount;
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:12:21.697

当您需要它而不是存储它时，如何即时计算总和？

```
class BetList : List<Bet>
{
    public uint Sum 
    { 
        get { return this.Count > 0 ? this.Sum(bet => bet.Amount) : 0; }
    }
} 
```

# matlab - 可以避免`eval()`吗？（在运行时分配变量名）

> ID：15681881
> 
> 赞同：2
> 
> 时间：2013-03-28T12:30:16.460
> 
> 标签：matlab, eval

我编写了一个脚本，可以让我在 Matlab 中手动导入测试期间记录的数据。

每次测试运行都会在文件中保存大约 2600 个变量`.csv`，每个变量都有 2 个标题行、两列数据并且`;`是分隔符。

文件名来自监控程序使用的内部 C 结构，因此属于这种类型：`foo.bar.another.foo.bar.local_varname#VALUE.csv`我想用它在 Matlab 中重新创建结构，以便仅将其保存在`test_name.mat`文件中。

很多时候它的`local_varname`长度超过 63 个字符，所以我有一些替换规则来缩短名称而不让 Matlab 截断名称（因此试图避免命名冲突）。

这是代码

```
clear all
clc

% Main names
path_self         = pwd;
backslash_indices = strfind(path_self,'\');
test_name         = path_self(backslash_indices(end)+1:end); % the directory name gives me the test_name

% Preallocation
filenames = cell(1,2600);
addresses = cell(1,2600);
i=0;

% Full list
MyFiles = dir(path_self); 

% Discard subdirectories and non interesting files
for k=1:length(MyFiles)
    if ~MyFiles(k).isdir,
        if ~isempty(strfind(MyFiles(k).name,'#VALUE.csv'))
            i=i+1;
            % Too many files
            if i > length(filenames)
                filenames = [filenames cell(1,100)];
                addresses = [addresses cell(1,100)];
            end
            % Naming Substitution Rules

            %%% INSERT HERE BUNCH OF RULES

            % Addresses and names
            filenames{i} = strrep(filename,'#VALUE.csv','');
            addresses{i} = fullfile(path_self, MyFiles(k).name);
        end
    end
end
filenames = filenames(1:i);
addresses = addresses(1:i);

% Check that no conflicts are created
if length(filenames) ~= length(unique(filenames))
    error('filenames not unique')
end

% Housekeeping #1
clear MyFiles backslash_indices i k path_self

% Import data
for j=1:length(filenames)
    % Read data
    Data = importdata(addresses{j}, ';', 2);
    % Assign data
    eval([filenames{j}, '.time   = Data.data(:,1)./1000000;']); % Converted in seconds
    eval([filenames{j}, '.values = Data.data(:,2);']);
    % Let's avoid data corruption
    clear Data
end

% Housekeeping #2
clear filenames addresses j 

% Save data struct
save(test_name, '-regexp', '^((?!name).)*$') 
```

**现在我的问题** 在研究信息并帮助编写上述代码时，我经常发现人们不赞成使用`eval()`: 为什么会这样？在上述情况下，我可以避免吗？

谢谢

**编辑** 正如@wakjah 所建议的，我测试了一种`containers.Map()`方法。不幸的是不适合我们的需求，因为此时需要一个键列表并且访问数据并不完全友好（请记住，我有大约 2600 个变量，这意味着至少有相同数量的键）

至于@Dennis Jaheruddin 所问的问题，数据结构是可用的并且不会产生任何冲突，即使使用这些长变量名（假设两个连续的名称*`.`的长度小于 63 个字符）

*我很抱歉没有使用更好的技术术语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:34:02.257

从Mathworks 上的[这个](http://www.mathworks.co.uk/help/matlab/matlab_prog/string-evaluation.html)页面：

> 尽管 eval 函数非常强大和灵活，但它并不总是编程问题的最佳解决方案。与使用其他函数或语言结构的代码相比，调用 eval 的代码通常效率较低且更难阅读和调试。...

您可以轻松地使用括号符号来完成您的任务。一个简单的例子：

```
s = struct();
myFieldName = 'test';
s.(myFieldName) = myFieldValue; 
```

这会将`test`结构中的字段设置`s`为`myFieldValue`.

Loren也有[这篇](http://blogs.mathworks.com/loren/2005/12/13/use-dynamic-field-references/)关于这个主题的博客文章。

**编辑**：由于您的要求是字段名称长于 63 个字符，另一种方法是使用该`containers.Map`对象。这是一个小例子：

```
>> m = containers.Map();
>> myFieldName = repmat('abcdefg', [1 10]); % 70 chars long
>> m(myFieldName) = 12345; 
>> m(myFieldName)

ans =

       12345 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T13:26:53.280

看了你想做的事后，我的第一个想法是你做的很奇怪。

超过 63 个字符的变量名基本上是自找麻烦。相反，我会推荐以下简单的解决方案：

使用具有两个字段的结构：

*   文件名
*   价值

这样，您的数据结构更加自然，您的所有文件只需要一个变量。

* * *

请注意，值可以是结构或数组，不限于单个字符串或数字。

我在这里能想到的唯一真正的缺点是自动完成功能适用于变量名，但不适用于它们的内容，但这应该是一个很小的代价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:59:55.833

您是否考虑过使用该函数`genvarname`从 生成有效的唯一变量名`local_varname`？

# jquery - jquery / javascript根据另一个输入中的数字调整两个文本框中的数值

> ID：15681882
> 
> 赞同：0
> 
> 时间：2013-03-28T12:30:23.987
> 
> 标签：jquery

我正在尝试使用 jquery 滑块变得聪明。

在我的开发中，我有一个选择产品的自动完成字段。在选择时，从数据库中获取价格并填充到 input`listprice`中。

然后我有一个`adjustedprice`输入和一个`discount`输入。

我想要的是两个方面。

选项 1：当通过 jquery 从数据库中填充标价时，用户可以在输入中输入他想要的**调整**`adjusted price`价格。然后必须对“listprice”输入进行数学运算，并将输入调整`discount`为等于效果折扣百分比。

选项 2：当通过 jquery 从数据库中填充标价时，用户可以在输入中输入他想要的**折扣**`discount`。然后必须对`listprice`输入进行数学运算并将 调整`adjustedprice`为正确的值。

这样，用户可以输入折扣或所需价格，然后它会更新其他输入。

我有一个基本的小提琴[http://jsfiddle.net/C8X4D/67/](http://jsfiddle.net/C8X4D/67/)。现在`listprice`可以手动输入以模拟数据库填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:36:01.070

在输入调整后的价格或折扣时，您可以执行以下操作来计算和显示数字：

```
$("#listprice").keyup(function(){
    $("#adjustedprice").val(this.value);

    $('#adjustedprice').on('keyup', function() {
        var discount = 0;

        var adjustedPrice = $(this).val();
        var listPrice = $("#listprice").val();
        var discount = Math.round((adjustedPrice / listPrice) * 100);

        $('#discount').val(discount);
    });

    $('#discount').on('keyup', function() {
        var adjustedPrice = 0;

        var discount = $(this).val();
        var listPrice = $("#listprice").val();
        var adjustedPrice = Math.round(listPrice * (discount / 100));

        console.log(adjustedPrice);

        $('#adjustedprice').val(adjustedPrice);
    });
}); 
```

演示：http: [//jsfiddle.net/C8X4D/72/](http://jsfiddle.net/C8X4D/72/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:36:52.890

您正在使用自动完成选择产品.. 好的，现在您只需在通过自动完成选择产品时传递该产品的 id .. 然后您可以使用 Ajax 获取该特定 ID 的价格

这是HTML代码：

```
$("#partyName").autocomplete("getPartyAj.php", 
{   
    width: 400,     
    matchContains: true,
    mustMatch: false,
    minChars: 0,
    highlight: false,
    selectFirst: true,
    formatItem: function(data, i, n, value) {   
      return  value.split("|")[0];
  }
}); 
$("#partyName").result(function(event, data, formatted) {
  $("#partyId").val(data[1]);
  balance();
});

function balance()
{
  var dataString = "partyId=" + $('#partyId').val();
  $.ajax({
  type: "GET",
  url: "balanceAj.php",
  data : dataString,
  success:function(data){ 
  $('#partyBalance').val(data);
  }
 });
} 
```

PHP 代码:(getPartyAj.php)

```
<?php
include("include/config.inc.php");
$q = strtolower($_GET["q"]);
if (!$q) return;
$selectPartyQry = "SELECT partyId,partyName
                     FROM party 
                    WHERE partyName REGEXP '$q'";
$selectPartyQryRes = mysql_query($selectPartyQry);
if(mysql_num_rows($selectPartyQryRes) > 0)
{
  while($partyRow = mysql_fetch_array($selectPartyQryRes)) 
  {
    echo $partyRow['partyName'].'|'.$partyRow['partyId']."\n";
  }
}
else
{
    echo "";
}
?> 
```

# java - Java中的贝尔曼福特算法

> ID：15681885
> 
> 赞同：3
> 
> 时间：2013-03-28T12:30:32.427
> 
> 标签：java

任何人都可以帮助使用 java 中的贝尔曼福特算法来计算从源顶点开始的最短路径。

我还希望在遍历所有边和所有迭代之后为每个节点打印最终更新的前驱节点这是我的代码

```
import java.io.*;
import java.util.*;
public class BellmanFord {
    LinkedList<Edge> edges;
    int d[];
    int n,e,s;
    final int INFINITY=999;

    private static class Edge  {
        int u,v,w;

        public Edge(int a, int b, int c)     {
            u=a;
            v=b;
            w=c;
        }
    }

    BellmanFord() throws IOException {
        int item;
        edges = new LinkedList<Edge>();
        BufferedReader inp = new BufferedReader (new InputStreamReader(System.in));

        System.out.print("Enter number of vertices ");
        n = Integer.parseInt(inp.readLine());

        System.out.println("Cost Matrix");
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++)   {
                item = Integer.parseInt(inp.readLine());
                if(item != 0)
                    edges.add(new Edge(i,j,item));
            }
        }

        e = edges.size();
        d = new int[n];

        System.out.print("Enter the source vertex ");
        s = Integer.parseInt(inp.readLine());
    }

    void relax() {
        int i,j;
        for(i=0;i<n;++i)
            d[i]=INFINITY;

        d[s] = 0;
        for (i = 0; i < n - 1; ++i) {
            for (j = 0; j < e; ++j) { //here i am calculating the shortest path
                if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v]) {
                    d[edges.get(j).v] = d[edges.get(j).u] + edges.get(j).w;
                }
             }
         }
    }

    boolean cycle() {
        int j;
        for (j = 0; j < e; ++j)
            if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v])
                 return false;
        return true;
    }

    public static void main(String args[]) throws IOException   {
        BellmanFord r = new BellmanFord();
        r.relax();
        if(r.cycle()) {
            for(int i=0;i<r.n;i++)
                System.out.println(r.s+" ==> "+r.d[i]);
        } else {
            System.out.println(" There is a negative edge cycle ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T12:49:59.297

按照标准[算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)，我觉得应该给前人介绍一个数组：

```
int[] p = new int[n]; 
```

`relax`在您的函数中初始化：

```
for(i=0;i<n;++i) {
    d[i] = INFINITY;
    p[i] = -1;
} 
```

并与距离一起更新：

```
for (i = 0; i < n - 1; ++i) {
    for (j = 0; j < e; ++j) { //here i am calculating the shortest path
        if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v]) {
            d[edges.get(j).v] = d[edges.get(j).u] + edges.get(j).w;
            p[edges.get(j).v] = edges.get(j).u;
        }
    }
} 
```

并打印：

```
for (int i = 0; i < n; i++) {
    System.out.println("Vertex " + i " has predecessor " + p[i]);
} 
```

**编辑**因为你似乎对我的代码片段有一些问题，这里是完整的工作代码：

```
import java.io.*;
import java.util.*;

public class BellmanFord  {
    LinkedList<Edge> edges;
    int d[], p[];
    int n,e,s;
    final int INFINITY=999;

    private static class Edge  {
        int u,v,w;

        public Edge(int a, int b, int c)     {
            u=a;
            v=b;
            w=c;
        }
    }

    BellmanFord () throws IOException {
        int item;
        edges = new LinkedList<Edge>();
        BufferedReader inp = new BufferedReader (new InputStreamReader(System.in));

        System.out.print("Enter number of vertices ");
        n = Integer.parseInt(inp.readLine());

        System.out.println("Cost Matrix");
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++)   {
                item = Integer.parseInt(inp.readLine());
                if(item != 0)
                    edges.add(new Edge(i,j,item));
            }
        }

        e = edges.size();
        d = new int[n];
        p = new int[n];

        System.out.print("Enter the source vertex ");
        s = Integer.parseInt(inp.readLine());
    }

    void relax() {
        int i,j;
        for(i=0;i<n;++i) {
            d[i]=INFINITY;
            p[i] = -1;
        }

        d[s] = 0;
        for (i = 0; i < n - 1; ++i) {
            for (j = 0; j < e; ++j) { //here i am calculating the shortest path
                if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v]) {
                    d[edges.get(j).v] = d[edges.get(j).u] + edges.get(j).w;
                    p[edges.get(j).v] = edges.get(j).u;
                }
             }
         }
    }

    boolean cycle() {
        int j;
        for (j = 0; j < e; ++j)
            if (d[edges.get(j).u] + edges.get(j).w < d[edges.get(j).v])
                 return false;
        return true;
    }

    void print() {
        for (int i = 0; i < n; i++) {
            System.out.println("Vertex " + i + " has predecessor " + p[i]);
        }
    }

    public static void main(String args[]) throws IOException   {
        BellmanFord  r = new BellmanFord ();
        r.relax();
        if(r.cycle()) {
            for(int i=0;i<r.n;i++)
                System.out.println(r.s+" ==> "+r.d[i]);
        } else {
            System.out.println(" There is a negative edge cycle ");
        }

        r.print();
    }
} 
```

输入：

```
Enter number of vertices 3
Cost Matrix
0
99
1
4
0
2
2
4
0
Enter the source vertex 0 
```

输出：

```
0 ==> 0
0 ==> 5
0 ==> 1
Vertex 0 has predecessor -1
Vertex 1 has predecessor 2
Vertex 2 has predecessor 0 
```

正如预期的那样

# mysql - Mysql 排除记录

> ID：15681889
> 
> 赞同：2
> 
> 时间：2013-03-28T12:30:45.833
> 
> 标签：mysql, record

我有两个表，用户和角色，一个用户可以有多个角色

> ```
> user: ID | FIRSTNAME | LASTNAME | etc..
>        1 | PETER     | Blomp    | 
> 
> role: ID |  ROLEID   | USERID (which is user ID)
>       70 |    5      |    1 (peter)
>       71 |    2      |    1 
> ```

我必须做但无法弄清楚的是，如何检索角色 ID 甚至不是某个整数的用户的数据。前任。用户彼得可以有角色 ID 5 和 2，我想要得到的是如果彼得有角色 3，他从结果集中排除，不管他是否有角色 5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:34:52.400

```
SELECT
    user.ID, user.FirstName, user.LastName
FROM
    user
WHERE
    user.ID NOT IN (
                    SELECT ID FROM role WHERE role.RoleID = '3'
                   ) 
```

这使用了 MySQL 中所谓的[子查询](http://dev.mysql.com/doc/refman/5.6/en/subqueries.html)。WHERE 子句中的子查询将选择 RoleID 为 3 的所有 ID（例如 Peter）。然后它将使用[`NOT IN()`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_not-in)，从用户选择中排除这些 ID（Peter）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:33:22.677

你可以简单地使用`NOT IN`

```
select * from user inner join role on role.userid = user.id
user.ID NOT IN ( SELECT ID FROM role WHERE role.RoleID = '3') 
```

# backbone.js - Backbonejs：未定义主干错误

> ID：15681893
> 
> 赞同：5
> 
> 时间：2013-03-28T12:31:02.367
> 
> 标签：backbone.js

Google Chrome 开发者工具控制台抛出此错误：

```
uncaught reference error: backbone is not defined 
```

当这个 html 文件包含带有库主干.js 的 javascript 时：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example Backbone APP</title>
  </head>
  <body>

    <script>
      Whisky = Backbone.Model.extend();
        firstWhisky = new Whisky({
        name : 'Blenders Pride'
      });
      Whiskies = Backbone.Collection.extend({
        Model:Whisky ,
        url:"#"
      });

      first_view = Backbone.View.extend({
        el : 'body',
        initialize : function() { 
          this.$el.empty();
          this.render();
        } , 

        render : function() { 
          this.$el.append("<h1>The Whisky APP</h1>");
          this.list_view = new List_view();
          this.$el.append(this.list_view.render().el);
          return this ; 
        }
      });
      List_view = Backbone.View.extend({ 
        tagName : 'ul' , 
        render : function() {
          this.$el.empty();
          this.$el.append("<li>Royal stag</li>");
          this.$el.append("<li>Signature </li> ");
          return this ; 
        }
      });
      index_view = new first_view();    
    </script>
    <script src="LIB/json2.js"></script> 
    <script src="LIB/underscore-min.js"></script>  
    <script src="http://code.jquery.com/jquery.js"></script>  
    <script src="http://backbonejs.org/backbone.js"></script> 
  </body>
</html> 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T12:32:59.430

您不能在声明之前使用 Backbone。

将`<script>`标签放在您自己的 javascript 代码之前。

您必须像这样重新组织您的 javascript 部分：

```
<script src="LIB/json2.js"></script> 
<script src="LIB/underscore-min.js"></script>  
<script src="http://code.jquery.com/jquery.js"></script>  
<script src="http://backbonejs.org/backbone.js"></script> 
<script>
  Whisky = Backbone.Model.extend();
    firstWhisky = new Whisky({
    name : 'Blenders Pride'
  });
  Whiskies = Backbone.Collection.extend({
    Model:Whisky ,
    url:"#"
  });

  first_view = Backbone.View.extend({
    el : 'body',
    initialize : function() { 
      this.$el.empty();
      this.render();
    } , 

    render : function() { 
      this.$el.append("<h1>The Whisky APP</h1>");
      this.list_view = new List_view();
      this.$el.append(this.list_view.render().el);
      return this ; 
    }
  });
  List_view = Backbone.View.extend({ 
    tagName : 'ul' , 
    render : function() {
      this.$el.empty();
      this.$el.append("<li>Royal stag</li>");
      this.$el.append("<li>Signature </li> ");
      return this ; 
    }
  });
  index_view = new first_view();    
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T21:46:35.837

这可能是相关的。[我正在使用以下链接从http://cdnjs.com](http://cdnjs.com) 托管库将 jQuery、Underscore 和 Backbone 加载到我的 index.html ：

```
 <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
 <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
 <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script> 
```

结果，我可以在 Chrome 中访问 $、_ 和 Backbone，但如果我尝试在 Firefox 中打开页面，我会得到：未捕获的 ReferenceError：Backbone 未定义。但是，当使用 Eric Leschinski 提供的链接时：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script> 
```

一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T19:00:00.737

## 如何用尽可能少的行重现此错误：

```
<html>
<body>
<script type="text/javascript">
    var AppView = Backbone.View.extend({
    });
</script>
<div>mydiv</div>
</body>
</html> 
```

你得到一个错误：

```
ReferenceError: Backbone is not defined
var AppView = Backbone.View.extend({ 
```

您没有包含必要的主干库。

## 如果您收到此错误，请执行以下 Hello world 示例：

此示例定义了主干：

```
<html>
<body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>

  <div>Loading...</div>

  <script type="text/javascript">
    alert("starting backbone");
    var AppView = Backbone.View.extend({
      el: 'div',
      initialize: function(){
        alert("initializing backbone");    
        this.render();
      },
      render: function(){
        alert("applying text to div attribute");
        this.$el.html("Hello World");
      }
    });
    var appView = new AppView();
    alert("done");
  </script>
</body>
</html> 
```

要在 jsfiddle 中运行此示例，请参见此处：http: [//jsfiddle.net/ZfnbK/](http://jsfiddle.net/ZfnbK/)

它应该显示 4 个弹出框，说明它通过代码所采用的路径。当调用 render 函数时，backbone 使用 jQuery 将 div 标签的内容替换为：“Hello World”。

# c++ - 奇怪的原型设计错 误：Cpp 和标头

> ID：15681899
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:31:24.093
> 
> 标签：c++, class, object, prototype, declaration

这是我收到的以下错误

**错误：“A 类”的前向声明|**

我正在尝试对这些类进行原型制作并使它们在全球范围内可用。我认为最好通过图像来解释这一点，所以这里是：

**哎呀还忘了提到 FileA.cpp 也 #includes External.h**

![在此处输入图像描述](../Images/67729cfef3366791fbb054071566e233.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:37:16.947

对于实例化对象（自动或使用`new`），需要对可见类型进行完整定义。`class A`主体应该对 Main.cpp 可见。

仅前向声明的不完整类型的用途有限。它可以用作：

1.  指针
2.  参考
3.  模板参数

例如

```
class A;
class X {
  A* p;
  A& r;
  std::vector<A> v;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:35:48.487

main 试图构造 A 当它对类一无所知时，除了它存在之外。您需要 Main.cpp 可用的定义，而不是隐藏在另一个 cpp 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:34:25.303

`new`如果没有完整的类定义，就无法实例化对象（使用）。

将定义移入`External.h`或使用工厂方法返回有效指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:35:24.900

当您使用该类时`A`，您需要它的*完整*定义。编译器如何知道它有哪些方法和变量？这包括对象实例的构造，即使只是创建指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:35:51.407

类的前向声明足以声明对该类的指针或引用，但仅此而已。如果你想使用类的函数（包括构造函数），你需要在使用点有完整的定义可用。

# maven - 使用 maven-release-plugin 转换术语

> ID：15681900
> 
> 赞同：1
> 
> 时间：2013-03-28T12:31:27.663
> 
> 标签：maven, deployment, release, terminology, maven-release-plugin

通常开发人员会说我们进行**构建**，而不是**部署**到不同环境（集成、测试、生产）中的服务器。部署到生产环境是**release**。

现在有了 Maven 和[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)，如何明确表达自己变得不清楚。因为 maven-release-plugin 所做的是构建和`deploy`连接到 Nexus 服务器。

然后我们开始说“发布”，意思是“使用 maven-release-plugin 进行构建并将其放在 Nexus 上”

**在部署到不同环境的服务器并发布到生产环境时，您使用什么词？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:57:44.613

在我的世界里，发布是对生产的部署。maven 发布插件的[作用](https://stackoverflow.com/a/3661037/33434)是非常不标准的。我只是称其为*maven-release*

# c# - 为什么我的“插入”没有插入数据库？

> ID：15681901
> 
> 赞同：0
> 
> 时间：2013-03-28T12:31:42.430
> 
> 标签：c#, sql, winforms

我在 Visual Studio 中有一个使用 C# 的 WinForms 应用程序。当我运行以下代码时，它不会给出错误，但没有数据插入到数据库表中。

代码：

```
string dbfile = Properties.Settings.Default.CTMSConnectionString1;

SqlConnection con = new SqlConnection(dbfile);
con.Open();

SqlCommand insert = new SqlCommand("Insert into Temptranstion (CustomerID, ProductName,Quantity,Price,DateTime ) Values (@CustomerID,@ProductName,@Quantity,@Price,@DateTime)", con);
insert.Parameters.AddWithValue ("@CustomerID ",comboBox1.SelectedValue);
insert.Parameters.AddWithValue ("@ProductName",textBox6.Text);
insert.Parameters.AddWithValue ("@Quantity",textBox7.Text);
insert.Parameters.AddWithValue ("@Price",textBox8.Text);
insert.Parameters.AddWithValue ("@DateTime",DateTime.Now);
insert.ExecuteNonQuery(); 
```

问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:40:38.823

创建和使用 ADO.NET SQL 连接和命令的最新模式是在嵌套的 using 语句中，如下所示：

```
using (var connection = new SqlConnection(dbfile))
using(var command = connection.CreateCommand())
{
    connection.Open();

    command.CommandText = "Insert into Temptranstion (CustomerID, ProductName,Quantity,Price,DateTime ) Values (@CustomerID,@ProductName,@Quantity,@Price,@DateTime)";
    command.Parameters.AddWithValue ("@CustomerID ",comboBox1.SelectedValue);
    command.Parameters.AddWithValue ("@ProductName",textBox6.Text);
    command.Parameters.AddWithValue ("@Quantity",textBox7.Text);
    command.Parameters.AddWithValue ("@Price",textBox8.Text);
    command.Parameters.AddWithValue ("@DateTime",DateTime.Now);
    command.ExecuteNonQuery();
} 
```

请注意，我没有运行这段代码，我只是重构了你的代码，无论发生什么，连接和命令总是关闭和处理。

如果您仍然无法在数据库中看到新记录，则可能是不同的故障点：

1）你的连接字符串是什么样的？

2）您是在检查正确的目标数据库还是在每次执行时重新部署数据库？

3）您的输入参数中的值是什么？

祝你好运，

戴维德。

# jquery - JQuery嵌套选项卡-单击父选项卡时未选择第一个子选项

> ID：15681902
> 
> 赞同：0
> 
> 时间：2013-03-28T12:31:43.760
> 
> 标签：jquery, tabs, nested, jquery-ui-tabs, jquery-tabs

我创建了嵌套选项卡。示例结束结构如下： 注意：““_1”是使用 foreach 动态添加的。因此，所有子 div 都是使用服务器返回值动态创建的。”

```
 <div id="tabs">

      <ul id="tablinks">
      <li><a href="#childtab_1">First Parent</a></li>
      <li><a href="#childtab_2">Second Parent</a></li>
      </ul>

    <div id="childtab_1">
       <div id="ct_1">
        <ul id="childTabLinks_1">
        <li><a href="#childtabs-11">First Nested Tab</a></li>
        <li><a href="#childtabs-12">Second Nested Tab</a></li>
        </ul>
        <div id="childtabs-11"><p>First child content</p>
        </div>
        <div id="childtabs-12"><p>Second child content</p>
        </div>
    </div>   

    <div id="childtab_2">   
    .
    .
    </div> 

    In Java Script:   
    $('#tabs').tabs();
    $('#childtabs_1').tabs(
    //getting data using ajaxOptions
    );
    $('#childtabs_2').tabs(
    //getting data using ajaxOptions
    ); 
```

考虑在父级 1 下 - 单击第二个子级。如果我单击父 2，然后返回父 1，则仍然选择第二个孩子。我希望每当单击父选项卡时都应该选择第一个孩子。

我通读了其他帖子-并尝试使用

1.  单击锚元素上的功能。喜欢

    ```
    $('#tabs ul li a').click(function(){
       var parent = $('#tabs').tabs();
       $parent.tabs('select',0);
    }); 
    ```

    它不工作。

2.  尝试在 tabselect 上使用绑定。它导致事件泡沫并且也不起作用。

    ```
    $('#tabs').bind(
            'tabsselect', 
            function(event, ui) {
                $("#tabLinks li a").on("click", function () { 
                    $('#childTabLinks_0 li a').first().trigger("click"); 
                });     
            }
    ); 
    ```

请分享是否有解决方案可以在选择父母时自动选择第一个孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:38:24.890

您不需要 tabselect 函数中的 click 函数：

```
$('#tabs').bind(
    'tabsselect',
        function() {
            $(this).children('.child-tabs').tabs('select',0);
        }
    }
); 

<div id="childtab_1">
   <div id="ct_1">
      <ul id="childTabLinks_1" class="child-tabs">
      ... 
```

# templates - 如何使用 libfixbuf 从 IPFIX 文件中检索模板？

> ID：15681905
> 
> 赞同：1
> 
> 时间：2013-03-28T12:31:54.550
> 
> 标签：templates, netflow

我正在尝试使用 CERT 工具来读取和解析 IPFIX 文件。文档说要从文件中获取“内部”模板，尽管与模板相关的每个调用似乎都需要模板 id (tid) 或我没有的其他信息。这完全是先有鸡还是先有蛋的问题，我似乎无法弄清楚。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:02:18.463

要从数据记录中识别模板，您需要查找 Set ID。Set ID 将告诉您您正在查看的记录是模板还是数据集。任何大于 255 的都是数据集。IPFIX 中模板的 Set Id 为 2。（0 到 NetFlow v9，这两种格式看似相似）。请参阅[https://www.rfc-editor.org/rfc/rfc5101#section-3.3.2](https://www.rfc-editor.org/rfc/rfc5101#section-3.3.2) 找到 Set Id 2 后，下一个字段应该是模板的 TemplateId。

此 wiki 页面显示了 IPFIX 数据包的示例。

[http://en.wikipedia.org/wiki/IP_Flow_Information_Export](http://en.wikipedia.org/wiki/IP_Flow_Information_Export)

# php - 适用于其他对象的对象

> ID：15681907
> 
> 赞同：0
> 
> 时间：2013-03-28T12:32:01.253
> 
> 标签：php, oop, design-patterns

所以我正在做一个项目，其目标是从用户那里收集数据以进行搜索。我已经将要从搜索中收集的不同类型的信息建模为对象。我计划创建一种将创建和操作这些对象的管理对象。

我的问题是，在创建这个“管理”对象时我应该考虑任何模式或设计决策吗？想到的一件事是这个对象将与“搜索数据”对象紧密耦合，因为它可能会在它的方法中创建和保存它们。

我不认为依赖注入在这种情况下会起作用，因为可能必须处理同一对象的多个副本，因此不可能知道参数列表是什么。

感谢您的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:58:05.920

我认为最好为所有这些其他对象或子对象创建一个父类或模式以遵循或继承。例如，假设您想要获取或设置特定对象中的一些数据。如果数据字段名称不同，您就会遇到问题。

假设您有一个名为的对象`GoogleSearch`和一个名为 的对象`YahooSearch`。`GoogleSearch`如果可以通过该方法检索用户输入的查询，并且必须`$google->getQuery()`使用 YahooSearch 查询来检索，`$yahoo->getInput()`那么显然您会遇到问题，除非您想在出现时手动指定此类信息。

但是，如果您在开发框架之前考虑这样的事情，那么自动化一切会变得容易得多。在这种情况下，可以肯定地说，如果您正在从用户搜索中构建数据集合，那么所有搜索都将共享一些属性。

例如， - 他们使用什么搜索引擎？- 输入的查询是什么？- 搜索是什么时候进行的？- 从什么IP？- 用户是否选择了其中一个结果？- 用户是否在计算机、移动设备或其他设备上进行搜索？

考虑到这些最小的考虑，我们可以设计一个系统来整合所有这些属性。例如，这可能是您的父类：

```
class Search {
    protected $engine, $query, $when, $who, $browserType;
    function __construct() {
        $this->when = time();
        $this->browserType = $_SERVER['HTTP_USER_AGENT'];
        $this->who = $_SERVER['REMOTE_ADDR'];
    // some more class methods
    }
} 
```

那么您可以从此类继承以创建特定的搜索类型，如下所示：

```
class GoogleSearch extends Search {
    function __construct() {
        // set the engine to Google
        $this->engine = 'Google';
    }
} 
```

还有一些需要考虑的事情可能是变量的范围或可见性。在这里，我将它们声明为`protected`基本上意味着它们是私有的，但可以被子类或扩展类访问。希望这会有所帮助，如果您有任何其他问题或我不明白您的问题，请告诉我，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:47:35.757

我建议在这里查看创建模式列表[http://en.wikipedia.org/wiki/Software_design_pattern](http://en.wikipedia.org/wiki/Software_design_pattern)

抽象工厂、构建器、工厂方法都可能适用于您正在寻找的东西。依赖注入不是您所要求的适当概念。DI 使在运行时连接事物和删除依赖项的硬编码变得更加容易。真的不是一回事。

# javascript - 上传前跨浏览器 JS-only 图像大小调整

> ID：15681910
> 
> 赞同：0
> 
> 时间：2013-03-28T12:32:11.753
> 
> 标签：javascript, jquery, image, resize

在使用 ajax 上传之前调整图像大小有哪些解决方案？请不要使用 flash-silverlight - 插件解决方案。

jQuery 解决方案非常受欢迎。

我正在研究一个使用画布的解决方案，但似乎缺乏对旧 IE 的图像质量和浏览器支持。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:22:23.983

这篇文章可能会对您有所帮助：[在 HTML5 中保存到 Web SQL 之前，有什么方法可以调整图像大小？](https://stackoverflow.com/questions/10867647/is-there-any-way-to-resize-a-image-before-saving-to-web-sql-in-html5)

来自 toDataURL 的 base64 数据可以发送到您的服务器，然后按照您的预期进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:58:28.513

@Raphael Jager：使用 javascript 中的 imgresize 选项来调整大小，在这里通过将属性说高度设置为固定值，您可以调整图像的大小，以获得相同宽高比的对应宽度。检查 gd 图像库以调整大小

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-28T12:34:47.307

出于安全目的，Javascript 无法在客户端计算机上本地读取文件。因此，恐怕没有解决办法。

# jquery - 仅在暂停后才使用 jQuery 的 CSS3 过渡？

> ID：15681912
> 
> 赞同：2
> 
> 时间：2013-03-28T12:32:23.170
> 
> 标签：jquery, css, css-transitions

我正在尝试使用 jQuery 添加 CSS3 过渡来更改样式的 CSS 属性。（我想这样做，`transform3d`但属性是动态的......）

这可能是一件非常愚蠢的事情，但我不知道为什么，如果我`alert`在更新 CSS 属性之前做一个，CSS3 过渡效果很好。如果没有，它不会。

我在这里有一个带有示例的 jsfiddle，`alert`如果您想了解我的意思，只需评论一下：http: [//jsfiddle.net/7WPT8/1/](http://jsfiddle.net/7WPT8/1/)

用于更新 CSS 的代码是：

```
//topPosition is the dynamic value
$(this).css('top', topPosition+'px'); 
```

只有在我使用`alert`之前它才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:36:36.197

您正在创建元素，`showFlash()`然后在使用该元素的地方直接调用该函数。序列中可能存在时间问题，`alert()`中断当前序列，因此它可以工作。

为了以简单的方式防止这种情况，请将您的直接添加`div`到您的内容中。

[http://jsfiddle.net/7WPT8/4/](http://jsfiddle.net/7WPT8/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:42:03.580

斯文是对的，这是一个时间问题。也可以通过使用最小超时来触发 css 属性的更改来避免这种情况（如果文档中的 flashmessage 从一开始就不是一个选项） - 检查[http://jsfiddle.net/7WPT8/5/](http://jsfiddle.net/7WPT8/5/)

（我在这里使用 var通过闭包将 jQuery 元素传递给匿名函数 - 否则，由于通过超时分开执行`_this`，它不会知道是什么。）`$(this)`

# vba - VBA中的字符串连接错误

> ID：15681924
> 
> 赞同：2
> 
> 时间：2013-03-28T12:32:51.647
> 
> 标签：vba, excel

我在连接 2 个字符串时遇到了一些问题。这是我正在做的事情：

```
 Dim bound1 As String
    Dim bound2 As String

    bound1 = "E6:E" & 6 + tTest_Threshold
    bound2 = "E" & 6 + index1 & ":E" & 6 + index2

    Worksheets(chipSheet1).Cells(currIteration + 7, 5).FormulaR1C1 = "=TTEST(" & bound1 & "," & bound2 & ",2,1)" 
```

但是，它正在打印：`=TTEST('E6':'E12','E8':'E14',2,1)`

我不明白，为什么`"'"`在Excel公式中打印。知道我在代码中做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:42:11.567

采用

```
 Worksheets(chipSheet1).Cells(currIteration + 7, 5).Formula = "=TTEST(" & bound1 & "," & bound2 & ",2,1)" 
```

代替

```
Worksheets(chipSheet1).Cells(currIteration + 7, 5).FormulaR1C1 = "=TTEST(" & bound1 & "," & bound2 & ",2,1)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T12:38:51.107

我怀疑它是因为您正在分配该`FormulaR1C1`属性，该属性需要与您正在使用的符号模式不同的符号模式。尝试填充`Formula`属性。

引用[此 MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/07417609-c70c-43d5-b495-d8db0f4e676c/)：

> Formula 以 A1 表示法返回公式，FormulaR1C1 以 R1C1 表示法返回公式。
> 
> 默认情况下，Excel 使用 A1 引用样式，它引用带有字母的列（A 到 IV，总共 256 列）并引用带有数字的行（1 到 65536）。这些字母和数字称为行标题和列标题。要引用单元格，请输入列字母，后跟行号。例如，D50 指的是 D 列和第 50 行交叉处的单元格。
> 
> 在 R1C1 参考样式中，工作表上的行和列都有编号。在 R1C1 样式中，Excel 用“R”后跟行号和“C”后跟列号来指示单元格的位置。例如，绝对单元格引用 R1C1 等价于 A1 引用样式中的绝对引用 $A$1。

# c# - 从内部面板表单中检索数据

> ID：15681929
> 
> 赞同：0
> 
> 时间：2013-03-28T12:33:03.290
> 
> 标签：c#, winforms

我有一个表单，它有一个面板，里面有一个打开的表单。

我希望能够从父表单的子表单中读取数据。

```
private void NewSwitch_Load(object sender, EventArgs e)
{
  newChild = new EnterSedol();
  newChild.TopLevel = false;
  newChild.AutoScroll = true;
  panel1.Controls.Add(newChild);
  newChild.Show();
}

private void GetValueFromChildButton(object sender, EventArgs e)
{
  textBox1.Text = //What here??
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:57:57.777

由于看起来 newChild 没有从 load 方法中声明，您应该能够直接引用它：

```
textBox1.Text = newChild.ButtonValue; 
```

如果尝试引用 newChild 表单中的控件，要么使控件可访问，要么在 EnterSedol 对象中设置属性，该对象将为您检索该信息。

在您的 EnterSedol 课程中：

```
public string ButtonValue {
  get { return button1.Text; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:02:53.760

如果您的面板中可能有许多表单，那么您可以使用 panel1 的 Controls 集合遍历它们。但是你必须知道如何区分它们。例如：

```
foreach (var frm in panel1.Controls)
  if (frm is EnterSedol &&
      /*frm is target form, for example there is needed tag...*/ )
    textBox1.Text = (frm as EnterSedol).GetData(); //Do your stuff 
```

# objective-c - '使用未声明的标识符'completedWithResult''

> ID：15681930
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:33:04.377
> 
> 标签：objective-c, xcode, push-notification, quickblox

当我尝试输入此代码时，Xcode 说我“使用了未声明的标识符 'completedWithResult'”。这是 Quickblox 上推送通知的代码。有一段代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /// Set QuickBlox credentials (You must create application in admin.quickblox.com)
    [QBSettings setApplicationID:XX];
    [QBSettings setAuthorizationKey:@"XX"];
    [QBSettings setAuthorizationSecret:@"XX"];
    //
    // If you use Push Notifications - you have to use lines bellow when you upload your application to Apple Store or create AdHoc.
    //

    [QBSettings useProductionEnvironmentForPushNotifications:YES];

    QBASessionCreationRequest *extendedAuthRequest = [QBASessionCreationRequest request];
    extendedAuthRequest.devicePlatorm = DevicePlatformiOS;
    extendedAuthRequest.deviceUDID = [[UIDevice currentDevice] uniqueIdentifier];
    extendedAuthRequest.userLogin = @"yourUserLogin";
    extendedAuthRequest.userPassword = @"yourUserPassword";

    [QBAuth createSessionWithExtendedRequest:extendedAuthRequest delegate:self];

    // QuickBlox queries delegate
    - (void)completedWithResult:(Result *)result{
        if(result.success){

            // Create session result
            if([result isKindOfClass:QBAAuthSessionCreationResult.class]){
                // register for receive push notifications
                [QBMessages TRegisterSubscriptionWithDelegate:self];

                // Register for receive push notifications result
            }else if([result isKindOfClass:QBMRegisterSubscriptionTaskResult.class]){
                // Congrats! Now you can receive Push Notifications!
            }
        }
    } 
```

错误在这一行：

```
 // QuickBlox queries delegate
        - (void)completedWithResult:(Result *)result{
            if(result.success){ 
```

它说'使用未声明的标识符'completedWithResult''

请问有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:34:57.660

您正在另一个方法中实现一个*方法*。这在 Objective-C 中是不允许的。`application:didFinishLaunchingWithOptions:`您可能只是错过了该方法的右括号。`}`用上面的第二个 ( `completedWithResult:`) 方法关闭它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:42:09.803

您不能在 Objective-C 的方法中实现方法。确保在类中实现该方法，而不是其他方法。

如果您还没有弄清楚，委托模式是 Cocoa 框架的一个简单但重要的部分：将您的方法放在委托类中，您代码的其他组件（在本例中为 QBAuth）将调用稍后。

# type-conversion - 将LESS中的rgba颜色定义字符串转换为颜色实例

> ID：15681931
> 
> 赞同：2
> 
> 时间：2013-03-28T12:33:10.867
> 
> 标签：type-conversion, less, mixins

假设我已经解析了我的 mixin 参数并且颜色是使用`rgba`函数提供的。

现在我想混合其中两种颜色，但 LESS`mix`函数需要 type 的参数实例`color`。

## 我试过的

...并且不起作用

1.  打电话`color("rgba(0,0,0,.5)")`
2.  `mix(@first, ~"@{second}")``@second`像这样的字符串在哪里`rgba(0,0,0,0.5)`

**如何转换为颜色？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:58:58.753

恐怕您不会在 LESS 中找到内置函数来执行此操作。

函数参数需要是`color()`十六进制或其简写形式。

但是您可以**使用 javascript 进一步解析字符串**以

*   提取单独的 r、g、b 和 alpha 值，
*   将各个值传递给`rgba()`函数以获取颜色类型的变量。

您可以在原始解析中执行第一步。如果您需要在 LESS 中完成所有操作，您可以执行以下操作：

```
 @color1: "rgba(255, 255, 0, 0.5)";
  @color2: ~`@{color1}.replace(/^(rgb|rgba)\(/,'[').replace(/\)$/,']').replace(/\s/g,'')`;
  @color3: rgba(unit(`@{color2}[0]`),unit(`@{color2}[1]`),unit(`@{color2}[2]`),unit(`@{color2}[3]`)); 
```

不幸的是，字符串不能直接读入`rgba()`或类似的函数，因为它们需要多个参数。即使使用字符串转义（例如`~`），输出也会被格式化为单个变量（`~"a, b, c"`成为`a, b, c`并充当 css 的单个输出字符串），因此我们需要单独获取每个值并将其传递给`rgba()`函数的相应参数/变量. 使用该函数`unit()`，我们将字符串转换为可以进一步使用的数字。

例如：

```
 @color4: mix(red,@color3);
  .test {
      color: @color4;
  } 
```

导致**CSS**：

```
 .test{
    color: rgba(255, 64, 0, 0.75);
  } 
```

# ruby - 如何用 Nokogiri 解析奇怪的 XML 文件？

> ID：15681933
> 
> 赞同：1
> 
> 时间：2013-03-28T12:33:18.830
> 
> 标签：ruby, nokogiri

我有以下 XML 文件，其中相同的节点在文件中重复，例如，我需要获取 'console & int' 的值/属性。

知道如何检索 'console & int' 的 'config' 父级，以便在获取 /values/property 之后获得？我遇到的问题是 'console' 和 'int' 处于同一级别，所以我不知道：

1.  如何同时查询“type=console”和“env=int”？
2.  一旦我能找到那些特定的节点，如何获得父节点？那么可以在正确的“配置”父节点之后检索“值/属性”吗？

我们需要使用的 XML 是：

```
<server>
  <propertySets>
    <config>
     <type>console</type>
     <env>int</env>
     <values>
         <property name="a">a</property>
         <property name="b">b</property>
     </values>
    </config>

    <config>
     <type>console</type>
     <env>test</env>
     <values>
         <property name="c">c</property>
         <property name="d">d</property>
     </values>
    </config>

    <config>
     <type>embedded</type>
     <env>int</env>
     <values>
         <property name="f">f</property>
         <property name="g">g</property>
     </values>
   </config>
 </propertySets>
</server> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:16:30.930

`xpath`非常灵活；您可以使用 XPath 查询直接执行您想要的操作：

```
xml = Nokogiri::XML::Document.parse( File.open('configs.xml' ) )
xml.xpath('/server/propertySets/config[type="console" and env="int"]/values/property[@name="a"]').text 
```

您无需一次性完成所有操作。任何时候的`xpath`结果都是与该访问器匹配的所有内容，因此您可以像这样获得您选择的配置块：

```
selected_config = xml.xpath('/server/propertySets/config[type="console" and env="int"]') 
```

然后获取您感兴趣的值：

```
property_a_value = selected_config.xpath('values/property[@name="a"]').text 
```

将其上下文保留在主文档中的结果`xpath`，因此您甚至可以扩展备份`selected_config`以查询下一个兄弟项目等。

# sql - 双重否定sql查询

> ID：15681935
> 
> 赞同：0
> 
> 时间：2013-03-28T12:33:24.200
> 
> 标签：sql, negation

我被要求使用双重否定在 sql 中进行查询。问题本身是询问所有“sigla”和“disciplina”，其中 semestre_id 为 21 并且至少有 1 个属性“resposta”=5

桌子 ![http://i.imgur.com/8CDoFHZ.png](../Images/8ad8005bc9af75e1c574eaae0e72a5fd.png)

询问 ![http://i.imgur.com/5aueUKS.png](../Images/09d3cf3948463894ffac5e9823cd25f8.png)

现在，尽管发布了所有这些，但我的问题主要是我不太确定这是否是在 sql 中进行正确双重否定的方法，因为我得到的答案是表中所有错误的行。由于我很难在网上搜索示例，任何人都可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:45:07.850

```
select  disc.disciplina_id, disc.sigla
from    ipdw_disciplina disc
        inner join ipdw_respostas resp
            on disc.disciplina_id = resp.disciplina_id
where   resp.semestre_id = 21
        and resp.resposta = 5
group by disc.disciplina_id, disc.sigla 
```

我尽量避免 in / not in 。没有它们似乎更容易遵循查询的意图。这看起来像一个非常直接的查询，不需要双重否定。

# c - 解释代码编译成功的原因

> ID：15681936
> 
> 赞同：2
> 
> 时间：2013-03-28T12:33:28.113
> 
> 标签：c, comments, c-preprocessor

通常，如果代码中存在`*/`*(block comment closing)*而没有`/*`*(block comment opening)*，编译器会产生错误。

但是，为什么编译器在以下情况下***不会***产生错误？

```
#include <stdio.h>
int main(void)
{
    #ifdef abcd
    printf("what ever it is");
    #endif */   --> the problem with this stray '*/' after #endif
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:50:28.857

我刚刚编译了您使用 gcc 4.6.x 提供的代码，没有任何标志并收到警告

```
warning: extra tokens at end of #endif directive [enabled by default] 
```

所以预处理器首先删除所有注释，然后跳过#endif 行的所有数据。所以我不知道这是一个错误还是一个功能，但我收到了关于它的警告，所以开发人员知道这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T12:41:32.670

有根据的猜测：这严格来说是预处理器中的一个错误，它所做的是忽略 a 之后的所有`#endif`内容，无论如何都不能跟随任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:15:56.673

首先，由于`*/`不是注释的一部分，因此在 C 2011 (n1570) 5.1.1.2 1 3 中描述的翻译阶段 3 中将其忽略；字符只是通过不变。

因此，在第 4 阶段（执行预处理器指令），编译器看到`#endif */`. 根据 C 2011 (n1570) 6.10 1，`#endif`指令的正确语法是：

```
# endif new-line 
```

也就是说，它由三个预处理标记 ,`#`和`endif`一个换行符组成，标记之间允许有空格和制表符。所以`#endif */`不是正确的语法。

如果源违反语法规则，5.1.1.3 需要符合要求的实现来产生诊断消息。因此，如果编译器在这种情况下没有产生警告或错误消息，则它不符合要求。

某些编译器默认以不符合 C 标准的模式运行。你的编译器可能有一些开关来改变它，比如 GCC 的`-std=c99`开关。如果您的编译器在符合模式下没有发出警告或错误消息，那么这是一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:39:19.830

如果我收到您的问题：

```
/*
#ifdef abcd
printf("what ever it is");
#endif */ 
```

您从一开始就删除了“/ *”并且代码无法编译？

这很好，因为代码不应该编译。你有一个没有开始的评论。

你可以做的是*用“//* /”替换“/”：

```
/*
#ifdef abcd
printf("what ever it is");
#endif //*/ 
```

这样您就可以毫无问题地从一开始就删除“/*”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:39:44.960

```
#endif */ 
```

那是块注释的结尾，块注释在哪里打开？

```
/* 
```

# php - PHP 连接到 Sybase ASE 问题

> ID：15681938
> 
> 赞同：1
> 
> 时间：2013-03-28T12:33:30.730
> 
> 标签：php, sybase, sap-ase

1 - 是否需要在 PHP 服务器机器上安装 ASE 才能连接到远程 Sybase ASE 数据库？

2 - 有没有办法不使用 sql.ini (interfaces) 文件？

3 - 有没有一种方法可以连接到远程 Sybase ASE 数据库而不需要对 PHP 服务器机器进行任何修改？

（我正在运行 PHP 5.3.2，Windows Server）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:39:28.407

1.  使用 sybase_connect，如果您在 SQL.ini 文件中定义了服务器主机名，您可以从机器连接到另一台机器

2.  我真的不知道，因为我一直使用接口文件。您可以在运行时使用类似的东西指定 sql.ini 文件的路径

    putenv ("SYBASE=/usr/local/path_to_ini_directory");

3.  并不真地。您的 PHP 服务器上需要一个 sybase 驱动程序

我主要使用 unix 服务器，而不是使用普通的 Sybase 驱动程序/OCS 等，我通常使用 freetds 实现。在 Windows 上，您可以在 PHP 服务器上安装 OCS 驱动程序。

# extjs - Sencha Touch 2 - 执行顺序/优先级

> ID：15681942
> 
> 赞同：0
> 
> 时间：2013-03-28T12:33:35.517
> 
> 标签：extjs, sencha-touch-2

我正在构建一个启动计时器的测试脚本，执行一些随机操作，然后关闭计时器并报告执行所需的时间。这是我到目前为止得到的：

```
Ext.define('project.view.test', {
extend: 'Ext.Panel',
xtype: 'test',

config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'test',
    tpl: '<p id="time"></p>'
},
initialize: function() {
    this.measureTime();
},
measureTime: function() {
    var startTime=new Date();
    a = 2;
    for(i=0; i<1000; i++) {
        a = a*a*a*i;
    }
    var b=Math.floor((new Date()-startTime)/100)/10;
    document.getElementById('time').innerHTML = b;
}

}); 
```

这里的问题是我得到了错误：

```
Uncaught TypeError: Cannot set property 'innerHTML' of null 
```

我的猜测是在执行 JS 代码之后呈现 html p-tag。真的吗？我以为脚本是逐个操作执行的，而 htmlcode 在 js-code 之上，这让我有点困惑。

我试图将 javascript 放在 html/tpl 标记中（在配置中）。它消除了错误，但没有写出任何内容。为什么？一切执行的顺序是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:07:06.153

我假设你想在`b`里面赋值`<p id="time"></p>`

您的最终结果应该是这样的，`<p id="time">0</p>`因为您的`b`值始终为 0。

首先，给你的面板一个`itemId`：

```
itemId: 'test' 
```

然后您可以使用以下方法引用该面板的 dom 元素：

```
var panel = Ext.ComponentQuery.query('#test')[0].element.dom; 
```

并使用`innerText`而不是设置值`innerHTML`：

```
panel.innerText = b; 
```

顺便说一句，请记住，由于您没有使用任何商店，因此`data`配置是强制性的

这是演示：[http ://www.senchafiddle.com/#Y30Ul](http://www.senchafiddle.com/#Y30Ul)

# java - jquery更新表值

> ID：15681948
> 
> 赞同：0
> 
> 时间：2013-03-28T12:33:49.990
> 
> 标签：java, jquery, ajax, spring

我有一个保龄球游戏的应用程序。球员的名字和他们的分数一起列出。当按下“滚动”按钮时，分数将更新。问题是，除非刷新页面，否则更新的分数不会出现在屏幕上。

如果有人可以提供帮助，我将不胜感激！

这是主播放页面的样子：

```
Welcome players!

1:  John:   0

2:  Mark:   0

3:  Paolo:  0

Pins :  

Roll: 0 
```

这是 UserController.java 文件：

```
 package ajaxbowlgame;

 import java.util.ArrayList;
 import java.util.List;

 import org.springframework.stereotype.Controller;
 import org.springframework.ui.ModelMap;
 import org.springframework.validation.BindingResult;
 import org.springframework.validation.ValidationUtils;
 import org.springframework.web.bind.annotation.ModelAttribute;
 import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class UserController {
GameProperties gameProps = new GameProperties();
int htmlPlayerNo = 0;

private List<Player> players = new ArrayList<Player>();
private int currPlayScore;
private int roll;
private boolean showStrike;
private int playerNo = 0; 

@RequestMapping(value="/AddUser.htm",method=RequestMethod.GET)
public String showForm(){
    return "AddUser";
}

@RequestMapping(value="/AddUser.htm",method=RequestMethod.POST)
public @ResponseBody JsonResponse addUser(@ModelAttribute(value="player") Player player, BindingResult result){
    JsonResponse res = new JsonResponse();
    ValidationUtils.rejectIfEmpty(result, "name", "Name can not be empty.");
    if(!result.hasErrors()){
        htmlPlayerNo++;
        player.setHtmlPlayerNo(htmlPlayerNo);
        players.add(player);
        res.setStatus("SUCCESS");
        res.setResult(players);
    }else{
        res.setStatus("FAIL");
        res.setResult(result.getAllErrors());
    }
    return res;
}

@RequestMapping(value = "/play.htm", method = {RequestMethod.POST})
public String playPage(GameProperties gamePropsIn, ModelMap model) {

    players.get(playerNo).setScore(currPlayScore);
    players.get(playerNo).setRoll(roll +1);
    gameProps.setRoll(roll);
    model.addAttribute("players", players);

    Player currPlay = players.get(playerNo);
    int pins = gamePropsIn.getPins();

    currPlay.getGame().roll(pins);

    if (pins == 10) {
        showStrike = true;
    } else {
        showStrike = false;
    }

    currPlayScore = currPlay.getGame().score();     
    roll = currPlay.getGame().getRoll();

    model.addAttribute("roll", roll);
    model.addAttribute("pins", pins);

    if (playerNo < players.size()-1){
        playerNo++;

    }else{
        playerNo = 0;           
    }
    if (showStrike ) {
        gameProps.setStrikeMessage("Well done, you hit a strike!");
    } else {
        gameProps.setStrikeMessage("");
    }

    return "play";              
}   
} 
```

这是 play.jsp：

```
 <%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<html>
<head>
    <title>Ajax-JQuery Bowling</title>
    <script src="/ajaxbowlgame/js/jquery.js"></script>
    <script type="text/javascript">
    function rollBall() {
        var pins = $('#pins').val();

        $.ajax({
            type: "POST",  
            url: "/ajaxbowlgame/play.htm",  
            data: "pins=" + pins,  
            success: function(response){  
              // we have the response
              $('#pins').val(''); 

            },  
            error: function(e){  
              alert('Error: ' + e);  
            }  
          });
    }
    </script>

</head>
<body>

    <h2>Welcome players!</h2>

    <table id = "playerslist">
    <c:forEach var="player" items="${players}">
    <tr><td>${player.htmlPlayerNo}:</td><td>${player.name}:</td><td  id="plScore">${player.score}</td></tr>
    </c:forEach>
</table> 
<table>
    <tr><td> Pins: </td><td> <input id="pins"><br/></td></tr>
<tr><td colspan="1"><input type="button" value="Roll" onclick="rollBall()"><br/></td></tr>
</table>
    Roll: <span id="roll">0</span>

    <h2> ${command.strikeMessage}</h2>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:39:05.017

当你滚动球时，你跟注`play.html`。当该调用完成时，您所做的就是清除`#pins`. 这是您必须更新分数的地方；在`success`回调。

# eclipse - 自动将 throws RuntimeException 添加到方法中？

> ID：15681951
> 
> 赞同：1
> 
> 时间：2013-03-28T12:33:52.560
> 
> 标签：eclipse, runtimeexception

我正在使用 Eclipse，当一个方法可以抛出 RuntimeException 时，Eclipse 没有任何提示，`throw RuntimeException`在方法签名之后丢失了。

我知道这是有意的，因为不必处理 RuntimeException。然而，自动添加`throw RuntimeException`还会在 javadoc 模板（通过键入创建的模板`/**`）中包含 runtimeException，因此我不会忘记记录可能的 RuntimeExceptions。

关于这个问题的任何提示？如何确保我不会忘记记录 RuntimeExceptions？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T13:06:32.277

您不必声明运行时异常，因为它们是未例外的。如果你除了有一些异常，你需要通过声明一个新的异常在代码中明确声明它。

您需要声明一种方法来抛出 RuntimeException 的一种特定情况是 GWT 在客户端正确处理它们（而不是一般错误 500）。

# wxwidgets - wxWidgets 2.8 到 wxWidgets 2.9：wxLocale 问题

> ID：15681952
> 
> 赞同：3
> 
> 时间：2013-03-28T12:33:52.763
> 
> 标签：wxwidgets

我做了一些转移工作来处理一些用 wxWidgets 2.8 编写的代码，现在需要转移到 wxWidgets 2.9。

我这样定义：

```
wxLocale m_locale; 
```

并使用

```
m_locale.Init(iLocale, wxLOCALE_CONV_ENCODING) 
```

（这里 iLocale 是一个值为 58 的 int）。

现在 wx 告诉我：

....\src\common\intl.cpp(361): assert "!(flags & wxLOCALE_CONV_ENCODING)" failed in wxLocale::Init(): wxLOCALE_CONV_ENCODING 不再受支持，将字符集添加到您的目录

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T16:30:46.353

wxLOCALE_CONV_ENCODING 似乎已被弃用。尝试省略这个标志（只是不要使用它）。当我升级我的 wxwidgets 版本（2.8 到 3.0）时，我遇到了同样的问题，它工作正常。

# java - 在jsp中以条形图的形式显示string-Double

> ID：15681953
> 
> 赞同：0
> 
> 时间：2013-03-28T12:33:53.617
> 
> 标签：java, jsp, web-applications, servlets

我想以条形图的形式显示某些值。以下是我拥有的数据集

```
List<Double> centralityList = (List<Double>) request
            .getAttribute("centralityList");

List<String> labelList = (List<String>) request
            .getAttribute("labelList"); 
```

这些值我从servlet获取到jsp，最后在jsp中我想将标签列表显示为x轴，中心度列表显示为y轴。这是存储在以下列表中的每个标签的相应中心度值分别显示在条形图格式。

在数据集中给出什么？

我正在尝试使用 jfreeChart，但有些数据集将双值作为参数

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:45:25.567

JFreechart 不支持单独列表中的 X 和 Y 坐标，因为在二维图表上形成一个点需要一对 X 和 Y 坐标。您可以使用 XYSeriesCollection，如[使用 JfreeChart 动态添加点到 XYSeries 中所述](https://stackoverflow.com/questions/7205742/adding-points-to-xyseries-dynamically-with-jfreechart)。我希望这会有所帮助。

# scons - 如何使用 scons 在调试模式下获取可执行文件

> ID：15681961
> 
> 赞同：2
> 
> 时间：2013-03-28T12:34:16.337
> 
> 标签：scons

我正在使用 scons 与 vc10 和 Renesas 编译器进行编译。

是否有任何命令可以在调试模式下获取可执行文件？

如果我使用命令“并输入”执行我的项目，`scons`它将进入发布模式。

我无法使用 Visual Studio 调试器调试该 .exe 文件。

谁能告诉我如何在调试模式下获得调试可执行文件？scons 中是否有要设置的命令或标志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:17:46.787

要在调试模式下获得可执行文件，只需将适当的编译器调试标志添加到 CXXFLAGS 构造变量中，如下所示：

```
env = Environment()
env.Append(CXXFLAGS = ['/DEBUG']) 
```

但这是相当基本的，我想您希望能够通过命令行控制何时以调试模式编译可执行文件。这可以通过命令行目标或命令行选项来完成（例如 debug=1）

要使用目标，您可以执行以下操作：

```
envRelease = Environment()
envDebug = Environment()
envDebug.Append(CXXFLAGS = ['/DEBUG'])

targetRelease = envRelease.Program(target = 'helloWorld', source = 'helloWorld.cc')
# This makes the release target the default
envRelease.Default(targetRelease)

targetDebug = envDebug.Program(target = 'helloWorldDebug', source = 'helloWorld.cc')
envDebug.Alias('debug', targetDebug) 
```

如果您在没有命令行目标的情况下执行 SCons，则将按照`envRelease.Default()`函数的指定构建发布版本。如果您使用调试目标执行 SCons，如下所示：`scons debug`然后将按照`envDebug.Alias()`函数的指定构建调试版本。

另一种方法是使用命令行参数，例如: `scons debug=0`or `scons debug=1`，这将允许您在构建脚本中执行一些逻辑，从而允许您更轻松地控制变量目录等，如下所示：

```
env = Environment()

# You can use the ARGUMENTS SCons map
debug = ARGUMENTS.get('debug', 0)
if int(debug):
   env.Append(CXXFLAGS = ['/DEBUG'])
   env.VariantDir(...)
else:
   env.VariantDir(...)

env.Program(target = 'helloWorld', source = 'helloWorld.cc') 
```

[在此处](http://www.scons.org/doc/1.1.0/HTML/scons-user/x2361.html)查看更多命令行处理选项。

我更喜欢的最后一个选择是始终构建两个版本，每个版本都在各自的 variantDir 中（例如 build/vc10/release 和 build/vc10/debug）。

```
envRelease = Environment()
envDebug = Environment()
envDebug.Append(CXXFLAGS = ['/DEBUG'])

envRelease.VariantDir(...)
targetRelease = envRelease.Program(target = 'helloWorld', source = 'helloWorld.cc')
# This makes the release target the default
envRelease.Default(targetRelease)
# This allows you to only build the release version: scons release
envRelease.Alias('release')

envDebug.VariantDir(...)
targetDebug = envDebug.Program(target = 'helloWorld', source = 'helloWorld.cc')
# This makes the debug target get built by default in addition to the release target
envDebug.Default(targetDebug)
# This allows you to only build the debug version: scons debug
envDebug.Alias('debug') 
```

# c - 进程未终止

> ID：15681962
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:34:22.150
> 
> 标签：c, tcp

我的客户端-服务器应用程序中发生了一些奇怪的事情。请看一下这些简单的分叉客户端/服务器：客户端：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <time.h>
#include <arpa/inet.h>
#include <string.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <sys/time.h>
#include <errno.h>
#include <sys/time.h>
#include <sys/wait.h>

#define IP_SERVER "192.168.1.89"
#define PORT_SERVER 65000
#define BUFFERSIZE 1024
#define NUMFILES 3

double timeElapsed(struct timeval* before, struct timeval* after) {

  return after->tv_sec - before->tv_sec + (double) (after->tv_usec - before->tv_usec)/1000000;
}

void getFile(char *request, struct sockaddr_in server) {

  char buffer[1024];
  int sockProc, res;
  int file;
  int sizeServ = sizeof(server);
  int writeFile;

  sockProc = socket(AF_INET, SOCK_STREAM, 0);

  if (sockProc < 0) {
      printf("Error on creating socket client\n");
      perror("");
      exit(1);
  }

  file = open(request, O_CREAT | O_WRONLY, S_IRWXU);

  res = connect(sockProc, (struct sockaddr*)&server, (socklen_t)sizeServ);
  if (res < 0) {
      printf("Error on connecting to server!\n");
      perror("");
      exit(1);
  }

  res = send(sockProc, (void*)request, strlen(request), 0);

  memset(buffer, 0, sizeof(buffer));

  while((res = recv(sockProc, (void*)buffer, sizeof(buffer), 0)) > 0) {
      write(file, (void*)buffer, strlen(buffer));
      memset(buffer, 0, sizeof(buffer));
  }

  close(sockProc);
  close(file);
  return;

  }

  int main(int argc, char** argv) {

  int sockCli, res, i;

  struct sockaddr_in server;
  int sizeServ = sizeof(server);
  memset(&server, 0, sizeof(server));
  server.sin_family = AF_INET;
  inet_pton(AF_INET, IP_SERVER, &server.sin_addr);
  server.sin_port = htons(PORT_SERVER);

  char files[NUMFILES][32];
  char nameFile[32];

  char command[32] = "rm *.txt";

  system(command);

  struct timeval begin;
  struct timeval end;

  pid_t processes[NUMFILES];

  for(i = 0; i<NUMFILES; i++) {

      memset(nameFile, 0, sizeof(nameFile));
      printf("Inserisci nome file (con estensione) da ricevere:\n");
      scanf("%s", nameFile);
      strcpy(files[i], nameFile);

  }

  gettimeofday(&begin, NULL);

  for(i=0; i<NUMFILES; i++) {

      pid_t child = fork();

      if(child == 0) {
          getFile(files[i], server);
          exit(0);
      }

      else {
          processes[i] = child;
          continue;
      }

  }

  /*for(i=0; i<NUMFILES; i++) {
      waitpid(processes[i], NULL, 0);
  }*/

  wait(NULL);

  gettimeofday(&end, NULL);
  printf("Time elapsed on TCP is %f seconds\n", timeElapsed(&begin, &end));
  return 0;

  } 
```

和服务器：

```
#include <sys/socket.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <time.h>
#include <arpa/inet.h>
#include <string.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <sys/stat.h>

#define IP_SERVER "192.168.1.89"
#define PORT_SERVER 65000
#define BUFFERSIZE 1024

void execRequest(int* sockCli, struct sockaddr_in* client) {

  char buffer[BUFFERSIZE];
  char request[BUFFERSIZE];
  int res;

  memset(request, 0, sizeof(request));

  res = recv(*sockCli, (void*)request, sizeof(request), 0);

  if(res < 0) {
      printf("Error on recv()\n");
      perror("");
      exit(1);
  }
  printf("Requested file %s\n", request);

  char resource[32] = "files/";
  strcat(resource, request);

  int file = open(resource, O_RDONLY);

  if (file < 0) {
      printf("File %s does not exist\n", request);
      exit(1);
  }

  memset(buffer, 0, sizeof(buffer));

  while((res = read(file, (void*)buffer, sizeof(buffer))) > 0) {
      send(*sockCli, (void*)buffer, strlen(buffer), 0);
      memset(buffer, 0, sizeof(buffer));
  }

  close((*sockCli));
  close(file);
  free(sockCli);
  free(client);

  return;

  }

int main(int argc, char** argv) {

  int sockServ, i, res;
  int *sockCli;

  struct sockaddr_in server;
  struct sockaddr_in* client;

  sockServ = socket(AF_INET, SOCK_STREAM, 0);

  if(sockServ < 0) {
      printf("Error in creating socket\n");
      perror("");
      exit(1);
  }

  memset(&server, 0, sizeof(server));
  server.sin_addr.s_addr = inet_addr(IP_SERVER);
  server.sin_port = htons(PORT_SERVER);
  server.sin_family = AF_INET;

  int reuse = 1;
  res = setsockopt(sockServ, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(int));
  if (res < 0) {
      printf("setsockopt() REUSEADDR failed\n");
      perror("");
      exit(1);
  }

  res = bind(sockServ, (struct sockaddr*)&server, sizeof(server));
  if (res < 0) {
      printf("Error on bindind TCP server!\n");
      perror("");
      exit(1);
  }

  res = listen(sockServ, 5);
  if (res < 0) {
      printf("Error on listening TCP server!\n");
      perror("");
      exit(1);
  }

  while(1) {

      sockCli = (int*)malloc(sizeof(int));
      client = (struct sockaddr_in*)malloc(sizeof(struct sockaddr_in));
      int sizeClient = sizeof(struct sockaddr_in);

      *sockCli = accept(sockServ, (struct sockaddr*)client, &sizeClient);

      if ((*sockCli) < 0) {
                printf("accept() failed\n");
        perror("");
        continue;
      }

      printf("Connected to %s:%d\n", inet_ntoa(client->sin_addr), client->sin_port);

      if( !fork() ) {

          execRequest(sockCli, client);
          exit(0);

      }

      else
          continue;

}

  return 0;

  } 
```

这很奇怪。即使服务器关闭套接字，客户端创建的进程也不会终止，因此 recv() 应该返回 0 并让客户端进程退出循环。此外，读取文件有一些奇怪的地方：服务器只是读取 files.txt，但在执行此操作时，它在读取的字符中包含字符串“.txt”并将所有这些混合物发送给客户端……为什么？它们是简单的文件单字符，例如 aaaaaaaaaaaaaaaaa aaaaaaaaaaaaaaaaa

但服务器读取并发送：

aaaaaaaaaaaaaaaaaa.txt aaaaaaaaaaaaaaaaaa

我能解决这一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:37:57.200

您不能使用`strlen(buffer)`，仅仅因为您正在从文本文件中加载字符并不意味着`buffer`它将是一个有效的字符串，除非您采取措施确保它是有效的。而你没有；没有终止，因为您可以`buffer`使用文件中的数据填充所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:06:25.520

我们必须在 Stack Overflow 上播放多少次破纪录？[不要施放 malloc](http://c-faq.com/malloc/mallocnocast.html)！

我将此错误归咎于*未能阅读手册*，找出*要包含的标题*，*字符串是*什么（以及 strlen/strcat/str*{anything}* 对其输入的期望，printf 对参数的期望对应于`%s`格式说明符等）以及*read/recv 产生*的内容。

```
res = recv(*sockCli, (void*)request, sizeof(request), 0);
if(res < 0) {
    printf("Error on recv()\n");
    perror("");
    exit(1);
}
printf("Requested file %.*s\n", res, request); // NOTE the field width provided by 'res' 
```

根据手册，例如`res = read(file, (void*)buffer, sizeof(buffer))`应该存储错误或长度的示例。条件确保代码只有在它是一个*长度*`send`值时才会执行，那么为什么不把它当做一个呢？?*`send(*sockCli, (void*)buffer, res, 0);`*

 *这些问题的出现似乎表明你的学习方法行不通。你在看哪本书？不看书学习 C 有点像不交流就知道哪些浆果有毒。*

# c# - ASP.NET MVC4 代码优先 - 数据验证不起作用

> ID：15681966
> 
> 赞同：3
> 
> 时间：2013-03-28T12:34:34.140
> 
> 标签：c#, asp.net-mvc, entity-framework, razor, asp.net-mvc-4

我对表单中的数据验证有疑问。我在模型中声明了错误消息，但它似乎在视图中没有任何影响。我有以下模型：

```
public class Dog
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Display(Name = "Id")]
    public int Id { get; set; }

    [Display(Name = "Name")]
    [StringLength(20)]
    public string Name { get; set; }

    [Display(Name = "Value")]
    [Range(1, int.MaxValue, ErrorMessage="Minimum value is 1")]
    public int Value { get; set; }
} 
```

在视图中我有这个：

```
<div class="editor-field">
@Html.EditorFor(model => model.Value)
@Html.ValidationMessageFor(model => model.Value)
</div> 
```

问题是当用户选择输入小于 1 的数字时没有错误消息，如您在此处看到的：

![在此处输入图像描述](../Images/b750fb9fb203c816f86bc64f8fccd668.png)

我在这里想念什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:38:21.483

从没有标签、没有引用或任何提及 jQuery 验证的情况来看，我们可以安全地看到您正在尝试验证**良好的老式方式**（开箱即用方式）。

您必须在您的 post 方法中自己**调用**`ModelState.IsValid`验证，方法是调用. 如果失败，错误消息将显示在错误字段上。你有过这样的事情：

```
[HttpPost]
public ActionResult Edit (Dog model)
{
    if (ModelState.IsValid)
    {
        //He's a good dog, save him, then redirect elsewhere
    }
    else
    {
        //He's a bad dog, return the same view and the errors are shown
        return View(model);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:02:19.457

根据评论中的要求，我将其添加为答案：

添加对[jQuery Validation 插件的引用](http://nuget.org/packages/jQuery.Validation/)

# java - 使 JPopupMenu 不关闭项目选择

> ID：15681972
> 
> 赞同：1
> 
> 时间：2013-03-28T12:34:49.907
> 
> 标签：java, swing, jmenuitem, jpopupmenu

这就是我想做的。我正在制作一个建议单词的弹出窗口，一次 10 个，并可以选择显示接下来的 10 个建议。我将它设计为一​​个 JPopupMenu，有 11 个项目；10 条建议和一个“显示更多...”选项。

![在此处输入图像描述](../Images/f8d0070873bb0708b804b140792f0155.png)

在“显示更多...”上运行的代码会删除所有以前的项目，并添加新的项目（足够简单）。

问题是当我按下“显示更多...”时，JPopupMenu 会关闭（我认为这是默认行为）。我已经尝试过解决这个问题，即使创建一个全新的弹出窗口并将其显示在同一位置。

有没有一种简单的方法可以让 JPopupMenu 在按下其中一个项目时不消失？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:49:03.947

我一直将它用于复选框项目：

```
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JComponent;
import javax.swing.MenuSelectionManager;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.basic.BasicCheckBoxMenuItemUI;

public class StayOpenCheckBoxMenuItemUI extends BasicCheckBoxMenuItemUI {

    @Override
    protected void doClick(MenuSelectionManager msm) {
        menuItem.doClick(0);
    }

    public static ComponentUI createUI(JComponent c) {
        return new StayOpenCheckBoxMenuItemUI();
    }

} 
```

然后，注册它：

```
myJCheckBoxMenuItem.setUI(new StayOpenCheckBoxMenuItemUI()); 
```

根据您的“显示更多”项是什么类型的菜单项，类似的解决方案应该可以工作。只需子类化正确的 UI 而不是`BasicCheckBoxMenuItemUI`.

# javascript - 如何将 Solr JSON 响应转换为 HTML，而 JSON 每次都不同

> ID：15681976
> 
> 赞同：0
> 
> 时间：2013-03-28T12:34:56.347
> 
> 标签：javascript, json, solr

我正在使用 Solr 4 在 Java Web 应用程序中进行搜索。Solr 产生一个 JSON 响应，我必须从中提取搜索结果并将它们翻译成 html，以便用户可以阅读。我知道一种解决方案，但它似乎很愚蠢，我认为必须有聪明的想法。

```
{
  "responseHeader": {
    "status": 0,
    "QTime": 0,
    "params": {
      "fl": "id,title",
      "indent": "true",
      "q": "solr",
      "wt": "json"
    }
  },
  "response": {
    "numFound": 3,
    "start": 0,
    "docs": [
      {
        "id": "1",
        "title": "Solr cookbook"
      },
      {
        "id": "2",
        "title": "Solr results"
      },
      {
        "id": "3",
        "title": "Solr perfect search"
      }
    ]
  }
} 
```

之后，我将此文本评估为：

```
var obj = eval ("(" + txt + ")"); 
```

要生成 html 页面，我可以使用

```
 <script>
document.getElementById("id").innerHTML = obj.response.docs[1].id
document.getElementById("title").innerHTML = obj.response.docs[1].title
</script>

or

document.write(obj.response.docs[1].id); 
```

但限制是每次 solr 给出不同对象结构的响应，即一个对象可能有年龄字段，但其他对象不能有，因为它取决于查询。

* * *

> 我想使用一个单一的 JSP 页面来显示所有搜索查询的搜索结果（如 Google）

* * *

是否可以编写一个代码段，该代码段适用于具有不同架构的任何可能的搜索结果。

遇到我的情况可能出现的任何错误后，Javascript 将停止工作。这也是问题。如果我使用 for 循环来遍历对象层次结构，它很容易出错。

是否可以使用单个视图页面谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:36:58.433

我建议使用 Solr 很容易支持的 Velocity 模板——而不是从 JSON 中提取数据并通过 JS 呈现 HTML。

文档[**在这里**](http://wiki.apache.org/solr/VelocityResponseWriter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:28:25.847

您可能需要考虑使用[ajax-solr](https://github.com/evolvingweb/ajax-solr) -*用于创建 Solr 用户界面的 JavaScript 框架*

# windows-phone - 用于 Windows 手机的 Spotify Web API

> ID：15681980
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:05.637
> 
> 标签：windows-phone, spotify, libspotify

我正在开发 Windows Phone 8 应用程序，我想在其中获得 Spotify 用户的推荐曲目。我想将用户的这些曲目添加到我的应用程序的收藏夹中。我需要登录并获取可以在我的应用程序中显示的曲目列表和详细信息。有适用于 Windows（Win32）的 Spotify 库。这个库也可以用于 Windows Phone 吗？如果有人知道如何将 spotify 集成到 Windows Phone 中，请告诉我。

谢谢，曼马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:16:23.713

Win32 libspotify 库不能在 Windows 手机上使用，并且基于 REST 的 Web API 无法满足您的要求。不幸的是，没有可用于 Windows Phone 的全功能 API。

# zend-framework2 - ZF2 字段集和表单绑定

> ID：15681981
> 
> 赞同：3
> 
> 时间：2013-03-28T12:35:05.997
> 
> 标签：zend-framework2, zend-form

我正在尝试使用带有两个字段集的表单创建一个页面，每个字段集应该填充一个不同的表。

我可以像在相册教程中一样轻松地创建一个表单，并像这样绑定数据：

```
 $pageForm  = new PageForm();
    $pageForm->bind($page); 
```

我的 PageForm 类如下：

```
class PageForm extends Form
{

    public function __construct($name = null)
    {
        // we want to ignore the name passed
        parent::__construct('page');
        $this->setAttribute('method', 'post');    

        $this->add(array(
            'name' => 'id',
            'attributes' => array(
                'type'  => 'hidden',
            ),
        ));
    } /// and a bunch of other elements 
```

但如果我将这些元素放入字段集中，则绑定不再有效，此外我需要将每个字段集绑定到单独的表，并且一旦提交表单，它们需要保存到单独的表中。

我将如何解决这个问题，我想我可以使用两种形式来做到这一点，但这可能不是正确的方法（如果我正确理解字段集的概念）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:33:49.033

您必须在每个 Fieldset 中使用 setObject 并为其提供水合器。例如：

```
<?php
// file My/Form/Product.php

namespace My\Form;

use Zend\Form\Fieldset;
use My\Entity\Product as ProductEntity;
use Zend\Stdlib\Hydrator\ClassMethods();

class Product extends Fieldset
{
    public function __construct($name = 'product')
    {
        parent::__construct($name);
        $this->setObject(new ProductEntity())
             ->setHydrator(new ClassMethods());

        $this->add(array(
            'name' => 'name',
            'options' => array('label' => 'Product name'),
        ));

        // Brand fieldset
        $brand = new Brand();
        $this->add($brand);
    }
}

// File My/Form/Brand.php
namespace My\Form;

use Zend\Form\Fieldset;
use My\Entity\Brand as BrandEntity;
use Zend\Stdlib\Hydrator\ClassMethods();

class Brand extends Fieldset
{
    public function __construct($name = 'brand')
    {
        parent::__construct($name = 'brand');
        $this->setObject(new BrandEntity())
             ->setHydrator(new ClassMethods());

        $this->add(array(
            'name' => 'name',
            'options' => array('label' => 'Brand name'),
        ));
    }
}

// File My/Form/ProductForm.php
namespace My\Form;

use Zend\Form\Form;
use My\Entity\Product as ProductEntity;
use Zend\Stdlib\Hydrator\ClassMethods();

class ProductForm extends Form
{
    public function __construct($name = 'product')
    {
        parent::__construct($name);
        $this->setObject(new ProductEntity())
             ->setHydrator(new ClassMethods());

        // Product Fieldset
        // Here, we define Product fieldset as base fieldset
        $product = new Product();
        $product->setUseAsBaseFieldset(true);
        $this->add($product);
    }
}

// In Module.php
// ...
    public function getServiceConfig()
    {
        return array(
            'invokables' => array(
                'My\Form\Product' => 'My\Form\Product',
            ),
        );
    }
// ...

// In Controller
// You don't need to use $form->bind($productEntity), except if you're editing a product.
// The form already has an Object, do you remenber??? "$this->setObject(new ProductEntity())" on form???

// ...
    $form = $this->getServiceLocator()->get('My\Form\Product');
// ... 
```

# java - 如何在 JDesktopPane 中设置背景图像

> ID：15681984
> 
> 赞同：-1
> 
> 时间：2013-03-28T12:35:17.513
> 
> 标签：java, swing, background, jdesktoppane

我想设置 JDesktopPane 的背景（我直接`JDesktopPane`从调色板添加到`JFrame`

我尝试覆盖该方法 `public void paintComponent (Graphics g)`，但它不起作用

这是代码：

```
JDesktop p = new JDesktop();
ImageIcon icon = new ImageIcon("images/Nénuphars6892.jpg");
final Image img = icon.getImage();
img.getScaledInstance(159, 207, Image.SCALE_SMOOTH);
p.principal = new JDesktopPane() {
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(img, 0, 0, getSize().width, getSize().height, this);
    }
};
p.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:08:58.613

我通过在创建 JDesktopPane 时添加选择**自定义代码**（变量主体）来解决此问题：

```
principal = new javax.swing.JDesktopPane()

{
    ImageIcon icon = new ImageIcon("images/blue_digital_waves_abstract.jpg");
    Image image = icon.getImage();

    Image newimage = image.getScaledInstance(1500, 1000, Image.SCALE_SMOOTH);

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawImage(newimage, 0, 0, this);
    }
}

; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-21T20:21:44.840

```
JDesktopPane desktopPane = new JDesktopPane() {

    private final ImageIcon image = new ImageIcon("sample.jpg");;

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        int x = (desktopPane.getWidth() - image.getIconWidth()) / 2;
        int y = (desktopPane.getHeight() - image.getIconHeight()) / 2;
        g.drawImage(image.getImage(), x, y, this);
    }
}; 
```

# dojo - 使用 node.js 在命令行上运行 DOH

> ID：15681986
> 
> 赞同：1
> 
> 时间：2013-03-28T12:35:23.297
> 
> 标签：dojo, doh

我第一次尝试在命令行上使用 Dojo 1.8.3 运行测试 `node`被以下错误消息阻止：

```
../dojo/dojo.js:15
ode:function(){return _25;},guardCheckComplete:_37};};if(1){var _38=location.p
                                                                    ^
ReferenceError: location is not defined 
```

解决方法是使用未压缩的源代码而不是发布版本，因为*优化后的版本似乎只能在浏览器*中运行。接下来我尝试了一个配置脚本

```
// bootstrap.js
dojoConfig = {
    baseUrl: ".",
    packages:[{name: 'dojo', location: '../dojo_src'}],
    deps: ['./ui_test.js']
};
require('../dojo_src/dojo.js'); 
```

和一个简单的测试

```
// ui_test.js
dojo.require("doh.runner");
doh.register("test_1", [
    function four_eq_4() {
        var x = 4;
        doh.is(x.toString(), "4");
    }
]);
doh.run();
console.log("done."); 
```

当我运行测试时`doh.run()`似乎没有效果

```
$ node bootstrap.js
done. 
```

我的目录结构：

```
/app
    bootstrap.js
    ui_test.js
/util/doh
/dojo_src 
```

在命令行上使用 DOH 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:46:57.373

答案很简单，但并不明显。运行`load=doh`以调用测试运行器。

```
$ node bootstrap.js load=odh 
```

# c# - 还有另一种方法可以在 DataGridView 中显示数据吗？

> ID：15681993
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:34.230
> 
> 标签：c#, winforms, datagridview

我不喜欢数据在 DataGridView 中的显示方式。

这就是我通常显示它的方式：

```
SqlCmd GetCity = new SqlCmd();
CityDataGridView.DataSource = GetCity.UseSqlCommand("SELECT * FROM City").Tables[0]; 
```

SqlCmd 是我用来执行 Sql 查询或返回数据集的类。

我希望数据以更优雅的方式显示在 datagridview 中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:20:00.543

Telerik 和 DevExpress 有漂亮的控件，但它们是商业（付费）产品。如果您买不起，我强烈建议您考虑放弃 winforms 并使用当前的 UI 技术 (WPF)。

winforms不支持自定义，原生winforms控件看起来像windows 95。

您可以在 WPF 中获得具有专业外观的应用程序，而无需支付任何商业第三方费用。只需谷歌 WPF 应用程序（在谷歌图像搜索中）并亲自查看。

# sql - 复制表格和扩展表格

> ID：15681994
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:40.787
> 
> 标签：sql, sql-server

我有一张桌子，Table_1

```
 name      id
 ABC       A001
 BCD       A002
 CDE       A003 
```

因此，如果我创建具有与 Table_1 相同属性的 Table_2，我尝试使用以下查询将 Table_1 的所有行复制到 Table_2，但不确定

```
Insert into Table_2 values (Select * from Table_1) 
```

并且如果我用一个额外的列扩展 Table_1 并创建第三个 Table_3，是否可以将 Table_1 记录复制到 Table_3（比如 Table_1 有 (name, id) & Table_3 (name, id, passwd)）

（在 MS Sql server 2005 上运行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:41:32.293

而不是问你有没有试过这样做？这不是一个很难设置的测试案例。

# sql-server - 2008 R2 的 XML DML ..如何修改嵌套元素

> ID：15681995
> 
> 赞同：1
> 
> 时间：2013-03-28T12:35:42.210
> 
> 标签：sql-server, xml-dml

```
 <Component>
          <Caption>2 7/8" x 1",Drill Collar,2 3/8 PAC</Caption>
          <Description>2 7/8" x 1",Drill Collar,2 3/8 PAC</Description>
          <Count>1</Count>
          <Sections>
            <Section>
              <Material>Steel AISI 4145</Material>
              <Connection>2 3/8 PAC</Connection>
              <Weight>28.7197</Weight>
              <Length>0.508</Length>
            </Section>
            <Section>
              <Material>Steel AISI 4145</Material>
              <Connection>NC50</Connection>
              <Weight>28.7197</Weight>
              <Length>0.508</Length>
            </Section>
            <Section>
              <Material>Steel AISI 4145</Material>
              <Connection>NC36</Connection>
              <Weight>28.7197</Weight>
              <Length>0.508</Length>
            </Section>
          </Sections>
        </Component> 
```

我在 SQLServer 2008 R2 中有一个组件表，它有一个 PK ID 字段和另一个 XML 类型的列。在那个 XML 列中，我的 XML 看起来像您在上面看到的。对于每一行，我想修改所有嵌套的 Section 块，使它们每个都有两个额外的元素。这是我尝试过的，它只将新元素插入到第一个 Section 块中......但不是其他两个。

```
DECLARE @MaxFeatures XML

 SET @MaxFeatures = N'<MaxAllowableTorque>0</MaxAllowableTorque>
            <MaxAllowableForce>0</MaxAllowableForce>'   

 Update Component   

    SET XMLDetails.modify('       
    insert sql:variable("@MaxFeatures")           
    after (/Component/Sections/Section/Length)[1]       
    ') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:52:40.247

您一次只能插入 XML 中的一个位置，因此您需要循环执行。

一次更新一个节点，当没有更新时退出循环。

```
declare @MaxFeatures xml

set @MaxFeatures = N'<MaxAllowableTorque>0</MaxAllowableTorque>
                     <MaxAllowableForce>0</MaxAllowableForce>'   

declare @I int 
set @I = 1

while 1 = 1
begin
  update Component
  set XMLDetails.modify('       
      insert sql:variable("@MaxFeatures")           
      after ((/Component/Sections/Section/Length)[sql:variable("@I")])[1]')
  where XMLDetails.exist('(/Component/Sections/Section/Length)[sql:variable("@I")]') = 1

  if @@rowcount = 0
    break

  set @I = @I + 1
end 
```

# android - Android - TextEdit 上的物理后退按钮会擦除内容

> ID：15681996
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:45.467
> 
> 标签：android, listview, button, android-edittext, back

我有`ListActivity`一个`EditText`和一个`ListView`。内容`ListView`根据`EditText`内容变化。我执行以下步骤：

1) 填写一些内容`EditText`

2）因此`Listview`变化（正确）

3）我滚动列表视图

4）我按下后退按钮

在这一点上，我希望回到以前的活动，而我碰巧`EditText`被删除了，因此是`ListView`空的。

有没有办法告诉`EditText`按下后退按钮时不要擦除自己？

非常感谢。

G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:43:05.393

您可以将 editText 保存在共享首选项中。在您返回或再次打开应用程序时始终保存文本。看看：[共享首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)

像这样：

```
private SharedPreferences pref; 
```

在您的二等舱中：

```
pref.edit().putString("text", Text).commit(); 
```

主类：

```
String texto = pref.getString("text", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:38:05.107

您可以使用 onPause 方法来存储 EditText 值。在[SharedPrefrence](http://developer.android.com/reference/android/content/SharedPreferences.html)或[全局变量](http://androidresearch.wordpress.com/2012/03/22/defining-global-variables-in-android/)中。

```
@Override
public void onPause() {
    super.onPause();
    // Get the current value from Edit text and store the value on sharedpref or global variable
} 
```

在 onPause 方法中，您可以将 EditText 的当前值保存到共享首选项中。

或者，您可以覆盖后退按钮的事件并执行以下相同操作，您可以使用以下方法

```
@Override
public void onBackPressed(){
 //your code here to save it to shared pref or global varialble then invoke relevant activity manually
} 
```

按下后退按钮时覆盖事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:59:07.867

> 我只想在我按下后退按钮时完成活动。不管我在做什么以及哪个对象有焦点

以下是如何在`Activity`按下后退时强制完成...

```
@Override
public void onBackPressed() {
    finish();
} 
```

# html - 如何从jsp中动态创建的（ajax）文本框获取值？

> ID：15681999
> 
> 赞同：0
> 
> 时间：2013-03-28T12:35:54.863
> 
> 标签：html, ajax, jsp

这是我的代码

索引.html：

```
<html>

<head>
<script language="javascript">

    var xmlHttp;
    var f=1;
    var t = "text";

    function showState()
    { 
        if (typeof XMLHttpRequest != "undefined"){
            xmlHttp= new XMLHttpRequest();
            }
            else if (window.ActiveXObject){
            xmlHttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
        if (xmlHttp==null){
                alert ("Browser does not support XMLHTTP Request");
            return
        } 
        var url="additem.jsp";
        xmlHttp.onreadystatechange = stateChange;

        xmlHttp.open("GET", url, true);
        xmlHttp.send(null);
    }

    function stateChange(){   
        if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){  
            document.getElementById(t).innerHTML=xmlHttp.responseText;
            t = "text"+f.toString();
            f=f+1;
        }  
    }

</script></head>

<body>
<center>
<form action=AddProd1.jsp method=post>
Enter Catagory  <td><BLOCKQUOTE></BLOCKQUOTE><BLOCKQUOTE><center><input type=text name=catagory></BLOCKQUOTE></td>
</center>
<br><br>

<div id='text'></div><br>
    <input type=submit value=Submit>
</form>
<input type=submit value=new onclick="showState();">

</body></html> 
```

additem.jsp：

```
<jsp:useBean id="ob" class="te.tes" scope="session" />
<%! 

    String value = "";
    String t = "" ;
    String v="";
 %>

<%  
    v=ob.Increase();
    value = "product" + v;  
    t = "text" + v;
%>
<html>
<input type=text name=product value="<%=value%>">
<div id='<%=t%>'></div><br>
</html> 
```

AddProd1.jsp：

```
<%  int i;
    String [] value = request.getParameterValues("product")
    for(i=0;i<value.length;i++)
        out.println(value[i]);

%> 
```

无论我尝试什么，我都在 AddProd1.jsp 中的“value.length”中遇到异常......我什至试图通过只输入 request.getParameter("product") 来获得一个值......但我得到空值返回....我在做什么错？？？提前感谢..