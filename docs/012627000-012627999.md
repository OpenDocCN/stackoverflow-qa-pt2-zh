# StackOverflow 问答 12627000-12627999

# android - Android：连接超时不起作用（连接永远等待）

> ID：12627001
> 
> 赞同：2
> 
> 时间：2012-09-27T17:33:09.687
> 
> 标签：android, http, post, timeout

我有一个连接到服务器的应用程序。我设置了一个超时，断开设备与互联网的连接并尝试执行发布请求以查看是否调用了超时，但连接一直等待。这是我的代码：

```
private static final int TIMEOUT_OPS = 3000 ;
private HttpClient mHttpClient;

public String sendToken(String token) throws IOException, AuthenticationException {
    JSONArray jsonData = new JSONArray();
    jsonData.put(token);

    final HttpPost post = prepareJSONRequest(jsonData.toString(), SEND_TOKEN_METHOD);
    HttpClient httpClient = getConnection();
    Log.i(TAG, "Sending request");
    final HttpResponse resp;
    try{
        resp = httpClient.execute(post);
    }catch(Exception e){
        e.printStackTrace();
        return null;
    }
    Log.i(TAG, "Got response");
    ...
}

private HttpPost prepareJSONRequest(String rest_data, String method) throws AssertionError {
    AbstractHttpEntity entity = null;
    try {
        final ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair(KEY_PARAM_METHOD, method));
        params.add(new BasicNameValuePair(KEY_PARAM_INPUT_TYPE, JSON));
        params.add(new BasicNameValuePair(KEY_PARAM_RESPONSE_TYPE, JSON));
        params.add(new BasicNameValuePair("rest_data", rest_data));
        entity = new UrlEncodedFormEntity(params, HTTP.UTF_8);
        final HttpPost post = new HttpPost(mServer);
        post.addHeader(entity.getContentType());
        post.setEntity(entity);
        return post;

    } catch (final UnsupportedEncodingException e) {
        // this should never happen.
        throw new AssertionError(e);
    }
}

private HttpClient getConnection() {
    if (mHttpClient == null) {
        // registers schemes for both http and https
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
        HttpProtocolParams.setUseExpectContinue(params, false);
        HttpConnectionParams.setConnectionTimeout(params, TIMEOUT_OPS);
        HttpConnectionParams.setSoTimeout(params, TIMEOUT_OPS);
        ConnManagerParams.setTimeout(params, TIMEOUT_OPS);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        final SSLSocketFactory sslSocketFactory = SSLSocketFactory.getSocketFactory();
        sslSocketFactory.setHostnameVerifier(SSLSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);
        if (!mNoCertValidation)
            registry.register(new Scheme("https", sslSocketFactory, 443));
        else
            registry.register(new Scheme("https", new EasySSLSocketFactory(), 443));
        ThreadSafeClientConnManager manager = new ThreadSafeClientConnManager(params, registry);
        mHttpClient = new DefaultHttpClient(manager, params);

    }
    return mHttpClient;
} 
```

如果我执行此代码，我的日志会显示“发送请求”，但不会打印异常或“得到响应”。为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T21:21:57.413

如果您没有 Internet，则 DNS 请求将失败，但您无法控制 DNS 超时。最终你应该得到一个 UnknownHostException，但这可能需要几分钟。在这种情况下，最好的办法是在发出 HTTP 请求的同时在单独的线程中启动计时器。如果计时器在 HTTP 请求完成之前关闭，您可以中止 HTTP 请求。

# eclipse - 错误：-source 1.6 不支持 try-with-resources

> ID：12627004
> 
> 赞同：0
> 
> 时间：2012-09-27T17:33:22.390
> 
> 标签：eclipse, build, syntax-error, java-7, try-with-resources

我使用 Linux Debian 2.6.32-5-amd64。我的 Eclipse 版本：4.2.0 我的 Java 版本：jdk1.7.0_07

当我构建我的项目时，我收到错误：

```
[javac] <myPath>file.java:66: error: try-with-resources is not supported in -source 1.6
[javac]         try(Scanner scanner = new Scanner(new File(path))){
[javac]            ^
[javac]   (use -source 7 or higher to enable try-with-resources)
[javac] 1 error 
```

我将编译器合规级别设置为 1.7。怎么了？是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:40:41.543

您不是在 java 7 中编译，而是在 java 6 中编译。项目合规性设置为 7，否则 try-with-resources 将在 eclipse 编辑器中显示错误。

您应该检查如何构建项目（看起来像 ant）并将其配置为在 7 中编译（使用“-source”参数）。

# dart - 在 Dart 的库下读取静态文件？

> ID：12627005
> 
> 赞同：2
> 
> 时间：2012-09-27T17:33:27.297
> 
> 标签：dart, dart-io, dart-mirrors

我正在 Dart 中编写一个库，并且在库文件夹下有静态文件。我希望能够读取这些文件，但我不确定如何检索它的路径......在其他一些语言中没有`__FILE__`或`$0`类似。

**更新：**看来我还不够清楚。让这帮助你理解我：

*测试.dart*

```
import 'foo.dart';

void main() {
  print(Foo.getMyPath());
} 
```

*飞镖*

```
library asd;

class Foo {
  static Path getMyPath() => new Path('resources/');
} 
```

它给了我错误的文件夹位置。它给了我通往`test.dart`+的路径`resources/`，但我想要通往`foo.dart`+的路径`resources/`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:00:22.407

如前所述，您可以使用镜子。这是一个使用您想要实现的示例的示例：

*测试.dart*

```
import 'foo.dart';

void main() {
  print(Foo.getMyPath());
} 
```

*飞镖*

```
library asd;

import 'dart:mirrors';

class Foo {
  static Path getMyPath() => new Path('${currentMirrorSystem().libraries['asd'].url}/resources/');
} 
```

它应该输出如下内容：

> /Users/Kai/test/lib/resources/

在未来的版本中可能会有更好的方法来做到这一点。在这种情况下，我会更新答案。

**更新：**您还可以在库中定义一个私有方法：

```
/**
 * Returns the path to the root of this library.
 */
_getRootPath() {
  var pathString = new Path(currentMirrorSystem().libraries['LIBNAME'].url).directoryPath.toString().replaceFirst('file:///', '');
  return pathString;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T00:36:21.647

dart mirrors API（仍然是实验性的，并且还没有在所有平台上可用，例如 dart2js）在**LibraryMirror上公开了一个****url** getter 。这应该给你你想要的。

 **我不知道有任何其他方式可以在图书馆中获取此信息。

```
#import('dart:mirrors');
#import('package:mylib/mylib.dart'); 

main(){
   final urlOfLib = currentMirrorSystem().libraries['myLibraryName'].url;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:05:10.993

通常，访问位于库中静态位置的资源的常用方法是使用相对路径。

```
#import('dart:io');

...

var filePath = new Path('resources/cool.txt');
var file = new File.fromPath(filePath);

// And if you really wanted, you can then get the full path
// Note: below is for example only. It is missing various
// integrity checks like error handling.
file.fullPath.then((path_str) {
  print(path_str);
}); 
```

[请参阅有关路径](http://api.dartlang.org/docs/continuous/dart_io/Path.html)和[文件](http://api.dartlang.org/docs/continuous/dart_io/File.html)的其他 API 信息

`__FILE__`顺便说一句.. 如果您绝对想获得与您可以执行以下操作相同类型的输出：

```
#import('dart:io');
...
var opts = new Options();
var path = new Path(opts.script);
var file = new File.fromPath(path);
file.fullPath().then((path_str) {
  print(path_str);
}); 
```**

# apache-flex - 如何判断元素何时最终显示在屏幕上？

> ID：12627009
> 
> 赞同：1
> 
> 时间：2012-09-27T17:33:34.027
> 
> 标签：apache-flex

我在向容器中添加大量自定义元素时会显示一个“正在加载”对话框。我已将对话框设置为在调用最后添加的元素的 creationCompleteHandler 时消失，但对话框会在所有元素显示在屏幕上之前消失（这会导致非常大的延迟）。

这是我正在做的一个例子：

```
for (var i:int = 0; i < 100; i++) {
    var elem:MyElement = new MyElement();
    elem.name = "elem" + i;
    container.addElement(elem);

    if (i == 99) {
        elem.creationComplete = function():void {
            PopUpManager.removePopUp(loadingDialog);
        };
    }
} 
```

正如我所说，对话框在所有元素出现在屏幕上之前就消失了。有没有办法判断所有自定义元素何时已添加并且当前显示在屏幕上？

**更新：** 为了澄清，`elem.creationComplete`只是一个自定义属性函数，当元素的 creationCompleteHandler 被调用时被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:08:07.860

这些元素，即使它们已按正确的顺序添加，它们也不是按该顺序创建的：

```
 private function doStuff():void {
            PopUpManager.addPopUp(myPopup, this);
            for (var i:int = 0; i < 10; i++) {
                var elem:MyElement = new MyElement();
                elem.name = "elem" + i;
                container.addElement(elem);

                elem.addEventListener(FlexEvent.CREATION_COMPLETE, function(e:FlexEvent):void {
                    trace("i'm done " + e.target.name);
                });

                if (i == 9) {
                    elem.addEventListener(FlexEvent.CREATION_COMPLETE, function():void {
                        trace("i'll remove the popup " + elem.name);
                        PopUpManager.removePopUp(myPopup);
                    });
                }
            }
        } 
```

给出：

```
i'm done elem5
i'm done elem7
i'm done elem0
i'm done elem8
i'm done elem6
i'm done elem3
i'm done elem9
i'll remove the popup elem9
i'm done elem1
i'm done elem4
i'm done elem2 
```

您需要添加一个全局变量来检查所有元素是否已实际创建：

```
public var created:int = 0;

        private function doStuff():void {
            PopUpManager.addPopUp(myPopup, this);

            for (var i:int = 0; i < 10; i++) {
                var elem:MyElement = new MyElement();
                elem.name = "elem" + i;
                container.addElement(elem);
                created++; // <--- increment with each new element

                elem.addEventListener(FlexEvent.CREATION_COMPLETE, function(e:FlexEvent):void {
                    created--;  // <--- decrement when element is created
                    trace("i'm done ", e.target.name);
                    if (created == 0) {
                        trace("i'll remove it ", e.target.name);
                        PopUpManager.removePopUp(myPopup);
                    }
                });
            }
        } 
```

结果是：

```
i'm done  elem5
i'm done  elem7
i'm done  elem0
i'm done  elem8
i'm done  elem6
i'm done  elem3
i'm done  elem9
i'm done  elem1
i'm done  elem4
i'm done  elem2
i'll remove it  elem2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:27:43.030

为了解决这个问题，我遵循了 jidma 的回答，除了我监听了 PropertyChanged 事件并`contentHeight`在容器上的属性更改时递减。仅当容器的高度受到添加元素的影响时才会减少，这似乎有效。

# .net - 非即时任务取消、重新启动和繁忙指示器

> ID：12627010
> 
> 赞同：1
> 
> 时间：2012-09-27T17:33:55.850
> 
> 标签：.net, wpf, task-parallel-library, async-await, cancellation

我有一个从按钮单击触发的后台异步任务。我有一个`IsBusy`在任务开始时更新的属性，并且在 finally 块内以说明取消或完成。

目前我的按钮点击事件取消了之前的任务并在重新点击时启动了一个新任务；然而，由于第一个任务的取消可能会在新任务的开始之后徘徊，布尔`IsBusy`指示器可能会变得不同步。

我的问题是如何处理这种情况。

我当前的解决方案不是直接更新布尔值，而是使用在开始和完成时递增/递减的整数 - 并`IsBusy`返回属性`BusyCount > 0`。然而，这需要增加线程安全性，并且感觉不是一个好的解决方案。

另一个想法是在任务被触发时存储它，并且只启动新任务作为第一个任务的延续。这解决了取消问题，但会导致不必要的延迟（尽管是部分延迟）和调用者而不是任务的“合同”。

我最后的想法是创建一个类似于 BusyTokenSource 类的东西，它分发一次性的 BusyTokens，这些 BusyTokens 从线程安全集合中添加/删除。但这似乎有点矫枉过正。

有没有更好/正确/通用的方法来处理这种情况？

**编辑：**

我最终还是按照上面的最后一个想法写了“BusyToken”类。这样我可以简单地将一个函数包装在 a 中`using(BusyTokenSource.GetToken()){}`，让内部收集并`Dispose`处理计数和忙碌状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:49:56.830

我认为每个任务应该有一个忙碌状态。不知道你的`BusyTokenSource`想法是如何运作的，但听起来有点像。

创建一个持有者类：

```
class BusyStatus { bool IsBusy; } 
```

并为您启动的每个任务提供一个新实例。当您不再对旧任务感兴趣时，只需丢弃旧的 BusyStatus 并创建一个新实例即可。旧任务最终将完成并设置忙碌状态，但在没有人再使用的旧实例上。

只要确保旧任务不会意外引用新`BusyStatus`实例即可。

作为更一般的规则，让每个任务（或线程）在不同的数据结构上工作通常很有用。这是一个有用的一般指导原则。它使您变得简单，并可以轻松实现安全。

# c# - 为什么调用默认的aspx？

> ID：12627011
> 
> 赞同：1
> 
> 时间：2012-09-27T17:33:55.993
> 
> 标签：c#, asp.net, .net, mysql, web-applications

我是一名新程序员，试图理解别人的代码。该程序的目的是使用书签将 MySQL 数据放入 word 文件模板中。AR 和 ICN 是两种类型的报告，因此它们都有自己的模板。代码最初只包含 AR，我现在添加了 ICN。控制台应用程序运行良好，网页出现问题。我不明白为什么`if (int.TryParse(ticketId, out currentTicket))`我的代码中`FALSE`会生成 default.aspx 。

**试图在浏览器中查看此代码**

```
using System;
using System.Web;
using TicketExtractionLibrary;

namespace TicketExtractionWeb
{
    public partial class GetAR : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string ticketId = Request.QueryString["TicketId"];
            int currentTicket;

            string applicationPath = Request.PhysicalApplicationPath;
            ARExtractionController ARController = new ARExtractionController();

            string arTemplateLocation = HttpContext.Current.Server.MapPath("~/AR.dot");
            string mappingLocation = HttpContext.Current.Server.MapPath("~/ARmapping.xml");

            if (int.TryParse(ticketId, out currentTicket))
            {
                ARController.Extract(currentTicket, applicationPath + "LastTickets", arTemplateLocation, mappingLocation);

                Response.Clear();
                Response.Buffer = true;
                Response.ContentType = "application/msword";
                Response.AddHeader("content-transfer-encoding", "binary");
                Response.AddHeader("content-disposition", "attachment;filename=AR" + ticketId + ".docx");

                Response.ContentEncoding = System.Text.Encoding.GetEncoding(1251);

                string path = Server.MapPath(@"\LastTickets\AR" + ticketId + ".docx");
                System.IO.FileInfo file = new System.IO.FileInfo(path);

                Response.WriteFile(path);

                Response.End();
            }
            else
            {
                Response.Redirect("Default.aspx");
            }
        }
    }
} 
```

![解决方案资源管理器](../Images/9a08c4f8fcdcce2aed3e5ff06769e61e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:36:14.320

这就是说，如果通过查询字符串传递的 TicketID 不是整数，则没有要生成的报告或 Word 文档，因此将用户重定向到 default.aspx 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:38:39.140

TicketID 的值不能是整数，因为 TryParse 返回 FALSE 并且您将被重定向到默认页面。确保 TicketID 值为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:41:29.110

正如@MarkSherretta 所说，TryParse 失败，它向“if”语句发送“false”，导致控制权传递给调用 Default.aspx 的“else”，如您的代码所示。

请参阅 TryParse 上的 MSDN：

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

# css - 由 ID 选择的链接中的文本颜色覆盖不同 ID 的父链接颜色

> ID：12627012
> 
> 赞同：0
> 
> 时间：2012-09-27T17:33:56.457
> 
> 标签：css, css-selectors

有点难以解释，所以这里有一些代码。

所以我有这个CSS，它使所有链接都变成橙色。它包含整个页面。

```
#pageContent a:link,a:visited, a:hover, a:active {
    color: #EE4036; 
} 
```

然后我在 pageContent id 的某处有一个 id sideMenu 元素，

```
#sideMenu a:link, a:visited, a:hover, a:active{
    color:#58595B;

} 
```

问题在于，由于某种原因，sideMenu 给定的链接颜色会覆盖非 sideMenu 子级链接的 pageContent 链接颜色。

例如，如果我有

```
<div id="pageContent" >
   <a>this text should be #EE4036</a>
   <div id="sideMenu">
      <a>this text should be #58595B</a>
   </div>
</div> 
```

sideMenu 的`<a>`文本内容将按预期设置为颜色#58595B，但 pageContent 的颜色也是如此，这是我没想到的。

我对 CSS 有点陌生，所以我觉得我错过了一些非常明显的规则，而谷歌根本没有帮助。那么，有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T17:35:54.110

您需要在每个选择器前面加上 ID：

```
#sideMenu a:link, #sideMenu a:visited, #sideMenu a:hover, #sideMenu a:active {
    color:#58595B;
} 
```

目前，您的选择器表示匹配“作为 ID 为“slideMenu”的元素的后代的链接、已访问的链接、悬停的链接和活动链接”。

基本上，当您使用逗号创建一[组选择器](http://www.w3.org/TR/css3-selectors/#grouping)时，每个单独的选择器都是完全独立的。他们之间没有任何关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:38:51.357

好吧，您实际上是在重新定义相同的规则。您必须记下每次`#sideMenu`或`#pageContent`。这里是：

```
#pageContent a:link, #pageContent a:visited, #pageContent a:hover, #pageContent a:active {
    color: #EE4036; 
}
#sideMenu a:link, #sideMenu a:visited, #sideMenu a:hover, #sideMenu a:active {
    color: #58595B; 
} 
```

瞧。希望能帮助到你。

# php - 向 Wordpress 后分页添加范围

> ID：12627014
> 
> 赞同：0
> 
> 时间：2012-09-27T17:33:58.063
> 
> 标签：php, wordpress, pagination

我有一些很长的帖子，有些超过 50 页（使用 nextpage 短代码），当使用 wp_link_pages 时，它给了我 50 个内部帖子链接，显然这不可用。

如何向 wp_link_pages 函数添加范围？

输出应如下所示： ...45678...

**编辑**：

有关参考点，请参见此处：[http ://codex.wordpress.org/Function_Reference/wp_link_pages](http://codex.wordpress.org/Function_Reference/wp_link_pages)

**编辑 10/1/12**：

我已经弄清楚了这个逻辑，但现在我需要弄清楚如何将它添加到现有的 wp_link_pages 函数中：

```
function limitPagination(){
    $displayPages = 5;
    $firstPage = 1;
    $lastPage = $numpages > 5;

    while($numpages > $displayPages){
            if(($pageNow > $firstPage +2) && ($pageNow < $lastPage - 2)){
                    echo (($pageNow - 2).($pageNow - 1).$pageNow.($pageNow + 1).($pageNow + 2));
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:48:18.987

请参阅下面的 URL，我认为这对您很有帮助。

[http://wp-ultra.com/2011/07/adding-pagination-to-the-twenty-eleven-theme-without-a-plugin/](http://wp-ultra.com/2011/07/adding-pagination-to-the-twenty-eleven-theme-without-a-plugin/)

[http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin](http://www.kriesi.at/archives/how-to-build-a-wordpress-post-pagination-without-plugin)

[http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/](http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/)

**发表评论后更新答案**

**一个更好的 WordPress 的 wp_link_pages()**

**见网址**：[http ://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/](http://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/)

[http://www.velvetblues.com/web-development-blog/wordpress-number-next-previous-links-wp_link_pages/](http://www.velvetblues.com/web-development-blog/wordpress-number-next-previous-links-wp_link_pages/)

如果您写了长篇文章，WordPress 提供了快速标签，因此您可以将其分成多个页面。您需要做的就是确保您使用的主题已在单个帖子/页面模板的某处包含 wp_link_pages() 函数。该函数完美运行，除非需要使用 CSS 对其进行样式设置。该函数的默认 HTML 输出如下所示：

```
<p>
   Pages: 1 <a href="http://yoursite.com/2008/layout-test/2/">2</a> <a href="http://yoursite.com/2008/layout-test/3/">3</a>
</p> 
```

您可以修改页码前后显示的内容，因此您可以轻松地在其中包含一个类，但问题在于当前页码。上例中的“1”没有包含在 HTML 标记中，因此无法设置样式。这是该函数的自定义版本，您可以将其添加到您的 functions.php 以更改所有内容：

**阅读更多见下面的网址**

[http://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/](http://bavotasan.com/2012/a-better-wp_link_pages-for-wordpress/)

# java - Java 赋值，有缺陷的逻辑

> ID：12627018
> 
> 赞同：-3
> 
> 时间：2012-09-27T17:34:07.833
> 
> 标签：java

首先，我知道你们不喜欢这样的问题被问到，但是我看不出我的代码有什么问题，并希望有人检查一下。话虽如此，我知道我的代码看起来很糟糕，那是因为这一切都必须以一种方法完成。

```
public static int dayOfWeek(int year, int month, int day) {
    int monthCode = 0, centuryCode = 0, numLeapYears = 0, dayOfWeek = 0;

    int yearDigits = year % 100;

    if((year % 400 == 0) || ((year % 4 == 0) && (year % 100 != 0))) {
        numLeapYears = yearDigits / 2 + 1;
    }else {
        numLeapYears = yearDigits / 2;
    }

    if(((year >= 1400) && (year <= 1499)) || ((year >= 1800) && (year <= 1899)) || ((year >= 2200) && (year <= 2299))) {
        centuryCode = 2;
    }else if(((year >= 1500) && (year <= 1599)) || ((year >= 1900) && (year <= 1999)) || ((year >= 2300) && (year <= 2399))) {
        centuryCode = 0;
    }else if(((year >= 1600) && (year <= 1699)) || ((year >= 2000) && (year <= 2099)) || ((year >= 2400) && (year <= 2499))) {
        centuryCode = 5;
    }else if(((year >= 1700) && (year <= 1799)) || ((year >= 2100) && (year <= 2199)) || ((year >= 2500) && (year <= 2599))) {
        centuryCode = 4;
    }

    switch(month) {
        case 1: monthCode = 0;
        break;

        case 2: monthCode = 3;
        break;

        case 3: monthCode = 3;
        break;

        case 4: monthCode = 6;
        break;

        case 5: monthCode = 1;
        break;

        case 6: monthCode = 4;
        break;

        case 7: monthCode = 6;
        break;

        case 8: monthCode = 2;
        break;

        case 9: monthCode = 5;
        break;

        case 10: monthCode = 0;
        break;

        case 11: monthCode = 3;
        break;

        case 12: monthCode = 5;
        break;
    }

    dayOfWeek = ((centuryCode + yearDigits + numLeapYears + monthCode + day) % 7);
    return dayOfWeek;
}//dayOfWeek 
```

我还没有费心评论我的代码，这个函数的目的是计算一个数字（0、1、2等）表示的日期（星期日、星期一等）我的代码有效，但它不输出正确的数字。例如 1969 年 7 月 20 日应该输出为 0，但我的代码输出 3。我似乎找不到这种方法的逻辑缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:38:09.423

您打开月份的开关看起来关闭 - 日历索引从 0 开始的月份。因此`cal.get(Calendar.MONTH) == 0`对于 1 月份的日期。

话虽如此，您没有解释`monthCode`应该代表什么，这使得提供任何类型的帮助变得非常困难。

# windows - 无法连接到远程调试器

> ID：12627022
> 
> 赞同：0
> 
> 时间：2012-09-27T17:34:20.837
> 
> 标签：windows, visual-studio-2010, debugging, remote-debugging

我无法连接到远程机器上的 Visual Studio 远程调试器（在同一网络中）。MSVSMON 正在远程计算机上运行。当我尝试列出该进程时，VS 远程调试监视器中有一个条目（在远程计算机中）显示“用户名”已连接。但是在主机上，机器超时并显示错误。

我正在运行 Windows Server 2012。Visual Studio 2010。x64。

关于如何使它工作的任何线索？

谢谢！

# ruby-on-rails - 未找到生产 faye.js 中的 Rails 3.2 PrivatePub

> ID：12627024
> 
> 赞同：1
> 
> 时间：2012-09-27T17:34:32.293
> 
> 标签：ruby-on-rails, apache, thin, faye, private-pub

我遇到了一个名为 private_pub 的 gem，它使用了 faye gem 和瘦服务器。

这一切在开发中都可以正常工作，但是在服务器上我可以让一切正常启动，但是在我使用 private_pub 的页面上，我在 js 控制台（chrome）中收到一个错误，上面写着

```
GET http://myapp.example.com/faye.js 406 (Not Acceptable) 
```

当我在浏览器中查看[http://myapp.example.com/faye.js](http://myapp.example.com/faye.js)（网址已更改）时，我得到一个空屏幕，在开发中它显示所有 js 代码。我还可以在 chrome 的开发人员工具中看到我可以在开发中看到类型是“待定”，在生产中我看到它作为“text/html”传递

我用谷歌搜索和谷歌搜索，并没有想出任何东西。谁能指出我正确的方向。

是否有一些特殊的 mime 类型在这里传递，我需要配置 apache 或 rails 来接受？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:51:36.843

哈扎！

我想到了。

我跳过了各种各样的圈子，但由于我尝试过的其他一些事情，我并不是 100% 确定我找到的解决方案不起作用，但是......

我尝试的第一件事是遵循在 Centos 上使用 Rails 应用程序安装 Thin 的教程，（来自 Slicehost 的文档）[Slicehost 文章：CentOS - 用于 Ruby 的瘦 Web 服务器，](http://articles.slicehost.com/2009/4/17/centos-thin-web-server-for-ruby)并做了一大堆瘦配置。但我不认为这是必要的，因为 private_pub/faye 应该为你处理这一切。（据我了解）

一件重要的事情是我知道你需要使用 private_pub 描述的启动，即使你可以直接开始瘦。

```
RAILS_ENV=production bundle exec rackup private_pub.ru -s thin -D -E production 
```

'-D' 确保它作为后台进程运行。

在我的 private_pub.yml 中：

```
production:
  server: "http://myapp.example.com:9292/faye" 
  secret_token: "{SECRET_TOKEN HERE}" 
  signature_expiration: 3600 # one hour 
```

我在这里添加了端口号，现在一切正常。

# iphone - 在不丢失清晰度的情况下导出 iPhone appicon？

> ID：12627030
> 
> 赞同：0
> 
> 时间：2012-09-27T17:34:58.770
> 
> 标签：iphone, ios, icons, titanium-mobile

我有一个大于 57 x 57 像素的矢量图像。我使用 Adob​​e Illustrator 将其大小调整为 57 x 57 并将其设置为我的 appicon，但是当我将其部署到我的设备中时它变得模糊。

使用 Titanium Studio 时，为我的应用程序创建图标的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:46:03.863

这个链接应该有帮助：

[http://www.titaniumtips.com/files/creating_universal_titanium_apps.php](http://www.titaniumtips.com/files/creating_universal_titanium_apps.php)

特别是关于图标的部分。

> 标准 iPhone 显示屏的 57x57px 图标。在提交到 App Store 之前，您需要为 iPhone Retina 显示屏 (114x114) 和 iPad (72x72) 添加图标。或者，您也可以为 Spotlight 和“设置”页面添加图标。

# android - 每半小时更新一次android通知

> ID：12627035
> 
> 赞同：0
> 
> 时间：2012-09-27T17:35:17.273
> 
> 标签：android

我有在状态栏中显示通知的代码。我知道可以通过`setLatestEventInfo()`再次调用来完成更新，但我希望每半小时完成一次更新。
我如何跟踪时间？有人知道有什么功能吗？
我什至想过使用每半小时递增一次的计数器，但再次检索时间是一个问题。

```
String ns = Context.NOTIFICATION_SERVICE;

NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

int icon = R.drawable.index1;
CharSequence tickerText = "Hello";

long when = System.currentTimeMillis();
Notification notification = new Notification(icon, tickerText, when);
Context context = getApplicationContext();
CharSequence notificationTitle = "My notification";
CharSequence notificationText = "Hello World!";

Intent notificationIntent = new Intent(this, NotificationAppActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
notification.setLatestEventInfo(context, notificationTitle, notificationText, contentIntent);

final int HELLO_ID = 1;

mNotificationManager.notify(HELLO_ID, notification);
notification.defaults |= Notification.DEFAULT_SOUND;
notification.defaults |= Notification.DEFAULT_VIBRATE;
notification.defaults |= Notification.DEFAULT_LIGHTS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:38:40.703

您必须使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)并每 30 分钟安排一次重复事件。然后您需要处理此事件并在广播接收器中`onReceive()`更新您的通知，但通常发送`Intent`到您的服务来完成这项工作。

示例代码：

```
Intent intent = new Intent(this, MyAlarmBroadcastReceiver.class);
PendingIntent sender = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager am = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
long recurring = (30 * 60000);  // in milliseconds
am.setRepeating(AlarmManager.RTC, Calendar.getInstance().getTimeInMillis(), recurring, sender); 
```

并且您`MyAlarmBroadcastReceiver`的`BroadcastReceiver`代码在`onReceive()`. 我更喜欢使用一个广播接收器，因此我还向意图添加了一些额外的数据，以便我的广播接收器知道它应该做什么，但如果你愿意，你可以将它分开。

```
public class MyBroadcastReceiver extends BroadcastReceiver {
   @Override
   public void onReceive( Context context, Intent intent ) {

     // ... do what you need to do here...

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:11:02.607

使用 alarmManager，如下例所示：

```
AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i=new Intent(context, OnAlarmReceiver.class);
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);

mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), PERIOD, pi); 
```

# ios-simulator - 安装 Xcode 4.5 (iOS6) 时找不到 iOS Simulator SDK

> ID：12627036
> 
> 赞同：0
> 
> 时间：2012-09-27T17:35:18.823
> 
> 标签：ios-simulator, ios6, xcode4.5, ios

我的旧安装的 Xcode 可以正常运行，但我尝试升级 Xcode 以使用 iOS 6，所以我在 Mac App Store 下载了新版本，但我的 iOS 模拟器现在停止工作，他说我找不到 SDK并且可能需要重新安装 sdk。

我删除了 Xcode 并重新安装，但问题仍然存在于我的 iOS 模拟器上，并且我在网络上找到的所有可能的解决方案都对我不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:31:28.187

尝试转到设置中的下载部分。

它位于：Xcode>Preferences> 点击 Downloads 选项卡。支持的模拟器在那里。

# stored-procedures - 更新存储过程

> ID：12627037
> 
> 赞同：0
> 
> 时间：2012-09-27T17:35:20.640
> 
> 标签：stored-procedures

嘿伙计们，这是一个更新 PrevLoc 字段的存储过程..但我希望我的 proc 将更新插入到不同的字段中我不希望它修改原始字段，因为我仍然想保持原样。你能伙计们帮忙吗？我非常感谢。谢谢大家

```
ALTER PROC [dbo].[updateloc]

AS
UPDATE Stage.Loc
SET PrevLoc=RTRIM(PrevLoc)
UPDATE Stage.Loc
SET PrevLoc = REPLACE(PrevLoc, substring(PrevLoc, LEN(PrevLoc) -
        (CHARINDEX(' ', REVERSE(PrevLoc)))+ 1, LEN(PrevLoc)), dbo.parsLocat(PrevLoc))--    --this is a function that I use 

SET changedLoc=PrevLoc---this doesnt work

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:46:26.813

是`changeLoc`表中的一列？

您只需要设置该属性。

这些更改将`PrevLoc`完全没有任何更改，并将该值处理为`changeLoc`

```
ALTER PROC [dbo].[updateloc]

AS
UPDATE Stage.Loc
SET changeLoc=RTRIM(PrevLoc)

UPDATE Stage.Loc
SET changeLoc = REPLACE(changeLoc, substring(changeLoc, LEN(changeLoc) -
        (CHARINDEX(' ', REVERSE(changeLoc)))+ 1, LEN(changeLoc)), dbo.parsLocat(changeLoc))--    --this is a function that I use 

GO 
```

# c++ - Qt - Qt 命令提示符

> ID：12627044
> 
> 赞同：0
> 
> 时间：2012-09-27T17:35:51.013
> 
> 标签：c++, qt

所以我找到了一个很棒的视频，它教我静态编译。但在那里它没有显示他从哪里得到“Qt 命令提示符”。我搜索了很多，但没有在目录中找到它。我该怎么办？谁能告诉我它的位置？我什至在资源管理器中搜索过，但没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:48:50.900

Qt 命令提示符只是一个普通`cmd.exe`会话，其中 Qt 库和二进制文件的路径已添加到环境中。

这取决于您如何安装 Qt（使用 SDK、从源代码构建等）。如果您使用 SDK，则应该已在“开始”菜单中安装了快捷方式。我的 Qt 命令提示符位于：

```
C:\Qt\4.8.2\bin\qtvars.bat vsvars 
```

话虽如此，我很少使用 Qt 命令提示符。如果您使用普通的 Visual Studio 命令提示符，然后导航到 Qt“bin”文件夹，您应该能够执行所需的命令，例如`configure`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:47:09.093

只需添加以下路径：

```
<qtdir>\mingw\bin;
<qtdir>\Desktop\Qt\<qtver>\mingw\bin;
<qtdir>Madde\bin\ 
```

到您的 %PATH% 环境变量，默认命令提示符 (cmd.exe) 将成为您所需要的。编辑 %PATH% 后不要忘记重新启动已打开的 cmd.exe。

你使用什么操作系统？例如，[在这里](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)您可以找到如何在 win7 上编辑 %PATH%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T09:07:27.080

如果您使用的是 Windows 8，只需在按下 windows 按钮后键入“Qt 5.4 for Desktop”即可。实际上，在 Windows 8 中，只需在开始菜单中键入“qt”，就会给你建议。

# sql-server-2008-r2 - SQL Server 2008 R2 分组

> ID：12627047
> 
> 赞同：-1
> 
> 时间：2012-09-27T17:35:54.447
> 
> 标签：sql-server-2008-r2, grouping

这是我的脚本。

```
select jt.exempt_status as ExemptStatus, COUNT(*) as ExemptCount
from employee as e
join job_title as jt
    on e.job_title = jt.job_title
group by jt.exempt_status 
```

执行时显示

```
ExemptStatus     ExemptCount
-----------------------------    
E                2
N                5 
```

我需要它在不更改 jt.exempt_status 字段中的值的情况下显示。

```
ExemptStatus     ExemptCount
-----------------------------    
Exempt           2
Non-Exempt       5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:37:51.237

`CASE`选择它们时，您可以使用表达式来格式化您的值：

```
select CASE jt.exempt_status 
    WHEN 'E' THEN 'Exempt'
    WHEN 'N' THEN 'Non-Exempt'
    END 
    as ExemptStatus, COUNT(*) as ExemptCount
from employee as e
join job_title as jt
    on e.job_title = jt.job_title
group by jt.exempt_status 
```

# c++ - c++ 在 dllmain/ __attribute__ 构造函数中分配内存

> ID：12627048
> 
> 赞同：0
> 
> 时间：2012-09-27T17:35:57.973
> 
> 标签：c++, winapi

我一直在阅读当您为共享库进行一些初始化时会发生什么。这个概念很好，但我不清楚内存是如何分配的以及它在程序中的范围。

以在堆栈或堆上的 DLLMain（无论是 process_attach 还是 thread_attach）中创建一个整数为例。该整数是在程序的全局范围内还是在其他地方？例如，如果我在 DLLMain 中新建一个整数，它是否可以在程序中全局访问，或者只是专门针对 main 或其他一些奇怪的情况？如果它可以在全局范围内访问，这是否意味着所有线程也可以访问该内存？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:39:24.983

任何知道其地址的线程都可以访问它。所有线程都具有相同的虚拟内存视图。它来自什么分配器并不重要，因为一旦它被映射到虚拟内存中，所有内存的行为都是一样的。

# ios - 分发未签名的应用程序并在客户端签名

> ID：12627054
> 
> 赞同：1
> 
> 时间：2012-09-27T17:36:16.113
> 
> 标签：ios, code-signing

我在分发应用程序时遇到问题。客户要求是：

1.  他希望应用程序处于分发模式（Enterprise App Store a/c），但不想给我分发证书。

2.  他想在他的最后签署申请。

3.  我不想把密码给他

我已经阅读了一些关于创建未签名应用程序然后对其进行签名的链接。但不是很确定。

有人可以给出解决方案吗？

请注意，我有自己的 Enterprise App Store 空调。我可以用我的证书创建一个版本吗，客户可以用他的 Enterprise App Store 证书重新签名吗

# javascript - 选择带有空格的选项时出现 JQuery 异常

> ID：12627058
> 
> 赞同：4
> 
> 时间：2012-09-27T17:36:25.107
> 
> 标签：javascript, jquery

我通过 JQuery 对 html 选择元素中的选择选项有疑问。下一个代码演示了我的问题：

```
$('select[name="location"] option[value=' + 'mercedes mercedes' + ']').attr('selected', true); 
```

我有用于选择选项值的简单 html 代码 - “mercedes mercedes”。当我运行我的脚本时 - 我遇到了异常：

> "错误：语法错误，无法识别的表达式：[value=mercedes mercedes] throw new Error("语法错误，无法识别的表达式："+ msg);"

当我删除空格时 - 一切正常。也许有人知道 - 如何解决它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T17:37:24.557

在您的选项周围加上引号：

```
$('select[name="location"] option[value="' + 'mercedes mercedes' + '"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:39:08.193

```
$('select[name="location"] option[value=' + 'mercedes mercedes' + ']') 
```

结果是

```
$('select[name="location"] option[value=mercedes mercedes]') 
```

这不是一个有效的选择器。由于该值有一个空格，因此您必须将其括在引号中（如其他答案所示）。

从[文档](http://api.jquery.com/attribute-equals-selector/)：

> **`value`**: 一个属性值。可以是不带引号的**单个**单词或带引号的字符串。

如果这不是多选字段，只需调用`.val`：

```
$('select[name="location"]').val('mercedes mercedes'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:37:32.317

带步数的值应在选择器中引用：

```
$('select[name="location"] option[value="mercedes mercedes"]'); 
```

如果你从一个变量中得到它（很可能），你应该这样做：

```
$('select[name="location"] option[value="'+yourvariable+'"]'); 
```

# javascript - 页面打开一段时间后使用 jquery-ui 方法极度减速

> ID：12627065
> 
> 赞同：4
> 
> 时间：2012-09-27T17:36:53.473
> 
> 标签：javascript, jquery, performance, jquery-ui, singlepage

所以我的网页到处都使用了大量的 jquery，它是一个单页的 javascript 应用程序，我几乎使用 jquery 手动创建了所有的 HTML。我有很多 div，其中我使用可拖动和调整大小我还使用 jquery-ui-effects .hide 和 .show 与幻灯片动画来移动一些 div。

当我启动应用程序时，一切正常，但在页面打开 10~15 分钟后，使用 jquery-ui 方法的所有内容都变得如此缓慢以至于无法使用。当我尝试调整我的一个 div 的大小时，当我第一次将鼠标放在角落上时，速度会大大减慢，在我放开点击之后，页面需要几秒钟才能再次响应。拖放也是如此。在 div 上调用 $().draggable 和 $().resizable 也需要很多时间。奇怪的是，拖动和调整大小本身并不慢，只是开始/结束它。页面打开的时间越长，速度就越慢。

页面中的所有其他功能即使在页面打开一小时后也能正常工作（我什至有一些基本的画布绘图，其他 jquery 但不是 jquery-ui 功能也可以正常工作）。由于浏览器从不使用超过 150mb 的内存，因此没有明显的内存泄漏。

有些人可能会说问题出在我的开始/停止调整大小/拖动功能。这不是因为我试图在不改变速度的情况下删除它们，而且它也不能解释动画的减慢。

动画时 CPU 使用率达到 100%（我使用的是单核系统），不使用 jquery-ui 函数时它保持在 0%。在分析动画功能时（页面打开超过 30 分钟后），我看到有一个名为 curCSS（jquery-1.8.1.js 第 6672 行）的方法使用 95% 的 CPU 时间。如果我在启动应用程序几秒钟后执行动画，同样的功能只使用 4.5%。

我正在使用 jquery-1.8.1 和 jquery-ui 1.8.22。

我不能发布所有代码，因为我不知道它的哪一部分是错误的，而且整个代码库很大。动画是这样完成的：

```
//internal code that prevents updating data on the divs that are part of the animation
var hiding= true;
    var showing= true;

    containerToHide.$div.hide("slide", {direction: "left"}, 1000, function() {
        hiding= false;
        if (!showing) { //both animations ended
            //internal code to allow update data on div after animation ends
        }
    });

    containerToShow.$div.show("slide", {direction: "right"}, 1000, function() {
        showing= false;
        if (!hiding) {//both animations ended
            //internal code to allow update data on div after animation ends
        }
    }); 
```

我不认为这是问题所在，动画是非常标准的东西。

任何关于寻找什么的提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:54:22.570

经过数小时的调试，我终于找到了罪魁祸首。我正在使用 dojo 创建一些图表。Dojo 使用 SVG 来创建图形，我对图形做了一些渐变效果。

每次更新图表时，它都会从 svg 标签中清除旧的 rect 标签，但不会从 defs 标签中清除 lineargradient 标签。几分钟后，我在图表上有数千个线性梯度标签，当这些图表需要重新渲染时，这会导致速度变慢，因为我正在滑动 div，图表在所有动画中都会变慢。

我正在尝试找到一种方法来清除不需要的标签。最好通过 Dojo 方法，但如果不是，我将自己手动删除它们。

# c# - 将数据集转换为数据表c#

> ID：12627066
> 
> 赞同：1
> 
> 时间：2012-09-27T17:37:04.600
> 
> 标签：c#, datatable, dataset

```
ds.Tables.Add(dt);
da = new SqlDataAdapter(
  @"select Time1, Time2, EndDate from Event 
    where Venue ='" + txtVenue.Text + "', 
    StartDate ='" + cbStartMonth.Text + "/" + 
    cbStartDay.Text + "/" + 
    DateTime.Today.Year + "'" ,conn);
da.Fill(dt); 
```

我很抱歉造成混乱，代码实际上可以工作，但现在的问题是如何查看来自数据表的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:39:27.303

A`DataSet`是`DataTable`s 的集合。您不会从一个转换为另一个，一个存储另一个。

如果只显示 1 行，那么您`Sql`只返回一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:38:28.363

只要你调整`.Tables property`

```
var result = yourDataSet.Tables[0]; 
```

您的表是空的，因为您可以使用子句和子句之间调整查询

但是你重写你的查询`( You add and operator)`

```
da = new SqlDataAdapter("select Time1, Time2, EndDate from Event 
where Venue ='" + txtVenue.Text + "' AND 
StartDate ='" + cbStartMonth.Text + "/" + 
cbStartDay.Text + "/" + 
DateTime.Today.Year + "'" ,conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:19:43.257

我还会更改您的代码以使用参数。否则，你就会让自己在所有地方都面临严重的 SQL 注入攻击。

在此处查看有关如何将参数与 SqlDataAdapter 一起使用的示例。 [http://msdn.microsoft.com/en-us/library/bbw6zyha(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bbw6zyha(v=vs.71).aspx)

它也回答了你的问题。

HTH SR

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T11:58:36.933

您可以使用

```
ds.Table.Add(dt);
    DataTable dt1=ds.Tables[0]; 
```

# c# - 删除 WPF DatePickerTextBox 周围的细白框

> ID：12627067
> 
> 赞同：1
> 
> 时间：2012-09-27T17:37:12.310
> 
> 标签：c#, wpf, wpf-controls, wpftoolkit

我正在编写自定义日期选择器，但在设置颜色时遇到了一些麻烦。

我将文本框和背景更改为黑色，但文本框周围仍然有一个细长的白色矩形。当您将鼠标悬停在 DatePickerTextBox 字段上时，此空白区域将被蓝色悬停颜色填充。反正有没有摆脱空白？

这是我的一些代码

```
<toolkit:DatePickerTextBox x:Name="PART_TextBox"                                                                       
     Grid.Row="0" Grid.Column="0" 
     Foreground="{StaticResource MenuForeground}"
     Background="{StaticResource MenuBackground}"
     BorderBrush="{StaticResource MenuBorder}" 
     HorizontalContentAlignment="Center"
     IsReadOnly="True"
     FontSize="12"
     FontFamily="Arial"
     HorizontalAlignment="Center"
     TextAlignment="Center"
     Focusable="False"
     FocusVisualStyle="{x:Null}"
     VerticalContentAlignment="Center" >
</toolkit:DatePickerTextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:22:10.883

这个带有黑色文本框的日期时间选择器周围没有细的白色矩形可能会有所帮助

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Style x:Key="DatePickerStyle2" TargetType="{x:Type DatePicker}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DatePicker}">
                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">

                    <Grid x:Name="PART_Root" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                        <Grid.Resources>
                            <SolidColorBrush x:Key="DisabledBrush" Color="#A5FFFFFF"/>
                            <ControlTemplate x:Key="DropDownButtonTemplate" TargetType="{x:Type Button}">
                                <Grid>
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualStateGroup.Transitions>
                                                <VisualTransition GeneratedDuration="0"/>
                                                <VisualTransition GeneratedDuration="0:0:0.1" To="MouseOver"/>
                                            </VisualStateGroup.Transitions>

                                            <VisualState x:Name="MouseOver">
                                                <Storyboard>
                                                    <ColorAnimation Duration="0" To="#FF448DCA" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="Background"/>
                                                    <ColorAnimationUsingKeyFrames BeginTime="0" Duration="00:00:00.001" Storyboard.TargetProperty="(Border.Background).(GradientBrush.GradientStops)[3].(GradientStop.Color)" Storyboard.TargetName="BackgroundGradient">
                                                        <SplineColorKeyFrame KeyTime="0" Value="#7FFFFFFF"/>
                                                    </ColorAnimationUsingKeyFrames>
                                                    <ColorAnimationUsingKeyFrames BeginTime="0" Duration="00:00:00.001" Storyboard.TargetProperty="(Border.Background).(GradientBrush.GradientStops)[2].(GradientStop.Color)" Storyboard.TargetName="BackgroundGradient">
                                                        <SplineColorKeyFrame KeyTime="0" Value="#CCFFFFFF"/>
                                                    </ColorAnimationUsingKeyFrames>
                                                    <ColorAnimationUsingKeyFrames BeginTime="0" Duration="00:00:00.001" Storyboard.TargetProperty="(Border.Background).(GradientBrush.GradientStops)[1].(GradientStop.Color)" Storyboard.TargetName="BackgroundGradient">
                                                        <SplineColorKeyFrame KeyTime="0" Value="#F2FFFFFF"/>
                                                    </ColorAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>

                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Grid Background="#11FFFFFF" FlowDirection="LeftToRight" HorizontalAlignment="Center" Height="18" Margin="0" VerticalAlignment="Center" Width="19">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="20*"/>
                                            <ColumnDefinition Width="20*"/>
                                            <ColumnDefinition Width="20*"/>
                                            <ColumnDefinition Width="20*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="23*"/>
                                            <RowDefinition Height="19*"/>
                                            <RowDefinition Height="19*"/>
                                            <RowDefinition Height="19*"/>
                                        </Grid.RowDefinitions>
                                        <Border x:Name="Highlight" BorderBrush="#FF45D6FA" BorderThickness="1" Grid.ColumnSpan="4" CornerRadius="0,0,1,1" Margin="-1" Opacity="0" Grid.Row="0" Grid.RowSpan="4"/>
                                        <Border x:Name="Background" BorderBrush="#FFFFFFFF" BorderThickness="1" Background="#FF1F3B53" Grid.ColumnSpan="4" CornerRadius=".5" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.RowSpan="3"/>
                                        <Border x:Name="BackgroundGradient" BorderBrush="#BF000000" BorderThickness="1" Grid.ColumnSpan="4" CornerRadius=".5" Margin="0,-1,0,0" Opacity="1" Grid.Row="1" Grid.RowSpan="3">
                                            <Border.Background>
                                                <LinearGradientBrush EndPoint=".7,1" StartPoint=".7,0">
                                                    <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                    <GradientStop Color="#F9FFFFFF" Offset="0.375"/>
                                                    <GradientStop Color="#E5FFFFFF" Offset="0.625"/>
                                                    <GradientStop Color="#C6FFFFFF" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                        </Border>
                                        <Rectangle Grid.ColumnSpan="4" Grid.RowSpan="1" StrokeThickness="1">
                                            <Rectangle.Fill>
                                                <LinearGradientBrush EndPoint="0.3,-1.1" StartPoint="0.46,1.6">
                                                    <GradientStop Color="#FF4084BD"/>
                                                    <GradientStop Color="#FFAFCFEA" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Rectangle.Fill>
                                            <Rectangle.Stroke>
                                                <LinearGradientBrush EndPoint="0.48,-1" StartPoint="0.48,1.25">
                                                    <GradientStop Color="#FF494949"/>
                                                    <GradientStop Color="#FF9F9F9F" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Rectangle.Stroke>
                                        </Rectangle>
                                        <Path Grid.ColumnSpan="4" Grid.Column="0" Data="M11.426758,8.4305077 L11.749023,8.4305077 L11.749023,16.331387 L10.674805,16.331387 L10.674805,10.299648 L9.0742188,11.298672 L9.0742188,10.294277 C9.4788408,10.090176 9.9094238,9.8090878 10.365967,9.4510155 C10.82251,9.0929432 11.176106,8.7527733 11.426758,8.4305077 z M14.65086,8.4305077 L18.566387,8.4305077 L18.566387,9.3435936 L15.671368,9.3435936 L15.671368,11.255703 C15.936341,11.058764 16.27293,10.960293 16.681133,10.960293 C17.411602,10.960293 17.969301,11.178717 18.354229,11.615566 C18.739157,12.052416 18.931622,12.673672 18.931622,13.479336 C18.931622,15.452317 18.052553,16.438808 16.294415,16.438808 C15.560365,16.438808 14.951641,16.234707 14.468243,15.826504 L14.881817,14.929531 C15.368796,15.326992 15.837872,15.525723 16.289043,15.525723 C17.298809,15.525723 17.803692,14.895514 17.803692,13.635098 C17.803692,12.460618 17.305971,11.873379 16.310528,11.873379 C15.83071,11.873379 15.399232,12.079271 15.016094,12.491055 L14.65086,12.238613 z" Fill="#FF2F2F2F" HorizontalAlignment="Center" Margin="4,3,4,3" Grid.Row="1" Grid.RowSpan="3" RenderTransformOrigin="0.5,0.5" Stretch="Fill" VerticalAlignment="Center"/>
                                        <Ellipse Grid.ColumnSpan="4" Fill="#FFFFFFFF" HorizontalAlignment="Center" Height="3" StrokeThickness="0" VerticalAlignment="Center" Width="3"/>
                                        <Border x:Name="DisabledVisual" BorderBrush="#B2FFFFFF" BorderThickness="1" Grid.ColumnSpan="4" CornerRadius="0,0,.5,.5" Opacity="0" Grid.Row="0" Grid.RowSpan="4"/>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button x:Name="PART_Button" Grid.Column="1" Foreground="{TemplateBinding Foreground}" Focusable="False" HorizontalAlignment="Left" Margin="3,0,3,0" Grid.Row="0" Template="{StaticResource DropDownButtonTemplate}" VerticalAlignment="Top" Width="20"/>
                        <DatePickerTextBox x:Name="PART_TextBox" Grid.Column="0" Foreground="{TemplateBinding Foreground}" Focusable="{TemplateBinding Focusable}" HorizontalContentAlignment="Stretch" Grid.Row="0" VerticalContentAlignment="Stretch" Style="{DynamicResource DatePickerTextBoxStyle2}"/>
                        <Grid x:Name="PART_DisabledVisual" Grid.ColumnSpan="2" Grid.Column="0" IsHitTestVisible="False" Opacity="0" Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Rectangle Grid.Column="0" Fill="#A5FFFFFF" RadiusY="1" Grid.Row="0" RadiusX="1"/>
                            <Rectangle Grid.Column="1" Fill="#A5FFFFFF" Height="18" Margin="3,0,3,0" RadiusY="1" Grid.Row="0" RadiusX="1" Width="19"/>
                            <Popup x:Name="PART_Popup" AllowsTransparency="True" Placement="Bottom" PlacementTarget="{Binding ElementName=PART_TextBox}" StaysOpen="False"/>
                        </Grid>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<!-- Resource dictionary entries should be defined here. -->
</ResourceDictionary> 
```

# php - 通过ajax将数组从html表单传递到php文件

> ID：12627069
> 
> 赞同：0
> 
> 时间：2012-09-27T17:37:22.933
> 
> 标签：php, jquery, ajax, forms

嗨，我对 ajax/jquery 很陌生，我有一个问题。我通过 AJAX 通过表单向 php 代码发送数据，但一些隐藏的输入字段是数组。我如何**强文本** 创建一个从帖子中捕获数据并保存在 vars 中以提供给 php 脚本的函数？我遵循并修改了这个例子：

```
//Funzione per la gestione asincrona AJAX
function xmlhttpPost(strURL) {
//Inizializzo l'oggetto xmlHttpReq
var xmlHttpReq = false;
var self = this;
// qui valutiamo la tipologia di browser utilizzato per selezionare la tipologia di oggetto da creare.
// Se sono in un browser Mozilla/Safari, utilizzo l'oggetto XMLHttpRequest per lo scambio di dati tra browser e server.
if (window.XMLHttpRequest) {
self.xmlHttpReq = new XMLHttpRequest();
}
// Se sono in un Browser di Microsoft (IE), utilizzo Microsoft.XMLHTTP
//che rappresenta la classe di riferimento per questo browser
else if (window.ActiveXObject) {
self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
}
//Apro il canale di connessione per regolare il tipo di richiesta.
//Passo come parametri il tipo di richiesta, url e se è o meno un operazione asincrona (isAsync)
self.xmlHttpReq.open('POST', strURL, true);

//setto l'header dell'oggetto
self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

/* Passo alla richiesta i valori del form in modo da generare l'output desiderato*/
self.xmlHttpReq.send(recuperaValore());

/* Valuto lo stato della richiesta */
self.xmlHttpReq.onreadystatechange = function() {

/*Gli stai di una richiesta possono essere 5
* 0 - UNINITIALIZED
* 1 - LOADING
* 2 - LOADED
* 3 - INTERACTIVE
* 4 - COMPLETE*/

//Se lo stato è completo
if (self.xmlHttpReq.readyState == 4) {
/* Aggiorno la pagina con la risposta ritornata dalla precendete richiesta dal web server.Quando la richiesta è terminata il responso della richiesta è disponibie come responseText.*/
aggiornaPagina(self.xmlHttpReq.responseText);
}
}

}

// HERE IS THE PROBLEM. I TRIED TO INSERT MANY VAR THAT COMES FROM FORM:  id_p_vis (ARRAY), id_p_home (ARRAY), id, id_sub, data_gg, n_gg and I need to give to a php file where I will use by $_POST['id'], .....

/*Questa funzione recupera i dati dal form.*/
function recuperaValore() {
var form = document.forms['form'];
var id_p_vis = form.getElementById["idpvis"];
var id_p_home = form.getElementById["idphome"]; 
var id = form.id.value;
var id_sub = form.id_sub.value;
var data_gg = form.data_gg.sub.value;
var n_gg = form.n_gg.value; 

valore = 'id=' + escape(id);

return valore;
}
/*Questa funzione viene richiamata dall'oggetto xmlHttpReq per l'aggiornamento asincrono dell'elemento risultato*/
function aggiornaPagina(stringa){
document.getElementById("span12").innerHTML = stringa; 
```

你能帮我解决这个问题吗？

谢谢你，再见

尼克}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:42:20.393

您可能想看看 jQuery[`serialize()`](http://api.jquery.com/serialize/)和[`serializeArray()`](http://api.jquery.com/serializeArray/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:43:25.673

如果你使用 jQuery，你绝对应该切换到 jQuery 的 ajax 函数。

您还可以一次性从表单中获取所有字段：

```
$('form').submit(function() {
  // serialize all form fields
  var data = $(this).serialize();

  // use jQuery ajax
  $.ajax({
      type: 'POST',
      url: strURL,
      data: data
    })
    .done(function(returned_data) {
      console.log(returned_data);
    });
}); 
```

# php - json_encode utf-8

> ID：12627081
> 
> 赞同：0
> 
> 时间：2012-09-27T17:38:02.950
> 
> 标签：php, mysql, encoding, utf-8, json

我想知道为什么 json_encode 回显“null”并且我使用西班牙语字符作为“ñ”

```
$link=mysql_connect("localhost","josilandia","*****");
mysql_select_db("critica",$link);
mysql_query("SET NAMES utf8");
$region="Mosel-Saar-Ruwer";

$resultado=mysql_query("SELECT marcavino,comentario,estrellas FROM recomendacion2
 WHERE region='$region'");

$recomendacion=array();   
while ($row = mysql_fetch_assoc($resultado)) {
   $lamarcavino =utf8_decode($row['marcavino']);
   $elcomentario =utf8_decode($row['comentario']);

   $laestrella = $row['estrellas'];
   $arr=array('marcavino'=>"$lamarcavino",'comentario'=>"$elcomentario",'estrellas'=>"$laestrella");
     $recomendacion[]= $arr;

  print(json_encode($recomendacion)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:58:51.760

`$lamarcavino`之后是 ISO 8859-1 `utf8_decode()`，因为`utf8_decode()` [从 UTF-8 转换为 ISO 8859-1](http://php.net/utf8_decode)。

`json_encode()` [仅支持 UTF-8](http://php.net/json_encode)，并且 ISO 8859-1 中的一些高级字符在 UTF-8 中无效。

# xml - 如何使用 XSLT 2.0 或 XPath 2.0 获取引用具有不同值的元素的 href？

> ID：12627083
> 
> 赞同：2
> 
> 时间：2012-09-27T17:38:09.353
> 
> 标签：xml, xslt, xpath, xpath-2.0

我有以下 XML 输入

```
<a href="h1" />
<a href="h2" />
<a href="h3" />

<b id="h1">E1</b>
<b id="h2">E1</b>
<b id="h3">E2</b>
<b id="h4">E3</b>
<b id="h5">E3</b>
<b id="h6">E4</b>
<b id="h7">E5</b> 
```

有没有办法使用 XSLT2/Xpath2 仅获取 h1 和 h3 引用不同的值 E1 和 E2 并忽略 h2，因为它引用相同的值 E1？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:53:25.867

**使用**, 假设`a`和`b`是顶部元素的子元素：

```
 for $href in /*/a/@href,
       $b in /*/b[@id = $href and not(. = preceding-sibling::b)]
     return
       string($href) 
```

**基于 XSLT-2 的验证**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:sequence select=
      "for $href in /*/a/@href,
           $b in /*/b[@id = $href and not(. = preceding-sibling::b)]
          return
             string($href)
      "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<html>
    <a href="h1" />
    <a href="h2" />
    <a href="h3" />
    <b id="h1">E1</b>
    <b id="h2">E1</b>
    <b id="h3">E2</b>
</html> 
```

**计算 XPath 表达式，并将计算结果复制到输出**：

```
h1 h3 
```

**更新**：

正如 Michael Kay 所指出的，上述解决方案是 O(N^2) 并且在有很多`b`兄弟姐妹的情况下可能会很慢。

**这是一个至少是线性（或更快）的 XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kReferrer" match="b" use="@id"/>

 <xsl:template match="/*">
   <xsl:for-each-group select="key('kReferrer', a/@href)" group-by=".">
     <xsl:sequence select="string(@id)"/>
   </xsl:for-each-group>
 </xsl:template>
</xsl:stylesheet> 
```

**同样，当此转换应用于同一个 XML 文档（如上）时，会产生所需的正确结果**：

```
h1 h3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:21:43.927

你可以试试这个 XPath：

```
/*/b[@id = /*/a/@href and not(preceding::b = .)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T21:51:52.503

我无法看到`<a>`元素扮演什么角色 - 在我看来问题只涉及`b`元素 - 我是否完全误解了它？

给定您的输入，将给定节点的父节点作为上下文项，

```
<xsl:for-each-group select="b" group-by=".">
  <xsl:value-of select="current-group()[1]/@id"/>
</xsl:for-each-group> 
```

将返回 h1 h2

# c++ - Qt中用于线程间通信的类设计

> ID：12627084
> 
> 赞同：4
> 
> 时间：2012-09-27T17:38:14.680
> 
> 标签：c++, multithreading, qt, uml, qthread

**问题陈述**：用相机跟踪物体并相应地在方位角和仰角上移动相机。

**过程**：相机获取物体的图像......相机的每一帧都被处理以找到物体（应该被跟踪......），并且在每一帧中产生的信息被传递给机械设备（云台...... .) 以平移和倾斜移动相机...

**设计**：主 Gui 在一个线程中运行，相机和云台在 2 个其他线程中运行...在相机线程中生成的信息被传递到云台线程，并且同一线程（相机线程...）显示跟踪的图像...

**约束：显示速度快于云台的移动速度**......所以在每一帧......

1.  处理和显示帧（以 10 毫秒的速率）
2.  生成的信息传递到云台
3.  云台线程暂停更长的时间（100 ms），以给机械部件移动时间，并确保云台在完成移动之前没有新的更新。

下图展示了 Qt 中类和信号槽连接的设计。

![在此处输入图像描述](../Images/2d5dd6d88ecaf15da0b62031f025ba7d.png)

如果可能的话，请提出任何更好的方法来解决这个问题......

**错误**：有时我得到一个错误...

**QObject::killTimers：定时器不能从另一个线程停止**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:55:26.717

对我来说，你应该避免在线程之间调用类似的函数，这是一个想法，这就是我安全交换大量数据的方式。

并且您应该拥有两个线程都访问共享可锁定变量的状态机（用于指向 ping 或 pong 缓冲区的主线程的指针 + 用于锁定的互斥锁）

这样你可以改变你使用数据的方式，“显示”应该总是使用相同的指针。它应该在开始读取和释放之后获取锁。

相机应该写入另一个缓冲区 相机写入后，相机线程应该尝试获取互斥锁的锁，如果它获得它（即另一个线程没有读取另一个缓冲区），那么相机线程应该获取锁定并更改主线程使用的指针指向的缓冲区）

这样你就没有线程之间的通信，只是互斥。

最大的风险是永远无法从相机线程获取锁，这里有一个解决方案 -> 为了限制锁定时间，我建议您在每个线程中都有第二个缓冲区，这样锁定时间会减少到“memcpy”持续时间。在结构中添加一个布尔值，这表示您的相机是否更新了数据。

如果是，则主线程复制数据。（并且相机在此期间无法交换指针）但是一旦完成，您的主线程也会将 bool 重置为 false。直到这个布尔值恢复为真，你才需要锁定来复制数据。（现在这是无锁交换）请注意，这只是因为读取 bool 是一个原子操作。

我希望它有帮助

（对不起我的英语不好）

# mod-wsgi - 在 mod_wsgi 下处理 Fabric 的标准输出？

> ID：12627086
> 
> 赞同：1
> 
> 时间：2012-09-27T17:38:16.537
> 
> 标签：mod-wsgi, fabric

我正在开发一个使用 Fabric 将代码部署到不同服务器的 API。当我使用 gunicorn 运行它时它可以工作，但是当我切换到 Apache 和 mod_wsgi 时，stdout 限制就会生效。

我在我的 wsgi 脚本中尝试过`sys.stdout = sys.stderr`，但我得到的不是 IOError

```
AttributeError: 'mod_wsgi.Log' object has no attribute 'isatty' 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:56:29.417

升级你的 mod_wsgi 版本。看起来您使用的是非常旧的版本。

# macos - 从捆绑包中打开示例文档

> ID：12627090
> 
> 赞同：0
> 
> 时间：2012-09-27T17:38:24.353
> 
> 标签：macos, cocoa, bundle, nsdocument

我希望我的 OS X 应用程序打开位于应用程序包中的示例文档。

我目前正在执行以下操作：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"tutorial.doc" ofType:nil];
[_documentController openDocumentWithContentsOfURL:[NSURL fileURLWithPath:path] display:YES completionHandler:nil]; 
```

这可行，但有一个意想不到的效果：如果我对文档进行更改并保存，下次我打开捆绑文档时，更改仍然存在。我希望捆绑文档是只读的。

我究竟做错了什么？如何防止修改此示例文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:50:19.433

您可以改用该[`duplicateDocumentWithContentsOfURL:copying:displayName:error:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocumentController_Class/Reference/Reference.html)方法。这将创建用户可以玩的文档的副本（如果他愿意，可以保存到其他位置）。此方法仅适用于 OS X 10.7 或更高版本。

# email-client - 将邮件从 pst 文件传输到网络邮件

> ID：12627101
> 
> 赞同：2
> 
> 时间：2012-09-27T17:39:02.420
> 
> 标签：email-client

我有一个非常旧的 Pst 文件。在那个文件中，我有很多文件夹和子文件夹。我现在想转移到基于网络的电子邮件帐户，例如 gmail、雅虎等...我还没有看到任何将消息从 pst 文件导入网络邮件的方法。有谁知道支持这个的网络邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:43:56.690

如果这是一次性的，请在 Outlook 中打开 .pst，通过 IMAP 连接到 webmail 服务并将邮件拖过来。

# c - 简单的 makefile 库变量 - 替换隐式规则

> ID：12627104
> 
> 赞同：0
> 
> 时间：2012-09-27T17:39:09.953
> 
> 标签：c, makefile

假设我想要一个非常简单的生成文件，其中包含要链接的库（可以说`-lm`）

```
CFLAGS=-Wall -g
LIBS=-lm 
```

如何在不必`$(LIBS)`在 makefile 中手动构造命令并破坏一堆隐式规则的情况下到达命令的正确部分？

[我在手册中找不到任何内容](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)

是否可以简单地用我自己写的规则替换隐含规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:46:04.460

在您提供的[链接](http://www.gnu.org/software/make/manual/make.html#Implicit-Variables)之后，有`LDFLAGS`：

```
LDFLAGS
Extra flags to give to compilers when they are supposed to invoke the linker, ‘ld’. 
```

# git - git 存储库的 MIME 类型？

> ID：12627114
> 
> 赞同：5
> 
> 时间：2012-09-27T17:40:00.443
> 
> 标签：git, mime-types

Git 存储库的 MIME 类型是什么？

我想通过项目网页链接它`<link rel="vcs" type="???" href="http://git.example.org/foo.git"/>`，但为此我需要知道*整个 git 存储库*的 MIME 类型。

git 从 HTTP 传输中获取的第一个文件是`/info/refs?service=git-upload-pack`，它的 MIME 类型是`application/x-git-upload-pack-advertisement`. 但这不适用于整个存储库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:50:01.507

有一个人[提议](http://joeyh.name/rfc/rel-vcs/)使用

```
<link rel="vcs-git" href="git://example.org/foo.git" title="foo git repository"/> 
```

为了这个目的。

* * *

让我感到奇怪的是，一个也被称为*cweiske的人有一个名为*[**phorkie**](https://github.com/cweiske/phorkie#features)的 github 项目，它确切地暗示了以下内容：

> 可以分叉远程粘贴（**rel="vcs-git"**和 gist.github.com）

（*由我标记*）

您是否已经知道解决方案并希望得到确认？

* * *

**编辑：**

正如 OP 在他的评论中提到的那样，他正在寻找一种不同的方式（即**不是** `rel="vcs-git"`）。

据我所知

*   git repo （以及其他目录）[没有官方的 MIME 类型](http://www.iana.org/assignments/media-types/application/index.html)
*   显然有必要（至少是OP的需要）定义一个

**所以，让我们开始吧：**

*   IANA的[类别分类](http://www.iana.org/assignments/media-types/index.html)表明使用**应用程序**，因为其他（音频、示例、图像、消息、模型、多部分、文本、视频）将是绝对错误的。
*   [前缀用于**`X-`**非标准文件](http://en.wikipedia.org/wiki/Internet_media_type#Prefix_x)。
*   应用程序名称将是**`git`**

那么，为什么不**`application/x-git`**从现在开始使用...

# c# - 需要帮助简化嵌套的 if 块

> ID：12627115
> 
> 赞同：1
> 
> 时间：2012-09-27T17:40:01.610
> 
> 标签：c#, if-statement, simplification

我有以下代码块：

```
if (x > 5)
{
    if (!DateTime.TryParse(y, out z))
        break;
    if (w.CompareTo(z) == -1)
        break;
} 
```

其中 x 是整数，y 是字符串，z 和 w 是 DateTime 变量。的原因`break;`是整个块驻留在循环中。

有什么方法可以简化它以使其更易于阅读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:10:55.150

您*不需要*multilpe`if`块来执行代码，因为您只做两件事之一，执行循环或不执行循环（一个 if 和一个 else）。如此处所示[，](https://stackoverflow.com/a/12627155/1159478)您可以使用单个布尔表达式来表示是否应该跳过该循环迭代。

```
(x > 5) && (!DateTime.TryParse(y, out z) || w.CompareTo(z) == -1) 
```

话虽如此，在循环中包含这样的复杂条件会妨碍可读性。就个人而言，我会简单地将这个条件提取到一个方法中，以便循环看起来像这样：

```
while(!done) // or whatever the while loop condition is
{
    if(itemIsValid(x, y, w, out z))
    {
        //the rest of your loop
    }
}

//it may make sense for x, y, w, and possibly z to be wrapped in an object, or that already may be the case.  Consider modifying as appropriate.
//if any of the variables are instance fields they could also be omitted as parameters
//also don't add z as an out parameter if it's not used outside of this function; I included it because I wasn't sure if it was needed elsewhere
private bool itemIsValid(int x, string y, DateTime w, out DateTime z)
{
    return (x > 5) 
        && (!DateTime.TryParse(y, out z) || w.CompareTo(z) == -1)
} 
```

这有几个优点。首先，它是一种无需注释即可自行记录代码的方式。查看循环时，您可以将其理解为“当我还没有完成时，如果项目有效，请执行所有这些操作”。如果您对如何定义有效性感兴趣，请查看该方法，否则请跳过它。您还可以将该方法重命名为更具体的名称，例如“isReservationSlotFree”或它实际代表的任何名称。

如果您的验证逻辑很复杂（这有点复杂），它允许您添加注释和解释，而不会弄乱更复杂的循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:42:11.340

```
if (x > 5)
{
    if(!DateTime.TryParse(y,out z) || w.CompareTo(z) == -1)
        break;
} 
```

由于两个条件句具有相同的结果，因此可以将它们合并为一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T17:42:51.713

```
if ((x > 5) && (!DateTime.TryParse(y, out z) || w.CompareTo(z) == -1))
    break; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T18:14:32.057

“简化”并不意味着更容易阅读。

您可以通过以下方式使您的代码更易于阅读（并且在各种编码规则方面更安全）：

1) 总是对 if 语句和类似语句使用括号

2）避免使用'！' （'== false' 更加明确）

3) 使用明确这些变量是什么的变量名。

4）避免多个break语句。相反，请使用在 while 条件中评估的标志。

5）如果您的代码仍然难以阅读：使用注释！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T18:03:07.733

更重要的是：使用描述性变量名称`w, x, y, z`（希望这些名称仅用于您的示例）：

您还可以使用小于或大于运算符来代替`CompareTo`.

```
if (x > 5)
{
    bool isValidDate = DateTime.TryParse(y, out z);
    if (!isValidDate || z > w)
    {
        // comment like: stop processing if the current date 
        // is after the reference date, or if there was a parsing error
        break;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T18:40:38.783

这是另一个版本。

```
var Break = x > 5 ? ((!DateTime.TryParse(y, out z) || w.CompareTo(z) == -1) ? true : false) : false; 
```

简短但妨碍了可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T17:54:07.887

```
if ( x > 5 ){
    if (!DateTime.TryParse(y, out z) || w.CompareTo(z) == -1) break;
} 
```

# python - 获取函数参数的默认值？

> ID：12627118
> 
> 赞同：78
> 
> 时间：2012-09-27T17:40:07.613
> 
> 标签：python

对于这个功能

```
def eat_dog(name, should_digest=True):
    print "ate dog named %s. Digested, too? %" % (name, str(should_digest)) 
```

我想在函数外部读取它的参数和附加的任何默认值。所以对于这个特定的例子，我想知道它`name`没有默认值（即它是一个必需的参数），这`True`是`should_digest`.

我知道`inspect.getargspec()`，它确实为我提供了有关参数和默认值的信息，但我认为两者之间没有任何联系：

`ArgSpec(args=['name', 'should_digest'], varargs=None, keywords=None, defaults=(True,))`

从这个输出我怎么知道`True`（在`defaults`元组中）是默认值`should_digest`？

此外，我知道解决问题的“请求宽恕”模型，但不幸的是，该错误的输出不会告诉我缺少的参数的名称：

```
>>> eat_dog()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: eat_dog() takes at least 1 argument (0 given) 
```

为了提供上下文（我为什么要这样做），我通过 JSON API 公开模块中的函数。如果调用者省略了某些函数参数，我想返回一个特定的错误来命名被省略的特定函数参数。如果客户端省略了参数，但函数签名中提供了默认值，我想使用该默认值。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-09-27T17:46:14.617

## Python3.x

在 python3.x 世界中，您可能应该使用一个[`Signature`](https://docs.python.org/3/library/inspect.html#inspect.Signature)对象：

```
import inspect

def get_default_args(func):
    signature = inspect.signature(func)
    return {
        k: v.default
        for k, v in signature.parameters.items()
        if v.default is not inspect.Parameter.empty
    } 
```

## Python2.x（旧答案）

参数/默认值可以组合为：

```
import inspect
a = inspect.getargspec(eat_dog)
zip(a.args[-len(a.defaults):],a.defaults) 
```

这`a.args[-len(a.defaults):]`是具有默认值的参数，显然`a.defaults`是相应的默认值。

您甚至可以将 的输出传递`zip`给`dict`构造函数并创建适合关键字解包的映射。

* * *

查看文档，此解决方案仅适用于 python2.6 或更高版本，因为我假设它`inspect.getargspec`返回一个*命名的 tuple*。早期版本返回一个*常规的 tuple*，但很容易进行相应的修改。这是一个适用于旧（和新）版本的版本：

```
import inspect
def get_default_args(func):
    """
    returns a dictionary of arg_name:default_values for the input function
    """
    args, varargs, keywords, defaults = inspect.getargspec(func)
    return dict(zip(args[-len(defaults):], defaults)) 
```

想一想：

```
 return dict(zip(reversed(args), reversed(defaults))) 
```

也可以工作，并且对某些人来说可能更直观。

* * *

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T17:46:14.380

您可以使用`inspect`模块及其[`getargspec`功能](http://docs.python.org/library/inspect.html#inspect.getargspec)：

> `inspect.getargspec(func)`
> 
> 获取**Python 函数参数的名称和默认值**。`tuple`返回四样东西中的一个： `(args, varargs, keywords, defaults)`. **`args`是参数名称的列表**（它可能包含嵌套列表）。`varargs`和`keywords`是`*`和`**`参数或的名称`None`。**`defaults`是默认参数值的元组，**或者`None`如果没有默认参数；如果此元组有`n`元素，则它们对应于 中`n`列出的最后一个元素`args`。

有关如何检索参数名称及其默认值的确切代码，请参阅[mgilson 的答案。](https://stackoverflow.com/a/12627202/548696)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-28T10:15:38.967

根据您的具体需要，您可能不需要该`inspect`模块，因为您可以检查`__defaults__`函数的属性：

```
>>> eat_dog.__defaults__
(True,)
>>> eat_dog.__code__.co_argcount
2
>>> eat_dog.__code__.co_varnames
('name', 'should_digest')
>>> 
>>> eat_dog.__kwdefaults__
>>> eat_dog.__code__.co_kwonlyargcount
0 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-28T13:30:11.673

对于那些正在寻找一个版本来获取具有[mgilson](https://stackoverflow.com/a/12627202/5332072)答案的特定默认参数的人。

```
 value = signature(my_func).parameters['param_name'].default 
```

这是一个完整的工作版本，完成`Python 3.8.2`

```
from inspect import signature

def my_func(a, b, c, param_name='apple'):
    pass

value = signature(my_func).parameters['param_name'].default

print(value == 'apple') # True 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-13T19:05:24.523

照顾仅限关键字的参数（并且因为 defaults 和 kwonlydefaults 可以是`None`）：

```
spec = inspect.getfullargspec(func)
defaults = dict(zip(spec.args[::-1], (spec.defaults or ())[::-1]))
defaults.update(spec.kwonlydefaults or {}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-22T02:29:06.957

在python中，所有具有默认值的参数都在没有默认值的参数之后。所以映射应该从头开始，直到你用完默认值列表。因此逻辑：

```
dict(zip(reversed(args), reversed(defaults))) 
```

给出正确映射的默认值。

# wordpress - 如何从 Wordpress 中的 user_meta foreach 循环中排除当前的帖子信息

> ID：12627119
> 
> 赞同：0
> 
> 时间：2012-09-27T17:40:14.500
> 
> 标签：wordpress

我创建了一个简单的“收藏帖子”按钮，登录用户可以单击该按钮将帖子保存到他们的“收藏夹”列表中。该按钮将当前帖子 ID 附加到 user_meta 字段。

但是，在“我的收藏夹”页面上显示信息时，我有点卡住了。

我可以毫无问题地显示最喜欢的帖子 ID 列表，但是当我尝试添加帖子标题和永久链接等信息时，Wordpress 会将“我的收藏夹”页面信息传递到数组中。在“收藏夹”列表上方，用户还将看到一个超链接的“我的收藏夹”。

关于如何防止这种情况发生的任何想法。这是代码...

```
<?php //start favorites list
    // Get user info.
    global $current_user, $wp_roles;
    get_currentuserinfo();

    $myFaves = get_user_meta($current_user->id, 'faveposts', true);
    $myFavesArray = explode(',',$myFaves);
    sort($myFavesArray);

    foreach ($myFavesArray as $myFave) :
?>

    <a href="<?php echo get_permalink( $myFave ); ?>">
        <?php echo get_the_title($myFave); ?>
    </a>

<?php endforeach; //end favorites list ?> 
```

这是输出...

```
<a href="http://sample-url.com/favorites/">
    Your Favorites
</a>

<a href="http://sample-url.com/post-1/">
    Post Title 1
</a>

<a href="http://sample-url.com/post-2/">
    Post Title 2
</a> 
```

帖子标题 1 和 2 是实际收藏帖子的示例。您的收藏夹是显示收藏夹的页面（不应显示）。

想法？

**编辑**

找到了解决办法。添加这段代码会从数组中删除当前帖子...

```
unset($myFavesArray[0]); 
```

所以最终的代码是......

```
$myFaves = get_user_meta($current_user->id, 'faveposts', true);
$myFavesArray = explode(',',$myFaves);
unset($myFavesArray[0]);
sort($myFavesArray);

foreach ($myFavesArray as $myFave) : 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T06:28:33.873

根据您的代码，似乎 $myFavesArray 的第一个索引值为空。因此，当您使用[get_permalink()](https://codex.wordpress.org/Function_Reference/get_permalink)由于第一次传递空参数时，它会返回当前的帖子链接。所以你需要取消设置 $myFavesArray[0] 数组的第一个索引。

一个建议：当您在用户元中保存值时，请执行删除数组中的空值并将唯一值存储在数组中的代码。之后，您在检索时不需要对 user_meta 进行任何操作。

希望这对您有所帮助。一切顺利 ;）

# c# - 如何在数据表的列中查找字符串

> ID：12627120
> 
> 赞同：1
> 
> 时间：2012-09-27T17:40:21.090
> 
> 标签：c#, winforms

我正在尝试找到一种快速方法来在 DataTable 的列中查找字符串并将其添加到组合框，这是我迄今为止尝试的代码：

```
adapter = new SqlDataAdapter("Select Id_Editeur ID,Libelle_Editeur Editeur from Editeur", myClass.cnx);
            adapter.Fill(myClass.ds, "Editeur");
            foreach (String str in myClass.ds.Tables["Editeur"].Columns[1].ToString())
                editeurBox.Properties.Items.Add(str); 
```

那是行不通的，它给了我这个错误：

> foreach 语句无法对“System.Data.DataColumn”类型的变量进行操作，因为“System.Data.DataColumn”不包含“GetEnumerator”的公共定义

我怎样才能做到这一点 ？（我不想要 for 循环解决方案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:44:26.983

```
foreach (var row in myClass.ds.Tables["Editeur"].AsEnumerable())
{
    editeurBox.Properties.Items.Add(row[1].ToString());
} 
```

或完整的 linq 样式：

```
editeurBox.Properties.Items.AddRange(
    myClass.ds.Tables["Editeur"]
       .AsEnumerable()
       .Select(dr => dr[1].ToString()
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T17:46:07.563

您可以尝试使用此代码 - 基于`LINQ Field operator`

```
var results = from myRow in myDataTable.AsEnumerable()
where myRow.Field<string>("RowNo") == "yourSearch"
select myRow; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:45:00.323

我认为您需要遍历行并获取所需的列。您的代码正在尝试遍历不包含任何数据的列集合：

```
foreach (DataRow row in myClass.ds.Tables["Editeur"].Rows)
                    editeurBox.Properties.Items.Add(row[1].ToString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:55:28.803

```
 string TableSelect;
        DataTable dt = GetSomeData();

        foreach (DataRow row in dt.Rows)
        {
            TableSelect = "EmplNo = " + row["EmplNo"].ToString();
            DataRow[] foundrows;
            foundrows = dt.Select(TableSelect);
            if (foundrows.Count() > 0)
            {
                //do something useful here :)
            }
        } 
```

# ruby-on-rails - 将数组内容清空到表字段中

> ID：12627123
> 
> 赞同：0
> 
> 时间：2012-09-27T17:40:38.743
> 
> 标签：ruby-on-rails, ruby

我正在尝试获取一个填充数组并将其内容清空到指定的表字段中。

我有一个 rake 文件，它通过 CSV 文件导入新行，该文件需要从我已经填充的数组中提取值并将它们添加到`incident_id`字段中。

例如：

```
@id_array = [97, 98, 99] 
```

所以，如果我要导入三个新行，第一行需要得到`incident_id`97，第二行需要得到`incident_id`98，依此类推，直到数组为空。

这是我的 rake 文件的代码：

```
require 'csv'

namespace :import_timesheets_csv do

  task :create_timesheets => :environment do
    puts "Import Timesheets"

    csv_text = File.read('c:/rails/thumb/costrecovery_csv/lib/csv_import/timesheets.csv')
    csv = CSV.parse(csv_text, :headers => true)
    csv.each do |row|
      row = row.to_hash.with_indifferent_access
      Timesheet.create!(row.to_hash.symbolize_keys)
      timesheet = Timesheet.last
      timesheet.incident_id << @id_array
      timesheet.save
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:45:37.830

```
if csv.size == @id_array.size
  csv.each_with_index do |row,index|
    row = row.to_hash.with_indifferent_access
    Timesheet.create!(row.to_hash.symbolize_keys)
    timesheet = Timesheet.last
    timesheet.incident_id = @id_array[index]
    timesheet.save
  end
else
   #Handel error arrays are not equal in size
end 
```

# linux - 如何在 shell 脚本中使用 ftp 制作远程文件夹的镜像

> ID：12627125
> 
> 赞同：1
> 
> 时间：2012-09-27T17:40:39.240
> 
> 标签：linux, shell, ftp, cron

我有一个 ftp 位置，我需要编写 shell 脚本以在特定时间间隔内对其进行镜像。我将使用 Linux cron 设置计时器，但如何使用 ftp 将远程文件夹镜像到本地文件夹。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T17:45:43.260

试试用这个......

`#!/bin/bash`

`HOST='172.13.17.11'`

`USER='username'`

`PASS='password'`

`TARGETFOLDER='/mnt/htdocs/businessfiles/files'`

`SOURCEFOLDER='/somefolder'`

`lftp -f "`

`open $HOST`

`user $USER $PASS`

`lcd $TARGETFOLDER`

`mirror --verbose $SOURCEFOLDER $TARGETFOLDER`

`bye` "`

# javascript - 删除 div 作为用户删除 javascript 中的输入

> ID：12627130
> 
> 赞同：0
> 
> 时间：2012-09-27T17:40:54.040
> 
> 标签：javascript, dom, html, createelement

我正在尝试获取用户输入，匹配结果，在下拉列表中显示结果，然后单击下拉列表中的名称以显示它。我已经能够使用 innerHTML 在下拉列表中显示结果，但它不可点击，所以现在我正在动态创建 Div 元素。但是，我不确定当用户按下退格键时如何清除列表。我以前是用**document.getElementById('placeholder').innerHTML=""**语句来做的。这是我到目前为止所做的。注释中的代码适用于我使用 innerHTML 显示下拉菜单时的代码：

HTML 代码：

```
<body>
  <input id="filter" type="text" placeholder="Enter your filter text here.."
   onkeyup="test()"/>

  <div id="lc">  
    <!--- <p id='placeholder'> </p>  -->
  </div>
  <script type="text/javascript" src="js/filter.js"></script>
</body> 
```

JS代码：

```
 // JavaScript Document
 s1 = new String()
 var myArray = new Array();

 myArray[0] = "Donald Duck";
 myArray[1] = "Winnie Pooh";
 myArray[2] = "Komal Waseem";
 myArray[3] = "Hockey";
 myArray[4] = "Basketball";
 myArray[5] = "Shooting";
 myArray[6] = "Mickey Mouse";

 function test() {
   s1 = document.getElementById('filter').value;
   var myRegex = new RegExp((s1),"ig");
   arraysearch(myRegex);
 }

 function arraysearch(myRegex) { 
   var flag=0;

   //document.getElementById('placeholder').innerHTML=""; 
   for(i=0; i<myArray.length; i++) { 
   //if(myArray[i].charAt(0).indexOf(s1) != -1) {
     if(myArray[i].match(myRegex)) { 
       flag = 1;
       //document.getElementById('lc').style.visibility = 'visible';
       //document.getElementById('placeholder').innerHTML += myArray[i]+"<br/>";
       var element = document.createElement("div");
       element.appendChild(document.createTextNode(myArray[i]));
       document.getElementById('lc').appendChild(element);
     }
   //}

   if (flag == 0) {
     document.getElementById('lc').style.visibility='hidden';
   }
 } 
```

# algorithm - 特定算法对具有 m 个不同值的 n 个元素进行排序

> ID：12627131
> 
> 赞同：1
> 
> 时间：2012-09-27T17:41:04.500
> 
> 标签：algorithm, language-agnostic, sorting

我正在通过算法分析考试的练习，这是其中之一：

> 提出一种算法，该算法将 n 个元素（可比较）的列表作为输入，并在 O(n log m) 时间内对它们进行排序，其中 m 是输入列表中不同值的数量。

我已经阅读了常见的排序算法，但我真的想不出一个解决方案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T18:08:19.883

`n`您可以在元素上构建增强的平衡二叉搜索树。存储在每个节点的增强信息将是它的频率。`n`您通过插入树来构建此结构，执行此操作的时间将是`O(n lg m)`，因为只有`m`节点。然后你按顺序遍历这棵树：访问左子树，然后打印存储在根`f`时间的元素，`f`它的频率在哪里（这是增强的信息），最后访问右子树。这种遍历需要时间`O(n + m)`。所以，这个简单程序的运行时间是`O(n lg m + n + m) = O(n lg m)`从`m <= n`.

# javascript - 自动完成填写所有字段

> ID：12627132
> 
> 赞同：0
> 
> 时间：2012-09-27T17:41:12.143
> 
> 标签：javascript, jquery, html, jquery-ui

我有这个代码：

```
$(document).ready(function() {

 $(".quantity").keydown(function(event) {
    // Allow: backspace, delete, tab, escape, and enter
    if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
         // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) || 
         // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
    }
    else {
        // Ensure that it is a number and stop the keypress
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
            event.preventDefault(); 
        }   
    }
});

$counter = 1;
$('#buttonadd').click(function() {
    $counter++;
    $('#invoiceitems > tbody:last').append('<tr><td><input type="button" class="deleteitem" value="Delete"/></td><td><input type="text" name="item[' + $counter + '][code]" id="' + $counter + '-1" class="code" value="" disabled="disabled"/></td><td><input type="text" name="item[' + $counter + '][desc]" id="' + $counter + '" class="regular-text" value="" /></td><td>£<input type="text" name="item[' + $counter + '][price]" id="' + $counter + '-3"class="price" value="0.00" disabled="disabled"/></td><td><input type="text" name="item[' + $counter + '][quantity]" id="' + $counter + '-4" class="quantity" value="0" /></td><td>£<label class="subtotal">0.00</label></td></tr>');
 $('.quantity , .price , .code').unbind().on('change', function() {
    UpdateTotals(this);
});

// Use the .autocomplete() method to compile the list based on input from user

$(".regular-text").autocomplete("client/inc/get_item_list.php", {
    width: 260,
    matchContains: true,
    mustMatch: true,
    minChars: 2,
    //multiple: true,
    //highlight: false,
    //multipleSeparator: ",",
    selectFirst: true
});

$(".regular-text").result(function(event, data, formatted) {
    $(".code").val(data[1]);
    $(".price").val(data[2]);
        // Give focus to the next input field to recieve input from user
        $("input[class='quantity']").focus();
});

});

// Use the .autocomplete() method to compile the list based on input from user
$(".regular-text").autocomplete("client/inc/get_item_list.php", {
    width: 260,
    matchContains: true,
    mustMatch: true,
    minChars: 2,
    //multiple: true,
    //highlight: false,
    //multipleSeparator: ",",
    selectFirst: true
});

$(".regular-text").result(function(event, data, formatted) {
    $(".code").val(data[1]);
    $(".price").val(data[2]);
        // Give focus to the next input field to recieve input from user
        $("input[class='quantity']").focus();
});

});

$(function() {
CalculateSubTotals();
CalculateTotal();
// Adding the change events for the Price and
// quantity fields only..
// Changing the total should not affect anything
$('.quantity , .price').on('change', function() {
    UpdateTotals(this);
});
});

function UpdateTotals(elem) {
// This will give the tr of the Element Which was changed
var $container = $(elem).parent().parent();
var quantity = $container.find('.quantity').val();
var price = $container.find('.price').val();
var subtotal = parseInt(quantity) * parseFloat(price);
$container.find('.subtotal').text(subtotal.toFixed(2));
CalculateTotal();
}

function CalculateSubTotals() {
// Calculate the Subtotals when page loads for the 
// first time
var lineTotals = $('.subtotal');
var quantity = $('.quantity');
var price= $('.price');
$.each(lineTotals, function(i){
    var tot = parseInt($(quantity[i]).val()) * parseFloat($(price[i]).val());
    $(lineTotals[i]).text(tot.toFixed(2));
});
}

function CalculateTotal() {
// This will Itearate thru the subtotals and
// claculate the grandTotal and Quantity here
var lineTotals = $('.subtotal');
var quantityTotal = $('.quantity');
var grandTotal = 0.0;
var totalQuantity = 0;
$.each(lineTotals, function(i) {
    grandTotal += parseFloat($(lineTotals[i]).text());
    totalQuantity += parseInt($(quantityTotal[i]).val())
});

$('.totalquantity').text(totalQuantity);
$('.grandtotal').text(parseFloat(grandTotal).toFixed(2));
}; 
```

HTML：

```
<table border="0" id="invoiceitems">
                <thead>
                    <tr>
                    <td></td>
                    <td><strong>Item ID</strong></td>
                    <td><strong>Description</strong></td>
                    <td><strong>Unit Cost</strong></td>
                    <td><strong>Quantity</strong></td>
                    <td><strong>Total</strong></td>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><strong>Total:</strong></td>
                    <td>£<label class="grandtotal"></label></td>
                    </tr>
                </tfoot>
                <tbody>
                <tr>
<td><input type="button" class="deleteitem"  value="Delete"/></td>
<td><input type="text" name="item[1][code]" id="1-1" class="code" value="" disabled="disabled"/></td>
<td><input type="text" name="item[1][desc]" id="1" class="regular-text" value="" /></td>
<td>£<input type="text" name="item[1][price]" id="1-3" class="price" value="0.00" disabled="disabled"/></td>
<td><input type="text" name="item[1][quantity]" id="1-4" class="quantity" value="0" /></td>
<td>£<label class="subtotal"></label></td>
</tr>
</tbody>
                </table>
                <p><input type="button" id="buttonadd" value="Add Line"/></p> 
```

问题是当您单击并从自动完成框中添加一个值时，它会更新所有字段！演示在这里：[http](http://www.clockworkhire.co.uk/jstest.html) ://www.clockworkhire.co.uk/jstest.html 输入一些新行，然后在任何描述框中使用搜索字符串：sm58。我该如何解决这个问题？

# symfony - Symfony2 composer.json "repositories" — 是什么驱动获取的版本？

> ID：12627133
> 
> 赞同：4
> 
> 时间：2012-09-27T17:41:13.010
> 
> 标签：symfony, composer-php

我正在尝试使用 twitter/bootstrap 存储库而不利用[http://packagist.org](http://packagist.org)。下面的`composer.json`方法可以很好地获取 tag `2.1.1`，但正如你所看到的，我已经引用了`2.1.1`3 次版本。这似乎过于多余。我的问题是：

**是什么变量驱动获取所需版本的引导存储库？**我应该在某个地方使用master，然后只`2.1.1`在其他地方使用吗？

*   是`"require": { "twitter/bootstrap": "2.1.1" }`吗？
*   是`"version": "2.1.1"`吗？
*   是`"reference": "v2.1.1"`吗？

`composer.json`截图如下：

```
"require": {
        "twitter/bootstrap": "2.1.1"
    },
"repositories": [
    {
     "type": "package",
     "package": {
     "version": "2.1.1",
      "name": "twitter/bootstrap",
      "source": {
         "url": "https://github.com/twitter/bootstrap.git",
         "type": "git",
         "reference": "v2.1.1"
     }
   }
 }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:55:52.863

*   `reference`是存储库的真实对象——就像一个标签。
*   `version`是您如何称呼它以从该`require`部分引用。
*   该`require`部分中的一个是与值匹配的模式`version`。您可以将其设置为`2.1.*`或`2.*`减少限制。

# vba - 更改工作表名称，一个困难的

> ID：12627134
> 
> 赞同：2
> 
> 时间：2012-09-27T17:41:19.117
> 
> 标签：vba, excel

当我使用excel打开一个.txt文件（记事本文件）时，工作表名就是默认打开的记事本文件的文件名。因此，当打开不同的记事本文件时，工作表名称会有所不同。下游代码需要这个工作表名称是固定的。无论如何要将工作表名称更改为固定名称，例如“sheet1”。顺便说一句，不能使用代号，因为使用打开文件中数据的宏不是另一个工作簿。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T17:45:37.890

当您从 Excel 打开 .txt 文件时，您不需要代号而不是工作表名称。总会有 1 张。因此，在您的代码中，您始终可以将该表称为

```
wb.Sheets(1) 
```

`wb`工作簿对象在哪里。

供您参考，您使用 VBA 打开的每个 .txt 文件都不能有一个通用名称，除非您通过代码设置它。如果你这样做，你将不得不仍然使用`wb.Sheets(1)`

例如

```
wb.Sheets(1).Name = "Blah Blah" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:16:42.690

你可以调用你的文本文件 sheet1.txt 吗？那能解决你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:06:57.607

我正在想象您的宏会动态打开文本文件，因为您想使用 excel 内置的 csv 解析。也许之后对数据进行排序和过滤。

Siddarth 给了你一个很好的线索，但你不应该担心名称或工作表，因为正如他所说，你有工作表对象可用于下游代码。

```
wb.Sheets(1) 
```

现在，如果您想在打开文件的子例程之外引用此工作表。为您的使用全局变量

```
wb 
```

# javascript - 如何在greasemonkey中更新用户脚本

> ID：12627139
> 
> 赞同：3
> 
> 时间：2012-09-27T17:41:51.043
> 
> 标签：javascript, firefox, greasemonkey

我对 Greasemonkey 有疑问，它不会自动更新我的脚本（可能是因为我们不想将它添加到它的 UserScripts 根目录中，而且在这种情况下它似乎不会更新它）...

无论如何，我正在向我的脚本添加一段代码（主要思想来自[这里](http://userscripts.org/scripts/show/20145)）以检查脚本中的脚本版本并让用户知道是否有可用的新版本，并且好像用户想要更新它，如果有的话应该为脚本 url 打开一个新窗口/选项卡（它应该触发 Greasemonkey 来安装它）......这是我的 senario，它完美地工作到它应该打开一个新窗口/选项卡......

在这里你可以看到我正在使用的功能：

```
function checkForUpdate(in_vid){

    var plugin_url = 'https://MyWebSiteURL/MonaTest.user.js?'+new Date().getTime();

    if ((parseInt(GM_getValue('SUC_last_update', '0')) + 86400000 <= (new Date().getTime()))){
        try {
            GM_xmlhttpRequest( {
                method: 'GET',
                url: plugin_url,
                headers: {'Cache-Control': 'no-cache'},
                onload: function(resp){
                    var local_version, remote_version, rt, script_name;

                    rt=resp.responseText;
                    GM_setValue('SUC_last_update', new Date().getTime()+'');
                    remote_version = parseFloat(/@version\s*(.*?)\s*$/m.exec(rt)[1]);
                    local_version = parseFloat(GM_getValue('SUC_current_version', '-1'));

                    if(local_version!=-1){
                        script_name = (/@name\s*(.*?)\s*$/m.exec(rt))[1];
                        GM_setValue('SUC_target_script_name', script_name);

                        if (remote_version > local_version){

                            if(confirm('There is an update available for the Greasemonkey script "'+script_name+'."\nWould you like to install it now?')){
                    ------->    GM_openInTab(plugin_url);
                                //window.open(plugin_url,'_blank')
                                //location.assign(plugin_url);
                                GM_setValue('SUC_current_version', remote_version);
                            }
                        }
                        else{
                            GM_log('No update is available for "'+script_name+'"');
                        }
                    }
                    else{
                        GM_setValue('SUC_current_version', remote_version+'');
                    }
                }
            });
        }
        catch (err){
            GM_log('An error occurred while checking for updates:\n'+err);
        }
    }
} 
```

我尝试使用 GM_openInTab，但它在控制台中返回此错误：

```
Timestamp: 9/27/12 9:55:33 AM
Error: ReferenceError: GM_openInTab is not defined
Source File: file:///Users/Mona/Library/Application%20Support/Firefox/Profiles/tonwb5lg.default/gm_scripts/MonaTest/MonaTest.user.js
Line: 97 
```

我找不到任何参考表明 GM_openInTab 不再支持！

我尝试了其他解决方案，使用 window.open 和 location.assign ......它们都不起作用，因为它们显示脚本源代码而没有触发 Greasemonkey 安装它......

我不知道是否有办法使用这种方法更新脚本......如果你分享你的知识并帮助我解决我的问题，我将不胜感激。

谢谢你的时间！

PS我的firefox版本是15.0.1，Greasemonkey版本是1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:04:19.440

别忘了`@grant`。

* * *

如果我错了，请纠正我，但你的脚本不以 js 结尾。

`var plugin_url = 'https://MyWebSiteURL/MonaTest.user.js?'+new Date().getTime();`

尝试强制 .js 扩展名。
当我在脚本中添加日期时，GM 停止安装它。
删除最后的日期并尝试一下。

*最后一件事：你的剧本是基于 2009 年的剧本。看看一个新的，比如[2011](http://userscripts.org/scripts/show/41075)年的剧本。*

# gdb - 为什么 gdb 认为我的 x86-64 程序是 i386？

> ID：12627140
> 
> 赞同：7
> 
> 时间：2012-09-27T17:41:53.070
> 
> 标签：gdb, x86-64, freepascal, fpc

我正在尝试调试 64 位程序，但 gdb 似乎认为它具有 i386 架构。

```
# file /usr/local/bin/foo
/usr/local/bin/foo: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.4.0, not stripped

# gdb --args foo bar
GNU gdb (GDB) 7.3.1
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-pc-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/local/bin/foo...done.
(gdb) set debug arch 1
(gdb) show debug arch
Architecture debugging is 1.
(gdb) info target
Symbols from "/usr/local/bin/foo".
Local exec file:
gdbarch_find_by_info: info.bfd_arch_info i386:x86-64
gdbarch_find_by_info: info.byte_order 1 (little)
gdbarch_find_by_info: info.osabi 5 (GNU/Linux)
gdbarch_find_by_info: info.abfd 0xaf4a90
gdbarch_find_by_info: info.tdep_info 0x0
gdbarch_find_by_info: Previous architecture 0xb05790 (i386:x86-64) selected
    `/usr/local/bin/foo', file type elf64-x86-64.
    Entry point: 0x419730
    0x00000000004001c8 - 0x00000000004001e4 is .interp
    0x00000000004001e4 - 0x0000000000400204 is .note.ABI-tag
    0x0000000000400208 - 0x0000000000402560 is .hash
    0x0000000000402560 - 0x0000000000409898 is .dynsym
    0x0000000000409898 - 0x0000000000411188 is .dynstr
    0x0000000000411188 - 0x0000000000411b22 is .gnu.version
    0x0000000000411b28 - 0x0000000000411b88 is .gnu.version_r
    0x0000000000411b88 - 0x00000000004181a0 is .rela.dyn
    0x00000000004181a0 - 0x0000000000418e78 is .rela.plt
    0x0000000000418e78 - 0x0000000000418e90 is .init
    0x0000000000418e90 - 0x0000000000419730 is .plt
    0x0000000000419730 - 0x00000000004ede38 is .text
    0x00000000004ede38 - 0x00000000004ede46 is .fini
    0x00000000004ede48 - 0x00000000004ede4c is .eh_frame
    0x00000000006ee000 - 0x00000000006ee010 is .ctors
    0x00000000006ee010 - 0x00000000006ee020 is .dtors
    0x00000000006ee020 - 0x00000000006ee028 is .jcr
    0x00000000006ee028 - 0x00000000006ee1f8 is .dynamic
    0x00000000006ee1f8 - 0x00000000006f07f0 is .got
    0x00000000006f07f0 - 0x00000000006f0c50 is .got.plt
    0x00000000006f0c50 - 0x0000000000736c70 is .data
    0x0000000000736c70 - 0x000000000073b420 is .bss
(gdb) start
Temporary breakpoint 1 at 0x419e70: file foo.lpr, line 69.
Starting program: /usr/local/bin/foo bar
warning: Selected architecture i386:x86-64 is not compatible with reported target architecture i386
gdbarch_find_by_info: info.bfd_arch_info i386:x86-64
gdbarch_find_by_info: info.byte_order 1 (little)
gdbarch_find_by_info: info.osabi 5 (GNU/Linux)
gdbarch_find_by_info: info.abfd 0xaf4a90
gdbarch_find_by_info: info.tdep_info 0x0
gdbarch_find_by_info: Target rejected architecture
gdbarch_update_p: Architecture not found
warning: Architecture rejected target-supplied description
gdbarch_find_by_info: info.bfd_arch_info i386:x86-64
gdbarch_find_by_info: info.byte_order 1 (little)
gdbarch_find_by_info: info.osabi 5 (GNU/Linux)
gdbarch_find_by_info: info.abfd 0xd6ce90
gdbarch_find_by_info: info.tdep_info 0x0
gdbarch_find_by_info: Previous architecture 0xb05790 (i386:x86-64) selected
Error in re-setting breakpoint 1: Cannot access memory at address 0x419e60
Error in re-setting breakpoint 1: Cannot access memory at address 0x419e60
process 5299 is executing new program: /usr/local/bin/foo
warning: Selected architecture i386:x86-64 is not compatible with reported target architecture i386
gdbarch_find_by_info: info.bfd_arch_info i386:x86-64
gdbarch_find_by_info: info.byte_order 1 (little)
gdbarch_find_by_info: info.osabi 5 (GNU/Linux)
gdbarch_find_by_info: info.abfd 0xb21790
gdbarch_find_by_info: info.tdep_info 0x0
gdbarch_find_by_info: Target rejected architecture
Architecture of file not recognized. 
```

注意警告：

```
warning: Selected architecture i386:x86-64 is not compatible with reported target architecture i386 
```

接着：

```
gdbarch_find_by_info: Target rejected architecture
gdbarch_update_p: Architecture not found
warning: Architecture rejected target-supplied description 
```

在 gdb 中，如果我键入“设置架构”并点击选项卡，我会看到以下内容：

```
(gdb) set architecture 
auto               i386:intel         i386:x64-32:intel  i386:x86-64:intel  
i386               i386:x64-32        i386:x86-64        i8086 
```

我的问题是：为什么 gdb 认为我的文件具有 i386 架构，即使它显然是 x86-64 二进制文件，我该怎么做才能修复它？

我的程序是使用[FreePascal](http://www.freepascal.org/)版本 2.6.0 编译的。

更新：在我的 Ubuntu 12.04 机器（使用 3.2.0-31 内核）上使用相同的 gdb 二进制文件和相同的 freepascal 二进制文件时，我没有收到任何警告。我尝试调试的服务器正在运行 2.6.34.10-24 内核。内核或服务器上的某些配置是否错误会影响 gdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:25:11.117

您的问题从这里开始：

> gdbarch_find_by_info：目标拒绝架构

这意味着 GDB 中依赖于目标的代码不喜欢`i386:x86-64`架构中的某些内容。不幸的是，没有简单的方法来判断它不喜欢*什么——您必须调试 GDB 本身才能找到它。*

你能在 GDB 失败的机器上调试*其他*二进制文件（例如）吗？`/bin/date`

# sendgrid - SendGrid - 高效的房地产电子邮件组合

> ID：12627141
> 
> 赞同：1
> 
> 时间：2012-09-27T17:42:10.460
> 
> 标签：sendgrid

我正在尝试使用[此处找到的最新 SendGrid php 信息执行以下操作。](https://github.com/sendgrid/sendgrid-php#mail-usage) 对于房地产门户网站，假设有几个人 (5) 对佛罗里达州的一个开放日感兴趣，由房地产经纪人代表。一个数组包括他们的电子邮件，如 $prospect_email_array[]，名称如 $prospect_name[]，房地产经纪人如 $r​​ealtor，位置如 $location。有什么合适的方式一次性向他们发送电子邮件，作为盲副本（因此没有潜在客户看到其他潜在客户的电子邮件地址），有效。我正在寻找完成此任务的综合代码。到目前为止，在 php 方面，我有这个伪代码：

```
 To: $prospect_email_array[]
 From: mail@realestatesite.com
Title: $realtor's Open House in $location Welcome
 Body: 
       Dear $prospect_name[],

       I hope to see you in our upcoming open house in $location.

       Looking forward to seeing you there!

       Best Wishes,
       $realtor 
```

此外，拥有纯文本版本和 html 版本是我所追求的。2个'br'标签的等价物会以纯文本形式保留吗？html 版本中是否需要 2 个 'br' 标签用于上述间距？可能会有开放房屋、房屋兴趣和潜在买家的电子邮件。这些是在 SendGrid 中使用的类别吗？另外，默认情况下是否支持 utf-8，还是我们需要向 SendGrid 传递一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:24:03.457

这里有一些“伪代码”应该可以完成你想要做的大部分事情。我根本没有对此进行测试，很可能其中存在拼写错误和违规行为。它应该让你朝着正确的方向前进。

```
<?php

include 'path/to/sendgrid-php/SendGrid_loader.php';

$sendgrid = new SendGrid('username', 'password');

$mail = new SendGrid\Mail();
$mail->setFrom('mail@realestatesite.com')->
       setSubject($realtor . "'s Open House in " . $location)->
       setText('[Fill this in yourself as an exercise]')->
       setHtml('Dear %name%,<br />I hope to see you in our upcoming open house in ' . $location . '. <br /> Looking forward to seeing you there! <br /> Best Wishes, <br />' . $realtor);  

$mail->setRecipientsInHeader(true);

foreach ($prospect_email_array as $prospect) {
  $mail->addTo($prospect);
}

$mail->addSubstitution("%name%", $prospect_name);
$sendgrid->smtp->send($mail); 
```

# sql - 如何在 SQL 中进行 GROUP BY 然后标记为 0,1

> ID：12627146
> 
> 赞同：0
> 
> 时间：2012-09-27T17:42:22.213
> 
> 标签：sql, group-by

我需要`GROUP BY item_id`检查`user_id`其中任何一个是否与变量匹配。如果是这样，我希望它 = 1，如果不是 0。

例如，想象这样的表：

```
item_id, user_id
1         1
1         3
2         4
2         1
2         7
2         3
3         4
3         6
4         8
4         1
5         3

IF (user_id = 3,1,0) AS match, 
```

希望我的查询返回为

```
item_id, match
1        1 
2        1
3        0
4        0
5        1 
```

其中“1”在 item_id 组中所有出现的 user_id 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:46:07.470

您需要正确的聚合函数：

```
select item_id,
       max(case when user_id = 3 then 1 else 0 end) as hasmatch
from t
group by item_id
order by item_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:52:20.763

在**MySQL**中，*true*为 1，*false*为 0，所以你可以这样做：

```
SELECT item_id, MAX(user_id = 3) AS has_match
FROM table
GROUP BY 1 
```

您甚至可以计算匹配的数量：

```
SELECT item_id, SUM(user_id = 3) AS matches
FROM table
GROUP BY 1 
```

`GROUP BY 1`是 的缩写`GROUP BY item_id`，与`item_id`第一个选择表达式一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:48:26.660

我会这样做：

```
SELECT
    A.item_id, ISNULL(B.count, 0)
FROM
    (SELECT DISTINCT item_id 'item_id' FROM myTable) AS A
    LEFT JOIN 
        (
            SELECT item_id, count(*) 'count' 
            FROM myTable WHERE user_id IN (3, 1, 0)
            GROUP BY item_id
        ) AS B
    ON A.item_id = B.item_id 
```

# grails - Grails 渲染插件在部署时会给出 java.lang.ClassNotFoundException

> ID：12627147
> 
> 赞同：11
> 
> 时间：2012-09-27T17:42:25.427
> 
> 标签：grails

我已经成功地遵循了本[教程](http://www.icodeya.com/2012/09/grails-how-do-i-render-gsp-files-in-pdf.html)，并且在 localhost 上运行良好。这是关于使用 grails 渲染插件的。它在 LOCALHOST 上运行良好，但当我部署应用程序时，甚至只是运行 grails run-war，渲染插件不再工作。它给出了一些奇怪的错误。:(

我正在使用带有渲染插件 0.4.3 的 grails 2.0.0，这就是我的 BuildConfig.groovy 包含的内容：

```
plugins {
        runtime ":hibernate:$grailsVersion"
        runtime ":jquery:1.7.1"
        runtime ":resources:1.1.5"
        compile ":rendering:0.4.3"

        build ":tomcat:$grailsVersion"
    } 
```

错误是这样的：

```
2012-09-27 17:08:47,714 [http-8643-1] ERROR errors.GrailsExceptionResolver  - ClassNotFoundException occurred when processing request: [GET] /profile/renderFormPDF/1
org.springframework.mock.web.MockHttpServletRequest. Stacktrace follows:
java.lang.ClassNotFoundException: org.springframework.mock.web.MockHttpServletRequest
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)
    at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)
    at grails.plugin.rendering.document.RenderEnvironment.init(RenderEnvironment.groovy:33)
    at grails.plugin.rendering.document.RenderEnvironment.with(RenderEnvironment.groovy:69)
    at grails.plugin.rendering.document.RenderEnvironment.with(RenderEnvironment.groovy:61)
    at grails.plugin.rendering.document.XhtmlDocumentService.generateXhtml(XhtmlDocumentService.groovy:68)
    at grails.plugin.rendering.document.XhtmlDocumentService.createDocument(XhtmlDocumentService.groovy:38)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:34)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:33)
    at grails.plugin.rendering.RenderingService.render(RenderingService.groovy:63)
    at com.icodeya.ProfileController.renderFormPDF(ProfileController.groovy:108)
    at net.stax.appserver.webapp.RequestMonitorValve.invoke(RequestMonitorValve.java:35)
    at net.stax.appserver.admin.StaxApplicationQueryValve.invoke(StaxApplicationQueryValve.java:49)
    at net.stax.appserver.webapp.RequestSetupValve.invoke(RequestSetupValve.java:31)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-01T21:53:55.823

那是在开发环境中的 spring-test jar 中，但不包含在 WAR 文件中。添加

```
runtime 'org.springframework:spring-test:3.1.0.RELEASE' 
```

到`dependencies`BuildConfig.groovy 部分。

# hash - 是否有一种快速散列算法可以抵抗故意碰撞，如果有，是哪一种？

> ID：12627149
> 
> 赞同：1
> 
> 时间：2012-09-27T17:42:35.443
> 
> 标签：hash, cryptography, distribution, verification

我正在开发一个“开放的分布式云存储系统”。

开放是指任何人都可以参与文件托管。

我当前的设计使用文件内容的 sha1 哈希作为全局文件 ID。

假设客户端已经知道这个哈希值并从“带宽捐助者”接收文件。

客户端现在需要通过生成哈希并将其与预期值进行比较来验证文件确实是正确的。

但是我担心有人可能会故意修改文件以产生相同的哈希值。据我所知，这对于 CRC 系列的散列很容易实现。周围的一些“谷歌搜索”揭示了许多声称对于 MD5 来说同样容易的说法。

现在我的问题是：是否有满足beeing标准的散列算法

*   快速处理大量数据
*   在散列范围内分布良好（又名“唯一”）
*   有足够的目标范围（“位长”）
*   可以抵抗故意的碰撞攻击

我能想到实现满足我需要的设置的所有其他方式都涉及秘密组件，例如秘密 openssl 密钥或散列函数的共享秘密盐。

不幸的是，我无法使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:48:22.880

首先，哈希值永远无法识别文件，因为总会有冲突。

话虽如此，您正在寻找的东西称为[加密哈希](http://en.wikipedia.org/wiki/Cryptographic_hash)。这些被设计为不允许（很容易，即除了蛮力之外）在保留散列的同时修改数据，或使用给定的散列生成新数据。

因此，SHA 家族是可以的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:48:24.540

目前，SHA1 就足够了。没有已知的碰撞。

了解您正在散列的事物的平均大小会很有帮助。但最有可能的是，如果您的平台主要是 64 位，那么 SHA512 是您的最佳选择。您可以截断散列并仅使用其中的 256 位。如果您的平台主要是 32 位，那么 SHA256 是您的最佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T18:11:33.220

你所要求的是一个单向函数，它的存在是一个主要的开放问题。

使用加密哈希函数，您想要避免的特定攻击称为“第二次原像攻击”。

这应该可以帮助您在谷歌上搜索您想要的东西，但据我所知，实际上没有已知的实用的 MD5 二次原像攻击。

首先，您可能发现很容易找到两个具有相同哈希的任意文件，并且每次尝试都可以找到两个不同的此类对。

但是很难生成一个文件来伪装成某个特定文件——换句话说，前面提到的“两个任意文件”中的一个实际上不太可能属于您存储中的非恶意代理。

如果您仍然不满意，您可能想尝试 SHA-1 或 SHA-2 或 GOST。

# c# - 参数接受错误的类型并且仍然运行良好——为什么？

> ID：12627164
> 
> 赞同：4
> 
> 时间：2012-09-27T17:43:48.750
> 
> 标签：c#, methods, parameters

下面我有一个我从网上搜索的方法来计算C#中Excel的percentrank函数。我做了一些修改以适应我的程序，但没有改变主要逻辑。

该程序编译并运行良好，没有任何错误（我知道）。然而，进一步检查我的代码，在我的主要中，我使用

```
 double result = percentRank( array, x); 
```

在哪里

x 是一个 int
数组是一个 List (int)

它的类型与指定要采用的 percentRank 方法不同，但它仍然运行良好。我的问题是为什么？

```
 private static double percentRank(List<int> array, double x)
        {
            //        Calculate the PERCENTRANK(array, x)
            //If X matches one of the values in the array, this function is
            //equivalent to the Excel formula =(RANK(x)-1)/(N-1) where N is the number of data points.
            //If X does not match one of the values, then the PERCENTRANK function interpolates.
            // http://www.pcreview.co.uk/forums/algorithm-computing-excel-percentrank-t946312.html

            array.Sort();

            double result = 0;
            bool foundX = false;

            for (int index = 0; index < array.Count; index++)
            {
                if (array[index] == x)
                {
                    result = ((double)index) / ((double)array.Count - 1);
                    foundX = true;
                    break;
                }
            }
            // calculate value using linear interpolation

            if (foundX == false)
            {
                double x1, x2, y1, y2;

                x1 = x2 = x;

                for (int i = 0; i < array.Count - 1; i++)
                {
                    if (array[i] < x && x < array[i + 1])
                    {
                        x1 = array[i];
                        x2 = array[i + 1];
                        foundX = true;
                        break;
                    }
                }

                if (foundX == true)
                {
                    y1 = percentRank(array, x1);
                    y2 = percentRank(array, x2);

                    result = (((x2 - x) * y1 + (x - x1) * y2)) / (x2 - x1);
                }
                else
                {
                    // use the smallest or largest value in the set which ever is closer to valueX

                    if (array[0] > x)
                    {
                        result = 0;
                    }
                    else
                    {
                        result = 1;
                    }
                }
            }

            return result;
        } 
```

编辑：好的答案是隐式类型转换。我可以禁用它吗？我不喜欢它，因为它可能会产生一些我不知道的错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T17:46:21.837

> 我的问题是为什么？

您可以将整数分配给双精度值。C# 将隐式转换`Int32`为`Double`.

你可以在这里看到这个：

```
double value = 3; 
```

由于相同的隐式转换，这是允许的。如果没有这种转换，您将不得不输入：

```
double value = 3.0; 
```

这在 C# 语言规范的“6.1.2 隐式数字转换”部分中指定

> 隐式数字转换是：

...

> *   从 int 到 long、float、double 或 decimal。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:46:38.283

C# 编译器正在执行隐式强制转换操作。double 可以保存任何整数值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:47:02.643

有从到的`implicit`转换。`int``double`

转换是隐式的，因为 double 可以保存 int 的值而不会丢失准确性。

有`explicit`从 double 到 int 的转换，但没有`implicit`转换。原因是，如果你将一个 double 存储在一个 int 中，那么当它切断小数位时就会失去价值。

MSDN 有一篇关于转换的好文章：http: [//msdn.microsoft.com/en-us/library/ms173105.aspx](http://msdn.microsoft.com/en-us/library/ms173105.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:47:05.800

An`int`可以隐式转换为 a `double`。这就是这里发生的事情。

# javascript - 在 Dojo Deferred 解决之前如何阻止？

> ID：12627165
> 
> 赞同：6
> 
> 时间：2012-09-27T17:43:50.073
> 
> 标签：javascript, dojo, deferred

我知道 Dojo Deferreds 的推荐用例是使用 dojo.when(def) 或 def.then() 并在 Deferred 解决时提供回调。但是，有时我会遇到一些场景，我真的需要等待延迟完成，然后再继续当前线程。这是一个例子（完整的例子在[http://jsfiddle.net/DG3Ax/2/](http://jsfiddle.net/DG3Ax/2/)）

```
function getSomething() {
    var def = getSomeDeferred();

    def.then(function(result) {
        dojo.place("<li>def.then() = " + result + "</li>", "output");
    });

    return def.gimmeTheResultNow();
}

dojo.place("<li>getSomething() = " + getSomething() + "</li>", "output"); 
```

显然`Deferred.gimmeTheResultNow()`不存在，但这就是我正在寻找的功能。我无法控制调用 getSomething() 的代码，所以我无法让它处理 Deferred；它需要真实的结果。

我知道 xhrGet() 有一个同步参数，如果这是一个 AJAX 调用，我认为它可以完成这项工作，但情况并非如此。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:47:03.747

我从 dojo-interest 邮件列表中得到了一个[非常有用的答案](http://dojo-toolkit.33424.n3.nabble.com/How-can-I-block-until-Dojo-Deferred-is-resolved-tc3990036.html#a3990037)，所以我想我会把它贴在这里：

> 不幸的是，您不能在浏览器中执行此操作。
> 
> 浏览器中的 JavaScript 是单线程的。如果您正在等待 Deferred 解决，那么您正在使用该线程。这是同一线程，需要在某个地方为对 Deferred.resolve() 的调用提供服务（它本身会导致对您传递给 .then() 的函数的调用）。
> 
> 您可以同步调用 xhr，因为 XHR get 的基本实现允许您同步调用它。dojo/Deferred 的功能只是 XHR 内部的包装。

# jquery - 试图创建不断变化的类

> ID：12627169
> 
> 赞同：0
> 
> 时间：2012-09-27T17:44:07.233
> 
> 标签：jquery, css, jquery-ui

我刚刚开始探索 Jquery，实际上我正在尝试实现我的第一个设计。

问题是，我希望（在这个简单的例子中）三个 div 框通过单击其中一个 div 来改变它们的类，这似乎只可能一次！

同时我希望它是动态的，所以我使用了“.switchClass”（在“.toggleClass”和“.removeClass().addClass() 之后）和jquery UI 来进行可见的转换。

如果可以向我解释如何多次切换课程，那就太好了。

请原谅我的地下编码...我是新手。

HTML：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="testgetid.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<title>keepitclear</title>
</head>

<body>
<div id="wrapper">
    <div id="green" class="Aindex">A</div>
    <div id="red" class="Bindex">B</div>
    <div id="blue" class="Cindex">C</div>

</div>

<script>
      $('#green').click(function () {
      $(this).toggleClass('Aaaaaa');
      $('#red').toggleClass('Baaaaa');
      $('#blue').toggleClass('Caaaaa');
  });
      $('#red').click(function () {
      $(this).toggleClass('Bbbbbb');
      $('#green').toggleClass('Abbbbb');
      $('#blue').toggleClass('Cbbbbb');
  });

      $('#blue').click(function () {
      $(this).toggleClass('Cccccc');
      $('#green').toggleClass('Accccc');
      $('#red').toggleClass('Bccccc');
  });

 </script>

</body>
</html> 
```

CSS（必需，因为很好）：

```
body{
    background-color: black;
}

#wrapper{
    margin: 0 auto;
    width: 1280px;
    height: 1024px;
    overflow: hidden;
    background-color: white;
}

.Aindex{
    position: absolute;
    margin-top:  100px;
    margin-left: 300px;
    width: 100px;
    height: 100px;
    background-color: #53D35F;
    cursor: pointer;
}

.Aaaaaa{
    position: absolute;
    margin-top:  0px;
    margin-left: 250px;
    width: 200px;
    height: 200px;
    background-color: #99F748;
}

.Abbbbb{
    position: absolute;
    margin-top:  125px;
    margin-left: 350px;
    width: 50px;
    height: 50px;
    background-color: #287F28;
}

.Accccc{
    position: absolute;
    margin-top:  125px;
    margin-left: 275px;
    width: 50px;
    height: 50px;
    background-color: #287F28;
}

.Bindex{
    position: absolute;
    margin-top:  200px;
    margin-left: 250px;
    width: 100px;
    height: 100px;
    background-color: #F48725;
}   

.Baaaaa{
    position: absolute;
    margin-top:  175px;
    margin-left: 225px;
    width: 50px;
    height: 50px;
    background-color: #9E2B15;
}

.Bbbbbb{
    position: absolute;
    margin-top:  150px;
    margin-left: 200px;
    width: 200px;
    height: 200px;
    background-color: #F4dC76;
}
.Bccccc{
    position: absolute;
    margin-top:  150px;
    margin-left: 250px;
    width: 50px;
    height: 50px;
    background-color: #9E2B15;
}

.Cindex{
    position: absolute;
    margin-top:  200px;
    margin-left: 350px;
    width: 100px;
    height: 100px;
    background-color: #1FA2FF;
}   

.Caaaaa{
    position: absolute;
    margin-top:  175px;
    margin-left: 425px;
    width: 50px;
    height: 50px;
    background-color: #4F35D3;
}

.Cbbbbb{
    position: absolute;
    margin-top:  175px;
    margin-left: 375px;
    width: 50px;
    height: 50px;
    background-color: #4F35D3;
}

.Cccccc{
    position: absolute;
    margin-top:  150px;
    margin-left: 275px;
    width: 200px;
    height: 200px;
    background-color: #1FFFFA;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:34:53.373

不是最漂亮的答案，但如果你想使用 switchClass 代替 - 你可以检查它当前有什么类并根据它进行切换

```
var $red = $('#red');
var $blue = $('#blue');
var $green = $('#green');
$('#green').click(function() {
    var $this = $(this);        
    if ($this.hasClass('Aaaaaa')) {
        $this.switchClass('Aaaaaa', '', 1000);
        $red.switchClass('Baaaaa', '', 1000);
        $blue.switchClass('Caaaaa', '', 1000);
    } else {
        $this.switchClass('', 'Aaaaaa', 1000);
        $red.switchClass('', 'Baaaaa', 1000);
        $blue.switchClass('', 'Caaaaa', 1000);
    }
});
$red.click(function() {
    var $this = $(this);
    if ($this.hasClass('Bbbbbb')) {
       $this.switchClass('Bbbbbb', '', 1000);
       $green.switchClass('Abbbbb', '', 1000);
       $blue.switchClass('Cbbbbb', '', 1000);
    }else{
       $this.switchClass('', 'Bbbbbb', 1000);
       $green.switchClass('','Abbbbb',1000);
       $blue.switchClass('','Cbbbbb',1000);
    }    
});

$('#blue').click(function() {
    var $this = $(this);
    if ($this.hasClass('Cccccc')) {
        $this.switchClass('Cccccc', '', 1000);
        $green.switchClass('Accccc', '', 1000);
        $red.switchClass('Bccccc', '', 1000);
    }else{
        $this.switchClass('', 'Cccccc', 1000);
        $green.switchClass('','Accccc',1000);
        $red.switchClass('','Bccccc',1000);
    }   
}); 
```

[http://jsfiddle.net/fT3we/](http://jsfiddle.net/fT3we/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:19:28.623

我不完全清楚您要实现的目标，但我想您需要做的就是使用变量跟踪框的状态，例如，如果您想为每个按钮设置 2 种不同的切换类型：

```
var green_state=1, red_state=1, blue_state=1;

    $('#green').click(function () {
        //maybe you want to reset blue and red state here
        switch(green_state){
            case 1:
                green_state=2;
                //toggle code for first state
                break;
            case 2:
                green_state=1;
                //toggle code for second state
                break;
        }
    } 
```

显然，您会为每个按钮重复此操作……这是一种方法，但如果您能更好地解释您想要做的事情，您可能会得到更好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:24:14.453

## **改良版：**

**现场演示：http:** [//jsfiddle.net/oscarj24/pmbjk/2/](http://jsfiddle.net/oscarj24/pmbjk/2/)

看在`toogleClass`外面使用了，你没有使用**3**次`click();`事件*（这是一种改进）*。

 ***这就是我能做的*（我认为）*，因为每个元素都需要用另一个特定的元素替换，`class`我不能对所有元素进行分组或做一些其他的事情，比如*“全局”*或*“常量”* `toogleClass`，因为它们之间不共享任何元素`class`。

* * *

***HTML：***

```
<div id="wrapper">
    <div data-color="green" class="Aindex">A</div>
    <div data-color="red" class="Bindex">B</div>
    <div data-color="blue" class="Cindex">C</div>
</div> 
```

***jQuery：***

```
$(document).ready(function() {

    /* get all squares inside 'wrapper' div */
    var squares = $('#wrapper').find('div');

    squares.click(function(e) {
        /* detect which element was clicked */
        var square = $(e.target);
        /* get the color of the square element */
        var color = square.data('color');
        /* pass parameters to the method that will toogle class */
        toogleClassElems(color, square);
    });

});

function toogleClassElems(color, square) {
    if (color === 'green') {
        square.toggleClass('Aaaaaa'); //actual square
        square.next().toggleClass('Baaaaa'); //red square
        square.next().next().toggleClass('Caaaaa'); //blue square
    } else if (color === 'red') {
        square.toggleClass('Bbbbbb'); //actual square
        square.prev().toggleClass('Abbbbb'); //green square
        square.next().toggleClass('Cbbbbb'); //blue square 
    } else if (color === 'blue') {
        square.toggleClass('Cccccc'); //actual square
        square.prev().prev().toggleClass('Accccc'); //green square
        square.prev().toggleClass('Bccccc'); //red square
    }
}​ 
```***

# google-app-engine - 如何在 GAE 应用程序中获取静态 URL

> ID：12627176
> 
> 赞同：0
> 
> 时间：2012-09-27T17:44:30.387
> 
> 标签：google-app-engine, webapp2

我的`app.yaml`：

```
handlers:
  - url: /static
    static_dir: static

  - url: /.*
    script: main.app 
```

有没有办法在我的 webapp2 代码中获取`/static`路由的绝对 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:55:05.973

在应用程序中定义路由时，您可以计算 uri。请参阅：[http](http://webapp-improved.appspot.com/guide/routing.html#building-uris) ://webapp-improved.appspot.com/guide/routing.html#building-uris 有了这些信息和您对 app.yaml 的了解，您可以计算静态 url 的 uri。

在您的 main.app 中，您为静态添加了一个虚拟路由定义。它只会用于构建 uri，永远不会用于路由。

来自 webapp2 文档的修改示例：

```
app = webapp2.WSGIApplication([
    webapp2.Route('/', handler='HomeHandler', name='home'),
    webapp2.Route('/static', handler=HomeHandler, name='static'), # never used for routing
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:37:18.587

不，没有办法查询、循环或找出作为静态上传的文件夹中的内容。

但只要您不使用新的静态文件部署应用程序，静态文件就不会更改。

您需要保留静态文件并自己编写这些绝对网址

# java - java IF NOT 语句

> ID：12627178
> 
> 赞同：2
> 
> 时间：2012-09-27T17:44:36.800
> 
> 标签：java

```
import java.util.Random;
import java.util.Scanner;

public class Game {
    public static void main(String[] args) {

        System.out.println("Guess a number betwwen 1 and 1000");

        Random rand = new Random(); 
        int secretNumber = rand.nextInt (1000);

        Scanner keyboard = new Scanner(System.in);
        int guess;

        do {
        guess = keyboard.nextInt();

        if (guess == secretNumber)
            System.out.println("You WON!!! Congratulations!");
        else if (guess < secretNumber)
             System.out.println("Nope, to low");
        else if (guess > secretNumber)
            System.out.println("Sorry, to high");

        } while (guess != secretNumber);

    }
} 
```

我如何在此代码中添加一条语句，即 IF NOT NUMERIC INPUT System.out.println("invalid input, please use type numbers only!")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:47:43.417

您应该在调用之前使用`Scanner`'`hasNextInt()`方法来确定输入是否为数字`nextInt`：

```
do {
    while (!keyboard.hasNextInt()) {
        System.out.println("Please enter only numbers.");
        keyboard.next(); // Skip the wrong token
    }
    // Now that the input is valid, read the value:
    guess = keyboard.nextInt();
    // Put the rest of your logic here
    ...
} while (guess != secretNumber); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T17:47:55.613

`InputMismatchException`如果下一个标记与整数正则表达式不匹配或超出范围，则Scanner.nextInt() 抛出

因此，您应该牢记这一点，将代码包装在 try-catch 周围

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:49:11.643

我认为您希望以下内容围绕guess = keyboard.nextInt()：

```
 try  
 {  
     guess = keyboard.nextInt()
     Integer.parseInt(guess);  

     <your if statements>

  } catch(Exception ex)  
  {  
    System.out.println("Your comment");
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T17:50:29.197

您可以在循环中添加一个 try catch 块。

```
 do {
  try{
    guess = keyboard.nextInt();

    if (guess == secretNumber)
        System.out.println("You WON!!! Congratulations!");
    else if (guess < secretNumber)
         System.out.println("Nope, to low");
    else if (guess > secretNumber)
        System.out.println("Sorry, to high");
    }
catch(InputMismatchException e){
System.out.prinln("Not a number");
}

    } while (guess != secretNumber); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T17:51:05.020

使用扫描仪时，您永远无法确定它是否是已输入的整数。它只会等到输入“nextInt”。你可以做的是使用

[Integer.parseInt() 方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)。如果输入字符串不是整数，它将抛出 NumberFormatException。

猜测一个字符串并使用。猜测 = 键盘.next();

然后在 try-catch 中使用 Integer.parseInt(guess) 来解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T17:54:53.207

```
public class Game {
    public static void main(String[] args) {

    System.out.println("Guess a number betwwen 1 and 1000");

    Random rand = new Random(); 
    int secretNumber = rand.nextInt (1000);

    Scanner keyboard = new Scanner(System.in);
    int guess;

    do {
    if (!keyboard.hasNextInt()) {
        System.out.println("invalid input, please use type numbers only!");
        return;
    }
    guess = keyboard.nextInt();

    if (guess == secretNumber)
        System.out.println("You WON!!! Congratulations!");
    else if (guess < secretNumber)
         System.out.println("Nope, to low");
    else if (guess > secretNumber)
        System.out.println("Sorry, to high");

    } while (guess != secretNumber);

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T17:55:39.553

```
import java.util.Random;
import java.util.Scanner;

public class Game {
    public static boolean isInteger( String input )  
    {  
       try  
       {  
          Integer.parseInt( input );  
          return true;  
       }  
       catch( Exception e)  
       {  
          return false;  
       }  
    } 

    public static void main(String[] args) {

        System.out.println("Guess a number betwwen 1 and 1000");

        Random rand = new Random(); 
        int secretNumber = rand.nextInt (1000);

        Scanner keyboard = new Scanner(System.in);
        int guess=-1;

        do {
        String g = keyboard.next();
        if(isInteger(g)){
            guess = Integer.parseInt(g);
            if (guess == secretNumber)
                System.out.println("You WON!!! Congratulations!");
            else if (guess < secretNumber)
                System.out.println("Nope, to low");
            else if (guess > secretNumber)
                System.out.println("Sorry, to high");
        }
        else{
            System.out.println("NaN");
        }

        } while (guess != secretNumber);

    }
} 
```

# scala - 如何定义 Scala 包对象？

> ID：12627179
> 
> 赞同：1
> 
> 时间：2012-09-27T17:44:47.920
> 
> 标签：scala

[http://www.scala-lang.org/docu/files/packageobjects/packageobjects.html](http://www.scala-lang.org/docu/files/packageobjects/packageobjects.html)提供了以下示例：

```
// in file gardening/fruits/package.scala
package gardening
package object fruits {
  val planted = List(apple, plum, banana)               
  def showFruit(fruit: Fruit) {
    println(fruit.name +"s are "+ fruit.color)
  }
} 
```

但[http://www.scala-lang.org/docu/files/packageobjects/packageobjects_1.html](http://www.scala-lang.org/docu/files/packageobjects/packageobjects_1.html)有：

```
package gardening.fruits
object `package` { ... } 
```

由于后一个示例将文件名与对象名匹配，并且在包中包含为其定义包对象的文件，因此它看起来更可取。有区别（风格除外）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:32:21.410

规范 9.3 说：

> 标准命名约定是将上面的定义放在一个名为 package.scala 的文件中，该文件位于与包 p 对应的目录中。

这意味着反引号形式不是标准约定。

我同意没有足够的用户空间指导，尤其是在编译时交互方面。

不同之处在于您不能命名默认包。

```
object `package` {
  def f() = println("Hi")
}

object Foo extends App {
  f()
} 
```

编辑：我更喜欢避免反引号（因为点击 tab 或 esc 的风险很高），但我只是有一个用例，我真的希望我的代码在一个源文件中，但我也更喜欢避免包嵌套或相关打包，因此反引号：

```
package com.github.maqicode.deprecator

object `package` {
  // crashes scalac, actually
  implicit class MaybeInt(val s: String) extends AnyVal {
    def toInt_? : Option[Int] = if (s.isEmpty) None else convert
    private def convert = try { Some(Integer.parseInt(s)) 
    } catch { case _: NumberFormatException => None }
  }
}

// lots of code, so avoid package deprecator { ... }

case class Version(major: Int, minor: Option[Int], point: Option[Int], descriptor: String)

object Version {
  val version = """(\d+)(?:\.(\d+))?(?:\.(\d+))?(.*)""".r
  def apply(descriptor: String): Version = {
    val version(major, minor, point, rest) = descriptor
    Version(major.toInt, minor.toInt_?, point.toInt_?, descriptor)
  }
} 
```

至于隐含的问题，谁曾在 Scala 中使用过默认包：我在测试代码中看到了它。

你说“除了风格之外”吗？嘿，这都是关于风格的。

就个人而言，我发现反引号很时髦但晦涩难懂。如果我必须每天多挠十次头，到年底，我会掉头发。

OTOH，如果我挠了挠下巴，然后“嗯”了一声，我就不用刮胡子了，那就没问题了。

这不是那些 coursera 问题之一，是吗？

# properties - XCode 4.5 自动生成 @synthesize

> ID：12627181
> 
> 赞同：3
> 
> 时间：2012-09-27T17:44:59.297
> 
> 标签：properties, build-automation, xcode4.5, synthesis, viewdidunload

我知道在 xcode 4.5 中它会自动生成 @synthesize 并且还为变量赋值实现下划线前缀最佳实践（如另一个线程中所述）。我有两个相关的问题，您的帮助将不胜感激：

1.  是否有文档描述了有关 xcode 4.5 的这些详细信息？我没有立即看到它在哪里。你怎么发现这个？

2.  此外，似乎当一个 IBOutlet 被拖放时，通常的“viewDidUnload”实现不再在 xcode 4.4 中生成。我应该自己实施还是发生某些事情使其不再需要？

谢谢！莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:50:32.750

在 iOS 6 中，UIViewController 的 viewWillUnload 和 viewDidUnload 方法现已弃用。

你可以去苹果网站看看 Xcode 4.5 的特性

[https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_5.html](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_5.html)

# actionscript-3 - 获取输入TextField AS3中的插入符号位置（x，y）？

> ID：12627185
> 
> 赞同：1
> 
> 时间：2012-09-27T17:45:17.283
> 
> 标签：actionscript-3, textfield, caret

我需要在我的输入文本字段中获取插入符号的位置。我不需要设置位置，我需要获取插入符号的当前位置。无法弄清楚这一点，这让我发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:30:15.720

检查文档中的[Texfield.caretIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#caretIndex)属性和[TextField.getCharBoundaries()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#getCharBoundaries%28%29)方法。这实际上很容易，但是当字段为空或下一个字符为空/换行符时会变得很棘手。

```
import flash.text.TextField;
import flash.text.TextFormat;
import flash.text.TextFieldType;
import flash.events.KeyboardEvent;
import flash.geom.Rectangle;

var t:TextField = new TextField();
t.x = t.y = 20;
t.width = 200;
t.height = 100;
t.multiline = t.wordWrap = t.border = true;
t.defaultTextFormat = new TextFormat('_sans',20);
t.type = TextFieldType.INPUT;
addChild(t);
stage.focus = t;
t.addEventListener(KeyboardEvent.KEY_DOWN,kd);

function kd(e:KeyboardEvent):void {
    if (!e.ctrlKey) return;
    var car:int = t.caretIndex;
    var rect:Rectangle = t.getCharBoundaries(car);
    if (rect == null) {
        trace('caret:'+car,'need to calculate this possibility')
    } else {
        trace('caret:'+car,rect,'(relative to textfield)');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:07:58.843

如果您使用的是等宽字体，您可以获得一些信息，例如答案框中使用的字体。要获得插入符号位置，`caretIndex`需要读取它的属性。您可以使用`text`属性对文本字段中的换行符进行编号，因此您可以从中获取（行，列）系统中的两个坐标。然后，使用`scrollH`和`scrollV`确定文本字段的内容滚动了多远，并从坐标中减去它们，然后将它们乘以一个符号的宽度和高度。但是，如果您的文本字段使用可变符号宽度的 TrueType 字体，所有这些都将不起作用。你能得到的最好的是当前高度，如果一行文本在整个文本字段中是恒定的，则高度。

编辑：文本字段的 wordWrap 属性为真，正确的高度取决于该文本字段的宽度。您可以尝试以下方法：

```
 var storeText:String = tf.text.slice();
        var lineHeight:Number;
        if (tf.numLines == 0) lineHeight = 1; 
                        else lineHeight = tf.textHeight / tf.numLines;
        tf.text=storeText.slice(0, tf.caretIndex);
        var m:int = tf.numLines-tf.scrollV;
        trace(m*lineHeight);
        tf.text = storeText; 
```

该方法相当愚蠢，并且涉及两次更改文本字段的文本属性，这很慢。这将返回当前行距文本字段顶部的偏移量。我希望这是你需要知道的。如果您想知道未滚动文本顶部的相对位置，请忽略 tf.scrollV。

# linux - 在尝试使用 ssh 设置时间时寻找匹配的“”时出现意外的 EOF

> ID：12627193
> 
> 赞同：1
> 
> 时间：2012-09-27T17:45:57.017
> 
> 标签：linux, perl, ssh

我有一个 perl 脚本，它通过 SSH 在某些 PC 上远程运行命令。所以我想将所有电脑上的时间设置为相同。PC 是基于 linux 的系统，perl 脚本使用另一个 .txt 文件，该文件具有要执行的命令。但是当我运行 perl 脚本时，出现以下错误：

```
Command = date --set "27 SEP 2012 19

sh: -c: line 0: unexpected EOF while looking for matching `"'
sh: -c: line 1: syntax error: unexpected end of file 
```

perl 脚本工作正常，因为我尝试了另一个命令并给出了结果。那么什么可能导致这个错误。

perl代码是：

```
#!/usr/bin/perl

open (MYFILE,'HostIPWithCmd.txt');
$i=0;
 @IPs=<MYFILE>;
 foreach (@IPs) {
chomp;
($EthIP,$Cmd)= split(":");
 if($EthIP!=~ ("#"))
 {
    push(@hostIP,$EthIP);
    push(@destCmd,$Cmd);

 }

 else
 {
   push(@hostIP,"$EthIP");
   push(@destCmd,$Cmd);
 }
}

$i=0;

foreach my $host (@hostIP)
{
   if($host !=~ ("#"))
   {

      my @cmds= split(/,/,$destCmd[$i]);
      print "\n\nCommands For $host = $destCmd[$i]\n";

   foreach my $command (@cmds)
             {
 print "\n*************************************";
 print "\nCommand = $command \n\n";
 system("ssh -o ConnectTimeout=10 $host $command");

         }

  print "\n***** End Of Host : $host  *****\n";
  print "************************************************************\n\n";
      }

 $i++;
} 
```

和 HostIPWithCmd.txt

```
 10.20.146.97:date --set "27 SEP 2012 19:00:00" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:50:38.857

这很简单。这是因为您的字符串中的其他位置有冒号，这会导致字符串的结尾消失。该声明：

```
($EthIP,$Cmd)= split(":"); 
```

输入：

```
10.20.146.97:date --set "27 SEP 2012 19:00:00" 
```

将产生：

```
$EthIP = '10.20.146.97';
$Cmd   = 'date --set "27 SEP 2012 19'; 
```

拆分列表的其余部分（被丢弃）将是：

```
@rest = ("00", "00"); 
```

因为你在冒号上分裂`:`。一个简单的解决方法是有一个限制：

```
($EthIP,$Cmd)= split(/:/, $_, 2);  # max 2 fields 
```

## ---

但是，即使使用此修复程序，您的代码也可以正常工作是值得怀疑的。您的代码中有很多严重的错误。从上到下：

*   你不使用`use strict; use warnings;`这是一个**重大**错误，因为它会让你在代码中出现无声警告和拼写错误（参见下面的示例）。永远不要在没有这两个 pragma 的情况下编写 perl 代码。
*   您使用`open`语句而不检查返回值，例如`open MYFILE, 'HostwithIP.txt' or die $!`. 不检查返回值会让打开静默失败，造成各种麻烦。不使用`warnings`不会警告您正在从关闭的文件句柄中读取，并且您将整天坐在那儿挠头，然后才弄明白。
*   您将两个参数 open 与全局文件句柄一起使用。您应该使用显式打开模式和词法文件句柄。例如`open my $fh, "<", 'HostIPWithCmd.txt" or die $!`。
*   您正在使用`foreach (@IP)`而不是简单地迭代文件句柄，例如`while (<MYFILE>)`
*   `split`使用正则表达式，而不是字符串。它将字符串转换为正则表达式，但最好从一开始就这样做。`split /#/`.
*   没有`!=~`操作员。它将被解释为`$foo != ~ $bar`，或者换句话说， 和 之间的数值不等式`$foo`检查`$bar`。您想要的运算符是`!~`. 这个特殊的东西会把你的代码分解成很多小块，特别是当你不使用`warnings`时，错误是无声的。所以不，正如你在评论中所说，你的脚本**不能**完美运行，它被严重破坏了。您只是看不到它，因为您不使用`warnings`.
*   您的 if-else 语句是完全多余的，因为在 if 和 else 子句中都会发生同样的事情。`$EthIP`和之间没有区别`"$EthIP"`。两者完全相同。这可能是您认为您的代码有效的原因。

此外，在使用时`system`，反引号或`qx()`考虑其他解决问题的方法总是一个好主意。有些模块可以比`system`.

# ruby-on-rails - 仅为特定控制器调用 before_filter

> ID：12627194
> 
> 赞同：8
> 
> 时间：2012-09-27T17:45:59.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

我有一些用于特定目的的控制器，每个控制器都有一个“def index”功能。like /index 使用主页并调用未经身份验证的主页。/jobs/index 是另一个，/users/index 是另一个。他们每个人都使用不同的控制器，如 JobsController、HomeController、UsersController。

我的 ApplicationController 有一个 before_Filter

```
before_filter :authenticate_user!, :except => [:index] 
```

问题在于，当我调用 /jobs/index 或 /users/index （或任何其他 /*/index 页面）时，它也会跳过。有没有办法让我可以将“/except”子句仅应用于“home#index”请求（即 HomeController -> 索引页面）。我试过，

```
before_filter :authenticate_user!, :except => ["home#index"] but it doesn't work. 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T17:52:09.260

您可以使用

```
skip_before_filter :authenticate_user! , :only => [:index] 
```

在您`home_controller`跳过该操作的 before_filter 中...

# javascript - requirejs blueimp fileuploader 仅加载 min.js 文件，仅加载其他文件

> ID：12627203
> 
> 赞同：1
> 
> 时间：2012-09-27T17:46:18.203
> 
> 标签：javascript, backbone.js, requirejs, amd, blueimp

所以我是 requirejs 和骨干的菜鸟，但我试图在我的本地机器上加载 blueimp 文件上传器的所有依赖项，而不是加载任何外部脚本。这是我的 config.js 文件：

```
// Set the require.js configuration for your application.
require.config({

  // Initialize the application with the main application file.
  deps: ["main"],

  paths: {
    // JavaScript folders.
    libs: "../assets/js/libs",
    plugins: "../assets/js/plugins",
    vendor: "../assets/vendor",
    api : "../assets/js/libs/api",

    // Libraries.
    jquery: "../assets/js/libs/jquery",
    jqueryui: "../assets/js/libs/jquery-ui",
    lodash: "../assets/js/libs/lodash",
    backbone: "../assets/js/libs/backbone",
    handlebars: "../assets/js/libs/handlebars",
    bootstrap : "../assets/js/libs/bootstrap",
    jqueryuiwidget : '../assets/js/libs/jquery.ui.widget',
    jstemplates : '../assets/js/libs/tmpl.min',
    jsloadimage : '../assets/js/libs/load-image.min',
    jscanvastoblob : '../assets/js/libs/canvas-to-blob.min',
    iframetransport : '../assets/js/libs/jquery.iframe-transport',
    fileupload : '../assets/js/libs/jquery.fileupload',
    fileuploadfp : '../assets/js/libs/jquery.fileupload-fp',
    fileuploadui : '../assets/js/libs/jquery.fileupload-ui'
  },

  shim: {
    // Backbone library depends on lodash and jQuery.
    backbone: {
      deps: ["lodash", "jquery", "jqueryui", "api", 'jqueryuiwidget', 'jstemplates', 'jsloadimage', 'jscanvastoblob', 'iframetransport', 'fileupload', 'fileuploadfp', 'fileuploadui'],
      exports: "Backbone"
    },

    handlebars : {
        attach: "Handlebars"
    },

    api : {
        attach : "api"
    },

    bootstrap: {
      deps: ["jquery"]
    },

    // Backbone.LayoutManager depends on Backbone.
    "plugins/backbone.layoutmanager": ["backbone"]
  }

}); 
```

我知道我不应该将所有其他文件作为主干的依赖项，但我只是想加载这些东西。

发生的情况是，它加载时没有任何错误，但是当我查看页面时，它只加载了 canvas-to-blob.min.js、load-image.min.js 和 tmpl.min.js。

任何想法为什么会这样？这很奇怪，因为例如，如果我将其他文件之一上的路径更改为错误，则该事物将抛出错误并失败，就好像它试图加载它一样。但是当它的路径正确时，它就不会加载......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:44:33.093

```
shim: {

backbone: {
  deps: ["lodash", "jquery"],
  exports: "Backbone"
},

bootstrap: { deps: ["jquery"] },
widget: { deps: ["jquery"] },

// backbone plugins
"plugins/backbone.layoutmanager": ["backbone"], 
"lib/jquery.fileupload": ["jquery", "widget"],
"lib/jquery.fileupload-fp": ["jquery", "lib/load-image", "lib/canvas-to-blob",        
"lib/jquery.fileupload"],
"lib/jquery.fileupload-ui": ["jquery", "lib/tmpl", "lib/load-image",  
"lib/jquery.fileupload-fp"]
} 
```

你必须用配置中的路径变量替换所有js文件的define []部分的路径我做了同样的事情，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T12:11:19.203

尝试使用 load-image 代替 load-image.min 来自此源的文件[https://github.com/blueimp/JavaScript-Load-Image](https://github.com/blueimp/JavaScript-Load-Image)，它对我很有效:)

# vba - 从列号变量[VBA]获取列范围

> ID：12627204
> 
> 赞同：0
> 
> 时间：2012-09-27T17:46:17.970
> 
> 标签：vba

我有一个名为“columnIndex”的变量，我想从这个变量中复制**五**列。

我可以使用类似下面的代码来复制两列。

```
columnIndex = 10
Range(Columns(columnIndex),Columns(columnIndex+1)).Copy 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:15:35.270

```
Columns(columnIndex).Resize(,5).Copy 
```

# ocaml - OCaml 顶层不解释注释

> ID：12627211
> 
> 赞同：2
> 
> 时间：2012-09-27T17:46:47.797
> 
> 标签：ocaml, ocaml-batteries

```
$ ocaml
        Objective Caml version 3.12.1
  _________________________
[| +   | |   Batteries   - |
 |_____|_|_________________|
  _________________________
 | -  Type '#help;;' | | + |]
 |___________________|_|___|

Loading syntax extensions...
    Camlp4 Parsing version 3.12.1

# (* i am just a comment. nobody cares about me. oh wait! *);;
# Error: Parse error: illegal begin of top_phrase
# 
```

我收到此错误

```
Error: Parse error: illegal begin of top_phrase 
```

当我尝试在解释器中输入评论时。ocaml解释器中不允许评论还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:52:28.407

我会说你什么也没输入，这是一个语法错误。

```
# (* Hello *) ;;
Error: Syntax error 
```

尝试在评论后输入一些内容：

```
# (* Hello *) 3 ;;
- : int = 3 
```

# query-string - 检查丢失（不存在/被篡改）的查询字符串并重定向到 400 BAD REQUEST 页面（WebMatrix / Razor 语法）

> ID：12627212
> 
> 赞同：1
> 
> 时间：2012-09-27T17:46:57.860
> 
> 标签：query-string, webmatrix, bad-request, tampering

我可以测试查询字符串参数：

```
Request.QueryString["value"].IsEmpty()
Request.QueryString["value"].Isint()
Etc. 
```

但是我怎样才能**避免**根本**没有查询字符串**呢？换句话说，我希望`prevent`用户访问`the root`每个文件夹或子文件夹。

```
 http://localhost:16838/auth/provider.cshtml

instead of:

    http://localhost:16838/auth/provider.cshtml?providerId=7 
```

如果我删除查询字符串（直到页面扩展名），我会收到`cannot perform runtime binding on a null reference`错误，因为代码的下一部分仍在执行。

相反，我希望用户`redirect`成为`400 BAD REQUEST`：

```
The request could not be understood by the server due to malformed syntax.
The client SHOULD NOT repeat the request without modifications 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:05:07.507

如果您想确保根本没有查询字符串值，您可以检查`Request.ServerVariables["QUERY_STRING"]`

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx)

但是，您很可能想要检查单个值，您应该能够做到这一点：

```
if(Request.QueryString["key"] == null || Request.QueryString["key"].IsEmpty()) 
{
  // redirect
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:21:10.153

用户不能通过省略查询字符串值来“访问文件夹的根目录”。如果他们请求`http://localhost:16838/auth/provider.cshtml`而不是`http://localhost:16838/auth/provider.cshtml?providerId=7`任何依赖于`Request["providerId"]`具有值的代码都可能会崩溃，那么将会发生的所有事情。

如果要测试查询字符串值是否存在，只需要使用 IsEmpty()：

```
if(Request["providerId"].IsEmpty()){
    //the value is missing. Redirect ot a safe page or provide a default value
} else {
    //run your code
} 
```

# xml - 使用 XSLT 翻译 XML 的问题

> ID：12627213
> 
> 赞同：0
> 
> 时间：2012-09-27T17:46:58.607
> 
> 标签：xml, xslt

我有以下 XML

```
<?xml version="1.0" encoding="UTF-8" ?>
<GovTalkMessage xsi:schemaLocation="http://www.govtalk.gov.uk/CM/envelope     http://xmlgw.companieshouse.gov.uk/v1-0/schema/Egov_ch-v2-0.xsd" xmlns="http://www.govtalk.gov.uk/CM/envelope" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns:gt="http://www.govtalk.gov.uk/schemas/govtalk/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
  <EnvelopeVersion>1.0</EnvelopeVersion>
  <Header>
      <MessageDetails>
          <Class>NumberSearch</Class>
          <Qualifier>response</Qualifier>
          <TransactionID>4c5cf4a9e1a44cbbbe800ad9ea9f06fd</TransactionID>
          <GatewayTimestamp>2012-09-27T18:34:19-00:00</GatewayTimestamp>
      </MessageDetails>
      <SenderDetails>
         <IDAuthentication>
             <SenderID>XMLGatewayTestUserID</SenderID>
                 <Authentication>
                     <Method>CHMD5</Method>
                     <Value></Value>
                 </Authentication>
         </IDAuthentication>
      </SenderDetails>
  </Header>
  <GovTalkDetails>
     <Keys/>
  </GovTalkDetails>
  <Body>
    <NumberSearch xmlns="http://xmlgw.companieshouse.gov.uk/v1-0/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlgw.companieshouse.gov.uk/v1-0/schema http://xmlgw.companieshouse.gov.uk/v1-0/schema/NumberSearch.xsd">
   <SearchRows>1</SearchRows>
   <CoSearchItem>
       <CompanyName>MILLENNIUM STADIUM PLC</CompanyName>
       <CompanyNumber>03176906</CompanyNumber>
       <DataSet>LIVE</DataSet>
       <CompanyIndexStatus></CompanyIndexStatus>
       <CompanyDate></CompanyDate>
   </CoSearchItem>
</NumberSearch>
</Body>
</GovTalkMessage> 
```

我想使用 XSLT 将其翻译成以下内容；

```
<?xml version="1.0"?>
<CompanySearchResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <RegistrationNumber>03176906</RegistrationNumber>
    <RegisteredName>MILLENNIUM STADIUM PLC</RegisteredName>
</CompanySearchResult> 
```

目前我有以下 XSLT 文件

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:ev="http://www.govtalk.gov.uk/CM/envelope"
            xmlns:gt="http://www.govtalk.gov.uk/schemas/govtalk/core"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:sr="http://xmlgw.companieshouse.gov.uk/v1-0/schema/NumberSearch.xsd">
<xsl:template match="/">
    <CompanySearchResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <RegistrationNumber>
            <xsl:value-of select="ev:GovTalkMessage/ev:Body/ev:NumberSearch/ev:CoSearchItem/ev:CompanyNumber"/>
        </RegistrationNumber>
        <RegisteredName>
            <xsl:value-of select="ev:GovTalkMessage/ev:Body/ev:NumberSearch/ev:CoSearchItem/ev:CompanyName"/>
        </RegisteredName>
    </CompanySearchResult>
    </xsl:template>
  </xsl:stylesheet> 
```

但是我只是在 RegistrationNumber 和 RegistrationName 中得到一个空白 -

我需要改变什么才能正确获得这些。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:45:19.747

Since you haven't provided the rules by which this transformation should occur (e.g., are there ever more than one search row?), here's a short, rather unintelligently-produced XSLT that accomplishes what you ask.

**When this XSLT:**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:x="http://www.govtalk.gov.uk/CM/envelope"
  xmlns:t="http://xmlgw.companieshouse.gov.uk/v1-0/schema"
  exclude-result-prefixes="x t"
  version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/*">
    <CompanySearchResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <RegistrationNumber>
        <xsl:value-of select="x:Body/*/*/t:CompanyNumber" />    
      </RegistrationNumber>
      <RegisteredName>
        <xsl:value-of select="x:Body/*/*/t:CompanyName" />      
      </RegisteredName>
    </CompanySearchResult>
  </xsl:template>

</xsl:stylesheet> 
```

**...is applied to the originally provided XML:**

```
<?xml version="1.0" encoding="UTF-8"?>
<GovTalkMessage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gt="http://www.govtalk.gov.uk/schemas/govtalk/core" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns="http://www.govtalk.gov.uk/CM/envelope" xsi:schemaLocation="http://www.govtalk.gov.uk/CM/envelope     http://xmlgw.companieshouse.gov.uk/v1-0/schema/Egov_ch-v2-0.xsd">
  <EnvelopeVersion>1.0</EnvelopeVersion>
  <Header>
    <MessageDetails>
      <Class>NumberSearch</Class>
      <Qualifier>response</Qualifier>
      <TransactionID>4c5cf4a9e1a44cbbbe800ad9ea9f06fd</TransactionID>
      <GatewayTimestamp>2012-09-27T18:34:19-00:00</GatewayTimestamp>
    </MessageDetails>
    <SenderDetails>
      <IDAuthentication>
        <SenderID>XMLGatewayTestUserID</SenderID>
        <Authentication>
          <Method>CHMD5</Method>
          <Value/>
        </Authentication>
      </IDAuthentication>
    </SenderDetails>
  </Header>
  <GovTalkDetails>
    <Keys/>
  </GovTalkDetails>
  <Body>
    <NumberSearch xmlns="http://xmlgw.companieshouse.gov.uk/v1-0/schema" xsi:schemaLocation="http://xmlgw.companieshouse.gov.uk/v1-0/schema http://xmlgw.companieshouse.gov.uk/v1-0/schema/NumberSearch.xsd">
      <SearchRows>1</SearchRows>
      <CoSearchItem>
        <CompanyName>MILLENNIUM STADIUM PLC</CompanyName>
        <CompanyNumber>03176906</CompanyNumber>
        <DataSet>LIVE</DataSet>
        <CompanyIndexStatus/>
        <CompanyDate/>
      </CoSearchItem>
    </NumberSearch>
  </Body>
</GovTalkMessage> 
```

**...the wanted result is produced:**

```
<?xml version="1.0"?>
<CompanySearchResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <RegistrationNumber>03176906</RegistrationNumber>
    <RegisteredName>MILLENNIUM STADIUM PLC</RegisteredName>
</CompanySearchResult> 
```

**Note the correct usage of the two namespaces needed to make this transformation work. I believe yours fails because you only specify one namespace (which, for the `<CompanyNumber>` and the `<CompanyName>` elements, is the incorrect one).**

# ios - Apple iOS -“应用程序锁定”配置文件设置（又名“信息亭模式”）仅适用于通过 Apple 配置器安装的应用程序

> ID：12627219
> 
> 赞同：12
> 
> 时间：2012-09-27T17:47:23.053
> 
> 标签：ios, ipad

背景：

Apple 为他们的 iPad 提供了一种“kiosk 模式”，作为 iOS6 的一部分，它将设备锁定在一个应用程序中（甚至直接启动到应用程序中）。

为了使用它，首先必须使用 Apple Configurator 将设备设置为“受监督”设备。然后，您将一个特殊条目添加到包含应用程序包 ID 的配置文件中。

如果您使用 Apple Configurator 添加要用作信息亭应用的新配置文件和应用程序，这将非常有用。

但是，如果您不使用 Apple Configurator 添加配置文件和应用程序（也就是您使用 Xcode 或 MDM），iPad 上会出现错误：

**“引导访问应用程序不可用。请联系您的管理员”**

它似乎无法识别应用程序，除非它是通过 Configurator 专门加载的，如果您希望应用程序（和设备）由 MDM 提供程序管理，这是一个问题。

有没有人能够在 MDM 安装/管理的应用程序中使用“应用程序锁定”设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-27T19:26:23.773

无论有没有 AirWatch，都会显示此消息。我们还使用 AirWatch 的“单一应用程序模式”或“引导式访问”来锁定部署到我们零售地点的面向客户的 ipad 上的内部应用程序。

我发现，在您以引导访问模式锁定 ipad 的应用程序崩溃 5 次或更多次后，我们看到此“引导访问应用程序不可用”消息出现。看来这是 Apple 为这个功能内置的一个权宜之计。应用程序崩溃的前 4 次，引导访问将自动重新启动应用程序，您甚至可能没有意识到应用程序已经崩溃。在第五次崩溃时，屏幕上会出现引导访问应用程序不可用的消息，并且应用程序不会重新启动。短期修复是重新启动 iPad。

该应用程序将重新启动该应用程序并重新启用引导访问模式。如果您使用 AirWatch，您可以手动重启 iPad，或者您可以删除“单应用模式”配置文件，然后重新应用它，该应用将重新启动。长期的解决方案是从你的应用程序中解决错误，这样它就不会继续崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T05:03:41.027

没关系，重启后它工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T20:30:07.393

如果您在重新启动时看到此消息并且因此无法使用 iPad，您可以转到您的 MDM 控制面板并取消注册设备。这将从 iPad 远程删除 MDM 配置文件，您将能够使用您的设备。

# javascript - Google Maps JS API 在自定义标记点击时间歇性地崩溃进程

> ID：12627223
> 
> 赞同：1
> 
> 时间：2012-09-27T17:47:31.403
> 
> 标签：javascript, performance, google-maps, google-maps-api-3, crash

恐怕我正在开发的产品本质上充满了深奥的客户敏感内容，以至于我无法将问题场景有意义地简化为可复制的示例，因此这对领域专业知识和洞察力很有吸引力，基于以下内容代码：

[http://jsbin.com/barney/1/edit](http://jsbin.com/barney/1/edit)

（使用 jQuery、Underscore、Mustache、一些插件，当然还有 Google Maps v3 JS API）

我正在使用 Google Maps JS API 来生成一个相对简单的网络应用程序。到目前为止，它所做的只是创建一个自定义内容`InfoWindow`，并在用户单击自定义内容时动态更改内容`MarkerImage`。使用样式器使地图不饱和。

当我单击这些自定义标记之一时，该过程将间歇性地（无法可靠地重现）完全冻结。我在代码的第一行立即有一个断点`event.addListener`——我的代码第一次在通常的堆栈中被命中——但这个过程永远不会到达那里：当我到达那里时，一切都被冻结了。

4 次标记点击通常可以解决问题，但其他时候应用程序会毫不费力地运行整个 UX。

附加信息，我的头顶：

*   我有几个委托给主体的 jQuery 点击事件（不是这些在可观察堆栈中触发）；
*   单独放置 5 分钟左右，这个应用程序无论如何都会冻结，所以我怀疑我在不知不觉中默默地滥用 Maps API。

对于这种情况的陷阱的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:11:57.817

通过从 Google Maps DOM 结构的祖先元素中移除 CSS3 过渡，上述所有问题都得到了解决，该元素`translate3d(0)`用作强制 GPU 加速动画的 hack。离奇但真实。来自 Webkit 中明显不相关的性能问题的[轶事](https://github.com/cubiq/iscroll/issues/204) [证据](http://forums.appmobi.com/viewtopic.php?f=26&t=1579&p=8050)`transition`表明，将s 应用于`translate3d`'d 有各种未发现的内存泄漏问题。奇怪的是，考虑到传统观点认为将 translate3d 应用于转换是一种缓解 CPU 性能占用的方法！

# javascript - 你能解释一下在这些不同情况下这个对象的属性的行为吗

> ID：12627225
> 
> 赞同：1
> 
> 时间：2012-09-27T17:47:36.683
> 
> 标签：javascript, function, object, this

假设我有一个对象'msg'，我在以下情况下重新定义它，但我不了解它的属性的行为（特别是 m1）。为什么它在对象内部未定义并且当我通过函数访问它时它给出字符串值（最后一种情况）。你能解释每种情况吗

```
case 0
    var msg = {
    m1 : "this is string",
    m2 : "ok, " + this.m1

};

console.log(msg.m1); //this is string
console.log(msg.m2); // ok, undefined
/////// why m1 is undefined inside msg
//------------------------------------------
case 1
var msg1 = new Object(msg);

console.log(msg1.m1); //this is string
console.log(msg1.m2); // ok, undefined
//again undefined

//------------------------------------------
case 2
var msg2 = {
    m1 : function () { return "this is string";},
    m2 : "ok, " + this.m1,
    m3 : typeof this.m1

};

console.log(msg2.m1()); //this is string
console.log(msg2.m2); // ok, undefined
console.log(msg2.m3); // undefined
console.log(typeof msg2.m1) // function  'but inside msg2 it is undefined why'

//------------------------------------------
case 3
var msg3 = {
    m1 : (function () { return "this is string";}()),
    m2 : "ok, " + this.m1,
    m3 : typeof this.m1
};
console.log(msg3.m1); //this is string
console.log(msg3.m2); // ok, undefined
console.log(msg3.m3); // undefined
console.log(typeof msg3.m1) // string (atleast i know why this is )  but inside msg2 it is not defined (why )

//------------------------------------------
case 4
var msg4 = {
    m1 : (function () { return "this is string";}()),
    m2 : function () { return "ok, " + this.m1; },
    m3 : typeof this.m1
};
console.log(msg4.m1); //this is string
console.log(msg4.m2()); // ok, this is string 
console.log(msg4.m3); // undefined
console.log(typeof msg4.m1) // string (atleast i know why this is )  but inside msg2 it is not defined and in m2 it evaluated (why so) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:52:30.867

`this`永远不会通过对象文字语法引用当前正在生成的对象。

`this`指环境的调用上下文。对象本身没有调用上下文，但它们可以用作*调用*上下文。

注意你的`msg4.m2()`作品。这是因为`this`是函数的调用上下文，以及对调用方法的对象的引用，也就是`msg4`对象。

怎么`msg4`变成函数的调用上下文了`m2`？这是因为当你这样做时：

```
msg4.m2(); 
```

您正在调用`m2` *该*对象`msg4`。这会自动设置调用上下文，以便`this`指向`msg4`对象。

# android - 如何制作一个 App Engine 连接的 Android 项目？

> ID：12627230
> 
> 赞同：0
> 
> 时间：2012-09-27T17:48:00.840
> 
> 标签：android, eclipse, google-app-engine, gwt, eclipse-plugin

我使用[这个 Google 文档](https://developers.google.com/eclipse/docs/appengine_connected_android)来了解 App Engine Connected Android 项目。在[这个页面上](https://developers.google.com/eclipse/docs/appeng_android_create_project)，谷歌解释了如何制作这样一个项目，但是，应该存在于 Eclipse 中的菜单项却没有。

我安装了所有的先决条件，我安装了一个公认的和工作的 Android、App Engine 和 GWT SDK，我安装了大部分的谷歌 Eclipse 插件。（我只跳过了那些我确信不需要它们的东西。）

因此，出于某种原因，该选项已从插件中删除。但是文档仍然存在。有没有其他方法可以轻松实现相同的目标？我想完全按照这种类型的项目的用途去做：通过 C2DM 制作一个 App Engine 支持的 Web 应用程序和相应的 Android 应用程序。

我错过了一些 Eclipse 插件还是真的删除了这种类型的项目？任何人都知道如何设置相同？

（如果没有，是否可以将 Android 和 App Engine 项目设置为一个 Eclipse 项目？请注意，这不是我的主要问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:18:14.023

这个问题的答案表明菜单项不存在，因为 C2DM 平台已弃用，为 GCM 腾出位置。

尽管谷歌表示计划在 7 月底重新添加菜单项，但他们似乎在 9 月份还没有这样做。

# c++ - 试图编译一个 rc 文件（代码::块）

> ID：12627234
> 
> 赞同：4
> 
> 时间：2012-09-27T17:48:13.943
> 
> 标签：c++, compilation, ide, codeblocks

我试图在 code::blocks 中编译一个 rc 文件，但我遇到了一些错误。这是文件：

```
#include "I:/Win32/Win32_SimpleMenu/resource.h"

IDR_MYMENU MENU
BEGIN
    POPUP "&file"
    BEGIN
        MENUITEM "E&xit", ID_FILE_EXIT
    END

    POPUP "&Stuff"
    BEGIN
        MENUITEM "&Go", ID_STUFF_GO
        MENUITEM "G&o somewhere else", 0, GRAYED
    END
END

IDI_MYICON ICON "menu_one.ico" 
```

编译器说它正在编译 rc 文件，但它什么也没做。取消后我得到：

> ||无法打开文件“提示”：没有这样的文件或目录|
> ||预处理失败。|
> ||=== 构建完成：2 个错误，0 个警告 ===|

谢谢

# android - 我不断收到 configChanges: String types not allowed 错误。即使目标 API 设置为 13

> ID：12627235
> 
> 赞同：6
> 
> 时间：2012-09-27T17:48:14.547
> 
> 标签：android, admob

```
error: Error: String types not allowed (at 'configChanges' with value
    'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize'). 
```

这是我所有的相关代码。

在清单中：

```
 android:minSdkVersion="8"
    android:targetSdkVersion="13"

    android:name="com.google.ads.AdActivity"
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout
        |uiMode|screenSize|smallestScreenSize"/> 
```

解决了！！！问题是 configChanges 上的标签中断。他们需要齐心协力。不要为了可读性而拆分行，将其放在一起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:06:15.897

I had this problem, but I was building my app with api 8\. I also had api 13 as minimum sdk version. This is how to get it working: right click on your project>properties>android>choose android 3.2 or higher. This worked for me

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:00:49.833

即使您的目标是 13，我想这也不适用于 api 小于 13 的设备，因为更改的值不仅是`TAG`清单中的 a，而且是 a`VALUE`的 a `TAG`。因此，系统会解析这些值而不管它的 api 是什么，当它发现一个 unknown 时会抛出一个异常`VALUE`。

为了解决这个问题，您必须构建项目两次：对于 api < 13 和对于 api >=13。

如果我弄错了，请纠正我（：

# scala - Scala 将原语隐式转换为 AnyRef

> ID：12627241
> 
> 赞同：5
> 
> 时间：2012-09-27T17:48:26.113
> 
> 标签：scala, implicit-conversion

在我正在编写的 Scala 代码中，我有一个`Map[String, AnyRef]`. 当我尝试使用以下方法初始化 Map 时，Scala 抱怨它期待 a`Map[String, AnyRef]`但值为 a `Map[String, Any]`：

```
val myMap: Map[String, AnyRef] =
  Map("foo" -> true, "bar" -> false) 
```

我知道我可以改用以下内容：

```
val myMap: Map[String, AnyRef] =
  Map("foo" -> true.asInstanceOf[AnyRef], "bar" -> false.asInstanceOf[AnyRef]) 
```

我在范围内声明了以下内容：

```
implicit def booleanToAnyRef(value: Boolean): AnyRef = value.asInstanceOf[AnyRef] 
```

但编译器仍然抱怨。

编译器不应该使用隐式方法将原始布尔值转换为`AnyRef`值吗？除了（丑陋的）之外，还有什么方法`x.asInstanceOf[AnyRef]`可以让这些转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T20:06:10.223

作为记录，正如其他答案所暗示的那样，最新的编译器会说：

> 注意：从 scala.Boolean => java.lang.Boolean 中存在一个隐式，但是从 Object 继承的方法被渲染为模棱两可。这是为了避免将任何 scala.Boolean 转换为任何 AnyRef 的一揽子隐式。您可能希望使用类型归属：`x: java.lang.Boolean`.

最新的编译器将永远是一个比你曾经和你一起遇到麻烦的朋友提供更好建议的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:25:35.623

您应该避免在通用类型之间进行这种隐式转换（编译器建议这样做）。如果你想使用`java.lang.Boolean`而不是`scala.Boolean`你可以这样做：

```
import java.lang.Boolean._
val myMap: Map[String, AnyRef] = Map("foo" -> TRUE, "bar" -> FALSE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:22:36.473

只需说您正在使用 java 的布尔值：

```
scala> def foo(x: AnyRef) = x.toString
foo: (x: AnyRef)java.lang.String

scala> foo(true: java.lang.Boolean)
res0: java.lang.String = true 
```

或定义以下隐式：

```
scala> implicit def b2B(x: Boolean) = java.lang.Boolean.valueOf(x)
//foo: (x: Boolean)java.lang.Boolean

scala> foo(true)
//res1: java.lang.Boolean = true 
```

对于数字类型（但不是布尔值），有 .underlying 方法：

```
scala> 1.underlying
//res2: AnyRef = 1 
```

# salesforce - Salesforce 查找过滤器问题

> ID：12627243
> 
> 赞同：0
> 
> 时间：2012-09-27T17:48:27.737
> 
> 标签：salesforce, force.com

我有以下所有通过`Master-Detail`关系相关的自定义对象： ![在此处输入图像描述](../Images/122d6a8edb69c1a32e6d3ba46ea4cced.png)

我想在 an 的`StateEntity`字段上创建一个查找过滤器，`Invoice Item`以仅显示`StateEntity`属于`Invoice`.

出于某种原因，我可以选择`Account`第一个条件中`Entity`的`StateEntiy`： ![在此处输入图像描述](../Images/2cebc8fe9cbabe241f2f53f163ac555d.png)

但我只能到 1 级以上，`Invoice Item`而`Invoice`不是 2 级以上`StateEntity`： ![在此处输入图像描述](../Images/15af51beff1b680dd27541baec1d4bc9.png)

为什么我不能从每一侧以相同的方式遍历父对象？

（我以系统管理员身份登录，拥有完整的读/写权限，并在所有对象上启用了“增强查找”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:54:30.503

如果您创建一个新的查找字段，请在第 2 步（“选择相关对象”）中尝试选择“发票项目”而不是“发票”。然后在第 3 步中，如果您创建一个新的查找过滤器，您将能够选择“发票项目 > 发票 > 帐户”。

![在此处输入图像描述](../Images/1a5c39825525e865711000b26704292b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T00:57:36.990

格雷格，我不认为你能做你想做的事。来自 Salesforce 文档[关于查找过滤器](https://help.salesforce.com/HTViewHelpDoc?id=fields_lookup_filters_notes.htm&language=en_US)的注释- “查找过滤器中的跨越关系”部分：

`Filter criteria can include fields directly related to the target object (one level only).`

# java - Web 服务和 Axis2 出现问题

> ID：12627251
> 
> 赞同：1
> 
> 时间：2012-09-27T17:49:04.287
> 
> 标签：java, service, web, axis2

首先让我说，我是 Web 服务、Axis 和 java IDE 方面的真正新手。

我这周的工作是修改现有的 Web 服务，它是前段时间由另一位同事在 Eclipse 下开发的。当然，我无法访问他的工作空间，也无法获取他电脑的设置。

因此，在获得 java 类的源代码后，我按照各种教程在我的计算机上设置了 Eclipse、Tomcat、Axis2 和 Web 服务。一切似乎都很好，我可以访问`http://localhost:8080/axis2/services/myservice?wsdl`.

但是，当我更改一个类（例如添加一个类成员）时，我看不到对 wsdl 的任何更改，即使代码已正确执行。

我不确定我这样做是否正确或者我是否清楚:-)

我希望有人向我展示一些要遵循的提示。

谢谢 ！

# ruby - Ruby 中 File.load 和 File.read 的区别

> ID：12627252
> 
> 赞同：0
> 
> 时间：2012-09-27T17:49:10.307
> 
> 标签：ruby, sass

我正在尝试在[Sass 网站](http://sass-lang.com/docs/yardoc/Sass/Engine.html#render-instance_method)上关注 Sass -> CSS 转换器代码。

```
template = File.load('stylesheets/sassy.sass')
sass_engine = Sass::Engine.new(template)
output = sass_engine.render
puts output 
```

我在尝试时收到此错误`File.load`

```
SyntaxError in PublishController#index

/Users/jkim/rails/support-rhapsody/app/assets/stylesheets/application.sass:1: target of repeat operator is not specified: /* http:/
/Users/jkim/rails/support-rhapsody/app/assets/stylesheets/application.sass:2: no .<digit> floating literal anymore; put 0 before dot
   v2.0 | 20110126
      ^
/Users/jkim/rails/support-rhapsody/app/assets/stylesheets/application.sass:2: syntax error, unexpected tINTEGER
   v2.0 | 20110126
       ^
/Users/jkim/rails/support-rhapsody/app/assets/stylesheets/application.sass:3: syntax error, unexpected ':', expecting $end
   License: none (public domain) */ 
```

但是当我执行 File.read 时，它可以正常工作，直到`output = sass_engine.render`.

我得到这个错误，

```
NoMethodError in PublishController#index

undefined method `[]' for nil:NilClass 
```

File.read 和 File.load 有什么区别？如果你知道如何在 Sass 中解决这个问题，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:17:18.280

好吧，在 Ruby Kernel 方法中`#load`，这意味着评估作为代码加载的文本，这看起来就像在这里完成的那样。 `File.read`将文本加载为字符串。

来自 sass 文档`Sass::Engine.new`

> 创建一个新引擎。注意 Engine 只能在编译内存中的 Sass 代码时直接使用。如果您从文件系统编译单个 Sass 文件，请使用 Sass::Engine.for_file。如果要从文件系统编译多个文件，请使用 Sass::Plugin。

就这样做吧。

# iphone - 处理 Core Data 时如何停止内存累积？

> ID：12627256
> 
> 赞同：2
> 
> 时间：2012-09-27T17:49:27.300
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我已经解决这个问题好几个星期了，我似乎无法解决它。我正在遍历数据库中的每个实体以执行操作。我使用 NSFetchRequest 有一段时间了，但尽管我试图阻止它这样做，但它在每次迭代中不断增加内存使用量，显然在每次迭代后没有恢复任何内存。现在我将 NSFetchedResultsController 用于相同的任务。

这是我的代码：

NSFetchedResultsController：

```
- (NSFetchedResultsController *)updateController {

    if (_updateController != nil) {
        return _updateController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Entry" inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"creationDate" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:10];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:[self managedObjectContext] sectionNameKeyPath:nil
                                                   cacheName:nil];
    self.updateController = theFetchedResultsController;

    return _updateController;

} 
```

它运行的代码：

```
 NSLog(@"update controller: %@", [self updateController]);

    if (![[self updateController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }

    int i = 0;

    id  sectionInfo = [[_updateController sections] objectAtIndex:0];

    NSLog(@"count: %i", [sectionInfo numberOfObjects]);

    NSManagedObject *entry;

    while (i < [sectionInfo numberOfObjects]) {

        @autoreleasepool {

            entry = [_updateController.fetchedObjects objectAtIndex:i];

            NSLog(@"entry: %@", [entry valueForKey:@"message"]);

            NSLog(@"context 1: %@", [entry managedObjectContext]);
            NSLog(@"context 2: %@", [[self updateController] managedObjectContext]);

            [[entry managedObjectContext] refreshObject:entry mergeChanges:NO];

            NSLog(@"i: %i", i);

            i++;

        }

    } 
```

仪器显示：

![在此处输入图像描述](../Images/309b28ba568d56e7057d900ada9d9b46.png)

当我在时间线中单击该时间段时，它会选择表中正在显示的那些条目。图表中执行任务的时间段，数据使用量随着时间的推移而略有增加，从 1.14mb 增加到 1.17mb。在这个阶段这不是很多，但是添加处理更大数据的代码，例如 NSData 图像，意味着应用程序数据使用量会上升，直到它最终耗尽内存并崩溃。该应用程序的 1.0 版本已经在应用程序商店中，因此根本无法在我的核心数据中包含 NSData。

希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:04:58.167

您是否真的尝试将大量对象添加到数据存储中，或者您是否根据您迄今为止基准测试的数据进行推断？Core Data 通常非常擅长管理内存消耗。

当核心数据检测到您不再使用有问题的对象并且内存使用率越来越高时，核心数据会将您的对象重新变为故障并释放所有关联的内存。

使用`NSFetchRequest`'s`setFetchBatchSize:`也会有所帮助。当您从数据存储中请求更多对象时，它将小批量从磁盘中获取对象，而不是一次全部获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:53:56.693

您可以在每个要存储大量数据（例如图像）的对象上启用一个选项。它将磁盘上超过 1MB 的任何数据存储在一个文件中；这应该会降低您的内存使用量。

[二进制数据文章](http://bluecrowbar.com/blog/2011/08/coredata-external.html)

# iphone - 带有导航控件的列表视图

> ID：12627258
> 
> 赞同：0
> 
> 时间：2012-09-27T17:49:48.033
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

好的，我已将本教程搁置到 t。 [http://www.youtube.com/watch?v=2_-Gpv_-nWU&feature=iv&annotation_id=annotation_356764#t=54s](http://www.youtube.com/watch?v=2_-Gpv_-nWU&feature=iv&annotation_id=annotation_356764#t=54s)

由于某种原因，我创建的项目不断出错。

我不确定为什么。当我点击在我的 iphone sdk 上运行时，它会打开 main.m 文件并突出显示这一行

" return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); "

请有人帮助我不确定在哪里可以尝试谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:59:29.440

首先，确保在你的故事板中每个视图控制器的类名是正确的。检查名称后，在 appDelegate 的`didFinishLaunchingWithOptions`方法中删除除返回 YES 之外的所有代码。

# java - java.sql.SQLException: [Microsoft][ODBC Driver Manager] 无效的描述符索引

> ID：12627259
> 
> 赞同：0
> 
> 时间：2012-09-27T17:49:48.343
> 
> 标签：java, jdbc

下面的代码片段

```
 String query = " SELECT * FROM accessdb.user;";
    try
    {
        ResultSet rs = statement.executeQuery(query);
        rs.first();
        String s = "";
        do
        {

            s = s + rs.getInt(0) + "\t\t" + rs.getString(1) + "\t\t" 
                + rs.getString(2) + "\n";
            rs.next();
        }
        while (!rs.isLast());
        System.out.println(s);
    }
    catch (Exception ex)
    {
        System.out.println("\nError for firing query");
    } 
```

产生以下异常

```
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid descriptor index 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T17:22:36.543

> 通常，使用 in 中的列名`rs.get*()`要好得多，并且可以保护您的代码免受返回的列顺序的任何更改。

我发现没有双引号的列名会引发同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:07:48.890

> rs.getInt(0)

JDBC 列索引从`1`. 因此，您应该按如下方式检索数据：

```
s = s + rs.getInt(1) + "\t\t" + rs.getString(2) + "\t\t" + rs.getString(3) + "\n"; 
```

通常，使用 in 中的列名`rs.get*()`要好得多，并且可以保护您的代码免受返回的列顺序的任何更改。

# c++ - c++ 标记标准字符串

> ID：12627262
> 
> 赞同：7
> 
> 时间：2012-09-27T17:49:59.527
> 
> 标签：c++, tokenize, strtok

> **可能重复：**
> [如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

您好，我想知道如何使用 strtok 标记 std 字符串

```
string line = "hello, world, bye";    
char * pch = strtok(line.c_str(),","); 
```

我收到以下错误

```
error: invalid conversion from ‘const char*’ to ‘char*’
error: initializing argument 1 of ‘char* strtok(char*, const char*)’ 
```

我正在寻找一种快速简便的方法，因为我认为这不需要太多时间

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T17:54:52.987

我总是`getline`用于此类任务。

```
istringstream is(line);
string part;
while (getline(is, part, ','))
  cout << part << endl; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T17:52:44.417

```
std::string::size_type pos = line.find_first_of(',');
std::string token = line.substr(0, pos); 
```

要找到下一个标记，重复`find_first_of`但从 开始`pos + 1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T17:54:12.327

您可以`strtok`通过做`&*line.begin()`来获取指向`char`缓​​冲区的非常量指针。我通常更喜欢[`boost::algorithm::split`](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/usage.html#id3240174)在 C++ 中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T17:54:28.270

`strtok`是一个相当古怪、邪恶的函数，它修改了它的论点。这意味着您不能直接在 a 的内容上使用它`std::string`，因为无法从该类中获取指向可变的、以零结尾的字符数组的指针。

您可以处理字符串数据的副本：

```
std::vector<char> buffer(line.c_str(), line.c_str()+line.size()+1);
char * pch = strtok(&buffer[0], ","); 
```

或者，对于更多的 C++ 习惯用法，您可以使用字符串流：

```
std::stringstream ss(line);
std::string token;
std::readline(ss, token, ','); 
```

或者更直接地找到逗号：

```
std::string token(line, 0, line.find(',')); 
```

# ruby-on-rails - Rails 总是在 Max 上使用 Postgres 回滚

> ID：12627264
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:17.593
> 
> 标签：ruby-on-rails

在安装 PG 并正确设置之后，然后运行迁移 (rake db:create db:migrate db:fixtures:load)，Rails 实际上从未保存任何记录 - 它只是回滚所有内容。

疯狂的部分是，它不会破坏验证！它自动假定一切都已经工作了，即使 Postgres 并没有实际执行任何操作。

这是我的database.yml：

```
development:
  adapter: postgresql 
  database: rails_db 
  user: rails
  host: localhost 
```

这是验证：

```
validates :name, :monthly_budget, :presence => true 
```

当我执行更改时，它只是执行 BEGIN 然后 ROLLBACK。没有任何更改有效，但一切都有效。

# sas - 如何保存sas中出现最大值的列值和行值

> ID：12627267
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:20.883
> 
> 标签：sas, max

我需要找到最大值出现在下三角协方差矩阵中的行和列。然后我可以用缺失的方式替换整个行和列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:08:21.043

这是执行此操作的一个选项 - 我建议 R 可能会使它更容易，但在 SAS 中，这将起作用（不是 IML - 我个人不了解 IML）。

首先，创建一个假设的三角矩阵。

```
DATA test;
    INPUT v1 v2 v3 v4 v5 v6 v7;
    DATALINES;
    0.13 . . . . . .
    0.21 0.30 . . . . .
    0.31 0.52 0.79 . . . .
    0.05 0.11 0.25 0.18 . . .
    0.77 0.93 0.81 0.51 0.02 . .
    0.96 0.09 0.45 0.36 0.14 0.29 .
    0.55 0.67 0.71 0.92 0.44 0.38 0.01
RUN; 
```

获取每行的最大值：

```
DATA test;
    SET test;
    rowmax = max(v1,v2,v3,v4,v5,v6,v7);
RUN; 
```

然后，转置数据集：

```
PROC TRANSPOSE DATA=test OUT=test PREFIX=v;
RUN; 
```

现在，获取列最大值：

```
DATA test;
    SET test;
    colmax = max(v1,v2,v3,v4,v5,v6,v7);
RUN; 
```

将其修复回原始方向：

```
PROC TRANSPOSE DATA=test OUT=test;
    ID _NAME_;
RUN; 
```

最后，删除一个不必要的值：

```
DATA test;
    SET test;
    IF _N_=8 THEN rowmax=.;
RUN; 
```

并打印以显示数据结构：

```
PROC PRINT DATA=test;
RUN; 
```

这将为您提供以下输出：

```
_NAME_     v1      v2      v3      v4      v5      v6      v7     rowmax
 v1        0.13     .       .       .       .       .       .       0.13
 v2        0.21    0.30     .       .       .       .       .       0.30
 v3        0.31    0.52    0.79     .       .       .       .       0.79
 v4        0.05    0.11    0.25    0.18     .       .       .       0.25
 v5        0.77    0.93    0.81    0.51    0.02     .       .       0.93
 v6        0.96    0.09    0.45    0.36    0.14    0.29     .       0.96
 v7        0.55    0.67    0.71    0.92    0.44    0.38    0.01     0.92
 colmax    0.96    0.93    0.81    0.92    0.44    0.38    0.01      . 
```

唯一剩下的部分是逻辑（因此，7 列中的哪一列包含所有列中的最大值，以及 7 行中的哪一列包含所有行中的最大值）。然后，您可以执行此操作。首先确定要填零的列：

```
DATA test;
    SET test;
    index=_N_;
    ARRAY v v1-v7;
    IF _N_=8 THEN DO i=1 TO 7;
        IF v[i]=max(v1,v2,v3,v4,v5,v6,v7) THEN DO;
            CALL SYMPUT('rightcol',i);
        END;
    END;
    IF _N_~=8 THEN v["&rightcol"]=0;
    DROP i;
RUN; 
```

现在，要获取行，只需对数据集进行排序（这就是我在上面设置索引的原因）。

```
PROC SORT DATA=test;
    BY DESCENDING rowmax;
RUN; 
```

现在，您只需执行*N* =1 的操作即可对该行进行零填充。

```
DATA test;
    SET test;
    ARRAY v v1-v7;
    IF _N_=1 THEN DO i=1 TO 7;
        v[i]=0;
    END;
    DROP i;
RUN; 
```

并重新排序集合：

```
PROC SORT DATA=test;
    BY index;
RUN; 
```

你最终得到这个输出：

```
_NAME_     v1      v2      v3      v4      v5      v6      v7     rowmax    index
v1        0.00     .       .       .       .       .       .       0.13       1
v2        0.00    0.30     .       .       .       .       .       0.30       2
v3        0.00    0.52    0.79     .       .       .       .       0.79       3
v4        0.00    0.11    0.25    0.18     .       .       .       0.25       4
v5        0.00    0.93    0.81    0.51    0.02     .       .       0.93       5
v6        0.00    0.00    0.00    0.00    0.00    0.00    0.00     0.96       6
v7        0.00    0.67    0.71    0.92    0.44    0.38    0.01     0.92       7
colmax    0.96    0.93    0.81    0.92    0.44    0.38    0.01      .         8 
```

如果您需要迭代，只需调整代码以擦除 colmax 和 rowmax 中的值。

# regex - 用于在忽略日期时提取逗号分隔数字的正则表达式模式

> ID：12627268
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:21.980
> 
> 标签：regex, date, numbers, csv

我使用正则表达式的时间不长，我正在努力定义正确的正则表达式模式。我已经搜索了这个网站和许多其他网站并没有找到我需要的东西。

这是我需要解析的文件中的子字符串：

```
 As of 10 AM on:
    9/7/2012         227,134 mmcf.
    9/9/2011         1,224,376 mmcf.
    9/10/2010        424 mmcf. 
```

我需要提取的是任何不是文件内行中的日期的数字。上面示例中的每一行都是文件中的换行符，日期是该行中的第一个单词（如您所料）。日期后面的空格实际上是两个制表符和一个空格。我只需要提取值**227,134**，并且我需要能够获取任何数字 1 - 999,999,999 的值。如您所见，逗号包含在值中。

我已经能够创建一个匹配任何值（123,456；123,224,376；和 424）的模式，但它也匹配每个日期属性（月、日、年）。我有一个模式可以获取日期和空白，但我不确定之后如何获取值。

这是我正在使用的当前模式：

```
 ^(?:3[01]|[12][0-9]|[1-9])[/.-](?:1[0-2]|[1-9])[/.-][0-9]{4}         [,0-9]+\b 
```

这符合以下条件：

```
 9/7/2012         227,134
    9/9/2011         1,224,376
    9/10/2010        424 
```

有没有办法匹配模式的一部分并将其从模式的其余部分中排除？

最好的方法是什么？

我真的只关心在列表中找到第一个值（在本例中为**227,134**）。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:00:12.547

```
[\d\,]+(?=\smmcf\.) 
```

一个或多个数字或逗号，后跟一个空格和“mmcf”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:57:31.540

这个正则表达式怎么样？

```
^\s*\d{0,2}/\d{0,2}/\d{0,4}\s+([\d,]+)\s*.*$ 
```

该组是您想要的号码。

这是做什么的

*   `^`行首
*   `\s*`空格（0 次或多次）

现在获取日期

*   `\d{0,2}`0-2 位数
*   `/`削减
*   `\d{0,2}`0-2 位数
*   `/`削减
*   `\d{0,2}`0-4 位数

一些空格

*   `\s+`空格（1 次或多次）

我们想要的号码

*   `([\d,]+)`捕获数字和逗号

其余的线路

*   `\s*`空格（0 次或多次）
*   `.*`更多数字
*   `$`行结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:59:26.247

最简单的做法是匹配行中空格后的数字。您甚至不需要匹配日期。

```
^\s*\S+\s+([\d,]+) 
```

该组将包含仍包含逗号的数字。

# html - 如何使选择选项的第一个值不重定向到任何页面？

> ID：12627270
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:24.317
> 
> 标签：html, redirect, hyperlink

我在无结果页面中显示了一个下拉列表。

这就是我正在做的

```
<label for="chewie"></label>
 <select name="chewie" id="chewie" onchange="redirect()">
  <option > Select Option</option>
  <option value="www.item1.com">Item1</option>
  <option value="www.item1.com">Item1</option>
  <option value="www.item1.com">Item1</option>
  <option value="www.item1.com">Item1</option>
 </select> 
```

如果用户选择 Item1，它会重定向到 item1 页面。当他单击后退按钮并选择“选择选项”时，它应该停留在此下拉列表所在的页面上。

但是现在，当用户选择“选择选项”时，它会进入明显找不到的 404 页面。

我不希望第一个选项重定向到任何页面。我应该提供什么值以便它不会重定向到任何其他页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:02:01.503

您可以使用`<option disabled>Select Option</option>`因此无法单击该选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:55:36.200

也许你可以使用像 value="#" 这样的锚值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:52:04.893

只需从标签 `urls`中的 value 属性中删除`option`

```
 <label for="chewie"></label>
  <select name="chewie" id="chewie" onchange="redirect()">
  <option> Select Option</option>
  <option>Item1</option>
  <option>Item2</option>
  <option>Item3</option>
  <option>Item4</option>
 </select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:57:35.860

另一种选择是在 Javascript 中添加一些内容以防止其重定向。假设第一个选项始终是占位符，因此您想忽略该操作...您可以检查所选索引并仅在索引大于零时执行该操作。

```
function redirect() { 
  //capture the selection 
  var dropdown = document.getElementById("chewie");
  if(dropdown.selected_index > 0)
  { 
     //redirect the user 
     var redirect_url = dropdown.options[selected_index].value;
     window.location = redirect_url; 
  }

  return false;
} 
```

此外，您可能希望将`http://`URL 放在前面......在我的浏览器中，如果没有它，它们就无法正确重定向。

# visual-studio-2012 - 仅在标题中搜索，仅在所有单词中搜索

> ID：12627275
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:32.920
> 
> 标签：visual-studio-2012, nuget

我觉得问这个真的很愚蠢，但 NuGet 让我很生气......

我试图找到“ASP.NET Web API 帮助页面”包。所以我在搜索框中输入了它。但结果看起来像 NuGet 返回任何与我的至少一个词匹配的内容 - 即使该匹配项在描述中。
如何更改搜索，使其仅返回相关匹配项 - 类似于谷歌？

![在此处输入图像描述](../Images/968304ea0b2d3c5e39ba7531b64af07e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:00:14.723

我认为它目前不支持用于搜索的短语。我建议您在[http://nuget.codeplex.com/workitem/list/basic提出问题](http://nuget.codeplex.com/workitem/list/basic)

# c# - 存储连接的客户端？

> ID：12627276
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:50.513
> 
> 标签：c#, winforms, .net-4.0, tcpclient, tcplistener

我目前正在学习和使用客户端/服务器，并且在如何存储连接方面遇到了一些困难。

这是一些示例代码：

```
while (_isRunning)
{
    if (!tcpListener.Pending())
    {
        Thread.Sleep(200);
        continue;
    }

    TcpClient client = tcpListener.AcceptTcpClient();
    // TODO: handle connection
} 
```

我知道我将有一个处理程序来接收/发送数据给给定的客户端，但是，只有处理程序不允许我做一些事情，比如知道有多少客户端连接，向所有人发送广播消息或关闭消息。

将客户存储在列表中会很好还是我应该存储其他任何东西？

在这种情况下存储连接的客户端的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:14:23.057

对于最常见的使用模式，保持一个`List`连接的客户端就足够了。主要兴趣点将是决定：列出*什么*？

对于许多应用程序而言，纯 TCP 功能使用起来并不方便，因此您需要在其上添加一层，将流转换为更像消息队列的东西，可以从中提取整个独立的“消息”；这些消息的格式取决于您的应用程序。

我挖掘了我的一个旧项目，它是一个客户端-服务器配置，其中多个客户端连接到服务器并提供远程控制功能。在该项目中，服务器保留了一个`List<ConnectedClient>`位置：

```
// This is the whole actual class
private class ConnectedClient
{
    public TcpMessageConnection Connection { get; private set; }

    public bool ConnectedEventRaised { get; set; }

    public ConnectedClient(TcpMessageConnection connection)
    {
        this.Connection = connection;
    }
} 
```

`TcpMessageConnection`看起来像：

```
// Only class outline shown
public class TcpMessageConnection
{
    private readonly MessageStream messageStream; // another custom class

    private readonly TcpClient tcpClient;

    public EndPoint RemoteEndPoint { get; private set; } // who connected here?

    public MessageReader MessageReader { get; } // messageStream.Reader

    public MessageWriter MessageWriter { get; } // messageStream.Writer

    public bool IsCurrentlyDisconnecting { get; private set; }

    public void Close();
} 
```

与`MessageReader`and `MessageWriter`（真正的繁重工作）一起，这足以实现一个基于异步的服务器，该服务器在单个线程上为多个客户端提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:56:38.557

对于服务器，您通常对套接字的兴趣不如对套接字的用途那么感兴趣。我将采取的方法是有一个类来管理客户端和服务器之间对话的服务器端。此类将基于一个线程，因此其想法是每次接受连接时，您都会分离一个线程来处理对话，并且在该线程中是连接服务器端的套接字。

此时，您将管理各种线程而不是单个套接字。这是更高层次的抽象，更有用。

您如何管理线程将取决于您想要做什么。可能你真的不想担心它。由于每个线程都在做自己的事情，当它完成时，它只是关闭它的 TCP 连接并退出。

然而，在它退出之前，线程类会处理对话的服务器端。

我建议你检查这个 stackoverflow，[Best way to accept multiple tcp clients](https://stackoverflow.com/questions/7104293/best-way-to-accept-multiple-tcp-clients)。

# jquery - 当我确切知道位置时，如何将列或单元格添加到表格中

> ID：12627279
> 
> 赞同：0
> 
> 时间：2012-09-27T17:50:59.090
> 
> 标签：jquery, html

当我尝试将列添加到表行时遇到问题，因为我确切知道要添加哪些行和列

我得到了行和列的索引，因此我知道我的数据将添加到哪里

示例我有一个 4 行 3 列的表

我想将数据添加到第 2 行单元格 3

如何通过使用 2 循环使用 Jquery 或 Javascript 来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:04:45.320

这是一个示例[http://jsfiddle.net/uwYxU/8/](http://jsfiddle.net/uwYxU/8/)

HTML：

```
<table id="mytable" cellspacing="5" cellpadding="5" border="1">
  <tr>
    <td>a1</td>
    <td>a2</td>
    <td>a3</td>
  </tr>
  <tr>
    <td>b1</td>
    <td>b2</td>
    <td>b3</td>
  </tr>
  <tr>
    <td>c1</td>
    <td>c2</td>
    <td>c3</td>
  </tr>
  <tr>
    <td>d1</td>
    <td>d2</td>
    <td>d3</td>
  </tr>
</table> 
```

jQuery：

```
$('#mytable tr').eq(1).find('td:eq(2)').css({border:'1px solid red'}).text('my data'); 
```

或者

```
$('#mytable tr:eq(1) td:eq(2)').css({border:'1px solid red'}).text('my data'); 
```

在 jQuery 中，eq(0) 返回第一个元素，eq(1) 返回第二个元素，依此类推，就像数组一样，它们从 0 开始。

**编辑：回复您的评论** ，您可以检查选择器是否发现了这样的内容：

```
var selector = $('#mytable tr:eq(1) td:eq(2)');
if(selector.length>0) {
   // Apply styling or other rules
} else {
   // create the missing element and append it
   var missingElement = $('<td>this was missing</td>');
   $('#mytable tr:eq(1)).append(missingElement);
} 
```

# ajax - 添加节点刷新视图

> ID：12627280
> 
> 赞同：0
> 
> 时间：2012-09-27T17:51:01.010
> 
> 标签：ajax, forms, drupal, views

我想要一个节点视图，在它上面，添加一个新的节点表单，所以它很容易构建一个列表（比如说一个购物清单）。

当我提交表单时，我希望它通过 ajax 刷新视图以包含新节点。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:19:11.843

你在这里有相当多的要求。我将假设您知道如何构建视图。使用页面输出。

使用 Drupal 表单 API 创建表单。设置一个自动完成字段并让您的提交处理程序在节点中的一个字段中设置一个值。将此表单放在一个块中（[如何在 Drupal 模块中允许多个块](https://stackoverflow.com/questions/12585912/how-to-allow-multiple-blocks-in-a-module-of-drupal/12590034#12590034)）并将其显示在此视图输出的页面顶部。

对于 ajax 的东西，我为我的公司写了一篇很棒的博客文章，概述了如何做到这一点：[http ://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7](http://clikfocus.com/blog/simple-ajax-example-drupal-6-and-7)

在您的回调中运行该函数：

```
$view = views_embed_view('view_name', 'display_name', $args_array);
print $view; 
```

确保您关闭了视图缓存，并在您的 jQuery 中确保选择包装视图的标签。

你在这里要求一个完整的模块，所以我现在不能写整个东西，但这应该让你开始。

# wpf - GroupBox 和 ListBox 的问题

> ID：12627285
> 
> 赞同：1
> 
> 时间：2012-09-27T17:51:11.760
> 
> 标签：wpf, xaml

我无法正确对齐列表框的内容。我有以下 XAML。基本上，我试图展示一些列表框，每个列表框都在自己的标题下。我还附上截图。如您所见，只有具有最长 TextBlock 的 ListBox 的 X 按钮才能正确对齐。我试过 Horizo​​ntalContentAlignment="Stretch"，但没用。我还仔细检查了我所包含的 ListBox、ListBoxItem 和 GroupBox 样式没有做任何奇怪的事情。我基本上已经删除了所有样式，问题仍然存在。有任何想法吗？我对任何想法持开放态度，包括改变我的 XAML。

```
<ItemsControl Grid.Row="0" ItemsSource="{Binding Path=Items}">
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <GroupBox Header="{Binding Path=CategoryName}">
            <ListBox Grid.IsSharedSizeScope="True" ItemsSource="{Binding Path=Items}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="15" SharedSizeGroup="Col1"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Col2"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Col3"/>
                                <ColumnDefinition Width="11" SharedSizeGroup="Col4"/>
                            </Grid.ColumnDefinitions>

                            <Path Grid.Column="0" Visibility="{Binding Path=IsChecked, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}" Stroke="{StaticResource Green06Brush}" StrokeThickness="2" SnapsToDevicePixels="False" Data="M 1 6 L 4 9 L 10 1" Margin="0.6,0.6,0.6,0.6" ClipToBounds="true" StrokeEndLineCap="Flat" StrokeStartLineCap="Flat"/>

                            <TextBlock Grid.Column="1" Text="{Binding Path=Symbol}" HorizontalAlignment="Left" Margin="2,0,10,0"/>
                            <TextBlock Grid.Column="2" Text="{Binding Path=Name}" HorizontalAlignment="Left" Margin="0,0,10,0"/>

                            <fpp:ImageButton Grid.Column="3" RenderOptions.BitmapScalingMode="NearestNeighbor" Source="Images/Clear_X.png" MouseOverSource="Images/Clear_X_On.png" DisabledSource="Images/Clear_X_Disabled.png" HorizontalAlignment="Right" VerticalAlignment="Center" Click="ClickRemoveTicker"/>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ListBox>
        </GroupBox>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

**原始截图**

![原始截图](../Images/711c8742ac1246b93a9612e8cb21478c.png)

**更新截图**

![在此处输入图像描述](../Images/84b29fb1103b130b188e873c9bdcf3cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:04:28.000

问题是每个`Grid`都包含在一个项目容器中，并且该容器只会增长与其内容一样大。

尝试将`<GroupBox Header…&gt;`元素更改为：

```
<GroupBox Header…
          Width="{Binding ActualWidth,
              RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}}"> 
```

原则上，这应该将所有 item 的宽度设置为`GroupBox`等于`ItemsControl`自身的宽度。

你可能需要对`Grid`s 做同样的事情，除了你会绑定到他们的`GroupBox`祖先。

现在所有`Grid`s 的宽度都相同，按钮应该在右侧对齐。

# java - 在 Java 中使用字符串数组作为 Vector 的元素

> ID：12627287
> 
> 赞同：0
> 
> 时间：2012-09-27T17:51:21.513
> 
> 标签：java, arrays, algorithm, vector

我有兴趣将字符串数组用作 Vector 对象中的元素。数组的长度始终为 2。这种数据结构有更好的方法吗？使用 Vector 的原因是动态调整大小，即元素的数量不同，我想对 Vector 使用`add`和`trimToSize`方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:57:15.937

改为使用`ArrayList`和自定义对象。

```
public class MyStrings {
    private String string1;
    private String string2;

    public MyStrings(String string1, String string2) {
        this.string1 = string1;
        this.string2 = string2;
    }

    public String getString1() {
        return string1;
    }

    public String getString2() {
        return string2;
    }
} 
```

然后使用它：

```
List<MyStrings> list = new ArrayList<MyStrings>();
list.add(new MyString("apple", "orange");
// To iterate:
for (MyStrings myStrings : list) {
    System.out.println(myStrings.getString1());
    System.out.println(myStrings.getString2());
} 
```

`Vector`在 Java 中不再被认为是一个好的动态数组，因为额外的同步逻辑或多或少是无用的，所以它只是增加了不必要的开销。`ArrayList`是首选动态数组。您也可以使用`LinkedList`，这是一个双向链表。

当然，您还应该使用更好的命名约定来描述值的实际含义，而不是我在示例中使用的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:55:18.907

Apache commons 提供了一个不错的[Pair 类](http://commons.apache.org/lang/api-3.0-beta/org/apache/commons/lang3/Pair.html)来存储两个值。使用大小为 2 的数组看起来有点 hacky。

# ab-initio - 我应该如何管理 AI 以准备 MFS 文件的升级和迁移？

> ID：12627292
> 
> 赞同：0
> 
> 时间：2012-09-27T17:51:46.500
> 
> 标签：ab-initio

为了准备 MFS 文件的升级和迁移，您对管理 AI_MFS 参数有什么建议？这在 dev>test>prod 的标准推广中经常需要。如果将应用程序迁移到使用不同 MFS 深度的系统，也需要它。

源或目标 MFS 是否应该有不同的项目参数？如果是这样，它应该使用什么名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:41:10.527

您可以将自定义参数定义为项目级别的输入或输出 MFS 目录。命名约定由您决定。这些输入和输出 MFS 目录应该在 $AI_MFS 目录下。

AI_MFS 参数的值在每个环境（dev、test、prod）中应该不同。

由于在不了解设置详细信息的情况下无法正确回答您的问题，我建议短期（甚至仅 1 天）雇用可以根据您的用例/期望设置您的环境的人。

（例如，您所说的“促进开发>测试>产品”到底是什么意思？如果它仅仅意味着仅仅促进源代码（项目），那么只需确保在每个环境中将 AI_MFS 设置为适当的值（这样做例如，在“stdenv”中，AI_MFS 的实际值应该从登录时设置的某个 unix 环境变量中导出）。）

# python - 为什么一个文件对象刷新，而另一个不刷新？

> ID：12627297
> 
> 赞同：4
> 
> 时间：2012-09-27T17:52:10.540
> 
> 标签：python, file, flush

我想要一个在写入数据时直接刷新到文件的文件对象，并写了这个：

```
class FlushingFileObject(file):
    def write(self,*args,**kwargs):
        return_val= file.write(self,*args,**kwargs)
        self.flush()
        return return_val

    def writelines(self,*args,**kwargs):
        return_val= file.writelines(self,*args,**kwargs)
        self.flush()
        return return_val 
```

但有趣的是，当我写它时它并没有刷新，所以我尝试了一些方法，包括：

```
class FlushingFileObject(object):
    def __init__(self,*args,**kwargs):
        self.file_object= file(*args,**kwargs)

    def __getattr__(self, item):
        return getattr(self.file_object,item)

    def write(self,*args,**kwargs):
        return_val= self.file_object.write(*args,**kwargs)
        self.file_object.flush()
        return return_val

    def writelines(self,*args,**kwargs):
        return_val= self.file_object.writelines(*args,**kwargs)
        self.file_object.flush()
        return return_val 
```

这确实冲洗。

为什么`file`在这种情况下子类化不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T18:40:34.947

好问题。

发生这种情况是因为 Python通过绕过 Python 级别的方法并直接调用来优化`write`对对象的调用。`file``write``fputs`

要看到这一点，请考虑：

```
$ cat file_subclass.py
import sys
class FileSubclass(file):
    def write(self, *a, **kw):
        raise Exception("write called!")
    writelines = write
sys.stdout = FileSubclass("/dev/null", "w")
print "foo"
sys.stderr.write("print succeeded!\n")
$ python print_magic.py
print succeeded! 
```

该`write`方法从未被调用！

现在，当对象不是 的子类时`file`，事情会按预期工作：

```
$ cat object_subclass.py
import sys
class ObjectSubclass(object):
    def __init__(self):
        pass
    def write(self, *a, **kw):
        raise Exception("write called!")
    writelines = write
sys.stdout = ObjectSubclass()
print "foo"
sys.stderr.write("print succeeded!\n")
$ python object_subclass.py
Traceback (most recent call last):
  File "x.py", line 13, in <module>
    print "foo"
  File "x.py", line 8, in write
    raise Exception("write called!")
Exception: write called! 
```

稍微挖掘一下 Python 源代码，看起来罪魁祸首是`PyFile_WriteString`由语句调用的函数，`print`它检查要写入的对象是否是 的实例`file`，如果是，则绕过对象的方法并`fputs`直接调用：

```
int
PyFile_WriteString(const char *s, PyObject *f)
{

    if (f == NULL) {
        /* … snip … */
    }
    else if (PyFile_Check(f)) { //-- `isinstance(f, file)`
        PyFileObject *fobj = (PyFileObject *) f;
        FILE *fp = PyFile_AsFile(f);
        if (fp == NULL) {
            err_closed();
            return -1;
        }
        FILE_BEGIN_ALLOW_THREADS(fobj)
        fputs(s, fp); //-- fputs, bypassing the Python object entirely
        FILE_END_ALLOW_THREADS(fobj)
        return 0;
    }
    else if (!PyErr_Occurred()) {
        PyObject *v = PyString_FromString(s);
        int err;
        if (v == NULL)
            return -1;
        err = PyFile_WriteObject(v, f, Py_PRINT_RAW);
        Py_DECREF(v);
        return err;
    }
    else
        return -1;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T18:46:48.170

的文档`file.flush()`说：

注意 flush() 不一定将文件的数据写入磁盘。使用 flush() 后跟 os.fsync() 来确保这种行为。

我在没有调用 os.fsync 的情况下测试了 FlushingFileObject 的第一个版本。该文件没有刷新。插入`os.fsync(self.fileno())`文件后刷新。然后我删除了 os.fsync 调用，现在文件被刷新了！我认为可以肯定的是， os.fsync 调用是必要的。

# spring - 尝试创建测试时注入自动装配的依赖项失败

> ID：12627300
> 
> 赞同：2
> 
> 时间：2012-09-27T17:52:16.310
> 
> 标签：spring, junit, annotations

我正在尝试`junit`为存储库创建一个测试，我得到了这个很好的例外。

完全例外：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gov.mt.dphhs.sdnh.core.domain.RepositoryJDBCTest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC gov.mt.dphhs.sdnh.core.domain.RepositoryJDBCTest.testRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC gov.mt.dphhs.sdnh.core.domain.RepositoryJDBCTest.testRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:502)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    ... 27 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:920)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:789)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
... 29 more 
```

我有@Repository

```
@Repository
public class RepositoryJDBC implements RepositoryInterface { 
```

我有 applicationContext-test.xml 设置：

```
<context:annotation-config />
    <context:component-scan base-package="gov.mt.dphhs.sdnh.core" />
    <context:component-scan base-package="gov.mt.dphhs.sdnh.web" />
    <context:component-scan base-package="gov.mt.dphhs.sdnh.core.domain.impl" />
    <mvc:annotation-driven />

    <jee:jndi-lookup id="testDataSource" jndi-name="jdbc/newHireDS" />

    <!-- 
        Setup Repositories
    --> 
    <bean id="repositoryJDBC"
          class="gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC"/> 
```

这是实际的junit测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:/applicationContext-test.xml" })
public class RepositoryJDBCTest {

    @Autowired RepositoryJDBC testRepository;

    private Employee testEmployee;
    private Employer testEmployer;
    private List<Employee> employeeList;
    private DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

    @BeforeClass
    public static void setUpClass() throws Exception {
        // jndi connection information removed
    }

    /**
     * 
     * @throws Exception
     */
    @Test
    public void testFindEmployee() throws Exception {
        System.out.println("Find Employee test: ");
        /* Start the Test */
        /* Get the test employee and check that the Employee object is created */
        testEmployee = testRepository.findEmployee(123940); // (Integer)

        assertNotNull(testEmployee);

        System.out.println("\t found this employee: " + testEmployee.toString());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:05:41.890

注入接口而不是具体类：

```
@Autowired RepositoryInterface testRepository; 
```

它将起作用，因为一旦您应用`@Repository`注释，Spring就会`RepositoryJDBC`使用代理包装您的原始类。默认情况下，该代理实现了具体类已经实现的所有接口——但不扩展该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:27:34.923

有时当你遇到奇怪的错误时，答案是关闭 Eclipse/STS，删除你的 ~/.m2/repository 目录，然后重新启动 Eclipse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:53:53.733

我认为这`<mvc:annotation-driven />`是冲突的`<context:annotation-config />`，然后没有创建存储库 bean。

删除`<mvc:annotation-driven />`并测试（它有效，我试过了）

另外，您不需要配置文件中的 bean 定义

```
<bean id="repositoryJDBC" class="gov.mt.dphhs.sdnh.core.domain.impl.RepositoryJDBC"/> 
```

# validation - Spring MVC - 在方法返回时初始化绑定器

> ID：12627302
> 
> 赞同：0
> 
> 时间：2012-09-27T17:52:22.850
> 
> 标签：validation, spring-mvc

我对`@InitBinder`Spring 验证有疑问。

首先，代码：

**控制器：**

```
@Controller
@RequestMapping("/manage")
public class QuestionManagementController {
...
    @InitBinder
    protected void initBinder(WebDataBinder binder) {
        System.out.println("======"+binder.getObjectName());
        binder.setValidator(new QuestionListValidator());
        System.out.println("======"+binder.getObjectName());
    }
...
    @RequestMapping(value = "question/{unitid}", method = RequestMethod.GET)
    public String getQuestionEditor(@SessionAttribute("userEntity")
    UserEntity loggedUser, Model model, @PathVariable("unitid")
    long unitId) {
        QuestionUnit qu = questionUnitDao.getQuestionUnitById(
                QuestionUnit.class, unitId);
        QuestionList list = questionListDao.getParentQuestionList(qu);
        if (!isOwner(loggedUser, list)) {
            throw new Http404Exception("Nie znaleziono strony.");
        }
        else {
            model.addAttribute("questionUnit", qu);
            model.addAttribute("listid", list.getId());
            model.addAttribute("formUrl", "/manage/question/" + qu.getId());
            System.out.println("sdhfdsfihui");
            return "/question/adder/"
                    + questionAnnotationProcessor.getJSPName(qu.getClass());
        }

    } 
```

现在，使用 println 的强大功能，当调用此方法时，我会得到类似的结果：

```
INFO : pl.meble.taboret.controller.QuestionManagementController - entering: initBinder
INFO : pl.meble.taboret.controller.QuestionManagementController - w/args:[org.springframework.web.servlet.mvc.method.annotation.ExtendedServletRequestDataBinder@1dc696e]
======unitid
======unitid
INFO : pl.meble.taboret.controller.QuestionManagementController - entering:getQuestionEditor
INFO : pl.meble.taboret.controller.QuestionManagementController - w/args: [user, {}, 1245184]
sdhfdsfihui
INFO : pl.meble.taboret.controller.QuestionManagementController - entering: initBinder
INFO : pl.meble.taboret.controller.QuestionManagementController - w/args: [org.springframework.web.servlet.mvc.method.annotation.ExtendedServletRequestDataBinder@404629]
======questionUnit
class pl.meble.taboret.question.OpenQuestion
INFO : pl.meble.taboret.controller.QuestionManagementController - entering: handleMyException
INFO : pl.meble.taboret.controller.QuestionManagementController - w/args: [java.lang.IllegalStateException: Invalid target for Validator [pl.meble.taboret.validator.question.QuestionListValidator@1be6a65]: pl.meble.taboret.question.OpenQuestion@1f9cb2c] 
```

所以看起来 init binder 在之前调用 - 这是正常的，在方法`return`语句之后。返回的字符串是 Apache Tiles 定义的名称。

同样奇怪的是，init binder被调用了`questionUnit`，validator被设置了，然后就报错了。

列表验证器如下所示

```
@Component
public class QuestionListValidator implements Validator {
    @Override
    public boolean supports(Class<?> clazz) {
        System.out.println(clazz.toString());
        return QuestionList.class.isAssignableFrom(clazz);
    }

    @Override
    public void validate(Object target, Errors errors) {
        ValidationUtils.rejectIfEmpty(errors, "name", "name.empty");
    }
} 
```

我们可以看到打印的类的名称。

我不知道为什么会这样，但我很确定这是`@InitBinder`没有任何参数的错。

我阅读了关于这个注释`value`参数的spring文档，这里是

```
The names of command/form attributes and/or request parameters that this init-binder method is supposed to apply to.
Default is to apply to all command/form attributes and all request parameters processed by the annotated handler class. Specifying model attribute names or request parameter names here restricts the init-binder method to those specific attributes/parameters, with different init-binder methods typically applying to different groups of attributes or parameters. 
```

那么这是否意味着没有参数，验证器会验证传入的所有内容（请求参数）和传出的所有内容（命令/表单属性）？如果是这样，为什么没有使用`userEntity`参数调用 init binder。以及为什么`@InitBinder`在控制器方法返回String之后调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:25:09.623

除非您的参数具有 @Valid 注释，或者您明确调用它，否则不会调用验证器。在您的情况下，他们不应该被调用。但是，如您所见，将为每个参数调用 InitBinder 方法。

在为方法参数设置验证器时，将调用验证器的supports方法以确定验证器是否支持参数类型，这可能是您看到正在调用supports，但是不会调用validate方法除非你也有 @Validate 注释

# function - Ocaml 函数中的语法错误

> ID：12627308
> 
> 赞同：1
> 
> 时间：2012-09-27T17:53:03.103
> 
> 标签：function, ocaml

我在此函数的最后一行收到语法错误：

```
let rec countAll(doorlist, count) =
    let listdoor = [];
    countZero(doorlist, count) :: listdoor;
    countOne(doorlist, count) :: listdoor;
    countTwo(doorlist, count) :: listdoor;; 
```

我可能对如何从 Ocaml 函数返回某些内容感到困惑。我想返回“listdoor”，它应该是一个包含函数 countZero、countZero 和 countTwo 的输出的列表。

我在最后一个 lint 上收到语法错误，这段代码的最后几个字符：

```
File "MonteeHall.caml", line 30, characters 38-40:
Error: Syntax error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T09:59:38.160

To add to Jeffrey's answer, it looks like you meant to add items to listdoor in three steps. The confusion is about the meaning of `;` and `::` in ocaml. And you and I are both in the habit of programming by doing sequences of steps, as we did in other languages.

Everything to the right of `=` is one big expression that evaluates to the function's return value. That's how values are returned from functions in ocaml.

When the expression has `;`'s in it, the `;` is a delimiter between sub-expressions. Each sub-expression gets evaluated, and all the return values except for that of the last sub-expression get discarded (those sub-expressions aren't useless though - the reason for using `;` is to accumulate side-effects).

But the `::` doesn't act by side effect - cons is just a function with a return value.

So your lines `countZero(doorlist,count) :: listdoor` and `countOne(doorlist,count) :: listdoor` each produced a new list, but each of those lists was discarded.

If you want to keep the meaning the same, and build up a list in sequence, you could do it by storing the steps of the accumulation using let and in:

```
let countAll(doorlist,count) =
    let step1 = [] :: countZero(doorlist,count) in
    let step2 = step1 :: countOne(doorlist,count) in
    let step3 = step2 :: countTwo(doorlist,count) in
    step3
;;

```

If keeping all those intermediate names around seems less efficient than the series of concatenations you had in mind in your posting, it's because this kind of thing is more terse if you express the function in a way that resembles the verbal description you gave, instead of the sequential way that you were encouraged to come up with by other languages. If you want to collect the result of three functions into a list, you can simply do this:

```
let collectResults (a,b) = 
    [ fun1 (a,b) ;  fun2 (a,b) ; fun3 (a,b) ]
;;

```

Do you see how the return value (everything to the right of `=`) matches up with the description you gave for your function: "which is supposed to be a list containing the output of the functions"? (NB: semicolons within the square brackets delimit elements in a list - different meaning from the `;`'s earlier!)

Two other minor points:

If the function you are defining doesn't call itself, there is no need to declare it 'rec'. But maybe Jeffrey's hunch is right and in fact you meant to have some recursive calls here somewhere.

There's no need to make a name for your return value (listdoor in your case). If the function's definition is very short like this one, let the definition itself be your 'label' for the return value. In the last code block, the function doesn't give a name to the list it returns.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:00:33.710

我想说我看到的最大问题是，`let x = value`它只在顶层才有意义。在其他构造中，唯一可用的形式是`let x = value in y`. 所以，你错过了这个`in`部分。

一般来说，我会建议一开始就`;`谨慎使用。您必须将 OCaml 函数视为一个大表达式（带有值）。它不像具有一系列动作（要做的事情）的过程语言。

# ruby-on-rails - rails bluehost错误Ruby（Rack）应用程序无法启动

> ID：12627313
> 
> 赞同：0
> 
> 时间：2012-09-27T17:53:22.450
> 
> 标签：ruby-on-rails, deployment, rack, passenger, bluehost

我在部署一个简单的 Rails 应用程序时遇到了许多问题，当我看到 Rails 欢迎屏幕时，我认为一切都很好……然后当我选择默认 Rails 页面的“关于您的应用程序环境”链接时，我看到了很多错误。错误如下，当我转到特定 URL 时也会出现。

我认为问题是我的 ~/.bashrc 文件明确要求

```
 export GEM_PATH=$GEM_HOME:/usr/lib64/ruby/gems/1.8 
```

当错误引用 gems/1.9.3

我只是不确定这是否是问题或如何改变这些东西以使它们彼此一致。用 1.9.3 替换 1.8 并没有解决问题（尽管我无法弄清楚我可能必须运行哪些捆绑或更新命令才能使其工作）。

我很感激你能提供的任何方向或建议......我是 bluehost rails 部署的新手，我确定我在这里遗漏了一些东西......

谢谢。

> 错误消息：在任何源中都找不到 i18n-0.6.1 (Bundler::GemNotFound) 异常类：PhusionPassenger::UnknownError

其次是：

```
Backtrace:
#   File    Line    Location
0   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/spec_set.rb  88  in `block in materialize'
1   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/spec_set.rb  82  in `map!'
2   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/spec_set.rb  82  in `materialize'
3   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/definition.rb    90  in `specs'
4   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/definition.rb    135     in `specs_for'
5   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/definition.rb    124     in `requested_specs'
6   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/environment.rb   23  in `requested_specs'
7   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler/runtime.rb   11  in `setup'
8   /usr/lib64/ruby/gems/1.9.3/gems/bundler-1.0.21/lib/bundler.rb   110     in `setup'
9   /etc/httpd/modules/passenger/lib/phusion_passenger/utils.rb     326     in `prepare_app_process'
10  /etc/httpd/modules/passenger/lib/phusion_passenger/rack/application_spawner.rb  156     in `block in initialize_server'
11  /etc/httpd/modules/passenger/lib/phusion_passenger/utils.rb     572     in `report_app_init_status'
12  /etc/httpd/modules/passenger/lib/phusion_passenger/rack/application_spawner.rb  154     in `initialize_server'
13  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server.rb   204     in `start_synchronously'
14  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server.rb   180     in `start'
15  /etc/httpd/modules/passenger/lib/phusion_passenger/rack/application_spawner.rb  129     in `start'
16  /etc/httpd/modules/passenger/lib/phusion_passenger/spawn_manager.rb     253     in `block (2 levels) in spawn_rack_application'
17  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server_collection.rb    132     in `lookup_or_add'
18  /etc/httpd/modules/passenger/lib/phusion_passenger/spawn_manager.rb     246     in `block in spawn_rack_application'
19  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server_collection.rb    82  in `block in synchronize'
20      prelude>    10:in `synchronize'
21  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server_collection.rb    79  in `synchronize'
22  /etc/httpd/modules/passenger/lib/phusion_passenger/spawn_manager.rb     244     in `spawn_rack_application'
23  /etc/httpd/modules/passenger/lib/phusion_passenger/spawn_manager.rb     137     in `spawn_application'
24  /etc/httpd/modules/passenger/lib/phusion_passenger/spawn_manager.rb     275     in `handle_spawn_application'
25  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server.rb   357     in `server_main_loop'
26  /etc/httpd/modules/passenger/lib/phusion_passenger/abstract_server.rb   206     in `start_synchronously'
27  /etc/httpd/modules/passenger/helper-scripts/passenger-spawn-server  99  in `' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:28:37.457

[在这里查看我的答案](https://stackoverflow.com/questions/12685808/rails-the-newest-gem-is-installed-but-the-applicaiton-is-old/12907818#12907818)。

请注意，在安装 RVM 时，您会看到它会自动修改 .bash_profile 以使用正确的路径，该路径将是 in `/home/<user>/.rvm/...`，而不是 in `/user/lib64`。

编辑：没关系我的回答。尽管有可能让 Rails 3.x 与当前安装的 Ruby 1.8 一起运行（请参阅[此 Stackoverflow 问题](https://stackoverflow.com/questions/2570522/no-such-file-to-load-bundler-error-for-rails-3)），但您将无法使用 Bluehost 共享主机运行 Ruby 1.9.x。您唯一的选择（目前）是 VPS 托管。

原因是Passenger Phusion 与安装在/usr/lib 中的Ruby 版本相关联，如果没有root 访问权限，您无法更改该版本。即使您可以使用 RVM 安装任何版本的 Ruby，您也不会让Passenger 与它对话，因此您的 Rails 项目不会使用它的 gem。

# sql-server - SQL Server 上的数据迁移文本类型

> ID：12627319
> 
> 赞同：0
> 
> 时间：2012-09-27T17:54:04.003
> 
> 标签：sql-server, data-migration, grails-2.0

我正在尝试为 Grails使用[数据库迁移插件](http://grails.org/plugin/database-migration)`text`，但我遇到了一个属性类型为.

生成基线日志将类型设置为`text(255)`，但这是一个错误，因为没有精度。当我尝试将数据类型修改为`text`.

```
changeSet(author: "jgiotta (generated)", id: "1348767652354-2") {
    modifyDataType(columnName: "old_value", newDataType: "text",
        schemaName: "dbo", tableName: "audit_trail")
} 
```

我能做些什么来避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:04:01.970

检查连接驱动程序 (ODBC/JDBC) 上的字符集设置。
在使用复制工具带来 NVARCHAR 字段时，我遇到了类似的问题。空值被写入目标，因为 ODBC 驱动程序不理解带有 ASCII 字符映射的 NVARCHAR。简而言之，问题在于复制工具使用的是带有 ASCII 字符集的 ODBC 驱动程序。有一次，我将 ODBC 驱动程序更改为使用 UTF8 字符集，我开始在目标上看到 NVARCHAR 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:13:15.963

我通过一些额外的映射解决了它。

最初我只是在做：

```
static mapping = {
    oldValue type: 'text'
    //...
} 
```

强制类型至少`nvarchar(max)`是以下映射：

```
static mapping = {
    oldValue type: 'text', sqlType: 'text'
} 
```

# filemaker - 在 Filemaker 中的预览模式下未显示摘要部分

> ID：12627321
> 
> 赞同：0
> 
> 时间：2012-09-27T17:54:05.490
> 
> 标签：filemaker, summary

我在 Filemaker Pro 11 中有 2 个表：

*   `"Donor"`表包含捐助者的几个字段，包括：

    ```
    First Name
    Last Name
    Street Address
    City
    State 
    ```

*   个人捐款在相关`"Donation Transactions"`表中进行跟踪，其中包含以下字段：

    ```
    Date
    Payment Type
    Amount
    Amount (Summary field: Running Total of the Amount field) 
    ```

这两个表由所有名称和地址字段连接。目前，我们在供体表上没有唯一的数字键列，因此必须使用多个字段来执行此连接。

我需要能够为金额生成各种汇总报告。例如，我可能需要按月（基于表`Date`中的值`"Donor Transactions"`）、`City`（父字段上的字段）进行汇总`"Donors table"`。我按照教程生成摘要`"Last Name"`作为起始报告。

这是布局的定义方式：

```
[Header]       Last Name     Date       Payment Type         Amount          

[Sub-summary]  _LastName_                                    _Amount Running Total_

[Body]                       _Date_     _Payment Type_       _Amount_ 
```

.

注意：`[Sub-summary]`部分在 上排序`Last Name`，但在预览模式下不显示。我可以在浏览模式下看到它，一次显示一条记录，当我从一条记录移动到另一条记录时，运行总计会更新。

我希望以表格格式查看汇总，其中所有记录按名称按汇总金额排序和显示。

关于我可能做错了什么的任何想法？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:21:10.860

仔细检查以确保一切设置正确：

### 基础知识：

在**捐赠交易**表中：

*   **金额**设置为数字
*   ****当按 Donor::Last Name 排序时，金额****摘要**设置为Summary = Total of Amount（重新启动时运行）**

 ****捐赠者和捐赠交易之间的**关系**应该无关紧要，只要最终您在 1 个捐赠者和他们的多笔交易（无论日期、付款类型或其他属性如何）之间得到匹配。如果您想创建特定的过滤器，您可以稍后使用这种关系。

### 那个报告：

以下是设置：

*   报告布局基于**Donor Transactions**表（如果多次出现这种情况，请确保您选择了正确的一个，即与 Donor 表具有正确关系的那个）
*   **Sub-summary 部分**设置为：Sub-summary when sort by **Donor::Last Name**
*   **正文**包含日期、付款类型和金额
*   **排序**由**Donor::Last Name完成**

这应该会给你你正在寻找的报告。****

# asp.net-mvc - Entity Framework 5 将属性添加到连接表

> ID：12627323
> 
> 赞同：0
> 
> 时间：2012-09-27T17:54:08.723
> 
> 标签：asp.net-mvc, entity-framework

使用 EF5 和迁移。我想向我的联接表 ProjectUser 添加一个属性。我将模型设置如下，但迁移不会生成属性。感谢或想法将不胜感激。

```
User { 
public int UserGuid { get; set; }
....
public virtual IColllection<Project> Projects { get; set; }
}

Project {
public int ProjectId { get; set; }
....
public virual ICollection<User> Contacts { get; set; }
}

ProjectUser {
public int Project_ProjectId { get; set; }
public guid User_UserGuid { get; set; }
public string ProjectRoles { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:15:10.853

您还记得将 ProjectUser 添加到 DbContext 吗？您还需要让您的 User 和 Project 集合引用连接表，而不是相互引用。EF 本身并不支持与有效负载的多对多关系。

您认为您将如何访问 ProjectRoles 属性？

# coffeescript - 如何将接受函数作为参数的javascript函数调用转换为coffeescript？

> ID：12627327
> 
> 赞同：0
> 
> 时间：2012-09-27T17:54:15.360
> 
> 标签：coffeescript

我有一些看起来像这样的javascript：

```
$('button').on('click', function(e){
    alert($(this).text());
}); 
```

我如何将其转换为咖啡脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:59:54.593

您可以在 CoffeeScript 中将其表示为：

```
$('button').on 'click', (e) ->
  alert $(@).text() 
```

[CoffeeScript](http://coffeescript.org)网站有一个很棒的“试用 CoffeeScript”功能，可以显示输出 JS。这是您的代码[示例](http://coffeescript.org/#try%3a%24%28%27button%27%29.on%20%27click%27%2C%20%28e%29%20-%3E%0A%20%20alert%20%24%28%40%29.text%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:07:04.993

我最好的猜测是您使用的编译器已过时，因为[此页面](http://coffeescript.org/#try%3a%24%28%27button%27%29.on%20%27click%27,%20%28e%29%20-%3E%0A%20%20alert%20%24%28@%29.text%28%29)显示

```
$ ->
  $('#network_select select').on 'change', (e)->
    alert $(@).val() 
```

应该编译成

```
$(function() {
  return $('#network_select select').on('change', function(e) {
    return alert($(this).val());
  });
}); 
```

哪个确实有您的更改处理程序的参数。如果编译器不是问题，那么您的问题中遗漏了一些东西。

# weblogic-10.x - 部署到 Weblogic 时覆盖 JSP 挂钩问题？

> ID：12627329
> 
> 赞同：1
> 
> 时间：2012-09-27T17:54:38.483
> 
> 标签：weblogic-10.x, liferay-6

我有一个有趣的问题，似乎与环境有关。使用 TOMCAT7 可以 100% 正常工作，但不适用于 WEBLOGIC 10.x

已配置以下内容以覆盖我的 JSP (liferay-hook.xml)：

```
<hook>
    <custom-jsp-dir>/META-INF/custom_jsps</custom-jsp-dir>
    <custom-jsp-global>true</custom-jsp-global>
</hook> 
```

挂钩 JSP 文件存在于以下项目位置：

```
docroot/META-INF/custom_jsps/html/portlet/login/login.jsp 
```

通过查看 WEBLOGIC 中分解的 WAR 文件确认钩子 portlet 具有正确的内容，在我的服务器上它位于此处并目视检查了文件：

```
tmp/_WL_user/xxxMYPROJECTxxx/xxxxx/war/META-INF/custom_jsps/html/portlet/login/login.jsp 
```

*到目前为止 - 看起来不错！*

确认**在**部署挂钩 portlet 之前仅存在以下文件（使用旧登录名）：

```
tmp/_WL_user/liferay-portal-6/xxxxx/war/html/portlet/login/login.jsp 
```

*再次 - 看起来不错！*

现在这是有趣的地方，确认部署钩子 portlet**后**存在以下文件：

```
tmp/_WL_user/liferay-portal-6/xxxxx/war/html/portlet/login/login.jsp
tmp/_WL_user/liferay-portal-6/xxxxx/war/html/portlet/login/login.portal.jsp 
```

**问题：**这两个文件都是旧副本，由于某种原因，login.jsp 不包含我所期望的钩子副本。这是一个缺陷还是需要做一些特殊的事情才能使其在 Weblogic10 中工作？

# javascript - 如何为 margin-top 分配最大限制

> ID：12627332
> 
> 赞同：0
> 
> 时间：2012-09-27T17:54:46.200
> 
> 标签：javascript, jquery, html, css

我有一个 div 浮动在页面的右侧。使用插件，当窗口垂直滚动时它会上下移动。

```
 upwards
        ^
        |
        |

-------------------
|                  |
|   The scrollable |
|      DIV         |
|                  |   
--------------------
        |
        |

     downwards 
```

可滚动的 DIV 就像一个购物车摘要框。问题是，当滚动时，div 会一直向下滚动，直到您继续滚动。我想为它设置一个动态的最大边距顶部。滚动发生是因为它的 margin-top 发生了变化。无论如何，我可以限制这种情况发生吗？页面左侧包含其他可以缩小或扩大的元素。我希望根据父 div 的高度调整最大可滚动高度。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:58:04.863

好吧，如果不发布一些代码，几乎不可能告诉你如何解决这个问题。

我建议你使用[jQuery Stick'em](http://viget.com/inspire/jquery-stick-em)来实现这一点

# matlab - 在 MATLAB 中可视化高斯混合模型集群

> ID：12627338
> 
> 赞同：6
> 
> 时间：2012-09-27T17:55:03.730
> 
> 标签：matlab, plot, cluster-analysis, classification, visualize

我必须编写一个分类器（高斯混合模型）来用于人类动作识别。我有 4 个视频数据集，每个数据集都包含我想要识别的 12 个动作。我选择其中 3 个作为训练集，其中 1 个作为测试集。对于每一帧，我提取了 907 个特征，这些特征是我的观察结果。在我将 GM 模型应用于训练集之前，我在其上运行 PCA。所以我只考虑 50 个组件。

我用每个动作的一个集群构建了 GM 模型。

```
gm = gmdistribution.fit(data, cluster_num, 'Options', options, 'CovType','diagonal','Regularize', 1e-10, 'SharedCov', true); 
```

现在我想要一个视觉反馈来了解聚类是否运作良好或数据是否被错误分类。

有没有可能有这样的东西？ ![在此处输入图像描述](../Images/b0e9d34c9ff21753a1e8196b5c490333.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T21:50:44.720

我不接近我为制作这些而编写的代码，但我记得哪些函数值得一看。

从这里开始[plot_gaussian_ellipsiod](http://www.mathworks.com/matlabcentral/fileexchange/16543-plotgaussianellipsoid)。您可以进一步添加`gmdistribution`并`ezcontour`最终得到如下内容：

![在此处输入图像描述](../Images/184996b831e6f0426cd1691ccad3b854.png)

或者，对于 3d 数据，您可以使用`plot3`and `plot_gaussian_ellipsiod`：

![在此处输入图像描述](../Images/9d6074ddf6cb981db9fc1cefbf4e35aa.png)

# internet-explorer-8 - IE8 无法通过 SVGWeb 插件正确渲染 SVG 文件

> ID：12627339
> 
> 赞同：0
> 
> 时间：2012-09-27T17:55:09.260
> 
> 标签：internet-explorer-8, svg, svgweb

我有一个在 Adob​​e Illustrator 中制作的 SVG。

我已使用格式将其直接粘贴到页面中

```
 <script type="image/svg+xml">
      // paste from <svg version="1.1"...
      // to </svg>
      // .AI files have an XML statement and DOCTYPE that I leave off
 </script> 
```

然后代码设法在页面上呈现图像。

问题是 IE8 版本看起来有点不对劲。

关于正确的导出设置，我可以做些什么来告诉 IE8 加紧处理？

我在想的事情是，自从设计师将其保存为 SVG 后，可能存在某种退化，然后当我要求更改文件时，打开 SVG 并重新保存（而不是从 AI 文件中导出）主要资源）。 **编辑**这并没有解决问题。

我会尝试将其作为我的第一道防线——但如果有人有其他建议，我很想听听。

我还尝试了 AMPLE svg 插件作为替代方案（结果很搞笑，更糟）

![使用 SVGWEB 渲染的 Chrome 和 IE8 中的 SVG](../Images/78f33a5e8aae49987fb1b288b1336d68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:56:48.603

SVGWeb 不支持 stroke-dasharray，这就是为什么所有的虚线都显示为实线。Adobe Illustrator 中没有解决此问题的导出设置。唯一的选择是为每个破折号创建一个单独的元素（我一想到这个就畏缩了）。

我建议回退到位图 .png。

# c++ - 使用递归打印垃圾的加法

> ID：12627341
> 
> 赞同：1
> 
> 时间：2012-09-27T17:55:19.483
> 
> 标签：c++, recursion

我有这段非常小的代码。但它给了我垃圾值而不是正确的答案。在 mvs 2010 上工作。该程序也不会正常终止。

```
 long  sumsq_diff (int arr1[],int size1, int arr2[],int size2, int i)
{
    if(i < size2)
    {
        return ( (arr1[i]-arr2[i]) * (arr1[i]-arr2[i]) ) + 
                sumsq_diff (arr1,size1,arr2,size2, i + 1) ;
    }
    else 
        return 0 ;
}

int main ()
{
     const int size1 = 5 ;
     const int size2 = 5 ;
     int arr1 [size1] = {1, 2, 3, 4, 5} ;
     int arr2 [size2] = {0, 0, 0, 0, 0} ;
     int ans =  sumsq_diff (arr1,size1,arr2, size2, 0) ;
     cout << ans ;
     return 0 ;
} 
```

谢谢。

# sql - Oracle SQL - 按日期连接多个查询

> ID：12627347
> 
> 赞同：0
> 
> 时间：2012-09-27T17:55:38.530
> 
> 标签：sql, oracle

我有这个大查询，我在下面加入了五个查询：

```
--Combined Daily Actions Per Revenue Source-- 
SELECT Two.the_date, 
       sp_dau, 
       cs_dau, 
       tapjoy_ios_dau, 
       tapjoy_android_dau, 
       appcircle_ios_dau, 
       appcircle_android_dau, 
       freecause_dau, 
       portal_dau 
FROM   (SELECT Trunc(Cs.create_dtime) AS The_Date, 
               Count(DISTINCT CASE 
                                WHEN Cs.cs_listing_id LIKE '99999999%' THEN 
                                ( Cs.player_id ) 
                              END)    AS Sp_Dau, 
               Count(DISTINCT CASE 
                                WHEN Cs.cs_listing_id NOT LIKE '99999999%' THEN 
                                ( Cs.player_id ) 
                              END)    AS Cs_Dau 
        FROM   player_chkin_cs Cs 
        WHERE  Trunc(Cs.create_dtime) >= To_date('2012-Jan-01', 'yyyy-mon-dd') 
        GROUP  BY Trunc(Cs.create_dtime)) One 
       INNER JOIN (SELECT Trunc(Tap.create_dtime) AS The_Date, 
                          Count(DISTINCT CASE 
                                           WHEN ( Play.uuid LIKE 'i~%' ) 
                                                 OR ( Play.uuid LIKE 'ti~%' ) 
                                         THEN 
                                           Tap.player_id 
                                         END)     AS Tapjoy_Ios_Dau, 
                          Count(DISTINCT CASE 
                                           WHEN ( Play.uuid LIKE 'a~%' ) 
                                                 OR ( Play.uuid LIKE 'ta~%' ) 
                                         THEN 
                                           Tap.player_id 
                                         END)     AS Tapjoy_Android_DAU 
                   FROM   player_tapjoy Tap 
                          INNER JOIN player Play 
                                  ON Tap.player_id = Play.player_id 
                   WHERE  Trunc(Tap.create_dtime) >= 
                          To_date('2012-Jan-01', 'yyyy-mon-dd') 
                   GROUP  BY Trunc(Tap.create_dtime)) Two 
               ON One.the_date = Two.the_date 
       INNER JOIN (SELECT Trunc(Aux.create_dtime) AS The_Date, 
                          Count(DISTINCT CASE 
                                           WHEN ( Play.uuid LIKE 'i~%' ) 
                                                 OR ( Play.uuid LIKE 'ti~%' ) 
                                         THEN 
                                           Aux.player_id 
                                         END)     AS Appcircle_Ios_Dau, 
                          Count(DISTINCT CASE 
                                           WHEN ( Play.uuid LIKE 'a~%' ) 
                                                 OR ( Play.uuid LIKE 'ta~%' ) 
                                         THEN 
                                           Aux.player_id 
                                         END)     AS AppCircle_Android_DAU 
                   FROM   player_aux_pt Aux 
                          INNER JOIN player Play 
                                  ON Aux.player_id = Play.player_id 
                   WHERE  Aux.site = 'AppCircle' 
                          AND Trunc(Aux.create_dtime) >= 
                              To_date('2012-Jan-01', 'yyyy-mon-dd') 
                   GROUP  BY Trunc(Aux.create_dtime))Three 
               ON Two.the_date = Three.the_date 
       INNER JOIN (SELECT Trunc(Aux.create_dtime)       AS The_Date, 
                          Count(DISTINCT Aux.player_id) AS FreeCause_DAU 
                   FROM   player_aux_pt Aux 
                   WHERE  Aux.site = 'ext : freecause' 
                          AND Trunc(Aux.create_dtime) >= 
                              To_date('2012-Jan-01', 'yyyy-mon-dd') 
                   GROUP  BY Trunc(Aux.create_dtime))Four 
               ON Three.the_date = Four.the_date 
       INNER JOIN (SELECT Trunc(Aux.create_dtime)       AS The_Date, 
                          Count(DISTINCT Aux.player_id) AS Portal_DAU 
                   FROM   player_aux_pt Aux 
                   WHERE  ( Aux.site = 'Portal : Promotion' 
                             OR Aux.site = 'Portal : RadiumOne' 
                             OR Aux.site = 'Portal : Paymentwall' 
                             OR Aux.site = 'Portal : TrialPay' ) 
                          AND Trunc(Aux.create_dtime) >= 
                              To_date('2012-Jan-01', 'yyyy-mon-dd') 
                   GROUP  BY Trunc(Aux.create_dtime)) Five 
               ON Four.the_date = Five.the_date 
```

大多数子查询的范围是从`2012-Jan-01`到当前日期，除了一个只有从`09-Jul-12`到现在的数据。

因此，当我运行此查询时，结果中的第一个日期是`09-Jul-12`and not `01-Jan-12`。

我怎样才能得到从 开始的结果`Jan 01`，除了一个查询之外的所有查询都有相关数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:07:18.520

您的问题是日期因为不匹配而退出。你的问题的答案是`LEFT OUTER JOIN`而不是`INNER JOIN`。这将保留第一个表（连接的左侧）中的所有行，以及下一个表中的任何匹配信息。如果没有匹配，则所有值都变为 NULL。

假设第一个表包含您想要的所有日期，然后在所有后续查询中更改连接。

如果你想用 0 代替 NULL，那么`coalesce()`在`select`子句中使用来转换它们。

# ipad - 保存图像触摸菜单随 iOS6 网络应用程序一起消失。

> ID：12627350
> 
> 赞同：3
> 
> 时间：2012-09-27T17:55:47.563
> 
> 标签：ipad, safari, ios6, iphone-web-app

**随着 iOS6 的更新，当用户在启用了apple-mobile-web-app-capable**的网站中时，“保存图像”触摸弹出菜单现在消失了。[这对我的网站http://2048px.com](http://2048px.com)非常重要。

我们希望用户能够将网站添加到他们的主屏幕。用户获取新壁纸的方式是点击下载按钮，然后使用保存图像触摸菜单将其保存到他们的相机胶卷中。但就像我说的，在 iOS6 中，当使用 web 应用程序时，“保存图像”选项似乎消失了。

有谁知道一些神奇的元标签可以重新打开它？或者也许是一种将图像直接保存到相机胶卷的奇特方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:21:56.060

虽然我从未找到恢复保存图像按钮的解决方案，但我确实找到了解决方案。我注意到如果我在新选项卡中打开一个链接并且链接的 url 是一个外部域，则该链接将在 Safari 而不是 webapp 中打开。在我的网站上，我所有要下载的图片现在都托管在 S3 的外部域上。然后，仅当网站处于 webapp 模式时，我才会在新选项卡中打开下载链接。我使用以下代码完成此操作。

```
if (window.navigator.standalone) {
    $('a.download').attr({target:'_blank',href:orig_download});
} 
```

# javascript - 从javascript中的地理位置获取数据

> ID：12627351
> 
> 赞同：0
> 
> 时间：2012-09-27T17:55:48.230
> 
> 标签：javascript, function, variables, global

我正在编写地理定位脚本，但无法获取函数的内容。

有人可以帮助我吗？

代码如下所示：

```
<script type="text/javascript">
var myvalue1;
navigator.geolocation.getCurrentPosition(function()
{
    myvalue1 = 'test';
    window.myvalue2 = 'demo';
});

console.log(myvalue1);
console.log(window.myvalue2);
</script> 
```

两者都返回未定义，我只是不知道如何提取数据。

希望可以有人帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:59:46.277

我认为您的 getCurrentPosition 没有被调用。将它放在文档就绪事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:00:08.510

试试这个：

```
<script type="text/javascript">

var coords;

function outputPosition()
{
    console.log('(' + coords.latitude + ', ' + coords.longitude + ')');
}

navigator.geolocation.getCurrentPosition(function(position)
{
    coords = position.coords;
    outputPosition();
});

/*
    coords will still be undefined here because the callback function
    for getCurrentPosition has not been called yet.
*/

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:00:49.973

是异步调用。试试这个

```
<script type="text/javascript">
var myvalue1;
navigator.geolocation.getCurrentPosition(function()
{
    myvalue1 = 'test';
    window.myvalue2 = 'demo';
    console.log(myvalue1);
    console.log(window.myvalue2);
});

</script> 
```

# ios - 多文档 Windows Xcode

> ID：12627353
> 
> 赞同：1
> 
> 时间：2012-09-27T17:55:54.653
> 
> 标签：ios, xcode

有谁知道如何在 Xcode 中打开多个文档窗口？我觉得这是一个愚蠢的问题，因为像这样基本的东西应该包含在 Xcode 中，但我似乎无法弄清楚如何启用此功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:00:31.690

没有确切的答案，但您可以考虑使用[AppKiDo](http://appkido.com/)作为额外的文档浏览器。

截屏：

![AppKiDo](../Images/73ac3384af1edcf52dafa71e0490c967.png)

# c - 如何在循环后使用 goto 和 run 语句来结束两个循环？

> ID：12627354
> 
> 赞同：0
> 
> 时间：2012-09-27T17:55:55.730
> 
> 标签：c, goto

我需要一些想法来尝试使这个程序更具可读性。我认为这更多的是关于设计师的问题。

我有两个循环：

```
for( ... ) {
  //... 
   for(...) {
     if(baa) {
       goto outer;
      } 
      //statements of 2-loop
    }
     //statements of 1-loop
} 
```

它工作正常，如果`baa`具有非零值，则跳转到`outer`没有循环 1 和 2 的运行状态的标签。但在之前，如果被调用`return`，我需要做一些`free()`独立`goto outer`的调用：

```
 if(a != NULL) free(a);
 if(b != NULL) free(b); 
```

但是如果我在这里，因为`goto`，上面的代码不会被调用。

我需要执行以下操作：

```
 goto outer; //if normally exited from two-loops, go to outer anyway.

    outer: {
     if(a != NULL) free(a);
     if(b != NULL) free(b);
        return ret;
    } 
```

是什么让这个函数变成了这样：

```
char* foo(void) {
  char *ret = NULL;

  for( ... ) {
    //... 
    for(...) {
     if(baa) {
        ret = tmp_result;
        goto outer;
      } 

       //some statements of 2-loop
     }
       //some statements of 1-loop
    }

  goto outer;

  outer: {
     if(a != NULL) free(a);
     if(b != NULL) free(b);
         return ret;
  }
} 
```

我希望这很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:10:00.463

该`outer`标签被正常的控制流忽略，它仅用作 的目标`goto`，因此循环后不需要它。此外，无需将标签后的语句分组为复合语句，

```
char* foo(void) {
  char *ret = NULL;

  for( ... ) {
    //... 
    for(...) {
     if(baa) {
        ret = tmp_result;
        goto outer;
      } 

       //some statements of 2-loop
     }
       //some statements of 1-loop
    }

  outer:
     if(a != NULL) free(a);
     if(b != NULL) free(b);
     return ret;
} 
```

完全一样（而且 IMO 对眼睛更好一些）。

# c# - Ebay API 在 C# 上的速度

> ID：12627355
> 
> 赞同：0
> 
> 时间：2012-09-27T17:55:58.757
> 
> 标签：c#, asp.net, ebay-api

我开发了一个 C# ebay 应用程序，它使用 ebay 查找 API 按关键字搜索 ebay 项目。我在 WinForms 中完成了一项，在 ASP.NET 中完成了一项（两者功能相同）。

只能检索 10000 个项目（实际上是前 10000 个，因为您最多有 100 页，每页最多 100 个项目）。吨

WinForms App 下载所有项目大约需要 6 分钟，而 ASP.NET 大约需要 4 分半钟。

我有一个使用 Ebay Blackthorne 软件的朋友，他说用它上传 30000 个项目大约需要 2-3 天（尽管我知道它是使用交易 API 实现的）。

我的问题是如何在 Windows 平台上加速您的 ebay 应用程序——多线程是否会使其更快（毕竟它是一个网络绑定的 I/O），交易 api 是否比查找 api 更快？

当一个人使用 android 的 ebay 应用程序时，即使是 3g 连接，当您键入搜索表达式时，它似乎几乎会立即显示所有内容。这可以在 C# 中完成吗？

我还没有下载 Ebay Windows SDK，但我直接将 Web 引用添加到我的项目中。

该应用程序也在 Virtual Box 中运行，我的互联网速度（维珍宽带）是下载：高达 1MB/s（兆字节）和上传：高达 100KB/s。

我所做的是获取有关项目的信息，将其转换为字符串并将其附加到富文本框中，在所有搜索完成后它变得可见。

同样，任何关于如何加速和详细说明原生 ebay 应用程序如何工作的细节将不胜感激>>>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:04:28.650

根据您使用的参数，Finding API 的速度可能会有所不同。

例如，如果您只搜索关键字“蓝色牛仔裤”，您会发现响应时间比结合正确类别 ID 搜索“蓝色牛仔裤”要慢得多。通常，查询范围越广，响应越慢。

由于 100 个项目 x 100 个页面的限制，您已经不得不执行多个调用，因此稍微缩小搜索查询范围应该可以让您更快地使用 Finding API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:00:50.553

对于需要更新大量商品的大型卖家，eBay 提供大型商家服务：

[http://developer.ebay.com/DevZone/large-merchant-services/Concepts/LMS_APIGuide.html](http://developer.ebay.com/DevZone/large-merchant-services/Concepts/LMS_APIGuide.html)

有了这个，您可以传输压缩的 XML 文件。

# ios - UIView 未在 UITableViewCell 内调整大小

> ID：12627360
> 
> 赞同：1
> 
> 时间：2012-09-27T17:56:38.100
> 
> 标签：ios, uiview, uitableview

我有一个自定义 UITableViewCell 有两个元素。一个 UIView 和一个 UILabel。该单元格用于投票，因此我希望能够根据投票更改 UIView 的尺寸。我目前正在 cellForIndexAtPath 方法中设置 UIView 的框架。UIView 的框架正在更改更正（因为我正在检查 3 个位置以确保使用 NSLogs），但在它们显示在屏幕上后没有反映在单元格上。有谁知道为什么 UIView 的框架会说它已经改变但是在显示时它会保持在单元格的框架大小？

## 编辑

```
NSLog(@"before: %@",NSStringFromCGRect(cell.voting_scale.frame));
[cell.voting_scale setFrame:CGRectMake(0.0, 0.0, width, row_dim.height+10.0)];
[cell.voting_scale setBounds:CGRectMake(0.0, 0.0, width, row_dim.height+10.0)];
[cell.voting_scale setClipsToBounds:true];
NSLog(@"after: %@",NSStringFromCGRect(cell.voting_scale.frame)); 
```

希望这有助于更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:13:55.827

我对 UITableView 的幕后流程没有透彻的了解，但我发现当我的 UITableViewCell 子类似乎没有按预期工作时，我会尽可能多地将代码移动到 layoutSubviews子类的方法而不是在 UITableViewController 的 cellForRowAtIndexPath 中调用它会有所帮助。

# ruby - 在 Ruby 代码中查找未使用的结构的工具？

> ID：12627365
> 
> 赞同：1
> 
> 时间：2012-09-27T17:56:56.203
> 
> 标签：ruby, code-analysis

任何人都可以向我指出一个工具来检测 Ruby 代码中未使用的代码、对象、方法、参数等吗？

我看到了，`nitpick`但它似乎没有给我想要的报道。我也检查了`laser`，`reek`但它们各自的 gem 似乎存在阻止它们运行的​​问题。

我曾一度认为 Ruby 二进制文件有一种模式可以检测未使用的构造，但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:01:07.617

如果我们对您希望如何“检测未使用的代码”有更多的了解可能会有所帮助-您正在研究的测试的代码覆盖率是多少？否则，你怎么知道你是否打了所有的用例？或者您是否出于性能原因而寻找随时间推移的覆盖范围的统计“热图”？

无论如何，对于测试时的代码覆盖率，我使用[SimpleCov](https://github.com/colszowka/simplecov) - 它使用 Ruby 1.9 的内置[Coverage](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/coverage/rdoc/Coverage.html)库，顶部有一些不错的糖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:15:48.733

您还可以使用突变测试器来改变您的代码。如果突变测试人员可以在您的测试没有注意到的情况下删除一个构造。您找到了一个未使用的构造。

我知道两个红宝石突变测试仪：

*   [赫克尔](https://github.com/seattlerb/heckle)
*   [突变体](https://github.com/mbj/mutant)

免责声明，我是变种人的作者。

根据您的设置，您的 ruby​​ 版本、规范布局、测试框架 heckle 和/或突变可以为您完成这项工作。

在这里你可以看到变种人的行动：[http ://ascii.io/a/1707](http://ascii.io/a/1707)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:01:51.110

JetBrains RubyMine [http://www.jetbrains.com/ruby/quickstart/index.html](http://www.jetbrains.com/ruby/quickstart/index.html)

# php - 像编辑主机文件一样用 php 更改 DNS？

> ID：12627378
> 
> 赞同：1
> 
> 时间：2012-09-27T17:57:40.427
> 
> 标签：php, apache, dns

我不知道如何更好地表达这一点，主要是因为我真的不知道 DNS 是如何完全工作的。

给定一个 URL 和一个 IP，是否可以告诉 PHP 以给定的 URL 而不是真正的 DNS 向该 IP 发出所有请求（就像您在本地编辑主机文件一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:02:21.547

我看到的唯一解决方案是运行您自己的绑定服务器，并告诉您的客户使用您的绑定服务器。然后，您可以完全控制如何将名称路由到 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:02:58.083

不幸的是，你的情况是你的客户一时兴起。

如果他们在浏览器中输入 IP 地址，它将起作用，如果他们输入尚未在 DNS 或主机文件中设置的域，它将永远无法到达您控制的服务器。

如果您正确设计了您的网站，那么他们是否通过域名或 IP 地址访问它可能真的无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:11:35.780

我认为这是 apache 通过 .htacess 或其他配置文件所做的。这不是对 DNS 的“更改”，而是一种根据需要管理每个请求的方法，即使使用唯一且通用的 .php 文件也是如此

# android - Androids NDK 没有 SUN_LEN 宏

> ID：12627382
> 
> 赞同：2
> 
> 时间：2012-09-27T17:58:13.680
> 
> 标签：android, android-ndk

今天我遇到了麻烦 - android的ndk没有SUN_LEN宏（sys/un.h || linux/un.h），我不想修补android的头文件，怎么办更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T19:09:27.557

不要修补标题，在您自己的文件中定义它。

```
#ifndef SUN_LEN //In case they fix it down the road
#define SUN_LEN(ptr) ((size_t) (((struct sockaddr_un *) 0)->sun_path) + strlen((ptr)->sun_path))
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T14:31:44.147

SUN_LEN 宏是不可移植的（也不是 POSIX 标准的一部分）扩展。
使用它是完全安全的`sizeof(struct sockaddr_un)`。

# javascript - 是否可以从严格的代码中更改标识符“eval”的值？

> ID：12627385
> 
> 赞同：2
> 
> 时间：2012-09-27T17:58:17.213
> 
> 标签：javascript, theory

严格模式提供的保证之一是，在严格函数代码中，标识符`arguments`始终引用该函数的 Arguments 对象。

```
function fn () { 
    'use strict';

    // malicious code

    arguments // still refers to the function's Arguments object
} 
```

因此，无论在 处注入什么代码，在整个函数调用期间`// malicious code`，标识符都会不可变地绑定到函数的 Arguments 对象。`arguments`

我想知道是否为标识符提供了相同的保证`eval`，即`eval`带有保证的标识符是否始终引用内置的全局`eval`函数？

我想指出，如果我们的严格代码嵌套在非严格代码中，*则不提供上述保证。*允许非严格代码创建本地`"eval"`绑定，或改变全局`"eval"`绑定。（此外，如果另一个非严格程序使用相同的全局对象（如在包含多个脚本的网页中），则也不提供上述保证。）

所以，为了这个问题，我想定义以下场景：

*   我们的程序是独立的，即它不与任何其他程序共享其全局对象，
*   我们的程序由一个严格的 IIFE 组成，如下所示：

    ```
    (function () {
        'use strict';

        // malicious code

        eval // does it still refer to the built-in global eval function? 

    }()); 
    ```

鉴于这些条件，是否可以在 处注入代码`\\ malicious code`，这会改变`eval`标识符的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:07:22.790

根据附件 C，理论上应该不可能将`eval`标识符重新分配给全局对象的属性以外的东西，或者用局部变量对其进行屏蔽：`eval`

> 标识符 eval 或 arguments 不能显示为赋值运算符 (11.13) 或 PostfixExpression (11.3) 的 LeftHandSideExpression 或由前缀增量 (11.4.4) 或前缀减量 (11.4.5) 运算符操作的 UnaryExpression .

...

> 如果标识符“eval”或标识符“arguments”作为包含在严格代码中的 PropertyAssignment 的 PropertySetParameterList 中的标识符出现，或者如果其 FunctionBody 是严格代码 (11.1.5)，则为 SyntaxError。

...

> 如果标识符 eval 或 arguments 出现在严格模式 FunctionDeclaration 或 FunctionExpression (13.1) 的 FormalParameterList 中，则为 SyntaxError

...等等。

* * *

如下所述，可以通过为全局对象的该属性分配一个新值来更改全局 eval 函数。`eval`可以通过在严格模式下间接调用来获得对全局对象的引用：

```
var glob = (0,eval)('this'); 
```

您可以将其扩展到在非严格模式下也能可靠工作的东西：

```
var glob = (function(){ return this || (0,eval)('this') }()); 
```

...然后将其`eval`属性分配给其他东西。

虽然`eval`仍然与`eval`全局对象的属性相同，但它不再是内置的`eval`，应该满足您的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:05:10.753

不，据我所知，您不能在严格模式下覆盖本机 eval 函数。下面的代码将给出以下错误。`SyntaxError: Assignment to eval or arguments is not allowed in strict mode`

```
(function () {
   'use strict';
   eval = function(){ console.log('eval invoked'); }  
   eval();  
}()); 
```

# c - 将链表节点插入升序排序单链表 GCC 错误：取消引用指向不完整类型的指针

> ID：12627387
> 
> 赞同：0
> 
> 时间：2012-09-27T17:58:26.450
> 
> 标签：c, gcc, struct, linked-list

我正在尝试将节点插入到按升序排序的链表中的正确位置（按顺序）。我不断收到 GCC 错误“错误：取消引用指向不完整类型的指针”。我一直在处理这个 stackoverflow[帖子](https://stackoverflow.com/questions/10050336/adding-and-sorting-a-linked-list-in-c)中的代码。下面是我的代码：

```
typedef struct sNode  {         
   int sid;
   struct sNode *next;
 }sNode;

sNode* addsNode (struct sNode *headPtr, int pSid)    
{             
      struct sNode *ptr, *root = headPtr;          
      ptr = malloc (sizeof(struct sNode));         

      if(headPtr == NULL){ //In other code I've already check for a NULL list, pointer                        
             ptr->sid = pSid;
      }
      else{                 
           while(headPtr->next != NULL && headPtr->next->sid < pSid){                 
           //while(headPtr->next != NULL){   --> Compiles when uncommented

           headPtr = headPtr->next;                 
           }//while                 
           ptr->sid = pSid;   

      }//else

 return root;
}//addsNode 
```

我正在尝试返回一个指向列表前面的指针，以便在返回后可以进行其他链表操作。我一直在对 StackOverflow 进行一些研究，听起来它指的是导致问题的结构 sNode。我看过关于使用 typedef 声明结构的不同帖子。所以我已经尝试过使用和不使用 typedef 来声明它。我也看到过建议#include & 的帖子，但这也没有用。我正在使用 GCC 4.6.3 任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:59:40.413

```
typedef struct sNode  {         
   int sid;
   struct sNode *next;
 }; 
```

您必须`typedef`将结构命名为某个名称，

```
typedef struct sNode  {         
   int sid;
   struct sNode *next;
 } sNode; 
```

例如。没有你 typedef 它的名字，无论如何它都是无效的，并且类型仍然必须用`struct`关键字来引用。

# android - Android 自定义 ListAdapter - 秒表

> ID：12627389
> 
> 赞同：2
> 
> 时间：2012-09-27T17:58:32.400
> 
> 标签：android

我做简单的秒表。

我有 StopwatchActivity.java

我有 ListAdapter 但我需要设置自定义字体。

怎么做？我正在寻找示例，但找不到带有“字符串”的

有用。

代码： http: [//pastebin.com/zgA0f0jq](http://pastebin.com/zgA0f0jq)

致版主：当我需要在此处粘贴代码时出现错误“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的场景。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:02:05.667

[在此处](http://codinglookseasy.blogspot.in/2012/08/localization-using-ttf-files.html)检查此示例

你需要给它充气，这样你就可以用你需要的字体来设置文本。我可以建议您使用 baseadapter，以便您可以获取 textview 并将字体设置为它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:04:26.040

您可以为 xml 中的每个 TextView 设置字体，如下所示：

```
<TextView 
android:id="@+id/button2"
android:layout_height="wrap_content" 
android:layout_width="wrap_content"
android:typeface="sans" /> 
```

# javascript - Ember 数据：在一个请求中保存具有关联的模型

> ID：12627390
> 
> 赞同：12
> 
> 时间：2012-09-27T17:58:37.673
> 
> 标签：javascript, rest, ember.js, ember-data

我有两个具有这样关系的 ember 模型

```
App.Foo = DS.Model.extend
   bar: DS.belongsTo("App.Bar", embedded: true)

App.Bar = DS.Model.extend
   primaryKey: "blah"
   blah: DS.attr "string 
```

如果我创建并保存这样的新记录：

```
foo = App.store.createRecord App.Foo
foo.set "bar", App.Bar.createRecord(blah: "blahblah")
App.store.commit() 
```

我看到对服务器的 2 个发布请求：

```
URL: /foos
Payload: {"foo":{"bar":null}} 
```

和

```
URL: /bars
Payload: {"bar":{"blah":"blahblah"}} 
```

该关联是嵌入的，所以我想看看：

```
URL: /foos
Payload: {"foo":{"bar":{"blah":"blahblah"}}} 
```

我可以使用 ember-data REST 适配器来实现这一点，还是我需要编写自己的代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:11:16.203

我在我的应用程序中观察到相同的行为。将 'embedded' 设置为 true 只会帮助您获取嵌入的数据，但在您发布数据时会生成单独的请求。如果您想在一个请求中实现它，您已经编写了您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T18:17:49.550

这不是您问题的直接答案，但值得我发现，通过尝试一次保存多个模型来“对抗”Ember 的设计让我走上了一条可怕的道路。

`Bar`为新对象添加所需的属性，`Foo`然后在服务器上创建并返回新对象，这样更容易、更可靠，如下所示：

```
App.Foo = DS.Model.extend({
  blah: DS.attr('string'),
  barName: DS.attr('string'),
  bar: DS.belongsTo('bar')
})

this.store.createRecord('foo', { blah: "stuff", barName: "foo" }).save()

# => POST /foos

Request:
{ foo: { blah: "stuff", bar_name: "boo" } }

Response:
{ foo: { id: 1, blah: "stuff", bar: { id: 1, name: "boo" } } } 
```

是的，你最终得到了一个未使用的属性 on `Foo`，但是你为自己节省了很多代码。

# java - 如何使用 log4j 每 20 次记录事件？

> ID：12627392
> 
> 赞同：0
> 
> 时间：2012-09-27T17:58:43.190
> 
> 标签：java, logging, log4j

我有一个循环。我希望每执行 20 (100) 次查看一些日志。到目前为止，我有一些相当复杂的代码来做到这一点，

```
for( int i = 0; i < aValues.length; ++i )
{
    if( c_LOG.isTraceEnabled() && ( ( i % 20 ) == 0 ) )
    {
        c_LOG.trace( "Converted item (" + i + ") " );
    }
    .....
} 
```

这段代码可以满足我的要求，但是代码很长（4 行），并且类似的代码出现了很多次。我不能将它打包到一个方法中，因为这会在日志输出中搞砸方法名称。( `log4j.appender.console.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{3}:(%M %L) %m%n`) 有什么好的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:05:50.767

最简单的解决方案是重构：

```
 for (int i = 0; i < aValues.length; ++i) {
        if (shouldLog(i)) {
            c_LOG.trace("Converted item (" + i + ")");
        }
        ....
    } 

    ....

public boolean shouldLog(int n) {
    return shouldLog(n, 20);
}

public boolean shouldLog(int n, int mod) {
    return c_LOG.isTraceEnabled() && ((n % mod) == 0);
} 
```

# ruby-on-rails - Rails 中最后一个方法的问题

> ID：12627399
> 
> 赞同：3
> 
> 时间：2012-09-27T17:58:54.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

让我先说我是 Rails 新手，所以我将尽力解释这一点。作为参考，请参阅此线程，该线程准确描述了发生在我身上的事情，但修复似乎不起作用。

[Rails 3.2 中的限制方法和哈希排序问题](https://stackoverflow.com/questions/9430201/problems-with-limit-method-in-rails-3-2-and-hash-ordering)

我有一个数据库，其中包含我试图按主键“id”排序的事件。我尝试在此处对可排序表列进行 Railscast 操作：

[http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)

排序工作正常，但排序发生在整个列上，而不仅仅是“最后 50 个”。

控制器代码：

```
def index
  @events = Event.order(sort_column + " " + sort_direction).page(params[:page]).last(50)
  @events = @events.sort_by(&:id)
  @events = Kaminari.paginate_array(@events).page(params[:page]).per(10)
end

def sort_column
  Event.column_names.include?(params[:sort]) ? params[:sort] : "event_id"
end

def sort_direction
  %w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"
end 
```

应用程序助手：

```
 def sortable(column, title = nil)
  title ||= column.titleize
  direction = column == sort_column && sort_direction == "desc" ? "asc" : "desc"
  link_to title, :sort => sort_column, :direction => direction
end 
```

最后，在索引视图中，我这样称呼它：

```
<th><%= sortable  "event_id" %></th> 
```

很抱歉，如果这个问题已经得到解答，任何关于这个主题的帮助将不胜感激。

**编辑**

感谢您的快速回复。我明白你在那里做了什么，但现在我在我的索引视图中由于某种原因得到了一个例外。

```
 undefined method `id' for #<Array:0x00000004170c10>

Extracted source (around line #25):

22:   <tbody>
23:     <% @events.each do |event| %>
24:       <tr>
25:         <td><%= link_to event.id, event_path(event) %></td>
26:         <td><%= event.event_date_time_local %></td>
27:         <td><%= EventType.find(id =    event.event_type_id).event_type %></td>
28:         <td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:05:02.063

您说的是“而不是最后 50 个”，但这就是您要返回的全部内容。根据 sort_column 和方向排序后找到的最后 50 个项目。

```
@events = Event.order(sort_column + " " + sort_direction).page(params[:page]).last(50)
#Sorted the last 50 by sort_column and direction

@events = @events.sort_by(&:id)
#sorted again by id and lost the first sort 
```

要获取所有事件，然后对最后五十个进行排序，您可以这样做

```
@events = Event.order(sort_column + " " + sort_direction).page(params[:page])
last_fifty = @events.pop(50) # remove last 50 and return it

@events << last_fifty.sort_by(&:id) # insert last fifty back sorted by id 
```

**编辑：**

对不起，而不是

```
@events << last_fifty.sort_by(&:id) 
```

尝试

```
@events.concat last_fifty.sort_by(&:id) 
```

# python - 计算 Python 脚本中的符号数

> ID：12627401
> 
> 赞同：2
> 
> 时间：2012-09-27T17:59:01.660
> 
> 标签：python, symbols, decompiling

我有一个运行 [Python 1.5.2+] (http://www.roundsolutions.com/techdocs/python/Easy_Script_Python_r13.pdf) 的 Telit 模块！我可以使用的变量、模块和方法名称的数量（< 500）、每个变量的大小（16k）和 RAM 量（~ 1MB）都有一定的限制。有关详细信息，请参阅第 113 和 114 页。我想知道如何获取生成的符号数量、每个变量在 RAM 中的大小、内存使用情况（堆栈和堆使用情况）。

我需要类似于在链接过程之后使用 gcc 生成的映射文件，它向我显示每个常量/变量、符号、其地址和分配的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:38:54.823

Python 是一种解释型和动态类型的语言，因此即使可能，生成这种输出也非常困难。我想获取此信息的唯一合理方法是在目标解释器上分析您的代码。

如果您正在寻找真正的内存映射，我怀疑是否存在这样的工具，因为 Python 不会经历与 C 或 C++ 相同的编译过程。由于在程序被解析和解释时，一切都是在运行时初始化和分配的，所以没有什么可以说一个解释器的行为与另一个解释器相同，*尤其是*在这种情况下，您运行在如此不同的架构上。因此，没有什么可以说您的对象将被创建在相同的位置，甚至具有相同的整体内存结构。

如果您只是想确定内存占用，您可以进行一些手动检查，`sys.getsizeof(object, [default])`前提是 Telit 的库支持它。我不认为他们使用的是 CPython 的直接实现。即使如此，这并不总是有效，并且如果您不指定参数，`TypeError`则无法确定对象的大小时会引发 a。`default`

通过研究`dis`模块的字节码反汇编的输出，您还可能会得到一些有趣的结果，但这假设它`dis`适用于您的解释器，并且您的解释器实际上是作为 VM 实现的。

如果您只需要符号列表，请查看[此配方](http://code.activestate.com/recipes/200638-generate-python-symbol-lists-for-a-programmers-edi/)。它使用反射来转储符号列表。

良好的手动测试是这里的关键。最好的办法是设置模块的 CMUX（COM 端口 MUXing），并观察控制台输出。如果您开始耗尽内存，您会很快知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:08:19.990

This post makes me recall my pain once with Telit GM862-GPS modules. My code was exactly at the point that the number of variables, strings, etc added up to the limit. Of course, I didn't know this fact by then. I added one innocent line and my program did not work any more. I drove me really crazy for two days until I look at the datasheet to find this fact.

What you are looking for might not have a good answer because the Python interpreter is not a full fledged version. What I did was to use the same local variable names as many as possible. Also I deleted doc strings for functions (those count too) and replace with #comments.

In the end, I want to say that this module is good for small applications. The python interpreter does not support threads or interrupts so your program must be a super loop. When your application gets bigger, each iteration will take longer. Eventually, you might want to switch to a faster platform.

# clojure - 在环形应用程序中捕获异常的惯用方法

> ID：12627410
> 
> 赞同：10
> 
> 时间：2012-09-27T17:59:59.820
> 
> 标签：clojure, ring

在环形应用程序中处理异常的惯用方法是什么。我想捕获异常并返回 500 页。我怎么做 ？

我在下面的代码中使用了 mustache，但是它不起作用 -

```
(def my-app (try
              (app
               (wrap-logger true)
               wrap-keyword-params
               wrap-params
               wrap-file-info
               (wrap-file "resources/public/")
               [""]  (index-route @prev-h nil)
               ["getContent"] (fetch-url)
               ["about"] "We are freaking cool man !!"
               [&] (-> "Nothing was found" response (status 404) constantly))
              (catch Exception e
                (app
                 [&] (-> "This is an error" response (status 500) constantly))) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-27T18:22:23.333

您不想将整个应用程序包装在 try-catch 块中，而是希望分别包装每个请求的处理。制作一个这样做的中间件非常容易。就像是：

```
(defn wrap-exception [handler]
  (fn [request]
    (try (handler request)
      (catch Exception e
         {:status 500
          :body "Exception caught"})))) 
```

# c# - Visual C# 数据集到类

> ID：12627411
> 
> 赞同：0
> 
> 时间：2012-09-27T18:00:00.647
> 
> 标签：c#, database, class, dataset

我是一名在 Visual Studios C# 中工作的学生程序员，我正在尝试从我的数据集中访问信息并将数据插入到一个类中。无论如何，这不是家庭作业，我只是有一些我一直想尝试的个人项目。我尝试了本网站上提到的几种方法；但是，不显示任何信息。我的代码与此类似：

```
class MyClass
{
    public string ColumnData1
    {
        get; set;
    }
    public int ColumnData2
    {
        get; set;
    }
    public string Display()
    {
        string MyString = ColumnData1 + ColumnData2.ToString();
        return MyString;
    }
} 
```

我用它来将数据插入到类中：

```
private void MyForm_Load(object sender, EventArgs e)
{
    MyDataSet.MyDataTable MDT = new MyDataSet.MyDataTable();

    List<MyClass> MyList = new List<MyClass>();

    foreach (DataRow MyDataRow in MDT.Rows)
    {
        Mylist.Add(new MyClass()
                   {
                       ColumnData1 = (string)MyDataRow["Data1"],
                       ColumnData2 = (int)MyDataRow["Data2"]
                   {
    } 
```

最后显示信息：

```
 textBox1.Text = Mylist[0].Display();
} 
```

然而，最终什么都没有显示。这也不是我试图显示信息的唯一内容.. 就好像信息不存在一样。我没有收到任何错误，当我尝试在代码的插入部分添加“停止点”时，它只是跳过它。我还应该提到，我有许多文本框和列表框可以很好地从数据库中提取数据，当然 Visual Studios 会为我绑定这些。很感谢任何形式的帮助。

编辑：好的，不包括新数据表。如果我有一个现有的数据集，我将如何使用它来填补我的班级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:05:35.740

在将数据插入 MyList，MyClass 列表之前，您必须在 MDT 中有一些数据。

无数据声明：

```
MyDataSet.MyDataTable MDT = new MyDataSet.MyDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:03:32.483

这很正常，因为`your DataTable is empty`（您的创建实例）

```
MyDataSet.MyDataTable MDT = new MyDataSet.MyDataTable();//<------Empty

foreach (DataRow MyDataRow in MDT.Rows)
{
  ....
} 
```

填充数据集：

```
string queryString = 
  "SELECT .... FROM YourTable";
SqlDataAdapter adapter = new SqlDataAdapter(queryString, connection);

DataSet dataSet = new DataSet();
adapter.Fill(dataSet, "NameOfDataSet"); 
```

# php - 浮动网格样式中的图像翻转

> ID：12627416
> 
> 赞同：1
> 
> 时间：2012-09-27T18:00:17.953
> 
> 标签：php, javascript, css, wordpress, html-lists

我为小部件区域中的链接做了一个简单的翻转（不确定如何做这部分，目前不重要）我正在为此制作的网站位于 www.avuedesigns.com/new 目前在左侧下方横幅内容框，我希望它是那个区域。

这就是我想出的 [http://jsfiddle.net/paDmg/368/](http://jsfiddle.net/paDmg/368/)

所以我的问题是，这会在那个领域工作（执行明智），还是尝试不同的方式？

这也很容易使它成为wordpress的小部件以将其放在该区域中吗？我们的 php 人正在休假 2 周，并试图自己完成这个项目。我相信我能弄清楚，我只需要指出一个方法的方向。

再次这里是翻车：http: [//jsfiddle.net/paDmg/368/](http://jsfiddle.net/paDmg/368/)

也复制粘贴在这里。

CSS

```
ul#hover-grid {
 padding: 0;
 list-style: none;
 margin: 0px auto 0;
 margin-top: 0;
 width: 220px;  
 }

#hover-grid li {
 float: left;
 padding: 2;
 margin: 0 1px 1px 1px;
 } 

#hover-grid .indiv-cell {
 width: 65px;
 height: 65px;
} 
```

​</p>

html

```
 <ul id="hover-grid">

<li class="indiv-cell"><a href="#"><img data-replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/1.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

 <li class="indiv-cell"><a href="#"><img data-replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/2.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

 <li class="indiv-cell"><a href="#"><img data-replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/3.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

 <li class="indiv-cell"><a href="#"><img data-  replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/4.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

 <li class="indiv-cell"><a href="#"><img data-replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/1.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

 <li class="indiv-cell"><a href="#"><img data-replacementimg="http://avuedesigns.com/new/wp-content/uploads/2012/09/2.jpg" src="http://avuedesigns.com/new/wp-content/uploads/2012/09/6.jpg"></a></li>

            </ul>​ 
```

Javascript

```
$('#hover-grid .indiv-cell').hover(function() {

//set variables to current cell attributes
var cellHeader = $(this).attr('data-hoverheader');
var cellText = $(this).attr('data-hovertext');
var replacementImg = $(this).find('a img').attr('data-replacementimg');
var oringinalImg = $(this).find('a img').attr('src');

//save original image to data variable
$(this).data('origImg', oringinalImg);

//add remove classes
$('#hover-grid .indiv-cell').removeClass('newClass');
$(this).addClass('newClass', 1000);
$(this).find('a img').hide().attr('src', replacementImg).fadeIn(300);
$('.master-cell h1').hide().text(cellHeader).fadeIn(300);
$('.master-cell p').hide().text(cellText).fadeIn(300);

//return false;
}, function() {
$(this).find('a img').hide().attr('src', $(this).data('origImg')).fadeIn(10);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:51:29.883

我相信你想把你的 html 变成一个动态的导航菜单，对吧？Wordpress codex[对此进行了设置，您可以在其中构建菜单以匹配您的 html](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。

我认为像这样的一些设置可能会让你开始

```
<?php $defaults = array(
'theme_location'  => 'custom-menu',
'container'       => 'div', 
'menu_class'      => 'indiv-cell', 
'echo'            => true,
'fallback_cb'     => 'wp_page_menu',
'items_wrap'      => '<ul id="hover-grid">%2$s</ul>',
); ?>

<?php wp_nav_menu( $defaults ); ?> 
```

# ios - 为什么在 UITableViewController 中覆盖 loadView 会修复与多个视图控制器关联的 tableView 崩溃？

> ID：12627417
> 
> 赞同：0
> 
> 时间：2012-09-27T18:00:24.653
> 
> 标签：ios, uinavigationcontroller, uitableview, uiapplicationdelegate

当应用程序加载时出现以下错误，我有一个应用程序崩溃（仅在 iOS 6 中）：

```
Application windows are expected to have a root view controller at the end of application launch
*** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time!
View <UITableView: 0xc21a800; frame = (0 20; 320 460); clipsToBounds = YES; opaque = NO; autoresize = W+H; gestureRecognizers = <NSArray: 0xbfb9d50>; layer = <CALayer: 0xbfb9720>; contentOffset: {0, 0}> is associated with <RootViewController: 0xbfbbb40>. Clear this association before associating this view with <RootViewController: 0xbfac010>.' 
```

我的 applicationDidFinishLaunchingWithOptions 看起来像这样：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];

    // Add root nav controller below everything else
    RootViewController *rootViewController = [[RootViewController alloc] initWithStyle:UITableViewStyleGrouped];
    rootViewController.title = @"My App";
    NSArray *sectionNames = [NSArray arrayWithObjects:@"Sec 1", @"Sec 2", @"Sec 3", nil];
    rootViewController.sectionNames = sectionNames;

    UINavigationController *aNavigationController = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    self.navigationController = aNavigationController;

    if ([self.window respondsToSelector:@selector(setRootViewController:)]) {
        self.window.rootViewController = aNavigationController;
    } else {
        [self.window addSubview:aNavigationController.view];
    }

    // Add fake loading image
    NSString* imageName = @"Default-Portrait.png";
    theImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]];
    theImageView.frame = CGRectMake(0,0,320,480);

    [self.window addSubview:theImageView];

    return YES;
} 
```

RootViewController 只是 UITableViewController 的一个子类，除此之外没有其他有趣的东西：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.tableView.delegate = self;
    self.tableView.allowsSelection = YES;
    self.userDefaults = [NSUserDefaults standardUserDefaults];
} 
```

我有一个 .xib 文件，但没有使用它进行初始化，无论该文件是否存在，都会出现此错误。

令人惊讶的是，当我将它添加到 RootViewController 时，错误消失了：

```
- (void)loadView {
    [super loadView];
} 
```

是 [super loadView] 解决了这个问题，我什至不应该这样称呼它。为什么？？

# shader - Three.js 中的自定义纹理着色器

> ID：12627422
> 
> 赞同：32
> 
> 时间：2012-09-27T18:00:35.120
> 
> 标签：shader, textures, three.js, fragment-shader

我只是想创建一个非常简单的片段着色器，它将指定的纹理绘制到网格上。我查看了一些实现相同功能的自定义片段着色器，并构建了我自己的着色器并支持围绕它的 JS 代码。但是，它只是行不通。这是我尝试运行的代码的工作抽象：

**顶点着色器**

```
<script id="vertexShader" type="x-shader/x-vertex">
    varying vec2 vUv;

    void main() {
        vUv = uv;

        gl_Position =   projectionMatrix * 
                        modelViewMatrix * 
                        vec4(position,1.0);
    }
</script> 
```

**片段着色器**

```
<script id="fragmentShader" type="x-shader/x-fragment">
    uniform sampler2D texture1;

    varying vec2 vUv;

    void main() {
        gl_FragColor = texture2D(texture1, vUv); // Displays Nothing
        //gl_FragColor = vec4(0.5, 0.2, 1.0, 1.0); // Works; Displays Flat Color
    }
</script> 
```

**场景代码**

```
<script>
    // Initialize WebGL Renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    var canvas = document.getElementById('canvas').appendChild(renderer.domElement);

    // Initialize Scenes
    var scene = new THREE.Scene();

    // Initialize Camera
    var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 100);
    camera.position.z = 10;

    // Create Light
    var light = new THREE.PointLight(0xFFFFFF);
    light.position.set(0, 0, 500);
    scene.add(light);

    // Create Ball
    var vertShader = document.getElementById('vertexShader').innerHTML;
    var fragShader = document.getElementById('fragmentShader').innerHTML;

    var uniforms = {
        texture1: { type: 't', value: 0, texture: THREE.ImageUtils.loadTexture( 'texture.jpg' ) }
    };

    var material = new THREE.ShaderMaterial({
        uniforms: uniforms,
        vertexShader: vertShader,
        fragmentShader: fragShader
    });

    var ball = new THREE.Mesh(new THREE.SphereGeometry(1, 50, 50), material);
    scene.add(ball);

    // Render the Scene
    renderer.render(scene, camera);
</script> 
```

`texture.jpg`存在，并在映射到 时显示`MeshLambertMaterial`。将我的片段着色器切换为简单的颜色（在代码中注释掉）时，它会正确显示球。

运行它什么都不会显示。我没有得到任何错误，球根本没有出现。

我知道我必须做一些根本错误的事情，但我一直在查看相同的示例，其中这段代码似乎已经工作了几天，我觉得我正在把头撞到墙上。任何帮助，将不胜感激！

编辑：我正在使用 Three.js 修订版 51

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-27T19:38:54.200

您仍在使用制服的旧语法

```
var uniforms = {
    texture1: {
        type: "t",
        value: 0,
        texture: THREE.ImageUtils.loadTexture("texture.jpg")
    }
}; 
```

这是新语法

```
var uniforms = {
    texture1: { type: "t", value: THREE.ImageUtils.loadTexture( "texture.jpg" ) }
}; 
```

# php - php+mysql - Like 不显示所有值

> ID：12627423
> 
> 赞同：0
> 
> 时间：2012-09-27T18:00:34.950
> 
> 标签：php, mysql

我让这个人搜索功能建立了 jquery(json) 和 php，从搜索栏中发送到 php 文档，但它的行为不像我想要的那样。

我不知道 mysql 服务器或 php 代码是否有问题，但是当我执行搜索脚本时，它不会返回（示例）上的值：“e”、“s”或“r”，但如果我输入一个人的全名，或者只是一个“a”，它返回所有带有“a”的名字。

这是我的脚本的一个小片段：

```
 $string = trim(mysql_real_escape_string($_POST['string']));

    $sql = "SELECT * FROM users WHERE firstName LIKE '%$string%' OR lastName LIKE '%$string%' ORDER BY firstName ASC";
    foreach($db->query($sql) as $row) {
    //usage of $row like: $name = $row['firstName']." ".$row['lastName'];
    } 
```

**更新：**
继承人整个脚本：

```
 $sql = "SELECT * FROM users WHERE firstName like '%$string%' OR lastName like '%$string%' ORDER BY firstName ASC";
    foreach($db->query($sql) as $row) {

    $name = $row['firstName']. " ".$row['lastName'];//combing firstname with lastname
    //replacing æ,ø,å,Æ,Ø,Å with html friendly charcodes
    $remove = array("æ", "ø", "å", "Æ", "Ø", "Å"); 
    $with = array("&aelig;", "&oslash;", "&aring;", "&AElig;", "&Oslash;", "&Aring;");
    $fname = str_replace($remove, $with, $name);

    //composing a answer to the user.
    $stringUser[] = "<li class='searchResultHit'><div class='searchResultLeft'><img src='".$row['picture']."'></div><div class='searchResultCenter'><span class='searchResultContent'><a href='user.php?id=".$row['id']."'>".$fname."</a></span></div></li>";
    } 
```

# javascript - 消息的正则表达式

> ID：12627429
> 
> 赞同：0
> 
> 时间：2012-09-27T18:01:07.523
> 
> 标签：javascript, regex, validation

消息至少包含 6 个字母或数字、任意长度和任意数量的行。

我目前使用的正则表达式只允许我有一行比我得到一个错误更远的地方。

```
/^.{6}/ 
```

前任：

Oppan gang-namseutayil 康南苏塔伊尔

Naje-neun ttasaroun inkanjeo-gin yeoja Keopi hanjanye yeoyureuraneun pumkyeok i-nneun yeoja Bami omyeon shimjangi tteugeowojineun yeoja Keureon banjeon i-nneun yeoja

Naneun sana-i Naje-neun neomankeum ttasaroun geureon sana-i Keopi shikgido jeone wonsyas ttaerineun sana-i Bami omyeon shimjangi teojyeobeorineun sana-i Keureon sana-i

Areumdawo sarangseureowo Keurae neo 嘿 keurae baro neo 嘿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:08:16.273

您可以使用`\w`标记来分隔 az、AZ、0-9 和下划线。然后用于`{6,}`指定 6 个或更多字符。使用`m`多行标志

`/\w{6,}/m`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:24:45.220

您应该取出`^`，它表示字符串的开头。

这就是为什么它不会匹配多行文本的原因，因为第 2 行的文本 - 结尾不在字符串的开头。

# c - fts_children() 不工作

> ID：12627430
> 
> 赞同：0
> 
> 时间：2012-09-27T18:01:20.113
> 
> 标签：c, linux, filesystems, system-calls, traversal

我在使用`fts_children() referenced`此手册页[http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/fts.3.html)中的功能时遇到了困难。似乎`fts_children()`并没有像它在手册页中声称的那样获得子目录中的所有文件。例如，我在文件`temp`夹中有一个文件，其中`v2`包含许多文件。我得到了子目录中的所有文件，除了按字母顺序排列的文件。对此我能做些什么吗？我的代码在下面，子目录中的文件具有权限。代码：

```
int compare (const FTSENT**, const FTSENT**);

int main(int argc, char* const argv[])
{
    FTS* file_system = NULL;
    FTSENT* child = NULL;
    FTSENT* parent = NULL;

    file_system = fts_open(argv + 1,FTS_COMFOLLOW | FTS_NOCHDIR,&compare);

    if (NULL != file_system)
    {
        while( (parent = fts_read(file_system)) != NULL)
        {

            child = fts_children(file_system,0);
            if (errno != 0)

        while ((NULL != child) && (NULL != child->fts_link))

            {
                child = child->fts_link;
                printf("%s\n", child->fts_name);
            }

        }
        fts_close(file_system);
    }
    return 0;
}

int compare(const FTSENT** one, const FTSENT** two)
{
    return (strcmp((*one)->fts_name, (*two)->fts_name));
} 
```

临时文件（使用 ls -l 输出）：

```
total 8
-rwxrwxrwx  1 tparisi student 14 Sep 27 13:05 a
-rw-r--r--+ 1 tparisi student 25 Sep 26 14:42 f
-rw-r--r--+ 1 tparisi student 13 Sep 27 11:28 file2
-rw-r--r--+ 1 tparisi student 14 Sep 27 11:42 files
drwxr-xr-x+ 2 tparisi student  3 Sep 27 13:33 temp2
-rw-r--r--+ 1 tparisi student 14 Sep 27 13:04 test
-rw-r--r--+ 1 tparisi student  5 Sep 27 13:23 z 
```

`a`当我运行我的程序时，整个目录都打印出来接受。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:35:30.320

遍历返回的列表时跳过第一个条目：

```
while ((NULL != child) && (NULL != child->fts_link))
{
    child = child->fts_link;
    printf("%s\n", child->fts_name);
} 
```

尝试

```
while(child)
{
    printf("%s\n", child->fts_name);
    child = child->fts_link;
} 
```

从打印的返回列表中获取所有文件。

# c# - GridView 数据绑定 - 超时

> ID：12627431
> 
> 赞同：1
> 
> 时间：2012-09-27T18:01:26.080
> 
> 标签：c#, .net, timeout

我确实有 ASP.NET 页面，它通过 Page_Load 上的 SqlDataSource 调用存储过程并绑定 GridView。在 PageLoad 我正在做这样的事情：

```
string connectionString = BLTutela.BLclsDatabaseConfigurations.GetDefaultConnectionString();
dataSource.ConnectionString = connectionString;
dataSource.SelectParameters["ReportFromDate"].DefaultValue = reportFromDateValue.Date.ToString();
...            
GridView1.DataSource = dataSource;
GridView1.DataBind(); 
```

dataSource 是 SqlDataSource 并调用 StoredProcedure。代码可以运行，但它只是第一个版本，因为可能存在以下问题（我认为这些问题可能会发生，因为它是生成很长报告的报告页面）：

1) 存储过程可能运行时间过长 -> 可能会发生 SessionTimeout 并且用户在很长一段时间内都看不到系统的任何响应

2）即使存储过程已经完成，将数据加载到gridview中也可能是一个很长的过程。这可能会导致另一个会话超时。

我需要一个解决方案，1）不显示长服务器进程（存储过程）的会话超时 2）在 gridview 中显示数据不超时，3）在加载数据时显示进度条。

我从未使用过 Threads 或 AsyncCalls，所以我想先做一些调查。

现在我找到了以下链接： http: [//madskristensen.net/post/Asynchronous-GridView-in-5-simple-steps.aspx](http://madskristensen.net/post/Asynchronous-GridView-in-5-simple-steps.aspx) 我想知道这是否适用于我的情况以及我不知道的问题.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:09:04.633

为了解决您的问题，您可以定义`Timeout on your string connection`

调整`Connect Timeout`属性

```
<connectionStrings>
 <add name="ConnectionString" connectionString="Data Source=;Initial Catalog=;Persist Security Info=True;User ID=;Password=;Connect Timeout=200" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

您可以在 SqlDataSource 的 Selecting 事件中设置超时值：

```
protected void SqlDataSource1_Selecting(object sender,
SqlDataSourceSelectingEventArgs e)
{
   e.Command.CommandTimeout = 200;
} 
```

# css - django模板中的css

> ID：12627432
> 
> 赞同：-1
> 
> 时间：2012-09-27T18:01:28.680
> 
> 标签：css, django, django-templates, django-staticfiles

我在 django 模板中使用 css 时遇到问题，

在我的`settings.py`我有这个：

```
BASE_DIR = os.path.abspath(os.path.dirname(__file__) + '/')
STATIC_URL = BASE_DIR + '/static/' 
```

在我的路径中，我有文件夹`"static/css/home_css.css"`

在我的模板 home.html 我有链接标签：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/home_css.css" media="all" /> 
```

但它不能用于渲染 de css。如果有人知道会发生什么请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:52:26.433

`STATIC_URL`不应指向文件系统中的路径。`STATIC_ROOT`应该。

```
import os

STATIC_ROOT = os.path.join(BASE_DIR, 'static')
STATIC_URL = "/static/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:06:21.973

在您的`settings.py`添加`'django.core.context_processors.static',`中，`TEMPLATE_CONTEXT_PROCESSORS`如本例所示：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
) 
```

**编辑**

如果你正在使用本地开发服务器，你将需要这样的东西`urls.py`：

`(r'static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': '%s' % os.path.join(os.path.dirname(os.path.abspath(__file__)), 'static')}),`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:15:13.693

我解决了！我将我的目录静态放入应用程序根路径，并设置 STATIC_URL = '/static/'

谢谢

# razor - MVC4 使用部分来包含 javascript

> ID：12627433
> 
> 赞同：7
> 
> 时间：2012-09-27T18:01:33.827
> 
> 标签：razor, asp.net-mvc-4

我正在开发一个 asp.net MVC4 应用程序。在我的布局页面中，我有以下代码

```
@RenderSection("page-specific", required: false) 
```

在我使用上述布局的视图中，我有

```
@section page-specific{
  <script src="~/Scripts/page-specific.js" type="text/javascript"></script>
} 
```

当我运行我的应用程序时，它给了我以下错误

部分不能为空。“@section”关键字后面必须跟一个由“{}”包围的标记块

但我想做的只是包含一些特定于页面的样式和 javascript。我不想在这个特定部分中包含任何 HTML 标记。如何在避免空白部分错误的同时做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T18:04:50.300

尝试命名它`pageSpecific`。我以前没有尝试在节名中使用连字符，但我感觉 mvc 可能不喜欢那样。

# javascript - jQuery.click() 与 onClick

> ID：12627443
> 
> 赞同：604
> 
> 时间：2012-09-27T18:02:02.273
> 
> 标签：javascript, html, jquery, dom-events, jquery-events

我有一个巨大的 jQuery 应用程序，我使用以下两种方法来处理点击事件。

**第一种方法**

### HTML

```
<div id="myDiv">Some Content</div> 
```

### jQuery

```
$('#myDiv').click(function(){
    //Some code
}); 
```

**第二种方法**

### HTML

```
<div id="myDiv" onClick="divFunction()">Some Content</div> 
```

### JavaScript 函数调用

```
function divFunction(){
    //Some code
} 
```

我在我的应用程序中使用第一种或第二种方法。哪一个更好？性能更好？和标准？

* * *

## 回答 #1

> 赞同：600
> 
> 时间：2012-09-27T18:04:14.090

使用**更好**`$('#myDiv').click(function(){`，因为它遵循标准事件注册模型。（jQuery[内部](https://github.com/jquery/jquery/blob/6e995583a11b63bf1d94142da6408955ee93e7cc/src/event.js#L97-102)使用and ）。**[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)[`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)**

 **基本上以[现代方式](http://www.quirksmode.org/js/events_advanced.html)注册事件是处理事件的[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式。此外，要为目标注册多个事件侦听器，您可以`addEventListener()`为同一个目标调用。

```
var myEl = document.getElementById('myelement');

myEl.addEventListener('click', function() {
    alert('Hello world');
}, false);

myEl.addEventListener('click', function() {
    alert('Hello world again!!!');
}, false); 
```

[http://jsfiddle.net/aj55x/1/](http://jsfiddle.net/aj55x/1/)

> **[为什么要使用 addEventListener？](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener#Why_use_addEventListener.3F)**（来自 MDN）
> 
> addEventListener 是注册 W3C DOM 中指定的事件侦听器的方法。它的好处如下：
> 
> *   它允许为事件添加多个处理程序。这对于即使使用其他库/扩展也需要正常工作的 DHTML 库或 Mozilla 扩展特别有用。
> *   当侦听器被激活时，它可以让您更精细地控制阶段（捕获与冒泡）
> *   它适用于任何 DOM 元素，而不仅仅是 HTML 元素。

更多关于现代活动注册 -> [http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

其他方法如设置[HTML 属性](https://developer.mozilla.org/en-US/docs/DOM/event#HTML_attribute)，例如：

```
<button onclick="alert('Hello world!')"> 
```

或[DOM 元素属性](https://developer.mozilla.org/en-US/docs/DOM/event#DOM_element_properties)，例如：

```
myEl.onclick = function(event){alert('Hello world');}; 
```

很旧，它们很容易被覆盖。

*应避免使用***HTML 属性，因为它会使标记更大且可读性更低。***对内容/结构和行为的关注没有得到很好的分离，使得 bug 更难被发现。*

 ****DOM 元素属性***方法的问题在于，每个事件只能将一个事件处理程序绑定到一个元素。

更多关于传统事件处理 -> [http://www.quirksmode.org/js/events_tradmod.html](http://www.quirksmode.org/js/events_tradmod.html)

MDN 参考：[https ://developer.mozilla.org/en-US/docs/DOM/event](https://developer.mozilla.org/en-US/docs/DOM/event)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-09-27T18:09:54.393

为了获得更好的性能，请使用本机 JavaScript。为了加快开发速度，请使用 jQuery。检查*[jQuery 与 Native Element Performance](http://jsperf.com/jquery-vs-native-element-performance)*的性能比较。

我在 Windows Server 2008 R2 / 7 64 位上的 Firefox 16.0 32 位上进行了测试

```
$('span'); // 6,604 operations per second
document.getElementsByTagName('span'); // 10,331,708 operations/sec 
```

对于点击事件，请检查*[Native Browser events vs jquery trigger](http://jsperf.com/native-browser-events-vs-jquery-trigger)*或*[jQuery vs Native Click Event Binding](http://jsperf.com/jquery-vs-native-click-event-binding)*。

在 Windows Server 2008 R2 / 7 64 位上的 Chrome 22.0.1229.79 32 位中进行测试

```
$('#jquery a').click(window.testClickListener); // 2,957 operations/second

[].forEach.call( document.querySelectorAll('#native a'), function(el) {
    el.addEventListener('click', window.testClickListener, false);
}); // 18,196 operations/second 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-09-27T18:12:02.987

据我了解，您的问题并不是关于是否使用 jQuery。而是：*在 HTML 中内联绑定事件还是通过事件侦听器更好？*

内联绑定已弃用。此外，您只能将一个函数绑定到某个事件。

因此我推荐使用事件监听器。这样，您将能够将许多函数绑定到单个事件，并在以后需要时取消绑定。考虑这个纯 JavaScript 代码：

```
querySelector('#myDiv').addEventListener('click', function () {
    // Some code...
}); 
```

这适用于大多数现代浏览器。

但是，如果您已经在项目中包含 jQuery — 只需使用 jQuery:`.on`或`.click`function。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-09-27T18:04:25.493

您可以将它们结合起来，使用 jQuery 将函数绑定到点击

```
<div id="myDiv">Some Content</div>

$('#myDiv').click(divFunction);

function divFunction(){
 //some code
} 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-09-28T06:51:06.840

去做吧，因为它会给你标准和性能。

```
 $('#myDiv').click(function(){
      //Some code
 }); 
```

因为第二种方法是简单的 JavaScript 代码并且比 jQuery 更快。但这里的性能将大致相同。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-09-27T18:05:42.793

`$('#myDiv').click`更好，因为它将 JavaScript 代码与[HTML](http://en.wikipedia.org/wiki/HTML)分开。必须尽量保持页面**行为和结构不同**。这很有帮助。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2012-09-27T18:32:50.583

作品的区别。如果你使用click()，你可以添加几个函数，但是如果你使用一个属性，只会执行一个函数——最后一个。

***[演示](http://jsfiddle.net/abaksheyev/SqH3D/1/)***

***HTML***

```
<span id="JQueryClick">Click #JQuery</span> </br>
<span id="JQueryAttrClick">Click #Attr</span> </br> 
```

***JavaScript***

```
$('#JQueryClick').click(function(){alert('1')})
$('#JQueryClick').click(function(){alert('2')})

$('#JQueryAttrClick').attr('onClick'," alert('1')" ) //This doesn't work
$('#JQueryAttrClick').attr('onClick'," alert('2')" ) 
```

如果我们谈论性能，无论如何直接使用总是更快，但是使用属性，您将只能分配一个功能。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2013-03-19T19:25:15.433

恕我直言，仅当满足以下条件时，onclick 才是 .click 的首选方法：

*   页面上有很多元素
*   点击事件只注册一个事件
*   您担心移动性能/电池寿命

我之所以形成这种观点，是因为移动设备上的 JavaScript 引擎比同代的桌面引擎慢 4 到 7 倍。当我在移动设备上访问网站并收到抖动的滚动时，我讨厌它，因为 jQuery 以牺牲我的用户体验和电池寿命为代价绑定所有事件。另一个最近的支持因素，虽然这应该只是政府机构的关注；），我们有 IE7 弹出一个消息框，指出 JavaScript 进程需要很长时间......等待或取消进程。每次通过 jQuery 绑定很多元素时都会发生这种情况。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2014-10-18T12:16:53.410

关注点分离是这里的关键，因此事件绑定是普遍接受的方法。这基本上是许多现有答案所说的。

**但是**，不要太快放弃声明性标记的想法。它有它的位置，并且像 Angularjs 这样的框架是核心。

需要理解的`<div id="myDiv" onClick="divFunction()">Some Content</div>`是，由于某些开发人员滥用了整体，因此受到了如此严重的羞辱。所以它达到了亵渎神明的程度，就像`tables`. 一些开发人员*实际上*避免`tables`使用表格数据。这是人们在不理解的情况下行事的完美例子。

虽然我喜欢将我的行为与我的观点分开的想法。我认为标记声明它的作用没有问题（不是它**是****如何**做的，这就是行为）。它可能是实际的 onClick 属性或自定义属性的形式，很像引导 javascript 组件。

这样，只需看一眼标记，您就可以看到它做了什么，而不是尝试反向查找 javascript 事件绑定器。

因此，作为上述的第三种替代方法，使用数据属性以声明方式宣布标记内的行为。行为被排除在视图之外，但您一眼就能看到正在发生的事情。

引导示例：

```
<button type="button" class="btn btn-lg btn-danger" data-toggle="popover" title="Popover title" data-content="And here's some amazing content. It's very engaging. Right?">Click to toggle popover</button> 
```

来源： http: [//getbootstrap.com/javascript/#popovers](http://getbootstrap.com/javascript/#popovers)

**注意**第二个例子的主要缺点是全局命名空间的污染。这可以通过使用上面的第三种替代方案，或者像 Angular 这样的框架及其具有自动作用域的 ng-click 属性来规避。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-09-27T18:18:01.320

```
<whatever onclick="doStuff();" onmouseover="in()" onmouseout="out()" /> 
```

**onclick、onmouseover、onmouseout 等**事件实际上**对性能不利**（主要是在*Internet Explorer*中，请看图）。如果您使用[Visual Studio](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio)进行编码，当您使用这些运行页面时，其中的每一个都将创建一个单独的 SCRIPT 块占用内存，从而降低性能。

更不用说你应该[分离关注点](https://en.wikipedia.org/wiki/Separation_of_concerns)：JavaScript 和布局应该分离！

为这些事件中的任何一个创建 evenHandlers 总是更好，一个事件可以捕获数百/数千个项目，而不是为每个事件创建数千个单独的脚本块！

（另外，其他人都在说什么。）

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-09-27T18:05:42.643

没有一个*更好*，因为它们可以用于不同的目的。`onClick`（实际上应该`onclick`）表现得稍微好一点，但我非常怀疑你会注意到那里的不同。

值得注意的是，它们做了不同的事情：`.click`可以绑定到任何 jQuery 集合，而`onclick`必须在您希望绑定到的元素上内联使用。您也可以仅将一个事件绑定到 using `onclick`，而`.click`让您继续绑定事件。

在我看来，我会保持一致，只是`.click`在任何地方使用，并将我的*所有*JavaScript 代码放在一起并与 HTML 分开。

不要使用`onclick`. 除非您知道自己在做什么，否则没有任何理由使用它，而且您可能不知道。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-09-27T18:05:16.633

大多数时候，当性能是唯一标准时，本机 JavaScript 方法比 jQuery 更好，但 jQuery 使用 JavaScript 并简化了开发。您可以使用 jQuery，因为它不会过多地降低性能。在您的特定情况下，性能差异是可以忽略的。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-09-27T18:06:33.247

[好吧， jQuery](http://en.wikipedia.org/wiki/JQuery)背后的主要思想之一是将 JavaScript 与讨厌的[HTML](http://en.wikipedia.org/wiki/HTML)代码分开。第一种方法是要走的路。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-09-27T18:05:00.877

第一种方法是偏爱。它使用[高级事件注册模型[s]](http://www.quirksmode.org/js/events_advanced.html)，这意味着您可以将多个处理程序附加到同一个元素。您可以轻松访问事件对象，并且处理程序可以存在于任何函数的范围内。此外，它是动态的，即它可以随时调用，特别适合动态生成的元素。无论您使用 jQuery、其他库还是直接使用本机方法都无关紧要。

第二种方法，使用内联属性，需要大量全局函数（这会导致命名空间污染）并将内容/结构（HTML）与行为（JavaScript）混合在一起。不要使用那个。

您关于性能或标准的问题不容易回答。这两种方法只是完全不同，做不同的事情。第一个更强大，而第二个被鄙视（被认为是坏风格）。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-09-27T18:05:52.213

第一种使用`onclick`方法不是 jQuery，而只是 Javascript，因此您不会得到 jQuery 的开销。如果您需要将 jQuery 方式添加到其他元素而不向每个元素添加事件处理程序，则可以通过选择器扩展 jQuery 方式，但是正如您现在拥有的那样，是否需要使用 jQuery 只是一个问题。

就个人而言，因为您使用的是 jQuery，所以我会坚持使用它，因为它是一致的，并且确实将标记与脚本分离。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-06-11T08:18:24.453

Onclick 函数 Jquery

`$('#selector').click(function(){ //Your Functionality });`

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-06-26T08:31:58.233

# 表现

然而，这里已经有很多好的答案，作者有时会提到性能，但实际上还没有人研究它——所以我将在这里专注于这方面。今天，我在 Chrome 83.0、Safari 13.1 和 Firefox 77.0 上进行了测试，以获取有问题的解决方案以及其他一些替代解决方案（其中一些在其他答案中被提及）。

## 结果

我在这里比较解决方案 AH 因为它们对元素进行操作`id`。我还展示了使用`class`(I,J,K) 作为参考的解决方案的结果。

*   基于 html-inline 处理程序绑定 (B) 的解决方案对于 Chrome 来说是快速和最快的，对于少量元素来说是最快的
*   基于`getElementById`(C,D) 的解决方案速度很快，并且对于 Safari 和 Firefox 上的大量元素最快
*   基于 I,J 的参考解决方案对于大量元素是最快的，因此在这种情况下值得考虑使用`class`替代`id`方法
*   基于jQuery.click(A)的解决方案最慢

[![在此处输入图像描述](../Images/01d0a7e93d7247fde21a30c4ceab373a.png)](https://i.stack.imgur.com/PERum.png)

## 细节

其实为这个问题设计性能测试并不容易。我注意到对于所有经过测试的解决方案，10K div-s 的触发事件的性能很快，并且手动我无法检测到它们之间的任何差异（您可以在下面运行代码片段自行检查）。所以我专注于测量两种情况下生成 html 和绑定事件处理程序的执行时间

*   10秒 - 你可以在[这里](https://jsbench.me/w9kbv4g3bo/1)`div`运行测试
*   1000秒 - 你可以在[这里](https://jsbench.me/95kbvvppe9/1)`div`运行测试

```
// https://stackoverflow.com/questions/12627443/jquery-click-vs-onclick
let a= [...Array(10000)];

function clean() { test.innerHTML = ''; console.clear() }

function divFunction(el) {
  console.log(`clicked on: ${el.id}`);
}

function initA() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> $(`#myDiv${i}`).click(e=> divFunction(e.target)));
}

function initB() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box" onclick="divFunction(this)">${i}</div>`).join``;
}

function initC() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> document.getElementById(`myDiv${i}`).onclick = e=> divFunction(e.target) );
}

function initD() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> document.getElementById(`myDiv${i}`).addEventListener('click', e=> divFunction(e.target) ));
}

function initE() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> document.querySelector(`#myDiv${i}`).onclick = e=> divFunction(e.target) );
}

function initF() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> document.querySelector(`#myDiv${i}`).addEventListener('click', e=> divFunction(e.target) ));
}

function initG() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> window[`myDiv${i}`].onclick = e=> divFunction(e.target) );
}

function initH() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  a.map((x,i)=> window[`myDiv${i}`].addEventListener('click',e=> divFunction(e.target)));
}

function initI() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  [...document.querySelectorAll(`.box`)].map(el => el.onclick = e=> divFunction(e.target));
}

function initJ() {
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  [...document.querySelectorAll(`.box`)].map(el => el.addEventListener('click', e=> divFunction(e.target)));
}

function initK() {  
  test.innerHTML = a.map((x,i)=> `<div id="myDiv${i}" class="box">${i}</div>`).join``;
  $(`.box`).click(e=> divFunction(e.target));
}

function measure(f) {  
  console.time("measure "+f.name);
  f();
  console.timeEnd("measure "+f.name)
}
```

```
#test {
  display: flex;
  flex-wrap: wrap;
}

.box {
  margin: 1px;
  height: 10px;
  background: red;
  font-size: 10px;
  cursor: pointer;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div>This snippet only presents used solutions. Click to solution button and then click on any red box to trigger its handler</div>
<button onclick="measure(initA)">A</button>
<button onclick="measure(initB)">B</button>
<button onclick="measure(initC)">C</button>
<button onclick="measure(initD)">D</button>
<button onclick="measure(initE)">E</button>
<button onclick="measure(initF)">F</button>
<button onclick="measure(initG)">G</button>
<button onclick="measure(initH)">H</button>
<button onclick="measure(initI)">I</button>
<button onclick="measure(initJ)">J</button>
<button onclick="measure(initK)">K</button>
<button onclick="clean()">Clean</button>

<div id="test"></div>
```

这是 Chrome 的示例测试

[![在此处输入图像描述](../Images/7c01f263f89ed23e45ea75551223649d.png)](https://i.stack.imgur.com/4hZLI.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-10T22:07:09.437

假设您有一个嵌套在 Javascript/Jquery 生成的 html 元素（.html() 或 .innerHTML 类型的元素）内的按钮，那么您需要选择最外面的元素（父级）并执行此操作

```
var parentElement = $('#outermostElement')
 parentElement.click('button', function(){
    console.log('clicked')
}) 
```

最外层元素是指采用 .html() 的元素，例如

```
outermostElement.html("<div><button>click<button><div>") 
```***

# android - android OptionsMenu 点击次数

> ID：12627446
> 
> 赞同：0
> 
> 时间：2012-09-27T18:02:08.507
> 
> 标签：android, menu, broadcastreceiver

我可以获得 OptionsMenu 点击次数吗？

我想获得在 onReceive 中使用的价值，就像这样

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        SubMenu fileMenu = menu.addSubMenu(0, 7, Menu.NONE, "歌曲");    
        fileMenu.add(0, 1, Menu.NONE, "A");  
        fileMenu.add(0, 2, Menu.NONE, "B");  
        fileMenu.add(0, 3, Menu.NONE, "C");
        fileMenu.add(0, 4, Menu.NONE, "D");
        return true;
    }
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case 1:

              Toast.makeText(this, "A", Toast.LENGTH_SHORT).show();
              break;
        case 2:

              Toast.makeText(this, "B", Toast.LENGTH_SHORT).show();
              break;
        case 3:

              Toast.makeText(this, "C", Toast.LENGTH_SHORT).show();
              break;
        case 4:
              Toast.makeText(this, "D", Toast.LENGTH_SHORT).show();
              break;
        default:
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
IntentFilter intent = new IntentFilter();  
intent.addAction(BluetoothDevice.ACTION_FOUND);
registerReceiver(searchDevices, intent);
private BroadcastReceiver searchDevices = new BroadcastReceiver() {  
      public void onReceive(Context context, Intent intent) { 
        if(OptionsMenu click times == 2)
    {

    }
} 
```

因为我只有这部分的过程，

请帮助我了解如何解决提供建议谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:45:03.013

Bali gave a good solution for what you asked. But there is a much simpler way to get this done without using a receiver.

Make a new class that has a static container for your click number.

ie:

```
public class ParamValues{

private static int clickNums= 0;

    /**
     * @return the clickNumber
     */
    public static int getClickNums() {
        return clickNums;
    }

    /**
     * Sets the clickNumber
     */
    public static int setClickNum(int clickNum) {
        clickNums = clickNum;
    }
} 
```

Then create an onClickHandler for your OptionsMenu, and inside the click handler add in somecode like.

```
int count = ParamValues.getClickNum();
count++;
ParamValues.setClickNum(count); 
```

Now you could get this click count anywhere in your code. If you want to make sure it's synchronized you could just add a function to process what you want in the same onClick.

ie:

```
if(ParamValues.getClickNum() == 2)
    {
// Do whatever
    } 
```

Then in you can reset the count value in here or wherever you would want to reset it by using the convenient setter in the ParamValues class.

Using the receiver you can't guarantee exactly when the code will execute.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:12:45.173

根据您提供的详细信息：

您可以在 Activity 中创建一个数据成员，它将存储按下菜单键的次数，并在每次按下时增加它：

```
private int menuPressedCount = 0;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_MENU)
        menuPressedCount++;
} 
```

你可以把它传递给你的接收者，把它放在 Intent 中，接收者会得到：

```
Intent intent = ...;
intent.putExtra("menu_pressed_count", menuPressedCount); 
```

在 onReceive() 中：

```
int pressedCount = intent.getIntExtra("menu_pressed_count", 0); 
```

告诉我这不是你要找的！

# image - 缩小其中某些条目未知的矩阵

> ID：12627447
> 
> 赞同：1
> 
> 时间：2012-09-27T18:02:10.013
> 
> 标签：image, matlab, image-processing, signal-processing

我有一个 2D 网格 (G= 250x250)，其中只有大约 100 个点是已知的，其余的是未知的 (NaN)。我想调整这个矩阵的大小。我的问题是`imresize`不能在 MATLAB 中为我做这件事，因为它删除了我的已知值并且只给出了一个 NaN 矩阵。

有人知道可以为我做的方法吗？一个建议是使用插值方法（例如通过使用反距离加权），但我不确定它是否有效，甚至有没有更好的方法？

```
 G = NaN(250,250);
    a = ceil(rand(1,50)*250*250);
    b = ceil(rand(1,50)*250*250);
    G (a) = 1; G (b) = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T20:16:28.183

这个怎么样：

```
% find the non-NaN entries in G
idx = ~isnan(G);

% find their corresponding row/column indices
[i,j] = find(idx);

% resize your matrix as desired, i.e. scale the row/column indices
i = ceil(i*100/250);
j = ceil(j*100/250);

% write the old non-NaN entries to Gnew using accumarray
% you have to set the correct size of Gnew explicitly
% maximum value is chosen if many entries share the same scaled i/j indices
% NaNs are used as the fill
Gnew = accumarray([i, j], G(idx), [100 100], @max, NaN); 
```

如果 max 不适合您，您也可以为 accumarray 选择不同的累积函数。如果它不是您需要的，您可以将填充值从 NaN 更改为其他值。

# c - 将正方形打包成一个矩形

> ID：12627449
> 
> 赞同：3
> 
> 时间：2012-09-27T18:02:20.230
> 
> 标签：c, algorithm

我有一个矩形宽度 x 高度和 N 个相同未知大小的正方形。我必须确定这些正方形的最大尺寸以及行数和列数以完美地适合（UPD。我的意思是不要填充所有空间，而是尽可能多地填充空间）到矩形中。

我猜，在数学上它看起来像这样：

```
x * size <= width                  //x - number of columns
y * size <= height                 //y - number of rows
x * y <= N                         //N - number of squares
size -> max                        //size - size of squares 
```

最终结果可能如下所示：

```
1 1 1 1
1 1 1 1
1 1 0 0 
```

其中`1`= `squares`, `0`= 空白空间`。

实际上，我看到了类似的问题，但使用了预定义的正方形大小。另外，我写了一些笨拙的算法，但它的结果很不理想..

**编辑：**我目前的算法：

我尝试了很多变化，但我无法让它在所有情况下都完美无缺。实际上，我可以通过所有可能的尺寸，但我不喜欢这种方法。

```
// to make things more simple I put width as bigger size 
int biggerSize = this.ClientSize.Width;
int lowerSize = this.ClientSize.Height;  
int maxSize = int.MinValue;
int index = 0;
int index2 = 0;

// find max suitable size
for (int i = _rects.Count; i > 0; i--) {
  int size = biggerSize / i;
  int j = (int)Math.Floor((double)lowerSize / size);

  if (i * j >= _boards.Count && size > maxSize) {
    maxSize = size;
    index = (int)i;
    index2 = (int)j;
  }
}

int counter = 0;

// place all rectangles
for (int i = 0; i < index; i++) {
  for (int j = 0; j < index2; j++) {
    if (counter < _rects.Count) {                                
      _rects[counter].Size = new Size(maxSize, maxSize);
      _rects[counter].Location = new Point(i * maxSize, j * maxSize);
    }

    counter++;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-25T12:32:09.050

这个问题最近出现在我正在做的一个项目中。这是确定的解决方案：

```
int numItems; // the number of squares we need to pack in.
double rectWidth; // the width of the space into which we want to pack our squares.
double rectHeight; // the height of the space into which we want to pack our squares.

double tableRatio = rectWidth / rectHeight;
double columns = sqrt(numItems * tableRatio);
double rows = columns / tableRatio;

columns = ceil(columns); // the number of columns of squares we will have
rows = ceil(rows); // the number of rows of squares we will have

double squareSize = rectWidth / columns; // the size of each square. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:15:07.223

你的问题不一致。首先，您将问题描述为“确定这些正方形的最大尺寸以及行数和列数以**完全**适合矩形。” （强调补充）。

但是随后您给出了一个允许空白空间的示例最终结果。

那么它是哪一个？

如果您需要正方形完全适合矩形，没有空白空间并且没有超出矩形边界的正方形，那么最大正方形的大小将等于矩形长度和宽度的最大公约数。

见[http://en.wikipedia.org/wiki/Greatest_common_divisor#A_geometric_view](http://en.wikipedia.org/wiki/Greatest_common_divisor#A_geometric_view)

# objective-c - 如何在 UIPageViewController 中释放第一页？

> ID：12627452
> 
> 赞同：2
> 
> 时间：2012-09-27T18:02:23.687
> 
> 标签：objective-c, ios, uipageviewcontroller

在 iOS 6 中，似乎 UIPageViewController 没有释放通过

[self.pageViewController setViewControllers:viewControllers ...

每当我翻页时，它都会被释放，除了 viewControllers 数组中的第一个。

任何人都知道我可以如何摆脱这个第一页？

# java - 使用 VisualVM 自动启动 CPU 分析

> ID：12627455
> 
> 赞同：14
> 
> 时间：2012-09-27T18:02:47.337
> 
> 标签：java, visualvm

我对 VisualVM 完全陌生。

有没有办法自动启动 CPU 分析？我的问题是我从 Eclipse 启动了一个程序，它运行了大约。20 秒。当我可以打开选项卡并单击 CPU 分析时，该应用程序几乎已完成处理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T18:21:04.050

我不知道如何自动开始分析，但我有一个解决方法。

您可以在程序的开始处设置断点，`main`并以调试模式从 Eclipse 启动程序。在 VisualVM 中开始分析后，在 Eclipse 中恢复您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-12T21:46:48.957

[https://visualvm.github.io/startupprofiler.html](https://visualvm.github.io/startupprofiler.html)

> 适用于 VisualVM 1.3.6 和更新版本的 Startup Profiler 插件可以从本地 Java 5+ 应用程序启动时进行检测分析。在分析短期运行的进程时，它也很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T16:16:16.203

我在执行代码的第一行添加了延迟，所以我有时间开始 VisualVM 分析： `TimeUnit.SECONDS.sleep(10);`

使用 VisualVM 的 Startup Profiler 插件进行配置非常耗时，而且我无法让调试/断点方法正常工作。

# android - 字符串资源文件中的格式语句

> ID：12627457
> 
> 赞同：168
> 
> 时间：2012-09-27T18:02:48.430
> 
> 标签：android, android-resources

我在通常的 strings.xml 资源文件中定义了字符串，如下所示：

```
<string name="hello_world"> HELLO</string> 
```

是否可以定义如下格式字符串

```
 result_str = String.format("Amount: %.2f  for %d days ",  var1, var2); 
```

在strings.xml 资源文件中？

我尝试转义特殊字符，但它不起作用。

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2014-01-02T16:55:07.243

您不需要`formatted="false"`在您的 XML 中使用。您只需要使用完全限定的字符串格式标记 - `%[POSITION]$[TYPE]`（`[POSITION]`属性位置和`[TYPE]`变量类型在哪里），而不是短版本，例如`%s`or `%d`。

来自 Android Docs 的引用[：字符串格式和样式](https://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)：

> ```
> <string name="welcome_messages">Hello, %1$s! You have %2$d new messages.</string> 
> ```
> 
> 在这个例子中，格式字符串有两个参数：`%1$s`一个字符串和`%2$d`一个十进制整数。您可以使用应用程序中的参数格式化字符串，如下所示：
> 
> ```
> Resources res = getResources();
> String text = res.getString(R.string.welcome_messages, username, mailCount); 
> ```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-09-27T18:15:25.260

您应该添加`formatted="false"`到您的字符串资源

* * *

这是一个例子

在你的`strings.xml`：

```
<string name="all" formatted="false">Amount: %.2f%n  for %d days</string> 
```

在您的代码中：

```
yourTextView.setText(String.format(getString(R.string.all), 3.12, 2)); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-03-14T11:04:31.967

内部文件`strings.xml`定义一个字符串资源，如下所示：

```
<string name="string_to_format">Amount: %1$f  for %2$d days%3$s</string> 
```

在您的代码中（假设它继承自 Context）只需执行以下操作：

```
 String formattedString = getString(R.string.string_to_format, floatVar, decimalVar, stringVar); 
```

（与[LocalPCGuy](https://stackoverflow.com/a/20887690/5389530)或[Giovanny Farto M](https://stackoverflow.com/questions/12627457/format-statement-in-a-string-resource-file/24098427#24098427)的答案相比，不需要String.format 方法。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-06-07T14:51:28.767

[来自Android Docs](http://developer.android.com/guide/topics/resources/string-resource.html)的引用：

> 如果您需要使用 格式化字符串`String.format(String, Object...)`，则可以通过将格式参数放在字符串资源中来实现。例如，使用以下资源：
> 
> ```
> <string name="welcome_messages">Hello, %1$s! You have %2$d new messages.</string> 
> ```
> 
> 在这个例子中，格式字符串有两个参数：`%1$s`一个字符串和`%2$d`一个十进制数。您可以使用应用程序中的参数格式化字符串，如下所示：
> 
> ```
> Resources res = getResources();
> String text = String.format(res.getString(R.string.welcome_messages), username, mailCount); 
> ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-24T14:06:56.360

对我来说，它在 Kotlin 中是这样工作的：

我的字符串.xml

```
 <string name="price" formatted="false">Price:U$ %.2f%n</string> 
```

我的班级.kt

```
 var formatPrice: CharSequence? = null
 var unitPrice = 9990
 formatPrice = String.format(context.getString(R.string.price), unitPrice/100.0)
 Log.d("Double_CharSequence", "$formatPrice") 
```

D/Double_CharSequence：价格：99,90 美元

为了获得更好的结果，我们可以这样做

```
 <string name="price_to_string">Price:U$ %1$s</string>

 var formatPrice: CharSequence? = null
 var unitPrice = 199990
 val numberFormat = (unitPrice/100.0).toString()
 formatPrice = String.format(context.getString(R.string.price_to_string), formatValue(numberFormat))

  fun formatValue(value: String) :String{
    val mDecimalFormat = DecimalFormat("###,###,##0.00")
    val s1 = value.toDouble()
    return mDecimalFormat.format(s1)
 }

 Log.d("Double_CharSequence", "$formatPrice") 
```

D/Double_CharSequence：价格：U$ 1.999,90

# php - 安全使用 Magento 的预配置事件

> ID：12627460
> 
> 赞同：10
> 
> 时间：2012-09-27T18:03:01.033
> 
> 标签：php, oop, events, magento

在 Magento 电子商务系统中，系统完全启动之前会触发三个事件

```
resource_get_tablename    
core_collection_abstract_load_before
core_collection_abstract_load_after 
```

这些事件也会在Magento 启动 **后触发。**

什么是一种安全且优雅（可能是事件 Mage 核心团队有福）的方法来检测Magento**何时**完全引导，以便您可以安全地使用这些事件？

如果您尝试在预引导状态下使用某些功能，则整个请求将 404。到目前为止[，我想出的最好的](http://magento-quickies.tumblr.com/post/32402056167/magento-startup-events)（上下文的自链接）是这样的

```
class Packagename_Modulename_Model_Observer
{
    public function observerMethod($observer)
    {
        $is_safe = true;
        try
        {
            $store = Mage::app()->getSafeStore();
        }
        catch(Exception $e)
        {
            $is_safe = false;
        }
        if(!$is_safe)
        {
            return;
        }     

        //if we're still here, we could initialize store object
        //and should be well into router initialization
    }

} 
```

但这有点笨拙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:02:38.653

我认为没有为此量身定制的活动。

您可以添加您自己的并提交一个拉取请求/Magento 票以包含一个好的票。

在那之前，我认为唯一的方法是使用您找到的事件之一，并检查 Magento 的初始化程度。

你试过得到`Mage::app()->getStores()`吗？这可能会使您免于捕获异常。

# python - mechanize 不断给出 URLErrors

> ID：12627466
> 
> 赞同：1
> 
> 时间：2012-09-27T18:03:35.090
> 
> 标签：python, http, screen-scraping, web-scraping, mechanize

我正在用机械化使一些东西自动化。我有一个工作程序，它登录到一个站点并在登录时转到一个页面。但是，有时我只是得到`URLError`表明连接已超时，每当我通过 mechanize 执行任何操作时：

```
URLError: <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond> 
```

如果我重新启动程序或重试尝试，它将正常工作。如果我使用 Chrome 访问同一个站点，无论我尝试登录的频率如何，它都不会超时。

这可能是什么原因？听起来机械化正在做一些不理想的事情。我在不同的站点上也有类似的模式——`URLError`实际上没有连接问题。

编辑：我还注意到，如果我这样做 - 立即重试 - 它通常会起作用，但接下来我会再次失败，等等。

```
last_response = ...
for attempt in (1, 2):
    try:
        self.mech.select_form(nr=0)
        self.mech[self.LOGIN_FORM_DATA[1]] = self.user
        self.mech[self.LOGIN_FORM_DATA[2]] = self.password
        resp = self.mech.submit()
        html = resp.read()
        resp.close()
    except mechanize.URLError:
        self.error("URLError submitting form, trying again...")
        self.mech.set_response(last_response) #reset the response 
        continue
    break 
```

# c# - Castle.Windsor 3.1 - ComponentActivator：无法代理

> ID：12627467
> 
> 赞同：2
> 
> 时间：2012-09-27T18:03:38.663
> 
> 标签：c#, .net, entity-framework, castle-windsor

我正在从 2.5.1 版升级到 3.1.0 版，而过去的工作不再适用。我正在尝试解决一个创建使用泛型的组件的工厂。抛出的错误是“ComponentActivator：无法代理”，其中无法解析的工厂名称

```
public class MyObject { }

public class MyContext { }

public class DummyComponent<T> : IDummyComponent<T> where T : MyObject { }

public interface IDummyComponent<T> { }

public interface IDummyComponentFactory
{
    IDummyComponent<T> Create<T>(object o);
}

class Program
{
    static void Main(string[] args)
    {
        var windsorContainer = new WindsorContainer();
        windsorContainer.AddFacility<TypedFactoryFacility>()
            .Register(
                Component.For(typeof(IDummyComponent<>)).ImplementedBy(typeof(DummyComponent<>)),
                Component.For<IDummyComponentFactory>().AsFactory());
        var factory = windsorContainer.Resolve<IDummyComponentFactory>(); <-- Error Occurs Here
        var myDummyComponent = factory.Create<MyObject>(new object());
    }
} 
```

此代码在 Entity Framework 存储库中以下列方式使用，用于将 EntityContext 传递到另一个存储库，以便像这样处理已删除的对象：

```
 public virtual IEnumerable<T> Where(Expression<Func<T, bool>> predicate, bool showDeleted = false, MergeOption mergeOption = MergeOption.AppendOnly)
    {           
        if (typeof(IDeletable).IsAssignableFrom(typeof(T)))
        {
            var factory = Container.Instance.Resolve<IDeletableRepositoryFactory>();
            var repository = factory.GetDeletableRepository<T>(EntityContext);
            return repository.Where(predicate, showDeleted, mergeOption);
        }

        return GetObjectSet(mergeOption).Where(predicate);                      
    } 
```

**更新：**包括内部异常

```
System.Security.VerificationException
{"Operation could destabilize the runtime."} at
Castle.MicroKernel.Proxy.ProxyOptions.get_MixIns() in 
c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\Proxy\ProxyOptions.cs:line 96 at 
Castle.Windsor.Proxy.DefaultProxyFactory.CreateProxyGenerationOptionsFrom(ProxyOptions proxyOptions, IKernel kernel, CreationContext context, ComponentModel model) in 
c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\Proxy\DefaultProxyFactory.cs:line 178 at
Castle.Windsor.Proxy.DefaultProxyFactory.Create(IKernel kernel, Object target, ComponentModel model, CreationContext context, Object[] constructorArguments) in 
c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\Windsor\Proxy\DefaultProxyFactory.cs:line 105 at
Castle.MicroKernel.ComponentActivator.DefaultComponentActivator.CreateInstance(CreationContext context, ConstructorCandidate constructor, Object[] arguments) in 
c:\BuildAgent\work\5b096cace0fecb1f\src\Castle.Windsor\MicroKernel\ComponentActivator\DefaultComponentActivator.cs:line 123` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:18:25.313

我尝试运行您的代码，但它可以在我的机器上运行

![在此处输入图像描述](../Images/6573ca4accc752f7f06cebaea56975b6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T14:27:38.220

这似乎是 Intellitrace 的一个问题，可以通过禁用它来解决：

*   工具 -> 选项 -> IntelliTrace（取消选中启用 Intellitrace）

找到其他有[类似问题](https://stackoverflow.com/questions/5968084/json-net-verificationexception-operation-could-destabilize-the-runtime)的参考。

# java - 通过谷歌应用引擎部署网络服务

> ID：12627468
> 
> 赞同：-2
> 
> 时间：2012-09-27T18:03:44.217
> 
> 标签：java, web-services, google-app-engine

我的网络服务已启动并正在运行，换句话说，它发布在我的 tomat 端口 8080 上，现在我可以通过浏览器访问它我希望我的网络服务在云上发布，以便我可以通过 wsdl uri给世界上任何一个人，他可以访问我的 wsdl。我想通过谷歌应用程序引擎来实现这一点，请告知如何实现这一点..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:19:47.860

如果您使用纯 Java 来构建这些 Web 服务，则可以。GAE 中不允许使用 Axis 或 CXF。

[https://developers.google.com/appengine/articles/soap](https://developers.google.com/appengine/articles/soap)

为什么不使用 REST 服务？

# javascript - Bootstrap：手风琴在展开时剥离 ui-droppable 类

> ID：12627470
> 
> 赞同：0
> 
> 时间：2012-09-27T18:03:59.420
> 
> 标签：javascript, jquery, twitter-bootstrap, droppable

Bootstrap 新手，手风琴有一些问题。希望有人能帮我解决它。

基本上我有一个空手风琴和一个下拉菜单。每次在下拉菜单中进行选择时，都会将其添加到手风琴中，标记为满，但div`.accordion-group`为空。`.accordion-body`之后，这个手风琴组设置为 droppable 并`.ui-droppable`自动添加类。

之后，我可以将一堆其他 div 拖放到该特定组中，`.accordion-group`并且这些 div 将附加到`.accordion-body`该特定组中。这部分工作正常，但是，一旦我单击展开任何给定`.accordion-group`的，`.ui-droppable`类就会从所有这些中剥离。

我如何阻止它删除`.ui-droppable`课程？

重现步骤：

1.  使用 Bootstrap 页面中的 html 标记：（由于某种原因，我无法通过缩进 4 个空格将 HTML 格式化为代码，所以我只是将链接粘贴到它） [http://twitter.github.com/bootstrap/javascript。 html#折叠](http://twitter.github.com/bootstrap/javascript.html#collapse)

2.  添加 JS，使组可丢弃

    `$('#accordion2').find('.accordion-group').each(function() { $(this).droppable(); });`

3.  检查元素以确保`.ui-droppable`设置了类

4.  单击以展开组。任何组。

5.  检查元素。`.ui-droppable`已被所有人拒绝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:06:49.060

解决了这个问题，但我认为这是实现结果的一种非常愚蠢的方式，所以我对 Bootstrap 处理切换的方式不满意。我真的不认为`.accordion-group`每次有人打开或关闭一个部分时都需要循环重新应用可放置属性。

只需为每个部分添加一个按钮和一个 div 即可重新执行此操作。

这是解决方案：

```
$('#host-groups').on('shown', function() {
    $('#host-groups').find('.accordion-group').each(function() {
        $(this).attr('id').droppable();

    });
});

$('#host-groups').on('hidden', function() {
    $('#host-groups').find('.accordion-group').each(function() {
        $(this).attr('id').droppable();

    });
}); 
```

/掌脸

# objective-c - Objective C 类声明语法

> ID：12627475
> 
> 赞同：-2
> 
> 时间：2012-09-27T18:04:01.713
> 
> 标签：objective-c, class, interface, uitableview, objective-c-protocol

我需要一些帮助来理解 Objective C 中的类声明语法，或者更具体一些

```
@interface SomeViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
```

UITableViewDataSource,UITableViewDelegate 是什么意思

我的理解是当类被实例化时它接收这两个对象。如果我错了，请纠正我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:06:11.687

[`UITableViewDataSource`](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html&ei=45VkUNGeFqaA4gTK-4DYCw&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw&sig2=dZSRFTqDlYjEK3yENHHWuQ)并且[`UITableViewDelegate`](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CB4QFjAA&url=http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html&ei=wpVkUL2RDKSC4gSm3ICICQ&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw&sig2=adZ1HzLEy8-BIxfPEH1rrg)是两个**协议**，而不是类（或对象）。

`< >`当您声明一个类时，您可以使用括号语法指定您的类实现的任意数量的协议。

协议是必需或可选方法的列表。将协议添加到类声明中实际上并没有实现或声明该协议中的任何方法。你必须自己做。但是，如果您没有实现所需的协议方法，您将收到编译器警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:05:54.257

当您声明一个类时，<> 语法允许您指定该类必须遵守的协议列表。

协议是您的类必须实现的一组方法（您也可以指定可选方法）。它们只有方法声明，但程序员必须在他的类中实现它们。协议在 Objective-C 中非常重要，因为它们是**委托模式**的核心。

在这种特定情况下，UITableViewDelegate 是处理 UITableViews 的对象必须遵守的协议。表格视图代表负责控制表格及其单元格，例如设置它们的高度、附件等。

UItableViewDataSource 是一个向表格视图提供数据的对象必须遵守的协议。符合此协议的对象负责返回将在表格视图中显示的数据。

在需要时不使用协议会产生警告，迟早会使您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:09:41.670

UITableViewDataSource 和 UITableViewDelegate 是协议。要了解什么协议，请参阅[此](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocProtocols.html)。协议类似于 Java 中的接口。

```
@interface SomeViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
```

这一行仅仅意味着你声明了一个类“So​​meViewController”，它继承自“UITableViewController”并采用两个协议：UITableViewDataSource 和 UITableViewDelegate

# php - 删除 HTML 标签，并将保留转换为实体，保持原样

> ID：12627477
> 
> 赞同：0
> 
> 时间：2012-09-27T18:04:06.197
> 
> 标签：php, email, html-entities, strip-tags

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:14:24.907

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:38:09.753

这个怎么样：

```
$str = '<p><a href="http://www.example.com/">Example.com</a> says that 5 < 6.</p>';
echo $str."\n";
$stripped = strip_tags($str, '<a>');
echo $stripped."\n"; 
```

产生输出：

```
[stou$ ~]$ php hmm.php 
<p><a href="http://www.example.com/">Example.com</a> says that 5 < 6.</p>
<a href="http://www.example.com/">Example.com</a> says that 5 < 6.
[stou$ ~]$ 
```

**编辑：**抱歉错过了关于 html 实体的观点。

# c++ - 为 MinGW 配置 Eclipse

> ID：12627481
> 
> 赞同：8
> 
> 时间：2012-09-27T18:04:24.587
> 
> 标签：c++, eclipse, mingw

我在我的 Win7 笔记本电脑上使用 Eclipse Juno 和 MinGW（最新版本）。我的示例代码在 IDE 中成功构建，但我既不能运行也不能调试它！

当我选择 Run as=>Local C/C++-Application 时，我得到

> 启动失败。未找到二进制文件。

但是，构建过程会产生一个 exe 文件！

当我调用 cmd.exe 时，导航到源目录并调用这个构建的 exe (a.out.exe)，它可以正常工作！

我猜这是由于 Eclipse 的错误/缺失配置，但到目前为止我找不到有用的信息。 [该线程](https://stackoverflow.com/questions/11884243/configure-eclipse-3-7-with-mingw)提到了环境变量。我将 MinGW 和 Msys 添加到我的 PATH 变量中（这就是我可以编译的原因），但我无法在 eclipse 中运行我的软件！

那么，可以做些什么来启用调试呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:00:29.257

**我做了一个小教程。**
如何为 Eclipse 设置一切看看这里[https://stackoverflow.com/a/12169583/1322642](https://stackoverflow.com/a/12169583/1322642)

希望它可以帮助你一点点。

# php - 如何在 PHP 中偏移一个字符？

> ID：12627487
> 
> 赞同：2
> 
> 时间：2012-09-27T18:04:27.803
> 
> 标签：php, char

我正在尝试在 PHP 中实现 rot13 密码算法。但与Java相比有点困难：

```
char a = 'A';
a += 13;
System.out.println(a);

output will be : N 
```

但是，在 php 5.0 中：

```
 $a = 'A';
   $a += 13;
   echo "$a";

  output will be: 13. 
```

我怎样才能像 Java 一样实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:07:26.823

由于 php 的类型很松散，当您在字符串中添加 13 时，您的字符串将评估为 0。

你可以做的是：

```
$a = "A";
$val_a = ord($a);
$val_a += 13;
echo chr($val_a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:07:34.897

如果你想专门做 rot13，你可以使用这个[`str_rot13()`](http://php.net/manual/en/function.str-rot13.php)函数。

```
$a = 'A';
echo str_rot13($a); // Outputs N 
```

# php - 查找数组中定义的子字符串并返回 PHP 中的键

> ID：12627489
> 
> 赞同：0
> 
> 时间：2012-09-27T18:04:41.000
> 
> 标签：php, arrays, string, substring, string-matching

我写了一个简单的函数来检查给定的字符串是否包含预定义的子字符串`stripos()`并返回子字符串的键。实际上，我需要密钥字符串才能在脚本的其他部分使用它。

我想知道是否有更好的方法来执行此操作，因为目前我正在解析整个数组，并在找到匹配项时返回结果。因此，如果数组变大，它会变慢。

```
$needles = array(
    'a' => 'ab',
    'b' => 'bc',
    'c' => 'cd',
    'd' => 'de',
    'e' => 'ef'
);  
echo get_key('cd', $needles) . '<br />';
echo get_key('my_de_string', $needles) . '<br />';
echo get_key('e_ab', $needles) . '<br />';

function get_key($mystring, $needles) {
    foreach ($needles as $key => $needle)
    {
        if ((stripos($mystring, $needle)) !== false) 
        {
            return $key;
        }
    }
} 
```

抱歉，如果以前有人问过这种问题。感谢你的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:12:10.397

您不是在解析整个数组，您只是在解析 foreach 循环通过的实体。我几乎可以肯定这是最快的方法。

如果你想让它更快，这取决于你需要运行多少次，以及你的数组将变得多大，[trie 结构](http://en.wikipedia.org/wiki/Trie)可能会使它更快。

# sql-server - 如何选择超过 1 个唯一标识符？

> ID：12627494
> 
> 赞同：2
> 
> 时间：2012-09-27T18:04:58.690
> 
> 标签：sql-server, select, uniqueidentifier

我想知道我是否可以`uniqueidentifier`在`SQL server`.

选择 1 ：`SELECT NEWID()`这会带回 1 个结果。

我想带回 50 个结果

**编辑：**

我希望结果在 1 个网格中返回，所以我可以一次复制所有结果。不要一一复制粘贴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:07:52.603

您是否尝试在 SQL Server Management Studio 中执行此操作？

尝试：

```
SELECT NEWID()
GO 50 
```

并运行这批

**更新：**

好的 - 那么这个怎么样？

```
SELECT NEWID()
FROM master..spt_values
WHERE name IS NULL
AND number < 50 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:16:29.033

假设`master.dbo.sysobjects`表中至少有 50 个系统对象：

```
SELECT TOP 50 NEWID() FROM master.dbo.sysobjects WHERE xtype = 'S' 
```

您不需要 order by，因为 NEWID 每次都是随机的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:21:00.057

```
--run these queries independently
CREATE TABLE #temp1 (ID UniqueIdentifier)
GO

INSERT INTO #temp1
SELECT NewID() AS ID
GO 50

SELECT *
FROM #temp1
GO

DROP TABLE #temp1
GO 
```

# javascript - 这安全吗？用于简单算术表达式的 eval 或 new 函数

> ID：12627503
> 
> 赞同：1
> 
> 时间：2012-09-27T18:05:15.853
> 
> 标签：javascript, regex, eval

我听说过很多关于 eval 的坏事，我什至从未尝试过使用它。但是今天我遇到了一种情况，它似乎是正确的答案。

我需要一个可以通过组合变量进行简单计算的脚本。例如，如果 value=5 且 max=8，我想评估 value*100/max。值和公式都将从外部来源检索，这就是我关心 eval 的原因。

我用一些示例代码设置了一个 jsfiddle 演示：

[http://jsfiddle.net/6yzgA/](http://jsfiddle.net/6yzgA/)

这些值使用 parseFloat 转换为数字，所以我相信我在这里很安全。公式中的字符再次匹配这个正则表达式：

```
regex=/[^0-9\.+-\/*<>!=&()]/, // allows numbers (including decimal), operations, comparison 
```

我的问题：

*   我的正则表达式过滤器能保护我免受任何攻击吗？
*   在这种情况下，是否有任何理由使用 eval 与 new Function？
*   还有另一种更安全的方法来评估公式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:08:02.123

由于您没有向您的服务器发送任何东西，或者在任何其他人的系统上使用任何东西，因此可能发生的最糟糕的情况是用户崩溃了他自己的浏览器，仅此而已。在这里使用没有什么不安全的`eval`，因为一切都发生在用户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:26:07.733

在客户端逃避和**阻止任何事情根本没有意义**。用户可以更改任何一段 JS 代码并运行它，就像我可以更改您发布的 jsfiddle 一样简单。相信我，就是这么简单，你不能依赖客户端的安全性。

如果您记得在服务器端转义输入字段，则无需担心。默认情况下有很多功能，具体取决于您使用的语言。

如果用户想输入`<script>haxx(l33t);</script>`- 让他输入。只需记住转义特殊字符，这样您就可以拥有`&lt;script&gt;haxx(l33t);&lt;/script&gt;`.

# postgresql - postgres sql查询计数两组对象

> ID：12627506
> 
> 赞同：0
> 
> 时间：2012-09-27T18:05:24.537
> 
> 标签：postgresql, join

我在下面有这个连接查询。我有一个问题。shipUnits 列出现错误。它只计算总项目。问题是我正在计算两组对象，除了发货字段之外，它们具有所有共同点。

```
SELECT count(*) as "units", (select count("EsnsVmas".*) from "EsnsVmas" where
      "EsnsVmas"."shipped" = false AND "EsnsVmas"."VmaId" = 2 AND "EsnsVmas"."approved" = 
       true) as "shippedUnits", "Vmas".*, "Vendors"."name" as "name", "EsnsVmas".id as    
       "OrderItemId", "PurchaseOrderItems"."price", "Grades"."name" as "vendorGrade", 
       "Items"."name" as "model", "Items".id as "ItemId", "Grades".id as "GradeId" 
FROM "Vmas" 
      JOIN "EsnsVmas" on ("EsnsVmas"."VmaId" = "Vmas".id) 
      JOIN "Esns" on ("EsnsVmas"."EsnId" = "Esns".id) 
      JOIN "PurchaseOrderItems"  on ("Esns"."PurchaseOrderItemId"  =  
            "PurchaseOrderItems".id) 
      JOIN "Items" on ("PurchaseOrderItems"."ItemId" = "Items".id) 
      JOIN "Grades" on ("PurchaseOrderItems"."GradeId" = "Grades".id) 
      JOIN "Vendors" on ("Vmas"."VendorId"  = "Vendors".id)
 WHERE "Vmas".id =2 AND "EsnsVmas"."approved" = true 
 GROUP BY "Vmas".id, "PurchaseOrderItems".id, "Grades".id, "Items".id, "Vendors".id, "EsnsVmas".id ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:44:08.970

除了硬编码的 VmaId = "2" 之外，内部和外部查询之间似乎仍然没有关系。由于我没有数据库中的表，我无法测试以确保它有效 - 但这是我第一次尝试可能的修复：

```
SELECT count(*) as "units", (select count("EsnsVmas".*) from "EsnsVmas" e2 where
      e2."shipped" = false AND e2."VmaId" = "Vmas".id AND e2."approved" = 
       true AND "EsnsVmas".id = e2.id) as "shippedUnits", "Vmas".*, "Vendors"."name" as "name", "EsnsVmas".id as    
       "OrderItemId", "PurchaseOrderItems"."price", "Grades"."name" as "vendorGrade", 
       "Items"."name" as "model", "Items".id as "ItemId", "Grades".id as "GradeId" 
FROM "Vmas" 
      JOIN "EsnsVmas" on ("EsnsVmas"."VmaId" = "Vmas".id) 
      JOIN "Esns" on ("EsnsVmas"."EsnId" = "Esns".id) 
      JOIN "PurchaseOrderItems"  on ("Esns"."PurchaseOrderItemId"  =  
            "PurchaseOrderItems".id) 
      JOIN "Items" on ("PurchaseOrderItems"."ItemId" = "Items".id) 
      JOIN "Grades" on ("PurchaseOrderItems"."GradeId" = "Grades".id) 
      JOIN "Vendors" on ("Vmas"."VendorId"  = "Vendors".id)
 WHERE "Vmas".id =2 AND "EsnsVmas"."approved" = true 
 GROUP BY "Vmas".id, "PurchaseOrderItems".id, "Grades".id, "Items".id, "Vendors".id, "EsnsVmas".id ; 
```

This changed two things. First was relating back with `"EsnsVmas".id = e2.id` at the end of the subselect (I aliased the EsnsVmas table in the subselect to `e2`). The other thing was changing `e2."VmaId" = "Vmas".id` (instead of hardcoding it to 2) which shouldn't affect the output but allows you to change the id in only one place.

# c# - 使用 C#.Net 从 Google 驱动器匿名下载 txt 文件

> ID：12627508
> 
> 赞同：0
> 
> 时间：2012-09-27T18:05:36.167
> 
> 标签：c#, .net, download, google-drive-api

我正在用 C#.Net 制作一个简单的程序，为一些客户提供不断更新的链接，我需要为我的应用程序提供一个简单的文本数据库。

我需要使用谷歌驱动器来让一些用户轻松编辑数据库。

那么，如何下载上传到 Google 云端硬盘并公开共享的文本或 doc 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:16:28.950

使用以下 Google Drive SDK

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# git - 如果我将公共主机的公钥添加到我的 github 帐户中，是否存在任何安全问题？

> ID：12627509
> 
> 赞同：1
> 
> 时间：2012-09-27T18:05:38.550
> 
> 标签：git, security, github, git-push, git-reset

这意味着其他人可能会推送到我托管在 github 上的 git repos，所以任何人都可以使用

```
git reset --hard first-commit-id
git push 
```

1.  这会破坏我托管在 github 上的 git 存储库吗？

2.  如果某个坏人运行上述命令，我会丢失我的历史吗？

这个问题与[如何从 github 中删除我的公钥不同？](https://stackoverflow.com/questions/6742555/how-do-i-remove-my-public-key-from-github)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:18:40.933

我不认为仅仅通过重置和发布`git push`你会删除任何东西。但是，还有其他命令，例如`git push -f`可以删除或破坏您的整个历史记录，所以我会说您的担心是有道理的。

[该线程](https://stackoverflow.com/questions/1754491/is-there-a-way-to-configure-git-repository-to-reject-git-push-force)是关于如何防止破坏历史记录的配置，但就像在[另一个线程](https://stackoverflow.com/questions/3166713/git-how-to-ignore-fast-forward-and-revert-origin-branch-to-earlier-commit)中解释的那样，该选项不可用于在 github 中进行配置。

所以，如果你允许每个人都推送到你的 github 仓库，我认为你有正当理由担心。

编辑：应该注意的是，这个答案只有在其他人真正有权访问时才有效。通过添加公钥，您通常不会授予任何人访问权限，即使他们拥有相同的公钥 - 要让某人推送，他们需要拥有*私钥*，而不是公钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T20:30:50.787

1）如果有些人会使用 git push -f 那么是的，你可能会在 repo 中丢失你的提交。**在这种情况下，您可以使用密码**创建自己的私钥（如果使用密码，您可以运行 ssh-agent 以在每次推送或拉取期间跳过输入密码）

2) **git reset**，这只是将 HEAD ref 移动到第一个提交，仅此而已，您可以使用**git reflog**修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:09:17.923

作为分布式 VCS，您将拥有一个与您的机器一样安全的个人本地存储库。

事实上，Github 上的 repo 已被授予完全的公共写访问权限，这是一种选择，因此不应被视为安全问题，而是促进协作，这具有非协作者试图破坏事物的次要风险.

关键是您仍将拥有一份安全的完整个人回购副本，以便继续运营和协作。并在损坏后恢复 github 副本。

# c# - 加载数据网格视图并添加组合框

> ID：12627510
> 
> 赞同：0
> 
> 时间：2012-09-27T18:05:39.390
> 
> 标签：c#, datagridview, ado.net

这是我用来创建数据网格视图然后添加 2 个组合框的方法。三个 DataTables 从其他类中加载。

```
public void GetWorkorderItems()
        {
        Workorders wo = new Workorders();
        ItemTable = wo.LoadWorkorderItemsTable(_ID);

        this.datagridWorkorderItems.DataSource = ItemTable;
        this.datagridWorkorderItems.AutoGenerateColumns = true;
        this.datagridWorkorderItems.Columns[0].Visible = false;
        this.datagridWorkorderItems.Columns[1].HeaderText = "Qty";
        this.datagridWorkorderItems.Columns[1].Width = 100;
        this.datagridWorkorderItems.Columns[2].HeaderText = "Part";
        this.datagridWorkorderItems.Columns[2].Width = 100;
        this.datagridWorkorderItems.Columns[3].HeaderText = "Labor";
        this.datagridWorkorderItems.Columns[3].Width = 100;
        this.datagridWorkorderItems.Columns[4].HeaderText = "Price";
        this.datagridWorkorderItems.Columns[4].Width = 150;
        this.datagridWorkorderItems.Columns[5].HeaderText = "Description";
        this.datagridWorkorderItems.Columns[5].Width = 150;

        Parts part = new Parts();
        DataTable partdata = new DataTable();
        partdata = part.LoadPartTable();
        DataGridViewComboBoxColumn pcb = (DataGridViewComboBoxColumn)this.datagridWorkorderItems.Columns[2];
        pcb.DataSource = partdata;
        pcb.DisplayMember = "PartName";
        pcb.ValueMember = "PartID";
        datagridWorkorderItems.Columns.Add(pcb);

        Labor labor = new Labor();
        DataTable data = new DataTable();
        data = labor.LoadLaborTable();
        DataGridViewComboBoxColumn cb = (DataGridViewComboBoxColumn)this.datagridWorkorderItems.Columns[3];
        cb.DataSource = data;
        cb.DisplayMember = "LaborItem";
        cb.ValueMember = "LaborID";
        datagridWorkorderItems.Columns.Add(cb);

        } 
```

当代码创建 DataGridViewComboBox 对象时，代码退出该方法并且不添加或加载组合框。也没有抛出异常。

有什么帮助吗？

编辑* ***** **** DataGridViewTextBoxColumn col0 = (DataGridViewTextBoxColumn)this.datagridWorkorderItems.Columns[0]; this.datagridWorkorderItems.Columns[0].DataPropertyName = "WOItemID"; this.datagridWorkorderItems.Columns[0].Visible = false; this.datagridWorkorderItems.Columns.Add(col0);

```
 DataGridViewTextBoxColumn col1 = (DataGridViewTextBoxColumn)this.datagridWorkorderItems.Columns[1];
        this.datagridWorkorderItems.Columns[1].DataPropertyName = "Quantity";
        this.datagridWorkorderItems.Columns[1].HeaderText = "Qty";
        this.datagridWorkorderItems.Columns[1].Width = 100;
        this.datagridWorkorderItems.Columns.Add(col1);

        DataGridViewComboBoxColumn pcb = (DataGridViewComboBoxColumn)this.datagridWorkorderItems.Columns[2];
        pcb.DataSource = partdata;
        pcb.DisplayMember = "PartName";
        pcb.ValueMember = "PartID";
        datagridWorkorderItems.Columns.Add(pcb); 
```

如果我理解的话，这可能是构建列的方法。

**********修复了有效的代码****** ** *** ******

 **```
public void GetWorkorderItems()
        {
        Workorders wo = new Workorders();
        ItemTable = wo.LoadWorkorderItemsTable(_ID);

        Parts part = new Parts();
        DataTable partdata = new DataTable();
        partdata = part.LoadPartTable();

        Labor labor = new Labor();
        DataTable data = new DataTable();
        data = labor.LoadLaborTable();

        this.datagridWorkorderItems.AutoGenerateColumns = false;

        DataGridViewTextBoxColumn col0 = new DataGridViewTextBoxColumn();
        col0.DataPropertyName = "WOItemID";
        col0.Visible = false;
        this.datagridWorkorderItems.Columns.Add(col0);

        DataGridViewTextBoxColumn col1 = new DataGridViewTextBoxColumn();
        col1.DataPropertyName = "Quantity";
        col1.HeaderText = "Qty";
        col1.Width = 100;
        this.datagridWorkorderItems.Columns.Add(col1);

        DataGridViewComboBoxColumn col2 = new DataGridViewComboBoxColumn();
        col2.DataPropertyName = "PartID";
        col2.DataSource = partdata;
        col2.DisplayMember = "PartName";
        col2.ValueMember = "PartID";
        col2.HeaderText = "Part";
        datagridWorkorderItems.Columns.Add(col2);

        DataGridViewComboBoxColumn col3 = new DataGridViewComboBoxColumn();
        col3.DataPropertyName = "LaborID";
        col3.DataSource = data;
        col3.DisplayMember = "LaborItem";
        col3.ValueMember = "LaborID";
        col3.HeaderText = "Labor";
        datagridWorkorderItems.Columns.Add(col3);

        DataGridViewTextBoxColumn col4 = new DataGridViewTextBoxColumn();
        col4.DataPropertyName = "Price";
        col4.HeaderText = "Price";
        col4.Width = 100;
        this.datagridWorkorderItems.Columns.Add(col4);

        DataGridViewTextBoxColumn col5 = new DataGridViewTextBoxColumn();
        col5.DataPropertyName = "Description";
        col5.HeaderText = "Description";
        col5.Width = 100;
        this.datagridWorkorderItems.Columns.Add(col5);

        this.datagridWorkorderItems.DataSource = ItemTable;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:31:04.347

尝试这样的事情：

```
public ExampleForm()
    {
        InitializeComponent();
        datagridWorkorderItems.AutoGenerateColumns = false;

        DataGridViewTextBoxColumn qtyColumn = new DataGridViewTextBoxColumn();
        qtyColumn.DataPropertyName = "Qty";
        qtyColumn.HeaderText = "Qty";
        datagridWorkorderItems.Columns.Add(qtyColumn);

        DataGridViewComboBoxColumn partColumn = new DataGridViewComboBoxColumn();
        partColumn.Items.Add(new Part() { ID = 0, PartName = "Tire" });
        partColumn.Items.Add(new Part() { ID = 1, PartName = "Motor" });
        partColumn.HeaderText = "Part";
        partColumn.DataPropertyName = "PartID";
        partColumn.ValueMember = "ID";
        partColumn.DisplayMember = "PartName";
        datagridWorkorderItems.Columns.Add(partColumn);

        List<WorkOrder> workOrders = new List<WorkOrder>();
        workOrders.Add(new WorkOrder() { Qty = 0, PartID = 0});
        workOrders.Add(new WorkOrder() { Qty = 2, PartID = 1});

        datagridWorkorderItems.DataSource = workOrders;
    }
}

public class WorkOrder
{
    public int Qty { get; set; }
    public int PartID { get; set; }
}

public class Part
{
    public int ID { get; set; }
    public string PartName { get; set; }
} 
```**

# c# - 按值传递和引用 C#

> ID：12627511
> 
> 赞同：-3
> 
> 时间：2012-09-27T18:05:41.080
> 
> 标签：c#

我知道发送给函数的值默认作为值传递，并且该方法接收变量的副本。我知道当一个变量通过引用传递时，该方法可以从它被调用时改变变量的值。话虽如此，有人可以帮助解释这些简单插图中发生了什么吗？提前致谢。我猜是通过引用传递表达式吗？

```
using System;
class Program
{
    static void Main(string[] args)
    {
        int x = 2;
        int y = 20;
        Console.WriteLine(Add(x, y));
    }

    static int Add(int x, int y)
    {
        int ans = x + y;
         x = 20;
         y = 40;
       // return x+y;
         return ans;
        //returns 22
    }
} 
```

进而

```
using System;
class Program
{
    static void Main(string[] args)
    {
        int x = 2;
        int y = 20;
        Console.WriteLine(Add(x, y));
    }

    static int Add(int x, int y)
    {
        int ans = x + y;
         x = 20;
         y = 40;
       return x+y;
      //   return ans;
        //returns 60
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:12:55.303

没有什么奇怪的事情发生，也没有什么与参数传递方式有关。

在第一个示例中：

```
// parameters in: x = 2, y = 20.
int ans = x + y;
// now ans contains the value 22.
x = 20;
y = 40;
// now x and y has changed, but the value in ans
// is already calculated and doesn't change.
return ans;
// returns 22; 
```

在第二个例子中：

```
// parameters in: x = 2, y = 20.
int ans = x + y;
// now ans contains the value 22.
x = 20;
y = 40;
// now x and y has changed, but not ans.
return x+y;
// the value of the expression is calculated with the current
// values, and 60 is returned.
// the variable ans still contains 22, but that isn't used here. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:09:40.760

在第一种情况下`Add`返回 x + y。在第二种情况下`Add`返回 20 + 40；

当你在函数中赋值时，你改变了变量的本地**副本**。不是实际值。

例如：

```
using System;
class Program
{
    static void Main(string[] args)
    {
        int x = 2;
        int y = 20;
        Console.WriteLine(Add(x, y));
        // x is still 2, y is still 20
    }

    static int Add(int x, int y)
    {
        int ans = x + y;
        // You calculate the parameters and store it in the local variable
        x = 20;
        y = 40;
        // You've adapted your local COPIES of the variables
        return ans;
        // You return the answer which was calculated earlier
    }
} 
```

但是，这是因为您正在处理值类型 ( `struct`)。如果您正在处理引用类型（`class`），那么这是另一回事，例如：

```
using System;
class Program
{
    private class Numbers
    {
        public int X;
        public int Y;
    }

    static void Main(string[] args)
    {
        Numbers num = new Numbers();
        num.x = 2;
        num.y = 20;
        Console.WriteLine(Add(num)); // Prints 2 + 20 = 22
        // num.x is now 20, and num.y is now 40
        Console.WriteLine(Add(num)); // Prints 20 + 40 = 60
    }

    static int Add(Numbers num)
    {
        int ans = num.x + num.y;
        // You calculate the result from the public variables of the class
        num.x = 20;
        num.y = 40;
        // You change the values of the class
        return ans;
        // You return the answer which was calculated earlier
    }
} 
```

在 C# 中有 4 种“类型”的传递参数：

*   按值传递值类型 ( `struct`)。
*   按值传递引用类型 ( `class`)。
*   通过引用传递值类型。
*   通过引用传递引用类型。

演示这 4 个的简短示例：

```
static void Main()
{
    int x = 5; // Value type
    List<int> list = new List<int>(new [] { 1, 2, 3 }); // Reference type

    ValueByValue(x); // x is still 5
    ReferenceByValue(list) // list still contains { 1, 2, 3 }
    ValueByReference(ref x); // x is now 10
    ReferenceByReference(ref list); // list is now a new list containing only { 4, 5, 6 }
}

static void ValueByValue(int x)
{
    x = 10; // Changes local COPY of x
}

static void ReferenceByValue(List<int> list)
{
    list = new List<int>(new [] { 4, 5, 6 }); // Changes local COPY of list
}

static void ValueByReference(ref int x)
{
    x = 10; // Changes the actual x variable in the Main method
}

static void ReferenceByReference(ref List<int> list)
{
    list = new List<int>(new [] { 4, 5, 6 }); // Changes the actual list in the Main method
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:09:45.307

在这两种情况下，它都是按值传递的。

但是在第二种情况下，如果您尝试在调用函数中打印 x 和 y 的值，它将仅返回 x=2 和 y=20。

x=20 和 y=40 只是在 add 函数中针对第二种情况进行了更改，它们不会将修改后的内容返回给调用者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:10:18.607

这两个都说明了按值传递，通常是值类型语义。

在您的**第一个**示例中，您是在说：

```
int ans = x + y; 
```

这会在那个时候评估`x`and`y`并将它们加在一起以存储在 ans 中，稍后设置`x`和新值*不会*影响 的值。 `y`*`ans`*

 *这样考虑：

```
static int Add(int x, int y)
{
    int ans = x + y;  // evaluates ans = x + y = 2 + 20 = 22
     x = 20;          // here ans = 22, x = 20, y = 20
     y = 40;          // here ans = 22, x = 20, y = 40
     return ans;      // returns ans which is still 22 since x & y are independent
} 
```

在您的**第二个**示例中，您将添加延迟到设置新值之后，因此 和 的新值`x`用于`y`计算

```
return x + y; 
```

所以，本质上，你得到：

```
static int Add(int x, int y)
{
    int ans = x + y;  // ans = 22, x = 2, y = 20
     x = 20;          // ans = 22, x = 20, y = 20
     y = 40;          // ans = 22, x = 20, y = 40
   return x+y;        // evaluates x + y = 60
} 
```

我*认为*可能让您感到困惑的是：

```
ans = x + y; 
```

不是一个函数，它是一个被评估和返回的表达式，更改*或*`x`在`y`此语句执行后不会*再次*影响`ans`。

再次要记住的关键点是在执行该语句时进行`ans = x + y;`评估。进一步的变化和不在这里发挥作用。`x``y``x``y`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T18:11:40.150

两者之间唯一真正的区别是，您在第一个中的 return 语句是返回保存在内存位置的值，该内存位置由该内存位置标识，该内存位置`ans`包含 22 的值。

在第二个中，return 语句返回由 标识的内存位置`x`的当前值加上由标识的内存位置的当前值`y`，它们是该方法的本地值（按值传递）并由您更改为 20和 40，分别。这个值当然是 60。

需要注意的重要一点是，按值传递意味着为值分配了本地堆栈内存（或其他）`x`，`y`并且不`x and`从调用者的方法中引用值 y`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T18:14:09.707

表达式总是产生一个**RVALUE** ..

一个例子会有所帮助

```
int x=50,y=20; 
```

->**右值**

您**不能**将任何内容分配给右值。

```
Example 
x+y=500;//INVALID 
```

->**左值**

你可以给它赋值。

```
Example
x=500;//VALID
y=545*33+4;//VALID 
```

所以，表达式永远不能通过引用传递

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T18:10:03.630

这里参数是按值传递的。只是在第二个示例中，因为 x 和 y 分别修改为 20 和 40，所以 60 作为两者的总和返回。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-27T18:10:17.623

```
 static int Add(int x, int y) 
 { 
      int ans = x + y; 
      x = 20; 
      y = 40; 
      // return x+y; 
      return ans; 
      //returns 22 
 } 
```

在这种方法中，计算是在修改之前进行的，因此是在变量改变之前存储的。

```
 static int Add(int x, int y) 
 { 
      int ans = x + y; 
      x = 20; 
      y = 40; 
      return x+y; 
      // return ans; 
      //returns 60 
 } 
```

在此方法中，`ans`不使用变量，更改 x 和 y 值，然后返回 的数学结果`x + y`，而不是`ans`。

此外，这些方法**都不**是按引用传递，它们都是按值传递，按引用传递方法在参数前面有`ref`关键字。

```
 static int Add(ref int x, int y) // x is the referenced variable in this example 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-27T18:12:48.237

不，此表达式不是按引用调用的，它唯一的按值调用。通过引用调用更改参数的值意味着您正在传递变量的引用。

**例子 ：**

```
using System;
class Program
{
    static void Main(string[] args)
    {
        int x = 2;
        int y = 20;

        Console.WriteLine("SUM  :: " + AddByValue(x, y));  // Call by value
        Console.WriteLine("X :: " + x + ", Y :: " + y);  // Nothing change to variable

        Console.WriteLine("SUM  :: " + AddByRef(ref x, ref y));  // Call by reference
        Console.WriteLine("X :: " + x + ", Y :: " + y);  // Value changed

    }

    static int AddByValue(int x, int y)
    {
        int ans = x + y;
         x = 20;
         y = 40;
       return ans;
    }

    static int AddByRef(ref int x, ref int y)
    {
        int ans = x + y;
        x = 20;
        y = 40;
       return ans;
    }

} 
```

**输出 ：**

```
SUM  :: 60
X :: 2, Y :: 20

SUM  :: 60
X :: 20, Y :: 40 
```*

# android - 如何知道用户是否点击了微调器android

> ID：12627520
> 
> 赞同：1
> 
> 时间：2012-09-27T18:05:58.413
> 
> 标签：android, android-spinner

我已经实现了多个（七个）微调器并用三个选项填充它们：是、否和未知。“未知”是默认选项。现在我想知道用户是否点击了微调器。由于默认选项也可以是有效答案，因此我无法在 Spinner 类中使用 getSelectedItemPosition()。

我只想知道用户是否单击了该特定微调器，以便我可以根据此信息生成警报消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:09:38.357

您应该做的第一件事是阅读Android 开发者网站上的[Spinners 指南。](http://developer.android.com/guide/topics/ui/controls/spinner.html)完成后，您会发现这个方便的示例：

```
public class MySpinnerActivity extends Activity implements OnItemSelectedListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        spinner.setOnItemSelectedListener(this);
    }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:12:30.413

Simpy，首先将 OnItemSelectedListener 设置为每个 Spinner，然后签入方法，

如果你有更多的微调器然后 getSelectedItem() 在 onItemSeleted 方法中使用下面的代码，

```
String str1= (String) spinner1.getSelectedItem().toString();
String str2= (String) spinner2.getSelectedItem().toString(); 
```

# ruby-on-rails-3.1 - 使用 filepicker-rails 时，我应该在我的 rails 应用程序中的哪里定义我的 avatar_url 方法？

> ID：12627525
> 
> 赞同：0
> 
> 时间：2012-09-27T18:06:11.130
> 
> 标签：ruby-on-rails-3.1, rubygems, filepicker.io

我已经安装了`filepicker-rails`gem，并且可以将文件上传到`filepicker.io`服务器。当我尝试显示不同用户配置文件的图像时，出现错误：

```
undefined method 'avatar_url' for nil:NilClass 
```

在我的用户目录下，在 show.html.erb 文件中，我有：

```
<%= filepicker_image_tag @user.avatar_url, w: 160, h: 160, fit: 'clip' %> 
```

我的 User.rb 文件下有以下内容：

```
def avatar_url(user)
  user.avatar_url
end 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:34:10.023

基本上，您需要在数据库中有一列名为`avatar_url`. 编写一个迁移，它将为您提供一个`avatar_url`列作为常规字符串列。由于您使用的是 Rails，ActiveRecord 将为`avatar_url`您提供方法。

编辑：在您的控制器中，您可能没有正确查找您的用户，这导致在您的视图中对 NilClass 进行方法调用。

# delphi - 是否可以在 TForm 上对 VCL 控件进行 Alpha 混合？

> ID：12627526
> 
> 赞同：13
> 
> 时间：2012-09-27T18:06:12.663
> 
> 标签：delphi

是否可以对 TForm 上的 VCL 控件进行 Alpha Blend 或实现类似的效果？

例如，考虑以下屏幕截图，其中两个 TPanel 放置在 TForm 上以及其他控件。两个面板都可以拖动（*请参阅* [如何在运行时移动和调整控件大小](http://delphi.about.com/library/weekly/aa102505a.htm)）。

现在，是否可以在拖动时使这些面板半透明，以便您可以看到下面的内容？*（如通过图像处理产生的第二张图像所示）*

![示例表单图像](../Images/6350f96501ccbed480216194b6fd932d.png)

![TLama 和 Uwe Raabe 提出的解决方案](../Images/3a0e9c98ec7ab953e1c15ae8e90e9483.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T20:17:18.630

VCL 让您有机会[指定](http://www.blong.com/Conferences/BorCon2001/DragAndDrop/4114.htm#VCLDragImages)要在拖放期间使用的拖动图像列表，这是一个简单的示例： ![在此处输入图像描述](../Images/fb457c729ff9afa5fa2b6ab1a25b0509.png)

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls;

type
  TPanel = class(Vcl.ExtCtrls.TPanel)
  protected
    function GetDragImages: TDragImageList; override;
  end;

  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    CheckBox1: TCheckBox;
    Edit1: TEdit;
    Label1: TLabel;
    Panel1: TPanel;
    Panel2: TPanel;
    Panel3: TPanel;
    procedure FormCreate(Sender: TObject);
    procedure FormDragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
    procedure PanelStartDrag(Sender: TObject; var DragObject: TDragObject);
    procedure PanelEndDrag(Sender, Target: TObject; X, Y: Integer);
  private
    FDragImages: TDragImageList;
  public
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TPanel }

function TPanel.GetDragImages: TDragImageList;
begin
  Result := (Owner as TForm1).FDragImages;
end;

type
  TControlProc = reference to procedure(Control: TControl);

procedure IterateControls(Control: TControl; Proc: TControlProc);
var
  I: Integer;
begin
  if Assigned(Control) then
    Proc(Control);
  if Control is TWinControl then
    for I := 0 to TWinControl(Control).ControlCount - 1 do
      IterateControls(TWinControl(Control).Controls[I], Proc);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FDragImages := nil;
  // set display drag image style
  IterateControls(Self,
    procedure(Control: TControl)
    begin
      Control.ControlStyle := Control.ControlStyle + [csDisplayDragImage];
    end
  );
end;

procedure TForm1.FormDragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
begin
  Accept := Source is TPanel;
end;

procedure TForm1.PanelEndDrag(Sender, Target: TObject; X, Y: Integer);
begin
  FreeAndNil(FDragImages);
end;

procedure TForm1.PanelStartDrag(Sender: TObject; var DragObject: TDragObject);
var
  Image: TBitmap;
begin
  if not (Sender is TPanel) then
    Exit;

  Image := TBitmap.Create;
  try
    Image.PixelFormat := pf32bit;
    Image.Width := TControl(Sender).Width;
    Image.Height := TControl(Sender).Height;
    TPanel(Sender).PaintTo(Image.Canvas, 0, 0);

    FDragImages := TDragImageList.Create(nil);
    FDragImages.Width := Image.Width;
    FDragImages.Height := Image.Height;
    FDragImages.SetDragImage(FDragImages.Add(Image, nil), 0, 0);
    FDragImages.ShowDragImage;
  except
    Image.Free;
    FreeAndNil(FDragImages);
    raise;
  end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T19:49:16.697

你也可以在 Delphi 中做到这一点。基本思想是将控件放入启用了 alpha 混合的自动调整大小的边框形式。

根据您链接到的文章，在 MouseDown 事件中添加以下行：

```
 P := TWinControl(Sender).ClientToScreen(Point(0,0));
  frm := TForm.Create(nil);
  TWinControl(Sender).Parent := frm;
  frm.BorderStyle := bsNone;
  frm.AlphaBlend := true;
  frm.AlphaBlendValue := 128;
  frm.AutoSize := true;
  frm.Left := P.X;
  frm.Top := P.Y;
  frm.Position := poDesigned;
  frm.Show; 
```

在 MouseMove 事件中设置控件父级的 Left 和 Top 属性：

```
 GetCursorPos(newPos);

  Screen.Cursor := crSize;
  Parent.Left := Parent.Left - oldPos.X + newPos.X;
  Parent.Top := Parent.Top - oldPos.Y + newPos.Y;
  oldPos := newPos; 
```

并在 MouseUp 事件中释放表单，将控件父级设置回原始父级并将屏幕位置转换为相对于它的新位置：

```
frm := TWinControl(Sender).Parent;
P := Point(frm.Left, frm.Top);
P := ScreenToClient(P);
TWinControl(Sender).Parent := Self;
TWinControl(Sender).Left := P.X;
TWinControl(Sender).Top := P.Y;
frm.Free;
Screen.Cursor := crDefault;
ReleaseCapture;
inReposition := False; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-27T20:03:07.107

要实现显示控件图像的拖动操作，您必须创建一个[`TDragControlObject`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TDragControlObject)后代并实现该[`GetDragImages`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TDragControlObject.GetDragImages)方法，从这里您必须确保将*csDisplayDragImage*值添加到要拖动的控件的[ControlStyle](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TControl.ControlStyle)属性中。

您可以在此处找到有关此主题的非常好的文章[`Implementing Professional Drag & Drop In VCL/CLX Applications`](http://www.blong.com/Conferences/BorCon2001/DragAndDrop/4114.htm#VCLHotSpots)

# database - 在一个非常大的文件中逐行读取特定的行

> ID：12627527
> 
> 赞同：0
> 
> 时间：2012-09-27T18:06:13.623
> 
> 标签：database, perl, large-files, readlines

该文件将不适合内存。它超过 100GB，我想按行号访问特定行。在我到达它之前，我不想逐行计算。

我已阅读[http://docstore.mik.ua/orelly/perl/cookbook/ch08_09.htm](http://docstore.mik.ua/orelly/perl/cookbook/ch08_09.htm)

当我使用以下方法构建索引时，行返回工作到某个点。一旦行号非常大，返回的行是相同的。当我转到文件中的特定行时，将返回同一行。它似乎适用于第 1 行到第 350000 行（大约）；

```
 # usage: build_index(*DATA_HANDLE, *INDEX_HANDLE) 
    sub build_index {
        my $data_file  = shift;
        my $index_file = shift;
        my $offset     = 0;

        while (<$data_file>) {
            print $index_file pack("N", $offset);
            $offset = tell($data_file);
        }
    }

    # usage: line_with_index(*DATA_HANDLE, *INDEX_HANDLE, $LINE_NUMBER)
    # returns line or undef if LINE_NUMBER was out of range
    sub line_with_index {
        my $data_file   = shift;
        my $index_file  = shift;
        my $line_number = shift;

        my $size;               # size of an index entry
        my $i_offset;           # offset into the index of the entry
        my $entry;              # index entry
        my $d_offset;           # offset into the data file

        $size = length(pack("N", 0));
        $i_offset = $size * ($line_number-1);
        seek($index_file, $i_offset, 0) or return;
        read($index_file, $entry, $size);
        $d_offset = unpack("N", $entry);
        seek($data_file, $d_offset, 0);
        return scalar(<$data_file>);
    } 
```

我也尝试过使用 DB_file 方法，但似乎需要很长时间才能打成平手。我也不太明白“DB_RECNO 访问方法将数组绑定到文件，每个数组元素一行”的含义。并没有把文件读入数组正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:13:01.747

`pack N`创建一个 32 位整数。最大 32 位整数是 4GB，因此使用它来将索引存储到 100GB 大小的文件中是行不通的。

一些构建使用 64 位整数。在那些上，你可以使用`j`.

一些构建使用 32 位整数。`tell`返回一个浮点数，允许您无损地索引最大 8,388,608 GB 的文件。在那些上，你应该使用`F`.

可移植代码如下所示：

```
use Config qw( %Config );
my $off_t = $Config{lseeksize} > $Config{ivsize} ? 'F' : 'j';

...
print $index_file pack($off_t, $offset);
... 
```

* * *

注意：我假设索引文件仅由构建它的同一个 Perl 使用（或至少一个具有相同整数大小、查找大小和机器字节序的 Perl）。如果这个假设对你不成立，请告诉我。

# javascript - 如何从javascript中的鼠标移动中获取相对于给定点的旋转方向？

> ID：12627532
> 
> 赞同：0
> 
> 时间：2012-09-27T18:06:40.450
> 
> 标签：javascript, rotation, trigonometry

我正在使用以下函数来跟踪鼠标移动和旋转对象：

```
function getAngle(dx, dy) {
    var angle
    if (dx != 0) {
        var radians = Math.atan(dy / dx) + (dx < 0 ? Math.PI : 0)
        angle = radiansToDegrees(radians);
        if (angle < 0) angle += 360;
    } else {
        angle = dy > 0 ? 90 : 270;
    }
    return angle;
}

function getAngleBetweenPoints(p1, p2) {
    var dx = p1.x - p2.x
    var dy = p1.y - p2.y
    return getAngle(dx, dy)
}

$(document).mousemove(function (e) {
    if (selectionBounds) {
        var midpoint = new pe.Classes.Point(selectionBounds.Left + (selectionBounds.Width / 2), selectionBounds.Top + (selectionBounds.Height / 2));
        var mousepoint = new pe.Classes.Point(e.pageX, e.pageY);
        var angle = getAngleBetweenPoints(midpoint, mousepoint);
        if (lastAngle) {
            var diff = angle - lastAngle;
            rotate(degreesToRadians(diff));
        }
        lastAngle = angle;
    }
}); 
```

这很好用，只要我慢慢移动鼠标，只要鼠标不会太靠近原点（中点）。移动太快会导致额外的旋转，靠近原点会导致意外的方向变化。

如何修复此代码？我真的只需要知道鼠标在哪个方向移动（顺时针或逆时针），因为我可以从鼠标点的变化中了解速度，然后根据它更新旋转。

从字面上看，与此相关的主题有数十个 SO 线程（[如何在从枢轴点旋转矩形后获取矩形的方向（角度）](https://stackoverflow.com/questions/8798743/how-to-get-the-direction-angle-of-rectangle-after-rotating-it-from-a-pivot-poi)，[如何从鼠标坐标获取基本鼠标方向](https://stackoverflow.com/questions/1689397/how-to-get-cardinal-mouse-direction-from-mouse-coordinates)，[在在 JavaScript 中旋转](https://stackoverflow.com/questions/9779745/moving-a-rotated-element-in-the-direction-of-the-rotation-in-javascript)） - 但我找不到任何可以回答这个问题的东西，除了一个评论提到这个需要交叉产品，我不完全理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T23:19:53.473

[http://jsfiddle.net/wRexz/3/](http://jsfiddle.net/wRexz/3/)（单击并拖动以旋转矩形）

```
 var angle = 0, sp = startpoint, mp = midpoint;
    var p = {x:e.offsetX, y:e.offsetY};
    var sAngle = Math.atan2((sp.y-mp.y),(sp.x - mp.x));
    var pAngle = Math.atan2((p.y-mp.y),(p.x - mp.x));        

    angle = (pAngle - sAngle) * 180/Math.PI;

    $("#display").text(angle);
    $('#rotateme').css({ rotate: '+=' + angle });

    startpoint = {x:p.x, y:p.y}; 
```

这里的概念是基本三角。您从“起点”的 0 处找到角度，并对“终点”或“当前点”执行相同的操作。从第二个中减去第一个，这就是你的“三角角”。

由于角度变化速度的特性，您仍然会在中点附近出现不稳定的行为。对此的一种解决方案是在距中点一定距离内时停止旋转。

# c# - .NET 框架中是否定义了 FLT_EPSILON？

> ID：12627534
> 
> 赞同：4
> 
> 时间：2012-09-27T18:06:54.807
> 
> 标签：c#, .net, floating-point

> **可能的重复：**
> [Double.Epsilon 表示相等，大于、小于、小于或等于、大于或等于](https://stackoverflow.com/questions/2411392/double-epsilon-for-equality-greater-than-less-than-less-than-or-equal-to-gre)

我最近发现.NET Framework 中的`FLT_EPSILON`定义与 .NET Framework 中的定义`<cfloat>`完全不同。`Single.Epsilon`

*   `FLT_EPSILON`定义为满足 1.0 + epsilon != 1.0 的最小值。

*   `Single.Epsilon`被定义为大于零的最小可能数。

`<cfloat>`.NET Framework 中的某处是否定义了-style epsilon？或者，如果我需要定义自己的，是否应该在 .NET 中与我在 .NET 中看到的值相同地定义`<cfloat>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T04:13:19.590

无论如何，这在 .NET Framework 中的任何地方都没有定义。

如果您需要相同的常量，您可以将其定义为`float Epsilon = 1.192092896e-07F;`.

有关替代方案和用法的更大讨论，请参见：[Double.Epsilon 表示相等，大于、小于、小于或等于、大于或等于](https://stackoverflow.com/questions/2411392/double-epsilon-for-equality)。

# python - 我什么时候应该使用 tempfile

> ID：12627536
> 
> 赞同：1
> 
> 时间：2012-09-27T18:06:59.187
> 
> 标签：python

我有一个关于 Python 的快速问题`tempfile`。

我什么时候应该使用临时文件？如果我`tempfile.mkstemp`用来创建一个临时文件，这和普通文件一样吗？有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:11:40.587

[文档](http://docs.python.org/library/tempfile.html)几乎说明了一切。在我看来，您应该`tempfile`在需要创建文件但不关心其名称时使用。如果您愿意，您可以在完成或保存后自动删除文件。它也可以对其他程序可见或不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:12:52.693

从[学习 Python](http://oreilly.com/catalog/lpython/chapter/ch09.html)：

使用临时文件

> 如果您曾经编写过 shell 脚本并且需要使用中间文件来存储处理的某些中间阶段的结果，那么您可能会遭受目录垃圾的困扰。您从 20 个名为 log_001.txt、log_002.txt 等的文件开始，而您想要的只是一个名为 log_sum.txt 的摘要文件。此外，您还有一大堆 log_001.tmp、log_001.tm2 等文件，虽然它们被标记为临时文件，但仍然存在。至少这是我们在自己的生活中所看到的。要将订单放回您的目录，请使用特定目录中的临时文件并在之后清理它们。
> 
> 为了帮助解决这个临时文件管理问题，Python 提供了一个名为 tempfile 的漂亮小模块，它发布了两个函数：mktemp() 和 TemporaryFile()。前者返回计算机上为临时文件保留的目录中当前未使用的文件的名称（例如 Unix 上的 /tmp 或 Windows 上的 C:\TMP）。后者直接返回一个新的文件对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:10:36.850

这篇文章很好地解释了它的用途。

[http://pythoncentral.org/using-the-python-tempfile-module/](http://pythoncentral.org/using-the-python-tempfile-module/)

第一段提供了很好的总结

> 在使用 Python 编程时，有时您可能会有一些需要以文件形式使用或操作但尚未写入文件的数据。自然，想到的第一个解决方案是打开一个新文件或现有文件，写入数据并最后保存（如果您不熟悉如何执行此操作，请查看文章在 Python 中读取和写入文件）。但是，也可能是这样的情况，一旦您的脚本完成运行，您就不再需要或不需要该文件，因此，不希望它在您或任何其他人的文件系统中徘徊.

# node.js - Node 什么时候发出数据事件？

> ID：12627538
> 
> 赞同：1
> 
> 时间：2012-09-27T18:07:06.880
> 
> 标签：node.js, upload

我正在考虑实现一个节点服务器，它将接收潜在大文件的上传并通过另一个流转发数据。我找到了这篇文章：

[http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again](http://www.componentix.com/blog/13/file-uploads-using-nodejs-once-again)

其中有一些有用的代码示例，围绕处理各种事件以及两侧流速度不同的泵问题。我仍然不清楚（而且我似乎无法找到相关文档）是何时通过节点为传入流确切地发出“数据”事件。

节点文档状态：

> 事件：“数据”
> 
> 接收到数据时发出。参数数据将是一个缓冲区或字符串。数据的编码由 socket.setEncoding() 设置。（有关更多信息，请参阅可读流部分。）

“收到数据时”是什么意思？当传入的数据块达到一定大小时会触发吗？传入连接何时关闭？一定时间后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:43:48.527

流有一个内部缓冲区，用于存储数据，直到准备好触发数据事件。这可能是几种情况，具体取决于流的类型：内部缓冲区已满、读取所有数据、连接关闭等。

网络流可能正在使用从套接字的读取方法接收到的任何数据触发数据事件。如果我能在节点源中找到它，我会引用它。

# cocoa - “beginModalSessionForWindow”会导致无模式会话？

> ID：12627541
> 
> 赞同：2
> 
> 时间：2012-09-27T18:07:22.680
> 
> 标签：cocoa, modal-dialog

我正在构建一个带有主窗口和子窗口的应用程序，我想将其作为模式会话呈现。所以我在窗口控制器中使用这段代码：

```
self.session = [[NSApplication sharedApplication] beginModalSessionForWindow: self.window];
[[NSApplication sharedApplication] runModalSession: self.session]; 
```

然而，不管我把这段代码放在哪里——在windowDidLoad中，在来自主窗口的post-windowDidLoad调用中，甚至在窗口控制器的init函数中——我得到的是一个无模式的子窗口。子窗口出现在主窗口上方，但主窗口继续响应输入事件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:50:43.393

nvm - 通过阅读一些示例找到了我的答案。（再一次，在 Stack 上发布*之前*数小时的研究未能产生答案，我在发布*后就*偶然发现了洞察力。）

对于后代，这是答案：beginModalSessionForWindow 不像 runModalForWindow 那样工作。

使用 runModal，您可以在*任何地方*执行该代码，Cocoa 将立即停止除模式窗口之外的所有处理。（不幸的是，这包括与用于后台处理的非 UI 事件相关联的计时器。）执行 runModal 的代码被阻止，并且只有在模式窗口关闭后才能恢复。系统强制执行窗口的模态。

beginModalSessionForWindow 的工作方式非常不同。无论你在哪里执行它，代码都会启动模态窗口*，然后继续执行*。在一般用例中（如 Apple 的示例所示），如果您在循环之前调用 beginModal，然后在轮询会话状态时为循环设置条件，则循环可以执行您想要的任何其他处理；在循环期间，它还会阻止正常的 UI 事件——就像任何 IBAction 在执行长时间运行的循环时一样。

关键是 beginModalSession 实际上并不强制执行窗口的任何模式。相反，*您的代码*通过执行长时间运行的循环来强制执行窗口的模式。如果您不使用循环，而只是让“模态”会话运行并恢复普通事件循环......那么您的其他窗口将获得*所有*事件处理，包括 UI 事件。“模态”窗口变为无模态。

我会争辩说“beginModalSessionForWindow”真的应该被称为**beginModelessSessionForWindow**，因为这就是它的作用：它创建一个无模式窗口并返回。

# asp.net - ASP.NET Web 服务和处理丢包

> ID：12627556
> 
> 赞同：1
> 
> 时间：2012-09-27T18:08:10.353
> 
> 标签：asp.net, web-services, soap

我想知道是否有人可以讨论一些可能处理 .NET WinForms 应用程序和我们的 ASP.NET Web 服务之间数据包丢失的方法。目前我们有销售人员使用我们的软件超过 4G 或 3G 空中卡，并且应用程序偶尔会出现问题，如果他们没有完整的条。

我可以想到两种假设的方法来处理这个问题，但不确定如何实现第一种方法（假设它甚至可能）：

能否以某种方式使用 HTTP 恢复来恢复 HTTP 调用？

处理异常并重新发出 Web 服务调用 X 次怎么样？不幸的是，我不确定他们会遇到什么异常。我已经用他们的航空卡进行了大量的测试，我没有得到他们在路上时遇到的错误。

另外，是否有某种工具可以用来模拟丢包？这将使测试更容易。

谢谢-亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-28T04:54:39.250

您可以使用[Wireshark](https://www.wireshark.org/)，它是查找数据包丢失和重新传输以及与数据包有关的许多其他问题的好工具。您也可以从 YouTube 获得一些不错的入门指南视频。

# perl - Perl Net::FTP 对象预期的重用行为？

> ID：12627561
> 
> 赞同：0
> 
> 时间：2012-09-27T18:08:26.143
> 
> 标签：perl, ftp

使用退出后，我似乎无法重新使用 Net::FTP 对象。

这是预期的吗？我无法从文档（[cpan](http://search.cpan.org/dist/libnet/Net/FTP.pm)）中分辨出来。

作为一种解决方法，每次我需要执行一批 ftp 操作时，我都会创建一个新的 Net::FTP 对象。这似乎很浪费。

以下示例显示：初始登录成功，打印根目录 ls，退出（套接字关闭），登录失败并显示 ftp 消息“连接已关闭”。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Net::FTP;

my $hostname = 'foo';
my $username = 'bar';
my $password = 'baz';

# successful first pass
my $ftp = Net::FTP->new( $hostname ) or die "cannot connect to $hostname: $@";
$ftp->login( $username, $password ) or die "cannot login: ", $ftp->message;
map { print "ls_output: $_\n" } $ftp->ls; # success
$ftp->quit or die "cannot close connection: ", $ftp->message;

# re-use attempt
$ftp->login( $username, $password ) or die "cannot login: ", $ftp->message;

# never gets here since re-use attempt fails
print "done!\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:23:36.873

`quit`导致远程端关闭连接，并且在不关闭连接的情况下无法注销。如果您试图避免重新连接，则不能。

另一方面，也许您希望`login`将您连接到服务器。连接是在 中创建的`new`，而不是在 中创建的`login`，并且 Net::FTP 不提供重新连接的方法。

Net::FTP 是 IO::Socket::INET 的子类，因此您可以使用 IO::Socket::INET's 重新连接`connect`，但您还必须重新初始化构造函数通常初始化的一个或两个字段。不过没什么复杂的。

但是，是否还有需要解决的问题？您谈到效率低下，但与建立 FTP 连接所需的时间相比，创建和初始化对象所需的时间相形见绌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:21:16.500

这不是 Perl 问题。这是FTP协议。发出后`quit`……就是这样，FTP会话结束。没有什么可以发出`login`命令了——没有人再听了。

使用 FTP 客户端在命令行上自己尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:24:00.963

从您链接的这个文档中：

> 辞职 （）
> 
> 向远程 FTP 服务器发送 QUIT 命令并关闭套接字连接。

关闭套接字连接会终止与服务器的连接，而不仅仅是该服务器上的会话。

为每个连接创建一个新对象有两个缺点：

1.  Perl 可能会也可能不会将旧对象的数据保存在内存中——但垃圾收集不应该打扰您。

2.  创建新连接需要一些开销。但除非您每秒创建数十个新连接，否则这不会打扰您。

所以每次都创建新对象；如果您愿意，可以重复使用相同的变量。在 Perl 中考虑得太低，过早优化只会造成伤害。

# twitter-bootstrap - 在没有“重定向”的情况下执行远程“HTML代码”并保持在同一页面上

> ID：12627562
> 
> 赞同：1
> 
> 时间：2012-09-27T18:08:27.970
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用 twitter bootstrap 构建一个网页。我的目标是显示`modal`单击某个按钮的时间。

如果我将此“模态”代码与按钮放在同一个文件中，它会“不”单击按钮弹出模态窗口，但是当我将此模态代码放在单独的文件中`file.php`并调用它时，它会重定向到`file.php`页面-哪个我不想要。我想在那个按钮的页面上。

[http://jsfiddle.net/4ZaA3](http://jsfiddle.net/4ZaA3)

# android - animateLayoutChanges 是否适用于 ListView？

> ID：12627563
> 
> 赞同：6
> 
> 时间：2012-09-27T18:08:32.597
> 
> 标签：android, android-listview

listView 是一个 ViewGroup ，似乎是进行动画布局更改的不错选择。但是，它似乎忽略了标志或手动构建 LayoutTransition 并以这种方式进行设置。是什么赋予了？任何地方都没有记录这个非常重要的 ViewGroup 不支持这个非常重要的动画功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:42:46.640

不幸的是，不，`ListView`不支持`android:animateLayoutChanges`，至少不是您期望的那样。`ListView`当它不能重用现有视图时，它只会为必须创建的孩子设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T15:52:52.857

我补充说，在 ListView 的布局中使用选项 android:animateLayoutChanges="true" 会阻止您选择 ListView 的任何项目；你可以这样做，只有在添加一个新项目并返回到 ListView 之后。我使用最新的 SimpleCursorAdapter 和 v4 支持库附带的那个错误时遇到了这个错误

问候 FD

# eclipse - 用 SVN 检出单个文件？

> ID：12627565
> 
> 赞同：1
> 
> 时间：2012-09-27T18:08:57.647
> 
> 标签：eclipse, svn

> **可能重复：**
> [从 Subversion 签出一个文件](https://stackoverflow.com/questions/122107/checkout-one-file-from-subversion)

据我了解，[Subversion](http://en.wikipedia.org/wiki/Apache_Subversion) (SVN) 至少只支持检出一个目录。这个对吗？

[如果是这样， Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中的 History 命令如何允许您查看单个文件的旧版本？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T18:48:46.437

`svn log URL [PATH]`允许使用文件

# java - 为什么 Java 的 SimpleDateFormat 类是非线程安全的？

> ID：12627568
> 
> 赞同：5
> 
> 时间：2012-09-27T18:09:10.103
> 
> 标签：java, api, date, concurrency, thread-safety

问题与 Java 的 SimpleDateFormat 类有关。我在文档中读到

> 日期格式不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。

显然，我在被它以最模糊的方式击中*后*读过它。

有谁知道为什么需要通过“格式”方法访问类成员中的状态信息？

它是某种速度优化吗？我想不出一个正当的理由。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T18:47:39.670

你的答案几乎就在这里：

> /* * (C) 版权所有 Taligent, Inc. 1996 - 保留所有权利

在 1.4 热点之前，用 Java 编写多线程代码主要是研究生的家庭作业。在 Web 应用程序服务器的真正到来和容器驱动的高并发系统兴起之前，该语言已经出现了大约 10 年，而我们大多数人（无论如何都不是安卓）花费了我们绝大多数时间在其中工作。

在 1996 年，垃圾收集是一个非常缓慢和痛苦的过程，通常会让你的 UI 暂停并在它发生时看起来被锁定，就像明智地创建新对象被认为是非常昂贵的（当你与 Windows 95 战斗时创建连续的内存空间在没有 L2 CPU 缓存的情况下共享 4MB 物理内存需要一些时间......）。

因此，在多线程极为罕见且内存非常宝贵的环境中（您的普通用户可能仍在使用 486 或 Pentium 1，系统内存为 8MB 甚至 4MB ......） - 尽可能使用单个日历实例，日历本身就是一个笨重的野兽。

今天，我们可以嘲笑这样一个有状态的类是多么可怕的做法，但在当时它也可以很容易地被辩护为正确的选择。

捍卫 Sun 对 100% 向后兼容性的痴迷并且从不更新它是理所当然的事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:15:50.887

看起来它是出于性能原因而完成的。我看不出有其他解释。

这里有一个很好的总结： [为什么 Java 的 SimpleDateFormat 不是线程安全的？](https://stackoverflow.com/questions/6840803/simpledateformat-thread-safety)

# opencv - 运动物体的光流：几个点

> ID：12627570
> 
> 赞同：2
> 
> 时间：2012-09-27T18:09:10.657
> 
> 标签：opencv, opticalflow

我正在尝试做这样的事情： [http ://www.youtube.com/watch?feature=player_embedded&v=MIYt1yNwoZU](http://www.youtube.com/watch?feature=player_embedded&v=MIYt1yNwoZU)

而且我走对了，它可以很好地进行 2 小时的编码。但我有一个问题：

*   我正在使用 opencv 2.4，周围有一些选项.. 见[这里](http://opencv.itseez.com/modules/video/doc/video.html)。哪一个是最好的？lucas kanade 有一些自动特征检测？或者也许一个简单的全球定位就足够了？甚至卡尔曼滤波器？现在我正在使用密集的farneback算法，我认为这是第一个（=更简单）选项，但可能不是最好的。

*   在计算图像上的光流之后（为了计算光流而缩小 2 倍，因为这是一项艰苦的工作），我取向量的平均值。正常平均值，将所有这些相加并除以向量的数量。所以在流垫上有一个嵌套的for循环。更好的方法？

    ```
    Point2f average_motion(0,0); float n=1;

    for(int y = 0; y < flow.rows; y += step)
        for(int x = 0; x < flow.cols; x += step) {

            const Point2f& fxy = flow.at<Point2f>(y, x);

            if( abs(fxy.x) > threshold || abs(fxy.y) > threshold) {
                average_motion += fxy;
                n++;
            }

        }
     average_motion *= 1/n;

     average_motion *= 1/n;
     cout << average_motion << endl; 
    ```

*   我正在移动矩形，但向右/向左的移动似乎有点奇怪，相反，向上/向下的效果非常好！有人可以解释我为什么吗？

*   翻译是好的，但我被困在旋转..如果我得到平均向量，我怎么能得到学位？我尝试过使用 X 轴的向量之间的角度，但效果不佳。一些提示？

*   现在我正在用 opencv 绘图 api 绘制东西，但是从 2.4 开始，也有 opengl 支持.. 应该很好，但我没有找到这方面的例子..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:03:12.207

光流的最佳方法是使用卡尔曼滤波器来预测运动，因此您可以在该方向上投影补丁并减少下一帧的搜索区域。提高计算速度。

坏消息是使卡尔曼滤波器正确跟踪是一项艰巨的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T16:05:59.603

我会建议使用 Lucas Kanade 方法，因为它非常快。或者您可以使用[RLOF](http://www.nue.tu-berlin.de/menue/forschung/projekte/rlof/)的 GPU 实现，它类似于 Lucas Kanade。不要估计密集的运动矢量场，只需估计网格的运动矢量（例如每 5 个像素），这样可以节省大量运行时间。或者播种特征以跟踪您要移动的矩形。要移动矩形，估计变换矩阵会更优雅，例如通过 cv::getPerspectiveTransform 或 cv::getAffineTransform 来估计仿射或透视。仿射变换包含平移、旋转和缩放，而透视图也包含转向。（RANSAC 是一个很好的估计器）。矩形点的新位置可以很容易地通过矩阵运算来计算。

[x,y,1] = 矩阵 * [x_old, y_old, 1]，请参阅 OpenCV 文档

# iphone - iOS“打开方式...”ZIP 文件

> ID：12627571
> 
> 赞同：3
> 
> 时间：2012-09-27T18:09:11.383
> 
> 标签：iphone, objective-c, ios, xcode, zip

我正在尝试通过内置的“打开方式...”功能导入 ZIP 文件。

这是我添加到我的 Info.plist 文件中的内容：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>ZIP Archive</string>
        <key>CFBundleTypeIconFile</key>
        <string>zip</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>CFBundleTypeOSTypes</key>
        <array>
            <string>ZIP </string>
        </array>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>zip</string>
        </array>
        <key>CFBundleTypeMIMETypes</key>
        <array>
            <string>application/zip</string>
            <string>application/x-zip</string>
            <string>application/x-zip-compressed</string>
        </array>
    </dict>
</array> 
```

但是，当“打开方式...”视图启动时，我的应用程序没有出现。为什么是这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T20:01:31.217

您的问题是您未能声明相关的[统一类型标识符](http://en.wikipedia.org/wiki/Uniform_Type_Identifier)(UTI)。对于许多文件类型，您需要导入或导出 UTI；对于 zip 文件，您不必费心，因为它[在系统固有识别的 UTI 列表中](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)。

因此，只需将以下内容添加到您的文档类型就足够了：

```
<key>LSItemContentTypes</key>
<array>
    <string>com.pkware.zip-archive</string>
</array> 
```

# licensing - ews exchange 网络服务许可证

> ID：12627573
> 
> 赞同：1
> 
> 时间：2012-09-27T18:09:31.753
> 
> 标签：licensing, exchange-server, exchangewebservices

[我想使用EWS 交换网络服务](http://msdn.microsoft.com/en-us/library/exchange/dd633710%28v=exchg.80%29.aspx)开发电子邮件客户端。它是否需要 Microsoft 的任何许可证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:16:35.890

**EWS**本身不需要特殊许可 - 它与**Exchange Server**捆绑在一起。您只需要一个[**Exchange Server**](http://www.microsoft.com/exchange/en-us/licensing-exchange-server-email.aspx)许可证或**[Exchange Online](http://www.microsoft.com/exchange/en-us/licensing-exchange-online-email.aspx)**许可证即可使用**EWS**。您围绕**EWS**（*移动应用程序、Web 应用程序、本机应用程序等*）构建的内容完全取决于您。

# perl - 如何将 PKCS12 ssl 证书与较新的 LWP 一起使用？

> ID：12627577
> 
> 赞同：3
> 
> 时间：2012-09-27T18:09:39.560
> 
> 标签：perl, ssl, pkcs#12

我很难使用新的 LWP (6.x) 获得 PKCS12 证书。基本上，这段代码在 perl5.8.8 和旧的[Crypt::SSLeay](http://metacpan.org/module/Crypt%3a%3aSSLeay)（0.57 版）和[LWP](https://metacpan.org/release/libwww-perl)（5.826 版）下工作：

```
local $ENV{HTTPS_PKCS12_PASSWORD} = $sslPassword;
local $ENV{HTTPS_PKCS12_FILE} = $pkcs12_cert;
my $response = LWP::UserAgent->new->request(POST($url, Content => $content)); 
```

...但不在 perl5.14.2 和最新版本的 Crypt::SSLeay 0.64) 和 LWP (6.03) 下。

不起作用，我的意思是我得到了一个 HTTP::Response 对象，例如：

```
bless( {
     '_content' => 'Can\'t connect to host:port
',
     '_rc' => 500,
     '_headers' => bless( { 
                            'client-warning' => 'Internal response',
                            'client-date' => 'Thu, 27 Sep 2012 18:28:34 GMT',
                            'content-type' => 'text/plain'
                          }, 'HTTP::Headers' ),
     '_msg' => 'Can\'t connect to host:port',
     '_request' => ...
) 
```

我知道最近 LWP 中很多与 ssl 相关的代码发生了变化；PKCS12 支持是否仍然有效？我应该设置不同的变量/选项以获取证书和密码吗？

我也尝试将其传递给 LWP::UserAgent->new 但没有运气：

```
ssl_opts => {
    SSL_use_cert => 1,
    SSL_cert_file => $pkcs12_cert,
    SSL_passwd_cb => sub { $sslPassword },
} 
```

* * *

跟进：我将 PKCS12 证书转换为 PEM：

```
openssl pkcs12 -in my_pkcs12.p12 -out mycert.pem -clcerts -nokeys
openssl pkcs12 -in my_pkcs.p12 -out mykey.pem -nocerts
<passphrase entered> 
```

并可以通过以下方式使用新文件：

```
curl -k --cert mycert.pem --key mykey.pem --pass passphrase --cert-type PEM https://url 
```

...并在测试脚本中设置这些环境变量：

```
$ENV{HTTPS_CERT_FILE} = 'mycert.pem';
$ENV{HTTPS_KEY_FILE}  = 'mykey.pem'; 
```

...并且*在*旧 LWP 下也可以正常工作，并且在新 LWP 下也不能正常工作。所以至少它不是特定于 PKCS12 证书的问题，而是在内部更改 SSL 处理方式方面更基本的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:00:20.973

至少对于 PEM 文件，这适用于新的 LWP（似乎不再识别环境变量 - 可能默认情况下不再使用 Crypt::SSLeay？）

```
my $ua = LWP::UserAgent->new(
    ssl_opts => {
        SSL_use_cert => 1,
        verify_hostname => 0,
        SSL_cert_file => 'mycert.pem',
        SSL_key_file => 'mypass.pem',
        SSL_passwd_cb => sub { $passphrase },
    },
); 
```

这些选项记录在[IO::Socket::SSL](http://metacpan.org/module/IO%3a%3aSocket%3a%3aSSL)中；这里没有提到如何使用 PKCS12 证书，所以至少对于这部分问题，我仍在寻找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T11:04:09.160

我一直在草莓 perl 5.14.2 和 WWW::Mechanize 1.72 中使用 PKCS12 证书。

```
use Net::SSL ();
use WWW::Mechanize;
BEGIN {
    $ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS} = "Net::SSL";
    $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
}
$ENV{HTTPS_PKCS12_FILE} = $pfxfile;
$ENV{HTTPS_PKCS12_PASSWORD} = $pfxpass;
$ua = WWW::Mechanize->new();
$ua->cookie_jar({});
$ua->get($url); 
```

真正的痛苦是让它与代理一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T12:00:42.513

从[LWP 6.02](https://metacpan.org/source/GAAS/libwww-perl-6.05/Changes#L87)开始，LWP 对 HTTPS 的处理被拆分为[LWP::Protocol::https](https://metacpan.org/pod/LWP%3a%3aProtocol%3a%3ahttps)，这取决于使用[IO::Socket::SSL](https://metacpan.org/pod/IO%3a%3aSocket%3a%3aSSL)，除非该默认值被[显式覆盖](http://blog.nu42.com/2014/04/does-your-code-really-depend-on.html)。

假设您在加载之前没有添加`use Net::SSL`或覆盖，它会自动选择不查看环境变量的内容：`$Net::HTTPS::SSL_SOCKET_CLASS``LWP::UserAgent``IO::Socket::SSL`

```
local $ENV{HTTPS_PKCS12_PASSWORD} = $sslPassword;
local $ENV{HTTPS_PKCS12_FILE} = $pkcs12_cert; 
```

如果您确实`$Net::HTTPS::SSL_SOCKET_CLASS`通过环境或在您的脚本中明确覆盖，您还需要再次通过环境禁用主机验证：

```
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; 
```

或通过

```
my $ua = LWP::UserAgent->new(ssl_opts => { verify_hostname => 0 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-17T22:15:44.683

IO::Socket::SSL （刚刚发布的）1.988 版本增加了对 DER 和 PKCS#12 格式的透明支持，因此现在应该可以在 SSL_cert_file 中简单地提供 PKCS#12 文件。

# opengl-es - 为什么即使我不滚动，dispatch_semaphore_wait() 也一直返回 YES？

> ID：12627581
> 
> 赞同：1
> 
> 时间：2012-09-27T18:09:50.583
> 
> 标签：opengl-es, uikit, grand-central-dispatch, cadisplaylink

Brad Larson为滚动视图滚动时的冻结问题提供了[解决方案。](https://stackoverflow.com/questions/5944050/cadisplaylink-opengl-rendering-breaks-uiscrollview-behaviour)`CADisplayLink`

我的 OpenGL ES 绘制方法由 a 调用`CADisplayLink`，我尝试了 Brad 的技术，但无法使其工作。核心问题是我的 OpenGL ES 视图由 a 托管`UIScrollView`，当 U`IScrollView`滚动时，`CADisplayLink`停止触发。

Brad 描述的技术应该让`CADisplayLink`即使在滚动期间也能继续触发（通过将其添加到`NSRunLoopCommonModes`而不是默认的 runloop 模式），并且使用花哨的信号量技巧渲染回调应该确保它在 UIKit 时不会渲染太占了。

问题在于信号量技巧无论如何都会阻止渲染回调绘制。

首先，我在我的 OpenGL ES 视图的方法中创建串行 GCD 队列和信号量，`initWithFrame`如下所示（在主线程上）：

```
frameRenderingQueue = dispatch_queue_create("com.mycompany.crw", DISPATCH_QUEUE_SERIAL);
frameRenderingSemaphore = dispatch_semaphore_create(1); 
```

显示链接已创建并添加到`NSRunLoopCommonModes`：

```
CADisplayLink *dl = [[UIScreen mainScreen] displayLinkWithTarget:self selector:@selector(renderFrame)];
[dl addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes]; 
```

渲染回调执行 Brad 的技术：

```
- (void)renderFrame {
    if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0) {
        NSLog(@"return"); // Gets called ALWAYS!
        return;
    }

    dispatch_async(drawingQueue, ^{
        @autoreleasepool {

            // OpenGL ES drawing code

            dispatch_semaphore_signal(frameRenderingSemaphore);
        }
    });
} 
```

该`dispatch_semaphore_wait`函数总是返回`YES`，因此渲染回调永远不会渲染。即使我不滚动。

我想我在这里错过了一些重要的事情。有人可以指出吗？

编辑：它似乎只在我调用`dispatch_sync`而不是调用时才有效`dispatch_async`，但根据布拉德的说法，它`dispatch_async`会在这里提供更好的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:43:15.743

我不得不将代码的结构更改为：

```
- (void)renderFrame {
    dispatch_async(drawingQueue, ^{
        if (dispatch_semaphore_wait(frameRenderingSemaphore, DISPATCH_TIME_NOW) != 0) {
            return;
        }

        @autoreleasepool {
            // Drawing code...
        }

        dispatch_semaphore_signal(frameRenderingSemaphore);
    });
} 
```

在我以这种方式对其进行重组后，`dispatch_semaphore_wait`调用一直停止返回 YES。我不确定这是否实际上只是禁用了 Brad 的信号量等待技巧。但它有效。

# node.js - node.js rmdir 是递归的吗？它会在非空目录上工作吗？

> ID：12627586
> 
> 赞同：83
> 
> 时间：2012-09-27T18:10:11.420
> 
> 标签：node.js

[fs.rmdir](http://nodejs.org/api/fs.html#fs_fs_rmdir_path_callback)的文档非常简短，并且没有解释 rmdir 在目录不为空时的行为。

**问**：如果我尝试使用此 API 删除非空目录会怎样？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-05-17T09:05:36.017

虽然使用第三方库来做这样的事情，但我想不出更优雅的解决方案。所以我最终使用了 npm-module [rimraf](https://github.com/isaacs/rimraf)。

安装它

```
npm install rimraf 
```

或者安装它并保存到“package.json”（其他保存选项可以在[npm-install](https://docs.npmjs.com/cli/install)文档中找到）

```
npm install --save rimraf 
```

然后您可以执行以下操作：

```
rmdir = require('rimraf');
rmdir('some/directory/with/files', function(error){}); 
```

或者在 Coffeescript 中：

```
rmdir = require 'rimraf'
rmdir 'some/directory/with/files', (error)-> 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-10-06T17:09:48.880

[我写的正是这个问题](http://www.geedew.com/remove-a-directory-that-is-not-empty-in-nodejs/)。

下面我之前的解决方案虽然简单，但不是首选。以下函数，是一个同步解决方案；而异步可能是首选。

```
deleteFolderRecursive = function(path) {
    var files = [];
    if( fs.existsSync(path) ) {
        files = fs.readdirSync(path);
        files.forEach(function(file,index){
            var curPath = path + "/" + file;
            if(fs.lstatSync(curPath).isDirectory()) { // recurse
                deleteFolderRecursive(curPath);
            } else { // delete file
                fs.unlinkSync(curPath);
            }
        });
        fs.rmdirSync(path);
    }
}; 
```

**[编辑]**添加 lstat 而不是 stat 以防止符号链接上的错误

**[上一个解决方案]**

我的解决方案很容易实现。

```
var exec = require('child_process').exec,child;
child = exec('rm -rf test',function(err,out) { 
  console.log(out); err && console.log(err); 
}); 
```

这个页面被精简了，但基本的想法很简单；在命令行上执行“rm -r”。如果您的应用程序需要在不同类型的操作系统上运行，请将其放在一个函数中并使用 if/else/switch 来处理它。

您将要处理所有响应；但这个想法很简单。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-09-27T23:19:47.997

简短回答：*node.js* `fs.rmdir()`调用 POSIX `rmdir()`；这将删除一个空目录，或者*返回一个错误*。在给定的情况下，调用将调用回调函数并将错误作为异常传递。

这里的问题是 node.js 文档引用了[POSIX](https://stackoverflow.com/questions/453993/is-there-a-listing-of-the-posix-api-functions)：

[Node.js API 文档](http://nodejs.org/api) **[文件系统](http://nodejs.org/api/fs.html#fs_file_system)**API 最初是

> *标准 POSIX 函数的简单包装器。*

这几乎将问题变成了以下问题的副本： [是否有 POSIX API / 函数的列表？](https://stackoverflow.com/questions/453993/is-there-a-listing-of-the-posix-api-functions)

的描述`fs.rmdir`很简洁，但足够了。

> 异步 rmdir(2)。

这里`rmdir(2)`是对文档的隐式引用[`rmdir() system call`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/rmdir.html)。这里的数字 (2) 是旧的 unix 手册页约定，表示手册页的第 2 节，包含内核接口。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-09-05T12:19:22.847

Node.js v12.10.0 将`recursive`选项引入`fs.rmdir`. 由于`fs.mkdir`从 v10.12.0 开始支持相同的选项，因此可以递归地执行创建和删除目录。

```
$ node --experimental-repl-await

# without recursive option -> error
> await fs.promises.mkdir('foo/bar')
Thrown:
[Error: ENOENT: no such file or directory, mkdir 'foo/bar'] {
  errno: -2,
  code: 'ENOENT',
  syscall: 'mkdir',
  path: 'foo/bar'
}

# with recursive option -> success
> await fs.promises.mkdir('foo/bar', { recursive: true })
undefined

# without recursive option -> error
> await fs.promises.rmdir('foo')
Thrown:
[Error: ENOTEMPTY: directory not empty, rmdir 'foo'] {
  errno: -66,
  code: 'ENOTEMPTY',
  syscall: 'rmdir',
  path: 'foo'
}

# with recursive option -> success
> await fs.promises.rmdir('foo', { recursive: true })
undefined 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-07-17T14:51:21.417

这对我有用

```
fs.rmdirSync(folderpath, {recursive: true}); 
```

**2021年编辑：**

现在它似乎已在 v14 中被替换为：

```
fs.rmSync('./output', {recursive: true, force: true}); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-04-02T08:39:44.667

只是这一堆答案中的一个小点，但我认为指出这一点很好。

就个人而言（并且通常），我更愿意使用已经存在的库（如果有可用的库）来完成任务。对我来说，尤其是在开源世界中，采用一个已经存在的东西意味着使用和改进一个已经存在的东西，这最终可能比我自己做更好的结果（我正在改进其他人拥有的东西）完毕）。

在这种情况下，通过一个小的搜索，我发现了[模块 fs-extra](https://www.npmjs.org/package/fs-extra)，它旨在替代`rimraf`并解决递归删除目录的需要（显然是异步和同步版本）。此外，它在 github 上获得了很多星，并且目前似乎得到了维护：这两个条件，除了可以满足需求的事实外，对我来说也是可行的（几乎是一段时间）。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-27T20:57:21.560

`fs.rmdir`不是递归的**。**

您可以改为使用像[readdirp](http://github.com/thlorenz/readdirp)这样的递归 fs.readdir 模块来查找所有文件和目录。然后删除所有文件，然后是所有目录。

如需更简单的解决方案，请查看[rimraf](https://github.com/isaacs/rimraf)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-04T17:03:14.467

使用 child_process.execFile**更快**。

[NodeJS 文档：](http://nodejs.org/api/child_process.html#child_process_child_process_execfile_file_args_options_callback)

> child_process.execFile 类似于 child_process.exec() ，只是它*不执行子shell，而是直接执行指定的文件。

**这行得通。**模仿`rm -rf DIR...`

```
var child = require('child_process');

var rmdir = function(directories, callback) {
    if(typeof directories === 'string') {
        directories = [directories];
    }
    var args = directories;
    args.unshift('-rf');
    child.execFile('rm', args, {env:process.env}, function(err, stdout, stderr) {
            callback.apply(this, arguments);
    });
};

// USAGE
rmdir('dir');
rmdir('./dir');
rmdir('dir/*');
rmdir(['dir1', 'dir2']); 
```

**编辑**：我不得不承认这不是跨平台的，在 Windows 上不起作用

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-05-31T15:33:21.537

从节点 v16 开始，recursive`fs.rmdir`现在[已弃用](https://nodejs.org/api/deprecations.html#DEP0147)。替换是`fs.rm`.

与承诺一起使用：

```
const fs = require("fs/promises")
(async () => {
    await fs.rm("directory", { recursive: true })
})() 
```

传统的：

```
const fs = require("fs")
fs.rm("directory", { recursive: true }, (err) => {
    // Callback
}) 
```

该`force`选项也与此处提及有关，因为如果文件夹丢失，它将防止该方法引发错误，这对于清理临时文件很有用。

[nodejs 文档](https://nodejs.org/api/fs.html#fs_fspromises_rm_path_options)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-10-16T19:32:00.520

这是一个适用于 Promise 的异步递归版本。我使用“Q”库，但任何人都会做一些更改（例如“失败”功能）。

为了使用它，我们必须对一些核心 Node 函数进行一些简单的包装，即 fs.stat、fs.readdir、fs.unlink 和 fs.rmdir，以使它们对 Promise 友好。

他们来了：

```
function getStat(fpath) {
  var def = Q.defer();
  fs.stat(fpath, function(e, stat) {
    if (e) { def.reject(); } else { def.resolve(stat); }
  });
  return def.promise;
}

function readdir(dirpath) {
  var def = Q.defer();
  fs.readdir(dirpath, function(e, files) {
    if (e) { def.reject(e); } else { def.resolve(files); }
  });
  return def.promise;
}

function rmFile(fpath) {
  var def = Q.defer();
  fs.unlink(fpath, function(e) { if(e) { def.reject(e); } else { def.resolve(fpath); }});
  return def.promise;
}

function rmDir(fpath) {
  var def = Q.defer(); 
  fs.rmdir(fpath, function(e) { if(e) { def.reject(e); } else { def.resolve(fpath); }});
  return def.promise;
} 
```

所以这里是递归 rm 函数：

```
var path = require('path');

function recursiveDelete(fpath) {
  var def = Q.defer();

  getStat(fpath)
  .then(function(stat) {
    if (stat.isDirectory()) {
      return readdir(fpath)
      .then(function(files) {
        if (!files.length) { 
          return rmDir(fpath);
        } else {
          return Q.all(files.map(function(f) { return recursiveDelete(path.join(fpath, f)); }))
          .then(function() { return rmDir(fpath); });
        }
      }); 
    } else {
      return rmFile(fpath);
    }
  })
  .then(function(res) { def.resolve(res); })
  .fail(function(e) { def.reject(e); })
  .done();
  return def.promise;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-09-27T19:56:52.460

认为这是深入研究源代码的好借口；）

据我所知，`fs.rmdir`绑定到 unistd.h 中的 rmdir 函数。从[rmdir 的 POSIX 手册页](http://www.unix.com/man-page/posix/3posix/rmdir/)：

> rmdir() 函数将删除名称由路径给出的目录。仅当目录为空目录时才应删除该目录。
> 
> 如果目录不是空目录，rmdir() 将失败并将 errno 设置为 [EEXIST] 或 [ENOTEMPTY]。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-29T18:07:19.973

除了正确的“否”答案外，[rimraf](http://npmjs.org/package/rimraf)包还提供递归删除功能。它模仿`rm -rf`. 它也由 Ubuntu正式[打包。](http://packages.ubuntu.com/quantal/node-rimraf)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-13T22:35:39.150

我意识到这并不能完全回答手头的问题，但我认为这可能对将来在这里搜索的人有用（对我来说是这样！）：我做了一个小片段，允许递归删除**空目录**。如果一个目录（或它的任何后代目录）里面有内容，它就会被单独留下：

```
var fs = require("fs");
var path = require("path");

var rmdir = function(dir) {
    var empty = true, list = fs.readdirSync(dir);
    for(var i = list.length - 1; i >= 0; i--) {
        var filename = path.join(dir, list[i]);
        var stat = fs.statSync(filename);

        if(filename.indexOf('.') > -1) {
            //There are files in the directory - we can't empty it!
            empty = false;
            list.splice(i, 1);
        }
    }

    //Cycle through the list of sub-directories, cleaning each as we go
    for(var i = list.length - 1; i >= 0; i--) {
        filename = path.join(dir, list[i]);
        if (rmdir(filename)) {
            list.splice(i, 1);
        }
    }

    //Check if the directory was truly empty
    if (!list.length && empty) {
        console.log('delete!');
        fs.rmdirSync(dir);
        return true;
    }
    return false;
}; 
```

[https://gist.github.com/azaslavsky/661020d437fa199e95ab](https://gist.github.com/azaslavsky/661020d437fa199e95ab)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-09-23T06:51:40.137

我看到的大多数示例都是递归删除节点中的文件夹结构的同步实现。

我还看到了一些实际上效果不佳的异步。

我编写并使用了一个完全异步的：[https ://gist.github.com/yoavniran/adbbe12ddf7978e070c0](https://gist.github.com/yoavniran/adbbe12ddf7978e070c0)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-01-16T10:31:55.747

同步删除非空目录：-

以下是文件结构 -

[![在此处输入图像描述](../Images/74ad14635b0ddf7147c38e6091ca49a7.png)](https://i.stack.imgur.com/uyHrk.png)

```
var fs = require('fs');

fs.unlink('./stuff/writeMe.txt',function(){
  fs.rmdirSync('stuff');
}) 
```

* * *

我首先使用代码从**stuff文件夹中删除****writeMe.txt**文件，这使**stuff**文件夹为空，最后使用代码将其删除 **`fs.unlink('./stuff/writeMe.txt')`**`fs.rmdirSync('stuff')`****

 ***** * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-10-29T15:39:31.963

此函数将递归地同步删除您指定的目录或文件：

```
var path = require('path');

function deleteRecursiveSync(itemPath) {
    if (fs.statSync(itemPath).isDirectory()) {
        _.each(fs.readdirSync(itemPath), function(childItemName) {
            deleteRecursiveSync(path.join(itemPath, childItemName));
        });
        fs.rmdirSync(itemPath);
    } else {
        fs.unlinkSync(itemPath);
    }
} 
```

如果出现以下情况，我尚未测试此函数的行为：

*   该项目不存在，或
*   无法删除该项目（例如由于权限问题）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-08-12T02:17:09.587

Node.js 的递归删除目录

事实证明，Node.js fs 模块没有递归删除目录及其内容的方法。相反，您应该检查目录结构并删除原子项目，即单个文件和空目录。[所以我在https://gist.github.com/2367067](https://gist.github.com/2367067)找到了一个用 JavaScript 制作的 Takuo Kihira 的好要点，并决定制作一个 CoffeeScript 版本：

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-01T13:09:18.743

尝试使其失效，因为如果当时正在使用文件或目录，同步删除将导致错误。

```
 var path = require('path');
var fs = require('fs')

var dumpDirs = function (dir, name, cb) {
fs.readdir(dir, function (err, files) {
    var dirs = [],
    filePath, i = 0, l = files.length;
    for (var i = 0; i < l; i++) {
        filePath = path.join(dir, files[i]);
        var stats = fs.lstatSync(filePath);
        if (stats.isDirectory()) {
            if (files[i].indexOf(name) != -1) {
                dirs.push({
                    startOn: new Date(stats.ctime),
                    instance: files[i],
                    name: name
                })
            }
        }
    }
    cb(dirs);
});
}

var removeDir = function (dir, callback) {
fs.readdir(dir, function (err, files) {
    c = files.length;

    (function remfile(i, cb) {
        if (i >= c)
            return cb();
        var p = path.join(dir, files[i])
        fs.unlink(p, function (err) {
            if (err) console.log(err);
            remfile(i + 1, cb)
        });

    })(0, function () {
        fs.rmdir(dir, function (err) {
            callback()
        });
    });

    //for (var i = 0; i < c; i++) {
    //    fs.unlinkSync(path.join(dir, files[i]));
    //};

});
}
dumpDirs(maindir, function (dirs) {

if (dirs && dirs.length > 0) {
    (function rem(i, cb) {
        if (i >= dirs.length) {
            return cb();
        }
        var folder = path.join(dump, dirs[i].instance);
        removeDir(folder, function () {
            rem(i + 1, cb);
        });
    })(0, function () {
        callback();
    })
}
else {
    callback();
}
}); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-10-22T08:09:01.790

[这是我为fluentnode](https://github.com/o2platform/FluentNode)创建的咖啡脚本原型函数，它递归删除文件夹

```
String::folder_Delete_Recursive = ->
  path = @.toString()
  if path.exists()
    for file in path.files()
      curPath = path.path_Combine(file)
      if curPath.is_Folder()
        curPath.folder_Delete_Recursive()
      else
        curPath.file_Delete()
    fs.rmdirSync(path);

  return path.not_Exists() 
```

这是测试：

```
it 'folder_Create and folder_Delete' , ->
  tmpDir = "./".temp_Name_In_Folder()
  expect(tmpDir.folder_Exists()).to.be.false
  expect(tmpDir.folder_Create()).to.equal(tmpDir.realPath())
  expect(tmpDir.folder_Exists()).to.be.true
  expect(tmpDir.folder_Delete()).to.be.true
  expect(tmpDir.folder_Exists()).to.be.false

it 'folder_Delete_Recursive' , ->
  tmpDir = "./"   .temp_Name_In_Folder().folder_Create()
  tmpFile = tmpDir.temp_Name_In_Folder().file_Create()
  expect(tmpDir.folder_Delete_Recursive()).to.be.true 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-11-06T12:56:33.547

rmdirSync 的简洁同步版本。

```
/** 
 * use with try ... catch ...
 * 
 * If you have permission to remove all file/dir
 * and no race condition and no IO exception...
 * then this should work 
 *
 * uncomment the line 
 *   if(!fs.exists(p)) return 
 * if you care the inital value of dir, 
 * 
 */
var fs = require('fs')
var path = require('path')

function rmdirSync(dir,file){
  var p = file? path.join(dir,file):dir;
  // if(!fs.exists(p)) return 
  if(fs.lstatSync(p).isDirectory()){
    fs.readdirSync(p).forEach(rmdirSync.bind(null,p))
    fs.rmdirSync(p)
  }
  else fs.unlinkSync(p)
} 
```

还有一个并行 IO，异步版本的 rmdir。（快点）

```
/**
 * NOTE: 
 * 
 * If there are no error, callback will only be called once.
 * 
 * If there are multiple errors, callback will be called 
 * exactly as many time as errors occur. 
 * 
 * Sometimes, this behavior maybe useful, but users 
 * should be aware of this and handle errors in callback. 
 * 
 */

var fs = require('fs')
var path = require('path')

function rmfile(dir, file, callback){
  var p = path.join(dir, file)
  fs.lstat(p, function(err, stat){
    if(err) callback.call(null,err)
    else if(stat.isDirectory()) rmdir(p, callback)
    else fs.unlink(p, callback)
  })
}

function rmdir(dir, callback){
  fs.readdir(dir, function(err,files){
    if(err) callback.call(null,err)
    else if( files.length ){
      var i,j
      for(i=j=files.length; i--; ){
        rmfile(dir,files[i], function(err){
          if(err) callback.call(null, err)
          else if(--j === 0 ) fs.rmdir(dir,callback)
        })
      }
    }
    else fs.rmdir(dir, callback)
  })
} 
```

无论如何，如果您想要一个顺序 IO，并且只调用一次回调（成功或遇到第一个错误）。用上面的替换这个 rmdir。（慢点）

```
function rmdir(dir, callback){
  fs.readdir(dir, function(err,files){
    if(err) callback.call(null,err)
    else if( files.length ) rmfile(dir, files[0], function(err){
      if(err) callback.call(null,err)
      else rmdir(dir, callback)
    })
    else fs.rmdir(dir, callback)
  })
} 
```

它们都只依赖于**node.js**并且应该是可移植的。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-06-26T14:12:17.257

这篇文章得到了谷歌的最佳答案，但没有一个答案给出了解决方案：

*   不使用同步功能

*   不需要外部库

*   不直接使用 bash

这是我的`async`解决方案，它不假设安装节点以外的任何其他内容：

```
const fs = require('fs'); const path = require('path');

function rm(path){  
    return stat(path).then((_stat) => {                                   

    if(_stat.isDirectory()){                                                                                                                                                                                                                          
      return ls(path)                                                                                                                                                                                                                                   
        .then((files) => Promise.all(files.map(file => rm(Path.join(path, file)))))
       .then(() => removeEmptyFolder(path));                                                                                                                                                                                                 
    }else{                                                                                                                                                                                                                                            
      return removeFileOrLink(path);                                                                                                                                                                                                            
    }   });
                                                                                                                                                                                                                                              function removeEmptyFolder(path){                                     

    return new Promise((done, err) => {                                                                                                                                                                                                               
      fs.rmdir(path, function(error){                                                                                                                                                                                                                   
        if(error){ return err(error); }                                                                                                                                                                                                               
        return done("ok");                                                                                                                                                                                                                        
      });                                                                                                                                                                                                                                       
    });                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                function removeFileOrLink(path){                                      

    return new Promise((done, err) => {                                                                                                                                                                                                               
      fs.unlink(path, function(error){                                                                                                                                                                                                                  
        if(error){ return err(error); }                                                                                                                                                                                                               
        return done("ok");                                                                                                                                                                                                                        
      });                                                                                                                                                                                                                                       
    });                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                function ls(path){                                                    

    return new Promise((done, err) => {                                                                                                                                                                                                               
      fs.readdir(path, function (error, files) {                                                                                                                                                                                                        
        if(error) return err(error)                                                                                                                                                                                                                   
        return done(files)                                                                                                                                                                                                                        
      });                                                                                                                                                                                                                                       
    });                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                function stat(path){                                                  

    return new Promise((done, err) => {                                                                                                                                                                                                               
      fs.stat(path, function (error, _stat) {                                                                                                                                                                                                           
        if(error){ return err(error); }                                                                                                                                                                                                               
        return done(_stat);                                                                                                                                                                                                                       
      });                                                                                                                                                                                                                                       
    });                                                                                                                                                                                                                                          } } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-06-05T08:00:21.097

遵循@geedew 的回答。

这是一个异步实现`rm -r`（即您可以将路径传递给文件或目录）。我不是经验丰富的 nodejs 开发人员，我感谢任何建议或建设性的批评。

```
var fs = require('fs');

function ResultsCollector (numResultsExpected, runWhenDone) {
    this.numResultsExpected = numResultsExpected,
    this.runWhenDone = runWhenDone;
    this.numResults = 0;
    this.errors = [];

    this.report = function (err) {
        if (err) this.errors.push(err);
        this.numResults++;
        if (this.numResults == this.numResultsExpected) {
            if (this.errors.length > 0) return runWhenDone(this.errors);
            else return runWhenDone();
        }
    };
}

function rmRasync(path, cb) {
    fs.lstat(path, function(err, stats) {
        if (err && err.code == 'ENOENT') return cb(); // doesn't exist, nothing to do
        else if (err) {
            return cb(err);
        }
        if (stats.isDirectory()) {
            fs.readdir(path, function (err, files) {
                if (err) return cb(err);
                var resultsCollector = new ResultsCollector(files.length, function (err) {
                    if (err) return cb(err);
                    fs.rmdir(path, function (err) {
                        if (err) return cb(err);
                        return cb();
                    });
                });
                files.forEach(function (file) {
                    var filePath = path + '/' + file;
                    return rmRasync(filePath, function (err) {
                        return resultsCollector.report(err);
                    });
                });
            });
        }
        else { // file.
            // delete file or link
            fs.unlink(path, function (err) {
                if (err) return cb(err);
                return cb();
            });
        }
    });
}; 
```

像这样调用：

```
rmRasync('/path/to/some/file/or/dir', function (err) {
    if (err) return console.error('Could not rm', err);
    // else success
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-07-13T03:41:42.017

这里令人惊讶的冗长和糟糕的答案......

**要在大多数系统上删除非空目录：**

```
import * as cp from 'child_process';

const dir = '/the/dir/to/remove';

const k = cp.spawn('bash');

k.stdin.end(`rm -rf "${dir}"`);

k.once('exit', code => {
   // check the exit code
   // now you are done
}); 
```

这适用于 MacOS 和 Linux，但可能不适用于某些 Windows 操作系统。****

# vb6 - Visual Basic - 自动移动图片

> ID：12627590
> 
> 赞同：0
> 
> 时间：2012-09-27T18:10:18.903
> 
> 标签：vb6

我正在制作一个需要“敌人”来回踱步的应用程序，我将如何自动将图片从左向右移动并重复？

这是我当前的代码。

```
Private Sub Timer1_Timer()
    enemy1.Left = enemy1.Left - 5
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:35:17.900

```
Option Explicit
Const nTwipsPerMove = 15
Private Sub Timer1_Timer()
    Static strDirection As String
    If strDirection = "" Then strDirection = "left"
    If enemy.Left > 0 Then
        If strDirection = "left" Then
            enemy.Left = enemy.Left - nTwipsPerMove
        ElseIf strDirection = "right" Then
            enemy.Left = enemy.Left + nTwipsPerMove
        End If
    End If
    If enemy.Left = 0 Then
        If strDirection = "left" Then strDirection = "right"
        enemy.Left = enemy.Left + nTwipsPerMove
    End If

    If enemy.Left + enemy.Width = Me.Width - nTwipsPerMove * 5 Then
        If strDirection = "right" Then strDirection = "left"
        enemy.Left = enemy.Left - nTwipsPerMove
    End If
End Sub 
```

`nTwipsPerMove`表示每个循环中移动多少缇 Timer1.Interval = 10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:27:00.040

我现在承认我的 VB 生锈了。自从我使用它以来已经大约 10 年了。我无论如何都不需要测试这段代码，但我认为这个示例应该让你接近，或者至少让你指向正确的方向。

```
Private Sub Timer1_Timer()
    Do
       enemy1.Left = enemy1.Left - 5
       If enemy1.Left = < 5 Then
          Do
             enemy1.Right = enemy1.Right + 5
          Loop Until enemy1.Right = > 1000 'or whatever your size is
       End If
    Loop
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:57:03.113

您还可以使用 1 变量作为它的速度，并在敌人必须向其他方向移动时将其设为负数

```
'1 form with :
'    1 timer : name=Timer1
'    1 picturebox : name=Picture1
Option Explicit

Private msngStep As Single

Private Sub Form_Load()
  Timer1.Interval = 200      'delay in milliseconds between steps
  msngStep = ScaleWidth / 20 'step size, and direction
End Sub

Private Sub Timer1_Timer()
  Dim sngX As Single
  With Picture1 'the enemy
    sngX = .Left + msngStep                              'calculate new position
    If (sngX < 0) Or (sngX > (ScaleWidth - .Width)) Then 'check boundary
      msngStep = msngStep * -1                           'adjust direction
      sngX = sngX + 2 * msngStep                         'keep enemy inside
    End If
    .Left = sngX                                         'move to new position
  End With 'Picture1
End Sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T18:14:38.653

VB（如 C#）应该有一个内置的 Timer 对象。使用计时器，您应该能够创建一个在设定的时间后触发的事件处理程序，在该功能中，您可以移动图片并在仍然需要时重新启动计时器。

# javascript - jquery延迟setTimeout循环

> ID：12627593
> 
> 赞同：-1
> 
> 时间：2012-09-27T18:10:23.797
> 
> 标签：javascript, jquery, settimeout, jquery-deferred

我有一个函数数组可以用`setTimeout`函数迭代以提供非阻塞效果，但是任何或所有函数都可以有顺序标志，这意味着只有在之前的函数执行后才能执行。有人建议我使用 jquery.deferred。我从来没有使用过延迟的jquery。

```
while(that.funcns.length>0){
  fn=that.funcns.splice(0,1)[0];
  fn.idx=i;
  window.setTimeout(function(){
    fn.ref(); //call function reference     
  },(idx==0)?idx:1000);
}
//fn - {ref:functionReference,order:true/false}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:16:31.547

您可以使用延迟对象，但为什么不只使用一个计时器并一一调用函数呢？

```
var funcs = [/* array of functions */];

function next() {
    var func = funcs.shift();
    if(func) {
        func();
        setTimeout(next, 100);
    }
}

next(); 
```

如果某些功能可以“并行”运行并且某些功能是依赖的，那么事情会变得更加复杂，但是您没有提供很多关于此的信息。

但这也不会有太大的不同。如果您不使用 webworkers，任何 JavaScript 都会按顺序运行，即使您使用`setTimeout`. 只是执行顺序没有确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:37:20.893

如果我理解您的问题，您放入列表中的每个函数都可以有一个标志，上面写着“等待执行我，直到所有先前的函数都已执行”。因此，您需要做的是向您执行的每个函数添加函数计数和代码以减少计数。像这样，我在 jsFiddle 中放了一份[副本](http://jsfiddle.net/hB8wR/)：

```
var funcCount = 0, funcList = [];

function executeFunctions() {
    var nextFunc;

    while (funcList.length > 0) {
        // Check next in list, if we need to wait, make sure we wait
        nextFunc = funcList[0];
        if (nextFunc.needToWait) {
            if (funcCount > 0) {
                // Try again later
                setTimeout(executeFunctions, 100);
                return;
            }
        }

        // Since we are now going to execute, remove from list and execute
        funcList.splice(0, 1);
        funcCount += 1;    // nextFunc will subtract 1 on completion
        setTimeout(nextFunc, 100);
    }
}

// For async functions to call back to completion
function completionCallback() {
    funcCount -= 1;
} 
```

为了测试它，我定义了两个函数。第一个模拟具有长超时的异步。第二个设置了等待标志，因此它需要等待第一个。然后我将它们都添加到列表中并进行测试：

```
// Example function 1 is simulated async
function example1() {
    alert("Example1");

    // Simulate async call with completion callback function, e.g. XHttpRequest
    setTimeout(completionCallback, 2000);
}    
example1.needToWait = false;     // Not flagged

// Example function is flagged as need others to complete first
function example2() {
    alert("Example2");

    funcCount -= 1;        
}
example2.needToWait = true;

// Setup function list to execute example1 then example2
funcList.push(example1);
funcList.push(example2);

// OK, test it
executeFunctions(); 
```

如果将 function2 标志更改为 false，警报框会立即一个接一个地显示。如果您将其保留为 true，则在 2 秒过去之前，第二个不会出现。

# python - 多处理环境中成员资格测试的数据类型

> ID：12627598
> 
> 赞同：1
> 
> 时间：2012-09-27T18:10:53.067
> 
> 标签：python, shared-objects, python-multithreading

我正在开发一个网络爬虫，我正在使用多处理，一次下载和处理四个页面。但当然，我不打算多次抓取同一页面。

在我实现多处理之前，我使用 Sets 来维护一组抓取的 URL，我选择了 Sets，因为它们非常适合成员资格测试。我认为 multiprocessing.Manager 可以帮助我在四个进程之间实现共享集。但事实并非如此。

我想做的是

```
manager = Manager()
d = manager.set() 
```

但是 Manager 类中不存在这样的功能。

有谁知道如何解决或解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:05:04.597

`multiprocessing`确实有一个实现`dict()`，它应该是`set()`成员资格测试的功能替代品。

只需使用键来存储您想要在哪些 url 上进行成员资格查找，并在值中存储您希望的任何内容：

```
d = manager.dict()

# Store some values
d['http://dr.dk'] = 1
d['http://stackoverflow.com'] = 1

# Do membership lookup
if 'http://stackoverflow.com' in d:
    print "We have visited Stack Overflow"

if 'http://google.com' not in d:
    print "We have not visited Google" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:53:46.453

要么使用列表作为访问网站的基本存储。1) 锁定 2) 检查数组是否有值 3) 如果未访问，则添加 url 4) 解锁

或者创建另一个流程，您将在其中放置您的网址。任何需要检查网站是否被访问的进程只需通过队列或管道与那个进程对话。

# asp.net-mvc - 如何从 Url 和 Body 创建 WebApi 模型？

> ID：12627602
> 
> 赞同：2
> 
> 时间：2012-09-27T18:11:10.257
> 
> 标签：asp.net-mvc, rest, asp.net-web-api

我正在寻找如下开发一个api方法

POST /dinner/dinnerId/应用程序

这与 POST /application 相同（类似于[此处](http://developers.asana.com/documentation/#tasks)的 POST 请求）

我定义了一条路线，以便 /dinner/dinnerId/application 去 /application

```
 routes.MapHttpRoute(
                name:"DinnerApplicationApi",
                routeTemplate: "api/dinner/{dinnerId}/{controller}"
                ); 
```

在我的 ApplicationController （这是一个 api 控制器）

```
[ModelValidationFilter]
        public HttpResponseMessage Post([FromBody]ApplicationApiModel application, int dinnerId)
        {
            //this will work when invoked from route /dinner/dinnerId/application and without ModelValidationFilter
            application.dinnerId = dinnerId;
            if (123456 == application.dinnerId)
            return new HttpResponseMessage(HttpStatusCode.OK);
            else
            {
                return new HttpResponseMessage(HttpStatusCode.BadRequest);
            }
        } 
```

现在，在第一条路线的情况下，我应该根据路线中的值设置晚餐 ID。但在第二种情况下，晚餐 ID 将从正文中设置。如何在 WebApi 中实现这一点？如上所示，我正在从路线设置晚餐ID。但是当我放置 ModelValidationFilter 时，请求失败，因为 DinnerId 是 ApplicationApiModel 中的必填字段。

```
public class ApplicationApiModel 
    {
        [Required]
        public int DinnerId { get; set; }
        [Required]
        public AttendeeApiModel Attendee { get; set; }
        public string Message { get; set; }
        public string Password { get; set; }

    } 
```

所以基本上，我希望能够同时使用这两条路线并让我的 ModelValidation 条件也通过。

# mysql - Mysql 启动问题 | 错误！服务器退出但不更新 PID 文件

> ID：12627604
> 
> 赞同：9
> 
> 时间：2012-09-27T18:11:19.547
> 
> 标签：mysql, macos

有任何想法吗？

```
Joshs-MacBook-Pro:cdwhp joshc$ mysql.server start
Starting MySQL
.. ERROR! The server quit without updating PID file (/usr/local/var/mysql/Joshs-MacBook-Pro.local.pid). 
```

错误日志

```
120927 13:08:35 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120927 13:08:36 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
120927 13:08:36 InnoDB: The InnoDB memory heap is disabled
120927 13:08:36 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120927 13:08:36 InnoDB: Compressed tables use zlib 1.2.5
120927 13:08:36 InnoDB: Initializing buffer pool, size = 128.0M
120927 13:08:36 InnoDB: Completed initialization of buffer pool
120927 13:08:36 InnoDB: highest supported file format is Barracuda.
120927 13:08:36  InnoDB: Waiting for the background threads to start
120927 13:08:37 InnoDB: 1.1.8 started; log sequence number 9531786
120927 13:08:37 [ERROR] /usr/local/Cellar/mysql/5.5.27/bin/mysqld: unknown variable 'default-character-set=utf8'
120927 13:08:37 [ERROR] Aborting

120927 13:08:37  InnoDB: Starting shutdown...
120927 13:08:37  InnoDB: Shutdown completed; log sequence number 9531786
120927 13:08:37 [Note] /usr/local/Cellar/mysql/5.5.27/bin/mysqld: Shutdown complete

120927 13:08:37 mysqld_safe mysqld from pid file /usr/local/var/mysql/Joshs-MacBook-Pro.local.pid ended 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-02-13T16:23:57.603

在我的情况下，完全重新安装 mysql 解决了这个问题：

```
brew uninstall mysql
rm -Rf /usr/local/var/mysql
brew install mysql
mysql.server start 
```

注意：将此作为最后的手段，所有数据将被删除

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-19T05:38:38.770

我也有同样的问题。我在做

```
sudo mysql.server start 
```

我真正应该做的是以我的用户（而不是 su）运行命令

```
mysql.server start 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T18:24:56.763

[`default-character-set`MySQL 5.5.3 中删除了该选项](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_default-character-set)。

您应该将其更改`my.cnf`为替代方案；

> [字符集服务器=utf8](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_character-set-server)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-11T05:59:21.787

我希望这会有所帮助，但是在我不小心让 mysql 服务器运行了几天后，我遇到了同样的问题。我得到了错误！服务器退出而不更新 PID 文件 (/usr/local/mysql/data/[NAS].pid)。

我可以通过键入来修复它

`sudo kill 10191` - 我电脑上mysql的进程号

然后再次启动mysql，它工作得很好。我希望这可以帮助某人摆脱同样的困境。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-27T14:51:40.563

我找到了登录`bogon.log`

> InnoDB：第一个 innodb_system 数据文件“ibdata1”不存在。将创建一个新的表空间！2016-03-27T14:45:36.200398Z 0 [错误] InnoDB：重做日志文件“./ib_logfile0”存在。不建议使用现有的重做日志文件创建系统表空间。请在创建新的系统表空间之前删除所有重做日志文件。`

所以我`delete`和`ib*`，`mysql.server restart`这是工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-06T05:07:12.483

采用

```
`mysql.server status;` - tells you the process number/s 

`sudo kill ######;` - enter process number repeat as needed

`mysql.server start;` - start everything up again 
```

为我工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-04T08:00:24.407

我有一个类似的问题。不知何故，文件`YourComputerName.pid`和“YourComputerName.err”`/usr/local/mysql/data`是在_mysql用户下创建的。我刚刚删除了这些文件并使用以下命令启动了 sql server`/usr/local/mysql/support-files/mysql.server start`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-03-01T02:12:16.500

删除文件`/usr/local/var/mysql/*********.local.err` 运行`mysql.server start`

# java - 具有接口属性的JPA实体，有可能吗？

> ID：12627607
> 
> 赞同：27
> 
> 时间：2012-09-27T18:11:38.050
> 
> 标签：java, hibernate, jpa-2.0

我有以下实体：

```
@Entity
public class TestCaseStep implements JPAEntity<Integer> {

        ...

    @Column(name="STEP_NUMBER")
    private Integer stepNumber;

    @Enumerated(EnumType.STRING)
    @Column(name="ACTION")
    private Action action;

    **@ManyToOne
    @JoinColumn(name="connector")
    private ScriptItem connector;** 
```

我的属性 ScriptItem 是其他 3 个类的接口。是否可以配置 JPA 以在运行时执行中设置正确的类 ID？

其他资源：

```
public interface ScriptItem {

    String getValue();
    ScriptItemType getType();
}

@Entity
@Table(name="DAT_FEED_XML")
public class FeedXml implements JPAEntity<Integer>, ScriptItem {
    ...
}

@Entity
@Table(name="DAT_DB_STMT")
public class DbStatement implements JPAEntity<Integer>, ScriptItem {
       ...
} 
```

我应该使用哪些注释让 JPA 了解我想要保存 3 个类之一的 id？

提前致谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T20:32:23.757

这确实是一个好主意，但不幸的是，JPA 不支持直接将接口映射为实体属性。

您只能映射直接使用注释的顶级类`@Entity`。不过，这个顶级类可能会实现一个接口。

此功能已被请求并[讨论](https://hibernate.onjira.com/browse/HHH-4413)了很长时间。

也看看[this](https://stackoverflow.com/a/8990547/281815)和[this](https://stackoverflow.com/a/282681/281815)。

根据您要完成的工作，使用每类表策略的[@Inheritance注释可能是一种选择。](https://stackoverflow.com/a/2918468/281815)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-18T14:54:39.557

不，JPA 或 Hibernate 不可能。

当使用允许属性作为接口的 Java 语言进行编码时，像 JPA 这样的用于 Java 的持久性标准不支持作为接口的持久性属性，这看起来确实很奇怪。

***当我的 ORM 强迫我重构我的“纯”OO 模型***以便***它***能够坚持下去时，我总是觉得非常令人沮丧。

并不是说在技术上实现接口属性的持久化是不可能的——事实上，JDO 一直以来都支持接口的持久化，这就是为什么我几年前就开始在我自己的所有项目中使用它的原因。

我一直很想改用 JPA，不是因为它在技术上更优越（事实上，恰恰相反），而是因为“从众心理”。

在最近的合同工作中，我被迫获得了使用 JPA/Hibernate 的经验，并且在这样做的过程中，与 JDO/DataNucleus 相比，这种组合存在许多限制和低效率。这是一次很棒的经历，因为它帮助我平息了加入“牛群”的愿望:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-18T21:48:17.033

有一个警告是可能的 - 您必须将 JPA 指向一个目标实体，该实体应该是一个具体的类。但是，它可以是实现您的接口的抽象类。所以你必须打破一个好的设计原则，特别是“有利于组合而不是继承”。

这是如何做到的：

1.  在您的用户类（引用您的界面`Task`）中：

```
 @OneToOne(targetEntity = BaseTask.class)
    private Task task; 
```

所以这里`Task`是一个接口，但你必须声明一个抽象类`BaseTask`。

2.  在你的`BaseTask`：

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="task_type")
@Table(name="Task")
public abstract class BaseTask implements Task{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    } 
```

这里重要的是`@DiscriminatorColumn`- 因为继承树的所有字段都将存储在 1 个表中（您在`@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`上面的注释中指定了这一点。所以这个鉴别器列将包含一个标签，它允许 JPA 区分你在说什么类型的任务关于

3.  Your concrete classes:

```
@Entity
@DiscriminatorValue("api")
public class ApiTask extends BaseTask { 
```

or

```
@Entity
@DiscriminatorValue("ssh")
public class SshTask extends BaseTask{ 
```

As you can see the discriminator value tells JPA what task it is going to load (what class to instantiate).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:18:25.503

[您需要使用您喜欢的任何策略（请参阅文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#d0e1168)）在 JPA 中正确设置 ScriptItem 的继承，然后 JPA 会很聪明。

# javascript - 获取多个对象属性的最大值

> ID：12627617
> 
> 赞同：3
> 
> 时间：2012-09-27T18:12:25.187
> 
> 标签：javascript

我有找到两个属性的最大值的代码，但我不知道这是最好的方法。我在 jQuery 的`$.getJSON(URI, function(json){})`调用中。

目标是制作一个包含 2 个条形的条形图，其宽度正好是最长条形的宽度。

目前要找到最大值：

```
var max = Math.max.apply(this, $.map(json, function(d){
    return Math.max(d.bar1, d.bar2);
})); 
```

有没有更好的办法？

编辑：一个json字符串，根据要求：

```
[
    {
        "bar1": "15",
        "bar2": "13"
    },
    {
        "bar1": "20",
        "bar2": "25"
    },
    {
        "bar1": "10",
        "bar2": "18"
    }
] 
```

`max`应等于 25，并将其作为输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:27:02.223

这有效，并且稍微短一些，尽管不一定更有效：

```
var max = json.reduce(function(p, d) {  // p is the current max
    return Math.max(p, d.bar1, d.bar2);
}, 0); 
```

见[http://jsfiddle.net/PF8Me/1/](http://jsfiddle.net/PF8Me/1/)

请注意，它确实假设您的所有值都是正数（因此提供给 的“初始值”为零`reduce`）。

[`Array.reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)如果您不使用 ES5 浏览器，请使用 shim 。

# android - 方法调用一个函数以返回一个值，然后跳过第一个函数的其余部分

> ID：12627619
> 
> 赞同：0
> 
> 时间：2012-09-27T18:12:29.127
> 
> 标签：android

我有一个应该向 SQLite 数据库添加新记录的函数。然后，该函数将调用一个函数以将一个 int 返回给一个变量，然后跳过其余代码并直接进入 finally 语句。

下面是方法。

```
 SQLiteDatabase myDb = null;
            if (type.equals("Website"))
            {
                details = formatUrl(details);
            }
            try
            {
                myDb = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null);

                int rowId = common.getNextID("password");

//ALL OF THIS CODE IS SKIPPED
                ContentValues cv = new ContentValues();
                cv.put("id", rowId);
                cv.put("category", category);
                cv.put("company", Encryption.encrypt(company));
                cv.put("loginAction", Encryption.encrypt(details));
                cv.put("username", Encryption.encrypt(username));
                cv.put("password", Encryption.encrypt(password));
                cv.put("type", type);
                cv.put("appName", "N/A");
                myDb.insert("password", null, cv);
            }
            catch (SQLiteException ex)
            {
                common.showBasicAlertDialog("Something has gone wrong.\n\nWe will fix this as soon as we can", false);
                Log.e("Database Errror", ex.toString());
                return false;
            }
            catch (SQLException ex)
            {
                common.showBasicAlertDialog("Something has gone wrong.\n\nWe will fix this as soon as we can", false);
                Log.e("SQL Error", ex.toString());
                return false;
            }
            finally
            {
//IT GOES STRAIGHT INTO THIS CODE AFTER THE GETNEXTID METHOD RETURNS
                if (myDb.isOpen())
                {
                    myDb.close();
                    return true;
                }
            }
            return false; 
```

下面是 getNextId() 函数的代码

```
public int getNextID(String table)
    {
        int nextID = 1;
        Cursor cursor = null;
        SQLiteDatabase myDB = null;
        try
        {
            myDB = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null);
            cursor = myDB.rawQuery("SELECT id FROM "+table+" ORDER BY id DESC LIMIT 1", null);
            if (cursor != null)
            {
                cursor.moveToFirst();
                nextID = cursor.getInt(0) + 1;
            }
        }
        catch (SQLiteException ex)
        {
            Log.d("GetNextID", ex.toString());
            nextID = -1;
        }
        finally
        {
            if (myDB.isOpen())
            {
                myDB.close();
            }
            if (!cursor.isClosed())
            {
                cursor.close();
            }
        }
        return nextID;
    } 
```

我不明白内容值已被跳过，它直接进入finally。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:15:43.493

`SQLException`也许除了和之外的一些异常`SQLiteException`已经被抛出？如果你把`catch(Exception x) {...}`你可能会看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:26:14.600

首先尝试移动线路。

```
myDb = context.openOrCreateDatabase("PasswordManager", Context.MODE_PRIVATE, null); 
```

线以下

```
 int rowId = common.getNextID("password"); 
```

在你的方法中。或者更好的方法是将 myDb 作为参数添加到您的 getNextID 函数中，这样您就可以使用相同的数据库引用，然后不要在该函数中关闭数据库。

添加`catch(Exception x)`到您的例外。

然后最后在您的方法中放置一个断点`getNextID`，并准确找出它在哪一行中断。

干杯

# linux - Bash 有颜色、粗体和下划线字符。为什么不是斜体？

> ID：12627626
> 
> 赞同：0
> 
> 时间：2012-09-27T18:12:54.797
> 
> 标签：linux, bash, shell, fonts, zsh

我正在命名 bash，但这个问题也适用于其他 linux shell。没有包含斜体字符是否有原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:18:45.737

它与 . 无关`bash`。大多数终端应用程序根本不支持斜体文本。

[`pangoterm`](http://leonerds-code.blogspot.com/2011/09/libvtermpangoterm-and-tickit.html)是一个明显的例外：

![pangoterm 展示了许多功能，包括斜体](../Images/bb1768172bf7731461349a928d77a99f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:00:30.463

如果要检查某些终端定义是否支持斜体（`stim`）：

```
$ for ti in $(find /lib/terminfo /usr/share/terminfo -type f -print); do  t=${ti##*/}; if tput -T ${t} stim 2>/dev/null; then echo ${t} "supports italics"; fi; done 
```

# python - 我想从给定的 url 获取 json 数据并且我必须将 json 数据转换为 xml 形式

> ID：12627630
> 
> 赞同：4
> 
> 时间：2012-09-27T18:13:04.410
> 
> 标签：python, xml, json, parsing

我想从给定的 url 获取 JSON 数据

```
http://www.deanclatworthy.com/imdb/?=The+Green+Mile 
```

并将 JSON 数据转换为 XML。我已经使用[`urllib`](http://docs.python.org/library/urllib.html)and[`json`](http://docs.python.org/library/json.html)将 JSON 对象转换为 python 字典。

这是我的代码：

```
import json

json_string = '{"imdbid":"tt0120689","imdburl":"http:\/\/www.imdb.com\/title\/tt0120689\/","genres":"Crime,Drama,Fantasy,Mystery","languages":"English ,French","country":"USA","votes":"281023","stv":0,"series":0,"rating":"8.4","title":"The Green Mile","year":"1999","usascreens":2875,"ukscreens":340}'

new_python_object = json.loads(json_string)
print(json_string)
print()
print (new_python_object) 
```

结果：

```
{"imdbid":"tt0120689","imdburl":"http:\/\/www.imdb.com\/title\/tt0120689\/","genres":"Crime,Drama,Fantasy,Mystery","languages":"English ,French","country":"USA","votes":"281023","stv":0,"series":0,"rating":"8.4","title":"The Green Mile","year":"1999","usascreens":2875,"ukscreens":340}

{'ukscreens': 340, 'rating': '8.4', 'genres': 'Crime,Drama,Fantasy,Mystery', 'title': 'The Green Mile', 'series': 0, 'imdbid': 'tt0120689', 'year': '1999', 'votes': '281023', 'languages': 'English ,French', 'stv': 0, 'country': 'USA', 'usascreens': 2875, 'imdburl': 'http://www.imdb.com/title/tt0120689/'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:13:28.267

使用[requests](http://docs.python-requests.org/en/latest/)和[dict2xml](https://github.com/quandyfactory/dict2xml)库：

```
>>> import requests
>>> r = requests.get("http://www.deanclatworthy.com/imdb/?q=The+Green+Mile")
>>> import dict2xml
>>> xml = dict2xml.dict2xml(r.json)
>>> print xml
<country>USA</country>
<genres>Crime,Drama,Fantasy,Mystery</genres>
<imdbid>tt0120689</imdbid>
<imdburl>http://www.imdb.com/title/tt0120689/</imdburl>
<languages>English,French</languages>
<rating>8.5</rating>
<runtime>189min</runtime>
<series>0</series>
<stv>0</stv>
<title>The Green Mile</title>
<ukscreens>340</ukscreens>
<usascreens>2875</usascreens>
<votes>344054</votes>
<year>1999</year> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:25:23.083

ActiveState 的食谱页面上有一个非常条目（由 Cory Fabre 编写），用于将 python 字典转换为 XML 和从 XML 转换。我最近一直在使用它，它似乎工作得很好。链接在这里：

[http://code.activestate.com/recipes/573463-converting-xml-to-dictionary-and-back/](http://code.activestate.com/recipes/573463-converting-xml-to-dictionary-and-back/)

如果您足够幸运，您的 JSON 结构可以很好地映射到 XML 结构，这可能会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:24:03.427

现在您有了一个可用的 python 字典，您必须将它写入 xml。

你的 xml 格式是什么样的？Python 在标准库中提供了一些用于编写/使用 xml 的工具。[http://docs.python.org/library/xml.dom.minidom.html](http://docs.python.org/library/xml.dom.minidom.html)

编写将需要一些努力，因为 python 不知道您的 xml 文档的结构。一点谷歌研究可以有很长的路要走。

# c# - 多表数据集比较列数据

> ID：12627635
> 
> 赞同：0
> 
> 时间：2012-09-27T18:13:21.740
> 
> 标签：c#, dataset

我有一个包含三个表的数据集。我想将一个表中的列项与其他两个表中的列项进行比较，但为此我使用嵌套的 foreach 循环。代码返回的数据比它应该的要多，所以我觉得我搞砸了；我也确信有更好/更清洁的方法可以做到这一点，请随时告诉我。

```
foreach (DataRow row in dataSet.Tables["Taxonomy"].Rows)
            {
                var projectTypes = row["ProjectType"].ToString();
                var tier3 = row["Tier3Project"].ToString();
                if (tier3.Equals(""))
                    tier3 = "null";
                Console.WriteLine(projectTypes);

                foreach (DataRow dRow in dataSet.Tables["DefaultEventTypes"].Rows)
                {
                    var name = dRow["name"].ToString();
                    if (name.Equals(""))
                        name = "null";

                    /****** Begin Comparisons ******/
                    if (projectTypes.Trim().ToLower().Equals(name.Trim().ToLower()))
                    {
                        foreach (DataRow sRow in dataSet.Tables["ScheduleEvents"].Rows)
                        {
                            var nameShort = sRow["nameShort"].ToString();

                            /****** Compare to ScheduleEvent ******/
                            if (projectTypes.Trim().ToLower().Equals(nameShort.Trim().ToLower()))
                            {
                                //Update both DefaultEventType and ScheduleEvent
                                Console.WriteLine(projectTypes + "     " + name + "     " + tier3);
                                counter++;
                            }
                            else
                            {

                            }
                        }
                    }
                    else
                    {
                        foreach (DataRow sRow in dataSet.Tables["ScheduleEvents"].Rows)
                        {
                            var nameShort = sRow["nameShort"].ToString();

                            /****** Compare to ScheduleEvent ******/
                            if (projectTypes.Trim().ToLower().Equals(nameShort.Trim().ToLower()))
                            {
                                //Update ScheduleEvent
                            }
                        }
                    }
                    /****** End Comparisons ******/
                }
            } 
```

如果需要我可以澄清一下，谢谢！

编辑：

我想从表'Taxonomy'中提取一个项目，然后将它与表'DefaultEventTypes'中的每一行进行比较。如果匹配，然后我想将“分类”项目与“ScheduleEvent”中的每一行进行比较。

最终，我想添加更新语句以将匹配项更改为新名称并将表保存回数据库。

它似乎在进行比较，但它返回的值的数量太大了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:21:12.117

```
dataSet.Tables["Table1"].AsEnumerable().Select(r => r.Field<string>("Field1")).Intersect(
dataSet.Tables["Table2"].AsEnumerable().Select(r => r.Field<string>("Field2"))).Intersect(
dataSet.Tables["Table3"].AsEnumerable().Select(r => r.Field<string>("Field3"))); 
```

类似的东西......虽然没有测试这个

PS：这应该会返回一组值，这些值存在于各个列的所有 3 个表中。

回复评论：嗯，你有*足够的*信息来更新你想要的东西。

```
var valuesThatRepeat = GetWhatYouNeedUsingCodeAbove();
foreach (var value in valuesThatRepeat)
{
    var rows = dataSet.Tables["Table2"].AsEnumerable().Where(r => ((string)r["Column2"]).Equals(value));            
    foreach(var row in rows)
    {
        row["Column2"] = (string)r["Column2"] + "of_row_with_id_" + (string)r["Id"]; // update the value with whatever you want
    }
} 
```

此示例将更新第二个表中的所有值，使它们不再与其他 2 个表中的值相似。PS：再次，没有测试。可能出现语法错误

# css-float - 宽度减小时响应式CSS浮动元素如何垂直定位

> ID：12627638
> 
> 赞同：1
> 
> 时间：2012-09-27T18:13:30.290
> 
> 标签：css-float, responsive-design

我已经搞砸了一些响应式设计，我很好奇`float`当整体分辨率降低并且它们被挤压在一起时，哪些 CSS 属性决定了元素如何垂直定位。

例如，如果我有一个带有 的`div`块`float:left`和一个`div`带有 的块`float:right`，那么当容器的最大宽度减小到它们不再适合内联的点时，其中哪一个最终位于顶部。

如果您看一下我的小提琴，当您将宽度减小到它们都无法容纳的程度时，左侧元素最终会位于顶部。有没有属性可以做到这一点？它按顺序做吗？当宽度减小时，我可以在右侧 div 块中添加什么使其高于左侧元素吗？

[http://jsfiddle.net/JXXLK/](http://jsfiddle.net/JXXLK/)

非常感谢所以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:41:09.020

重新缩放窗口时将右 div 置于顶部的最简单解决方案是首先在 html 代码中定义它：

```
<div class="container">    
    <div class="rightside">
       RIDE SIDE HOMBRE!                
    </div>
    <div class="leftside">
       LEFT SIDE DUDE!
    </div>
</div>​ 
```

我不确定如何使用纯 css 属性来控制它。

# c++ - 如何使用 C/C++ 获得对特定内存地址的 R/W 访问权限

> ID：12627639
> 
> 赞同：2
> 
> 时间：2012-09-27T18:13:46.097
> 
> 标签：c++, c, gpio

因此，考虑如何制作自己的硬件/驱动程序，我正在使用 GPIO，并且我知道 GPIO 实际上对所有硬件都使用特定范围内的特定内存库，但是我将如何将它们读取和写入这些内存银行？

USB 是否以类似的方式工作？

**PS**我用的是树莓派。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:33:17.907

如果您使用的是 Linux，您还可以使用`Proc interface`GPIO 进行通信。例如，如果您看到此[链接](http://www.armadeus.com/wiki/index.php?title=GPIO_Driver#Directly_with_shell_commands_.28through_.2Fproc_.26_.2Fdev_filesystem.29)，它会显示如何直接从 shell 提示符读取或写入 GPIO 引脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:22:43.537

如果您使用的是支持 mmap() 的系统，[https:](https://groups.google.com/forum/?fromgroups=#!topic/comp.os.linux.development.apps/2kiUc-dNa3c) //groups.google.com/forum/?fromgroups=#!topic/comp.os.linux.development.apps/2kiUc-dNa3c讨论了使用`mmap()`来执行此操作。总结是您的进程将打开 /dev/mem 进行读写，并将您的基本物理地址作为偏移量映射到文件中（并且您的 addr 参数是您希望使用的任何虚拟地址）。

# jakarta-ee - 在struts中实现jasper报告

> ID：12627641
> 
> 赞同：0
> 
> 时间：2012-09-27T18:13:52.130
> 
> 标签：jakarta-ee, jasper-reports, struts

我使用下面的动作类方法来调用具有碧玉报告的java类。

```
 public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    BasicConfigurator.configure();
    DynaValidatorForm af = (DynaValidatorForm) form;
    HttpSession session = request.getSession(true);
    Connection conn = null;
    DatabaseUtility dataUtil = null;
    try {
        String empNo = af.getString("empNo").toString();
        String sd = af.getString("startDate").toString();
        String ed = af.getString("endDate").toString();

        String dbURL = getServlet().getServletContext().getInitParameter("dbURL");
        String dbUserName = getServlet().getServletContext().getInitParameter("dbUserName");
        String dbPassword = getServlet().getServletContext().getInitParameter("dbPassword");
        String JDBC = getServlet().getServletContext().getInitParameter("jdbcDriver");
        //create a map of parameters to pass to the report.
        ReportCaller.AttendanceReportPDF(dbURL, dbUserName, dbPassword, JDBC);

    } catch (Exception ex) {
    }
    return mapping.findForward(SUCCESS);
} 
```

* * *

这是我的 ReportCaller 类，用于调用 jasper 报告

```
 public static void AttendanceReportPDF(String url, String un, String pw, String JDBC) {
    Connection conn = null;
    DatabaseUtility dataUtil = null;
    String reportSource = "./web/CompiledReport/report3.jasper";
    String reportDest = "../HelloReportWorld.pdf";
    Map<String, Object> params = new HashMap<String, Object>();
    params.put("empNo", "00003");
    try {
        dataUtil = new DatabaseUtility(url, un, pw, JDBC);
        conn = DatabaseUtility.connect();
        // Fill the report using an empty data source
        JasperPrint jasperPrint = JasperFillManager.fillReport(reportSource, params, conn);
        System.out.println("After jasper print");
        // Create a PDF exporter
        JRExporter exporter = new JRPdfExporter();

        // Configure the exporter (set output file name and print object)
        exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, reportDest);
        exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);

        // Export the PDF file
        exporter.exportReport();
        JasperViewer.viewReport(jasperPrint, false);
        System.out.println("This is the end");
    } catch (JRException ex) {
        logger.trace("Jasper Exception", ex);
    } catch (Exception e) {
        logger.trace("Exception ", e);
    }
} 
```

* * *

这是我的 struts 动作映射

```
 <action 
    input="/Reports/AttendancePDF.jsp" 
    name="AttendancePDFReportActionForm" 
    path="/attendancePDFReport" 
    scope="session" 
    type="com.action.AttendancePDFReportAction">
        <result name="success" type="jasper">
            <param name="location">/CompiledReport/report3.jasper</param>
            <param name="dataSource">params</param>
            <param name="format">PDF</param>
        </result>
    </action>
</action-mappings> 
```

* * *

当我运行项目（从 Netbeans 开发）时，我没有得到任何输出。在控制台上它说

```
WARN org.apache.struts.action.ActionMapping  - Unable to find 'success' forward. 
```

此代码没有错误或异常。它运行完美，没有任何输出。但是当我在同一个环境中运行同一个java类而不使用struts时。然后 PDF 生成没有任何模糊。如果有人遇到类似问题找到解决方案并发布它，那就太好了。

# php - 数组操作

> ID：12627648
> 
> 赞同：0
> 
> 时间：2012-09-27T18:14:20.997
> 
> 标签：php, arrays, multidimensional-array

嘿，我被困在我的代码中间。我从我的伙伴那里得到了一些输入数据，我得到了一个数组。在数组的 0 索引处有 3 个字符串。数组看起来像这样

```
array
0 => 
   object(MunichInnovationGroup\PatentBundle\Entity\PatentIdJson)[1405]
   private 'patentId' => string 'EP.02708872.A' (length=13)
   private 'jsonData' => string '{"ops:world-patent-data": {
    "@xmlns":   {
    "ops": "http://ops.epo.org",
    "$": "http://www.epo.org/exchange",
    "ccd": "http://www.epo.org/ccd",
    "xlink": "http://www.w3.org/1999/xlink"
  },
  "ops:meta":   {
  "@name": "elapsed-time",
  "@value": "69"
  }
  private 'status' => string 'Found' (length=5) 
```

我感兴趣的是'jsonData'字符串。我可以将整个数组转换为多维数组，还是只获取“jsonData”并将其转换为数组，以便从“jsonData”中获取所需的信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:26:49.357

根据您的评论，您可以使用以下方式获取数据：

```
$jsonData = $your_array[0]->getjsonData(); 
```

假设`MunichInnovationGroup\PatentBundle\Entity\PatentIdJson`扩展了`MunichInnovationGroup\PatentBundle\Entity`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:16:48.967

您需要的是 json_decode ，您可以执行以下操作：

```
$jsonObject = json_decode($myArray[0]->getjsonData(), true); 
```

这将从您的合作伙伴在数组中提供的 jsonData 生成一个对象

# .net - WCF 错误：ChannelFactory.Endpoint 上的地址属性为空

> ID：12627656
> 
> 赞同：0
> 
> 时间：2012-09-27T18:15:11.583
> 
> 标签：.net, wcf

我创建了一个用作 WCF 客户端的控制台应用程序。app.config 包含以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <customBinding>
                <binding name="WebHttpBinding_IWebContentService">
                    <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                        messageVersion="Soap12" writeEncoding="utf-8">
                        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    </textMessageEncoding>
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:1252/SomeService.svc" binding="customBinding" bindingConfiguration="WebHttpBinding_IWebContentService"
                contract="WebContentClient.IWebContentService" name="WebHttpBinding_IWebContentService" />

        </client>

    </system.serviceModel>
</configuration> 
```

当我运行它时，我收到以下错误：

```
The address property on ChannelFactory.Endpoint was null 
```

端点元素有一个地址属性，但我不确定我应该分配什么属性。我在本地主机上运行我的网络服务。

**更新 1：**

我添加了地址并更新了原始代码。但是我收到错误消息，说没有端点监听地址=“http://localhost:1252/SomeService.svc”。如果我访问 wcf url，我可以看到 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:06:52.810

您的自定义绑定配置不正确。您应该指定一个传输元素，如 httptransport。

下面是一个有效配置的例子：

```
<customBinding>
    <binding name="myCustomHttpBinding">
        <textMessageEncoding />
        <httpTransport / >
    </binding >    
</customBinding > 
```

为什么要使用自定义绑定？根据服务的不同，有许多更易于使用的绑定（basicHttpBinding、webHttpBinding...）。

注意：由于异常，我认为您的客户端代码也不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:54:44.510

您需要将其分配给 Web 服务的地址。如果它是 localhost 上的 WCF Web 服务，它可能是以下形式：

```
http://localhost[:port]/<path>/SomeService.svc 
```

# powershell - 从 Azure 下载 .vhd 映像到本地计算机，然后上传到另一个 Azure 帐户

> ID：12627658
> 
> 赞同：20
> 
> 时间：2012-09-27T18:15:20.600
> 
> 标签：powershell, azure, cloud, virtual-machine, azure-storage

我想将 VM 映像下载到我的本地计算机，以便我可以在本地使用它并将其上传到 Azure 的另一个凭据。我知道有 blob URL，但 wget 没有帮助下载它，因为它发生了

```
<Error>
<Code>ResourceNotFound</Code>
<Message>
The specified resource does not exist. RequestId:e7ffa746-b35c-44f3-a354-af2abfdaa823 Time:2012-09-27T18:07:00.3196644Z
</Message>
</Error> 
```

有任何想法吗？我还尝试使用 Azure CMDLets 将 VM 映像从一个 Azure 帐户迁移到另一个帐户，但遇到了麻烦，因为 CMDLets 在多个凭据中无法正常工作。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-14T09:24:49.717

您可以从 Windows Azure 门户轻松下载 VHD。只需导航到 STORAGE，然后导航到创建虚拟磁盘的存储帐户。选择 CONTAINERS（在顶部），打开名为“vhds”的容器。只需单击所需的 vhd 并选择下载（在页面底部）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T19:15:33.917

您收到此错误的原因是该 blob 位于私有 blob 容器中。你可以做几件事：

1.  要么使 blob 容器可公开访问。
2.  或者创建具有读取权限的共享访问签名并将其用于下载 blob。

如果您希望将 blob 迁移到另一个存储帐户并希望使用工具，我建议您使用 Cloud Storage Studio ( [http://www.cerebrata.com/Products/CloudStorageStudio](http://www.cerebrata.com/Products/CloudStorageStudio) )。使用此工具，您还可以下载 VHD。也请看看这篇博文：http: [//www.biztalkgurus.com/biztalk_server/biztalk_blogs/b/biztalk/archive/2012/09/26/windows-azure-virtual-hard-disk-blob- storage-cross-account-copy-lease-break-and-management-tool.aspx](http://www.biztalkgurus.com/biztalk_server/biztalk_blogs/b/biztalk/archive/2012/09/26/windows-azure-virtual-hard-disk-blob-storage-cross-account-copy-lease-break-and-management-tool.aspx)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T14:36:13.390

我终于找到了 Azure Storage 的开源资源管理器。（尽管 Cloud Storage Studio 很棒，但它是商业版。）

[http://azurestorageexplorer.codeplex.com/](http://azurestorageexplorer.codeplex.com/)

它可以有多个凭据，并具有管理文件的多种功能（复制、重命名、删除和下载）

在本地机器上下载 vhd 后，我可以使用

```
azure vm disk upload 
```

在 Azure PowerShell 上。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-19T16:07:29.740

如果您更喜欢脚本解决方案，我建议您使用 Microsoft Azure PowerShell CmdLets： http: [//go.microsoft.com/ ?linkid=9811175&clcid=0x407](http://go.microsoft.com/?linkid=9811175&clcid=0x407)

通过使用“-NumberOfThreads 4”选项，您可以增加吞吐量。通过使用“Add-AzureAccount”和“Select-AzureSubscription”，您可以在不同的凭据之间切换。

示例用法：

```
Add-AzureAccount
Select-AzureSubscription -SubscriptionName '[NAME OF YOUR SUBSCRIPTION]'

$source = 'https://[STORAGEACCOUNTNAME].blob.core.windows.net/vhds/[VHDNAME].vhd'
$destination = 'f:\[VHDNAME].vhd'

Save-AzureVhd -Source $source -LocalFilePath $destination -NumberOfThreads 4 
```

# qtp - 写入相同的输入 Excel 文件

> ID：12627661
> 
> 赞同：0
> 
> 时间：2012-09-27T18:15:26.030
> 
> 标签：qtp

我有一个数据驱动的 QTP 测试脚本，可以从 Excel 文件中检索输入参数。**有没有办法将测试结果实际写入该 Excel 文件？**

例如，我的输入文件具有以下列：

1.  用户身份
2.  密码
3.  登录结果

测试脚本使用用户 ID 和密码作为登录系统的输入参数。该脚本然后检查登录尝试是否成功，然后应该将结果写入登录结果列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:41:35.460

取决于您如何创建与 Excel 的接口。如果您使用 Excel COM 对象（如`Set objExcel = CreateObject("Excel.Application")`），那当然是可能的：如果您需要示例，请参阅[ActiveExperts.com](http://activexperts.com/activmonitor/windowsmanagement/scripts/msoffice/excel/)
上的一些基本脚本。

我对 QTP 中的数据表有一些不好的经验（但我可能有偏见），这就是我不使用它们的原因。我不知道在 QTP 中是否可以使用内置数据表与 Excel 进行两种通信。

* * *

**编辑**
请参阅 QTP 帮助文件如何使用数据表中的构建来执行此操作。它清楚地说：

***ExportSheet 方法***
*说明*
将运行时数据表的指定工作表导出到指定文件。

如果指定的文件不存在，则创建一个新文件并保存指定的工作表。
如果当前文件存在，但该文件不包含具有指定工作表名称的工作表，则该工作表将作为文件的最后一个工作表插入。
**如果当前文件存在且文件包含指定的工作表，则导出的工作表将覆盖现有工作表。**

*语法*
DataTable.ExportSheet(FileName, DTSheet)

```
Argument    Type      Description 
FileName    String    The full file system path of the Excel table 
                      to which you want to export a sheet.  
DTSheet     Variant   The name or index of the run-time Data Table sheet
                      that you want to export. Index values begin with 1\. 
```

*示例*
下面的示例使用 ExportSheet 方法将运行时数据表的第一个工作表保存到 name.xls 文件。

```
DataTable.ExportSheet "C:\name.xls" ,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:28:02.233

我想现在你可能已经弄清楚了，以防万一......下面是信息......你从excel获取数据的方式，你可以用同样的方式写到excel表。

要写入 excel 表... Excel.Cells(row, column) = "value"

在脚本结束时，就在您退出 excel 之前，请确保您编写以下行来保存数据 Excel.ActiveWorkbook.Save

希望这可以帮助...

# mysql - SQL将具有相同值的行删除到新表中

> ID：12627662
> 
> 赞同：0
> 
> 时间：2012-09-27T18:15:26.427
> 
> 标签：mysql, sql, database

> **可能重复：**
> [删除重复的行，只留下最旧的行？](https://stackoverflow.com/questions/3671607/remove-duplicate-rows-leaving-oldest-row-only)
> [MySQL 删除重复行](https://stackoverflow.com/questions/4712809/mysql-remove-duplicate-rows)

假设我有以下表格coolumns：**int logicalid(pk) ,int home, int person** 说我有以下记录...
1,5,6
2,5,6
3,5,5
4,5,5

在我的查询之后，我想在新表中只放入一行具有相同 home,person 列值的结果，所以这将是输出结果：
1,5,6
2,5,5 有什么
想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:17:47.627

使用 id 的自动增量列创建新表。

然后插入到表中，使用如下查询：

```
insert into newTable(home, person)
    select distinct home, person
    from oldTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:17:05.270

`INSERT INTO newtable(home, person) SELECT DISTINCT home, person FROM sourcetable`

# zend-framework - 在 zend 框架中使用绝对路径时无法包含文件

> ID：12627670
> 
> 赞同：0
> 
> 时间：2012-09-27T18:15:54.423
> 
> 标签：zend-framework, zend-view

我正在尝试使用 Zend_View 但面临有趣的问题，这是我在控制器中的代码。

```
$view = new Zend_View();
$view->setScriptPath(APPLICATION_PATH . '/views/scripts/account/');
$view->render("add.phtml"); 
```

在 add.phtml 中我确实有下面的代码来包含标题..

```
<?php echo $this->render('includes/header.phtml')?> 
```

但它说“在路径'应用程序路径/视图/脚本/帐户/）中找不到脚本'包含/header.phtml'”。

虽然我能够在其他视图文件中包含头文件。

请告知为什么它在视图中的绝对路径下查找..

KJ..

# cocos2d-iphone - Kobold2d 2.0.4 SpaceManager 库未更新

> ID：12627672
> 
> 赞同：0
> 
> 时间：2012-09-27T18:15:59.153
> 
> 标签：cocos2d-iphone, kobold2d

我正在尝试使用 spaceManager 库，但它甚至无法使用 spaceManager 1.3 进行编译。根据 SpaceManager 的创建者 MobileBros 的说法，我需要更新 spaceManager 库，因为 1.3 版与 cocos2d 2.0 不兼容。所以我只是想知道如何去做呢？我已经下载了 SpaceManager 的最新版本，所以我只需要知道更新它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:40:07.733

Kobold2D 2.0.4 中的内置空间管理器应该可以工作，它只是不旋转精灵。

如果新的 spacemanager 版本使用完全相同的文件名（没有新的、删除的或重命名的文件），您可以将现有的 spacemanager 文件替换为较新的版本。

如果没有，您可能必须在 Xcode 项目中添加/删除相应的文件，特别是 Kobold2D-Libraries 项目中的 chipmunk-spacemanager 目标。

我将在下一个版本中包含 spacemanager 0.2。

# perl - 子程序中的 `shift` 和 `@_` 有区别吗？

> ID：12627673
> 
> 赞同：7
> 
> 时间：2012-09-27T18:16:01.760
> 
> 标签：perl

我总是`@_[0]`用来获取第一个参数并`@_[1]`用来获取第二个参数。但是当我在网上搜索代码片段时，我发现很多人都喜欢使用`shift`关键字。我发现`shift`关键字根本不直观。这两者之间有任何功能差异吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T18:19:46.127

是的，两者之间是有区别的。 `shift`会改变`@_` （你可能会说这将是一个会使 shift 变慢的操作） `$_[0]`或者`$_[1]`只是赋值并且根本不会改变`@_`。

写这个的审美方式是：

```
sub this_is_better {
    my ( $foo, $bar, $hey, $whoa, $doll, $bugs ) = @_;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:18:43.650

如[文档](http://p3rl.org/shift)中所述，`shift`不使用显式数组只需从`@_`子例程中本地获取下一个参数，方法是从开头删除参数并将剩余元素移到前面。

# c# - Listview滚动触发Combobox SelectedValue并抛出异常

> ID：12627674
> 
> 赞同：1
> 
> 时间：2012-09-27T18:16:04.577
> 
> 标签：c#, wpf, mvvm, binding

我在 WPF 中的一个应用程序中遇到了一个非常奇怪的问题，其中很多屏幕与绑定和组合框配合得非常好。但其中之一给我带来了问题。

我创建了一个屏幕来为应用程序中定义的每个用户定义一个配置文件。所以它是一个 Listview，每一行都是一个标签（用户名）和一个带有配置文件列表的组合框。一切都是通过绑定来定义的。

这是 ListView 的 XAML（我删除了样式）：

```
<ListView Name="lv_UserProfils" ItemsSource="{Binding ListeEntites}" AlternationCount="2"
ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Nom d'utilisateur" Width="250">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Border Height="25">
                            <TextBlock Text="{Binding UserLogin}" Width="Auto" />
                        </Border>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Profil" Width="Auto">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <ComboBox 
                                        ItemsSource="{Binding DataContext.ListeProfils, ElementName=lv_UserProfils}" 
                                        DisplayMemberPath="LibProfil" SelectedValuePath="IdProfil" 
                                        SelectedValue="{Binding Profil.IdProfil}" 
                                        SelectedItem="{Binding Profil}" Width="200" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

这`DataContext`是一个自定义 ViewModel 类的实例，它提供了一个`ObservableCollection<UserBE>`名为 ListeEntites

`UserBE`或多或少：

```
public sealed class UserBE
{
public bool IsAdmin { get; set; }
public bool IsUpdateGranted { get; set; }

private string _userLogin;
public string UserLogin
{
    get { return _userLogin; }
    set { _userLogin = value; OnPropertyChanged("UserLogin"); }
}

private ProfilBE _profil;
public ProfilBE Profil
{
    get { return _profil; }
    set
    {
        _profil = value;
        OnPropertyChanged("Profil");
    }
}
} 
```

并且`ProfilBE`是

```
public sealed class ProfilBE
{
    public long IdProfil { get; set; }

    private string _codProfil;
    public string CodProfil
    {
        get { return _codProfil; }
        set { _codProfil = value; OnPropertyChanged("CodProfil"); }
    }

    private string _libProfil;
    public string LibProfil
    {
        get { return _libProfil; }
        set { _libProfil = value; OnPropertyChanged("LibProfil"); }
    }
} 
```

这是我的问题：
用户列表很长，所以有一个滚动条。我可以随心所欲地向下滚动，但只要我向上滚动（但前提是我向下滚动足够多），所有未显示的组合框一旦出现在屏幕上就会开始被清除。

有趣的事实 ：

*   当我滚动时，`Profil`setter 会不断地调用与显示的行关联的对象。我不知道为什么（没有理由，该`Profil`属性已经定义）
*   在某一时刻，如果我向上滚动，我会得到很多这样的异常，并且`Profil`setter 开始接收`null`值

.

```
System.Windows.Data Error: 23 : Cannot convert 'BanquePrivee.AssuranceVie.Net.BE.ProfilBE' from type 'ProfilBE' to type 'System.Int64' for 'fr-FR' culture with default conversions; consider using Converter property of Binding. NotSupportedException:'System.NotSupportedException: Int64Converter cannot convert from BanquePrivee.AssuranceVie.Net.BE.ProfilBE.
   at System.ComponentModel.TypeConverter.GetConvertFromException(Object value)
   at System.ComponentModel.TypeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)'

System.Windows.Data Error: 7 : ConvertBack cannot convert value 'BanquePrivee.AssuranceVie.Net.BE.ProfilBE' (type 'ProfilBE'). BindingExpression:Path=Profil.IdProfil; DataItem='UserBE' (HashCode=59629589); target element is 'ComboBox' (Name=''); target property is 'SelectedValue' (type 'Object') NotSupportedException:'System.NotSupportedException: Int64Converter cannot convert from BanquePrivee.AssuranceVie.Net.BE.ProfilBE.
   at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)
   at MS.Internal.Data.ObjectTargetConverter.ConvertBack(Object o, Type type, Object parameter, CultureInfo culture)
   at System.Windows.Data.BindingExpression.ConvertBackHelper(IValueConverter converter, Object value, Type sourceType, Object parameter, CultureInfo culture)' 
```

这很明显`SelectedValue="{Binding Profil.IdProfil}"`是问题所在，但我不明白为什么。
我不明白为什么在某些时候它会尝试`IdProfil`将`ProfilBE`. 我不应该在那里使用转换器。
我做了很多测试，数据似乎很好（不应该有空值等）

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:56:43.777

我认为这与设置`SelectedValue`和`SelectedItem`. 这两个属性都做同样的事情：它们设置选定的项目。但是一个`Value`根据是什么`SelectedValuePath`来设置它，另一个只是将它设置为`ItemsSource`.

我猜 WPF 在某处感到困惑，并试图将`SelectedValue`（它是 an `int`）设置`SelectedItem`为 type `ProfilBE`，并且抛出异常，因为 a`ProfilBE`不能强制转换为 int。

但无论如何，要修复它，请尝试删除`SelectedItem`ComboBox 中的绑定

```
<ComboBox ItemsSource="{Binding DataContext.ListeProfils, ElementName=lv_UserProfils}" 
    DisplayMemberPath="LibProfil" SelectedValuePath="IdProfil" 
    SelectedValue="{Binding Profil.IdProfil}" 
    Width="200" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:44:54.727

WPF 正在虚拟化当前未显示的对象。但是当我尝试向上滚动时，它似乎试图做一些对已虚拟化并即将再次出现在屏幕上的项目不起作用的事情。

我使用的解决方案是使用`VirtualizingStackPanel.IsVirtualizing="False"`. 它对性能的影响很小，但现在它可以工作了。

```
<ListView Name="lv_UserProfils" ItemsSource="{Binding ListeEntites}" AlternationCount="2" VirtualizingStackPanel.IsVirtualizing="False"
        ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto">
    <ListView.View>
        [...]
    </ListView.View>
</ListView> 
```

# regex - Perl：正则表达式替换

> ID：12627675
> 
> 赞同：2
> 
> 时间：2012-09-27T18:16:10.487
> 
> 标签：regex, perl

我想编写一个正则表达式来替换字符串中的空格，如下所示：

字符串：`user1: group user2 :group2 user3 : group3` 到

```
user1:group user2:group2 user3:group3 
```

到目前为止我尝试的是：

```
$argument =~ s/\s+\:/\:/g; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:18:10.310

你快到了：

```
$argument =~ s/\s*:\s*/:/g; 
```

无需转义`:`，并且您想在冒号前后搜索空格。而不是`\s+`which 搜索一个或多个，我使用`\s*`which 搜索零个或多个。这样，如果之前没有空格但之后有一些空格，您将匹配，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:20:19.450

编辑（没有注意到冒号前也可能有空格）：

```
$yourString =~ s/\s*:\s*/:/g; 
```

我认为。请注意，我绝不会说 perl。

# html - 在更新查询中传递 Html 标记

> ID：12627676
> 
> 赞同：0
> 
> 时间：2012-09-27T18:16:13.130
> 
> 标签：html, sql, sql-server-2008, ssms

数据库中有一个现有表，我想在其中更新一列。如果我右键单击表格--->选择编辑 200 行并尝试编辑单元格数据，则表示该单元格是只读的。我正在使用 SQL 管理工作室 2008R2。所以我试图使用更新查询来更新它，但我对 SQL 查询和整个数据库的东西还是很陌生。这是在查询中传递 HTML 标记的正确方法吗？

```
UPDATE OutputTemplate
  SET emailText='(<p>Thank you for your  gift of {Amount} to the {CommunityName}</p><br />Support & Charity Campaign.<br />
 --------------------------------------------
 ---          Transaction Detail          ---
 --------------------------------------------
 <span>Credit Card Details</span> 
 <span style="text-decoration: underline;">Personal Info Details & Amount</span>)'
 WHERE id='2' 
```

它在执行查询时显示一些解析错误，语法不正确。

很抱歉问了这么一个基本问题，但我试着用谷歌搜索，不幸的是没有任何有用的东西出现。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:28:30.127

从查询中删除换行符。

`UPDATE OutputTemplate SET emailText="<p>Thank you for your gift of {Amount} to the {CommunityName}</p><br />Support & Charity Campaign.<br />--------------------------------------------<br />--- Transaction Detail ---<br />--------------------------------------------<br /><span>Credit Card Details</span><br /><span style="text-decoration: underline;">Personal Info Details & Amount</span>" WHERE id='2'`

# ios - 全局变量

> ID：12627692
> 
> 赞同：0
> 
> 时间：2012-09-27T18:17:38.920
> 
> 标签：ios, cocoa-touch

我是 Objective c 和 xcode 的新手，所以请原谅使用正确技术术语的错误。

我做了一个新项目并有一个 appdelegate（.h 和 .m 文件）。在应用程序委托中，我有一些变量（设置）。变量之一是 mainImage。我将它放在 appdelegate 中，因为我希望它可以从任何视图控制器访问。

我添加了一个名为 MainViewController（.h 和 .m 文件）的视图控制器。在我的 MainViewController (.m) 中，我有一些自定义方法。在 viewDidLoad 方法中，我有以下代码

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
[currentImage setImage:appDelegate.mainImage]; 
```

问题：

在 MainViewController 的任何方法中，每当我想阅读“mainImage”时，我都必须执行上述 2 行。

.m 文件中是否有一个地方可以一次性完成，并且在该文件的所有方法中都可用？

提前非常感谢，普拉萨德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:12:09.183

您可以将这两行放在您`MainViewController`的示例的 viewDidLoad 方法中：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate];
[currentImage setImage:appDelegate.mainImage]; 
```

这样做一次，然后每次需要 currentImage 内容时，只需调用它：

```
UIImage *img= [[UIImage alloc]init];
img = self.currentImage; 
```

假设 currentImage 被声明为`MainViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:32:58.983

您可以在 MainViewController 中编写一个方法，其中的两行返回一个类型的对象`UIImage`或任何类型的对象，然后调用它。调用将类似于`[self mainImage]`，方法签名将是`- (UIImage *)mainImage`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T19:27:15.700

@Malloc 和@jack ......这非常接近我所需要的......尽管如此，我有很多属性......因此我结束了在头文件中包含调用......

```
#define appDelegate ((MyAppDelegate *)[UIApplication sharedApplication].delegate) 
```

然后我打电话给 appDelegate.any_of_my_properties

根据我的 C# 经验，我知道在应用程序委托中包含全局变量并以这种方式引用它可能是一种不好的做法..但是，这一次..我认为这是有道理的..考虑到对象确实没有绑定到现实中的任何特定视图控制器（图像只是一个例子）......我有一些动态价值持有者。

# php - 如果至少有一个在范围内，如何选择一个类别中的所有

> ID：12627694
> 
> 赞同：0
> 
> 时间：2012-09-27T18:17:46.253
> 
> 标签：php, mysql, sql, lamp

我在 PHP 中使用 MySQL。
我有一个看起来像这样的 SQL 表：

```
id | category_id | date
-----------------------------
1  | 3           | 2012-09-12
2  | 4           | 2012-10-25
3  | 3           | 2012-10-12
4  | 3           | 2012-10-02
5  | 4           | 2012-11-03
6  | 3           | 2012-11-02 
```

我试图弄清楚如果至少有一个日期在指定的日期范围内，如何选择给定类别的所有日期，否则不选择。
例如：
如果日期范围是 2012-09-01 到 2012-09-31，则查询应返回类别 3 的所有行，而类别 4 则不返回任何行。

有没有办法在一个查询中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:19:51.837

您可以使用 join 或 in 子句执行此操作：

```
select t.*
from t join
     (select distinct category_id
      from t
      where date between <datefrom> and <dateto>
     ) tc
     on t.category_id = tc.category_id
order by t.category_id, date 
```

# javascript - 画布类 javascript

> ID：12627697
> 
> 赞同：0
> 
> 时间：2012-09-27T18:17:56.853
> 
> 标签：javascript, class, canvas

我的javascript代码有问题。我正在尝试创建一组移动的圆圈，其中每个圆圈都有自己的属性。到目前为止，我已经设法将所有需要的值输入到一个数组中，但我不知道如何正确使用它们在画布上绘图。

这是javascript：

```
var radius = 10;
var step = x = y = 0;
var r = g = b = 255;
var circleHolder = [];
var loop = setInterval(function(){update();}, 30);

function Circle(x, y, radius, r, g, b)
{
    this.x = x;
    this.y = y;
    this.radius = radius;
    this.r = r;
    this.g = g;
    this.b = b;
    circleHolder.push(this);
}

Circle.prototype.draw = function()
{
    Circle.prototype.ctx = document.getElementById("MyCanvas").getContext("2d");
    Circle.prototype.ctx.clearRect(0,0,720,720); // clear canvas
    Circle.prototype.ctx.beginPath();
    Circle.prototype.ctx.strokeStyle = "rgb("+ this.r +", "+ this.g +", "+ this.b +")";
    Circle.prototype.ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
    Circle.prototype.ctx.stroke();
}

Circle.prototype.update = function ()
{
    step += .02;
    step %= 2 * Math.PI;
    this.x = parseInt((Math.sin(step)) * 150) + 360;
    this.y = parseInt((Math.cos(step)) * 150) + 360;
    this.radius += 16;
    if (this.radius > 200)
    {
        for (i in circleHolder)
        {
            if (circleHolder[i]==this)
            {
                circleHolder.splice(i, 1);
            }
        }
    }
}

function update()
{
    var ci = new Circle(x, y, radius, r, g, b);
    for (i in circleHolder)
    {
        ci = circleHolder[i];
        ci.update();
        ci.draw();
    }
} 
```

我很确定我的问题在于 update() {} 但我不知道如何正确地做到这一点。

* * *

**编辑：**好的，我已经完成了一些更改！**[检查这个小提琴！](http://jsfiddle.net/bchEC/2/)**我在控制台中收到“ci not defined”错误，它有一个奇怪的错误：将“if（this.radius > 128）”更改为更高的整数，它会使圆圈旋转得更快，我不知道为什么。如果您愿意，可以尝试将其更改为 256，看看会发生什么。

```
for (var i=0; i < allCircles; i++)
        {
            ci = circleHolder[i]; <----- This is causing the error
            ci.update();
            ci.draw();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:37:13.357

我不是 100% 清楚你要做什么，但我试图解决主要问题

一个问题是你的`for`循环......你不应该使用`for in`数组，而是这样做：

```
for (var i=0 ; i<circleHolder.length ; i++)
{
    ci = circleHolder[i];
    ci.update();
    ci.draw();
} 
```

看到这个[小提琴](http://jsfiddle.net/PwQJ2/)

此外，我将您的获取上下文和其他应该只发生一次的事情移到了构造函数中，而不是在更新函数中。

您还在每次绘制之前清除画布，因此它只会显示每帧最后绘制的圆圈。（如果您删除它，`clearRect`它看起来像是那些旧的螺旋计之一）。

您还用`(255,255,255)`（白色）绘制了圆圈，因此在更改颜色之前它不会显示。

## 编辑：

这段代码确实存在一些问题：

如果您打算拥有许多，则上下文不应在圆形类中。

您应该有一些对象，其中包含画布/上下文和所有圆圈的数组。

然后让该对象管理更新/绘图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:49:59.233

对于初学者来说，除非有其他事情发生，在这段代码之外：

您`for ... in ...`在数组上使用，for-in 用于对象，当在数组上使用时，大多数浏览器将包含 and 之类的方法`.splice`，`.forEach`而不仅仅是数字`0...n`索引。

`function splice () {}.draw();`结局不好。

***另外，页面背景的颜色是什么？您将每个圆圈的 rgb 颜色设置为 100% 白色。你也在清理画布……这很可能意味着整个事情都是透明的。所以如果你有一个透明的画布、白色的圆圈和一个白色的背景，你很可能根本看不到任何东西，如果这甚至可以正常工作而不会吐出错误的话。***

以一种让你跟随正在发生的事情的方式来移动你的逻辑可能更有意义。

如果你创建了一个圆形构造函数，除了创建一个新的圆形之外别无他法。

在您的更新中，创建一个圈子。
然后将其放入您的圈子集合中（而不是圈子构造函数中）。

在大型应用程序中，您通常会对所有对象调用 update *，*然后对*所有*对象调用 draw，而不是一次更新和绘制一个。例如，想象一个游戏，它在吸引你并让你移动之前不费心检查你是否被子弹击中。

所以在你的循环里面，你应该有一个`update`和一个`draw`。在 内`update`，创建您的圈子，将它们添加到列表中并更新它们的位置。在 内`draw`，画圆圈。

将来，这将为您带来诸如碰撞检测之类的好处，而无需每帧多次重绘所有内容。

此外，不要在将被多次调用的函数内部进行 DOM 访问（`Circle.draw`）。这将在未来摧毁你的帧率。

相反，向函数传递一个依赖项（画布）。

```
// inside of the main game's scope
var screen = document.getElementById(...).getContext("2d");

// inside of your new draw function, in the animation/game loop
var i = 0, allCircles = circleHolder.length, currentCircle;

for (; i < allCircles; i += 1) {
    currentCircle = circleHolder[i];
    currentCircle.draw(screen);
} 
```

# asp.net - 无法在 Foreach 循环中将类型“char”转换为“string”

> ID：12627700
> 
> 赞同：2
> 
> 时间：2012-09-27T18:18:05.003
> 
> 标签：asp.net

我有一个隐藏的字段，其中填充了一个 ID 的 javascript 数组。当我尝试迭代隐藏字段（称为“hidExhibitsIDs”）时，它给了我一个错误（在标题中）。

这是我的循环：

```
foreach(string exhibit in hidExhibitsIDs.Value)
        {
            comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", exhibit);
        } 
```

当我将鼠标悬停在 .value 上时，它说它是“字符串”。但是，当我将“字符串展览”更改为“int 展览”时，它可以工作，但会给我一个内部错误（现在不重要）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:20:59.060

您需要转换`string`为`string array`使用 in for 循环到`get strings not characters`您的循环建议。假设逗号是隐藏字段中的分隔符，隐藏字段值将通过 转换为字符串数组`split`。

```
foreach(string exhibit in hidExhibitsIDs.Value.Split(','))
{
     comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", exhibit);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:20:24.940

`Value`正在返回一个`String`. 当您对 a 执行 a`foreach`时`String`，它会遍历其中的各个字符。价值实际上是什么样的？在尝试使用数据之前，您必须正确解析它。

您的代码现在正在做什么的示例：

```
var myString = "Hey";
foreach (var c in myString)
{
    Console.WriteLine(c);
} 
```

将输出：

```
H
e
y 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T18:20:27.407

您可以使用`Char.ToString`为了转换

链接：http: [//msdn.microsoft.com/en-us/library/3d315df2.aspx](http://msdn.microsoft.com/en-us/library/3d315df2.aspx)

或者，如果你想转换你的 char 标签，你可以使用它

```
char[] tab = new char[] { 'a', 'b', 'c', 'd' };
string str = new string(tab); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:20:30.603

在服务器端， a (or ) 的`Value`属性只是 a ，它的枚举器返回结构。您需要拆分它以迭代您的 ID。`HiddenField``HtmlInputHidden``string``char`

如果您使用 JavaScript 数组在客户端设置隐藏字段的值，则它将是服务器端的逗号分隔字符串，因此可以使用以下方法：

```
foreach(string exhibit in hidExhibitsIDs.Value.Split(','))
{
     comLinkExhibitToTask.Parameters.AddWithValue("@ExhibitID", exhibit);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T18:21:58.497

`Value`是一个字符串，它实现了`IEnumerable<char>`，所以当你`foreach`遍历一个字符串时，它会遍历每个字符。

我会运行调试器并查看隐藏字段的实际值是什么。它不能是数组，因为当 POST 发生时，它会被转换为字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-14T18:27:30.183

```
 public static string reversewordsInsentence(string sentence)
        {
            string output = string.Empty;
            string word = string.Empty;
            foreach(char c in sentence)
            {
                if (c == ' ')
                {
                    output = word + ' ' + output;
                    word = string.Empty;
                }
                else
                {
                    word = word + c;
                }
            }
            output = word + ' ' + output;
            return output;
        } 
```

# java - 是否对独立摆动应用程序中的所有字段使用私有修饰符？

> ID：12627701
> 
> 赞同：0
> 
> 时间：2012-09-27T18:18:07.143
> 
> 标签：java, swing, private, access-modifiers

我有一个带有主类的独立 Swing 应用程序，我将其称为 MainClass。对这个 MainClass 的唯一访问是来自这个类的 main(String args[]) 方法。换句话说，这个类不会被任何其他类使用。

我应该将 MainClass 的成员字段设为“私有”吗？我认为这是多余的，因为没有其他类会实例化 MainClass，但另一位更有经验的程序员认为它违反了 Java 最佳实践，即不将字段标记为“私有”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:24:49.263

一般来说，你应该`private`只拥有一个类的成员字段，不管你是在你的类内部还是外部使用它。（在某些情况下`protected`，如果你希望它们可以从你的`base class`）

您不希望外界直接访问您的领域...否则您将打破`Encapsulation`.

话虽如此，在您的特定情况下，您也应该将它们作为私有字段。

即使目前无法从外部访问该课程，但最好还是安全一点..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:25:21.107

Java是面向对象的。

如果 setter 和 getter 包含糟糕的 no 逻辑，则创建私有字段并不总是有意义。

**确实，很多开发人员认为创建 getter 和 setter 并编写私有字段是封装 => 错误！**

为什么封装数据很重要，尤其是如何封装？面向对象编程与过程编程有何不同？

你可以阅读这篇文章以获得一些答案：[http://pragprog.com/articles/tell-dont-ask](http://pragprog.com/articles/tell-dont-ask)
然后这个：[http](http://en.wikipedia.org/wiki/Law_of_Demeter)
://en.wikipedia.org/wiki/Law_of_Demeter 和一个具体的例子：[http://www.devdaily.com/java/java-law-of-demeter-java-examples](http://www.devdaily.com/java/java-law-of-demeter-java-examples)

因此，根据我的说法，大约 99% 的情况下，字段必须是私有/或包或受保护的（但绝不是公共的，除非框架强加它......很少见）并且只能通过包装类方法来操作。而且在大多数情况下，令人惊讶的是，95% 的 getter/setter 可以因为无用而被删除。

这是一种完全不同的思维方式，很难停止思考程序，但它让你的代码更加灵活、干净并且最接近现实世界；）

你说：

> 我认为这是多余的，因为没有其他类会实例化 MainClass

我认为，一个好的设计的关键是要限制最多，只要它允许创建功能。如果开发人员过于宽容，程序可能会导致严重的奇怪冲突，从而导致行为。

开发人员必须尝试预测未来几年的程序（对于大型程序），并意识到未来的开发人员可能会在您的上下文中犯一些错误：在`main`方法之外实例化您的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T00:18:27.767

正如[*控制对类成员的访问中*](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)所讨论的，*没有修饰符*表示*包私有*访问，这允许对同一包中的其他类进行可见性。如果您不希望这样，请明确将成员*设为私有*。

# php - 从 mysql 数据库表中加载数据并在其中使用它作为选项

> ID：12627704
> 
> 赞同：0
> 
> 时间：2012-09-27T18:18:16.510
> 
> 标签：php, mysql, html

所以我在 mysql 中有这个表，在数据库 addressbook1 中称为 colegue。它具有以下字段：colegue_id、名字、姓氏、电话和电子邮件。我想要的是获取 firstname 列中的数据并将其显示在使用复选框的表单中。例如：
*checkbox* jerry
*checkbox* mary
*checkbox* cindy
等等。然后，检查的数据应该被发送到一个脚本，该脚本回显所选数据。这是将数据加载到页面上的代码：

```
 <?php
 //connect to mysql
mysql_connect("localhost", "root", "");
//select database
mysql_select_db("adressbook1");
//select data from table
$query=("SELECT * FROM colegue");
//perform query
$result=mysql_query($query);
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>testing</title>
</head>
<body>
<h3>testing a checkbox form</h3>

<?php
//start the form
echo "<form method=\"post\" action=\"process.php\">";
while($row=mysql_fetch_array($result)) 
{
//assign value from associative array to variable
$data=$row['firstName'];
/*echo data and assign the value in the input the current value of $data while loading     onto array*/
echo "<input type=\"checkbox\" name=\"firstname[]\" value=\"<?php $data;?>\">".$data."    <br>";

}
echo "<br>";
//send data to process.php when clicked
echo "<input type=\"submit\" name=\"sent\" value=\"add\">";
echo "</form>";
?>
</body>
</html> 
```

现在对于处理数据的脚本：

```
<?php
//get the data from the form in an array
$entry=$_POST['firstname'];
//check if the array is empty or not
if (empty($entry))
{
echo("execution failed");
}
//if not empty, continue
else
{
//get the array size
$N=count($entry);
//display the size of the array
echo "$N"."<br>";
//this loop should display all the data in the array
for($i=0; $i<$N; $i++)
{

echo "$entry[$i]"."<br>";

 }
//end script by showing successful result
echo ("request successful!");

}
?> 
```

当我检查要发送的名称并将它们提交给脚本时，代码运行良好。该脚本确实向我显示了数组的大小（例如，如果我单击四个名称，它会显示数字四）但它没有显示其他任何内容，它没有显示我单击的实际名称页。谁能帮我解决这个问题？我在想也许我没有在数组中正确分配值`firstname[]`。

请注意，我必须使用此方法（复选框）来提交从数据库中获取的数据，以便将其显示在脚本页面中。我对编程很陌生，所以我请求帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:28:04.757

您需要将 $data 与字符串连接，只需更改

```
value=\"<?php $data;?>\" 
```

也

```
value=\"".$data."\" 
```

# python - 带有时区指示符的 Python 日期 iso8601 格式

> ID：12627708
> 
> 赞同：8
> 
> 时间：2012-09-27T18:18:29.287
> 
> 标签：python

我正在从服务器发送一些日期，它的时间是 gmt-6 格式，但是当我将它们转换为 isoformat 时，我最后没有得到 tz 指示符。

我目前正在设置这样的日期：

```
date.isoformat() 
```

但我得到了这个字符串：`2012-09-27T11:25:04`没有 tz 指示符。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T18:25:35.443

您没有得到时区指示符，因为`datetime`不知道（即，它没有`tzinfo`）：

```
>>> import pytz
>>> from datetime import datetime
>>> datetime.now().isoformat()
'2012-09-27T14:24:13.595373'
>>> tz = pytz.timezone("America/Toronto")
>>> aware_dt = tz.localize(datetime.now())
>>> datetime.datetime(2012, 9, 27, 14, 25, 8, 881440, tzinfo=<DstTzInfo 'America/Toronto' EDT-1 day, 20:00:00 DST>)
>>> aware_dt.isoformat()
'2012-09-27T14:25:08.881440-04:00' 
```

过去，当我不得不处理一个`datetime`我知道代表特定时区时间的不知情的情况时，我只是附加了时区：

```
>>> datetime.now().isoformat() + "-04:00"
'2012-09-27T14:25:08.881440-04:00' 
```

或者将这些方法与：

```
>>> datetime.now().isoformat() + datetime.now(pytz.timezone("America/Toronto")).isoformat()[26:]
'2012-09-27T14:25:08.881440-04:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-25T07:11:37.297

[`arrow`](https://arrow.readthedocs.io/en/stable/)使用专门的模块处理日期要容易得多，例如[`delorean`](https://delorean.readthedocs.io/en/latest/)

```
>>> import arrow
>>> arrow.now().isoformat()
'2020-11-25T08:10:39.672624+01:00' 
```

# analysis - ActivePivot 叶级聚合和分析维度

> ID：12627709
> 
> 赞同：3
> 
> 时间：2012-09-27T18:18:30.977
> 
> 标签：analysis, dimension, activepivot

假设我有一个 ActivePivot 多维数据集，其中包含仅包含值和货币的事实。假设我的多维数据集将货币作为常规维度。

我们用具有多种货币的事实填充立方体。

我们有一项外汇服务，它采用货币和参考货币来获得汇率。

现在，Value.SUM 没有任何意义，我们将不同货币的值相加，所以我们希望有一个后处理器可以将所有值转换为参考货币，比如美元，然后将它们相加，所以我们写一个扩展*ADynamicAggregationPostProcessor*的后处理器，将 Currency指定为叶级维度，并使用外汇服务进行转换，我们很高兴。

但是，假设我们不想只转换为美元，我们想转换为 10 种不同的货币，并在屏幕上看到彼此相邻的结果。所以我们创建了一个分析维度，比如 ReferenceCurrency，它有 10 个成员。

我的问题是：如何更改上述后处理器来处理分析维度？普通的*ADynamicAggregationPostProcessor*不处理分析维度，只有默认成员对此后处理器可见。其他处理分析维度的后处理器，如*DefaultAggregatePostProcessor*没有指定叶级别的方法，因此我无法按货币获取聚合，因此无法进行外汇转换。我怎样才能有我的蛋糕，也吃呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:39:33.210

看起来您想同时使用 ActivePivot 的两个高级功能（分析维度以公开同一聚合的多个结果，动态聚合以聚合以不同货币表示的金额）。

通过配置和几行代码注入，每一个都相当容易设置。但是要交叉使用两者，您需要了解后处理器评估的内部结构，并在正确的位置注入业务逻辑。

这是一个基于 ActivePivot 4.3.3 的示例。它是在开源沙盒应用程序中编写的，因此您可以在将其适应您自己的项目之前快速运行它。

首先，我们需要一个简单的分析维度来保存可能的参考货币：

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.List;
import java.util.Properties;
import java.util.Set;

import com.quartetfs.biz.pivot.cube.hierarchy.axis.impl.AAnalysisDimension;
import com.quartetfs.fwk.QuartetExtendedPluginValue;

/**
 * 
 * An analysis dimension bearing the
 * list of possible reference currencies.
 * 
 * @author Quartet FS
 *
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.cube.hierarchy.IDimension", key = ReferenceCurrencyDimension.TYPE)
public class ReferenceCurrencyDimension extends AAnalysisDimension {

    /** serialVersionUID */
    private static final long serialVersionUID = 42706811331081328L;

    /** Default reference currency */
    public static final String DEFAULT_CURRENCY = "EUR";

    /** Static list of non-default possible reference currencies */
    public static final List<Object[]> CURRENCIES;
    static {
        List<Object[]> currencies = new ArrayList<Object[]>();
        currencies.add(new Object[] {"USD"});
        currencies.add(new Object[] {"GBP"});
        currencies.add(new Object[] {"JPY"});
        CURRENCIES = Collections.unmodifiableList(currencies);
    }

    /** Plugin type */
    public static final String TYPE = "REF_CCY";

    /** Constructor */
    public ReferenceCurrencyDimension(String name, int ordinal, Properties properties, Set<String> measureGroups) {
        super(name, ordinal, properties, measureGroups);
    }

    @Override
    public Object getDefaultDiscriminator(int levelOrdinal) { return DEFAULT_CURRENCY; }

    @Override
    public Collection<Object[]> buildDiscriminatorPaths() { return CURRENCIES; }

    @Override
    public int getLevelsCount() { return 1; }

    @Override
    public String getLevelName(int levelOrdinal) {
        return levelOrdinal == 0 ? "Currency" : super.getLevelName(levelOrdinal);
    }

    @Override
    public String getType() { return TYPE; }

} 
```

然后是后处理器本身，一个定制的动态聚合后处理器修改为处理分析维度并多次输出相同的聚合，每个参考货币一次。

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.List;
import java.util.Properties;

import com.quartetfs.biz.pivot.IActivePivot;
import com.quartetfs.biz.pivot.ILocation;
import com.quartetfs.biz.pivot.ILocationPattern;
import com.quartetfs.biz.pivot.aggfun.IAggregationFunction;
import com.quartetfs.biz.pivot.cellset.ICellSet;
import com.quartetfs.biz.pivot.cube.hierarchy.IDimension;
import com.quartetfs.biz.pivot.cube.hierarchy.axis.IAxisMember;
import com.quartetfs.biz.pivot.impl.Location;
import com.quartetfs.biz.pivot.postprocessing.impl.ADynamicAggregationPostProcessor;
import com.quartetfs.biz.pivot.postprocessing.impl.ADynamicAggregationProcedure;
import com.quartetfs.biz.pivot.query.IQueryCache;
import com.quartetfs.biz.pivot.query.aggregates.IAggregatesRetriever;
import com.quartetfs.biz.pivot.query.aggregates.RetrievalException;
import com.quartetfs.fwk.QuartetException;
import com.quartetfs.fwk.QuartetExtendedPluginValue;
import com.quartetfs.pivot.sandbox.service.impl.ForexService;
import com.quartetfs.tech.type.IDataType;
import com.quartetfs.tech.type.impl.DoubleDataType;

/**
 * Forex post processor with two features:
 * <ul>
 * <li>Dynamically aggregates amounts in their native currencies into reference currency
 * <li>Applies several reference currencies, exploded along an analysis dimension.
 * </ul>
 * 
 * @author Quartet FS
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.postprocessing.IPostProcessor", key = ForexPostProcessor.TYPE)
public class ForexPostProcessor extends ADynamicAggregationPostProcessor<Double> {

    /** serialVersionUID */
    private static final long serialVersionUID = 15874126988574L;

    /** post processor plugin type */
    public final static String TYPE = "FOREX";

    /** Post processor return type */
    private static final IDataType<Double> DATA_TYPE = new DoubleDataType();

    /** Ordinal of the native currency dimension */
    protected int nativeCurrencyDimensionOrdinal;

    /** Ordinal of the native currency level */
    protected int nativeCurrencyLevelOrdinal;

    /** Ordinal of the reference currencies dimension */
    protected int referenceCurrenciesOrdinal;

    /** forex service*/
    private ForexService forexService;

    /** constructor */
    public ForexPostProcessor(String name, IActivePivot pivot) {
        super(name, pivot);
    }

    /** Don't forget to inject the Forex service into the post processor */
    public void setForexService(ForexService forexService) {
        this.forexService = forexService;
    }

    /** post processor initialization */
    @Override
    public  void init(Properties properties) throws QuartetException {
        super.init(properties);

        nativeCurrencyDimensionOrdinal = leafLevelsOrdinals.get(0)[0];
        nativeCurrencyLevelOrdinal = leafLevelsOrdinals.get(0)[1];

        IDimension referenceCurrenciesDimension = getDimension("ReferenceCurrencies");
        referenceCurrenciesOrdinal = referenceCurrenciesDimension.getOrdinal();
    }

    /** 
     * Handling of the analysis dimension:<br>
     * Before retrieving leaves, wildcard the reference currencies dimension.
     */
    protected ICellSet retrieveLeaves(ILocation location, IAggregatesRetriever retriever) throws RetrievalException {
        ILocation baseLocation = location;
        if(location.getLevelDepth(referenceCurrenciesOrdinal-1) > 0) {
            Object[][] array = location.arrayCopy();
            array[referenceCurrenciesOrdinal-1][0] = null;  // wildcard
            baseLocation = new Location(array);
        }
        return super.retrieveLeaves(baseLocation, retriever);
    }

    /**
     * Perform the evaluation of the post processor on a leaf (as defined in the properties).
     * Here the leaf level is the UnderlierCurrency level in the Underlyings dimension .
     */
    @Override
    protected Double doLeafEvaluation(ILocation leafLocation, Object[] underlyingMeasures) throws QuartetException {

        // Extract the native and reference currencies from the evaluated location
        String currency = (String) leafLocation.getCoordinate(nativeCurrencyDimensionOrdinal-1, nativeCurrencyLevelOrdinal);
        String refCurrency = (String) leafLocation.getCoordinate(referenceCurrenciesOrdinal-1, 0);

        // Retrieve the measure in the native currency
        double nativeAmount = (Double) underlyingMeasures[0];

        // If currency is reference currency or measureNative is equal to 0.0 no need to convert
        if ((currency.equals(refCurrency)) || (nativeAmount == .0) ) return nativeAmount;

        // Retrieve the rate and rely on the IQueryCache 
        // in order to retrieve the same rate for the same currency for our query
        IQueryCache queryCache = pivot.getContext().get(IQueryCache.class);
        Double rate = (Double) queryCache.get(currency + "_" + refCurrency);
        if(rate == null) {
            Double rateRetrieved = forexService.retrieveQuotation(currency, refCurrency);
            Double rateCached = (Double) queryCache.putIfAbsent(currency + "_" + refCurrency, rateRetrieved);
            rate = rateCached == null ? rateRetrieved : rateCached;
        }

        // Compute equivalent in reference currency
        return  rate == null ? nativeAmount :  nativeAmount * rate;
    }

    @Override
    protected IDataType<Double> getDataType() { return DATA_TYPE; }

    /** @return the type of this post processor, within the post processor extended plugin. */
    @Override
    public String getType() { return TYPE; }

    /**
     * @return our own custom dynamic aggregation procedure,
     * so that we can inject our business logic.
     */
    protected DynamicAggregationProcedure createProcedure(ICellSet cellSet, IAggregationFunction aggregationFunction, ILocationPattern pattern) {
        return new DynamicAggregationProcedure(cellSet, aggregationFunction, pattern);
    }

    /**
     * Custom dynamic aggregation procedure.<br>
     * When the procedure is executed over a leaf location,
     * we produce several aggregates instead of only one:
     * one aggregate for each of the visible reference currencies.
     */
    protected class DynamicAggregationProcedure extends ADynamicAggregationProcedure<Double> {

        protected DynamicAggregationProcedure(ICellSet cellSet, IAggregationFunction aggregationFunction, ILocationPattern pattern) {
            super(ForexPostProcessor.this, aggregationFunction, cellSet, pattern);
        }

        /**
         * Execute the procedure over one row of the leaf cell set.
         * We compute one aggregate for each of the reference currencies.
         */
        @Override
        public boolean execute(ILocation location, int rowId, Object[] measures) {
            if(location.getLevelDepth(referenceCurrenciesOrdinal-1) > 0) {

                // Lookup the visible reference currencies
                IDimension referenceCurrenciesDimension = pivot.getDimensions().get(referenceCurrenciesOrdinal);
                List<IAxisMember> referenceCurrencies = (List<IAxisMember>) referenceCurrenciesDimension.retrieveMembers(0);
                for(IAxisMember member : referenceCurrencies) {
                    Object[][] array = location.arrayCopy();
                    array[referenceCurrenciesOrdinal-1][0] = member.getDiscriminator();
                    ILocation loc = new Location(array);
                    super.execute(loc, rowId, measures);
                }
                return true;
            } else {
                return super.execute(location, rowId, measures);
            }
        }

        @Override
        protected Double doLeafEvaluation(ILocation location, Object[] measures) throws QuartetException {
            return ForexPostProcessor.this.doLeafEvaluation(location, measures);
        }

    }

} 
```

在多维数据集的描述中，分析维度和后处理器将如下所示：

```
...
<dimension name="ReferenceCurrencies" pluginKey="REF_CCY" />
...
<measure name="cross" isIntrospectionMeasure="false">
    <postProcessor pluginKey="FOREX">
        <properties>
            <entry key="id" value="pv.SUM" />
            <entry key="underlyingMeasures" value="pv.SUM" />
            <entry key="leafLevels" value="UnderlierCurrency@Underlyings" />
        </properties>
    </postProcessor>
</measure>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:59:23.020

Analysis Dimensions brings so much complexity they should be considered apart of the others features of your cube. One way to handle your issue is then:

1.  Add a first measure expanding properly along the analysis dimension. In your case, it will simply copy the underlying measure along ReferenceCurrency, optionally doing the FX conversion. This measure may be used as underlying of several measures.

2.  Add a second measure, based on usual dynamic aggregation. This second implementation is very simple as it does not know there is an analysis dimension.

# bash - bash 变量作为 awk 字段宽度

> ID：12627710
> 
> 赞同：2
> 
> 时间：2012-09-27T18:18:33.323
> 
> 标签：bash, awk, printf

我有一个变量：`n=$maxlen`，有什么方法可以在 awk 中使用 printf 时将其用作字段宽度？

像这样的东西：

```
n=$maxlen
awk -v val=$n -F',' '{printf "%vals %7s %17s %4i\n", $1, $2, $3, $4}' somefile.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:25:39.803

弄清楚了！:D

```
n=$maxlen
awk -v val=$n -F',' '{printf "%*s %7s %17s %4i\n", val, $1, $2, $3, $4}' somefile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:26:22.503

一种选择是背着 AWK，让 Bash 将数字直接滑入 AWK 脚本：

```
awk -v -F',' '{printf "%'"$n"'s %7s %17s %4i\n", $1, $2, $3, $4}' somefile.txt 
```

据 AWK 所知，这`%'"$n"'s`是一个实际的`%3s`（或其他）。

# javascript - 在简单函数中使用 if-if 或 if-else if-else

> ID：12627711
> 
> 赞同：1
> 
> 时间：2012-09-27T18:18:34.113
> 
> 标签：javascript, function, if-statement

我曾经写过这个简单的函数，用来显示哈希变化的通知：

```
function watchHash() {
    if(location.hash == '#thanks') {
        displayNotification('Thanks for your feedback, I\'ll try to get back to you as soon as possible.'); // Notify on form submit success
    }

    if(location.hash == '#error') {
        displayNotification('Oops, something went wrong ! Please try again.'); // Notify on form submit error
    }
}
window.onhashchange = watchHash; 
```

我今天回过头来想，如果我这样写是否**正确？**

```
function watchHash() {
    if(location.hash == '#thanks') {
        displayNotification('Thanks for your feedback, I\'ll try to get back to you as soon as possible.'); // Notify on form submit success
    }
    else if(location.hash == '#error') {
        displayNotification('Oops, something went wrong ! Please try again.'); // Notify on form submit error
    }
    else {
        return;
    }
}
window.onhashchange = watchHash; 
```

如果是这样，它是否**相关**？

我在这里有点困惑，我想坚持最佳实践。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:21:36.100

第二种情况要好得多。为什么？

因为在第一种情况下，如果满足或不满足第一个条件 - 没关系，第二个情况也会被检查，第三个，第四个等等。

第二种情况 如果第一种情况失败，则测试第二种情况，如果失败，则测试第三种情况，因此您的软件不会花费无用的时间检查不会发生的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:50:11.593

在您的情况下，任何一种方法都同样有效。但是，有时使用`else`子句确实是处理重叠逻辑的最佳方式。

未经测试的 p 代码，仅作为示例

```
if (isRaining) && (iHaveUmbrella) {
  iGetWet = false;
} else if (isRaining) {
  iGetWet = true;
} else {
  iGetWet = false;
} 
```

在这种情况下，这`else if`意味着如果第一个条件为真，则*永远不会检查*第二个条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:31:25.550

无论哪种方式都可以正常工作。两者之间的区别在于可读性和编码模式。

关于可读性，我个人更喜欢处理单个输入的第一种方式。第二个效果更好，但如果您不是熟练的开发人员，您可能会迷失在多个界限中。

关于编码模式，我们可以看到第一个不会返回任何内容。仅当哈希标签不是您的选择时，第二个才会返回 null。您不能使用此函数检查条件，因为当哈希标记为“#thanks”或“#error”时，它不会返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T18:24:25.890

它可能与此用例无关，但第一种方式较慢，因为解释器必须更频繁地检查条件..考虑一个每秒调用 60 次的游戏循环，并且您不会构建您将得到的 if else 块巨大的性能冲击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T18:21:29.127

您的第二个版本是“正确的”，因为它的功能与第一个版本相同，但添加的代码完全是多余的。

# c - MIPS 可执行/目标文件格式

> ID：12627712
> 
> 赞同：2
> 
> 时间：2012-09-27T18:18:40.273
> 
> 标签：c, windows, mips, disassembly

作为学习 MIPS 汇编的一部分，我想用 LCC 交叉编译一些 C 源文件，然后反汇编它们。我找到了一个在 Windows 上运行的[MIPS 反汇编](http://acade.au7.de/disasmips.htm)程序，但它在描述中说：

> 反汇编纯内存转储（原始代码）和 GCC 目标文件

我知道对于 x86 有多种可执行/目标文件格式，具体取决于目标操作系统。这是 MIPS 的情况吗？你认为这会奏效吗？或者我是否将不得不安装一个 linux 发行版，以便我可以使用像[CodeSourcery](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)这样的预编译 gcc MIPS 工具链之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:46:27.887

为了回答最初的问题，MIPS 上的 Linux 对可执行文件和共享对象使用 ELF 格式文件。裸机 MIPS 系统可能会使用某种形式的内存转储。来自 GNU codesourcery 工具链的 objdump 实用程序将反汇编 ELF 文件和 GCC`.o`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:28:52.707

它看起来`lcc`支持`-S`编译器选项，它发出程序集输出。也许这会为您节省一些精力？

可执行格式始终根据操作系统和编译器（显然必须协同工作）。如果您决定需要使用 gcc，[http](http://faculty.cs.tamu.edu/bettati/Courses/410/2006C/Projects/gxemulcygwin.html) ://faculty.cs.tamu.edu/bettati/Courses/410/2006C/Projects/gxemulcygwin.html似乎讨论了一种通过 cygwin 在 Win32 下安装的方法。

# java - 指针未显示在我的地图上

> ID：12627719
> 
> 赞同：0
> 
> 时间：2012-09-27T18:18:52.727
> 
> 标签：java, android, maps

我有一张地图，我想在上面放一个标记，但标记没有显示出来。这是我的代码：

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

public class MapDetailActivity extends MapActivity 
{
    private final static String TAG = MapDetailActivity.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.map_view);

        // get longitude and latitude values from detail activity/object
        Bundle bundle = this.getIntent().getExtras();
        float latitude = bundle.getFloat("uie.top25.seattle.latitude");
        float longitude = bundle.getFloat("uie.top25.seattle.longitude");

        Log.i(TAG, "Latitude that is set : " + latitude);
        Log.i(TAG, "Longitude that is set : " + longitude);
        // create longitude and latitude map points
        Double lat = latitude * 1E6;
        Double lon = longitude * 1E6;

        // create point on map
        GeoPoint point = new GeoPoint(lat.intValue(), lon.intValue());
        OverlayItem oi = new OverlayItem(point, null, null); 
        MapView mapView = (MapView) this.findViewById(R.id.myMapView);
        MapController mapController = mapView.getController();
        // set point on map
        mapController.animateTo(point);
        oi.setMarker(oi.getMarker(R.drawable.mm_20_red)); 
        // set zoom level
        mapController.setZoom(19);

    }

    @Override
    protected boolean isRouteDisplayed()
    {
        // No driving directions, so this method returns false
        return false;
    }

} 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:05:50.947

您需要创建一个覆盖来显示标记，请阅读： [https ://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay)

如果您不介意阅读所有这些内容，这里有一个准备使用的教程：

[http://android-er.blogspot.com/2009/11/display-marker-on-mapview-using.html](http://android-er.blogspot.com/2009/11/display-marker-on-mapview-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:52:57.003

您必须使用[https://developers.google.com/maps/documentation/android/hello-map](https://developers.google.com/maps/documentation/android/hello-mapview)将您的项目添加到地图查看此文档第 2 部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:04:47.630

您将需要阅读文档和示例，但基本步骤是：

1-通过从谷歌地图扩展 itemizedOverlay 创建您的 itemizedOverlay。

2-将覆盖项添加到您的逐项覆盖，并设置标记或使用上一步中定义的默认标记。

3-将逐项叠加添加到地图视图叠加中：

```
mapview.getoverlays().add(myItemizedOverlay); 
```

将叠加层添加到 mapview 叠加层列表后，mapview 将考虑调用叠加层以在屏幕上绘图（调用 onDraw 方法）

祝你好运。

# mysql - 特定的 MySQL 查询：将两个 MYSQL Select 语句与 OR 组合

> ID：12627720
> 
> 赞同：1
> 
> 时间：2012-09-27T18:19:00.430
> 
> 标签：mysql, select, join, expressionengine

我需要检查条目是否已分类（查询 A）或条目是否与某些数据有关系（查询 B）。我想用一个查询而不是两个单独的查询来做到这一点。例如：

```
[if query A OR query B ]
   <p>Show this content</p>
[/if] 
```

我有两个选择查询正常工作，但彼此独立。他们是：

**查询一：**

```
SELECT entry_id FROM exp_category_posts WHERE entry_id = '999' AND cat_id IN(SELECT cat_id FROM exp_categories WHERE group_id = '5') LIMIT 1 
```

**查询 B：**

```
SELECT entry_id FROM exp_matrix_data WHERE field_id = '19' AND col_id_7 <> '' AND entry_id = '999' 
```

同样，我想将这两个查询组合成一个查询，检查条目 999 是否属于某些类别（查询 A）或与某些数据有关系（查询 B）。做这个的最好方式是什么？

如果有帮助，查询将在 ExpressionEngine 数据库上运行。

免责声明：我知道关于如何组合 MySQL 语句有很多关于 SO 的问题`SELECT`，但我正在寻求有关此特定查询的帮助，但没有找到任何与我自己的问题足够相似的问题。如果我无意中激怒了重复的问题上帝，我提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:24:19.450

由于您的条目来自两个不同的表，并且据我了解您的请求，它不必同时存在于它们中，因此您需要使用`FULL OUTER JOIN`来执行此操作`OR`，这在 MySQL 中不受支持。

但是，您可以使用 a`UNION`来获得所需的结果：

```
SELECT entry_id FROM exp_category_posts WHERE entry_id = '999' AND cat_id IN(SELECT cat_id FROM exp_categories WHERE group_id = '5') LIMIT 1
UNION DISTINCT
SELECT entry_id FROM exp_matrix_data WHERE field_id = '19' AND col_id_7 <> '' AND entry_id = '999' 
```

# django - 如何在模板中打印有序子模型？

> ID：12627727
> 
> 赞同：0
> 
> 时间：2012-09-27T18:19:33.990
> 
> 标签：django, django-templates

我有模型：

```
class Model_1(models.Model):
    name = models.CharField(...
    pos = models.IntegerField(...

class Model_2(models.Model):
    ...
    m1 = models.ManyToManyField(Model_1,... 
```

我在模板中打印这个：

```
{% for m2 in model2 %}
    {% for m1 in m2.m1.all %}
        {{ m1.name }}
    {% endfor %}
{% endfor %} 
```

但我想打印按“pos”字段排序的 m1.names。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:37:47.880

在模型中，您可以指定对象的顺序。更多[在这里](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)

```
class M1():
   ...
   class Meta:
      ordering = ['pos'] 
```

# solr - 配置字段分析处理程序 - Solr 4

> ID：12627734
> 
> 赞同：6
> 
> 时间：2012-09-27T18:20:07.203
> 
> 标签：solr, lucene, analysis

我正在使用 Solr4 (beta) 开发一个测试 Solr 实例 - 我能够看到架构、查询数据。它工作正常！

当我单击 Solr Admin 中的分析选项卡时，我会得到分析表。但是，当我提交表单时，我收到一条错误消息 - “此功能需要 /analysis/field 处理程序已注册并处于活动状态！”

这是实际执行的 ajax 调用，它返回 404。

> http://localhost:8989/solr/core1/analysis/field?wt=json&analysis.fieldvalue=test+dog+cat&analysis.query=cat&analysis.showmatch=true&analysis.fieldname=item_name

如何配置分析/字段处理程序？

在 solr3 中，我能够进行分析。这个功能在solr4中是默认关闭的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-09T13:16:52.050

您需要将字段分析处理程序添加到您的`solrconfig.xml`：

```
<requestHandler name="/analysis/field" class="solr.FieldAnalysisRequestHandler" /> 
```

# mysql - Mysql循环和插入

> ID：12627735
> 
> 赞同：1
> 
> 时间：2012-09-27T18:20:09.560
> 
> 标签：mysql

我有以下 MySql 脚本：

```
SET @skip = 0;
SET @max = (SELECT COUNT(*) FROM table1);

CREATE TEMPORARY TABLE TempTable(
   id INT NOT NULL,
   name VARCHAR(32) NOT NULL
);

loop1: LOOP
  INSERT INTO TempTable (id, name) SELECT id, name FROM table1 LIMIT @skip, 1;

  IF @skip < @max THEN
    SET @skip = @skip + 1;
    ITERATE loop1;
  END IF;
  LEAVE loop1;
END LOOP loop1;

SELECT * FROM TempTable; 
```

此脚本不起作用，但它应该选择`table1`. 我正在使用一个循环，因为我还将在这些循环中做其他事情，但那是为了以后。我不是在寻找类似的解决方案，`SELECT id, name FROM table1`但我希望修复我的错误。所以我可以继续我的循环。

我得到的错误是：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'loop1: LOOP INSERT INTO TempTable (id, name) SELECT id, name FROM table1' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:40:29.347

尝试这样的循环语法：

```
DECLARE @count INT;
DECLARE @max INT;
SET @count=1;
SET @max= (SELECT COUNT(*) FROM table1);
WHILE(@count < @max)
BEGIN
    /*your database query logic*/
END 
```

使用“SET @count=(@count+1)”在循环中增加你的计数器

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-18T12:29:04.033

```
/* set delimiter */
DELIMITER $$

/* remove procedure if exists... */
DROP PROCEDURE IF EXISTS insert_it $$

/* create procedure */ 
CREATE PROCEDURE insert_it ()
BEGIN
DECLARE varcount INT DEFAULT 1;
DECLARE varmax INT DEFAULT 15;

WHILE varcount <= varmax DO
    INSERT INTO yourtable(fixed_val, count_val) VALUES(3493, varcount);
    SET varcount = varcount + 1;
END WHILE;

END $$

/* reset delimiter back to normal */
DELIMITER ;

/* call procedure */ 
CALL insert_it(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T18:44:13.207

*您的代码中*存在语法错误（`LIMIT @skip`这是动态 SQL，需要一些技巧才能使其工作），但不是在`loop1: LOOP`.

我的猜测是您正在尝试在复合语句（`BEGIN`... `END`）之外使用 LOOP ，例如存储过程，这是不可能的。你必须创建一个存储过程来做到这一点。

# mysql - SQL - 是否有相反但等效的 UNION 函数？

> ID：12627746
> 
> 赞同：16
> 
> 时间：2012-09-27T18:20:53.863
> 
> 标签：mysql, sql

mysql是否有相反但等效的UNION函数？

我知道可以通过更长的查询来做到这一点，但我很好奇是否有等效的功能。

我有 2 个选择语句用于 2 个不同的表

```
select state, state_name, id, idname, phone, mobile, home from table1
select state, state_name, id, idname, phone, mobile, home from table2 
```

而且我需要一个仅从 table1 中提取的查询，并且仅当 table1 中的 idname、phone、mobile、home 与 table2 不匹配时

例如：Table1 有

```
AK | Alaska | 1 | row6   | 453  | 567 | 123 
```

但表 2 有：

```
AK | Alaska | 1 | row6   | 453  | 567 | 123
AK | Alaska | 1 | row6   | NULL | 567 | 123
AK | Alaska | 1 | tttttt | 453  | 567 | 123 
```

查询将显示

```
AK | Alaska | 1 | row6   | NULL | 567 | 123
AK | Alaska | 1 | tttttt | 453  | 567 | 123 
```

不会显示

```
AK | Alaska | 1 | row6   | 453  | 567 | 123 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T18:23:37.373

在标准 SQL 中，您可以使用 ANSI SQL`EXCEPT`运算符，它与`UNION`

```
SELECT * FROM Table2
EXCEPT
SELECT * FROM Table1 
```

还有一个`INTERSECT` [集合运算符](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29)可以显示两个源共有的行。

不幸的是，当前版本的 MySQL 都不支持这些，因此您需要使用其他 3 种更详细的方法之一来实现反半连接。

[NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T18:23:40.040

如果您使用的是 Oracle，您将使用[MINUS](http://www.techonthenet.com/sql/minus.php)子句。

```
statement 1
MINUS
statement 2 
```

或者

```
statement 1
WHERE NOT EXISTS (statement 2) 
```

# authentication - 在 CouchDB 的 AuthSession cookie 中设置域

> ID：12627749
> 
> 赞同：7
> 
> 时间：2012-09-27T18:21:01.417
> 
> 标签：authentication, couchdb

在 CouchDB 中使用基于 cookie 的身份验证时，域似乎设置为主机的域；例如*foo.com 。*如果我们希望从子域访问此会话；*例如bar.foo.com*，这将失败。

从我管理 cookie 的有限经验来看，如果您将域设置为*.foo.com*（注意前面的点`.`），那么您可以在子域上访问这些 cookie。

在设置 cookie 以包含前导点时，是否可以更改 CouchDB 使用的域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-23T21:46:15.527

从沙发 >= 2 （我自己在 2.2 上测试过），您可以将其添加到您的配置文件中

`[couch_httpd_auth] cookie_domain = foo.com`

# java - 如何使用 JAX-B 处理接口的各种具体实现

> ID：12627754
> 
> 赞同：3
> 
> 时间：2012-09-27T18:21:15.237
> 
> 标签：java, xml, jaxb, marshalling

我有一个需要编组为 XML 的类。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class ClassToBeMarshalled {
    public Interface object;
} 
```

该接口由许多具体类实现，其中大多数是特定于供应商的，我无权访问其源代码。

所以我的问题是：

如果我尝试编组该类，JAX-B 将抱怨接口的当前具体实现在上下文中未知 - 换句话说，具体类没有通过调用提供当前实现的 JAXBContext.newInstance 加载到上下文中。

解决该问题的最常见方法是：

1) 使用 XMLSeeAlso - 这不是一个可行的选择，因为有很多具体的类

2）用@XmlRootElement注释每个类 - 这不是一个可行的选择，因为我无权访问所有类

有谁知道在需要时让 JAX-B 将具体类加载到其上下文中的方法？

谢谢。

PS：我正在使用 JAX-B RI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:24:31.390

您可以将您的`object`as where标记为能够在 DOM 表示和实际实现类之间进行转换。该处理程序可能应该在编组时存储类名，并在解组时使用该类名来创建实例。它可能会手动配置实例，可能使用一些设计用于处理 bean 的帮助程序类，或者它可能使用另一个 jaxb 上下文，其中包括特定命名的类，并将处理该对象及其所有嵌套的子对象。[`@XmlAnyElement`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlAnyElement.html)`(InterfaceHandler.class)``InterfaceHandler`[`DomHandler`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/DomHandler.html)

也看看[`@XmlElementRef`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementRef.html)注释。我担心为了使这项工作正常工作，您至少必须在编译时了解所有实现类，但也许有一种方法也可以为您工作，比通用解决方案更容易上一段中概述的。

# ios - AIR iOS 应用程序中的文本 URL 不可选择

> ID：12627757
> 
> 赞同：1
> 
> 时间：2012-09-27T18:21:26.580
> 
> 标签：ios, actionscript-3, flash, air

我正在使用 AIR 2.0（很快将使用 Flash CS6 更新到 3.3）来创建 iPad 应用程序。我们有文本字段（经典、动态），有时包含一个或多个需要可点击的 htmlText 链接。在该程序的桌面版本中，所有文本都是可选的，并且链接很容易访问。我的问题是，我需要在 iPad 上将链接捣碎 20 次，然后它才会识别出有链接并在 Safari 中导航到它。另一个奇怪的事情是，没有一个文本似乎是可选择的——我无法让 iPad 光标、复制/粘贴菜单等显示出来。

我认为，通过阅读其他线程，URL 的点击区域只是文本本身的笔划......如果这是真的，我该怎么做才能增加点击区域？或者使文本可选择？有人建议在其他地方将影片剪辑放在 URL 后面，但这实际上是不可能的，因为这都是来自 XML 文件的动态文本。

我读过关于 StageText 但我认为这仅用于输入字段，这里不是这种情况。

我在 AS3 方面相当先进，但我更喜欢一个简单的解决方案，而不是重写大量代码。目前，我唯一能想到的就是获取 URL 并制作它，以便一旦您触摸文本字段上的任何位置，它就会导航到链接。但是，如果给定的文本字段中有超过 1 个 URL，这将崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T03:24:20.437

我有这个完全相同的问题，它让我困惑了一段时间。这是我为获得所需行为所做的工作：

**1)**不要使用 TextEvent.LINK 的侦听器，而是在 TextField 上侦听 MouseEvent.CLICK（或 TouchEvent.TAP）。

例如。

```
var tf:TextField = new TextField();
tf.addEventListener(MouseEvent.CLICK, linkClicked); 
```

**2)**在 linkClicked() 处理程序中，您使用 getCharIndexAtPoint() 来确定被点击的字符的索引，然后根据字符的 TextFormat 确定 URL。本文改编自 Colin Holgate 在 Adob​​e 论坛 ( [http://forums.adobe.com/thread/231754](http://forums.adobe.com/thread/231754) )上的帖子

```
public function linkClicked(e:MouseEvent):void {
    var idx:int = e.target.getCharIndexAtPoint(e.localX, e.localY);
    trace("Tapped:",idx);

    var tf:TextFormat = e.target.getTextFormat(idx);
    if(tf.url != "" && tf.url != null) {
        var linkURL:String = tf.url;
        trace(linkURL);

        // Hyperlink processing code here
        dispatchEvent(new UIEvent(UIEvent.LINK_TAPPED,tf.url));
    }
} 
```

3) 最后一行 (dispatchEvent()) 将自定义事件发送到另一个函数以处理链接，但您可以在此处轻松内联代码。

我已经在运行 iOS6.1、使用 AIR3.5 构建的 iPad 3 上进行了测试。链接的响应速度更快，而且我发现自己不会在屏幕上捣碎试图击中文本的笔划！

# security - 将指纹图像转换为可比较的模板

> ID：12627765
> 
> 赞同：11
> 
> 时间：2012-09-27T18:22:00.540
> 
> 标签：security, fingerprint

我有一个指纹扫描仪，它只给我一个指纹图像（它的 SDK 不提供任何将它们“转换”为模板和比较这些模板的功能）。我的问题是我应该使用哪种方法：寻找一个确实提供转换和比较指纹图像功能的 SDK，或者我自己编写这些算法（这似乎很难且耗时）。如果首选第一种方法，那么该工作的开源/付费 sdk 是什么？你能给我一些链接吗

我的设备是 Verifier 300 LC。

提前谢谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:26:02.307

有一个免费的[NBIS 生物识别图像软件](http://www.nist.gov/itl/iad/ig/nigos.cfm)和基于它的[libfprint库。](http://www.freedesktop.org/wiki/Software/fprint)

看来指纹图像比较可以很容易开发，请参阅[此线程](http://www.mail-archive.com/fprint@reactivated.net/msg01641.html)

也有可用的商业库：

*   [VeriFinger SDK](http://www.neurotechnology.com/verifinger.html)
*   [Griaule 指纹 SDK](http://www.griaulebiometrics.com/en-us/fingerprint_sdk)
*   [生物插件 SDK](http://www.m2sys.com/bioplugin.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-29T12:22:50.017

我正在寻找这种指纹原始图像转换为 Java 中的 WSQ 标准，我发现以下内容很有用。希望能帮助到你。

[http://jmrtd.org/index.shtml](http://jmrtd.org/index.shtml)

而这个[https://github.com/E3V3A/JMRTD/tree/master/wsq_imageio](https://github.com/E3V3A/JMRTD/tree/master/wsq_imageio)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-09T18:07:31.877

有很多可用的软件，你可以从**NBIS**开始，它有很多工具，例如：细节提取工具（**mindtct**），位图图像（JPG/PNG）到 WSQ snd 反之亦然等，使用 NBIS.NET 一些问题是在图像转换过程中32bpp 图像到 16bppGrayScale 或 8bppIndexed，

通过从 NBIS 样本中学习，您可以快速学习并创建自己的专有 FP 匹配算法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-08-17T13:43:33.107

我在 Lakota Software Solutions, Inc. 工作，我们有一个商业产品（免费的开发者许可）可以解决您的问题。

Lakota 的 Image 产品是唯一一个通过 FBI 认证的纯 Java 编写的 WSQ 编码器/解码器，它可能是目前最快的。我们对其进行了测试，它比 NIST WSQ 编码器/解码器快 5 倍。

使用 Image 在图像格式之间进行转换非常简单直接。

```
byte[] rawBytes = ...
Image rawImage = ImageReader.read(rawBytes, ImageFormat.RAW);
Image wsqImage = rawImage.toWsqImage(); 
```

您可以访问我们的网站[http://www.lakotasoftware.com/products/image](http://www.lakotasoftware.com/products/image)

如果您正在寻找免费版本，您可以查看 Jnbis，它是 NBIS 的 Java 版本。[https://github.com/kareez/jnbis](https://github.com/kareez/jnbis)。

请注意，Jnbis 尚未通过 FBI 认证以满足 WSQ 质量要求，这对您的情况可能很重要，也可能无关紧要。[您可以在https://www.fbibiospecs.cjis.gov/WSQ/Implementations](https://www.fbibiospecs.cjis.gov/WSQ/Implementations)找到经过认证的 WSQ 算法列表

# c# - 在反射中需要通用解决方案：创建可能有也可能没有无参数构造函数的实例

> ID：12627766
> 
> 赞同：0
> 
> 时间：2012-09-27T18:22:01.977
> 
> 标签：c#, reflection

我正在开发一个向设备发送命令的项目。每个命令对象与设备支持的特定命令（由支持的 dll 的 API 定义）具有一对一的关系。

我有定义命令的 XML 文件：命名方法名称和参数（按名称、类型和默认值）。

我的应用程序读取 XML 并创建一个命令对象。我有一个参数字典，其中的参数名称与值相关联（按类型）。

在填充参数字典时，我开始创建一个类型，然后是一个实例，然后更新字典。

```
{
    theType = Type.GetType(paramType);
    var newInstance = Activator.CreateInstance(theType, true);
    parameterValueMap.Add(paramName, newInstance);
} 
```

这适用于整数等，但不适用于字符串类型，因为它们没有无参数构造函数。

由于可能有其他类型的无参数构造函数，我需要保持解决方案的通用性（不专门处理字符串）。

有人可以帮我解决问题吗？有没有办法在没有参数的实际实例的情况下创建带参数的类型的实例（在我的具体情况下是字符串的实例）？

谢谢-m

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:28:57.990

由于您提到泛型， a`default(T)`可能有用，但这将`null`用于类/接口。一个方便的邪恶技巧是：

```
T obj = (T)FormatterServices.GetUninitializedObject(typeof(T)); 
```

然而！这是纯粹的邪恶，通常为反序列化/物化库保留。这不适用于临时使用。

也许最好的方法是让调用者告诉你如何，例如添加一个可选的工厂参数：

```
 void YourMethod<T>(..., Func<T> constructor = null) 
```

然后*，如果他们想要*调用者可以提供一种技术来创建实例。所以你有了：

```
T obj = constructor == null ? (T)Activator.CreateInstance(typeof(T))
                            : constructor(); 
```

无论如何：字符串是一个大问题。毫无疑问，您将需要特殊情况的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:34:51.597

`Activator.CreateInstance(type, ParseKeys(ID).ToArray())`我在我的代码中使用 a ，其中`ID`是`||`键/值对的单独列表，并且`ParseKeys()`是

```
 private static IEnumerable<object> ParseKeys(string keyString)
    {
        IEnumerable<string> keyStrings = keyString.Split(new string[] { "||" }, StringSplitOptions.RemoveEmptyEntries); // Use this construction to enable splitting on multiple characters
        List<object> keys = new List<object>();
        foreach (var key in keyStrings)
        {
            var type = Type.GetType(key.Split("|")[0]);
            var value = key.Split("|")[1];
            var data = Convert.ChangeType(value, type);
            keys.Add(data);
        }
        return keys;
    } 
```

显然，您需要能够以某种形式将参数表示为字符串，而且我还没有针对无参数构造函数对其进行测试，但它对整数和字符串都适用。

# c# - 在 Mono for Android 中使用 strings.xml

> ID：12627769
> 
> 赞同：0
> 
> 时间：2012-09-27T18:22:17.263
> 
> 标签：c#, android, xamarin.android

我正在使用带有 Microsoft VS2010 C# 的 android SDK。我想在我的 C# 代码中使用我的 /resources/values/strings 文件中的字符串值。这是一段代码，说明了我想要做什么。我没有得到字符串值。我知道资源 id 是一个 int，但我需要的是该 id 后面的实际字符串值。

```
 void vx2OkButton_Click(object sender, EventArgs e)
    {
        Log.Info(LOG_TAG, "Hello from OkButton|Enter()button");  // also used as Enter button
        strVx20kButtonText = vx2OkButton.Text.ToString();
        mDwnLdCodeEnteredByUser = vxxDwnldCodeEntered.Text.Trim();
        string strDwnldCodeOut = mActCode.Bad.ToString();

        if(strVx20kButtonText == Resource.String.Enter.ToString())
        {
            if (mDwnLdCodeEnteredByUser.Length < 1)
            {
                vxxSystemMsgBox.SetText(Resource.String.FieldRequried_);
                m_txvEnterDwnLdCode.SetTextAppearance(this,Resource.Color.Red);
                return;
            }
            // verify the dwnldcodeenter by the user matches the assigned to user when at the time the downloaded the app 

            mDwnLoadStatus = VerifyDwnLoadCode(mDwnLdCodeEnteredByUser);

            if (mDwnLoadStatus == mDwnLdStatCode.BadDwnLdCode.ToString())
            {
                vxxSystemMsgBox.SetText(Resource.String.InvalidValueEntered);
                m_txvEnterDwnLdCode.SetTextAppearance(this, Resource.Color.Red);
                return;
            }

            mActionCD = mActCode.Ok.ToString();
            vx2OkButton.SetText(Resource.String.OkButtonText);
            vxxSystemMsgBox.SetText(Resource.String.ThanksPressOkButton);
            m_txvEnterDwnLdCode.SetTextAppearance(this,Resource.Color.White);
            return;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T20:04:44.733

正如您所注意到的，Resource.String.Enter 是为您生成的整数，您可以使用它来访问字符串资源。您可以使用以下[`Android.Content.Res.Resources.GetString()`](http://docs.mono-android.net/?link=M:Android.Content.Res.Resources.GetString%28int%29#)方法访问它：

```
string enter = Resources.GetString(Resource.String.Enter); 
```

# iphone - 无法通过提交支持 iPhone 5 的应用程序的验证阶段

> ID：12627771
> 
> 赞同：8
> 
> 时间：2012-09-27T18:22:24.363
> 
> 标签：iphone, ios, xcode, ios6

这是一个旧应用程序，已多次提交，没有问题。我已经修改了代码和 info.plist 以支持 iOS 6 和 iPhone 5，但根本没有更改构建设置。我检查了证书和配置文件，它们都是正确的。所有临时构建都在我们的设备上运行良好。我正在使用 Xcode 4.5。

我构建没有错误，它存档就好了。它显示在管理器中。当我单击验证...时，我像往常一样单击，选择正确的配置文件，但每次都失败，并出现相同的三个错误：

1.  无法运行 lipo 命令 /Applications/Xcode.app...：无法打开输入文件：...（没有这样的文件或目录）
2.  应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。
3.  被分析的二进制文件必须存在： ...

我已经尝试了以下问题的答案：[被分析的二进制文件必须存在，xcode 中的 iOS App Archive](https://stackoverflow.com/questions/11287713/binary-being-analyzed-must-exist-ios-app-archive-in-xcode)和我的应用程序签出。

我怀疑问题是我已将 armv6、armv7 和 armv7s 作为有效架构包含在内，但我真的不知道问题出在哪里，因为这一切都在 Xcode 4.4 中有效。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T18:28:56.173

您不能使用 Xcode 4.5 构建 armv6 二进制文件，Apple 已放弃对 armv6 的支持。

看起来你的错误在它到达第一个错误之后非常复杂，所以如果你修复它以便它为 armv7 和 armv7s 构建，那么它应该修复其余的错误（因为如果脚本很好，它将生成一个有效的二进制文件其他所有内容并能够进行分析）

# ios - Cordova/PhoneGap iOS HTTPS/SSL 问题

> ID：12627774
> 
> 赞同：7
> 
> 时间：2012-09-27T18:22:40.183
> 
> 标签：ios, cordova, ssl

我们目前正在使用 Cordova/PhoneGap（最新版本）为 Android 和 iOS 开发一个移动应用程序。我们应用程序的关键方面之一是它从不同的远程源（其中一个具有无效的 SSL 证书）检索数据。在确保正确设置了所有 .plist 设置（对于域白名单）之后，我们的应用程序在 iOS 5 和 6 下都无法运行。XCode 或 Safari 的控制台中没有显示错误——它只是死了。Android 应用程序运行良好，也可以在 Web 浏览器中本地运行。所以，几个问题：

是否有用于忽略 iOS 中无效 SSL 证书的 .plist 设置？我在 UIWebView 中看到了一些执行此操作的代码，但我们不确定是否应该修改该代码并冒着在其他地方破坏应用程序的风险。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T23:12:56.787

** 2014 年 3 月 13 日**编辑****

推荐的方法是在您的设备中安装您的 CA：通过电子邮件将您的 CA 发送到您的设备，点击电子邮件中的 CA 文件，然后将其导入您的安全存储区域。这将允许您的设备信任未签名的 https 连接，而无需下面显示的代码行。

请注意，虽然下面的解决方案可行，但它不安全且不推荐。在发布应用程序的生产版本之前，您必须删除这些代码行。否则将导致应用程序不安全。不建议使用此解决方案，因为人们可能忘记删除它。

****原始答案****

没有为此设置cordova plist。要在 iOS 中解决此问题，请将下面看到的代码附加到 AppDelegate.m 文件的末尾。

```
@implementation NSURLRequest(DataController)
+ (BOOL)allowsAnyHTTPSCertificateForHost:(NSString *)host
{
    return YES;
}
@end 
```

我过去在几个项目中使用过它，没有看到任何不良副作用。

AppDelegate.m 文件可以在 Xcode 项目中标题为 Classes 的黄色文件夹中找到。

# macos - 处理数组中带有空格的文件和目录列表

> ID：12627776
> 
> 赞同：0
> 
> 时间：2012-09-27T18:22:44.970
> 
> 标签：macos, bash

如何最好地处理数组中混合的文件和目录。我需要创建一个文件和文件夹数组，并循环遍历数组，并将数组中的每个项目置于带有 -rf 选项的 rm 命令中：

```
#Build array of files to be deleted

FILES=(
"~/Library/Preferences/Adobe InDesign"
"~/Library/Caches/Adobe InDesign"
"~/Library/Saved Application State/com.adobe.InDesign.savedstate"
)

#Loop through array deleting each file/directory with the recursive force options

    for i in "${FILES[@]}"

      do

        rm -rf "$i"

      done

    exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:35:54.417

问题不在于数组或空格，而`~`在于文件路径。`~`不是路径的真正有效部分，但 shell 会将其替换为您的主目录的路径......除非它在引号中：

```
$ echo ~/Library/Preferences/Adobe InDesign
/Users/gordon/Library/Preferences/Adobe InDesign
$ echo "~/Library/Preferences/Adobe InDesign"
~/Library/Preferences/Adobe InDesign 
```

所以你可以把`~`引号放在外面：

```
FILES=(
~/"Library/Preferences/Adobe InDesign"
~/"Library/Caches/Adobe InDesign"
~/"Library/Saved Application State/com.adobe.InDesign.savedstate"
) 
```

或使用 $HOME （它确实被双引号替换）：

```
FILES=(
"$HOME/Library/Preferences/Adobe InDesign"
"$HOME/Library/Caches/Adobe InDesign"
"$HOME/Library/Saved Application State/com.adobe.InDesign.savedstate"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:11:59.763

我有时会使用这个技巧：

```
with_expanded_paths()
{
  typeset IFS
  IFS=""
  "$@"
}
with_expanded_paths rm -rf "~/file with spaces" 
```

我是凭记忆写的，所以可能需要稍作调整。

# clojure - with-meta vs ^{} - Clojure

> ID：12627779
> 
> 赞同：6
> 
> 时间：2012-09-27T18:23:05.907
> 
> 标签：clojure, metadata

我对 using`with-meta`和`^`reader 宏之间的区别感到困惑。

`baz` `symbol`也使用阅读器宏附加元数据

```
user=> (def ^{:foo "bar"} baz {:my "value"})
#'user/baz 
```

拉出

```
user=> (meta #'baz)
{:foo "bar", :ns #<Namespace user>, :name baz, :line 1, :file "NO_SOURCE_PATH"} 
```

附加使用`with-meta`

```
user=> (def (with-meta 'baz2 {:foo "bar"}) {:my "value"})
CompilerException java.lang.RuntimeException: First argument to def must be a Symbol, compiling:(NO_SOURCE_PATH:1) 
```

然而 ...

```
user=> (class (with-meta 'baz2 {:foo "bar"}))
clojure.lang.Symbol 
```

我可以把它附加到价值上

```
user=> (def baz2 (with-meta {:my "value"} {:foo "bar"})
#'user/baz2 
```

但不一样

```
user=> (meta baz2)
{:foo "bar"}

user=> (meta #'baz2)
{:ns #<Namespace user>, :name baz2, :line 1, :file "NO_SOURCE_PATH"} 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:56:37.497

`def`是一种[特殊形式](http://clojure.org/special_forms)。即使`with-meta`返回一个符号，Clojure 编译器也不（不能）知道这一点。它看到了一个功能。

```
user=> (def (symbol blah) "blah")
CompilerException java.lang.RuntimeException: First argument to def must be a Symbol, compiling:(NO_SOURCE_PATH:1) 
```

# ios - 如何将用户输入与 csv 文件中的列数据进行比较？

> ID：12627781
> 
> 赞同：0
> 
> 时间：2012-09-27T18:23:08.917
> 
> 标签：ios, xcode, csv

我使用以下代码，但它只检查第一行的第一列。但我想检查 csv 文件中所有行的第一列。请帮忙

```
- (void) SearchStudent 

{ 
    NSArray *DocumentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //I upload the csv file to documents folder of the app through itunes
    NSString *DocumentDirectory = [DocumentPath objectAtIndex:0]; 
    NSString *FullPath = [DocumentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"example.csv"]]; 
    NSString * pstrCSVFile= [NSString stringWithContentsOfFile:FullPath encoding:NSASCIIStringEncoding error:NULL]; 
    NSArray * paRowsOfCSVFile= [pstrCSVFile componentsSeparatedByString:@"\n"]; 
    NSArray *paColumnsOfRow; 

    NSString *pstrFirstColumn;    
    for(NSString * pstrRow in paRowsOfCSVFile)  
    {  
        paColumnsOfRow= [pstrRow componentsSeparatedByString:@","];  
        pstrFirstColumn= [paColumnsOfRow objectAtIndex:0]; 
        if([pstrFirstColumn localizedCaseInsensitiveCompare:GWIDText.text] == NSOrderedSame) 
        { 
            UIAlertView *alertingFileName = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];  
            [alertingFileName show]; 
            break; 
        } 
        else 
        { 
            UIAlertView *alertingFileName1 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Not Found" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil]; 
            [alertingFileName1 show]; 
        } 
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:16:18.643

`paColumnsOfRow`包含所有行。

# c++ - C++ 中的简单继承

> ID：12627782
> 
> 赞同：1
> 
> 时间：2012-09-27T18:23:12.723
> 
> 标签：c++, inheritance

在给定的程序中，B 类继承了 A 类，并且在 B 类的 main() 对象中创建并调用了 getdata() 函数，为什么要调用 B 类的 getdata()？

```
class A {public: void getdata() { cout<<"Class A"; } };

class B: public A { public: void getdata() { cout<<"Class B"; } };

void main() { B b1; b1.getdata(); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:25:35.107

> 为什么调用 B 类的 getdata()？

因为`b1`是类型的对象`B`。

非`virtual`成员函数根据调用它们的变量的*静态类型来解析。*

在您给出的情况下，调用的变量`getdata()`是`b1`，它的类型是`B`。因此，`B::getdata()`被调用。

在您提供的链接中，http://www.tutorialspoint.com/cplusplus/cpp_polymorphism.htm[是](http://www.tutorialspoint.com/cplusplus/cpp_polymorphism.htm)`area`通过 type 的指针调用的`Shape*`，因此`Shape::area()`会被调用。

也考虑这个程序：http: [//ideone.com/KVjN3](http://ideone.com/KVjN3)

```
#include <iostream>

class A {public: void getdata() { std::cout<<"Class A\n"; } };

class B: public A { public: void getdata() { std::cout<<"Class B\n"; } };

int main() { B b1; b1.getdata(); A* pa = &b1; pa->getdata(); } 
```

输出：

```
Class B
Class A 
```

它与您的程序非常相似。的第一次调用`getdata()`是通过 a `B`，因此`B::getdata()`被调用。第二个是通过一个`A*`，因此`A::getdata()`被调用。

但是，如果您提供`virtual`关键字，所有这些都会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:25:53.883

因为`b1`被静态声明为类型的变量`B`。

请注意，在这种情况下，由于上面写的原因，不是虚拟的事实`getdata()`是不相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:25:45.703

C++ 对象本质上不是多态的（与 Java 不同）。
您必须使用“虚拟”键声明函数才能实现多态性

# c++ - 如何监控总 RAM 使用情况

> ID：12627783
> 
> 赞同：1
> 
> 时间：2012-09-27T18:23:32.443
> 
> 标签：c++, windows, ram

您将如何获得总 RAM 使用量的值？它用于 RAM 使用的 GL 图形表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:30:12.937

您可以使用 wmi 来查询系统性能，如此处所示

[如何使用 WMI 了解进程的 CPU 和内存使用情况？](https://stackoverflow.com/questions/1476018/how-to-know-the-cpu-and-memory-usage-of-a-process-with-wmi)

这是在一般情况下监视 Windows 性能的推荐/标准方法。

# c++ - ID3DXBaseMesh::CloneMeshFVF 返回 D3DERR_INVALIDCALL

> ID：12627785
> 
> 赞同：1
> 
> 时间：2012-09-27T18:23:34.767
> 
> 标签：c++, directx-9

我正在尝试从 directx 9 中的 .x 文件加载网格并将其克隆为另一种 FVF 格式以获取我想要的顶点。

```
LPD3DXMESH pMesh;
DWORD numMaterials;
LPD3DXBUFFER pMaterialBuffer;
HRESULT hr = D3DXLoadMeshFromX( file, D3DXMESH_SYSTEMMEM, pDevice, NULL, &pMaterialBuffer, NULL, &numMaterials, &pMesh ); // Loads just fine, I can even render it

LPD3DXMESH clone;
pMesh ->CloneMeshFVF(D3DXMESH_SYSTEMMEM, D3DFVF_XYZ, pDevice, &clone); // Trying to get only the xyz data out 
```

在克隆阶段，我收到 D3DERR_INVALIDCALL 错误。但是，我认为我的任何论点都没有任何问题。

我想要实现的是最终从我想要的缓冲区中获取所有顶点数据，而不依赖于我正在加载的 .x 文件的类型。

```
typedef struct VERTEX_TYPE 
{
    float position[3];
} VERTEX;

void* pTemp;
VERTEX* pVertexData;

DWORD nNumVerts = mesh->GetNumVertices();
DWORD nSizeVerts = mesh->GetNumBytesPerVertex();
DWORD nNumFaces = mesh->GetNumFaces();

pVertexData = new VERTEX[nNumFaces * 3];
mesh->LockVertexBuffer(D3DLOCK_READONLY, &pTemp);
memcpy(pVertexData, pTemp, sizeof(VERTEX)*nNumVerts);
mesh->UnlockVertexBuffer(); 
```

关于我哪里出错的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:42:00.147

我想到了。问题是我正在创建一个 directX9 EX 设备。我不确定为什么与 EX 相比它需要常规设备，但这解决了我的错误，并且一切正常。

# c# - LINQtoSQL Not Allowing DateTime Conversion to String

> ID：12627798
> 
> 赞同：0
> 
> 时间：2012-09-27T18:24:20.430
> 
> 标签：c#, linq-to-sql, datetime

I have found a few threads that have dealt with this issue. Though, they are not in a context that is usefull for me. Pretty much, I am trying to convert a DateTime to string, for rendering it into a MVCContrib Grid. Here is how things look inside of my model:

```
public IQueryable<FindStudentViewModel> GetStudentsProjected()
    {
        var projectedStudents= from p in FindAllStudents()
                                select new FindStudentViewModel
                                {
                                    StudentID = p.StudentID,
                                    FirstName = p.FirstName,
                                    LastName = p.LastName,
                                    EmailAddress = p.EmailAddress,
                                    CurrentCollege = p.CurrentCollege,
                                    IAUTerm = p.IAUTerm,
                                    IAUProgram = p.IAUProgram,
                                    InquirySource = p.InquirySource,
                                    InquiryDate = (string)p.InquiryDate.ToString(),
                                    Status = p.Status

                                };

        return projectedStudents;
    } 
```

And of course, LINQ does not like this one bit. Pretty much, I need to be able to convert the InquiryDate into a string, and then order the results by InquiryDate. Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:35:37.977

Ordering on a *string* representation of a DateTime might not be a very good plan. Consider the following dates:

```
5/4/2007
9/12/2011
6/4/1904 
```

If you order them when they are `DateTime` type, you'll get:

```
6/4/1904
5/4/2007
9/12/2012 
```

If you use `.ToString()` on them, then order on it, you'll get:

```
5/4/2007
6/4/1904
9/12/2011 
```

Code to test with:

```
var dates = new DateTime[] { new DateTime(2012, 9, 12), new DateTime(1904, 6, 4), new DateTime(2007, 5, 4) };
foreach (var item in dates.OrderBy(d => d))
{
    Console.WriteLine(item);
}

Console.WriteLine();
var temp = dates.Select(d => d.ToString());
foreach (var item in temp.OrderBy(d => d))
{
    Console.WriteLine(item);
} 
```

# php - 通过 shopify API 完成订单

> ID：12627800
> 
> 赞同：0
> 
> 时间：2012-09-27T18:24:34.270
> 
> 标签：php, api, shopify, fulfillment

我在shopify上有一个测试店。创建订单后，我想通过 PHP API 调用将其履行状态更新为“已履行”。

到目前为止，文档中没有提及更新订单中行项目的履行状态。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:14:30.620

是的。API 实现是可能的： http: [//api.shopify.com/fulfillment.html](http://api.shopify.com/fulfillment.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T19:47:08.647

这就是我现在的工作方式

```
$data = array( "fulfillment" => array("tracking_number" => "1111111111"));

$data_string = json_encode($data);                                                                                   

$ch = curl_init('https://API:PASS@STORE.myshopify.com/admin/orders/ORDER_ID/fulfillments.json');
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($ch);
print_r($result); 
```

# html - 仅当嵌入 HTML 时，无法使用谷歌浏览器从 Flash 电影中加载 youtube 视频

> ID：12627802
> 
> 赞同：1
> 
> 时间：2012-09-27T18:24:37.950
> 
> 标签：html, flash, youtube, actionscript-2

好的，所以这是非常具体的，我不知道如何进行。

我有一个将 youtube 剪辑加载到其中的 flash 电影。这适用于以下情况：

--> 在任何浏览器中，它无论如何都可以工作，除非它是 chrome。

--> 在 chrome 中，如果您直接查看 swf 文件，它会加载。

然而..

--> 如果 .swf 是通过标签（显然是任何类型的）嵌入的，它将不会加载 youtube 剪辑。

新鲜出炉：

```
<div id="flashContent">
    <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="922" height="441" id="map" align="middle">
            <param name="movie" value="map.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#ffffff" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="showall" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="" />
            <param name="allowScriptAccess" value="always" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="map.swf" width="922" height="441">
                <param name="movie" value="map.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="always" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>
    </div> 
```

这是我用来加载东西的两种方法：

```
//_root.ldr.loadClip(yurl,scrn);
scrn.loadMovie(yurl); 
```

我们自然是：

```
System.security.allowDomain("http://www.youtube.com");
System.security.allowDomain("http://s.ytimg.com");
System.security.loadPolicyFile("http://www.youtube.com/crossdomain.xml");
stop(); 
```

我在这里完全不知所措，因为它在所有其他情况下都非常有效，浏览器等等......除了这个案例。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:30:47.997

如果您还没有使用它，请确保您正在嵌入

`http://youtube.googleapis.com/v/QqXaYoU4piE`

不是

`http://www.youtube.com/watch?v=QqXaYoU4piE&feature=g-all-u`

也可以添加

`youtube.googleapis.com`

到您的安全并从该域加载策略文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:28:41.337

调用中的文件不应该`loadPolicyFile()`从闪存文件所在的域加载吗？否则可能会导致 flash 忽略策略文件？

src：[http](http://www.adobe.com/devnet/flashplayer/articles/fplayer9_security.html) ://www.adobe.com/devnet/flashplayer/articles/fplayer9_security.html域内重定向

# php - PHP 缩略图脚本的排序结果

> ID：12627805
> 
> 赞同：0
> 
> 时间：2012-09-27T18:24:54.220
> 
> 标签：php, date, sorting, thumbnails, creation

我在网上找到了以下 PHP 脚本，它正在获取图像目录并创建缩略图。这部分效果很好，希望我注意到排序已关闭。我能说的最好的是它正在使用文件名，我想使用创建日期，因为我正在对从安全摄像头创建的图像目录进行排序。

任何输入和一点（好的，很多）方向都会很棒，因为我没有很多 PHP 经验，但可以绕过一些。

再次感谢您的帮助！

```
<html><head><title>Snapshots</title></head>
<body bgcolor='white'>

<?php
$folder = '.';
$dir = getcwd();
DirStat($folder, 0);
chdir($dir);
$FolderSize = ByteSize($FolderSize);
$FileCount=$FileCount-2;
?>

<h2 align=center><?php echo date('m/d/Y H:i:s') ." - $FileCount Snapshots - $FolderSize";?></h4>

<?php

$imagens='';
$dn = opendir('.');
while (false !== ($file = readdir($dn))) {
 if ($file == '.' || $file =='..' || $file =='index.php' || $file =='Thumbs.db'){
        //print "<a href=$file>$file</a><br>";
 }else{
        if (is_dir($file)){
                print "<img src='/imagens/diretorio.png'>&nbsp;<a href='$file?dir=dirname(__FILE__)'>$file</a><br>";
        }else{
                $tamanho = filesize($file);
                $m = 'bytes'; // Mï¿½ltiplo
                if ($tamanho>1024) {
                        $tamanho=round($tamanho/1024,2);
                        $m = 'KB';
                } elseif($tamanho > 1024*1024){
                        $tamanho = round(($tamanho/1024)/1024,2);
                        $m = 'MB';
                }

                $imagens .=OutputThumbnail($file, $tamanho, $m);
        }
 }
}

closedir($dn);

print '<br>'.$imagens;

function OutputThumbnail($image_file, $tamanho, $m)
{
        if (file_exists($image_file))
        {
                $size = GetImageSize($image_file);

                if ($size[0] <=64) {
                        $larg=$size[0];
                }elseif ($size[0] > 64 && $size[0] <= 200) {
                        $larg=64;
                }elseif ($size[0] > 201 && $size[0] < 400) {
                        $larg=128;
                }elseif ($size[0] > 401) {
                        $larg=256;
                }

                if ($size[0] == 0) $size[0]=1;

                $alt= ($larg * $size[1])/$size[0];

                return "<a href=$image_file><img width=$larg height=$alt        src=$image_file border=0
                        TITLE='$image_file - $larg x $alt - $tamanho $m'></a>&nbsp;&nbsp;";
        }
}

?>

<?php
function DirStat($directory) {
        global $FolderCount, $FileCount, $FolderSize;

        chdir($directory);
        $directory = getcwd();
        if($open = opendir($directory)) {
                while($file = readdir($open)) {
                        if($file == '..' || $file == '.') continue;
                                if(is_file($file)) {
                                        $FileCount++;
                                        $FolderSize += filesize($file);
                                } elseif(is_dir($file)) {
                                        $FolderCount++;
                                }
                }
                if($FolderCount > 0) {
                        $open2 = opendir($directory);
                        while($folders = readdir($open2)) {
                                $folder = $directory.'/'.$folders;
                                if($folders == '..' || $folders == '.') continue;
                                        if(is_dir($folder)) {
                                                DirStat($folder);
                                        }
                                }
                                closedir($open2);
                        }
                        closedir($open);
                }
}

function ByteSize($bytes) {
        $size = $bytes / 1024;
        if($size < 1024){
                $size = number_format($size, 2);
                $size .= 'KB';
        } else {
                if($size / 1024 < 1024) {
                        $size = number_format($size / 1024, 2);
                        $size .= 'MB';
                } elseif($size / 1024 / 1024 < 1024) {
                        $size = number_format($size / 1024 / 1024, 2);
                        $size .= 'GB';
                } else {
                        $size = number_format($size / 1024 / 1024 / 1024,2);
                        $size .= 'TB';
                }
        }
        return $size;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:34:00.580

我添加了一种非常肮脏的排序方式（效率不高）。在代码中将下面的行更改为 SORT_DESC 或 SORT_ASC 以降序或升序排序。

```
arraySortByColumn($exifData, 'time', SORT_DESC); 
```

您的脚本添加了排序功能：

```
<html><head><title>Snapshots</title></head>
<body bgcolor='white'>

<?php
$folder = '.';
$dir = getcwd();
DirStat($folder, 0);
chdir($dir);
$FolderSize = ByteSize($FolderSize);
$FileCount=$FileCount-2;
?>

<h2 align=center><?php echo date('m/d/Y H:i:s') ." - $FileCount Snapshots - $FolderSize";?></h4>

<?php

$imagens='';
$exifData = array();
$dn = opendir('.');
while (false !== ($file = readdir($dn))) {
 if ($file == '.' || $file =='..' || $file =='index.php' || $file =='Thumbs.db'){
        //print "<a href=$file>$file</a><br>";
 }else{
        if (is_dir($file)){
                print "<img src='/imagens/diretorio.png'>&nbsp;<a href='$file?dir=dirname(__FILE__)'>$file</a><br>";
        }else{
                $tamanho = filesize($file);
                $datetime = @exif_read_data($file);
                $m = 'bytes'; //
                if ($tamanho>1024) {
                        $tamanho=round($tamanho/1024,2);
                        $m = 'KB';
                } elseif($tamanho > 1024*1024){
                        $tamanho = round(($tamanho/1024)/1024,2);
                        $m = 'MB';
                }
                $exifData[] = array('time' => $datetime['FileDateTime'], 'file' => $file, 'tamanho' => $tamanho,  'm' => $m );

        }
 }
}

closedir($dn);
//change to SORT_DESC or SORT_ASC
arraySortByColumn($exifData, 'time', SORT_DESC);

foreach ($exifData as $value) {
     $imagens .= OutputThumbnail($value['file'], $value['tamanho'], $value['m']);
}

print '<br>'.$imagens;

function arraySortByColumn(&$arr, $col, $dir = SORT_DESC) {
        $sort_col = array();
        foreach ($arr as $key => $row) {
            $sort_col[$key] = $row[$col];
        }
        array_multisort($sort_col, $dir, $arr);
    }

function OutputThumbnail($image_file, $tamanho, $m)
{
        if (file_exists($image_file))
        {
                $size = GetImageSize($image_file);

                if ($size[0] <=64) {
                        $larg=$size[0];
                }elseif ($size[0] > 64 && $size[0] <= 200) {
                        $larg=64;
                }elseif ($size[0] > 201 && $size[0] < 400) {
                        $larg=128;
                }elseif ($size[0] > 401) {
                        $larg=256;
                }

                if ($size[0] == 0) $size[0]=1;

                $alt= ($larg * $size[1])/$size[0];

                return "<a href=$image_file><img width=$larg height=$alt        src=$image_file border=0
                        TITLE='$image_file - $larg x $alt - $tamanho $m'></a>&nbsp;&nbsp;";
        }
}

?>

<?php
function DirStat($directory) {
        global $FolderCount, $FileCount, $FolderSize;

        chdir($directory);
        $directory = getcwd();
        if($open = opendir($directory)) {
                while($file = readdir($open)) {
                        if($file == '..' || $file == '.') continue;
                                if(is_file($file)) {
                                        $FileCount++;
                                        $FolderSize += filesize($file);
                                } elseif(is_dir($file)) {
                                        $FolderCount++;
                                }
                }
                if($FolderCount > 0) {
                        $open2 = opendir($directory);
                        while($folders = readdir($open2)) {
                                $folder = $directory.'/'.$folders;
                                if($folders == '..' || $folders == '.') continue;
                                        if(is_dir($folder)) {
                                                DirStat($folder);
                                        }
                                }
                                closedir($open2);
                        }
                        closedir($open);
                }
}

function ByteSize($bytes) {
        $size = $bytes / 1024;
        if($size < 1024){
                $size = number_format($size, 2);
                $size .= 'KB';
        } else {
                if($size / 1024 < 1024) {
                        $size = number_format($size / 1024, 2);
                        $size .= 'MB';
                } elseif($size / 1024 / 1024 < 1024) {
                        $size = number_format($size / 1024 / 1024, 2);
                        $size .= 'GB';
                } else {
                        $size = number_format($size / 1024 / 1024 / 1024,2);
                        $size .= 'TB';
                }
        }
        return $size;
}

?> 
```

# arduino - Arduino WiFly - 自组织网络设置

> ID：12627808
> 
> 赞同：5
> 
> 时间：2012-09-27T18:25:07.890
> 
> 标签：arduino

我目前正在与 Arduino 合作，试图构建一个设备可以连接到该网络并向其发送 Web 请求的自组织网络。我目前遇到的问题是我只能建立一个连接，然后当该连接终止时（使用`client.stop()`），服务器不会接收所有后续连接，即使[cURL](http://en.wikipedia.org/wiki/CURL)命令也只是在那里旋转。当我重置服务器时我开始的第一个连接工作正常，我能够与服务器交谈；但在那之后，Arduino 无法再找到新客户（即使它正在尝试使用给定的库）。

[我正在使用 SparkFun 库，用于从 GitHub 克隆](https://github.com/sparkfun/WiFly-Shield.git)的 WiFly 防护罩，以及[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)。

我当前的代码基于他们的默认示例“WiFly_AdHoc_Example”，但我必须删除一些东西才能让网络启动，这可能是导致此问题的原因。

这是我正在运行的[.ino文件。](http://www.fileinfo.com/extension/ino)

```
#include <SPI.h>
#include <WiFly.h>
//#include <SoftwareSerial.h>

//SoftwareSerial mySerial( 5, 4); //Part from example not used (see below)

WiFlyServer server(80); //Use telnet port instead, if debugging with telnet

void setup() 
{
    Serial.begin(9600);

    //The code below is from the example, but when I run it the WiFly will hang
    // on Wifly.begin(). Without it, the WiFly starts up fine.
    //mySerial.begin(9600);
    //WiFly.setUart(&mySerial); // Tell the WiFly library that we are not 
                                // using the SPIUart

    Serial.println("**************Starting WiFly**************");
    // Enable Adhoc mod
    WiFly.begin(true);
    Serial.println("WiFly started, creating network.");

    if (!WiFly.createAdHocNetwork("wifly")) 
    {
        Serial.print("Failed to create ad hoc network.");
        while (1) 
        {
            // Hang on failure.
        }
    }
    Serial.println("Network created");
    Serial.print("IP: ");
    Serial.println(WiFly.ip());

    Serial.println("Starting Server...");
    server.begin();
    Serial.print("Server started, waiting for client.");
}

void loop() 
{
    delay(200);
    WiFlyClient client = server.available();
    if (client) 
    {
        Serial.println("Client Found.");

        // A string to store received commands
        String current_command = "";

        while (client.connected()) 
        {
            if (client.available()) 
            {
                //Gets a character from the sent request.
                char c = client.read();
                if (c=='#' || c=='\n') //End of extraneous output
                {
                    current_command = "";
                }
                else if(c!= '\n')
                {
                    current_command+=c;
                }

                if (current_command== "get") 
                {
                    // output the value of each analog input pin
                    for (int i = 0; i < 6; i++) 
                    {
                        client.print("analog input ");
                        client.print(i);
                        client.print(" is ");
                        client.print(analogRead(i));
                        client.println("<br />");
                    }     
                }
                else if(current_command== "hello")
                {
                    client.println("Hello there, I'm still here.");
                }
                else if (current_command== "quit")
                {
                    client.println("Goodbye...");
                    client.stop();
                    current_command == "";
                    break;
                }
                else if (current_command == "*OPEN*")
                {
                    current_command == "";
                }
            }
        }
        // Give the web browser time to receive the data
        delay(200);
        // close the connection
        client.stop();
    }
} 
```

这个脚本只是我设置用来测试的一个迷你协议。与 wifly 模块连接后，您可以发送诸如“get”、“hello”或“quit”之类的文本，wifly 模块应该会回复。

使用[Telnet](http://en.wikipedia.org/wiki/Telnet)我可以成功连接（第一次）并向[Arduino](http://arduino.cc/en/Main/ArduinoBoardUno)发送命令，包括“退出”以终止连接（调用`client.stop()`方法）。但是当我尝试通过[Telnet](http://en.wikipedia.org/wiki/Telnet)重新连接时，它说连接成功，但在[Arduino](http://arduino.cc/en/Main/ArduinoBoardUno)上它仍然循环认为客户端仍然是错误的。什么？？

我知道，我从[Telnet](http://en.wikipedia.org/wiki/Telnet) vs [Arduino](http://arduino.cc/en/Main/ArduinoBoardUno)收到了混杂的信息。由于[Ardunio](http://arduino.cc/en/Main/ArduinoBoardUno)仍在循环等待评估为 true 的客户端，因此这些命令都没有明显工作。我[将从我导入的库中查看 WiFlyServer，](https://github.com/sparkfun/WiFly-Shield/blob/master/WiFlyServer.cpp)看看我是否可以挖掘问题，因为不知何故**server.available() 方法没有找到新客户端**。

我注意到库代码中有很多 TODO ......

* * *

所以我找到了问题的原因。它在[SparkFun 库](https://github.com/sparkfun/WiFly-Shield.git)[`WiFlyServer.cpp`](https://github.com/sparkfun/WiFly-Shield/blob/master/WiFlyServer.cpp)的文件中。导致重新连接问题的代码实际上是方法。在方法的顶部，有一个检查：`server.availible()`

```
// TODO: Ensure no active non-server client connection.

if (!WiFly.serverConnectionActive) {
    activeClient._port = 0;
} 
```

出于某种原因**，当我对此发表评论时，我可以完美地连接和重新连接，并且一切正常**。我现在将深入图书馆，看看我是否可以解决这个问题，我不确定这是在做什么，但是当服务器连接不活动并且以某种方式阻止后续连接时，它会被调用。这个解决方案的问题是，[Arduino](http://arduino.cc/en/Main/ArduinoBoardUno)总是认为它已经找到了一个客户，`client`并且`client.connected()`即使一个客户不存在，它也会评估为 true。当连接终止并找到幽灵“客户端”时，甚至`client.available()`评估为真，但在第一次运行 if 语句之后，幽灵“客户端”不再存在`available()`. 即使有这个缺陷，当它出现时它仍然会吸引一个新客户，这就是它起作用的原因。

*   如果不使用这个评论技巧，我怎样才能找到这个问题的根源？

*   他们这样做有什么风险或未来的问题吗？

*   我首先注释掉的块的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:38:51.860

好吧，当您打电话时`client.stop();`，Arduino 如何知道客户端是否必须重新开始？

记住`setup()`只执行一次。

您是否尝试在循环中包含以下代码来告诉 Arduino 再次创建 WiFly AdHoc 网络？这可能会也可能不会。我自己没有，也没有玩过 Wifly 盾牌，但值得一试。

请记住，每次需要再次连接时只执行一次代码，因为它位于始终运行的循环中。

```
WiFly.begin(true);
Serial.println("WiFly started, creating network.");

if (!WiFly.createAdHocNetwork("wifly")) 
{
    Serial.print("Failed to create ad hoc network.");
    while (1) 
    {
        // Hang on failure.
    }
} 
```

# android - Appcelerator 等效于 Java 的 'setScrollbarFadingEnabled(false)'

> ID：12627809
> 
> 赞同：0
> 
> 时间：2012-09-27T18:25:08.557
> 
> 标签：android, titanium, scrollview, appcelerator

尝试始终为滚动视图显示滚动指示器。

原生 Android 有一个方法 scrollView.setScrollbarFadingEnabled(false)'

在 Appcelerator 中找不到如何执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T10:12:14.257

目前，我认为您不能轻松地在滚动视图中始终显示滚动条，因为我相信您知道，Titanium 会`showVerticalScrollIndicator: true`随着时间的推移隐藏滚动条。

最好的解决方案是创建一个可以按需要工作的自定义滚动条。

做这个：

```
var scrollView = Ti.UI.createScrollView({
    top: 0,
    bottom: 0,
    left: 0,
    right: 0
});
window.add(scrollView);

var changingTop = 0;

var scrollBar = Ti.UI.createView({
    top: changingTop,
    height: 120,
    right: 6,
    width: 6, 
    backgroundColor: '#000',
});
window.add(scrollBar);

scrollView.addEventListener('scroll', function(e){
    scrollBar.setTop(changingTop + e.y);
}); 
```

刚刚测试了这个解决方案，它对我有用。如有任何问题请回复。干杯!

# android - 我如何知道加载的 URL 在 Android 中具有 POST 方法类型？

> ID：12627810
> 
> 赞同：1
> 
> 时间：2012-09-27T18:25:15.763
> 
> 标签：android, webview

我在 Android 应用程序中有一个 webview 并加载我的 web 应用程序。我正在使用 ShouldOverrideURL 方法收听页面导航并进行一些操作。当 URL 方法类型为 GET 或 POST 时，我想做特定的操作。我不能在这里使用 PostURL 方法，因为我只加载一个主页 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:13:54.370

看起来 shouldOverrideUrl 仅在 GET 请求期间被调用：[Android - how to intercept a form POST in android WebViewClient on API level 4](https://stackoverflow.com/questions/3664440/android-how-to-intercept-a-form-post-in-android-webviewclient-on-api-level-4)

如果要在特定 URL 的 POST 操作期间执行特定操作，则需要扩展 WebView 并覆盖`WebView#postUrl(String url, byte[] postData)`。

# java - 策展人：提交事务

> ID：12627812
> 
> 赞同：3
> 
> 时间：2012-09-27T18:25:32.990
> 
> 标签：java, apache-curator

Apache Curator 的 CuratorFramework 类的实例允许运行变异操作`inTransaction()`。我目前正在使用这些调用，但不知道如何提交它们。

查看[CuratorTransaction JavaDoc](https://curator.apache.org/apidocs/org/apache/curator/framework/api/transaction/CuratorTransaction.html)，它清楚地指出：

> **重要提示：**在调用
>      之前不会提交操作。[`CuratorTransactionFinal.commit()`](https://curator.apache.org/apidocs/org/apache/curator/framework/api/transaction/CuratorTransactionFinal.html#commit--)

但是，`CuratorTransactionFinal`是一个没有实现类的接口（我可以找到）。

我是否期望实现它并定义它的功能`commit()`？
还是我错过了一些更大的概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:35:27.523

在源代码中找到它：

假设您的 CuratorFramework 实例称为“客户端”。

如果您执行类似...的操作

```
client.create().forPath("/foo"); 
```

...它不是事务性的。如果你执行...

```
client.inTransaction().create.forPath("/foo"); 
```

...是的，但是在您提交事务之前，该操作实际上不会完成。这我已经知道了。要提交事务，您可以：

```
client.inTransaction().create().forPath("/foo")
    .and().create().forPath("/bar")
    .and().commit(); 
```

# azure - Windows azure 缓存：PREVIEW 是什么意思？

> ID：12627813
> 
> 赞同：0
> 
> 时间：2012-09-27T18:25:32.927
> 
> 标签：azure, azure-caching

根据 MSDN，Windows Azure 缓存似乎仍处于预览阶段。还有一些博客说“生产中不支持 Windows Azure 缓存”

这是什么意思？这是否意味着无法使用云上的 Windows Azure 缓存来部署 Web 角色？我的直觉说不是，但是我不明白“在生产中不受支持”是什么意思。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:38:56.977

您可以部署，但不完全支持。因此，如果出现问题，不要指望完全支持或任何 SLA 回扣。这也意味着在完全生产可用性之前，某些东西可能会发生变化。

简而言之，预览意味着“使用风险自负”。

# html - 如何为静态元素（css、js、图像）设置浏览器缓存

> ID：12627814
> 
> 赞同：0
> 
> 时间：2012-09-27T18:25:33.550
> 
> 标签：html, django, apache, caching

具体来说，我正在使用 django 和 apache 服务器。

在 pingdom 工具上测试站点时，我收到了这些消息。

以下可缓存资源的新鲜度生命周期较短。为以下资源指定至少一周后的到期时间：

```
http://site.com/static/css/style.css
http://site.com/static/images/facebook_f_icon.png
http://site.com/static/images/logo.png 
```

ETC...

尝试用谷歌搜索这个问题，但很不清楚。我应该如何设置浏览器缓存以及这些元素的到期日期？这是html标签的形式吗？我需要配置apache吗？设置在哪里？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:14:03.397

看看[http://httpd.apache.org/docs/2.2/mod/mod_expires.html](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)。

# java - Boilerpipe - 如何输出 JSON？

> ID：12627818
> 
> 赞同：5
> 
> 时间：2012-09-27T18:25:38.297
> 
> 标签：java, json, boilerpipe

我正在使用[boilerpipe](http://code.google.com/p/boilerpipe/)，它看起来很棒，但我想输出JSON。我正在使用 Java 版本并在 NetBeans 中进行如下测试：

```
final URL url = new URL("http://mashable.com/2012/09/26/worlds-best-father-kickstarter-calendar");
System.out.println(ArticleExtractor.INSTANCE.getText(url)); 
```

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:52:22.867

`Boilerpipe`不附带`JSON`序列化程序。

但是，您可以这样做（假设您已经提取了所有数据）：

```
public String articleTextToJson(String article, String title, String sourceUrl) {
    if (null == article) {
        return "{ \"error\" : { " +
               "       \"message\" : \"Article did not extract\", " +
               "       \"code\" : 1 " +
               "    }, " +
               "  \"status\" : \"error\" " +
               "}";
    }
    return "{ \"response\" : { " +
           "       \"title\" : \"" + title + "\" " +
           "       \"content\" : \"" + article + "\", " +
           "       \"source\" : \"" + sourceUrl + "\" " +
           "    }, " +
           "  \"status\" : \"success\" " +
           "}"
} 
```

棘手的部分当然是获得标题......

或者更好的是使用一些`JSON`像[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)这样的序列化程序。

希望有帮助。

# vb.net - 在数据网格控件中显示列表属性

> ID：12627824
> 
> 赞同：1
> 
> 时间：2012-09-27T18:26:03.143
> 
> 标签：vb.net, datagrid

我有一个超级简单的示例表单，它似乎无法正确显示所有数据。我正在尝试使用旧的 DataGrid 控件来显示该`List(Of T)`类型的自定义对象中的属性。这是我的代码：

```
Public Class Form1

    Public Class o
        Public Property V1 As Integer = 1
        Public Property V2 As Integer = 2
        Public Property V3 As New List(Of Integer)({1, 2, 3})
    End Class

    Public Sub New()
        InitializeComponent()
        Dim foo As New o
        Me.DataGrid1.DataSource = New BindingSource(foo, Nothing)
    End Sub

End Class 
```

DataGrid 按预期显示 - 两列 V1 和 V2，在行选择器中带有一个加号框。当我放下它时，我会看到一个指向 V3 的链接。当我单击该链接时，我的标题行将更改为`o: V1: 1 | V2: 2`带有显示或隐藏父行的控件，以及返回完整对象视图的箭头。但是即使子网格中有三个行指示器，也根本没有列。如何让该子网格显示值？

# regex - 正则表达式从 SMTP 消息中删除旧版 CRLF

> ID：12627827
> 
> 赞同：0
> 
> 时间：2012-09-27T18:26:04.583
> 
> 标签：regex, smtp

由于某些旧标准，当您从 Outlook 发送电子邮件时，纯文本格式包含一个`CRLF`或`\r\n`每个*n 个*字符。

在我正在编写的应用程序中，我想在**不**添加换行符的情况下显示此纯文本，以便文本换行有效，并且我可以充分利用屏幕大小。

例如，Outlook 会自动删除这些“不必要的”换行符，我正在尝试编写一个正则表达式来做同样的事情，但在格式上遇到了困难。

据我所知，outlook 的解析如下：

*   仅在.之前的末尾没有`' '`( ) 的文本行上删除 CRLF`\s``CRLF`

非常感谢有关如何在正则表达式中解析它的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:29:50.303

```
(?<! )\s$ 
```

这将匹配行尾没有空格的单个空格字符。请注意，您需要在您的正则表达式中有多行标志，否则这只会在总字符串的末尾匹配。

# postgresql - 重命名 PostgreSQL 中的枚举项

> ID：12627830
> 
> 赞同：52
> 
> 时间：2012-09-27T18:26:17.760
> 
> 标签：postgresql, postgresql-9.1

我想在 PostgreSQL 9.1.5 中更改枚举类型中项目的名称。

这是该类型的创建 stmt：

```
CREATE TYPE import_action AS ENUM
('Ignored',
'Inserted',
'Updated',
'Task created'); 
```

我只想将“创建的任务”更改为“已中止”。从[文档](http://www.postgresql.org/docs/9.1/static/sql-altertype.html)看来，以下内容应该有效：

```
ALTER TYPE import_action
RENAME ATTRIBUTE "Task created" TO "Aborted"; 
```

但是，我收到一条消息：

```
********** Error **********

ERROR: relation "import_action" does not exist
SQL state: 42P01 
```

但是，它显然确实存在。

该类型当前被多个表使用。

我正在认为一定没有办法做到这一点。我已经尝试了 pgAdminIII 中类型的对话框，但是我看不到在那里重命名它。（所以，要么强烈暗示我做不到，要么 - 我希望 - 一个小的疏忽是创建该对话框的开发人员）

如果我不能在一个声明中做到这一点？那我需要做什么？我是否必须编写脚本来添加项目，将所有记录更新为新值，然后删除旧项目？这甚至会起作用吗？

看起来这应该是一件简单的事情。据我了解，记录只是存储对类型和项目的引用。我认为它们实际上并没有存储我给它的文本值。但是，也许我在这里也错了。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2017-08-01T18:02:58.213

在 PostgreSQL 版本 10 中，重命名枚举标签的[功能已添加](https://commitfest.postgresql.org/10/588/)为[ALTER TYPE](https://www.postgresql.org/docs/10/static/sql-altertype.html)语法的一部分：

```
ALTER TYPE name RENAME VALUE 'existing_enum_value' TO 'new_enum_value' 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-27T19:04:39.757

**更新：对于 PostgreSQL 版本 10 或更高版本，请参阅投票最多的答案。**

枚举值的名称称为标签，属性完全不同。

不幸的是，更改枚举标签并不简单，您必须使用系统目录： [http ://www.postgresql.org/docs/9.1/static/catalog-pg-enum.html](http://www.postgresql.org/docs/9.1/static/catalog-pg-enum.html)

```
UPDATE pg_enum SET enumlabel = 'Aborted' 
WHERE enumlabel = 'Task created' AND enumtypid = (
  SELECT oid FROM pg_type WHERE typname = 'import_action'
) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-13T14:46:08.140

接受的答案中的查询不考虑架构名称。这是一个更安全（更简单）的，基于[http://tech.valgog.com/2010/08/alter-enum-in-postgresql.html](http://tech.valgog.com/2010/08/alter-enum-in-postgresql.html)

```
UPDATE pg_catalog.pg_enum
SET enumlabel = 'NEW_LABEL'
WHERE enumtypid = 'SCHEMA_NAME.ENUM_NAME'::regtype::oid AND enumlabel = 'OLD_LABEL'
RETURNING enumlabel; 
```

请注意，这需要“rolcatupdate”（直接更新目录）权限——即使是超级用户也是不够的。

从 PostgreSQL 9.3 开始，似乎直接更新目录仍然是唯一的方法。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-27T19:04:24.140

类型、属性和值之间存在差异。你可以像这样创建一个枚举。

```
CREATE TYPE import_action AS ENUM
('Ignored',
'Inserted',
'Updated',
'Task created'); 
```

完成后*，*您可以向枚举添加*值。*

```
ALTER TYPE import_action 
ADD VALUE 'Aborted'; 
```

但是语法图没有显示任何对删除或重命名*value*的支持。您正在查看的语法是重命名属性的语法，而不是值。

尽管这种设计可能令人惊讶，但它也是经过深思熟虑的。来自[pgsql-hackers 邮件列表](http://archives.postgresql.org/pgsql-hackers/2006-08/msg00979.php)。

> 如果您需要修改使用的值或想知道整数是什么，请改用查找表。枚举对您来说是错误的抽象。

# iphone - 奇怪的 UIBarButtonItem 行为

> ID：12627835
> 
> 赞同：2
> 
> 时间：2012-09-27T18:26:35.390
> 
> 标签：iphone, ios, ipad, uinavigationbar, uibarbuttonitem

在模拟器或设备中尝试以下操作。

为 iPhone 创建一个新的 Master-Detail 应用程序或比较任何使用导航栏的应用程序。iOS 5 或 6，没关系。在模板的情况下：让它运行，使用加号按钮创建一个条目并打开该条目。

现在触摸导航栏下方的区域，直接在返回的 UIBarButtonItem 下方。

即使按钮和导航栏显然没有被触摸，按钮也会被激活并且视图会返回。

![例子](../Images/8126c8691a79820de4051750bc143052.png)

这远远超出了导航栏的 44 倍高度。这里发生了什么？为什么这个按钮的反应超出了他的框架？在 HIG 中找不到有关此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:39:07.903

**苹果手机**

您可以按下以激活后退按钮的区域实际上大于按钮的实际像素，以适应手指的平均厚度。（实际像素数隐藏在 Apples HIG 中的某处。我认为它是 44x44。）这是预期的行为。

**iPad**

当您在主视图控制器外部点击时，它会自动关闭。这是预期的行为。

# drop-down-menu - 下拉菜单更新数据库中的选择

> ID：12627838
> 
> 赞同：0
> 
> 时间：2012-09-27T18:26:44.597
> 
> 标签：drop-down-menu, kohana

我不知道如何将下拉菜单中的更改保存到数据库。

我从数据库中获取列表。

```
$list_categories = ORM::factory('category')->find_all()->as_array('category_id','category_name'); 
```

我抓取已保存在数据库中的选定类别。

```
$selected_category = $edit_forum->category_id; 
```

我呼应下拉菜单。

```
Form::select('category', $list_categories, $selected_category); 
```

假设它列出了 A、B、C。B 是当前选择的类别，我想将其更改为 A。我想将此更改保存到数据库中，但不知道如何。

我目前执行以下操作以保存到数据库：

```
 $edit_forum->values($this->request->post());

    $errors = array();

    try {

        $edit_forum->save();

        $this->request->redirect('acp/forums');

   } catch (ORM_Validation_Exception $ex) {

       $errors = $ex->errors('validation');

   } 
```

以上适用于文本字段，但不适用于下拉菜单。

编辑：我的问题似乎是我无法更改 category_id。有谁知道怎么做？category_id 是一个外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:01:25.373

我想到了。我的路线、规则和标签是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:55:04.380

```
$edit_forum = new Model_Category($this->request->param('id'));

    if ( ! $edit_forum->loaded())
        throw new HTTP_Exception_404("Category not found");

    if ($this->request->post())
    {
        try
        {
            $edit_forum->values($this->request->post())
                ->update();

            //if you want to make redirection somewhere after update
            //$this->redirect('');  

        }
        catch (ORM_Validation_Exception $e)
        {
            $this->view->errors = $e->errors('');
        }
    } 
```

如果我说对了你想要的。希望这有帮助。

```
 <select id="category" name="category_id">
     <option value="category_id">category_name</option>
 </select> 
```

# jms - 用于 Java 消息传递服务的 Thrift 与 JMS

> ID：12627845
> 
> 赞同：1
> 
> 时间：2012-09-27T18:27:14.220
> 
> 标签：jms, thrift

是否有人对这两种技术进行了很好的比较：Thrift 与 JMS，在 Java 中用于消息传递服务？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T07:48:06.597

Thrift 是序列化/rpc 框架，而 JMS 是功能齐全的消息传递服务，因此它们不直接比较。

JMS 对 ObjectMessage 使用 stardart java 对象序列化。它比 thrift 慢得多，并且没有 java 就无法反序列化。但是，可以使用任何其他框架序列化对象并以 BytesMessage 的形式发送它们。例如，ActiveMQ 鼓励在此任务中使用协议缓冲区，但也可以使用任何其他框架，如 thrift、avro、kryo 或 Smile。

此页面可能会深入了解不同技术的速度/序列化大小： [http](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking) ://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking 一般来说，每个现代序列化框架都有其优点和缺点，但它们提供大致相同的性能。

# android - 使用 kml 文件启动 google earth

> ID：12627846
> 
> 赞同：1
> 
> 时间：2012-09-27T18:27:16.883
> 
> 标签：android, android-intent

我正在尝试使用特定 KML 文件从我的 Android 应用程序启动 Google 地球 6.1。这是我所拥有的：

```
 File file = new File(Environment.getExternalStorageDirectory(), "master.kml");
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(file), "application/vnd.google-earth.kml+xml");
            startActivity(intent); 
```

我的 AndroidManifest.xml 看起来像这样：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.androidscope"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

但是，当我运行时，我得到一个 ActivityNotFoundException：

> 09-27 14:23:05.290: W/dalvikvm(3525): threadid=1: 线程退出未捕获异常 (group=0x400dc760) 09-27 14:23:05.290: E/AndroidRuntime(3525): 致命异常: main 09-27 14:23:05.290: E/AndroidRuntime(3525): android.content.ActivityNotFoundException: 找不到处理 Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/master 的活动.kml typ=application/vnd.google-earth.kml+xml } 09-27 14:23:05.290: E/AndroidRuntime(3525): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.app.Instrumentation.execStartActivity(Instrumentation.java:1382) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.app.Activity .startActivityForResult(Activity.java:3095) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.app.Activity。startActivity(Activity.java:3201) 09-27 14:23:05.290: E/AndroidRuntime(3525): at com.example.androidscope.MainActivity$1.onClick(MainActivity.java:85) 09-27 14:23:05.290 : E/AndroidRuntime(3525): 在 android.view.View.performClick(View.java:3122) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.view.View$PerformClick.run( View.java:11942) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.os.Handler.handleCallback(Handler.java:587) 09-27 14:23:05.290: E/AndroidRuntime( 3525): 在 android.os.Handler.dispatchMessage(Handler.java:92) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 android.os.Looper.loop(Looper.java:132) 09 -27 14:23:05.290: E/AndroidRuntime(3525): 在 android.app.ActivityThread.main(ActivityThread.java:4028) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 java.lang .reflect.方法。invokeNative（本机方法）09-27 14:23:05.290：E/AndroidRuntime（3525）：在 java.lang.reflect.Method.invoke（Method.java:491）09-27 14:23:05.290：E/AndroidRuntime (3525): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 com.android.internal.os。 ZygoteInit.main(ZygoteInit.java:602) 09-27 14:23:05.290: E/AndroidRuntime(3525): 在 dalvik.system.NativeStart.main(Native Method)05.290：E/AndroidRuntime（3525）：在 dalvik.system.NativeStart.main（本机方法）05.290：E/AndroidRuntime（3525）：在 dalvik.system.NativeStart.main（本机方法）

我注意到，如果我添加：

```
intent.setClassName("com.google.earth", "com.google.earth.EarthActivity"); 
```

然后谷歌地球加载但没有 KML 信息。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:17:19.170

Uri earthURI = Uri.fromFile(kmlFile);

意图 earthIntent = new Intent(android.content.Intent.ACTION_VIEW, earthURI);

开始活动（地球意图）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-07T21:26:51.563

> 意图 earthIntent = new Intent(android.content.Intent.ACTION_VIEW, earthURI);

这似乎在 Android 5 上运行良好

是否存在破坏此意图的 Android 6 权限更改？

# sqlite - 与常量相比，按单词匹配数的降序选择属性

> ID：12627848
> 
> 赞同：0
> 
> 时间：2012-09-27T18:27:21.910
> 
> 标签：sqlite

我面临一个我不确定如何处理的数据库（特别是 sqlite）查询。

我正在寻找在其“名称”属性和常量之间具有 1-n 个单词匹配的所有元组。按降序排列。

例如，它是一个包含食品的数据库。如果常量是“Maranatha Natural Almond Butter 26oz Lightly Roasted”，我希望返回数据库中包含该常量中至少一个单词的任何元组。例如，“Almond Butter Natural”会出现在“Maranatha Natural”之前，而“Maranatha Natural”会出现在“Almond”之前，等等。

本质上，只要元组属性和常量之间有一个相交的单词，它就可以匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:51:33.633

匹配词是 SQLite 的[全文搜索扩展](http://www.sqlite.org/fts3.html)的设计目的。请阅读该页面以了解必须如何编译 SQLite 以及可能的情况，但我将添加一些备注：

简单的匹配是通过如下查询完成的：

```
SELECT * FROM foods_fts_tab WHERE name MATCH 'Maranatha Natural Almond etc.' 
```

这将只返回至少一个单词匹配的所有记录。

您可以使用辅助函数返回的信息对匹配进行加权。例如，

```
SELECT ... ORDER BY length(offsets(foods_fts_tab)) DESC 
```

将按匹配单词的数量排序。

您正在询问单词匹配的数量，但真正的搜索引擎也使用其他信息来计算相关性分数。请参阅`matchinfo()`第 4.3 节中的功能和附录 A 中的示例。

# c++ - 寻找一种不使用 memcpy 来完成 memcpy 的方法

> ID：12627849
> 
> 赞同：-4
> 
> 时间：2012-09-27T18:27:21.927
> 
> 标签：c++, linux

我希望在不实际使用 memcpy 的情况下完成与 memcpy 相同的结果。

这是我想从 memcpy 更改的代码。

```
memcpy((char *) &(serv_addr.sin_addr.s_addr), 
    (char *)(server->h_addr), server->h_length); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:32:41.723

`memcpy`您可以使用 for 循环轻松重新编码。如果编译器提供内在函数，您可以使用它们。海合会有`__builtin_memcpy`. 但最重要的是，您这样做可能是错误的，`memcpy`到处都在使用并且不能出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:42:32.200

只是一个疯狂的猜测：您在网络的某个地方找到了这段代码，并且不小心将参数反转为`memcpy()`调用：

```
memcpy((char *)server->h_addr, (char *)&serv_addr.sin_addr.s_addr, 
    server->h_length); 
```

只需将它们切换回来，您的运行时错误就会消失。

# php - Codeigniter上传图片，然后操作图片3次

> ID：12627850
> 
> 赞同：1
> 
> 时间：2012-09-27T18:27:31.650
> 
> 标签：php, image, codeigniter, upload

我正在为我正在构建的东西研究一个画廊概念，我试图找出将图像文件上传到服务器的最佳方法，然后在设定的比例内将其转换为不同的大小 3 次具有最大高度或宽度。取决于哪个更大。

所以上传类和图像处理类在一对一的基础上非常简单，尽管我知道你可以循环遍历一个数组并一遍又一遍地处理事情。然而，棘手的部分是 3 种不同的尺寸。

本质上，我计划获取上传的文件并将其存储在不同的目录中，而不是使用新名称上传到其他目录中，我们将把该目录称为“org”。然后我想取这个原件，重命名后保持文件名与原件一致，然后在一定比例内调整原件的大小，最大尺寸为某个宽度或高度，哪个更大。图像类处理的部分，现在让我感到困惑的部分是，我该如何做这个比下一个小 3 倍。我想要一个“lrg”、“med”、“sml”文件夹集。我会以某种方式将它们构建到同一个函数中，还是在完成后将它们传递给下一个函数等等？如果它们都在同一个功能中，那么这就是我对如何处理这个问题感到困惑的地方。

另外作为参考，除了 CI 文档上的标准信息之外，我没有尝试太多，因为我试图在深入研究代码并发现它不起作用之前仔细考虑这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:22:02.060

也许您可以尝试存储 x3 元素的 timthumb insted。

这样你就可以存储 Org. 图像，以防万一您需要特定大小，它会在特定时间处理并存储在缓存文件夹中，以防您再次需要相同的图像。

[http://code.google.com/p/timthumb/](http://code.google.com/p/timthumb/)

# sql-server - 尝试使用触发器 T-SQL 插入数据时出错

> ID：12627851
> 
> 赞同：0
> 
> 时间：2012-09-27T18:27:36.913
> 
> 标签：sql-server, tsql, triggers

下面是在我们的一个 SQL 表上用于任何插入/更新操作的触发器。99/100 次这个触发器工作得很好，但是我们时不时地收到这个错误消息：

> *无法将值 NULL 插入到列“TransactionDate”、表“AgentResourcesU01.dbo.TransactionLog”中；列不允许空值。
> 插入失败。该语句已终止。*

从 Insert 语句中可以看出，我们的事务日志表中的列是`TransactionDate, Operator, TableName, Action, TableString`和`UserId`。我在开始的 SELECT 语句中设置了变量`@transDate`，因此在我看来，除非是坏数据进入，否则 NULL 应该没有办法进入那里。

有什么想法吗？

```
 BEGIN
        SELECT @symetraNumber = SymetraNumber, @lastChangeOperator = LastChangeOperator, @transDate = LastChangeDate, @entityType = EntityType, 
        @firstName = FirstName, @lastName = LastName, @suffix = NameSuffix, @corpName = CorporateName, @controlId = ControlId
        FROM inserted

        IF @firstName IS NULL SET @firstName = 'NULL'
        IF @lastName IS NULL SET @lastName = 'NULL'
        IF @suffix IS NULL SET @suffix = 'NULL'
        IF @corpName IS NULL SET @corpName = 'NULL'
        IF @controlId IS NULL SET @controlId = 'NULL'

        SET @tableString = 'SymNum:' + @symetraNumber + ' EntType:' + @entityType + ' Fname:' + @firstName + ' Lname:' + @lastname + ' Suff:' + @suffix +
            ' CorpName:' + @corpName + ' ctrlId:' + @controlId

        INSERT INTO TransactionLog (TransactionDate, Operator, TableName, Action, TableString, UserId)
        VALUES (@transDate, 'Op', @tableName, @action, @tableString, @lastChangeOperator)
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:06:21.893

为了证明 Marc 的观点，您可以以基于集合的方式执行此操作，而无需所有这些讨厌的变量和 IF 检查：

```
INSERT dbo.TransactionLog
(
  TransactionDate, 
  Operator, 
  TableName, 
  Action,
  TableString,
  UserId
)
SELECT 
  LastChangeDate, 
  'Op',
  @TableName,
  @action, 
     'SymNum:'      + COALESCE(SymetraNumber, 'NULL')
     + ' EntType:'  + COALESCE(EntityType,    'NULL')
     + ' Fname:'    + COALESCE(FirstName,     'NULL')
     + ' Lname:'    + COALESCE(LastName,      'NULL')
     + ' Suff:'     + COALESCE(NameSuffix,    'NULL')
     + ' CorpName:' + COALESCE(CorporateName, 'NULL')
     + ' ctrlId:'   + COALESCE(ControlId,     'NULL'),
  LastChangeOperator
FROM inserted; 
```

如果`LastChangeDate`在基础表中为 NULLable，请将其标记为 NOT NULL，修复插入 NULL 的问题，或两者兼而有之。触发器不必知道此约束，但您可以通过执行以下操作来解决它（如果值为 NULL，请立即将其设置为）：

```
...
  UserId
)
SELECT 
  COALESCE(LastChangeDate, CURRENT_TIMESTAMP), 
  'Op',
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:21:15.240

[1] 我假设您有一个 INSERT/UPDATE/ **DELETE**触发器，当有人试图从基表中删除行时，`inserted`触发器中的表将有零行。看这个例子：

```
CREATE TABLE MyTableWithTrigger (
    MyID INT IDENTITY PRIMARY KEY,
    LastUpdateDate DATETIME NOT NULL
);
GO

CREATE TABLE TransactionLog (
    TransactionLogID INT IDENTITY PRIMARY KEY,
    CreateDate DATETIME NOT NULL DEFAULT GETDATE(),
    LastUpdateDate DATETIME NOT NULL,
    MyID INT NOT NULL
);
GO

CREATE TRIGGER trIUD_MyTableWithTrigger_Audit
ON MyTableWithTrigger
AFTER INSERT, UPDATE, DELETE
AS
BEGIN
    DECLARE @LastUpdateDate DATETIME, @MyID INT;
    SELECT @LastUpdateDate=i.LastUpdateDate, @MyID=i.MyID
    FROM inserted i;

    INSERT TransactionLog (LastUpdateDate, MyID)
    VALUES (@LastUpdateDate, @MyID) 
END;
GO

PRINT 'Test 1'
INSERT  MyTableWithTrigger (LastUpdateDate)
VALUES  ('2011-01-01');
DELETE MyTableWithTrigger;
SELECT * FROM MyTableWithTrigger;
SELECT * FROM TransactionLog; 
```

输出：

```
Msg 515, Level 16, State 2, Procedure trIUD_MyTableWithTrigger_Audit, Line 10
Cannot insert the value NULL into column 'LastUpdateDate', table 'Test.dbo.TransactionLog'; column does not allow nulls. INSERT fails.
The statement has been terminated. 
```

[2] 要纠正您的触发器（请参阅 Marc 的评论），请阅读 Alex Kuznetsov 的书（使用 SQL Server 进行防御性数据库编程：[亚马逊](https://rads.stackoverflow.com/amzn/click/com/1906434492)，[Red Gate - PDF](http://assets.red-gate.com/community/books/assets/defensive-database-programming.pdf)）的第 192 - 199 页。

# asp.net-mvc-3 - ASP.NET MVC 3、部分和多个布局级别

> ID：12627853
> 
> 赞同：4
> 
> 时间：2012-09-27T18:27:45.923
> 
> 标签：asp.net-mvc-3, layout

我找不到使 @section 和 @RenderSection() 与多级布局一起工作的方法。在我的项目中，我定义了布局的层次结构：

~/Views/Shared/_Layout.cshtml：

```
<!DOCTYPE html>
<html>
<head>
    <meta ... />
    <meta ... />

    <link href="..." rel="stylesheet" type="text/css" />
    <link href="..." rel="stylesheet" type="text/css" />

    @RenderSection("Stylesheet", false)
</head>
<body>
    <!-- lots of markup -->
    @RenderBody()

    <!-- more markup -->

    <script src="..." type="text/javascript" />
    <script src="..." type="text/javascript" />

    @RenderSection("JavaScript", false)
</body>
</html> 
```

~/Views/Shared/_BaseLayout.cshtml（没有 JavaScript 或样式表部分的定义）：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- lots of markup -->
@RenderBody() 
```

~/Views/Shared/_CreateEditLayout.cshtml（同样，没有 JavaScript 或样式表的定义）：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- lots of markup -->
@RenderBody() 
```

〜视图/配置文件/Edit.cshtml：

```
@model ...

@{
    Layout = "~/Views/Shared/_CreateEditLayout.cshtml";
}

@section JavaScript {
    <script type="text/javascript">
        jQuery(document).ready(function ($) {
            // lots of funny JS
        });
    </script>
} 
```

我的问题是，只需定义`@section JavaScript { }`（不必在该部分内编写标记或 JavaScript）就`Edit.cshtml`可以渲染我的停止。错误如下：已定义以下部分，但尚未为布局页面“~/Views/Shared/_CreateEditLayout.cshtml”呈现：“JavaScript”。

任何想法出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:21:31.153

这是不可能的，只有解决方法。这是您问题的答案：[Razor Nested Layouts with Cascading Sections](https://stackoverflow.com/questions/5525602/razor-nested-layouts-with-cascading-sections)

# razor - 当从下拉列表中未选择任何值（NULL）时，在表中插入值的问题（WebMatrix / Razor 语法））

> ID：12627854
> 
> 赞同：1
> 
> 时间：2012-09-27T18:27:50.680
> 
> 标签：razor, webmatrix, html-select

如果未从下拉列表中选择任何值，则 UPDATE SQL 命令将向我抛出类型为 的错误`Update Statement Conflicts with Foreign Key Constraint`。这是正常的，因为没有选择已知值。

如何处理？

**我填充下拉列表的代码**：

```
var titlesData = db.Query("SELECT TitleId, Name FROM Titles ORDER BY Name");
titlesListItems = titlesData.Select(i => new SelectListItem {
Value = i.TitleId.ToString(),
Text = i.Name,
Selected = i.TitleId == providerData.TitleId ? true : false
}); 
```

**我的代码显示列表：**

```
@Html.DropDownList("titlesCombo","-- Please select --",titlesListItems) 
```

**我的 SQL 语句**

```
@"INSERT INTO Providers
  (Ref, ProviderTypeId, CompanyName, CompanyTypeId, TitleId, FirstName, LastName)
  VALUES (@0,@1,@2,@3,@4,@5,@6)";
  db.Execute(updateCommand, refer, providerTypeId, companyName, companyTypeId, titleId, firstName, lastName) 
```

`If one of the "id" fields are null, the insert will fail. How do I exclude the INSERT of those fields when they have a null value ?`

我考虑过通过 IF 语句强制表中的**“虚拟”ID 值**（例如“0”），如果找到该值，则将“已选择”设置为 false，但这是不可能的，因为每个连接表中的主键不能手动设置为“0”（或任何其他值）（自动增量）。

那么解决方案是什么？

测试每个（我有很多）下拉列表框以排除未选择任何值的下拉列表框并构造变量 SQL 语句？那看起来棘手而复杂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:13:45.090

要么使数据库中的 ID 字段为空，要么回发的 ID 字段应标记为 [Required]，以便在未选择任何选项时触发验证。

# web-services - 解析 REST 与 SOAP Web 服务

> ID：12627855
> 
> 赞同：0
> 
> 时间：2012-09-27T18:27:56.950
> 
> 标签：web-services, rest, axis2, restful-architecture

我正在使用公共 RESTful API。该服务效果很好，但我在任何地方都找不到 WADL。因此，在接收到流后，我只需使用标准 DOM 对其进行解析并将其转换为我的 POJO (org.w3c.dom)。

然而，几年前，我使用 SOAP 服务并使用了 Axis2，在那里我能够使用 Axis2 附带的实用程序生成关联的客户端类以将服务编组到 Java 中。

我想知道是否有类似的 REST API，如果我有 WADL，我可以做类似的事情。我现在这样做的方式并不太糟糕而且速度很快，只是看起来已经过时了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:09:46.643

首先，并非所有 RESTful 服务都发布自己的 WADL 描述；没有要求他们这样做，有些人强烈认为这样做是错误的，提供对您所做工作的描述违反了 HATEOAS 原则。但从你的角度来看，这真的是无关紧要的。

您想要的是为正在传递的 XML 文档获取*XSD 模式*；虽然完整的 WADL 可能不可用，但模式可能不可用。如果做不到这一点，您可以根据发送的消息编写一个。（为了做好 DOM 解析，您需要了解其中实际存在哪些数据；剩下的只是语法。）如果您自己编写，请使用 GUI 创作工具；有一些不错的免费的（我过去曾在 Eclipse WTP 中使用过，但肯定不是唯一的）并且在纯文本编辑器中手动编写模式会很快变得烦人。

一旦你有了一个模式，通过 JAXB（特别是[xjc](https://stackoverflow.com/questions/5284853/xsd2java-tools)工具）提供它，它将为你生成绑定类。您仍然需要做一些工作来构建一个完整的客户端，但它会消除消息解析的麻烦，因为您将能够利用它[`Unmarshaller`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html)来完成繁重的工作。

# git - Git：通过标签从远程拉取

> ID：12627856
> 
> 赞同：3
> 
> 时间：2012-09-27T18:27:58.677
> 
> 标签：git, version-control

我是 git 的初学者，并且一直在通过创建本地存储库来拉取和推送来在我的本地计算机上测试几个命令。

我在“项目”中设置了一个裸存储库并从中克隆了两个用户：“user1”和“user2”。该项目目前有文件 'one.txt'、'two.txt' 等，以及一些标记为 'v1.0'、'v2.0' 等的提交与添加新的“#.txt”文件相关联。

但是，当我尝试在新文件夹“tmp”中创建一个新的 git 工作目录，将项目添加为远程存储库（tmp 不是克隆）并拉取时，我收到错误：

```
$ git pull ../project v1.0
$ fatal: 'v1.0' does not appear to be a git repository
$ fatal: The remote end hung up unexpectedly 
```

当我只是尝试从项目中拉出主分支时，这不会发生，所以我假设我有权拉取。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T19:27:31.347

您要做的就是创建另一个克隆。除非您有充分的理由不这样做，否则它将复制所有历史记录（不用担心，它通常小于 svn 存储库的大小的 10%，并且由于压缩而通常小于工作目录）。

创建你的第一个仓库：

```
mkdir myrepo
cd !$
git init
echo one > one.txt
git add -A
git commit "my first commit"
git tag v1.0
echo two > two.txt
git add -A
git commit "my second commit"
git tag v2.0 
```

创建一个模拟的中央仓库：

```
cd ..
mkdir centralrepo
cd !$
git init --bare # don't want to have a working directory here
cd - 
```

创建一个模拟的同事 repo：

```
mkdir coworkerrepo
cd !$
git init 
```

告诉你的仓库中央仓库在哪里

```
cd ../myrepo
git remote add origin ../centralrepo 
```

告诉你同事的仓库中央仓库在哪里

```
cd ../coworkerrepo
git remote add origin ../centralrepo 
```

将您的工作发布到中央仓库：

```
cd - # useful shortcut for flipping between two dirs (works for git checkout and branches too)
git push origin master 
```

放置主参考和其中的提交，但不放置标签。对于标签，请执行以下操作：

```
git push origin v1.0
git push origin v2.0 
```

或者只是推高你的回购中的所有标签

```
git push origin --tags 
```

您现在可以检查遥控器是否具有这些标签和引用

```
git remote -v show origin 
```

切换到您同事的存储库并获取这些更改：

```
cd -
git fetch # will update tracking branches and tags
git merge origin/master # fast-forward master branch to what the remote tracking branch is pointing to 
```

这两个操作`fetch`和`merge`是同时完成的`pull`。所以你可以这样做

```
git pull origin master 
```

所以标签被获取。当你意识到 pull 是 fetch 和 merge （或者如果你想变基）放在一起时，这是暗示的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:38:45.623

您的历史记录中已经有了标签。您可以使用`git tag -l`列出所有可用的标签，并且可以随时`git checkout`访问它们。

```
git checkout v1.0 
```

# jquery - 使用jquery mobile点击更改数据图标

> ID：12627864
> 
> 赞同：6
> 
> 时间：2012-09-27T18:28:37.717
> 
> 标签：jquery, jquery-mobile

这是我的代码：

```
function togglePOIAndDisplay(toggle){
    var display = $(toggle).attr('data-icon');
    console.log(display);
    if(display == 'minus'){
        $(toggle).attr('data-icon', 'check');
            console.log(display);
    } else {
        $(toggle).attr('data-icon', 'minus');
        removeMarkers(toggle);
    }
} 
```

它将登录`minus`到控制台并进入第一个 if() 块并正确执行 displayAllPOIOfType()，但它不会反映值的变化，尽管它被正确设置。任何想法为什么会这样，因为它显然正确读取/设置了属性。

`function`我需要打电话更新吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T19:15:43.057

这取决于它是按钮、选择还是其他接受该`data-icon`属性的东西。不幸的是，jQuery Mobile 对动态更改由属性控制的事物没有很好的支持`data-*`，因此您必须调整属性以及修改子元素上的类。

对于按钮，这样的事情应该可以工作：

```
$(buttonSelector).attr('data-icon', newIcon);
                 .find('.ui-icon')
                     .addClass('ui-icon-' + newIcon)
                     .removeClass('ui-icon-' + oldIcon); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-01T00:47:20.717

如果图标在这样的按钮内：

```
<a id="buttonID" href="#" data-role="button" data-icon="delete">Button</a> 
```

您可以使用 buttonMarkup 功能更改图标：

```
$('#buttonID').buttonMarkup({ icon: "check" }); 
```

或者到您的自定义图标：

```
$('#buttonID').buttonMarkup({ icon: "my-icon" }); 
```

示例：http: [//jsfiddle.net/u8fnJ/1/](http://jsfiddle.net/u8fnJ/1/)

如这篇文章中所示[如何使用 jQueryMobile 刷新标题中的按钮？](https://stackoverflow.com/questions/9491879/how-to-refresh-a-button-in-a-header-with-jquerymobile#answer-9491988)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T09:40:19.163

[http://jsfiddle.net/phillpafford/8pwFK/29/](http://jsfiddle.net/phillpafford/8pwFK/29/)

将自定义图标更改为星形图标。

```
$(this).attr('data-icon','star');
$(this).find('.ui-icon').removeClass('ui-icon-custom').addClass('ui-icon-star'); 
```

这个例子很容易学习。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-27T01:45:43.557

对于列表视图，您需要插入一个跨度。

```
$("#times").off('click','li').on("click","li",function() {

 /* add a checkbox when you click the listview li  */
 $(this).find('div.ui-li').append('<span class="ui-icon ui-icon-check ui-icon-shadow">&nbsp;</span>');

}); 
```

# sql - sql中的西欧字符集到土耳其语

> ID：12627868
> 
> 赞同：2
> 
> 时间：2012-09-27T18:28:51.867
> 
> 标签：sql, oracle, shell, unix, plsql

我在字符编码方面遇到了严重问题。提供一些背景：

1.  我有土耳其业务用户，他们在 Unix 屏幕上用土耳其语输入一些数据。
2.  我的数据库 NLS 参数设置为`AMERICAN`，`WE8ISO8859P1`而 Unix设置`NLS_LANG` 为`AMERICAN_AMERICA.WE8ISO8859P1`.
3.  土耳其业务能够在 UNIX 屏幕和 TOAD 上看到所有土耳其语字符，而我不能。我只能在西欧字符集中看到它们。

在业务端：`ÖZER İNŞAAT TAAHHÜT VE`
在我们端：`ÖZER ÝNÞAAT TAAHHÜT VE`

如果您注意到土耳其字符`İ`并`Ş`正在转换为 ISO 8859-1 字符集。但是，所有设置（db 和 unix 中的 NLS 参数）在两端都相同`ISO8859-1`- （西欧）

通过一些研究，我可以理解 - 土耳其机器可以通过实时转换来显示土耳其数据（数据库 NLS 设置被本地 NLS 设置覆盖）。

现在，我有一个在我的数据库中运行的接口——有一些 PL/SQL 脚本（通过 shell 脚本运行）从数据库中提取一些数据并将它们假脱机到一个 unix 路径上的 .csv 文件。然后该 .csv 文件通过 MFT（托管文件传输）传输到外部系统。

问题是-Exract 从不包含任何土耳其字符。每个土耳其字符都被转换为西欧字符集，并像这样进入外部系统，这被视为数据转换/丢失的情况，我的业务真的很不开心。

谁能告诉我 - 我怎么能保留所有的土耳其字符？

PS：外部系统的字符集可以设置为 ISP8859-9 字符集。

提前谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T19:03:07.533

如果您说您的数据库字符集是 ISO-8859-1，即

```
SELECT parameter, value
  FROM v$nls_parameters
 WHERE parameter = 'NLS_CHARACTERSET' 
```

返回 a `value`of`WE8ISO8859P1`并且您将数据存储在`CHAR`、`VARCHAR`或`VARCHAR2`列中，问题是数据库字符集不支持完整的土耳其字符集。如果字符不在[ISO-8859-1 代码页布局](http://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout)中，则无法将其正确存储在由数据库字符集控制的数据库列中。如果您想将土耳其语数据存储在 ISO-8859-1 数据库中，您可以使用[替代字符](http://en.wikipedia.org/wiki/ISO/IEC_8859-1#Languages_commonly_supported_but_with_incomplete_coverage)（即用 S 代替 Ş）。但是，如果您想支持所有土耳其语字符，则需要迁移到支持所有这些字符的字符集——ISO-8859-9 或 UTF-8 都比较常见。

然而，更改现有数据库的字符集并非易事。无论您使用什么版本的 Oracle，Globalization Support Guide 中都有一章介绍了[字符集迁移](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch11charsetmig.htm#g1011430)。如果您想迁移到 Unicode 字符集（这通常是首选方法，而不是坚持使用单字节 ISO 字符集之一），您可以利用[Oracle Database Migration Assistant for Unicode](http://www.oracle.com/technetwork/products/globalization/dmu/index.html)。

此时，您通常会看到反对意见，即至少某些应用程序“正确”地查看数据，因此数据库必须支持土耳其语字符。问题是，如果您[设置`NLS_LANG`不正确](http://www.oracle.com/technetwork/products/globalization/nls-lang-099431.html#_Toc110410550)，则可能会完全绕过字符集转换，这意味着客户端上字符的任何二进制表示都会被持久化，而无需修改数据库。只要读取数据的每个进程都以`NLS_LANG`相同且错误的方式配置它们，事情就可能看起来有效。但是，您会很快发现其他一些应用程序将无法配置它们的`NLS_LANG`同样不正确。例如，Java 应用程序总是希望在内部将数据库中的数据转换为 Unicode 字符串。因此，如果您将数据错误地存储在数据库中，就像听起来那样，则无法让这些应用程序正确读取它。如果您只是在 shell 脚本中使用 SQL*Plus 来生成文件，那么几乎可以肯定的是，您的客户端配置不正确，因此数据文件看起来是正确的。但是让现有的错误配置持续存在是一个非常糟糕的主意。你敞开*心扉*将来会出现更大的问题（如果您还没有遇到），当您发现 Oracle 导出实用程序之类的工具损坏了数据导出或当您想使用无法正确配置的工具来查看数据时。尽早纠正问题会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-21T17:09:27.843

只需将`NLS_LANG`参数设置`AMERICAN_AMERICA.WE8ISO8859P9`为土耳其语就足够了。

# visual-studio - 如何在 IIS 上从 Visual Studios 托管 ASMX？

> ID：12627873
> 
> 赞同：1
> 
> 时间：2012-09-27T18:29:06.153
> 
> 标签：visual-studio, iis, asmx

我已经在 Visual Studios 中创建了一个功能齐全的 Web 服务，因为我已经能够通过 localhost 对其进行测试。我尝试按照一些随机指南从视觉工作室发布它，但每次尝试时我都会遇到错误。

这是我最近的错误。

```
Error   3   Web deployment task failed. (The specified credentials cannot be used with the authentication scheme 'Basic'.)

The specified credentials cannot be used with the authentication scheme 'Basic'.
Default credentials cannot be supplied for the Basic authentication scheme.
Parameter name: authType        0   0   RacoCS 
```

我之前的错误是引用了我将尝试发布它的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:36:58.537

您尝试使用哪种发布方法。Visual Studio 允许您以各种方式发布您的 Web 应用程序。不太可能出现问题的是文件系统，然后在 IIS 中手动创建一个指向发布文件所在目录的网站。祝你好运

# c# - DataTable.Rows.InsertAt 不接受 DataTable.Rows.Add 接受的新对象 []

> ID：12627875
> 
> 赞同：1
> 
> 时间：2012-09-27T18:29:19.307
> 
> 标签：c#, .net

我觉得我一定不能在这里做某事。我有一个`DataTable`并且它目前能够使用 DataTable.Rows.Add 方法获取我的参数，但是当我使用 DataTable.Rows.InsertAt 时它会抛出一个错误

我目前正在做的没有问题：

`dt.Rows.Add(new object[] { txtCompID.Text, scan(TrimStart('0'), txtEtaNum.Text, txtBinLocation.Text });`

我想要做什么（所以插入发生在顶部），这是抛出“参数1：无法从'object []'转换为'System.Data.DataRow'”

`dt.Rows.InsertAt(new object[] { txtCompID.Text, scan.TrimStart('0'), txtEtaNum.Text, txtBinLocation.Text }, 0);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:32:53.467

您需要在 dt 中添加 dt 类型的行。您可以使用`dt.NewRow()`方法来获取`row for dt`. 你可以这样做。

```
DataRow dr = dt.NewRow();

dr[0] = "coldata1";
dr[1] = "coldata2";
dr[2] = "coldata3";
dr[3] = "coldata4";

dt.Rows.Add(dr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:34:54.800

InsertAt 不支持。[见这里](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection.insertat.aspx)。您需要先构造一个 DataRow，然后才能插入它。

# asp.net-mvc - 安装 MVC 4 Entity 框架配置错误

> ID：12627876
> 
> 赞同：2
> 
> 时间：2012-09-27T18:29:22.877
> 
> 标签：asp.net-mvc, entity-framework

我刚刚安装了 MVC4。

根据 nuGet 包管理器，我的 EF 版本是 5.0.0，最后更新于 2012 年 9 月 11 日

当我尝试创建新控制器（右键单击控制器 -> 添加 -> 控制器）时，我遇到了错误消息并且无法创建新控制器...

```
Could not load type 'System.ComponentModel.DataAnnotations.Schema.TableAttribute' 
from assembly 'EntityFramework, Version=4.1.0.0, Culture=neutral,     
PublicKeyToken=b77a5c561934e089'. 
```

我刚刚开始使用 ASP.NET MVC，所以如果有人可以帮助我解决，将不胜感激。

从包管理器控制台，我尝试如下卸载并重新安装实体框架，但这没有任何效果：

```
PM> Uninstall-Package EntityFramework
Successfully removed 'EntityFramework 5.0.0' from GD.
Successfully uninstalled 'EntityFramework 5.0.0'.

PM> Install-Package EntityFramework
You are downloading EntityFramework from Microsoft, the license agreement to which is available at http://go.microsoft.com/fwlink/?LinkId=253898&clcid=0x409\. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'EntityFramework 5.0.0'.
Successfully added 'EntityFramework 5.0.0' to GD.

Type 'get-help EntityFramework' to see all available Entity Framework commands.

PM> 
```

非常感谢您的所有帮助。

更新：

我正在关注本教程。[http://msdn.microsoft.com/en-us/data/gg685467.aspx](http://msdn.microsoft.com/en-us/data/gg685467.aspx)

看来MVC4不喜欢这种创建DBContext的方法......

```
Also there will be a new reference listed in the project references
called EntityFramework. This is the assembly that contains the Code
First runtime.

Add a new class to the Models folder and name it BlogContext. Modify
the class to match the following code: 

using System.Data.Entity;
namespace MVC3AppCodeFirst.Models 
{   
    public class BlogContext : DbContext   
    {
        public DbSet<Blog> Blogs { get; set; }
        public DbSet<Post> Posts { get; set; }
        public DbSet<Comment> Comments { get; set; }   
    } 
} 
```

它构建得很好，所以我错过了什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T23:25:48.550

在您的 Visual Studio`solution explorer`中，转到`Models`文件夹并打开`AccountModels.cs`文件。注释掉以下行

```
[Table("UserProfile")] 
```

注释掉后会变成

```
//[Table("UserProfile")] 
```

现在编译并尝试添加一个新的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:07:25.673

如果您的项目目标是 .NET 4.0，EF 将使用 EF5 版本的 4.4 版本，其功能范围缩小到 .NET Framework 4 中的核心组件可以支持的内容（即，您将无法获得对枚举或空间类型的支持）。如果您想使用 EF5 附带的所有新功能，您的 MVC 项目需要以 4.5 为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T23:24:59.600

问题解决了...

*   卸载 Visual Studio 2010
*   安装 Visual Studio 2012 Ultimate

任务完成！！！

:)

# django - Heroku Django Gunicorn“工头开始”错误

> ID：12627885
> 
> 赞同：2
> 
> 时间：2012-09-27T18:30:16.507
> 
> 标签：django, heroku, gunicorn

我正在学习[Heroku 的 Django 教程](https://devcenter.heroku.com/articles/django)，并且一直到“[使用不同的 WSIG 服务器](https://devcenter.heroku.com/articles/django#using-a-different-wsgi-server)”。

当我尝试使用 gunicorn 时，出现以下错误：

```
requirements.txt
Django==1.4.1
distribute==0.6.28
dj-database-url==0.2.1
psycopg2==2.4.5
gunicorn==0.14.6

Procfile
web: gunicorn djtut.wsgi -b 0.0.0.0:$PORT

(venv) C:\Users\xxxx\Documents\Python\djtut>foreman check
valid procfile detected (web)

(venv) C:\Users\xxxx\Documents\Python\djtut>foreman start
10:53:05 web.1  | started with pid 5652
10:53:06 web.1  | exited with code 1
10:53:06 web.1  | Traceback (most recent call last):
10:53:06 system | sending SIGKILL to all processes
10:53:06        |   File "C:\Users\xxxx\Documents\Python\djtut\venv\Scripts\
gunicorn-script.py", line 9, in <module>
(venv) C:\Users\xxxxx\Documents\Python\djtut> 
```

使用 Heroku 上的开发服务器可以正常工作。我在 Windows 7 上。有什么想法吗？我怀疑这是操作系统问题？

谢谢，

美联社

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T04:03:41.063

不幸的是，Gunicorn 不能在 Windows 上运行。

# javascript - Metro 风格从在线加载 Js

> ID：12627886
> 
> 赞同：3
> 
> 时间：2012-09-27T18:30:19.490
> 
> 标签：javascript, windows, microsoft-metro

我正在 Windows 8 上使用 Visual Studio 2012 Ultimate。

我正在开发一个 html5/js 地铁风格应用程序。

我想从网上动态加载我的 js 文件。像;

```
<script src="http://example.com/js/myJsFile.js"></script> 
```

但是地铁应用程序说；

> APPHOST9601：无法加载[http://example.com/Scripts/myJsFile.js](http://example.com/Scripts/myJsFile.js)。应用程序无法在本地上下文中加载远程 Web 内容。

我该如何解决这个问题？谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:43:04.960

您只能包含来自在 Web 上下文中运行的页面的外部 js 文件。

有关此的更多信息，您可以在此处找到：http:
[//msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465373.aspx)

# javascript - 我可以通过在另一个内部引用一个 Javascript Regexp 文字来避免代码重复吗？

> ID：12627890
> 
> 赞同：0
> 
> 时间：2012-09-27T18:30:51.520
> 
> 标签：javascript, regex

有没有一种简单的方法可以在另一个正则表达式文字中引用一个 Javascript 文字（例如“字符串”）？

有点熟悉 Javascript 正则表达式，但远非大师。尝试为少数表达式类型编写一个简单的解析器。例如，一种类型是如下表达式：

```
 `value gender 1='Male' 2 ='Female' 3="Didn't answer" >3 = 'Other'; 
```

与其用 Jison 和随之而来的学习曲线编写一个完整的解析器，我认为使用 RegExp 会很简单。

似乎[Javascript Regexp 无法捕获任意数量的重复子组](https://stackoverflow.com/questions/3537878/how-to-capture-an-arbitrary-number-of-groups-in-javascript-regexp)，并且没有明确的字符可以拆分，我正在使用自己的正则表达式解析子组。

以下工作正常，但正则表达式文字远非 DRY，几乎不可读。每个较高级别的构造都重复较低级别的构造。

```
var re_value_stmt = /value\s+(\w+)((?:\s+(?:[^=]+[=](?:(?:["][^"]+["])|(?:['][^']+[']))))+)/i
var re_value_clause = /([^=]+[=](\s*(?:(['][^']*['])|(["][^"]*["])))+)/ig
var re_value_elems =   /([^=]+)[=]\s*(?:(?:[']([^']*)['])|(?:["]([^"]*)["]))/ig

console.log(re_value_elems.exec("1='Male'"));
console.log(re_value_clause.exec("1=\"Male\" 2=\"Female\""));
console.log(re_value_stmt.exec("value gender 1='Male' 2='Female'")); 
```

例如，`(?:(?:["][^"]+["])|(?:['][^']+[']))`仅表示`QuotedString`. 我可以这样写吗？

**有没有一种简单的方法可以在另一个正则表达式文字中引用一个 Javascript 文字（例如“字符串”）？** 通过修改字符串指定正则表达式可能会起作用，但也似乎很尴尬且容易出错（例如，需要转义引号和转义转义）。

或者这已经是为什么人们基于语法创建解析器并移出正则表达式的典型代表？

# redirect - 每个国家/地区下的多个类别和子类别的 Cookie 重定向

> ID：12627891
> 
> 赞同：1
> 
> 时间：2012-09-27T18:30:55.543
> 
> 标签：redirect, cookies, categories, country

有人会告诉我如何为每个国家/地区下的多个类别和子类别设置 cookie 重定向吗？我正在为此寻找一个下拉菜单。谢谢你。

我在每个国家/地区下都有多个类别和子类别。一些子类别基于该国家/地区，而一些子类别共享相同的子类别。例如，

国家: 美国, 加拿大

mysite.com/news/localnews（内容基于位置）

mysite.com/health/medicine（分享内容）

如果我访问 mysite.com，选择“美国”并单击“新闻/本地新闻”，它将带我进入 mysite.com/news/localnews/us 页面。如果我退出然后返回 mysite.com 并单击“新闻/本地新闻”，它会自动将我重定向回 mysite.com/news/localnews/us 页面。

选择“美国”不会影响 mysite.com/health/medicine 页面，这意味着美国和加拿大的用户可以在没有 cookie 的情况下访问同一页面。

# google-maps - 如何从谷歌地图中删除气泡

> ID：12627894
> 
> 赞同：2
> 
> 时间：2012-09-27T18:31:09.637
> 
> 标签：google-maps

我做了一些搜索，似乎您需要删除路径的 iwloc 部分，但我在任何地方都找不到它！

```
<iframe width="725" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.uk/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=ightham&amp;aq=&amp;sll=51.223215,0.33516&amp;sspn=0.048003,0.132093&amp;gl=uk&amp;ie=UTF8&amp;hq=&amp;hnear=Ightham,+Kent,+United+Kingdom&amp;t=m&amp;z=14&amp;ll=51.287109,0.286445&amp;output=embed"></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T09:28:08.357

我认为`&iwloc=near`最后是你需要的。这个例子还表明你真的只需要邮政编码和放大倍数，即`z=10`

```
<iframe width="400" scrolling="no" height="300" frameborder="0" src="https://maps.google.co.uk/maps?hl=en&q=so21+1aj&z=10&output=embed&iwloc=near" marginwidth="0" marginheight="0"></iframe> 
```

检查这个[活的例子](http://www.iphonerepairwinchester.co.uk/iPhoneRepairHampshire.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:01:54.460

去除那个：

```
&q=ightham 
```

这为我消除了泡沫：

[https://maps.google.co.uk/maps?f=q&source=s_q&hl=en&geocode=&aq=&sll=51.223215,0.33516&sspn=0.048003,0.132093&gl=uk&ie=UTF8&hq=&hnear=Ightham,+Kent,+United+王国&t=m&z=14&ll=51.287109,0.286445&output=embed](https://maps.google.co.uk/maps?f=q&source=s_q&hl=en&geocode=&aq=&sll=51.223215,0.33516&sspn=0.048003,0.132093&gl=uk&ie=UTF8&hq=&hnear=Ightham,+Kent,+United+Kingdom&t=m&z=14&ll=51.287109,0.286445&output=embed)

# tsql - IF 或 CASE 或 WHILE LOOP。最好的方法是什么？

> ID：12627896
> 
> 赞同：0
> 
> 时间：2012-09-27T18:31:25.623
> 
> 标签：tsql

如果它大于 10，则将变量设置为 -1 并选择该变量输出。如果小于 10，则选择变量作为输出。

```
DECLARE @i INT
SET @i = 10 
SELECT @i = (@i * 10) 
```

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:37:44.153

不完全确定您在寻找什么。这有帮助吗？

```
declare @myResult int
select @myResult = case when @i > 10 then -1 else @i end 
print @myResult 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:38:24.200

您不能将一个为变量赋值的选择语句与一个返回数据的表达式结合起来......所以你需要两个语句......

```
Declare @I Integer = 4

Select @I = Case When @I > 10 Then -1 Else @I End
Select @I 
```

# spring - 在 Spring MVC 控制器中绑定数据的可能方式

> ID：12627900
> 
> 赞同：0
> 
> 时间：2012-09-27T18:31:36.793
> 
> 标签：spring, spring-mvc, spring-3

除了@RequestBody 和@ModelAttribute 之外，将数据绑定到Spring MVC 控制器的方法参数的可能方法是什么。我可以使用@Valid 绑定数据吗，实现代码如下。

```
@RequestMapping(value="/person", method = RequestMethod.POST)
public String createPerson(@Valid Person person, BindingResult bindingResult){
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:00:33.267

如果您要发布具有“person”模型属性的表单的 Person 模型，您可以这样做::

```
public View postUser(@ModelAttribute("person") @Valid Person, BindingResult result) 
```

# asp.net - 即使为 requiredfieldvalidator 启动验证，asp 验证摘要也不会显示

> ID：12627902
> 
> 赞同：1
> 
> 时间：2012-09-27T18:31:41.753
> 
> 标签：asp.net

要显示的验证摘要：

```
<asp:ValidationSummary ID="ValidationSummary1" DisplayMode="BulletList"  
 EnableClientScript="true" runat="server" ValidationGroup="downloadGrp" /> 
```

必填字段验证器：

```
<asp:UpdatePanel ID="UpdatePanel4" runat="server" UpdateMode="Conditional"> 
<ContentTemplate> 

    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" 
     ControlToValidate="txtReasonForDownload" 
     ValidationExpression="^[\s\S]{0,500}$" 
     ValidationGroup="downloadGrp" 
     ErrorMessage="Max. 500 characters allowed!" runat="server">
    </asp:RegularExpressionValidator><br /> 

    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
    ControlToValidate="txtReasonForDownload" EnableClientScript="false" 
    ErrorMessage="Reason is required!" ValidationGroup="downloadGrp" 
    SetFocusOnError="true" Text="*"></asp:RequiredFieldValidator> 

    <asp:Label ID="Label2" runat="server" CssClass="error" 
    Text="Reason for Download:"></asp:Label> 
    <asp:TextBox ID="TextBox1" runat="server" TextMode="MultiLine"
       ValidationGroup="downloadGrp" 
       Width="200px" MaxLength="500" Enabled="False"></asp:TextBox><br /> 

</ContentTemplate> 
```

后面的代码：

```
protected void btnSubmitDownload_Click(object sender, EventArgs e) 
{ 
    string str1 = txtReasonForDownload.Text; 
    if (str1.Equals(string.Empty)) 
    { 
         reqTxtReason.IsValid = false; 
     //Response.Write("<script> alert('Reason for Download is required!'); </script>");

     } else { } 
 } 
```

尽管启动了 requiredfieldvalidator，但验证摘要不显示验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:53:55.033

通过在另一个更新面板中包含验证摘要并使用与另一个更新面板相同的触发器来修复它

# javascript - jQuery - 检查这个元素是什么？

> ID：12627904
> 
> 赞同：0
> 
> 时间：2012-09-27T18:31:44.290
> 
> 标签：javascript, jquery, click, this

> **可能重复：**
> [jQuery 可以提供标签名称吗？](https://stackoverflow.com/questions/1532331/can-jquery-provide-the-tag-name)

我的代码：

```
 $('#tab-menu a,#tab-menu li').click(function(event) {
    event.preventDefault();
}); 
```

我需要它，以便我可以根据单击的内容执行不同的代码，例如

```
if(element == "li")
//do something
else
//do something else 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:32:46.623

使用[`.is()`](http://api.jquery.com/is/)：

```
$('#tab-menu a,#tab-menu li').click(function(event) {
    event.preventDefault();

    if ($(this).is("li"))
        // do something
    else
        // do something else
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:33:38.147

```
$('#tab-menu a,#tab-menu li').click(function(e) {
   if($(e.currentTarget).is('li')
     ...do stuff here
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T18:33:50.677

像这样的东西：

```
if(this.tagName == "LI")  //note the uppercase 
```

编辑：哦，是的，或者你可以使用`is()`. 但是，如果那是您使用的，请不要相信我。

# java - Spring注入一个单元素Set而不是一个空Set

> ID：12627905
> 
> 赞同：2
> 
> 时间：2012-09-27T18:31:50.307
> 
> 标签：java, spring

我们有一个应用程序，我们试图在`java.util.HashSet`一个`java.util.Set`本身是`@Component`. Spring 似乎注入了`HashSet`一个包含类型的元素。知道为什么 Spring 不只是注入一个空集吗？

**设置元素类：**

```
@Component
public class SetElement
{
    private String value;

    public String getValue()
    {
        return value;
    }
} 
```

**包含 Set 作为成员的类：**

```
@Component
public class MyClassWithSet
{
    @Autowired
    private Set<SetElement> setOfElements;

    protected void setStringSet(Set<SetElement> stringSet)
    {
        this.setOfElements = stringSet;
    }

    public Set<SetElement> getStringSet()
    {
        return Collections.unmodifiableSet(setOfElements);
    }
} 
```

**春天.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd 
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    ">

    <bean id="setOfElements" class="java.util.HashSet" />
    <context:component-scan base-package="com.vikdor.db " />
</beans> 
```

**示例测试用例以确认行为**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations =
{ "classpath:META-INF/spring.xml" })
public class SpringSetTest
{
    @Autowired
    private MyClassWithSet myClassWithSet;

    @Test
    public void test()
    {
        assertNotNull(myClassWithSet);
        assertNotNull(myClassWithSet.getStringSet());
        assertTrue(myClassWithSet.getStringSet().isEmpty());
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:55:06.483

如果`@Autowired`在类型化集合实例上使用，则应用程序上下文中满足该类型的所有 bean 都将被注入：

> 也可以通过将注释添加到需要该类型数组的字段或方法来从 ApplicationContext 提供特定类型的所有 bean [...] 这同样适用于类型化集合：

```
public class MovieRecommender {

  private Set<MovieCatalog> movieCatalogs;

  @Autowired
  public void setMovieCatalogs(Set<MovieCatalog> movieCatalogs) {
      this.movieCatalogs = movieCatalogs;
  }

  // ...
} 
```

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-autowired-annotation](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-autowired-annotation)

因此，您的单个实例`SetElement`被注入到`@Autowired Set<SetElement>`. 一个可能的解决方案是对该字段使用设置器。或者，您可以使用`@Qualifier`注解或`@Resource`注解按名称引用 bean。

# javascript - 为什么此序列化不返回 CHECKED 复选框

> ID：12627908
> 
> 赞同：1
> 
> 时间：2012-09-27T18:32:00.177
> 
> 标签：javascript, jquery

我有一个带有选中复选框的表单。它的序列化不会返回那些选中的复选框。这是我用来执行序列化的 jQuery 代码。

```
$('form.subscribe').serialize() 
```

上述序列化返回

```
email= 
```

这是标记：

```
<form class="subscribe">
<div class="body">
    <div class="email input">
        <input name="email" placeholder="your email address" />
    </div>
    <div class="expandable">
        <div class="fieldLabel emphasis">I am a:</div>
        <div class="checkbox">
            <input id="isDeveloper" type="checkbox" />
            <label for="isDeveloper">Developler<label> 
        </div>
        <div class="checkbox">
            <input id="isDesigner" type="checkbox" />
            <label for="isDesigner">Designer</label>
        </div>
        <div class="checkbox">
            <input id="isHR" type="checkbox" />
            <label for="isHR">Talent Coordinator</label>
        </div>
        <div class="checkbox">
            <input id="isPM" type="checkbox" />
            <label for="isPM">Project Manager</label>
        </div>
        <div class="fieldLabel emphasis">Email me about:</div>
        <div class="checkbox">
            <input id="wantsCollab" type="checkbox" checked="checked"/>
            <label for="wantsCollab">Collaboration</label>
        </div>
        <div class="checkbox">
            <input id="wantsBlog" type="checkbox" checked="checked" />
            <label for "wantsBlog">Blog Posts</label>
        </div>
    </div>
    <div class="button">
        <input class="emphasis" type="submit" value="subscribe">
    </div>
</div>
</form> 
```

如您所见，有 1 个文本输入和 6 个复选框。选中其中 2 个复选框，但序列化中仅返回文本输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:37:20.440

您的复选框没有名称属性，并且您的电子邮件输入没有指定类型。此外，您的表单没有指定任何操作或编码，您可能希望这些操作或编码用于优雅降级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T18:38:18.697

来自[jQuery 文档](http://api.jquery.com/serialize/)

> 注意：只有“成功的控件”被序列化为字符串。由于未使用按钮提交表单，因此没有序列化提交按钮值。对于要包含在序列化字符串中的表单元素的值，**该元素必须具有 name 属性**。来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。来自文件选择元素的数据未序列化。

# jquery - 使用带有 JQuery 对话框的 ClientScript.RegisterStartupScript

> ID：12627909
> 
> 赞同：1
> 
> 时间：2012-09-27T18:32:00.967
> 
> 标签：jquery, asp.net, jquery-ui-dialog, code-behind, clientscript

我在 aspx 代码中有以下方法，它后面显示一个 jquery 对话框。如果用户单击对话框上的“提交” ，此方法是否有可能返回**true ？**

```
 Sub DisplayDialog()
        Dim title As String = "title"
        Dim content As New StringBuilder()
        content.Append(@"<script type=text/javascript>
          $(function () {
           $('#dialog')
            .dialog({
            title: 'title',
            modal: 'true',
            buttons: {
                'Submit': function () { 
                },
                'Cancel': function () {
                    $(this)
                        .dialog('close');
                }
            }
        });
    });
</script>")
     ClientScript.RegisterStartupScript(Me.[GetType](), title, content.ToString())
    End Sub 
```

## **编辑：**

这是我所拥有的更完整的图片：

```
Sub GridView1_onRowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)
    Select Case e.CommandName
        Case "Upload"
            DisplayDialog()
            //Get result here from jquery dialog. Do something if result was true             
        Case "Something"
     End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:43:49.697

如果你想使用模态对话框的返回来执行一个动作，这是你应该遵循的模式：

```
<script type="text/javascript">
    $(function () {
        var $dialog = $("#dialog");
        var $foo = $("input:submit[id$=foo]");
        var confirmed = false;

        $dialog.hide();

        $dialog.dialog({
            width: "300px",
            modal: true,
            autoOpen: false,
            buttons: {
                OK: function (e) {
                    $dialog.dialog("close");
                    confirmed = true;
                    $foo.click();
                },
                Cancel: function (e) {
                    $dialog.dialog("close");
                    confirmed = false;
                }
            }
        });

        $foo.click(function (e) {
            if (!confirmed) {
                $dialog.dialog("open");
            }

            return confirmed;
        });
    });
</script>

    <div>
        <asp:Button Text="Submit" runat="server" ID="foo" OnClick="foo_Click" />
    </div>
    <div id="dialog">
        <asp:Label Text="Are u sure u wanna do it?" runat="server" />
    </div> 
```

基本上，您使用标志来指示按下了哪个按钮，并在单击按钮时返回该标志。

您可以获取此示例并对其进行调整以适合您的特定需求

[这是我的 GitHub 上的完整工作示例](https://github.com/jupaol/SO-Answers/blob/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/JQuery/jQueryUI/ModalDialog.aspx)

# windows-installer - 安装程序开发人员 VS 软件打包程序？

> ID：12627913
> 
> 赞同：0
> 
> 时间：2012-09-27T18:32:17.463
> 
> 标签：windows-installer, installshield

我对我的软件总监需要填补的工作感到困惑。我正在寻找使用 InstallShield 创建 MSI 安装程序的开发人员。我不断看到自称“软件打包员”的人的简历，但他们说他们编写了安装程序。如果经理看到标题“包装商”，他会说不。

有什么不同？

感谢您帮助解释这一点！这是一个学习曲线。凯蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T19:31:02.880

“打包者”通常是具有企业 IT 背景 (SysAdmin) 的人，他们已经学会了如何使用重新打包工具来创建 MSI。他可能还具有一些分发工具方面的经验，例如 SCCM 和使用 VBScript 和 PowerShell 编写脚本。也许还有一个 MCSE。此人倾向于在非科技公司的 IT 部门工作。

“开发人员”或“工程师”（或任何避免使用 package/packager 一词的人）通常在 SCCM 主体方面拥有更多背景，例如源代码控制、构建自动化、发布工程以及对安装程序的更详细了解。他们通常对 InstallShield、Windows Installer、Windows Installer XML 有更深入的了解，甚至可能具有 C、C++、VB、C# 或其他语言的开发背景。此人倾向于在软件开发组织中为科技公司工作。

这些是概括，可能不适合所有候选人。我实际上适合后者，但目前为前者工作。深入了解简历，看看技能和经验如何与我的描述相符。

否则，是的，我同意。如果他们称自己为“包装员”，我通常会跳过他们的简历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:05:44.797

如果您正在寻找为您的软件创建 MSI 安装包的人，那么经验丰富的“打包者”似乎是合适的人选。

“软件包”在 Linux 世界中是非常常见的概念，但由于某种原因在 Windows 用户中并不常见。`.MSI`是 Windows 使用的安装程序包文件格式。

MSI 包通常包含您的程序文件 + 基本上是一个带有许多关系链接表的数据库。数据库包含有关为了安装应用程序必须对目标计算机执行的操作的信息。很快 - 在哪里提取打包文件以及如何满足不同的依赖关系，以便安装的软件可以工作。

# c# - 使用多个提交按钮

> ID：12627916
> 
> 赞同：1
> 
> 时间：2012-09-27T18:32:35.923
> 
> 标签：c#, javascript, asp.net-mvc, submit

当我转到一个页面并单击我的一个按钮时，我目前遇到了一个问题，我得到一个页面无法显示的错误消息。我意识到这是因为我有多个提交按钮，当我点击一个按钮时，它不知道要启动什么。这是我目前拥有的按钮：

```
<button class="glossyBtn" type="submit" name="submitButton" value="@Html.Encode(Kids.Resources.Message.Ok)">
                            <img alt="" style="vertical-align: middle; margin-right:1px" src="@Url.Content("~/Content/blueprint/plugins/buttons/icons/tick.png")" />
                        <span style="vertical-align: middle">Ok</span> 
                            </button> 
```

这就是我的 .cshtml 页面中的内容：

```
 @using (Html.BeginForm("Manage", "Invoice"))
        {
            <fieldset id="contentView">
                <div class="row">

                    @Html.Raw(Html.DatePickerEnable())
                    <fieldset>

                        <span>@Kids.Resources.Entities.Billing.BillingStatus</span> @Html.EditorFor(m => m.BillingStatuses)
                        <br />
                    <div style="float:left; width:320px">
                        <span>Begin Date</span> @Html.EditorFor(m => m.BeginDate) @Html.ValidationMessageFor(m
                    => m.BeginDate)
                        <span>End Date</span> @Html.EditorFor(m => m.EndDate) @Html.ValidationMessageFor(m
                    => m.EndDate)
                     <div style="background-color: white;" class="bubble">@Html.ValidationSummary(true, Message.ValidationErrorSummary, new { @class = "error" })</div>
                    </div>
                    <button class="glossyBtn" type="submit" name="submitButton" value="@Html.Encode(Kids.Resources.Message.Ok)">
                            <img alt="" style="vertical-align: middle; margin-right:1px" src="@Url.Content("~/Content/blueprint/plugins/buttons/icons/tick.png")" />
                        <span style="vertical-align: middle">Ok</span> 
                            </button>
                    </fieldset>

                </div>

@if (Model.Invoices != null)
                {
                    <div class="row">
                        @Html.Grid(Model.Invoices).Attributes(id => "Invoices").Columns(column =>
                                        {
                                            column.For(i => i.CanAddItems ? string.Format(
                                                "<a class='noStyle' href='{0}' title='Edit'><img src='{1}'/></a>",
                                                Url.Action("Prepare", "Invoice", new { invoiceId = i.InvoiceId }),
                                                Url.Content("~/Content/images/pencilEdit.png")) : string.Empty).Sortable(false).Encode(false);
                                            column.For(i => i.CanPay ? string.Format(
                                                "<a class='noStyle' href='{0}' title='Pay'><img class='pic' src='{1}'/></a>",
                                                Url.Action("Pay", "Invoice", new { invoiceId = i.InvoiceId }),
                                                Url.Content("~/Content/images/moneySign.png")) : string.Empty).Sortable(false).Encode(false);
                                            column.For(i => i.CanVoid ? string.Format(
                                                "<a class='noStyle' href='{0}' title='Void'><img class='pic' src='{1}'/></a>",
                                                Url.Action("Void", "Invoice", new { invoiceId = i.InvoiceId }),
                                                Url.Content("~/Content/images/newVoid.png")) : string.Empty).Sortable(false).Encode(false);
                                            if (Kids.Common.KidsSettings.Settings.SubmissionInvoice)
                                            {
                                                column.For(i => i.CanSubmit ? string.Format(
                                                "<a class='noStyle' href='{0}' title='{2}'><img class='pic' src='{1}'/></a>",
                                                Url.Action("Files", "PaymentVoucherFile", new { invoiceId = i.InvoiceId }),
                                                Url.Content("~/Content/images/newVoucher.png"), Kids.Resources.Ocr.PaymentVoucherFile) : string.Empty).Sortable(false).Encode(false);
                                            }
                                        }).Empty(string.Format("No {0}", Kids.Resources.Entities.Billing.Invoices)).Sort(Model.GridSortOptions)
                        <p /> 
```

我浏览了整个网站，发现似乎工作量太大了。有没有什么简单的事情我可以在同一个页面上做，比如 javascript 或其他东西，而不是对两个或三个文件进行更改。

Prepare - Pay - Void 也是包含相同结构和相同提交按钮的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:13:05.800

If you have many submit buttons for different forms then in javascript use something like this:

var form = $(document.forms['formName']) // or use indexes like $(document.forms[0]

then form.submit(); those buttons will require onclick actions and type='button'

Hope this helps

# opencv - OpenCV 2.4 复制到函数

> ID：12627926
> 
> 赞同：1
> 
> 时间：2012-09-27T18:33:19.693
> 
> 标签：opencv

使用 OpenCV 2.4.2 C/C++

我正在尝试使用 copyTo 函数将二进制 CV_8UC1 图像添加到 RGB CV_8UC3 图像。但是，每当我这样做时，它似乎都会使程序崩溃。我假设通道数量的差异不允许我添加它们。是否有某种类型的转换可以让我使用这个 copyTo 函数？我正在并排拼接一个带有阈值图像的相机馈送。

我正在使用 src.copyTo(dst(Rect(x,y,w,h))); 作为复制代码， inRange(src,Scalar(#,#,#),Scalar(#,#,#),dst) 作为阈值操作。

我尝试使用 convertTo 函数，但运气不佳。谁能给点建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:16:29.583

您应该使用 cv::cvtColor 函数，它可以从一种颜色空间转换为另一种颜色空间。[在这里](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor)查看详细信息。

# c# - 如何将依赖项注入扩展方法？

> ID：12627928
> 
> 赞同：1
> 
> 时间：2012-09-27T18:33:32.813
> 
> 标签：c#, dependency-injection, extension-methods

我目前正在使用 C# 处理 ASP.NET MVC 4 项目。

我想创建一个扩展方法，它接受各种类型的方法，将这些方法包装在 a`try/catch`中，然后如果调用成功则返回方法调用的结果。

这是我到目前为止所拥有的：

```
 public static object HandleServerError(this object obj)
        {
            object result = null;
            try
            {
                result = obj;
            }
            catch (Exception ex)
            {
                ErrorHandlers.ThrowServerErrorException(ex);
            }

            return result;
        } 
```

下面是一个正在使用的扩展方法的例子：

```
var test = webClient.DownloadString(uri).HandleServerError().ToString(); 
```

这工作正常，但该`webClient.DownloadString(uri)`部分被执行，然后作为一个字符串传入`HandleServerError`，这不是我想要的。

我想要做的是`webClient.DownloadString(uri)`注入扩展方法，以便将实际的方法调用包装到 try/catch 中。

## 请注意

我意识到有反对 try/catch 语句的论点，但不打算就这个主题展开辩论——这个问题的核心集中在依赖注入问题上。感谢所有的答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:39:31.827

你需要做的是传递一个委托。 `Func`在这里会有意义：

```
public static T HandleServerError<T>(Func<T> func)
{
    T result = default(T);
    try
    {
        result = func();
    }
    catch (Exception ex)
    {
        ErrorHandlers.ThrowServerErrorException(ex);
    }

    return result;
} 
```

然后你可以这样称呼它：

```
int test = HandleServerError(() => 0); 
```

或者

```
string test = HandleServerError(webClient.DownloadString(uri)); 
```

（您仍然可以将其保留为扩展方法，但我认为它更有意义，并且更容易用作非扩展方法。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:42:10.140

我唯一能想到的是：

```
public static T HandleServerError<T>(this Func<T> action) 
{ 
    T result = default(T);
    try
    {
        result = (T)action();
    }
    catch (Exception ex)
    {
        ErrorHandlers.ThrowServerErrorException(ex);
    }

    return result;
} 
```

然后你可以这样称呼它：

```
var test = new () => { return WebClient.DownloadString(uri); }.HandleServerError().ToString(); 
```

唯一的问题是您最终可能会遇到很多这样的需求，以便您可以处理所有不同类型的需求，但可能没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:48:32.110

您需要为回调（a `Func<T>`）创建扩展方法，而不是对象。

像这样的东西：

```
static class FuncExtensions  {
    public static T HandleServerError<T>(this Func<T> func) {
        T result = default(T);
        try {
            result = func();
        }
        catch (Exception ex) {
            // Handle exception here.
        }
        return result;
    }
} 
```

在使用中，它看起来像这样：

```
new Func<string>(() => webClient.DownloadString(uri)).HandleServerError(); 
```

但是，使用常规方法调用可能比扩展方法更好地实现整个事情。

# iphone - XCode4 - 如何仅更改目录文件夹名称

> ID：12627929
> 
> 赞同：1
> 
> 时间：2012-09-27T18:33:33.130
> 
> 标签：iphone, xcode4, directory

在 XCode 4 中创建名为 My_Project 的项目时，创建的默认文件夹包含一个具有相同名称的子文件夹，其中包含所有标题、plist 等。我不希望我的项目具有嵌套文件夹相同名称（例如 My_Project -> MyProject）。

如何将目录名称从“My_Project”更改为“My_Project_Source”。我在重命名整个项目时发现了很多，但我只想将该文件夹名称更改为更具描述性的名称。

当试图解决这个问题时，我重命名了文件夹并更新了引用。编译器仍在默认目录名称“My_Project”中查找 info.plist 等。构建设置中一定有我遗漏的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:46:51.660

检查目标构建设置中的项目，如下图所示：

![在此处输入图像描述](../Images/d9b10548e1006404211ca774e1d51aeb.png)

例如，如果我将文件夹从 重命名`XML Signature Finagler`为`srcFolder`，我需要将`Info.plist File`设置更改为`srcFolder/XML Signature Finagler-Info.plist`。同样，Prefix Header 路径也需要更新。

# jquery - 如何加载 jQuery 模板

> ID：12627933
> 
> 赞同：0
> 
> 时间：2012-09-27T18:33:46.447
> 
> 标签：jquery, asp.net, jquery-ui

每次我尝试加载我的 jQuery 模板时，我都会遇到同样的错误。在准备好文档时，我将项目列表作为 json 列表，并成功运行此代码：

```
 function add(result) {
            var panel = $('#MainContent_Panel1');
            for (var k = 0; k < result.d.length; k++) {
                $("#template").tmpl(result.d[k]).appendTo("#MainContent_Panel1");

            }

        } 
```

这是我的模板：

```
 <script id="template" type="text/x-jquery-tmpl"​​​​​​​​​​​​​​​​ >

        <div id ="myID" style="background-color: red">
        <span questionLabelGroup="$i">Question : ${Uid}</span>
        <span questionTextGroup="$i">Hello ${Content}<br /></span>
        <span answerLabelGroup="$i">Answer : </span>
        <input  type='text' questionID="$guid"/>
        <input type='button' Class='addAnswerButton' addQuestionButtonGroup='"$i"' value='Add Question' />
        <hr />
        </div>

        </script> 
```

我不断收到此错误：TypeError: $("#template").tmpl is not a function。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:36:46.057

听起来可能没有加载 jquery 模板插件。您是否包含加载插件的脚本标签？如果是这样，它是否在您的示例中的代码片段被执行之前被加载？

# ios - iOS 目录，可在编译和运行时写入

> ID：12627935
> 
> 赞同：0
> 
> 时间：2012-09-27T18:34:21.430
> 
> 标签：ios, cocoa-touch

我正在使用 iOS5 的部署目标进行编程。

是否有一些**目录**，我可以在编译时放入一些**静态文件并在运行时写入同一个目录**？恕我直言，主目录在运行时不可写。（沙盒？）目前我使用的运行时写入`NSTemporaryDirectory()`，在编译时无法访问..

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:02:17.730

答案是不。您将文件放在捆绑包中，稍后您可以将它们复制到另一个文件夹。我相信（但尚未测试）如果它们很大并且您不想创建两个文件，您也可以创建指向它们的链接。如果您这样做，您需要考虑更新应用程序时会发生什么。

# recursion - 通过递归函数 (Ocaml) 交错两个列表

> ID：12627936
> 
> 赞同：3
> 
> 时间：2012-09-27T18:34:26.110
> 
> 标签：recursion, ocaml

我在这里面临着相当大的挑战，希望您能提供一点帮助。

我已经尝试和搜索了很多，但没有成功。

这是问题所在：

两个列表

```
List1 : [a1; a2; ...; an]
List2 : [b1; b2; ...; bn] 
```

返回两个列表的所有可能的交错列表的函数是什么，尊重每个列表中的顺序。

例如 ：

```
myFunction [1; 2] ['a'; 'b'; 'c'] = [ 
    [1; 2; 'a'; 'b'; 'c']; 
    [1; 'a'; 2; 'b'; 'c']; 
    [1; 'a'; 'b'; 2; 'c']; 
    [1; 'a'; 'b'; 'c'; 2]; 
    ['a'; 1; 2; 'b'; 'c']; 
    ['a'; 1; 'b'; 2; 'c']; 
    ['a'; 1; 'b'; 'c'; 2]; 
    ['a'; 'b'; 1; 2; 'c']; 
    ['a'; 'b'; 1; 'c'; 2]; 
    ['a'; 'b'; 'c'; 1; 2] 
] 
```

对于那些已经注意到的人，它基本上是在考虑 2 个并发程序，以及 2 个程序启动时所有可能的执行（1 总是在 2 之前，a 总是在 b 之前和 c 之前，否则，所有交错都是可能的）

我希望我很清楚，并且您可以帮助我。

十分感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:55:41.540

既然是作业，这里有一些提示：

1）。该函数将采用两个相同类型的列表`'a list`并返回一个`'a list list`.

```
val interleave: 'a list -> 'a list -> 'a list list 
```

2）。如果一个列表为空，则结果是由另一个列表组成的单例列表。
3）。假设您想`interleave`在两个非空列表`x::xs`和`y::ys`. 有两种交织。第一种`x`作为结果列表的头部，您可以将其放入`x`任何从`interleave xs (y::ys)`. 第二种具有`y`作为新的头，您可以预先`y`添加到从 获取的任何列表中`interleave (x::xs) ys`。

有了这些提示，我认为您可以创建一个带有一些模式匹配案例的递归函数来解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T00:11:06.040

```
(* Each interleaving of non-empty lists lst1 = [x1; x2; ...; xm]
   and lst2 = [y1; y2; ...; yn] begins either with x1 or with y1.
   Thus we may get all the interleavings as follows:

   1\. Compute all interleavings of [x2; ...; xm] and [y1; ...; yn]
      and prepend x1 to each one of them.

   2\. Compute all interleavings of [x1; ...; xm] and [y2; ...; yn]
      and prepend y1 to each one of them.

   Append the lists obtained in steps 1 and 2 to get all possible
   interleavings. The border cases is when either one of the lists
   is empty, but that is easy to figure out. Here is the corresponding
   code.
*)

let rec interleave lst1 lst2 =
  match lst1, lst2 with
    | [], ys -> [ys]
    | xs, [] -> [xs]
    | x :: xs, y :: ys ->
        (List.map (fun zs -> x :: zs) (interleave xs (y::ys))) @
        (List.map (fun zs -> y :: zs) (interleave (x::xs) ys)) 
```

测试用例：

```
# interleave [1;2] [100;200;300] ;;
- : int list list =
[[1; 2; 100; 200; 300]; [1; 100; 2; 200; 300]; [1; 100; 200; 2; 300];
[1; 100; 200; 300; 2]; [100; 1; 2; 200; 300]; [100; 1; 200; 2; 300];
[100; 1; 200; 300; 2]; [100; 200; 1; 2; 300]; [100; 200; 1; 300; 2];
[100; 200; 300; 1; 2]] 
```

注意：在 Ocaml 中，列表是单态的，所以我们不能像问题中所建议的那样交错字符串和整数。或者换一种说法，因为我们必须使用 sum 类型。

# css - 我应该使用 -ms 前缀吗？

> ID：12627942
> 
> 赞同：1
> 
> 时间：2012-09-27T18:34:52.533
> 
> 标签：css, internet-explorer-8, vendor-prefix

> Windows Internet Explorer 8。-ms-accelerator 属性是 CSS 的扩展，可用作 IE8 标准模式下加速器的同义词。

此文本来自 MSDN 参考。

我不确定，`-ms`在这种情况下我是否应该使用供应商。

`Can be used as a synonym`- 他们的意思是我可以省略供应商前缀，还是应该用于 ie8？

这个问题不仅仅针对`accelerator`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:15:37.610

`-ms-`只是三叉戟的前缀。就像`-webkit-`webkit、`-moz-`gecko 等等。它只是用于试用实验功能。

# java - MapActivity 强制关闭，Touch 事件鲁莽触发

> ID：12627946
> 
> 赞同：0
> 
> 时间：2012-09-27T18:35:01.753
> 
> 标签：java, android, google-maps, android-mapview, touch-event

我有一个具有触摸事件的 MapActivity。

在触摸事件中：

*   我得到了当前的地理编码

*   在该位置放置叠加图像。

*   并将其设置为地图视图的中心。

这似乎工作正常，并且在一段时间内符合预期。但随后应用力关闭。我认为即使没有任何东西被触摸，触摸事件也会像疯了一样被触发。我知道这一点，因为我已经设置了一个显示触摸位置的经度和纬度的吐司。即使没有触摸它也会不断出现。

我似乎无法准确定位问题，更不用说修复它了。这是我的 mapActivity 的触摸事件

```
private void LocationStuffs(double latitude, double longitude){
    itemizedOverlay.clear();
    itemizedOverlay.addOverlayItem((int)latitude, (int)longitude, "place"); 
    mapView.invalidate();
    mapView.getOverlays().add(itemizedOverlay);
    MapController mc = mapView.getController();
    mc.setCenter(new GeoPoint((int)latitude, (int)longitude)); 
    mc.setZoom(20);
}

public boolean onTouchEvent(MotionEvent event, MapView mapView){
        //---when user lifts his finger---
        if (event.getAction() == 1) {
            GeoPoint p = mapView.getProjection().fromPixels(
                    (int) event.getX(),
                    (int) event.getY());
            Toast.makeText(getBaseContext(),
                    p.getLatitudeE6() / 1E6 + "," +
                            p.getLongitudeE6() /1E6 ,
                            Toast.LENGTH_SHORT).show();
            latitude = p.getLatitudeE6() / 1E6;
            longitude = p.getLongitudeE6() / 1E6;
            LocationStuffs(latitude*1E6, longitude*1E6);
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:52:39.383

更改您的 return 语句以返回 true：

```
return true; 
```

基本上，它的作用是告诉系统您已经处理了触摸事件。让我知道这是否解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:54:27.440

我相信您的代码中几乎没有错误：

1-在关闭“onTouchEvent”方法中的“if”语句之前，您需要一个“return true”语句。这告诉系统该事件已被处理并且应该被使用。这可能是多次触摸的原因。

2-“mapView.invalidate();” 应该移到“LocationStuffs”方法的末尾，因为您希望在添加新位置之后而不是之前重绘屏幕。

3-您正在向地图视图重复添加相同的 itemizedOverlay。在调用您的“LocationStuffs”方法 10 次后，您将在叠加列表中添加 10 次相同的叠加。您应该只在此方法之外添加 Itemizedoverlay 一次（例如在 onCreate 或 onResume 上）

祝你好运

# cordova - Phonegap - 从远程 url 更新文件

> ID：12627948
> 
> 赞同：1
> 
> 时间：2012-09-27T18:35:13.250
> 
> 标签：cordova

我想更新放在 www 目录中的图像，例如：

```
assets/www/img1.png
assets/www/img2.png 
```

基本上我已经有一堆图像，我想从我的服务器中提取图像并覆盖现有的图像。[我在这里](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html)阅读 phonegap 指南，但不幸的是我自己无法弄清楚。有人可以帮我解决这个问题吗？

```
var imgNames = ["www.foo.com/img1.png","www.foo.com/img2.png"];
for(var i=0; i < imgNames .length; i++){
    toDlPath = imgNames[i].substring(imgNames[i].lastIndexOf("/") +1); //e.g. img1.png
    ft = new FileTransfer();
    ft.download(imgNames[i], dlPath, function(e){
        console.log("Successful download of "+e.fullPath);
    }, function(e){
           console.log("error while saving img:");
           console.log(e);
    });
} 
```

我尝试使用 FileTransfer，但收到此错误（在 Android 上测试）：

```
09-28 14:32:14.437: E/FileTransfer(11017): {"target":"img1.png","source":"http:\/\/foo.com\/img1.png","code":1}
09-28 14:32:14.437: E/FileTransfer(11017): java.io.FileNotFoundException
09-28 14:32:14.437: E/FileTransfer(11017):  at org.apache.cordova.FileTransfer.getFileFromPath(FileTransfer.java:556)
09-28 14:32:14.437: E/FileTransfer(11017):  at org.apache.cordova.FileTransfer.download(FileTransfer.java:444)
09-28 14:32:14.437: E/FileTransfer(11017):  at org.apache.cordova.FileTransfer.execute(FileTransfer.java:88)
09-28 14:32:14.437: E/FileTransfer(11017):  at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:186)
09-28 14:32:14.437: E/FileTransfer(11017):  at java.lang.Thread.run(Thread.java:856) 
```

Phonegap 1.8.1 版

确实感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:39:37.443

好吧，最终我没有将图像文件直接保存到手机，而是将图像转换为 Base64 字符串并将其保存到数据库中，然后从那里加载图片。

谢谢[Base64Coder](http://www.source-code.biz/base64coder/java)。

# python - Python，覆盖__getstate__() 和 __setstate__()

> ID：12627949
> 
> 赞同：19
> 
> 时间：2012-09-27T18:35:17.150
> 
> 标签：python

我有这些课程：

```
class Family(object):
    __slot__ = ['father', 'var1']
    def __init__(self, father, var1 = 1):
        self.father, self.var1 = father var1

class Father(object):
    __slots__ = ['var2']
    def __init__(self, var2 = ''):
        self.var2 = var2

father = Father()
family = Family(father = father) 
```

我想腌制“家庭”对象。所以我需要覆盖`__getstate__`和`__setstate__` “家庭”和“父亲”类。

你能告诉我一个有效的方法吗？（我使用的原因`__slots__`是因为我有很多对象并且我正在尝试节省内存）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T19:27:24.367

[`__getstate__`](http://docs.python.org/library/pickle.html#object.__getstate__)应该返回一个具有足够信息来重建实例的可腌制对象（例如元组）。

[`__setstate__`](http://docs.python.org/library/pickle.html#object.__setstate__)应该期望接收相同的对象，并使用它来重新配置实例。

例如：

```
import cPickle as pickle

class Family(object):
    __slots__ = ['father', 'var1']
    def __init__(self, father, var1 = 1):
        self.father, self.var1 = father, var1
    def __getstate__(self):
        return self.father, self.var1
    def __setstate__(self, state):
        self.father, self.var1 = state

foo = Family('father',1)
foo.var1 = 2
foo_pickled = pickle.dumps(foo)
foo2 = pickle.loads(foo_pickled)
print(repr(foo2))
# <__main__.Family object at 0xb77037ec>

print(foo2.var1)
# 2 
```

# c# - TFS 2010 API - 在 workspace.Merge() 状态为 NoActionNeeded 之后

> ID：12627953
> 
> 赞同：1
> 
> 时间：2012-09-27T18:35:31.783
> 
> 标签：c#, tfs-sdk

我写了一个小工具来以编程方式合并多个分支。我使用以下代码：

```
 var candidates = _server.GetMergeCandidates(sourcePath, targetPath, RecursionType.Full);
    foreach (var c in candidates)
    {
        var changeset = new ChangesetVersionSpec(c.Changeset.ChangesetId);
        var status = _workspace.Merge(sourcePath, targetPath, changeset, changeset);
        if (!status.NoActionNeeded)
        {
            ...
        }
    } 
```

我得到了正确的合并候选人，但每个人的状态都是 NoActionNeeded。当我手动合并时，更改显示为挂起的更改。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:57:59.820

在我自己的一个工具中，我做了一个非常相似的操作：

```
_workspace.Merge(sourcePath, targetPath, null, null, LockLevel.None, RecursionType.Full, MergeOptionsEx.None) 
```

这在“最新”的立场上运作。

# css - 有没有办法将单个子元素从灵活的盒子中分离出来？

> ID：12627957
> 
> 赞同：2
> 
> 时间：2012-09-27T18:35:56.917
> 
> 标签：css, flexbox

场景：我有一个`div#wrapper`带有以下css的元素：

```
div#wrapper {
    display: box;
    box-orient: horizontal;
    width: 100%;
} 
```

这个包装器包含三个子`<section>`元素，为了清楚起见，我们将它们称为 Sections A、B 和 C。所以这给我留下了这样的东西： ![部分的标准布局](../Images/5adc77cc18e2321c29f163526655a169.png)

美丽的。问题是：我现在正在处理媒体查询，并且需要在 < 800px 时更改此布局。具体来说，我需要将 B 部分移动到 A 和 C 部分下方并使其全宽。这是一张有助于解释的图表： ![在此处输入图像描述](../Images/440bc4fea884cab4d90fd9acf25b87c9.png)

问题：是否可以将单个子元素从其灵活的盒子中分离出来并以这种方式改变布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:46:13.910

flexbox 规范不断变化，根据当前的建议，您可以使用带有[row wrapping的](http://www.w3.org/TR/css3-flexbox/#flex-flow)[flex 容器](http://www.w3.org/TR/css3-flexbox/#flex-container)，设置部分宽度，以便其中只有两个适合包装器，并使用[order](http://www.w3.org/TR/css3-flexbox/#order)将部分 b 放在末尾：

[http://jsfiddle.net/LYnRf/](http://jsfiddle.net/LYnRf/)（在 Windows 上使用 Chrome 22 测试）

# ruby-on-rails - 在 Rails 中选择 Box 对表格进行排序

> ID：12627961
> 
> 赞同：0
> 
> 时间：2012-09-27T18:36:34.030
> 
> 标签：ruby-on-rails, select, drop-down-menu

我对 Rails 世界还很陌生，我已经被这个问题困住了一段时间。我正在为我的框架使用 Twitter Bootstrap，并且我正在尝试构建一个基本网站，其中包含一个由选择框排序/过滤的表格。我已经创建了表格，但我无法获得一个选择框来过滤它。我尝试了几件事，包括不能正常工作的 DataTables gem。我不知道我需要使用什么才能完成这项工作。

如果您可以引导我浏览一个基本网站，其中包含一个由选择框排序/过滤的表格，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T18:36:12.337

我按照本教程解决了这个问题，但是我必须进行一些更改才能使其对我有用，因为我想要选择框。 [http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)

这是我的新代码：

**index.html.erb**

```
 <form class="form-inline"
    <p>
    <select name="state_search" class="span2">
      <option value="">Select a State</option>
      <option>----------------</option>
      <option>LA</option>
      <option>MS</option>
      <option>TX</option>
    </select>
    <select name="city_search" class="span2">
      <option value="">Select a City</option>
      <option>----------------</option>
      <option>Mandeville</option>
      <option>Covington</option>
    </select>
    <button type="submit" class="btn">GO</button>
    </p>
  </form>
  <table class="table table-striped table-bordered span8 table-condensed"     
   id="articles_table" >
    <thead class="header">
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Created_At</th>
      </tr>
    </thead>
    <tbody>
      <%= render @articles %>
    </tbody> 
```

**_article.html.erb**

```
<tr>
  <td> <%= article_counter +1 %> </td>
  <td> <%= article.Title %> </td>
  <td> <%= article.Description %> </td>
  <td> <%= article.Created_At %> </td>
</tr> 
```

**文章控制器.rb**

```
def index
  @articles = Article.state_search(params[:state_search]).city_search(params[:city_search]).page(params[:page]).limit(50).order('Created_At DESC')
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @articles }
      format.js
    end
  end 
```

**文章.rb**

```
def self.city_search(city_search)
    if city_search
      where('City LIKE ?', "%#{city_search}%")
    else
      scoped
    end
end
def self.state_search(state_search)
    if state_search
      where('State LIKE ?', "%#{state_search}%")
    else
      scoped
    end
end 
```

因此，首先，我创建了表格，其内容由部分呈现，就像在剧集中一样。然后我创建了两个选择框并给它们命名。一个是 state_search，另一个是 city_search。然后，我进入了articles.rb 并定义了这些名称。这与 railscasts 情节中的相同，只是我用我的名字替换了名字。接下来，我进入了articles_controller.rb 并将两个搜索添加到其中，就像在railscasts 集中一样。之后，两个选择框完美地工作并排序/过滤了表格。

谢谢

# javascript - 来自 Cloudfront 的 Gzipped Javascript（S3 来源）

> ID：12627962
> 
> 赞同：2
> 
> 时间：2012-09-27T18:36:35.230
> 
> 标签：javascript, google-chrome, gzip, amazon-cloudfront

我已经看到这个问题被问遍了，但找不到任何可以解决我的问题的东西。我已经压缩（YUI 压缩器）我的 javascript 文件，将其上传到 s3，并带有此处建议的标题： [http ://blog.kenweiner.com/2009/08/serving-gzipped-javascript-files-from.html](http://blog.kenweiner.com/2009/08/serving-gzipped-javascript-files-from.html)

使用建议的 gzipcheck.js.jgz 将“gzipenabled”设置为 true 来决定是否加载 gzip 压缩的内容；但在大多数浏览器中，当加载 gzipped javascript 时，我仍然会遇到非法字符错误。

它充满了：u��Q �^[J�ta�Є����7������t��������</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:19:16.980

将“Content-Type: application/x-gzip”更改为“Content-Type: application/x-javascript”解决了这个问题。

# c++ - 使用 Boost.Spirit 在 C++ 中解析 SQL 查询

> ID：12627963
> 
> 赞同：7
> 
> 时间：2012-09-27T18:36:35.650
> 
> 标签：c++, sql, parsing, boost-spirit

我创建了一个数据库引擎，我可以在其中创建和修改表，并将它们添加到数据库中。为了解析 SQL 查询，我使用 EBNF 形式实现了 Boost.Spirit 库。我正确设置了解析器，它成功解析了每条规则。

我的问题是我现在不知道如何将两者结合起来。Boost.Spirit 解析器仅验证输入是否正确，但我需要它来实际*执行*某些操作。我查找了语义操作，但它们似乎无法处理我正在寻找的内容。

例如，如果我有如下查询：
`new_table <- SELECT (id < 5) old_table;`

我希望它使用规则验证输入，然后调用函数
`Table Database::Select(Table t , Condition c){ ... }`
并将标记作为参数传递。

如何集成解析器？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T22:46:15.643

> 注意：出于演示目的，我选择在这里发明一个示例语法，因为您的问题没有显示您的问题。使用这里推荐的方法，在解析后编写一个函数来执行查询应该不难。

我真的建议构建一个解析树。

我会推荐属性传播优先于语义动作。参见例如

*   [Boost Spirit：“语义行为是邪恶的”？](https://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil)

Spirit 中的属性传播规则非常灵活。默认公开的属性类型在每个 Parser 的文档中都有很好的记录

*   [http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference.html](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference.html)

例如 -`qi::char_`会导致`boost::optional<char>`并且`qi::double_ | qi::int_`会导致`boost::variant<double, int>`.

您可能希望在您自己发明的 AST 数据类型中累积已解析的元素，例如：

```
struct SelectStatement
{
    std::vector<std::string> columns, fromtables; 
    std::string whereclause; // TODO model as a vector<WhereCondition> :) 

    friend std::ostream& operator<<(std::ostream& os, SelectStatement const& ss)
    {
        return os << "SELECT [" << ss.columns.size() << " columns] from [" << ss.fromtables.size() << " tables]\nWHERE " + ss.whereclause;
    }
}; 
```

您可以通过将结构调整为融合序列来使其适应 Spirits 属性传播机制：

```
BOOST_FUSION_ADAPT_STRUCT(SelectStatement, 
        (std::vector<std::string>, columns)
        (std::vector<std::string>, fromtables)
        (std::string, whereclause)
       ) 
```

现在您可以将以下规则解析为该类型：

```
sqlident = lexeme [ alpha >> *alnum ]; // table or column name

columns  = no_case [ "select" ] >> (sqlident % ',');
tables   = no_case [ "from" ]   >> (sqlident % ',');

start    = columns >> tables 
    >> no_case [ "where" ]
    >> lexeme [ +(char_ - ';') ]
    >> ';'; 
```

您可以在此处***实时查看此代码***：http : [//liveworkspace.org/code/0b525234dbce22cbd8becd69f84065c1](http://liveworkspace.org/code/0b525234dbce22cbd8becd69f84065c1)

完整的演示代码：

```
// #define BOOST_SPIRIT_DEBUG
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>

namespace qi    = boost::spirit::qi;

struct SelectStatement
{
    std::vector<std::string> columns, fromtables; 
    std::string whereclause; // TODO model as a vector<WhereCondition> :) 

    friend std::ostream& operator<<(std::ostream& os, SelectStatement const& ss)
    {
        return os << "SELECT [" << ss.columns.size() << " columns] from [" << ss.fromtables.size() << " tables]\nWHERE " + ss.whereclause;
    }
};

BOOST_FUSION_ADAPT_STRUCT(SelectStatement, 
        (std::vector<std::string>, columns)
        (std::vector<std::string>, fromtables)
        (std::string, whereclause)
       )

template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, SelectStatement(), Skipper>
{
    parser() : parser::base_type(start)
    {
        using namespace qi;

        sqlident = lexeme [ alpha >> *alnum ]; // table or column name

        columns  = no_case [ "select" ] >> (sqlident % ',');
        tables   = no_case [ "from" ]   >> (sqlident % ',');

        start    = columns >> tables 
            >> no_case [ "where" ]
            >> lexeme [ +(char_ - ';') ]
            >> ';';

        BOOST_SPIRIT_DEBUG_NODE(start);
        BOOST_SPIRIT_DEBUG_NODE(sqlident);
        BOOST_SPIRIT_DEBUG_NODE(columns);
        BOOST_SPIRIT_DEBUG_NODE(tables);
    }

  private:
    qi::rule<It, std::string()             , Skipper> sqlident;
    qi::rule<It, std::vector<std::string>(), Skipper> columns  , tables;
    qi::rule<It, SelectStatement()         , Skipper> start;
};

template <typename C, typename Skipper>
    bool doParse(const C& input, const Skipper& skipper)
{
    auto f(std::begin(input)), l(std::end(input));

    parser<decltype(f), Skipper> p;
    SelectStatement query;

    try
    {
        bool ok = qi::phrase_parse(f,l,p,skipper,query);
        if (ok)   
        {
            std::cout << "parse success\n";
            std::cout << "query: " << query << "\n";
        }
        else      std::cerr << "parse failed: '" << std::string(f,l) << "'\n";

        if (f!=l) std::cerr << "trailing unparsed: '" << std::string(f,l) << "'\n";
        return ok;
    } catch(const qi::expectation_failure<decltype(f)>& e)
    {
        std::string frag(e.first, e.last);
        std::cerr << e.what() << "'" << frag << "'\n";
    }

    return false;
}

int main()
{
    const std::string input = "select id, name, price from books, authors where books.author_id = authors.id;";
    bool ok = doParse(input, qi::space);

    return ok? 0 : 255;
} 
```

将打印输出：

```
parse success
query: SELECT [3 columns] from [2 tables]
WHERE books.author_id = authors.id 
```

# c# - XmlDocument 从谷歌分析到平面文件 c#

> ID：12627965
> 
> 赞同：0
> 
> 时间：2012-09-27T18:36:46.413
> 
> 标签：c#, xmldocument, google-analytics-api

使用 C#，我从 Google Analytics Data API 中提取了数据，并将其保存在 xmldocument 中。从那时起，我想将其导出为平面文件格式（txt 文件）。我正在尝试使用 xmlnode 类在“条目”元素中写出元素属性值，但不能这样做。下面的 XML 代码：

```
<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:dxp="http://schemas.google.com/analytics/2009" xmlns:openSearch="http://a9.com/-    /spec/opensearch/1.1/">
  <id>https://www.googleapis.com/analytics/v2.4/data?ids=ga:xxxxxxxxx&amp;dimensions=ga:date,ga:hostname&amp;metrics=ga:visits,ga:newVisits,ga:visitBounceRate,ga:transactions,ga:transactionRevenue,ga:itemQuantity&amp;start-date=2012-09-20&amp;end-date=2012-09-26&amp;start-index=1&amp;max-results=1000</id>
  <updated>2012-09-27T08:08:53.621Z</updated>
  <title type="text">Google Analytics Data for Profile xxxxxxxxx</title>
  <link rel="self" type="application/atom+xml" href="https://www.googleapis.com/analytics/v2.4/data?ids=ga:xxxxxxxxx&amp;dimensions=ga:date,ga:hostname&amp;metrics=ga:visits,ga:newVisits,ga:visitBounceRate,ga:transactions,ga:transactionRevenue,ga:itemQuantity&amp;start-date=2012-09-20&amp;end-date=2012-09-26&amp;start-index=1&amp;max-results=1000" />
  <author>
    <name>Google Analytics</name>
  </author>
  <generator>Google Analytics</generator>
  <openSearch:totalResults>49</openSearch:totalResults>
  <openSearch:startIndex>1</openSearch:startIndex>
  <openSearch:itemsPerPage>1000</openSearch:itemsPerPage>
  <dxp:aggregates>
    <dxp:metric name="ga:visits" type="integer" value="942258" />
    <dxp:metric name="ga:newVisits" type="integer" value="393698" />
    <dxp:metric name="ga:visitBounceRate" type="percent" value="26.960025810340692" />
    <dxp:metric name="ga:transactions" type="integer" value="328" />
    <dxp:metric name="ga:transactionRevenue" type="currency" value="427646.331187" />
    <dxp:metric name="ga:itemQuantity" type="integer" value="322" />
  </dxp:aggregates>
  <dxp:containsSampledData>true</dxp:containsSampledData>
  <dxp:dataSource>
    <dxp:property name="ga:profileId" value="xxxxxxxxx" />
    <dxp:property name="ga:webPropertyId" value="UA-33036832-1" />
    <dxp:property name="ga:accountName" value="TCO-UK-TC.com-[thomascook.com]" />
    <dxp:tableId>ga:xxxxxxxxx</dxp:tableId>
    <dxp:tableName>ThomasCook UK - Analytics Extract (VP /search)</dxp:tableName>
  </dxp:dataSource>
  <dxp:endDate>2012-09-26</dxp:endDate>
  <dxp:startDate>2012-09-20</dxp:startDate>
  <entry>
    <id>https://www.googleapis.com/analytics/v2.4/data?ids=ga:xxxxxxxxx&amp;ga:date=20120920&amp;ga:hostname=87.248.112.8&amp;start-date=2012-09-20&amp;end-date=2012-09-26</id>
    <updated>2012-09-27T08:08:53.621Z</updated>
    <title type="text">ga:date=20120920 | ga:hostname=87.248.112.8</title>
    <link rel="alternate" type="text/html" href="http://www.google.com/analytics" />
    <dxp:dimension name="ga:date" value="20120920" />
    <dxp:dimension name="ga:hostname" value="87.248.112.8" />
    <dxp:metric name="ga:visits" type="integer" value="3" />
    <dxp:metric name="ga:newVisits" type="integer" value="3" />
    <dxp:metric name="ga:visitBounceRate" type="percent" value="100.0" />
    <dxp:metric name="ga:transactions" type="integer" value="0" />
    <dxp:metric name="ga:transactionRevenue" type="currency" value="0.0" />
    <dxp:metric name="ga:itemQuantity" type="integer" value="0" />
  </entry>
  <entry>
    <id>https://www.googleapis.com/analytics/v2.4/data?ids=ga:xxxxxxxxx&amp;ga:date=20120920&amp;ga:hostname=alpha.thomascook.com&amp;start-date=2012-09-20&amp;end-date=2012-09-26</id>
    <updated>2012-09-27T08:08:53.621Z</updated>
    <title type="text">ga:date=20120920 | ga:hostname=alpha.thomascook.com</title>
    <link rel="alternate" type="text/html" href="http://www.google.com/analytics" />
    <dxp:dimension name="ga:date" value="20120920" />
    <dxp:dimension name="ga:hostname" value="alpha.thomascook.com" />
    <dxp:metric name="ga:visits" type="integer" value="160" />
    <dxp:metric name="ga:newVisits" type="integer" value="109" />
    <dxp:metric name="ga:visitBounceRate" type="percent" value="21.25" />
    <dxp:metric name="ga:transactions" type="integer" value="0" />
    <dxp:metric name="ga:transactionRevenue" type="currency" value="0.0" />
    <dxp:metric name="ga:itemQuantity" type="integer" value="0" />
  </entry>
  ....so on..... 
```

在下面的代码中，我需要更改它以找到条目元素，但找不到它。使用“/entry”不会产生任何结果。

```
XmlNamespaceManager xmlnsm = new XmlNamespaceManager(xmld.NameTable);
xmlnsm.AddNamespace("dxp", "http://schemas.google.com/analytics/2009");
xmlnsm.AddNamespace("openSearch", "http://a9.com/-/spec/opensearch/1.1/");
xmlnsm.AddNamespace("gd", "http://schemas.google.com/g/2005");

foreach (XmlNode xmlnd in xmld.SelectNodes("//dxp:dimension", xmlnsm))
{
    DimVal = xmlnd.Attributes["value"].Value.ToString();
    DimName = xmlnd.Attributes["name"].Value.Replace("ga:", "");
    // ...
} 
```

我可能缺少命名空间。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:48:01.813

```
XDocument xDoc = XDocument.Load(fileToLoad); //or XDocument.Parse(xmlString)
XNamespace dxp = "http://schemas.google.com/analytics/2009";
XNamespace ns = "http://www.w3.org/2005/Atom";

var result =
    xDoc.Descendants(ns + "entry")
    .Select(e => new
    {
        Dimension = e.Descendants(dxp + "dimension")
                     .ToDictionary(d => d.Attribute("name").Value, d => d.Attribute("value").Value),
        Metric = e.Descendants(dxp + "metric")
                  .ToDictionary(d => d.Attribute("name").Value, d => d.Attribute("value").Value)
    })
    .ToList(); 
```

**打印结果：**

```
foreach(var entry in result)
{
    foreach (var dim in entry.Dimension) 
          Console.WriteLine(dim.Key + " = " + dim.Value);
    Console.WriteLine();

    foreach (var met in entry.Metric) 
          Console.WriteLine(met.Key + " = " + met.Value);
    Console.WriteLine("---------------");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:06:42.453

如果您只是对获取所有可以使用的 dxp:dimension 元素感兴趣

```
GetElementsByTagName("dimension", "http://schemas.google.com/analytics/2009") 
```

代替

```
SelectNodes("//dxp:dimension", xmlnsm) 
```

如果您打算使用 SelectNodes，我认为您需要另一个 / ("///dxp:dimension")。

特别针对您的情况，您可以执行以下操作：

```
foreach(XmlElement ele in xmld.GetElementsByTagName("element"))
{
    foreach(XmlElement dim in ele.GetElementsByTagName("dimension", "http://schemas.google.com/analytics/2009")
    {
        // Do w/e w/ the element
    }
    foreach(XmlElement met in ele.GetElementsByTagName("metric", "http://schemas.google.com/analytics/2009")
    {
        // Do w/e w/ the element
    }
} 
```

# objective-c - MBProgressHUD & SDWebImage - HUD 未显示

> ID：12627966
> 
> 赞同：2
> 
> 时间：2012-09-27T18:36:49.550
> 
> 标签：objective-c, xcode, mbprogresshud, sdwebimage

我正在使用[`SDWebImagePrefetcher`](https://github.com/rs/SDWebImage/blob/master/SDWebImage/SDWebImagePrefetcher.m)从我的 plist 中预取图像列表。

我正在编辑试图分配一个 UIViewController 的方法，它会显示一个[`MBProgressHUD`](https://github.com/jdg/MBProgressHUD)HUD 来指示进度。

问题是HUD不会以任何方式显示。另外，SDWebImagePrefetcher 是一个`NSObject`，我真的不知道在哪里初始化我的自定义 UIViewController 和 HUD，因为它没有任何`viewDidLoad`或`viewWillAppear`方法。

我试图做类似的事情

```
MyCustomViewController *cv = [[MyCustomViewController alloc]init];
HUD = [[MBProgressHUD alloc]initInView:cv.view]; 
```

并没有工作。

我还尝试添加一个 UIAlertView 作为 viewController 的子视图，以查看它是否有效，但它根本不起作用！

任何关于在 NSObject 类中在何处初始化 UIViewController 以便在分配的控制器上显示 HUD 的建议都很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T00:28:33.407

如果您想显示`MBProgressHUD`任何类的 a ，这很简单。只需将其添加到您的应用程序的 keyWindow。这是您的应用程序的最顶层窗口，可以从任何地方轻松访问。

```
UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];

MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:keyWindow animated:YES];
hud.labelText = @"Loading"; 
```

而当你想隐藏`MBProgressHUD`只是使用

```
[hud hide:YES]; 
```

确保在设置应用程序的主窗口之前等待访问 keyWindow。这发生在启动时。如果它是以编程方式设置的，它在您的 AppDelegate 中，通过调用`[window makeKeyAndVisible]`.

# emacs - 如何使 Windows 下的 emacs 光标像以前在 X 下一样？

> ID：12627969
> 
> 赞同：1
> 
> 时间：2012-09-27T18:36:58.367
> 
> 标签：emacs, emacs23, dot-emacs

这是与`(emacs-version)`

```
"GNU Emacs 23.3.1 (i386-mingw-nt6.1.7601)
 of 2011-03-10 on 3249CTO" 
```

我突然注意到光标就像一个标准的 Windows 插入符号，而我正在尝试做的那种编辑让我很难发现。我正在寻找一种使光标成为彩色块（或非活动窗口中的轮廓块）的方法，就像它过去在 emacs 19 中的方式一样，并且空手而归。

有没有咒语可以做到这一点，还是我注定要失望？

`emacs-version`ETA：这是在 Windows 上本地运行的 emacs，我错误地认为从输出中可以看出这一点。我对涉及 cygwin 的解决方案不感兴趣，因为这不适合我的正常工作流程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:10:03.540

如果 Emacs 检测到您正在 PC 上运行某些辅助功能软件，它将使用系统插入符号。这是因为此类软件通过跟踪系统插入符号来完成其工作。

您可以通过设置`w32-use-visible-system-caret`为 nil 来覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:46:00.923

您是在 *NIX 还是 Windows 上运行 emacs？如果 *NIX 是哪个操作系统，哪个窗口管理器？可能是您可以调整的 .Xdefaults 设置，或者如果 *NIX 可以在 X 端摆弄一些东西。在 Windows 上，也许您可​​以使用 Cygwin 版本的 Emacs 并以这种方式对其进行调整。

# java - 从数组中提取某些值并将它们放入另一个数组

> ID：12627976
> 
> 赞同：-1
> 
> 时间：2012-09-27T18:37:24.050
> 
> 标签：java, arrays

我是编程新手，所以如果这是一个“noobish”问题，我很抱歉。我有一个数组，其中包含描述出现频率的值 - 例如 {4,5,2,7,8,,15,16,12,4,2,7,6,22}。如何提取**高于 6**的值并将它们呈现在新数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:47:07.187

```
ArrayList<Integer> newList = new ArrayList<Integer>();
for (Integer i: array) {
  if (i > 6) {
    newList.add(i);
  }
}
Integer[] newArray = newList.toArray(new Integer[0]); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:42:42.137

```
 int j=0;
  for(i=0;i<array.length;i++)
    {
       if(array[i]>6)
         {

         newArray[j]=array[i];
              j++;
       } 
```

这是你可以做到的方式，或者你可以继续。

# google-chrome - Chrome 中的重绘问题

> ID：12627977
> 
> 赞同：2
> 
> 时间：2012-09-27T18:37:37.880
> 
> 标签：google-chrome, redraw, html-rendering, webpage-rendering

我在 Chrome 中遇到无法解释的重绘问题。它们不会出现在任何其他浏览器中。该网站是[http://leonardo.re](http://leonardo.re)

它们在将鼠标悬停在`DIV`包含样式链接（联系页面）的样式上后出现：

![Chrome 中的示例重绘问题](../Images/a2790ce35704890e4f18eb2029a98a84.png)

`DIV`有时在滚动（任何页面）时覆盖。但并非总是如此：

![Chrome 中的示例重绘问题 (2)](../Images/86ff0b10cd93680cbc92c8560c3aec99.png)

有谁知道到底发生了什么或如何解决/避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:50:56.523

此错误现已在较新版本的 Chrome 中得到解决 - 不再有问题！

# php - 如何使用 PHP 自动提交 Html 表单

> ID：12627978
> 
> 赞同：-4
> 
> 时间：2012-09-27T18:37:42.077
> 
> 标签：php, html

大家好，我有设置为 action = something.php 的 html 表单。现在我想在单击表单上的提交按钮时自动提交此表单 9 次。我可以用 PHP 做到这一点吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:42:00.110

您想将表单提交 9 次到同一个 PHP 脚本，还是只想处理提交 9 次？不要认为你可以从 PHP 做前者，但后者可以通过循环轻松处理：

```
for ( $counter = 0; $counter < 9; $counter += 1) {
    \\ do your stuff
} 
```

您是否有特定原因要提交表单而不是多次运行逻辑？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:42:23.683

由于 PHP 是服务器端脚本，因此您实际上无法提交 9 次表单。但是，您可以在 for 循环中对服务器端的数据执行 9 次您正在执行的操作。

```
for($i = 0; $i < 9; $i++) {
    // use $_POST here and do your stuff

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:44:31.370

No, you can't do this in PHP. At least not the way you are thinking of doing it (actual multiple POST actions from your form page). The action of posting will automatically take the user to the page you are posting to, not giving you an opportunity to POST again. You could of course POST to another script form the script you POSTed to, but I don;t think this is what you are asking.

To make actual repeated physical POSTs you would likely need to use AJAX methods.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:52:53.157

**网页**

```
<form id="form1" name="form1" method="post" action="form.php">
  <input type="text" name="name" id="name" />
  <input type="text" name="email" id="email" />
  <input type="submit" name="button" id="button" value="Submit" />
</form> 
```

**PHP 页面**

```
<?php
for($i=1; $i<=9; $i++) {
// Your posting stuff

echo $_POST['name'];
echo '<br>';
echo $_POST['email'];
echo '<br>';
}
?> 
```

这是您可以使用的方式。

# python - AttributeError：“str”对象没有属性“isstr”

> ID：12627983
> 
> 赞同：0
> 
> 时间：2012-09-27T18:37:53.207
> 
> 标签：python, bots, irc

我正在尝试为 jenni/phenny irc bot 制作 python 模块。

这是我的代码的一部分

```
def bp(jenni, input):
    try: 
        text = input.group(2).encode('utf-8').split()
    except: 
        jenni.reply("Please use correct syntax '.bp id weapons 7'. Available for weapons and food only")
    if text[0].isstr() and text[1].isstr() and text[2].isdigit() and len(text) == 3 and text[1] == ('weapons' or 'food'):
        url = 'http://someAPIurl/%s/%s/%s/1.xml?key=%s' % (text[0], text[1], text[2], key) 
```

如果输入已经是`str`为什么我会收到此错误？

> AttributeError：“str”对象没有属性“isstr”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T18:41:28.690

错误正是它所说的；`str`没有办法`isstr()`。

如果您想确保它只是字母，请使用`.isalpha()`.

例子：

```
>>> '0'.isalpha()
False
>>> 'a'.isalpha()
True
>>> 'aa'.isalpha()
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T18:47:40.293

对 Python 2.x或Python 3.x使用[isinstance](http://docs.python.org/library/functions.html#isinstance)和：`basestring``str``unicode`

```
isinstance(your_string, basestring) 
```

这是您最初提出的问题，但可能不是您的意思。您的示例代码表明您真的想知道如何检查字符串是字母还是字母数字。为此，您要使用[`isalpha`](http://docs.python.org/library/stdtypes.html#str.isalpha)or[`isalnum`](http://docs.python.org/library/stdtypes.html#str.isalnum)字符串方法。

> ### str.isalpha()
> 
> 如果字符串中的所有字符都是字母并且至少有一个字符，则返回 true，否则返回 false。
> 
> 对于 8 位字符串，此方法取决于区域设置。

您可能还需要考虑重构代码，使其更易于阅读和维护。也许是这样的：

```
API_URL = 'http://someAPIurl/%s/%s/%s/1.xml?key=%s'
KIND_CHOICES = ('weapon', 'food')

def bp(jenni, input):
    try:
        cmd, kind, index = input.group(2).encode('utf-8').split()
        # Assigning to 3 variables lets you skip the len() == 3 check
        # and can make the use of each argument more obvious than text[1]
    except:
        jenni.reply("Please use correct syntax '.bp id weapons 7'. Available for weapons and food only")
    if cmd.isalpha() and kind in KIND_CHOICES and index.isdigit():
        url = API_URL % (cmd, kind, index, key)  # is key a global?
    # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:39:48.097

尝试使用： - `text[0].isalpha()`..

字符串没有这样的方法`isstr()`..

而代替`text[1] == ('weapons' or 'food')`，您应该使用`in`operator..

```
if (text[1] in ('weapons', 'food')) {
} 
```

# android - 编辑 Google Drive 中的文件并与 Android App 共享

> ID：12627985
> 
> 赞同：0
> 
> 时间：2012-09-27T18:38:01.867
> 
> 标签：android, google-drive-api

实际上，我正在从我的 Android 应用程序上传文件并下载它。但出于安全原因，似乎只能下载上传的文件。我的目标是与我的 Android 应用程序共享（编辑）在 Google 云中创建的一些特定文件，但我不知道该怎么做。实际上，如果我尝试在云中创建一些文件，downloadurl 字段总是设置为 null。当然，我在 Google Drive 用户会话和 Google API 中签名的 Android 应用程序中使用了相同的帐户。我试图更改 Google Drive 云上的文件权限，但没有成功。请给点建议...

```
try {

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(gFile.getDownloadUrl());
                get.setHeader("Authorization", "Bearer " + token);
                HttpResponse response = client.execute(get);

                InputStream inputStream = response.getEntity().getContent();
                jFolder.mkdirs();
                java.io.File jFile = new java.io.File(jFolder.getAbsolutePath() + "/" + gFile.getOriginalFilename()); // getGFileName() is my own method... it just grabs originalFilename if it exists or title if it doesn't.
                FileOutputStream fileStream = new FileOutputStream(jFile);
                byte buffer[] = new byte[1024];
                int length;
                while ((length=inputStream.read(buffer))>0) {
                    fileStream.write(buffer, 0, length);
                }
                fileStream.close();
                inputStream.close();
                return jFile;
            } catch (IOException e) {        
                // Handle IOExceptions here...
                return null;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:50:01.770

DownloadUrl 仅为非 Google 文档文件填充。如果您要下载的文件是 Google Docs，则需要使用其中一个 exportLinks

# wikipedia - 是否可以获得超类别页面ID？

> ID：12627986
> 
> 赞同：1
> 
> 时间：2012-09-27T18:38:06.083
> 
> 标签：wikipedia, mediawiki-api

可以获得子类别的 id，使用

```
cmprop=ids 
```

查询的参数`list=categorymembers`。

但是我找不到一种方法来获取相同的超类别列表以进行`prop=categorymembers`查询。

我试过了

```
clprop=ids 
```

以此类推，但失败了（此参数被忽略）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:22:22.623

这主要是因为在 MediaWiki 中，关系是在页面（子类别）和*类别名称*（超类别）之间。因此，某些页面可能有一个不存在的超类别（没有 pageid），这也是关系在数据库中存储的方式。

我认为这就是为什么`prop=categories`不向您显示文章 ID 的原因。您可以通过使用生成器来解决此问题，该生成器向您显示超类别列表中每个页面的 id。就像是：

[http://en.wikipedia.org/w/api.php?action=query&generator=categories&prop=info&titles=Category%3AComputer%20programming&ginprop=](http://en.wikipedia.org/w/api.php?action=query&generator=categories&prop=info&titles=Category%3AComputer%20programming&ginprop=)

# c - 编译具有许多目录的文件列表

> ID：12627992
> 
> 赞同：0
> 
> 时间：2012-09-27T18:38:29.880
> 
> 标签：c, makefile, gnu-make

我今天一直在努力解决这个问题。

我在许多目录中有许多 c 文件。它们都需要编译并链接到库。

这是文件的假设布局：

```
main_dir/
  thing1/
    thing1.c
  thing2/
    thing2.c
  thing3/
    thing3.c
MakeFile 
```

我有一个生成文件，可以“找到”这些文件并生成必要的对象，但是，始终使用同一个 c 文件作为输入。

这就是 Makefile 的样子（每个文件的内容都是一个使用 puts() 的函数）：

```
C=gcc
CFLAGS=-Wall -g
OBJDIR=obj
SRC=$(shell find src/ -type f -name "*.c")
SRC_DIRS=$(shell find src/ -type f -name "*.c" -exec dirname {} \; | uniq)
OBJS=$(SRC:%.c=${OBJDIR}/%.o)    

$(OBJS) : $(SRC)
    @echo Compiling : $<
    $(C) -c $(CFLAGS) -o $@ $<

clean:
    rm -fv $(OBJS) thingy.a

folders:
    $(call build_dirs)

all: folders $(OBJS)
    ar -r -o thingy.a $(OBJS)

define build_dirs
    for dir in $(SRC_DIRS); do \
        mkdir -pv $(OBJDIR)/$$dir; \
    done
endef 
```

制作的输出：

```
for dir in src/thing1 src/thing2 src/thing3; do mkdir -pv obj/$dir; done
Compiling : src/thing1/thing1.c
gcc -c -Wall -g -o obj/src/thing1/thing1.o src/thing1/thing1.c
Compiling : src/thing1/thing1.c
gcc -c -Wall -g -o obj/src/thing2/thing2.o src/thing1/thing1.c
Compiling : src/thing1/thing1.c
gcc -c -Wall -g -o obj/src/thing3/thing3.o src/thing1/thing1.c
ar -r -o thingy.a obj/src/thing1/thing1.o obj/src/thing2/thing2.o obj/src/thing3/thing3.o
ar: creating thingy.a 
```

我很确定问题是我在 $(OBJS) 中使用了 $(SRC) ： $(SRC) 但是，我只是不知道该怎么做。

任何有MakeFu的人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:11:45.603

您的 $(OBJS) 似乎设置正确，因此以下应该有效（而不是 $(OBJ) : $(SRC) 目标）：

```
$(OBJDIR)/%.o : %.c
    @echo Compiling : $<
    $(C) -c $(CFLAGS) -o $@ $< 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:53:03.780

你说得对，`$(OBJS)`规则就是问题所在。

查看变量：`(SRC)`is`src/thing1/thing1.c src/thing2/thing2.c src/thing3/thing3.c`和`$(OBJS)`is `obj/src/thing1/thing1.o obj/src/thing2/thing2.o obj/src/thing3/thing3.o`。（你确定你想要一个`src`目录`obj/`吗？）现在假设你想`obj/src/thing2/thing2.o`使用这个规则来构建：

```
$(OBJS) : $(SRC)
    @echo Compiling : $<
    $(C) -c $(CFLAGS) -o $@ $< 
```

先决条件字段 ( `$(SRC)`) 扩展为“ **src/thing1/thing1.c** src/thing2/thing2.c src/thing3/thing3.c”，因此`$<`扩展为“ **src/thing1/thing1.c** ”。显然，在这种情况下您想要的是“ **src/thing2/thing2.c** ”，所以这就是先决条件字段应该是什么。您需要的是类似[模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)或[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)的东西。诀窍是你不提前知道路径，而且 Make 不能很好地处理模式，所以我们必须灵巧：

```
$(OBJS) : $(OBJDIR)/%.o : %.c
    @echo Compiling : $<
    $(C) -c $(CFLAGS) -o $@ $< 
```