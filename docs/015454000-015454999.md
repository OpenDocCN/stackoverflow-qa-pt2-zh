# StackOverflow 问答 15454000-15454999

# python - 如何在 Django 中重置数据库？我收到命令“重置”未找到错误

> ID：15454008
> 
> 赞同：120
> 
> 时间：2013-03-16T19:56:10.093
> 
> 标签：python, database, django, reset

在此处通过示例教程遵循此 Django：http: [//lightbird.net/dbe/todo_list.html](http://lightbird.net/dbe/todo_list.html)

教程说：

> “这改变了我们的表格布局，我们将不得不让 Django 重置和重新创建表格：
> 
> `manage.py reset todo; manage.py syncdb`"

但是，当我运行时`manage.py reset todo`，我得到了错误：

```
$ python manage.py reset todo                                       
- Unknown command: 'reset' 
```

这是因为我使用的是 sqlite3 而不是 postgresql 吗？

**有人能告诉我重置数据库的命令是什么吗？**

命令：`python manage.py sqlclear todo`返回错误：

```
$ python manage.py sqlclear todo    
CommandError: App with label todo could not be found.    
Are you sure your INSTALLED_APPS setting is correct? 
```

所以我在 settings.py 中将 'todo' 添加到我的 INSTALLED_APPS 中，然后`python manage.py sqlclear todo`再次运行，导致此错误：

```
$ python manage.py sqlclear todo                                      
- NameError: name 'admin' is not defined 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-16T20:00:52.583

`reset`已被`flush`Django 1.5 取代，请参见：

```
python manage.py help flush 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-08-23T18:26:51.893

看起来“同花顺”的答案适用于某些情况，但并非所有情况。我不仅需要刷新数据库中的值，还需要正确地重新创建表。我还没有使用迁移（早期），所以我真的需要删除所有表。

我发现删除所有表的两种方法都需要核心 django 以外的东西。

如果您在 Heroku，请使用 pg:reset 删除所有表：

```
heroku pg:reset DATABASE_URL
heroku run python manage.py syncdb 
```

如果您可以安装 Django 扩展，它有一种方法可以完全重置：

```
python ./manage.py reset_db --router=default 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-08-30T22:06:49.457

与 LisaD 的答案类似，[Django Extensions](https://django-extensions.readthedocs.io/en/latest/)有一个很棒的 reset_db 命令，它可以完全删除所有内容，而不是像“flush”那样截断表。

`python ./manage.py reset_db`

仅仅刷新表并不能修复我删除对象时发生的持久性错误。做一个 reset_db 解决了这个问题。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-12-16T10:49:23.097

如果你使用的是 Django 2.0 那么

```
python manage.py flush 
```

将工作

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-05-13T19:02:44.637

如果要清理整个数据库，可以使用： **python manage.py flush** 如果要清理 Django 应用程序的数据库表，可以使用： **python manage.py migrate appname zero**

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-10-22T07:33:08.410

使用 django 1.11，只需从每个应用程序的文件夹中删除所有迁移文件`migrations`（所有文件除外`__init__.py`）。然后

1.  手动删除数据库。
2.  手动创建数据库。
3.  运行`python3 manage.py makemigrations`。
4.  运行`python3 manage.py migrate`。

瞧，您的数据库已完全重置。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-30T16:46:02.350

对我来说，这解决了问题。

```
heroku pg:reset DATABASE_URL

heroku run bash
>> Inside heroku bash
cd app_name && rm -rf migrations && cd ..
./manage.py makemigrations app_name
./manage.py migrate 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-04-27T13:01:47.410

只是跟进[@LisaD 的](https://stackoverflow.com/users/971577/lisad)回答。
截至 2016 年 ( `Django 1.9`)，您需要输入：

```
heroku pg:reset DATABASE_URL
heroku run python manage.py makemigrations
heroku run python manage.py migrate 
```

这将为您在 Heroku 中提供一个全新的数据库。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-07-18T04:29:35.693

```
python manage.py flush 
```

删除了旧的数据库内容，

不要忘记创建新的超级用户：

```
python manage.py createsuperuser 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-06T17:26:13.633

1.  只需手动删除您的数据库。确保首先创建备份（在我的情况下**db.sqlite3**是我的数据库）

2.  运行此命令`manage.py migrate`

# java - 如何从 4 个随机数中生成两个？

> ID：15454010
> 
> 赞同：0
> 
> 时间：2013-03-16T19:56:48.393
> 
> 标签：java, android

我需要 1、2、3 和 4 中的两个随机数，但它们不能相同，我需要它们在两个不同的变量中。

所以，像`rnd1 = 1;`and之类的东西`rnd2 = 3;`。

我试图生成它们的经典风格：`int rnd = new Random().nextInt(3) + 1;`. 和另一个相同的方式，但如何确保它们不匹配？怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T20:00:31.700

与其自己实现随机性和唯一性，不如简单地用允许的数字填充一个列表，将[其打乱](http://developer.android.com/reference/java/util/Collections.html#shuffle%28java.util.List%3C?%3E%29)并取前两个条目：

```
List<Integer> list = Arrays.asList(1, 2, 3, 4);
Collections.shuffle(list);
rnd1 = list.get(0);
rnd2 = list.get(1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T19:59:32.547

```
Random random = new Random();
int rnd1 = random.nextInt(3) + 1;
int rnd2 = rnd1;
while(rnd2 == rnd1) {
    rnd2 = random.nextInt(3) + 1;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T20:00:39.363

好吧，最简单的方法可能是：

```
Random random = new Random();
int rnd1 = random.nextInt(3) + 1;
int rnd2;
do {
    rnd2 = random.nextInt(3) + 1;
} while (rnd1 == rnd2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T19:59:20.613

将第一个值分配给第二个值，然后使用 while 循环，直到两个值不相等。

```
int rnd = new Random().nextInt(3) + 1;
int rnd2 = rnd;

while(rnd2 == rnd){
  rnd2 = new Random().nextInt(3) + 1;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-16T20:00:14.827

```
 int one, two;
    Random r = new Random();
    one = r.nextInt(3) + 1;
        two = r.nextInt(3) + 1;
    while (one == two){
            two = r.nextInt(3) + 1; 
```

# c# - 如何根据身份验证显示不同的视图？asp.net mvc

> ID：15454011
> 
> 赞同：1
> 
> 时间：2013-03-16T19:56:48.773
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

例如，当用户访问索引页面时，他看到的内容与登录用户看到的内容不同。

我怎样才能做到这一点，这是否需要某种注释或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:00:48.737

您是否尝试过 _Layout 视图或部分视图？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:22:57.400

有不止一种方法可以处理这个...

如果您想在控制器或视图中处理它取决于您。理想情况下，我会冒险猜测选择取决于您要显示或不显示的内容，视情况而定。

如果你在控制器中处理它......

```
Function Index()As ActionResult
  If Request.IsAuthenticated Then
    ' Logged in is TRUE
    Return View(LoggedInUserContentModel)
  Else
    ' Logged in is FALSE
    Return View(SiteGuestUserContentModel)
  End If
End Function 
```

如果你在视图中处理它......直接显示页面内容

```
<% If Request.IsAuthenticated Then %>
  <!-- User is Logged In -->
  Welcome <b><%: Page.User.Identity.Name %></b>!
  [ <%: Html.ActionLink("Log Off", "LogOff", "Account")%> ]
<% Else %>
  <!-- User is NOT Logged In -->
  Welcome <b>Guest</b> please login!
  [ <%: Html.ActionLink("Log On", "LogOn", "Account")%> ]
<% End If %> 
```

您可以选择不直接显示嵌入页面本身的内容，但可以选择显示从 ChildAction 中检索到的内容（这类似于使用旧的非 MVC 网页设计风格在 UserControl 中显示它，而不是直接放置网页上的内容）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T08:03:31.850

处理它的一种简单方法是在控制器方法中使用 RedirectToAction。

```
Function Index() As ActionResult
    If User.Identity.IsAuthenticated Then
        Return RedirectToAction("Index", "AuthenticatedController")
    Else
        Return View()
    End If
End Function 
```

# svg - Compass/SASS 中的 URL 或 Base64 编码字符串

> ID：15454014
> 
> 赞同：9
> 
> 时间：2013-03-16T19:57:05.663
> 
> 标签：svg, sass, compass-sass

有没有办法在 Compass 或 SASS 中对字符串进行 URL 或 Base64 编码？

我想创建一个内联 SVG 背景图像，如下所示：

```
background: transparent url('data:image/svg+xml; charset=utf-8,'
    + '<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">'
    + '</svg>') 0 0 no-repeat; 
```

（内联创建它的原因是一些 SVG 的值需要来自 SASS 变量。）

问题是，CSS 数据 URL 应该是 URL 编码或 Base64 编码的。如果不是，则 YUI 压缩器之类的工具会[破坏它们](https://stackoverflow.com/questions/13949588/yui-compressor-is-removing-spaces-from-filter-values)。

我知道您可以[对来自外部文件的图像进行编码](http://compass-style.org/reference/compass/helpers/inline-data/#inline-image)，但我需要对字符串进行编码。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-16T22:42:59.267

我不确定是否有更简单的方法，所以我编写了一个自定义 SASS 函数：

配置.rb：

```
require File.join(File.dirname(__FILE__), 'base64-encode.rb') 
```

base64-encode.rb：

```
require 'sass'
require 'base64'

module Sass::Script::Functions
    def base64Encode(string)
        assert_type string, :String
        Sass::Script::String.new(Base64.strict_encode64(string.value))
    end
    declare :base64Encode, :args => [:string]
end 
```

SCSS 文件：

```
background: transparent url('data:image/svg+xml;charset=utf-8;base64,'
    + base64Encode('<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">'
    + '</svg>')) 0 0 no-repeat; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-22T21:08:09.317

它也可以作为指南针中的一个功能使用：[https ://github.com/chriseppstein/compass/commit/5a015b3824f280af56f1265bf8c3a7c64a252621#L2R4](https://github.com/chriseppstein/compass/commit/5a015b3824f280af56f1265bf8c3a7c64a252621#L2R4)

# php - 加在一起 MySQL 价值观论坛专栏

> ID：15454018
> 
> 赞同：0
> 
> 时间：2013-03-16T19:57:15.577
> 
> 标签：php, mysql, math, add

我想知道如何添加（使用 PHP Math）从 MySQL 查询返回的所有值。

```
$query = mysql_query("SELECT * FROM phpvms_pireps WHERE pilotid='$pilotcode'")or die(mysql_error()); 
```

然后对于它返回的每个结果，我希望它将距离列中的所有值加在一起；这些已经是数字格式。

在 PHP 中将它们加在一起后，回显出总数。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:00:34.497

你可以在 MySQL 中做到这一点：

```
SELECT SUM(distance) FROM phpvms_pireps 
```

当然，如果您还想选择其他值，这将不起作用。在这种情况下，您可以在 fetch 循环中执行此操作：

```
$distance = 0;
while ($row = mysql_fetch_assoc($query) {
    $distance += $row['distance'];
    /* more processing? */
}
echo $distance; 
```

* * *

您的代码是对注入的查询，并且您正在使用已弃用的 mysql 扩展。使用 PDO 或 mysqli 切换到正确参数化的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:01:08.580

```
$total = 0;
while ($output = mysql_fetch_assoc($query)) {
  $total += $output['distance'];
}

echo $total; 
```

我希望这会有所帮助。

# c - pthread_create() 后主线程不继续执行

> ID：15454019
> 
> 赞同：3
> 
> 时间：2013-03-16T19:57:20.800
> 
> 标签：c, pthreads

我已经使用`pthread_create()`. 新线程创建成功，控制权传递给新创建的线程。但是，似乎主线程不再执行。主线程处于无限循环中，永远不会退出。以下是代码片段：

```
void *start_routine(void)
{
    printf("Start routine reached!\n");
    fflush(stdout);

    printf("Pthread returning!\n");
    fflush(stdout);

    return NULL;
}

void create_thread()
{
        pthread_t newThread;

        printf("Thread create reached!!\n");
        fflush(stdout);

        /* Create the new thread */
        if((pthread_create(&newThread, NULL, start_routine , NULL)) != 0 ){
                perror("pthread_create");
                fflush(stdout);
        }

        printf("Thread create done!!\n");
        fflush(stdout);

        return;
} 
```

输出是：

```
Thread create reached!!
Start routine reached!
Pthread returning! 
```

我没有看到“线程创建完成！！” 正在打印并且程序此时卡住了。

任何指针都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:44:07.493

应该是你的签名错误造成的`start_routine`。的入口例程的标准签名`pthread_create`是`void *(*start_routine)(void *)`。在实现中`pthread_create`，`start_routine`将调用提供的参数`start_routine`，在您的情况下，`create_thread`为它提供值`NULL`，因此，在`pthread_create`调用`NULL`之前将 in 压入堆栈`start_routine`，但是，您`start_routine`不会将堆栈恢复为`pthread_create`（确切地说是由`pthread_create`）期待，`start_routine`完成后，堆栈超出预期，并且可能会遇到 address `NULL`，这可能会导致您的程序很快中止。

当参数通过堆栈传输时会出现问题。要更正它，只需更正您的`start_routine`to 即可`void *start_routine(void* args)`。并且，在主线程中，调用`pthread_join`等待派生线程完成，否则，资源泄漏将是一个潜在的问题。

如果您对 Linux NPTL 的内部工作感兴趣`pthread_create`，您可以访问[http://raison.gegahost.net/?p=91](http://raison.gegahost.net/?p=91)。

# wordpress - 联系表格垃圾邮件问题

> ID：15454024
> 
> 赞同：1
> 
> 时间：2013-03-16T19:57:34.440
> 
> 标签：wordpress, forms

我在 wordpress 网站上有一个相对简单的联系表格。我最近收到了大量的垃圾邮件。我担心出于转换原因实施验证码。所有垃圾邮件条目在联系表单提交中至少有一个网站 URL（“http://”或“www.”）。

如果“http://”或“www.”，有没有办法阻止表单执行（因此，我不会收到电子邮件）。在联系表上提交？

谁能告诉我如何实现这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:10:04.450

您为什么不尝试安装验证码系统。reCAPTCHA 非常受欢迎。在 WordPress 中，您只需为其安装[WP-reCAPTCHA插件即可添加它](http://wordpress.org/extend/plugins/wp-recaptcha/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:09:29.217

当然。您将需要找到处理或处理传入表单数据的代码或方法。接下来，您需要做的就是中断该过程。

可以说当前的处理看起来像这样。

```
function handleContactFormData() {
    if (isset($_POST['from']) && isset($_POST['message']) {
        // put 'from' or 'message' into a DB or email message.
    }
} 
```

如果是“http://”或“www”，则妨碍处理。在消息中找到。

```
function handleContactFormData() {
    if (isset($_POST['from']) && isset($_POST['message']) {
        if (stripos($_POST['message'], 'http://') !== false || stripos($_POST['message'], 'www.') !== false)
            return;
        }
        // put 'from' or 'message' into a DB or email message.
    }
} 
```

当然，这在很大程度上取决于数据的处理方式，以及您希望发布此类数据的用户的结果是什么。但是话又说回来，您根本没有发布任何代码。

# java - 用java生成重叠集

> ID：15454026
> 
> 赞同：2
> 
> 时间：2013-03-16T19:57:36.090
> 
> 标签：java, algorithm

有 N 个请求，开始时间和结束时间。我想找到可以重叠的请求。例如：本例中有重叠的请求 {{R1,R2},{R2,R3},{R4,R5,R6},{R4,R6,R7}}

```
R7                  ------
R6                -----
R5            ------
R4          -----------
R3      ---
R2    -----
R1   --- 
```

如何使用 Java 生成重叠集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:58:44.147

生成按时间排序的区间端点列表。

按顺序遍历列表，同时保留一组已开始但尚未结束的间隔。

当您遇到“开始”端点时，将端点所属的间隔添加到集合中。当您遇到“结束”端点时，将当前集输出为重叠间隔集之一，然后从“当前”集中删除该间隔。

您需要为同时结束的多个间隔添加一些额外的逻辑，以防止重复输出，但这应该不会太难。

# android - Android 4.2：具有多个活动的应用程序导航

> ID：15454030
> 
> 赞同：0
> 
> 时间：2013-03-16T19:57:56.760
> 
> 标签：android, navigation, fragment, tabbar, master-detail

我是 Android 开发的新手。我正在开发一个应用程序，它基本上需要始终在屏幕顶部有一个应用程序导航（标签栏、按钮等）。当用户在导航选项卡（或按钮等）上单击（或点击）时，应用程序需要导航到内部包含列表片段和详细信息片段的新活动。同样，所有导航选项卡（或按钮）都将具有相同的内容。例如：标题为客户、联系人等的选项卡 客户屏幕包含：所选客户的客户列表（屏幕左侧）和详细信息部分（右侧）。联系人屏幕包含：联系人列表（屏幕左侧）和所选联系人的详细信息部分（右侧）。

每个 Tab 都需要与内部包含列表和细节片段的 Activity 相关联。如何实现这一点，请提供一种实现方式。提前致谢。

# python - 我怎样才能在相应的索引中只打印一个单词的猜测字母？

> ID：15454035
> 
> 赞同：1
> 
> 时间：2013-03-16T19:58:06.337
> 
> 标签：python, python-2.7

我正在制作一个刽子手游戏，我需要制作一组下划线，即单词的长度，当用户正确猜出一个字母时，下划线集中的相应空格将成为正确猜出的字母。我怎样才能做到这一点？

```
userGuess = raw_input('Enter a letter or the word:    ')
guessed = ''

def getWordList:
    #just getting a word from a tct file and returning a random word from it
    return word

def askForInput(userGuess):
    xx = str(userGuess)
    yy = xx.lower()
    return yy

def showWord:
    print'_ ' * len(word) #I know this part is wrong if I want to add the letters 
    print 'Guesses: %s' %guessed

if askForInput(userGuess) in word:
    print 'There are %ss' %askForInput(userGuess).upper()
    #now what can I do with showWord or how can I fix showWord? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:11:37.080

你可以这样做：

```
guess = "sol"
word = "stackoverflow"
hint = [l if l in guess else "_" for l in word]
print "".join(hint) 
```

在这里，`guess`是一个字符串（或一个列表，或一个集合），包含用户到目前为止猜到的所有字母`word`，显然，是要猜测的单词。`hint`then 是一个`l`包含单词中每个字母的列表，如果该字母在猜测的字母集中，则该字母或下划线。最后，将该提示连接到一个字符串并打印出来。

此示例的输出为`"s____o____lo_"`.

# actionscript-3 - ActionScript 中的“原型”一词是什么意思？

> ID：15454040
> 
> 赞同：3
> 
> 时间：2013-03-16T19:58:40.870
> 
> 标签：actionscript-3, flash, actionscript

好的，我在自己的 .AS 文件中创建了这两个类 (`foo`和)。`bar`这两个类都保存在一个名为`custom`.

在我称为“Sandbox”的 .FLA 文件中，我将以下代码放入时间线中：

```
import custom.foo;
import custom.bar;

var f:foo = new foo("FOO");
var b:bar = new bar("BAR");

trace(f.valueOf());
trace(b.valueOf());

f.statement();
b.statement(); 
```

我得到以下输出：

> 食品
> 
> 酒吧
> 
> 声明：值为FOO
> 
> 声明：值为BAR

现在，通常，我不会想太多，但看看类的代码......这是`foo.as`文件（减去我的评论）：

```
package custom {

    public class foo {

        public var property:String;
        public var value:String;

        public function foo (par:String = "?") {
            this.property = par;
            this.value = this.valueOf();
            return;
        }

        prototype.expression = function () {
            trace ("Expression: the value is", this.property);
        }

        public function statement () {
            trace ("Statement: the value is", this.property);
        }

        public function valueOf() {
            return(this.property);
        }

    }
} 
```

...这是`bar.as`文件（减去我的评论）：

```
package custom {

    public class bar {
        public var property:String;
        public var value:String;

        public function bar (par:String = "?") {
            prototype.property = par;
            prototype.value = prototype.valueOf();
            return;
        }

        prototype.expression = function () {
            trace ("Expression: the value is", prototype.property);
        }

        public function statement () {
            trace ("Statement: the value is", prototype.property);
        }

        public function valueOf() {
            return(prototype.property);
        }

    }
} 
```

为什么我使用`prototype`而不是得到相同的结果`this`？`prototype`我发现，虽然这是一个令人烦恼的问题，但除非有人能告诉我它的真正含义，否则无法回答。

我知道`this`大致翻译为“这个类的这个实例”，但是......**是什么`prototype`意思？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:27:42.760

ActionScript 3 基于 ECMAScript 规范（正式名称为 ECMA-262），该规范指定了与 JavaScript 相同的标准。

基本上，该规范将`prototype`对象的属性描述为一种蓝图，该蓝图定义了该对象的新实例在使用`new`. 您可以将 理解为包含任何字段和方法（或者如果需要）的`prototype`定义的类对象，这些定义*在*.`function`*`new`*

 *调用方法或访问字段`prototype`将调用原始函数或将访问“类”对象的原始字段，而不是复制到实例中的方法或字段。因此，您将始终从您的and中获得相同`protoype.property`但不同的值，因为它们是 和 的实例，分别由.`f.property``b.property``foo``bar``new`

### 回到 ActionScript

以下是一些需要了解`prototype`的特殊行为。

首先，三个例子说明使用原型和*普通*成员的区别：

```
public class Sample {

    public function Sample() {
        trace("this.test():", this.test()); // output: this.test(): member test
        trace("this["test"]():", this["test"]()); // output: this["test"](): member test
    }

    public function test():String {
        return "member test";
    }
}

public class SampleWithPrototype {

    public function SampleWithPrototype() {
        trace("this.test():", this.test()); // COMPILER ERROR: there is no member 'test' defined.
        trace("this["test"]():", this["test"]()); // output: this["test"](): prototype test
    }

    prototype.test = function():String {
        return "prototype test";
    }
}

public class SampleWithBoth {

    public function SampleWithBoth() {
        trace("this.test():", this.test()); // output: this.test(): member test
        trace("this["test"]():", this["test"]()); // output: this["test"](): member test
    }

    public function test():String {
        return "member test";
    }

    prototype.test = function():String {
        return "prototype test";
    }
} 
```

现在解释一下：对象的复制实例属性`prototype`只能使用下标运算符（`this["test"]`在示例中）在实例上访问。它们在编译时不会被检查，只能以这种方式访问​​。使用 -notation 访问它`.`会引发编译时错误 ( `SampleWithPrototype`)。

在使用`prototype`和使用常规成员定义机制（如`public function ...`）同时定义成员时，常规定义的成员会`protopype`隐藏 -member，因此它变得不可访问（`SampleWithBoth`）。

此外：您可以`prototype.test`在运行时使用任何您想要的内容进行覆盖，因此从类创建的每个实例在`test`被覆盖后都会提供新的行为。而且你不需要用 标记你的班级`dynamic`。

最后：我不推荐使用此功能，因为它会使您的应用程序不可预测且难以调试。`prototype`除非您将编译器切换到（慢得多）ECMA 标准模式（即非严格模式），否则在 ActionScript 中使用并不常见。然后，您将获得与 JavaScript 相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:47:58.067

根据官方文档：

**[[顶级] Object.prototype](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Object.html#prototype)**

> 对类或函数对象的原型对象的引用。原型属性会自动创建并附加到您创建的任何类或函数对象。此属性是静态的，因为它特定于您创建的类或函数。例如，如果您创建一个类，则原型属性的值由该类的所有实例共享，并且只能作为类属性访问。您的类的实例不能直接访问原型属性。
> 
> 类的原型对象是该类的一个特殊实例，它提供了一种在类的所有实例之间共享状态的机制。在运行时，当在类实例上找不到属性时，将检查作为类原型对象的委托以查找该属性。如果原型对象不包含该属性，则该过程继续原型对象的委托在层次结构中连续检查更高级别，直到 Flash 运行时找到该属性。
> 
> 注意：在 ActionScript 3.0 中，原型继承不是主要的继承机制。类继承驱动类定义中固定属性的继承，是 ActionScript 3.0 中的主要继承机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:48:17.713

AS3 和 Javascript 都派生自同一个[ECMAScript](http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1)。

![在此处输入图像描述](../Images/277c22faa5c79f907cbd9ebbc9775953.png)

在 javascript 中，原型作为扩展对象和编写面向对象 JS 的唯一方法存在。

它在AS3中也存在相同的含义。但是在AS3中，Adobe编写了类结构，使得原型的使用消失了。因此，在 AS3 中，您可以像使用任何流行的 oop 语言（如 C#/Java）一样编写类并使用它们。*

# c++ - Windows API 全局挂钩的无限范围

> ID：15454042
> 
> 赞同：2
> 
> 时间：2013-03-16T19:58:46.460
> 
> 标签：c++, winapi, hook, keyboard-events

我正在尝试制作一个 C++ 应用程序来处理 PC 上运行的每个应用程序上的键盘事件（实际上，只是想“捕捉”用户键入的一些短语）。我想要做的最基础是这样的：

```
#define _WIN32_WINNT 0x0500

#include <iostream>
#include <windows.h>
using namespace std;

HHOOK hHook;

LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    printf("Activated\n"); 
    return CallNextHookEx(hHook, nCode, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
  hHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hInstance, 0);
  MSG msg;
  while(GetMessage(&msg, NULL, 0, 0))
  {
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }
  return msg.wParam;
} 
```

现在，这个是全球性的，但是当我发现当我运行特定应用程序时它没有“听到”我的键盘输入时，我仍然卡住了。从我发现的问题来看，问题一定是所需的应用程序与我的应用程序不属于同一个桌面（因为这个回调函数对于我的应用程序的桌面是全局的）。我试图实现一些桌面切换技巧，但我真的不熟悉 Windows API，我所有的努力很快就失败了。MSDN 参考不足以作为教程。有什么方法可以让我的应用程序能够从我的计算机上的任何地方捕获键盘输入？

提前感谢任何帮助/提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:27:27.857

全局挂钩必须在 DLL 中实现，因此它可以挂钩到多个进程。如果要支持 64 位系统，则必须实现单独的 32 位和 64 位版本。的文档说明了`SetWindowsHookEx()`很多。

不要使用全局挂钩，而是尝试使用[原始输入](http://msdn.microsoft.com/en-us/library/ms645543.aspx)。用于[`RegisterRawInputDevices()`](http://msdn.microsoft.com/en-us/library/ms645600.aspx)注册对键盘的兴趣，然后处理[`WM_INPUT`](http://msdn.microsoft.com/en-us/library/ms645590.aspx)击键消息。

# c# - 当另一个类中的静态方法被调用时，C#如何通知一个类（简单的真/假）？

> ID：15454043
> 
> 赞同：1
> 
> 时间：2013-03-16T19:58:49.227
> 
> 标签：c#, multithreading, winforms

*   问题：

    当 ping 运行时，我如何通知/更新我的 winform（这会改变我假设的发送指示器）？

*   设想：

    假设我的线程已关闭向计算机发送 ping。而主线程正在显示/负责winform gui - 完全独立的类。

    1.  我有一个显示两个小状态指示器的**WinForm （发送和接收）**
    2.  我有一个`B`具有静态方法的类`Ping()`
    3.  我有一个不断运行的线程生成`Ping()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:07:20.973

你最好使用“事件”，看看微软提供的示例代码， http: [//msdn.microsoft.com/en-us/library/aa645739 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:10:19.967

正如这里的大多数人所建议的那样，使用事件来做到这一点。

```
public partial class Form1: Form {
    public Form1() {
        InitializeComponent();
    }

    private void button2_Click(object sender, EventArgs e) {
        Sample sample=new Sample();
        sample.SampleEvent+=sample_SampleEvent;
        sample.SampleMethod();
    }

    private void sample_SampleEvent() {
        Console.WriteLine("SampleMethod has been executed and the method on the WinForm has been notified about it.");
    }
}

public class Sample {
    public event SampleEventHandle SampleEvent;
    protected virtual void OnSampleEvent() {
        var handler=SampleEvent;
        if(handler!=null)
            handler();
    }

    public delegate void SampleEventHandle();

    public void SampleMethod() {
        OnSampleEvent();
    }
} 
```

# java - 自定义方法错误“...必须返回双精度类型的结果”

> ID：15454044
> 
> 赞同：0
> 
> 时间：2013-03-16T19:59:06.683
> 
> 标签：java, methods

该程序的目标是在给定用户输入的情况下计算体积、表面积、面积或周长。我仍在试图弄清楚我将如何循环某些事情，但这是我真正的问题：

我尝试运行程序，但我得到了上面显示的错误，还有返回语句，我将在哪里放置一个结束消息，告诉用户他希望知道的最终信息（程序计算的东西）。

非常感谢我的主要问题“......必须返回 double 类型的结果”的答案，对我在这里提到的其他事情的任何帮助也会有很长的路要走。

此外，正确格式化的代码非常烦人，我不确定告诉我将其间隔 4 个空格是什么意思，每当我这样做并且它有效时，总会有人对其进行编辑，这非常违反直觉。

```
import java.io.*;
public class circlemethods
{
    public static void main (String [] args) throws IOException
    {
      BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
      String numInput;  
      String reqInput;
      int num;
      int numInt = 0;
      System.out.println("This program will ask for a given user radius, then proceed to calculate the req");
      System.out.println("The program will use several methods to achieve this, all calling back to the main method");
      System.out.println("Press any key to continue");
      numInput = myInput.readLine();
      System.out.println("First, what would you like to calculate?");
      System.out.println("Enter '1' for Circumference, '2' for area, '3' for volume, or '4' for surface area");
      reqInput = myInput.readLine();
      numInt = Integer.parseInt (reqInput);
      System.out.println("Now enter the radius of the required shape");
      numInput = myInput.readLine();
      num = Integer.parseInt (numInput); 
    }
    public static  double circumference(double volume, double surfacearea, double area,  double radius) throws IOException {
      int numInt = 0;
      int num = 0;
      double circumference;
      for (int i = 0; i < volume ; i++) {
        if (numInt == 1)
        {
          System.out.println("You chose to calculate circumference, given the radius :"+ num );
          circumference = (3.14) * (2) * (num);
          return  circumference;
        }
        if (numInt == 2)
        {
          System.out.println("You chose to calculate area, given the radius:" + num);
          area = (3.14)*(num)*(num);
          return area;
        }
        if (numInt == 3)
        {
          System.out.println("You chose to calculate volume, given the radius:" + num);
          volume = 4/3 * (3.14)*(num)*(3)*(3)*(3);
          return volume;
        }      
        if (numInt == 4)
        {
          System.out.println("You chose to calculate surface area, given the radius:" + num);
          surfacearea = 4*(3.14)*(num)*(2)*(2);
          return surfacearea;
        }
        else
        {
          System.out.println("Invalid entry, please restart the program");  
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:04:35.973

你的方法应该总是返回一个双精度值。尝试这样的事情：

```
...

 if (numInt == 4)
 {
   System.out.println("You chose to calculate surface area, given the radius:" + num);
   surfacearea = 4*(3.14)*(num)*(2)*(2);
   return surfacearea;
 }

 else
 {
   return -1;
 } 
```

方法的调用者检查结果，如果它小于 0，它知道它失败并打印：

```
 System.out.println("Invalid entry, please restart the program"); 
```

**编辑：**

如果根本没有进入循环，那么该方法也应该返回 -1

# javascript - 在Javascript中按值返回对象属性的名称？

> ID：15454053
> 
> 赞同：0
> 
> 时间：2013-03-16T20:00:22.310
> 
> 标签：javascript, jquery

我有一个映射 id 的 javascript 对象：

```
codes = { 
    "admin" : 3,
    "manager" : 2,
    "basic" : 1
} 
```

给定一个值...

> 帐户类型 = 2;

...找到相应密钥（“经理”）的最优雅方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:01:59.390

```
for (var i in codes){
    if (codes[i] == accountType)
        alert(i);
} 
```

[**现场演示**](http://jsfiddle.net/PsXYR/)

jQuery 版本，虽然在这里使用它并没有什么好处：

```
$.each(codes, function(key, value){
        if (value == accountType)
            alert(key);
}); 
```

[**现场演示**](http://jsfiddle.net/PsXYR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:17:52.410

如果你经常这样做，保留一个用于反向查找的对象会很有效：

```
codeNames = { 
  "3": "admin",
  "2": "manager",
  "1": "basic"
} 
```

现在您可以按名称访问属性：

```
var name = codeNames[accountType]; 
```

您可以从对象创建查找`codes`对象：

```
var codeNames = {};
for (var i in codes){
  codeNames[codes[i]] = i;
} 
```

# windows - 查找在 Windows 上创建文件的进程

> ID：15454056
> 
> 赞同：4
> 
> 时间：2013-03-16T20:00:39.113
> 
> 标签：windows, file, process

有没有办法找到在 Windows 上创建特定文件的进程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T20:04:38.550

一般来说，没有。Windows 不会记录创建给定文件的进程。

您可能可以使用 SysInternals Process Monitor 之类的东西，它挂钩文件（和注册表 I/O），以查看是否可以捕获*正在*创建的文件，但是一旦创建（并且最后一个文件句柄已关闭），Windows 就会忘记它来自哪个过程。

如果文件在当前正在运行的进程中打开，您可以使用 Process Explorer（也来自 SysInternals）来找出是哪一个。

如果您识别文件扩展名，有时会有所帮助。或者，也许您可​​以查看文件以查看其中是否有任何明显的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:10:03.737

您所能做的就是在文件类型和 mimetypes 上的关联应用程序之间找到匹配项。但即便如此，这也只是一种猜测，因为文件类型可以与多个不同的应用程序相关联。

另一种不太成功的方法是打开有问题的文件并在标题中搜索已知的应用程序名称。有时可以在此处找到应用程序名称或令牌，但您需要从要搜索的名称字符串列表开始。

# r - 使用 utils::globalVariables 避免 R 包检查期间的绑定错误

> ID：15454057
> 
> 赞同：6
> 
> 时间：2013-03-16T20:00:39.190
> 
> 标签：r, global-variables, cran

当我为 CRAN 运行 R 包检查（在 Windows 7、Rstudio、R 2.15.3 和 Rtools30 上）时，我无法摆脱一系列“无可见绑定”注释。

我已经尝试了以下但没有成功： - 使用推荐的 utils::globalVariables(c("sig","dat",...etc - 将变量归零，例如，sig = NULL; dat = NULL;

最终发生的事情是我得到“无法更改 sig 的锁定绑定的值”等。代码有效，但由于这些绑定错误，它不会被接受。

CRAN 的人告诉我使用：utils::globalVariables()。我应该把这个功能放在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T15:14:58.793

在使用这些非绑定全局变量的 .R 文件的最顶部添加`utils::globalVariables(c("obj1", "obj2"))`，例如 obj1、obj2。

# c - 从没有malloc的函数返回字符串

> ID：15454065
> 
> 赞同：23
> 
> 时间：2013-03-16T20:00:55.477
> 
> 标签：c, pointers, malloc

是否可以在不调用的情况下从函数返回字符串`malloc`？我有一个功能如下：

```
char* getString(){
      char tempStr[20]

      // open file, read char by char and assign to tempStr
      // ....

      char* str = (char*)malloc(sizeof(char)*20);
      strcpy(str, tempStr); // assume this copy the null terminating char as well
      return str;
} 
```

然后当我调用 时`getString()`，我将返回值分配给 a `char*`，然后在完成后释放它，如下所示：

```
void randomFunction(){
      char* line = NULL;
      int i = 0;
      while (i < 1000) {
           line = getString();
           // do stuff with line
           free (line);  
           line = NULL;
      }
} 
```

但是，我想知道是否有任何方法可以做到这一点`malloc`？而且，这是从 C 函数返回字符串的正确方法吗？我试图做一些关于如何在没有的情况下返回的研究`malloc`，但没有找到明确的答案。我是 C 新手，仍在学习。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-16T20:02:56.273

您不能从函数中临时返回，除非您使用 malloc，否则函数**中定义**的字符数组将是临时的。另一种解决方案是将字符数组作为参数传递给函数并将其用作输出参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-16T20:07:00.167

从函数返回字符串有三种常用方法。（嗯，实际上没有，但是有三种常见的方法可以返回*指向*字符串的指针，然后调用者可以使用它来访问字符串。）

1.  `malloc()`使用函数内部为字符串分配空间。这是最灵活的方法，但它使调用者负责`free()`分配的数组。它还可以强加一些性能开销。

2.  要求调用者为字符串分配空间并传入指向该空间的指针。这给调用者带来了一些不便。特别是，调用者必须决定字符串的大小。

3.  返回指向`static`函数内部定义的数组（的第一个元素）的指针。函数返回后数组会继续存在，但只有一个副本，这意味着后续调用将破坏之前调用返回的结果。这也意味着数组必须具有一些固定大小，在您编写代码时选择。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-16T20:03:25.960

这取决于。

您可以决定并记录返回的字符串是指向某个静态内部缓冲区的指针。那么你的例程不是可重入的（也不是线程安全的）。例如`ctime`或`getpwent`这样做。

更好的做法是将结果字符串*和大小*作为参数传递，并填充该字符串并可能返回该字符串。`getcwd`（或`snprintf`or`strftime`返回大小，而不是指针）以这种方式工作。

但通常，您决定并记录返回的字符串是堆分配的，这是调用者`free`对它的责任。在这种情况下，您可能想要使用`strdup`或`asprintf`。

您可能会在整个程序中使用[Boehm 的保守垃圾收集器](http://www.hboehm.info/gc/)（例如，将其`GC_STRDUP`or`GC_MALLOC_ATOMIC`用于字符串，以及`GC_MALLOC`用于包含一些指针的堆值。）

如果您觉得标准`malloc`或`strdup`太慢（但请先测量），您可以拥有自己的池分配器等。

您也可以有其他方案（但记录它们很重要）。例如，您可以返回一些[interned string](http://en.wikipedia.org/wiki/Interned_string)，甚至是规范的 interned string （有时称为“quark”或“symbol”） - 然后能够使用指针相等而不是字符串相等。您还可以有一些[参考计数器](http://en.wikipedia.org/wiki/Reference_counting)方案。看看[Glib](https://developer.gnome.org/glib/stable/)（来自 GTK，但可在 GUI 程序之外使用！）提供的示例：[GString-s](https://developer.gnome.org/glib/stable/glib-Strings.html)、[GQuark-s](https://developer.gnome.org/glib/stable/glib-Quarks.html)、[字符串实用程序](https://developer.gnome.org/glib/stable/glib-String-Utility-Functions.html)

然而，重要的是决定结果是否是堆分配的，并明确定义谁有责任释放（以及应该如何释放）堆分配的结果。

您可能想使用[valgrind](http://valgrind.org/)来追踪内存泄漏。不要忘记传递`-Wall -g`给您的`gcc`编译器！

PS。我会考虑使用 Boehm 的 GC。而且我认为`malloc`（或`strdup`，`asprintf`....）不应该出于性能原因而被拒绝（您可以选择其他一些更快`malloc`的实现，或者使用您自己的内存池）。但是，内存泄漏可能是一个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T20:06:03.537

将内存分配移出函数的正常方法是传入指针。尽管在实践中，您希望确保您也不会越过缓冲区边界。

```
char* getString(char* tempStr){
          // open file, read char by char and assign to tempStr
          // ....

          return tempStr;
    }

void randomFunction(){
        char line[20];
        int i = 0;
        while (i < 1000) {
             getString(line);
             // do stuff with line

        }
  } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-16T20:06:29.703

由于您的字符串（显然）总是 20 个字符，因此您可以简单地执行以下操作：

```
void getString( char *outputString ) {
    // do stuff to outputString instead of mallocing, or use local memory and copy it at the end
}

char line[20];
for( ... ) {
    getString( line );
    // do things with line
} 
```

因为这避免了许多小型 malloc，所以速度更快。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-16T20:08:24.747

在 C 中执行此操作的常用方法是将字符串作为参数传递给函数。

```
char *getString(char *str, int size){
      // open file, read char by char and assign to tempStr
      // ....

      strncpy(str, tempStr, size); // assume this copies the null terminator
      return str;
} 
```

或者，您可以将字符串声明为静态，或者在文件或全局范围内，然后复制到其中。但是，请确保如果您将指向堆分配缓冲区的指针存储在此符号中，则在再次分配之前将其释放。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-03T01:48:10.770

我不是 C 专家，但我认为这在 C 中是可能的。（这是基于 C++ 解决方案。）当然你需要知道字符串大小的界限（这里是 99），但你可以返回一个字符串无需分配，也无需输出参数。

[https://onlinegdb.com/r1akUBiHB](https://onlinegdb.com/r1akUBiHB)

```
#include <stdio.h>
#include <string.h>

typedef struct str_{
    char c[99];
} str;

str fun(int i){
    str ret;
    if(i > 5) strcpy(ret.c, "big");
    else      strcpy(ret.c, "small");
    return ret;
}

int main(int argc, char* argv[]){
    str ret = fun(argc);
    printf("%s", ret.c);
    return 0;
} 
```

我不确定这是否取决于 C 强制执行称为返回值优化的东西。

另外我不知道您是否想要不分配，因为您根本不能或仅用于表演。如果是第二个，您可以实现一个结构，如果字符串不适合预定义的大小（此处为 99），则有条件地分配。

这基本上是`std::string`C++ 中所做的，对于短字符串它不会在实践中分配。

请注意，如果这有效，它也将是线程安全的。（这里依赖全局变量的其他解决方案不是线程安全的。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-17T03:11:05.703

只需在函数中将字符串声明为静态并返回即可。

# youtube-api - 无法按开发者标签搜索 YouTube 视频

> ID：15454072
> 
> 赞同：0
> 
> 时间：2013-03-16T20:01:48.230
> 
> 标签：youtube-api

按开发者标签搜索[https://gdata.youtube.com/feeds/api/videos?category=%7Bhttp://gdata.youtube.com/schemas/2007/developertags.cat%7Dmy_developer_tag&v=2&key=my_developer_key](https://gdata.youtube.com/feeds/api/videos?category=%7Bhttp://gdata.youtube.com/schemas/2007/developertags.cat%7Dmy_developer_tag&v=2&key=my_developer_key)始终返回 0结果。开发者标签至少存在于我正在寻找的一个视频中。

```
...<openSearch:totalResults>0</openSearch:totalResults>... 
```

[在文档https://developers.google.com/youtube/2.0/developers_guide_protocol_category_keyword_browsing#Browsing_with_Categories_and_Keywords](https://developers.google.com/youtube/2.0/developers_guide_protocol_category_keyword_browsing#Browsing_with_Categories_and_Keywords)中解释得很好，但它根本不起作用

我在 URL 中的“X-GData-Key”标头和“key”参数中发送我的开发人员密钥，并且我在视频上传几天后进行了测试，所以这不是传播时间的问题。

当我基于通用搜索短语发出查询时，我可以通过获取开发人员标签来确认请求。

我的简单问题是如何通过开发者密钥搜索所有 YouTube 视频，以便我只能选择我的应用程序上传的视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:05:28.970

我刚刚测试了记录在案的行为，一切都按我的预期工作。视频需要几个小时才能出现在搜索索引中，但一旦出现，基于开发者标签的搜索也会找到它。

[您可以通过请求http://gdata.youtube.com/feeds/api/videos?v=2&q=](http://gdata.youtube.com/feeds/api/videos?v=2&q=) **VIDEO_ID**并经常尝试直到返回结果来确定视频是否已进入搜索索引。（假设**VIDEO_ID**不以“-”字符开头...）

一旦您确定它在索引中，就会请求[https://gdata.youtube.com/feeds/api/videos?category=%7Bhttp://gdata.youtube.com/schemas/2007/developertags.cat% 7D](https://gdata.youtube.com/feeds/api/videos?category=%7Bhttp://gdata.youtube.com/schemas/2007/developertags.cat%7D) **DEVELOPER_TAG** &v=2&key= **DEVELOPER_KEY**应该返回它。执行该搜索时，您不需要包含`Authorization`标题 — 您只需确保使用与执行初始上传时相同的**DEVELOPER_KEY**和**DEVELOPER_TAG值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:40:56.977

不幸的是，根本没有时间延迟或其他延迟。开发者标签根本无法搜索视频。我最终将视频的主题设置为我的标识符，因此我搜索具有该特定标识符的所有视频作为通用查询，并删除不包含开发者标签的视频。所以它存在，但无法搜索。

# android - Android - if/else 语句通过但值被正确传递

> ID：15454073
> 
> 赞同：0
> 
> 时间：2013-03-16T20:01:51.227
> 
> 标签：android, if-statement, imageview

我正在制作一个 android 应用程序，该应用程序根据用户在先前活动中的输入/选择显示游戏角色。我使用 Extras 来做到这一点：

```
UserName = getIntent().getExtras().getSerializable("Name").toString();
UserCharacter = (String) getIntent().getExtras().getSerializable("Char").toString();
UserItem = getIntent().getExtras().getSerializable("Itemz").toString();
UserRating = getIntent().getExtras().getSerializable("Stars").toString(); 
```

我知道这行得通，因为，

```
summary = (TextView) findViewById (R.id.Summary);
summary.setText("Name: " + UserName + "\nCharacter: " + UserCharacter + "\nItems: " + UserItem + "\nRating: " + UserRating); 
```

完全可以显示用户的选择。但是，当我将这些数据传递到 if/else-if 语句中时，代码会简单地忽略 if 语句。这是一个例子：

```
if (UserItem == "Wing + Helmet + Scarf")
image.setImageResource(R.drawable.tal); 
```

该应用程序不会显示新的 ImageView，而是仅显示我必须用来在 .xml 中创建 ImageView 的默认图像。我尝试了各种方法来解决这个问题，但没有成功。我知道 ImageResource 部分有效，因为如果从 if 语句中取出它，那么它会完全改变 ImageView。任何建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:09:31.413

```
if (UserItem == "Wing + Helmet + Scarf")
   image.setImageResource(R.drawable.tal); 
```

您的条件始终返回 false，因为您正在比较引用而不是值。你必须使用`equals()`方法：

```
if (UserItem.equals("Wing + Helmet + Scarf"))
   image.setImageResource(R.drawable.tal); 
```

现在它应该可以工作了。

# ontology - 如何将图像文件作为个体插入本体类

> ID：15454087
> 
> 赞同：0
> 
> 时间：2013-03-16T20:03:16.020
> 
> 标签：ontology

我使用 protege 4.1，并且我有一类动物和其他图像类，我需要插入图像文件，例如 .jpg、.gif、.png 作为“图像”类的个体，以将其分配给“图像”的一个实例动物”类，我怎样才能插入这个图像文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:17:03.323

我不明白“插入”类的确切含义。如果您已经有类*Animal*和*Image*，我会创建一个关系*hasImage*：

```
:Animal :hasImage :Image 
```

对于*Image*，您可以添加关系，例如：

```
:Image :hasURL :URL
:Image :hasName :string
:Image :hasType :string
... 
```

注意：这个符号根本不正式......

# ember.js - Different actions for Different events on same element using action helper

> ID：15454090
> 
> 赞同：1
> 
> 时间：2013-03-16T20:03:29.247
> 
> 标签：ember.js, handlebars.js

I have a div which should execute the method **speak** on click:

**Corresponding Action Helper:**

```
<div {{action speak}}>Say</div> 
```

If it were to execute the method **wiggle** on mouse enter:

**Corresponding Action Helper:**

```
<div {{action wiggle on="mouseEnter"}}>Say</div> 
```

Now I want to combine both, I want it to execute **speak** on `click` as well as execute **wiggle** on `mouseEnter`

what would be the corresponding `{{action}}` helper ?

# Your Attention !

I know the following would work:

```
App.MultiEventView = Ember.View.extend({
  click: function(){
    /* some code */
  },
  mouseEnter: function(){
    /* some code */
  }
})

{{ view App.MultiEventView }} 
```

But can we define multiple events using `action` helper instead of defining the view ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:10:09.973

Not on the same div. {{action}} translates to a `data-ember-action` attribute on the element, and there's no mechanism for overloading that for more than one action.

What you can do is wrap your div in another div with the second action.

# php - PHP SQL 结果不会填充配置文件页面

> ID：15454093
> 
> 赞同：0
> 
> 时间：2013-03-16T20:03:30.780
> 
> 标签：php, html, mysql, session, profile

我是 PHP 和 MySQL 的新手，遇到了一些麻烦。本质上，音乐家的个人资料页面应该使用以乐队名称作为搜索参数的查询来填充（姓名、图片、流派、简历等）。

向用户显示乐队名称列表（可点击链接），根据他们点击的乐队名称，传递一个值并显示他们的信息。但是，个人资料页面是空的！这是音乐家的名字作为表格中的链接......

```
<form method="post" action="bandPageAll.php">
...
<?php                               
$i = 0;
while ($i < $num) {
    $GENRE = mysql_result($result,$i,"profile.PROFILE_GENRE");
    $BANDNAME = mysql_result($result,$i,"profile.PROFILE_BANDNAME");
?>                              
<tbody>
    <tr>
    <td><?php echo $GENRE; ?></td>
    <td><a href="bandPageAll.php" name="band"><?php echo $BANDNAME; ?></a></td>
    </tr>
</tbody>
... 
```

这是个人资料页面的 php 代码...

```
<?php
session_start();
foreach($_POST AS $key => $val) {
$_SESSION[$key]=$val;
}

mysql_connect("***", "***", "***");
mysql_select_db("***");

$bandname=$_POST['band'];
$bandname = stripslashes($bandname);
$bandname = mysql_real_escape_string($bandname);

$sql="SELECT * FROM profile WHERE PROFILE_BANDNAME='$bandname'";
$result=mysql_query($sql);

$row = mysql_fetch_array($result);

$name = $row['PROFILE_BANDNAME'];
$genre = $row['PROFILE_GENRE'];
$bio = $row['PROFILE_BANDBIO'];
$bandpicture = $row['PROFILE_PICTURE'];
?> 
```

....然后是html代码。整个个人资料页面都有回声，与样式相呼应的 $name、$genre、$bio 和 $bandpicture，但这并不重要。除了我编写的导航栏和页脚之外，页面的“正文”显示为空，我不知道为什么。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:09:49.257

您正在尝试在没有提交调用的情况下发布数据。这不会向您的个人资料页面发送任何内容。试试这个：

```
<td><input type="submit" name="band" value="<?php echo $BANDNAME; ?>" /></td> 
```

在调用 mysql_fetch_assoc($result) 后尝试使用 print_r($row)。这将打印出 SQL 查询的所有结果。

编辑：我忘记了 mysql_fetch_array 已被弃用。我编辑了我的答案以反映这一点。

# vb.net - 分别获取完整路径和文件名

> ID：15454103
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:04:26.893
> 
> 标签：vb.net, winforms, listbox

我正在尝试获取每个文件的文件名和完整路径，下面的代码段搜索“foo”文件夹中的所有文件夹并将文件名输出为`ListBox`.

```
Dim di As New DirectoryInfo("C:\\foo")
Dim diar As FileInfo() = di.GetFiles("*.*", SearchOption.AllDirectories)
Dim dra As FileInfo

For Each dra In diar
  ListBox.Items.Add(dra)
  ListBox1.Items.Add(would be full path here)
Next 
```

但是我也想输出每个文件的完整路径，`ListBox1`我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:07:45.483

```
ListBox1.Items.Add(dra.FullName) 
```

此外，您可以使用`dra.Name`文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:19:54.513

如果你愿意，你也可以使用`linq`版本:)

```
Dim di As New DirectoryInfo("C:\\foo")
ListBox1.Items.AddRange(
    di.GetFiles("*.*", SearchOption.AllDirectories) _
    .OfType(Of FileInfo).Select(Function(f) f.FullName).ToArray()) 
```

# javascript - 在条件中检查孩子的属性

> ID：15454115
> 
> 赞同：0
> 
> 时间：2013-03-16T20:05:23.900
> 
> 标签：javascript, jquery, html

我正在尝试查看是否`<ul id="sortable">`有少于 3 个`<li>`孩子并且每个孩子不**包含**（`qual="qualX"`其中“X”是一个整数，“qual”是一个属性）。

有一个 3x2 网格`<div id="qualities">`，当单击 a 时`<div class="quality">`，它会将 a 添加`<li>`到`<ul id="sortable">`。添加部分有效，但我想做到这一点，这样你就不能`<li>`多次添加相同的内容，并且总数不超过 3`<li>`个。现在，只有 3`<li>`限制器在工作；“不要两次添加相同的东西”代码不是，因为它现在总是正确的（显然）。

我的逻辑代码是

```
$(".quality").click(function() {
    if($("#sortable").children().length < 3 && $("#sortable").children("li").each().attr("qual") !== $(this).attr("qual")) {
        $("#sortable").append("<li qual=" + $(this).attr("qual") + ">" + $(this).text() + "</li>");
    }
}); 
```

而使用它的 HTML 是

```
<ul>
    <li style="display:inline-block;">
        <div id="qualities">
            <div style="width:600px;overflow:hidden;background:blue;">
                <div class="quality" qual="qual1" style="width:200px;float:left;">
                    Quality 1
                </div>
                <div class="quality" qual="qual2" style="width:200px;float:left;">
                    Quality 2
                </div>
                <div class="quality" qual="qual3" style="width:200px;float:left;">
                    Quality 3
                </div>
                <div class="quality" qual="qual4" style="width:200px;float:left;">
                    Quality 4
                </div>
                <div class="quality" qual="qual5" style="width:200px;float:left;">
                    Quality 5
                </div>
                <div class="quality" qual="qual6" style="width:200px;float:left;">
                    Quality 6
                </div>
            </div>
        </div>
    </li>
    <li style="display:inline-block;">
        <div id="priority">
            <ul id="sortable">
                <!--<li>Item 1</li>-->
            </ul>
        </div>
    </li>
</ul>

<div id="priority">
    <ul id="sortable">
        <!--<li>Quality 1</li>-->
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:08:29.483

```
... && !$("#sortable").children("[qual=" + $(this).attr('qual') + "]").length 
```

这`qual`使用属性选择器选择具有匹配属性的子项。

* * *

您可能应该使用`data-qual`over `qual`。

# c++ - C++ 程序的常用 ASM 编写部分？

> ID：15454118
> 
> 赞同：2
> 
> 时间：2013-03-16T20:05:50.250
> 
> 标签：c++, assembly

大多数 C++ 编译器允许您在 C++ 代码中内联 ASM。C++ 程序的哪些部分是这种 ASM 内联的典型竞争者？C++ 中是否有编译器仍在努力优化的特定部分？

# ios - 将数据从 VC 到 TabBar 到 VC (iOS)

> ID：15454119
> 
> 赞同：0
> 
> 时间：2013-03-16T20:05:51.290
> 
> 标签：ios, uistoryboardsegue

我最近更改了一个带有故事板的项目。

之前是 VC -> VC1 -> VC2 并使用此代码在 ViewControllers 之间分隔数据

```
if([segue.identified isEqualToString:@"SegueData"]){
   StoreViewController *svc = [segue destinationViewController];
   NSIndexPath *path = [allStoresTable indexPathForSelectedRow];
   Stores *s = [stores objectAtIndex:path.row];
   [svc setCurrentStores:s];
} 
```

现在我需要从 VC -> TabBar -> VC1, VC2 传递该数据

我现在该怎么做？

我已经从这里尝试了这个代码，它与我的问题（[http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=2884](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=2884)）类似，但是应用程序在运行时崩溃了。

```
UITabBarController *tabBarController = segue.destinationController;

UINavigationController *navController1 = [tabBarController.viewControllers objectAtIndex:0];
StoreViewController *svc= navController1.topViewController;
NSIndexPath *path = [allStoresTable indexPathForSelectedRow];
Stores *s = [stores objectAtIndex:path.row];
[svc setCurrentStores:s]; 
```

这条线也导致了崩溃

```
StoreViewController *svc= navController1.topViewController; 
```

给我警告“不兼容的指针类型初始化 'StoreViewController * _strong' 使用类型为 'UIViewController*' 的表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:43:07.337

好的，您的问题出在这条线上，因为索引 0 处没有导航控制器，这就是您的 StoreViewController 所在的位置：

```
UINavigationController *navController1 = [tabBarController.viewControllers objectAtIndex:0]; 
```

只需将该行更改为：

```
StoreViewController *scv = [tabBarController.viewControllers objectAtIndex:0]; 
```

并删除开始 StoreViewController = *svc ... 的行。

# php - 将函数作为参数传递

> ID：15454120
> 
> 赞同：0
> 
> 时间：2013-03-16T20:05:58.763
> 
> 标签：php

我不知道这是否可能，但我想通过将函数作为参数传递来调用函数内的函数，例如......

```
timeThis(test());

function test(){
   $i = 0;
   echo "add 1";
   $i += 1;
   echo "minus 10";
   $i -= l0;
}

function timeThis($fun){
   $timer = new timer;
   $timer->start();
   $fun;
   $timer->pause();
   echo $timer->get();
} 
```

在php中可能有这样的事情吗？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:07:59.267

是的，这是可能的（在 PHP 5.4 中）：

```
function timeThis(callable $fun){
   ...
   $fun();
   ...
} 
```

用法：

```
$var = function () { ... }
timeThis($a); 
```

或者您可以通过字符串调用函数：

```
function aFunc() { ... }
call_user_func('aFunc'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:09:02.733

这适用于所有版本的 PHP5。你可以使用“可调用”，但我相信这限制了你到 php5.4。

```
timeThis('test');

function test(){
   $i = 0;
   echo "add 1";
   $i += 1;
   echo "minus 10";
   $i -= l0;
}

function timeThis($fun){
   $timer = new timer;
   $timer->start();
   $fun();
   //or
   call_user_func($fun);
   $timer->pause();
   echo $timer->get();
} 
```

# oracle-apex - 在交互式报表中显示“-”而不是“0”

> ID：15454122
> 
> 赞同：0
> 
> 时间：2013-03-16T20:06:04.113
> 
> 标签：oracle-apex

我有以下 sql 查询，用于创建报告以显示产品的修订历史记录。初始记录是修订版 0，如果编辑了某些内容，它将成为修订版 1，依此类推。而不是在报告中显示“0”，我更愿意显示“-”，有没有办法可以实现？

```
SELECT
product_id,
name,
description,
revision,
revision,reason,
'DETAILS' "VIEW DETAILS"
FROM product_table
WHERE product_id = :P2_product_id
ORDER BY REVISION DESC
--order by case when Revision is null then 1 else 0 end, revision desc 
```

product_id - 数字
名称 - varchar2
描述 - varchar2
修订 - 数字
revision_reason - varchar2

我确实尝试了被注释掉的行，但是报告继续显示 0 而不是 -。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T00:26:52.563

你所追求的是**解码**功能。

## 解决方案

```
SELECT
product_id,
name,
description,
decode(revision,0,'-',revision)revision,
revision_reason,
'DETAILS' "VIEW DETAILS"
FROM product_table
WHERE product_id = :P2_product_id
ORDER BY REVISION DESC
--order by case when Revision is null then 1 else 0 end, revision desc 
```

## 解释

将列替换`revision,`为 `decode(revision,0,'-',revision)revision,`。确保您[阅读了 decode](http://www.techonthenet.com/oracle/functions/decode.php)的工作原理——它非常有用。

### 笔记

您的 SQL Select 查询包括以下内容：`revision,reason,`。从查看您的列定义来看，我认为您的意思是`revision_reason,`。我相应地更新了我的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T05:20:31.370

我知道这个问题有点老并且已经回答了，但是我今天遇到了同样的问题，使用`DECODE`for 显示连字符而不是 0 会导致列类型切换到`STRING`，这会阻止多位数字的正确排序。

因此，这是一种将列保持为的替代方法`NUMBER`：

```
CASE WHEN column = 0 THEN NULL ELSE column END AS column 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T22:57:46.413

您还可以使用`nullif(revision,'-')`和使用“将空值显示为”属性。

# wordpress - 为 wordpress 站点选择 Internet Explorer 中不可见的框选项

> ID：15454123
> 
> 赞同：1
> 
> 时间：2013-03-16T20:06:07.013
> 
> 标签：wordpress, internet-explorer, select, drop-down-menu, dropdownbox

我面临选择框的问题，选项在我的 wordpress 网站上不可见。我已经使用 JavaScript 从一个 xml 文件中提取了国家名称，并将其用作选择框的选项。`Firefox`并`Chrome`根据需要显示选项，但`IE`不显示国家/地区的选项。您能否帮助我如何解决此问题并显示与 Chrome 和 firefox dpes 相同的内容。

[这是我的网站](http://rabbitrabbitmobile.net/)，代码如下：

```
$(function() { 
    $.get( 'ttalk.xml', {}, function(data) { 
        var optionHtml = '<option value="Please Select" selected="selected">Please Select</option>';
        $(data).find('item').each(function() {
            var _item = $(this);
            html = '<option value=' + _item.find('code').text() + '>';
            var name = _item.find('country').text();
            html += name.split('+').join(' ')+ '</option>';
            optionHtml += html; 
        });  
        $('#destinationList').html(optionHtml);
        $('#destination').html(optionHtml);
    }, 'text' ); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:00:29.303

You may try this

```
$(function() {
    var xml;
    $.get( 'ttalk.xml', {}, function(data) { 
        if ($.browser.msie)
        {
            var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.loadXML(data);
            xml = xmlDoc;
        }
        else xml = data;

        var optionHtml = '<option value="Please Select" selected="selected">Please Select</option>';
        $(xml).find('item').each(function() {
            var _item = $(this);
            html = '<option value=' + _item.find('code').text() + '>';
            var name = _item.find('country').text();
            html += name.split('+').join(' ')+ '</option>';
            optionHtml += html; 
        });  
        $('#destinationList').html(optionHtml);
        $('#destination').html(optionHtml);
    }, 'text' ); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:22:21.940

我认为您可能对 xml 文档的编码有疑问。Web 开发工具栏向我显示此错误。

虽然它在 FF 和 Chrome 中仍然有效，但 IE8 可能会遇到极端问题。

```
Timestamp: 13-03-16 6:23:09 PM
Error: XML or text declaration not at start of entity
Source File: http://rabbitrabbitmobile.net/ttalk.xml
Line: 2, Column: 1
Source Code:
<?xml version="1.0" encoding="ISO-8859-1" ?><CHANNEL> 
```

-d

# javascript - 在 iframe 中加载窗口

> ID：15454126
> 
> 赞同：0
> 
> 时间：2013-03-16T20:06:23.800
> 
> 标签：javascript, iframe

我的页面上有一个 iframe，其中有一个链接可以打开 xyz.com 的窗口。唯一的事情是它会自动在 iframe 之外打开这个窗口。我已将此脚本嵌入到 iframe 页面中：

```
<script>
function open_win()
{
window.open("http://www.w3schools.com","_blank","toolbar=yes, location=yes,        directories=no, status=no, menubar=yes, scrollbars=yes, resizable=no, copyhistory=yes,   width=400, height=400");
}
</script>
</head> 
```

窗口显示，但是当我只想让它显示在内框内时，它显示在所有内容之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:13:58.797

浏览器窗口中有网页，其中可以包含 iframe。

您不能将窗口放在 iframe 中。那将是窗口中网页中的 iframe 中的窗口，这将是奇怪的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:14:43.653

要将新内容保留在 iFrame 中，也许您应该改用显示/隐藏层。

# hex - 将十进制数转换为十六进制

> ID：15454128
> 
> 赞同：0
> 
> 时间：2013-03-16T20:06:26.010
> 
> 标签：hex, decimal

我有一个嵌入式设备，它以十六进制形式存储十进制数字，但我在转换时遇到了问题。

以下是它如何存储十进制值的一些示例。

```
1 = 80 3f
1.1 = cd cc 8c 3f
1.2 = 9a 99 99 3f
1.3 = 66 66 a6 3f
1.4 = 33 33 b3 3f
1.5 = c0 3f
1.6 = cd cc cc 3f
1.7 = 9a 99 d9 3f
1.8 = 66 66 e6 3f
1.9 = 33 33 f3 3f
2 = 40
7.3 = 9a 99 e9 40 
```

有谁看到转换这些数字的过程可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:12:21.437

它们是大端浮点数

在 python 中，它们可以用格式字符串 !f 解压

例子

```
>>> a="\x40\x00\x00\x00"
>>> import struct
>>> struct.unpack("!f",a)
>>> (2.0,) 
```

# playframework-2.0 - japid42 模板引擎 - 更改默认 japid 根视图目录

> ID：15454130
> 
> 赞同：0
> 
> 时间：2013-03-16T20:06:39.243
> 
> 标签：playframework-2.0, japid

如果使用 Play2 和 japid42 的示例应用程序[，](https://github.com/branaway/computer-japid)您将看到它在以下默认结构下拥有 japid 的视图：

```
{your_app}/japidroot/japidview 
```

如何将其更改为：（`{your_app}/app/views ?` 标准/经典游戏的结构）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:39:59.000

好的。我已经想通了。

```
public class Global extends JapidRenderer {
    @Override
    public void onStartJapid() {
        setTemplateRoot("app");
... 
```

此配置表明 japid 的“app”文件夹是 japid 脚本所在的根目录，然后它会尝试查找/查找“japidviews”文件夹。

所以，我需要做的是：

> 1.  在 app/rapidviews 中创建我的快速模板（html 文件）
> 2.  使用 setTemplateRoot(..) 方法让 japd 知道这个 'rapidviews' 的位置

我可以拥有“japidviews”，但可以拥有“views”。至少它在“app”目录中，但不在外面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T08:29:48.237

```
import play.Play;
import play.mvc.Http.RequestHeader;
import play.mvc.Result;
import play.mvc.Results;
import cn.bran.japid.template.JapidRenderer;
import cn.bran.play.JapidController;

public class Global extends JapidRenderer {
  @Override
  public void onStartJapid() {
    setTemplateRoot("japidroot");
    setLogVerbose(true);
    setKeepJavaFiles(false); // keep the Java code derived from Japid scripts in memory only
  }

  @Override
  public Result onError(RequestHeader h, Throwable t) {
    if (Play.application().isProd())
      return Results.internalServerError(JapidController.renderJapidWith("onError.html", h, t));
    else
      return super.onError(h, t);
  }

  @Override
  public Result onBadRequest(RequestHeader r, String s) {
    if (Play.application().isProd())
      return Results.badRequest(JapidController.renderJapidWith("onBadRequest.html", r, s));
    else
      return super.onBadRequest(r, s);
  }

  @Override
  public Result onHandlerNotFound(RequestHeader r) {
    // usually one needs to use a customized error reporting in production.
    //
    if (Play.application().isProd() || Play.application().isDev())
      return Results.notFound(JapidController.renderJapidWith("onHandlerNotFound.html", r));
    else
      return super.onHandlerNotFound(r);
  }
} 
```

# c++ - 倒带导致分段错误

> ID：15454132
> 
> 赞同：2
> 
> 时间：2013-03-16T20:07:01.057
> 
> 标签：c++

当我的程序出现分段错误时，我一直在尝试进行一些调试。我已经追踪到调用倒带的位置。

创建 ISBNPrefix 对象时打开文件

```
ISBNPrefix::ISBNPrefix(const char* filename) 
{

   file = fopen( filename, "r" );

} 
```

文件是 ISBNPrefix 类的成员：

```
class ISBNPrefix {
FILE* file;
public:
    ISBNPrefix(const char* filename);
    bool isRegistered(int area) const;
    int minNoDigits(int area) const;
    bool isRegistered(int area, const char* publisher) const;
    ~ISBNPrefix();
}; 
```

创建 ISBNPrefix 对象的行是：

```
ISBNPrefix prefixList("prefixRanges.txt"); 
```

prefixRanges.txt 是我目录中的文件名

现在我在这个部分发生了分段错误：

```
//-------------------------------
cout << "MADE IT 1" << endl;
//-------------------------------
   rewind( file );
//-------------------------------
cout << "MADE IT 2" << endl;
//------------------------------- 
```

哪个输出：

```
MADE IT 1
Segmentation fault 
```

解构器：

```
ISBNPrefix::~ISBNPrefix()
{
   if( file != NULL )
   {
      fclose(file);
   }
} 
```

是文件被关闭的唯一地方

编辑：经过一些故障排除后，没有找到解决方案，建议我发布所有内容。由于我的声誉很低，而且我不能发布超过 2 个链接，因此 pastebin 链接位于评论部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:20:24.393

```
if(file != NULL)
cout << "ITS NOT NULL";
   rewind( file ); 
```

本来应该

```
if(file != NULL)
{
    cout << "ITS NOT NULL";
    rewind( file );
} 
```

在第一个版本中，只有 ourput 语句是有条件的，无论您如何缩进以下行......

我认为即使对于单个语句块也始终包含括号（{}）是一种好习惯，以避免像这样的简单事情。此外，正确格式化您的代码，并确保缩进遵循实际的代码结构。例如：

```
if(file != NULL)
    cout << "ITS NOT NULL";
rewind( file );  // it would have been more obvious this way 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T21:51:55.580

我没有看到你看到的问题，但我确实看到了一个严重的问题。在我的系统上，它会导致您的程序在退出时崩溃。也许在您的系统上，这是您的问题的原因。

ISBN 标头中的此代码

```
class ISBN{
        char area[5];
        char publisher[7];
        char title[6];
        bool registered;
        char ISBNstr[11];
        bool isRegistered(const ISBNPrefix& list); 
```

和 ISBN 构造函数中的这段代码

```
ISBN::ISBN()
{
   for(int i=0;i<=5;i++)
   {
   area[i] = '\0';
   }

   for(int i=0;i<=7;i++)
   {
   publisher[i] = '\0';
   }

   for(int i=0;i<=6;i++)
   {
   title[i] = '\0';
   }

   for(int i=0;i<=11;i++)
   {
   ISBNstr[i] = '\0';
   }
   registered = false;
} 
```

这些循环都绕了一圈太多次。`i<5`例如，它不应该`i<=5`在区域循环中

```
 for(int i=0;i<5;i++)
   {
   area[i] = '\0';
   } 
```

由于这个错误，您正在破坏内存，这很容易导致您看到的问题。

# c# - 回放结束时 XNA NAudio WaveChannel32 打印线

> ID：15454133
> 
> 赞同：0
> 
> 时间：2013-03-16T20:07:17.760
> 
> 标签：c#, xna, naudio, wave, replay

我正在使用 NAudio WaveChannel32 重播录制的声音，现在我希望在重播完成后自动打印一些行。

所以在 XNA 更新函数中，它就像：

```
if(*Replay has finished*)
// Do Something
else
//Do some other things 
```

if 条件应该是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:09:27.687

NAudio 输出设备都会引发`PlaybackStopped`事件，这是确定回放何时结束的最佳方式。

# mysql - 在 codeigniter 中使用 MySQL join 需要帮助

> ID：15454137
> 
> 赞同：2
> 
> 时间：2013-03-16T20:07:26.030
> 
> 标签：mysql, codeigniter

我有一个名为 users 的表。

“用户”的结构如下：

```
ID          int(11)
Name        varchar(50)
CreatedBy   int(11) 
```

需要注意的一点是，任何行中的**“CreatedBy”**字段都包含创建该行的用户（用户）的 ID。

现在我需要显示所有用户的列表以及创建者的姓名。不是**“CreatedBy”**字段，它是一个整数。

例如，如果我的用户表中有这些行：

```
ID          Name          CreatedBy

1           Nina              1
2           John Doe          1
3           Samir Nasri       2 
```

然后我需要将它们显示为：

```
Name             CreatedBy

Nina              Nina
John Doe          Nina
Samir Nasri       John Doe 
```

我如何在 Codeigniter 中执行此操作或仅使用原始 mysql 查询？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:13:01.997

很确定您可以将表连接到彼此，在这种情况下，以下应该可以工作：

```
select u.name, c.name from users u left join users c on (u.id=c.createdby) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:20:16.007

查看数据库中活动记录的文档，无需编写 sql 查询。

[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

```
$this->db->join('users u', 'u.id=c.createdby', 'left');
$query = $this->db->get('users c'); 
```

# php - 如何构建 PHP/JavaScript 流行的 Web 应用程序？

> ID：15454144
> 
> 赞同：0
> 
> 时间：2013-03-16T20:07:55.580
> 
> 标签：php, javascript, web-applications, frameworks, structure

我在这里遇到了一个严重的问题，我需要一个非常大的帮助来给出明确的答案。

*我是一名 Java 桌面应用程序开发人员，*但现在我开始**使用 PHP、JavaScript、html、css 编写 Web 应用程序**，我使用 jQuery Ajax 发送 Json 数据和 MySql 作为 DB。但我是在现有的大型应用程序之上构建的，所以我的问题是我并不真正了解应用程序的结构，但我确定他们使用的是自己的框架！

现在我真的很高兴为自己构建一个 Web 应用程序，但问题是**我不知道如何构建我的应用程序**！！！我从哪里开始？！以及如何以正确和时尚的方式做到这一点，我不介意使用框架，但我需要一个能够修改的框架

对于 PHP，我不喜欢 Codeigniter，因为它就像一个黑匣子！！如果已经制作好的结构我可以下载并理解它，那就太好了。对于 CSS，我使用 Boostrap，这对我来说似乎很酷而且很好。对于 JavaScript，我真的不明白为什么 JavaScript 框架有用！如果我可以将它们与 PHP 框架一起使用！还是代替它！！！

让我解释一下我的想法，我需要一个固定的页眉和页脚，其中包含一些根据请求加载的正文页面（类似于 Facebook） 我需要使用 Ajax 来操作 DOM 以动态显示数据，我需要一个漂亮的 URL，并且基本的安全东西。

谢谢你阅读我希望你能帮助我感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:00:26.637

**首先**

我想在 windows 和linux 中`Xampp`或上开始我的 PHP开发，我不需要为此配置和. 一切都已预先配置并准备好开始。`wamp``lamp``PHP``mysql`

**用于 Dom 操作和 AJAX**

我肯定会选择`Jquery(wrtie less, DO more)`as javascript 框架。它与 Web 开发人员需要的所有东西捆绑在一起。详细信息可在[Jquery 网站上找到](http://jquery.com/)

**应用程序的一般结构**

作为 Web 应用程序的最佳实践，将您的服务器和客户端代码分开。此[链接](http://net.tutsplus.com/tutorials/php/organize-your-next-php-project-the-right-way/)将为您提供很多信息，以帮助您入门。它涵盖了您的大部分问题。

**框架**

如果我真的想使用框架，那么`zend`框架是我的最终选择。

作为

1.  有助于代码标准化
2.  无限制扩展课程
3.  内置函数和类以节省大量开发工作

有关[采埃孚的信息](http://net.tutsplus.com/tutorials/php/10-compelling-reasons-to-use-zend-framework/)

希望能帮助到你

# java - Netbeans Java .append 重复输出四次

> ID：15454146
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:07:58.197
> 
> 标签：java, string, loops, netbeans, append

为什么当我在输入文本字段中输入您的名字时出现 4 次“我的名字是”

> 公共无效比较问题（）{
> 
> 字符串文件名=目录+“memoryBank.txt”；

```
 String line = null;

    try {

        FileReader fileReader = 
            new FileReader(fileName);

        // Always wrap FileReader in BufferedReader.
        BufferedReader bufferedReader = 
            new BufferedReader(fileReader);

        while((line = bufferedReader.readLine()) != null) {
            String[] parts = line.split(" - ");
            String subject = parts[0];
            String question = parts[1];
            String answer = parts[2];
            //if(input.equals(question) && !subject.equals(currentSubject)){ currentSubject = subject; }
           // if(input.equals(question) && subject.equals(currentSubject)){ Output.append(answer); }
            if(input.contains("what is your name")) { 
                Output.append("my name is"+ newline);
            }
        }   

        bufferedReader.close();         
    }
    catch(FileNotFoundException ex) {
        System.out.println(
            "Unable to open file '" + 
            fileName + "'");                
    }
    catch(IOException ex) {
        System.out.println(
            "Error reading file '" 
            + fileName + "'");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:32:02.723

没有一个运行的例子，我相信你的问题就在这里......

```
while((line = bufferedReader.readLine()) != null) {
    String[] parts = line.split(" - ");
    String subject = parts[0];
    String question = parts[1];
    String answer = parts[2];
    //if(input.equals(question) && !subject.equals(currentSubject)){ currentSubject = subject; }
    // if(input.equals(question) && subject.equals(currentSubject)){ Output.append(answer); }
    if(input.contains("what is your name")) { 
        Output.append("my name is"+ newline);
    }
} 
```

基本上，在循环的每次运行中，如果`JTextField` `input`包含 text `what is your name`，它会将 附加`String` `"my name is"+ newline`到文本字段。如果文件中有 4 个问题，它将被追加 4 次，如果您有 100 个问题，它将被追加 100 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:20:44.080

在玩了几个小时后，我在 MadProgrammer 的帮助下设法修复了它。固定代码：

我无法让块报价工作，所以这是一张图片：

![在此处输入图像描述](../Images/af8c9d5a1ad8eb77b0190d8c43180f3a.png)

# mod-rewrite - 删除 index.php 但保留第一段表达式引擎

> ID：15454148
> 
> 赞同：1
> 
> 时间：2013-03-16T20:08:05.000
> 
> 标签：mod-rewrite, expressionengine

我正在做我的第一个表达式引擎站点.. 我想删除 index.php.. 我读了很多并尝试了基本的表达式引擎重写“删除”但是因为我根据语言重定向我的站点..我'我很确定有更好的方法！我在 index.php 之前有一个 lang 前缀，例如： domain.com/en/index.php/segment1/.... 现在我使用：

```
RewriteCond $2 !\.(index|css|js|gif|jpe?g|png|robot.txt|sitemap.xml) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)?/([^/]*)?/?([^/]*)?/?([^/]*)?/?([^/]*)?$ /$1/index.php?/$2/$3/$4/$5 [L] 
```

有没有更好或更好的方法！？

它工作正常，但如果我有超过 4 段，我将不得不添加 6 美元等等......当然有更好的方法......

问候..

本

编辑：

ChannelImages (DevDemon) 和/或 ChannelFiles 仍有 1 个问题。我需要使用 domain.com/?ACT=XX xx 测试上传位置是一个数字。

我试图添加 RewriteCond %{REQUEST_URI} !^(ACT=.*)$ [NC]

现在页面被重定向到主页.. /fr 或 /en..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T23:16:40.347

假设传入的 URL 结构总是这样的：

`http://domain.com/LangCode/anything`

其中`LangCode`和`anything`是变量，您可以在根目录中的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI}  !\.(index|css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_URI}  !(robot.txt|sitemap.xml)        [NC]
RewriteCond %{REQUEST_URI}  !index\.php                     [NC]
RewriteRule ^([^/]+)/(.*)/?$  /$1/index.php?/$2             [NC,L] 
```

静默映射到：

`http://domain.com/LangCode/index.php?/anything`

对于永久和可见的重定向，将 [NC,L] 替换为 [R=301,NC,L]

# bash - 读取所有文本文件并输入参数

> ID：15454149
> 
> 赞同：1
> 
> 时间：2013-03-16T20:08:05.110
> 
> 标签：bash, unix

我们如何读取所有文本文件并输入参数，以便我们可以将其处理为变量？

```
1.txt -->100
2.txt -->200
..
9.txt -->900

$ ./read.sh 1.txt 2.txt 3.txt 4.txt 5.txt 6.txt 7.txt 8.txt 9.txt 
```

读.sh：

```
$file1=$1
$file2=$2
...
$file9=$9 
```

但是它插入“1.txt”而不是100，我们如何获得文件的值而不是文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:56:16.530

不确定我是否正确理解了您的问题。如果要将作为参数传递给脚本的文件的内容放入变量`$file1`,`$file2`等中，则应`read.sh`如下所示：

```
file1=$(<"$1")
file2=$(<"$2")
...
file9=$(<"$9") 
```

请注意，在为变量赋值时，您必须使用不带前导的变量名`$`。

更通用的解决方案（假设您使用的是 bash 4）可能如下所示：

```
declare -A files

while [ -n "$1" ]; do
  files[$1]=$(<"$1")
  shift
done 
```

`declare -A`创建一个关联数组（或字典），您可以在其中存储名称→值映射，例如文件名→内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:24:07.220

我认为您正在寻找[xargs](http://en.wikipedia.org/wiki/Xargs)。在 .txt 文件所在的目录中尝试此命令：

```
cat * | xargs ./read.sh 
```

或者：

```
./read.sh `cat *` 
```

# mongodb - 为什么 MongoDb 在更新后按字母顺序对齐集合键

> ID：15454150
> 
> 赞同：2
> 
> 时间：2013-03-16T20:08:12.143
> 
> 标签：mongodb, mongodb-php

我已经看到，每当我们将任何值更新到 mongo 集合中时。更新后，它会按字母顺序重新排列键。假设当前模式是

```
 _id:"Objectid(blah blah)"
     id: "1", 
fullname: "user",
 username: "username", 
password: "password", 
```

更新后变成

```
 _id:"Objectid(blah blah)"
    fullname:"user"
    id:"1"
    password:"password"
    username:"user" 
```

我知道这没有问题。这不会影响任何事情，因为数组数据仍然与值相对应。但我只是想知道为什么会这样。

编辑：

这是mongoshell中的更新函数代码。但这并没有帮助我

```
function (query, obj, upsert, multi) {
    assert(query, "need a query");
    assert(obj, "need an object");
    var firstKey = null;
    for (var k in obj) {
        firstKey = k;
        break;
    }
    if (firstKey != null && firstKey[0] == "$") {
        this._validateObject(obj);
    } else {
        this._validateForStorage(obj);
    }
    if (typeof upsert === "object") {
        assert(multi === undefined, "Fourth argument must be empty when specifying upsert and multi with an object.");
        opts = upsert;
        multi = opts.multi;
        upsert = opts.upsert;
    }
    this._db._initExtraInfo();
    this._mongo.update(this._fullName, query, obj, upsert ? true : false, multi ? true : false);
    this._db._getExtraInfo("Updated");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:08:51.843

文档说它们在文档大小增加超过分配的大小时重新排序，但是，似乎只要文档大小发生变化，它们就会重新排序（如果大小相同，它不会改变）。

例如，这里第一个命令不变，但第二个命令不变。

```
> db.t3.insert({_id : 1234',id:'xxx',
fullname:'use1',password:'password','username':'user'})
> db.t3.update({'_id':'1234'},{$set : {fullname:'use1'}})
> db.t3.findOne()
{
    "_id" : "1234",
    "id" : "xxx",
    "fullname" : "use1",
    "password" : "password",
    "username" : "user"
}
> db.t3.update({'_id':'1234'},{$set : {fullname:'use11'}})
> db.t3.findOne()
{
    "_id" : "1234",
    "fullname" : "use11",
    "id" : "xxx",
    "password" : "password",
    "username" : "user"
} 
```

看这里[https://jira.mongodb.org/browse/SERVER-2592](https://jira.mongodb.org/browse/SERVER-2592)

# css - 移动网站上的下拉菜单

> ID：15454168
> 
> 赞同：0
> 
> 时间：2013-03-16T20:09:31.720
> 
> 标签：css, mobile, drop-down-menu

我在一个网站上工作，它有一个下拉菜单，我使布局具有响应性，并为移动设备添加了媒体查询。唯一的问题是，下拉菜单确实会在移动设备上下拉，尽管它也会激活第一个链接，因此它会直接进入该页面，让您有第二个响应时间。

我在学校了解到这一点，我可以发誓有一个非常简单的解决方法，比如 onclick 或类似的东西。虽然已经很晚了，但我正在尝试解决这个问题，但我找不到任何东西。

这是下拉html；

```
<div class="nav">
    <div class="links">
        <ul id="dropdown">
            <li>
                <a href="index.html"> Tetterode </a>
                <ul>
                    <li><a href="project.html">Project</a></li>
                    <li><a href="promenade.html">Promenade</a></li>
                    <li><a href="brochure.html">Brochure</a></li>
                    <li><a href="impressies.html">Impressies</a></li>
                </ul>
            </li>
            <li>
                <a href="oplevering.html">Woningen</a>
                <ul>
                    <li><a href="oplevering.html">Oplevering</a></li>
                    <li><a href="impressies.html">Impressies</a></li>
                </ul>
            </li>
            <li class="currentpage">
                <a href="ligging.html">Locatie</a>
                <ul>
                    <li><a href="ligging.html">Ligging</a></li>
                    <li><a href="situatie.html">Situatie</a></li>
                    <li><a href="routeplanner.html" class="smaller">Route<br>planner</a></li>

                </ul>
            </li>
            <li>
                <a href="hypotheken.html">Financiering</a>
                <ul>
                    <li><a href="hypotheken.html">Hypotheken</a></li>
                </ul>
            </li>
            <li>
                <a href="makelaars.html">Contact</a>
                <ul>
                    <li><a href="makelaars.html">Makelaars</a></li>
                </ul>
            </li>               
        </ul>
    </div>
</div> 
```

这是CSS；

```
.nav{
    width: 100%;
    height:50px;
    background-image:url("bg.jpg");
    background-repeat:repeat;
    text-align:center;
    padding-bottom:0px;
    margin-bottom:0px;
}
.links ul li {
   list-style-type: none;
   padding-right: 15px;
   height:50px;
   display:inline-block;
   padding-top:0px;
   line-height:50px;
   padding-left:14px;
   text-shadow: 3px 3px 2px rgba(0, 0, 0, 0.50);
   margin-top:0px;
}
.links ul li:hover {
    height:50px;
   background-color:#b5001e;
   display:inline-block;
   margin:0px;
}
.links a {
   text-transform:uppercase;
   font-family:helvetica;
   font-size:16px;
   color:#fff;
   display:inline-block;
   font-size:20px;
   text-decoration:none;
}
.links a:hover {
  background-color:transparent;
}
#dropdown ul{
    background-color:#b5001e;
    list-style:none;
    position:absolute;
    left:-9999px;
    z-index:20;
    font-size:16px;
    padding-top:0px;
    margin-top:-2px;
    }
#dropdown ul li{
    float:none;
}
#dropdown ul a{
    white-space:nowrap; 
    font-size:16px;
}
#dropdown li:hover ul{ 
    left:0;
}
#dropdown li:hover a{ 
    text-decoration:underline;
}
#dropdown li:hover ul a{ 
    text-decoration:none;
}
#dropdown li:hover ul li a:hover{ 
color:#000;
}
.currentpage{
   height:50px;
   background-color:#b5001e;
   display:inline-block;
} 
```

我基本上希望能够单击基本导航项目（tetterode、winingen 等）并看到其他项目下降，所以如果我愿意的话，我实际上有时间点击它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:37:00.533

这是您的代码的[JSFIDDLE](http://jsfiddle.net/Ajs7x/)。

我使用 IOS 6 在我的 Iphone 4 上对其进行了测试。每当您单击其中一个菜单时，您都会被重定向到该菜单中的链接。为了解决问题，您需要删除这些链接并用 # 替换它们，以便您的代码在移动网站上运行

因此，此 HTML 结构将解决您的问题（仅在移动网站上使用）：

```
<div class="nav">
    <div class="links">
        <ul id="dropdown">
            <li>
                <a href="#"> Tetterode </a>
                <ul>
                    <li><a href="project.html">Project</a></li>
                    <li><a href="promenade.html">Promenade</a></li>
                    <li><a href="brochure.html">Brochure</a></li>
                    <li><a href="impressies.html">Impressies</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Woningen</a>
                <ul>
                    <li><a href="oplevering.html">Oplevering</a></li>
                    <li><a href="impressies.html">Impressies</a></li>
                </ul>
            </li>
            <li class="currentpage">
                <a href="#">Locatie</a>
                <ul>
                    <li><a href="ligging.html">Ligging</a></li>
                    <li><a href="situatie.html">Situatie</a></li>
                    <li><a href="routeplanner.html" class="smaller">Route<br>planner</a></li>

                </ul>
            </li>
            <li>
                <a href="#">Financiering</a>
                <ul>
                    <li><a href="hypotheken.html">Hypotheken</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Contact</a>
                <ul>
                    <li><a href="makelaars.html">Makelaars</a></li>
                </ul>
            </li>               
        </ul>
    </div>
</div> 
```

我的回答可能听起来很愚蠢。但如果您想保持相同的结构和相同的 CSS，这是唯一的方法。玩得开心编码！

# drupal-7 - 提交按钮在主题功能中不起作用

> ID：15454171
> 
> 赞同：0
> 
> 时间：2013-03-16T20:09:58.377
> 
> 标签：drupal-7, form-submit, form-api

我创建了一个可拖动的表格并在其下方添加了一个提交按钮。我可以查看提交按钮，但提交处理程序不起作用。下面是代码。

```
function form_content_reorder($form, &$form_state)
{    
$form = array();
$form['items'] = array();
$form['items']['#tree'] = TRUE;
$form['#theme'] = 'usercontentranking_reorder_form'; 
$form['name'] = array(
 '#type' => 'item',
 '#markup' => 'Hello  '.get_genderval($user_data['gender']).$user_data['user_name'],);
$form['submit'] = array(
 '#type' => 'submit',
 '#value' => t('Save Preferences'),
 '#submit' => array('user_content_ranking_save'),);
 return $form;
 }

function usercontentranking_theme($existing, $type, $theme, $path) {
$themes = array(
'usercontentranking_reorder_form' => array(
  'render element' => 'element'
),
);
return $themes;
}

function theme_usercontentranking_reorder_form($vars) {
$element = $vars['element'];
drupal_add_tabledrag('draggable_table', 'order', 'sibling', 'weight-group');
$header = array(
 'label' => t(''), 
 'label2' => t(''),
 'weight' => t('Weight'),
 'operations' => t('Operations'),
); 
$rows = array();

foreach (element_children($element['items']) as $key) {
$row = array();
$row['data'] = array();
$row['data'][] = drupal_render($element['items'][$key]['title']);
$row['data'][] = drupal_render($element['items'][$key]['user_fields']);
$row['data'][] = drupal_render($element['items'][$key]['weight']);
$row['data'][] = drupal_render($element['items'][$key]['operation']);
$row['class'] = array('draggable');
$rows[] = $row;

$themes = drupal_render($element['name']);

$themes .=theme('table', array(
  'header' => $header, 
  'rows' => $rows,
  'attributes' => array('id' => 'draggable_table'),
));

$themes .= drupal_render($element['submit']);

return $themes;
}

function user_content_ranking_save($form, &$form_state)
{
  print "text";
} 
```

行 **$themes .= drupal_render($element['submit']);** 能够显示按钮，但函数 user_content_ranking_save 没有被调用。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:53:51.670

添加这三行：

```
$themes .= drupal_render($element['form_id']); 
$themes .= drupal_render($element['form_build_id']);
$themes .= drupal_render($element['form_token']); 
```

前：

```
$themes .= drupal_render($element['submit']); 
```

已经解决了这个问题。

# python - shell 函数如何知道它是否在 virtualenv 中运行？

> ID：15454174
> 
> 赞同：36
> 
> 时间：2013-03-16T20:10:09.387
> 
> 标签：python, bash, shell, virtualenv

一个函数应该如何`bash`测试它是否在 Python virtualenv 中运行？

想到的两种方法是：

```
[[ "$(type -t deactivate)" != function ]]; INVENV=$? 
```

或者

```
[[ "x$(which python)" != "x$VIRTUAL_ENV/bin/python" ]]; INVENV=$? 
```

（注意：`$INVENV`如果我们在 virtualenv 中，则希望为 1，否则为 0，这会迫使上述向后看的测试。）

有什么不那么骇人听闻的吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-16T20:20:04.563

```
if [[ "$VIRTUAL_ENV" != "" ]]
then
  INVENV=1
else
  INVENV=0
fi
// or shorter if you like:
[[ "$VIRTUAL_ENV" == "" ]]; INVENV=$? 
```

**编辑**：正如@ThiefMaster 在评论中提到的那样，在某些情况下（例如，当启动一个新的 shell 时——可能在`tmux`或`screen`从活动的 virtualenv 中）这个检查可能会失败（但是，从 virtualenv 中启动新的 shell 可能会导致其他也有问题，不推荐）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-16T21:28:41.390

实际上，我刚刚发现了一个类似的问题，从中可以很容易地得出这个问题的答案：

[Python：确定是否在 virtualenv 中运行](https://stackoverflow.com/questions/1871549)

例如，shell 脚本可以使用类似的东西

```
python -c 'import sys; print (sys.real_prefix)' 2>/dev/null && INVENV=1 || INVENV=0 
```

（感谢 Christian Long 展示了如何使这个解决方案也适用于 Python 3。）

编辑：这是一个更直接（因此更清晰和更清洁）的解决方案（从 JuanPablo 的评论中得到提示）：

```
INVENV=$(python -c 'import sys; print ("1" if hasattr(sys, "real_prefix") else "0")') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:40:10.000

如果您使用 virtualenvwrappers，则运行的前/后脚本可以为您设置 INVENV。

或者我做什么，将以下内容放入您的 .bashrc 中，并在您的工作目录（用于 django）中创建一个名为 .venv 的文件，以便在您 cd 进入目录时自动加载虚拟环境

```
export PREVPWD=`pwd`
export PREVENV_PATH=

handle_virtualenv(){
    if [ "$PWD" != "$PREVPWD" ]; then
        PREVPWD="$PWD";
        if [ -n "$PREVENV_PATH" ]; then
            if [ "`echo "$PWD" | grep -c $PREVENV_PATH`" = "0"  ]; then
                deactivate
                unalias python 2> /dev/null
                PREVENV_PATH=
            fi
        fi

        # activate virtualenv dynamically
        if [ -e "$PWD/.venv" ] && [ "$PWD" != "$PREVENV_PATH" ]; then
            PREVENV_PATH="$PWD"
            workon `basename $PWD`
            if [ -e "manage.py" ]; then
                alias python='python manage.py shell_plus'
            fi
        fi
    fi
}

export PROMPT_COMMAND=handle_virtualenv 
```

# ios - 模型初始化时应用程序启动时出现无限循环和访问错误

> ID：15454179
> 
> 赞同：0
> 
> 时间：2013-03-16T20:10:26.730
> 
> 标签：ios

请帮忙....我想弄清楚这个问题正在失去理智。我对iOS相当陌生，所以如果它很明显，请不要对我太苛刻！;)

我正在使用 xcode 4.6 并针对 iPhone6.1 模拟器。

启动我的应用程序时出现以下错误：

```
EXC_BAD_ACCESS code = 2 
```

Debug Navigator 中出现了数百个线程，这导致人们相信某处存在某种无限循环（我只是看不到在哪里）。

错误发生在*PlayingCardDeck.m中的**(id)init旁边，从**ViewController.m*中输入它后：

 **```
Card *card = [self.deck drawRandonCard]; 
```

视图控制器：

```
#import "ViewController.h"

#import "PlayingCardDeck.h"

@interface ViewController ()

@property (weak, nonatomic) IBOutlet UILabel *flipsLabel;
@property (nonatomic) int flipCount;
@property (strong, nonatomic) Deck *deck;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;

@end

@implementation ViewController

@synthesize deck = _deck;

- (IBAction)flipCard:(UIButton *)sender {
    sender.selected = !sender.isSelected;
    self.flipCount++;
}

- (void)setFlipCount:(int)flipCount
{
    _flipCount = flipCount;
    self.flipsLabel.text = [NSString stringWithFormat:@"Flips: %d", self.flipCount];
}

- (Deck *)deck
{
    if (!_deck) _deck = [[PlayingCardDeck alloc] init];
    return _deck;
}

- (void)setCardButtons:(NSArray *)cardButtons
{
    _cardButtons = cardButtons;
    for (UIButton *cardButton in cardButtons)
    {
        Card *card = [self.deck drawRandonCard];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
    }
}

@end 
```

甲板.m

```
#import "Deck.h"

@interface Deck()

@property (strong, nonatomic) NSMutableArray *cards;

@end

@implementation Deck

- (NSMutableArray *)cards
{
    if (!_cards) _cards = [[NSMutableArray alloc] init];
    return _cards;
}

- (void)addCard:(Card *)card atTop:(BOOL)atTop
{
    if (atTop)
    {
        [self.cards insertObject:card atIndex:0];
    }
    else
    {
        [self.cards addObject:card];
    }
}

- (Card *)drawRandonCard
{
    Card *randomCard = nil;

    if (self.cards.count)
    {
        unsigned index = arc4random() % self.cards.count;
        randomCard = self.cards[index];
        [self.cards removeObjectAtIndex:index];
    }

    return randomCard;
}

@end 
```

扑克牌甲板.m

```
#import "PlayingCardDeck.h"
#import "PlayingCard.h"

@implementation PlayingCardDeck

- (id)init
{
    self = [self init];

    if (self)
    {
        for (NSString *suit in [PlayingCard validSuits])
        {
            for (NSUInteger rank=1; rank <= [PlayingCard maxRank]; rank++)
            {
                PlayingCard *card = [[PlayingCard alloc] init];
                card.suit = suit;
                card.rank = rank;
                [self addCard:card atTop:YES];
            }
        }
    }

    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:14:26.817

在 PlayerCardDeck.m 中`self = [self init]`应该是`self = [super init]`. 这导致了无限循环。**

# javascript - 如何制作一个计算小数的阶乘的函数？

> ID：15454183
> 
> 赞同：10
> 
> 时间：2013-03-16T20:10:48.313
> 
> 标签：javascript, math, factorial, gamma-function

如何在 JavaScript 中创建一个计算十进制数的阶乘（或[伽马函数）的函数？](http://en.wikipedia.org/wiki/Gamma_function)例如，我该如何计算`2.33!`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T21:13:14.960

我可能已经找到了一个现有的解决方案......它是 Lanczos 方法的一个实现，我在瑞典维基百科 ( [http://sv.wikipedia.org/wiki/Gammafunktionen](http://sv.wikipedia.org/wiki/Gammafunktionen) ) 上找到了它。它是用 python 编写的，并且说是正确的到小数点后 15 位。我将它移植到 js，交叉检查了一些随机值（[http://www.efunda.com/math/gamma/findgamma.cfm](http://www.efunda.com/math/gamma/findgamma.cfm)）。

[http://jsfiddle.net/Fzy9C/](http://jsfiddle.net/Fzy9C/)

```
var g = 7;
var C = [0.99999999999980993, 676.5203681218851, -1259.1392167224028,771.32342877765313, -176.61502916214059, 12.507343278686905, -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];

function gamma(z) {

    if (z < 0.5) return Math.PI / (Math.sin(Math.PI * z) * gamma(1 - z));
    else {
        z -= 1;

        var x = C[0];
        for (var i = 1; i < g + 2; i++)
        x += C[i] / (z + i);

        var t = z + g + 0.5;
        return Math.sqrt(2 * Math.PI) * Math.pow(t, (z + 0.5)) * Math.exp(-t) * x;
    }
} 
```

（当然它不支持虚数，因为 js 不支持）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T21:45:46.440

作为此处其他答案的替代方案，这里有一个更简单的伽玛函数近似值，由 Gergő Nemes 在 2007 年提出。（参见关于[斯特林近似](http://en.wikipedia.org/wiki/Stirling%27s_approximation#Versions_suitable_for_calculators)的维基百科页面）。

![在此处输入图像描述](../Images/95c187a0b0bb5020dc221a06373fd9aa.png)

这可以直接在 JavaScript 中用一行代码实现：

```
function gamma(z) {
  return Math.sqrt(2 * Math.PI / z) * Math.pow((1 / Math.E) * (z + 1 / (12 * z - 1 / (10 * z))), z);
} 
```

您可以[在 jsFiddle 上看到这一点。](http://jsfiddle.net/ebshB/1/)

对于 z > 8，这精确到 8 位数字，但**对于较小的 z ，它仍然精确到少数数字**。它不如 Lanczos 近似准确，但更简单，速度也[稍快](http://jsperf.com/gamma-function-implementations)。

请注意，伽玛函数和阶乘函数略有不同。阶乘函数可以根据伽马函数定义，因此：

```
function factorial(n) {
  return gamma(n + 1);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T21:23:05.307

这不是一个小问题。[伽玛函数](http://en.wikipedia.org/wiki/Gamma_function)没有简单的封闭式公式。也就是说，有一些数值近似值应该适合您的需求。

以下答案将使用一种称为[Lanczos approximation](http://en.wikipedia.org/wiki/Lanczos_approximation)的技术。公式如下：

![在此处输入图像描述](../Images/f8710d617f3c7d3b7f3ef6a2c2833981.png)

其中 g 是一个任意选择的常数，用于控制近似值的准确性。对于较大的 g，近似值会更准确。A [g] (z) 是这样定义的：

![在此处输入图像描述](../Images/de387d066ce50c5f77c929f44f75bd43.png)

最难的部分是找到 A [g] (z)，因为[p [n]也是用依赖于 g 的复杂公式定义的](http://en.wikipedia.org/wiki/Lanczos_approximation#Coefficients)。

对于以下代码，我不能太相信，因为我只是在 wikipedia 页面上编写 Python 程序的一个端口。

```
function gamma(n) {  // accurate to about 15 decimal places
  //some magic constants 
  var g = 7, // g represents the precision desired, p is the values of p[i] to plug into Lanczos' formula
      p = [0.99999999999980993, 676.5203681218851, -1259.1392167224028, 771.32342877765313, -176.61502916214059, 12.507343278686905, -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];
  if(n < 0.5) {
    return Math.PI / Math.sin(n * Math.PI) / gamma(1 - n);
  }
  else {
    n--;
    var x = p[0];
    for(var i = 1; i < g + 2; i++) {
      x += p[i] / (n + i);
    }
    var t = n + g + 0.5;
    return Math.sqrt(2 * Math.PI) * Math.pow(t, (n + 0.5)) * Math.exp(-t) * x;
  }
} 
```

当然，根据伽马函数的定义：

```
function factorial(n) {
  return gamma(n + 1);
} 
```

您可以[在 jsFiddle 上看到这一点](http://jsfiddle.net/twtY8/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-11T21:07:27.403

只是为了完成@apelsinapa 答案以更正整数的计算（输入整数时我们没有得到整数解）。

@apelsinapa 的绝佳解决方案：

```
var g = 7;
var C = [0.99999999999980993, 676.5203681218851, -1259.1392167224028,771.32342877765313, -176.61502916214059, 12.507343278686905, -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];

function gamma(z) {
    if (z < 0.5) return Math.PI / (Math.sin(Math.PI * z) * gamma(1 - z));
    else {
        z -= 1;

        var x = C[0];
        for (var i = 1; i < g + 2; i++)
        x += C[i] / (z + i);

        var t = z + g + 0.5;
        return Math.sqrt(2 * Math.PI) * Math.pow(t, (z + 0.5)) * Math.exp(-t) * x;
    }
} 
```

并获得整数的正确答案：

```
 function factorialOfNumber(number) {
    if (number % 1 != 0 || number<0){
        return gamma(number + 1);
    }
    else {
        if(number == 0) {
           return 1;
        }
        for(var i = number; --i; ) {
           number *= i;
        }
        return number;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-03T22:24:09.253

这是我几年前写的一个版本……有点乱但经过测试:)

```
var
    M_GAMMA = [76.18009172947146, -86.50532032941677, 24.01409824083091, -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5],
    M_GAMMAS = 6;

function gammaFn(x) // Modified to JavaScript from "Numerical Recipies in C" by P. Mainwaring
{
    var i = 0, n = ++x, tmp = x + 5.5, ser = 1.000000000190015;
    for (tmp -= (x + 0.5) * Math.log(tmp); i < M_GAMMAS; ++i) ser += M_GAMMA [i] / ++n;
    return Math.log(2.5066282746310005 * ser / x) - tmp;
}

function fact(x) { return x > 1 ? Math.exp(gammaFn(x)) : 1 }

function combin(n, k) { return (Math.exp(gammaFn(n) - gammaFn(n - k) - gammaFn(k)) + 0.5) | 0 } // Ms Excel COMBIN() n! / k!(n - k)!

n = 49; k = 6; alert(fact(n) + ' ' + fact(k) + ' ' + combin(n, k)); // Lottery odds! (13,983,816) 
```

那么 gamma 和 gammaLn 函数是：

```
function gammaLn(x) { return gammaFn(--x) }

function gamma(x) { return Math.exp(gammaLn(x)) } 
```

:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-26T19:50:50.723

如果您只是在寻找计算实数阶乘的函数，那么您只需要来自 Lanczos 近似的这段代码：

```
function = factorial(z) {

  var g = 7;
  var C = [0.99999999999980993, 676.5203681218851, -1259.1392167224028, 771.32342877765313, -176.61502916214059, 12.507343278686905, -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7];
  var x = C[0];

  for (var i = 1; i < g + 2; i++)
  x += C[i] / (z + i);

  var t = z + g + 0.5;
  return Math.sqrt(2 * Math.PI) * Math.pow(t, (z + 0.5)) * Math.exp(-t) * x;
} 
```

除了小数之外，它也适用于负数。

# ruby - 我如何需要一个 Ruby 文件？

> ID：15454184
> 
> 赞同：1
> 
> 时间：2013-03-16T20:10:49.313
> 
> 标签：ruby

我有一个名为“go.rb”的文件，其中包含：

```
require 'turboname'
dictionary = Turboname::Random.new

100999032982389.times do
  name = Turboname::Domain.new(:from => dictionary)
  name.save if name.length < 15 and name.available?
  tld = name.tldize
  name.save(tld) if tld and name.length < 15 and name.available?(tld)
end 
```

turboname.rb 与 go.rb 位于同一目录中。这是同一水平。我只想将此文件包含在此脚本中。我不想处理宝石或捆绑包。

```
./turboname.rb:1:in `require': no such file to load -- turboname/version (LoadError)
    from ./turboname.rb:1
    from go.rb:1:in `require'
    from go.rb:1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:11:47.277

该错误并没有告诉您它找不到`./turboname.rb`。它告诉你它找到了那个文件，但是第一行的`./turboname.rb`尝试是`require 'turboname/version'`Ruby 找不到的。`./turboname/version.rb`存在吗？如果是这样，当前用户是否可读？

如果其他一切都检查了，那么你有一个加载路径问题。在 的顶部`go.rb`，显式地将当前工作目录（或任何包含`turboname.rb`和`turboname/version.rb`（可能`./lib/`）的目录添加到您的加载路径：

```
$LOAD_PATH << File.dirname(__FILE__) # for ./
# or
$LOAD_PATH << File.join(File.dirname(__FILE__), 'lib') # for ./lib/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T20:56:31.297

## 使用`require_relative`语句

最近的 Ruby 版本不再添加`.`到存储在`$:`. 但是，一种解决方案是使用[Kernel#require_relative](http://ruby-doc.org/core-2.0/Kernel.html#method-i-require_relative)来要求文件相对于`__FILE__`. 例如：

```
require_relative './turboname' 
```

请注意，这在使用 irb 或 pry 的交互式 REPL 会话中不起作用，但在实际源文件中可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:26:30.073

使用 Ruby 2.0：

```
require "#{__dir__}/turboname" 
```

# c - 用于 DirectFeedThrough 的 Matlab simulink c 函数显示意外结果

> ID：15454189
> 
> 赞同：0
> 
> 时间：2013-03-16T20:11:04.853
> 
> 标签：c, matlab, simulink

我需要一个涉及一些简单数学计算的matlab simulink块。作为第一步，我制作了一个块，它从常量块中获取输入并在输出端口中生成它。我直接从matlab示例中获取代码。它是**2级c sfunction** 这里是 mdlouputs 函数

```
static void mdlOutputs(SimStruct *S, int_T tid)
{
    int_T element;
    int_T portWidth = ssGetInputPortWidth(S,0);
    InputRealPtrsType uPtrs = ssGetInputPortRealSignalPtrs(S,0);
    real_T *y = ssGetOutputPortSignal(S,0);

    for (element=0; element<portWidth; element++) {
        y[element] = *uPtrs[element];
    }

} 
```

但我从街区得到奇怪的输出

这是 **我期望输出等于输入的结果**

```
when const block(input) is 1  output is 1.875
                           2            2
                           3            2.125
                           10           2.563  etc. 
```

我无法弄清楚这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:56:26.173

确保您在 mdlInitializeSizes 中正确设置了 ssSetInputPortDirectFeedThrough。在您的情况下，它似乎应该是

`ssSetInputPortDirectFeedThrough(S, 0, 1)`

否则 uPtrs 会给你胡言乱语。

菲尔。

# c# - 删除历史文件而不显示对话框

> ID：15454190
> 
> 赞同：0
> 
> 时间：2013-03-16T20:11:08.373
> 
> 标签：c#, browser, browser-history

我正在尝试从 C# 中的 Web 浏览器中删除历史文件，如下面的帖子所示：

[如何在 C# 中使用 WebBrowser 控件清除浏览历史记录](https://stackoverflow.com/questions/11931795/how-to-clear-browsing-history-webbrowser-control-c-net)

但是我不想在清除历史记录时显示任何消息对话框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:21:08.360

看起来您的问题与我如何在不显示命令窗口的情况下运行下一行有关

```
System.Diagnostics.Process.Start("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 8"); 
```

您可以使用下一个代码来做到这一点

```
try
{
    var psi = new System.Diagnostics.ProcessStartInfo("rundll32.exe", "InetCpl.cpl,ClearMyTracksByProcess 8");
    psi.CreateNoWindow = true;
    psi.UseShellExecute = false;
    psi.RedirectStandardOutput = true;
    psi.RedirectStandardInput = true;
    psi.RedirectStandardError = true;
    System.Diagnostics.Process.Start(psi);
}
catch (Exception ex)
{
    System.Diagnostics.Debug.WriteLine(ex.ToString());
} 
```

# c# - 通过 Xamarin 中的新活动加载时布局不显示内容

> ID：15454193
> 
> 赞同：6
> 
> 时间：2013-03-16T20:11:13.053
> 
> 标签：c#, android, layout, xamarin, xamarin.android

我正在用 Xamarin 开发一个应用程序。

我有三个活动，**DiallerActivity**，**ContactsActivity**和**SplashActivity** - 以及两个 .axml 布局， Main.axml 和 Contacts.axml

SplashActivity是第一个加载的，它在打开应用程序时显示**启动**画面，完成后它会加载显示我的**Main.axml布局的****DiallerActivity** - 这工作正常。

在我的**Main.axml**布局中，我有一个按钮，单击该按钮会加载**ContactsActivity**，然后应该加载**Contacts.axml**，它里面只有 3 个按钮和一个标签.. 没有一个被编程来做任何事情。

**问题是，当单击按钮时，显示变为空白屏幕，仍然在屏幕顶部显示 android 栏。它只是不显示 .axml 文件中的任何内容。**

我需要在活动运行时显示**Contacts.axml**布局。我希望我已经说清楚了。我当前的代码如下。

DialerActivity 的代码

```
protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

Button btnAcceptClick = FindViewById<Button> (Resource.Id.btnAccept);

btnAcceptClick.Click += delegate {
            StartActivity (typeof(VoWiFiApplicationFinal.ContactsActivity));
        }; 
```

ContactsActivity 的代码

```
public class ContactsActivity : Activity
{
    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // setting the contacts.axml as the view
        SetContentView (Resource.Layout.Contacts);
    }
} 
```

有谁知道为什么没有显示 Contacts.axml ？如果您需要我提供更多信息，请说出来，我会把它带过来。顺便说一下，我使用**C#**作为我的语言，所以如果它甚至适用于脑海中的问题，我更喜欢与此相关的帮助。谢谢阅读。

Contacts.xaml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<LinearLayout
    android:layout_width="fill_parent"
    android:id="@+id/toptest"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+/label1"
        android:text="testlabel" />
</LinearLayout>
<LinearLayout
    android:layout_width="fill_parent"
    android:id="@+id/testagain"
    android:layout_height="wrap_content"
    android:orientation="horizontal" />
<LinearLayout
    android:layout_width="fill_parent"
    android:id="@+id/menuBar"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <Button
        android:layout_width="fill_parent"
        android:text="ACCEPT"
        android:id="@+id/btnAccep"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnDeclin"
        android:layout_weight="1"
        android:text="DECLINE" />
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btntes"
        android:layout_weight="1"
        android:text="TEST" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T15:30:48.840

Xamarin 中的某个地方似乎存在错误。当我来回重命名 .axml 文件并尝试使用 values\strings.xml 中的字符串时，我也得到了一个空白屏幕（操作栏除外），有时将它们命名为与 .axml 文件相同的名称。不确定字符串是否与它有关，但我记得在编译时遇到了某种错误。

无论如何，我的解决方案是

1.  备份 .axml 文件的内容并完全删除该文件。
2.  使用与原始名称不同的名称创建一个新的 .axml 文件。
3.  将备份的内容粘贴到新文件中。
4.  将新文件重命名为旧名称。

之后我进行了试运行，一切都恢复了。

# linux - 如何在 shell 脚本中使用 at 命令？

> ID：15454199
> 
> 赞同：7
> 
> 时间：2013-03-16T20:12:18.233
> 
> 标签：linux, shell, unix, at-job

我正在尝试`at`在 shell 脚本中使用 Unix 命令（用于将作业设置为在特定时间运行）。时间将由用户输入使用 getopts 和 optarg 指定，这似乎工作正常，问题是`at`. 如何`at`根据用户的输入将命令写入脚本以在特定时间运行？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-16T20:14:16.540

我会说

```
at now +10 minutes <<< "rm -rf /tmp/tobedeleted" 
```

对于多行，请考虑“HERE-doc”

```
at now +10 minutes <<ENDMARKER
rm -rf /tmp/tobedeleted
echo all done | mail -s 'completion notification' sysadmin@example.com
ENDMARKER 
```

# android - findViewById 在一个内部的 LinearLayout 上返回 null 视图

> ID：15454206
> 
> 赞同：10
> 
> 时间：2013-03-16T20:12:37.867
> 
> 标签：android, include, nullpointerexception, android-linearlayout

我无法在这里找出错误。我可能正在寻找一些东西...

布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <include
        android:id="@+id/headerInclude"
        android:layout_width="fill_parent"
        android:layout_height="38dp"
        android:layout_gravity="top"
        layout="@layout/header" />

    <LinearLayout
        android:id="@+id/actualView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="1" >

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:divider="@drawable/dotted_line"
            android:dividerHeight="2dp"
            android:drawSelectorOnTop="false"
            android:paddingBottom="10dp"
            android:paddingTop="10dp" />
    </LinearLayout>

    <include
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:layout_gravity="bottom"
        layout="@layout/footer" />

</LinearLayout> 
```

包含的标头 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/headerLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/header_bgr"
    android:orientation="horizontal"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="7dp" >

    <TextView
        android:id="@+id/tvScreenTitle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.8"
        android:ellipsize="end"
        android:gravity="center|left"
        android:singleLine="true"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff"
        android:textSize="17sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/tvScreenSubTitle"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.2"
        android:gravity="center|right"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff"
        android:textSize="15sp"
        android:textStyle="bold" />

</LinearLayout> 
```

列出活动java代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    appData = ((DxApp) this.getApplicationContext()).getData();
    setContentView(R.layout.list);
    setTitle("Some Title...");
    // some more code...
    addButtons();
}

protected void addButtons() {
    LinearLayout headerLayout = (LinearLayout) findViewById(R.id.headerLayout);
    Button btn = new Button(this);
    btn.setText("Go to My Sets");
    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            // do some thing here...
        }
    });

    if (headerLayout != null)
        headerLayout.addView(btn);
}

@Override
public void setTitle(CharSequence title) {
    TextView tvTitle = (TextView) findViewById(R.id.tvScreenTitle);
    tvTitle.setText(title);
} 
```

如果我删除检查`if(headerLayout != null)`，我会得到`null`指针异常`headerLayout.addView(btn)`。
我能够`TextView`发挥作用`setTitle`，但有些无法获得`LinearLayout`

任何人都可以帮助我找出代码有什么问题...

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-16T20:16:49.863

如果您`id`为元素设置属性`include`，那么这将是膨胀布局的根的 id。因此，与其寻找`LinearLayout`带有 id`headerLayout`的 id，不如寻找 id `headerInclude`（或不为`include`元素设置 id）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:30:02.693

试试这个：

```
View v = getlayoutInflater().inflate(((LinearLayout)findViewById(R.id.headerInclude)), null);
TextView tvTitle = (TextView)  v.findViewById(R.id.tvScreenTitle); 
```

# clickonce - 我可以通过单击一次来部署 IIS express MVC 应用程序吗？

> ID：15454208
> 
> 赞同：0
> 
> 时间：2013-03-16T20:12:50.520
> 
> 标签：clickonce, iis-express

我可以获取一个 clickonce win forms 应用程序并附带它并安装一个 iis express mvc 应用程序吗？iis 应用程序将仅响应本地请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:19:42.450

您可以部署 ClickOnce WinForms 应用程序。您可以打包 MVC 应用程序并将其包含在部署中。不过，我不确定您将如何在客户端计算机上安装它。我想您可以尝试使用 Start.Process（文件路径）。

不过，在 localhost 上安装应用程序需要特权。ClickOnce 应用程序可以调用安装，它会询问用户是否要提升权限。我不知道您将如何判断他们是否安装了 IIS 或 IIS Express。

# c++ - 转换 XOR 函数以返回 char* 而不是字符串

> ID：15454210
> 
> 赞同：0
> 
> 时间：2013-03-16T20:12:56.353
> 
> 标签：c++, xor

我使用字符串对这个 XOR 进行了编码，但我现在需要返回一个 char*。我一直在尝试这样做几个小时，尽管我并不真正习惯使用 char。我想我在这里遗漏了一些东西。

```
string XOR(string s, int key){

 string res = "";

 for (size_t temp = 0; temp < s.size(); ++temp){
  res += s[temp] ^ ((key + temp) % 255);
 }
 return res;

} 
```

我怎么能改变这个来得到一个 char* 作为回报？

编辑澄清：我需要一个 char* : char* XOR(string s, int key)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:50:00.443

编辑：它有问题，但在@JonathanGrynspan 和@john 的帮助下更正了，现在我的最终版本是：

我知道这并不漂亮，但它可以满足您的要求：

```
char* XOR(string s, int key){
 string res = "";
 for (size_t temp = 0; temp < s.size(); ++temp){
  res += s[temp] ^ ((key + temp) % 255);
 }
 char * cstr = new char [res.length()+1];
 copy(res.begin(),res.end(),cstr);
 return cstr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:23:19.820

您的输入字符串是否可覆盖？如果是这样，这是最简单且可能最快的方法：

```
void XOR( char *input, int key ){
    for(int temp = 0; input[temp] != '\0'; ++temp){
        input[temp] ^= (key + temp) % 255;
    }
} 
```

它改变了给定的字符串，而不是返回新的东西。但由于您很有`\0`可能在输出中获得字符，您可能会发现这更可靠：

```
void XOR( char *input, int key, int length ){
    for(int temp = 0; temp < length; ++temp){
        input[temp] ^= (key + temp) % 255;
    }
} 
```

（显然长度没有改变）

更新：

看到评论后，也许这就是你想要的。但要*小心*；您需要记住释放返回的内存，这不是纯 C++ 程序员习惯的；

```
char *XOR( const string &s, int key ) {
    const std::size_t l = s.size( );
    char *r = (char *) malloc( (l + 1) * sizeof( char ) );
    for( std::size_t i = 0; i < l; ++ i ) {
        r[i] = s[i] ^ ((key + (int) i) % 255)
    }
    r[l] = '\0'; // only needed if you need a null-capped string, which seems unlikely since your string could well contain nulls anyway
    return r;
} 
```

# javascript - 通过 JavaScript 获取图像高度

> ID：15454219
> 
> 赞同：0
> 
> 时间：2013-03-16T20:13:39.733
> 
> 标签：javascript, jquery, height

在 JavaScript 函数中，我想获取图像的高度。我愿意：

```
var image_height = $(image).height(); 
```

结果`image_height`是0，但我确定我的图像没有高度0。有没有办法提取这个高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:16:21.940

计算图像加载后的高度。

```
$(document).ready(function(){
    $(image).load(function(){
      var image_height = $(this).height();
    } );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:21:21.203

尝试 externalHeight() 以及

var image_height = $(image).outerHeight();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:17:05.950

确保在检索高度之前已渲染 dom。

```
$(document).ready(function(){
   var image_height = $(image).height(); 
}): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T20:18:45.850

您还可以使用常规 JS：

```
var image_height = img.clientHeight 
```

# php - 用 preg_replace_callback 替换 preg_replace() e 修饰符

> ID：15454220
> 
> 赞同：86
> 
> 时间：2013-03-16T20:13:46.647
> 
> 标签：php, regex, preg-replace, preg-replace-callback

我对正则表达式很糟糕。我正在尝试替换它：

```
public static function camelize($word) {
   return preg_replace('/(^|_)([a-z])/e', 'strtoupper("\\2")', $word);
} 
```

使用带有匿名函数的 preg_replace_callback。我不明白 \\2 在做什么。或者就此而言， preg_replace_callback 究竟是如何工作的。

实现这一目标的正确代码是什么？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-16T20:37:11.847

在正则表达式中，您可以使用 ; “捕获”匹配字符串的一部分`(brackets)`。在这种情况下，您正在捕获匹配的`(^|_)`和`([a-z])`部分。这些从 1 开始编号，因此您有反向引用 1 和 2。匹配 0 是整个匹配的字符串。

`/e`修饰符接受一个替换字符串，并用适当的反向引用替换后跟一个数字（例如）的反斜杠-`\1`但是因为您在字符串中，所以您需要转义反斜杠，所以您得到`'\\1'`. 然后它（有效地）运行`eval`以运行生成的字符串，就好像它是 PHP 代码一样（这就是它被弃用的原因，因为它很容易以`eval`不安全的方式使用）。

该`preg_replace_callback`函数取而代之的是一个回调函数并将一个包含匹配的反向引用的数组传递给它。因此，在您应该编写的地方`'\\1'`，您改为访问该参数的元素 1 - 例如，如果您有一个匿名函数 form `function($matches) { ... }`，则第一个反向引用`$matches[1]`在该函数内。

所以一个`/e`论点

```
'do_stuff(\\1) . "and" . do_stuff(\\2)' 
```

可能成为回调

```
function($m) { return do_stuff($m[1]) . "and" . do_stuff($m[2]); } 
```

或者在你的情况下

```
'strtoupper("\\2")' 
```

可能成为

```
function($m) { return strtoupper($m[2]); } 
```

请注意，`$m`and`$matches`不是魔术名称，它们只是我在声明回调函数时给出的参数名称。此外，您不必传递匿名函数，它可以是字符串形式的函数名，或者是某种形式的东西`array($object, $method)`，[就像 PHP 中的任何回调一样](http://php.net/manual/en/language.types.callable.php)，例如

```
function stuffy_callback($things) {
    return do_stuff($things[1]) . "and" . do_stuff($things[2]);
}
$foo = preg_replace_callback('/([a-z]+) and ([a-z]+)/', 'stuffy_callback', 'fish and chips'); 
```

与任何函数一样，默认情况下，您无法访问回调（从周围范围）之外的变量。使用匿名函数时，可以使用`use`关键字导入需要访问的变量，[如 PHP 手册中所述](http://php.net/manual/en/functions.anonymous.php)。例如，如果旧的论点是

```
'do_stuff(\\1, $foo)' 
```

那么新的回调可能看起来像

```
function($m) use ($foo) { return do_stuff($m[1], $foo); } 
```

# 陷阱

*   使用`preg_replace_callback`is*而不是*正则表达式上的`/e`修饰符，因此您需要从“模式”参数中删除该标志。所以一个像这样的模式`/blah(.*)blah/mei`会变成`/blah(.*)blah/mi`.
*   `/e`修饰符在参数内部使用了一个变体，`addslashes()`因此使用一些替换`stripslashes()`来删除它；在大多数情况下，您可能希望`stripslashes`从新回调中删除对的调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-14T10:56:05.417

### preg_replace 带有 eval 支持的垫片

这是非常不可取的。但是如果你不是程序员，或者真的更喜欢糟糕的代码，你可以使用一个替代`preg_replace`函数来让你的`/e`标志*暂时*工作。

```
/**
 * Can be used as a stopgap shim for preg_replace() calls with /e flag.
 * Is likely to fail for more complex string munging expressions. And
 * very obviously won't help with local-scope variable expressions.
 *
 * @license: CC-BY-*.*-comment-must-be-retained
 * @security: Provides `eval` support for replacement patterns. Which
 *   poses troubles for user-supplied input when paired with overly
 *   generic placeholders. This variant is only slightly stricter than
 *   the C implementation, but still susceptible to varexpression, quote
 *   breakouts and mundane exploits from unquoted capture placeholders.
 * @url: https://stackoverflow.com/q/15454220
 */
function preg_replace_eval($pattern, $replacement, $subject, $limit=-1) {
    # strip /e flag
    $pattern = preg_replace('/(\W[a-df-z]*)e([a-df-z]*)$/i', '$1$2', $pattern);
    # warn about most blatant misuses at least
    if (preg_match('/\(\.[+*]/', $pattern)) {
        trigger_error("preg_replace_eval(): regex contains (.*) or (.+) placeholders, which easily causes security issues for unconstrained/user input in the replacement expression. Transform your code to use preg_replace_callback() with a sane replacement callback!");
    }
    # run preg_replace with eval-callback
    return preg_replace_callback(
        $pattern,
        function ($matches) use ($replacement) {
            # substitute $1/$2/… with literals from $matches[]
            $repl = preg_replace_callback(
                '/(?<!\\\\)(?:[$]|\\\\)(\d+)/',
                function ($m) use ($matches) {
                    if (!isset($matches[$m[1]])) { trigger_error("No capture group for '$m[0]' eval placeholder"); }
                    return addcslashes($matches[$m[1]], '\"\'\`\$\\\0'); # additionally escapes '$' and backticks
                },
                $replacement
            );
            # run the replacement expression
            return eval("return $repl;");
        },
        $subject,
        $limit
    );
} 
```

本质上，您只需将该函数包含在您的代码库中，然后编辑 `preg_replace` 到使用该标志的`preg_replace_eval`任何位置。`/e`

**优点和缺点**：

*   真的只是用 Stack Overflow 的一些样本进行了测试。
*   只支持简单的情况（函数调用，不支持变量查找）。
*   包含更多限制和咨询通知。
*   对于表达式失败，将产生错位且难以理解的错误。
*   但是，它仍然是一个可用的临时解决方案，并且不会使正确过渡到`preg_replace_callback`.
*   许可评论只是为了阻止人们过度使用或传播它。

### 替换代码生成器

现在这有点多余。但可能会帮助那些仍然无法将代码手动重组为[`preg_replace_callback`](http://php.net/preg_replace_callback). 虽然这实际上更耗时，但代码生成器将`/e`替换字符串扩展为表达式的麻烦更少。这是一个非常不起眼的转换，但对于最普遍的例子来说可能就足够了。

要使用此功能，请将任何中断的`preg_replace`调用编辑到`preg_replace_eval_replacement`并运行*一次*。这将**打印出**`preg_replace_callback`要在其位置使用的相应块。

```
/**
 * Use once to generate a crude preg_replace_callback() substitution. Might often
 * require additional changes in the `return …;` expression. You'll also have to
 * refit the variable names for input/output obviously.
 *
 * >>>  preg_replace_eval_replacement("/\w+/", 'strtopupper("$1")', $ignored);
 */
function preg_replace_eval_replacement($pattern, $replacement, $subjectvar="IGNORED") {
    $pattern = preg_replace('/(\W[a-df-z]*)e([a-df-z]*)$/i', '$1$2', $pattern);
    $replacement = preg_replace_callback('/[\'\"]?(?<!\\\\)(?:[$]|\\\\)(\d+)[\'\"]?/', function ($m) { return "\$m[{$m[1]}]"; }, $replacement);
    $ve = "var_export";
    $bt = debug_backtrace(0, 1)[0];
    print "<pre><code>
    #----------------------------------------------------
    # replace preg_*() call in '$bt[file]' line $bt[line] with:
    #----------------------------------------------------
    \$OUTPUT_VAR = preg_replace_callback(
        {$ve($pattern, TRUE)},
        function (\$m) {
            return {$replacement};
        },
        \$YOUR_INPUT_VARIABLE_GOES_HERE
    )
    #----------------------------------------------------
    </code></pre>\n";
} 
```

请记住，仅仅复制和粘贴*不是*编程。您必须将生成的代码调整回您的实际输入/输出变量名称或使用上下文。

*   Specificially the `$OUTPUT =` assignment would have to go if the previous `preg_replace` call was used in an `if`.
*   It's best to keep temporary variables or the multiline code block structure though.

And the replacement expression may demand more readability improvements or rework.

*   For instance `stripslashes()` often becomes redundant in literal expressions.
*   Variable-scope lookups require a `use` or `global` reference for/within the callback.
*   Unevenly quote-enclosed `"-$1-$2"` capture references will end up syntactically broken by the plain transformation into `"-$m[1]-$m[2]`.

代码输出只是一个起点。是的，这作为在线工具会更有用。这种代码重写方法（编辑、运行、编辑、编辑）有些不切实际。然而，对于那些习惯于以任务为中心的编码（更多的步骤，更多的发现）的人来说，可能更容易接近。因此，这种替代方案可能会抑制更多重复的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T10:01:16.123

您不应该使用标志`e`（或`eval`一般情况下）。

您还可以使用[T-Regx 库](https://t-regx.com)

```
pattern('(^|_)([a-z])')->replace($word)->by()->group(2)->callback('strtoupper'); 
```

# python - 面向对象编程python

> ID：15454221
> 
> 赞同：0
> 
> 时间：2013-03-16T20:13:52.100
> 
> 标签：python, oop, python-3.x

我需要实现一个名为运动员的类​​，该类采用`__init__(self,names,fastest_time)` 另一个名为的方法`fastest_time`，该方法将显示最快运动员的姓名和时间：

到目前为止，我有这个：

```
class Athlete:
    def __init__(self,names,ftime):
        self.name=names
        self.fastest=ftime
    def fastest_athlete(self):

names=(['sara','jam','mary'])
times=([90,50,75])
a=Athlete(name,ftime)
a.fastest_athlete() 
```

问题：不知道是否需要遍历数组名'times'？不知道如何实现方法fastest_time..请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:21:21.543

您应该遍历数组以创建`Athlete`s.

```
>>>Athletes = [Athlete(name, time) for name, time in zip(names, times)]    
>>>Athletes[0].name
sara
>>>Athletes[1].name
jam 
```

好吧，要找到最快的运动员，您可以使用`max`和`min`功能。

```
>>>min(Athletes, key = lambda a : a.fastest) 
```

但是您应该注意，这`min()`是在包含`Athlete`s 的数组上完成的，而不是在`Athlete`本身上完成的。如果你想找到最快的`Athlete`，你可能需要类之`AthleteContainer`类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:30:41.990

由于最快的运动员不依赖于具体实例，因此它更适合作为静态方法：

```
class Athlete:
    # ...
    @staticmethod
    def fastest_athlete(athletes):
        return reduce(lambda x, y: x if x.fastest < y.fastest else y, athletes)

# ...
athletes = [Athlete(name, time) for name, time in zip(names, times)] 
fastest = Athlete.fastest_athlete(athletes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:36:52.400

如果您想`fastest_athlete`成为运动员班的一员，那么您的`Athlete`班级应该能够覆盖所有运动员。

`fastest_athlete`会返回一个列表，因为可能会有更多的运动员跑出最佳时间。

```
athletes=[] # stores all athletes 

class Athlete:
    def __init__(self,names,ftime):
        self.name=names
        self.fastest=ftime
        athletes.append(self)
    def fastest_athlete(self):
        besttime= min([athlete.fastest for athlete in athletes])
        return [athlete.name for athlete in athletes if athlete.fastest==besttime]

names=(['sara','jam','mary'])
times=([90,50,75])

for a, t in zip(names, times):
    last_athlete=Athlete(a, t)

print last_athlete.fastest_athlete() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T20:36:54.340

如果您只想遍历数组，`self.name`则：

```
for name in self.names:
    # Do something 
```

但对于实际问题：

```
def fastest_athlete(self):
    combined = zip(self.names, self.fastest)

    #Note that this will return the athlete with the first fastest time if there are dupes
    index = self.fastest.index(min(self.fastest))

    #If you want multiples:
    indices = [i for i,n in enumerate(self.fastest) if n == min(self.fastest)]

    #Either return the list (combined[0] is the athlete's name, combined[1] is the associated time) or print it here.
    return combined[index] 
```

但是，我同意另一位评论者的观点——运动员应该是单独的对象，而不是集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T20:40:53.027

您可以**覆盖该`__gt__`方法并使用 python 的`max`函数**。此外，每个班级应代表一名运动员，而不是运动员名单。

```
>>> class Athlete:
    name = None
    time = None

    def __init__(self, name, time):
        self.name = name
        self.time = time

    def __gt__(self, other):
        return self.time > other.time

>>> names = ['sara', 'jam', 'mary']
>>> times = [90 ,50 , 75]
>>>
>>> athletes = [Athlete(name, time) for name, time in zip(names, times)]
>>>
>>> fastest = max(athletes)
>>> fastest.name
'sara'
>>> fastest.time
90 
```

# uitableview - ios6删除部分中的最后一个单元格导致错误

> ID：15454225
> 
> 赞同：0
> 
> 时间：2013-03-16T20:14:01.727
> 
> 标签：uitableview, ios6, edit

删除 UITableView 部分中的最后一行时出现此错误。

*** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：节数无效。更新后表视图中包含的节数（2）必须等于更新前表视图中包含的节数（3），加上或减去插入或删除的节数（0插入，0已删除）。

如果数组的计数大于 0，我的表有 3 个部分（用户可以自己添加位置）。如果数组等于 0，那么表只包含 2 部分，这是我认为问题所在，我只是想不通。

我用于删除单元格和更新数组的代码是：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* delCell = [tableView cellForRowAtIndexPath:indexPath];
    delName = delCell.textLabel.text;
    [self deleteLocation];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
}

-(void)deleteLocation {

    NSLog(@"Name = %@",delName);

    NSUserDefaults *customLocations = [NSUserDefaults standardUserDefaults];
    NSUserDefaults *sharedPref = [NSUserDefaults standardUserDefaults];

    [customLocations removeObjectForKey:delName];
    [customLocations synchronize];

    [customLoc removeObject:delName];
    saveCustomLoc = [NSArray arrayWithArray:customLoc];

    [sharedPref setObject:saveCustomLoc forKey:@"CustomLocations"];
    [sharedPref synchronize];

    NSLog(@"%@",saveCustomLoc);
    NSLog(@"%lu",(unsigned long)[saveCustomLoc count]);

    [self showAlert];

}

- (void) showAlert {

    UIAlertView *alert = [[UIAlertView alloc]

                          initWithTitle:@"Location Deleted"
                          message:@"The location has been deleted"
                          delegate:nil
                          cancelButtonTitle:@"Ok"
                          otherButtonTitles:nil];

    [alert show];

} 
```

这在最后一个单元格之前效果很好。

我的桌子如何设置的一个例子是：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    if ([customLoc count] == 0) {   // If there is no data in the custom locations array the don't include that section
        if (section == 0) {
            return [serverSelection count];

        }
        else {
            return [qServerSelection count];

        }
    }
    else {
        if (section == 0) {
            return [customLoc count];

        }
        else if (section == 1) {
            return [serverSelection count];

        }
        else {
            return [qServerSelection count];
        }
    } 
```

所以标题/行数/节数等取决于数组的内容。我认为正在删除单元格的部分消失了（或者更确切地说，随着第 1 部分移动到第 0 部分，突然有 4 个单元格）这一事实导致了这个问题。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:00:48.897

在进一步研究之后，我发现（在一些 Apple 论坛成员的帮助下）从一个部分中删除最后一行时，您还需要明确删除该部分。

我还在开头和结尾添加了表格更新代码，如下所示：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView beginUpdates];

    UITableViewCell* delCell = [tableView cellForRowAtIndexPath:indexPath];
    delName = delCell.textLabel.text;
    [self deleteLocation];
    if ([customLoc count] == 0) {
        [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationTop];
    }
    else {
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }

    [tableView endUpdates];

} 
```

因此，如果我的数组为 0（实际上最后一行被删除），则该部分本身将被删除。

# ajax - TbJsonGridView + TbJsonCheckBoxColumn - 如何为多行调用动作？（屏幕）

> ID：15454230
> 
> 赞同：0
> 
> 时间：2013-03-16T20:14:32.227
> 
> 标签：ajax, twitter-bootstrap, yii

我在这个屏幕上有这样的情况：![截屏](../Images/4f608afbf82fccc5e9619a8d230585b0.png)

我有用户检查行的列。之后，用户可以调用一些操作，例如删除数据。

为了向用户显示具有多项操作的菜单，我在 yii-booster TbButtonGroup 中使用按钮下拉菜单。我尝试了所有可能的按钮类型，但都不起作用。

我需要的只是发送有关选择了哪些行的信息，在控制器内部执行一些操作，然后重新加载网格。我不知道怎么...

要生成按钮下拉列表，我使用代码：

```
 Yii::app()->controller->widget('bootstrap.widgets.TbButtonGroup', array(
        'size'=>'mini',
        'type'=>'link',
        'buttons'=>array(
            array('icon'=>'edit', 'items'=>$this->filter),
        ),
    ));

To generate grid i use code:
$this->widget('bootstrap.widgets.TbJsonGridView', array(
    'dataProvider' => $model->search(),
    'filter' => $model,
    'type' => 'striped condensed',
    'summaryText' => false,
    'cacheTTL' => 10, // cache will be stored 10 seconds (see cacheTTLType)
    'cacheTTLType' => 's', // type can be of seconds, minutes or hours
    'selectableRows'=>2,
    'columns' => array(
        array(
            'class'=>'ext._TbJsonCheckBoxColumn._TbJsonCheckBoxColumn',
            'id'=>'selectedTickets',
            'filter'=>array(
                array('label'=>'close', 'url'=>'javascript:'.CHtml::ajax(array('type'=>'POST', 'url'=>array('','multi_action'=>'close'), 'success'=>'function(data, status){ console.log(data); console.log(status); }', 'error'=>"function(data, status){ console.log(data); console.log(status); }")) ),
                array('label'=>'Another action', 'url'=>'#'),
                array('label'=>'Something else', 'url'=>'#'),
                '---',
                array('label'=>'Separate link', 'url'=>'#'),
            ),
        ),
        'id',
        'email_from',
        'subject',
        'status',
        array(
            'name'=>'last_update',
            'value'=>'$data->last_update_from_now',
            //'filter'=>false,
        ),
        array(
            'header' => Yii::t('ses', 'Edit'),
            'class' => 'bootstrap.widgets.TbJsonButtonColumn',
            'template' => '{view} {update} {delete}',
        ),
    ),
    )); 
```

要生成表单，我使用代码：

```
$this->widget('bootstrap.widgets.TbButton',array(
    'label' => 'Add new ticket',
    'type' => 'primary',
    'size' => 'medium',
    'url' => $this->createUrl('create'),
)); 
```

```
<?php
$form = $this->beginWidget('bootstrap.widgets.TbActiveForm', array(
    'id'=>'tickets',
    'type'=>'horizontal',
    'enableAjaxValidation'=>true,
));

echo $this->renderPartial('_grid', array('model'=>$model));
echo CHtml::ajaxSubmitButton('Activate',array('menu/ajaxupdate','act'=>'doActive'), array('success'=>'reloadGrid'));

$this->endWidget(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:24:30.830

经过许多小时，我写了类似的东西，它解决了我的问题：

```
Yii::app()->clientScript->registerScript('multi_button', "
    $('[data-multi=action]').delegate('li a', 'click', function(event){
        event.preventDefault();

        var th = $(this),
        action = th.attr('href').substr(1);

        if( action=='delete' && !confirm('Are you sure you want to delete selected items?') ) return true;
        ".
        CHtml::ajax(array(
            'type'=>'POST',
            'data'=>'js:th.closest("form").serialize()',
            'url'=>'js:location.href+(/\?/.test(location.href) ? "&" : "?")+"multi_action="+action',
            'success'=>'function(data, status){ th.closest("div.grid-view").yiiJsonGridView("update"); }',
            'error'=>'function(data, status){ alert(status); }',
            'cache'=>false
        ))."
    });
"); 
```

# c# - 在 Windows Phone 中解析 XML 文件

> ID：15454231
> 
> 赞同：1
> 
> 时间：2013-03-16T20:14:37.480
> 
> 标签：c#, xml, linq-to-xml

我有来自 Android 的 XML，我想在我的 Windows Phone 项目中解析它。我只能获取元素名称的值，但我需要更深入并采取：

*   波尔斯基
*   szt毫升

C＃：

```
foreach (XElement level1Element in XElement.Parse(loadedStringXml).Descendants("string"))
{
    myText = level1Element.Attribute("name").Value;
} 
```

还有我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<resource>
  <string name="CurrentLanguage">Polski</string>
  <string-array name="myTypes">
    <item>szt</item>
    <item>ml</item>
  </string-array>
</resource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:18:19.230

要获取 Polski，请使用 levle1Element.Value。要获得 szt 和 ml，请使用：

```
foreach (var item in level1Element.Descendants("item"))
    item.Value; // this contains szt and ml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:40:25.607

```
var xDoc = XDocument.Parse(xml);
var polski = xDoc.Descendants("string").First().Value;
var items = xDoc.Descendants("item")
                .Select(i => i.Value)
                .ToArray(); 
```

# php - PHP MySQL、mysqli、扩展、驱动和抽象层（用什么）

> ID：15454237
> 
> 赞同：1
> 
> 时间：2013-03-16T20:15:26.423
> 
> 标签：php, mysql, database, mysqli

我刚开始研究如何用 PHP 做 MySQL DB 的东西，他们似乎是做这件事的可能方法（[http://php.net/manual/en/refs.database.php](http://php.net/manual/en/refs.database.php)）。

有 MySQL 改进扩展、一些其他 SQL 特定库，以及一些抽象层。

我知道这实际上取决于我将如何使用数据库，但是对于一般网站后端使用，您会建议哪种/组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:21:34.423

您可以使用 PDO 扩展 PDO 提供了一个数据访问抽象层，这意味着，无论您使用哪个数据库，您都可以使用相同的函数来发出查询和获取数据。 [http://www.php.net/manual/en/intro.pdo.php](http://www.php.net/manual/en/intro.pdo.php)

# php - 无法从变量中删除 $ext。PHP/MySQL

> ID：15454238
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:15:33.647
> 
> 标签：php

我的索引页面有一个输入字段，您可以在其中创建文件。在此输入字段下，我有一个包含所有已创建文件的表，如下所示：

```
Title     | Edit | Delete |
denis.txt   Edit   Delete 
```

所以我想做'东西'（我不知道怎么做），所以表格中的标题（denis.txt）要不显示扩展名（.txt）。

这是我的索引文件：

```
<form action="create_file.php" method="post" class="form-horizontal"/>
                        <label class="control-label">Заглавие:</label>
                              <div class="controls">
                                 <input name="name" type="text" width="40" class="span6 m-wrap" /><input type="submit" value="Продължи..." class="btn red"></input>
                              </div>
                           </div>
                            </form>
<table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <th>Заглавие</th>
                      <th style="align: center; width: 12%"><div align="center">Редактирай</div></th>
                      <th style="align: center; width: 12%"><div align="center">Изтрий</div></th>
                    </tr>
                  </thead>
                  <tbody>
<?php
echo $_POST['edit'];
$full_path = ".";

$dir = @opendir($full_path) or die("Директорията не може да се отвори.");

while($file = readdir($dir))
{
  if($file == "components" || $file == "index-restricted.php" || $file == "index-error.php" || $file == "generalsettings-success.php" || $file == "exampic" || $file == "all_count.txt" || $file == "assets" || $file == "count_vhod.txt" || $file == "count_nachalo.txt" || $file == "index-invalid.php" || $file == "news-delok.php" || $file == "images" || $file == "auth.php" || $file == "php" || $file == "news.php" || $file == "sponsors.php" || $file == "upload" || $file == "js" || $file == "img" || $file == "dashboard.php" || $file == "logout.php" || $file == "ajax" || $file == "prettify" || $file == "log.php" || $file == "css" || $file == "generalsettings.php" || $file == "nachaloadm.php" || $file == "php_errorlog" || $file == "fonts" || $file == "sql.php" || $file == "edit_file.php" || $file == "delete.php" || $file == "create_file.php" || $file == ".." || $file == "index.php" || $file == "." || $file == "edit.php")

  continue;
?> <?php
  echo "<tr><td><a href='$file'>$file</a></td><td><a href='edit.php?name=$file' class='btn mini purple'><div align='center'><i class='icon-edit'></i>&nbsp;&nbsp;Редактирай</div></a></td><td><div align='center'><a href='delete.php?name=$file' class='btn mini black'><div align='center'><i class='icon-trash'></i>&nbsp;&nbsp;Изтрий</div></a></div></td></tr>";
}

closedir($dir);

?>
                  </tbody>
                </table> 
```

这是我的 create_file.php：

```
<?php
$pre_file_name = $_POST['name'];

$ext = ".txt";

$file_name = $pre_file_name.$ext;

fopen($file_name,'w');
?>
<form class="stdform stdform2" action="edit_file.php" method="POST">
    <label>Въведете новината (текст):</label><span class="field"><textarea class="input-xxlarge" name="edit" cols="1600" rows="10"></textarea></span><p>
    <input type="hidden" name="file_name" value="<?php echo $file_name; ?>">
    <p class="stdformbutton">
    <input class="btn btn-primary" type="submit" value="Създай!">
</p>
</form> 
```

这是我的edit_file.php：

```
<?php
$edit = $_POST['edit'];

$file_name = $_POST['file_name'];

$file = fopen($file_name, 'w');

fwrite($file,$edit);

fclose($file);

echo "File Saved! <a href='index.php'>Click here to continue</a>"

?> 
```

我的一个朋友给我写了以下内容：

```
"If you use the explode function to separate the file name from the extension. So:
$array = explode(".",$file);
Then you can echo out:
echo $array[0]; which will give you the file name without the extension.
You may get some problems with this though if you have a dot in the file name, so more than one dot. But who uses dots in the file name anyway, but its something to think about.
Also this method might not be best with the while loop looping round the files in the readdir function.
You may be better using the scandir function which puts the files into any array then you can use a for each loop to loop through the array." 
```

但我不知道如何使它工作。PS 我想它也可以用 $_SESSION 制作，但要么不知道如何制作：（

问候， 丹尼斯赛多夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:29:20.447

我认为这是输出表格的代码：

```
 echo "<tr><td><a href='$file'>$file</a></td><td><a href='edit.php?name=$file' class='btn mini purple'><div align='center'><i class='icon-edit'></i>&nbsp;&nbsp;Редактирай</div></a></td><td><div align='center'><a href='delete.php?name=$file' class='btn mini black'><div align='center'><i class='icon-trash'></i>&nbsp;&nbsp;Изтрий</div></a></div></td></tr>"; 
```

要删除扩展名，您可以使用[pathinfo()](http://www.php.net/manual/en/function.pathinfo.php)：

`echo pathinfo("aaa.txt", PATHINFO_FILENAME);`

所以你的代码变成：

```
echo "<tr><td><a href='$file'>". pathinfo($file, PATHINFO_FILENAME) ."</a></td><td><a href='edit.php?name=$file' class='btn mini purple'><div align='center'><i class='icon-edit'></i>&nbsp;&nbsp;Редактирай</div></a></td><td><div align='center'><a href='delete.php?name=$file' class='btn mini black'><div align='center'><i class='icon-trash'></i>&nbsp;&nbsp;Изтрий</div></a></div></td></tr>"; 
```

# c# - 在表单之间传递二叉搜索树

> ID：15454241
> 
> 赞同：0
> 
> 时间：2013-03-16T20:15:43.350
> 
> 标签：c#, winforms, binary-search-tree

我目前正在尝试访问我在 form2 中的 form1 中创建的二叉搜索树。我的第一种形式的代码是：

```
public Home() {
    InitializeComponent();
}

AddArtist secondForm = new AddArtist();
BSTree<Artist> ArtistCollection = new BSTree<Artist>();

private void btnAdd_Click(object sender, EventArgs e) {
    secondForm.ShowDialog();
} 
```

我的第二种形式的代码是：

```
private void btnDone_Click(object sender, EventArgs e) {
    string artistName = txtName.Text;

    Artist newArtist = new Artist(artistName);
    ArtistCollection.InsertItem(artistName);

    this.DialogResult = DialogResult.OK;
} 
```

我已经尝试过在自己的类中声明它的方法，所以没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:18:16.307

只需以您的第一种形式公开`ArtistCollection`为属性。

```
public BSTree<Artist> ArtistCollection { get; set; } 
```

然后，您可以像这样从第二种形式中引用它：

```
var tree = form1.ArtistCollection; 
```

或者，在 Form2 中创建一个新的构造函数

```
public Form2(BSTree<Artist> artistCollection)
{
    this.artistCollection = artistCollection;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:19:46.997

在实例化第二种形式时，他们必须首先传递“this”，他们必须在第二种形式的构造函数中处理它

# sql - 关于 sqlite 上的索引的简单事情

> ID：15454242
> 
> 赞同：2
> 
> 时间：2013-03-16T20:15:45.983
> 
> 标签：sql, sqlite

我有一个包含 3 列的 sqlite 数据库：

```
id, word, bitmask 
```

我从单词中的元音中制作了一个位掩码，因此我可以快速找到包含某个元音的每个单词：

```
SELECT word FROM words WHERE bitmask & 7 = 0 
```

我有两个问题。

1.  我应该添加索引吗？如果是这种情况，到哪一列以及如何编写查询

我尝试了下面的代码，但没有看到任何性能改进。

```
CREATE INDEX bitmask_index ON words (bitmask); 
```

2.  “位掩码”列包含 1-256 之间的值。按值对“位掩码”列进行排序会是一件好事吗？在这种情况下，我该如何为此编写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:27:15.123

1.  索引不太可能有帮助，因为您在搜索之前将函数应用于值。通常，这会消除索引的影响。

2.  对位掩码进行排序很少有意义，因为位图中的位位置不对应于跨行排序的内容（它们的排序与同一行内的某些内容相关联，例如某个单词中的元音）。

# python - 直接将数据流式传输到hdfs，无需复制

> ID：15454244
> 
> 赞同：8
> 
> 时间：2013-03-16T20:15:57.767
> 
> 标签：python, hadoop, hdfs

我正在寻找不同的选项，通过这些选项，我可以使用 python 将数据直接写入 hdfs，而无需存储在本地节点上，然后使用 copyfromlocal。

我想使用类似于本地文件的 hdfs 文件，并使用以行作为参数的 write 方法，如下所示：

```
 hdfs_file = hdfs.create("file_tmp")
   hdfs_file.write("Hello world\n") 
```

是否存在类似于上述用例的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T00:39:09.500

我不确定 python hdfs 库，但您始终可以通过 hadoop fs put 命令进行流式传输，并使用“-”作为源文件名表示从标准输入复制：

```
hadoop fs -put - /path/to/file/in/hdfs.txt 
```

# qt - QT - 滑动小部件

> ID：15454245
> 
> 赞同：0
> 
> 时间：2013-03-16T20:15:57.900
> 
> 标签：qt

我是 QT 界面的新手。我想在我的桌面应用程序中创建滑动小部件（无 QML）。想法是在某些网页上创建类似 facebook 组件的滑动菜单。例如：

1.  我有主窗口，我想在右窗口边缘有一小部分小部件
2.  当鼠标在此小部件上移动（或单击它）时，此小部件会滑动以显示其所有内容。

我知道如何创建动画和处理鼠标事件。有很多关于它的例子。问题是这个菜单小部件不应该与其他布局和小部件交互。我的意思是，主窗口有根水平布局，我不知道如何从中排除这个小部件并将小部件放在主窗口上所有小部件的前面。QT 中是否存在某些层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:48:30.997

您可以通过覆盖自定义[QDockWidget](http://qt-project.org/doc/qt-4.8/qdockwidget.html)来完成类似的功能。然后，此小部件可以浮动在其他小部件之上，相对于您的主窗口处于固定位置。将主窗口的调整大小/移动事件连接到 QDockWidget 上的插槽，以保持它们的位置同步。

# java - java中writeobject和String的错误

> ID：15454251
> 
> 赞同：1
> 
> 时间：2013-03-16T20:16:23.710
> 
> 标签：java

我有一个客户端和服务器，我在它们之间交换消息和对象。我的问题是当我在一个字符串
的帮助下发送对象时。`toString`如何从字符串中取出对象并将对象添加到列表中；我写了代码。

**服务器代码：**

```
import java.net.*;
import java.util.ArrayList;
import java.io.*;

public class Server  {

public static void main(String[] args) {
    ArrayList <PhoneBook> listPhone=new ArrayList<PhoneBook>(); 

    PhoneBook a = new PhoneBook("a","a","","",1);
    listPhone.add(a);
    PhoneBook pB = new PhoneBook();
    String ob;
    try{

        ServerSocket server = new ServerSocket(5555,50);

        System.out.println("Waiting Incoming Connection...");
        System.out.println("Local Address :"+server.getInetAddress()+" Port :"+server.getLocalPort());
        Socket sock = server.accept();

        ObjectOutputStream out =new ObjectOutputStream(sock.getOutputStream()); 
        ObjectInputStream  in =new ObjectInputStream(sock.getInputStream()); 

        String strin =(String) in.readObject();

        if (strin.equals("START")){ 
        out.writeObject("WAITING");
        out.flush();}
        strin =(String) in.readObject();
        String[] str=strin.split("\n");
        if(str[0].equals("REQUEST_SEARCH")){

               try{
                    // in this line is error
                   pB = (PhoneBook)in.readObject();  //String cannot be cast to PhoneBook
                   out.flush();
        }catch(ClassNotFoundException classnot){
          System.err.println("Data received in unknown format");}
               out.writeObject("RECORSDS"); 
               out.flush(); 
               String sName = pB.getsurName(); 
               for(int i=0;i<listPhone.size();i++) 
              if(listPhone.get(i).getsurName().equals(sName)){ 
              out.writeObject(pB.toString()); 
              out.flush(); 

        }else{
        out.writeObject("NXRECORD");
        out.flush();
        }}
        strin =(String) in.readObject();
        String[] st=strin.split("\n");

        if(st[0].equals("REQUEST_INSERT")){

            listPhone.add(pB); 
            System.out.println("The contact is add");
            out.writeObject("OK");
            out.flush();
        }
        out.flush();

        if(strin.equals("END")){ //bye = terminate the conversation

        in.close();
        out.close();
        sock.close();
        System.out.println("Connection Closing...");}
        }
        catch (Exception ex){
        System.out.println("Error during I/O");
        ex.getMessage();
        ex.printStackTrace();
        } } } 
```

**客户端代码：**

```
 if (strin.equals("WAITING")) {
        System.out.println("The server says: " + strin);
        // out.writeObject("REQUEST_SEARCH\n");
        // out.flush();
        System.out.println("The server says: " + strin);
        System.out.print("Write the contact elements ");
        System.out.print("Write the name: ");
        String name = input.nextLine();
        System.out.print("Write the surname: ");
        String surName = input.nextLine();
        System.out.print("Write the job: ");
        String job = input.nextLine();
        System.out.print("Write the street: ");
        String street = input.nextLine();
        System.out.print("Write the phone number: ");
        int number = input.nextInt();
        PhoneBook p = new PhoneBook(name, surName, job, street, number);
        out.writeObject("REQUEST_SEARCH\n" + p.toString());
        out.flush();
    } 
```

**错误：**

```
Connection reset
at java.net.SocketInputStream.read(Unknown Source)  at
java.net.SocketInputStream.read(Unknown Source)     at
java.net.SocketInputStream.read(Unknown Source)     at
java.io.ObjectInputStream$PeekInputStream.peek(Unknown Source)  at
java.io.ObjectInputStream$BlockDataInputStream.peek(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(Unknown Source) at 
       java.io.ObjectInputStream.readObject0(Unknown Source)    at
       java.io.ObjectInputStream.readObject(Unknown Source)     at Server.main 
```

**申请背景：**

这个程序是一个带有联系人（服务器）的电话簿，客户端首先发送一个 START，服务器接收它并在客户端制作一个包含*姓名、姓氏、工作、街道和电话*的对象电话簿后发送 WAITING并与消息一起发送REQUEST_SEARCH 服务器获取消息和对象（联系人）并使用*姓氏*在数组列表中搜索是否存在联系人，如果存在则发回对象并显示*姓名、姓氏、工作*和其他`toString()`和消息记录然后客户端发送OK和服务器发回END并且连接正在关闭如果联系人不存在服务器发送消息NXRECORD客户端发回消息REQUEST_INSERT服务器接受它并将对象添加到arraylist中并发送OK和客户端发回 END 并关闭连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:05:58.327

我不知道您在此行之后向服务器发送了什么。

```
out.writeObject("REQUEST_SEARCH\n" + p.toString()); 
```

但我假设您正在向`String` Server 发送一个。而在服务器端检索它时，您正在将其键入`PhoneBook`而不是`String` 使用以下行：

```
pB = (PhoneBook)in.readObject(); 
```

这导致流不匹配..因此出现异常。
这个问题的解决方案可能如下：我假设你的`PhoneBook`班级是`Serializable`.

在客户端使用：

```
 out.writeObject("REQUEST_SEARCH\n" + p.toString());
 out.writeObject(p);//Given that PhoneBook is Serializable. 
```

# perl - 定义散列值和键并使用多个不同的文件

> ID：15454253
> 
> 赞同：0
> 
> 时间：2013-03-16T20:16:39.170
> 
> 标签：perl, hash, multidimensional-array

我正在努力为几个任务编写 Perl 程序。自从我是初学者以来，我已经非常努力地检查所有错误并想了解我的错误，但我失败了。希望到目前为止我对任务的描述和我的缺陷程序不会令人困惑。

在我的当前目录中，我有一个可变数量的“.txt”。文件。（我可以有 4、5、8 或任意数量的文件。但是，我不认为我会得到超过 17 个文件。）“.txt”文件的格式是相同的。有六列，由空格分隔。我只关心这些文件中的两列：第二列是珊瑚礁区域 ID（由字母和数字组成），第五列是 p 值。每个文件中的行数未确定。我需要做的是在所有 .txt 文件中找到所有公共区域 ID，并将这些公共区域打印到输出文件中。但是，在打印之前，我必须对它们进行排序。

以下是我到目前为止的程序，但我收到了错误消息，我在程序之后包含了这些消息。因此，我对变量的定义是主要问题。我非常感谢您对编写程序的任何建议，并感谢您对像我这样的初学者的耐心。

更新：我已经按照建议声明了变量。查看我的程序后，出现两个语法错误。

```
 syntax error at oreg.pl line 19, near "$hash{"
   syntax error at oreg.pl line 23, near "}"
   Execution of oreg.pl aborted due to compilation errors. 
```

这是已编辑程序的摘录，其中包括所述错误的位置。

```
#!/user/bin/perl
use strict;
use warnings;
# Trying to read files in @txtfiles for reading into hash
foreach my $file (@txtfiles) {
  open(FH,"<$file") or die "Can't open $file\n";
  while(chomp(my $line = <FH>)){
    $line =~ s/^\s+//;      
    my @IDp = split(/\s+/, $line); # removing whitespace
    my $i = 0;
    # trying to define values and keys in terms of array elements in IDp
    my $value = my $hash{$IDp[$i][1]};
    $value .= "$IDp[$i][4]"; # confused here at format to append p-values
    $i++;       
  }                         
}

close(FH); 
```

这些是过去的错误：

```
Global symbol "$file" requires explicit package name at oreg.pl line 13.
Global symbol "$line" requires explicit package name at oreg.pl line 16.
#[And many more just like that...]
Execution of oreg.pl aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:24:22.847

你没有申报`$file`。

```
foreach my $file (@txtfiles) { 
```

你没有申报`$line`。

```
while(chomp(my $line = <FH>)){ 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:51:43.543

```
use strict;
use warnings;

my %region;
foreach my $file (@txtfiles) {
  open my $FH, "<", $file or die "Can't open $file \n";
  while (my $line = <$FH>) {
    chomp($line);
    my @values = split /\s+/, $line;
    my $regionID = $values[1]; # 2nd column, per your notes
    my $pvalue = $values[4]; # 5th column, per your notes
    $region{$regionID} //= []; # Inits this value in the hash to an empty arrayref if undefined
    push @{$region{$regionID}}, $pvalue;
  }                         
}
# Now sort and print using %region as needed 
```

在这段代码的末尾，`%region`是一个散列，其中键是区域 ID，值是包含各种 pvalue 的数组引用。

以下是一些可以帮助您完成后续步骤的片段：

`keys %regions`将为您提供区域 ID 值列表。

`my @pvals = @{$regions{SomeRegionID}}`将为您提供 SomeRegionID 的 pvalues 列表

`$regions{SomeRegionID}->[0]`将为您提供该区域的第一个 pvalue。

您可能想查看 Data::Printer 或 Data::Dumper - 它们是 CPAN 模块，可让您轻松打印出数据结构，这可能有助于您了解代码中发生的情况。

# java - 如何中断 JMF 中的音频 rtp 会话？

> ID：15454273
> 
> 赞同：0
> 
> 时间：2013-03-16T20:18:34.373
> 
> 标签：java, interrupt, rtp, jmf

晚上好，我正在实施一个 JMF 项目，它在同一台计算机上运行 2 个 rtp 会话。可以初始化并启动 rtp 会话，但我怎样才能中断其中之一。与其不在同一台计算机上运行 2 个 rtp 会话，JMF 有没有办法中断/保持 rtp 会话？有一些信息代码。

传输A和传输B几乎是相同的代码，它们从本地计算机获取LINEAR声音并将它们转换为GSM_RTP或ULAW_RTP，只是传输的端口不同。最后将 mediaLocator 的数据接收器发送到另一台计算机。

```
Thread transmitA = new Thread() {
        public void run() {

            transmitA();
        }
    };

        Thread transmitB = new Thread() {
        public void run() {

            transmitB();
        }
    }; 
```

> 中断条件

```
transmitA.start();
trasmitB.start();

while (...) {

       if (...) {

           //interrupt transmitA
           transmitA.interrupt();
           transmitA.stop();

           } /*else if (...) {
                       //interrupt transmitB
                       transmitB.interrupt();
                       transmitB.stop();
                     }*/                      
            }//notation end here 
```

好吧，中断线程与中断 rtp 会话不同。如何中断或仅使一个 rtp 会话传输到另一台计算机？我要在赛道上做点什么吗？还是处理器？

> 传输A（）

```
public void transmitA(){

        // First find a capture device that will capture linear audio
        // data at 8bit 8Khz 
        AudioFormat format= new AudioFormat(AudioFormat.LINEAR, 
                                            8000, 
                                            8, 
                                            1); 

        Vector devices= CaptureDeviceManager.getDeviceList( format);

        CaptureDeviceInfo di= null;

        if (devices.size() > 0) {
             di = (CaptureDeviceInfo) devices.elementAt( 0);
        }
        else {
            // exit if we could not find the relevant capturedevice. 
            System.exit(-1); 
        }

        // Create a processor for this capturedevice & exit if we 
        // cannot create it 
        Processor processor = null;
        try { 
                processor = Manager.createProcessor(di.getLocator());
        } catch (IOException e) { 
            System.exit(-1); 
        } catch (NoProcessorException e) { 
            System.exit(-1); 
        } 

       // configure the processor  
       processor.configure(); 

       while (processor.getState() != Processor.Configured){
           try {
                   Thread.sleep(100);
           } catch (InterruptedException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
           }
       }

       processor.setContentDescriptor( 
           new ContentDescriptor( ContentDescriptor.RAW));

       TrackControl track[] = processor.getTrackControls(); 

       boolean encodingOk = false;

       // Go through the tracks and try to program one of them to
       // output gsm data. 

        for (int i = 0; i < track.length; i++) { 
            if (!encodingOk && track[i] instanceof FormatControl) {  
                if (((FormatControl)track[i]).
                    setFormat( new AudioFormat(AudioFormat.GSM_RTP, 
                                               8000, 
                                               8, 
                                               1)) == null) {

                   track[i].setEnabled(false); 
                }
                else {
                    encodingOk = true; 
                }
            } else { 
                // we could not set this track to gsm, so disable it 
                track[i].setEnabled(false); 
            } 
        }

        // At this point, we have determined where we can send out 
        // gsm data or not. 
        // realize the processor 
        if (encodingOk) { 
            processor.realize(); 
            while (processor.getState() != Processor.Realized){
                   try {
                           Thread.sleep(100);
                   } catch (InterruptedException e) {
                           // TODO Auto-generated catch block
                           e.printStackTrace();
                   }
            }
            // get the output datasource of the processor and exit 
            // if we fail 
            DataSource ds = null;

            try { 
                ds = processor.getDataOutput(); 
            } catch (NotRealizedError e) { 
                System.exit(-1);
            }

            // hand this datasource to manager for creating an RTP 
            // datasink our RTP datasink will multicast the audio 
            try {
                String url= "rtp://192.168.1.3:22222/audio/16";
                //String url= "rtp://224.0.0.1:22224/audio/16";
                MediaLocator m = new MediaLocator(url); 

                DataSink d = Manager.createDataSink(ds, m);
                d.open();
                d.start();
                processor.start();
            } catch (Exception e) {
                System.out.println("cannot find the receiver address!!!");
                System.exit(-1);
            }     
        } 
    } 
```

需要一些提示和指导，谢谢先进^^"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:04:31.790

经过尝试和尝试，我终于做到了......只是删除了线程并直接使用该方法，我不知道这是否是一个好的编程习惯，但任何建议都会非常感激......

```
private DataSink d = null;
private Processor processor = null;

while (...) {
   if (...) {

       //interrupt transmitA
       processor.stop();
       processor.close();
       processor.deallocate();
       processor = null;
       d.close();
       d = null;
       transmitA();

       } /*else if (...) {
                   //interrupt transmitB
                   processor.stop();
                   processor.close();
                   processor.deallocate();
                   processor = null;
                   d.close();
                   d = null;
                   transmitB.stop();
                 }*/                      
        }//notation end here 
```

# php - 如何将javascript变量转换为PHP变量？

> ID：15454274
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:18:38.437
> 
> 标签：php, javascript

我想将我的 javascript 变量转换为 PHP 变量......
现在我有这样的情况，在下面的代码中我有一个变量`e`，但我想`e`在 PHP中使用`$e`：

```
<script>

function test()
{
var e = document.getElementById("category_id_video").value;
alert(e);

}
</script>

<?php
    if(isset($_GET['e'])) { 

    echo $video_player_id = $_GET['e'];
    }

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T20:20:16.857

**你根本做不到。**

PHP 运行在服务器上，javascript 运行在客户端。
您需要使用 ajax 或类似的东西将值发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:28:50.880

正如 gdoron 指出的那样，这并不完全可能，所以让我大致解释一下如何做你似乎想做的事情。

当某人第一次访问您的站点时，他们的机器（以及在他们的机器上运行的浏览器）向您的服务器发送一个 HTTP 请求。此时，请求页面中的 PHP 在您的服务器上运行。当时的 Javascript 没有运行，它只是像页面上的任何其他文本或 HTML 或 CSS 一样无意义的文本。

一旦 PHP 完成运行，HTML、CSS 和 Javascript 将被发送到浏览器 - 在您的服务器上运行的 PHP 不会随它一起运行。

现在，浏览器接收所有这些并解析它，并运行 Javascript。

这是这个过程的可怕文字图：

浏览器 --> 服务器 (PHP) --> 浏览器 (HTML/CSS/JS)

所以您可以看到，您不可能只将 Javascript 变量值转换为 PHP，因为它们在不同的时间运行 - 您页面上的 PHP 在 Javascript 启动时已经运行并完成，并且它们在不同的地方运行.

因此，如果您想要使用 PHP 处理 Javascript 中的值，您首先需要将它们捆绑到 JSON 中，然后通过 AJAX 将它们发送到服务器，发送到正在监听这些值并做出相应反应的页面。你可以在这里看到一个例子：

[使用 jquery $.ajax 调用 PHP 函数](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)

希望这可以消除基本的困惑，以便您知道下一步的学习方向。

# html - 使 div 的高度适合屏幕高度并将页脚固定到底部

> ID：15454279
> 
> 赞同：2
> 
> 时间：2013-03-16T20:19:18.057
> 
> 标签：html, css

我有一个网站，当没有足够的内容时，页脚会向上移动并且不会粘在底部。我试图弄清楚如何使页脚和页眉之间的 div 伸展到可用空间，以使页脚保持在底部而不是这样：

![在此处输入图像描述](../Images/099ceee9f09b28f65ab09b3b9db24885.png)

我已经尝试将我的高度设置为 100% 但不起作用。

HTML：

```
<div id="wrapper">

    <div id="body_div">
        <section id="main_section">
        </section>
        <aside id="sidebar">                    
        </aside>
    </div>
    <footer id="footer">
        &copy; Copyright  by SimKessy
    </footer>
</div> 
```

CSS：

```
body{
    width: 100%; /*always specify this when using flexBox*/ 
    height:100%;
    display: -webkit-box;
    display: -moz-box;
    display: box;
    text-align:center;
    -webkit-box-pack:center; /*way of centering the website*/
    -moz-box-pack:center;
    box-pack:center;
    background:url('images/bg/bg9.jpg') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    background-size: cover;
}
#wrapper{
    max-width: 850px;
    display: -moz-box;
    display: -webkit-box; /*means this is a box with children inside*/
    -moz-box-orient:vertical;
    -moz-box-flex:1;
    -webkit-box-orient:vertical;
    -webkit-box-flex: 1; /*allows site to grow or shrink 1 = flex 0 = statix*/
    background: rgba(0,0,0,0.7);
    height:100%;    
    z-index: 1;
}
#body_div{
    display: -webkit-box;
    -webkit-box-orient:horizontal;
    display: -moz-box;
    -moz-box-orient:horizontal;
    color:#000000;
    margin-top: 190px;
    height: 100%;
}
#main_section{
   /* border:1px solid blue;*/
    -webkit-box-flex: 1; 
    -moz-box-flex:1;
    margin: 20px;
    padding: 0px;
    height:100%;
    width: 100%;
} 
```

这是我的网站[http://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html) 当您使用侧面菜单进入宽屏模式时，您可以明白我的意思。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T20:32:04.513

您实际上非常接近答案。但是，您不能简单地将`#wrapper`div 设置为 100% 高度。你应该包括这一行：

```
html, body, #wrapper {
width:100%; 
height:100%;
} 
```

目前，问题是`wrapper`div 不知道什么是 100%。它需要一个具有定义高度的父级，该高度来自`html`and`body`元素。

至于粘性页脚，只需使用绝对定位并设置`bottom:0px;`。不要为此使用第 3 方 API；using`position:absolute`是一个非常简单的修复方法，添加 3rd 方 API 只会减慢您的网站速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T23:22:59.927

您可以使用 jquery 来计算所需的高度：

*   将正文的边距设置为 0
*   然后使用以下脚本：

* * *

```
<script type="text/javascript">
    $(document).ready(function(){
        var clientHeight = document.documentElement.clientHeight;
        $('#wrapperHeight').height(clientHeight+'px');
        var bodyHeight = clientHeight - $('#body_div').css("marginTop").replace('px', '') - $('#footer').outerHeight(true);
        $('#body_div').height(bodyHeight+'px');
    });
</script> 
```

# ruby-on-rails - Rails样式表不是样式视图

> ID：15454280
> 
> 赞同：0
> 
> 时间：2013-03-16T20:19:28.730
> 
> 标签：ruby-on-rails, asset-pipeline

我不明白为什么我的收费样式表没有被正确提取。我在charges.css.scss 中所做的任何样式都不会以任何方式影响我的观点。

应用程序.css

```
 *
 *= require jquery.ui.datepicker
 *= require_self    
 *= require bootstrap
 *= require front
 *= require lists
 *= require tasks
 *= require lightbox
 */ 
```

收费.css.scss

```
// Place all the styles related to the charges controller here.
// They will automatically be included in application.css.
// You can use Sass (SCSS) here: http://sass-lang.com/

.row_form {
    background-color: red;
} 
```

新的.html.erb

```
<div class="container row_form" style="width:990px;">
  <div class="row">
    <div class="span1 offset3">
       <h2></h2>
       <%= render '/charges/new' %>
    </div>   
  </div>
</div> 
```

`_new`使用 stripe.js 的弹出式付款表单在哪里

只有内联样式有效，它也没有选择任何引导类。我在这里不明白什么？另外，我尝试在清单中包含`*= require_tree .`and`*= require charges`无济于事。

使用 HTML 源更新

```
<html>
<head>
</head>
<body>
  <div class="container row_form" style="width:990px;">
  <div class="row">
    <div class="span1 offset3">
       <h2></h2>
       <form accept-charset="UTF-8" action="/charges" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="dvlHeyYvCVfMox/UilOaNoPmT+eO3Z7PuMgE3kXpDPU=" /></div>
  <article>
    <label class="amount">
      <span>Amount: $number</span>
    </label>
  </article>

  <script src="https://checkout.stripe.com/v2/checkout.js" class="stripe-button"
          data-key="pk_test_3ZFJmvwy4tgn2XUPwUsL7mZQ"
          data-description="Continued Full User Acess"
          data-amount="integer">
  </script>
</form>
    </div>   
  </div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:23:10.107

检查以下内容

1.  你的应用程序在开发模式下运行吗？
2.  尝试`rake assets:clean`重新*启动*服务器
3.  检查您的样式表是否已更新（通过 html 页面的源代码）

希望其中一个能让你继续前进:)

# python - Numpy：类实例数组

> ID：15454285
> 
> 赞同：5
> 
> 时间：2013-03-16T20:20:07.900
> 
> 标签：python, numpy, inner-classes

这可能是一个愚蠢的问题，但是说我想从下到上构建一个程序，如下所示：

```
class Atom(object):
    def __init__(self):
        '''
        Constructor
        '''
    def atom(self, foo, bar):
        #...with foo and bar being arrays of atom Params of lengths m & n
        "Do what atoms do"
        return atom_out 
```

...我可以将我的实例放入字典中：

```
class Molecule(Atom):
    def __init__(self):

    def structure(self, a, b):
        #a = 2D array of size (num_of_atoms, m); 'foo' Params for each atom
        #b = 2D array of size (num_of_atoms, n); 'bar' Params for each atom

        unit = self.atom()
        fake_array = {"atom1": unit(a[0], b[0]),
                      "atom2": unit(a[1], b[1]),
                       :                      :                    :
                       :                      :                    :}

    def chemicalBonds(self, this, that, theother):
        :                         :                      :
        :                         :                      : 
```

我的问题是，有没有办法用 numpy 数组来做到这一点，这样“ `real_array`”中的每个元素都将是一个实例——即函数`atom`的单个计算的输出`atom`？我可以将其扩展到可以对大型和输出`class Water(molecule):`执行快速 numpy 操作，因此需要数组......或者是我以错误的方式解决这个问题吗？`structure``chemicalBonds`

另外，如果我走在正确的轨道上，如果您想提出有关如何构建这样的“分层程序”的任何提示，我将不胜感激，因为我不确定我是否正确地执行了上述操作并且最近发现我不知道我在做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T21:45:39.007

通向地狱的道路是用过早的优化铺就的......作为python的初学者，专注于你的程序和应该做什么，一旦它做得太慢，你可以提出关于如何让它更快地完成的集中问题。我会坚持学习 python 的内在数据结构来管理你的对象。如果您正在执行大型数组操作，则可以使用具有标准数据类型的 numpy 数组来实现您的算法。一旦你有了一些工作代码，你就可以进行性能测试以确定你需要优化的地方。

Numpy 确实允许你创建对象数组，我会给你足够的绳索让你自己挂在下面，但是创建一个工具生态系统来操作这些对象数组并不是一件容易的事。您应该首先使用 python 数据结构（购买 Beazley 的基本 python 参考），然后使用 numpy 的内置类型，然后创建自己的[复合 numpy 类型](http://docs.scipy.org/doc/numpy/user/basics.rec.html)。作为最后的手段，请使用下面示例中的对象类型。

祝你好运！

大卫

```
import numpy

class Atom(object):
    def atoms_method(self, foo, bar):
        #...with foo and bar being arrays of Paramsof length m & n
        atom_out = foo + bar
        return atom_out

array = numpy.ndarray((10,),dtype=numpy.object)

for i in xrange(10):
    array[i] = Atom()

for i in xrange(10):
    print array[i].atoms_method(i, 5) 
```

# tags - 正确的 img 标签

> ID：15454286
> 
> 赞同：0
> 
> 时间：2013-03-16T20:20:10.717
> 
> 标签：tags, image

我想问你哪个img标签是正确的：

```
<img src="http://i.imgur.com/r5wwImhb.jpg"> 
```

或者

```
<img src="http://i.imgur.com/r5wwImhb.jpg"/> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:22:09.453

这取决于您使用的是 HTML 还是 XHTML。第一个在 HTML 中是正确的，第二个在 XHTML 中是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:22:49.730

根据[w3schools](http://www.w3schools.com/tags/tag_img.asp)`<img>`上标签的第一个搜索结果：

> 在 HTML 中，`<img>`标签没有结束标签。
> 
> 在 XHTML 中，`<img>`标签必须正确关闭。

# ruby-on-rails - 没有捆绑器的应用程序构建中的宝石

> ID：15454291
> 
> 赞同：0
> 
> 时间：2013-03-16T20:20:30.143
> 
> 标签：ruby-on-rails, bundler

我知道如果应用程序使用捆绑器，我可以通过查看 Gemfile 轻松找到所有已安装的 gem。

比如说，我正在查看不使用 bundler 的 Rails 3 应用程序，我怎么知道它使用了哪些 gem？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:46:04.753

如果它不使用 Bundler，我不知道有确定的方法来识别正在使用的每个 gem。您可以搜索整个应用程序树以查找`require`要开始的语句，但这不会显示其中的大部分。Gems 在内部也需要其他 gems，并且会安装它们自己的依赖项，但是这些 gems 不会直接从您的应用程序的`require`语句中引用。

如果应用程序正常工作并且测试通过（意味着您至少安装了所有必需的 gem），您可以通过创建一个`Gemfile`，列出您知道需要的 gem，然后运行您的测试（或应用程序本身）来解决问题) via `bundle exec`，这将确保只有 中列出的宝石`Gemfile`是可见的。然后你会得到与丢失宝石相关的失败，并且可以将它们添加到`Gemfile`所有工作之前。一旦它通过 工作`bundle exec`，您就会知道您已经捕获了那里的所有需求。

如果您使用的是 RVM，您可能会发现为您的应用程序创建 gemset 以及`.rvmrc`应用程序根目录中的文件以利用 RVM 的自动 gemset 切换和 Bundler 集成很有帮助。它将更容易维护 gem 的状态。

在任何情况下，`gem list`在工作状态下运行应用程序都会向您显示它*可能*正在使用的所有 gem，但在没有限定到 gemset 或包装在的情况下`bundle exec`，您还将看到由于其他原因而安装的 gem，这些原因可能有与您的应用程序的依赖项无关。

# vb.net - VB.NET 禁用右键单击 AxShockwaveFlash 元素

> ID：15454292
> 
> 赞同：0
> 
> 时间：2013-03-16T20:20:52.767
> 
> 标签：vb.net, visual-studio-2010, visual-studio, axshockwaveflash

我试图在我的应用程序中禁用冲击波闪光元素的内置右键菜单，但它不起作用。有没有办法在VB中禁用它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T08:55:23.053

它应该禁用鼠标右键单击事件：

```
public partial class Form1 : Form ,IMessageFilter // after the name space
{     

     private const int WM_LBUTTONDOWN = 0x0201;

    public Form1()
    {
        InitializeComponent();
        Application.AddMessageFilter(this);
        this.FormClosed += new FormClosedEventHandler(this.Form1_FormClosed);
    }
    private void Form1_FormClosed(object sender, FormClosedEventArgs e)
    {
        Application.RemoveMessageFilter(this);
    }
    public bool PreFilterMessage(ref Message m)
    {
         //Filter out WM_NCRBUTTONDOWN/UP/DBLCLK
        if (m.Msg == 0xA4 || m.Msg == 0xA5 || m.Msg == 0xA6) return true;
        // Filter out WM_RBUTTONDOWN/UP/DBLCLK
        if (m.Msg == 0x204 || m.Msg == 0x205 || m.Msg == 0x206) return true;
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T17:18:09.327

**这可以给你一个 RightClick Disabled ShockWaveObject “只有 4 个简单的步骤”**

在您的“表单”上添加一个 Shockwave Flash 控件。

**1.新建一个名为“NoRightClickFlashControl.vb”的Class文件**

将下面的代码粘贴到 NoRightClickFlashControl.vb

```
Public Class NoRightClickFlashControl

Inherits AxShockwaveFlashObjects.AxShockwaveFlash
Private Const WM_RBUTTONDOWN As Integer = &H204

Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
    Select Case m.Msg
        Case WM_RBUTTONDOWN
            ' Do nothing on right-click
            m.Result = New IntPtr(1)
            Return
    End Select
    MyBase.WndProc(m)
End Sub

End Class 
```

**2.**在表单上将ShockwaveObject 的名称“AxShockwaveFlash1”更改**为“NoRightClickFlashControl1”**。

打开您的 Form.Designer.vb 文件

**3\. 更改****“Initialize 和 SuspendLayout”** 之间的代码，如下所示：

```
 Private Sub InitializeComponent()

'// Old is : Me.NoRightClickFlashControl1 = New AxShockwaveFlashObjects.AxShockwaveFlash()

    '// Change like this
    Me.NoRightClickFlashControl1 = New Your_Project_NameSpace.NoRightClickFlashControl

    Me.SuspendLayout() 
```

**然后最后**，在“结束类”文件附近的 Form.Designer.vb 中 -**更改以下内容**：

```
'// Old is : Friend WithEvents NoRightClickFlashControl1 As AxShockwaveFlashObjects.AxShockwaveFlash

  '// Change Like this :
  Friend WithEvents NoRightClickFlashControl1 As NoRightClickFlashControl

End Class '// the End Class is just o understand. 
```

所有其他编码与 ShockwaveFlashObject 相同 - 加载电影、播放

完成**了**

按F5运行！享受！！！

# ios - 我用播放按钮启动了一个 NSTimer，但想通过按下停止按钮来结束它，我将如何做到这一点？

> ID：15454294
> 
> 赞同：0
> 
> 时间：2013-03-16T20:20:55.603
> 
> 标签：ios, objective-c, ios5, ios6, nstimer

我有一个 NSTimer，当我按下播放键时它就开始了它的工作。但是当我按下停止按钮时，我希望它停止/无效。问题是我在处理播放按下的方法中启动计时器，但想在处理停止按下的方法中使其无效。

我将如何结束它？

我应该创建一个整个视图控制器类都可以访问的 NSTimer 实例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:22:09.483

> 我应该创建一个整个视图控制器类都可以访问的 NSTimer 实例吗？

这是解决方案，是的。

# c++ - 使用管道链接 Hadoop MapReduce (C++)

> ID：15454295
> 
> 赞同：5
> 
> 时间：2013-03-16T20:21:00.613
> 
> 标签：c++, hadoop, mapreduce, chain

有谁知道如何用 Pipes API 链接两个 MapReduce？我已经在以前的项目中使用 JAVA 链接了两个 MapReduce，但是今天我需要使用 C++。不幸的是，我还没有看到 C++ 中的任何示例。

有人已经做过了吗？这是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T19:21:27.583

使用[Oozie](http://oozie.apache.org/)工作流。它允许您将[Pipes](http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#a3.2.2.3_Pipes%20Oozie)与通常的 MapReduce 作业一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T13:31:07.350

我终于设法使 Hadoop Pipes 工作。这里有一些步骤可以使 src/examples/pipes/impl/ 中的 wordcount 示例生效。

我有一个工作的 Hadoop 1.0.4 集群，按照文档中描述的步骤进行配置。

要编写 Pipes 作业，我必须包含已在初始包中编译的管道库。这可以在 32 位和 64 位架构的 C++ 文件夹中找到。但是，我必须重新编译它，这可以按照以下步骤完成：

```
# cd /src/c++/utils
# ./configure
# make install

# cd /src/c++/pipes
# ./configure
# make install 
```

这两个命令将为我们的架构编译库，并在 /src/c++ 中创建一个包含已编译文件的“安装”目录。

此外，我必须添加`−lssl`和`−lcrypto`链接标志来编译我的程序。没有它们，我在运行时遇到了一些身份验证异常。多亏了这些步骤，我才能运行 src/examples/pipes/impl/ 目录中的 wordcount-simple。

然而，为了运行更复杂的例子 wordcount-nopipe，我必须做一些其他的事情。由于记录读取器和记录写入器的实现，我们直接从本地文件系统读取或写入。这就是为什么我们必须用 file:// 指定我们的输入和输出路径。此外，我们必须使用专用的 InputFormat 组件。因此，要启动这项工作，我必须使用以下命令：

`# bin/hadoop pipes −D hadoop.pipes.java.recordreader=false −D hadoop.pipes.java.recordwriter=false −libjars hadoop−1.0.4/build/hadoop−test−1.0.4.jar −inputformat org.apache.hadoop.mapred.pipes.WordCountInputFormat −input file:///input/file −output file:///tmp/output −program wordcount−nopipe`

此外，如果我们查看 1.0.4 版本的 org.apache.hadoop.mapred.pipes.Submitter.java，如果您使用 InputFormat 选项，当前实现将禁用指定非 java 记录读取器的能力。因此，您必须注释该行`setIsJavaRecordReader(job,true);`以使其成为可能并重新编译核心源以考虑此更改（[http://web.archiveorange.com/archive/v/RNVYmvP08OiqufSh0cjR](http://web.archiveorange.com/archive/v/RNVYmvP08OiqufSh0cjR)）。

```
if(results.hasOption("−inputformat")) { 
    setIsJavaRecordReader(job, true);
    job.setInputFormat(getClass(results, "−inputformat", job,InputFormat.class));
} 
```

# javascript - 弹性图像幻灯片不调整图像大小

> ID：15454296
> 
> 赞同：0
> 
> 时间：2013-03-16T20:21:06.643
> 
> 标签：javascript, jquery, twitter-bootstrap, slider

当我使用弹性图像滑块时，我遇到的问题与您在[弹性图像幻灯片未正确调整大小时看到的相同](https://stackoverflow.com/questions/15127839/elastic-image-slideshow-not-resizing-properly)

当我在下载的示例上调整窗口大小时，它工作正常，但是当我尝试使用 twitter bootstrap 集成插件时，它只调整图像的宽度。

当我使用引导程序并调整窗口大小时，javascript 控制台返回此消息：

```
Uncaught TypeError: Cannot call method 'apply' of undefined 
```

并在文件 jquery.eislideshow.js 中标记第 32 行：

```
line 32: jQuery.event.handle.apply( context, args ); 
```

如果我在示例中调整窗口大小（不进行更改），则不会出现此消息。

我做的第一件事是添加 $.noConflict(); 现在图像大小调整工作正常，但缩略图控制：

1.  使用 Firefox 和
2.  使用 chrome 尺寸太小。

在这两种情况下，我都无法更改幻灯片，并且控制台错误返回此消息：

```
Uncaught TypeError: Property '$' of object [object Object] is not a function 
```

有人有解决这个问题的线索吗？或 $.noConflict() 不是一个好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:41:20.790

替换 jQuery.event.handle.apply( context, args ); 与 $(this).trigger(event.type, args);

# java - 在Java中的列表中组合重叠的圆圈

> ID：15454301
> 
> 赞同：0
> 
> 时间：2013-03-16T20:21:22.167
> 
> 标签：java, arraylist, geometry, overlapping

这是我第一次在这里发帖，所以如果我遗漏了信息或提供了太多信息，或者搞砸了，我深表歉意。如果我这样做了，请告诉我。

所以我有一个圆圈列表，其中许多可能重叠。我通过以下方式检测重叠（鼻子是我的类，指定圆的大小（半径）和位置）：

```
public boolean isSame(Nose other)
{
    // if the difference between their X and Y positions are both
    // less than half the combined sizes...
    if (Math.abs(other.x - x) < (other.size + size) &&
        Math.abs(other.y - y) < (other.size + size) )
        return true;
    else
        return false;
} 
```

我相信如果圆圈很近，这应该返回 true，但不一定重叠。这就是我想要的应用程序（对于那些想要真正重叠的人，这个的最佳答案将对此有所帮助：） [如何检测重叠的圆圈并相应地填充颜色？](https://stackoverflow.com/questions/4170901/how-to-detect-overlapping-circles-and-fill-color-accordingly)

鉴于这种“重叠”检测，我试图将列表中的“重叠”圆圈与以下代码结合起来（鼻子是一个 ListArray）：

```
for (int i = 0; i < noses.size(); i++)
{
    //for each nose after the current one, check for redundant noses
    for (int j = i+1; j < noses.size(); j++)
    {
        Nose noseI = noses.get(i);
        Nose noseJ = noses.get(j);
        if (noseI.isSame(noseJ))
        {
            noses.set(i, new Nose((noseI.x + noseJ.x),
                                  (noseI.y + noseJ.y),
                                  (noseI.size + noseJ.size)));
            noses.remove(j);
            j--; // decrement back to check the nose that is NOW at that place.
        }
    }
    Nose noseI = noses.get(i).getBig();
    //Add noses[i] to the image being returned
    canvas.drawCircle((float)(noseI.x), (float)(noseI.y), (float)(noseI.size), paint);
} 
```

我相信这种循环查找相似元素并组合它们的方法应该可以工作，因为以下代码可以正常工作（从[list 的组合项](https://stackoverflow.com/questions/10368286/combine-items-of-list)修改）：

```
public static void main(String[] args) {
  List<Integer> list = new LinkedList<>();
  list.add(10);
  list.add(80);
  list.add(5);
  list.add(30);
  list.add(13);
  list.add(18);
  list.add(36);
  System.out.println(list);

  for (int i = 0; i < list.size(); i++)
  {
     for (int j = i + 1; j < list.size(); j++)
     {
        if (Math.abs(list.get(i) - list.get(j)) < 10)
        {
           Integer a = list.get(i);
           Integer b = list.get(j);
           list.set(i, (a + b) / 2);
           list.remove(j);
           j--;
        }
     }
  }

  System.out.println(list);
} 
```

这给了我以下输出：

```
[10, 80, 5, 30, 13, 18, 36]
[14, 80, 33] 
```

但是，我的实际应用程序始终在其上绘制重叠的圆圈。我真的很困惑为什么，因为我已经用简单的整数检查了组合循环，而且我相当确定我的重叠检测甚至不应该有彼此**靠近**的圆圈，所以肯定不应该有任何重叠.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:45:09.883

重叠的条件可以计算如下：

```
public boolean isSame(Nose other) {
   double dx       = other.x - x;
   double dy       = other.y - y;
   double distance = Math.sqrt( dx*dx + dy*dy );
   return distance < Math.max( size, other.size );
} 
```

命名很重要`isSame`没有意义，我建议`overlaps`到位。

# python - Python函数通过搜索目录中的所有页面来获取给定类的子类列表

> ID：15454303
> 
> 赞同：0
> 
> 时间：2013-03-16T20:21:38.837
> 
> 标签：python, subclass

我需要一个函数来获取给定目录中以“.py”结尾的所有文件的列表，然后对于每个文件，找出该文件中是否存在给定类的子类。如果有，则将类的实例添加到列表中。如果不是，则继续，然后在完成后返回列表。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:34:59.420

使用[`imp`](http://docs.python.org/2/library/imp.html)模块。通过`load_module`或者`load_source`您可以将文件动态加载`.py`到模块对象中。用于`dir`查看该模块中的内容，并且您还具有`issubclass`检查两个类之间是否存在继承的功能。

# user-interface - 在 Unity 的 OnGUI 中扭曲 GUI 元素

> ID：15454304
> 
> 赞同：1
> 
> 时间：2013-03-16T20:21:51.683
> 
> 标签：user-interface, unity3d, distortion, homography

我正在使用 Unity3D，并且我有一个在 OnGUI 内部调用的函数来布置我的应用程序的各种 gui 组件。通常，标签和按钮都在我提供的某个 Rect 内，它位于屏幕的中心。

没问题...但是，我想要有时渲染完全相同的gui元素，这些元素可以是动态的，因此不只是放入预制纹理中，放入侧面的梯形区域，看起来好像那个gui实际上是在一个平面上，从屏幕中心推开，并轻微旋转。在函数中绘制的所有 gui 按钮仍应正常响应。

我更希望我可以在 GUI.matrix 中指定一些值来将矩形映射到梯形，但我最初的探索似乎表明 gui 元素似乎没有使用同质坐标，并且一切仍然显示为矩形。

有没有办法用 Unity 做到这一点，理想情况下不需要访问专业功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:58:06.290

由于现在`Unity3D`GUI 系统不是很灵活。新的[GUI 系统](http://video.unity3d.com/video/6943180/unite-2012-using-the-new-gui)是尚未发布的功能之一`Unity 4`（我们都在等待它）。

从我的角度来看，它有几个问题，特别是：

*   您被迫使用代码流来布局组件，而不是使用更具声明性（或至少更结构化）的方式来做到这一点。
*   这是非常低效的（至少有一个按钮绘制调用）。
*   它根本不灵活。当按钮数量增加时，添加、删除、启用/禁用按钮可能会很快成为一个痛苦的操作。

> 但是，我有时想要渲染完全相同的 gui 元素，这些元素可以是动态的，因此不只是放入预制纹理中，放入侧面的梯形区域，看起来好像那个 gui 实际上是在一个平面，从屏幕中心推开，并稍微旋转。在函数中绘制的所有 gui 按钮仍应正常响应。

`Unity`使用的`GUI`类即使不是不可能也很难获得。

我看到了两种可能性：

1.  不要使用`GUI`类来做到这一点。如果你`GUI`足够简单，你可以使用例如实现你自己的（甚至是 3d）按钮：
    *   具有按钮背景纹理的网格（平面或梯形网格）
    *   用于绘制 3D 文本的[TextMesh](http://docs.unity3d.com/Documentation/Components/class-TextMesh.html)
    *   [光线投射](http://docs.unity3d.com/Documentation/ScriptReference/Camera.ViewportPointToRay.html)检查按钮是否被按下
2.  使用实现更高级 GUI 系统（如[NGUI）的库](http://www.tasharen.com/?page_id=140)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:38:11.487

当我遇到同样的问题时，我只是使用带有纹理的普通 3D GameObjects 立方体并在它们上调用`OnMouseDown`(PC/Mac) 或`RayCasting`(Android/iOS)。我想每个人都是这样的。

# android - 在 Android 中，我应该在哪里放置活动元素？

> ID：15454305
> 
> 赞同：1
> 
> 时间：2013-03-16T20:22:05.163
> 
> 标签：android

我在看[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

它有很多我可以实现的东西。我只是好奇我是否可以把这些放在一个里面`<application>`或者它们必须放在一个里面`<activity>`。最后，如果我想使用类似的东西`android:clearTaskOnLaunch`，我需要把它放在`<activity>`清单中的每一个里面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:35:30.470

考虑两个级别：应用程序和活动。

首先，两个标签有不同的属性，不能互相使用。

其次，从更广泛的角度思考应用程序级别应该使用哪些方法（参数）以及活动级别应该使用哪些方法（参数）。

就像应用程序标签具有“allowtaskreparenting”属性一样。它的解释是，“指定一个活动可以在适当的时候从它所在的任务中移出到它具有亲和力的任务中”这意味着它适用于所有活动。

同样，如果您为活动标签添加一个属性，它将只适用于该活动而不是整个应用程序。

我希望你能得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:24:59.310

如果您将查看应用程序页面：

[http://developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)

您将看到适用于应用程序标签的参数。

这些活动可能不适用于应用程序。

# gcc - 编译器如何跨平台（硬件）？

> ID：15454308
> 
> 赞同：2
> 
> 时间：2013-03-16T20:22:13.243
> 
> 标签：gcc, compiler-construction, compilation, cross-platform

我刚刚意识到二进制编译器会将源代码转换为目标平台的二进制文件。有点明显......但如果编译器以这种方式工作，那么同一个编译器如何用于不同的系统，如 x86、ARM、MIPS 等？

他们不应该“知道”硬件平台的机器语言才能知道如何构建二进制文件吗？编译器（如 gcc）是否知道支持的每个平台的机器语言？

该系统如何可能，以及如何同时针对这么多平台优化编译器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:28:49.260

是的，他们必须“了解”他们支持的每个平台的机器语言。这是生成机器代码所必需的。然而，编译是一个多步骤的过程。通常，编译的第一步对于大多数架构都是通用的。

**取自维基百科**

> **编译器的结构**
> 
> 编译器将高级语言的源程序与底层硬件连接起来。
> 
> 编译器需要
> 
> 1.  确定程序语法的正确性，
>     
>     
> 2.  生成正确有效的目标代码，
>     
>     
> 3.  运行时组织，以及
>     
>     
> 4.  根据汇编器和/或链接器约定格式化输出。
>     
>     
> 
> 编译器由三个主要部分组成：前端、中间端和后端。
> 
> **前端**
> 
> 检查程序是否根据编程语言的语法和语义正确编写。在这里可以识别合法和非法程序。以有用的方式报告错误（如果有）。类型检查也是通过收集类型信息来执行的。然后前端生成源代码的中间表示或 IR 以供中间端处理。
> 
> **中间端**
> 
> 是优化发生的地方。用于优化的典型转换是删除无用或无法访问的代码、发现和传播常量值、将计算重新定位到执行频率较低的位置（例如，在循环之外），或基于上下文的计算的专门化。中间端为后面的后端生成另一个 IR。大多数优化工作都集中在这部分。
> 
> **后端**
> 
> 负责将中间端的 IR 翻译成汇编代码。为每个 IR 指令选择目标指令。寄存器分配尽可能为程序变量分配处理器寄存器。后端通过弄清楚如何让并行执行单元保持忙碌、填充延迟槽等来利用硬件。尽管大多数优化算法都在 NP 中，但启发式技术已经得到了很好的发展。

更多这篇描述[编译器结构的](http://en.wikipedia.org/wiki/Compiler#Structure_of_a_compiler)文章和处理[交叉编译器](http://en.wikipedia.org/wiki/Cross_compiler)的这篇文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:29:09.427

[http://llvm.org/](http://llvm.org/)项目将回答您在这方面的所有问题 :) 简而言之，交叉硬件编译器发出代码的“中间表示”，它与硬件无关，然后通过本*机*工具进行定制链

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T20:30:39.113

是的，这是可能的，它被称为[Cross Compiler](http://en.wikipedia.org/wiki/Cross_compiler)。编译器通常首先生成当前机器无法理解的[目标代码](http://en.wikipedia.org/wiki/Object_code)，但可以使用另一个编译器将其迁移到目标机器。接下来，再次“编译”目标代码并与目标机器的外部库链接。

**TL;DR：**是的，编译器知道目标代码，但您可以在其他硬件中编译。

我建议您阅读附加的链接以获取信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T20:30:42.747

每个平台都有自己的工具链，工具链包括gcc、gdb、ld、nm等。

让我们以现在的 gcc 为例。GCC 源代码有很多层，包括架构相关和独立的部分。体系结构相关部分包含处理体系结构特定事物的过程，例如它们的堆栈、函数调用、浮点操作。我们需要为特定架构（如 ARM）交叉编译 gcc 源代码。您可以在此处查看其步骤以供参考：- [http://www.ailis.de/~k/archives/19-arm-cross-compiling-howto.html#toolchain](http://www.ailis.de/~k/archives/19-arm-cross-compiling-howto.html#toolchain)。

这个架构相关的部分负责处理机器语言操作。

# c# - 如何从视频中提取矩形和非矩形区域？

> ID：15454310
> 
> 赞同：0
> 
> 时间：2013-03-16T20:22:31.357
> 
> 标签：c#, kinect

我正在使用 Kinect 开发面部跟踪应用程序，并且输出如下。

![人脸追踪](../Images/98d9a0b7825366465d077905743c39f3.png)

我想要做的是提取确切的面部区域，无论是黄线区域还是红色矩形，如果你能告诉我如何做这两者会很棒。基本上，我期望输出只有感兴趣的区域，否则为黑色。

现在我有我需要的所有点坐标，但我不确定要使用哪个类和方法。

请注意，我正在使用视频帧，如果它有任何区别。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:57:46.747

我没有在 C# 中这样做，但是在 C++ 中，运行这样的东西会生成一个 RGB 值数组：

```
const XnRGB24Pixel *pImage = imageMD->RGB24Data(); // generate array
XnRGB24Pixel pixelRGB = *pImage; // get the first element of array
byte red = pixelRGB.nRed // read the RED value 
```

该数组是一维的，元素从底部开始逐行存储（最后一行，然后是最后一行之前的行，...）。像这样使用嵌套的 for 循环遍历它们会给你想要的矩形区域：

```
for(int y = RECTANGLE_Y1; y < RECTANGLE_Y2; y++)
{
    for(int x = RECTANGLE_X1; x < RECTANGLE_x2; x++)
    {
        pixelRGB = pImage[y*RESOLUTION_WIDTH + x]; // get the element
        // work with pixelRGB
    }
} 
```

将 RECTANGLE_X1 和 RECTANGLE_Y1 替换为矩形左下边缘坐标的坐标，将 RECTANGLE_X2 和 RECTANGLE_Y2 替换为右上边缘坐标。

为了获取非矩形区域内的像素值，如果您能够计算出识别给定 [x,y] 何时在该区域内所需的几何计算，则类似的方法将起作用；但即使在那之后，我也不知道如何将它存储在传统的数据结构中。

希望这可以帮助。

# c++ - 为迭代器编写解引用运算符

> ID：15454311
> 
> 赞同：0
> 
> 时间：2013-03-16T20:22:41.433
> 
> 标签：c++, data-structures, iterator, set

我正在编写一个 Set 类，以便了解它们的实际工作方式，并尝试编写我自己的迭代器。据我了解，迭代器只是一个高级指针，它通过结构抽象化迭代。

话虽如此，我知道迭代器的重要部分是 ++ -- 和 * 操作。我已经成功地创建和测试了 in/decrement 运算符，但是当我尊重迭代器时，我正在概念化*我*需要返回的内容。

我是否返回它指向的对象？

这是我的 set.h 文件中的相关代码：

```
class Set{
private:
    struct Elem {
        ELEMENT_TYPE info;
        Elem *prev, *next;
    };
    Elem *_head, *_tail;
    int _size;

public:
    //...

    class Iterator{
        private:
            Elem * _cur;

    public:
        Iterator(){}
        Iterator( Elem* );

        Iterator operator++( int );
        Iterator operator++();
        Iterator operator--( int);
        Iterator operator--();

        bool operator==( const Iterator& rhs );
        bool operator!=( const Iterator& rhs );

        Elem operator*();

    };

     //...
}; 
```

就像我说的，我正在返回 Iterator 指向的“Elem”，对吗？

```
Set::Elem* Set::Iterator::operator*(){

return _cur;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:26:44.620

*通常*你会通过引用返回指向的元素。

```
Elem&       operator*()       { return *_cur; } 
```

不过，它确实有点取决于迭代器类型。某些迭代器（例如输入迭代器）不一定会返回引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:27:58.703

您通常会返回一个参考，例如：

```
ELEMENT_TYPE & operator*() { return _cur->info;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:27:24.310

`*`运算符应返回值或引用

```
Set::Elem &Set::Iterator::operator*() {
    return *_cur;
}

const Set::Elem &Set::Iterator::operator*() const {
    return *_cur;
} 
```

# c++ - 二叉搜索树键/值对 - 我知道值但不知道键 C++

> ID：15454319
> 
> 赞同：6
> 
> 时间：2013-03-16T20:23:39.940
> 
> 标签：c++, algorithm, data-structures, binary-search-tree, key-value

我有一个简单的问题，我很困惑。我知道在二叉搜索树中具有键/值对的概念是什么，以及树在构建时的样子。

如果我不知道它的键是什么，我不确定如何在这样的 BST 中搜索一个值？

例如：

假设我有一个充满整数（作为值）和唯一整数（作为键）的二叉搜索树。假设我想计算特定整数（比如说：200）在这个 BST 中出现的次数。所以我知道，200 是“价值”而不是“关键”。因此我根本不知道钥匙。

我现在如何搜索整个 BST 中的所有“200”？它现在变成一个简单的 BST 并且我根本不需要密钥吗？但同样，使用“键”而不是值将树排列到左孩子和右孩子。

我还可以为您提供如何初始化 BST 的代码示例：

```
void insertNode(TreeNode *&p, int key, int value)
{
  if (p == NULL) {
    p = new TreeNode;
    p->key = key;
    p->value = value;
    p->left = NULL;
    p->right = NULL;
    return;
  }

  if (key < p->key)
    insertNode(p->left, key, value);
  else
    insertNode(p->right, key, value);
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T20:40:04.087

如果要按值而不是键进行搜索，则不能利用树是二叉**搜索树的事实。**因此，您别无选择，只能使用 BFS 遍历整个树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:39:57.313

**二叉搜索树（BST）**对于存储数据以进行快速访问、存储和删除非常有用。二叉搜索树中的数据存储在树节点中，并且必须与它们关联一个**序数值**或**键**；这些键用于构造树，使得左子节点的值小于父节点的值，右子节点的值大于父节点的值。有时，**键**和**数据**是一回事。

典型的键值包括简单的整数或字符串，键的实际数据将取决于应用程序。让我们考虑一个存储字符串/双精度对的二叉搜索树。也就是说，键是字符串值，与键关联的数据是双精度值。开发人员可以使用字符串值搜索树。

在这种情况下，一个基本的递归搜索算法将如下所示：

```
 node search (node, key) {
   if node is null then return null;

   if node.key = key then
      return node

   if key < node then
      return search (node.left, key);
   else
      return search (node.right, key);
  } 
```

其中参数是**node** : 树的根 & **key** : 要搜索的值。

所以通常我们可以根据需要的键而不是键的关联值进行搜索。

# asp.net - ASP.net/VB.net 在运行时生成数据绑定表单

> ID：15454320
> 
> 赞同：0
> 
> 时间：2013-03-16T20:23:43.980
> 
> 标签：asp.net, vb.net, data-binding, sqldatasource

我目前正在尝试将在运行时动态生成一组 HTML 表单控件的代码放在一起，然后对这些控件进行数据绑定。从我读到的内容来看，您不能对表单控件（如`<input>`、`<textarea>`等）进行数据绑定，但是我能找到的所有信息都是几年前的。不确定现在是否可以使用 .net 4.5 执行此操作。

无论如何，我要问的是最好的方法是完成我正在尝试做的事情，无论是利用我已经拥有的东西，还是从完全不同的方向去做。

这种动态生成的表单的目标有两个：

1.  在现有网站上创建/修改/删除新闻帖子的能力
2.  以尽可能少的代码更改重用此代码的能力

这是我当前的代码：

```
<%@ Import Namespace="System.Data" %> 
<%@ Page Language="VB" %>

<script runat="server">
    Protected Sub Page_Load(sender As Object, e As EventArgs)    
    Dim dataSourceInfo As New DataSourceInfo
    dataSourceInfo.TableName = "Post_Table"
    dataSourceInfo.DataColumns = {"PostTitle", "PostContent", "PostURL", "PublishDate", "ExpirationDate", "Active"}
    dataSourceInfo.KeyColumn = "ID"

    BuildCMSForm(dataSourceInfo)
    BindCMSForm(dataSourceInfo)
    End Sub

    Public Structure DataSourceInfo
    Dim TableName As String
    Dim DataColumns() As String
    Dim KeyColumn As String
    End Structure

    Public Sub BuildCMSForm(ByVal dataSourceInfo As DataSourceInfo)
    Dim dataSource As SqlDataSource = New SqlDataSource()
    Dim strSelectCommand As String
    dataSource.ProviderName = "System.Data.SqlClient"
    dataSource.ConnectionString = "Data Source=LOCALHOST\SQLEXPRESS;Initial Catalog=Test_Web;Integrated Security=SSPI"
    strSelectCommand = "SELECT COLUMN_NAME, DATA_TYPE " & _
        "FROM INFORMATION_SCHEMA.COLUMNS " & _
        "WHERE TABLE_NAME = '" & dataSourceInfo.TableName & "' " & _
        "AND COLUMN_NAME IN ("

    For Each col As String In dataSourceInfo.DataColumns
        strSelectCommand = strSelectCommand & "'" & col.ToString & "', "
    Next

    strSelectCommand = strSelectCommand.Substring(0, strSelectCommand.Length - 2) & ")"
    dataSource.SelectCommand = strSelectCommand

    Dim dv As DataView
    dv = CType(dataSource.Select(DataSourceSelectArguments.Empty), DataView)

    For Each row As DataRow In dv.Table.Rows()
        Dim newControlDiv As HtmlGenericControl = New HtmlGenericControl("div")
        newControlDiv.Attributes.Add("id", "CMSControlDiv" & row.Item(0).ToString)
        newControlDiv.Attributes.Add("class", "CMSControlDiv")
        newControlDiv.InnerHtml = row.Item(0).ToString & ":<br />"

        Select Case row.Item(1).ToString
        Case "text"
            Dim newControl As TextBox = New TextBox
            newControl.TextMode = TextBoxMode.MultiLine
            newControl.ID = row.Item(0).ToString
            newControl.Attributes.Add("class", "CMSControl")

            newControlDiv.Controls.Add(newControl)
        Case "varchar"
            Dim newControl As TextBox = New TextBox
            newControl.ID = row.Item(0).ToString
            newControl.Attributes.Add("class", "CMSControl")

            newControlDiv.Controls.Add(newControl)
        Case "datetime"
            Dim newControl As TextBox = New TextBox
            newControl.ID = row.Item(0).ToString
            newControl.Attributes.Add("class", "CMSControl")

            newControlDiv.Controls.Add(newControl)
        Case "bit"
            Dim newControl As CheckBox = New CheckBox
            newControl.ID = row.Item(0).ToString
            newControl.Attributes.Add("class", "CMSControl")

            newControlDiv.Controls.Add(newControl)
        End Select

        AdminForm.Controls.Add(newControlDiv)
    Next

    Dim newSubmit As HtmlInputSubmit = New HtmlInputSubmit
    newSubmit.Attributes.Add("id", "CMSSubmit")
    newSubmit.Value = "Submit"

    AdminForm.Controls.Add(newSubmit)
    End Sub

    Public Sub BindCMSForm(ByVal dataSourceInfo As DataSourceInfo)
    Dim dataSource As SqlDataSource = New SqlDataSource()
    Dim strSelectCommand As String
    Dim strColumns As String = ""
    dataSource.ProviderName = "System.Data.SqlClient"
    dataSource.ConnectionString = "Data Source=LOCALHOST\SQLEXPRESS;Initial Catalog=Test_Web;Integrated Security=SSPI"
    strSelectCommand = "SELECT TOP 1 {0} FROM {1} WHERE [PostType] = 'Event'"

    For Each col As String In dataSourceInfo.DataColumns
        strColumns = strColumns & "[" & col.ToString & "], "
    Next

    strColumns = strColumns.Substring(0, strColumns.Length - 2)
    dataSource.SelectCommand = String.Format(strSelectCommand, strColumns, dataSourceInfo.TableName)

    Dim dv As DataView
    dv = CType(dataSource.Select(DataSourceSelectArguments.Empty), DataView)

    For Each col As DataColumn In dv.Table.Columns()

    Next
    End Sub
</script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
    <meta charset="utf-8" />
    <title></title>
    <link href="~/styles/main.css" rel="stylesheet" />
    </head>
    <body>
    <div id="wrapper" runat="server">
        <div id="Content" class="Content" runat="server">
        <form id="AdminForm" runat="server">
        </form>
        </div>
    </div>
    </body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:40:36.300

这将是很多工作。为了捕获用户所做的更改，您必须在每次回发时重建您的控件集，并在视图状态或会话中保留大量元数据，以便在需要更新时知道哪个控件属于哪个数据库字段.

我建议更仔细地研究一些内置控件，例如`FormView`and `DetailsView`。如果没有记忆，他们可以为结果集中的列自动生成输入控件。如果您需要微调它们的操作方式（例如，通过排除主键字段），您可以对控件进行子类化并更改其对要呈现的列的选择。

虽然它们可能并不完全适合您的目的，但“满足 90% 的完美可以节省 50% 的努力”。它们代表了许多您不必编写、测试或支持的功能。

# iphone - iPhone，打开自定义相机，拍照，在 UITableView 中保存 GPS 信息

> ID：15454321
> 
> 赞同：-2
> 
> 时间：2013-03-16T20:23:47.480
> 
> 标签：iphone, uitableview, camera, gps, image

好的，我需要打开相机，拍张照片并将其保存在 UITableView 中，还需要保存 GPS 信息，例如日期、地点以及距离拍摄地点的距离。图像需要与 GPS 信息一起保存在 UITableView 中，并且每次您拍摄新照片时，该过程都会重新开始，并将一张接一张地保存在同一个 UITableView 中。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:41:38.687

首先，欢迎来到stackoverflow。

其次，这不是一个真正的问题，所以我将以最好的方式“回答”这个问题。看起来你只是想学习如何制作一个 iPhone 应用程序，这是你第一次尝试它。

我强烈建议先查看[stackoverflow 常见问题解答](https://stackoverflow.com/faq "stackoverflow 常见问题")。

接下来，查看 Apple 的示例应用程序和开发人员库以获取一些入门帮助：

[示例代码](https://developer.apple.com/library/ios/navigation/#section=Resource%20Types&topic=Sample%20Code "示例代码")

[入门](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/Introduction.html "入门")

[照片选择器](https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196 "照片选择器")

[照片按位置](https://developer.apple.com/library/ios/#samplecode/PhotosByLocation/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010136 "照片按位置")

最后，在您处理代码时，如果您遇到问题，请返回并作为更具体的问题。

谢谢，

担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:45:59.267

照片最重要的 GPS 信息是：
- 时间
- 纬度
- 经度

稍微先进的 GPS 信息，对照片仍然很重要：

*   航向（v1）（或路线）你要去的方向，开车；不幸的是，在拍摄照片时，您已经静止了一段时间，因此并不总是有一个有效的标题/课程可用。

*   航向 (v2) 拍摄照片时相机所看的方向：如果 GPS 不适合，您也可以使用指南针方向。

这 3 或 4 个属性通常使用 EXIF 标头存储到 jpg 中。如果由于某种原因您不能或不想将该信息存储到图片中，那么您必须将该值存储在自己的文件中。一个简单的 CSV 文件就足够了。

# actionscript-3 - 在下载到用户计算机的 swf 中创建文本文件

> ID：15454323
> 
> 赞同：2
> 
> 时间：2013-03-16T20:24:10.073
> 
> 标签：actionscript-3, flash, browser

是否可以在用户浏览器中运行的 swf/flash 中即时创建文本文件并提示用户将文件下载到他的计算机上？

我对 FileReference 类很熟悉，但是如果不读取要从服务器下载的文件，我就无法弄清楚该类的工作方式。

编辑：为了在我的用例中完全工作，swf/浏览器应该或多或少像从远程服务器下载的文件一样处理文件 - 这意味着它应该提示用户并询问他想对文件做什么并给出在默认应用程序中打开文件的选项（或者如果用户已将其设置为此类文件的默认操作，则自动打开）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:55:33.770

试试这个：

```
var file:FileReference = new FileReference();
file.save("this is a text", "file.txt") 
```

# r - 如何使用变量来命名 R 中的另一个变量？

> ID：15454324
> 
> 赞同：8
> 
> 时间：2013-03-16T20:24:15.627
> 
> 标签：r, variables

我有一个函数用于`readline`允许用户输入他们想要为我将为他们创建的变量提供的名称。我们称之为“USER.DEFINED.VARIABLE”。它包含我想用于另一个变量的名称。假设“USER.DEFINED.VARIABLE”被设置`readline`为“jimsfilename”。

我知道我可以使用以下方法为名为“jimsfilename”的变量赋值：

```
assign(USER.DEFINED.VARIABLE,c(1,2,3,4,5)) 
```

“jimsfilename”现在将包含`1,2,3,4,5`在其中。但是，鉴于我（在 readline 将其分配给 USER.DEFINED.VARIABLE 之前）不知道它的名称是什么，我现在如何对“jimsfilename”大惊小怪？

换句话说，假设我现在想为 jimsfilename 中的每个值加 1。我不能这样做：

```
USER.DEFINED.VARIABLE <- USER.DEFINED.VARIABLE + 1 # can't do this 
```

因为“USER.DEFINED.VARIABLE”实际上是一个文本字符串名称。我想引用 jimsfilename，但我所拥有的只是 USER.DEFINED.VARIABLE 来指示它。我敢肯定这很容易...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T20:30:26.983

这取决于你想做什么，但这里有一个使用`get`函数的例子：

```
x = 1
get("x") + 1 
```

> 2

```
assign("name", get("x") + 1)
name 
```

> 2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:08:03.573

为什么不直接对变量的所有操作（添加 1 或其他更改）使用您自己的名称对变量的本地副本进行操作，然后在函数/脚本/任何分配或其他保存的末尾？这比创建变量要简单得多，然后必须使用它`get`来获取副本，更改它，然后`assign`再次。

更好的是在函数中使用你自己的变量名，然后只返回结果并让用户决定在那个时候给它命名。这是更 Rish 的做事方式，最好根本不使用该`assign`功能。`assign`通过使用列表和下标可以更简单地完成 大多数可以使用的事情。

函数不应更改全局环境中的任何内容，只需返回用户可能需要的任何值并让用户进行分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:32:30.923

您可以使用`eval`和`parse`。后者将文本解释为控制台中的输入。第一个计算表达式（`parse`例如，由 生成）。例子：

```
> varname <- "user.defined.variable"
> varvalue <- 42
> eval(parse(text=paste(varname, varvalue, sep=" <- ")), envir=.GlobalEnv)
> ls()
[1] "user.defined.variable" "varname"               "varvalue"             
> user.defined.variable
[1] 42 
```

请注意，我已选择全局环境作为新变量的目标。如果不是这种情况，您可以进行适当的更改。

要稍后引用新变量，您可以使用`as.symbol`. 只需在分配新变量的环境下评估它：

```
> eval(as.symbol(varname), envir=.GlobalEnv)
[1] 42 
```

您还可以使用`substitute`创建`eval`可以理解的表达式：

```
> eval(substitute(x+1, list(x=as.symbol(varname))), envir=.GlobalEnv)
[1] 43 
```

要更改新变量，只需创建赋值表达式并计算它们：

```
> eval(substitute(x <- x*10, list(x=as.symbol(varname))), envir=.GlobalEnv)
> eval(as.symbol(varname), envir=.GlobalEnv)
[1] 420 
```

# list - 怎么能说一个函数输入应该是一个列表呢？

> ID：15454330
> 
> 赞同：0
> 
> 时间：2013-03-16T20:25:27.310
> 
> 标签：list, function, haskell, constraints

我需要制作一个函数原型，即 toList，它将一个列表作为其唯一参数，并返回一个列表列表（其类型与原始列表相同）。例如 [Char] 会给我们一个 [[Char]]。

我试过了 ：

```
(List a) => a -> [a] 
```

由于类列表不存在，因此无法使用。

那我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:28:42.040

试试这个：

```
f :: [a] -> [[a]] 
```

Tails 就是一个很好的例子：

```
tails :: [a] -> [[a]] 
```

用法：

```
 tails [1,2,3] == [[1,2,3], [2,3], [3],[]] 
```

# javascript - 随机长度 For 循环仅生成低数字

> ID：15454336
> 
> 赞同：1
> 
> 时间：2013-03-16T20:26:07.987
> 
> 标签：javascript, loops, random, for-loop

所以我有一个循环随机次数的for循环：

```
for(var i = 0; i<Math.floor(Math.random()*100); i++){
  var num = i
} 
```

这有效，但似乎偏低。只运行几次 'num' 似乎永远不会返回超过 20 的任何值。将我们的域更改为 Math.random()*1000 似乎不会返回任何超过 40 的值。

这只是有点混乱，所以不需要任何实际工作，只是对解释感到好奇。

这是一个快速链接到工作代码来测试自己：http: [//jsfiddle.net/Lv45r/1/](http://jsfiddle.net/Lv45r/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:28:01.873

在您的版本中，每个循环都会生成一个新的随机数。这导致偏向于较低的数字。要解决这个问题，首先创建您的号码，然后循环：

```
for(var i = 0, max=Math.floor(Math.random()*100); i<max; i++){
  var num = i
} 
```

或者

```
var max = Math.floor(Math.random()*100);
for(var i = 0; i<max; i++){
  var num = i
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:28:51.393

*问题是，每次*迭代都会评估您确定循环次数的随机数。将代码更改为以下内容：

```
$(document).ready(function(){
    $('button').click(function(){
        var loops = Math.floor(Math.random()*100);
        for(var i=0; i<loops; i++){
            var num = i
        }
        alert(num);
    })
}) 
```

更新小提琴：http: [//jsfiddle.net/Lv45r/3/](http://jsfiddle.net/Lv45r/3/)

# jquery - 从示例 url 显示 Json 数据

> ID：15454342
> 
> 赞同：5
> 
> 时间：2013-03-16T20:26:46.650
> 
> 标签：jquery, json

我知道以前有人问过这个问题，但是我很难在这里看到我的代码有什么问题，因为我仍然得到一个空白页：

页面中包含jquery

（网址来自[http://www.geonames.org/export/JSON-webservices.html](http://www.geonames.org/export/JSON-webservices.html)）

```
var url="http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo";
    $.getJSON(url, function (data) {
       $.each(data.geonames, function (){
        $('ul#results').append('<li><div class=\"name\">' +this.toponymName+ '</div></li>');
        });
    }); 
```

我尝试将文件保存在本地，用“test.json”替换 url，但那里也没有。我在这里缺少任何想法或语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:30:22.400

从浏览器点击网址：[http ://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo](http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo)

您会看到“已超过演示的每小时 2000 积分的限制。请使用应用程序专用帐户。请勿将演示帐户用于您的应用程序。”

# wordpress - Wordpress - 检查帖子是否存在，如果存在则更新字段

> ID：15454347
> 
> 赞同：0
> 
> 时间：2013-03-16T20:27:15.083
> 
> 标签：wordpress, posts

我使用前端表单发布，我想要的是检查帖子是否按标题存在。如果是并且元字段值大于旧值，只需替换该值。过去有人实施过类似的事情吗？

```
 <?php 
 session_start();
 $user_email = $_SESSION['user_email']; 
 $user_name = $_SESSION['user_name'];
 $user_img_url = 'https://graph.facebook.com/'.$user_name.'/picture?width=200&height=200';

            global $wpdb;
            global $post;
            $title = $user_name; // get the inputted title
            $content = $_POST['content']; // get the inputted content
            $categorie = $_POST['cat'];  // get the category selected by user
            $zombies = $_POST['zombies'];
            $kliks = $_POST['klik'];
            $timess = $_POST['times'];
            $name = $_POST['namn'];

              if( 'POST' == $_SERVER['REQUEST_METHOD'] ) { // if form has been submitted

                    $my_post = array(
                     'post_title' => $title,
                     'post_content' => $content,
                     'post_status' => 'publish',
                     'post_author' => 2,
                     'post_category' => array(2),
                      );

                $my_post = wp_insert_post($my_post);
                add_post_meta($my_post, 'Zombies', $zombies);
                add_post_meta($my_post, 'klik', $kliks);
                add_post_meta($my_post, 'times', $timess);
                add_post_meta($my_post, 'namn', $name);
                add_post_meta($my_post, 'profile_photo', $user_img_url);
                wp_redirect( home_url() );

                  # if $verifica is not empty, then we don't insert the post and we display a message

              } 
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:13:18.870

您的问题对我来说不是很清楚，但是如果您想按标题查询帖子，则可以使用[get_page_by_title()](http://codex.wordpress.org/Function_Reference/get_page_by_title)函数，如下所示

```
$post = get_page_by_title( $_POST['post_title'], OBJECT, 'post' ); 
```

要获取自定义元字段，您可以使用[get_post_meta()](http://codex.wordpress.org/Function_Reference/get_post_meta)函数，如下所示

```
$meta_value = get_post_meta($post->ID, 'field_name', true); 
```

然后比较并更新您可以使用的元值，例如，

```
if( $_POST['custom_meta_field'] > $meta_value )
{
    // Update the meta value
    update_post_meta( $post->id, 'field_name', $meta_value );
} 
```

[update_post_meta()](http://codex.wordpress.org/Function_Reference/update_post_meta)函数用于更新自定义元字段。

## 更新：（基于评论）

您可以使用以下方式获取 Facebook ID 可用的帖子

```
$post = get_page_by_title( $_POST['facebook_id'], OBJECT, 'post' ); 
```

此外，如果元字段是`time`字符串（上午 12:10），那么您必须在比较之前将其转换为时间戳/数字值，例如，

```
$meta_value = strtotime(get_post_meta($post->ID, 'field_name', true)); 
```

所以，它会变成类似的东西`1363493400`，你可以比较像

```
if( $_POST['custom_meta_field'] > $meta_value ){ ... } 
```

在这种情况下，您`custom_meta_field`还应该是时间戳/数字值，或者您必须使用[strtotime()](http://php.net/manual/en/function.strtotime.php)函数对其进行转换，就像`$meta_value`已转换一样。

# linux - 通过使用允许仅运行恢复过程的内核补丁从 fork 炸弹中恢复

> ID：15454356
> 
> 赞同：-4
> 
> 时间：2013-03-16T20:28:05.120
> 
> 标签：linux, kernel, fork

WAS：阅读关于迁移到 SU 的另一个问题：[https](https://superuser.com/questions/435690/does-linux-have-any-measures-to-protect-against-fork-bombs) ://superuser.com/questions/435690/does-linux-have-any-measures-to-protect-against-fork-bombs ，我在想一个内核级别的解决方案。我在 LWN ( [http://lwn.net/Articles/435917/](http://lwn.net/Articles/435917/) ) 上阅读了一项提案，但该提案侧重于检测叉形炸弹以防止它发生。

我会专注于恢复，因为检测基本上意味着系统不可用；系统的任何用户很快就会检测到什么。

我只将上下文扩展到非分叉炸弹：如果您的系统没有响应并且您无法获得像样的控制台但仍然不想干净地重新启动它，该怎么办。

所以问题：

是否有可能通过一些 SysReq 命令告诉内核进入一个只运行一个进程（并拒绝分叉它）的恢复 shell，意图杀死错误的进程；这个功能有没有实现过？如果不是，那为什么？

备注我不是在说向所有进程发送 SIGKILL 的 SysReq+i，而是对所有进程表现得像 SIGSTOP 的东西，它可以是另一个内核 kexec 以及第一个允许检查和恢复它的内核。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:33:43.820

对于非 root 用户，您始终可以使用[setrlimit(2)](http://man7.org/linux/man-pages/man2/setrlimit.2.html)系统调用和`RLIMIT_NPROC`.

您可以使用 bash`ulimit`内置（或者`limit`如果`zsh`用作您的外壳）。您还可以 `/etc/security/limits.conf`和/或`/etc/pam.d/`在“系统范围内”限制它（但如果需要，可以按用户调整限制用户等）。[PAM](http://en.wikipedia.org/wiki/Linux_PAM)对此非常强大。

我认为您不需要一些有风险的内核补丁。您只想小心管理您的机器。

而且您并不关心`root`分叉炸弹：如果恶意（或愚蠢）用户获得了 root 访问权限，那么您的 Linux 系统无论如何都注定要失败（即使没有 root 分叉炸弹）。没有人关心它们，因为根据定义，root 是受信任的，并且需要谨慎而聪明地行事。（同样，root 可以，`/bin/rm -rf /`但这通常很愚蠢，就像根叉炸弹一样愚蠢，因此没有针对这两种错误的保护措施......）

并且内核补丁会很困难：您希望 root 能够运行多个进程（至少，恢复 shell 和子命令，可能是管道），而不仅仅是一个。!内核补丁可能很脆弱，然后使整个系统崩溃....

当然，您可以自由地修补您的内核，因为它是[免费软件](http://en.wikipedia.org/wiki/Free_software)。然而，制作一个*有趣*的补丁并让内核社区被它吸引也是一个社会问题（并且更难实现）。祝你好运。[LKLM](https://lkml.org/)是讨论这个问题的更好场所。

PS `SIGSTOP`.发送到每个非*初始化*进程不会对根叉炸弹有太大帮助：您将无法键入任何 shell 命令，因为您的 shell 也将永远停止！

聚苯乙烯。问题中引用的 LWN 文章有评论提到`cgroup`-s 可能是相关的。

# image - 如何使参数化的高斯模糊？

> ID：15454359
> 
> 赞同：0
> 
> 时间：2013-03-16T20:28:18.517
> 
> 标签：image, algorithm, graphics, blur, gaussian

我已经使用矩阵/内核实现了高斯模糊。我有 3x3、5x5 和 7x7。然而，在 Corel PhotoPaint 中，可以使用参数范围从 0.1 到 250.0 的高斯模糊。对于 250 的值，它使图像完全模糊并立即工作。我尝试应用我的 7x7 模糊 7 次，但这需要很长时间，并且图像与 Corel 的 4.0 高斯模糊一样模糊。

如何使我的高斯模糊像 Corel 的那样参数化并快速模糊图像？

[我正在使用来自 Rosetta 的一些优化的 C 代码](http://rosettacode.org/wiki/Image_convolution)和[来自 Wikipedia 的 7x7 矩阵](http://en.wikipedia.org/wiki/Gaussian_blur#Sample_Gaussian_matrix)

[我还使用此例程创建 51x51 内核](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/84322232-e16a-48cb-b3bc-a0300df15774/)，但结果与 Corel 的 Gauss = 15.0 相当，大约需要 30 秒（比 Corel 慢 30 倍）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:22:03.770

您一定知道 2D 高斯模糊是可分离的变换吗？

它可以实现为两个单独的一维变换。另外，[检查一下](https://stackoverflow.com/questions/4690756/separable-2d-blur-kernel)。

# c# - 使用 C# 确定当前打印作业的颜色

> ID：15454360
> 
> 赞同：0
> 
> 时间：2013-03-16T20:28:26.610
> 
> 标签：c#, printing, colors

在来 SO 寻求答案之前，我在 Google 上花了 2 或 3 天时间尝试不同的问题形式来尝试让它发挥作用。

我需要获取当前打印作业的颜色设置，以确定用户执行了多少彩色或灰度打印。但是，我尝试访问的每个颜色属性（通过 ManagementObjectSearcher、“”Watcher 和 C# 的内置打印机类）总是返回颜色，而不是灰度。

任何帮助将不胜感激，因为我已经停止在解决方案方面取得进展。谢谢。下面是我的代码（请记住，这是我的原型代码，所以除了我要问的问题之外，可能还有很多问题。请仅在您对我的问题的回答中提供建议）。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Printing;
using System.Management;
using System.Management.Instrumentation;
using System.Threading;
using System.Windows.Threading;

using System.Diagnostics;

namespace PrintPlus {
    public partial class PrintPlus : Form {

    #region Objects
    // Mgmt 
    ManagementEventWatcher watcher;
    ManagementObjectSearcher searcher;

    // Thread
    Thread jobCheck;

    // Printer Objects
    PrintQueue printQ;
    PrintJobInfoCollection printJobCollection;

    // Timer
    private System.Windows.Forms.Timer timeLogged;

    #endregion

    #region Paths And Names

    string localMachineName;

    #endregion

    #region Costs

    private decimal timeCost;
    private decimal printCost;

    #endregion

    #region Print Variables

    private int color;

    private bool jobIsProcessing;

    private int numberOfPrints;
    private int colorPrints;
    private int greyScalePrints;

    private int printJobCount;

    #endregion

    #region Time Variables

    private float tSecs;
    private float tMins;
    private float tHrs;

    #endregion

    #region Constructor

    public PrintPlus() {
        InitializeComponent();
        initObjects();

        /* searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PrintJob");

        watcher = new ManagementEventWatcher("SELECT * FROM  __InstanceCreationEvent WITHIN 0.01 WHERE TargetInstance ISA \"Win32_PrintJob\"");
        watcher.EventArrived += new EventArrivedEventHandler(getColorSetting);
        watcher.Start();

        localMachineName = Environment.MachineName;*/
    }

    #endregion

    #region Initializers

    private void initObjects() {
        initPrinterObjects();
        initTimer();
    }

    private void initPrinterObjects() {
        LocalPrintServer lps = new LocalPrintServer();
        printQ = new PrintQueue(lps, lps.DefaultPrintQueue.Name);
    }

    private void initTimer() {
        timeLogged = new System.Windows.Forms.Timer();
        timeLogged.Interval = 1000;
        timeLogged.Tick += new EventHandler(onTick);
        timeLogged.Start();
    }

    #endregion

    #region Delegates

    private void onTick(object sender, EventArgs e) {
        updateTime();
        updateInfo();
    }

    private void onMove(object sender, EventArgs e) {
        this.Location = initialPosition;
    }

    private void onLoseFocus(object sender, EventArgs e) {
        this.MinimizeBox = true;
    }

    #endregion

    #region Updates

    private void updateInfo() {
        printJobCount = printQ.GetPrintJobInfoCollection().Count<PrintSystemJobInfo>();

        if (printJobCount >= 1 && !jobIsProcessing) {
            jobIsProcessing = true;
            jobCheck = new Thread(new ThreadStart(processJobs));
            jobCheck.Start();
        }

        numberOfPrints = (colorPrints + greyScalePrints);

        timeCostLbl.Text = "Time: $" + timeCost.ToString();
        printCostLbl.Text = "Print: $" + printCost.ToString();
        totalCostLbl.Text = "Total: $" + (timeCost + printCost).ToString();
        printedPagesLbl.Text = "Printed Pages: " + numberOfPrints.ToString() + " Colour: " + colorPrints.ToString() + " B&W: " + greyScalePrints.ToString();
   }

    private void updateTime() {
        tSecs += timeLogged.Interval / 1000;

        if (tSecs == 60) {
            timeCost += FEES.COST_PER_MIN;
            tMins += 1;
            if (tMins == 60) {
                tHrs += 1;
            }
            tSecs = 0;
        }
        int i = 0;

        String hrs = ((tHrs >= 10) ? tHrs.ToString() : i + tHrs.ToString());
        String mins = ((tMins >= 10) ? tMins.ToString() : i + tMins.ToString());
        String secs = ((tSecs >= 10) ? tSecs.ToString() : i + tSecs.ToString());

        this.timeElapsedLbl.Text = "Time Logged: " + hrs + " : " + mins + " : " + secs;
    }

    public void processJobs() {
        LocalPrintServer lps = new LocalPrintServer();
        PrintQueue printQ = new PrintQueue(lps, lps.DefaultPrintQueue.Name);
        PrintJobInfoCollection printJobCollection = printQ.GetPrintJobInfoCollection();
        PrintSystemJobInfo[] jobArray = printJobCollection.ToArray<PrintSystemJobInfo>();

        ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PrintJob");
        ManagementObjectCollection searchCollection = searcher.Get();

        foreach (ManagementObject job in searchCollection) {
            foreach (PropertyData prop in job.Properties) {
                Debug.WriteLine(prop.Name + ": " + prop.Value);
            }
        }

        try {
            for (int i = 0; i < jobArray.Length; ++i) {
                if (jobArray[i].PositionInPrintQueue == 1) {
                    while (jobArray[i].JobStatus != PrintJobStatus.Deleted) {
                        jobArray[i].Refresh();
                    }
                }

                Debug.WriteLine(printQ.CurrentJobSettings.CurrentPrintTicket.OutputColor.Value);

                /*if (jobArray[i].PropertiesCollection. == "Color") {
                    colorPrints += jobArray[i].NumberOfPagesPrinted;
                }
                else if (jobArray[i].PropertiesCollection["Color"].ToString() == "Monochrome") {
                    greyScalePrints += jobArray[i].NumberOfPagesPrinted;
                }*/
            }
        }
        finally {
            jobIsProcessing = false;
            lps.Dispose();
            printQ.Dispose();
            printJobCollection.Dispose();
            jobCheck.Abort();
        }
    }

    private void getPrintWatcher(int jobID) {

    }

    private void getColorSetting(object sender, EventArrivedEventArgs e) {
       /* foreach (PropertyData data in e.NewEvent.Properties) {
            ManagementBaseObject mbo = data.Value as ManagementBaseObject;

            if (mbo.Properties["Color"].Value == "Color") {
                color = COLOR_VALUES.COLOR;
            }
            else if (mbo.Properties["Color"].Value == "Monochrome") {
                color = COLOR_VALUES.MONO;
            }
        }*/
    }

    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:00:41.220

我相信您遇到的问题是因为打印机能够打印彩色和黑白。当您通过彩色打印机打印黑色字母文本文档时，WIN32_PrintJob 仍然会说该文档是彩色文档，除非您通过本地机器的“打印机首选项”对话框明确告诉打印机以黑白方式打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T02:19:03.560

每个打印机制造商和型号的颜色计数器的工作方式不同。您最好的选择是在处理打印之前，检查打印材料并确定彩色页面和黑色页面。如果没有，您将不得不中继仅适用于多功能打印机的机器计数器，您可以通过 SNMP 获取此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T18:00:28.127

我花了很多时间权衡如何获得定义的彩色打印的真正价值，发现 Win32_PrintJob 以这种方式提供了这些信息：

```
public static bool PausePrintJob(string printerName, int printJobID)
{
    bool isActionPerformed = false;
    string searchQuery = "SELECT * FROM Win32_PrintJob";
    ManagementObjectSearcher searchPrintJobs = new ManagementObjectSearcher(searchQuery);
    ManagementObjectCollection prntJobCollection = searchPrintJobs.Get();

    foreach (ManagementObject prntJob in prntJobCollection)
    {
        System.String jobName = prntJob.Properties["Name"].Value.ToString();

        //Job name would be of the format [Printer name], [Job ID]
        char[] splitArr = new char[1];
        splitArr[0] = Convert.ToChar(",");
        string prnterName = jobName.Split(splitArr)[0];
        int prntJobID = Convert.ToInt32(jobName.Split(splitArr)[1]);
        string documentName = prntJob.Properties["Document"].Value.ToString();

        if (String.Compare(prnterName, printerName, true) == 0)
        {
            if (prntJobID == printJobID)
            {
                // MessageBox.Show("PAGINAS : " + prntJob.Properties["TotalPages"].Value.ToString() + documentName + " " + prntJobID);
                prntJob.InvokeMethod("Pause", null);
                MessageBox.Show(prntJob.Properties["Color"].Value.ToString());

                //prntJob.InvokeMethod("Resume", null);
                isActionPerformed = true;
                break;
            }
        }
    }
    return isActionPerformed;
} 
```

# python - Python 响应解码

> ID：15454361
> 
> 赞同：4
> 
> 时间：2013-03-16T20:28:28.037
> 
> 标签：python, utf-8, decode, urllib, html-encode

对于以下使用的行`urllib`：

```
# some request object exists
response = urllib.request.urlopen(request)
html = response.read().decode("utf8") 
```

返回什么格式的字符串`read()`？我一直试图从 Python 的文档中弄清楚这一点，但它根本没有提到它。为什么有一个`decode`？是否`decode`将对象解码**为**utf-8 或**从**utf-8？它从什么格式解码成什么格式？`decode`文档也没有提及这一点。是 Python 的文档那么糟糕，还是我不了解一些标准约定？

我想将该 HTML 存储在 UTF-8 文件中。我只是做一个常规的写，还是我需要“编码”回一些东西并写出来？

*注意：我知道 urllib 已被弃用，但我现在无法切换到 urllib2*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:36:16.350

问蟒蛇：

```
>>> r=urllib.urlopen("http://google.com")
>>> a=r.read()
>>> type(a)
0: <type 'str'>
>>> help(a.decode)
Help on built-in function decode:

decode(...)
    S.decode([encoding[,errors]]) -> object

    Decodes S using the codec registered for encoding. encoding defaults
    to the default encoding. errors may be given to set a different error
    handling scheme. Default is 'strict' meaning that encoding errors raise
    a UnicodeDecodeError. Other possible values are 'ignore' and 'replace'
    as well as any other name registered with codecs.register_error that is
    able to handle UnicodeDecodeErrors.

>>> b = a.decode('utf8')
>>> type(b)
1: <type 'unicode'>
>>> 
```

因此，似乎`read()`返回一个`str`. *从*`.decode()`UTF-8解码为 Python 的内部 unicode 格式。

# ms-access - id字段（主键）正在跳过已删除的行数，如何更改？

> ID：15454373
> 
> 赞同：2
> 
> 时间：2013-03-16T20:29:18.943
> 
> 标签：ms-access, ms-access-2007, primary-key

我正在使用 MS Access 并创建了一个简单的表。我有一列作为标准`ID`主键（重命名为`Number`）。我删除了一些行，但现在当我转到下一行时，该`Number`列从删除的数字开始计算。

例如，它看起来像：

```
Number Name
1       etc
2       etc
3       etc
6       etc
7       etc
8       etc 
```

其中第 4 行和第 5 行已被删除。

我删除了问题之后出现的所有行（即在这种情况下为 6、7、8），但它从 9 开始。有什么方法可以从 4 开始计数（因为我有 1、2、3 行剩下）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:33:34.653

这就是自动编号应该如此。如果您需要一个有意义的计数器，则不应使用自动编号。

Access 是一个关系数据库，如果您可以删除一行，然后添加一个具有相同编号的新行，那么您将打破关系。

如果您需要序列号，请参阅[Access VBA: Find max number in column and add 1](https://stackoverflow.com/questions/11949603/access-vba-find-max-number-in-column-and-add-1/11950647#11950647)

如果这是一次性问题，您可以从表中删除当前自动编号字段并保存，然后再次添加自动编号，但最好忘记顺序自动编号。永远不应向用户显示自动编号。它永远不能被认为是独一无二的，如果你搞得够多，那就更不用说了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T22:43:35.347

真正的问题是 Access 非常愚蠢。例如，如果创建了一个新表并且第一次输入数据但行不完整，当您返回表并重新输入数据时，数字仍然会跳过。即使它是一个空白数据库，这样做也不会有关系中的冲突/错误。作为讲师，这尤其令人沮丧，因为 Access 的其他一些行为很可能会发生这种情况。

# c# - 带有点符号、orderBy 和 firstOrDefault 的开源 C++ LINQ 库？

> ID：15454376
> 
> 赞同：7
> 
> 时间：2013-03-16T20:29:33.623
> 
> 标签：c#, c++, visual-studio-2010, linq

我使用 C# LINQ dot sintax 搜索 VS2010 兼容的 C++ linq 库。意思是：`from(...).where(...).orderBy.firstOrDefault();`

我用谷歌搜索并找到了这个[，所以回答 LINQ 库集合/混乱](https://stackoverflow.com/questions/232222/is-there-a-linq-library-for-c)：

*   [Rx Extensions cpplinq](https://rx.codeplex.com/SourceControl/changeset/view/332fa75ecdb1#Ix/CPP/src/cpplinq/linq_where.hpp)没有`orderBy`
*   [Boolinq](https://code.google.com/p/boolinq/source/browse/)有[奇怪的 orderBy 行为](https://stackoverflow.com/questions/15422449/what-is-wrong-with-my-boolinq-orderby)并且没有第一个开箱即用
*   [我测试的cppex (cppextensions)](https://bitbucket.org/ronag/cppextras/src/master/linq/linq.hpp)代码（类似于[this](https://stackoverflow.com/questions/15422449/what-is-wrong-with-my-boolinq-orderby)）崩溃了 vs2010 编译器（C1001）
*   [linqxx](https://github.com/hjiang/linqxx)没有`orderBy`

我发现其他人没有使用点表示法.. btw [pfultz2/Linq](https://github.com/pfultz2/Linq)似乎提供了 orderBy 并且首先它的 SQL 像 LINQ sintax 和[限制](https://github.com/pfultz2/Linq#limitations)使它成为我不想要的东西=(

那么是否有任何带有点表示法、orderBy 和 firstOrDefault 的开源 C++ LINQ 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T05:53:38.727

好吧，我不会给你你想要的答复，但无论如何都会是答复:-)

LINQ 主要用于 C#。我认为您的用例应该是将 C# 代码翻译成 C++，但我认为 C++ 中的有效方法是使用[Boost.Range](http://www.boost.org/doc/libs/1_55_0/libs/range/doc/html/range/reference/adaptors/reference.html)。

Boost.Range 以一种易于查询数据的方式重用 c++ 标准库：

1.  您可以将适配器用于具有从左到右表示法的容器，使用`operator |`. 就像在 LINQ 中一样，它们是惰性求值的。
2.  您可以执行诸如`std::min, std::max, std::all_of, std::any_of, std::none_of`在适应范围内的操作。

我前几天写的一个例子是如何反转字符串中的单词。解决方案是这样的：

```
using string_range = boost::iterator_range<std::string::const_iterator>;

struct submatch_to_string_range {
    using result_type = string_range;

    template <class T>
    string_range operator()(T const & s) const {
        return string_range(s.first, s.second);

    }
};

string sentence = "This is a sentence";

auto words_query = sentence |
                ba::tokenized(R"((\w+))") |
                ba::transformed(submatch_to_string_range{}) |
                ba::reversed;         

vector<string_range> words(words_query.begin(), words_query.end());

for (auto const & w : words) 
cout << words << endl; 
```

我强烈建议您基于此库进行查询，因为这将在很长一段时间内得到支持，而且我认为这将是未来。您可以执行相同样式的查询。

如果这个库可以扩展，避免直接命名向量和复制，那就太好`| max`了`| to_vector`，但我认为作为一种查询语言，现在，它是完全可以接受的。

# android - 组合多个 Sqlite 查询

> ID：15454377
> 
> 赞同：0
> 
> 时间：2013-03-16T20:29:34.340
> 
> 标签：android, sqlite

我正在努力在我的 android 项目中结合一些 sqlite 查询。

我通过这个调用获得了我的 ItemTable 的所有元素

```
String sql = "SELECT n.*, p.ParentID "
           + "FROM NameTable n, "
           + "     ItemTable p "
           + "WHERE p.itemID = n.OwnerID "
           + "COLLATE NOCASE"; 
```

然后通过以下两个查询之一获取他们的每个父母：

```
if (aItem.parentID > 0) {
    sql = "SELECT n.*, p.ParentID, f.FamilyID "
        + "FROM NameTable n, "
        + "     FamilyTable f, "
        + "     ItemTable p "
        + "WHERE f.FamilyID = '" + aItem.parentID + "' "
        + "  AND p.ItemID = n.OwnerID "
        + "  AND (p.ItemID = f.MotherID OR p.itemID = f.FatherID) "
        + "  AND n.IsPrimary = 1 ";
} else {
    sql = "SELECT n.*, p.ItemID, f.FamilyID "
        + "FROM NameTable n, "
        + "     FamilyTable f, "
        + "     ChildTable c, "
        + "     ItemTable p "
        + "WHERE c.ChildID = '" + aItem.ItemID + "' "
        + "  AND p.ItemID = n.OwnerID "
        + "  AND c.FamilyID = f.FamilyID "
        + "  AND (p.ItemID = f.MotherID OR p.ItemID = f.FatherID) "
        + "  AND n.IsPrimary = 1 ";
} 
```

有什么办法可以将这三个查询和逻辑合二为一吗？我想组合调用会更快，但我不确定如何组合它们，也不确定如果我确实组合它们如何读取行。我真的可以使用一些建议和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:18:49.763

如果您不介意将两个查询的结果放在一个结果集中，您可以通过在查询之间添加“UNION”以及将“AS”添加到列名并添加一个新列来将这两个查询合并在一起区分每个查询的结果

```
sql = "SELECT n.*, p.ParentID AS ID1, f.FamilyID, 1 AS RESULT_GROUP "
    + "FROM NameTable n, "
    + "     FamilyTable f, "
    + "     ItemTable p "
    + "WHERE f.FamilyID = '" + aItem.parentID + "' "
    + "  AND p.ItemID = n.OwnerID "
    + "  AND (p.ItemID = f.MotherID OR p.itemID = f.FatherID) "
    + "  AND n.IsPrimary = 1 ";
sql += " UNION "
sql += "SELECT n.*, p.ItemID AS ID1, f.FamilyID AS ID2, 2 AS RESULT_GROUP "
    + "FROM NameTable n, "
    + "     FamilyTable f, "
    + "     ChildTable c, "
    + "     ItemTable p "
    + "WHERE c.ChildID = '" + aItem.ItemID + "' "
    + "  AND p.ItemID = n.OwnerID "
    + "  AND c.FamilyID = f.FamilyID "
    + "  AND (p.ItemID = f.MotherID OR p.ItemID = f.FatherID) "
    + "  AND n.IsPrimary = 1 "; 
```

同样在您的加入中，我会做类似的事情（提高性能）：

```
sql = "SELECT n.*, p.ParentID AS ID1, f.FamilyID, 1 AS RESULT_GROUP "
    + "FROM NameTable n "
    + "JOIN FamilyTable f ON f.FamilyID = '" + aItem.parentID + "' "
    + "JOIN ItemTable p ON p.ItemID = n.OwnerID"
    + "WHERE 
    + "  (p.ItemID = f.MotherID OR p.itemID = f.FatherID) "
    + "  AND n.IsPrimary = 1 "; 
```

# javascript - Select2：初始化后如何设置数据？

> ID：15454383
> 
> 赞同：36
> 
> 时间：2013-03-16T20:30:28.810
> 
> 标签：javascript, jquery, jquery-select2

我需要在初始化 select2 后设置一个数据数组。所以我想做这样的事情：

```
var select = $('#select').select2({});
select.data([
  {id: 1, text: 'value1'},
  {id: 1, text: 'value1'}
]); 
```

但我收到以下错误：

> 附加到元素时，Select2 不允许使用选项“数据”。

我的 HTML：

```
<select id="select" class="chzn-select"></select> 
```

我应该使用什么来代替选择元素？

我需要设置搜索项目的来源

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-17T06:35:43.760

在加载中：

```
$.each(data, function(index, value) {
  $('#selectId').append(
    '<option value="' + data[index].id + '">' + data[index].value1 + '</option>'
  );
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-25T21:19:18.947

创建一个`<input type="hidden">`元素并将 select2 绑定到该元素。在常规选择框上使用 .select2 不会让您使用数据，它只是主要为您提供 UI 和后选择方法。

资料来源： [Select2 文档](http://ivaynberg.github.io/select2/#data)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-29T10:48:40.117

来源：[https ://select2.org/programmatic-control/add-select-clear-items](https://select2.org/programmatic-control/add-select-clear-items)

添加项目：

```
var data = {
    id: 1,
    text: 'Barn owl'
};

var newOption = new Option(data.text, data.id, false, false);
$('#mySelect2').append(newOption).trigger('change'); 
```

清除项目：

```
$('#mySelect2').val(null).trigger('change'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-23T15:41:10.587

对于 v4，您必须使用更新的数据销毁和重建 select2。检查[https://github.com/select2/select2/issues/2830](https://github.com/select2/select2/issues/2830)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-22T10:37:27.847

我最近遇到了这样一种情况，即更改一个 select2 对象会改变第二个对象的内容（有效地进行父子分组）。我使用 ajax 调用来检索一组新的 Json 数据，然后由第二个 select2 对象获取。我已包含以下代码：

```
 $("#group").on('change', function () {
        var uri = "/Url/RetrieveNewResults";
        $.ajax({
            url: uri,
            data: {
                format: 'json',
                Id: $("#group :selected").val()
            },
            type: "POST",
            success: function (data) {
                $("#groupchild").html('');
                $("#groupchild").select2({
                    data: data,
                    theme: 'bootstrap',
                    placeholder: "Select a Type"
                });
            },
            error: function () {
                console.log("Error")
            }
        });
    }); 
```

我发现我必须包含 $("#groupchild").html('') 才能清除第二个 select2 中的前一组数据。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-17T06:40:12.580

您可以重新渲染并触发 select2

渲染选择2

```
$('.select2').select2({
  placeholder: 'Slect value',
  allowClear: true
}); 
```

需要更改数据后`data`

```
let dataChange = [
  {
    id: 0,
    text: 'enhancement'
  },
  {
    id: 1,
    text: 'bug'
  },
  {
    id: 2,
    text: 'duplicate'
  },
  {
    id: 3,
    text: 'invalid'
  },
  {
    id: 4,
    text: 'wontfix'
  }
]; 
```

重新渲染 select2

```
$('.select2').select2('destroy');
$('.select2').empty();
$('.select2').select2({
  placeholder: 'Slect value',
  allowClear: true,
  data: dataChange
}); 
```

触发选择2

```
$('.select2').trigger('change'); 
```

希望这是你的答案：3

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-06T05:44:38.600

这就是我所做的。

## 1.扩展select2

```
 Select2.prototype.setAjax = function (ajaxOptions)
                {
                    // Set the new ajax properties
                    var oAjaxOpts = this.options.get('ajax');
                    if (oAjaxOpts != undefined && oAjaxOpts != null)
                    {
                        for (var sKey in ajaxOptions)
                        {
                            oAjaxOpts[sKey] = ajaxOptions[sKey];
                        }
                    }
                    var DataAdapter = this.options.get('dataAdapter');
                    this.dataAdapter = new DataAdapter(this.$element, this.options);
                } 
```

## 2\. 像往常一样初始化（例如——你的可能不同）

```
jHtmlFrag.select2({
            dropdownParent: $(oData.jDiv),
            placeholder: "Select Option",
            allowClear: true,
            minimumInputLength: 2,
            ajax: {
                url: "",
                method: "POST",
                dataType: 'json',
                delay: 250,
                processResults: function (oResults, params)
                {
                    let page = params.page || 1;
                    // console.log(oResults, (params.page * 10));
                    return {
                        results: oResults.data,
                        pagination: {
                            more: (page * 10) < oResults.recordsFiltered
                        }
                    };
                }
            }
        }).val(null).trigger('change'); 
```

## 3\. 通过调用新的扩展函数来动态设置 Ajax 选项

```
jCombo.select2('setAjax', {
            url: sUrl,
            data: function (params)
            {
                let query = {
                    search: params.term,
                    type: params._type,
                    page: params.page || 1,
                }
                return query;
            },
        }); 
```

# android - Android 类 R 上的错误

> ID：15454389
> 
> 赞同：0
> 
> 时间：2013-03-16T20:31:05.137
> 
> 标签：android

我不知道为什么，但是我创建了新的 Android 项目，这在 R 类上出现错误。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

在`setContentView(R.layout.activity_main)`Eclipse 上显示一个错误

> R 无法解析为变量

因此，我尝试使用`import android.R;`但出现其他错误：

> activity_main 无法解析或不是字段

为什么会发生？我该如何解决这个问题？为什么新的 Eclipse 项目已经出现错误？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:35:54.387

不要导入 android.R。您需要从 gen 文件夹中导入您自己的 R 文件。如果您的 R 文件没有为您自动生成，请检查布局 XML 文件中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:36:17.783

谢谢大家，我删除了我的 Eclipse，现在我使用特定的 Eclise for Android，在[http://developer.android.com/sdk/index.html下载](http://developer.android.com/sdk/index.html)

这个Eclipse非常好，我的问题解决了。

谢谢大家！

# python - 运行烧瓶 + Gunicorn + SocketIO

> ID：15454390
> 
> 赞同：2
> 
> 时间：2013-03-16T20:31:20.817
> 
> 标签：python, flask, gunicorn, gevent-socketio

我正在为我的烧瓶应用程序运行 SocketIOServer，并且我有一个如下所示的 run.py 脚本：

```
import sys
from idateproto import create_app, run_app

if __name__ == "__main__":
    if len(sys.argv) > 1:
        create_app(sys.argv[1])
    else:
        create_app('dev')
    run_app() 
```

run_app 看起来像这样：

```
def run_app():
    # Run the application
    # See flask/app.py run() for the implementation of run().
    # See http://werkzeug.pocoo.org/docs/serving/ for the parameters of Werkzeug's run_simple()
    # If the debug parameter is not set, Flask does not change app.debug, which is set from
    # the DEBUG app config variable, which we've set in create_app().
    #app.run(**app_run_args)
    global app
    global middleware
    SocketIOServer((app.config['HOST'], app.conf`enter code here`ig['PORT']), middleware,namespace="socket.io", policy_server=False).serve_forever() 
```

我像这样运行：python run.py production/dev/test 等。

现在我想使用 gunicorn 在生产中运行它，所有在线教程都建议执行以下操作： gunicorn run:app -c gunicorn-config.py 我的问题是我不想再只运行我的应用程序了。我想告诉 gunicorn 在 SocketIOServer 上运行 serve_forever 方法，我在网上做了很多研究，找不到实现这一点的方法。请帮忙。

# silverlight - Silverlight ZOrder 在 Bing 控制中不适合我

> ID：15454393
> 
> 赞同：0
> 
> 时间：2013-03-16T20:31:37.453
> 
> 标签：silverlight, xaml, bing-maps, z-order

我正在尝试使我的弹出窗口小部件位于地图的顶部，但设置 Canvas.ZOrder 并没有帮助。

这是 XAML：

```
<m:Map x:Name="MainMap"
            Margin="0,6,3,3"
            ZoomLevel="{Binding MapZoomLevel, Mode=TwoWay}"
            Center="{Binding MapCenter, Mode=TwoWay}"
            CopyrightVisibility="Collapsed"
            CredentialsProvider="{Binding BingCredentialsProvider}"
            UseInertia="True" 
            Mode="Road" Grid.Column="2" Grid.Row="1">
            <m:MapItemsControl ItemsSource="{Binding Source={StaticResource WorkLayerData}}">
                <m:MapItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Canvas
                            m:MapLayer.Position="{Binding Location}">
                            <Button                                
                                Width="{Binding PushpinWidth}" Height="{Binding PushpinWidth}"
                                Margin="{Binding PushpinMargin}"
                                Style="{StaticResource LooklessButtonStyle}"
                                Command="{Binding DataContext.SelectedPushpinChangedCommand, ElementName=LayoutRoot}"
                                CommandParameter="{Binding}"
                                Cursor="Hand">
                                <Ellipse
                                    Width="{Binding PushpinWidth}" Height="{Binding PushpinWidth}" Stroke="Black" Fill="{Binding IsGPSDataRecent, Converter={StaticResource BoolToGreenRedBrushConverter}}" StrokeThickness="1">
                                    <ToolTipService.ToolTip>
                                        <TextBlock Text="{Binding DeviceId}" />
                                    </ToolTipService.ToolTip>
                                </Ellipse>
                            </Button>

                            <!-- Show black dot over actual GPS point -->
                            <Ellipse
                                Width="10" Height="10" Stroke="Black" Fill="Black" StrokeThickness="1"
                                Margin="-5,-5,0,0"
                                Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}" />

                            <Border
                                Width="200"
                                BorderThickness="1" BorderBrush="DarkGray"
                                Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="5"  Color="#FF000000" Opacity="0.5" ShadowDepth="2" />
                                </Border.Effect>
                                <ContentControl Template="{StaticResource TrackedAssetControlTemplate}" />
                            </Border>
                        </Canvas>                                               
                    </DataTemplate>
                </m:MapItemsControl.ItemTemplate>
            </m:MapItemsControl>
        </m:Map> 
```

我试图在边界上设置 ZIndex 但没有运气。这是 IsSelected = true 时的外观（请参阅顶部 ZIndex 较高的其他点）

![在此处输入图像描述](../Images/4d48250c64b7c70f40bdccfb47086adf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:43:10.607

为了将 MapItemsControl 中的项目置于前面，需要设置项目容器的 ZIndex。您可以通过从 MapItemsControl 的[ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainergenerator%28v=vs.95%29.aspx)检索项目容器在代码中执行此操作。

如果您不希望这样，您可以将附加的帮助器属性应用到地图项的 DataTemplate 中的顶级容器（Canvas）。由于此 Canvas 是项目容器的直接子级，因此 helper 属性必须设置 Canvas 的可视父级的 ZIndex。如果这听起来很奇怪，这里是附加属性的代码，在一个名为 MapItem 的帮助器类中：

```
public class MapItem
{
    public static readonly DependencyProperty ZIndexProperty =
        DependencyProperty.RegisterAttached("ZIndex", typeof(int),
            typeof(MapItem), new PropertyMetadata(ZIndexChanged));

    public static int GetZIndex(DependencyObject obj)
    {
        return (int)obj.GetValue(ZIndexProperty);
    }

    public static void SetZIndex(DependencyObject obj, int value)
    {
        obj.SetValue(ZIndexProperty, value);
    }

    private static void ZIndexChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        // set ZIndex on parent of obj
        Canvas.SetZIndex((UIElement)VisualTreeHelper.GetParent(obj), (int)e.NewValue);
    }
} 
```

在您的 DataTemplate 中，您现在可以将 helper 属性绑定到您的 VM 属性之一，或许可以使用适当的绑定转换器：

```
<DataTemplate x:Key="MapItemDataTemplate">
    <!-- setting the helper property MapItem.ZIndex on Canvas
         sets the Canvas.ZIndex property on the item container -->
    <Canvas local:MapItem.ZIndex="{Binding ...}">
        ...
    </Canvas>
</DataTemplate> 
```

# visual-c++ - 为什么 C++ CLI 没有托管类型的默认参数？

> ID：15454394
> 
> 赞同：23
> 
> 时间：2013-03-16T20:31:42.953
> 
> 标签：visual-c++, c++-cli, default-parameters

以下行有错误`Default argument is not allowed`。

```
public ref class SPlayerObj{
private:

    void k(int s = 0){ //ERROR
    }
} 
```

为什么 C++ 没有托管类型的默认参数？
我想知道是否有办法解决这个问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T23:03:10.343

它确实有可选参数，只是它们看起来与 C++ 语法不同。可选参数是语言互操作问题。它必须由进行调用的语言实现，它生成实际使用默认参数的代码。对于旨在简化互操作的语言（如 C++/CLI）来说，这是一个棘手的问题，您当然不知道要使用哪种语言进行调用。或者，如果它甚至具有可选参数的语法。例如，C# 语言直到版本 4 才出现。

如果该语言确实支持它，那么该编译器如何知道默认值是什么。值得注意的是，VB.NET 和 C# v4 选择了不同的策略，VB.NET 使用属性，C# 使用 modopt。

您可以在 C++/CLI 中使用 [DefaultParameterValue] 属性。但你不应该，[结果](https://stackoverflow.com/a/4974528/17034)是不可预测的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-07T10:38:59.960

除了[Hans Passant 的准确答案](https://stackoverflow.com/a/15455759/1548472)，第二部分关于如何解决这个问题的答案之外，您还可以使用多个具有相同名称的方法来模拟默认参数情况。

```
public ref class SPlayerObj {
  private:
    void k(int s){ // Do something useful...
    }
    void k() { // Call the other with a default value 
       k(0);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-30T19:49:15.333

另一种解决方案是使用`[OptionalAttribute]`附带的`Nullable<int>`类型化参数。如果调用者没有指定参数，它将是一个`nullptr`.

```
void k([OptionalAttribute]Nullable<int>^ s)
{
    if(s == nullptr)
    {
        // s was not provided
    }
    else if(s->HasValue)
    {
        // s was provided and has a value
        int theValue = s->Value;
    }
}
// call with no parameter
k();
// call with a parameter value
k(100); 
```

# html - 在电子邮件模板中复制 html 代码而不会弄乱格式

> ID：15454400
> 
> 赞同：0
> 
> 时间：2013-03-16T20:32:03.637
> 
> 标签：html, email

我正在做我的第一个电子邮件模板，我有一个问题。在电子邮件模板的正文中，有一个带有图像和描述（交易）的部分。我希望能够复制此代码以进行尽可能多的交易，而不会弄乱框架设计。当我在 Photoshop 中进行设计时，我做了 2 笔交易。但是当我复制并粘贴相同的代码来制作第三个代码时，我会破坏设计。我知道这与我使用的框架的高度有关，但我无法解决这个问题。Photoshop 使用带有附加代码的 spacer.gif 生成了一些空格（在 html 代码的末尾）。如果我删除该设计将分崩离析。我能做些什么？

谢谢，

胡安。

这是html代码的示例：

```
<html>
<head>
<title>email</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="680" height="900" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td width="13" height="900" rowspan="11" bgcolor="#3b64aa">&nbsp;</td>
        <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>
        <td width="13" height="900" rowspan="11" bgcolor="#3b64aa">&nbsp;</td>

    </tr>
    <tr>
      <td width="212" height="89" colspan="2" bgcolor="#32322b">
          <img src="images/logo.png" width="212" height="89" alt="" /></td>
        <td width="370" height="89" bgcolor="#32322b" style="font-family:Arial, Helvetica, sans-serif; font-size:14pt; color:#FFFFFF; vertical-align:middle; font-weight: bold; text-align: center;" >Deals</td>
        <td width="72" height="89" colspan="2" bgcolor="#32322b">
      <img src="images/cupon.png" width="72" height="89" alt="" /></td>

    </tr>
    <tr>
        <td width="12" height="590" rowspan="5">&nbsp;</td>
        <td width="630" height="17" colspan="3">&nbsp;</td>
        <td width="12" height="590" rowspan="5">&nbsp;</td>

    </tr>
    <tr>
        <td width="630" height="130" colspan="3">
        <img src="images/Template-Email-kuponkis_10.jpg" width="630" height="130" alt="" /></td>

    </tr>
    <tr>
        <td width="630" height="155" colspan="3" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:left; vertical-align:top;" ><p><strong>Nombre de la promoción</strong></p>
        <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.</p>
        <p>Oferta valida desde <strong style="color:#1f52aa">Mar 1 de 2013</strong> hasta <strong style="color:#1f52aa">Junio 10 de 2013</strong></p>
        <p> <del>$1.000.000</del><strong style="color:#1f52aa; font-size:18px"> $800.000</strong></p></td>

    </tr>
    <tr>
        <td width="630" height="130" colspan="3">
        <img src="images/Template-Email-kuponkis_12.jpg" width="630" height="130" alt="" /></td>

    </tr>
    <tr>
            <td width="630" height="155" colspan="3" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:left; vertical-align:top;" ><p><strong>Nombre de la promoción</strong></p>
        <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.</p>
        <p>Oferta valida desde <strong style="color:#1f52aa">Mar 1 de 2013</strong> hasta <strong style="color:#1f52aa">Junio 10 de 2013</strong></p>
        <p> <del>$1.000.000</del><strong style="color:#1f52aa; font-size:18px"> $800.000</strong></p></td>

    </tr>
    <tr>
        <td width="654" height="15" colspan="5" bgcolor="#3b64aa"></td>

    </tr>
    <tr>
        <td width="654" height="44" colspan="5" bgcolor="#9ba9ce" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:center; vertical-align:middle;">¿Tiene dudas? Preguntas Frecuentes</td>

    </tr>
    <tr>
        <td width="654" height="144" colspan="5" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; text-align: justify; vertical-align:top;"><p>&nbsp;</p>
        <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun. nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun.nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun</p></td>

    </tr>
    <tr>
        <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>

    </tr>
    <tr>
        <td width="13" height="1"></td>
        <td width="12" height="1"></td>
        <td width="200" height="1"></td>
        <td width="370" height="1"></td>
        <td width="60" height="1"></td>
        <td width="12" height="1"></td>
        <td width="13" height="1"></td>
        <td width="1" height="1"></td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:56:36.740

您实际上遇到的问题来自您正在使用的行跨度属性。

```
<tr>
    <td width="13" height="900" rowspan="11" bgcolor="#3b64aa">&nbsp;</td>
    <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>
    <td width="13" height="900" rowspan="11" bgcolor="#3b64aa">&nbsp;</td>

</tr> 
```

和

```
<tr>
    <td width="12" height="590" rowspan="5">&nbsp;</td>
    <td width="630" height="17" colspan="3">&nbsp;</td>
    <td width="12" height="590" rowspan="5">&nbsp;</td>

</tr> 
```

两者都在电子邮件中间的任一侧创建空间，一列蓝色和一列白色，分别为 11 行和 5 行。

您列出的每个交易都是表格的两行，因此当您插入新交易时，您会在表格中再添加两行。您希望这两行在它们周围具有相同的颜色和间距，因此您需要告诉颜色间距行进一步扩展。

```
<tr>
    <td width="13" height="900" rowspan="13" bgcolor="#3b64aa">&nbsp;</td>
    <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>
    <td width="13" height="900" rowspan="13" bgcolor="#3b64aa">&nbsp;</td>

</tr> 
```

和

```
<tr>
    <td width="12" height="590" rowspan="7">&nbsp;</td>
    <td width="630" height="17" colspan="3">&nbsp;</td>
    <td width="12" height="590" rowspan="7">&nbsp;</td>

</tr> 
```

对于您添加或删除的每个交易，将 rowspan 属性的值增加或减少 2。

如果您愿意，您可以避免每次都更改行跨度，方法是将交易放在他们自己的表中，在较大表的单行中。像这样：

```
<html>
<head>
<title>email</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="680" border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td width="13" height="900" rowspan="8" bgcolor="#3b64aa">&nbsp;</td>
        <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>
        <td width="13" height="900" rowspan="8" bgcolor="#3b64aa">&nbsp;</td>

    </tr>
    <tr>
      <td width="212" height="89" colspan="2" bgcolor="#32322b">
          <img src="images/logo.png" width="212" height="89" alt="" /></td>
        <td width="370" height="89" bgcolor="#32322b" style="font-family:Arial, Helvetica, sans-serif; font-size:14pt; color:#FFFFFF; vertical-align:middle; font-weight: bold; text-align: center;" >Deals</td>
        <td width="72" height="89" colspan="2" bgcolor="#32322b">
      <img src="images/cupon.png" width="72" height="89" alt="" /></td>

    </tr>
    <tr>
        <td width="12" height="590" rowspan="2">&nbsp;</td>
        <td width="630" height="17" colspan="3">&nbsp;</td>
        <td width="12" height="590" rowspan="2">&nbsp;</td>

    </tr>

    <tr> 
    <td colspan="3">
    <table border="0" align="center" cellpadding="0" cellspacing="0">

        <tr>
             <td width="630" height="130" colspan="3">
            <img src ="images/Template-Email-kuponkis_10.jpg" width="630" height="130" alt="" /></td>

        </tr>
        <tr>
            <td width="630" height="155" colspan="3" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:left; vertical-align:top;" ><p><strong>Nombre de la promoción</strong></p>
            <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.</p>
            <p>Oferta valida desde <strong style="color:#1f52aa">Mar 1 de 2013</strong> hasta <strong style="color:#1f52aa">Junio 10 de 2013</strong></p>
            <p> <del>$1.000.000</del><strong style="color:#1f52aa; font-size:18px"> $800.000</strong></p></td>

        </tr>
        <tr>
            <td width="630" height="130" colspan="3">
            <img src="images/Template-Email-kuponkis_12.jpg" width="630" height="130" alt="" /></td>

        </tr>
        <tr>
            <td width="630" height="155" colspan="3" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:left; vertical-align:top;" ><p><strong>Nombre de la promoción</strong></p>
            <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.</p>
            <p>Oferta valida desde <strong style="color:#1f52aa">Mar 1 de 2013</strong> hasta <strong style="color:#1f52aa">Junio 10 de 2013</strong></p>
            <p> <del>$1.000.000</del><strong style="color:#1f52aa; font-size:18px"> $800.000</strong></p></td>

        </tr>

    </table>
    </td>
    </tr>

    <tr>
        <td width="654" height="15" colspan="5" bgcolor="#3b64aa"></td>

    </tr>
    <tr>
        <td width="654" height="44" colspan="5" bgcolor="#9ba9ce" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; text-align:center; vertical-align:middle;">¿Tiene dudas? Preguntas Frecuentes</td>

    </tr>
    <tr>
        <td width="654" height="144" colspan="5" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; text-align: justify; vertical-align:top;"><p>&nbsp;</p>
        <p>nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nunc.nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun. nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun.nteger vestibulum dapibus fermentum. Ut vulputate sem a arcu posuere in mollis sem commodo. Donec nunc nunc, pretium ac accumsan eu, vehicula in urna. Nam orci lectus, pellentesque ut laoreet vel, interdum ac nun</p></td>

    </tr>
    <tr>
        <td width="654" height="9" colspan="5" bgcolor="#3b64aa"></td>

    </tr>
    <tr>
        <td width="13" height="1"></td>
        <td width="12" height="1"></td>
        <td width="200" height="1"></td>
        <td width="370" height="1"></td>
        <td width="60" height="1"></td>
        <td width="12" height="1"></td>
        <td width="13" height="1"></td>
        <td width="1" height="1"></td>
    </tr>
</table>
</body>
</html> 
```

这样，您可以在不更改行跨度的情况下随意复制交易，因为就封闭表而言，它们都只有一行高。

# c++ - 从堆栈中删除一个对象？

> ID：15454403
> 
> 赞同：3
> 
> 时间：2013-03-16T20:32:24.847
> 
> 标签：c++, object, stack

只是想知道，由于我正在与 C++ 项目的合作伙伴合作，是否可以显式删除已在堆栈上初始化的对象？（所以没有指针）

例如：

```
MinHeap h(data); // on stack 
```

VS

```
MinHeap *h = new MinHeap(); 
```

这从来没有出现过，因为我总是在堆上为一个大对象分配内存。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T20:34:55.300

堆栈变量在其当前范围内始终有效。您可以通过在您希望实例有效的块周围使用大括号来强制范围（并因此释放分配的内存）：

```
{
  MinHeap h(data);
  // Do stuff here

} // h gets freed here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T20:35:11.453

简短而唯一的答案是否定的。

如果在堆栈上分配了一个对象，那么实际上分配它的不是您，而是为您分配的编译器。当函数范围结束时，编译器也有责任“取消分配”（或“删除”）对象。

使用的唯一原因`delete`是释放分配给`new`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T20:38:12.823

> 是否可以显式删除已在堆栈上初始化的对象？

**不**，这是不可能的。

根据 C++11 Standard 关于`delete`表达式的第 5.3.5/2 段：

> 如果操作数具有类类型，则通过调用上述转换函数将操作数转换为指针类型，并在本节的其余部分使用转换后的操作数代替原始操作数。**在第一种选择（删除对象）中，delete 的操作数的值可以是空指针值，指向由先前的 new 表达式创建的非数组对象的指针，或指向表示 a 的子对象 (1.8) 的指针这种对象的基类（第 10 条）。如果不是，则行为未定义**。[...]

同样相关的是第 3.7.3/3 段关于具有自动存储持续时间的变量（即“在堆栈上”分配）：

> 如果具有自动存储持续时间的变量具有初始化或具有副作用的析构函数，**则不应在其块结束之前将其销毁**，即使看起来未使用也不应作为优化消除，除非是类对象或其复制/移动可以按照 12.8 中的规定消除。

# php - 我的 php 代码有什么问题？

> ID：15454404
> 
> 赞同：0
> 
> 时间：2013-03-16T20:32:25.737
> 
> 标签：php

我想将用于创建三角形的 Javascript 代码转换为 PHP 代码，Javascript 代码有效，但 PHP 代码无效。这就是我的 PHP 代码中的内容，我尝试运行它，但最终出现致命错误和未定义的变量。我懂javascript但不懂php...

```
<?php 
    {
        $size = $_POST['size'];
        $firstChoice = $_POST['firstChoice'];
        $secondChoice = $_POST['secondChoice'];

         echo "<textarea>";
            $allLines = '';
                for ( $i = 1; $i <= $size; $i++ ) 
                    {
                    $oneLine = createLine ( $i, $i % 2 ? $FirstChoice : $secondChoice );
                    $allLines += $oneLine + "\n";
                    }
            echo "$allLines";

             function createLine ($size, $symbol) {
             $aLine = '';
                for ( $j = 1; $j <= $size; $j++ )
                {
                    echo $aLine += $symbol;
                }
                echo "$aLine";
            echo "</textarea>";         
    }
?> 
```

它应该看起来像这样if`size = 5`和`firstChoice = #``secondChoice = &`

```
#
&&
###
&&&&
##### 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:34:01.710

是什么`$createLine`？看起来好像您正在尝试将它用作函数，但它没有在任何地方定义。

**编辑**：

你需要在php中声明函数

```
function createLine($size, $symbol) {
  // code
} 
```

当你调用它时，只需按名称调用它，不要添加`$`.

```
$line = createLine($a, $b); 
```

请参阅有关 php[用户定义函数的](http://www.php.net/manual/en/functions.user-defined.php)文档。

**工作**：

存在一些问题，包括：字符串连接应该使用`.`运算符 not `+`，输入错误`$FirstChoice`，并且需要在使用之前定义函数。

```
<?php
  $size = $_POST['size'];
  $firstChoice = $_POST['firstChoice'];
  $secondChoice = $_POST['secondChoice'];

  function createLine($size, $symbol) {
    $aLine = '';
    for ($j = 1; $j <= $size; $j++) {
      $aLine .= $symbol;
    }
    return $aLine;
  }

  echo "<textarea>";
  $allLines = '';
  for ($i = 1; $i <= $size; $i++) {
    $oneLine = createLine($i, $i % 2 ? $firstChoice : $secondChoice);
    $allLines .= $oneLine . "\n";
  }
  echo "$allLines";
  echo "</textarea>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:47:14.967

使用`createLine(...)`而不是`$createLine(...)` 我想你有像下面这样的javascript函数

```
<script>
function createLine (...)
{
...
}
</script> 
```

# assembly - 在 ASM 中获取数组的最大值

> ID：15454405
> 
> 赞同：1
> 
> 时间：2013-03-16T20:32:29.817
> 
> 标签：assembly, pic

我试图在 asm 中获取数组的最大值，但`CPFSGT`命令存在问题：它无法定义，我不知道为什么。我正在使用 PIC16F877。

```
 CBLOCK
    MYARRAY : 0
             ARG00 EQU D'8' , ARG01 EQU D'9', ARG02 EQU D'2', ARG03 EQU D'1',
             ARG04 EQU D'7', ARG05 EQU D'5', ARG06 EQU D'4', ARG07 EQU D'6'
             ARG08 EQU D'0', ARG09 EQU D'3'
    ENDC

        Max EQU 0x73
        Counter EQU 0x74
        GOTO getMax

    getMax:
        MOVLW .0 
        MOVFW Max
        MOVLW .9
        MOVFW Counter
    loop:
        MOVLW MYARRAY + Counter
        CPFSGT Max
        MOVFW MaX
        DECFSZ Counter
        GOTO loop
        MOVLW MaX 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T01:21:07.460

你完全迷失了……

1.  该`CPFSGT`指令仅在 PIC18 系列中受支持，而 PIC16 中不支持您的情况。
2.  指令`CBLOCK`旨在声明块常量而不是程序数组。
3.  使用`FSR0`或`FSR1`注册为指向数组的指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:42:39.247

CPFSGT Max 之后的行应该是 MOVFW Max 而不是 MOVFW MAX 吗？最后一个也应该是 MOVLW Max。

凯文

# windows - Windows 命令行嵌套变量

> ID：15454408
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:32:35.157
> 
> 标签：windows, if-statement, batch-file, cmd, set

我知道我在这里可能没有使用传统编程，但我已经接近完成我想要使用的批处理文件了。它很脏，但它有效。只是搞砸了一件事，希望有人能帮忙。

我将简化代码。说我有：

```
SET foldersize0=1000
SET foldersize1=2000
SET foldersize2=3000
SET foldersize3=4000 
```

然后我想做一个if/then：

```
IF %foldersize%rnd%% GTR %var% .... blah blah blah 
```

如何根据随机数变量*rnd*调用文件夹大小的值，以便与另一个值进行比较？显然我发布的内容不起作用（*%foldersize%rnd%%*）。对不起，新手的问题。

谢谢十亿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:05:04.710

好的，你可以试试这个：

```
@echo off &setlocal 
SET foldersize0=1000
SET foldersize1=2000
SET foldersize2=3000
SET foldersize3=4000
set /a rnd=%random%%%4
call set "foldersize=%%foldersize%rnd%%%"
echo.%foldersize%
endlocal 
```

# java - 基本 MVC 设计：视图

> ID：15454413
> 
> 赞同：4
> 
> 时间：2013-03-16T20:32:57.843
> 
> 标签：java, model-view-controller

所以有两个不同的视图（控制器合并到视图中）：

**视图 1**：表格视图。桌子上有一张桌子和一些按钮。

**视图 2**：文本视图。有一个文本区域和许多与表格视图中的按钮不同的按钮。

有一个模型文件供两个视图文件链接。

我还创建了一个 main.java 文件来声明主窗口、一个选项卡式窗格（用于切换视图）并将视图绑定到它。

作为一个新手 java 开发人员和 MVC 设计模式学习者，我想知道：

**1\. 声明按钮、表格和文本区域的正确方法是什么？**

例如，对于 View 1(Tabular)，它的按钮和表格是在视图中还是在 main.java 中声明的？

**2\. 如果在视图中声明，它们是如何添加到主窗口中的？**默认 UpdateAllViews() 似乎没有通过 main.java 中的主窗口。

在这一点上，我只知道模型永远不应该在其中声明像 JButton 这样的东西，因为模型本身不应该知道窗口和东西的外观和感觉。我可以看到控制器有点绑定到某个视图组件，但视图本身让我很困惑。

如果有人可以提供一种捷径来更深入地了解 MVC 模式，我将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T21:59:51.003

请记住，您正在处理对象。模型、视图和控制器是对象的类别/集合。

您的模型对象是与您的业务领域相关的类的实例。例如，如果您正在制作地址簿，您将有一个 ADDRESS 类。

您的 View 对象提供与您的用户的连接。例如 SEARCHDIALOG 类和 ADDRESSDIALOG 类。

您的控制器为您的系统（系统 API）提供绑定/接口。您将拥有一个代表系统的控制器，例如 ADDRESSBOOKAPP 类。

享受。

# php - PHP 将包含一个相对于调用脚本的文件，但如果包含路径包含“../”则不会

> ID：15454414
> 
> 赞同：0
> 
> 时间：2013-03-16T20:33:21.657
> 
> 标签：php, include, relative-path

根据我从 PHP 的文档和此处的其他帖子中收集的信息，PHP 的 include（和 include_once）执行以下操作：

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录

我在给定目录中有以下结构：

*   索引.php
*   /dirA（包含 a.php 和 b.php）
*   /dirB（包含 c.php）

来自 index.php `include_once "dirA/a.php"`

以下是在 a.php 中的工作原理：
`include_once "b.php"`
`include_once "dirB/c.php"`

以下是在 a.php 中不起作用的内容：
`include_once "b.php"`
`include_once "../dirB/c.php"`

对我来说奇怪的是，b.php 是相对于“调用脚本自己的目录”而包含的，但 c.php 只被认为是相对于当前工作目录（即包含 index.php 的目录）。这对我来说似乎有点不一致。PHP 将包含一个相对于调用脚本的文件，但如果包含路径包含，则不会包含`../`- 为什么？ **为什么`../`父目录指令相对于调用脚本不起作用，但相对于当前工作目录？** （注意：我对它进行了相对于 cwd 的测试，但在上面的示例中没有包含该文件只是为了保持它更干净。它工作得很好）

任何人都可以解释为什么会这样吗？ *它应该*以这种方式工作，还是这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:17:23.843

PHP 在查找文件方面有点奇怪。如果包含名称以斜杠*或点*开头的文件，PHP 将`include_path`完全忽略。如果是点，则假定名称与启动所有内容的脚本相关（即：Web 服务器决定运行的脚本）。

如果您想指定相对于包含脚本而不是启动脚本的路径，那么您真正想要的是一个绝对包含，它指定文件的全名。`__FILE__`使用and常量很容易做到这一点`__DIR__`，它反映了当前运行脚本的名称和目录。

```
include __DIR__ . '/../dirB/c.php'; 
```

如果您愿意，您还可以将`include_path`配置设置设置为包含应用程序的根目录，并指定与该根目录相关的所有文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:38:09.387

这是因为您首先包含了`dirA/a.php`to `index.php`，所以从现在开始，`index.php`您的基础文件就是所有包含都来自的基础文件。因此，如果您`c.php` 从中包含，`a.php`就像您从`index.php`

这就是为什么如果你指定一个级别，你会得到错误的结果`"../"`。它搜索上一层`index.php`，但什么也没找到。

# ios - 调整图像大小给出白色图像

> ID：15454417
> 
> 赞同：0
> 
> 时间：2013-03-16T20:33:46.093
> 
> 标签：ios, objective-c, uiimage, core-graphics

我有一个`UIImage`我知道它在缩放之前没问题的。我需要对其进行缩放，以便将其设置为 ccsprite 。我缩放它，但后来我得到了一个白色的图像..

```
UIImage *scaled=[newImage copy];
//scale the image
CGRect screenRect = CGRectMake(0, 0, 640.0, 960.0);
UIGraphicsBeginImageContext(screenRect.size);
scaled = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CCSprite * image = [CCSprite spriteWithCGImage:scaled.CGImage 
                                           key:[NSString stringWithFormat:@"%d",[localImagesSpritesArray count]]]; 
```

会是什么呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:56:32.687

```
UIGraphicsBeginImageContext(screenRect.size);
[newImage drawInRect:screenRect]; //you have to add this line 
scaled = UIGraphicsGetImageFromCurrentImageContext(); 
```

# makefile - 延迟包含在 make

> ID：15454435
> 
> 赞同：2
> 
> 时间：2013-03-16T20:35:12.500
> 
> 标签：makefile, include, deferred

我想在运行特定命令后包含另一个生成文件，因为第一个命令会生成该生成文件。我试过这个

```
debug2:
    cd bench/${BENCH};  verilator --cc top.v
    include ${BENCH_DIR}/Vtop_classes.mk 
```

在这种情况下，make 无法识别包含命令并给出错误“make: include: Command not found”

如果我尝试在不包含选项卡的情况下包含，那么它会在执行上一个命令之前包含，因此会生成没有此类文件的错误

```
debug2:
    cd bench/${BENCH};  verilator --cc top.v
include ${BENCH_DIR}/Vtop_classes.mk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:43:10.790

添加 - 之前：`-include ${BENCH_DIR}/Vtop_classes.mk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-03T16:26:04.370

```
INCLUDED-FILES=MakeA MakeB

-include $(INCLUDED-FILES)
# alternatively use sinclude
generate-makefile:
    touch MakeA
    touch MakeB

clean: generate-makefile
    if [ -a MakeA ]; then make clean-A; else echo "No file: MakeA. Run make again."; fi;
    if [ -a MakeB ]; then make clean-B; else echo "No file: MakeB. Run make again."; fi; 
```

GNU make 不会因为`-include`. 当 make 运行延迟规则并且包含的​​文件不存在时，shell 会打印一条消息“再次运行 make”。示例调用中的延迟规则第二次生成，所以不会报错。

因为`-include`不报错，`make`第一次运行就可以运行生成规则。第二次运行时解决了依赖关系。

# java - 生成具有指定字符的随机字符串？

> ID：15454439
> 
> 赞同：0
> 
> 时间：2013-03-16T20:35:38.613
> 
> 标签：java, string, random, character

好吧，我陷入了如何使用指定字符生成具有所有可能值的字符串的问题。好吧，我不知道怎么解释好，这里举个例子：

字符：`a, b, c`

一代：

```
abc
aab
abb
acc
baa
bbb
bbc
bac
cab
ccc
aaa
cbb
caa
ccb
cca
bab
bcb 
```

我试过使用一个字符列表，然后迭代这个列表中的每个字符，然后再次迭代列表中的每个字符，但是......假设它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T20:45:01.943

我自己对[这个问题](https://stackoverflow.com/questions/15046796/brute-force-algorithm-w-java-passing-string-error/15046867)的回答的副本：

这将适用于`a,b,c`或任何其他连续的字符序列：

```
import java.util.Arrays;
import java.util.Iterator;

public class BruteForceIterator implements Iterator<String> {

    private char min, max;

    private char[] current;

    private char[] last;

    private int reachedLast = 0;

    public BruteForceIterator(char min, char max, int length) {
        this.min = min;
        this.max = max;
        current = new char[length];
        Arrays.fill(current, min);
        last = new char[length];
        Arrays.fill(last, max);
    }

    @Override
    public boolean hasNext() {
        return reachedLast < 2;
    }

    @Override
    public String next() {
        String str = new String(current);
        for(int i = current.length - 1; i >= 0; i--) {
            char next = following(current[i]);
            current[i] = next;
            if (next != min) {
                break;
            }
        }
        if (Arrays.equals(current, last) || reachedLast > 0) {
            reachedLast++;
        }
        return str;
    }

    private char following(char in) {
        if (in < max) {
            return (char) (in + 1);
        } else {
            return min;
        }
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException("No with me, sir!");
    }

    public static void main(String[] args) {
        BruteForceIterator bit = new BruteForceIterator('a', 'c', 3);
        while (bit.hasNext()) {
            System.out.println(bit.next());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:51:37.467

我很快在下面制作了这段代码。您可能需要对其进行一些编辑才能使其工作或适应您的需求我只是想与您分享我的代码的想法。但是我会推荐 jlordo 的答案，因为它更有效。

```
Array String[] = new Array[]{"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"}
ArrayList<String> numbersrandom;
for(int a = 0; i <= 26; i++){
for(int b = 0; i <= 26; i++){
for(int c = 0; i <= 26; i++){
numbersrandom.add(String[a]+String[b]+String[c]);
}
}
} 
```

使用此代码后，您可以使用随机生成器和 for 循环来随机混合这些。祝你好运！

# node.js - 基于 Mongoose 的应用架构

> ID：15454441
> 
> 赞同：27
> 
> 时间：2013-03-16T20:35:45.510
> 
> 标签：node.js, mongodb, architecture, mongoose

*这不是一个具体的应用程序/代码问题，它只是关于常见的应用程序架构。*

我试图了解组织我的猫鼬应用程序的正确方法。由于我是猫鼬的新手，所以我现在就是这样做的：

**核心/settings.js**

```
var mongoose = require('mongoose');
exports.mongoose = mongoose;
mongoose.connect('mongodb://localhost/blog');
exports.db = mongoose.connection; 
```

**核心/models.js**

```
settings = require("./settings");

// post schema
var postSchema = settings.mongoose.Schema({
    header: String,
    author: String,
    text: String
})

//compiling our schema into a Model 
exports.post = settings.mongoose.model('post', postSchema) 
```

**核心/db-layer.js**

```
settings = require("./core/settings");
models = require("./core/models");

exports.function = createAndWriteNewPost(function(callback) {
    settings.db.on('error', console.error.bind(console, 'connection error:'));
    settings.db.once('open', function callback() {
        new models.post({
            header: 'header',
            author: "author",
            text: "Hello"
        }).save(function(err, post) {
            callback('ok');
        });
    });
}); 
```

**路线/post.js**

```
db = reqiure("../core/db.js")

exports.get = function(req, res) {
    db.createAndWriteNewPost(function(status){
    res.render('add_material', {
      //blah blah blah        
        });
    });
}; 
```

**应用程序.js**

```
var post = require ('routes/post.js')
...
app.get('/post', post.get); 
```

因此，这段代码被极度简化（甚至没有经过测试）只是为了展示我当前的架构思想。它不是一个具体的应用程序，就像创建一个抽象的博客文章一样。这就是它的工作原理：

```
app.js --> routes/post.js <--> core/db-layer.js
                                   |
                                   v
                               core/models.js <--> core/settings.js 
```

这对我来说似乎有点多余。你能建议更优化的应用程序结构吗？谢谢。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-22T14:15:22.490

当我第一次接触 Node.js、Express 和 Mongoose 时，我一直在努力扩展我的代码。我的回答的目的是帮助那些不仅仅是一个简单的博客，而是帮助一个更大的可扩展项目的人。

*   我总是连接到数据库，我不会在需要时打开和关闭连接
*   我`index.js`用作文件夹的根文件，就像我们在其他语言中所做的那样
*   模型保存在自己的文件中，并`require()`d 到`models/index.js`文件中。
*   路由类似于模型，每个路由级别都有一个文件夹，其中`index.js`依次有一个文件。所以很容易安排类似的东西`http://example.com/api/documents/:id`。当一个人浏览文件结构时，它也更有意义。

这是我使用的结构：

```
-- app.js
-- models/
---- index.js
---- blog.js
-- mongoose/
---- index.js
-- routes/
---- index.js
---- blog/index.js
-- public/
-- views/
---- index.{your layout engine} => I use Jade.lang
-- methods/
---- index.js => use if you'd rather write all your functions here
---- blog.js => can store more complex logic here 
```

**应用程序.js**

```
var db = require('./mongoose'),
  express = require('express');
// note that I'm leaving out the other things like 'http' or 'path'
var app = express();

// get the routes
require('./routes')(app);
// I just require routes, without naming it as a var, & that I pass (app) 
```

**猫鼬/index.js**

```
// Mongoose connect is called once by the app.js & connection established
// No need to include it elsewhere
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/blog');

// I have just connected, and I'm not exporting anything from here 
```

**模型/index.js**

```
// Logic here is to keep a good reference of what's used

// models
Blog = require('./blog');
// User = require('./user');

// exports
exports.blogModel = Blog.blogModel;
// exports.userModel = User.userModel; 
```

**模型/blog.js**

因此，对于您处理的每个模型，您都创建一个`model.js`文档，并将其添加到`models/index.js`上面。例如，我添加了一个`User`模型，但将其注释掉了。

```
// set up mongoose
var mongoose = require('mongoose');
var Schema = mongoose.Schema,
ObjectId = Schema.ObjectId;

var BlogSchema = Schema({
  header: {type: String },
  author: {type: String },
  text: {type: String },
  _id: { type: ObjectId } // not necessary, showing use of ObjectId
});

Blog = mongoose.model('Blog', BlogSchema);
// the above is necessary as you might have embedded schemas which you don't export

exports.blogModel = Blog; 
```

**路线/index.js**

```
module.exports = function(app) {
  app.get('/', function(req, res) {
    // do stuff
  });
  require('./blog')(app);
  // other routes entered here as require(route)(app);
  // we basically pass 'app' around to each route
} 
```

**路线/博客/index.js**

```
module.exports = function(app) {
  app.get('/blog', function(req, res) {
    // do stuff
  });
  require('./nested')(app);
  // this is for things like http://example.com/blog/nested
  // you would follow the same logic as in 'routes/index.js' at a nested level
} 
```

**建议使用**

*   模型：用于创建处理文档的逻辑，即创建、更新、删除和搜索。
*   路线：最少的编码，仅在我需要解析 http 数据、创建模型实例，然后向相关模型发送查询的地方。
*   方法：用于不直接涉及模型的更复杂的逻辑。例如，我有一个`algorithms/`文件夹，用于存储我在应用程序中使用的所有算法。

希望这能提供更多的清晰度。这种结构对我来说很神奇，因为我发现它很容易理解。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T05:47:14.487

这几乎就是我的做法，但有一些不同之处：

*   我认为您不能在 db 层的函数中使用开放式侦听器。当使用像你这样的持久连接时，我通常做的是在 db open 处理程序中启动应用程序本身。如果您不想使用持久连接，请在 db 层函数中使用 createConnection，并确保在调用回调之前将其关闭。我不确定我是否清楚。如果您需要代码示例，请告诉我。
*   这更像是一个一般的 node.js 提示，但我将我的数据库连接字符串和其他配置保存在一个 json 文件中，并在需要的任何地方都需要它。之后您可能不需要另一个 settings.js 文件。
*   您还可以使用模式函数 ( [http://mongoosejs.com/docs/api.html#schema_Schema-method](http://mongoosejs.com/docs/api.html#schema_Schema-method) ) 将一些应用程序功能编码到模型本身中。

# java - JTextArea 没有滚动条

> ID：15454442
> 
> 赞同：2
> 
> 时间：2013-03-16T20:35:45.527
> 
> 标签：java, swing, jscrollpane, jtextarea, preferredsize

```
private JPanel contentPane;
public Driver() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 867, 502);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);
    final JTextArea textArea = new JTextArea();
    textArea.setEditable(false);
    textArea.setBounds(10, 11, 831, 393);
    JScrollPane scroll = new JScrollPane(textArea);
    scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    textArea.setText("dfgf");
    contentPane.add(scroll);
}

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Driver frame = new Driver();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    } 
```

为什么这不显示`textArea`滚动条？

我的问题是我什至看不到textArea。但如果我这样做`contentPane.add(scroll);`，我可以看到 textArea 但没有滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:43:08.563

*“为什么这不显示带有滚动条的 textArea？”*

因为滚动窗格的视口有自己的布局管理器，并且正在更改文本区域中的位置以适应其需要

视口将使用文本区域的首选大小属性来确定如何布局。您可以通过将文本添加到文本区域和/或根据需要设置行/列属性来影响此值。

**更新了示例**

![在此处输入图像描述](../Images/3de98ef122d8000506b96ce8ad7d578c.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestScrollPane03 {

    public static void main(String[] args) {
        new TestScrollPane03();
    }

    public TestScrollPane03() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JTextArea textArea = new JTextArea(100, 50);
                JScrollPane scrollPane = new JScrollPane(textArea);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(scrollPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }    
} 
```

**根据对问题的更改进行更新**

正如 camickr 已经指出的那样，您遇到的问题与您布局组件的方式有关。

这`contentPane.setLayout(null);`只是你的许多问题之一。停止使用`null`布局并开始使用适当的布局管理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:42:14.443

> 为什么这不显示带有滚动条的 textArea

滚动条实际上​​会出现，但没有“拇指把手”，直到您将足够的文本附加到您的`JTextArea`to 以将其大小扩展到`JScrollPane`视口大小之外。

您正在`null`为您的`contentPane` `JPanel`. 这从来都不是一个好主意。这里你`JScrollPane`有一个默认大小，`0 x 0`所以永远不会出现。有许多[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)可用于各种尺寸和定位要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T20:45:12.753

当添加到滚动窗格的组件的首选大小大于滚动窗格的大小时，将自动出现滚动条。您需要使用布局管理器来自动执行此操作

```
final JTextArea textArea = new JTextArea();
textArea.setBounds(10, 11, 831, 393);
JScrollPane scroll = new JScrollPane(textArea); 
```

你不应该使用 setBounds()。相反，您可以执行以下操作：

```
final JTextArea textArea = new JTextArea(5, 30);
JScrollPane scroll = new JScrollPane(textArea); 
```

现在，当您加载超过 5 行文本时，将出现滚动条。当然，所有这些都假设您使用的是适当的布局管理器。

# github - 为什么 Cygwin 不像 Windows 那样打印从 GitHub 克隆的内容？如何让它打印？

> ID：15454449
> 
> 赞同：0
> 
> 时间：2013-03-16T20:36:53.963
> 
> 标签：github, windows-xp, cygwin

当我使用 Windows cmd 从 GitHub 克隆某些内容时，它会向我显示该过程。例如：

```
C:\sbox\git\clone>git clone git://github.com/sstephenson/ruby-build.git
Cloning into 'ruby-build'...
remote: Counting objects: 1763, done.
remote: Compressing objects: 100% (718/718), done.

Receiving objects: 100% (1763/1763), 197.13 KiB, done.
Resolving deltas: 100% (958/958), done. 
```

但是当我在 Cygwin 下做同样的事情时，除了第一行之外什么都不显示：

```
User@comp-123 /usr/local
$ git clone git://github.com/sstephenson/ruby-build.git
Cloning into 'ruby-build'... 
```

它创建的目录没有任何错误，但是如何使它显示该过程？`-v`或`--verbose`选项无济于事。它可能会导致错误，因为例如`ruby-build`不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:39:25.297

您在评论中注意到您正在使用来自 Cygwin 的一些 Windows 风格的 Git。这将导致问题，因为 Cygwin 终端（即 MinTTY）看起来不像非 Cygwin 程序的终端（只需要 Windows 命令提示符）。特别是，除非专门为 Cygwin 编译了一个程序，否则它可能不会意识到它可以将内容打印到屏幕上。

你有两个选择来解决这个问题。最简单的方法是`--progress`指定`git clone`. 从`git clone`手册页（强调我的）：

> `--progress`
> 
> > 除非指定，否则**在附加到终端时**，默认情况下会在标准错误流上报告进度状态。**即使标准错误流未定向到终端，此标志也会强制执行进度状态**。`-q`

 **更好的解决方法是使用 Cygwin 的 Git。它确切地知道如何使用 Cygwin 的终端，因此它将在所有情况下正确打印到终端，而无需指定任何参数。它还能够获得正确的颜色，我想 Windows Git 在 Cygwin 中也会失败。

您可以从标准 Cygwin 安装程序安装 Cygwin Git。如果需要，请[再次下载 Cygwin 安装程序。](http://cygwin.com/install.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:40:21.620

我认为这是您在 Windows 上安装的~~Ruby Git 与 Cygwin 上的版本之间的版本控制问题。~~我的猜测是您的 Windows 设置使用的是 1.9 版本的 Git，而 Cygwin 使用的是 1.8？**

# python - Appending a dict to a list

> ID：15454453
> 
> 赞同：2
> 
> 时间：2013-03-16T20:37:09.630
> 
> 标签：python, python-2.7

I'm in the process of writing a program for the robotics team I'm apart of to gather data during competition to find the best team to "alliance" with. It needs gather about 20 values and needs to be able to list data by various parameters. I have a lot of the framework done but it seems like when I append my data to the list it will change all entries to when I'm appending.

For example, if I have

```
data = [{"teamNumber":1345,"teamName":"Blah"}] 
```

and try to append

```
{"teamNumber":3219,"teamName":"TREAD"} 
```

to data using append() I end up with

```
data = [{"teamNumber":3219,"teamName":"TREAD"},{"teamNumber":3219,"teamName":"TREAD"}] 
```

Currently we are adding data using this function(It has most of the unnecessary "meat" trimmed)

```
def inputTeamData(): 
    global data
    clear()
    temp = dataTemplate

    temp["teamNumber"] = question("Team Number?: ")
    temp["teamName"] = question("Team Name?: ")
    temp["foundingSeason"] = question("Founding Season?: ")

    save = question("Is the above data correct?(y/n): ")

    if save.lower() == "y":
        try:
            data.append(temp)
        except ValueError:
            print "ValueError. You gave me the wrong data types"
            sleep(1)

            else:
                print "Not saved"
                sleep(.8) 
```

I don't know what gives, even though the answer is more then likely to be stupidly obvious I can't seen to find the problem.

Anyways, much thanks in advice to whoever can help me with this!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T20:41:31.713

You need to learn some Python basics first:

```
temp = dataTemplate 
```

does not copy `dataTemplate` to a new variable `temp`! Instead it gives the alias "temp" to the original dictionary which you had named "dataTemplate". You modify the same original dictionary each time when you write `temp[ .. ] =` because "temp" is just a alias for "dataTemplate".

You want

```
temp = dataTemplate.copy() 
```

# c# - ProcessStartInfo 参数

> ID：15454456
> 
> 赞同：0
> 
> 时间：2013-03-16T20:37:31.050
> 
> 标签：c#, processstartinfo

我有一个过程，需要一些参数。我希望它从 C# 开始。我在快捷方式中尝试了相同的参数并且它有效。另一方面，在 c# 中它没有，所以这里是参数。参数格式是正确的，但我在 -k 处得到错误的参数错误

```
ProcessStartInfo prf = new ProcessStartInfo("C:\\" + "argstest.exe");       
prf.UseShellExecute =true;
prf.Arguments = "-l http://test.tes1:testa@testb.testing.com:3333/ -k testing TYPE=0 USER=1 COUNT=10";
Process.Start(prf); 
```

进程开始，但立即关闭，因为应该测试的 -k 参数没有发送到程序。我曾尝试在 -l 之前添加一个 " " 空格，但同样，也尝试过 @" -l ..."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:15:21.083

尝试在 arguments 参数中使用[逐字字符串。](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)像这样：

```
prf.Arguments = @"-l http://test.tes1:testa@testb.testing.com:3333/ -k testing TYPE=0 USER=1 COUNT=10"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:49:34.540

我测试了你的代码，没有发现任何问题。也许您发现这对跟踪您的问题很有用，我这样做了，您也可以这样做：

您尝试运行的控制台应用程序，我这样做了：

```
static void Main(string[] args)
{
    foreach (var arg in args)
    {
        Console.WriteLine(arg);
    }
    Console.ReadLine();
} 
```

从另一个控制台应用程序，就是这样：

```
static void Main(string[] args)
        {
            ProcessStartInfo prf = new ProcessStartInfo("ConsoleApplication1.exe");
            prf.UseShellExecute = true;
            prf.Arguments = "-l http://test.tes1:testa@testb.testing.com:3333/ -k testing TYPE=0 USER=1 COUNT=10";
            Process.Start(prf);
        } 
```

输出：

```
-1
http://test.tes1:testa@testb.testing.com:3333/
-k
testing
TYPE=0
USER=1
COUNT=10 
```

这就是让我相信问题不在于 Process.Start() 方面的原因，而在于您的其他应用程序解析参数的方式。至于为什么快捷方式有效而这无效，也许您应该复制/粘贴您正在使用的快捷方式，不太确定那个快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T01:10:16.277

我发现最适合这种情况的方法是在命令周围使用转义引号进行设置，如下所示：

```
string command = "ping -c 4 google.com";

ProcessStartInfo procStartInfo = new ProcessStartInfo("/bin/bash", "-c " + "\"" + command + "\""); 
```

# c# - 在 C# Windows 窗体中访问其他类

> ID：15454457
> 
> 赞同：2
> 
> 时间：2013-03-16T20:37:32.020
> 
> 标签：c#

我还没有做过很多 C# 编程。不过，我非常擅长 C/C++。我无法弄清楚从项目中的其他类访问类成员的正确方法。例如，我有一个 addChannel() 类，它是一个弹出框，允许用户输入 Channel 类的信息。我有一个可以保存这些频道的 treeView。treeView 位于 ListView 类中，该类是其中包含树的主要形式。我在 addChannel 弹出窗口上有一个按钮，单击该按钮应添加一个新 Channel() 并将此通道作为新节点添加到树中。但是我根本无法访问树，也不知道如何访问。这是一些相关的代码。

```
namespace RSSReader
{
    public partial class addChannel : Form
    {
        public addChannel()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Save the info to an XML doc

            // I want to access the channelTree treeView here
            this.Close();
        }
    }
} 
```

这是设计器的 ListView 部分类

```
namespace RSSReader
{
    partial class ListView
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.

           // ALL THE INITIALIZATION IS HERE... I excluded it

        public System.Windows.Forms.TreeView channelTree;
        private System.Windows.Forms.WebBrowser webBrowser;
        private System.Windows.Forms.Button addBtn;
        private System.Windows.Forms.Button setBtn;
        private System.Windows.Forms.Button remBtn;
        private System.Windows.Forms.RadioButton titleFilter;
        private System.Windows.Forms.RadioButton dateFilter;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:47:45.277

这不是 Windows 窗体的正常设置。

通常，您只需将 TreeView 拖到表单上，将按钮拖到表单上，生成的代码就可以轻松访问任何内容：

```
namespace RssReader
{
    public partial class addChannel : Form
    {
        public addChannel()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            treeView1.ItemHeight = 6;
        }
    }
} 
```

下面是代码隐藏：

```
namespace RssReader
{
    partial class addChannel
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

                                                                                                                                                                    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.treeView1 = new System.Windows.Forms.TreeView();
        this.button1 = new System.Windows.Forms.Button();
        this.SuspendLayout();
        // 
        // treeView1
        // 
        this.treeView1.Location = new System.Drawing.Point(12, 12);
        this.treeView1.Name = "treeView1";
        this.treeView1.Size = new System.Drawing.Size(121, 97);
        this.treeView1.TabIndex = 0;
        // 
        // button1
        // 
        this.button1.Location = new System.Drawing.Point(13, 116);
        this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 23);
        this.button1.TabIndex = 1;
        this.button1.Text = "button1";
        this.button1.UseVisualStyleBackColor = true;
        this.button1.Click += new System.EventHandler(this.button1_Click);
        // 
        // addChannel
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(284, 262);
        this.Controls.Add(this.button1);
        this.Controls.Add(this.treeView1);
        this.Name = "addChannel";
        this.Text = "Form1";
        this.ResumeLayout(false);

    }

    #endregion

        private System.Windows.Forms.TreeView treeView1;
        private System.Windows.Forms.Button button1;
    }
} 
```

如果您遵循 Visual Studio 设计器为您实现的模式，Windows 窗体会容易得多。如果你这样做，你会发现你想做的事情很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:51:44.897

当您创建 addChannel 类时，在运行它之前（使用 Show() 等），您需要将它与您想要访问的 listView 表单挂钩。2 个选项： 1\. 将列表视图作为参数传递给 addChnel，然后再运行它。比你可以从 addCahnnel 调用方法到 listView。2.在你的addChannel类中创建一个事件并为这个事件注册listView（事件可以是：添加/删除频道等...）

选项 2 更好，但您需要学习如何使用事件和委托。见： http: [//msdn.microsoft.com/en-us/library/aa645739 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:58:16.930

在构造函数中传递 TreeView

```
public partial class addChannel : Form
{                     
    private TreeView _treeView; // TreeView on other Form.

    public addChannel(TreeView treeView)
    {
        InitializeComponent();
        _treeView = treeView;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // Save the info to an XML doc

        // Access _treeView here
        Console.WriteLine(_treeView.Name);

        this.Close();
    }
} 
```

* * *

一种完全不同的方法是添加一个公开所选频道的公共属性。您根本不会从`addChannel`表单访问 TreeView，而是仅在主表单上执行此工作

```
public partial class addChannel : Form
{                     
    public addChannel()
    {
        InitializeComponent();
    }

    public Channel SelectedChannel { get; private set; }

    private void button1_Click(object sender, EventArgs e)
    {
        // Save the info to an XML doc

        SelectedChannel = theChannel;
        this.Close();
    }
} 
```

在主窗体中，您将执行以下操作：

```
var fdlg = new addChannel();
if (fdlg.ShowDialog(this) == DialogResult.OK) {
    this.treeView.Add(fdlg.SelectedChannel); // Or something similar
} 
```

确保将 的`DialogResult`属性 设置`button1`为“确定”。您还可以将`AcceptButton`对话框表单的属性设置为`button1`; 这使用户能够使用 ENTER 键关闭表单。

# php - 将图像大小调整到特定高度

> ID：15454463
> 
> 赞同：1
> 
> 时间：2013-03-16T20:38:48.253
> 
> 标签：php

我目前已经实现了一段代码，允许我调整图像大小以允许在我正在创建的画廊中使用缩略图，尽管它不太顺利。

我正在使用一些预先编写的代码来调整图像的大小，尽管我正在努力为图像提供至少 195px 的高度和 195px 的宽度+如果可能的话保持成比例。

还有什么方法可以优化图像以改善页面加载时间吗？

这是我当前的代码，任何帮助将不胜感激，谢谢！

```
function imageResize() {
$filename = $row['main'];

if (exif_imagetype($filename) == IMAGETYPE_GIF) {
    $create = imagecreatefromgif;
}

if (exif_imagetype($filename) == IMAGETYPE_JPEG) {
    $create = imagecreatefromjpeg;
}

if (exif_imagetype($filename) == IMAGETYPE_PNG) {
    $create = imagecreatefrompng;
}

$width = 600; //These values have been tinkered with from their original values
$height = 500;

header('Content-Type: image/jpeg');

list($width_orig, $height_orig) = getimagesize($filename);

$ratio_orig = $width_orig/$height_orig;

if ($height_orig < 300) {
   $width = $height*$ratio_orig;
} else {
   $height = $width/$ratio_orig;
}

$image_p = imagecreatetruecolor($width, $height);
$image = $create($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

imagejpeg($image_p, null, 100);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:39:02.947

找出原始图像中哪个更小，高度或宽度。如果此值小于您的最小值 195 像素，请将其设置为此最小值并根据图像的原始纵横比缩放其他值：

```
$minSize = 195;
$aspectRatio = $width_orig / $height_orig;

if ($width_orig < $height_orig) {
    if ($width_orig < $minSize) {
        $width = $minSize;
        $height = $width / $aspectRatio;
    }
} else {
    if ($height_orig < $minSize) {
        $height = $minSize;
        $width = $height * $aspectRatio;
    }
} 
```

# mysql - 在magento集合中过滤？

> ID：15454466
> 
> 赞同：0
> 
> 时间：2013-03-16T20:39:12.477
> 
> 标签：mysql, magento, collections

以下代码：

```
 $collection->addAttributeToFilter(array(
                   array('attribute'=> 'someattribute','like' => 'value'),
                   array('attribute'=> 'otherattribute','like' => 'value'),

            )); 
```

创建一个类似的查询：

```
 where  ( someattribute like 'value' OR otherattribute like 'value' ) 
```

但是我怎么能在这个 OR 条件中添加一个 AND 条件呢？我的意思是这样的：

```
 where ( (someattribute like 'value' AND someattribute  != 'another value')  OR otherattribute like 'value' ) 
```

我在构建我的集合时多次使用 addAttributeToFilter，但是，我尝试使用以下代码添加上述条件：

```
 $collection->getSelect->where( "(someattribute like 'value' AND someattribute  != 'another value')  OR otherattribute like 'value' )"  ) 
```

但它不起作用。也许不可能使用 addAttributeToFilter AS 以及同一个集合的位置？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:30:38.517

根据定义：

```
->addAttributeToFilter(array(
               array('attribute'=> 'someattribute','like' => 'value'),
               array('attribute'=> 'otherattribute','like' => 'value'),

        ) 
```

这是使用 AND 的 OR 选择：

```
 ->addAttributeToFilter(array('attribute'=> 'someattribute','like' => 'value'))->addAttributeToFilter(array('attribute'=> 'otherattribute','like' => 'value')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:54:03.240

好的，它正在工作......我添加的条件中有一些错误

因此，您可以在同一个 magento 集合上使用 addAttributeToFilter 和“where”。无论如何，也许它也可以帮助其他人，这个解决方案，但仍然想知道您是否可以仅使用 addAttributeToFilter 复制上述 where 条件......

# c - 从库中公开日志接口

> ID：15454467
> 
> 赞同：0
> 
> 时间：2013-03-16T20:39:14.290
> 
> 标签：c, logging, middleware

我大部分时间都在用 C 编写软件。最近，我一直在研究可以归类为中间件的库。它们只需要存在就可以使两个软件进行通信。

在开发过程中，我发现分析日志可以更快、更轻松地跟踪和隔离错误。显然，我希望该库的任何生产使用都不需要经常检查日志输出。

但现实是一些错误只出现在生产环境中。造成这种情况的一个常见原因可能是库对面的实现，它正在做一些在标准方面属于灰色区域的事情。因此，需要能够分析来自生产环境的日志。

那么从中间件类型的 API 公开日志记录的最佳实践是什么？有没有关于这个主题的文献？

目前我有两个想法：

第一种是`#define`在我的源代码中使用 a 来控制日志记录语句的存在。在生产环境中，该库可以编译两次。一个共享对象将启用日志记录语句。另一个将在没有日志记录的情况下进行优化。通过在运行时更改动态链接的库，可以启用和禁用日志记录。

这种`#define`方法可行，但可能不够灵活。另外，我不是很关心性能。我采取先实施，后优化的方法。

我的第二种方法是坚持 UNIX 风格的哲学，只在库中有一个函数，用于通过传入文件描述符来启用日志记录。这将使日志记录在运行时启用或禁用。如果设置了文件描述符，则启用日志记录。如果未设置，则不进行记录。显然，这有其自身的缺点。但这是一种简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:48:51.453

以下是我的考虑：

*   日志必须始终存在

通常当客户遇到问题时，您首先需要的是日志。

*   日志消息应因级别而异

您应该在代码中添加尽可能多的日志语句，只要您觉得有用（提前考虑）。然而，并不是所有的陈述都是有用的。应该有一种方法可以按问题级别或命名空间来区分消息，这样您就可以快速选择所需的内容

*   日志记录应该是可配置的

如果您有一个大容量的服务器系统，那么记录所有内容每秒可以为您生成数兆字节的数据。您应该具有如何控制记录的内容和不记录的内容的功能。

例如，您可以查看 Android logging API for C（cutils 组件）。它是函数 + 宏的组合，可让您将日志记录语句添加到代码中。

您选择哪种机制在磁盘上存储日志是您的选择，但最好使用您平台最常用的方法（Linux 为 /var/logs，Android 为 logcat 等）

# android - Android achartengine 设置轴步骤

> ID：15454468
> 
> 赞同：0
> 
> 时间：2013-03-16T20:39:16.650
> 
> 标签：android, achartengine

我正在使用 achartengine 来显示折线图。y 轴显示广告被查看的次数，因此 y 轴标签不是整数是没有意义的。如果该范围内的最大广告视图数为 3 或更多，则它可以正常工作，因为 y 轴标签以 1 为步长上升，例如 0、1、2、3。但是，如果广告视图的最大数量小于 3，您将获得 y 轴标签 0、0.5、1、1.5、2、2.5 等或 0、0.2、0.4、0.6、0.8、1 等。有什么方法可以设置轴标签的最小步长为 1 或告诉它只显示整数轴标签。

谢谢大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T18:14:17.613

无法设置最小步长，但有一种方法可以指示您想要多少个不错的数字作为标签。如果您的数据范围低于 3，那么您可以执行以下操作：

```
renderer.setYLabels(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:13:24.600

如果实际最大 y 值小于 3，我通过在 setRange 方法中将最大 y 值设置为 3 来解决问题。

# c# - 为什么不针对字段优化简单属性？

> ID：15454470
> 
> 赞同：6
> 
> 时间：2013-03-16T20:39:27.067
> 
> 标签：c#, .net

```
sealed class A
{
    public int X;
    public int Y { get; set; }
} 
```

如果我创建 A 的一个新实例，访问 Y 100,000,000 次大约需要 550 毫秒，而访问 X 大约需要 250 毫秒。我将它作为发布版本运行，但对于该属性来说它仍然慢得多。为什么 .NET 不将 Y 优化为字段？

编辑：

```
 A t = new A();
    t.Y = 50;
    t.X = 50;

    Int64 y = 0;

    Stopwatch sw = new Stopwatch();
    sw.Start();

    for (int i = 0; i < 100000000; i++)
        y += t.Y;

    sw.Stop(); 
```

那是我用来测试的代码，我将 tY 更改为 tX 来测试 X。我也在发布版本中。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T21:48:49.937

```
for (int i = 0; i < 100000000; i++)
    y += t.X; 
```

这是*很难*分析的代码。您可以在使用 Debug + Windows + Disassembly 查看生成的机器代码时看到这一点。x64 代码如下所示：

```
0000005a  xor         r11d,r11d                           ; i = 0
0000005d  mov         eax,dword ptr [rbx+0Ch]             ; read t.X
00000060  add         r11d,4                              ; i += 4
00000064  cmp         r11d,5F5E100h                       ; test i < 100000000
0000006b  jl          0000000000000060                    ; for (;;) 
```

这是经过高度优化的代码，请注意 += 运算符是如何完全消失的。您允许这种情况发生是因为您在基准测试中犯了一个错误，您根本没有使用 y 的计算值。抖动知道这一点，所以它简单地删除了无意义的添加。增加 4 也需要解释，这是循环展开优化的副作用。稍后你会看到它被使用。

因此，您**必须**对基准进行更改以使其现实，在末尾添加以下行：

```
sw.Stop();
Console.WriteLine("{0} msec, {1}", sw.ElapsesMilliseconds, y); 
```

这会强制计算 y 的值。现在看起来*完全*不同了：

```
0000005d  xor         ebp,ebp                             ; y = 0
0000005f  mov         eax,dword ptr [rbx+0Ch]          
00000062  movsxd      rdx,eax                             ; rdx = t.X
00000065  nop         word ptr [rax+rax+00000000h]        ; align branch target
00000070  lea         rax,[rdx+rbp]                       ; y += t.X
00000074  lea         rcx,[rax+rdx]                       ; y += t.X
00000078  lea         rax,[rcx+rdx]                       ; y += t.X
0000007c  lea         rbp,[rax+rdx]                       ; y += t.X
00000080  add         r11d,4                              ; i += 4
00000084  cmp         r11d,5F5E100h                       ; test i < 100000000
0000008b  jl          0000000000000070                    ; for (;;) 
```

仍然*非常*优化的代码。奇怪的 NOP 指令确保地址 008b 的跳转是有效的，跳转到与 16 对齐的地址优化了处理器中的指令解码器单元。LEA 指令是让地址生成单元生成加法的经典技巧，允许主 ALU 同时执行其他工作。这里没有其他工作要做，但如果循环体参与更多，则可以做。并且循环展开 4 次以避免分支指令。

Anyhoo，现在您实际上是在测量真实代码，而不是*删除*的代码。结果在我的机器上，重复测试 10 次（重要！）：

```
y += t.X: 125 msec
y += t.Y: 125 msec 
```

**完全**一样的时间。当然，应该是这样的。您无需为财产付费。

抖动在生成高质量的机器代码方面做得很好。如果你得到一个奇怪的结果，那么*总是*先检查你的测试代码。这是最有可能出错的代码。不是抖动，是经过彻底测试的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T20:46:01.743

`X`只是一个简单的字段。然而`Y`是一个带有`get`和`set`访问器的属性，命名 `int get_Y()`和`void set_Y(int)`内部。还有一个带有特殊编译器生成名称的私有*支持字段*，访问器访问支持字段。`Y`实践中显示的下图：

![uplyZ.jpg](../Images/b251f03b996bfa3942be3014cf74034f.png)

根据 C# 语言规范，编译器应该这样做。如果 C# 编译器改为发出一个字段，它将违反规范。

当然，运行时必须使用编译器生成的访问器。但是运行时可能会使用*内联*等技巧来避免对访问器的额外调用。这是一种优化，*可以*使属性访问与字段访问一样快。

[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)强调，实际上运行时*会*以同样快的速度进行属性访问。您的原始测试代码有缺陷，运行时可以删除读取，因为它分配给的局部变量从未使用过。详细参见 Passant 的回答。

不过，如果你想要一个普通的字段，写一个，不要创建一个自动属性。

# tsql - 在 SQL Server 2000 中第一次插入失败时触发器退出并且无法将 xact_abort 设置为 OFF

> ID：15454476
> 
> 赞同：1
> 
> 时间：2013-03-16T20:40:13.343
> 
> 标签：tsql, sql-server-2005, sql-server-2000, validation, xact-abort

我已经构建了一个简单的数据库，可以在 SQL Server 2005 上运行，现在需要让它在 SQL Server 2000 上运行。目标如下：

*   我收到一个包含约 5k 条记录的每日数据馈送到一个暂存表中。
*   当这个插入完成时，一条记录会被添加到一个名为 TRIGGER_DATA 的表中。
*   我在该表上创建了一个“插入时”触发器，然后尝试将其中的数据一次插入 FACT_data 表中的一条记录。
*   FACT_data 表是许多 DIM 表的外键，这些表定义了字段可以接受的输入。
*   如果任何记录违反外键约束，则插入应该失败，并且应该将记录插入到 Load_error 表中（该表没有外键并且所有字段都可以为空）。

触发器有一个主要的 try-catch，然后我在 EXEC 语句上使用第二个 try-catch 来插入 FACT_data 表，以将失败的记录引导到 Load_error 表中。

在兼容级别 90（即 SQL Server 2005）下，我可以在触发器中将 XACT_ABORT 设置为 OFF，并且一切似乎都工作正常 - 下面的代码可以工作。但是，在兼容级别 80 或更低的情况下，您无法从触发器中设置此参数，并且我的代码在第一次遇到插入错误时会失败。

目前我唯一想到的解决方法是在 Stage_data 表上创建一个 on insert 触发器，然后每个触发器处理一行数据。但是我不喜欢这种解决方案，因为数据量很大并且可能会增加，而且一次触发 5000 个触发器似乎不是一个好主意。

任何人都可以提供或指出解决方案的方向吗？

--------- SQL SERVER 2005 代码提取：

```
CREATE TRIGGER DataReceived 
```

ON TRIGGER_DATA FOR INSERT AS BEGIN SET NOCOUNT ON;
声明@strfields varchar(4000) 声明@sql1 VARCHAR(8000); 声明@sql2 VARCHAR(8000); 声明@row_ID varchar(10)

```
CREATE TABLE #new_ids (sale_id INT )

SET @strfields = 'field1, field2, field3'

-- Insert into FACT_DATA data present in STAGE_DATA
INSERT INTO Log_Data (category, msg, tstamp) VALUES ('General', 'Trigger: Data Received', getdate());

BEGIN TRY       
    DECLARE Stage_Cursor CURSOR FAST_FORWARD
    FOR
    SELECT cast(ID as varchar(10)) FROM STAGE_DATA

    OPEN Stage_Cursor 
    FETCH NEXT FROM Stage_Cursor INTO @row_ID

    WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @sql1 = ' INSERT FACT_DATA (sale_date_id, '+@strfields+') 
                    OUTPUT INSERTED.sale_id INTO #new_ids'
        SET @sql2 =  ' SELECT c.sale_date_id,a.* FROM (SELECT '+@strfields+' from STAGE_DATA where ID =  '+ @row_id + ') AS a
                 JOIN   
                (SELECT sale_date_id,s_date from DIM_calendar) AS c
                on a.STORED_DT = c.s_date;'
        BEGIN TRY   
            SET XACT_ABORT OFF          
            EXEC(@sql1 + @sql2)
        END TRY
        BEGIN CATCH
            --catch records that did not load 
            SET @sql1 = 'INSERT INTO Load_error ('+@strfields+') ' 
            SET @sql2 = 'SELECT '+@strfields+' from STAGE_DATA where ID =  '+ @row_id
            EXEC(@sql1 + @sql2)
        END CATCH   
        FETCH NEXT FROM Stage_Cursor INTO @row_ID
    END
    CLOSE Stage_Cursor
    DEALLOCATE Stage_Cursor

    --re-enable auto abort
    SET XACT_ABORT ON;

    --clear tables
    TRUNCATE TABLE STAGE_DATA;
    TRUNCATE TABLE TRIGGER_DATA;    

END TRY
BEGIN CATCH
    declare @error int, @message varchar(4000), @xstate int;
   select @error = ERROR_NUMBER(), @message = ERROR_MESSAGE(), @xstate = XACT_STATE();
    if @xstate = -1
        rollback;
    if @xstate = 1 and @@trancount = 0
        rollback;
    if @xstate = 1 and @@trancount > 0
        rollback ;

    INSERT INTO Log_Data (category, msg, tstamp) VALUES ('General', '***FAILED. Trigger: FACT_DATA update', getdate());
    raiserror ('DataReceived: %d: %s', 16, 1, @error, @message) ;

   return;
END CATCH; 
```

结尾

非常感谢

- - - - - - - 编辑： - - - - - - - - - - - - - - - - - - ------

我试图修改我的代码以在 sql server 2000 下工作（即用@@error 检查替换 try-catch）。但是，每次发生 FK 违规时，它都会中止失败。谁能告诉我我做错了什么？

```
ALTER TRIGGER DataReceived 
```

ON TRIGGER FOR INSERT AS BEGIN SET NOCOUNT ON;
声明 @row_ID INT

```
-- Insert into FACT_POS data present in STAGE_DATA
INSERT INTO Log_Data (category, msg, tstamp) VALUES ('General', 'Trigger: Data Received', getdate());

DECLARE @err int     
--select 1/0; --generate error
DECLARE Stage_Cursor CURSOR FAST_FORWARD
FOR
SELECT ID  FROM STAGE_DATA

OPEN Stage_Cursor 
FETCH NEXT FROM Stage_Cursor INTO @row_ID

WHILE @@FETCH_STATUS = 0
BEGIN
    --load data
    INSERT FACT_DATA (sale_date_id,field1,field2,field3)
    SELECT c.sale_date_id,a.* FROM (SELECT field1,field2,field3 
    from STAGE_DATA where ID = @row_ID)  AS a
     JOIN   
    (SELECT sale_date_id,s_date from DIM_calendar) AS c
    on a.STORED_DT = c.s_date; 

    --check error code
    SELECT @err=@@error 
    If @err <>0 
    BEGIN
        --TO DO: catch records that did not load 
        --raiserror - this should prevent the trigger from aborting the batch
        RAISERROR('Error happened', 16, 1)
    END
    FETCH NEXT FROM Stage_Cursor INTO @row_ID
END
CLOSE Stage_Cursor
DEALLOCATE Stage_Cursor 
```

结尾

# c - 您可以使用 scanf 来测试 _Bool 类型的有效输入吗？关于C

> ID：15454481
> 
> 赞同：2
> 
> 时间：2013-03-16T20:40:31.510
> 
> 标签：c, boolean, scanf

我对我用 C 编写的这段代码有疑问：

```
 printf("Do you own a microwave?Enter 1 for Yes and 0 for No\n");
    while((scanf("%d",&microw))==0){
        printf("Please enter a valid number:\n");
    scanf("%d",&microw);} 
```

我的编译器说以下内容：“格式`%d`需要类型的参数，`int*`但参数 2 具有类型`_Bool*`”。据我所知， boolean 被认为是 int 类型，所以我不确定为什么会收到此警告。除了设置另一个变量来测试之外，我还能如何测试这种情况`scanf`，然后将另一个`_Bool`类型的变量分配给 true 或 false？任何反馈表示赞赏。我谢谢大家:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:49:21.210

你收到它是因为，好吧，它期待一个`int *`并且你正在传递一个`_Bool *`。它们都是整数，但类型不同——在我的系统`_Bool`上，大小为 1，`int`大小为 4。

没有`scanf`您想要的说明符，因此`char`如果您真的想要最小存储空间，则需要使用 a 。之后您始终可以将值分配给 a `_Bool`。

例如

```
scanf("%c",&microw);
_Bool b = microw - '0'; 
```

（此外，您的代码不会按预期工作。如果您输入无效字符`%d`，它将进入无限循环。）

# asp.net - GridView - 使用图像作为选择按钮，不触发选择事件

> ID：15454487
> 
> 赞同：0
> 
> 时间：2013-03-16T20:41:20.083
> 
> 标签：asp.net

如果我使用按钮，它可以正常工作，但是当我使用模板列（在代码示例中注释）作为自定义选择按钮（带有图像）时，选择事件不起作用

```
<%-- <asp:TemplateField HeaderStyle-CssClass="table-header-repeat line-left">
    <ItemTemplate>
        <asp:ImageButton ID="imgSelect" runat="server" ImageUrl="images/arrow_right.png"
            CommandName="Select" Height="32" Width="32" CausesValidation="false"  />
    </ItemTemplate>
    <HeaderStyle CssClass="table-header-repeat line-left" />
    <ItemStyle Width="50px" />
</asp:TemplateField>--%>

<asp:CommandField ShowSelectButton="True"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:14:32.323

您是否有机会使用母版页？母版页的 ViewState是否`ContentPlaceHolder`已关闭？

这也是造成[本帖](http://bytes.com/topic/asp-net/answers/547875-gridview-rowcommand-not-firing)同样情况的原因。

# php - 使用 file_get_html 获取图像，是否可以复制图像并将其上传到自己的服务器？

> ID：15454488
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:41:27.393
> 
> 标签：php, file-get-contents

我目前正在做一个项目，我需要使用 php 获取外部页面内容，我正在使用

```
file_get_html() 
```

传递html，现在，是否可以获取图像？然后上传它们

```
move_uploaded_file() 
```

如果有人能指出我正确的方向，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:55:12.147

如果您想将图像返回到服务器，我会考虑使用 curl。我已经这样做了几次，并且（在我看来）获取您想要的图像要容易得多。如果您已经拥有外部图像的路径，则以下内容可能对您有用：[http ://www.edmondscommerce.co.uk/php/php-save-images-using-curl/](http://www.edmondscommerce.co.uk/php/php-save-images-using-curl/)

这也可以为快速抓取外部页面提供更多的灵活性。

# javascript - Javascript else条件未触发

> ID：15454490
> 
> 赞同：0
> 
> 时间：2013-03-16T20:41:33.110
> 
> 标签：javascript, jquery

我正在尝试做一个基本的 javascript/jquery 动画。基本上，隐藏在普通视图下的 div 应该在单击按钮时出现。

我遇到的问题是条件（`if else`语句）。

这是我正在使用的代码。

```
$(document).ready(function () {
    animationClick('#animateThis', '#someElement', '#startHere');
});

function animationClick(element, secondElement, elementToBeClicked) {
    element = $(element);
    elementToBeClicked = $(elementToBeClicked);
    secondElement = $(secondElement);
    var state = 0;
    var containerWidth = $('#container').width();
    elementToBeClicked.on("click", function () {
        if(state == 0) {
            secondElement.animate({
                top: '27%',
            }, 500);
            element.animate({
                left: '0%',
            }, 500);
            elementToBeClicked.html("Hide");
            state = 1;
        } else {
            alert('hehehe');
        }
    })
}; 
```

所以，基本上，这就是发生的事情。整个函数放入document.ready。当我单击按钮（此函数绑定到该按钮）时，`if`语句返回`true`，并且代码被执行。它还将状态设置为`1`。

状态设置为 后`1`，该`else if`语句应开始执行并显示`alert("hehehe")`，但事实并非如此。

谁能给我一些建议？我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:47:10.073

您已经在第一条语句中绑定了一个`"click"`事件。在语句末尾尝试它，然后看看会发生什么，但通常为了只检查是否正在执行，只需将警报放在事件之外。`"elementToBeClicked"``if``unbind``if``else``click`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:54:56.143

您的变量“状态”是函数的本地变量。这就是为什么在函数的后续调用中它始终为 0。在函数外部初始化变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:52:34.673

我认为问题在于，当您在 if 语句中比较变量和零时，您应该使用三个 ===。像这样： if (state === 0)

# glassfish - Guice 创建错误：Cloudify

> ID：15454492
> 
> 赞同：1
> 
> 时间：2013-03-16T20:41:40.780
> 
> 标签：glassfish, guice, netbeans-7, jclouds, cloudify

我是 Guice 的新手，确实是 cloudify，我希望得到一个指针或区域来查看可能导致这种情况的原因：

1.  首先 ：

    ```
    No implementation for com.google.common.cache.LoadingCache<org.jclouds.ec2.domain.RunningInstance, org.jclouds.domain.LoginCredentials> was bound.
      while locating com.google.common.cache.LoadingCache<org.jclouds.ec2.domain.RunningInstance, org.jclouds.domain.LoginCredentials>
        for parameter 9 at org.jclouds.aws.ec2.compute.strategy.AWSEC2CreateNodesInGroupThenAddToSet.<init>(AWSEC2CreateNodesInGroupThenAddToSet.java:94)
      at org.jclouds.aws.ec2.compute.config.AWSEC2ComputeServiceContextModule.configure(AWSEC2ComputeServiceContextModule.java:96) 
    ```

2.  和 ：

    ```
    No implementation for com.google.common.cache.CacheLoader<org.jclouds.ec2.domain.RunningInstance, org.jclouds.domain.Credentials> was bound.
      at org.jclouds.ec2.compute.config.EC2ComputeServiceDependenciesModule.credentialsMap(EC2ComputeServiceDependenciesModule.java:169)
    2 errors 
    ```

代码`1`是：-

```
public class AWSEC2ComputeServiceContextModule extends BaseComputeServiceContextModule {
@Override
protected void configure() {
super.configure();
    installDependencies();
    install(new EC2BindComputeStrategiesByClass());
    install(new AWSEC2BindComputeSuppliersByClass());
    bind(ReviseParsedImage.class).to(AWSEC2ReviseParsedImage.class);
    bind(CreateKeyPairAndSecurityGroupsAsNeededAndReturnRunOptions.class).to(
           CreateKeyPairPlacementAndSecurityGroupsAsNeededAndReturnRunOptions.class);
    bind(EC2HardwareSupplier.class).to(AWSEC2HardwareSupplier.class);
    bind(EC2TemplateBuilderImpl.class).to(AWSEC2TemplateBuilderImpl.class);
    bind(EC2GetNodeMetadataStrategy.class).to(AWSEC2GetNodeMetadataStrategy.class);
    bind(EC2ListNodesStrategy.class).to(AWSEC2ListNodesStrategy.class);
    bind(EC2DestroyNodeStrategy.class).to(AWSEC2DestroyNodeStrategy.class);
    bind(InstancePresent.class).to(AWSEC2InstancePresent.class);
    bind(EC2CreateNodesInGroupThenAddToSet.class).to(AWSEC2CreateNodesInGroupThenAddToSet.class);
    bind(RunningInstanceToNodeMetadata.class).to(AWSRunningInstanceToNodeMetadata.class);
} 
```

代码`2`是：-

```
@Provides
@Singleton
@Named("SECURITY")
protected LoadingCache<RegionAndName, String> securityGroupMap(
        @Named("SECURITY") CacheLoader<RegionAndName, String> in) {
    return CacheBuilder.newBuilder().build(in);
} 
```

我最初的想法是它可能是路径中缺少或缺少项目的 jar 文件？任何指针和指导表示赞赏。这是在Bootcamped IMAC 上的`Netbeans 7.3 beta`, `Java 1.7`, `GlassFish`, `Cloudify 2.5.0-SNAPSHOT`, Windows 7 Professional 64 位上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:19:21.370

您的类路径中缺少一些 jar 文件。至少您应该在类路径的以下目录中包含 jar 文件：

*   CLOUDIFY_HOME/lib/必需/*
*   CLOUDIFY_HOME/lib/platform/esm/*
*   CLOUDIFY_HOME/lib/platform/cloudify/*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T15:09:16.023

还要检查您使用的 Java 版本。如果它是 1.7u51 或更高版本，则它不适用于 cloudify 使用的 jclouds 版本，特别是 Guice（[此处](https://issues.apache.org/jira/browse/JCLOUDS-427)描述的问题）。

恢复到较早的 JDK（1.7u45 或更低版本）应该可以解决它。

# jquery - 使用 jquery 更改 html 内容

> ID：15454493
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:41:41.277
> 
> 标签：jquery

我想更改正文的 html 代码，因为我使用的是 pdf 生成器，它似乎获取页面的 html 代码并转换它。问题是当用户想要生成 pdf 时，我需要更改jquery的一些信息，它改变得很好，但是当生成pdf时它有旧信息..所以我想用最新的..

这是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:44:38.230

用其他 HTML 代码替换 HTML 代码绝对是 jQuery 可以处理的事情。

我建议阅读一些 jQuery 流行的方法：

*   [。用。。。来代替（）](http://api.jquery.com/replaceWith/)
*   [.html()](http://api.jquery.com/html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:05:46.940

唔。这是个好问题。

如果您在 div 中有一个文本，id 为 hassaan，并且它包含文本“KING”，我希望此文本更改为 DON。然后步骤如下。

**HTML：**

```
<div id="hassaan">
KING
</div 
```

**jQuery：**

```
$(document).ready(function(){
   $("#hassaan").html("DON");
}); 
```

欢呼！！！有用。:)

> **此外，将您的本地主机或网站链接发送给我，我会在那里为您提供帮助。谢谢亲爱的每一个人。**

# javascript - 使用 Twitter Bootstrap（JS 和 Jquery）的下拉菜单不下拉——怎么了？

> ID：15454496
> 
> 赞同：0
> 
> 时间：2013-03-16T20:41:52.977
> 
> 标签：javascript, jquery, drop-down-menu, twitter-bootstrap, navbar

我是网站开发的新手，所以我遵循其他开发人员给出的模式。我正在关注如何添加下拉菜单的本[网站教程。](http://mifsud.me/adding-dropdown-login-form-bootstraps-navbar/)

在本教程之后，我发现了一个关于另一个人的堆栈溢出的问题。我丢失了链接，尽管浏览了我的历史记录，但我还是找不到它。有人建议本教程是使用 bootstrap 的版本 1 构建的，请返回 bootstrap 站点以获取更多信息。我做到了（我当前的版本反映了使用引导程序的指南），但我无法深入了解为什么我的代码不起作用。

在筛选引导资源和类似的堆栈溢出问题后

[带有 Twitter Bootstrap 的下拉菜单](https://stackoverflow.com/questions/9333940/dropdown-menu-with-twitter-bootstrap)

[Twitter Bootstrap 下拉菜单](https://stackoverflow.com/questions/9051200/twitter-bootstrap-dropdown-menu)

[Twitter Bootstrap 2 下拉菜单不起作用](https://stackoverflow.com/questions/9334205/twitter-bootstrap-2-drop-down-menu-is-not-work)

所有人似乎都强调在引导之前导入 jquery 的重要性，所以我已经这样做了，但这似乎并没有解决我的问题。这是显示的内容：http: [//imgur.com/UtYlUXG](https://imgur.com/UtYlUXG)

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>KTown Car Share</title>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="http://flip.hr/css/bootstrap.min.css"> </script>   

    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.dropdown-toggle').dropdown();
        });
    </script>

    <link rel="stylesheet" href="http://flip.hr/css/bootstrap.min.css">
    <style type="text/css">
    body{
        padding-top: 60px;
        padding-bottom: 40px;
    }
    </style>
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
    <link rel="stylesheet" href="css/style.css"> 
</head>

<body>
    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="#">Title</a>
            <ul class="nav">
                <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Account <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    Item1
                    </ul>
                </li>
            </ul>
            <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#">Link</a></li>
                <li><a href="#">Link</a></li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

非常感激任何的帮助！我不知道该尝试什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:40:46.250

我将您的 html 和 javascript 复制粘贴到 jsfiddle 及其工作 [http://jsfiddle.net/daJT7/3/](http://jsfiddle.net/daJT7/3/)

我复制的部分：

```
$(document).ready(function () {
        $('.dropdown-toggle').dropdown();
    });

<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Title</a>
        <ul class="nav">
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"> Account <b class="caret"></b></a>
                <ul class="dropdown-menu">
                Item1
                </ul>
            </li>
        </ul>
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div>
</div> 
```

所以我认为这一定与你的参考有关。我确实注意到的一件事是

```
<script src="http://flip.hr/css/bootstrap.min.css"> </script> 
```

无效（脚本用于脚本，并且您已经在不同的行上导入引导 css）。删除这个。这可能会或可能不会导致问题。

作为旁注。我不会直接链接到 twitter bootstrap github 或其他人的网站（除非 Flip.hr 是您的网站 :)）。
尝试使用 CDN（例如[http://www.bootstrapcdn.com/](http://www.bootstrapcdn.com/)）

# qt - 自定义形状的 QWidget 和 setmask

> ID：15454497
> 
> 赞同：1
> 
> 时间：2013-03-16T20:42:00.083
> 
> 标签：qt, user-interface, qwidget

我想创建自定义形状的 qwidget。我正在使用 MDI，并希望在 mdiarea 内创建选项卡形状的小部件（小部件看起来像选项卡，但具有类似窗口的功能）。我绘制了用于遮罩小部件的 .png 文件，因此小部件看起来像我绘制的那样，但问题是当我调整小部件的大小时，为了保持形状我还调整了生成遮罩的 QPixmap 的大小。并导致其静止图像退化。

我能以某种方式纠正这个吗？或者至少标记我想要遮罩的小部件区域？（所以我可以只在宽度上退化，而不是宽度和高度）。

# unicode - 我用于复制文件的 Windows 批处理脚本不起作用，为什么？

> ID：15454501
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:42:15.277
> 
> 标签：unicode, utf-8, batch-file, cmd, backup

我只想要一个简单的脚本来使用任务计划程序备份一些文件，但是在批处理文件中复制是行不通的。

我想要这样的东西：

```
chcp 65001
set destination=e:\backup\utorrent\%date%backup\
mkdir "%destination%"
copy "d:\Programok\utorrent\aktuális\*.dat" "%destination%" 
```

但即使这样也不能批量工作，但是当我在 cmd 窗口中手动输入命令时可以工作。

```
chcp 65001
set destination=e:\backup\utorrent\%date%backup
mkdir "%destination%"
copy "d:\Programok\utorrent\aktuális\settings.dat" "%destination%\settings.dat" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:07:19.440

不要使用 Unicode，使用[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)编码：

```
chcp 1252
set destination=e:\backup\utorrent\%date%backup\
mkdir "%destination%"
copy "d:\Programok\utorrent\aktuális\*.dat" "%destination%" 
```

# tfs - 向现有 TFS 工作项添加字段？

> ID：15454507
> 
> 赞同：1
> 
> 时间：2013-03-16T20:42:52.807
> 
> 标签：tfs, workitem, tfs-workitem, tfs-power-tools

我需要向现有团队项目中的工作项类型添加一些字段，以支持与其他工具集的集成。但是，在使用[Team Foundation Power Tools](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f) Process Editor 在我的工作项类型定义中添加这些字段并按照[此处详述的说明进行操作](http://msdn.microsoft.com/en-us/library/vstudio/hh409273.aspx)后，工单仍然不包含此字段。相反，它只是使用此字段创建的新工单。

是否可以向现有 TFS 工作项添加字段，而不仅仅是为未来的工作项更新工作项类型定义？

我们正在使用 Visual Studio 2012 和 Tfs 2012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:00:41.433

好像这个问题是无效的；添加字段后，现有工作项确实会使用新字段进行更新。但是，需要重新启动 Visual Studio 才能看到现有工单上的字段，而新工单会立即显示该字段。这可能会导致用户（我）对系统状态感到困惑。

# c - 将元素插入排序数组

> ID：15454511
> 
> 赞同：0
> 
> 时间：2013-03-16T20:43:26.263
> 
> 标签：c, arrays, sorting

我有一个排序，我需要插入元素并将其排序到后续的`binary-search`es 调用。我应该使用什么算法？或者这可能是一个过早的优化，我应该只插入元素并调用 shell-sort（我将实现作为当前的替换）？

如果此信息有用：元素的数量可能真的很大。它确实是可变的，可以容纳 1 到 10 甚至 1 到 1000+ 个元素。如果你好奇为什么这个变量太多，我正在写一个解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:06:16.197

如果数组的大小不能容纳更多条目，则需要分配另一个更大的数组，将所有条目移动到新条目所在的位置，将条目放在那里，最后将剩余条目移动一个位置比他们。之后，您可以释放旧的和现在太小的阵列并保留新的阵列。你可以使用`memmove`或`memcpy`去做。

这样做，当您需要分配一个新的更大的数组时，您应该分配比您立即需要的更大的数组（内存页面大小的倍数会很好），否则所有分配和释放的成本都会很高。

例子：

```
int *array[] = malloc(3*sizeof(int));
array[0] = 0;
array[1] = 2;
array[2] = 3;

// To insert 1 for example you will have to do...
int *new_array[] = malloc(4*sizeof(int)); // Just for the example I make a tight fit, on the code you should allocate it a bit bigger if you expect more inserts to avoid unnecessary mallocs and frees

memmove(new_array,array,sizeof(int)); // Moving the 0
new_array[1] = 1; // Inserting the new element
memmove(new_array[2],array[1],2*sizeof(int)); // Moving the 2 and 3

free(array); // Get rid of the old array
array = new_array;
new_array = NULL; 
```

# c - 在 PIC18F 中实现定时器以生成随机数

> ID：15454512
> 
> 赞同：0
> 
> 时间：2013-03-16T20:43:27.343
> 
> 标签：c, timer, pic, pic18

自从我在这里没有发布任何内容以来已经有很多时间了。今天我来这里寻求帮助，以在 PIC18F 微控制器中实现定时器。我希望这个计时器用于将它用作 srand() 函数的种子......但是在这里搜索了很多之后我找不到解决这个问题的方法。

请你帮帮我。

来自新手的感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:52:43.293

你似乎不需要一个非常复杂的东西。没有中断等。启动一个计时器，并在任意代码点读取计时器值，然后将其输入 srand。

```
 srand(aTimeFunctionYouWrite()); // random seed USE ONCE... 
```

现在您的 rand() 访问是随机的。

在 C18 的外设库中，您可以找到所需的函数和定义。您可以通过

```
 #include <timers.h> 
```

并查看 doc 文件夹以获取文档。

# jquery - 如何检查两个元素是否可见jquery？

> ID：15454513
> 
> 赞同：3
> 
> 时间：2013-03-16T20:43:28.810
> 
> 标签：jquery, element, operator-keyword, visible

如何检查两个元素是否可见，我在下面尝试过，但它不起作用..为什么？我试过这个。但它不起作用，如何设置它的正确方法？

```
if($("#about")&&("#info").is(":visible")){
//Some action here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:45:14.610

你错过了一件小事

```
if($("#about").is(":visible")&&$("#info").is(":visible")){
//Some action here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T20:46:04.613

返回一个对象，该`$("#about")`对象被`if`语句认为是真的。而是使用这个：

```
if( $("#about").is(":visible") && $("#info").is(":visible") ) {
  //Some action here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:50:49.370

您可以将选择器组合成一条语句：

```
if($('#about,#info').is(':visible')) {
     // when both are visible
} 
```

# c - Eclipse C printf() 失败

> ID：15454514
> 
> 赞同：4
> 
> 时间：2013-03-16T20:43:30.493
> 
> 标签：c, eclipse, printf

我刚刚为 c++ 安装了 Eclipse，但该`printf()`功能有问题。我的代码应该从打印“给出数字”开始，但事实并非如此。如果我输入 4，这就是我得到的：

```
4

给个号码：

我是1号

我是2号

我是3号

我是4号

```

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int n=0,i;
    printf("Give the number:\n");
    scanf("%d", &n);
    for(i=1;i<=n;i++)
        printf("I am number %d\n",i);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:26:02.380

[有三种不同的缓冲策略：](http://www.aquaphoenix.com/ref/gnu_c_library/libc_119.html)

*   写入或读取无缓冲流的字符会尽快单独传输到文件或从文件中传输。

*   当遇到换行符时，写入或读取行缓冲流的字符会以块的形式传输到文件或从文件中读取。

*   写入或读取完全缓冲流的字符以任意大小的块传输到文件或从文件传输。

正如 Daniel Fischer 和 Jonathan Leffler 指出的那样，您的终端最初似乎是完全缓冲的，这意味着您必须使用`fflush(stdout);`将流传输到终端或使用`setvbuf(stdout, 0, _IOLBF, 0);`.

# html - 对齐 div 文本和 div 背景图像/div 图像对吗？

> ID：15454515
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:43:31.550
> 
> 标签：html, css

嗨，我想知道是否可以将 div 内的文本和图像向右对齐？因为 div 中的文本会更改并读出我网站上每个成员个人资料名称的名称，所以当我尝试这样做时，文本与图像重叠？

```
.prof-content-box-left-lower {
    /* [disabled]height: 200px; */
    /* [disabled]position: relative; */
    margin-top: 25px;
    margin-bottom: 5px;
    margin-right: 18px;
    width: 200px;
    position:relative;
    float:right;
    text-align:right;
    z-index:90; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:56:40.913

我想你可能只是想让图像正确浮动。请参阅此示例中图像标签上的内联 CSS。

```
 <html>
    <head>
        <style>
            .prof-content-box-left-lower {
                /* [disabled]height: 200px; */
                /* [disabled]position: relative; */
                margin-top: 25px;
                margin-bottom: 5px;
                margin-right: 18px;
                width: 200px;
                position:relative;
                text-align:right;
                z-index:90;
                background: #CCCCCC;
            }
        </style>
    </head>
    <body>
        <div class = "prof-content-box-left-lower">
            <img src = "http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" style = "float: right" width = 100 height = 100>
            my example text
            <div style = "clear: both"></div> <!-- this line clears the float so you can stack these divs, which I expect you probably will-->
        </div>
        <div class = "prof-content-box-left-lower">
            <img src = "http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" style = "float: right" width = 100 height = 100>
            my example text
            <div style = "clear: both"></div>
        </div>
    </body>
</html> 
```

# c++ - 版本号、次要号和发布号之间的区别

> ID：15454516
> 
> 赞同：0
> 
> 时间：2013-03-16T20:43:37.060
> 
> 标签：c++, c, linux, shared-libraries

我正在阅读[http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html](http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)我有一些问题。

版本号、次要版本号和发布号之间有什么区别？“每当界面更改时版本号都会增加”部分是什么意思？

> soname 具有前缀`lib`、库的名称、短语`.so`，后跟一个句点和一个版本号，该版本号在接口更改时递增。
> 
> 真实姓名在 soname 中添加句号、次要编号、另一个句号和版本号。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T20:56:40.333

每次发布库时，它都应该有不同的版本号。但是，某些版本仅对库的内部工作进行更改，而不会影响用户，除了修复错误。其他版本也可能会向库中添加新功能，但所有现有功能的接口细节与以前相同，因此使用旧版本库编写的软件将继续使用新版本。其他更改可能会破坏向后兼容性；一个函数接口改变，一个结构改变大小，或者一个函数被删除（或者一个全局变量——消除思想——改变，等等）。

“仅修复错误”版本可能不会为库重新编号而烦恼，但如果您以前有`liberror.so.1.0.2`，新版本可能是`liberror.so.1.0.3`，版本号的更改。

“附加功能”版本应该被赋予一个新的次要编号，因此之后的新版本`liberror.so.1.0.2`可能是`liberror.so.1.1.0`.

如果你破坏了兼容性，那么你使用一个新的版本号，所以之后的新版本`liberror.so.1.0.2`可能是`liberror.so.2.0.0`.

为使用而构建的代码`liberror.so.1.0.2`可以并且将使用`liberror.so.1.0.3`或`liberror-1.1.0`没有问题，但不会尝试使用`liberror.so.2.0.0`或更高版本。

* * *

> 什么代码（例如在 GNU binutils 堆栈中）控制将链接到哪些版本，这种行为是固定的还是可覆盖的？

好问题。 *这是我的理解，但我可能有一些细节错误（在这种情况下，有人可能会指出我的方式错误）。上面的理论很好很简单；这不太容易。*

您可能已经注意到，有库的“开发”包以及库的“标准”版本。它们之间的差异是解释的一部分。

如果您是一个普通的最终用户，他不使用库编写程序，而只是运行其他人编写的程序，那么您通常会在安装目录中得到一个文件和一个符号链接。继续假设的`liberror.so.1.0.2`示例（安装在 中`/usr/local/lib`），您会在基本版本中找到：

```
liberror.so.1.0.2   — the real shared object
liberror.so.1       — symlink to the the real shared object 
```

如果您安装了开发版，您可能会在 中找到一些头文件`/usr/local/include`、一些手册页（可能在 中`/usr/local/man`，也可能在中`/usr/share`），以及一个额外的符号链接：

```
liberror.so         — another symlink, either to liberror.so.1 or to liberror.so.1.0.2 
```

编译使用它的程序时，您可以指定：

```
gcc -I/usr/local/include usererror.c -o usererror -L/usr/local/lib -lerror 
```

这将与 name 链接`liberror.so`，但从`liberror.so.1.0.2`文件中读取元数据，它会知道要使用的版本是`liberror.so.1.0.2`或更高版本（但不是`liberror.so.2.0.0`或更高版本）。

现在让我们假设您将安装升级到`liberror.so.2.0.0`. 您现在有文件：

```
liberror.so.1.0.2   — the real shared object
liberror.so.1       — symlink to the the real shared object
liberror.so.2.0.0   — the real shared object
liberror.so.2       — symlink to the the real shared object
liberror.so         — another symlink, either to liberror.so.2 or to liberror.so.2.0.0 
```

为使用而构建的旧代码`liberror.so.1`仍然使用该库运行。为使用而构建的新代码`liberror.so.2`也使用新库运行。在链接时，新程序`liberror.so.2.0.0`通过 symlink 获取`liberror.so`。

您可以控制它，以便系统上的默认设置仍然是`liberror.so.1`通过将`liberror.so`符号链接调整为指向`liberror.so.1.0.2`. 唯一棘手的部分是确保头文件的正确版本可用于编译。使用标头构建`liberror.so.2`和链接是一个坏主意，`liberror.so.1`因为您肯定知道的一件事是接口是不同的！

* * *

来自 Red Hat Enterprise Linux 5 (RHEL5) x86_64 机器的一些原始数据。

```
$ cd /lib64
$ ls libc*
-rwxr-xr-x 1 root root 1713088 2009-01-05 16:32 libc-2.5.so
lrwxrwxrwx 1 root root      11 2012-02-22 15:05 libcap.so -> libcap.so.1
lrwxrwxrwx 1 root root      14 2012-02-22 15:05 libcap.so.1 -> libcap.so.1.10
-rwxr-xr-x 1 root root   17384 2006-11-14 01:36 libcap.so.1.10
-rwxr-xr-x 1 root root  197744 2009-01-05 16:32 libcidn-2.5.so
lrwxrwxrwx 1 root root      14 2012-02-22 15:05 libcidn.so.1 -> libcidn-2.5.so
lrwxrwxrwx 1 root root      17 2012-02-22 15:05 libcom_err.so.2 -> libcom_err.so.2.1
-rwxr-xr-x 1 root root   10000 2008-09-30 13:27 libcom_err.so.2.1
-rwxr-xr-x 1 root root   48600 2009-01-05 16:32 libcrypt-2.5.so
-rwxr-xr-x 1 root root 1048728 2005-10-31 06:47 libcrypto.so.0.9.6b
-rwxr-xr-x 1 root root 1365504 2008-12-16 08:09 libcrypto.so.0.9.8e
lrwxrwxrwx 1 root root      19 2012-02-22 15:05 libcrypto.so.2 -> libcrypto.so.0.9.6b
lrwxrwxrwx 1 root root      19 2012-02-22 15:05 libcrypto.so.4 -> libcrypto.so.0.9.8e
lrwxrwxrwx 1 root root      19 2012-02-22 15:05 libcrypto.so.6 -> libcrypto.so.0.9.8e
lrwxrwxrwx 1 root root      15 2012-02-22 15:05 libcrypt.so.1 -> libcrypt-2.5.so
lrwxrwxrwx 1 root root      11 2012-02-22 15:05 libc.so.6 -> libc-2.5.so
$ 
```

您可以看到`libc.so.6`是指向 的符号链接`libc-2.5.so`。您还可以使用多个版本`libcrypto`，不包括链接时库`libcrypto.so`。您还可以看到只有版本号等两个部分的库。表示的库是`libc`、`libcap`、`libcidn`、`libcom_err`和。`libcrypt``libcrypto`

# python - Python mysql错误架构mac os 10.8.3

> ID：15454517
> 
> 赞同：0
> 
> 时间：2013-03-16T20:44:03.490
> 
> 标签：python, mysql, macos

为什么mysql python没有运行？

```
sudo ARCHFLAGS="-arch i386 -arch x86_64" python setup.py build
sudo ARCHFLAGS="-arch i386 -arch x86_64" python setup.py install 
```

*安装好*

用python输出：

```
import MySQLdb
/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-intel.egg/_mysql.py:3: UserWarning: Module _mysql was already imported from /Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.5-intel.egg/_mysql.pyc, but /Users/kal1sha/Downloads/MySQL-python-1.2.3 is being added to sys.path
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "MySQLdb/__init__.py", line 19, in <module>
    import _mysql
  File "build/bdist.macosx-10.5-intel/egg/_mysql.py", line 7, in <module>
  File "build/bdist.macosx-10.5-intel/egg/_mysql.py", line 6, in __bootstrap__
ImportError: dlopen(/Users/kal1sha/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.5-intel.egg-tmp/_mysql.so, 2): no suitable image found.  Did find:
    /Users/kal1sha/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.5-intel.egg-tmp/_mysql.so: mach-o, but wrong architecture 
```

# ruby-on-rails - 在 rails_admin 的视图中显示模型关联

> ID：15454520
> 
> 赞同：2
> 
> 时间：2013-03-16T20:44:18.090
> 
> 标签：ruby-on-rails, rails-admin

默认情况下，我的模型关联显示在 rails_admin 的“添加新”选项卡中。但是，如果我修改 rails_admin.rb 文件并使用 config.model 自定义视图中出现的字段，它显然会将其从视图中删除。

在我的示例中，我有一个客户和一个用户。

用户.rb

```
class User < ActiveRecord::Base
   devise :database_authenticatable, :registerable,
      :recoverable, :rememberable, :trackable, :validatable

   # Setup accessible (or protected) attributes for your model
   attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :role,     :company, :customer_id

   belongs_to :customer
end 
```

客户.rb

```
class Customer < ActiveRecord::Base
  attr_accessible :city, :name, :state, :street, :zip, :container_id, :user_id

  has_many :users
end 
```

所以现在如果我登录到 rails_admin 仪表板并去添加一个新用户，我有一个下拉选项来选择一个客户，一个按钮来添加一个新客户，一个按钮来编辑一个客户。但是，一旦我在 rails_admin.rb 中添加了我的 config.model。

rails_admin.rb

```
config.model 'User' do
      list do
         field :name do
            label "Name"
         end
         field :email do
            label "Email"
         end
         field :company do
            label "Company"
     end
     field :role do
        label "Role"
     end
  end
  edit do
     field :name do
        label "Name"
     end
     field :email do
        label "Email"
     end
     field :company do
        label "Company"
     end
     field :role do
        label "Role"
     end
     field :role, :enum do
        enum do
           ['1a', '1b', '2a', '2b', '3a', '3b', '4a', '4b', '5']
        end
        label "Role"
     end
  end
  create do
     field :name do
        label "Name"
     end
     field :email do
        label "Email"
        help "The email address will serve as the username."
     end
     field :password do
        label "Password"
     end
     field :password_confirmation do
        label "Password Confirmation"
        help "Required"
     end
     field :company do
        label "Company"
     end
     field :role, :enum do
        enum do
           ['1a', '1b', '2a', '2b', '3a', '3b', '4a', '4b', '5']
        end
        label "Role"
     end
     end
   end 
```

当我想添加用户时，这将覆盖我拥有的关联字段。我的问题是我应该在 rails_admin 中使用什么语法来明确告诉 rails_admin 配置，当我在 rails_admin 中添加用户时，我希望显示模型关联。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T06:53:53.160

在您的`rails_admin.rb`文件中，您的自定义配置块在哪里，您只需要像这样声明关联：

```
config.model 'User' do
  configure :customer, :belongs_to_association
...
... 
```

并使用上面的键作为字段名：

```
edit do
  field :customer do
    label "Customer"
  end
end 
```

# java - SIP Mobicents - 如何在现有对话框中创建新请求？（相同的呼叫 ID）

> ID：15454522
> 
> 赞同：1
> 
> 时间：2013-03-16T20:44:32.130
> 
> 标签：java, sip

我目前正在开发一个带有 sip 的通信系统，使用 mobicents（tomcat 上的 sip-servlet 实现）作为基础。我尝试实现一个通知服务，UA 可以不时通过通知订阅获取状态信息。正如我在 RFC3265-“特定事件通知”中读到的，订阅的通知消息必须具有相同的呼叫 ID，因为它们属于订阅对话。

问题：现在我在创建具有相同 Call-ID 的 NOTIFY 时遇到了问题，因为我不知道如何告诉 servlet-container 新请求属于当前对话框。这是我尝试测试的内容：

```
public void doSubscribe(SipServletRequest request){
    try{
        //Get Session
        SipApplicationSession session = request.getApplicationSession();

        //Send response
        SipServletResponse response = request.createResponse(SipServletResponse.SC_OK);
        response.setExpires(600);
        response.setHeader("Event", "buddylist");
        response.send();

        //Send notify (same call-id!!!)
        Address serverAddress = this.sipFactory.createAddress("sip:server@test.com");
        SipServletRequest newRequest  = sipFactory.createRequest(session, "NOTIFY", serverAddress, request.getFrom());
        newRequest.setHeader("Subscription-State", "active;expires=600");
        newRequest.setHeader("Event", "buddylist");
        newRequest.send();
    } catch(Exception e){
        e.printStackTrace();
    }       
} 
```

我认为添加相同的会话可以完成这项工作，但事实并非如此。有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:59:30.363

这花了相当长的时间，但我自己想通了。似乎我误解了通过 SipFactory 结合 SipApplicationSession 创建新请求。

我目前的观点（希望这次是正确的）： SipFactory 用于为一个完整的新 Dialog 创建初始请求，并且仅用于新 Dialogs。而 SipApplicationSession 只是一个容器，它为每个新会话存储会话对象。这意味着，上面的代码在 SipApplicationSession-Container 中创建了第二个 SipSession，它独立于由传入的 SUBSCRIBE-Request 创建的 SipSession！要在现有对话框中创建请求，您必须使用 SipSession-Object 本身：

```
 public void doSubscribe(SipServletRequest request){
        try{
            //Get !!!SipSession
            SipSession sipSession = request.getSession();

            //Send response
            SipServletResponse response = request.createResponse(SipServletResponse.SC_OK);
            response.setExpires(600);
            response.setHeader("Event", "buddylist");
            response.send();

            //Send notify (same call-id!!!)
            SipServletRequest newRequest  = sipSession.createRequest("NOTIFY");
            newRequest.setHeader("Subscription-State", "active;expires=600");
            newRequest.setHeader("Event", "buddylist");
            newRequest.send();
         } catch(Exception e){
            e.printStackTrace();
         }       
   } 
```

最终解决方案很简单。但是很少有示例或文档可以帮助您理解此类内容。因此，我希望这可以帮助每个和我面临同样问题的人。

# xpages - 在页面上启用了修改标志的 xPages 扩展库名称选择器

> ID：15454524
> 
> 赞同：0
> 
> 时间：2013-03-16T20:44:42.363
> 
> 标签：xpages, xpages-extlib

我正在使用 Domino 8.5.2 和 xpages 的扩展库。我在页面上启用了修改标志并在 IE8 上遇到错误。当我在 IE8 中加载页面，修改另一个字段，然后尝试使用名称选择器控件时，我收到一个 IE 错误，浏览器认为我要打开另一个页面而不保存数据“你确定要离开页面，等等等等”。我在这里遗漏了什么，还是扩展库不尊重修改后的标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:02:11.677

正如重复的帖子所暗示的那样：更新到几天后（3 月 21 日）可用的 Domino 9.0。

对于一般的 XPages，我建议您从 8.5.2 升级，因为 8.5.3 和 9.0 包含对 XPages 的许多改进。

# ios - iOS：识别虚拟内存分配的来源

> ID：15454526
> 
> 赞同：2
> 
> 时间：2013-03-16T20:44:50.193
> 
> 标签：ios, memory-leaks

使用 VM Tracker 工具，我发现我的 iOS 应用程序上的虚拟内存使用量不断增长。正在增长的分配不会出现在常规分配工具中，我想知道确定它们来自哪里的过程是什么。正在增长的类别是 VM_ALLOCATE。

我在 vm_allocate 上放置了一个符号断点，以捕获我看到的特定大小的分配在仪器中泄漏（使用寄存器 $r2 作为大小参数）。但是，在应用程序的整个生命周期中，我只看到少数 4k 分配（来自调试 NSLog 调用），并且仪器中没有报告 1+ MB 分配。

我用来打破仪器中 VM_ALLOCATE 下报告的所有分配的方法是否正确？有什么想法我可以尝试确定不断增长的分配的来源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T00:47:48.067

在 mach_vm_map 上放置一个符号断点。这会让你得到更多，但也许不是全部。

另请参阅[http://www.opensource.apple.com/source/Libc/Libc-825.40.1/gen/magazine_malloc.c](http://www.opensource.apple.com/source/Libc/Libc-825.40.1/gen/magazine_malloc.c)

另一种可能性是紧邻的 VM 分配显示在合并到单个块中的仪器中。换句话说，Instruments 所显示的单个大分配实际上可能由许多相邻的小分配组成。不过，我还没有验证这一点。

# jquery - 我图中的额外空间

> ID：15454527
> 
> 赞同：0
> 
> 时间：2013-03-16T20:44:53.313
> 
> 标签：jquery, html, css, space

我在这里遇到了一个问题，我创建了一个比例为 10/1 的图形，它应该与我的 img 完全相同的空间（谁的实际大小是 4000*/400* 因此也是 10/1 的比例）但我有一个额外的空间突然冒出来。

你知道它来自哪里吗？

这是我的代码：http: [//jsfiddle.net/2drYk/21/](http://jsfiddle.net/2drYk/21/)

```
<figure class="container">                  
    <img class="content" src="http://img7.imageshack.us/img7/6766/sampes.jpg" alt="sample" />
</figure>

* 
{
margin:0; 
padding:0; 
border:0
}

.container
{
    width:100%;
    background:black;
    overflow:hidden;    
}
.content
{
    width:100%
}

var $cont = $('.container .content'),
    init_size = $cont.width()*0.1,
    c =0,
    s = [400,init_size];

$cont.height( init_size );

$cont.click(function(){   
  $(this).stop().animate({height: s[c++%2] });
}); 
```

编辑：似乎问题来自我在 jquery 中调用 2 类的事实，但我仍然不知道为什么，比例仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:27:09.923

默认情况下，图像是内联显示的，并且为每个行高的字符下降保留空间。

[http://jsfiddle.net/2drYk/22/](http://jsfiddle.net/2drYk/22/)

```
.content {
    display: block;
} 
```

# java - 如何随机化输出

> ID：15454537
> 
> 赞同：0
> 
> 时间：2013-03-16T20:46:01.333
> 
> 标签：java, random, arraylist, output, println

假设我有 3 个输出：

```
System.out.println("output 1");
System.out.println("output 2");
System.out.println("output 3"); 
```

我将如何使它只打印一个输出，而每次打印的输出都是随机的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:48:21.250

```
// Collect all the possible outputs.
String[] outputs = new String[] { "output 1", "output 2", "output 3" };
// Use the core library class java.util.Random to get a source of pseudo-randomness.
Random random = new Random();
// Pick one and print it.
System.out.println(outputs[random.nextInt(outputs.length)]); 
```

[`nextInt`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)返回一个伪随机数，均匀分布在 0 及其参数 - 1 之间。

由于`Random`是伪随机的，如果您需要即使观察到您的许多随机选择的人也无法猜测输出，请`SecureRandom`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T20:51:08.977

您可以使用 Math.random() 来完成此操作。

首先，生成一个介于 0 和 3 之间的随机数：

```
int randomNum = (int)Math.random() * 3; 
```

接下来，使用 if-else 语句来选择要打印的语句：

```
if(randomNum == 0)
   //print case 1
else if(randomNum == 1)
   //print case 2
else //print case 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T20:47:26.830

将要打印的字符串放入`String`数组中，然后生成不超过该数组大小的随机数。在生成的索引处打印`String`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T20:47:32.303

您可以使用`java.util.Random`该类生成一个随机数`int`，然后只需使用一个简单的`if`语句来打印相应的输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T20:48:25.820

最简单的方法可能是创建一个随机整数并使用 switch 语句和 case 来选择每个输出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T20:51:20.237

这是一个简单的实现：

```
String[] str = { "Output1", "Output2", "Output3" };
Random r = new Random();
System.out.println(str[r.nextInt(3)]); 
```

# google-contacts-api - 使用 google api javascript 客户端访问 google 联系人 - 如何？

> ID：15454540
> 
> 赞同：5
> 
> 时间：2013-03-16T20:46:24.813
> 
> 标签：google-contacts-api, google-api-js-client

我正在实现基于 google api javascript 库的仅限客户端的 webapp。不幸的是，这个库不支持联系人。或者是吗？它是一个未记录的功能吗？如果没有，是否有另一种访问联系人的工作方式？例如，使用已弃用的 gdata api？我已经在 stackoverflow 上找到了一些关于这个主题的答案。但他们都没有给我一个明确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T19:23:37.690

由于我只需要读取权限，因此我决定使用 jsonp 来访问联系人。否则，我需要使用已弃用的附加库和已弃用的 api 版本（因为 gdata 客户端库不支持联系人 api 版本 3）。

因为我已经有了访问令牌，所以很容易获得联系数据：

```
http.jsonp(https://www.google.com/m8/feeds/contacts/someone@gmail.com/full?access_token=xyz&alt=json&callback=JSON_CALLBACK")
  .success(function(data, status, headers, config) { ...})
  .error(function(data, status, headers, config) {...}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T23:25:52.520

[这个 API](https://developers.google.com/google-apps/contacts/v3/)是否符合您的需求？看起来它使用 HTTP 请求和 XML - 不完全是 Javascript，但可以使用 AJAX 在 Javascript/jQuery 中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:28:24.523

使用已弃用的[GData 客户端库](https://code.google.com/p/gdata-javascript-client/)访问[Contacts V3 API](https://developers.google.com/google-apps/contacts/v3/)并使用官方的[Google APIs JS Client](https://devsite.googleplex.com/api-client-library/javascript/)没有问题。您将无法获得对 GData 库的任何官方支持。

否则，根据您的用例，[Google+ API](https://developers.google.com/+/api/)与官方 JS 客户端兼容并且可能满足您的需求。

# javascript - 如何为 YouTube 视频手动输入的 iframe 捕获 OnStateChange 事件

> ID：15454541
> 
> 赞同：0
> 
> 时间：2013-03-16T20:47:00.490
> 
> 标签：javascript, iframe, youtube

我需要能够捕获作为手动输入的 iframe（不是通过 javascript 构建）存在的 youtube 视频的 onstatechange 事件，但不幸的是，我不知道该怎么做，甚至不知道它是否可能。查看 YouTube 文档，当您通过 JS 创建播放器时，有很多连接事件处理程序的示例，但我似乎找不到为预先存在的 iframe 执行此操作的方法。我的代码如下：

```
<iframe id="video_player" enablejsapi="1" width="853" height="480" src="http://www.youtube.com/embed/ANYVIDEO rel=0&start=0&end=71" frameborder="0" allowfullscreen></iframe>

<script src="http://www.youtube.com/iframe_api"></script>

<script>
function onYouTubeIframeAPIReady(playerId) {
    player = document.getElementById("video_player");
    player.addEventListener("onStateChange", "video_state_change");
}
function video_state_change(data){
    alert("STATE_CHANGE: " + data);
}
</script> 
```

提前感谢您提供的任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:07:11.130

您可以使用 SWFObject 来集成您的 youtube 播放器。

```
<object type="application/x-shockwave-flash" id="video_player" width="650" height="400" data="//www.youtube.com/v/ANYVID?version=3&amp;enablejsapi=1&amp;"><param name="allowScriptAccess" value="always"></object> 
```

这将允许您使用 JS API。

下一步非常简单。将以下 JavaScript 片段添加到您的 HTML 文件中。

```
// Called automatically as soon as the player loads    
function onYouTubePlayerReady() {
    player = document.getElementById("video_player").get(0);
    player.addEventListener("onStateChange", "video_state_change");
} 
```

# javascript - 多级移动导航

> ID：15454545
> 
> 赞同：1
> 
> 时间：2013-03-16T20:47:20.073
> 
> 标签：javascript, css, mobile, navigation, responsive-design

我正在寻找一种方法来重新创建主导航，就像索尼网站[http://www.sony.com/index.php的移动/响应版本上的导航一样](http://www.sony.com/index.php)

任何人都知道可以实现此目的的任何插件吗？或者甚至设置这种导航的正确名称，以便我可以正确地用谷歌搜索它。我很难找到更多的例子来进一步调查

干杯

# android - 安卓内容提供者；帮助设计可敬的 URI 结构

> ID：15454546
> 
> 赞同：0
> 
> 时间：2013-03-16T20:47:21.180
> 
> 标签：android, rest, uri, android-contentprovider

我正在设计一个 android 应用程序，并想使用 Content Provider 来填充我的列表视图。问题是我需要来自两个不同来源（数据库中的表）的数据：一组静态数据，另一组用于与静态数据相关的用户进度数据。

例如，我得到了一个测验列表，以及每个测验的用户成绩列表。

如果 SimpleCursorArray 采用两个游标，那么我可以使用：

```
/quizzes  
/users/#/quiz_grades 
```

作为两个 URI 并将游标传递给适配器。

但是 SimpleCursorArray 只能使用一个光标，所以我需要加入我拥有的两个表。没问题，但是如何设计一个*干净*的URI？

也许是这样的：

```
/users/#/quizzes 
```

但这感觉不对，因为问题不属于用户......

或者可能：

```
/quizzes/users/# 
```

但同样，用户不属于问题......

另外，有时我需要在没有用户评分的情况下自行检索测验，所以我还需要：

```
/quizzes/# 
```

我知道这是一个非常迂腐的问题，但在我弄清楚这一点之前，我的强迫症本性不会让我满意地进步......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:04:17.547

怎么样`/users/#/quizzes-with-grades`？

# php - 如何从 Codeigniter 上传控制器获取图像名称？

> ID：15454548
> 
> 赞同：1
> 
> 时间：2013-03-16T20:47:25.440
> 
> 标签：php, codeigniter, file-upload

例如，如果我上传文件 foo.png 如何在上传控制器中获取字符串“foo.png”？

控制器代码为：

```
<?php

class Upload extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
        $this->load->database();
    }

    function do_upload($folder)
    {
        $config['upload_path'] = './userdata/'. $folder . '/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());
            echo $this->upload->display_errors();
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
            echo "<p>File sucesfully uploaded</p>";

            $filename = // How do I get the filename here

        }
    }
}
?> 
```

如何设置`$filename`上传文件的文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:15:06.747

来自[官方 CI 手册](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)：

```
$this->upload->data()
This is a helper function that returns an array containing all of the data related to the file you uploaded. Here is the array prototype:
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

所以在你的情况下`$data`，保存函数结果的变量`$this->upload->data()`应该包含你需要的关于你上传的文件的所有信息。

特别`$data['upload_data']['file_name']`是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T03:58:28.347

试试这个！

```
$data = $this->upload->data();
echo $data['file_name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T21:12:00.717

```
echo $data['raw_name'].$data['file_ext']; 
```

应该做的伎俩

例如你上传你的图片

```
if($this->upload->do_upload('upload_data')) {
$data = $this->upload->data();
echo $data['raw_name'].$data['file_ext'];
} 
```

# python - 将类实例记录为函数

> ID：15454551
> 
> 赞同：0
> 
> 时间：2013-03-16T20:47:33.810
> 
> 标签：python, python-sphinx, autodoc

当使用 sphinx`autodoc`扩展创建文档时，我如何记录一个类实例（而不是类本身），就好像它是一个函数一样？类`__call__`定义了一个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:44:43.507

可以使用 sphinx 扩展来解决问题。对我来说，以下就足够了：

1.  在`conf.py`：

    1.  `sys.path`在中添加适当的路径`conf.py`
    2.  替换为列表中`sphinx.ext.autodoc`的新模块名称`extensions`
2.  在新模块中：

    1.  进口`sphinx.ext.autodoc`
    2.  创建一个子类`.autodoc.FunctionDocumenter`
    3.  创建调用然后调用`setup(app)`的函数`.autodoc.setup()``app.add_autodocumenter(SubclassName)`

请注意，这将替换 documenter 的功能，因此您需要使其对它们有用。*可以通过使用唯一*`objtype`字符串定义类常量作为值来避免该问题，但这将需要更多的工作。关心常规功能更容易。

 *如果有人感兴趣，代码就[在这里。](https://github.com/Lokaltog/powerline/blob/83d855d3d73498c47553afeba212415990d95c54/docs/source/powerline_autodoc.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:52:30.993

具体我不熟悉`autodoc`，但你可以试试这个：

```
class MyClass(object):
    ...
    def __call__(self):
        ...

c = MyClass()
"""
this is a function-like object.
"""

c2 = MyClass()
"""
this is another function-like object.
""" 
```

或这个：

```
#: this is a function-like object.
c = MyClass() 
```*

# git - 如何完全清空 Git 中的 master 分支？

> ID：15454555
> 
> 赞同：58
> 
> 时间：2013-03-16T20:47:42.707
> 
> 标签：git, git-branch

我想完全清空 Git 中的 master 分支。现在，我还想保留从 master 分支的所有其他分支。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-16T20:58:11.010

这实际上称为“删除旧的主分支并从头开始创建新的”

这将创建一个指向初始提交的新主分支：

```
git branch -D master
git checkout -b master <initial commit hash> 
```

这将创建一个全新的主分支，与您所拥有的无关：

```
git branch -D master
git checkout --orphan master
git rm -rf * 
```

但实际上您可以简单地将当前存储库保存到其他地方并创建一个新存储库。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-16T21:18:41.680

## 创建孤儿分支

首先，您需要移动或删除当前的 master 分支。就个人而言，我更喜欢将它移到一边而不是删除它。之后，您只需使用该`--orphan`标志创建一个没有父级的新分支。例如：

```
git branch -m master old_master
git checkout --orphan master 
```

由于当前分支现在没有历史记录，因此某些命令可能会失败并出现错误，例如`fatal: bad default revision 'HEAD'`直到您在新的主分支上首次提交之后。这是正常的，与您在新初始化的存储库中看到的行为相同。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-30T12:07:30.677

其他答案建议创建一个新的主分支（就像在空存储库中一样）。但是没有历史的大师不是一个好习惯。这使得使用 rebase 变得很困难，因为你永远不能 rebase 第一次提交。**任何存储库上 master 的第一次提交都应该是空的。**对此有一个低级管道解决方案：

# 修复使用低级管道命令

首先你得到一个空树哈希：

```
$ git hash-object -t tree /dev/null
4b825dc642cb6eb9a060e54bf8d69288fbee4904 
```

然后你使用树哈希创建一个空提交

```
$ git commit-tree -m "inital commit" 4b825dc642cb6eb9a060e54bf8d69288fbee4904
a5c0737b92e5e5d4502e15b93d7a46d1e17b2b22 
```

最后，您将 master 重置为该提交

```
$ git reset --hard a5c0737b92e5e5d4502e15b93d7a46d1e17b2b22 
```

在我的[博文中有进一步的描述](https://blog.tomasfejfar.cz/git-how-to-make-master-empty/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-16T21:01:53.340

您可以尝试将主分支重置为第一个提交，`git checkout master; git reset --hard ${sha-of-first-commit}`然后修改该第一个提交以删除其中的文件。

这应该给你一个原始的 master 分支，并且保持所有其他的不变，但是由于你正在重写历史，所有克隆你的存储库都需要修复。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-29T21:33:56.113

这可能是不好的做法，但在果酱中起作用（建立在 aragaer 的解决方案之上）

```
git branch -D master
git checkout --orphan master
git rm -rf * 
```

在此之后，要从当前正在处理的开发分支将 PR 提交到此分支而不会出现问题，请执行

```
git checkout development-branch-name
git rebase master
git push -f development-branch-name 
```

现在您可以提交 PR from `development-branch-name`into`master`而不会`There isn't anything to compare. Nothing to compare, branches are entirely different commit histories`在 GitHub 上遇到问题。

当我在当前正在进行的项目目录中初始化一个 repo 并希望通过 GitHub UI 对项目目录中的所有代码进行代码审查时，我会使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-16T20:52:50.263

结帐到本地存储库的主分支并删除所有内容怎么样。然后将此分支推送到远程分支（原点）

您是否删除了主分支或分支本身的内容？

# android - 如何让 API 工作？

> ID：15454564
> 
> 赞同：0
> 
> 时间：2013-03-16T20:48:45.120
> 
> 标签：android, json, api, twitter

在遵循在线教程后，我能够从 twitter 为我的 android 应用程序检索一些数据。以下代码有效。我基本上只是想构建一个可以检索数据的应用程序，例如暗黑破坏神 3 字符级别。我该怎么做呢？我想我必须使用这个 URL 来检索数据[http://us.battle.net/api/d3/profile/Fauntleroy-1134/](http://us.battle.net/api/d3/profile/Fauntleroy-1134/)但是我没有运气。

```
public class HttpExample extends Activity {

TextView httpStuff;
HttpClient client;
JSONObject json;

final static String URL = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.httpex);
    httpStuff = (TextView) findViewById(R.id.tvHttp);   
    client = new DefaultHttpClient();
    new Read().execute("created_at");
}

public JSONObject lastTweet(String username) throws ClientProtocolException, IOException, JSONException{
    StringBuilder url = new StringBuilder(URL);
    url.append(username);

    HttpGet get = new HttpGet(url.toString());
    HttpResponse r = client.execute(get);
    int status = r.getStatusLine().getStatusCode();
    if (status == 200){
        HttpEntity e = r.getEntity();
        String data = EntityUtils.toString(e);
        JSONArray timeline = new JSONArray(data);
        JSONObject last = timeline.getJSONObject(0);
        return last;
    }else{
        Toast.makeText(HttpExample.this, "error", Toast.LENGTH_SHORT);
        return null;
    }
}

public class Read extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        try{
            json = lastTweet("");
            return json.getString(params[0]);
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        httpStuff.setText(result);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:08:02.153

您从[此处](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=micheal)检索的数据存储在一个数组中，因此当您解析数据时，

`JSONArray timeline = new JSONArray(data);`

您将获得 JSON**数组**。**Array**
的每个元素都是一个**Object**，因此您可以通过阅读[此处](http://us.battle.net/api/d3/profile/Fauntleroy-1134/)的 json 字符串来获得它，您会注意到该字符串以“{”开头，因此根元素不是 Array 而是 Object。 ****`JSONObject last = timeline.getJSONObject(0);`**** 

 ****您需要更改解析代码，请尝试以下操作：

```
// test json string
String data = "{\"heroes\" : [ {\"name\" : \"UUUGUUUUUUUU\",\"id\" : 92352,\"level\" : 60,\"hardcore\" : false,\"paragonLevel\" : 0,\"gender\" : 0,\"dead\" : false,\"class\" : \"demon-hunter\",\"last-updated\" : 1340492305}, {\"name\" : \"RhubarbVole\",\"id\" : 7531555,\"level\" : 50,\"hardcore\" : false,\"paragonLevel\" : 0,\"gender\" : 1,\"dead\" : false,\"class\" : \"monk\",\"last-updated\" : 1339377909}, {\"name\" : \"VoodooFrodo\",\"id\" : 7698952,\"level\" : 32,\"hardcore\" : false,\"paragonLevel\" : 0,\"gender\" : 0,\"dead\" : false,\"class\" : \"witch-doctor\",\"last-updated\" : 1339376344}, {\"name\" : \"CheeseBird\",\"id\" : 13139301,\"level\" : 7,\"hardcore\" : false,\"paragonLevel\" : 0,\"gender\" : 1,\"dead\" : false,\"class\" : \"wizard\",\"last-updated\" : 1338098485} ]}";

root = new JSONObject(data);
JSONArray heroes = root.getJSONArray("heroes");

List<JSONObject> heroesList = new ArrayList<JSONObject>();

for(int i=0;i<heroes.length();i++){
    JSONObject hero = heroes.getJSONObject(i);          
    heroesList.add(hero);                   
}

//...

JSONObject hero = heroesList.get(x);
int level = hero.getInt("level"); 
```****

# javascript - Dojo 过滤选择 Dijit 克隆

> ID：15454570
> 
> 赞同：2
> 
> 时间：2013-03-16T20:49:26.873
> 
> 标签：javascript, dojo

我正在尝试克隆一个 FilteringSelect 对象并将其放置在一个新的 Dom 节点中。

```
<button data-dojo-type="dijit.form.Button">Add Relation
     <script type="dojo/method" data-dojo-event="onClick" data-dojo-args="evt">
var domConstr = require("dojo/dom-construct"); // get the dom creator
var dom = require("dojo/dom"); // get the dom
var attr = require("dojo/dom-attr");
var lang = require("dojo/_base/lang");  
var node = dijit.byId("far_mt_accountbundle_movementtype_toAccount");
var newnode = lang.clone(node); 
```

**这会导致错误：** Uncaught TypeError: Cannot read property 'store' of undefined

感谢您的任何建议。

# php - PHP脚本不等待代码执行

> ID：15454571
> 
> 赞同：1
> 
> 时间：2013-03-16T20:49:29.993
> 
> 标签：php, redirect, if-statement

当我在没有指定任何 POST 变量的情况下发布到这个脚本时，脚本应该会重定向，但仍然会说。当我把 die(); 在第一个 if 函数之后，页面实际上被重定向了。

```
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$gender = $_POST['gender'];
$dob = $_POST['dob'];
$school = $_POST['school'];
$grade = $_POST['grade'];
$password = $_POST['password'];
$password2 = $_POST['password2'];

$test=FALSE;
 $required = array     ('firstname','lastname','email','phone','gender','dob','school','grade','password','password2');

foreach ($required as $value)
{
if(!isset($_POST[$value]) || empty($_POST[$value]))
{
        $test = TRUE;

}   
}

if($test)
{
header("location:../register.php?error=1");
}

$id = getRand(9);
$conn = getConnection();

$check =      saveUser($firstname,$lastname,$email,$phone,$gender,$dob,$school,$grade,$password,$id,$conn );

if($check)
{
header("location:../quiz.php");
}
else
{
header("location:../register.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:54:23.253

您需要在命令之后设置 a `die()`，`header(...)`否则之后的所有内容都将被执行。像这样做：

```
if($test) {
    header("location:../register.php?error=1");
    die(); // Abort everything else
} 
```

我不明白您的其他问题-您在`if ($test)`? 你能给我样本数据吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:55:56.857

您的`header`命令不会重定向，而只是将位置标头发送到浏览器，脚本会继续运行。（浏览器随后在脚本运行后遵循此位置标头，从而创建重定向。）

但是，如果您在第一个位置标头之后（在同一脚本期间）发送另一个位置标头，则此标头将覆盖第一个标头，然后是唯一发送到浏览器的标头。

您需要`exit`或`die`在 header 命令之后。

# javascript - 如何更改单个图像 onClick？

> ID：15454572
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:49:35.167
> 
> 标签：javascript, jquery, html

我正在开始一个非常基本的站点，并且在导航栏中是一系列图像。我希望每个图像在单击时都更改为该图像的突出显示版本（以指示正在显示哪个 div）。查找更改图像 onClick 的基本方法我找到[了此页面](http://interestingwebs.blogspot.com/2012/09/change-image-onclick-with-javascript.html "这一页")，但我相信这仅适用于一个图像，因为脚本使用单个事件 (changeImage) 会影响页面上的每个图像，即使只有一个他们被点击了。我可以使用什么样的脚本，以便单击一张图像只会切换该一张图像的更改？谢谢，非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:52:55.050

在每个图像上绑定事件并根据单击的图像更改图像

```
$("img:eq(0)").on("click",function(){
    this.src = "newimageurl";
}); 
```

# linux - 如何在 linux 内核中提供 Jasper Forest CPU

> ID：15454574
> 
> 赞同：0
> 
> 时间：2013-03-16T20:49:49.567
> 
> 标签：linux, linux-kernel, linux-device-driver

我有一个 Linux 内核源代码 3.4.28，想知道有没有办法调整这个内核以支持 Intel 的 Jasper Forest CPU。

是否有任何配置文件可以让我调整 Jasper Forest CPU 支持并且编译的内核可以在板上安装 Jasper Forest CPU。

# php - 避免在成绩簿的循环中查询

> ID：15454575
> 
> 赞同：0
> 
> 时间：2013-03-16T20:49:49.993
> 
> 标签：php, mysql, loops

我正在制作成绩册，虽然下面的代码有效，但速度非常慢。表格的第一列是每个学生的姓名，然后每个单元格后面对应一个特定的问题，并显示学生的答案是什么。不是每个学生都会回答给定的问题。

现在我有一个循环，对于每个用户，每个问题在该循环内都有一个循环。

每个问题都有一个唯一的 ID，在单独的表中每个答案都有一个相应的用户 ID 和一个相应的问题 ID。

我一直在寻找类似的帖子，但没有运气，我只使用 php 几个月，所以任何建议都将不胜感激。

问题

| 编号 | 问题 | 选择1 | 选择2 | 选择3 | 选择4 | 正确答案 | 类别 ID |

答案

| 编号 | 问题ID | 用户名 | 学生回答 |

用户

| 编号 | 名字 |

谢谢

```
//Select all questions from a specific category $mid defined by user
    $questionQuery = mysql_query("SELECT * FROM questions WHERE mid = $mid");
    $questionCount = mysql_num_rows($questionQuery);

        //Blank space in table above users
            echo "<tr><td></td>";

            //Question Number, each category has a different number of questions
            for ($q = 0; $q < $questionCount; $q++){
                echo "<td>" . ($q+1) . "</td>";
            }

            echo "</tr>";

    //Select all students for a given teacher
    $userQuery = mysql_query("SELECT * FROM users WHERE teacherId = $userid ORDER BY `block`, `lastName`");
    $userCount = mysql_num_rows($userQuery);

        for($s = 0; $s < $userCount; $s++){
            $currentUserId = mysql_result($userQuery, $s, 0);

                //Echo student's name
                echo "<tr class='user" . ($s%2) ."'><td>" . mysql_result($userQuery, $s, 1) . "</td>";

                //Load current question id
                for ($q = 0; $q < $questionCount; $q++){
                    $questionNum = mysql_result($questionQuery, $q, 0);

                    //Selects students answer from answers database for above question
                    $answerQuery = mysql_query("SElECT * FROM answers WHERE questionId = $questionNum AND userId = $currentUserId");
                    $answerCount = mysql_num_rows($answerQuery);

                        //If no answers move on to next cell
                        if($answerCount == 0){
                            echo "<td></td>";
                        }
                        else{
                            $currentAnswer = mysql_result($answerQuery, 0, 3);
                            $correctAnswer = mysql_result($questionQuery, $q, 6);

                        if ($currentAnswer == $correctAnswer){
                            echo "<td class='right'><div id='parent'>" . $currentAnswer . "</div></td>";
                        }
                        else{
                            echo "<td class='wrong'><div id='parent'>" . $currentAnswer . "</div></td>";
                        }
            }
                   }
                   echo "</tr>";
      } 
```

# c++ - 通过函数中的引用从数组复制到数组

> ID：15454576
> 
> 赞同：0
> 
> 时间：2013-03-16T20:49:52.020
> 
> 标签：c++, string, function, reference, char

我不知道为什么它不起作用。更重要的是，我什至不能说什么是错误；/any1 可以解释什么是错误吗？

该代码应该是：创建一个带有单词 like - mom 的字符串。然后创建二维数组以用字符串填充它。空闲空间用_填充。所以妈妈框=

> [米] [o]
> 
> [米] [_]

现在用来自列的文本填充下一个数组。填充到新数组的 mom_ 看起来像 mmo_。然后我计算出加密文本。我希望你明白我在那里做了什么：D

这是代码

```
//wal = kolumny=wiersze
#include <cstdlib>
#include <iostream>
#include <string>
#include <cstring>
using namespace std;
void pole(int &a,const int &l);
void tab(const char &s[],char &d[], char &f[],const int a);
int main(){
    string code;
    cin >> code;
    int wall=1;
    int d=code.length();
    char tekst[d];   
    pole(wall,d);
    strcpy(tekst,code);
    char kw[wall][wall];
    char szyfr[d];
    tab(tekst,kw,szyfr,wall);   
    for (int i=0;i<d;i++) 
    cout << szyfr[i] << endl;
    system("PAUSE");
    return 0;
}
void pole(int &a,const int &l){
    if (a*a < l)
    pole(a+=1,l);
}
void tab(const char &s[],char &d[], char &f[],const int a){
    int i=0;
    for (int x=0;x<a;x++,i++){
        for (int y=0;y<a;y++,i++){
            if(s[i])
            d[x][y]=s[i];
            else d[x][y]=='_';
            f[i]=d[x][y];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:52:38.510

`d[x][y]`在`tab`d 中没有任何意义是一维数组。您必须将第一个维度作为参数传递并在索引时使用它。就像是：

```
void tab(const char &s[],char* &d, char &f[],const int a, int d_num_cols){
    int i=0;
    for (int x=0;x<a;x++,i++){
        for (int y=0;y<a;y++,i++){
            if(s[i])
            d[x*d_num_cols + y]=s[i];
            else d[x*d_num_cols + y]=='_';
            f[i]=d[x*d_num_cols + y];
        }
    }
} 
```

# multithreading - CreateNamedPipe ERROR_INVALID_NAME

> ID：15454578
> 
> 赞同：2
> 
> 时间：2013-03-16T20:50:16.630
> 
> 标签：multithreading, winapi, visual-c++, named-pipes

代码片段：

```
void RunThread(void* unused_args)
{
    PSECURITY_DESCRIPTOR sdsc;
    ULONG size;
    ConvertStringSecurityDescriptorToSecurityDescriptor("S:(ML;;NW;;;LW)", SDDL_REVISION_1, &sdsc, &size);
    SECURITY_ATTRIBUTES sa;
    sa.nLength = sizeof(sa);
    sa.bInheritHandle = false;
    sa.lpSecurityDescriptor = sdsc;
    HANDLE pipe = CreateNamedPipe("\\.\pipe\mmaivpc_test_pipe", PIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE, 255, 1024, 1024, 0, &sa);
    DWORD error = GetLastError();
} 
```

如果你还没有从函数名中弄清楚，这个函数被`_beginthread`. `GetLastError()`正在返回`ERROR_INVALID_NAME`，我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T20:52:43.570

您需要转义用于管道名称的字符串文字中的反斜杠：

```
HANDLE pipe = CreateNamedPipe("\\\\.\\pipe\\mmaivpc_test_pipe",
                              PIPE_ACCESS_DUPLEX, 
                              PIPE_TYPE_BYTE, 255, 1024, 1024, 0, &sa); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T20:54:21.317

你应该避开你的反斜杠:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:42:28.000

如果您在路径中使用正斜杠 / 您的代码将更具可读性，并且您将避免这样的错误。

似乎没有多少人知道 Windows 同时接受 / 和 \ 作为目录分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:35:46.400

是的，网络共享的方式也一样，例如 \\server1 ，我们必须在 C++ 中表示为 \\\\server1 以转义 '\' 我们必须再使用一个 '\'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T04:05:44.147

将参数 lpName 包装到 TEXT() 中，如下所示：

```
HANDLE pipe = CreateNamedPipe(TEXT("\\\\.\\pipe\\mmaivpc_test_pipe"), PIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE, 255, 1024, 1024, 0, &sa); 
```

并且名称必须是 format `\\\\.\\pipe\\your_pipe_name`。管道名称不区分大小写。

这是一个很好的例子[https://msdn.microsoft.com/en-us/library/windows/desktop/aa365588(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365588(v=vs.85).aspx)

# visual-studio - 符号、视觉工作室、版本和 symchk

> ID：15454579
> 
> 赞同：1
> 
> 时间：2013-03-16T20:50:21.867
> 
> 标签：visual-studio, .net-4.5, debug-symbols

我在 Visual Studio (c#) 中有一个使用 .net 4.5 的项目，我到了需要调试框架源以了解多线程死锁中发生的情况的地步。

我找到了[http://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)，在那里你可以下载调试符号，我看到有一个 .net 4.5 更新 1。好的，所以我在 microsoft.com 上搜索更新，安装它，重新启动电脑，然后安装上述调试符号并配置 Visual Studio 以使用它们。

问题：当我调试我的项目并尝试加载符号（如 mscorlib）时，Visual Studio 说文件夹中没有匹配的符号。
我看到了这个：[如何启用“启用 .NET Framework 源步进”？](https://stackoverflow.com/questions/8139269/how-to-enable-enable-net-framework-source-stepping)，其中据说要卸载 windows 更新，但我只安装了 KB2707250（VS2012 更新 1）、KB2504637（更改 System.Net 程序集）和 KB2750149（.net 4.5 更新 1）——没有其他更新.
因此，程序集报告的版本是 v4.0.30319.18033 和 v4.0.30319.17929，据我了解，它适用于 v4.5 和 v4.5 更新 1。

事实上，我从 referencesource.microsoft.com 下载了 .net 4.5 和 .net 4.5 update 1 的两个调试符号，考虑到我的系统上没有任何相关更新，它们应该对应于已安装的框架。
但显然它仅适用于 18 个引用程序集中的 5 个（不包括项目）。

我如何收集其他信息？
如何让 Visual Studio 和调试符号一起愉快地工作？

最后我可以看到源，这并不复杂，但我不知道字段和属性中有什么值......

更新：
我已经能够获得正确的 pdb ({3303BFEA-79E7-40C2-A2A8-34C1C816E082})，但它仍然缺少源，所以它没用。在这种情况下，Srctool 似乎也没有用。

现在有趣的是：我有源代码和 pdb，但它们似乎不能一起使用。不知道，如果可能的话，也许我会考虑重新编译 mscorlib。-> 不，显然答案是否定的。

# c# - 在 C# Webform 中包含 .SWF 文件

> ID：15454580
> 
> 赞同：0
> 
> 时间：2013-03-16T20:50:35.363
> 
> 标签：c#, asp.net, visual-studio-2010, flash

我目前正在开发一个需要为用户包含应用程序页面的项目。我需要用户通过这个页面访问一些.SWF flash 游戏。我在 Application 中创建了一个名为 applications 的文件夹，并将 .SWF 文件导入其中。之后我尝试使用我页面上的超链接直接链接它们，但它们似乎没有打开：/我错过了什么吗？或者在此之前我还需要做些什么吗？

如果您能提供帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:46:35.680

我认为您不能只超链接到您的 .swf 文件。根据[这个](http://animation.about.com/od/flashanimationtutorials/qt/embedswfwebpage.htm)站点，以及您使用 Dreamweaver 或 FrontPage，您可以从“插入”菜单（或类似的东西）中插入它。如果您不使用这两个中的任何一个，您可以在 Flash 中编辑您的 .swf 文件，然后从文件菜单（或任何位置）中选择“导出为 HTML”，然后将生成的文件的源代码复制到你的网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:00:47.543

通常，您应该能够直接在浏览器中打开 .swf 文件，尽管将 swf 嵌入到您的 html 中通常是个好主意，但您不必这样做。如果您的地址栏中的 url 显示以“.swf”结尾的地址，您可以通过右键单击浏览器窗口来测试是否加载了 swf，如果您看到 flash 上下文菜单（放大、缩小等） 您的 swf已加载。

如果您的 swf 已加载，但没有其他任何反应，则可能有许多其他原因。

swf游戏文件哪里来的？如果您从另一个站点复制它们，则 swf 很可能应该在游戏开始之前加载其他文件（游戏资产（图像）、设置 (xml) 等）。

有时，swf 中（actionscript）代码的执行是由嵌入它的 html 页面中的脚本触发的。

目前尚不清楚您要做什么....

# codeigniter - 如何将选择框变量从 CodeIgniter 中的控制器传递给视图？

> ID：15454583
> 
> 赞同：0
> 
> 时间：2013-03-16T20:50:55.460
> 
> 标签：codeigniter, variables

我想将一个变量（选择框 id，来自数据库）从控制器传递给视图，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:03:32.997

假设您有一个名为**article**的控制器和一个方法**索引**，那么在您的视图中您将拥有：

```
<?php 
echo form_open('article/index');
echo form_input('text');
echo form_close;
?> 
```

在您的控制器中，例如：

```
public function index() 
{
   if($this->input->post()) { 
      $this_is_catched_text = $_POST['text'];
   }
} 
```

这是没有验证和其他东西的。只要你明白它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:48:31.213

您最初的问题不是那么清楚，但是在阅读了评论后，您可以做到这一点。

控制器

```
//whatever function you're using to populate your original array below.
$data['all'] = $this->model_name->getData();
//then run that data through a foreach loop to populate the dropdown variable.
foreach($data['all'])
{
    $data['idDropDown'][$data['all']['id']]=$data['all']['ad'];
} 
```

这将传递一个数组，如： [455]=>Aliağa, [456]=>Balçova 作为 $idDropDown 以及您的原始数据作为 $all

然后在视图中刚刚使用了 CI 的表单下拉菜单。

```
echo form_dropdown('id',$idDropDown); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:57:45.917

在你的情况下，它会是这样的

```
$ilce = array(array("id" => 455, "il_id" => 35,"ad" => "Aliağa"), 
              array("id" => 456, "il_id" => 35, "ad" => "Balçova"));

$options = array();

foreach($ilce as $x) {
    $options[$x['id']] = $x['ad']; 
} 

echo form_dropdown('names', $options); 
```

# php - 运行复杂的 SQL 时，服务器 CPU 百分比非常高

> ID：15454585
> 
> 赞同：2
> 
> 时间：2013-03-16T20:51:13.583
> 
> 标签：php, mysql, performance

我是一名网页设计师，因此对任何缺乏知识表示歉意，并感谢可以提供的任何参考资料。

情况就是这样，我们公司有一系列我们在内部使用的 webapps，它们是用 PHP 和 MySQL 构建的。我们将它们托管在 hostgator 专用服务器（4 核 4GB RAM）上。

最近，管理层希望将服务器搬到离家更近的地方（英国），我们决定购买 Heart Internet[混合服务器](http://www.heartinternet.co.uk/hybrid-servers/)（12 核和 28GB RAM）。

传输已经完成，我们肯定可以看到静态页面和简单查询页面的速度有了很大的提高。

但是，每当尝试访问迭代大量记录（从 10,000 条以上）的页面时，该页面只会加载和加载......在 WHM 中，我们可以在“当前进程”下看到服务器 CPU 失控，从 20% 的低位开始，一直增加到 200%+！

我知道查询的设计并不出色（内部选择使用不当等）我试图在某些情况下通过更好的索引使用来纠正这个问题，并且在某些情况下这提高了性能。但是，由于 Web 应用程序如此庞大，重写糟糕的 SQL 并以这种方式提高性能需要很长时间。

我怀疑这更有可能是服务器配置错误，因为查询确实在我们以前的服务器上工作，但速度有点慢。另一个可能的原因是在以前的服务器上建立了某种缓存，但不在新服务器上，因此自然需要一些时间来“创建”。

下面是挂在新服务器上但未挂在旧服务器上的查询之一的示例（只花了大约 4/5 秒）。

```
SELECT DISTINCT o.order_number, o.customer_id, o.order_date, CONCAT( cd.customer_fname,  ' ', customer_lname ) AS CustomerName, (

SELECT status_id
FROM Order_Tracking
WHERE order_id = o.id
ORDER BY id DESC 
LIMIT 1
)CurrState
FROM Orders o, Customer_Details cd
WHERE o.customer_id = cd.id
AND (

SELECT status_id
FROM Order_Tracking
WHERE order_id = o.id
ORDER BY id DESC 
LIMIT 1
) =1
ORDER BY o.order_number 
```

下面是浏览到上述页面后 5 分钟的 CPU 使用率截图。

![高 CPU 使用率](../Images/c481fdc15a122766b1543ae53316af02.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:05:50.277

在 v.5.6 中，您正在使用 DESC 排序，MySQL 不支持其索引。

[13.1.11。创建索引语法](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)

似乎繁重的 DISTINCT 操作需要一个临时表。

[8.13.15。DISTINCT 优化](http://dev.mysql.com/doc/refman/5.6/en/distinct-optimization.html)

所以这是与服务器配置无关的查询和模式优化问题。

所以查询应该是这样的：

```
SELECT 
  Orders.order_number,
  Orders.customer_id,
  Orders.order_date,
  CONCAT(Customer_Details.customer_fname,  ' ', Customer_Details.customer_lname) AS CustomerName, 
  status_id AS CurrState
FROM Orders 
INNER JOIN Customer_Details
ON(Orders.customer_id = Customer_Details.id)
INNER JOIN Order_Tracking
ON(Orders.id = Order_Tracking.order_id)
INNER JOIN (SELECT order_id, MAX(id) id FROM Order_Tracking GROUP BY order_id) LastOrderTracking
ON (Order_Tracking.id = LastOrderTracking.id)
WHERE status_id = 1
ORDER BY Orders.order_number; 
```

你可以看一个现场[演示](http://sqlfiddle.com/#!2/0bf1c/12)，看看执行计划中有多少文件排序操作。

# python - 代码终止后保持 matplotlib / pyplot 窗口打开

> ID：15454586
> 
> 赞同：7
> 
> 时间：2013-03-16T20:51:18.287
> 
> 标签：python, matplotlib, plot

我希望 python 制作一个绘图，在不阻塞控制流的情况下显示它，并在代码退出后保持绘图打开。这可能吗？

这个和相关主题存在于许多其他线程中（见下文），但我无法让情节保持开放和非阻塞。例如，如果我使用`pyplot.ion()`before `pyplot.show()`，或者如果我使用`pyplot.show(block=False)`然后代码终止时情节关闭。使用`python`或都是如此`ipython`。如果重要的话，我在 OS X 10.8.2 (Mountain Lion) 上运行，运行`python27`和`ipython27`

相关讨论：
[pylab matplotlib“show”等到窗口关闭](https://stackoverflow.com/questions/9753885/pylab-matplotlib-show-waits-until-window-closes)
[有没有办法分离matplotlib图以便计算可以继续？](https://stackoverflow.com/questions/458209/is-there-a-way-to-detach-matplotlib-plots-so-that-the-computation-can-continue)
[在 Matplotlib 中保持绘图窗口打开](https://stackoverflow.com/questions/12358312/keep-plotting-window-open-in-matplotlib)
[关闭 pyplot 窗口](https://stackoverflow.com/questions/11140787/closing-pyplot-windows)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T20:57:16.360

在 Linux 上，您可以通过以下方式分离显示器：

```
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import numpy as np
import os

def detach_display():
    mu, sigma = 0, 0.5
    x = np.linspace(-3, 3, 100)
    plt.plot(x, mlab.normpdf(x, mu, sigma))
    plt.show()    

if os.fork():
    # Parent
    pass
else:
    # Child
    detach_display() 
```

主要过程结束，但情节仍然存在。

* * *

尝试#2。这也适用于 Linux；~~你可以试试看：~~但不是在 OS X 上。

```
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import numpy as np
import os
import multiprocessing as mp

def detach_display():
    mu, sigma = 0, 0.5
    x = np.linspace(-3, 3, 100)
    plt.plot(x, mlab.normpdf(x, mu, sigma))
    plt.show()

proc = mp.Process(target=detach_display)
proc.start()
os._exit(0) 
```

没有`os._exit(0)`, 主进程块。按 Ctrl-C 会终止主进程，但情节仍然存在。

随着`os._exit(0)`，主要过程结束，但情节仍然存在。

* * *

叹。尝试#3。如果您将 matplotlib 调用放在另一个脚本中，那么您可以像这样使用子进程：

显示.py：

```
import matplotlib.pyplot as plt
import numpy as np
import sys

filename = sys.argv[1]
data = np.load(filename)
plt.plot(data['x'], data['y'])
plt.show() 
```

测试.py

```
import subprocess
import numpy as np
import matplotlib.mlab as mlab

mu, sigma = 0, 0.5
x = np.linspace(-3, 3, 100000)
y = mlab.normpdf(x, mu, sigma)
filename = '/tmp/data.npz'
np.savez(filename, x=x, y=y)
proc = subprocess.Popen(['python', '/path/to/show.py', filename]) 
```

运行`test.py`应显示绘图并将控制权返回到终端，同时保持绘图显示。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-28T16:49:15.893

尽管这可能无法直接回答问题，但我发现最简单实用的方法是（使用 show(block=False) 并）在后台运行脚本。这样，情节仍然存在，您将返回 shell 提示符，并且在您终止情节窗口时脚本退出...

# c# - 使用 Web 服务实现队列

> ID：15454588
> 
> 赞同：0
> 
> 时间：2013-03-16T20:51:30.580
> 
> 标签：c#, .net, web-services

我想用网络服务创建一个队列。这是我的代码：

```
 public class Service1 : System.Web.Services.WebService
{

    Queue myQueue = new Queue();

    [WebMethod]
    public void push(int item)
    {
        if (myQueue == null)
            myQueue = new Queue();
        myQueue.Enqueue(item);
    }

    [WebMethod]
    public int pop()
    {
        if (myQueue != null)
        {
            if (myQueue.Count != 0)
            {
                return (int)myQueue.Dequeue();
            }

        }

            return -1;

    }
} 
```

push() 方法工作正常，但是当我调用 pop() 检索数据时，它总是返回 -1
我的代码问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:15:08.330

正如 I4V 所说，静态可以完成这项工作，但请确保防止同时呼叫者。无需在 push 中手动实例化 myQueue，因为声明保证实例可以使用。

```
public class Service1 : System.Web.Services.WebService
{
    static Queue myQueue = new Queue();

    [WebMethod]
    public void push(int item)
    {
        lock(myQueue)
        {
            myQueue.Enqueue(item);
        }
    }

    [WebMethod]
    public int pop()
    {
        lock(myQueue)
        {
            if (myQueue.Count != 0)
            {
                return (int)myQueue.Dequeue();
            }

            return -1;
        }
    }
} 
```

此外，请考虑使用通用队列，这样您就不必继续投射。它更安全，更快捷。 [http://msdn.microsoft.com/en-us/library/7977ey2c.aspx](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

```
// before class declaration
using System.Collections.Generic;

// replaces myQueue declaration
static Queue<int> myQueue = new Queue<int>();

// later, in pop - myQueue already returns ints, so no casting needed
return myQueue.Dequeue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:56:48.560

声明`myQueue`为`static`。( `static Queue myQueue = new Queue();`) 因为似乎`Service1`每次调用都会创建一个新的实例。

# c# - C#：持有一组处理程序对象并找到正确的

> ID：15454591
> 
> 赞同：3
> 
> 时间：2013-03-16T20:51:43.770
> 
> 标签：c#, generics

所以我有一个名为的接口，`IWorkItem`它在和许多其他类中实现。`WorkA``WorkB`

```
public interface IWorker<T> where T : IWorkItem
{
    void Process(T item);
} 
```

该`IWorker<T>`接口在`WorkerA`( `IWorker<WorkA>`) 、`WorkerB`( `IWorker<WorkB>`) 和许多其他类中实现。

```
public static void ProcessWorkItem(IWorkItem item)
{
    (/* find the right worker */).Process(item);
} 
```

现在我的问题是：如何找到能够处理给定的工作对象`IWorkItem`？

我的第一次尝试看起来像这样，但是泛型类型参数是一个问题：

```
public static class WorkerRepository
{
    private static Dictionary<Type, IWorker<???>> RegisteredWorkers =
        new Dictionary<Type, IWorker<???>>();

    public static void RegisterWorker(IWorker<???> worker)
    {
        var handled = from iface in worker.GetType().GetInterfaces()
                      where iface.IsGenericType
                      where iface.GetGenericTypeDefinition() == typeof(IWorker<>)
                      select iface.GetGenericArguments()[0];
        foreach (var type in handled)
            if (!RegisteredWorkers.ContainsKey(type))
                RegisteredWorkers[type] = worker;
    }

    public static void ProcessWorkItem(IWorkItem item)
    {
        RegisteredWorkers[item.getType()].Process(item);
    }
} 
```

所以我有`Dictionary`包含工人的那个。我在这里需要哪种类型的参数？在 Java 中我可以只使用`? extends IWorkItem`，但我可以在 C# 中这样做吗？然后有`RegisterWorker`。您可能会为整个方法建议一个泛型类型参数，例如`RegisterWorker<T>(IWorker<T> worker)`. 但是，这也行不通，因为我想动态加载、实例化和注册 Workers。

这甚至是正确的方法还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:37:08.340

我做了一些更改，但得到了一个解决方案，您可以在其中保持通用（而不是使用`object`s）。不确定您是否关心，但想将其添加为答案并让您决定。

我还写了一个测试来检查它是否真的有效，你应该可以复制/粘贴它。

```
[TestFixture]
public class WorkerThing
{
    [Test]
    public void RegisterAndRetrieveWorkers()
    {
        var repo = new WorkerRepository();
        repo.RegisterWorker(new WorkerA());
        var workerA = repo.RetrieveWorkerForWorkItem(new WorkItemA());
        Assert.IsTrue(workerA is WorkerA);

        repo.RegisterWorker(new WorkerB());
        var workerB = repo.RetrieveWorkerForWorkItem(new WorkItemB());
        Assert.IsTrue(workerB is WorkerB);
    }
} 
```

`WorkerRepository`班级。

```
public class WorkerRepository
{
    private readonly Dictionary<Type, IWorker<IWorkItem>> _registeredWorkers =
        new Dictionary<Type, IWorker<IWorkItem>>();

    public void RegisterWorker(IWorker<IWorkItem> worker)
    {
        var type = (from iface in worker.GetType().GetInterfaces()
                      where iface.IsGenericType
                      where iface.GetGenericTypeDefinition() == typeof(IWorker<>)
                      select iface.GetGenericArguments()[0]).First();

        if (!_registeredWorkers.ContainsKey(type))
        {
            _registeredWorkers[type] = worker;
        }
    }

    // You don't need this method, just added it to check if I indeed retrieved the correct type
    //
    public IWorker<IWorkItem> RetrieveWorkerForWorkItem(IWorkItem item)
    {
        var type = item.GetType();
        var registeredWorker = _registeredWorkers[type];
        return registeredWorker;
    }

    public void ProcessWorkItem(IWorkItem item)
    {
        var type = item.GetType();
        var registeredWorker = _registeredWorkers[type];
        registeredWorker.Process(item);
    }
} 
```

工作项接口和类。

```
public interface IWorkItem
{
}

public class WorkItemA : IWorkItem
{
}

public class WorkItemB : IWorkItem
{
} 
```

在这里，我添加了`out`关键字以允许在界面上键入协方差。这样你就可以转换`WorkerA`为`IWorker<IWorkItem>`. （如在单元测试示例中）

```
public interface IWorker<out T> where T : IWorkItem
{
    void Process(IWorkItem workItem);
}

public class WorkerA : IWorker<WorkItemA>
{
    public void Process(IWorkItem item)
    {
    }
}

public class WorkerB : IWorker<WorkItemB>
{
    public void Process(IWorkItem item)
    {
    }
} 
```

没有`object`字典。没有反射。我希望这个例子是有用的！

干杯（感谢这个很酷的问题，它让我忙了一段时间:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:57:26.247

看起来你想要这样的东西：

```
private static Dictionary<Type, object> RegisteredWorkers = new Dictionary<Type, object>();

public static void RegisterWorker(object worker)
{
    var handled = from iface in worker.GetType().GetInterfaces()
                  where iface.IsGenericType
                  where iface.GetGenericTypeDefinition() == typeof(Worker<>)
                  select iface.GetGenericArguments()[0];
    foreach (var type in handled)
        if (!RegisteredWorkers.ContainsKey(type))
            RegisteredWorkers[type] = worker;
}

public static void ProcessWorkItem(WorkItem item)
{
    object handler = RegisteredWorkers[item.getType()];
    Type workerType = typeof(Worker<>).MakeGenericType(item.GetType());
    MethodInfo processMethod = workerType.GetMethod("Process");
    processMethod.Invoke(handler, new object[] { item });
} 
```

如果您不想每次都通过反射调用处理程序，则可以`Action<IWorkItem>`在注册处理程序时生成处理程序：

```
public void RegisterHandler(object handler)
{
    var handled = from iface in handler.GetType().GetInterfaces()
                  where iface.IsGenericType
                  where iface.GetGenericTypeDefinition() == typeof(IWorker<>)
                  select iface.GetGenericArguments()[0];

    foreach (var type in handled)
    {
        if (!RegisteredWorkers.ContainsKey(type))
        {
            Action<IWorkItem> handleAction = HandlerAction(type, handler);
            RegisteredWorkers[type] = handleAction;
        }
    }   
}

public void Process(IWorkItem item)
{
    Action<IWorkItem> handleAction = RegisteredWorkers[item.GetType()];
    handleAction(item);
}

private static Action<IWorkItem> HandlerAction(Type itemType, object handler)
{
    var paramExpr = Expression.Parameter(typeof(IWorkItem));
    var castExpr = Expression.Convert(paramExpr, itemType);
    MethodInfo processMethod = typeof(IWorker<>).MakeGenericType(itemType).GetMethod("Process");
    var invokeExpr = Expression.Call(Expression.Constant(handler), processMethod, castExpr);

    var lambda = Expression.Lambda<Action<IWorkItem>>(invokeExpr, paramExpr);
    return lambda.Compile();
} 
```

# sql - 通过查询在 MSAccess 中禁用/启用自动增量

> ID：15454594
> 
> 赞同：0
> 
> 时间：2013-03-16T20:51:54.203
> 
> 标签：sql, sql-server, ms-access, auto-increment

在数据传输期间，我想：

**在 MSAccess 中禁用/启用自动增量列**

所以我可以通过 MSAccess 中的查询获得我的 C# 应用程序插入的确切值。

在 MSSQL 中，我们可以这样做以启用：

```
sqlCmdDes.CommandText = "SET IDENTITY_INSERT  dbo." + row["Table_Name"] + " ON"; 
```

并禁用自动增量：

```
sqlCmdDes.CommandText = "SET IDENTITY_INSERT  dbo." + row["Table_Name"] + " ON"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:15:20.373

您可以将特定值插入 Access 中的标识（计数器）列，而无需设置 IDENTITY_INSERT。只需使用 INSERT 语句。

# android - 在 Android 2.3 及更低版本上呈现 HIndi 字体

> ID：15454596
> 
> 赞同：2
> 
> 时间：2013-03-16T20:52:11.950
> 
> 标签：android, unicode, fonts, hindi

我正在用印地语开发一个 android 应用程序，但发现印地语拼写错误和损坏的字符很少，问题出在[http://code.google.com/p/ankidroid/issues/detail?id=1008](http://code.google.com/p/ankidroid/issues/detail?id=1008)但那里没有解决方案呈现为 दपि 上面印地语字体的字母形成为 द + ि + प 应显示为 दिप 但呈现为 [दपि](https://stackoverflow.com/questions/13569698/correcting-hindi-unicode-rendering-in-android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:50:23.540

最后我发现解决方案非常简单，只需在我正在开发 Web 应用程序的情况下导入字体

> @font-face { 字体家族：印地语；src: url('fonts/k010.TTF'); } 正文，h1，h2{ 字体家族：印地语；}

然后在您完成将字体更改为 Arial 并将文本粘贴到您的 Web 应用程序中后，使用 Kruti devi10 字体在您的文本编辑器或 MS-word 中键入文本，它将完美呈现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:43:17.870

你可以使用Unicode ...

```
TextView tv=(TextView)findViewById(R.id.textViewmyView);

final Typeface tf = Typeface.createFromAsset(this.getAssets(), "Hindi-SARAL1.TTF");

tv.setText(Html.fromHtml("&# 2367;&# 2342;&# 2346;"));

tv.setTypeface(tf); 
```

unicode值继续没有差距.....

您还可以通过此站点将世界转换为 unicode... [http://mylanguages.org/converter.php](http://mylanguages.org/converter.php)但如果 इ 第一次使用 इ 的 unicode，则使用字母 Unicode...b/c 直到 android 版本 4.0 Hindi Unicode不支持正确..

# unity3d - Unity3D - 通过 Application.LoadLevel 重新加载场景后的问题

> ID：15454597
> 
> 赞同：2
> 
> 时间：2013-03-16T20:52:24.603
> 
> 标签：unity3d, reload, destroy, scene

我有个问题...

我的游戏中有四个场景：开场场景、选择玩家场景、实际游戏场景和游戏结束场景。

当我额外加载实际的游戏场景时遇到问题

```
Application.LoadLevel("Let's play the game!") 
```

这就是我离开这个场景的方式：

```
if(GUI.Button (new Rect (x, y, w, h), "Quit", buttonStyle))
{
   Application.Quit();
   Application.LoadLevel("Opening Screen");
} 
```

当我第二次加载我想要的关卡时，相机应该跟随第一个玩家。这没有发生。我提供了一个“重启”选项，可以解决这个问题，但我不希望这个事件首先发生。

更严重的问题是动态加载的游戏对象。我收到“'GameObject' 已被破坏，但您仍在尝试访问它。” 我不确定这是从哪里来的，因为我在任何地方都看不到我之前所说的“毁灭”。此外，当我在 Unity 中运行应用程序时，动态创建的对象确实出现在层次结构中。

我认为我的问题的根源在于失败的相机，但我不确定如何修复它。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T04:00:42.520

听起来您需要确保调用[DontDestroyOnLoad](http://docs.unity3d.com/Documentation/ScriptReference/Object.DontDestroyOnLoad.html)以在关卡加载之间将对象保留在内存中：

```
DontDestroyOnLoad(gameObjectToPreserve); 
```

此外，您示例中的以下代码将在您的应用程序加载“打开屏幕”之前退出您的应用程序：

```
if(GUI.Button (new Rect (x, y, w, h), "Quit", buttonStyle))
{
   Application.Quit();
   Application.LoadLevel("Opening Screen");
} 
```

如果您打算返回到初始屏幕，请删除“Application.Quit()”行。您不会在编辑器的预览模式中看到这个问题，因为 Application.Quit() 在那里没有做任何事情。

# c - 使用 C 问题的刽子手游戏

> ID：15454605
> 
> 赞同：0
> 
> 时间：2013-03-16T20:52:45.047
> 
> 标签：c

C语言的新手，我正在尝试制作一个刽子手游戏。我有以下代码：

```
int main(void) {

    char userResponse;//This is the response from the user on rather they want to continue or not.

    do {
        startGame();

        printf("Do you want to continue (y or n): ");
        scanf("%c", &userResponse);

    } while(userResponse == 'y');

    return 0;
}

int startGame(void) {

    int num_letters = 0; //length of word array
    int count = 0;
    int tries = 0; //total tries player has used
    int correctGuesses = 0; //number of correct guesses
    int correctLetter = 0; //flag to check if the letter guessed was correct.
    int repeatLetter = 0; //flag to check if the letter guessed was already guessed before.
    int randomWord = 1+(rand()%6); //setting a variable that will pick a word from the word array at random.

    char word[] = {"spot", "physicist", "penny", "klingon", "bazinga", "continuum"}; // should these be all lower char or does it matter?
    char guess;
    char incorrectGuesses[5] = " "; // all the incorrect letters chosen by the player will be stored in this array.
    char gameWord[num_letters]; //starts to fill out the word as the player guesses correctly

    srand(time(NULL)); // Don't really understand this line but the interweb said I needed it.  Can you tell me why?

    num_letters = strlen(word);

    gameWord[num_letters] = '\0';

    //This will show the player what letter they have typed incorrectly.
    for(count = 0; count < num_letters; count++)
        gameWord[count] = '-'; // This will display the length of the word represented with a "-".

    printf("Welcome to Big Bang Hangman!\n\n");
    printf("Time to guess the word!");

    draw_hangman(tries);

    while(tries < NUM_TRIES_ALLOWED) { //Player only gets 7 guesses.  Found this on the interweb.
        printf("Here is your word: %s\n", gameWord);
        printf("Incorrect Letters: %s\n", incorrectGuesses);
        printf("\nGuess a letter (and press 'Enter'): ");
        fgets(&guess, sizeof(guess), stdin);

        //This compares the current guess with the previous guesses so that you won't affect a turn if you pick the same incorrect letter.
       for(count = 0; count < num_letters; count++)
            if(guess == gameWord[count] || guess == incorrectGuesses[count]) { // If the player guess is equal to the size of the word or if its equal to the 
                repeatLetter  = 1;
                correctLetter = 1;
                break;
            }

        if(repeatLetter == 0) // setting the flag back to 0 tells the compiler the game is over.
        //Checks for matches in string
            for(count = 0; count < num_letters; count++) {
                if(guess == word[count]) { // can't understand why I'm getting this warrning.
                    gameWord[count] = guess;
                    correctGuesses++;

                    //if (correctGuesses == count) {
                        //printf("\n\nCONGRATULATIONS! You guessed the word %s!", gameWord);
                        //exit(0);
                    //}
                    if(correctGuesses == num_letters) {
                        printf("\n\nCONGRATULATIONS! You guessed the word %s!", gameWord);
                        exit(0);
                    }

                    correctLetter = 1;
                }
            }

        if(correctLetter == 0) {
            incorrectGuesses[tries] = guess;
            tries++;
        }

        // reset both flags
        repeatLetter  = 0;
        correctLetter = 0;

        //startGame(); // Start the game over when the flag is reset.
    }

    printf("Sorry but you did not guess the word.\n");
    printf("The word is: %s\n\n", gameWord);

    return 0;
} 
```

它正在输出以下内容：

欢迎来到生活大爆炸刽子手！

是时候猜猜这个词了！

```
 ___
 |
 |
 |
 |
 |
--- 
```

```
这是你的话：----
不正确的字母：  

猜一个字母（然后按“Enter”）：这是你的话：----
不正确的字母：  

```

最后两行一直持续到我停止为止。我完全迷路了。
任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:59:49.293

您的代码中有多个（我的意思是）问题。但是让我们只选择一个

```
char guess;

fgets(&guess, sizeof(guess), stdin); 
```

不是让用户输入字母的正确方法。也许

```
scanf("%c", &guess); 
```

会更好地为你工作。

但实际上你的方法都是错误的。重新开始，写**几**行代码，让它们工作，然后再写**几**行。您已经编写了大量代码，其中很多是错误的。这不是一种高效的编程方式。

# ruby-on-rails - ruby 中的 activemerchant paypal 配置

> ID：15454609
> 
> 赞同：0
> 
> 时间：2013-03-16T20:52:55.670
> 
> 标签：ruby-on-rails, ruby, paypal, activemerchant

我只是想以一种简单的方式测试我的贝宝沙盒支付网关。不幸的是，我收到以下错误消息：

“由于商家配置无效，无法处理此交易。”

这是我的测试文件。它来自 railscasts 剧集：

```
require "rubygems"
require "active_merchant"

ActiveMerchant::Billing::Base.mode = :test

gateway = ActiveMerchant::Billing::PaypalGateway.new(
  login: "bla-facilitator_api1.gmail.com",
  password: "13234229172",
  signature: "AFcWxY21C7fd0v3bYYYRCOSSrl31AsqKs2TwM-RkGcerk8QatsKAkfJt"
)

credit_card = ActiveMerchant::Billing::CreditCard.new(
  brand:                 "visa",
  number:               "4111111111111111",
  verification_value:   "123",
  month:                1,
  year:                 2014,
  first_name:           "Ryan",
  last_name:            "Bates"

)

if credit_card.valid?
  response = gateway.purchase(1000, credit_card, ip: "127.0.0.1",
    :billing_address => {
            :name     => "Ryan Bates",
            :address1 => "123 Main St.",
            :city     => "New York",
            :state    => "NY",
            :country  => "US",
            :zip      => "10001"
    }
  )
  if response.success?
    puts "Purchase complete!"
  else
    puts "Error: #{response.message}"
  end
else
  puts "Error: credit card is not valid. #{credit_card.errors.full_messages.join('. ')}"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:37:22.973

该错误意味着您在尝试处理的帐户上没有激活 Payments Pro，或者您在打开它后没有接受它的帐单协议。

# java - 所有线程花费的总时间和平均花费的时间

> ID：15454610
> 
> 赞同：0
> 
> 时间：2013-03-16T20:52:56.840
> 
> 标签：java, multithreading, average, executorservice

我正在做一个项目，我需要测量程序花费的总时间和程序花费的平均时间。该程序是一个多线程程序。

在该程序中，每个线程都在特定范围内工作。输入参数是`Number of Threads`和`Number of Task`。

如果`number of threads is 2`然后`number of tasks is 10`每个线程将执行`10 tasks`。所以这意味着 2 线程将做`20 tasks`。

所以这意味着——

第一个线程应该使用 id between `1 and 10`，第二个线程应该使用 id between `11 and 20`。

我得到了上述场景的工作。现在我想测量所有线程花费的总时间和平均时间是多少。所以我在我的程序中得到了以下设置。

**问题陈述：-**

谁能告诉我`Total time and Average time taken`在下面的程序中我试图通过所有线程测量的方式是否正确？

```
//create thread pool with given size
ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

long startTime = 0L;
try {

    readPropertyFiles();

    startTime = System.nanoTime();

    // queue some tasks
    for (int i = 0, nextId = startRange; i < noOfThreads; i++, nextId += noOfTasks) {

        service.submit(new XMPTask(nextId, noOfTasks, tableList));
    }

    service.shutdown();
    service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

} finally {
    long estimatedTime = System.nanoTime() - startTime;
    logTimingInfo(estimatedTime, noOfTasks, noOfThreads);
}

private static void logTimingInfo(long elapsedTime, int noOfTasks, int noOfThreads) {

    long timeInMilliseconds = elapsedTime / 1000000L;
    float avg = (float) (timeInMilliseconds) / noOfTasks * noOfThreads;

    LOG.info(CNAME + "::" + "Total Time taken " + timeInMilliseconds + " ms. And Total Average Time taken " + avg + " ms");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:02:57.630

我认为您需要测量任务类本身（XMPTask）中的时间。在该任务中，您应该能够提取正在执行它的线程的 id 并记录它。使用这种方法需要阅读日志并对它们进行一些计算。

另一种方法是随着时间的推移保持运行总计和平均值。为此，您可以编写一个简单的类，将其传递给每个任务，该任务具有一些静态（每个 jvm）变量，用于跟踪每个线程正在做什么。然后你可以在 Threadpool 之外有一个单独的线程来进行计算。所以如果你想报告每个线程每秒的平均cpu时间，这个计算线程可以休眠一秒钟，然后计算并记录所有平均时间，然后休眠一秒钟......

编辑：重新阅读要求后，您不需要后台线程，但不确定我们是在跟踪每个线程的平均时间还是每个任务的平均时间。我假设了每个线程的总时间和平均时间，并在下面的代码中充实了这个想法。它尚未经过测试或调试，但应该让您对如何开始有一个很好的了解：

```
public class Runner
{
    public void startRunning()
    {
        // Create your thread pool
        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        readPropertyFiles();

        MeasureTime measure = new MeasureTime();

        // queue some tasks
        for (int i = 0, nextId = startRange; i < noOfThreads; i++, nextId += noOfTasks) 
        {

            service.submit(new XMPTask(nextId, noOfTasks, tableList, measure));
        }

        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        measure.printTotalsAndAverages();
    }
}

public class MeasureTime
{
    HashMap<Long, Long> threadIdToTotalCPUTimeNanos = new HashMap<Long, Long>();
    HashMap<Long, Long> threadIdToStartTimeMillis = new HashMap<Long, Long>();
    HashMap<Long, Long> threadIdToStartTimeNanos = new HashMap<Long, Long>();

    private void addThread(Long threadId)
    {
        threadIdToTotalCPUTimeNanos.put(threadId, 0L);
        threadIdToStartTimeMillis.put(threadId, 0L);
    }

    public void startTimeCount(Long threadId)
    {
        synchronized (threadIdToStartTimeNanos)
        {
            if (!threadIdToStartTimeNanos.containsKey(threadId))
            {
                addThread(threadId);
            }

            long nanos = System.nanoTime();
            threadIdToStartTimeNanos.put(threadId, nanos);
        }
    }

    public void endTimeCount(long threadId)
    {
        synchronized (threadIdToStartTimeNanos)
        {
            long endNanos = System.nanoTime();
            long startNanos = threadIdToStartTimeNanos.get(threadId);

            long nanos = threadIdToTotalCPUTimeNanos.get(threadId);
            nanos = nanos + (endNanos - startNanos);
            threadIdToTotalCPUTimeNanos.put(threadId, nanos);
        }
    }

    public void printTotalsAndAverages()
    {
        long totalForAllThreadsNanos = 0L;
        int numThreads = 0;
        long totalWallTimeMillis = 0;
        synchronized (threadIdToStartTimeNanos)
        {
            numThreads = threadIdToStartTimeMillis.size();
            for (Long threadId: threadIdToStartTimeNanos.keySet())
            {
                totalWallTimeMillis += System.currentTimeMillis() - threadIdToStartTimeMillis.get(threadId);
                long totalCPUTimeNanos = threadIdToTotalCPUTimeNanos.get(threadId);

                totalForAllThreadsNanos += totalCPUTimeNanos;
            }
        }

        long totalCPUMillis = (totalForAllThreadsNanos)/1000000;
        System.out.println("Total milli-seconds for all threads: " + totalCPUMillis);
        double averageMillis = totalCPUMillis/numThreads;
        System.out.println("Average milli-seconds for all threads: " + averageMillis);

        double averageCPUUtilisation = totalCPUMillis/totalWallTimeMillis;
        System.out.println("Average CPU utilisation for all threads: " + averageCPUUtilisation);
    }
}

public class XMPTask implements Callable<String>
{
    private final MeasureTime measure; 

    public XMPTask(// your parameters first
            MeasureTime measure)
    {
        // Save your things first

        this.measure = measure;
    }

    @Override
    public String call() throws Exception
    {
        measure.startTimeCount(Thread.currentThread().getId());

        try
        {
            // do whatever work here that burns some CPU.
        }
        finally
        {
            measure.endTimeCount(Thread.currentThread().getId());
        }

        return "Your return thing";
    }
} 
```

写完这一切之后，有一件事情似乎有点奇怪，因为 XMPTask 似乎对任务列表了解太多，我认为你应该为你拥有的每个任务创建一个 XMPTask，给它足够的信息完成这项工作，并在创建它们时将它们提交给服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:00:26.080

`service.submit`只被执行了`noOfThreads`几次。`XMPTask`对象的创建次数相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:01:03.700

您测量的时间不是**消耗**的时间，而是**经过**的时间。

如果测试的程序（JVM）是​​计算机上唯一的程序，它可能相对准确，但在现实世界中很多进程同时运行。

我已经通过在 Windows（*我将在星期一在我的办公室完成这篇文章*）和 Linux (/proc) 上使用对操作系统的本机调用来完成这项工作。

# c++ - std::getline 返回错误的大小

> ID：15454611
> 
> 赞同：0
> 
> 时间：2013-03-16T20:53:03.387
> 
> 标签：c++, string, map, vector, getline

1.  getline() 出了点问题，把单词写对了，但 size 的值仍然是 26。

2.  我每次输入一个字符时都尝试打印，并且所有字符都打印，所以正确输入字符串，但不存储它们？

3.  我已附上以下代码以供参考

4.  如果您需要参考其他地方出了什么问题，请询问我整个项目。

    ```
    void TldPart::PreloadTLDs()
    {
        ifstream in(TLD_TEST_FILE);

        if(in)
        {
            string tld;
            for(int i =0; !in.eof(); i++)
            {
                getline(in,tld);

                String myString = tld.c_str();

                //cout << myString.GetLength() << endl;

                for(int j=0; j<myString.GetLength();j++)
                {
                    myString[j]=tolower(myString[j]);
                }

                //cout << myString << endl;
                ValidTLDs.insert(pair<String,int>(myString,i));
                //ValidTLDs[myString] = true; //if the map was bool
            }
            in.close();
            cout << ValidTLDs.size(); //Printing the size //prints 26
        }
    } 
    ```

# zooming - 如何在没有鼠标的情况下放大 XQuartz？

> ID：15454612
> 
> 赞同：0
> 
> 时间：2013-03-16T20:53:04.673
> 
> 标签：zooming, x11, xquartz

我尝试了 , 和 , 的组合`<cmd>`来放大`Alt`。没有任何效果。`Opt``+``-`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:24:59.357

我发现这与Mac中的设置有关。我可以放大和缩小，即。用两根手指放在触摸板上。

# svn - 怎么回去颠覆？

> ID：15454617
> 
> 赞同：1
> 
> 时间：2013-03-16T20:54:22.473
> 
> 标签：svn

我发现我最近的工作表第 21 版到第 25 版很乱，但第 20 版很好。因此，我根据修订版 20 重新工作。但如果不更新到当前修订版 25，我将无法提交我的新作品。如何删除修订版 21-25 并将我的新作品提交到存储库？新提交的修订号是 21 还是 26 无关紧要。我使用的是 Tortoise Subversion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:00:40.527

1.  更新到最新版本
2.  右键单击要还原的顶部文件夹
3.  TortoiseSVN -> SVN 显示日志
4.  右键单击要还原到的修订版（在本例中为 20）
5.  选择“恢复到此版本”
6.  现在您的工作副本将包含在 r20 中查看的修改文件
7.  签入修改后的文件（带有“reverting to r20”之类的注释）
8.  继续照常工作。

# php - 在树枝中使用 merge() 时，键值被“键”替换

> ID：15454618
> 
> 赞同：11
> 
> 时间：2013-03-16T20:54:22.910
> 
> 标签：php, symfony, merge, key, twig

我正在尝试将键值对添加到数组中，并为所有不以“_”开头的属性添加当前值。出于某种原因，合并将“key”（即 slug）的值替换为字符串“key”。

例如，当 slug 是唯一一个键不以“_”开头的属性时，

```
key = slug
value = something 
```

它的行为如下：

```
{% for key,value in app.request.attributes.all %}
    {% if '_' != key | slice(0, 1) %}
        {{ dump(key) }}  // string(4) "slug"
        {% set params = params | merge({ key : value}) %}
        {{ dump(key) }} // string(4) "slug"
    {% endif %}
{% endfor %}
{{ dump(params) }} // array(1) { ["key"]=> string(9) "something" } 
```

我已经添加了转储返回的内容。

最终转储返回

```
array(1) { ["key"]=> string(9) "something" } 
```

在我期待的时候

```
array(1) { ["slug"]=> string(9) "something" } 
```

我想说这是一个与[Twig forgets array-keys](https://stackoverflow.com/questions/6197499/twig-forgets-array-keys)类似的问题，但关于这个问题的结论是这是一个 mongodb 问题，我没有使用它。我正在处理请求中的属性。

由于某种原因，merge({ key : value}) 的行为类似于 merge({ 'key' : value})。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-16T21:32:53.523

您需要用括号将变量包装起来才能将其用作键。

```
{% set params = params | merge({ (key) : value}) %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-03T10:37:39.410

使用数字键，您可能会在此过程中丢失您的密钥，使用 m̀erge`过滤器。

我找不到有关应用于数组的“+”运算符的任何文档，但在这种情况下效果很好：

`{% set array = {(1): 2} + array %}`

来源：[https ://github.com/twigphp/Twig/issues/2741#issuecomment-417445042](https://github.com/twigphp/Twig/issues/2741#issuecomment-417445042)

# java - 由于线程交换而导致的延迟

> ID：15454630
> 
> 赞同：4
> 
> 时间：2013-03-16T20:55:02.537
> 
> 标签：java, eclipse, multithreading, jvisualvm, awt-eventqueue

我最近在开发的游戏中遇到了一些滞后峰值。它是一致的，大约在同一时间发生。使用 java profiler jvisualvm 我发现它发生在特定线程似乎重新启动或某些东西（AWT-EventQueue-0）的同时：

![换线通道图片](../Images/27cc8b19abc10f0e360a3d0d7d0c8a50.png)

除此之外，没有明显的原因，不在堆使用、处理器使用、内存空间或方法使用中。有时它会`ConcurrentModificationException`在绘制我的对象数组时导致出现问题，但这只会在大量滞后的情况下发生，而且我的游戏几乎不会密集。

我不记得最近对项目进行了任何更改，但是我最近执行了以下操作：

*   将java更新到最新版本
*   已下载最新版本的 JDK7（虽然本项目未使用）
*   修复了安装 JDK7 导致的 eclipse 错误（删除了 eclipse.ini 中的 256m 限制）

我在 32 位 XP 上运行 Eclipse Indigo-service-1。我的处理器几乎没有使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T00:26:20.587

看来您在事件调度线程 (EDT) 上做的*太多了。*AWT-Event-Queue-0 看起来是 EDT。此外，您的最后一条评论说

> ...似乎只有当我首先将游戏板绘制到图像而不是直接绘制到组件时才会出现延迟峰值。

您需要将一些计算推送到其他线程，听起来绘制游戏板是一个不错的选择。此外，您可能拥有的任何人工智能。

您的键盘和鼠标处理程序在 EDT 上运行，图形更新也需要。但是您可以在 EDT 之外预渲染到图像（就像您目前正在做的那样）。您可以通过 BlockingQueue 将键盘和鼠标事件发送到另一个线程。

您可以做的另一件事是将游戏更新率与帧更新率分离。

但是没有任何细节，我无法提供更多建议。

**更新**：（只需阅读您的一点`ConcurrentModificationException`）

这可能是由两种不同的原因引起的：

1.  您正在与您正在阅读的线程不同的线程中更新一个集合（如您的 ArrayList）；或者
2.  您正在遍历所述集合并在循环中对其进行更新。

第2点很容易修复；但恐怕我无法在这么短的空间内教授线程安全。

# ruby - 是否有等效于 `Array::sample` 的哈希值？

> ID：15454632
> 
> 赞同：46
> 
> 时间：2013-03-16T20:55:08.073
> 
> 标签：ruby, hash, random

我正在寻找从哈希中提取 n 个随机键值对。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-16T21:13:30.820

```
Hash[original_hash.to_a.sample(n)] 
```

对于 Ruby 2.1，

```
original_hash.to_a.sample(n).to_h 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-16T20:57:38.663

我不知道这种方法。您仍然可以执行以下操作：

```
h[h.keys.sample] 
```

如果您需要对多个元素进行采样，则代码必须稍微复杂一些。

编辑：要获取键值对而不仅仅是值，您可以执行以下操作：

```
keys_sample = h.keys.sample(n)
keys_sample.zip(keys_sample.map{|k| h[k]) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-26T17:04:02.333

阅读排名靠前的答案，我会选择*它取决于*：

1.  如果您只想从哈希中采样*一个*元素，[@Ivaylo Strandjev 的解决方案](https://stackoverflow.com/a/15454655/341929)仅依赖于哈希查找和`Array#sample`：

    ```
    hsh[hsh.keys.sample] 
    ```

2.  *要对多个*哈希元素进行采样， [@sawa 的答案](https://stackoverflow.com/a/15454790/341929)利用了`Array#to_h`：

    ```
    hsh.to_a.sample(n).to_h 
    ```

* * *

请注意，[正如@cadlac 提到](https://stackoverflow.com/questions/15454632/is-there-an-equivalent-to-arraysample-for-hashes-in-ruby#comment36519263_15454790)的，`hsh.to_a.sample.to_h`不会按预期工作。它会提高

```
TypeError: wrong element type String at 0 (expected array) 
```

因为`Array#sample`在这种情况下只返回元素数组，而不是包含元素数组的数组。

一种解决方法是他的解决方案，提供一个`n = 1`作为参数：

```
hsh.to_a.sample(1).to_h 
```

* * *

*PS：不是在寻找赞成票，只是将其添加为对 Ruby 新手的解释。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T22:39:21.023

如果你的样本只有一个元素，你可以使用这个：

```
sample = h.keys.sample
h.select { |k,v| k == sample } 
```

或者，如果您的样本包含多个元素，请使用以下命令：

```
n = 2
sample = h.keys.sample(n)
h.select { |k,v| sample.include?(k) } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T20:30:02.247

实现此目的的一种方法：

```
rank_hash = {"Listen" => 1, "Download" => 60, "Share" => 150, "Purchase" => 700 }

rank_array = rank_hash.to_a 
```

然后调用它来获取 k/v 对的随机数组样本：

```
rank_array[rand(0..3)] 
```

或者这不会对数组长度进行硬编码：

```
rank_array[rand(0..(rank_array.length) -1)] 
```

例子：

```
["Download", 60] 
```

# php - 为“记住我”功能设置 cookie 的最安全方式

> ID：15454634
> 
> 赞同：3
> 
> 时间：2013-03-16T20:55:16.937
> 
> 标签：php, cookies

我有兴趣在`remember me`登录页面上编写一个功能，该功能将在个人计算机上记录一个 cookie 多长时间。我知道这样做有危险，所以我想确保我以正确的方式做这件事。

我听说有人在数据库表和 cookie 之间创建链接以进行验证；但是，不确定如何执行此操作或是否建议这样做。我是 cookie 的新手，所以请解释一下最好的方法。我没有任何示例，因为就像我说的那样，我以前从未编写过此代码，并且希望确保我以正确的方式进行操作，并从做过的人那里获得输入。

我不确定 facebook 的 cookie 是否永远存在，我只知道在我的电脑上我永远不需要重新登录，除非我删除我的历史记录。所以我可能想像他们那样做。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:04:18.660

迄今为止，我所见过的持久 cookie 的最佳技术之一是[Barry Jaspan 的](http://jaspan.com/improved_persistent_login_cookie_best_practice)：

> 1.  当用户在选中记住我的情况下成功登录时，除了标准会话管理 cookie 之外，还会发出一个登录 cookie。
> 2.  登录 cookie 包含用户的用户名、系列标识符和令牌。系列和令牌是来自适当大空间的不可猜测的随机数。这三者一起存储在数据库表中。
> 3.  当未登录用户访问该站点并显示登录 cookie 时，会在数据库中查找用户名、系列和令牌。
>     1.  如果存在三元组，则认为用户已通过身份验证。使用的令牌将从数据库中删除。生成一个新令牌，并使用用户名和相同的系列标识符存储在数据库中，并向用户发出一个包含所有三个的新登录 cookie。
>     2.  如果存在用户名和系列但令牌不匹配，则假定为盗窃。用户会收到措辞强硬的警告，并且用户记住的所有会话都将被删除。
>     3.  如果用户名和系列不存在，则忽略登录 cookie。

我建议你阅读整篇文章，以上是要点。

此外，您将希望仅通过 SSL 连接发出这些 cookie 并在其上设置`secure`和`httponly`标志。

由于这意味着用户仅在通过 SSL 连接到服务器时才通过身份验证，因此我另外设置了[`Strict-Transport-Security`](http://en.wikipedia.org/wiki/Strict-Transport-Security)HTTP 标头以强制浏览器将来始终使用 SSL，另外还设置了一个简单的 cookie，例如`persistent_login_available=yes`用于非 SSL 连接。如果浏览器通过非 SSL 连接访问站点并且服务器看到`persistent_login_available`cookie，它会将访问者重定向到 SSL 版本并通过安全 cookie 对用户进行身份验证。

通过此过程，您将尽可能安全。不过，根据您的需要，这*可能*有点过头了，您自己决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T22:46:54.773

我还没有为自己编写代码，但我会这样处理这个问题：

**1.**创建一个表，当用户为持久性提供 cookie 时，该表可用于强制进行有效性检查：

```
create table RememberMe
(
   user_id    int(10)  NOT NULL,
   user_token char(10)  NOT NULL,
   token_salt int(6)   NOT NULL,
   time       int(10)  NOT NULL,
   PRIMARY KEY (user_id),
   CONSTRAINT nameYourConstraint 
              FOREIGN KEY (user_id) 
              REFERENCES userTableName (whatever_user_id_equals)
) 
```

要填充此表，我将在登录名中添加一些代码行，对于此示例，我将使用伪代码

```
// userID variable has been sanitized already so
// check if user clicked remember me
// and if the user logged in successfully:
if ( rememberMe == checked && login() == true )
{
     // random number to serve as our key:
     randomNumber = random( 99, 999999  );

     // convert number to hexadecimal form:
     token = toHex( ( randomNumber**randomNumber ) );

     // encrypt our token using SHA1 and the randomNumber as salt
     key = encrypt( token, randomNumber, SHA1 );

     // get the number of seconds since unix epoch:
     // (this will be 10 digits long until approx 2030)
     timeNow = unix_time()

     // check to see if user is in table already:
     sql = "SELECT user_id FROM RememberMe
            WHERE user_id = 'userID'";

     // connect to database:
     db = new DBCon();

     result = db->query( sql );

         // number of rows will always be 1 if user is in table:
         if ( result->rows != 1 )
             exists = true;
         else 
             exists = false;

     result->free_memory();

         if ( exists == true )
         {
             sql = "UPDATE RememberMe SET
                    user_id    = 'userID'
                    user_token = 'token'
                    token_salt = 'randomNumber'
                    time       = 'timeNow'";
         }
         else
         {
             sql = "INSERT INTO RememberMe
                    VALUES( 'userID', 'token', 'randomNumber', 'timeNow' )";
         }

     result = db->query( sql );

         // the affected rows will always be 1 on success
         if ( result->affected_rows != 1 )
         {
            print( "A problem occurred.\nPlease log in again." );
            quit();
         }

     result->free_memory();

     // create a new cookie named cookiemonster and store the key in it:
     // (we're not actually storing a score or birthday, its a false flag)
     set_cookie( "CookieMonster", escape("score="+ userID +"birthday="+ key );
} 
```

这段代码的作用是检查用户是否检查了记住我，并使用用户的键、令牌和盐以及时间填充数据库表（以便您可以对记住我实施时间限制特征）。

从这里您可以向您的网站添加代码，检查是否设置了**CookieMonster** cookie，*如果*设置了，您可以按照以下步骤强制执行其有效性：

> 1.  从提供的 cookie 中提取用户 ID 和密钥
>     
>     
> 2.  用userID查询数据库看是否
>     
>     
>     
>     ```
>      --> a) user has requested to be remembered
>     
>        --> b) check the time to see if they cookie is still valid
>     
>        --> c) extract the token and salt from database table record 
>     ```
>     
>     
> 3.  通过 encrypt() 函数调用运行令牌和盐，并与提供的密钥匹配。
>     
>     
> 4.  如果一切顺利，请创建一个新会话并让用户登录。

现在，每次用户访问您的站点时，他们都会登录，并且**如果他们的计算机遭到入侵，攻击者将无法访问他们的密码**

旁注：您应该始终要求您的用户在更改密码或电子邮件时提供密码，这样如果用户的 cookie 落入坏人之手，您的攻击者将无法窃取该帐户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T21:03:07.200

这个策略被认为是最佳实践：看看这篇文章：http: [//jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

# android - Android：4 SD卡权限

> ID：15454644
> 
> 赞同：1
> 
> 时间：2013-03-16T20:56:20.937
> 
> 标签：android, permissions, sd-card, file-access

我在 play market 上发布了应用程序，我总是在 android 2.3 模拟器上测试它，在手机 SG s plus-cyanogen mod 9 android 4.0.4 上，在 S ace 上用 2.3.6 测试它，它运行良好，但是当我的朋友下载它时在使用 android 4.2.2 的 HTC evo 上，她总是出错。我开始使用带有 android 4.2.2 的 nexus 4 的 pc 模拟器，但出现错误：

> 引起：libcore.io.ErrnoException：打开失败：EACCES（权限被拒绝）

我不知道该怎么做，我在清单中有权限，一切看起来都很好。如果有人有同样的问题，请给我解决方案，或者试试你的手机上是否有 android 4+ 我的 ap 是否可以工作。任何帮助都会有帮助；

！我在 6 部手机上尝试了应用程序，但它仅在 4.2.2 上不起作用；！他链接到应用程序 [https://play.google.com/store/apps/details?id=com.cvs.hiddennote#?t=W251bGwsMSwxLDIxMiwiY29tLmN2cy5oaWRkZW5ub3RlIl0](https://play.google.com/store/apps/details?id=com.cvs.hiddennote#?t=W251bGwsMSwxLDIxMiwiY29tLmN2cy5oaWRkZW5ub3RlIl0)。

# javascript - 将信息从 ruby 传递到 js 脚本标签

> ID：15454659
> 
> 赞同：-1
> 
> 时间：2013-03-16T20:57:56.157
> 
> 标签：javascript, ruby-on-rails

我有一个 Rails 应用程序，在检查访问用户个人资料页面的用户是否是当前用户（使用 ruby​​ 代码）后，根据条件逻辑的结果调用 JavaScript 方法，如下所示。

有没有办法将用户名（在 <%= @user.name %> 的 ruby​​ 代码中可用）传递给脚本标签，这样我也可以将它传递给被调用的 javascript 函数（除了我传递的另一个参数）。

**/views/users/show.html.erb**

```
<% if current_user?(@user) %> #@user represents the user who's profile page is being visited

        <script type='text/javascript'> 
        $(document).ready(function() {     #I want to get <%= @user.name %> inside here
          var currentuser = true; 
        app.views.user_view.compTemplates(currentuser)});
       </script>

<% else %>

   ...code ommitted...

<% end %> 
```

更新：

按照这个问题的第一个答案的建议，我在脚本标签中做了这个。

```
 var currentusername =  <%=  @user.name %>; 
```

但是，一旦 <%= @user.name %> 评估（在本例中为“Veronica”），Veronica 将首次出现在 js 代码中，现在正在注册错误“Veronica 未定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:03:33.977

我相信你正在寻找这个：[http ://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript)

给出的例子：

```
$('some_element').replaceWith('<%=j render 'some/element_template' %>'); 
```

或者

```
$('some_element').replaceWith('<%= escape_javascript render 'some/element_template' %>'); 
```

对于您的特定示例，您还可以执行以下操作：（我认为`to_json`不需要）

```
<script type='text/javascript'> 
  $(document).ready(function() {
    var currentuser = true;
    var userName = <%= @user.name.to_json %>;
  app.views.user_view.compTemplates(currentuser)});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:37:24.970

内联 Ruby 必须进入 #{} 标签。

```
var currentusername =  '#{ <%= @user.name %> }'; 
```

# oracle - 从游标打印聚合函数的结果

> ID：15454660
> 
> 赞同：0
> 
> 时间：2013-03-16T20:58:08.393
> 
> 标签：oracle, plsql

如何使用记录变量检索游标实现中的计数值？

```
DECLARE 

   CURSOR cur_branch IS
    SELECT b.branchname, COUNT(a.applicantid) 
      FROM branch b, applicant a
     WHERE b.branchid=a.optedbranch
     GROUP BY b.branchname ORDER BY b.branchname;

BEGIN

   DBMS_OUTPUT.PUT_LINE('Branch Name No of Applicants opted');

   FOR v_branchrec IN cur_branch
   LOOP

      DBMS_OUTPUT.PUT(RPAD(v_branchrec.branchname,20)||'    '); 
      DBMS_OUTPUT.PUT_LINE(v_branchrec.COUNT(applicantid));

   END LOOP;

END; 
```

`DBMS_OUTPUT.PUT_LINE(v_branchrec.COUNT(applicantid));`这会在声明必须声明 COUNT 并且只能在 SQL 中使用而不能在 PL/SQL 中使用时引发错误。

我想检索每个分支机构的学生人数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:26:30.017

您应该为该列定义一个别名`COUNT(a.applicantid)`并通过该别名引用该列。

```
 SELECT b.branchname, COUNT(a.applicantid) cnt FROM
...
 DBMS_OUTPUT.PUT_LINE(v_branchrec.cnt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:09:52.530

您需要做的就是：

1.  在游标定义中为 COUNT(a.applicantid) 列使用别名：

    ```
     SELECT b.branchname, COUNT(a.applicantid) as cnt 
    ```

2.  在`LOOP`使用中

    ```
     DBMS_OUTPUT.PUT_LINE(v_branchrec.cnt); 
    ```

# c# - VSTO c#检查单元格是否为空

> ID：15454664
> 
> 赞同：3
> 
> 时间：2013-03-16T20:58:33.750
> 
> 标签：c#, excel, vsto

如果有一个单元格的引用，如何检查它是否为空？

伪代码：

```
Excel.Range cell = (Excel.Range)MyRange.Cells[1, 1];
if (cell.value2.IsNull) { Stuff }
else { Other Stuff } 
```

不幸的是，`IsNull`不存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T03:20:05.060

你想多了。`Range.Value2`返回一个对象。因此，如果您想检查空引用，只需执行

```
if(Range.Value2 == null)
{
  //blah blah
}
else
{
  //blah blah
} 
```

您可能应该更多地查看在线 API 文档。

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.value2(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.value2%28v=office.14%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms262200(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ms262200%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-01T23:02:49.143

```
if (mWSheet1.Cells[z, y + 3].Value2 != null) 
```

或者

```
orderPc.ManufactureDate = Convert.ToString(mWSheet1.Cells[z, y + 3].Value2); 
```

# ios - 为什么我的 UILabel 没有随着日期选择器的变化而更新？

> ID：15454665
> 
> 赞同：0
> 
> 时间：2013-03-16T20:58:49.413
> 
> 标签：ios, objective-c

```
#import "DatePickerViewController.h"
#import <Parse/Parse.h>

@interface DatePickerViewController ()

@end

@implementation DatePickerViewController

@synthesize dateLabel;
@synthesize pick;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    UIBarButtonItem *saveDate = [[UIBarButtonItem alloc]
                                 initWithTitle:@"Save Date"
                                 style:UIBarButtonItemStyleDone
                                 target:self
                                 action:@selector(saveList:)];
    self.navigationItem.rightBarButtonItem = saveDate;
    pick = [[UIDatePicker alloc] init];
    [pick setFrame:CGRectMake(0,200,320,120)];
    [pick addTarget:self action:@selector(updateDateLabel:) forControlEvents:UIControlEventValueChanged];

}

-(void)saveList:(id)sender {
    // need to finish

}

-(IBAction)updateDateLabel {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterLongStyle];
    [formatter setTimeStyle:NSDateFormatterMediumStyle];
    dateLabel.text = [NSString stringWithFormat:@"%@", [formatter stringFromDate:pick.date]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:03:14.403

您对来自选择器的事件的注册正在使用一个需要一个参数的选择器（`@selector(updateDateLabel:)`需要一个表单的方法`-updateDateLabel:(id)arg`），而您实现的内容不带任何参数（`-updateDateLabel`）

当然，考虑到您已经从故事板中取消归档的选择器中重新分配了选择器，所有这些都没有实际意义。删除初始化代码并将 IBAction 连接到情节提要中的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:06:52.430

更改`-(IBAction)updateDateLabel {`为`-(IBAction)updateDateLabel:(id)sender {`

# java - 附加带有二维数组的文本文件

> ID：15454668
> 
> 赞同：1
> 
> 时间：2013-03-16T20:59:25.090
> 
> 标签：java, append, multidimensional-array

我有一种将二维数组的输入存储在`.txt`文件中的方法。然而，即使在 的末尾加上了真正的 put `FileWriter fw = new FileWriter("CBB.dat");`，通常允许在过去的项目中追加的东西，文件仍然只接收一个条目，然后用下一个条目覆盖它。这将如何解决？

```
public void Save(String[][] EntryList)
{
    try
    {
        File file = new File("CBB.dat");

        // if file doesnt exists, then create it
        if (!file.exists())
        {
            file.createNewFile();
        }
        if (EntryList[0][0] != null)
        {
            DataOutputStream outstream;
            outstream = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(file)));
            for (int row = 0; row < EntryList.length; row++)
            {
                for (int col = 0; col < EntryList[row].length; col++)
                {
                    if (EntryList[row][col] != null) outstream.writeUTF(EntryList[row][col]);
                }

                outstream.close();
            }
        }
        else System.out.print("Something is wrong");
    } catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:11:42.637

使用 a[`CharSequence`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/CharSequence.html)而不是 a `String[][]`（或者您也可以使用[可变参数参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)）：

```
public static void save(CharSequence entryList)
    {
        BufferedReader read;
        BufferedWriter write;
        File file = new File("CBB.dat");
        if (!file.exists())
        {
            try
            {
                file.createNewFile();
            } catch (Exception e)
            {
                e.printStackTrace();
            }
        }
        try
        {
            read = new BufferedReader(new FileReader(file));
            String complete = "";
            String line = null;
            while ((line = read.readLine()) != null)
            {
                complete += line + "\n";
            }
            read.close();
            write = new BufferedWriter(new FileWriter(file));
            write.append(complete);
            write.append(entryList);
            write.flush();
            write.close();
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    } 
```

# playframework-2.0 - playframework 2 jsRoutes 未在 zentasks 教程中定义

> ID：15454669
> 
> 赞同：1
> 
> 时间：2013-03-16T20:59:30.447
> 
> 标签：playframework-2.0

我一直在播放框架站点上的 zentasks 教程。我在教程的这一部分

[http://www.playframework.com/documentation/2.1.0/JavaGuide6](http://www.playframework.com/documentation/2.1.0/JavaGuide6)

昨晚它工作得很好，但是当我今天早上醒来时，我在 firefox->firebug jsRoutes is not defined 中遇到错误。我可以在代码中向上滚动并单击我脑海中的 /assets/javascripts/routes，它就在那里，javascript 中有 jsRoutes。我没有更改任何内容，但以防万一，我从 play 附带的示例文件夹中获得了 zentasks 应用程序的副本。我运行它并得到同样的错误。我担心我改变了一些东西，只是忘记了我的书面版本和 zentasks 应用程序的复制版本。所以我再次从示例文件夹中复制了 zentasks 应用程序并运行它。它工作正常，没有错误，点击应用程序中的按钮也没有问题。所以我想我已经改变了一些东西并忘记了，我准备开始追踪问题。

然后奇怪的事情发生了。我运行了我自己编写的应用程序，它工作了！！！错误消失了。我尝试了我制作的第一个副本，它也有效。然后我用我的应用程序版本尝试了 eclipse 中内置的网络浏览器，但它没有工作。然后我尝试在 chrome 中运行它，我收到相同的错误“jsRoutes 未定义”，但我可以向上导航并单击 javascript 源 /assets/javascripts/routes，我可以在脚本中看到 jsRoutes。我继续学习本教程，因为它在 Firefox 中工作。在本教程结束时，您将使用 jUnit 测试网页。测试失败并出现相同的错误“jsRoutes”未定义。我包括屏幕截图。有人能帮忙吗？

![初始错误](../Images/68c358b337cc0f1271b2b52c0bdefeca.png)

![脚本的链接](../Images/1647ade6b7d65165a48cd058a0a8361c.png)

![显示 jsRoutes 定义的脚本](../Images/c452ff6d7339f7729ed0db51bf393d40.png)

![在火狐工作](../Images/21749e30cdcf190987e9196ca1134e5b.png)

![测试控制台中的错误](../Images/8caa98ed38062a6fd20473d8b99078f5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T00:35:18.613

过去两个小时我一直在与同样的问题作斗争，错误很愚蠢但不容易看到。

秘密在文件中`conf/routes`：如果你有这样的东西：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Application.index()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

GET     /login                          controllers.Application.login()

POST    /login                      controllers.Application.authenticate()

GET     /logout                     controllers.Application.logout()

POST    /projects                   controllers.Projects.add()
POST    /projects/groups            controllers.Projects.addGroup()
DELETE  /projects/:project          controllers.Projects.delete(project: Long)
PUT     /projects/:project          controllers.Projects.rename(project: Long)

GET     /projects/:project/tasks    controllers.Tasks.index(project: Long)
POST    /projects/:project/tasks    controllers.Tasks.add(project: Long, folder: String)

GET     /assets/javascripts/routes          controllers.Application.javascriptRoutes() 
```

当尝试下载javascriptRoutes时，由于规则的原因，它没有正确下载，`GET /assets/*file controllers.Assets.at(path="/public", file)`它具有更高的优先级。相反，这条规则必须在 . 的末尾`conf/routes`，所以文件应该是这样的：

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Application.index()

GET     /login                          controllers.Application.login()

POST    /login                      controllers.Application.authenticate()

GET     /logout                     controllers.Application.logout()

POST    /projects                   controllers.Projects.add()
POST    /projects/groups            controllers.Projects.addGroup()
DELETE  /projects/:project          controllers.Projects.delete(project: Long)
PUT     /projects/:project          controllers.Projects.rename(project: Long)

GET     /projects/:project/tasks    controllers.Tasks.index(project: Long)
POST    /projects/:project/tasks    controllers.Tasks.add(project: Long, folder: String)

GET     /assets/javascripts/routes          controllers.Application.javascriptRoutes()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file) 
```

使用该解决方案，我认为您的错误将消失=)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T00:58:45.163

我有同样的问题。我的解决方案是将我的 main.coffee 文件与示例库中正在运行的 zentask 应用程序中的文件进行比较。原来我的代码中存在缩进问题 - 一旦纠正它就可以正常运行。空格在咖啡脚本中很重要，我相信默认设置是 2 个空格代表一个标识。

# debugging - 为什么我的不可变对象会变异 Scala

> ID：15454670
> 
> 赞同：2
> 
> 时间：2013-03-16T20:59:32.593
> 
> 标签：debugging, scala, immutability

我在下面的代码中遇到了一个最令人不安的错误。即使我将其作为不可变 Map 传递，按钮 Map 也会发生变化。键保持不变，map 指向两个不可变的 Ints，但在下面您可以看到 map 在运行期间明显具有不同的值。我完全被难住了，不知道发生了什么。

```
def makeTrace(trace : List[(String)], buttons : Map[String, (Int,Int)],
  outputScreen : ScreenRegion, hashMap : Map[Array[Byte], String])
  : (List[(String,String)], Map[Array[Byte], String]) = {

println(buttons.toString)
//clearing the device
val clear = buttons.getOrElse("clear", throw new Exception("Clear Not Found"))
//clear.circle(3000)
val thisButton = new ScreenLocation(clear._1, clear._2)
click(thisButton)

//updates the map and returns a list of (transition, state)
trace.foldLeft((Nil : List[(String,String)], hashMap))( (list, trace) => {
  println(buttons.toString)
  val transition : String = trace
  val location = buttons.getOrElse(transition, throw new Exception("whatever"))
  val button = new ScreenLocation(location._1, location._2)
  button.circle(500)
  button.label(transition, 500)
  click(button)

  //reading and hashing
  pause(500)
  val capturedImage : BufferedImage = outputScreen.capture()
  val outputStream : ByteArrayOutputStream = new ByteArrayOutputStream();
  ImageIO.write(capturedImage, "png", outputStream)
  val byte : Array[Byte] = outputStream.toByteArray();
  //end hash

  //if our state exists for the hash
  if (hashMap.contains(byte)){ list match {
    case (accumulator, map) => ((transition , hashMap.getOrElse(byte, throw new Exception("Our map broke if"))):: accumulator, map)
  }
  //if we need to update the map
  }else list match {
    case (accumulator, map) => {
      //adding a new state based on the maps size
      val newMap : Map[Array[Byte], String] = map + ((byte , "State" + map.size.toString))
        val imageFile : File = new File("State" + map.size.toString + ".png");
        ImageIO.write(capturedImage, "png", imageFile);
      ((transition, newMap.getOrElse(byte, throw new Exception("Our map broke else"))) :: accumulator, newMap)
    }        
  }  
}) 
```

}

在调用此函数之前，我将映射初始化为指向不可变对象的不可变映射。

```
 val buttons = makeImmutable(MutButtons)
    val traceAndMap = TraceFinder.makeTrace(("clear" ::"five"::"five"::"minus"::"five"::"equals":: Nil), buttons, outputScreen, Map.empty) 
```

makeImmutable 在哪里

```
def makeImmutable(buttons : Map[String, (Int,Int)]) : Map[String, (Int,Int)] = {
  buttons.mapValues(button => button match {
    case (x, y) => 
      val newX = x
      val newY = y
      (newX,newY)
  })
} 
```

这是输出，你可以看到清除、减号和五的状态变化

```
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (959,345), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (881,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,441), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (881,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377))
Map(equals -> (959,425), clear -> (842,313), minus -> (920,409), five -> (842,377)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:16:07.523

首先，尝试散布`println(map.getClass)`在您的代码周围。确保它确实是您认为的地图。`immutable`它的包名中应该有，例如：

```
scala> println(Map(1->1, 2->2, 3->3, 4->4).getClass)
class scala.collection.immutable.Map$Map4 
```

其次，确保您打印的地图与您认为的完全相同；使用参考身份哈希码是一个很好的方法：`println(System.identityHashCode(map))`.

很有可能这些事情之一不会给你预期的结果。然后你只需要找出问题在哪里泄漏。没有一个完整的可运行示例，如果没有过多的代码凝视，很难提供更好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:30:06.237

我怀疑你在 makeImmutable 函数的范围内有一个 scala.collection.Map 的导入，它允许你将 MutButtons（可能是一个可变的 Map）传递给 makeImmutable 函数。Map 上的 mapValues 方法返回底层地图的视图，而不是不可变的副本。例如：

```
import scala.collection.Map
import scala.collection.mutable.{Map => MutableMap}

def doubleValues(m: Map[Int, Int]) = m mapValues { _ * 2 }

val m = MutableMap(1 -> 1, 2 -> 2)
val n = doubleValues(m)
println("m = " + m)
println("n = " + n)
m += (3 -> 3)
println("n = " + n) 
```

运行这个程序会产生这个输出：

```
m = Map(2 -> 2, 1 -> 1)
n = Map(2 -> 4, 1 -> 2)
n = Map(2 -> 4, 1 -> 2, 3 -> 6) 
```

要从 makeImmutable 返回真正不可变的映射，请在映射值后调用 .toMap。

# java - 我如何编写带有未知单词的JSGF语法文件？

> ID：15454673
> 
> 赞同：3
> 
> 时间：2013-03-16T20:59:47.120
> 
> 标签：java, voice-recognition, cmusphinx

我如何编写带有未知单词的JSGF语法文件？

例如，我想匹配“请给我椅子”、“请给我书”等。

使用类似的结构

```
public <sent> = Give me <any_word> please; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:59:56.973

您不能为任何单词创建语法。

您可以列出预定义的单词列表，而不是`<any_word>`这个列表可能很大，比如 100000 个条目，涵盖 99% 的英语语言。

# java - JUnit 的 build.xml 文件在 Windows 上可以，但在 OS X 上不行

> ID：15454677
> 
> 赞同：0
> 
> 时间：2013-03-16T20:59:58.360
> 
> 标签：java, macos, ant, junit, build.xml

我有一个问题，如果您能提供帮助，我将不胜感激。所以，我有使用 JUnit 的 ant 的 build.xml 文件，并且在 Windows 操作系统上一切正常。但是，如果我将 build.xml 复制/粘贴到 Mac OS 上的同一个 java 项目中，它甚至无法构建或无法运行测试。

这是我的 build.xml（我在 build.xml 中为在 Mac 上运行而更改的内容以注释和粗体显示）：

```
<project name="Brojevi" default="jar" basedir="."
xmlns:jacoco="antlib:org.jacoco.ant">

<description>
Build datoteka za projekt Brojevi.
</description>

<property name="src" location="src"/>
<property name="src.java" location="${src}/main/java"/>
<property name="src.test" location="${src}/test/java"/>
<property name="build" location="build"/>
<property name="build.classes" location="${build}/classes"/>
<property name="build.test" location="${build}/test"/>
<property name="dist" location="dist"/>

<property name="junit.home" value="d:/usr/junit-4.11" /> <!--changed path -->
<property name="jacoco.home" value="d:/usr/jacoco-0.6.3" /> <!--changed path -->

<taskdef uri="antlib:org.jacoco.ant"
resource="org/jacoco/ant/antlib.xml">
<classpath path="${jacoco.home}/lib/jacocoant.jar"/>
</taskdef>

<path id="compile.path">
<pathelement location="${build.classes}"/>
</path>

<path id="test.path">
<path refid="compile.path"/>
<pathelement location="${build.test}"/>
<fileset dir="${junit.home}">
<include name="**/*.jar"/> <!--changed path -->
</fileset>
</path>

<target name="init">

<tstamp/>

<mkdir dir="${build}"/>
<mkdir dir="${dist}"/>
</target>

<target name="compile" depends="init"
description="Prevođenje izvornog koda">
<mkdir dir="${build.classes}"/>

<javac srcdir="${src.java}" destdir="${build.classes}"
classpathref="compile.path"  <!--changed to "test.path" -->
encoding="UTF-8" debug="on"
debuglevel="lines,vars,source"
includeAntRuntime="false" />
</target>

<target name="compile-tests" depends="compile"
description="Prevođenje izvornog koda testova">
<mkdir dir="${build.test}"/>

<javac srcdir="${src.test}" destdir="${build.test}"
classpathref="test.path"
encoding="UTF-8" debug="on"
debuglevel="lines,vars,source"
includeAntRuntime="false" />
</target>

<target name="run-tests" depends="compile-tests"
description="Izvođenje definiranih testova" >
<mkdir dir="${dist}/test-reports/xml"/>
<mkdir dir="${dist}/test-reports/html"/>
<mkdir dir="${dist}/test-reports/coverage"/>

<jacoco:coverage
destfile="${dist}/test-reports/xml/jacoco.exec">
<junit printsummary="yes" haltonfailure="yes"
fork="true" forkmode="once">
<classpath refid="test.path" />

<formatter type="plain"/>
<formatter type="xml"/>

<batchtest fork="yes" todir="${dist}/test-reports/xml">
<fileset dir="${src.test}">
<include name="**/*Test*.java"/>
</fileset>
</batchtest>
</junit>
</jacoco:coverage>

<junitreport todir="${dist}/test-reports/xml">
<fileset dir="${dist}/test-reports/xml">
<include name="TEST-*.xml"/>
</fileset>
<report format="frames" todir="${dist}/test-reports/html"/>
</junitreport>

<jacoco:report>
<executiondata>
<file file="${dist}/test-reports/xml/jacoco.exec"/>
</executiondata>

<structure name="${ant.project.name}">
<classfiles>
<fileset dir="${build.classes}"/>
<fileset dir="${build.test}"/>
</classfiles>
<sourcefiles encoding="UTF-8">
<fileset dir="${src.java}"/>
<fileset dir="${src.test}"/>
</sourcefiles>
</structure>

<html destdir="${dist}/test-reports/coverage"/>

</jacoco:report>

</target>

<target name="clean"
description="Brisanje generiranog sadržaja" >

<delete dir="${build}" failonerror="false" />
<delete dir="${dist}" failonerror="false" />
</target>

</project> 
```

我不明白的是，如果我不将 classpathref 从“compile.path”更改为“test.path”（我发表评论的第四件事也是最后一件事），那么我会收到消息 BUILD FAILED 和那个包 org.junit不存在。所以如果我输入“test.path”，我会收到消息 BUILD SUCCESSFUL，但没有完成任何测试（JUnit 生成的 index.html 表示没有完成任何测试，并且 JUnit 生成的 xml 文件也是空的）。我必须改变什么才能让它工作？谢谢你的帮助

* * *

编辑在寻找错误 5 天后终于**解决了。**当然，这是愚蠢的。我的测试文件与源代码位于同一目录中，而不是在测试目录中。感谢 evreyone 的帮助，很抱歉打扰您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:27:22.857

（这可能是一个评论，但我需要一些格式）

`debug`使用 -选项运行 ant 。将输出重定向到文件。然后查找包含字符串的消息 `'dropping'`。这表明路径有问题，并且 ant 忽略了某些 jar，因为它们没有找到。

其次避免路径的硬编码。如果需要，您可以从[环境变量](http://ant.1045680.n5.nabble.com/Reading-environment-variables-in-ant-script-directly-td1353555.html)中获取值 或传入命令行属性。例如`-Djunit.home=/my/new/path`

# html - 主 div 溢出的透明标题

> ID：15454682
> 
> 赞同：2
> 
> 时间：2013-03-16T21:00:43.663
> 
> 标签：html, css, header, transparent, underflow

我一直在整个互联网上寻找这个问题的答案，但我就是找不到答案。我有一个透明的标题，里面有一个与我的背景相同的背景图像，我想要我的主 div在其下方滚动以隐藏文本。这是HTML：

```
<body>
    <div class="wrapper">
    <div class="top">
    <!-- This is my header -->
    </div>
    <div class="main">
    [.....]
    </div> 
```

这是CSS：

```
.top {
    background-image:url("http://img138.imageshack.us/img138/9215/headerqrk.png") no-repeat top center fixed;
    margin-top:0px;
    height:100px;
    width:1000px;
    margin-left:auto;
    margin-right:auto;
    vertical-align:central;
    padding-left:0px;
    padding-right:opx;
}

.main {
    position:absolute;
    top:100px;
    bottom:20px;
    left:0;
    right:0;
    width:990px;
    margin:0 auto;
    padding-top:10px;
    padding-left:5px;
    padding-right:5px;
    z-index:-1;
} 
```

我制作了一个 jsFiddle，可以在这里找到：http: [//jsfiddle.net/qcaJJ/](http://jsfiddle.net/qcaJJ/)。你能帮我看看如何让它工作吗？提前致谢！

**附言。**请不要介意页脚，我已经使用了我另一页的页脚，我不希望这个页出现在这个页面上：p

**pps。**如果有人知道让导航保持在原位和 main2 div 滚动的方法，那么您就是我的英雄！有点新的 HTML 和 CSS ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:07:37.443

**在这里查看我的 JSFiddle：http: [//jsfiddle.net/qcaJJ/3/](http://jsfiddle.net/qcaJJ/3/)**

您需要`fixed`为标题设置一个位置，而不是为页面的所有其余部分设置一个绝对位置。

```
.header{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100px;
    background:red;
}

.content{
    margin-top:100px;
    font-size:180%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:26:15.557

除了为标题使用固定位置外，正如其他答案所指出的那样，您还使用了具有透明度的背景图像，因此当主要部分在下方滚动时，您仍然可以看到它。您需要像这样添加背景颜色，以确保标题 div 覆盖下面滚动的内容：

```
.top {
background: #fff url("http://img138.imageshack.us/img138/9215/headerqrk.png") no-repeat top center fixed; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:08:42.950

`top`必须是这样`position:fixed`才能工作。这样可以确保它始终卡在屏幕顶部。

您可能还希望将 设置`z-index`为类似的东西，`1000`以便它始终位于其他所有内容之上。

# ios - 检测 MKOverlay 上的触摸

> ID：15454683
> 
> 赞同：0
> 
> 时间：2013-03-16T21:00:46.837
> 
> 标签：ios, objective-c, mkmapview, mkoverlay

如何检测 MKOverlay 或 MKPolyline 视图上的触摸事件？我已经尝试过[这个](https://stackoverflow.com/questions/3472461/mkoverlayview-and-touches)并在 MKPolylineView 上添加了 Tapgesture 但没有成功。

```
 - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
         MKPolyline *mapPoly = (MKPolyline *)overlay;

                MKPolylineView *_ucPolyView = [[MKPolylineView alloc] initWithPolyline:mapPoly];

                _ucPolyView.strokeColor = [UIColor redColor];

    [_ucPolyView setUserInteractionEnabled:YES];
         UITapGestureRecognizer *polylineTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(polylineTapped:)];
            polylineTap.numberOfTapsRequired = 1;
            [_ucPolyView addGestureRecognizer:polylineTap];

}

-(void)polylineTapped:(UITapGestureRecognizer *)tapGesture
{
    NSLog(@"Polyline is %@",tapGesture.view);
} 
```

但是 polylineTapped 方法没有被解雇。我想要实现的只是在用户点击该折线时显示一个显示折线详细信息的弹出视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T13:07:06.337

即使命中超出范围，您也必须修改视图 hitTest 以检查其子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:01:17.497

我遇到了同样的问题，得出的结论是 MKMapView 吃掉了所有会传播到子视图（例如 MKOverlayView）的事件。我想 MKMapView 需要完全控制触摸事件才能进行捏合和缩放等。

# algorithm - 原始数据中的模式发现

> ID：15454688
> 
> 赞同：4
> 
> 时间：2013-03-16T21:01:28.647
> 
> 标签：algorithm, pattern-matching, sequence, repeat

我正在寻找一种算法来发现原始数据（非ASCII）中的重复模式。

可配置的最短和最大模式尺寸。要搜索的数据大小将达到数万字节。

例如，给定以下数据：

```
AB CD 01 AB CD 02 EF 03 02 EF 04 02 EF 
```

将输出遇到重复模式的次数。在这种情况下：

```
ABCD x2
02EF x3 
```

我看过几种算法，例如后缀树，但通常似乎是基于字符串的。

这将用 Python 编写，但我对所涉及的概念而不是实际实现更感兴趣。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T22:40:57.897

我会选择像[Lempel-Ziv-Welch这样的算法](http://en.m.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch)

算法的内部字典将保存模式字符串，输出（即压缩数据）将表示这些子字符串的位置。从数据中获取计数是微不足道的，而且该算法也很容易实现。

请注意，数据压缩上下文中的“字符串”并不意味着文本。二进制数据只是使用 256 个不同字节值的字母表。

# java - 如何将对象作为 JSON 发布以从 Jax RS 客户端添加到服务器

> ID：15454690
> 
> 赞同：0
> 
> 时间：2013-03-16T21:01:42.883
> 
> 标签：java, json, rest, post, client

我尝试在java中学习rest webservice。我写了一个服务器jboss。我可以从服务器获取列表，但无法将对象发布到服务器。我尝试使用 restclient 发布。这是成功的。第一个块是获取，第二个块是发布，最后一个块是来自客户端的请求。客户端项目是普通的java项目。它不是 web、jboss 或者它不像 jackson lib。如何将对象作为 JSON 发布以从 Jax RS 客户端添加到服务器？

```
@GET
@Path("/categories")
@Produces(MediaType.APPLICATION_JSON)
public List<CategoryVO> getAllCategories(){
    List<Category> cats =  entityManager.createQuery("select c from Category c").getResultList();       
    ArrayList<CategoryVO> results = new ArrayList<CategoryVO>();        
    for (Category c : cats) {
        results.add(new CategoryVO(c.getTitle(), c.getId()));
    }       
    return results;
}

@POST
@Path("/categoryAdd")
@Consumes(MediaType.APPLICATION_JSON)
public void saveCategory(CategoryVO catVO){
    System.out.println("Save Method is running");
    Category cat = new Category(catVO.getTitle());
    entityManager.persist(cat);
}

public static void main(String[] args) {
    URL url = null;
    HttpURLConnection con;
    try {
        url = new URL(
                "http://localhost:8080/RestWS/rest/NetasRestWS/categories");
        con = (HttpURLConnection) url.openConnection();     
        InputStreamReader reader =  new InputStreamReader( con.getInputStream());
        while(true){
                int x =reader.read();
                if(x==-1)
                    break;
                System.out.print((char)x);
        }           
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# android - 如何增加围绕 Google 地图中当前位置的默认圆圈的大小？

> ID：15454691
> 
> 赞同：1
> 
> 时间：2013-03-16T21:01:44.583
> 
> 标签：android, google-maps-android-api-2, geometry

谷歌地图有一个围绕当前位置点的默认蓝色圆圈。我希望动态地改变它，即让它更大或更小。我怎样才能做到这一点？是否有内置方法来操作它，还是我必须使用覆盖或其他东西？

谷歌地图上的圈子：

![在此处输入图像描述](../Images/10e6f9a75c554617d83fd7fb9124432c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:04:08.803

您无法在 Google 地图中更改圆圈的大小，原因很简单，它的大小非常重要。

蓝色圆圈覆盖了您被放置的区域。定位技术并不精确，这个圈子是说“我们知道你在这里的某个地方，但不确定那里的确切位置”。

如果你被允许改变圆圈的大小，就会违背圆圈的目的。

# c++ - 适用于 Mac 和 MPI 的 C++ 代码分析/分析

> ID：15454692
> 
> 赞同：4
> 
> 时间：2013-03-16T21:01:53.007
> 
> 标签：c++, macos, profiling, mpi, code-analysis

我正在寻找适用于 MacOS 上的 C++ 的代码分析/分析工具。我知道有关于这个线程的帖子，但是我需要的应用程序非常具体，所以也许有人可以给我一些更具体的建议。

所以这是我的问题：我正在用 C++ 编写一个科学代码（硕士项目），所以它是一个纯控制台应用程序，没有提供交互性。该代码应该在大规模并行计算机上运行，​​因此我使用 MPI。但是，现在我还没有针对可扩展性进行优化，而只是针对单核性能。由于我不想将整个程序重写为串行程序，因此我只使用带有 1 个线程的 MPI。它工作正常，但优化器显然需要能够处理这个问题。

我要分析什么？好吧，从某种意义上说，代码并不是很复杂，因为它具有非常简单的结构，因此我所需要的只是程序在某些功能上花费多长时间的列表，这样我就知道它在哪里浪费了最多的时间，我可以测量加速我的优化。

感谢所有的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:40:06.437

您应该使用*Instruments.app*，其中包括 CPU 采样器和线程活动查看器......除此之外。（在 Xcode 中选择“产品 > 配置文件...”）

如果你想要更细粒度的东西，你可以检测你的代码。巧合的是，我为这样的场合写了一组分析宏:)

[https://github.com/nielsbot/Profiler](https://github.com/nielsbot/Profiler)

这将显示在检测例程中花费的时间很好的嵌套打印。（该页面上的说明）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:04:55.667

你试过 kcachgrind: [http://kcachegrind.sourceforge.net/html/Home.html](http://kcachegrind.sourceforge.net/html/Home.html)和 valgrind 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T21:50:08.693

我可以推荐[http://www.scalasca.org/](http://www.scalasca.org/)。之后您也可以将其用于并行性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T21:50:17.627

不要寻找“慢功能”，也不要寻找衡量不同部分使用的时间。这些概念是如此间接，以至于几乎无法告诉您要优化什么。

取而代之的是，在挂钟时间拍摄一些频闪 X 光片，了解整个程序在做什么，然后研究每一个，看看为什么程序会花费那一刻的时间。之所以效果更好，是因为它不是用功能性有色眼镜看的。它戴着有色眼镜，你可以判断程序是否需要做它正在做的事情。定位大问题非常准确。测量它们是不准确的，也不需要如此。

当您只是进行测量时会发生这种情况：您会在一堆例程中得到一堆数字。你看着他们说“这是什么意思？”。如果它没有告诉你应该修复什么，你就拍拍自己的后背，说程序必须是最佳的。实际上，您可能可以修复某些问题，但您无法从探查器中弄清楚。更重要的是，如果您确实找到并修复了它，它可以暴露您可以修复的其他内容，从而获得更大的加速。

这就是[*随机暂停*](https://scicomp.stackexchange.com/a/2719/1262)的意义所在。

# c# - Fluent Api 将实体框架多列作为主键

> ID：15454696
> 
> 赞同：65
> 
> 时间：2013-03-16T21:02:18.350
> 
> 标签：c#, .net, entity-framework, entity-framework-5

***这些是我的简化域类。***

```
public class ProductCategory
{
    public int ProductId { get; set; }
    public int CategoryId { get; set; }

    public virtual Product Product { get; set; }
    public virtual Category Category { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
} 

public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int? ParentCategoryId { get; set;} 
} 
```

***这是我的映射类。但它不起作用。***

```
public class ProductCategoryMap : EntityTypeConfiguration<ProductCategory>
{
    public ProductCategoryMap()
    {
        ToTable("ProductCategory");
        HasKey(pc => pc.ProductId);
        HasKey(pc => pc.CategoryId);
    }
} 
```

***我应该如何映射这些类来提供，以便可以在多个类别中看到一个产品？***

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-16T21:04:38.547

使用匿名类型对象而不是 2 个单独的语句：

```
HasKey(pc => new { pc.ProductId, pc.CategoryId }); 
```

来自 Microsoft Docs：[EntityTypeConfiguration.HasKey 方法](https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.modelconfiguration.entitytypeconfiguration-1.haskey)

> 如果主键由多个属性组成，则指定包括属性的匿名类型。例如，在 C#`t => new { t.Id1, t.Id2 }`和 Visual Basic .Net`Function(t) New With { t.Id1, t.Id2 }`中。

# java - 番石榴：Multimap从集合中获取对象

> ID：15454699
> 
> 赞同：2
> 
> 时间：2013-03-16T21:02:36.850
> 
> 标签：java, guava

我对使用番石榴很陌生，我试图从多图值集合中获取对象。我试过使用`Iterables.transform`，但我不知道如何使用它来获取对象。你能帮我举个例子吗？我感谢每一个帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:29:42.247

```
for(Collection<V> values : multimap.values()){
  for(V value : values){
    value.doSomething();
  }
} 
```

# jquery - jQuery - 单击 href="#" 时防止默认行为（无类或 id）

> ID：15454702
> 
> 赞同：1
> 
> 时间：2013-03-16T21:02:58.390
> 
> 标签：jquery

我有一个需要更新的现有脚本。它包含许多结构如下的链接：

```
<a href="#" onclick="showDialog();return false;">someText</a>

function showDialog(){
$("#modal").dialog("open");
return false;
} 
```

有些有类或 id，有些不是

我想使用 preventDefault 但不确定在没有类或 id 时使用它的最佳方法是什么。

这个问题的重点是在不添加类或更改链接结构的情况下解决问题。我需要一个与链接一起使用的解决方案，因为它们是在现有脚本中编码的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:12:40.867

你为什么不使用 javascript:void(null); 作为href？

```
<a href="javascript:void(null);" onclick="showDialog(); return false;">SomeText</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:14:39.080

由于您使用的是 jQuery，我会像这样对其进行重组...

HTML

```
<a href="#" class="dialog-link">Text</a> 
```

JS

```
<script>
$(document).ready(function(){
    $('.dialog-link').on('click', function(e){
        e.preventDefault();
        $("#modal").dialog("open");
    });
});
</script> 
```

使用`return false`时不需要`preventDefault`。

# python - 从 Google App Engine Python 应用程序访问 Google Drive

> ID：15454708
> 
> 赞同：6
> 
> 时间：2013-03-16T21:03:33.840
> 
> 标签：python, google-app-engine, google-drive-api

我有一个现有的具有很多功能的 Google App Engine Python 应用程序。我现在想将 Google Drive 集成到应用程序中。具体来说，我希望我的应用能够：

1.  在我的用户的 Google Drive 中创建一个空文件，我的用户可以在其中创建一个 Google Doc。
2.  从 Google Drive 中检索该文件以在我的应用程序中进行进一步处理。
3.  定期将其发送回 Google Drive，以便用户可以将其作为 Google Doc 进行进一步编辑。

如果知道如何做我想做的事情的人可以将我引导到满足我的特定要求的特定 Google 网页，我将永远感激不尽（不是一般的答案，例如“请参阅 DrEdit 示例”） . 提前致谢！

***更新：***

根据`drive-v2-python-appengine`答案 1 中的建议生成的示例代码，这是我的带有 RequestHandler 的程序，用于创建一个空文件：

```
import os
import webapp2

import io

from google.appengine.api import memcache

import httplib2
from apiclient.discovery import build
from apiclient.http import MediaIoBaseUpload
from oauth2client.appengine import oauth2decorator_from_clientsecrets

decorator = oauth2decorator_from_clientsecrets(
    os.path.join(os.path.dirname(__file__), 'client_secrets.json'),
    scope=[
        'https://www.googleapis.com/auth/drive',
    ])

http = httplib2.Http(memcache)
drive_service = build("drive", "v2", http=http)

class CreateEmptyFile(webapp2.RequestHandler):
    @decorator.oauth_required
    def get(self):
        body = {
            'title': 'Sample Document',
            'description': 'A sample document',
            'mimeType': 'text/plain'
        }
        media_body = MediaIoBaseUpload(io.BytesIO(""), mimetype='text/plain', resumable=True)
        file = drive_service.files().insert(body=body, media_body=media_body).execute()
        self.redirect("/synopsis") 
```

测试有点混乱，因为偶尔当我运行它时，包括第一次，它会调出访问请求页面，但大多数时候它不会。我已使用[https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)撤消对云端硬盘的访问权限，并且云端硬盘不再显示在列表中，但我想存在一个小时或更长时间的时间延迟用于执行访问撤销。不确定，也没有看到它记录在案。

无论如何，如果我注释掉对 的调用`drive_service.files().insert()`，它不会中止，并重定向到我的概要页面。我相信这意味着授权工作正常，因为它就像生成的示例代码一样。

但是，如果我取消注释`insert`并使用`resumable=True`媒体正文，我会得到：

```
ResumableUploadError: Failed to retrieve starting URI. 
```

如果我使用`resumable=False`，我会得到：

```
HttpError: <HttpError 401 when requesting https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart&alt=json returned "Login Required"> 
```

所以我似乎能够通过 OAuth 2.0 授权，但无法插入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:47:24.803

请尝试我们的快速入门应用程序： [https ://developers.google.com/api-client-library/python/start/installation](https://developers.google.com/api-client-library/python/start/installation)

您可以创建一个快速启动应用程序引擎应用程序，这对您创建初始设置很有用。具体用例请参考[驱动 API 参考](https://developers.google.com/drive/v2/reference/)。

# android - 如何使 for() 循环花费更少的时间（android）？

> ID：15454712
> 
> 赞同：-2
> 
> 时间：2013-03-16T21:03:53.120
> 
> 标签：android, optimization, iteration

我正在为安卓设备制作一个应用程序。我的应用程序中有一个函数，它有 2 个“for 循环”，每个循环 3200 次，访问一个 53 KB 的 .txt 文件（包含 3200 行）并将字符串与每一行进行比较，每次迭代一行。“for 循环”还包含 BufferedReader()、InputStreamReader()、InputStream() 和 StringTokenizer()。因此，当我在模拟器上运行应用程序时，它处理该功能大约需要 8 秒。这是不可接受的。如何将所需的时间减少到半秒或最多。1秒？谢谢！编辑：这是我的程序的一部分，带有 2 个 for 循环：

```
else if(a==2){
        String z="";
        try{
            InputStream is = getAssets().open("USCOUNTIES.txt");
            InputStreamReader iz=new InputStreamReader(is);
            BufferedReader bis = new BufferedReader(iz);

            int v=0;

            v=count("USCOUNTIES.txt");//counts number of lines in the .txt file
        //finding no. of counties to be displayed
            int counter=0;
            String pos;
            pos=Integer.toString(position);
            try{
            for(int i=0;i<v;i++){
                z=bis.readLine();
                //int x=pos.length();
                boolean a;
                //using stringtokenizer
                StringTokenizer st = new StringTokenizer(z, ","); 
                String substring;
                substring=(String) st.nextElement();
                a=substring.equals(pos);
                if(a==true){

                    counter=counter+1;

                }
            }}catch(Exception e){e.printStackTrace();}
            String array1[]=new String[counter];

            try{
                InputStream ig = getAssets().open("USCOUNTIES.txt");
                InputStreamReader ia=new InputStreamReader(ig);
                BufferedReader bos = new BufferedReader(ia);
            int j=0;
            for(int i=0;i<v;i++){
                z=bos.readLine();
                String[] split = z.split(",");
                if(split[0].equals(pos)){
                    array1[j]=split[1];
                    j=j+1;
                }

            }}
            catch(Exception e){e.printStackTrace();} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:57:34.003

如果我是你，我只会解析一次所有内容，然后随心所欲地处理它。

这段代码就是这样做的，包括解析`Integers`（我怀疑你需要这些作为值，而不是作为`Strings`）：

```
public void read() throws IOException {
    InputStream is = getAssets().open("USCOUNTIES.txt");
    InputStreamReader iz=new InputStreamReader(is);
    BufferedReader bis = new BufferedReader(iz);
    String line = "";
    String firstNumber = "";
    String secondNumber = "";
    String countyName = "";
    StringTokenizer st = null;
    HashMap<Pair, String> map = new HashMap<>();
    while((line = bis.readLine()) != null) {
        st = new StringTokenizer(line, ",");
        firstNumber = (String) st.nextElement();
        st = new StringTokenizer((String)st.nextElement(), ">");
        secondNumber = (String) st.nextElement();
        countyName = ((String) st.nextElement());
        countyName = countyName.substring(0, countyName.length()-1);
        int num1 = Integer.parseInt(firstNumber);
        int num2 = Integer.parseInt(secondNumber);
        map.put(new Pair(num1, num2), countyName);
    }
}

class Pair {
    int num1, num2;
    Pair(int num1, int num2) {
        this.num1 = num1;
        this.num2 = num2;
    }

    public boolean equals(Object other) {
        if (other instanceof Pair) {
            Pair np = (Pair) other;
            return this.num1 == np.num1 && this.num2 == np.num2;
        }
        return false;
    }

    public int hashCode() {
        return (Integer.valueOf(num1).hashCode() >> 13) ^ Integer.valueOf(num2).hashCode();
    };
} 
```

现在您可以使用以下行简单地检索每个`countyName`：

```
String s = map.get(new Pair(1,69)); 
```

这又回来了`Aleutians East`

我希望这能让你开始。

**编辑**

这段代码使用 2D `SparseArray`（很像`HashMap<Integer, Object>`）。这样，所有内容都按第一个数字排序。

```
public class Reader {
    private String firstNumber = "";
    private String secondNumber = "";
    private String countyName = "";
    private StringTokenizer stringTokenizer = null;
    private SparseArray<SparseArray<String>> sparseArray = new SparseArray<SparseArray<String>>();
    private SparseArray<String> temporarySparseArray = null;

    public void readFromIS() throws IOException {
        InputStream is = getAssets().open("USCOUNTIES.txt");
        InputStreamReader iz=new InputStreamReader(is);
        BufferedReader bis = new BufferedReader(iz);
        String line = null;
        while((line = bis.readLine()) != null) {
            readLine(line);
        }
    }

    public void readFromList() {
        String[] strings = {
                "0,1>Autauga;",
                "0,2>Baldwin;",
                "0,3>Barbour;",
                "1,69>Aleutians East;",     
                "1,68>Aleutians West;"
        };
        for (String line : strings) {
            readLine(line);
        }
    }

    private void readLine(String line) {
        stringTokenizer = new StringTokenizer(line, ",");
        firstNumber = (String) stringTokenizer.nextElement();
        stringTokenizer = new StringTokenizer((String)stringTokenizer.nextElement(), ">");
        secondNumber = (String) stringTokenizer.nextElement();
        countyName = ((String) stringTokenizer.nextElement());
        countyName = countyName.substring(0, countyName.length()-1);
        int num1 = Integer.parseInt(firstNumber);
        int num2 = Integer.parseInt(secondNumber);
        if (sparseArray.get(num1) == null) {
            sparseArray.put(num1, new SparseArray<String>());
        }
        temporarySparseArray = sparseArray.get(num1);
        temporarySparseArray.put(num2, countyName);
        sparseArray.put(num1, temporarySparseArray);
        temporarySparseArray = null;
    }

    public void test() {
        readFromList();
        String s = sparseArray.get(0).get(2);
        SparseArray sa = sparseArray.get(0);
        System.out.println(sa.size()); //should be 3
        System.out.println(s); // should be Baldwin
    }
} 
```

要检索所有以 0 开头的县`num1`，您只需使用：

```
SparseArray<String> startingWithZero = sparseArray.get(0); 
```

仅供参考： A`SparseArray`是`HashMap`for `integers`，因此并非所有内容都必须自动装箱（从`Integer`to `int`，因为您不能将原始类型放入 a `HashMap`）。

**EDIT2**你打印一维稀疏数组的地址。

```
public void printEverythingStartingWithZero() {
    SparseArray<String> subSparseArray = sparseArray.get(0); //You first need a 1D sparseArray
    int key = 0;
    for(int i = 0; i < subSparseArray.size(); i++) {
       key = subSparseArray.keyAt(i);
       String county = subSparseArray.get(key); //county is the String in place (0,key)
       System.out.println(county);
    }
} 
```

您需要先检索一维数据`sparseArray`，前导零。

# asp.net - 在 asp.net 中使用带有 sqldatasource 的 postgres

> ID：15454714
> 
> 赞同：0
> 
> 时间：2013-03-16T21:03:58.013
> 
> 标签：asp.net, postgresql, web-config, connection, npgsql

我正在使用 npgsql 来连接到我的 postgres 数据库。现在我想在我的 web.config 中添加连接，以便能够使用 asp.net 的 sql 数据源标记。

以下是我到目前为止所做的

```
 <connectionStrings>
    <add name="constring" connectionString="Server=localhost; user id=postgres; Password=mypassword; Database='db_name';Trusted_Connection=True"/>
  </connectionStrings> 
```

但是一个错误显示登录错误，因为它使用我的个人资料帐户密码而不是 postgres 数据库密码。

知道如何解决吗？

这是我现在得到的错误：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

我想连接到 postgres no 到 sql server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:06:51.667

标准

```
Server=127.0.0.1;Port=5432;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

使用 Windows 安全性

```
Server=127.0.0.1;Port=5432;Database=myDataBase;Integrated Security=true; 
```

# android - 渲染脚本很慢，可以吗？

> ID：15454724
> 
> 赞同：3
> 
> 时间：2013-03-16T21:05:35.253
> 
> 标签：android, renderscript

我有两个图像饱和度过滤器的实现。一种使用 Java，另一种使用 Renderscript。实际上我的nexus 4设备上的renderscript比较慢，怎么可能？

Java实现：

```
public final void Saturation(Bitmap canvas, int saturation, boolean accumulate, int imageNumber)
{
    int height = canvas.getHeight();
    int width = canvas.getWidth();
    int[] pixels = new int[height*width];
    int[] resultPixels = new int[height*width];
    canvas.getPixels(pixels, 0, width, 0, 0, width, height);

    if (!accumulate)
    {
        for (int i = 0; i < pixels.length; i ++)
        {
            int red = Color.red(pixels[i]);
            int green = Color.green(pixels[i]);
            int blue = Color.blue(pixels[i]);

            double t = (double)red * 0.11 + (double)green * 0.59 + (double)blue * 0.3;
            red = (int)Math.round(Math.min((double)red + (t - (double)red) * saturation / 100.0, 255));
            green = (int)Math.round(Math.min((double)green + (t - (double)green) * saturation / 100.0, 255));
            blue = (int)Math.round(Math.min((double)blue + (t - (double)blue) * saturation / 100.0, 255));

            resultPixels[i] = Color.argb(Color.alpha(pixels[i]), red, green, blue);
        }
    }

    canvas.setPixels(resultPixels, 0, width, 0, 0, width, height);
} 
```

渲染脚本实现：

Java部分：

```
public static Bitmap saturate(Bitmap bmIn, float saturation, Context context, Resources resources)
{
    Bitmap bmOut = Bitmap.createBitmap(bmIn.getWidth(), bmIn.getHeight(),
            bmIn.getConfig());
    RenderScript rs = RenderScript.create(context);
    Allocation allocIn;
    allocIn = Allocation.createFromBitmap(rs, bmIn,
            Allocation.MipmapControl.MIPMAP_NONE,
            Allocation.USAGE_SCRIPT);
    Allocation allocOut = Allocation.createTyped(rs, allocIn.getType());
    ScriptC_saturation script = new ScriptC_saturation(rs, resources,
            R.raw.saturation);
    script.set_in(allocIn);
    script.set_out(allocOut);
    script.set_script(script);
    script.set_saturation(saturation);
    script.invoke_filter();
    allocOut.copyTo(bmOut);
    return bmOut;
} 
```

渲染脚本：

```
#pragma version(1)
#pragma rs java_package_name(ca.tutortutor.embossimage)

rs_allocation out;
rs_allocation in;
rs_script script;
float saturation;

void root(const uchar4* v_in, uchar4* v_out, const void* usrData, uint32_t x,
      uint32_t y)
{
    float4 current = rsUnpackColor8888(*v_in);

    float t = current.r * 0.11f + current.g * 0.59f + current.b * 0.3f;
    rsDebug("renderscript t = ", t);
    rsDebug("renderscript red before = ", current.r);
    current.r = fmin(current.r + (t - current.r) * saturation / 100.0f, 1.f);
    current.g = fmin(current.g + (t - current.g) * saturation / 100.0f, 1.f);
    current.b = fmin(current.b + (t - current.b) * saturation / 100.0f, 1.f);
    rsDebug("renderscript red after = ", current.r);

    *v_out = rsPackColorTo8888(current.r, current.g, current.b, current.a);
}

void filter()
{
    rsDebug("RS_VERSION = ", RS_VERSION);
    #if !defined(RS_VERSION) || (RS_VERSION < 14)
        rsForEach(script, in, out, 0);
    #else
        rsForEach(script, in, out);
    #endif
} 
```

我认为 renderscript 应该比 java 快得多，因为它应该使用 cpu 和本机代码的所有 4 个内核，甚至可能是 android 4.2.2 上的 gpu 内核。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T22:18:51.937

我立即可以看到您的 Renderscript 代码正在使用 rsDebug() 打印到日志中，这保证会很慢。尝试删除您的日志记录代码并再次测量时间。在这种情况下，Nexus 4 应该在 4 个 CPU 线程上执行。Nexus 4 目前不支持 GPU。

# java - 如何为 Jpanel 设置模型？

> ID：15454725
> 
> 赞同：1
> 
> 时间：2013-03-16T21:05:37.330
> 
> 标签：java, swing, user-interface

我想将一个类设置为 Jpanel 的模型，我已经为 Uni 的一个介绍编程类做了这个，但这是一个非常不优雅的实现。我确定有一个很好的设置方法，但我不知道/忘记了。

我之前使用的方法是将模型类作为参数传递给视图类，然后使用模型来确定它是什么类型的实例，然后根据此数据将特定图标加载到 gui。这是非常低效的，因为它总是必须检查某个位置的对象并重新加载所有内容。

我觉得这应该是相当直截了当的，但还没有找到正确的答案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T01:03:32.790

> 我想将一个类设置为 JPanel 的模型。

极好的。这正是每个 GUI 程序员应该做的。

> 我之前使用的方法是将模型类作为参数传递给视图类，然后使用模型确定它是什么类型的实例，然后根据此数据将特定图标加载到 GUI。

你有正确的想法。模型实例需要传递给 GUI 组件，以便它们可以访问模型的一部分。

在您的特定情况下，模型应该包含获取每个图标的方法，并且 GUI 组件将调用适合该组件的获取图标模型方法。

一般来说，如果您的 JPanel 有文本和按钮组件，那么您的模型应该包含这些文本和按钮组件的内容。如果您的 JPanel 有一个具有自己的数据模型的组件，例如 JTree，那么您可以将 DefaultTreeModel 保留在您的模型类中。

如果你愿意，你可以在你的 GUI 中为每个 JPanel 建立一个模型类。通常，您构建您的 GUI 模型，因此它是合乎逻辑的。

这是我的其他答案之一的真实示例：[Spirograph GUI](https://stackoverflow.com/a/10451793/300257)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:09:27.040

在大多数情况下实际上`JPanel`用作“容器”，并且它没有自己的`Model`接口，例如`JTable`或`JList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:39:34.240

就像他们说的，JPanel 没有模型。

但是，这里有一些种子代码，您可以使用它来尝试伪造它。

```
public abstract class GPanelModel {
    abstract public void setWhatEver();
    abstract public void getWhatEver();
    abstract public void doWhatEver();
}

public class GPanel<T extends GPanelModel> extends JPanel {
    final T t;
    public GPanel(final T model) {
        t = model;
    }
    public T getModel() {
        return t;
    }
} 
```

# android - 在水平滚动视图上方添加文本（Android）

> ID：15454731
> 
> 赞同：1
> 
> 时间：2013-03-16T21:06:17.773
> 
> 标签：android, text

所以我想在水平滚动视图上方的屏幕顶部居中显示一行文本。基本上，文本的第一行将显示您正在进行的调整，在其下方将显示水平滚动条，在其下方我将在稍后添加图像，我尝试了一些不同的东西，但它们似乎都在推动水平滚动条离开屏幕。关于如何做到这一点的任何建议？这是到目前为止的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black">

<HorizontalScrollView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollbars="none"
    android:layout_gravity="center" >

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="@color/near_black">

<Button
    android:id="@+id/e_button"
    android:text="@string/E" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginRight="10sp"
    android:background="@null"
    android:textSize="50sp"
    android:textStyle="bold"
    android:textColor="@color/white">
</Button> 
```

这继续通过几个按钮，我关闭了所有内容。那么关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:11:43.787

使*根* `LinearLayout`使用垂直方向：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/black"> 
```

然后在应该工作`Textview`的顶部添加一个。`HorizontalScrollView`

# ios - 如何在每个显示文本的触摸按钮后打印空间

> ID：15454732
> 
> 赞同：1
> 
> 时间：2013-03-16T21:06:31.720
> 
> 标签：ios, objective-c

这是我使用 Objective C 的第一天，每次触摸按钮时我都会尝试打印空间。非常感谢。

```
#import "ViewController.h"

@interface ViewController()

@end

@implementation ViewController

@synthesize display = _display;

-(IBAction)trickClicked:(UIButton *)sender{
    NSString *trick = [sender currentTitle];

    UILabel *myDisplay = self.display;
    NSString *currentText = myDisplay.text;
    NSString *newText = [currentText stringByAppendingString:trick];
    myDisplay.text = newText;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:13:20.233

尝试这个：

```
// NSString *newText = [currentText stringByAppendingString:trick];
NSString *newText = [NSString stringWithFormat: @"%@ %@", currentText, trick]; 
```

# jquery - 如何在 Prestashop 1.5.3 中用 Colorbox 替换 Fancybox？

> ID：15454734
> 
> 赞同：0
> 
> 时间：2013-03-16T21:06:48.443
> 
> 标签：jquery, fancybox, prestashop, colorbox

如何在 Prestashop 1.5.3.1 中用 Colorbox 替换 Fancybox？我找到了 24 个引用 Fancybox 的文件。

[文件](http://img600.imageshack.us/img600/9791/prestashop.png)

# tomcat - 对于 tomcat 7，settings.xml 在哪里？

> ID：15454738
> 
> 赞同：8
> 
> 时间：2013-03-16T21:07:25.477
> 
> 标签：tomcat, tomcat7, maven-tomcat-plugin

为了使用 tomcat 7 管理器（或`mvn tomcat:deploy`），我需要在某处放置一个 settings.xml 文件。

该文件将包含以下内容：

```
<server>
    <id>myserver</id>
    <username>myusername</username>
    <password>mypassword</password>
</server> 
```

这个文件去哪里了？

它是否需要在某处明确引用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T21:20:29.043

该`settings.xml`文件是[maven 设置](http://maven.apache.org/settings.html)的一部分，并不特定于 tomcat，尽管*tomcat-maven-plugin*使用在那里定义的服务器。

> settings.xml 文件可能存在两个位置：
> 
> ```
> The Maven install: $M2_HOME/conf/settings.xml
> A user's install: ${user.home}/.m2/settings.xml 
> ```
> 
> 前者 settings.xml 也称为全局设置，后者 settings.xml 称为用户设置。如果两个文件都存在，它们的内容将被合并，用户特定的 settings.xml 占主导地位。

[您可以在设置文档](http://maven.apache.org/settings.html#Servers)中找到定义服务器的确切语法。

# php - 在脚本中调整/裁剪多个图像

> ID：15454743
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:07:58.477
> 
> 标签：php, foreach, image-resizing

感谢您抽出宝贵的时间。像这里的许多其他人一样，我是 PHP 新手。在这个脚本的第一部分（注意//works）中，我已经将文件中的一些名称加载到 URL 中，以显示我想要的图像。这样可行。现在我需要帮助自动调整所有这些图片的大小和裁剪。请看一下这个脚本，看看你是否看到了我应该做的不同的事情。

```
 <?php 
  $file = 'serverlist.txt'; // works
  $servers = ''; // works
  $imgheight = 200; // ??
  $imgwidth = 200; // ??
  if ($handle = fopen($file, 'r')) { // works
    while (!feof($handle)) { // works
      $content = trim(fgets($handle)); // works
      $names = explode(' ', $content); // works
      foreach ($names as $name) { // works
        $servers .= '<img src="http://minecraft.net/skin/' . $name. '.png" alt="">'; //works. 
      }
      foreach ($servers as $imgservers) { // ?
        $skin = imagecreatefrompng($imgservers); // ?
        $face = imagecreatetruecolor($width, $height); // ?
        imagecopyresized($face, $skin, 0, 0, 8, 8, $width, $height, 8, 8); // ?
        imagecopyresized($face, $skin, 0, 0, 40, 8, $width, $height, 8, 8); // ?
      }

    }
   fclose($handle); // works
  }
?>

<html>
<head>
</head>
<body>
<?php
imagepng($face); // ?
 ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:10:52.367

`$servers`是所有附加在一起的图像的长字符串。在输出之前，您需要分离每个图像并单独处理它。

**编辑：** 读取文件时，您可以保存所有修改后的图像。然后在你的身体里，输出所有的图像：

```
$file = 'serverlist.txt';
$images = array();
...
    foreach ($names as $name) {
      $url = 'http://minecraft.net/skin/' . $name. '.png';
      $skin = imagecreatefrompng($url);
      ...
      imagecopyresized($face, $skin, 0, 0, 40, 8, $width, $height, 8, 8);
      $images[] = $face;
    }
...

</head>
<body>
  <?php
    foreach ($images as $image) {
      imagepng($image);
    }
  ?>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:14:12.777

你应该有你png的路径而不是Html标签。所以你必须改变 $servers

# linux - 在shell中附加两个文件的输出？

> ID：15454744
> 
> 赞同：0
> 
> 时间：2013-03-16T21:08:18.583
> 
> 标签：linux, bash, shell, awk, paste

我有两个这样的文件

**文件 1**

```
a
b
c 
```

**文件2** 

```
0
1
2 
```

我要输出

```
a,0
b,1
c,2 
```

像这样附加两个文件

> row(n) of file1 +","+ row(n) file2
> 对于每个 n，两个文件的总 n 相同

我想知道 shell 中是否有任何实用程序可以帮助我做到这一点，我不想为此或任何循环使用 java 文件读取文件写入。可以使用awk完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:12:13.110

你想要`paste`：

```
$ paste -d',' file1 file2
a,0
b,1
c,2 
```

它可以通过多种方式完成，`awk`其中一种：

```
$ awk 'FNR==NR{a[FNR]=$0;next}{print a[FNR]","$0}' file1 file2
a,0
b,1
c,2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T21:38:36.433

使用稍微被忽视的工具[`pr`](http://linux.die.net/man/1/pr)：

```
$ pr -m -t -s,  file1 file2
a,0
b,1
c,2 
```

# web-config - 无法从 Web.Config 读取 ApplicationSettings

> ID：15454746
> 
> 赞同：1
> 
> 时间：2013-03-16T21:08:37.563
> 
> 标签：web-config, appsettings

我已经搜遍了，我似乎无法解决这个问题。

我要做的就是从 web.config 中读取应用程序设置。

我在这里找到了一篇文章-但这不起作用。

我的代码：

```
return System.Web.Configuration.WebConfigurationManager.AppSettings[settingName]; 
```

我的 Web Config 确实有设置：

```
 <setting name="AirmetDataCacheExpiration" serializeAs="String">
    <value>5</value>
  </setting>
  <setting name="MetarDataCacheExpiration" serializeAs="String">
    <value>5</value>
  </setting>
  <setting name="TafDataCacheExpiration" serializeAs="String">
    <value>5</value>
  </setting> 
```

我的预感是这与我的 VS 解决方案中的 web.config 和 machine.config 相关...

那么如何确保我阅读的是正确的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:54:59.537

找到了答案。 [此](https://stackoverflow.com/questions/10251998/system-configuration-configurationmanager-does-not-work-in-visual-studio-designe)链接帮助引导我走上正确的道路。

```
So instead of using System.Configuration.ConfigurationManager["appsetting"] 
```

你用这个：

```
(string)Properties.Settings.Default[settingName].ToString(); 
```

# android-fragments - 片段 - 选项卡 - 进度对话框

> ID：15454753
> 
> 赞同：2
> 
> 时间：2013-03-16T21:09:44.933
> 
> 标签：android-fragments, progressdialog, android-tabs

晚上好，我使用 TabsListener 实现了一个具有 3 个选项卡（片段）的应用程序。当我按下第一个选项卡片段上的特定按钮时，我试图显示一个进度对话框。问题是进度对话框永远不会出现，其他一切正常。我对android很陌生，我相信答案很简单，但我花了很多时间试图找出解决方案。下面是我的代码

```

`public class AFragment extends DialogFragment {
    static TextView tx;
    Button bt;
    OnClickListener handler1;
    OnClickListener handler2;
    SQLiteDatabase mydb;
    int counter=0;
    private Button mStartActivityButton;
    public final static String ProgressInsert = "Please wait while data is being inserted...";
    public final static String ProgressSelect = "Please wait while your query is being executed ...";

    /**/

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        final View view;
        view=inflater.inflate(R.layout.afragment, container, false);
        final ProgressDialog pd = new ProgressDialog(view.getContext());
        pd.setCancelable(false);
        pd.setMessage("Working...");
        pd.isIndeterminate();
        //pd.setContentView(view);
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        tx = (TextView) view.findViewById(R.id.textView2);
        bt = (Button) view.findViewById(R.id.button1);
        mStartActivityButton = (Button)view.findViewById(R.id.start_file_picker_button);

        mStartActivityButton.setOnClickListener(handler2 = new View.OnClickListener() {
             public void onClick(View v) {
                 ((MainActivity) getActivity()).Browse_Button(view.getContext());
             }
        });
        bt.setOnClickListener(handler1 = new View.OnClickListener() {/////////This is the button i press and i want the progress dialog to appear!
            public void onClick(View v) {
                pd.show();
                tx.setText(((MainActivity) getActivity()).ShowRecs());  
                pd.hide();
            }
          });

        return view;
    }//////End of onCreateView!!!!!

    protected static void settxt(StringBuilder textt)
    {

        //mFilePathTextView.setText(textt);
        tx.setText(textt);
    }

}//////////End of Afragment Class!!!!!!!!!!!!` 

```

# symfony - Symfony2：对 ArrayCollection 的测试给出“无法访问的字段”

> ID：15454760
> 
> 赞同：8
> 
> 时间：2013-03-16T21:10:40.217
> 
> 标签：symfony, phpunit

在添加 ArrayCollection 成员的表单功能测试中，有以下语句：

> $form['client[members][1][fname]'] = 'Benny';

字段名称已通过 DOM 检查器进行验证。

此行的控制台输出为：

```
InvalidArgumentException: Unreachable field "members"

G:\Documents\workspace\sym\vendor\symfony\symfony\src\Symfony\Component\DomCrawler\Form.php:459
G:\Documents\workspace\sym\vendor\symfony\symfony\src\Symfony\Component\DomCrawler\Form.php:496
G:\Documents\workspace\sym\vendor\symfony\symfony\src\Symfony\Component\DomCrawler\Form.php:319
G:\Documents\workspace\sym\src\Mana\ClientBundle\Tests\Controller\ClientControllerTest.php:57 
```

应该使用什么方法来测试添加 ArrayCollection 成员？

### 根据要求进行编辑（注意，开启跟踪重定向）：

> ```
>  //link to trigger adding household member form
>     $link = $crawler->selectLink('Add household member')->link();
>     $crawler = $client->click($link);
>     $form = $crawler->selectButton('Add client')->form();
>     $form['client[members][1][fname]'] = 'Benny';
>     $form['client[members][1][dob]'] = "3/12/1999";
>     $crawler = $client->submit($form);
>     $this->assertTrue($crawler->filter('html:contains("Client View Form")')->count() > 0); 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T10:56:04.640

我只是遇到了同样的问题，经过一番研究，我找到了一个对我有帮助的解决方案。 [从 Collection 表单类型中删除字段的解决方案](https://github.com/symfony/symfony/issues/4124#issuecomment-13229362) 这篇文章并不是您要找的，这篇文章是用于删除元素而不是添加新元素。但原理是一样的。我所做的而不是`$form->setValues() ... $form->getPhpValues()`我创建了一个数组，并发布了

在下面的示例`configurations`中，表单的字段是`Collection`

```
 $submitButton = $crawler->selectButton(self::BUTTON_ADD_APPLICATION);
    $form = $submitButton->form();
    $values = array(
        'Setup' => array(
            '_token' => $form['Setup[_token]']->getValue(),
            'name'   => 'My New Setup',
            'configurations' => array(
                0 => array(
                    'country' => 'HUN',
                    'value'   => '3',
                ),
                1 => array(
                    'country' => 'GBR',
                    'value'   => '0',
                ),
            ),
        ),
    );

    $client->request($form->getMethod(), $form->getUri(), $values); 
```

希望能帮助到你！并感谢 sstok 的原始解决方案！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-18T13:05:15.010

这可以通过从[`submit()`](https://github.com/symfony/symfony/blob/c8d28b1fa6a1103a8d4ff7f2777eb50419d118cf/src/Symfony/Component/BrowserKit/Client.php#L250-L263)方法中调用稍作修改的代码来完成：

```
// Get the form.
$form = $crawler->filter('button')->form();

// Get the raw values.
$values = $form->getPhpValues();

// Add fields to the raw values.
$values['task']['tag'][0]['name'] = 'foo';
$values['task']['tag'][1]['name'] = 'bar';

// Submit the form with the existing and new values.
$crawler = $this->client->request($form->getMethod(), $form->getUri(), $values,
    $form->getPhpFiles());

// The 2 tags have been added to the collection.
$this->assertEquals(2, $crawler->filter('ul.tags > li')->count()); 
```

此示例中包含新闻值的数组对应于一个表单，其中您有一个包含这些`name`s 的字段：

```
<input type="…" name="FORM_NAME[COLLECTION_NAME][A_NUMBER][FIELD_NAME_1]" />
<input type="…" name="FORM_NAME[COLLECTION_NAME][A_NUMBER][FIELD_NAME_2]" /> 
```

使用此代码，表单中已经存在现有字段（包括令牌），这意味着您不需要添加所有字段。

字段的数量（索引）无关紧要，PHP 会合并数组并提交数据，Symfony 会在相应的字段中转换这些数据。

您还可以从集合中删除元素：

```
// Get the values of the form.
$values = $form->getPhpValues();

// Remove the first tag.
unset($values['task']['tags'][0]);

// Submit the data.
$crawler = $client->request($form->getMethod(), $form->getUri(),
    $values, $form->getPhpFiles());

// The tag has been removed.
$this->assertEquals(0, $crawler->filter('ul.tags > li')->count()); 
```

* * *

来源：[http ://symfony.com/doc/current/book/testing.html#adding-and-removing-forms-to-a-collection](http://symfony.com/doc/current/book/testing.html#adding-and-removing-forms-to-a-collection)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T22:18:24.820

如果你用 javascript 修改表单，你不能用 symfony 测试框架来测试它。这样做的原因是 symfony 提供的 DomCrawler 只获取静态 HTML 并对其进行解析，而没有考虑到具有图形用户界面（主要是 javascript）的浏览器会进行的任何操作。

如果你需要测试一个大量 javascript 的项目，你需要使用一些框架，它要么使用浏览器的引擎（例如 Selenium），要么可以解释 javascript 并在 DOM 上执行所有更改（例如 Zombie.js）。

一个很好的框架是 Mink，它是测试框架和执行请求并解析结果的实际客户端之间的一层。它提供了一个 API 来使用一个非常简单的 PHP HTML Parser（类似于 symfony 使用的 DomCrawler）、Selenium、Zombie.js 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-03T02:31:11.010

我有一个类似的问题，在我的情况下，我意识到这是因为我没有使用正确的爬虫，我使用的是前一页中的一个，形式略有不同。因此，我认为这是提供适合我的解决方案的好地方。

通过在正确的网页上获取新的爬虫，它可以工作

```
 $crawler = $client->getCrawler();
    //processing the form
    // ... 
```

为了避免错误，我使用了语法

```
$crawler = $client->submitForm('Add client', [
            'client[members][1][fname]' => 'Benny',
            'client[members][1][dob]' => "3/12/1999",
        ]); 
```

# c# - 使用 DataContractJsonSerializer 对 JSON 对象进行部分反序列化

> ID：15454761
> 
> 赞同：5
> 
> 时间：2013-03-16T21:10:41.773
> 
> 标签：c#, json, deserialization, datacontractserializer, datacontractjsonserializer

作为来自 Bitbucket REST API 的响应，我得到以下 JSON 对象（简化版）：

```
{
    "repositories": [
        {
            "scm": "hg",
            "has_wiki": false,            
            "language": "c#",
            "slug": "Repo1"
        },
        {
            "scm": "hg",
            "has_wiki": false,            
            "language": "java",
            "slug": "Repo2"
        },
        {
            "scm": "hg",
            "has_wiki": true,            
            "language": "c#",
            "slug": "Repo3"
        }
    ],
    "user": {
        "username": "someuser",
        "first_name": "Some",
        "last_name": "User",
        "display_name": "Some User",
        "is_team": false,
        "avatar": "https://someuseravatar.com",
        "resource_uri": "/1.0/users/someuser"
    }
} 
```

我需要反序列化的这个 JSON 对象的唯一部分是一个`user`部分。为此，我创建了以下类：

```
[DataContract(Name="user")]
public class BitbucketUser
{
    [DataMember(Name = "username")]
    public string Username { get; set; }

    [DataMember(Name = "first_name")]
    public string FirstName { get; set; }

    [DataMember(Name = "last_name")]
    public string LastName { get; set; }

    [DataMember(Name = "display_name")]
    public string DisplayName { get; set; }

    [DataMember(Name = "is_team")]
    public bool IsTeam { get; set; }

    [DataMember(Name = "avatar")]
    public string Avatar { get; set; }

    [DataMember(Name = "resource_uri")]
    public string ResourceUri { get; set; }
} 
```

以及反序列化 json 的辅助方法：

```
public static T Deserialize<T>(string json)
{
    DataContractJsonSerializer deserializer = new DataContractJsonSerializer(typeof(T));
    using (MemoryStream stream = new MemoryStream(Encoding.Unicode.GetBytes(json)))
    {
        T result = (T)deserializer.ReadObject(stream);
        return result;
    }
} 
```

因此，当我尝试`User`使用此代码获取反序列化对象时：

```
User user = JsonHelper.Deserialize<User>(jsonResponse); 
```

然后我将`user`创建包含所有属性的对象作为`null`. 我试图找到在类头上使用的正确属性，但结果是一样的。而且我没有使用 Json.NET 库只是为了避免额外的库引用，也没有创建包装类来将该用户对象作为`User`类型的属性并将存储库对象作为 Repositories[] 类型的数组。这个问题是否有解决方案来获取没有空字段的反序列化用户对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T17:06:34.967

您的代码不起作用，因为您要反序列化的 JSON 对象没有任何`User`属性。反序列化器当然不会尝试查看当前对象的子对象以查看是否匹配。

您应该做的是创建一个代表整个响应对象的类型。如果您对该`repositories`部分不感兴趣，则忽略它。

以下代码适用于我：

```
[DataContract]
public class BitbucketResponse
{
    [DataMember(Name="user")]
    public BitbucketUser User { get; set; }
}

[DataContract]
public class BitbucketUser
{
    [DataMember(Name = "username")]
    public string Username { get; set; }

    // etc.
}

…

var serializer = new DataContractJsonSerializer(typeof(BitbucketResponse));
using (var stream = …)
{
    var response = (BitbucketResponse)serializer.ReadObject(stream);
    var user = response.User;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T05:59:34.407

我正在为您编写代码，它将帮助您将对象从 json 反序列化为 yourClassCustomObject。

```
private async Task<List<BitbucketUser>> MyDeserializerFunAsync()
{
    List<BitbucketUser> book = new List<BitbucketUser>();
    try
    {
       //I am taking my url from appsettings. myKey is my appsetting key. You can write direct your url.
       string url = (string)appSettings["mykey"];
       var request = HttpWebRequest.Create(url) as HttpWebRequest;
       request.Accept = "application/json;odata=verbose";
       var factory = new TaskFactory();
       var task = factory.FromAsync<WebResponse>(request.BeginGetResponse,request.EndGetResponse, null);
       var response = await task;
       Stream responseStream = response.GetResponseStream();
       string data;
       using (var reader = new System.IO.StreamReader(responseStream))
       {
           data = reader.ReadToEnd();
       }
       responseStream.Close();
       DataContractJsonSerializer json = new DataContractJsonSerializer(typeof(List<BitbucketUser>));
       MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(data));
       book = (List<BitbucketUser>)json.ReadObject(ms);
       return book;
   }
} 
```

上面的代码在我的 wp8 应用程序中运行，你可以尝试更快，它会对你有所帮助。我正在执行异步操作，但您可以使用 BitbucketUser 返回类型创建您的简单方法。

# android - 选项卡/片段和内存泄漏

> ID：15454771
> 
> 赞同：0
> 
> 时间：2013-03-16T21:11:50.233
> 
> 标签：android, memory-leaks

我正在开发一个应用程序（不是我编写的），它的活动由三个选项卡组成，每个选项卡对应于自己的片段（我以前从未使用过片段）。每个选项卡/片段显示消耗大量内存的数据结构。我想确信，当我从一个选项卡切换到另一个选项卡时，传出选项卡/片段所消耗的内存已完全释放。在下一个启动之前。

比如说，传出片段显示了一个位图 - 首先执行 bitmap.release() 以确保片段释放其所有内存是否必不可少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:32:40.180

监听标签控制器上的标签更改事件。

```
tabLayout.setOnTabChangedListener(<listener>); 
```

在您的侦听器的回调方法上`(onTabChanged(int index, boolean isUserInput))`，获取上一个片段，以递归方式在其视图上调用 unbind drawables（您需要编写它）。完成后，您还可以调用`System.gc()`提示 Dalvik VM 运行垃圾收集器（只是提示，不保证）。

解绑示例代码：

```
public static void unbindDrawables(@Nullable View view) {
    if (view == null) {
        return;
    }

    if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
    }

    if (view instanceof ImageView && ((ImageView) view).getDrawable() != null) {
        ((ImageView) view).getDrawable().setCallback(null);
    }

    if (view instanceof ViewGroup) {
        if (view instanceof AbsListView) {
            // Clean out list view
            List<View> cells = Lists.newLinkedList();
            ((AbsListView) view).reclaimViews(cells);
            if (cells != null) {
                for (View c : cells) {
                    unbindDrawables(c);
                }
            }
        } else {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
        }
    }
} 
```

# django - Django Admin - 由社区构建的任何替换 css

> ID：15454782
> 
> 赞同：0
> 
> 时间：2013-03-16T21:12:47.313
> 
> 标签：django, django-admin

纯粹出于审美原因，希望更新我的 django 管理界面的外观和感觉。

有谁知道任何可用的预打包 css/javascript 来替换默认的管理 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:18:37.143

你看过[格拉佩利](http://www.grappelliproject.com/)吗？

# php - 我的 MySQL 更新查询有什么问题？

> ID：15454788
> 
> 赞同：0
> 
> 时间：2013-03-16T21:13:21.440
> 
> 标签：php, mysql, post, syntax

出于某种原因，我在使用我的编辑脚本时遇到了这个错误。我什至尝试填写`POST`值并通过`PHPmyAdmin`. 这是我得到的错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'drop=1, sell=10, cash=10, law=7, boss=1 WHERE ID=11' at line 1 
```

这是查询：

> UPDATE toondb SET name='$_POST[toonname]', tlaff=$_POST[tlaff], ttype=$_POST[ttype], toonup=$_POST[toonup], trap=$_POST[trap], lure=$_POST[诱惑]，声音=$_POST[声音]，抛出=$_POST[抛出]，喷=$_POST[喷射]，下降=$_POST[下降]，卖出=$_POST[卖出]，现金=$_POST[现金] , 法律=$_POST[法律], 老板=$_POST[老板] WHERE ID=$_POST[ID]

这是填充值的那个：

> 更新 toondb SET name='ik'，tlaff=137，ttype=2，toonup=1，trap=1，lure=1，sound=1，throw=1，squirt=1，drop=1，sell=10，cash =10, 法律=7, 老板=1 WHERE ID=11

所有列都`INT`在名称之外。名称是一个`varchar`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:16:02.103

该词`drop`是保留关键字。使用反引号来逃避它。

像这样：

```
UPDATE toondb SET name='ik', tlaff=137, ttype=2, toonup=1, trap=1, lure=1,
    sound=1, throw=1, squirt=1, `drop`=1, sell=10, cash=10, law=7, boss=1 WHERE ID=11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T21:16:09.380

你的问题在于`drop`。`DROP`是 MySQL 中的保留字，因此需要将其封装在反引号中

```
`drop` = 1 
```

但是，您的陈述也有其他问题。您容易受到[SQL 注入的影响](http://bobby-tables.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:17:46.970

尝试将列名放在反引号中，以防万一您使用保留字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T21:23:22.423

已经发布的答案是正确的（`DROP`是保留字）；我只想指出，语法 like`$_POST[toonname]`在技术上是不正确的——非数字索引应该被引用：`$_POST["toonname"]`或`$_POST['toonname']`. 您使用的语法仅有效，因为 PHP 支持称为“密钥转换”的东西 - 正如文档警告的那样，这可能并不总是被支持，它可能会产生意想不到的结果： http: [//php.net/manual/en /language.types.array.php#language.types.array.donts](http://php.net/manual/en/language.types.array.php#language.types.array.donts)

# java - DOCX4J - 在两个标记之间复制

> ID：15454791
> 
> 赞同：0
> 
> 时间：2013-03-16T21:13:36.240
> 
> 标签：java, ms-word, docx4j

[感谢这个很棒的指南](http://www.smartjava.org/content/create-complex-word-docx-documents-programatically-docx4j)，我用 DOCX4J 做了一个简单的替换。

但现在我正在尝试做一些更复杂的事情。

我想做的是在文档中找到我的标记文本#1，在文档中找到我的标记文本#2，然后复制两者之间的所有内容。然后我将粘贴该内容 X 次并进行进一步的更改。

有谁知道我将如何做到这一点，并可能指出我需要的关键功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:15:17.867

在一般情况下，这不是一件简单的事情，因为您的两个标记之间可能存在需要特殊处理的各种结构（想想图像、脚注、sectPr 元素、书签等）。关于一般情况，请参阅[我在 MergeDocx 上的博客文章](http://www.docx4java.org/blog/2010/11/merging-word-documents/)。

但是，如果您可以做出一些简化的假设，那么它会变得更容易。

首先，假设您的标记是块级元素。

其次，假设您的文档只是格式化的文本和表格。

然后你可以只对块级内容列表执行操作：

```
MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart();
List<Object> blocks = documentPart.getContent(); 
```

有 XmlUtils.deepCopy 可以根据需要克隆对象。

对于违反假设 2 的每个结构，您都需要进行特定处理。如果您可以控制输入文档，您将能够管理它。

作为类似于使用书签的标记 #1 和 #2 的替代方法，请考虑使用块级内容控件。这避免了脆点标签；从 XML 的角度来看，它更好，并且在 Word 用户界面中提供了优势（从创作的角度来看）。

# user-interface - 我可以在 Java FX 中嵌入 PApplet

> ID：15454793
> 
> 赞同：3
> 
> 时间：2013-03-16T21:13:50.603
> 
> 标签：user-interface, arduino, javafx-2, javafx, processing

我正在制作一部分在[Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)中的软件。现在我需要为它开发一个 GUI。但是 Processing 一次又一次地重绘整个 GUI。借助嵌入 PApplet，可以将处理嵌入到[Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29)和[AWT中。](http://en.wikipedia.org/wiki/Abstract_Window_Toolkit)

它在*[PApplet 类](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/processing/core/PApplet.html)*中给出。但我想在 Java FX 中创建 GUI。如何将 PApplet 嵌入到 Java FX 中？

Processing中的部分是使用Arduino的硬件接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:42:24.977

发出 noLoop()，并使 UI 仅在用户事件（键盘输入、鼠标移动等）上调用 redraw()。现在它不会“一遍又一遍地”重绘，而只会在需要时重绘。

# wso2 - ESB 解决方案测试性能和基准测试

> ID：15454796
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:14:01.183
> 
> 标签：wso2, soa, esb, tibco, talend

我目前正在研究 SOA 以及实现它的工具。请我想要一份市场上 ESB 解决方案的比较清单（开源和商业许可，包括成本）。如果可能的话，还有一个很好的教程来很好地实现 ESB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:37:28.680

我希望您会感兴趣并发现以下信息对您有所帮助。

[http://wso2.org/library/articles/2013/01/esb-performance-65](http://wso2.org/library/articles/2013/01/esb-performance-65)

[http://techfeast-hiranya.blogspot.com/2013/02/how-worlds-fastest-esb-was-made.html](http://techfeast-hiranya.blogspot.com/2013/02/how-worlds-fastest-esb-was-made.html)

[http://techfeast-hiranya.blogspot.com/2012/09/busting-synapse-and-wso2-esb-myths.html](http://techfeast-hiranya.blogspot.com/2012/09/busting-synapse-and-wso2-esb-myths.html)

# ruby - RSpec 规范没有运行？

> ID：15454799
> 
> 赞同：3
> 
> 时间：2013-03-16T21:14:25.757
> 
> 标签：ruby, rspec, sinatra

我在 Sinatra 应用程序上运行一些 rspec 规范时遇到问题。我只是在学习 Ruby，所以不幸的是，我没有足够的知识来解决我在使用一本书（Paul Dix 的 Ruby on Rails 中的面向服务的设计）中的代码时遇到的问题。

问题是这些测试并没有真正运行（我认为）。从 app 目录中，我运行`$ ruby spec/service_spec.rb`，我没有得到测试通过或失败的迹象。我从文件中获得了几条日志消息`/service.rb`，但这就是显示的所有输出。我进行了一些`puts`调用以显示 before 块和 it 块没有被执行（即使 describe 块是）。

如果您想了解更多关于代码的信息，请查看[Github 上的存储库](https://github.com/pauldix/service-oriented-design-with-ruby/tree/master/chapter_01)。

**/spec/service_spec.rb：**

```
ENV['SINATRA_ENV'] = 'test'

require_relative '../service'
require 'rspec'
require 'rack/test'

RSpec.configure do |conf|
  conf.include Rack::Test::Methods
end

def app
  Sinatra::Application
end

describe "service" do
  puts 'describe 1'
  before(:each) do
    puts 'before 1'
    User.delete_all
  end

  describe "GET on /api/v1/users/:id" do
    puts 'describe 2'
    before(:each) do
      puts 'before 2'
      User.create(
        :name => "paul",
        :email => "paul@pauldix.net",
        :password => "strongpass",
        :bio => "rubyist")
    end

    it "should return a user by name" do
      puts 'it 1'
      get '/api/v1/users/paul'
      last_response.should be_ok
      attributes = JSON.parse(last_response.body)["user"]
      attributes["name"].should == "paul"
    end

    it "should return a 404 for a user that doesn't exist" do
      puts 'it 2'
      get '/api/v1/users/foo'
      last_response.status.should == 404
    end
  end
end 
```

**/服务.rb：**

```
require 'active_record'
require 'sinatra'
require_relative 'models/user'
require 'logger'

# log levels are DEBUG < INFO < WARN < ERROR < FATAL < UNKNOWN
log = Logger.new(STDOUT)
log.level = Logger::DEBUG

# set up the environment
env_index = ARGV.index("-e")
env_arg = ARGV[env_index + 1] if env_index
env = env_arg || ENV["SINATRA_ENV"] || "development"
log.debug "env: #{env}"

# set up database connection
use ActiveRecord::ConnectionAdapters::ConnectionManagement
databases = YAML.load_file("config/database.yml")
ActiveRecord::Base.establish_connection(databases[env])
log.debug "#{databases[env]['database']} database connection established"

# HTTP entry points
# get a user by id
get '/api/v1/users/:name' do
    user = User.find_by_name(params[:name])
    if user
        user.to_json
    else
        error 404, { error: "user not found" }.to_json
    end
end 
```

**$ ruby​​ spec/service_spec.rb 输出：**

```
D, [2013-03-16T17:05:58.275276 #17685] DEBUG -- : env: test
D, [2013-03-16T17:05:58.290885 #17685] DEBUG -- : db/test.sqlite3 database connection established
describe 1
describe 2 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T00:12:06.413

根据对问题的评论，这是通过`rspec --init`使用文件运行引导 RSpec 来解决的`spec/spec_helper.rb`。

# php - 将产品名称输入数据库

> ID：15454803
> 
> 赞同：0
> 
> 时间：2013-03-16T21:14:43.260
> 
> 标签：php

我在 txt 文件中有一个产品名称列表。但是，该文件很大（4,8GB++），所以是的，它有很多字。除了产品名称，我还想添加一些附加信息，例如 md5 哈希、时间和随机 ID。

这样做的最佳解决方案是什么？创建一个逐行阅读的 PHP 脚本，似乎需要很长时间。

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:24:18.510

是的，您可以使用 php 读取文本文件并将其传递给数据库

```
$string = file_get_contents("YOURTEXTFILE", "r");
$myFile = "PATH/TO/YOUR/TEXTFILE";
$fh = fopen($myFile, 'w') or die("Could not open: " . mysql_error());
fwrite($fh, $string);
fclose($fh);

$sql = mysql_connect("localhost", "root", "password");
if (!$sql) {
    die("Could not connect: " . mysql_error());
}
mysql_select_db("YOURDB");
$result = mysql_query("LOAD DATA INFILE '$myFile'" .
                      " INTO TABLE test FIELDS TERMINATED BY '|'");
if (!$result) {
    die("Could not load. " . mysql_error()); 
```

}

结果会是这样

```
+--------+-------------+------------+
|     ID | Name        | time       |
+--------+-------------+------------+
|    145 | line1       | 23:59      |
|    234 | line2       | 00:00      |
+--------+-------------+------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:28:00.453

我对您的问题进行了更多考虑，我以前使用过此解决方案，但由于文件的大小，我不确定它是否适合您。我暂时把它留在这里，以防它对其他人有用。

假设您的 product.txt 文件只有 productIDs 而没有其他您可以：

1.  将每一行更改为用括号括起来（这可以通过查找/替换 NEWLINE（通常为**\n**）来实现**），\n(** )
2.  然后在顶部放置一个查询；并确保文件的末尾关闭了一个有效的查询
3.  像任何 mysqldump 一样使用 mysql 导入

基本改变

```
PID1
PID2 
```

至

```
(PID1),
(PID2), 
```

然后通过一些简单的编辑使文件读取

```
INSERT INTO dTable(ColName) VALUES
(PID1),
(PID2); 
```

最后导入

```
mysql -uUser -p DATABASE < filename.sql 
```

这是一种基本的方法，但应该没有太多麻烦。之后在 SQL 中添加您想要的其余数据会更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:50:02.750

如果您使用的是 mysql 并且文件是 CSV 类型，那么您可以使用`LOAD DATA INFILE`.

如果您有格式良好的 CSV，则根本不需要 PHP。

让我知道是否是这种情况，我可以添加更多细节。

# d3.js - 未捕获的 SyntaxError：意外的令牌 <

> ID：15454804
> 
> 赞同：2
> 
> 时间：2013-03-16T21:14:48.173
> 
> 标签：d3.js

我对多线图有一个奇怪的问题。该图描绘了来自 mysql 数据库的数据，其中以 5 秒的间隔添加新行以模拟“实时”数据。当从数据库中重新提取数据时，图表会以 5 秒的间隔更新。

“流式传输”停止并开始 - 每次更新数据时都会出现 3 个错误：

```
 Uncaught SyntaxError: Unexpected token < 
 d3_json 
 respond 
```

数据应用于每个路径/行，如下所示：

```
 var parameter = svg.selectAll(".parameter")
    .data(data, function(d) { return d.key; })
    .enter().append("g")
    .attr("class", "parameter");

 parameter.append("path")
    .attr("class", "line")
    .attr("d", function(d) { return line(d.values); })
    .style("stroke", function(d) { return color(d.key); }); 
```

..然后更新以 5 秒为间隔读取的数据，并相应地更新和转换图表：

```
 d3.json("LiveData.php", function(error, data) 
 {      
    color.domain(d3.keys(data[0]).filter(function(key) { return key ==  "testSource_id"; }));
    data = data.map( function (d) { 
    d.testSource_id = +d.testSource_id; 
    d.dateTimeTaken = parseDate(d.dateTimeTaken);
    d.reading = +d.reading;
    d.parameterType = d.parameterType;
    d.parameter_id = +d.parameter_id;
    return d;
 });

data = d3.nest().key(function(d) { return d.testSource_id; }).entries(data);

x.domain([d3.min(data, function(d) { return d3.min(d.values, function (d) { return  d.dateTimeTaken; }); }),
d3.max(data, function(d) { return d3.max(d.values, function (d) { return d.dateTimeTaken; }); })]);
y.domain([d3.min(data, function(d) { return d3.min(d.values, function (d) { return d.reading; }); }),
d3.max(data, function(d) { return d3.max(d.values, function (d) { return d.reading; });})]);

var newparameters = svg.selectAll("g.parameter")
     .data(data);

newparameters
     .select( "path.line" )
     .transition() 
     .ease("linear")
     .duration(750) 
     .attr( "d", function(d) { return line(d.values); })

svg.select(".x.axis")
    .transition()
    .duration(750)
    .ease("linear")
    .call(xAxis);

svg.select(".y.axis")
    .transition()
    .duration(750)
    .ease("linear")
    .call(yAxis); 
```

我不知道这是否是由我转换路径/线路的方式引起的，还是与如何从数据库中提取数据有关？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:58:43.587

当访问传递给的 URL 返回的数据`d3.json`不是有效的 JSON 时，就会出现此问题。在你的情况下，我猜`LiveData.php`是返回 HTML 而不是 JSON。它也可能是通用 404 或其他一些错误页面。

# ruby-on-rails - 如何从 heroku 上的测试转移到 hostmonster 等主机上的生产？

> ID：15454807
> 
> 赞同：0
> 
> 时间：2013-03-16T21:15:02.523
> 
> 标签：ruby-on-rails, web-applications, heroku

如何从 heroku 上的测试转移到 hostmonster 等主机上的生产？

我最近创建了我的第一个 Web 应用程序，使用 ROR 和 heroku 在 git hub 上的存储库上进行测试。我在 hostmonster 上有一个站点，并且想转换 Web 应用程序，使其位于 hostmonster 上。这种移动有最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:27:20.987

这是 Rails 上的 Hostmonster 帮助页面：[https ://my.hostmonster.com/cgi/help/rails](https://my.hostmonster.com/cgi/help/rails)

这是关于 Hostmonster 上 Rails 的论坛帖子：[http: //railsforum.com/viewtopic.php?id=38218](http://railsforum.com/viewtopic.php?id=38218)

我不确定体验的可配置性或优化程度如何，但似乎有人成功地在 Hostmaster 上运行。您将负责设置您自己的数据库并修改您的`database.yml`文件。Heroku（或任何其他 PaaS）主机默认提供了很多东西。

可以使用 Capistrano 或`git pull`在 Heroku 主存储库上将您的应用程序部署到 Hostmaster。

就个人而言，即使对于我的 Heroku 应用程序，我也会在私人 Github 存储库中保留我的代码副本。

# php - 在数据库表zend框架2中生成插入，更新删除代码

> ID：15454811
> 
> 赞同：0
> 
> 时间：2013-03-16T21:15:11.013
> 
> 标签：php, zend-framework, zend-framework2

我在 ZEND 框架 2 中的插入、删除和更新查询中编写了大量代码

有没有办法自动生成代码？

例如，我有一个名为**Album**的表包含

```
id 
artist 
title 
```

现在我必须编写添加、编辑和删除相册的代码

**有没有办法自动化这个过程？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:32:25.460

您可以使用[`Zend\Db\TableGateway`](http://framework.zend.com/manual/2.1/en/modules/zend.db.table-gateway.html).

```
$table = new TableGateway("Album", $adapter);
$table->insert(array('artist' => "...", 'title' => "...")); 
```

[官方“入门”教程](http://framework.zend.com/manual/2.1/en/user-guide/database-and-models.html)中有一个更完整的示例，其中还包括更新和删除行。

# java - Guava ImmutableMap 中的性能警告

> ID：15454812
> 
> 赞同：1
> 
> 时间：2013-03-16T21:15:17.353
> 
> 标签：java, guava

在 Guava 的 ImmutableMap 的 javadocs 中它说：

> 性能说明：与 HashMap 不同，ImmutableMap 没有针对具有慢 Object.equals(java.lang.Object) 或 Object.hashCode() 实现的元素类型进行优化。您可以通过让元素类型缓存其自己的哈希码并利用缓存的值来缩短慢速等于算法，从而获得更好的性能。

所以我的第一个问题是我如何知道我的元素是否具有缓慢的 .equals 或 .hashCode 实现？在我的具体实例中，我使用 java Enum 作为我的键，因此它具有 .equals 和 .hashCode 的有效默认实现，对吗？（我假设这些值的实现是无关紧要的，只要您不使用值的值访问地图。）

我的第二个问题是“让你的元素类型缓存它自己的哈希码”是什么意思！谷歌搜索我似乎无法找到你如何做到这一点的例子。我想这可能意味着您最终会在哈希码中使用哈希码？所以我进入哈希码桶，然后 .equals 方法在其中使用第二组哈希码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:20:57.233

> 我使用 java Enum 作为我的键，因此它具有 .equals 和 .hashCode 的有效默认实现，对吗？

equals 或 hashcode 都没有被覆盖，因此它几乎不可能更快（即 equals 返回`this == other`）。

> 我的第二个问题是“让你的元素类型缓存它自己的哈希码”是什么意思！

你可以有类似下面的代码，以避免多次计算 - 如果你这样做，你需要确保：

*   哈希码是不变的（即不能在实例的整个生命周期内改变）
*   您的`hashcode`方法是线程安全的（例如，可以使用局部变量或更简单地通过使`hash`volatile 来完成）。

```
class MyClass {
    private int hash;

    public int hashcode() {
        int hash = this.hash;
        if (hash == 0) {
            hash = calculateIt();
            this.hash = hash;
        }
        return hash;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T21:20:03.600

如果您的密钥是一个，`Enum`那么这对您来说不是问题。

他们谈论的缓存哈希码是这样的：

```
private volatile int hashCode = -1;

@Override
public int hashCode() {
  if ( hashCode == -1 ) {
    hashCode = longCalculation();
  }
  return hashCode;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-11T19:05:27.860

`EnumpMap`我知道这是一个非常古老的问题，但对于像我一样来到这里的人 -如果您的密钥是枚举，您真的应该使用。

# c# - 测量子进程的 CPU 和 RAM 使用率

> ID：15454824
> 
> 赞同：1
> 
> 时间：2013-03-16T21:16:58.003
> 
> 标签：c#, process, cpu, ram, child-process

我有以下过程：

```
public void Run()
        {

            ProcessStartInfo serverPInfo = new ProcessStartInfo("javaw", "-jar -Xms1024M -Xmx1024M \"C:\\Users\\David\\Documents\\Visual Studio 2012\\Projects\\ConsoleApplication8\\Debug\\craftbukkit.jar\" -o true -nojline");
            serverPInfo.RedirectStandardInput = true;
            serverPInfo.RedirectStandardOutput = true;
            serverPInfo.RedirectStandardError = true;
            serverPInfo.UseShellExecute = false;

            serverP = new Process();
            serverP.StartInfo = serverPInfo;

            serverP.OutputDataReceived += new DataReceivedEventHandler(ServerOutputDataReceived);
            serverP.ErrorDataReceived += new DataReceivedEventHandler(ServerErrorDataReceived);
            serverP.Start();

            serverP.BeginOutputReadLine();
            serverP.BeginErrorReadLine();
            serverP.WaitForExit();
        } 
```

**如何测量进程的 CPU 和 RAM 使用率？**

我试过`serverP.WorkingSet64`,`serverP.PrivateMemorySize64`和`serverP.PagedMemorySize64`，但它们都返回常量值。它们都没有改变（如任务管理器中的 RAM 使用量表）。

我不知道如何获取当前的 CPU 使用率。

我在互联网上查看，但我找到的大部分内容都是`PerformanceMonitor`. 我不想使用它，因为可能有更多“javaw”进程的实例，我只想测量我在上面的代码中创建的子进程的 CPU 和 RAM 使用情况。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:17:14.367

您可以使用`PerformanceCounter`仅测量一个子进程活动。但是您需要使用它的进程 ID 而不是进程名称。当您创建它时，计数器`RawValue`等于。`ProcessId`

[这是描述这种技术的答案。](https://stackoverflow.com/a/9115662/1980492)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T03:11:31.903

没有“当前 CPU 使用率”之类的东西。它只能针对某个时间段进行测量，例如最后 1 秒。您可以使用 TotalProcessorTime 属性，每秒测量一次并减去前一个值。这将为您提供上一个测量周期中 CPU 使用的时间。
为了测量 RAM 使用情况，我使用了 WorkingSet64 和 PrivateMemorySize64——这对我来说效果很好。

# java - 我可以在 mode_private 中保存图像吗？

> ID：15454829
> 
> 赞同：0
> 
> 时间：2013-03-16T21:18:14.367
> 
> 标签：java, android, url, download

目前，我使用以下方法将 XML 文件保存在 mode_private 中：

```
public void Save_Data(String filename, String Datastring, Context context) {
    FileOutputStream fos;

    try {
        fos = context.openFileOutput(filename, context.MODE_PRIVATE);
        fos.write(Datastring.getBytes());
        fos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我想将大约 5kb 的小图像从 URL 保存到 mode_private 中的应用程序空间中。是否可以在 mode_private 中保存图像？如果是这样，谁能告诉我如何修改下面的方法来做到这一点？

```
public void DownloadFromUrl(final String DownloadUrl, final String fileName) {

    Thread web = new Thread(){
        public void run(){

       try {
               File root = Environment.getExternalStorageDirectory();               

               File dir = new File (root.getAbsolutePath() + "/Chats");
               if(dir.exists()==false) {
                    dir.mkdirs();
               }

               URL url = new URL(DownloadUrl); //you can write here any link
               File file = new File(dir, fileName);

               long startTime = System.currentTimeMillis();
               Log.d("DownloadManager", "download begining");
               Log.d("DownloadManager", "download url:" + url);
               Log.d("DownloadManager", "downloaded file name:" + fileName);

               /* Open a connection to that URL. */
               URLConnection ucon = url.openConnection();

               /*
                * Define InputStreams to read from the URLConnection.
                */
               InputStream is = ucon.getInputStream();
               BufferedInputStream bis = new BufferedInputStream(is);

               /*
                * Read bytes to the Buffer until there is nothing more to read(-1).
                */
               ByteArrayBuffer baf = new ByteArrayBuffer(5000);
               int current = 0;
               while ((current = bis.read()) != -1) {
                  baf.append((byte) current);
               }

               /* Convert the Bytes read to a String. */
               FileOutputStream fos = new FileOutputStream(file);
               fos.write(baf.toByteArray());
               fos.flush();
               fos.close();
               Log.d("DownloadManager", "download ready in " + ((System.currentTimeMillis() - startTime) / 1000) + " sec");

       } catch (IOException e) {
           Log.d("DownloadManager", "Error: " + e);
       }

        }
        };
        web.start();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T21:36:48.057

所以我终于想出了如何在 mode_private 中保存图像

下面的方法获取一个位图并将其保存到您的应用程序私有空间中的 mode_private。

```
 public String writeFileToInternalStorage(Bitmap outputImage){
        String fileName = fileName + ".png";

        FileOutputStream fos = null;
  try {
   fos = openFileOutput(fileName, Context.MODE_PRIVATE);
  } catch (FileNotFoundException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
        outputImage.compress(Bitmap.CompressFormat.PNG, 90, fos);

  return fileName;
    } 
```

这会从应用程序的私有空间读取图像并将其转换为 Bitmap ：

```
 Bitmap bitmap = BitmapFactory.decodeFile(this.getApplicationContext().getFilesDir() + "/"+fileName); 
```

希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T18:25:02.073

根据 Randrm 的回答，我实现了以下两种方法来存储/检索应用程序私有数据空间中 ImageView 中存在的位图图像。基本上是他的答案的清理版本，取自编译代码。

如果您希望 Activity 在恢复时快速恢复其视图的内容，这可能会很有用。ImageView 由 R.string.myImage 标识，该位图通过类的 myBitmap 成员访问。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    // we will be stopped and perhaps later on destroyed;
    // store displayed image for quick retrieval in private data space
    try {
        FileOutputStream output =
           openFileOutput(this.getString(R.string.myImage), Context.MODE_PRIVATE);
        myBitmap.compress(Bitmap.CompressFormat.PNG, 100, output);
    } catch (Exception e) {
        Log.e(LOG_TAG, "could not save image to private space");
    }

    // superclass to save the view hierarchy state
    super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    // superclass to restore the view hierarchy
    super.onRestoreInstanceState(savedInstanceState);

    // retrieve image stored earlier
    try {
        FileInputStream input = openFileInput(this.getString(R.string.myImage));
        ((ImageView) findViewById(R.id.det_mainimage)).
          setImageBitmap(BitmapFactory.decodeStream(input));            
    } catch (Exception e) {
        Log.e(LOG_TAG, "could not retrieve image from private space");
    }
} 
```

享受。

# jquery - jquery get() 方法通过参数访问actionresult

> ID：15454840
> 
> 赞同：0
> 
> 时间：2013-03-16T21:19:01.213
> 
> 标签：jquery, asp.net-mvc, parameters, get, actionresult

我有一个 ActionResult 方法：

```
public ActionResult GetData(int id)
{
    return Json(CreateCompaniesList(), JsonRequestBehavior.AllowGet);
} 
```

并希望使用 jQuery get 方法访问它。

如果只是：

```
public ActionResult GetData()
{
    return Json(CreateCompaniesList(), JsonRequestBehavior.AllowGet);
} 
```

我可以像这样访问它：

```
function drawChart() {
    $.get('/Home/GetData', {}, 
```

当 ActionReuslt 方法中有参数时，如何做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:20:30.260

一种方法是附加参数：

```
$.get('/Home/GetData/?id=value', 
```

第二种方式：

```
$.get('/Home/GetData/?id=value', {id="value"}, 
```

当然`"value"`是实际 id 参数值的占位符，
发送`"value"`字符串而不是服务器期望获取的整数显然会失败。

# html - 使用多个图像而不是项目符号点 CSS

> ID：15454843
> 
> 赞同：-2
> 
> 时间：2013-03-16T21:19:42.137
> 
> 标签：html, css

嗨，我在尝试使用 css 制作各种图像时遇到了问题。这是我的代码，如果有人可以帮助我，那将非常有帮助，谢谢。

```
<html>
    <head>
        <title></title>
        <style type="text/css">
            ul {
                list-style-type: Square;
                padding: 0px;
                margin: 0px;
            }
            .fastdiet {
                list-style-image: url("fastdiet.jpg");
                padding-top: 3px;
                padding-bottom: 3px;
                padding-left: 20px;
                padding-right: 5px;
            }
            .Midnight {
                list-style-image: url("Midnight.jpg");
                padding-top: 3px;
                padding-bottom: 3px;
                padding-left: 20px;
                padding-right: 5px;
            }
        </style>
    </head>
    <body>
        <ul>
            <li class="fastdiet">This book is Number 1</li>
            <li class="Midnight">This book is Number 2</li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:34:30.507

问题是你有这个规则：

```
ul {
    margin: 0px;
} 
```

列表标记的默认位置是 : `list-style-position : outside`，这意味着标记不在列表的边距内（因为边距为 0）。您可以通过将 ul 的边距更改为图像的宽度或将位置设置为内部来解决此问题。看看我的工作小提琴：

[http://jsfiddle.net/crazytonyi/QnzB2/](http://jsfiddle.net/crazytonyi/QnzB2/)

# mysql - NodeJS + MySQL + Socket.IO：更新数据库

> ID：15454844
> 
> 赞同：5
> 
> 时间：2013-03-16T21:19:51.980
> 
> 标签：mysql, node.js, websocket, push-notification

我目前正在寻找关于使用 NodeJS 和 MySQL 数据库推送通知的解决方案。

我想将 NodeJS 与 Socket.IO 结合起来提供推送通知，但问题是我不知道如何让我的服务器检查我的数据库是否有更新。

我已经有一个完美运行的“轮询”方法，但它有点混乱，这在服务器调用和响应方面并没有真正优化。

所以这个想法是，当用户 A 在我的数据库中插入一些东西时，所有关注他的客户都会通过推送（推送，而不是轮询）得到通知。

这是我目前为我的 server.js 所拥有的：

```
var app                 = require('http').createServer(handler),
    io                  = require('socket.io').listen(app),
    fs                  = require('fs'),
    mysql               = require('mysql'),
    connectionsArray    = [],
    connection          = mysql.createConnection({
        host        : 'localhost',
        user        : 'root',
        password    : 'root',
        database    : 'nodejs'
    }),
    POLLING_INTERVAL = 5000,
    pollingTimer;
connection.connect(function(err) {
  console.log( err );
});
app.listen(1337);
function handler ( req, res ) {
    fs.readFile( __dirname + '/client.html' , function ( err, data ) {
        if ( err ) {
            console.log( err );
            res.writeHead(500);
            return res.end( 'Error loading client.html' );
        }
        res.writeHead( 200 );
        res.end( data );
    });
}
var pollingLoop = function () {
    var query = connection.query('SELECT notif FROM notifications WHERE id_user=1 AND status=0'),
        users = [];
    .on('error', function(err) {
        console.log( err );
        updateSockets( err );
    })
    .on('result', function( user ) {
        users.push( user );
    })
    .on('end',function(){
        if(connectionsArray.length) {
            pollingTimer = setTimeout( pollingLoop, POLLING_INTERVAL );
            updateSockets({users:users});
        }
    });
};
io.sockets.on( 'connection', function ( socket ) {
    console.log('Number of connections:' + connectionsArray.length);
    if (!connectionsArray.length) {
        pollingLoop();
    }
    socket.on('disconnect', function () {
        var socketIndex = connectionsArray.indexOf( socket );
        console.log('socket = ' + socketIndex + ' disconnected');
        if (socketIndex >= 0) {
            connectionsArray.splice( socketIndex, 1 );
        }
    });
    console.log( 'A new socket is connected!' );
    connectionsArray.push( socket );
});
var updateSockets = function ( data ) {
    data.time = new Date();
    connectionsArray.forEach(function( tmpSocket ){
        tmpSocket.volatile.emit( 'notification' , data );
    });
}; 
```

如果您有任何建议、解决方案或有用的东西，请不要犹豫。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:33:17.777

我可以在这里想到两个解决方案。

1) 从上传新信息的同一个请求发起推送。我的意思是，您现在的流程可能是：

1.  从客户端获取请求
2.  将东西插入数据库
3.  返回给客户

使用 Node，您可以在发送响应后做更多的事情。例如 1\. 从客户端获取请求 2\. 将内容插入数据库 3\. 返回客户端 4\. 查找所有正在订阅且当前已登录的订阅者 5\. 发送推送

2）这种方法更分散。您可以在最后的步骤中使用 pub/sub 方法。让不同的进程处理所有推送，并让您的主进程（处理更新请求的部分）将新内容发布到队列中。这会在每次有新内容时提醒您的推送过程，这比轮询您的数据库要好得多。

请注意，对于这些解决方案中的任何一个，您都必须找到一种跟踪哪些套接字连接到哪些客户端的好方法，以便您从套接字外部快速向特定客户端发送消息。一种快速的方法可能是将每个用户添加到他们自己的房间中，以他们的用户名或 user_id 命名，这样您就可以轻松地将更新推送给以订阅用户命名的房间的所有参与者。如果房间里没有人，则不发送任何请求。

# iphone - iPhone 6.1 模拟器屏幕分辨率是 320x548 而不是 640x1136，为什么会这样？

> ID：15454847
> 
> 赞同：1
> 
> 时间：2013-03-16T21:20:08.873
> 
> 标签：iphone, ios, xcode, cordova, resolution

我使用 PhoneGAP 为 iPhone 创建了一个应用程序。我创建了 640x1136 分辨率的应用程序设计。但是当我尝试在 iPhone 6.1 模拟器中运行应用程序时，分辨率是 320x548 而不是 640x1136。我使用以下 JavaScript 代码检查模拟屏幕分辨率。

$("#width").text(window.innerWidth); $("#height").text(window.innerHeight);

为此，我尝试了以下步骤

1.  在 /Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/Resources/Devices/iPhone (Retina).deviceinfo/ 中编辑 Info.plist 文件

2.  在 XCode 中打开 .plist 文件并添加以下键/值对，

老鹰：640 长颈鹿：1136

1.  保存文件并重新启动模拟器。

2.  选择 iPhone (Retina) 以查看新分辨率。

但这无济于事。

请你帮助我好吗。

提前谢谢对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:31:05.063

当您在模拟器上运行时，您仍然需要选择您正在运行的“硬件”。运行模拟器时，选择 Hardware -> Device 并选择正确的设备（是否带有 Retina）进行测试。

# regex - 通过第一个冒号提取字符串

> ID：15454855
> 
> 赞同：1
> 
> 时间：2013-03-16T21:20:57.963
> 
> 标签：regex, string, r, regex-negation

我有一个字符串数据集，想要提取一个子字符串，直到并包括第一个冒号。早些时候，我在这里发帖询问如何仅提取第一个冒号之后的部分： 在第一个冒号[处拆分字符串](https://stackoverflow.com/questions/12233562/r-split-strings-at-the-first-colon) 下面我列出了一些解决当前问题的尝试。

我知道这`^[^:]+:`与我想保留的部分相匹配，但我不知道如何提取该部分。

这是一个示例数据集和所需的结果。

```
my.data <- "here is: some text
here is some more.
even: more text
still more text
this text keeps: going."

my.data2 <- readLines(textConnection(my.data))

desired.result <- "here is:
0
even:
0
this text keeps:"

desired.result2 <- readLines(textConnection(desired.result))

# Here are some of my attempts

# discards line 2 and 4 but does not extract portion from lines 1,3, and 5.
ifelse( my.data2 == gsub("^[^:]+:", "", my.data2), '', my.data2)

# returns the portion I do not want rather than the portion I do want
sub("^[^:]+:", "\\1", my.data2, perl=TRUE)

# returns an entire line if it contains a colon
grep("^[^:]+:", my.data2, value=TRUE)

# identifies which rows contain a match
regexpr("^[^:]+:", my.data2)

# my attempt at anchoring the right end instead of the left end
regexpr("[^:]+:$", my.data2) 
```

这个较早的问题涉及返回匹配的反面。如果我从上面链接的早期问题的解决方案开始，我还没有想出如何在 R 中实现这个解决方案：[正则表达式相反](https://stackoverflow.com/questions/850907/regular-expression-opposite)

我最近获得了 RegexBuddy 来研究正则表达式。这就是我知道`^[^:]+:`与我想要的匹配的方式。我只是无法使用该信息来提取匹配项。

我知道`stringr`包裹。也许它可以提供帮助，但我更喜欢 base R 中的解决方案。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T21:37:58.553

“我知道 ^[^:]+: 匹配我要保留的部分，但我不知道如何提取该部分。”

因此，只需将括号括起来并在末尾添加“.+$”并使用带有引用的 sub

```
sub("(^[^:]+:).+$", "\\1", vec)

 step1 <- sub("^([^:]+:).+$", "\\1", my.data2)
 step2 <- ifelse(grepl(":", step1), step1, 0)
 step2
#[1] "here is:"         "0"                "even:"            "0"               
#[5] "this text keeps:" 
```

目前尚不清楚您是否希望将它们作为单独的矢量元素将它们与换行符粘贴在一起：

```
> step3 <- paste0(step2, collapse="\n")
> step3
[1] "here is:\n0\neven:\n0\nthis text keeps:"
> cat(step3)
here is:
0
even:
0
this text keeps: 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T21:50:39.703

这似乎产生了你正在寻找的东西（尽管它只返回其中有冒号的行）：

```
grep(":",gsub("(^[^:]+:).*$","\\1",my.data2 ),value=TRUE)
[1] "here is:"         "even:"            "this text keeps:" 
```

当我输入此内容时，我看到了@DWin 的答案，该答案也建议使用括号，并且`ifelse`其中也确实为您提供了“ `0`”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T00:13:02.993

另一种不太优雅的方法`strsplit`：

```
x <- strsplit(my.data2, ":")
lens <- sapply(x, length)
y <- sapply(x, "[", 1)
y[lens==1] <- "0" 
```

# android - 在操作栏中调整应用程序名称

> ID：15454859
> 
> 赞同：1
> 
> 时间：2013-03-16T21:21:40.480
> 
> 标签：android, xml, resize, android-actionbar

在我的应用程序中，操作栏中有 4 个按钮。我在 xml 文件中添加`android:showAsAction="always|withText"`了每个`item`图标，以强制显示所有 4 个图标。我正在 4.0" 屏幕上测试应用程序，在垂直视图中，我看到左侧的应用程序图标，应用程序名称被剪切，然后我看到 4 个图标/按钮。例如，应用程序名称是 Pandemic，并且在操作栏中的所有 4 个图标中，我看到了 Pan...

如何让应用程序名称文本调整大小以动态填充应用程序图标和操作栏上最左侧的图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T01:57:46.597

根据这个[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)（搜索“主操作栏中可以容纳多少操作？”），您应该在 4" 显示屏上显示 2 个操作。当然，您可以显示更多操作，但随后会遇到遇到的问题。此外，这些建议是设计指南，遵循它们以提供良好的用户体验是有意义的。标题旁边有四个按钮会使操作栏过于拥挤 IMO .

我看到了您可以追求的几个选择：

1.  使用 android:showAsAction="ifRoom|withText" 而不是 "always|withText"
2.  如果顶部空间不足，请使用拆分操作栏以允许 Android 在屏幕底部显示操作。它仍然会在平板电脑大小的设备上显示顶部的操作。另请参阅[http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)
3.  为您的标题使用自定义布局以使标题更小。我不会推荐这个，因为它至少会隐含地违反设计指南。如果您仍想走这条路，则需要使用为标题创建自己的布局

    actionBar.setCustomView(newTitleBar, new ActionBar.LayoutParams(Gravity.LEFT))

要从自定义布局开始，只需从您的 SDK 文件夹中复制 Android 正在使用的布局。

# wpf - WPF Grid 如何在 RowDefinitions 上签名更改？

> ID：15454863
> 
> 赞同：1
> 
> 时间：2013-03-16T21:22:22.960
> 
> 标签：wpf, grid, wpf-controls

是否可以在 RowCollection 上捕获事件已更改？

```
new Grid().RowDefinitions.Changed+=??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T16:08:08.840

也许这不是执行此操作的最佳方法，但我使用此解决方案：

```
private count=0;
void OnLayoutUpdated(...)
{
  if(count!=Grid().RowDefinitions.Count)
  {
     // Do what you need.
  }
} 
```

如果我们需要知道值已更改，我们也可以在值更改时对每个 RowDefinition 进行签名。

# c - 如何指定目标文件的名称

> ID：15454867
> 
> 赞同：-4
> 
> 时间：2013-03-16T21:23:07.140
> 
> 标签：c, linux, gcc, cc

当我直观地尝试运行这样的命令时

```
cc -c source.c header.h -o a_name_different_than_source.o 
```

抛出以下错误

> cc: 不能用 -c 指定 -o，不能用 -S 或 -E 指定多个文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T21:24:36.370

不要`header.h`在命令行中输入：

```
cc -c source.c -o a_name_different_than_source.o 
```

将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:28:17.943

.c 文件不需要您在命令行中提及标头，GCC 会处理这些。

一个简单的`gcc inputFilename -o outfileName`就足够了。

# regex - 如何使用 Notepad++ 删除每行的最后 13 个（或 n 个）字符

> ID：15454869
> 
> 赞同：12
> 
> 时间：2013-03-16T21:23:13.860
> 
> 标签：regex, notepad++

我有一个文件，其中每一行都以`Mar 15, 2013`和其他日期结尾，所以我需要删除每行的结尾说最后 13 个字符

每行的长度不同，字符也不同，因此不能使用任何东西作为分隔符。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-16T21:27:13.310

[您可以在锚定](http://www.regular-expressions.info/anchors.html)到行尾的`search and replace`-dialog ( `Ctrl`+ `H`) 中使用正则表达式：

```
.{13}$ 
```

然后什么都不换。当然，您可以使用更具表现力的正则表达式来仅匹配您特定格式的日期，而不是其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T00:14:48.540

只是给你一个替代方案。您还可以使用列编辑模式。

按住鼠标`Alt`并`Left click`在要编辑的所有行上垂直移动鼠标。然后，您可以删除从该列开始的所有内容。

编辑。第二次看，我看到你提到线条的长度不同。因此，这可能不适用于您的情况。无论如何，我会保持原样。谁知道它以后可能会派上用场，或者可能对其他人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:33:37.120

正如其他人已经说过的，在搜索中使用正则表达式搜索并将对话（ctrl + h）替换为日期遵循的模式。鉴于您的示例，这应该这样做：

```
[A-Za-z]{3}\s(\d){1,2},\s?\d{4}$ 
```

替换为空字符串。

# c# - 通过 ASPX 在域服务器中登录失败

> ID：15454870
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:23:16.823
> 
> 标签：c#, asp.net, sql, sql-server, exception

我有`domain`服务器和`mssql`数据库。当我`aspx`通过服务器运行页面时，`domain`它给了我异常。我有`password`并且`username`对于服务器中的`sql`数据库，这`domain`可能是问题所在。我应该怎么做才能修复它？

例外：

```
Login failed. The login is from an untrusted domain and cannot be used with Windows authentication. 
```

连接字符串：

```
<connectionStrings>
    <add name="sky_PeopleEntities"
        connectionString="metadata=res://*/hosting.csdl|res://*/hosting.ssdl|res://*/hosting.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=go.db.hosting.bg;initial catalog=sky_People;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
        providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:02:57.413

登录失败并出现该错误意味着您建立 SQL 连接的服务器/计算机与 SQL 服务器所在的 Active Directory 域不同。

通常这意味着您需要将用户名或密码添加到连接字符串，以便您可以使用 SQL 身份验证而不是 Windows 身份验证进行身份验证。您可能需要与托管公司或系统管理员联系以正确设置用户名和密码。

一旦你有了它，删除`integrated security=true`部分，然后添加`User Id=[username]; Password=[password];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:00:13.880

集成安全=真是问题：双跳问题。

通过提供正确的 SQL 用户名和密码或有权访问 SQL 服务器和必要资源的正确应用程序池身份来修复它。

# ember.js - 加载嵌入式关联仅适用于下划线名称

> ID：15454872
> 
> 赞同：0
> 
> 时间：2013-03-16T21:23:32.720
> 
> 标签：ember.js, ember-data, active-model-serializers

我有一个模型 App.Leg 有很多 App.LegPlayers：

```
App.Leg = DS.Model.extend({
  match: DS.belongsTo('App.Match'),
  legPlayers: DS.hasMany('App.LegPlayer'),
  winner: DS.belongsTo('App.Player')
});

App.LegPlayer = DS.Model.extend({
  leg: DS.belongsTo('App.Leg'),
  player: DS.belongsTo('App.Player'),
  turns: DS.hasMany('App.Turn')
}); 
```

我可以使用以下映射以嵌入式方式（仅使用 1 个 POST 请求）持久化它们：

```
App.Adapter.map('App.Leg', {
  legPlayers: {embedded: 'always'}
}); 
```

但是从 Rails (active_models_serializers) 加载记录*只能*使用以下映射（或根本不使用映射）：

```
App.Adapter.map('App.Leg', {
  leg_players: {embedded: 'always'}
}); 
```

但不是当我使用下划线版本或没有映射时，Ember 想要将 legPlayers 保留在单独的 POST 请求中。

**所以我的问题是**：我怎样才能让 ember 既加载腿玩家作为腿的一部分，又让腿玩家作为腿的一部分发布到服务器。因此，无需使用单独的请求。现在看来，我一次只能让一个场景工作：发布只能使用“legPlayers”，加载只能使用“leg_players”。

# android - 适用于 Android/iOS 应用的 OAuth Web 流程

> ID：15454873
> 
> 赞同：2
> 
> 时间：2013-03-16T21:23:36.107
> 
> 标签：android, ios, oauth, authorization, windows-phone-8

如果唯一支持的流程是 HTTP 重定向，那么检索 OAuth 访问令牌的可移植方式是什么？例如，我想授权我的移动应用访问[RunKeeper API](http://developer.runkeeper.com/healthgraph/registration-authorization)：

1.  应用程序打开带有地址的浏览器`https://runkeeper.com/apps/authorize?client_id=...&response_type=code&redirect_uri=MY_OWN_REDIRECT_URL`
2.  用户单击以允许访问，被重定向到`MY_OWN_REDIRECT_URL?code=ONE_TIME_AUTH_CODE`
3.  **？？？**
4.  `https://runkeeper.com/apps/token`应用程序使用第 2 步中的一次性授权代码和客户端密码通过 POST 请求请求实际访问令牌

API 不支持 OAuth 设备配置文件（用户手动返回应用程序并输入几位数的代码）。我正在考虑在这种情况下我的选择是什么，特别是因为我希望用户立即返回我的应用程序。

* * *

### 选项1

将是我的移动应用程序中的**内置 Web 服务器**与应用程序内浏览器相结合，以便我可以提供 OAuth 重定向 URL`http://localhost:XYZW`并在一次性授权代码到达时捕获它。但我不知道这是否适用于流行的移动平台（目前是 Android/iOS，我为这些平台找到了 Mongoose Web 服务器的端口）。

### 选项 2

注册**自定义 URI 方案**，例如`myapp-oauth-scheme://`. 对于 RunKeeper，它似乎允许我重定向到此类自定义方案。而且我认为至少可以在 Android/iOS 上恢复我的应用程序，对吧？！WP8 / BB10 等其他平台呢？

### 选项 3

如果真的有必要，我只想走这条路：托管一个非常小的 Web 服务，用作 OAuth 重定向 URL 并保存任何传入的一次性授权代码。当用户被重定向时，他最终只会看到一个页面“现在请切换回应用程序”，然后应用程序会向网络服务询问它之前收到的一次性授权码。

* * *

所以毕竟，有没有更好的选择，你知道其中哪些可以在 Android/iOS 和其他平台上正常工作吗？

顺便说一句，我有一个基于 HTML 的应用程序 (PhoneGap)，所以我什至不必使用外部浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:14:56.617

您可以结合选项 1 和 3 以获得可移植性和 UX 的最佳组合：

为身份验证提供应用内 Web 视图，但不要在设备上运行本地 httpd，而是为重定向目标使用最小的 Web 服务。这样用户就永远不会离开您的应用程序，您的登录页面也不需要告诉他们手动返回它。您的应用程序可以从您的 Web 服务中检索访问令牌，并在其 URL 更改后立即关闭 WebView。

顺便说一句，我工作的公司 Temboo 有一个您可以使用的最小 Web 服务，而不是构建和托管您自己的。查看我们的[OAuth for RunKeeper](https://www.temboo.com/library/Library/RunKeeper/OAuth/)助手。我们提供了一个回调服务，您可以将其用于重定向 url，它将为您存储身份验证令牌。我们还可以选择存储您的 RunKeeper 凭据，这样您就不必将它们与您的应用程序一起分发，并且可以在不推送客户端更新的情况下更新或使它们失效。

我们的[Android SDK](https://www.temboo.com/download)还可以为您规范对 RunKeeper API 的其余部分以及 100 多个其他 API 的访问。

* * *

刚看到你的编辑。如果您已经在使用 WebView，那就更好了。让用户留在应用程序中，跳过自定义 URL 方案，跳过应用程序内服务器的开销，只使用一个小型 Web 服务来捕获身份验证令牌。这在 iOS 和任何其他可以提供 WebView 等效项的平台上也可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T05:10:12.600

您可以使用 socialauth android 在您的应用程序中集成 runkeeper api。身份验证后，您将能够获得访问令牌。

然后，您可以使用访问令牌来调用 runkeeper 的各种功能，例如获取活动。您可以查看 runkeeper 文档来拨打电话。

# php - 使用 simplexml_load_string 从 XML 文件中获取值

> ID：15454875
> 
> 赞同：0
> 
> 时间：2013-03-16T21:23:46.507
> 
> 标签：php, xml, simplexml

我有以下 XML 代码

```
<epp:epp xmlns:epp="urn:ietf:params:xml:ns:epp-1.0">
  <epp:response>
    <epp:result code="1000">
      <epp:msg>Contact Info Command completed successfully</epp:msg>
    </epp:result>
    <epp:resData>
      <contact:infData xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
        <contact:id>con12</contact:id>
        <contact:status s="ok"/>
        <contact:postalInfo type="loc">
          <contact:name>Name</contact:name>
          <contact:org/>
          <contact:addr>
            <contact:street>streer</contact:street>
            <contact:street>street</contact:street>
            <contact:street/>
            <contact:city>City</contact:city>
            <contact:sp/>
            <contact:pc>186</contact:pc>
            <contact:cc>AA</contact:cc>
        </contact:addr>
      </contact:postalInfo>
        <contact:voice>0000000</contact:voice>
        <contact:fax>000000000</contact:fax>
        <contact:email>support@email.com</contact:email>
    </contact:infData>
    </epp:resData>

  </epp:response>
</epp:epp> 
```

我在使用 simplexml_load_string 从 XML 字符串中获取值时遇到困难

我可以得到所有以epp开头的节点的结果：比如epp:msg uinsg下面的代码

```
$objects = simplexml_load_string($result);
$objects->children('epp', true)->response->result->msg; 
```

我似乎无法获得以下值

```
<contact:infData xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
        <contact:id>con12</contact:id>
        <contact:status s="ok"/>
        <contact:postalInfo type="loc">
          <contact:name>Name</contact:name>
          <contact:org/>
          <contact:addr>
            <contact:street>streer</contact:street>
            <contact:street>street</contact:street>
            <contact:street/>
            <contact:city>City</contact:city>
            <contact:sp/>
            <contact:pc>186</contact:pc>
            <contact:cc>AA</contact:cc>
        </contact:addr>
      </contact:postalInfo>
        <contact:voice>0000000</contact:voice>
        <contact:fax>000000000</contact:fax>
        <contact:email>support@email.com</contact:email>
    </contact:infData> 
```

我还需要知道如何获取代码值`<epp:result code="1000">`

任何帮助/指针将不胜感激，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:51:38.810

你已经完成了 99%（除非我遗漏了什么）。基本上，每当您想“更改”命名空间时，您都可以使用`->children()`or`->attributes()`方法。

所以你可以说`$objects->children('epp', true)->response->result->resData->children('contact', true)->infData->id`

`code`in 属性在技术上`<epp:result code="1000">`根本[不在任何命名空间中](https://stackoverflow.com/questions/10672635/xml-namespaces-and-unprefixed-attributes)，因此您必须选择 NULL 命名空间才能访问它`$objects->children('epp', true)->response->result->attributes(NULL)->code`：

也不要忘记，通过使用别名（'epp'、'contact'），您依赖于不更改这些数据的数据源，从技术上讲，它们可以在不更改文件“含义”的情况下进行更改。为了防止这种情况，您必须对 URI (`urn:ietf:params:xml:ns:epp-1.0`和`urn:ietf:params:xml:ns:contact-1.0`) 进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:51:19.670

你快到了。以类似的方式访问更深层的元素：

```
$contact = $objects->children('epp', true)->response->resData->children('contact',tee);
$name = $contact->infData->postalInfo->name; 
```

对于代码值，我假设您的意思是`<epp:result code="1000">`

```
$resultAttributes = $objects->children('epp', true)->response->result->attributes();
$code = $resultAttributes['code']; 
```

注意： $name 和 $code 最终都是 SimpleXMLElements 而不是字符串，但您可以将它们转换为字符串：

```
$a = (string)$name; 
```

# apache - .htaccess 将不存在的目录映射到 URL 代理

> ID：15454876
> 
> 赞同：0
> 
> 时间：2013-03-16T21:23:50.240
> 
> 标签：apache, .htaccess, ubuntu, proxy

我有 2 个域：

1.  `sub.domain1.com/page`
2.  `sub.domain2.com/page`<-- 'page' 是一个不存在的目录

我该怎么做才能`.htaccess`使 URL 是`sub.domain2.com/page`，但用户应该看到的页面`sub.domain1.com/page`？

# java - 在 Java 中，如何将类型化列表中的所有静态字段作为其类的对象（而不是作为 Field 实例）？

> ID：15454877
> 
> 赞同：4
> 
> 时间：2013-03-16T21:23:55.483
> 
> 标签：java, reflection

我需要遍历一个类的静态字段列表（比如，`MyClass`）。这些字段都是 java.util.regex.Pattern 类型。使用反射，我可以获得所有静态字段，如下所示：

```
MyClass mc = new MyClass();
List<Pattern> patternList = new ArrayList<Pattern>();
for (Field f : Commands.class.getDeclaredFields()) {
    if (Modifier.isStatic(f.getModifiers())) {
        // add the Pattern corresponding to the field f to the list patternList
    }
} 
```

现在，因为我知道所有字段`f`都是 java.util.regex.Pattern 类型，所以我想创建一个`List<Pattern>`包含所有字段的类型。我怎样才能做到这一点？

我没有找到任何与我相匹配的问题，尽管关于反射有几个问题。如果我的问题是重复的，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:26:57.930

这个怎么样？

```
patternList.add((Pattern)f.get(null)); 
```

（关于您的问题的措辞，该字段`f`是 type `Field`，但它的目标是 type `Pattern`。）

参考：[http ://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html)

# python - numpy.savetxt 的分隔符

> ID：15454880
> 
> 赞同：5
> 
> 时间：2013-03-16T21:24:13.220
> 
> 标签：python, python-3.x, file-io, numpy

我正在尝试使用 将 numpy 数组写入`.txt`文件[`numpy.savetxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)。据我所知，以下代码遵循文档：

```
z = np.array([1,2,3])
np.savetxt('testdata.txt',z,delimiter='hi') 
```

但是，使用记事本打开的输出文件显示

```
1.000000000000000000e+002.000000000000000000e+003.000000000000000000e+00 
```

没有`hi`值之间的分隔符。任何想法为什么会这样？我的目标是在每个值之间添加新行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T22:55:06.100

您需要二维数组，轴 0 是行，轴 1 是列。所以我用`z[None, :]`它来将它转换为二维数组：

```
from StringIO import StringIO
s = StringIO()
z = np.array([1,2,3])
np.savetxt(s,z[None, :],delimiter='hi')
s.getvalue() 
```

输出：

```
1.000000000000000000e+00hi2.000000000000000000e+00hi3.000000000000000000e+00\n 
```

# c# - ADO.NET 空数据库输出 (mysql)

> ID：15454883
> 
> 赞同：3
> 
> 时间：2013-03-16T21:24:39.427
> 
> 标签：c#, mysql, database, ado.net

我正在制作一个使用 ADO.NET 从数据库中获取一些数据的小程序。问题是，在我打开连接后，它不会在控制台中显示任何内容。如果我在连接之前输出一些东西......一切都很好，但在它只是干净的黑色之后。

我正在做的是读取表格并输出查询输出。没什么大不了的，但似乎找不到我丢失的物品..

非常感谢

**答：我让控制台打开了一段时间，但连接超时。C# 仍然忙于处理 conn.Open() 直到超时。**

```
public void ReadVoorraad() {

        SqlConnection conn = new SqlConnection("Data Source=(local);Initial Catalog=postorder2;User ID=root;Password=****");
        SqlDataReader rdr = null;

        try {

            conn.Open();
            SqlCommand cmd = new SqlCommand("SELECT * from voorraad", conn);

            rdr = cmd.ExecuteReader();

            while (rdr.Read()) {
                Console.WriteLine(rdr[0]);
            }
            Console.WriteLine("------ End of stream -------");
        } finally {
            if (rdr != null) { rdr.Close(); }
            if (conn != null) { conn.Close(); }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:35:55.637

我的猜测是有一些例外。尝试将此添加到您的代码中以从您的方法中获取更多诊断信息`ReadVoorraad`：

```
SqlConnection conn = null;
SqlDataReader rdr = null;

try {
    conn = new SqlConnection(...);

    ...
} catch (Exception e) {
    Console.WriteLine("Error: " + e.Message);
    throw;
} finally {
    if (rdr != null) { rdr.Close(); }
    if (conn != null) { conn.Close(); }
} 
```

# java - Android Calendar Intent 代码说明

> ID：15454886
> 
> 赞同：0
> 
> 时间：2013-03-16T21:25:24.107
> 
> 标签：java, android, cordova, android-intent, calendar

我想在我的应用程序中单击按钮打开 android 本机日历应用程序。我在网上搜索了一下，发现代码如下：

```
Intent intent = new Intent(Intent.ACTION_EDIT);  
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", "Some title");
intent.putExtra("description", "Some description");
intent.putExtra("beginTime", eventStartInMillis);
intent.putExtra("endTime", eventEndInMillis);

startActivity(intent); 
```

有人可以向我解释这段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:05:56.543

回答关于代码做什么的问题

```
Intent intent = new Intent(Intent.ACTION_EDIT); 
```

创建一个与Action`Intent`对应的新对象。这是一个通用的 Intent Action，这意味着仅此还不足以自动启动权利。这就是为什么我们接下来要做的是设置. 由于我们要启动日历编辑器，我们将类型设置为：`Intent`[`ACTION_EDIT`](http://developer.android.com/reference/android/content/Intent.html#ACTION_EDIT)`Activity``Intent``vnd.android.cursor.item/event`

```
intent.setType("vnd.android.cursor.item/event"); 
```

这与清单条目相对应。注意`data`节点（显示了 Jellybean 版本清单）。

```
<intent-filter>
    <action android:name="android.intent.action.EDIT" />
    <action android:name="android.intent.action.INSERT" />
    <category android:name="android.intent.category.DEFAULT" />
    <!-- mime type -->
    <data android:mimeType="vnd.android.cursor.item/event" /> 
</intent-filter> 
```

这些`putExtra()`调用允许您指定事件特征，例如事件的标题、开始和结束时间等。

然后我们启动Activity。结果是这样的：

![在此处输入图像描述](../Images/68bfa54eabcd889189716336b57c0316.png)

然后，您已经打开了 Android 日历应用程序来添加事件！

*警告：里程可能会有所不同*

但是，如果您不想调用事件编辑器怎么办？如果您只想打开 Android 日历应用程序，则可以使用`PackageManager#getLaunchIntentForPackage()`（前提是：包名称未更改，已安装 Android 日历，并且您可以获得对 的引用`PackageManager`）。

来自 Activity 的示例（使用 MainActivity.this 突出显示我从 Activity 启动的事实）：

```
Intent i = MainActivity.this.getPackageManager().getLaunchIntentForPackage("com.android.calendar");
if (i != null)
  startActivity(i); 
```

# eclipse - Mac 上不存在 eclipse.ini 文件

> ID：15454889
> 
> 赞同：24
> 
> 时间：2013-03-16T21:25:41.863
> 
> 标签：eclipse, configuration

我正在尝试更改我的 eclipse 配置，但 eclipse.ini 文件不在我的 eclipse 安装目录中。

我在 Mac os x 上使用 eclipse 4.2.1 Juno。

eclipse.ini 文件是否被 eclipse/configuration 中的 config.ini 替换？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-12-13T16:47:47.817

这是您访问该文件的方式。

1.  如果您的 Eclipse 链接在码头中。转到链接按控制键并左键单击并转到选项并选择在查找器中显示。 ![在此处输入图像描述](../Images/6fb1b2fb8fbed157d5585d08750989be.png)

2.  在查找器中看到链接后。转到链接并按控制键并左键单击并选择`Show package Content`。 ![在此处输入图像描述](../Images/84412092741857a2ca7084ed6b5bacfb.png)

3.  转到 Contents -> MacOS -> eclipse.ini 并在您喜欢的文本编辑器中打开。 ![在此处输入图像描述](../Images/1b5ca7c28e10ebfc8b5c3b79bbe83655.png)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-16T21:59:16.633

该文件应位于`Eclipse.app/Contents/MacOS/eclipse.ini`

例如：`/Applications/eclipse/Eclipse.app/Contents/MacOS`

或者，它可能会在（两种可能性都在[wiki 文档](https://wiki.eclipse.org/Eclipse.ini)`Eclipse.app/Contents/Eclipse/eclipse.ini`的不同部分中注明，并且可能用于较新版本。）`/Eclipse/`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-01-21T09:27:28.660

在 mac 机器上执行以下操作以查看 eclipse.ini 文件

1.  右键单击 eclipse 图标，如图所示。（注意：从哪个文件夹安装）
2.  从列表中选择 Show Package Contents 第二个选项。
3.  选择目录-->MacOS-->eclipse.ini 文件

![在此处输入图像描述](../Images/3623f2eaf24d50e0179d5db48737d86f.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-23T16:23:48.393

**在 Mac High Sierra 上**

转到：**Applications** > **Eclipse**（右键单击图标并选择“ **Show Package Contents** ”）> **Contents** > **Eclipse**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-20T15:51:48.213

从 Neon 开始，默认安装位置不是`/Applications`但是`/Users/username/eclipse`.

我的安装在：

`/Users/username/eclipse`

“应用程序”位于：

`/Users/username/eclipse/jee-neon/Eclipse.app`

'eclipse.ini' 文件位于：

`/Users/username/eclipse/jee-neon/Eclipse.app/Contents/Eclipse/eclipse.ini`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-24T08:47:44.600

或者，在 eclipse 安装文件夹中，右键单击“eclipse”（别名或符号链接）-> Show Original -> eclipse.ini

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-24T18:11:59.520

对于 Eclipse Mars，该位置在 Mac 上移动到 Eclipse 文件夹。

```
myComputerName:Eclipse myDriveName$ pwd
/Users/myUser/eclipse/jee-mars2/Eclipse.app/Contents/Eclipse
BYOD-1170:Eclipse ijet-sd$ ll
total 16
drwxr-xr-x   7 ijet-sd  staff   238 Mar 24 13:54 .
drwxr-xr-x   6 ijet-sd  staff   204 Jan 19  2016 ..
-rw-r--r--   1 ijet-sd  staff    60 Sep  2  2015 .eclipseproduct
drwxr-xr-x  12 ijet-sd  staff   408 Mar 24 13:54 configuration
drwxr-xr-x   2 ijet-sd  staff    68 Jan 19  2016 dropins
-rw-r--r--   1 ijet-sd  staff  1113 Mar  1 12:23 eclipse.ini
drwxr-xr-x   3 ijet-sd  staff   102 Jan 19  2016 readme 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-24T20:50:09.510

是的，对于***Eclipse NEON*** ，它应该是

> /Users/username/eclipse/jee-neon/Eclipse.app/Contents/Eclips‌​e/eclipse.ini

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-19T06:54:14.333

我使用的是 STS，文件的名称不同。它位于`/Applications/STS.app/Contents/Eclipse/STS.ini`。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-06-02T08:18:25.637

## 在 Mac Catalina 上

将 mat.app 移到 mac ~/Application 中，然后直接使用

# c - C中的除法程序

> ID：15454891
> 
> 赞同：-2
> 
> 时间：2013-03-16T21:25:57.807
> 
> 标签：c, linux, division

我正在做一个程序来展示如何用二进制代码进行除法。

```
#include <stdio.h>
#include <stdlib.h>

unsigned int division(unsigned int a, unsigned int b) // fonction division
{
    int i;
    b = (b << 16);
    for(i = 0; i <= 15; i++)
    {
        a = (a << 1);
        if(a >= b)
        {
            a = a - b;
            a = a + 1;
        }
    }
    return a;
}

int main()
{
    unsigned int i, a, b, d, N;
    unsigned short c;

    FILE* rep;
    rep = fopen("reponse.txt", "w"); /* ouverture du fichier */

    printf("Entrer le nombre de division a effectuer");
    scanf("%i", &N);

    printf("Veuillez inserer la ou les divisions a effectuer\n");
    printf("de la facon suivante : a/b\n");

    for(i = 1; i <= N; i++)
    {
        scanf("%i/%i", &a, &b); /* il suffira d'entrer a/b */
            d = division(a, b); /* la division de a par b */
            c = unsigned short(d); /* les 16 premiers bits */
            d = (d >> 16); /* les 16 premiers bits */
            fprintf(rep, "division %i : %i/%i = %d reste %i\n", i, a, b, c, d);
    }
    fclose(rep); /* fermeture du fichier */
    return 0;
} 
```

它`error: expected expression before 'unsigned'`在这一行向我显示`c = unsigned short(d);` 我不知道到底是什么问题！有人能帮助我吗？我在 Code::Blocks 上的 Linux Ubuntu 12.10 编码下

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:26:35.650

```
c = unsigned short(d); 
```

这不是 C。

要从一种类型转换为另一种类型，您可以使用强制转换运算符：

```
c = (unsigned short) d; 
```

`unsigned int`请注意，由于and之间存在隐式转换`unsigned short`，因此不需要强制转换，这是等效的：

```
c = d; 
```

# arrays - 是否可以通过包含在另一个数组中来过滤 angular.js？

> ID：15454900
> 
> 赞同：21
> 
> 时间：2013-03-16T21:26:59.490
> 
> 标签：arrays, angularjs, filtering

所以如果我有一个数组：

```
$scope.letters = 
[{"id":"a"},
{"id":"b"},
{"id":"c"}]; 
```

还有另一个数组

```
$scope.filterBy = ["b","c","d"]; 
```

而且我希望有一些 ng-repeat 仅通过出现在 $filterBy 中的项目来过滤 $scope.letters。

我希望能够做一些事情：

```
<span ng-repeat="{{letter in letters|filter: letter.id in filterBy }} > {{letter.id}} </span> 
```

让它打印 b,c

我知道这是一个非常愚蠢的例子，但是有没有办法根据另一个数组对象的内容过滤 angular.js 表达式？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-01-16T20:12:06.377

**更新**

这是一个角度模块（基于@InviS 答案），可以在您的角度应用程序中轻松实现此过滤器： [filters-inArrayFilter](http://cyberdelphos.github.io/angular-inarray-filter/ "过滤器-inArrayFilter 由cyberdelphos")

* * *

这是基于@InviS 答案的角度过滤器方法：

过滤器应该是这样的：

```
.filter('inArray', function($filter){
    return function(list, arrayFilter, element){
        if(arrayFilter){
            return $filter("filter")(list, function(listItem){
                return arrayFilter.indexOf(listItem[element]) != -1;
            });
        }
    };
}); 
```

其中***list***是您要过滤的列表（此参数默认由 angular 设置），***arrayFilter***是您用作过滤器的数组，***element***是要在列表中过滤的属性的名称。

要使用此过滤器，您可以将 ng-repeat 用作：

```
<div ng-repeat='letter in letters | inArray:filterBy:"id"'>{{letter.id}}</div> 
```

其中***inArray***是过滤器，***filterBy*** *（此过滤器的第一个参数）*是要匹配的数组，***“id”*** *（第二个参数）*是要与数组匹配的列表元素。

您可以使用角度过滤器方法尝试这个[实时示例。](http://jsbin.com/owIXEPE/2/edit)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-16T21:45:40.563

你应该尝试这样的事情：

JS：

```
angular.module('Test', []);

function Ctrl($scope) {
  $scope.letters = [
    {id: 'a'},
    {id: 'b'},
    {id: 'c'}
  ];

  $scope.filterBy = ['b', 'c', 'd'];

  $scope.filteredLetters = function () {
    return $scope.letters.filter(function (letter) {
      return $scope.filterBy.indexOf(letter.id) !== -1;
    });
  };
}

Ctrl.$inject = ['$scope']; 
```

HTML：

```
<div ng-repeat='letter in filteredLetters(letters)'>{{letter.id}}</div> 
```

你可以试试[活的例子](http://jsbin.com/uxihug/1/edit)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-12T13:44:04.890

很旧，但我需要它，我不得不稍微改变一下。这是我的过滤器“notInArray”

```
app.filter('notInArray', function($filter){
return function(list, arrayFilter, element){
    if(arrayFilter){
        return $filter("filter")(list, function(listItem){
          for (var i = 0; i < arrayFilter.length; i++) {
              if (arrayFilter[i][element] == listItem[element])
                  return false;
          }
          return true;
        });
    }
}; 
```

});

```
<md-chips ng-model="filter.SelectedValues" md-autocomplete-snap
          md-require-match="true">
      <md-autocomplete
          md-search-text="searchFilterChip"
          md-items="val in filter.Values | notInArray:filter.SelectedValues:'Id'"
          md-item-text="val.Name"
          md-no-cache="true"
          md-min-length="0">
        <span md-highlight-text="searchFilterChip">{{val.Name}}</span>
      </md-autocomplete>
      <md-chip-template>
        {{$chip.Name}}
      </md-chip-template>
  </md-chips> 
```

我认为这可以改进，但在我的情况下不需要。

希望对某人有所帮助！

# javascript - Javascript 表单错误 - 脚本不运行

> ID：15454907
> 
> 赞同：-4
> 
> 时间：2013-03-16T21:27:28.010
> 
> 标签：javascript, jquery, html

我正在测试我为计算器编写的脚本，我正在使用 HTML 表单元素来获取用户输入值，并在单击该按钮时调用外部脚本中的函数

这是我的 HTML 代码：

```
<body>
    <script>
    $(document).ready(function () {
    //on add buttton depressed, fire event which calls the initializer function
    $('#form3').on('click','button',function () {
    var ans = $(initializer());
    $('#form6').text(ans); 
    });
});
</script>   
<div id="wrapper">
<p>INPUT TEXT IN ROMAN NUMERALS</p>
<form id="form1" class="" >
    <input type="text" id="form2" class="" width="1"/>  
    <button name="button" id="form3" class=""> + </button> 
    <input type="text" id="form4" class="" />  
    <button name="button2" id="form5" class=""> = </button>
    <input type="text" name="result" id="form6" class=""></input>
</form>
</body>
</html> 
```

这是我的函数，它位于一个外部 JavaScript 文件中，当用户单击按钮时调用`#form3`它`ID`（我将它包含在`head`元素中）

```
function initializer ()
{
    //contains user input in first box
    var userinput_a  = $('#form2').val($(this).val().toUpperCase());
    //contains user input in second box  
    var userinput_b  = $('#form4').val($(this).val().toUpperCase());
    try
    {
    if(!validity(userinput_a, userinput_b))
    {
      throw exception;
    }
    }
    catch(err)
    {
        alert('Wrong values put in the right value');
    }

    var combinedtext = userinput_a + userinput_b;
    var stage1 = romanexpanded(combinedtext);   //text contains roman to expanded
    var stage2 = expandedtoroman(stage1);       //text contains expanded to roman

    return stage2;
} 
```

[http://jsfiddle.net/Dvgqu/2/](http://jsfiddle.net/Dvgqu/2/)

我已经查看了代码，但显然，我无法找出是什么阻止了我的脚本正常运行，每当我单击调用我的函数的按钮时，我的输入框中的值就会消失。

任何帮助将不胜感激。谢谢！

编辑：我使用了 javascript 调试控制台，通过浏览我的代码，我推断它要么是我调用初始化函数的方式，要么是我访问表单值的方式，唯一的问题是我看不出有什么问题我的语法或逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:29:23.127

只是`.text(stage2)`。没有理由用`$`以下结果包装`initializer`：

`.text(initializer());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:32:56.763

您的代表不正确。这个：

```
$('#form3').on('click','button',function () {
    var ans = $(initializer());
    $('#form6').text(ans); 
}); 
```

不起作用，因为`#form3` **是**按钮。正如@user1737909 所说，您不会将函数调用包装在 jQuery 选择器中。另外，使用`.val()`方法：

```
$('#form3').on('click', function () {
    var ans = initializer();
    $('#form6').val(ans); 
}); 
```

# php - 将 ip2long 数组转换为单个对象

> ID：15454910
> 
> 赞同：1
> 
> 时间：2013-03-16T21:27:49.640
> 
> 标签：php, mysql, ip

我正在使用 ip2long 函数，它工作正常并返回数组中的一长串 IP 地址。

我想做的是将每个 ip 地址放入 mysql 数据库中，我查看了几个示例，但找不到任何与 ip2long 函数相关的示例，如果我说实话，它们只是让我感到困惑。

下面是我的代码，

```
function ip_range($start, $end) {
$start = ip2long($start);
$end = ip2long($end);
return array_map('long2ip', range($start, $end) );
}

$range_one = "151.76.0.0";
$range_two = "151.76.255.255";
print_r( ip_range($range_one, $range_two) ); 
```

任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T02:41:43.553

你的函数看起来很好，产生了很多 IP 地址......

```
function ip_range($start, $end) {
    $start = ip2long($start);
    $end = ip2long($end);
    return array_map('long2ip', range($start, $end) );
}

$range = ip_range("151.76.0.0", "151.76.255.255"); 
```

但是我仍然不确定您要存储 ips 的方式，每个都在不同的行中，还是应该在一行中？

假设每个 ip 在单独的行中，只需遍历数组：

```
foreach ($range as $ip) {
    // create db entry for $id
    // id column should be of type varchar(15)
} 
```

如果整个 ip 范围只有一行：

```
$ip = implode(',', $range);
// create db entry for $id 
```

您应该使用列类型文本，因为这些范围可能会变得相当长。

在这两种情况下都会浪费大量数据空间，为什么不在数据库中存储长版本的 ip 范围呢？

四列 id, ip_start as `long`, ip_end as `long`, netname; 那么在查询 IP 地址时，您所要做的就是`$ip = ip2long(...)`先查找网络，然后再查找网络`where ip_start <= $ip and $ip <= ip_end`。

# sed - 使用 sed 将每行的多个字段拆分为单独的行，保留行前缀

> ID：15454914
> 
> 赞同：10
> 
> 时间：2013-03-16T21:28:29.363
> 
> 标签：sed

上周五我遇到了一个问题，将文本转换为另一种格式。在那台机器上，只有 gnu sed 可用，没有 awk（奇怪，我知道）。我对perl一无所知。所以我正在寻找一个仅限 sed 的解决方案。

文件内容是：

```
a  yao.com sina.com
b  kongu.com
c  polm.com unee.net 21cn.com iop.com foo.com bar.com baz.net happy2all.com
d  kinge.net 
```

所需的输出（应该是一个新文件）是：

```
a  yao.com 
a  sina.com
b  kongu.com
c  polm.com 
c  unee.net 
c  21cn.com 
c  iop.com
c  foo.com
c  bar.com
c  baz.net
c  happy2all.com
d  kinge.net 
```

我尝试了很多，也搜索了著名的 sed oneliner，但我无法做到......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T22:09:40.293

有趣的问题：

```
$ sed -r 's/(\w+\.\w+)/>  &/2g;:a s/^([a-z]+)(.*)>/\1\2\n\1/g;ta' file
a  yao.com 
a  sina.com
b  kongu.com
c  polm.com 
c  unee.net 
c  21cn.com 
c  iop.com 
c  foo.com 
c  bar.com 
c  baz.net 
c  happy2all.com
d  kinge.net 
```

**编辑：**

它通过使用两个替换来工作。

第一个`>`在需要展平的 URL 之前放置一个作为保持字符的：

```
$ sed -r 's/(\w+\.\w+)/>  &/2g' file
a  yao.com >  sina.com
b  kongu.com
c  polm.com >  unee.net >  21cn.com >  iop.com >  foo.com >  bar.com ...
d  kinge.net 
```

第二个基本上用`>`换行符替换了持有*（使用条件分支）*：

```
$ sed -r ':a s/^([a-z]+)(.*)>/\1\2\n\1/g;ta' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T22:20:50.410

对于 sed 来说，这不是一件容易的事，尤其是单行。但是你提到了“gnu sed”。我看见了光！

gnu sed 支持`s/.../.../ge`在这种情况下很有用：

```
kent$  sed -r 's@(^[a-z]+) (.*)@echo "\2"\|sed "s# #\\n\1  #g"\|sed "/^$/d"@ge' file  
a  yao.com
a  sina.com
b  kongu.com
c  polm.com
c  unee.net
c  21cn.com
c  iop.com
c  foo.com
c  bar.com
c  baz.net
c  happy2all.com
d  kinge.net 
```

简短说明：

1.  外部 sed允许我们将匹配`sed -r 's@..x..@..y..@ge' file` 的部分传递给外部命令`ge`
2.  该`..y..`部分由`ge`. 我传递`\2`给另一个`sed`（通过`echo`）：`sed "s# #\\n\1 #g"`这个 sed 将所有空间替换为`\n + \1 + space`
3.  在原始文件中，`\n`每一行都有（结尾），所以第 2 步（上一步）的结果中有空行，我们需要删除那些空行`"/^$/d"`
4.  最后，可以完成步骤 1 中的替换（外部 sed），我们得到结果。

检查`info sed`_`s/../../ge`

编辑，添加了 OP 评论的双空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T22:32:12.347

正如其他人所指出的，sed 解决方案很棘手，所以我想我发布了一个 bash-dito：

```
#!/bin/bash

while read -a array
do
    for i in ${array[@]:1}
    do
        echo ${array[0]} $i
    done
done < input 
```

输出：

```
a yao.com
a sina.com
b kongu.com
c polm.com
c unee.net
c 21cn.com
c iop.com
c foo.com
c bar.com
c baz.net
c happy2all.com
d kinge.net 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T23:56:54.313

这是一个真正有效的 sed-only 脚本。我在下面将其编写为 sed 在命令行上调用的文件，但它可以全部在命令行上键入，也可以全部输入到单独的脚本中：

将以下内容另存为 sedscript（或任何您想调用的名称）。解释跟在输出后面。

```
:start
    h
    s/\(.\ \ [^ ]*\).*/\1/
    t continue
    d
:continue
    p
    x
    s/\(.\ \)\ [^ ]*\(\ .*\)/\1\2/
    t start
    d 
```

现在运行`sed -f sedscript myfile.txt`

将上面的示例保存为 myfile.txt，输出如下：

```
a  yao.com
a  sina.com
b  kongu.com
c  polm.com
c  unee.net
c  21cn.com
c  iop.com
c  foo.com
c  bar.com
c  baz.net
c  happy2all.com
d  kinge.net 
```

Sed 有一个模式缓冲区（您通常在其中使用`s/a/b/`各种命令）和一个保持缓冲区。在此脚本中，信息在保留缓冲区中来回交换，以在处理另一部分时保留一行中未编辑的部分。

`:start`= 启用跳跃的标签

`h`= 将模式缓冲区（当前行）交换到保持缓冲区

`s/\(.\ \ [^ ]*\).*/\1/`= 虽然整行在保持缓冲区中是安全的，但删除第一个域之后的所有内容，留下第一个所需的行（例如“a yao.com”）。

`t continue`= 如果上一个命令导致替换，则跳转到“继续”标签

`d`=如果我们没有跳，那意味着我们已经完成了。删除模式缓冲区并继续到文件的下一行。

`:continue`= 上一个跳转的标签

`p`= 打印出模式缓冲区（例如“a yao.com”）

`x`= 将模式缓冲区与保持缓冲区交换（也可`g`用于简单地将保持缓冲区复制到模式缓冲区上）

`s/\(.\ \)\ [^ ]*\(\ .*\)/\1\2/`= 完整的原始字符串现在已被交换到模式缓冲区 - 剥离我们刚刚处理的域（例如“yao.com”）

`t start`= 如果这不是最后一个域，则使用新的缩短字符串重新开始脚本。

`d`= 如果这是最后一个域，则删除模式缓冲区并继续到文件中的下一行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T14:01:00.753

这可能对您有用（GNU sed）：

```
sed -r 's/^((\S+\s+)\S+)\s+/\1\n\2/;P;D' file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-16T23:38:36.143

这是一个可以做到这一点的单线（对于“一个”的一些定义）。它应该适用于任何 sed，但我只用 gnu sed 测试过它。

```
sed ':l;s/\(^\|\n\)\([^ \n]\)  \([^ \n][^ \n]*\) /\1\2  \3\ 
\2  /;t l' 
```

这是 . 之后的文字换行符`\3\`。

解释：

1.  通过用反斜杠转义，可以在替换中包含文字换行符。
2.  `:l`制作一个名为 的标签`l`。
3.  如果进行了替换，则循环`t l`到标签。`l`
4.  该`s`命令对最初包含输入行的模式空间缓冲区进行操作。在`s`命令之后，模式空间缓冲区包含替换的结果，包括换行符。通过循环的第二次和后续时间，该`s`命令获取整个模式空间缓冲区，包括在早期替换中添加的任何换行符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T21:38:50.240

```
cat inputFile.txt | sed -e 's/\([^\ ]*\)\(\ *\)\([^\ ]*\)\(\ *\)\([^\ ]*\)\(\ *\)\([^\ ]*\)\(\ *\)\([^\ ]*\)\(\ *\)/\1 \3\n\1 \5\n\1 \7\n\1 \9/' | grep -vE "^..$" 
```

适用于我的 Ubuntu 12.10。

解释：

*   将其分为 2 组：文本组和空字符组
*   重复第 1 组（带第一个字符）甚至组（带文本）
*   目前适用于由空字符分隔的 4 个文本

最后，删除包含空“第二”组的行。

另一个尝试使用 BASH（执行为“script.sh inputFile.txt”）：

```
#!/bin/bash

firstParams=`cat $1 | sed -e 's/\([^\ ]*\)\(.*\)/\1/'`
count=1
for MY1 in $firstParams
do
    # print line number ${count} and filter params from the second one forth
    restParams=`cat $1 | sed -n "${count}p" | sed -e 's/\([^\ ]*\)\(.*\)/\2/'`
    for MY2 in $restParams
    do
        echo "$MY1 $MY2"
    done
    count=$(($count+1))
done 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-16T22:10:37.280

您可以使用

```
sed -r -n 's/^([a-z])\ \ ([0-9a-z.]*)\ ([0-9a-z .]*)/\1  \2\n\1  \3/p' 
```

它将转换表格的每一行

```
c  polm.com unee.net 21cn.com iop.com foo.com bar.com baz.net happy2all.com 
```

进入

```
c  polm.com
c  unee.net 21cn.com iop.com foo.com bar.com baz.net happy2all.com 
```

每次运行时。

所以下次它在前一个 sed 的输出上运行时，这将变成

```
c  polm.com
c  unee.net
c  21cn.com iop.com foo.com bar.com baz.net happy2all.com 
```

等等。

因此，将前一个 sed 的输出推入新的 sed 最终应该会为您提供所需的格式。

我知道这可能不是最佳答案，如果可能，我会尝试改进它。

# jquery - fancybox 2.1.4 - 未捕获的类型错误：无法读取未定义的属性“助手”

> ID：15454915
> 
> 赞同：5
> 
> 时间：2013-03-16T21:28:36.290
> 
> 标签：jquery, magento, fancybox, fancybox-2

我正在处理的网站存在一些问题，我似乎无法让 fancybox 使用 YouTube 剪辑正确测试它。

这是我的脚本文件。使用 2.1.4 和 jQuery 1.9

脚本.js

```
var $j = jQuery.noConflict();

$j(document).ready(function(){

    $j('.flexslider').flexslider({
    animation: "slide"
  });

    $j('.fancybox-media').fancybox({
        openEffect  : 'none',
        closeEffect : 'none',
        helpers : {
            media : {}
        }
    });

}); 
```

flexslider 工作得很好，但是 fancybox-media 有问题。当我单击链接时，它只会打开链接，而不是在花式框窗口中打开媒体文件。

在 chrome 控制台里面说

```
Uncaught TypeError: Cannot read property 'helpers' of undefined jquery.fancybox-media.js:88
(anonymous function) jquery.fancybox-media.js:88
(anonymous function) jquery.fancybox-media.js:196 
```

链接定义为：

```
<h2><a class="fancybox-media" href="http://www.youtube.com/watch?v=czQipWJA8EU">Watch This Video</a></h2> 
```

此外，如果您想查看正在开发的站点，可以在 www.miems.co 找到

任何想法请告诉我。真诚的，大卫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-31T18:17:32.830

鉴于有数百个观点，还没有答案

这

```
$('.fancybox').fancybox(); 
```

需要在从 fancybox 调用任何其他代码之前调用

就我而言，我已经更改了执行 javascript 的顺序，从：

```
<script type="text/javascript" src="/static/js/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript" src="/static/js/jquery.fancybox.js?v=2.1.5"></script> 
```

至：

```
<script type="text/javascript" src="/static/js/jquery.fancybox.js?v=2.1.5"></script>
<script type="text/javascript" src="/static/js/jquery.fancybox-thumbs.js?v=1.0.7"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T18:08:33.737

我遇到了同样的错误，因为我愚蠢地在页面上包含了 jquery.fancybox.js 两次。只需删除第二个电话，问题就应该得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T20:49:42.887

在 wordpress 中，经过长时间的研究和更新：

已经用 Fancybox 加载了主题，除此之外，我还有一个插件也使用了 fancybox， **这创建了对 Fancybox 的双重调用**。Ashish Kumar 指出了这一点。谢谢我只禁用了插件，所有错误都消失了。

主题：旅游套餐

插件：Easy Fancybox

# javascript - 点击时提取drawingManager多边形路径Google Maps

> ID：15454919
> 
> 赞同：8
> 
> 时间：2013-03-16T21:29:39.610
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, polygon

我有一个启用了绘图管理器的谷歌地图，用户可以在其中绘制一个多边形并将其保存到我的数据库中。我为overlaycomplete 事件向drawingManager 对象添加了一个事件侦听器。触发事件时，多边形的坐标将写入隐藏字段。这很好用——唯一的问题是，如果在该点之后拖动/更改各个顶点，则不会触发事件。当用户点击提交并将它们写入隐藏字段时，我需要更新（任何）更改字段或遍历多边形顶点。我不太清楚如何让它工作，但你可以在这里看到我到目前为止所拥有的：http: [//jsfiddle.net/5Y4WT/21/](http://jsfiddle.net/5Y4WT/21/)

**HTML：**

```
<div id="map_canvas" style="width:500px; height:450px;"></div>
<form method="post" accept-charset="utf-8" id="map_form">
  <input type="text" name="vertices" value="" id="vertices"  />
  <input type="button" name="save" value="Save!" id="save"  />
</form> 
```

**JavaScript：**

```
var map; // Global declaration of the map
var iw = new google.maps.InfoWindow(); // Global declaration of the infowindow
var lat_longs = new Array();
var markers = new Array();
var drawingManager;
function initialize() {
    var myLatlng = new google.maps.LatLng(40.9403762, -74.1318096);
    var myOptions = {
        zoom: 13,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP}
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    drawingManager = new google.maps.drawing.DrawingManager({
    drawingMode: google.maps.drawing.OverlayType.POLYGON,
    drawingControl: true,
    drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                drawingModes: [google.maps.drawing.OverlayType.POLYGON]
                },
                        polygonOptions: {
                            editable: true
                        }
            });
            drawingManager.setMap(map);

            google.maps.event.addListener(drawingManager, "overlaycomplete", function(event) {
                var newShape = event.overlay;
                newShape.type = event.type;
            });

            google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
                $('#vertices').val(event.overlay.getPath().getArray());
            });
        }
 initialize();

$(function(){
    $('#save').click(function(){
        //iterate polygon vertices?
    });
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T22:27:42.587

**弄清楚了！！**

我添加了函数overlayClickListener：

```
function overlayClickListener(overlay) {
    google.maps.event.addListener(overlay, "mouseup", function(event){
        $('#vertices').val(overlay.getPath().getArray());
    });
} 
```

并将其附加到overlaycomplete上的叠加层：

```
google.maps.event.addListener(drawingManager, "overlaycomplete", function(event){
                overlayClickListener(event.overlay);
                $('#vertices').val(event.overlay.getPath().getArray());
            }); 
```

有关实际解决方案，请参见此处：http: [//jsfiddle.net/rvsMH/1/](http://jsfiddle.net/rvsMH/1/)

# php - 如何使用 PhpStorm 连接到 Openshift 数据库？

> ID：15454920
> 
> 赞同：3
> 
> 时间：2013-03-16T21:29:55.117
> 
> 标签：php, mysql, ssh, phpstorm, openshift

我尝试使用以下设置连接到 OpenShift MySQL 数据库：

![在此处输入图像描述](../Images/83f0c55327fbb09cc8a12a79020fdbe2.png)

和

![在此处输入图像描述](../Images/c181a0ef63ba586b501e229927bda936.png)

但我收到以下错误消息：

```
Connection to ConnectionNAME failed
java.sql.SQLException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at com.intellij.persistence.jdbc.impl.RemoteDriverImpl.connect(RemoteDriverImpl.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy74.connect(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.execution.rmi.RemoteUtil$RemoteInvocationHandler.invoke(RemoteUtil.java:206)
    at $Proxy75.connect(Unknown Source)
    at com.intellij.javaee.module.view.dataSource.LocalDataSource.getConnection(LocalDataSource.java:161)
    at com.intellij.javaee.module.view.dataSource.LocalDataSource.getConnection(LocalDataSource.java:133)
    at com.intellij.javaee.dataSource.DataSource.performJdbcOperation(DataSource.java:288)
    at com.intellij.javaee.dataSource.AbstractDataSource.refreshMetaData(AbstractDataSource.java:25)
    at com.intellij.javaee.module.view.dataSource.DataSourceUiUtil$3.run(DataSourceUiUtil.java:140)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$TaskRunnable.run(ProgressManagerImpl.java:495)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$6.run(ProgressManagerImpl.java:304)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl$2.run(ProgressManagerImpl.java:185)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:226)
    at com.intellij.openapi.progress.impl.ProgressManagerImpl.runProcess(ProgressManagerImpl.java:175)
    at com.intellij.openapi.application.impl.ApplicationImpl$9$1.run(ApplicationImpl.java:676)
    at com.intellij.openapi.application.impl.ApplicationImpl$7.run(ApplicationImpl.java:449)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
    at com.intellij.openapi.application.impl.ApplicationImpl$1$1.run(ApplicationImpl.java:152)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:294)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at com.intellij.persistence.jdbc.impl.RemoteDriverImpl.connect(RemoteDriverImpl.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的行为有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:23:37.897

看起来您正在尝试远程连接到设备的 mysql 实例。如果您想简化该步骤，我们有用于端口转发的工具： [https](https://openshift.redhat.com/community/blogs/getting-started-with-port-forwarding-on-openshift)
://openshift.redhat.com/community/blogs/getting-started-with-port-forwarding-on-openshift 否则，您需要使用$UUID 作为代理用户，一旦连接，您的本地连接应该是 127.0.0.1:48729

看起来您的管理员用户的值可能不正确。请 ssh 到您的设备 (rhc ssh {appName}) 并运行“env | grep OPENSHIFT_MYSQL”以列出存储连接详细信息的变量。

jdbc:mysql://127.11.103.129:3306/project 假设：

```
127.11.103.129 == $OPENSHIFT_MYSQL_DB_HOST
3306 == $OPENSHIFT_MYSQL_DB_PORT
project == $OPENSHIFT_APP_NAME 
```

如果其中任何一个值不正确，请同时使用正确的值。

也可以随意在 OpenShift 论坛上发帖： [https ://openshift.redhat.com/community/forums/openshift](https://openshift.redhat.com/community/forums/openshift)

# c++ - 手动配置缩进 monodevelop

> ID：15454921
> 
> 赞同：1
> 
> 时间：2013-03-16T21:29:55.957
> 
> 标签：c++, c, visual-studio, monodevelop

我是 Windows 的老用户，使用 Linux 主要是为了终端和网络。问题是，我真的很喜欢 VisualStudio 代码编辑器窗口。我并没有真正使用 IDE 处理项目，但在我看来，VS 突出显示和对 c/c++ 文件进行缩进的方式是完美的。

一方面，是否可以让 Monodevelop 进行 c++ 突出显示（新、使用、命名空间等）？

但是对于我的主要问题：我可以手动配置 Monodevelop 如何处理缩进吗？如果插入点尚未正确对齐，我希望它在大括号或条件语句之后的换行符之后自动插入缩进，并在提供右大括号时取消缩进。

# magento - Magento 登录功能

> ID：15454922
> 
> 赞同：0
> 
> 时间：2013-03-16T21:30:05.023
> 
> 标签：magento, e-commerce, magento-1.7

有人能指出我正确的方向吗

我想为我的 Magento 站点添加一个新的登录功能。

目前，客户菜单已被覆盖为 www.mysite.com/myaccount

但是当用户登录时，它一直显示为客户/帐户/登录。

如何覆盖登录功能以将其作为 myaccount/login

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:36:00.273

您需要更改登录逻辑中指定的重定向 URL。

# shell - 在 qsub 中传递字符串参数

> ID：15454924
> 
> 赞同：1
> 
> 时间：2013-03-16T21:30:06.477
> 
> 标签：shell, command-line-arguments, octave, qsub

我有以下名为 dump.sh 的 shell 脚本

```
#!/bin/sh
#$ -cwd
#$ -j y
#module load gcc octave
octave --eval "dumpoct($Nlay, $prefix);" 
```

此脚本加载 octave 模块，然后评估以下 octave 函数，该函数仅显示两个输入参数

```
function dumpoct(arg1,arg2)
display(arg1)
display(arg2) 
```

当我按如下方式提交 shell 脚本时，它可以工作（传递两个数字作为参数）

```
qsub -v Nlay=10,prefix=40 dump.sh 
```

但是，当我使用一个第一字符串参数提交它时，如下所示：

```
qsub -v Nlay=10,prefix="qwerty" dump.sh 
```

我收到一个错误

```
error: `qwerty' undefined near line 0 column 13
error: evaluating argument list element number 2 
```

我也尝试了以下，我得到了同样的错误

```
qsub -v Nlay=10,prefix='qwerty' dump.sh
qsub -v Nlay=10,prefix=qwerty dump.sh 
```

知道我该怎么做吗？

谢谢

乔戈斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T00:37:24.630

我认为这是一个 bash 解释器问题，因为它基本上删除了引号。试试这个：

```
qsub -v Nlay=10,prefix=\"qwerty\" dump.sh 
```

反斜杠防止引号被解释为 bash 解释器的指令。

注意：由于dump.sh中使用了bash本身，它可能无法完全解决问题。您可能还需要自己传递反斜杠......这使它看起来有点笨重，如下所示：

```
qsub -v Nlay=10,prefix=\\\"qwerty\\\" dump.sh 
```

然后它将在 dump.sh 中显示为 \"qwerty\"，然后由 bash 解释并作为 "qwerty" 传递给八度。~~不确定是否有更时尚的解决方案。~~

有一个更时尚的解决方案，虽然只是稍微如此。就像这样：

```
qsub -v Nlay=10,prefix='\"qwerty\"' dump.sh 
```

单引号将使其通过反斜杠，但不幸的是您不能使用两个单引号 - 它不会正确传递 ''qwerty''。

# javascript - Javascript没有将整个屏幕滚动到顶部

> ID：15454927
> 
> 赞同：-3
> 
> 时间：2013-03-16T21:30:19.310
> 
> 标签：javascript, razor

这是一个 MVC 3 Razor 视图引擎项目...我有一个通知窗口，它会在页面加载时自动滚动到底部。这在屏幕上显示为部分视图。问题是当这种情况发生时整个屏幕滚动到底部而不仅仅是部分屏幕......我一直在这个圈子里，不能只让部分视图滚动到底部......

我在父页面的底部使用这个 javascript 试图强制它滚动到顶部但无济于事......`<script language="javascript" type="text/javascript"> document.body.scrollTop = document.documentElement.scrollTop = 0; </script>`

这是父视图的示例：

```
@Code
ViewData("Title") = "Testing Area"
End Code
<link rel="Stylesheet" type="text/css"    href="@Url.Content("~/Content/pro_drop/pro_drop_1.css")" />
<script src="@Url.Content("~/Content/pro_drop/stuHover.js")" type="text/javascript">                      </script>
<script type="text/javascript">

<script language="javascript" type="text/javascript">
var int = self.setInterval(function () { clock() }, 1000);
function clock() {
    $.ajax({
        url: '@Url.Action("currentUsers", "Admin")',
        type: "GET",
        success: function (result) {
            $("#CurrUsers").html(result);
        }
    });
}
</script>
<fieldset>

<table style="border-style: hidden; vertical-align: top">
    <tr>
        <td>
            <table style="border-style: hidden; vertical-align: top">
                <tr>
                    <td>
                        <div id="CurrUsers" style="font-size: x-small">
                            @Html.Partial("_CurrentUsers", ViewBag.UserListOnline)
                        </div>
                    </td>

                </tr>
            </table>
        </td>

    </tr>
    <tr>
        <td style="border-style: hidden; vertical-align: top">
            <table style="border-style: hidden;">
                <tr>
                    <td>
                        <div id="chatter">
                            @Html.Partial("ChatScreen", ViewBag.ClientName)
                        </div>
                    </td>
                </tr>

            </table>
        </td>
       </tr>
     </table>

<script language="javascript" type="text/javascript">
    document.body.scrollTop = document.documentElement.scrollTop = 0;
</script>
</fieldset> 
```

然后`@Html.Partial("ChatScreen", ViewBag.ClientName)`看起来像这样：

```
<script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.signalR-0.5.3.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/signalR/hubs")" type="text/javascript"></script>
<style>
    div.rectangular-area
    {
        border: 1px solid #999;
        margin-top: 5px;
        margin-bottom: 5px;
        padding: 10px;
        background-color: #EEE;
        max-height: 240px;
        width: 500px;
        overflow : scroll;
       }
 </style>
 @code
    Dim xList As List(Of String) = ViewBag.msgHist
 End Code

 <div style="width:auto;height:400px">

 <script type="text/javascript">
 $(function () {

    var chat = $.connection.chat;
    var myClientName = '@ViewBag.ClientName';
    var autoScroll = true;
    if (autoScroll) {
        $('#messages').animate({ scrollTop: $('#messages').prop('scrollHeight') })
    };

    chat.GetMessage = function (myClientName, message) {
        $('#CheckinEvents').append('<br>' + myClientName + ' : ' + message);
        if (autoScroll) {
            $('#CheckinEvents').animate({ scrollTop: $('#CheckinEvents').prop('scrollHeight') })
        }
    };

    $('#msg').keydown(function (e) {
        if (e.which == 13) { //Enter
            e.preventDefault();
            chat.send(myClientName, $('#msg').val());
            $('#msg').val('');
        }
    });

    chat.addMessage = function (myClientName, message) {
        if (myClientName.indexOf("System") != -1) {
        $('#messages').append('<br><b style="color:red">'+ myClientName + message + '</b>');
        }

        else
        {
        $('#messages').append('<br>' + myClientName + ' : '+ '<b style="color:#000000">'  + message);
                    }

        if (autoScroll) {
            $('#messages').animate({ scrollTop: $('#messages').prop('scrollHeight') })
        }
    };

    $("#broadcast").click(function () {
        // Call the chat method on the server
        chat.send($('#msg').val());
    });

    // Start the connection
    $.connection.hub.start();
});
</script>

<div id="MessagingDiv" class="rectangular-area" style="width:600px" >
   Notify all Admin:
<input type="text" id="msg" style="width: 575px;" maxlength="128" />
</div>

<div id="messages" class="rectangular-area" style="text-align: left; width: 600px;">
<h3>
    Latest received events:
</h3>
@For Each item In xList
   If item.Contains("System Message") Then
       @<br />@<b style="color: Red">@item.Split("-")(0)  - <b style="color: Black">@item.Split("-")(1) : <b style="color: #8B6508">@item.Split("-")(3)</b></b> </b>
   Else
        @<br />@<b style="color:#00CDCD">@item.Split("-")(0) <b style="color: #FFA54F">(@item.Split("-")(1)) <b style="color:Black"> : @item.Split("-")(2)</b></b></b>
   End If
Next
</div>

</div> 
```

![调试信息](../Images/cb685c3ab92caae73e9111b2db9f63ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:10:10.417

这已通过将行更改`document.body.scrollTop = document.documentElement.scrollTop = 0;`为

`document.scrollTop = 0;`

也许这会帮助遇到同样问题的其他人......

# java - 检查目录是否可以打开并列出其文件

> ID：15454928
> 
> 赞同：1
> 
> 时间：2013-03-16T21:30:19.910
> 
> 标签：java, permissions, directory

我正在用Java开发一个shell。这个shell 可以执行命令`find 'regex'`。此命令以`regex`递归方式查找名称与 , 匹配的所有文件。查找文件的方法是：

```
 public void findFile(String regExp, String dirName) {
    File dir = new File(dirName);

    if (dir.canRead() == false)
        return;

    File[] files = dir.listFiles();

    for (File file : files) {
        if (file.isFile() == true)
            if (file.getName().matches(regExp) == true)
                System.out.println(file.getAbsolutePath());
        if (file.isDirectory() == true && file.canRead() == true) {
            findFile(regExp, file.getAbsolutePath());
        }
    }
} 
```

但如果无法打开目录，此命令将失败。例如，在`D:`分区中，我有一个名为`found.00`（该目录可能属于系统）的隐藏目录，我无法打开该目录。当方法遇到这个目录时，它会失败。如何检查目录是否属于系统并且无法打开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:35:52.757

正如您`file.canRead()`已经使用的那样，我想说您可以`findFile(String regExp, String dirName)`用 try-catch 包围方法的完整内容。然后，您可以捕获并记录或忽略访问错误。请尝试以下一种。

```
public void findFile(final String regExp, final String dirName) {
   try {
      final File dir = new File(dirName);

      if (dir.canRead() == false) {
         return;
      }

      final File[] files = dir.listFiles();

      for (final File file : files) {
         if (file.isFile() && file.getName().matches(regExp)) {
               System.out.println(file.getAbsolutePath());
         }
         if ((file.isDirectory()) && (file.canRead())) {
            findFile(regExp, file.getAbsolutePath());
         }
      }
   } catch (final IOException ignore) {
      System.out.println("No access to '"+dirName+"'.");
   }
} 
```

# python - Python CSV 抓取

> ID：15454929
> 
> 赞同：0
> 
> 时间：2013-03-16T21:30:50.333
> 
> 标签：python, csv, scrape, import-from-csv

我有一个 CSV 文件，其中的数据组织如下：

```
Name: xyz
DNS:  xyz
Type: xyz
Date: xyz

Name: xyz
DNS:  xyz
Type: xyz
Date: xyz

Name: xyz
DNS:  xyz
Type: xyz
Date: xyz 
```

对于许多用户 n，这种情况继续存在。

我试图弄清楚如何在 Python 中正确读取这些数据，这似乎不是一个难题，只是对我如何读取信息感到困惑，因为这不是 csv 文件的通常设置，它会更容易如果是名称、DNS 等，那么我会知道如何正确处理。

我从这样的事情开始：

```
import csv
r = csv.reader(open("data.csv")) 
```

现在做 r.next() 将逐行获取每件事，但这没有帮助，因为我的计划是有一个计数器来检查日期是否大于某个时间，并且类型字段匹配某个值添加一个数字循环中的某些变量，例如计数器。

就数据的结构而言，这有点接近我正在做的事情，但我认为这对我的探索没有帮助：

[如何使用 Python 从文本表中抓取数据？](https://stackoverflow.com/questions/5873969/how-can-i-scrape-data-from-a-text-table-using-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:34:50.430

那根本不是 csv 文件。如果这是您的格式，您可以扫描文件直到到达一个空白的新行，这表示一个部分。然后，您可以相应地解析每个部分。

我不认为`csv`在这里不会有任何帮助

您可以读取文件并逐行迭代

```
f = open('data.csv')
for line in f:
  pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:39:24.397

您可以尝试在使用set to和to[`**fmtparams`](http://docs.python.org/2/library/csv.html#module-contents)调用时通过设置参数来读取该数据。（或者将每个替换为或，具体取决于文件的行尾格式。）`csv.reader``Dialect.delimiter``\n``Dialect.lineterminator``\n\n``\n``\r\n``\r`

然后你会得到`Name: xyz`，`DNS: xyz`等等作为你的“csv”文件的“列”的内容——你只需要在冒号处拆分这些内容以进行进一步处理……</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T21:56:46.303

正如其他人提到的，您不需要 CSV 阅读器（确保您可以使用它，但没有任何好处）。只需读取数据文件并为当前部分保留一些状态。在空白行上存储当前部分并重置状态。

像这样的东西应该工作：

```
def load(input):
    data = []
    current = {}
    for line in input:
        # may be useful to strip the line here and forget about
        # leading/trailing whitespaces
        if not line.strip():
            data.append(current)
            current = {}
        # use line.split(':') if `:' does not appear in values
        colon = line.find(':')
        if colon == -1: # unknown format, throw an exception or just ignore it
            continue
        key = line[:colon]
        value = line[colon+2:-1] # or line[colon1].strip() to remove trailing whitespace
        current[key] = value
    return data

import sys

if __name__ == "__main__":
    with(open(sys.argv[1])) as input:
        print load(input) 
```

# javascript - 使用 capistrano 部署无法更新 js 和 css 文件。如何清除缓存的文件？

> ID：15454932
> 
> 赞同：1
> 
> 时间：2013-03-16T21:31:06.743
> 
> 标签：javascript, caching, deployment, capistrano, updates

我正在使用 capistrano 从本地主机部署到远程服务器。Everytging 工作正常，除了一件事：js 和 css 文件不更新。一个也没有。服务器上甚至没有更新 application.js 或 application.css。

我应该怎么做才能让 capistrano 更新 js 和 css 文件？我认为它们被缓存了，所以我只需要清除这些缓存文件。我怎么做？我认为这是一个常见问题，但我找不到任何相关信息。

任何帮助表示赞赏。先感谢您。

# installation - 高级安装程序神秘文件/文件夹

> ID：15454934
> 
> 赞同：1
> 
> 时间：2013-03-16T21:31:13.380
> 
> 标签：installation, advanced-installer

使用高级安装程序。当我构建并运行我的安装项目时，安装后有一个名为`MyCompany`（相当于`[Manufacturer]`）的文件夹位于`ApplicationData`文件夹中（在我的系统上解析为`C:\Users\Joey\AppData\Roaming\`）。

在该特定文件夹中是另一个名为`MyProgram 1.0.0`（相当于`[ProductName] [ProductVersion]`.

在该文件夹中是另一个名为`install`. 在该文件夹中有一个名为`setup.msi`1.17MB的文件

我不明白为什么要创建这个文件和这些文件夹。此外，在我卸载我的应用程序后，它们会留在系统上，这意味着我的应用程序正在制造垃圾。

有人可以解释为什么会这样吗？而且...如果我不能在安装我的应用程序时导致它不存在于文件系统中，我如何避免在卸载后将它留在文件系统中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:14:15.540

当您构建 EXE 安装文件时，这是 EXE 的默认提取文件夹，您可以在其中找到安装期间的所有资源。您可以从媒体页面“提取文件夹”中更改它。

由于高级安装程序中的错误，卸载后不会被删除，您可以[在论坛上找到更多详细信息和解决方法](http://www.advancedinstaller.com/forums/viewtopic.php?f=5&t=23179#p60094)。

# php - 将列表值作为变量发布

> ID：15454946
> 
> 赞同：0
> 
> 时间：2013-03-16T21:33:31.037
> 
> 标签：php, mysql

我目前正在尝试创建一个画廊上传页面，该页面允许用户选择一个专辑，专辑 ID 是下拉菜单中的值。选择他们选择的相册后，图像会被上传，并将图像 URL、ID、日期和相册等数据添加到表格中。尽管在下拉菜单中发布用户定义的值时遇到问题，但我已经设法将专辑 ID 添加到表中。

我在上传图片时收到此错误：

> 无法运行查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '[album]' 附近使用正确的语法

任何帮助将不胜感激，因为 MySQL 并不是我真正了解的领域，谢谢:)！

我的表格：

```
<form action="assets/includes/upload.php" method="post" enctype="multipart/form-data">
    <select name="album">
         <? uploadList(); ?>
    </select><br>
    <input type="file" name="file" id="file" style="margin-top:37px; margin-left: 3px;"><br>
    <input type="submit" name="submit" value="Submit" class="btn btn-primary" style="margin-left: 57px;">
</form> 
```

在upload.php页面上执行的功能：

```
function imageUpload() {
$id = ('$_POST[album]'); /////////// Focus being on this section ///////////        
$con = mysql_connect("localhost","$username","$password");
mysql_select_db("$dbname", $con);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
    $query2 = mysql_query("SELECT id,title,date FROM galleries WHERE id = $id");
    if (!$query2) {
        echo 'Could not run query: ' . mysql_error();
        exit;
    }
 $row = mysql_fetch_row($query2);
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("../../images/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      $file = $_FILES["file"]["name"];
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../../images/" . $_FILES["file"]["name"]);
      $sql="INSERT INTO images (url, gallery)
        VALUES
      ('$file','$id')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
      }
    }
  }
else
  {
  echo "Invalid file";
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:41:19.493

在您的 PHP 的第二行中，您有`$id = ('$_POST[album]');`. 这里发生的只是`$id`用文字字符串“填充” `'$_POST[album]'`。您需要对其进行更改，使其变为：

```
$id = intval($_POST['album']); 
```

现在您正在`album`从[全局 $_POST 数组](http://php.net/manual/en/reserved.variables.post.php)中读取 的值。

请注意您的代码容易受到[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)的影响，请采取[适当的措施来缓解它](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)。[`intval()`](http://php.net/manual/en/function.intval.php)当您阅读有关该主题的更多信息时，我为您添加了基本保护。

# opengl - 将结构作为统一传递给 GLSL

> ID：15454953
> 
> 赞同：2
> 
> 时间：2013-03-16T21:34:07.713
> 
> 标签：opengl, glsl

有没有办法将自定义结构作为统一传递给 GLSL 着色器？OpenGL Cookbook 展示了一种使用函数 setUniform('stuff') 的方法，但我不清楚这种方法。

# php - 在mysql中检查数字的功能不起作用

> ID：15454960
> 
> 赞同：1
> 
> 时间：2013-03-16T21:35:12.423
> 
> 标签：php, mysql

我正在尝试编写一个函数来检查mysql中是否存在随机数

```
$newEventId = rand(1000, 10000);
EventId($newEventId);

function EventId($gen)
{

  if (mysql_num_rows(mysql_query("SELECT id FROM events WHERE EventID=$gen" )) == 0) 
    break;

  // recall function
  else 
  {
    $newEventId = rand(1000, 10000);
    EventId($newEventId);
  } 
}

//insert into events table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T02:40:40.447

为什么不使用`AUTO_INCREMENT`列而不是尝试生成“随机”ID？此外，`EventId`函数也不安全，因为选择一个 id 并将其存储在数据库中不是原子的，因此另一个进程可能已经使用了相同的 id。

如果表具有`event_id`创建为`INT AUTO_INCREMENT`SQL 的列，则应如下所示：

```
INSERT INTO foo (event_id, ...) VALUES (<everything EXCEPT event_id>);
event_id = SELECT LAST_INSERT_ID(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:55:48.483

您没有说明为什么是`not working`，但我的猜测是，在`//insert into events table`下面的代码中，您正在使用`$newEventId`in `INSERT`，并且如果最初的`$newEventId`原因`(mysql_num_rows(mysql_query("SELECT id FROM events WHERE EventID=$gen" )) == 0)`返回它，它工作正常`true`，但如果它返回`true`递归函数则不是。

尝试返回值`break`并使用它而不是`$newEventId`

```
function EventId($gen)
{

  if (mysql_num_rows(mysql_query("SELECT id FROM events WHERE EventID=$gen" )) == 0) {
  return $gen; // return the number that will be set as $EventId and used in the insert
  break;
  }
  // recall function
  else 
  {
    $newEventId = rand(1000, 10000);
    EventId($newEventId);
  } 
}

$newEventId = rand(1000, 10000);
$EventId = EventId($newEventId);  // set the returned $gen to $EventId to be used in the Insert query

//insert into events table
mysql_query("INSERT INTO events ... EventID=$EventId.."); 
```

# c# - WPF TextBox 不会更新为 ViewModel 中的编程更改

> ID：15454963
> 
> 赞同：-2
> 
> 时间：2013-03-16T21:35:15.417
> 
> 标签：c#, wpf, data-binding

我有一个 WPF ViewModel

```
class MainWindowViewModel : INotifyPropertyChanged
    {
        private string _sql;

        public string Sql
        {
            get { return _sql; }
            set
            {
                if (value == _sql) return;
                OnPropertyChanged("Sql");
                _sql = value;
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
} 
```

我还有一个带有 TextBox 的 XAML 视图

```
<Window.Resources>
    <HbmSchemaExporter:MainWindowViewModel x:Key="viewModel"/>
</Window.Resources>
....

<TextBox Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding Source={StaticResource ResourceKey=viewModel}, Path=Sql,Mode=OneWay}"/> 
```

背后的代码

```
 private MainWindowViewModel ViewModel
    {
        get { return Resources["viewModel"] as MainWindowViewModel; }
    } 
```

问题是，当我在代码中执行时`viewModel.Sql = SOMETHING`，文本框没有得到更新。调试器在属性中显示正确的值，但文本框保持空白。

我还尝试将绑定更改为，`TwoWay`但这只允许我用我在文本框中键入的值覆盖属性，这是我并不真正想要的（实际上我仍然需要将其设为只读，但它目前不在范围）。

以编程方式更新属性后如何更新文本框？

该应用程序基本上是我在阅读[本文](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)后编写的 NHibernate DDL 生成器。我需要按下“生成 SQL”按钮，它会显示要在数据库上运行的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:38:39.443

```
public string Sql
{
    get { return _sql; }
    set
    {
        if (value == _sql) return;
        OnPropertyChanged("Sql");
        _sql = value;
    }
} 
```

那没有意义。在调用任何`PropertyChanged`事件处理程序时，读取`Sql`仍然会给出旧值，因为您还没有更新`_sql`。您需要先更新值，然后才引发`PropertyChanged`事件。

# c++ - .dll 使用在主可执行文件中定义的函数的插件

> ID：15454968
> 
> 赞同：6
> 
> 时间：2013-03-16T21:36:00.713
> 
> 标签：c++, plugins, dll, visual-studio-2012, undefined-reference

我有一个加载的 Main 可执行文件。`dll`/`.so`插件，在 Linux 中运行良好，但在 Windows（Visual Studio 2012）上，它会因未定义的引用错误而失败。

该插件使用`session->SendLine("bla")`在 Main 可执行文件中定义的函数。（在插件中包含的 .h 中定义的会话类和方法，但在 main exec 中编译的 .cpp 中的实际函数）。

tl; dr：“我需要 Windows 链接器忽略插件中未定义的引用，在主可执行文件中定义”

在 Windows 中“让它工作”但保持它与 Linux 兼容而没有一百万个的最佳方法是`#ifdef`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:42:46.240

Windows 上的库链接处理方式与 Linux 上的处理方式完全不同。从插件链接到主机可执行文件在 Linux 上很简单，但在 Windows 上则不然。

在 Windows 上，链接到外部模块的传统方式是使用由 .lib 文件提供的导入库。为了做到这一点，您需要为您的可执行文件创建一个导入库，其中包括插件需要调用的所有导出函数。我从未为可执行文件创建导入库。通常，您为 DLL 执行此操作。我什至不确定它是否适用于可执行文件。

其他一些选项：

1.  从可执行文件中导出函数，并`GetProcAddress`在您的插件中使用以在运行时绑定到它们。
2.  初始化插件时，传递一个包含它们需要的所有功能的接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T13:27:52.510

使用 mingw 时，可以通过为可执行文件生成导入库来完成，如下所示：

```
$ dlltool --export-all-symbols <program>.exe -l lib<program>.a -D <program>.exe 
```

`-l`参数指定要创建的库的文件名，参数`-D`指定库的 dllname（重要的是它等于程序名称）。要编译 dll，您需要通过添加`-l<program>`链接器标志来链接导入库。

如果要限制导出符号，可以先生成一个defs文件，编辑它，然后从defs文件生成导入库：

```
$ dlltool --export-all-symbols <program>.exe -z <program>.defs
$ vi <program>.defs # Edit the list of exported symbols
$ dlltool -d <program>.defs -l lib<program>.a -D <program>.exe 
```

*注意：* dlltool 的名称可能因mingw 环境而异（即`i686-w64-mingw32-dlltool`在Fedora 上用于交叉编译到i686 windows）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T02:12:56.607

要从 DLL 调用可执行文件中定义的函数，您必须使用 __declspec(dllexport) 从可执行文件导出这些函数，就像从 DLL 导出函数一样。

编译器将为可执行文件生成一个导入库，其中包括导出函数的存根。

构建 DLL 时与此导入库链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T09:51:32.397

我遇到了同样的问题 - 对于专有应用程序*a.exe*，我想构建一个插件*p.dll*。

一个帖子建议：

```
$ dlltool --export-all-symbols a.exe -z a.defs
dlltool: a.exe: no symbols 
```

但是*a.exe*包含一个*a.lib*文件。同样，没有 [有用的] 出口：

 *```
$ dlltool --export-all-symbols a.lib -z a.defs

$ cat a.defs
; dlltool --export-all-symbols -z a.defs q.lib
EXPORTS
    _NULL_IMPORT_DESCRIPTOR @ 1 DATA
    _IMPORT_DESCRIPTOR_a @ 2 DATA 
```

[另请参阅[使用从导入库 (.lib) 转换的库文件 (.a) 使用 gcc 构建 dll](https://stackoverflow.com/questions/20484904/building-a-dll-with-a-gcc-using-a-library-file-a-converted-from-import-librar/20563791])

最终，在 MinGW 邮件列表上找到提示，*nm*是我的解决方案：

```
$ echo EXPORTS >a.def
$ nm -p a.lib |egrep 'T _' |sed 's/0* T _//' >>a.def 
```

一旦你有了这个 .def 文件，就很容易了：

```
$ #generate liba.a that has the callbacks for the symbols in *a.exe* (what a.lib has, too)
$ dlltool -v -l liba.a -d a.def

$ #build my plugin, linking to liba.a
$ gcc -shared p.c -L. -la -o p.dll 
```*

# perl - 全局符号“%s”需要明确的包名

> ID：15454969
> 
> 赞同：-1
> 
> 时间：2013-03-16T21:36:08.223
> 
> 标签：perl

如果它包含变量，我在子例程调用和打印到调试文件时遇到问题`$ruleRegExp`。

我使用这些参数运行脚本：

```
./script --help --input=input --output=vystup --format=regulars 
```

正是它说：

```
Global symbol "$ruleRegEx" requires explicit package name at ./script line 68.
Global symbol "$ruleRegEx" requires explicit package name at ./script line 69.
Execution of ./script aborted due to compilation errors. 
```

我试图找出问题出在哪里并阅读了论坛，但我没有发现这个问题的一个单一问题。

我用我的母语写评论，所以不要注意评论——我认为与这个错误有关的代码行有大写的评论。

我的整个代码是：

```
#!/usr/bin/perl

use strict;
use Getopt::Long;
use Fcntl;

# použité proměné
my $help; # pro nastavení parametru help
my $br; # pro nastavení parametru br

my $formatFile;
my $inputFile;
my $outputFile;
my $string; #řetězec načtený ze vstupního souboru
my $ruleRegEX; #DECLARED HERE
my $ruleConsequence; #řetězec, definuje obsah tagu pro daný reg. výraz

#použité funkce
sub readInput;
sub readRule;

GetOptions (
    "help"      => \$help,
    "br"        => \$br,
    "format=s"    => \$formatFile,
    "input=s"     => \$inputFile,
    "output=s"    => \$outputFile
);

#checkParams()

print "Help = $help\n";
print "br = $br\n";
print "format = $formatFile\n";
print "input = $inputFile\n";
print "output = $outputFile\n";

#Debugovací soubor pro kontrolní výpisy
sysopen DEBUG, "Debug", O_WRONLY | O_CREAT or die "Debug soubor se nepodařilo otevřít. $!\n";
    print DEBUG "Debug: Debug soubor otevřen.\n";

#otevře formátovací soubor pro čtení, převádí jeho vstup do utf8 a pokud se otevření nepovede vrací chybové hlášení
open FORMAT, "$formatFile" or die "Formátovací soubor se nepodařilo otevřít. $!\n";
print DEBUG "Debug: Formátovací soubor otevřen.\n";

#otevře vstupní soubor
if ($inputFile) {
    open STDIN, "<$inputFile" or die "Vstupní soubor se nepodařilo otevřít. $!\n";
    print DEBUG "Debug: Vstupní soubor otevřen.\n";
}

#otevře výstupní soubor, pokud neexistuje vytvoří jej.
if ($outputFile) {
    sysopen STDOUT, "$outputFile", O_RDWR | O_CREAT or die "Výstupní soubor se nepodařilo otevřít. $!\n";
    print DEBUG "Debug: Výstupní soubor otevřen.\n";
    #otestovat úspěch zápisu
    print STDOUT "Debug: Pokusný zápis.\n" 
}

readInput ($string); #načte vstup
print DEBUG "Debug: Vstup:\"$string\"\n";

#načte z formátovacího souboru jedno pravidlo do proměnných ruleRegEx a ruleConsequence
readRule($ruleRegEx, $ruleConsequence); #USED HERE
print DEBUG "Debug: ruleRegEx = \"$ruleRegEx\"\n"; #AND HERE

#useRule();

sub checkParams {
    my ( $help, $br, $formatFile, $inputFile, $outputFile) = @_;
}

# Funkce pro načtení vstupu ze vstupního souboru
#$_[0] = proměnná, do které se bude načtený vstup zapisovat

sub readInput($$) {
    local $/ = undef;
    $_[0] = <STDIN>;
    print DEBUG "Debug: načten vstup:\n";
}

#Funkce pro načtení jednotlivých částí jednoho pravidla z formátovacího souboru.
#$_[0] - rexulární výraz
#$_[1] - definice vlastností tagu
sub readRule($$) {
    my $rule = <FORMAT>;
    my $divider = "\t";
    my $index = index($rule, $divider);
    print DEBUG "Debug: \$index = \"$index\"";
    $_[0] = substr $rule, 0, $index-1;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T21:39:14.293

在您`$ruleRegEx`意外将字母 x 大写的声明中，您实际上已经声明了变量`$ruleRegEX`。

另请注意，`use utf8`如果您的源文件包含 unicode 字符，您可能希望这样做。

**编辑**：CPAN 模块[`utf8::all`](http://metacpan.org/module/utf8%3a%3aall)尽可能接近 unicode 银弹，所以你可能更喜欢它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T21:41:37.160

您的声明命名变量

```
$ruleRegEX 
```

但你用

```
$ruleRegEx 
```

注意大小写不匹配。

* * *

此外，您声称您的源文件包含，但[iso-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)`ě`中不存在该字符，并且您没有使用 UTF-8 来指示源文件编码。就 Perl 而言，您的源代码不包含.`use utf8;``ě`

您应该无条件地拥有以下内容：

```
use open ':std', ':locale'; 
```

如果源文件使用 UTF-8 编码，您应该具有以下内容：

```
use utf8; 
```

如果您的文件不是使用 io-8859-1 或 UTF-8 编码的，则应将其转换为 UTF-8，因为 Perl 只接受这两种编码的源代码。

# objective-c - 在模态 NSSheet 中使用 Webview

> ID：15454973
> 
> 赞同：1
> 
> 时间：2013-03-16T21:36:47.303
> 
> 标签：objective-c, macos, webkit

我遇到了与[这个 SO question](https://stackoverflow.com/q/4164407)类似的问题。我想在 NSSheet 中有一个 webview，我在其中进行一些身份验证以检索 API 令牌。

`NSWindowController`我用相应的 xib 文件创建了一个新的子类。这就是我启动 NSSheet 的方式：

```
- (IBAction)startAuthentication:(NSButton *)sender {
    self.authController = [[AuthenticationWindowController alloc] initWithWindowNibName:@"AuthenticationWindow"];
    [[NSApplication sharedApplication] beginSheet:self.authController.window
                                   modalForWindow:[self.exportManager window]
                                    modalDelegate:self
                                   didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:)
                                      contextInfo:nil];
} 
```

在此 authenticationWindowController 的 windowDidLoad 回调中，我将 webview 指向 URL：

```
- (void)windowDidLoad
{
    [super windowDidLoad];
    [[self.webView mainFrame]loadRequest:[NSURLRequest requestWithURL:authURL]];
} 
```

乍一看，它看起来很棒：如果我按下按钮，`startAuthentication`就会调用 action 方法，新窗口会被动画到父窗口中，并且 authURL 会被加载。该网站正确显示，其 HTML 表单包含两个输入字段（用户名和密码）。

问题是，我可以单击页面并且它可以工作，但是如果我试图单击一个文本字段，以便该字段获得焦点，它就不起作用。网站表单的文本字段中没有光标出现，每次击键后我都会听到 NSBeep() 声音。

我对此主题进行了一些研究，并找到了两个参考资料：

*   [如何在模式对话框中使用 WebView？](http://lists.apple.com/archives/cocoa-dev/2008/Apr/msg02260.html)
*   [Cocoa主题：模态WebView的案例](http://www.dejal.com/blog/2007/01/cocoa-topics-case-modal-webview)

让我感到困惑的是，有一个[Aperture](https://github.com/streeter/facebook-aperture-exporter)插件的 Facebook 导出器，它准确地显示了我想要的：模式表中的 web 视图。但是我不知道他们在做什么不同。在 Facebook 导出器中，我没有发现任何直接与运行循环交互的代码。

**我的问题**

1.  这是模式表中 webviews 的已知问题吗？
2.  两个参考文献中解释的问题仍然存在吗？
3.  我怎样才能得到这个工作？例如，我不明白何时切换运行循环模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:00:59.790

这没有一般问题，我只是再次尝试。必须是除此之外的一些代码吗？你能把它缩小到工作表吗？顺便说一句：我的样本：

[https://dl.dropbox.com/u/3753090/test2.zip](https://dl.dropbox.com/u/3753090/test2.zip)

* * *

但话虽如此，模态运行模式和 webviews / 计时器 / 网络不是很防水 :) 因为：当你通过 NSApp 中的一种便利方法进入模态时，运行循环只能以非常有限的方式运行。：/

# python - 在两个单词列表中比较和存储匹配的字母？

> ID：15454976
> 
> 赞同：0
> 
> 时间：2013-03-16T21:37:04.747
> 
> 标签：python, string, python-2.7, comparison

我对编程完全陌生，并且在 Stackoverflow 上阅读了几个关于在两个列表中匹配字符串的问答，但没有找到一个可以帮助我完成这项确切任务的问答。

我必须列出，像这样：

```
list1 = ["INTP", "ESFJ", "ENTJ"]
list2 = ["ENTP", "ESFP", "ISTJ"] 
```

我想遍历每个单词中的每个字母并存储所有比较，列表中所有单词的匹配字母总数以及匹配的每个字母，如下所示：

```
total_letters_compared = 12
total_correct_matches = 8 
first_letter_pair_matches = 1
second_letter_pair_matches = 2
third_letter_pair_matches = 3
fourth_letter_pair_matches = 2 
```

我无法弄清楚如何在两个列表中的某个索引 [i] 处进行比较，因此我可以以某种方式将匹配项存储在我的变量中。到目前为止，我能够想出的是以下内容：

```
total = 0
total_letters_compared = 0
total_correct_matches = 0
first_letter_pair_matches = 0
second_letter_pair_matches = 0
third_letter_pair_matches = 0
fourth_letter_pair_matches = 0

for combination in list2:
for letter in combination:
    total_letters_compared = total_letters_compared + 1
    if list2letter == list1.ltter:
        total_correct_matches = total_correct_matches + 1
        # here I´d like to keep track of which letter-pair is compared and
                    # add 1 to the correct variable or continue to the next letter-pair 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:43:43.047

使用 zip 遍历超过 1 个集合。（注意：此代码假定两个列表具有相同数量的项目，并且每个项目都是正确的 intp 配置文件）

```
matches = {0:0, 1:0, 2:0, 3:0}

for item1, item2 in zip(list1, list2):
   for i in xrange(4):
      if item1[i]==item2[i]: 
         matches[i] += 1

and you can extract data you want by:

total_letters_compared = #length of a list * 4
total_correct_matches = #sum(matches.values())
nth_letter_pair_matches = #matchs[n-1] 
```

# mysql - 如何在 mysql 中查找文件名 Like %_1.jpg% 而不找到 _11.jpg

> ID：15454982
> 
> 赞同：0
> 
> 时间：2013-03-16T21:37:59.347
> 
> 标签：mysql

我的脚本很简单。

```
SELECT file_name FROM images WHERE `id` = '$id' AND `file_name` LIKE '%_1.jpg' 
```

当我在 mysql 中运行它时，它返回 (id)_1.jpg 和 (id)_11.jpg 我怎样才能让它只找到 (id)_1.jpg？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T21:39:53.413

您必须转义下划线：

```
SELECT file_name FROM images WHERE `id` = '$id' AND `file_name` LIKE '%\_1.jpg' 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T21:44:10.653

这是因为`_`匹配*任何单个字符，*而不是文字下划线。

您可以避开下划线`\_`，但我会认真考虑使用，`regexp`而不是`like`因为它更具表现力和灵活性。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)（关于`_`in的使用`like`和 的力量`regexp`）。

# jquery - 使用下拉选择更改和发送多个 url 上的数据不刷新

> ID：15454983
> 
> 赞同：0
> 
> 时间：2013-03-16T21:38:04.590
> 
> 标签：jquery, select, refresh, href

我决定通过 url 从下拉列表中将选定的数据发送到我页面上的几个链接，这些链接打开不同的幻想框。但它只工作一次。

它打开了发送正确数据的fancybox，但是当我关闭fancybox（这意味着它不会刷新我的页面只是fancybox之一）并且我更改下拉列表的值并重新打开我的fancybox时，发送的值没有改变我坚持第一个发送值。

你能帮助我并向我解释为什么它不起作用，我是 jquery 的新手，谢谢。

```
$the_event = mysql_query("SELECT `event_id`, `name` FROM `event` ORDER BY event_id ASC"); 
```

带有晚上的下拉菜单

```
 echo '<select name="<?php$the_event?>" style="width: 150px">';
while( list($event_id, $event_name) = mysql_fetch_row($the_event) )
{

echo '<option value="'.$event_id.'">'.$event_name.'</option>';

}

echo '</select>';

?>
</div> 
```

赛事不同运动的菜单库，在花式框中打开每项运动的不同统计信息

```
<nav>

<a class="fancybox" rel="gallery_hurdling" data-fancybox-type="iframe" href="http://www.wattsports.co.uk/wp-content/themes/canvas/H1.php" data-fancybox-group="gallery_hurdling"  tabindex="1" title="hurdling" alt="sport 1"   ><img src="http://www.wattsports.co.uk/css/hurdling.png" alt="sport 1"  /></a>

<div class="hidden">

<a class="fancybox" rel="gallery_hurdling" data-fancybox-type="iframe" href="http://www.wattsports.co.uk/wp-content/themes/canvas/H2.php" data-fancybox-group="gallery_hurdling" title="hurdling"  ></a>

</div>

<a class="fancybox"  data-fancybox-type="iframe"  data-fancybox-group="gallery_wattball" href="http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details2.php"  tabindex="2" title="wattball" alt="sport 2"   ><img src="http://www.wattsports.co.uk/css/wattball.png" alt="sport 2"  />         </a>

<div class="hidden">

<a class="fancybox"  data-fancybox-type="iframe"  data-fancybox-group="gallery_wattball" href="http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details1.php" title="wattball"  > </a>

<a class="fancybox"   data-fancybox-type="iframe"  data-fancybox-group="gallery_wattball" href="http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php"  title="wattball"  ></a>

</div>

</nav> 
```

获取下拉列表中所选项目的值并将其放在每个统计页面的“？chosen =”的href末尾的函数。以便他们可以获取事件并打开所选事件的不同统计信息

```
Query(function($) {

 $("select").change(function () 
 {

     var str = "";

     $(this).find("option:selected").each(function () {

          str += $(this).val() + " ";   

          $("a").attr('href', function(i, href) {

                var newUrl =  $(this).attr('href')+'?chosen='+str;

                $(this).attr('href',newUrl);

                 });
           });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:58:48.547

只要您使用 JQuery 更改 href 属性，这就是新的 HREF。第二次选择一个选项时，href 会附加查询字符串。例如

```
 <a class="fancybox"   data-fancybox-type="iframe"  data-fancybox-group="gallery_wattball" href="http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php"  title="wattball"  ></a> 
```

具有[http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php](http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php)的href 。

第一次选择的东西会变成[http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php?chosen=somevalue](http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php?chosen=somevalue)。

下次你选择的东西会变成

[http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php?chosen=somevalue?chosen=SomeOtherValue](http://www.wattsports.co.uk/wp-content/themes/canvas/template-statistics_details3.php?chosen=somevalue?chosen=SomeOtherValue)

您需要一种方法来存储原始 href，或者在添加新查询字符串之前添加代码以删除 selected=somevalue 查询字符串。

# sublimetext2 - 代码片段卡住了，需要额外的击键

> ID：15454988
> 
> 赞同：0
> 
> 时间：2013-03-16T21:38:37.167
> 
> 标签：sublimetext2, sublimetext

下面的代码片段被分配的键盘映射卡住了，需要额外的击键才能出现在屏幕上。

```
<snippet>
<content><![CDATA[
{\bf \underline{ ${1:} }}
]]></content>
</snippet> 
```

目标是在执行代码片段时使用光标 {\bf \underline{ `stop here`}}。

任何想法是什么导致此片段在出现在屏幕上之前冻结，需要我使用额外的按键（例如，箭头键）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:30:28.127

感谢 Ryan B 提供的链接——非常感谢。事实证明这是一个键盘映射问题，由`"super+l", "b", "u"`与`"super+l", "b", "u", "s"`. 如果存在使用相同分配的更长字符串的键盘映射，则所有分配必须位于同一层以避免冲突。在这种情况下，有必要在第一个作业中添加第三个字母，或者选择一个完全不同的作业。

# javascript - 使用相同的对称密钥加密小字符串的嵌套映射

> ID：15454992
> 
> 赞同：1
> 
> 时间：2013-03-16T21:38:43.090
> 
> 标签：javascript, ruby-on-rails, cryptography, mongoid, cryptojs

假设我正在创建一个 web 应用程序，用户可以在其中创建一个嵌套的字符串树（包含敏感信息）。这些字符串可能很短。我想在保存之前加密这棵树中的键和值。树中的所有值都将使用用户提供的对称密钥在客户端进行加密。同样，它们将在读取时在客户端被解密。

树保存在 Mongo 数据库中。

考虑到树中的所有数据都将使用相同的密钥加密，我无法决定是否应该序列化树并加密它具有整个字符串或是否单独加密值。

两者的优缺点是什么？

据我所知，AES 使用 128 位的块大小，这意味着任何字符串在编码时都可以增长到 15 个字符的长度，这有利于对序列化字符串进行编码（如果你想避免开销）

注意：虽然 webapp 将同时使用 HTTPS、IP 白名单和多因素身份验证，但我想努力防止 Mongo 数据库被盗时数据泄露。这就是我要去的地方。对如何实现这一点的建议或想法表示赞赏。

### 更新

**此外，我还希望我的服务能够激发信任。以明文形式发送数据（尽管通过 HTTPS）意味着用户必须信任我在持久化之前对其进行加密。加密客户端使我能够强调我不知道（或需要知道）我正在保存什么。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:07:33.183

我想不出为什么这些方法在实际字符串的安全性方面会有所不同（假设它们都正确实现）。单独加密字符串显然意味着树的结构不会是秘密的，但我不确定你是否关心这一点。例如，如果您单独加密每个字符串，那么看到密文的人可以找出树中有多少个密钥，他还可以了解每个密钥和值的长度。如果您将树作为一个完整的序列化 blob 进行加密，那么看到密文的人可以大致知道树中有多少数据，但对单​​个键/值的长度或数量一无所知。

正如您所提到的，就开销而言，填充将是一个考虑因素。更大的存储开销来源是 IV：如果您使用 CTR 等分组密码模式，则需要为每个密文使用不同的 IV。这意味着如果您单独加密每个字符串，则需要为每个字符串存储一个 IV。如果你加密整个序列化树，那么你只需要为那个密文存储一个 IV。

但是，在您用 Javascript 实现此功能之前，您应该确保您实际上通过客户端加密获得了真正的安全性改进。这篇文章很经典： http: [//www.matasano.com/articles/javascript-cryptography/](http://www.matasano.com/articles/javascript-cryptography/)重要的一点是要记住服务器提供的是 Javascript 加密代码，因此在客户端加密数据并不能保护它免受服务器。如果您主要关心的是数据库被盗，您可以通过在将数据插入数据库之前加密服务器上的数据来实现相同的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:54:04.183

首先，我不是安全*专家*;-)

> 考虑到树中的所有数据都将使用相同的密钥加密，我无法决定是否应该序列化树并加密它具有整个字符串或是否单独加密值。

我会说首先序列化树并加密其结果具有最大的**缺点**。

在成功破解加密中起重要作用的往往是对在原始文本中经常出现的某些字符的了解——例如英语中的字母 e 和 n——以及基于这些字符对加密文本进行统计分析。

现在假设您在加密之前使用 JSON 序列化您的树客户端。作为攻击者，我很容易知道这一点，因为我可以在闲暇时分析您的客户端脚本。所以我也已经知道，“字母”{、}、[、]、: 和“将在您加密的每个“文本”中出现的比例很高……而且每个文本的第一个字母要么是{ 或 [ （基于你的树是对象还是数组）——这已经是关于被你的应用程序加密的文本的相当多的潜在非常有用的知识。

# android - 带有图标的弹出菜单

> ID：15454995
> 
> 赞同：69
> 
> 时间：2013-03-16T21:38:58.227
> 
> 标签：android, popupmenu

当然，我们在这里处理的是 SDK 11 及更高版本。

我打算做类似的事情： ![在此处输入图像描述](../Images/44f90a8dec6bb083f45688be550748a3.png)

在其中的每个**项目**旁边`PopupMenu`，我想放置一个**图标**。

我创建了一个`XML`文件并将其放在`/menu`：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_one"
        android:title="Sync"
        android:icon="@android:drawable/ic_popup_sync"
        />

    <item
        android:id="@+id/action_two"
        android:title="About"
        android:icon="@android:drawable/ic_dialog_info"
        />
</menu> 
```

正如您所注意到的，在 xml 文件中，我定义了我想要的图标，但是，当弹出菜单显示时，它显示的是没有图标的图标。我应该怎么做才能使这两个图标出现？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2016-08-18T20:26:42.867

如果您使用的是 AppCompat v7，这种方式有效。这有点 hacky，但*比*使用反射要好得多，并且让您仍然可以使用核心 Android PopupMenu：

```
PopupMenu menu = new PopupMenu(getContext(), overflowImageView);
menu.inflate(R.menu.popup);
menu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() { ... });

MenuPopupHelper menuHelper = new MenuPopupHelper(getContext(), (MenuBuilder) menu.getMenu(), overflowImageView);
menuHelper.setForceShowIcon(true);
menuHelper.show(); 
```

**res/menu/popup.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/menu_share_location"
        android:title="@string/share_location"
        android:icon="@drawable/ic_share_black_24dp"/>

</menu> 
```

这会导致使用菜单资源文件中定义的图标弹出菜单：

[![在此处输入图像描述](../Images/637f286469cf780c2e6e7d2da45d2b14.png)](https://i.stack.imgur.com/452tn.png)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-16T21:49:20.297

否则我会实施它：

创建`PopUpWindow`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llSortChangePopup"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/sort_popup_background"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvDistance"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/distance"
    android:layout_weight="1.0"
    android:layout_marginLeft="20dp"
    android:paddingTop="5dp"
    android:gravity="center_vertical"
    android:textColor="@color/my_darker_gray" />

<ImageView
    android:layout_marginLeft="11dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/sort_popup_devider" 
    android:contentDescription="@drawable/sort_popup_devider"/>

<TextView
    android:id="@+id/tvPriority"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/priority"
    android:layout_weight="1.0"
    android:layout_marginLeft="20dp"
    android:gravity="center_vertical"
    android:clickable="true"
    android:onClick="popupSortOnClick"
    android:textColor="@color/my_black" />

<ImageView
    android:layout_marginLeft="11dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/sort_popup_devider" 
    android:contentDescription="@drawable/sort_popup_devider"/>

<TextView
    android:id="@+id/tvTime"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/time"
    android:layout_weight="1.0"
    android:layout_marginLeft="20dp"
    android:gravity="center_vertical"
    android:clickable="true"
    android:onClick="popupSortOnClick"
    android:textColor="@color/my_black" />

<ImageView
    android:layout_marginLeft="11dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/sort_popup_devider" 
    android:contentDescription="@drawable/sort_popup_devider"/>

<TextView
    android:id="@+id/tvStatus"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/status"
    android:layout_weight="1.0"
    android:layout_marginLeft="20dp"
    android:gravity="center_vertical"
    android:textColor="@color/my_black" 
    android:clickable="true"
    android:onClick="popupSortOnClick"
    android:paddingBottom="10dp"/>

 </LinearLayout> 
```

并`PopUpWindow`在您的`Activity`：

```
 // The method that displays the popup.
private void showStatusPopup(final Activity context, Point p) {

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.llStatusChangePopup);
   LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.status_popup_layout, null);

   // Creating the PopupWindow
   changeStatusPopUp = new PopupWindow(context);
   changeStatusPopUp.setContentView(layout);
   changeStatusPopUp.setWidth(LinearLayout.LayoutParams.WRAP_CONTENT);
   changeStatusPopUp.setHeight(LinearLayout.LayoutParams.WRAP_CONTENT);
   changeStatusPopUp.setFocusable(true);

   // Some offset to align the popup a bit to the left, and a bit down, relative to button's position.
   int OFFSET_X = -20;
   int OFFSET_Y = 50;

   //Clear the default translucent background
   changeStatusPopUp.setBackgroundDrawable(new BitmapDrawable());

   // Displaying the popup at the specified location, + offsets.
   changeStatusPopUp.showAtLocation(layout, Gravity.NO_GRAVITY, p.x + OFFSET_X, p.y + OFFSET_Y);
} 
```

最后弹出`onClick`一个按钮或其他任何东西：

```
 imTaskStatusButton.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                 int[] location = new int[2];
                 currentRowId = position;
                 currentRow = v;    
                 // Get the x, y location and store it in the location[] array
                 // location[0] = x, location[1] = y.
                 v.getLocationOnScreen(location);

                 //Initialize the Point with x, and y positions
                 point = new Point();
                 point.x = location[0];
                 point.y = location[1];
                 showStatusPopup(TasksListActivity.this, point);
            }
        }); 
```

一个很好的例子`PopUpWindow`：

[http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-09-30T09:49:42.693

Android 弹出菜单有一个隐藏的方法来显示菜单图标。使用 Java 反射来启用它，如下代码片段所示。

```
public static void setForceShowIcon(PopupMenu popupMenu) {
    try {
        Field[] fields = popupMenu.getClass().getDeclaredFields();
        for (Field field : fields) {
            if ("mPopup".equals(field.getName())) {
                field.setAccessible(true);
                Object menuPopupHelper = field.get(popupMenu);
                Class<?> classPopupHelper = Class.forName(menuPopupHelper
                        .getClass().getName());
                Method setForceIcons = classPopupHelper.getMethod(
                        "setForceShowIcon", boolean.class);
                setForceIcons.invoke(menuPopupHelper, true);
                break;
            }
        }
    } catch (Throwable e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-01-15T21:28:00.830

`MenuPopupHelper`AppCompat 中的类具有`@hide`注释。如果这是一个问题，或者如果您出于某种原因无法使用 AppCompat，则还有另一种解决方案`Spannable`，在`MenuItem`包含图标和标题文本的标题中使用 a。

主要步骤是：

*   `PopupMenu`用`menu`xml 文件膨胀你的
*   如果任何项目有图标，则对**所有**项目执行此操作：
    *   如果该项目没有图标，请创建一个透明图标。这确保没有图标的项目将与有图标的项目对齐
    *   创建一个`SpannableStringBuilder`包含图标和标题
    *   将菜单项的标题设置为`SpannableStringBuilder`
    *   将菜单项的图标设置为空，“以防万一”

优点：没有反射。不使用任何隐藏的 API。可以使用框架 PopupMenu。

缺点：更多代码。如果您有一个没有图标的子菜单，它将在小屏幕上出现不需要的左侧填充。

* * *

细节：

首先，在文件中定义图标的大小`dimens.xml`：

```
<dimen name="menu_item_icon_size">24dp</dimen> 
```

然后，将xml中定义的图标移动到标题中的一些方法：

```
/**
 * Moves icons from the PopupMenu's MenuItems' icon fields into the menu title as a Spannable with the icon and title text.
 */
public static void insertMenuItemIcons(Context context, PopupMenu popupMenu) {
    Menu menu = popupMenu.getMenu();
    if (hasIcon(menu)) {
        for (int i = 0; i < menu.size(); i++) {
            insertMenuItemIcon(context, menu.getItem(i));
        }
    }
}

/**
 * @return true if the menu has at least one MenuItem with an icon.
 */
private static boolean hasIcon(Menu menu) {
    for (int i = 0; i < menu.size(); i++) {
        if (menu.getItem(i).getIcon() != null) return true;
    }
    return false;
}

/**
 * Converts the given MenuItem's title into a Spannable containing both its icon and title.
 */
private static void insertMenuItemIcon(Context context, MenuItem menuItem) {
    Drawable icon = menuItem.getIcon();

    // If there's no icon, we insert a transparent one to keep the title aligned with the items
    // which do have icons.
    if (icon == null) icon = new ColorDrawable(Color.TRANSPARENT);

    int iconSize = context.getResources().getDimensionPixelSize(R.dimen.menu_item_icon_size);
    icon.setBounds(0, 0, iconSize, iconSize);
    ImageSpan imageSpan = new ImageSpan(icon);

    // Add a space placeholder for the icon, before the title.
    SpannableStringBuilder ssb = new SpannableStringBuilder("       " + menuItem.getTitle());

    // Replace the space placeholder with the icon.
    ssb.setSpan(imageSpan, 1, 2, 0);
    menuItem.setTitle(ssb);
    // Set the icon to null just in case, on some weird devices, they've customized Android to display
    // the icon in the menu... we don't want two icons to appear.
    menuItem.setIcon(null);
} 
```

最后，创建您的 PopupMenu 并在显示之前使用上述方法：

```
PopupMenu popupMenu = new PopupMenu(view.getContext(), view);
popupMenu.inflate(R.menu.popup_menu);
insertMenuItemIcons(textView.getContext(), popupMenu);
popupMenu.show(); 
```

截屏： [![截屏](../Images/2b7417f4865550906ca504a52ca13b7c.png)](https://i.stack.imgur.com/AgMP4.png)

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-11-28T08:01:15.273

带有图标的弹出菜单使用`MenuBuilder`和`MenuPopupHelper`

```
 MenuBuilder menuBuilder =new MenuBuilder(this);
    MenuInflater inflater = new MenuInflater(this);
    inflater.inflate(R.menu.menu, menuBuilder);
    MenuPopupHelper optionsMenu = new MenuPopupHelper(this, menuBuilder, view);
    optionsMenu.setForceShowIcon(true);

    // Set Item Click Listener
    menuBuilder.setCallback(new MenuBuilder.Callback() {
        @Override
        public boolean onMenuItemSelected(MenuBuilder menu, MenuItem item) {
            switch (item.getItemId()) {
                case R.id.opt1: // Handle option1 Click
                    return true;
                case R.id.opt2: // Handle option2 Click
                    return true;
                default:
                    return false;
            }
        }

        @Override
        public void onMenuModeChange(MenuBuilder menu) {}
    });

    // Display the menu
    optionsMenu.show(); 
```

菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/opt1"
        android:icon="@mipmap/ic_launcher"
        android:title="option 1" />
    <item
        android:id="@+id/opt2"
        android:icon="@mipmap/ic_launcher"
        android:title="option 2" />
</menu> 
```

[![在此处输入图像描述](../Images/8143aabe8d57829745db9a0dce48118c.png)](https://i.stack.imgur.com/yzXuP.jpg)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-09-17T15:43:12.083

如果你不熟悉反射，你可以使用反射来实现它在我们的例子中，我们需要在运行时修改 popupMenu 行为，而不是扩展核心类并修改它；）希望有所帮助

```
private void showPopupMenu(View view) {
    // inflate menu
    PopupMenu popup = new PopupMenu(mcontext, view);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.main, popup.getMenu());

    Object menuHelper;
    Class[] argTypes;
    try {
        Field fMenuHelper = PopupMenu.class.getDeclaredField("mPopup");
        fMenuHelper.setAccessible(true);
        menuHelper = fMenuHelper.get(popup);
        argTypes = new Class[]{boolean.class};
        menuHelper.getClass().getDeclaredMethod("setForceShowIcon", argTypes).invoke(menuHelper, true);
    } catch (Exception e) {

    }
    popup.show();

} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2017-04-01T04:42:07.580

/res/menu 目录中的 list_item_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">

            <item
                android:id="@+id/locale"
                android:title="Localizar"
                android:icon="@mipmap/ic_en_farmacia_ico"
                app:showAsAction="always">
            </item>

            <item android:id="@+id/delete"
                android:title="Eliminar"
                android:icon="@mipmap/ic_eliminar_ico"
                app:showAsAction="always">
            </item>
    </menu> 
```

在我的活动中

```
private void showPopupOption(View v){
    PopupMenu popup = new PopupMenu(getContext(), v);
    popup.getMenuInflater().inflate(R.menu.list_item_menu, popup.getMenu());

    popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
        public boolean onMenuItemClick(MenuItem menu_item) {
            switch (menu_item.getItemId()) {
                case R.id.locale:
                    break;
                case R.id.delete:
                    break;
            }
            return true;
        }
    });

    MenuPopupHelper menuHelper = new MenuPopupHelper(getContext(), (MenuBuilder) popup.getMenu(), v);
    menuHelper.setForceShowIcon(true);
    menuHelper.setGravity(Gravity.END);
    menuHelper.show();
} 
```

结果

![弹出菜单](../Images/17363bfa90851db5f4c836b09b4382b6.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-06-04T14:18:41.853

阅读 PopupMenu 源代码。我们可以通过以下代码显示图标：

```
Field field = popupMenu.getClass().getDeclaredField("mPopup");
field.setAccessible(true);
MenuPopupHelper menuPopupHelper = (MenuPopupHelper) field.get(popupMenu);
menuPopupHelper.setForceShowIcon(true); 
```

但是 MenuPopupHelper.java 在 android 内部包中。所以我们应该使用反射：

```
 PopupMenu popupMenu = new PopupMenu(this, anchor);
    popupMenu.getMenuInflater().inflate(R.menu.process, popupMenu.getMenu());

    try {
        Field field = popupMenu.getClass().getDeclaredField("mPopup");
        field.setAccessible(true);
        Object menuPopupHelper = field.get(popupMenu);
        Class<?> cls = Class.forName("com.android.internal.view.menu.MenuPopupHelper");
        Method method = cls.getDeclaredMethod("setForceShowIcon", new Class[]{boolean.class});
        method.setAccessible(true);
        method.invoke(menuPopupHelper, new Object[]{true});
    } catch (Exception e) {
        e.printStackTrace();
    }

    popupMenu.show(); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-03-16T23:08:04.227

我用最简单的方法解决了我的问题，没想到这么简单：

**在 main.xml 中：**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/action_more"
    android:icon="@android:drawable/ic_menu_more"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="More">
    <menu>
        <item
            android:id="@+id/action_one"
            android:icon="@android:drawable/ic_popup_sync"
            android:title="Sync"/>
        <item
            android:id="@+id/action_two"
            android:icon="@android:drawable/ic_dialog_info"
            android:title="About"/>
    </menu>
</item> 
```

**在 MainActivity.java**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

这是使用**子菜单的一个技巧**

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-08-25T09:46:53.277

如果您想在弹出菜单中显示图标，请查看[https://github.com/shehabic/Droppy](https://github.com/shehabic/Droppy)，它非常酷且易于使用

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-14T07:02:01.130

基于@Ajay 的回答......这就是我所做的

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.add_task, menu);  // for the two icons in action bar
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

            case R.id.menu:
                View menuItemView = findViewById(R.id.menu);
                MenuBuilder menuBuilder =new MenuBuilder(this);
                MenuInflater inflater = new MenuInflater(this);
                inflater.inflate(R.menu.popup, menuBuilder);
                MenuPopupHelper optionsMenu = new MenuPopupHelper(this, menuBuilder, menuItemView); 
                optionsMenu.setForceShowIcon(true);
                optionsMenu.show();

            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

**弹出窗口**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:id="@+id/opt1"
    android:icon="@drawable/change_pic"
    android:title="Change Picture" />
<item
    android:id="@+id/opt2"
    android:icon="@drawable/change_pin"
    android:title="Change Password" />

    <item
        android:id="@+id/opt3"
        android:icon="@drawable/sign_out"
        android:title="Sign Out" />
</menu> 
```

**截屏**

[![在此处输入图像描述](../Images/5f88e684dc6b82ee369a194b125883d4.png)](https://i.stack.imgur.com/kDQ88.jpg)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-07T09:22:18.597

我正在尝试@Stephen Kidson 的回答和@david.schereiber 的建议，我意识到`setOnMenuItemClickListener`在`MenuBuilder`. 稍微弄乱了v7的源代码，我找到了这个解决方案：

```
 MenuBuilder menuBuilder = new MenuBuilder(mContext);
        new SupportMenuInflater(mContext).inflate(R.menu.my_menu, menuBuilder);
        menuBuilder.setCallback(new MenuBuilder.Callback() {
            @Override
            public boolean onMenuItemSelected(MenuBuilder menu, MenuItem menuItem) {
                // your "setOnMenuItemClickListener" code goes here
                switch (menuItem.getItemId()) {
                    case R.id.menu_id1:
                        // do something 1
                        return true;

                    case R.id.menu_id2:
                        // do something 2
                        return true;
                }
                return false;
            }

            @Override
            public void onMenuModeChange(MenuBuilder menu) {
            }
        });
        MenuPopupHelper menuHelper = new MenuPopupHelper(mContext, menuBuilder, v);
        menuHelper.setForceShowIcon(true); // show icons!!!!!!!!
        menuHelper.show(); 
```

# ruby-on-rails - Rails 应用程序被利用，如何找到哪个漏洞利用？

> ID：15454996
> 
> 赞同：3
> 
> 时间：2013-03-16T21:38:59.913
> 
> 标签：ruby-on-rails, security, exploit

我收到了一封来自某人的邮件，该人假装入侵了我的服务器，提供了一些有关服务器的信息，并要求我付费，如果我不希望将数据发布到网上。

服务器上的所有应用程序都是 Rails 应用程序，其中一些不是最新的，由于我的懒惰。因此，这个家伙如何访问我的服务器的明显线索是通过过去几周发现的 Rails 漏洞之一。

我想知道如果我的一个应用程序被这种方式利用，我能否知道一个事实。我尝试在日志中查找对系统的调用，在参数中编组对象，但到目前为止还没有运气。我知道我正在为我的疏忽付出代价，但我想确定漏洞在哪里，以防止自己受到未来的攻击。

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T21:47:55.837

我会更新到最新版本的 Rails 以消除尽可能多的漏洞。分支您的代码并保留未打补丁的旧代码的副本和数据备份以找出问题，但现在您想消除任何可能的向量。

一旦你更新到最新版本，花时间挖掘你的日志和旧代码，看看你是否有任何明显的安全漏洞。使用`attr_accessible`和`attr_readonly`防止对关键字段进行大规模分配，限制对模型中数据的访问。确保您的模型中的验证拒绝不符合您要求的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:45:48.620

联系您的 FBI 外地办事处并从这个角度工作。

在安全性方面，将您的部署与 Web 应用程序防火墙（硬件或软件）、SQL 代理（如果适用）、强化您的操作系统（GRSecurity、SELinux）等集成，并让专业人员对您的软件进行测试（如果它托管您的信息）重新担心（或对您来说在经济上很重要）。

另外，尝试像[Brakeman](http://brakemanscanner.org/)这样的东西来为您的代码安全提供一些进一步的保证。

# html - 滚动在 Iphone 上不起作用

> ID：15454998
> 
> 赞同：7
> 
> 时间：2013-03-16T21:39:08.427
> 
> 标签：html, scroll

我有以下 div 并且本机滚动不起作用。此代码中是否有任何可能导致滚动失败的内容？或者我可以添加一些东西来使滚动工作？

```
<div id='calvw' style='overflow= hidden;'>    
  <a id='calevvw' dhx_l_id='#id#' data-ajax='false' href='eventview.php?eventid=#id#'
class='dhx_list_item dhx_list_day_events_time'
 style='width:{common.widthSize()}; height:{common.heightSize()};
border-bottom: 1px solid #cbcbcb; padding:{common.padding}px;
 margin:{common.margin}px; overflow:hidden;'>    
</a> 
</div> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-16T21:40:33.063

如果你想要滚动的 div 是`#calvw`，这将不起作用，就像你`overflow:hidden`在它上面那样。

将该元素的 css 更改为：

```
overflow:scroll;
-webkit-overflow-scrolling:touch; 
```

启用原生、动量滚动。