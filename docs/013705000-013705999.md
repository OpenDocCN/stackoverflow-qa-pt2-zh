# StackOverflow 问答 13705000-13705999

# java - 有没有办法创建标签，所以当编译器运行时，它会用 java 中的语句替换该标签

> ID：13705010
> 
> 赞同：0
> 
> 时间：2012-12-04T14:21:20.383
> 
> 标签：java

抱歉措辞不佳。我有一个字符串数组列表，每个索引对应一个类别。例如 list.get(i)[1] 将始终包含一个名称。我想要的是在我的代码中输入 NAME，当我编译时，它会自动用该语句替换 NAME。我很确定我以前见过这个，但是当我搜索它时我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:42:53.150

你不能在 Java 中做到这一点。您正在谈论Java中不存在的C宏。但是，您可以创建一个执行类似操作的包装器对象。这是一个例子：

```
public class MyData {
  private List<String[]> internalData;

  public MyData(List<String[] internalData) {
    this.internalData = internalData;
  }

  public getName(int index) {
    return internalData.get(index)[1];
  }
  public getAddress(int index) {  // For example
    return internalData.get(index)[2];
  }

  // Here, expose any methods of List that you need, such as size()
  // So you can use a for loop correctly
  public int size() {
    return internalData.size();
  }
} 
```

# c++ - BST c++ 中的指针帮助

> ID：13705015
> 
> 赞同：0
> 
> 时间：2012-12-04T14:21:31.917
> 
> 标签：c++, pointers, binary-search-tree

我的 BST 的根名为 pTree。它由以下人员声明：

```
KnightTree* tree; 
```

现在我需要编写一个带有指向根的新指针的函数（在这种情况下是“树”），并且如果我使用 pTree=pTree->pLeftChild; 则永远不会更改事件；或 pTree=pTree->pRightChild；在我调用下面的函数之前，我声明：

```
KnightTree* treeroot=tree; 
```

然后我调用函数：

```
ReadNLR(tree,treeroot); 
```

功能是这样的：

```
void ReadNLR(KnightTree*&tree,KnightTree* treeroot)
{
    if(tree !=NULL)
    {
        cout<<tree->key<<" is at the depth of "<<NodeDepth(treeroot,tree)<<endl;
        cout<<treeroot->key<<endl;
        ReadNLR(tree->pLeftChild,treeroot);
        ReadNLR(tree->pRightChild,treeroot);
    }
} 
```

我的想法是进行 NLR 读取，读取的每个节点都会打印出它的深度。但是我在这里遇到的问题是树根就像树的副本，它们是相同的，因此深度始终为 1（从节点到根的距离加 1）。如何从初始树根声明树根，即使树改变也永远不会改变？谢谢，对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:44:23.300

乍一看，您的代码看起来不错，只是树参数没有理由是对指针的引用。我的猜测是有什么问题`NodeDepth`。一个建议是只跟踪你去的水平，而不是重新计算它。您的函数对树进行[深度优先扫描](http://en.wikipedia.org/wiki/Depth_first_search)，然后看起来像这样：

```
void ReadNLR(KnightTree* tree, int level)
{
    if (tree == NULL)
        return;

    cout << tree->key << " is at the depth of " << level;
    ReadNLR(tree->pLeftChild, level + 1);
    ReadNLR(tree->pRightChild, level + 1);
} 
```

`ReadNLR`您可以通过使用`root`和`0`作为参数调用来启动打印过程。

您还可以使用队列逐级打印树 - 如果您仍然需要帮助，我会尽快发布。

# expect - Linux 期望发送奇怪的结构

> ID：13705020
> 
> 赞同：0
> 
> 时间：2012-12-04T14:21:40.647
> 
> 标签：expect

我试图弄清楚期望如何工作。AFAIK 期望脚本由“期望”和“发送”语句组成。因此，对于出现在屏幕上的每个适当的“期望”语句，都会调用“发送”语句。命令“interact”也意味着控制权被传回给用户，他能够与终端进行交互。如果我错了，请纠正我。这两个陈述就像一个魅力。

第一个：

```
#!/usr/bin/expect
spawn ssh -q localhost;

# Handles following message: "Are you sure you want to continue connecting (yes/no)?"
expect "yes";
send "yes\r";
interact; 
```

第二：

```
#!/usr/bin/expect
spawn ssh -q localhost;

# Handles following message: "pista@localhost's password:" 
expect "assword";
send "password\r";
interact; 
```

我在互联网上发现类似以下代码的内容应该将这两个示例合二为一：

```
#!/usr/bin/expect
spawn ssh -q localhost "uname -a";
expect {
    "*yes/no*" { send "yes\r" ; exp_continue }
    "*assword:" { send "password\r"; interact }
} 
```

但是此示例在成功登录后立即退出（似乎“交互”在这里不起作用，请参见下面的输出）

```
[pista@HP-PC .ssh]$ ./fin.exp
spawn ssh -q localhost uname -a
pista@localhost's password: 
Linux HP-PC 3.6.6-1.fc16.x86_64 #1 SMP Mon Nov 5 16:56:43 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
[pista@HP-PC .ssh]$ set | grep SHLV
SHLVL=2 
```

三个问题：

1.  那些奇怪的期望语法意味着什么，对我唯一可能的解释是，在这个“大”期望中没有强调模式顺序？
2.  您能否澄清一下 exp_continue 到底在做什么，在我看来就像“goto”语句期望哪个调用了这个？
3.  为什么交互在这里不工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:26:20.243

**1.**这种语法意味着你使用连续的expect语句，更容易。例如，如果 SSH 失败，这将尝试 SSH 或 telnet

```
#!/usr/bin/expect
set remote_server [lrange $argv 0 0]
set timeout 10
spawn ssh -M username@$remote_server
while 1 {
  expect {
    "no)?"      {send "yes\r"}
    "denied" {
                log_file /var/log/expect_msg.log
                send_log "Can't login to $remote_server. Check username and password\n";
                exit 1
             }
    "telnet:" {
                log_file /var/log/expect_msg.log
                send_log "Can't connect to $remote_server via SSH or Telnet. Something went definitely wrong\n";
                exit 2
              }
    "failed" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server exists. Check ssh_hosts file\n";
                exit 3
             }
    timeout {
                log_file /var/log/expect_msg.log
                send_log "Timeout problem. Host $remote_server doesn't respond\n";
                exit 4
            }
    "refused" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server refused to SSH. That is insecure.\n"
                log_file
                spawn telnet $remote_server
              }
    "sername:" {send "username\r"}
    "assword:" {send "password\r"}
    "#"        {break}
  }
} 
```

**2.** exp_continue 告诉expect“继续期望”，即继续进行事件处理。如果没有此指令，您的 expect { ... } 块将停止。在上面的示例中，它是以下行：

`"#" {break}`

首先它从 while 循环中中断，然后在没有 exp_continue 的情况下停止执行 expect { ... } 块并继续执行下一条指令（上面的示例中未显示）。

**3.**你的代码有错误。我稍微修改了您的代码，以使其正常工作。

```
#!/usr/bin/expect
spawn ssh -q localhost
expect {
    "*yes/no*" { send "yes\r" ; exp_continue }
    "*assword:" { send "password\r"; exp_continue;}
    "~" {send "uname -a\r"; interact;}
} 
```

# iphone - XCode UIView 在 TableView 第一个 Cell 原点之上

> ID：13705025
> 
> 赞同：1
> 
> 时间：2012-12-04T14:22:02.047
> 
> 标签：iphone, ios, uitableview

我有一个`UITableViewController`里面有一个`UITableView`和里面，在 UIView 下有一个`UIView`和一个**原型单元。**

的内容`UIView`是动态的，所以我想更改第一行动态的原点（y）。

当我更改`UIView`框架和边界时

```
self.albumView.bounds=CGRectMake(0,0,self.albumView.frame.size.width, self.albumView.frame.size.height+100);
self.albumView.frame=CGRectMake(0,0,self.albumView.frame.size.width, self.albumView.frame.size.height+100); 
```

UIView 重叠并隐藏行（我只能看到标题）

**但是**当我在它上面编写相同的代码 `(void)viewWillAppear` 时工作正常，但问题是我不知道高度，因为我还没有收到来自请求的数据。

我试过了

```
[self.view setNeedsDisplay];
[self.tableView setNeedsDisplay]; 
```

但似乎没有任何效果。我怎样才能解决这个问题？

我正在从我的 TableViewController 布局中添加快照

[http://preview.otherlap.com/snap.png](http://preview.otherlap.com/snap.png) （我无法添加图片，因为我是新用户，所以有链接）

UIView 的高度根据 json 数据是动态的。我想要的只是更改表格第一行的原点（y）位置。

这里有一个示例代码

```
 -(void)viewWillAppear:(BOOL)animated{
         //self.albumView.bounds=CGRectMake(0,0,self.albumView.frame.size.width,self.albumView.frame.size.height+100);
       //self.albumView.frame=CGRectMake(0,0,self.albumView.frame.size.width,self.albumView.frame.size.height+100);
    }
     - (void)viewDidLoad
 {

    [super viewDidLoad];
     ...load some data from server
 }
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{

    [jsonData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [jsonData appendData:data];

}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
 self.albumView.bounds=CGRectMake(0,0,self.albumView.frame.size.width,self.albumView.frame.size.height+dynamicHeight);  self.albumView.frame=CGRectMake(0,0,self.albumView.frame.size.width,self.albumView.frame.size.height+dynamicHeight);
} 
```

如果我在 ViewWillAppear 上设置 UIView 高度，它会正确移动第一个单元格的原点。如果我在 connectionDidFinishLoad 上设置高度，它会与单元格重叠。

编辑：找到答案了，我自己找到了答案..

在 StoryBoard 上的 TableView 顶部添加 UiView 它会自动使其成为 tableHeaderView

所以解决方案是

```
CGRect newFrame = self.tableView.tableHeaderView.frame;
newFrame.size.height = DynamicHeight;
self.tableView.tableHeaderView.frame = newFrame;
[self.tableView setTableHeaderView:self.tableView.tableHeaderView]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T14:29:38.117

`setNeedsLayout`意味着`- (void)layoutSubviews`需要调用方法。因此，您需要将调整大小的代码放入`- (void)layoutSubviews`方法中。

# php - 格式化日期输出 - PHP

> ID：13705029
> 
> 赞同：1
> 
> 时间：2012-12-04T14:22:09.157
> 
> 标签：php, date

我正在使用以下

```
<?php
function custom_echo($x)
{
  if(strlen($x)<=150)
  {
    echo $x;
  }
  else
  {
    $y=substr($x,0,150) . '...';
    echo $y;
  }
}

// Include the wp-load'er
include('../../blog/wp-load.php');

// Get the last 10 posts
// Returns posts as arrays instead of get_posts' objects
$recent_posts = wp_get_recent_posts(array(
  'numberposts' => 4
));

// Do something with them
echo '<div>';
foreach($recent_posts as $post) {
  echo '<a class="blog-title" href="', get_permalink($post['ID']), '">', $post['post_title'], '</a><br />', $post['post_date'], custom_echo($post['post_content']), '<br /><br />';
}
echo '</div>';
?> 
```

我遇到的问题是 $post['post_date'] - 它出现在 2012-12-03 13:59:56 - 我只想在 2012 年 12 月 3 日看到这个。我不知道该怎么走关于它。我知道还有其他一些与此类似的解决方案，但我对此并不陌生，并且真的不理解它们......？

帮助？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T14:23:51.493

在 PHP 中，该`date()`函数带有很多格式化的可能性。您要做的是使用以下语句：

```
echo date("F j, Y", $post['post_date']); 
```

这里

1.  'F' 对应于`full textual representation of a month, such as January or March`
2.  “j”对应于`Day of the month without leading zeros`
3.  'Y' 对应于`A full numeric representation of a year, 4 digits`

您可以在此处找到有关文档的更多信息和格式：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

编辑：如果您的变量`$post['post_date']`包含现有日期，您应该这样做：

```
echo date("F j, Y", strtomtime($post['post_date'])); 
```

该功能`strtotime()`将首先将您现有的日期转换为时间戳，`date()`以便正常工作。

更多信息在`strtotime()`这里： http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

# eigen - 为什么 Eigen 不需要链接 .lib 或 dll？

> ID：13705040
> 
> 赞同：5
> 
> 时间：2012-12-04T14:22:38.663
> 
> 标签：eigen

最近，我编译了 Eigen3 并用它在 Windows 上做一些线性代数任务。

但我想知道为什么 Eigen3 不需要链接额外的 lib 或 DLL（我只需要包含它的头文件）

Eigen 是否在编译时进行所有计算？还是我错过了理解某些东西？

如果是这样，这种库的类别名称是什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T14:26:25.840

与所有 C++ 模板库一样，Eigen 完全包含在头文件中，并且每次都插入到源文件中。所以它不包含任何将被编译为 dll 的 cpp 文件。

当类在头文件中声明并在 cpp 文件中实现时，dll/lib 和头文件之间的区别就出现了。那么实现部分总是一样的，可以从dll加载。

但是，在模板库中，类还没有完成，因为它们依赖于您传递给它们的模板参数。例如，如果您编写`Matrix<float, 17, 19>`，您将创建一个具有全新实现的新完整类，该实现无法从 dll 加载。

这也使得使用大量模板（如许多不同的固定大小矩阵）的 c++ 程序非常大。

# mysql - 存储过程函数中的动态表名

> ID：13705045
> 
> 赞同：6
> 
> 时间：2012-12-04T14:23:09.147
> 
> 标签：mysql, stored-procedures

我编写了一个存储过程函数来从表中获取名称。问题是我希望将表名作为参数传入（我需要使用几个不同的表来使用这个函数）：

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` FUNCTION `getName`(tableName VARCHAR(50), myId INT(11)) RETURNS VARCHAR(50)

  begin

  DECLARE myName VARCHAR(50);

  SELECT
    'name' INTO myName
  FROM
    tableName
  WHERE 
    id=myId;

  RETURN myName;

  end 
```

此方法有一个错误，因为它使用变量名“tableName”而不是变量的实际值。

我可以使用这样的方法在一个*过程*中解决这个问题`CONCAT`：

```
 SET @GetName = CONCAT("
    SELECT
       'name'
    FROM
        ",tableName,"
    WHERE 
        id=",myId,";
    ");

    PREPARE stmt FROM @GetName;
    EXECUTE stmt; 
```

...但是，当我尝试在函数中执行此操作时，我收到一条消息：

> 存储函数或触发器中不允许使用动态 SQL

我试图改用一个*过程*，但我不能让它像函数一样只返回一个值。

因此，任何人都可以找到解决此问题的方法。它看起来非常基本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T08:13:15.560

如果要使用标识符构建 SQL 语句，则需要使用准备好的语句；但是准备好的语句不能在函数中使用。因此，您可以使用 OUT 参数创建存储过程 -

```
CREATE PROCEDURE getName
 (IN tableName VARCHAR(50), IN myId INT(11), OUT myName VARCHAR(50))
BEGIN

  SET @GetName =
    CONCAT('SELECT name INTO @var1 FROM ', tableName, ' WHERE id=', myId);
  PREPARE stmt FROM @GetName;
  EXECUTE stmt;

  SET myName = @var1;
END 
```

使用示例 -

```
SET @tableName = 'tbl';
SET @myId = 1005;
SET @name = NULL;
CALL getName(@tableName, @myId, @name);
SELECT @name; 
```

# ios - AVPlayer 帧精度

> ID：13705048
> 
> 赞同：2
> 
> 时间：2012-12-04T14:23:15.167
> 
> 标签：ios, avplayer, frame-rate

目标：在播放电影期间，必须以精确的时间执行动作。

为此，我使用带有 PeriodicTimeOberver 和 CTimeMake(1000,25000) 的 AVPlayer。我的电影帧率为 25fps。

但这并不精确。它无缘无故地触发了很多时间（请参见此处：[IOS addPeriodicTimeObserverForInterval 触发太多次](https://stackoverflow.com/questions/13401206/ios-addperiodictimeobserverforinterval-fire-too-many-times)） addPeriodicTimeObserverForInterval 给我同样的问题。

我只知道 CTime 函数。有某种方式可以在 2 秒和 2 帧（第 52 帧）触发事件。

提前致谢。丹尼尔

# php - 无法使用 php 在 mysql Quran 数据库中搜索阿拉伯语

> ID：13705050
> 
> 赞同：6
> 
> 时间：2012-12-04T14:23:18.960
> 
> 标签：php, html, mysql, unicode

我是网络编程的新手，所以如果我说错了，我深表歉意。我正在编写一个简单的 php 脚本来搜索阿拉伯语 mysql 数据库（来自本网站[http://qurandatabase.org/Database.aspx](http://qurandatabase.org/Database.aspx) - mysql 查询文件格式 - 阿拉伯语（原始）的古兰经数据库），但我有一个非常简单的问题，这是我在我的 php 脚本中通过 GET 方法收到的不是我输入搜索的内容，并且在我的搜索字符串中添加了一些不需要的阿拉伯字符。我的代码和输出如下：我的 html 代码是：

```
 <!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml" lang="ar" xml:lang="ar">
     <meta http-equiv="content-type" content="text/html; charset=UTF-8">
     <body>
         <form action="p.php" method="get" accept-charset="UTF-8">
             Word Search: <input type="text" name="word"/>
             <input type="submit"/>
         </form>
     </body>
 </html> 
```

我的PHP代码是：

```
<?php
 header('Content-type: text/html; charset=utf-8');
 $DBServer="localhost";
 $DBUser="root";
 $DBPass="1";
 $DB="Quran";
 $DBTable="Quran";
 //echo "Welcome".$_GET["fname"];
 $Word=$_GET['word'];
 echo $Word;
 echo "<br />";
 echo "<br />";
 $con=mysql_connect($DBServer,$DBUser,$DBPass);
 if(!$con)
 {
     die("DB Connection error: ".mysql_error());
 }
 mysql_select_db($DB,$con);
 echo "<br />\n";

 echo "<br />\n";
 echo "<br />\n";
 echo "<br />\n";
 echo "select * from $DBTable where AyahText like '%".$Word."%'";
 echo "<br />\n";
 $select="select * from $DBTable where AyahText like '%ﻢِﻧَ ﺎﻠْﺠِﻧَّﺓِ ﻭَﺎﻠﻧَّﺎﺳِ%'";
 echo $select;
 echo "<br />\n";
 echo "<br />\n";
 $select="select * from $DBTable where AyahText like '%".urldecode($Word)."%'";
 echo $select;
 echo "<br />";
 $result=mysql_query($select);
 //$result=mysql_query("select * from $DBTable where VerseID=$Word");
 $LastSura=1;
 echo $LastSura;
 echo "<br />";
 while($row=mysql_fetch_array($result))
 {
     echo "salam";
     echo $row['SuraID']."\t".$row['VerseID']."\t".$row['AyahText'];
     echo "<br />";
     if($row['SuraID']!=$LastSura)
     {
         echo "<br />";
         echo "<br />";
     }
     $LastSura=$row['SuraID'];

 }
 mysql_close($con);
 ?> 
```

我在我的 html 文本框中输入了这个字符串：

> مِنَ الْجِنَّةِ وَالنَّاسِ

但我得到这个字符串，输出几乎没有差异，你必须自己测试它：

> مِنَ الْجِنَّةِ وَالنَّاسِ
> 
> select * from Quran where AyahText like '%مِنَ الْجِنَّةِ وَالنَّاسِ%'
> 
> select * from Quran where AyahText like '%مِنَ الْجِنَّةِ وَالنَّاسِ%'
> 
> select * from Quran where AyahText like '%مِنَ الْجِنَّةِ وَالنَّاسِ%' 1

它导致我的搜索失败。

我不知道这个用于提问的复制和粘贴是否让我的正确输出正确显示给你，但在我的浏览器中 الْجِنَّةِ 和 النَّاسِ 在 ن 我的输出中有不需要的 ِ 或 َ。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:24:07.670

مِنَ الْجِنَّةِ وَالنَّاسِ 和 مِنَ الْجِنَّةِ وَالنَّاسِ 之间的区别在于不可打印字符位于不同的位置。根据您使用的排序规则，这会使 MySQL 中的字符串相等或不同，从而影响查询结果：

```
mysql> select 'مِنَ الْجِنَّةِ وَالنَّاسِ' = 'مِنَ الْجِنَّةِ وَالنَّاسِ' collate utf8_general_ci general;
+---------+
| general |
+---------+
|       0 |
+---------+
1 row in set (0.00 sec)

mysql> select 'مِنَ الْجِنَّةِ وَالنَّاسِ' = 'مِنَ الْجِنَّةِ وَالنَّاسِ' collate utf8_unicode_ci unicode;
+---------+
| unicode |
+---------+
|       1 |
+---------+
1 row in set (0.00 sec) 
```

更改为列定义的排序规则以获得所需的结果，例如：

```
alter MyTable modify MyColumn text collate utf8_general_ci; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:40:57.707

您不需要执行 urldecode()。`$_GET`当 PHP作为其启动序列的一部分进行填充时，它已经为您完成了这项工作。

请注意，您的代码容易受到 SQL 注入攻击。正确的搜索顺序是：

```
$word = $_GET['word'];
$safeword = mysql_real_escape_string($word);  
$sql = "SELECT ... WHERE AyahText LIKE '%$safeword%'";
$result = mysql_query($sql) or die(mysql_error());
while($row = mysql_fetch_assoc($rresult)) {
   ...
} 
```

当然，你会在这里收到很多关于不使用 mysql 库的评论，因为它已被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:16:36.863

这是我用您的话测试的示例代码，它打印了包含该单词的 suraNo/ayahNo/ayah。

```
<?php
header('Content-type: text/html; charset=utf-8');
$server="localhost";
$user="root";
$pass="root";
$database="quran";
$table="quran";
$word=$_GET['word'];
$connection=mysql_connect($server,$user,$pass);
if(!$connection)
{
 die("DB Connection error: ".mysql_error());
}
mysql_select_db($database,$connection);
mysql_query("SET NAMES utf8"); //IMPORTANT
?>
<!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml" lang="ar" xml:lang="ar">
     <meta http-equiv="content-type" content="text/html; charset=UTF-8">
     <body>
         <form method="get" accept-charset="UTF-8">
             Word Search: <input type="text" name="word"/>
             <input type="submit"/>
         </form>
         <div>
         <?php
            if (!empty($word))
            {
                $i = 0;
                $str = "SELECT * FROM $table WHERE AyahText LIKE '%$word%'";
                $query = mysql_query($str);
                while ($row = mysql_fetch_assoc($query))
                {
                    $i++;
                    echo "<br/>$i: ($row[SuraID], $row[VerseID]): $row[AyahText]";
                }
            }
         ?>
         </div>
     </body>
 </html> 
```

您必须在选择数据库后调用它。当我删除这条线时，我无法得到任何结果。

```
mysql_query("SET NAMES utf8"); 
```

# jquery - 加载 jQuery 插件不起作用

> ID：13705054
> 
> 赞同：0
> 
> 时间：2012-12-04T14:23:34.063
> 
> 标签：jquery, function, jquery-plugins, plugins, loading

在我完成我的第一个 jQuery 插件后，我开始开发这个。但是不知何故这个插件不起作用..我真的不明白出了什么问题，因为我确信我遵循了插件制作的所有规则。

编辑：“不起作用”是指网页上的元素没有任何反应。它甚至不返回错误。它只是行不通。

jQuery 插件基于普通的 javascript 源代码：您可以在这里看到一个工作示例[和](http://jsfiddle.net/M8Wta/)[一个](http://www.ximore.com/test/loader.html)
jsfiddle

这些示例是用 javascript 制作的，而不是 jQuery 插件

这是我的插件

```
 ;(function($){

     // We name the function loader
     $.fn.loader = function (options) {

         // Default settings - can be replaced by options
         var defaults = {
             speed: 5,
             width: 50,
             height: 50,
             totalFrames: 19,
             frameWidth: 50,
             color: 'white',
             loaderTimeout: false,
             index: 0,
             Xpos: 0,
             frameDelay: 0
         }

         // Extend the options and defaults to variables
         var opts = $.extend(defaults, options);

         // We locate the loader Image
         var loaderImage = '../../_resources/loading/loading_sprites_'+ opts.color + '_' + opts.height + '.png';

         // Now start the Function
         return this.each(function() {

             // The original element is defined with a variable
             var element = $(this);
             var frameDelay = opts.frameDelay;

             // We start out by defining the beginning of the animation
             function startLoader() {

                 // The element is giving the right width and height to contain
                 // the loading animation, and the loaderImage source as background
                 element.width(opts.width).height(opts.height).css('background-image', 'url('+loaderImage+')');

                 // We calculate the Frames Per Second
                 FPS = Math.round(100/opts.speed);
                 frameDelay = 1 / FPS;

                 // And start the animation
                 setTimeout('continueAnimation()', frameDelay / 1000);

             }

             // To keep the animation on going we need to define a function
             // that continuesly repeat the sprites
             function continueAnimation() {

                 var Xpos = opts.Xpos;
                 var index = opts.index;

                 // The X-position is defined based on how wide the frame is
                 Xpos += opts.frameWidth;

                 // index is defined by continuelsy counting
                 index += 1;

                 // if index counts to more or equal to the amount of frames defined
                 if (index >= opts.totalFrames) {
                     Xpos = 0; // ... we set the X-position to be 0
                     index = 0; // ... and the index too
                 }

                 // We change the position og the sprite to give the illusion
                 // of an animation going on
                 element.css('background-position', Xpos + 'px 0');

                 // And finally we are going to ask our function to repeat itself.
                 setTimeout('continueAnimation()', frameDelay * 1000);

             }

             // Before anything we want the sprites to be pre-loaded
             function imageLoader(source, start) {

                 var loaderTimeout = opts.loaderTimeout;

                 // First we clear Timout
                 clearTimeout(loaderTimeout);
                 loaderTimeout = 0;

                 // Then we generate a new image (the sprites)
                 genImage = new Image();

                 // When the image is loaded we want to start the animation
                 genImage.onload = function() {loaderTimeout = setTimeout(start, 0)};

                 // If we can't locate the sprite image, we prepare an error function
                 genImage.onerror = new Function('alert(\'Could not load the image\')');

                 // And we define the image source 
                 genImage.src = source;
             }

             // This command starts the whole animation
             new imageLoader(loaderImage, 'startAnimation()');

         });
     }

 })(jQuery); 
```

我这样称呼我的插件：

```
$(document).ready(function() {
    $('.loader').loader({
        color: 'blue'
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:30:28.463

你的代码说：

```
new imageLoader(loaderImage, 'startAnimation()'); 
```

第二个参数将其传递给`setTimeout`：

```
 genImage.onload = function() {loaderTimeout = setTimeout(start, 0)}; 
```

但是你的方法被称为`startLoader()`

顺便说一句：您应该避免将字符串传递给`setTimeout`/ `setInterval`。它的 eval 变相和[eval 是邪恶的！](http://blogs.msdn.com/b/ericlippert/archive/2003/11/01/53329.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:48:39.843

jquery-ui 是一个选项吗？

如果您只是想学习编写自己的小部件，了解“this”引用的内容，并且通常以“不容易”的方式做事，那么请忽略这个答案:)

如果这是为了工作并阻止你回家，我强烈推荐[jquery-ui 小部件工厂](http://ajpiano.com/widgetfactory)。试试这个（去开会，如果我能有时间的话，会扔一个 jsfiddle）：

```
$(document).ready(function() {
    $('.loader').loader({
        color: 'blue'
    })
});
$.widget("pj.loader",{
  options:{
             speed: 5,
             width: 50,
             height: 50,
             totalFrames: 19,
             frameWidth: 50,
             color: "white",
             loaderTimeout: false,
             index: 0,
             Xpos: 0,
             frameDelay: 0,
             imgBase: "../../_resources/loading/loading_sprites_"
         },
//called once and only once per widget
  _create: function(){
    var self = this,
        selectedElement = self.element;
      self.options.loaderImage = self.options.imgBase + self.options.color + '_' + self.options.height + '.png';
      self.imageLoader(self.options.loaderImage, self.startAnimation);
},
  startAnimation : function(){
var self = this;
// The element is giving the right width and height to contain
                 // the loading animation, and the loaderImage source as background
                 element.width(self.options.width).height(self.options.height).css('background-image', 'url('+self.options.loaderImage+')');

                 // We calculate the Frames Per Second
                 FPS = Math.round(100/self.options.speed);
                 self.options.frameDelay = 1 / FPS;

                 // And start the animation
                 setTimeout(self.continueAnimation, self.options.frameDelay / 1000);
},
continueAnimation : function(){
 var self = this,
     Xpos = self.options.Xpos,
     index = self.options.index;

                 // The X-position is defined based on how wide the frame is
                 Xpos += self.options.frameWidth;

                 // index is defined by continuelsy counting
                 index += 1;

                 // if index counts to more or equal to the amount of frames defined
                 if (index >= self.options.totalFrames) {
                     Xpos = 0; // ... we set the X-position to be 0
                     index = 0; // ... and the index too
                 }

                 // We change the position og the sprite to give the illusion
                 // of an animation going on
                 element.css('background-position', Xpos + 'px 0');

                 // And finally we are going to ask our function to repeat itself.
                 setTimeout('continueAnimation()', frameDelay * 1000);
},
imageLoader : function(source, start){
var self = this,
  loaderTimeout = self.options.loaderTimeout;

                 // First we clear Timout
                 clearTimeout(loaderTimeout);
                 loaderTimeout = 0;

                 // Then we generate a new image (the sprites)
                 genImage = new Image();

                 // When the image is loaded we want to start the animation
                 genImage.onload = function() {loaderTimeout = setTimeout(start, 0)};

                 // If we can't locate the sprite image, we prepare an error function
                 genImage.onerror = new Function('alert(\'Could not load the image\')');

                 // And we define the image source 
                 genImage.src = source;
},
//optional, called every time $('selector').loader() is called
  _init: function(){},

//recommended optional, called on $('loader.selector').remove() or similar.
//you should undo all your changes / events in create
  _destroy: function(){}
}); 
```

# java - Wicket - DatePicker 扩展范围

> ID：13705057
> 
> 赞同：0
> 
> 时间：2012-12-04T14:23:49.590
> 
> 标签：java, datepicker, wiquery

一个快速的问题。当我创建一个 datePicker 对象时，您可以使用 DropDownChoice 选择的年份范围是从现在起 -10/+10 年的范围。

我怎样才能扩大这个范围？我想从 1900 年开始。我尝试使用 setMinDate 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:30:42.497

根据[DatePicker](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/extensions/yui/calendar/DatePicker.html)、[DatePicker.configure(Map widgetProperties, IHeaderResponse response, Map initVariables)](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/extensions/yui/calendar/DatePicker.html#configure%28java.util.Map,%20org.apache.wicket.markup.html.IHeaderResponse,%20java.util.Map%29)和[YUI Calendar](http://developer.yahoo.com/yui/docs/YAHOO.widget.Calendar.html)的文档，您可以将`mindate`和设置`maxdate`为 widgetProperties。

# apache2 - 在 Apache 中为 BOSH 设置代理后找不到 404

> ID：13705059
> 
> 赞同：0
> 
> 时间：2012-12-04T14:23:51.427
> 
> 标签：apache2, xmpp, mod-proxy, strophe

我正在尝试使用openfire设置BOSH，启用它后，我已经为apache设置了代理

如下

```
<VirtualHost XX.XX.XXX.XXX:80>
    ServerName mydomain.com
    ServerAlias www.mydomain.com
    DocumentRoot /home/mydomainname/public_html
    ServerAdmin webmaster@mydomain.com
    UseCanonicalName Off

    ProxyRequests Off

     <Proxy *>
      Order deny,allow
      Allow from all
    </Proxy>

    ProxyPass /http-bind/ http://www.mydomain.com:7070/http-bind/
    ProxyPassReverse /http-bind/ http://www.mydomain.com:7070/http-bind/

    <IfModule mod_suphp.c>
        suPHP_UserGroup mydomainname mydomainname
    </IfModule>
    <IfModule !mod_disable_suexec.c>
        SuexecUserGroup mydomainname mydomainname
    </IfModule>

    ScriptAlias /cgi-bin/ /home/mydomainname/public_html/cgi-bin/

</VirtualHost> 
```

但是当我将 BOSH 连接设置为 /http-bind/ 或[http://mydomain.com/http-bind](http://mydomain.com/http-bind)

它在使用 strophe.js 发送 XMPP BOSH 请求时返回 404 ERROR

我需要在 apache2 中做任何事情吗？

我的设置在`/etc/httpd/conf/httpd.conf`

**挖掘 www.mydomain.com**

```
 ; <<>> DiG 9.3.6-P1-RedHat-9.3.6-20.P1.el5_8.5 <<>> www.mydomain.com
    ;; global options:  printcmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 4697
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0

    ;; QUESTION SECTION:
    ;www.mydomain.com.      IN  A

    ;; ANSWER SECTION:
    www.mydomain.com.   14400   IN  CNAME   mydomain.com.
    mydomain.com.       14400   IN  A   XX.XX.XXX.XXX

    ;; Query time: 61 msec
    ;; SERVER: 8.8.8.8#53(8.8.8.8)
    ;; WHEN: Wed Dec  5 02:2

    0:20 2012
   ;; MSG SIZE  rcvd: 66 
```

**getent 主机 www.mydomain.com**

```
XX.XX.XXX.XXX   mydomain.com www.mydomain.com 
```

**卷曲[http://www.mydomain.com:7070/http-bind/](http://www.mydomain.com:7070/http-bind/)**

```
HTTP ERROR 400

Problem accessing /http-bind/. Reason:

    Bad Request
Powered by Jetty:// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:14:09.020

To be able to use `ProxyPass` and `ProxyPassReverse`, you need to enable Apache mod_proxy first.

```
host# a2enable mod_proxy
host# /etc/init.d/apache2 restart 
```

# r - 在李克特数据的频率表中包括零频率

> ID：13705060
> 
> 赞同：9
> 
> 时间：2012-12-04T14:23:53.610
> 
> 标签：r, frequency

我有一个数据集，其中包含对 9pt 规模的李克特项目的响应。我想创建数据的频率表（和条形图），但规模上的某些值从未出现在我的数据集中，因此`table()`从频率表中删除该值。我希望它以 . 的频率呈现值`0`。也就是说，给定以下数据集

```
# Assume a 5pt Likert scale for ease of example
data <- c(1, 1, 2, 1, 4, 4, 5) 
```

我想获得以下频率表，而无需手动插入名为`3`value的列`0`。

```
1 2 3 4 5 
3 1 0 2 1 
```

我是新来的`R`，所以也许我忽略了一些基本的东西，但我还没有遇到可以提供所需结果的功能或选项。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T14:33:19.113

**编辑：**

`tabular`生成频率表，同时`table`生成列联表。但是，为了在上面的示例中获得一维列联表中的零频率，当然，下面的代码仍然有效。

* * *

[这个问题](https://stackoverflow.com/q/12226991/610108)提供了缺失的链接。通过将 Likert 项转换为因子，并明确指定级别，`0`仍然计算频率为 的级别

```
data <- factor(data, levels = c(1:5))
table(data) 
```

产生所需的输出

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-03T22:03:50.300

`table`生成列联表，同时`tabular`生成包含零计数的频率表。

```
tabulate(data)
# [1] 3 1 0 2 1 
```

另一种方式（如果你有从 1 开始的整数 - 但在其他情况下很容易修改）：

```
setNames(tabulate(data), 1:max(data))  # to make the output easier to read
# 1 2 3 4 5 
# 3 1 0 2 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T05:27:11.420

如果您想快速计算多个 likert 项目的计数或比例并在 data.frame 中获取输出，您可能会喜欢包`psych::response.frequencies`中的函数`psych`。

让我们创建一些数据（注意没有 9）：

```
df <- data.frame(item1 = sample(1:7, 2000, replace = TRUE), 
                 item2 = sample(1:7, 2000, replace = TRUE), 
                 item3 = sample(1:7, 2000, replace = TRUE)) 
```

如果要计算每个类别中的**比例**

```
psych::response.frequencies(df, max = 1000, uniqueitems = 1:9) 
```

你得到以下信息：

```
 1      2     3      4      5      6      7 8 9 miss
item1 0.1450 0.1435 0.139 0.1325 0.1380 0.1605 0.1415 0 0    0
item2 0.1535 0.1315 0.126 0.1505 0.1535 0.1400 0.1450 0 0    0
item3 0.1320 0.1505 0.132 0.1465 0.1425 0.1535 0.1430 0 0    0 
```

如果你想要计数，你可以乘以样本大小：

```
psych::response.frequencies(df, max = 1000, uniqueitems = 1:9) * nrow(df) 
```

您会得到以下信息：

```
 1   2   3   4   5   6   7 8 9 miss
item1 290 287 278 265 276 321 283 0 0    0
item2 307 263 252 301 307 280 290 0 0    0
item3 264 301 264 293 285 307 286 0 0    0 
```

几点注意事项：

*   默认`max`值为 10。因此，如果您有超过 10 个响应选项，您就会遇到问题。否则，在您的情况和许多李克特项目情况下，您可以省略该`max`论点。
*   `uniqueitems`指定可能的值。如果您的所有值都存在于至少一项中，那么这将从数据中推断出来。
*   我认为该函数仅适用于数字数据。因此，如果您将 Likert 类别编码为“非常不同意”等，它将无法正常工作。

# json - 从 JSON 中的 JSON 检索键和值

> ID：13705062
> 
> 赞同：1
> 
> 时间：2012-12-04T14:23:57.093
> 
> 标签：json

我有一个像

```
 var jsonObject = {
    "key": [
        {
        "key1": "value1",
        "info": "info"},
    {
        "key2": "value2",
        "info": "info"}
    ]
};​ 
```

我需要从中检索键和值，但是是动态的，假设我不知道 JSON，因为它将从 Web 服务生成..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:55:49.877

如果你需要在 JavaScript 中处理 JSON 对象，你需要一个这样的递归函数：

```
function processObject(jsonObject) {
  for (var property in jsonObject) {
    if (jsonObject.hasOwnProperty(property)) {
      console.log(property+'='+jsonObject[property]);
      if (typeof (jsonObject[property]) == 'object') {
        processObject(jsonObject[property]);
      }
    }
  }
} 
```

将 替换为`console.log`您想要对数据执行的任何操作。

# android - Holo 主题应用回退到默认的 Android 主题

> ID：13705067
> 
> 赞同：1
> 
> 时间：2012-12-04T14:24:10.007
> 
> 标签：android, themes, android-theme

我的问题是一个 Android 应用程序，它`android:Theme`用作默认样式，`android:Theme.Holo.Light`适用于版本 11 及更高版本以及`android:Theme.Holo.Light.DarkActionBar`v14 及更高版本的操作系统。

该应用程序项目是使用 ADT Eclipse-wizzard 创建的，因此`AndroidManifest.xml`设置了`android:theme="@style/AppTheme"`、 和 三个`styles.xml`文件，分别位于`values`、`values-v11`和`values-v14`文件夹中。默认`styles.xml`设置

```
<style name="AppBaseTheme" parent="android:Theme"> 
```

成套_ `styles.xml`_`values-v11`

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light"> 
```

最后成套`styles.xml`_`values-v14`

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar"> 
```

这在相当长的一段时间内运作良好。我已经使用模拟器和 Galaxy SIII 上的 Holo 主题检查了姜饼的外观。

但是现在，三星手机也只会使用经典的android:Theme，不管我在`style.xml`s中设置什么。我还尝试将`minSdkVersion`in提高`AndroidManifest.xml`到 16 并将 Holo-theme 设置为 default `styles.xml`。清理和重建也没有效果。

应用程序很高兴地忽略了 Holo 主题，我不知道还有什么地方可以尝试解决问题。

非常感谢任何帮助或指示。

**更新**

如果我更换

```
android:theme="@style/AppTheme" 
```

在`AndroidManifest.xml`与

```
android:theme="@style/AppBaseTheme" 
```

一切正常（`AppBaseTheme`是自定义平台无关的平台相关父主题`AppTheme`）。不知何故，它看起来好像 Android 运行时是懒惰的，并且不关心寻找最具体的版本`AppBaseTheme`，但总是采用在`values/styles.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:53:06.053

最后，在几次不成功的清理之后，我采取了不同的方法并尝试重命名`AppTheme`为`MyTheme`（并相应地更新引用`AndroidManafest.xml`）。现在，该应用程序为每个 Android 版本引用了正确的 AppBaseTheme。

# ruby-on-rails - 带有 Ruby on Rails 和 OAUTH2 的 Yahoo API

> ID：13705080
> 
> 赞同：2
> 
> 时间：2012-12-04T14:24:31.737
> 
> 标签：ruby-on-rails, oauth-2.0, yahoo-api

我有一个从证券交易所获取数据的 RoR 网站，我正在通过 Yahoo API 使用 Yahoo 的财务表。我需要授权才能获得对 YQL 的完全访问权限，这需要我使用 Oauth2。我需要帮助以获取对 Yahoo 的 OAuth 访问权限。

这是我尝试过的：

```
client = OAuth2::Client.new(oauth_consumer_key,oauth_consumer_secret, {
        access_token_path:   '/oauth/v2/get_token',
        authorize_path:      '/oauth/v2/request_auth',
        authorize_url:       'https://api.login.yahoo.com/oauth/v2/request_auth',
        request_token_path:  '/oauth/v2/get_request_token',
        site:                'https://api.login.yahoo.com'
    })
puts client.auth_code.authorize_url( redirect_uri: "http://localhost:3000")
code = gets.chomp
token = client.auth_code.get_token(code, redirect_uri: "http://localhost:3000") 
```

我不知道我必须使用哪个“代码”。Authorize_url 返回我这个[URL](https://api.login.yahoo.com/oauth/v2/request_auth?response_type=code&client_id=dj0yJmk9YTlQOVhqeURmaTVYJmQ9WVdrOVZtUlVWMnBoTm5FbWNHbzlNVE14TWpBeU5qTTJNZy0tJnM9Y29uc3VtZXJzZWNyZXQmeD0wYg--)，但不清楚“代码”是什么。我受到这个[问题](https://stackoverflow.com/questions/7236193/oauth2-with-intridea-ruby-gem)的启发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-11T22:57:19.003

不要问我为什么，但是雅虎很难找到他们的 OAuth 2.0 文档。[不过我找到了](https://developer.yahoo.com/oauth2/guide/flows_authcode/index.html)！

`refresh_token`此外，您无需明确询问用户“离线”权限即可获得非常“棒”的功能。在我看来，这对雅虎来说是一个安全问题。谷歌和微软都需要明确的“离线”访问。

```
require 'oauth2'

OAuth2::Client.new(Rails.application.secrets.yahoo_consumer_id, Rails.application.secrets.yahoo_consumer_secret, site: 'https://api.login.yahoo.com', authorize_url: '/oauth2/request_auth', token_url: '/oauth2/get_token')
client.auth_code.authorize_url(redirect_uri: redirect_uri, headers: { "Authorization" => basic_authorization })
token = client.auth_code.get_token(code, redirect_uri: redirect_uri)

# Later
token.refresh! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T03:39:14.243

根据quatermain的要求，我在这里发布我的解决方案作为答案：

[https://docs.google.com/document/d/1SdGSfakQM3ZuiqJK7keXhOfh6310-z_h0THl1_Jswxk/pub](https://docs.google.com/document/d/1SdGSfakQM3ZuiqJK7keXhOfh6310-z_h0THl1_Jswxk/pub)

P/S：我在文档中打错了一些字，如下：

*   句子：“我不认为此 URL 影响身份验证过程...”-> 应该是“我认为此 URL 不会影响身份验证过程...”

*   单词“并且准备通过”->应该是“并且通读”

# sql-server - 没有主键的 Grails 域

> ID：13705082
> 
> 赞同：0
> 
> 时间：2012-12-04T14:24:35.693
> 
> 标签：sql-server, grails, grails-orm

任何人都知道如何将 grails 域类映射到没有主键的 MSSQL 实体

```
class BRCategoryInt {

    String lang
    String name

    static hasMany = [category: BRCategory]

    static constraints = {
    }

    static mapping = {
        table "brCategoryInt"
        version false

        //id        column: ""
        category  column: "CategoryId"
        lang      column: "Lang"
        name      column: "Name"
    }
} 
```

在遗留数据库中，我们没有主键，只有一个 FK CategoryId。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:00:19.980

你真的应该在你的数据上总是有一个主键，我建议添加一个只是为了让每个人都开心。如果您不能简单地向表中添加自动增量 ID，则可以使用复合键。[请参阅此处](http://grails.org/doc/latest/guide/GORM.html#compositePrimaryKeys)的文档。如果你也不能这样做，那么我会考虑重新考虑你的数据是如何布局的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:44:42.317

您不能在 Grails 中映射此类域。要读取/写入此类遗留表，请尝试[groovy Sql](http://groovy.codehaus.org/api/groovy/sql/Sql.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T22:02:17.027

我的理解是，理论上可以映射到没有主键的表，但是我还没有看到它实际完成。几天来我一直在努力尝试它，但没有任何表现。

简短的回答：在当前版本的 Grails 中不可能。

# shell - 如果 Web 服务 (tomcat7) 没有响应则重新启动

> ID：13705083
> 
> 赞同：0
> 
> 时间：2012-12-04T14:24:37.153
> 
> 标签：shell, unix, cron, tomcat7, wget

我在 Tomcat 服务器上运行 Web 应用程序。服务器代码中存在一个难以检测的问题，导致它每天崩溃一次或两次。当我有时间时，我会深入纠正它。但是直到那一天，在有问题的情况下重新启动tomcat（/etc/init.d/tomcat7 restart）或基本上重新启动机器现在似乎也是不错的解决方案。我想用 wget 而不是 grep 或其他东西来检测服务器的活跃度，因为即使 tomcat 正在运行我的服务也可能已关闭。

```
wget localhost:8080/MyService/ 
```

输出

```
--2012-12-04 14:10:20--  http://localhost:8080/MyService/
Resolving localhost... 127.0.0.1
Connecting to localhost|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2777 (2.7K) [text/html]
Saving to: “index.html.3”

100%[======================================>] 2,777       --.-K/s   in 0s

2012-12-04 14:10:20 (223 MB/s) - “index.html.3” saved [2777/2777] 
```

当我的服务启动时。和输出

```
Resolving localhost... 127.0.0.1
Connecting to localhost|127.0.0.1|:8080... failed: Connection refused. 
```

或者说完就卡住了

```
--2012-12-04 14:07:34--  http://localhost:8080/MyService/
Resolving localhost... 127.0.0.1
Connecting to localhost|127.0.0.1|:8080... connected.
HTTP request sent, awaiting response... 
```

否则。你能给我一个带有 cron 作业的 shell 脚本或其他东西来做这件事吗？如果有替代方案，我宁愿不使用 cron。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:25:27.657

为什么不使用 cron 呢？无论如何，ig 搜索`tomcat + watchdog`并找到了以下[博客文章](http://aujava.wordpress.com/2006/08/16/watchdog-for-tomcat/)。

应该给你和想法如何解决你的问题。

*hth*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:51:41.683

好的，我找到了在 /etc/rc5.d/ 下添加脚本的解决方案，如此处所述[http://www.linuxforums.org/forum/mandriva-linux/27687-how-make-command-run-startup.html](http://www.linuxforums.org/forum/mandriva-linux/27687-how-make-command-run-startup.html)

```
!/bin/bash

echo "Restarted: " `date`  >> /home/ec2-user/reboot.log

sleep 600

while [ 1 ]
do
    var=`php -f /home/ec2-user/lastEntry.php`

    if [ ${#var} -gt 3 ]
    then
        echo "Restarting: " `date` >> /home/ec2-user/reboot.log
        reboot
    fi
    sleep 60
done 
```

where last query 检查表以查看过去 10 分钟内是否有任何条目。

```
<?php
mysql_connect('ip', 'uname', 'pass') or die(mysql_error());
mysql_select_db("db") or die(mysql_error());

$query="SELECT min(now()-time) as last FROM table;";

$result = mysql_query($query)or die(mysql_error());
$row = mysql_fetch_array($result);
echo $row['last'];
?> 
```

有更直接的方法可以检查 tomcat 是否正在运行，但这会检查最后一个输出，因此可以更准确地检查它。

# android - Clojure 有 Android 支持吗？

> ID：13705085
> 
> 赞同：0
> 
> 时间：2012-12-04T14:24:43.533
> 
> 标签：android, clojure

> **可能重复：**
> [Android 上的 Clojure](https://stackoverflow.com/questions/4651757/clojure-on-android)

鉴于 Java 是 Android 的原生语言，Clojure 是 JVM 语言，是否支持在 Clojure 中编写程序并将其交叉编译到 Android 平台？

# java - “无法解析导入 java.awt”和“无法将 ***** 解析为类型”

> ID：13705087
> 
> 赞同：5
> 
> 时间：2012-12-04T14:24:49.807
> 
> 标签：java, eclipse

我下载了一个 Java 项目，我想学习并从中学习一些东西。当我在另一台计算机上下载它时效果很好，但是当我在我的计算机上尝试时，几乎每个声明和导入都会给出错误消息“ *****无法解析为类型”或“导入 java.awt 无法解析” .

我在这个网站上做了一些研究，发现这可能与没有安装最新的 Java 有关。我检查了我的，我有 JavaSE-1.7（未绑定）。所以我有最新版本，但它是（未绑定的）？

这可能是问题吗？（未绑定）是什么意思？

**我正在使用 Eclipse 3.3.2**

更新：我刚刚在“属性”窗口的顶部发现了这条错误消息：**org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7**。这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T14:35:37.130

发生这种情况是因为项目依赖于 J2SE 1.7 库，但它无法在您机器的该位置找到 JRE。

**项目->属性->Java构建路径**

或者使用**Window>Preferences>Java>Installed** JRE 在 Eclipse 中添加一个新的 JRE，并在您的机器中找到 JRE 文件夹的路径。然后用你在eclipse中安装的新JRE替换你项目的依赖。

**在 Hello World 中更新** [UNBOUND JRE](https://stackoverflow.com/questions/3542051/eclipse-frustration-with-java-1-7-unbound-library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T02:49:40.820

这可能对某些人有用......它对我有用：

1.  将鼠标悬停在代码中的“java.awt”上，然后在**可用的快速修复**下，选择**Fix Project Setup**。

2.  弹出窗口显示“*已找到以下建议...* ”和
    “*添加库 JRE 系统库[JavaSE-1.7] 到构建路径*”被选中。

3.  选择确定。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-02T03:13:08.373

出现问题是因为项目依赖于 java 1.7 的库，但它无法在您机器的指定位置找到 JRE。

项目->属性->Java构建路径

或者使用 Window>Preferences>Java>Installed JRE 在 Eclipse 中添加一个新的 JRE，并在您的机器中找到 JRE 文件夹的路径。然后用你在eclipse中安装的新JRE替换你项目的依赖。如果 teher 是 No JRE 并单击添加 jre 选项卡并提供 Jre 的目录位置并添加它。

# android - Android ndk-build 失败

> ID：13705091
> 
> 赞同：0
> 
> 时间：2012-12-04T14:24:59.560
> 
> 标签：android, android-ndk, makefile, java-native-interface, cygwin

我正在尝试使用 NDK for Android 调试 .so 库。

我能够构建 .so 库，使用`ndk-build`. 但是当我想调试我的库时，我设置`ndk-build NDK_DEBUG = 1`并收到以下错误：make: *** empty variable name。停止。

我也收到错误：`Unable to launch cygpath. Is Cygwin on the path?` 感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T16:36:09.263

您必须删除作业中的空格，即

```
ndk-build NDK_DEBUG=1 
```

而不是

```
ndk-build NDK_DEBUG = 1 
```

# java - 异常上的Java SpringMVC错误对象

> ID：13705092
> 
> 赞同：0
> 
> 时间：2012-12-04T14:25:04.533
> 
> 标签：java, spring-mvc, error-handling, jackson

我有一个函数，它既是 HTTP 端点，又是我在 Java 程序的其他地方调用的函数：

```
@RequestMapping(method = RequestMethod.GET)
public @ResponseBody MyObject getObject(final HttpServletRequest request, final HttpServletResponse response) 
```

问题在于错误处理。我想要的错误功能：

*   从 Java 内部调用的函数：抛出异常
*   从 HTTP 调用的函数：返回错误 json 对象

试图找出最好的方法来做到这一点。想过只返回一个 Java.lang.Object，但这需要大量的转换和类型检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:33:45.357

从 Web 调用时添加 Spring 异常处理程序，然后让处理程序返回您的 JSON。

更好的方法可能是将功能重构为服务方法，然后您可以让 HTTP 调用以自己的方式处理异常，而内部调用可以根据需要处理它。

编辑

第二种方法也更容易测试。

# ios - 将用户ID存储在内存IOS中

> ID：13705093
> 
> 赞同：0
> 
> 时间：2012-12-04T14:25:06.117
> 
> 标签：ios, xcode, asihttprequest

我做了一个带有登录功能的IOS应用程序。我为此使用 ASIHTTPRequest 来检查用户是否存在于 MySQL 数据库中。一切正常，但我想通过其他视图控制器传递用户 ID 或在应用程序的其他部分检索它。

有人能把我推向正确的方向吗？如何以最好和最安全的方式做到这一点？

这是我向 PHP 脚本发出 POST HTTP 请求的方式：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"*SOME_URL*"]]; 
```

在回调中，我可以检索用户 ID，但我想将此 ID 存储在应用程序的内存中以供进一步使用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:32:01.543

您可以存储`userId`在`AppDelegate`.

* * *

使用以下代码声明一个`userId`属性：`AppDelegate.h`

```
@property (nonatomic, strong) NSString *userId 
```

然后`AppDelegate.m`用下面的代码合成它：

```
@synthesize userId; 
```

* * *

然后，您可以`userId`在应用程序的任何位置使用。`AppDelegate`在要使用的类中添加导入`userId`，如下：

```
#import "AppDelegate.h" 
```

要检索`userId`使用以下代码：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *userId = [appDelegate userId]; 
```

并设置`userId`使用以下代码：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate setUserId:YouValueRetrievedByInternetOrWhateverYouWant]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T14:30:15.050

有一个作为单例工作的会话类，可以使用静态方法访问。

为此，您可以添加一个静态方法

```
+ (Session *)sharedInstace {
    static Session *session;
    if (!session)
        session = [Session new]; // there are more proper ways to instantiate a singleton class, not gonna get into it now

    return session.
} 
```

在那个类 .h 你应该添加一个 NSString （或你选择的类或任何你想要的），你可以从任何地方访问它`[Session sharedInstance].userID`

# sql - SQL Server，在两个表上按顺序重新编号 int 列

> ID：13705094
> 
> 赞同：0
> 
> 时间：2012-12-04T14:25:08.337
> 
> 标签：sql, sql-server, tsql

我有以下两个表格和数据：-

```
CREATE TABLE customers
    ([id] int, [name] varchar(10), [sex] varchar(1))
;

INSERT INTO customers
    ([id], [name], [sex])
VALUES
    (1050, 'John Doe', 'M'),
    (1060, 'Jane Doe', 'F'),
    (1031, 'Joe Bloggs', 'M')
;

CREATE TABLE orders
    ([id] int, [fk] int, [product] varchar(13))
;

INSERT INTO orders
    ([id], [fk], [product])
VALUES
    (51, 1050, 'Blue car'),
    (57, 1050, 'Yellow car'),
    (43, 1060, 'Pink bus'),
    (32, 1031, 'Black pen'),
    (87, 1031, 'Orange jacket')
; 
```

我想要做的是从 1 开始按顺序重新编号两个表中的 id 列。

订单表中的链接行也必须重新编号，并且此表中的外键必须与客户表中的新编号匹配。

所以数据最终需要看起来像这样：-

```
ID      NAME        SEX
0001    John Doe    M
0002    Jane Doe    F
0003    Joe Bloggs  M

ID    FK    PRODUCT
0001  0001  Blue car
0002  0001  Yellow car
0003  0002  Pink bus
0004  0003  Black pen
0005  0003  Orange jacket 
```

我将如何在 SQL Server 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:41:48.077

绝对不需要在这里使用*光标*（哎呀！）......你需要这样的东西：

```
-- Table "Customers" - rename column "id" to "old_id"
EXEC sp_rename 'dbo.Customers.id', 'old_id'

-- add new "id" column
ALTER TABLE Customers ADD id INT 

-- fill new "id" column with sequential values, ordered by the "old_id" value
;WITH CTE AS
(
    SELECT old_id, new_id = ROW_NUMBER() OVER (ORDER BY old_id) 
    FROM Customers
)
UPDATE dbo.Customers
SET id = CTE.new_id
FROM CTE
WHERE CTE.old_id = dbo.Customers.old_id

-- Table "Orders" - rename column "id" to "old_id"
EXEC sp_rename 'dbo.orders.id', 'old_id'

-- add new "id" column
ALTER TABLE Orders ADD id INT 

-- update the FK references to the new "id" values in table "dbo.Customers"
UPDATE dbo.Orders 
SET fk = c.id
FROM dbo.Customers c
WHERE dbo.ORders.fk = c.old_id

-- fill new "id" column with sequential values, ordered by the "old_id" value
;WITH CTE AS
(
    SELECT old_id, new_id = ROW_NUMBER() OVER (ORDER BY old_id) 
    FROM dbo.Orders
)
UPDATE dbo.Orders
SET id = CTE.new_id
FROM CTE
WHERE CTE.old_id = dbo.Orders.old_id

-- drop the old, no longer required columns "old_id" from both tables
ALTER TABLE dbo.Customers DROP COLUMN old_id
ALTER TABLE dbo.Orders DROP COLUMN old_id 
```

如果您没有任何其他引用这两个表之一的 FK 关系，这将起作用。如果这样做，那么您可能需要在启动此升级脚本之前禁用或删除这些 FK 关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:33:06.143

如果这是您想要做的一次性维护类型修复，我会这样做：

1.  禁用所有外键
2.  在客户表中添加一`oldid`列
3.  将当前 ID 字段放入`oldid`字段中
4.  将所有客户 ID 替换为新 ID
5.  `oldid`使用客户表中的字段上的连接/更新，使用现在更新的 id 更新订单表
6.  删除`oldid`列
7.  添加你的外键约束。

瞧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:46:04.343

1.  删除外键。
2.  创建`customers2`具有额外列`OldId`和列`Id`作为 IDENTITY 的表。
3.  插入所有行 from `cutomers`to `customers2`（映射`customers.Id`到`customers2.OldId`）
4.  更新`orders.fk`设置`orders.fk`=`customers2.id`
5.  对`orders`表格执行与第`customers`2 点和第 3 点相同的操作。
6.  删除`customers`，删除`orders`，重命名`customers2`，重命名`orders2`
7.  重新创建外键。

# html - 强制按钮出现在 IE7 内容下方

> ID：13705098
> 
> 赞同：1
> 
> 时间：2012-12-04T14:25:21.493
> 
> 标签：html, css, internet-explorer-7

我在 IE7 中的按钮有一些问题。在其他所有内容中，按钮显示如下： ![正确的](../Images/1695d444a93cbd47e0ca7e8266eb5cb8.png)

但是，在 IE7 中，按钮显示如下。 ![不正确](../Images/a1d900e4a73c88b23a864d5ff987b9a2.png)

我试图将 jsfiddle 与影响整体形式的代码放在一起，并且小提琴看起来还可以（即使它缺少图像参考）所以我不明白为什么 IE7 会与此按钮配合使用并制作它出现在我的内容的右侧。

```
 JsFiddle Code 
```

[提琴手](http://jsfiddle.net/jezzipin/vBf6U/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:31:10.293

如果我在 IE 中打开这个，它对我来说很好。任何方式给

```
<div class="logindetails password" style="clear:both;"> 
```

到上面的div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:15:43.627

这应该可以解决 IE 7 中的问题

```
div.links {
    clear: both !important;
    margin: 0 !important;
    padding-top: 15px;
} 
```

在样式表中，icams_specific.css 找到此部分并将其全部替换为：

```
div.widget-container > div.search > form.search > div#search_links > input.button {
background-color: #E7E7E8;
background-image: url("/incl/images/search.png");
background-position: 50% 50%;
background-repeat: no-repeat;
border: medium none;
cursor: pointer;
height: 35px;
margin-left: 257px;
margin-top: -35px;
padding: 0;
transition: all 0.25s linear 0s;
vertical-align: top;
width: 38px;
} 
```

要左右移动搜索按钮，请更改`margin-left: 257px;`为所需的值。

您还需要保留上面对 div.links 所做的更改

# cakephp - 在旧版本的 CakePHP 中添加 CakePHP 核心功能

> ID：13705099
> 
> 赞同：1
> 
> 时间：2012-12-04T14:25:28.100
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2, cakephp-2.3

我正在使用 CakePHP 2.2，我可能需要使用`SMTP`只有`TTL`CakePHP 2.3.0 才有的版本。

此处记录了此新功能的新增内容： [https ://github.com/cakephp/cakephp/pull/734](https://github.com/cakephp/cakephp/pull/734)

我想知道我应该在我的 CakePHP 项目中的哪里添加这段代码，因为我猜核心文件夹应该保持不变。

我可以使用`app\lib`文件夹吗？在这种情况下，我应该如何添加内容？我需要遵循任何结构吗？Cake 如何检测到它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:34:28.300

只需按照[CakePHP 迁移指南](http://book.cakephp.org/2.0/en/appendices/2-3-migration-guide.html)更新到 2.3。

老实说，我什至没有通读迁移指南，我只是换到 2.3 并且一切正常。现有代码似乎没有很多更改 - 只是改进/添加，因此您可能不需要进行任何代码修改。

我喜欢将我的 Cake 版本分开（请参阅[高级安装](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)），但如果您正在进行正常安装，只需将其中的文件替换`/lib/Cake/`为新版本文件即可。

# android - 我在哪里可以从 Android 设备读取 WiFi 丢包计数器？

> ID：13705102
> 
> 赞同：4
> 
> 时间：2012-12-04T14:25:44.343
> 
> 标签：android, networking

我正在寻找从 WiFi 网络读取数据包丢失计数器的方法。

它应该通过**adb shell**或**Java**或**C (NDK)**或您的方式

安卓没有root。

我有一个接入点，我在其中使用服务配置了 2% 的丢包率`Dummynet`。

我使用`wget`来自 PC 的命令并从本地服务器下载 50 Mb 文件（LAN 的带宽应为 100Mb）。我看到丢包配置带宽从 100Mb 减少到 3Mb 后，这意味着一切正常。

到目前为止，一切都很好，

我的设备（Android）通过 WiFi 连接到上述 AP。

我尝试下载相同的 50 Mb 文件，下载速率为 3M，但我没有看到任何错误或重传计数器上升。

我使用`adb shell`CLI 并输入到：`sys/class/net/eth0/statistics`我看到的位置：

```
-r--r--r-- root     root         4096 2012-12-04 15:42 rx_packets
-r--r--r-- root     root         4096 2012-12-04 15:42 tx_packets
-r--r--r-- root     root         4096 2012-12-04 15:41 rx_bytes
-r--r--r-- root     root         4096 2012-12-04 15:41 tx_bytes
-r--r--r-- root     root         4096 2012-12-04 15:43 rx_errors
-r--r--r-- root     root         4096 2012-12-04 15:43 tx_errors
-r--r--r-- root     root         4096 2012-12-04 15:43 rx_dropped
-r--r--r-- root     root         4096 2012-12-04 15:43 tx_dropped
-r--r--r-- root     root         4096 2012-12-04 15:43 multicast
-r--r--r-- root     root         4096 2012-12-04 15:43 collisions
-r--r--r-- root     root         4096 2012-12-04 15:43 rx_length_errors
-r--r--r-- root     root         4096 2012-12-04 15:43 rx_over_errors
-r--r--r-- root     root         4096 2012-12-04 15:43 rx_crc_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 rx_frame_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 rx_fifo_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 rx_missed_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_aborted_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_carrier_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_fifo_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_heartbeat_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_window_errors
-r--r--r-- root     root         4096 2012-12-04 15:38 rx_compressed
-r--r--r-- root     root         4096 2012-12-04 15:38 tx_compressed 
```

所以我运行`cat *`并获取除 4 之外的所有上述 0 值的文件：

`tx/rx_packets/bytes`是活动的，这意味着我使用写接口：

```
cat rx_packets
9106 
```

如果任何知道其他方法来检测数据包丢失或以编程方式获取它，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:05:35.317

除非我弄错了你的要求。如果您连接到与移动设备相同的网络，则可以使用wireshark。

或者你可以做一个tcpdump，然后通过wireshark分析得到丢包。

这里有一堆可能对你有帮助的链接。

[http://dennismillerdev.wordpress.com/2011/02/03/debug-network-activity-in-android-using-wireshark/](http://dennismillerdev.wordpress.com/2011/02/03/debug-network-activity-in-android-using-wireshark/) [http://mobile.tutsplus.com/tutorials/android/analyzing-android-network-流量/](http://mobile.tutsplus.com/tutorials/android/analyzing-android-network-traffic/) [在wireshark上捕获手机流量](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark)

如果您只是尝试进行通用连接测试。您可以尝试简单地将一系列 UDP 数据包发送到服务器，该服务器回显相同的数据包作为响应。有一个单独的线程同时运行，它试图从服务器接收这些数据包。如果您想进行其他测量，请记录时间戳，但如果返回的数据包少于发送的数据包，您就会知道丢失了多少数据包。如果你给数据包一个 1 字节的有效载荷，其中包含一个 id。（即：发送 20 个 id 为 1-20 的数据包），然后当您从服务器收到数据包时，您可以检查有效负载并查看哪些数据包丢失和/或乱序。

除此之外，您在没有植根手机的情况下受到限制。您可以使用 TrafficStats 获取发送的数据包数[getTotalRxPackets()](http://developer.android.com/reference/android/net/TrafficStats.html#getTotalRxPackets%28%29)或[getTotalTxPackets()](http://developer.android.com/reference/android/net/TrafficStats.html#getTotalTxPackets%28%29)以获取发送/接收的总数据包。或者，如果您使用更高级别的 API，您甚至可以获得每个应用程序的 UDP 数据包数量。因此，您可以找到发送和接收但未丢失的数据包数量。

如果您知道设备发送了多少数据包，并且在服务器端检测到来自该设备的数据包数量，那么差异也应该有助于您了解丢失数据包的数量。（此方法需要您控制服务器并涉及更多设备-服务器通信）

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:00:34.020

我认为，您需要的计数器在 /proc/net/netstat 文件中。

# android - 移动应用程序 as3 与 html5

> ID：13705103
> 
> 赞同：0
> 
> 时间：2012-12-04T14:25:50.113
> 
> 标签：android, iphone, html, actionscript-3, flash

我正在为 Iphone 和 android 制作应用程序。我想知道 flashcs6 (as3) 和 html 5 的优缺点是什么。

我很喜欢 Flash，所以我不知道使用 html5 的可能性，有人向我指出，使用 hmtl5 开发适用于安卓和 iPhone 的应用程序可能更容易......

所以我想知道你们对此有何看法..

问候，梅林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:07:30.377

几个月前，我研究了将 HTML5 用于移动项目，发现它还没有 AS3 成熟。这并不可怕——如果我决定坚持下去，我相信我可以制作一个很棒的应用程序。问题是没有令人信服的理由选择 HTML5 而不是 AS3，所以我坚持使用给我更容易开发时间的东西。从现在开始的一两年内，我认为 HTML5 移动开发将更加成熟，并且更易于使用。

我只是想制作一款只需要能够渲染到屏幕并且没有设备 API（加速度计、相机等）的游戏，因此我无法说出一个个功能。在性能方面，AIR 似乎胜出，但幅度不大。

现在，这取决于您是想学习 HTML5（当然是一项很好的学习技能）还是想尽快部署，在这种情况下我会选择 AS3（更成熟的工具、库等） .)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:35:21.977

当然，这个问题没有“正确”的答案，而是一种意见。在我看来，带有 JavaScript 的 HTML5 看起来很有希望。HTML5 尚未“完成”，但至少部分实现在较新的移动设备上。

查看[ImpactJS](http://impactjs.com)以获得使用 HTML5 和 JavaScript 可以做什么的演示。它是一个 javascript 游戏引擎，显示您可以将其用于 iPhone 和其他智能手机。（以及较新的桌面浏览器）

[在这里](http://html5readiness.com/)您可以找到有关哪个浏览器已经支持多少 html5 标准的信息。

根据您要创建的应用程序类型，还有其他选项。例如，如果 jQuery mobile 很“简单”，则可以使用它。

# testing - 角度场景 e2e 测试 - 在继续之前等待关键事件完成

> ID：13705104
> 
> 赞同：31
> 
> 时间：2012-12-04T14:25:52.557
> 
> 标签：testing, angularjs, angular-scenario

人们如何编写涉及触发一系列 UI 事件的角度 e2e 测试？场景的异步性质似乎使它变得困难。

详细信息：我正在为一个应用程序编写测试，该应用程序具有很多键处理以帮助加快编辑专用表单的速度。我已经为场景 dsl 提供了一个键盘扩展（见下文），但只有测试的第一个键事件有任何影响。IE

```
keyboard().keydown(null, 'keydown', 40, false, true); // ctrl-down
expect(element('*:focus').text()).toEqual('00:04');
keyboard().keydown(null, 'keydown', 40, false, true); // ctrl-down
expect(element('*:focus').text()).toEqual('');  // but equals 00:04 
```

第二个 keydown 没有做任何事情，因为它没有找到 *:focus 将键路由到（尽管屏幕上有一个）。令人困惑。

```
angular.scenario.dsl('keyboard', function() { 
    var chain  = {}; 
    chain.keydown = function(selector, keyEvent, keyCode, shift, ctrl) { 
        return this.addFutureAction("keyEvent", function($window, $document, done) { 
            var jQuery = $window.$; 
            var e = jQuery.Event(keyEvent);
            e.keyCode = keyCode; // # Some key code value
            e.altKey = false;
            e.ctrlKey = ctrl;
            e.shiftKey = shift;
            if (selector == null) selector = '*:focus';
            var j = jQuery(selector);
            if (j == null) j = jQuery('body');
            j.trigger(e);
            done(); 
        }); 
    }; 
    return function() { 
        return chain; 
    }; 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:20:20.187

用户似乎已经放弃了这个问题，但正如我所说，**这可能是他的`keydown`事件处理程序**的问题。

在这里用完全相同的代码制作了一个[Plnker ，一切都按预期工作。](http://plnkr.co/edit/PxzZzT?p=preview)

# java - 转换列表的更好方法 列出

> ID：13705109
> 
> 赞同：5
> 
> 时间：2012-12-04T14:26:15.083
> 
> 标签：java

我想知道是否没有更好的方法来转换整体`Lists`或`Collections`按照我在以下代码示例中显示的方式：

```
public static List<String> getAllNames(List<Account> allAccounts) {
        List<String> names = new ArrayList<String>(allAccounts.size());
        for (Account account : allAccounts) {
            names.add(account.getName());
        }
        return names;
    } 
```

每次制作`method`这样的作品，我都会开始思考，难道没有更好的方法吗？我的第一个想法是用一些`generics`and创建一个解决方案`reflections`，但这似乎有点过大，而且在性能方面可能有点慢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:31:38.940

看看 Google 的[Guava](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Lists.html)库

像这样的事情应该这样做

```
final List<String> names = Lists.transform(myObjs, new Function<MyObject, String>() {
    public String apply(final MyObject input) {
        return input.getName();
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T14:30:49.700

使用[Guava](https://code.google.com/p/guava-libraries/)，有一种更实用的方法：

```
return FluentIterable.from(allAccounts).transform(new Function<Account,String>(){
    public String apply(Account account){return account.getName();}
}).toImmutableList() 
```

当然，这本质上是做同样的事情。

顺便说一句：这个答案和 RNJ 的区别在于，在我的情况下，列表将被创建一次，而在另一个答案中，它是一个实时视图。两个版本都有效，但适用于不同的场景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T14:43:13.553

我的个人图书馆里实际上有这种方法。

```
public static <TSource,TTarget> List<TTarget> castList(List<TSource> sourceList)
{
    List<TTarget> targetList = new ArrayList<TTarget>(sourceList.size());
    for (TSource t : sourceList) {
        //This will throw a ClassCastException if the types are not compatible
        //Be carefull
        targetList.add((TTarget)t);
    }
    return targetList;
} 
```

使用非常简单，因为编译器会推断出 TTarget 的类型。

```
List<Object> objects = new ArrayList<Object>();
objects.add("One");
objects.add("Two");

List<String> strings = castList(objects); 
```

关于性能：我认为在这里使用泛型没有问题。但是需要复制整个数组是另一回事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:29:27.757

没有更好的办法。铸造是一件困难而危险的事情。在您的示例中，您无法将 String 转换为 MyDataType ，反之亦然，不是吗？如果您更频繁地需要这些，您可以使用某种 toStringList() 方法创建自己的列表实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:32:55.303

有一个简单的方法，但它不是类型安全的

```
List<A> a = new ArrayList<A>();
List<B> b = (List)a; 
```

但是您必须重写类的 toString() 方法的实现以返回 getName() 值。但是没有类型检查，

如前所述，您当然可以做一个循环并在每个对象上调用 getName

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T14:34:01.397

您可以尝试使用 Guava 库中的`Iterables`和`Function`类。您可以创建一种新的`Iterable`使用类型，

```
Iterable<String> newTypeIterable = Iterables.transform(oldTypeIterable, new Function<MyDataType, String> () {
   @Override
   public String apply(MyDataType from)
   {
     return from.getName();
   }
}); 
```

原来你也可以在`Lists`课堂上做到这一点！

# javascript - 超链接上的基本 jQuery 单击打印内容

> ID：13705115
> 
> 赞同：0
> 
> 时间：2012-12-04T14:26:32.233
> 
> 标签：javascript, jquery

如果可能的话，我希望能得到一点指导。在我的网站上，我有一个显示“最受欢迎”的小区域，下面有 4 个超链接：博客、提示、新闻、视频。我想要它，以便如果用户单击超链接，它会在下面打印适当的内容，理想情况下不加载整个页面，但不是必需的。

我是 jQuery 新手，所以如果有人可以帮助我，那就太好了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:40:10.827

看看jQuery的AJAX，尤其是load方法：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

简而言之，此方法向 URL 发出请求，并将响应写入您指定的任何元素。在你的情况下，我可能会：

1) 创建一个返回您要显示的 HTML 片段的 URL，例如： `<div><p>Popular Blog 1</p><p>Popular Blog 2</p></div>`

2）在您页面上的javascript中，添加如下内容：

```
$("a#myPopularBlogsLink").click(function() {
    $("#loadAndReplaceContentInThisElement").load("http://mywebsite.com/some-url-returning-data/);
}); 
```

3）如果您通读 jQuery 文档，您可能能够更好地适应您的情况 - 例如，在 .load() 方法中传递一个参数来选择您要为其加载数据的页面等。

如果没有更多关于您的情况的详细信息，很难说最佳实践是什么 - 您在服务器端使用 URL 有多大的灵活性，您对内容有多少控制权，以及您是否需要搜索引擎来索引内容（他们会不索引通过 AJAX 加载的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:41:17.837

使用 jQuery，你可以尝试这样的事情：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#alink").click(function () {
            $("#aframe").attr("src", $(this).attr('href'));
            return false;
        });
    });
</script>

<a id="alink" href="http://www.google.com">Google</a>
<div id="adiv">
    <iframe id="aframe" src="" width="100%" height="300"></iframe>
</div> 
```

# ruby-on-rails - 嵌套浅层路由的 Rails 路由异常：1 个有效，1 个无效

> ID：13705120
> 
> 赞同：0
> 
> 时间：2012-12-04T14:26:40.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我经常在[嵌套资源上使用](http://guides.rubyonrails.org/routing.html#nested-resources)[浅层路由](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-shallow)，所以以为我错过了一些简单的东西，但不明白为什么我会收到路由错误。`students#show`

我有一所学校，有两个嵌套资源：课程和学生。所有操作都适用于课程。:index、:new 和 :create 操作适用于学生。

为什么我会收到路由错误，而不是如中所示`/students/3`被路由到？`students#show``rake routes`

### 例外`/students/3`：

```
Routing Error
No route matches {:controller=>"students"}

Try running rake routes for more information on available routes. 
```

以下是相关位...

### 耙路线输出：

```
...
            school_students GET    /schools/:school_id/students(.:format)     students#index
                            POST   /schools/:school_id/students(.:format)     students#create
         new_school_student GET    /schools/:school_id/students/new(.:format) students#new
               edit_student GET    /students/:id/edit(.:format)               students#edit
                    student GET    /students/:id(.:format)                    students#show
                            PUT    /students/:id(.:format)                    students#update
                            DELETE /students/:id(.:format)                    students#destroy
             approve_course GET    /courses/:id/approve(.:format)             courses#approve
             publish_course GET    /courses/:id/publish(.:format)             courses#publish
             school_courses GET    /schools/:school_id/courses(.:format)      courses#index
                            POST   /schools/:school_id/courses(.:format)      courses#create
          new_school_course GET    /schools/:school_id/courses/new(.:format)  courses#new
                edit_course GET    /courses/:id/edit(.:format)                courses#edit
                     course GET    /courses/:id(.:format)                     courses#show
                            PUT    /courses/:id(.:format)                     courses#update
                            DELETE /courses/:id(.:format)                     courses#destroy
                    schools GET    /schools(.:format)                         schools#index
                            POST   /schools(.:format)                         schools#create
                 new_school GET    /schools/new(.:format)                     schools#new
                edit_school GET    /schools/:id/edit(.:format)                schools#edit
                     school GET    /schools/:id(.:format)                     schools#show
                            PUT    /schools/:id(.:format)                     schools#update
                            DELETE /schools/:id(.:format)                     schools#destroy
... 
```

### 路线.rb

```
Lms::Application.routes.draw do
...
resources :schools, :shallow => true do
  resources :students
  resources :courses do         # Courses still work if I remove this block.
    member do
      get 'approve'
      get 'publish'
    end
  end
end
... 
```

### 控制器和视图

我检查了，但由于这是一个路由异常，我认为没有达到此代码。如果你告诉我，我可以添加它们。

### 图书馆

我将[cancan](https://github.com/ryanb/cancan)与[authlogic](https://github.com/binarylogic/authlogic)一起使用，但从未遇到过路由错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:47:52.957

是的，这很简单。我做了一个错误的假设，即路由错误意味着未到达控制器和视图……而这个“天才”忘记了日志具有完整的堆栈跟踪：

```
Completed 500 Internal Server Error in 89ms

ActionController::RoutingError (No route matches {:controller=>"students"}):
  app/views/shared/_breadcrumbs.html.erb:27:in `_app_views_shared__breadcrumbs_html_erb___658518109680707361_70357170598800'
  app/views/layouts/application.html.erb:45:in `_app_views_layouts_application_html_erb__2976677320852012228_70357170792580'
  app/controllers/students_controller.rb:19:in `show' 
```

我的面包屑试图构建一个`students#index`不存在的链接。面包屑尝试处理这种情况（第 25 行），但检查嵌套资源失败：

```
25: <% elsif controller.class.action_methods.include?('index') %>
26:   <li>
27:     <%= link_to controller_name.titleize, :controller => controller_name, :action => 'index' %>
28:     <span class="divider">/</span>
29:   </li> 
```

# truncation - 您可以设置一个 Swing TableColumn 在调整大小时自动截断/删除单元格的左/前导字符吗？

> ID：13705121
> 
> 赞同：1
> 
> 时间：2012-12-04T14:26:43.073
> 
> 标签：truncation, tablecolumn

当值对于单元格宽度来说太长时，无论是在最初加载还是在调整列大小时，我都需要在单元格的开始/左边缘而不是结束/右边缘有省略号（...）。

我试图通过使用下面的代码对列进行右对齐来处理这个问题，希望它能够以相同的方式处理调整大小。然而，事实并非如此。它正确地证明了这些值，但在太大时继续截断正确的值大小。

```
DefaultTableCellRenderer r = new DefaultTableCellRenderer();
r.setHorizontalAlignment(SwingConstants.RIGHT);
appCol.setCellRenderer(r); 
```

# javascript - 在 Chrome 中工作的字符检测；不能在 Firefox 中工作

> ID：13705125
> 
> 赞同：1
> 
> 时间：2012-12-04T14:27:02.423
> 
> 标签：javascript, firefox, google-chrome

我需要阻止用户在我们的 web 脚本中输入冒号或管道，并且我使用了这段代码：

```
}
function colonFilter(evt)
{
  var e = event || evt; 
    var charCode = e.which || e.keyCode;

  if (charCode == 58 || charCode == 124)
  return false;

  return true;

} 
```

它在 Chrome 中运行良好，但是，当我在 Firefox 中访问该站点时，它不起作用。我做错什么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:10:13.363

您没有将事件对象传递给函数。Chrome 模仿 Internet Explorer 并维护一个全局“事件”；火狐没有。

```
<input name="description" type="text" onkeypress="return colonFilter(event);" size="60" maxlength="255" value=""> 
```

这适用于所有浏览器。

# php - 如何为开发目的克隆 wordpress 网站？

> ID：13705127
> 
> 赞同：2
> 
> 时间：2012-12-04T14:27:10.920
> 
> 标签：php, wordpress, staging, cloning

我有一个 wordpress 网站，我必须经常进行修改，所以我想创建该网站的克隆进行测试，因为我想先测试我的修改几天，然后再将它们放到我的网站上。

到处都有指向“真实”网站的链接，所以我不知道该怎么做。

**更新（改进的解释）：**

问题：

1.  链接是绝对的

2.  这需要在线，以便其他开发人员可以测试站点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:31:00.187

谷歌的第二个结果对我来说......

[http://wpmu.org/quickly-clone-and-migrate-wordpress-sites-with-the-duplicator-plugin/](http://wpmu.org/quickly-clone-and-migrate-wordpress-sites-with-the-duplicator-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:31:24.070

作为第一步，将整个文件从您的域复制/粘贴到您想要的任何地方。

转到 phpMyAdmin 或使用允许您将数据库导出为`.sql`.

打开 .sql 文件并运行查找和替换并替换所有绝对路径（**只是 wordpress 之前的一个：即：这个[http://www.yoursite.com/wp-content/etc](http://www.yoursite.com/wp-content/etc)。仅替换[http:/ /www.yoursite.com](http://www.yoursite.com)**）

检查数据库的权限，也许您还应该更改服务器名称、数据库名称、用户名和密码。

创建一个新数据库并导入您在前一分钟导出和修改的文件。

现在，您已经为您在文件和数据库这两个方面的实验准备了先前网站的克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:51:24.330

如果您要为网站副本使用不同的主机名或路径，它并不像复制文件和导出/导入 MySQL 数据库那么简单。事实上，在数据库的各个列中都嵌入了绝对 URL。

这里有一个逐步的过程。

[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T00:18:21.043

如果您正在使用 WP MultiSite，您可以避免复制数据库，然后使用 WP 克隆插件之一进行 sql 查找和替换，如前所述。

NS 克隆器 - [http://wpmu.org/clone-sites-within-a-wordpress-multisite-network/](http://wpmu.org/clone-sites-within-a-wordpress-multisite-network/handles)自动为您处理一切，包括 DNS、数据库和主机。然后，根据您的多站点设置，您可以将其部署到新的子文件夹或子域。对于新站点上线后的高级功能，您可以使用[专业版](http://neversettle.it/shop/ns-cloner-pro/)并在实时站点上执行搜索和替换等高级操作。

同样，这仅适用于 MultiSite，但是我强烈建议无论如何都迁移到该架构，以允许您利用 WP multisite 必须提供的所有优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T10:27:59.820

WP Staging 允许您将包括数据库和文件在内的整个站点克隆到主站点的子目录中，只需单击两次即可进行测试： [https ://wordpress.org/plugins/wp-staging/](https://wordpress.org/plugins/wp-staging/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T14:33:15.943

你到底有什么问题？你只需要从你的服务器上下载所有的 worpress 文件。然后创建数据库的本地副本，以便您拥有所有数据。

所有链接在 wordpress 中都是相对的，因此您不会对“真实站点”的链接有任何问题；）

# java - 与 JDO 和 GAE 的多对一关系

> ID：13705128
> 
> 赞同：3
> 
> 时间：2012-12-04T14:27:17.590
> 
> 标签：java, google-app-engine, jdo

我已经搜索了整个站点但是甚至没有一个示例说明如何使用 jdo 建立多对一关系。 [https://developers.google.com/appengine/docs/java/datastore/jdo/relationships](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships)

但我不知道该怎么做。

假设我有这个数据库：

```
Cars(CarID,OwnerID,...)
Owner(OwnerID,...) 
```

我想为一辆新车创建一个新实体——我怎样才能做到？

如果所有者已经在数据库中，我不想为所有者创建另一个实体，但如果他不是，我想创建新所有者。

感谢您提供有关如何处理它的任何示例代码或博客链接。

编辑：您似乎认为它的双向关系。所以我认为你没有很好地理解我。假设我们不是在谈论汽车和车主，而是在谈论流派和歌曲

流派——不需要了解歌曲！宋需要知道他的流派！

我的课程是：

```
public class Genre {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
long id;
@Persistent
String genre; 
```

} 和：

```
public class Song{
long id;
    @Join(name="GENRE_JOIN")
Genre genre; 
```

}

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:29:58.127

所有 GAE 文档都说请参阅 DataNucleus JDO 文档以获取完整详细信息，因此我不明白为什么他们应该提供所有示例。由于您的关系*似乎*（不是您定义的）在 Owner 侧是 1-N BIDIR 关系，在 Car 侧是 N-1 BIDIR 然后[http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/many_to_one .html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/orm/many_to_one.html) JDO 规范也有很多例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:37:44.713

```
class Owner {
    @Persistent(mappedBy = "owner")
    private List<Car> cars;
}

class Car {
    @Persistent
    private Owner owner;
}

Car car = new Car();
//search for the owner.
car.setOwner(owner); 
```

# javascript - 存储选定对象后如何应用更多选择器

> ID：13705132
> 
> 赞同：4
> 
> 时间：2012-12-04T14:27:30.477
> 
> 标签：javascript, jquery, jquery-selectors

我想重新使用 jQuery 选择来进行进一步的子选择。这是我的例子：

```
if ($('#thisId > .thatClass').length > 0) {
    return $('#thisId > .thatClass > a.thatOtherClass').attr('id');
} 
```

当我广泛使用选择时，我希望（至少出于可读性原因）缩短代码以使其看起来类似于以下内容：

```
var selection = $('#thisId > .thatClass');
if (selection.length > 0) {
    var furtherSelection = selection.filter('> a.thatOtherClass');
    return furtherSelection.attr('id');
} 
```

尝试这个我得到一个错误：

> TypeError：进一步的Selection.attr（...）未定义

显然我有问题，也许有人有想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:29:18.933

`children()`而是我们...

```
var selection = $('#thisId > .thatClass');
if (selection.length > 0)
{
    return selection.children('a.thatOtherClass').attr('id');
} 
```

我已经使用`children()`了，因为`>`in 选择器的使用将被弃用（根据下面的评论）。

如果您不是专门寻找子元素，那么您可以`find()`像这样使用...

```
var selection = $('#thisId > .thatClass');
if (selection.length > 0)
{
    return selection.find('a.thatOtherClass').attr('id');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:02:58.723

您可以`.children()`按照 Archer 的建议使用，[并且应该](http://api.jquery.com/child-selector/)使用. `.filter`但根本问题是您在使用`.find`. `("> a.thatOtherClass")`Archer 暗示了这一点，但重要的是要了解除了最佳实践之外，您的构造没有问题。

`filter`不遍历 DOM 树；*它在相同的 DOM 级别*从当前序列中删除元素。所以，当你写这个时：

```
var furtherSelection = selection.filter('> a.thatOtherClass'); 
```

您实际上是在说“满足`'#thisId > .thatClass'` **AND ALSO** `'> a.thatOtherClass'`的元素”。`.thatClass`因此，当您应该测试他们的孩子时，您正在测试您的中间元素。如果您使用`find`或`children`代替，它会起作用：

```
var furtherSelection = selection.find('> a.thatOtherClass');   //works
var furtherSelection = selection.children('a.thatOtherClass'); //also works 
```

在 jsFiddle 上查看这些操作：http: [//jsfiddle.net/jmorgan123/S726f/](http://jsfiddle.net/jmorgan123/S726f/)

我指出这一点是因为 和 之间的区别`.filter`非常`.find`重要，而您真正的问题是您混淆了两者。

# playframework - 交错枚举器播放 2.0

> ID：13705133
> 
> 赞同：2
> 
> 时间：2012-12-04T14:27:32.750
> 
> 标签：playframework, playframework-2.0, enumerators

试图在播放 2.0.4 中了解 Enumerators - 我想将一个 Enumerator 与另一个 Enumerator 交错，但只要第一个 Enumerator 的长度（不包括）。所以：

```
Enumerator("hello", "world") -> "hello" ", " "world"
Enumerator("one", "two", "three") -> "one" ", " "two" ", " "three" 
```

内置交错包括从第一个枚举器的末尾到第二个枚举器的末尾。

```
val commas : Enumerator[String] = {
  Enumerator(", ", ", ", ", ")
}
val words : Enumerator[String] = {
  Enumerator("hello", "world!")
}
Ok.stream(words interleave commas andThen Enumerator.eof) 
```

产生“你好，世界，”而不是“你好，世界”

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:03:26.873

`Enumerators`通常在消耗之前处理，因此在您的场景中，结果是预期的，因为一旦一个 Enumerator 完成，另一个 Enumerator 的其余部分就会被处理。

您似乎需要的是`Iteratee`相应地处理输出和过滤器。[您可以在文档](http://www.playframework.org/documentation/2.0.4/Iteratees)中找到一些示例。

另一种可能的方法是使用`Enumeratee`（参见[文档](http://www.playframework.org/documentation/2.0.4/Enumeratees)）来转换交织的输出。

# sql - SELECT TOP 1 ...一些东西... ORDER BY DES 给出不同的结果

> ID：13705136
> 
> 赞同：1
> 
> 时间：2012-12-04T14:10:00.553
> 
> 标签：sql

```
SELECT TOP 1 Col1,col2
FROM table ... JOIN table2
...Some stuff...
 ORDER BY DESC 
```

给出不同的结果。相比

```
SELECT Col1,col2
FROM table ... JOIN table2
...Some stuff...
 ORDER BY DESC 
```

第二个查询给了我一些行，当我想要这个结果的前 1 个时，我用 TOP 1 子句编写第一个查询。这些都给出了不同的结果。

为什么这种行为不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:37:32.183

这不是很清楚，但我猜你的意思是第一个查询返回的行与第二个查询返回的第一行不同。这可能是因为您的 order by 中有重复的值。

例如，假设您有一个名为 Test 的表

```
+-----+------+
| Seq | Name |
+-----+------+
| 1   | A    |
| 1   | B    |
| 2   | C    |
+-----+------+ 
```

如果你这样做了`Select * From Test Order By Seq`，其中任何一个都是有效的

```
+-----+------+
| Seq | Name |
+-----+------+
| 1   | A    |
| 1   | B    |
| 2   | C    |
+-----+------+

+-----+------+
| Seq | Name |
+-----+------+
| 1   | B    |
| 1   | A    |
| 2   | C    |
+-----+------+ 
```

使用顶部，您可以获得任一行。

拥有 top 1 子句可能意味着查询优化器使用完全不同的方法来生成结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:58:11.817

我将假设您在 SQL Server 中工作，因此 Laurence 的回答可能是准确的。但为了完整起见，这也取决于您使用的数据库技术。

通常，基于索引的数据库（如 SQL Server）将返回按索引排序的结果，具体取决于执行计划的创建方式。但并非所有数据库都使用索引。

例如，Netezza 在没有索引概念的情况下跟踪数据在系统中的位置（Netezza 的系统架构有很大不同）。因此，选择查询的第一条记录将导致结果集中的随机记录浮动到顶部。多次执行相同的查询可能会导致每次的顺序不同。

如果您需要对数据进行排序，那么最好自己强制执行排序，而不是依赖数据库在创建其执行计划时将使用的任意排序。这将使您的结果更可预测。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-04T14:40:16.583

您的第一个查询将获得一个表的第一行并与另一个表进行比较。因此，与普通连接相比，它将返回不同的值。

# c++ - 巴顿-纳克曼 vs std::enable_if

> ID：13705137
> 
> 赞同：5
> 
> 时间：2012-12-04T14:27:43.747
> 
> 标签：c++, operator-overloading, template-meta-programming, c++-concepts

什么是可取的（如果有的话）？

变体 A（Barton-Nackman）：

```
template<class T>
struct equal_comparable {
    friend bool operator == (const T & t1, const T & t2) {
        return t1.equalTo (t2);
    }
};

class MyClass : private equal_comparable<MyClass> {
    bool equalTo (const MyClass & other)  //...
}; 
```

变体 B (std::enable_if)：

```
struct MyClass {
    static const bool use_my_equal = true;
    bool equalTo (const MyClass & other) //...
};

template<class T>
typename std::enable_if<
    T::use_my_equal,
    bool
>::type
operator == (const T & t1, const T & t2) { return t1.equalTo (t2); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:48:42.823

我更喜欢使用[@SteveJessop](http://www.boost.org/doc/libs/1_52_0/libs/utility/operators.htm)在评论中提到的Boost.Operators，它可以使您的第一种方法形式化和自动化。如果您碰巧需要多组运算符（因此需要多重继承），它们还会处理空基优化。与其说是打字的节省，不如说是代码文档/执行的价值，因为这些基类就在类接口的前面。从这个意义上说，它是概念的一种原始方式。

# vb.net - 将 Excel 数据插入 Access，但单元格不包含数据？

> ID：13705138
> 
> 赞同：0
> 
> 时间：2012-12-04T14:27:45.613
> 
> 标签：vb.net, excel, ms-access, insert, epplus

我正在遍历 Excel 工作表中的某些行/单元格，并且某些单元格是空白的。当我尝试插入时，如果一个单元格不包含数据，它会告诉我该特定参数没有默认值。在 Access 中，我已将默认值设置为“=Null”，但仍然收到错误消息。为了防止错误，我是否必须为每个参数执行如下所示的 If 语句？如果可能的话，我想清理我的代码。

```
If worksheet1.GetValue(i, 14) Is Nothing Then
                            cmd.Parameters.Add("@Param1", OleDbType.Char).Value = DBNull.Value
                        Else
                            cmd.Parameters.Add("@Param1", OleDbType.Char).Value = worksheet1.GetValue(i, 14)
                        End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:24:40.230

根据我的经验（尽管是 C#），是的。当您尝试从空单元格中获取数据而不首先检查时，互操作（这是我假设您正在使用的，尽管我不认识该`GetValue()`调用）通常会引发异常。我处理它的方式是将代码包装在一个方法中，并且每次都调用它（对不起，我的 VB 有点生疏）：

```
Public Function GetCellContents(column As Integer, row As Integer) As String

    If worksheet1.GetValue(column, row) Is Nothing Then
        Return ""
    Else
        Return worksheet1.GetValue(column, row)
    End If

End Function 
```

然后你可以这样做：

```
cmd.Parameters.Add("@Param1", OleDbType.Char).Value = GetCellContents(i, 14); 
```

# mysql - 在一个查询中按前一天和后一天对日期进行排序

> ID：13705142
> 
> 赞同：1
> 
> 时间：2012-12-04T14:27:52.100
> 
> 标签：mysql, sorting

（第一：我是法国人，如果我犯了一些语法错误，我很抱歉......）

我有一张放电视节目的桌子。我想在一个查询中搜索此表中的节目，并将结果与​​晚上节目前一天的所有节目进行排序。

我有一个输入名称 fullDateStart，其日期为 DATETIME 格式，用于提取 HOUR()。

我在研究中使用了 LEFT JOIN。这是我的实际要求：

```
SELECT programId, programTitle, COUNT(*) AS score,
ROUND(startDate / 1000) AS start, ROUND(endDate / 1000) AS end
FROM people_appearances AS a
LEFT JOIN programsTable AS b ON a.programId = b.program_id
WHERE peopleId = :id AND timestamp > :twoWeeksAgo AND programId != 0
AND redif = 0 AND channel_id IN(1,2,3,5,6,7,8,9)
GROUP BY programId
ORDER BY score DESC, start DESC
LIMIT 0, 10 
```

在这里我尝试使用 UNION ：

```
SELECT * FROM (
    SELECT fullDateStart, programId, programTitle, COUNT(*) AS score1,
    ROUND(startDate / 1000) AS start, ROUND(endDate / 1000) AS end
    FROM people_appearances AS a
    LEFT JOIN db.epg_programs AS b ON a.programId = b.program_id
    WHERE HOUR(fullDateStart) > 6 AND HOUR(fullDateStart) <= 23
    AND peopleId = 826 AND timestamp > 1353420511000 AND programId != 0
    AND redif = 0 AND channel_id IN(1,2,3,5,6,7,8,9)
    GROUP BY programId

    UNION
    SELECT fullDateStart, programId, programTitle, COUNT(*) AS score2,
    ROUND(startDate / 1000) AS start, ROUND(endDate / 1000) AS end
    FROM people_appearances AS c
    LEFT JOIN db.epg_programs AS d ON c.programId =d.program_id
    WHERE HOUR(fullDateStart) >= 0 AND HOUR(fullDateStart) <= 6
    AND peopleId = 826 AND timestamp > 1353420511000 AND programId != 0
    AND redif = 0 AND channel_id IN(1,2,3,5,6,7,8,9)
    GROUP BY programId
    ) AS s3
ORDER BY score1 DESC,start DESC
LIMIT 0, 10 
```

有人可以帮助我吗？（我尝试使用带有两个请求的联盟 [一个用于白天，一个用于晚上]，但我没有成功对结果进行排序，即使它们在两个请求中......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:46:14.523

您查询中的问题是`order by`. 您首先按分数排序所有内容，然后按开始日期排序。

如果目标是在一天内保留所有内容，请执行以下操作：

```
order by score desc, date(fulldatestart),
         (case when hour(fulldatestart) between 7 and 23 then 1
               else 2
          end),
         hour(fulldatestart) 
```

我为 , 添加了第三个子句`order by`，因此具有相同分数的程序按小时排序。

*如果您想要与前*一天相关联的清晨时间，那么您需要执行以下操作：

```
order by score desc, date(fulldatestart - interval 7 hour),
         hour(fulldatestart - interval 7 hour) 
```

（一旦你减去 7 小时，你就可以按小时按顺序排列。）

# android - Facebook如何使用特定名称对墙贴进行分组

> ID：13705150
> 
> 赞同：0
> 
> 时间：2012-12-04T14:28:37.013
> 
> 标签：android, facebook

我需要上传图片和描述，但它会以以下格式显示。我已经尝试过**我/提要**，但它为每个帖子创建了一个单独的条目。我需要按照图片对商品进行分组，请帮帮我。

![在此处输入图像描述](../Images/6b97f18a2d7c3762a58da440dbd5228c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:25:19.603

您的图片可以是以下两种情况之一：

1-开放图聚合：

您图片中的应用程序可能正在使用 Facebook API 的[Open Graph](https://developers.facebook.com/docs/concepts/opengraph/)部分。Open Graph 背后的想法是允许用户表达更具体、更高级的操作，而不是喜欢、评论和分享。Open Graph 通过让开发人员为应用程序定义自定义操作和自定义对象来做到这一点。Open Graph API 还允许开发人员为应用程序定义[聚合](https://developers.facebook.com/docs/concepts/opengraph/aggregations/)，这就是您的图片可能显示的内容：

> 聚合是时间轴上的摘要故事，由您的应用程序定义，以结构化和有趣的方式展示用户的 Open Graph 活动。

2 - Facebook 聚合

Facebook 通过将重复的内容合并到一个帖子中来聚合内容以创造更好的用户体验。对此的逻辑和时间安排未公开，也未作为 API 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:55:56.633

可以通过创建自己的[操作](http://developers.facebook.com/docs/concepts/opengraph/actions/)和[聚合来实现类似的行为](http://developers.facebook.com/docs/concepts/opengraph/aggregations/)

但这需要用户与您的应用进行直接交互，我不知道您是否属于这种情况。

# php - 用零“0”替换反斜杠“\”

> ID：13705151
> 
> 赞同：1
> 
> 时间：2012-12-04T14:28:43.160
> 
> 标签：php, html, html-escape-characters

> **可能重复：**
> [如何在 PHP 中使用 str_replace() 替换“\”？](https://stackoverflow.com/questions/13141406/how-to-replace-using-str-replace-in-php)

如何用 0 替换反斜杠

我的代码：
`$output = "\x01\x02\x03\x04";
$string = str_replace( '\\' , "0", $output);`

附言。`$output`是一个十六进制字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:30:57.943

你说这`$string`是一个现有的字符串，所以我认为你需要它（双引号而不是单引号）：

```
$output = str_replace("\\", "0", $string) 
```

# java - 从客户端 gwt 读取 web.xml init-params

> ID：13705153
> 
> 赞同：1
> 
> 时间：2012-12-04T14:28:45.563
> 
> 标签：java, google-app-engine, gwt

我有一个正在构建的 gwt appengine 应用程序。它有一个 web.xml 文件，其中包含一些 init-params。在客户端，我正在使用带有“onLoad()”方法的 java 类。这是一个简单的“入口点”。我想在页面加载时从 web.xml 文件中读取这些初始化参数。我知道我可以使用从服务器端读取它们，`getServletConfig().getInitParameter("string")`但我想做的是从客户端读取该 init-param。有简单的方法吗？我读到的所有内容都讲述了从 Servlet 执行此操作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:42:07.463

您可以通过 GWT-RPC 或 GWT JSON 从 Server ( servlet ) 获取这些值

`GWT JSON Turorial`- [https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)

`GWT RPC Tutorial`- [https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)

[您可以在GWT zip 文件](http://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip)的示例文件夹中找到教程示例。

注意：这两种方法各有利弊，您可以根据您的应用范围来决定它们的可行性。

如果 GWT-RPC 在客户端和服务器上是完整的端到端 java，则被广泛使用。

从非 Java 服务器获取数据时，更经常使用 GWT-JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:55:27.047

您是客户端，并且您想要服务器端的信息，因此您需要使用一种技术来做到这一点，servlet 允许您收集信息并将结果发送回您的客户端，客户端将异步处理它.

# c - 如何用空格填充字符串

> ID：13705156
> 
> 赞同：1
> 
> 时间：2012-12-04T14:29:06.340
> 
> 标签：c, string

我正在尝试创建一个转换以下字符串的函数：

```
1110100010000000101000011000011110000000000000000000000000111101110000110101100111 
```

到：

```
1110100010000000 1010 0001 1000 0111 1000 0000 0000 0000 0000 0000 0011 1101 1100 0011 0101 1001 11 
```

（四个 1/0 的组）

一些功能如下：

```
convert(char *src_buffer,char *dst_buffer,int offset){

} 
```

在上述情况下，“偏移量”为 16。

这是我到目前为止尝试过的代码：

```
char *tmp=(char*)malloc(1000*sizeof(char));
strncpy(tmp,buffer,i);
tmp[i+1]=' ';
for(int j=0;j<sizeof(buffer);j++){
    strcpy(tmp+sizeof(tmp),buffer+(4*j));
    tmp[(5*j)+1]=' ';
} 
```

但这只是行不通...

请帮忙！我希望有一个C大师可以帮助我。

这是我一直在处理的一些更新代码：

```
char *tmp=(char*)malloc(1000*sizeof(char));
strncpy(tmp,buffer,offset);
tmp[offset+1]=' ';
int k=offset+1;
for(int j=i;j<strlen(buffer);j+=4){
    tmp[k]=buffer[j];
    tmp[k+1]=buffer[j+1];
    tmp[k+2]=buffer[j+2];
    tmp[k+3]=buffer[j+3];
    tmp[k+5]=' ';
    k+=5;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:35:32.653

将第一个`offset`字符复制到临时缓冲区。然后逐个循环剩余原始缓冲区中的每个字符，将它们复制到临时缓冲区中。每四个循环都会向临时缓冲区添加一个空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:45:15.620

尝试这样的事情：

```
int len = strlen(src);
char *dst= malloc(len * sizeof *dst * 2);
/* copy the first (offset) bytes */
strncpy(dst, src, offset); 

for(i=j=offset; j<len; i++, j++){
    /* add a whitespace and once every 5 characters */
    if ((i-offset)%5 == 0) { 
       dst[i++] = ' ';
    }
    dst[i] = src[j];
}
/* null-terminate string */
dst[i]=0; 
```

作为旁注，如果每个字符后跟一个空格（不是这种情况），那么您最多需要原始字符串的两倍，因此无需分配 1000 个字节。

# php - 将多选框选择发布到数据库仅添加第一个选定项目

> ID：13705157
> 
> 赞同：0
> 
> 时间：2012-12-04T14:29:08.367
> 
> 标签：php, mysql, insert, implode

我正在使用以下多选框从用户那里获取输入，然后将其发布到我的 php 表单中，将其添加到数据库中，问题是，如果用户选择多个字段，我添加的只是第一个选择我仍然只得到第一个字段。

如果用户选择让我们说互联网、绘图、数学，我希望将其放入数据库，此时插入的所有内容都是互联网，或者列表中选择的第一件事。

我的表格是这样的>>

```
 <form action="../files/addtodb.php" method="post" style="width:800px;">
    <select name="whatisdeviceusedfor[]" size="1" multiple="multiple" id="whatisdeviceusedfor[]">
        <option value="games">Games</option>
        <option value="takingphotos">Taking Photos</option>
        <option value="maths">Maths</option>
        <option value="reading">Reading</option>
        <option value="drawing">Drawing</option>
        <option value="internet">Internet</option>
        <option value="other">Other (enter more info below)</option>
      </select>
      <input type="submit" name="submit" id="submit" value="Submit">
      </form> 
```

php端是这样的>>

```
 <?php

 // Implode what is device used for
$usedfor = $_POST['whatisdeviceusedfor'];
$arr = array($usedfor);
$whatisdeviceusedfor = implode(" ",$arr);

// Insert posted data into database
mysql_query("INSERT INTO itsnb_year5questionaire (whatisdeviceusedfor) VALUES   '$whatisdeviceusedfor'") or die(mysql_error()); 

   ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:40:28.033

您已经通过选择获得数组，因此您不需要`$arr = array($usedfor);`再次使用它

试试看嘛

```
$usedfor = $_POST['whatisdeviceusedfor'];

$whatisdeviceusedfor = implode(" ",$usedfor); 
```

或者

```
$usedfor = $_POST['whatisdeviceusedfor'];

$strings ='';
foreach ($usedfor as $item){
    $strings .=' '. $item;
}
echo $strings; 
```

和

```
 <select name="whatisdeviceusedfor[]" size="5" multiple="multiple" id="whatisdeviceusedfor[]">
                                           ^^             
                                           ||change to option you want to select 
```

我已经改变了`size="5"`，所以它现在一次选择 5 个……你只有 1 个，所以它一次只能选择 1 个

结果

![在此处输入图像描述](../Images/32c7c5eb8d88ebb5e4a7cbbcddf77b6e.png)

## 警告

您的代码容易受到 **SQL 注入**的影响 ，也不`mysql_*`推荐使用函数，`PDO`或者`MySQLi`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:47:24.177

Because `$usedfor` is contain the array you can directly use it in `foreach` to save the each value in the value.Try this it may help you:

```
<?php   
$usedfor = $_POST['whatisdeviceusedfor'];

foreach($usedfor as $arr){
mysql_query('INSERT INTO itsnb_year5questionaire(whatisdeviceusedfor) VALUES("'.$arr.'"') or die(mysql_error()); 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:40:50.750

`SELECT`如果您通过 a或 via选择了多个项目`CHECKBOXES`，则表单将返回类似数组的数据结构。您将始终需要遍历该数据并将每个项目单独存储到数据库中或在插入之前将值连接到字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T14:54:50.557

先换个`size = "5"`好看的单子

然后尝试这样做（如果你喜欢它的第二个选择）

```
if ($_POST) {

  // post data

 $games = $_POST["games"];
 $takingphotos = $_POST["takingphotos"];
 .
  ...

  // secure data

  $games = uc($games);
  $boats = uc($takingphotos);
  .
  ...
 }   

  // insert data into database

  $query = "INSERT INTO itsnb_year5questionaire (games, takingphotos,....)   
             VALUES('$games','$takingphotos',......)";
     mysql_query($query) or die(mysql_error());

    echo 'Thanks for your select!'; 
```

# c# - 为什么json序列化器不符合多态性？

> ID：13705158
> 
> 赞同：3
> 
> 时间：2012-12-04T14:29:13.437
> 
> 标签：c#, oop, windows-8, polymorphism, .net-4.5

我在 .NET 4.5 Windows 商店应用程序中使用库存 JSON 序列化程序 -

```
System.Runtime.Serialization.Json.DataContractJsonSerializer 
```

我有一个由 API 提供者提供的类说

```
class A { public DateTime Date {get;set} } 
```

我想通过这样做来隐藏日期字段（注意 -**新**关键字）：

```
class AEx : A { public new string Date {get;set} } 
```

但我得到了例外：

> 类型“AEx”不能使用 DataContractJsonSerializer 序列化，因为数据成员“日期”在其类型层次结构中重复。

我明白它的作用.. 然而我的问题**不是**它是怎么做的**，而是为什么？**

从逻辑上讲，它应该与多态等编程特性兼容。**为什么这个类被忽略了？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T14:32:01.453

您的类基本上包含两个同名的属性。因此，如果您尝试*反序列*化一些包含该属性名称的 JSON，则无法知道要设置哪个属性。

同样，在*序列化*该类型的对象时，您有两个值需要使用相同的属性名称进行序列化 - 您*希望*JSON 看起来像什么？

从根本上说，具有两个同名属性的类型与普通名称/值对格式的序列化不兼容。（一种更高级的序列化机制，可以指定哪个属性与哪个声明类相关联，但 JSON 不这样做。）

# c++ - 遇到 C++ Square 类的问题。成员函数实现与声明

> ID：13705161
> 
> 赞同：4
> 
> 时间：2012-12-04T14:29:15.490
> 
> 标签：c++, class

我的最后一个问题在 2 分钟后关闭。我只是在成员函数方面寻求帮助。我应该让成员函数检查以下内容：

1.  广场是否在另一个广场之外；
2.  该正方形是否包含另一个正方形；
3.  该方格是否包含在另一个方格中；
4.  正方形是否在外部与另一个正方形相切（即，它们的边界是否接触，但除了那些边界点之外，它们彼此外部）；
5.  正方形是否在内部与另一个正方形相切（也就是说，它们在边界上有共同的点，但除了那些边界点，一个正方形包含在另一个正方形中）；
6.  正方形的边界是否与另一个正方形的边界相交。

我的私人成员是：双x，y；

那么我是否应该使用公共成员函数，同时使用 x 和 y 来计算周长和面积？

这就是我到目前为止所拥有的：头文件

```
#include  <iostream>
#include  <cmath>
class Square
{
int x, y;
int  size;

public:
Square(int x, int y, int size) : x(x), y(y), size(size) { }
~Square() {};
bool isExternal(const Square& rhs);
bool contains(const Square& otherSquare);
bool iscontained(const Square& otherSquare);

bool borderintersect (const Square& otherSquare);
bool bordertangent (const Square& otherSquare);
} 
```

实施

```
#include "Square.h"

bool Square::isExternal(const Square& rhs) const {
    return (((x < rhs.x) || ((x + size) > (rhs.x + rhs.size)) &&  ((y < rhs.y) || ((y + size) > (rhs.y + rhs.size)) 
};
bool Square::contains(const Square& otherSquare)const {
};
bool Square::iscontained(const Square& otherSquare)const {
};

bool borderintersect(const Square& othersquare)
{
// If this square's bottom is greater than the other square's top
if ((this->y - (this->size / 2)) > (othersquare->y + (othersquare->size / 2)))
{
    return (false);
}
// the reverse
if ((this->y + (this->size / 2)) < (othersquare->y - (othersquare->size / 2)))
{
    return (false);
}
// If this square's left is greater than the other square's right
if ((this->x - (this->size / 2)) > (othersquare->x + (othersquare->size / 2)))
{
    return (false);
}

if ((this->x + (this->size / 2)) < (othersquare->x - (othersquare->size / 2)))
{
    return (false);
}
return (true);

bool Square::bordertangent (const Square& otherSquare)const {
}; 
```

测试程序

```
#include "Square.h"
#include <iostream>
using namespace std; 
```

  int main() {

```
Square sq1(0, 0, 10);
Square sq2(1, 1, 10);

    if(sq1.isExternal(sq2)) {
    cout<<"Square 1 is external to square 2"<<endl;
}

if(sq1.contains(sq2){
    cout<<"Square 1 contains square 2"<<endl;

return 0;
} 
```

我是否应该将其包含在头文件中以获得坐标的 x 和 y 以及大小？

```
double  getX( )  const {  return x;  }
double  getY( )  const {  return y;  }
double  getSize( )  const {  return size;  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:46:57.820

It seems like you're tripping up on where to start with implementing the class so I'll give you some guidance there. All of your questions deal with checking the relative positions of two squares in some coordinate space. To answer them, you will need to know two things about each square:

*   Position (`x`, `y` coordinates (often a corner of the square))
*   Size (`size`)

Assuming you definitely mean square, then the width and height are equal, so you only need one variable to store the size. If you can actually have rectangles, then you'll need `width` and `height`. These will need to be members of your `Square` class because each `Square` should have its own position and size. You *do not* need to store the coordinates of each corner of your square because you can work them out from the position and size - storing data that you can work out from data you already have is known as *redundancy* and is generally something you want to avoid. Here is how that would look in two different coordinate systems (one where `y` goes down and the other where `y` goes up):

```
 x-->
y                size
|   (x,y).___________________
v        |                   |
         |                   |
         |                   |
         |                   |
    size |                   |
         |                   |
         |                   |
         |                   |
         |___________________| (x+size, y+size) 
```

* * *

```
 ___________________ (x+size, y+size)
         |                   |
         |                   |
         |                   |
         |                   |
    size |                   |
         |                   |
         |                   |
^        |                   |
|   (x,y).___________________|
y                size
  x--> 
```

As an alternative, you could store *two* positions which are two opposite corners of your square. However, if you really are dealing with *squares*, not rectangles, you will need to manually enforce the invariant that the points must be the same distance away from each other along both axes. Rectangles would not have this invariant so this would be more applicable for them, but then operations such as translation become more complicated (you would now have to move two points rather than just one).

You will not need `perimeter` or `area` member functions. None of the questions require you to know either of these things. All of the questions can be answered by doing simple comparison between the positions and sizes of the two squares.

Whether you have them be private or not is a design issue. By making them private, you can control access to them through the `Square`'s interface. You could then provide public member functions so that you can check for answers to some of your questions, such as `bool Square::contains(const Square& otherSquare)` which you would call like `square.contains(otherSquare)`. Here's the beginnings of a possible class definition:

```
class Square
{
 private:
  int x, y, size;
 public:
  Square(int x, int y, int size) : x(x), y(y), size(size) { }
  bool contains(const Square& other)
  {
    // Do comparisons between x, y, size and other.x, other.y, other.size
  }
  // ...
}; 
```

Alternatively, you could have the functions at namespace scope (not members of `Square`) and either make them friends of `Square` or make the position and size members of `Square` public. For such a simple example, this will not be a problem.

* * *

> Should I include this in the header file in order to get both the x and y of the coordinate and the size?
> 
> ```
> double  getX( )  const {  return x;  }
> double  getY( )  const {  return y;  }
> double  getSize( )  const {  return size;  } 
> ```

These kinds of functions are commonly known as *getters*. They provide access to private member variables of a class. In your case, you do not need to provide these getters because the functions you are writing are member functions of `Square`. The member functions of `Square` have access to the private members of any other `Square`, so you don't need to get access through these getters.

However, if you wanted some *other* class to access the `x`, `y`, and `size` values for a given `Square`, then you would need to provide getters (or make the members public).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:46:51.533

Start with something like this, and go from there

```
class Square
{
    double m_x, m_y;
    double m_length;

    public:
    Square(double x, double y, double length) : m_x(x), m_y(y), m_length(length) {}
    ~Square() {};

    bool isExternal(const Square& rhs);
}

--- implementation
bool Square::isExternal(const Square& rhs) 
{
    bool retval = true;
    // do some calculations ..
    return retval;
}

--- main

int main(void)
{
    Square sq1(0, 0, 10);
    Square sq1(1, 1, 10);

    if(sq1.isExternal(sq2) {
    }
} 
```

# python - 修改参数作为python中的副作用

> ID：13705162
> 
> 赞同：5
> 
> 时间：2012-12-04T14:29:17.093
> 
> 标签：python, function, parameter-passing

> **可能重复：**
> [Python：如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

我正在尝试编写一个修改传递参数之一的函数。这是当前代码：

```
def improve_guess(guess, num): 
  return (guess + (num/guess)) / 2

x = 4.0
guess = 2.0
guess = improve_guess(guess, x) 
```

但是，我想以不必进行最终分配的方式编写代码。这样，我可以打电话：

```
improve_guess(guess,x) 
```

并在猜测中获得新值。

（我故意没有提到通过引用传递，因为在我的网络搜索过程中，我发现了很多关于该主题的学术讨论，但没有明确的方法。我真的不想使用全局变量或封装在列出这个。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T14:34:27.347

你不能直接这样做，因为整数和浮点类型在 Python 中是不可变的。

您*可以*包装`guess`成某种可变结构（例如列表或自定义类），但这很快就会变得非常难看。

PS我个人真的很喜欢它的明确性质，`guess = improve_guess(guess, x)`因为它毫无疑问地确定了正在修改的内容。我什至不需要知道任何事情`improve_guess()`来解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T14:34:12.560

但这是唯一的两种方法：要么使用全局，要么使用像列表这样的可变类型。您不能在 Python 中修改非可变变量：这样做只会将本地名称重新绑定到新值。

如果您真的不喜欢包装在列表中，您可以创建自己的类并传递一个可变的实例，但我看不出这样做有什么好处。

# php - preg_replace 双重替换

> ID：13705170
> 
> 赞同：3
> 
> 时间：2012-12-04T14:29:28.430
> 
> 标签：php, regex, preg-replace

我从正则表达式中得到了一些意想不到的结果，这意味着要替换命名空间上的类名。替换似乎发生了两次，因此被替换的类名是重复的（参见下面的示例）。

我实际上已经通过将 reg ex 更改为匹配 1 或更多 ( `+`) 而不是 0 或更多 ( `*`) 来解决问题，这实际上对我想要的更准确。

但是，我对为什么我首先遇到问题感到有些困惑。

这是问题的一个例子：

```
$classns  = 'components\groups\GroupsController';
$newclass = 'GroupsAccess';
$classns = preg_replace('/[^\\\\]*$/', $newclass, $classns);
echo $classns; 
```

结果

```
components\groups\GroupsAccessGroupsAccess 
```

预期的

```
components\groups\GroupsAccess 
```

* 是否有可能匹配单词边界或类似的东西？

对我来说令人困惑的部分是使用相同正则表达式的 preg_match 只显示一个结果，因此它似乎是 preg_match 如何运行正则表达式的特定内容。

例如

```
preg_match('/[^\\\\]*$/', $classns, $m);
var_dump($m); 
```

结果

```
array(1) { [0]=> string(12) "GroupsAccess" } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:45:10.087

不匹配单词边界，`*`它匹配**空字符串**。

你的表达最初是匹配的

> 组件\组\组**控制器**

并且`$`是一个与位置匹配的锚点，并且在字符串的结尾`\n`之前（或在字符串的结尾之前）。

因此，在第一次匹配之后，正则表达式解析器的位置在最后一个“r”之后和字符串结尾之前，当它再次尝试匹配您的正则表达式时。它会再找到一个匹配 ==> 0 次出现的`/`（空字符串），然后是字符串的结尾。

然后它继续前进，识别字符串的结尾并完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:55:57.250

缩小范围，这也显示了两个匹配项：

```
preg_match_all('/a*$/', 'a', $m);` 
```

Python 具有相同的行为：

```
>>> re.findall('a*$', 'a')
['a', ''] 
```

Perl 也是如此：

```
>>> my @m = 'a' =~ /a*$/g;
>>> foreach (@m) { print "$_\n"; }
a
<blank> 
```

正则表达式引擎似乎与它后面`'a'`的空字符串都匹配`''`。从技术上讲，这是正确的，尽管令人惊讶。`'a'`是一个锚定在搜索字符串末尾的字符串，`''`.

匹配的一个基本规则是匹配不重叠。一旦找到匹配项，正则表达式引擎会在前一个匹配项结束时继续搜索下一个匹配项。我没想到的是锚`$`可以被重复使用，大概是因为它是一个零宽度的断言，而不是一个实际的子字符串匹配。

# kendo-ui - KendoGrid 带有一个新的自定义 kendo ui 小部件

> ID：13705171
> 
> 赞同：1
> 
> 时间：2012-12-04T14:29:35.377
> 
> 标签：kendo-ui, jquery-widgets

请指导我如何制作自定义剑道 ui 小部件，就像您可以参考一些教程或任何东西一样。其次，主要问题是我想使用剑道网格来使用 webapi，并且我想在一个小部件中使用它，并将数据源传递给这个小部件。

基本上我想制作一个小部件，它将使用特定的 url 使用 webapi，并将返回一个我可以添加到这个 kendogrid 小部件的数据源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:59:43.063

谷歌搜索了一下我刚刚发现：

[创建自定义 Kendo UI 插件](http://www.kendoui.com/blogs/teamblog/posts/12-04-03/creating_custom_kendo_ui_plugins.aspx)

[创建一个 DataSource Aware Kendo UI 小部件](http://www.kendoui.com/blogs/teamblog/posts/12-04-10/creating_a_datasource_aware_kendo_ui_widget.aspx)

[从自定义小部件继承](http://www.kendoui.com/blogs/teamblog/posts/12-10-16/inheriting_from_custom_widgets.aspx)

[创建一个 Kendo UI MVVM 小部件](http://www.kendoui.com/blogs/teamblog/posts/12-04-24/creating_a_kendo_ui_mvvm_widget.aspx)

我认为所有这些博客都应该对您有所帮助（我已经编写了几个小部件，并且在这里找到了所有我需要的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:01:51.957

除了@Emiliano 的链接，Kendo Music Store 演示应用程序还包含一个绑定到 DataSource 的自定义 Widget，您可以将其视为示例：

现场演示网站：[http ://www.kendouimusicstore.com/](http://www.kendouimusicstore.com/)

源代码：[https ://github.com/telerik/kendo-music-store](https://github.com/telerik/kendo-music-store)

自定义小部件来源：[MvcMusicStore/Scripts/App/kendo-cart-menu-widget.js](https://github.com/telerik/kendo-music-store/blob/master/MvcMusicStore/Scripts/App/kendo-cart-menu-widget.js)

此自定义小部件的文档：[http ://docs.kendoui.c​​om/tutorials/ASP.NET/Kendo%20Music%20Store/Music%20Store%20Web/kendo-music-store-web-cart-menu-widget](http://docs.kendoui.com/tutorials/ASP.NET/Kendo%20Music%20Store/Music%20Store%20Web/kendo-music-store-web-cart-menu-widget)

* * *

如果您打算使用 WebAPI，您可能需要先[阅读这篇文章（The Facts On Using Kendo UI With ASP.NET WebAPI）](http://www.kendoui.com/blogs/teamblog/posts/12-11-29/the_facts_on_using_kendo_ui_with_asp_net_webapi.aspx)。“使用 WebApi”是一个非常广泛的声明，缩小您的方法将是第一步。

# javascript - 在 Fusion Tables 地图中实现自动填充、地理位置和方向

> ID：13705177
> 
> 赞同：1
> 
> 时间：2012-12-04T14:30:04.940
> 
> 标签：javascript, geolocation, google-fusion-tables, infowindow, autofill

[我在http://northdakotarigsmap.com/new13](http://northdakotarigsmap.com/new13)有一个演示交互式地图，我快要弄清楚了。在其中我有一个查询融合表的自动完成字段，并且在选择查询值后，它应该过滤，因此只显示 1 个地标。
只是，搜索字段的点击事件没有做任何事情。

[我在http://northdakotarigsmap.com/GoogleExAndRigs](http://northdakotarigsmap.com/GoogleExAndRigs)有一个更简单的例子，我正在工作，但我只能让默认的融合表信息窗口工作，我想要一个选项卡式窗口和 /new13 上的方向。

我不知道从这里做什么。诚然，我是一个新手，我大多只是修改代码，直到我让它工作，所以我提前为任何丑陋道歉。

我添加了一个错误处理程序，如果拒绝地理定位，它可以工作（有点）。我喜欢用于页面和自动填充的地理定位代码，但我不知道如何使用 /new13 上的路线服务和自定义信息窗口（此时您必须接受地理定位才能查看信息窗口的外观）。

归根结底，我需要的是一个 watchPosition 类型的地理位置，它会随着用户的移动而更新，一个自定义信息窗口，它允许你从用户当前位置获取方向到融合表标记，以及一个融合的自动过滤器将仅过滤表上请求的标记的表。

# php - File_exists 与被抑制的包含，这是在 PHP 中失败的更快方法

> ID：13705179
> 
> 赞同：2
> 
> 时间：2012-12-04T14:30:14.087
> 
> 标签：php, optimization, file-io

**TL;博士**

`file_exists`执行 a或检查返回值`@include`（即抑制错误）是否更快？

在这种情况下，您可能会假设我使用的是绝对路径而不是依赖于`include_path`解析。

**精心设计的版本**

有了框架和/或软件在其引导过程中的所有条件代码，我开始想知道在不牺牲优雅的情况下最快的失败方式。我有一个特定的用例，这个想法进入了我的脑海，即包含一个不一定存在的配置文件。

无论如何，这两个操作都会进行统计，因此无法避免磁盘访问。后一个选项具有在成功时读取和解析文件的额外好处，所以在我看来，这已经是一个很大的好处。

这确实是一种极端的微优化，特别是在我的情况下，它只有一个文件，但这个问题仍然让我感到头疼，我不知道如何自己正确地测试它。

**接受后的蛮力测试**

得到正确答案后，我进行了一些蛮力测试。我以前不想这样做，因为我想从现场得到知情的答案。另外，我不想仅仅基于我的蛮力测试，因为我完全不确定这是测试这个的正确方法。（实际上，我很确定它不是。）

我所做的是运行以下代码片段：

```
<?php
$rounds = 1e6;
$start = microtime(true);

while ($rounds--) {
    @include "i-dont-exist";
    clearstatcache();
}

echo microtime(true) - $start, PHP_EOL; 
```

...和...

```
<?php
$rounds = 1e6;
$start = microtime(true);

while ($rounds--) {
    file_exists("i-dont-exist");
    clearstatcache();
}

echo microtime(true) - $start, PHP_EOL; 
```

...和...

```
<?php
$rounds = 1e6;
$start = microtime(true);

while ($rounds--) {
    @include "i-exist";
    clearstatcache();
}

echo microtime(true) - $start, PHP_EOL; 
```

...和...

```
<?php
$rounds = 1e6;
$start = microtime(true);

while ($rounds--) {
    if (file_exists("i-exist")) @include "i-exist";
    clearstatcache();
}

echo microtime(true) - $start, PHP_EOL; 
```

结果是：

**不存在的文件**

`@include`: 27.090675830841
`file_exists`: 1.0596489906311

**现有文件**

`@include`: 19.758506059647
`file_exists + include`: 22.083800077438

我们可以从中得出什么结论？好吧，至少，根据[@goldencrater 答案](https://stackoverflow.com/a/13705810/109302)中提供的链接，抑制错误是昂贵的。

一般来说，我认为抑制错误也是愚蠢的——除非它是一个明智的选择，一个我认为我的用例验证的标准。

如果在包含文件失败后您将失败，在我看来，从包含中抑制错误是合理的，因为失败的成本只能根据失败的请求来推断。（即错误不会被抑制和忽略。）在失败的请求上付出沉重的代价比在每个请求上付出小代价要糟糕得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:02:54.673

尽管错误抑制 (@) 本身具有巨大的开销，但消除 file_exists 调用总是更快。

Smarty 模板引擎背后的人将他们的整个代码库更改为使用 @ 而不是 file_exists （和类似的）检查，并最终显着提高了速度。这是其中一位作者的博客文章，详细介绍了更改：[http](http://blog.rodneyrehm.de/archives/12-Improving-Disk-IO-in-PHP-Apps.html) ://blog.rodneyrehm.de/archives/12-Improving-Disk-IO-in-PHP-Apps.html 。

# .net - Silverlight .xap 压缩/解压缩问题

> ID：13705187
> 
> 赞同：1
> 
> 时间：2012-12-04T14:30:35.487
> 
> 标签：.net, silverlight, iis, powershell, xap

我正在处理应该更改 ServiceReference.ClientConfig 中的端点配置的 powershell 脚本，但今天我遇到了一个问题：当我在一个临时文件夹中提取所有`xap`内容（据我所知`xap`- 重命名`zip`的存档）时，使用 config 和 zip 完成所有工作它回来了，silverlight 预加载器不加载应用程序（托管在 IIS 中）。如果我什至只是简单地解压缩并压缩（使用 WinRar/7Zip）它，它就不会加载。但是，如果我打开`xap`使用`WinRar`并进行所有更改而不在临时文件夹中解压缩内容，它就可以正常工作。

也许有人知道有关此问题的任何信息/解决方法？

ps 我使用的几行代码（powershell）

```
expand-archive -path $xapPackagePath -outputpath $xapExpandedTmpPath -force
write-zip -path (gci ($xapExpandedTmpPath + "\") -rec) -outputpath ($xapPackagepath) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:41:45.677

我想知道重新压缩时使用的特定类型的 zip 压缩是否存在问题。

您可以查看这篇文章，了解使用代码创建 xap 的建议方法：

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/67d9ce4d-285c-42ee-b4e0-d5640ca4f6a6/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/67d9ce4d-285c-42ee-b4e0-d5640ca4f6a6/)

# java - 如何将图像从java bean添加到 显示 <p: 0="" 331="" tree我做：="" <p:tree="" id="id" value="#{beanSession.rootAlpha}" var="node" selection="#{beanSession.selectedNode}" selectionmode="single" dynam="" 问问题="" 2012-12-04t14:30:47.257="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 显示<p:="" dynamic="true" cache="false">在我的java bean中我使用了： private TreeNode rootAlpha; …… 输出结果： >(not image here) A > (image) ALLEMAGNE >(image) BERLIN >ALGERIA > B > C ... 我想在子节点 ex 上添加一个图像（图标）：ALLEMAGNE 而BERLIN不是在父节点 ex A B C... 你说这$string是一个现有的字符串，所以我认为你需要它（双引号而不是单引号）： $output = str_replace("\\", "0", $string) javajsfprimefacesjstl 4 1 回答 1 This answer is useful 0 响应是这样添加类型： 在 java bean 中，我们必须在构造树时添加这种类型：以 seconde noode 为例：// 2eme noeud DefaultTreeNode node2 = newDefaultTreeNode("B", "ALLEGMAGNE", node1); 于 2012-12-04T16:42:39.303 回答 Related 2 c# - 在 WCF 服务中使用大量数据后清理内存 2 javascript - 如何在 Ember.pre4 版本中从普通类访问控制器？ 1 django - 用于链接模板中相关数据的 Django 查询 2 c# - 如何从其他应用程序捕获拖放 6 git-submodules - 带有子模块的 git 存档导出（git 存档全部/递归） 3 c# - 身份验证和导航栏 1 mysql - 别名多个“AS”语句 - 缩短语法数量 - 不必为每个别名都说“AS”？ 0 ruby-on-rails-3 - simple_form 在表单字段的名称中创建括号 3 python - 用正则表达式替换两个标签之间的所有内容 1 jquery - 遍历 DOM 并移除一个类 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:>

> ID：13705195
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, jsf, primefaces, jstl

显示`<p: tree`我做：

```
<p:tree id="id" value="#{beanSession.rootAlpha}" var="node" selection="#{beanSession.selectedNode}" selectionMode="single"dynamic="true" cache="false">
    <p:treeNode>
        <h:outputText value="#{node}" />
    </p:treeNode>
</p:tree> 
```

在我的java bean中我使用了：

```
 private TreeNode rootAlpha; 
```

……

输出结果：

```
>(not image here) A
   > (image) ALLEMAGNE
      >(image) BERLIN
  >ALGERIA
> B
> C
... 
```

我想在子节点 ex 上添加一个图像（图标）：`ALLEMAGNE` 而`BERLIN`不是在父节点 ex `A B C`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:42:39.303

响应是这样添加类型：

```
<p:tree id="id" value="#{beanSession.rootAlpha}" var="node" selection="#{beanSession.selectedNode}" selectionMode="single"dynamic="true" cache="false">
    <p:treeNode>
        <h:outputText value="#{node}" />
    </p:treeNode>
    <p:treeNode type="B">
        <h:outputText value="#{node}" />
    </p:treeNode>
    <p:treeNode type="C">
        <h:outputText value="#{node}" />
    </p:treeNode>
</p:tree> 
```

在 java bean 中，我们必须在构造树时添加这种类型：以 seconde noode 为例：// 2eme noeud

```
DefaultTreeNode node2 = newDefaultTreeNode("B",                                     "ALLEGMAGNE", node1); 
```

# javascript - 解析 Javascript 数组

> ID：13705203
> 
> 赞同：2
> 
> 时间：2012-12-04T14:31:06.393
> 
> 标签：javascript, jquery, arrays

我有一个数组作为链接上的属性。

这是数组

```
images="["one.jpg","two.jpg"]" 
```

我将如何解析这个数组并将它读回给我 one.jpg,two.jpg？

这就是我现在正在做的事情，它给了我一个错误。我不相信 json 解析是这里需要的。

```
var imgs = $("#"+number).attr("images");
var imgList = jQuery.parseJSON(imgs); 
```

编辑：实际代码

```
var number = $(this).attr("data-id");

var url = $("#"+number).attr("url");
$(".portfolio-url").html("<h3 class='pacifico'>url</h3><p><a href='http://"+url+"' target='_blank'>"+url+"</a></p>");

var cli = $("#"+number).attr("client");
$(".portfolio-client").html("<h3 class='pacifico'>client</h3><p>"+cli+"</p>");

var pgs = $("#"+number).attr("pages");
pgs = pgs.replace(/\[/g,"");
pgs = pgs.replace(/\]/g,"");
pgs = pgs.replace(/\"/g,"");
var pages = new Array();
pages = pgs.split(",");

var img = $("#"+number).attr("images");
img = img.replace(/\{/g,"");
img = img.replace(/\}/g,"");
img = img.replace(/\"/g,"");
var images = new Array();
images = img.split(",");

var portSkills = "<h3 class='pacifico'>skills</h2>";
portSkills += "<p>";
for (i=0;i<pages.length;i++) {
if (pages[i] != "Clients") {
var finalPage = "";
for (j=0;j<pages[i].length;j++)
{
var ch = pages[i].charAt(j);
if (ch == ch.toUpperCase()) {
finalPage += " ";
}
finalPage += pages[i].charAt(j);
}
portSkills += finalPage+"<br />";
}
}
portSkills += "</p>";
$(".portfolio-skills").html(portSkills);

var imgs = $("#"+number).attr("images");
var imgList = jQuery.parseJSON(imgs); 
```

基本上，它通过参数循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:08:48.253

我鼓励您将属性值格式修改为以下内容：

```
<div id="one" data-images="file1.jpg,file2.jpg">Foo, Bar</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

注意这里我使用了一个有效的`data-`属性，这个属性的值只是一个逗号分隔的文件名列表。无需放置`[`或`]`放入此值即可获取数组。

现在，要获取您的数组：

```
var images = $("#one").data("images").split(","); 
```

这导致以下数组：

```
["file1.jpg", "file2.jpg"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:38:51.483

不要将那种字符串放在属性中，您可以只放置一个逗号分隔的字符串。（你可以使用数据属性。）

例如：

```
<a id="foo" data-images="one.jpg,two.jpg">foo</a> 
```

那么你可以通过以下方式获得它：

```
var imgList = $('#foo').data('images').split(','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:33:01.870

```
for (var i = 0; i < images.length; i++) {
    var image = images[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:33:58.970

对于初学者：

`images = ["one.jpg", "two.jpg"];`是一个数组，你的无效。

让它读回给你

```
for(image in images)
    console.log(images[image]); 
```

或 jQuery 方式

```
$.each(images, function(index){
        console.log(images[index]);
}); 
```

如果它是你需要拆分的字符串，那么当然是如果字符串看起来像这样

```
var img = '["one.jpg", "two.jpg"]';

var images = img.replace(/\[|\]|"| /g,'').split(','); 
```

这将为您提供一个从看起来像数组的字符串解析的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T14:45:14.730

试试这个`join()` [方法：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

```
images.join();

=> "one.jpg,two.jpg"

images.join(", ");

=> "one.jpg, two.jpg" 
```

**编辑：**声明你的`Array`：

```
var images = ["img1", "img2", "img3"]; 
```

或者

```
var images = new Array("img1", "img2", "img3"); 
```

然后您可以使用该`join()`方法，如果仍然不起作用，请尝试[以下](https://stackoverflow.com/questions/332422/how-do-i-get-the-name-of-an-objects-type-in-javascript)方法：

```
// should be true, if not then you don't have an Array
var isArray = (images instanceof Array); 
```

# java - 多个 DAO 不完全实现设计

> ID：13705205
> 
> 赞同：0
> 
> 时间：2012-12-04T14:31:22.520
> 
> 标签：java, spring, hibernate, design-patterns, dao

我有 spring/hibernate 网络应用程序。我使用 Hibernate 来实现几乎所有的 DAO。但是，有时我需要使用基于 JDBC 的实现。对于每个 DAO，我都有一个接口，比如 ProductDao'，并且我有一个 ProductDaoHibImpl 或 ProductDaoJdbcImpl 的实现。问题是，比如说，如果我有一个带有两种方法的 DAO，其中一种方法可以使用 Hibernate 实现，而另一种方法可以使用 jdbc 实现。什么是最好的班级设计。

我想出了这些设计：

1.  一个接口两个实现，在每个类中没有实现的方法中抛出运行时异常。（即当调用hibernate类中实现的方法时，jdbc实现会抛出运行时异常）
2.  将两个实现合并到一个类中
3.  在两个类中实现所有方法

然而，

*   设计1是反OO原则。
*   设计 2 会破坏我的 DAO 实现的一致性，并且会降低类本身的可读性，并且会邀请其他开发人员继续在没有组织的情况下向它添加方法。
*   设计 3 增加了不必要的工作，因为无论如何我都会使用更有效的实现。

对于多个 DAO 不完整的实现，有什么更好的设计？

例子：

```
public interface RxDao {

    public Rx getRxById(int rxId);

    public Map<String, List<Notification>> getAllRxNotificationsGroupedByFacility();
} 
```

`getRxById`使用 hibernate 实现是有意义的，因为您可以使用 hibernate ORM。

`getAllRxNotificationsGroupedByFacility`另一方面，仅检索 Rx 列的子集，但获取更多数据，需要以某种方式分组，并最终发送到另一台服务器，因此使用 jdbc 实现它更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:13:23.667

方法 2 对我来说看起来相当不错，但是，我不太明白您为什么将其视为两个实现合并在一起。

为大多数方法创建一个使用高级 Hibernate 功能的 DAO 是很常见的，但对于需要它的方法则回退到较低级别。请注意，您可以使用 Hibernate API（本机查询`doWork(...)`等）进行低级访问，因此将 Hibernate 与 JDBC 混合不会导致额外的复杂性。

像这样的东西：

```
public class HibernateRxDao implements RxDao {
    ...

    public Rx getRxById(int rxId) {
        return sf.getCurrentSession().get(rxId, Rx.class);
    }

    public Map<String, List<Notification>> getAllRxNotificationsGroupedByFacility() {
        return toMap(sf.getCurrentSession().createNativeQuery(...). ... .list());
    }

    private Map<String, List<Notification>> toMap(List<Object[]> rows) { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:44:18.640

除了我的其他答案之外，这是一个可能的解决方案。您使用“服务质量”对实现类上的方法进行注释，并创建代理，以最高的“服务质量”值自动委托给您的实现：

```
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;
import java.util.HashMap;
import java.util.Map;

public class DaoProxyDemo {

    @Target(ElementType.METHOD)
    @Retention(RetentionPolicy.RUNTIME)
    @interface QualityOfService {
        int value();
    }

    interface ProductDao {
        String operation1();
        String operation2();
    }

    static class JpaProductDao implements ProductDao {

        @QualityOfService(1)
        public String operation1() { return "hello from jpa"; }

        @QualityOfService(0)
        public String operation2() { throw new UnsupportedOperationException(); }

    }

    static class JdbcProductDao implements ProductDao {

        @QualityOfService(0)
        public String operation1() { throw new UnsupportedOperationException(); }

        @QualityOfService(1)
        public String operation2() { return "hello from jdbc"; }

    }    

    static class QosAwareProxyFactory {

        public static <T> T createProxy(Class<T> interfaceType, T... implementations) {

            class Binding {
                private final int qos;
                private final T impl;

                public Binding(T impl, int qos) {
                    this.impl = impl;
                    this.qos = qos;
                }
            }

            final Map<Method, Binding> dispatchMap = new HashMap<Method, Binding>();
            try {
                for (Method method : interfaceType.getDeclaredMethods()) {

                    for (T impl : implementations) {

                        Method implMethod = impl.getClass().getMethod(method.getName(), 
                                method.getParameterTypes());

                        QualityOfService qos = implMethod.getAnnotation(QualityOfService.class);

                        int qosValue = qos == null ? 0 : qos.value();

                        Binding bestSoFar = dispatchMap.get(method);

                        if (bestSoFar == null || bestSoFar.qos < qosValue) {
                            dispatchMap.put(method, new Binding(impl, qos.value()));
                        }

                    }

                }
            }
            catch (NoSuchMethodException e) {
                throw new AssertionError("can never happen");
            }

            Object proxy = Proxy.newProxyInstance(QosAwareProxyFactory.class.getClassLoader(), 
                    new Class<?>[] {interfaceType}, new InvocationHandler() {

                @Override
                public Object invoke(Object proxy, Method method, Object[] args)
                        throws Throwable {

                    T impl = dispatchMap.get(method).impl;
                    return method.invoke(impl);
                }
            });

            return interfaceType.cast(proxy);

        }
    }

    public static void main(String[] args) {

        ProductDao proxy = QosAwareProxyFactory.createProxy(
                ProductDao.class, new JpaProductDao(), new JdbcProductDao());

        System.out.println(proxy.operation1());
        System.out.println(proxy.operation2());

    }

} 
```

如果你运行 main 方法，它会打印：

来自jpa的你好

来自jdbc的你好

您不喜欢您需要实现无论如何都不支持的操作这一事实，您可以考虑拆分接口（正如我在另一篇文章中所建议的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:10:48.950

如果您仍然喜欢将事物分开，您可以将您的 DAO 接口一分为二（比如说`JdbcProductOperations`和`JpaProductOperations`）。您的 ProductDAO 接口不再声明任何方法，而是从这两个接口继承。然后，您可以添加一个 ProductDAO-Implementation，它采用 JdbcProductOperations- 和一个 JpaProductOperations 实例，并相应地委派调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:14:18.363

我觉得奇怪的是，您“在某些情况下”需要提供一个简单的 JDBC DAO 实现，您应该能够使用 Hibernate 或更一般地使用 JPA 来涵盖所有用例。

另一个要探索的想法：重用**[通用 DAO](http://perfectjpattern.sourceforge.net/dp-genericdao.html)**并纯粹重用它，而不是遵循每个实体一个 DAO 的常见反模式，这是当你每次有一个新的数据模型实体时添加接口和实现时会发生的情况，例如添加`Person`提示您添加`IPersonDao`接口和`PersonDao`实现，这显然是对可扩展性和可维护性的高代价。您可以通过使用通用 DAO 完全避免这种情况，例如说您有一个新的`Person`数据模型实体，然后您简单地重用现有的通用 DAO：

```
 Person myGiovanni = new Person("Giovanni");  
 IGenericDao<Long, Person> myPersonDao = HibernateDaoFactory.getInstance().createDao(Person.class);
 myPersonDao.create(myGiovanni); 
```

[本页](http://perfectjpattern.sourceforge.net/dp-genericdao.html)底部有更多示例。确保检查通用 DAO 的“按示例查找”功能，该功能可以通过将命名查询映射到接口元素的 Spring 通用 DAO 实现进一步扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T15:16:46.833

我很好奇为什么你需要使用两种不同的模型——Hibernate 和 JDBC。

我目前正在处理一些类似的事情。我的应用程序将有两个部署，一个使用我自己托管的 mySQL，另一个使用另一个公司将为不同的最终用户组托管的 microsoft SQL 服务器。

为了处理 SQL 语法的差异，我选择了[jOOQ](http://jooq.org/)作为抽象层，经过一点学习曲线后，我发现它很容易使用。我可以在 Dao 对象中设置 SQL 方言（或使用 Servlet 初始化参数），这将是我需要在两个不同的数据库部署之间更改的唯一行。

# c - 如何遍历内核中进程的FIFO/RT列表

> ID：13705206
> 
> 赞同：1
> 
> 时间：2012-12-04T14:31:21.293
> 
> 标签：c, process, linux-kernel, kernel, scheduler

我正在尝试修改内核中当前的 FIFO/RT 调度程序。我通过系统调用成功地将进程的当前调度程序（从公平/正常）更改为 FIFO。我这样做`core.c`

现在我必须遍历进程列表，根据`tgid`字段选择进程，`task_struct`然后将特定进程放在队列前面以进行下一步处理。我怎样才能做到这一点？哪些系统调用/函数可以帮助我做到这一点？

**编辑**：我已经弄清楚如何在红黑树中对 CFS 做同样的事情。我正在使用`rb_first`和`rb_next`功能。对于 FIFO 中的数据结构，我需要类似的功能。

# c# - 检查 StreamReader 是否可以读取另一行

> ID：13705209
> 
> 赞同：5
> 
> 时间：2012-12-04T14:31:22.463
> 
> 标签：c#, .net, streamreader

我需要在阅读之前检查一行是否包含字符串，我想使用类似这样的 while 循环来执行此操作

```
 while(reader.ReadLine() != null)
    {
        array[i] = reader.ReadLine();
    } 
```

这显然是行不通的，那我该怎么做这个选择呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:37:13.710

尝试使用以下`Peek`方法：

```
while (reader.Peek() >= 0)
{
    array[i] = reader.ReadLine();
} 
```

文档： http: [//msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)和[http://msdn.microsoft.com/en-us/library/system.io.streamreader。偷看.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.peek.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T14:34:33.993

```
String row;
while((row=reader.ReadLine())!=null){
    array[i]=row;
} 
```

应该管用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T14:34:35.110

[StreamReader.ReadLine](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)从当前流中读取一行字符，读取器在底层 Stream 对象中的位置也提前了该方法能够读取的字符数。因此，如果您第二次调用此方法，您将从底层流中读取下一行。解决方案很简单 - 将行保存到局部变量。

```
string line;
while((line = reader.ReadLine()) != null)
{
   array[i] = line;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-09-16T15:25:10.543

```
while (!reader.EndOfStream)
{
    array[i] = reader.ReadLine();
} 
```

# objective-c - 更改标签的文本

> ID：13705221
> 
> 赞同：1
> 
> 时间：2012-12-04T14:32:19.410
> 
> 标签：objective-c, arrays, button, ios6, label

我有一个读取 .txt 文件的数组，当您单击按钮时，标签会在 .txt 文件的某个单词中发生变化，但标签不会改变。

这是代码：

```
if(sender == self.button) {
    NSArray *words = [[NSArray alloc] initWithObjects:@"words.txt", nil];
    [randomLabel setText:[words objectAtIndex:random() % [words count]]];
} 
```

当我按下按钮时，我应该怎么做才能改变标签？我使用什么文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:46:25.823

A few things here:

## Reading in file into an array

Well, for starters you're not reading in the contents of the .txt file.

```
NSArray *words = [[NSArray alloc] initWithObjects:@"words.txt", nil]; 
```

This creates a 1 element array, with that one element being `@"words.txt"`. I don't know the format of your .txt file, so I can't say for sure how you have to load it in. See [How do I format a text file to be read in using arrayWithContentsOfFile](https://stackoverflow.com/questions/3011898/how-do-i-format-a-text-file-to-be-read-in-using-arraywithcontentsoffile) on how to potentially do this.

## Setting button text

Also, you need to make sure `randomLabel` actually refers to the label contained within the button, otherwise the button text won't change. Typically for a button, you'd change the title using the method:

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

So in your instance, it'd be:

```
NSString* newTitle = [words objectAtIndex:random() % [words count]];
[self.button setTitle:newTitle forState:UIControlStateNormal]; 
```

## Is the code actually being called?

Double check that `sender == self.button` evaluates to true (for readability and clarity, I'd use `[sender isEqual:self.button]`). Use the debugger to step through the code, to see if that particular piece of code is being called. See [http://mobile.tutsplus.com/tutorials/iphone/xcode-debugging_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/xcode-debugging_iphone-sdk/) on how to achieve this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:46:17.667

你应该尝试使用

*   (id)initWithContentsOfFile:(NSString *)aPath

# c - 大约同时处理 2 个信号

> ID：13705230
> 
> 赞同：3
> 
> 时间：2012-12-04T14:32:58.173
> 
> 标签：c, linux, signals

在 Linux 2.6 中，我希望我的进程同时捕获 SIGHUP 和 SIGTERM 以便有序退出。

当节点关闭时，日志显示它将首先处理 SIGHUP（父进程接收 SIGTERM）或 SIGTERM。

我的问题是：是否有可能同时调用这些信号的处理程序？还是内核一个接一个地触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:27:22.250

在对进程的异步信号中，Linux 内核通过系统调用向目标进程结构发送信号，当进程的上下文切换到 RUN 状态时，信号由根线程处理，并在所有其他线程上阻塞信号。由于每个线程的堆栈空间不同，因此可以一次处理每个信号（如果错误则更正）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:01:40.230

根据您的代码架构，您可以强制同步读取信号以防止任何并发问题。您可以使用 signalfd，然后在您想检查任何未完成的信号时从该 fd 中读取。如果您*需要*它们使用信号处理程序以异步默认方式运行，我认为您必须为信号处理程序可能被中断做好准备。

[人信号fd](http://www.kernel.org/doc/man-pages/online/pages/man2/signalfd.2.html)

# mysql - 如何使用触发器在 MySQL 表中插入更改

> ID：13705237
> 
> 赞同：0
> 
> 时间：2012-12-04T14:33:21.653
> 
> 标签：mysql

我想创建触发器，我需要执行以下操作。

当编辑表中的记录时，触发器将自动将此更改记录到另一个名为 logs 的表中，并在我的 php 脚本中使用日志表的设置如下：

编辑表后的值之前的日期时间值 * 我是触发器的新手，请帮助我的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:38:04.633

你的 google-fu 很弱，我的朋友：[http](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html) ://dev.mysql.com/doc/refman/5.0/en/create-trigger.html但你最终会学会的:)

虽然如果这不是一个专门用于创建触发器的项目，我不建议使用它们。因为这个“将自动记录这个更改到另一个名为”的表肯定可以在业务逻辑中完成。然后，您可以控制软件和用户所做的事情。也许在不久的将来，您将需要对表执行数据修复 - 然后您必须禁用触发器，执行修复并再次启用它。这似乎是很多你不想做的工作。因此，如果可能的话 - 避免触发器，如果​​没有 - 阅读 mysql 文档以了解如何创建它们。

# css - IE开发者工具css实时编辑

> ID：13705251
> 
> 赞同：5
> 
> 时间：2012-12-04T14:34:11.120
> 
> 标签：css, internet-explorer, debugging

我正在为 IE 寻找一个好的开发工具，如果它可以具有与调试器中的 chrome 构建相同的属性，例如 CSS 中的实时编辑。

如果不是很好，那么 IE CSS 的好工具列表，适用于所有需要一个好的开发者 CSS 工具的前端开发者 - 所以我们可以更好地优化 IE 7 和 8。

如果人们在没有脚本的情况下无法做到这一点，那么您建议采用哪种方式来制作自己的调试程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T03:39:05.897

+IE 有一个内置的调试器。

+Firebug 总是一个很棒的工具

+IE Tester 允许您检查多个浏览器的交叉兼容性 (http://www.my-debugbar.com/wiki/IETester/HomePage)

+使用您需要测试的各种操作系统和浏览器（虚拟电脑、[虚拟](https://www.virtualbox.org/)机等）运行虚拟机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:27:52.667

我建议使用[Livestyle 之](https://github.com/One-com/livestyle)类的工具。它是一个在本地开发机器上运行的小型应用程序（用 javascript 编写），每当您保存本地 css 文件时，更新都会自动传播到浏览器。这也适用于很少支持开发人员工具栏的移动平台；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:59:46.820

如果您正在寻找的只是实时 CSS 编辑，那么[Firebug Lite是一个不错的选择。](http://getfirebug.com/firebuglite)基本上，您所做的只是`script`通过源代码或书签将指向脚本的标签添加到您的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T19:31:14.993

您可以在此处找到远程调试工具列表：[css ninja](http://thecssninja.com/talks/remote_debugging/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T19:21:39.523

我不知道您正在使用的 IE 女巫版本，但试试这个：

**按 F-12 键**

嘿 ！它不会是一个神奇的复制粘贴另存为工具，但您将能够“调试”您的布局。

否则 ：

*   萤火虫精简版：http: [//getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)
*   伴侣.js：[http ://www.my-debugbar.com/wiki/CompanionJS/HomePage](http://www.my-debugbar.com/wiki/CompanionJS/HomePage)
*   IE 开发者工具栏：[http ://www.microsoft.com/download/en/details.aspx?id=18359](http://www.microsoft.com/download/en/details.aspx?id=18359)
*   IE 开发者工具：http: [//msdn.microsoft.com/library/dd565622%28VS.85%29.aspx](http://msdn.microsoft.com/library/dd565622%28VS.85%29.aspx)
*   MS 脚本调试器： http: [//www.microsoft.com/download/en/details.aspx? DisplayLang=en&id=22185](http://www.microsoft.com/download/en/details.aspx?DisplayLang=en&id=22185)

相关：[IE 的 CSS 调试工具](https://stackoverflow.com/questions/3706834/css-debugging-tools-for-ie)

祝你好运

# c# - 引用的 DLL 中缺少命名空间和类

> ID：13705277
> 
> 赞同：0
> 
> 时间：2012-12-04T14:35:29.813
> 
> 标签：c#, visual-studio-2010

我正在尝试将对存在于另一个解决方案（“条形解决方案”）中的项目（“几何”）的引用添加到另一个解决方案（“Foo 解决方案”）中。Bar Solution（Geometry 源代码的所在地）中的任何项目都可以毫无问题地导入 Geometry 并使用其功能；但是，当我将 DLL 添加到 Foo 解决方案时，它可以正常导入，但对象浏览器显示它不包含命名空间或类。

有没有人遇到过这个问题或知道解决方案？我找不到任何关于 SO 或更笼统地说，le Goog 的信息。

**Foo 解决方案的对象浏览器：**

![在此处输入图像描述](../Images/16a72fbfa7821bfcc68202593df136a1.png)

**Bar的解决方案资源管理器：**

![在此处输入图像描述](../Images/514b9e6f667fbdaddc08e85eb76b634f.png)

**来自 Foo 的一些代码试图使用“几何”：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Geometry; // Error: "The type or namespace name 'Geometry' could not be found
                //   (are you missing a using directive or an assembly reference?)"

namespace Lever
{
    public partial class LeverGUI : Form
    {
        public LeverGUI()
        {
            InitializeComponent();
        }
    }
} 
```

# python - 如何在窗口 7 上安装 Beautiful Soup 模块？

> ID：13705279
> 
> 赞同：4
> 
> 时间：2012-12-04T14:35:31.763
> 
> 标签：python, beautifulsoup

我在[http://ricardianambivalence.com/2011/08/14/beautifulsoup-in-python-with-windows-7/找到了这篇文章](http://ricardianambivalence.com/2011/08/14/beautifulsoup-in-python-with-windows-7/)

（我使用python 2.6并下载了beautifulsoup4-4.1.3）

运行“setup.py”后我找不到“BeautifulSoup.pyc”

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:41:26.183

要检查您的安装是否成功，请输入 Python shell（或任何 Python 脚本）：

```
from bs4 import BeautifulSoup 
```

要安装纯 python 包，例如`beautifulsoup4`，运行：

```
C:\> pip install beautifulsoup4 
```

要安装`pip`、下载[`get-pip.py`](https://raw.github.com/pypa/pip/master/contrib/get-pip.py)并运行：

```
C:\> python get-pip.py 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T14:51:44.703

我知道这绝不是一个好方法，但我总是做的是复制`bs4`path的文件夹`C:\Python27\Lib\site-packages`。总是有效:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T19:52:58.223

打开 cmd。

转到你解压包的目录，然后写这个：

```
c:\python33\python.exe setup.py install 
```

将 python33 更改为安装 python 的目录。

# linux - 安装 usblib 包 - Ubuntu

> ID：13705287
> 
> 赞同：3
> 
> 时间：2012-12-04T14:36:17.240
> 
> 标签：linux, ubuntu, package, libusb, pkg-config

我需要软件包 libusb 来安装我正在安装的另一个软件包。

我尝试了以下似乎安装软件包的方法，

```
sudo apt-get install libusb-dev 
```

但是当我尝试安装我得到的另一个包时，

```
configure: error: Package requirements (libusb-1.0 >= 0.9.1) were not met:

No package 'libusb-1.0' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables LIBUSB_CFLAGS
and LIBUSB_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

当我运行命令 dpkg -L libusb-dev 时，我得到：

```
/.
/usr
/usr/bin
/usr/bin/libusb-config
/usr/include
/usr/include/usb.h
/usr/lib
/usr/lib/libusb.a
/usr/lib/libusb.la
/usr/lib/pkgconfig
/usr/lib/pkgconfig/libusb.pc
/usr/share
/usr/share/doc
/usr/share/doc/libusb-dev
/usr/share/doc/libusb-dev/html
/usr/share/doc/libusb-dev/html/index.html
/usr/share/doc/libusb-dev/html/preface.html
/usr/share/doc/libusb-dev/html/intro.html
/usr/share/doc/libusb-dev/html/intro-overview.html
/usr/share/doc/libusb-dev/html/intro-support.html
/usr/share/doc/libusb-dev/html/api.html
/usr/share/doc/libusb-dev/html/api-device-interfaces.html
/usr/share/doc/libusb-dev/html/api-timeouts.html
/usr/share/doc/libusb-dev/html/api-types.html
/usr/share/doc/libusb-dev/html/api-synchronous.html
/usr/share/doc/libusb-dev/html/api-return-values.html
/usr/share/doc/libusb-dev/html/functions.html
/usr/share/doc/libusb-dev/html/ref.core.html
/usr/share/doc/libusb-dev/html/function.usbinit.html
/usr/share/doc/libusb-dev/html/function.usbfindbusses.html
/usr/share/doc/libusb-dev/html/function.usbfinddevices.html
/usr/share/doc/libusb-dev/html/function.usbgetbusses.html
/usr/share/doc/libusb-dev/html/ref.deviceops.html
/usr/share/doc/libusb-dev/html/function.usbopen.html
/usr/share/doc/libusb-dev/html/function.usbclose.html
/usr/share/doc/libusb-dev/html/function.usbsetconfiguration.html
/usr/share/doc/libusb-dev/html/function.usbsetaltinterface.html
/usr/share/doc/libusb-dev/html/function.usbresetep.html
/usr/share/doc/libusb-dev/html/function.usbclearhalt.html
/usr/share/doc/libusb-dev/html/function.usbreset.html
/usr/share/doc/libusb-dev/html/function.usbclaiminterface.html
/usr/share/doc/libusb-dev/html/function.usbreleaseinterface.html
/usr/share/doc/libusb-dev/html/ref.control.html
/usr/share/doc/libusb-dev/html/function.usbcontrolmsg.html
/usr/share/doc/libusb-dev/html/function.usbgetstring.html
/usr/share/doc/libusb-dev/html/function.usbgetstringsimple.html
/usr/share/doc/libusb-dev/html/function.usbgetdescriptor.html
/usr/share/doc/libusb-dev/html/function.usbgetdescriptorbyendpoint.html
/usr/share/doc/libusb-dev/html/ref.bulk.html
/usr/share/doc/libusb-dev/html/function.usbbulkwrite.html
/usr/share/doc/libusb-dev/html/function.usbbulkread.html
/usr/share/doc/libusb-dev/html/ref.interrupt.html
/usr/share/doc/libusb-dev/html/function.usbinterruptwrite.html
/usr/share/doc/libusb-dev/html/function.usbinterruptread.html
/usr/share/doc/libusb-dev/html/ref.nonportable.html
/usr/share/doc/libusb-dev/html/function.usbgetdrivernp.html
/usr/share/doc/libusb-dev/html/function.usbdetachkerneldrivernp.html
/usr/share/doc/libusb-dev/html/examples.html
/usr/share/doc/libusb-dev/html/examples-code.html
/usr/share/doc/libusb-dev/html/examples-tests.html
/usr/share/doc/libusb-dev/html/examples-other.html
/usr/share/doc/libusb-dev/copyright
/usr/share/doc-base
/usr/share/doc-base/libusb-dev
/usr/share/man
/usr/share/man/man1
/usr/share/man/man1/libusb-config.1.gz
/usr/lib/libusb.so
/usr/share/doc/libusb-dev/changelog.Debian.gz 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:59:32.973

一点阅读... [http://www.libusb.org/wiki/libusb-1.0#libusb-0.1](http://www.libusb.org/wiki/libusb-1.0#libusb-0.1)

看来，该库的 0.1 和 1.0 系列是根本不同的。许多 Linux 发行版继续主要发布 0.1 系列，而 1.x 版本可以额外并行安装。您正在寻找一个名为的包`libusb-1.0`和相应的开发包：[http](http://packages.ubuntu.com/quantal/libusb-1.0-0) ://packages.ubuntu.com/quantal/libusb-1.0-0和[http://packages.ubuntu.com/quantal/libusb-1.0-0-dev](http://packages.ubuntu.com/quantal/libusb-1.0-0-dev)

# grails - 在 grails 中创建具有自定义样式的自定义分页按钮

> ID：13705289
> 
> 赞同：2
> 
> 时间：2012-12-04T14:36:43.153
> 
> 标签：grails, pagination

如何在 grails 应用程序中为分页创建自定义按钮？我需要一个简单的下一个和上一个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:30:05.547

看看[Twitter Bootstrap TagLib](https://github.com/groovydev/twitter-bootstrap-grails-plugin/blob/master/grails-app/taglib/org/groovydev/TwitterBootstrapTagLib.groovy)，他们修改了分页以应用引导布局。

# jqgrid - FilterToolBar 不返回所有匹配项

> ID：13705290
> 
> 赞同：4
> 
> 时间：2012-12-04T14:36:44.883
> 
> 标签：jqgrid

我有一个带有 json 数据类型的*jqGrid*`loadOnce: true`和. 我正在使用`filterToolBar`搜索。它不会返回所有匹配项。该网格包含一个名为*Name*的可搜索列，并具有值“Adkins, Joe”和“Adkinson, Jane”。如果我输入搜索字符串“Adk”，则返回的唯一匹配项是“Adkins, Joe”。

这是网格定义：

```
function loadmyGrid(dataUrl, selectUrl) {
$("#myGrid").jqGrid({
    url: dataUrl + "?r=" + rand(),
    datatype: "json",
    mtype: 'GET',
    rowNum: -1,
    loadonce: true,
    ignoreCase: true,
    scroll: true,
    scrollOffset: 0,
    gridview: true,
    colNames: ["Employee ID", "Name", "User Name", ""],
    colModel: [
              { name: "EmployeeID", width: "125", align: "center", sortable: false, resizable: false, title: false, search: false },
                    { name: "Name", width: "150", align: "center", sortable: false, resizable: false, title: false },
                    { name: "UserName", width: "125", align: "center", sortable: false, resizable: false, title: false, search: false },
                    { name: "UserKey", key: true, width: "135", align: "center", sortable: false, resizable: false, title: false, formatter: selectButtonFormatter, search: false},
            ],
    emptyrecords: "Nothing to display",     
    beforeSelectRow: function () { return false; },
    gridComplete: function () {
        $("#myGrid").setGridHeight("100%");
        $("#myGrid").filterToolbar({searchOnEnter: false, defaultSearch: "cn" })
    }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:59:26.743

您的主要错误是使用`rowNum: -1`错误。如果你想防止数据的本地分页，你应该使用一些足够大的`rowNum`. 例如`rowNum: 1000`或`rowNum: 10000`。

我建议您另外将`$("#myGrid")`任何回调（例如`gridComplete`）内部替换为`$(this)`. `"?r=" + rand()`部分的使用似乎`url`我不需要。你的调用`$("#myGrid").filterToolbar`应该移到外面，`gridComplete`因为它只能调用一次。

我建议您另外使用[列模板](https://stackoverflow.com/a/6047856/315935)。它可以减少代码，使其更易于管理和可读性更好。

# jquery - 为什么 jQuery 的 .not() 方法会删除文本节点？

> ID：13705292
> 
> 赞同：15
> 
> 时间：2012-12-04T14:36:47.020
> 
> 标签：jquery

该`.not()`方法采用[选择器或](http://api.jquery.com/not/)用于过滤的对象。

该`.contents()`方法返回一个包含元素的子**节点和文本节点的**[jQuery 对象。](http://api.jquery.com/contents/)

 **When a selector is used as the argument for `.not()`it removes the selected elements but also **all the text nodes** .

当一个对象被用作论据时，`.not()`它会删除该对象而**不是**文本节点。

例子：

```
<p>This is a <span id="aSpan">paragraph</span> tag</p>

$("p").contents().not("span");
> [] 
```

但！

```
var $sp = $("p span");
$("p").contents().not($sp);
> ["This is a ", " tag"] 
```

还

```
var sp = document.getElementById("aSpan");
$("p").contents().not(sp);
> ["This is a ", " tag"] 
```

为什么文本节点由“span”选择器（或任何其他选择器）而不是对象实例选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:44:54.373

发生这种情况的原因可以追溯到3 年前的[这个特殊编辑。](https://github.com/jquery/jquery/commit/87869b8b81380617cfad8788799ee40de0e3e9c4#L0L0)它统一了[`.filter()`](http://api.jquery.com/filter/)和[`.not()`](http://api.jquery.com/not/)方法，大大简化了两者，因为它们实际上是彼此的对立面。

在上述编辑之前，如果选择器不是一个字符串，它会在内部`.not()`调用，所以它会从4 年前的[这个修订版](https://github.com/jquery/jquery/commit/c85243dfc4b09e6bb87532f2025f686b6ae45a22)开始对过滤的集合（即 ）进行操作。`.filter()``.nodeType === 1`

这意味着 - 根据您的代码示例 - 在编辑之前`.not(object)`也会返回一个空集合，这似乎比其当前行为更合乎逻辑。

现在，两者都`.not(object)`对`.filter(object)`未过滤的集合进行操作，尽管只有前一种方法会表现出行为差异。**

# hadoop - Hbase memstore 手动刷新

> ID：13705293
> 
> 赞同：5
> 
> 时间：2012-12-04T14:36:55.680
> 
> 标签：hadoop, hbase, hdfs

根据 Hbase 的设计，Hbase 使用 memstore 来存储写入，最终当 memstore 达到大小限制时，它会将其刷新到 HDFS。这个冲洗练习是在主题后面自动发生的。

就我而言，我想做一个 hdfs 迁移，从一个集群迁移到另一个集群，在我关闭源集群中的 hbase 进程之前，我需要确保内存中没有任何剩余。无论如何我们可以手动强制刷新，即使 memstore 没有达到限制。

==添加问题==

进一步的问题：你怎么知道冲洗完成？通过指标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T16:19:07.543

From the shell you can just do `flush 'tableName'` to flush the memstore.

But if you want to do a backup of `/hbase/table` folder via hdfs, the way to do that is:

*   disable the table: (from the shell: disable 'tableName')
*   copy files: hadoop fs -cp /hbase/tableName /hbase-backup/tableName
*   enable the table: (from the shell: enable 'tableName')

...or you can use the `CopyTable` or `Export` tools ([http://hbase.apache.org/book/ops.backup.html](http://hbase.apache.org/book/ops.backup.html))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-14T16:54:37.117

由于您要迁移 hbase 整个数据库，因此您可能需要批量禁用：

```
disable_all '.*' 
```

这将迫使 hbase 清除 memstore 并将所有内容写入 HFiles。您还会注意到，即使在禁用之后，您仍然会在 下看到一些 WAL `/hbase/WALs`，但不要担心，这是因为 hbase 有一个 WAL ttl，即使在刷新到 HFiles 之后，它也会将 WAL 保留一段时间。
回答您的问题“如何验证刷新是否完成”：
转到 Hbase UI -> Regions -> Memory
you will see `Memstore Size`，确保它们都是“0”。

# java - 自定义类的 Java 函数重载歧义

> ID：13705296
> 
> 赞同：4
> 
> 时间：2012-12-04T14:36:55.977
> 
> 标签：java, overloading

我有两个函数调用：一个以字符串作为参数，另一个以对象为参数。当我这样做时：

```
foo(Object a){...}
foo(String s){...} 
```

然后调用：

```
foo(null); 
```

它工作正常。

* * *

但是，如果我这样做：

```
foo(CustomClass a){...}
foo(String s){...} 
```

然后调用：

```
foo(null); 
```

Eclipse 告诉我它是模棱两可的。所以两个问题：

1.  为什么第一个案例不模棱两可？
2.  我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T14:39:25.387

> 为什么第一个案例不模棱两可？

那是因为`String`是 的子类型`Object`，编译器会选择最具体的一个。因此`String`选择了带参数的方法。

> 我该如何解决？

好吧，在第二种情况下，由于两个参数类型不在同一个继承层次结构中，你会得到歧义。你无法避免它。因为，`null`同样有资格分配给`types`. 编译器没有一种特定的类型可供选择。

您可以`ambiguity error`通过显式转换`null`为所需的类型来避免。

因此，以下调用将正常工作：-

```
foo((String)null);   
foo((CustomClass)null); 
```

# bash - Bash 脚本和 ssh 出错

> ID：13705297
> 
> 赞同：0
> 
> 时间：2012-12-04T14:37:00.263
> 
> 标签：bash, ssh, case

我有一个 bash 脚本，我在其中`ssh`连接到远程主机，然后根据操作系统创建一个文件（`case`bash 中的语句）。当我在 OS X 上执行此代码时，我希望评估 Darwin 的值并创建文件 eg2.txt。但是，由于某种原因，评估未能选择 Darwin，它选择`*`然后创建文件`none.txt`。有没有人遇到过类似的问题？有人能告诉我出了什么问题吗？

```
#!/bin/bash
ssh -l user $1 "cd Desktop; 
opname=`uname -s`;
echo \"first\" > first.txt
case \"$opname\" in 
    "Darwin") echo \"Darwin\" > eg2.txt ;;
    "Linux") sed -i \"/$2/d\" choice_list.txt ;;
    *) touch none.txt ;;
esac" 
```

PS 我主要在 Mac 上运行此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:39:41.717

问题是您的`$opname`变量正在被正在运行的 Bash 实例（即在客户端）扩展（到空字符串中`ssh`），而不是通过 SSH 传递以由服务器端的 Bash 实例处理。

要解决此问题，您可以使用单引号而不是双引号：

```
#!/bin/bash
ssh -l user $1 'cd Desktop; 
opname=`uname -s`;
echo "first" > first.txt
case "$opname" in 
    Darwin) echo "Darwin" > eg2.txt ;;
    Linux) sed -i "/$2/d" choice_list.txt ;;
    *) touch none.txt ;;
esac' 
```

否则你可以引用你的`$`using `\`：

```
#!/bin/bash
ssh -l user $1 "cd Desktop; 
opname=`uname -s`;
echo \"first\" > first.txt
case \"\$opname\" in 
    "Darwin") echo \"Darwin\" > eg2.txt ;;
    "Linux") sed -i \"/\$2/d\" choice_list.txt ;;
    *) touch none.txt ;;
esac" 
```

# mysql - MySQL - 是否可以显示空行？

> ID：13705301
> 
> 赞同：1
> 
> 时间：2012-12-04T14:37:17.223
> 
> 标签：mysql, sql, gaps-and-islands, monthcalendar

> **可能重复：**
> [使用 SQL 显示零值月份](https://stackoverflow.com/questions/2670183/displaying-zero-valued-months-with-sql)

对于某个属性，即使它是空的，是否可以显示它的行？

说我有属性`date_of_car_sale`。另外，假设我想做一份月度报告。

2009年1月到12月，公司有两个月放假，所以`date_of_car_sale`6月和8月没有。

是否可以制作显示 2009 年每个月的报告，即使 6 月和 8 月没有数据值？

我可以制作每个月的节目，并将它们分组以仅显示个别月份。但似乎无法显示六月和八月，因为它们是空的。

PS：这只需要公司表中的一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:53:10.140

在这种情况下，我通常会制作一个包含我想要显示的所有值的表格，并对我的数据集进行左连接。因此，在您的情况下，我将创建一个名为“months”的表，其中包含一个日期列，该列存储该月的第一天，或者可能包含第一天和最后一天的两列，并像这样加入：

```
SELECT m.month_first, COUNT(x.date_of_car_sale) as sales
FROM months m
LEFT JOIN (
  SELECT date_of_car_sale
  FROM sales
) x ON m.month_first <= x.date_of_car_sale 
    AND m.month_last >= x.date_of_car_sale
GROUP BY m.month_first
ORDER BY m.month_first 
```

# openstack-nova - Hyper-V nova 计算错误

> ID：13705302
> 
> 赞同：2
> 
> 时间：2012-12-04T14:37:28.753
> 
> 标签：openstack-nova

我正在尝试将 Hyper-V 中的 nova-compute 与 Ubuntu 12.04 上的 devstack 连接，但出现此错误：

> CRITICAL nova [-] (OperationalError) (1054, "Unknown column 'instances.server_name' in 'field list'") 'SELECT instances.created_at AS instances_created_at，instances.updated_at AS instances_updated_at，instances.deleted_at AS instances_deleted_at，instances.deleted AS instance_deleted，instances.id AS instances_id，instances.user_id AS instances_user_id，instances.project_id AS instances_project_id，instances.image_ref AS instances_image_ref，instances.kernel_id AS instances_kernel_id，instances.ramdisk_id AS instances_ramdisk_id，instances.server_name AS instances_server_name，instances.launch_index AS instances_launch_index， instance.key_name AS instances_key_name、instances.key_data AS instances_key_data、instances.power_state AS instances_power_state、instances。vm_state AS instances_vm_state、instances.task_state AS instances_task_state、instances.memory_mb AS instances_memory_mb、instances.vcpus AS instances_vcpus、instances.root_gb AS instances_root_gb、instances.ephemeral_gb AS instances_ephemeral_gb、instances.hostname AS instances_hostname、instances.host AS instances_host、instances.instance_type_id AS instance_instance_type_id、instances.user_data AS instances_user_data、instances.reservation_id AS instances_reservation_id、instances.scheduled_at AS instances_scheduled_at、instances.launched_at AS instances_launched_at、instances.terminated_at AS instances_terminated_at、instances.availability_zone AS instances_availability_zone、instances.display_name AS instances_display_name、instances.display_description AS instances_display_description,实例。launch_on AS instances_launched_on，instances.locked AS instances_locked，instances.os_type AS instances_os_type，instances.architecture AS instances_architecture，instances.vm_mode AS instances_vm_mode，instances.uuid AS instances_uuid，instances.root_device_name AS instances_root_device_name，instances.default_ephemeral_device AS instances_default_ephemeral_device，instances.default_swap_device AS instance_default_swap_device、instances.config_drive AS instances_config_drive、instances.access_ip_v4 AS instances_access_ip_v4、instances.access_ip_v6 AS instances_access_ip_v6、instances.auto_disk_config AS instances_auto_disk_config、instances.progress AS instances_progress、instances.shutdown_terminate AS instances_shutdown_terminate、instances.disable_terminate AS instances_disable_terminate、instance_types_1。created_at AS instance_types_1_created_at, instance_types_1.updated_at AS instance_types_1_updated_at, instance_types_1.deleted_at AS instance_types_1_deleted_at, instance_types_1.deleted AS instance_types_1_deleted, instance_types_1.id AS instance_types_1_id, instance_types_1.name AS instance_types_1_name, instance_types_1.memory_mb AS instance_types_1_memory_mb, instance_types_1.vcpus AS instance_types_1_vcpus, instance_types_1.root_gb AS instance_types_1_root_gb, instance_types_1.ephemeral_gb AS instance_types_1_ephemeral_gb, instance_types_1.flavorid AS instance_types_1_flavorid, instance_types_1.swap AS instance_types_1_swap, instance_types_1.rxtx_factor AS instance_types_1_rxtx_factor, instance_types_1.vcpu_weight AS instance_types_1_vcpu_weight, instance_types_1.disabled AS instance_types_1_disabled,instance_types_1.is_public AS instance_types_1_is_public, instance_info_caches_1.created_at AS instance_info_caches_1_created_at, instance_info_caches_1.updated_at AS instance_info_caches_1_updated_at, instance_info_caches_1.deleted_at AS instance_info_caches_1_deleted_at, instance_info_caches_1.deleted AS instance_info_caches_1_deleted, instance_info_caches_1.id AS instance_info_caches_1_id, instance_info_caches_1.network_info AS instance_info_caches_1_network_info, instance_info_caches_1.instance_uuid AS instance_info_caches_1_instance_uuid, security_groups_1\. created_at AS security_groups_1_created_at、security_groups_1.updated_at AS security_groups_1_updated_at、security_groups_1.deleted_at AS security_groups_1_deleted_at、security_groups_1.deleted AS security_groups_1_deleted、security_groups_1。id AS security_groups_1_id, security_groups_1.name AS security_groups_1_name, security_groups_1.description AS security_groups_1_description, security_groups_1.user_id AS security_groups_1_user_id, security_groups_1.project_id AS security_groups_1_project_id, instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance_metadata_1。instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance._instance_metadata_1.created_at AS instance_metadata_1_created_at, instance_metadata_1.updated_at AS instance_metadata_1_updated_at, instance_metadata_1.deleted_at AS instance_metadata_1_deleted_at, instance_metadata_1.deleted AS instance_metadata_1_deleted, instance_metadata_1.id AS instance_metadata_1_id, instance._`key`AS instance_metadata_1_key, instance_metadata_1.value AS instance_metadata_1_value, instance_metadata_1.instance_uuid AS instance_metadata_1_instance_uuid \nFROM instances LEFT OUTER JOIN instance_types AS instance_types_1 ON instances.instance_type_id = instance_types_1.id LEFT OUTER JOIN instance_info_caches AS instance_info_caches_1 ON instance_info_caches_1.instance_uuid = instances.uuid LEFT OUTER JOIN security_group_instance_association AS security_group_instance_association_1 ON security_group_instance_association_1.instance_uuid = instances.uuid AND instances.deleted = %s 左外连接 security_groups AS security_groups_1 ON security_groups_1.id = security_group_instance_association_1.security_group_id AND security_group_instance_association_1.deleted = %s AND security_groups_1。已删除 = %s 左外连接 instance_metadata AS instance_metadata_1 ON instance_metadata_1.instance_uuid = instances.uuid AND instance_metadata_1.deleted = %s \nWHERE instances.deleted = %s AND instances.host = %s' (0, 0, 0, 0, 0, 'WIN-NVR4BLPKAS1')

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:34:09.650

数据库中的实例表中缺少一列。

它可能与代码过期；此命令将更新数据库：

```
nova-manage db sync 
```

如果代码超级过时，该命令可能无法很好地工作，您可以向后同步，然后向前同步：

1.  首先找到最早的版本：

    ls nova/db/sqlalchemy/migrate_repo/versions | 排序-n | 头

2.  然后同步到那个版本：

    nova-manage db sync 112 # 如果 112 是列表中最早的

3.  然后再次同步到最后：

    nova-管理数据库同步

如果这不起作用，您可以进入 mysql 并手动添加列：

```
alter table instances add column server_name varchar; 
```

最后，您可以删除数据库，重新创建它然后进行同步（在 mysql 中）：

```
drop database nova;
create database nova;
grant all on nova.* to openstack@localhost identified by 'openstack'; 
```

假设您的 nova db 用户名+密码是 openstack 和 openstack。（您可以从[devstack localrc 获得](http://devstack.org/localrc.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T16:58:57.170

当我扩展到更多计算主机时，我遇到了完全相同的问题，当我解决这个问题时，我发现我有不同的 nova 服务版本，我添加了正确的存储库并删除了当前的 Openstack 计算和网络服务，重新安装并重新- 再次配置它们，一切顺利。

我正在使用 Havana 并添加了以下存储库。（我在所有机器上都使用 Centos）

百胜安装[http://repos.fedorapeople.org/repos/openstack/openstack-havana/rdo-release-havana-6.noarch.rpm](http://repos.fedorapeople.org/repos/openstack/openstack-havana/rdo-release-havana-6.noarch.rpm)

百胜安装[http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm](http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm)

# git - 如何强制暂存/提交整个文件而不是大块

> ID：13705308
> 
> 赞同：2
> 
> 时间：2012-12-04T14:37:50.050
> 
> 标签：git, msysgit

Git 有一个出色的工具来暂存（并稍后提交）[文件中的部分更改](https://stackoverflow.com/questions/5165825/committing-partial-hunks-in-git)。我正在寻找一种相反的选择：强制 git 暂存并一次性提交整个文件：“我知道整个文件确实已经改变 - 不要尝试部分执行”

当文件更改如此之多以至于这里只有一些空格并且版本之间有共同点时，此选项将是实用的。据我了解，git 总是尝试将文件暂存为大块并使用公共（空白行）作为分割点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:43:37.170

`git`只存储完整的文件（至少从前端的角度来看 - 后端对象数据库在创建包文件时会使用 deltas 来提高存储效率，但是与对象数据库之间的事务仅在整个文件中单位）。当您`git add -p`“存储”“部分更改”时，`git`真正要做的是为您生成一个仅包含您指定的更改的全新文件，并存储整个文件。根据您的工作流程，这是有时会受到批评的事情之一`git`，因为您实际上可以存储在开发过程中从未真正存在并且未经测试以确保它们编译和/或正常工作的文件。

# sql - 如何连接表而不重复数据

> ID：13705313
> 
> 赞同：0
> 
> 时间：2012-12-04T14:38:00.190
> 
> 标签：sql, left-join

我是新来的，因为我正在学习 SQL，但遇到了一个我无法解决的问题。请帮我。我有两个表格结果和收入数据，请参阅表格的屏幕截图。 [https://www.box.com/s/5c1ah5qi9jg5ty499wvs](https://www.box.com/s/5c1ah5qi9jg5ty499wvs)

我想加入这些表，但由于 carthesian 产品，一些数据被添加了两次。这是我的代码：

```
select o.point, o.date, sum(out), sum(inc) from outcome o left join income i on o.point=i.point and o.date=i.date 
group by o.point, o.date
union
select i.point, i.date, sum(out), sum(inc) from income i left join outcome o on o.point=i.point and o.date=i.date
group by i.point, i.date 
```

有什么建议吗？提前致谢。

G。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:49:39.257

我认为你想要的是 a`full outer join`而不是 a `union`：

```
select coalesce(o.point, i.point) as point,
       coalesce(o.date, i.date) as date,
       sum(out), sum(inc)
from outcome o full outer join
     income i
     on o.point=i.point and o.date=i.date 
group by coalesce(o.point, i.point) , coalesce(o.date, i.date) 
```

或者，您可能希望`union`在两个表之间执行 a，然后进行聚合，如下所示：

```
select point, date, sum(out), sum(inc)
from ((select o.point, o.date, out, NULL as inc
       from outcome
      ) union all
      (select i.point, i.date, NULL as out, inc
       from income
      )
     ) io
group by point, date 
```

即使每个表中针对给定的点/日期组合有多行，此版本也将正常工作。

# performance - 大块数据的 Oracle INSERT 性能

> ID：13705317
> 
> 赞同：1
> 
> 时间：2012-12-04T14:38:12.700
> 
> 标签：performance, oracle, insert, bulk

我正在为 Oracle 10g 开发存储过程，并且在尝试将大约 2-3k 个项目的列表传递到过程中时遇到了相当严重的性能瓶颈。这是我的代码：

```
TYPE ty_id_list
  AS TABLE OF NUMBER(11);

----------------------------------------------------------

PROCEDURE sp_performance_test (
  p_idsCollection IN schema.ty_id_list )
AS

TYPE type_numeric_table IS TABLE OF NUMBER(11) INDEX BY BINARY_INTEGER;
l_ids type_numeric_table;
data type_numeric_table;
empty type_numeric_table;

BEGIN

EXECUTE IMMEDIATE
  'ALTER TABLE schema.T_TEST_TABLE NOLOGGING';
COMMIT;

SELECT COLUMN_VALUE BULK COLLECT INTO l_ids 
  FROM TABLE(p_idsCollection);

FOR j IN 1 .. l_ids.COUNT LOOP
  data(data.count+1) := l_ids(j);

  IF(MOD(data.COUNT,500) = 0 ) THEN
    FORALL i IN 1 .. data.COUNT
      INSERT INTO schema.T_TEST_TABLE (REF_ID, ACTIVE)
      VALUES (data(i), 'Y');  
  data := empty;
  END IF;
END LOOP;
IF(data.count IS NOT NULL) THEN
  FORALL i IN 1 .. data.COUNT
    INSERT INTO schema.T_TEST_TABLE (REF_ID, ACTIVE)
    VALUES (data(i), 'Y'); 
END IF;
COMMIT;

EXECUTE IMMEDIATE
  'ALTER TABLE schema.T_TEST_TABLE LOGGING'; 
COMMIT;

END sp_performance_test; 
```

因此，该过程的加总似乎是这部分： data(data.count+1) := **l_ids(j)** ; 如果我跳过从集合中获取元素并将这一行更改为 data(data.count+1) := **j** ;，过程执行时间将快 3-4 倍（对于 3k 个项目，从超过 30 秒到 8-9 秒） - 但是这个逻辑显然不是我想要的。

你们能给我一个提示，我可以在哪里改进我的代码以在插入数据时获得更好的性能？如果真的可以做任何改进。

谢谢， 普热梅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:59:41.810

我不遵循你的逻辑。

你接受一个集合。您将其复制到另一个集合：

```
SELECT COLUMN_VALUE BULK COLLECT INTO l_ids 
  FROM TABLE(p_idsCollection); 
```

然后在循环中再次复制它：

```
FOR j IN 1 .. l_ids.COUNT LOOP
  data(data.count+1) := l_ids(j); 
```

只有在那之后，您才能设法执行 500 行块的批量插入。立即批量插入有什么问题`p_idsCollection`？

ps 您不需要在“ALTER TABLE”之后提交，ddl 语句会隐式发出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:59:43.570

您还可以在插入操作中添加提示。

将 /*+ 附加 */ 插入制表符 (...) 值 (...)

它改变了 oracle 的工作逻辑，它会运行得更快。

[http://www.dba-oracle.com/t_insert_tuning.htm](http://www.dba-oracle.com/t_insert_tuning.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:04:26.620

DDL 之后的整个块可以重写为

```
insert into schema.T_TEST_TABLE (REF_ID, ACTIVE) 
select COLUMN_VALUE, 'Y' FROM TABLE(p_idsCollection); 
```

# ruby-on-rails - Rspec Mock_model

> ID：13705321
> 
> 赞同：0
> 
> 时间：2012-12-04T14:38:21.403
> 
> 标签：ruby-on-rails, rspec

我是 ruby​​ 和 ruby​​ on rails 的新手。如何存根类中的属性？

```
class User < PresentationModel
  ...
  attr_accessor  :_vendor 
```

_vendor 在我的数据库中，包含三列：ID、短名称、类型。我怎样才能只在 rspec 中存根这个属性？

像这样的东西？

```
 @vendor = mock_model(vendor, :ID=> 12, :shortname => 'testBLA', :type => 1) 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:54:15.987

您只能通过以下方式存根此属性：

```
@vendor = mock_model(Vendor, **:id** => 1, :shortname => "Bla", :type => 1) 
```

（注意 Rails id 约定）

进而：

User.should_receive(:_vendor).and_return @vendor

你也可以检查这个[问题](https://stackoverflow.com/questions/3347880/stubbing-a-model-attribute)。

# java - 将 int 和 int 文字分配给字节之间的区别？

> ID：13705322
> 
> 赞同：1
> 
> 时间：2012-12-04T14:38:22.027
> 
> 标签：java

```
byte b = 100 ; 
```

编译没有任何错误，但是

```
int i = 100 ; 
byte b = i ; 
```

引发错误。为什么？即使直接将 100 分配给 b，我们也在分配一个 int 字面量。那么为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:45:13.493

```
byte b = 100 ; 
```

这`100`是一个编译时间常数。因此可以分配给`byte`.

```
int i = 100 ; 
// i = i + 100;  // It's allowed to add this statement later on, 
                 // if `i` is not declared final. And hence, the next assignment
                 // will clearly fail at runtime. So, compiler saves you from it
byte b = i ; 
```

现在在这种情况下，因为`i`没有声明`final`，所以它不再是一个`compile time`常数。在这种情况下，您可以稍后在 和之间*修改*,的值`i`，如上例所示。这肯定会失败。这就是为什么编译器不允许分配to类型。`initialization of i``assignment of i to byte``i``byte`

但是，您可以使用显式转换来编译它，这当然可以`crash`在运行时进行。通过进行显式转换，您可以告诉编译器 - “我知道我在做什么，只需为我做这件事”。因此，它不会担心该转换的运行时行为，并且会相信您没有做错任何事情。

因此，您可以声明您的`int i`as `final`，或者您需要进行强制转换：-

```
int i = 100 ;    // replace 100 with 130, and you will be surprised that it works
byte b = (byte)i ; 
```

因此，当您使用一个值`130`并将其强制转换为 时`byte`，您会通过`compiler`，但肯定会在运行时崩溃。这就是他们`compiler`试图避免的问题。

* * *

现在让我们回到第一个案例：-

```
byte b = 128; 
```

上述分配现在将无法编译。因为即使该值`128`是编译时间常数，它也不足以容纳 a `byte`，并且`compiler`知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:41:11.777

`byte b=100`会编译，因为字节的范围是从**-128 到 127**。

```
 int i = 100 ; byte b = 129 ;// would give a compiler error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:43:26.187

`i`不是最终的，同时可能已经改变。

以下将起作用：

```
final int i = 100; 
byte b = i; 
```

# python - 解析用户输入的计算器

> ID：13705324
> 
> 赞同：1
> 
> 时间：2012-12-04T14:38:45.587
> 
> 标签：python, performance, calculator

```
import string

# Strength of operations:
#   -> [] (brackets)
# 6 -> ~ (negative)
# 5 -> @, $, & (average, maximum, minimum)
# 4 -> %, ! (modulo, factorial)
# 3 -> ^ (power)
# 2 -> *, / (multiplication, division)
# 1 -> +, - (addition, subtraction)

def BinaryOperation(exp, idx):
    """ Gets an expression and an index of an operator and returns a tuple with (first_value, operator, second_value). """
    first_value = 0
    second_value = 0

    #Get first value
    idx2 = idx -1
    if idx2 == 0:
        first_value = exp[idx2:idx]

    else:
        while (idx2 > 0) and (exp[idx2] in string.digits):
            idx2 -=1

        if (exp[idx2] in ("-")) or (exp[idx2] in string.digits):#-5*3
            first_value = exp[idx2:idx]
        else:#%5*3
            first_value = exp[idx2+1:idx]

    #Get second value
    idx2 = idx +1
    if exp[idx+1] not in string.digits: #If there is something like 1*+5, second_sign will be +.
        idx2 += 1 #idx2 will begin from the char after the sign.

    while (idx2 < len(exp)) and (exp[idx2] in string.digits):
        idx2 += 1

    second_value = exp[idx+1:idx2]

    return (first_value, exp[idx], second_value)

def UnaryOperation(exp, idx):
    """ Gets an expression and an index of an operator and returns a tuple with (operator, value). """
    #Get value
    idx2 = idx+1
    if exp[idx+1] not in string.digits: #If there is something like ~-5, second_sign will be -.
        idx2 += 1 #idx2 will begin from the char after the sign.
    while (idx2 < len(exp)) and (exp[idx2] in string.digits):
        idx2 +=1

    return (exp[idx], exp[idx+1:idx2])

def Brackets(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] == "[":
            #Brackets
            close_bracket = exp.find("]")
            if close_bracket == -1:
                raise Exception("Missing closing bracket.")

            exp_brackets = exp[idx+1:close_bracket]

            value = str(solve(exp_brackets))

            exp = exp.replace("[" + exp_brackets + "]", value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return Level6(exp)

def Level6(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] in ("~"):
            #Negative
            sub_exp = UnaryOperation(exp, idx)
            value = ~int(sub_exp[1])

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1
    return Level5(exp)

def Level5(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] in ("@", "$", "&"):
            #Average, Maximum and Minimum
            sub_exp = BinaryOperation(exp, idx)
            first_value = int(sub_exp[0])
            second_value = int(sub_exp[2])
            if sub_exp[1] == "@":
                value = (first_value + second_value)/2
            if sub_exp[1] == "$":
                value = first_value if first_value > second_value else second_value
            if sub_exp[1] == "&":
                value = first_value if first_value < second_value else second_value

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return Level4(exp)

def Level4(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] in ("%","!"):
            #Modulo and Factorial
            if exp[idx] == "%":
                sub_exp = BinaryOperation(exp, idx)
                value = int(sub_exp[0]) % int(sub_exp[2])
            if exp[idx] == "!":
                sub_exp = UnaryOperation(exp, idx)
                value = reduce(lambda x,y:x*y, range(1, int(sub_exp[1])+1))

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return Level3(exp)

def Level3(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] in ("^"):
            #Power
            sub_exp = BinaryOperation(exp, idx)
            value = int(sub_exp[0]) ** int(sub_exp[2])

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return Level2(exp)

def Level2(exp):
    idx = 0
    while idx < len(exp):
        if exp[idx] in ("*", "/"):
            #Multiplication and Division
            sub_exp = BinaryOperation(exp, idx)
            if sub_exp[1] == "*":
                value = int(sub_exp[0]) * int(sub_exp[2])
            if sub_exp[1] == "/":
                value = int(sub_exp[0]) / int(sub_exp[2])

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return Level1(exp)

def Level1(exp):
    idx = 0
    while idx < len(exp):
        if (exp[idx] in ("+", "-")) and (idx != 0):
            #Addition and Subtraction
            sub_exp = BinaryOperation(exp, idx)
            if sub_exp[1] == "+":
                value = int(sub_exp[0]) + int(sub_exp[2])
            if sub_exp[1] == "-":
                value = int(sub_exp[0]) - int(sub_exp[2])

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            idx = 0 #The len has been changed, scan again.

        idx += 1

    return exp

def solve(exp):
    exp = Brackets(exp)
    return float(exp) if "." in exp else int(exp)

def remove_whitespace(exp):
    """ Gets a string and removes all whitespaces and tabs """
    exp = exp.replace(" ", "")
    exp = exp.replace("\t", "")
    return exp

while True:
    exp = raw_input("")
    exp = remove_whitespace(exp)
    print solve(exp) 
```

经过一番努力，我编写了这个程序，我想知道这个解决方案的效率以及它是否整洁。

所以我的问题是，这个程序有多简单，有没有更好的方法来重写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:46:25.670

just for the point.

```
>>> eval(raw_input("input calculation: "))
input calculation: 1+1
2
>>> eval(raw_input("input calculation: "))
input calculation: (6*4^2)
26
>>> eval(raw_input("input calculation: "))
input calculation: (3/2.3)*4
5.2173913043478262 
```

for an innocent program, you can use [`eval`](http://docs.python.org/2/library/functions.html#eval)

but you really shouldn't use it ever. its only real use is confusing people, and being a fun novelty if you write programs fro yourself and decide you want a calculator.

there are many ways to write a calculator function.

try some of these other answers:

[Python creating a calculator](https://stackoverflow.com/questions/13116167/python-creating-a-calculator)

[Basic calculator program in python](https://stackoverflow.com/questions/13509078/basic-calculator-program-in-python)

[python calculator program](https://stackoverflow.com/questions/13664759/python-calculator-program)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T19:36:42.780

如果您想在 Python 中查看一些基于类的自定义评估引擎，这些可能会对您有所帮助：

*   [表达式评估器（带有](http://utilitymill.com/utility/Expression_Evaluator)[源](http://utilitymill.com/edit/Expression_Evaluator)的版本 1 ）
*   [数学评估器（带有](http://utilitymill.com/utility/Math_Evaluator)[源](http://utilitymill.com/edit/Math_Evaluator)的版本 2 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T00:37:23.110

```
again = True
answer = ""
while again is True:
    try:
        expression = raw_input("Enter your expression: ")
        found = False
        oper = -1
        operator1 = 0
        operator2 = 0
        while found==False:
            if (expression.find("+")>0 and expression.find("+")<len(expression)-1):
                found = True
                oper = expression.find("+")
                operator1 = float(expression[:oper])
                operator2 = float(expression[oper+1:])
                print "{} + {} = {}".format(operator1,operator2,operator1+operator2)
            elif(expression.find("-")>0 and expression.find("-")<len(expression)-1):
                found = True
                oper = expression.find("-")
                operator1 = float(expression[:oper])
                operator2 = float(expression[oper+1:])
                print "{} - {} = {}".format(operator1,operator2,operator1-operator2)
            elif(expression.find("*")>0 and expression.find("*")<len(expression)-1):
                found = True
                oper = expression.find("*")
                operator1 = float(expression[:oper])
                operator2 = float(expression[oper+1:])
                print "{} * {} = {}".format(operator1,operator2,operator1*operator2)
            elif(expression.find("/")>0 and expression.find("/")<len(expression)-1):
                found = True
                oper = expression.find("/")
                operator1 = float(expression[:oper])
                operator2 = float(expression[oper+1:])
                print "{} / {} = {}".format(operator1,operator2,operator1/operator2)
            else:
                oper = -1
                found = False
                print "Incorrect expression, please try again"
                break
            again = False
            answer = raw_input("Try again?: ")
            if(answer == "y" or answer=="yes" or answer =="Y" or answer == "YES"):
                again = True
            else:
                again = False
                print "Thank you for playing! See you next time."
                break

    except:
        print "Failed, check your expression and try again" 
```

# python - 如果 key ==x，则输入字典中的键：

> ID：13705326
> 
> 赞同：1
> 
> 时间：2012-12-04T14:38:51.857
> 
> 标签：python

我想知道是否有类似的方法来在 for 循环中强制执行 if 子句，因为它在列表理解中。所以我希望有一个类似的结构

```
[ expression for item in list if conditional ] 
```

在一个循环中，所以像

```
for item in list if conditional:
    expression 
```

我知道我可以在下一行添加条件，但是我想知道是否可以在 for 循环中构建

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:40:45.117

您可以使用生成器理解

```
for item in ( x for x in list if condition(x) ):
    pass 
```

这很混乱，想想吧。使用单独的 if 语句；它使您的代码结构更好，并且您希望代码结构更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:40:06.663

不幸的是，没有比以下更好的方法了：

```
for item in iterable:
    if not conditional:
        continue
    # whatever 
```

您可以创建一个生成器，但通常这有点矫枉过正：

```
iteritems = (item for item in iterable if conditional)
for item in iteritems:
    pass # whatever 
```

当然，您可以进一步压缩它：

```
for item in (item for item in iterable if conditional):
    pass # whatever 
```

但我真的不再称它为漂亮了。`continue`让我们在这种情况下保持良好状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:39:05.160

一般来说，我会采用@ThiefMaster 的方法。如果您正在寻找另一种方法（有时我会这样做，这取决于条件的简洁程度以及它与实际“做”部分的集成程度），您可以走功能路线并使用 filter().. .

```
for item in filter(lambda x: conditional, iterable):
    pass #whatever 
```

# clearcase - 从一台计算机复制到新计算机的 ClearCase 视图？

> ID：13705327
> 
> 赞同：2
> 
> 时间：2012-12-04T14:38:52.967
> 
> 标签：clearcase

昨天我在工作时收到了一台新电脑。我的旧电脑有几个 Clearcase 视图（快照），其中包含一些静止的签出文件。构建我的新机器的过程将包含我的 Clearcase 视图的目录复制到我的新机器。

我的新机器的 ClearCase 现在不知道这些目录是 ClearCase 视图，因此它们包含我想要保留的签出文件。

如何将这些目录与 ClearCase 相关联，以便我回到它们在旧机器上的状态（即，目录由 ClearCase 控制并且检出的文件被识别为这样）？

谢谢，托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:56:57.367

最简单的方法是：

*   取消注册并 rmtag 您以前的视图，
    （因为在新计算机上注册相同的视图效果不佳）
    请参阅“[如何删除其他用户创建的 clearcase 视图？](https://stackoverflow.com/questions/9782424/how-to-delete-clearcase-views-created-by-other-users/9782443#9782443) ”
*   `mkview`新计算机上的新视图，
    请参阅“[正确的 'cleartool mkview' 以创建 ClearCase 快照视图](https://stackoverflow.com/questions/1207409/proper-cleartool-mkview-for-clearcase-snapshot-view-creation/1207516#1207516)”
*   以及`clearfsimport -rmname`您当前在新计算机上的新视图中所做的修改。
    （如“[通过透明箱中的标签回滚](https://stackoverflow.com/a/13641817/6309)”）

# django - 如何在 Heroku 上运行 Django 测试

> ID：13705328
> 
> 赞同：22
> 
> 时间：2012-12-04T14:38:54.883
> 
> 标签：django, heroku

我有一个部署到 Heroku 的应用程序，我希望能够在目标环境上运行测试套件。我正在使用 Heroku [Postgres](https://addons.heroku.com/heroku-postgresql)插件，这意味着我只能访问单个数据库。我无权创建新数据库，这反过来意味着标准 Django 测试命令失败，因为它无法创建 test_* 数据库。

```
$ heroku run python manage.py test
Running `python manage.py test` attached to terminal... up, run.9362
Creating test database for alias 'default'...
Got an error creating the test database: permission denied to create database 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T05:42:32.723

**原来我错了**。我没有测试我认为正在测试的东西......由于 Heroku 的路由网格正在向不同的服务器发送请求，LiveServerTestCase 正在一台机器上启动一个 Web 服务器，而 Selenium 则完全连接到其他机器。

通过将 Heroku Procfile 更新为：

`web: python src/manage.py test --liveserver=0.0.0.0:$PORT`

覆盖`DATABASES`指向测试数据库的设置，并自定义链接到下面的测试套件运行器（同样的想法仍然成立：覆盖`setup_databases`，以便它只删除/重新创建表，而不是整个数据库），我能够远程运行测试。但这更加hacky/痛苦/不雅。还在寻找更好的东西！很抱歉造成混乱。

* * *

（下面的更新答案）

以下是对我有用的步骤：

*   使用 Heroku 工具带创建一个额外的免费 Postgres 数据库

`heroku addons:add heroku-postgresql:dev`

*   使用您可以[在此处找到的](https://gist.github.com/gregsadetsky/5018173)**HerokuTestSuiteRunner**类。

此自定义测试运行程序要求您定义`TEST_DATABASES`遵循典型`DATABASES`格式的设置。例如：

```
TEST_DATABASES = {
    'default': dj_database_url.config(env='TEST_DATABASE_URL')
} 
```

然后，将`TEST_RUNNER`设置设置为可以找到 HerokuTestSuiteRunner 的 Python 路径。

您现在应该能够使用给定的数据库在 Heroku 上运行 Django 测试。这是一个非常快速的黑客攻击......让我知道如何改进/减少黑客攻击。享受！

* * *

（下面的原始答案）

[这里](https://stackoverflow.com/questions/3096148/how-to-run-djangos-test-database-only-in-memory)讨论了一些相关的解决方案。正如您在[Django 文档](https://docs.djangoproject.com/en/dev/topics/testing/overview/#the-test-database)中所读到的，“[当]使用 SQLite 数据库引擎时，测试将默认使用内存数据库”。

虽然这并没有彻底测试您在 Heroku 上使用的数据库引擎（我仍在寻找可以做到这一点的解决方案），但将数据库引擎设置为 SQLite 至少可以让您运行测试。

有关一些提示，请参阅上面链接的 StackOverflow[问题](https://stackoverflow.com/questions/3096148/how-to-run-djangos-test-database-only-in-memory)。至少有两种方法：`if 'test' in sys.argv`在强制 SQLite 作为数据库引擎之前进行测试，或者在测试中使用专用的设置文件，然后您可以`django manage.py test`使用该`--settings`选项将其传递给。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-15T11:06:02.767

从 1.8 版开始，Django 现在有一个名为[keepdb](https://docs.djangoproject.com/en/1.8/ref/django-admin/#django-admin-option---keepdb)的选项，它允许在测试期间重用相同的数据库。

> --keepdb 选项可用于在测试运行之间保留测试数据库。
> 
> 这具有跳过创建和销毁操作的优点，这可以大大减少运行测试的时间，尤其是在大型测试套件中。
> 
> **如果测试数据库不存在，它将在第一次运行时创建，然后为每次后续运行保留。**
> 
> 在运行测试套件之前，任何未应用的迁移也将应用于测试数据库。

由于它还允许在运行测试之前存在测试数据库，因此您只需将一个新的 Postgres Heroku 实例添加到您的 dyno 并配置测试以使用该特定数据库。

*奖励*：您还可以使用[failfast](https://docs.djangoproject.com/en/1.11/ref/django-admin/#cmdoption-test-failfast)选项，该选项会在您的第一个测试崩溃后立即退出，这样您就不必等待所有测试完成。

但是，如果您将事物部署到 Heroku 并且**您正在使用 Heroku Pipelines**，则可以使用更好的选择：[Heroku CI](https://devcenter.heroku.com/articles/heroku-ci)。

# android - 画布在drawBitmap方法中一直忽略Paint

> ID：13705332
> 
> 赞同：2
> 
> 时间：2012-12-04T14:39:09.033
> 
> 标签：android

我想在画布上绘制位图（指定颜色）。

```
 Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.RED);

// create bitmap

    canvas.drawBitmap(bitmap, 0, 0, paint); 
```

好吧，位图在画布上可见，但可绘制的颜色没有改变。问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:42:45.360

> 我想在画布上绘制位图（指定颜色）。

位图包含图像，而以单色绘制图像没有任何意义。你期望它做什么？画一个红色矩形？形状可以用颜色绘制，而不是图像......

你的`Color`属性`Paint`将被忽略。该`Paint`参数用于传递其他设置，例如抗锯齿。

我希望这可以澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-19T16:56:45.900

`paint.setColor(Color.RED)`无关紧要。如果您的图像带有 alpha 通道并且您希望它以单一颜色绘制，请`ColorFilter`改用：

```
paint.setColorFilter(new PorterDuffColorFilter(Color.RED, PorterDuff.Mode.SRC_IN); 
```

# php - 使用严格的标准，PHP 的执行速度会更快吗？

> ID：13705333
> 
> 赞同：6
> 
> 时间：2012-12-04T14:39:11.903
> 
> 标签：php, performance, strict

我不敢相信我无法在谷歌上搜索与这个问题相关的任何内容，但无论如何......

我的逻辑假设是，遵守严格标准规定的所有规则的脚本会执行得更快。

另一方面，如果脚本在没有严格标准的情况下工作，那么严格的标准可能只是编译过程中不必要的额外验证步骤......

有什么更快的官方信息吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:16:31.480

应该快点。。

原因很简单，因为 PHP 的错误触发系统相当繁重，即使 E_STRICT 错误被抑制，它们仍然会进入错误机制（只是被忽略）。

但实际上它在很大程度上取决于情况，因为我可以想象，围绕 E_STRICT 工作本身也可能比原始解决方案更重。

无论如何，使用 E_STRICT 是一个聪明的想法，并且允许更便携、面向未来的代码。但是，我不会将性能作为开始编写严格的 PHP 代码的正当理由。

# google-analytics - 我可以在页面的任何位置设置 GA 自定义变量吗？

> ID：13705335
> 
> 赞同：0
> 
> 时间：2012-12-04T14:39:20.950
> 
> 标签：google-analytics

我刚刚开始使用 Google Analytics (GA) 进行拆分测试。而不是为页面的不同版本使用不同的 URL，我想使用相同的 URL 并通过 GA 自定义变量区分版本。

我已经设法在我的 Django 项目中通过视图层中的条件来实现这一点，该条件为不同版本加载不同的 html 模板，并且 html 模板还负责设置自定义变量。

但是我认为将我所有的 splittest 代码放在一个 javscript 文件中会更干净：

1) 在浏览器上设置/读取一个 cookie，指定该浏览器所在的测试箱。

2）修改页面html和css以创建不同的版本

3) 在 GA 自定义变量中记录版本

现在，我正在从 GA 复制粘贴的代码片段中设置所有自定义变量。

我的问题很简单：我可以稍后在页面 buy a 中设置自定义变量`_gaq.push()`，还是需要在结束 GA 片段的匿名函数之前发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:27:11.477

当 GA 发出跟踪 GIF 请求时，会记录自定义变量数据，这与`_trackPageview`或一起出现`_trackEvent`。

因此，您可以在页面的任何位置设置自定义变量，只要之后有一个`_trackPageview`或`_trackEvent`某处。

# ios - ios - tcp ip 崩溃

> ID：13705336
> 
> 赞同：0
> 
> 时间：2012-12-04T14:39:24.403
> 
> 标签：ios, cocoa, stream, nsurlconnection, tcpclient

我有一个 tcp 流连接，可以将一个巨大的 NSDictionary 联系人一一从手机发送到服务器。如果 NSDictionary 有 50 个条目，则一切正常，但在发送大约 150 155 个联系人后，应用程序崩溃了大约 200 个。我认为这可能是内存问题，或者流连接有一些限制？如果存在内存问题，比如我开启了 ARC，我该如何解决？

响应处理（我认为这可能是问题所在，特别是因为流被关闭了很多次）：

*   (void)stream:(NSStream *)theStream 句柄事件:(NSStreamEvent)streamEvent {

    NSLog(@"流事件 %i", streamEvent); recebeuResposta=是；开关（流事件）{

    ```
    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        [[NSNotificationCenter defaultCenter]
         postNotificationName:@"serverResponseArrived"
         object:nil];
        break;
    case NSStreamEventHasBytesAvailable:

        if (theStream == inputStream) {

            uint8_t buffer[10240];
            int len;

            while ([inputStream hasBytesAvailable]) {
                len = [inputStream read:buffer maxLength:sizeof(buffer)];
                if (len > 0) {

                    NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];
                        //NSLog(@"server said: %@", output);
                    NSArray *firstSplit = [output componentsSeparatedByString:@"=end="];
                        // NSLog(@"firstSplit, %@",[firstSplit objectAtIndex:0]);
                    NSError *parseError = nil;
                    NSDictionary *outputDictionary =[[NSDictionary alloc]init];
                    outputDictionary = 
                    [NSJSONSerialization JSONObjectWithData: [[firstSplit objectAtIndex:0] dataUsingEncoding:NSASCIIStringEncoding] 
                                                    options: NSJSONReadingAllowFragments
                                                      error: &parseError];                        
                        //    NSLog(@"server said outputDictionary: %@", outputDictionary);

                    if (nil != output) {
                        if([(NSString*)[outputDictionary objectForKey:@"action"]isEqualToString:@"connect"])
                        {
                                //  NSLog(@"stream with server is opened. ready to send contacts.");
                                //   NSLog(@"action: %@",(NSString*)[outputDictionary objectForKey:@"action"]);
                            [[NSNotificationCenter defaultCenter]
                             postNotificationName:@"beginSyncronization"
                             object:nil];
                        }else if([(NSString*)[outputDictionary objectForKey:@"action"]isEqualToString:@"add"]&&[(NSString*)[outputDictionary objectForKey:@"type"]isEqualToString:@"response"]&&[(NSString*)[outputDictionary objectForKey:@"result"]isEqualToString:@"done"]&&[(NSString*)[outputDictionary objectForKey:@"element"]isEqualToString:@"contact"])
                        {
                                //    NSLog(@"enviar data");
                            [[NSNotificationCenter defaultCenter]
                             postNotificationName:@"sendNextContact"
                             object:nil];
                                //[self prepareDetails];
                        }else if([(NSString*)[outputDictionary objectForKey:@"action"]isEqualToString:@"add"]&&[(NSString*)[outputDictionary objectForKey:@"type"]isEqualToString:@"response"]&&[(NSString*)[outputDictionary objectForKey:@"result"]isEqualToString:@"error"]&&[(NSString*)[outputDictionary objectForKey:@"element"]isEqualToString:@"contact"])
                        {
                                //     NSLog(@"action: %@",(NSString*)[outputDictionary objectForKey:@"action"]);
                            [[NSNotificationCenter defaultCenter]
                             postNotificationName:@"sendSameContactTCP"
                             object:nil];
                        }else if([(NSString*)[outputDictionary objectForKey:@"action"]isEqualToString:@"SyncMobile"]&&[(NSString*)[outputDictionary objectForKey:@"type"]isEqualToString:@"response"]&&[(NSString*)[outputDictionary objectForKey:@"result"]isEqualToString:@"error"])
                        {
                                //   NSLog(@"action: %@",(NSString*)[outputDictionary objectForKey:@"action"]);
                            [[NSNotificationCenter defaultCenter]
                             postNotificationName:@"sendSameContactTCP"
                             object:nil];
                        }
                    }
                }
            }
        }else{
            NSLog(@"STREAM HAS NO BYTES! %@:",theStream);
        }
        break;

    case NSStreamEventErrorOccurred:

        NSLog(@"Can not connect to the host!");
        break;

    case NSStreamEventEndEncountered:

        NSLog(@"Stream closed");
        [theStream close];
        [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        theStream = nil;
        [[NSNotificationCenter defaultCenter] postNotificationName:@"sendSameContactTCP" object:self];
        break;
    default:
        NSLog(@"Unknown event");
     /*   [[NSNotificationCenter defaultCenter]
         postNotificationName:@"sendSameContactTCP"
         object:nil];*/ 
    ```

    }

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:00:21.260

我改用了 robbiehanson 的 CocoaAsyncSocket 库，它更快更稳定：

[https://github.com/robbiehanson/CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

如果您必须进行套接字连接，我强烈建议您使用它，它会更快更简单（至少对我而言）。

# ruby-on-rails - Rails - 显示分组记录

> ID：13705338
> 
> 赞同：2
> 
> 时间：2012-12-04T14:39:29.643
> 
> 标签：ruby-on-rails, view, unique

我有一些记录：

```
Type Name
2 USA
2 USA
3 Canada
4 Mexico 
1 Canada
2 Mexico
3 USA 
```

我只想显示唯一类型的列表：1、2、3、4（没有双、三记录）。在我看来，我试图做类似的事情：

```
<% @Orders.group(:type).each do |order| %>
... showing in the table
<% end %> 
```

但我收到以下错误：未定义的方法 `group' for #

我需要在控制器/模型中添加一些方法吗？为什么 - 如果 .each 方法在视图中可以正常工作，而 group 不能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:14:53.103

有点不清楚你到底想返回/显示什么，但我想你可能想看看`#group_by`（[http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)）。

或者，查看此页面上的一些聚合方法：http: [//api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-calculate](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-calculate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:52:26.733

通常实例变量是小写的，`@orders`不是`@Orders`. 该错误告诉您它无法`group`为 中的任何内容找到方法`@Orders`，因此这就是您要关注的内容。

整理好之后，您可能想要使用 ActiveRecord`distinct`运算符，或者，如果您的记录是 ruby​​ 格式，请`.uniq`在集合（即数组）上使用。

# c# - 多个更新语句抛出“无法打开”

> ID：13705341
> 
> 赞同：2
> 
> 时间：2012-12-04T14:39:33.857
> 
> 标签：c#, sqlite, windows-runtime, sql-update, sqlite-net

当我尝试在 WinRT 中 SQLite 的同一个事务中对同一个表进行多次更新时，我得到一个“无法打开”的异常。

我为此用例创建了一个示例应用程序。下面的代码在单击第一个按钮时，我在事务中创建一个表，在单击另一个按钮时，我试图再次更新同一记录。在那里，它会引发“无法打开”的异常。

[应用代码](https://skydrive.live.com/redir?resid=3031BCF7E1275424!228&authkey=!AJge6sgTIsg8EaY)：

```
private SQLiteConnection getConnection()
{
    var connection = SQLiteConnectionPool.Shared.GetConnection(
                           new SQLiteConnectionString("sample.db", false));
    return connection;
}

private void Button_Click_1(object sender, RoutedEventArgs e)
{
    SQLiteConnection con = getConnection();
    con.BeginTransaction();
    {
        try
        {
            var command = new SQLiteCommand(con) {
                CommandText =
                    @"create table konysyncMETAINFO (
                        id bigint not null,
                        versionnumber int,
                        lastserversynccontext nvarchar(1000),
                        filtervalue nvarchar(1000),
                        replaysequencenumber integer,
                        lastgeneratedid integer,
                        scopename nvarchar(100),
                        primary key (id))"
            };
            var xyz = (double)command.ExecuteNonQuery();

            var command2 = new SQLiteCommand(con) {
                CommandText =
                    @"insert into konysyncMETAINFO
                        (id,scopename,versionnumber,lastserversynccontext,
                         replaysequencenumber,lastgeneratedid)
                      values ('1','testscope','0','','0','-1')"
            };
            var xyz2 = (double)command2.ExecuteNonQuery();

            var command3 = new SQLiteCommand(con) {
                CommandText =
                    @"insert into konysyncMETAINFO
                        (id,scopename,versionnumber,lastserversynccontext,
                         replaysequencenumber,lastgeneratedid)
                      values ('2','testscope2','0','','0','-1')"
            };
            var xyz3 = (double)command3.ExecuteNonQuery();
            con.Commit();
        }
        catch (Exception ex)
        {
            con.Rollback();
        }
    }
}

private void Button_Click_2(object sender, RoutedEventArgs e)
{
    SQLiteConnection con = getConnection();
    con.BeginTransaction();
    {
        try
        {
            var command = new SQLiteCommand(con) {
                CommandText =
                    @"Update konysyncMETAINFO
                      set lastgeneratedid='4'
                      WHERE scopename = 'testscope'"
            };
            var xyz = (double)command.ExecuteNonQuery();

            //var command2 = new SQLiteCommand(con) { CommandText = "insert into konysyncMETAINFO (id,scopename,versionnumber,lastserversynccontext,replaysequencenumber,lastgeneratedid) values ('3','testscope3','0','','0','-1')" };
            //var xyz2 = (double)command2.ExecuteNonQuery();

            var command3 = new SQLiteCommand(con) {
                CommandText =
                    @"Update konysyncMETAINFO 
                      set lastgeneratedid='3'
                      WHERE scopename = 'testscope'"
            };
            var xyz3 = (double)command3.ExecuteNonQuery();
            con.Commit();
        }
        catch (Exception ex)
        {
            con.Rollback();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:29:52.680

您可能在 sqlite-net 中偶然发现[了与我相同的错误。](https://github.com/praeclarum/sqlite-net/issues/78)我创建[了一个修复程序](https://github.com/praeclarum/sqlite-net/issues/78)，该修复程序已被拉回主分支，但此后[NuGet 上没有新版本。](http://nuget.org/packages/sqlite-net)您可以[直接下载最新的资源](https://github.com/praeclarum/sqlite-net)并检查它是否可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T06:13:01.580

在打开数据库后立即添加此代码将解决问题（无论是在侧载时还是在应用程序通过商店下载时）

> verifySQLResult(SQLite3.Execute(_db, "PRAGMA temp_store = memory;", 0, 0, 0));

来源：

[https://github.com/praeclarum/sqlite-net/issues/78](https://github.com/praeclarum/sqlite-net/issues/78)

# c - 定点乘法

> ID：13705343
> 
> 赞同：2
> 
> 时间：2012-12-04T14:39:36.537
> 
> 标签：c, fixed-point

我需要根据一个非常数因子将一个值从一个单位转换为另一个单位。输入值范围为 0 到 1073676289，范围值范围为 0 到 1155625。转换可以这样描述：

```
output = input * (range / 1073676289) 
```

我自己最初的定点实现感觉有点笨拙：

```
// Input values (examples)
unsigned int input = 536838144;  // min 0, max 1073676289
unsigned int range = 1155625;    // min 0, max 1155625

// Conversion
unsigned int tmp = (input >> 16) * ((range) >> 3u);
unsigned int output = (tmp / ((1073676289) >> 16u)) << 3u; 
```

我的代码可以改进得更简单或更准确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:15:38.553

这将为您提供没有浮点值的最佳精度，结果将四舍五入为最接近的整数值：

```
output = (input * (long long) range + 536838144) / 1073676289; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T15:12:50.393

问题是这`input * range`会溢出一个 32 位整数。通过使用 64 位整数来解决这个问题。

```
uint64_least_t tmp;
tmp = input;
tmp = tmp * range;
tmp = tmp / 1073676289ul;
output = temp; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T15:52:00.003

一次快速的谷歌之旅让我注意到了[http://sourceforge.net/projects/fixedptc/](http://sourceforge.net/projects/fixedptc/)

它是头文件中的 ac 库，用于管理 32 位或 64 位整数中的定点数学。

对以下代码进行一些实验：

```
#include <stdio.h>
#include <stdint.h>

#define FIXEDPT_BITS        64

#include "fixedptc.h"

int main(int argc, char ** argv)
{
    unsigned int input = 536838144;  // min 0, max 1073676289
    unsigned int range = 1155625;    // min 0, max 1155625

    // Conversion
    unsigned int tmp = (input >> 16) * ((range) >> 3u);
    unsigned int output = (tmp / ((1073676289) >> 16u)) << 3u;

    double output2 = (double)input * ((double)range / 1073676289.0);

    uint32_t output3 = fixedpt_toint(fixedpt_xmul(fixedpt_fromint(input), fixedpt_xdiv(fixedpt_fromint(range), fixedpt_fromint(1073676289))));

    printf("baseline = %g, better = %d, library = %d\n", output2, output, output3);

    return 0;
} 
```

给我以下结果：

```
baseline = 577812, better = 577776, library = 577812 
```

显示比您的代码更好的精度（匹配浮点）。在引擎盖下它没有做任何非常复杂的事情（并且在 32 位中根本不起作用）

```
/* Multiplies two fixedpt numbers, returns the result. */
static inline fixedpt
fixedpt_mul(fixedpt A, fixedpt B)
{
    return (((fixedptd)A * (fixedptd)B) >> FIXEDPT_FBITS);
}

/* Divides two fixedpt numbers, returns the result. */
static inline fixedpt
fixedpt_div(fixedpt A, fixedpt B)
{
    return (((fixedptd)A << FIXEDPT_FBITS) / (fixedptd)B);
} 
```

但它确实表明您可以获得所需的精度。你只需要 64 位就可以做到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:00:06.557

你不会再简单了`output = input * (range / 1073676289)`

如以下评论中所述，如果您被限制为整数运算，那么 for `range < 1073676289`:`range / 1073676289 == 0`所以您最好使用：

```
output = range < 1073676289 ? 0 : input 
```

如果那不是您想要的并且您实际上想要精确，那么

```
output = (input * range) / 1073676289 
```

将是要走的路。

如果你需要做很多这些，那么我建议你使用`double`并让你的编译器矢量化你的操作。精度也可以。

# javascript - 带有链接的 jQuery Catcomplete

> ID：13705346
> 
> 赞同：2
> 
> 时间：2012-12-04T14:39:44.320
> 
> 标签：javascript, jquery, jquery-ui

所以，我试图在我的 catcomplete 结果中使用 HTML 链接，但是 jquery 会自动将我的 html 代码转换为文本，就像在图像上一样：

![jQuery CatComplete](../Images/ebdbd2c828fa53e246b0b9cbacfeede8.png)

我的 jQuery 代码是：

```
$( "#global-search" ).catcomplete({
    delay: 0,
    source: "globalsearch.php"
}); 
```

请不要对我说使用`select: function( event, ui ) { window.location.href = ui.item.value; }`，因为它在使用 ajax 时只能工作一次（我真的不知道为什么，但它只是不起作用），我昨天在这里问了一些问题，询问如何修复它，没有人帮我解决了。

那么，将 html 转换为文本后，如何在结果中添加 html 超链接？

全局搜索.php： ![在此处输入图像描述](../Images/3a8f522edaa4d1e343e63db43c4ca576.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:55:23.103

查看[自定义数据和显示示例](http://jqueryui.com/autocomplete/#custom-data)。您会看到他们已经用`_renderItem`自定义方法替换了该方法。您需要做同样的事情来覆盖您的项目的显示方式。

```
$('#global-search').data( "autocomplete" )._renderItem = function( ul, item ) {
  return $( "<li>" )
    .data( "item.autocomplete", item )
    .append((item.link) ? "<a href='" + item.link + "'>" + item.label + "</a>" : "<a>" + item.label + "</a>" )
    .appendTo( ul );
}; 
```

在没有看到您的输出的情况下，`globalsearch.php`我无法确切告诉您如何设置它，但基本上您希望为`link`返回的 JSON 添加一个属性，如果链接存在，则打印带有链接的锚点作为其`href`.

您如何处理选择链接与外部链接作为练习留给 OP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:16:24.870

来自自动完成小部件文档

> 与您使用的变体无关，标签始终被视为文本。如果您希望标签被视为 html，您可以使用 Scott González 的 html 扩展。这些演示都专注于源选项的不同变体——寻找一个与您的用例相匹配的变体，然后查看代码。

Scott González 的 html 扩展是[https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.html.js](https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.html.js)。我还在下面发布了代码。

```
/*
 * jQuery UI Autocomplete HTML Extension
 *
 * Copyright 2010, Scott González (http://scottgonzalez.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * http://github.com/scottgonzalez/jquery-ui-extensions
 */
(function( $ ) {

var proto = $.ui.autocomplete.prototype,
    initSource = proto._initSource;

function filter( array, term ) {
    var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
    return $.grep( array, function(value) {
        return matcher.test( $( "<div>" ).html( value.label || value.value || value ).text() );
    });
}

$.extend( proto, {
    _initSource: function() {
        if ( this.options.html && $.isArray(this.options.source) ) {
            this.source = function( request, response ) {
                response( filter( this.options.source, request.term ) );
            };
        } else {
            initSource.call( this );
        }
    },

    _renderItem: function( ul, item) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( $( "<a></a>" )[ this.options.html ? "html" : "text" ]( item.label ) )
            .appendTo( ul );
    }
});

})( jQuery ); 
```

编辑在使用扩展时尝试下面的代码

```
$( "#global-search" ).catcomplete({
    delay: 0,
    html: true,
    source: "globalsearch.php"
}); 
```

# android - 如何强制 Facebook 显示 URL 内容？

> ID：13705347
> 
> 赞同：0
> 
> 时间：2012-12-04T14:39:45.447
> 
> 标签：android, facebook-android-sdk

目前，我的 facebook 插件能够将应用程序中的 URL 发布到用户的墙上。但是，发布的 URL 将作为简单的 URL（链接）发布。目前看起来是这样的：

> 我已经发布了一条消息和一个[http://www.site.com](http://www.site.com)

如何强制 Facebook 获取并显示 URL 的内容并将其发布到用户的文本中？像这样的东西

![](../Images/48dcabfcca05c20cea9ae39b36fe1347.png)

我将消息`String`和 URL 发布为`Uri`. 代码如下。

```
private static final String MSG = "I have just posted a message and a link";
private static final String MSG2 = " to http://www.site.com";
private static final Uri MSG_URL = Uri.parse("http://www.site.com");
private void postMessageInThread() {
        Thread t = new Thread() {
            public void run() {

                try {
                    facebookConnector.postMessageOnWall(MSG + 
                            MSG2 + MSG_URL);
                    mFacebookHandler.post(mUpdateFacebookNotification);
                } catch (Exception ex) {
                    Log.e(TAG, "Error sending msg", ex);
                }
            }
        };
        t.start();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:56:46.053

使用参数发布 URL `link`，而不是让它成为消息的一部分。

请参阅[https://developers.facebook.com/docs/reference/api/user/#links](https://developers.facebook.com/docs/reference/api/user/#links)

# python - 使用 Python 遍历 HDFS

> ID：13705348
> 
> 赞同：1
> 
> 时间：2012-12-04T14:39:50.267
> 
> 标签：python, hadoop, hdfs

是否可以使用 Python 遍历 HDFS？如果可能，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-30T02:50:40.240

基于 libhdfs3 的 hdfs3 支持[这个](http://hdfs3.readthedocs.org/en/latest/)

```
from hdfs3 import HDFileSystem
hdfs = HDFileSystem()
hdfs.walk('/path/to/directory') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:45:18.500

您可以查看一些库：

*   [libpydfs](http://code.google.com/p/libpyhdfs/)
*   [pydoop](http://pydoop.sourceforge.net/docs/api_docs/hdfs_api.html#hdfs-api)

# ruby-on-rails - 可以为视图循环中定义的变量创建路由吗？

> ID：13705349
> 
> 赞同：3
> 
> 时间：2012-12-04T14:39:54.430
> 
> 标签：ruby-on-rails, ruby, hyperlink, routes

我有一条适用于我的“事物”显示视图的路线。该对象是嵌套的。这是工作路线：

```
match 'parents/:parent_id/childs/:id/thing' => 'childs#thing', :as => :thing 
```

我的问题是我想让这个链接在这些对象的索引中出现上一层。该链接出现在一个循环中，当我对链接使用 :thing 符号时，它表示它没有路由。现在我知道出了什么问题，它没有在循环的每次迭代中获取对象的特定 ID。但我不知道如何解决这个问题。所以基本上我认为我正在寻找的是：

```
match 'parents/:parent_id/childs/(way to pass loop id goes here)/thing' => 'childs#thing', :as => :thing 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:47:55.813

您可以在路由声明中为参数指定您想要的名称，例如`:index`

```
match 'parents/:parent_id/childs/:index/thing' => 'childs#thing', :as => :thing 
```

接下来，在 中`ChildController`，您将获得索引值`params[:index]`

```
def thing
  index = params[:index]
  # Example: find item by index using their creation date
  child = Child.order("created_at ASC").offset(index).limit(1).first

end 
```

# javascript - 如何使用jquery查找相对附近的元素

> ID：13705350
> 
> 赞同：0
> 
> 时间：2012-12-04T14:39:52.360
> 
> 标签：javascript, jquery, ruby-on-rails

我有 20 个结构相似的 div，其中有一个我想用来提交表单的关闭按钮：

```
<div id="product_1">
  <button type="button" class="close-div"</button>  <!!!! the close button!!!
  <div class="span6">
    <div class="row">
      <div class="span2">
        <p>content</p>
      </div>
      <div class="span4">
        <h2>content</h2>
        <%= form_for(product, :remote => true) do |f| %>
          <div id="slider_product_1"</div>
          <%= f.hidden_field :value, :id => "value_product_1", class: "product-value" %>
          <%= f.submit 'Ready', :id => "submit_product_1", :class => "submit-button" %>
        <% end %>
      </div>
    </div>
  </div>
</div> 
```

我已经尝试过使用兄弟姐妹、父母、孩子、this、find 或者没有发送任何内容，或者表单被发送了 20 次（页面中有 20 个具有相似结构的表单）。任何帮助将不胜感激

```
<script type='text/javascript'>
  $(".close-div").on("click", function() {
    $(this).siblings().children(".product-value").val(2);
    $(this).siblings().children(".submit-button").click();
    $(this).parent().slideUp();
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:45:53.173

```
<script type='text/javascript'>
  $(".close-div").on("click", function() {
    var $parent = $(this).parent();
    $parent.find(".product-value").val(2);
    $parent.find(".submit-button").click();
    $parent.slideUp();
  });
</script> 
```

还要确保关闭 <button> 标签。看起来它缺少一个>。

# javascript - jqPlot饼图jqplot-event-canvas位置左上角

> ID：13705352
> 
> 赞同：2
> 
> 时间：2012-12-04T14:40:02.703
> 
> 标签：javascript, jquery, graph, jqplot, pie-chart

我刚开始使用 JqPlot 并想显示一个小图表

但是，顶部和左侧总是有一个小的边距。

![顶部和左侧的填充](../Images/df123e8a2b608e38a85dd3e9ac61875e.png)

查看生成的 css，jqplot-event-canvas 被赋予绝对位置，顶部和左侧设置为 10px。

有没有一种简单的方法来解决这个问题，以便在没有额外间距的情况下定位饼图？

我试图在网格和饼图渲染器选项中将填充设置为 0。还设置 show:false 在轴上，标题，ledged ...，有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T07:20:41.223

Try setting the `gridPadding` like this:

```
var plot1 = $.jqplot('pie1', [data], {
    gridPadding: {top:0, bottom:0, left:0, right:0},
.... 
```

Because by default, each plot has the following grid padding:

```
{top:10, right:10, bottom:23, left:10}; 
```

I think this might explain the issue you are seeing.

# regex - 正则表达式用零替换字符

> ID：13705357
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:10.450
> 
> 标签：regex, replace, zero

我有以下字符串`3}HFB}4AF4}1 -M}1.`

我已经使用正则表达式搜索了这个字符串：

```
([0-9])(\})([A-Z]{3})(\})([0-9][A-Z]{2}[0-9])(\})([0-9])(\s\-)([A-Z])(\})([0-9]). 
```

我想用`}`替换`0`。我正在寻找的结果是`30HFB04AF401-M01`，任何帮助都是适用的。我使用的工具是 Regex Buddy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:09:47.357

# 一个*可能的*解决方案

问题解决了？至少在 JavaScript 中:-)

```
"3}HFB}4AF4}1 -M}1".replace(/\}/g, "0");
// "30HFB04AF401 -M01" 
```

我没有抓住重点，对吧？

假设语言是 JavaScript，我们可以写类似

```
"dfghj456783}HFB}4AF4}1 -M}1fghjkl8765".replace(/(?:[\d\w\s]+)([0-9]}[A-Z]{3}}[0-9][A-Z]{2}[0-9]}[0-9] -[A-Z]}[0-9])(?:[\d\w\s]+)/g, function () {
    return arguments[1].replace(/}/g, "0");
}); 
```

其他语言中可能发生的事情可能是另一回事。

试试[RegexBuddy 的主页](http://www.regular-expressions.info/tools.html)了解详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:36:03.980

所以你已经有了一个表达式来查找字符串的实例。现在您可以使用组来替换字符，也可以对找到的字符串使用单独的正则表达式，只需替换其中的`}`字符`group(0)`（这是输入的整个匹配部分）。我当然更喜欢后者。

Fred 好像已经为你创建了替换方法，这里不再赘述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:22:47.057

我已经设法在 Regex Buddy 使用的 JGSoft 语言中找到了格式的解决方案，这要感谢所有提供的建议，这些建议帮助我将我的想法引导到正确的方向。

解决方案（我仍然是 Regex 的初学者，因此语法可能效率不高，但它可以完成工作！！）

使用组名而不是正则表达式通过反向引用和`$`语法分配组。

因此替换字符串或任何类似字符串中的`0`for 。我使用了以下搜索和替换语法`}``3}HFB}4AF4}1 -M}1`

搜索 ：`(?<Gp1>([0-9]))(?:})(?<Gp2>([A-Z]){3})(?:})(?<Gp3>([0-9])([A-Z]{2})([0-9]))(?:})(?<Gp4>([0-9]))(?:\s-)(?<Gp5>([A-Z]))(?:})(?<Gp6>[0-9])`

代替 ：`${Gp1}0${Gp2}0${Gp3}0${Gp4}-${Gp5}0${Gp6}`

结果 ：`30HFB04AF401-M01`

# asp.net - 在 ASP.NET WebService 中接受 UTF-8 编码的字符串

> ID：13705359
> 
> 赞同：4
> 
> 时间：2012-12-04T14:40:11.387
> 
> 标签：asp.net, web-services, unicode, encoding, utf-8

我有一个看起来像这样的 ASP.NET WebService：

```
[WebMethod]
public static void DoSomethingWithStrings(string stringA, string stringB)
{
    // and so on
} 
```

第三方应用程序应调用此 Web 服务。但是，此应用程序将字符串编码为 UTF-8，并且所有变音符号都替换为“??”。我可以查看通话并且特殊字符的格式很好：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- ... -->
<SoapCall>
    <DoSomethingWithStrings>
        <stringA>Ä - Ö - Ü</stringA>
        <stringB>This is a test</stringB>
    </DoSomethingWithStrings>
</SoapCall> 
```

当我简单地在 webservice 方法中打印字符串时，这会产生以下输出：

> ?? - ?? - ??
> 
> 这是一个测试

如何配置 WebService 以接受 UTF-8 编码的字符串？

**更新**

Fiddler 还告诉我 http 请求的内容类型字符集是 UTF-8。

**更新 2**

我尝试添加以下代码以`global.asax`进行调试：

```
public void Application_BeginRequest(object sender, EventArgs e)
{
    using (var reader = new System.IO.StreamReader(Request.InputStream))
    {
        string str = reader.ReadToEnd();
    }
} 
```

这将读取实际的 SOAP 调用。`StreamReader`s 编码设置为 UTF-8 。SOAP 调用看起来正确：

```
<?xml version="1.0" encoding="UTF-8" ?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <DoSomethingWithStrings xmlns="http://www.tempuri.org/">
            <stringA>Ä - Ö - Ü</stringA>
            <stringB>This is a test!</stringB>
        </DoSomethingWithStrings>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在`web.config`文件中正确设置了全球化设置：

```
<globalization requestEncoding="UTF-8" responseEncoding="UTF-8" culture="de-DE" uiCulture="de-DE" /> 
```

所以看起来反序列化 SOAP 消息的东西不使用 UTF-8 而是 ASCII 编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:57:50.797

最后，事实证明在接受 HTTP 消息时出了点问题。我实际上不知道是什么操纵了 HTTP 请求，但我找到了一个解决方法。尽管 Fiddler 在我的 is just 中向我展示了正确的内容类型 ( ) ，`text/xml; charset=utf-8`这导致在 ASMX 序列化程序中回退到默认 (ASCII) 编码。我已将以下代码添加到处理程序中，现在一切正常。`Application_BeginRequest``Request.RequestContext.HttpContext.Request.ContentType``text/xml``Application_BeginRequest`

```
if (Request.RequestContext.HttpContext.Request.ContentType.Equals("text/xml"))
{
    Request.RequestContext.HttpContext.Request.ContentType = "text/xml; charset=UTF-8";
} 
```

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:43:29.650

试试这个：-

```
 byte[] bytes=Encoding.UTF8.GetBytes(yourString); 
```

**笔记：-**

> 字符串从不包含任何 utf-* 或任何其他编码的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:06:09.747

SOAP 调用在某处被解码为 ASCII - 每个变音符号都是 2 个字节，其中设置了高位，`??`当解码为 ASCII 时变成。

所以，这样的事情正在发生：

```
byte[] bytesSentFromClient = Encoding.UTF8.GetBytes("Ä - Ö - Ü");
string theStringIThenReceiveInMyMethod = Encoding.ASCII.GetString(bytesSentFromClient);
Console.WriteLine(theStringIThenReceiveInMyMethod);
//?? - ?? - ?? 
```

为了确认这确实发生了，您应该比较`stringA == "Ä - Ö - Ü"`而不是在某处打印它。

我想您可以先在项目范围内搜索“ASCII”，然后在找到任何东西时从那里开始工作。

你也可以试试

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8"/> 
```

在文件中的`<system.web>`标签下`Web.config`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:02:55.740

我有同样的问题。Asmx Web 服务将我的 UTF-8 转换为 ASCII，或者说是 ??????。你的帖子对我帮助很大。我找到的解决方案是将 SOAP 协议的版本从 1.1 更改为 1.2 我的意思是：

```
POST /WebService1.asmx HTTP/1.1
Host: www.tempuri.org
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.tempuri.org/HelloWorld"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <HelloWorld xmlns="http://www.tempuri.org/">
        <inputParam>Привет</inputParam>
    </HelloWorld>
  </soap:Body>
</soap:Envelope> 
```

有问题。但是当我将请求更改为 SOAP 1.2 时：

```
POST /WebService1.asmx HTTP/1.1
Host: www.tempuri.org
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <HelloWorld xmlns="http://www.tempuri.org/">
       <inputParam>Привет</inputParam>
    </HelloWorld>
  </soap12:Body>
</soap12:Envelope> 
```

问题解决了。

# css - 在两种组件类型上设置样式

> ID：13705360
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:11.153
> 
> 标签：css

我好像脑子有问题了。

我应该如何设计一个 CSS 来包含分类为*intro的**h1*和*p*？！

 *这将针对**所有** *h1* s 和*p* s。

```
h1, p { ... } 
```

但是这个

```
h1, p .intro { ... } 
```

仅针对*h1*归类为*intro*，而不影响归类为 intro 的 *p* *s*。那是什么语法（所以我不必定义以下内容？

```
h1.intro { ... }
p.intro { ... } 
```

我还测试了以下内容，但没有成功。

```
h1.intro, p. intro { ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:43:06.660

几乎正确。跳过*p*处的空白。

```
h1.intro, p.intro { ... } 
```

当用作OP粘贴它时，即

```
h1.intro, p .intro { ... } 
```

解释器将看到一个名为*intro*的类未连接到任何内容的上下文，即等同于以下内容。

```
h1.intro, .intro { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:41:30.283

只需使用逗号分隔选择器：

```
h1.intro,
p.intro {
 /*...*/
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ERssX/1/)。

或者您可以定义所有常见样式，然后仅覆盖具有该类的那些元素的特定样式：

```
.intro {
    /* ...all generic default styles */
}

p.intro,
h1.intro {
    /* specific style overrides for the h1 and p elements of this class */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ERssX/)。

原因是：

```
h1.intro, p. intro 
```

不起作用（取决于您在这种情况下对“作品”的评估）是这将`h1`设置 class`intro`的样式，但将设置作为元素`intro`后代的class 元素的样式， the和`p`之间的空格暗示后代关系。`p``.intro`*

# ios - iOS iPad 自定义日历控件

> ID：13705362
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:14.007
> 
> 标签：ios, view, calendar, schedule

是否有任何适用于 iPad 的自定义日历控件可以帮助我创建日程视图？我只需要日程表视图来进行新的约会。这就是我想要完成的： ![调度器](../Images/564912fce77beea59ea0ef0424336c95.png)

也许你可以给我一些关于如何解决这个问题的建议。我是 iOS 开发新手，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:47:52.633

[Cocoa Controls](http://www.cocoacontrols.com)上有很多日历。

其中之一看起来像您想要的：[MADayView](http://www.cocoacontrols.com/platforms/ios/controls/madayview)。

![截图](../Images/78f4baccd3ed3f591b8cd1bdf746a3a2.png)

您还可以查看：

*   [OC日历](http://www.cocoacontrols.com/platforms/ios/controls/occalendar)
*   [MAWeekView](http://www.cocoacontrols.com/platforms/ios/controls/maweekview)
*   [卡尔](http://www.cocoacontrols.com/platforms/ios/controls/kal)
*   [Tapku 日历](http://www.cocoacontrols.com/platforms/ios/controls/tapku-calendar)
*   [CK日历](http://www.cocoacontrols.com/platforms/ios/controls/ckcalendar)

# xamarin.ios - MonoTouch Message Element 使用字符串元素操作页面

> ID：13705363
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:13.103
> 
> 标签：xamarin.ios, monotouch.dialog

我有以下代码：

```
Section _section = new Section ("Test");

foreach (ExampleData data in Example.data) {

     MessageElement Item = new MessageElement (){

    Sender = data.Name,
    Subject = data.Value,
    Body = data.Description,
    Date = data.Modified
         } ;

          _section.Add(Item);

            var root = new RootElement("Item Expanded"){

                new Section ("test2"){
                    new StringElement("Field Name", data.FieldName),
                    new StringElement("Value", data.Value),
                    new StringElement("Description", data.Description)
                }

            } ;
            _section.Add(root);

        } ;

        var _rootElement = new RootElement ("Items") {
            _section
        } ; 
```

我希望它以这样的方式工作，当点击消息元素时，它会显示具有相同数据的 ("test2") 部分（例如，数据是在同一循环运行期间添加的。）我意识到这一点目前不会发生，因为消息元素似乎需要一个动作委托来对点击事件执行任何操作，另外我正在将所有内容添加到同一部分。但是，有没有办法使用消息元素复制多个嵌套根元素和部分的行为？如果我创建新页面/屏幕并尝试以这种方式进行转换，它会搁置导航控制器并且我无法使用后退按钮，即使“push”设置为 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:18:38.763

不确定你到底想要什么。用这个替换你的“Item Expanded”根元素代码，用后退按钮在导航堆栈上推送一个对话框视图控制器。当然，您的 DialogViewcontroller 应该首先在 UINavigation 控制器中才能正常工作

```
 Item.Tapped += delegate(DialogViewController arg1, UITableView arg2, NSIndexPath arg3) 
        {
            var newDialogVC = new DialogViewController(
                UITableViewStyle.Grouped,
                new RootElement("Item Expanded")
                {
                    new Section ("test2"){
                    new StringElement("Field Name", "test"),
                    new StringElement("Value", "test"),
                    new StringElement("Description", "test")
                }
                                                }
                , true);

            arg1.NavigationController.PushViewController(newDialogVC,true);
        }; 
```

# javascript - 使用 Sajax 的 Ajax 回调函数的附加参数

> ID：13705364
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:15.430
> 
> 标签：javascript, ajax, callback, sajax

我有以下情况：

```
// callback function for the asynchronous call
function get_data_cb(z, arg1) {
    // do something
}

function foo() {
    var n = 1;
    // get_data is a server-side function triggered by the AJAX call, 
    // client only has the wrapper function with the same name
    get_data(get_data_cb);  // 1
} 
```

我的问题：

在 1) 处，如何将变量 n 一直传递给 get_data_cb？我在服务器端 ajax 函数上使用 sajax_export() 来生成客户端包装器。

# xslt - xslt (1.0)：向最外层元素添加子节点？

> ID：13705376
> 
> 赞同：1
> 
> 时间：2012-12-04T14:40:41.887
> 
> 标签：xslt, identity

努力解决这个问题；我有一个（Tomcat6 'Context.xml'）默认文档，本质上是这样的：

```
<Context>
<WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

我想添加“资源”和“环境”作为最外层 Context 节点的子节点；所以我最终得到：

```
<Context>
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
    <Resource name="abc"[...]/>
    <Environment name="xyz"[...]/>
</Context> 
```

使用 XSLT 1.0。

（我也想避免假设节点“WatchedResource”存在于文档中。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:18:37.313

```
<xsl:param name="new">
  <Resource name="abc..."/>
  <Environment name="xyz..."/>
</xsl:param>

<xsl:template match="Context">
  <xsl:copy>
    <xsl:copy-of select="@* | node()"/>
    <xsl:copy-of select="$new"/>
  </xsl:copy>
</xsl:template> 
```

应该足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:29:41.157

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
    <Resource name="abc"/>
    <Environment name="xyz"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时：**

```
<Context>
  <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

**产生想要的正确结果：**

```
<Context>
   <WatchedResource>WEB-INF/web.xml</WatchedResource>
   <Resource name="abc"/>
   <Environment name="xyz"/>
</Context> 
```

**请注意**：不依赖于现有元素名称的名称以及文档中是否存在顶部元素的子元素或存在多少子元素。

# android - AdMob 在隐藏键盘时清除 EditText

> ID：13705382
> 
> 赞同：0
> 
> 时间：2012-12-04T14:40:58.360
> 
> 标签：android

![安卓应用的图片](../Images/20b3d1a75ebc8cee664fa9a34c3b1410.png) 嗨，我在我的 android 应用程序中放置了一个 AdMob 代码，但是当软件启动键盘时它会导致问题。看上图：

仅当我使用 AdMob 代码时才会发生这种情况，如果我删除 AdMob 代码，则应用程序可以正常工作。我在我的手机上对其进行了测试，并且我的行为相同（已清理 EditText）。

**配置和代码**

*显现*

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="10" />
<activity android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation|"/> 
```

*Jar 文件* GoogleAdMobAdsSdk-4.1.1.jar

*布局*

```
<com.google.ads.AdView
android:id="@+id/adsense"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:paddingTop="3dp"
android:paddingBottom="3dp"
ads:adSize="BANNER"
ads:adUnitId="xxxxxx999999"
ads:loadAdOnCreate="true" /> 
```

你有什么想法吗？

谢谢！

马塞洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:11:16.447

SharedPreferences 被保存，你回来我希望你知道，可以使用数据返回到调用[Lib](http://developer.android.com/reference/android/content/SharedPreferences.html)

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    SharedPreferences.Editor editor = preferences.edit();
    editor.putString("Name","Harneet");
    editor.commit();

    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    String name = preferences.getString("Name","");
    if(!name.equalsIgnoreCase(""))
    {
    name = name+"  Sethi";  /* Edit the value here*/
    } 
```

[在此处输入链接描述](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

# sql - 所有作业的总和

> ID：13705383
> 
> 赞同：1
> 
> 时间：2012-12-04T14:40:59.677
> 
> 标签：sql

我有一个 SQL 语句，我试图提取所有 JobTypes 的总和，例如，如果有 5 个名为“Process”的作业，它们应该只显示在一行上，其中包含 GB 和 KB 的总和。我该如何做到这一点？谢谢。

所以我会显示： - jpavlov 10 分钟前
2012 年 12 月 1 日，Data Extrat，sum(60)，sum(56) - jpavlov 8 分钟前
，2012 年 12 月 1 日，Process，sum(60)，sum(56)

```
 SELECT 

Jobs.DateCompleted  AS 'DateCompleted',
JobTypes.Name AS 'JobName',
SUM(Metrics.GB) AS GB, 
SUM(Metrics.KB) AS KB
FROM Metrics 

INNER JOIN
Jobs ON Jobs.JobId = Metrics.JobId 
INNER JOIN

Projects ON Projects.ProjectId = Jobs.ProjectId 

INNER JOIN
JobTypes ON JobTypes.JobTypeId = Jobs.JobTypeId

WHERE Jobs.DateCompleted 
Between '12/01/2012' AND '12/03/2012' 

GROUP BY  
Jobs.DateCompleted, 
JobTypes.Name

2012-12-01 04:28:15.477 Data Extract    0.200   210903.738
2012-12-01 04:40:07.913 Data Extract    0.781   819388.602
2012-12-01 04:48:45.493 Data Extract    5.278   5538731.844
2012-12-01 04:54:55.483 Data Extract    6.927   7265870.682
2012-12-01 14:11:38.357 Export  13.189  13828648.369
2012-12-01 16:57:54.840 Process 2.054   2156185.331 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:44:09.947

`CAST (Jobs.DateCompleted AS VARCHAR(MAX))`从`SELECT`以及 中删除`GROUP BY`。

假设：`JobTypes.Name`并且`JobTypes.JobTypeId`有 1 对 1 的映射。

**编辑**

```
SELECT 
JobTypes.Name AS 'JobName',
SUM(Metrics.GB) AS GB, 
SUM(Metrics.KB) AS KB
FROM Metrics 

INNER JOIN
Jobs ON Jobs.JobId = Metrics.JobId 
INNER JOIN

Projects ON Projects.ProjectId = Jobs.ProjectId 

INNER JOIN
JobTypes ON JobTypes.JobTypeId = Jobs.JobTypeId

WHERE Jobs.DateCompleted 
Between '12/01/2012' AND '12/03/2012' 

GROUP BY  
JobTypes.Name 
```

要按字段汇总结果`Name`，您必须删除`DateCompleted`from`Select`和`Group By`.

编辑2：

看看[这个问题](https://stackoverflow.com/questions/5125609/how-to-select-date-without-time-in-sql)并修改你的sql。

```
SELECT 
convert(varchar(10), Jobs.DateCompleted, 120) AS DateCompleted
JobTypes.Name AS 'JobName',
SUM(Metrics.GB) AS GB, 
.....
.....
GROUP BY  
convert(varchar(10), Jobs.DateCompleted, 120),
JobTypes.Name 
```

# jquery - 如何在 jQuery Mobile 中正确使用 $('document').bind('pageinit')？

> ID：13705385
> 
> 赞同：2
> 
> 时间：2012-12-04T14:41:08.693
> 
> 标签：jquery, jquery-mobile, page-init

所以我知道 jQuery Mobile 使用 $('document').bind('pageinit') 而不是 $(document).ready() 因为他们使用 Ajax。[看到这里](http://jquerymobile.com/demos/1.2.0/docs/api/events.html) 但我无法让它工作。例如，我得到了这个：

```
$(document).ready(function() {
$('.scrollingtext').bind('marquee', function() {
var ob = $(this);
var tw = ob.width();
var ww = ob.parent().width();
ob.css({ right: -tw });
ob.animate({ right: ww }, 10000, 'linear', function() {
ob.trigger('marquee');
});
}).trigger('marquee');

}); 
```

效果很好，但是我将其更改为：

```
$('document').bind('pageinit', function(){
    $('.scrollingtext').bind('marquee', function() {
    var ob = $(this);
    var tw = ob.width();
    var ww = ob.parent().width();
    ob.css({ right: -tw });
    ob.animate({ right: ww }, 10000, 'linear', function() {
    ob.trigger('marquee');
    });
    }).trigger('marquee');

    }); 
```

它是一个哑弹。我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:49:27.433

`document`不应在引号之间。此外，它应该应用于页面（具有`data-role="page"`属性的 div）。

```
$(document).on('pageinit','[data-role=page]', function() { 
```

[你可以在这里](http://jsfiddle.net/tMMfD/)看到一个例子

# java - HtmlUnitDriver 似乎缺少 HTTP 组件？

> ID：13705389
> 
> 赞同：1
> 
> 时间：2012-12-04T14:41:22.057
> 
> 标签：java, maven, selenium-webdriver, htmlunit

为了开始使用 Selenium2 和 HtmlUnitDriver，我创建了一个测试项目。只要我使用 FirefoxDriver，一切都运行良好。但是，一旦我切换到 HtmlUnitDriver，我就会得到以下异常。我是否缺少一些依赖项？我没有找到任何文档告诉我必须包含哪些 Maven 依赖项才能使其正常工作。

**例外：**

```
java.lang.NoClassDefFoundError: org/apache/http/impl/conn/PoolingClientConnectionManager
    at com.gargoylesoftware.htmlunit.HttpWebConnection.createHttpClient(HttpWebConnection.java:536)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.getHttpClient(HttpWebConnection.java:500)
    at com.gargoylesoftware.htmlunit.HttpWebConnection.setUseInsecureSSL(HttpWebConnection.java:711)
    at com.gargoylesoftware.htmlunit.WebClient.setUseInsecureSSL(WebClient.java:1096)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.createWebClient(HtmlUnitDriver.java:263)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:129)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:172)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:168)
    at GoogleTest.testMe(GoogleTest.java:20)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: java.lang.ClassNotFoundException: org.apache.http.impl.conn.PoolingClientConnectionManager
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 33 more 
```

项目设置**pom.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>de.test</groupId>
<artifactId>ui-tests</artifactId>
<version>1.0.0-SNAPSHOT</version>

<properties>
    <selenium.version>2.26.0</selenium.version>
    <testNG.version>6.1.1</testNG.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>${selenium.version}</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-htmlunit-driver</artifactId>
            <version>${selenium.version}</version>
        </dependency>

        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>${testNG.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</dependencyManagement>

<dependencies>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>${selenium.version}</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-htmlunit-driver</artifactId>
        <version>${selenium.version}</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>start-server</goal>
                    </goals>
                    <configuration>
                        <background>true</background>
                    </configuration>
                </execution>
                <execution>
                    <id>stop-selenium</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>stop-server</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
                <!-- Skip the normal tests, we'll run them in the integration-test phase -->
                <skip>true</skip>
            </configuration>

            <executions>
                <execution>
                    <phase>integration-test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <skip>false</skip>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

**一个简单的测试类：**

```
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.testng.Assert;
import org.testng.annotations.Test;

public class GoogleTest {

    private static final String SEARCH_BUTTON = "gbqfb";
    public final static String SEARCH_BAR = "gbqfq";
    public final static String RESULT_STATS = "resultStats";

    @Test
    public void testMe() {
        // does not work:
        // java.lang.NoClassDefFoundError:
        // org/apache/http/impl/conn/PoolingClientConnectionManager
         HtmlUnitDriver wd = new HtmlUnitDriver();

//        FirefoxDriver wd = new FirefoxDriver();

        wd.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
        wd.get("http://www.google.de/");

        WebElement searchBar = wd.findElement(By.id(SEARCH_BAR));
        WebElement searchButton = wd.findElement(By.id(SEARCH_BUTTON));

        searchBar.click();
        searchBar.clear();
        searchBar.sendKeys("Selenium Test");
        searchButton.click();

        WebElement resultsText = wd.findElement(By.id(RESULT_STATS));

        String resultsFound = resultsText.getText();
        wd.close();

        Assert.assertTrue(resultsFound.startsWith("Ungefähr 34.100.000 Ergebnisse"));
    }
} 
```

**编辑：修复缺少的依赖！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:30:57.617

尝试移动这个块：

```
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-htmlunit-driver</artifactId>
    <version>${selenium.version}</version>
</dependency> 
```

从该`<dependencyManagement>`部分进入`<dependencies>`POM 部分（其中包含 FireFox 驱动程序）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T10:21:00.883

我遇到了同样的错误，这就是我的解决方法 - 如果您的 httpclient.jar、httpcore、httpmime jar 文件版本与父 3rd 方类不匹配，则会出现此错误。我有 httpclient-4.0.3.jar 版本。下载 httpclient-4.2.jar 并将其添加到我的 NetBeans 的库中。同样添加了 httpcore-4.2.jar 和 httpmime-4.2.jar。班级执行！！从以下存储库下载：http: [//mvnrepository.com/artifact/org.apache.httpcomponents](http://mvnrepository.com/artifact/org.apache.httpcomponents)

# c# - 如何使 PredicateBuilder 不

> ID：13705394
> 
> 赞同：1
> 
> 时间：2012-12-04T14:41:28.797
> 
> 标签：c#, lambda, expression

最近我一直在使用 PredicateBuilder 类[（如图所示）](http://www.albahari.com/nutshell/predicatebuilder.aspx)来帮助生成表达式树。提供的 True、And 和 Or 方法可以正常工作。但是，我也想使用 Not 方法，到目前为止，我的尝试让我得到了错误

```
Incorrect number of parameters supplied for lambda declaration. 
```

这是说的尝试：

```
 public static Expression<Func<T, bool>> Not<T>(this Expression<Func<T, bool>> expr)
    {
        return Expression.Lambda<Func<T, bool>>
            (Expression.Not(Expression.Invoke(expr, expr.Parameters.Cast<Expression>())));
    } 
```

有什么想法吗？
注意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:52:00.883

哎呀，差不多了。我没有给外部 .Lambda 函数提供参数：

```
 public static Expression<Func<T, bool>> Not<T>(this Expression<Func<T, bool>> expr)
    {
        return Expression.Lambda<Func<T, bool>>
            (Expression.Not(Expression.Invoke(expr, expr.Parameters.Cast<Expression>())), expr.Parameters);
    } 
```

# configuration - 如何存储跨应用程序值

> ID：13705397
> 
> 赞同：0
> 
> 时间：2012-12-04T14:41:46.357
> 
> 标签：configuration

我有几个值需要从多个程序中访问。这些值采用键值格式。

IE

```
phone: 733 209 2309
ip address: 111.111.121.111
max-clients: 340 
```

是否有设计用于存储这类东西的服务/协议？我正在考虑使用 mysql 服务器并创建一个名为 configuration 的表；但是，如果有更适合该任务的协议，我很想了解它。我想要一个适用于各种不同编程语言的解决方案。

记录数应少于 5000。这些值通常不会更改（因此实际上不需要快速或同时写入）。但是，快速的读取速度很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:49:32.490

根据你的需要

*   多同时写访问
*   百万条目
*   复杂触发器

从`gzip`到`postgreSQL`，您可以找到`SQLite`（也许是您需要的最佳选择！）、`DB`（伯克利）、`OpenOffice Report`、`MySQL`等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:06:45.300

现在我决定使用 mysql 数据库。大多数语言已经支持 mysql，它可以快速响应本地网络上的请求。这似乎仍然是矫枉过正，但我​​不知道更好的选择。

# c++ - 在 C++ 类库项目中创建模板类

> ID：13705401
> 
> 赞同：2
> 
> 时间：2012-12-04T14:41:56.230
> 
> 标签：c++, templates, class-library

我有一个其他 C++ 项目常用的 C++ 类库项目。为了能够在我的类库项目中使用类，我编写了一个头文件，如下例所示

```
#pragma once
#ifdef MYLIB
# define MYLIB_EXPORT __declspec(dllexport)
#else
# define MYLIB_EXPORT __declspec(dllimport)
#endif 
```

在我想在我的类库项目中创建一个模板类之前没问题。问题是我无法导出我的模板类。

我的类.h

```
template<class T>
class MYLIB_EXPORT MyClass
{
    void myMethod();
    // ...
}

template<class T>
void MyClass::myMethod()
{
    // ...
} 
```

在这种情况下，我收到编译错误，提示“不允许定义 dllimport 函数”。我知道导致问题的原因并且我理解它。使用我的类库项目的其他项目将 MYLIB_EXPORT 关键字转换为 __declspec(dllimport)。因此，他们期望 MyClass 的方法在 DLL 中定义。但是，编译器会在头文件中看到定义。

如何克服这种情况并能够导出在我的类库项目中定义的模板类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:45:37.610

未实例化的模板不能直接编译——它们是*代码生成器*，所以它们实际上只有在实例化时才被翻译成二进制指令；因此，您不能将模板“以二进制形式”导出，就好像它是“常规”函数/类一样（另一方面，至少在理论上您可以导出模板的实例化）。

长话短说：只需将模板留在标题中以供图书馆客户包含。

请注意，这正是您将模板保留在标头中并且通常不会将它们的实现分离到文件中的确切原因`.cpp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:15:36.733

只需删除~~`MYLIB_EXPORT`~~模板类上的语句。然后您可以在类之外定义类函数（但仍然在`*.h`或`*.hpp`头文件中）。

**我的类.h**

```
 template <typename T>
    class MyClass    // MYLIB_EXPORT removed
    {
        void myMethod();
        // ...
    };

    template <typename T>
    void MyClass<T>::myMethod()
    {
        // ...
    } 
```

我得到了这个问题。很长一段时间后，我意识到删除 MYLIB_EXPORT 修复了它。希望这个答案可以为其他人节省时间:-)

# c# - Reponds.appendHeader 在 IE 上不起作用

> ID：13705406
> 
> 赞同：0
> 
> 时间：2012-12-04T14:42:12.187
> 
> 标签：c#, redirect

我使用 C#。使用这种语法 Response.AppendHeader("REFRESH", "2;URL=../Ordres.aspx"); 在 Firefox 和 Chrome 上工作

```
 using (MemoryStream ms = new MemoryStream())
                    {
                        try
                        {
                            PdfExportOptions opts = new PdfExportOptions();
                            opts.ShowPrintDialogOnOpen = true;
                            xtraReport_Pricipal.ExportToPdf(ms, opts);
                            ms.Seek(0, SeekOrigin.Begin);
                            byte[] report = ms.ToArray();
                            Page.Response.ContentType = "application/pdf";
                            Page.Response.Clear();
                            Page.Response.OutputStream.Write(report, 0, report.Length);
                            HttpContext.Current.ApplicationInstance.CompleteRequest();
                        }
                        finally
                        {
                            ms.Close();
                        }
                    }

Response.AppendHeader("REFRESH", "2;URL=../Ordres.aspx"); 
```

但不在 Internet Explorer 上。如何在 IE 上 2 秒后重定向页面？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:47:21.263

use

```
 response.AppendHeader("Content-Disposition", string.Format("attachment;filename={0}", fileName)); 
```

# html5-video - Video.js 中的 MP4 在完全加载之前不会播放

> ID：13705409
> 
> 赞同：9
> 
> 时间：2012-12-04T14:42:37.203
> 
> 标签：html5-video, mp4, preloading, video.js

我正在使用 Video.js 在客户的网站上播放 MP4 格式的视频。该播放器使用 html5 视频和 Adob​​e Flash Player 作为后备。（就我而言，它似乎总是使用 Flash，所以我不知道本机 html5 播放器中是否也存在问题。）

**视频仅在 *.mp4 文件完全加载后开始播放。**所以几秒钟没有缓冲。该文件必须在开始播放之前由浏览器完全下载。

当视频很长时，访问者必须等待很长时间才能看到视频正在播放。

**现在的问题是，是浏览器、脚本（video.js）还是视频文件造成了这个问题。**

在 videojs.com 网站上，但是视频在加载时正在播放，因此可以正常工作。因此我认为它不可能是浏览器。

其他人有这个问题吗？我该如何解决这个问题？
非常感谢任何建议！

谢谢

最大限度

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T17:20:01.780

出现这种情况是因为 mp4 文件的 moov atom 在文件末尾，播放器在开始播放之前需要知道 moov atom，您可以使用 MP4Box 轻松地将 moov atom 移动到文件开头，有一个 gui适用于 Windows 的版本。

在 Linux 命令行中，您可以使用以下命令移动 MA：`MP4Box -add my_video.mp4 my_newVideo.mp4`。

这需要几秒钟。

更多信息：Adobe[在此处对 moov atom 的解释](http://www.adobe.com/devnet/video/articles/mp4_movie_atom.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T13:58:41.903

您确定您的标签带有 preload="none"，因为我遇到了同样的问题并且我有 preload="auto"。我把它改成“无”，效果很好！！

我的问题与 moov atom 无关，因为我也尝试过，但没有任何效果。我什至删除了这个转换后的视频，它仍然可以使用 preload="none"。

鲨鱼

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:42:31.620

我使用此命令添加元数据：

```
MP4Box -isma your-file.mp4 
```

;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:34:04.043

引用[http://docs.videojs.com/docs/guides/options.html](http://docs.videojs.com/docs/guides/options.html)

> preload 属性通知浏览器是否应该在加载视频标签后立即开始下载视频数据。选项为自动、元数据和无。

# sql-server - EF 或 SQL Server - 计算/连续列

> ID：13705411
> 
> 赞同：0
> 
> 时间：2012-12-04T14:42:41.883
> 
> 标签：sql-server, entity-framework

我不确定如何做到这一点以及应该在哪里实施。

我有一个带有列的表：`ID, TypeID, AIndex`。创建新记录时提供`ID`和。`TypeID`这`AIndex`是一个基于两个 ID 的连续列。

在这里举例说明：

```
ID  TypeID  Aindex  
---------------------
1   1       1
1   1       2
1   2       1
1   3       1
2   1       1
2   1       2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:11:23.313

最大的问题是：

**他们有很多人一次写信给这张桌子？**

当您从以前的数据库数据中计算列时，诸如风险之类的`Aindex`事情就是**导致锁**。`max( Aindex ) + 1`

 **如果只在表中插入少量插入，您可以在您最喜欢的层、EF 或 DB 中编写增量代码。但是，如果您的表具有高写入率，您应该寻找一种替代技术，如**计数器表**或其他东西。如果需要，您可以将此计数器表保存在 EF 中。**

# python-2.7 - 使用 Python 的 urllib2 连接 url

> ID：13705424
> 
> 赞同：0
> 
> 时间：2012-12-04T14:43:25.323
> 
> 标签：python-2.7, urllib2

我正在使用 urllib2 抓取一些股票信息。

我的一些代码如下。

```
 cap_url = "http://wisefn.stock.daum.net/company/c1010001.aspx?cmp_cd=%s" % code
    cap_req = urllib2.Request(cap_url)
    cap_data = urllib2.urlopen(cap_req).read()
    ~
    ~
    ~
    depr_url = "http://wisefn.stock.daum.net/company/cF3002.aspx?cmp_cd=%s&frq=Q&rpt=ISM&finGubun=MAIN" % code
    depr_req = urllib2.Request(depr_url)
    depr_data = urllib2.urlopen(depr_req).read()
    ~
    ~
    ~
    transaction_url = "http://www.shinhaninvest.com/goodicyber/mk/1206.jsp?code=%s" % code
    transaction_data = urllib2.urlopen(transaction_url).read()
    soup = BeautifulSoup(transaction_data, fromEncoding="utf-8") 
```

如您所知，%s 是股票代码。使用给定的股票代码，我正在抓取所有股票信息。股票代码总数超过1,600个。然后我用 xlwt 将收集到的信息写入 Excel。

但是，我无法连接到某些 url 或获取那些我可以手动输入该 url 的信息。

有什么问题？以及如何加快抓取页面的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:59:36.093

首先，我会检查网站的 robots.txt 文件。它很可能禁止本机 python 用户代理。所以你可以考虑改变 urllib2 的用户代理。第二。网站内容可能是由 JavaScript 生成的，如果是，则 urllib2 无法对其进行评估。为此，您可以使用 Selenium 驱动程序或 PyQt 框架或类似的。

# c++ - 多个继承类的自定义内存分配和释放

> ID：13705427
> 
> 赞同：11
> 
> 时间：2012-12-04T14:43:32.623
> 
> 标签：c++, memory-management, game-engine

我想在我的项目中进行内存管理。我不想要操作员全局新/删除，所以我实现了一个简单的内存分配器。这是我的代码：

```
class IAllocator
{
public:
    void* Alloc( unsigned int size )
    {
        1\. alloc memory.
        2\. trace alloc.
    }
    void Dealloc( void* ptr )
    {
        1\. free memory.
        2\. erase trace info.
    }
    template< typename T >
    void Destructor( T* ptr )
    {
        if ( ptr )
            ptr->~T();
    }
};
// macro for use easy.
# define MYNEW( T ) new ( g_Allocator->Alloc( sizeof( T ) ) ) T
# define MYDEL( ptr ) if (ptr) { g_Allocator->Destructor(ptr); g_Allocator->Dealloc(ptr); } 
```

然后，我可以使用 MYNEW 来构造对象（同时跟踪分配信息以检查内存泄漏），并使用 MYDEL 来销毁对象（擦除跟踪信息）。

一切看起来都很好......但是，当我尝试将此方法用于多重继承类时，我发现了一个非常严重的问题。在下面看我的测试代码：

```
class A { ... };
class B { ... };
class C : public A, public B { ... };

C* pkC = MYNEW( C );
B* pkB = (B*)pkA;
MYDEL( pkB ); 
```

pkB 和 pkA 的地址不相等。所以内存不会正确释放，并且分配跟踪信息也不会擦除 coorect ......哦......

有什么办法可以解决这个问题吗？</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T15:13:27.597

如果`ptr`指向多态类的一个实例，`dynamic_cast<void*>(ptr)`将产生一个指向由 . 指向的最派生对象的指针`ptr`。换句话说，这个动态转换产生了一个指向分配地址的指针。

但是，使用`g_Allocator->Dealloc(dynamic_cast<void*>(ptr))`不是一个可行的解决方案。问题是，`dynamic_cast<void*>(ptr)`如果`ptr`指向非类对象（例如，原语）或非多态类的实例，则这是非法的。

您可以做的是使用 SFINAE 创建一个函数，该函数将动态转换用于指向多态类的指针，但将静态转换用于指向非类对象和非多态类实例的指针。Boost（现在是 C++11）提供`is_class<T>`和`is_polymorphic<T>`类型的特征将在这方面有所帮助。

例子：

```
template <typename T, bool is_poly>
struct GetAllocatedPointerHelper {
   static void* cast (T* ptr) { return ptr; }
};

template <typename T>
struct GetAllocatedPointerHelper<T, true> {
   static void* cast (T* ptr) { return dynamic_cast<void*>(ptr); }
};

template<typename T>
inline void*
get_allocated_pointer (T* ptr)
{
   const bool is_poly = Boost::is_polymorphic<T>::value;
   return GetAllocatedPointerHelper<T, is_poly>::cast(ptr);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T15:07:21.547

您可以尝试覆盖基类的运算符 new 和 delete，并从该类派生您希望自定义分配器的所有类。按照一个简单的示例：

```
#include <cstdio>
#include <cstdlib>

class Base
{
    public:
        virtual ~Base(){};

        void* operator new(size_t size){return malloc(size);}
        void operator delete(void* pointer){printf("\n%x\n", pointer); free(pointer);}
};

class A : public virtual Base
{
    public:
        ~A(){printf("~A");};
};

class B : public virtual Base
{
    public:
        ~B(){printf("~B");};
};

class C : public A, public B
{
    public:
        ~C(){printf("~C");};
};

int main()
{
    C* c = new C();
    printf("%x\n", c);

    B* b = dynamic_cast<B*>(c);
    printf("%x\n", b);

    delete b;

    return 0;
} 
```

一种可能的输出是：

> 5831d0 5831d4 ~C~B~A 5831d0

在这种情况下，操作员删除收到的正确地址。

# java - 如何扩展画布的 Context2d？

> ID：13705430
> 
> 赞同：0
> 
> 时间：2012-12-04T14:43:33.977
> 
> 标签：java, gwt, java-canvas

我想扩展 Context2d 以创建一个可以被调用的特定方法`context.myMethod();`

使用这个类：

```
class MyContext extends Context2d {
    public myMethod();
} 
```

但是我正在创建画布`Canvas canvas = Canvas.createIfSupported();`，因此我会得到 Context2d`canvas.getContext2d();`

我现在如何强制最新方法返回`MyContext`扩展的类，因为画布元素上`Context2d`没有()...`setContext2d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:47:32.003

`Context2d`是的`JavaScriptObject`，所以您只需将其转换为`MyContext`和/或使用该`cast()`方法：

```
MyContext ctx = canvas.getContext2d().cast(); 
```

# java - 用于游戏的 Java 2D 数组对角线

> ID：13705431
> 
> 赞同：1
> 
> 时间：2012-12-04T14:43:35.587
> 
> 标签：java, loops, multidimensional-array, logic, diagonal

澄清一下，我只想要一两个 for 循环来帮助我，最好是与我在垂直中使用的样式相同:)

我正在使用 2D 数组制作游戏，我需要检查以测试在当前位置（由绿色方块表示）是否存在字符的“​​l”多个对角线序列的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:09:50.063

这是功能，它有效。解释在代码中的注释中，但如果你发现任何令人困惑的地方，请告诉我，我会解释它。

```
public static boolean diagonals(char[][] b, int row, int col, int l) {
  int forwardCounter = 1; // this counts top right to bottom left
  int backCounter = 1; // this counts top left to bottom right
  int distance = 1;
  // 0 = topleft, 1 = topright, 2 = bottomleft, 3 = bottomright
  boolean[] checks = new boolean[]{true, true, true, true};

  char charAtPosition = b[row][col];

  while(checks[0] || checks[1] || checks[2] || checks[3]) {
    for(int i = 0; i < 4; i++) {
      if(checks[i]) {
        // This looks confusing but it's simply just converting i into
        // The four different directions
        checks[i] = checkSquare(b, row + (i < 2 ? -distance : distance),
                col + (i % 2 == 0 ? -distance : distance), charAtPosition);
        if(checks[i]) {
          // If top left or bottom right
          if(i % 3 == 0) {
            backCounter++;
          } else {
            forwardCounter++;
          }
        }
      }
    }

    if (forwardCounter >= l || backCounter >= l) return true;

    distance++;
  }

  return false;
}

private static boolean checkSquare(char[][] b, int row, int col, char check) {
  if(row < 0 || row >= b.length) return false;
  if(col < 0 || col >= b[0].length) return false;

  return check == b[row][col];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:48:25.830

```
public static boolean diagonals(char[][] b, int row, int col, int l) {

            int counter = 1; // because we start from the current position
            char charAtPosition = b[row][col];
            int numRows = b.length;
            int numCols = b[0].length;
            int topleft = 0;
            int topright = 0;
            int bottomleft = 0;
            int bottomright = 0;
            for (int i=row-1,j=col-1;i>=0 && j>=0;i--,j--) {
                if (b[i][j]==charAtPosition) {
                    topleft++;
                } else {
                    break;
                }
            }
            for (int i=row-1,j=col+1;i>=0 && j<=numCols;i--,j++) {
                if (b[i][j]==charAtPosition) {
                    topright++;
                } else {
                    break;
                }
            }
            for (int i=row+1,j=col-1;i<=numRows && j>=0;i++,j--) {
                if (b[i][j]==charAtPosition) {
                    bottomleft++;
                } else {
                    break;
                }
            }
            for (int i=row+1,j=col+1;i<=numRows && j<=numCols;i++,j++) {
                if (b[i][j]==charAtPosition) {
                    bottomright++;
                } else {
                    break;
                }
            }
            return topleft + bottomright + 1 >= l || topright + bottomleft + 1 >= l; //in this case l is 5
    } 
```

这个想法是我们沿着四个方向走并计算步数。这可能不是最有效的实现，但至少它看起来简洁且易于理解。

# ssis - 如何使用 oledb 命令或 oledb 目标（Sql 命令 - 数据访问模式）插入分区视图？

> ID：13705433
> 
> 赞同：1
> 
> 时间：2012-12-04T14:43:35.427
> 
> 标签：ssis

如何在 OLE DB 命令或 oledb 目标（数据访问模式 - sql 命令）中编写查询以将数据从表/视图插入到分区视图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:58:49.603

[分区视图](http://msdn.microsoft.com/en-us/library/ms190019%28v=sql.105%29.aspx)是我在这个问题之前没有经验的东西。使用链接文章中提供的定义，我想出了这个[模式和一个示例插入](http://sqlfiddle.com/#!3/2f489/2/0)来验证我知道我在做什么。

我回滚了事务，所以我的`dbo.Year1998Sales`视图中没有数据。然后我创建了一个新的 SSIS 包。我将 SSIS 用于 SQL Server 2012 的事实与结果无关，配置将是相同的。

我创建了一个新包，添加了一个数据流，添加了一个 OLE DB 连接管理器，在我的数据流中，我有一个连接到 OLE DB 目标的 OLE DB 源。

![在此处输入图像描述](../Images/ce2284f6811d5567e6d6c78a18bc243b.png)

在我的源代码中，我使用了与我的 SQLFiddle 演示中相同的查询

```
SELECT 
    D.number AS OrderId
,   D.number * 100 AS CustomerID
,   DATEADD(D, d.number % 365, '1998-01-01') AS OrderDate
,   1+ (D.number % 12) AS OrderMonth
,   DATEADD(mm, (D.number % 12), '1998-01-01') AS DeliveryDate
FROM
(
    SELECT
        ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) -1 AS some_number  
    FROM
        master.dbo.spt_values AS SV  
) D (number)
ORDER BY D.number ASC; 
```

我选择`dbo.Year1998Sales`了目的地和中提琴，它可以工作。其实不，这并没有让我感到惊讶。SSMS 中起作用的内容在数据流中出错。

> [OLE DB 目标[2](http://sqlfiddle.com/#!3/2f489/2/0) ] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 11.0” Hresult：0x80004005 描述：“分区视图 'FOO.dbo.Year1998Sales' 不可更新为批量操作的目标。”。

# 解析度

此错误消息的重要部分是“批量操作的目标”。`Table or view - fast load`or的数据访问模式`Table name or view name variable - fast load`将导致向表中批量插入，*一般来说*这是您想要的。但是在这种情况下，这是不可能的，因此必须使用目的地的 RBAR（逐行）版本`Table or view`或`Table name or view name variable`.

这确实有效，对于较小的数据集，这将是我的方法。

## 备选方案 1

完全绕过视图的逻辑构造，通过条件拆分重新创建逻辑并写入 N 个表。这将允许您对表使用批量更新。但是，将业务逻辑复制到您的包中并进一步维护包以使两者保持同步，相关的成本并非微不足道。如果底层视图中的逻辑发生更改并且这些更改没有传播到包或移植不正确，天堂会帮助您。除非我有可靠的商业理由这样做，否则我不会走这条路。

## 备选方案 2

暂存您的数据。不是写入分区视图，而是将所有数据写入数据流中的临时表。在数据流之后，立即执行 SQL 任务，将数据从暂存表推送到视图中。

虽然我不确定，但我的假设是这将比备选方案 1 或原始分辨率更好，但尚未测试。我也没有将此列为主要解决方案，因为我知道在某些地方，例如我工作的地方，创建新表可能会引起很大争议。

# wordpress - Wordpress 永久链接的例外情况

> ID：13705434
> 
> 赞同：1
> 
> 时间：2012-12-04T14:43:39.810
> 
> 标签：wordpress, joomla, permalinks

我客户以前的外包公司设法让他所有的 Joomla 网站都被黑了，我正在将它们全部转移到 wordpress 并清理它们。在这个过程中，我想保留他的 SEO，所以我想做的是让博客帖子的永久链接看起来像 joomla 中的那些。

为此，我将永久链接更改为 /index.php/blog/%postname%/

这确实有效！

**但是，现在的问题**

我在网站的根目录中有一个名为 images 的文件夹。这些是 joomla 以前的图片，我在那儿链接到它比通过 wordpress 上传所有图片要容易得多。

但是，在更改了我的永久链接后，如果我尝试访问 http://[root_url]/images，永久链接会起作用并且不会让我链接到图像。

我的问题是，如果我知道我的永久链接设置为 --> /index.php/blog/%postname%/，我想如何在根目录的 /images 文件夹中放置图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:19:07.253

哇，抱歉这个愚蠢的问题。看来我实际上并没有正确构建文件夹。

如果该文件夹实际上位于根目录中，它将起作用。

# python - SciPy/NumPy：规范化 csr_matrix

> ID：13705435
> 
> 赞同：4
> 
> 时间：2012-12-04T14:43:43.550
> 
> 标签：python, numpy, scipy

我正在尝试规范化 csr_matrix：

```
<5400x6845 sparse matrix of type '<type 'numpy.float64'> with 91833 stored elements in Compressed Sparse Row format> 
```

我尝试的是这样的：

```
import numpy as np
from scipy import sparse

# ve is my csr_matrix
ve_sum = ve.sum(axis=1)
ve_sums = sparse.csr_matrix(np.tile(ve_sum, (1, ve.shape[1]))) # <-- here I get MemoryError
n_ve = ve/ve_sums 
```

这显然不是进行这种简单归一化的正确方法。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:53:51.917

```
# Normalize the rows of ve.
row_sums = np.array(ve.sum(axis=1))[:,0]
row_indices, col_indices = ve.nonzero()
ve.data /= row_sums[row_indices] 
```

快速的谷歌搜索也揭示了这一点。

# linux - 从文件中读取两个值并将它们插入到命令中的 Shell 脚本

> ID：13705437
> 
> 赞同：0
> 
> 时间：2012-12-04T14:43:50.703
> 
> 标签：linux, shell

例如，我有一个文本文件，`input.txt`我想运行一个命令并将输出写入另一个文本文件，例如`output.txt`. 我需要从中读取值`input.txt`，每个值都在一行中，然后我需要将它们插入命令中，然后将结果写入`output.txt`文件中。我尝试了以下方法，它适用于我：

```
for i in `cat input.txt`; do command -m $i -b 100; echo $i; >> output.txt; done 
```

现在，我需要对此进行一些改进，但我在 Linux 方面的经验很少，所以我需要一些帮助。

我需要做的是：1）在每个命令结果之前，我想插入`i`以逗号分隔的值。例如：

```
i1,result1 
i2,result2
i3,result3 
```

2) 我需要将我在命令中使用的第二个固定值从固定值 (100) 更改为从`input.txt`. 因此，包含两个值的新输入文件`newinput.txt`如下所示：

```
i1,value1
i2,value2
i3,value3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:56:33.443

试试这个，在 bash 中：

```
IFS=','
while read i val; do
  echo -n "$i,"
  command $i $val
done < input.txt > output.txt 
```

# c# - 如何在 EF 代码优先中禁用链接表的级联删除？

> ID：13705441
> 
> 赞同：73
> 
> 时间：2012-12-04T14:44:17.917
> 
> 标签：c#, .net, database, entity-framework, ef-code-first

我想禁用具有实体框架代码优先的链接表的级联删除。例如，如果许多用户有很多角色，而我尝试删除一个角色，我希望阻止该删除，*除非*当前没有与该角色关联的用户。我已经删除了我的级联删除约定`OnModelCreating`：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) {
    ...
    modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>(); 
```

然后我设置了用户角色链接表：

```
modelBuilder.Entity<User>()
    .HasMany(usr => usr.Roles)
    .WithMany(role => role.Users)
    .Map(m => {
        m.ToTable("UsersRoles");
        m.MapLeftKey("UserId");
        m.MapRightKey("RoleId");
    }); 
```

然而，当 EF 创建数据库时，它会为外键关系创建删除级联，例如。

```
ALTER TABLE [dbo].[UsersRoles]  WITH CHECK ADD  CONSTRAINT [FK_dbo.UsersRoles_dbo.User_UserId] FOREIGN KEY([UserId])
REFERENCES [dbo].[User] ([UserId])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[UsersRoles]  WITH CHECK ADD  CONSTRAINT [FK_dbo.UsersRoles_dbo.Role_RoleId] FOREIGN KEY([RoleId])
REFERENCES [dbo].[Role] ([RoleId])
ON DELETE CASCADE
GO 
```

如何停止 EF 生成此删除级联？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-04T14:53:44.150

我得到了答案。:-) 那些级联删除是因为`ManyToManyCascadeDeleteConvention`. 您需要删除此约定以防止它为链接表创建级联删除：

```
modelBuilder.Conventions.Remove<ManyToManyCascadeDeleteConvention>(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-06T13:23:32.500

我认为在全球范围内关闭`ManyToManyCascadeDeleteConvention`并不是一个明智的选择。相反，最好*只为相关*表关闭它。

这可以通过为 property 编辑生成的迁移文件来实现**`cascadeDelete`**。例如：

`AddForeignKey("dbo.UsersRoles", "UserId", "dbo.User", "UserId", cascadeDelete: false);`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-09T22:14:31.420

我同意 Ebram Khalil 的观点，即为一张桌子关闭它是一个不错的选择。但是，我喜欢尽可能接近自动构建的迁移，所以我会在 OnModelCreating 中设置它：

```
modelBuilder.Entity<User>()
    .HasMany(usr => usr.Roles)
    .WithMany(role => role.Users)
    .Map(m => {
        m.ToTable("UsersRoles");
        m.MapLeftKey("UserId");
        m.MapRightKey("RoleId");
    })
    .WillCascadeOnDelete(false); 
```

我相信这会保留另一个方向的删除，因此如果两者都需要被阻止（在本例中有意义），则需要从以下开始进行类似的调用`Entity<User>(Role)`

当然，这是在提出问题之后的很长时间。因此，它可能在 2012 年无效。

# c# - 通过反射更新数组元素

> ID：13705443
> 
> 赞同：0
> 
> 时间：2012-12-04T14:44:26.543
> 
> 标签：c#, .net, reflection

我们目前正在建立规范流程的测试基地。所以所有的值都以字符串的形式出现。我编写了一些代码来更新我将使用的 Contract 对象中的属性。然而，Contract 对象也有几个自定义对象数组。我想传入数组的“类型”、该数组中元素的属性、新值以及要修改的对象的索引。我遇到的问题是获取一个动态类型的列表，而不仅仅是对象。

合同.cs

```
public class Contract
{
  public string Name { get; set; }
  public string Status { get; set; }

  public Asset[] Asset { get; set; }
  public Group[] Group { get; set; }

  public Contract( string name, string status ){
    Name = name;
    Status = status
    Asset = new Asset[ 10 ];
    Group = new Group[ 10 ];
  }
} 
```

资产.cs

```
public class Asset {
        public int ID { get;set;}
        public string Value {get;set;}
} 
```

组.cs

```
public class Group{
        public int ID { get;set;}
        public string Value {get;set;}
} 
```

这就是我的合同的基本结构，这里是客户端代码：

```
static void Main( string[] args )
{
  Contract c = new Contract( "TestContract", "Default" );
  for( int i = 0; i < 10; i++ )
  {
     c.Asset[ i ] = new Asset( i*10, "base" );
     c.Group[ i ] = new Group( i*100, "newGroup" );
  }

  Console.WriteLine( c );
  updateContract( c, "Asset", 0, "Value", ".666." );
  updateContract( c, "Group", 0, "Value", ".999." );
  updateContract( c, "Group", 2, "Value", ".999." );
  updateContract( c, "Status", "Awesome" );
  Console.WriteLine( c );    
}

public static void updateContract( Contract contract, string collection, int index, string property, string value )
{
    object collectionObject;
    if( collection == "Asset" )
    {
        collectionObject = contract.Assets[ index ];
    }
    else if( collection == "Group" )
    {
        collectionObject = contract.Group[ index ];
    }
    else
    {
        throw new Exception( "Couldn't parse " + collection + " properly" );
    }

    SetPropValue( collectionObject, property, value );

}

public static void updateContract( Contract contract, string Property, string value )
{
    SetPropValue( contract, Property, value );
}

private static void SetPropValue( object src, string propName, string value )
{
    PropertyInfo pi = src.GetType().GetProperty( propName );

    //Gets the type of the property passed in
    Type t = pi.PropertyType;

    //Converts the string to the property type
    object newVal = Convert.ChangeType( value, t );

    //Sets the newly typed object to the property
    pi.SetValue( src, newVal, BindingFlags.SetProperty, null, null, null );
    //pi.SetValue( src, newVal); // In .NET 4.5
} 
```

基本上我想删除那个 if/else 块并把这样的东西放进去

```
object[] objectCollections = (object[]) GetPropValue(contract, collection);
object curCollectionObject = objectCollections[index];
SetPropValue(ref curCollectionObject, property, value); 
```

但那是打破。任何想法或帮助将不胜感激。对不起，很长的帖子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:19:02.510

无论如何，如果你真的需要通过反射来做到这一点，那么：

```
private static void SetPropValue(object src, string collection, int index, 
                                 string property, string value)
{
    PropertyInfo collectionProperty = src.GetType().GetProperty(collection);
    Array array = collectionProperty.GetValue(src, null) as Array;
    object item = array.GetValue(index);
    SetPropValue(item, property, value);
} 
```

错误处理取决于您。用法：

```
SetPropValue(c, "Asset", 2, "Value", ".777."); 
```

# javascript - 如何从html调用javascript函数

> ID：13705445
> 
> 赞同：0
> 
> 时间：2012-12-04T14:44:27.897
> 
> 标签：javascript, jquery, html, javascript-events

我们如何从 HTML 调用 start() javascript 函数

```
 (function() {
      var never, start;

      never = function() {
       return alert("try");
     }; 

      start = function() {
       return alert("try harder");
     };

    }).call(this); 
```

我的 HTML

```
 <input type="button" value="press" onclick="never()" ></input> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:45:43.133

当您将事件处理程序代码分配给属性时，所使用的任何函数都需要在全局变量范围内可用。

为此，您可以将它们设为`window`. 目前，您的`never`和`start`函数在 IIFE 函数范围内是本地的。

```
 // IIFE function
(function() {

  //  var never, start;  // local variables

     // Make the functions globally scoped
   window.never = function() {
      return alert("try");
   }; 

   window.start = function() {
      return alert("try harder");
   };
}).call(this); 
```

* * *

如果您愿意，可以公开单个命名空间

```
 // IIFE function
(function() {

   var ns = window.ns = {};

     // Make the functions globally scoped
   ns.never = function() {
      return alert("try");
   }; 

   ns.start = function() {
      return alert("try harder");
   };
}).call(this); 
```

然后将您的内联处理程序更改为使用`ns.never();`and `ns.start();`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:48:41.897

首先给你的输入标签一个id：

```
<input id="someInputField" type="button" ... /> 
```

接下来通过在文档准备好时执行代码来注册一个回调：

```
$(document).ready( function() {
    // define a function called never
    function never() {
        alert( 'Never say never');
    }

    // register a function on the click event handler of that input tag:
    $('#someInputField').click( never );
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T14:53:37.533

您可能会发现使用 jQuery 之类的 javascript 库更容易。使用该库，您可以执行以下操作：

```
<script type="text/javascript">
    $(document).ready(function() {
        var count = 0
        $("#tryme").click(function () {
            if (count == 0) {
                alert('try');
                count++
            }
            else if (count == 1) {
                alert('try harder');
            }
        });
    });
</script>

<input type="button" value="press" id="tryme" ></input> 
```

# html - 适合容器高度的最后一个 DIV

> ID：13705447
> 
> 赞同：0
> 
> 时间：2012-12-04T14:44:39.927
> 
> 标签：html, css

我在一个列表项中有两个（或更多）DIV，我无法使最后一个适合其容器的剩余高度。

这是代码：

CSS

```
div{margin: 5px;}
ul{
    height: 300px;/*it's calculated via js*/
    width: 250px;/*it's calculated via js*/
    padding: 0;/*don't change it*/
    margin: 0;/*don't change it*/

    background-color: #F5EBD6;
    border: 4px solid orange;
}
li{
    list-style-type: none;

    background-color: #E0E5F5;
    border: 2px solid blue;
}
.item-title{
    background-color: #EDF5E0;
    border: 2px solid green;
}
.item-description{
    background-color: #FDF1FB;
    border: 2px solid fuchsia;
}
.item-description>div{
    background-color:rgba(252,255,170,0.3);
}​ 
```

HTML

```
<ul>
<li>
    <div class="item-title">Title</div>
    <div class="item-description">
        <div style="margin: 0px; padding: 0px; border: 0px;">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
            nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
            reprehenderit in voluptate velit esse cillum dolore eu fugiat 
            nulla pariatur. Excepteur sint occaecat cupidatat non proident, 
            sunt in culpa qui officia deserunt mollit anim id est laborum.
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
            nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
            reprehenderit in voluptate velit esse cillum dolore eu fugiat 
            nulla pariatur. Excepteur sint occaecat cupidatat non proident, 
            sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>
</li> 
```

​</p>

这是[小提琴](http://jsfiddle.net/YYFeE/4/)。

我希望`.item-description`div （小提琴中的紫红色边框 div）将留在 listItem （橙色边框元素）内。描述中的 div 是实际的文本容器，不应修改其高度。

这是显示它应该是什么样子的[小提琴。](http://jsfiddle.net/FAr4C/1/)

## 在右边我想达到的结果

![结果](../Images/b568bd0a671a20614ae3d581af62521d.png)

如果可能的话，我想使用 css/css3 而不是 js 并且不更改 HTML 来解决问题。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:53:03.337

像下面这样更改`UL`css，

```
ul {
    background-color: #F5EBD6;
    border: 4px solid orange;
    float: left;
    margin: 0;
    min-height: 300px;
    padding: 0;
    width: 250px;
} 
```

它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:04:11.067

添加

```
overflow-y:scroll; 
```

到 .item-description

可能会将所有内容放入 div.AM 不确定这是您所期望的

[http://jsfiddle.net/Pdaj8/2/](http://jsfiddle.net/Pdaj8/2/)

# asp.net-mvc - 带有 ActionName 的 MVC 路由；找到多个与请求匹配的操作

> ID：13705449
> 
> 赞同：2
> 
> 时间：2012-12-04T14:44:41.370
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在尝试向我的控制器添加一些自定义方法，但是这样做时遇到以下错误：

```
http://localhost/api/process/asdf 
```

找到多个与请求匹配的操作

我的 WebApiConfig、控制器或 url 中是否缺少某些内容？

这是我的 WebApiConfig：

```
public static class WebApiConfig {
    public static void Register (HttpConfiguration config) {
        config.Routes.MapHttpRoute(
            name: "ControllerOnly",
            routeTemplate: "api/{controller}",
            defaults: new { id = RouteParameter.Optional }
        );
        config.Routes.MapHttpRoute(
            name: "ControllerAndId",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
        config.Routes.MapHttpRoute(
            name: "ControllerAndActionGet",
            routeTemplate: "api/{controller}/{action}",
            defaults: new { action = "Get"}
        );
        config.Routes.MapHttpRoute(
            name: "ControllerAndActionAndIdGet",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { action = "Get", id = RouteParameter.Optional }
        );
    }
} 
```

这是我的过程控制器：

```
public class ProcessController : BaseApiController
{
    // GET api/process
    public List<Process> Get ()
    {
        return null;
    }

    [HttpGet]
    [ActionName("asdf")]
    public List<Process> asdf () {
        return null;
    }

    [HttpGet]
    [ActionName("fdsa")]
    public List<Process> fdsa (int id) {
        return null;
    }

    // GET api/process/5
    public List<Process> Get (long id)
    {
        return null;
    }

    // POST api/process
    public void Post ([FromBody]string value)
    {
    }

    // PUT api/process/5
    public void Put (int id, [FromBody]string value)
    {
    }

    // DELETE api/process/5
    public void Delete (int id)
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:05:13.140

找到这种消歧的最佳方法是使用`routedebugger.dll`并找出导致问题的路径。

# neo4j - 如何打开 Neo4J Webadmin 进行远程控制？

> ID：13705451
> 
> 赞同：11
> 
> 时间：2012-12-04T14:44:46.587
> 
> 标签：neo4j, remote-access, administration

我在我的服务器上的端口 7474 上安装了一个 Neo4J 实例。我的域也在使用该服务器，我希望通过用户名和密码远程使用 webadmin，如下所示：

```
example.com:7474 
```

有没有办法做到这一点？我在 Neo4J 文档中找不到任何指南。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T15:03:25.753

您是否有机会阅读[Neo4j 服务器配置文档](http://docs.neo4j.org/chunked/milestone/server-configuration.html)？它说：

> #允许任何客户端连接
> 
> org.neo4j.server.webserver.address=0.0.0.0

默认情况下，此行`conf/neo4j-server.properties`被注释并将对端口的访问限制`7474`为 localhost 或`127.0.0.1`（这可能是使用该服务器并通过 localhost 访问 Neo4j 为您的域工作的原因）。取消注释该行，它应该使每个人都可以访问端口 7474，即`0.0.0.0`.

为了使用授权层保护您的 Neo4j 服务器，您可能需要参考[Securing access to the Neo4j Server 文档](http://docs.neo4j.org/chunked/stable/security-server.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-25T22:14:49.763

在我的 ubuntu 上，取消注释的行是

```
dbms.connector.http.address=0.0.0.0:7474 
```

文件位置

```
Ubuntu: /etc/neo4j/neo4j.conf 
```

Neo4j 3.0.6

# visual-studio-2010 - 是否可以设置私有 TFS 签入策略？

> ID：13705452
> 
> 赞同：2
> 
> 时间：2012-12-04T14:44:47.890
> 
> 标签：visual-studio-2010, checkin-policy

据我了解，签入策略是在服务器上设置的，但在客户端上强制执行。由于它们是在客户端上强制执行的，有没有办法设置私人签入策略。

我想为自己制定一个签入政策，但我无法在 TFS 服务器上设置它，因为这会迫使每个人也都遵守该政策。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:45:29.417

不，那是不可能的。如果您正在创建自定义签入策略，您可以让它按用户过滤，但您仍然必须在服务器级别打开它并让每个用户在本地安装它。

# c# - 将二进制字符串转换为二进制

> ID：13705453
> 
> 赞同：0
> 
> 时间：2012-12-04T14:44:49.167
> 
> 标签：c#

我有两个字符串，即 string1 和 string2。它们包含二进制数，我想用不同类型的操作来操作它们。

例如：

```
 string string1 = "1000";
      string string2 = "1011"; 
```

如何添加/减去 string1 和 string2 以便：

```
 AnswerToAddtion = 10011               //1000 + 1011
      AnswerToSubtratction = 1101           //1000-1011 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:49:04.657

您可以使用`Convert.ToInt32("11011",2);`将字符串解析为整数值。

要将整数转换为二进制字符串，可以使用`Convert.ToString(myInt, 2);`

# linux - 可以使用未添加到选择集中的描述符调用 FD_ISSET 吗？

> ID：13705454
> 
> 赞同：0
> 
> 时间：2012-12-04T14:44:51.270
> 
> 标签：linux, unix, select

我正在调试一个选择循环，该循环通常可以正常工作，但在重负载下会因分段错误而死。我发现程序有时会调用`FD_ISSET()`未添加到选择集中的（正确）描述符。就像在下面的代码片段中一样：

```
#include <sys/select.h>
#include <sys/time.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

void die(const char* msg)
{
    fprintf(stderr, "fatal %s", msg);
    exit(1);
}

int main(void)
{
    FILE* file = fopen("/tmp/test", "r");
    if (file == NULL)
        die("fopen");

    int file_fd = fileno(file);
    fd_set read_fds;
    int max_fd = 0;

    FD_ZERO(&read_fds);
    // Only stdin is added to read_fds.
    FD_SET(0, &read_fds);

    if (select(max_fd + 1, &read_fds, NULL, NULL, NULL) < 0)
        die("select");
    if (FD_ISSET(0, &read_fds))
        printf("Can read from 0");
    // !!! Here FD_ISSET is called with a valid descriptor that was 
    // not added to read_fds.
    if (FD_ISSET(file_fd, &read_fds))
        printf("Can read from file_fd");
    return 0;
} 
```

很明显，标记为 的检查`!!!`永远不会返回 true，但它可能是 SEGFAULT 的原因吗？当我在 valgrind 下运行此代码段时，没有报告任何错误，但是当我在 valgrind 下运行负载测试时，我偶尔会看到如下错误：

```
==25513== Syscall param select(writefds) points to uninitialised byte(s)
==25513==    at 0x435DD2D: ___newselect_nocancel (syscall-template.S:82) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:27:29.167

FD_ISSET() 测试文件描述符是否是 set 的一部分`read_fds`。这意味着 FD_ISSET 不应导致分段错误。

尝试在调用 FD_ISSET 之前检查设置的 errno 值。`select`应该是导致段错误。

还要检查该`file_fd`值是否不大于`FD_MAX`。

# r - 任何包都包含 R 中的 Labeled-LDA 实现

> ID：13705464
> 
> 赞同：3
> 
> 时间：2012-12-04T14:45:15.497
> 
> 标签：r, lda, topic-modeling

我正在使用 R 研究有监督的主题模型；有一个带有标签的数千字文档，我想设计一个应用程序来自动为新文档分配标签。我正在使用 R 来测试算法并选择最好的算法。

我的问题是：**是否有任何实现 Labeled-LDA 的 R 包？** 顺便说一句：我尝试过包：`tm`、、 和`topicmodel`，并尝试了一些算法，例如 SVM LDA`lda``RTextTools`

# php - PHP 中的文件 IO 不起作用

> ID：13705466
> 
> 赞同：2
> 
> 时间：2012-12-04T14:45:17.023
> 
> 标签：php, file-io

对于学校作业，我必须用 PHP 编写脚本。它必须创建一个带有名称的数组并将该数组写入文件。然后它必须删除数组，读取文件中的名称并回显它们。

这不起作用：

```
<?php
    $names = array("Name 1", "Name 2", "Name 3", "Name 4", "Name 5");
    $filename = "names.txt";
    $handle = fopen($filename, "wb+"); //open as read and write
    $string = implode("\r\n", $names); //name on each line
    fwrite($handle, $string); //write line

    $names = array(); //empty array
    print_r($names); //print empty array
    $string = fread($handle, filesize($filename)); //read file
    $names = explode("\r\n", $string); //lines to array
    foreach ($names as $name) {
        echo("<br>\n$name");
    }
    fclose($handle);
?> 
```

但这有效：

```
<?php
    $names = array("Name 1", "Name 2", "Name 3", "Name 4", "Name 5");
    $filename = "names.txt";
    $handle = fopen($filename, "wb"); //open as write
    $string = implode("\r\n", $names); //name on each line
    fwrite($handle, $string); //write line
    fclose($handle); //close

    $handle = fopen($filename, "r"); //open as read
    $names = array(); //empty array
    print_r($names); //print empty array
    $string = fread($handle, filesize($filename)); //read file
    $names = explode("\r\n", $string); //lines to array
    foreach ($names as $name) {
        echo("<br>\n$name");
    }
    fclose($handle);
?> 
```

当我关闭并重新打开文件时，我不明白为什么它会起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T14:49:50.520

您只需要重新启动文件指针，因为使用时[`fwrite()`](http://php.net/manual/en/function.fwrite.php)：

> [`fwrite()`](http://php.net/manual/en/function.fwrite.php)将字符串的内容写入句柄指向的文件流。
> 
> *   已读取长度字节
> *   **到达 EOF（文件结尾）**
> *   数据包可用或发生套接字超时（对于网络流）
> *   如果流被读取缓冲并且它不代表普通文件，则最多读取一次最多等于块大小（通常为 8192）的字节数；根据之前缓冲的数据，返回数据的大小可能会大于块大小。

如果你看[`fread()`](http://php.net/manual/en/function.fread.php)

> [`fread()`](http://php.net/manual/en/function.fread.php)从句柄引用**的文件指针**中读取最多长度字节。只要满足[以下条件](http://php.net/manual/en/function.fread.php#refsect1-function.fread-description)之一，读取就会停止：

因此，在您打电话时，`fread($handle, filesize($filename));`您已经在**文件末尾，**因此不会显示任何内容。

要解决这个问题，只需使用`fseek`重新启动指针回到文件的开头

例子 ：

```
 fseek($handle, 0); 
```

你不需要关闭文件..你的第一个代码可以完美运行

**编辑**

你也可以从 PHP DOC[倒带](http://php.net/manual/en/function.rewind.php)

> 将句柄的文件位置指示器设置为文件流的开头。

```
 rewind($handle); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T14:48:59.840

第二个脚本是正确的。原因是如果你打开一个文件进行写，你不能用读，所以你必须关闭文件并在读中重新打开它。

# android - 在 Eclipse 的另一个项目中使用 AndEngine 项目

> ID：13705469
> 
> 赞同：0
> 
> 时间：2012-12-04T14:45:25.933
> 
> 标签：android, eclipse

据我了解，当使用另一个项目中的 AndEngine 项目时，应该将其添加为库，但我无法使其正常工作。例如，我想使用 Andengine-PhysicsEditor-Extension。我在 Eclipse 中有一个 Andengine-PhysicsEditor-Extension 项目，然后在另一个项目中，我转到：

*   项目属性、Java 构建路径、库、添加库...
*   Android 类路径容器
*   下一个>
*   选择Project Andengine-PhysicsEditor-Extension
*   结束

所以现在项目编译正确，例如这一行编译：

```
final PhysicsEditorLoader loader = new PhysicsEditorLoader(); 
```

但是，我在该行收到运行时错误：

> java.lang.NoClassDefFoundError: org.andlabs.andengine.extension.physicsloader.PhysicsEditorLoader

我还需要什么才能让它工作？

我不明白的一件事是 AndEngine-PhysicsEditor-Extension 项目中的目录：\AndEngine-PhysicsEditor-Extension\bin\classes\org\andlabs\andengine\extension\physicsloader 是空的。也许它应该有类文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:54:06.950

看看[这篇](https://stackoverflow.com/questions/10713315/installing-andengine-in-eclipse)文章我想你会发现它很有用，它已经在 SO 上讨论过了，基本上你应该使用 Andengine 作为一个库项目->右键单击属性->android->添加库，然后将它作为库工作区

# javascript - 检测 div 网格中的间隙

> ID：13705472
> 
> 赞同：4
> 
> 时间：2012-12-04T14:45:27.983
> 
> 标签：javascript, html, css, knapsack-problem, bin-packing

**编辑**已找到解决方案！

这是一篇关于它的[博客文章](http://www.drewdahlman.com/meusLabs/?p=218)，这里是[Github repo](http://drewdahlman.com/experiments/perfectMasonry/)！

我正在创建一个由多个大小的框组成的 div 网格，这些大小是设置的高度和宽度 - 但是是动态生成的，因此每次加载页面时都会有一个不同的网格。

**我的问题**-我尝试使用 Masonry，但最终留下了空隙，还尝试了同位素。我目前正在浮动导致布局中断的元素。

**它是如何构建的**——我计算屏幕尺寸并确定从 1 到 6 的页面的最佳列数，然后根据该列宽我计算一个“块”，这个块基本上是完美的网格。然后我遍历我的元素并给它们 1x1、1x2、2x2 尺寸。

![绿色空间是空白区域 - 黑色是根据它们的优先级专门调整大小的](../Images/eac6a9b94dee9accb5f15a11ef35756a.png)

作为参考，这里是另一个随机生成的网格 ![在此处输入图像描述](../Images/f71b0d1cd2575489c0aaae12b90f5586.png)

**我的问题**- 有没有一种很好的方法来检测丢失的空间 - 目前我将红色和黑色的盒子放在另一个绿色的“块”网格上，让我看看我在哪里丢失了空间。我已经阅读了有关背包包装问题以及垃圾箱包装问题的信息——我很难理解其中任何一个问题。

**我尝试过的**- 我试图在放置块以确定最佳尺寸时进行计算，但这仍然会导致奇怪的行为。我也尝试过使用砖石和同位素。

我对参差不齐的底部边缘很好，但实际的网格不能包含任何间隙。

**注意**- 网格由可能无穷无尽的元素组成 - 我一直在考虑是否要从底部区域获取并复制一个元素并将其放置到丢失的区域中，我可以避免不得不“移动”元素 - 我只是需要知道如何找到那个缺失的空间。

任何帮助或指向正确的方向都会很棒！

这是一个[jsfiddle](http://jsfiddle.net/9D6Qy/2/)

这是js的基本代码...

```
 (function() {
    GRID = function(el, sel) {
        var self = this,
            ran, ranSize, h, w;

        self.options = {
            el: $(el),
            sel: $(sel),
            cols: 1,
            block: {
                height: 0,
                width: 0
            },
            matrix: {
                w: [],
                h: [],
                t: [],
                l: []
            },
            row: {
                height: 0,
                width: 0
            },
            col: {
                height: 0,
                width: 0
            }
        };

/*
         * Size array
        */
        self.sizes = [];
        self.sizes[0] = [2, 2];
        self.sizes[1] = [1, 2];
        self.sizes[2] = [1, 1];

        self.setup = function() {

/*
             * Setup all options 
            */
            // block size
            self.options.block.height = (window.innerWidth / self.cols()) / 1.5;
            self.options.block.width = (window.innerWidth / self.cols());

            // row
            self.options.row.width = window.innerWidth;

            for (var i = 0; i < 60; i++) {
                $(".grid").append('<div class="box"></div>');
            }

            self.size_boxes();

        }
        self.size_boxes = function() {

            if (self.cols() == 1) {
                self.options.sel.height(self.options.block.height);
                self.options.sel.width(self.options.block.width);
            }
            else {
                self.options.sel.each(function() {

                    $this = $(this);

                    ran = Math.floor(Math.random() * self.sizes.length);
                    ranSize = self.sizes[ran];

                    if ($this.hasClass('promoted')) {
                        ran = 0;
                    }
                    if ($this.hasClass('post')) {
                        ran = 2;
                    }
                    h = self.options.block.height * self.sizes[ran][6];
                    w = self.options.block.width * self.sizes[ran][0];

                    // box sizes
                    $this.height(h);
                    $this.width(w);
                });
            }
            $(".grid .box").height(self.options.block.height);
            $(".grid .box").width(self.options.block.width);
        }
        self.cols = function() {
/*
             * Determine cols
            */
            var w = Math.floor(window.innerWidth);
            var cols = 0;

            if (w < 480) {
                cols = 1;
            }
            else if (w > 480 && w < 780) {
                cols = 2;
            }
            else if (w > 780 && w < 1080) {
                cols = 3;
            }
            else if (w > 1080 && w < 1320) {
                cols = 4;
            }
            else if (w > 1320 && w < 1680) {
                cols = 5
            }
            else {
                cols = 6;
            }
            return cols;
        }
        self.resize = function() {
            $(".grid").height(window.innerHeight);
            self.options.block.height = (window.innerWidth / self.cols()) / 1.5;
            self.options.block.width = (window.innerWidth / self.cols());

            self.options.row.width = window.innerWidth;

            self.size_boxes();
        }

        self.setup();
        return self;

    };
})();
var _GRID = new GRID('.gallery', '.box');​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:17:46.497

我会使用布尔值的内存矩阵来跟踪您的“完美网格”。这个矩阵存储空间是否被填充。每当您放置一个盒子时，您都会计算哪些方格被占用并更新您的矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:03:38.023

如果要将它们放在列中，只需将 div 放在列中。例如，如果您确定应该有 4 列：

```
<div>
    <div>Column 1, Div 1</div>
    <div>Column 1, Div 2</div>
    <div>Column 1, Div 3</div>
    <div>Column 1, Div 4</div>
</div>
<div>
    <div>Column 2, Div 1</div>
    <div>Column 2, Div 2</div>
    <div>Column 2, Div 3</div>
    <div>Column 2, Div 4</div>
</div>
<div>
    <div>Column 3, Div 1</div>
    <div>Column 3, Div 2</div>
    <div>Column 3, Div 3</div>
    <div>Column 3, Div 4</div>
</div>
<div>
    <div>Column 4, Div 1</div>
    <div>Column 4, Div 2</div>
    <div>Column 4, Div 3</div>
    <div>Column 4, Div 4</div>
</div> 
```

当然，这只有在每列中的 div 高度相等时才有效。

# javascript - 在数据属性 JSON 对象中转义引号和 html

> ID：13705473
> 
> 赞同：4
> 
> 时间：2012-12-04T14:45:28.413
> 
> 标签：javascript, jquery, html, escaping

使用 HTML5`data-`属性，可以将 JSON 存储在 HTML 中，如下面的 HTML 所示。这适用于字符串键：值对，但我不知道如何使值包含特殊字符或 HTML。

给出问题的 JSON 对象部分是这样的：（`Can't vote on <b>own</b> review`也对更复杂的 HTML 块感兴趣，例如：`<span style="text-decoration:underline" own</span>`。这是[下面代码的 JSFiddle。](http://jsfiddle.net/trpeters1/aNTZ5/9/)

JS：

```
$('button').on('click', function () {
  var $this=$(this), data=$this.data('data');
     $('#output').html(data.message);
}); 
```

HTML：

```
<button type='button' data-data='{"type": "voting", "message": "Can't vote on <span style="text-decoration:underline" own</span> review"}'></button>
<div id='output'></div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T14:52:25.830

您需要[转义 HTML](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)，特别是在此示例中，`&`以及用于引用属性值的字符（或`"`或`'`）：

```
<button type='button' data-data='{"type": "voting", "message": "Can&#39;t vote on <b>own</b> review"}'></button> 
```

或者：

```
<button type='button' data-data='{"type": "voting", "message": "Can&#39;t vote on <span style=&#39;text-decoration:underline&#39;>own</span> review"}'></button> 
```

# javascript - 如何使用可能未定义的参数创建 javascript 函数？

> ID：13705476
> 
> 赞同：0
> 
> 时间：2012-12-04T14:45:37.877
> 
> 标签：javascript, parameters

我发现了有关使用可选参数创建函数的类似问题。但是我不断遇到错误是参数可能不存在。我有一个交互式地图，它正在做很多事情。但是，如果 outputlayer 为 null，则该函数将不会执行。该层可能存在也可能不存在。如果它不存在，我似乎无法弄清楚如何传递这个可选参数。谢谢你的帮助！

```
function appdelete(selected,vectorlayer,drawFeature,outputlayer) {

    $(selected).prev().children().children().eq(2).val('Latitude');
    $(selected).prev().children().children().eq(4).val('Longitude');
    vectorlayer.destroyFeatures();
    drawFeature.activate();

    try {
        map.removeLayer(outputlayer);
    } catch(err) { };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:48:24.983

首先检查它是否存在，也许是类型。

```
if(outputlayer && "object" === typeof outputlayer) {
    map.removeLayer(outputlayer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:48:56.533

您将需要检查变量是否存在：

```
if(outputlayer){
    map.removeLayer(outputlayer);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:50:33.957

如果您只关心`undefined`，请执行以下操作：

```
if(outputlayer === undefined) return; 
```

或者

```
if(outputlayer !== undefined) {
    map.removeLayer(outputlayer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:02:12.960

默认参数初始化：

```
outputlayer= (typeof outputlayer=== "undefined") ? "someDefaultValue" : outputlayer; 
```

在您的功能中：

```
function appdelete(selected,vectorlayer,drawFeature,outputlayer) {
    outputlayer= (typeof outputlayer=== "undefined") ? "defaultValue" : outputlayer;
    $(selected).prev().children().children().eq(2).val('Latitude');
    $(selected).prev().children().children().eq(4).val('Longitude');
    vectorlayer.destroyFeatures();
    drawFeature.activate();

    map.removeLayer(outputlayer);    
} 
```

# regex - 正则表达式 (.*?) 和 (.*) 有什么区别？

> ID：13705478
> 
> 赞同：18
> 
> 时间：2012-12-04T14:45:44.780
> 
> 标签：regex

我一直在做正则表达式，但我不是特定规则的微妙之处的专家，我一直在做`(.*?)`匹配，但是有限制，因为我知道它会阻止它获得的第一次机会，而`(.*)?`会继续并且更加贪婪。

但我没有真正的理由会这样想，我只是因为从前读过它才这么想。

现在我想知道，有区别吗？如果是这样，那是什么...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T14:48:10.217

`(.*?)`是一个包含非贪婪匹配的组。

`(.*)?`是一个包含贪婪匹配的可选组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T14:48:14.413

其他人指出了贪婪匹配和非贪婪匹配之间的区别。这是您在实践中可以看到的不同结果的示例。由于正则表达式通常嵌入在宿主语言中，因此我将使用 Perl 作为宿主。在 Perl 中，将匹配项括在括号中会将这些匹配项的结果分配给特殊变量。因此，在这种情况下，匹配项可能相同，但分配给这些变量的内容可能不同：

例如，假设您的匹配字符串是“hello”。两种模式都会匹配它，但匹配的部分 ($1) 不同：

```
'hello' =~ /(.*?)l/;
# $1 == 'he' 

'hello' =~ /(.*)?l/;
# $1 == 'hel' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T14:58:49.613

因为`*`意思是“零或更多”，所以这一切都变得有些混乱。两者`?`完全不同，可以通过每个不同的示例更清楚地显示：

`fo*?``f`仅当您提供它时才会匹配`foo`。也就是说，这`?`使得匹配是非贪婪的。删除它使其匹配`foo`。

`fo?`会匹配`f`，而且`fo`。也就是说，这`?`使得匹配是可选的：它适用的部分（仅在这种情况下`o`）必须出现 0 或 1 次。删除它使匹配成为必需：它必须只出现一次，所以 only`fo`仍然匹配。

虽然我们对 in 正则表达式有不同的含义`?`，但还有一个：`?`紧跟在 a 之后的 a`(`是几个特殊操作的前缀，例如环视。也就是说，它的含义与您所问的任何事情都不一样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-04T14:55:34.147

有不同的`?`含义。

1.  当它跟随一个字符或一个组时，它是一个量词，匹配前面构造的 0 次或 1 次出现。[详情见这里](http://www.regular-expressions.info/optional.html)

2.  当它跟随一个量词时，它会修改该量词的匹配行为，使其匹配惰性/不贪婪。[详情见这里](http://www.regular-expressions.info/repeat.html)

# android - Android: How to set Imagevisibility using intent

> ID：13705491
> 
> 赞同：0
> 
> 时间：2012-12-04T14:46:32.207
> 
> 标签：android, android-intent

I have an activity with a list view and a common header with hidden icon.. when I click the listview a loginscreen will be triggered and when the login is successfull it should come back to previous activity with icon visible on header. I'm using a static image initially to hide the icon when the user comes to that particular screen. below is my login code

```
public void onClick(View v) {
    String password = etPassword.getText().toString();
    Intent returnIntent = new Intent();
    if(password.equals("guest")){
        returnIntent.putExtra("result", true);
        setResult(RESULT_OK, returnIntent);     
    } 
    else {
        returnIntent.putExtra("result", false);
        setResult(RESULT_OK, returnIntent);
    }

    finish();                  
} 
```

below is my `onActivityResult()` code

```
protected void onActivityResult (int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    boolean success = data.getBooleanExtra("result", false);
    if(success) {
        sImg.setVisibility(View.VISIBLE);
    }
    else {
        sImg.setVisibility(View.INVISIBLE);
    }
} 
```

`sImg` is a static image. Above code seems ok for me but not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:17:09.033

itz 使用下面的代码..但不确定它是否正确

```
if(success) {
            img = (ImageView)findViewById(R.id.redeye);
            sImg = img;
            img.setVisibility(View.VISIBLE);

    }
}} 
```

# php - 如何在 Prestashop 中禁用/更改主页

> ID：13705493
> 
> 赞同：2
> 
> 时间：2012-12-04T14:46:33.773
> 
> 标签：php, prestashop

我设法禁用 Prestashop 上的主页。我希望用户到达特定类别而不是主页。

我尝试在 htaccess 文件中使用 to 的重定向来执行此`index.php`操作`index.php?category_id=1`。它可以工作，但是`Technical error unable to load form`当用户尝试创建帐户时会产生错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T08:04:37.883

这适用于 PrestaShop 1.5

您可以编辑负责主页的*controllers/front/IndexController.php*文件，将 Tools::redirect 调用添加到您想要的任何控制器（此示例是购物车）。

```
public function initContent()
{
    parent::initContent();

    Tools::redirect('index.php?controller=cart'.($_REQUEST ? '&'.http_build_query($_REQUEST, '', '&') : ''), __PS_BASE_URI__, null, 'HTTP/1.1 301 Moved Permanently');

    $this->context->smarty->assign('HOOK_HOME', Hook::exec('displayHome'));
    $this->setTemplate(_PS_THEME_DIR_.'index.tpl');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:46:06.000

那么对于一种方法，您可以简单地将重定向添加到您的 index.php 文件，但我猜这已经被评估和拒绝的解决方案：

```
header('index.php?category_id=1');
exit; 
```

另一种方法可能是使用 prestashops 模块，例如有一个模块“homefeatured”，它准确显示家庭类别的产品，您可以通过 Modules -> Positions 将其挂钩到家庭位置。

如果您介意告诉我您正在使用的 prestashop 的确切主要版本，也许我可以说更多。

# android - Android - HTTP GET Request

> ID：13705494
> 
> 赞同：11
> 
> 时间：2012-12-04T14:46:37.223
> 
> 标签：android, http, https, get

I have developed a HTTP GET Method that clearly works.

```
public class GetMethodEx {

public String getInternetData() throws Exception{

        new TrustAllManager();
        new TrustAllSSLSocketFactory();

        BufferedReader in = null;
        String data = null;

        try
        {
            HttpClient client = new DefaultHttpClient();
            URI website = new URI("https://server.com:8443/Timesheets/ping");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            response.getStatusLine().getStatusCode();

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) !=null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;        
        } finally{
            if (in != null){
                try{
                    in.close();
                    return data;
                }catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
} 
```

Here is a print screen of my emulator when retrieving a response from www.google.com

[SCREEN SHOT OF GOOGLE.COM WORKING](http://i1308.photobucket.com/albums/s606/hydarxoom/google.jpg)

The following code is my retrieval method to display it on screen.

```
public class Home extends Activity {

TextView httpStuff;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.httpexample);
    httpStuff = (TextView) findViewById(R.id.tvhttp);
   new LongOperation().execute("");

}

private class LongOperation extends AsyncTask<String, Void, String> {
  @Override

  protected String doInBackground(String... params) {

      GetMethodEx test = new GetMethodEx();      
      String returned = null;

    try {
        returned = test.getInternetData();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
        return returned;
  }      

  @Override
  protected void onPostExecute(String result) {    
     httpStuff.setText(result);       
  } 
```

However, when I try it with my own server.

"[https://server:port/xwtimesheets/ping](https://server:port/xwtimesheets/ping)"

I have the following screen

[MY SERVER, NOT WORKING](http://i1308.photobucket.com/albums/s606/hydarxoom/tsxw.jpg)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T02:17:15.127

这是您的 GetMethodEx 类的编辑版本。MySSLSocketFactory 允许您连接任何服务器而无需检查其证书。如您所知，这是不安全的。我建议您将服务器的证书添加为受信任的设备。

顺便说一句，您的服务器证书有效期已过期。即使您将其添加为受信任，您也可能无法连接到您的服务器。

```
public class GetMethodEx {

public String getInternetData() throws Exception {

    BufferedReader in = null;
    String data = null;

    try {
        HttpClient client = new DefaultHttpClient();
        client.getConnectionManager().getSchemeRegistry().register(getMockedScheme());

        URI website = new URI("https://server.com:8443/XoW"); 
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        response.getStatusLine().getStatusCode();

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String l = "";
        String nl = System.getProperty("line.separator");
        while ((l = in.readLine()) != null) {
            sb.append(l + nl);
        }
        in.close();
        data = sb.toString();
        return data;
    } finally {
        if (in != null) {
            try {
                in.close();
                return data;
            } catch (Exception e) {
                Log.e("GetMethodEx", e.getMessage());
            }
        }
    }
}

public Scheme getMockedScheme() throws Exception {
    MySSLSocketFactory mySSLSocketFactory = new MySSLSocketFactory();
    return new Scheme("https", mySSLSocketFactory, 443);
}

class MySSLSocketFactory extends SSLSocketFactory {
    javax.net.ssl.SSLSocketFactory socketFactory = null;

    public MySSLSocketFactory(KeyStore truststore) throws Exception {
        super(truststore);
        socketFactory = getSSLSocketFactory();
    }

    public MySSLSocketFactory() throws Exception {
        this(null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException,
            UnknownHostException {
        return socketFactory.createSocket(socket, host, port, autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
        return socketFactory.createSocket();
    }

    javax.net.ssl.SSLSocketFactory getSSLSocketFactory() throws Exception {
        SSLContext sslContext = SSLContext.getInstance("TLS");

        TrustManager tm = new X509TrustManager() {
            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }
            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
            }
            public X509Certificate[] getAcceptedIssuers() {
                return null;
            }
        };
        sslContext.init(null, new TrustManager[] { tm }, null);
        return sslContext.getSocketFactory();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T14:50:21.977

你在这里有一个错误：

```
URI website = new URI("https://https://ts.xoomworks.com:8443/XoomworksTimesheets/ping"); 
```

您正在使用“https://”两次。

**编辑：** 我从 [这里得到代码](https://stackoverflow.com/questions/2012497/accepting-a-certificate-for-https-on-android)

您的代码应如下所示：

```
HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;

DefaultHttpClient client = new DefaultHttpClient();

SchemeRegistry registry = new SchemeRegistry();
SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
registry.register(new Scheme("https", socketFactory, 8443));
SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
DefaultHttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());

// Set verifier      
HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);

// Example send http request
final String url = "https://ts.xoomworks.com:8443/XoomworksTimesheets/ping/";
HttpPost httpPost = new HttpPost(url);
HttpResponse response = httpClient.execute(httpPost);

response.getStatusLine().getStatusCode();

in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
StringBuffer sb = new StringBuffer("");
String l = "";
String nl = System.getProperty("line.separator");
while ((l = in.readLine()) !=null){
    sb.append(l + nl);
}
in.close();
data = sb.toString();
return data; 
```

我没有最终测试它，但它应该可以工作。请注意，您使用的是端口 8433 而不是 433，因此我在 socketfactory 方案中对其进行了更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-29T10:17:16.410

请注意，**使用新版本的 API，所有这些代码都已弃用**！

**这是一个使用新 api 的 http get 示例**。

```
RequestQueue queue = Volley.newRequestQueue(this);
String url ="http://www.google.com";

// Request a string response from the provided URL.
StringRequest stringRequest = new StringRequest(Request.Method.GET, url,
            new Response.Listener<String>() {
    @Override
    public void onResponse(String response) {
        // Display the first 500 characters of the response string.
        mTextView.setText("Response is: "+ response.substring(0,500));
    }
}, new Response.ErrorListener() {
    @Override
    public void onErrorResponse(VolleyError error) {
        mTextView.setText("That didn't work!");
    }
});
// Add the request to the RequestQueue.
queue.add(stringRequest); 
```

来自安卓网站：[https ://developer.android.com/training/volley/simple.html](https://developer.android.com/training/volley/simple.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-29T19:40:37.493

`HttpClient`已弃用。所以新的做法：首先，在build.gradle中添加两个依赖：

```
compile 'org.apache.httpcomponents:httpcore:4.4.1'
compile 'org.apache.httpcomponents:httpclient:4.5' 
```

然后将这段代码写在`ASyncTask`in`doBackground`方法中。

```
 URL url = new URL("http://localhost:8080/web/get?key=value");
 HttpURLConnection urlConnection = (HttpURLConnection)url.openConnection();
 urlConnection.setRequestMethod("GET");
 int statusCode = urlConnection.getResponseCode();
 if (statusCode ==  200) {
      InputStream it = new BufferedInputStream(urlConnection.getInputStream());
      InputStreamReader read = new InputStreamReader(it);
      BufferedReader buff = new BufferedReader(read);
      StringBuilder dta = new StringBuilder();
      String chunks ;
      while((chunks = buff.readLine()) != null)
      {
         dta.append(chunks);
      }
 }
 else
 {
     //Handle else
 } 
```

**注意**：*不要忘记处理代码中的异常。*

# sql - insert into table when data missing

> ID：13705496
> 
> 赞同：2
> 
> 时间：2012-12-04T14:46:40.077
> 
> 标签：sql, oracle, plsql

I have a table which keeps the record of inbound/outbound domestic/international mails for different dates. Here is the sample table:

```
Date          location       in_out_code      dom_int_code         mail_count
------------------------------------------------------------------------------
11/01/2012    chicago             in                I                  3
11/02/2012    la                  in                I                  2
11/03/2012    ny                  in                I                  4   
11/03/2012    ny                  out               D                  5
11/04/2012    phoenix             out               D                  1
11/05/2012    phoenix             in                D                  3 
```

I want to create a table which stores all the combinations for each day, like the following (for readability I broke down the output):

```
Date         location          in_out_code     dom_int_code     mail_count
----------------------------------------------------------------------------
11/01/2012   chicago               in              I              3
11/01/2012   chicago               in              D              0 <-- inserted
11/01/2012   chicago               out             I              0 <-- inserted
11/01/2012   chicago               out             D              0 <-- inserted

11/02/2012   la                    in              I              2
11/02/2012   la                    in              D              0 <-- inserted
11/02/2012   la                    out             I              0 <-- inserted
11/02/2012   la                    out             D              0 <-- inserted

11/03/2012   ny                    in              I              4   
11/03/2012   ny                    in              D              0 <-- inserted
11/03/2012   ny                    out             I              0 <-- inserted
11/03/2012   ny                    out             D              5

11/04/2012   phoenix               in              I              0 <-- inserted
11/04/2012   phoenix               in              D              0 <-- inserted
11/04/2012   phoenix               out             I              0 <-- inserted
11/04/2012   phoenix               out             D              1

11/05/2012   phoenix               in              I              0 <-- inserted
11/05/2012   phoenix               in              D              3
11/05/2012   phoenix               out             I              0 <-- inserted
11/05/2012   phoenix               out             D              0 <-- inserted 
```

How will I do that. Any suggestion?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:09:02.870

Oracle 10g 及更高版本。您可以使用外连接扩展[分区](http://docs.oracle.com/cd/E11882_01/server.112/e25554/analysis.htm#sthref1231)来填补数据中的空白：

包含您提供的数据的表格：

```
SQL> create table Your_Table_Name(Date1,  location1, in_out_code, dom_int_code, mail_count) as(
  2    select to_date('11/01/2012', 'mm/dd/yyyy'),    'chicago',    'in',   'I',   3 from dual union all
  3    select to_date('11/02/2012', 'mm/dd/yyyy'),    'la'     ,    'in',   'I',   2 from dual union all
  4    select to_date('11/03/2012', 'mm/dd/yyyy'),    'ny'     ,    'in',   'I',   4 from dual union all
  5    select to_date('11/03/2012', 'mm/dd/yyyy'),    'ny'     ,    'out',  'D',   5 from dual union all
  6    select to_date('11/04/2012', 'mm/dd/yyyy'),    'phoenix',    'out',  'D',   1 from dual union all
  7    select to_date('11/05/2012', 'mm/dd/yyyy'),    'phoenix',    'in' ,  'D',   3 from dual
  8  )
  9  ;

Table created 
```

我们的查询：

```
SQL> with t2(in_out_code, dom_int_code) as(
  2    select 'in',  'I' from dual union all
  3    select 'out', 'I' from dual union all
  4    select 'in',  'D' from dual union all
  5    select 'out', 'D' from dual
  6  )
  7  select t1.date1
  8       , t1.location1
  9       , t2.in_out_code
 10       , t2.dom_int_code
 11       , nvl(t1.mail_count, 0) as mail_count
 12    from your_table_name t1
 13    partition by (t1.date1, t1.location1)
 14    right outer join t2
 15      on (t1.in_out_code = t2.in_out_code and
 16          t1.dom_int_code = t2.dom_int_code)
 17  ; 
```

结果：

```
DATE1       LOCATION1 IN_OUT_CODE DOM_INT_CODE MAIL_COUNT
----------- --------- ----------- ------------ ----------
11/01/2012   chicago   in          D                     0
11/01/2012   chicago   in          I                     3
11/01/2012   chicago   out         D                     0
11/01/2012   chicago   out         I                     0
11/02/2012   la        in          D                     0
11/02/2012   la        in          I                     2
11/02/2012   la        out         D                     0
11/02/2012   la        out         I                     0
11/03/2012   ny        in          D                     0
11/03/2012   ny        in          I                     4
11/03/2012   ny        out         D                     5
11/03/2012   ny        out         I                     0
11/04/2012   phoenix   in          D                     0
11/04/2012   phoenix   in          I                     0
11/04/2012   phoenix   out         D                     1
11/04/2012   phoenix   out         I                     0
11/05/2012   phoenix   in          D                     3
11/05/2012   phoenix   in          I                     0
11/05/2012   phoenix   out         D                     0
11/05/2012   phoenix   out         I                     0

20 rows selected 
```

# xml - How to write XPath for this case?

> ID：13705497
> 
> 赞同：0
> 
> 时间：2012-12-04T14:46:38.560
> 
> 标签：xml, xpath

Suppose I have an XML:

```
<as>
  <a>
    <name>xxx</name>
    <data>xxx-data</data>
  </a>
  <a>
    <name>yyy</name>
    <data>yyy-data</data>
  </a>
  <a>
    <name>zzz</name>
    <data>zzz-data</data>
  </a>
</as>

```

Now I would like to write an `XPath` to select the `data` text of the element `a` with the `name` text `xxx`. This `Xpath` should return `xxx-data`. How can I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:49:39.510

在级别上使用谓词`a`选择 right `a`，然后取其`data`子项：

```
/as/a[name = 'xxx']/data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:52:00.293

这样的事情应该做：

```
/as/a[name="xxx"]/data 
```

# python - Match mysql data type from python for load data

> ID：13705503
> 
> 赞同：0
> 
> 时间：2012-12-04T14:46:53.897
> 
> 标签：python, mysql

I have a python script to load data to a mysql table problem that I am running into is following:

```
Warning: Incorrect integer value: 'user_id' for column 'user_id' at row 1
  +'VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',row)
Warning: Invalid TIMESTAMP value in column 'edit_time' at row 1
  +'VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',row) 
```

and this is just a one line of many warning lines, I understand the error and based on my understanding I guess the row is still in the string format or the conversion didn't happen properly. I was thinking to cast each element in the row after I read them from tsv file.

```
example: int(row[0]) 
```

but I am not sure how to cast correctly to match MySQL timestamp type for the relevant timestamp element.

```
#load training data
def readtsv(file_name, con):
    cur = con.cursor()
    with open('file.tsv', 'rb') as f:
        for row in csv.reader(f, delimiter='\t'):
            cur.execute('INSERT INTO mytable(user_id, article_id, revision_id, namespace, edit_time, md5, reverted, reverted_user_id, reverted_revision_id, delta, cur_size)'
                        +'VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',row)
    try:
        con.commit()
    except Exception, e:
        print 'unable to commit'
        print e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:08:05.817

您是否检查过您的时间戳值是否正确？

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

如果是这样，MySQL 将不会看到错误，因此不会存在警告！

作为提示，只需打印插入语句字符串并尝试通过“PhpMyAdmin”或其他数据库接口工具启动它。

MySQL 的 TIMESTAMP 值的格式为：'YYYYMMDDHHMMSS'，因此今天 2012 年 12 月 4 日 21:06:00 将以这种方式写入：'20121204210600' 带引号！

# javascript - BaseX: Javascript function not working in XSLT

> ID：13705505
> 
> 赞同：1
> 
> 时间：2012-12-04T14:46:59.700
> 
> 标签：javascript, xslt, jaxp, basex

I create an XSLT with Altova, now I want to use it with Basex and call the transformation from java. In Altova I don't have any problem, but under Basex I have "[FODC0002] Impossible to compile the stylesheet". A part of the XSLT is:

```
 <xsl:stylesheet version='1.0' xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:js="urn:custom-javascript" exclude-result-prefixes="msxsl js" xmlns:math="http://exslt.org/math" extension-element-prefixes="math">
    <xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes"/>
       <xsl:template match="Linee">
     <root_bordero>
     <xsl:element name="bordero">
            <xsl:apply-templates select="Linea"/>
     </xsl:element>
     </root_bordero>
       </xsl:template>
    <xsl:template match="Linea">
    <xsl:variable name="num_corse_mattina" select="count(./Fasce[./@nome='mattina']/orari_partenza/*)"/>
    <xsl:variable name="num_bus" as="xs:integer" select="count(document('/path_to/Autobus.xml')/Autobus/Autobus[./@Linea=current()/@id_linea and ./@Fascia='mattina']/@Targa)"/> 
     .....
    <xsl:variable name="array_bus_mat" as="xs:string*" select="tokenize(js:random(number($num_bus),number($num_corse_mattina)),'\s')"/>
    ......
     </xsl:template>
     <msxsl:script language="JavaScript" implements-prefix="js">
           <![CDATA[  
             function random(range,lenght) {

        var array = new Array(lenght);
        var array_key = new Array(lenght);
        var min = 1;
                for (var i = 0; i < lenght; i++) {
            array[i]=i+1;
                }
               array_key[0] = Math.floor(Math.random() * (range - min +1))+min;

                for (var i=1; i<lenght; i++) {
                    var key = Math.floor(Math.random() * (range - min +1))+min;

                while(array_key[i-1]==key){
           key = Math.floor(Math.random() * (range - min +1))+min;
                     }
                     array_key[i]=key;
                 }

         var string='';
         for (var i=0; i<lenght-1; i++) {
        string=''+string+array_key[i] + ' '; 
             }
        string=string+array_key[i];

            return string;
                }
            ]]> 
          </msxsl:script>
       </xsl:stylesheet> 
```

Under Java, I tried the XSLT transformation using both JAXP and Basex JQX, but the compile error is "The first argument of not static Java function 'random' is not a valid object reference. "

Please, help me!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:50:22.410

msxsl:script 是该语言的专有 Microsoft 扩展，您不能指望它可以在非 Microsoft 处理器上工作。

# pthreads - Parse list 3 threads a time, when 5 completed works, server signal to do something

> ID：13705507
> 
> 赞同：0
> 
> 时间：2012-12-04T14:47:03.810
> 
> 标签：pthreads, mutex, semaphore

Hy I am curious does anyone know a tutorial example where semaphores are used for more than 1 process /thread. I'm looking forward to fix this problem. I have an array, of elements and an x number of threads. This threads work over the array, only 3 at a moment. After 5 works have been completed, the server is signelised and it clean those 5 nodes. But I'm having problems with the designing this problem. (node contains worker value which contains the 'name' of the thread that is allowed to work on it, respectivly nrNodes % nrThreads) In order to make changes on the list a mutex is neccesarly in order not to overwrite / make false evaluations.

But i have no clue how to limit 3 threads to parse, at a given point, the list, and how to signal the main for cleaning session. I have been thinking aboutusing a semafor and a global constant. When the costant reaches 5, the server to be signaled(which probably would eb another thread.)

Sorry for lack of code but this is a conceptual question, what i have written so far doesn't affect the question in any way.

# java - Java 2Dimensional Boolean Array Values

> ID：13705511
> 
> 赞同：0
> 
> 时间：2012-12-04T14:47:20.557
> 
> 标签：java, multidimensional-array, boolean

I'm having a problem with my 2 dimensional boolean array. (or it may be with the logic of printing out the values). I set all of the values in the array to false in the beginning, and then later i print out the values to the screen. When i print them out, they all come up as true.

```
x=20;
y=10;
boolArray = new boolean[x][y];

for(int c=0;c<x;c++)
{
  for(int i=0;i<y;i++)
  {
    boolArray[c][i] = false;
  }
}

System.out.println("2D Boolean Array:");

for(int a = 0; a < boolArray.length; a++)
{
  for(int b = 0; b < boolArray[a].length; b++)
  {
    if(boolArray[a][b] = true)
    {
      System.out.print("T");
    }
    else if(boolArray[a][b] = false)
    {
      System.out.print("F");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:51:11.583

这是不好的：

```
if(boolArray[a][b] = true)
    {
      System.out.print("T");
    }
    else if(boolArray[a][b] = false)
    {
      System.out.print("F");
    } 
```

您正在使用赋值运算符`=`而不是比较运算符`==`

你可以把它改成

```
if(boolArray[a][b] == true)
//...
else if(boolArray[a][b] == false) 
```

或者更好

```
if(boolArray[a][b])
//...
else if(!boolArray[a][b]) 
```

甚至更好：

```
if(boolArray[a][b])
//...
else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:51:02.523

尝试这个：

```
 if(boolArray[a][b])
    {
      System.out.print("T");
    }
    else
    {
      System.out.print("F");
    } 
```

使用布尔值，您可以这样做

```
if(boolean field) 
```

您使用`=`了分配而不是`==`比较。

# javascript - Client-side JavaScript blog engine/script

> ID：13705512
> 
> 赞同：5
> 
> 时间：2012-12-04T14:47:23.080
> 
> 标签：javascript, content-management-system, client-side

Do you know any modern JavaScript blog engine or script which runs on client side? I am not talking about node.js, but rather a script which doesn't need more than static WWW server (i.e. no PHP).

It should:

*   fetch blog posts from some JS database (e.g. localStorage, external JSON backend)
*   render them using some HTML template
*   allow to link to specific post
*   possibly allow to edit posts and send them back to the database?

I know about JavascriptMVC, AngularJS, Backbone, Knockout, etc., but they are rather frameworks than complete apps. I'm searching for something similar to the old [JSCMS](http://jscms.sourceforge.net/eng/).

**Update:** Searching through GitHub I have found some desirable projects: [MiniLOL](https://github.com/meh/miniLOL) and [Static Site CMS](https://github.com/issackelly/static-site-cms). Do you know any more?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:55:42.303

当然可以，但每个人都必须在同一台计算机上才能使“博客引擎”工作。这几乎等同于每个人都使用相同的文本文档。

# xamarin.ios - 我可以在 Mac 上的 MonoDevelop 中引用 .NET 4.0.3 运行时吗？

> ID：13705518
> 
> 赞同：0
> 
> 时间：2012-12-04T14:47:30.453
> 
> 标签：xamarin.ios, monodevelop

在[关于在可移植类库中使用 .NET 4.0.3 的问题中，](https://stackoverflow.com/questions/13683848/visual-studio-2010-portable-class-library-wont-let-me-change-the-target)我说得太早了：我让 PCL 在我的 Windows 机器上运行，但现在我无法让它在 Mac 上运行。如果库设置为使用 .NET 4.03，我会在 MonoDevelop 中收到编译器错误，说不支持该框架。所以我被困在 .NET 4.0 的 PCL 上，这很烦人，因为我需要 4.0.3 的一些功能。

那么，有没有办法**在 Mac 上的**MonoTouch/MonoDevelop 中以 .NET 4.0.3 为目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:44:05.940

MonoDevelop（直到 3.0.6）被硬编码为*仅*适用于 PCL Profile1（我认为它是 Profile1，无论如何）。作为一种解决方法，您可以尝试切换到 Profile1 并构建它。

在 MacOS 上，MonoDevelop 仅与 MonoTouch（或 Mono4Android）系统程序集链接，并忽略 PCL 配置文件约束（除了验证配置文件是否为 Profile1）。如果 MonoTouch 有您尝试使用的 4.0.3 API，那么一切都会顺利进行。

# r - 语言 R 的基于网络的解释器

> ID：13705519
> 
> 赞同：7
> 
> 时间：2012-12-04T14:47:37.650
> 
> 标签：r, web, interpreter

我正在为语言 R 寻找基于 Web 的解释器。更准确地说，我正在寻找像[http://codepad.org/](http://codepad.org/)这样的 IDE ，我可以在其中提供代码，服务器应该执行并为我提供输出.

我浏览了 Rapache 之类的应用程序，但它们不符合我的要求，因为它们不能接受来自客户端的代码、执行它并提供结果。

简而言之，我可以找到接受用户输入的 Web 应用程序，执行特定的 R 脚本，然后以格式整齐的方式放置输出，但不是接受 R 代码的 Web 应用程序，执行它然后以整洁的方式放置它.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T04:51:07.040

想到了几种可能性：

*   [ideone](http://ideone.com)提供了很多不同的语言，R 就是其中之一。当您运行脚本时，会为您提供一个链接，您可以将其嵌入网页中（但遗憾的是，它不显示输出）。如果您创建一个帐户，您还可以存储以前运行的脚本。
    *   亲：你可以很容易地插入`/plain/`到你的脚本中，并且能够获得一个可以直接在 R 中获取的 URL。例如，如果你的脚本在线的 URL 是“ [http://ideone.com/PIkeD](http://ideone.com/PIkeD) ”，那么你可以用于`source("http://ideone.com/plain/PIkeD")`直接从 ideone 服务器加载脚本。
    *   缺点：~~停留在 2.11 版~~可能并不总是 R 的最新版本。目前在 3.2.2 版。无法安装其他软件包。输出未显示在提供的嵌入脚本中。
*   ~~[Cloudstat 控制台](http://alpha.kloudstat.com/index.php?do=/console/)运行更新版本的 R (2.15.1)，其中包含很多常用包。它*曾经*有一个非常有趣的博客/笔记本界面，集成了代码和输出，但目前似乎不可用。~~
    ~~*   Pro：对于在紧要关头运行相当简单的事情很有用。~~
    *   ~~缺点：无法安装其他软件包。输出未在代码块中格式化，因此不易阅读。目前，无法保存或共享您运行的代码。~~
*   [Crunch](http://crunch.kmi.open.ac.uk/)提供完整的 RStudio 设置，运行最新版本的 R，并允许您安装所需的包。这可能比必须安装自己的 RStudio 服务器更方便。不过，您确实必须申请一个帐户。
    *   优点：几乎所有你对 R/RStudio 的期望。也允许您使用 Sweave 和 R markdown 来自动创建文档。这些文件也可以公开托管。这是一个示例，我将一个页面放在名为“gallery”的公共文件夹中：http: [//crunch.kmi.open.ac.uk/people/~mrdwab/gallery/howzat.html](http://crunch.kmi.open.ac.uk/people/~mrdwab/gallery/howzat.html)
    *   缺点：有时加载时间有点慢，但是当我运行 RStudio 桌面时，我不知道 Crunch 与运行我自己的 RStudio 服务器相比如何。

* * *

### 2014 年 1 月 10 日更新

[最近，关于R-Fiddle](http://www.r-fiddle.org/)作为一种共享 R 代码的有趣方式也引起了相当多的关注。看起来它是强大的[http://www.rdocumentation.org/](http://www.rdocumentation.org/)网站的动力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T17:41:00.643

RStudio IDE (Server) 可能是您问题的答案。看看[http://www.rstudio.com/ide/](http://www.rstudio.com/ide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T02:28:28.283

你可以试试我们正在 AT&T 研究实验室开发的 Rcloud。它是一个类似于 Rstudio/IPYthon 的开源 IDE，在协作方面具有更高级的功能。 [https://github.com/att/rcloud](https://github.com/att/rcloud)

RCloud 是一个用于协作创建和共享数据分析脚本的环境。RCloud 允许您在 R、HTML5、Markdown、Python 等中混合分析代码。与 Sage、iPython 笔记本和 Mathematica 非常相似，RCloud 提供了一个笔记本界面，可让您轻松记录会话并使用文本、方程式和支持图像对其进行注释。

# c# - Does not contain a constructor that takes 1 argument even though there is a constructor that takes 1 argument

> ID：13705522
> 
> 赞同：0
> 
> 时间：2012-12-04T14:47:44.043
> 
> 标签：c#

I'm trying to build a class that will hold a row of data from a CSV file along with its header information. Then outside the class I am making a List<> of elements of this class. However I am getting this error which completely worthless, "DynamicCSV does not contain a constructor that takes 1 arguments." Fact is it does in fact contain a constructor with 1 argument.

```
class DynamicCSV : DynamicObject
{
    public List<string> columnHeaders;
    public List<string> rowData;

    /* Constructor with 1 argument */        
    DynamicCSV(List<string> headers)
    {
        columnHeaders = new List<string>();
        dynamic rowData = new List<string>();
        columnHeaders = headers;
    }
}

/* code that calls the constructor */
while (!streamReader.EndOfStream)
{
    List<string> headers = new List<string>();
    List<string> dataRow = new List<string>();
    List<DynamicCSV> dataRows = new List<DynamicCSV>();

    if (true == isHeaderRow)
    {
        currentRow = streamReader.ReadLine();
        headers.AddRange(currentRow.Split(','));

        dataRows.Add(new DynamicCSV(headers));  // here is the error
        isHeaderRow = false;
    }

    else
    {
        currentRow = streamReader.ReadLine();
        dataRow.AddRange(currentRow.Split(','));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T14:50:02.860

您需要将构造函数标记为`public`（或可能`internal`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:50:24.330

制作你的构造`public`器，否则它不能被“看到”。

# bash - verbatim text stored in Bash variable

> ID：13705524
> 
> 赞同：2
> 
> 时间：2012-12-04T14:47:47.143
> 
> 标签：bash, shell, variables, cat, verbatim

I want to store verbatim text in Bash variables. I have an approach described here and I would like criticism and suggestions on improving this approach. Currently, the specific application is to have functions within a shell script library that are, to some extent, self documenting. Here is the sort of function I have in mind:

```
templateFunction(){
################################################################################
interrogationInformation=$(cat << 2012-09-26T1909
    <class>
        setup
    </class>
    <description>
        This is a natural language description of this function.
    </description>
    <prerequisiteFunctions>
        myFunction1
        myFunction2
    </prerequisiteFunctions>
    <prerequisitePrograms>
        myProgram1
        myProgram2
    </prerequisitePrograms>
2012-09-26T1909
)
################################################################################
if [ "${1}" != "-interrogate" ]; then #interrogation
    echo "function template"
fi #interrogation
} 
```

An interrogation function can query the template function and the template function then returns some information about itself by way of the 'verbatim' variable interrogationInformation. The interrogation function parses this information.

In due course, it is likely that special characters such as quotation marks could be stored in these 'verbatim' variables (for example, in natural language). These variables could be used also for building code files, such as for web pages. The difficulty in using this approach is that cat can vary between distributions and the resulting behaviour can be unpredictable. Essentially, I would like criticism of my approach and suggestions for improvement. Perhaps one improvement would be a better (preferably standard) program than cat as used in this case.

I thank you very much for any suggestions.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:18:44.120

You can use `read` instead of `cat` as follows:

```
IFS= read -d '' interrogationInformation << "EOF"
    <class>
        setup
    </class>
    <description>
        This is a natural language description of this function.
    </description>
    <prerequisiteFunctions>
        myFunction1
        myFunction2
    </prerequisiteFunctions>
    <prerequisitePrograms>
        myProgram1
        myProgram2
    </prerequisitePrograms>
EOF 
```

Note that quoting `EOF` prevents any parameter expansion in the text.

# ajax - 从 AJAX/Javascript 网页中抓取内容

> ID：13705525
> 
> 赞同：0
> 
> 时间：2012-12-04T14:47:47.063
> 
> 标签：ajax, web-scraping

我需要在我需要的内容由 AJAX 生成的网页上进行一些屏幕抓取。在初始页面上有一个带有 4 个选项卡的表格。当您单击任何选项卡时，表格的内容会发生变化。我只需要第三个选项卡中的内容。我使用了谷歌浏览器“检查元素”工具来查看请求和发布数据是什么，当我从检查元素会生成 PHP curl 请求。但这仅适用于会话持续的 30 分钟。有谁知道我可以获得这些信息的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:44:52.007

我不会在这里重现代码，但我会指出答案。它在本书中：

[http://www.amazon.com/Webbots-Spiders-Screen-Scrapers-Developing/dp/1593273975/ref=dp_ob_image_bk](https://rads.stackoverflow.com/amzn/click/com/1593273975)

必须为从事您所做的事情的人购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:03:54.643

最后我使用 htmlunit 来获取我需要的内容。我还发现 HTMLUnit Scripter 对帮助生成所需的 Java 代码非常有用。

# threadpool - 使用 Windows ThreadPool API 的内存泄漏

> ID：13705528
> 
> 赞同：3
> 
> 时间：2012-12-04T14:47:53.313
> 
> 标签：threadpool

我在我的应用程序中使用 Windows ThreadPools，每次调用 CreateThreadPoolWork() 时都会遇到 136 字节的内存泄漏，如通过 UMDH 所见：

```
+ 1257728 ( 1286424 -  28696)   9459 allocs BackTraceB0035CC
+    9248 (   9459 -    211)    BackTraceB0035CC    allocations

    ntdll!RtlUlonglongByteSwap+B52
    ntdll!TpAllocWork+8D
    KERNEL32!CreateThreadpoolWork+25
    ... My Code ... 
```

我正在使用 Cleanup Group，因此根据文档，我没有调用 CloseThreadPoolWork()。

我处理线程池的代码是：

```
typedef PTP_WORK ThreadHandle_t;
typedef PTP_WORK_CALLBACK THREAD_ENTRY_POINT_T;

static PTP_POOL pool = NULL;
static TP_CALLBACK_ENVIRON CallBackEnviron;
static PTP_CLEANUP_GROUP cleanupgroup = NULL;

int mtInitialize()
{
    InitializeThreadpoolEnvironment(&CallBackEnviron);

    pool = CreateThreadpool(NULL);

    if (NULL == pool)
    {
        return -1;
    }

    cleanupgroup = CreateThreadpoolCleanupGroup();

    if (NULL == cleanupgroup)
    {
        return -1;
    }

    SetThreadpoolCallbackPool(&CallBackEnviron, pool);

    SetThreadpoolCallbackCleanupGroup(&CallBackEnviron, cleanupgroup, NULL);

    return 0; // Success
}

void mtDestroy()
{
    CloseThreadpoolCleanupGroupMembers(cleanupgroup, FALSE, NULL);
    CloseThreadpoolCleanupGroup(cleanupgroup);
    DestroyThreadpoolEnvironment(&CallBackEnviron);
    CloseThreadpool(pool);
}

//Create thread
ThreadHandle_t mtRunThread(THREAD_ENTRY_POINT_T entry_point, void *thread_args)
{
    PTP_WORK work = NULL;

    work = CreateThreadpoolWork(entry_point, thread_args, &CallBackEnviron);

    if (NULL == work) {
        // CreateThreadpoolWork() failed.
        return 0;
    }

    SubmitThreadpoolWork(work);

    return work;
}

//Wait for a thread to finish
void mtWaitForThread(ThreadHandle_t thread)
{
    WaitForThreadpoolWorkCallbacks(thread, FALSE);
} 
```

难道我做错了什么？任何想法为什么我会泄漏内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-17T02:40:51.843

鉴于您的评论，我猜您想通了，但问题是您只调用 `CloseThreadpoolCleanupGroupMembers()`.`mtDestroy()`

`CloseThreadpoolCleanupGroupMembers()`如果您有一个持久线程池，除非您定期调用，否则不会释放内存。您的代码和评论建议您这样做，但如果没有负责创建和销毁线程池的代码，我无法确认这一点。

我对持久线程池的建议是只调用`CloseThreadpoolWork()`回调函数。如果您要创建和销毁线程池，Microsoft 的建议会更有效，但如果您在应用程序的生命周期内维护一个线程池，则`CloseThreadpoolWork()`比定期调用更简单、更容易。`CloseThreadpoolCleanupGroupMembers()`

顺便说一句，只要您告诉`CloseThreadpoolCleanupGroupMembers()`取消任何挂起的回调（传递`fCancelPendingCallbacks`as `TRUE`）以确保`CloseThreadpoolWork()`在任何已清理的工作项上被调用，就可以安全地执行这两项操作：

> 您只能通过关闭工作对象来撤销它的成员资格，这可以使用 CloseThreadpoolWork 函数单独完成。线程池知道工作对象是清理组的成员，并在关闭它之前撤销其成员资格。这可确保当清理组稍后尝试关闭其所有成员时应用程序不会崩溃。反之则不然：如果您首先指示清理组关闭其所有成员，然后对现在无效的工作对象调用 CloseThreadpoolWork，您的应用程序将崩溃。

从[带有 C++ 的 Windows - 线程池取消和清理](https://msdn.microsoft.com/en-us/magazine/hh456398.aspx)

# sql - 如何在聚合函数 SQL Server 中有 where 子句

> ID：13705532
> 
> 赞同：2
> 
> 时间：2012-12-04T14:48:02.747
> 
> 标签：sql, sql-server, sql-server-2008, tsql

好的，我有一个如下所示的表：

```
ID   AMOUNT      PAID
1    50.00       Y
2    100.00      N
3    200.00      Y 
```

我想看到类似的东西：

```
Total     Due Paid
350.00    1   2 
```

所以我的 SQL 看起来像（在我的脑海中......它不是那样工作的，这就是我在这里的原因）

```
select sum(amount)
,count(paid where paid='y') as due
,count(paid where paid='n') as paid 
from sometable where something=somethingelse 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:50:24.847

```
select sum(amount) as total, 
       sum(case paid when 'N' then 1 else 0 end) as due, 
       sum(case paid when 'Y' then 1 else 0 end) as paid
from sometable where something=somethingelse 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:44:47.630

另一种选择

```
SELECT SUM(AMOUNT) AS Total,
       COUNT(CASE WHEN PAID = 'Y' THEN PAID END) AS Paid,
       COUNT(CASE WHEN PAID = 'N' THEN PAID END) AS Due
FROM sometable
WHERE something = somethingelse 
```

演示 om [**SQLFiddle**](http://sqlfiddle.com/#!3/0fa21/1/0)

# r - by() 函数是否使列表不断增长

> ID：13705533
> 
> 赞同：7
> 
> 时间：2012-12-04T14:48:05.320
> 
> 标签：r, benchmarking, tapply

该函数是否会`by`创建一个一次增长一个元素的列表？

我需要处理一个数据框，其中包含按因子列分组的大约 4M 观察值。情况类似于下面的例子：

```
> # Make 4M rows of data
> x = data.frame(col1=1:4000000, col2=10000001:14000000)
> # Make a factor
> x[,"f"] = x[,"col1"] - x[,"col1"] %% 5
>   
> head(x)
  col1     col2 f
1    1 10000001 0
2    2 10000002 0
3    3 10000003 0
4    4 10000004 0
5    5 10000005 5
6    6 10000006 5 
```

现在，`tapply`其中一个列上的 a 需要合理的时间：

```
> t1 = Sys.time()
> z = tapply(x[, 1], x[, "f"], mean)
> Sys.time() - t1
Time difference of 22.14491 secs 
```

但如果我这样做：

```
z = by(x[, 1], x[, "f"], mean) 
```

这不会在同一时间完成（我在一分钟后放弃了）。

当然，在上面的例子中，`tapply`可以使用，但我实际上需要将多个列一起处理。这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:16:01.380

`by`比`tapply`因为它是 wrapping慢`by`。让我们看一些基准测试：`tapply`在这种情况下，比使用快 3 倍以上`by`

**更新包括@Roland**的推荐：

```
library(rbenchmark)
library(data.table)
dt <- data.table(x,key="f")

using.tapply <- quote(tapply(x[, 1], x[, "f"], mean))
using.by <- quote(by(x[, 1], x[, "f"], mean))
using.dtable <- quote(dt[,mean(col1),by=key(dt)])

times <- benchmark(using.tapply, using.dtable, using.by, replications=10, order="relative")
times[,c("test", "elapsed", "relative")] 

#------------------------#
#         RESULTS        # 
#------------------------#

#       COMPARING tapply VS by     #
#-----------------------------------
#              test elapsed relative
#   1  using.tapply   2.453    1.000
#   2      using.by   8.889    3.624

#   COMPARING data.table VS tapply VS by   #
#------------------------------------------#
#             test elapsed relative
#   2  using.dtable   0.168    1.000
#   1  using.tapply   2.396   14.262
#   3      using.by   8.566   50.988 
```

### 如果 x$f 是一个因素，那么 tapply 和 by 之间的效率损失就更大了！

**虽然，请注意它们都相对于非因子输入有所改善，而 data.table 保持大致相同或更差**

```
x[, "f"] <- as.factor(x[, "f"])
dt <- data.table(x,key="f")
times <- benchmark(using.tapply, using.dtable, using.by, replications=10, order="relative")
times[,c("test", "elapsed", "relative")] 

#               test elapsed relative
#   2   using.dtable   0.175    1.000
#   1   using.tapply   1.803   10.303
#   3       using.by   7.854   44.880 
```

* * *

## 至于为什么，简短的答案在文档本身中。

> `?by`：
> 
> 描述
> 
> Function by 是一个面向对象的包装器，用于将 tapply 应用于数据帧。

让我们看一下`by`（或更具体地说，`by.data.frame`）的来源：

```
by.data.frame
function (data, INDICES, FUN, ..., simplify = TRUE) 
{
    if (!is.list(INDICES)) {
        IND <- vector("list", 1L)
        IND[[1L]] <- INDICES
        names(IND) <- deparse(substitute(INDICES))[1L]
    }
    else IND <- INDICES
    FUNx <- function(x) FUN(data[x, , drop = FALSE], ...)
    nd <- nrow(data)
    ans <- eval(substitute(tapply(seq_len(nd), IND, FUNx, simplify = simplify)), 
        data)
    attr(ans, "call") <- match.call()
    class(ans) <- "by"
    ans
} 
```

我们立即看到仍然有一个调用`tapply`加上很多额外的（包括调用`deparse(substitute(.))`和`eval(substitute(.))`两者都相对较慢）。`tapply`因此，您将比类似的调用更快是有道理的`by`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T17:19:57.457

关于更好的方法：使用 4M 行，您应该使用`data.table`.

```
library(data.table)
dt <- data.table(x,key="f")
dt[,mean(col1),by=key(dt)]

dt[,list(mean1=mean(col1),mean2=mean(col2)),by=key(dt)]
dt[,lapply(.SD,mean),by=key(dt)] 
```

# java - 通过环境。进入我的 application-config.xml

> ID：13705535
> 
> 赞同：0
> 
> 时间：2012-12-04T14:48:09.003
> 
> 标签：java, spring, config

我目前正在开发一个java应用程序。该应用程序有 3 个不同的属性文件。我希望能够根据运行应用程序的服务器的名称设置属性文件的名称。

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
     <list>
        <value>classpath:/config/InfSit.properties</value>      
     </list>
    </property>
 </bean> 
```

这来自我的 application-config.xml，目前工作正常。我希望能够根据运行应用程序的服务器更改属性文件的名称。所以“InfSit.properties”将是“Inf${Env}.properties”（或类似的东西） - 但我需要一种方法来传递 ${Env} 参数（甚至可以是另一个类的字符串）。谁能建议最好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:10:52.717

在 java args 中设置系统属性

```
java -Denv=Sit ... 
```

它将替换位置 expr 中的 ${env}

```
<context:property-placeholder location="classpath:/config/Inf${env}.properties" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:54:27.707

只需设置变量并引用它，我与 CATALINA_HOME 类似：

```
<context:property-placeholder location="file:${catalina.home}/conf/database_UAT.properties"
                                  ignore-unresolvable="true"/> 
```

只要确保正确设置变量...

# oauth-2.0 - 谷歌翻译 API OAuth 身份验证

> ID：13705537
> 
> 赞同：1
> 
> 时间：2012-12-04T14:48:10.437
> 
> 标签：oauth-2.0, google-translate

我正在开发一个多语言应用程序并计划使用谷歌翻译 API。我想知道 Google Translate API 是否支持 OAuth 身份验证，文档可用于使用密钥，但没有关于 OAuth 身份验证的信息。

谢谢

# sql-server-2008 - 在单个操作中授予用户对多个表的相同权限？

> ID：13705541
> 
> 赞同：0
> 
> 时间：2012-12-04T14:48:14.777
> 
> 标签：sql-server-2008

在 SQL Server Management Studio 中，有没有办法在一个步骤中为多个表配置相同的权限集？例如，我需要将单个登录的选择权限分配给 21 个不同的表。

目前，我通过进入用户的安全属性，将表添加到安全窗口，然后在每个表上一一选择适当的权限来执行此操作。在权限相同的情况下，这些是很多容易出错的重复步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:58:17.733

您可以使用`GRANT`和`DENY`设置登录权限。您可以使用动态 SQL 以编程方式执行此操作，也可以复制粘贴一堆行，仅更改表名称（对象名称）。

[http://msdn.microsoft.com/en-us/library/ms187965(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms187965%28v=sql.100%29.aspx)

[http://msdn.microsoft.com/en-us/library/ms188338(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188338%28v=sql.100%29.aspx)

```
GRANT EXEC ON dbo.MyStoredProcedure to 'myUser' 
```

# ms-access - MS Access：如何设置 Recordset.Filter 过滤器？

> ID：13705543
> 
> 赞同：0
> 
> 时间：2012-12-04T14:48:19.680
> 
> 标签：ms-access

我有一个问题，我正在尝试寻找解决方案。

我有一张桌子，它看起来像这样：

```
@myTable
id - Number
value - Text
models - Memo 
```

我也有一个看起来像这样的表：

```
@myModels
id - Number
model - Text
notes - Memo 
```

@myTable.models 值是不同@myModels.model 字符串与'|' 的串联 特点。例如，它可能有 ModelA|ModelB|ModelC| 或仅 ModelA|ModelC|

我需要根据当前选择的模型从@myTable 过滤记录集。现在我有这样的事情：

```
Dim sql As String
sql = "SELECT * FROM myTable"
Dim rs1 As Recordset
Set rs1 = DBO.Edit (sql)

sql = "SELECT model FROM myModels"
dim rs2 As Recordset
Set rs2 = DBO.Read (sql)

If Not rs2.BOF Then rs2.MoveFirst
While Not rs2.EOF

  If Not rs1.BOF Then rs1.MoveFirst
  While Not rs1.EOF
    Dim models() As String
    models = Split(rs1![models], "|")
    Dim model As String

    For Each model In models
      If model = rs2.model Then
      'Do some processing
      End If
    Next model

    rs1.MoveNext
  Wend

rs2.MoveNext
Wend 
```

我真的希望我能够在查询或过滤器中执行某种类型的正则表达式，所以它可能看起来像这样：

```
While Not rs2.EOF

  rs1.Filter( "Insert Regex Here" )
  If Not rs1.BOF Then rs1.MoveFirst
  While Not rs1.EOF
    ' Do Some Processing here
    rs1.MoveNext
  Wend

rs2.MoveNext
Wend 
```

我想我的主要问题是 @myModels 表有大约 1000 条记录并且正在增长，而 @myTable 表中有超过 30k 条记录。当尝试多次循环遍历每个记录时，这需要很长时间才能循环。

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:46:27.290

你试过 sql = "SELECT model FROM myModels where criteria" 吗？不确定当前选择的模型是什么意思，但您可以使用 tempVars 添加临时字符串或您需要的任何其他内容，也许可以加入您的 sql？你能详细说明这个模型来自哪里以及它是如何选择的吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:32:15.767

在 VBA 中迭代记录通常比单个 SQL 查询慢。通过单个 SQL 查询运行将比使用 VBA 的多个循环更快：

```
SELECT myTable.*
FROM myTable, myModels
WHERE myTable.models LIKE "%" & myModels.model & "%" 
```

在 VBA 中：

```
Dim sql As String, rs As Recordset
sql = _
      "SELECT * " & _
      "FROM myTable, myModels " & _
      "WHERE myTable.models LIKE ""*"" & myModels.model & ""*"""

Set rs = dbs.OpenRecordset(sql)
While Not rs.EOF
      'Some processing here
Loop 
```

诚然，这仍然会很慢，因为这是一个外连接，并且因为我们使用的是非优化`LIKE`运算符。

如果不是`myTable.models`字段，您可以添加一个中间表：

```
@myTableModels
tableID - number
modelID - number 
```

通过适当的关系，生成的查询将几乎是即时的：

```
SELECT myTable.*
FROM (myTable
INNER JOIN myTableModels
    ON myTable.id = myTableModels.tableID)
INNER JOIN myModels
    ON myTableModels.modelID = myModels.ID 
```

# ajax - 重新渲染后 a4j 命令链接不起作用

> ID：13705550
> 
> 赞同：5
> 
> 时间：2012-12-04T14:48:42.327
> 
> 标签：ajax, richfaces, jsf-1.2, ajax4jsf

id=txt 的文本在重新渲染后插入到命令链接之外。
因此链接被破坏了。刷新页面将其恢复。
有人可以帮忙吗？

```
<h:form id="frm">
    <h:selectOneMenu value="#{myBean.currentId}">
        <f:selectItems value="#{myBean.selectListA}" />
        <a4j:support event="onchange" action="#{myBean.changeSomething}" 
            reRender="priceGroup,idLink" />
    </h:selectOneMenu>
    <h:panelGroup id="priceGroup">
        <a4j:commandLink id="idLink">
            <h:outputText id="txt" value="#{myBean.someValue}" />
        </a4j:commandLink>
    </h:panelGroup>
</h:form> 
```

# objective-c - 使用连接的 NSString 执行选择器以查找 UIImageView

> ID：13705551
> 
> 赞同：2
> 
> 时间：2012-12-04T14:48:41.250
> 
> 标签：objective-c, ios, cocoa-touch, nsstring, selector

我是 Objective-C 的新手，如果这是一个新手问题，我很抱歉。我已经搜索了几个小时，似乎无法找到我的问题的答案。

所以我试图访问一个 UIImageView 以便我可以通过将字符串连接在一起来隐藏/取消隐藏它以获得应该隐藏/取消隐藏的 UIImageView 的名称。

我通过以下方式工作：

```
self.faceItemEyesFrightened.hidden = false; 
```

但是，每次单击按钮时，名称的**受惊部分可能会有所不同，因此，尝试重构我的代码时，我运行了一个返回 UIImageView 类型的函数，应该会受到影响。**

所以我有以下内容：

```
NSString *fullEmotionString = [@"faceItemEyes" stringByAppendingString:emotionIs]; 
```

**情绪**会在哪里受到**惊吓**，因此形成

```
faceItemEyesFrightened 
```

所以当我想做这样的事情时，我的问题就来了：

```
self.fullEmotionString.hidden = false; 
```

显然这不是正确的做法，但我不确定应该如何做，任何建议都非常感谢。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:54:08.907

你可以这样使用`NSSelectorFromString`：

```
SEL selector = NSSelectorFromString(fullEmotionString);
UIImageView *imageView = [self performSelector:selector];
imageView.hidden = NO; 
```

请注意，这需要`faceItemEyesFrightened`定义一个调用的 getter，如果您使用属性并且没有更改访问器的名称，通常就是这种情况。

话虽如此，我认为这不是您问题的最佳解决方案。例如，您可以子类化`UIImageView`并添加一个`enum MyImageViewEmotion`描述图像中情感的内容。然后，您可以将所有变量放在一个简单的数组中，然后像这样获取其中一个，而不是使用大量变量，例如`faceItemEyesFrightened`or ：`faceItemEyesHappy`

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self.emotion == %ld",
                            MyImageViewEmotionFrightened];
MyImageView *imageView = [eyeImageViews filteredArrayUsingPredicate:predicate][0] 
```

使用 an `NSDictionary`，您将情感字符串作为键，将图像视图作为值。然后你可以很容易地访问它们：

```
UIImageView *imageView = emotionViewDictionary[@"Frightened"]; 
```

顺便说一下，Objective-C 中的布尔值被称为`YES`and`NO`而不是`true`and `false`。

# javascript - 如何使这个 javascript 文本效果起作用？

> ID：13705552
> 
> 赞同：0
> 
> 时间：2012-12-04T14:48:50.810
> 
> 标签：javascript, jquery, jquery-effects

昨天我正在寻找使用 javascript 的文本效果。我被指着这个小提琴： http: [//jsfiddle.net/vCx6W/1/](http://jsfiddle.net/vCx6W/1/)这是它发布的地方： [https ://stackoverflow.com/questions/4074399/what-to-choose-for-typewriter-effect -in-javascript](https://stackoverflow.com/questions/4074399/what-to-choose-for-typewriter-effect-in-javascript)

我正在尝试使用相同的东西。我添加了这样的javascript：

```
 <script type="text/javascript" src="http://code.jquery.com/
 jquery-1.4.2.min.js"></script>

 <script type="text/javascript">
 $.fn.teletype = function(opts) {
 var $this = this,
    defaults = {
        animDelay: 50
    },
    settings = $.extend(defaults, opts);

 $.each(settings.text, function(i, letter) {
    setTimeout(function() {
        $this.html($this.html() + letter);
    }, settings.animDelay * i);
 });
 };

 $(function() {
 $('#container').teletype({
    animDelay: 100,
    text: 'Now is the time for all good men to come to the aid of their country...'
 });
 });
 </script> 
```

这在 HTML 中：

```
 <div id="container"></div> 
```

但是，我根本无法使文本出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:52:47.443

也许使用正确的 jQuery 框架？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

还要在[http://code.jquery.com/](http://code.jquery.com/) ... 之后删除断线；）

像这样：

```
<html>
    <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

     <script type="text/javascript">
     $.fn.teletype = function(opts) {
     var $this = this,
        defaults = {
            animDelay: 50
        },
        settings = $.extend(defaults, opts);

     $.each(settings.text, function(i, letter) {
        setTimeout(function() {
            $this.html($this.html() + letter);
        }, settings.animDelay * i);
     });
     };

     $(function() {
     $('#container').teletype({
        animDelay: 100,
        text: 'Now is the time for all good men to come to the aid of their country...'
     });
     });
     </script>

    </head>
    <body>

       <div id="container"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:00:23.080

我猜这不是javascript的问题，而是加载所需的资源。

我无法通过您提供的网址加载 jquery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>' 
```

一个简单的方法是使用浏览器的开发工具（我使用 Chrome）。[当我在 Chrome 中打开包含此代码的页面时，按 f12 打开开发人员工具，并检查控制台，我收到错误“加载资源失败：服务器响应http:/](http://code.jquery.com/%20jquery-1.4.2.min.js)状态为 404（未找到）” [/code.jquery.com/%20jquery-1.4.2.min.js](http://code.jquery.com/%20jquery-1.4.2.min.js)

另外，我注意到小提琴使用的是 jQuery 1.7.2。如果您仍然遇到问题，请尝试 1.7.2 而不是 1.4.2。

# javascript - 如何使用 JavaScript 将带有参数的 URL 字符串拆分为数组

> ID：13705562
> 
> 赞同：1
> 
> 时间：2012-12-04T14:49:22.407
> 
> 标签：javascript, arrays, multidimensional-array

我正在尝试分解这样的字符串：

fname=bill&mname=&lname=jones&addr1=This%20House&...

我想得到一个像这样索引的数组

```
myarray[0][0] = fname
myarray[0][1] = bill
myarray[1][0] = mname
myarray[1][1] = 
myarray[2][0] = lname
myarray[2][1] = jones
myarray[3][0] = addr
myarray[3][1] = This House 
```

url 比示例长很多。这是我尝试过的：

```
var
    fArray = [],
    nv = [],
    myarray = [];

fArray = fields.split('&');

// split it into fArray[i]['name']="value"
for (i=0; i < fArray.length; i++) {
    nv = fArray[i].split('=');
    myarray.push(nv[0],nv[1]);
    nv.length = 0;
} 
```

最终产品旨在位于“myarray”中，但我得到的是一维数组而不是二维数组。

下一个过程旨在搜索（例如）“lname”并返回它的索引，这样如果它返回“3”，我就可以使用 myarray[3][1] 访问实际的姓氏。

这是有道理的还是我把事情复杂化了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:54:40.793

您的行将`myarray.push(nv[0],nv[1]);`两个元素推送到 array `myarray`，而不是您期望的具有两个元素的单个单元格（参考：[array.push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)）。您想要的是`myarray.push( [nv[0],nv[1]] )`（注意括号）或`myarray.push(nv.slice(0, 2))`（参考：[array.slice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)）。

为了简化您的代码，我建议您使用[`Array.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var q = "foo=bar&baz=quux&lorem=ipsum"; 
         // PS. If you're parsing from a-tag nodes, they have a property 
         // node.search which contains the query string, but note that 
         // it has a leading ? so you want node.search.substr(1)

var vars = q.split("&").map(function (kv) {
               return kv.split("=", 2);
           }); 
```

对于搜索，我建议使用[array.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var srchkey = "foo";
var matches = vars.filter(function (v) { return v[0] === srchkey; }); 
```

注意。array.filter 将始终返回一个数组。如果您总是只需要一个值，则可以使用[array.some](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)或定制的搜索算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:58:33.773

```
for (var i = 0; i < fArray.length; i++) {
    nv = fArray[i].split('=');
    myarray.push([nv[0],nv[1]]);
} 
```

`nv.length = 0;`不是必需的，因为您在循环`nv`的每次迭代中进行设置`for`。

此外，`var i`在`for`-loop 中使用，否则，您正在使用 / 分配一个全局变量`i`，这要求干扰。

# ios6 - 升级 xcode 后 xcode 中出现意外的“@”

> ID：13705569
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:49:49.887
> 
> 标签：ios6, xcode4.5

有人可以帮我解决为什么在我升级到最新版本的 xcode 后会出现此错误吗？该应用程序在此之前运行良好，但此语法错误现在阻止编译。我在 处收到错误 `#pragma mark -@property (nonatomic, k Constants`，而且我收到一个丢失的`@end`错误。

很抱歉发布整个页面，但我想确保我提供了足够的帮助以获得帮助。

```
#import "MBProgressHUD.h"

@interface MBProgressHUD ()

(void)hideUsingAnimation:(BOOL)animated;
(void)showUsingAnimation:(BOOL)animated;

(void)fillRoundedRect:(CGRect)rect inContext:(CGContextRef)context;

(void)done;
(void)updateLabelText:(NSString *)newText;
(void)updateDetailsLabelText:(NSString *)newText;
(void)updateProgress;
(void)updateIndicators;

(void)handleGraceTimer:(NSTimer *)theTimer;
(void)handleMinShowTimer:(NSTimer *)theTimer;

@property (retain) UIView *indicator;

@property (assign) float width;
@property (assign) float height;

@property (retain) NSTimer *graceTimer;
@property (retain) NSTimer *minShowTimer;

@property (retain) NSDate *showStarted;

@end

@implementation MBProgressHUD

#pragma mark -
#pragma mark Accessors

@synthesize mode;

@synthesize delegate;
@synthesize labelText;
@synthesize detailsLabelText;
@synthesize opacity;
@synthesize labelFont;
@synthesize detailsLabelFont;
@synthesize progress;

@synthesize indicator;

@synthesize width;
@synthesize height;
@synthesize xOffset;
@synthesize yOffset;

@synthesize graceTime;
@synthesize minShowTime;
@synthesize graceTimer;
@synthesize minShowTimer;
@synthesize taskInProgress;

@synthesize showStarted;

(void)setMode:(MBProgressHUDMode)newMode {

if (mode && (mode == newMode)) {
return;
}

mode = newMode;

[self performSelectorOnMainThread:@selector(updateIndicators) withObject:nil waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsLayout) withObject:nil waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:NO];
}

(void)setLabelText:(NSString *)newText {
[self performSelectorOnMainThread:@selector(updateLabelText:) withObject:newText waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsLayout) withObject:nil waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:NO];
}

(void)setDetailsLabelText:(NSString *)newText {
[self performSelectorOnMainThread:@selector(updateDetailsLabelText:) withObject:newText waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsLayout) withObject:nil waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:NO];
}

(void)setProgress:(float)newProgress {
progress = newProgress;

if (mode == MBProgressHUDModeDeterminate) {
[self performSelectorOnMainThread:@selector(updateProgress) withObject:nil waitUntilDone:NO];
[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:NO];
}
}

#pragma mark -
#pragma mark Accessor helpers

(void)updateLabelText:(NSString *)newText {
if (labelText != newText) {
[labelText release];
labelText = [newText copy];
}
}

(void)updateDetailsLabelText:(NSString *)newText {
if (detailsLabelText != newText) {
[detailsLabelText release];
detailsLabelText = [newText copy];
}
}

(void)updateProgress {
[(MBRoundProgressView *)indicator setProgress:progress];
}

(void)updateIndicators {
if (indicator) {
[indicator removeFromSuperview];
}

self.indicator = nil;

if (mode == MBProgressHUDModeDeterminate) {
self.indicator = [[MBRoundProgressView alloc] initWithDefaultSize];
}
else {
self.indicator = [[UIActivityIndicatorView alloc]
initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
[(UIActivityIndicatorView *)indicator startAnimating];
}

[self addSubview:indicator];
}

**#pragma mark -
@property (nonatomic, k Constants**

#define MARGIN 20.0
#define PADDING 4.0

#define LABELFONTSIZE 22.0
#define LABELDETAILSFONTSIZE 16.0

#define PI 3.14159265358979323846

#pragma mark -
#pragma mark Lifecycle methods

(id)initWithWindow:(UIWindow *)window {
@property (nonatomic, nonatomic, nonatomic, [self initWithView:window];
}

(id)initWithView:(UIView *)view {
initializer above)
if (!view) {
@property (nonatomic, ion raise:@"MBProgressHUDViewIsNillException"
format:@"The view used in the MBProgressHUD initializer is nil."];
}
return [self initWithFrame:view.bounds];
}

(id)initWithFrame:(CGRect)frame {
if (self = [super initWithFrame:frame]) {

self.mode = MBProgressHUDModeIndeterminate;
self.labelText = nil;
self.detailsLabelText = nil;
self.opacity = 0.9;
self.labelFont = [UIFont boldSystemFontOfSize:LABELFONTSIZE];
self.detailsLabelFont = [UIFont boldSystemFontOfSize:LABELDETAILSFONTSIZE];
self.xOffset = 0.0;
self.yOffset = 0.0;
self.graceTime = 0.0;
self.minShowTime = 0.0;

self.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;

self.opaque = NO;
self.backgroundColor = [UIColor clearColor];

self.alpha = 0.0;

label = [[UILabel alloc] initWithFrame:self.bounds];

detailsLabel = [[UILabel alloc] initWithFrame:self.bounds];

taskInProgress = NO;
}
return self;
}

(void)dealloc {
[indicator release];
[label release];
[detailsLabel release];
[labelText release];
[detailsLabelText release];
[graceTimer release];
[minShowTimer release];
[showStarted release];
[super dealloc];
}

#pragma mark -
#pragma mark Layout

(void)layoutSubviews {
CGRect frame = self.bounds;

@property (nonatomic, indFrame = indicator.bounds;
self.width = indFrame.size.width + 2 * MARGIN;
self.height = indFrame.size.height + 2 * MARGIN;

indFrame.origin.x = floor((frame.size.width - indFrame.size.width) / 2) + self.xOffset;
indFrame.origin.y = floor((frame.size.height - indFrame.size.height) / 2) + self.yOffset;
indicator.frame = indFrame;

if (nil != self.labelText) {

CGSize dims = [self.labelText sizeWithFont:self.labelFont];

clip the label width
float lHeight = dims.height;
float lWidth;
if (dims.width <= (frame.size.width - 2 * MARGIN)) {
lWidth = dims.width;
}
else {
lWidth = frame.size.width - 4 * MARGIN;
}

label.font = self.labelFont;
label.adjustsFontSizeToFitWidth = NO;
label.textAlignment = UITextAlignmentCenter;
label.opaque = NO;
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor whiteColor];
label.text = self.labelText;

if (self.width < (lWidth + 2 * MARGIN)) {
self.width = lWidth + 2 * MARGIN;
}
self.height = self.height + lHeight + PADDING;

indFrame.origin.y -= (floor(lHeight / 2 + PADDING / 2));
indicator.frame = indFrame;

// Set the label position and dimensions
CGRect lFrame = CGRectMake(floor((frame.size.width - lWidth) / 2) + xOffset,
floor(indFrame.origin.y + indFrame.size.height + PADDING),
lWidth, lHeight);
label.frame = lFrame;

[self addSubview:label];

// Add details label delatils text was set
if (nil != self.detailsLabelText) {
// Get size of label text
dims = [self.detailsLabelText sizeWithFont:self.detailsLabelFont];

// Compute label dimensions based on font metrics if size is larger than max then clip the label width
lHeight = dims.height;
if (dims.width <= (frame.size.width - 2 * MARGIN)) {
lWidth = dims.width;
}
else {
lWidth = frame.size.width - 4 * MARGIN;
}

// Set label properties
detailsLabel.font = self.detailsLabelFont;
detailsLabel.adjustsFontSizeToFitWidth = NO;
detailsLabel.textAlignment = UITextAlignmentCenter;
detailsLabel.opaque = NO;
detailsLabel.backgroundColor = [UIColor clearColor];
detailsLabel.textColor = [UIColor whiteColor];
detailsLabel.text = self.detailsLabelText;

// Update HUD size
if (self.width < lWidth) {
self.width = lWidth + 2 * MARGIN;
}
self.height = self.height + lHeight + PADDING;
// Move indicator to make room for the new label
indFrame.origin.y -= (floor(lHeight / 2 + PADDING / 2));
indicator.frame = indFrame;

// Move first label to make room for the new label
lFrame.origin.y -= (floor(lHeight / 2 + PADDING / 2));
label.frame = lFrame;

// Set label position and dimensions
CGRect lFrameD = CGRectMake(floor((frame.size.width - lWidth) / 2) + xOffset,
lFrame.origin.y + lFrame.size.height + PADDING, lWidth, lHeight);
detailsLabel.frame = lFrameD;

[self addSubview:detailsLabel];
}
}
}

#pragma mark -
#pragma mark Showing and execution

- (void)show:(BOOL)animated {
useAnimation = animated;

// If the grace time is set postpone the HUD display
if (self.graceTime > 0.0) {
self.graceTimer = [NSTimer scheduledTimerWithTimeInterval:self.graceTime
target:self
                                                         selector:@selector(handleGraceTimer:)
userInfo:nil
repeats:NO];
}
// ... otherwise show the HUD imediately
else {
[self setNeedsDisplay];
[self showUsingAnimation:useAnimation];
}
}

- (void)hide:(BOOL)animated {
useAnimation = animated;

// If the minShow time is set, calculate how long the hud was shown,
// and pospone the hiding operation if necessary
if (self.minShowTime > 0.0 && showStarted) {
NSTimeInterval interv = [[NSDate date] timeIntervalSinceDate:showStarted];
if (interv < self.minShowTime) {
self.minShowTimer = [NSTimer scheduledTimerWithTimeInterval:(self.minShowTime - interv)
target:self
                                                               selector:@selector(handleMinShowTimer:)
userInfo:nil
repeats:NO];
return;
}
}

// ... otherwise hide the HUD immediately
[self hideUsingAnimation:useAnimation];
}

- (void)handleGraceTimer:(NSTimer *)theTimer {
// Show the HUD only if the task is still running
if (taskInProgress) {
[self setNeedsDisplay];
[self showUsingAnimation:useAnimation];
}
}

- (void)handleMinShowTimer:(NSTimer *)theTimer {
[self hideUsingAnimation:useAnimation];
}

- (void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated {

methodForExecution = method;
targetForExecution = [target retain];
objectForExecution = [object retain];

// Launch execution in new thread
taskInProgress = YES;
[NSThread detachNewThreadSelector:@selector(launchExecution) toTarget:self withObject:nil];

// Show HUD view
[self show:animated];
}

- (void)launchExecution {
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

// Start executing the requested task
[targetForExecution performSelector:methodForExecution withObject:objectForExecution];

// Task completed, update view in main thread (note: view operations should
// be done only in the main thread)
[self performSelectorOnMainThread:@selector(cleanUp) withObject:nil waitUntilDone:NO];

[pool release];
}

- (void)animationFinished:(NSString *)animationID finished:(BOOL)finished context:(void*)context {
[self done];
}

- (void)done {
isFinished = YES;

// If delegate was set make the callback
self.alpha = 0.0;

if(delegate != nil && [delegate conformsToProtocol:@protocol(MBProgressHUDDelegate)]) {
if([delegate respondsToSelector:@selector(hudWasHidden)]) {
[delegate performSelector:@selector(hudWasHidden)];
}
}
}

- (void)cleanUp {
taskInProgress = NO;

self.indicator = nil;

[targetForExecution release];
[objectForExecution release];

[self hide:useAnimation];
}

#pragma mark -
#pragma mark Fade in and Fade out

- (void)showUsingAnimation:(BOOL)animated {
self.showStarted = [NSDate date];
// Fade in
if (animated) {
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.40];
self.alpha = 1.0;
[UIView commitAnimations];
}
else {
self.alpha = 1.0;
}
}

- (void)hideUsingAnimation:(BOOL)animated {
// Fade out
if (animated) {
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.40];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationFinished: finished: context:)];
// 0.02 prevents the hud from passing through touches during the animation the hud will get completely hidden
// in the done method
self.alpha = 0.02;
[UIView commitAnimations];
}
else {
self.alpha = 0.0;
[self done];
}
}

#pragma mark BG Drawing

- (void)drawRect:(CGRect)rect {
// Center HUD
CGRect allRect = self.bounds;
// Draw rounded HUD bacgroud rect
CGRect boxRect = CGRectMake(((allRect.size.width - self.width) / 2) + self.xOffset,
                                ((allRect.size.height - self.height) / 2) + self.yOffset, self.width, self.height);
CGContextRef ctxt = UIGraphicsGetCurrentContext();
[self fillRoundedRect:boxRect inContext:ctxt];
}

- (void)fillRoundedRect:(CGRect)rect inContext:(CGContextRef)context {
float radius = 10.0f;

CGContextBeginPath(context);
CGContextSetGrayFillColor(context, 0.0, self.opacity);
CGContextMoveToPoint(context, CGRectGetMinX(rect) + radius, CGRectGetMinY(rect));
CGContextAddArc(context, CGRectGetMaxX(rect) - radius, CGRectGetMinY(rect) + radius, radius, 3 * M_PI / 2, 0, 0);
CGContextAddArc(context, CGRectGetMaxX(rect) - radius, CGRectGetMaxY(rect) - radius, radius, 0, M_PI / 2, 0);
CGContextAddArc(context, CGRectGetMinX(rect) + radius, CGRectGetMaxY(rect) - radius, radius, M_PI / 2, M_PI, 0);
CGContextAddArc(context, CGRectGetMinX(rect) + radius, CGRectGetMinY(rect) + radius, radius, M_PI, 3 * M_PI / 2, 0);
CGContextClosePath(context);
CGContextFillPath(context);
}

@end

@implementation MBRoundProgressView

- (id)initWithDefaultSize {
return [super initWithFrame:CGRectMake(0.0f, 0.0f, 37.0f, 37.0f)];
}

- (void)drawRect:(CGRect)rect {
CGRect allRect = self.bounds;
CGRect circleRect = CGRectMake(allRect.origin.x + 2, allRect.origin.y + 2, allRect.size.width - 4,
allRect.size.height - 4);

CGContextRef context = UIGraphicsGetCurrentContext();

// Draw background
CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0); // white
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 0.1); // translucent white
CGContextSetLineWidth(context, 2.0);
CGContextFillEllipseInRect(context, circleRect);
CGContextStrokeEllipseInRect(context, circleRect);

// Draw progress
float x = (allRect.size.width / 2);
float y = (allRect.size.height / 2);
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0); // white
CGContextMoveToPoint(context, x, y);
CGContextAddArc(context, x, y, (allRect.size.width - 4) / 2, -(PI / 2), (self.progress * 2 * PI) - PI / 2, 0);
CGContextClosePath(context);
CGContextFillPath(context);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:24:48.930

抛出错误的行没有意义。

```
#pragma mark -
@property (nonatomic, k Constants 
```

在`#pragma mark -`下拉列表中放置一行，但下一行应该做什么？

如果您要声明一个属性，那么您没有在 之后关闭括号`nonatomic`，而是在`k Constants`应该是什么时候关闭括号。你确定你没有更改文件？

# facebook - (#100) 使用 Graph API Explorer 创建事件时参数 OAuthException 无效

> ID：13705570
> 
> 赞同：1
> 
> 时间：2012-12-04T14:49:50.807
> 
> 标签：facebook, facebook-graph-api

我正在使用 Graph API Explorer 来尝试解决如何在 iOS 应用程序的 Objective-C 中真正编码之前创建用户事件。

我获得了一个包含`user_event`,`publish_actions`和`create_event`权限的身份验证令牌。

我正在使用set to和set to的参数`POST`发出请求`https://graph.facebook.com/12345678/events``name``Tester 2``start_date``2013-06-27`

作为回应，我得到

```
{
  "error": {
    "message": "(#100) Invalid parameter", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

我看不出我做错了什么。任何帮助将非常感激。

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:21:53.443

这是因为您需要使用`start_time`而不是`start_date`.

文档参考： [https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# function - 按钮单击时出现空错误

> ID：13705574
> 
> 赞同：0
> 
> 时间：2012-12-04T14:49:57.263
> 
> 标签：function, vba, ms-access, null, subroutine

我有一个访问数据库，其中包含许多计算。我遇到的一个问题是我有多个文本框并且访问希望我在计算公式之前将数据输入所有文本框。当我将文本框留空时，我不断收到错误消息

> 运行时错误“94”：无效使用 Null

如何将其设置为忽略所有空值。这是我的代码

```
Public Function calculate() as double 
calculate = cdbl(textbox1.value) * cdbl(textbox2.value) * cdbl(textbox3.value) * cdbl(textbox4.value) / 144
End Function

Private Sub btn1_click()
Dim x as double 
x = calculate
textbox5.value = x
End Sub 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:03:09.170

在你的情况下，我会使用[NZ 方法。](http://msdn.microsoft.com/en-us/library/office/ff195223.aspx)

```
calculate = cdbl(nz(textbox1.value,1)) * cdbl(nz(textbox2.value,1))  * cdbl(nz(textbox3.value,1))  * cdbl(nz(textbox4.value,1))  / 144 
```

# c# - C# - 动态访问变量名称

> ID：13705577
> 
> 赞同：1
> 
> 时间：2012-12-04T14:50:11.383
> 
> 标签：c#, .net, user-interface, automation

我正在自动化一个网页。我已捕获链接并将其保存在文件中。

```
Link Url_0="gmail.com"
Link Url_1="ymail.com"
Link Url_2="hotmail.com"
Link Url_3="outlook.com" 
```

下面的语句将点击每个 url。

```
HomePage.Url_0.Click();//Homepage is the Class name 
```

我想一一点击这些网址。所以我正在使用 for 循环。

```
for(int i=0;i<3;i++)
{
String url=String.Format("Url_{0}",i);
HomePage.url.Click(); //This is throwing me error (I think that this is not correct way to do.)
Sleep(2000);
} 
```

我怎样才能在这里进行？这可以以任何方式完成吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:54:27.283

您应该将变量放入一个集合中，而不是为每个变量使用不同的名称。在您描述的庄园中访问变量在技术上是可能的，但这不是像 C# 这样的语言旨在做的事情，而且是*非常*糟糕的做法。

有几个系列可供选择。这里 a`List`可能是合适的，数组也可以工作。

```
List<string> urls = new List<string>()
{
    "gmail.com",
    "ymail.com",
    "hotmail.com",
    "outlook.com"
};

foreach (string url in urls)
{
    //do whatever with the url
    Console.WriteLine(url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:56:21.623

您可以将所需的所有**链接**存储到类型的 Coolection 中：`IList<Link>`或`IEnumerable<Link>`

```
IList<Link> myCollection = new List<Link>(); 
```

之后，您将使用

```
foreach(var item in myCollection ) {
      //Here implement your logic with click
} 
```

# string - 将一串字节转换为 cv::mat

> ID：13705578
> 
> 赞同：8
> 
> 时间：2012-12-04T14:50:12.663
> 
> 标签：string, opencv, mat

我需要实现一个函数，该函数**接收包含图像字节的字符串**（通过 boost 套接字连接接收）**并将**信息转换为**OpenCV cv::Mat**。

我也知道图像的宽度和高度以及它的字节大小。我的功能如下所示：

```
void createImageFromBytes(const std::string& name, std::pair<int,int> dimensions, const std::string& data)
{
   int width,height;
   width = dimensions.first;
   height = dimensions.second;
   //convert data to cv::Mat image

   std::string filepng = DATA_PATH"/" + name +".png";
   imwrite(filepng, image);
} 
```

执行此操作的最佳方法是什么？OpenCV 是否有来自字符串的 Mat 构造函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T14:56:59.650

**OpenCV Mat**有一个来自 的构造函数`vector<byte>`，但这不是那么直观。您需要先以这种方式从字符串转换为向量：

```
std::vector<byte> vectordata(data.begin(),data.end()); 
```

然后你可以从向量创建一个 cv::Mat ：

```
cv::Mat data_mat(vectordata,true); 
```

您还需要解码图像（根据 OpenCV 版本检查允许的类型的文档，png、jpg）

```
cv::Mat image(cv::imdecode(data_mat,1)); //put 0 if you want greyscale 
```

现在您可以检查生成的图像大小是否与您发送的相同：

```
cout<<"Height: " << image.rows <<" Width: "<<image.cols<<endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-30T05:42:41.683

在这里很容易绊倒，因为图像可能包含空字符，并且任何处理字符串的 c 函数都会将 null 视为字符串结尾

阅读图片

```
cv::Mat image;
    image = cv::imread("../test/image.png", CV_LOAD_IMAGE_COLOR); 
```

转换为字节（这只是工作代码，未检查泄漏）

```
int dataSize = image.total() * image.elemSize();
//convert to bytes
std::vector<char> vec(dataSize);
memcpy(&vec[0], reinterpret_cast<char *>(image.data), dataSize);
std::string test2(vec.begin(), vec.end()); 
```

测试并查看转换是否有效

```
//test
cv::Mat data_mat(height,width,CV_8UC3,const_cast<char*>(test2.c_str()));
imwrite("out2.png", data_mat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:48:58.863

如果字符串中的数据是原始像素（而不是 Jpeg/png 等），您可以直接创建 cv::mat

```
// assuming an RGB image in bytes              
cv::Mat mat(height,width,CV_8UC3,string.data()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-24T03:57:02.557

这是我对Jav_Rock的改进解决方案，问题是不清楚使用vector（c ++中没有定义字节类型，我没有发现），而不是使用vector，这是一个示例代码

```
int func(char * pfile){
string strfile = pfile;
std::vector<unsigned char> vectordata(strfile.begin(),strfile.end());
Mat data_mat(vectordata, true);
Mat graySacleFrame = imdecode(data_mat, 0); //PGM image
...
} 
```

# javascript - Javascript innerHTML 更新错误

> ID：13705583
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:50:25.203
> 
> 标签：javascript, html, javascript-events

我有以下 javascript 行：

```
<div id="box" name="1" margin="4px" padding="4px" onclick="memory(1)"></div> 
```

相关的`memory()`功能是：

```
function memory(a) {
    var tmpDar = a-1;
    var m = document.getElementsByName(tmpDar);
    m.innerHTML = arrA[tmpDar];

} 
```

但是，当我尝试执行代码时，HTML 并没有改变……有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:52:31.480

[`document.getElementsByName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)返回一个 NodeList 而不是单个元素！

因此，为了设置`innerHTML`您的 div，您必须在该数组中引用一个条目，例如，像这样：

```
function memory(a) {
    var tmpDar = a-1;
    var m = document.getElementsByName(tmpDar);
    m[0].innerHTML = arrA[tmpDar];
} 
```

在您的代码中，您设置`innerHTML`NodeList 对象的属性，该对象在文档中没有（视觉）效果。

一般来说，最好使用`id`而不是`name`. 然后你可以[`document.getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)像这样使用：

```
function memory(a) {
    var tmpDar = a-1;
    var m = document.getElementById(tmpDar);
    m.innerHTML = arrA[tmpDar];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:53:37.037

`0`据我所知，您试图找到名称为的所有元素。而且没有`0`名字。

还有其他两个所说的，它返回一个数组，您需要调用该数组的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:54:03.460

`document.getElementsByName`返回一个数组。因此，如果您想要的元素具有此名称是唯一的，则应将代码替换为：

```
function memory(a) {
    var tmpDar = a-1;
    var m = document.getElementsByName(tmpDar);
    m[0].innerHTML = arrA[tmpDar];  // Here I have added index 0
} 
```

# maven - Maven 插件 java.library.path

> ID：13705586
> 
> 赞同：7
> 
> 时间：2012-12-04T14:50:36.153
> 
> 标签：maven, maven-plugin, java.library.path, sql-maven-plugin

maven-surefire-plugin 支持通过配置选项使用该`java.library.path`属性。`<argLine>`

我需要将该`java.library.path`属性传递给 sql-maven-plugin（它没有`<argLine>`配置选项），以便将 jTDS 驱动程序与 Windows 身份验证一起使用（需要 ntlmauth.dll）。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T13:49:04.110

surefire 插件是一个特例；它在单独的 JVM 中运行测试。大多数 maven 插件不这样做，它们在进程中运行。

所以你对那个插件配置不走运。

您可以尝试的一种解决方法是改用[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)`exec:exec`的目标，在可执行行上指定with并滚动您自己的 SQL 执行 java 代码。`java``-Djava.library.path`

否则，您可以添加`-Djava.library.path`到`MAVEN_OPTS`环境变量中，这将影响所有插件和所有 maven 构建（可能没问题，取决于您的设置），或者每次都将其添加到`mvn`命令行。

# backbone.js - 将我的头包裹在一个独特的backbone.js集合上

> ID：13705587
> 
> 赞同：0
> 
> 时间：2012-12-04T14:50:44.407
> 
> 标签：backbone.js, kendo-ui, backbone.js-collections

我正在开发我的第一个backbone.js 应用程序并且遇到了一些障碍。也许有人可以帮助我克服这个障碍（我的理解差距）。我想要/需要做的是将集合数据返回到我的路由器，这样我就可以将它绑定到 Kendo UI Grid，但我没有在我的集合中看到任何搜索结果......我想我一定是缺少一些基本的东西，但我不确定它是什么。

这是我到目前为止所拥有的：

```
 ES.Router = Backbone.Router.extend({routes: {
            '': 'search',
            'search': 'search',
            'results': 'results'
        },
        results: function() {
            var resultsData = new ES.Results();
            var boo = resultsData.fetch({
                    data: JSON.stringify({"query":"myquery"}),
                    type: 'POST',
                    contentType: 'application/json'
                    });
            console.log(boo);
        }});

    ES.Result = Backbone.Model.extend();

    ES.Results = Backbone.Collection.extend({   
        model: ES.Result,
        url: '/search/query'
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:42:40.423

这里有几个问题：

1.  提取应该是 GET，而不是 POST，因为提取不应保存或修改任何内容
2.  也许只是个人喜好，但我想`url`作为一个函数，以避免尝试手动修改 AJAX 请求选项。
3.  调用将`fetch`始终是异步的，因此您需要`success`在选项哈希中添加回调，或者向集合的`reset`事件添加侦听器

我会这样写集合：

```
ES.Results = Backbone.Collection.extend({   
    initialize: function() {
        this.query = "test";
    },
    model: ES.Result,
    url: function() {
        return '/search/query?query=' + this.query;
    }
}); 
```

然后在创建集合时设置搜索：

```
var resultsData = new ES.Results();
resultsData.query = "soccer"; 
```

并使用`success`和/或`on("reset")`事件来处理结果：

```
resultsData.on("reset", function(collection) {
    console.log(collection);
});

console.log("Fetching....");
resultsData.fetch({
    success: function(collection, response) {
        console.log("Got data!" + collection.length);
    },
    error: function(collection, response) {
        console.log("Error: " + response.responseText);
    }
}); 
```

​</p>

# .net - 用于字符串混淆的 const 和 static readonly 之间的区别？

> ID：13705588
> 
> 赞同：5
> 
> 时间：2012-12-04T14:50:45.813
> 
> 标签：.net, obfuscation

我们通过混淆器（至少启用字符串混淆）运行我们的 .NET 二进制文件，然后在构建过程中进行一些基本检查以验证这一点。我惊讶地注意到，通过将字符串从更改`static readonly string`为，在查看反汇编代码（通过输出）`const string`时，更改后的字符串现在以纯文本形式可见。`ildasm`

**`const string`关于字符串混淆，和有什么区别`static readonly string`？**

编辑：例如，这是一个小程序：

```
class Program
{
    private const string MyConstString = "MyConstString";
    private static readonly string MyStaticReadonlyString = "MyStaticReadonlyString";

    static void Main(string[] args)
    {
        string myLocalString = "myLocalString";

        Console.WriteLine(MyConstString);
        Console.WriteLine(MyStaticReadonlyString);
        Console.WriteLine(myLocalString);

        Console.WriteLine("Hit <ENTER> to exit");
        Console.ReadLine();
    }
} 
```

查看 .il 代码后，纯文本中的唯一值是 .il 代码`const string`。这适用于两种不同的混淆工具：

```
.field private static literal string a = "MyConstString"       // using Dotfuscator
.field private static literal string '[SOH]' = "MyConstString" // using RedGate SmartAssembly 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T20:43:17.050

对于`const`字段，它们的值只需直接包含在程序集中，这是没有办法的。这是因为编译器必须能够获取此类字段的值，而无需执行任何自定义代码。

使用`static readonly`字段，混淆器可以使用静态构造函数来执行它想要的任何代码，这意味着它们可以被混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:54:07.230

如果它是静态的，则字符串值存在于程序的数据段中，它有一个地址，并由其地址引用（在代码中）。

而如果它是 const 那么它在代码段中存在一个字符串文字。

# php - 通过具有隐私 SELF 的图形 API 向 Facebook 朋友发送任何类型的消息

> ID：13705589
> 
> 赞同：0
> 
> 时间：2012-12-04T14:50:58.513
> 
> 标签：php, facebook-graph-api

我需要通过我创建的应用程序向朋友发送一条消息，可能是 Facebook 中任何可能的消息。我想邀请我的一些朋友参加私人投票。让其他朋友参加另一个私人投票。

现在我使用 Facebook 图形 api 执行以下操作：

```
$array = array(
  'message' => $user->getName() . ' invited you to join ' . $poll->getName(),
  'link' => 'http://www.example.com/poll/' . $poll->getId(),
  'privacy' => "{'value':'SELF'}",
);
$fb->api('/[facebook_friend_id]/feed','POST',$array); 
```

但是，当这是从我的应用程序发送时，我朋友墙上的消息将对所有人可见。但我只希望这个朋友填写这个投票，而不是其他任何人。

我发现当通过应用程序发送消息时，隐私参数不起作用。我不想使用 javascript SDK，因为布局和实现不符合我们应用程序的期望。

所以我们只需要一种只有服务器端的方式来向只有我和我的朋友才能看到的朋友发送消息或通知。我找到的所有答案都像是两年前的事，所以在那段时间发生了很多事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:07:25.200

这不是 Facebook 时间线隐私的运作方式。内容在某人时间线上的可见性由其时间线所在的用户决定，而不是由发布它的用户决定。

您不能发布到其他人的时间线并选择隐私。

# excel - 关闭最后一个文档后关闭应用程序（Acrobat、Word、Excel）

> ID：13705590
> 
> 赞同：2
> 
> 时间：2012-12-04T14:50:59.430
> 
> 标签：excel, vba, ms-access, ms-word, acrobat

我有一些函数可以生成 Word、Excel 或 PDF 文档。例如，我正在处理的是将报告导出为 PDF 文件。关闭报表后，它会打开另一个使用 LiveCycle ES 8.2 创建的 PDF 表单，并用数据库中的数据填充它。在此之后，文档被关闭，但由于某种原因，Acrobat 的实例仍然在前台打开，没有打开任何文档。

这是代码：

```
DoCmd.OpenReport "myReport", acViewPreview
DoCmd.OutputTo acOutputReport, "", acFormatPDF, "C:\myReport.pdf", False
DoCmd.Close acReport, "myReport"

Dim gApp, avDoc, pdDoc, jso

Set gApp = CreateObject("AcroExch.app")
Set avDoc = CreateObject("AcroExch.AVDoc")
If avDoc.Open(exprPDF, "") Then
    Set pdDoc = avDoc.GetPDDoc()
    Set jso = pdDoc.GetJSObject

    '[...]

    pdDoc.Save PDSaveIncremental, FileNm 'Save changes to the PDF document
    pdDoc.Close 'Close the PDF document
End If

avDoc.Close (True)
Set gApp = Nothing
Set avDoc = Nothing 
```

myReport 从不打开任何 Acrobat 实例。这条线`avDoc.Open`可以。我希望 Acrobat 在我这样做时关闭`avDoc.close`。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-15T11:00:03.957

我认为你应该补充：

```
gApp.Exit 
```

之前

```
Set gApp = Nothing 
```

这似乎可以打勾，但该应用程序仍然存在，隐藏...要实际杀死 Acrobat，请在此处使用“Acrobat.exe”尝试此方法： [如何通过 VBA 代码杀死任务管理器进程？](https://stackoverflow.com/questions/26303173/how-can-i-kill-task-manager-processes-through-vba-code) 这种方法有点像大锤，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:01:03.243

经过更多测试后，我需要关闭和退出所有文档对象，以确保在没有剩余打开文档的情况下退出应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T07:14:07.527

我刚刚遇到了同样的问题并找到了以下解决方案：

```
AVDoc.Close (True)
**AcroApp.Hide**

Set AcroApp = Nothing
Set AVDoc = Nothing 
```

# ios5 - GoogleAnalytics 2.0b3 ios 5 支持

> ID：13705592
> 
> 赞同：3
> 
> 时间：2012-12-04T14:51:02.037
> 
> 标签：ios5, ios6

有任何关于支持 google analitics 2.0 for iOS 5 的信息吗？我在 iOS 5 上收到此错误

```
GoogleAnalytics 2.0b3 void GAIUncaughtExceptionHandler(NSException *) (GAIUncaughtExceptionHandler.m:41): Uncaught exception: Could not instantiate class named NSLayoutConstraint handler threw exception 
```

我可以使用这个 google analitics 2.0 beta 库将我的应用程序上传到 appstore 吗？因为我知道我们不能上传带有“beta”信息的应用程序..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:06:07.643

这是库的问题，尝试在构建阶段将 social.framework、adsupport.framework 和 accounts.framework 更改为可选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T08:27:04.483

我确实遇到了同样的错误，据此[我](https://stackoverflow.com/questions/13201586/nsinvalidunarchiveoperationexception-could-not-instantiate-class-named-nslayout)不得不取消选中我的 xib 的自动布局。为我工作。

# jmeter - 如何在 JMeter Beanshell 中获取、分配 Span Id 值？

> ID：13705595
> 
> 赞同：1
> 
> 时间：2012-12-04T14:51:14.953
> 
> 标签：jmeter

我创建了一个用户定义变量，名称为“状态”，默认值为“已启动”。

我收到了一个 HTML 响应，内容如下：

```
<SPAN id="ApplicationStatus">&nbsp;Interrupted</SPAN> 
```

我想获取 Span Id 值并在 beanshell 采样器中使用，以便在 If Controller 或 Switch Controller 中进一步处理。

我使用正则表达式提取器来提取所需的值及其工作。

但是当我说`vars.get("Status")`将始终返回默认值“已启动”时。

有没有办法可以提取所需的值“中断”并将其替换为用户定义的变量“状态”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:46:14.400

是的，您可以将该值`#ApplicationStatus`放入您的用户定义变量 ( `UDV`)。

您可以使用正则表达式，但实际上您不应该进行这种类型的解析，我不会解释很多原因。

这是使用替代方法（更好的解决方案恕我直言）的方法：

```
String html = "<SPAN id=\"ApplicationStatus\">&nbsp;Interrupted</SPAN>";

Document doc = Jsoup.parse(html);

String value = doc.select("#ApplicationStatus").first().text();
//Put value in UDV Status
vars.put("Status", value); 
```

您可以将其添加到执行这种解析的采样器中，即 Beanshell 采样器，这里是导入（位于此代码之上）：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document; 
```

请注意，此代码依赖于[Jsoup](http://jsoup.org/)，因此您需要下载 jsoup jar 并将其放在您的`$JMETER_HOME/lib`目录中。

希望这对您的问题有所帮助。

**更新**

如果您想避免使用 Java，我编写了小型 jmeter 后处理器组件，该组件从 HTML 元素中提取文本值。看一眼 ：

[https://github.com/c0mrade/Html-Extractor](https://github.com/c0mrade/Html-Extractor)

如果您从上面的页面查看如何安装后处理器的步骤，您将按如下方式使用它：

右键单击您的采样器。添加 Post Processors -> Html Extractor ，在 jquery 选择器字段中写入`#ApplicationStatus`结果并将结果存储在您选择的变量中 ( `Status`)。在此添加调试采样器之后，如果在您的调试采样器中存在`Status`值为 Html Extractor 的变量正在工作！你完成了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T19:26:54.997

我无法重现您的问题。

这是我的计划：

```
- User defined variables with variable Status
- Thread Group
  - HTTP Request
    - Regular expression extractor with reference name = Status
  - Beanshell Sampler that logs Status variable 
```

Beanshell 采样器记录在正则表达式提取器中收到的值

# flash - IE7 和 flowplayer 5.2.0 失败并显示“flash: Video file not found”

> ID：13705597
> 
> 赞同：1
> 
> 时间：2012-12-04T14:51:15.797
> 
> 标签：flash, audio, video, internet-explorer-7, flowplayer

我使用 flowplayer 在 Firefox、Google Chrome、iPad3、IE9、IE8 中播放电影和收听音频没有问题。

但 IE7 失败：`flash: Video file not found`

**我有这个** `<head>`：

```
<link rel="stylesheet" type="text/css" href="/media/js/flowplayer/skin/minimalist.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/media/js/flowplayer/flowplayer.min.js"></script>
<script type="text/javascript">
flowplayer.conf.embed = false;
</script> 
```

**视频标记：**

```
<div class="flowplayer" data-embed="false">
   <video preload="none">
      <source type="video/mp4" src="/video/test.mp4"/>
      <source type="video/ogg" src="/video/test.ogv"/>
      <source type="video/flash" src="/video/test.mp4"/>
   </video>
</div> 
```

*   FLASH版本：11.5.502.110
*   操作系统：Windows 7 家庭高级版 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:05:40.257

似乎路径需要是完整的路径。这意味着

`/video/test.mp4`变成`http://www.mydomain.com/video/test.mp4`

```
<div class="flowplayer" data-embed="false">
   <video preload="none">
      <source type="video/mp4" src="http://www.mydomain.com/video/test.mp4"/>
      <source type="video/ogg" src="http://www.mydomain.com/video/test.ogv"/>
      <source type="video/flash" src="http://www.mydomain.com/video/test.mp4"/>
   </video>
</div> 
```

# java - 如何在netbeans中手动将jlabels添加到jlabel数组中？

> ID：13705598
> 
> 赞同：2
> 
> 时间：2012-12-04T14:51:22.257
> 
> 标签：java, swing

我创建了一个 JLabel 数组：

```
private JLabel label[]=new JLabel[10]; 
```

如何将 jlabels 添加到 netbeans 中的此数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:54:00.137

尝试这个：-

```
 JLabel[] labels = new JLabel[10];

for(int i=0; i<labels.length; i++){
 labels[i] = new JLabel("Label Name " + i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:59:07.920

我从来没有使用过netbeans，所以我不确定这是否是你的意思（比如一些IDE快捷方式或其他东西），但你可以通过将数组中的位置分配给新的JLabel来将JLabels添加到java中的数组中。

```
 JLabel[] label = new JLabel[10]; 
```

手动分配它们...

```
 label[0] = new JLabel("text"); 
```

或一次全部...

```
 for(int i = 0; i < label.length; i++) {
         label[i] = new JLabel("text");
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:55:28.203

您不向数组添加元素，它不是动态的，您只需更新条目即可。最初，您的数组有`null`条目。

```
JLabel label1 = new JLabel("Okocha");
label[0] = label1; 
```

# mysql - 在使用 CodeIgniter 的 Active Record 类形成的 MySQL UPDATE 查询中执行算术

> ID：13705603
> 
> 赞同：1
> 
> 时间：2012-12-04T14:51:46.470
> 
> 标签：mysql, codeigniter, activerecord, sql-update

我正在使用`$this->db->update();`创建一个更新查询，它将存储在变量中`$amount`的值添加到列中的值中`count`。我的函数调用当前如下所示：

```
$data = array('count' => 'count + '.$amount);

$this->db->where('id', $item_id);
$this->db->update('items', $data); 
```

但是，这会生成以下损坏的 SQL：

```
UPDATE `items` SET `count` = 'count + 2' WHERE `id` =  '2' 
```

有没有办法在没有引号的情况下生成 SET 子句`count + 2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:16:13.223

谢谢，[Maxime Morin](https://stackoverflow.com/users/423235/maxime-morin)，让我走上了正轨。根据[CodeIgniter 文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)，您可以通过将可选`$escape`参数设置为`FALSE`. 因此，我的问题的解决方案是：

```
$this->db->set("count", "count + $amount", FALSE); 
$this->db->where("id", $item_id);
$this->db->update("items", $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:17:13.303

这是我在找到我接受的解决方案之前使用的解决方法

```
$query = $this->db->query("UPDATE `items` SET `count` = `count` + $amount WHERE `id` = $item_id"); 
```

# php - CodeIgniter “default_controller” 函数在 URL 中没有控制器名称

> ID：13705604
> 
> 赞同：3
> 
> 时间：2012-12-04T14:51:52.460
> 
> 标签：php, codeigniter

如果这是一个“duh”问题，或者如果您需要更多信息来回答，请原谅我，我是 CodeIgniter 的新手，但仍然没有找到一些具有最佳实践的东西......

在`routes.php`我有`$route['default_controller'] = "home";`所以我`default_controller`的显然是“家”。

在我的`home.php`控制器内部，我有：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Home extends CI_Controller {
    function __construct() {
        // blah
    }
    function index(){
        // blah
    }
    function login(){
        // blah
    }
} 
```

哪个工作正常，一切正常，没有问题。我唯一不知道的是，如果我想访问该`login`功能，我目前必须去 www.blah.com/home/login。**我怎样才能改变它，让它只进入 www.blah.com/login，而不创建一个新的控制器** *（我想把其中一些一次性的基准 URL 都保留在我的默认控制器中）*****? 这甚至可能还是我只需要创建一个新控制器？****

 **如果我只需要创建一个新控制器，是否有关于您拥有多少控制器等的最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:02:38.920

**文档说：**如果 URL 中提供的那些 URI 段无法与有效路由匹配，该路由将告诉路由器使用哪些 URI 段。

所以使用`$route['login'] = 'home/login';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:05:27.910

我设置它的方式是让该`index`功能充当看门人：如果未登录，则显示登录表单`view`，如果已登录，则重定向到您的（受保护的）主页。该`login`功能只能通过`post`, 当用户提交他的登录名/密码并执行登录逻辑时访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:12:06.267

您需要在`application/config/routes.php`文件中添加一行

```
$route['login'] = "home/login"; 
```**

# jquery - JCarousel 和动态内容

> ID：13705606
> 
> 赞同：0
> 
> 时间：2012-12-04T14:51:58.200
> 
> 标签：jquery, yii, jcarousel

我在 Yii 框架中使用 Jquery JCarousal，在其中一个视图中我从模型加载图像：

```
<ul id="first-carousel" class="first-and-second-carousel jcarousel-skin-tango">
<?php 

    foreach ($news as $newsElement) {
?>  

<li>
    <a href="<?php echo $newsElement->url ?>">
        <div class="news-title">
            <p><?php echo $newsElement->title; ?></p>
        </div>
        <img src="<?php  echo Yii::app()->getBaseUrl().IMAGE_URL.$newsElement->cover->image ?>" width="165" height="165" alt="" />
    </a>
</li>

<?php }?>

</ul> 
```

我正在使用 JCarousal 来滑动这些图像，如下所示：

```
<?php Yii::app()->clientScript->registerScript('carousel',
    "           $('.first-and-second-carousel').jcarousel({
                scroll: 1,  
                animation: 'slow',
            })

     ", CClientScript::POS_READY
    );  ?> 
```

我尝试了这段代码，当我有一些静态内容时它工作正常，但现在，只有第一个`<li>`被加载，其余的不可见。（我可以在页面的源代码中看到它们）。

在[JCarousel 文档](http://sorgalla.com/projects/jcarousel/#Dynamic-Content-Loading)中有关于加载动态内容的解释，但我不知道如何使用它，因为我正在从模型中读取内容，我不想为 yii 使用任何 JCarousal 扩展，因为我需要做一些更改源代码以使其适用于多行...任何人都可以帮助解决这个问题吗？

# java - java中的HTML类型项目符号

> ID：13705615
> 
> 赞同：0
> 
> 时间：2012-12-04T14:52:32.790
> 
> 标签：java, html, css, swing

我需要在 swing 应用程序中使用 ascii 字符作为带有 h​​tml 内容的要点。我找到[了这篇](http://www.artishock.net/coding/css-list-styling-using-ascii-special-characters/)文章，它完全适用于我想要的浏览器，但不适用于 java。我想根据[this在java中不支持css标签。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/html/CSS.html)也许我错了。

我想知道是否有解决方法。我的另一个限制是不要使用图像作为要点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:49:45.827

HTML 实体会起作用吗？

```
 • &#8226; &bull; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:59:39.500

你可以这样做：

```
styleSheet.addRule("ul{list-style-type:circle;margin:0px 20px;}"); 
```

# image - 如何获得与相同的宽度 ?

> ID：13705616
> 
> 赞同：1
> 
> 时间：2012-12-04T14:52:41.073
> 
> 标签：image, html, css, responsive-design, fluid-layout

在响应式设计中，如何使 a 的宽度`<figcaption>`根据 的宽度进行调整`<img>`，但又不超过它？

```
 <section>    
    <figure>
        <img src="link.jpg">
        <figcaption>Caption</figcaption>
    </figure>
</section> 
```

相应的[CSS](http://jsfiddle.net/XjthT/30/)只限制`<img>`而不限制`<figcaption>`，见：

![在此处输入图像描述](../Images/41d144f467e619a36e042023295c1253.png)

如何在**不**使用（或 12.5em）容器的情况下将`<figcaption>`与 一起限制？`<img>`**`max-width: 200px``<figure>`**

 *** * *

以下是 CSS 的重要部分（[完整的 JSFiddle](http://jsfiddle.net/XjthT/30/)）：

```
section figure {
    position: relative;
    margin: 0 auto; /* to center it */
}

section figure img {
    max-width: 100%;
    vertical-align: middle; /* to make sure images behave like blocks */
}

section figure figcaption {
    position: absolute;
    right: 0; bottom: 0; left: 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:05:24.820

设置`max-width: 100%; display: inline-block;`（[http://jsfiddle.net/vZpmq/1/](http://jsfiddle.net/vZpmq/1/)）或`float: [left|right]`（[http://jsfiddle.net/cdmU3/1/](http://jsfiddle.net/cdmU3/1/)）`section`会导致它缩小以适应它的内容（和它所在的盒子） . 不过，您可能需要修改其他一些东西以适应这些更改。

或者，尝试在 img 上设置，并在元素`width: 100%; height: auto;`上设置宽度？[http://jsfiddle.net/9yUsP/](http://jsfiddle.net/9yUsP/)`figure`

（设置意味着它保留它的纵横比，而不考虑`height: auto;`元素本身的属性）`img``height``width``img`**

# android - 如何检测持久通知（FLAG_ONGOING_EVENT）？

> ID：13705618
> 
> 赞同：1
> 
> 时间：2012-12-04T14:52:44.943
> 
> 标签：android, android-notifications

我的应用程序有一个特殊的 ON 和 OFF 功能。因此，当应用程序处于开启模式时，通知始终通过标志显示

```
notification.flags |= Notification.FLAG_NO_CLEAR;
notification.flags |= Notification.FLAG_ONGOING_EVENT; 
```

当应用程序处于关闭模式时，通知消失了。ON 和 OFF 模式与应用程序是否运行**无关**！！！

因此，当用户关闭应用程序（`onStop`正在被调用）并重新打开应用程序时，我需要应用程序来**检测它是处于 ON 还是 OFF 模式**。这就是为什么我需要一个应用程序来检测此通知是否存在。

我怎样才能检测到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:38:08.240

您应该将此开/关状态存储在其他地方，例如[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html)。然后发布/取消通知以匹配开/关状态。

# ios - 在 xcode 中传递变量返回 null

> ID：13705620
> 
> 赞同：4
> 
> 时间：2012-12-04T14:52:48.660
> 
> 标签：ios, xcode, variables

我在这里检查了有关堆栈溢出的问题，我以相同的方式进行操作，但仍然返回 NULL

在第一个视图中

在 firstviewcontroller.hi 中有

```
@property (nonatomic, copy) NSString *Astring; 
```

在第一个viewcontroller.m

```
#import "SecondViewController.h"
...
@synthesize Astring = _Astring;
...

- (IBAction)filterSearch:(id)sender {
NSlog(@"%@",Astring)

      } 
```

在第二个viewcontroller.m

```
#import firstviewcontroller.h
...
...
FirstViewController *controller = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];
 controller.Astring = @"YES"; 
```

所以基本上我在第一个视图控制器中创建一个变量并将第二个视图控制器中的变量传递给第二个视图，但它总是返回 NULL...

我的逻辑是错的还是别的什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:14:33.253

这就是问题所在。您确实在更改 AString 的字符串值，但是在视图控制器的新实例上。这一行：`FirstViewController *controller = [[FirstViewController alloc]initWithNibName:@"FirstViewController" bundle:nil];`正在创建控制器的新实例。因此，现有控制器的视图控制器具有相同的属性。

那么你需要做的是找到一种方法来获取你的 firstViewController 的实例。

在 secondViewController.h 中，添加此属性。

```
#import "firstViewController.h"
 ...
@property (nonatomic, strong) firstViewController *firstController; 
```

然后，在 secondViewController.m 中，您可以使用 firstController 调用字符串中的更改，它将包含您所追求的实例。我相信现在应该是这样的：

```
firstController.Astring = @"YES" 
```

干杯!

# listview - ListView 无法删除项目

> ID：13705621
> 
> 赞同：0
> 
> 时间：2012-12-04T14:52:49.247
> 
> 标签：listview, search

我有一个我无法解决的问题。

当我将项目添加到我的数据库时，我尝试填充 my`listView`并从数据库中删除任何等于`" "`3 个空格的项目`listView`，而不是从数据库中删除，以便用户看不到空行。为此调用方法 load()。我不断得到一个`nullPointerException`. 它似乎找到了该项目（我用 a 对其进行了测试`System.out.println()`）但是当调用 remove 方法时它崩溃了。

```
private void load() {       
    Cursor c=helper.getById(taskId);
    c.moveToFirst();                
    String[] temp = getArray(helper.getPart(c));

    ArrayAdapter<String> arrayAdapter =      
             new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, temp);
    lv.setAdapter(arrayAdapter); 

    int count = arrayAdapter.getCount();
    for (int i = 0; i < count; i++) {
        if (arrayAdapter.getItem(i).equals("   ")) {
            arrayAdapter.remove(arrayAdapter.getItem(i));
        }                    
    }

    arrayAdapter.notifyDataSetChanged();

    c.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:10:49.947

好吧，这是因为当您在循环中执行删除时列表正在缩小。

假设一开始的大小是 10（所以索引 0 - 9），然后当您删除与您的条件匹配的第一个项目时，实际大小会回到 9，但在您的循环中您仍然有“i < 10”当您尝试访问索引 i = 9 时，您有一个`NullPointer Exception`.

尝试以下操作：

```
 for (int i = 0; i < arrayAdapter.getCount(); i++) {
             if(arrayAdapter.getItem(i).equals("   ")) {
                 arrayAdapter.remove(arrayAdapter.getItem(i));
             }                   
         } 
```

请注意，我用循环内部替换了您的`count`变量。`getCount()`当你这样做时，你永远不应该拥有`NullPointer Exception`.

# android - 在 HCL ME U1 上运行 Android 串行监视器 lite 时出现问题

> ID：13705622
> 
> 赞同：2
> 
> 时间：2012-12-04T14:52:56.690
> 
> 标签：android, usb, tablet, host, ftdi

我正在尝试在 HCL ME U1 平板电脑（ICS 4.0.3、内核 3.0.8）上运行此[USB 串行监视器应用程序。](https://play.google.com/store/apps/details?id=jp.ksksue.app.terminal&hl=en)我正在使用 FTDI FT232RL（USB 到 RS232）电缆将平板电脑与串行设备连接。当我将 FTDI 电缆连接到平板电脑时，会弹出询问是否允许连接设备的通知，当我打开设备时，Toast 也会显示已连接。但是当我写一些数据时，数据没有发送。TX LED 不闪烁。所以数据不会通过 FT232 IC。

我已经使用 oracle VirtualBox 在 android x86 上尝试了相同的应用程序。它工作正常。没有错误。

我在 x86 和 ME u1 上都尝试过 Slick USB 2 串行终端。它适用于两者。

如果有人有任何想法，请分享问题可能是什么。

[源代码](https://github.com/ksksue/Android-USB-Serial-Monitor-Lite)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T16:02:06.497

这个问题已经过时了。FTDI 和 prolific 已经发布了他们的 android 驱动程序 jars。他们工作正常。

# c# - 使用 twitter bootstrap 单选按钮作为 html.radiobutton 替代品

> ID：13705625
> 
> 赞同：2
> 
> 时间：2012-12-04T14:52:59.700
> 
> 标签：c#, asp.net-mvc, twitter-bootstrap

我有几个单选按钮

```
 <p>@Html.RadioButton("selected", "img")img
    @Html.RadioButton("selected", "input")input
    @Html.RadioButton("selected", "script")script
    @Html.RadioButton("selected", "link")link
    @Html.RadioButton("selected", "form")form</p> 
```

我想使用 twitter bootstrap 的 btn-group,buttons-radio 作为样式来替代这些单选按钮，我尝试添加的代码是

```
 <div class="btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn" name="selected" value="a">a</button>
    <button type="button" class="btn" name="selected" value="img">img</button>
    <button type="button" class="btn" name="selected" value="input">input</button>
    <button type="button" class="btn" name="selected" value="script">script</button>
    <button type="button" class="btn" name="selected" value="link">link</button>
    <button type="button" class="btn"  name="selected" value="form">form</button>
    </div> 
```

在我的控制器中，我使用 FormCollection 作为从选中的单选按钮获取值的一种方式，但我想使用引导 css 而不是使用普通的@Html.radiobutton。

```
 string selectedTechnology = form["selected"];
            List.UrlType = selectedTechnology; 
```

我觉得这不是正确的方法，因为帮助程序可能与 formcollection 一起使用，并且它不知道引导 css 按钮是什么，但如果有办法实现它，那就太好了。

更新：

所以......这是我正在寻找的解决方案

使用引导 css 的单选按钮

```
<div id="radios" class="btn-group view-opt-btn-group" data-toggle="buttons-radio">
<button type="button" class="btn" name="option-a" value="a">a</button>
<button type="button" class="btn" name="option-img" value="img">img</button>
<button type="button" class="btn" name="option-script" value="script">script</button>
<button type="button" class="btn" name="option-link" value="link">link</button>
<button type="button" class="btn" name="option-form" value="form">form</button>
<input type="hidden" name="option" value="0" />
</div> 
```

我创建了一个 jscript 点击功能

```
<script type="text/jscript">
    $("body").find("#radios").children().each(function () {
        $(this).bind('click', function () {
            $("input[name=option]").val(this.value);
        });
    });
</script> 
```

在我的控制器中，我使用 FormCollection 将选定的按钮添加到我的模型中

```
 string selectedTechnology = form["option"];
        whiteList.UrlType = selectedTechnology; 
```

希望这会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:49:37.233

所以......这是我正在寻找的解决方案

使用引导 css 的单选按钮

```
 <div id="radios" class="btn-group view-opt-btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn" name="option-a" value="a">a</button>
    <button type="button" class="btn" name="option-img" value="img">img</button>
    <button type="button" class="btn" name="option-script" value="script">script</button>
    <button type="button" class="btn" name="option-link" value="link">link</button>
    <button type="button" class="btn" name="option-form" value="form">form</button>
    <input type="hidden" name="option" value="0" />
    </div> 
```

我创建了一个 jscript 点击功能

```
 <script type="text/jscript">
        $("body").find("#radios").children().each(function () {
            $(this).bind('click', function () {
                $("input[name=option]").val(this.value);
            });
        });
    </script> 
```

在我的控制器中，我使用 FormCollection 将选定的按钮添加到我的模型中

```
 string selectedTechnology = form["option"];
            whiteList.UrlType = selectedTechnology; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:30:47.087

我实际上并没有使用 twitter 引导程序（仅阅读它），并且 .NET 不是我的强项，但是：

**1）**您需要使用带有 type="radio" 的**输入**来制作单选按钮，而不是按钮标签。

**2)** twitter bootstrap 提供 .radio 和 .inline 类应用于输入元素的父元素，如标签：

```
<label class="radio">
  <input type="radio" name="selected" value="..." />
  Text to come after the radio button
</label> 
```

**3)** @Html.RadioButton 接受第三个参数，一个对象，用于指定属性：

```
@Html.RadioButton("selected", "form", new { class = "class" }); 
```

希望有帮助。

# asp.net - 如何将 Telerik RadBinaryImage 图像保存到 SQL Server 数据库

> ID：13705628
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:05.020
> 
> 标签：asp.net, sql-server, ajax, telerik, insert-image

我有一个 Telerik RadBinaryImage 控件，它显示使用 Telerik RadAsyncUpload 加载的图像。

我有一个包含“照片”列（图像数据类型）的 SQL 表。我想将 Telerik RadBinaryImage 中的图像保存到数据库中，插入函数如下所示：

```
Private Sub InsertPhotoIntoDB()
        Dim sMyConn As String = My.Settings.appDBConnString
        Dim myConnection As SqlConnection
        Dim myCommand As New SqlCommand
        myConnection = New SqlConnection(sMyConn)

        myConnection.Open()

        myCommand = New SqlCommand("INSERT INTO Photos(Photo) VALUES(@Photo)")
        myCommand.Connection = myConnection

        myCommand.Parameters.Add("@Photo", SqlDbType.Image, 0, "Photo")
        myCommand.Parameters("@Photo").Value = WhatDoIPutHere???

        myCommand.ExecuteNonQuery()

        myConnection.Close()
        myConnection.Dispose()
End Sub 
```

我试过了： `myCommand.Parameters.Add("@Photo", SqlDbType.Image).Value = RadBinaryImage1.DataValue` 但我仍然得到一个错误：

参数化查询“(@Photo image)INSERT INTO Photos (Photo) VALUES (@Photo)”需要参数“@Photo”，但未提供该参数。

我需要将 RadBinaryImage1.DataValue 转换为图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:11:00.857

该`RadBinaryImage`控件用于显示来自数据库的图像。所以，顺序应该是这样的：

1.  用户通过上传照片`RadUpload`
2.  使用修改后的代码存储在数据库中的图像（见下文）
3.  在 PostBack 上，页面使用`RadBinaryImage`

如果您不想立即将数据存储在数据库中，则需要自己以某种方式持久化数据（可以将文件存储在文件系统上，然后通过 访问路径`RadBinaryImage.SavedImageName`，或作为 持久存储在内存中`Session["UploadedImage"]`）。底线是 RadBinaryImage 仅用于在页面上显示图像。

关于您的示例代码，我建议使用 SQL 列类型`varbinary`而不是`image`.

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) _
         Handles Button1.Click
        For Each file As UploadedFile In RadUpload1.UploadedFiles
            Dim bytes(file.ContentLength - 1) As Byte
            file.InputStream.Read(bytes, 0, file.ContentLength)
            Dim connection As OleDbConnection = CreateConnection()
            Try
                Dim command As New OleDbCommand("INSERT INTO Images ([Name], [Size], [Content]) VALUES (?, ?, ?)", connection)
                command.Parameters.AddWithValue("@Name", file.GetName())
                command.Parameters.AddWithValue("@Size", bytes.Length)
                command.Parameters.AddWithValue("@Content", bytes)
                connection.Open()
                command.ExecuteNonQuery()
            Finally
                If connection.State = Data.ConnectionState.Open Then
                    connection.Close()
                End If
            End Try
        Next
    End Sub 
```

有关示例代码和更多说明，请参阅此帖子： [http ://www.telerik.com/help/aspnet-ajax/upload-manipulating-files.html](http://www.telerik.com/help/aspnet-ajax/upload-manipulating-files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:12:34.357

最安全的方法是将图像作为字节数组上传：

```
Byte[] yourByteArray; 
...
myCommand.Parameters.AddWithValue("@Photo", yourByteArray); 
```

如何获取字节数组有所不同。使用 ASP.NET Upload 控件，它只是：

```
yourByteArray = FileUpload1.FileBytes; 
```

或者，如果图像表示为流：

```
var yourByteArray = new Byte[ImageObject.InputStream.Length];
ImageObject.InputStream.Read(yourByteArray, 0, yourByteArray.Length); 
```

# python - 获取部分字符串直到令牌的有效方法

> ID：13705630
> 
> 赞同：3
> 
> 时间：2012-12-04T14:53:10.523
> 
> 标签：python, string

我在 python 中解析一个非常大的 csv（大 = 数十 GB）文件，我只需要每行第一列的值。我写了这段代码，想知道是否有更好的方法：

```
delimiter = ','
f = open('big.csv','r')
for line in f:
    pos = line.find(delimiter)
    id = int(line[0:pos]) 
```

有没有更有效的方法来获取第一个分隔符之前的字符串部分？

**编辑：**我确实知道 CSV 模块（我偶尔使用过），但我不需要将此文件的每一行都加载到内存中 - 我需要第一列。所以让我们专注于字符串解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:54:49.217

```
>>> a = '123456'
>>> print a.split('2', 1)[0]
1
>>> print a.split('4', 1)[0]
123
>>> 
```

但是，如果您正在处理 CSV 文件，那么：

```
import csv
with open('some.csv') as fin:
    for row in csv.reader(fin):
        print int(row[0]) 
```

并且 csv 模块将处理包含引号等的引用列...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:05:56.717

如果第一个字段中不能有转义分隔符，例如在您的情况下，第一个字段是整数并且在任何字段中都没有嵌入换行符，即每一行对应于文件中的一个物理行，那么`csv`模块是过度杀伤，您可以使用问题中的代码或`line.split(',', 1)`@Jon [Clements 建议的代码](https://stackoverflow.com/a/13705671/4279)。

要处理其中没有分隔符的偶尔行，您可以使用[`str.partition`](http://docs.python.org/2/library/stdtypes.html#str.partition)：

```
with open('big.csv', 'rb') as file:
    for line in file:
       first, sep, rest = line.partition(b',')
       if sep: # the line has ',' in it
          process_id(int(first)) # or `yield int(first)` 
```

注意：`s.split(',', 1)[0]`如果字符串中没有分隔符，则静默返回错误结果（整个字符串）。

`'rb'`文件模式用于避免不必要的行尾操作（以及 Python 3 上对 Unicode 的隐式解码）。如果 csv 文件`'\n'`在每个原始文件的末尾都有，那么使用它是安全的，即换行符是`'\n'`或者`'\r\n'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T16:04:14.090

就个人而言，我会使用发电机：

```
from itertools import imap
import csv

def int_of_0(x):
    return(int(x[0]))

def obtain(filepath, treat):
    with open(filepath,'rb') as f:
        for i in imap(treat,csv.reader(f)):
            yield i

for x in obtain('essai.txt', int_of_0):
    # instructions 
```

# php - 一个项目下的多个网站

> ID：13705631
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:24.580
> 
> 标签：php

现在我已经建立了一个小框架，我想在其中托管多个网站。因此，在每个站点上，我都会运行 DNS 到 publishserver.mydomain.com，然后我将在其中显示相应的网站。

现在我的（我的想法）目录结构如下所示：

文件夹应用程序（所有框架文件、请求、响应、引导等）文件夹网站（所有网站） - www.domain1.com - www.domain2.com - www.domain3.com - www.domain4.com .htaccess 索引。 php（启动框架）

在每个 www.domain1.com 上，我都会有这样的结构：文件夹 www.domain1.com - 控制器 - 视图 - 图像 - css

对我来说最聪明的方法是什么？最初我的想法是（在我的测试本地主机上）只做 localhost/www.domain1.com/home 例如，然后从该域获取文件。

我希望它可以在实时服务器、测试服务器和我的本地主机上访问，而无需调整配置文件。这可能吗，我最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:56:54.220

如果您有数据库，请将页面存储在具有相应站点 ID 的数据库表中。然后，在您的**index.php**文件中，选择正在访问脚本的主机，并根据站点显示相关页面。

# javascript - jQuery，默认href

> ID：13705632
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:32.117
> 
> 标签：javascript, jquery, ajax

这是我知道的一个非常简单的问题，但我有这个 jQuery 代码，它有它自己的默认文本。当页面加载时，如何使以下内容成为默认输出？

```
<li><a href="/panasonic/index.php/site/pictureFeatured" id="featuredProducts" ></a></li> 
```

这是我的代码

jQuery

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#pav li a").click(function() {
            $("#promocont").empty().append("<div id='loading'><img src='loading2.gif' alt='Loading' /></div>");
            $("#pav li a").removeClass('current');
            $(this).addClass('current');
            $.ajax({ 
                url: this.href, 
                success: function(html) {
                    $("#promocont").empty().append(html);
                }
            });
            return false;
        });

        $("#featuredProducts").click(function() {
            $('#featuredProducts').css('background-position', '0 -46px');
            $('#mostPopular').css('background-position', '0 0');
        });

        $("#mostPopular").click(function() {
            $('#mostPopular').css('background-position', '0 -46px');
            $('#featuredProducts').css('background-position', '0 0');
        });
    });
</script> 
```

HTML

```
<div id="homemid">
    <ul id="pav">
        <li><a href="/panasonic/index.php/site/pictureFeatured" id="featuredProducts" ></a></li>
        <li><a href="page_2.html"  id="mostPopular"></a></li>
    </ul>

    <div id="promocont">
        Deafult Text
    </div>
</div> 
```

我不想要默认文本，我只想要

```
<li><a href="/panasonic/index.php/site/pictureFeatured" id="featuredProducts" ></a></li> 
```

那个要加载。我的意思是那个链接的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:59:07.120

也许你的意思是：

```
$('#promocont').load($('#featuredProducts').attr('href')); 
```

# objective-c - 找不到“ ”的协议声明

> ID：13705633
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:34.707
> 
> 标签：objective-c, ios, delegates, protocols

我知道这个问题被问了很多，但它对我没有帮助......

我在我的项目中制定了很多委托协议，但这发生了很多......

我收到一个错误，找不到“”的协议声明。奇怪的是，当我第一次这样做时：

```
 id<dataForEventDelegate> dataEventDelegate; 
```

它有效，我构建，我尝试重建，PAF 不再找到协议......

我的代码在我的委托 .H 中看起来像这样：

```
@protocol dataForEventDelegate <NSObject>

-(void)setStartDateLabel:(NSDate *)startDaleLabel;
-(void)setEndDateLabel:(NSDate *)endDaleLabel;
-(void)setDefaultCalendarLabel;

@end

@interface EventViewController : UIViewController <UITextFieldDelegate, UIPickerViewDelegate, dataForEventDelegate> 
```

这是在我的 file.h 中，它应该使用委托

```
#import "EventViewController.h"

@interface datePickerController : UIPickerView <UIPickerViewDelegate, UIPickerViewDataSource>
{
   id<dataForEventDelegate> dataEventDelegate;

    NSMutableArray *dateArray;
}

@property(nonatomic, strong) id<dataForEventDelegate> dataEventDelegate; 
```

这个`dataForEventDelegate`没找到！！但它应该:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:04:20.177

看来您还没有使 datePickerController 符合协议，应该是：

```
@interface datePickerController : NSObject <UIPickerViewDelegate, UIPickerViewDataSource, dataForEventDelegate> 
```

我还会质疑您为什么将 datePickerController 声明为 UIPickerView。请参阅我的示例是 NSObject。

我也不确定你为什么希望 EventViewController 符合它自己的协议。在这里看到它被删除：

```
@interface EventViewController : UIViewController <UITextFieldDelegate, UIPickerViewDelegate> 
```

# php - 请求网站的无 JavaScript 变体

> ID：13705638
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:43.317
> 
> 标签：php, apache, http, curl, webserver

我使用 PHP 和 cURL 阅读并解析网站。该网站有时会发送启用 javascript 的源代码，有时会发送禁用 javascript 的源代码。这使得解析非常困难，因为我必须同时寻找这两种变体。

有什么办法可以说“我没有启用 javascript”或者更好的是什么是信号，另一方正在寻找决定是否发送启用 javscript 的版本。

*我知道 curl 在服务器端运行并且无法解析 javascript，我只是想向服务器发送一些信号，上面写着“请向我发送禁用 javascript 的版本”*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:55:10.917

尝试发送以下标头；

```
X-JAVASCRIPT-ENABLED: false 
```

# html - 使用 HTML 5 Mobile Boilerplate 构建的网站

> ID：13705639
> 
> 赞同：2
> 
> 时间：2012-12-04T14:53:47.890
> 
> 标签：html, twitter-bootstrap, mobile, web, html5boilerplate

哪些著名的移动网站使用[HTML 5 Mobile Boilerplate](http://html5boilerplate.com/html5boilerplate.com/dist/mobile/)？

除了 JQuery Mobile 还有其他好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:19:30.357

tumblr 上有一个博客列出了一些流行的网站，这些网站都是用 html5 样板构建的：

[http://html5boilerplate.tumblr.com/](http://html5boilerplate.tumblr.com/)

查看网站是否使用 html5 样板构建的一个小技巧是寻找以下元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

# mvvm-light - appbar windows phone 8 mvvm

> ID：13705640
> 
> 赞同：1
> 
> 时间：2012-12-04T14:53:49.047
> 
> 标签：mvvm-light, windows-phone-8, mvvm-toolkit

那么，我在我的 manipange.xaml 、我的应用程序栏声明和我的按钮声明/定义中得到了类似的东西

```
<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar x:Name="xxxx" IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton
                x:Name="appBarRegisterButton"
                IconUri="/Images/next.png"
                Text="Login"
                Click="appBarRegisterButton_Click_1" IsEnabled="True"/>
            </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar> 
```

当我尝试从其他模型更改某些属性时，fe。这是我的注册模型。

```
 public RegisterViewModel()
    {
        RegisterTitle = Resources.AppResources.RegisterTitle;
        Messenger.Default.Register<RegisterButtonPressed>(this, msg => AttemptToRegister(msg.reg));
    }

    private void AttemptToRegister(Register reg)
    {
        reg.appBarRegisterButton.IsEnabled = true;
     } 
```

它没有改变，更好的是我的注册按钮是一个空对象，有人知道如何解决这个问题吗？;/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:35:46.007

您必须像这样访问按钮：

```
var applicationBarIconButton = ApplicationBar.Buttons[0] as ApplicationBarIconButton;
if (applicationBarIconButton != null)
      {
//do stuff
} 
```

索引取决于它在应用栏中的位置。

# java - 容器管理事务的活动

> ID：13705643
> 
> 赞同：0
> 
> 时间：2012-12-04T14:53:57.470
> 
> 标签：java, jakarta-ee, transactions, ejb-3.0

Let's I have `Stateless` bean with CMT. I have 3 methods in bean, 2 with `TransactionAttributeType.REQUIRED`. And both method are called from third method. How can I check when transaction is active? i want check

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class MyBean
{

   public RetType methodA()
   {
      methodB();

      //.... is CMT active there?

      methodC();

   }

   @TransactionAttribute(TransactionAttributeType.REQUIRED)   
   public RetType methodB(){}

   @TransactionAttribute(TransactionAttributeType.REQUIRED)
   public RetType methodC(){}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:03:54.430

该`TransactionAttributeType.REQUIRED`属性是容器管理事务 bean 方法的默认属性，因此即使您没有对其进行注释，它也会`methodA`在方法启动后立即启动的事务中运行（除非您从另一个活动事务调用该方法，在这种情况下该方法只需加入当前交易）。
当方法退出时，事务结束（再次除非从另一个事务调用）。由 调用的任何方法`methodA`，除非用 注释，否则`TransactionAttributeType.REQUIRES_NEW`将加入当前事务。

# mysql - mysql搜索，返回搜索成功的列名

> ID：13705644
> 
> 赞同：3
> 
> 时间：2012-12-04T14:53:57.313
> 
> 标签：mysql, search

我有一个非常简单的搜索查询，看起来像这样

```
select * from products_stock where (
    title like '%$searchterm%' or 
    short_desc like '%$searchterm%' or 
    long_desc like '%searchterm%'
) 
```

当我从 long_desc 列中获得成功时，我想在 PHP 中编写一些特殊行为。有没有办法让mysql结果突出显示搜索成功的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:56:38.270

您可以使用派生字段。看起来很难看，但有效：

```
SELECT *, (title LIKE '%$searchterm%') AS found_in_title,
     (short_desc LIKE '%$searchterm%') AS found_in_short_desc
     etc... 
```

LIKE 将返回布尔值 true/false 作为结果集中的字段，AS 别名将告诉您匹配发生在哪个字段中。

请注意，对这类事情使用全文索引可能会好得多。`LIKE '%...%'`匹配不能使用索引，并且在“大”表上性能将非常糟糕。

# java - Enumbody错误我该如何解决？

> ID：13705646
> 
> 赞同：2
> 
> 时间：2012-12-04T14:53:59.217
> 
> 标签：java, enums

我正在做一个学校的作业，并发现了一个叫做 Enum 的东西。

我认为这对我的家庭作业很有帮助。

所以我决定使用它，但是当这个错误出现时。

我用谷歌搜索了关于它的东西，但我似乎无法修复它。

错误“插入枚举以完成编译单元”出现在数字 15

```
public enum TimeToClock {   

    9,9.5,
    10,10.5,
    11,11.5,
    12,12.5,
    13,13.5,
    14,14.5,
    15,15.5,
    16,16.5,
    17\. 

} 
```

这是尝试改进[此问题中的代码](https://stackoverflow.com/questions/13685434/total-not-adding-up)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:59:09.953

我会使用一个双精度数组。

```
static final double[] timeToClock = {
    9,  9.5,
    10, 10.5,
    11, 11.5,
    12, 12.5,
    13, 13.5,
    14, 14.5,
    15, 15.5,
    16, 16.5,
    17
}; 
```

或@Puce 建议的列表

```
static final List<Double> timeToClock = Arrays.asList(
    9,  9.5,
    10, 10.5,
    11, 11.5,
    12, 12.5,
    13, 13.5,
    14, 14.5,
    15, 15.5,
    16, 16.5,
    17
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:58:59.847

问题是枚举的概念不只是用来存储一组常量，而是一组常量，这对你来说意味着什么，但实际上是你的枚举的实例，所以直接存储浮点数是行不通的。

您插入的每个数字都必须具有合法的 Java 变量名，例如：

```
public enum TimeToClock {
  _9(9.0f),
  _9_5(9,5f)
  ;

  public final float value;

  public TimeToClock(float value) {
    this.value = value
  }
} 
```

通过这种方式，您可以引用您的字段，`_9.value`我想这是您可以将枚举用于您的特定目的的唯一方法。对于您可以使用的其他任何内容：

*   数组`float[] values = new float[]{9f, 9.5f, .... };`
*   常数，例如`public static final float _9_5 = 9.5f`

如果您可以将含义与每个数字相关联，则使用枚举是有意义的，在您的情况下，您仍然可以通过对允许的值集进行静态编译检查来毫无问题地使用它，但是您可以看到语法非常笨拙，因为每个值都只是一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:59:08.333

枚举常量应该是适当的变量名，在 Java 中，变量名不能以数字开头。你可以试试这个：

```
public enum TimeToClock {    
  T9, T9_5,
  T10, T10_5
  // Go on
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:02:58.857

整数不能直接包含在其中，`enum`因为整数本身没有意义。

大多数人会使用`String`s' `array`，因为它是实现目标的最简单方法。

但是，想象一下，如果您想将调度传递给这样的方法参数：

```
public void pronounceSchedule(String schedule){
   // Nothing ensures that a valid Schedule is passed !
} 
```

使用枚举，您将获得预期的保证：

```
public void pronounceSchedule(TimeToClock timeToClock){
   // No need to validate the schedule since it is already assumed to be valid thanks to the compiler.
} 
```

你可以使用：

```
public enum TimeToClock {
    NINE(9),
    NINE_AND_HALF(9.5f);
    // etc...

    TimeToClock(float schedule) {
        this.schedule = schedule;
    }

    public float getSchedule(){
        return schedule;
    }

    private float schedule;
} 
```

顺便说一句，这两种方法都是有效的，实际上取决于您的上下文和目标。

# iphone - 从启用蓝牙低功耗的设备的 RSSI 值中查找距离

> ID：13705647
> 
> 赞同：33
> 
> 时间：2012-12-04T14:54:01.853
> 
> 标签：iphone, objective-c, ios7, bluetooth-lowenergy

我正在研究低功耗蓝牙概念项目。我得到的 RSSI 值介于 1 到 100 之间。当我移动标签时，RSSI 值会随着外围设备远离 iPhone 而增加，而随着它靠近而减小。

任何人都可以帮助我根据 RSSI 值获得 iPhone 和蓝牙标签之间的确切距离吗？有没有可用的公式？

借助这种蓝牙低功耗委托方法，我得到了设备的 RSSI 值：

```
 - (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral   
   *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-05T13:11:31.623

I answered this in another thread, repeating it here.

In line-of-sight (no obstacles causing change in RSSI), *-6dB seems to be double the distance*.

> If you at 1m distance read RSSI -40dB then 2m gives -46dB, 4m gives -52dB, 8m gives -58dB, 16m gives -64dB.

You can not get an exact position, only a circular maximum distance.

Using triangulation with 2-3 or more devices you get a much more accurate positioning result. You can get this purely from Advertisement packages but you must either Disable scan -> Enable scan or tell iOS CoreBluetooth to report all adv packages.

In foreground mode you can do this but in background mode you can't get all adv packages. You must connect and read RSSI to do it in the background.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-01T04:01:12.200

有很多基于 RSSI 的定位技术，例如三角测量和指纹识别。它们都不是完美的。RSSI 受障碍物、多径衰落、天线极化和交叉体屏蔽等许多因素的影响。

RSSI和距离之间的理论关系是这样的：

```
RSSI[dbm] = −(10n log10(d) − A) 
```

其中**d**是距离，**A**是偏移量，它是距离 BLE 设备 1 米处测得的 RSSI。

只需谷歌搜索`RSSI[dbm] = −(10n log10(d) − A)`，您就会找到一些有关它的资源。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-07T04:25:09.450

找到与 RSSI 的距离有点棘手，它取决于很多因素，甚至测试环境和天线方向等。下面的论文正在对相同的 [http://www.s2is.org/Issues/v1/n2/papers/进行一些研究论文14.pdf](http://www.s2is.org/Issues/v1/n2/papers/paper14.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-25T08:20:53.607

## 在迅速的 4.2

```
func centralManager(_ central: CBCentralManager, didDiscover peripheral: CBPeripheral, advertisementData: [String : Any], rssi RSSI: NSNumber) {
if let power = advertisementData[CBAdvertisementDataTxPowerLevelKey] as? Double{
   print("Distance is ", pow(10, ((power - Double(truncating: RSSI))/20)))
   }
} 
```

更详细的答案[在这里](https://stackoverflow.com/a/45431617/5215474)

# c# - 检查字符前后是否有空格进行字符串拆分

> ID：13705655
> 
> 赞同：3
> 
> 时间：2012-12-04T14:54:24.617
> 
> 标签：c#, asp.net, vb.net, vb.net-2010

我正在尝试根据`-`字符拆分字符串，并将字符前后的单词插入`-`到列表（`result`）中，这两个单词具有不同的索引。我想要实现的是检查字符前后是否有空格`-`。如果找到空间，请执行前面提到的拆分。否则，如果之前或之后没有空格`-`，则不进行任何拆分。

例子：

String1 = 伦敦 - 英国

String2 = 巴黎-法国

拆分`String1`并插入`London`with`index(0)`和`United Kingdom`with`index(1)`到`result`列表中，因为之前和之后有空格`-`

不要拆分`String 2`和插入`Paris-France`，`index(0)`因为前后没有空格`-`。

代码：

```
 Dim result As New List(Of String)()

        For Each str_get As String In Split

            If (str_get.IndexOf("\t-\t")) Then

                Dim splitStr = str_get.Split({"-", "/"}, StringSplitOptions.None) 

                For Each str_split As String In splitStr 'Add to result list

                    result.Add(str_split.Trim()) ' Enter into result list

                    ' result.TrimExcess()
                Next

            Else

            End If 
```

`Split`是一个可以被视为字符串数组的字符串。`For`循环是获取该数组中的每个字符串并检查它。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:57:25.900

~~只需尝试拆分`" - "`而不是`"-"`. 它应该工作~~

**编辑：**

好的，刚刚验证了`String.Split`这种方式不起作用（使用`String`分隔符）

这将起作用：

`splitStr = Regex.Split(str_get, " - ")`

[Ideone 上的演示](http://ideone.com/jfVPNa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:58:52.170

试试这个：-

```
Dim splitStr = str_get.Split({" - ", "/"}, StringSplitOptions.None) 
```

代替：-

```
Dim splitStr = str_get.Split({"-", "/"}, StringSplitOptions.None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:01:36.717

如果我了解您的要求：

```
Dim splits = From str In strings
             Let parts = str.Split({" - "}, StringSplitOptions.RemoveEmptyEntries)
             Select parts.ToList()
Dim result As List(Of List(Of String)) = splits.ToList() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T02:31:54.940

要确定您的文本是否包含“ - ”，即 SPACE HYPHEN SPACE，您可以简单地使用此语句进行测试......

```
If Instr(DataToTest, " - ") > 0 Then
  'contains the space hyphen space values
Else
  'does not contain space hyphen space
End If 
```

其中 DataToTest 是您要测试的文本字符串

# php - 在 PHP 中对数组进行数字排序

> ID：13705656
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:54:25.360
> 
> 标签：php

我有一组数组，我需要对它们进行数字排序：例如：

```
 $a= array('Adam','maths',3,'physics',5,'sports',6)
    $b= array('Mike','maths',6,'physics',2,'sports',8)
    $c= array('Sam','maths',3,'physics',9,'sports',6)
    $all = array($a,$b,$c) 
```

现在我需要通过仅考虑数字来对 $all 进行排序。函数排序有替代方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:55:44.223

是的，使用[排序](http://php.net/manual/en/function.sort.php)功能，与`SORT_NUMERIC`

这是[演示](http://codepad.org/wvomTCoB)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:34:09.040

从一个健全的数组结构开始：

```
$array = array(
    'Adam' => array('maths' => 3, 'physics' => 5, 'sports' => 6),
    'Mike' => array('maths' => 6, 'physics' => 2, 'sports' => 8),
    'Sam'  => array('maths' => 3, 'physics' => 9, 'sports' => 6)
); 
```

然后，做一个简单的自定义排序：

```
usort($array, function ($a, $b) {
    if ($a['maths'] != $b['maths']) {
        return $a['maths'] - $b['maths'];
    }
    if ($a['physics'] != $b['physics']) {
        return $a['physics'] - $b['physics'];
    }
    return $a['sports'] - $b['sports'];
}); 
```

# php - sql查找子字符串

> ID：13705662
> 
> 赞同：1
> 
> 时间：2012-12-04T14:54:32.163
> 
> 标签：php, sql

这是我的表和 php、mysql 代码

```
table bookone => id/code/name
    row1 => 1/me/book1
    row2 => 2/os/book2
    row3 => 3/pe/book3
    row4 => 3/ps/book4

    $sqlse='osmepe';

    $sql=sql_query("SELECT * FROM `bookone` WHERE `code` LIKE '%$sqlse%'");//not work 
```

我想`code`在 $sqlse 中存在 phares 时选择行。对于顶级示例 row1,row2,row3 必须是 show 。

```
row1=>me<os**me**pe//show
row2=>os<**os**mepe//show
..
row4=>ps<>osmepe//not show 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:58:48.457

看看[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)运营商

```
$sqlse='os|me|pe';
$sql=sql_query("SELECT * FROM `bookone` WHERE `code` REGEXP '$sqlse'"); 
```

应该管用。

# excel - Excel用户定义函数：改变单元格的颜色

> ID：13705663
> 
> 赞同：2
> 
> 时间：2012-12-04T14:54:36.093
> 
> 标签：excel, vba

我在 Excel 中有一个用户定义的函数。它被称为电子表格单元格中的公式函数并且工作正常。

我希望该函数能够根据返回的值更改单元格的颜色。本质上，改变单元格的颜色是函数的副作用。

我试过了

```
Application.ThisCell.Interior.ColorIndex = 2 
```

但它失败了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-26T13:54:39.397

下面演示了 VBA UDF 如何更改工作表内容的颜色，而不是使用条件格式。

只要两个工作表的行和列都按相同的顺序排序，那么这将比较两个单独的 Excel 工作表之间每个单元格的差异。

您可以将其添加到第三张纸上所需的任意数量的单元格中，以检测两张纸上相同两个单元格之间的差异，其中包含以下数据：`=DifferenceTest(Sheet1!A1,Sheet2!A1)`

而要存储在VBA编辑器中的函数如下：

```
Function DifferenceTest(str1 As String, str2 As String) As String

    If str1 = str2 Then
            Application.Caller.Font.ColorIndex = 2
    Else
            Application.Caller.Font.ColorIndex = 3
            DifferenceTest = str1 & " vs " & str2
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T15:05:30.483

这是无法做到的。用户定义的函数不能改变工作簿/工作表等的状态。

使用条件格式来实现您正在尝试的内容。

编辑：这更多是一个建议，而不是一个真正的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:28:19.200

不，您不能使用**Function()**更改单元格的颜色。但是，您可以在**Sub()**例程中更改它。

只需编写一个 Sub()，它将在您希望在其上运行的单元格上运行您的函数，然后在每个单元格运行后，放置一个 If 语句以查看是否要根据它返回的值对其进行着色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T13:21:09.927

您可以创建一个在工作表发生更改后自动运行的 vba 代码。而不是将代码放在单独的模块中，您必须将其嵌入工作表本身。

右键单击工作表选项卡，选择查看代码，然后创建以下代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

For Each cell In Range("A1:B8") 'change cell range as needed

Select Case cell.Value
Case 8
cell.Interior.ColorIndex = 4 'cell color becomes green when cell value is 8
Case ""
cell.Interior.ColorIndex = 1 'cell color becomes black when cell is empty
Case Is < 6
cell.Interior.ColorIndex = 7 'cell color becomes pink when cell value is smaller than 6
Case Else
cell.Interior.ColorIndex = 0 'all other cells get no color
End Select

Next cell

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-27T03:43:19.897

```
Function HexToLongRGB(sHexVal As String) As Long
    Dim lRed As Long
    Dim lGreen As Long
    Dim lBlue As Long
    lRed = CLng("&H" & Left$(sHexVal, 2))
    lGreen = CLng("&H" & Mid$(sHexVal, 3, 2))
    lBlue = CLng("&H" & Right$(sHexVal, 2))
    HexToLongRGB = RGB(lRed, lGreen, lBlue)
End Function

Function setBgColor(ByVal stringHex As String)
    Evaluate "setColor(" & Application.Caller.Offset(0, 0).Address(False, False) & ",""" & stringHex & """)"
    setBgColor = ""
End Function 
```

* * *

```
Sub setColor(vCell As Range, vHex As String)
    vCell.Interior.Color = HexToLongRGB(vHex)
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-24T01:41:56.043

我尝试了该`Evaluate`方法，该方法有效但立即崩溃（2007 年）。帮助提到缓存地址，所以这是我的方法 - 将单元格和颜色存储在集合中，然后在计算后更改颜色。

```
Dim colorCells As New Collection

Function UDF...
    UDF = <whatever>
    color = <color for whatever>
    colorCells.Add (Application.Caller)
    colorCells.Add (color)
End Function

Sub SetColor()
    While colorCells.Count <> 0
        colorCells(1).Interior.Color = colorCells(2)
        colorCells.Remove (1)
        colorCells.Remove (1)
    Wend
End Sub

Private Sub Workbook_SheetCalculate(ByVal Sh As Object)
    SetColor
End Sub 
```

# 3d - Crytek Sponza 错误

> ID：13705664
> 
> 赞同：3
> 
> 时间：2012-12-04T14:54:37.580
> 
> 标签：3d, textures

我从 Crytek 网站下载了`sponza_obj.rar`( `sponza.obj`+ `sponza.mtl`) 。`sponza_textures.rar`看起来缺少`gi_flag.tga`. 我在哪里可以找到丢失的纹理？此外，纹理包包含许多镜面纹理，但`.mtl`文件没有它们的路径。为什么 ？其次砖料有如下记录： `map_bump textures\spnza_bricks_a_diff.tga`没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T14:39:19.483

此处提供了有效的 Crytek Sponza 包：http: [//casual-effects.com/data/index.html](http://casual-effects.com/data/index.html) 所有必需的纹理都已就位。

# maven - xmlbeans-maven-plugin 找不到 javac

> ID：13705670
> 
> 赞同：1
> 
> 时间：2012-12-04T14:54:45.453
> 
> 标签：maven, javac, m2e, xmlbeans, xmlbeans-maven-plugin

我正在尝试在我的 Eclipse 中设置[xmlbeans-maven-plugin 2.3.3](http://mojo.codehaus.org/xmlbeans-maven-plugin/dependencies.html)，虽然一切似乎都正常，但由于无法找到文件而失败并出现 java.io.IOException `C:\Users\Daniel\Workspace\MyProject\javac`。

这很奇怪，因为 javac[*在*](http://wiki.apache.org/xmlbeans/XmlBeansFaq#scompFindingJavac)系统的 %PATH% 上，为什么它会尝试在 %PROJECT_LOC% 中找到它？

我发现[这个问题描述](http://jira.codehaus.org/browse/MXMLBEANS-65)听起来与我的非常相似，但是我将 JDK 路径放在所有其他路径的前面，但这并没有帮助。

知道**如何**告诉在`xmlbeans-maven-plugin` **哪里**寻找`javac`吗？

**更新1：**我尝试通过简单地复制`javac.exe`到项目目录来解决这个问题，至少它现在找到了它，但问题转移到了：

```
java.lang.NoClassDefFoundError: com/sun/tools/javac/Main
Caused by: java.lang.ClassNotFoundException: com.sun.tools.javac.Main
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" Could not find the main class: com.sun.tools.javac.Main.  Program will exit. 
```

任何可以帮助提出*正确*解决方案的见解（例如[.m2/settings.xml 中](http://maven.apache.org/settings.html)的内容？）将不胜感激。

**更新 2：**我还尝试了在搜索中找到的[这个小解决方案：](http://mail-archives.apache.org/mod_mbox/maven-users/201108.mbox/%3CCAA8BW8F28HgpGctSQ_zG5DkKL-xQQmYYm4CS6ZAE=3A9aoN_9g@mail.gmail.com%3E)

```
<settings xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>c:\maven\repository</localRepository>
   <configuration>
    <compiler>C:\Program Files (x86)\Java\jdk1.6.0_37\bin\javac.exe</compiler>
   </configuration>
</settings> 
```

但这并没有帮助插件找到`javac`. 它仍然抱怨 javac.exe 的“系统找不到指定的文件”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:12:05.100

找到了解决方案！在**项目的**pom.xml 中，只需在里面添加以下内容`<configuration>`：

```
<compiler>C:\Program Files (x86)\Java\jdk1.6.0_37\bin\javac.exe</compiler> 
```

IE

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>xmlbeans-maven-plugin</artifactId>
            <version>2.3.3</version>
            <executions>
                <execution>
                    <goals>
                        <goal>xmlbeans</goal>
                    </goals>
                </execution>
            </executions>
            <inherited>true</inherited>
            <configuration>
                <schemaDirectory>${basedir}/src/main/xsd</schemaDirectory>
                <compiler>C:\Program Files (x86)\Java\jdk1.6.0_37\bin\javac.exe</compiler>
            </configuration>
        </plugin> 
```

此外，请务必将 指向`Window -> Preferences -> Java -> installed JREs`JDK，而不是 JRE: `C:\Program Files (x86)\Java\jdk1.6.0_37`。如[该线程](https://stackoverflow.com/a/6810275/1864054)中所述。

# c++ - 模板类的静态成员数组的延迟初始化

> ID：13705673
> 
> 赞同：4
> 
> 时间：2012-12-04T14:55:03.830
> 
> 标签：c++, templates, static-members

我正在编写代码来执行与点的[高斯积分](http://en.wikipedia.org/wiki/Gaussian_quadrature)`n`，其中`n`是编译时间常数。

对于给定的`n`，我知道如何计算横坐标和权重。对于每个不同的 . 计算必须从头开始`n`。

现在，我按照以下方式做一些事情：

```
// Several structs like this one (laguerre, chebyshev, etc).
template <size_t n>
struct legendre
{
    static const size_t size = n;
    static const double x[n];
    static const double w[n];
};

template <typename Rule, typename F>
double gauss_quadrature (F&& f)
{
    double acc = 0;
    for (size_t j = 0; j < Rule::size; j++)
        acc += Rule::w[j] * f (Rule::x[j]);

    return acc;
} 
```

像这样使用：

```
double i = gauss_quadrature<legendre<12>> (f); 
```

`legendre<12>`现在，我可以通过做专门研究系数的翻译单元

```
template <>
const legendre<12>::x[12] = { ... };

template <>
const legendre<12>::w[12] = { ... }; 
```

一切都很好，只要我只使用 12 点 Gauss-Legendre。

现在，我正在尝试不同数量的点，并且我知道如何生成权重和节点。例如，我可以提供一个例程

```
void compute_legendre_coeffs (size_t n, double* w, double* x); 
```

和 ：

*   当我调用`gauss_quadrature<legendre<n>>`时，模板`legendre<n>`会自动实例化（就是这种情况）。
*   **当`legendre<n>`为某些 compile-time 实例化时`n`，我希望`compute_legendre_coeffs`在 main 之前的某个时间点调用上面的内容，以便它填充`x`和`w`成员数组。**我该如何做到这一点？

我知道必须先定义数组：

```
template <size_t n>
const double legendre<n>::x[n] = {};

template <size_t n>
const double legendre<n>::w[n] = {}; 
```

但我想不出一种方法来初始化它们。任何人都有这样做的诀窍吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:17:31.383

将数组转换为`std::array`：

```
#include <array>
template<int n> struct legendre {
    static const std::array<double, n> x;
};
void compute_xs(int n, double *xs) {
    ...
}
template<int n> std::array<double, n> make_xs() {
    std::array<double, n> xs;
    compute_xs(n, xs.data());
    return xs;
}
template<int n> const std::array<double, n> legendre<n>::x = make_xs<n>(); 
```

这确实意味着分别计算`x`和`w`系数，但如果效率较低，则有一些解决方法，例如：

```
template<int n> struct legendre_coeffs {
    std::array<double, n> x, w;
    legendre_coeffs(): x(), w() { compute_legendre_coeffs(n, w.data(), x.data()); }
};
template<int n> struct legendre {
    static const legendre_coeffs coeffs;
    static const double (&x)[n], (&w)[n];
};
template<int n> const legendre_coeffs legendre<n>::coeffs;
template<int n> const double (&legendre<n>::x)[n]
    = *reinterpret_cast<const double (*)[n]>(legendre<n>::coeffs::x.data());
template<int n> const double (&legendre<n>::w)[n]
    = *reinterpret_cast<const double (*)[n]>(legendre<n>::coeffs::w.data()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:44:04.027

首先：你不能在编译时使用 C++03 完全初始化（是的，设计使然！）——唯一的方法是使用 C++ 模板，但是你不能传递一个 double作为模板参数。

使用 C++11 情况会变得更好——你可以使用`constexpr`，但前提是你`compute_legendre_coeffs()`的足够微不足道。

或者，当需要根据类声明的事实采取一些行动时，我会使用一种技巧——例如，在某处注册 smth ......以通过某些库或类似的 smth 提供序列化功能。

您可以使用*静态构造函数*来初始化该数组...出于同样的原因，我使用以下代码：

```
template <
    typename Derived
  , typename Target = Derived
>
class static_xtors
{
    // This class will actually call your static init methods...
    struct helper
    {
        helper()
        {
        Target::static_ctor();
        }

        ~helper()
        {
        Target::static_dtor();
        }
    };
    // ... because your derived class would inherit this member from static_xtor base
    static helper s_helper;

    // The rest is needed to force compiler to instantiate everything required stuff
    // w/o eliminate as unused...
    template <void(*)()>
    struct helper2 {};

    static void use_helper()
    {
    (void)s_helper;
    }
    helper2<&static_xtors::use_helper> s_helper2;

    virtual void use_helper2()
    {
    (void)s_helper2;
    }

public:
    /// this is not required for your case... only if later you'll have
    /// a hierarchy w/ virtuals
    virtual ~static_xtors() {}
};

template <
    typename Derived
, typename Target
>
typename static_xtors<Derived, Target>::helper
static_xtors<Derived, Target>::s_helper; 
```

那么你必须继承 static_xtors 类，并实现两个静态方法：`void static_ctor()`- 这将初始化你的数组，并且是空的（在你的情况下）`void static_dtor()`......就像这样：

```
template <size_t n>
struct legendre : public static_xtors<legendre<n>>
{
    static const size_t size = n;
    static double x[n];
    static double w[n];

    static void static_ctor()
    {
        compute_legendre_coeffs(n, x, w);
    }
    static void static_dtor()
    {
        // nothing to do
    }
};

template <size_t n>
static double legendre<n>::x[n];

template <size_t n>
static double legendre<n>::w[n]; 
```

您可能会注意到，`x`并且`w`不再是 const :( - 您可以尝试让它们`const`再次隐藏`private`并添加静态 getter 以供调用者使用...此外，您的内部数组将在运行时初始化，但在**函数**`main`之前（而且只有一次）...

* * *

或玩w/ `constexpr`...但似乎你需要重新设计你的初始化函数（*不知何故*）因为使用初始化列表它应该看起来像这样：

```
template <size_t n>
static double legendre<n>::x[n] = { calc_coeff_x<0>(), calc_coeff_x<1>(), calc_coeff_x<2>(), ... } 
```

...而且绝对不能在没有专业化（以及广泛使用宏）的情况下做到这一点。但可能可变参数模板可能会有所帮助...需要了解有关您的功能和思考时间的更多详细信息:))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:07:32.467

```
template <size_t n>
class legendre
{
public:
    static const size_t size = n;
    static const double (&getX())[n] {
       init();
       return x;
    }
    static const double (&getW())[n] {
       init();
       return x;
    }
private:
    static double x[n];
    static double w[n];
    static void init() {
       static bool _ = do_init(x,y);
    }
    static bool do_init( double *x, double *y ) {
       // do the computation here, use local vars x, y
       return true;
    }
};
template <size_t n>
double legendre<n>::x[n];
template <size_t n>
double legendre<n>::w[n]; 
```

通过提供访问器，您可以控制类的入口点。访问器分派给一个`init`函数，该函数使用局部静态变量的初始化，`do_init`在程序生命周期中只调用一次。执行成员的`do_init`实际初始化。

笔记：

根据编译器，这可能不是线程安全的（即并非所有 C++03 编译器都提供静态变量的线程安全初始化，这反过来意味着`do_init`可能会多次并行调用不是问题——即，如果`do_init`计算值并仅写入它们，则潜在的竞争条件是无关紧要的，因为最终结果将是相同的）。一些编译器提供了保证一次性执行的机制（我相信 boost 有这样的机制）。或者，根据您的域，您可以在启动线程之前*初始化*系数。

实际的数组不能`const`在这种情况下，因为初始化需要在创建后进行。除了可能的微优化之外，这不应该是任何问题（即编译器不知道系数的值，因此它无法在编译时执行子表达式评估）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:17:07.577

也许您可以尝试将您的函数转换为初始化程序类模板，其参数将是您要初始化的类/结构。然后更改该类模板以包含初始化程序的常量实例。最后，让初始化类的构造函数触发执行实际初始化的代码。

您也许还应该保护对初始化程序类的访问 [1]，以便初始化不会多次发生。

如您所见，这个想法是使用类实例调用其构造函数代码，模板实例初始化其常量数据的事实。

下面是一个可能的（和简单的）实现，没有模板：

```
struct legendre_init {
    legendre_init(){
        compute_legendre_coeffs (T::n, T::w, T::x);
    }
 };

template <size_t n>
struct legendre
{
    typedef legendre<n> self_type;
    static const size_t size = n;
    static const double x[n];
    static const double w[n];
    static const legendre_init _l;
}; 
```

这是另一种看法，这次将初始化直接放入结构中：

```
template <class T>
class T_init {
    public:
    T_init(){
        T::_init();
    }
 };

template <size_t n>
struct legendre
{
    typedef legendre<n> self_type;
    static const size_t size = n;
    static const double x[n];
    static const double w[n];
    static const T_init<self_type> _f;
    static void _init(){
        compute_legendre_coeffs (self_type::n, self_type::w, self_type::x);
    }
}; 
```

此解决方案的有趣特征是`T_init`常量实例不应占用`T`结构内的任何空间。初始化逻辑与需要它的类捆绑在一起，`T_init`模板只会自动启用它。

[1] Xeo 提到了 std::call_once 模板，在这里可以派上用场。

# string - clojure 删除字符串中模式的最后一个入口

> ID：13705677
> 
> 赞同：4
> 
> 时间：2012-12-04T14:55:17.767
> 
> 标签：string, clojure

我在字符串的末尾有一个字符串和一些模式。我如何才能在单词的末尾准确地删除此模式，但即使它存在于开头或中间，也仅此而已。例如，字符串是

```
PatternThenSomethingIsGoingOnHereAndLastPattern 
```

我需要在最后删除“模式”，这样结果就会是

```
PatternThenSomethingIsGoingOnHereAndLast 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T15:02:09.013

您的问题没有指定模式是否必须是正则表达式或纯字符串。在后一种情况下，您可以使用简单的方法：

```
(defn remove-from-end [s end]
  (if (.endsWith s end)
      (.substring s 0 (- (count s)
                         (count end)))
    s))

(remove-from-end "foo" "bar") => "foo"
(remove-from-end "foobarfoobar" "bar") => "foobarfoo" 
```

有关正则表达式的变体，请参阅[Dominic Kexel 的答案](https://stackoverflow.com/a/13705816/6264)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-04T15:03:10.263

您可以使用[`replaceAll`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

> => (.replaceAll "PatternThenSomethingIsGoingOnHereAndLastPattern" "Pattern$" "")
> "PatternThenSomethingIsGoingOnHereAndLast"

或者[`clojure.string/replace`](http://clojuredocs.org/clojure_core/clojure.string/replace)

> => (clojure.string/replace "PatternThenSomethingIsGoingOnHereAndLastPattern" #"Pattern$" "") "PatternThenSomethingIsGoingOnHereAndLast"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:04:52.683

你需要的一切我都相信

```
(def string "alphabet")
(def n 2)
(def m 4)
(def len (count string))

;starting from n characters in and of m length;
(println
 (subs string n (+ n m)))              ;phab
;starting from n characters in, up to the end of the string;
(println
 (subs string n))                      ;phabet
;whole string minus last character;
(println
 (subs string 0 (dec len)))            ;alphabe
;starting from a known character within the string and of m length;
(let [pos (.indexOf string (int \l))]
  (println
   (subs string pos (+ pos m))))     ;lpha
;starting from a known substring within the string and of m length.
(let [pos (.indexOf string "ph")]
  (println
   (subs string pos (+ pos m))))      ;phab 
```

# asp.net - EditorForModel 和 DisplayForModel 不起作用然后在类模型中传递类模型

> ID：13705681
> 
> 赞同：0
> 
> 时间：2012-12-04T14:55:29.590
> 
> 标签：asp.net, asp.net-mvc-3

也许有人可以解释为什么 EditorForModel 和 DisplayForModel 不在网页上显示任何数据？

```
 public class QueueManagerModel
    {
        public RemoveModel Remove { get; set; }
        public StatisticModel Statistic { get; set; }

        public class RemoveModel
        {
            public bool Deleted { get; set; }
            public bool ValidationFailled { get; set; }
            public bool Validated { get; set; }
            public bool Uploading { get; set; }
        }

        public class StatisticModel
        {
            public int Deleted { get; set; }
            public int ValidationFailled { get; set; }
            public int Validated { get; set; }
            public int Uploading { get; set; }
        }

    }

  public ActionResult QueueManager()
        {
            var queueManagerModel = new QueueManagerModel();
            queueManagerModel.Remove = new QueueManagerModel.RemoveModel();
            queueManagerModel.Statistic = new QueueManagerModel.StatisticModel();
            return View(queueManagerModel);
        }

@model PC.Models.QueueManagerModel
@using (Html.BeginForm())
{
    <fieldset>
        <legend>Queue Manager</legend>
        @Html.EditorForModel(Model.Remove)
        @Html.DisplayForModel(Model.Statistic)
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:59:36.810

默认情况下`EditorForModel`，`DisplayForModel`不显示或递归复杂属性。您可以通过实现 Object.cshtml 模板来启用此功能。

# spring - SpringSource IDE 不使用项目名称作为 Spring MVC 应用程序的根 URL

> ID：13705685
> 
> 赞同：7
> 
> 时间：2012-12-04T14:55:43.177
> 
> 标签：spring, spring-mvc, sts-springsourcetoolsuite

当我使用 SpringSource IDE 创建 Spring MVC 模板项目时，我运行应用程序并将根 URL 设置为默认包名称的最后一个单词：

例如，我在创建项目时，将默认包设置为`com.sample.myapp`. 当我运行应用程序时，它会在`http://localhost:8080/myapp`. 为什么根 URL 不使用我的项目名称`MyProject`，而是？

这是一个问题，因为我必须在我的应用程序中指定所有 URL，`/myapp/resources/css/mycss.css`但是当我导出 .war 并将其部署到 Tomcat 服务器时，Tomcat 需要项目名称（它希望我使用`/MyProject/resources/css/mycss.css`. 结果，部署时我的所有链接都断开了（但当我在 SpringSource IDE 中本地运行 tomcat 时没有...）

有没有其他人遇到过这个问题？

* * *

下面的评论讨论示例：

```
<bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties">
    <property name="service"
        value="https://localhost:8443/MyProject/j_spring_cas_security_check" />
    <property name="sendRenew" value="false" />
</bean> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T15:24:31.853

这取决于您如何运行应用程序。我假设您从 SpringSource IDE (STS) 中选择了“在服务器上运行”？如果您双击 STS 中的服务器定义，您将看到一个“模块”选项卡。从那里，您可以编辑“路径”并将其设置为您想要的任何内容。当您选择“在服务器上运行”时，STS 必须定义一个上下文路径并将其默认为默认包的最后一个元素。如果我没记错的话，默认情况下 Tomcat 使用压缩或分解的 .war 的文件名。在任何一种情况下，您都可以覆盖它。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T06:18:27.167

The first part in the URL after host and port is called the context-path. In your case *myapp*. In tomcat the context-path is equal to the name of the war-file. If you name the war-file ROOT.war then *no* context-path is used.

As bimsapi mentioned you can change the context-path in STS, too.

But: You can and should make your app independent of the context-path. If you are using JSP then build links with the `<c:url />` tag:

```
<c:url value="/resources/css/mycss.css" /> 
```

This outputs the correct url including the actual context-path. Or your can store it in a variable and use it later:

```
<c:url value="/items/index" var="cancel-url" />
<a href="${cancel-url}">Cancel</a> 
```

In Java code you can get the context-path with:

```
request.getContextPath() 
```

where *request* is the current `HttpServletRequest` object. Using this makes your app completely independent of the actual context-path which simplifies deployment a lot.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:57:33.090

不确定 STS，但在 pom 文件中设置了 war 文件名：

```
</dependencies>    
<build>
<finalName>yourProject</finalName> 
```

（刚刚意识到你没有指定maven，哦）

# php - 在一页中有多个“部分/步骤” - 注册后，一页中有多个 SETUP 步骤

> ID：13705688
> 
> 赞同：0
> 
> 时间：2012-12-04T14:55:49.203
> 
> 标签：php, html, codeigniter

我目前正在处理用户注册后被重定向到的设置页面/设置页面基本上让用户填写重要信息，并且有 3 个步骤。我不想创建 3 页，一步 = 1 页，因为我认为这不是有效的方法。

我确实尝试创建一个新的 facebook 帐户，并意识到他们可以在一个页面中完成所有操作，就像其他网站一样。

我注意到的一件事是地址栏有查询字符串，我目前正在使用 codeigniter / MVC，PHP。我如何以“查询字符串（地址/？step = 1）等”的方式使其仅更改选项卡的表单和 css ACTIVE 代码。

或者有没有其他方法可以完成这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:28:29.607

如何为 3 个步骤创建 3 个视图并通过控制器通过 ajax 加载它们。

您可以在第一步中拥有主视图，并在用户进行时将视图 2 和视图 3 附加到它。

view1 中的 Javascript：

```
$("#next_button").click(function() {    
    $.ajax({
        url: "<?=base_url()?>controller/next_step",
        type:'POST',
        data: "step=1",
        async: false,
        success: function(data) {
            $("#step_form").append(data);
        },
        fail: function(jqXHR, textStatus) {
            console.log("Request failed: " + textStatus );
        }
    });
}); 
```

控制器

```
public function next_step() {
    $step = filter_input(INPUT_POST, "step", FILTER_SANITIZE_NUMBER_INT);
    if($step==1) {
        echo $this->load->view("step2_view", array(), true);
    }
} 
```

尽管您正在创建 3 个视图，但用户觉得它是一页。

# c# - Entity Framework Codefirst 中的外键帮助

> ID：13705689
> 
> 赞同：1
> 
> 时间：2012-12-04T14:55:49.830
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有两个模型类：出勤和员工。我已将 Employee 类定义为：

```
public class Employee
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
} 
```

然后我将出勤类定义为：

```
public class Attendance
{
    public int Id { get; set; }
    public Employee Employee { get; set; } //This is the foreign key
    public DateTime LoginDate { get; set; }
    public DateTime LogoutDate { get; set; }
} 
```

当我尝试将数据插入员工表时，它工作正常，但是当我尝试在出勤表中插入数据时，它显示异常。我正在正确检查员工并在出勤表中仅插入一行员工。

这是异常的图像：

![在此处输入图像描述](../Images/ad2c9fbb69448e5105e8a511ab7b0736.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:09:18.583

您需要定义一个外键属性：

```
public class Attendance
{
    public int Id { get; set; }
    public int EmployeeID { get; set; }
    public Employee Employee { get; set; }
    public DateTime LoginDate { get; set; }
    public DateTime LogoutDate { get; set; }
}

public class Employee
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
} 
```

将外键添加为 int 后，您可以对其进行配置：

```
public class AttendanceConfiguration : System.Data.Entity.ModelConfiguration.EntityTypeConfiguration<Attendance>
{
    public AttendanceConfiguration()
    {
        this.HasRequired(a => a.Employee)
            .WithMany()
            .HasForeignKey(a => a.EmployeeID);
    }
} 
```

然后在上下文中定义这个配置

```
public class Context : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new AttendanceConfiguration());
    }
} 
```

**更新**
通过使用没有参数的 WithMany() 重载，您可以建立一个单向的一对多关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:03:25.223

为了解决您看到的错误（并获得有关根本问题的更多详细信息），将 EmployeeId 的字段添加到出勤类，如下所示

```
public class Attendance
{
    public int Id { get; set; }
    //This exposes the foreign key on attendance
    public int EmployeeId {get; set;}
    public Employee Employee { get; set; } //This is the foreign key
    public DateTime LoginDate { get; set; }
    public DateTime LogoutDate { get; set; }
} 
```

真正的问题（我相信）是 EF 无法确定关系的所有者。如果没有更多信息，则无法确定出勤与员工的关系是多对一还是一对一。一个简单的解决方案（我假设它是多对一的关系）是像这样将出勤对象的集合添加到 Employee 类

```
public class Employee
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public virtual ICollection<Attendance> Attendances {get; protected set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:01:56.457

您需要公开密钥本身，而不仅仅是实体。

```
public class Attendance
{
    public int Id { get; set; }
    public Employee Employee { get; set; }
    public int EmployeeId { get; set; } // THIS is the foreign key.
    public DateTime LoginDate { get; set; }
    public DateTime LogoutDate { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:03:06.650

尝试在您的员工实体上放置一个关键属性。

# timezone - 使用 KML 在 Google 地球中阻止时区调整

> ID：13705695
> 
> 赞同：1
> 
> 时间：2012-12-04T14:56:31.883
> 
> 标签：timezone, kml, google-earth

一段时间以来，我一直在使用[TimeStamps](https://developers.google.com/kml/documentation/kmlreference#timestamp)创建 kml 文件，以便我可以使用时间缩放控件。过去，Google 地球不会更改指定为 UTC（末尾带有“Z”字符）的时间。他们显然改变了方法，现在将 UTC 时间调整为地标所在的当地时间。例如：

```
<Placemark>
  <name>1324</name>
  <description>Local time: 13:50:12</description>
  <Point>
    <altitudeMode>relativeToGround</altitudeMode>
    <coordinates>-79.344437,43.679943,0</coordinates>
  </Point>
  <TimeStamp><when>2012-09-26T13:50:12Z</when></TimeStamp>
</Placemark> 
```

此位置设置为 13:50:12（下午 1:50:12），但将在时间滑块控件中显示为 08:50:12，这是多伦多（北美东部时区）的“调整后”当地时间。我尝试了不同的时间戳格式：

```
<TimeStamp><when>2012-09-26T13:50:12Z</when></TimeStamp>
<TimeStamp><when>2012-09-26T13:50:12</when></TimeStamp>
<TimeStamp><when>2012-09-26T13:50:12+00:00</when></TimeStamp>
<TimeStamp><when>2012-09-26T13:50:12-00:00</when></TimeStamp> 
```

并且仅指定偏移量（我想避免）使 Google Earth 给出正确的时间：

```
<TimeStamp><when>2012-09-26T13:50:12-05:00</when></TimeStamp> 
```

**告诉 Google 地球忽略时区、基本上不调整时间的格式（如果有）是什么？**

[附加组件： http://pastebin.com/DahChjsT](http://pastebin.com/DahChjsT)上的工作示例，另存为 .kml 并打开。

使用最新版本的免费 G​​oogle 地球，7.0.1.8244（测试版）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T16:48:35.627

我假设您说的是桌面版 Google 地球，而不是基于 Web 的 API。话虽如此，如果您使用普通符号制作时间戳，`Z`则会出现时间滑块栏，如果您单击滑块上的扳手，它会显示时间选项，您可以选择 UTC 作为您要使用的时间。关闭和重新打开程序时，这似乎一直存在。希望有帮助。

# python - 在 Debian Squeeze 上意外从 /usr/include/python2.7 中删除了 pyconfig.h 文件

> ID：13705696
> 
> 赞同：2
> 
> 时间：2012-12-04T14:56:31.793
> 
> 标签：python, linux, python-2.7, installation, debian

我偶然发现了一个在过去 2 小时内无法解决的问题，如果您能帮助我，我将不胜感激。

我不小心从**/usr/include/python2.7**中删除了文件*pyconfig.h*，现在我的 python2.7 版本不起作用。我尝试了以下步骤：

 **1.  试图在网上找到*pyconfig.h*文件并将其简单地放在**/usr/include/python2.7**但我找不到这个文件。
2.  试图找到一种重新安装 Python 2.7 的方法
3.  尝试删除 Python 2.7 并重新安装

你能帮我解决这个问题吗？我是 debian 挤压和 linux 初学者。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:41:59.340

解决依赖性问题应该是您解决此问题的最佳方法。

但是你总是可以从[debian](http://packages.debian.org/wheezy/python2.7-minimal)下载包并解压 deb 并得到这样的文件：

```
wget http://ftp.se.debian.org/debian/pool/main/p/python2.7/python2.7-minimal_2.7.3~rc2-2.1_amd64.deb
ar -x python2.7-minimal_2.7.3~rc2-2.1_amd64.deb
tar -xzf data.tar.gz
sudo cp usr/include/python2.7/pyconfig.h /usr/include/python2.7/pyconfig.h 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:03:33.710

重新安装软件包确实是最简单的解决方案。在[Debian 的网站上](http://packages.debian.org)，您可以找到它所在的软件包。在这种情况下，它似乎是[python2.7-minimal](http://packages.debian.org/search?searchon=contents&keywords=pyconfig.h&mode=path&suite=unstable&arch=any)。重新安装该软件包，一切都会好起来的。**

# sql - 在 PostgreSQL 分区表上使用函数时，它会进行全表扫描

> ID：13705700
> 
> 赞同：3
> 
> 时间：2012-12-04T14:56:38.683
> 
> 标签：sql, enterprisedb

这些表在 PostgreSQL 9 数据库中进行分区。当我运行以下脚本时：

```
select * from node_channel_summary
where report_date between '2012-11-01' AND '2012-11-02'; 
```

它从正确的表中发送数据而不进行全表扫描。然而，如果我运行这个脚本：

```
select * from node_channel_summary
where report_date between trunc(sysdate)-30 AND trunc(sysdate)-29; 
```

在这种情况下，它会进行一次全表扫描，其性能是不可接受的。-30 和 -29 将被参数替换。

在做了一些研究之后，Postgres 不能与函数和分区表一起正常工作。

有人知道解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:00:42.840

问题是 PostgreSQL 在编译函数时会计算并缓存执行计划。这是分区表的问题，因为 PostgreSQL 使用查询计划器来消除分区。您可以通过将查询指定为字符串来解决此问题，强制 PostgreSQL 在运行时重新解析和重新规划您的查询：

```
FOR row IN EXECUTE 'select * from node_channel_summary where report_date between trunc(sysdate)-30 AND trunc(sysdate)-29' LOOP
    -- ...
END LOOP;

-- or
RETURN QUERY EXECUTE 'select * from ...' 
```

# javascript - Jetbrains PHPStorm 5.0.4 告诉我我有一个重复的 jQuery 选择器

> ID：13705707
> 
> 赞同：14
> 
> 时间：2012-12-04T14:57:03.777
> 
> 标签：javascript, jquery

这是我写的一段 jQuery，

```
$('#editUser').click(function() {
    if ($(".selectedTR")[0]) {
        if($('.form-actions').is(':visible')) {
            $('.form-actions').slideUp('slow',function() {
                $('.form-actions > h3').text("Edit");
            }).css('display', 'none');
        }

        $('.form-actions').css('display', 'block').slideDown('slow');
    } else {
        alert("Please select a user");
    }
}); 
```

如何删除重复的选择器？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-04T15:01:04.630

您可以通过将选择器放入变量中来缓存它。试试这个：

```
$('#editUser').click(function() {
    if ($(".selectedTR").length) { 
        var $formActions = $('.form-actions');
        if ($formActions.is(':visible')) {
            $formActions.slideUp('slow', function() {
                $formActions.children('h3').text("Edit");
            }).css('display', 'none');
        }
        $formActions.css('display', 'block').slideDown('slow');
    } else {
        alert("Please select a user");
    }
}); 
```

# c# - 类和索引器 - 对象列表

> ID：13705709
> 
> 赞同：0
> 
> 时间：2012-12-04T14:57:10.100
> 
> 标签：c#

我目前正在学习如何创建类和使用索引器。我创建了两个类`list_of_cars`和`the_cars`. 使用`button1`I 可以在列表中显示汽车，但不是显示三辆汽车，而是只显示两辆。我不知道为什么它错过了最后一辆车？

**代码**

```
namespace cars
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public class list_of_cars
        {
            public the_cars first;
            public the_cars last;

            public int count;

            public list_of_cars(the_cars new_car)
            {
                first = new_car;
                last = new_car;
                count = 1;
            }

            public void add_car(the_cars new_car)
            {
                if (count == 0)
                {
                    first = new_car;
                    last = new_car;
                    count = 1;
                }
                else
                {
                    last.next = new_car;
                    last = new_car;
                    count++;
                }
            }
        }

        public class the_cars
        {
            private string name;
            private int year;
            private double price;

            public the_cars next;

            public the_cars(string new_name, int new_year, double new_price)
            {
                name = new_name;
                year = new_year;
                price = new_price;

                next = null;
            }

            public override string ToString()
            {
                return name + " " + year.ToString() + " " + price.ToString();
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            the_cars car0 = new the_cars("VW Bug", 1960, 600.0);
            the_cars car1 = new the_cars("Ford Pinto", 1970, 2400.0);
            the_cars car2 = new the_cars("Duster", 1974, 3200.0);

            list_of_cars mylist = new list_of_cars(car0);
            mylist.add_car(car1);
            mylist.add_car(car2);

            the_cars current = mylist.first;

            while (current.next != null)
            {
                textBox1.AppendText(current.ToString() + Environment.NewLine);
                current = current.next;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:02:22.673

你的while循环应该是

```
while(current != null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:59:21.453

我想这会有所帮助：

```
 list_of_cars mylist = new list_of_cars();
        mylist.add_car(car0);
        mylist.add_car(car1);
        mylist.add_car(car2); 
```

# drupal - 将语言切换添加到自定义块

> ID：13705713
> 
> 赞同：1
> 
> 时间：2012-12-04T14:57:23.543
> 
> 标签：drupal, drupal-7

我的 .info 文件中有这个：

```
regions[lang_switch] = switcher 
```

我已将块设置为切换器区域。

但是`<?php print $lang_switch ?>`在我的 page.tpl.php 文件中给了我这样的错误：

注意：未定义变量：include() 中的 lang_switch（/sites/all/themes/basic/templates/page.tpl.php 的第 16 行）。=>

我很确定这就是我上次所做的一切并且它奏效了，虽然我在 d6 中做到了，但我无法从 Drupal 的网站获得有用的信息......提前致谢！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:19:07.827

尝试使用这个：

```
<?php print render($page['lang_switch']); ?> 
```

# php - 检查两个日期之间是否包含句点

> ID：13705717
> 
> 赞同：1
> 
> 时间：2012-12-04T14:57:32.517
> 
> 标签：php, mysql, sql, date, datetime

我有一个这样的mysql表：

```
 | ID | ID_period | date_start |  date_end  |
   | 1  |   1       | 0000-07-01 | 0000-08-31 |
   | 2  |   2       | 0000-09-01 | 0000-10-30 |
   | 3  |   3       | 0000-11-01 | 0000-12-28 |
   | 4  |   4       | 0000-11-01 | 0000-03-31 | 
```

如何选择包含在此期间 0000/07/14 - 0000/08/25 之间的 ID？

date_start 和 date_end 列是 DATE 格式。

问题是，如果我搜索一个时期（包括和相交），即：从 0000-12-12 到 0000-01-25，我从选择中得到 0 条记录，我猜那一年是“0000”。 . 我该如何解决？

另一个问题是，如果我搜索 11-01 到 12-31 这样的时期，我得到 0 个结果。因为 date_end 中的最后一天 12 月是 28 .. 但是如果我搜索 11-01 到 12-31 的时期是因为我希望包含所有记录..所以我想获得 id=3 和 id=4 的记录

目前我正在使用以下查询：

```
SELECT ... WHERE '12' BETWEEN MONTH(date_start) and MONTH(date_end)
AND '15' BETWEEN DAY(date_start) and DAY(date_end)
AND '03' BETWEEN MONTH(date_start) and MONTH(date_end)
AND '28' BETWEEN DAY(date_start) and DAY(date_end) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:04:17.027

```
SELECT  *
FROM    mytable
WHERE   date_start BETWEEN '0000-07-14' AND '0000-08-25'
        OR date_end BETWEEN '0000-07-14' AND '0000-08-25'
        OR (date_start<'0000-07-14' AND date_end>'0000-08-25') 
```

# iphone - 非法建立关系的企图

> ID：13705718
> 
> 赞同：3
> 
> 时间：2012-12-04T14:57:34.930
> 
> 标签：iphone, objective-c, ipad, core-data

我遇到了这个令人讨厌的崩溃和错误。

运行此代码时发生崩溃：

```
 Address *address = [[Address alloc] initWithEntity:[NSEntityDescription entityForName:@"Address" inManagedObjectContext:managedObjectContext] insertIntoManagedObjectContext:nil];

        //Crashes here!
        [person addAddressObject:address]; 
```

`Illegal attempt to establish a relationship 'person' between objects in different contexts`

整个控制台错误如下。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Illegal attempt to establish a relationship 'person' between objects in different contexts (source = <Address: 0x1f87e270> (entity: Address; id: 0x1f87e2b0 <x-coredata:///Address/t748EE284-0311-4489-9654-1D902EB0D4CC2> ; data: {
    addressLine1 = "";
    addressLine2 = "";
    addressLine3 = "";
    city = "";
    country = "";
    person = nil;
    state = "";
    title = "";
    zip = "";
}) , destination = <Person: 0x1ed9e1e0> (entity: Person; id: 0x1ed9c710 <x-coredata://ED0283A9-A847-407E-BFEC-CF2BF85C6A9C/Person/p1> ; data: {
    address =     (
        "0x1f87e2b0 <x-coredata:///Address/t748EE284-0311-4489-9654-1D902EB0D4CC2>",
        "0x1ed93e70 <x-coredata://ED0283A9-A847-407E-BFEC-CF2BF85C6A9C/Address/p1>"
    );
    favourite = nil;
    firstName = Josh;
    lastName = Kahane;
}))' 
```

我不知道如何解决这个问题。大概它认为有两个不同的managedObjectContexts？但是，在我的应用程序中，我只引用了我的应用程序委托中的内容（在 viewDidLoad 处运行）：

```
if (managedObjectContext == nil)
    {
        managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
        NSLog(@"After managedObjectContext: %@",  managedObjectContext);
    } 
```

关于从哪里开始寻找差异的任何想法？谢谢。

编辑：

新发现。就在应用程序崩溃之前，我已经对地址和人员管理的对象上下文进行了 NSLogged。原来地址上下文是`(null)`，即使我事先运行检查以设置上下文（如果它为零）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T17:25:00.057

您将其插入到 nil`managedObjectContext`中。

您需要将对象插入到`NSManagedObjectContext`用于实体的对象中。即`managedObjectContext`。

在 Address 对象的 alloc init 中。

阅读您在 OP 中的评论。

你应该要么...

保存所有必需的值，然后在确认时创建地址对象并一次性将其全部插入。

或者...

创建对象并插入它以创建所有关系，然后如果用户按下取消，则删除该对象。

我会做这两个中的一个来避免这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:29:28.513

你说：

```
Address *address = [[Address alloc] initWithEntity:[NSEntityDescription entityForName:@"Address" inManagedObjectContext:managedObjectContext] insertIntoManagedObjectContext:nil]; 
```

为什么要将它插入 nil 上下文。您不应该传递托管对象上下文而不是 nil。

# iis - 如何跟踪 IIS 工作进程请求

> ID：13705720
> 
> 赞同：2
> 
> 时间：2012-12-04T14:57:50.053
> 
> 标签：iis, request, monitoring

我需要能够监视来自 IIS w3wp 进程的请求。

如何查看 IIS 工作进程请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:08:05.513

跟踪当前在 IIS 工作进程中执行的所有请求

*   打开命令窗口并键入`logman startsession name–p "IIS: Request Monitor" -ets`并按`ENTER`。
*   Windows 的事件跟踪将您刚刚启动的跟踪会话的详细信息打印到屏幕上，包括会话的名称、将收集跟踪数据的文件名（默认为会话名称.etl）以及该命令是否为成功的
*   允许跟踪会话运行，直到您重现问题或您的站点处理了足够的请求以生成可管理的数据集
*   在命令提示符下，键入`logman stopsession name-ets`并按 `ENTER`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-09T08:02:44.307

我在 Windows 和 Linux 上没有经验，所以 Ravindra 的回答似乎很有趣（这只是安排特定的事件查看器样式会话还是实际上更深入地注销？）。

当您特别询问“IIS 工作进程请求”时，您有两个选择。

**图形用户界面**

打开inetmgr，进入根服务器级别，进入工作进程并双击您选择的工作进程。将加载一个新屏幕，您将看到工作人员当前正在处理的任何内容。

**命令行**

而不仅仅是给你一个命令来复制和粘贴这篇文章是一个很好的开始 - [http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)

您想要的特定命令位于“检查当前正在执行的请求”部分下

# entity-framework-4 - VB.Net代码转换问题中的假IDBSet

> ID：13705721
> 
> 赞同：0
> 
> 时间：2012-12-04T14:58:00.677
> 
> 标签：entity-framework-4, mocking, c#-to-vb.net

我在将一些 C# 代码转换为 VB.NET 时遇到了一个小问题。我正在使用这个在线博客：[http ://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/](http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/)

在关于在内存中创建假 IDBSet 的部分中，它具有以下代码：

```
System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
{
    return _data.GetEnumerator();
}

IEnumerator<T> IEnumerable<T>.GetEnumerator()
{
    return _data.GetEnumerator();
} 
```

使用代码翻译器会呈现以下内容：

```
Private Function GetEnumerator() As IEnumerator Implements System.Collections.IEnumerable.GetEnumerator
    Return _data.GetEnumerator()
End Function

Private Function GetEnumerator() As IEnumerator(Of T) Implements IEnumerable(Of T).GetEnumerator
    Return _data.GetEnumerator()
End Function 
```

在我看来这是一个正确的翻译，但 DB.Net 抱怨以下错误： Private Function GetEnumerator ... 和 Private Function GetEnumerator ... 不能相互重载，因为它们仅在返回类型上有所不同。两者都是实现 IDBSet 所必需的。

关于如何正确转换此代码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:09:32.567

由于它们都是`Private`，只需更改其中一个的名称即可。重要的部分是它们实现了各自的接口方法。这会起作用：

```
Private Function IEnumerator_GetEnumerator() As IEnumerator Implements System.Collections.IEnumerable.GetEnumerator
    Return _data.GetEnumerator()
End Function

Private Function GetEnumerator() As IEnumerator(Of T) Implements IEnumerable(Of T).GetEnumerator
    Return _data.GetEnumerator()
End Function 
```

# php - 在 Lithium 中关闭 PHP 标记

> ID：13705722
> 
> 赞同：1
> 
> 时间：2012-12-04T14:58:12.170
> 
> 标签：php, lithium

如您所知，大多数 PHP 源代码不推荐插入结束标记，但我想知道为什么在[Lithium 文档](http://lithify.me/docs/manual/quality-code/coding-standards.wiki)中，鼓励包含结束 PHP 标记？有什么合理的理由吗？除此之外，其文档中还有一些其他过时的样式。锂是一个活跃的项目吗？

**更新：**即使在仅包含 PHP 的文件中打开 php 标签似乎也是多余的，我们将其包含在内，因为目前我们必须这样做，（如果只有 php 代码的文件有标准文件扩展名，则无需打开标签），但更奇怪的是，甚至有人说我们应该包含一个结束标签！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:30:16.377

省略结束标签是草率的。

任何人这样做的唯一借口是您可能会不小心留下一些尾随空格，从而导致标题过早发送。这就是为什么这个理由完全是虚假的：

1.  如果您安装了 Xdebug（如果您没有安装，则会遇到更大的问题），如果您尝试编写标头，它会准确地告诉您输出从哪里开始
2.  我发现这种行为是整体缺乏对细节关注的表现；很有可能，如果你弄错了，你的代码也有其他问题（或者你有一个糟糕/配置不当的编辑器）
3.  好的 QA 工具完全否定了这一点：我们有[li3_quality](https://github.com/UnionOfRAD/li3_quality/)，它是一个全面的代码质量验证器

从本质上讲，人们用*最糟糕*的懒惰来为马虎辩护。

如果您浏览 Lithium 的编码标准，您会注意到对对称性的高度关注。编码标准中的*一切都是对称的。*包括打开/关闭标签。这样做对我们来说*从来都不*是问题，因为我们拥有良好的 QA 工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:27:54.917

## Lithium Coding Standards

The link reffered to in the question ... [Coding Standards](http://lithify.me/docs/manual/quality-code/coding-standards.wiki) ... is just that, what the Lithium devs believe are the best coding standards for their project. I personally agree that a closing tag is preferable.

While the [PHP docs](http://php.net/manual/en/language.basic-syntax.phptags.php) say it's "preferable" to not use the close tag if it's "pure" PHP code (mostly so you don't accidental add white space or something after it) a simple way to avoid that is to not do it in the first place. I prefer leaving in the tag so that ...

*   The code looks more uniform
*   To insure server compatibility
*   For better support of color-coding etc in text editors

This is also somewhat a misunderstanding of how Lithium works ... the examples given are for files that act as [Controllers](http://lithify.me/docs/manual/handling-http-requests/controllers.wiki), [Models](http://lithify.me/docs/manual/working-with-data/using-models.wiki), etc. These files are for the most part not directly accessed by end user requests like the [Views](http://lithify.me/docs/manual/handling-http-requests/views.wiki) are (well for lack of a simpler way to explain it.)

## Is Lithium an active project?

As for if Lithium is an "active" project I suggest referring to their ...

*   git repo [https://github.com/UnionOfRAD/lithium](https://github.com/UnionOfRAD/lithium)
*   commit history: [https://github.com/UnionOfRAD/lithium/graphs/commit-activity](https://github.com/UnionOfRAD/lithium/graphs/commit-activity)
*   dev branch [https://github.com/UnionOfRAD/lithium/tree/dev](https://github.com/UnionOfRAD/lithium/tree/dev)
*   dev commit history [https://github.com/UnionOfRAD/lithium/commits/dev](https://github.com/UnionOfRAD/lithium/commits/dev)

As of this post the last dev branch commit was 10 hours ago.

## Lithium's use of "short" tags ...

For the record, other examples in the Lithium doc's use the so called PHP "short" tags e.g. `<?= ... ?>` instead of: `<?php ... ?>` comes with an important caveat see the [docs](http://lithify.me/docs/manual/handling-http-requests/views.wiki):

> You might have noticed that the above example uses the short tag syntax to output the contents of a view variable. This syntax is a bit misleading, as Lithium does not depend on or use short tags: this output behavior works a bit differently from how it seems. When the view layer is rendered, each template is processed by a tokenizer before it is compiled into its final form. During this step something like this:
> 
> `<?=$variable; ?>`
> 
> Is translated into something like this:
> 
> `<?php echo $h($variable); ?>`
> 
> The `$h()` function you see used there escapes HTML. To make a long story short, this mechanism provides an easy way for you to make sure all dynamically-generated data is safely landing in your HTML template.
> 
> We highly recommend using the `<?= ...; ?>` syntax in your views, as it aids greatly in hardening your application against cross-site scripting (and related) attack techniques.

# c++ - 使用无符号字符初始化 IMFByteStream*

> ID：13705723
> 
> 赞同：2
> 
> 时间：2012-12-04T14:58:14.870
> 
> 标签：c++, microsoft-metro

我正在用 C++ 编写一个 Metro 风格的应用程序，我需要`IMFByteStream`用 an来初始化 a`unsigned char*`以执行以下操作：

```
Microsoft::WRL::ComPtr<IMFMediaEngineEx>            m_spEngineEx;
m_spEngineEx->SetSourceFromByteStream(spMFByteStream, m_bstrURL); 
```

（`m_bstrURL`其中有正确的 URL。）我尝试了所有建议的方法，但没有任何效果。你有什么建议吗？

# java - 在声纳中排除生成的代码

> ID：13705726
> 
> 赞同：18
> 
> 时间：2012-12-04T14:58:21.733
> 
> 标签：java, maven, maven-plugin, sonarqube

**如何从声纳处理和报告中排除生成的代码？**

我试图[排除](http://sonar.15.n6.nabble.com/Is-is-possible-to-exclude-code-from-coverage-or-style-check-tt3198093.html#a3198096) `**/*generated*`，但类似`org.blayo.generated`的包仍在报告中：

```
<plugin>
  ...
  <artifactId>maven-checkstyle-plugin</artifactId>
  <configuration>

    <excludes>**/*generated*</excludes> 
```

**编辑：**正确的正则表达式是`**/generated/*.java`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-21T09:28:06.823

**自 SonarQube 3.5 以来**，排除模式发生了变化。这是它现在的工作方式：

```
<properties>
   <sonar.exclusions>file:**/generated-sources/**</sonar.exclusions>
</properties> 
```

资料来源：[SonarQube JIRA](https://jira.sonarsource.com/browse/SONAR-2760)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-04T15:04:31.347

为此使用该`sonar.exclusions`属性：

```
<properties> 
  <sonar.exclusions>**/*generated*</sonar.exclusions>
</properties> 
```

# ios - 现有软件可以远程使用应用程序中的 iOS 日志吗？

> ID：13705733
> 
> 赞同：1
> 
> 时间：2012-12-04T14:58:48.763
> 
> 标签：ios, logging

是否有人熟悉可以添加到 iOS 应用程序的框架或库，该应用程序捕获所有日志并将它们发送到基于云的服务，然后您可以登录并查看？希望某家公司已经在 SAAS 模型中提供此功能。

我们的企业开发团队正在考虑如何将设备日志（诊断和崩溃日志）提供给我们的支持部门，以便当客户致电报告问题时，支持部门可以访问问题发生的背景和上下文。我们将有大约 5000 台设备发送日志，支持技术人员可以随时要求查看这些日志我们不希望推出我们自己的远程日志查看器。

例如，对于我们的一些服务器端代码，我们使用了一个名为 Gibraltar 的产品，它负责发送日志并通过软件接口呈现它们以获得支持 - [gibraltar](http://www.gibraltarsoftware.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:35:38.443

Crittercism [http://crittercism.com/developers](http://crittercism.com/developers)正是这样做的。

他们自动发送崩溃报告（主要产品）

他们还可以记录处理的异常（我猜是企业功能） - 记录处理的异常可用于诊断日志记录。（阅读[http://support.crittercism.com/customer/portal/articles/685301-fully-utilizing-handled-exceptions](http://support.crittercism.com/customer/portal/articles/685301-fully-utilizing-handled-exceptions)）。

此外，面包屑功能将帮助您了解用户在遇到崩溃/问题之前采取的路径

您还可以在每个日志/崩溃报告中附加一个用户名，这将帮助您的支持团队识别用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T08:54:20.227

你可以看看[Bugfender](http://bugfender.com)，这是我们为解决这个问题而开发的产品。

它易于集成，您可以选择要从中获取日志的设备。我们的服务可以离线和在线工作，我们花了很多时间使其可靠且易于使用。

与其他产品相比，您不需要任何崩溃即可获取日志，您可以在需要时选择它们。

# php - 从命令行工作但不使用 php exec()

> ID：13705737
> 
> 赞同：2
> 
> 时间：2012-12-04T14:58:56.370
> 
> 标签：php, cutycapt

我以 root 用户身份安装了[**cutycapt**](http://cutycapt.sourceforge.net/)
我从命令提示符尝试了它

```
xvfb-run --server-args="-screen 0, 1024x768x24" /root/cutycapt/CutyCapt/CutyCapt --url=http://www.poochh.com --out=/tmp/example.png 
```

但是当我从 php 执行它时，我`exec()`
得到了这个错误`var_dump($output);``exec()`

```
array(1) { [0]=> string(80) "/usr/bin/xvfb-run: line 166: /root/cutycapt/CutyCapt/CutyCapt: Permission denied" } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:00:45.107

检查用户 php 运行为！您可能需要确保它有权运行 cutycapt

尝试运行

```
echo exec('whoami'); 
```

检查谁运行 php

# nhibernate - NHibernate QueryOver 等效

> ID：13705751
> 
> 赞同：-1
> 
> 时间：2012-12-04T14:59:30.923
> 
> 标签：nhibernate, queryover

对于为以下提到的 SQL 编写 NHibernate QueryOver 等效项，我将不胜感激：

```
select sum(s.StudentCount),sum(w.TotalEarningsAmount),
avg(w.TotalEarningsAmount),count(w.TotalEarningsAmount) 
from School s inner join s.Earnings w where s.Active = 1" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:40:43.200

```
Earning w = null; //alias variable
Dto dto = null; //make a dto object

var dtoList = Session.QueryOver<School>()
    .JoinAlias(x => x.Earnings, () => w)
    .Where(x => x.isActive)
    .SelectList(list => list
        .SelectSum(x => x.StudentCount).WithAlias(() => dto.StudentCountSum)
        .SelectSum(() => w.TotalEarningsAmount).WithAlias(() => dto.TotalEarningsAmountSum)
        .SelectAvg(() => w.TotalEarningsAmount).WithAlias(() => dto.TotalEarningsAmountAvg)
        .SelectCount(() => w.TotalEarningsAmount).WithAlias(() => dto.TotalEarningsAmountCount))
    .TransformUsing(Transformers.AlaisToBean<Dto>())
    .List<Dto>(); 
```

# javascript - 返回 mongodb 上嵌入文档中键的最大值

> ID：13705752
> 
> 赞同：1
> 
> 时间：2012-12-04T14:59:35.670
> 
> 标签：javascript, mongodb

给定示例文档

```
{
  "user_id": "user 1",
  "log":[
     {
        "index" : 1,
        "position" : 50
     },
     {
        "index" : 2,
        "position" : 70
     },
     {
        "index" : 3,
        "position" : 60
     }
   ]
},
{
  "user_id": "user 2",
  "log":[
     {
        "index" : 1,
        "position" : 150
     },
     {
        "index" : 2,
        "position" : 570
     },
     {
        "index" : 3,
        "position" : 60
     }
   ]
}, 
```

如何返回最高**位置的****user_id**及其在 mongo 自己的 shell 上的相应**索引？**在这种情况下，结果将是：

 ****1.  user_id="用户 2"
2.  位置 = 570
3.  指数 = 2

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:14:31.730

对每个文档的数组使用[`aggregate`](http://docs.mongodb.org/manual/reference/method/db.collection.aggregate/)命令，然后通过以下方式生成文档：[`$unwind`](http://docs.mongodb.org/manual/reference/aggregation/unwind/)`log`[`$sort`](http://docs.mongodb.org/manual/reference/aggregation/sort/)`position`

```
db.test.aggregate({$unwind: '$log'}, {$sort: {'log.position': -1}}, {$limit: 1}) 
```****

# android - Android下线程通信的正确、高效的方式是什么？

> ID：13705754
> 
> 赞同：0
> 
> 时间：2012-12-04T14:59:36.717
> 
> 标签：android, multithreading

线程（服务内）在 Android 下进行通信的正确、高效的方式是什么？

我看过 Intents（序列化开销）、HandlerThreads 和 Loopers（捆绑开销）。

接收线程应该有（同步的）队列，可以向其中添加对象（在编译时已知的类型）。

我以前为 JavaME 编写过这样的功能，但我的印象是 Android 将使用编译时已知类型在线程之间进行通信的“标准”有效方式。

我错过了一些基本的东西吗？（我最近没有太多 JavaME/1.3 以外的 Java 经验。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:02:56.590

向线程发送消息的本机方式是`Handler`'s. 如果这不符合您的要求（哪些是？），您可以使用 Java 原语和/或 `java.util.concurrent`类自己实现一个线程消息传递系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:14:39.517

使用[Handlers](http://developer.android.com/reference/android/os/Handler.html)和[MessageQueues](http://developer.android.com/reference/android/os/MessageQueue.html)怎么样？

# sql-server - 插入失败。它与数据库中的身份范围检查约束冲突

> ID：13705762
> 
> 赞同：0
> 
> 时间：2012-12-04T14:59:49.390
> 
> 标签：sql-server, database-replication

嗨，我知道这已经发布过，但建议的修复对我不起作用。我有一个新创建的出版物，我将发布者范围大小设置为 10000，将订阅者范围设置为 10000。我将范围阈值百分比设置为 50。

但是，当我插入 7000 行时，我收到错误插入失败。它与数据库中的身份范围检查约束冲突

谁能给我任何关于如何解决这个问题的指示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T15:20:05.457

尝试一次插入 2-4 千条记录 - 这是最干净的方法。

否则，您需要开始更改范围大小、阈值百分比，并可能手动强制一个新的地址范围（这将浪费身份）。

# visual-studio-2010 - 关闭时没有 Visual Studio 保存提示

> ID：13705763
> 
> 赞同：2
> 
> 时间：2012-12-04T14:59:56.077
> 
> 标签：visual-studio-2010, save, prompt

最近我开始在 Visual Studio 2010 中遇到以下错误：

每当我关闭我的项目或解决方案时，我都不会收到“保存更改”提示，它只会自动保存脏文件。但是，我在单独关闭脏物品时仍然收到提示。有谁知道我可能搞砸了哪些设置？

另外：我没有使用源代码控制，并且刚刚尝试将所有环境设置重置为默认值，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:28:52.623

有**一些实用程序允许您对任何应用程序执行此操作**。例如，参见

[**检查此链接**](http://www.donationcoder.com/Software/Skrommel/index.html#NoClose)

我从[**这里得到这个**](https://superuser.com/questions/155622/prompt-if-i-really-want-to-close-visual-studio)

# git - 用 git 替换本地项目

> ID：13705767
> 
> 赞同：2
> 
> 时间：2012-12-04T15:00:22.233
> 
> 标签：git, replace, repository, pull

我在我的项目中做了一些更改，我不想保留这些更改。如何用我的队友上传到 GIT 服务器的项目替换整个项目。我不能拉，我明白了：“拉是不可能的，因为你有未合并的文件。请在工作树中修复它们，然后根据需要使用'git add/rm'来标记分辨率，或者使用'git commit -一个'。”

问题是，我不想提交对文件所做的任何更改，因为我担心它会覆盖我的队友编写的新功能。我不需要我对上传的文件所做的更改，我只想拥有新的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:36:11.237

要丢弃尚未提交的更改，请使用

```
git reset --hard 
```

如果您想使用 git 将其保存为草稿（不要在任何地方提交，而是将其保存在安全的地方以便在某些操作后返回），请使用`git stash`：

```
git stash
... do something on the git tree ...
git stash apply
... your changes is present again 
```

# android - 带有 Trigger.io 的 Android 上的全屏问题（强制横向）

> ID：13705772
> 
> 赞同：1
> 
> 时间：2012-12-04T15:00:39.107
> 
> 标签：android, fullscreen, trigger.io

我正在使用 Trigger.io 并且最近购买了三星 S3 (Android 4.1.1) 在此设备上进行测试时，我意识到状态栏没有隐藏，即使全屏语句在配置中（并且在 4.0 中的另一部手机设备上工作） .3)。我还在平板电脑 android 4.0.3 (Asus Tranformer Prime) 上看到了这个问题

（横向也是强制的）

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:55:53.357

这是我们对 holo 主题的支持引入的回归——修复将包含在平台版本 v1.4.23 中，将于 12 年 12 月中旬发布。

# android - 每次附加 Fragment 时是否需要重新初始化 Loader？

> ID：13705773
> 
> 赞同：2
> 
> 时间：2012-12-04T15:00:39.913
> 
> 标签：android, android-loadermanager, android-loader

我意识到，如果`Loader`已经在 a 中初始化`Fragment`并且`Fragment`已经添加到 中`FragmentManager`，那么`Loader` `onLoadFinished`每次附加片段时都会调用该方法，即使我没有明确调用`getLoaderManager().initLoader(0, null, this)`.

这是否意味着一旦 a`Loader`被初始化，除非重新创建它，否则我真的不需要再次初始化它`Fragment`？

# java - 如何大写Android EditText中的每个字母？

> ID：13705776
> 
> 赞同：25
> 
> 时间：2012-12-04T15:00:45.557
> 
> 标签：java, android, android-edittext

我有一个这样的editTexts数组：

```
 inputs[i] = new EditText(this);
        inputs[i].setWidth(376);
        inputs[i].setInputType(InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS);
        tFields.addView(inputs[i]); 
```

我希望每个字符都大写。现在，第一个单词的第一个字母是小写的，然后后面的所有字符都是大写的。我可以在用户输入完成后将其转换为大写，但这并不是我真正想要的。有没有办法让这些字段按照我想要的方式运行？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-19T15:01:35.667

您还需要告诉它来自“类”文本：

```
inputs[i] = new EditText(this);
inputs[i].setWidth(376);
inputs[i].setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS);
tFields.addView(inputs[i]); 
```

输入[类型](http://developer.android.com/reference/android/text/InputType.html)是[位掩码](http://en.wikipedia.org/wiki/Bitmask)。您可以通过放置 | 来组合标志。（管道）字符在中间，代表 OR 逻辑函数，即使在像这样的位掩码中使用它意味着“这个标志和那个另一个标志”。

（这个答案与 Robin 的答案相同，但没有“幻数”，这是您可以在代码中放入的最糟糕的事情之一。Android API 有常量，使用它们而不是复制值并冒最终破坏代码的风险。）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-03-16T14:32:34.540

这将使写入时所有字符都大写。

```
edittext.setFilters(new InputFilter[] {new InputFilter.AllCaps()}); 
```

原始答案[在这里](https://stackoverflow.com/a/25571410/5223160)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-28T15:11:44.600

我知道这个问题有点老了，但这里解释了如何以不同的方式做到这一点：

**在 XML 中应用大写**

将以下内容添加到 EditText XML：

```
android:inputType="textCapCharacters" 
```

**将大写字母作为唯一过滤器应用于 Java 中的 EditText**

在这里，我们将 UpperCase 过滤器设置为 EditText 的唯一过滤器。请注意，此方法会删除所有先前添加的过滤器。

```
editText.setFilters(new InputFilter[] {new InputFilter.AllCaps()}); 
```

**将大写字母添加到 Java 中 EditText 的现有过滤器**

要保留 EditText 已经应用的过滤器，比如 inputType、maxLength 等，您需要检索应用的过滤器，将大写过滤器添加到这些过滤器，并将它们设置回 EditText。这是一个示例：

```
InputFilter[] editFilters = editText.getFilters();
InputFilter[] newFilters = new InputFilter[editFilters.length + 1];
System.arraycopy(editFilters, 0, newFilters, 0, editFilters.length);
newFilters[editFilters.length] = new InputFilter.AllCaps();  
editText.setFilters(newFilters); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-04T15:16:03.043

只是使用`String.toUpperCase()`方法。

例子 ：

```
String str = "blablabla";
editText.setText(str.toUpperCase()); // it will give : BLABLABLA 
```

**编辑 ：**

将此属性添加到您的xml`EditText`中的标记：`layout`

```
 android:textAllCaps="true" 
```

或者：

如果您希望用户输入的任何内容都是大写的，您可以实现 a`TextWatcher`并使用`EditText` `addTextChangedListener`添加它，`onTextChange`方法上的 an 获取用户输入并将其替换为相同的大写文本。

```
editText.addTextChangedListener(upperCaseTextWatcher);

final TextWatcher upperCaseTextWatcher = new TextWatcher() {

public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
}

public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
    editText.setText(editText.getText().toString().toUpperCase());
    editText.setSelection(editText.getText().toString().length());
}

public void afterTextChanged(Editable editable) {
}

}; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-25T11:35:11.320

你可以试试这个：

```
android:inputType="textCapCharacters" 
```

它对我有用。=)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-13T08:10:51.713

要将每个句子的第一个单词大写，请使用：

`android:inputType="textCapSentences"`

要将每个单词的第一个字母大写，请使用：

`android:inputType="textCapWords"`

大写每个字符使用：

`android:inputType="textCapCharacters"`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-12T19:12:18.900

截至今天，其

**`android:inputType="textCapCharacters"`**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-25T12:24:21.980

您所要做的就是为 EditText 视图设置正确的输入类型：

```
editText.inputType == InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS 
```

作为替代方案，您可以使用 InputFilter。在这里，我创建了一个**Kotlin 扩展**：

```
fun EditText.allCaps() {
    val newFilters = this.filters.copyOf(this.filters.size + 1)

    newFilters[newFilters.size - 1] = InputFilter.AllCaps()

    this.filters = newFilters
} 
```

我更喜欢使用这两种方法。请注意 InputFilter 也适用于硬件键盘，另一方面 InputType 将仅对软键盘有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T15:25:10.573

这会起作用

```
 inputs[i] = new EditText(this);
    inputs[i].setWidth(376);
    inputs[i].setInputType(0x00001001);
    tFields.addView(inputs[i]); 
```

0x00001001 对应于“`textCapCharacters`常量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-18T06:26:07.683

尝试在您的 xml 中使用这一行代码：

```
android:capitalize="sentences" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-07T16:32:02.680

由于某种原因，添加 xml 在我的设备上不起作用。

我发现文本过滤器适用于大写，就像这样

```
 EditText editText = (EditText) findViewById(R.id.editTextId);

    InputFilter toUpperCaseFilter = new InputFilter() {
        public CharSequence filter(CharSequence source, int start, int end,
                                   Spanned dest, int dstart, int dend) {

            StringBuilder stringBuilder = new StringBuilder();

            for (int i = start; i < end; i++) {
                Character character = source.charAt(i);
                character = Character.toUpperCase(character); // THIS IS UPPER CASING
                stringBuilder.append(character);

            }
            return stringBuilder.toString();
        }

    };

    editText.setFilters(new InputFilter[] { toUpperCaseFilter }); 
```

# windows-8 - Windows 应用商店应用程序（Metro）在什么时候不能在 ARM 上运行？

> ID：13705781
> 
> 赞同：2
> 
> 时间：2012-12-04T15:01:12.487
> 
> 标签：windows-8, windows-runtime, arm

我发现最接近的是：[WinRT Metro 应用程序是否交叉兼容（x86/64 和 ARM）？](https://stackoverflow.com/questions/9654609/are-winrt-metro-apps-cross-compatible-x86-64-and-arm)

我还没有开发任何 Metro 应用程序，但我想了解的是，如果您正在开发 Metro 应用程序，您必须针对 WinRT（Windows 运行时）进行开发。这是构建 Metro 应用程序的唯一方法，不管你是用 JavaScript、C# 还是 C++ 来做的，都没有关系……所以它应该都可以在 ARM 上运行……是否有可能创建一个 Metro 应用程序不能在ARM上运行？

VLC 团队正试图在 Kickstarter 上筹集资金以开发适用于 Windows 8 Metro 的 VLC 播放器。

[http://www.kickstarter.com/projects/1061646928/vlc-for-the-new-windows-8-user-experience-metro](http://www.kickstarter.com/projects/1061646928/vlc-for-the-new-windows-8-user-experience-metro)

> 用于 Windows 的 VLC 媒体播放器目前安装在全球约 100,000,000 台设备上。现有版本在 Windows 8 的桌面模式下运行，并且仅适用于基于 Intel 的 PC。这个新端口将原生集成到新的用户体验中**，并且还将在后续版本中支持基于 ARM 的平板电脑**

因此，如果它们原生地与用户体验集成，即使其成为 Windows 8 应用程序，为什么它一开始就不能在 ARM 芯片上运行呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:23:22.413

当您构建 C# Metro 应用程序时，您可以简单地选择 Any CPU 作为目标平台（通常人们会这样做）并为所有三个平台构建单个包。但是，当您开发 C++ 应用程序时，您需要分别为每个平台构建一个包。这意味着您可以为 x86 和 ARM 构建应用程序，但不能为 x64 架构构建应用程序。您可以发布这样的应用程序，并且只有 x86 和 ARM 用户才能使用它。当然，所有三个平台的支持都是好事，但是您可以在仅为 x64 和 x86 构建的项目库中使用。这将阻止您创建应用程序的 ARM 版本，直到此类库的 ARM 端口可用。我不确定 VLC 团队正在使用什么库，但这种情况的可能性肯定存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:01:04.950

理论上，您可以（至少在 C# 和 C++ 程序中）调用“不受支持”的 Win32 API 函数。这意味着此功能很可能无法在 Windows RT 上运行。在大多数情况下，它们可以在完整的 Windows 8 上运行（尽管有些调用会导致异常）。一个例子是函数 GetVersionEx，它在完整的 Windows 下工作，但未能通过认证，很可能在 Windows RT 中不可用。

由于可以（但并不容易）在 Windows 8 上安装 Windows 应用商店应用程序跳过应用商店，因此有时使用不受支持的功能可能是有意义的。我怀疑是否可以在没有应用商店的情况下在 ARM 设备 (Windows RT) 上安装 Windows 应用商店应用程序。因为将应用程序放入应用商店需要获得无法在 ARM 设备上运行的 Windows 应用商店应用程序的认证是理论上的。假设该认证确保应用程序可以在 Windows RT 上运行，那当然是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:42:34.577

关于 VLC 项目，我假设他们有专门的解码器代码，使用汇编代码或其他需要调整的低级功能（可能是 GPU 加速）。

“普通”C++ 代码也应该在所有平台上编译，但正如@ie 所提到的那样。您必须为每个平台设置单独的配置。

# delphi - 如何在 firemonkey 中知道焦点在控件内？

> ID：13705786
> 
> 赞同：0
> 
> 时间：2012-12-04T15:01:24.630
> 
> 标签：delphi, focus, firemonkey

我正在开发带有新样式触发器“IsFocusInside”的 TPanel。当面板内的一个子控件具有焦点并且我们完全没有焦点时，它将触发。我如何知道内部控件何时聚焦以及何时没有聚焦？我不知道我的面板中有什么类型和多少控件。肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:36:57.780

您可以遍历控件（任何它们的子控件）并修补到 OnEnter（获得焦点）和 OnExit（失去焦点）事件。

# ruby - 升级没有 rvm 的 ruby 版本

> ID：13705789
> 
> 赞同：2
> 
> 时间：2012-12-04T15:01:35.560
> 
> 标签：ruby, version-control, version, versioning

我刚做了`apt-get install ruby.1.9.1`，安装成功。现在当我这样做时`ruby -v`，它仍然是 1.8.7。为什么不使用新安装的版本？我不知道为什么，但我无法通过谷歌找到任何关于如何在没有 rvm 的情况下管理 ruby​​ 版本的信息。我知道 rvm 很棒，但在这种情况下，它必须没有 rvm。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:59:29.150

这只是如何解决此问题的示例。您的系统上的路径和文件名可能不同，但您应该从这里了解：

```
# First locate the original ruby
> which ruby
/usr/bin/ruby   # <- Your path might be different

# Then locate ruby19
> which ruby19
/usr/bin/ruby19

# Move the old ruby out of the way
> mv /usr/bin/ruby /usr/bin/ruby_old

# Link ruby to the new ruby (ruby19)
# ln -s is used to create a new symbolic link. See "man ln" for more info.
> cd /usr/bin
> ln -s ruby19 ruby 
```

现在你应该有：

```
/usr/bin/ruby_old                 # The old executable
/usr/bin/ruby -> /usr/bin/ruby19  # The new link
/usr/bin/ruby19                   # The new executable 
```

**Note**: it's easy to break your system ruby if you're not careful using this method. That's why RVM is usually a better solution if you have the choice. You can leave a comment if something breaks, and I will try and improve the instructions.

* * *

## 回答 #2

> 赞同：-11
> 
> 时间：2012-12-04T15:09:19.520

最好通过 RVM 安装 Ruby，并通过 RVM 切换到某个版本，

```
rvm use ruby-1.9.2 --default 
```

# wpf - 当 Command.CanExecute 返回 false 时折叠超链接

> ID：13705792
> 
> 赞同：2
> 
> 时间：2012-12-04T15:01:43.660
> 
> 标签：wpf, xaml

简单的问题是：当绑定命令 .CanExecute 返回 false 时，如何隐藏超链接？

xml:

```
<TextBlock>
    <Hyperlink Command="{Binding IncludesCanExecuteCommand}">Link text</Hyperlink>
</TextBlock> 
```

编码：

```
...
private ICommand _includesCanExecuteCommand;
....
    _includesCanExecuteCommand = new RelayCommand(ExecuteTheCommand, CanExecuteTheCommand);
....

public ICommand IncludesCanExecuteCommand
{
    get
    {
        return _includesCanExecuteCommand;
    }
}

....

public bool CanExecuteTheCommand()
{
    return BooleanResult();
}

public void ExecuteTheCommand()
{
    DoSomeWork();
} 
```

如何设置文本块/超链接（或运行，如果需要）的样式，以便在 CanExecute() 函数返回 false 时链接折叠？我试过了：

```
<Hyperlink.Style>
    <Style TargetType="{x:Type Hyperlink}" BasedOn="{StaticResource DefaultHyperlinkStyle}">
        <Setter Property="TextBlock.Visibility" Value="Visible" />
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="TextBlock.Visibility" Value="Collapsed" />
            </Trigger>
        </Style.Triggers>
     </Style>
 </Hyperlink.Style> 
```

我还尝试将样式放在文本块上（无法访问超链接）和超链接内的 Run（没有可见性属性）。

感谢所有想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:42:48.927

I spent a lot of time looking at this today and nothing worked until I tried this. Basically the solution is to put the text inside the Hyperlink in a textblock and then set that's visibility using a BooleanToVisiblityConverter as the inner TextBlock becomes disabled when the hyperlink becomes disabled.

```
<UserControl.Resources>
    <converters:BooleanToVisibiltyConverter x:Key="BooleanToVisibiltyConverter" />
</UserControl.Resources>

<TextBlock >
    <Hyperlink Command="{Binding EditDetailsCommand}">
        <TextBlock
            Visibility="{Binding Path=IsEnabled
                , RelativeSource={RelativeSource Self}
                , Mode=OneWay
                , Converter={StaticResource BooleanToVisibiltyConverter}}">
        Edit Details 
        </TextBlock>
    </Hyperlink>                  
</TextBlock >

public class BooleanToVisibiltyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            throw new ArgumentNullException("value"); 

        if (!(value is bool))
            throw new ArgumentException("Expected type of value must be boolean");

        if (parameter != null && !(parameter is Visibility))
            throw new ArgumentException("Expected type of parameter must be Visibility");

        Visibility falseVisibility = Visibility.Collapsed;

        if (parameter != null)
        {
            falseVisibility = (Visibility)parameter;

            if (falseVisibility == Visibility.Visible)
            {
                throw new ArgumentException("Cannot pass visible to expected false value parameter.");
            }
        }

        return (bool)value ? Visibility.Visible : falseVisibility;  
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            throw new ArgumentNullException("value"); 

        if (!(value is Visibility))
            throw new ArgumentException("Expected type of value must be Visibility");

        if (value == null)
        {
            throw new ArgumentNullException("value"); 
        }

        Visibility v = (Visibility)value;

        return v == Visibility.Visible;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:27:44.807

超链接上没有 TextBlock.Visibility 的附加属性。将样式直接放在超链接的包含文本块中，这应该解决可见性。

如果没有，则创建一个[bool 到可见性转换器](https://www.google.com/search?q=bool%20to%20visibility%20converter%20wpf)并将转换器设置在 TextBlock 上以获得可见性；并将转换器绑定到 CanExecuteTheCommand 属性。

应该注意的是，如果没有在 CanExecuteTheCommand 属性上引发 Property Changed 通知，那么转换器只会在第一次加载视图时进行评估；在那之后，它将变得陈旧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T22:47:53.707

命名超链接也很有效，并为您提供了一些灵活性。此外，您可以使用内置的`BooleanToVisibilityConverter`.

```
<UserControl.Resources>
    <BooleanToVisibilityConverterx:Key="BooleanToVisibilityConverter" />
</UserControl.Resources>

<TextBlock Visibility="{Binding Path=IsEnabled,
                                ElementName=Linky,
                                Mode=OneWay,
                                Converter={StaticResource BooleanToVisibilityConverter}}">>
    <Hyperlink x:Name="Linky" Command="{Binding EditDetailsCommand}">
        <Run Text="Edit Details"/>
    </Hyperlink>                  
</TextBlock > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T13:46:37.617

所以这里似乎有两个问题..

在调用 IncludesCanExecuteCommand.RaiseCanExecuteChanged() 后，我可能很想设置一个属性，这将导致命令重新评估其 CanExecuteCommand..

将超链接放在面板中，然后使用转换器将可见性绑定到 1.) 中的属性，以返回有效的 Visiblility 枚举，例如 Collapsed、Visible 等。

所以为了清楚起见 - 像

```
<StackPanel Visibility="{Binding IsHyperlinkVisible, Mode=TwoWay,     Converter=boolToVisibilityConverter}">
  <TextBlock>
    <Hyperlink Command="{Binding WhateverTheHyperlinkDoesCommand}">Link text</Hyperlink>
</TextBlock>
</StackPanel> 
```

并且 viewmodel 看起来像这样（如果 viewmodelbase 实现了 NotifyPropertyChanged 的​​某个版本......

```
 public class ViewModel : NotificationViewModelBase 
 {
        public ViewModel()
        {
            this.WhateverTheHyperlinkDoesCommand =
                new DelegateCommand<object>(
                    this.ExecuteWhateverTheHyperlinkDoesCommand, this.CanWhateverTheHyperlinkDoesCommand);
        }

        private void ExecuteWhateverTheHyperlinkDoesCommand(object arg)
        {
            this.SomeOtherProperty = true;            }

        private bool someOtherProperty;

        public bool SomeOtherProperty
        {
            get
            {
                return this.someOtherProperty;
            }

            set
            {
                if (this.ChangeAndRaisePropertyChanged(
                    () => this.SomeOtherProperty, value, ref this.someOtherProperty))
                {
                    this.WhateverTheHyperlinkDoesCommand.RaiseCanExecuteChanged();
                }
            }
        }

            private bool isHyperlinkProperty;

        public bool IsHyperlinkProperty
        {
            get
            {
                return this.isHyperlinkProperty;
            }

            set
            {
                this.ChangeAndRaisePropertyChanged(() => this.IsHyperlinkProperty, value, ref this.isHyperlinkProperty);
            }
        }

        private bool CanWhateverTheHyperlinkDoesCommand(object obj)
        {
            // So based on a certain condition - lets say some other property

            if (this.SomeOtherProperty == false)
            {
                this.IsHyperlinkProperty = true;
                return false;
            }

            this.IsHyperlinkProperty = false;
            return true;
        }

        public DelegateCommand<object> WhateverTheHyperlinkDoesCommand { get; set; } 
```

} }

# xcode - 如何在 iOS6 上关闭带有 Storyboard 的 iPad Popover？

> ID：13705793
> 
> 赞同：0
> 
> 时间：2012-12-04T15:01:54.300
> 
> 标签：xcode, ipad, ios6, uipopovercontroller

我已经实现了一个从按钮启动的弹出框。弹出窗口显示。我已经实现了一个按钮，当按下它时应该关闭弹出窗口。但是，它没有，我不知道为什么。

.h 文件：

```
#import <UIKit/UIKit.h>

@interface ComposeViewController : UIViewController <UIPopoverControllerDelegate>

@property (strong, nonatomic) UIPopoverController *popover;

- (IBAction)saveButton:(id)sender;

@end 
```

.m 文件：

```
- (IBAction)saveButton:(id)sender {

NSLog(@"Save Button");

    [_popover dismissPopoverAnimated:YES];
}
@end 
```

如果有人有任何想法为什么，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:58:23.197

弹出框应由呈现控制器解除。但是，如果您的弹出框设置为情节提要中的模态视图，您可以在“弹出框”控制器中的 IBAction 中使用以下内容： [self dismissViewControllerAnimated:YES completion:nil];

而且，我确实在您的代码中注意到了一些东西：您正在使用“UIPopoverControllerDelegate”......这是在您的弹出窗口中吗？它应该在您呈现的 ViewController 中。同样... IBAction 应该在您的弹出框控制器中。

# ios - 无背景图片的 UITextView 特效

> ID：13705794
> 
> 赞同：0
> 
> 时间：2012-12-04T15:01:55.237
> 
> 标签：ios, xcode, cocoa-touch, uitextview

我希望我的 UITextView 具有附加图片中的特殊阴影边框。

![在此处输入图像描述](../Images/171359bde5984ca44c5eb7c5249b28e1.png)

如何在不定位背景图像的情况下在 xcode 4.4 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:35:51.697

我不确定这是否只能通过自定义绘图（即 Quartz/Core Graphics）。如果可能的话，我仍然会使用预渲染的图像。看看[这篇文章](https://stackoverflow.com/questions/1824463/how-to-style-uitextview-to-like-rounded-rect-text-field)。

但这可能接近预期的效果：

```
 [yourTextView.layer setBackgroundColor: [[UIColor whiteColor] CGColor]];
    [yourTextView.layer setBorderColor: [[UIColor grayColor] CGColor]];
    [yourTextView.layer setBorderWidth: 1.0];
    [yourTextView.layer setCornerRadius: 8.0f];
    [yourTextView.layer setMasksToBounds: YES]; 
```

不要忘记导入：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:47:41.820

这是我为实现外观所做的工作：

*   创建一个容器视图，例如 m 宽乘 n 高。将其设置为剪辑子视图，并给它的 CALayer 一个角半径

*   使用矩形视图创建文本框，设置角半径，并使其原点。y 是一个小数字 - 比如说 8。调整高度，使其偏移量为 2 倍

*   创建一个使用 CAGradient 层的 UIView 子类，并让渐变使用从顶部开始的线性渐变，并随着 y 的增加而变浅。

*   如上所述，创建另一个渐变视图，其中渐变从底部开始并向上移动（白色），或者只使用纯白色视图

*   将第一个渐变视图添加到容器视图，然后是第二个，然后是文本框。

第二个渐变视图需要淡化为清晰的颜色，这样它就不会阻挡它下面的视图（您可以玩弄两个“效果”视图的顺序。

# magento - magento 只添加一个数量

> ID：13705797
> 
> 赞同：0
> 
> 时间：2012-12-04T15:02:08.967
> 
> 标签：magento

[例子](http://www.amishfoods.com/fruits/jam-sampler)

无法想象是什么原因造成的——这里有一些自定义模板代码，但我没有弄乱任何我想象的可能会影响它的东西。

有任何想法吗？

顺便说一句，这没有区别[数量字段不起作用](https://stackoverflow.com/questions/2958750/magento-quantity-field-doesnt-work)，我也只是将 addtocart.phtml 文件滚回 magento 基础 - 仍然失败。

有没有我错过的某种配置，我关闭了库存。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:22:37.343

问题似乎是“表单”元素在“数量”输入框之前关闭。

要解决此问题，请编辑模板文件以在“添加到购物车”按钮后结束“表单”元素。

ps它仍然添加到购物车的原因是因为按钮运行了一些处理它的JS（但没有抓住数量输入框）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T14:46:03.693

这是因为语言环境配置失败。请使用美国作为当地国家并将翻译更改为该文件夹。

# cakephp - CakePHP This->render 不加载控制器

> ID：13705799
> 
> 赞同：1
> 
> 时间：2012-12-04T15:02:13.117
> 
> 标签：cakephp

我有几个在很多地方使用的视图。视图是相同的，但控制器不一样，所以我将 .ctp 文件放在 Elements 目录中，并在不同的控制器中使用以下代码。

```
$this->render('/Elements/overview'); 
```

但是，我也有一些 php 代码需要在每次视图加载时执行。所以我想只在 Contollers 目录中创建一个控制器，命名为 Elements 目录中的视图 (overviewController.php)，但不幸的是，该控制器中的代码没有执行。

有没有办法做到这一点，还是我这样做完全错了？

**编辑：**好的，根据 Dave 的建议，我将 overview.ctp 文件复制到了一个名为 Global 的新目录中。将控制器重命名为 GlobalController.php，将类重命名为 GlobalController 并更改 $this->render。但是，视图仍然被加载，并且我用来渲染视图的控制器被加载，但 GlobalController 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:14:32.620

在整个视图中使用元素是不正常的。你最好使用实际的视图文件。元素是在视图中使用的更小的代码块。

**例子：**

创建一个“OverviewsController.php”（注意它是 PluralController.php）。在其中，创建一个函数：

```
public function overview() {

} 
```

要访问该功能，请使用 url： `www.yourdomain.com/overviews/overview`

它的视图文件应该在`Views/Overviews/overview.ctp`

然后，如果您计划在许多地方使用该元素，则可以将其包含在视图中。

**编辑：**

您发布的代码没有任何问题，但您不需要渲染元素 - 只需渲染一个视图：

```
public function anything() {
    $this->render('/Overviews/overview');
} 
```

# swing - 在 Java 组件树中重新设置 X-Window 并将其插入

> ID：13705808
> 
> 赞同：0
> 
> 时间：2012-12-04T15:02:44.083
> 
> 标签：swing, jframe, x11, reparenting

我必须在 Java 框架（来自 Java 应用程序）上重新设置 X-Window（来自 C++ 应用程序）。这个 X-Window 必须插入到 Java 组件树中，这样 z-Order 才会得到尊重。为此，我需要了解：

1.  首先，Java 应用程序创建的组件树与匹配的 X-Window 树之间的确切关系。
2.  其次，由于reparent，我是否可以在Java树上插入X-Window以及在何处插入。
3.  第三，处理窗口/组件堆栈的方式：哪个窗口/组件将在另一个之上。

几周的研究......但我没有找到关于这些问题的任何资源......

**关于问题 1**。据我了解，如果我创建一个带有组件和其他两个框架的 java 主框架，则 Swing 树应该如下所示：

```
 Frame0
                                   :
                                   :-------------------------------
                                   :               :              :
                               Component         Frame1         Frame2
                                   :
                     Component-----------Component 
```

关于 X-Window 树：每个 Frame 都是一个重量级组件，因此每个 Frame 都有一个 X-Window ID。所以 X-Window 树可能看起来像这样：

```
 Frame0
                                   :
                         Frame1---------Frame2 
```

**关于问题 2**。我的问题是：如果我在 Swing 树的中间插入一个 Applet（所以是一个重量级组件）以及其他组件会发生什么？X 窗口会是什么样子？我希望通过这种方式，我可以在 Java 应用程序上重新创建一个 X-Window，并且这个 X-Window 将被插入到 Java 树中。

**关于问题 3**。即使我可以将 X-Window 重新设置为 / 插入到 Java 应用程序中，我也不确定是否会尊重 z 顺序。事实上，我做了一个试验，X-Window 已经出现在 Java Frame 的所有组件之上。我不确定了解窗口/组件堆栈的处理方式及其与 java 和 X-Window 树的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:46:13.667

诚实披露——我做这种事情至少已经十二年了。因此，将其视为“物有所值”。

首先，树中的每个 Swing 对象在 Swing 组件树的上层都有一个重量级容器——即使它只是最外层的框架。Swing 对象只是 XWindow 表面上的逻辑绘图区域。

**问题 1：**如果 Frame1 和 Frame2 嵌入在 Frame0 中，您在第一种情况下的答案是正确的。否则它们是独立的 XWindows。

**问题 2：**当您在 Swing 树中插入一个新的重量级组件时，您的新组件将作为 XWindow 的新 XWindow 组件子级添加，其中包含它所添加到的 Swing 组件的绘图表面。这是我记忆最模糊的部分答案。

**问题3：（问题**的实质）。XWindow 系统首先决定在每个点上哪些 XWindow 窗口是可见的。然后，在每个 XWindow 内，而不是跨 XWindows，Swing 在该区域中绘制相应的 Swing 子树。更准确地说，Java 在匹配的 XWindow 画布上为每个重量级组件绘制 Swing 子树。然后，XWindow 服务器仅根据 XWindow 树确定这些画布的哪些部分在每个点上是可见的。

因此，如果您在 Frame0 中有一些 Swing 对象，它比 Frame1 中使用 z 顺序的任何东西都更靠近查看器，但它与 Frame1 重叠，则无关紧要。XWindow 排序将获胜，并且将绘制 Frame1 中的 Swing 组件。

注意 - 一旦你理解了这一点，你就可以使用它来提供 Swing 对象的“硬”剪辑。

希望这可以帮助。

# ruby-on-rails - ruby on rails 中的belongs_to 到belongs_to 的关系

> ID：13705817
> 
> 赞同：0
> 
> 时间：2012-12-04T15:03:12.063
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在rails中的两个模型之间有一个belongs_to到belongs_to的关系。我有模型用户和模型启动

模型用户是一个设计模型（gem devise）。

这是我的代码。

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :startup_name
  # attr_accessible :title, :body

  belongs_to :startup
end 
```

这是我的模型 Startup

```
class Startup < ActiveRecord::Base
  attr_accessible :angelist, :capitalraise, :category, :country, :currentlocation, :description, :facebook, :linkedin, :name, :round, :startupchile, :twitter, :user_id
  has_one :entrepreneus, dependent: :destroy

  belongs_to :user
end 
```

同样在我的架构中，我在 Startup 表中添加了“user_id”。

这是添加的 add_index

```
 add_index "startups", ["user_id"], :name => "index_startups_on_user_id" 
```

（显然我做了迁移）

当我在第一时间创建 Startup 时，创建没有 user_id 的对象，但使用 update_attributes 在对象中添加 user_id。（在启动控制器中）。这是代码

```
def create
    @startup = Startup.new(params[:startup])
    @startup.update_attributes(:user_id => current_user.id )

    respond_to do |format|
      if @startup.save
        format.html { redirect_to @startup, notice: 'Startup was successfully created.' }
        format.json { render json: @startup, status: :created, location: @startup }
      else
        format.html { render action: "new" }
        format.json { render json: @startup.errors, status: :unprocessable_entity }
      end
    end
  end 
```

在控制台中，我执行以下操作（rails c --sandbox）

```
u =  User.first (retrieve the user perfectly, the id is equal to 1)

u.startup (retrieve null) 
```

但如果你这样做：

```
s = Startup.find_by_user_id(1) // retrieve the data 
```

为什么我无法使用 u.startup 检索与启动相关的数据？

任何的想法 ？。谢谢

PDT：对不起，我的英语还不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:06:40.453

如果它是两个模型之间的一对一关系[`has_one`](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)，则必须在表中没有外键的一侧使用。所以在这种情况下，而不是：

```
belongs_to :startup 
```

你所要做的：

```
has_one :startup 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:07:14.840

我是 Rails 的新手，所以如果我错了，有人会纠正我，但我认为你不能拥有 2 个彼此“属于”的模型。1 必须属于，1 必须具有 has_many 或 has_one （编辑：根据评论，它应该是`:has_one`.

我认为这可能是您正在寻找的：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :startup_name
  # attr_accessible :title, :body

  has_one :startup # not has_many :startups
end

class Startup < ActiveRecord::Base
  attr_accessible :angelist, :capitalraise, :category, :country, :currentlocation, :description, :facebook, :linkedin, :name, :round, :startupchile, :twitter, :user_id
  has_one :entrepreneus, dependent: :destroy

  belongs_to :user
end 
```

# ios - iOS录制时如何将PCM缓冲区实时转换为AAC数据？

> ID：13705819
> 
> 赞同：2
> 
> 时间：2012-12-04T15:03:17.627
> 
> 标签：ios, xcode, audio, core-audio, audiounit

我正在使用 Remote.IO 从 PCM 获取音频缓冲区，但原始数据太大而无法通过蜂窝网络（3G 网络）发送到远程端。我确实参考了一些文章，但其中大多数建议将**文件**转换为其他格式文件。

有没有办法将音频缓冲区**实时**转换为 AAC 编码数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:58:24.183

您确实可以将音频缓冲区直接保存为 AAC 格式。

在设置 ASBD 时，像这样设置

```
AudioStreamBasicDescription audioFormat;
audioFormat.mFormatID = kAudioFormatMPEG4AAC; 
```

`kAudioFileM4AType`像这样调用 ExtAudioFileCreateWithURL 时指定：

```
err = ExtAudioFileCreateWithURL((CFURLRef)audioFileURL,
                             kAudioFileM4AType,
                             &audioFormat, 
                             NULL,
                             kAudioFileFlags_EraseFile,
                             &outFile); 
```

您还需要像这样设置编解码器。

```
UInt32 codecManf = kAppleSoftwareAudioCodecManufacturer;
ExtAudioFileSetProperty(outFile, kExtAudioFileProperty_CodecManufacturer, sizeof(UInt32), &codecManf); 
```

这应该可以帮助您使 AAC 编码正常工作。

# c# - 一个字段的多个文本框

> ID：13705820
> 
> 赞同：0
> 
> 时间：2012-12-04T15:03:18.400
> 
> 标签：c#, asp.net-mvc

如果我有 3 个需要附加在一起的 3 个字段的文本框，你会怎么做？

例如：

```
@Html.TextBoxFor(model => model.PhoneNumber, new { @id = "PhoneNumber1"})
@Html.TextBoxFor(model => model.PhoneNumber, new { @id = "PhoneNumber2"})
@Html.TextBoxFor(model => model.PhoneNumber, new { @id = "PhoneNumber3"}) 
```

但是当我在控制器中调用 model.PhoneNumber 时，我只得到第一个文本框值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:16:34.217

您的模型中需要多个电话号码，`phoneNumber1, phoneNumber2, phoneNumber3`因为您只能将一种类型的一个元素绑定到模型。

或者，您可以使用 FormCollection

使用标准导入而不是模型绑定

```
<input type="text" value="" name="phoneNumber" id="phoneNumber1" />
<input type="text" value="" name="phoneNumber" id="phoneNumber2" />
<input type="text" value="" name="phoneNumber" id="phoneNumber3" /> 
```

**然后在你的控制器中**

```
[HttpPost]
public ActionResult Index(MyModel model, FormCollection frm){

//get elements from form
String[] numbers = frm["phoneNumber"].Split(',');

// you will have your 3 numbers

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T15:11:48.630

Javascript黑客：

```
<script type="text/javascript">

$('#formID').submit(function() {
    $('#PhoneNumber1').val($('#PhoneNumber1').val() + ', ' + $('#PhoneNumber2').val() + ', ' + $('#PhoneNumber2').val());
});

</script> 
```

# jquery - 在 Jquery UI Accordion 中显示不同的 MVC3 视图

> ID：13705821
> 
> 赞同：0
> 
> 时间：2012-12-04T15:03:23.680
> 
> 标签：jquery, asp.net-mvc-3, accordion

真的不知道该怎么办了。

我有一个名为 Application 的控制器，它有四 (4) 个公共方法。我想要的只是加载一个带有四 (4) 个部分的 Jquery Accordion，每个部分用于一个公共方法。在我的手风琴中，我希望默认情况下第 2,3 和第 4 部分将被禁用。当用户填写部分中的表格并单击下一步时，手风琴的第二部分变得可见。第 3 节和第 4 节也是如此。我的应用程序控制器看起来像，

```
public ActionResult Verify()
        {           
            return View();
        }
public ActionResult Credentials()
        {           
            return View();
        }
public ActionResult SelectJob()
        {           
            return View();
        }
public ActionResult SendApplication()
        {           
            return View();
        } 
```

是否可以将不同的返回值从一个控制器的不同方法发送到同一个视图（）？如何？

非常感谢您提供任何解决方案或一步一步...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:21:45.230

**编辑**

我根据您的需要更改了代码。我还包括了最新版本的 jQuery 和 jQuery UI 以使其正常工作。

* * *

完全答案测试。我可以为您提供漏洞解决方案，但我无法在此处上传任何文件。如果您为我提供上传位置，我无法为您放置整个解决方案。

**控制器/家庭控制器**

```
using System.Web.Mvc;

namespace Accordion.Controllers
{
    public class HomeController : Controller
    {
        [HttpGet]
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

        [HttpGet]
        public ActionResult Verify()
        {
            return PartialView("_Verify");
        }

        [HttpGet]
        public ActionResult Credentials()
        {
            return PartialView("_Credentials");
        }

        [HttpGet]
        public ActionResult SelectJob()
        {
            return PartialView("_SelectJob");
        }

        [HttpGet]
        public ActionResult SendApplication()
        {
            return PartialView("_SendApplication");
        }
    }
} 
```

**视图/主页/Index.cshtml**

```
<div id="accordion">
    <h3>Verify</h3>
    <div>
        @Html.Partial("_Verify")
    </div>

    <h3>Credentials</h3>
    <div>
        @Html.Partial("_Credentials")
    </div>

    <h3 class="disabled">SelectJob</h3>
    <div class="dynamic-content" data-action="SelectJob"></div>

    <h3 class="disabled">SendApplication</h3>
    <div class="dynamic-content" data-action="SendApplication"></div>
</div>

<script type="text/javascript">
    jQuery(function () {
        var $accordion = $('#accordion')

        $accordion.accordion({
            collapsible: true,
            animated: false,
            autoHeight: false,
            active: false
        });

        $accordion.on('accordionbeforeactivate', function (event, ui) {
            if (ui.newHeader.hasClass('disabled')) {
                return false;
            };
        });

        $accordion.on('accordionactivate', function (event, ui) {

            if (ui.newHeader.length > 0
             && ui.newPanel.html().length == 0
             && ui.newPanel.hasClass('dynamic-content') == true) {
                var action = ui.newPanel.data('action');

                $.ajax({
                    url: '/Home/' + action,
                    type: 'GET',
                    dataType: 'html',
                    success: function (htmlCodePartialView) {
                        ui.newPanel.html(htmlCodePartialView);
                    }
                });
            };
        });

        $accordion.on('click', '.next', function () {
            var $button = $(this);
            var $nextHeader = $button.closest('.ui-accordion-content').next()
            $nextHeader.removeClass('disabled').click();
        });
    });
</script> 
```

**视图/主页/_Verify.cshtml**

```
This is the view 'Verify'. 
```

**视图/主页/_Credentials.cshtml**

```
This is the view 'Credentials'.<br />
<button type="button" class="next">Next</button> 
```

**视图/主页/_SelectJob.cshtml**

```
This is the view 'SelectJob'.<br />
<button type="button" class="next">Next</button> 
```

**视图/主页/_SendApplication.cshtml**

```
This is the view 'SendApplication'. 
```

**视图/_Shared/_Layout.cshtml**

```
 <!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
</head>

<body>
    <div class="page">

        <div id="header">
            <div id="title">
                <h1>My MVC Application</h1>
            </div>

            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>

            <div id="menucontainer">

                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                </ul>

            </div>
        </div>

        <div id="main">
            @RenderBody()
            <div id="footer">
            </div>
        </div>
    </div>
</body>
</html> 
```

解决方案现在看起来像这样：

![](../Images/8e04255372302651ec3f64b507c070fa.png)

# jquery - 来自另一个 fancybox 的 Fancybox 画廊 - 显示问题

> ID：13705831
> 
> 赞同：1
> 
> 时间：2012-12-04T15:03:44.663
> 
> 标签：jquery, fancybox, fancybox-2

我正在建立一个画廊，但我遇到了一个我完全不知道如何解决的小问题。这是我构建项目的方式：

*   单击缩略图会启动一个标准的内联花式框，其中包含一些信息
*   在每个内联花式框内，我都有一个花式框图像库的手动触发器，如下所示：

```
<a id="galerie'.$projet->id.'" href="#" onclick="$(\'a#proj'.$projet->id.'\').eq(0).trigger(\'click\'); return false;"><img src="img/ico_img.png" alt="images"> Galerie d\'images</a> 
```

一切正常（您可以在我的[开发网站](http://www.1tuitif.com/lanton/)上查看），除了 2 个项目，它们是唯一在其图库中只有**1 个图像**的项目：它们的图像显示在我的视口顶部，并且比其他项目小得多（参见“Quartiers nords de Valenton”和“Complexe sportif de l'aviation”）。我不知道这些项目发生了什么，以及如果我显示一张图片，为什么我的fancybox 画廊会损坏......

这是我的代码：

```
echo '
<div class="centreur">
<div class="wrapper">
<span class="thumb"><a href="#info'.$projet->id.'" class="fancybox-info" title=""><img class="thumbnail" src="img/projets/'.$image0['id'].'-'.$image0['projet'].'.jpg" alt="'.$projet->titre.'"/></a></span>
<div class="caption">'.$projet->titre.'</div>
</div>
<div class="hidden">
<div id="info'.$projet->id.'" style="min-width:400px;max-width:400px;" class="descrframe">
<h2>'.$projet->titre.'</h2>'.$prix.'
<div>
<center><img class="firstslide" src="img/projets/'.$image0['id'].'-'.$image0['projet'].'.jpg" alt="'.$projet->titre.'"/></center>
</div>
<div class="linkstyle"><a id="galerie'.$projet->id.'" href="#" onclick="$(\'a#proj'.$projet->id.'\').eq(0).trigger(\'click\'); return false;"><img src="img/ico_img.png" alt="images"> Galerie d\'images</a></div>
<table class="transtable"><tbody>
'.$ville.$pays.$maitrise.$equipe.$mandataire.$cout.$superficie.$date.'
</tbody></table>
</div>';
$i = 0;
foreach($images as $image){
$galid = $i == 0 ? 'id="proj'.$projet->id.'"' : '';
echo '<a href="img/projets/'.$image->id.'-'.$image->projet.'.jpg" class="fancybox-thumb" rel="proj'.$projet->id.'" title="'.$image->credit.'" '.$galid.'></a>';
$i++;
}
echo '</div></div>';
} 
```

这是我的fancybox配置：

```
$(".fancybox-thumb").fancybox({
    prevEffect  : 'elastic',
    nextEffect  : 'elastic',
    openEffect  : 'fade',
    closeEffect : 'fade',
    margin      : [120,50,500,50],
    padding     : [0,0,0,0],
    loop        : false,
    maxWidth    : 900,
    maxHeight   : 600,
    topRatio    : 0.5,
    openOpacity : true,
    closeOpacity: true,
    beforeShow: function(){
        $.fancybox.wrap.bind("contextmenu", function (e) {
                return false;
        });
        }
    helpers : {
        title : {
            type : 'outside'
        },
        overlay : {
            opacity : 0.9,
            css : {
                'background-image' : 'url(img/pattern.png)',
                'background-color' : 'rgba(0,0,0,0.8)'
            }
        },
        thumbs  : {
            width   : 50,
            height  : 50,
            position: 'bottom'
        }
    }
});

$(".fancybox-info").fancybox({
    prevEffect  : 'elastic',
    nextEffect  : 'elastic',        
    openEffect  : 'fade',
    closeEffect : 'fade',
    margin      : [120,50,50,50],
    padding     : [0,0,0,0],
    loop        : false,
    maxWidth    : 900,
    maxHeight   : 600,
    topRatio    : 0.5,
    openOpacity : true,
    closeOpacity: true,
    beforeShow: function(){
        $.fancybox.wrap.bind("contextmenu", function (e) {
                return false;
        });
        },
    helpers : {
        overlay : {
            opacity : 0.9,
            css : {
                'background-image' : 'url(img/pattern.png)',
                'background-color' : 'rgba(0,0,0,0.8)'
            }
        }
    }
}); 
```

如果这很重要，我会使用 fancybox v2.1.3 和 jquery v1.7.2。

任何帮助将不胜感激，因为我不知道在哪里可以解决这种奇怪的行为！提前致谢！克普切

PS：我是法国人，所以请原谅我糟糕的英语:)

# c# - 复制列表中的对象

> ID：13705839
> 
> 赞同：0
> 
> 时间：2012-12-04T15:04:06.893
> 
> 标签：c#, list

如何复制（并插入）列表中的最后一个对象。

```
public class MyObject
{
    public string first {get;set;}
    public string second {get;set;}
}

List<MyObject> list = new List<MyObject>();
list.Add(new MyObject{first = "one", second = "two"});
list.Add(new MyObject{first = "here", second = "there"});
list.Add(new MyObject{first = "car", second = "plane"});

MyObject newObj = new MyObject();
list.Add(newObj); 
```

似乎列表中的最后两个对象是对同一对象的引用。如何创建一个仍然是列表中最后一个对象的副本的新对象？

**编辑** 对于这个例子，我不应该简化我的问题和类（实际上不是 MyObject）。它实际上更大，有更多的子对象和列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:07:07.147

有两种常见的方式：

（1）为MyObject类编写一个*Copy Constructor*，并用它来制作对象的副本，然后插入副本。

(2) 或者为 MyObject 类编写一个*Clone*方法，并使用该方法进行复制，然后插入该副本。

但是，在您提供的代码中，您没有复制任何内容，也没有在列表中插入对现有对象的引用。

这是一个示例，您可以这样做：

```
public class MyObject
{
    public string first
    {
        get;
        set;
    }
    public string second
    {
        get;
        set;
    }

    public MyObject DeepClone()
    {
        return new MyObject{ first = this.first, second = this.second;}
    }
}

// Then you can do this:

List<MyObject> list = new List<MyObject>();
list.Add(new MyObject{first = "one", second = "two"});
list.Add(new MyObject{first = "here", second = "there"});
list.Add(new MyObject{first = "car", second = "plane"});

list.Add(list[list.Count-1].DeepClone()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:05:31.403

他们不是，你有四个`MyObject`，都不同。

如果要比较对象，则应根据值定义 equals 方法，如果这些是值对象。否则适当地定义等于。

读这个：

[http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

**编辑**问题后编辑（我可以发誓它已被编辑！）：

您应该编写一个接受另一个`MyObject`作为参数并复制值的构造函数。

由于字符串是不可变的，因此复制对它们的引用是安全的（而不是尝试复制字符串）。当您更改对象上的字符串值时`a`，不会影响对象`b`。

顺便说一句，`MyObject`不是一个好名字的班级！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:07:18.007

你正在进入克隆、浅拷贝和深拷贝的浑水。但是对于这样一个简单的类，您应该可以：

```
var newObj = new MyObject();
newObj.first = list[3].first;
newObj.second = list[3].second;

list.Add(newObj); 
```

这只是因为 first 和 second 是字符串，因此分配不是通过引用。

此外，查看您当前的代码，您的列表将有 4 个不同的“MyObject”实例，最后一个实例没有任何“第一”或“第二”属性初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:08:15.590

如果您没有覆盖，则没有神奇的方法可以复制对象`Clone`。但这很简单：

```
MyObject last = list.Last();
list.Add(new MyObject{first = last.first, second = last.second}); 
```

# validation - 验证错误：值在级联 h:selectOneMenu 时无效

> ID：13705843
> 
> 赞同：1
> 
> 时间：2012-12-04T15:04:18.540
> 
> 标签：validation, jsf-2, selectonemenu

我有

> j_idt7:city：验证错误：值无效

切入正题，ManagedBean 代码：

```
 //few imports here
 @ManagedBean
 @SessionScoped
 public class CountriesAndCities implements Serializable{
 private List<SelectItem> countries;
 private List<SelectItem> cities;
 private  Map<String,List> m;
 private String selectedCountry;

 public String getSelectedCountry() {
return selectedCountry;
 }

 public void setSelectedCountry(String selectedCountry) {
this.selectedCountry = selectedCountry;
 }

 public CountriesAndCities(){
countries = new ArrayList<SelectItem>();
cities = new ArrayList<SelectItem>();
m = new HashMap<String,List>();
m.put("France", Arrays.asList("paris","marseille"));
m.put("England", Arrays.asList("Munchester","liverpoor"));

 }

 public  List<SelectItem> getCountries(){   
cities.removeAll(cities);
countries.removeAll(countries); 
countries.add(new SelectItem("select country"));
for(Map.Entry<String, List> entry: m.entrySet()){
    countries.add(new SelectItem(entry.getKey()));
    }

return countries;
 }
 public List<SelectItem> getCities(){   
for(Map.Entry<String, List> entry: m.entrySet())
      {if(entry.getKey().toString().equals(selectedCountry)){
        cities.addAll(entry.getValue());
        break;
    }
}
return cities;
 }
 public void checkSelectedCountry(ValueChangeEvent event){
selectedCountry = event.getNewValue().toString();   
 } 
```

这是我的 .xhtml 的片段：

```
 <h:selectOneMenu immediate="true" value="#{countriesAndCities.selectedCountry}" 
 onchange="submit()" valueChangeListener="#{countriesAndCities.checkSelectedCountry}">
 <f:selectItems value="#{countriesAndCities.countries}"></f:selectItems>
 </h:selectOneMenu>
 <br/>
 <h:selectOneMenu id="city">
 <f:selectItems value="#{countriesAndCities.cities}"></f:selectItems>
 </h:selectOneMenu>     
 </h:form> 
```

代码做了应该做的事情，但是我在第一行得到了上面提到的错误，只有当我点击英格兰并选择国家选项时，我不知道为什么，我在 Ajaxized 代码中编写了相同的任务，它工作得很好, 任何 手 都会 心存感激 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T18:44:27.180

当列表中任何可用项目的选定项目测试未返回`Validation Error: Value is not valid`时，将引发错误。所以，它基本上有以下两个原因：`equals()``true`

1.  `equals()`项目值类型的方法丢失或损坏。
2.  提交期间可用项目列表发生了不兼容的更改。

item 的值类型是`String`，所以它的`equals()`方法无疑是正确实现的（否则它会破坏 Java 世界中的一切）。所以原因1可能会被划伤。剩下的原因 2。是的，确实，由于某些不清楚的原因，您正在清空国家/地区的可用城市列表。

```
public List<SelectItem> getCountries() {   
    cities.removeAll(cities);
    // ...
} 
```

这段代码没有意义。当要验证所选国家/地区时，也会调用 getter。这样，当稍后将要验证所选城市时，无法在可用城市列表中找到所选城市。顺便说一句，你`getCities()`也没有任何意义。您正在循环整个地图，而不仅仅是使用`Map#get()`.

这一切都只是破坏的代码设计。Getter 根本不应该包含任何业务逻辑。Getter 应该只返回 bean 属性。这些 bean 属性应该早就在（post）构造函数或 action（listener）方法中预先初始化。

如何解决这个问题是一个很好的第二个问题。这里`<h:selectOneMenu valueChangeListener>`基本上被滥用了。这是工作的错误工具。您应该`<f:ajax listener>`改为使用它。但是，如果您真的坚持滥用`valueChangeListener`for 作业，那么您应该按如下方式解决它，即您将`ValueChangeEvent`to`INVOKE_APPLICATION`阶段排队并在该阶段执行作业（就好像它是一个（ajax）动作侦听器方法一样）：

```
private List<String> countries;
private List<String> cities;
private Map<String, List<String>> countriesAndCities;
private String selectedCountry;

@PostConstruct
public void init() {
    countriesAndCities = new LinkedHashMap<String, List<String>>(); // Note: LinkedHashMap remembers insertion order, HashMap not.
    countriesAndCities.put("France", Arrays.asList("paris","marseille"));
    countriesAndCities.put("England", Arrays.asList("Munchester","liverpoor"));
    countries = new ArrayList<String>(countriesAndCities.keySet());
}

public void checkSelectedCountry(ValueChangeEvent event) { // I'd rename that method name to loadCities() or something more sensible.
    if (event.getPhaseId() != PhaseId.INVOKE_APPPLICATION) {
        // Move the job to the INVOKE_APPLICATION phase. 
        // The PROCESS_VALIDATIONS phase is the wrong phase for the "action listener"-like job.
        event.setPhaseId(PhaseId.INVOKE_APPLICATION);
        event.queue();
        return;
    }

    cities = countriesAndCities.get(selectedCountry);
}

// Getters and setters. Do not change them! They should just get and set properties. Nothing more!

public List<String> getCountries(){   
    return countries;
}

public List<String> getCities(){   
    return cities;
}

public String getSelectedCountry() {
    return selectedCountry;
}

public void setSelectedCountry(String selectedCountry) {
    this.selectedCountry = selectedCountry;
} 
```

请注意，当您进行一些表单验证时，这仍然会导致潜在的问题。一个更好的解决方案是直接使用`<f:ajax>`。

### 也可以看看：

*   [我们的`selectOneMenu`wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)- 在底部你可以找到一个合适的`<f:ajax>`例子。
*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid)
*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/)
*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:38:08.540

摆脱`immediate="true"`和`onchange="submit()"`

添加

```
<f:ajax render="city"/> 
```

在你的第一个里面`<h:selectOneMenu`

像这样

```
<h:selectOneMenu  value="#{countriesAndCities.selectedCountry}" valueChangeListener="#{countriesAndCities.checkSelectedCountry}">
     <f:selectItems value="#{countriesAndCities.countries}"></f:selectItems>
     <f:ajax render="city"/>
</h:selectOneMenu> 
```

并阅读这篇[Learning JSF2: Ajax in JSF – using f:ajax tag](http://mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:50:44.843

我建议你在你的吸气剂中做更少的处理（阅读：没有处理）。如果由于任何原因绑定到组件的数据源的内容在请求中被修改，JSF 将抛出验证错误，作为软安全功能。将这些列表的数量移动到生命周期钩子（一个公共的 void 无参数方法，用 注释`@PostConstruct`），它将在 bean 被上下文实例化后立即运行

我假设您为了 ajax（糟糕的设计）而使用会话范围的 bean 来支持您的视图。将该 bean 更改为`@ViewScoped`以平滑您的设计并享受您的 ajax 处理

# javascript - 使用 Markdown 的reveal.js 中的片段

> ID：13705848
> 
> 赞同：31
> 
> 时间：2012-12-04T15:04:26.893
> 
> 标签：javascript, html, markdown, presentation, reveal.js

reveal.js 支持将在 HTML 中一个接一个显示的片段：

```
<section>
    <p class="fragment grow">grow</p>
    <p class="fragment shrink">shrink</p>
    <p class="fragment roll-in">roll-in</p>
    <p class="fragment fade-out">fade-out</p>
    <p class="fragment highlight-red">highlight-red</p>
    <p class="fragment highlight-green">highlight-green</p>
    <p class="fragment highlight-blue">highlight-blue</p>
</section> 
```

它支持使用 Markdown 而不是 HTML 为每张幻灯片使用：

```
<section data-markdown>
    ## Page title

    A paragraph with some text and a [link](http://hakim.se).
</section> 
```

但我找不到任何关于在 Markdown 中使用片段的文档。我错过了什么还是它还不支持？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-02-11T03:05:24.980

它现在支持属性，通过添加 tag: `<!-- .element: class="fragment" -->`。

支持的属性更多，如`background`,`index`等。更多示例见官方文档：[Element Attributes](https://revealjs.com/markdown/#element-attributes) , [Slide Attributes](https://revealjs.com/markdown/#slide-attributes)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-09-21T13:59:33.223

如果您希望在 jez 在他的评论中指出的 Markdown 格式部分中创建片段，这就是您所需要的

```
* Item 1 <!-- .element: class="fragment" -->
* Item 2 <!-- .element: class="fragment" --> 
```

原始来源 - [https://stevegrunwell.com/blog/building-presentations-reveal-js/](https://stevegrunwell.com/blog/building-presentations-reveal-js/)（死链接）

还有另一个教程 - [http://htmlcheats.com/reveal-js/reveal-js-tutorial-reveal-js-for-beginners/](http://htmlcheats.com/reveal-js/reveal-js-tutorial-reveal-js-for-beginners/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-08-03T18:17:35.027

对于那些使用`pandoc`Markdown 制作幻灯片的人，请务必阅读有关[幻灯片放映的手册部分，特别是关于](https://pandoc.org/MANUAL.html#slide-shows)[增量列表](https://pandoc.org/MANUAL.html#incremental-lists) 的小节。也就是说，后者说你可以：

*   使用选项`-i`设置所有列表的增量行为。
*   使用受保护的*div*语法在单个列表上 强制 `incremental`或行为：`nonincremental`

    ```
    ::: incremental

    - Eat spaghetti
    - Drink wine

    ::: 
    ```

*   将列表放在块引用中以反转预设行为。

    ```
    > - Eat spaghetti
    > - Drink wine 
    ```

[这不会为您提供Clay 的答案](https://stackoverflow.com/a/66014113/4244835)中建议的细粒度控制 ，但它很简单、有文档且与多种输出格式兼容。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-02-02T16:53:42.617

我正在使用 pandoc 将 markdown 文件转换为reveal.js 演示文稿。

不知道为什么，但上述答案都不适合我。但是，将文本包含在标记的围栏块中。

使用reveal.js片段示例[https://revealjs.com/fragments/](https://revealjs.com/fragments/)

```
:::{.element: class="fragment"}
Fade in
:::

:::{.element: class="fragment fade-out"}
Fade out
:::

:::{.element: class="fragment highlight-red"}
Highlight red
:::

:::{.element: class="fragment fade-in-then-out"}
Fade in, then out
:::

:::{.element: class="fragment fade-up"}
Slide up while fading in
::: 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-12T05:52:46.150

请参考本期[Markdown inside Fragments](https://github.com/hakimel/reveal.js/issues/275)，我认为 Fragments 只适用于 HTML 级别。

我想你可以直接在 Markdown 转换后操作 DOM，就像这样：

```
{ src: 'plugin/markdown/markdown.js',
  condition: function() { return !!document.querySelector( '[data-markdown]' ); },
  callback: function() {
    Array.prototype.forEach.call(document.querySelectorAll('section > p'), function(ele){ ele.className = 'fragment'; });
  }
}, 
```

# javascript - 是 sjcl.encrypt 使用 AES 或 SHA256

> ID：13705850
> 
> 赞同：1
> 
> 时间：2012-12-04T15:04:31.497
> 
> 标签：javascript, encryption, aes, sha256, sjcl

我正在使用[SJCL 库](http://crypto.stanford.edu/sjcl/)来加密/解密消息。我的问题是我不知道使用的是 AES 还是 SHA256

这是我的代码：

```
var h = sjcl.codec.hex, count = 2048 ;
salt = h.fromBits(sjcl.random.randomWords('10','0'));
var key = h.fromBits( sjcl.misc.pbkdf2(somePassword, h.toBits(salt), count) ) ; 
```

接下来我可以像这样加密/解密

```
var encMessage = sjcl.encrypt(key, message) ;
sjcl.decrypt(key, encMessage) ; 
```

AES 或 SHA256 还是别的什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:59:03.710

SHA256 和 AES 是两种不同类型的算法。

SHA256 是一个加密哈希函数：[http ://en.wikipedia.org/wiki/SHA-2](http://en.wikipedia.org/wiki/SHA-2)

AES 是一种加密算法：[http ://en.wikipedia.org/wiki/Advanced_Encryption_Standard](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)

因此，在您使用加密的情况下，您实际上是在使用 AES。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T16:17:11.230

`pbkdf2`密钥生成使用`HMAC`with `SHA256`。但是 sjcl 的默认加密密钥大小`AES-CCM`仅为`128`位。如果您愿意`AES-CCM-256`，我认为您需要执行以下操作，您也不必`pbkdf2`直接调用。

```
var encMessage =sjcl.encrypt(somePassword,message,{count:2048,salt:salt,ks:256}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:59:30.837

根据对[源](http://bitwiseshiftleft.github.com/sjcl/doc/symbols/src/core_convenience.js.html)的粗略检查，我建议它在[CCM 模式下](http://en.wikipedia.org/wiki/CCM_mode)使用 AES 。

SJCL[主页](http://crypto.stanford.edu/sjcl/)解释了所使用的加密技术，尽管不可否认，每个功能的文档根本没有解释它。

# c# - 如何在此代码中使用 StringBuilder 进行 while 循环

> ID：13705851
> 
> 赞同：0
> 
> 时间：2012-12-04T15:04:30.933
> 
> 标签：c#, stringbuilder

如何在此代码中使用 StringBuilder。

```
 string strFunc = "data /*dsdsds */ data1 /*sads dsds*/";
        while (strFunc.Contains("/*"))
        {
            int tempStart = strFunc.IndexOf("/*");
            int tempEnd = strFunc.IndexOf("*/", tempStart);

            if (tempEnd == -1)
            {
                tempEnd = strFunc.Length;
            }
            strFunc = strFunc.Remove(tempStart, tempEnd + 1 - tempStart);
        } 
```

逻辑是从字符串中删除命令数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:19:45.317

你想做的是像

```
string strFunc = "data /*dsdsds */ data1 /*sads dsds*/";
Regex reg = new Regex(@"/\*.+?\*/"); 
strFunc = reg.Replace(strFunc, String.Empty); 
```

`StringBuilder`这里不需要。

但是，要提供一个使用`StringBuilder`: 的示例来创建一个包含已删除“命令”的字符串，您可以编写

```
MatchCollection commands = reg.Matches(strFunc);
StringBuilder sb = new StringBuilder();
foreach (Match m in commands)
    sb.Append(m.ToString()); 
```

但是您必须注意此处的格式。

我希望这有帮助。

# c# - 从另一个类中的一个方法返回两个带有元组的字典

> ID：13705852
> 
> 赞同：0
> 
> 时间：2012-12-04T15:04:47.347
> 
> 标签：c#, tuples

我有一堂课，**AClass 课**。在这个类中，我正在填写两个字典，并且我正在返回这两个字典，所以我使用`Tuple<Dictionary<string, string>, Dictionary<string, string>>`了方法声明的类型：

```
class AClass
{
    Dictionary<string, string> dictOne = new Dictionary<string, string>();
    Dictionary<string, string> dictTwo = new Dictionary<string, string>();

    public Tuple<Dictionary<string, string>, Dictionary<string, string>> MyMethodOne()
    {
        //Adding items dictOne and dictTwo

        return new Tuple<Dictionary<string, string>, Dictionary<string, string>>(dictOne, dictTwo);
    }
} 
```

在其他类**BClass**中，我应该获取这两个字典，访问它们并将它们的项目添加到另外两个字典中：

```
 class BClass
 {
    AClass _ac = new AClass();

    Dictionary<string, string> dictThree = new Dictionary<string, string>();
    Dictionary<string, string> dictFour = new Dictionary<string, string>();

    public void MyMethodTwo()
    {
    //Here I should get dictionaries through Tuple
    //Add items from dictOne to dictThree
    //Add items from dictTwo to dictFour
    //In a way
    //   foreach (var v in accessedDict)
    //   {
    //   dictThree.Add(v.Key, v.Value);
    //   }
    }
} 
```

如果`MyMethodOne`只返回一本字典，我会知道如何从一本字典中获取项目到另一本字典，但在这里我有**Tuple**，我从未使用过它，而且我不知道如何获得这两个重新调整的值。我应该这样做吗？还有另一种方法，也许将方法声明为`Dictionary< Dictionary<string, string>, Dictionary<string, string>>`？

那么，如何从 Tuple 中获取字典呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:14:26.153

该类`Tuple`在名为“Item(Number)”的属性中公开其成员：http: [//msdn.microsoft.com/en-us/library/dd289533.aspx](http://msdn.microsoft.com/en-us/library/dd289533.aspx)

因此，您的两项元组将具有名为 Item1 和 Item2 的属性：

```
var dictionaries = _ac.MyMethodOne();
// now dictionaries.Item1 = dictOne, dictionaries,Item2 = dictTwo
dictThree = dictionaries.Item1; 
```

如果您只是想获得对字典的引用或复制它，我不明白您何时说要“分配项目”。如果要复制，请使用

```
dictFour = new Dictionary<string, string>(dictionaries.Item2); 
```

# java - 有没有可能 罐 在父 pom 文件中？

> ID：13705856
> 
> 赞同：5
> 
> 时间：2012-12-04T15:04:54.320
> 
> 标签：java, maven, parent-child, pom.xml

我试图不在这里用我的 POM 文件重新发明轮子。我有一个 pom，我正在尝试将其转换为 maven 中的父 pom.xml 文件。

该项目设置为以下结构：

```
 core
    |
     ---- pom.xml
    |
     ---- Proj A
          | 
           ---- <parent> pom.xml
          |
          Proj A - module 1
          |
           ---- pom.xml
          |
          Proj A - module 2
          |
           ---- pom.xml
   |
    ---- Proj B
         |
          ---- pom.xml 
```

我的一切似乎都设置正确，除了有些东西让我失望。我在 cor pom.xml 文件中定义了这个：

```
 <modelVersion>4.0.0</modelVersion>
    <groupId>com.imx.core</groupId>
    <artifactId>imx-core</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>
<modules>
    <module>Proj A</module>
    <module>Proj B</module>
</modules> 
```

除了放在 .m2 存储库中的 imx-core 工件之外，这一切似乎都在构建。由于包装不再是“jar”而是现在的“pom”，我将如何从核心的 pom 文件创建 jar 包？

很长的路要走（我假设）是创建一个全新的 pom，它是所有其他 pom 的专用父母和孩子？如果这可以在现有的 core/pom.xml 文件中完成，那就更好了。还是我没有以正确的方式思考这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:37:27.213

我不确定你到底哪里有问题，但请注意，多模块项目（带有模块部分的 POM）和父 POM 项目（带有 pluginManagement 和/或依赖管理部分的 POM）应该具有包装类型“pom”并且应该不包含任何源代码（除了 LICENSE.txt、README.txt、CHANGES.txt、程序集配置等）。

# java - 从网页运行 Java 函数？

> ID：13705858
> 
> 赞同：1
> 
> 时间：2012-12-04T15:05:03.667
> 
> 标签：java, javascript, html, bukkit

所以我的朋友一直在向我为 Bukkit 编写的这个插件提出请求，就像我这个正派的人一样，我接受了他们。不幸的是，我不是一个伟大的程序员。我正在为这个插件制作一个帮助页面 - 插件附带的本地文件 - 我需要知道如何运行插件的 .jar 文件。我已经准备好了主要课程，我计划这样做的方式是在`<head></head>`标签中添加类似的内容。

```
<script> <!--
if(confirm("Would you like to run the plugin to set up first? (Click cancel if you do not)")) {
    //Something to run the plugin .jar file
}
//-->
</script> 
```

这行得通吗？如果我需要进行任何修改，请告诉我。我想我可能只能调用函数，在这种情况下我只会调用`main()`.
注意：这是按原样工作的，我只是让它制作另一个弹出窗口，而不是运行 .jar 文件。注意：网页和 jarfile 都已经下载到用户的计算机上，我只需要能够运行它。
注意：这个网页实际上是一个 HTML 文件，当他们下载插件时会下载到他们的计算机上，我希望它运行我的插件，因为它是一个自动设置功能。该网站未托管在服务器上。我觉得我真的需要澄清这一点。

查看代码并确定链接对于我的目的来说是最简单和最好的 - 感谢所有帮助！（顺便说一句，原来我会让 .jar 文件将帮助文档解压到文件夹中。哦，好吧：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:40:38.157

如果您只是将静态`<applet>`或`<object>`标签放入您的 html 页面的某个位置，它总是会加载您的 java 代码。

如果您希望稍后动态加载它，或者让用户选择是现在加载还是现在加载，您可以在 JavaScript 中使用以下构造：

```
var app = document.createElement('applet');
app.archive= 'Java.jar';  // Your java jar file here
app.code= 'Java.class';   // Your Main class that extends Applet
app.width = '400';        // The size of the area for displaying ...
app.height = '10';        //   ... the applet's graphical output
document.getElementsByTagName('body')[0].appendChild(app); 
```

（改编自 Beachhouse 在此处的回答：[如何使用 Javascript 动态嵌入 Java 小程序？](https://stackoverflow.com/questions/3259328/how-can-i-embed-a-java-applet-dynamically-with-javascript)；这使用`<applet>`标签，但可以轻松更改为使用`<object>`标签）。

重要的是您的 Java 代码实际上扩展了`java.applet.Applet`. 在这种情况下，仅仅拥有一个`main()`功能是不够的。然后，`Applet`该类具有您覆盖的方法（、、、`init()`和）`destroy()`，当您的小程序加载/卸载/显示/隐藏时，这些方法会自动调用。您还可以在实现的类上定义公共函数，然后您可以直接从 JavaScript 调用对象。您可能需要稍微尝试一下，因为 Java 和 JavaScript 使用的类型存在一些差异，因此您不能只返回或期望任何类型的参数，而是通过一些试验和错误（或阅读在网络上），它工作得很好。`start()``stop()``Applet``app`

您需要记住的一件事是加载小程序需要一段时间。事实上，如果浏览器阻止了小程序或者用户点击了权限问题上的否按钮，它可能永远不会被加载。因此，您可能无法`app`立即调用对象上的函数。相反，为自己编写一个小计时器，定期检查您的小程序是否已加载。我通常做的是`public boolean isReady()`在我的小程序类中定义一个函数，然后使用以下 Javascript：

```
if (typeof app.isReady=='undefined') return false;
return app.isReady(); 
```

但是，当然，如果您只使用`init()`and`start()`方法而不从 Javascript 调用小程序，则不必担心这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:53:04.200

您可以研究的另一件事是 Java Web Start 框架： [http ://en.wikipedia.org/wiki/Java_Web_Start](http://en.wikipedia.org/wiki/Java_Web_Start)

这允许用户直接从他们的浏览器启动任意 jar 文件，并可选择将其安装在他们的机器上。因此，如果您正在寻找一种通过网站部署 Java 程序的方法，那么这可能是最好的解决方案。

在这种情况下，Java 代码不会像 applet 那样在浏览器“内部”运行（嗯，在 JVM 内部，但与浏览器绑定），而是作为标准的独立进程运行，就像您启动了jar 文件从您的计算机的硬盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:09:38.847

我想你可能在这里寻找`<applet>`标签。

```
<APPLET code="MyJAVAFile.jar"></APPLET> 
```

对于 HTML5，您应该使用`<object>`标签，如下所示：

```
<object type="application/x-java-applet" code="MyJAVAFile.jar"></object> 
```

您可能还会发现[这篇文章](https://eyeasme.com/Shayne/HTML5_APPLETS/)很有趣。值得一读。

# functional-programming - 编写 OCaml 函数的正确和流畅的方法是什么？

> ID：13705859
> 
> 赞同：4
> 
> 时间：2012-12-04T15:05:06.027
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。

在我学习了第 3 章之后，我似乎明白了`let`and是如何`fun`工作的。但是，我仍然很难编写自己的`fun`.

* * *

**这是我面临**的一个示例问题。****

 **`Write a function sum that, given two integer bounds n and m and a function f, computes a summation (no for loop allowed). i.e., sum n m f = f(n) + f(n+1) + ... + f(m)`

* * *

**那么，我应该如何开始考虑产生这个函数 sum 呢？**

在 Java 或普通编程语言中，这很容易。

由于这里不允许使用 for 循环，所以我想我应该这样做`let rec`吗？

像这样的东西：

`let rec sum n m f = fun i -> ....`

我需要`i`一个光标吗？

无论如何，我无法继续思考。

**任何人都可以为我指出一条产生 OCaml 乐趣的道路吗？**

* * *

这是我的最终解决方案：

`let rec sum n m f = if n <= m then (f n)+(sum n+1 m f) else 0;;`

但当然，这是错误的。错误是`Error: This expression has type 'a -> ('a -> int) -> 'b but an expression was expected of type int`

**为什么？什么是'a？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:23:46.183

你犯了一个经典的语法错误：`sum n+1 m f`被解析为`(sum n) + (1 n f)`而不是你所期望的。在 OCaml 中，函数应用程序（空间）的优先级高于中缀运算符。

类型错误来自以下事实`sum n`：（您在总和中使用）不是整数。它需要一个参数 ( `m`) 和一个返回整数的函数。在类型推断过程的这一点上（发生错误时），OCaml 将其表示为`'a -> ('a -> int) -> 'b`：接受一些未知的东西`a`，一个函数 from `a`to int，并返回一些东西`b`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T16:29:21.797

我希望这将帮助您从递归而不是循环的角度思考（让我们暂时忽略尾递归）。

所以你需要计算`f(n) + f(n+1) + ... f(m)`。它可能会帮助您以**归纳**的方式思考这个问题。也就是说，假设您知道如何计算`f(n+1) + ... + f(m)`，那么您需要做什么才能计算出原始结果？好吧，您只是添加`f(n)`到后者，对吗？这正是您的代码必须说的：

```
let rec sum n m f =
  if n = m then
    f m
  else
    f n + sum (n + 1) m f;; (* here's the inductive step *) 
```

你可以看到我是如何添加`f(n)`到`f(n+1) + .... + f(m)`. 因此，进行归纳思考，将问题分解成更小的部分，并思考如何将这些小部分的结果组合在一起。

希望我没有让事情变得更加混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:33:34.720

`'a`就像Java中的泛型类型。例如： `let test a = 1` 它的类型是`'a -> int` 无论你的参数是什么类型，这个函数都会返回 1。

错误是您需要在此处放置括号 `(sum (n+1) m f)`

Ocaml 将其视为额外的参数，因此它会产生与您预期不同的类型。加上括号可以确保你有正确数量的参数。当您有很多代码时，调试是一个微妙的问题。因此，在类似情况下使用括号可以为您节省大量时间。:)**

# sql - 如何从 SQL Server 几何值中提取多边形

> ID：13705860
> 
> 赞同：1
> 
> 时间：2012-12-04T15:05:05.700
> 
> 标签：sql, spatial

我在每个国家/地区的 SQL Server 2008 中有一组数据。

我想为每个描述每个国家的土地质量的几何值添加一个几何值，所以我找到了 TM_World_Border 形状文件并将其导入到数据库中 - 一切都很好。

问题是现有架构将阿拉斯加和夏威夷作为与美国其他地区分开的条目，而形状文件只有一个条目用于所有三个组合。

您能否指出我如何将阿拉斯加和夏威夷提取到它们自己的几何值中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:00:03.377

好的，看起来我通过创建第二个多边形来解决这个问题，该多边形围绕我感兴趣的区域（想想剪贴蒙版）并选择多边形和原始地理值的交集

> 声明@Bounding 地理
> 
> 声明@美国地理
> 
> 声明@Result 地理
> 
> 从 dbo.country_10m 中选择 @USA = geog，其中 id = 238
> 
> 选择@Bounding = Geography::STGeomFromText('POLYGON((-130 54, -130 23, -60 23, -60 54, -130 54))', 4326);
> 
> ```
>  SELECT @Result = @USA.STIntersection(@Bounding) 
> ```
> 
> 更新 foo
> 
> 设置 geog = @Result
> 
> 其中 id = 2

# c++ - 为什么我在使用 libexpect.so 的简单 c++ 程序中出现分段错误？

> ID：13705869
> 
> 赞同：8
> 
> 时间：2012-12-04T15:05:30.847
> 
> 标签：c++, segmentation-fault, expect

我正忙于一个项目，我必须在 bash 或 ssh 中自动化一些进程，所以我决定使用 libexpect.so 库。如果您不知道 libexpect 是什么，它提供了一个我可以在 c++ 程序中使用的 expect 扩展，而 expect 只是一个程序，您可以在其中为 ssh 之类的东西运行自动化脚本。因此，我可以执行一个脚本，该脚本尝试在某处进行 ssh ......当通过期望找到密码提示时，我可能已经给出了期望发送的密码。

我的问题是，当我运行一个程序时，即使是一个非常简单的程序，我也会遇到一个分段错误，我使用 gdb 将其缩小到 libexpect.so 中名为 exp_spawnv 的函数。

我知道我已经正确链接了库，它编译得很好，事实上，当我在 ubuntu 中编译和运行时，整个问题并不存在，但是在我的 arch linux 安装中，我得到了分段错误，稍后我将详细说明。我在 Arch 上构建它的原因是因为我希望最终使该项目可以在大多数发行版上构建。

我的想法是，在我的 Arch 安装中，当调用 exp_spawnv 函数（可能是管道、叉子或其他）时，某些权限会失败。

为了证明我没有做一些时髦的事情，这里有一个简单的 main.cpp 用于说明目的。

```
#include <tcl8.5/expect.h>

int main()
{
  FILE* file = exp_popen("bash");
} 
```

所以它几乎是有史以来最简单的期望程序。这是我编译和链接它。

> $ g++ -ggdb -c main.cpp
> 
> > main.cpp：在函数“int main()”中：
> > 
> > main.cpp:5:32：警告：不推荐将字符串常量转换为 'char*' [-Wwrite-strings]
> 
> $ g++ main.o -lexpect -o mainprog

所以我得到了我的可执行 mainprog ......只是运行它会给我一个分段错误，没有别的。

如果我在 gdb 中运行 mainprog，它会告诉我 exp_spawnv 中存在段错误。这是我在 gdb 中所做的，最后是回溯。

> (gdb) 运行
> 
> > 启动程序：/home/user/testlibexpect/mainprog
> > 
> > 警告：无法为 linux-vdso.so.1 加载共享库符号。
> > 
> > 你需要“set solib-search-path”还是“set sysroot”？
> > 
> > 程序收到信号 SIGSEGV，分段错误。
> > 
> > /usr/lib/libexpect.so 中的 exp_spawnv () 中的 0x00007ffff7bc8836
> 
> (gdb) 回溯
> 
> > 0 0x00007ffff7bc8836 在 /usr/lib/libexpect.so 中的 exp_spawnv ()
> > 
> > 1 0x00007ffff7bc8cb4 来自 /usr/lib/libexpect.so 的 exp_spawnl ()
> > 
> > 2 0x00007ffff7bc8d01 来自 /usr/lib/libexpect.so 的 exp_popen ()
> > 
> > 3 0x000000000040069e in main () at main.cpp:5

我关心两件事。

1.  查看 libexpect 的联机帮助页，我知道 exp_spawnv 派生了一个新进程，我将能够通过 FILE* 进行通信。所以我猜想收到 SIGSEGV 信号是因为叉子发生了不好的事情？

2.  回溯中的那一行（警告：无法为 linux-vdso.so.1 加载共享库符号。）看起来很可疑？

总而言之，我的问题是我应该研究什么来解决这个问题？我已经尝试从源代码构建期望库并通过arch包管理器pacman获取它......问题仍然存在，所以如果你知道我的意思，我认为库构建不会损坏。

编辑：根据我所做的研究，我担心的第 2 点不是问题，只是化妆品。

eclipse的反汇编如下：

```
00007ffff7bc87c6:   mov 0x20c68b(%rip),%rax        # 0x7ffff7dd4e58
00007ffff7bc87cd:   mov (%rax),%rax
00007ffff7bc87d0:   test %rax,%rax
00007ffff7bc87d3:   je 0x7ffff7bc87d7 <exp_spawnv+935>
00007ffff7bc87d5:   callq *%rax
00007ffff7bc87d7:   mov %r12,%rsi
00007ffff7bc87da:   mov %rbp,%rdi
00007ffff7bc87dd:   callq 0x7ffff7bb2330 <execvp@plt>
00007ffff7bc87e2:   callq 0x7ffff7bb1720 <__errno_location@plt>
00007ffff7bc87e7:   mov 0x24(%rsp),%edi
00007ffff7bc87eb:   mov %rax,%rsi
00007ffff7bc87ee:   mov $0x4,%edx
00007ffff7bc87f3:   xor %eax,%eax
00007ffff7bc87f5:   callq 0x7ffff7bb1910 <write@plt>
00007ffff7bc87fa:   mov $0xffffffff,%edi
00007ffff7bc87ff:   callq 0x7ffff7bb23d0 <exit@plt>
00007ffff7bc8804:   nopl 0x0(%rax)
00007ffff7bc8808:   xor %eax,%eax
00007ffff7bc880a:   movl $0x0,0x20dd3c(%rip)        # 0x7ffff7dd6550
00007ffff7bc8814:   callq 0x7ffff7bb1700 <exp_init_pty@plt>
00007ffff7bc8819:   xor %eax,%eax
00007ffff7bc881b:   callq 0x7ffff7bb2460 <exp_init_tty@plt>
00007ffff7bc8820:   lea -0x1c97(%rip),%rdi        # 0x7ffff7bc6b90
00007ffff7bc8827:   callq 0x7ffff7bb2540 <expDiagLogPtrSet@plt>
00007ffff7bc882c:   mov 0x20c555(%rip),%rax        # 0x7ffff7dd4d88
00007ffff7bc8833:   mov (%rax),%rax
00007ffff7bc8836:   mov 0x410(%rax),%rdi 
```

**我想出的答案**

这是我最终想出的解决方案，我接受了 szx 的回答，因为它引导我走上这条路，一旦我知道我在寻找什么，这就是微不足道的。

```
//do not use TCL stubs as this is a main
#undef USE_TCL_STUBS

#include <iostream>
using std::cout;
using std::endl;

//headers that must be included when using expectTcl as an extension to c++ program
#include <stdio.h>
#include <stdlib.h>
#include <expectTcl/tcl.h>
#include <expectTcl/expect_tcl.h>
#include <expectTcl/expect.h>

//enums representing cases of what expect found in loop
enum{FOUNDSEARCH, PROMPT};

int main()
{
  /* initialise expect and tcl */
  Tcl_Interp *interp = Tcl_CreateInterp();

  if(Tcl_Init(interp) == TCL_ERROR)
    {
      cout << "TCL failed to initialize." << endl;
    }
  if(Expect_Init(interp) == TCL_ERROR)
    {
      cout << "Expect failed to initialize." << endl;
    }

  /* end of intialisation procedure */

  //open a shell with a pipe
  char shellType[] = "sh";
  FILE* fp = exp_popen(shellType);

  //should we exit from the loop which is studying sh output
  bool shouldBreak = false;
  //did we find the pwd
  bool foundSearch = false;
  //does it look like expect is working
  bool expectWorking = false;
  //did we receive a prompt...therefore we should send a command
  bool receivedPrompt = false;

  while(shouldBreak == false)
    {
      switch(exp_fexpectl(fp,
              exp_glob, "/tools/test*", FOUNDSEARCH,  //different
              exp_glob,"# ", PROMPT, //cases are shown here
              exp_end))  //that the expect loop could encounter
    {
    case FOUNDSEARCH:
      foundSearch = true;
      break;
    case PROMPT:
      if (receivedPrompt)
        {
          shouldBreak = true;
          expectWorking = true;
        }
      else
        {
          receivedPrompt = true;
          fprintf(fp, "%s\r", "pwd");
        }
      break;
    case EXP_TIMEOUT:
      shouldBreak = true;
      break;
    case EXP_EOF:
      shouldBreak = true;
      break;
    }

      //cout << "exp_match : " << exp_match << endl;
    }

  cout << endl;
  if (foundSearch)
    {
      cout << "Expect found output of pwd" << endl;
    }
  else
    {
      cout << "Expect failed to find output of pwd" << endl;
    }
  if(expectWorking)
    {
      cout << "The expect interface is working" << endl;
    }
  else
    {
      cout << "The expect interface is not working" << endl;
    }

  cout << "The test program successfully reached the end" << endl;
} 
```

我在这里所做的只是展示了如何初始化 expect/tcl 以防止我遇到 szx 所说的问题。然后我只是做了一个典型的类似期望的问题，我几乎说如果 shell 提示你输入发送它 pwd。然后，如果它为您提供当前目录，则期望正在工作。这种结构对于 ssh 之类的东西非常有用。假设您想在某处自动化 sshing，做某事然后离开那里。尤其是如果您想做几百次并且不想确认每个主机的真实性并每次都输入密码。

请注意，出于某种原因，我从来不必在**ubuntu**上执行此操作……可能是因为我没有从源代码构建它，只是使用了`apt-get`. 但是，我的项目需要我从源代码构建，所以我在[http://www.linuxfromscratch.org/lfs/view/development/chapter05/tcl.html](http://www.linuxfromscratch.org/lfs/view/development/chapter05/tcl.html)和[http://www上找到了一个非常好的、简洁的方法.linuxfromscratch.org/lfs/view/development/chapter05/expect.html](http://www.linuxfromscratch.org/lfs/view/development/chapter05/expect.html) ...事实上整个网站看起来真的很有用。

**再次感谢 szx**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T02:50:53.607

在 Tcl 中定义的全局变量`TclStubs *tclStubsPtr`恰好是`NULL`当`exp_spawnv`试图访问`Tcl_ErrnoMsg`被定义为该结构的成员时（参见 参考资料`tcl.h`）：

```
#ifndef Tcl_ErrnoMsg
#define Tcl_ErrnoMsg \
    (tclStubsPtr->tcl_ErrnoMsg) /* 128 */
#endif 
```

我对 expect 和 Tcl 都不熟悉，但上面建议您可能应该调用一些初始化子例程（如果存在的话）或手动设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:16:19.363

我最关心的是编译时的警告。该接口表面上要求您传递一个可写字符串，但您传递一个字符串常量。如果它确实写入它，它将导致分段错误。所以它看起来是解决你问题的好人选。

如果您尝试创建一个可写缓冲区并传递它会发生什么：

```
char name[] = "bash";
FILE* file = exp_popen(name); 
```

更新：我已经测试了您的程序（进行了上述更改，最后是“return 0;”），它对我来说很好。也许您的系统有问题，比如安装了一半的库？您可以检查与 -static 链接时它是否也失败。如果你这样做，你确定编译时链接库与运行时使用的库相同（因为它将在编译时包含在可执行文件中）。

# video - 禁用 MediaElements.js 中的右键单击控件

> ID：13705870
> 
> 赞同：0
> 
> 时间：2012-12-04T15:05:35.073
> 
> 标签：video, save, fullscreen, right-click

当播放器全屏时，我们可以禁用 MediaElements.js 中的右键单击控件，例如“将视频另存为”等吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:51:25.740

i have written the following java script code

```
var BM = 2; // button middle
var BR = 3; // button right
var msg ="MOUSE RIGHT CLICK IS NOT SUPPORTED ON THIS PAGE";

function mouseDown(e) 
{ 
  try { if (event.button==BM||event.button==BR) {return false;} }  
  catch (e) { if (e.which == BR) {return false;} } 
}
document.oncontextmenu = function() { alert(msg); return false; }
document.onmousedown   = mouseDown; 
```

this code works in normal size.... but not working in full screen mode.... i need to disable context menu while mediaelement.js player is in full screen mode......

# css - jQuery Theme Div 边框和 960 网格系统问题

> ID：13705873
> 
> 赞同：0
> 
> 时间：2012-12-04T15:05:46.213
> 
> 标签：css, jquery-ui, 960.gs

我正在我现有的站点上实施[960 网格系统。](http://960.gs/)我正在使用 jQuery 主题，这意味着每个具有内容的 div 都被分配了一个类`ui-widget-content`，作为主题的一部分，它给它一个 1px 的边框。我喜欢这种边框设计，因为我的内容 div 是白色的，而我的网站的背景是白色的 - 给它一个很好的视觉对比。

然而，我遇到的问题是，使用这些 1px 边框，我无法水平放置 div，因为它们太大了。例如，如果我这样做：

```
<div class="grid_16 alpha omega">
  <div class="grid_10 alpha ui-widget-content">
    <div class="grid_5 alpha">some stuf...</div>
    <div class="grid_5 omega">some stuf...</div>
  </div>
  <div class="grid_6 omega">
    more stuf...
  </div>
</div> 
```

这导致`grid_10`div 太大了 2 个像素，因此，`grid_16`在最右边的 div 的末端悬空。我想我会通过创建一个像这样的新类来解决这个问题：

```
.border-fix {
    border-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; } 
```

然后将其添加到`grid_10`div 中，如下所示：

```
<div class="grid_16 alpha omega">
  <div class="grid_10 alpha ui-widget-content border-fix">
    <div class="grid_5 alpha">some stuf...</div>
    <div class="grid_5 omega">some stuf...</div>
  </div>
  <div class="grid_6 omega">
    more stuf...
  </div>
</div> 
```

但是，现在，我的两个内部`grid_5`div 被挤压，因此它们现在彼此叠放，而不是并排，因为水平空间不足（因为`grid_10`div 比边界窄 2 个像素）里面，不是外面）

那么我该如何解决这个问题（或者它是否可以修复）？我喜欢在 div 上有边框的风格，因为它很好地将内容与背景分开。但是，有了边框，我的 div 宽度被弄乱了。[正如这个问题](https://stackoverflow.com/questions/4740094/jquery-ui-with-960-grid-border-issue)所建议的那样，我不喜欢用额外的列来强制它。

我可以尝试任何魔术吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:23:23.913

通常，您不应将其他具有样式的类与用于网格的容器结合起来以防止这种行为。网格系统应按原样采用，如果您需要边框并使用不同的填充或边距，则应将网格单元格内的内容包装在另一个 div 中并将样式应用于该元素 - 否则您将破坏网格。

我知道这会创建额外的 div，但它有助于保持一致的行为。如果您使用固定大小的网格（以 px 而不是 % 定义），您可以从宽度中减去 2px 并为每个单元格添加 1px 边框以使其均匀，因此您最终会得到相同的大小和相同的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:29:27.847

为什么不把 grid_10 的样式重新定义为比以前少 2 个像素呢？（是 580 吗？580-2=578）

```
<style>
.grid_10 {width:578px}
</style>

<div class="grid_10 alpha ui-widget-content"> 
```

或者，如果您无法为所有站点重新定义它，只需去看看 grid_10 应用了什么样式，将它们克隆为新样式 my_smaller_grid_10_with_borders

* * *

虽然我是这个，但我仍然想知道在语义上这样的东西有什么区别：

```
<div class="grid_16 alpha omega">
    <div class="grid_10 alpha ui-widget-content border-fix">
    <div class="grid_5 alpha">some stuf...</div>
... 
```

和这样的：

```
<table><tr><td>some stuf...</td>... 
```

我要说的是 960grid 系统和桌子一样糟糕。我们不应该编写语义正确的可读文档吗？

（好吧只是题外话，希望解决方案有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:16:18.670

我想出了一个我认为不会破坏网格系统的解决方案，我不必编辑任何 div 大小来考虑边框，也不必添加任何奇怪的边距或 1px 填充。也许这有点 hacky，但我所做的只是创建一个像这样的新类：

```
.border-fix {
    border: 0px;
    box-shadow: 0px 0px 3px grey;
} 
```

并将这个类添加到我想要有边框的任何 div 中。这将覆盖`ui-widget-conent`该类以删除边框并为框添加阴影。我那里的阴影设计说有一个 0px 的水平移动，一个 0px 的垂直移动，并将阴影模糊 3 px。使用灰色，这看起来几乎与普通边框完全一样，而不会影响我的 div 宽度。

再说一次，我认为这可能是一种老套的做事方式，但如果我自己不这么说的话，它似乎非常聪明：P

# wpf - WPF 验证错误导致 double 转换为 int

> ID：13705875
> 
> 赞同：1
> 
> 时间：2012-12-04T15:05:49.613
> 
> 标签：wpf, textbox, validationrules

`TextBoxes`我实现了在我的 WPF 项目中使用的自定义验证规则。我有以下问题：

例如，如果我有一个用于输入双精度值的文本框，则在验证错误之后（例如，对于键入“30.0”，当文本为“30”时，我必须得到一个验证错误。）验证/绑定机制转换整数的双精度表示("30.0") 转换为 int 表示形式 ("30")。如果我保留验证规则但始终返回 ValidationResult.ValidResult 或删除验证规则，则该值不会更改并保持“30.0”。

我该如何修复它/解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:11:40.470

您可以控制绑定何时触发。如果它发生在每次击键时，那么您将遇到无效中间`30.`情况的问题，正如您所描述的那样。

您可能希望查看添加`UpdateSourceTrigger=LostFocus`到您的绑定。

这里有更多信息：http: [//msdn.microsoft.com/en-us/library/ms754356.aspx](http://msdn.microsoft.com/en-us/library/ms754356.aspx)

# javascript - for 循环中的异步 $.post

> ID：13705879
> 
> 赞同：0
> 
> 时间：2012-12-04T15:06:19.987
> 
> 标签：javascript, jquery, post

> **可能重复：**
> [Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

我在尝试访问`$.post`函数内的变量时遇到了麻烦。

函数内部变量的值`a`始终相同：**7**。但在它之外，它会随我的意愿增加。

为什么会这样？如何为`$.post`函数执行循环？

```
for(var a=0; a<7; a++){
    console.log(a); /* increasing value */

    $.post("http://"+ document.domain + "/posts/user/xxxxx",
        function(departments){
        console.log(a);  /*value of 7*/

    });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:09:58.897

要么给每个迭代它自己的范围，要么使用`$.ajax`和`context`选项。

```
for(var a=0; a<7; a++){
    (function(a){
        console.log(a); /* increasing value */

        $.post("http://"+ document.domain + "/posts/user/xxxxx",
            function(departments){
            console.log(a);  /*value of 7*/

        });
    })(a);
} 
```

与`$.ajax`...

```
for(var a=0; a<7; a++){
    console.log(a); /* increasing value */

    $.ajax({
        url: "http://"+ document.domain + "/posts/user/xxxxx",
        type: "POST",
        context: a,
        success: function(departments){
            console.log(this);  /*value of 7*/    
        }
    });
} 
```

# sql - Oracle SQL/PL/SQL：循环中的“更新”失败

> ID：13705881
> 
> 赞同：0
> 
> 时间：2012-12-04T15:06:26.443
> 
> 标签：sql, loops, plsql, sql-update

情况是这样的：我在 Oracle SQL DB 中有一个表。该表用于报告目的。这是一个测试/开发环境。我想使用这个数据库在我们的报告工具中测试一个新的分组功能，但是我必须更新和替换所有的“数字”（不是那个表的关键）。几个数据集可以共享相同的“数字”。更新后的数字应遵循某种模式以进行自动测试。我想到了一个整数，每个新数字都会增加一个整数。所以这是我到目前为止所做的事情：首先我查询该表中所有唯一的“数字”，然后我循环遍历结果表以用生成的“new_number”替换找到的每个“数字”。然后 'new_number' 加一，然后再取下一个 'number'

这是代码：

```
DECLARE
    Cursor MyCursor IS
        SELECT DISTINCT NUMBER
            FROM TABLE
            ORDER BY NUMBER;

    entry MyCursor%ROWTYPE;
    new_number NUMBER := 111111;

    BEGIN
    FOR entry IN MyCursor LOOP
        IF MyCursor%FOUND THEN
            UPDATE TABLE
                SET
                NUMBER = new_number,
                WHERE  NUMBER = ENTRY.NUMBER;
        new_number := new_number + 1;
        ELSIF myCursor%NOTFOUND THEN
             EXIT;
        END IF;
    END LOOP;
END; 
```

现在的问题是，脚本运行但我被告知只有一行更新（最后一行，似乎）。

这是为什么？

我可以放一个

```
DBMS_OUTPUT.PUT_LINE(entry.number); 
```

在循环内部，它将在每次迭代时显示在 TABLE 中找到的所有唯一数字，因此循环本身似乎正在工作。

只是mabye ...有没有办法在没有循环的情况下做到这一点？什么都想不出来。

在准备测试运行时，该脚本将只执行一次（一旦工作）。

非常感谢我提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:38:48.983

[引用 oracle 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sql_cursor.htm)：

> %FOUND：如果 INSERT、UPDATE 或 DELETE 语句影响了一行或多行，或者 SELECT INTO 语句返回了一行或多行，则返回 TRUE。否则，它返回 FALSE。

您真的需要检查光标插入、更新、删除吗？

看来您正在寻找：

```
FOR entry IN MyCursor LOOP

    UPDATE TABLE
            SET
            NUMBER = new_number,
            WHERE  NUMBER = ENTRY.NUMBER;
    new_number := new_number + 1;

END LOOP; 
```

或者

```
FOR entry IN MyCursor LOOP

    UPDATE TABLE
            SET
            NUMBER = new_number,
            WHERE  NUMBER = ENTRY.NUMBER;
    IF SQL%FOUND THEN
       new_number := new_number + 1;
    END IF;
END LOOP; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:06:58.167

事实上，你们所有人都是对的——一开始我也是。无论如何感谢您的回答，我很感激！

我使用的 DBMS (Hora) 被配置为手动确认*每个*更改。每次迭代时，它都会“覆盖”确认/提交的提示，并且只询问发生的最后一次更改。我对其进行了更改，脚本运行并执行了它现在应该做的事情。尽管 Hora 仍然只显示要更改的一行，但它现在在提交时会更改所有行。

再次感谢。

# php - 运行时出现php语法错误

> ID：13705882
> 
> 赞同：-1
> 
> 时间：2012-12-04T15:06:29.117
> 
> 标签：php

我正在尝试从另一个站点获取内容。以下是php代码。但是当我运行它时，它会显示错误消息。

错误信息：

```
Parse error: syntax error, unexpected 'â€“' (T_STRING) in D:\Software\Installed\xampp\htdocs
\test\index.php on line 10 
```

php代码：

```
<?php
function get_string_between($string, $start, $end)
{
$string = " ".$string;
$ini = strpos($string,$start);
if ($ini == 0)
return "";
$ini += strlen($start);

$len = strpos($string, $end, $ini) – $ini; // this is line number 10.

return substr($string,$ini,$len);
}
//Initialize the Curl session
$ch = curl_init();

//Set curl to return the data instead of printing it to the browser.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
//Set the URL
curl_setopt($ch, CURLOPT_URL,"http://www.test.org/");
//Execute the fetch
$data = curl_exec($ch);

echo $da=get_string_between($data,'imgs/topdown.gif">','imgs/topdown.gif');
//Close the connection
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:10:24.470

在`-`您的第 10 行中，它不是正常的减号。这是另一个 ASCII 字符，这就是搞砸的原因。

尝试用减号替换该字符。

# r - 并行过程共同情节

> ID：13705886
> 
> 赞同：2
> 
> 时间：2012-12-04T15:06:48.800
> 
> 标签：r, parallel-processing, plot

我在 R 中使用 doSNOW 包并有一个并行过程。我想创建一个将在每个线程计算数据点时刷新的图，以便我可以实时监控我的进程。我怎样才能在 R 中做到这一点？下面的代码必须等到所有线程都完成。

```
library(doSNOW)

cl<-makeCluster(4) # I have 4 cores
registerDoSNOW(cl)

a<-NULL
a<-foreach(j=1:10,.combine="rbind" ) %dopar% 
  c(j,j^2)

plot(a) 
```

# c# - C# int32 文字只能存储在 long 数据类型中

> ID：13705888
> 
> 赞同：5
> 
> 时间：2012-12-04T15:07:00.783
> 
> 标签：c#, variable-assignment, literals, unsigned-integer

我正在准备一个非常棘手的 c# 考试，并且在这样做的时候突然出现了这个问题。我有以下代码：

```
 uint zzz = -12u; 
```

`-12u`被识别为`System.Uint32`文字，但它只能存储在类型的变量中`long`。这是为什么 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T15:13:27.783

它正在做的是采用 unsigned int 12 并尝试将其转换为负值 (the `-`)，这需要转换为可以处理负数的类型，因为 unsigned int 不能。

因为它是一个无符号整数，它可能有超出整数范围的值，所以需要转换为长整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:09:44.877

因为`u` 用于 unsigned int
处理 -ve 符号将其转换为 Long 数据类型
-12u 是有符号 int 数据类型 & 用于将其存储为`unsigned`使用`long`数据类型的类型

# linux - 在 Linux 中链接 AMD acml

> ID：13705891
> 
> 赞同：0
> 
> 时间：2012-12-04T15:07:07.940
> 
> 标签：linux, linker

我需要在 C++ 项目中链接 AMD acml 库。

我试图以这种方式编译它：

```
g++ mainConsole.cpp -L./acml/pgi64_int64/lib -lacml 
```

但我收到此错误：

```
/usr/bin/ld: skipping incompatible ./acml/pgi64_int64/lib/libacml.so when searching for -lacml
/usr/bin/ld: skipping incompatible ./acml/pgi64_int64/lib/libacml.a when searching for -lacml
/usr/bin/ld: cannot find -lacml 
```

我该怎么做才能解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T15:21:01.350

当使用 32 位编译完成时，链接器似乎被告知使用 64 库。

*您对 g++的*调用将编译*和*链接。如果将两者分开，则更容易调试。例如：

```
g++ -I./acml/pgi64_int64/include mainConsole.cpp -o mainConsole.o
g++ -L./acml/pgi64_int64/lib -lacml mainConsole.o -o mainConsole 
```

*您可以使用file*验证库。在我的系统上，我得到：

```
$ file /usr/lib/acml/gfortran/libacml.so
/usr/lib/acml/gfortran/libacml.so: ELF 64-bit LSB  shared object, x86-64, version 1 (SYSV), dynamically linked, stripped 
```

编译后的对象应该是一样的：

```
$ file mainConsole.o 
mainConsole.o: ELF 64-bit LSB  relocatable, x86-64, version 1 (SYSV), not stripped 
```

问题是您自己项目的 32 位编译，或者更可能是您使用 ACML 的“int64”版本。[您可以在此处](http://developer.amd.com/resources/documentation-articles/knowledge-base/)阅读有关 int64的更多信息。我建议您尝试使用非 int64 版本的 ACML。例如，不要下载 acml-5-3-1-pgi-64bit-int64.tgz，而是下载**acml** -5-3-1-pgi-64bit.tgz。

# javascript - 带来 悬停在前面（被其他元素遮挡时）

> ID：13705895
> 
> 赞同：7
> 
> 时间：2012-12-04T15:07:19.537
> 
> 标签：javascript, svg, d3.js

今天早上我在看[纽约时报关于州补贴的互动，](http://www.nytimes.com/interactive/2012/12/01/us/government-incentives.html)并注意到即使一个州被一个点遮住，它也会在悬停时提前。

例如，覆盖马萨诸塞州的点也部分覆盖了新罕布什尔州，但是当您将鼠标移到新罕布什尔州被覆盖的部分时，新罕布什尔州被提前了。

你认为他们是如何做到这一点的？根据它们在 DOM 中的顺序，这些点位于状态轮廓的前面。我认为在一切之上可能有第二组状态轮廓，监听会触发底层形状的鼠标悬停，但情况似乎并非如此。

我需要在我正在开发的应用程序中实现类似的功能，并且对 SVG 元素的优雅方式感到好奇。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T22:28:25.037

[正如](https://stackoverflow.com/questions/13705895/bring-path-to-front-on-hover-when-obscured-by-other-element#comment18822530_13705895)[Andy](https://stackoverflow.com/users/1538100/andy)所指出的，该 NYT 图形中的圆圈的 CSS 指针事件属性为 none：

```
circle {
    pointer-events: none;
} 
```

[使用此方法](https://stackoverflow.com/a/10608899/1181761)可以在鼠标悬停功能中实现带到最前面的行为：

```
stateShape.on("mouseover",function(){this.parentNode.appendChild(this);}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T19:45:49.153

现在您可以使用以下`raise()`方法：

函数中的示例：

```
highlightSite(site) {
        let selectedSite = d3.selectAll(`[siteName=${site}]`)
        selectedSite.raise()
        selectedSite
            .attr('stroke', 'black')
            .style('opacity', 1)
    } 
```

# android - 谷歌地图 API 测试

> ID：13705897
> 
> 赞同：0
> 
> 时间：2012-12-04T15:07:20.737
> 
> 标签：android, api, google-maps

我知道还有许多其他主题存在 Google Maps API 显示网格而不是地图的问题，这也是我遇到的问题。

不同的是，我以前有过我的工作。我遵循了一堆教程并签署了我的应用程序和所有这些东西，但几天后地图又回到了网格。

我可以生成另一个发布令牌，但我不想每次地图显示网格时都必须这样做，并且调试键无法正常工作。

大家有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:57:04.613

当您签署构建版本时，您是否更新了 Google 地图使用的密钥？

因为如果没有，您将得到一张空白地图。您需要使用用于签署构建的密钥库生成一个新的 Google Maps API 密钥，并将其用于签署的构建。

[https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

然后，您会注意到在使用调试密钥库在 Eclipse 中构建时映射将不起作用，但在导出和签名时会起作用。这是一个烦人的过程。

# excel - 重命名新工作表会产生“内存不足”错误 - 为什么？

> ID：13705899
> 
> 赞同：0
> 
> 时间：2012-12-04T15:07:29.053
> 
> 标签：excel, excel-2007, out-of-memory, vba

我正在尝试制作一张新工作表并使用以下代码为其命名：

```
Sub CREATEWORKSHEETS()

    For Each PC In ActiveWorkbook.PivotCaches
        On Error Resume Next
        PC.Refresh
    Next PC
    PvtCache = ActiveWorkbook.PivotCaches.Create(xlDatabase, "Pivot Data!$AF:$AO")

    Sheets("P&L Pivot").Select
    Application.DisplayAlerts = False
    On Error Resume Next
    Sheets("MAIN").Delete
    Application.DisplayAlerts = True
    On Error GoTo 0
    Sheets.Add.Name = "MAIN"
End Sub 
```

但是，每当它尝试创建新的“MAIN”表时，我总是会收到“Out of Memory”错误。将其拆分为以下内容：

```
Sheets.Add
ActiveSheet.Name = "MAIN" 
```

建议重命名操作是罪魁祸首，但我不知道为什么。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T17:11:34.110

将数据透视缓存设置为等于 AF 到 AO 的整个列会导致您达到 excel 内存限制。尝试将枢轴缓存设置为动态命名的范围，因为您没有一堆额外的单元格被保存在缓存中

如果您不确定您的数据透视缓存可能使用多少内存，请尝试以下操作：（从[本网站复制）](http://www.contextures.com/xlPivot11.html#Memory)

> 您可以使用以下用户定义函数显示数据透视缓存使用的内存。将功能代码存储在工作表模块中。然后，在工作表上，输入公式：
> 
> =获取内存(A3)/1000
> 
> 用数据透视表中的单元格替换 A3。结果以千字节为单位显示。

```
Function GetMemory(rngPT As Range) As Long 'pivot table tutorial by
 contextures.com   Dim pt As PivotTable   Set pt = rngPT.PivotTable  
 GetMemory = ActiveWorkbook _
     .PivotCaches(pt.CacheIndex).MemoryUsed 
End Function 
```

# linux - 如何通过emerge在gentoo中选择软件的版本？

> ID：13705901
> 
> 赞同：3
> 
> 时间：2012-12-04T15:07:35.023
> 
> 标签：linux, gentoo

我想安装django 1.4，但是默认安装版本是1.3.2，请问如何更改版本安装。

我只知道将 dir 更改为 /usr/portage/dev-python/django 并安装 django1.4 的`.ebuild`文件

还有其他方法吗？我阅读了使用标志文件但没有找到方法......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:12:27.737

像这样 ：

```
emerge =django-1.4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-28T22:09:06.977

您可以检查可用的软件包版本：

```
equery list -po vim 
```

使用原子符号选择所需的包

```
emerge -av =app-editors/vim-7.4.273 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T08:52:39.210

出现 -av =dev-python/django-1.4

只要有可用的 ebuild，它将被合并或显示有关取消屏蔽请求的版本号的提示。对于我们的示例，这应该可以解决问题：

```
echo =dev-python/django-1.4 >> /etc/portage/package.keywords 
```

要坚持使用该版本，请务必通过向 /etc/portage/package.mask 添加条目来屏蔽更高版本：

```
echo >=dev-python/django-1.4 >> /etc/portage/package.mask 
```

但要小心......它可能会在未来破坏更新......

# wordpress - CSS 更改在使用 Wordpress CMS 的 Firefox 17.0.1 中不起作用

> ID：13705904
> 
> 赞同：1
> 
> 时间：2012-12-04T15:07:56.210
> 
> 标签：wordpress, firefox, css, wordpress-theming

我正在使用[简单零售插件](http://whatwouldjessedo.com/simple-retail-menus/)并将这个 CSS 类添加到它的 css(display.css) 中：

```
.round
{
border-width: 28px;
-moz-border-image: url("../images/frame2.png") 28 28 round; /*Mozilla version*/
-webkit-border-image: url("../images/frame2.png") 28 28 round; /*Webkit version*/
-o-border-image: url("../images/frame2.png") 28 28 round; /*Opera version*/
-ms-border-image: url("../images/frame2.png") 28 28 round; /*IE syntax when it does support this prop*/
border-image: url("../images/frame2.png") 28 28 round; /*Standard version*/
} 
```

只是一个使用图像的简单边框。我试图将它添加到 Wordpress 自己的样式表中，但同样的问题仍然存在。

它在 Safari 和 Chrome 中有效，但在 Firefox 中无效。我知道边框图像 CSS 在 Firefox 中有效，因为我已经在 Wordpress (v3.4.2) 之外对其进行了测试。

我使用了firebug，它表明它确实使用了该类，但由于某种原因没有在firefox中显示它。我什至试图改变主题。

过去两天我用谷歌搜索、搜索和测试，但一无所获。

谢谢你的帮助

编辑：我正在使用 MAMP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:29:43.540

昨晚我的一个网站也遇到了同样的问题。

我发现唯一有效的方法是更新样式表并将其保存在 wordpress 编辑器中，进入您的数据库，在 wp-options 表中编辑站点 url，将站点所在的文件夹重命名为您在数据库，它将已更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:18:49.730

好吧。似乎在 Firefox 更新到 15.01 之后，他们对读取 css 的方式进行了一些更改。您需要添加：

```
border-style;solid; 
```

在边框图像 css 标记之后。它应该如下所示：

```
.round
{
border-width: 28px;
-moz-border-image: url("../images/frame2.png") 28 28 round; /*Mozilla version*/
-webkit-border-image: url("../images/frame2.png") 28 28 round; /*Webkit version*/
-o-border-image: url("../images/frame2.png") 28 28 round; /*Opera version*/
-ms-border-image: url("../images/frame2.png") 28 28 round; /*IE syntax when it does support this prop*/
border-image: url("../images/frame2.png") 28 28 round; /*Standard version*/

border-style;solid

} 
```

# image - 如何显示拇指？

> ID：13705910
> 
> 赞同：-2
> 
> 时间：2012-12-04T15:08:23.933
> 
> 标签：image, filepath

我是新来的。
我有问题如何在壁纸网站中显示拇指。我想知道向我的访客拇指显示壁纸的最佳和快速方式是什么。在互联网上，我看到大多数人使用新创建的原始图像拇指，而不是显示拇指图像。我想知道从原始动态制作拇指是否更快。

有人可以告诉我一些关于这件事的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:15:18.300

我建议在上传你制作拇指的壁纸时，网上有相应的代码示例。显示页面时，请记住，无论显示大小如何，都会加载显示的图像。假设您有 10 张大小为 4MB 的图像（高分辨率），如果您将它们用作拇指，那么您将需要下载 40MB 的图像。另一方面，如果您对它们竖起大拇指（上传服务器端），那么每个文件（平均基础）将存储 20kB，因此在显示页面时，您只会下载 200kB 的图像。

# python - 如何附加此列表？

> ID：13705913
> 
> 赞同：1
> 
> 时间：2012-12-04T15:08:31.250
> 
> 标签：python

这是我在 python 3.2.3 IDLE 上的代码：

```
numbers = []
numbers = input("(Enter a empty string to quit) Enter a number: ")
while numbers != "":
    numbers = input("(Enter a empty string to quit) Enter a number; ")
numbers.append(n)
print ("The list is", numbers) 
```

现在的问题是，我无法附加列表。如果我让 numbers = int(input( 那么它适用于附加列表，但不会让我退出输入数字。如果我让 numbers = input 像我现在一样，它不会让我附加列表

我怎样才能让这些数字附加到列表中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T15:10:01.947

有两个问题：

1.  您将输入分配给`numbers`而不是`n`;
2.  这`append()`是在错误的地方。

尝试以下操作：

```
numbers = []
n = input("(Enter a empty string to quit) Enter a number: ")
while n != "":
    numbers.append(n)
    n = input("(Enter a empty string to quit) Enter a number; ")
print ("The list is", numbers) 
```

如果要存储整数而不是字符串，请将`append()`行更改为：

```
 numbers.append(int(n)) 
```

从风格上讲，如果第一个提示与所有后续输入的提示相同，我将重组代码如下：

```
numbers = []
while True:
    n = input("(Enter a empty string to quit) Enter a number: ")
    if n == "": break
    numbers.append(n) # or int(n)
print ("The list is", numbers) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:15:40.200

尽管您已经找到了答案，但对于简单的数据输入，这可以大大简化：

```
numbers = list(map(int, iter(input, ''))) 
```

由内而外工作（有点解释）：

*   `iter(input, '')`重复调用，直到`''`满足（空输入）并且`yields`该值
*   获取`map(int,...)`这些值并尝试转换为整数 - 如果不能，则会引发异常
*   `list(...)`然后接受它并创建一个实际的`list`对象
*   `numbers = ...`是错误的，正如它所说:)

然后，可能包装在一个函数中（`functools.partial`在这里使用，但 lambda 很好）：

```
def ask(prompt):
    from functools import partial
    prompt_func = partial(input, prompt)
    return list(map(int, iter(prompt_func, '')))

numbers = ask('Keep entering valid numbers (or a blank line to quit)') 
```

# bash - 从 Unix shell 脚本中的日期字符串中消除时区

> ID：13705915
> 
> 赞同：1
> 
> 时间：2012-12-04T15:08:42.480
> 
> 标签：bash, shell, ksh

我的日期格式如下所示，我想使用 shell 脚本从日期中删除 GMT+05:30。

```
Tue Dec  4 17:30:51 GMT+05:30 2012 
```

和输出应该是

```
Tue Dec  4 17:30:51 2012 
```

我是 shell 脚本的新手，还在学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:33:35.153

`sed`如果您无法更改`date`输出，请使用：

```
... | sed 's/GMT+5:30 //g' | ... 
```

但更好的解决方案是使用`date`格式化功能：

```
date +"%a %b %d %T %Y" 
```

（有关详细信息，请参阅[`man date`](http://unixhelp.ed.ac.uk/CGI/man-cgi?date)）

# extjs4.1 - 商店名称中的 @ 参数是什么？

> ID：13705919
> 
> 赞同：1
> 
> 时间：2012-12-04T15:08:56.693
> 
> 标签：extjs4.1, extjs-mvc

我最近深入研究了源代码（因为我的[另一个问题](https://stackoverflow.com/questions/13699045/customize-the-loader-for-a-mvc-app)）并偶然发现了以下行

```
storeId = (name.indexOf("@") == -1) ? name : name.split("@")[0] 
```

在应用程序控制器的 getStore() 方法中（ExtJS 版本 4.1.3）。

现在我想知道商店名称中的**@whitin**是什么？我以前从未见过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:23:42.413

中的代码`Ext.app.Controller`使用“@”来创建明确的类名，其中很明显哪一部分是类名，哪一部分是命名空间。根据来源，格式应该看起来像`Model@Name.space`。

获取`storeId`您发布的内容的方法只是意味着如果有'@'然后获取类名（'@'之前的部分），如果没有，则获取整个内容。

# git - Symfony - Preprod git、缓存、资产

> ID：13705923
> 
> 赞同：0
> 
> 时间：2012-12-04T15:09:14.350
> 
> 标签：git, deployment, symfony, production-environment

我在 pre-prod 服务器中安装了一个 Symfony 2.1 项目，默认远程拉取“ref”存储库的主分支。

我想让我的 git 开发人员能够在我将他们拉入 prod 之前检查他们在这个 pre-prod (staging) 实例中的修改。

所以在这个 pre-prod 我的开发人员应该有权限

*   从裁判拉
*   清除缓存
*   安装资产

管理它的良好做法是什么？

# ruby-on-rails - 在 Heroku 中，为什么我在尝试设置环境变量时收到 SSL 错误？

> ID：13705926
> 
> 赞同：0
> 
> 时间：2012-12-04T15:09:28.517
> 
> 标签：ruby-on-rails, heroku

我正在尝试为已经部署到 Heroku 的小型 Rails 应用程序设置环境变量。

当我运行命令`heroku config:add VARIABLENAME=somevalue`时，我最终得到一个错误：

```
Setting config vars and restarting whispering-lake-xxx... failed
 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error: hostname was not match with the server certificate (OpenSSL::SSL::SSLError) (Excon::Errors::SocketError) 
```

这是我第一次尝试在 Heroku 上放置一些东西，所以我不知道我是否应该事先进行某种 SSL 设置，或者如何调试它。

有什么建议么？

# git - 将 git 配置为压缩提交，而不是拉取

> ID：13705928
> 
> 赞同：1
> 
> 时间：2012-12-04T15:09:30.440
> 
> 标签：git

是否可以将 git 配置为压缩合并，但不能压缩来自拉取的更改？如果可能的话，我将如何以这种方式配置 git？

我通过配置 git`git config branch.<name>.mergeoptions --squash`

虽然这适用于压缩来自合并分支的提交，但它也尝试在进行拉取时压缩传入的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:18:11.353

在您的 ~/.gitconfig 或 .git/config 每个项目的基础上。

```
...
[alias]
    ms = merge --squash 
```

编辑：根据 git-config 手册页，无法覆盖内置命令。更新了答案以建议为此使用单独的命令。

> git(1) 命令包装器的命令别名 - 例如，在定义“alias.last = cat-file commit HEAD”之后，调用“git last”等效于“git cat-file commit HEAD”。为了避免脚本使用的混乱和麻烦，隐藏现有 git 命令的别名将被忽略。参数由空格分隔，支持通常的 shell 引用和转义。引号对和反斜杠可用于引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:48:46.453

我认为你需要做 a`git fetch`然后 a`git merge --no-squash`做你想做的事。或者，如果您想在单个命令中执行此操作，一个简单的 git 别名（或 bash 别名或函数，就此而言）就足够了：

> git config alias.pull-no-squash '!git fetch; git merge --no-squash'

# regex - Emacs：正则表达式替换以更改大小写（在脚本中）

> ID：13705932
> 
> 赞同：5
> 
> 时间：2012-12-04T15:09:43.337
> 
> 标签：regex, emacs, replace

这与 [Emacs 有关：正则表达式替换以更改大小写](https://stackoverflow.com/questions/677021/emacs-regular-expression-replacing-to-change-case)

我的另一个问题是我需要编写搜索替换脚本，但该`"\,()"`解决方案仅在交互式使用时才有效（对我而言）`(emacs 24.2.1)`。在脚本内部，它给出了错误：“`\'`在替换文本中使用无效”。

我通常会在需要时将“执行替换”写入某些要加载的文件。类似于：（

执行替换`"<\\([^>]+\\)>" "<\\,(downcase \1)>"`tt nil 1 nil (point-min) (point-max)）

应该可以调用一个函数来生成替换`(pg 741 of the emacs lisp manual)`，但是我尝试了以下的许多变体，但没有运气：

```
(defun myfun ()
    (downcase (match-string 0)))

(perform-replace "..." (myfun . ()) t t nil) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:47:02.490

像这样的构造`\,()`只允许在交互式调用中使用`query-replace`，这就是 Emacs 在你的情况下抱怨的原因。

文档中`perform-replace`提到您不应该在 elisp 代码中使用它并提出了一个更好的替代方案，我们可以在此基础上构建以下代码：

```
(while (re-search-forward "<\\([^>]+\\)>" nil t)
  (replace-match (downcase (match-string 0)) t nil)) 
```

* * *

如果您仍想以交互方式向用户查询替换，`perform-replace`那么像您所做的那样使用可能是正确的做法。您的代码中有几个不同的问题：

1.  如[elisp 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Search-and-Replace.html)中所述，替换函数必须采用两个参数（您在 cons 单元格中提供的数据和已经进行的替换次数）。

2.  `query-replace-regexp`如（或[elisp 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Searching-and-Case.html#Searching-and-Case)）的文档中所述，您需要确保将`case-fold-search`or`case-replace`设置为 nil，以便案例模式不会转移到替换。

3.  您需要引用 cons cell `(myfun . nil)`，否则它将被解释为函数调用并过早评估。

这是一个工作版本：

```
(let ((case-fold-search nil))
  (perform-replace "<\\([^>]+\\)>"
                   `(,(lambda (data count)
                       (downcase (match-string 0))))
                   t t nil)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:49:48.013

`C-h f perform-replace`说：

```
Don't use this in your own program unless you want to query and set the mark
just as `query-replace' does.  Instead, write a simple loop like this:

  (while (re-search-forward "foo[ \t]+bar" nil t)
    (replace-match "foobar")) 
```

现在`"<\\,(downcase \1)>"`需要用构建正确字符串的 Elisp 表达式替换，例如`(format "<%s>" (downcase (match-string 1)))`.

如果您确实需要查询和东西，那么您可能想尝试：`C-M-% f\(o\)o RET bar \,(downcase \1) baz RET`然后`C-x RET RET`查看在交互式调用期间构造了哪些参数。

`replace.el`你会看到发现（如果你点击查看函数的源代码会更好`C-h f perform-replace`），`replacements`参数可以采用 (FUNCTION . ARGUMENT) 形式。更具体地说，该代码包含一个注释，提供了一些详细信息：

```
;; REPLACEMENTS is either a string, a list of strings, or a cons cell
;; containing a function and its first argument.  The function is
;; called to generate each replacement like this:
;;   (funcall (car replacements) (cdr replacements) replace-count)
;; It must return a string. 
```

# java - 多平台 HTTP 使用哪些设计模式元素？

> ID：13705935
> 
> 赞同：2
> 
> 时间：2012-12-04T15:09:48.340
> 
> 标签：java, oop, design-patterns, module, polymorphism

我正在设计一个使用异步 HTTP 下载的应用程序。我希望这个应用程序可以在 Android、Windows 桌面和 Mac OS 桌面上运行，这就是我用 Java 开发它并尝试使其非常模块化的原因。

![在此处输入图像描述](../Images/7f31744503b05ab40cb025020824222f.png)

（为清楚起见进行编辑，我使用的库是[AsyncHttpClient](https://github.com/AsyncHttpClient/async-http-client)和[Android-Async-Http](http://loopj.com/android-async-http/)）

我已经有库来处理下载，但问题是 CORE 模块中的特定方法必须能够执行下载功能，而不管使用什么库。我对该怎么做有两个想法。

*   想法 1：在 CORE 中调用一个抽象类`GenericDownloader`，并在特定的应用程序中扩展它，例如`AndroidDownloader`.
*   思路2：在CORE中调用一个接口`DownloadInterface`，在具体的应用程序中实现，类似于思路1。

这两个想法的问题是我无法实例化抽象类或接口，那么如何在 CORE 中实现功能呢？

我还能如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:19:31.310

**试图**

有一个执行实际下载的具体类（在 CORE 中）。这不是 GenericDownloader 抽象类。

您的 GenericDownloader 类将包含这个具体的下载器作为受保护的成员。然后，您的 GenericDownloader 类将成为具体下载器需要监听的任何事件监听器（Complete、IOError 等）。您将需要创建这些侦听器函数。让它们受到保护，因为您的孩子需要覆盖它们。

现在，在您的子类中，您从 GenericDownloader 覆盖那些“虚拟”事件侦听器函数，记住在它们内部调用 super.someDowloadEventHandler(...)。这些覆盖中的其他内容将是您特定于平台的代码。请记住，您仍然可以从任何孩子访问具体下载器以进行其他操作。

您不实例化抽象类。您只需在抽象类的构造函数中实例化具体下载器。所以，记得在你的子类的构造函数中调用 super() 。

您现在从项目中引用了正确的库，然后实例化 AndroidDownloader 实例（如果您使用的是 Android、WindowsDownloader for Windows 等）。它们中的任何一个都将具有 CORE 的较低级别的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:02:23.210

首先，是否使用接口或抽象基类是核心是否能够并且*应该*为下载器的实现提供功能的问题。如果不能或不应该，请不要使用抽象基类。首选接口而不是抽象基类。即使可以，考虑提供一个单独的类来提供实现可以使用的功能。更喜欢封装而不是继承。

您的具体问题的答案是，“这取决于”。一般来说，您需要一些方法来告诉核心在运行时可用的实现。

根据您打包事物的方式，它可能就像在核心中拥有一个加载器工厂方法一样简单，该方法`Class.forName()`会依次查找每个实现，直到找到一个；这假设您将一个实现与每个分布式 JAR 打包在一起。

否则，它可能会在某处使用配置条目来指定实现的类名；再次反射用于查找类。

否则，您可以使用反射并搜索类路径以查找实现您的接口的类。

否则，您可以使用`java.net.URLClassLoader`动态创建类路径并使用它动态加载类。

# cmake - 生成期间的 CMake 运行命令

> ID：13705937
> 
> 赞同：2
> 
> 时间：2012-12-04T15:09:51.627
> 
> 标签：cmake

我正在尝试让 cmake 下载一些文件。当按下“生成”按钮时，是否可以这样做一次？我只能将其设置为每次按下配置按钮或每次构建项目时运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T16:12:25.980

CMakeLists 在配置时处理，所以你不能让它在生成时做事。但是，您可以设置缓存变量并将其用作标志来确定是否应该进行下载。就像是：

```
if(NOT DOWNLOAD_HAPPENED)
  execute_process( ... do the downloading stuff ... )
  set(DOWNLOAD_HAPPENED TRUE CACHE BOOL "Has the download happened?" FORCE)
endif() 
```

这将在第一次配置时执行下载，并且不再执行（除非用户手动重置 DOWNLOAD_HAPPENED）变量。但是，如果您真的需要在*最后一次*配置时进行下载，那么您就不走运了，AFAIK。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:21:42.917

这样的事情应该会有所帮助：

```
add_custom_command(
   OUTPUT myfile.txt
   COMMAND wget http://myurl.com/myfile.txt
   ) 
```

**编辑 1**

需要将其作为主命令的依赖项：

```
add_dependencies(<myprogram> wget) 
```

# android - 这样我可以在 Intent 内发送 Toast 吗？

> ID：13705938
> 
> 赞同：3
> 
> 时间：2012-12-04T15:09:50.643
> 
> 标签：android, packages

我的应用程序中有 4 个按钮，在其中 2 个按钮中，我需要检查我要运行的应用程序是否在我的设备中。如果存在，则运行，否则，显示敬酒。

问题是当我展示敬酒时，应用程序关闭。在 startActivity(Intent) 中显示 Toast 的最佳方式是什么？？？

这是代码：

```
public void onClick(View v) {

    Intent LaunchIntent = null;
    boolean isTouch = isAppInstalled("com.enflick.android.ping");
    boolean isWpress = isAppInstalled("org.wordpress.android");

    switch (v.getId()) {
    case (R.id.botonPortafoli):
        LaunchIntent = new Intent(this, PortafoliActivity.class);
        break;
    case (R.id.botonSocial):
        LaunchIntent = new Intent(this, SocialActivity.class);
        break;

    case (R.id.botonTouch):

        if (isTouch) {
            LaunchIntent = getPackageManager().getLaunchIntentForPackage(
                    "com.enflick.android.ping");

        } else {
            Toast.makeText(this, R.string.no_inst, Toast.LENGTH_LONG)
                    .show();

            break;
        }

        break;
    case (R.id.botonWpress):

        if (isWpress) {
            LaunchIntent = getPackageManager().getLaunchIntentForPackage(
                    "org.wordpress.android");

            break;

        } else {

            Toast.makeText(this, R.string.no_inst, Toast.LENGTH_LONG)
            .show();

            break;
        }

    }
startActivity(LaunchIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:53:16.743

而不是`isAppInstalled("com.enflick.android.ping")`你可以用 try/catch 包围你的电话。我认为您无法在不实际启动应用程序的情况下检查该应用程序是否已安装...

```
public void onClick(View v) {

    Intent LaunchIntent = new Intent();

    if (v.getId() == (R.id.botonPortafoli)) {
        LaunchIntent = new Intent(this, PortafoliActivity.class);
        startActivity(LaunchIntent);
    } else if (v.getId() == (R.id.botonSocial)) {
        LaunchIntent = new Intent(this, SocialActivity.class);
        startActivity(LaunchIntent);
    } else if (v.getId() == (R.id.botonTouch)) {
        try {
            LaunchIntent = getPackageManager().getLaunchIntentForPackage(
                    "com.enflick.android.ping");
            startActivity(LaunchIntent);
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(this, R.string.no_inst, Toast.LENGTH_LONG).show();
        }
    } else if (v.getId() == (R.id.botonWpress)) {
        try {
            LaunchIntent = getPackageManager().getLaunchIntentForPackage(
                    "org.wordpress.android");
            startActivity(LaunchIntent);
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(this, R.string.no_inst, Toast.LENGTH_LONG).show();
        }
    }
} 
```

希望这对你有用，当我试图验证官方 Twitter 应用程序是否安装在设备上时，它对我有用。

顺便说一句，为了安全起见，最好使用`if-else`而不是`switch`避免资源 id 不是最终问题。

# jquery - 在 jquery 中显示发送结果之前显示加载

> ID：13705945
> 
> 赞同：9
> 
> 时间：2012-12-04T15:10:15.820
> 
> 标签：jquery, ajax, loading, send

我有一个简单的 jquery 代码，可以使用 ajax 在 jQuery 模式窗口中发送内容！一切正常，没有任何问题。在正常情况下，单击发送按钮后，1-2 秒后此代码显示结果，

```
function AddFastqpro(action) {
    var b = {};
    b[dle_p_send] = function () {
        var response = $('#dle-poke').val()
        $.post(dle_root + 'engine/ajax/fast.php', { text: response, action: action },
        function (data) {
            if (data == 'ok') {
                DLEalert(dle_p_send_ok, dle_info);
            }
            else { DLEalert(data, dle_info); }
        });
    };

    $('body').append("<div id='dlepopup' style='display:none'><textarea id='dle-poke'></textarea></div>");

    $('#dlepopup').dialog({
        autoOpen: true,
        modal: true,
        draggable: false,
        width: 350,
        dialogClass: "modalfixed",
        buttons: b
    });
}; 
```

我的问题是，如何在单击发送后和显示结果之前添加和显示加载图片？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-04T15:14:21.497

你可以这样 `ajaxStart()`做 `ajaxComplete()`

```
$("#loading").ajaxStart(function(){
   $(this).show();
 });

$("#loading").ajaxComplete(function(){
   $(this).hide();
 }); 
```

或者

```
$.ajax({
   url : dle_root + 'engine/ajax/fast.php',
   data: { text: response, action: action },
   beforeSend: function(){
     $("#loading").show();
   },
   complete: function(){
     $("#loading").hide();
   },
   success:  function (data) {
        if (data == 'ok') {
            DLEalert(dle_p_send_ok, dle_info);
        }
        else { DLEalert(data, dle_info); }
    });
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T15:18:12.433

```
$('#button').click(function(){
    $('#loading-div').html('<img src="..." />');
    $.ajax({
       type: 'POST',
       url: '...',
       data: {...},
       success: function(response) {
          $('#loading-div').html('');
       }
    });
}); 
```

如果您有带有 的按钮`id="button"`，以及一些`<div id="loading-div"></div>`可以显示图像的按钮

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T15:16:50.040

您可以使用`$.ajax()`代替`$.post()`，并添加一个`beforeSend`功能

# google-apps-script - Google 应用程序脚本 UiApp 不在 Internet Explorer 中居中元素

> ID：13705946
> 
> 赞同：1
> 
> 时间：2012-12-04T15:10:21.283
> 
> 标签：google-apps-script

我的网络应用程序中有面板，我正在设置样式属性，如下所示：

```
panel.setStyleAttribute('margin-left', 'auto').setStyleAttribute('margin-right','auto'); 
```

这在镀铬中非常糟糕，如预期的那样使元素居中。但是在 IE 中，元素被卡在屏幕的左侧。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:14:32.550

与其他浏览器不同，margin:auto 仅在您强制标准模式而不是怪癖模式时在 Internet Explorer 中有效。

UiApp 默认使用 quirks 模式 CSS 规则，除非 (a) 您在初始应用程序创建时加载 GuiBuilder 组件，这会强制标准模式，或者 (b) 您明确要求标准模式。

这会将您设置为标准模式，因此也可以在 IE 中工作：

```
function doGet() {
  var app = UiApp.createApplication().setStandardsMode(true);
  return app.add(app.createLabel('centered').setStyleAttributes(
      {marginLeft: 'auto',
       marginRight: 'auto',
       width: '100px'}));
} 
```

请注意**setStandardsMode(true)** - 没有它，它将无法在 IE 中工作。不过要小心，因为标准模式样式的解释有时与怪癖模式不同，因此这可能会改变布局的其他方面。

一些注意事项：

*   setStandardsMode 仅在初始应用程序创建时（即在 doGet 中）受到尊重，如果您稍后尝试在处理程序中设置它，则会被忽略。
*   GuiBuilder 的布局规则采用标准模式，这就是隐式强制标准模式的原因。如果您在 doGet 期间未设置为标准模式的应用程序的回调中加载 GuiBuilder 组件（显式地或因为您加载了另一个组件），由于它处于怪癖模式，布局和样式可能会发生细微的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:14:06.367

对 CSS 样式属性使用规范化形式

```
panel..setStyleAttribute('marginLeft', 'auto').setStyleAttribute('marginRight','auto') 
```

[您可以在此处](https://developers.google.com/apps-script/ui_supportedStyles)查看支持的样式属性列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:19:08.017

我已经用谷歌记录了这个问题的问题#2159。

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=2159](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2159)

# html - IE8 中的溢出-X

> ID：13705951
> 
> 赞同：0
> 
> 时间：2012-12-04T15:10:29.413
> 
> 标签：html, css, internet-explorer

我在页面的主体标签上放置了overflow-x:hidden，这样任何超出窗口的内容都将不可见。没有滚动条出现，但是，我仍然可以向左/向右滚动来查看内容（有点违背了溢出-x的目的）。

-ms-overflow-x: 也不能解决问题。

有一个 900px 的包装器；

在包装器内部，有一个 div 里面：

```
width:100%;
padding-right:300px;
position:absolute;
left:200px; 
```

我希望内部 div 悬在窗口的右侧而不使其滚动（并在其左侧留下 200px 的空间）。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:36:44.633

更多的 HTML/CSS 会很有用，但考虑到你现在拥有的东西，我的第一个想法是你的包装器仍然设置为`position: static`（HTML 元素的默认值）。

如果添加`position: relative`到包装器中，它将包含绝对定位的元素，并应将其限制为溢出限制。

此外，您可能想了解该`box-sizing`属性以及 W3C 盒模型的工作原理。简而言之，您的 padding 增加了元素的宽度，因此它实际上是 (100% + 300px)，这导致尺寸大于容器。

如果你不想弄乱`box-sizing`，你也可以添加`max-width: 100%`到你的绝对 div 以强制它不要从它的容器中长出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:13:22.027

由于 div 的宽度是 100%，所以永远不会有溢出，因为 div 将始终适合 100% 的视口（假设您没有更改 body 标签的大小）。

至于内边距，内边距是在宽度之后添加的，所以你说 div 是它的容器（body 标签）宽度的 100%，而内边距是向右额外的 300px，这将是不可见，因为它在视口之外。

您可能想尝试给 div 一个明确的尺寸宽度并以这种方式进行试验。

查看您的标记示例也可能会有所帮助，以了解您要实现的目标。

# cakephp - Cakephp 获得最长的未修改条目

> ID：13705952
> 
> 赞同：0
> 
> 时间：2012-12-04T15:10:28.613
> 
> 标签：cakephp, model

我有一个模型 A

```
$hasMany = array('B' => array('order' => 'B.created DESC'), 
                 'C' => array('order' => 'C.created ASC')
           ); 
```

所以现在我想从我的数据库中获取 A(B,C) 的 5 个最荒凉的条目，这些条目没有被修改的时间最长（包括 B 和 C 的“修改”字段）。

我怎么做？

/编辑：换句话说：假设我有一个模型用户，其中包含姓名，地址，电子邮件等信息。用户在他的页面上也有许多模型帖子。他的页面上也有很多其他模特。所以我们在 User:Post 和 User:Other 中有 1:n 的关系现在我想获取我的用户的那 5 个用户，其最高的“修改”值（User.modified、Post.modified 或 Other.modified）是一个他们五个最低的所有用户。换句话说：最长时间没有更新个人资料的 5 个用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:24:32.503

我预见到这种技术将来会出现一些数据不一致的情况。我会这样做。

将字段添加到名为 AppController.php 的用户表中`lastactivity` 添加 beforeSave 函数

```
public function beforeSave() {
   $save_data = $this->data;
   if(isset($save_data['User']['modified']) || isset($save_data['Post']['modified'] || isset($save_data['Other']['modified']))){
      $data = array();
      $data['User']['id'] = $this->Auth->user('id');
      $data['User']['lastactivity'] = date("Y-m-d H:i:s");
      $this->User->save($data);
   }

} 
```

# javascript - 使用 require js 命名 Backbone 应用程序

> ID：13705953
> 
> 赞同：2
> 
> 时间：2012-12-04T15:10:43.883
> 
> 标签：javascript, backbone.js, namespaces, requirejs, js-amd

我正在尝试为我的主干应用程序创建一个命名空间，以便我可以在全球范围内拨打电话。

通常，我会这样做：

```
var myNamespace = window.myNamespace || {};
myNamespace.SomeView = Backbone.View.extend(..); 
```

不知道如何使用 require js 来实现这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:19:24.573

你可以在你的`require`or`define`调用中做同样的事情，`window`'s 仍然存在（如果你在浏览器中工作）。

```
// views/app.js
define(['router', 'views/main-view'], function (router, mainView) {
  var App = function () { /* main app module */ };
  // do your "global" export
  window.App = App;
  return App;
});

// views/header-view.js
define(['views/app', 'models/user'], function (App, User) {
  // your header view code here
  // note that you have access to `App` already in a closure
  // but you can still talk to it by doing
  globalAppReference = window.App;
  globalAppReference === App; // true
}); 
```

问题是你为什么需要它？理想情况下，您的所有模块都将使用 requireJS 定义，因此您无需通过全局对象引用它们。

# c++ - C++ 运行可执行文件并将输出通过管道传输到文件

> ID：13705955
> 
> 赞同：2
> 
> 时间：2012-12-04T15:10:51.447
> 
> 标签：c++, mfc

首先，我对 C++ 很陌生。

我想要完成以下任务：

*   执行以下命令：“SampleApp.exe -cf test.xml”
*   我需要以隐藏模式执行的 shell
*   我需要 C++ 应用程序等到 SampleApp 完成
*   如果 SampleApp 花费的时间超过 X，那么我需要终止该过程
*   我想将 SampleApp 的输出通过管道传输到文件 (sample.log)

到目前为止，我有以下内容：

```
SHELLEXECUTEINFO lpExecInfo;
lpExecInfo.cbSize  = sizeof(SHELLEXECUTEINFO);
lpExecInfo.lpFile = L"SampleApp.exe";
lpExecInfo.fMask = SEE_MASK_DOENVSUBST|SEE_MASK_NOCLOSEPROCESS;     
lpExecInfo.hwnd = NULL;  
lpExecInfo.lpVerb = L"open";
lpExecInfo.lpParameters = L"-cf test.xml";
lpExecInfo.lpDirectory = NULL;
lpExecInfo.nShow = SW_HIDE; // hide shell during execution
lpExecInfo.hInstApp = (HINSTANCE) SE_ERR_DDEFAIL;
ShellExecuteEx(&lpExecInfo);

// wait until the process is finished
if (lpExecInfo.hProcess != NULL)
{
    ::WaitForSingleObject(lpExecInfo.hProcess, INFINITE);
    ::CloseHandle(lpExecInfo.hProcess);
} 
```

上面的代码实现了除了管道输出到文件之外的所有内容。但是，我似乎无法使用 ShellExecute。看来我需要改用 CreateProcess 。我希望有更多 C++ 经验的人能够为我提供与我的代码和管道输出等效的 CreateProcess。如果不是，至少确认我想做的事情是可能的，并为我指明正确的方向。

- 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T17:06:33.223

除非您感觉特别受虐或确实需要优化此操作，否则请使用`_popen`创建子进程。这将返回 a `FILE *`，您可以从中读取孩子的输出。从那里读取，写入文件，完成。

```
FILE *child = _popen("child.exe", "r");
FILE *result = fopen("result.txt", "w");

// error checking omitted.

char buffer[1024];

while (fgets(buffer, sizeof(buffer), child))
    fputs(buffer, result); 
```

自己做这件事（使用 Windows API）当然是可能的，甚至可以减少开销，但它的*工作量*要大得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:17:24.613

你会想要熟悉[这段代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx)，因为这正是你想要做的。您将需要添加一些代码以[写入](http://msdn.microsoft.com/en-us/library/z5hh6ee9%28v=vs.80%29.aspx)`ReadFromPipe`函数中的文件。

# c++ - (QWebView) QWidget：必须在 QPaintDevice 之前构造一个 QApplication

> ID：13705956
> 
> 赞同：0
> 
> 时间：2012-12-04T15:10:52.093
> 
> 标签：c++, qt

只是试图制作一个简单的网络查看器应用程序，以便我可以在小部件中查看网页，但我收到了错误：

```
QWidget: Must construct a QApplication before a QPaintDevice 
```

我觉得这是webkit的问题？我正在静态链接这个项目。

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui>
#include <QWebPage>
#include <QtWebKit>
#include "Windows.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QWebView *view = new QWebView(parent);
         view->load(QUrl("http://google.com/"));
         view->show();

}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

主文件

```
#include "mainwindow.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    MainWindow w;
    w.show();

    return a.exec();
} 
```

。轮廓

```
QT       += core gui webkit network

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = webkittest
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

头文件

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QWebView>
#include <QUrl>
#include <QtPlugin>
#include <QGridLayout>
#include <QSystemTrayIcon>
#include <QMenu>
#include <QMessageBox>
#include <QDialog>
#include <QtWebKit>

class QAction;
 class QCheckBox;
 class QComboBox;
 class QGroupBox;
 class QLabel;
 class QLineEdit;
 class QMenu;
 class QPushButton;
 class QSpinBox;
 class QTextEdit;

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

protected:
     //void closeEvent(QCloseEvent *event);
     //void keyPressEvent(QKeyEvent *);

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

signals:

private slots:
        //void onSslErrors(QNetworkReply* reply, const QList<QSslError> &errors);

private:
    Ui::MainWindow *ui;
    QWebView* m_pWebView;

#endif // MAINWINDOW_H 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:21:54.797

通过安装最新版本的 Qt 框架并动态链接 webkit 来解决此问题，因为它们已禁用静态链接。

# javascript - Javascript / jQuery Windows 8 屏幕键盘

> ID：13705967
> 
> 赞同：6
> 
> 时间：2012-12-04T15:11:48.070
> 
> 标签：javascript, jquery, windows, windows-8, keyboard

我正在尝试构建一个应用程序，如果用户激活页面，则会发生焦点事件并聚焦到文本字段中。半心半意的期待，当我`.focus()`在输入框中调用时，Windows 8 会弹出屏幕键盘。事实并非如此。

有谁知道当文本字段通过 javascript 聚焦时，如何让 Windows 8 屏幕键盘出现。

如果用户“敲击”文本字段，焦点事件就会触发并且键盘出现。

我尝试绑定到`touchstart`、 '和`touchend`，但所有这些似乎都没有激活屏幕键盘。`click``focus`

此应用程序将在 Windows 8 上严格运行，因此无需使其他没有内置屏幕键盘的平台正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:19:54.557

你不能。只有用户操作才能打开屏幕键盘。这是设计使然。见[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/225025e1-ef9e-4044-a635-563027ed78eb#29feeaa9-3763-4cdb-ab64-4a0e0cfa7169)。

# java - 如何绘制不同颜色的多条线并撤消，重做android中的路径？

> ID：13705973
> 
> 赞同：3
> 
> 时间：2012-12-04T15:12:22.543
> 
> 标签：java, android, bitmap

我想用不同的颜色在视图上绘制多条线并撤消，重做android中的路径。

我使用位图绘制选项，每条路径都有唯一的颜色，但撤消，重做不起作用..

这是我的位图绘制代码：

```
public MyView(Context context, Object object) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setColor(0xFFFFFF00);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);

    mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
}

protected void onSizeChanged(int w, int h, int oldw, int oldh) 
{
    super.onSizeChanged(w, h, oldw, oldh);
}

protected void onDraw(Canvas canvas) 
{
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    for (Path p : paths)
    {
        canvas.drawPath(p, mPaint);
    }
    canvas.drawPath(mPath, mPaint);
}

public boolean onTouchEvent(MotionEvent event)
{
    float x = event.getX();
    float y = event.getY();
    int action = event.getAction();
    int action1=event.getAction();
    switch (event.getAction())
    {
    case MotionEvent.ACTION_DOWN:
        undonePaths.clear();
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
        startPoint = new PointF(event.getX(), event.getY());
        endPoint = new PointF();
        invalidate();
        //   isDrawing = true;
        break;
    case MotionEvent.ACTION_MOVE:
        float dx = Math.abs(x - mX);
        System.out.println("action move");
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
        {
            //  currentDrawingPath.path.quadTo(mX,mY,(x + mX)/2, (y + mY)/2);
        }
        mX = x;
        mY = y;
        endPoint.x = event.getX();
        endPoint.y = event.getY();
        isDrawing = true;
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        mPath.lineTo(mX, mY);
        paths.add(mPath);
        mPath = new Path();
        //  mCanvas.drawPath(mPath, ppaint);
        endPoint.x = event.getX();
        endPoint.y = event.getY();
        isDrawing = false;
        invalidate();
        break;
    default:
        break;
    }       
} 
```

![位图画布的输出][1] [1]：http: [//i.stack.imgur.com/9aQvE.png](http://i.stack.imgur.com/9aQvE.png)

如果我为路径选择蓝色，则没有使用位图我会遇到颜色问题，这意味着所有以前的路径都将更改为蓝色；

这是我的代码

```
protected void onDraw(Canvas canvas) 
{
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    for (Path p : paths)
    {
        canvas.drawPath(p, mPaint);
    }
    canvas.drawPath(mPath, mPaint);
} 
```

![使用画布绘图的无位图输出][2] [2]：http: [//i.stack.imgur.com/eDp5Y.png](http://i.stack.imgur.com/eDp5Y.png)

请帮助我在 android 中绘制具有不同颜色的唯一路径的多条路径。提前感谢........

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:10:06.433

当您处理 MotionEvent.ACTION_UP 时：您需要保存用于绘制路径的颜色，如下所示：

```
case MotionEvent.ACTION_UP:
    paths.add(mPath);
    colorsMap.put(mPath,selectedColor); // store the color of mPath
    ... 
```

在绘制路径之前，您需要设置绘制颜色：

```
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    for (Path p : paths)
    {
        mPaint.setColor(colorsMap.get(p));
        canvas.drawPath(p, mPaint);
    }
    mPaint.setColor(selectedColor);
    canvas.drawPath(mPath, mPaint);
} 
```

colorsMap 是一个简单的实例变量：

```
private Map<Path, Integer> colorsMap = new HashMap<Path, Integer>(); 
```

要实现撤消/重做功能，您只需从路径中删除最后一个元素（并将其存储在 undoList 中，以便重做时可以恢复它）。请参阅[Android Canvas 重做和撤消操作](https://stackoverflow.com/questions/11114625/android-canvas-redo-and-undo-operation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T12:46:22.513

这个工作代码。我在我自己的应用程序上测试它，它工作得很好。可能对你有帮助。请发表评论。

```
 public class Main extends Activity implements OnColorChangedListener {
        //public static int selectedColor = Color.BLACK;
        public static ArrayList<Path> mMaindialog;
        // private ArrayList<Path> undonePaths;
        // public int selectedcolor;
        private static final String COLOR_PREFERENCE_KEY = "color";
        private FrameLayout relativelayout;
        static String sdpath,location;
        Boolean i;
        // Instance variables
        private Bitmap mBitmap=null;
        Bitmap bitmap;
        private Paint mPaint, mBitmapPaint, mPaint1;
        private MyView mView;
        ImageView idd;
        // private Path mPath;
        int slll = Color.BLACK;
        Bitmap map=ListView5.bMap;
        private Button ClearPaint, Colorpaint;
        Ghostdatabase gost;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
             idd=(ImageView)findViewById(R.id.imageView1);
            relativelayout = (FrameLayout) findViewById(R.id.frameLayout);

            DisplayMetrics metrics = getBaseContext().getResources()
                    .getDisplayMetrics();
            int w = metrics.widthPixels;
            int h = metrics.heightPixels;

            System.out.println(" width " + w);
            System.out.println(" height " + h);

            mView = new MyView(this, w, h);
            mView.setDrawingCacheEnabled(true);

            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(Color.BLACK);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(4);

            ClearPaint = (Button) findViewById(R.id.ne);
            ClearPaint.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // mBitmap.eraseColor(Color.TRANSPARENT);
                    // mPath.reset();
                    // mView.invalidate();

                    mView.onClickUndo();

                }
            });
            Button save22 = (Button) findViewById(R.id.save);
            save22.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    File cacheDir;
                    Toast.makeText(Main.this, "Photo", 500).show();
                    Bitmap icon;
                    relativelayout.setDrawingCacheEnabled(true);

                    icon = Bitmap.createBitmap(relativelayout.getDrawingCache());
                    Bitmap bitmap = icon;
                    relativelayout.setDrawingCacheEnabled(false);
                    // File mFile1 = Environment.getExternalStorageDirectory();
                    Date d = new Date();
                    String fileName = d.getTime() + "mg1.jpg";

                    File storagePath = (Environment.getExternalStorageDirectory());
                    File dest = new File(storagePath + "/CityAppImages");

                    if (!dest.exists()) {
                        dest.mkdirs();

                    }

                    File mFile2 = new File(dest, fileName);
                    sdpath = mFile2.getAbsolutePath();

                    Log.d("qqqqqqqqqqqqqqqqqqqqqqq", "zzzzzzzz" + sdpath);
                    try {
                        FileOutputStream outStream;

                        outStream = new FileOutputStream(mFile2);

                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);

                        outStream.flush();

                        outStream.close();
                        Toast.makeText(Main.this, "Photo Saved Sucessfully", 500)
                                .show();
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {

                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        Toast.makeText(Main.this, "Photo Not Saved Sucessfully",
                                500).show();
                    }

                    gost = new Ghostdatabase(Main.this);
                    gost.open();

                    gost.insertTitle(sdpath);
                }
            });

            Button view = (Button) findViewById(R.id.listtt);
            view.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    Intent ii = new Intent(Main.this, ListView5.class);
                    startActivity(ii);

                }
            });

            Button Colorpaint = (Button) findViewById(R.id.Color);
            Colorpaint.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    int color = PreferenceManager.getDefaultSharedPreferences(
                            Main.this).getInt(COLOR_PREFERENCE_KEY, Color.WHITE);
                    // int _color = R.color.red;
                    new ColorPickerDialog(v.getContext(),
                            new OnColorChangedListener() {

                                public void colorChanged(int color) {
                                    mPaint.setColor(color);

                                    slll = color;

                                    Log.i("TAG", "mpaint one" + mPaint);
                                }
                            }, mPaint.getColor()).show();
                    Log.i("TAG", "mpaint two" + mPaint);
                }
            });
            relativelayout.addView(mView);
        }

        // //////////******************* Pinting view
        // *******************///////////////////

        public class MyView extends View implements OnTouchListener {
            private Map<Path, Integer> colorsMap = new HashMap<Path, Integer>();
            private ArrayList<Path> mMaindialog = new ArrayList<Path>();
            private ArrayList<Path> undonePaths = new ArrayList<Path>();
            int colorPicked = slll;
            // Paint mPaint1;

            private Canvas mCanvas;
            private Path mPath;

            public MyView(Context c, int w, int h) {
                super(c);
                if(GlobalVariable.impath==1)
                {
                    Log.d("","111111"+GlobalVariable.impath);
                    System.out.println(GlobalVariable.impath);
                    Intent ii = getIntent();
                     location = ii.getStringExtra("IMAGE");
                    // bitmap.recycle();
                     Log.d("","location"+location);
                     bitmap = BitmapFactory.decodeFile(location);
                     mBitmap = Bitmap.createScaledBitmap(bitmap,300, 300,false);
                     Log.d("hhhhhhhhhhhhhhhssssssss","mBitmap"+mBitmap);
                     //mBitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
                    // idd.setImageBitmap(mBitmap);
                    Log.d("hhhhhhhhhhhhhhhssssssss","GlobalVariable.impath"+GlobalVariable.impath);
                }
                else if(GlobalVariable.impath==2){
                    //bitmap.recycle();
                    Log.d("","22222222222222222222222"+GlobalVariable.impath);
                    bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.base);
                    mBitmap = Bitmap.createScaledBitmap(bitmap,100, 100, false);
                    //mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
                    Log.d("hhhhhhhhhhhhhhhssssssss1111111","mBitmap"+mBitmap);
                }

    //          
                mCanvas = new Canvas(mBitmap);
                mPath = new Path();

            }

            @Override
            protected void onSizeChanged(int w, int h, int oldw, int oldh) {
                super.onSizeChanged(w, h, oldw, oldh);

            }

            @Override
            protected void onDraw(Canvas canvas) {

                canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

                for (Path p : mMaindialog) {
                    mPaint.setColor(colorsMap.get(p));
                    canvas.drawPath(p, mPaint);
                }
                mPaint.setColor(slll);
                canvas.drawPath(mPath, mPaint);
            }

            // //////************touching evants for painting**************///////
            private float mX, mY;
            private static final float TOUCH_TOLERANCE = 0;

            private void touch_start(float x, float y) {
                mPath.reset();
                mPath.moveTo(x, y);
                mX = x;
                mY = y;
                undonePaths.clear();
            }

            private void touch_move(float x, float y) {
                float dx = Math.abs(x - mX);
                float dy = Math.abs(y - mY);
                if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                    mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
                    mX = x;
                    mY = y;
                }
            }

            private void touch_up() {
                mPath.lineTo(mX, mY);
                // commit the path to our offscreen
                mCanvas.drawPath(mPath, mPaint);
                // kill this so we don't double draw
                mPath = new Path();
                mPath.reset();
                mMaindialog.add(mPath);
            }

            @Override
            public boolean onTouchEvent(MotionEvent event) {
                float x = event.getX();
                float y = event.getY();
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    // touch_start(x, y);
                    // invalidate();
                    undonePaths.clear();
                    mPath.reset();
                    mPath.moveTo(x, y);
                    mX = x;
                    mY = y;
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    // touch_move(x, y);
                    // invalidate();
                    float dx = Math.abs(x - mX);
                    float dy = Math.abs(y - mY);
                    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
                        mX = x;
                        mY = y;
                    }
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    // touch_up();
                    // invalidate();
                    mPath.lineTo(mX, mY);
                    mMaindialog.add(mPath);
                    colorsMap.put(mPath, slll);
                    mPath = new Path();
                    mPath.reset();
                    invalidate();
                    break;
                }
                return true;
            } // end of touch events for image

            private Paint createPen(int colorPicked) {
                // TODO Auto-generated method stub
                mPaint1 = new Paint();
                mPaint1.setColor(colorPicked);
                mPaint1.setAntiAlias(true);
                mPaint1.setDither(true);
                mPaint1.setStyle(Paint.Style.STROKE);
                mPaint1.setStrokeJoin(Paint.Join.ROUND);
                mPaint1.setStrokeCap(Paint.Cap.ROUND);
                // mPaint1.setStrokeWidth(3);
                return mPaint1;
            }

            public void onClickRedo() {
                if (undonePaths.size() > 0) {
                    mMaindialog.add(undonePaths.remove(undonePaths.size() - 1));
                    mView.invalidate();

                } else {

                }
                // toast the user
            }

            public void onClickUndo() {
                if (mMaindialog.size() > 0) {
                    undonePaths.add(mView.mMaindialog.remove(mView.mMaindialog
                            .size() - 1));
                    mView.invalidate();
                }

                else {

                }
            }

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                // TODO Auto-generated method stub
                return false;
            }
        }// end MyView

        @Override
        public void colorChanged(int color) {
            // TODO Auto-generated method stub
            PreferenceManager.getDefaultSharedPreferences(this).edit()
                    .putInt(COLOR_PREFERENCE_KEY, color).commit();
            slll = color;
        }

    } 
```

# ruby-on-rails - 已完成 500 内部服务器错误；RestClient::NotAcceptable（406 不可接受）

> ID：13705977
> 
> 赞同：2
> 
> 时间：2012-12-04T15:12:36.713
> 
> 标签：ruby-on-rails, windows, localhost, environment

我是 Rails 和 stackoverflow 的新手，所以我会尽量明确。我要求更改某人的项目，因此我获取了源代码并尝试使其在我自己的工作计算机（在 Windows 上...）上运行，以在我的本地浏览器上对其进行测试（参见：rails s）。该项目假设正在运行，因为它已经在生产中，所以我认为问题来自我自己的工作环境。安装完所有需要的 gem 后，运行 bundle install 并启动数据库服务器（项目使用的是 mongodb），我运行 rails server。该命令实际上有效，但是当我尝试使用本地主机地址（http://localhost:3000/）上的任何浏览器连接应用程序时，我收到一个错误，我真的不明白原因......

这是我得到的日志：

* * *

```
Started GET "/" for 127.0.0.1 at 2012-12-04 14:51:30 +0100
Processing by HomeController#index as HTML
** [Localeapp] 1354629090-- Handling translation updates
** [Localeapp] 1354629090 - polling
** [Localeapp] API CALL: get https://api.localeapp.com/v1/projects/hhMxHgKAzj9p1dFuS0GnTTnemJ5F9dXLDuCa1KacQSymUcmTFk/translations.yml?updated_at=1354612995
** [Localeapp] ATTEMPT 1
Completed 500 Internal Server Error in 1192ms

RestClient::NotAcceptable (406 Not Acceptable):
  rest-client (1.6.7) lib/restclient/abstract_response.rb:48:in `return!'
  rest-client (1.6.7) lib/restclient/request.rb:230:in `process_result'
  rest-client (1.6.7) lib/restclient/request.rb:178:in `block in transmit'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/net/http.rb:745:in `start'
  rest-client (1.6.7) lib/restclient/request.rb:172:in `transmit'
  rest-client (1.6.7) lib/restclient/request.rb:64:in `execute'
  rest-client (1.6.7) lib/restclient/request.rb:33:in `execute'
  localeapp (0.5.2) lib/localeapp/api_caller.rb:66:in `make_call'
  localeapp (0.5.2) lib/localeapp/api_caller.rb:28:in `call'
  localeapp (0.5.2) lib/localeapp/api_call.rb:6:in `api_call'
  localeapp (0.5.2) lib/localeapp/poller.rb:43:in `poll!'
  localeapp (0.5.2) lib/localeapp/rails/controller.rb:14:in `handle_translation_updates'
  activesupport (3.2.3) lib/active_support/callbacks.rb:429:in `_run__744959596__process_action__507377612__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.1) lib/omniauth/builder.rb:48:in `call'
  mongoid (2.5.0) lib/rack/mongoid/middleware/identity_map.rb:33:in `block in call'
  mongoid (2.5.0) lib/mongoid.rb:133:in `unit_of_work'
  mongoid (2.5.0) lib/rack/mongoid/middleware/identity_map.rb:33:in `call'
  sass (3.2.1) lib/sass/plugin/rack.rb:54:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__286698992__call__202403334__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  airbrake (3.1.4) lib/airbrake/rack.rb:41:in `call'
  airbrake (3.1.4) lib/airbrake/user_informer.rb:12:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  rack (1.4.1) lib/rack/deflater.rb:13:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  thin (1.4.1) lib/thin/connection.rb:80:in `block in pre_process'
  thin (1.4.1) lib/thin/connection.rb:78:in `catch'
  thin (1.4.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.4.1) lib/thin/connection.rb:53:in `process'
  thin (1.4.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine-1.0.0-x86 (mingw32) lib/eventmachine.rb:187:in `run_machine'
  eventmachine-1.0.0-x86 (mingw32) lib/eventmachine.rb:187:in `run'
  thin (1.4.1) lib/thin/backends/base.rb:63:in `start'
  thin (1.4.1) lib/thin/server.rb:159:in `start'
  rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.3) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.3) lib/rails/commands.rb:50:in `tap'
  railties (3.2.3) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (56.0ms) 
```

* * *

这是提到的控制器：

* * *

```
class HomeController < ApplicationController
  def index
    @presenter = Home::IndexPresenter.new
    @article_presenter = Articles::IndexPresenter.new(Article.with_state(:published).last)
  end
end 
```

* * *

如果有人可以帮助我，那就太好了。问我是不是忘了提什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:01:53.000

根本问题是所请求的 URL 正在`rest_client`返回 HTTP 406 代码，您可以通过运行看到该代码`curl`，例如

```
curl --include https://api.localeapp.com/v1/projects/hhMxHgKAzj9p1dFuS0GnTTnemJ5F9dXLDuCa1KacQSymUcmTFk/translations.yml?updated_at=1354612995 
```

（我刚刚注意到您在 Windows 环境中——如果您无权访问，`curl`您可以安装几个工具来发出请求）

然后，在您的控制器中，似乎没有任何检查来查看来自 RestClient 调用的响应是否成功（2xx 状态）。因为 RestClient 引发异常，您的应用程序中会出现 500 错误。

因此，如果您不确定 URL 不起作用的原因，那么您需要检查由`localeapp.com`

但鉴于 API 是一个外部服务，您可能还希望在您的软件中添加一些错误处理。有几件事情被称为 RestClient，但如果它是由 archiloque 提供的，文档[在此处提供了一个很好的“结果处理”示例](https://github.com/archiloque/rest-client)。

# python - wxpython：自动调整静态图像（staticbitmap）的大小以适应大小

> ID：13705981
> 
> 赞同：5
> 
> 时间：2012-12-04T15:12:50.607
> 
> 标签：python, wxpython, wxwidgets

我的 wxPython 项目有一个框架，有多个嵌套的 sizer。

其中一个 sizer 包含一个 wxStaticImage 和一个从文件中读取的位图。

每次调整框架大小时，我都需要调整图像的大小（增大/缩小），因此它会适合它的尺寸器边界。

（我认为）我知道如何调整图像大小。我**不知道**如何：

*   如何获取图像容器的宽度或高度？
*   也许我忽略了一个自动执行它的属性？

（现在，我不介意比例）

**编辑：完整的解决方案**

1.  我对 wxStaticBitmapin.Size 的理解是错误的。它没有描述图像的大小**（**即图像分辨率），而是- wxStaticBitmapin.Size 给出了**sizer 的插槽**尺寸，或者换句话说：当前小部件的大小。

    因此，使用 Mik 的代码，我现在如何适应插槽。

2.  除了 mike 的解决方案：在帧上使用 onSize 事件时，不要忘记添加**event.skip()**。否则，sizer 将停止重新对齐。或者，只需使用图像的 onSize。

这是完整的事件方法：

```
def bitmap1_onSize(self, e=None):
    W, H = self.bitmap1.Size
    if W > H:
        NewW = W
        NewH = W * H / W
    else:
        NewH = H
        NewW = H * W / H
    img = wx.Image(self.frame_file_picker.Path, wx.BITMAP_TYPE_ANY)
    img = img.Scale(NewW,NewH)
    self.bitmap1.SetBitmap(wx.BitmapFromImage(img))
    e.Skip() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T15:49:26.150

您将需要捕获 EVT_SIZE 或 EVT_SIZING。你可以查看我写的关于创建图像查看器的教程。它有一些缩放代码：http: [//www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/](http://www.blog.pythonlibrary.org/2010/03/26/creating-a-simple-photo-viewer-with-wxpython/)

我会采用该缩放代码并使用它来更新您的图像。您需要确保停止将图像放大到超过其最大尺寸，否则最终会出现大量像素化。

# c# - 在不引入循环依赖的情况下向 IoC 容器添加对象初始化

> ID：13705985
> 
> 赞同：1
> 
> 时间：2012-12-04T15:12:58.220
> 
> 标签：c#, inversion-of-control, ioc-container

我有一个知道如何刷新数学组件的类 (MathController)。
该类使用帮助类来根据时间安排确定何时触发刷新。

我想做的是将助手类添加到我的 IoC 容器中。

目前，IoC 创建了 MathController。由于辅助类需要从 MathController 接收一个动作，我不知道如何在不进入循环依赖场景的情况下做到这一点。

这是我作为场景示例创建的示例。

```
void Main()
{
    var mathController = new MathController();
}

class MathController
{
    private readonly StateMonitor _stateMonitor;

    public MathController()
    {
        _stateMonitor = new StateMonitor(RefreshMath);
        _stateMonitor.Monitor();
    }

    public void RefreshMath()
    {
        Debug.WriteLine("Math has been refreshed");
    }
}

class StateMonitor
{
    private readonly Action _refreshCommand;

    public StateMonitor(Action command)
    {
        _refreshCommand = command;
    }

    public void Monitor()
    {
        Debug.WriteLine("Start monitoring");
        Thread.Sleep(5000);
        Debug.WriteLine("Something happened, we should execute the given command");
        _refreshCommand();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:36:13.870

您的 IoC 容器可能支持某种方式来执行此操作。例如，NInject 允许您注册一个可以为您处理初始化的提供程序（基本上是一个工厂方法）。如果您说您正在使用哪个 IoC 容器和版本，这可能会有所帮助。

另一种方法是将 a`StateMonitorFactory`注入`MathController`, 而不是`StateMonitor`本身。然后工厂将建造`StateMonitor`. 所以 MathController 可能看起来像：

```
public MathController(StateMonitorFactory fact)
{
    _stateMonitor = fact.CreateStateMonitor(RefreshMath);
    _stateMonitor.Monitor();
} 
```

第三种选择是`StateMonitor`有一个初始化方法。在这种情况下，`StateMonitor`构造函数将变得无参数，但您将使用类似`Start(Action command)`, 的签名向其添加另一个方法，并`MathController`负责调用它。

# html - 是否可以让 translate3d 在 Android 浏览器中顺利运行？

> ID：13705986
> 
> 赞同：0
> 
> 时间：2012-12-04T15:12:57.970
> 
> 标签：html, css, cordova

我正在使用 phonegap 进行 HTML5 交互，我的一个页面涉及在图像上使用捏缩放功能。我已经设法使用 [iScroll][1] 插件完美地完成这项工作，但缩放功能的速度慢得让人无法接受。然而，在 iPad 上，一切都运行得非常顺利。

我确实读过 CSS 3 'translate3d' 属性可用于强制硬件加速（这似乎适用于 iPad），但似乎对 Android 没有任何影响。从我读到的内容看来，Android 浏览器*似乎*还不支持硬件加速，但我基本上是在问这是否是错误的，它确实有可能*，或者*是否有任何有效的解决方法？[1]：[http:// cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:41:01.570

取决于 android 版本，请参阅 canius：[http ://caniuse.com/#feat=transforms3d](http://caniuse.com/#feat=transforms3d)

# sql - 我如何按日期分组而不用时间作为一个因素？

> ID：13705992
> 
> 赞同：1
> 
> 时间：2012-12-04T15:13:26.213
> 
> 标签：sql, datetime

我的 DateCompleted 返回日期和时间。如果我只想按日期分组而忽略时间。我该怎么办？

```
SELECT  
  Cast(Jobs.DateCompleted AS VarChar) AS 'DateCompleted',
  SUM(Metrics.GB) AS GB, 
  SUM(Metrics.KB) AS KB
FROM Metrics 
INNER JOIN Jobs ON Jobs.JobId = Metrics.JobId 
INNER JOIN Projects ON Projects.ProjectId = Jobs.ProjectId 
INNER JOIN JobTypes ON JobTypes.JobTypeId = Jobs.JobTypeId
WHERE Jobs.DateCompleted BETWEEN '12/01/2012' AND '12/03/2012' 
GROUP BY Jobs.DateCompleted 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:17:19.717

如果您使用的是 SQL Server，那么您可以将值转换为`varchar`带有去除时间的格式：

```
SELECT convert(char(10), Jobs.DateCompleted, 120) AS DateCompleted,
  SUM(Metrics.GB) AS GB, 
  SUM(Metrics.KB) AS KB
FROM Metrics 
INNER JOIN Jobs 
  ON Jobs.JobId = Metrics.JobId 
INNER JOIN Projects 
  ON Projects.ProjectId = Jobs.ProjectId 
INNER JOIN JobTypes 
  ON JobTypes.JobTypeId = Jobs.JobTypeId
WHERE Jobs.DateCompleted Between '12/01/2012' AND '12/03/2012' 
GROUP BY convert(char(10), Jobs.DateCompleted, 120) 
```

如果您使用的是 SQL Server 2008+，则可以将该值转换为日期：

```
SELECT cast(Jobs.DateCompleted as date) AS DateCompleted,
  SUM(Metrics.GB) AS GB, 
  SUM(Metrics.KB) AS KB
FROM Metrics 
INNER JOIN Jobs 
  ON Jobs.JobId = Metrics.JobId 
INNER JOIN Projects 
  ON Projects.ProjectId = Jobs.ProjectId 
INNER JOIN JobTypes 
  ON JobTypes.JobTypeId = Jobs.JobTypeId
WHERE Jobs.DateCompleted Between '12/01/2012' AND '12/03/2012' 
GROUP BY cast(Jobs.DateCompleted as date) 
```

*注意：我假设 SQL Server 基于您以前的标签*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:18:08.673

编写一个去除时间部分的表达式，并按此表达式分组......在 SQL Server 女士中，您可以使用`DateAdd(dd, datediff(dd, 0, myDatetime), 0)` 每个 RDBMS 都有其自己的函数或语法。对于 SQLServer 女士，请参阅[此 SO 问题](https://stackoverflow.com/questions/353014/convert-sql-server-datetime-fields-to-compare-date-parts-only-with-indexed-look/353049#353049)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T15:20:00.967

答案是您将日期时间转换为日期，可以显式（如果日期是受支持的数据类型）或隐式（转换为字符串）。

ANSI 标准方法是执行以下操作：

```
select extract(year from jobs.DateCompleted),
       extract(month from jobs.DateCompleted),
       extract(day from jobs.DateCompleted),
. . .
group by extract(year from jobs.DateCompleted),
       extract(month from jobs.DateCompleted),
       extract(day from jobs.DateCompleted) 
```

但从来没有这样做过。在最新版本的 SQL Server 中，您将使用`cast(jobs.DateCompleted as date)`. 在 MySQL 中，`date(jobs.DateCompleted)`. 在 Oracle 中，我会这样做`to_char(jobs.DateCompleted, 'YYYY-MM-DD')`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T15:34:39.060

您还没有指定 rdbms，所以这是一个疯狂的猜测。

如果您使用的是 SQL Server，那么您可以按`datepart`日期时间的一部分进行分组。

```
GROUP BY DATEPART(year, Jobs.DateCompleted),
         DATEPART(month, Jobs.DateCompleted),
         DATEPART(day, Jobs.DateCompleted) 
```

# php - 获取随机条目的 SQL 查询

> ID：13705995
> 
> 赞同：0
> 
> 时间：2012-12-04T15:13:36.133
> 
> 标签：php, codeigniter, phpmyadmin

假设我有一张桌子 T。

T 包含 X 个元组。（并且表 T 有一个数字 PRIMARY KEY）

SQL 中有没有办法获取这些元组的随机子集（n）。

也就是说，每次我运行查询时，都会输出一组不同的元组。

（注意：我知道它可以通过编程语言来完成，但这意味着对我的数据库运行 N 个查询）。

我能想出的唯一解决方案是

1.在数组中生成n个唯一的随机数（arr）

2.将循环中的数字添加为

```
 "SELECT * FROM T where id="+arr[0] + "OR id=" +arr[1].....+"OR id="+arr[n] 
```

我正在使用 PHPMYADMIN 数据库

但这对我来说似乎并不优雅。想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:16:16.230

```
SELECT * FROM T ORDER BY RAND() LIMIT 5 
```

# antlr - ANTLR 模棱两可的参考 - 如何获得输出？

> ID：13705996
> 
> 赞同：2
> 
> 时间：2012-12-04T15:13:38.737
> 
> 标签：antlr, semantics, rules, ambiguity

所以我有一个规则`statement`可以导致更多的陈述：

```
statement returns[String txt]
    :   '{'{
            $txt="{";
        }
        (statement{
            $txt+=$statement.txt;
        })*
        '}'{
            $txt+="}";
        }
    | ... //more rules // ...
    ; 
```

我正进入（状态

*引用 $statement 不明确；规则语句是封闭规则并在生产中引用（假设封闭规则）*

但不知道如何解决。不知何故，我需要告诉 ANTLR 我需要`statement`内部 parent的 return txt `statement`。请帮帮我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:16:44.327

如果您使用`$statement`，ANTLR 不知道您是指规则本身还是`statement`内部`( ... )*`。

尝试这样的事情：

```
statement returns[String txt]
    :   '{'{
            $txt="{";
        }
        (s=statement{
            $txt+=$s.txt;
        })*
        '}'{
            $txt+="}";
        }
    | ...
        ; 
```

# python - sqlalchemy 查询所有项目，我想要一个生成器或可迭代对象，而不是列表，如何

> ID：13705999
> 
> 赞同：0
> 
> 时间：2012-12-04T15:13:57.977
> 
> 标签：python, sqlalchemy

一些代码如下：

```
session.query(MODEL).all() 
```

它将返回类型**列表的所有项目**

这意味着，如果有大量项目，它会占用大量内存？

我怎样才能得到一个可迭代的对象，但不是列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:30:29.703

年份，不使用`all()`，结果是生成器

谢谢@dm03514