# StackOverflow 问答 15727000-15727999

# django-templates - 使用关系外键列出产品和图像

> ID：15727005
> 
> 赞同：0
> 
> 时间：2013-03-31T06:30:28.047
> 
> 标签：django-templates, django-views

这是我的模型：

```
class Product(models.Model):
    title = models.CharField()

class Image(models.Model):
    nombre = models.ImageField(upload_to=url)
    product = models.ForeignKey(Product) 
```

我需要列出所有产品和相关图像。

在我看来使用：

```
Product.objects.all() 
```

但是，我至少需要一张图片才能列出。

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:28:43.573

你需要使用关系。

```
obj = Product.image_set.all()[:0] 
```

将返回一个包含一个图像对象的列表。然后你可以管理它。如果您想在模板中获取它，请使用

```
{% for x in myobject.image_set.all %}
    {{ x.nombre }}
{% endfor %} 
```

# .net - 构建摘要消失 - 错误和警告的数量

> ID：15727016
> 
> 赞同：2
> 
> 时间：2013-03-31T06:31:55.593
> 
> 标签：.net, msbuild

看到类似的问题没有答案。试试我的运气，以防有任何迟到的消息。在 VS2005 中，vcbuild 会报告每个项目的警告和错误数量，例如：

```
MyProj - 1 error(s), 23 warning(s) 
```

在 VS2012 中，默认情况下不报告。我需要从完整解决方案构建中组装自动报告的摘要。怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:39:06.640

您需要使用`/logger`开关在 MSBuild 中显式指定记录器。看看[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/32cd7327-fd62-4286-b519-82a2a0b98f78/)和相关的几个例子。

[您还可以按照本指南](http://msdn.microsoft.com/en-us/library/ms171471%28v=vs.100%29.aspx)编写自己的记录器。

看看[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/vstudio/ms171470.aspx)，它似乎解释了你必须打开的标志。

# java - Java返回不退出方法（循环）

> ID：15727019
> 
> 赞同：1
> 
> 时间：2013-03-31T06:33:05.847
> 
> 标签：java, loops, methods, nested, return

我正在为学校做一个项目，我在一个方法中有许多嵌套循环。我可以验证我的代码是否达到了“return true”；“return false;”之前的声明 使用太多 System.out.println 语句。

是否有任何情况下 return 不会立即退出该方法。在我的代码中，它达到“return true;”，但随后继续执行该方法。

谢谢 - 第一篇文章，但其他问题的长期学生

编辑：显示我的代码 - 这是针对加州大学伯克利分校的项目，所以他们不允许我们发布我们的完整代码。这是重要的部分。

我的代码中没有“尝试语句”。这是我的方法的最后，它有很多循环（while 和 for）循环。

```
if (x == 7 && turn == 5){
                    System.out.println("TRUE RESULT");
                    return true;

                }

                nextVictory(turn, x, y, color,z);
                alive = false;
            }

        }

          }
    }
    System.out.println("FALSE RESULT");
    return false;
} 
```

我有打印声明来验证我在哪里。结果如下：

真实结果

错误结果

错误结果

错误结果

错误结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T06:35:27.047

> 是否存在 return 不会立即退出该方法的情况？

唯一想到的情况是`return`语句是否在`try`-`finally`块内。该`finally`块仍将被执行。

另一种可能表现出类似行为的情况是，如果您的方法是递归的。在这种情况下，`return`嵌套调用中的语句实际上会返回给调用者。但是，如果调用者是方法本身，这可能会使方法看起来继续执行超过`return`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:58:31.997

如果您的代码到达该`return true`行，它必须退出该方法。所以它没有到达这条线。`System.out.println`和`return`语句之间发生了一些事情。如果您显示代码，它将有所帮助。

# asp.net - webmatrix 登录信息起始站点 (ASP.net)

> ID：15727020
> 
> 赞同：2
> 
> 时间：2013-03-31T06:33:05.913
> 
> 标签：asp.net, security, webmatrix

我刚刚使用 ASP.net 在 webmatrix 上创建了一个带有内置模板的新 Starter 站点。

我想知道该网站在哪里存储所有密码信息？我了解 WebSecurity 是一个内置模型，但我想知道所有这些对象信息的存储位置。用户数据库表中仅有的列是“email”和“id”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:41:10.193

您没有名为“webpages_...”的表吗？我认为 pages_Membership 是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:12:17.650

@cesarse 关于表 webPages_Membership 是正确的。查看您的 web.config 文件并查找连接字符串，这将使您知道您的数据保存在哪个数据库中。

# ios - 捕获越界异常

> ID：15727026
> 
> 赞同：1
> 
> 时间：2013-03-31T06:34:33.253
> 
> 标签：ios, objective-c, xcode

我是 Objective C 的新手，之前有 java 知识。我正在学习该语言的工作原理，我想知道如何在 Objective-c 中捕获 outOfBoundsExceptions？特别是数组。

例子：

```
NSString *stringReceivedServer=@"Jim 1551 error";
NSArray *split= [stringReceivedServer componentsSeparatedByString:""];
NSString *labelString= [split objectAtIndex:3] //Out of bounds 
```

我做了这个例子，因为我将从服务器获取一些信息，并且我将获得如上所示的信息。数据的发送方式有一个标准，但有时可能会出错，所以如果字符串不是应该的，我怎么能捕捉到错误？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T06:42:20.093

首先，不要依赖异常处理，而只需***编写正确的代码。***

其次，如果您有兴趣：您可以使用异常处理程序捕获`NSException`s ：`@try-@catch-@finally`

```
@try {
    id obj = [array objectAtIndex:array.count]; // BOOM
}
@catch (NSException *e) {
    NSLog(@"Got ya! %@", e);
}
@finally {
    NSLog(@"Here do unconditional deinitialization");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T06:36:17.880

与 Java 不同，由于 Obj-C 是 C 的超集，所以这里越界不是错误。

**这是逻辑错误，您需要处理自己的逻辑。**

作为，

```
NSString *labelString=nil;
if(split.count>3){
   labelString= [split objectAtIndex:3]; //Out of bounds
}
else{
    NSLog(@"out of bound");
} 
```

或者你可以这样做：

```
@try {
   NSString *labelString = [split objectAtIndex:3];  
}
@catch (NSRangeEception * e) {
   NSLog(@"catching %@ reason %@", [e name], [e reason]);
}
@finally {
   //something that you want to do wether the exception is thrown or not.
} 
```

# javascript - javascript绑定到使用ajax创建的表单内的按钮未触发

> ID：15727040
> 
> 赞同：0
> 
> 时间：2013-03-31T06:36:32.370
> 
> 标签：javascript, ajax, google-chrome

所以一个html表单是使用ajax动态创建的。在 html 表单中有一个按钮，它的 onclick 事件绑定到一些 javascript。javascript 在 FF、Opera、IE 中成功触发，但在 chrome 中没有任何反应。知道问题可能是什么吗？

```
 <div id="s">
    <input type="button" class="button" value="reply" onclick="comment()"/>
    </div>

    function comment()
    {
    var xmlhttp;
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
       if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("s").innerHTML=xmlhttp.responseText;
    }
}

xmlhttp.open("post","replyForm.php",true);
xmlhttp.send();

    }

function remove() {
var xmlhttpp;
if (window.XMLHttpRequest)
{
    xmlhttpp=new XMLHttpRequest();
}
else
{
    xmlhttpp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttpp.open("post","replyButton.php",true);
xmlhttpp.send();

xmlhttpp.onreadystatechange=function()
{
    if (xmlhttpp.readyState==4 && xmlhttpp.status==200)
    {
        document.getElementById("s").innerHTML=xmlhttpp.responseText;
    }
}

    } 
```

回复表单.php

```
 <?php
    echo("<script type='text/javascript' src='validation.js'></script>");
    echo("<input type=SUBMIT name=INS value='Submit' class='button' /> <input type='button' class ='button' value='Cancel' onclick=\"remove()\"/> <INPUT TYPE=RESET NAME=RES VALUE='Clear' class='button' />");
    ?> 
```

回复按钮.php

```
 <?php
    echo("<script type='text/javascript' src='validation.js'></script>");
    echo("<input type='button' class='button' value='reply' onclick='comment()'>");
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:39:28.063

由于页面是动态创建的。事件处理程序未分配给按钮或任何元素。

用于`bind()` 将事件处理程序绑定到元素。这应该用来代替普通的点击事件处理程序

[绑定教程](http://api.jquery.com/bind/)

# javascript - 为 div 附加点击事件

> ID：15727042
> 
> 赞同：1
> 
> 时间：2013-03-31T06:37:09.130
> 
> 标签：javascript, jquery, html

美好的一天，我想通过 BIND 方法将 click 方法附加到 div。我的附加代码是

```
$("#brend_list > #mCSB_1 > .mCSB_container > div > a").bind('click',function(){
id=$(this).attr('id');
ttl=$(this).parent().children("span").html();
state=$(this).hasClass("checked");

if(state) {$(this).removeClass("checked");
$("#"+id+"_filter").remove();
}
else{$(this).addClass("checked");

$("#filters").append(" <div style='display:inline-block;' id='"+id+"_filter' class='filter_brands' onclick='brend_uncheck(\""+id+"\"); $(this).remove();'><span>"+ttl+"</span><b>x</b></div> ");

}}); 
```

我的 div 结构是

```
<div id="brend_list" class="mCustomScrollbar _mCS_1">
  <div class="mCustomScrollBox mCS-light" id="mCSB_1" style="position:relative; height:100%; overflow:hidden; max-width:100%;">
   <div class="mCSB_container" style="position: relative; top: 0px;">
    <div><a id="filt_brend001"></a><span>Loreal Paris</span></div><!-- this <a> -->
    <div><a id="filt_brend002"></a><span>Laura Mercier</span></div>
    ...........
    </div>
    <div class="mCSB_scrollTools" style="position: absolute; display: block;">
      <div class="mCSB_draggerContainer"><div class="mCSB_dragger" style="position: absolute; height: 110px; top: 0px;" oncontextmenu="return false;">
        <div class="mCSB_dragger_bar" style="position: relative; line-height: 110px;">  
        </div>
      </div>
      <div class="mCSB_draggerRail">
      </div>
     </div>
    </div>
   </div>
</div> 
```

但它不附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:51:13.510

你应该要么改变

```
$("#brend_list > #mCSB_1 > .mCSB_container > div > a") 
```

至

```
$("#brend_list > #mCSB_1 > .mCSB_container > div > a + span") 
```

上面的一个小提琴是[here](http://jsfiddle.net/2N7jk/)。

或者，将 HTML 从

```
<div><a id="filt_brend001"></a><span>Loreal Paris</span></div> 
```

至

```
<div><a id="filt_brend001"><span>Loreal Paris</span></a></div> 
```

[在这里](http://jsfiddle.net/2N7jk/1/)摆弄上面的动作。

# visual-c++ - 包含另一个模板类的模板类

> ID：15727043
> 
> 赞同：0
> 
> 时间：2013-03-31T06:37:13.873
> 
> 标签：visual-c++

我正在编写模板类，特别是在数组中存储另一个模板类的模板类。我在设置配对成员 thing1 和 thing2 时遇到了麻烦。它们被打印为垃圾变量。

```
#ifndef ARRAY_H
#define ARRAY_H
#include"Pair.h"

#include<iostream>
using namespace std;

template<typename T>
class Array
{
    template<typename U>
    friend ostream & operator<<(ostream & out, const Array<U> &a);

    private:
        int size;
        T* tPtr;

    public:
        Array(int s);
        Array();
        ~Array();
        T& operator[](int sub);
        T operator[](int sub)const;
        const Array<T> &operator =(const Array<T> &);
        int getLength(){return size;};
};
template<typename T>
Array<T>::Array():size(0),tPtr(NULL)
{
}
template<typename T>
Array<T>::Array(int s):size(s)
{

    tPtr = new T [size];
}
template<typename T>
Array<T>::~Array()
{
    delete [] tPtr;
}
template<typename T>
T& Array<T>::operator[](int sub)
{
    if(sub<0 || sub>size)
        throw out_of_range("subscript out of range");

     return tPtr[sub];
}
template<typename T>
T Array<T>::operator[](int sub)const
{
    if(sub<0 || sub>size)
        throw out_of_range("subscript out of range");

     return tPtr[sub];
}

template<typename T>
const Array<T> &Array<T>::operator =(const Array<T> &right)
{

    if(&right !=this)
    {
        if(size!=right.size)
        {
            delete [] tPtr;
            size=right.size;
            tPtr= new T[size];
        }

        for(int i =0;i<size;i++)
            tPtr[i] = right.tPtr[i];
    }
    return *this;
}
template<typename U>
ostream & operator<<(ostream &out, const Array<U> &a) 
{
    for(int i =0;i<a.size;i++)
    {
        out<<a.tPtr[i];
    }
    out<<endl;
    return out;
}
#endif

#ifndef PAIR_H
#define PAIR_H

#include <iostream>
using namespace std;

template<typename T,typename U>
class Pair {
private:
    T thing1;
    U thing2;
public:
    Pair(){};
    Pair( T thing1, U thing2) : thing1(thing1), thing2(thing2) {}
    ostream & display(ostream & out=cout) const;
};

template<typename T,typename U>
ostream & Pair<T, U>::display(ostream & out) const {
    return (out << "(" << thing1 << ", " << thing2 << ")");
}

template<typename T,typename U>
ostream & operator<<(ostream & out, const Pair<T,U> & pair) {
    return pair.display(out);
}
#endif

#include "Pair.h"
#include "Array.h"
#include<string>
#include<iostream>

using namespace std;

template<typename T, typename U>
Array< Pair<T, U> >zip(Array<T> & lhs,Array<U> & rhs) 
{
    int zipLen = (lhs.getLength() < rhs.getLength() ? lhs.getLength() : rhs.getLength());
    Array< Pair<T, U> >zipped(zipLen);
    for (int i=0; i<zipLen; i++)
        zipped[i] = Pair<T, U>(lhs[i], rhs[i]);

    return zipped;//return array object
}

int main()
{
    Array<int> a1(5);
    Array<char>a2(3);

    Array<Pair<int,char>>a3;

    for(int i =1;i<5;i++)
        a1[i-1]=i;

    for(char ch='a';ch<='c';ch++)
        a2[ch-'a']=ch;

    a3=zip(a1,a2);//this is the line where I seem to lose all my data

    cout<<a3;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:39:32.287

**zipped**是一个本地对象。当作用域结束时，将调用其析构函数。**此外，压缩**对象内的两个 Array 类对象的析构函数也将被调用。在 Array 类的析构函数中，您正在删除动态分配。这就是为什么你会看到垃圾值。:)

# vb.net - 如何在我的 VB 代码中的其他地方调用变量？

> ID：15727044
> 
> 赞同：0
> 
> 时间：2013-03-31T06:38:05.150
> 
> 标签：vb.net

所以，我有以下 VB 代码：

```
Try
        Using verSR As New StreamReader(appDataVersionLoc)
            Dim txtVern As String
            txtVern = verSR.ReadToEnd()
        End Using
    Catch ex As Exception
        Dim verFile As System.IO.FileStream
        verFile = System.IO.File.Create(appDataVersionLoc)
        My.Computer.FileSystem.WriteAllText("appDataVersionLoc", "0.0.0.0", True)
        MessageBox.Show("Version file missing/corrupt, created a new one.")
    End Try 
```

看到那个名为“txtVern”的变量了吗？我正在尝试在 Try-End Try 块之外的代码中的其他地方使用它。差不多就是这样：

```
Try
        Using verSR As New StreamReader(appDataVersionLoc)
            Dim txtVern As String
            txtVern = verSR.ReadToEnd()
        End Using
    Catch ex As Exception
        Dim verFile As System.IO.FileStream
        verFile = System.IO.File.Create(appDataVersionLoc)
        My.Computer.FileSystem.WriteAllText("appDataVersionLoc", "0.0.0.0", True)
        MessageBox.Show("Version file missing/corrupt, created a new one.")
    End Try

    blahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblah

    Dim currentversion As String = txtVern 
```

现在，我是一个完整的 VB 菜鸟，我收到了这个错误：

> 'txtVern' 未声明。由于其保护级别，它可能无法访问。

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:41:59.383

在任何块内声明的变量仅在该块内可见。`Try`您必须在阻止之前移动声明：

```
Dim txtVern As String = String.Empty
Try
    Using verSR As New StreamReader(appDataVersionLoc)
        txtVern = verSR.ReadToEnd()
    End Using
Catch ex As Exception
    Dim verFile As System.IO.FileStream
    verFile = System.IO.File.Create(appDataVersionLoc)
    My.Computer.FileSystem.WriteAllText("appDataVersionLoc", "0.0.0.0", True)
    MessageBox.Show("Version file missing/corrupt, created a new one.")
End Try

blahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblahblah

Dim currentversion As String = txtVern 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:43:09.623

在 try 块中声明变量 txtVern 时，您将它们的范围限制在 try 块中。尝试在子例程的开头声明它们。

# jquery - 如何使 div 固定在特定的滚动级别

> ID：15727046
> 
> 赞同：2
> 
> 时间：2013-03-31T06:38:17.777
> 
> 标签：jquery, html, css

我想将特定的侧 div 固定在特定的滚动级别，一个完美的例子是堆栈 oveflow 提问页面右侧的“如何格式化”栏。只需尝试提出问题即可查看。这怎么可能 ？使用 css 或 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:49:55.530

这是一个如何完成此操作的简单示例，我们监听`window` `onscroll`事件，如果`$(window).scrollTop()`高于某个阈值，我们将`.fixed`类添加到侧边栏，否则将其删除。`.fixed`班级设置`position:fixed`使其坚持下去。查看 fiddle 以获得完整的工作示例。

[jsFiddle](http://jsfiddle.net/Tyriar/EvAdP/)

**JS**

```
$(window).scroll(function () {
    var threshold = 100;
    if ($(window).scrollTop() >= 100)
        $('#sidebar').addClass('fixed');
    else
        $('#sidebar').removeClass('fixed');
}); 
```

**CSS**

```
#sidebar {
    position:absolute;
    width:80px;
    background-color:#0F0;
    height:200px;
}

#sidebar.fixed {
    position:fixed;
    top:0;
} 
```

**HTML**

```
<header>
    I'm the header
</header>
<div id="container">
    <aside id="sidebar">
        I'm a sidebar
    </aside>
    <section id="content">
        ...
    </section>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:12:23.967

```
$(document).ready(function(){
   var my_scrol_position = 220;
   $("#my_div_name").scrollTop(my_scrol_position);
}); 
```

确保你`div`有`css``overflow:auto`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:25:52.460

本教程可以帮助您。[http://css-tricks.com/scrollfollow-sidebar/](http://css-tricks.com/scrollfollow-sidebar/)

或者

这个

html

```
<div id="header">HEADER</div>
<div id="content">
    <div id="left">LEFT</div>
    <div id="right">RIGHT</div>
</div>
<div id="footer">FOOTER</div> 
```

js

```
$(function() {
    var $sidebar = $("#right"), 
        $window = $(window),
        rightOffset = $sidebar.offset(),
        rightDelta = $("#footer").offset().top - $("#header").offset().top - $("#header").outerHeight() - $("#right").outerHeight(),
        topPadding = 15;

    $window.scroll(function() {
            $sidebar.stop().animate({
                marginTop: Math.max(Math.min($window.scrollTop() - rightOffset.top + topPadding, rightDelta), 0)
            });
    });

}); 
```

示例 2 的工作[演示](http://jsfiddle.net/jhunlio/wFDYV/9/)

你可以根据你的需要选择希望这可以帮助你..

# java - 在eclipse中运行jbehave测试时出现org.jbehave.core.io.storyresourcenotfound异常

> ID：15727049
> 
> 赞同：3
> 
> 时间：2013-03-31T06:38:44.697
> 
> 标签：java, eclipse, jbehave

当我在 Eclipse 中运行 IT 测试编写的 jbehave 时，我遇到了这个异常。

```
org.jbehave.core.io.storyresourcenotfound 
```

我在 test/java/package 中有 path_steps.java 和 path_story.java，在 test/resources/package 的同一个包中有 path.story 文件。

不确定需要更改什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T21:39:28.390

我不确定我的上下文是否与您的相同，但在我的情况下，问题是我的步骤文件中的错字。我有`Then`两个参数的条件，但我的`Steps.java`文件中的方法签名缺少其中一个。我纠正了错误，我的测试成功通过了。

这是我得到的错误：

```
[INFO] Using controls UnmodifiableEmbedderControls[EmbedderControls[batch=false,skip=false,generateViewAfterStories=true,ignoreFailureInStories=true,ignoreFailureInView=false,verboseFailures=false,verboseFiltering=false,storyTimeoutInSecs=300,failOnStoryTimeout=false,threads=1]]

(BeforeStories)

[INFO] Running story com/netbase/OpMetricsFilterBuilder/stories/ComputeDerivedValue.story
Compute Derived Value
(com/netbase/OpMetricsFilterBuilder/stories/ComputeDerivedValue.story)
Narrative:
In order to explore how my social media activity ties to my core business metrics
As a n analyst
I want to compute a derived time series value from a set of component time series
Scenario: Compute Net Intent to Shop
Given the following time series:

|Date|Shop|NotShop|
|11/5/2014|330|400|
|11/6/2014|370|410|
|11/7/2014|320|390|
|11/8/2014|200|280|
|11/9/2014|430|450|

And a derived value name of NetIntentToShop
And a formula for computing the derived value is (#{Shop} - #{NotShop}) / (#{Shop} + #{NotShop}) * 100
When the NetIntentToShop is derived
Then the NetIntentToShop should be
|Date|NetIntentToShop|
|11/5/2014|-9.58904109589041|
|11/6/2014|-5.128205128205128|
|11/7/2014|-9.859154929577464|
|11/8/2014|-16.666666666666664|
|11/9/2014|-2.272727272727273| (FAILED)
(org.jbehave.core.io.StoryResourceNotFound: Story path 'NetIntentToShop' not found by class loader EmbedderClassLoader[urls=[/Users/mosofsky/Developer/SocialMetrics/nbsocialmetrics-frontend/target/classes/, appengine-api-1.0-sdk-1.9.15.jar, servlet-api-2.5.jar, jstl-1.2.jar, objectify-5.1.1.jar, guava-17.0.jar, jeval-0.9.4.jar, gwt-user-2.7.0-rc1.jar, validation-api-1.0.0.GA.jar, validation-api-1.0.0.GA-sources.jar, gwt-dev-2.7.0-rc1.jar, asm-5.0.3.jar, asm-util-5.0.3.jar, asm-tree-5.0.3.jar, asm-commons-5.0.3.jar, jbehave-core-3.9.5.jar, hamcrest-integration-1.3.jar, commons-collections-3.2.1.jar, commons-io-2.4.jar, commons-lang-2.6.jar, plexus-utils-3.0.10.jar, freemarker-2.3.19.jar, paranamer-2.4.jar, xstream-1.4.5.jar, xmlpull-1.1.3.1.jar, xpp3_min-1.1.4c.jar, jbehave-junit-runner-1.1.2.jar, junit-4.11.jar, mockito-core-1.9.5.jar, hamcrest-core-1.3.jar, hamcrest-library-1.3.jar, objenesis-1.3.jar],parent=ClassRealm[plugin>org.jbehave:jbehave-maven-plugin:3.9.5, parent: sun.misc.Launcher$AppClassLoader@6da21389]])

[WARNING] Failed to run story com/netbase/OpMetricsFilterBuilder/stories/ComputeDerivedValue.story
org.jbehave.core.io.StoryResourceNotFound: Story path 'NetIntentToShop' not found by class loader EmbedderClassLoader[urls=[/Users/mosofsky/Developer/SocialMetrics/nbsocialmetrics-frontend/target/classes/, appengine-api-1.0-sdk-1.9.15.jar, servlet-api-2.5.jar, jstl-1.2.jar, objectify-5.1.1.jar, guava-17.0.jar, jeval-0.9.4.jar, gwt-user-2.7.0-rc1.jar, validation-api-1.0.0.GA.jar, validation-api-1.0.0.GA-sources.jar, gwt-dev-2.7.0-rc1.jar, asm-5.0.3.jar, asm-util-5.0.3.jar, asm-tree-5.0.3.jar, asm-commons-5.0.3.jar, jbehave-core-3.9.5.jar, hamcrest-integration-1.3.jar, commons-collections-3.2.1.jar, commons-io-2.4.jar, commons-lang-2.6.jar, plexus-utils-3.0.10.jar, freemarker-2.3.19.jar, paranamer-2.4.jar, xstream-1.4.5.jar, xmlpull-1.1.3.1.jar, xpp3_min-1.1.4c.jar, jbehave-junit-runner-1.1.2.jar, junit-4.11.jar, mockito-core-1.9.5.jar, hamcrest-core-1.3.jar, hamcrest-library-1.3.jar, objenesis-1.3.jar],parent=ClassRealm[plugin>org.jbehave:jbehave-maven-plugin:3.9.5, parent: sun.misc.Launcher$AppClassLoader@6da21389]]
    at org.jbehave.core.io.LoadFromClasspath.resourceAsStream(LoadFromClasspath.java:44)
    at org.jbehave.core.io.LoadFromClasspath.loadResourceAsText(LoadFromClasspath.java:29)
    at org.jbehave.core.model.ExamplesTableFactory.createExamplesTable(ExamplesTableFactory.java:76)
    at org.jbehave.core.steps.ParameterConverters$ExamplesTableConverter.convertValue(ParameterConverters.java:647)
    at org.jbehave.core.steps.ParameterConverters.convert(ParameterConverters.java:151)
    at org.jbehave.core.steps.StepCreator.convertParameterValues(StepCreator.java:304)
    at org.jbehave.core.steps.StepCreator.access$1100(StepCreator.java:36)
    at org.jbehave.core.steps.StepCreator$ParametrisedStep.parametriseStep(StepCreator.java:640)
    at org.jbehave.core.steps.StepCreator$ParametrisedStep.perform(StepCreator.java:592)
    at org.jbehave.core.embedder.StoryRunner$FineSoFar.run(StoryRunner.java:535)
    at org.jbehave.core.embedder.StoryRunner.runStepsWhileKeepingState(StoryRunner.java:515)
    at org.jbehave.core.embedder.StoryRunner.runScenarioSteps(StoryRunner.java:479)
    at org.jbehave.core.embedder.StoryRunner.runStepsWithLifecycle(StoryRunner.java:445)
    at org.jbehave.core.embedder.StoryRunner.runCancellable(StoryRunner.java:305)
    at org.jbehave.core.embedder.StoryRunner.run(StoryRunner.java:220)
    at org.jbehave.core.embedder.StoryRunner.run(StoryRunner.java:181)
    at org.jbehave.core.embedder.StoryManager$EnqueuedStory.call(StoryManager.java:262)
    at org.jbehave.core.embedder.StoryManager$EnqueuedStory.call(StoryManager.java:229)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745) 
```

这是错误的方法签名：

```
@Then("the $derivedValueName should be: $expectedOutputDataTable")
public void thenTheDerivedValueShouldBe(ExamplesTable expectedOutputDataTable) { 
```

这是更正：

```
@Then("the $derivedValueName should be: $expectedOutputDataTable")
public void thenTheDerivedValueShouldBe(String derivedValueName, ExamplesTable expectedOutputDataTable) { 
```

对于我的情况，这似乎是一个有趣的错误消息。我猜如果`Steps.java`文件中缺少参数，那么 Jbehave 可能会去搜索它作为资源。

# emacs - 在 emacs 中使用钢筋？

> ID：15727051
> 
> 赞同：3
> 
> 时间：2013-03-31T06:38:55.363
> 
> 标签：emacs, erlang

在 .emacs 中有一个`defun`获取 erlang 项目路径的内容，我如何执行 shell 命令来执行以下操作：

```
cd *~/erlang-project-folder*
make 
```

我正在使用 rebar 来构建我的项目，并且有一个 Makefile 可以完成所有工作。

我可以通过覆盖来编译`erlang-compile-function`，但我不熟悉 Emacs Lisp，请帮忙。

这是我的 .emacs：

```
(defun erlang-project-dir ()
  (let* ((src-path (file-name-directory (buffer-file-name)))
         (pos (string-match "/src/" src-path)))
    (if pos (substring src-path 0 (+ 1 pos)) src-path)))

;; there is an error: wrong type argument: commandp
(defun my-inferior-erlang-compile ()
  (shell-command.
    (concat (concat (concat "cd" erlang-project-dir) "; make"))))

(defvar erlang-compile-function 'my-inferior-erlang-compile) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:29:02.647

与其依赖目录结构，不如尝试找到`rebar.config`项目根目录中的文件。这可以通过以下代码实现：

```
(defun my-find-rebar-root ()
  (let ((dir (locate-dominating-file default-directory "rebar.config")))
    (or dir default-directory))) 
```

之后，您可以使用此函数进行编译：

```
(defun my-inferior-erlang-compile ()
  (interactive)
  (let ((default-directory (my-find-rebar-root)))
    (compile "make"))) 
```

虽然，我不确定`make`这里的命令是否正确 - 也许使用它会更好`rebar compile`？

PS 我希望，我能找到一些空闲时间，并完成 EDE 中的钢筋支持 - 在这种情况下，它将是与项目工作相同的统一界面。

# c# - 如何从面板中加载的子用户控件访问父类函数/控件

> ID：15727053
> 
> 赞同：5
> 
> 时间：2013-03-31T06:39:10.987
> 
> 标签：c#, winforms, user-controls, parent-child

我有主窗体，其中包含一个面板，它将不同的用户控件加载到面板中。现在我需要从 UserControl 访问主窗体中的函数。下面我给出了我的代码；

这是我的主要 Windows 窗体类：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        loadlogin();
    }

    private void loadlogin()
    {
        login log = new login();
        mainPannel.Controls.Clear();
        mainPannel.Controls.Add(log);
    }

    public void mytest()
    {

    }
} 
```

如您所见，我正在将用户控件加载到 mainPannel。现在让我们看看用户控件：

```
public partial class login : UserControl
{
    string MyConString = "";

    public login()
    {
        InitializeComponent();
    }

    public void button1_Click_1(object sender, EventArgs e)
    {

     //I want to call the parent function mytest(); HOW????

    }

} 
```

当我们单击 button1 时，我想访问 mytest() 函数。我尝试了很多其他解决方案，但我仍然感到困惑。我用过：

```
 Form my = this.FindForm();
 my.Text = "asdasfasf"; 
```

这给了我对父级的引用，我可以更改表单文本，但我如何访问它的功能？？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-15T15:18:25.600

好的，上面的答案会起作用，但是将“父表单”传递给用户控件并不是一个好的编码习惯。UserControls 应该位于与您的表单项目不同的项目中，并且您的表单项目应该引用您的控件项目，以便获得它们的可见性。例如，您希望此 UserControl 在某个时候嵌套在另一个 UserControl 中。如果不重载构造函数，您的代码将不再工作。更好的解决方案是使用事件。我提供了一个使用 CustomEventArg 的实现。通过这样做，您的登录 UserControl 可以坐在任何东西上并且仍然可以工作。如果不需要更改父文本的功能，则不要在事件中注册。这是代码，希望这对某人有所帮助。

这是表单代码：

```
public Form1()
{
    InitializeComponent();

    loadlogin();
}

private void loadlogin()
{
    login log = new login();

    //Registers the UserControl event
    log.changeParentTextWithCustomEvent += new EventHandler<TextChangedEventArgs>(log_changeParentTextWithCustomEvent);

    mainPannel.Controls.Clear();
    mainPannel.Controls.Add(log);
}

private void log_changeParentTextWithCustomEvent(object sender, TextChangedEventArgs e)
{
    this.Text = e.Text;
} 
```

这是“登录”用户控件代码（在我的测试解决方案中，只是一个带有按钮的用户控件）

```
public partial class login : UserControl
{
    //Declare Event with CustomArgs
    public event EventHandler<TextChangedEventArgs> changeParentTextWithCustomEvent;
    private String customEventText = "Custom Events FTW!!!";

    public login()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Check to see if the event is registered...
        //If not then do not fire event
        if (changeParentTextWithCustomEvent != null)
        {
            changeParentTextWithCustomEvent(sender, new TextChangedEventArgs(customEventText));
        }
    }
} 
```

最后，CustomEventArgs 类：

```
public class TextChangedEventArgs : EventArgs
{
    private String text;

    //Did not implement a "Set" so that the only way to give it the Text value is in the constructor
    public String Text
    {
        get { return text; }
    }

    public TextChangedEventArgs(String theText)
        : base()
    {
        text = theText;
    }
} 
```

以这种方式编写控件，对窗体不可见，这将使您的 UserControls 完全可重用，并且不绑定到任何类型或类型的父级。只需定义 UserControl 可以触发的行为并在必要时注册它们。我知道这是一篇旧文章，但希望这会帮助某人编写更好的用户控件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T07:15:32.083

这可能会有所帮助：

```
public partial class Form1 : Form
{
    //Other codes

    private void loadlogin()
    {
        login log = new login(this);    //CHANGE HERE
        mainPannel.Controls.Clear();
        mainPannel.Controls.Add(log);
    }

    //Other codes
} 
```

和

```
public partial class login : UserControl
{
    Form1 _parent;                       //ADD THIS

    public login(Form1 parent)
    {
        InitializeComponent();
        this._parent = parent;          //ADD THIS
    }

    public void button1_Click_1(object sender, EventArgs e)
    {
         this._parent.mytest();         //CALL WHAT YOU WANT
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T12:54:45.233

从您的用户控件：

```
((Form1)Parent).mytest(); 
```

# android - 无法平移或移动 osmdroid 地图

> ID：15727055
> 
> 赞同：1
> 
> 时间：2013-03-31T06:39:36.217
> 
> 标签：android, osmdroid

我在示例应用程序中使用 osmdroid 映射。可以看到地图，缩放工作，一切都很好，除了我无法平移/移动地图。

我的主要xml代码是：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <org.osmdroid.views.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true">

    </org.osmdroid.views.MapView>

 </RelativeLayout> 
```

我的Java代码是：

```
 public class MapTest extends Activity {

private MapView mapView;
private MapController mapController;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_test);
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(false);
    mapView.setMultiTouchControls(true);
    mapController = this.mapView.getController();
    mapController.setZoom(10);
    GeoPoint mapCenter = new GeoPoint(17.4467, 78.4667);
    mapController.setCenter(mapCenter);
}

} 
```

关于如何启用运动的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T02:48:35.463

尝试删除：

```
android:clickable="true" 
```

从您的地图视图。这使得 MapView 消耗触摸事件，并与 dispatchTouchEvent 方法混淆。您也可以尝试删除可聚焦的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T13:52:01.277

```
mapView.setClickable(false); 
```

它对我有用。

你应该试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:47:43.450

现在只安装以前的版本，看起来 3.0.9 中存在错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T08:56:03.453

尝试使用

```
mapView.setClickable(false); 
```

# nsbundle - 如何通过 NSBundle 显示图像

> ID：15727061
> 
> 赞同：1
> 
> 时间：2013-03-31T06:41:00.320
> 
> 标签：nsbundle, theos, logos, cydia-substrate

当我的方法被激活时，我正在尝试显示图像。我把所有的代码都写下来了，我没有得到任何错误，但图像不会显示。这是我的 Tweak.xm 文件。

```
#import <UIKit/UIKit.h>
#import <substrate.h>
#import <Foundation/Foundation.h>
#import <UIKit/UISaveToCameraRollActivity.h>
#import <UIKit/_UIImageViewExtendedStorage.h>
#import <UIKit/_UIOnePartImageView.h>
#import <UIKit/_UIPrefTableCellPiece.h>
#import <UIKit/_UIStretchableImage.h>
#import <UIKit/_UISwitchSlider.h>
#import <UIKit/_UITableViewCellDeleteConfirmationControl.h>
#import <UIKit/UIImage.h>
#import <UIKit/_UITableViewUpdateSupport.h>
#import <UIKit/UI9PartImageView.h>
#import <UIKit/UIAlertSheetTextField.h>
#import <UIKit/UIAutocorrectImageView.h>
#import <UIKit/UIClippedImageView.h>
#import <UIKit/UICompositeImageView.h>
#import <UIKit/UIImageAndTextTableCell.h>
#import <UIKit/UIImageView2.h>
#import <UIKit/UIOnePartImageView.h>
#import <UIKit/UITabBarSwappableImageView.h>
#import <UIKit/UITableViewCell2.h>
#import <UIKit/UITableViewCellEditControl.h>
#import <UIKit/UIThreePartImageView.h>
#define kBundlePath @"/Library/MobileSubstrate/DynamicLibraries/image.bundle"

%hook UISaveToCameraRollActivity
-(void)performActivity {
%orig;
NSBundle *bundle = [[NSBundle alloc] initWithPath:kBundlePath];
NSString *imagePath = [bundle pathForResource:@"pic" ofType:@"png"];
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake (100, 200, 100, 100)];
imageView.image = [UIImage imageWithContentsOfFile:imagePath];

}
%end 
```

这是我的 MakeFile

```
include theos/makefiles/common.mk

TWEAK_NAME = test
test_FILES = Tweak.xm
test_FRAMEWORKS = UIKit
include $(THEOS_MAKE_PATH)/tweak.mk
BUNDLE_NAME = image
image_INSTALL_PATH = /Library/MobileSubstrate/DynamicLibraries
image_FRAMEWORKS = UIKit
include $(THEOS_MAKE_PATH)/bundle.mk 
```

谢谢大家，我真的很感谢所有的帮助，我知道我有很多标题，但是这个项目在某一时刻有很多不同的东西。请让我知道发生了什么，因为就像我说的那样，我什至没有收到任何错误代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:35:10.590

您实际上并没有将图像视图添加到超级视图：它永远不会进入渲染层次结构，因此永远不会显示在屏幕上。我的建议是找到一个特定的视图控制器并将视图填充到它的视图中，或者创建您自己的顶级 UIWindow 并在那里显示您的图像。

# clojure - 有没有办法在 leiningen 中重新生成目标目录？

> ID：15727064
> 
> 赞同：0
> 
> 时间：2013-03-31T06:41:29.490
> 
> 标签：clojure, leiningen

我的目标目录已`rm`在 Linux 中编辑 - Leiningen 是否提供了一种重新生成它的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:25:03.657

只是运行`lein run`应该会导致您的项目重建，从而重新创建`target`目录。

# c# - 通过 itextsharp 将 png 组合成 pdf 时 CPU 利用率高

> ID：15727068
> 
> 赞同：0
> 
> 时间：2013-03-31T06:41:46.010
> 
> 标签：c#, .net, pdf, itextsharp, cpu-usage

通过 itextsharp 将 PNG 组合成 PDF 时，CPU 使用率非常高（约 26%）。我不知道为什么。关于如何降低 CPU 利用率的任何建议？这是代码。

```
PdfWriter pdfWrite = PdfWriter.GetInstance(document, new FileStream(PDFFilePath, FileMode.Create, FileAccess.ReadWrite));
document.Open();
iTextSharp.text.Image image;
document.AddTitle(_book.Title);
foreach (FileInfo file in files)
{
    image = iTextSharp.text.Image.GetInstance(file.FullName);
    document.SetPageSize(new iTextSharp.text.Rectangle(image.Width, image.Height));
    image.Alignment = iTextSharp.text.Image.ALIGN_MIDDLE;
    document.NewPage();
    document.Add(image);
 } 
```

# jquery - 带有日期和时间的 jQuery Mobile 插件，而不是日期

> ID：15727074
> 
> 赞同：0
> 
> 时间：2013-03-31T06:42:27.053
> 
> 标签：jquery, jquery-mobile

我正在尝试找到一个不错的 jQuery Mobile 插件来选择日期和时间。我不需要日期。我只想能够选择：

1.  **日期：**周一、周二、周三、周四、周五、周六、周日
2.  **时间：** 1-12
3.  **分钟：** 00、15、30、45
4.  **时间：**上午，下午

我知道那里有类似[http://dev.jtsage.com/jQM-DateBox2/](http://dev.jtsage.com/jQM-DateBox2/)的东西，但是有什么东西只有日期和时间吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:45:01.143

这是我找到的这个。我希望这个对你有用。[http://jonthornton.github.com/jquery-timepicker/](http://jonthornton.github.com/jquery-timepicker/)

# windows-phone-8 - 如何“向上”/“向下”动画页面导航？

> ID：15727076
> 
> 赞同：1
> 
> 时间：2013-03-31T06:42:47.470
> 
> 标签：windows-phone-8

首先，我知道之前有人问过[**类似**](https://stackoverflow.com/questions/13440133/windows-phone-8-how-to-animate-page-navigation)的问题。

虽然我可以按照[**此处**](http://www.geekchamp.com/articles/windows-phone-7-navigation-transitions-step-by-step-guide)的指南成功地为页面设置动画，但我无法找到有关向上/向下动画的任何信息。我想要实现的动画是针对我的**ApplicationBarIconButton**的。如果动画是从右/左，那会很奇怪。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T18:31:20.477

这是我在 Windows Phone Toolkit 中使用的一些 Xaml：

```
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:SlideTransition Mode="SlideUpFadeIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:SlideTransition Mode="SlideUpFadeIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:SlideTransition Mode="SlideDownFadeOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:SlideTransition Mode="SlideDownFadeOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

其他可用的转换是：

*   卷
*   顺时针旋转 180 度
*   逆时针旋转 180 度
*   顺时针旋转 90 度
*   逆时针旋转 90 度
*   RotateOut180顺时针
*   RotateOut180逆时针
*   RotateOut90Clockwise
*   RotateOut90逆时针
*   向下滑动淡入
*   向下滑动淡出
*   向左滑动淡入
*   向左滑动淡出
*   向右滑动淡入
*   向右滑动淡出
*   上滑淡入
*   上滑淡出
*   向后旋转
*   向后旋转
*   向前旋转进入
*   向前转出
*   旋转全屏输入
*   旋转全屏输出
*   TurnstileBackwardIn
*   TurnstileBackwardOut
*   TurnstileForwardIn
*   TurnstileForwardOut

如果您找不到能够为您提供所需效果的过渡，只需创建自己的过渡，它们毕竟只是 Xaml 故事板。如果您在 CodePlex 上查看 Windows Phone Toolkit 的源代码，您应该拥有您需要的所有线索。

# sharepoint - 如果我使用 WinRS，为什么 PowerShell 不起作用？

> ID：15727080
> 
> 赞同：2
> 
> 时间：2013-03-31T06:43:27.757
> 
> 标签：sharepoint, powershell, invoke-command, remote-execution, winrs

我有一个文件“test.ps1”，其内容如下：

```
$getRSDBName =
{
    Add-PSSnapIn Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue
    $rsdb = Get-SPRSDatabase

    return $rsdb
}

$rsdb = invoke-command  -scriptblock $getRSDBName 

$rsdb 
```

如果我将其称为：

```
powershell -f c:\test.ps1 
```

如果我使用 WinRS，我会收到错误消息：

```
winrs -r:xxxxx -u:xxxxxx -p:xxxxx powershell -f c:\test.ps1 
```

我也通过输入`-Authentication CredSSP -Credential $creds`参数来尝试它`Invoke-Command`，但我得到了和以前一样的结果。在这两种情况下，错误都是：

> 当地农场无法进入。未注册具有 FeatureDependencyId 的 Cmdlet。Get-SPRSDatabase : 无法访问本地场。在重试之前，验证本地场是否已正确配置、当前可用，并且您具有适当的每个任务来访问数据库。在 C:\clean.ps1:181 char:29 + $rsdb = Get-SPRSDatabase <<<< + CategoryInfo : InvalidData: (Microsoft.Repor...ServiceDatabase: GetReportingServiceDatabase) [Get-SPRSDatabase], SPCmdletException + FullyQualifiedErrorId : Microsoft .ReportingServices.SharePoint.PowerShell.GetReportingServiceDatabase

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-18T17:03:58.110

这是由[此处](https://technet.microsoft.com/en-us/magazine/jj853299.aspx)描述的“第二跳”问题引起的，当远程服务器上的命令行开关依次尝试访问 sql 数据库时（它必须将凭据传递给它，但不能再次委派它们）

解决它在服务器上运行以下

```
Enable-WSManCredSSP –Role server 
```

这在客户端（需要提升的权限）

```
Enable-WSManCredSSP –Role client –DelegateComputer * 
```

然后记得使用

```
$session = New-PSSession -ComputerName $computer -Credential $credential -Authentication CredSSP 
```

当您打开远程会话并将 $session 传递给调用命令时

```
Invoke-Command -ScriptBlock $doSomething -Session $session 
```

这为我解决了:) 一般来说，我发现使用调用命令时发现的任何奇怪问题都与第二跳问题有关。这实际上是一个安全功能，因此即使它有点无聊，它也可以帮助我们，但解决它并不难

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T17:28:42.643

您是否能够创建一个 PS-Session，然后在该远程 shell 中运行脚本？如果是这样，为什么不在当前脚本中添加创建/销毁会话？

```
$Session = New-PSSession -ComputerName "computerNameHere"
Import-PSSession -Session $Session

$getRSDBName = {
    Add-PSSnapIn Microsoft.SharePoint.PowerShell -ErrorAction SilentlyContinue
    $rsdb = Get-SPRSDatabase

    return $rsdb
}
$rsdb = invoke-command  -scriptblock $getRSDBName 
$rsdb

Remove-PSSession -ComputerName "computerNameHere" 
```

# c - 如何确保返回到线程池的线程 ID 不应再次被获取

> ID：15727083
> 
> 赞同：1
> 
> 时间：2013-03-31T06:43:57.583
> 
> 标签：c, multithreading

我正在 Linux 上用 C 语言编写代码。

在代码中，首先它生成 50 个线程，然后每个线程再生成 1,2 或 3 个线程。

我的问题是（我猜）当其中一个线程完成其工作时（在这种情况下，其他一些线程可能尚未启动），它将其 ID 返回到线程池。

因此，当剩余线程启动时，它们可能具有与先前返回到线程池的线程 ID 相同的线程 ID。

我不想要这个。我需要唯一的线程 ID（通过确保返回的 ID 不应被剩余线程再次获取）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:13:13.763

我不认为你可以同时拥有唯一的线程 ID 和线程池——线程池的全部意义在于线程将在以后被重新用于更多任务，而线程不能（AFAIK）在创建它们后更改它们的线程 ID。

所以，你的选择是：

(a) 停止使用线程池，并在每次需要时生成一个新线程（并在其任务完成时让线程退出）。这通常会为您提供新的线程 ID，但请注意，操作系统最终也会开始重新使用线程 ID，这只是因为可用的线程 ID 数量有限。

或者

(b) 修改您的程序，使其不期望线程 ID 永远不会被重用。如果可能，请修改您的程序，使其根本不查看线程 ID。例如，如果您使用线程 ID 作为程序需要完成的任务的 ID，请将其替换为您通过增加原子（或互斥保护）计数器生成的任务 ID。

# python - 从 for 循环和列表写入 .csv 文件

> ID：15727084
> 
> 赞同：2
> 
> 时间：2013-03-31T06:43:57.900
> 
> 标签：python, csv, for-loop

我是 python 新手，但我已经在 Stack Overflow、google 和 CodeAcademy 上搜索了我显然非常简单的问题的答案或灵感。我认为找到一个使用 for 循环来保存每个交互的简单示例很容易找到，但我要么错过了它，要么没有词汇来提出正确的问题。所以请不要在你的显示器前大声叹息这个简单的问题。谢谢。

我想简单地编写一个csv文件，其中两个打印行的每次迭代都在下面的代码中的单独列中。因此输出示例可能如下所示：

```
##################
安迪.dat, 8

布雷特.dat，9

坎迪斯.dat, 11         
#################

```

我到目前为止的代码是：

```
import sys
import os.path

image_path = "C:\\"

for filename in os.listdir (image_path):
    print filename
    print len(filename) 
```

如果我尝试做

```
x =  filename 
```

然后我只得到写入 x 的循环的最后一次交互。如何使用 for 循环将它们全部写入 x ？另外，如何将其写为 csv 中的列，旁边有 len(filename) 的打印结果？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:01:16.527

虽然对于这个任务你*不需要*它，但我会尽可能利用标准库模块，比如[`csv`](http://docs.python.org/2/library/csv.html). 试试这样的，

```
import os
import csv

csvfile = open('outputFileName.csv', 'wb')
writer = csv.writer(csvfile)

for filename in os.listdir('/'): # or C:\\ if on Windows
    writer.writerow([filename, len(filename)])

csvfile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:48:00.853

我可能会改变这个：

```
for filename in os.listdir (image_path):
    print filename
    print len(filename) 
```

像这样的东西

```
lines = list()

for filename in os.listdir(image_path):
    lines.append("%s, %d" % (filename, len(filename))) 
```

我的版本创建一个 python [`list`](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)，然后在你的 for 循环的每次迭代中，向它附加一个条目。

完成后，您可以使用以下内容打印行：

```
for line in lines:
    print(line) 
```

或者，您可以最初在第一个循环中创建一个元组列表，然后在第二个循环中格式化输出。这种方法可能看起来像：

```
lines = list()

# Populate list
for filename in os.listdir(image_path):
    lines.append((filename, len(filename))

# Print list
for line in lines:
    print("%s, %d" % (line[0], line[1]))

# Or more simply
for line in lines:
    print("%s, %d" % line) 
```

最后，您实际上并不*需要*显式存储文件名长度，您只需计算它并即时显示它。事实上，您甚至*不需要*创建一个列表并使用两个循环。

您的代码可能很简单

```
import sys, os

image_path = "C:\\"
for filename in os.listdir(image_path):
    print("%s, %d" % (filename, len(filename)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:56:19.437

```
import sys
import os

image_path = "C:\\"
output = file("output.csv", "a")

for filename in os.listdir (image_path):
    ouput.write("%s,%d" % (filename, len(filename))) 
```

在构造函数`a`中`file`打开文件进行追加的位置，您可以在[此处](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)`file`阅读有关可以使用对象的不同模式的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T07:18:43.783

试试这个：

```
# Part 1
import csv
import os

# Part 2
image_path = "C:\\"

# Part 3    
li = [] # empty list
for filename in os.listdir(image_path):
    li.append((filename, len(filename))) # populating the list

# Part 4
with open('test.csv', 'w') as f:
    f.truncate()
    writer = csv.writer(f)
    writer.writerows(li) 
```

说明：
在**第 1 部分**中，
我们导入模块`os`和`csv`.
在**第 2 部分**中，
我们声明`image_path`.

现在是`for`循环。
在**第 3 部分**中，
我们声明了一个空列表 ( `li`)。
然后我们进入一个 for 循环，在其中我们用每个项目填充列表，它的长度在`image_path`. 在**第 4 部分**中，
我们开始编写 csv 文件。在[with](http://effbot.org/zone/python-with-statement.htm)语句中，我们将 , 中的所有数据`li`写入我们的文件中。

# vba - 运行时错误“9”：创建矩阵时下标超出范围

> ID：15727086
> 
> 赞同：0
> 
> 时间：2013-03-31T06:44:46.727
> 
> 标签：vba, matrix, runtime, subscript

我正在尝试使用 VBA 创建一个 varcov 矩阵，但是尽管尝试了数小时来寻找这个问题的答案，但仍然无法解决它。我的问题是，我在以下双星号行的每一行上都不断收到运行时错误“9”：

```
Sub varcovmmult()

    Dim returns()
    Dim trans()
    Dim Excess()
    Dim MMult()

    ReDim trans(ColCount, RowCount)
    ReDim Excess(RowCount, ColCount)
    ReDim MMult(ColCount, ColCount)
    ReDim returns(ColCount)

'Calculate mean, trans and excess arrays for dimensionalisation

'For mean:

    ColCount = Range("C6:H15").Columns.Count
    RowCount = Range("C6:H15").Rows.Count

    For j = 1 To ColCount
          **returns(j) = Application.Average(Range("C6:H15").Columns(j))
          Range("c30:h30").Cells(j) = returns(j)**
    Next j

'For excess:

    For j = 1 To ColCount
        For i = 1 To RowCount
            **Excess(i, j) = Range("c6:h15").Cells(i, j) - returns(j)
            Range("C36:H45").Cells(i, j) = Excess(i, j)**
        Next i
    Next j

'For tranpose:

    For j = 1 To ColCount
        For i = 1 To RowCount
            **trans(j, i) = Range("C36:H45").Cells(i, j)
            Range("C51:L56").Cells(j, i) = trans(j, i)**
        Next i
    Next j

'inject values into product array

    For i = 1 To ColCount
        For j = 1 To ColCount
            For k = 1 To RowCount
                **MMult(i, j) = MMult(i, j) + trans(i, k) * Excess(k, j)**
            Next k
        Next j
    Next i

'output product array values into varcov matrix and divide by n.years

    For i = 1 To ColCount
        For j = 1 To ColCount
            **Range("C62").Cells(i, j) = MMult(i, j)**
        Next j
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:27:44.903

你需要把这些行：

```
ReDim trans(ColCount, RowCount)
ReDim Excess(RowCount, ColCount)
ReDim MMult(ColCount, ColCount)
ReDim returns(ColCount) 
```

在这些行之后：

```
ColCount = Range("C6:H15").Columns.Count
RowCount = Range("C6:H15").Rows.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:35:14.743

我正在尝试在 Range(C6:H15) 中的每个单元格中运行值为 1 的以下代码：

```
Sub varcovmmult()

    Dim returns()
    Dim trans()
    Dim Excess()
    Dim MMult()

    ColCount = Range("C6:H15").Columns.Count
    RowCount = Range("C6:H15").Rows.Count

    ReDim trans(ColCount, RowCount)
    ReDim Excess(RowCount, ColCount)
    ReDim MMult(ColCount, ColCount)
    ReDim returns(ColCount)

    For j = 1 To ColCount
        returns(j) = Application.Average(Range("C6:H15").Columns(j))
        Range("c30:h30").Cells(j) = returns(j)
    Next j

    For j = 1 To ColCount
        For i = 1 To RowCount
            Excess(i, j) = Range("c6:h15").Cells(i, j) - returns(j)
            Range("C36:H45").Cells(i, j) = Excess(i, j)
        Next i
    Next j

    For j = 1 To ColCount
        For i = 1 To RowCount
            trans(j, i) = Range("C36:H45").Cells(i, j)
            Range("C51:L56").Cells(j, i) = trans(j, i)
        Next i
    Next j

    For i = 1 To ColCount
        For j = 1 To ColCount
            For k = 1 To RowCount
                MMult(i, j) = MMult(i, j) + trans(i, k) * Excess(k, j)
            Next k
        Next j
    Next i

    For i = 1 To ColCount
        For j = 1 To ColCount
            Range("C62").Cells(i, j) = MMult(i, j)
        Next j
    Next i

End Sub 
```

我能够成功运行此代码。

如果此范围内任何单元格中的值为空白或非数字，我得到的一个错误是类型不匹配。

如果下标超出范围，则可以尝试使用 ColCount - 1 或 RowCount - 1。只需检查 Cell(i, j) 中是否存在适当的值。

希望这可以帮助！

维韦克

# clojure - 在 core.logic 中，两个方向的投影算作关系吗？

> ID：15727088
> 
> 赞同：1
> 
> 时间：2013-03-31T06:44:54.060
> 
> 标签：clojure, logic-programming, clojure-core.logic, minikanren

我知道`project`在 core.logic 中是不相关的。

但是，似乎我可以通过在内部的两个方向投影来获得类似关系的行为`conda`，例如：

```
(defn lifto-with-inverse
  "Lifts a unary function and its inverse into a core.logic relation."
  ([f g]
    (fn [& vs]
      (let [[x y] vs]
        (conda 
          [(pred x number?) (project [x] (== y (f x)))]
          [(pred y number?) (project [y] (== x (g y)))])))))

(let [inco (lifto-with-inverse inc dec)]
   (run* [q] (inco q 3)))
=> 2 
```

这算作关系操作吗？还是缺少其他东西使这种非关系性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:05:02.663

在这种情况下，似乎其中一个论点必须是基础的，使其与非关系型无关。

# php - 在 HTML 标记中使用 PHP

> ID：15727090
> 
> 赞同：0
> 
> 时间：2013-03-31T06:45:15.477
> 
> 标签：php, html, arrays, hyperlink, tags

我现在正在学习 PHP，但我一直坚持这一点：

```
<?php
$links= array();
links[0]="https://www.google.co.in/";
links[1]="http://www.reddit.com/";
$n= rand(0,1);
$select= $links[$n];
?>
<body>
  <a href="<?php echo $select; ?>">Random</a>
</body> 
```

我希望页面随机重定向到 google 或 reddit，但我不明白问题出在哪里。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:48:07.447

链接变量缺少 $ ...将代码更改为

```
links[0]="https://www.google.co.in/";
links[1]="http://www.reddit.com/"; 
```

至

```
$links[0]="https://www.google.co.in/";
$links[1]="http://www.reddit.com/"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T06:48:16.323

```
<?php
$links= array();
$links [0] = "https://www.google.co.in/";
$links [1] = "http://www.reddit.com/";
$n = rand (0, 1);
$select = $links [$n];

header ("Location: $select");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:53:23.660

```
<?php
$links = array(
  "https://www.google.co.in/",
  "http://www.reddit.com/",
// ...
);
$randomLink = $links[rand(0, count($links)-1)];
header("Location: {$randomLink}");
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T06:49:52.470

如果要自动重定向：

1- 使用 HTML META 标签

```
<meta http-equiv="refresh" content="0;URL='<?php echo $select; ?>'"> 
```

2-或使用 PHP 标头

```
header("Location: $select");
exit(); 
```

完整代码：

```
<?php
$links= array();
$links [0] = "https://www.google.co.in/";
$links [1] = "http://www.reddit.com/";
$n = rand (0, 1);
$select = $links [$n];
header("Location: $select");
exit();
?> 
```

# c++ - '<' 标记之前的预期初始化程序

> ID：15727098
> 
> 赞同：2
> 
> 时间：2013-03-31T06:46:23.470
> 
> 标签：c++, templates

我在头文件中有一个模板类 myClass 原型，并在头文件末尾包含的 .cpp 文件中实现它。当我使用代码时：

```
template<typename T>
class myClass {
public:
    void myFunction(const T item);
}; 
```

在头文件和

```
template <class T>
void myClass<T>::myFunction(const T item)
{
//stuff
} 
```

在实现文件中，我在实现代码的第 2 行得到了上述错误。我在另一个程序中使用了相同的完全相同的语法，并成功编译并正确运行结果，所以我很困惑。.cpp 文件中有三个不同的函数定义，并且在各自的行上都有相同的错误。我假设我犯了一个小错误，但我真的无法弄清楚。

非常感谢帮助和解释。

编辑：

这是一个具有相同错误的 SSCCE：main.cpp

```
#include <iostream>
#include "myClass.h"

using namespace std;

int main(){
myClass<int> example;
example.myFunction(1);
return 0;
} 
```

我的类.h

```
#include<iostream>

#ifndef MYCLASS_H_
#define MYCLASS_H_

template<typename T>
class myClass {
public:
    void myFunction(const T item);
};

#include "myClass.cpp"
#endif /* MYCLASS_H_ */ 
```

我的类.cpp

```
using namespace std;

template <class T>
void myClass<T>::myFunction(const T item)
{
    cout << "Hello World!";
} 
```

我正在使用带有 GNU GCC 编译器的 Code::Blocks 10.05。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T21:28:07.420

我终于通过从构建配置中删除 myClass.cpp 解决了这个问题。不知道为什么这是必要的，但它现在完美无缺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:50:34.773

将方法的实现也放在头文件（`.h`）中

编译器需要知道翻译单元中的实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:49:59.387

在文件中声明模板并在`.h`文件中定义它是非常困难的`.cpp`。编译器需要在单个文件中声明和定义模板才能创建代码。因此，如果您的编译器不支持`export`关键字，它将无法工作。所以你不应该使用不同的文件来声明和定义。另请参阅[此](https://stackoverflow.com/questions/2185954/implications-of-template-declaration-definition)线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T07:14:06.757

模板是按需实例化的，并且考虑到编译器设计中会引入的复杂性，大多数编译器都会构建一个限制，以将模板声明和定义保存在一个文件中。如果不是这样，在类和函数定义之上的模板声明将创建一个模式，编译器难以检测模式并实例化模板。

类似的问题已经在[Stackoverflow](https://stackoverflow.com/q/36039/1654121)上进行了讨论，并在[Parashift](http://www.parashift.com/c++-faq-lite/templates-defn-vs-decl.html)和[cplusplus.com](http://www.cplusplus.com/doc/tutorial/templates/)上进行了解释（阅读：文章末尾的**模板和多文件项目）。**

希望这可以帮助！

维韦克

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-01T13:20:37.513

也可以将实现保存在`myClass.cpp`文件中。除了实现本身之外，您还需要使用特定类型的`T`. 例如， if `T`could be `int`and `float`,`myClass.cpp`应该是这样的：

```
using namespace std;

template <class T>
void myClass<T>::myFunction(const T item)
{
    cout << "Hello World!";
}

// Declarations with specific types.
template void myClass<int>::myFunction(const int item);
template void myClass<float>::myFunction(const float item); 
```

# android - 查询返回一个 toString() 值？

> ID：15727099
> 
> 赞同：2
> 
> 时间：2013-03-31T06:46:33.613
> 
> 标签：android, sqlite, android-sqlite

我试图通过列中的`querying`所有值返回列中的唯一值，但它不起作用。

为什么会这样`query`：

```
public String getDaily() {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();       
    Cursor cursor = db.rawQuery("SELECT * FROM "
            + smokinDBOpenHelper.MONEY_TABLE + " WHERE " + 
                KEY_PRICE, null);
    String s = ("" + cursor);       
    return s;
} 
```

返回这个值`SQLiteCursor@4120eec8`

而不是存储在该列中的唯一值是`7.63`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:49:33.680

改变：

```
String s = ("" + cursor); 
```

到：

```
cursor.moveToFirst();
String s = "" + cursor.getDouble("COLUMN_NAME"); // replace with your column name 
```

它当前打印`toString`值 of`Cursor`因为您试图将类型的对象连接`Cursor`到 a `String`，而您应该将类​​型的对象`double`与 type连接起来`String`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:49:27.440

我认为你需要这样做。

```
String s = cursor.getString(0); 
```

# java - 从文件中读取数据后尝试创建 HashMap。获取空值。我究竟做错了什么？

> ID：15727102
> 
> 赞同：1
> 
> 时间：2013-03-31T06:46:48.363
> 
> 标签：java, string, parsing, integer, hashmap

我正在尝试从文件中读取以创建`HashMap<String, HashMap<String, Integer>>`.

inputFile 的格式如下：

```
 A    B    C    D
 1   -1    2   -3
 2    3   -5    3
-3    2    7   -5
 4    3    1    1 
```

此输入文件表示所有点对之间的距离。这意味着，它表示以下矩阵：

```
 A    B    C    D
A    1   -1    2   -3
B    2    3   -5    3
C   -3    2    7   -5
D    4    3    1    1 
```

在创建地图时，当我打印键和值时，会打印正确的值。但是当我在完全填充地图后尝试打印地图时，它只会正确打印外部地图的键。其他所有内容都打印为`null`.

我究竟做错了什么？

```
public static HashMap<String, HashMap<String, Integer>> initMap() {
    HashMap<String, HashMap<String, Integer>> distancesMap = new HashMap<String, HashMap<String, Integer>>(); 
    final String distancesFileName = "/home/name/workspace/Tester/src/main/distances.txt";
    String distancesFile = Main.readInputFile(distancesFileName);
    String[] distancesFileArray = distancesFile.split("\n");
    String[] firstLine = distancesFileArray[0].split("\t");
    for(int iii = 1; iii < distancesFileArray.length; iii++) {
        HashMap<String, Integer> tempMap = new HashMap<String, Integer>();
        String[] singleLineArray = distancesFileArray[iii].split("\t");
        for(int jjj = 0; jjj < singleLineArray.length; jjj++) {
            tempMap.put(firstLine[jjj], Integer.parseInt(singleLineArray[jjj]));
            // the following print statement (commented out) prints the correct values  
            // System.out.println(firstLine[jjj] + " " + tempMap.get(firstLine[jjj]));

        }
        distancesMap.put(firstLine[iii - 1], tempMap);
    }
    /*
     * The following lines just print the key of the outer map correctly
     * but everything else is printed as null
     */
    for(String key : distancesMap.keySet()) {
        System.out.print(key + "\t");    // prints the correct String value
        HashMap<String, Integer> tempMap = distancesMap.get(key);
        for(String innerKey : tempMap.keySet()) {
            // the following line only prints null values
            System.out.print(tempMap.get(innerKey + "\t"));
        }
        System.out.println();
    }
    return distancesMap;
} 
```

我从中得到的输出是这样的：

```
B    nullnullnullnull
C    nullnullnullnull
D    nullnullnullnull
A    nullnullnullnull 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T06:50:04.003

改变

```
System.out.print (tempMap.get (innerKey + "\t")); 
```

到

```
System.out.print (tempMap.get (innerKey) + "\t"); 
```

# c - `__value` 是 gcc 扩展，如果是，它有什么作用？它有 VC++ 等价物吗？

> ID：15727103
> 
> 赞同：2
> 
> 时间：2013-03-31T06:47:02.417
> 
> 标签：c, visual-c++, gcc, visual-studio-2012, cygwin

标题说明了一切。

我正在尝试将 cygwin 的 gcc 中的一些库与 Visual Studio 的 C++ 编译器一起使用，但以下代码`C:\cygwin\usr\include\sys\_types.h`无法编译：

```
#ifndef __mbstate_t_defined
/* Conversion state information.  */
typedef struct
{
  int __count;
  union
  {
    wint_t __wch;
    unsigned char __wchb[4];
  } __value;        /* Value so far.  */
} _mbstate_t;
#endif 
```

构建输出：

```
1>c:\cygwin\usr\include\sys\_types.h(74): error C4980: '__value' : use of this keyword requires /clr:oldSyntax command line option
1>c:\cygwin\usr\include\sys\_types.h(74): error C2059: syntax error : '__value' 
```

Visual Studio 似乎将其解释为[某种 CLR 扩展](http://msdn.microsoft.com/en-us/library/aa712839%28v=vs.71%29.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T06:50:22.320

> 是`__value`gcc 扩展，如果是，它有什么作用？它有 VC++ 等价物吗？

这是相反的方式。它是[VC++ 中的关键字，](http://msdn.microsoft.com/en-us/library/k7kkeb76%28v=vs.71%29.aspx)但不是`gcc`.

在`gcc`中，它只是一个标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T07:11:15.580

这个[链接](http://social.msdn.microsoft.com/forums/en-us/vcgeneral/thread/ADABF801-8006-47BD-9495-972E04DF5C78)说

> C/C++ 标准明确表示保留包含双下划线的标识符：ISO.IEC 14882:2003 C++ 标准，第 17.4.3.1.2 节“全局名称”：“某些名称集和函数签名始终保留给实现： -- 每个包含双下划线 (__) 或以下划线后跟大写字母 (2.11) 的名称都保留给实现以供任何使用。..."

由于看起来 Visual Studio 使用`__value`C++ 托管扩展中的关键字，您是否可以重命名`__value`为其他名称（如`__Value`）？

[上面的 MSDN 链接也讨论了这是否是非托管 C 中的错误，微软的回复似乎是这是“设计使然”]

# c# - 如何将字符串集合作为 TextReader 传递？

> ID：15727113
> 
> 赞同：6
> 
> 时间：2013-03-31T06:49:16.773
> 
> 标签：c#, csv, stream

我正在使用 CSVHelper 库，它可以从 CSV 文件中提取对象列表，只需三行代码：

```
var streamReader = // Create a reader to your CSV file.
var csvReader = new CsvReader( streamReader );
List<MyCustomType> myData = csvReader.GetRecords<MyCustomType>(); 
```

但是，按文件有废话行，我需要跳过文件中的前十行。我认为使用 LINQ 来确保“干净”数据会很好，然后将该数据传递给`CsvFReader`，如下所示：

```
public TextReader GetTextReader(IEnumerable<string> lines)
{
    // Some magic here. Don't want to return null;
    return TextReader.Null;
}
public IEnumerable<T> ExtractObjectList<T>(string filePath) where T : class
{
    var csvLines = File.ReadLines(filePath)
                        .Skip(10)
                        .Where(l => !l.StartsWith(",,,"));
    var textReader = GetTextReader(csvLines);
    var csvReader = new CsvReader(textReader);
    csvReader.Configuration.ClassMapping<EventMap, Event>();
    return csvReader.GetRecords<T>();
} 
```

但我真的坚持通过像`TextReaer`.

我的替代方法是通过 CsvReader 逐行处理 CSV 文件，并在提取对象之前检查每一行，但我发现这有点笨拙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T07:05:35.083

StringReader 类提供了一个包装字符串的 TextReader。您可以简单地加入这些行并将它们包装在 StringReader 中：

```
public TextReader GetTextReader(IEnumerable<string> lines)
{
    return new StringReader(string.Join("\r\n", lines));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-04T03:54:29.867

一种更简单的方法是使用 CsvHelper 跳过这些行。

```
// Skip rows.
csvReader.Configuration.IgnoreBlankLines = false;
csvReader.Configuration.IgnoreQuotes = true;
for (var i = 0; i < 10; i++)
{
    csvReader.Read();
}
csvReader.Configuration.IgnoreBlankLines = false;
csvReader.Configuration.IgnoreQuotes = false;

// Carry on as normal.
var myData = csvReader.GetRecords<MyCustomType>; 
```

`IgnoreBlankLines`如果前 10 行中的任何一行为空白，则会关闭。`IgnoreQuotes`已关闭，因此`BadDataException`如果这些行包含 a ，您将不会得到任何 s `"`。您可以再次打开它们以恢复正常功能。

如果不知道行数，需要根据行数据进行测试，可以直接测试`csvReader.Context.Record`看看是否需要停止。在这种情况下，您可能需要在调用`csvReader.ReadHeader()`之前手动调用`csvReader.GetRecords<MyCustomType>()`。

# jquery - 如何使用JQUERY在列表框中查找所选项目是否为数字和字母？

> ID：15727123
> 
> 赞同：0
> 
> 时间：2013-03-31T06:50:09.273
> 
> 标签：jquery

我创建了两个列表框，我可以在其中相互移动值..但在移动之前我需要验证条目..我需要知道它是数字还是字母！

我已经搜索了这个很棒的网站，并找到了像这样获取所选项目的方法。

```
select.find('option:selected').text(); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:07:55.203

Javascript 有`isNaN()`(isNotaNumber) ：

```
if ( isNaN( select.find('option:selected').text() ) ) {
    // It's not a number
} 
```

[**小提琴**](http://jsfiddle.net/hHfNs/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:55:29.147

```
 if(select.find('option:selected').text().match('^[0-9]+$')){
    // its numeric
 }
 else{
   // it's alpha
 } 
```

# php - 当我第二次重新加载页面时，PDO 准备工作

> ID：15727127
> 
> 赞同：1
> 
> 时间：2013-03-31T06:50:48.323
> 
> 标签：php, json, pdo

输出 JSON 在[这里](http://bluewingholidays.com/xxxxx.php)。当我第二次重新加载时它有新的重新编码。但是当我第一次更新时它没有重新编码

```
<?php

    try {
        $dbh = new PDO('mysql:host=localhost;dbname=$db', "user", "pass");
        foreach($dbh->query('SELECT * FROM `jos_jea_towns` LIMIT 0, 500 ') as $row) {
           echo '<pre>' . json_encode($row, JSON_PRETTY_PRINT).'</pre>';

        }
        $insertObject = $dbh->prepare("INSERT INTO `jos_jea_towns` (id, value) VALUES (:id, :value)");
    $insertObject->bindParam(':id', $id);
    $insertObject->bindParam(':value', $value);

    // insert one row
    $id = 433;
    $value = 'yyy';
    $insertObject->execute();

    // insert another row with different values
    $id = 434;
    $value = 'xxx';
    $insertObject->execute();

    // insert another row with different values
    $id = 435;
    $value = 'Samitha';
    $insertObject->execute();

        $dbh = null;
    } catch (PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }

    ?> 
```

这个 PDO 是如何准备工作的，还是我的 JSON 文件有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:00:12.053

好吧，您*先*选择，然后再更新。所以第一次，您在添加记录之前选择，然后添加记录。

在第二次重新加载时，您已经添加了记录（来自上一次迭代），因此显示了插入的记录。

* * *

要解决，请先插入，然后再选择。这样您就可以看到刚刚所做的更改。

# ruby-on-rails - 使用 Rails 将多个资产添加到资源

> ID：15727128
> 
> 赞同：1
> 
> 时间：2013-03-31T06:51:06.180
> 
> 标签：ruby-on-rails, paperclip

我正在构建一个房地产网络应用程序，每个广告都应该有无限数量的图片（资产）。

在 Ad#new 表单中，我希望用户可以选择上传任意数量的图片。

我创建了一个包含多个资产的广告模型。资产是一个模型，其中包含用于图片的回形针。

这是代码：

```
class Asset < ActiveRecord::Base
  attr_accessible :picture
  has_attached_file :picture, :styles => { :large => "600x600", :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"

  belongs_to :ad
end

class Ad < ActiveRecord::Base
  attr_accessible :contact_cell, :description, :price, :title, :user_id

  belongs_to :user

  has_many :assets, dependent: :destroy
end 
```

如果我想在用户提交表单之前让用户选择添加无限数量的照片，form_for 应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:19:25.347

如果你想用 html5 来做，你可以通过做类似的事情来轻松地做到这一点（需要注意的主要重要的事情是，在 html5 上你可以添加属性 multiple=true，这将为你创建一个多重上传）：

```
<%= simple_form_for(@ad, html: { multipart: true }) do |f| %>
  <%= f.input :contact_cell %>
  <%= f.input :description %>
  <%= f.input :price %>
  <%= f.input :title %>
  <%= file_field_tag('ad_assets_picture', multiple: true, name: "ad[assets_attributes][][picture]") %>
  <%= f.button :submit %>
<%- end %> 
```

否则你可以按照嵌套形式的例子，有一个[很好的网络广播](http://railscasts.com/episodes/196-nested-model-form-part-1)

# java - 在 Google AppEngine 运行时中模拟

> ID：15727135
> 
> 赞同：1
> 
> 时间：2013-03-31T06:52:19.700
> 
> 标签：java, google-app-engine, mockito

我正在尝试在 GAE 运行时中做一些需要“模拟”的事情：

```
 private Mongo createMongo() {
    Mongo mongo = Mockito.mock(Mongo.class);
    ...
  } 
```

但是，这显然会导致错误，因为“反射”是一个受限类：

```
java.lang.NoClassDefFoundError: sun.reflect.ReflectionFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.<init>(SunReflectionFactoryInstantiator.java:24)
    at org.objenesis.strategy.StdInstantiatorStrategy.newInstantiatorOf(StdInstantiatorStrategy.java:65)
    at org.objenesis.ObjenesisBase.getInstantiatorOf(ObjenesisBase.java:76)
    at org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:59)
    at org.mockito.internal.creation.jmock.ClassImposterizer.createProxy(ClassImposterizer.java:111)
    at org.mockito.internal.creation.jmock.ClassImposterizer.imposterise(ClassImposterizer.java:51)
    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:52)
    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:41)
    at org.mockito.Mockito.mock(Mockito.java:1014)
    at org.mockito.Mockito.mock(Mockito.java:909) 
```

*   有什么解决方法吗？有没有办法让“反射”与 GAE 运行时一起工作？
*   是否有任何“仿真”库`sun.reflect`可以进行反射？
*   也许，定义哪些类可以被反映？喜欢`@Reflectable`什么的
*   或者已经存在在 AppEngine 中工作的 Mock 框架？

更新：

我在 2010 年发现了一个类似的问题：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/uIWRftGl-fA](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/uIWRftGl-fA)

然而直到现在都没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T00:09:23.117

App Engine 应用在沙盒中运行，沙盒限制了它们的功能。可以在此处找到沙盒的概述：

[https://cloud.google.com/appengine/docs/java/#Java_The_sandbox](https://cloud.google.com/appengine/docs/java/#Java_The_sandbox)

沙盒限制之一是对应用程序可以访问的 jre 捆绑类的限制。此处列出了允许应用程序访问的 jre 捆绑类的完整列表：

[https://cloud.google.com/appengine/docs/java/jrewhitelist](https://cloud.google.com/appengine/docs/java/jrewhitelist)

为什么 ReflectionFactory 本身不在此可访问类列表中？好吧，如果您阅读此类的 javadocs，您会发现以下声明：“此类中的方法非常不安全，可能导致语言和验证程序的颠覆。” 所以，这个类可以用来颠覆沙盒。

# python - 有没有关于 Python 3 变化的好文章？

> ID：15727142
> 
> 赞同：0
> 
> 时间：2013-03-31T06:53:30.117
> 
> 标签：python

我正在返回 Python 开发人员。我上次使用的是 2.7。我想阅读自 2.7 以来 3.3 中新事物和变化的完整列表。有人知道什么好东西吗？

PS：是的，我知道文档中有我的内容，但我想要一篇文章，其中包含一些作者对这些更改的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T06:56:13.853

[http://docs.python.org/3/whatsnew/3.0.html](http://docs.python.org/3/whatsnew/3.0.html)

本文介绍了 Python 3.0 与 2.6 相比的新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:06:20.570

我发现这个[pdf](http://ptgmedia.pearsoncmg.com/imprint_downloads/informit/promotions/python/python2python3.pdf)信息量很大。它是由 Mark Summerfield 的“Python 3 编程”一书的出版商提供的免费 4 页差异备忘单。

回应你的PS，这不是一篇文章，而是一个非常容易掌握的分类差异列表。

# java - 提高基于斯坦福标记程序的性能

> ID：15727144
> 
> 赞同：8
> 
> 时间：2013-03-31T06:53:41.850
> 
> 标签：java, nlp, pos-tagger, stanford-nlp

我刚刚实现了一个在 Java 中使用斯坦福 POS 标记器的程序。

我使用了一个几 KB 大小的输入文件，由几百个单词组成。我什至将堆大小设置为 600 MB。

但它仍然很慢，有时会耗尽堆内存。如何提高其执行速度和内存性能？我希望能够使用几 MB 作为输入。

```
 public static void postag(String args) throws ClassNotFoundException

  {

     try

     {

     File filein=new File("c://input.txt");

     String content = FileUtils.readFileToString(filein);

     MaxentTagger tagger = new MaxentTagger("postagging/wsj-0-18-bidirectional-distsim.tagger");

     String tagged = tagger.tagString(content);

        try 
        {
            File file = new File("c://output.txt");
            if (!file.exists()) 
            {
                file.createNewFile();
            } 

            FileWriter fw = new FileWriter(file.getAbsoluteFile());
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write("\n"+tagged);
            bw.close();

            }
              catch (IOException e) 
              {
                    e.printStackTrace();
               }

     } catch (IOException e1)
     {
         e1.printStackTrace();
     }

 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T00:52:41.003

主要的第一条建议是使用`wsj-0-18-left3words-distsim.tagger`（或者可能更好，`english-left3words-distsim.tagger`最近的版本，用于一般文本），而不是`wsj-0-18-bidirectional-distsim.tagger`. 虽然双向标注器的标注性能*稍好*一些，但它的速度大约慢了 6 倍，并且使用了大约两倍的内存。图 FWIW：在 2012 款 MacBook Pro 上，当给出足够的文本来“预热”时，`left3words`标注器将以每秒约 35000 个字的速度标注文本。

关于内存使用的另一条建议是，如果您有大量文本，请确保将其以`tagString()`合理大小的块传递，而不是全部作为一个巨大的字符串，因为整个字符串将立即被标记，添加到内存要求。

# wso2 - BAM 仪表板图形错误

> ID：15727145
> 
> 赞同：1
> 
> 时间：2013-03-31T06:53:48.887
> 
> 标签：wso2, wso2bam

我成功地在 WSO2 AS 和 WSO2 BAM 之间建立了连接。第一次运行时，我的 WSO2 AS 服务器显示在选择 BAM“服务器部分”中，并带有端口地址。当我单击“所有，月份和日期”中的任何一个时，就会显示该图表。但是当我单击“现在”时，它会显示空白页。说“没有可用的数据。请访问我们的文档以查看如何配置 AS 监控”。第二天当我再次运行相同的程序时，这次“ALL”和“Month”有响应图。除了“Day”和“NOW”都显示为空白页面有同样的错误。我怀疑为什么“现在”图表没有显示结果。即使再次重新启动服务器后，它仍然只显示两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T11:00:50.923

这些不是错误，它们是工具箱的功能。“现在”显示当前小时内收到的数据（我记得）。“日”显示当天收到的数据。运行示例 1 小时后，数据将不会显示在“现在”下。在样本运行后的第二天，将不会显示“日”数据。我想你现在明白其中的原理了。

# javascript - 在 Javascript 中操作 HTML

> ID：15727146
> 
> 赞同：1
> 
> 时间：2013-03-31T06:53:54.373
> 
> 标签：javascript, html, dom

我正在尝试操作 div 中已经存在的文本并将其替换为 JavaScript 中的另一个字符串，通过替换 div 元素中存在的字符串中的特定字符来创建基本的动画效果，更准确地说是基于位置的字符串替换。但是，当我写下以下代码时，它不起作用。我想要做的是将原始文本存储在一个变量中，当文本的 dom 替换发生时，然后设置一定的间隔替换为旧文本，并再次替换为新的随机文本，在文本的某个位置创建文本替换动画。

代码 ：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var all ="ABCDEFGHIJKLMNOPQRSTUVWXYZa{}[];:></?bcdefghijklmnopqrstuvwxyz0123+_)(*&^%$#@!~`456789";
var old_text = document.getElementById("text").innerText;

function randChar() {
    "use strict";
    return all.charAt(Math.floor(Math.random()*all.length));   
}
function main() {
    "use strict";
    var $_inter = setInterval(function() {

        var text = document.getElementById("text");

        text.innerHTML = text.innerHTML.substring(0, 5) + randChar() + text.innerHTML.substring(5);
        setTimeout(function(){
            text.innerHTML = old_text;
        },200);
    }, 350);
}
window.onload = main;
</script>
</head>
<body>
<div id="text">Hello World!</div>
</body>
</html> 
```

所以为了让它工作一段时间，我使用原始字符串作为

```
setTimeout(function(){
            text.innerHTML = "Hello World!";
        },200); 
```

这是不可能的，因为页面中的文本可能是动态生成的。当我运行第一个代码时，它显示了 Null 的 innerText。

它抛出的确切错误是：

> 未捕获的类型错误：无法读取 null 的属性“innerText”

这是什么意思，因为有文本和元素，为什么它不能从 dom 中获取文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T06:59:55.617

## 无法读取 null 的属性“innerText”

你的问题是有原因的，因为你`#text`在它被定义之前就得到了。

```
var old_text = document.getElementById("text").innerText; 
```

您应该将其包含在您的`window.onload`函数中，因为它将存在。

## 未捕获的 ReferenceError：未定义标志

一旦你这样做，你会收到另一个错误：

> 未捕获的 ReferenceError：未定义标志

对于线路：

```
flag = flag+1; 
```

这是因为你还没有定义你的标志变量，这可以通过`var flag;`在你的第一个顶部定义来解决。

## 演示

[jsFiddle](http://jsfiddle.net/Tyriar/JUzQF/1/)

```
var all ="ABCDEFGHIJKLMNOPQRSTUVWXYZa{}[];:></?bcdefghijklmnopqrstuvwxyz0123+_)(*&^%$#@!~`456789";
var old_text;
var flag = 0;

function randChar() {
    "use strict";
    return all.charAt(Math.floor(Math.random()*all.length));   
}
function main() {
    "use strict";
    old_text = document.getElementById("text").innerText;
    var counter = Math.floor(Math.random()*document.getElementById("text").innerText.length);
    var $_inter = setInterval(function() {

        var text = document.getElementById("text");

        text.innerHTML = text.innerHTML.substring(0, 5) + randChar() + text.innerHTML.substring(5);
        setTimeout(function(){
            text.innerHTML = old_text;
        },200);
        flag = flag+1;
    }, 350);
}
window.onload = main; 
```

## 火狐浏览器中的错误

使用上面的代码，我们仍然会在 Firefox 中收到原始错误。这是因为[Firefox 没有实现 innerText](https://stackoverflow.com/a/1359507/1156119)。这可以通过使用`.textContent`或来解决`.innerHTML`。

[jsFiddle](http://jsfiddle.net/JUzQF/2/)

```
old_text = document.getElementById("text").textContent;
var counter = Math.floor(Math.random()*document.getElementById("text").textContent.length);
// or
old_text = document.getElementById("text").innerHTML;
var counter = Math.floor(Math.random()*document.getElementById("text").innerHTML.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:10:26.417

```
var all ="ABCDEFGHIJKLMNOPQRSTUVWXYZa{}[];:></?bcdefghijklmnopqrstuvwxyz0123+_)(*&^%$#@!~`456789";
var old_text;

function randChar() {
    "use strict";
    return all.charAt(Math.floor(Math.random()*all.length));   
}
function main() {
    "use strict";
    old_text = document.getElementById("text").innerText;
    var $_inter = setInterval(function() {
        var text = document.getElementById("text");
        text.innerHTML = text.innerHTML.substring(0, 5) + randChar() + text.innerHTML.substring(5);
        setTimeout(function(){
            text.innerHTML = old_text;
        },200);
    }, 350);
}
window.onload = main; 
```

只需摆脱`flag`and `counter`。`old_text`在`onload`监听器中初始化。

# java - 椭圆曲线上点的标量乘法

> ID：15727147
> 
> 赞同：5
> 
> 时间：2013-03-31T06:54:19.180
> 
> 标签：java, elliptic-curve

我在 NIST 指定的曲线“p192”上实现椭圆曲线点算术运算。出于测试目的，我采用了[NIST Routine 文档中显示的曲线 p192](http://www.nsa.gov/ia/_files/nist-routines.pdf)示例点。我得到了加点和加倍点的正确答案，但对于标量乘法，我的答案不正确。由于这个原因，我无法达到是否

```
$ k^{-1}(kP) = P $ 
```

在哪里

```
$ k^{-1}.k = 1 mod p $ 
```

请帮助我了解我在哪里犯错误。

```
package a;
import java.math.BigInteger;
import java.security.spec.ECPoint;
public class ScalarMultiply {
private static final BigInteger ONE = new BigInteger("1");;
static BigInteger TWO = new BigInteger("2");
    static BigInteger p = new BigInteger("6277101735386680763835789423207666416083908700390324961279");

public static ECPoint scalmult(ECPoint P, BigInteger k){
    ECPoint R =P,S = P;
    int length = k.bitLength();
    //System.out.println("length is" + length);
    byte[] binarray = new byte[length];
    for(int i=0;i<=length-1;i++){
        binarray[i] = k.mod(TWO).byteValue();
        k = k.divide(TWO);

    }
    for(int i=0;i<=length-1;i++){
        System.out.print("" + binarray[i]); 
    }

    for(int i = length - 2;i > 0;i--){
        R = doublePoint(R);
        if(binarray[i]== 1) 
            R = addPoint(R, S);
    }
return R;
}

public static ECPoint addPoint(ECPoint r, ECPoint s) {

    BigInteger slope = (r.getAffineY().subtract(s.getAffineY())).multiply(r.getAffineX().subtract(s.getAffineX()).modInverse(p)).mod(p);
    BigInteger Xout = (slope.modPow(TWO, p).subtract(r.getAffineX())).subtract(s.getAffineX()).mod(p);
    BigInteger Yout = r.getAffineY().negate().mod(p);
    Yout = Yout.add(slope.multiply(r.getAffineX().subtract(Xout))).mod(p);
    ECPoint out = new ECPoint(Xout, Yout);
    return out;
}

public static ECPoint doublePoint(ECPoint r) {
    // TODO Auto-generated method stub
    BigInteger slope = (r.getAffineX().pow(2)).multiply(new BigInteger("3"));
    slope = slope.add(new BigInteger("3"));
    slope = slope.multiply((r.getAffineY().multiply(TWO)).modInverse(p));
    BigInteger Xout = slope.pow(2).subtract(r.getAffineX().multiply(new BigInteger("2"))).mod(p);
    BigInteger Yout = (r.getAffineY().negate()).add(slope.multiply(r.getAffineX().subtract(Xout))).mod(p);
    ECPoint out = new ECPoint(Xout, Yout);
    return out;
}
} 
```

主要类是

```
 package a;
    import java.math.BigInteger;
    import java.security.spec.ECPoint;

    public class EccArithmetic {

    /**
     * @param args
     */
    public static void main(String[] args) {

             BigInteger xs = new BigInteger("d458e7d127ae671b0c330266d246769353a012073e97acf8", 16);
             BigInteger ys = new BigInteger
("325930500d851f336bddc050cf7fb11b5673a1645086df3b", 16);
             BigInteger xt = new BigInteger

("f22c4395213e9ebe67ddecdd87fdbd01be16fb059b9753a4", 16);
             BigInteger yt = new BigInteger

("264424096af2b3597796db48f8dfb41fa9cecc97691a9c79", 16);
             ECPoint S = new ECPoint(xs,ys);
             ECPoint T = new ECPoint(xt,yt);
             // Verifying addition 

             ECPoint Rst = ScalarMultiply.addPoint(S, T);
             BigInteger xst = new BigInteger

("48e1e4096b9b8e5ca9d0f1f077b8abf58e843894de4d0290", 16);   // Specified value of x of point R for addition  in NIST Routine example
             System.out.println("\nx-coordinate of point Rst is : " + Rst.getAffineX()); 
             System.out.println("\ny-coordinate of point Rst is : " + Rst.getAffineY());
             if(Rst.getAffineX().equals(xst))
                 System.out.println("Adding is correct");

//Verifying Doubling
BigInteger xr = new BigInteger

("30c5bc6b8c7da25354b373dc14dd8a0eba42d25a3f6e6962", 16);  // Specified value of x of point R for doubling  in NIST Routine example
             BigInteger yr = new BigInteger

("0dde14bc4249a721c407aedbf011e2ddbbcb2968c9d889cf", 16);
             ECPoint R2s = new ECPoint(xr, yr);  // Specified value of y of point R for doubling  in NIST Routine example
             System.out.println("\nx-coordinate of point R2s is : " + R2s.getAffineX()); 
             System.out.println("\ny-coordinate of point R2s is : " + R2s.getAffineY());
             System.out.println("\nx-coordinate of calculated point is : " + 

ScalarMultiply.doublePoint(S).getAffineX()); 
             System.out.println("\ny-coordinate of calculated point is : " + 

ScalarMultiply.doublePoint(S).getAffineY());
             if(R2s.getAffineX().equals(ScalarMultiply.doublePoint(S).getAffineX()))
                 System.out.println("Doubling is correct");

             xr = new BigInteger("1faee4205a4f669d2d0a8f25e3bcec9a62a6952965bf6d31", 16);  // Specified value of x of point R for scalar Multiplication  in NIST Routine example
             yr = new BigInteger("5ff2cdfa508a2581892367087c696f179e7a4d7e8260fb06", 16);   // Specified value of y of point R for scalar Multiplication  in NIST Routine example
             ECPoint Rds = new ECPoint(xr, yr);
             BigInteger d = new BigInteger

("a78a236d60baec0c5dd41b33a542463a8255391af64c74ee", 16);
             //Rs = new ECPoint(ScalarMultiply.scalmult(S, d).getAffineX(), yr);
             System.out.println("\nx-coordinate of point Rds is : " + Rds.getAffineX());
            System.out.println("\nx-coordinate of point Rds is : " + Rds.getAffineY());
            System.out.println("\nx-coordinate of calculated point is : " + ScalarMultiply.scalmult(S, 

            d).getAffineX());
            System.out.println("\nx-coordinate of calculated point is : " + ScalarMultiply.scalmult(S, 

            d).getAffineY());            
            if(Rds.getAffineX().equals(ScalarMultiply.scalmult(S, d).getAffineX()))
                 System.out.println("Scalar Multiplication is correct");

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-13T02:07:36.717

`addPoint`和都是`doublePoint`不正确的。下面编辑的JAVA代码进行标量加倍加法，检查加法、加倍、标量相乘的结果是否正确：

**标量乘法.java**

```
public class ScalarMultiply {

private static final BigInteger ONE = new BigInteger("1");;
static BigInteger TWO = new BigInteger("2");
static BigInteger p = new BigInteger("6277101735386680763835789423207666416083908700390324961279");
static BigInteger a = new BigInteger("6277101735386680763835789423207666416083908700390324961276");

public static ECPoint scalmult(ECPoint P, BigInteger kin){
    //ECPoint R=P; - incorrect
    ECPoint R = ECPoint.POINT_INFINITY,S = P;
    BigInteger k = kin.mod(p);
    int length = k.bitLength();
    //System.out.println("length is" + length);
    byte[] binarray = new byte[length];
    for(int i=0;i<=length-1;i++){
        binarray[i] = k.mod(TWO).byteValue();
        k = k.divide(TWO);
    }
    /*for(int i = length-1;i >= 0;i--){
        System.out.print("" + binarray[i]); 
    }*/

    for(int i = length-1;i >= 0;i--){
        // i should start at length-1 not -2 because the MSB of binarry may not be 1
        R = doublePoint(R);
        if(binarray[i]== 1) 
            R = addPoint(R, S);
    }
return R;
}

public static ECPoint addPoint(ECPoint r, ECPoint s) {

    if (r.equals(s))
        return doublePoint(r);
    else if (r.equals(ECPoint.POINT_INFINITY))
        return s;
    else if (s.equals(ECPoint.POINT_INFINITY))
        return r;
    BigInteger slope = (r.getAffineY().subtract(s.getAffineY())).multiply(r.getAffineX().subtract(s.getAffineX()).modInverse(p)).mod(p);
    BigInteger Xout = (slope.modPow(TWO, p).subtract(r.getAffineX())).subtract(s.getAffineX()).mod(p);
    //BigInteger Yout = r.getAffineY().negate().mod(p); - incorrect
    BigInteger Yout = s.getAffineY().negate().mod(p);
    //Yout = Yout.add(slope.multiply(r.getAffineX().subtract(Xout))).mod(p); - incorrect
    Yout = Yout.add(slope.multiply(s.getAffineX().subtract(Xout))).mod(p);
    ECPoint out = new ECPoint(Xout, Yout);
    return out;
}

public static ECPoint doublePoint(ECPoint r) {
    if (r.equals(ECPoint.POINT_INFINITY)) 
        return r;
    BigInteger slope = (r.getAffineX().pow(2)).multiply(new BigInteger("3"));
    //slope = slope.add(new BigInteger("3")); - incorrect
    slope = slope.add(a);
    slope = slope.multiply((r.getAffineY().multiply(TWO)).modInverse(p));
    BigInteger Xout = slope.pow(2).subtract(r.getAffineX().multiply(TWO)).mod(p);
    BigInteger Yout = (r.getAffineY().negate()).add(slope.multiply(r.getAffineX().subtract(Xout))).mod(p);
    ECPoint out = new ECPoint(Xout, Yout);
    return out;
} 
```

**EccArithmetic.java**

```
public class EccArithmetic {

public static void main(String[] args) {

    BigInteger xs = new BigInteger("d458e7d127ae671b0c330266d246769353a012073e97acf8", 16);
    BigInteger ys = new BigInteger("325930500d851f336bddc050cf7fb11b5673a1645086df3b", 16);
    BigInteger xt = new BigInteger("f22c4395213e9ebe67ddecdd87fdbd01be16fb059b9753a4", 16);
    BigInteger yt = new BigInteger("264424096af2b3597796db48f8dfb41fa9cecc97691a9c79", 16);
    ECPoint S = new ECPoint(xs,ys);
    ECPoint T = new ECPoint(xt,yt);
    // Verifying addition 

    ECPoint Rst = ScalarMultiply.addPoint(S, T);
    BigInteger xst = new BigInteger("48e1e4096b9b8e5ca9d0f1f077b8abf58e843894de4d0290", 16);   // Specified value of x of point R for addition  in NIST Routine example
    System.out.println("\nx-coordinate of point Rst is : " + Rst.getAffineX()); 
    System.out.println("\ny-coordinate of point Rst is : " + Rst.getAffineY());
    if(Rst.getAffineX().equals(xst))
        System.out.println("Adding is correct");

    //Verifying Doubling
    BigInteger xr = new BigInteger("30c5bc6b8c7da25354b373dc14dd8a0eba42d25a3f6e6962", 16);  // Specified value of x of point R for doubling  in NIST Routine example
    BigInteger yr = new BigInteger("0dde14bc4249a721c407aedbf011e2ddbbcb2968c9d889cf", 16);
    ECPoint R2s = new ECPoint(xr, yr);  // Specified value of y of point R for doubling  in NIST Routine example
    System.out.println("\nx-coordinate of point R2s is : " + R2s.getAffineX()); 
    System.out.println("\ny-coordinate of point R2s is : " + R2s.getAffineY());
    System.out.println("\nx-coordinate of calculated point is : " + ScalarMultiply.doublePoint(S).getAffineX()); 
    System.out.println("\ny-coordinate of calculated point is : " +    ScalarMultiply.doublePoint(S).getAffineY());
    if(R2s.getAffineX().equals(ScalarMultiply.doublePoint(S).getAffineX()) &&
       R2s.getAffineY().equals(ScalarMultiply.doublePoint(S).getAffineY()))
        System.out.println("Doubling is correct");

    xr = new BigInteger("1faee4205a4f669d2d0a8f25e3bcec9a62a6952965bf6d31", 16);  // Specified value of x of point R for scalar Multiplication  in NIST Routine example
    yr = new BigInteger("5ff2cdfa508a2581892367087c696f179e7a4d7e8260fb06", 16);   // Specified value of y of point R for scalar Multiplication  in NIST Routine example
    ECPoint Rds = new ECPoint(xr, yr);
    BigInteger d = new BigInteger("a78a236d60baec0c5dd41b33a542463a8255391af64c74ee", 16);

    ECPoint Rs = ScalarMultiply.scalmult(S, d);

    System.out.println("\nx-coordinate of point Rds is : " + Rds.getAffineX());
    System.out.println("\ny-coordinate of point Rds is : " + Rds.getAffineY());
    System.out.println("\nx-coordinate of calculated point is : " + Rs.getAffineX());
    System.out.println("\ny-coordinate of calculated point is : " + Rs.getAffineY()); 

    if(Rds.getAffineX().equals(Rs.getAffineX()) &&
       Rds.getAffineY().equals(Rs.getAffineY()))
        System.out.println("Scalar Multiplication is correct");

}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-30T06:08:29.457

GregS 在他的评论中提到`a*(bP)`不等于`P`仅仅因为`ab = 1 mod q`在底层领域`F_q`。

实际上正确的说法是：`a*(bP)`等于`P`if `ab = 1 mod n`（`n`是组 G 的顺序）。

此外，ChaiaraHsieh 建议的代码似乎是正确的（只需更改`k = kin.mod(p)`为`k = kin.mod(n)`ScalarMultiply 代码）。

虽然我更喜欢使用 BouncyCastle。

# java - 如何从 JTextArea 中删除 Ascii 代码？

> ID：15727148
> 
> 赞同：1
> 
> 时间：2013-03-31T06:54:32.423
> 
> 标签：java, character-encoding, ascii, jtextarea

我的 java 程序从 API 获取一些天气信息。但它在文本中有奇怪的字母。看起来像 ASCII 码。

这是一个示例：最低温度：0°C（32°F）应该是：最低温度：0C（32F）（我认为）。

我怎样才能改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:00:10.523

那么一个解决方案可以是在发布之前你可以做以下

```
String withoutDegSymbol = str.replaceAll("°", ""); 
```

其中 str 包含您的温度数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:02:01.243

尝试这个

```
 String s = "0°C (32°F)".replaceAll("[\u0080-\u00FF]", ""); 
```

或者如果您的文本中有 HTML 字符引用，请使用

```
String s = "Min temp: 0&#xB0;C (32&#xB0;F)".replaceAll("&#x.+?;", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T07:23:06.523

如果在您的代码中使用 ASCII 字符编码，当您保存代码时，您的 IDE 是否询问您要以什么格式保存它。因为在 Eclipse IDE 中，如果您使用的是 ASCII 字符，它会提示您将代码保存为 UTF-8 格式。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T07:49:32.953

你需要知道：

`&#xb0;`：

*   是 'DEGREE SIGN' 的 Unicode 字符
*   编码：**HTML 实体（十六进制）**

因此，如果这是您遇到的唯一问题（我的意思是这是您使用“学位符号”的唯一字符），那么您可以手动转换它：

```
String s = "Min temp: 0&#xB0;C (32&#xB0;F)".replaceAll("&#xB0;", "°");
System.out.println(s); 
```

如果这不是您拥有的特殊字符，那么您可以使用：[StringEscapeUtils 类](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html) 或[jsoup 库](http://jsoup.org/download)将其转换为 java

# z3 - 浮点字面量

> ID：15727151
> 
> 赞同：2
> 
> 时间：2013-03-31T06:55:19.460
> 
> 标签：z3

我有两个关于编写 IEEE 浮点常量的问题，正如 Z3 的 FPA 逻辑所接受的那样：

首先，在[这个问题](https://stackoverflow.com/questions/15181211/qf-fpa-does-z3-support-ieee-754-arithmetic)中，Christoph 使用了这个例子：

```
 ((_ asFloat 11 53) roundTowardZero 0.5 0)) 
```

我想知道最后的意义`0`是什么？我试过了：

```
 ((_ asFloat 11 53) roundTowardZero 0.5)) 
```

这似乎也有效。Rummer 的[论文](http://www.philipp.ruemmer.org/publications/smt-fpa.pdf)似乎也不需要最后的 0。所以我很好奇它扮演什么角色。

其次，当我从 Z3 获取模型时，它会打印浮点文字，如下所示：

```
 (as +1.0000000000000002220446049250313080847263336181640625p1 (_ FP 11 53)) 
```

我如何解释`p1`后缀？还有哪些可能的后缀？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:48:17.547

感谢您指出这些问题。两者都是因为还没有就输入或输出中的浮点文字达成一致的标准。

示例中的 final`0`表示（二进制）指数，即`(... 0.5 1) == 1.0`。我们添加这个只是因为如果不能单独指定指数，数字有时会需要很多空间。这样，我们通常可以非常简洁地指定它们。

输出中的`p1`后缀表示二进制指数，即，其中`e8`表示`10^8`，后缀`p8`表示`2^8`。Z3 目前只使用二进制指数，所以这里总会有一个 p 后缀，但将来可能会改变。数字的其余部分有足够的十进制数字来表示精确的结果。

请注意，SMT 社区尚未就输出格式达成一致。这在未来可能会改变。例如，有关于是否应该以 IEEE 位向量格式或位于实数和非 IEEE 位向量之间的中间格式进行讨论的讨论。

# python - 如何在 Flask-SQLAlchemy 中为 db.session 连接查询分页？

> ID：15727155
> 
> 赞同：10
> 
> 时间：2013-03-31T06:55:30.120
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

说，我们有以下关系：

*   一个人可以有多个电子邮件地址
*   电子邮件服务提供商可以（显然）提供多个电子邮件地址

所以，这是多对多的关系。我有三个表：电子邮件、提供商和用户。电子邮件有两个用于提供者和用户的外国 ID。

现在，给定一个特定的人，我想打印所有电子邮件提供商及其为该人托管的电子邮件地址（如果存在）。（如果此人在 Gmail 中没有电子邮件，我仍然希望 Gmail 出现在结果中。我相信否则我只需要一个左内连接来解决这个问题。）

我想出了如何使用以下子查询来做到这一点（遵循 sqlalchemy 教程）：

```
email_subq = db.session.query(Emails).\
                filter(Emails.user_id==current_user.id).\
                subquery()

provider_and_email = db.session.query(Provider, email_subq).\
                outerjoin(email_subq, Provider.emails).\
                all() 
```

这工作正常（它返回一个 4 元组`(Provider, user_id, provider_id, email_address)`，我想要的所有信息），但我后来发现这**不是**使用 Flask`BaseQuery`类，所以`pagination`Flask-SQLAlchemy 提供的那个不起作用。显然`db.session.query()`不是 Flask-SQLAlchemy Query 实例。

我尝试这样做，`Emails.query.outerjoin[...]`但只返回电子邮件表中的列，尽管我想要提供者信息和电子邮件。

**我的问题**：我怎样才能用 Flask-SQLAlchemy 做同样的事情，这样我就不必重新实现已经存在的分页？

* * *

我想此时最简单的选择是实现我自己的分页功能，但我很想知道是否有另一种**正确的**方法来做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T21:10:43.230

我不确定这是否最终会成为长期解决方案，它并没有直接解决我对不使用 Flask-SQLAlchemy 的 BaseQuery 的担忧，但完成我想要的最简单的方法是重新实现分页功能。

而且，事实上，使用原始的 Flask-SQLAlchemy 例程很容易做到这一点：

```
def paginate(query, page, per_page=20, error_out=True):
    if error_out and page < 1:
        abort(404)
    items = query.limit(per_page).offset((page - 1) * per_page).all()
    if not items and page != 1 and error_out:
        abort(404)

    # No need to count if we're on the first page and there are fewer
    # items than we expected.
    if page == 1 and len(items) < per_page:
        total = len(items)
    else:
        total = query.order_by(None).count()

    return Pagination(query, page, per_page, total, items) 
```

`paginate`根据第376 行附近的函数修改： [https ://github.com/mitsuhiko/flask-sqlalchemy/blob/master/flask_sqlalchemy.py](https://github.com/mitsuhiko/flask-sqlalchemy/blob/master/flask_sqlalchemy.py)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-16T22:14:25.083

您的问题是如何将 Flask-SQLAlchemy 的分页与常规 SQLAlchemy 查询一起使用。

由于 Flask-SQLAlchemy 的 BaseQuery 对象没有自己的状态，并且是从 SQLAlchemy 的 Query 派生的，并且实际上只是方法的容器，因此您可以使用以下 hack：

```
from flask.ext.sqlalchemy import BaseQuery
def paginate(sa_query, page, per_page=20, error_out=True):
  sa_query.__class__ = BaseQuery
  # We can now use BaseQuery methods like .paginate on our SA query
  return sa_query.paginate(page, per_page, error_out) 
```

要使用：

```
@route(...)
def provider_and_email_view(page):
  provider_and_email = db.session.query(...) # any SQLAlchemy query
  paginated_results = paginate(provider_and_email, page)
  return render_template('...', paginated_results=paginated_results) 
```

*编辑：

请小心执行此操作。`paginate`正如其他答案中所见，这实际上只是一种避免复制/粘贴函数的方法。请注意，BaseQuery 没有`__init__`方法。看看[设置`self.__class__`其他东西有多危险？](https://stackoverflow.com/questions/13280680/how-dangerous-is-setting-self-class-to-something-else).

*编辑2：

如果 BaseQuery 有一个`__init__`，您可以使用 SA 查询对象构造一个，而不是破解`.__class__`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-01T14:04:53.187

嘿，我在这里找到了一个快速解决方法：

```
provider_and_email = Provider.query.with_entities(email_subq).\
            outerjoin(email_subq, Provider.emails).paginate(page, POST_PER_PAGE_LONG, False) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-15T11:03:05.487

我目前正在使用这种方法：

```
query = BaseQuery([Provider, email_subq], db.session()) 
```

创建我自己的`BaseQuery`. `db`是`SqlAlchemy`实例。

更新：正如[@a​​filbert 建议](https://stackoverflow.com/questions/15727155/how-to-paginate-in-flask-sqlalchemy-for-db-session-joined-queries/36009412#comment73901495_36009412)你也可以这样做：

```
query = BaseQuery(provider_and_email.subquery(), db.session()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T10:41:37.273

你如何用 SQLAlchemy 初始化你的应用程序？

可能您当前的 SQLAlchemy 连接与 flask.ext.sqalchemy 无关，而您使用原始 sqlalchemy

检查本教程并检查您的导入，它们确实来自 flask.ext.sqlalchemy

[http://pythonhosted.org/Flask-SQLAlchemy/quickstart.html#a-minimal-application](http://pythonhosted.org/Flask-SQLAlchemy/quickstart.html#a-minimal-application)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-13T14:03:52.993

您可以尝试使用结果对列表进行分页。

```
my_list = [my_list[i:i + per_page] for i in range(0, len(my_list), per_page)][page] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-31T07:23:56.910

我可能是错的，但我认为你的问题可能是 .all()。通过使用它，您将获得一个列表，而不是一个查询对象。

尝试将其关闭，并将您的查询传递给分页方法，如下所示（为了清楚起见，我省略了所有子查询细节）：

```
email_query = db.session.query(Emails).filter(**filters)
email_query.paginate(page, per_page) 
```

# javascript - 2 个输入字段的表单验证常见错误消息

> ID：15727157
> 
> 赞同：0
> 
> 时间：2013-03-31T06:56:08.517
> 
> 标签：javascript, validation

有一个表单验证器，并希望获得以下两个输入字段的常见错误消息。这可能吗：

```
<select id="category" name="category" onchange="showSelected1();" style="width:160px">
    <option value="00"><font color="#999999">Category</font></option>
    <option value="1">Marriages</option>
    <option value="2">Birthdays</option>
</select>

<select id="city" name="city" onchange="showSelected();" style="width:160px">
    <option value="000"><font color="#999999">City</font></option>
    <option value="1">New York</option>
    <option value="2">Washington</option>
</select> 
```

并使用了 gen_validatorv4.js。

```
var frmvalidator= new Validator("frm1");
frmvalidator.EnableMsgsTogether();
frmvalidator.addValidation("category","dontselect=00","Select Category");
frmvalidator.addValidation("city","dontselect=000","Select City"); 
```

想要收到“选择类别和城市”之类的错误消息。（两者只有一条错误消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:02:28.507

根据此 URL，您可以使用 gen_validatorv4.js 构建自定义验证函数： [http ://www.javascript-coder.com/html-form/javascript-form-validation.phtml](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)

所以尝试这样的事情：

```
function DoCustomValidation() {
  if (document.getElementById('category').value == "00" || document.getElementById('city').value == "000") {
      var element;

      if (document.getElementById('category').value == "00") {
         element = document.getElementById('category');
      }
      else {
         element = document.getElementById('city');
      }

      sfm_show_error_msg("Select category and city", element);

      return false;
  }
  else {
    return true;
  }
}  

frmvalidator.setAddnlValidationFunction("DoCustomValidation"); 
```

# jquery - 前置到所有文本区域行

> ID：15727164
> 
> 赞同：2
> 
> 时间：2013-03-31T06:57:06.847
> 
> 标签：jquery, html, css, textarea, prepend

我在页面中有这个小文本区域，我希望简单地将“>>”添加到每一行。

我认为这可能很简单：

```
 $("#mytextarea").prepend("EvilHacker001>>"); 
```

但这并没有做任何事情。我环顾四周，找不到与 textarea 相关的 foreach('line') 之类的东西。

是否有捷径可寻？？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:03:24.270

对于每一行：

```
$('textarea').val(function(_, value){
   var arr = value.split('\n');
   for (var i = 0; i < arr.length; i++) 
        arr[i] = "EvilHacker001>>" + arr[i];
   return arr.join('\n');     
}); 
```

[http://jsfiddle.net/DpQS4/](http://jsfiddle.net/DpQS4/)

对于每个值：

```
$('textarea').val(function(_, value){
   return "EvilHacker001>>" + value;
}); 
```

**更新**：

```
$('textarea').keyup(function (e) {
    if (e.which == 13) {
        $(this).val(function (i, value) {
            return value + '>>';
        })
    }
}); 
```

[http://jsfiddle.net/hBcHS/](http://jsfiddle.net/hBcHS/)

或者：

```
$('textarea').keyup(function (e) {
    $(this).val(function (i, value) {
        return value.replace(/\n(?!>)/g, '\n>>');
    })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:04:49.690

prepend() 将指定的标记添加到 jQuery 选择器返回的对象（在本例中为 textarea）。textarea 只能包含文本，不能包含其他子元素；因此，您正在尝试创建无效的 html。

如果您想在文本区域中添加新文本：

```
$('#mytextarea').val(
    function(i,val){
        return 'EvilHacker001>> ' + val;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:17:33.330

你可以试试这个：

```
 $('#myTextarea').val(function(i, value){
   return value.split('\n').join('\nEvilHacker001>>');     
 }); 
```

您必须获取换行符`\n`，然后拆分并加入`\nEvilHacker001>>`.

### [在这里玩小提琴](http://jsfiddle.net/L6V7E/)

# python - Tkinter 文本不显示

> ID：15727165
> 
> 赞同：1
> 
> 时间：2013-03-31T06:57:20.207
> 
> 标签：python, python-2.7, timer, tkinter

如果这是我在这么短的时间内第二次发帖，我很抱歉，但我不明白发生了什么。

到目前为止，这是我的代码：

```
def countdown(self, remaining = None):
        hours = int(self.hour.get())
        minutes = int(self.minutes.get())
        seconds = int(self.seconds.get())

        if seconds == 0:
            if minutes != 0:
                seconds += 59
                minutes -= 1
            elif minutes == 0:
                if hours != 0:
                    minutes += 59
                    seconds += 59
                    hours -= 1
                else:
                    self.timerLab.configure(text="Times Up!")   

        else:
            self.timerLab.configure(text="Time Remaining: %d:%d:%d " % (hours,minutes,seconds))
            seconds -= 1
            self.after(1000, self.countdown) 
```

所以这是我到目前为止的倒数计时器，我不明白为什么秒数没有更新。就我的逻辑而言，如果 seconds -= 1 那么它应该需要 1 并且随着它继续循环它应该更新。我是对的，还是我只是完全愚蠢而错过了显而易见的事情？

如果需要更多代码，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:02:13.400

在函数结束时调用`seconds -= 1`不会做任何事情，因为您在下一次调用倒数计时器中的值时将其重置。所以你基本上每次都将倒数计时器设置为完全相同的东西。将那条线移到上面 `self.timerLab.configure(text="Time Remaining: %d:%d:%d " % (hours,minutes,seconds))`

看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:19:58.677

这里有一些问题：

*   始终使用相同的秒值：您将其递减，但下次您从小`Entry`部件获得相同的值。
*   `after`仅在`else`块中调用，因此当`seconds == 0`它不会再次执行该方法时。
*   参数`remaining`始终为 None，因为您使用对函数的引用而不传递参数。

对于最后一个问题，快速解决方法是将最后一条语句更改为`self.after(1000, lambda: self.countdown(remaining))`，但还有一个更好的解决方案：

*   计算剩余总秒数，并将此数字存储为变量。
*   调用一个单独的方法`after`，并在那里减少用于表示剩余秒数的变量。
*   用于[`divmod()`](http://docs.python.org/2/library/functions.html#divmod)轻松地将秒数转换为格式`"h:m:s"`。

最终结果可能如下所示：

```
def start_countdown(self):
    hours = int(self.hour.get())
    minutes = int(self.minutes.get())
    seconds = int(self.seconds.get())
    self.remaining = hours * 3600 + minutes * 60 + seconds
    self.countdown()
def countdown(self):
    if self.remaining == 0:
        self.timerLab.configure(text="Times Up!")
    else:
        m, s = divmod(self.remaining, 60)
        h, m = divmod(m, 60)
        self.timerLab.configure(text="Time Remaining: %d:%d:%d " % (h, m, s))
        self.remaining -= 1
        self.master.after(1000, self.countdown) 
```

# jquery - 滑块在 IE 上不起作用

> ID：15727174
> 
> 赞同：0
> 
> 时间：2013-03-31T06:58:49.797
> 
> 标签：jquery, internet-explorer

我正在使用滑块，它在 Firefox 上运行良好，但在 IE 上无法运行，

我正在使用的 jQuery 代码是

```
$(function() {
    $('#foo0').carouFredSel(
    {
        auto: {
            duration:1500,      
        }
    }, 
    {
        transition: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:29:39.217

在内部对象文字的最后一个键/值对之后有一个额外的逗号：

```
auto: {
    duration:1500,  // <-- There.
} 
```

你应该删除它。已知这会导致 Internet Explorer 8 和更早版本中的语法错误。

# r - 如何在 R 中的绘图标题中使用两个变量？

> ID：15727175
> 
> 赞同：4
> 
> 时间：2013-03-31T06:59:03.870
> 
> 标签：r, graphics, plot, latex, latex-environment

如何在 R 的 Latex 表达式中使用变量？

例如：

`a<-5; b<-1; plot(X, Y, main=expression(paste(p==a,q==b)))`

`a`是`b`R 变量。我也想在输出中有“，”？我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T08:01:52.327

您可以使用表达式代替表达式`bquote()`来获得所需的效果。`.(a)`确保它被实际`a`值替换，`*","`在表达式中添加逗号。

```
a<-5
b<-1 
plot(1:10, main=bquote(p==.(a) *"," ~q==.(b))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/wO98v.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T09:06:40.593

您可以使用`substitute`而不是`expression`. 第二个参数是一个指定替换字符串和对象的列表。

```
a <- 5
b <- 1
plot(1, 1, main = substitute(paste(p == a, ", ", q == b), list(a = a, b = b))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/ZV5LO.png)

# php - 表单提交后如何取回文本框值

> ID：15727178
> 
> 赞同：0
> 
> 时间：2013-03-31T06:59:45.217
> 
> 标签：php, javascript, jquery, html

我想在表单提交后取回或回发文本框值，因为用户必须查看他或她在文本框中输入的值？

```
function getComboA(sel) { 
var cname=document.getElementById("cname");
var input_val = document.getElementById("cname").value;
name.action = "searchreceivable.php?cname="+input_val+"";
name.submit();
}

<form name="name" id="name"><input class="input_field" type="text"
name="cname" id="cname" onchange="getComboA();"></form> 
```

现在问题已解决这是我的最终代码，因此一旦提交表单，它将保留文本框值

```
function getComboA(sel) { 
var cname=document.getElementById("cname");
var input_val = document.getElementById("cname").value;
name.action = "searchreceivable.php?cname="+input_val+"";
name.submit();
}

<form name="name" id="name"><input class="input_field" type="text"
name="cname" id="cname" onchange="getComboA();" 
value="<?php echo $txtVal=$_GET['cname']; ?>"></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:03:36.087

```
function getComboA(sel) { 
var cname=document.getElementById("cname");
var input_val = document.getElementById("cname").value;
form.action = "searchreceivable.php?cname="+input_val;
form.submit();
} 
```

代码将在 searchreceivable.php 上完成-

```
<?php
$txtVal=$_GET['cname'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:07:15.113

你真的需要它通过javascript存储吗？也许您可以执行以下操作：

```
<input class="input_field" type="text"
name="cname" id="cname" onchange="getComboA();" value="<?php echo $_GET['name']; ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:13:38.830

既然您将此问题标记为 jQuery 并且您想将数据发送到服务器 onchange，那么我建议

```
$(function() {
  $("#cname").on("change",function() {
    $.get("searchreceivable.php?cname="+$(this).val(),function(data) {
      $("#result").html(data);
    });
  });
}); 
```

使用

```
<form>
  <input id="cname" class="input_field" type="text" value=""/>
</form>
<div id="result"></div> 
```

# python - 请帮我处理 python 循环/if 语句

> ID：15727184
> 
> 赞同：-2
> 
> 时间：2013-03-31T07:00:26.353
> 
> 标签：python, loops, if-statement, variable-assignment

*** > 反复循环，提示用户选择一个选项，然后运行

> 适当的命令并重复，直到用户选择退出。选项有： 0 退出程序；1 计算特定值集合的流速；2 计算雷诺数，3 绘制预期流量。如果用户选择任何其他选项，程序必须不断要求他们选择一个有效值，直到他们这样做。***

而我<=3：

```
i=input (" Please enter a number between 0-3:")

if i==0:
    print " program will exit."
    break

elif i==1:
     print ( " To calculate flow rate please input these values:" )
     pressure = input (" Please enter pressure drop in pascals: " )
     radius = input  (" Please enter radius in m: " )
     viscosity = input  (" Please enter viscosity of liquid in Pa.s: ")
     Length= input  (" Please enter length in m: " )
     Flowrate = (pressure * pi *(radius**4))/ ( 8 * viscosity * Length)
     print " Therefore, flow rate is " , Flowrate
     print " Program will run again for user to calculate flow rate..."

elif i==2:
    print ( " To calculate reynolds number please input these values:" )
    q=input ("Please enter a value for flow rate in m^3/s")
    radius = input  (" Please enter radius in m: " )
    density=input   (" Please enter density in kg/m^3 : " )
    viscosity = input  (" Please enter viscosity of liquid in Pa.s: ")
    Rno=(2*q*radius*density)/(viscosity*pi*radius*radius)
elif i==3:
    print " not implemented yet."
else:
    print " Program will start again!"                          

    ***new edited post*** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:02:50.343

我可以发现的一个错误是：

```
Rno=(2*q*radius*density)/(viscosity*pi*radius*radius 
```

您的代码缺少右括号。

另一个（逻辑）错误是`input()`调用应该在循环内，而不是在循环外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:06:07.747

我通常会让人们布置这类程序，比如

```
while(True):
    i = input("<Prompt>")

    if(i==1):
        # Do something

    elif(i==2):
        # Do something else

    #... any additional elifs

    else: 
        break 
```

或者像这样

```
while(True):
    i = input("<Prompt>")

    if(i==1):
        # Do something

    elif(i==2):
        # Do something else

    #... any additional elifs

    elif(i==10):        # Assuming 10 here is the "exit" option
        break

    else: 
        print("Unknown selection, please try again") 
```

第二个版本要求用户明确选择“退出”选项，而第一个版本将在选择未知/未定义选项时简单地退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:05:34.197

你说过你的程序应该在用户进入后退出`0`，所以我会改变这个：

```
if i==0 :
    print " program will exit."
    i=4 
```

对此：

```
if i==0 :
    print " program will exit."
    break 
```

而且，你不需要在第二个中赋值`0`，因为在这个块中已经等于，所以你可以安全地删除这行代码。`i``if``i``0`

# vb.net - 如何在不出现 IO 异常的情况下输出到文本文件？

> ID：15727187
> 
> 赞同：1
> 
> 时间：2013-03-31T07:00:53.970
> 
> 标签：vb.net

我有这个代码。

```
Dim txtVern As String = String.Empty
    Try
        Using verSR As New StreamReader(appDataVersionLoc)
            txtVern = verSR.ReadToEnd()
        End Using
    Catch ex As Exception
        Dim verFile As System.IO.FileStream
        verFile = System.IO.File.Create(appDataVersionLoc)
        Dim wWFERes As DialogResult = MessageBox.Show("Version file missing/corrupt, created a new one.")
        If My.Computer.FileSystem.FileExists(appDataVersionLoc) Then
            My.Computer.FileSystem.WriteAllText(appDataVersionLoc, "0.0.0.0", True)
        End If
    End Try 
```

但是当它试图执行时`My.Computer.FileSystem.WriteAllText(appDataVersionLoc, "0.0.0.0", True)`，我得到了这个错误：

> 该进程无法访问文件“C:\Users\Dubstaphone\AppData\Roaming\TheArena\version.txt”，因为它正被另一个进程使用。

我该如何避免这种情况？我所做的是让它创建一个名为“version.txt”的文本文件，如果它不存在的话。现在我试图给它写“0.0.0.0”，但它给了我这个错误。顺便说一句，“appDataVersionLoc”等于`GetFolderPath(SpecialFolder.ApplicationData) & "\TheArena\version.txt"` 这个变量适用于其他一切。

谢谢！

附言

我是个十足的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:24:12.613

`System.IO.File.Create`或者`My.Computer.FileSystem.WriteAllText`可能仍然锁定文件。使用`System.IO.File` `WriteAllText`and`Using`语句。

如果你使用 Stream 你应该关闭/处理它。更好的是，在处理文件时始终使用`Using`语句。

编辑：

创建文件示例

```
Using File.Create(path)
End Using
If File.Exists(appDataVersionLoc) Then
    File.WriteAllText(appDataVersionLoc, "0.0.0.0")
End If 
```

或者

```
Dim appDataFile = File.Create(path)
appDataFile.Close 
```

# .net - 运行脚本切换后显示在 div 悬停时停止工作

> ID：15727191
> 
> 赞同：0
> 
> 时间：2013-03-31T07:01:09.090
> 
> 标签：.net, css, asp-classic

我试图让一个 div`lolcake`出现在另一个`panel_toggle1`div 中：

*   当鼠标悬停在另一个 div 上时`panel_toggle1`

*   或在每次点击时打开和关闭`panel_toggle1`点击

[http://jsfiddle.net/Fa7Ct/](http://jsfiddle.net/Fa7Ct/)

悬停工作正常，但是当我单击`panel_toggle1`并返回时，**悬停停止工作**。这是为什么？

[EDITED] 脚本（注意：从该脚本中删除了一些代码以使其更易于阅读 - 是的，问题仍然存在）：

```
$(document).ready(function () {
    var toggle_height1 = false;
    $("#panel_toggle1").click(function () {

        toggle_height1 = !toggle_height1;

        if (toggle_height1 == true) {
            $('.lolcake').css("display", "block");
        } else {
            $('.lolcake').css("display", "none");
        }
    });
}); 
```

工作CSS：

```
.lolcake
{
    display: none;
}

#panel_toggle1:hover .lolcake
{
    display: block;
} 
```

（如果需要）aspx

```
<!-- GAME1 PANEL TOGGLE -->
    <div id="panel_toggle1">
        <div class="lolcake" style="position:absolute">text</div><img src="images/image.png" alt=""/>
    </div> 
```

我使用过其他功能，例如`toggle()`and `show()` `hide()`，但都具有相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:34:21.120

将此添加到您的CSS

```
#panel_toggle1:hover .lolcake
{
display: block !important;
} 
```

# python - 线程仅适用于 gui 事件 pygtk

> ID：15727193
> 
> 赞同：0
> 
> 时间：2013-03-31T07:01:42.063
> 
> 标签：python, multithreading, pygtk

我正在 pygtk 中开发一个多线程应用程序，使用快速并卡在线程中。所以我正在尝试各种可能性，发现我的线程只有在我在 gui 中执行某些操作时才有效这是我的代码

```
t = threading.Thread(target=self.calc,args=(treeiter))
t.daemon = True
t.start()

    def calc(self,treeiter):
        store=self.builder.get_object('liststore1')
        per=0
        while 1:
            print "Calcing and changing percent,per="+str(per)
            store.set_value(treeiter,4,str(int(per))+"%")
            per+=1
            time.sleep(1) 
```

我正在尝试`liststore`按线程更新值，但只有当我单击某个按钮或其他一些 gui 事件时它才会更新，为什么会这样？为什么线程不在后台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:00:43.100

GTK+ 是线程感知的，但不是*线程安全*的。

如果您想在除主线程（调用 的线程`gtk.main()`）之外的其他线程中使用 GTK+，请确保将任何 GTK+ 调用放在 a[`gtk.gdk.threads_enter()`](http://www.pygtk.org/docs/pygtk/gdk-functions.html#function-gdk--threads-enter)和[`gtk.gdk.threads_leave()`](http://www.pygtk.org/docs/pygtk/gdk-functions.html#function-gdk--threads-leave). 这将获取和释放全局互斥锁。

别忘了打电话[`gtk.gdk.thread_init()`](http://www.pygtk.org/docs/pygtk/gdk-functions.html#function-gdk--threads-init)。最好是在导入 GTK 之后。

您可以通过谷歌搜索“pygtk 多线程”找到更多[类似](http://aruiz.typepad.com/siliconisland/2006/04/threads_on_pygt.html)的示例。

# css - CSS3：如果图像悬停，则更改页面背景图像

> ID：15727200
> 
> 赞同：0
> 
> 时间：2013-03-31T07:02:20.050
> 
> 标签：css, background-image, css-transitions

我正在尝试根据悬停的图像更改页面的背景图像。

这是页面的布局： ![在此处输入图像描述](https://i.stack.imgur.com/pgzae.png)

HTML：

```
<div id="main">
    <img id="img1" src="1.jpg" />
    <img id="img2" src="2.jpg" />
</div> 
```

CSS：

```
#img1:hover #main
{
    background: url('images/1.jpg'); /* not working */
}

#img2:hover #main
{
    background: url('images/2.jpg'); /* not working */
} 
```

'#main' 是我为标签设置的 ID。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:12:06.493

您不能在 CSS 选择器中向后遍历。也就是说，您不能根据孩子/后代的状态将样式应用于祖先/父母。

不幸的是，您将需要使用 JavaScript。您可以使用类并在 CSS 中定义样式以使其不那么蹩脚。像这样的东西：

[jsFiddle](http://jsfiddle.net/Tyriar/sveN8/)

**HTML**

```
<div id="main">
    <div id="img1"></div>
    <div id="img2"></div>
</div> 
```

**CSS**

```
#main.img1 {
    background: url('https://www.google.com.au/images/srpr/logo4w.png');
}
#main.img2 {
    background: url('https://www.google.com.au/images/srpr/logo4w.png');
}
#img1,
#img2 {
    width:100px;
    height:100px;
    background-color:#F00;
    margin:10px;
} 
```

**JavaScript**

```
var main = document.getElementById('main'),
    img1 = document.getElementById('img1'),
    img2 = document.getElementById('img2');

img1.onmouseover = function () {
    main.className = 'img1';
};
img2.onmouseover = function () {
    main.className = 'img2';
};
img1.onmouseout = function () {
    main.className = '';
};
img2.onmouseout = function () {
    main.className = '';
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:14:42.850

如果您需要更改#main div 的背景图像，您应该使用 CSS 和 jQuery：

[http://jsfiddle.net/Soldier/cyAXv/1/](http://jsfiddle.net/Soldier/cyAXv/1/)

**HTML**

```
<body>
<div id="main">
    <h1>Hi!</h1>
    <img id="img1" src="img1"/>
    <img id="img2" src="img2"/>
</div>
</body> 
```

**JS**

```
$('#img1').hover(function() {
    $('#main').css("background","url('background1')");
})

$('#img2').hover(function() {
    $('#main').css("background","url('background2')");
}) 
```

# iphone - iPhone 应用程序上的 LongPress 会打开 3 个警报？AlertView 或手势代码问题

> ID：15727203
> 
> 赞同：0
> 
> 时间：2013-03-31T07:02:37.790
> 
> 标签：iphone, ios, uigesturerecognizer, uialertview

在我的 iPhone 应用程序中，我设置了长按以显示警报框，当我在测试中长按时，它会打开警报，但我必须在它消失之前单击“确定”3 次。几乎就像它打开了 3 个长按警报窗口，而不仅仅是一个。

我究竟做错了什么？这是我用来处理长按的代码：

```
- (void)didLongPress_imageButton3:(UILongPressGestureRecognizer *)recognizer {
  UIAlertView *alertView = [[UIAlertView alloc] init];
  alertView.title = @"The Info";
  alertView.message = @"Details of what is in the project.";
  [alertView addButtonWithTitle:@"OK"];
  [alertView show];
  [alertView release];
} 
```

# ios - 编码来自 AudioUnit 的录音以通过 iO 中的 NSOutputStream 发送

> ID：15727205
> 
> 赞同：1
> 
> 时间：2013-03-31T07:02:54.520
> 
> 标签：ios, objective-c, sockets, audio, audiounit

我正在尝试通过 NSSocket 从我的 iPhone 中的麦克风实时流式传输一些录音。

我有录音和播放的回调。我正在尝试使用以下代码直接从缓冲区中读取：

```
SInt16 *intFromBuffer;
intFromBuffer = audioBufferList->mBuffers[0].mData; 
```

当我尝试时：

```
NSLog(@"0x%X", intFromBuffer); 
```

例如，我得到：**0xA182E00**

现在是重要的部分 - 播放回调：

```
static OSStatus playbackCallback(void *inRefCon,
                             AudioUnitRenderActionFlags *ioActionFlags,
                             const AudioTimeStamp *inTimeStamp,
                             UInt32 inBusNumber,
                             UInt32 inNumberFrames,
                             AudioBufferList *ioData) {

/**
 This is the reference to the object who owns the callback.
 */
AudioProcessor *audioProcessor = (__bridge AudioProcessor*) inRefCon;

// iterate over incoming stream an copy to output stream
for (int i=0; i < ioData->mNumberBuffers; i++) {
    AudioBuffer buffer = ioData->mBuffers[i];

    // find minimum size
    UInt32 size = min(buffer.mDataByteSize, [audioProcessor audioBuffer].mDataByteSize);  

    intFromBuffer = (SInt16)([NSString stringWithFormat:@"0x%@", data.output]);

    memcpy(buffer.mData, intFromBuffer, size); //this works fine!
}
return noErr;
} 
```

但是现在 - 我如何让这个 intFromBuffer 在 NSStream 上工作？

当我尝试直接将其作为 NSString 发送并将其作为 NSString 发送回并将其解析回 SInt16 时，我得到的只是噪音。

有任何想法吗？我的想法不多了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:05:33.787

好的，伙计们，我想通了。

问题与字符串编码有关。我的服务器正在发送 UTF8 编码的文本，但我的代码试图用 ASCII 解释它，这导致了问题。

我在代码中发现的另一个问题也是错误的数据类型。我将它作为 NSMutableData 发送，但是当我收到它时，我以错误的方式将数据转换回 NSMutableData，因此我的 AudioProcessor 无法访问编译器认为是 NSString 对象的实际数据，并且它一直在抛出异常从字节创建帧：

```
SInt16 *frames = (SInt16 *)[data.input bytes]; 
```

我的代码遇到的最后一个问题实际上是非常有损的传输，所以当数据从服务器返回时质量很差，但我相信这是与缓冲区大小相关的问题。我想我很快就会弄清楚的。

非常感谢 StackOverflow 社区。我是新来的，但我看到你是一个很大的帮助，即使是简单的评论也有助于朝着正确的方向前进。

再次感谢。

# java - 如何读取文本文件并使用 JoptionPane 显示它？

> ID：15727210
> 
> 赞同：0
> 
> 时间：2013-03-31T07:03:30.687
> 
> 标签：java, swing, ioexception, java-io

我正在尝试接收用户输入并将其存储在文本文件中，我能够接收输入并将其存储但现在我试图在`JOptionPane`窗口中显示该输入。有人可以帮帮我吗。我是 stackflow 的新手，这是我的第一篇文章。

```
/*Here i am taking in user input and storing it in a file called "dictionary.txt".*/
public static String addNewWord()throws IOException
{
    String newWord = "";

    newWord = JOptionPane.showInputDialog(null, "Enter the word you want to add to your dictionary.");

    FileWriter aDictionary = new FileWriter("dictionary.txt", true);
    PrintWriter out = new PrintWriter(aDictionary);
    out.println(newWord);
    out.close();
    aDictionary.close();

    return newWord;
}
/* Now i am trying to read "dictionary.txt" and display it using JOptionPane*/
public static String listDictionary()throws IOException
{
   FileReader aDictionary = new FileReader("dictionary.txt");
   String aLineFromFile = FileReader;
   JOptionPane.showMessageDialog(null, aLineFromFile);
   aDictionary.close();

   return aLineFromFile;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:07:28.073

您应该使用 a`BufferedReader`从文件中读回数据：

```
public static void listDictionary()throws IOException
{
    BufferedReader br = new BufferedReader(new FileReader("dictionary.txt"));
    String aLineFromFile = null;
    while ((aLineFromFile = br.readLine()) != null){
            JOptionPane.showMessageDialog(null, aLineFromFile);
    }        
    br.close();
    return;
} 
```

# gcc - 在 gcc 中链接到 so 库

> ID：15727211
> 
> 赞同：9
> 
> 时间：2013-03-31T07:03:30.987
> 
> 标签：gcc, linker, shared-libraries

我首先要说我是 gcc 和 makefile 的新手。我在桌面（~/Desktop）上有一个名为 .so 的文件`lib.so`。我想将我的程序（称为 myProgram）链接到它。我在makefile中写的是：

```
g++ myProgram.o -L ~/Desktop -l lib -o myProgram 
```

当我运行时`make`出现错误：

```
/usr/bin/ld: cannot find -llib 
```

我也试过`-l lib.so`并得到同样的错误。什么是正确的链接方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T07:50:08.397

两种解决方案：

1.  将文件重命名为`libsomething.so`，然后使用`-l something`. `lib`链接器自动用前缀和`.so`后缀（或`.a`静态库的后缀）包装名称。

2.  使用选项`-l :lib.so`。当您为名称添加前缀时`:`，链接器将使用给定的名称。

这些在`ld`手册页中进行了解释。

# c - 莫名其妙的计算错误

> ID：15727217
> 
> 赞同：0
> 
> 时间：2013-03-31T07:03:50.150
> 
> 标签：c, structure

我正在编写一个程序，该程序从单独的信号和背景文件中读取波长和强度数据（因此每个文件都由多对波长和强度组成）。如您所见，我通过创建一个结构，然后在循环中使用 fscanf 将值分配给结构中的适当元素来做到这一点。一旦数据被读入，程序应该将其绘制在每个文件中记录的波长重叠的间隔上，即常见的波长范围。波长在存在这种重叠的地方完美对齐，并且已知以恒定的差异间隔开。因此，我辨别结构阵列的哪些元素适用的方法是确定两个文件中哪个最小波长更高，哪个最大波长更低。然后，对于具有较低最小值和较高最大值的文件，我会找到这与较高最小值/较低最大值之间的差异，然后将其除以恒定步长以确定要偏移多少元素。这是可行的，除非数学完成后，程序会返回一个完全无法解释的错误答案。

在下面的代码中，我通过计算一个元素的波长与其前一个元素的波长之间的差异，将恒定步长定义为 lambdastep。使用我的样本数据，它是 0.002，这是由 printf 确认的。但是，当我运行程序并除以 lambdastep 时，我得到了一个不正确的答案。当我运行除以 .002 的程序时，我得到了正确的答案。为什么会出现这种情况？我想不出任何解释。

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
#include "plots.h"

struct spectrum{
    double lambda;
    double intensity;
};

main(){
double a=0,b=0,c=0,d=0,lambdastep,smin,smax,bmin,bmax,tmin,tmax,sintmin,bintmin,tintmin,sintmax,bintmax,tintmax,ymin,ymax;
int ns,nb,nt,i=0,sminel,smaxel,bminel,bmaxel,tminel,tmaxel;
double min(struct spectrum *a,int,int);
double max(struct spectrum *a,int,int);
FILE *Input;                                
Input = fopen("sig.dat","r");
FILE *InputII;                              
InputII = fopen("bck.dat","r");
fscanf(Input,"%d",&ns);
fscanf(InputII,"%d",&nb);
struct spectrum signal[ns];
struct spectrum background[nb];
struct spectrum *s = &signal[0];
struct spectrum *ba = &background[0];
s = malloc(ns*sizeof(struct spectrum));
ba = malloc(nb*sizeof(struct spectrum));
while( fscanf(Input,"%lf%lf",&a,&b) != EOF){
    signal[i].lambda = a;
    signal[i].intensity = b;
    i++;
}
i = 0;
while( fscanf(InputII,"%lf%lf",&c,&d) != EOF){
    background[i].lambda = c;
    background[i].intensity = d;
    i++;
}
for (i=0; i < ns ;i++){
    printf("%.7lf %.7lf\n", signal[i].lambda,signal[i].intensity);
}
printf("\n");
for (i=0; i < nb ;i++){
    printf("%.7lf %.7lf\n", background[i].lambda,background[i].intensity);
}
lambdastep = signal[1].lambda - signal[0].lambda;           //this is where I define lambdastep as the interval between two measurements
smin = signal[0].lambda;
smax = signal[ns-1].lambda;
bmin = background[0].lambda;
bmax = background[nb-1].lambda;
if (smin > bmin)
    tmin = smin;
else
    tmin = bmin;
if (smax > bmax)
    tmax = bmax;
else
    tmax = smax;
printf("%lf %lf %lf %lf %lf %lf %lf\n",lambdastep,smin,smax,bmin,bmax,tmin,tmax);   //here is where I confirm that it is .002, which is the expected value
sminel = (tmin-smin)/(lambdastep);  //sminel should be 27, but it returns 26 when lamdastep is used. it works right when .002 is directly entered , but not with lambdastep, even though i already confirmed they are exactly the same. why? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:08:20.277

`sminel`是一个整数，因此`(tmin-smin)/lambdastep`在计算结束时将转换为整数。

一个非常微小`lambdastep`的差异可能是获得例如 27.00001 和 26.99999 之间的差异；后者在转换为`int`.

尝试使用`floor`,`ceil`或`round`来更好地控制返回值的舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:07:00.020

它几乎肯定与浮点计算固有的不精确性有关。尝试打印出`lambdastep`许多有效数字——我打赌你会发现它的确切值比你想象的要大一些。

> 使用我的样本数据，它是`.002`，由 确认`printf`。

尝试打印出来`(lambdastep == .002)`。

# php - 使用 PHP 缓存网页（供离线查看）

> ID：15727218
> 
> 赞同：1
> 
> 时间：2013-03-31T07:04:17.023
> 
> 标签：php, caching

我正在做一个个人项目来离线查看网页。我想出的第一个想法是使用`file_get_contents`获取特定 url 的内容，但这只会获取 html 而不是该页面中的资产（css、图像、javascript 等）。所以我不得不编写正则表达式来获取页面中的样式表和图像：

```
$css_pattern = '/\S*\.css"/';
$img_src_pattern = '/src=(?:"|\')?.+\.(?:gif|jpg|png|jpeg)(?:"|\')/';
preg_match_all($css_pattern, $contents, $style_matches);
preg_match_all($img_src_pattern, $contents, $img_matches); 
```

这可行，但css中也有图像链接。我还在思考如何处理这些问题。

还有一些项目，如`ganon` [https://code.google.com/p/ganon/](https://code.google.com/p/ganon/)和简单的 html 解析器，它们可能会让我的生活更轻松，但我更喜欢使用正则表达式，因为我想了解更多相关信息。

问题是：有没有更好的方法来做这个项目？该应用程序可能会有用于保存每个站点的资产和 html 的文件夹，它可能会变得笨拙。我听说过 html5 中的清单文件之类的东西，但如果您不拥有该网站，我不确定这是否可能。有任何想法吗？如果没有其他方法可以做到这一点，那么也许你可以帮助我改进我上面的正则表达式。我基本上必须使用`str_replace`并`foreach`获取样式表：

```
$stylesheets = array();
foreach($style_matches[0] as $match){
    $stylesheets[] = str_replace(array('href=', '"', "'"), '', $match);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:40:53.400

> 我更喜欢使用正则表达式，因为我想了解更多有关它的信息。

使用正则表达式解析 HTML 是可能的，尽管并非易事。在下面的论文中给出了一个很好的介绍：

*   [REX：使用正则表达式进行 XML 浅层解析](http://www.cs.sfu.ca/~cameron/REX.html)

该论文中使用的正则表达式（REX）不是PHP（PCRE）中使用的，但是如果您愿意学习，应该能够理解它，它是相似的。

按照那篇论文的概述并用一些不错的测试用例自己用 PHP 编写正则表达式应该是你深入研究正则表达式的真正训练营。

在正则表达式旁边，您还需要处理字符编码，这是它自己的另一个字段，然后采用解析器进行编码（如果您在解析之前不重新编码）。

如果您正在专门寻找兼容 HTML 5 的解析器，它被指定为 HTML 5“规范”的一部分，但是您不能再以理智的方式使用正则表达式精确地做到这一点（至少据我所知）关于它）：

*   [12.2 解析 HTML 文档——HTML 生活标准——大约更新。日常](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html)
*   [8.2 解析 HTML 文档——HTML5——HTML 和 XHTML W3C 候选推荐的词汇表和相关 API 2012 年 12 月 17 日](http://www.w3.org/TR/html5/syntax.html#parsing)

对我来说，这种类型的解析看起来开销很大，但是看看 HTML 5 Parser 的概要，你就会知道现在你*可以*为 HTML 解析处理什么。看起来那些男孩和女孩真的需要把他们能想象到的任何东西都塞进去。实际上，以下引擎/浏览器具有 HTML 5 解析器：

*   [壁虎 2](https://developer.mozilla.org/en-US/docs/HTML/HTML5/HTML5_Parser)
*   [网络套件](https://www.webkit.org/blog/1273/the-html5-parsing-algorithm/)
*   [Chrome 7](http://chrome.blogspot.de/2010/10/bringing-another-chrome-release-to-you.html)（网络套件）
*   [歌剧 11.60](http://my.opera.com/ODIN/blog/2011/12/06/hello-opera-11-60)（诸神黄昏）
*   [IE10](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx)

从 PHP 生态系统的个人经验来看，没有那么多基于 SGML/“松散”/低级/标签汤的 HTML 解析器。如果我写一个，我也会使用正则表达式进行字符串解析，REX 浅解析文章有一些很好的讨论。但是，我可能只会使用这种低级 HTML 解析器来使任何 HTML 可用于 DOMDocument 或其他一些验证/修复相关的东西，并且不会将其用于进一步的解析/文档抽象。DOMDocument 非常强大，尤其是在收集您上面描述的链接方面。

对于剩下的问题，您会发现各种 HTTP 相关 RFC 中概述的所有需要​​组合在一起的元素，因此您需要自行决定要支持哪种链接解析算法以及如何重新映射静态 CSS/ image/js 文件，如果您再次保存它们。然后，您通常还会重新编写 DOMDocument 非常方便的 HTML。

此外，您应该通过 meta 元素在 HTML 文件中存储一些 HTTP 标头。特别是对于编码，除非您不重新编码（无论如何这对于离线阅读都很有用）。HTML 创作的一些更一般的问答建议也适用于静态缓存。

[html5 清单文件](http://diveintohtml5.info/offline.html)实际上是不同的。原始服务器应该支持它。情况可能并非如此（或者您还需要构建它的解析器并对其进行处理）。因此，如果您创建一个镜像，您可能还需要指出可以在本地存储以供离线使用的所有静态资源。这是一个好主意，我还没有看到像 wget 这样的工具实现了这一点，所以可能值得尝试一下这个想法。

除了*HTML5 清单文件*，您可能还与以下容器格式之一相关：

*   [Mozilla 存档格式 - MAFF](http://en.wikipedia.org/wiki/Mozilla_Archive_Format)
*   [MIME HTML - MHTML](http://en.wikipedia.org/wiki/MHTML)
*   [网络档案](http://en.wikipedia.org/wiki/Webarchive)

这些格式/扩展中的另一种（此处：SingleFile Chrome 扩展）根据维基百科使用 [Data URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)，这在这种情况下也可能有用，尽管我不喜欢它，我会说最好有一个算法它能够以可复制的方式将 URL 重写到本地文件系统，这样您就可以转储具有相同资产的多个 HTML 文件，而无需多次获取资产。

# angularjs - 如何检测用户何时使用 AngularJS 更改选择下拉列表中的值？

> ID：15727219
> 
> 赞同：1
> 
> 时间：2013-03-31T07:04:17.373
> 
> 标签：angularjs

我有以下内容：

```
<select data-ng-model="selectedTestAccount" data-ng-options="item.Id as item.Name for item in testAccounts">
   <option value="">Select Account</option>
</select> 
```

有人向我建议，我可以观察这个选择的值是否会随着以下内容发生变化：

```
$scope.$watch('testAccounts', function(){
  /* get updated values and update other select "model" on success*/
  alert("hello");
}); 
```

但这似乎不起作用。一方面，它会在选择出现在屏幕上并且在用户选择任何内容之前立即发出警报。我说我应该注意 selectedTestAccount 的变化是否正确？最后还有一个问题。如何在警报框中显示 selectedTestAccount 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:25:04.073

如前所述，您可以将其作为第一个参数，无需从范围中获取。利用

```
$scope.$watch('selectedTestAccount', function(newValue){
  alert(newValue);
}); 
```

请注意，您总是将 a`undefined`作为 a 的第一个更改`$watch`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-28T12:33:32.870

在您的选择中添加“ng-change”怎么样？

在您的示例中，它将是这样的：

```
<select data-ng-model="selectedTestAccount" ng-change="updateSelectedAccount(selectedTestAccount)" data-ng-options="item.Id as item.Name for item in testAccounts"></select> 
```

然后在你的控制器中

```
$scope.updateSelectedAccount = function (selectedTestAccount) {
        console.log(selectedTestAccount);
    } 
```

PS对不起，刚刚注意到这个问题有多老了:)希望这可能对将来的人有所帮助。

# mysql - 不要将命令添加到 MySQL CLI 历史记录

> ID：15727220
> 
> 赞同：1
> 
> 时间：2013-03-31T07:04:18.877
> 
> 标签：mysql, command-line-interface

可以通过在命令前加一个空格来指示 Bash 不要将命令添加到 CLI 历史记录中。如何指示 MySQL CLI 解释器不向历史记录添加命令？在命令前加上空格不会产生预期的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:14:26.083

`-q`您可以使用跳过使用历史文件的选项运行 mysql 。

# xml - 从 java 序列化时，XML 文档错误中只允许有一个顶级元素

> ID：15727222
> 
> 赞同：1
> 
> 时间：2013-03-31T07:05:07.247
> 
> 标签：xml, serialization

当我通过将第一个节点、剩余节点和边存储在 xml 文件中来将图形从 java 序列化为 xml 时，它会被存储。但是当我打开 xml 文件时，它给了我一个错误“XML 文档中只允许一个顶级元素错误处理资源'file:///D:/DM1/tro.xml'。第 17 行，位置...

```
</GraphPanel_-Node><GraphPanel_-Node>
--------------------^ 
```

这是代码

```
 private class Serialize extends AbstractAction {
    XStream xs = new XStream();

        public Serialize(String name) {
            super(name);

        }

        public void actionPerformed(ActionEvent e) {

            ListIterator<Node> iter = nodes.listIterator();
            while (iter.hasNext()) {
                Node n = iter.next();
                try {
                    FileOutputStream fs = new FileOutputStream("D:/DM1/tro.xml",true);
                    if(!n.fnode){
                        xs.toXML(n, fs);
                        }

                } catch (FileNotFoundException ex) {
                    ex.printStackTrace();
                }
                iter.remove();
            }

            ListIterator<Edge> Eiter = edges.listIterator();
            while (Eiter.hasNext()) {
                Edge edg = Eiter.next();
                try {
                    FileOutputStream fs = new FileOutputStream("D:/DM1/tro.xml",true);
                    xs.toXML(edg, fs);

                } catch (FileNotFoundException ex) {
                    ex.printStackTrace();
                }
                Eiter.remove();
            }

            ListIterator<Node> Fiter = nodes.listIterator();
            while (Fiter.hasNext()) {
                Node n = Fiter.next();

                try {
                    FileOutputStream fs = new FileOutputStream("D:/DM1/tro.xml",true);
                    if(n.fnode){
                        FirstNode f =new FirstNode("Root");
                    xs.toXML(f, fs);
                    }
                } catch (FileNotFoundException ex) {
                    ex.printStackTrace();
                }
                Fiter.remove();
            }

}
} 
```

# php - 如何将变量从模板传递到主 php 控制器

> ID：15727226
> 
> 赞同：0
> 
> 时间：2013-03-31T07:05:51.607
> 
> 标签：php

将变量从 php 控制器传递到模板是一件容易的事。我只需要在控制器中定义一个变量，然后当我使用`include`语句将控制器定向到模板时，变量就在那里并且可以在那个模板中使用。我想做的是我想在我的一个模板中定义一个变量，将它传递给控制器​​，然后，控制器将它传递给另一个模板。我该怎么办？

# orm - SQLAlchemy（声明性）不创建数据库或表

> ID：15727227
> 
> 赞同：1
> 
> 时间：2013-03-31T07:05:52.060
> 
> 标签：orm, python-2.7, sqlalchemy

我正在尝试将 postgreSQL 与 SQLAlchemy 一起使用。我遇到了一些问题，因为我是 SQLAlchemy 的新手，并且可能误解了文档。

当我使用 SQLite 遵循文档时，从我指定的类创建数据库和关系没有问题。但是，当我尝试使用 Postgre 执行此操作时，我无法生成关系或数据库，而是必须在 shell 中手动创建模式和表。

这是我目前拥有的：

```
postgres_url = 'postgresql+psycopg2://some_user:some_password@localhost:5432/testdb'

engine = create_engine(postgres_url)

DB_session = sessionmaker(bind=engine)
db_session = DB_session()

Base = declarative_base()

Base.metadata.create_all(bind=engine)

#-----------------------------------------------------------
#                       User Entity
#-----------------------------------------------------------

class User(Base):

    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    fname = Column(String(45))
    lname = Column(String(45))
    token = Column(String(45))

    def __init__(self, fname, lname, token):
        self.fname = fname
        self.lname = lname
        self.token = token

    def __repr__(self):
        return 'Token: %s' % self.token 
```

当我在手动创建数据库后运行上述代码时，我得到一个`relation "users" does not exist`，但是，如果我手动创建架构，一切运行正常。我将不胜感激朝着正确的方向前进。

# assembly - 在 Assembly 中的文本文件末尾追加

> ID：15727229
> 
> 赞同：1
> 
> 时间：2013-03-31T07:06:09.820
> 
> 标签：assembly, file-io, append, tasm, dosbox

我这里有一个 TASM 代码，当我再次运行程序时它不会附加新字符串。我要感谢[us2012](https://stackoverflow.com/users/1865077/us2012)帮助我达到这个“状态”。

```
; This example program creates a file and then writes to it.
.model small
.stack

.data 
CR equ 13
LF equ 10

StartMessage DB "This program creates a file called NEW.TXT"
         DB ,"on the C drive.$"

EndMessage DB CR,LF,"File create OK, look at file to"
       DB ,"be sure.$"

WriteMessage  DB "An error has occurred (WRITING)$"
OpenMessage   DB "An error has occurred (OPENING)$"
CreateMessage DB "An error has occurred (CREATING)$"

WriteMe  DB "HELLO, THIS IS A TEST, HAS IT WORKED?",0
FileName DB "new.txt",0 ; name of file to open 
Handle   DW ?   ; to store file handle 

.code 
START:
mov ax,@data    ; base address of data segment
mov ds,ax   ; put it in ds
mov dx,offset StartMessage 
mov ah,09h 
int 21h 

mov si,offset FileName  ; put offset of filename in dx 
xor cx,cx       ; clear cx - make ordinary file
mov ah,6Ch      ; function 3Ch - create a file
mov al, 0
int 21h         ; call DOS service
mov bx, Handle
xor cx, cx
xor dx, dx
mov ah, 42h
mov al, 02h
int 21h

jc CreateError      ; jump if there is an error

mov si,offset FileName  ; put offset of filename in dx
mov al,2        ; access mode -read and write
mov ah,3Dh      ; function 3Dh - open the file
int 21h         ; call dos service

jc OpenError        ; jump if there is an error

mov Handle,ax       ; save value of handle 
mov bx, Handle
xor cx, cx
xor dx, dx
mov ah, 42h
mov al, 02h
int 21h

mov dx,offset WriteMe   ; address of information to write 
mov bx,Handle       ; file handle for file
mov cx,38       ; 38 bytes to be written
mov ah,40h      ; function 40h - write to file
int 21h         ; call dos service

jc WriteError       ; jump if there is an error
cmp ax,cx       ; was all the data written?
jne WriteError      ; no it wasn't - error!

mov bx,Handle       ; put file handle in bx 
mov ah,3Eh      ; function 3Eh - close a file
int 21h         ; call dos service

mov dx,offset EndMessage 
mov ah,09h 
int 21h 

ReturnToDOS:

mov ax,4C00h        ; terminate program 
int 21h 

WriteError:
mov dx,offset WriteMessage 
jmp EndError

OpenError:
mov dx,offset OpenMessage 
jmp EndError

CreateError:
mov dx,offset CreateMessage 

EndError:
mov ah,09h 
int 21h 
mov ax,4C01h 
int 21h 

END START 
```

如果我使用`3Ch`，程序可以工作，但它不会附加到文件的末尾。通过使用`6Ch`而不是`3Ch`，[这](http://stanislavs.org/helppc/int_21-6c.html)表示它不会将现有文件截断为零字节，但是每当我运行代码时，创建文件时都会出错（未创建文件）。请帮我修复代码。非常感谢你！

**编辑2：**

```
; This example program creates a file and then writes to it.
.model small
.stack

.data 
CR equ 13
LF equ 10

StartMessage DB "This program creates a file called NEW.TXT"
         DB ,"on the C drive.$"

EndMessage DB CR,LF,"File create OK, look at file to"
       DB ,"be sure.$"

WriteMessage  DB "An error has occurred (WRITING)$"
OpenMessage   DB "An error has occurred (OPENING)$"
CreateMessage DB "An error has occurred (CREATING)$"

WriteMe  DB "HELLO, THIS IS A TEST, HAS IT WORKED?",0
FileName DB "new3.txt",0 ; name of file to open 
Handle   DW ?   ; to store file handle 

.code 
START:
mov ax,@data    ; base address of data segment
mov ds,ax   ; put it in ds
mov dx,offset StartMessage 
mov ah,09h 
int 21h 

mov si, offset FileName     ; put offset of filename in dx 
xor cx,cx       ; clear cx - make ordinary file
mov ah,6Ch      ; function 3Ch - create a file
mov bx, 3
mov dx, 12h
int 21h         ; call DOS service

jc CreateError      ; jump if there is an error

mov ah,3Eh      ; function 3Eh - close a file
int 21h         ; call dos service

mov dx, offset FileName     ; put offset of filename in dx
mov al,2        ; access mode -read and write
mov ah,3Dh      ; function 3Dh - open the file
int 21h         ; call dos service

jc OpenError        ; jump if there is an error

mov Handle,ax       ; save value of handle
mov bx, Handle
xor cx, cx
xor dx, dx
mov ah, 42h
mov al, 02h
int 21h

mov dx,offset WriteMe   ; address of information to write 
mov bx,Handle       ; file handle for file
mov cx,38       ; 38 bytes to be written
mov ah,40h      ; function 40h - write to file
int 21h         ; call dos service

jc WriteError       ; jump if there is an error
cmp ax,cx       ; was all the data written?
jne WriteError      ; no it wasn't - error!

mov bx,Handle       ; put file handle in bx 
mov ah,3Eh      ; function 3Eh - close a file
int 21h         ; call dos service

mov dx,offset EndMessage 
mov ah,09h 
int 21h 

ReturnToDOS:

mov ax,4C00h        ; terminate program 
int 21h 

WriteError:
mov dx,offset WriteMessage 
jmp EndError

OpenError:
mov dx,offset OpenMessage 
jmp EndError

CreateError:
mov dx,offset CreateMessage 

EndError:
mov ah,09h 
int 21h 
mov ax,4C01h 
int 21h 

END START 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:07:25.157

看这部分：

```
mov dx,offset FileName  ; put offset of filename in dx 
xor cx,cx       ; clear cx - make ordinary file
mov ah,6Ch      ; function 3Ch - create a file
mov al, 0
int 21h         ; call DOS service 
```

并在[相关文档](http://www.ctyme.com/intr/rb-3179.htm)中：

```
AX = 6C00h
BL = open mode as in AL for normal open (see also AH=3Dh)
...
BH = flags
...
CX = create attribute (see #01769).
DL = action if file exists/does not exist (see #01770).
DH = 00h (reserved).
DS:SI -> ASCIZ file name

Return:
CF set on error AX = error code (see #01680 at AH=59h/BX=0000h)
CF clear if successful AX = file handle
CX = status (see #01768) 
```

该函数期望`si`并且没有`dx`文件名的偏移量。

你不设置`bx`。

你不设置`dx`。

你不检查错误。

您不保存文件句柄。

看这部分：

```
mov bx, Handle
xor cx, cx
xor dx, dx
mov ah, 42h
mov al, 02h
int 21h 
```

`Handle`此时未初始化，因为您从未将句柄保存到此变量中。

现在，这里：

```
mov dx,offset FileName  ; put offset of filename in dx
mov al,2        ; access mode -read and write
mov ah,3Dh      ; function 3Dh - open the file
int 21h         ; call dos service 
```

您正在尝试再次打开打开的文件。您需要在打开之前将其关闭。或者，如果您有句柄，请继续使用该文件，不要关闭并重新打开它。

# jquery - 使用固定行数将表格行推到底部

> ID：15727233
> 
> 赞同：2
> 
> 时间：2013-03-31T07:06:53.637
> 
> 标签：jquery, html, html-table

我有个问题。我目前正在使用`.prepend()`哪个将旧表行推到底部，而新表行出现在顶部。但是，我必须将表格行数限制为 10，这样做，一旦`.prepend()`达到 10 行，最新的行将出现在表格的底部，然后再次向上工作，反之亦然。我想知道一种新行将永久出现在顶部的方式，`<tbody>`同时将旧行推到底部。这是我的代码供参考。

```
// show the keys currently held in the specified type of storage in the

// specified table

 function showStorageKeys(type, table, table1) {

// get the specified type of storage, i.e. local or session
var storage = window[type + 'Storage'];
// remove the rows in the specified table before we start
$(table + " > tbody > tr").remove();
$(table1 + " > tbody > tr").remove();
// loop through the existing keys in the storage and add them to the TBODY
// element as rows
for (var i = 0; i < storage.length; i++) {
    var key = storage.key(i);
    if ((key == "0") || (key == "1") || (key == "2") || (key == "3") || (key == "4") ||             (key == "5") || (key == "6") ||
            (key == "7") || (key == "8") || (key == "9")) {
        var details = storage.getItem(key);
        details = details.split(";");
        var lat = details[0];
        var long = details[1];
        var zoom = details[2];
        var time = details[3];
        var address = details[4];
        //var date = details[5];
        if ((address == undefined) || (time == undefined) || (address == "")) {
            document.getElementById("dummy").value = "";
        }
 else {
            $("#history tbody").prepend(
"<tr>" + "<td width='5%'>" + time + "</td>"  +"<td>" + "<a href='JavaScript:getSite(" + lat + ',' + long + ',' + zoom + ")'>" + address +"</a>" +</td>" + "<td width='15%'>" + "<input type='submit'   value='Remove' onclick='removeItem(\"" + type + "\", \"" + key + "\")'/>" + "</td>" + "</tr>");
        }
    }
}
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:26:41.740

向 中添加一个元素后`#history tbody`，为确保该元素最多有 10 行，即最多 10 个子元素，您可以这样做：

```
while($("#history tbody").children().length > 10){
  $("#history tbody").children().last().remove()
} 
```

并将此代码直接放在用于插入新行的代码之后。

另外，请注意，如果经常使用元素的查询对象，通常将它们存储在变量中是一种很好的做法，因为每次对查询函数的调用可能很慢，所以在我上面给你的例子中，在您的代码，您应该考虑到这一点，它会更快：

```
var history_tbody = $("#history tbody")
...
history_tbody.prepend( ... )

while(history_tbody.children().length > 10){
  history_tbody.children().last().remove()
} 
```

并尝试让你对 history_tbody 的定义只发生一次，例如在文件的开头，在 document.ready() 之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:29:25.397

一个简单的方法是像这样使用[jQuery 的`:gt()`选择器](http://api.jquery.com/gt-selector/)：

```
$("#history tbody")
    .prepend('...')
    // using 9 here because gt() uses a zero-based index
    .find('tr:gt(9)').remove(); 
```

# php - 避免打印数组的索引？

> ID：15727237
> 
> 赞同：-2
> 
> 时间：2013-03-31T07:07:24.687
> 
> 标签：php

我正在循环一个多维/嵌套数组，我得到以下结果，但是我想摆脱“1”：每个数组前面的索引号。

```
{"1":{"adjacencies":[{"nodeTo":"2"},{"nodeTo":"5"}],"data":  {"$color":"#EBB056","$type":"star"},"id":1,"name":"rootWarbler<\/label>"},
"2":{"adjacencies":[{"nodeTo":"4"},{"nodeTo":"3"}],"data":{"$color":"#EBB056","$type":"star"},"id":2,"name":"rootJuniper tree<\/label>"},
"3":{"adjacencies":[null],"data":{"$color":"#EBB056","$type":"star"},"id":3,"name":"rootPuff Bird<\/label>"},
"4":{"adjacencies":[{"nodeTo":"5"},{"nodeTo":"3"}],"data":{"$color":"#EBB056","$type":"star"},"id":4,"name":"rootJackRabbit<\/label>"},
"5":{"adjacencies":[null],"data":{"$color":"#EBB056","$type":"star"},"id":5,"name":"rootMountain Lion<\/label>"},
"6":{"adjacencies":[{"nodeTo":"1"}],"data":{"$color":"#EBB056","$type":"star"},"id":6,"name":"rootBobcat<\/label>"}} 
```

这是我的while循环

```
$previd = -1;
 while($row=$result->FetchRow())
{
$id= (float)$row['n_id']; 
$name = $row['name'];
$color1 = $row['color'];
$type1 = $row['type'];
$to= (float)$row['goingto']; 
$thumb =$row['thumb']; //image path

if ($previd != $id) {
    $previd = $id; 
    if ($previd != -1) {
        array_push($array,$node);
    }

    $node[$id] = array(
        "adjacencies" => array(),
        "data" => array(
                "$"."color" => $color1,
                "$"."type" => $type1 
            ),
        "id" => $id,
        "name" => "<img src='".$thumb."' height='25' width='25' alt='root'/><label>".$name."</label>");
}

if ($to != null) { 
    $node[$id]["adjacencies"][]=array("nodeTo" => "$to");
}

}
print_r($node); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:17:08.980

我真的不明白你为什么不使用就得到一个非常完美的 json 字符串，`json_encode()`但我会尽力接近你真正想要的

```
echo json_encode(array_values($array)); 
```

其中`$array`是要转换为不带索引号的 JSON 的数组

所以这意味着它会是这样的

```
 echo json_encode(array_values($node)); 
```

在这种情况下，您需要`array_values()`使用[http://php.net/manual/en/function.array-values.php](http://php.net/manual/en/function.array-values.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:14:25.287

很难有信心地说，但是呢？

```
for($node as $n)
{
    print_r($n);
} 
```

或者

```
for($node as $k=>$n)
{
    print_r($n);
} 
```

但实际上，`print_r`它更像是一种调试工具，而不是输出格式化工具。

编辑：现在我看到您对 JSON 的评论...[**使用 JSON**](http://php.net/manual/en/book.json.php)：[json_encode()](http://www.php.net/manual/en/function.json-encode.php)

```
print(json_encode($node)); 
```

如果您仍然获得数组索引，请尝试类似

```
print(implode("\n", array_map("json_encode", $node))); 
```

# gridview - 仅当用户将鼠标悬停在 gridview 单元格上时才显示工具提示

> ID：15727240
> 
> 赞同：1
> 
> 时间：2013-03-31T07:07:47.017
> 
> 标签：gridview, tooltip

我有一个网格视图，其中一个单元格将显示另一个网格视图作为工具提示，其中包含从数据库加载的数据，但每次加载主网格视图时都会显示工具提示网格视图。我希望仅当用户将鼠标悬停在单元格上时才显示工具提示 gridview。

知道如何使工具提示 gridview 仅在用户将鼠标悬停在单元格标签上时才显示？

```
<asp:GridView ID="gvINCpym" runat="server" AllowSorting="True" AutoGenerateColumns="False"
              CaptionAlign="Left" CssClass="GridViewStyle" EmptyDataText="No Record Found"
              GridLines="None" ShowFooter="True" Width="960px"
              AllowPaging="True">
  <RowStyle CssClass="RowStyle" />
  <EmptyDataRowStyle CssClass="EmptyRowStyle" />
  <Columns>
      <asp:TemplateField HeaderText="QB (30%)">
          <ItemTemplate>
                <asp:Label ID="lblQB" runat="server" Text="<%# Bind('QB') %>"></asp:Label>
                <cc1:HoverMenuExtender ID="HoverMenuExtender1" runat="server" TargetControlID="lblQB"
                     PopupControlID="pnlQBDet" PopupPosition="Right" OffsetX="0" OffsetY="0" 
                     PopDelay="25">
                </cc1:HoverMenuExtender>
                <asp:Panel ID="pnlQBDet" runat="server">
                    <asp:GridView ID="gvQBDet" runat="server">
                    </asp:GridView>
                </asp:Panel>
        </ItemTemplate>
        <HeaderStyle CssClass="HeaderStyle" Width="80px" />
        <ItemStyle HorizontalAlign="Right" Width="80px" />
      </asp:TemplateField>
    </Columns>
</asp:GridView>

Private Sub gvINCpym_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvINCpym.RowDataBound
Try
    If (e.Row.RowType = DataControlRowType.DataRow) Then
        Dim secondGrid As GridView = CType(e.Row.FindControl("gvQBDet"), GridView)

        MsFg2.gvSql =
            "SELECT SUBSTRING(CONVERT(VARCHAR(11), DATE1, 113), 4, 8) AS CalcMnth, AMT2 AS QB, AMT3 AS KB " & _
            "FROM dbo.Inc_Bonus_Tran NOLOCK " & _
            "WHERE (DATE2 BETWEEN '" & CVRMgr.getDateSQL(txtDtFrm.Text) & "' AND '" & CVRMgr.getDateSQL(txtDtTo.Text) & "') " & _
            "AND TYPE = 'INC' AND SUBTYPE = 'T2' " & _
            "AND STAFFID = '" & rowView("StfID") & "'"

        MsFg2.CreateDataTable(DB, MsFg2.gvSql, cnnVLD, True, True)
        Session(MsFg2Ses) = MsFg2.gvDataTable.DefaultView.ToTable

        secondGrid.DataSource = Session(MsFg2Ses)
        secondGrid.DataBind()
    End If
Catch ex As Exception
    cMessageManagerAlertOnly.ErrorMsgAlert(ex.Message, Me.Page)
End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:46:29.690

设法找出解决方案。需要使用 CSS 隐藏面板“pnlQBDet”，以便工具提示网格视图不会显示在页面加载/回发中。

```
<style type="text/css">
.PopupMenu
{
    display: none;
}
</style> 
```

# php - preg_replace() 模式删除 php 中的括号和内容

> ID：15727244
> 
> 赞同：3
> 
> 时间：2013-03-31T07:08:10.037
> 
> 标签：php, design-patterns, preg-replace

我想使用 preg_replace() 删除括号及其内容，但我无法在模式中使用惰性（非贪婪），因为结束括号是结束字符，括号之间的文本始终是随机字符长度，可以包含数字、下划线和连字符。

代码-

```
$array = array(
   "Text i want to keep (txt to remove)",
   "Random txt (some more random txt)",
   "Keep this (remove)",
   "I like bananas  (txt)"
);

$pattern = "@pattern@";
foreach($array as $new_txt){
   $new_outputs .= preg_replace($pattern, '', $new_txt)."\n";
}
echo $new_outputs; 
```

想要的输出-

```
Text i want to keep
Random txt
Keep this
I like bananas 
```

我很少使用正则表达式，也找不到任何东西来解决我的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T07:17:26.470

以下正则表达式应该这样做：

```
$pattern = '@\(.*?\)@'; 
```

`.*?`是任何事物的非贪婪匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T07:16:04.413

```
$new_outputs .= preg_replace('@\([^\)]*\)$@','',$new_txt); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T07:19:04.403

这可能会帮助您：

```
$pattern = "/\([^)]*\)+/";
foreach($array as $new_txt){
    $new_outputs .= preg_replace($pattern, '', $new_txt)."\n";
} 
```

# android - 当我折叠一组时，ExpandableListView 中的列表大小不正确

> ID：15727248
> 
> 赞同：0
> 
> 时间：2013-03-31T07:08:51.207
> 
> 标签：android, expandablelistview

我有 ExpandableListView，起初所有项目都关闭了。当我打开一个组时，我的列表显示它的孩子并且列表是正确的，但是当我关闭组时，我的组关闭但列表中的计数项目没有改变，例如：我关注了组；

```
+a
+b
+c 
```

当我打开 b 组 b 时 b 必须 2 chid (b0,b1) ：

```
+a
-b
b0
b1
+c 
```

Thiat 是正确的，但是当我关闭它时，我的列表发生了变化：

```
+a
+b
+c
b1 
```

这是不正确的；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T17:55:43.797

在扩展 getGroupView 和 getChildView 中的布局之前，尝试在 ExpandListAdapter 中将视图设置为 null。

```
view == null; 
```

不确定您的其余代码有什么问题，但这会在每次更改某些内容时重置视图，并防止您的列表变得疯狂。

# wordpress - Pinterest 书签找不到图片

> ID：15727251
> 
> 赞同：3
> 
> 时间：2013-03-31T07:09:20.633
> 
> 标签：wordpress, pinterest

我已经搜索了相当多的解决方案，但似乎找不到关于这个主题的任何内容，所以我想我会联系这个了不起的社区。

我将尝试在这里提供足够的上下文，以便其他人能够看到出了什么问题。

直到几天前，我还能够使用标准的 pinterest 小书签将我博客主页（[伪造摄影](http://www.forgedphotography.com)）中的图像固定到 pinterest。我今天尝试固定一些图像，并意识到它只找到我的标题图像而没有找到其他内容。

这是一个 wordpress 博客，我已经停用了我的插件并更改了我的主题以消除这些方面的原因，并且行为仍然存在。

我通过两种方式上传了内容：

*   通过 Wordpress 上传照片并创建画廊
    *   Pinterest 小书签仅查找标题图片和精选图库图片
*   嵌入在 facebook 上托管的图像
    *   如果我单击单个图片，我仍然可以固定它们，但我无法从博客的主页固定它们。
    *   当我以前从我的博客主页单击小书签时，它曾经拉出所有帖子中包含的所有图像并让我能够固定它们，现在它只找到我的标题图像。

关于可能发生的事情或阻止小书签找到图像的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:51:37.523

好吧，这不是我正在寻找的答案，但它似乎成功了。一位遇到同样问题的漂亮女士在 Facebook 上联系了我，结果发现 Pinterest 找不到小于 200 像素的图片……

没有解释为什么我过去能够固定它们，但现在我不能。我对缩略图看起来@ 200px 的方式并不疯狂，关于如何解决这个问题的任何其他想法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T23:10:00.467

尝试这个：

```
<img src="smallimage.jpg" data-pin-media="largeimage.jpg" /> 
```

小书签应该会拾取您发送的图像`data-pin-media`。也值得一试：`data-pin-url`，这将使小书签固定您建议的 URL，而不是您当前所在页面的 URL。

# javascript - 禁用 Javascript 的浏览器的模式备份

> ID：15727252
> 
> 赞同：1
> 
> 时间：2013-03-31T07:09:33.810
> 
> 标签：javascript, modal-dialog

我们正在重新设计我们网站上的一些用户界面，我们希望采取的一个步骤是使用模式窗口进行登录/注册操作以使其更清晰。

我担心这可能会对少数禁用 javascript 的用户产生影响，并且很好奇通常是如何处理的。这种情况的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:22:14.497

将模态链接 href 设置为 /whatever?modal=true。如果 JS 可用，则劫持点击并显示模态。如果没有，请重新加载页面并使用模板中的条件类显示模式。

是的，大约 99% 的用户将启用 JS，但优雅的降级/渐进增强技术将有助于确保您的网站在*您的*JS 因任何原因（错误、CDN 中断等）不可用时继续可用。

# php - CRYPT_BLOWFISH 中盐的长度

> ID：15727257
> 
> 赞同：4
> 
> 时间：2013-03-31T07:10:08.323
> 
> 标签：php, bcrypt

在 PHP 手册中指出：

> CRYPT_BLOWFISH - 使用盐的 Blowfish 散列如下：“$2a$”，两位数的成本参数，“$”和字母表中的 22 位数字“./0-9A-Za-z”。

我意识到*盐的长度是 22*。我编写了以下代码，并注意到*salt*的输出长度为*21*。

```
$encoded = crypt('pass','$2a$08$QAZXSWEDCVFRTGBNHYUJMK'); // Lenght of Q . . . K is 22
echo $encoded; 
```

输出：

> $2a$08$QAZXSWEDCVFRTGBNHYUJM./CR85.t4YytTnmLXsRJMfbYWopbT8Nu

**盐*中不存在*K*：**QAZXSWEDCVFRTGBNHYUJM***

 *有什么我不明白的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T08:00:12.677

这是由于盐的编码方式。实际的盐是 128 位，但`crypt`格式中的编码盐是 22 个字符·8 位/字符·3/4 = 132 位。所以实际上没有使用 4 位编码盐。

这也意味着有 16 个编码盐会产生相同的哈希，因为它们的最低有效字符的前四位是相同的：

```
$hashes = array();
$chars = array_merge(array('.','/'), range('A','Z'), range('a','z'), range('0','9'));
foreach ($chars as $char) {
    $salt = 'QAZXSWEDCVFRTGBNHYUJM'.$char;
    $hashes[$salt] = crypt('pass','$2a$08$'.$salt);
}
var_dump($hashes); 
```

以下是产生相同哈希的编码盐：

```
QAZXSWEDCVFRTGBNHYUJM.
QAZXSWEDCVFRTGBNHYUJM/
QAZXSWEDCVFRTGBNHYUJMA
QAZXSWEDCVFRTGBNHYUJMB
QAZXSWEDCVFRTGBNHYUJMC
QAZXSWEDCVFRTGBNHYUJMD
QAZXSWEDCVFRTGBNHYUJME
QAZXSWEDCVFRTGBNHYUJMF
QAZXSWEDCVFRTGBNHYUJMG
QAZXSWEDCVFRTGBNHYUJMH
QAZXSWEDCVFRTGBNHYUJMI
QAZXSWEDCVFRTGBNHYUJMJ
QAZXSWEDCVFRTGBNHYUJMK
QAZXSWEDCVFRTGBNHYUJML
QAZXSWEDCVFRTGBNHYUJMM
QAZXSWEDCVFRTGBNHYUJMN 
```

`crypt`可能只是使用第一个编码内部使用的 128 位盐，即`QAZXSWEDCVFRTGBNHYUJM.`.*

# c - 当没有空终止符时，C如何识别字符数组的结尾？

> ID：15727258
> 
> 赞同：-4
> 
> 时间：2013-03-31T07:10:09.893
> 
> 标签：c

由于 C 字符数组需要空终止符，因此以下代码会打印四个*a*和一些垃圾字符。

```
char y[4] = {'a', 'a', 'a', 'a'};
printf("y = %s\n", y); 
```

输出：

```
y = aaaa� 
```

但是，以下代码不会产生乱码。

```
char y[4] = {'a', 'a', 'a', 'a'};
char z[4] = {'b', 'b', 'b'};

printf("y = %s\n", y); 
printf("z = %s\n", z); 
```

输出：

```
y = aaaa
z = bbb 
```

我知道第四个字符`z`是用空终止符自动初始化的。我也猜想`y`并`z`在内存中彼此相邻分配。

但是在这种情况下，C 如何正确打印 4 *a*而不是前者呢？它是否确定下一个字节已经分配给另一个变量，所以它应该停止打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T07:11:39.510

`printf("y = %s\n", y);`在这种情况下，是**未定义的行为**。换句话说，你很幸运——也许你在命中 NUL 之前打印了一些不可见的字符，也许由于堆栈对齐，数组后面有一个零，也许星星是正确的。

* * *

我通常不会详细说明“这是 UB，请勿触摸”，但我感到奇怪的是被迫这样做。

看，这是你的程序：

```
#include <stdio.h>
int main() {
    char y[4] = {'a', 'a', 'a', 'a'};
    char z[4] = {'b', 'b', 'b'};

    printf("y = %s\n", y); 
    printf("z = %s\n", z);
} 
```

现在我将使用我的特殊编译器标志来编译它：

```
$ cc -O3 so15727258.c -o so15727258 -fstack-protector-all -Wall 
```

并运行它：

```
$ ./so15727258
y = aaaa?>A??0F
z = bbb 
```

哎呀，哈哈，这完全是垃圾。更好的是，由于堆栈保护器，它是随机垃圾，所以它甚至（简单）不是确定性的。哇！

* * *

还是不服气？特殊的编译器标志对你来说太奇怪了吗？尝试

```
#include <stdio.h>

int bar() {
    char x[4096];
}

int foo() {
    char y[4] = {'a', 'a', 'a', 'a'};
    char z[4] = {'b', 'b', 'b'};
    printf("y = %s\n", y); 
    printf("z = %s\n", z);
}

int main() {
    bar();
    foo();
} 
```

编译它：

```
$ cc so15727258.c -o so15727258 -Wall 
```

并运行它：

```
$ ./so15727258
y = aaaa?????ic?
z = bbb 
```

还是完全垃圾！请记住——这些例子都是说明性的。当然这是未定义的行为，所以你可能会得到一些完全不同的结果，然后回到这里告诉我“但是 XYZ 有效”。这就是未定义行为的定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:13:12.713

你的程序表现出*未定义的行为*，即使它看起来可以工作。`'\0'`对于大多数字符串操作和打印，字符串必须以 终止。

如果您想知道它是如何在某些情况下仍然有效的，那么对象之间（或相邻对象中）可能有零字节，它们可能充当字符串终止符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:17:33.763

你不是很幸运......你可以测试它。打印数组后面字节的内存内容。我可以闭着眼睛向你保证，它是零……

# subdomain - hubpages.com 之类的网站如何在没有 DNS 的情况下将内容放在子域中？

> ID：15727259
> 
> 赞同：2
> 
> 时间：2013-03-31T07:10:19.120
> 
> 标签：subdomain

我假设 hubpages.com 上没有人手动添加 ServerAlias 以使子域工作。

我想用 Wordpress 做类似的事情，但我很难理解它是如何工作的。

据我了解，您需要 DNS 才能使子域正常工作，并且您需要添加一个虚拟主机。

我在stackoverflow中搜索了“假子域”的创建，但通常答案是“vhost”。那么有没有办法为不存在的子域自动创建虚拟主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:13:42.573

DNS 部分使用通配符 DNS 记录完成：

```
*.hubpages.com.     900 IN  A   66.211.109.24 
```

服务器部分可能是使用自动化系统在用户注册时创建虚拟主机完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:25:31.163

这是通过[通配符 DNS 条目](http://en.wikipedia.org/wiki/Wildcard_DNS_record)完成的，以使域到达网络服务器。

进入网络服务器后，您可以将一些技术用于 Apache

# mod_vhost_alias

[mod_vhost_alias](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)允许您将虚拟主机名动态映射到文档根目录。

当您想为不同的域提供不同的代码库时，这是一种很好的技术，并且您可以动态配置它们。我已经使用这种技术通过自定义 404 处理程序按需部署代码的 git 分支来自动部署它们。

# 失败到默认的 VirtualHost

或者，依靠“未知”主机[名将落入](http://httpd.apache.org/docs/2.2/vhosts/details.html#namebased)第一个定义的虚拟主机这一事实，然后您只需让该主机上的应用程序为提供的域自行配置自身。我曾经运行 pastebin.com，这就是我在那里的做法。

当每个域的代码库相同时，这种技术很好，只需要更改配置。

# java - Java：一个简单的 GUI 程序的 NullPointerException

> ID：15727277
> 
> 赞同：1
> 
> 时间：2013-03-31T07:14:04.403
> 
> 标签：java

嗨，我是新手 Java 学习者。我试图实现一个简单的 GUI 程序，以在单击按钮时更改面板的颜色。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class Button_lable implements ActionListener {
public JFrame frame;
//JPanel panel;
//JLabel label;

public static void main(String[] args) {

    Button_lable gui = new Button_lable();
    gui.go();
}//end of main
public void go(){
    //System.out.println("Entered Go()");
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton b_frame = new JButton("Click to change the color");
    b_frame.addActionListener(this);
    MyDrawpanel d_panel = new MyDrawpanel();

    frame.getContentPane().add(BorderLayout.SOUTH,b_frame);
    frame.getContentPane().add(BorderLayout.CENTER ,d_panel);

    frame.setSize(300, 300);
    frame.setVisible(true);

}//end of go
public void actionPerformed(ActionEvent e) {
    frame.repaint();
}

}//end of Button_lable

class MyDrawpanel extends JPanel {
    public void paintComponent(Graphics g){
Graphics2D grph = (Graphics2D) g;
int red = (int)(Math.random()* 255);
int green = (int)(Math.random()* 255);
int blue = (int)(Math.random()* 255);
Color strt_clr = new Color(red,green,blue);

red = (int)(Math.random()* 255);
green = (int)(Math.random()* 255);
blue = (int)(Math.random()* 255);
Color end_clr = new Color(red,green,blue);

GradientPaint gradient = new GradientPaint(70,70,strt_clr,150,150,end_clr);  
grph.setPaint(gradient);
grph.fillOval(50,25, 150, 150);
  }
} 
```

* * *

我得到输出窗口。但是当我点击按钮时，我得到以下异常。

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Button_lable.actionPerformed(Button_lable.java:34)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

请指教。

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:15:43.077

你从不初始化`this.frame`，所以它是`null`。

在`go()`中，您创建并初始化一个不同的变量，称为`frame`：

```
JFrame frame = new JFrame(); 
```

您可能要删除第一个`JFrame`：

```
frame = new JFrame(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:16:58.910

您已经声明了 2 个变量，称为`frame`- 一个类变量和一个内部变量`go`。去掉里面的声明`go`&只初始化里面的类变量`go`

```
public void go(){
    //System.out.println("Entered Go()");
    JFrame frame = new JFrame(); 
```

将上述更改为

```
public void go(){
    //System.out.println("Entered Go()");
    frame = new JFrame(); 
```

因为您正在创建一个名为`frame`in的新变量`go`，所以类变量`frame`永远不会被初始化。它仍然存在`null`，因此`NullPointerException`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:17:16.280

框架为空。只需使用设置器作为框架。就像是 ：

```
void setFrame(JFrame theFrame) {
    this.frame = theFrame;
} 
```

此外，您已经两次声明了框架。从 go() 中删除它；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T07:17:32.843

更改此行：

```
JFrame frame = new JFrame(); 
```

这样：

```
frame = new JFrame(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T07:26:58.007

```
public class Button_lable implements ActionListener {
public JFrame frame; // This is a class/global variable
//JPanel panel;
//JLabel label;

public static void main(String[] args) {

    Button_lable gui = new Button_lable();
    gui.go();
}//end of main
public void go(){
    //System.out.println("Entered Go()");
    JFrame frame = new JFrame();  // This is local variable.
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton b_frame = new JButton("Click to change the color");
    b_frame.addActionListener(this);
    MyDrawpanel d_panel = new MyDrawpanel();

    frame.getContentPane().add(BorderLayout.SOUTH,b_frame);
    frame.getContentPane().add(BorderLayout.CENTER ,d_panel);

    frame.setSize(300, 300);
    frame.setVisible(true);

} 
```

您已将类变量定义为框架。您正在实例化局部变量框架。所以不赋值很明显会抛出NPE。因为局部变量的范围只存在于特定的方法中。

您只需要执行以下操作。

```
public class Button_lable implements ActionListener {
public JFrame frame;
//JPanel panel;
//JLabel label;

public static void main(String[] args) {

    Button_lable gui = new Button_lable();
    gui.go();
}//end of main
public void go(){
    //System.out.println("Entered Go()");
    frame = new JFrame(); // here, the class variable is instantiated. So it wont give NPE.
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton b_frame = new JButton("Click to change the color");
    b_frame.addActionListener(this);
    MyDrawpanel d_panel = new MyDrawpanel();

    frame.getContentPane().add(BorderLayout.SOUTH,b_frame);
    frame.getContentPane().add(BorderLayout.CENTER ,d_panel);

    frame.setSize(300, 300);
    frame.setVisible(true);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-23T07:21:34.573

**让我解释一下异常的原因。**

您在第`public JFrame frame;`一个大括号下声明的第一个具有全局范围。并且`JFrame frame = new JFrame();`您初始化的第二个创建它的一个新实例。您在 go() 方法中声明的框架具有本地范围，并且将其初始化为全局范围。这就是为什么`global scope instance of frame is uninitialized`。**这是造成的`NullPointerException`。**

# python - python raw_input() 语法

> ID：15727298
> 
> 赞同：0
> 
> 时间：2013-03-31T07:16:36.310
> 
> 标签：python, python-2.7

我对python很陌生。我正在阅读一个傻瓜教程。我遇到了以下几行。它不能在我的编译器上编译。我有python版本2.7.3

```
name = raw_input(‚Set name: ‚)
password = raw_input(‚Set password: ‚) 
```

我有一些问题？是`Set name:`某种关键字？它没有包含在“”中？raw_input() 开头和结尾的 , 又是什么意思？

我已经用谷歌搜索了这个，但找不到任何关于这种用法的参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:17:29.550

逗号应该是引号，一定是错字。开头不能有逗号`raw_input()`，它只需要一个字符串作为参数。

```
name = raw_input('Set name: ')
password = raw_input('Set password: ') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:23:33.723

`raw_input`[`string`](http://docs.python.org/2/library/stdtypes.html#string-methods)在其参数中取 1 。所以你的代码应该是

```
name = raw_input('Set name: ')
password = raw_input('Set password: ') 
```

此外，`,`它是 Python 中参数之间的分隔符（与大多数语言一样）。

（好像有错字，`,`应该是`"`……）

# .net - 我在哪里可以找到 .NET Framework 4.0 中的 app.config 文件？

> ID：15727312
> 
> 赞同：2
> 
> 时间：2013-03-31T07:17:46.303
> 
> 标签：.net, c#-4.0, app-config

**我在哪里可以找到 .NET 框架 4.0 中的 app.config 文件？** 为了更加详细，我需要该文件来编辑它，但无法找到文件的目的地。请告诉我在哪里可以尽快搜索它。先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:29:17.310

App.config 以应用程序命名，例如，如果 YourApplication.exe 有一个 YourApplication.exe.config，那么将使用它。（该文件在 Visual Studio 中仅称为 app.config 并在构建时重命名）

# ios - imageWithContentsOfFile 与 imageNamed（imageWithContentsOfFile 返回低质量图像）

> ID：15727313
> 
> 赞同：4
> 
> 时间：2013-03-31T07:17:46.737
> 
> 标签：ios, ios6

有一次，我把我所有的图片都放在了 APP Bundle 中。我使用 imageNamed 函数来获取图像。后来，我决定在应用启动时将一些图片复制到 Document 中。所以，我不能再使用 imageNamed 函数来获取图像了。我使用 imageWithContentsOfFile 来获取图像：

```
NSString* documentsDirectoryPath =[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0];
UIImage* result =[UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@.%@", documentsDirectoryPath, fileName, extension]]; 
```

然而，imageWithContentsOfFile 返回一个低质量的图像（非常模糊）。我所有的图像都是 128*128。我使用以下代码检测图片的大小：

```
NSData * imgData = UIImagePNGRepresentation(image);
NSLog(@"size : %d",[imgData length]); 
```

我发现 imageNamed 返回的图像大小是 imageWithContentsOfFile 的 3 倍。我疯了……救救我！非常感谢 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T12:56:17.900

在[UIImage 参考文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)中，您可以看到 imageNamed 和 imageWithContentsOfFile 之间的一些区别。

*   imageWithContentsOfFile 不缓存图像，也不查找视网膜显示版本 (@2x.png)。
*   imageNamed 会缓存图像并检查是否有 @2x 版本，以便在启用视网膜的设备中加载该版本。

知道了这一点，对于您的问题，我能想到的最合乎逻辑的解释是您正在使用视网膜设备并且拥有同一图像的视网膜版本 (@2x)。这可以解释为什么图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T11:24:08.000

我用于`+ (UIImage *)imageWithContentsOfFile:(NSString *)path`从磁盘加载图像而不缓存它们，以减少内存占用。

从 iOS 8x 开始，这种方法似乎发生了变化。为了维护每个 iOS 版本（7x 到 9x）的功能，我在 UIImage 上使用了这个简单的类别：

```
#import <UIKit/UIKit.h>

@interface UIImage (ImageNamedNoCache)

+ (UIImage *)imageNamedNoCache:(NSString *)imageName;

@end 
```

和.m

```
#import "UIImage+ImageNamedNoCache.h"

#define MAIN_SCREEN                     [UIScreen mainScreen]
#define SYSTEM_VERSION_LESS_THAN(v)     ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedAscending)

@implementation UIImage (ImageNamedNoCache)

static NSString *bundlePath = nil;

+ (UIImage *)imageNamedNoCache:(NSString *)imageName
{
    if (!bundlePath)
    {
        bundlePath = [[NSBundle mainBundle] bundlePath];
    }

    NSString *imgPath = [bundlePath stringByAppendingPathComponent:imageName];

    if (SYSTEM_VERSION_LESS_THAN(@"8.0"))
    {
        imgPath = [imgPath stringByAppendingFormat:@"@%ldx.png", (long)[MAIN_SCREEN scale]];
    }
    return [UIImage imageWithContentsOfFile:imgPath];
}

@end 
```

希望有帮助；）

# usb - 在自动化过程中进入离线模式时重置android设备

> ID：15727314
> 
> 赞同：0
> 
> 时间：2013-03-31T07:17:55.207
> 
> 标签：usb, adb, offline, reset

在自动化过程中，android 设备在 adb 设备中被检测为离线。

手动 USB 拔出/插入有助于从离线模式中检索。

**检测特定 adb usb 端口并在 windows 机器中重置它**的 cli cmd 是什么。这样我就可以将它添加到自动机脚本中。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:54:57.813

我们已经在我们的环境中解决了这个问题（去年没有一个设备“离线”），但该解决方案可能不适合您。

*   我们切换到 linux（linux USB 堆栈似乎更“宽容”）
*   我们的测试框架确保在 ADB 接口枚举后的前 10 秒内没有任何 adb 命令发送到任何设备

# c++ - 对虚拟表、构造函数和析构函数的未定义引用

> ID：15727315
> 
> 赞同：2
> 
> 时间：2013-03-31T07:18:01.440
> 
> 标签：c++, polymorphism, multitasking

我正在处理的一些同意多任务代码的构造函数和析构函数有问题。我收到的错误是

```
task.o: In function `$_4Task':
/home/luke/project/task.cc(.text+0x57): undefined reference to `Task virtual table'
task.o: In function `_4TaskUi':
/home/luke/project/task.cc(.text+0x5): undefined reference to `Task virtual table' 
```

从目标文件来看，_4Task 和 _4TaskUi 的取消引用名称分别是我的 Task 析构函数和构造函数。我似乎无法弄清楚为什么我的编译器告诉我我没有引用虚拟表。任何帮助将不胜感激，我在 ubuntu 12.10 上使用 GCC

以下是我的头文件

```
#ifndef TASK
#define TASK

#include "stddef.h"
#include "nocopy.h"

class Task: private NoCopy
{
    void** stack;           //Base of stack
    void** sp;              //saved sp when not running

    static Task* current;               //Point to running task
    static void start();                //calls task::main
    static void dispatch(Task* t);      //switch context to task t
    virtual void main();
    friend class TaskList;

protected:
    void fork();            //start task

public:
    Task(size_t stackSize);
    virtual ~Task();
    static Task* const getCurrent()
    {
        return current;
    }
    static void yield();
};

 #endif 
```

以下是我的 cpp 文件

```
#include "task.h"

Task initialTask(0);                //initial code before 
                             // set up stack in crt0.s
Task* Task::current = &initialTask;         //note first running task
TaskList readyList;
Task::Task(size_t stackSize)
:stack(new (void*)[stackSize/sizeof(void*)]),
 sp(&stack[stackSize/sizeof(void*)])
{                               //set up task stack
    if(stackSize)
    {
        *--sp = 0;      //for debugger
        *--sp = 0;      //terminate frame chain
        *--sp = &start; //point to first code
    }
}

Task::~Task()
{
    delete[](stack);
}
//Contec Switching
register void** spreg asm("s");     //can refer to hc12 SP as spreg
void Task::dispatch(Task* task)
{
    current -> sp = spreg;
    current = task;
    spreg = current -> sp;
}//Dispatch is called by one task but is returned by another

void Task::fork()       //call in ctor of all task
{
    TaskList::Node node(&readyList);    //Make caller go from "running"->"ready"
    dispatch(this);                 //Start new task
}

void Task::start()
{
    current -> main();
    TaskList forever;       //Wait Task
    forever.enqueue();      //Wait forever  
} 
```

**编辑**我想通了，因为每个人都说 main 没有在 task.h 或 task.cc 中定义，main 取决于任务，所以 main 的默认定义是

```
virtual void main(){}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:20:05.357

您需要为`virtual`类中的所有函数提供定义。只有纯虚函数可以在没有定义的情况下存在。您显示的代码没有函数的任何定义`Task::main()`。你需要定义它。
再想一想，我会将该函数命名为更合适的名称。

* * *

**好读：**

**[“虚拟表”是未解决的外部是什么意思？](http://www.parashift.com/c++-faq-lite/link-errs-missing-vtable.html)**

# mdx - 使用 Mondrian 在 MDX 查询中获取每个轴的级别

> ID：15727321
> 
> 赞同：0
> 
> 时间：2013-03-31T07:18:57.933
> 
> 标签：mdx, mondrian

使用蒙德里安，我想在 MDX 查询中为每个轴获取级别。

例如 ：

> 在列上选择非空 {Hierarchize({[Product].[Product Family].Members})}
> 
> NON EMPTY CrossJoin([Time].[Quarter].Members, [Store].[Store Name].Members) ON ROWS
> 
> FROM [销售]
> 
> WHERE {Hierarchize({[Measures].[Unit Sales]})}

预期结果是：

列：[产品]。[产品系列]

ROWS : [时间].[季度], [商店].[商店名称]

最近我使用了这段代码：

> 轴[i].getSet().getType().getLevel()

它适用于 COLUMNS 轴，但不适用于 ROWS 轴。我想这是由 ROWS 轴中的数量大于 1 引起的。

有什么方法可以在一个轴上获得超过 1 的水平？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:11:31.657

这个怎么样：

```
with
member [Product].[Product Family].[Row current member] as
[Time].[Quarter].currentmember.name + ', ' +
[Store].[Store Name].currentmember.name 
```

然后在 select 子句中包括列轴中的成员：

```
SELECT NON EMPTY Hierarchize({[Product].[Product Family].Members,
                 [Product].[Product Family].[Row current member]}) ON COLUMNS

NON EMPTY CrossJoin([Time].[Quarter].Members, [Store].[Store Name].Members) ON ROWS

FROM [Sales]

WHERE {Hierarchize({[Measures].[Unit Sales]})} 
```

# javascript - 对于 JavaScript 自动完成搜索框，我们必须使用“输入”事件处理程序吗？

> ID：15727324
> 
> 赞同：40
> 
> 时间：2013-03-31T07:19:17.790
> 
> 标签：javascript, javascript-events

我试图区分JavaScript 中`keydown`, `keypress`, `keyup`, `input`,`change`事件的不同用法。

如果是 JavaScript 自动补全搜索框，是不是一定要使用`input`事件处理程序？

原因是：

1.  在`change`用户按下 Enter 或离开该输入框（通过 Tab 键或单击输入框外部）之前，不会调用事件处理程序，因此`change`当用户再输入一个时，该事件可能不适合提出建议的目的字符到输入框。

2.  事件处理程序可用于将`keydown`击键“添加”到搜索词中，但是对于 CTRL-v 或 CMD-v（在 Mac 上）来粘贴它，如果我们粘贴这样的词，我们无法真正得到`keyCode`一个就像`hello`在搜索框中一样——因为只有一个按键用于 CTRL，一个按键用于`v`, 而不是`hello`——但是我们可以使用输入框的`value`属性来获取值——但是，如果用户使用鼠标来右键单击并选择“粘贴”以将文本添加到框 - 在这种情况下我们应该，或者我们可以使用鼠标事件处理程序来查看`value`属性？处理这么低级别的键盘和鼠标实在是太乱了。

所以`input`事件处理程序似乎恰好符合确切的目的，因为任何值更改，`input`都会调用事件处理程序。这就是`input`事件处理程序如此重要和有用的原因。

我们仍然需要`keydown`事件处理程序，因为如果用户按下向下箭头键在可能的项目列表中向下移动怎么办？（可能还有 ESC 使自动完成建议框消失）。在这些情况下，不会调用事件`input`处理程序和事件处理程序，并且事件对这些情况很有用。`change``keydown`

上述概念是否正确，主要是为了理解`input`事件？

（用于理解事件处理程序被称为的 jsfiddle：http: [//jsfiddle.net/jYsjs/](http://jsfiddle.net/jYsjs/)）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-31T08:51:51.673

你基本上是对的，这里详细介绍了事件和潜在的输入案例。

## JavaScript 事件

这是触发不同事件的时间：

*   **`change`**

    `blur`如果 的值`<input>`已更改，则在触发事件时将调用此方法。换句话说，它会在输入失去焦点并且值与原来不同时触发。

*   **`input`**

    该`input`事件基本上是您要查找的所有内容，它捕获任何输入更改时的事件，并且很可能是由于开发监视每次击键的东西时令人头疼的原因而发生的。输入事件甚至设法捕捉到鼠标粘贴内容的情况。

    不幸的是，该[`input`事件](http://www.w3.org/TR/html5/forms.html#event-input-input)相对较新，仅适用于现代浏览器 (IE9+)。

*   **`keydown`**

    该`keydown`事件非常简单，当用户按下按键时触发。

*   **`keypress`**

    该`keypress`事件应该[代表正在输入的字符](https://stackoverflow.com/a/3396790/1156119)。因此，它不会捕获退格或删除，这会立即将其关闭以供使用 over `keydown`。

*   **`keyup`**

    很像`keydown`，只要用户释放一个键，它就会触发。

*   **`paste`**

    当数据被粘贴到元素中时，这个方便的事件会触发。

### 修饰键

请注意`keydown`,`keypress`并在属性中分别`keyup`携带有关修饰键`Ctrl`,`Shift`和的信息 ,和。`Alt``ctrlKey``shiftKey``altKey`

## 案例

以下是您需要考虑的案例列表：

*   使用键盘输入（包括按住一个键）

    触发器：`keydown`, `keypress`, `input`,`keyup`

*   删除输入 ( `Backspace`/ `Delete`)

    触发器：`keydown`, `input`,`keyup`

*   `Ctrl`使用+粘贴`V`

    触发器：`keydown`, `paste`, `input`,`keyup`

*   使用鼠标粘贴

    触发器：`paste`,`input`

*   从自动完成中选择一个项目（`↑</kbd>/`↓</kbd>)``

    触发器：`keydown`,`keyup`

## 执行

鉴于上述情况，您可以实现自动完成框来处理对`input`输入的所有更改的事件，然后`keydown`处理向上和向下的事件。这真的会很好地分离所有内容并产生一些非常干净的代码。

如果要支持 IE8，则需要将除粘贴之外的所有内容都扔到`keydown`事件中，然后处理`paste`. 该`paste`事件现在得到了相当广泛的支持，并且[自 v5.5 以来一直在 IE](https://stackoverflow.com/a/2177059/1156119)中）。

## 试验事件

这是我用来测试事件[的 jsFiddle ，您可能会发现它很有用。](http://jsfiddle.net/Tyriar/V47m8/)它显示了有关每个事件的更多信息：

```
function logEvent(e) {
    console.log(e.type +
                "\n    this.value = '" + this.value + "'" +
                (e.keyCode ? "\n    e.keyCode  = '" + e.keyCode + "'" : "") +
                (e.keyCode ? "\n    char       = '" + String.fromCharCode(e.keyCode) + "'" : ""));
    console.log(e);
} 
```

## 参考

*   [HTML 5 规范 - 常见事件行为](http://www.w3.org/TR/2011/WD-html5-20110113/common-input-element-attributes.html#common-event-behaviors)
*   [SO - onKeyPress 与。onKeyUp 和 onKeyDown](https://stackoverflow.com/a/3396790/1156119)
*   [SO - JavaScript 在粘贴事件中获取剪贴板数据（跨浏览器）](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)

# python - Scrapy Xpath：当我选择 <12 时，我得到“\r\n\t\t\t\t\t\t”而不是“<12”

> ID：15727325
> 
> 赞同：-1
> 
> 时间：2013-03-31T07:19:28.200
> 
> 标签：python, xpath, scrapy

html代码就像

```
<td><12</td> 
```

我想得到“<12”，但是当我使用“select('td/text()').extract()”时，我得到“[u'\r\n\t\t\t\t \t\t']”。

每个包含“<”的项目都是这样的。我怎样才能得到“<12”？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:22:42.837

不要输入`<12`HTML，而是输入`&lt;12`. 那应该正确渲染和解析。

解释是 HTML 被认为`<`是一个标签开启器，所以它让他感到困惑。出于这个原因，您需要使用一个称为“转义”的过程，这意味着您将所有特殊字符转换为正常的“转义符号”，您的浏览器（或任何正在阅读您的 HTML 的东西）应该能够识别这些字符。

一个快速的谷歌搜索给出了[这里](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php "HTML 转义字符：完整列表")的列表。

# .net - .NET WebBrowser 控制和刷新

> ID：15727326
> 
> 赞同：1
> 
> 时间：2013-03-31T07:19:47.277
> 
> 标签：.net, winforms, webbrowser-control

我有一个简单的 WinForm，上面有一个 WebBrowser 控件，可以显示来自 Web 的图像。图像根据 Timer1 刷新。
在我按*F5*或使用浏览器上下文菜单中的*“刷新”选项之前，它工作正常。*然后我得到一个空白页，我必须重新启动程序。
这是为什么？
如果需要，我希望能够手动更新而无需等待 Timer1。
有什么建议么？
我正在使用 Visual Basic Express 2010。

```
 Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        WebBrowser1.DocumentText = "<html><body><img src='http://example.com/image.jpg'></body></html>"
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        WebBrowser1.Refresh()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:51:59.323

写入`DocumentText`不会改变`Url`，`Url`刷新时需要，所以当你按 F5 时，浏览器会刷新`about:blank`。我真的很想知道`.Refresh()`为你工作。

你想要这样的东西：

```
Private Shared ReadOnly about_blank As Uri = New Uri("about:blank")

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    WebBrowser1.Url = about_blank
End Sub

Private Sub WebBrowser1_Navigated(ByVal sender As Object, ByVal e As System.Windows.Forms.WebBrowserNavigatedEventArgs) Handles WebBrowser1.Navigated
    If e.Url = about_blank Then
        WebBrowser1.Document.Write("<html><body><img src='http://example.com/image.jpg'></body></html>")
    End If
End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    WebBrowser1.Refresh()
End Sub 
```

# javascript - 递归javascript函数中的变量未定义？

> ID：15727327
> 
> 赞同：2
> 
> 时间：2013-03-31T07:20:04.357
> 
> 标签：javascript, function, recursion

我编写了一个简单的脚本，用于使用递归方法 - Euclid 算法找到最大公约数 (GCD) 和最小公倍数 (LCM)。

不幸的是，如果它需要在不止一个步骤中执行此操作，则要从函数返回的相关变量将变得未定义。我已经尝试在带有断点的调试器中跟踪它，它似乎充分遵循递归并适当地返回到原始函数，但是它在函数结束时神秘地消失了，即使它是要返回的？

不知道为什么会发生这种情况或我能做些什么来解决它。我的代码如下：

```
function GCD(a, b) {
    if (a % b == 0) {
        return b;
    }
    else {
        GCD(b, (a % b));
    }
}

function LCM (a, b) {
    return (a*b)/GCD(a, b);
}

function makeDM (a, b) {
    return (GCD(a, b) + " " + LCM(a, b));
} 
```

因此，如果您使用诸如 60、20 之类的 a 和 b，它将给出 20 和 60 的正确答案。但是，如果您使用诸如 20、60 或 126、35 之类的数字，则它会惨遭失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T07:32:12.273

您没有从函数的递归部分返回值，因此从函数返回的值将是`undefined`. 添加一个`return`：

```
function GCD(a, b) {
    if (a % b == 0) {
        return b;
    }
    else {
        return GCD(b, (a % b));
    }
} 
```

你也可以用一个`return`：

```
function GCD(a, b) {
    return a % b == 0 ? b : GCD(b, (a % b));
} 
```

# javascript - 缩略图到大图像jquery问题

> ID：15727330
> 
> 赞同：1
> 
> 时间：2013-03-31T07:20:22.640
> 
> 标签：javascript, jquery, image, tooltip

在我看来，我正在使用它来将我的图像显示为每条记录上的缩略图

```
<img src="<?php echo Router::url("**../files/images/small/**".$ad["Advertisement"]["advertisement_image"],false)?> 
```

缩略图保存在小目录文件夹中，相同的大图像存储在大目录文件夹下。

你能告诉我如何获得与我使用 jQuery 工具提示进行大图像预览时相同缩略图的大图像，我该如何在上面的代码中给出的 alt 中实现这一点。

```
<img src="hills-thumb.jpg" alt="hills.jpg" rel="Hills Image" /> 
```

JS：

```
$(document).ready(function() {
    $("#thumbnail img").hover(function(e) {
        $("#large").css("top", (e.pageY + 5) + "px")
            .css("left", e.pageX + 5) + "px")
        .html("<img src=" + $(this).attr("alt") + " alt='Large Image' /><br/>" + $(this).attr("rel"))
        .fadeIn("slow");
    },
    function() {
        $("#large").fadeOut("fast");
    });
}); 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:43:41.430

看看使用 jquery 工具提示进行图像预览的这个。

[http://cssglobe.com/easyest-tooltip-and-image-preview-using-jquery/](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)

# php - shell_exec return null - 监控linux服务

> ID：15727331
> 
> 赞同：2
> 
> 时间：2013-03-31T07:20:23.263
> 
> 标签：php, linux, service, monitoring, shell-exec

我需要没有 shell 的我的 linux 服务器的监控服务，我编写了一个新的 php 脚本来执行这个功能。运行后，脚本不写入服务状态。例如-如果我在终端中编写此命令-

```
service nginx status |awk '{print $4} 
```

他返回给我结果：

```
Run... 
```

这个脚本：

```
<?php
$nginx = shell_exec("service nginx status |awk '{print $4}'");
$bd = shell_exec("service mysqld status |awk '{print $4}'");
$jabber = shell_exec("service ejabberd status |awk '{print $4}'");
$cgi = shell_exec("service php-fpm status |awk '{print $4}'");
$mem = shell_exec("service memcached status |awk '{print $4}'");
echo "<b>Web-server nginx:</b> $nginx";
echo "<br>";
echo "<b>Server MySQL:</b> $bd";
echo "<br>";
echo "<b>Server Jabber Jabber:</b> $jabber";
echo "<br>";
echo "<b>Service php-fpm:</b> $cgi";
echo "<br>";
echo "<b>Service memcached:</b> $mem";
?> 
```

如果通过 php 执行此操作，所有 '$' 函数都会返回有关服务状态的空信息。如何正确编写此脚本？请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:51:23.123

使用`service`命令的完整路径，因为它所在的目录不在 web 服务器的 default`$PATH`中。

# ios - 将图像图标添加到 UIPickerView 行

> ID：15727332
> 
> 赞同：8
> 
> 时间：2013-03-31T07:20:34.983
> 
> 标签：ios, objective-c, uipickerview, uipickerviewdatasource

我在网上看了又看，没有找到太多关于这个的！

我想知道您如何将图像放入 UIPicker 中，以便每一行都有不同的图像。

```
 #import "ViewController.h"

    @interface ViewController ()

    @end

    @implementation ViewController
    @synthesize pickerContent;

    @synthesize p1;

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    //////////

    - (NSMutableArray *)pickerContent
    {
        if(!pickerContent) {
            pickerContent = [[NSMutableArray alloc] initWithObjects:
                              [UIImage imageNamed:@"one.jpg"],
                              [UIImage imageNamed:@"two.jpg"],
                              [UIImage imageNamed:@"three.jpg"],
                              [UIImage imageNamed:@"four.jpg"],
                              [UIImage imageNamed:@"five.jpg"], nil];
        }
        return pickerContent;
    }

    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
    {
        if ([pickerView isEqual:p1])
        {
            return 4;
        }

            return 0;

    }
    - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
    {

        if ([pickerView isEqual:p1])
        {
            if (component == R1)return [self.pickerContent count];
            if (component == R2)return [self.pickerContent count];
            if (component == R3)return [self.pickerContent count];
            if (component == R4)return [self.pickerContent count];
        }

        return 0;
    }

    - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
    {
        if ([pickerView isEqual:p1])
        {
            if (component== R1)return [pickerContent objectAtIndex:row];
            if (component== R2)return [pickerContent objectAtIndex:row];
            if (component== R3)return [pickerContent objectAtIndex:row];
            if (component== R4)return [pickerContent objectAtIndex:row];
        }

     return 0;

    }
    @end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-04T17:08:52.557

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view{
    UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"your image number %@.png", (long)row]];
    UIImageView *temp = [[UIImageView alloc] initWithImage:img];
    temp.frame = CGRectMake(-70, 10, 60, 40);

    UILabel *channelLabel = [[UILabel alloc] initWithFrame:CGRectMake(50, -5, 80, 60)];
    channelLabel.text = [NSString stringWithFormat:@"%@", [your array objectAtIndex:row]];
    channelLabel.textAlignment = UITextAlignmentLeft;
    channelLabel.backgroundColor = [UIColor clearColor];

    UIView *tmpView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 60)];
    [tmpView insertSubview:temp atIndex:0];
    [tmpView insertSubview:channelLabel atIndex:1];

    return tmpView;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T09:06:27.450

在这里，我以我实现的方式分享整个示例。

请检查`CustomPickerViewController.h`

```
#import <UIKit/UIKit.h>
@interface CustomPickerViewController : UIViewController
<UIPickerViewDataSource , UIPickerViewDelegate>{
        IBOutlet  UIPickerView *picker;
        IBOutlet  UILabel *winLabel;

        NSArray *column1;
        NSArray *column2;
        NSArray *column3;
        NSArray *column4;
        NSArray *column5;
}
@property (nonatomic,retain) UIPickerView *picker;@property (nonatomic,retain) UILabel *winLabel;@property (nonatomic,retain) NSArray *column1;@property (nonatomic,retain) NSArray *column2;@property (nonatomic,retain) NSArray *column3;@property (nonatomic,retain) NSArray *column4;@property (nonatomic,retain) NSArray *column5;
-(IBAction)spin;

CustomPickerViewController.m

-(void)spin
  {
          BOOL win = NO;
          int numInRow = 1;
          int lastVal = -1;
          for(int i = 0; i<5 ;i++)
          {
                  int newValue = random() % [self.column1 count];
                  if(newValue == lastVal)
                          numInRow++ ;
                  else
                          numInRow = 1;
                  lastVal = newValue;
                  [picker selectRow:newValue inComponent:i animated:YES];
                  [picker reloadComponent:i];
                  if(numInRow >= 3)
                          win = YES;
          }

          if(win)
                  winLabel.text = @"WIN!";
          else
                  winLabel.text = @"";
  }
- (void)viewDidLoad {

        UIImage *seven = [UIImage imageNamed:@"seven.png" ];
        UIImage *bar = [UIImage imageNamed:@"bar.png" ];
        UIImage *crown = [UIImage imageNamed:@"crown.png" ];
        UIImage *cherry = [UIImage imageNamed:@"cherry.png" ];
        UIImage *lemon = [UIImage imageNamed:@"lemon.png" ];
        UIImage *apple = [UIImage imageNamed:@"apple.png"];

for(int i =1; i<=5; i++)
{
  UIImageView *sevenView = [[UIImageView alloc] initWithImage:seven];
  UIImageView *barView = [[UIImageView alloc] initWithImage:bar];
  UIImageView *crownView = [[UIImageView alloc] initWithImage:crown];
  UIImageView *cherryView = [[UIImageView alloc] initWithImage:cherry];
  UIImageView *lemonView = [[UIImageView alloc] initWithImage:lemon];
  UIImageView *appleView = [[UIImageView alloc] initWithImage:apple];

        NSArray *imageViewArray = [[NSArray alloc] initWithObjects:
        sevenView,barView, crownView,cherryView,lemonView,appleView,nil];

        NSString *fieldName = [[NSString alloc] initWithFormat:@"column%d",i];
        [self setValue:imageViewArray forKey:fieldName];
        [fieldName release];
        [imageViewArray release];

        [sevenView release];
        [barView release];
        [crownView release];
        [cherryView release];
        [lemonView release];
        [appleView release];
   }
        srandom(time(NULL));}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 5;}

-(NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component{
        return [self.column1 count];}

-(UIView *)pickerView:(UIPickerView *)pickerView
    viewForRow:(NSInteger)row
        forComponent:(NSInteger)component reusingView:(UIView *)view{
        NSString *arrayName = [[NSString alloc]initWithFormat:@"column%d",component+1];
        NSArray *array = [self valueForKey:arrayName];
        return [array objectAtIndex:row];} 
```

以这种方式实施。这段代码对我来说很好。请检查并告诉我没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T07:30:33.160

代替

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

您可以使用以下数据源方法在行中添加自定义对象 第 1 步：创建 UIImageView 对象 第 2 步：为其分配适当的图标图像 第 3 步：返回您的 UIImageView 对象

```
- (UIView *)viewForRow:(NSInteger)row forComponent:(NSInteger)component
{
    UIImageView *myIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myIconName"]];
    [myIcon setFrame:CGRectMake(0, 0, 50, 50)];
    return myIcon;
} 
```

# audio - 如何计算声卡时钟漂移？

> ID：15727333
> 
> 赞同：2
> 
> 时间：2013-03-31T07:22:09.570
> 
> 标签：audio, soundcard, drift, echo-cancellation

由于声学回声消除的原因，我正在计算声卡漂移。我的算法是：

```
drift = samples_played - sampled_recorded 
```

其中，当 320、640 或 1920 字节的音频帧发送到播放设备时，*samples_played* 加 1；当捕获设备输出 320、640 或 1920 字节的音频帧时，*samples_recorded* 加 1 .

WebRTC 提供了对我要完成的工作的描述，如下所示：

**WebRtc_Word16 skew 在声卡上播放和录制的样本数之间的差异（用于时钟偏差补偿）。**

我的问题分为两部分：

1.  算法正确吗？
2.  增量是否正确？

# mysql - 如何找到在同一天创建的元素

> ID：15727336
> 
> 赞同：3
> 
> 时间：2013-03-31T07:22:33.080
> 
> 标签：mysql, sql, select

我有一个带有 ID 和 DATETIME 的表，它存储元素的创建日期。我想查找在同一天创建的元素。例如，为了澄清，假设我有他的桌子：

```
 ID       CREATED_DATE
|------|---------------------|
|  0   | 2013-02-03 20:49:06 |
|  1   | 2013-02-03 20:50:18 |
|  2   | 2013-02-04 07:13:03 |
|  3   | 2013-02-05 12:09:09 |
|  4   | 2013-02-05 23:37:32 |
| ...  | ...                 | 
```

我想找到`(0, 1)`创建的`2013-02-03`和`(3, 4)`打开的`2013-02-05`等等...
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:24:00.220

您可以使用`DATE()`仅从日期时间字段中获取日期。

```
SELECT  DATE(CREATED_DATE) DATE, GROUP_CONCAT(ID) IDList
FROM    TableName
GROUP   BY DATE(CREATED_DATE) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9366e9/1)
*   [SQLFiddle 演示（*使用 DATE_FORMAT*）](http://www.sqlfiddle.com/#!2/9366e9/3)

或者，如果您只想过滤出创建了多个 ID 的日期，请添加`HAVING`查询，

```
SELECT  DATE(CREATED_DATE) DATE, GROUP_CONCAT(ID) IDList
FROM    TableName
GROUP   BY DATE(CREATED_DATE)
HAVING  COUNT(*) > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9366e9/2)
*   [SQLFiddle 演示（*使用 DATE_FORMAT*）](http://www.sqlfiddle.com/#!2/9366e9/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:29:12.993

```
SELECT * FROM table WHERE DATE(CREATED_DATE) = '2013-02-03' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:33:57.467

用这个。简单 - 日期就像字符串，所以：

```
SELECT * FROM table WHERE CREATED_DATE = '2013-02-03' 
```

# vb.net - 在VB.net中动态更改水晶报表的文本对象值

> ID：15727339
> 
> 赞同：0
> 
> 时间：2013-03-31T07:23:00.763
> 
> 标签：vb.net, parameters, crystal-reports

我有我当前格式的水晶报告的这张照片。 ![在此处输入图像描述](https://i.stack.imgur.com/Dykp4.png)

我的问题是，我想`fullName`根据我的 vb.net 表单的查询结果动态设置字段的值。例如，我的 vb 表单中有这段代码，

```
sql = "SELECT fullName FROM tblClient WHERE clientID = '" & ST-TAC-23 & "'"
da = new SqlDataAdapter (sql, con)
dt = new DataTable
da.fill(dt) 
```

我希望将`dt`值传递给`fullName`我的水晶报表中的对象。例如`dt`值是 Mark Zucker，我希望`fullName`我的 cr 中的字段也显示 Mark Zucker。怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T10:37:14.417

我已经找到了解决这个问题的最佳技巧。这就是我修复它的方法。

如果`load`是表单（用于水晶报表查看器的表单），我编写了这行代码，

```
Dim fName As TextObject
fName = rptDoc.ReportDefinition.ReportObjects("crFullName")
' display the value for the report
fName.Text = frmAccInventory.lblName.Text 
```

其中“crFullName”是`text object`水晶报表的名称。`rptDoc`在 frmAccInventory 中声明为新的 crystalReport1（水晶报告文件的名称）

归功于[http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/daa7e60d-a444-449d-9ac2-a57415217bbc/的 Mikaykay](http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/daa7e60d-a444-449d-9ac2-a57415217bbc/)

# iphone - 使用openGL和cocos2D绘制大量线条的最佳方法是什么？

> ID：15727344
> 
> 赞同：2
> 
> 时间：2013-03-31T07:23:45.527
> 
> 标签：iphone, ios, objective-c, opengl-es, cocos2d-iphone

我有一系列 2d 顶点代表用于绘制网格的线。大约有 900 条线段要绘制（网格使用弹簧物理来扭曲，这就是为什么我不只为每一行和每一列画一条线）。cocos2D 内置了一个 ccDrawLine 函数，可以很好地绘制，但我认为这可能效率低下，因为它为每个线段调用 glDrawArrays。如何高效地绘制大量线段？作为奖励，请推荐使用 openGL 的良好 2D 绘图实践的来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T07:57:39.217

OpenGL 中的高效绘图意味着发送最少的信息和尽可能少的信息批次。与所有事情一样，这取决于情况，您应该尝试各种事情并针对您的情况进行基准测试。但根据*经验*，最有效的方法（如果顶点是静止的）是将顶点存储在卡上一次（在缓冲区中）并渲染多次，其次最好（当它有意义时）是使用几何着色器生成卡上最多的顶点，次优是一次发送所有顶点，次优是批量发送，最后最坏的是一次发送一个。

900 确实不是很多，而且听起来缓冲区或着色器在这种情况下没有意义。

要批量发送，您需要将顶点放入顺序内存中，例如：

```
float coords[] = { 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0 }; 
```

（即 x1、y1、x2、y2 等。您可能想要 malloc 一些内存，以便它可以是可变长度）

然后你把它发送到 OpenGL 并渲染它：

```
glVertexPointer( 2, GL_FLOAT, 0, coords ); // 2 = dimensions
glDrawArrays( GL_LINES, 0, 4 ); // 4 = number of points, => 2 lines 
```

`GL_LINES`将从 1 到 2、3 到 4 等画一条线。还有很多其他选项。记忆力可以稍微宽松一点；如果需要，请查看`stride`参数（上面的 0）。这是文档：

[http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml)

[http://www.opengl.org/sdk/docs/man2/xhtml/glDrawArrays.xml](http://www.opengl.org/sdk/docs/man2/xhtml/glDrawArrays.xml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T08:34:43.277

Cocos2d 2.0 有[CCDrawNode](http://www.learn-cocos2d.com/api-ref/KoboldTouch/6.0/cocos2d-iphone/html/interface_c_c_draw_node.html)批量绘制图元（线、圆、..）。

# ruby - 获取 ruby 版本时出错

> ID：15727350
> 
> 赞同：0
> 
> 时间：2013-03-31T07:24:45.873
> 
> 标签：ruby, linux

我只是执行此命令`sudo ln -sf /usr/bin/ruby /user/bin/ruby1-9`。现在当我不会得到 ruby​​ 版本（`ruby -v`）...错误，ruby 没有安装，你可以通过这个命令安装它`sudo apt-get install ruby`。但是安装了红宝石。如何还原此命令`sudo ln -sf /usr/bin/ruby /user/bin/ruby1-9`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:32:49.497

您可以通过调用简单地删除符号链接`sudo rm /usr/bin/ruby`。您面临的问题是因为您的可执行文件似乎称为 ruby​​1-9。因此，您需要做的就是`ruby1-9 -v`在需要 ruby​​ 的任何地方键入并使用 ruby​​1-9。

# python - 在 emacs 中，如何使用自定义参数执行当前编辑的 python 脚本？

> ID：15727351
> 
> 赞同：2
> 
> 时间：2013-03-31T07:24:58.277
> 
> 标签：python, emacs, ide

我`python.el`用于编辑 python 脚本。当我编写一个稍后打算作为命令行命令的脚本时，我很自然地希望使用示例参数来测试脚本。

我尝试使用`C-c C-c`( `python-send-buffer`) 来执行当前编辑的脚本，只要我不想将参数传递给脚本，它就可以完美地工作。

为了*使用*参数测试脚本，我现在保存脚本（“myscript.py”）切换到 shell 并运行

```
python myscript.py arg1 arg2 arg3 
```

有没有更好的集成方式来做到这一点？我当然不想修改这个测试的脚本，但我想找到一种方法来调用带有所需参数的脚本。显然`python-send-buffer`不能完成这项工作，因为它在一个已经存在的 python 进程中执行一个文件，所以我不能向它传递新的参数。

如果只有一个变量（例如`python-args-for-script`），那就太好了，我可以通过 emacs 文件变量机制在我的 python 脚本的末尾设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:47:40.920

In the Python code, append the desired arguments you need to the `sys.argv` list before calling `python-send-buffer`.

> ID：15727353
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# algorithm - 获取一组二维点的周长

> ID：15727355
> 
> 赞同：4
> 
> 时间：2013-03-31T07:25:45.067
> 
> 标签：algorithm, computational-geometry, convex-hull

我有一组二维点（ x 和 y 的坐标），现在我需要丢弃所有对我没有意义的点，我的意思是我只对这个点的区域感兴趣正在追踪。

简而言之，这

![在此处输入图像描述](https://i.stack.imgur.com/4lI4B.png)

它应该产生这个

![在此处输入图像描述](https://i.stack.imgur.com/WfjtL.png)

问题：什么算法可以在这个点上做这种过滤？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T07:31:20.760

您可以使用[Graham Scan](http://en.wikipedia.org/wiki/Graham_scan)计算给定点的凸包。一旦你有了凸包上的所有点，你就可以消除其他点。

还有[其他算法](http://en.wikipedia.org/wiki/Convex_hull_algorithms)用于计算凸包，但格雷厄姆扫描很容易实现并且是 O(n logn)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T07:30:11.703

我相信您正在寻找[凸包](http://en.wikipedia.org/wiki/Convex_hull)算法。我个人使用[格雷厄姆扫描](http://en.wikipedia.org/wiki/Graham_scan)算法来实现凸包，因为它具有非常好的复杂性`O(n*log(n))`并且相对容易实现。

# maven - Intellij idea 无法解决 maven 中的任何问题

> ID：15727356
> 
> 赞同：151
> 
> 时间：2013-03-31T07:26:14.953
> 
> 标签：maven, intellij-idea, maven-3

我是 Intellij Idea 的新手，我只是用 导入了一个项目`pom.xml`，但 ide 没有解决 maven 依赖项中的任何问题。

在代码中导入时在依赖项中定义的任何内容都会`pom.xml`引发错误`cannot resolve symbol xxxxx`

但是`mvn install`会起作用，我尝试`Project Settings/Libraries`在`.jar`文件中导入依赖项，然后它可以工作，但是 ide 可以解析定义的库`pom.xml`吗？我不想每次都这样做。

附加信息：

IDEA 版本：12.0.3，操作系统：windows 7，重新导入不起作用，maven 版本：3.0.4，外部库下不存在 maven 依赖项。

在idea.log中没有例外...

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2014-01-08T08:11:20.817

我也遇到过这个问题，idea无法使用maven下载所有依赖的jar包，我只是尝试了以下操作：

```
 mvn -U idea:idea 
```

然后所有依赖的jar包都是从maven仓库下载的

## 请注意，idea 插件已停用

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2013-08-05T17:39:05.873

在 IntelliJ 12.1.4 中，我检查`Settings --> Maven --> Importing`并确保选择了以下内容：

1.  自动导入 Maven 项目
2.  为聚合器项目创建 IDEA 模块
3.  保留源...
4.  排除构建目录...
5.  使用 Maven 输出...
6.  生成的源文件夹：“自动检测”
7.  阶段是......：“流程资源”
8.  自动下载：“来源”和“文档”
9.  ***使用Maven3导入项目***
    *   导入器的 VM 选项：-Xmx512m

这使我从有很多未解决的导入语句到解决所有问题。我认为这里的关键是使用 Maven3 导入项目......希望这会有所帮助。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-09-22T01:29:05.517

我在使用 IntelliJ 14 捆绑的 Maven 3 实例时遇到了这个问题。

我通过以下方式切换到使用我自己的本地 Maven 实例：

`Settings -> Build, Execution, Deployment -> Build Tools -> Maven -> Maven Home Directory`

然后将路径添加到我本地安装的实例。[![在此处输入图像描述](https://i.stack.imgur.com/lh7cS.png)](https://i.stack.imgur.com/lh7cS.png)

这使依赖项神奇地出现。

[![在此处输入图像描述](https://i.stack.imgur.com/5qsDs.png)](https://i.stack.imgur.com/5qsDs.png)

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2014-01-13T14:20:04.663

我也收到此错误，因为项目将主文件夹和测试文件夹作为模块导入。单击项目 --> 按 F4 --> 在模块设置中，删除主文件夹和测试文件夹，然后再次创建项目。问题将得到解决。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-06-24T09:12:49.373

我尝试了几种选择，但这个最终解决了我的问题。我按照 IntelliJ 中的以下步骤**重新导入了项目：**

1.  文件 -> 新建 -> 现有存储库中的项目
2.  从“选择要导入的文件或目录”中选择您的项目

3.  在下一个屏幕中选择“从外部模型导入项目”，然后选择“Maven。

4.  在下一步中，单击复选框“**自动导入 Maven 项目**”，（这解决了我的问题）
5.  如有必要，通过选择配置文件完成

对我来说，重新导入 Maven 项目并没有解决现有项目的问题。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-12-09T15:10:22.980

IntelliJ 更新后也遇到了同样的问题。我的修复：右键单击项目，然后 maven -> 重新导入。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-05-17T14:51:50.057

对我来说，我必须在“设置”>“Maven”>“导入”下选中“自动导入 Maven 项目”框

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-11-22T13:05:30.507

1.  关闭 IntelliJ
2.  打开同一个项目
3.  当项目加载时，在右下角你可以看到一个弹出窗口`non-managed pom.xml file found`，如果你点击它，一个新的弹出窗口会出现，说`add as maven project`，点击它，完成。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-09-28T18:51:50.927

我收到此错误是因为我的项目设置不正确。它已将 main 和 test 文件夹作为模块导入。当我删除 2 个模块（但将它们保留为源和测试文件夹）时，我的代码开始正确编译。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-05T07:03:36.563

我和作者有同样的问题！

为了解决我的问题，我必须添加 Maven 集成插件：文件 | 设置 | 插件

像这样：

![Maven 集成插件](https://i.stack.imgur.com/yJuyL.png)

之后，Intellij 从 pom.xml 文件中下载了所有依赖项。

现在，如果我想创建一个基于 maven 模型的项目，我只需在第一个 Intellij 窗口上选择 Open 并选择 pom.xml 文件：

![在此处输入图像描述](https://i.stack.imgur.com/j9pe3.png)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-09T14:40:56.527

我在 Users/.../.m2/settings.xml 中有空的 settings.xml 文件。当我添加

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd">

</settings> 
```

已加载所有依赖项

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-01-28T08:25:05.813

如果您在 IntelliJ 中导入了 maven 项目并且由于 maven 导入未得到解决而出现错误，这可能是因为您可能正在使用自定义 maven settings.xml。我尝试在 Intellij 默认 maven 设置中覆盖它，但它没有帮助。最后我不得不将它保存在 ~/.m2/settings.xml 中，然后 IntelliJ 终于兑现了它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-11-05T07:30:52.040

在**Settings -> Maven -> Repositories**中，仅显示在我的设置中配置的一些存储库。

**解决方法**

这可能是一个错误（Idea 13.1.5 Ultimate）。它帮助我切换镜子。没有出现在顶部的那个。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-09-15T10:05:58.300

使用 intelliJ 16.1.4 我遇到了同样的问题。你应该看看事件日志，因为它告诉我“找到了非托管 pom.xml 文件：...”然后我点击它，问题就解决了。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-10-11T19:20:21.027

在我看来，这个问题的解决方案很多，而且看起来有点像魔术。对我来说，缓存失效、重新导入或其他任何已经提到的东西都不起作用。**唯一有帮助的是（无需重新导入）转到 Maven 设置，取消选中自动导入并重新检查它。**

[![在此处输入图像描述](https://i.stack.imgur.com/fxBOG.png)](https://i.stack.imgur.com/fxBOG.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-02-10T22:16:12.613

就我而言，我展开右侧的 maven 项目面板，单击 + 并添加项目。然后它起作用了。

![](https://i.stack.imgur.com/GC6wt.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-31T07:54:16.770

如果您在 pom.xml 中有任何特定于您的组织的依赖项，那么您需要为您的项目更新 setting.xml 的路径，该路径默认设置为您在 Ubuntu 中的用户目录：/home/user/.m2/settings.xml - > （将其更改为您的 apache-maven conf 路径）

[![更新 Setting.xml 文件 Intellij](https://i.stack.imgur.com/VFkbe.png)](https://i.stack.imgur.com/VFkbe.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-15T09:27:22.743

为了解决这个问题，我必须转到构建、执行、部署 -> 构建工具 -> Maven -> 导入并将 JDK 设置为导入到 JAVA_HOME！然后从 maven 设置中重新加载所有 maven 项目。现在所有导入都可以使用！！

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-03-09T08:10:39.717

经过长时间的反复试验，从忽略列表中取消选中 pom.xml 对我有用。

[![在此处输入图像描述](https://i.stack.imgur.com/e98AF.png)](https://i.stack.imgur.com/e98AF.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-05-19T06:19:03.363

**3 个简单步骤：IntelliJ 14：**

1.  文件>设置>构建、执行、部署>构建工具

2.  选择 Maven

3.  Maven 主目录：C:/Program Files/apache-maven-3.3.3（您的等效位置）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-04-12T08:36:05.097

请记住，**IntelliJ 会将本地 Maven 安装的类添加到其自己的 classpath**中，因此请保持最新。

就我而言，IntelliJ 试图调用 method `org.eclipse.aether.util.ConfigUtils.getFloat()`。这导致了`java.lang.NoSuchMethodError`，因为我多年前的 Maven 版本还没有包含这个方法。由于异常 IntelliJ 停止解析依赖项。

更新 Maven 后，您必须更改“构建、执行、部署”->“Maven”中的“Maven 主目录”设置。之后你必须重启 IntelliJ，因为 IntelliJ 的 JVM 的类路径在运行时不会改变。

我花了一些时间来解决这个问题，因为我没想到 IntelliJ 会使用我本地 Maven 安装的类。我认为它使用自己捆绑的 JAR。所以希望这些信息对其他人有帮助。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-08-15T07:34:16.560

`<option name="workOffline" value="true" />`in`workspace.xml`不是你的朋友。建议在删除之前检查一下`.idea`（其中有很多你可能不想丢失的有用设置）

这是一个行家`workspace.xml`设置

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-01-16T14:20:27.750

捆绑的 Maven 版本存在问题。正如之前有人建议的那样，我切换到自己的 Maven 安装和依赖项神奇地工作（IntelliJ 2018.3）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-02-27T11:29:25.300

在将`<dependency>...</dependency>`元素添加到`<profile>`. 我刚刚发现，如果我将未解析的依赖元素添加（插入）到`<dependencies>`元素中，则依赖关系将从 maven 存储库中下载；然后我可以从依赖项元素中删除依赖项元素。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-05-31T09:47:35.723

使用默认的 maven（IntelliJ 附带）也可能会产生这个问题。所以配置你已经安装的maven。

这可以通过以下方式完成：文件 -> 设置 -> 构建、执行、部署 -> Maven

根据您的 Maven 安装更新以下设置：

1.  Maven 主目录 =
2.  用户设置文件 =
3.  本地存储库 =

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-08-21T13:01:55.570

好吧，我几天来一直面临这个问题。正在尝试导入 POI 库和 Simple JSON 库，我尝试了所有建议的答案和解决方案，但没有任何效果。最后，我的案例的解决方案非常简单

在将依赖项放入我的 POM 文件后，我只需将以下内容添加到我的 module-info.java 文件中：

```
 requires poi.ooxml;
 requires poi;
 requires json.simple; 
```

所以我认为因为我的项目位于模块中的包中，所以我必须这样做才能让系统知道将使用这些导入的库。如此简单，将库名称放在你的 module-info.java 文件中的 require 之后

希望对你有帮助

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-11-01T13:35:40.170

转到外部库并在单击重新导入所有项目后删除所有显示为 root 的库

[![在此处输入图像描述](https://i.stack.imgur.com/JOJcA.png)](https://i.stack.imgur.com/JOJcA.png)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-08-18T18:46:50.057

我尝试了该线程中的所有其他建议，但没有任何效果 - 但是我[从 Jetbrains 站点找到了这个线程](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360003445760-Intellij-not-resolving-maven-dependencies)，他们的解决方案确实对我有用。我希望它也对你们中的一些人有所帮助。具体来说，这个建议有效：

*   关闭 IDE
*   删除 /Users/yourname/Library/Caches/IntelliJIdeaXXX/ 目录（无论您的版本是什么）
*   启动 IDE 并从头开始重新导入项目作为 Maven 项目

对我来说就像一个魅力，祝你好运！：海浪：

顺便说一句，我在 Mac 上使用 IntelliJ IDEA Ultimate 2020.2。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-08-24T06:11:50.827

试试下面分享的maven命令吧！

```
mvn idea:idea 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-09-16T16:42:13.437

不幸的是，我遇到了同样的问题，我很困惑为什么会这样。我几乎尝试了此页面上的所有内容，但没有一个对我有用。

所以，我试图找到这个问题的根源；问题是（至少对我来说）我试图打开一个 maven 项目但没有识别出 pom 文件。所以右键单击 pom 文件并选择“添加为 maven 项目”，然后右键单击项目 -> Maven -> 重新导入为我做了所有的魔法:)

希望这对某人有帮助。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-03-04T11:45:20.230

如果没有任何效果，那么您可以删除 .idea 目录并重新导入项目:)

# javascript - 动画不适用于不同的 HTML 标记

> ID：15727358
> 
> 赞同：2
> 
> 时间：2013-03-31T07:27:02.600
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一个正在工作的 jQueryMobile HTML 标记，但是当我尝试使它与我将使用的不同 HTML 标记一起工作时，动画不起作用，我尝试使用不同的 jQuery 方法和函数来使其工作。似乎没有任何工作。

工作示例[http://jsfiddle.net/yVtVe/22/](http://jsfiddle.net/yVtVe/22/)

需要为[http://jsfiddle.net/yVtVE/25/实现相同的](http://jsfiddle.net/yVtVE/25/)

```
childrenvar stopAnim = false;
function animateTitle(scrollingWidth, initialOffset,elem){
    if(!stopAnim ){  
    var $a = elem;
    $a.animate({left: (($a.offset().left == (scrollingWidth + initialOffset ))?-initialOffset:("-="+scrollingWidth))}, 
       { 
            duration: 5000, 
            easing: 'swing',
            complete: function(){
                if($a.offset().left < 0){
                    $(this).css("left", scrollingWidth);
                }              
                animateTitle(scrollingWidth);
       }    
     });
    }
}
$('#swrapper ul li').hover(
    function () {
       var scrollingWidth = $(this).children('div.list-heading').children('h2').width();
       alert(scrollingWidth);
       var elem = $(this).children('div.list-heading').children('h2');
       if(scrollingWidth > 330){
       scrollingWidth = scrollingWidth + 10;
       var initialOffset = $(this).children('div.list-heading').children('h2').offset().left;
       stopAnim = false;
       animateTitle(scrollingWidth, initialOffset,elem);
       }
    },
    function () {
        stopAnim  = true;        
        $(this).children('div.list-heading').children('h2').stop(true, true).css("left", "0");
    }
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:30:47.500

您的 javascript 中有错误：

```
childrenvar stopAnim = false; 
```

应该

```
childrenvar_stopAnim = false; 
```

我已经删除了 js 错误：http: [//jsfiddle.net/yVtVE/28/](http://jsfiddle.net/yVtVE/28/)

这是您的小提琴的最终工作版本：

[http://jsfiddle.net/yVtVE/54/](http://jsfiddle.net/yVtVE/54/)

我将在这里发布工作 js 代码：

```
var childrenvar, stopAnim = false;

function animateTitle(scrollingWidth, initialOffset, elem) {
    if (!stopAnim) {
        var $a = elem;
        $a.animate({
            left: (($a.offset().left == (scrollingWidth + initialOffset)) ? -initialOffset : ("-=" + scrollingWidth))
        }, {
            duration: 5000,
            easing: 'swing',
            complete: function () {
                if ($a.offset().left < 0) {
                    $(this).css("left", scrollingWidth);
                }
                animateTitle(scrollingWidth);
            }
        });
    }
}
$('#swrapper ul li').hover(

function () {
    var scrollingWidth = $(this).select('div.list-heading').children().select('h2').width();
    var elem = $(this).select('div.list-heading').children().select('h2');
    if (scrollingWidth > 330) {
        scrollingWidth = scrollingWidth + 10;
        var offset = $(this).select('div.list-heading').children().select('h2').offset();
        if (offset !== null) {
            var initialOffset = offset.left;
            stopAnim = false;
            animateTitle(scrollingWidth, initialOffset, elem);
        }
    }
},

function () {
    stopAnim = true;
    $(this).select('div.list-heading').children().select('h2').stop(true, true).css("left", "0");
}); 
```

# java - 更新 Facebook 状态问题（Java）

> ID：15727359
> 
> 赞同：1
> 
> 时间：2013-03-31T07:27:36.137
> 
> 标签：java, facebook, facebook-java-api

我正在尝试简单的程序来更新 FB 状态，但它给了我错误，这就是我正在尝试的...

```
public class SendtoFacebook {

public static void main(String a[]) throws FacebookException {

    SendtoFacebook sfb = new SendtoFacebook();
    sfb.send("From My App: Rohan's App");
}

public void send(String message) throws FacebookException {

    String FB_APP_API_KEY = new String("461632878708096");
    String FB_APP_SECRET = new String("5513aa2b99879879897ff0fa5a7a");
    String FB_SESSION_KEY = "";
    FacebookJsonRestClient facebook = new FacebookJsonRestClient(FB_APP_API_KEY, FB_APP_SECRET);

    //FacebookJsonRestClient facebookClient2 = (FacebookJsonRestClient)facebook.getFacebookRestClient();
    FacebookJsonRestClient facebookClient = (FacebookJsonRestClient) facebook;
    facebookClient.stream_publish(message, null, null, null, null);

    System.out.println("successfully updated");

} 
```

}

我得到这个错误_线程“主”com.google.code.facebookapi.FacebookException中的异常：com.google.google.code.facebookapi.JsonHelper.parseCallResult（JsonHelper.java:59）需要参数uid或会话密钥。 .code.facebookapi.ExtensibleClient.extractString(ExtensibleClient.java:2296) 在 com.google.code.facebookapi.ExtensibleClient.stream_publish(ExtensibleClient.java:2150) 在 com.google.code.facebookapi.SpecificReturnTypeAdapter.stream_publish(SpecificReturnTypeAdapter.java :503) 在 socialdemo.SendtoFacebook.send(SendtoFacebook.java:31) 在 socialdemo.SendtoFacebook.main(SendtoFacebook.java:19)

有小伙伴知道这个吗？plz ..谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:40:35.717

Facebook API 需要会话密钥。当我需要这样的密钥时，我会转到[此链接](https://developers.facebook.com/tools/explorer)，单击“获取访问令牌”，从列表中选择所需的身份验证，然后在我的程序中使用生成的会话密钥。它会在一天左右后过期，在这种情况下我会重新生成一个。

希望有帮助。

问候，

萨利尔

# python - 如何将数字字典键（形式参数**名称）传递给 python 函数？

> ID：15727368
> 
> 赞同：0
> 
> 时间：2013-03-31T07:30:00.937
> 
> 标签：python

调用此函数时出现错误`SyntaxError: keyword can't be an expression`

```
def printAlbum(**albums):
        for year in albums:
                print year, albums[year]

printAlbum(2002='by the way', 1999='californication', 2006 = 'stadium arcadium') 
```

使用字母键调用该函数没有问题。我尝试在键周围加上引号并将其替换为`=`，`:`但这并没有解决问题。我可以将数字键传递给函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:37:09.323

```
printAlbum(2002='by the way', 1999='californication', 2006 = 'stadium arcadium') 
```

是非法语法，因为关键字必须是有效的标识符。

您必须重写`printAlbum`以获取简单的`dict`：

```
def printAlbum(albums):
    for year, album in albums.items:
        print year, album

printAlbum({2002:'by the way', 1999:'californication', 2006:'stadium arcadium'}) 
```

请注意，让函数的关键字参数被*认为*是非标识符是一个坏主意——在这种情况下，永远不可能只使用关键字参数合法地调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:37:44.153

关键字 args 的键必须是有效的 python 标识符，例如不能以数字开头。

相反，传递一个字典：

```
def printAlbum(albums):
        for year in albums:
                print year, albums[year]

printAlbum(
{ 2002: 'by the way', 1999: 'californication', 2006:'stadium arcadium'}
) 
```

# python - 从python中的列表中删除空格

> ID：15727371
> 
> 赞同：-1
> 
> 时间：2013-03-31T07:30:28.753
> 
> 标签：python, list, spaces

我目前正在用python制作一个密码程序，但我似乎无法解决这个问题：

```
word = ['a', 'b', 'c']
-----enciphering process-------
message = ['d', 'e', 'f']

print message[x], 
```

我想要发生的事情：

```
'def' 
```

实际发生的情况：

```
'd e f' 
```

我知道为什么会有空格，但我似乎无法摆脱它们，我尝试过使用 strip、replace、re.sub、message（映射我不记得的任何内容）和 "".join。这些都使用预先确定的列表，但当我不知道列表将是什么时，它们就不行了。

请帮忙。

*编辑

我的意思是这样的：

```
Word = raw_input("Enter a word  ")
Message = list(word)

w = raw_input("Enter a number  ")
w = int(w)
n = len(message)

Letters = ['a', 'b', 'c', 'd' and so on until z]

For y in range(0,n):

   For index in range(0,26):

      X = index + w

      If x > 25:
         x = x - 26

      If message[y] == letters[index]:
         print letters[x], 
```

不知道如何摆脱空格，因为我不知道信息会是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T07:34:43.733

`print message[x],`打印字符，然后是一个空格（从技术上讲，一个“虚拟”空间，被下一条语句`message[x]`变成一个空格）。`print`如果你在循环中调用它，你会得到`d e f`.

相反，`print ''.join(message)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:39:46.723

很难说什么不适合你。这是它在交互式 python 中的外观：

```
>>> message = ['d', 'e', 'f']
>>> print message
['d', 'e', 'f']
>>> print "".join(message)
def
>>> import sys
>>> sys.stdout.writelines(message)
def>>> 
```

以语句开头的`>>>`行，其他行输出。最后一行`def`没有换行符，后面是`>>>`输入提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:27:16.607

快速回答是

```
import sys
# ...
sys.stdout.write(letters[x]) 
```

但是你的代码结构有问题

您想对消息进行编码，例如，您应该将编码功能应用于该消息

```
word="Hello"
encoded=''.join(map(lambda i: chr(ord(i) ^ 13), word))
print encoded 
```

# android - 自定义卸载菜单android

> ID：15727379
> 
> 赞同：2
> 
> 时间：2013-03-31T07:31:53.277
> 
> 标签：android

我有一个与安全相关的安卓应用。

我需要在卸载之前验证用户。IE; 如果有人试图卸载我的应用程序，它会弹出一个窗口并读取一些密码/ID 或其他内容，如果它的有效卸载继续进行，否则不会。

我有root权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:11:04.410

这违反了安卓生态系统的规则。应该允许所有用户卸载他们的应用程序。

实现它的唯一方法是将您的应用程序安装为系统应用程序，除非他们有根设备，否则他们将无法卸载该应用程序。

不推荐的另一种方法是监视日志（API 16 及更高版本不支持，但如果您有 root 权限则可能）并在您发现用户已到达应用程序卸载对话框时执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:05:36.937

在没有固件修改的情况下，这在 Android 上是不可能的。

充其量，您可以让用户将您的应用设置为设备管理员，这将阻止它被卸载，直到从设备管理员中删除。

或者，由于您有 root，您可以扫描 logcat 以获取类似以下内容的消息（确切的措辞可能因设备而异）：

```
Starting activity: Intent { act=android.intent.action.DELETE dat=package:your.package cmp=com.android.packageinstaller/.UninstallerActivity } 
```

收到此消息后，启动需要密码才能解除的弹出 Activity。

# templates - Cherrypy：我应该在哪里保存我的模板

> ID：15727383
> 
> 赞同：1
> 
> 时间：2013-03-31T07:32:41.843
> 
> 标签：templates, python-3.x, cherrypy

我正在尝试使用 jinja2 作为cherrypy 的模板库。我无法弄清楚我应该将模板文件保存在哪里。

我使用它的方式如下所述：http: [//docs.cherrypy.org/stable/progguide/choosingtemplate.html#id2](http://docs.cherrypy.org/stable/progguide/choosingtemplate.html#id2)

我们可以在配置文件中指明路径吗？如果是，应该将配置放在哪个键下？还是相对于调用应用程序（带有快速启动调用的文件）的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:04:38.460

CherryPy 不会告诉您将模板放在哪里，但您可以将位置添加到配置文件（在您喜欢的任何标题下）并手动将其提供给 FileSystemLoader。

如果您按照链接到的指南进行操作，则您的模板应位于运行服务器的目录中的“模板”文件夹中。

（注意我用的是pystache，不是Jinja，但原理是一样的）

# google-app-engine - 使用亚马逊网络服务作为谷歌应用引擎后端

> ID：15727392
> 
> 赞同：7
> 
> 时间：2013-03-31T07:34:29.507
> 
> 标签：google-app-engine, amazon-web-services, backend

我目前正在使用谷歌应用引擎作为我的移动应用程序后端。我有一些在 gae 环境下无法执行的任务（主要是使用 opencv 进行图像识别）。我的目的是保留 gae 并使用 AWS 来执行这些特定任务。

有没有一种简单的方法可以将特定任务从 gae 传递到 AWS？例如任务队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:30:07.113

您可以将任务从 GAE 推送到 AWS，或者让您的 AWS 实例从 GAE 中提取任务。

如果您将任务从 GAE 推送到 AWS，您可以使用[`URLFetch`](https://developers.google.com/appengine/docs/java/urlfetch/overview)将您的数据推送到您的 AWS 实例。

如果您希望让您的 AWS 实例从 GAE 中提取任务，您可以让您的 GAE 实例将它们的任务放在 GAE[`Pull Queue`](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull)中，然后让您的 AWS 实例使用[`Task Queue REST API`](https://developers.google.com/appengine/docs/java/taskqueue/rest/)来从队列中租用任务。

在任何一种情况下，AWS 实例都可以通过简单的 POST 请求向您的 GAE servlet 报告处理结果，或者通过上述插入任务，这些任务`REST API`稍后将由您的 GAE 实例租用。如果您想控制 GAE 应用程序处理结果的速率，后者可能很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:33:59.167

免责声明：我是 AppScale 项目的首席开发人员。

您可以采用的一种方法是使用[AppScale——](http://www.appscale.com/)它是在 Amazon EC2（以及其他云）上运行的 App Engine API 的开源实现。由于它是开源的，您可以更改我们随附的 AppServer 以启用 OpenCV。这将要求您在 AWS 中运行您的 App Engine 应用程序，但您可以发挥创意并让您的应用程序副本与 Google 一起运行，并让它仅在您需要时向您在 AWS 中运行的应用程序版本发送任务队列请求使用 OpenCV 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T09:40:27.560

当然。AppEngine 有一个[任务队列](https://developers.google.com/appengine/docs/java/taskqueue/overview-push)，您可以通过简单地实现[DeferredTask](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/DeferredTask)将任务放入其中。在该任务中，您可以向 AWS[发出请求。](https://developers.google.com/appengine/docs/java/urlfetch/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T08:01:34.097

您是否考虑过使用亚马逊简单的队列服务？ [http://aws.amazon.com/sqs/](http://aws.amazon.com/sqs/)

您应该能够使用标准的 http clint 从 gae 将项目添加到队列中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-20T18:53:07.853

您打算在 GAE 中保留应用程序并使用 AWS 执行一些无法在 GAE 中执行的任务，这对我来说似乎是一个正确的方案。

我想分享一些想法以及一些资源来回答您问题的主要部分：

> 有没有一种简单的方法可以将特定任务从 gae 传递到 AWS？例如任务队列？

如果您需要 GAE 和 AWS 一直 (24/7) 执行任务，那么您的应用程序肯定会依赖批处理计划或任务队列。它们由 GAE 提供。

但是，如果您可以安排在 GAE 中提取任务并由 AWG 以间隔为基础执行（例如每天两次，每次少于一小时），您可能不需要使用它们，只要您可以管理 GAE[将数据放在谷歌云存储 (GCS) 作为公共](https://stackoverflow.com/a/29395746/4058484).

对于这种情况，您需要为[*开/关计划*](https://stackoverflow.com/a/38408077/4058484)设置 AWS EC2 实例，并让实例[*使用 cloud-init 运行启动脚本*](https://stackoverflow.com/a/38476752/4058484)，以通过指向 GCS (c.storage.googleapis.com) 的域收集数据，例如所以：

```
wget -q --read-timeout=0.0 --waitretry=5 --tries=400 \\
--background http://your.domain.com/yourfile?q=XXX... 
```

通过从 GCS 获取数据，AWS 可以执行这些特定任务。让它启动 GAE 以清理数据并将结果放回 GCS 以准备用作您的移动应用程序后端。

以下是一些需要考虑的选项：

*   您应该注意，并非所有 EC2 类型都适用于开/关计划。如果您想为开/关计划设置 AWS EC2 实例，我建议使用[*EC2-VPC/EBS*](https://stackoverflow.com/a/38235022/4058484)
*   *[如果您可以将AWS Lambda](https://stackoverflow.com/a/38371889/4058484)*设置为在没有 EC2 的情况下执行任务，您可能不需要设置EC2。成本更便宜，每天运行两次的任务通常不到 3 秒，内存消耗高达 128MB，通常成本不到 0.0004 美元/月
*   作为在 GAE 中重新安排您的应用程序并设置 AWG 执行某些任务的结果，它最终可能会提高您的计费率，请尝试[优化 GAE 中的实例类](https://stackoverflow.com/a/26654430/4058484)。

# php - 可以将 PHP 全局变量设置为指针吗？

> ID：15727394
> 
> 赞同：6
> 
> 时间：2013-03-31T07:35:04.270
> 
> 标签：php, pointers, global

为什么 PHP 不能将指向的值保留为全局变量？

```
<?php
   $a = array();
   $a[] = 'works';
   function myfunc () {
      global $a, $b ,$c;
      $b = $a[0];
      $c = &$a[0];
   }
   myfunc();
   echo '  $b '.$b; //works
   echo ', $c '.$c; //fails
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:48:37.843

来自[PHP 手册](http://www.php.net/manual/en/language.references.whatdo.php)：

> 警告
> 
> 如果您将引用分配给在函数内声明为全局的变量，则该引用将仅在函数内可见。您可以通过使用 $GLOBALS 数组来避免这种情况。

...

> 想想全局 $var; 作为 $var =& $GLOBALS['var']; 的快捷方式。因此，为 $var 分配另一个引用只会更改局部变量的引用。

```
<?php
$a=array();
$a[]='works';
function myfunc () {
global $a, $b ,$c;
$b= $a[0];
$c=&$a[0];
$GLOBALS['d'] = &$a[0];
}
myfunc();
echo '  $b '.$b."<br>"; //works
echo ', $c '.$c."<br>"; //fails
echo ', $d '.$d."<br>"; //works
?> 
```

有关更多信息，请参阅： [哪些引用不是](http://www.php.net/manual/en/language.references.arent.php)和[返回引用](http://www.php.net/manual/en/language.references.return.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:50:01.940

PHP 不使用指针。该手册解释了确切的引用是什么，做什么和不做什么。您的示例在此处专门解决： [http](http://www.php.net/manual/en/language.references.whatdo.php) ://www.php.net/manual/en/language.references.whatdo.php 要实现您想要做的事情，您必须求助于 $GLOBALS 数组，就像这样，如手册解释：

```
<?php
$a=array();
$a[]='works';
function myfunc () {
global $a, $b ,$c;
$b= $a[0];
$GLOBALS["c"] = &$a[0];
}
myfunc();
echo '  $b '.$b; //works
echo ', $c '.$c; //works
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T07:55:05.397

在 myfunc() 中，您使用全局 $a、$b、$c。

然后你分配 $c =& $a[0]

该引用仅在 myfunc() 中可见。

来源： [http ://www.php.net/manual/en/language.references.whatdo.php](http://www.php.net/manual/en/language.references.whatdo.php)

“将全局 $var; 视为 $var =& $GLOBALS['var']; 的快捷方式。因此，为 $var 分配另一个引用只会更改局部变量的引用。”

# javascript - 引导选择插件不起作用

> ID：15727401
> 
> 赞同：4
> 
> 时间：2013-03-31T07:36:00.990
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试使用[此 Bootstrap-Select Plugin](http://silviomoreto.github.com/bootstrap-select/)。我也根据演示创建了一个小提琴，

[http://jsbin.com/anepet/1/edit](http://jsbin.com/anepet/1/edit)

但我完全空白，不明白为什么这不起作用，选择列表的外观没有改变，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T07:39:45.410

也许添加调用以使所有`.selectpicker`元素成为选择器？看到这里，你几乎会撞到你的头。在选择插件页面的源代码中，您将看到无数次演示使用 css 选择器来调用`.selectpicker()`元素。

```
<script type="text/javascript">
    $('.selectpicker').selectpicker();
</script> 
```

请参见。[http://jsbin.com/anepet/3/edit](http://jsbin.com/anepet/3/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T15:15:46.403

您将 js 包含两次，而不是调用`selectpicker()`..

删除这一行： `<script src="http://silviomoreto.github.com/bootstrap-select/javascripts/bootstrap-select.js"></script>`

并添加：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.selectpicker').selectpicker();
    });
</script> 
```

在中`<header>`，它会工作

# mysql - MySql 语句基于中间表中的列进行选择

> ID：15727407
> 
> 赞同：3
> 
> 时间：2013-03-31T07:37:08.437
> 
> 标签：mysql, sql, select, join

在数据库中，我有一个用户名表和一个权限表。我还有一个中间表，可以将用户分配到一个或多个司法管辖区。

**员工表**

*   用户 ID（主键）
*   名
*   姓

记录：

```
+--------+-----------+----------+
| userID | firstName | lastName |
+--------+-----------+----------+
|      6 | John      | Doe      |
|     11 | lisa      | lopez    | 
+--------+-----------+----------+ 
```

**管辖表**

*   jurId（主键）
*   地区

记录：

```
+-------+--------------+
| jurID | jurisdiction |
+-------+--------------+
|     1 | California   |
|     2 | Texas        |
|     3 | Washington   |
|     4 | South Dakota |
|     5 | Alaska       |
|     6 | Ohio         |
+-------+--------------+ 
```

**user_jurisdiction**

*   userID（指向员工用户ID的外键）
*   jurID（指向司法管辖区 jurID 的外键）

记录：

```
 +--------+-------+
    | userID | jurID |
    +--------+-------+
    |      6 |     2 |
    |      6 |     3 |
    |     11 |     2 |
    +--------+-------+ 
```

我已经尝试了几个小时来提出一个 sql 语句，该语句将选择/列出来自“Texas”的所有工作人员。我一直在使用这个 sql 语句的许多争执，但没有成功：

```
SELECT  jurisdictions.jurisdiction,
        employees.firstName
FROM    jurisdictions,
        employees
        INNER JOIN user_jurisdictions
            ON  user_jurisdictions.jurID = jurisdictions.jurID AND 
                user_jurisdictions.userID = employees.userID
WHERE   jurisdictions.jurisdiction = "Texas"; 
```

但我没有成功。什么 sql 语句会得到一个从jurisdictions.jurisdiction = "Texas"; 中涉及的员工列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:39:42.290

您现在正在做的是您正在从表中生产 Catersian 产品：`employees`和`jurisdictions`. 连接的正确语法是显式定义两个表之间的连接类型。

```
SELECT  a.*, c.*
FROM    employees a
        INNER JOIN user_jurisdiction b
            ON a.userID = b.userID
        INNER JOIN jurisdictions c
            ON b.jurID = c.jurID
WHERE   c.jurisdiction = 'Texas' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0944c/1)

当前查询的输出

```
╔════════╦═══════════╦══════════╦═══════╦══════════════╗
║ USERID ║ FIRSTNAME ║ LASTNAME ║ JURID ║ JURISDICTION ║
╠════════╬═══════════╬══════════╬═══════╬══════════════╣
║      6 ║ John      ║ Doe      ║     2 ║ Texas        ║
║     11 ║ lisa      ║ lopez    ║     2 ║ Texas        ║
╚════════╩═══════════╩══════════╩═══════╩══════════════╝ 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:41:30.207

```
SELECT 
 e.*
FROM 
 jurisdictions j, user_jurisdiction uj, employees e
WHERE
 uj.jurID = j.jurID AND 
 uj.userID = e.userID AND
 j.jurisdiction = 'Texas'; 
```

# python-2.7 - 如何计算 NLTK 中同义词集之间的最大相似度？-Python

> ID：15727409
> 
> 赞同：0
> 
> 时间：2013-03-31T07:37:23.167
> 
> 标签：python-2.7, nltk, wordnet

我必须计算 list1 和 list2 项目之间的同义词集相似度。我只想保留 list1 中单词的最大同义词相似度值。我该怎么做呢？我希望我的输出是

```
apple.n.01, pear.n.01: 0.909090909091
honey.n.01, pear.n.01: 0.333333333333 
```

我的代码

```
>>> from nltk.corpus import wordnet
>>> import itertools as IT
>>> list1 = ["apple", "honey"]
>>> list2 = ["pear", "shell", "movie", "fire", "tree", "candle"]
>>> for word1, word2 in IT.product(list1, list2):
    wordFromList1 = wordnet.synsets(word1)[0]
    wordFromList2 = wordnet.synsets(word2)[0]
    s = wordFromList1.wup_similarity(wordFromList2)
    print('{w1}, {w2}: {s}'.format(w1 = wordFromList1.name,w2 = wordFromList2.name,s = wordFromList1.wup_similarity(wordFromList2)))

apple.n.01, pear.n.01: 0.909090909091
apple.n.01, shell.n.01: 0.4
apple.n.01, movie.n.01: 0.421052631579
apple.n.01, fire.n.01: 0.142857142857
apple.n.01, tree.n.01: 0.380952380952
apple.n.01, candle.n.01: 0.380952380952
honey.n.01, pear.n.01: 0.333333333333
honey.n.01, shell.n.01: 0.210526315789
honey.n.01, movie.n.01: 0.222222222222
honey.n.01, fire.n.01: 0.125
honey.n.01, tree.n.01: 0.2
honey.n.01, candle.n.01: 0.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:01:36.190

尝试这个：

```
from nltk.corpus import wordnet
import itertools as IT
list1 = ["apple", "honey"]
list2 = ["pear", "shell", "movie", "fire", "tree", "candle"]
def f(word1, word2):
    wordFromList1 = wordnet.synsets(word1)[0]
    wordFromList2 = wordnet.synsets(word2)[0]
    s = wordFromList1.wup_similarity(wordFromList2)
    return(wordFromList1.name, wordFromList2.name, wordFromList1.wup_similarity(wordFromList2))

for word1 in list1:
    similarities=(f(word1,word2) for word2 in list2)
    print(max(similarities, key=lambda x: x[2])) 
```

它创建了一个返回单词及其相似性的生成器。然后打印在其第三个元素中具有最大值的元组。

# android - android中ffmpeg中的av_read_frame函数总是返回packet.stream_index为0

> ID：15727410
> 
> 赞同：2
> 
> 时间：2013-03-31T07:37:28.887
> 
> 标签：android, android-ndk, ffmpeg, libavformat

我正在使用下面粘贴的以下标准代码（参考：[http](http://dranger.com/ffmpeg/) ://dranger.com/ffmpeg/ ）在使用 ndk 的 android 中使用 ffmpeg。我的代码使用 gcc 编译器在 ubuntu 10.04 中运行良好。但是我在android中遇到了一个问题。问题`av_read_frame(pFormatCtx, &packet)`总是在返回`packet.stream_index=0`。我已经使用各种 rtsp url 测试了我的代码，并且在所有情况下我都有相同的行为。我没有任何链接或编译问题，因为除了这个问题之外，一切似乎都运行良好。我试图从过去 2 天开始解决这个问题，但我被严重卡住了。请指出我正确的方向。

```
#include <jni.h>
#include <android/log.h>

#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>
#include <libswscale/swscale.h>

#include <stdio.h>
#define DEBUG_TAG "mydebug_ndk"

jint Java_com_example_tut2_MainActivity_myfunc(JNIEnv * env, jobject this,jstring myjurl) {
  AVFormatContext *pFormatCtx = NULL;
  int             i, videoStream;
  AVCodecContext  *pCodecCtx = NULL;
  AVCodec         *pCodec = NULL;
  AVFrame         *pFrame = NULL;
  AVPacket        packet;
  int             frameFinished;

  AVDictionary    *optionsDict = NULL;
  struct SwsContext *sws_ctx = NULL;

  jboolean isCopy;
  const char * mycurl = (*env)->GetStringUTFChars(env, myjurl, &isCopy);
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:p2: [%s]", mycurl);

  // Register all formats and codecs
  av_register_all();
  avformat_network_init();
  // Open video file
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:before_open");

  if(avformat_open_input(&pFormatCtx, mycurl, NULL, NULL)!=0)
      return -1;
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "start: %d\t%d\n",pFormatCtx->raw_packet_buffer_remaining_size,pFormatCtx->max_index_size);

  (*env)->ReleaseStringUTFChars(env, myjurl, mycurl);
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:before_stream");
  // Retrieve stream information
  if(avformat_find_stream_info(pFormatCtx, NULL)<0)
      return -1;
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:after_stream");
  // Find the first video stream
  videoStream=-1;
  for(i=0; i<pFormatCtx->nb_streams; i++)
      if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO) {
        videoStream=i;
        break;
      }
  if(videoStream==-1)
      return -1; // Didn't find a video stream
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:after_videostream");
  // Get a pointer to the codec context for the video stream
  pCodecCtx=pFormatCtx->streams[videoStream]->codec;
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:after_codec_context");

  // Find the decoder for the video stream
  pCodec=avcodec_find_decoder(pCodecCtx->codec_id);
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:after_decoder");

  if(pCodec==NULL)
      return -1;
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:found_decoder");

  // Open codec
  if(avcodec_open2(pCodecCtx, pCodec, &optionsDict)<0)
      return -1;
  // Allocate video frame
  pFrame=avcodec_alloc_frame();
  sws_ctx = sws_getContext(pCodecCtx->width,pCodecCtx->height,pCodecCtx->pix_fmt,pCodecCtx->width,
        pCodecCtx->height,PIX_FMT_YUV420P,SWS_BILINEAR,NULL,NULL,NULL);
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:before_while");

  int count=0;
  while(av_read_frame(pFormatCtx, &packet)>=0) {
        __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "entered while: %d   %d   %d\n", packet.duration,packet.stream_index,packet.size);

      if(packet.stream_index==videoStream) {
          // Decode video frame
          //break;
          avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished,&packet);
          __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:in_while");
          if(frameFinished) {
              __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:gng_out_of_while");
                break;
          }
      }

      // Free the packet that was allocated by av_read_frame
      av_free_packet(&packet);
      if(++count>1000)
         return -2; //infinite while loop
  }
  __android_log_print(ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:after_while");

  // Free the YUV frame
  av_free(pFrame);
  // Close the codec
  avcodec_close(pCodecCtx);
  // Close the video file
  avformat_close_input(&pFormatCtx);

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:45:37.457

我也有同样的问题。经过我的测试，我发现了我的错误，希望可以帮助你。

我的 av_read_frame() 也总是返回流索引 0 的 av_pkg；

***问题是：我混合了两个版本的 ffmpeg 库。***

之前，我安装的是 0.9.x 的 ffmpeg 现在，我安装的是 1.2 的 ffmpeg

这些库的版本不同。我使用了 0.9.x 的一些库和 1.2 的其他库。所以...发生错误。

我解决方案：

卸载所有版本的 ffmpeg ，然后重新安装一个版本的 ffmpeg(me->1.2)。av_read_frame() 正确。:)

# python - 在 Python 中创建物理系统的交互式动画

> ID：15727416
> 
> 赞同：2
> 
> 时间：2013-03-31T07:38:15.790
> 
> 标签：python, reference, matplotlib, plot, interactive

我目前正在研究 Python，来自 Mathematica/Matlab/C。我想学习如何在 Python 的[matplotlib库中创建](http://matplotlib.org/)**交互式绘图**（或更好的*动画*），并可能使用 Tkinter 或 PyQt 将它们集成到 GUI 中。网上有很好的例子可以显示最终结果，例如[这个](http://hardsoftlucid.wordpress.com/various-stuff/realtime-plotting/#respond)。

但是，我的**问题**是：是否有任何**结构良好的教程**或**书籍**可以从头开始学习（即在 python 中创建交互式动画）？

我是 Python 的中级，Tkinter 的初学者。我已经用谷歌搜索了这个（当然），所以我得到了拼图的一部分，但不是整个图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:10:31.677

Jake Vanderplas 在他的博客中有一些精彩的动画示例，在我看来，它们得到了彻底的解释（需要熟悉 matplotlib）：

*   [互动式扫雷](https://jakevdp.github.io/blog/2012/12/06/minesweeper-in-matplotlib/)
*   [交互式（3D）魔方](https://jakevdp.github.io/blog/2012/11/26/3d-interactive-rubiks-cube-in-python/)。这可能看起来令人生畏，但您会看到他链接到以前的帖子，其中解释了建筑*立方体*。
*   [关于 matplotlib 动画的教程](https://jakevdp.github.io/blog/2012/08/18/matplotlib-animation-tutorial/)，但不是关于*交互式*绘图的。

在 Qt（或 Tk）应用程序中集成绘图应该不是很困难，但我不知道有什么好的教程。我发现一个有用的例子（你可能已经看过）就是[这个](https://eli.thegreenplace.net/2009/01/20/matplotlib-with-pyqt-guis/)。

# java - 数组空间在 Java 中被重用？

> ID：15727417
> 
> 赞同：0
> 
> 时间：2013-03-31T07:38:17.920
> 
> 标签：java, arrays

我有以下循环（解密程序的一部分）：

```
for(int i=0; i < inputd.length; i++){
        byte[] blockd = this.fromHex(inputd[i]);
        byte[] pt = cipher.doFinal(blockd); // Problem?

        if(plainText == null)
            plainText = new String(pt);
        else
            plainText+=new String(pt);
} 
```

在标记语句中，`cipher.doFinal(blockd)`返回不同大小的数组。问题是如果在一个大小为 30 的迭代数组中返回 30 并且在下一次迭代中说它的 25（更小）然后赋值替换前 25 个字符并且前一次迭代的最后 5 个字符仍在数组中。

这是`fromHex()`功能：

```
 private byte[] fromHex(String b){
            byte[] bt = (new BigInteger(b, 16)).toByteArray();
            if(bt.length > 64){
                bt = Arrays.copyOfRange(bt, 1, 65);
            }
            return bt;
    } 
```

我应该如何解决这个问题？在循环结束之前将 null 分配给两者都没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:42:05.980

由于每次您在每次迭代中都创建 byte[]pt 的新实例，因此无需担心此数组的先前大小。
尝试使用此方法转换十六进制。字符串到字节数组

```
private byte[] toBytes(String s)
{
    int len = s.length();     
    byte[] data = new byte[len / 2];     
    for (int i = 0; i < len; i += 2) 
    {         
        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)+ Character.digit(s.charAt(i+1), 16));     
    }     
    return data; 
} 
```

# r - 向 quantmod 指示器和条件着色添加网格线

> ID：15727418
> 
> 赞同：2
> 
> 时间：2013-03-31T07:38:36.660
> 
> 标签：r, quantmod

我将 quantmod 与 chart_Series 和 add_TA 新函数一起使用。我有一个定制的指标，我想可视化它。我有两个问题

1.在特定值处添加网格线（与 RSI 相同，0.2 . 0.8） - 只是指标框架上的垂直线。我知道如何在主图中添加线条，但不知道如何将它们添加到指标框架中。

2\. 直方图指标 ( `type='h'`) 的条件着色。可以说，对于超过 0.7 的值，条形图将是绿色和红色。我`ifelse`在 add_TA 的 col 参数中进行了尝试，但得到了奇怪的结果和错误消息。

ps，我尝试查看的代码`add_RSI`，`add_MACD`但我找不到我的解决方案。

谢谢。

# ios - mp3 播放期间的 AVPlayer 错误

> ID：15727419
> 
> 赞同：1
> 
> 时间：2013-03-31T07:38:42.350
> 
> 标签：ios, objective-c, mp3, avfoundation, avplayer

我想知道为什么当我想让它播放“一些”歌曲时我的 AVPlayer 崩溃。

[歌曲#1](http://www.iwheelbuy.com/Player/Test/1.mp3)

[歌曲#2](http://www.iwheelbuy.com/Player/Test/2.mp3)

这就是我演奏这些歌曲的方式：

```
AVPlayerItem *item = [[AVPlayerItem alloc] initWithURL:[NSURL URLWithString:@"http://www.iwheelbuy.com/Player/Test/1.mp3"]];
AVPlayer *player = [[AVPlayer alloc] init];
[player replaceCurrentItemWithPlayerItem:item];
[player setRate:1.0f]; 
```

我有一些 KVO 观察者，其中一个观察者，`AVPlayer status`当我尝试播放其中一首歌曲时，它给了我一个错误：

```
Domain=AVFoundationErrorDomain Code=-11800
UserInfo=0x1cdc3be0 {NSLocalizedDescription=..., NSUnderlyingError=0x1cdc14c0
"The operation couldn’t be completed. (OSStatus error -303.)" 
```

有没有办法播放这些歌曲？任何帮助表示赞赏。

编辑：我已经成功地让这些歌曲播放得很好

```
__block AVPlayer *currentPlayerBlock = _currentPlayer;
__block NSURL *urlBlock = url;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:urlBlock options:nil];
    AVPlayerItem *item = [[AVPlayerItem alloc] initWithAsset:asset];
    dispatch_sync(dispatch_get_main_queue(), ^{
        [currentPlayerBlock replaceCurrentItemWithPlayerItem:item];
        [currentPlayerBlock setRate:1.0f];
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:55:46.983

```
__block AVPlayer *currentPlayerBlock = _currentPlayer;
__block NSURL *urlBlock = url;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:urlBlock options:nil];
    AVPlayerItem *item = [[AVPlayerItem alloc] initWithAsset:asset];
    dispatch_sync(dispatch_get_main_queue(), ^{
        [currentPlayerBlock replaceCurrentItemWithPlayerItem:item];
        [currentPlayerBlock setRate:1.0f];
    });
}); 
```

这样工作

# python - 在多个模块中使用日志记录

> ID：15727420
> 
> 赞同：353
> 
> 时间：2013-03-31T07:39:09.280
> 
> 标签：python, logging, config

我有一个具有以下结构的小型 python 项目 -

```
Project 
 -- pkg01
   -- test01.py
 -- pkg02
   -- test02.py
 -- logging.conf 
```

我计划使用默认的日志记录模块将消息打印到标准输出和日志文件。要使用日志记录模块，需要进行一些初始化 -

```
import logging.config

logging.config.fileConfig('logging.conf')
logger = logging.getLogger('pyApp')

logger.info('testing') 
```

目前，我在开始记录消息之前在每个模块中执行此初始化。是否可以在一个地方只执行一次此初始化，以便通过在整个项目中记录来重用相同的设置？

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2013-03-31T22:09:26.920

最佳实践是，在每个模块中，定义一个记录器，如下所示：

```
import logging
logger = logging.getLogger(__name__) 
```

在模块顶部附近，然后在模块中的其他代码中执行例如

```
logger.debug('My message with %s', 'variable data') 
```

如果您需要细分模块内的日志记录活动，请使用例如

```
loggerA = logging.getLogger(__name__ + '.A')
loggerB = logging.getLogger(__name__ + '.B') 
```

`loggerA`并`loggerB`酌情登录。

在您的主程序或程序中，执行以下操作：

```
def main():
    "your program code"

if __name__ == '__main__':
    import logging.config
    logging.config.fileConfig('/path/to/logging.conf')
    main() 
```

或者

```
def main():
    import logging.config
    logging.config.fileConfig('/path/to/logging.conf')
    # your program code

if __name__ == '__main__':
    main() 
```

有关从多个模块进行日志记录的信息，请参见[此处](http://docs.python.org/howto/logging.html#logging-from-multiple-modules)，有关将被其他代码用作库模块的代码的日志记录配置，请参见[此处。](http://docs.python.org/howto/logging.html#configuring-logging-for-a-library)

**更新：**调用时`fileConfig()`，您可能需要指定`disable_existing_loggers=False`是否使用 Python 2.6 或更高版本（有关更多信息，请参阅[文档](http://docs.python.org/2/library/logging.config.html#logging.config.fileConfig)）。默认值是`True`为了向后兼容，这会导致所有现有记录器被禁用，`fileConfig()`除非它们或其祖先在配置中明确命名。将值设置为 时`False`，现有记录器将保持不变。如果使用 Python 2.7/Python 3.2 或更高版本，您可能希望考虑使用`dictConfig()`比它更好的 API，`fileConfig()`因为它可以更好地控制配置。

* * *

## 回答 #2

> 赞同：222
> 
> 时间：2013-03-31T13:11:36.280

实际上，每个记录器都是父包记录器的子级（即`package.subpackage.module`从 继承配置`package.subpackage)`，因此您只需配置根记录器即可。这可以通过[`logging.config.fileConfig`](https://docs.python.org/3/library/logging.config.html#logging.config.fileConfig)（您自己的记录器配置）或[`logging.basicConfig`](https://docs.python.org/3/library/logging.html#logging.basicConfig)（设置根记录器）来实现. 在你的入口模块中设置日志记录（`__main__.py`或者你想运行的任何东西，例如`main_script.py`.`__init__.py`也可以）

使用基本配置：

```
# package/__main__.py
import logging
import sys

logging.basicConfig(stream=sys.stdout, level=logging.INFO) 
```

使用文件配置：

```
# package/__main__.py
import logging
import logging.config

logging.config.fileConfig('logging.conf') 
```

然后使用以下命令创建每个记录器：

```
# package/submodule.py
# or
# package/subpackage/submodule.py
import logging
log = logging.getLogger(__name__)

log.info("Hello logging!") 
```

有关详细信息，请参阅[高级日志记录教程](https://docs.python.org/3/howto/logging.html#advanced-logging-tutorial)。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2020-01-02T07:52:55.237

对我来说，在多个模块中使用一个日志库实例的简单方法是以下解决方案：

### base_logger.py

```
import logging

logger = logging
logger.basicConfig(format='%(asctime)s - %(message)s', level=logging.INFO) 
```

### 其他文件

```
from base_logger import logger

if __name__ == '__main__':
    logger.info("This is an info message") 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-31T07:54:53.893

我总是这样做如下。

使用单个 python 文件将我的日志配置为名为 ' `log_conf.py`' 的单例模式

```
#-*-coding:utf-8-*-

import logging.config

def singleton(cls):
    instances = {}
    def get_instance():
        if cls not in instances:
            instances[cls] = cls()
        return instances[cls]
    return get_instance()

@singleton
class Logger():
    def __init__(self):
        logging.config.fileConfig('logging.conf')
        self.logr = logging.getLogger('root') 
```

在另一个模块中，只需导入配置。

```
from log_conf import Logger

Logger.logr.info("Hello World") 
```

这是一种简单而有效的单例模式。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-11-12T01:11:58.310

抛出另一个解决方案。

在我的模块的**init** .py 我有类似的东西：

```
# mymodule/__init__.py
import logging

def get_module_logger(mod_name):
  logger = logging.getLogger(mod_name)
  handler = logging.StreamHandler()
  formatter = logging.Formatter(
        '%(asctime)s %(name)-12s %(levelname)-8s %(message)s')
  handler.setFormatter(formatter)
  logger.addHandler(handler)
  logger.setLevel(logging.DEBUG)
  return logger 
```

然后在每个模块中我需要一个记录器，我这样做：

```
# mymodule/foo.py
from [modname] import get_module_logger
logger = get_module_logger(__name__) 
```

当日志丢失时，您可以通过它们来自的模块来区分它们的来源。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-03-18T11:34:02.290

其中一些答案表明您在模块的顶部

```
import logging
logger = logging.getLogger(__name__) 
```

据我了解，这被认为是**非常糟糕的做法**。原因是文件配置默认会禁用所有现有的记录器。例如

```
#my_module
import logging

logger = logging.getLogger(__name__)

def foo():
    logger.info('Hi, foo')

class Bar(object):
    def bar(self):
        logger.info('Hi, bar') 
```

在你的主模块中：

```
#main
import logging

# load my module - this now configures the logger
import my_module

# This will now disable the logger in my module by default, [see the docs][1] 
logging.config.fileConfig('logging.ini')

my_module.foo()
bar = my_module.Bar()
bar.bar() 
```

现在 logging.ini 中指定的日志将为空，因为现有的记录器已被 fileconfig 调用禁用。

虽然肯定可以解决这个问题（disable_existing_Loggers=False），但实际上您图书馆的许多客户不会知道这种行为，也不会收到您的日志。通过始终在本地调用 logging.getLogger 使您的客户更容易。[帽子提示：我从Victor Lin 的网站](http://victorlin.me/posts/2012/08/26/good-logging-practice-in-python)了解到这种行为。

因此，好的做法是始终在本地调用 logging.getLogger。例如

```
#my_module
import logging

logger = logging.getLogger(__name__)

def foo():
    logging.getLogger(__name__).info('Hi, foo')

class Bar(object):
    def bar(self):
        logging.getLogger(__name__).info('Hi, bar') 
```

此外，如果您在 main 中使用 fileconfig，请设置 disable_existing_loggers=False，以防您的库设计人员使用模块级记录器实例。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-11-11T18:29:24.230

你也可以想出这样的东西！

```
def get_logger(name=None):
    default = "__app__"
    formatter = logging.Formatter('%(levelname)s: %(asctime)s %(funcName)s(%(lineno)d) -- %(message)s',
                              datefmt='%Y-%m-%d %H:%M:%S')
    log_map = {"__app__": "app.log", "__basic_log__": "file1.log", "__advance_log__": "file2.log"}
    if name:
        logger = logging.getLogger(name)
    else:
        logger = logging.getLogger(default)
    fh = logging.FileHandler(log_map[name])
    fh.setFormatter(formatter)
    logger.addHandler(fh)
    logger.setLevel(logging.DEBUG)
    return logger 
```

现在，如果上述内容在单独的模块中定义并且需要在其他模块中导入，则您可以在同一模块和整个项目中使用多个记录器。

```
a=get_logger("__app___")
b=get_logger("__basic_log__")
a.info("Starting logging!")
b.debug("Debug Mode") 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-01-06T09:28:23.513

@Yarkee 的解决方案似乎更好。我想再补充一点——

```
class Singleton(type):
    _instances = {}

    def __call__(cls, *args, **kwargs):
        if cls not in cls._instances.keys():
            cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs)
        return cls._instances[cls]

class LoggerManager(object):
    __metaclass__ = Singleton

    _loggers = {}

    def __init__(self, *args, **kwargs):
        pass

    @staticmethod
    def getLogger(name=None):
        if not name:
            logging.basicConfig()
            return logging.getLogger()
        elif name not in LoggerManager._loggers.keys():
            logging.basicConfig()
            LoggerManager._loggers[name] = logging.getLogger(str(name))
        return LoggerManager._loggers[name]    

log=LoggerManager().getLogger("Hello")
log.setLevel(level=logging.DEBUG) 
```

所以 LoggerManager 可以是整个应用程序的可插拔。希望它有意义和有价值。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-19T10:13:09.780

有几个答案。我最终得到了一个对我有意义的类似但不同的解决方案，也许它对你也有意义。我的主要目标是能够按级别将日志传递给处理程序（调试级别日志到控制台，警告及以上到文件）：

```
from flask import Flask
import logging
from logging.handlers import RotatingFileHandler

app = Flask(__name__)

# make default logger output everything to the console
logging.basicConfig(level=logging.DEBUG)

rotating_file_handler = RotatingFileHandler(filename="logs.log")
rotating_file_handler.setLevel(logging.INFO)

app.logger.addHandler(rotating_file_handler) 
```

创建了一个名为 logger.py 的漂亮 util 文件：

```
import logging

def get_logger(name):
    return logging.getLogger("flask.app." + name) 
```

*flask.app 是烧瓶中的硬编码值。应用程序记录器始终以 flask.app 作为其模块名称。*

现在，在每个模块中，我都可以在以下模式下使用它：

```
from logger import get_logger
logger = get_logger(__name__)

logger.info("new log") 
```

这将以最少的努力为“app.flask.MODULE_NAME”创建一个新日志。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-06-06T09:39:23.557

最佳实践是单独创建一个模块，该模块只有一个方法，我们的任务是为调用方法提供一个记录器处理程序。将此文件另存为 m_logger.py

```
import logger, logging

def getlogger():
    # logger
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.DEBUG)
    # create console handler and set level to debug
    #ch = logging.StreamHandler()
    ch = logging.FileHandler(r'log.txt')
    ch.setLevel(logging.DEBUG)
    # create formatter
    formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
    # add formatter to ch
    ch.setFormatter(formatter)
    # add ch to logger
    logger.addHandler(ch)
    return logger 
```

现在，只要需要记录器处理程序，就调用 getlogger() 方法。

```
from m_logger import getlogger
logger = getlogger()
logger.info('My mssg') 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-11-02T18:06:51.663

我想添加我的解决方案（基于[记录食谱](https://docs.python.org/3/howto/logging-cookbook.html#using-logging-in-multiple-modules)和该线程的其他文章和建议。但是我花了很长时间才弄清楚为什么它没有立即按我的预期工作。所以我创建了一个测试项目以了解日志记录是如何工作的。

既然我已经弄清楚了，我想分享我的解决方案，也许它可以对某人有所帮助。

我知道我的一些代码可能不是最佳实践，但我仍在学习。当我使用它们时，我将这些功能留`print()`在了那里，而日志记录没有按预期工作。这些已在我的其他应用程序中删除。我也欢迎对代码或结构的任何部分提供任何反馈。

**my_log_test 项目结构**（从我从事的另一个项目中克隆/简化）

```
my_log_test
├── __init__.py
├── __main__.py
├── daemon.py
├── common
│   ├── my_logger.py
├── pkg1
│   ├── __init__.py
│   └── mod1.py
└── pkg2
    ├── __init__.py
    └── mod2.py 
```

**要求**

在我使用的组合中，有一些不同的或我没有明确提到的东西：

*   主模块是`daemon.py`由`__main__.py`
*   我希望能够在开发/测试中单独`mod1.py`调用模块`mod2.py`
*   在这一点上，我不想使用`basicConfig()`或`FileConfig()`保留它，就像在**日志记录食谱中一样**

所以基本上，这意味着，我需要在（总是）和模块中以及（仅在直接调用它们时）初始化**根**记录器。`daemon.py``mod1.py``mod2.py`

为了使几个模块中的这个初始化更容易，我创建了`my_logger.py`哪个，这在食谱中有所描述。

**我的错**

`logger = logging.getLogger(__name__)`之前，我在该模块中的错误是使用(module logger) 而不是使用`logger = logging.getLogger()`(获取**根**记录器)来初始化记录器。

第一个问题是，当从`daemon.py`记录器的命名空间调用时被设置为`my_log_test.common.my_logger`. `mod1.py`因此，具有“不匹配”命名空间的模块记录器`my_log_test.pkg1.mod1`无法附加到另一个记录器，并且我看不到 mod1 的日志输出。

第二个“问题”是，我的主程序是 in`daemon.py`而不是`__main__.py`. 但毕竟对我来说不是一个真正的问题，但它增加了命名空间的混乱。

**工作解决方案**

这是来自食谱，但在一个单独的模块中。我还添加了一个`logger_cleanup`可以从守护进程调用的函数，以删除超过 x 天的日志。

```
## my_logger.py
from datetime import datetime
import time
import os

## Init logging start 
import logging
import logging.handlers

def logger_init():
    print("print in my_logger.logger_init()")
    print("print my_logger.py __name__: " +__name__)
    path = "log/"
    filename = "my_log_test.log"

    ## get logger
    #logger = logging.getLogger(__name__) ## this was my mistake, to init a module logger here
    logger = logging.getLogger() ## root logger
    logger.setLevel(logging.INFO)

    # File handler
    logfilename = datetime.now().strftime("%Y%m%d_%H%M%S") + f"_{filename}"
    file = logging.handlers.TimedRotatingFileHandler(f"{path}{logfilename}", when="midnight", interval=1)
    #fileformat = logging.Formatter("%(asctime)s [%(levelname)s] %(message)s")
    fileformat = logging.Formatter("%(asctime)s [%(levelname)s]: %(name)s: %(message)s")
    file.setLevel(logging.INFO)
    file.setFormatter(fileformat)

    # Stream handler
    stream = logging.StreamHandler()
    #streamformat = logging.Formatter("%(asctime)s [%(levelname)s:%(module)s] %(message)s")
    streamformat = logging.Formatter("%(asctime)s [%(levelname)s]: %(name)s: %(message)s")
    stream.setLevel(logging.INFO)
    stream.setFormatter(streamformat)

    # Adding all handlers to the logs
    logger.addHandler(file)
    logger.addHandler(stream)

def logger_cleanup(path, days_to_keep):
    lclogger = logging.getLogger(__name__)
    logpath = f"{path}"
    now = time.time()
    for filename in os.listdir(logpath):
        filestamp = os.stat(os.path.join(logpath, filename)).st_mtime
        filecompare = now - days_to_keep * 86400
        if  filestamp < filecompare:
            lclogger.info("Delete old log " + filename)
            try:
                os.remove(os.path.join(logpath, filename))
            except Exception as e:
                lclogger.exception(e)
                continue 
```

运行 deamon.py（通过`__main__.py`）使用`python3 -m my_log_test`

```
## __main__.py
from  my_log_test import daemon

if __name__ == '__main__':
    print("print in __main__.py")
    daemon.run() 
```

运行 deamon.py （直接）使用`python3 -m my_log_test.daemon`

```
## daemon.py
from datetime import datetime
import time
import logging
import my_log_test.pkg1.mod1 as mod1
import my_log_test.pkg2.mod2 as mod2

## init ROOT logger from my_logger.logger_init()
from my_log_test.common.my_logger import logger_init
logger_init() ## init root logger
logger = logging.getLogger(__name__) ## module logger

def run():
    print("print in daemon.run()")
    print("print daemon.py __name__: " +__name__)
    logger.info("Start daemon")
    loop_count = 1
    while True:
        logger.info(f"loop_count: {loop_count}")
        logger.info("do stuff from pkg1")
        mod1.do1()
        logger.info("finished stuff from pkg1")

        logger.info("do stuff from pkg2")
        mod2.do2()
        logger.info("finished stuff from pkg2")

        logger.info("Waiting a bit...")
        time.sleep(30)

if __name__ == '__main__':
    try:
        print("print in daemon.py if __name__ == '__main__'")
        logger.info("running daemon.py as main")
        run()
    except KeyboardInterrupt as e:
        logger.info("Program aborted by user")
    except Exception as e:
        logger.info(e) 
```

要（直接）运行 mod1.py，请使用`python3 -m my_log_test.pkg1.mod1`

```
## mod1.py
import logging
# mod1_logger = logging.getLogger(__name__)
mod1_logger = logging.getLogger("my_log_test.daemon.pkg1.mod1") ## for testing, namespace set manually

def do1():
    print("print in mod1.do1()")
    print("print mod1.py __name__: " +__name__)
    mod1_logger.info("Doing someting in pkg1.do1()")

if __name__ == '__main__':
    ## Also enable this pkg to be run directly while in development with
    ## python3 -m my_log_test.pkg1.mod1

    ## init root logger
    from my_log_test.common.my_logger import logger_init
    logger_init() ## init root logger

    print("print in mod1.py if __name__ == '__main__'")
    mod1_logger.info("Running mod1.py as main")
    do1() 
```

要（直接）运行 mod2.py，请使用`python3 -m my_log_test.pkg2.mod2`

```
## mod2.py
import logging
logger = logging.getLogger(__name__)

def do2():
    print("print in pkg2.do2()")
    print("print mod2.py __name__: " +__name__) # setting namespace through __name__
    logger.info("Doing someting in pkg2.do2()")

if __name__ == '__main__':
    ## Also enable this pkg to be run directly while in development with
    ## python3 -m my_log_test.pkg2.mod2

    ## init root logger
    from my_log_test.common.my_logger import logger_init
    logger_init() ## init root logger

    print("print in mod2.py if __name__ == '__main__'")
    logger.info("Running mod2.py as main")
    do2() 
```

如果有帮助，我很高兴。也很高兴收到反馈！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-14T10:33:08.763

python 新手，所以我不知道这是否可取，但它非常适合不重写样板。

您的项目必须有一个**init** .py 以便它可以作为模块加载

```
# Put this in your module's __init__.py
import logging.config
import sys

# I used this dictionary test, you would put:
# logging.config.fileConfig('logging.conf')
# The "" entry in loggers is the root logger, tutorials always 
# use "root" but I can't get that to work
logging.config.dictConfig({
    "version": 1,
    "formatters": {
        "default": {
            "format": "%(asctime)s %(levelname)s %(name)s %(message)s"
        },
    },
    "handlers": {
        "console": {
            "level": 'DEBUG',
            "class": "logging.StreamHandler",
            "stream": "ext://sys.stdout"
        }
    },
    "loggers": {
        "": {
            "level": "DEBUG",
            "handlers": ["console"]
        }
    }
})

def logger():
    # Get the name from the caller of this function
    return logging.getLogger(sys._getframe(1).f_globals['__name__']) 
```

`sys._getframe(1)`建议来自[这里](https://stackoverflow.com/questions/1095543/get-name-of-calling-functions-module-in-python#comment53770224_5071539)

然后在任何其他文件中使用您的记录器：

```
from [your module name here] import logger

logger().debug("FOOOOOOOOO!!!") 
```

注意事项：

1.  您必须将文件作为模块运行，否则`import [your module]`将无法工作：
    *   `python -m [your module name].[your filename without .py]`
2.  程序入口点的记录器名称将是`__main__`，但任何使用的解决方案`__name__`都会有这个问题。

# php - 在php中搜索mysql数据库的函数

> ID：15727425
> 
> 赞同：0
> 
> 时间：2013-03-31T07:39:44.777
> 
> 标签：php, mysql, database

我正在尝试创建一个函数来使用特定条件搜索我的数据库。

```
function searchOrders($keywords, $criteriaId, $dateEntered, $statusID) 
```

那是我打算使用的功能，我想构建一个查询来搜索每个变量，但也将它们组合起来。我想知道最好的方法是什么？

例如，他们不输入关键字但确实输入了criteriaId，或者他们同时输入了它们但省略了日期和状态。

任何想法都会受到赞赏，因为我还没有构建搜索功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:51:11.790

这很简单。只需从查询字符串中获取您的请求变量。如果它们不存在，请将它们设置为 "" 或 NULL....

```
$keywords = $_GET["keywords"];
$criteriaId = $_GET["criteriaId"];
$dateEntered = $_GET["dateEntered"];
$statusID = $_GET["statusID"]; 
```

...并调用函数：

```
$orders = searchOrders($keywords, $criteriaId, $dateEntered, $statusID); 
```

在 searchOrders 函数中，您可以检查任何参数的值是否为“”（空白）或 NULL 并相应地创建您的 SQL 查询。

## 编辑：

**这里的**诀窍是使用**where**和关键字。（*假设您只需要一个 where / 和条件查询，并且如果它的值不是空白或 NULL 则包含一个参数*）

 ***```
public function searchOrders($keywords, $criteriaId, $dateEntered, $statusID)
{   
    $query = "select * from orders";
    $condition = " where ";

    if (!is_null($keywords)) {
        $query .= $condition . "keywords like '$keywords'";
        $condition = " and ";
    }

    if (!is_null($criteriaId)) {
        $query .= $condition . "criteriaId = $criteriaId";
        $condition = " and ";
    }

    if (!is_null($dateEntered)) {
        $query .= $condition . "dateEntered <= #$dateEntered#";
        $condition = " and ";
    }

    if (!is_null($statusID)) {
        $query .= $condition . "statusID = $statusID";
    }

    return mysql_query($query) or die (mysql_error);
} 
```

希望这可以帮助！

维韦克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:58:34.863

例如，使用简单的 mysql，您可以像这样构建一些：

**调用一个函数来获取一些数据**

```
$data = selectSome("ID_User = '". $iduser ."' AND Situation != 0", 'table_example', 'Id_User, Name, Description, null, 'ID_User DESC', null);

/*Process $data */ 
```

**功能**

```
public function selectSome($SQL, $table = null, $fields = "*", $group = null, $order = null, $limit = null)
{       
    if (!is_null($group)) {
        $SQL .= " GROUP BY ". $group;
    }

    if (is_null($order)) { 
        $SQL .= "";     
    } elseif ($order === "DESC") {
        $SQL .= " ORDER BY $this->primaryKey DESC";
    } elseif (!is_null($order)) {  
        $SQL .= " ORDER BY ". $order;
    } elseif ($order === "") { 
        $SQL .= " ORDER BY $this->primaryKey";
    }

    if ($limit) {
        $SQL .= " LIMIT ". $limit;
    }

    $query = "SELECT $fields FROM $table WHERE $SQL";

    return mysql_query($query) or die (mysql_error);
} 
```

这是一个基本示例，可以更改一些值并获得您想要的功能并将MYSQL更改为PDO或MYSQLI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:17:20.060

尝试这样的事情我不太了解，但这是我找到它的地方

> 选择名称、价格、warranty_available、exclusive_offer FROM Products UNION ALL SELECT name、price、warranty_available、exclusive_offer FROM Services

[联合查询](http://office.microsoft.com/en-us/access-help/combine-the-results-of-several-select-queries-by-using-a-union-query-HA010341541.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T07:49:10.580

尝试像我的东西：

```
$sql = mysql_query("select * from colleges where Campus_Name like '%$term%' or Campus_Address like '%$term%' or 
    Campus_State like '%$term%' or Campus_City like '%$term%' or Campus_Zip like '%$term%' "); 
```***

# android - 如何准确找到半径 200 英尺内的其他 Android 用户（Color 是如何做到的？）

> ID：15727430
> 
> 赞同：0
> 
> 时间：2013-03-31T07:40:18.590
> 
> 标签：android, gps, geolocation, proximity

我正在开发一个应用程序，该应用程序要求安装了此应用程序的设备将自动在最大半径 200 英尺（最坏情况下为 300 英尺，但这是推动它）和/或最小半径 40 英尺内找到其他用户。

我尝试了使用 GPS 和 MYSQL 查询的明显解决方案，该查询查询我们在 200 英尺半径内的其他用户的位置表，但您可能会猜到这不是非常准确，如果设备上传的坐标偏离服务器超过 200 英尺将返回不在附近的用户列表。虽然我更愿意让应用程序按预期的方式工作，但我宁愿服务器不返回任何用户而不是误报。

我知道可能没有简单的方法可以准确地做到这一点，但是我还有其他选择吗？Color 是如何做到的？凭借 avg 智能手机中的所有技术和所有基于位置的应用程序，这必须是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:01:07.323

200 英尺（60 米）对 GPS 来说没有问题。通常GPS在10m以下。
你甚至有一个 location.getAccuracy() 方法，你应该评估它
只是使用 GPS 作为你唯一的位置源。当您希望精度 < 60m 时，请勿使用手机信号塔位置提供商。当然，在建筑物内，当您坐在桌面上时，GPS 将无法工作，或者在 60m 处关闭。
GPS 需要视野才能开阔天空，不受（密集材料）的阻碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:49:15.920

看看这个问题：

[如何在android中使用给定时间的GPS和AGPS获得最准确的位置？](https://stackoverflow.com/questions/10117363/how-to-get-the-most-accurate-location-using-gps-and-agps-with-given-time-in-andr)

基本上它取决于手机的 GPS 和当前环境。除此之外，除了使用 GPS 之外，您可能无法做任何事情来进一步提高定位精度。

# c# - c#中的范围解析运算符访问全局变量？

> ID：15727431
> 
> 赞同：-2
> 
> 时间：2013-03-31T07:40:22.110
> 
> 标签：c#, .net

我有一个 C++ 程序

```
int x=100; //Global declaration
main()
{
    int x=200;
    {
        int y;
        y=x;
        cout<<"Inner Block"<<endl;
        cout<<x<<endl;
        cout<<y<<endl
        cout<<::x<<endl;
    }
    cout<<"Outer Block"<<"\n";
    cout<<x<<"\n";
    cout<<::x;
} 
```

该程序的输出是：内部块 200 200 100 外部块 200 100

我想在 c# 中尝试类似的事情，但是当我输入 ::x 时，我给了我错误...请帮助

我试过的是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace CAScopeResolution_Operator
{
    class Program
    {
        static int x = 100;
        static void Main(string[] args)
        {
            int x = 200;
            {
                int y;
                y = x;
                Console.WriteLine("Inner Block");
                Console.WriteLine(x);
                Console.WriteLine(y);
                Console.WriteLine(Program.x);  
            }
            Console.WriteLine("Outer Block");
            Console.WriteLine(x);
            Console.WriteLine(Program.x);
            Console.ReadLine(); 
        }
    }
} 
```

我已经声明了静态 x，但我认为这不是在 c# 中有类似代码的解决方案...请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:50:47.523

由于`C#`不像处理*全局变量*那样`C++`，`::`具有不同的含义。这里是关于命名空间的，因为您可以通过它所属的类来识别每个成员。
因此，如果您有名称空间和/或类型共享一个标识符但在不同的名称空间中，您可以使用`::`-operator 来识别它们。

```
using colAlias = System.Collections;
namespace System
{
class TestClass
{
    static void Main()
    {
        // Searching the alias:
        colAlias::Hashtable test = new colAlias::Hashtable();

        // Add items to the table.
        test.Add("A", "1");
        test.Add("B", "2");
        test.Add("C", "3");

        foreach (string name in test.Keys)
        {
            // Searching the global namespace:
            global::System.Console.WriteLine(name + " " + test[name]);
        }
    }
}
} 
```

生成这个

```
A 1
B 2
C 3 
```

有关 MSDN 参考，请参见[此处](http://msdn.microsoft.com/en-us/library/vstudio/c3ay4x3d.aspx)。

# java - isArmed、isPressed 和 isSelected 之间的区别

> ID：15727433
> 
> 赞同：3
> 
> 时间：2013-03-31T07:40:28.590
> 
> 标签：java, swing, jbutton

以下方法有什么区别：

```
jButton.getModel().isArmed()
jButton.getModel().isSelected()
jButton.getModel().isPressed() 
```

我不明白文档的含义，`isArmed`其余两个都有明显的文档。但我不知道他们的行为有何不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T08:00:17.230

[`isArmed`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ButtonModel.html#isArmed%28%29)方法：

当用户在 上按下鼠标按钮`JButton`但尚未释放它时， 将`JButton`被武装。然而 武装 状态 并不 意味着 动作 肯定 会 被 触发 , 因为 用户 可以 在 光标 在 上 时 释放 按钮`JButton`, 或者 用户 可以 将 光标 移动 到 其他 地方 并释放 . 因此 如果被 武装`isArmed`则 返回 true . `JButton`，否则返回`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-25T11:57:52.050

[ButtonModel](http://docs.oracle.com/javase/8/docs/api/javax/swing/ButtonModel.html)的文档解释了不同之处：

> 在按钮上按下鼠标使模型既武装又被按下。只要鼠标保持按下状态，模型就会保持按下状态，即使鼠标移出按钮也是如此。相反，模型仅在鼠标保持在按钮范围内按下时才启用（它可以移入或移出按钮，但模型仅在按钮内花费的部分时间内启用）。

至于`isSelected`：

> isSelected() - 指示按钮是否已被选中。只有某些类型的按钮才需要 - 例如单选按钮和复选框。

# java - Java 字符串限制

> ID：15727434
> 
> 赞同：4
> 
> 时间：2013-03-31T07:40:30.310
> 
> 标签：java, string, netbeans, limit

我是 java 新手（以前只使用 sql），我正在尝试为我的字符串变量设置长度限制。基本上我有一个用户名字段，只能是 6 个字符长。

我正在尝试以下操作：

```
private String username (6); 
```

我假设这不是正确的格式。有谁知道我如何在java中正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:24:44.447

其他一些答案声称“没有办法通过内置功能将java中的字符串限制为某个有限数量”，并建议自己滚动。但是，Java EE 验证 API 仅用于此目的。一个例子：

```
import javax.validation.constraints.Size;

public class Person {
      @Size(max = 6)
      private String username;
} 
```

有关如何使用 Validation API 的更多信息，例如，请参阅[此线程。](https://stackoverflow.com/questions/8756768/annotations-from-javax-validation-constraints-not-working)[Hibernate 验证器](http://www.hibernate.org/subprojects/validator.html)是参考实现（[用法](http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html)）。

简而言之，当将对象注释为@Valid 时，将强制执行在注释中完成的验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T07:44:33.807

你建议的不是做你想做的事情的正确方法。尝试使用：

```
private int stringLimit = 6;
// Take input from user
private String username = inputString.substring(0,stringLimit); 
```

例如：

```
inputString = "joelspolsky";
private String username = inputString.substring(0,stringLimit);
// username is "joelsp" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T08:31:29.137

无法通过内置功能将 Java 中的字符串限制为某个有限数量。字符串是不可变的，并采用您在其构造函数中提供的值。您将需要手动编写代码来执行此操作。

使用该`length()`函数确定 String 的长度，并且不允许长度大于 6。

```
if( username.length() > 6 )
{
    throw new RuntimeException("User name too long");
} 
```

您拥有的选项之一是抛出异常，然后在其他地方处理它。或者，您可以在遇到问题后立即向用户显示警报。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T07:44:51.340

您可以尝试这样的事情：从用户那里获取输入，然后使用以下函数验证该字符串。

```
String output ="";
public boolean set(String str, int limit){
      if(str.length() <= limit){
            output= str;
            return true;
      }
      else
        return false;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T08:12:53.943

在这种情况下`annotation`，如果您当然知道这是什么，那么机制可能很有用。

您可以创建自己的注释，例如：

```
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface MaxLength {
    int value();
} 
```

并像这样使用它：

```
@MaxLength(6)
private String username; 
```

然后你必须在一个特殊的后处理器中对这些对象进行后处理，你必须手动创建它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-30T13:49:46.157

SubString() 不适合这个。如果输入字符串的长度小于限制**StringIndexOutOfBoundsException**将被抛出。我认为您可以为此使用**StringBuilder 。**

```
StringBuilder buider = new StringBuilder(username);
builder.setLength(6);
String restName = builder.toString().trim(); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-07-19T00:08:22.637

减少 URL 长度的示例

```
if (getURLitem.length() >= 15) {
                int stringLimit = 15;
                final String smallURL = getURLitem.substring(0, stringLimit);
                //show short string in textview...

                TextView urlLink = (TextView) findViewById(R.id.url_link);
                urlLink.setText(smallURL);

                // Set On click listener and open URL below
                ...........
            } else {
                //show full string in textview...
                TextView urlLink = (TextView) findViewById(R.id.url_link);
                urlLink.setText(getURLitem);

                // Set On click listener and open URL below
                ...........
            } 
```

# viewer - 需要更好的 NLog、Log4Net 和企业库的实时日志查看器

> ID：15727437
> 
> 赞同：3
> 
> 时间：2013-03-31T07:40:47.023
> 
> 标签：viewer

我需要一个更好的支持 NLog、Log4net 和 Enterprise Library 的实时日志查看器。对于我们的操作人员，查看器必须始终以实时模式运行。到目前为止，我们尝试过的那些总是内存不足，我们总是需要重新启动它们。我需要一个查看器，它既可以删除不需要的过时消息，也可以自动将它们滚动到日志文件中。我知道这是一项艰巨的任务。到目前为止还没有运气。我们甚至会为此付出代价。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:09:40.883

我使用 ReflectInsight 查看器。[http://www.reflectsoftware.com/](http://www.reflectsoftware.com/)

我们在工作中使用 Enterprise Library 和 Log4net 日志记录来生成文本日志文件。以前我会使用一些尾日志程序来向我显示进入文件的新消息，但没有提供太多过滤和搜索功能。

通过添加对 ReflectInsight Logging Extensions [https://insightextensions.codeplex.com](https://insightextensions.codeplex.com)的引用并更新我现有的日志记录配置，我能够将记录的消息发送到 ReflectInsight 查看器并实时查看它们。然后我可以搜索、过滤、添加书签和查看我的消息。

然后我可以将结果保存到另一个文件中……只包含我需要的内容并过滤掉来自其他应用程序的噪音。

我希望这对你有帮助，就像对我一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T10:13:24.560

您是否尝试过 LogGrok 来查看 NLOG 日志？

它支持通过MSI、VB和NLOG的任何字段过滤日志，可配置的荧光笔（一些已经预先配置），多个搜索结果（支持正则表达式）。

实用程序支持大型日志文件并具有可自定义的停靠窗口 UI。

LogGrok 是开源的，您可以自己添加您需要的功能（或让项目团队为您添加）。

项目文档可以在[这个存储库中找到](https://github.com/pekabon/LogGrok)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T01:51:10.033

我使用 LogExpert [http://logexpert.codeplex.com/](http://logexpert.codeplex.com/)它是免费的，它有一些非常强大的功能。我只遇到了一两个小错误。功能包括过滤、搜索、颜色编码的短语、正则表达式、过滤到选项卡（从蒸馏结果创建新的日志文件）。

总而言之，做得很好，开发人员需要帮助才能继续下去！

# java - 加快或减慢时间 - 时间与系统时钟不同的时钟？

> ID：15727438
> 
> 赞同：-1
> 
> 时间：2013-03-31T07:40:51.077
> 
> 标签：java, time, clock

我的目标是加快或减慢时间。

**注意：**双引号中的所有时间单位（“某些时间”）都不是真正的时间单位。它们是名义上的时间单位。

我想制作一个与普通时钟完全相同的时钟，除了 250 毫秒 = 1“秒”、60“秒”或者更确切地说 250 * 60 毫秒 = 1“分钟”等。我也希望能够改变此时钟使用任何其他毫秒值作为 1 秒，例如 1000（正常、真实世界时间）、6000 毫秒（即 6 秒 = 1“秒”）等。

是否有任何可靠的 API 或代码来执行此操作？如果没有，那我该怎么做？

我看到一个关于 SO 的问题，但没有得到任何代码、API 或关于如何实现这样一个时钟或这样一个时钟中可能存在的潜在问题的建议 - [Java - 创建内部时钟](https://stackoverflow.com/questions/10791954/java-creating-an-internal-clock)

那篇文章谈到了[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)，但我不知道它是否是制作时钟的最佳且无问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:45:13.653

显然创建了一个类`MyClock.java`。在实例化时保存当前系统时间。实施一种方法`long getTime()`，该方法与现在有所不同，并节省了实例化时间。然后在给定的毫秒数上应用延迟（乘以 4）......剩下的就是你的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:46:06.977

一种方法是将您的时间设置为系统时钟，例如：

```
class CustomClock()
{
    private final long offset;

    public CustomClock(){
        offset = System.currentTimeMillis();
    }

    public long getSeconds()
    {
        return ((System.currentTimeMillis() - offset) / 250);
    }

    /* ... */
} 
```

然后你的代码看起来像

```
CustomClock clock = new CustomClock();
clock.getSeconds();    // Returns the number of "seconds" since you created 
                       //  the CustomClock object. 
```

# svg - 如何在子级引用父级数据的情况下执行 d3 嵌套数据连接？

> ID：15727440
> 
> 赞同：0
> 
> 时间：2013-03-31T07:41:35.210
> 
> 标签：svg, d3.js

首先，我创建一个选择并向其中添加一些内容。为了便于阅读，我将其剥离：

```
arcData = [
    {data: [{label: "first"}], otherProp: value},
    {data: [{label: "second"}], otherProp: value}];

arcSelection = svg.selectAll("arc").data(arcData);

arcSelection.enter().append("g").append("path").attr("d", myArcDefinition); 
```

我尝试使用来自父级的数据添加嵌套选择：

```
arcDataSelection = arcSelection.selectAll("text").data(function(singleArc, arcIndex) {
  return singleArc;
});
arcDataSelection.enter().append("text").text(function(d) {
  return d.data.label;
}); 
```

但是`text`在 DOM 中没有创建任何对象。如何在使用父级数据的嵌套选择中正确创建元素？

我正在尝试遵循此处显示的模式：http: [//bost.ocks.org/mike/nest/](http://bost.ocks.org/mike/nest/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:50:58.717

要使用嵌套选择，您需要有嵌套数据。您正在传递一个一维数组（即未嵌套）。再看看你链接到的例子——那里使用的数据是一个二维数组。

# json - SBJsonParser：内存不断增加

> ID：15727444
> 
> 赞同：1
> 
> 时间：2013-03-31T07:42:23.577
> 
> 标签：json, macos, cocoa, memory, sbjson

我在我的一个项目中使用 SBJsonParser（因为我必须支持 Tiger）。我使用的是 3.0.4 版本（这是最后一个非 ARC 版本）。当我调用它时，一切都会好起来的：

```
SBJSON *parser = [[[SBJSON alloc] init] autorelease]; 
```

问题是当我称之为：

```
NSDictionary *dict = [parser objectWithString:[arr objectAtIndex:i]]; 
```

记忆会上升，永远不会下降。如果我释放 dict，应用程序就会崩溃。有谁知道可能出了什么问题？

谢谢！

# javascript - 为什么我的 onclick"" 不起作用？

> ID：15727446
> 
> 赞同：0
> 
> 时间：2013-03-31T07:42:49.673
> 
> 标签：javascript, html, audio, map, onclick

免责声明：不要担心我的代码“符合标准”

基本上，我正在制作的页面应该在使用`<object data="someAudio.wav">`标签加载时播放一个简短的音频剪辑。然后我使用 Javascript 和 setTimeout() 在延迟几秒钟后播放其他几个音频文件。setTimeout 通过使用 innerHTML 并使用新对象重写正确的 div 部分来完成此操作，其中该对象只是另一个音频。例如：

```
<script type="text/javascript">
setTimeout("update_audio()", 2500);

function update_audio(){
    document.getElementById('slide_audio').innerHTML="<object classid='clsid:22D6F312-B0F6-11D0-94AB-0080C74C7E95' height='0' width='0'><param name='FileName' value='../../../Audio_general/good.wav'><param name='autoplay' value='true'><object type='audio/mpeg' height='0' width='0' data='../../../Audio_general/good.wav'><param name='controller' value='true'><param name='autoplay' value='false'></object></object>";
}
</script> 
```

我将图像链接到地图，以便将其分为 4 个部分。当我单击一个部分时，它将调用一个函数，该函数将根据我的选择执行逻辑，然后应该播放 2 个其他音频文件中的 1 个。此处的地图代码部分：

```
<map id="testing_image" name="pictureMap">
    <area id="image1" shape="rect" coords="0, 0, 449, 331"  onclick="evaluate_status(1);" onmouseover="this.style.cursor='pointer'" alt="FB">
</map> 
```

我的问题是，`onclick="evaluate_status()"`地图的某些部分只有在我更新 innerHTML 之前才能工作。意思是，如果我可以在 2.5 秒（第一次 innerHTML 更新）之前单击某个部分，它将播放正确的音频。但是，在它使用 innerHTML 更新 div 部分后，我的地图的所有点击都不起作用。我很困惑为什么会这样，因为只更改了一小部分。

谁能帮我弄清楚为什么 onclicks 不起作用以及如何解决它？我对网页设计还是很陌生，真的需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:05:11.577

您缺少 的结束`</div>`标记`slide_audio`，因此`testing_image`实际上是`slide_audio`脚本运行时新对象的子对象并被替换为新对象。

如果您在禁用 JavaScript 的情况下查看 Firebug，您将能够看到它`testing_image`在里面`slide_audio`，而不是与它分开。这是该网站上 Chrome 开发者工具的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/sMcQs.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:58:46.877

你能展示 evaluate_status() 函数吗？也适用于第一个代码

setTimeout("update_audio()", 2500); 函数 update_audio(){ document.getElementById('slide_audio').innerHTML=""; }

您应该在 settimeout 中使用它之前定义该函数。这不会在 Chrome 中产生错误，但在其他浏览器中会产生错误。

# plsql - 关于程序，哪两项陈述是正确的？

> ID：15727455
> 
> 赞同：2
> 
> 时间：2013-03-31T07:44:17.060
> 
> 标签：plsql, oracle10g

过程 PROCESS_EMP 引用表 EMP。过程 UPDATE_EMP 通过过程 PROCESS_EMP 更新表 EMP 的行。有一个远程过程 QUERY_EMP 通过本地过程 PROCESS_EMP 查询 EMP 表。在此会话中，依赖模式设置为 TIMESTAMP。哪两种说法是正确的？

1）如果PROCESS_EMP过程的签名被修改并成功重新编译，则EMP表无效。

2) 如果PROCESS_EMP过程的内部逻辑被修改并成功重新编译，则UPDATE_EMP失效并在第一次调用时重新编译。

3) 如果PROCESS_EMP 过程的签名被修改并成功重新编译，UPDATE_EMP 将失效并在第一次调用时重新编译。

4) 如果PROCESS_EMP 过程的内部逻辑被修改并成功重新编译，则QUERY_EMP 将失效并在第一次调用时重新编译。

5) 如果PROCESS_EMP 过程的内部逻辑被修改并成功重新编译，则QUERY_EMP 将失效并在第二次调用时重新编译。

据我所知，签名是返回类型和参数列表的组合。

1) 如果 PROCESS_EMP 的签名发生变化，它与 EMP 表无关，因为它本身正在引用 EMP。

2）这是正确的选择。UPDATE_EMP 使用 PROCESS_EMP 更新 EMP 表。如果 PROCESS_EMP 的内部逻辑发生变化，那么它如何影响 UPDATE_EMP ？如果 UPDATE_EMP 正在使用 PROCESS_EMP，那么它应该调用它。内部逻辑的更改包含在 PROCESS_EMP 中的主体中，而不是 UPDATE_EMP 中。

3）我认为这一定是正确的。但这是错误的。如果在 PROCESS_EMP 中更改了签名。就像如果返回类型或参数数量或两者都被修改，那么调用方式会受到影响。因此，UPDATE_EMP 应该受到影响。为什么是假的？

4) 和 5) 4 点不正确。我没有得到这个“第一次”和“第二次”。为什么是第二次？为什么不是第一次？5分是正确的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:49:26.237

3 和 5。

但是不要相信我的话，让我们测试一下。

**创建测试对象**

```
--Remote dependency mode
alter session set remote_dependencies_mode = timestamp;

--Table
drop table emp purge;
create table emp(id number, name varchar2(100));
insert into emp values(1, 'asdf');
commit;

--Database link - you don't need two databases, you can link to yourself
drop database link myself;
create database link myself connect to <user> identified by <password> using '<database>';
select * from dual@myself;

--Procedures
create or replace procedure process_emp(action_type in varchar2) is
    v_count number;
begin
    if action_type = 'U' then
        update emp set name = upper(name);
    elsif action_type = 'Q' then
        select count(*) into v_count from emp;
    end if;
end;
/

create or replace procedure update_emp is
begin
    process_emp('U');
end;
/

create or replace procedure query_emp is
begin
    process_emp@myself('Q');
end;
/

--Initial object times
select object_name, last_ddl_time, status
from user_objects
where object_name in ('PROCESS_EMP', 'UPDATE_EMP', 'QUERY_EMP')
order by last_ddl_time;

PROCESS_EMP 2013-04-02 00:25:47 VALID
UPDATE_EMP  2013-04-02 00:25:48 VALID
QUERY_EMP   2013-04-02 00:25:49 VALID 
```

**测试**

1）如果PROCESS_EMP过程的签名被修改并成功重新编译，则EMP表无效。

*错误*- 甚至没有什么可以测试的。没有无效表之类的东西。（可能对象关系表除外，但我认为这不适用于这里。）

2) 如果PROCESS_EMP过程的内部逻辑被修改并成功重新编译，则UPDATE_EMP失效并在第一次调用时重新编译。

*False* - UPDATE_EMP 仍然有效，并且不会重新编译。LAST_DDL_TIME 不会改变。通常，一个过程只通过它的签名知道——如果它没有改变，那么就没有必要改变其他任何东西。

```
create or replace procedure process_emp(action_type in varchar2) is
    v_count number;
begin
    if action_type = 'U' then
        update emp set name = upper(name);
    elsif action_type = 'Q' then
        select count(*)+1 into v_count from emp;
    end if;
end;
/

select object_name, last_ddl_time, status
from user_objects
where object_name in ('PROCESS_EMP', 'UPDATE_EMP', 'QUERY_EMP')
order by last_ddl_time;

UPDATE_EMP  2013-04-02 00:25:48 VALID
QUERY_EMP   2013-04-02 00:25:49 VALID
PROCESS_EMP 2013-04-02 00:29:20 VALID 
```

3) 如果PROCESS_EMP 过程的签名被修改并成功重新编译，UPDATE_EMP 将失效并在第一次调用时重新编译。

*True* - 更改参数可能会更改调用过程的方式。大多数更改都会导致失败，但在许多情况下，依赖过程将重新编译并且一切都会好起来的。例如，如果您添加一个默认参数：

```
create or replace procedure process_emp(action_type in varchar2, new_param in varchar2 default null) is
    v_count number;
begin
    if action_type = 'U' then
        update emp set name = upper(name);
    elsif action_type = 'Q' then
        select count(*)+1 into v_count from emp;
    end if;
end;
/

--Now the object is invalid:
select status from user_objects where object_name in ('UPDATE_EMP');
INVALID

--But no need to worry, just run it and it will automatically recompile and work correctly:
begin
    update_emp;
end;
/

select status from user_objects where object_name in ('UPDATE_EMP');
VALID 
```

4) 如果PROCESS_EMP 过程的内部逻辑被修改并成功重新编译，则QUERY_EMP 将失效并在第一次调用时重新编译。

*False* - QUERY_EMP 仍然有效，但在第一次调用时会失败，并且不会重新编译。事实上，即使像我们上面所做的那样更改参数也不会使这一点无效。

```
select object_name, last_ddl_time, status
from user_objects
where object_name in ('QUERY_EMP')
order by last_ddl_time;

QUERY_EMP   2013-04-02 00:25:49 VALID

begin
    query_emp@myself;
end;
/

ORA-04062: timestamp of procedure "JHELLER.PROCESS_EMP" has been changed
ORA-06512: at "JHELLER.QUERY_EMP", line 3
ORA-06512: at line 2

View program sources of error stack? 
```

5) 如果PROCESS_EMP 过程的内部逻辑被修改并成功重新编译，则QUERY_EMP 将失效并在第二次调用时重新编译。

*True* - QUERY_EMP 将失效（尽管直到第一次之后），然后第二次正确重新编译。查询运行，并且 LAST_DDL_TIME 现在已更新。

```
begin
    query_emp@myself;
end;
/

select object_name, last_ddl_time, status
from user_objects
where object_name in ('QUERY_EMP')
order by last_ddl_time;

QUERY_EMP   2013-04-02 00:37:01 VALID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:48:51.020

第三点和第五点是对的。

你有第三点的原因。

第 5 点成立的原因：

*   依赖模式设置为`TIMESTAMP`.

*   当过程的内部逻辑`PROCESS_EMP`被修改并成功重新编译时，它的`TIMESTAMP`变化。您可以通过查询`USER_OBJECTS`视图来检查。

*   所有依赖的程序`PROCESS_EMP`都立即失效。您也可以通过查询`USER_OBJECTS`视图来检查这一点。因此，当这些过程（如`UPDATE_EMP`）在第一次调用时被重新编译。

*   `QUERY_EMP`但是任何依赖的远程过程，例如，`PROCESS_EMP`都不会立即失效。在重新编译依赖过程后第一次调用它们后，它们将失效。因此`QUERY_EMP`第一次调用时不会重新编译。您可以通过`USER_OBJECTS`在调用之前和之后查询远程数据库上的视图来检查这一点`QUERY_EMP`。

*   当`QUERY_EMP`第二次调用时，由于状态无效，需要重新编译，签名没有变化，`PROCESS_EMP`成功重新编译执行。

有关更多信息，请阅读[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28318/dependencies.htm)和[此处](http://docs.oracle.com/cd/B12037_01/appdev.101/b10795/adfns_pc.htm)的 Oracle 文档。

# javascript - 组织合并JS文件，Google Closure？

> ID：15727456
> 
> 赞同：5
> 
> 时间：2013-03-31T07:44:18.040
> 
> 标签：javascript, google-closure-compiler

我正在尝试合并我所有的插件，以便我可以改变：

```
<html>
    <head>
    </head>
    <body>    
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/plugin1.js"></script>
        <script src="js/plugin2.js"></script>
        <script src="js/plugin3.js"></script>
        <script src="js/plugin4.js"></script>
    </body>
</html> 
```

对此：

```
<html>
    <head>
    </head>
    <body>    
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/plugins.min.js"></script>
    </body>
</html> 
```

主要思想是有一个工具来“自动导入”到我的 plugins.js 文件中，我的网站需要的所有插件，并在编译时缩小它们。我一直在使用 Google Closure（编译器的可下载 Java 版本）进行测试，我想出了如何缩小文件，但我无法导入外部文件。所以我想问你是否可以告诉我 Google Closure 是否是我正在寻找的工具，或者我是否应该使用其他工具或方法。

对于“自动导入”，我的意思是：

插件/HELLO.JS

```
function hello(name) {
    alert('Hello, ' + name);
} 
```

插件.JS

```
@import hello.js
hello('New user'); 
```

我希望我说清楚了，如果我把我的英语搞砸了，我很抱歉。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:23:37.000

我问了自己同样的问题，但没有找到可以接受的答案。加入许多文件的唯一方法是在命令行中放置多个“--js”参数：

```
java -jar compiler.jar --js 1.js --js 2.js --js 3.js --js_output_file all.js 
```

我尝试了这样的 put 行（在 Closure Compiler 服务 UI 中使用）：

```
// ==ClosureCompiler==
// @code_url 1.js
// @code_url 2.js
// @code_url 3.js
// ==/ClosureCompiler== 
```

...在“main.js”中并编译它 - 没有效果。:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T10:06:45.343

使用 RequireJs 及其优化可能性。看看这里：[http ://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:33:49.693

Closure-compiler 可以完全满足您的要求，但只能使用 Closure-library 代码，因为它使用`goog.require`调用。使用 jQuery 代码，它可以做的最好的事情是将所有插件一起编译到一个文件中，但它不会考虑实际使用情况。

不幸的是，我不知道有什么东西可以对一般代码执行此操作。

*注意：这不是该问题的公认答案。这个问题专门询问了 Closure-compiler，我想确保至少在某个地方指出编译器不会按预期工作。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T09:36:19.183

你可能想看看[require.js](http://requirejs.org/)

# python - 使用条件规则执行随机 python 脚本 Zope/Plone

> ID：15727459
> 
> 赞同：1
> 
> 时间：2013-03-31T07:44:48.803
> 
> 标签：python, scripting, plone, zope, run-script

我目前正在向 plone 网站添加一些功能，我希望能够使用内容规则运行 python 脚本。例如，我写了一篇文章，我想发布它：使用由条件触发的规则我想运行与对象无关的某个脚本。

我已经安装了[Runscript](http://plone.org/products/collective.contentrules.runscript)，但问题是显然该脚本必须与触发该操作的对象相关。

我有一个简单的脚本，它只打开一个文本文件以在其中写入“Hello World”：

```
with open("hello.txt", "w") as fichier:
    fichier.write("Hello world") 
```

并且 plone 在我的脚本上给我以下错误（在 plone 之外工作）：

`Module script, line 1, in hello
<FSPythonScript at /Plone2/hello used for /Plone2/news/azertyazert> Line 1
NameError: global name 'open' is not defined`

在其他脚本上，我也得到了页面，我没有足够的权限来更改文章的状态（从而触发条件规则）。

无论如何，那是使用 Runscript，有没有人知道在触发规则时执行脚本的另一种方法或如何使 runscript 任何脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:36:39.600

Zope / Plone 中的 Python 脚本在*受限*环境中运行。抛出错误是因为您无法从那里的文件系统打开文件。

如果要执行不受限制的 Python 代码，请改用[外部方法来指向文件系统存储的脚本。](http://plone.org/documentation/kb/create-and-use-an-external-method)

该`runscript`操作仅将`object`用作上下文。您的脚本可以随意忽略该上下文。

# java - 图像上的 Java 图像具有白色 b/g，即使它是 png

> ID：15727464
> 
> 赞同：0
> 
> 时间：2013-03-31T07:45:40.973
> 
> 标签：java, image, overlay

如下所示，我在另一个 BufferedImage 上有一个 BufferedImage。它们都是png，我希望叠加图像上没有背景。我确信有办法做到这一点，但我不确定 api 在哪里。

这是有问题的方法：

```
private static BufferedImage finalizeImage(BufferedImage originalImage, String tokenImage, Integer occurrences, int height, int width, int type){

    //Font font = new Font("Courier New", Font.PLAIN, 12);
    BufferedImage resizedImage = new BufferedImage(width, height, type);
    Graphics2D g = resizedImage.createGraphics();
    FontMetrics fm = g.getFontMetrics();
    int strWidth = (fm.stringWidth(tokenImage));
    int imageWidth = resizedImage.getWidth();
    int textBegin = (imageWidth - strWidth) / 2;
    //g.setFont(font);
    g.drawImage(originalImage, 0, 0, width, height, null);
    g.setColor(Color.black);
    int textHeight = (fm.getAscent() + (TOKEN_HEIGHT - (fm.getAscent() + fm.getDescent())) / 2);
    g.drawString(tokenImage, textBegin, textHeight); 

    //for multiple occurrences
    try {
        BufferedImage numOnSubscript = ImageIO.read(Thread.currentThread().getContextClassLoader().getResourceAsStream("images/ui/tokens/subscript.fw.png"));
        g.drawImage(numOnSubscript, width - 20, height-20, 20, 20, null);
        g.setColor(Color.white);
        g.drawString(occurrences.toString(), width - 16, (height-20)*2 - 1);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    g.dispose();

    return resizedImage;

} 
```

这是正在发生的事情。

![重叠错误](https://i.stack.imgur.com/Mj4rW.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:47:38.390

我发现了我的问题。当然，这是最愚蠢的事情。我在烟花中默认使用白色背景：-/

# php - PHP：将 Blob 图像插入 SQLite 表

> ID：15727466
> 
> 赞同：2
> 
> 时间：2013-03-31T07:46:00.727
> 
> 标签：php, sqlite, cakephp, blob

我正在尝试使用（cakephp）将图像插入到 BLOB 列中的 sqlite DB。

我正在使用此代码

```
$insert = "INSERT INTO story (page, image) 
                    VALUES (:page, :image)";
        $stmt = $file_db->prepare($insert);

        // Bind parameters to statement variables
        $img = file_get_contents($this->request->data['image']['tmp_name']);
        $img = mysql_real_escape_string($img);
        $stmt->bindParam(':page', $this->request->data['page']);
        $stmt->bindParam(':image', $img);

           // Execute statement
          $stmt->execute(); 
```

它正在插入，但字符集不是它应该的 blob 数据.. 有没有其他方法可以做到这一点，否则我的代码有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T18:16:27.350

这**是**对标题中问题的回答，因为它在 [php sqlite blob] 中排名第一。这不使用 PDO，因为我遇到了麻烦。您必须使用准备好的语句，通常无法执行文字 SQL 插入，因为 blob 的大小太大。这是更新而不是插入，但基本相同。

```
// example variables
$row_id=1;
$image_filename="/home/mywebsite/public_html/images/an_image.png";
$sqlite_table_name="user_images";
$database_filename="database.sqlite";
// the blob field in the sqlite table is called ZIMAGE and the id field is ZID.

// Code
if (file_exists($image_filename)) {
$db = new SQLite3($database_filename);
$query = $db->prepare("UPDATE '{$sqlite_table_name}' SET ZIMAGE=? WHERE ZID=?");
$image=file_get_contents($image_filename);
$query->bindValue(1, $image, SQLITE3_BLOB);
$query->bindValue(2, $row_id, SQLITE3_TEXT);
$run=$query->execute();
} 
```

我认为编程中没有任何硬性规则，在某些情况下，我将图像存储在 Sqlite 中的 blob 中。我还使用正则表达式而不是 Xpath 来抓取网页！什么都能完成工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T08:02:16.717

这不是答案，但这个问题有“不确定性”，太长了，不能作为评论

1.  您提到了 CakePHP，但您的问题中没有涉及 CakePHP
2.  你提到'SQLite'，但你使用的是mysql_real_escape？

请明确您打算使用的数据库。

关于 MySQL 和在数据库中存储图像；

*   PHP 中的 mysql_ 函数已**弃用**且**不再维护**
*   尝试确定是否*真的*需要将图像**数据存储** *在*数据库中，一般情况下，最好将图像本身存储在文件系统中，并将图像的名称存储在数据库中

阅读此问题以获取有关在 mysql 中插入图像的答案：

[使用 php 在 MySql 数据库中插入 Blob](https://stackoverflow.com/questions/7052655/insert-blobs-in-mysql-databases-with-php)

阅读此问题以获取有关在 SQLite 中插入图像（使用 PDO）的答案：

[远程图像文件到 PHP 中的 sqlite blob？](https://stackoverflow.com/questions/3401761/remote-image-file-to-sqlite-blob-in-php)

这是 BLOB 的通用 PDO 逐步演练；

[http://www.phpeveryday.com/articles/PDO-Working-With-BLOBs-P554.html](http://www.phpeveryday.com/articles/PDO-Working-With-BLOBs-P554.html)

# c# - 项目编译正常时 XAML 中的“命名空间中不存在”错误

> ID：15727468
> 
> 赞同：1
> 
> 时间：2013-03-31T07:46:07.260
> 
> 标签：c#, wpf, xaml, visual-studio-2012, designer

在处理编译和运行良好且没有任何编译器或运行时错误的项目时，我在设计视图中不断收到 XAML 错误和“无效标记”。

具体来说，我要打开的项目位于此处：

[http://www.codeproject.com/Articles/474212/Zombie-Explorer-AN-Tier-application-from-top-to-b](http://www.codeproject.com/Articles/474212/Zombie-Explorer-A-N-Tier-application-from-top-to-b)

问题似乎在于在 XAML 中使用任何不属于我的源代码的外部库中的类，例如 Cinch 和 MahApps 包。我发现在某些情况下我可以通过 NuGet 包管理器添加包，它会替换引用，有时它会修复错误。

老实说，我不确定是否有一个 XAML 文件可以打开而不会出现错误，甚至是关于同一解决方案中未解决的资源引用的一些错误。

我已经读过将“最大并行项目构建”更改为 1 可以解决这些类型的问题，但我已经尝试过并得到相同的结果。

**有什么方法可以修复这些错误，以便我可以使用 XAML 设计器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T04:52:33.407

我下载了您的代码并正在查看它——您是否有某个特定的 .xaml 文件有疑问？

一般来说，是的 - 让设计器（无论是 VS 还是 Blend）在编译和运行良好时无错误地呈现 XAML 组合可能需要一点尝试。要解决此问题，您可以使用 Visual Studio 的另一个实例调试 Visual Studio 本身呈现它的过程。或者，更费力的路线，通过剥离它直到没有错误显示，然后重新输入它直到你看到错误再次出现。我自己创建了一个记录器来记录渲染期间的错误（在 VS 设计器中），以帮助我发现它的不同之处。

请务必记住，Designer 在解析和呈现您的 xaml 对象时在重新创建您的代码时具有非常特殊的行为。它在 xaml 本身中执行代码。如果您的 xaml 具有导致此问题的 xaml 中表达的绑定，它将创建视图模型对象。但是，令人惊讶的是，它不会**执行**您的主要 xaml 对象（例如 Window 或 UserControl）的构造函数。因此，如果您依赖于存在一个对象以便可以呈现它，请在设计时执行的代码中进行创建或初始化，例如属性获取器或绑定属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T17:56:27.523

我遇到了类似的问题，尽管“缺失”的课程在我自己的项目中。我将我的项目从（镜像）网络驱动器移动到本地驱动器并解决了它 - 表明问题是 VS 文件管理不善。

# jsp - 在 JSTL 中遍历 ArrayList 时获取空白页

> ID：15727470
> 
> 赞同：0
> 
> 时间：2013-03-31T07:46:17.510
> 
> 标签：jsp, servlets, jstl, javabeans

这是我的 Servlet，其中将文本框值添加到 ArrayList。我也在使用 JavaBeans。

```
protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        String companyName = request.getParameter("txtCompany");
        double price = Double.parseDouble(request.getParameter("txtPrice"));
        HttpSession session = request.getSession();
        // Invoice r = new Invoice();

        ArrayList<Invoice> list = (ArrayList<Invoice>) session
                .getAttribute("EInvoice.list");

        if (list == null) {
            list = new ArrayList<Invoice>();
        }
        list.add(new Invoice(companyName, price));

        session.setAttribute("EInvoice.list", list);

        String url = "/Show.jsp";

        RequestDispatcher rd = getServletContext().getRequestDispatcher(url);
        rd.forward(request, response);

    } 
```

这是 Show.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Show</title>
    </head>
    <body>
        <c:forEach var="list" items="${EInvoice.list}">
            <h1>${list.companyName} ${list.price}</h1>
        </c:forEach>
    </body>
    </html> 
```

我希望它显示输入的文本框值，但我得到的只是一个空白页。知道为什么吗？在我学习 JSTL 时，请原谅任何愚蠢的代码错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:29:46.347

在[表达式语言 (EL)](https://stackoverflow.com/tags/el/info)中，句`.`点是一个特殊的运算符，用于将属性与 bean 分开。它不应在属性名称中使用，否则您必须使用大括号表示法明确指定范围映射。您的具体问题是因为它正在搜索具有确切名称“EInvoice”的属性，然后它会尝试调用该`getList()`方法。但是，EL 范围中不存在这样的属性，因此没有什么可以迭代的。

如前所述，您可以改用范围映射上的大括号表示法来引用它：

```
<c:forEach var="list" items="${sessionScope['EInvoice.list']}"> 
```

但是，我建议只重命名属性名称。例如：

```
session.setAttribute("invoices", invoices); 
```

等价地：

```
<c:forEach var="invoice" items="${invoices}">
    <h1>${invoice.companyName} ${invoice.price}</h1>
</c:forEach> 
```

请注意，我还立即使变量名称更具自我记录性。在查看变量名称“列表”时，人们不知道它究竟包含哪些项目。此外，在循环中将列表中的每个迭代项命名为“列表”也没有任何意义。

# android - 如何从自定义适配器调用 notifyDataSetChanged()？

> ID：15727477
> 
> 赞同：1
> 
> 时间：2013-03-31T07:47:47.657
> 
> 标签：android, listview, adapter

我有一个自定义 ListView，其中每个项目都分为两部分。一个是描述，另一个是删除按钮。所以从我的适配器的 getView() 方法中，我在两者上都设置了 onClickListener()。如果用户点击描述部分，那么它将打开一个新活动，如果用户单击删除按钮，则列表项将被删除。我的问题是，在从列表视图中删除项目后，我无法刷新列表。我不知道从哪里以及如何调用 notifyDataSetChanged（ ) 在适配器中，以便刷新我的列表视图。

我的适配器的 getView() 方法如下所示：

```
 @Override
 public View getView(final int position, View convertView, ViewGroup parent) {
     // TODO Auto-generated method stub

     ViewHolder holder = null;
     if (convertView == null) {
         LayoutInflater inflator = ((Activity) context).getLayoutInflater();
         convertView = inflator.inflate(R.layout.list_item, null);
         holder = new ViewHolder();

         holder.listCount = (TextView) convertView
             .findViewById(R.id.listCount);
         holder.Number = (TextView) convertView
             .findViewById(R.id.Value);
         holder.journey = (TextView) convertView.findViewById(R.id.journey);
         holder.Item = (RelativeLayout) convertView
             .findViewById(R.id.Item);
         holder.delete = (LinearLayout) convertView
             .findViewById(R.id.delete);
         convertView.setTag(holder);
     } else {
         holder = (ViewHolder) convertView.getTag();
     }
     p = getItem(position);

     holder.listCount.setText(position + 1 + ".");
     holder.Number.setText(p.getNumber());
     holder.journey.setText(p.getPoint() + "-" +
         p.getUpto());
     holder.Item.setOnClickListener(new OnClickListener() {
         @Override
         public void onClick(View v) {
             Point pp = pLists.get(position);
             Intent intent = new Intent(context, abc.class);
             Bundle bundle = new Bundle();
             bundle.putString("Number", p.getNumber());
             bundle.putBoolean("isInDatabase", true);
             intent.putExtras(bundle);
             context.startActivity(intent);
         }
     });

     holder.delete.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View arg0) {

             new deletingSelected().execute(pLists.get(position).get_id());
         }
     });
     return convertView;
 } 
```

该项目已通过 OnClick 删除，但我应该将 notifyDataSetChanged() 的代码放在哪里？

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:49:25.657

在您的 onClick 删除后调用 notifyDataSetChanged()

# mysql - MySQL中的数据检索

> ID：15727478
> 
> 赞同：0
> 
> 时间：2013-03-31T07:47:51.620
> 
> 标签：mysql, sql, select

我想从年龄在一定范围内的表中检索一些数据。

# 例子

年龄在 20 到 30 岁之间的人。我该怎么做？我尝试了以下查询，但我无法得到它。

```
$age="SELECT * 
    From    rec_patient_reg
    WHERE   p_age  >='$afrom' <= '$to'";
    $result1=mysql_query($age) 
    or die(mysql_error());
    while($result = mysql_fetch_array($result1)) {
    echo "<b>Patient ID</b> = " .$result["Patient_id"] . " <br>";
    echo "<b>NAME</b> = ".$result["p_fname"]."<br><br>----------------<br><br>"; 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:48:57.457

我敢打赌，因为您使用的是 mysql，所以您没有收到任何错误消息。看看下面这个例子，

```
SELECT *
FROM   tableName
WHERE  Age  >= 20 <= 25 
```

这在任何其他 RDBMS 上都是不允许的，但 MySQL 允许。它的作用是隐含地允许在过滤器的最右侧使用布尔表达式，例如

```
SELECT *
FROM   tableName
WHERE  (Age  >= 20) <= 25 
```

所以在这种情况下，该值现在被解析为（*假设 Age = 5*）

```
WHERE  0  >= 25 
```

导致您检索到意外的结果。

* * *

`BETWEEN`如果要搜索范围，可以使用，

```
SELECT * 
From    rec_patient_reg
WHERE   p_age  BETWEEN '$afrom' AND '$to' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:49:42.370

首先，不要使用`mysql_*`已弃用的函数。

您的查询应该是：

```
SELECT * 
FROM `rec_patient_reg`
WHERE `p_age` BETWEEN '$afrom' AND '$to' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:29:21.680

也许像这样？

```
$age = "SELECT * FROM rec_patient_reg WHERE p_age  >='$afrom' AND p_age <= '$to'"; 
```

# c - 在 C/Gameboy 编程中使用两个数组

> ID：15727479
> 
> 赞同：5
> 
> 时间：2013-03-31T07:48:05.447
> 
> 标签：c, gameboy, game-boy-advance

对于 Gameboy 编程中的游戏，我使用了四个名为`top`、`oldTop`和`bottom`的数组`oldBottom`：

```
struct Point { int x, y; };
struct Rect  { struct Point xx, yy; };

Rect top[size], oldTop[size];
Rect bottom[size], oldBottom[i]; 
```

其中 Rect 是由两个结构点组成的结构，左上角点和右下角点。

游戏的想法是让随机高度的方块从天花板上向下，从地板上向下。它类似于直升机经典游戏。在我的无限 while 循环中，我使用以下代码将所有矩形向下移动一个像素

```
while (1)
{
    for (int i = 0; i < size; i++)
    {
        //in Struct Rect, xx is the top-left corner point, and yy is the bottom right
        top[i].xx.x--;
        top[i].yy.x--;
        bottom[i].xx.x--;
        bottom[i].yy.x--;

        if (top[i].xx.x < 0)
        {
            top[i].xx.x += 240;
            top[i].yy.x += 240;
        }

        if (bottom[i].xx.x < 0)
        {
            bottom[i].xx.x += 240;
            bottom[i].yy.x += 240;
        }
    }

    for (int i = 0; i < size; i++)
    {
        drawRect(oldTop[i], colorBlack);
        drawRect(oldBottom[i], colorBlack);
    }

    /*call delay function that wait for Vertical Blank*/
    for(int i = 0; i < size; i++)
    {
        drawRect(top[i], colorGreen);
        drawRect(bottom[i], colorGreen);
        oldTop[i] = top[i];
        oldBottom[i] = bottom[i];
    }
} 
```

drawRect 方法使用 DMA 来绘制矩形。

使用此代码，代码应显示如下矩形：（在油漆中绘制） ![在此处输入图像描述](https://i.stack.imgur.com/xP4lu.png)

但我得到的结果是

![在此处输入图像描述](https://i.stack.imgur.com/GIBN8.png)

奇怪的是，如果我根本不画底行，那么顶行画得很好。当我画两者时，结果只会变得混乱。这真的很奇怪，因为我认为代码应该可以正常工作，并且代码不是很复杂。发生这种情况是否有特定原因，有没有办法解决这个问题？

谢谢。

我用来绘制矩形的代码如下所示：

```
void drawRect(int row, int col, int width, int height){
    int i;
for (i=0; i<height; i++)
{
    DMA[3].src = &color;
        DMA[3].dst = videoBuffer + (row+r)*240 +  col);
    DMA[3].cnt = DMA_ON | DMA_FIXED_SOURCE | width;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:47:16.690

这是一个基于您的代码的调试 SSCCE（[简短、独立、正确的示例）。](http://sscce.org/)此代码中有触发的断言；它运行，但已知不正确。我已重命名`bottom`为`btm`和`oldBottom`以`oldBtm`使名称是对称的；它使代码布局更加系统化（但在其他方面无关紧要）。

```
#include <assert.h>
#include <stdio.h>

typedef struct Point { int x, y; } Point;
typedef struct Rect  { struct Point xx, yy; } Rect;
enum { size = 2 };
typedef enum { colourGreen = 0, colourBlack = 1 } Colour;

/*ARGSUSED*/
static void drawRect(Rect r, Colour c)
{
    printf(" (%3d)(%3d)", r.xx.x, r.yy.x);
}

int main(void)
{
    Rect top[size], oldTop[size];
    Rect btm[size], oldBtm[size];
    int counter = 0;

    for (int i = 0; i < size; i++)
    {
        top[i].xx.x = 240 -  4 * i;
        top[i].xx.y =   0 + 10 + i;
        top[i].yy.x = 240 - 14 * i;
        top[i].yy.y =   0 + 20 + i;
        btm[i].xx.x =   0 + 72 * i;
        btm[i].xx.y =   0 + 10 * i;
        btm[i].yy.x =   0 + 12 * i;
        btm[i].yy.y =   0 + 20 * i;
        oldTop[i] = top[i];
        oldBtm[i] = btm[i];
    }

    while (1)
    {
        if (counter++ > 480)  // Limit amount of output!
            break;
        for (int i = 0; i < size; i++)
        {
            //in Struct Rect, xx is the top-left corner point, and yy is the bottom right
            top[i].xx.x--;
            top[i].yy.x--;
            btm[i].xx.x--;
            btm[i].yy.x--;

            if (top[i].xx.x < 0)
            {
                top[i].xx.x += 240;
                top[i].yy.x += 240;
            }

            if (btm[i].xx.x < 0)
            {
                btm[i].xx.x += 240;
                btm[i].yy.x += 240;
            }
        }

        for (int i = 0; i < size; i++)
        {
            assert(top[i].xx.x >= 0 && top[i].yy.x >= 0);
            assert(btm[i].xx.x >= 0 && btm[i].yy.x >= 0);
        }

        for (int i = 0; i < size; i++)
        {
            drawRect(oldTop[i], colourBlack);
            drawRect(oldBtm[i], colourBlack);
        }

        /*call delay function that wait for Vertical Blank*/
        for(int i = 0; i < size; i++)
        {
            drawRect(top[i], colourGreen);
            drawRect(btm[i], colourGreen);
            oldTop[i] = top[i];
            oldBtm[i] = btm[i];
        }
        putchar('\n');
    }
    return(0);
} 
```

正如后期评论中所指出的，这与您的代码之间的一个很大区别是`oldBottom`您的代码中声明为：

```
Rect top[size], oldTop[size];
Rect bottom[size], oldBottom[i]; 
```

使用大小`i`而不是`size`. 这可能是您看到的数组覆盖问题的原因。

但是还有第二个问题；中间火循环中的断言：

```
 (240)(240) (  0)(  0) (236)(226) ( 72)( 12) (239)(239) (239)(239) (235)(225) ( 71)( 11)
 (239)(239) (239)(239) (235)(225) ( 71)( 11) (238)(238) (238)(238) (234)(224) ( 70)( 10)
 (238)(238) (238)(238) (234)(224) ( 70)( 10) (237)(237) (237)(237) (233)(223) ( 69)(  9)
 (237)(237) (237)(237) (233)(223) ( 69)(  9) (236)(236) (236)(236) (232)(222) ( 68)(  8)
 (236)(236) (236)(236) (232)(222) ( 68)(  8) (235)(235) (235)(235) (231)(221) ( 67)(  7)
 (235)(235) (235)(235) (231)(221) ( 67)(  7) (234)(234) (234)(234) (230)(220) ( 66)(  6)
 (234)(234) (234)(234) (230)(220) ( 66)(  6) (233)(233) (233)(233) (229)(219) ( 65)(  5)
 (233)(233) (233)(233) (229)(219) ( 65)(  5) (232)(232) (232)(232) (228)(218) ( 64)(  4)
 (232)(232) (232)(232) (228)(218) ( 64)(  4) (231)(231) (231)(231) (227)(217) ( 63)(  3)
 (231)(231) (231)(231) (227)(217) ( 63)(  3) (230)(230) (230)(230) (226)(216) ( 62)(  2)
 (230)(230) (230)(230) (226)(216) ( 62)(  2) (229)(229) (229)(229) (225)(215) ( 61)(  1)
 (229)(229) (229)(229) (225)(215) ( 61)(  1) (228)(228) (228)(228) (224)(214) ( 60)(  0)
Assertion failed: (btm[i].xx.x >= 0 && btm[i].yy.x >= 0), function main, file video.c, line 63. 
```

我认为您的“非负面”检查应修改为：

```
 if (top[i].xx.x < 0)
                top[i].xx.x += 240;
            if (top[i].yy.x < 0)
                top[i].yy.x += 240;

            if (btm[i].xx.x < 0)
                btm[i].xx.x += 240;
            if (btm[i].yy.x < 0)
                btm[i].yy.x += 240; 
```

这阻止了任何消极的事情。但是，您应该简单地使用原始块检查右下角的 x 坐标（而不是左上角的坐标），这是完全合理的。或者，环绕可能需要更复杂。那是你来破译的。但我认为出现奇怪的显示是因为您在不打算也不应该提供的地方提供了负值。

这里需要注意的关键点是：

1.  在调试算法时，您不必使用正常的显示机制。
2.  调试时，尽可能减小循环大小 ( `size == 2`)。
3.  仅打印相关信息（此处为 x 坐标）有助于减少输出。
4.  使用计数器代码来限制输出量可以简化事情。
5.  如果出现问题，请尽早寻找问题的模式。

`drawRect()`在我得到所示设计之前，我有各种版本的函数，它在宽屏幕（例如 120x65）终端窗口上运行良好。

# ruby - Ruby 1.9.3 中的返回函数是否 损坏？

> ID：15727481
> 
> 赞同：1
> 
> 时间：2013-03-31T07:48:28.570
> 
> 标签：ruby

我有一个看起来像这样的代码块：

```
returning({}) do |hash|
attributes.each { |key, value|
        hash[key.underscore] = value
    }

end 
```

将其重写为不使用返回魔法修复了此方法与 Ruby 1.9.3 的冲突。这真的解决了什么问题，还是我只是错过了一些明显的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:51:58.063

我个人从未听说过`returning`。但是您的代码段可以用更标准的方法重写。

```
attributes.each_with_object({}) do |(key, value), memo|
  memo[key.underscore] = value
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:56:47.550

该方法`returning`在 Ruby 中从来都不是标准方法。它是在 Rails 早期版本的 Rails 的 ActiveSupport 中提供的。它是通常被称为[Kestrel](http://combinators.info/#kestrels)的 K-combinator 的实现。Ruby 核心库现在提供了一个等效的方法[`Object#tap`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-tap)。只需在您的代码段中替换这个词`tap`，`returning`它就会按您的预期工作。

但是，对于您要尝试做的事情，这根本是不必要的。使用`map`and [`Hash::[]`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)，以获得更简单的表达式：

```
Hash[ attributes.map { |k, v| [k.underscore, v] } ] 
```

# java - spring mvc - 客户端发送的请求在语法上不正确

> ID：15727488
> 
> 赞同：1
> 
> 时间：2013-03-31T07:48:58.840
> 
> 标签：java, spring

我检查了有关此的线程，但没有一个对我有帮助。我是 spring 新手，当我尝试通过参数发送请求值时出现此错误。

```
@RequestMapping(value="/receipt", params = "id", method=RequestMethod.GET)
public String index(@PathVariable String id, ModelMap model){
    return "receipt"
} 
```

现在，当我尝试使用 url: localhost:8080/url/receipt?id=10 访问 url 时，我得到了那个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:31:39.763

您将 id 声明为 PathVariable，但您将其作为 RequestParamter 传递。

如果你想使用 url: localhost:8080/url/receipt?id=10 访问你的函数，你应该将你的函数更改为：

```
@RequestMapping(value="/receipt",  method=RequestMethod.GET)
public String index(@RequestParam(value = "id", required = true) String id){
    return "receipt";
} 
```

# javascript - 使用父函数 jquery 显示类名

> ID：15727507
> 
> 赞同：1
> 
> 时间：2013-03-31T07:51:57.440
> 
> 标签：javascript, jquery, this

我正在使用**`jQuery`**按钮后面的 .parents() 函数。我想显示要检查的类名。例如，我正在使用：

```
row = (this).parents();
alert(row); 
```

但不显示类名，而是显示**“object object”**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:58:30.117

您可以使用以下方法检索所有类名的数组`parents`：

```
var parentCls = $(this).parents().map(function () {
                    return this.className;
                }).get().join(", "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:58:07.677

```
 $(this).parent().attr("class"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T07:58:25.960

因为它`row`代表父元素。

所以要检索它的类，你必须这样做：

```
alert($(row).attr("class")); 
```

享受...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T07:59:32.397

尝试以下操作：

```
$(row).attr("class") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T08:13:03.137

```
 alert($(this).parent().attr("class");); 
```

# python - 使用 Python 正则表达式从带有汉字的推文中识别转发者

> ID：15727510
> 
> 赞同：2
> 
> 时间：2013-03-31T07:52:01.020
> 
> 标签：python, regex, weibo

鉴于新浪微博的一条推文：

```
 tweet = "//@lilei: dd //@Bob: cc//@Girl: dd//@魏武: 利益所致 自然念念不忘// @诺什: 吸引优质  客户，摆脱屌丝男！！！//@MarkGreene: 转发微博" 
```

请注意，// 和@诺什之间有一个空格。

我想获取转发者列表，如下所示：

```
 result = ['lilei', 'Bob', 'Girl', '魏武', 'MarkGreene'] 
```

我一直在考虑使用以下脚本：

```
RTpattern = r'''//?@(\w+)'''
rt = re.findall(RTpattern, tweet) 
```

然而，我没能得到“魏武”这个中文单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T07:59:13.980

使用[`re.UNICODE`](http://docs.python.org/2/library/re.html#re.UNICODE)标志：

```
re.UNICODE
Make \w, \W, \b, \B, \d, \D, \s and \S dependent on the Unicode character 
properties database. 
```

* * *

```
tweet = u"//@lilei: dd //@Bob: cc//@Girl: dd//@魏武: 利益所致 自然念念不忘// @诺什: 吸引优质  客户，摆脱屌丝男！！！//@MarkGreene: 转发微博"
RTpattern = r'''//?@(\w+)'''
for word in re.findall(RTpattern, tweet, re.UNICODE):
    print word

# lilei
# Bob
# Girl
# 魏武
# MarkGreene 
```

# javascript - JavaScript onclick 事件不起作用

> ID：15727512
> 
> 赞同：1
> 
> 时间：2013-03-31T07:52:11.677
> 
> 标签：javascript, onclick

一个简单的 JavaScript onclick 事件不起作用，但我不明白为什么，这里是代码：

```
<button onclick="removeLol()">remove style</button>

function removeLol() {
    alert("hello");
} 
```

这是一个简单的例子：http: [//jsfiddle.net/YNQg6/1/](http://jsfiddle.net/YNQg6/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:57:44.893

这只是因为 jsfiddle 插入 javascript 的方式。

Jsfiddle 将您的代码包装到一个限制范围并保护全局命名空间的函数中：

```
window.onload=function(){
  function removeLol() {
    alert("hello");
    element.className = element.className.replace(" lol ", "");
  }
} 
```

如果您告诉 jsfiddle 将代码注入到`document body`它的工作原理：

[http://jsfiddle.net/YNQg6/13/](http://jsfiddle.net/YNQg6/13/)

或者你可以把你的“本地”函数变成一个全局函数：

```
window.removeLol = removeLol; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:58:42.520

该代码工作得很好（刚刚在我的服务器上尝试过）。检查您的控制台是否有其他可能导致脚本无法运行的错误

# java - 用户输入的循环方式不正确、循环不止一次或循环不正确

> ID：15727513
> 
> 赞同：0
> 
> 时间：2013-03-31T07:52:42.153
> 
> 标签：java, loops, input

在这里，用户可以根据自己的意愿输入选择武器的位置。

```
 String ans = "Y";
    while (ans.equalsIgnoreCase("Y"))
    {
        while (monster >= 0 && you >= 0)
        {
            System.out.println("\nPick Weapon!");
            String input = keyboard.next(); 
```

这是我遇到问题的一段代码

```
 else if (input.equalsIgnoreCase("energy"))
            {

                System.out.println("\nYou have 0.0 energy and cannot use you have to wait for 5 seconds for it to charge up half or take a hit and go ALL OUT BABY");
                try
                {
                Thread.sleep(5000);
                }catch(InterruptedException e)
                {
                }
                    System.out.println("\nSystem has charges and is ready for use, press 1");
                    int inputattack = keyboard.nextInt();
                    energy += 3000;
                    if (inputattack == 1)
                    {
                        String inputofretry = "Y";
                        if ((energy >= 3000) && (inputofretry.equalsIgnoreCase("Y")))
                        {
                            System.out.println("\nYou have used all of your energy and did a damage of 1000 to the moster!");
                            monster -= 1000;
                            energy -= 3000;
                            System.out.println("\nNow the monster has a health of " + monster);
                            ----------------->System.out.println("\nWould you like to use up your other half also or  use a diffrent weapon");
                            inputofretry = keyboard.next();
                            if (inputofretry.equalsIgnoreCase("N"))
                            {
                                ans = "Y";
                            }//end of break out of if
                        }//end of energy half use

                        else if (energy <= 0)
                        {
                            System.out.println("\nRan out of energy and you have been redirected to the refill of energy");
                            ans = "Y";
                        }

                }//end of input attack 
```

当用户按“Y”再次使用能量时，问题就发生了，它不会再次通过 if。

主要问题是，当我回答错误的问题时，例如输入答案以选择武器或选择相同的武器（同样当我对在我标记的行中选择相同的选项说是时--->它仍然跳出循环而不是留在循环中）它要求我选择武器 3 次而不是 1 次，我不知道为什么，也很抱歉长代码，但我想问用户是否可以如果他们能感谢我是 java 的超级菜鸟，而且我是堆栈新手，所以我对一切都是菜鸟，让我的代码变得更好。

因此，如果可以，请向我询问有关代码的任何问题

提前感谢任何帮助过的人！！

完整代码

```
 import java.util.Scanner;
public class nestedif
{
    public static void main(String[] args)
    {
        System.out.println("\nWelcome\n");

        Scanner keyboard = new Scanner(System.in);

        int bombs = 60;
        int arrows = 2;
        boolean bow = true;
        double energy = 0.0;
        double monster = 3000;
        int you = 1000;

        System.out.println("\nMonster has appeared!!\n");

        System.out.println("\nHeres your inventory");
        System.out.println("\n60 bombs");
        System.out.println("\n2 ultra arrows");
        System.out.println("\n0.0 energy, you can recharge later if  you choose to do so");

        String ans = "Y";
        while (ans.equalsIgnoreCase("Y"))
        {
            while (monster >= 0 && you >= 0)
            {
                System.out.println("\nPick Weapon!");
                String input = keyboard.next();

                if (input.equalsIgnoreCase("bombs"))
                {
                    if (bombs >= 0)
                    {
                        System.out.println("\nYou have chosen Bombs\n");
                        System.out.println("\nHit 9 to attack with big bombs which is -2 bombs or hit 8 for small bomb which is -1\n");
                        int choice1 = keyboard.nextInt();

                        if (choice1 == 9)
                        {
                                System.out.println("\nYou have chosen to attack with a big bomb 2 bombs ahve been taken from your inventory");
                                System.out.println("\nYou damaged the monster by 800\n");
                                monster -= 800;
                                bombs -= 2;
                                System.out.println("Now the monster has the health of" + monster + "\n");

                                System.out.println("\nHit Y to choose another weapon or N to back out of the fight");
                                ans = keyboard.next();
                         }//if end

                        else if (choice1 == 8)
                        {
                                System.out.println("\nYou have chosen to attack with a small bomb");
                                System.out.println("\nYou damaged the monster by 400\n");
                                monster -= 400;
                                bombs -= 1;
                                System.out.println("Now the monster has the health of" + monster + "\n");

                                System.out.println("\nHit Y to choose another weapon or N to back out of the fight");
                                ans = keyboard.next();

                        }//else if end of small bombs

                    }//end of if loop to do something i dont know i just leant this
                    else
                    {
                        System.out.println("\nYour bombs have depleted, please choose another weapon of your choice!");
                    }

                }//Bombs end

                else if (input.equalsIgnoreCase("arrows"))
                {
                    System.out.println("\nYou have chosen arrows as your weapon!");
                    if ((bow == true) && (arrows >= 1))
                    {
                        System.out.println("\nPlease press 1 to attack");
                        double arrowinput = keyboard.nextInt();

                        if (arrowinput == 1)
                        {
                        System.out.println("\nYou have only " + arrows + " left");
                        System.out.println("\nYou used Arrow and damaged the monster by 500 ");
                        monster -= 500;
                        arrows --;
                        System.out.println("\nNow the monster has the health of " + monster);
                        System.out.println("\nThe monster is still alive and is attacking you you have to kill it NOW CHOOSE A WEAPON SIR");
                        ans = keyboard.next();
                        }//end of attack and IF
                        else
                        {
                            System.out.println("\nYou have to chosen to be attacked by the monster and be eaten");
                            ans.equals("Y");
                        }//end of else
                    }//end of if to use the arrows and boolean

                    else
                    {
                        System.out.println("\nYou chose not to use the arrows now arrow is or you have run out of arrows arrow is unusable");
                        bow = false;
                    }//end of else to check for arrows

                }//end of bow

                else if (input.equalsIgnoreCase("energy"))
                {

                    System.out.println("\nYou have 0.0 energy and cannot use you have to wait for 5 seconds for it to charge up half or take a hit and go ALL OUT BABY");
                    try
                    {
                    Thread.sleep(5000);
                    }catch(InterruptedException e)
                    {
                    }
                        System.out.println("\nSystem has charges and is ready for use, press 1");
                        int inputattack = keyboard.nextInt();
                        energy += 3000;
                        if (inputattack == 1)
                        {
                            String inputofretry = "Y";
                            if ((energy >= 3000) && (inputofretry.equalsIgnoreCase("Y")))
                            {
                                System.out.println("\nYou have used all of your energy and did a damage of 1000 to the moster!");
                                monster -= 1000;
                                energy -= 3000;
                                System.out.println("\nNow the monster has a health of " + monster);
                                System.out.println("\nWould you like to use up your other half also or  use a diffrent weapon");
                                inputofretry = keyboard.next();
                                if (inputofretry.equalsIgnoreCase("N"))
                                {
                                    break;
                                }//end of break out of if
                            }//end of energy half use

                            else if (energy <= 0)
                            {
                                System.out.println("\nRan out of energy and you have been redirected to the refill of energy");
                                ans = "Y";
                            }

                    }//end of input attack

                }//end of energy

            }//end of check for health
            break;

        }//While to change weapon

        if (you > monster)
        {
        System.out.println("\t\t\nYou have defeated the monster and have conquered the land of void so be happy!!\n");
        }
        else
        {
            System.out.println("\nYou have died and have bought a great dishono..... wait a minute you have 2 lives get yo ass up there and fight like aa man");
        }
    }//end of main
}//end of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:00:44.310

试试这个：我标记了我做了一些更改的地方。

```
import java.util.Scanner; 
```

公共类嵌套if{

```
public static void main(String[] args){
    System.out.println("\nWelcome\n");

    Scanner keyboard = new Scanner(System.in);

    int bombs = 60;
    int arrows = 2;
    boolean bow = true;
    double energy = 0.0;
    double monster = 3000;
    int you = 1000;

    System.out.println("\nMonster has appeared!!\n");

    System.out.println("\nHeres your inventory");
    System.out.println("\n60 bombs");
    System.out.println("\n2 ultra arrows");
    System.out.println("\n0.0 energy, you can recharge later if  you choose to do so");

    String ans = "Y";
    //change 1
    System.out.println("\nPick Weapon!");
    String input = keyboard.next();
    while(!(input.equalsIgnoreCase("bombs")) && !(input.equalsIgnoreCase("arrows")) && !(input.equalsIgnoreCase("energy"))){
        System.out.println("\nInvalid Weapon...\nRe-pick Weapon!");
        input = keyboard.next();
        if((input.equalsIgnoreCase("bombs")) && (input.equalsIgnoreCase("arrows")) && (input.equalsIgnoreCase("energy"))){
            break;
        }
    }
    //end of change 1

    while (ans.equalsIgnoreCase("Y"))
    {
        while (monster >= 0 && you >= 0)
        {
            //change 2.1
            if(input.equalsIgnoreCase("")){
                System.out.println("\nPick Weapon!");
                input = keyboard.next();
            }
            //end of change 2.1

            else{//change 2.2 (the else of the if statement above)
                if (input.equalsIgnoreCase("bombs"))
                {
                    if (bombs >= 0)
                    {
                        System.out.println("\nYou have chosen Bombs\n");
                        System.out.println("\nHit 9 to attack with big bombs which is -2 bombs or hit 8 for small bomb which is -1\n");
                        int choice1 = keyboard.nextInt();

                        if (choice1 == 9)
                        {
                                System.out.println("\nYou have chosen to attack with a big bomb 2 bombs ahve been taken from your inventory");
                                System.out.println("\nYou damaged the monster by 800\n");
                                monster -= 800;
                                bombs -= 2;
                                System.out.println("Now the monster has the health of" + monster + "\n");

                                System.out.println("\nHit Y to choose another weapon or N to back out of the fight");
                                ans = keyboard.next();
                         }//if end

                        else if (choice1 == 8)
                        {
                                System.out.println("\nYou have chosen to attack with a small bomb");
                                System.out.println("\nYou damaged the monster by 400\n");
                                monster -= 400;
                                bombs -= 1;
                                System.out.println("Now the monster has the health of" + monster + "\n");

                                System.out.println("\nHit Y to choose another weapon or N to back out of the fight");
                                ans = keyboard.next();

                        }//else if end of small bombs

                    }//end of if loop to do something i dont know i just leant this
                    else
                    {
                        System.out.println("\nYour bombs have depleted, please choose another weapon of your choice!");
                    }

                }//Bombs end

                else if (input.equalsIgnoreCase("arrows"))
                {
                    System.out.println("\nYou have chosen arrows as your weapon!");
                    if ((bow == true) && (arrows >= 1))
                    {
                        System.out.println("\nPlease press 1 to attack");
                        double arrowinput = keyboard.nextInt();

                        if (arrowinput == 1)
                        {
                        System.out.println("\nYou have only " + arrows + " left");
                        System.out.println("\nYou used Arrow and damaged the monster by 500 ");
                        monster -= 500;
                        arrows --;
                        System.out.println("\nNow the monster has the health of " + monster);
                        System.out.println("\nThe monster is still alive and is attacking you you have to kill it NOW CHOOSE A WEAPON SIR");
                        ans = keyboard.next();
                        }//end of attack and IF
                        else
                        {
                            System.out.println("\nYou have to chosen to be attacked by the monster and be eaten");
                            ans.equals("Y");
                        }//end of else
                    }//end of if to use the arrows and boolean

                    else
                    {
                        System.out.println("\nYou chose not to use the arrows now arrow is or you have run out of arrows arrow is unusable");
                        bow = false;
                    }//end of else to check for arrows

                }//end of bow

                else if (input.equalsIgnoreCase("energy"))
                {

                    System.out.println("\nYou have 0.0 energy and cannot use you have to wait for 5 seconds for it to charge up half or take a hit and go ALL OUT BABY");
                    try
                    {
                    Thread.sleep(5000);
                    }catch(InterruptedException e)
                    {
                    }
                        System.out.println("\nSystem has charges and is ready for use, press 1");
                        int inputattack = keyboard.nextInt();
                        energy += 3000;
                        if (inputattack == 1)
                        {
                            String inputofretry = "Y";
                            if ((energy >= 3000) && (inputofretry.equalsIgnoreCase("Y")))
                            {
                                System.out.println("\nYou have used all of your energy and did a damage of 1000 to the moster!");
                                monster -= 1000;
                                energy -= 3000;
                                System.out.println("\nNow the monster has a health of " + monster);
                                System.out.println("\nWould you like to use up your other half also or  use a diffrent weapon");
                                inputofretry = keyboard.next();
                                if (inputofretry.equalsIgnoreCase("N"))
                                {
                                    break;
                                }//end of break out of if
                            }//end of energy half use

                            else if (energy <= 0)
                            {
                                System.out.println("\nRan out of energy and you have been redirected to the refill of energy");
                                ans = "Y";
                            }

                    }//end of input attack

                }//end of energy

            }

        }//end of check for health
        break;

    }//While to change weapon

    if (you > monster)
    {
    System.out.println("\t\t\nYou have defeated the monster and have conquered the land of void so be happy!!\n");
    }
    else
    {
        System.out.println("\nYou have died and have bought a great dishono..... wait a minute you have 2 lives get yo ass up there and fight like aa man");
    }
}//end of main 
```

}//课程结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:28:35.450

我现在的电脑上没有java。我怀疑这可能是由于. 在输入之前和之前尝试`\n`在缓冲区中。`nextInt()``inputofretry.nextLine();``System.out.println("\nWould you like to use up your other half also or use a diffrent weapon");`

# python - 根据 Scapy 上的 ICMPv6 类型制作 IPv6 更新 plen 字段

> ID：15727514
> 
> 赞同：0
> 
> 时间：2013-03-31T07:53:16.910
> 
> 标签：python, scapy

在我的程序中，我使用 scapy 创建/解析数据包，但实际程序是 C++ 中的。由于用户只需要 ICMPv6 的前几个字段，这些字段对于所有 ICMPv6 数据包都是相同的，因此我在 C++ 端创建了一个 ICMPv6 类（使用 ICMPv6Unknown）。

我的问题是，虽然它们可以很好地处理 ICMPv6 的字段，但 IPv6 中的 plen 字段没有根据我放入 ICMPv6 标头的类型正确更新。

我不确定我可以在 IPv6 类中编辑什么以使其根据接下来的 ICMPv6 类型更改字段，现在它可以：

```
 def post_build(self, p, pay):
    p += pay
    if self.plen is None:
        l = len(p) - 40
        p = p[:4]+struct.pack("!H", l)+p[6:]
    return p 
```

失败是因为 ICMPv6Unknown 返回 len 为 4，因此它不会根据我的类型字段更改大小。我知道以太会根据字段更改类型，但我无法为 ICMPv6 重现此内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:56:19.480

为了解决这个问题，我向 IPv6 添加了一个 if 在这种情况下不使用 len(p) 的方法，方法如下：

```
 def post_build(self, p, pay):
    p += pay
    if self.plen is None:
        if self.nh == 58:
            icmp_type = ord(pay[0])
            l = icmpv6_len(icmp_type)
            print "len is: " + str(l)
    else:
    l = len(p) - 40
        p = p[:4]+struct.pack("!H", l)+p[6:]
    return p 
```

其中 icmpv6_len 静态返回类型的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:44:30.993

我通过重载 build_payload() 解决了这个问题：

```
def build_payload(self):
        if isinstance(self.payload, ICMPv6Unknown): 
            icmp_type = ord(str(self.payload)[0]) 
            icmp_class = eval(icmp6typescls[icmp_type]) 
            if self.payload.haslayer(Raw): #create actual class from the first 2 fields of the ICMPv6Unknown (type and code, ignoring the checksum) and add the other layers if there are any
                self.payload = icmp_class(str(self.payload[0])[0:2]) / self.payload[1:]
        else:
                self.payload = icmp_class(str(self.payload[0])[0:2])
        return super(IPv6 ,self).build_payload() 
```

这基本上将 ICMPv6Unknown 层中的前两个字段重新解析为我们想要的层。

# c# - 如何对调用 MVVM 中的异步方法的 DelegateCommand 进行单元测试

> ID：15727515
> 
> 赞同：16
> 
> 时间：2013-03-31T07:53:17.337
> 
> 标签：c#, unit-testing, mvvm, prism, delegatecommand

我是单元测试 MVVM 的新手，并在我的项目中使用 PRISM。我正在我们当前的项目上实施单元测试，并且没有运气在线找到资源来告诉我如何测试调用异步方法的 DelegateCommand。这是我的帖子的后续问题 -[如何使用异步方法对 ViewModel 进行单元测试。](https://stackoverflow.com/questions/15631635/how-to-unit-test-a-viewmodel-with-async-method)关于如何在 MVVM 中对异步方法进行单元测试，并回答说可以使用异步 TestMethod 测试公共方法。仅当我要测试的方法是公共方法时，此方案才有效。

问题是我想测试我的 DelegateCommand，因为这是我想在其他类上公开的唯一公开细节，其他一切都是私有的。我可以公开我的私有方法，但我永远不会这样做，因为它是一个糟糕的设计。我不确定如何解决这个问题 - 是否需要测试 DelegateCommand，或者还有其他一些工作可以解决这个问题？我很想知道其他人是如何做到这一点的，并以某种方式引导我走上正确的道路。

这是我的代码

```
 async void GetTasksAsync()
        {
            this.SimpleTasks.Clear();
            Func<IList<ISimpleTask>> taskAction = () =>
                {
                    var result = this.dataService.GetTasks();
                    if (token.IsCancellationRequested)
                        return null;
                    return result;
                };
            IsBusyTreeView = true;

            Task<IList<ISimpleTask>> getTasksTask = Task<IList<ISimpleTask>>.Factory.StartNew(taskAction, token);
            var l = await getTasksTask;          // waits for getTasksTask

            if (l != null)
            {
                foreach (ISimpleTask t in l)
                {
                    this.SimpleTasks.Add(t); // adds to ViewModel.SimpleTask
                }
            }
        } 
```

这也是我的虚拟机中调用上述异步方法的命令

```
 this.GetTasksCommand = new DelegateCommand(this.GetTasks);
      void GetTasks()
        {
                GetTasksAsync();
        } 
```

现在我的测试方法就像

```
 [TestMethod]
        public void Command_Test_GetTasksCommand()
        {
          MyViewModel.GetTaskCommand.Execute(); // this should populate ViewModel.SimpleTask 
          Assert.IsTrue(MyBiewModel.SimpleTask != null)
        } 
```

目前我得到的是我的 ViewModel.SimpleTask = null 这是因为它不等待异步方法完成。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T12:01:37.170

我写了一个 AsyncCommand 类，它从`Execute`方法中返回一个 Task 对象。然后，您需要`ICommand.Execute`明确实施，等待实施中的任务`Execute`：

```
public class AsyncCommand : ICommand
{
    public event EventHandler CanExecuteChanged;

    public Func<Task> ExecutedHandler { get; private set; }

    public Func<bool> CanExecuteHandler { get; private set; }

    public AsyncCommand(Func<Task> executedHandler, Func<bool> canExecuteHandler = null)
    {
        if (executedHandler == null)
        {
            throw new ArgumentNullException("executedHandler");
        }

        this.ExecutedHandler = executedHandler;
        this.CanExecuteHandler = canExecuteHandler;
    }

    public Task Execute()
    {
        return this.ExecutedHandler();
    }

    public bool CanExecute()
    {
        return this.CanExecuteHandler == null || this.CanExecuteHandler();
    }

    public void RaiseCanExecuteChanged()
    {
        if (this.CanExecuteChanged != null)
        {
            this.CanExecuteChanged(this, new EventArgs());
        }
    }

    bool ICommand.CanExecute(object parameter)
    {
        return this.CanExecute();
    }

    async void ICommand.Execute(object parameter)
    {
        await this.Execute();
    }
} 
```

然后，您可以将异步任务返回方法传递给命令类：

```
public class ViewModel
{
    public AsyncCommand AsyncCommand { get; private set; }

    public bool Executed { get; private set; }

    public ViewModel()
    {
        Executed = false;
        AsyncCommand = new AsyncCommand(Execute);
    }

    private async Task Execute()
    {
        await(Task.Delay(1000));
        Executed = true;
    }
} 
```

在您的单元测试中，您只需等待该`Execute`方法：

```
[TestMethod]
public async Task TestAsyncCommand()
{
    var viewModel = new ViewModel();

    Assert.IsFalse(viewModel.Executed);
    await viewModel.AsyncCommand.Execute();

    Assert.IsTrue(viewModel.Executed);
} 
```

另一方面，UI 将调用显式实现的`ICommand.Execute`方法来处理等待任务。

(*) 同时我注意到，如果您遵循常见的命名约定，则返回任务的方法实际上应该命名为`ExecuteAsync`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-03T15:56:16.140

由于我无法添加评论，为了完整起见，在 PRISM 6 中您可以尝试：

```
ParsingCommand = new DelegateCommand<string>(async (x) => await StartParsing(x)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T11:58:30.933

在 Prism 6 中，您可以创建`DelegateCommand`和`DelegateCommand<T>`从异步处理程序。

例如：

`startParsingCommand=DelegateCommand .FromAsyncHandler(StartParsingAsync,CanStartParsing) .ObservesProperty(()=> IsParserStarted);`

# php - 使用 jquery post 将值发送到 php 文件

> ID：15727517
> 
> 赞同：0
> 
> 时间：2013-03-31T07:53:25.900
> 
> 标签：php, javascript, jquery

我正在尝试在 javascript/jquery 中编写一个脚本，它将值发送到一个 php 文件，然后该文件将更新数据库。问题是 PHP 文件没有读取这些值，我不知道为什么。我对值进行了硬编码，效果很好。有任何想法吗？

这是javascript：

```
var hours = document.getElementById("hours");
var i = 1;
while(i < numberofMembers) {        
    var memberID = document.getElementById("member"+i); 
    if(memberID && memberID.checked) {
        var memberID = document.getElementById("member"+i).value;
        $.ajax({
            type : 'post',
            datatype: 'json',
            url : 'subtract.php',
            data : {hours : hours.value, memberID : memberID.value},
            success: function(response) {
                if(response == 'success') {
                    alert('Hours subtracted!');
                } else {
                    alert('Error!');
                }
            }
        }); 
    }
    i++;
}   
} 
```

减法.php：

```
if(!empty($_POST['hours']) AND !empty($_POST['memberID'])) {
    $hoursToSubtract = (int)$_POST['hours'];
    $studentIDString = (int)$_POST['memberID'];
}
$query = mysql_query("SELECT * FROM `user_trials` WHERE `studentid` = '$studentIDString' LIMIT 1"); 
```

编辑：在@Daedal 的代码之后更新了代码。我仍然无法在 PHP 中获取数据，尝试运行 FirePHP，但我得到的只是“配置文件仍在运行”，然后什么也没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:55:57.397

这可能会帮助您：

```
function subtractHours(numberofMembers) {
    var hours = document.getElementById('hours');
    var i = 1;

    while(i < numberofMembers) {
        // Put the element in var
        var memberID = document.getElementById(i);
        // Check if exists and if it's checked
        if(memberID && memberID.checked) {
            // Use hours.value and memberID.value in your $.POST data
            // {hours : hours.value, memberID : memberID.value}
            console.log(hours.value + ' - ' + memberID.value);
            // $ajax is kinda longer version of $.post api.jquery.com/jQuery.ajax/
            $.ajax({
                type : 'post',
                dataType : 'json', // http://en.wikipedia.org/wiki/JSON
                url : 'subtract.php',
                data : { hours : hours.value, memberID : memberID.value},
                success: function(response) {
                    if( response.type == 'success' ) {
                        alert('Bravo! ' + response.result);
                    } else {
                        alert('Error!');
                    };
                }
            });

        }
    i++;
    }
} 
```

和 PHP 部分：

```
$result = array();

// Assuming we are dealing with numbers
if ( ! empty( $_POST['hours'] ) AND  ! empty( $_POST['memberID'] ) ) {
    $result['type']   = "success";
    $result['result'] = (int) $_POST['hours'] . ' and ' . (int) $_POST['memberID'];
} else {
    $result['type']   = "error";
}

// http://php.net/manual/en/function.json-encode.php
$result = json_encode( $result );
echo $result;

die(); 
```

此外，您可能不希望 CSS #ID 以数字开头或仅由数字组成。CSS Tricks 解释得很好[http://css-tricks.com/ids-cannot-start-with-a-number/](http://css-tricks.com/ids-cannot-start-with-a-number/)

您可以通过在前面放置一些字符串来简单地解决这个问题：

`var memberID = document.getElementById('some_string_' + i);`

这不是理想的解决方案，但它可能会帮助您解决此错误。

干杯!

**更新：**

我首先想到的是带有数字的#ID，但似乎 JS 并不关心这一点（至少不是 CSS 所做的那样），但最好不要使用所有数字。所以整个错误是因为`document.getElementById()`只接受字符串。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) *id 是一个**区分大小写的字符串**，表示正在寻找的元素的唯一 ID*。

很少有成员提到转换`var i`为字符串，这是您解决方案的关键。因此`var memberID = document.getElementById(i);`将*引用*转换为字符串。`while(i < numberofMembers) {` *我认为，如果您在循环var i* 中将 wright 定义为字符串，我认为可以在您的原始代码中完成类似的事情，`i = i.toString();`但我认为我们目前的解决方案更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:58:11.147

尝试删除'' fx：

```
$.post (
        "subtract.php",
        {hours : hours, memberID : memberID} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:11:00.500

试试这个

```
 $.ajax({type: "POST",
        url:"subtract.php",
        data: '&hours='+hours+'&memberID='+memberID,  
        success: function(data){
          }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T08:14:03.950

你也可以尝试这样的事情来检查

```
$(":checkbox").change(function(){
   var thisId = $(this).attr('id');
   console.log('Id - '+thisId);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T08:33:54.660

```
$studentID = $_GET['memberID'];
$hoursToSubtract = $_GET['hours']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T08:35:00.800

试试这个：

```
$.post("subtract.php", { hours: hours, memberID : memberID })
.done(function(data) {
  document.body.style.cursor = "auto";
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-31T09:00:32.047

尝试使用这个...

```
$.post("subtract.php", { hours: hours, memberID : memberID })
    .done(function(data) {
        $(body).css({ 'cursor' : 'auto' });
}); 
```

# angularjs - Meteor+AngularJs 示例

> ID：15727521
> 
> 赞同：12
> 
> 时间：2013-03-31T07:54:15.347
> 
> 标签：angularjs, meteor, angular-meteor

我是 Meteor 和 AngularJs 的新手。我正在尝试遵循[https://github.com/lvbreda/Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)上的示例应用程序，但到目前为止我还无法让它工作。

我在这段代码中收到错误“未定义应用程序”：

```
app.controller('MeteorCtrl', ['$scope', '$meteor', function ($scope, $meteor) {
Uncaught ReferenceError: app is not defined
    $scope.todos = $meteor("todos").find({});
    $meteor("todos").insert({
        name: "Do something",
        done: false
    }); 
```

我试图将上面的内容重写为：

```
var MeteorCtrl = function ($scope, $meteor) {
    $scope.todos = $meteor("todos").find({});
    $meteor("todos").insert({
        name: "Do something",
        done: false
    })
}; 
```

仍然抛出错误'错误：未知提供者：$meteorProvider <- $meteor'

[在https://github.com/bevanhunt/meteor-angular-leaderboard](https://github.com/bevanhunt/meteor-angular-leaderboard)上的meter+angularjs 的唯一其他示例似乎已过时。

[有人可以使用https://github.com/lvbreda/Meteor_angularjs](https://github.com/lvbreda/Meteor_angularjs)上的包发布一个简单但完全有效的可下载的流星 + angularjs 示例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-07T22:10:55.367

我显然有偏见，但我们的团队编写并维护了这个库 - [angular-meteor](https://github.com/Urigo/angular-meteor)，我们还发布了一个结合两者的教程 - [angular-meteor 教程](https://angular-meteor.com/tutorials/whatsapp2-tutorial)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-16T17:26:56.790

虽然我没有使用 lvbreda 的 Angular 包，但我已经能够以相对简单的方式将 Angular 与 Meteor + Blade 集成为 HTML 模板语言。我从 Daniel Olano 的[Ng-Meteor](https://github.com/olanod/ng-meteor)包开始，最终实现了我自己的 Meteor/Angular 桥接器。我是 Meteor 和 Angular 的新手，但它似乎运行良好，我喜欢代码非常透明，所以我很好地理解它是如何工作的。

我编写了以下名为 client/ngMeteor.coffee 的 CoffeeScript 模块，它定义了 Meteor 和 Angular 之间的桥梁：

```
define("ngMeteor", [], ->
  angular.module('ngMeteor.directives', [])

  angular.module('ngMeteor.services', [])

  angular.module('ngMeteor.blade', []).run(['$templateCache', '$rootScope', '$compile',
    ($templateCache, $rootScope, $compile) ->
      bodyTemplate = Template.body
      if !bodyTemplate
        throw new Error("A body template must be defined ('body.blade')")

      # Render each template and place in Angular's template cache
      $templateCache.put "#{key}.blade", render() for own key, render of Template

      # Render the body template and have Angular compile it, then inject it into the DOM's body element
      Meteor.startup(()->
        # Necessary?
        Spark.finalize(document.body)
        $('html').attr('data-ng-app', '')
        $('body').html($compile(bodyTemplate())($rootScope))
        $rootScope.$apply()
      )
  ])
  angular.module 'ngMeteor', ['ngMeteor.blade', 'ngMeteor.services', 'ngMeteor.directives']
) 
```

有关完整的工作示例，请参阅[我的这个示例项目](https://github.com/aknuds1/example-meteor-and-ng-app)。反馈表示赞赏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-02T13:13:14.337

我刚刚创建了一个简单的示例，展示了如何创建一个简单的 angular-meteor 应用程序。

该应用程序显示来自 mongo 集合的一些项目，并且可以通过浏览器控制台实时更新集合。（只是 angular-js 的默认流星功能）

它可以在 github 上找到：[https](https://github.com/tom-muhm/angular-meteor-example) ://github.com/tom-muhm/angular-meteor-example 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-01T21:35:40.357

刚遇到同样的问题。通过添加`meteor`依赖解决

```
angular.module('meteorapp', ["meteor"]) # <------------------- Here
.config ['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) ->
  $locationProvider.html5Mode(true)
  $routeProvider.when '/',
   controller: 'home'
] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-29T19:10:13.247

我也是 Meteor 和 Angular 的新手——而且我也很难完成这项工作。但我想我设法让基本的 Angular 功能运行起来。

我发现我放到 github 上：[https ://github.com/dirkk0/angularjs-meets-meteorjs](https://github.com/dirkk0/angularjs-meets-meteorjs)

我希望这也对你有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-31T20:56:44.843

您可以在不同的分叉中找到一些示例 [https://github.com/alex-okrushko/Meteor_angularjs](https://github.com/alex-okrushko/Meteor_angularjs)

[我在https://github.com/linepos/linepos](https://github.com/linepos/linepos)中构建了一个应用程序，但现在它无法正常工作，因为 lvbreda 更改了代码

您可以使用另一种方法[https://github.com/kievechua/flame-on](https://github.com/kievechua/flame-on)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-03T09:39:04.487

我自己一直在解决这个问题并为angural做了一个包。示例代码位于：[https](https://github.com/bramtervoort/meteor-angular-stack/tree/example) ://github.com/bramtervoort/meteor-angular-stack/tree/example 示例位于：[http ://bramtervoort-todo.meteor.com](http://bramtervoort-todo.meteor.com)

它非常简单，只需安装流星并运行：`mrt add angular-stack`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-08-20T14:56:11.587

我的回答很简单：不要把流星和角混在一起！

你为什么要？对于数据绑定能力？Meteor 为你做的比 Angular 的助手和发布/订阅机制要简单得多。

建立你自己的指令？Meteor 模板和 Blaze 也可以为您做到这一点。

在使用了 angular 很长一段时间后，我最近使用了流星，发现它非常简单：实现相同、更清晰的指令声明的代码更少，在后台为您完成了很多工作，尤其是拉取子集数据的。

流星不需要使用角度，只需使用流星。我还没有找到需要 Angular 的案例。

在meteor中最难掌握的概念是发布订阅模型，但是一旦你掌握了它，它就非常强大，因为你可以通过参数定义将哪些数据推送到客户端。那么你只需要一个模板来渲染它。

查找本文以获取更多详细信息 [https://www.discovermeteor.com/blog/understanding-meteor-publications-and-subscriptions/](https://www.discovermeteor.com/blog/understanding-meteor-publications-and-subscriptions/)

编辑：2016 年 1 月

查看 Meteor 中 Angular 2 的基准测试，我现在可以看到使用它的理由。以前的版本绝对不是这种情况：

见文章：http: [//info.meteor.com/blog/comparing-performance-of-blaze-react-angular-meteor-and-angular-2-with-meteor](http://info.meteor.com/blog/comparing-performance-of-blaze-react-angular-meteor-and-angular-2-with-meteor)

Angular 1.x 比 6 个月前的 Blaze 和 React 慢得多。Angular 2 看起来好多了，但我仍然不喜欢过于复杂。

为了简单和快速，还可以查看由前 Angular 负责人构建的[Aurelia.io](http://aurelia.io)，它旨在与 Javascript 框架本身一起持续和移动。

# angularjs - 如何将 HTTP 请求从 AngularJS 控制器移到服务中？

> ID：15727524
> 
> 赞同：7
> 
> 时间：2013-03-31T07:54:41.470
> 
> 标签：angularjs

我有以下代码片段：

```
 angular.module('test', []).controller('TestCtrl', function ($scope, $http) {
        $scope.selectedTestAccount = null;
        $scope.testAccounts = [];

        $http({
            method: 'GET',
            url: '/Admin/GetTestAccounts',
            params: { applicationId: 3 }
        }).success(function (result) {
            $scope.testAccounts = result;
        });
    } 
```

有人建议我也许应该考虑为 $http 请求创建服务 有人可以给我一个示例，说明如何为上面的代码执行此操作。特别是我不确定如何设置服务并使控制器注入它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T09:36:46.527

您的服务需要如下所示：

```
angular.module('testaccount', []).
factory('TestAccount', function($http) {
  var TestAccount = {};
  TestAccount.get = function(applicationId, callback) {
    $http.get('/Admin/GetTestAccounts?applicationId=' + applicationId).success(function(data) {
      callback(data);
    });
  };
  return TestAccount;
}); 
```

您的控制器需要注入服务，使用参数调用服务对象，并发送回调函数：

```
angular.module('test', ['testaccount']).controller('TestCtrl', function ($scope, TestAccount) {
    $scope.selectedTestAccount = null;
    $scope.testAccounts = [];

    TestAccount.get(3, function (data) {
      $scope.testAccounts = data;
    })
} 
```

在本教程中阅读有关[服务依赖注入的更多信息。](http://docs.angularjs.org/tutorial/step_11)

# opencv - 如何确定相机的世界坐标？

> ID：15727527
> 
> 赞同：10
> 
> 时间：2013-03-31T07:55:22.567
> 
> 标签：opencv, pose-estimation

我在墙上有一个已知尺寸和位置的矩形目标，机器人上有一个移动摄像头。当机器人在房间里行驶时，我需要定位目标并计算相机的位置及其姿势。作为进一步的转折，可以使用伺服系统改变相机的仰角和方位角。我可以使用 OpenCV 定位目标，但在计算相机的位置时我仍然很模糊（实际上，上周我的头撞到墙上，我的额头上有一个平坦的点）。这是我正在做的事情：

1.  读入先前计算的相机内在文件
2.  从轮廓中获取目标矩形4个点的像素坐标
3.  用矩形的世界坐标、像素坐标、相机矩阵和畸变矩阵调用solvePnP
4.  使用旋转和平移向量调用 projectPoints
5.  ？？？

我已经阅读了 OpenCV 的书，但我想我只是错过了一些关于如何使用投影点、旋转和平移向量来计算相机的世界坐标及其姿势的东西（我不是数学专家）：- (

2013-04-02 根据“morynicz”的建议，我编写了这个简单的独立程序。

```
#include <Windows.h>
#include "opencv\cv.h"

using namespace cv;

int main (int argc, char** argv)
{
const char          *calibration_filename = argc >= 2 ? argv [1] : "M1011_camera.xml";
FileStorage         camera_data (calibration_filename, FileStorage::READ);
Mat                 camera_intrinsics, distortion;
vector<Point3d>     world_coords;
vector<Point2d>     pixel_coords;
Mat                 rotation_vector, translation_vector, rotation_matrix, inverted_rotation_matrix, cw_translate;
Mat                 cw_transform = cv::Mat::eye (4, 4, CV_64FC1);

// Read camera data
camera_data ["camera_matrix"] >> camera_intrinsics;
camera_data ["distortion_coefficients"] >> distortion;
camera_data.release ();

// Target rectangle coordinates in feet
world_coords.push_back (Point3d (10.91666666666667, 10.01041666666667, 0));
world_coords.push_back (Point3d (10.91666666666667, 8.34375, 0));
world_coords.push_back (Point3d (16.08333333333334, 8.34375, 0));
world_coords.push_back (Point3d (16.08333333333334, 10.01041666666667, 0));

// Coordinates of rectangle in camera
pixel_coords.push_back (Point2d (284, 204));
pixel_coords.push_back (Point2d (286, 249));
pixel_coords.push_back (Point2d (421, 259));
pixel_coords.push_back (Point2d (416, 216));

// Get vectors for world->camera transform
solvePnP (world_coords, pixel_coords, camera_intrinsics, distortion, rotation_vector, translation_vector, false, 0);
dump_matrix (rotation_vector, String ("Rotation vector"));
dump_matrix (translation_vector, String ("Translation vector"));

// We need inverse of the world->camera transform (camera->world) to calculate
// the camera's location
Rodrigues (rotation_vector, rotation_matrix);
Rodrigues (rotation_matrix.t (), camera_rotation_vector);
Mat t = translation_vector.t ();
camera_translation_vector = -camera_rotation_vector * t;

printf ("Camera position %f, %f, %f\n", camera_translation_vector.at<double>(0), camera_translation_vector.at<double>(1), camera_translation_vector.at<double>(2));
printf ("Camera pose %f, %f, %f\n", camera_rotation_vector.at<double>(0), camera_rotation_vector.at<double>(1), camera_rotation_vector.at<double>(2));
} 
```

我在测试中使用的像素坐标来自真实图像，该图像是在目标矩形（62 英寸宽和 20 英寸高）左侧约 27 英尺处以大约 45 度角拍摄的。输出不是我所期望的。我究竟做错了什么？

```
Rotation vector
2.7005
0.0328
0.4590

Translation vector
-10.4774
8.1194
13.9423

Camera position -28.293855, 21.926176, 37.650714
Camera pose -2.700470, -0.032770, -0.459009 
```

如果我的世界坐标的 Y 轴与 OpenCV 的屏幕 Y 轴相反，会不会有问题？（我的坐标系的原点位于目标左侧的地板上，而 OpenCV 的原点位于屏幕的左上角）。

姿势的单位是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T11:33:59.147

您从 中获取平移和旋转向量[`solvePnP`](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=find%20extrinsics#solvepnp)，这些向量说明对象在相机坐标中的位置。您需要进行逆变换。

变换相机 -> 对象可以写成`[R T;0 1]`齐次坐标的矩阵。这个矩阵的逆矩阵是，使用它的特殊属性，`[R^t -R^t*T;0 1]`其中 R^t 是 R 转置的。您可以从[罗德里格斯](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=find%20extrinsics#rodrigues)变换中获得 R 矩阵。这样你就得到了变换对象->相机坐标的平移向量和旋转矩阵。

如果您知道对象在世界坐标中的位置，您可以使用 world->object transform * object->camera transform 矩阵来提取相机平移和姿势。

姿势由单个向量或 R 矩阵描述，您肯定会在您的书中找到它。如果是“学习 OpenCV”，您可以在第 401 - 402 页找到它：)

查看您的代码，您需要执行以下操作

```
 cv::Mat R;
    cv::Rodrigues(rotation_vector, R);

    cv::Mat cameraRotationVector;

    cv::Rodrigues(R.t(),cameraRotationVector);

    cv::Mat cameraTranslationVector = -R.t()*translation_vector; 
```

`cameraTranslationVector`包含相机坐标。`cameraRotationVector`包含相机姿势。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-02T12:41:50.140

我花了很长时间才理解它，但姿势的含义是每个轴上的旋转 - x,y,z。它以弧度表示。值介于饼图到负饼图 (-3.14 - 3.14) 之间

编辑：我可能弄错了。我读到姿势是指示相机方向的矢量，矢量的长度表示围绕该矢量旋转相机的程度。

# php - 从数据库中检索前 10 名

> ID：15727530
> 
> 赞同：1
> 
> 时间：2013-03-31T07:55:51.383
> 
> 标签：php, mysql

我有这个查询，但我只想根据 num_guess 返回前 10 名。我不知道查询的格式。我不知道在哪里放 LIMIT 或 TOP。请帮忙！

```
"SELECT user,num_guess FROM game JOIN difficulty USING (difficulty_no) WHERE difficulty_no=2 ORDER BY num_guess ASC " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T07:57:43.003

利用`limit 10`

像这样的东西

```
"SELECT user,num_guess FROM game 
 JOIN difficulty USING (difficulty_no) 
 WHERE difficulty_no=2 ORDER BY num_guess ASC limit 10" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:00:18.203

有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：

```
-- SELECT * FROM tbl LIMIT 5,10; # Retrieve rows 6-15

 SELECT user,num_guess FROM game 
 JOIN difficulty USING (difficulty_no) 
 WHERE difficulty_no=2 ORDER BY num_guess ASC limit 0, 10 
```

在这种情况下，你可以在`LIMIT 10`这里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:07:05.973

是的，限制在这里有效。

```
SELECT user,num_guess FROM game 
    JOIN difficulty USING (difficulty_no) 
        WHERE difficulty_no=2 ORDER BY num_guess ASC LIMIT 10; 
```

要查看更多内容，只需增加限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T07:58:46.923

只需`LIMIT 10`在查询末尾添加即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T08:04:27.673

利用`LIMIT 10`

```
"SELECT user,num_guess FROM game 
    JOIN difficulty USING (difficulty_no) 
        WHERE difficulty_no=2 ORDER BY num_guess ASC LIMIT 10" 
```

有关更多信息，请查看此[http://dev.mysql.com/doc/refman/5.5/en//limit-optimization.html](http://dev.mysql.com/doc/refman/5.5/en//limit-optimization.html)

# c# - 转换 lambda 表达式性能

> ID：15727533
> 
> 赞同：-3
> 
> 时间：2013-03-31T07:56:18.727
> 
> 标签：c#, lambda

我想在 lambda 表达式中转换哪个更快？  

```
var callObject = CallObjectHolder.Instance.Get(x => x.Log.Id.ToString() ==  ev.src_unique_id); 
```

或者

```
var callObject = CallObjectHolder.Instance.Get(x => x.Log.Id == System.Convert.ToDouble(ev.src_unique_id)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:09:54.027

这取决于表达式发生了什么。

如果您正在对数据库进行调用以便将表达式转换为 SQL，那么第二种方法会更快，因为它只进行一次转换，而不是转换表中的每个值。

如果您正在查询内存中的数据，那么它们的执行大致相同。

不过，让我有点担心的是，您似乎使用浮点数作为标识符，这会在某些时候给您带来精度问题。浮点数并非旨在准确表示所有数字，通常应避免比较浮点数是否相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:07:27.443

`once`最快的方法是在比较循环之前将您的字符串转换为双精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:21:21.383

只想在这里加我的 2 美分。当一个值类型被装箱时，当一个值类型转换为引用类型时，必须分配和构造一个新对象。String 是一种引用类型，您将值类型转换为引用类型，因此涉及装箱成本。拆箱的成本要低一些，因为您的对象已经分配了内存，您只需从堆中获取值并将其放入值类型的堆栈中。

Rest @Guffa 已经阐明了比较运算符的选择和成本。

# php - 点击时如何多次更新点击计数器？

> ID：15727535
> 
> 赞同：0
> 
> 时间：2013-03-31T07:56:30.140
> 
> 标签：php, mysql

如果该值设置为 null 并且您单击它将更新为一个的链接，我目前已经实现了一个点击计数器。但是当它第二次被点击时它不会更新它保持原样。

```
public function getUpdateClick($Id) {
    $Id=DB::escape_string($Id);
    $i=1;
    $click=0;
    $click=$click+$i;

    $updatesArray=array('clicks'=>$click);// the column which is going to be updated

    $this->setTable('pages'); //setting the table name

    $where="id=$Id";

    $result=$this->update($updatesArray,$where); // query executed
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:48:51.440

In your function, you should first check if there is a value for `clicks` on the `pages` tables for the specific page (`where id=$id`). If there isn't, then you can give `clicks=1`, otherwise get that value and add 1.

But here's how I'd do it: I'd edit the table by disabling ALLOW NULL in the `clicks` column, so that by default, when a new page is created, it's **default value is 0**. Then I'd use the code below:

```
public function getUpdateClick($Id){
    $Id=DB::escape_string($Id);

    //You can edit the 3 lines below to check the database 
    //  in pages table in clicks column where id=$Id in your custom way
    $fetching sql_result = mysql_query('SELECT * FROM pages where id=$Id')
    $row = mysql_fetch_assoc($fetching sql_result);
    $current_number_of_clicks = $row['clicks'];

    $click= $current_number_of_clicks;
    $click=$click+1;

    $updatesArray=array('clicks'=>$click);// the column which is going to be updated

    $this->setTable('pages'); //setting the table name
    $set="click=click+1"; // column and value
    $where="id=$Id";  // 

    $result=$this->update($updatesArray,$where); // query executed
}
} // I assume this closes your class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:01:26.733

```
$click=0;
$click=$click+$i; 
```

删除第一行并将 $click 的值存储为会话变量或将其存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:10:38.153

每次调用该函数时，$click 的值都会设置为 0，然后在下一条语句中设置为 1。如果您希望该值保持不变，您应该在表中使用一个属性并在每次单击时递增它。

# scala - 玩框架链多个scala函数

> ID：15727536
> 
> 赞同：1
> 
> 时间：2013-03-31T07:56:38.117
> 
> 标签：scala, playframework

我正在用 Java 编写我的第一个应用程序。在我的一个观点中，我有几个辅助函数：

```
@**********************************
* Helper generating table columns *
***********************************@
@tableColumn(content:String) = {
<td>
     @content
</td>
} 
```

和

```
@**********************************
* Helper to convert boolean to string *
***********************************@
@convertBooleanToString(flag:Boolean) {
    if (flag) {
        "Yes"
    } else {
        "No"
    }
} 
```

我正在尝试使用以下这两个函数，但出现编译器错误。

```
<tr>
<td>Completed</td>

@for(item <- items) {
@tableColumn(convertBooleanToString(item.isComplete))
}
</tr> 
```

我得到的错误如下：

```
illegal start of simple expression 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:26:24.763

复制时我没有收到您的错误消息。请提供更多代码。

但现在你可以尝试：

```
@**********************************
* Helper generating table columns *
***********************************@
@tableColumn(content:String) = {
<td>
     @content
</td>
}

@**********************************
* Helper to convert boolean to string *
***********************************@
@convertBooleanToString(flag:Boolean) = @{if (flag) "Yes" else "No"}

<tr>
<td>Completed</td>

@for(item <- items) {
@tableColumn(convertBooleanToString(item.isComplete))
}
</tr> 
```

# c++ - STL 哈希表调整大小

> ID：15727537
> 
> 赞同：1
> 
> 时间：2013-03-31T07:56:40.587
> 
> 标签：c++, algorithm, stl

SGI STL使用分离链来实现哈希表。它包含一个桶向量，每个元素都是桶列表的第一个节点链接。有时，如果插入哈希表的元素太多，我们必须调整向量的大小.但是我们什么时候应该调整向量的大小？SGI STL 这样做：比较新元素的数量与旧向量的大小。如果前者更大，则调整向量的大小。**vector的元素只是桶列表的第一个节点链接**！但是桶链接列表可以包含很多元素，为什么它不考虑这个？

以下是 SGI STL 源代码（来自[在此处输入链接描述](http://www.sgi.com/tech/stl/stl_hashtable.h)）：

```
template <class _Val, class _Key, class _HashFcn,
          class _ExtractKey, class _EqualKey, class _Alloc>
class hashtable {
public:
  typedef _Key key_type;
  typedef _Val value_type;
  typedef _HashFcn hasher;
  typedef _EqualKey key_equal;

  typedef size_t            size_type;
  typedef ptrdiff_t         difference_type;
  typedef value_type*       pointer;
  typedef const value_type* const_pointer;
  typedef value_type&       reference;
  typedef const value_type& const_reference;

  hasher hash_funct() const { return _M_hash; }
  key_equal key_eq() const { return _M_equals; }

private:
  typedef _Hashtable_node<_Val> _Node;

#ifdef __STL_USE_STD_ALLOCATORS
public:
  typedef typename _Alloc_traits<_Val,_Alloc>::allocator_type allocator_type;
  allocator_type get_allocator() const { return _M_node_allocator; }
private:
  typename _Alloc_traits<_Node, _Alloc>::allocator_type _M_node_allocator;
  _Node* _M_get_node() { return _M_node_allocator.allocate(1); }
  void _M_put_node(_Node* __p) { _M_node_allocator.deallocate(__p, 1); }
# define __HASH_ALLOC_INIT(__a) _M_node_allocator(__a), 
#else /* __STL_USE_STD_ALLOCATORS */
public:
  typedef _Alloc allocator_type;
  allocator_type get_allocator() const { return allocator_type(); }
private:
  typedef simple_alloc<_Node, _Alloc> _M_node_allocator_type;
  _Node* _M_get_node() { return _M_node_allocator_type::allocate(1); }
  void _M_put_node(_Node* __p) { _M_node_allocator_type::deallocate(__p, 1); }
# define __HASH_ALLOC_INIT(__a)
#endif /* __STL_USE_STD_ALLOCATORS */

private:
  hasher                _M_hash;
  key_equal             _M_equals;
  _ExtractKey           _M_get_key;
  vector<_Node*,_Alloc> _M_buckets;//Here！！！！！
  size_type             _M_num_elements; 
```

请参阅私有元素**_M_buckets**。

以及SGI STL 的向量**调整代码：</p>**

```
template <class _Val, class _Key, class _HF, class _Ex, class _Eq, class _All>
void hashtable<_Val,_Key,_HF,_Ex,_Eq,_All>
  ::resize(size_type __num_elements_hint)
{
  const size_type __old_n = _M_buckets.size();
  if (__num_elements_hint > __old_n) {
    const size_type __n = _M_next_size(__num_elements_hint);
    if (__n > __old_n) {
      vector<_Node*, _All> __tmp(__n, (_Node*)(0),
                                 _M_buckets.get_allocator());
      __STL_TRY {
        for (size_type __bucket = 0; __bucket < __old_n; ++__bucket) {
          _Node* __first = _M_buckets[__bucket];//Here！！
          while (__first) {
            size_type __new_bucket = _M_bkt_num(__first->_M_val, __n);
            _M_buckets[__bucket] = __first->_M_next;
            __first->_M_next = __tmp[__new_bucket];
            __tmp[__new_bucket] = __first;
            __first = _M_buckets[__bucket];          
          }
        }
        _M_buckets.swap(__tmp);
      } 
```

以及桶向量的易用性：

```
template <class _Val, class _Key, class _HF, class _Ex, class _Eq, class _All>
void hashtable<_Val,_Key,_HF,_Ex,_Eq,_All>
  ::_M_erase_bucket(const size_type __n, _Node* __first, _Node* __last)
{
  _Node* __cur = _M_buckets[__n];
  if (__cur == __first)
    _M_erase_bucket(__n, __last);
  else {
    _Node* __next;
    for (__next = __cur->_M_next; 
         __next != __first; 
         __cur = __next, __next = __cur->_M_next)
      ;
    while (__next != __last) {
      __cur->_M_next = __next->_M_next;
      _M_delete_node(__next);
      __next = __cur->_M_next;
      --_M_num_elements;
    }
  }
} 
```

**我们可以看到向量的元素是桶链表的第一个节点链接！**

我的问题是，为什么 SGI STL 会这样做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:12:38.650

> vector的元素只是桶列表的第一个节点链接！

很明显，向量的元素不仅仅是“桶列表的第一个节点链接”。

相反，有一个桶向量而不是桶列表。

如果您想要一个存储桶列表，请使用`std::list`存储桶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:01:21.207

`std::vector`如果插入元素的数量超过其容量，则自动重新分配。`std::vector`不仅在这种情况下，整个情况都是如此。

# yeoman - Yeoman grunt 在 mocha 测试中失败

> ID：15727540
> 
> 赞同：2
> 
> 时间：2013-03-31T07:57:04.860
> 
> 标签：yeoman, gruntjs

我正在使用 Yeoman 进行第一次旋转，但是当我在终端中进行“grunt test”和“grunt”调用时遇到了问题。

在这两种情况下，摩卡咖啡似乎都失败了。

```
Running "jshint:all" (jshint) task
4 files lint free.

Running "clean:server" (clean) task
Cleaning ".tmp"...OK

Running "coffee:dist" (coffee) task
File .tmp/scripts/hello.js created.

Running "coffee:test" (coffee) task

Running "compass:dist" (compass) task
directory .tmp/styles/
   create .tmp/styles/main.css

Running "compass:server" (compass) task
unchanged app/styles/main.scss

Running "connect:test" (connect) task
Starting connect web server on localhost:9000.

Running "mocha:all" (mocha) task
Testing index.htmlFatal error: spawn ENOENT 
```

我似乎在 Grunt 或 Mocha 中找不到对这个错误的任何引用。

我应该在哪里检查以解决此问题？

# asp.net - 在异常记录中包含“应用程序名称”

> ID：15727541
> 
> 赞同：0
> 
> 时间：2013-03-31T07:57:13.763
> 
> 标签：asp.net, vb.net, web-applications, elmah, error-logging

我正在将异常记录到 SQL Server 的 Web 应用程序中实现[ELMAH](https://code.google.com/p/elmah)。然而，这无关紧要。我的目标是在日志中包含**应用程序名称**，以便在检查错误报告时一目了然地识别有问题的应用程序。我花了好几个小时寻找解决方案。我已经包含`Application Name=[myApp]`在我的 SQL Server 连接字符串中，但这只能帮助我在 SQL Server 跟踪期间识别应用程序，而不是在我的实际错误日志记录中。

有人做过吗？这是我的数据库中的日志记录示例。我也希望看到列出的应用程序名称。这恰好是表的 ELMAH 实现，但它也可以是具有相同字段的自定义表。

![在此处输入图像描述](https://i.stack.imgur.com/9MSJ2.png)

我认为这应该像为`web.config`或添加一个值一样简单，但我似乎找不到任何类似的解决方案或任何其他解决方案。我可能还应该注意，我正在使用 IIS 7.5 和 .NET 4.0，以防万一。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:57:28.083

也许对[这个](https://stackoverflow.com/questions/153054/is-there-any-way-to-programmatically-set-the-application-name-in-elmah)问题的回答会有所帮助......

**PS。**`<errorLog>`不要看接受的答案，而是在给出元素示例的地方跟进......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:59:57.667

由于我的习惯是始终为我的所有应用程序填写程序集信息，因此我选择填充此字段`My.Application.Info.Title`，我刚刚从中了解了如何以编程方式访问。要在 ELMAH 中设置此字段，我将对象的`ApplicationName`值设置`SqlErrorLog`如下：

```
Dim se As New Elmah.SqlErrorLog(ConnectionStrings("Elmah").ConnectionString)
se.ApplicationName = My.Application.Info.Title 
```

可以通过打开项目属性 -> 应用程序选项卡 -> 单击程序集信息... -> 设置“标题”值来设置程序集信息。

现在，当您`Log`为此对象调用该函数时，它将创建一个包含应用程序名称的数据库条目。

# c++ - 在构建二叉树时尝试创建指向父节点的指针

> ID：15727555
> 
> 赞同：1
> 
> 时间：2013-03-31T07:58:56.413
> 
> 标签：c++, recursion, binary-tree

我是一个爱好者，对 c++ 很陌生，我正在努力通过最好的方式来实现这棵树。

我有很多问题，但主要是我试图找出在构建树期间存储指向父节点的指针的最佳方法；但是当我尝试在成员函数中访问该值时出现**总线错误。**我可以愉快地访问地址，这个输出没有错误。`root->parent->data``preOrder``root->parent`

任何人都可以建议我在这里做的根本错误吗？我认为这可能是一个范围问题，但可能有更好的方法来构建树？

```
class FibTree {

    class Node {
    public:
        int data;
        Node const* left;
        Node const* right;
        Node const* parent;
        Node (void);
    };
    Node const* root; // 'root' pointer to constant Node

public:
    FibTree (int);
    Node const* getRoot(void);
    void preOrder(Node const* root);

};

// Tree constructor
FibTree::FibTree(int n) {
    this->root = buildTree( n );
};

FibTree::Node const* FibTree::getRoot(void) {
    return this->root;
}

private:
    static Node* buildTree( int n, Node* parent = NULL );
};

void FibTree::preOrder(Node const* root) {
    if (root == NULL)
        return;
    // *** This prints the address of the parent node correctly
    cout << root->data << "[" << root->parent << "]" << ",";
    // *** This produces a 'Bus Error'
    cout << root->data << "[" << root->parent->data << "]" << ",";
    preOrder(root->left);
    preOrder(root->right);
}

FibTree::Node* FibTree::buildTree( int n, Node* parent ) {
    // *** Is there a scope issue with 'thisNode' here?
    Node* thisNode = new Node();
    thisNode->parent = parent;
    if (n < 2) {
        thisNode->left = NULL;
        thisNode->right = NULL;
        thisNode->data = n;
        return thisNode;
    } else {
        thisNode->left = buildTree( n - 1 , thisNode );
        thisNode->right = buildTree( n - 2, thisNode );
        thisNode->data = thisNode->left->data + thisNode->right->data;
        return thisNode;
    }
}

// Node constructor
FibTree::Node::Node(void) {
    this->data;
    this->left;
    this->right;
    this->parent;
};

int main () {
    FibTree f(n);
    f.preOrder(f.getRoot());
    return 0;
} 
```

此外，是否有一种标准方法可以避免将`root`节点传递给遍历函数，并让成员函数遍历创建的`root`节点。因为我不觉`f.preOrder(f.getRoot())`得很优雅。

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:23:23.393

据我所知，问题是以下组合：

`buildTree`您的函数中的这一行，

```
thisNode->parent = parent; 
```

这个功能，

```
// Tree constructor
FibTree::FibTree(int n) {
    this->root = buildTree( n );
}; 
```

和你的`preOrder`功能。

父指针没有被传入树构造函数中的 buildTree，因此默认为 NULL 指针。所以 root->parent 将是 NULL （有道理，因为它是根）。

然后调用`preOrder`从根开始的函数。Root 有一个`parent`NULL，但你从不检查这个（你确实检查了 root 本身是否为 NULL）。

您应该改为执行以下操作：

```
void FibTree::preOrder(Node const* root) {
    if (root == NULL)
        return;

    if(root->parent == NULL) {
      cout << root->data << " [I am the root] " << endl;
    }
    else {
      cout << root->data << "[" << root->parent->data << "]" << ",";
    }
    preOrder(root->left);
    preOrder(root->right);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:16:49.647

我无法重现该问题，但看起来最可疑的部分是：

```
// Node constructor
FibTree::Node::Node(void) {
    this->data;
    this->left;
    this->right;
    this->parent;
}; 
```

语句 ( `this->data`) 完全没有任何作用。也许您想要（并且应该尝试）：

```
FibTree::Node::Node()
  : data( 0 ),
    left( NULL ),
    right( NULL ),
    parent( NULL )
{
} 
```

解释一下：您的代码没有初始化数据和指针，因此它们未初始化。如果您打印指针，这通常可以工作，但取消引用它可能会导致您看到的错误。

当你这样做时，你可能会看到它`parent`变成`NULL`了并且你需要检查它：

```
if( root->parent != NULL ) {
    cout << root->data << "[" << root->parent->data << "]" << ",";
} 
```

# database - 使用 mapreduce 访问非 JDBC 数据库

> ID：15727556
> 
> 赞同：1
> 
> 时间：2013-03-31T07:58:57.150
> 
> 标签：database, hadoop

我有一个未启用 JDBC 的数据库，我可以在其中触发查询并使用输入流获取结果。我想使用 map reduce 程序来访问它。

对于启用 JDBC 的数据库，Hadoop 中有“DBInputFormat.java”和“DBConfiguration.java”文件，它们负责访问数据库并在扩展 DBWritable 和 Writable 接口的用户定义类中获取结果。

有没有一种方法可以以相同的方式访问上述非 JDBC 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:27:32.397

我不确定您的数据库是否支持 ODBC。如果是这样，您可以尝试使用 DBInputFormat 的 jdbc:odbc 驱动程序。我不确定这是否有效，因为从未尝试过。

另一个应该是您最终选择的选项是实现您自己的 FileInputFormat

# ruby - 除非包含在括号中，否则 Ruby 正则表达式先行在管道处拆分

> ID：15727562
> 
> 赞同：1
> 
> 时间：2013-03-31T07:59:49.293
> 
> 标签：ruby, regex, lookahead

我正在尝试解码以下字符串：

```
body = '{type:paragaph|class:red|content:[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]}'
body << '{type:image|class:grid|content:[id:1|title:image1][id:2|title:image2][id:3|title:image3]}' 
```

我需要在管道处拆分字符串，但不是在方括号中包含管道的地方，为此我认为我需要按照此处所述执行前瞻：[How to split string by ',' unless ',' is inside brackets使用正则表达式？](https://stackoverflow.com/questions/732029/how-to-split-string-by-unless-is-within-brackets-using-regex)

我的尝试（仍然在每个管道上分裂）：

```
x = self.body.scan(/\{(.*?)\}/).map {|m| m[0].split(/ *\|(?!\]) */)}
->
[
  ["type:paragaph", "class:red", "content:[class:intro", "body:This is the introduction paragraph.][body:This is the second paragraph.]"]
  ["type:image", "class:grid", "content:[id:1", "title:image1][id:2", "title:image2][id:3", "title:image3]"]
] 
```

期待：

```
 ->
    [
      ["type:paragaph", "class:red", "content:[class:intro|body:This is the introduction paragraph.][body:This is the second paragraph.]"]
      ["type:image", "class:grid", "content:[id:1|title:image1][id:2|title:image2][id:3|title:image3]"]
    ] 
```

* * *

有谁知道这里需要的正则表达式？

是否可以匹配这个正则表达式？我似乎无法正确修改[正则表达式以匹配不被括号括起来的下划线？](https://stackoverflow.com/questions/678316/regular-expression-to-match-underscores-not-surrounded-by-brackets)

* * *

我在这里修改了答案[Split string in Ruby, 忽略括号的内容？](https://stackoverflow.com/questions/2015826/split-string-in-ruby-ignoring-contents-of-parentheses)要得到：

```
 self.body.scan(/\{(.*?)\}/).map {|m| m[0].split(/\|\s*(?=[^\[\]]*(?:\[|$))/)} 
```

似乎可以解决问题。虽然我确定是否有任何不足之处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:35:55.823

处理具有相同语法的嵌套结构会让您感到困难。

你可以尝试一个递归下降解析器（一个快速的谷歌出现了[https://github.com/Ragmaanir/grammy](https://github.com/Ragmaanir/grammy) - 不确定是否有好处）

就个人而言，我会选择一些真正的 hacky - 一些将你的字符串转换为 JSON，然后使用 JSON 解析器解析的 gsubs :-)。不过，这也不是特别容易，但这里有：

```
require 'json'

b1 = body.gsub(/([^\[\|\]\:\}\{]+)/,'"\1"').gsub(':[',':[{').gsub('][','},{').gsub(']','}]').gsub('}{','},{').gsub('|',',')

JSON.parse('[' + b1 + ']') 
```

这并不容易，因为字符串格式显然用于`[foo:bar][baz:bam]`表示散列数组。如果您有机会修改序列化格式以使其更容易，我会接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T12:13:50.503

我在这里修改了答案[Split string in Ruby, 忽略括号的内容？](https://stackoverflow.com/questions/2015826/split-string-in-ruby-ignoring-contents-of-parentheses)要得到：

```
 self.body.scan(/\{(.*?)\}/).map {|m| m[0].split(/\|\s*(?=[^\[\]]*(?:\[|$))/)} 
```

似乎可以解决问题。如果它有任何不足，请提出更好的建议。

# jquery - 点击时阅读更多错误全部展开

> ID：15727564
> 
> 赞同：0
> 
> 时间：2013-03-31T08:00:15.077
> 
> 标签：jquery, html, slider, expand

我会保持这个简单，因为它很简单。

所以我有一个页面用于 tesmonials，我设法为每个页面添加了一个阅读更多功能，我想保持页面干净整洁。

阅读更多功能有效，但这是我的问题。因为每次我点击 1 阅读更多时我都有大约 10 个推荐信，所以整个 10 个帖子同时展开.. 有什么帮助吗？

继承人的HTML代码

```
<p>something something something first</p>
<div style="width: 500px; padding: 10px;">
<br/><br/><a href="#" class="readMore">Read More</a>? <br/><br/>
<!-- BEGIN: Hidden Content. -->
<div class="content" style="display: none ; width:500px;">things things and stuff and more stuff and things </p></div>
<!-- END: Hidden Content. --> 
```

这是脚本

```
<script type="text/javascript" src="./jquery-1.6.3.js"></script>
<script type="text/javascript">
    // Cache a reference to the hidden content.
    var hiddenContent = $("div.content");

    // Bind to the Read More link to toggle the
    $("a.readMore").click(

    function(event) {
        // Cancel the default event (this isn't a real link).
        event.preventDefault();
        // Check to see if the content is visible.
        if (hiddenContent.is(":visible")) {
            // Hide it slowly.
            hiddenContent.slideUp(3000);
        } else {
            // Show it slowly.
            hiddenContent.slideDown(3000);
        }
    });
</script> 
```

任何帮助都会很棒.. 再次是它（它有效）的问题，但是当点击一个 - 阅读更多 - 时，所有其他 10 个帖子也会展开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:09:08.537

您那里有一些格式错误的 HTML，而且 Jquery 也不正确。

首先通过删除 errant标签并在适当的地方`</p>`添加一个结束标签来更正 HTML。`</div>`所有这些`<br />`标签都是不好的做法。如果您想要间距，请将 CSS 填充添加到锚标记，而不是添加混乱的中断标记。

```
<p> something something something first</p>
<div style="width: 500px ;padding: 10px ;">
<a href="#" class="readMore">Read More</a>?

<div class="content" style="display: none ; width:500px;">things things and stuff and more stuff and things</div>
</div> 
```

接下来，您需要定位与其前面的链接相关的隐藏 div。为此，您需要在 jquery 函数中移动 var**声明**。

```
$( "a.readMore" ).click( function( event ){
event.preventDefault();
var hiddenContent = $(this).next(".content");

if (hiddenContent.is( ":visible" )){
    hiddenContent.slideUp(300);
} else {
    hiddenContent.slideDown(300);
} 
}); 
```

我已经设置了一个[**WORKING DEMO**](http://jsfiddle.net/NotInUse/ARxjd/)供您查看。

# sql - 将查询字符串附加到结果

> ID：15727567
> 
> 赞同：1
> 
> 时间：2013-03-31T08:00:18.780
> 
> 标签：sql, sqlite

当使用类似的东西进行 sql 查询时

```
SELECT * FROM table1 WHERE column1 LIKE 'searchstring'; 
```

有没有办法将查询字符串（此处为“searchstring”）附加到结果中？我问是因为在这种情况下

```
SELECT * FROM table1 WHERE column1 LIKE '%searchstring1%' OR column1 LIKE '%searchstring2%'; 
```

您可以在结果中返回多行，并且您可能不知道哪些行与哪个查询字符串一起使用。

有没有办法将查询字符串附加到另一列中的相关行？例如，

```
result_col1 result_col2     searched
a              b         searchstring1
c              d         searchstring1
f              g         searchstring2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:08:48.350

您可以将搜索字符串作为列包含在查询中并在结果中获取它们：

```
SELECT 'searchstring' AS querystring, * FROM table1 WHERE column1 LIKE '%searchstring%'; 
```

# android - 如何授予我的应用程序 android.permission.DEVICE_POWER

> ID：15727571
> 
> 赞同：0
> 
> 时间：2013-03-31T08:00:53.200
> 
> 标签：android, android-permissions

我需要关闭我的应用程序的电源：[用户 10036 和当前进程都没有 android.permission.DEVICE_POWER。](https://stackoverflow.com/questions/15726352/neither-user-10036-nor-current-process-has-android-permission-device-power/15726409?noredirect=1#15726409) 但我收到错误，因为我的应用程序是用系统签名签名的。如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:02:35.267

标准应用程序无法获得此权限，因为它是 2 级权限。

# aop - AspectJ 可以找到所有变量声明并将它们记录在方法中吗？

> ID：15727572
> 
> 赞同：0
> 
> 时间：2013-03-31T08:00:56.197
> 
> 标签：aop, aspectj

例如，我有一个这样的 java 方法：

```
public void hello() {
   String name = "Freewind";
   String message = "Welcome";
   System.out.println(message + name);
} 
```

然后我想使用 AspectJ 来记录变量：

```
public void hello() {
   String name = "Freewind";
   log("New variable: name");           // by aspectj
   String message = "Welcome";
   log("New variable: message");           // by aspectj
   System.out.println(message + name);
} 
```

AspectJ 可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:21:48.203

不。

对不起，简短的回答，但没有什么可说的。

# jquery - 两个不同jQuery的集成

> ID：15727577
> 
> 赞同：-1
> 
> 时间：2013-03-31T08:01:30.813
> 
> 标签：jquery

在我下面列出的代码中，jQuery 是 1.9.1 版本，jQuery1 是 1.2.6 版本，我将如何集成它们以使两者相互兼容？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Auto Complete Input box</title>
        <link rel="stylesheet" type="text/css" href="jquery.autocomplete.css" />
        <script type="text/javascript" src="js/jquery1.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery.autocomplete.js"></script>
        <script>
            $(document).ready(function() {
                $("#tag").autocomplete("autoCompleteMain.php", {
                    selectFirst: true
                });
            });
        </script>
    </head>
    <body>
        <form>
            <label>Tag:</label>
            <input name="tag" type="text" id="tag" size="20" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:03:11.400

您不能多次调用 jQuery，这会导致错误。但是，您可以在加载 jQuery 时将其分配给它自己的变量。

```
<script src="first/js/file.js"></script>
var $j = jQuery.noConflict(); 
```

加载第二个文件..

从这里开始，您将使用`$j`而不是通常的`$`

使用第一个 jQuery 版本...

```
$j('#someID').hide(); 
```

使用第二个 jQuery 版本：

```
$('#someID').show(); 
```

# ruby - 未定义的方法 `assoc' 用于# （无方法错误）

> ID：15727582
> 
> 赞同：0
> 
> 时间：2013-03-31T08:02:00.190
> 
> 标签：ruby, hash, enumerable

我正在尝试从本地环境中定义的哈希中返回基于用户定义参数的值列表。

```
def my_method *args
  #initialize accumulator
  accumulator = Hash.new(0)

  #define hashes in local environment
  foo=Hash["key1"=>["var1","var2"],"key2"=>["var3","var4","var5"]]
  bar=Hash["key3"=>["var6"],"key4"=>["var7","var8","var9"],"key5"=>["var10","var11","var12"]]
  baz=Hash["key6"=>["var13","var14","var15","var16"]]

  #iterate over args and build accumulator
  args.each do |x|
    if foo.has_key?(x)
        accumulator=foo.assoc(x)
    elsif bar.has_key?(x)
        accumulator=bar.assoc(x)
    elsif baz.has_key?(x)
        accumulator=baz.assoc(x)
    else
        puts "invalid input"
    end
end

  #convert accumulator to list, and return value
  return accumulator = accumulator.to_a {|k,v| [k].product(v).flatten}
end 
```

用户将使用作为关键字的参数调用该方法，并且该函数将返回与接收到的每个关键字相关联的值列表。

例如

```
> my_method(key5,key6,key1)
=> ["var10","var11","var12","var13","var14","var15","var16","var1","var2"] 
```

输出可以是任何顺序。当我尝试运行代码时收到以下错误：

```
undefined method `assoc' for #<Hash:0x10f591518> (NoMethodError) 
```

请你指点我如何解决这个问题？在终端`assoc`中完全按照我的预期执行：

```
> foo.assoc("key1")
=> ["var1","var2"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:01:52.553

我猜你是从其他语言开始使用 Ruby 的，因为这种方法有很多不必要的麻烦。此外，由于各种原因，它不会返回您期望的结果。

```
`accumulator = Hash.new(0)` 
```

这是不必要的，因为 (1)，您期望返回一个数组，并且 (2)，您不需要在 ruby​​ 中预先初始化变量。

在这种`Hash[...]`情况下，语法是非常规的，通常用于将其他一些可枚举（通常是数组）转换为哈希，如`Hash[1,2,3,4] #=> { 1 => 2, 3 => 4}`. 当你定义一个哈希时，你可以只使用花括号`{ ... }`。

对于 的每次迭代`args`，您都将累加器分配给哈希查找的结果，而不是累加值（根据您的示例输出，这是您需要做的）。相反，您应该查看各种数组连接方法，如`push`, `+=`,`<<`等。

看起来您不需要结果中的密钥，这`assoc`可能是矫枉过正。`fetch`使用简单的括号查找 ( )会更好`hash[key]`。

最后，虽然您可以使用块调用 Ruby 中的任何方法，就像您对 所做的那样`to_a`，除非该方法专门为块生成值，否则 Ruby 将忽略它，因此`[k].product(v).flatten`实际上并没有做任何事情。

我并不是说太挑剔——Ruby 的语法非常灵活，但与其他语言相比也相对紧凑，这意味着它很容易走得太远，最终导致难以理解和难以维护的方法。

您的方法的构造方式还有另一个副作用，其中累加器只会从具有特定键的第一个散列中收集值，即使多个散列具有该键也是如此。由于我不知道这是否是故意的，我将保留此功能。

这是您的方法的一个版本，它返回您所期望的：

```
def my_method(*args)
  foo = { "key1"=>["var1","var2"],"key2"=>["var3","var4","var5"] }
  bar = { "key3"=>["var6"],"key4"=>["var7","var8","var9"],"key5"=>["var10","var11","var12"] }
  baz = { "key6"=>["var13","var14","var15","var16"] }

  merged = [foo, bar, baz].reverse.inject({}, :merge)

  args.inject([]) do |array, key|
    array += Array(merged[key])
  end
end 
```

一般来说，我不会定义带有内置数据的方法，但我会保留它以更接近您的原始方法。`Hash#merge`组合两个散列并用参数散列中的那些覆盖原始散列中的任何重复键。即使键不存在，该`Array()`调用也会强制一个数组，因此您不需要显式处理该错误。

我鼓励您查看该`inject`方法 - 它非常通用，在许多情况下都很有用。`inject`使用它自己的累加器变量（可选地定义为参数）作为第一个块参数产生给块。

# iphone - canSetSessionPreset:AVCaptureSessionPreset1920x1080 在 iPhone 4 上返回“是”

> ID：15727583
> 
> 赞同：6
> 
> 时间：2013-03-31T08:02:03.580
> 
> 标签：iphone, video, camera, preset

我想检查用户的 iPhone 是否支持全高清视频捕捉。我发现，我应该问 AV 会话，如果

```
avSession = [[AVCaptureSession alloc] init];
    [avSession beginConfiguration];
    if ([avSession canSetSessionPreset:AVCaptureSessionPreset1920x1080]) {
        avSession.sessionPreset = AVCaptureSessionPreset1920x1080;
        NSLog(@"FULLHD");
    } else {
        avSession.sessionPreset = AVCaptureSessionPreset1280x720;
        NSLog(@"HDREADY");
    }
    [avSession commitConfiguration]; 
```

这在 iPhone 5 上运行良好（它确实支持全高清拍摄），但在 iPhone 4 上也尝试设置预设，但显然失败了。我究竟做错了什么？

提前致谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-05T07:53:41.677

在将输入添加到捕获会话后，您是否调用了 canSetSettingPreset？

```
[captureSession addInput:captureInput]; // <--- you should add an input before canSetSessionPreset
[captureSession addOutput:captureOutput];

if( [captureSession canSetSessionPreset:AVCaptureSessionPreset1280x720] == YES ) {
    captureSession.sessionPreset = AVCaptureSessionPresetiFrame1280x720;
} else {
    captureSession.sessionPreset = AVCaptureSessionPreset640x480;
} 
```

# c# - 我可以避免这种代码的复制和粘贴吗？

> ID：15727584
> 
> 赞同：2
> 
> 时间：2013-03-31T08:02:10.587
> 
> 标签：c#, optimization

我有两个函数，它们的内容非常相似。

```
// mock-up code

bool A() {
    while(1000000) {
        // 3 lines of A() specific code
        // 15 lines of shared code, pasted in
        // 1 lines of A() specific code
    }
}
bool B() {
    while(1000000) {
        // 2 lines of B() specific code
        // 15 lines of shared code, pasted in
        // 2 lines of B() specific code
    }
} 
```

我不想将 15 行共享代码粘贴到两个函数中（因为这些行非常复杂，如果我稍后更改该代码，我不想记住在两个地方都更改它） .

如果我将这 15 行代码放入一个单独的函数中，则会对性能造成重大影响（JIT 拒绝内联它；可能是由于参数列表中的结构和/或“复杂”的流控制元素）。

还有其他方法吗，还是我运气不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:41:02.170

This 'significant' performance hit you're talking about is much less significant than what you think.

If it is so significant, You can try to tell to the JIT compiler to inline it using [MethodImplOptions Enumeration](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions%28v=VS.110%29.aspx), Though he should do it if the method is not virtual. [For more information](https://stackoverflow.com/questions/4660004/when-is-a-method-eligible-to-be-inlined-by-the-clr).

Example (From MSDN) :

```
using System;
using System.Globalization;
using System.Runtime.CompilerServices;

public class Utility
{
   [MethodImplAttribute(MethodImplOptions.AggressiveInlining)] 
   public static string GetCalendarName(Calendar cal)
   {
      return cal.ToString().Replace("System.Globalization.", "").
                 Replace("Calendar", "");
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T08:51:39.627

Let's not look for something too involved, what about that? Not so clean, but that may be the price you have to pay to have both non-reproduction and performance:

```
boolean AorB (boolean flagA) {
    while(1000000) {
        if (flagA) {
            // 3 lines of A() specific code
        }
        else {
            // 1 line of B() specific code
        }

        // 15 lines of shared code, pasted in

        if (flagA) {
            // 2 lines of A() specific code
        }
        else {
            // 2 lines of B() specific code
        }
    }
} 
```

# java - Java MongoDB 休息客户端

> ID：15727585
> 
> 赞同：3
> 
> 时间：2013-03-31T08:02:11.737
> 
> 标签：java, mongodb, rest

是否有任何基于 java 的 MongoDB 休息客户端？

*   可以包含在 Java 应用程序中
*   并提供对大多数 MongoDB 功能的 Restful 访问
*   并且可能`HttpClient`用作基本客户端来执行 HTTP 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:43:39.713

在 MongoDB 文档中，他们有一个关于[HTTP 接口](http://docs.mongodb.org/ecosystem/tools/http-interfaces/)的部分：

其中之一是 Java 服务器。

[Mongodb Java REST 服务器](https://sites.google.com/site/mongodbjavarestserver/home)

您确实要求使用 Java 客户端而不是服务器，但我认为这可能是朝着正确方向迈出的一步，并且将开放对 MongoDB 功能的 Restful 访问，这是您的标准之一。

希望能帮助到你。

干杯

# java - 如何填写按钮中的剩余部分？

> ID：15727591
> 
> 赞同：0
> 
> 时间：2013-03-31T08:04:10.657
> 
> 标签：java, swing, jbutton, paint

我一直在尝试圆形按钮，但这里有问题。目前我得到一个这样的按钮：

![在此处输入图像描述](https://i.stack.imgur.com/taHDe.jpg)

我想要做的是填充按钮方块中的剩余部分。我该怎么做呢 ？这是绘制此按钮的代码。

```
import javax.swing.*;
import java.awt.*;

class Tester extends JButton {

        public Tester(String label) {
            super(label);
            setContentAreaFilled(false);
            Dimension size = this.getPreferredSize();
            size.width = size.height = Math.max(size.width,size.height);
            this.setPreferredSize(size);

        }

        @Override
        public void paintComponent(Graphics g) {System.out.println("Inside the paintComponent method");
            if (getModel().isArmed()) {
                g.setColor(Color.lightGray);
            } else {
                g.setColor(getBackground());
            }
            g.fillOval(0,0,getSize().width-1,getSize().height-1);
            System.out.println(getSize().width);
            System.out.println(getSize().height);
            super.paintComponent(g);
        }

        public static void main(String args[]) {
            JFrame fr = new JFrame();
            JPanel p = new JPanel();
            JButton button = new Tester("Click Me !");
            button.setBackground(Color.GREEN);
            p.add(button);
            fr.add(p);
            fr.setVisible(true);
            fr.setSize(400,400);    
            fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
} 
```

如何填写按钮中的剩余部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T08:15:34.897

您可以`fillrect()`在调用之前使用该方法填充剩余部分`fillOval()`

```
 @Override
    public void paintComponent(Graphics g) {
        System.out.println("Inside the paintComponent method");
        g.setColor(Color.red); // here
        g.fillRect(0, 0, this.getWidth(), this.getHeight()); //here

        if (getModel().isArmed()) {
            g.setColor(Color.lightGray);
        } else {
            g.setColor(getBackground());
        }

        g.fillOval(0, 0, getSize().width - 1, getSize().height - 1);
        System.out.println(getSize().width);
        System.out.println(getSize().height);
        super.paintComponent(g);
    } 
```

像上面那样做我会得到

![在此处输入图像描述](https://i.stack.imgur.com/SDc9T.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T08:15:47.680

只需使用类似`Graphics#fillRect`填充矩形区域的东西

```
public void paintComponent(Graphics g) {
    System.out.println("Inside the paintComponent method");
    // Or what ever background color you want...
    g.setColor(Color.RED);
    g.fillRect(0, 0, getWidth(), getHeight());
    if (getModel().isArmed()) {
        g.setColor(Color.lightGray);
    } else {
        g.setColor(getBackground());
    }
    g.fillOval(0,0,getSize().width-1,getSize().height-1);
    System.out.println(getSize().width);
    System.out.println(getSize().height);
    super.paintComponent(g);
} 
```

# c# - C#中的TCP端口读取

> ID：15727594
> 
> 赞同：3
> 
> 时间：2013-03-31T08:04:36.830
> 
> 标签：c#, sockets, tcp

我有一个在远程服务器上运行的应用程序，它将数据（字符串）写入其本地端口，我想通过在其他系统上运行的另一个 C# 应用程序读取这个系统端口，当我连接到远程机器的这个端口时出现错误目标机器主动拒绝连接。

任何建议将不胜感激。

我试过这段代码：

```
Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
var ipaddress = IPAddress.Parse("192.168.1.12");
IPAddress add = new IPAddress(ipaddress.GetAddressBytes());
EndPoint ep = new IPEndPoint(add, 7862);
sock.Connect(ep);

if (sock.Connected)
{
    byte[] bytes = new byte[256];
    int i = sock.Receive(bytes);
    Console.WriteLine(Encoding.UTF8.GetString(bytes));
} 
```

这里 192.168.1.12 是远程系统的 IP 地址，其中应用程序正在将字符串连续写入端口 7862。我需要通过 C# 应用程序从该端口读取值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:23:57.640

我之前写过一个这样的程序......我照原样复制粘贴它，不要忘记允许“端口”到防火墙和 NAT，以便数据包真正通过

```
 class Transmitter
{
    public Boolean Transmit(String ip ,String port, String data){
        TcpClient client = new TcpClient();
        int _port = 0;
        int.TryParse(port, out _port);
        IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse(ip), _port);
        client.Connect(serverEndPoint);
        NetworkStream clientStream = client.GetStream();
        ASCIIEncoding encoder = new ASCIIEncoding();
        byte[] buffer = encoder.GetBytes(data);
        clientStream.Write(buffer, 0, buffer.Length);
        clientStream.Flush();
        return true;
    }
}

class Listener
{

    private TcpListener tcpListener;
    private Thread listenThread;
    // Set the TcpListener on port 13000.
    Int32 port = 8081;
    IPAddress localAddr = IPAddress.Parse("192.168.1.3");
    Byte[] bytes = new Byte[256];
    MainWindow mainwind = null;
    public void Server(MainWindow wind)
    {
        mainwind = wind;
        this.tcpListener = new TcpListener(IPAddress.Any, port);
        this.listenThread = new Thread(new ThreadStart(ListenForClients));
        this.listenThread.Start();

    }
    private void ListenForClients()
    {

        this.tcpListener.Start();

        while (true)
        {
            //blocks until a client has connected to the server
            TcpClient client = this.tcpListener.AcceptTcpClient();

            //create a thread to handle communication 
            //with connected client
            Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
            clientThread.Start(client);
        }
    }
    private void HandleClientComm(object client)
    {
        TcpClient tcpClient = (TcpClient)client;
        NetworkStream clientStream = tcpClient.GetStream();

        byte[] message = new byte[4096];
        int bytesRead;

        while (true)
        {
            bytesRead = 0;

            try
            {
                //blocks until a client sends a message
                bytesRead = clientStream.Read(message, 0, 4096);
            }
            catch
            {
                //a socket error has occured
               // System.Windows.MessageBox.Show("socket");
                break;
            }

            if (bytesRead == 0)
            {
                //the client has disconnected from the server
               // System.Windows.MessageBox.Show("disc");
                break;
            }

            //message has successfully been received
            ASCIIEncoding encoder = new ASCIIEncoding();
            mainwind.setText(encoder.GetString(message, 0, bytesRead));
            //System.Windows.MessageBox.Show(encoder.GetString(message, 0, bytesRead));
           // System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
        }

        tcpClient.Close();
    }
} 
```

# git - Git：如何将提交从分支变基并压缩到主控？

> ID：15727597
> 
> 赞同：25
> 
> 时间：2013-03-31T08:05:27.050
> 
> 标签：git, branch, rebase, squash

我正在尝试将我的所有提交从当前分支重新定位并压缩到主分支。这是我正在尝试做的事情：

```
git checkout -b new-feature 
```

在我尝试之后进行几次提交：

```
git rebase -i master 
```

在这种情况下，提交将保留在`new-feature`分支中

```
git checkout master
git rebase -i new-feature 
```

它为我提供了带有 noop 消息的编辑窗口。

我知道命令：

```
git merge --squash new-feature 
```

但我目前正在学习`rebase`命令。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-08-03T13:59:57.467

让我们来看看这些步骤。

1 - 我们创建一个新的功能分支

```
git checkout -b new-feature 
```

2 - 现在您可以在新分支上添加/删除和更新您想要的任何内容

```
git add <new-file>
git commit -am "Added new file"
git rm <file-name>
git commit -am "Removed a file"
cat "add more stuff to file" >> <new-file>
git commit -am "Updated files" 
```

3 - 接下来，挑选并压缩任何提交到一个漂亮漂亮的提交消息

```
git rebase -i master 
```

您需要记住的关键是在第一次提交后将所有提交的“pick”文本更改为“squash”。这会将所有提交压缩到您的主分支。

4 - 选择主分支

```
git checkout master 
```

5 - 将 HEAD 和 master 分支移动到 new-feature 所在的位置：

```
git rebase new-feature 
```

您可以在此可视化工具中尝试所有命令：http: [//pcottle.github.io/learnGitBranching/](http://pcottle.github.io/learnGitBranching/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-31T08:20:57.787

变基时，Git 不会将提交移动到另一个分支。它将移动分支，包括其所有提交。如果您想在基于它的基础上将提交提交到 master 中，请使用`git merge <branch tip or commit of branch>`将 master 分支快进到该提交。

# c# - 如何在通用类定义中指定 2 个 Wheres

> ID：15727599
> 
> 赞同：1
> 
> 时间：2013-03-31T08:05:53.457
> 
> 标签：c#, generics

```
public class GenericBuildService<T, T2> where T : IList<T2> 
```

我还需要确保任何传入的 T2 都实现了 INode。

当我在这里已经有 IList 的位置时，不确定如何指定。

更新：

我只是想进一步说明我的目标是什么。我需要这个服务类需要一个 IList 并且还需要一个 myCustomType 的 rootNode，因为由于各种原因我需要能够在这个类中的各种方法中使用这两种方法......所以我尝试像这样发送这些实例，但显然我还没有正确地构建我的类定义，因为它不喜欢我对这个类的使用：

```
Node<FieldDependency> rootNode = new Node<FieldDependency>(_rootNode);
            var builder = new GenericBuildService<IList<FieldDependency>, FieldDependency>(_dependencies, rootNode); 
```

所以我试图发送一个 IList<_dependencies> ，它只是一个 FieldDependency 实例的列表，还试图发送一个类型为 Node 的 rootNode

所以不太确定我是否正在为构建服务类形成我的类定义，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:12:27.620

您可以在方法和属性的泛型类型中*使用*类型参数。例如，如果您有一个接受`IList<T>`where`T`是您的类型参数的方法，您可以简单地执行以下操作：

```
public class GenericBuildService<T>
    where T : INode
{
    GenericBuildService(IList<T> dependencies, T rootNode);
} 
```

然后`T`，例如，如果是 ，`MyNode`IntelliSense 将显示（并且编译器将验证）只有实现`IList<MyNode>`的东西才会传递给您的构造函数（或使用的其他成员`T`）：

```
GenericBuildService(IList<MyNode> dependencies, MyNode rootNode); 
```

* * *

要为不同类型参数指定多个[*where*约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)，可以重复`where`关键字：

```
public class GenericBuildService<T, T2>
    where T : INode
    where TList : IList<T>
{
    GenericBuildService(TList dependencies, T rootNode);
} 
```

这意味着*所有*的使用`TList`都被用户指定的任何类型所取代，但这种类型*必须*实现`IList<T2>`。例如，如果`TList`是，`ReadOnlyCollection<MyNode>`那么 IntelliSense 将显示（并且编译器将验证）只有`ReadOnlyCollection<MyNode>`对象被传递给您的构造函数：

```
GenericBuildService(ReadOnlyCollection<MyNode> dependencies, MyNode rootNode); 
```

* * *

要在单个类型参数上指定多个约束，请用逗号分隔它们。首先指定特殊约束 ( `struct`, `class`)，在接口之前指定类约束，`new()`最后指定。

```
public class GenericBuildService<T, T2>
    where T : class, IList<T2>, new()
{
} 
```

您可以递归地在约束中使用类型参数。

约束指定类型必须是什么或实现什么。它们的含义：

*   `class`: 只允许引用类型。引用类型可以是`null`.
*   `struct`: 只允许使用不可为空的值类型。这样的值类型不能是`null`.
*   类约束：类型*必须*扩展指定的类型。
*   接口约束：该类型*必须*实现*所有*指定的接口。
*   `new()`: 该类型必须有一个无参数的构造函数。所有值类型都有这样的构造函数，但引用类型可能有也可能没有。

您不能同时使用`class` *和* `struct`。要指定您希望允许引用类型和所有值类型，请不要指定`class`或根本不指定`struct`。

* * *

如果您对泛型类型参数没有任何类型约束，则无需添加`where`.

```
public class MyClass<T>
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:08:47.497

您可以指定多个[where](http://msdn.microsoft.com/en-us/library/bb384067.aspx)约束，每个类型参数一个：

```
public class GenericBuildService<T, T2>
    where T : IList<T2>
    where T2 : INode
{
} 
```

# eclipse - 项目中未导入依赖项

> ID：15727602
> 
> 赞同：1
> 
> 时间：2013-03-31T08:06:19.057
> 
> 标签：eclipse, maven

我在 Eclipse 中使用 Maven 我在 pom.xml 中有 struts 和 java ee 依赖项

这是我的示例 pom.xml

```
 <dependencies>
    <dependency>
               <groupId>junit</groupId>
               <artifactId>junit</artifactId>
               <version>3.8.1</version>
               <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>

    </dependency>

    <dependency>
        <groupId>struts</groupId>
        <artifactId>struts</artifactId>
        <version>1.2.9</version>
    </dependency>
  </dependencies> 
```

我没有复制我的整个 pom.xml

问题：我的所有依赖项中的 jar 都已下载并放置在我的 M2_REPO 中。但是我的项目只使用了junit jar。我的项目没有使用其他 jars（struts 和 javaee）。当我尝试导入包时，它失败了。

我的示例 java 程序：

```
package org.xinotes;

import org.apache.struts.action.ActionForm;

public class HelloForm extends ActionForm 
{
    private String name;

    public String getName() 
    {
    return this.name;
    }

    public void setName(String name) 
    {
    this.name = name;
    }
} 
```

在这里，它给出了一个错误。它说“org.apache 无法解决”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:30:35.930

除了 Sebastien 的回答，检查您的 Preferences > Classpath Variables，以确保 M2_REPO 变量指向正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:20:13.120

假设您安装了 m2e：

*   在 Eclipse 中右键单击您的项目；
*   点击*Maven* >*更新项目...*；
*   *确保在Update Maven Project*窗口中勾选了您的项目；点击确定；

然后应该更新项目依赖项，并且您的类应该编译。

另一种方法是从 Maven 生成 Eclipse 文件：

```
mvn eclipse:eclipse 
```

# mips - 这些 MIPS 指令有可能吗？

> ID：15727605
> 
> 赞同：0
> 
> 时间：2013-03-31T08:07:11.503
> 
> 标签：mips, computer-architecture

我正在尝试解决“计算机组织与设计”一书中的问题。

我在书的解决方案中遇到了一系列说明。但是，mips 汇编程序 Qtspim 无法解释它们。这是说明。（本书第 4 版，问题 2.14.4 a）

```
add  $t2, $t0, $0
srl  $t2, $t2, 11
and  $t2, $t2, 0x0000003f
and  $t1, $t1, 0xffffffc0
ori  $t1, $t1, $t2 
```

为什么ori有3个寄存器？（我认为它不是 r 型指令） 为什么有 32 位立即数？（我认为指令本身具有 32 位智能。）

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:44:10.640

前两条指令看起来不错，但以下三条指令不行。这些可能是拼写错误，或者本书的作者使用了不同的 MIPS 汇编程序，它接受这些指令并将它们转换为有效的指令。

例如：

```
and $t2,$t2,0x0000003f 
```

=>
`lui $t2,0 ; ANDing the upper halfword with 0x0000 would set it to 0`
`andi $t2,$t2,0x003f`

* * *

```
and $t1,$t1,0xffffffc0 
```

=>
`andi $t1,$t1,0xffc0 ; ANDing the upper halfword with 0xffff would not change it`

* * *

```
ori $t1,$t1,$t2 
```

=>
`or $t1,$t1,$t2`

# php - 我可以使用 php Sessions 在多个客户端之间共享 Session 变量吗？

> ID：15727606
> 
> 赞同：5
> 
> 时间：2013-03-31T08:07:14.303
> 
> 标签：php, session-variables

我想知道的是，如果我可以为多个客户端共享一个 Session 变量。就像他们可以使用完全相同的对象一样。下面的示例将说明我想做的事情。

客户1：

```
start_session();
include('somelcass.php');
//some code...
$someobj = new someclass();
$_SESSION['myobject'] = serialize($someobj);
$id = sha1("somephrase");
set_session_var_for_other_users_by_id('myobject', $id); 
```

客户2：

```
start_session();
include('somelcass.php');
$id = sha1("somephrase");
get_sessionvars_from_other_users($id);
$someobj = unserialize($_SESSION['myobject']);
//now use someobj from class someclass 
```

我的另一个问题是：您是否建议使用一些会话扩展，例如：[sessionPsql](http://www.php.net/manual/de/book.session-pgsql.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T11:16:59.893

先回答你最后一个问题：

您链接的[Session PgSQL ^(*Docs*)](http://www.php.net/book.session-pgsql.php)*是PostgreSQL Session Save Handler*。它是一个*会话保存处理*程序，您可以配置为使用它来代替默认的会话保存处理程序。PHP 中的默认[会话保存处理程序](http://www.php.net/session.configuration#ini.session.save-handler)是将会话存储到磁盘 ( *`files`*)。如果您使用 PostgreSQL 会话的保存处理程序，则会将其保存到 PostgreSQL 数据库中 ( *`pgsql`*)。

如果您希望允许从多个 Web 服务器访问会话存储（扩展应用程序）或在您的情况下（可能）使用 SQL 查询访问所有会话，则在数据库中保存会话可能是有意义的，尽管通常[为定制的会话保存处理程序](http://www.php.net/function.session-set-save-handler)定义那（可以基于 PgSQL 会话保存处理函数）。

那么回答你的第一个问题：

是的，只要您有对相关对象的引用并且知道如何访问它，您就可以这样做。这可以通过手动访问会话存储或通过自己共享会话并切换会话以访问其他会话数据来完成。这取决于您的需求，在您的情况下，仅访问由 ID 存储在与会话无关的一些额外表中的序列化数据可能更容易。如果不再需要数据，您应该考虑如何处理数据，例如在一段时间不活动后将其删除。最后，您正在以可行的方式编写自己的会话实现。第 4 版之前的 PHP 没有开箱即用的会话支持，而现在它拥有的会话支持非常轻量级，所以如果您需要做更多具体的事情，比如您需要做的，

因此，多个客户端可以使用同一个会话（共享会话），这实际上也是一种攻击 webapps 的方法（[会话劫持^(*攻击*)](https://www.owasp.org/index.php/Session_hijacking_attack)），但只要“劫持”是在您的应用程序数据流中进行的，我什么都看不到在技​​术上是错误的。在 PHP 中，这意味着您需要关闭当前会话，打开另一个会话（会话由其名称*和*ID 标识），读取值，关闭另一个会话并重新打开当前会话。它在技术上可以在 PHP 中运行，但是当你这样做时要编写可靠的代码，因为会话问题很难调试。

这通常也是在多个客户端之间编写自己的对象共享机制而不是为此重新使用[PHP 的会话功能^(*Docs*)](http://php.net/features.sessions)的一个很好的理由。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T08:11:04.000

多个客户端不能共享会话对象中的数据。如果您想在客户端之间共享数据，您通常会使用其他一些服务器端存储方式，例如数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-18T11:28:23.333

我为**PHP**应用程序编写了一个解决方案，主要解决 2 类问题：

*   如何在托管在相同/不同服务器上的 PHP 进程之间共享数据/变量
*   如何同步数据/变量中的读/写操作

我的项目托管在 GitHub [ANYEM 项目中](https://github.com/Halayem/ANYEM.git)

首先：使用命令行启动**ANYEM_SERVER**

```
php ANYEM/ANYEM_SERVER/anyem.app.server.impl/ServerImpl.php 
```

现在，在您的 PHP 应用程序中，您可以执行以下操作：

```
<?php
// load server's connection configuration (ANYEM_SERVER IP and Port Number ...) 
$clientConnection    = ClientConnectionImpl::newClient();
// build a key for your variable that will be stored in server
// the key is composed on 3 Parts : [1] => URL, [2] => Variable Namespace, [3] => Variable Name
$identifier          = new ResourceIdentifierImpl("anyem.com", "anyemNameSpace", "a");

$a = 5;
$anyemClient         = new AnyemClientImpl($clientConnection, $identifier);
try {
    // if $a is reserved by another PHP Process, so this process
    // will sleep (1/10) seconds and retry the reservation of the resource
    // here, the max number of reservation attempts is 5, if reservation
    // fails, an Exception will be thrown
    $responseWrapper = $anyemClient->get($a, 5, 100000);
    // here we have reserved the variable $a, and we have the unserialized contents
    $a = $responseWrapper->getResource()->getData();
    // here, we update the contents, send it to ANYEM_SERVER and releasing the lock (we unreserve it)
    $anyemClient->put(++$a);
}
catch (Exception $e) {
    print $e->getMessage() . "\n";
    continue;
} 
```

希望可以帮助某人:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T17:17:40.373

我认为这个问题的最佳解决方案是使用数据库。创建一个表并存储在其中。当您只需要从表中读取数据时。它是在会话之间共享数据的快速简便的解决方案。

# python - 为什么 python CGI 脚本会在附加变量之后将网页显示为纯文本？

> ID：15727612
> 
> 赞同：0
> 
> 时间：2013-03-31T08:07:50.700
> 
> 标签：python, apache

我最近在我的一些 cgi 脚本中遇到了一些问题，一旦我向它们添加了更多变量。特别是，我目前正在重新制作页面以适应正在打印的 6 个变量。本质上，这是导致麻烦的设置：

```
import cgi

a='''
<head>
</head>
<body>
some text'''
b=some scripts
c="<br>"          # or the likewise to separate things out a bit
d=more scripts
e="<p>"           # ^ again, this is an example, but running even this fails out for me
f='''
</body>
</html>'''
print a
print b
print c
print d
print e
print f 
```

这是出于示例目的，但是是的，这似乎不起作用，我很好奇这是否是一个限制或者更合适的设置方式可能是什么。有关更多信息，我想我会提到这是在带有 apache 2.2.15 的 cent6 系统上运行的

PS：是的，我意识到它们都是分配的对象，我可以将它们全部打印在一起。

谢谢-杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:42:38.507

您必须指定您希望页面是什么内容类型。

引用[文档](http://docs.python.org/2/library/cgi.html#introduction)：

> > CGI 脚本的输出应由两部分组成，由空行分隔。第一部分包含一些标头，告诉客户端接下来是什么类型的数据。生成最小标题部分的 Python 代码如下所示：

```
 print "Content-Type: text/html"     # HTML is following
    print                               # blank line, end of headers 
```

# list - Visual C++ 中的枚举列表

> ID：15727615
> 
> 赞同：0
> 
> 时间：2013-03-31T08:08:09.180
> 
> 标签：list, visual-c++, visual-studio-2012, enums

所以我想创建同一个枚举的多个实例，然后将每个枚举存储在 Visual C++ 中的列表中。我计划使用通用列表，但愿意接受任何其他方式来做到这一点。无论如何，当我创建一个`List`实例时，我得到的错误是`Name is not a valid generic argument`. 提前感谢您的帮助！

基本代码：

```
enum Name
{
    one, two, three,
};

void GetInput(List<Name> names); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:30:41.737

如果您的目标是[c++/cli](http://en.wikipedia.org/wiki/C++/CLI)，则此代码编译得很好（注意枚举现在是托管枚举，而不是像您定义的那样的非托管枚举）：

```
using namespace System::Collections::Generic;

public enum class Name
{
    one, two, three,
};

void GetInput(List<Name> names); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:13:49.907

也许您应该切换到更好、更符合[C++11](http://en.wikipedia.org/wiki/C++11)（或 C++03）的编译器和/或使用`std::list`而不是`List`. 以下代码

```
 #include <list>
 enum Name {
    one, two, three
 };
 void GetInput(std::list<Name> names); 
```

`g++-4.8 -Wall -std=c++11 -c us.cc`在 Linux 上被接受而没有警告。我正在使用刚刚发布的[GCC 4.8](http://gcc.gnu.org/gcc-4.8/)版本。但是同样的例子也被旧的`g++-4.6 -Wall -c us.cc`使用一些以前的 C++ 标准所接受。

请注意，我正在使用（`std::list`因为*不在*C++2011 标准中 - 也不在 C++03 等以前的标准中）。也许您的编译器可能对标准的[ 而不是] （或者，或者其他一些标准的 C++11[容器](http://en.cppreference.com/w/cpp/container)）更满意？`List`*`std::list``List``std::vector`*

# c# - DirectShow .Net 摄像头捕获编码输出？

> ID：15727622
> 
> 赞同：0
> 
> 时间：2013-03-31T08:09:08.087
> 
> 标签：c#, directshow, directshow.net

最近我开始了我自己的项目，该项目使用 DirectShow .Net 捕获相机输出。有几个问题我不知道如何解决 1）我如何将捕获的流编码为 H.264 格式。我知道我应该在过滤器图中添加一些过滤器。但我无法找到在哪里以及如何。我也无法找到是否有标准的 H.264 过滤器，或者我应该从某个地方下载它吗？如果我需要下载它可以只是一个 dll 我添加参考还是应该是安装程序？2）有没有办法将捕获的输出保存到内存对象、某种流或只能写入文件？最好的问候， 约旦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:23:30.497

您可以使用来自[VisioForge](http://www.visioforge.com)或[Viscomsoft](http://www.viscomsoft.com)的商业软件。

AForge 潜在问题 - 捕获期间没有音频，只有视频。输出格式也非常有限。但是 - 它是免费和开源的，如果您有任何 DirectShow 经验，您可以添加音频支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:24:20.413

1.  您将需要使用诸如 FFMpeg 或 Handbrake 之类的东西。查看[http://vidcoder.codeplex.com/](http://vidcoder.codeplex.com/)。AForge 还具有一些视频编辑功能，您还可以将过滤器传递给它。您还可以使用几个 FFMpeg C# 包装器，例如[https://github.com/crazyender/FFMPEG.net](https://github.com/crazyender/FFMPEG.net)

2.  您应该使用 AForge.net。所有的辛苦工作都已经为你完成了。使用`VideoFileWriter` [http://www.aforgenet.com/framework/docs/html/4ee1742c-44d3-b250-d6aa-90cd2d606611.htm](http://www.aforgenet.com/framework/docs/html/4ee1742c-44d3-b250-d6aa-90cd2d606611.htm)。我似乎 AForge 框架在后台也使用了 FFMpeg（参见`AForge.Video.FFMPEG`命名空间）。您只需创建一个作家并将位图/帧传递给它`writer.WriteVideoFrame(bitmap);`

您应该充分研究 AForge 中的视频抽象。您可以为自己节省大量时间。

示例：[http ://www.aforgenet.com/framework/samples/video.html](http://www.aforgenet.com/framework/samples/video.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:29:28.300

1) 是的，您应该下载编码器过滤器库。大多数解码器都是免费提供的。但编码器不是。如果不想付费，就得找开源的Encoder。并且要在graphedit程序中使用，您应该使用该dll文件进行dll注册。或者安装程序执行此操作。而且您还需要检查容器类型，如 mp4、mkv... 换句话说，您需要 mux 过滤器将其保存在文件中。我认为有人会链接可用的网址。抱歉，我现在没有网址。

2）那是什么捕获手段？是那部电影吗？或图像？

*   在 Image 的情况下，有许多示例项目和 SampleGrabbers。您可以将其保存到文件和内存中。

*   如果是电影，我敢肯定你的电脑内存在没有编码的情况下对他们来说是不够的。制作内存流并将其传递给捕获管理器。

您还可以制作过滤器，以便根据您的需要自定义过滤器。所有信息都包含在 Windows SDK 示例中。

# javascript - 如何防止在表单中输入无效字符？

> ID：15727627
> 
> 赞同：1
> 
> 时间：2013-03-31T08:09:55.767
> 
> 标签：javascript, forms, validation, onkeypress

例如，如果我有一个表单并且我不希望用户在其中输入数字并且我使用包含正则表达式的函数对其进行验证，我如何防止用户输入的无效字符（在此示例中为数字) 如果它没有通过正则表达式测试，它会不会出现在文本表单中？

这是我尝试过的功能和我尝试过的选择列表（换句话说，这不是整个程序）。我尝试将 false 返回到 onkeypress 事件处理程序，但用户输入到文本框中的内容仍然通过。

```
function noNumbers(answer) {  //returns false and displays an alert if the answer contains numbers
     if (/[\d]+/.test(answer)) {    // if there are numbers
         window.alert("You can not enter numbers in this field");
         return false;
     }

}

<form action="get" enctype="application/x-www-form-urlencoded">
    <select id="questions" name="questions">
         <option value="no_numbers">What is the name of the city where you were born?</option>
         <option value="no_letters">What is your phone number?</option>
         <option value="no_numbers">What is the name of your favorite pet?</option>
         <option value="no_letters">What is your social security number?</option>
         <option value="no_numbers">What is your mother's maiden name?</option>  
    </select>
    <p><input type="text" name="answer" onkeypress="validateAnswer();" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-10T16:00:58.507

当您在相关字段中输入无效字符时，此验证非常适合即时去除无效字符。例子：

```
<form id="form1" name="form1" method="post">
  Email:
  <input type="text" name="email" id="email" onkeyup='res(this, emailaddr);' ; </form>

  <script>
    var phone = "()-+ 0123456789";
    var numb = "0123456789";
    var alpha = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ @-'.,";
    var alphanumb = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ @-.'1234567890!?,:;£$%&*()";
    var alphaname = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ,-.1234567890";
    var emailaddr = "0123456789@._abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

    function res(t, v) {
      var w = "";
      for (i = 0; i < t.value.length; i++) {
        x = t.value.charAt(i);
        if (v.indexOf(x, 0) != -1)
          w += x;
      }
      t.value = w;
    }
  </script>
```

然后，您只需使用代码中定义的变量将 javascript 调用的第二个值更改为您希望在字段中输入的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:21:23.560

通过向您的函数添加一个额外的参数来简化您的生活，`validateAnswer`如下所示：
`<input type="text" id="answer" name="answer" onkeyup="validateAnswer(this);" />`

然后你可以这样定义你的`validateAnswer`：

```
function validateAnswer(elem){
    elem.value = elem.value.replace(/[^\d]/g, '');
} 
```

这里是一个例子：http: [//jsbin.com/iwiduq/1/](http://jsbin.com/iwiduq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:27:24.477

您从传递给处理程序的事件对象中获得被按下的键。

```
input type="text" name="answer" onkeypress="validateAnswer(this, event);" />

function validateAnswer(element, event) {
  if (event.charCode) {
    if (/\d/.test(String.fromCharCode(event.charCode))) {
      window.alert("You can not enter numbers in this field");
      return false;
    }
  }
} 
```

谷歌搜索“onkeypress 事件”可以找到很多这样的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T09:01:57.073

这是您正在寻找的功能

```
function validateAnswer(src) {
    var questions = document.getElementById("questions");
    var rule = questions.options[questions.selectedIndex].value;
    if(rule=="no_numbers") src.value = src.value.replace(/\d/g, '');
    if(rule=="no_letters") src.value = src.value.replace(/\w/g, '');
} 
```

只需将输入字段引用发送到函数并将其设置为`onkeyup`事件：

```
<input type="text" name="answer" onkeyup="validateAnswer(this);" /> 
```

您还应该挂钩选择框的`onchange`事件以重置输入框的值。我建议你也考虑`HTML5 pattern attribute`. 看

*   [小提琴](http://jsfiddle.net/754fF/1/)
*   [模式属性支持](http://www.wufoo.com/html5/attributes/10-pattern.html)
*   [不受支持的浏览器的解决方法](https://stackoverflow.com/questions/9255752/does-the-html5-pattern-attribute-work-in-every-browser)

# algorithm - 使用 Epsilon 进行过采样

> ID：15727630
> 
> 赞同：1
> 
> 时间：2013-03-31T08:10:27.070
> 
> 标签：algorithm, machine-learning, artificial-intelligence, classification

我有一个关于数据挖掘的问题。我有属于 4 个类的 74 个实例的数据集。由于每个类的数量不足以使用某些分类器（svm、rna、knn）获得良好的准确性，我需要“过采样”每个类的实例数。

我听说有一种方法可以做到这一点。它包括如下生成这些新实例：

```
new_instance <---- original_instance + u(epsilon) 
```

但我对它没有更多的了解。

有人用这种方法“过采样”他的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:18:55.543

[我从未使用过这种过采样方法，但我认为您可以在本文](http://www3.nd.edu/~dial/papers/SPRINGER05.pdf)中找到有用的指针。

描述了几种过采样和欠采样。它应该可以帮助您找到更适合您的情况的方法。

# android - 我在 Listview Android 的什么位置？

> ID：15727632
> 
> 赞同：0
> 
> 时间：2013-03-31T08:10:37.327
> 
> 标签：android, listview

我使用带遥控器的 Listview (Q1 Himedia SettopBOX) 现在向下和向上 keydown ،我如何知道我在列表视图中的位置，例如：当到达列表视图中的最后一项时，列表刷新或转到第一项？

请帮助我....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:23:15.580

看看ListView 的[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html "滚动回调的 Android SDK 文档")。您可以通过实现侦听器的功能，使用`ListView.setOnScrollListener()`并获取第一个可见项目的位置和可见条目数来设置新的回调。`onScroll`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:36:49.217

像这样对列表视图使用[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)。

```
myListView.setOnScrollListener(new OnScrollListener()
        {
            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, 
            int visibleItemCount, int totalItemCount)
            {
                // Your code goes here. Determine the position with the firstVisibleItem.
            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState)
            {
                if (scrollState == AbsListView.OnScrollListener.SCROLL_STATE_FLING) 
                {
                    Log.d(TAG, "User is flinging through the view");
                }
            }
        }); 
```

# android - Android - 上次屏幕锁定时间

> ID：15727637
> 
> 赞同：2
> 
> 时间：2013-03-31T08:11:01.283
> 
> 标签：android, screen-lock

有没有办法找到自用户锁定/解锁屏幕以来的最后一次或所花费的时间？有没有存储这些信息的日志？

我正在尝试跟踪用户（in）活动并寻找最简单的方法来做到这一点。我知道这可以通过通过服务进行持续跟踪来完成，但我试图避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:23:03.150

这似乎是做不到的。

我最终创建了一项新服务，该服务跟踪上次屏幕锁定/解锁并自己节省时间。

# php - php 将 xml 动态格式化为 php 数组

> ID：15727639
> 
> 赞同：0
> 
> 时间：2013-03-31T08:11:35.070
> 
> 标签：php, xml, xml-parsing, xml-serialization, simplexml

嗨，我想知道是否有人知道可以将任何 xml 文件格式化为特定格式的数组的脚本或函数，例如具有类似这样的 xml（但要长得多）

```
<data>
    <width>3.5</width>
    <height>2</height>
    <edge>.125</edge>
    <safe>.125</safe>
</data>

<fold>
    <show_lines></show_lines>
    <type>online</type>
</fold>

<preview>
    <name>testfile</name>
    <location>testurl.com</location>
</preview>

<preview>
    <name>myfile</name>
    <location>someurl.com</location>
    <special>frontandback</special>
</preview> 
```

Id 基本上想遍历每个属性检查它内部是否有更多等等等等，并且基本上创建一个数组，所以它看起来像这样

```
$array = [data] (
    width=>3.5
    height=>2
    edge=>.125
    safe=>.125
)

[fold] (
    type=>online
)

[preview] (
    [0]=>(
        name=>testfile
        location=>testurl.com
    )
    [1]=>(
         name=>myfile
         location=>someurl.com
         special=>frontandback
    )
) 
```

依此类推，所以基本上它只会抓取具有值的元素并跳过那些没有值的元素，并且 xml 的某些部分可能比另一部分有更多的子元素，它应该全部抓取它们，如果有多个具有相同名称的属性将是一个自己的数组，每个数组都是其中的一个数组

希望这是有道理的，任何人都可以帮忙。我主要尝试使用 simplexml，但可以使用其他任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T13:34:54.970

对于像您示例中的文档这样的简单文档，总是有这个*（肮脏的）*技巧：

```
$arr = json_decode(json_encode(simplexml_load_string($xml)), 1); 
```

[工作示例](http://ideone.com/QvLyZj)

**输出：**

```
Array (
    [data] => Array (
        [width]  => 3.5
        [height] => 2
        [edge]   => .125
        [safe]   => .125
    )
    [fold] => Array (
        [show_lines] => Array ()
        [type]       => online
    )
    [preview] => Array (
        [0] => Array (
                [name]     => testfile
                [location] => testurl.com
        )
        [1] => Array (
                [name]     => myfile
                [location] => someurl.com
                [special]  => frontandback
        )
    )
) 
```

# javascript - 简化javascript中的多功能

> ID：15727641
> 
> 赞同：0
> 
> 时间：2013-03-31T08:11:52.893
> 
> 标签：javascript, jquery, random, setinterval

嘿，我正试图找出一种方法，我可以简化我的代码，这样我就不必拥有 38 个这些函数，而只有一个可以在不同时间运行 38 个不同 id 的函数。这是一个随机脚本，它告诉 id 元素落在一个特定的字母上。

```
var randlet = 0;
var timesrun = 0;

function randomizer() {
    randlet = Math.floor(Math.random() * 26);
    timesrun += 1;
    if (master[randlet] == letter[0]) {
        $('#L1').css('background-position', master[randlet]);
        clearInterval(interval);
    } else {
        if (timesrun == 100) {
            master[randlet] = letter[0];
            $('#L1').css('background-position', master[randlet]);
            clearInterval(interval);
        } else {
            $('#L1').css('background-position', master[randlet]);
        }
    }
}

var interval = setInterval(function() {
    randomizer();
}, 10); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:24:06.343

对于每个元素，设置一个名为“随机”的类。在函数中，使用 jquery .each 方法迭代每个随机元素。如果该元素需要固定其值，则简单地删除“随机”类。当没有更多的元素具有 randomise 类时，清除计时器。

# android - Android上的活动娱乐

> ID：15727642
> 
> 赞同：2
> 
> 时间：2013-03-31T08:12:11.070
> 
> 标签：android, android-activity

我正在阅读有关管理活动生命周期的官方 Android 教程。请看我引用的以下几点。

（正常的应用程序行为）“当您的 Activity 因用户按下 Back 或 Activity 自行完成而被销毁时，系统对该 Activity 实例的概念将永远消失，因为该行为表明不再需要该 Activity。”

（系统诱导销毁）“如果系统由于系统限制（而不是正常的应用程序行为）而销毁 Activity，那么尽管实际的 Activity 实例已经消失，但系统会记住它的存在，因此如果用户导航回它，系统使用一组保存的数据创建一个新的活动实例，这些数据描述了活动被销毁时的状态。”

“系统用来恢复之前状态的保存数据是存储在Bundle对象中的键值对的集合。默认情况下，保存的信息是关于活动的视图层次结构，例如在小部件中输入的文本，滚动位置等。要为您的活动保存额外的状态信息，例如成员变量，您必须实现 onSaveInstanceState() 并将键值对添加到 Bundle 对象。”

请看我是否可以从上面正确总结：

该系统具有资源意识，可以破坏活动以恢复记忆。如果系统这样做了，那么它会留下一个选项，如果以后需要的话，可以将被破坏的活动恢复到之前的状态。

状态 = 视图状态（默认，自动完成）+ 成员变量状态（手动，由程序员决定）。

我的问题是，如果系统正在销毁活动以释放一些内存，那么如果它允许我们保留活动的“副本”以便活动可以准确地恢复到点，那么它是否会破坏目的和毁灭前一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:19:30.753

不，它不会破坏目的：

*   A`Bundle`针对可序列化进行了优化，因此 Android 框架可以将其写入磁盘。
*   表示状态所需的数据远小于运行应用程序副本所需的 RAM 量。例如，如果您向用户显示图像，您可能只需要保存图像的位置，而不是保存图像的所有数据。此外，每个 Android 应用程序都是一个全新的 Dalvik VM，所以如果所有活动都来自不同的应用程序，杀死一个活动意味着少一个 Dalvik VM - 每个 Dalvik VM 可能需要相对大量的 RAM。

# android - android谷歌地图获取md5错误cmd

> ID：15727645
> 
> 赞同：0
> 
> 时间：2013-03-31T08:12:34.993
> 
> 标签：android, google-maps, cmd

我正在使用[本教程](http://www.androidhive.info/2012/01/android-working-with-google-maps/)

我试图像这样获得MD5

![尝试获取 MD5](https://i.stack.imgur.com/yb3bK.jpg)

我有`C:\Program is not regonized`错误。

请问我做错了什么？

我以管理员身份登录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:23:44.190

您还需要将`keytools.exe`路径包含在引号（`"`）中，例如：

```
C:\Windows\system32>"C:\<path-to-jdk-dir>\bin\keytool.exe" -list -alias 
    androiddebugkey -keystore "C:\users\<user-name>\.android\debug.keystore" 
    -storepass android -keypass android 
```

# plsql - 如何在动态sql中使用OUT模式

> ID：15727651
> 
> 赞同：0
> 
> 时间：2013-03-31T08:13:28.757
> 
> 标签：plsql, dynamic-sql, execute-immediate

这是什么，我正在尝试

```
 1  declare
  2  stmt VARCHAR2(200):='&query';
  3  emprec emp%ROWTYPE;
  4  BEGIN
  5    EXECUTE IMMEDIATE stmt USING out emprec,in &id;
  6    DBMS_OUTPUT.PUT_LINE('Emp: '||emprec.ename);
  7* END;
SQL> /
Enter value for query: select * into :emprec from emp where empno=:no
old   2: stmt VARCHAR2(200):='&query';
new   2: stmt VARCHAR2(200):='select * into :emprec from emp where empno=:no';
Enter value for id: 7369
old   5:   EXECUTE IMMEDIATE stmt USING out emprec,in &id;
new   5:   EXECUTE IMMEDIATE stmt USING out emprec,in 7369;
  EXECUTE IMMEDIATE stmt USING out emprec,in 7369;
                                   *
ERROR at line 5:
ORA-06550: line 5, column 36:
PLS-00457: expressions have to be of SQL types
ORA-06550: line 5, column 3:
PL/SQL: Statement ignored 
```

但是，当我将第**5**行更改为

`EXECUTE IMMEDIATE stmt into emprec USING in &id;`

并查询`select * from emp where empno=:no`

然后它工作正常并显示正确的输出。任何人请帮助我，如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:41:54.307

要存储执行查询的结果集，您必须使用 INTO 子句指定兼容变量。

INTO 子句仅用于单行查询，该子句指定检索列值的变量或记录。对于查询检索到的每个值，INTO 子句中必须有一个对应的、类型兼容的变量或字段。

```
DECLARE
  stmt VARCHAR2(200):='select * from emp where empno=:no';
  emprec emp%ROWTYPE;
BEGIN
  EXECUTE IMMEDIATE stmt INTO emprec USING &id;
  DBMS_OUTPUT.PUT_LINE('Emp: '||emprec.ename);
END; 
```

# android - 静态方法中的数据库初始化错误

> ID：15727653
> 
> 赞同：0
> 
> 时间：2013-03-31T08:13:52.453
> 
> 标签：android

我有数据库类。该类及其构造函数如下所示。

```
 public class LatLogDBAdapter {   

     private static class DatabaseHelper extends SQLiteOpenHelper {

          DatabaseHelper(Context context) {
              super(context, DATABASE_NAME, null, DATABASE_VERSION);
          }
} 
```

我想在静态方法中使用数据库。所以我声明为`private static LatLogDBAdapter dbHelper;`. 然后当我初始化时，我有问题。`dbHelper = new LatLogDBAdapter(this);` `dbHelper = new LatLogDBAdapter(DetailMapView.this);`使编译错误。如何在静态方法中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:37:22.700

如果您想创建返回 dbhelper 的静态方法，我建议您创建普通子类，`SQLiteOpenHelper`并在此类中创建将返回新实例的公共静态方法。这听起来也是使用设计模式的好理由`Singleton`

## 更新：

> 我的意思是我想在另一个 java 类中使用这个数据库类。该类具有静态方法并使用数据库。

在这里，我为您创建了基本的代码片段：

```
public class AdapterWrapper {

    private static SQLiteOpenHelper instance;

    public static SQLiteOpenHelper getInstance(Context c) {
        if (instance == null) {
            instance = new DatabaseHelper(c);
        }
        return instance;
    }

    private static class DatabaseHelper extends SQLiteOpenHelper {

        private static final String DB_NAME = "Example";
        private static final int DB_START_VERSION = 1;

        public DatabaseHelper(Context cntx) {
            super(cntx, DB_NAME, null, DB_START_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // creating tables
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int old, int new) {
            /// drop an upgrading db
        }
    }
} 
```

# tree - 在二叉搜索树中查找第 k 个最近的元素

> ID：15727654
> 
> 赞同：0
> 
> 时间：2013-03-31T08:14:01.580
> 
> 标签：tree, binary-tree, binary-search-tree

这是我在采访中提出的一个问题。对于给定的 BST，找到第 k 个最接近的元素。遍历整棵树是不可接受的。解决方案不应该是 o(n) 并且空间复杂度不是问题。谢谢。

我的尝试 - 遍历树的一个分支以获取可能的元素，然后从这些元素开始遍历分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T20:26:52.980

我想问题是关于找到 BST 中最接近值 V 的第 K 个元素，

注意：不可能在少于 O(n) 的时间内做到这一点，除非 BST 是平衡的，

要找到第 K 个最接近的元素：我们维护 K 个整数，它们是迄今为止与 V 最接近的值，1.访问每个节点（从根开始），我们将节点的值、其前任和后继的值添加到迄今为止看到的最接近的值。（如果数组已满，我们只在靠近 V 的数组中放入一个值。我们用这个值替换最大的那个）

2.如果当前节点的后继节点更接近V，我们选择右分支，如果前任节点更接近，我们选择左分支。

3.我们重复直到没有更多节点可以访问（我们到达叶子）

4.时间复杂度：O(n^2 * k)，如果我们假设k是常数（例如k = 3）并且树是平衡的，那么时间复杂度将是：O(log(n) ^ 2)

```
Integer[] closest = new Integer[3]; // initialized with null  
void find_3rd_closest(Node current , int K){

    Node succ = Successor(current);
    Node pred = Predecessor(current);

    insert(closest , current.val , K);
    if (succ != null)
        insert(closest , succ.val , K);
    if (pred != null)
        insert(closest , pred.val , K);

    if (succ != null && pred != null)
        if (Math.abs(pred.val - K) < Math.abs(succ.val - K))
            find_3rd_closest(pred , K);
        else
            find_3rd_closest(succ , K);
    else if (pred != null)
        find_3rd_closest(pred , K);
    else if (succ != null)
        find_3rd_closest(succ , K);
    else
        return;
}

void insert(int[] closest , int val, int K){
    for (int i = 0 ; i < closest.length ; i++){
        if (closest[i] != null && Math.abs(K - val) < Math.abs(K - closest[i])){
            for (int j = i ; i < closest.length - 1 ; i++){
                int temp = closest[i+1];
                closest[i+1] = closest[i];
                closest[i] = temp;
            }
        }
        closest[i] = succ.value;
    }
}

Node Successor(Node current){
    if (current.rightChild == null)
        return null;
    current = current.rightChild;
    while (current.leftChild != null)
        current = current.leftChild;
    return current;
}

Node Predecessor(Node current){
    if (current.leftChild == null)
        return null;
    current = current.leftChild;
    while (current.rigthChild != null)
        current = current.rightChild;
    return current;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T10:17:42.750

首先我们必须找到什么。1，首先你必须得到节点（从 BST 根） 2\. 你必须得到它下面和距离 k 的节点。3.你必须得到一个祖先，它是它上面的k个节点。4.你必须得到离它第k远的节点。（同级别或其他级别）

```
 A(8) 
                                /         \
                              B(6)           C(22)
                           /    \         /  \
                         D(5)    E(7)   F(17) G(26)
                                      /  \      \
                                  (15)H   I(19)     N(29)
                                    /      \
                              (14) K        L(20) 
```

Okie 认为这棵树是一棵 BST 树（A、B、C d 不是 BST 的序列，* 将它们视为节点引用来标识节点而不是值 *）我附上了一个代表值的数字。

还有一个考虑。因为它被宣布为 BST 树。不存在父指针。***

你得到了树的根 A 。给定一个数字 17 ，并给定一个 k=2 的值。首先对于数字 17 获取参考 (F) 对于 k=2 ，即从 2 个节点距离从 F 获取树的所有节点。作为 F 的后代，您必须将 K(14) 和 L(20) 检测为的上升F 你必须得到节点 A。你必须再次得到节点 G（2 个节点距离）（尽管没有父指针你必须得到它）。

第一步，首先为数字 -> 17 获取参考 F（您拥有的根）进行简单的二进制搜索。

```
ArrayList get_it( Node root_node, int number) {
    node = root_node; 
    if (node ==null)
        throw new IllegarArgumentException("null root node");
    ArrayList  pathtracker = new ArrayList();
    //is the root node matches 
    pathtracker.add(node);  // fix
    if( node.data=number) // fix
    return pathtracker; 
    while(node !=null) {
        if ( node.data==number){
           return pathtracker;
        }
        if ( node.data >= number ){
            node=node.left;
        }
        else{
            node=node.right;
        }
        pathtracker.add(node);        
    } // end of while loop
    return new ArrayList(); //search failed node is not present.
   // returning empty arrayList
 } 
```

现在我们将使用路径跟踪器。这具有从根到该节点的跟踪节点。第 0 个节点是根节点，length()-1 个节点是我们搜索过的节点。

```
for ( int i = pathtracker.length() - 1 , depth=k ;
         ( depth => 0 && i => 0 ) ; i--,depth-- ){  
    if ( i == pathtracker.length() - 1) {//first case
        printnodeDistancek( pathtracker.get(i), depth);
    }else {
        if( pathtracker.get(i).left ! = pathtracker.get(i+1) ){
            printnodeDistancek( pathtracker.get(i).left, depth);
        }else{
            printnodeDistancek( pathtracker.get(i).right, depth);
        }       
    } // end of else block
} // end of loop

void printnodeDistancek( node n, k) {
    if (node==null)
      return;
    if ( k = 0) {
      print node.data;
      return;
    }
    printnodeDistancek( n.left, k-1);
    printodeDistanceK( node.right, k-1);
} 
```

给定的数字是 17（F 节点），现在如果 k=3，这应该打印 N 和 B。如果 K=4，这应该打印 D(5) 和 E97)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:50:51.157

我将假设两个节点之间的接近度由它们之间的边数定义，并且为了解决歧义，我还假设在距离相等的情况下，父节点最接近，然后是右节点，然后是左节点。

根节点的第 k 个最接近的元素将是第 k 个元素是树的级别顺序遍历。

对于树中的任何节点，我们将从距离 1 边的节点开始，即它的父节点，右，左，然后距离 2 边，即距离 1 的节点的父节点，右，左，依此类推。我们将继续计数，直到我们达到 k 个节点，还要确保我们不计算一个节点两次。考虑以下伪代码。

```
KthClosest(Node * node, k)
{
    std::queue<Node *> queue;
    std::map<Node *, bool> mapToCheckIFNodeIsCounted;
    int count = 0;
    queue.push_back(node);
    while(count <k)
     {
       Node* node = queue.pop();
       if(node ->parent != NULL)
       {
          if(mapToCheckIFNodeIsCounted.find(node->parent) ==mapToCheckIFNodeIsCounted.end())
            {
              queue->push_back(node->parent);
              mapToCheckIFNodeIsCounted.insert(std::pair<node->parent,true>);

            }
        }
        if(node -> right != NULL)
        {

           if(mapToCheckIFNodeIsCounted.find(node->right) == mapToCheckIFNodeIsCounted.end())
           {
             queue->push_back(node->right);
            mapToCheckIFNodeIsCounted.insert(std::pair<node->right,true>);
           }
        }
        if(node -> left != NULL)
        {

             if(mapToCheckIFNodeIsCounted.find(node->parent) == mapToCheckIFNodeIsCounted.end())
            {
               queue->push_back(node->left);

               mapToCheckIFNodeIsCounted.insert(std::pair<node->left,true>);
            }
       }
       count++;

    }

   // Kth node is the node in queue after loop has finished fraversing k closest elements

   Node *node = queue.pop();
   print(node->value);

} 
```

# java - 在 SPARQL 查询中使用 DataTypeProperty 文字不起作用

> ID：15727657
> 
> 赞同：3
> 
> 时间：2013-03-31T08:14:30.700
> 
> 标签：java, sparql, rdf, jena

我正在尝试执行一个非常简单的 SPARQL 查询，以根据查询字符串中传递的姓名检索一个人的国籍，但我不明白为什么它不起作用。以下是相关的RDF规则......

```
<owl:DatatypeProperty rdf:ID="name">
<rdfs:domain rdf:resource="#NobelWinner"/>
<rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
<rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string">All laureates have a name.</rdfs:comment>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:ID="nationality">
<rdfs:domain rdf:resource="#PersonWinner"/>
<rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#string"/>
<rdfs:comment rdf:datatype="http://www.w3.org/2001/XMLSchema#string">
Person laureates were associated with a nation when they won the prize.
</rdfs:comment>
</owl:DatatypeProperty> 
```

代码在 Java servlet 中，看起来像这样，SPARQL 查询在第 42 行......

```
 try {
 34             String prefix1 = "PREFIX nob:<http://swat.cse.lehigh.edu/resources/onto/nobel.owl#> ";
 35             String prefix2 = "PREFIX rdfs:<http://www.w3.org/2000/01/rdf-schema#> ";
 36             String prefix3 = "PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#> ";
 37             String prefix4 = "PREFIX nobdat:<http://swat.cse.lehigh.edu/resources/data/nobel/nobeldata.owl#> ";
 38             String prefix = prefix1+prefix2+prefix3+prefix4;
 39             String winnerName = request.getParameter("name");
 40
 41             // INSERT QUERY
 42             String queryString  = prefix +
 43                 "SELECT ?nat { ?s nob:name " + winnerName + ". ?s nob:nationality ?nat. }";
 44
 45             String ttlLoc = "/my/ttl/path/loc.ttl";
 47             Store store = SDBFactory.connectStore(ttlLoc);
 48             Dataset ds = DatasetStore.create(store) ;
 49
 50             // CREATE QUERY
 51             Query query = QueryFactory.create(queryString);
 52             QueryExecution qe = QueryExecutionFactory.create(query, ds);

                    while (rs.hasNext()) {
 66                     QuerySolution qs = rs.nextSolution();
 67                     String nationality = qs.getLiteral("?nat").toString();
 68                     out.println("<P>Nationality: " + nationality + "</P>");
 69                 } 
```

我也无法获得使用字符串文字代替名称来在 Protege IDE 中工作的查询或类似内容。有任何想法吗？多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:44:35.157

`winnerName`需要是一个 SPARQL 常量，即带引号 - 您可以使用单引号：

```
.... ?s nob:name '" + winnerName + "' . ?s nob:nationality 
```

利用`Dataset ds = SBDFcatoryconnectDataset(ttlloc) ;`

从长远来看，考虑创建 datset ins ervlet 初始化，而不是每个请求。

# c - 编译器在包含其他库后不接受外部变量

> ID：15727659
> 
> 赞同：1
> 
> 时间：2013-03-31T08:14:41.487
> 
> 标签：c, extern

我有一个问题，我需要将变量从一个文件外部化到另一个文件，并且我需要包含一个库。问题是当我包含库时，编译器会给出一个错误，指出变量未定义。外部文件：

```
#include <stdio.h>
#include "PHY.h"

void InterruptHandler();

extern int flag;
extern long toSend;
extern int recieved;
void InterruptHandler()
{
    //here i use the flag
} 
```

主要的：

```
#include <stdio.h>
#include "PHY.h"
void main()
{
    int flag;       //  DETERMINATES CLOCK STATUS
    int recieved;
    long toSend;    //  THE DATA WE WANT TO SEND (for instance 0x12345678)
    toSend  =   0x12345678; // EXAMPLE
    // .... here the code continues..
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:19:54.377

您不能使函数的局部变量（例如`flag`in `main()`）在函数外部的任何地方直接可见，更不用说通过`extern`.

您需要将这些局部变量移到外部`main()`，使它们成为普通的全局变量。它们可以通过`extern`您的“外部”文件访问。

此外，由于代码建议您在其中处理中断，因此请创建在 ISR 中访问的那些全局变量`volatile`。如果您不这样做，对它们的更改可能在 ISR 中或外部是不可见的。

# jquery - rails jquery ui datepicker

> ID：15727660
> 
> 赞同：3
> 
> 时间：2013-03-31T08:15:01.490
> 
> 标签：jquery, ruby-on-rails, coffeescript, datepicker

我想将 datepicker 小部件添加到我的选择字段之一。我目前正在使用带有 ruby​​ 1.9.3.p325 的 rails 3.2.13。我还包括了“jquery_datepicker”gem，以及“jquery-rails”和“jquery-ui-rails”

表单代码如下所示。

```
 <div class="field">
    <%= f.label :datum %><br />
    <%= f.text_field :datum , :id => "datepicker" %>
  </div> 
```

包含的javascript是：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require dataTables/jquery.dataTables
//= require select2
//= require_tree .

$ ->
  $("#practice_toolkeeper")
    .select2({
         allowClear: true,
         placeholder: 'Select an item'
    })
    .select2('val',$("#toolkeeper_value").val())    

$ ->
  $("#datepicker").datepicker() 
```

生成 HTML

```
<div class="field">
  <label for="practice_datum">Datum</label><br />
  <input id="datepicker" name="practice[datum]" size="30" type="text" />
</div> 
```

如果您选择输入字段，则不会发生任何事情

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T08:16:48.367

代替

```
$("datepicker").datepicker(); 
```

和

```
$("#datepicker").datepicker(); 
```

在选择器中丢失`#`。和元素`datepicker`一样`id`。您需要`#`在选择器中使用。

**更新**

```
jQuery($)->
 $("#datepicker").datepicker();
 ..... 
```

这应该有效。

**更新 2**

假设您在`sample.coffee`文件中有以下内容 -

```
jQuery ->
 $("#datepicker").datepicker(); 
```

您需要使用以下命令编译 abouve 文件 -

```
coffee -c sample.coffee 
```

这将生成`js`具有以下内容的文件 -

```
(function() {
  jQuery(function() {
    return $("#datepicker").datepicker();
  });

}).call(this); 
```

如果您对咖啡脚本不太熟悉，请访问[http://coffeescript.org/#installation](http://coffeescript.org/#installation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T08:17:16.230

您错过了`#`选择 ID 为 datepicker 的元素。它应该是

```
$("#datepicker").datepicker() 
```

# java - 如何在 Java Swing 中获取面板的所有组件？

> ID：15727661
> 
> 赞同：13
> 
> 时间：2013-03-31T08:15:03.930
> 
> 标签：java, arrays, swing, jpanel, jcomponent

如何在 Java Swing 中获取面板的所有组件？

有没有像`foreach`C# 这样的方法来处理 JPanel 的所有子组件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-31T08:16:31.797

您可以使用以下方法[`getComponents`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponents%28%29)：

```
Component[] components = jpanel.getComponents(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-28T15:36:47.193

如果您有多个 JPanel 并且想要获取所有组件名称，请尝试以下操作：

```
public void getAllComponetsNameInJPanels(JPanel... panels) {
    Component[] components;
    String componentName;
    for (JPanel panel : panels) {
        components = panel.getComponents();            
        for (Component compo : components) {
            componentName = compo.getClass().getName();
            System.out.println(compo.getClass().getName().substring(componentName.indexOf("swing.") + "swing.".length(), componentName.length()));
        }
        System.out.println("=====================");
    }
} 
```

# android - 是否有任何基于 Java 的 C/C++ 编译器？

> ID：15727663
> 
> 赞同：2
> 
> 时间：2013-03-31T08:15:09.770
> 
> 标签：android, c++, linux, compiler-construction, dalvik

我知道，如果它甚至存在，它比用本机代码编写并为具体拱形编译的编译器慢 N 倍。但无论如何。

主要目的是在android设备（arm/x86，基于linux的os，dalvik jvm）上编译一些小的c/c++源文件。源代码可以在用户安卓设备上创建，编译器也应该在用户设备上工作。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:14:47.457

有[C4droid](https://play.google.com/store/apps/details?id=com.n0n3m4.droidc&hl=fr)，它是 Android 上的 IDE 和 C++ 编译器。一些插件使您能够使用库，例如​​ SDL，或使用 gcc。

如果您想编译非常小的源代码（1 个文件，没有自定义库），您可以使用[codepad](http://codepad.org/)或[liveworkspace](http://liveworkspace.org/)在您的智能手机上进行编码。该代码不会编译为可执行文件，您只会看到输出（错误、标准输出、...）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T09:22:21.783

[如果您的目标是在 android 设备上编译 c/c++ 文件，如果您使用NDK](http://developer.android.com/tools/sdk/ndk/index.html)，您仍然可以使用用 C++ 编写的 C++ 编译器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T06:32:41.013

好吧，经过几周的研究，我可以说自然界没有这样的东西。对于 android，你应该使用原生编译器，但你会遇到很多兼容性问题，所以准备好应用补丁、捕获异常并深入研究数百兆字节的原生代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T15:39:51.120

我看到了几种在您的 Android 设备上获取编译器的方法：

# 安卓上的 Linux

*   [https://en.wikipedia.org/wiki/Complete_Linux_Installer](https://en.wikipedia.org/wiki/Complete_Linux_Installer)（此列表中唯一需要root的）
*   [http://sourceforge.net/projects/gentooandroid/files/](http://sourceforge.net/projects/gentooandroid/files/)

# 成熟的虚拟机

*   [安卓版 JPC](https://play.google.com/store/apps/details?id=uk.co.jads.android.jpc)
*   [Android 版 Limbo](https://code.google.com/p/limbo-android/)（基于 QEMU）

# 编译到汇编和汇编

## 从 C 源代码到汇编

*   [Google Code 上的 my-c-compiler](https://code.google.com/p/my-c-compiler/)（生成 at&t x86 程序集）

## 从汇编到本机代码

*   [https://code.google.com/p/dragonfire-dasm/](https://code.google.com/p/dragonfire-dasm/)

# 编译为JVM字节码并解释

## 从 C 源代码到 JVM 字节码

*   [从 C 源代码到 Java 字节码？](https://stackoverflow.com/questions/459822/from-c-source-to-java-bytecode)

## JVM 的 JVM 解释器

*   [https://github.com/lihaoyi/Metascala](https://github.com/lihaoyi/Metascala)
*   [https://en.wikipedia.org/wiki/Maxine_Virtual_Machine](https://en.wikipedia.org/wiki/Maxine_Virtual_Machine)
*   也许你可以使用主机JVM？

# image - 使用 actionscript 将图像添加到舞台

> ID：15727664
> 
> 赞同：0
> 
> 时间：2013-03-31T08:15:15.550
> 
> 标签：image, flash, class, actionscript, linkage

我是 adobe flash cs6 和 actionscript 的新手，在做应该很简单的任务时遇到了麻烦。我创建了一个新项目和文档类，如下所示：

```
package  {

    import flash.display.MovieClip;

    public class MyClass extends MovieClip {

        public function MyClass() {

        }
} 
```

现在我要做的就是在运行时以编程方式将图像添加到舞台上。

到目前为止，我将图像导入到名为 mytestimage 的库中，并将其转换为符号。mytestimage 符号链接到类 mytestimage，如下所示：

```
package  {

    import flash.display.Sprite;
    import flash.events.Event;

    public class mytestimage extends Sprite {

        public function mytestimage () {
            addEventListener(Event.ENTER_FRAME, enterFrame);
        }
        private function enterFrame(e:Event):void {

            }
        }

} 
```

然后我将我的文档类更新为以下内容：

```
package  {

    import flash.display.MovieClip;

    public class MyClass extends MovieClip {

        public function MyClass() {
            var myMovieClip = new mytestimage();
            addChild(myMovieClip);
        }
} 
```

当我调试项目时没有任何错误并且没有加载图像 - 我看到的只是白色阶段。有人可以帮我弄清楚我在这里做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:02:49.170

您的文档类的构造函数很可能永远不会运行。您的代码看起来没有任何问题，因此它可能是“其他东西”。

Flash 有一个令人讨厌的事情，它永远不会“告诉您何时找不到特定的文档类”。（即错误的路径/库链接到所需文件，它只是自动创建一个新文件，因为这是它认为你想要做的......）

开始调试此问题的最简单方法是在文档类的构造函数中进行跟踪，类似于`public function MyClass() { trace("ctor()") };`

这样您就可以确定它是否是一个实际的“图像问题”，或者它是否只是未能找到正确的类。

根据文件的物理位置，您可能必须在 flash actionscript 设置中的“源路径”内添加指向源文件夹的链接。（文件/发布设置）

也可能（听起来不像）您所说的“文档类”是一个库项目，并且链接存在于该库项目上。在这种情况下，剪辑需要放在舞台上才能运行。（但听起来这不是你所做的）

如果这不能解决您的问题，请随时与我聊天或共享文件，我会调查它。

使用新工具以新语言开始新项目总是很麻烦，祝你好运！:o)

# hibernate - 使用 Java EE 的登录系统

> ID：15727665
> 
> 赞同：1
> 
> 时间：2013-03-31T08:15:19.837
> 
> 标签：hibernate, jsf, jakarta-ee, glassfish, login-system

我正在尝试使用 Java EE（Hibernate、Glassfish、JSF）制作一个简单的登录系统。我完成了用户 ID 数据的处理，即用户可以输入用户名和密码，它会检查数据库并在正确时将其登录。但是，我想包括某些只有登录会员才能看到的页面。如果会员登录，我如何跟踪？以及如何获取该特定用户的信息？

例如：我登录并想更改我的密码，所以我转到包含我的用户详细信息的页面并输入新密码。我该如何管理这个服务器端？

我使用 servlet 吗？饼干？会议？我迷路了（一）

我希望我的问题很清楚，并且非常感谢一些帮助。提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:48:58.557

无需复制 Java EE 和 GlassFish 已经支持的功能。

查看 Java EE 教程，了解如何使用 JDBC 领域做到这一点：

*   [http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)
*   [http://java.dzone.com/articles/jdbc-realm-and-form-b​​ased](http://java.dzone.com/articles/jdbc-realm-and-form-based)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T15:12:00.973

在 Java EE 6 中，您可以使用 JASPIC api 创建和注册身份验证模块。有许多身份验证模块可供重用。

然后，您在 web.xml 中为用户必须登录并且需要一个或多个角色的 URL 模式配置约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:49:20.000

您应该将您的用户信息存储为`SessionAttribute`，并在其他页面上检查会话是否有用户。如果有，则页面加载正确，如果没有，您可以重定向到登录屏幕。

另一个问题（密码更改）：您可以使用表单为此创建一个页面。您向用户询问他/她的旧密码和两次新密码。然后在提交时检查旧密码（如登录时），检查新密码（如果您对此有任何标准。即：长度，字符类型），检查两个新密码是否相同。如果是这样，请更新您的数据库并使用新密码登录您的用户。

# vb.net - 如何在 X 秒/点击后停止计时器

> ID：15727666
> 
> 赞同：1
> 
> 时间：2013-03-31T08:15:26.547
> 
> 标签：vb.net, browser, refresh

我有一个应用程序，它会根据我选择的速度每秒自动为我点击 1 次按钮。但是，它超时了，所以我需要在这个页面上添加一个刷新。我需要`timer1`在多次点击后停止我的操作并获得一个`WebBrowser1.Refresh()`，然后在刷新完成后，`timer1`点击开始，然后重新完成该过程。我不知道如何开始，因为我以前从未停止过计时器，但我一直在阅读它，它看起来相对容易。这是我正在使用的脚本：

```
 Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If RadioButton1.Checked = True Then
        Timer1.Interval = 40
    ElseIf RadioButton2.Checked = True Then
        Timer1.Interval = 100
    Else
        Timer1.Interval = 500
    End If

    If ((WebBrowser1.IsBusy)) Then

    Else
        WebBrowser1.Document.GetElementById("NewGamertag").SetAttribute("value", txtTurbo.Text)

        Timer1.Start()

    End If

End Sub 
```

如您所见，一旦单击按钮一次`Timer1.Start()`又一次，并且在`Timer1.start()`'s 代码中，您可以看到单击一次的代码：

```
WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click") 
```

它可以工作，但我需要`Timer1`在多次点击/秒后停止我的浏览器并刷新网络浏览器。我不知道如何开始，如果有人能带领我走上正确的轨道，我将不胜感激。（对不起语法不好/句子跑，我是英语新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:27:57.250

您的代码有几个问题。首先，您似乎没有在任何地方使用`Timer_Tick`或`Timer_Elapsed`事件（我不知道您使用的是哪个 Timer；.NET Framework 中有多个计时器类），这是在间隔完成时将触发的 ACTUAL 事件。其次，定时器可以简单地通过设置它的`Enabled`属性来启用/禁用，你在任何地方都没有这样做。您还应该查看`Enabled`属性如何与`Interval`属性结合使用，以确保它的行为完全符合您的预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T14:06:56.403

最简单但不一定是“最干净”的方法是声明一个公共整数变量。

IE

```
Public Class Form1
'Public variables are decleared here
Dim number_of_ticks as integer = 0

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

End Sub 
```

在 Timer_Tick 事件中，您只需将 number_of_ticks 变量加 1。

```
Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    If Not number_of_ticks > 100 Then
'[EDIT:] I forgot to increase the number_of_ticks
    number_of_ticks += 1
        'put your code here
    Else
        'number_of_ticks has exceed the maximum amount of allowed ticks
        Timer1.Stop()
    End If
End Sub 
```

**[编辑：] number_of_ticks += 1 每次运行代码时都会增加一次变量。再次，我为我的错误道歉。**

要限制允许的刻度数量，只需增加/减少 number_of_ticks 变量。如果您的计时器间隔为 500 毫秒，则 Timer_Tick 事件将每秒引发两次，因此在一秒钟后 - number_of_ticks 将为 2。如果您希望计时器运行 10 秒，请将 number_of_ticks 设置为 20。

如果这没有帮助，请质疑我的回答。

祝你好运！

# playframework - 如何实现 Promise 对象？

> ID：15727669
> 
> 赞同：2
> 
> 时间：2013-03-31T08:16:22.567
> 
> 标签：playframework, playframework-2.0, akka

我正在尝试将现有应用程序移植到 Play 框架中。该应用程序使用一个库来执行 SMPP 传输，该库已经以异步方式发送消息的方式实现（在成功传输时调用侦听器对象的单独线程中）。我想知道如何使用相同的库并返回一个 Promise 对象，该对象在更新侦听器时将结果返回给 Play 的 Web 请求。

我看到的所有示例都说明了它是如何使用 play WS 库或 akka 完成的，它负责在单独的线程上完成工作。如果我已经有这样的实现，如上所述，我如何将它与 Play 集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:20:39.280

您的 SMPP 传输库为您提供了一个句柄，您可以在该句柄上注册完成侦听器，对吗？在这种情况下，您应该能够像这样创建一个桥：

```
val p = scala.concurrent.Promise[ResultType]()
val handle = smpp.doit() // or whatever the method is called
handle.onComplete(h => p.success(h.result)) // or p.complete if things can fail
return p.future 
```

然后生成的 Future 可用于完成 Async Play 操作。

# c++ - 英特尔 MIC 卸载——它如何与 STL 一起工作？

> ID：15727670
> 
> 赞同：2
> 
> 时间：2013-03-31T08:16:24.497
> 
> 标签：c++, stl, eigen, icc, intel-mic

我正在使用一个用 C++/OpenMP 代码实现的[系统](http://www.idiap.ch/~cdubout/code/ffld.tar.gz)，它到处使用 STL 和[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)的数据结构。从算法上讲，该代码似乎是使用新的 Intel MIC ( [Xeon Phi](http://software.intel.com/en-us/articles/intel-xeon-phi-coprocessor-developers-quick-start-guide) ) 卡进行加速的绝佳候选者。

代码中典型的并行循环如下所示：

```
#pragma omp parallel for private(i)
    for (i = 0; i < n; ++i) {
        computeIntensiveFunction(some_STL_or_eigen_container[i]); 
```

上面的伪代码以合理的性能运行，但最好将其中的一部分卸载到 Xeon Phi 卡上。这是我这样做的尝试：

```
#pragma offload target (mic)    // <---- NEW
#pragma omp parallel for private(i)
    for (i = 0; i < n; ++i) {
        computeIntensiveFunction(some_STL_or_eigen_container[i]); 
```

但是，英特尔 ICC/ICPC 编译器会吐出这样的错误：`error: function "computeIntensiveFunction" called in offload region must have been declared with compatible "target" attribute.`似乎这样的抱怨出现在涉及 STL 或[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)的函数和数据结构上。

* * *

关于如何解决这个问题的任何想法？

我是使用 Xeon Phi（恢复 CUDA 程序员）的新手，所以我不完全理解“可以卸载什么？”的界限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T17:04:53.010

你需要类似的东西：

```
void __attribute__((target(mic))) computeIntensiveFunction(std::vector<sometype> myvar); 
```

在您的源代码中定义。这定义了 MIC 方面的函数，以便可以从卸载区域调用它。

# jquery - 创建单元格的对角线边框

> ID：15727675
> 
> 赞同：10
> 
> 时间：2013-03-31T08:16:52.963
> 
> 标签：jquery, css, cell, css-tables, diagonal

我想知道是否甚至可以使用 css 或 jquery 创建一个带有对角线边框的表格，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/vrnaA.jpg)

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T08:45:31.927

如果你摆弄它足够长的时间，一切皆有可能，这是一个使用一些创意边框和大量 CSS 的示例：

```
.arrow_box:after, .arrow_box:before {
    top: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
} 
```

[**小提琴**](http://jsfiddle.net/QvEEB/1/)

另一个使用 CSS3 旋转：

```
-webkit-transform: rotate(26.5deg);
   -moz-transform: rotate(26.5deg);
    -ms-transform: rotate(26.5deg);
     -o-transform: rotate(26.5deg);
        transform: rotate(26.5deg); 
```

[**小提琴**](http://jsfiddle.net/BrcAq/2/)

或者您可以只使用图像作为表格的背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:57:48.730

正式的表格不能有对角线边框，但是通过一些 CSS 技巧，你可以让它看起来像这样，这里是代码..

```
.borderdraw {
position:fixed;
    border-style:solid;
    height:0;
    line-height:0;
    width:0;
    z-index:-1;

}

table td
    { 
        width:60px; 
            max-height:55px; 
        border:1px solid #000;
    }

.tag1{ z-index:9999;position:absolute;top:40px; }

.tag2 { z-index:9999;position:absolute;left:40px; }

.diag { position: relative; width: 50px; height: 50px; }
.outerdivslant { position: absolute; top: 0px; left: 0px; border-color: transparent transparent transparent rgb(64, 0, 0); border-width: 50px 0px 0px 60px;}
.innerdivslant {position: absolute; top: 1px; left: 0px; border-color: transparent transparent transparent #fff; border-width: 49px 0px 0px 59px;}                  
</style> 
```

* * *

```
 <table>
    <tr>
      <td> 
    <div class = "tag1">Tag1</div>
    <div class="tag2">Tag2</div>

        <div style="z-index:-1;">
           <div class="diag">
             <div class="outerdivslant borderdraw">
             </div>

           <div class = "innerdivslant borderdraw">
           </div>
         </div>
        </div>

      </td>
    </tr>
</table> 
```

这是输出。

![在此处输入图像描述](https://i.stack.imgur.com/0Zi5k.png)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:19:43.733

表格边框不能是对角线的，你可以尝试使用一个带有一个边框的元素（div）并旋转它（如果 css3 可以的话）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T04:03:36.103

这是表格中带有 css 中的边框和对角线的示例 [https://codepen.io/halimarm/pen/rNaPyGR?editors=1100](https://codepen.io/halimarm/pen/rNaPyGR?editors=1100)

```
table {
  width: 100%;
}

table td {
  position: relative;
  overflow: hidden;
  border: 1px solid #000;
}

.line {
  position: absolute;
  height: 40px;
  top: 40px;
  bottom: 0;
  margin: auto;
  left: -5px;
  width: 100%;
  border-top: 1px solid #000;
  -webkit-transform: rotate(14deg);
  -ms-transform: rotate(14deg);
  transform: rotate(14deg); 
}

.diagonal {
  width: 150px;
  height: 40px;
}
.diagonal span.lb {
  position: absolute;
  bottom: 2px;
  left: 2px;
}
.diagonal span.rt {
  position: absolute;
  top: 2px;
  right: 2px;
}
```

```
<table>
  <tr>
    <td>abc</td>
    <td>abc</td>
    <td class="diagonal">
      <span class="lb">Rata - Rata</span>
      <span class="rt">Total</span>
      <div class="line"></div>
    </td>
  </tr>
  <tr>
    <td>abc</td>
    <td>abc</td>
    <td>abc</td>
  </tr>
  <tr>
    <td>abc</td>
    <td>abc</td>
    <td>abc</td>
  </tr>
</table>
```

[![对角表格边框](https://i.stack.imgur.com/bapwN.png)](https://i.stack.imgur.com/bapwN.png)

# java - 在 Java 应用程序中读取外部属性文件

> ID：15727676
> 
> 赞同：4
> 
> 时间：2013-03-31T08:16:59.773
> 
> 标签：java, tomcat, properties

我想从 Web 应用程序外部加载一个属性文件。获取属性文件的代码如下所示。

```
 Properties p = new Properties();
 p.load(this.getClass().getClassLoader().getResourceAsStream("a.properties")); 
```

我正在使用 tomcat 服务器，我想将属性文件放在 tomcat 服务器中。我可以将它放在服务器中的哪个位置，以便在运行应用程序时在类路径中使用它？我不想更改上面的代码，因为我还必须运行相同的应用程序无关服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:26:54.700

我推荐第一个选项。将*a.properties*放在类路径中。然后加载：

```
Properties properties = new Properties();
properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("a.properties")); 
```

这样，您可以加载相对于类路径的“根”的属性。为此，建议使用 Thread.currentThread().getContextClassLoader() 返回的 ClassLoader。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T08:23:13.280

基本上有三种方式：剩下的部分你可以在 [Where to place 以及如何在基于 servlet 的应用程序中读取配置资源文件中看到？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application)

# android - 建议 SQLite 查询

> ID：15727682
> 
> 赞同：0
> 
> 时间：2013-03-31T08:17:34.110
> 
> 标签：android, sqlite

我想在 android 活动文本视图中显示我的表格的特定列。我的表名是 Class。有两列 1) 班级名称和 2) NoStudent。我试过这个：

```
select * from Class where column +ClassName+; 
```

& 很多其他格式，但不起作用。提供正确的查询格式和参考链接，我可以从中获得其他正确的格式。谢谢..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:22:07.500

尽量避免使用`SELECT * FROM`，因为这意味着您不再拥有可预测的结果集。如果您的架构发生更改并且您在数据阅读器中使用序号列引用，那么它们将会中断。

无论如何，就像这样：

```
SELECT "className", "noStudent" FROM "Class" WHERE "className" = 'Databases 101' 
```

请注意我使用`"`(双引号) 来转义列名和表名，这是 SQLite 的转义语法。不要将它与`'`用于分隔字符串的（单引号）混淆。

如果您在查询中添加更多术语，它将在一行中变长。SQL 忽略换行符，我更喜欢这样格式化查询：

```
SELECT
    "className", "noStudent"
FROM
     "Class"
WHERE
    "className" = 'Databases 101' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:24:27.393

用这个

```
SELECT classname, nostudent FROM Class WHERE classname = 'myclass' 
```

查看[w3schools 站点以了解 SQL 语法](http://www.w3schools.com/sql/sql_syntax.asp)。

# android - 在android中创建滑出式按钮？

> ID：15727683
> 
> 赞同：0
> 
> 时间：2013-03-31T08:17:41.340
> 
> 标签：android, button, slider

在我看到的一个应用程序中，底部有 5 个选项卡，当按下最后一个选项卡时，会在屏幕右上角从底部向上打开一个“垂直滑出绘图”（因为没有更好的词）。是否有针对此类操作的预构建视图。

或者有人可以建议如何实现这一点。 ![在此处输入图像描述](https://i.stack.imgur.com/p2PAG.png)

因为我没有屏幕截图，所以这里是一个简单的草图。按下选项卡 5 时 3 个按钮滑出。

# scala - 如何跨多个进程安排全局周期 Akka 作业？

> ID：15727685
> 
> 赞同：7
> 
> 时间：2013-03-31T08:18:16.553
> 
> 标签：scala, playframework, quartz-scheduler, akka, playframework-2.1

我在 Play Framework 中使用 Akka 而不是 Job，来安排代码每 X 秒运行一次。我有一种集群（在 Heroku 上运行，目前在 1 dyno 上，但偶尔可能会有一些并发实例）。

有没有一种简单的方法可以让“作业”在整个集群中每 N 秒全局运行一次？我知道 Quartz 支持进程外存储/同步机制，例如数据库 - 我可以在 Scala 中使用类似的东西吗？

这是在播放开始时运行的演员设置：

```
object Global extends GlobalSettings {

  override def onStart(app: Application) {
    val monitorActor = Akka.system.actorOf(Props[MonitorLoadJob], name = "monitorLoad")
    Akka.system.scheduler.schedule(0 seconds, 10 seconds, monitorActor, Tick)
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T19:06:45.973

退房[`ClusterSingletonManager`](http://doc.akka.io/docs/akka/2.1.1/contrib/cluster-singleton.html)。

> 对于某些用例，确保您在集群中的某处运行特定类型的特定参与者是很方便的，有时也是强制性的。
> 
> 一些例子：
> 
> *   对某些集群范围内的一致决策或跨集群系统的行动协调的单点责任

它需要运行 Akka Cluster，但它是为这种类型的场景而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:31:12.673

一种可能的方法是在每个节点上运行一个参与者，等待通知消息启动此作业，然后从调度程序将消息广播给这些参与者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:43:14.697

或者，您可以使用`worker`专用于您的工作的测功机，使用标准`main`方法使用 Akka 安排您的工作。

您可以查看[此链接](https://devcenter.heroku.com/articles/run-non-web-java-processes-on-heroku)（对于 Java，但您会了解 Scala）。

# mongodb - MongoDB 中的临时集合

> ID：15727687
> 
> 赞同：1
> 
> 时间：2013-03-31T08:18:37.653
> 
> 标签：mongodb, mapreduce, aggregation-framework, nosql

我无法从 mongodb MapReduce 文档（[http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)）中理解这一段 - 临时集合（优化？）有什么好处（商业案例、好处等）？

> 临时收藏
> 
> map-reduce 操作在处理期间使用临时集合。完成时，map-reduce 操作重命名临时集合。因此，您可以使用相同的目标集合名称定期执行 map-reduce 操作，而不会影响中间状态。定期生成统计输出集合时使用此模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:30:41.507

假设您是 { a : 1 } 形式的文档集合，并且您定期需要 a 的平均值。还可以假设您想运行一个 map-reduce 作业，该作业将每个文档的“a”字段增加一个。然而，当这个 map reduce 正在运行时，也有可能获得 a 平均值的作业正在运行。在这种情况下，如果您没有临时集合，则平均值可能会因 map reduce 作业尚未完成而被抛出，从而使集合处于中间状态。

为了避免这种情况，map reduce 作业可以在临时集合中工作，直到完成。完成后，它将临时集合重命名为目标名称，有效地换入新集合。这样，当您取“a”的平均值时，您会得到一个不受 map-reduce 作业部分影响的值。

如果您希望我澄清一下，请告诉我。

# objective-c - 在 Mac OS X 上以其他用户身份启动程序

> ID：15727688
> 
> 赞同：1
> 
> 时间：2013-03-31T08:18:52.880
> 
> 标签：objective-c, macos, runas, usersession

在具有多个用户的 Mac OS X 中，是否有任何 API 或一段代码可以在 Objective C 中以另一个用户身份运行进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:25:17.497

您需要使用**AuthorizationExecuteWithPrivileges**，看看例如[http://www.michaelvobrien.com/blog/2009/07/authorizationexecutewithprivileges-a-simple-example/](http://www.michaelvobrien.com/blog/2009/07/authorizationexecutewithprivileges-a-simple-example/)

```
// Create authorization reference
AuthorizationRef authorizationRef;
OSStatus status;
status = AuthorizationCreate(NULL, kAuthorizationEmptyEnvironment,
                             kAuthorizationFlagDefaults, &authorizationRef);

// Run the tool using the authorization reference
char *tool = "/sbin/dmesg";
char *args[] = {NULL};
FILE *pipe = NULL;
status = AuthorizationExecuteWithPrivileges(authorizationRef, tool,
                                            kAuthorizationFlagDefaults, args, &pipe); 
```

# cuda - CUDA 重叠数据不起作用

> ID：15727692
> 
> 赞同：0
> 
> 时间：2013-03-31T08:19:46.173
> 
> 标签：cuda, overlapping, cuda-streams

使用 Steam 将数据传输与内核执行重叠在我的系统中不起作用。

您好，我想在 CUDA 中使用重叠计算和数据传输，但我不能。NVIDIA 帮助文档说，如果您使用流，则可以重叠计算和数据传输。但我的系统没有工作请帮助我。

我的系统在下面

*   操作系统：Window 7 64bit
*   CUDA：版本 5.0.7
*   开发套件：Visual Studion 2008
*   显卡：GTX 680

我得到一个配置文件视图是这样的![在此处输入图像描述](https://i.stack.imgur.com/B0U8c.jpg)

我没有重叠，代码如下：

```
 -new pinned memory 
        cudaHostAlloc((void **)&apBuffer, sizeof(BYTE)*lBufferSize,cudaHostAllocDefault);
    -call function

   //Input Data
    for(int i=0;i<m_n3DChannelCnt*m_nBucket;++i)
    {
        cudaErrorChk_Return(cudaMemcpyAsync(d_ppbImg[i],ppbImg[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyHostToDevice,m_pStream[i/m_nBucket]));
    }
   //Call Function
    for(int i=0;i<m_n3DChannelCnt ;++i)
    {KernelGetVis8uObjPhsPhs<<<nBlockCnt,nThreadCnt,0,m_pStream[i]>>>(d_ppbVis[i],d_ppbAvg[i],d_ppfPhs[i],d_ppfObj[i],d_ppbAmp[i]
                                            ,nTotalSize,d_ppstRefData[i],d_ppbImg[i*m_nBucket],d_ppbImg[i*m_nBucket+1],d_ppbImg[i*m_nBucket+2],d_ppbImg[i*m_nBucket+3]
                                            ,fSclFloatVis2ByteVis);

    }
   //OutputData
    for(int i=0;i<m_n3DChannelCnt;++i)
    {
        if(ppbVis && ppbVis[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbVis[i],d_ppbVis[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
        if(ppbAvg && ppbAvg[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbAvg[i],d_ppbAvg[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
        if(ppfPhs && ppfPhs[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppfPhs[i],d_ppfPhs[i],sizeof(float)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
        if(ppfObj && ppfObj[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppfObj[i],d_ppfObj[i],sizeof(float)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
        if(ppbAmp && ppbAmp[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbAmp[i],d_ppbAmp[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));

    } 
```

请让我知道为什么分析器没有显示内核执行和数据传输的重叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:17:54.337

您需要以`cudaMemcpyAsync()`正确的顺序调用和内核启动。在计算能力 3.5 之前，只有一个队列用于调用设备端操作，并且它们不会重新排序。将“调用函数”和“输出数据”阶段组合成类似

```
//Call Function and OutputData
for(int i=0;i<m_n3DChannelCnt ;++i)
{KernelGetVis8uObjPhsPhs<<<nBlockCnt,nThreadCnt,0,m_pStream[i]>>>(d_ppbVis[i],d_ppbAvg[i],d_ppfPhs[i],d_ppfObj[i],d_ppbAmp[i]
                                        ,nTotalSize,d_ppstRefData[i],d_ppbImg[i*m_nBucket],d_ppbImg[i*m_nBucket+1],d_ppbImg[i*m_nBucket+2],d_ppbImg[i*m_nBucket+3]
                                        ,fSclFloatVis2ByteVis);

    if(ppbVis && ppbVis[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbVis[i],d_ppbVis[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
    if(ppbAvg && ppbAvg[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbAvg[i],d_ppbAvg[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
    if(ppfPhs && ppfPhs[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppfPhs[i],d_ppfPhs[i],sizeof(float)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
    if(ppfObj && ppfObj[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppfObj[i],d_ppfObj[i],sizeof(float)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));
    if(ppbAmp && ppbAmp[i]) cudaErrorChk_Return(cudaMemcpyAsync(ppbAmp[i],d_ppbAmp[i],sizeof(BYTE)*m_nImgWidth*m_nImgHeight,cudaMemcpyDeviceToHost,m_pStream[i]));

} 
```

但是，您只能将内核启动与第一个或最后一个内存副本重叠，因为您`cudaMemcpyAsync()`在流中有五个调用，它们再次不会重新排序。在内存中连续分配所有五个数组，以便您可以使用单个`cudaMemcpyAsync()`.

总的来说，我注意到数据传输比内核运行花费的时间要长得多，因此在您的情况下，重叠计算和复制只会提供很小的加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T02:16:14.833

您可能想检查您的代码在 LINUX 中是否按预期工作（即重叠）。我刚刚遇到了同样的问题，发现 WINDOWS 可能有一些问题（在 NVIDIA 的驱动程序或 Windows 本身中），这会干扰 CUDA 流中的重叠。

您可以尝试检查 SDK 中的“simpleStreams”示例是否适用于您的机器中的重叠。就我而言，在 Windows 上运行的“simpleStream”根本没有重叠，但它在 Linux 中运行完美。具体来说，我在 Fermi GTX570 上使用 CUDA 5.0 + VS2010。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-03-18T08:28:46.703

> **TL;DR：**这个问题是由 Nsight Monitor 中的 WDDM TDR 延迟选项引起的！当设置为 false 时，会出现问题。相反，如果您将 TDR 延迟值设置为一个非常高的数字，并将“启用”选项设置为 true，那么问题就会消失。

*阅读下面的其他（旧）步骤，直到我找到上面的解决方案，以及其他一些可能的原因。*

我最近才能够主要解决这个问题！我认为它是特定于 windows 和*aero*的。请尝试这些步骤并发布您的结果以帮助他人！我在 GTX 650 和 GT 640 上试过。

> **在您执行任何操作之前，请考虑[同时使用板载 gpu（作为显示器）和离散 gpu（用于计算）](https://stackoverflow.com/a/28895372/4382376)，因为已验证适用于 windows 的 nvidia 驱动程序存在问题！当您使用板载 gpu 时，所说的驱动程序没有完全加载，因此避免了很多错误。此外，在工作时保持系统响应能力！**

1.  确保您的并发问题与旧驱动程序（包括 BIOS 版本）、错误代码、无法使用的设备等其他问题无关。
2.  转到计算机>属性
3.  选择左侧的高级系统设置
4.  转到高级选项卡
5.  在性能点击设置
6.  在“视觉效果”选项卡中，选择“调整以获得最佳性能”项目符号。

这将禁用航空和几乎所有的视觉效果。如果此配置有效，您可以尝试逐一启用视觉效果框，直到找到导致问题的精确框！

> 或者，您可以：

1.  右键桌面，选择个性化
2.  从没有航空的基本主题中选择一个主题。

这也可以像上面那样工作，但启用了更多的视觉选项。对于我的两台设备，此设置也适用，所以我保留了它。

> 请，当您尝试这些解决方案时，请回到这里并发布您的发现！

~~对我来说，它***解决了大多数情况下的问题（我制作的平铺 dgemm）***，但请注意，**我仍然无法正确运行“simpleStreams”并实现并发......**~~

> **更新：**问题已**通过新的 Windows 安装完全解决**！之前的步骤改善了某些情况下的行为，但全新安装解决了所有问题！

我会尝试找到一种不太激进的方法来解决这个问题，也许只恢复注册表就足够了。

# php - PHP YII 框架按计数搜索

> ID：15727696
> 
> 赞同：0
> 
> 时间：2013-03-31T08:20:44.807
> 
> 标签：php, yii

我有两张桌子叫，`product`和`productComment`

产品表模型

```
productID   userID    productName 
```

产品评论表模型

```
userID    productID    Comment 
```

我有两个名为的虚拟字段`comment1`和`comment2`

当用户将此字段填写`comment1`为 2 时，`comment2`例如填写为 5。我想显示从 2 到 5 匹配的产品评论数。我该怎么做？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:29:38.563

您需要添加`group`和`having`到您的查询条件。您没有显示您的关系定义，因此根据您的列/关系名称，您需要一些类似的东西

```
$criteria->group = 't.productID';
$criteria->having = 'COUNT(comment.commentID) > '.((int)$this->comment1).
    ' AND COUNT(comment.commentID) < '.((int)$this->comment2); 
```

# java - Android：包含文件的空资产文件夹

> ID：15727701
> 
> 赞同：0
> 
> 时间：2013-03-31T08:21:49.843
> 
> 标签：java, android, nullpointerexception

我已经在这个网站上搜索了很长一段时间，现在试图找到这个问题的答案，但我就是无法得到它。

我想要得到的是资产文件夹中的文件列表。这是因为我希望有一种智能的方式来加载这些文件并在不同的屏幕上使用它们，而不必为文件夹中的每个文件编写单独的活动。这是我目前正在使用的代码。

```
File file = new File("file:///android_asset/Peacefulpack.txt");
Log.e("Test", file.getName());

File folder = new File("file:///android_asset");
for(int i = 0; i < folder.listFiles().length; i++)
{
    Log.e("Test", folder.listFiles()[i].getName());
} 
```

带有文件的代码的顶部工作得很好，但带有文件夹的代码却不行。奇怪的是，folder.listFiles() 返回 null，但只有在目录中没有文件或子文件夹时才应该这样做（至少据我所知）。但是，此文件夹中有文件，因为我正在访问其中的一个。

为什么这给了我一个空指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:30:16.553

试试这个：

```
String folder = "/";
AssetManager am = getResources().getAssets();
String fileList[] = am.list(folder);
for(int i = 0; i < fileList.length; i++)
{
    Log.e("Test", fileList[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:31:39.887

我一直在写你想做的事

```
File folder = new File("file:///android_asset");
for(int i = 0; i < folder.listFiles().length; i++)
{
    Log.e("Test", folder.listFiles()[i].getName());
} 
```

使用[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)。

例如

```
AssetManager mgr = App.getContext().getAssetManager();
String[] listing = mgr.list("")
for(int i=0; i<listing.length; i++)
{
    Log.e("Test", listing[i]);
} 
```

# c - 用winapi在C中为shell实现管道

> ID：15727704
> 
> 赞同：0
> 
> 时间：2013-03-31T08:22:00.010
> 
> 标签：c, multithreading, winapi, process, pipe

我在 C 中为我正在编写的 shell 实现一个管道，该管道应该能够支持像 ls | 这样的东西。grep | grep | grep （换句话说，它应该是递归的）。

Shell 使用 winapi 在 cygwin 上运行

我为此找到了两种方法：使用进程或线程。

这是我当前的管道功能：

```
static void parcmd (void *arg){
    cmddata cdata = *(cmddata*) arg;
    parse_command(cdata.c, cdata.level, cdata.father, cdata.h);
}

static bool do_on_pipe(command_t *cmd1, command_t *cmd2, int level, command_t *father)
{
    bool bRes;
    SECURITY_ATTRIBUTES sa;
    HANDLE hRead, hWrite;
    DWORD dwRes1, dwRes2;
    handledata hPipeIn, hPipeOut;
    cmddata cmd1_data, cmd2_data;
    HANDLE thread1, thread2;

    ZeroMemory(&sa, sizeof(sa));
    sa.bInheritHandle = TRUE;
    bRes = CreatePipe(&hRead, &hWrite, &sa, 0);

    //printf("\n\ndo_on_pipe debug write =  %d  read = %d\n", hWrite, hRead);

    hPipeIn.pipeIn = INVALID_HANDLE_VALUE;
    hPipeIn.pipeOut = hWrite;

    cmd1_data.c = cmd1;
    cmd1_data.level = level + 1;
    cmd1_data.father = father;
    cmd1_data.h = &hPipeIn;

    thread1 = (HANDLE) _beginthreadex(NULL, 0, parcmd, &cmd1_data, 0, NULL); 
    //

    hPipeOut.pipeIn = hRead;
    hPipeOut.pipeOut = INVALID_HANDLE_VALUE;

    cmd2_data.c = cmd2;
    cmd2_data.level = level + 1;
    cmd2_data.father = father;
    cmd2_data.h = &hPipeOut;

    thread2 = (HANDLE) _beginthreadex(NULL, 0, parcmd, &cmd2_data, 0, NULL); 
    //

    //DIE(dwRes1 == WAIT_FAILED, "WaitForSingleObject - thd1");

    dwRes1 = WaitForSingleObject(thread1, INFINITE);
    dwRes2 = WaitForSingleObject(thread2, INFINITE);
    //DIE(dwRes2 == WAIT_FAILED, "WaitForSingleObject - thd2");

    CloseHandle(hWrite);
    CloseHandle(hRead); 
    return 0; 
} 
```

我的问题是，在这种当前形式下，第二个线程，即在 (cmd1 | cmd2) 中执行第二个命令的线程并没有停止，基本上，我没有得到我的提示。

如果我移动 **dwRes1 = WaitForSingleObject(thread1, INFINITE);** 在创建第二个线程之前，我能够成功地执行类似于 (cmd1 | cmd2) 的管道命令，但是，在 cmd1 | 命令2 | cmd3, cmd2 打印到标准输出，而 cmd3 永远不会停止。

这是简单的命令函数（它从解析器获取输入并执行它）：

```
bool parse_simple(simple_command_t *s, int level, command_t *father, void *h)
{
    /* TODO sanity checks */

        STARTUPINFO si;
        PROCESS_INFORMATION pi;
        DWORD dwRes;
        BOOL bRes;
        HANDLE inHandle = INVALID_HANDLE_VALUE;
        HANDLE outHandle = INVALID_HANDLE_VALUE;
        HANDLE errHandle = INVALID_HANDLE_VALUE;
        SECURITY_ATTRIBUTES sa;
        handledata *hd;

        ZeroMemory(&si, sizeof(si));
        si.cb = sizeof(si);
        ZeroMemory(&pi, sizeof(pi));
        ZeroMemory(&sa, sizeof(sa));
        sa.bInheritHandle = TRUE;

    if (s->in != NULL) {
        inHandle = getInputHandle(get_word(s->in), sa);
        }

        if (s->out != NULL && s->err != NULL 
            && lstrcmp(get_word(s->out), get_word(s->err)) == 0) {
                outHandle = getOutErrHandle(get_word(s->out), sa, IO_REGULAR);
                errHandle = outHandle;

        } else {
        if (s->out != NULL) {
            if(s->io_flags == IO_OUT_APPEND) {

            outHandle = getOutErrHandle(get_word(s->out), sa, IO_OUT_APPEND);

            } else {

            outHandle = getOutErrHandle(get_word(s->out), sa, IO_REGULAR);

            }
        }
        if(s->err != NULL) {
            if(s->io_flags == IO_ERR_APPEND) {
            errHandle = getOutErrHandle(get_word(s->err), sa, IO_ERR_APPEND);
            } else {
            errHandle = getOutErrHandle(get_word(s->err), sa, IO_REGULAR);
            }
        }
    }
        if(h != NULL) {
        //printf("we got unnull h\n");
        fflush(stdout);
        hd = (handledata *) h;

        if (hd->pipeIn != INVALID_HANDLE_VALUE) {
            inHandle = hd->pipeIn;
        }

        if(hd->pipeOut != INVALID_HANDLE_VALUE) {
            outHandle = hd->pipeOut;
        }

        //printf("\n\nhandle debug cmd = %s write =  %d  read = %d\n",get_argv(s), hd->pipeOut, hd->pipeIn);
        fflush(stdout);

        }

        RedirectAllHandles(&si, inHandle, outHandle, errHandle);
        //printf("\n\nhandles after redirect for cmd = %s write =  %d  read = %d err = %d\n",get_argv(s), outHandle, inHandle, errHandle);
        fflush(stdout);

        if (lstrcmp(get_word(s->verb), "exit") == 0 || 
            lstrcmp(get_word(s->verb), "quit") == 0 ||
            lstrcmp(get_word(s->verb), "cd") == 0)
        {
            //internal command
            if (lstrcmp(get_word(s->verb), "exit") == 0 || 
            lstrcmp(get_word(s->verb), "quit") == 0) {
                shell_exit();
            } else if (lstrcmp(get_word(s->verb), "cd") == 0) {
            return shell_cd(s->params);
            }

        } else 
        if (strchr(get_word(s->verb), '=') != NULL) {
         // env val
        } else {

        bRes =  CreateProcess( 
        NULL,           /* No module name (use command line) */
        get_argv(s),        /* Command line */
        NULL,           /* Process handle not inheritable */
        NULL,           /* Thread handle not inheritable */
        TRUE,          /* Set handle inheritance to FALSE */
        0,              /* No creation flags */
        NULL,           /* Use parent's environment block */
        NULL,           /* Use parent's starting directory */ 
        &si,            /* Pointer to STARTUPINFO structure */
        &pi             /* Pointer to PROCESS_INFORMATION structure */
    ); 

    if (!bRes)
    {
        printf("Execution failed for '%s'\n", get_argv(s));
        return false;
    }
    //printf("cmd %s waiting for process\n", get_argv(s));
    dwRes = WaitForSingleObject(pi.hProcess, INFINITE);
    //todo add die
    //printf("cmd %s process done\n", get_argv(s));
    bRes = GetExitCodeProcess(pi.hProcess, &dwRes);
    //todo add die
    //printf("cmd %s got to handles\n", get_argv(s));
    CloseHandle(inHandle);
    CloseHandle(outHandle);
    CloseHandle(errHandle);
    //printf("cmd %s got to closed handles\n", get_argv(s));

    return dwRes;

    }

    return 0; /* TODO replace with actual exit status */
} 
```

以及根据情况决定调用什么函数的函数：

```
int parse_command(command_t *c, int level, command_t *father, void *h)
{
    /* TODO sanity checks */
    int status;
    if (c->op == OP_NONE) {
        /* TODO execute a simple command */
        return parse_simple(c->scmd, level, c, h);
        return 0; /* TODO replace with actual exit code of command */
    }

    switch (c->op) {
    case OP_SEQUENTIAL:
        /* TODO execute the commands one after the other */
            parse_command(c->cmd1, level + 1, c, h);
            return parse_command(c->cmd2, level + 1, c, h);
        break;

    case OP_PARALLEL:
        /* TODO execute the commands simultaneously */
        return do_in_parallel(c->cmd1, c->cmd2, level + 1, c);
        break;

    case OP_CONDITIONAL_NZERO:
        /* TODO execute the second command only if the first one
         * returns non zero */
        status = parse_command(c->cmd1, level + 1, c, h);
        if (!status)
            return status;
        return parse_command(c->cmd2, level + 1, c, h);

        break;

    case OP_CONDITIONAL_ZERO:
        status = parse_command(c->cmd1, level + 1, c, h);
        if (status)
            return status;
        return parse_command(c->cmd2, level + 1, c, h);
        /* TODO execute the second command only if the first one
         * returns zero */
        break;

    case OP_PIPE:
            do_on_pipe(c->cmd1, c->cmd2,level, c);
        /* TODO redirect the output of the first command to the
         * input of the second */
        break;

    default:
        return SHELL_EXIT;
    }

    return 0; /* TODO replace with actual exit code of command */
} 
```

我知道这是一个庞大的代码库，不太可能得到任何响应，但我已经连续两到三天解决这个问题，我根本看不到解决方案，我怎样才能实现像 (cmd1 | cmd2 ... | cmdN) 使用此代码？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:53:47.483

创建一个函数

```
Execute(c, stdin, stdout, stderr, wait) 
```

如果等待为真，则执行 c 并等待它完成，否则执行 c 并返回一个可以等待完成的句柄

在伪代码中，实现类似于：

```
if c is an external command:
    launch process
    if (wait)
        wait for it to complete
    else
        return process handle

In all other cases:

if (!wait) create thread and return thread handle

Then, on the new thread (if created) or the existing thread:

if c is an internal command:
    Call the internal code for the command

if c is `a | b`:
    Create pipe
    waita = Execute(a, stdin, pipein, stderr, false)
    Execute(b, pipeout, stdout, stderr, true)
    Wait on waita

if c is `a & b`:
    Execute(a, stdin, stdout, stderr, true)
    Execute(b, stdin, stdout, stderr, true) 
```

请注意，使用这种设计，您需要在尝试执行任何操作之前完成解析。

# php - PHP - 从数据库返回结果并将值传递给另一个函数

> ID：15727715
> 
> 赞同：0
> 
> 时间：2013-03-31T08:24:17.367
> 
> 标签：php, pdo

我有一个名为 TariffFareController 的类，我从数据库中获得了正确的票价，如下所示：-

```
class TariffFareController {

public static function getTourFare($fieldTour) {

       $pdo = new SQL();
       $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

       try {

           $query =   "SELECT Fare FROM tbltours
                       WHERE TourName = '$fieldTour'";

           $stmt = $dbh->prepare($query);

           $stmt->execute();

           $result = $stmt->fetchColumn();

           $stmt->closeCursor();

           return $result;

           $dbh = null;

       }

       catch (PDOException $pe) {
           die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
       }

}

} 
```

然后我希望能够在我的私人 get fare 函数中检查结果：-

```
private static function getFare($int_terminate) {

    // $tour_fare = (the result from getTourFare)

        if ($tour_fare != null) {

            // do something

        }

        else {

        // do something else

        }

    } 
```

我将如何从 getTourFare 获取 $result 并在私有 getFare 函数中使用它？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T08:30:49.670

如果两个函数在同一个类中，只需执行

```
$tour_fare = self::getTourFare(); 
```

否则你可以从课堂外调用它

```
$tour_fare = TariffFareController::getTourFare(); 
```

请注意，在`getTourFare()`函数中，该行将`$dbh = null;`永远**不会**被执行，因为您在执行**之前**从函数返回。我还不得不说，我认为那行是毫无用处的，因为`$dbh`变量无论如何都会超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:32:16.287

你可以做一些这样的事情。

通过 getFare 调用 getTourFare，如果返回数据，do 可以处理数据，而不是返回 false 你做任何事情。

```
class TariffFareController {

private static function getFare() {
    if (self::getTourFare("any_field")) {
        /* Data success */
    } else {
        /* No data */
    }
}
public static function getTourFare($fieldTour) {

   $pdo = new SQL();
   $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

   try {

       $query =   "SELECT Fare FROM tbltours
                   WHERE TourName = '$fieldTour'";

       $stmt = $dbh->prepare($query);

       if (!$stmt->execute()) return false;

       if ($stmt->rowCount() > 0) {
           $result = $stmt->fetchColumn();

           $stmt->closeCursor();

           return $result;
       } else {
           return false;
       }

       $dbh = null;

   }

   catch (PDOException $pe) {
       die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
   }

}

} 
```

# javascript - 如何将参数传递给模块模式

> ID：15727720
> 
> 赞同：1
> 
> 时间：2013-03-31T08:24:42.713
> 
> 标签：javascript

我想知道如何将参数传递给模块

例如，我想在调用模块时为 counter 传递一个值，smt like

```
testModule.resetCounter(20); 
```

[（来自http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript](http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)的代码示例）

```
var testModule = (function () {

  var counter = 0;

  return {

    incrementCounter: function () {
      return counter++;
    },

    resetCounter: function () {
      console.log( "counter value prior to reset: " + counter );
      counter = 0;
    }
  };

})();

// Usage:

// Increment our counter
testModule.incrementCounter();

// Check the counter value and reset
// Outputs: 1
testModule.resetCounter(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:26:31.197

只需向您的`resetCounter`函数添加一个参数：

```
resetCounter: function(count) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:29:45.150

试试这个：

```
resetCounter: function (v) {
  console.log( "counter value prior to reset: " + counter );
  counter = (v && (typeof v === "number"))? v: 0;
  console.log( "counter value after reset: " + counter );
} 
```

# android - 如何将 Excel 结果（值）放入 Eclipse Android 活动

> ID：15727722
> 
> 赞同：0
> 
> 时间：2013-03-31T08:24:57.207
> 
> 标签：android, eclipse, excel, android-layout

我是本科生，几乎没有 Java 知识基础。我一直在帮助我的朋友设计一个应用程序来通过无线显示他的结果。以前，他有一个大约 100 行的参数和 id 编号列表，我使用 1 行 1 行键入

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_height="wrap_content"
    android:layout_width="match_parent">
    <TextView
        android:text="ABG_0"
        android:id="@+id/textView111"
        android:textStyle="bold"></TextView>
    <TextView
        android:id="@+id/TextView211"
        android:text="2049"
        android:textStyle="bold"
        android:typeface="serif"></TextView>
    <TextView
        android:id="@+id/TextView311"
        android:text="333"
        android:textStyle="bold"
        android:typeface="serif"></TextView>
</TableRow> 
```

最近，他将他的参数列表更新为大约 350 行，那么有没有办法将这些参数和 ids（保存在一个 excel 文件中）放入 eclipse 的 android 活动中，以便将参数存储在本地和应用程序内部.（显示在活动 xml 上）

我一直在寻找将excel结果放入android eclipse表中的方法，但几乎没有找到任何可行的方法。如果你这样做，请给任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:00:21.410

我建议您不要将其直接放入您的 XML 视图文件中，您应该：

1.  将您的值存储在 .csv 文件中，您可以将其放入应用程序的 assets 目录中，
2.  读取您的 .csv 文件（[CSV 文件导入/读取 - Android](https://stackoverflow.com/questions/6860439/csv-file-import-reading-android)）
3.  使用 listView 显示您的值（[http://developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)）。

如果您需要更多解释，请随时询问！

# complexity-theory - 为什么是日志（n）！不是零吗？

> ID：15727726
> 
> 赞同：0
> 
> 时间：2013-03-31T08:25:20.007
> 
> 标签：complexity-theory, big-o

我将证明 log(n)! 增长速度超过 log(n!)

我想知道为什么 log(n)! 对于 n∈N 不为零。

因为我认为 log(1) 为零，所以乘以结果后的所有后续数字都将变为零。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:28:54.790

`log(n!)`不为零，因为：

```
log(m * n) == log(m) + log(n)
log(2!) = log(2 * 1) = log(2) + log(1) = log(2) + 0 
```

对`log(n)!`你而言可以忽略的`log(1)`部分。以一棵二叉搜索树为例，它有一个节点，它的根。使用二叉搜索树搜索值是`log(n)`其中 n 是节点数。因此，根据您所做的计算，只有一个根，搜索应该为零，但它仍然是一，因为您必须检查根值。从这个意义上说，您可以假设`log(1) == 1`避免混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:31:17.240

您不应该计算`n`等于某个常数的表达式。为了证明函数`f`比函数增长得快`g`，你需要证明对于`n`无穷大， 的值`f`将大于 的值`g`。

# java - mysql jdbc中自动生成的密钥

> ID：15727731
> 
> 赞同：1
> 
> 时间：2013-03-31T08:25:46.107
> 
> 标签：java, mysql

我没有从 mysql 获取自动生成的密钥

```
String query="insert into course(subject,board,standard,course_code)values(?,?,?,?)";
            st1 = con.prepareStatement(query,Statement.RETURN_GENERATED_KEYS);
            st1.setString(1, sub);
            st1.setString(2, board);
            st1.setString(3, std);
            st1.setString(4, course);

            rs1 = st1.getGeneratedKeys();
            if (rs1.next()){
                cid=rs1.getInt(1);
            }
            System.out.println("2>>>>>>>>" + cid+" "+rs1); 
```

输出：

```
2>>>>>>>>0 com.mysql.jdbc.JDBC4ResultSet@1b04d3d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:28:24.283

写`resultset.executeQuery`然后打电话`getGeneratedKey`

# c++ - 代码不使用时间戳功能从头开始显示输出

> ID：15727738
> 
> 赞同：0
> 
> 时间：2013-03-31T08:26:56.000
> 
> 标签：c++

我使用以下代码使用 Dev C++ 5.4.1 读取多个 .dat 文件，目的是找到读取时间。但是，我试图显示这些文件的内容，问题是显示数据（文本数据的记录）不是从头开始的，例如，如果文件（如果一个文件）包含它显示的 60 条记录最近 20 条记录。现在，如果有多个文件，输出可能会跳过第一个文件或前两个文件并打印其余文件。我认为应该用 Dev C++ 修改一些东西，否则我的时间戳功能不正确。值得注意的是，当我逐行调试时，它工作得很好，并且从头开始显示！

```
#include <Windows.h>
#include <ctime>
#include <stdint.h>
#include <iostream>
using std::cout;
using std::endl;
#include <fstream>
using std::ifstream;

#include <cstring>

/* Returns the amount of milliseconds elapsed since the UNIX epoch. Works on both
 * windows and linux. */

uint64_t GetTimeMs64()
{

 FILETIME ft;
 LARGE_INTEGER li;

 /* Get the amount of 100 nano seconds intervals elapsed since January 1, 1601 (UTC) and copy it
  * to a LARGE_INTEGER structure. */
 GetSystemTimeAsFileTime(&ft);
 li.LowPart = ft.dwLowDateTime;
 li.HighPart = ft.dwHighDateTime;

 uint64_t ret;
 ret = li.QuadPart;
 ret -= 116444736000000000LL; /* Convert from file time to UNIX epoch time. */
 ret /= 10000; /* From 100 nano seconds (10^-7) to 1 millisecond (10^-3) intervals */

 return ret;

}

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = "|";

int main()
{
  // create a file-reading object
  uint64_t a = GetTimeMs64();
  cout << a << endl;
  HANDLE h;
WIN32_FIND_DATA find_data;
h = FindFirstFile( "*.dat", & find_data );
if( h == INVALID_HANDLE_VALUE ) {
    cout<<"error"<<endl;

}
do {
    char * s = find_data.cFileName;

    ifstream fin;
  fin.open(s); // open a file
  if (!fin.good()) 
    return 1; // exit if file not found

  // read each line of the file
  while (!fin.eof())
  {
    // read an entire line into memory
    char buf[MAX_CHARS_PER_LINE];
    fin.getline(buf, MAX_CHARS_PER_LINE);

    // parse the line into blank-delimited tokens
    int n = 0; // a for-loop index

    // array to store memory addresses of the tokens in buf
    const char* token[MAX_TOKENS_PER_LINE] = {}; // initialize to 0

    // parse the line
    token[0] = strtok(buf, DELIMITER); // first token
    if (token[0]) // zero if line is blank
    {
      for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
      {
    token[n] = strtok(0, DELIMITER); // subsequent tokens
        if (!token[n]) break; // no more tokens
  }
}

    // process (print) the tokens
    for (int i = 0; i < n; i++) // n = #of tokens
      cout << "Token[" << i << "] = " << token[i] << endl;
    cout << endl;
  }
            // Your code here
} while( FindNextFile( h, & find_data ) );
FindClose( h );

  uint64_t b = GetTimeMs64();
  cout << a << endl;
  cout << b << endl;
  uint64_t c = b - a;
  cout << c << endl;

  system("pause");
} 
```

# css - IE6：绝对定位元素的宽度：100% 仅拉伸到未定位的父级宽度

> ID：15727740
> 
> 赞同：1
> 
> 时间：2013-03-31T08:27:22.727
> 
> 标签：css, position, internet-explorer-6, css-position, percentage

对不起我的英语不好。这可能是一个太简单的问题，但我在搜索结果中找不到答案:(不支持 IE6 但我的客户要求它。代码如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko" >
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

        <style type="text/css">
        #outter {
            height: 200px;
            width: 200px;
            background: #00f;
            margin:0 auto;
        }
        #inner {
            background: #f00;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 20px;
            left: 100px;
        }
        </style>
    </head>

    <body>
        <div id="outter">
            <div id="inner">
            </div>
        </div>
    </body>
</html> 
```

# javascript - 使用视图模型、在单页应用程序中合并响应还是遵守 REST 标准？

> ID：15727744
> 
> 赞同：0
> 
> 时间：2013-03-31T08:27:58.093
> 
> 标签：javascript, rest, backbone.js, asp.net-mvc-4, asp.net-web-api

例如，当您使用 ASP.NET MVC 创建单页应用程序和使用 REST 的一些 Web API 控制器时，往往会向服务器发出大量请求，因为视图通常依赖于一些复杂的数据。在一个普通的网络项目中，我肯定会尝试创建尽可能少的请求，也许这适用于单页应用程序？就我而言，我的应用程序依赖于两种类型的对象和一些相同类型的集合。在客户端，我正在使用 Backbone.js，我的控制器正在处理每个 for 的一种类型`Get()`，`Get(int id)`比如应该实现 REST。就我而言，这不是一个开放的 API，只是我的应用程序在使用它。这是我的应用程序所依赖的 JSON 示例。

```
{
    CurrentPage: {
        Heading: "Home",
        Id: "pages/193",
        Metadata: {
            Name: "Home",
            Title: null,
            Keywords: null,
            Description: null,
            DisplayInMenu: true,
            Published: "/Date(1334499539404)/",
            Changed: "/Date(1334499539404)/",
            ChangedBy: "Marcus",
            IsPublished: true,
            IsDeleted: false,
            Slug: null,
            Url: null,
            SortOrder: 0
        },
        Parent: {
            id: "pages/293",
            slug: "slug",
            url: "url"
        },
        Children: [
            "pages/226",
            "pages/257"
        ]
},
    ParentPage: {
        Heading: "Parent",
        Id: "pages/293",
        Metadata: {
            Name: "Parent",
            Title: null,
            Keywords: null,
            Description: null,
            DisplayInMenu: true,
            Published: "/Date(1334499539404)/",
            Changed: "/Date(1334499539404)/",
            ChangedBy: "Marcus",
            IsPublished: true,
            IsDeleted: false,
            Slug: "slug",
            Url: "url",
            SortOrder: 0
        },
        Parent: null,
        Children: []
},
    Children: [
        {
            Heading: "Foo",
            MainBody: null,
            Id: "pages/226",
            Metadata: {
                Name: "I'm an article",
                Title: null,
                Keywords: null,
                Description: null,
                DisplayInMenu: true,
                Published: "/Date(1334511318838)/",
                Changed: "/Date(1334511318838)/",
                ChangedBy: "Marcus",
                IsPublished: true,
                IsDeleted: false,
                Slug: "i-m-an-article",
                Url: "i-m-an-article",
                SortOrder: 1
            },
            Parent: {},
            Children: [ ]
        },
        {
            Heading: "Bar",
            MainBody: null,
            Id: "pages/257",
            Metadata: {
                Name: "Foo",
                Title: null,
                Keywords: null,
                Description: null,
                DisplayInMenu: true,
                Published: "/Date(1334953500167)/",
                Changed: "/Date(1334953500167)/",
                ChangedBy: "Marcus",
                IsPublished: true,
                IsDeleted: false,
                Slug: "foo",
                Url: "foo",
                SortOrder: 2
            },
            Parent: {},
            Children: [ ]
        }
    ]
} 
```

在查看上述响应时，我确信答案是将这些数据合并到我的控制器中，而不是由它们自己获取对象和集合，但我仍然对第二种意见感到好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:05:35.743

将您的收藏品彼此分开并没有什么特别的错误。
但是，如果您正在构建单页应用程序（或至少是具有高度动态内容的页面），请确保优化您的请求。

我看到很多地方可能会出错，但我也已经看到了正确的地方。

您已经将您的文章作为一个集合来处理。
你没有你的身体在那里，但同样，这可能是好是坏，取决于你想要实现的目标。

我可以告诉你，在同一个 JSON 响应中下载两打 500-1500 字的文章，加上每篇的评论，加上上述所有内容的元数据/微数据，将和只下载 shell 一样痛苦（对于“最新故事”小部件和文档树视图），然后在自己的调用中获取每个内容的内容......

但是考虑一下：这些都不违反 REST 的原则。
REST 只是规定您应该传输状态，每个 URL 都应该指向一个有意义的名词，并且您使用的 HTTP 动词应该指示对该名词做了什么，以及如何将所做的结果传达给客户端。

REST 本质上不是超媒体。它不一定与每个数据子集都有 URL 关联的兔子洞，其中一个集合中的一个项目可能有一个指向另一个集合的项目的 url，它可能有一个指向另一个集合的 url，并且您需要访问每个其中获取您想要的所有数据，以显示一篇富媒体博客文章...

如果你有一个超媒体系统为你工作，恭喜。
严重地。如果你能自己写出来，对你有好处。
但是 REST 只希望 URL 是唯一的，或者，如果是集合，则希望集合以可预测的方式返回，根据 URL。

那么是什么阻止你想出一个恰好是其他东西的集合的集合呢？REST 不在乎前端的解析，或者后端的集合。
或者，如果您坚持当前格式，请考虑即时数据服务。

我的意思是：
如果我将所有最后 10 篇文章作为一个集合加载并显示它们，我将推迟获取任何评论，直到用户单击“显示更多”按钮或向下滚动足以看到评论等，然后我会收集该特定文章的评论。

前端的目标不是试图将所有请求限制为 1 个巨大的请求。
前端的目标是快速加载，即使它只是为了达到你有几个小部件说“正在加载......”并让开，以便用户可以与什么进行交互是否存在，尽快，并将内容流式传输，对用户不可见（无论是在计时器上流式传输，还是基于与按钮或事件或其他任何交互的交互）。

这对于 REST 来说是非常可行的，甚至对于超媒体范式也是可行的。
你只需要小心你预先要求多少。

# c# - WPF/C# 键盘事件输入 sendkey

> ID：15727746
> 
> 赞同：-1
> 
> 时间：2013-03-31T08:28:15.800
> 
> 标签：c#, wpf, keyboard, sendkeys

嗨，我想通过键盘上的 sendind 键在文本框中输入文本。

xml:

```
<Button Name="Start" Margin="20" Grid.Column="0" Grid.Row="0" VerticalAlignment="Top" Click="Start_Click">Start</Button>
<TextBox Name="test" Grid.Column="0" Grid.Row="2"></TextBox> 
```

C＃：

```
private async void Start_Click(object sender, RoutedEventArgs e)
{
 Keyboard.Focus(test);
 await wait(1);
 SendKeys.Send("s"); 
} 
```

但这给了我一个错误。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:38:28.847

我认为问题在于您使用的是“SendKeys”，这是 Windows 窗体技术与 WPF 组件进行交互，这不是 Windows 窗体技术。您需要像这样向 TextBox 发送事件：

```
TextCompositionManager.StartComposition(new TextComposition(InputManager.Current, test, "s")); 
```

# java - 如何修复我的简单 Java 递归方法？

> ID：15727754
> 
> 赞同：1
> 
> 时间：2013-03-31T08:29:18.017
> 
> 标签：java, recursion, stack-overflow

我正在尝试编写一个简单的递归程序，它将打印出输入之前的所有整数和输入本身的规范和。例如，输入 5 应打印出“1 + 2 + 3 + 4 + 5”。输入必须大于零。将不胜感激在正确方向上的颠簸。

```
import java.util.Scanner;

public class Quiz10 
{
    public static void main (String[] args)
    {
        int input;
        System.out.println("Please enter an integer greater than one: ");
        Scanner scan = new Scanner(System.in);
        input = scan.nextInt();
        sumReverse(input);
    }
    public static void sumReverse(int n)
    {
        int x = n;

        if(x == 1)
            System.out.print(x);
        else if(x > 0)
        {
            System.out.print(x + " + " + (x-1));
        }
        x--;
        sumReverse(x);
    }
} 
```

编辑：输入 5 我目前得到：“线程“主”java.lang.StackOverflowError 中的 5 + 44 + 33 + 22 + 11Exception ...”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:34:28.097

您缺少终止条件。试试这个：

```
public static void sumReverse(int n)
{
    if(n == 1) {
        System.out.print(n);
        return;
    }
    else if(n > 0)
    {
        System.out.print(n + " + " + (n-1));
    } else return;
    sumReverse(--n);
} 
```

一旦 n 达到 1 或 1 小于或等于零，此函数将停止。

另一种选择是：

```
public static void sumReverse(int n)
{
    if(n == 1) System.out.print(n);
    else if(n > 0)
    {
        System.out.print(n + " + " + (n-1));
        sumReverse(--n);
    }        
} 
```

这具有相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:34:18.133

由于您不累积总和，因此您无法计算它。最好的方法是返回它：定义一个函数求和直到 n 并递归调用它。

我会用伪代码给你，因为我知道你更愿意学习而不是完成你的工作：

```
function sum(int n) -> int {
     if x==1 : return 1
     else : return n + sum(n-1)
} 
```

然后你会打印`sum(n)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:34:37.710

您只需要在好的情况下递归。在这里你每次都递归，所以你得到一个无限循环。

```
 else if(x > 0)
    {
        System.out.print(x + " + ");
        x--;
        sumReverse(x);
    } 
```

请注意，我还删除了`+ (x - 1)`，因为它将在下一次递归中打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T08:35:48.423

```
public static void sumReverse(int n){
    if(n==0)
        return;

    if(n == 1){
        System.out.print(n);
    }else if(n > 0)
    {
        System.out.print(n + " + ");
        sumReverse(n-1);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T08:36:00.363

*   你没有停止递归。
*   您应该`return`在递归停止条件之后添加。
*   另一件事，`+ (n-1)`从打印中删除`else`，你应该没问题。
*   另外，将 n 分配给 x 是多余的。您可以直接在 n 上工作。

试着在纸上画出递归调用，你会更好地理解它是如何工作的。

```
public static void sumReverse(int n)
{
     if(n == 1) {
         System.out.print(n);
         return;
     }
     else if(n > 0)
     {
         System.out.print(n + " + ");
     }
     sumReverse(n-1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T08:38:31.827

```
public class Main {

    public static String s = "";

    public static void main(String[] args) {

        int input;
        System.out.println("Please enter an integer greater than one: ");
        Scanner scan = new Scanner(System.in);
        input = scan.nextInt();
        String b=sumReverse(input);
        System.out.println(b);
    }

    public static String sumReverse(int n) {
        int x = n;

         if (x == 1) {
          s = "1" + s;
          return s;
        } else if (x > 0) {
           s ="+"+  Integer.toString(x) +s ;
           sumReverse(x - 1);
    }
        return s;

    }
} 
```

输出：

```
Please enter an integer greater than one: 
10 
1+2+3+4+5+6+7+8+9+10 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-31T08:47:21.887

想指出几点： 1\. 这个问题不是递归的通常候选。2.如果您打算使用递归，最好的选择是将返回值保存为字符串并最终在您的 main 方法中打印，如下所示。3\. 声明一个新的变量 x 真的没有必要。

```
public static void main (String[] args)
    {
        int input;
        System.out.println("Please enter an integer greater than one: ");
        Scanner scan = new Scanner(System.in);
        input = scan.nextInt();
        System.out.println(sumReverse(input));
    }
    public static String sumReverse(int n)
    {
        String a = "";
        if(n > 1)
        {
            return (n + "+" + sumReverse(n-1));
        }
        return "1";
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-31T08:49:08.350

```
public static void sum(int n){
  sumReverse(n-1);
  System.out.print(n);
}

public static int sumReverse(int n){
  if(n==1){
    return n;
  }
  System.out.print(sumReverse(n-1)+"+");
  return n;
} 
```

# ajax - 从另一个网站访问 Ajax url

> ID：15727764
> 
> 赞同：0
> 
> 时间：2013-03-31T08:30:43.623
> 
> 标签：ajax, jquery

我尝试了很多方法来访问网站 ajax 功能。这是代码：

```
$.ajax({
    type: 'POST',
    url: 'sched', 
    so on and so fourth..
}); 
```

注意：在 url 中有一个 url 参数，名为`sched`. 显然，如果我在自己的服务器或网站上运行它，这将不起作用。有什么方法可以让我知道这个 url 的根地址吗？比如example.com/sched？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:49:11.417

AJAX does not support requests on other domain. This leaves us with two choices

1.  Fetch response from a server-side code using HttpWebRequest or the likes
2.  Use JSONP. If the other domain supports JSONP callbacks.

Using JSONP is simple and this has been clearly explained in other post on Stackoverflow. You may use [method #1](https://stackoverflow.com/a/9631843/1654121) or [method #2](https://stackoverflow.com/a/6879276/1654121), both in same question.

*If we want to fetch data from other domain which does not support JSONP, then we're left with only option to use server-side code.*

Hope this helps!

Vivek

# android - 在 Android 上限时启动活动

> ID：15727765
> 
> 赞同：0
> 
> 时间：2013-03-31T08:30:48.907
> 
> 标签：android, android-activity, controls

我正在android中开发一个应用程序，该应用程序基于另一个应用程序活动的巧妙排序执行，控制每次执行之间的间隔。

问题是一旦其他活动接管它自然会继续在前台运行，防止我的应用程序杀死它并在间隔过去后重新启动它。

1.  我试图从我的应用程序中的**服务**启动另一个活动，希望该服务能够启动另一个应用程序的该活动的新实例来代替以前的实例。

2.  `dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_BACK))`当另一个应用程序正在运行时，我尝试从我的应用程序的活动/服务中使用。

都没有奏效。

我有什么可能收回对父活动的控制权？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:37:20.263

> 我试图从我的应用程序中的服务启动另一个活动，希望该服务能够启动另一个应用程序的该活动的新实例来代替以前的实例。

您是否尝试`FLAG_ACTIVITY_NEW_TASK`过从`Intent`何时`Activty`开始`Service`？

# java - 休眠：集合的投影返回 ArrayIndexOutOfBoundsException

> ID：15727768
> 
> 赞同：6
> 
> 时间：2013-03-31T08:30:57.130
> 
> 标签：java, spring, hibernate, partial, projection

我正在尝试使用休眠中的投影来取回部分对象，如下所示：

电影类：

```
@Table(name = "Movies")
public class Movie extends Entity {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id")
private Long id;

@Column(name = "title")
private String title;

@OneToMany(cascade = CascadeType.MERGE, fetch = FetchType.EAGER)
@JoinTable(name = "Movie_Genre", joinColumns = {@JoinColumn(name = "movieId")}, inverseJoinColumns = {@JoinColumn(name = "genreId")})
private List<Genre> genres; 
```

当用户然后转到 htp://localhost:8080/api/movies?fields=genres 这被称为：

电影道：

```
Criteria cr = getCurrentSession().createCriteria(Movie.class);
ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.property("genres"), "genres");
cr.setProjection(projectionList);
cr.setResultTransformer(Transformers.aliasToBean(Movie.class));
return cr.list(); 
```

但这会返回：

```
java.lang.ArrayIndexOutOfBoundsException: 0
org.hibernate.loader.criteria.CriteriaLoader.getResultRow(CriteriaLoader.java:166) 
```

休眠查询：

```
select this_.id as y0_ from Movies this_ 
```

当您想要投影集合时，投影不起作用...

有人可以告诉我该怎么做吗？如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T10:44:13.300

不同之处在于，对于标题，您实际上在 Movies 实体中有一个字段。对于集合，这不起作用，因为数据库表没有字段“流派”。而是有一个名为“Movie_Genre”的实体，它实际上具有电影和流派的外键字段。

所以在数据库级别没有“流派”字段，因此基本上只有例外有点误导。在 CriteriaLoader 的“applyLocks”中引发了异常，并且由于数据库方言找不到“流派”的列，因此返回的结果中实际上没有列。

您使用的是哪个确切版本的 Hibernate？

您为什么使用预测而不只是 Restrictions.in？

# java - 运算符 |= 在 Java 中是什么意思？

> ID：15727769
> 
> 赞同：-3
> 
> 时间：2013-03-31T08:31:06.537
> 
> 标签：java, operators, calculator

我对运算符的含义感到困惑`|=`。

一开始，我以为`checker|=(1<<val)`是意思`checker= checker+checker|(1<<val)`。我已经调试了代码，结果告诉我`checker|=(1<<val)`与`checker= checker+checker|(1<<val)`.

运营商是如何`|=`工作的？

```
public static boolean isUniqueChars(String str){
   int checker = 0;
   for(int i=0; i<str.length();++i){
       int val = str.charAt(i)-'a';
       if((checker &(1<<val))>0) return false;
       checker |=(1<<val);  // what does it mean ?
      // checker= checker +checker|(1<<val);
   }
   return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:33:17.433

它的意思是

```
checker = checker|(1<<val) 
```

它将有效地将位数 [val] 设置为 1 - 按位 OR 与单个 1 左移 [val] 次的模式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T08:34:49.657

```
checker |=(1<<val); 
```

是相同的

```
checker = checker|(1<<val) 
```

| 是逻辑或运算（位级）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T08:35:12.123

```
a |= b; 
```

是以下形式的简写：

```
a = a | b; 
```

这适用于 C、C++、Java、Python 以及可能更多的语言，它们都在某种程度上受到 C 的启发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T08:35:53.887

一般来说，`foo x= bar`意味着`foo = foo x bar`。因此`foo |= bar`是`foo = foo | bar`。

# c# - 在新窗口中显示进度条

> ID：15727774
> 
> 赞同：0
> 
> 时间：2013-03-31T08:31:27.020
> 
> 标签：c#, wpf, progress-bar

如何在 MainWindow 前面的新窗口中创建进度条？现在，将显示我的 prgoressbar。但是，我只使用了 .Show() 函数，窗口什么也不会显示；当我使用 .ShowDialog() 函数时，窗口会显示进度条，但它不起作用。我知道 Show 和 ShowDialog 之间的区别在于 Show 将立即返回。我的问题是如何使我的进度条窗口工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:56:03.300

我假设同样的逻辑适用于`WPF`

该解决方案`WinForm`基于

表格1

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 form = new Form2();
    // i have used thread pool just to simulate virtual progress from 1 to 100
    ThreadPool.QueueUserWorkItem(ShowProgressHandler, form);

    form.ShowDialog();

}

private void ShowProgressHandler(object o)
{
    Form2 form = o as Form2;
    for (int i = 0; i < 100; i++)
    {
        int i1 = i;
        this.Invoke((MethodInvoker) (() => form.OnProgress(i1)));
        Thread.Sleep(100);
    }
} 
```

表格2

```
public event Action<int> Progress;

protected internal virtual void OnProgress(int obj)
{
    progressBar1.Value = obj;
} 
```

# excel - 将格式化日期文本转换为日期值

> ID：15727780
> 
> 赞同：-2
> 
> 时间：2013-03-31T08:31:56.410
> 
> 标签：excel, excel-formula

如何在 Excel 中将此文本“2013 年 3 月 24 日星期日晚上 11:42”转换为“2013 年 3 月 24 日上午 11:42”日期值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:25:14.330

如果您在 A2 中有该文本，请在 B2 中尝试此公式

`=SUBSTITUTE(MID(A2,FIND(",",A2)+2,99),",","")+0`

具有所需格式的自定义格式 B2，即**dd/mm/yyyy h:mm AM/PM**

# .htaccess - 通过 htaccess 设置 gzip 压缩

> ID：15727784
> 
> 赞同：0
> 
> 时间：2013-03-31T08:33:23.440
> 
> 标签：.htaccess, http, symfony, compression, gzip

我在 symfony 2.1.7 上使用 gzip 压缩 html/css/js 文件时遇到问题。我在文件夹中找到了`.htaccess`文件`web`，但不知道如何修改它。谁能指导我或给我一个关于如何去做的链接？

这是我目前在我`.htaccess`的 symfony 项目网络中的文件中的内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteRule ^(.*)$ app.php [QSA,L]  
</IfModule> 
```

# android - 添加密钥时谷歌地图输入无效

> ID：15727785
> 
> 赞同：1
> 
> 时间：2013-03-31T08:33:23.897
> 
> 标签：android, google-maps

我得到了 md5 证书指纹。当我转到 Google API 控制台，然后创建一个新的 android 密钥时，我输入了我的 md5、一个逗号、我的包名，然后按生成。我得到这个错误`Your input was invalid`，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T08:46:17.897

您需要使用**分号**而不是逗号分隔 SHA1 密钥和包名称。

> 每行一个 SHA1 证书指纹和包名称（用分号分隔）。示例：45:B5:E4:6F:36:AD:0A:98:94:B4:02:66:2B:12:17:F2:56:26:A0:E0;com.example

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-07T09:11:13.137

您需要提供您的 SHA1 指纹而不是 MD5 指纹，并且您的 android 应用程序包名称以分号分隔。

获取 SHA1 和 Md5 指纹有两种方法 1\. 使用 Eclipse

```
Select window option and click on preferences.
There is popup widow in which select Android->Build
Here you find your MD5 and SHA1 fingerprint and location of debug.kestore. 
```

1.  打开命令提示符并导航到安装 java 的 bin 文件夹比使用以下获取指纹列表。

    > keytool -list -v -keystore debug.keystore

通常对于 Windows，您的 debug.kestore 可以在 C:\Users\.android 目录中找到。

# android - 活动生命周期 - 需要区分暂停原因

> ID：15727798
> 
> 赞同：0
> 
> 时间：2013-03-31T08:35:28.620
> 
> 标签：android, android-activity, activity-lifecycle

我正在 2.2.2 上开发一个应用程序，当屏幕空白、用户按下“主页”等时需要采取某些操作。

大部分都很好：当屏幕空白时，onPause() 被调用，然后 onResume() 在 unblank 上，如果按下 home，它会继续 onPause()、onStop() 等。

然而，这对于主要活动来说都是正确的，它似乎并不适用于从启动活动开始的次要活动。

屏幕空白/取消空白按预期工作，但是在“主页”键按下时，仅调用 onPause()，而不调用 onStop()，然后重新启动应用程序会导致 onResume()。

即，我无法从这个辅助活动中区分屏幕空白和返回主屏幕之间的区别，我需要这样做，原因是我需要在返回家时执行某些操作，而不是在屏幕空白上执行某些操作。

我能做些什么来找出答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T08:56:47.777

捕获主页按钮按下事件不能像那样完成，这是故意的，因此您将无法阻止它。

如果您确实坚持要捕获它，则需要使您的应用程序成为启动器，而不是简单的应用程序。

至于其他事件，您需要知道许多方法只会告诉您发生了什么，而不会告诉您它们的触发器。

为此，您必须自己弄清楚。

例如，如果您参加了另一项活动，则可以将其存储在表明您已参加另一项活动的标志中。如果您需要知道您已从第二个活动返回到第一个活动，则应使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)启动第二个活动，稍后您将检查结果（并将其设置在第二个活动上）。

如果您想避免活动切换，请考虑改用片段。

顺便说一句，您可能还想查看[onWindowFocusChanged](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:49:18.367

实际上，最好的方法是使用 onUserLeaveHint()。当按下 Home 时，它​​确实会从辅助活动中调用 - 至少在 API 级别 8 上。

# cuda - 错误“CUDA_SAFE_CALL”未定义

> ID：15727800
> 
> 赞同：0
> 
> 时间：2013-03-31T08:35:46.267
> 
> 标签：cuda

我正在使用[这里](https://code.google.com/p/cubgs/downloads/detail?name=cubgs-src.zip&can=2&q=)的源代码。它是关于使用 CUDA 和 OpenCV 在 GPU 上进行背景减法的扩展 GMM。我对 CUDA 完全陌生，但在 MVS 10 中出现错误

```
1>d:/MVS10 Projects/CudaTest/CudaTest/CvFastBgGMM_ver5.cu(227): error : identifier "CUDA_SAFE_CALL" is undefined 
```

1>
`1> 5 errors detected in the compilation of`

```
"C:/Users/DELL/AppData/Local/Temp/tmpxft_00000e34_00000000-5_CvFastBgGMM_ver5.cpp1.ii".
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 5.0.targets(592,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "D:\IDE\Microsoft Visual Studio 10.0\VC\bin\x86_amd64"  -I"D:\SDK\OpenCV\opencv\build\include" -I"D:\SDK\OpenCV\opencv\build\include\opencv" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  -G   --keep-dir "x64\Debug" -maxrregcount=0  --machine 64 --compile  -g   -DWIN32 -D_DEBUG -D_CONSOLE -D_UNICODE -DUNICODE -Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd  " -o "x64\Debug\CvFastBgGMM_ver5.cu.obj" "d:\MVS10 Projects\CudaTest\CudaTest\CvFastBgGMM_ver5.cu"" exited with code 2. 
```

我安装了 CUDA 5.0 版。我错过了什么？请帮我。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T08:52:09.050

`CUDA_SAFE_CALL` was part of the old cutils library. The cutil library was solely for simplifying the SDK samples, and wasn't supposed to be used by the user. In CUDA 5.0 it was removed, which is why you can't find it.

Take a look at [What is the canonical way to check for errors using the CUDA runtime API?](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api) to see how you should go about replacing `CUDA_SAFE_CALL`.

# javascript - onClientClick 返回 true 时未触发 OnClick 事件

> ID：15727811
> 
> 赞同：2
> 
> 时间：2013-03-31T08:37:22.103
> 
> 标签：javascript, jquery, asp.net

我有一个带有 onclientclick 和 onclick 事件的按钮。我的页面中也有一个 jquery。此 jquery 在计时器 elpase 时注册按钮单击事件。OnclientClick 调用一个函数来验证是否单击了单选按钮...当计时器运行时...如果用户单击（下一步）按钮而不选择选项（radiobuttonList）...它返回 false，因此服务器侧面事件被阻止..但是，如果计时器过去并且没有选择任何项目，则提交表单时带有空白选项这里是代码，

```
var countdownTimer, countdownCurrent;
$(document).ready(function() {
    countdownCurrent = $('#ctl00_MainContent_example2submit').val() * 100;
    countdownTimer = $.timer(function () {
    var min = parseInt(countdownCurrent / 6000);
    var sec = parseInt(countdownCurrent / 100) - (min * 60);
    var micro = pad(countdownCurrent - (sec * 100) - (min * 6000), 2);
    var output = "00"; if (min > 0) { output = pad(min, 2); }
    $('.countdowntime').html(output + ":" + pad(sec, 2) + ":" + micro);
    if (countdownCurrent == 0) {
        $('#ctl00_MainContent_btnNext').click();

    } else {
        countdownCurrent -= 7;
        if (countdownCurrent < 0) { 
            countdownCurrent = 0; 
        }
    }
}, 70, true);
$('#example2submit').bind('keyup', function (e) { 
    if (e.keyCode == 13) { 
        countdownReset(); 
    } 
});

function CheckIfOptionSelected() {
    var vFlag = true;
    var radioButton1 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_0'];
    var radioButton2 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_1'];
    var radioButton3 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_2'];
    var radioButton4 = document.forms[0].elements['ctl00_MainContent_rdBtnListOptions_3'];

    if (radioButton1.checked == false && radioButton2.checked == false && radioButton3.checked == false && radioButton4.checked == false && countdownCurrent > 0) {
        vFlag = false;
    }

    else {
        countdownReset();
        vFlag = true;

    }
    return vFlag;
}

function countdownReset() {
    var newCount = parseInt($('#ctl00_MainContent_example2submit').val()) * 100;
    if (newCount > 0) { countdownCurrent = newCount; }
} 
```

我面临的问题是，如果我允许计时器在单选按钮列表中没有选择任何内容的情况下过去... Onclick 事件触发，成功回发，但是当我选择一个选项...并且没有单击 NEXT 按钮我让计时器过去....回发不发生??....下一步按钮如下：

```
<asp:Button ID="btnNext" runat="server" Height="26px" 
            OnClientClick="if(!CheckIfOptionSelected()){return false;};" 
            OnClick="btnNext_Click" Text="Next"
            Width="77px" CausesValidation="False" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:45:34.900

试试这样：

```
OnClientClick="return CheckIfOptionSelected();" UseSubmitBehavior="false" 
```

如果函数返回`true`，onclick 肯定会起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T04:50:30.113

如果我们使用 UseSubmitBehavior="false"，它不起作用。也不需要给 CausesValidation="False"。

下面的示例 java 脚本函数用于在用户单击提交按钮而不输入时检查空值：

```
 function validatePwd()
      {
        var txtpwd = document.getElementById('txtpwd').value;
        if (txtpwd == "") {
            alert("Please enter new  password");
            return false;
        }
        else {
            return true;
        }

    } 
```

在 asp.net 按钮控件中，下面的事件就足够了

```
OnClientClick="return validatePwd();" 

OnClick="btnsubmit_Click" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-14T13:26:08.943

`OnClientClick="return CheckIfOptionSelected(); return true;"`对我来说工作得很好。

# hashmap - Arduino哈希表/字典

> ID：15727814
> 
> 赞同：12
> 
> 时间：2013-03-31T08:37:45.123
> 
> 标签：hashmap, arduino, hashtable

我正在尝试让哈希表或字典在 Arduino Mega 2560 上工作。我的目标是拥有类似的东西

```
dictionary[ENGLISH]["ACCOUNT"] = "Account";
dictionary[ENGLISH]["DATE_AND_TIME"] = "Date and Time";
dictionary[ENGLISH]["IDLE"] = "Idle";
dictionary[ENGLISH]["Language"] = "Languge"
dictionary[ENGLISH]["MAIN_MENU"] = "Main Menu";
dictionary[ENGLISH]["PRESCRIPTION"] = "Prescription";
dictionary[ENGLISH]["SETTINGS"] = "Settings";
dictionary[ENGLISH]["SOUND"] = "Sound"; 
```

其中 ENGLISH 本质上是一个常数 0，我也会有 SPANISH 和 FRENCH（分别为 1 和 2）。也就是说，一个包含 3 个字典元素的数组。

在第一次 Google 搜索中，我找到了一个指向 C++ STL 建模库的[链接](http://andybrown.me.uk/wk/2011/01/15/the-standard-template-library-stl-for-avr-with-c-streams/)，但它根本不适用于我的 Arduino 1.0.3。我想知道是否有人可以为我在 arduino 中使用地图/哈希表的替代方法，**或者**修复以使提到的库正常工作。

对于我的情况，我正在通过 Arduino 上的触摸屏对菜单系统进行建模，它必须接受 3 种语言（用于按钮）。所选语言位于 EEPROM 中的某个位置，我将其保存在变量 'lang' 中，当我需要在屏幕上打印某些内容时，我会执行以下操作：

```
 screen.print(dictionary[lang]["SOUND"], CENTER, 23); 
```

并且根据用户选择的“语言”，理想情况下，它将相应地打印。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-31T16:58:29.353

我认为这里可能不需要哈希表，无论如何在这个平台上都有很好的理由避免它。

## 为什么哈希表可能是不必要的

通常在这种情况下，不需要**字符串**键，因为键仅在代码内部可见，并且不会与程序外部交互。因此，通常的解决方案是拥有一个（伪）整数键，其形式`#define`由预处理器而不是您的程序处理：

```
#define kWORDIDX_LANGUAGE   1
#define kWORDIDX_SOUND      2
#define kWORDIDX_MAINMENU   3
#define kWORDIDX_SPAGHETTI  4
...
dictionary[ENGLISH][kWORDIDX_SOUND] = "Sound";
... 
```

然后，您可以像这样`Sreen.print(dictionary[lang][kWORDIDX_SOUND], CENTER, 23);`或类似的东西访问您的字典条目。

这种方法的优点是：

*   您正在节省内存空间：不使用字符串键
*   您正在节省处理时间：虽然哈希表访问在技术上是 O(1)，但仍然涉及到计算哈希的常量因素。数组访问速度更快。
*   您的代码不太容易出错：如果您使用字符串访问（无论如何都是幻数的一种形式）拼错了您的密钥，您将得到一个哈希表未命中。如果你拼错了其中一个`#define`d 键，你会得到一个编译错误，这就是你想要的

## 为什么你不想要 Arduino 上的哈希表

Arduino 是一个内存受限的平台：它的内存非常有限。使用真正的哈希映射的问题如下：

*   `int`字符串（通常）占用更多的内存空间。使用`#define`由编译器转换为整数文字的键，每个键使用 1、2 或 4 个字节（取决于您的编译器设置），而每个字符串键都需要`strlen(s) + 1`存储空间。这个空间实际上被使用了两次：一次在闪存中（即变量初始化的地方），一次在 SRAM 中。
*   哈希映射数据结构本身占用更多内存：哈希映射中的空条目（在[开放寻址](http://en.wikipedia.org/wiki/Hash_table#Open_addressing)方案中）或链表（在[单独的链接方案](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining)中）存在开销。由于您的数据是只读的，因此您不需要该开销，因为不会添加哈希表。
*   人们用来在 Arduinos 中保存内存的一个技巧是使用关键字将只读数据（例如字符串）仅存储在[程序内存](http://www.arduino.cc/en/Reference/PROGMEM)（而不是 SRAM）中`PROGMEM`。如果您使用哈希映射构建字典，则您将无法使用此路由。另一方面，给定`#define`上面的 -type 索引方案，将所有语言字符串存储为字符串将非常容易`PROGMEM`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-28T14:38:49.923

您还可以使用数据结构来定义字典：

```
typedef struct { 
  uint8_t lang;
  char* sound;
  char* value;
} langDictionary; 
```

然后，您可以使用要使用的值定义结构数组：

```
const langDictionary myDictionaryArr[] {
    {0, "ENGLISH", "Settings"},
    {1, "SPANISH", "Ajustes"},
    {2, "FRENCH", "Paramètres"}
}; 
```

最后，您可以使用数组来搜索属性：

```
void setup() {
  Serial.begin(115200);
  for(uint8_t i = 0; i < sizeof(myDictionaryArr)/sizeof(langDictionary); ++i) {
      Serial.println(myDictionaryArr[i].value); //Prints the values: "Settings", "Ajustes" and "Paramètres"
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-27T22:28:04.683

虽然我完全同意前面的答案，但[arduino 游乐场](http://playground.arduino.cc/)有“ [Arduino HashMap 库](http://playground.arduino.cc/Code/HashMap)”。

# winapi - 通过 IsWindow 枚举窗口

> ID：15727815
> 
> 赞同：-4
> 
> 时间：2013-03-31T08:37:46.763
> 
> 标签：winapi

通过 IsWindow (N) 过滤从 0 到 0xFFFFFFFF 的数字！= 0，排序看看——

![http://files.rsdn.ru/42164/iswindow_raw.png](https://i.stack.imgur.com/DGfEy.png)

-- 数字 1) N, 2) AND(N,0xFFFF), 3) OR(N,0xFFFF0000) - 可以作为同一窗口的 hwnd。

因此问题是：是否可以将 2 hwnd 存储在 1 个 dword 中，如果没有 - 请提供具体的反例。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T11:44:28.950

可以*仅以*16 位存储 HWND。事实上，您甚至可以将其存储为 15 位，因为它始终是偶数。

但你应该问的是：这样做是否明智？答案是**否定**的！Win32 API 的文档指出 HWND 是一个 32 位整数，但没有说明它的内部结构。这些是未记录的实现细节，可能会在任何版本的系统中发生变化。

任何负责任的程序员都会反对任何利用这些知识的技术。这并不意味着它不能有用，只是你必须小心你所知道的。

# c# - 运行示例 MVC 项目时需要身份验证

> ID：15727816
> 
> 赞同：2
> 
> 时间：2013-03-31T08:38:29.370
> 
> 标签：c#, asp.net, asp.net-mvc, authentication, iis

我正在尝试运行以下示例项目。

[https://github.com/Wintellect/Angular-MVC-Cookbook](https://github.com/Wintellect/Angular-MVC-Cookbook)

有 3 个解决方案，我`Authentication Required`在运行网站时得到。

所有解决方案都`<authentication mode="None" />`在`webconfig`.

我使用默认的 IIS Express 服务器在 VS2012 中运行。

**如果可能的话，谁能告诉我我需要做什么来禁用此身份验证？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:26:51.420

找到以下解决方案。

中的匿名身份验证`Project properties`设置为`disabled`

项目文件：

```
<IISExpressAnonymousAuthentication>enabled</IISExpressAnonymousAuthentication>
<IISExpressWindowsAuthentication>disabled</IISExpressWindowsAuthentication> 
```

# select - SELECT WHERE [主键] = [主键值] O(1) 吗？

> ID：15727818
> 
> 赞同：4
> 
> 时间：2013-03-31T08:38:42.910
> 
> 标签：select, key, hashtable, where, rdbms

对于典型的现代 RDBMS，通过一个特定的主键查询与通过键查询哈希表一样快，是否正确？

或者是否有“实际工作”来遍历表并追踪主键值？即使有主键的自动索引，这似乎也是不可想象的浪费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:13:52.813

数据库操作涉及辅助内存单元（磁盘）的访问。实现效率重要的是减少块访问时间（而不是操作）。Select 查询的复杂性取决于做了什么样的优化。
因为您提到`=`了关键属性，所以对文件排序的关键属性进行相等比较（带有[主索引](http://en.wikipedia.org/wiki/Database_index#Dense_index)），使用二进制搜索是有效的。（比内部搜索更有效）被使用。二进制搜索通常访问 log [2] (Br) 块，其中 Br 是文件的块数。（这是经过计算的，您可能还需要访问额外的索引块）。

它还取决于索引实现的类型。如果它通过多级或 B、B ^+实现，则访问时间可能会进一步减少，这取决于节点中的键数（这进一步取决于一个块中可以容纳多少记录）。

在启发式优化中，DBMS 系统通常将 MAX、MIN、AVG 等信息保存在表目录中。因此，如果信息可以从目录信息中导出，则查询执行时间可能是常数 O(1)。

阅读：第 19 章[查询处理和优化算法](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://www.aabu.edu.jo/tool/course_file/lec_notes/901331_Fundamentals_of_Database_Systems,_6th_Edition_%280136086209%29.pdf&ei=Lj9ZUaHoEIjmrAeHn4C4CQ&usg=AFQjCNGr81mTvpcjSnSPei0hWXIAsJCOfQ&bvm=bv.44442042,d.bmk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:18:53.723

让我们以 InnoDB 存储引擎为例。所有 InnoDB 索引都是 B 树。B 树中最坏情况的搜索复杂度为 O(log n)。但是如果一个表几乎完全适合主内存，InnoDB 可以自动构建一个哈希索引。[自适应哈希索引](http://dev.mysql.com/doc/refman/5.0/en/innodb-adaptive-hash.html)

# python-2.7 - 当单词的同义词存在时，为什么代码在python中返回IndexError错误

> ID：15727820
> 
> 赞同：0
> 
> 时间：2013-03-31T08:39:14.883
> 
> 标签：python-2.7, nltk, wordnet

我不明白为什么会收到此错误。请帮忙

```
>>> mylist = []
>>> file1 = open("medDict.txt", "r")
>>> for line in file1:
    from nltk.corpus import wordnet
    print line
    wordFromList2 = wordnet.synsets(line)[0]
    mylist.append(wordFromList2)

abnormal

Traceback (most recent call last):
  File "<pyshell#10>", line 4, in <module>
    wordFromList2 = wordnet.synsets(line)[0]
IndexError: list index out of range 
```

medDict.txt 包含以下单词

```
abnormal
acne
ache
diarrhea
fever 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T14:23:46.353

@Blender 关于`word.synsets()`. 如果您需要访问任何`synsets`具有自然语言**空格**的内容，Wordnet 使用**下划线** `_`而不是`. 例如，如果您想找到类似`kick the bucket`从 NLTK WN 界面访问同义词集的内容`wn.synsets("kick_the_bucket")``

 ````
>>> from nltk.corpus import wordnet as wn
>>> wn.synsets('kick the bucket')
[]
>>> wn.synsets('kick_the_bucket')
[Synset('die.v.01')] 
```

但是，请注意，有时 WordNet 会使用破折号而不是下划线对一些同义词集进行编码。例如`9-11`，可以访问但`9_11`不是。

```
>>> wn.synsets('9-11')
[Synset('9/11.n.01')]
>>> wn.synsets('9_11')
[] 
```

现在解决您的代码问题。

**1.**当你逐行读取文件时，你也读取了行中不可见但存在的内容`\n`。所以你需要改变这个：

```
>>> mylist = []
>>> file1 = open("medDict.txt", "r") 
```

对此：

```
>>> words_from_file = [i.strip() for i in open("medDict.txt", "r")] 
```

**2.**我不太确定你真的想要`wordnet.synsets(word)[0]`，这意味着你只采取第一种感觉，请注意它可能不是`Most Frequent Sense (MFS)`。所以不要这样做：

```
>>> wordFromList2 = wordnet.synsets(line)[0]
>>> mylist.append(wordFromList2) 
```

我认为更合适的方法是使用 a`set`而不是`update`set

```
>>> list_of_synsets = set()
>>> for i in words_from_file:
>>>  list_of_synsets.update(wordnet.synsets(i))
>>> print list_of_synsets 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:45:46.683

`word.synsets()` is whitespace-sensitive:

```
>>> wordnet.synsets('abnormal')
    [Synset('abnormal.a.01'), Synset('abnormal.a.02'), Synset('abnormal.s.03')]
>>> wordnet.synsets(' abnormal')
    [] 
```

`.strip()` the whitespace from your line before passing it in:

```
wordFromList2 = wordnet.synsets(line.strip())[0] 
````

# java - 如何合并 2 个字符串数组，但在 Java 中保留重复项？

> ID：15727821
> 
> 赞同：0
> 
> 时间：2013-03-31T08:39:21.303
> 
> 标签：java, arrays, string, union

```
s1={"phone","smartphone","dumpphone"} (all string elements in s1 are unique)
s2={"phone","phone","smartphone"} 
```

（s2中的字符串元素可以重复，但s2中的每个元素都必须属于s1，即s2不能包含s1中不存在的字符串。例如s2不能包含“handheld”，因为s1中不包含“”handheld "")

```
s2 union s1={"phone","phone", "smartphone","dumpphone"} 
```

Set & HashSet 不允许重复

我尝试了 List 但它没有帮助。

你知道怎么解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:47:18.613

A List implementation should work fine. Here's your code using an ArrayList:

```
String[] s1 = new String[]{"phone","smartphone","dumpphone"};
String[] s2 = new String[]{"phone","phone","smartphone"};

ArrayList<String> union = new ArrayList<>();
// Add elements of s1
for(String s : s1){ union.add(s); }
// Conditionally add elements of s2
for(String s : s2){ if(union.contains(s)){ union.add(s); } } 
```

Results:

```
for(String s : union){ System.out.println(s); } 
```

Prints

```
phone
smartphone
dumpphone
phone
phone
smartphone 
```

Note: You say that you're expecting only two occurances of "phone". Why? From your problem statement it's not clear.

**EDIT:**

As per @dantuch's comment below, you may be looking for something like this instead:

```
String[] s1 = new String[]{"phone","smartphone","dumpphone"};
String[] s2 = new String[]{"phone","phone","smartphone"};

ArrayList<String> union = new ArrayList<>();
// Add elements of s2
for(String s : s2){ union.add(s); }
// Conditionally add elements of s1 (Only if they're not in s2)
for(String s : s1){ if(!union.contains(s)){ union.add(s); } } 
```

Which would print:

```
phone
phone
smartphone
dumpphone 
```

# c++ - 如何使用 gdb 找到全局变量的析构函数调用？

> ID：15727823
> 
> 赞同：4
> 
> 时间：2013-03-31T08:39:29.243
> 
> 标签：c++, linux, gdb, global-variables, destructor

我们有一个非常大的项目。（大约 200'000 个文件）

当项目退出时，它会在全局变量的解构中崩溃。

但是我们找不到变量定义的地方。

有人知道如何找到全局变量的位置吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T16:06:18.697

> 但是我们找不到变量定义的地方。

大概，您想找出*哪个*全局变量引起了麻烦。如果您知道它是哪一个，您可以使用`grep`或 GDB`info variable foobar`来找到它。

让我们考虑一个例子。

```
cat foo.cc
#include <stdio.h>
#include <string>

using std::string;

string foo("foo");
string bar("bar");
string baz("baz");

// It is not valid to call this function with a global string.
void invalid_with_global(string *str)
{
  printf("str: %s @%p)\n", str->c_str(), str);
  printf("before dtor\n");
  str->~string();
  printf("after dtor\n");
}

int main()
{
  invalid_with_global(&baz);
}

g++ -g foo.cc && gdb -q ./a.out

Reading symbols from /tmp/a.out...done.
(gdb) r
Starting program: /tmp/a.out
str: baz @0x601088)
before dtor
after dtor
*** glibc detected *** /tmp/a.out: double free or corruption (fasttop): 0x0000000000602070 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7ffff7583b96]
/usr/lib/x86_64-linux-gnu/libstdc++.so.6(_ZNSsD1Ev+0x23)[0x7ffff7b78c13]
/lib/x86_64-linux-gnu/libc.so.6(+0x3b901)[0x7ffff7540901]
/lib/x86_64-linux-gnu/libc.so.6(+0x3b985)[0x7ffff7540985]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf4)[0x7ffff7526774]
/tmp/a.out[0x4007f9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 ca:01 147024                             /tmp/a.out
00600000-00601000 r--p 00000000 ca:01 147024                             /tmp/a.out
00601000-00602000 rw-p 00001000 ca:01 147024                             /tmp/a.out
00602000-00623000 rw-p 00000000 00:00 0                                  [heap]
7ffff7209000-7ffff7304000 r-xp 00000000 ca:01 881564                     /lib/x86_64-linux-gnu/libm-2.15.so
7ffff7304000-7ffff7503000 ---p 000fb000 ca:01 881564                     /lib/x86_64-linux-gnu/libm-2.15.so
7ffff7503000-7ffff7504000 r--p 000fa000 ca:01 881564                     /lib/x86_64-linux-gnu/libm-2.15.so
7ffff7504000-7ffff7505000 rw-p 000fb000 ca:01 881564                     /lib/x86_64-linux-gnu/libm-2.15.so
7ffff7505000-7ffff76ba000 r-xp 00000000 ca:01 881572                     /lib/x86_64-linux-gnu/libc-2.15.so
7ffff76ba000-7ffff78b9000 ---p 001b5000 ca:01 881572                     /lib/x86_64-linux-gnu/libc-2.15.so
7ffff78b9000-7ffff78bd000 r--p 001b4000 ca:01 881572                     /lib/x86_64-linux-gnu/libc-2.15.so
7ffff78bd000-7ffff78bf000 rw-p 001b8000 ca:01 881572                     /lib/x86_64-linux-gnu/libc-2.15.so
7ffff78bf000-7ffff78c4000 rw-p 00000000 00:00 0
7ffff78c4000-7ffff78d9000 r-xp 00000000 ca:01 881501                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff78d9000-7ffff7ad8000 ---p 00015000 ca:01 881501                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff7ad8000-7ffff7ad9000 r--p 00014000 ca:01 881501                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff7ad9000-7ffff7ada000 rw-p 00015000 ca:01 881501                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff7ada000-7ffff7bbc000 r-xp 00000000 ca:01 1096828                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7ffff7bbc000-7ffff7dbb000 ---p 000e2000 ca:01 1096828                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7ffff7dbb000-7ffff7dc3000 r--p 000e1000 ca:01 1096828                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7ffff7dc3000-7ffff7dc5000 rw-p 000e9000 ca:01 1096828                    /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7ffff7dc5000-7ffff7dda000 rw-p 00000000 00:00 0
7ffff7dda000-7ffff7dfc000 r-xp 00000000 ca:01 881673                     /lib/x86_64-linux-gnu/ld-2.15.so
7ffff7fd8000-7ffff7fdd000 rw-p 00000000 00:00 0
7ffff7ff7000-7ffff7ffb000 rw-p 00000000 00:00 0
7ffff7ffb000-7ffff7ffc000 r-xp 00000000 00:00 0                          [vdso]
7ffff7ffc000-7ffff7ffd000 r--p 00022000 ca:01 881673                     /lib/x86_64-linux-gnu/ld-2.15.so
7ffff7ffd000-7ffff7fff000 rw-p 00023000 ca:01 881673                     /lib/x86_64-linux-gnu/ld-2.15.so
7ffffffdd000-7ffffffff000 rw-p 00000000 00:00 0                          [stack]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]

Program received signal SIGABRT, Aborted.
0x00007ffff753b425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt
#0  0x00007ffff753b425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007ffff753eb8b in __GI_abort () at abort.c:91
#2  0x00007ffff757939e in __libc_message (do_abort=2, fmt=0x7ffff7683008 "*** glibc detected *** %s: %s: 0x%s ***\n") at ../sysdeps/unix/sysv/linux/libc_fatal.c:201
#3  0x00007ffff7583b96 in malloc_printerr (action=3, str=0x7ffff76831f8 "double free or corruption (fasttop)", ptr=<optimized out>) at malloc.c:5007
#4  0x00007ffff7b78c13 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007ffff7540901 in __run_exit_handlers (status=0, listp=0x7ffff78bd688 <__exit_funcs>, run_list_atexit=true) at exit.c:78
#6  0x00007ffff7540985 in __GI_exit (status=<optimized out>) at exit.c:100
#7  0x00007ffff7526774 in __libc_start_main (main=0x400904 <main()>, argc=1, ubp_av=0x7fffffffd828, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffd818) at libc-start.c:258
#8  0x00000000004007f9 in _start () 
```

此时，您知道您的全局 'std::basic_string<...>' 对象之一正在造成问题，但您不知道是哪一个。

找出答案是微不足道的：只需转到第 4 帧并打印`this`，对吗？

```
(gdb) fr 4
#4  0x00007ffff7b78c13 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
(gdb) p this
No symbol "this" in current context. 
```

嗯，效果不太好，因为我没有安装调试符号`libstdc++.so.6`（如果导致您遇到麻烦的对象是在您自己的源代码中定义的，那么您不应该遇到那种麻烦）。

现在，我可以为我的 . 安装调试符号`libstdc++.so.6`，也可以使用我对 ABI 的了解。在 Linux/x86_64 上，第一个 ( `this`) 参数在 register 中传递`%rdi`。我不能使用当前的`%rdi`，因为它已经用于其他用途。因此，我在问题析构函数上设置了一个断点：`std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()`，然后重新启动。

在一个真正的程序中，析构函数会被调用很多次，但我只对来自`exit`. 所以我将断点设置为 on `exit`，并且只有当该断点被命中时，我才会在析构函数上设置一个新的断点。

```
(gdb) b exit
(gdb) r
Starting program: /tmp/a.out
str: baz @0x601088)
before dtor
after dtor

Breakpoint 1, __GI_exit (status=0) at exit.c:100
100 exit.c: No such file or directory.
(gdb) b std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()
Breakpoint 2 at 0x7ffff7b78bf0
(gdb) c
Continuing.

Breakpoint 2, 0x00007ffff7b78bf0 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
(gdb) bt
#0  0x00007ffff7b78bf0 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#1  0x00007ffff7540901 in __run_exit_handlers (status=0, listp=0x7ffff78bd688 <__exit_funcs>, run_list_atexit=true) at exit.c:78
#2  0x00007ffff7540985 in __GI_exit (status=<optimized out>) at exit.c:100
#3  0x00007ffff7526774 in __libc_start_main (main=0x400904 <main()>, argc=1, ubp_av=0x7fffffffd828, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fffffffd818) at libc-start.c:258
#4  0x00000000004007f9 in _start ()
(gdb) p/x $rdi
$1 = 0x601088
(gdb) c
Continuing.
*** glibc detected *** /tmp/a.out: double free or corruption (fasttop): 0x0000000000602070 ***
... as before, omitted ...

Program received signal SIGABRT, Aborted.
0x00007ffff753b425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
64  ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory. 
```

所以现在我们有了 "bad" global: 的地址`0x601088`，你会注意到它与我打印的值相匹配。

最后我们准备回答“它是哪个变量？” 问题：

```
(gdb) info sym 0x601088
baz in section .bss of /tmp/a.out 
```

瞧：问题变量是`baz`。最后：

```
(gdb) info var baz
All variables matching regular expression "baz":

File foo.cc:
std::string baz; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:42:42.333

您可以`nm -C`在每个目标文件上使用（并将`grep`其结果用于您正在搜索的析构函数）。

也许`ptype` 命令`gdb`可能会有所帮助。

您甚至可以考虑定制您的 GCC，例如使用[MELT](http://gcc-melt.org/)（一种扩展 GCC 的特定领域语言）用于导航或重构目的（即在 MELT 中制作 GCC 扩展来帮助您）。对于像您这样的大型项目，定制编译器（并学习 MELT）是值得付出努力的（至少可以帮助开发团队，例如通过为您的编码规则定制 GCC 和 MELT，等等......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:47:01.270

对于这样的大型软件项目，我肯定也建议您开始使用 Doxygen。它将为您节省每次运行`grep`的麻烦。`nm -c`

# java - 我可以将我的 tomcat 实例发布到同一 wifi 网络中的其他计算机吗？互联网怎么样？

> ID：15727825
> 
> 赞同：0
> 
> 时间：2013-03-31T08:40:01.617
> 
> 标签：java, tomcat

**场景：** Tomcat 实例在一台 Windows 7 机器上运行，发布了 1 个应用程序。

**目标 1：**在同一 WIFI 网络上的另一台计算机上提供对此实例的访问权限

**尝试的事情：**从客户端计算机上，尝试访问`http://<IPofComputerWithTomcat>:8080/`, `http://hostnameofComputerWithTomcat:8080`, 找不到页面。

**目标 2：**在本地网络之外提供对该实例的访问，即。互联网

**尝试：**不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:59:05.337

这个问题可能在[ServerFault](https://serverfault.com/)上问得更好，

我猜您的 Tomcat 绑定到本地接口，因此无法从外部世界访问。

如果您想让 Tomcat 为来自任何其他主机（相同的 wifi 网络和互联网）的请求提供服务，请在 server.xml 配置文件中更改您的连接器（有关详细信息，请参阅[官方文档](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)）

```
 <Connector port="8080" 
       protocol="HTTP/1.1" 
       address="0.0.0.0"
       connectionTimeout="20000"
       redirectPort="8443" /> 
```

重要的部分是`address="0.0.0.0"`将您的 tomcat 绑定到所有网络接口。

如果这已经到位，可能还会有防火墙或其他 Windows 网络设置阻止传入请求。

如果您可以访问 Tomcat，但收到诸如 404 not found 之类的错误消息，请确保您使用的是正确的 URL：

```
http://<TomcatHostOrIP>:8080/Context/ 
```

其中 Context 通常是您的战争文件的名称。

# google-chrome - 在 chrome 扩展中获取选定的文本

> ID：15727826
> 
> 赞同：1
> 
> 时间：2013-03-31T08:40:11.353
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试从 chrome 扩展中的选项卡中获取选定的文本。目前我正在使用 popup.js 和内容脚本之间的消息传递来获取选定的文本。是否有从 popup.js 本身获取选定文本的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:06:49.137

弹出页面和内容脚本存在于单独的环境中，要建立通信渠道，您需要使用消息传递机制。

您在使用消息传递时是否发现任何问题？

# twitter-bootstrap - 具有自己设计的引导程序

> ID：15727830
> 
> 赞同：1
> 
> 时间：2013-03-31T08:40:58.350
> 
> 标签：twitter-bootstrap

我想为我的网站使用 Bootstrap - 特别是我的管理后端。在开始之前，我想问一些问题。

我如何理解 Bootstrap 是什么？这类似于 Web 设计工具的集合，还是只是每个 html 页面的 UI？我需要特殊的 HTML 结构还是可以在我自己的 HTML 结构中使用它？

我会很高兴有一些好的教程和技巧，也许还有例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:26:05.667

Twitter bootstrap 是一个库，可帮助您的页面更加流畅和响应迅速，它具有内置的 CSS 和 javascript，只需包含引导类和函数即可开始您的设计。

它不是一个工具，你可以下载源代码，你可以看到定义了这些类和函数的 .css 和 .js 文件。

您不需要特殊的 HTML 结构，您只需在 head 标签中包含引导 css，并且由于 twitter-bootstrap 使用 jQuery，因此在 script 标签中包含 jQuery 库和 bootstrap jQuery 文件并放入您的 body 标签中，如下所示：

```
<!DOCTYPE html>
    <html>
        <head>
            <title>...</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        </head>
        <body>
            <script src="http://code.jquery.com/jquery.js"></script>
            <script src="js/bootstrap.min.js"></script>
        </body>
 </html> 
```

从[引导开始](http://twitter.github.com/bootstrap/getting-started.html)...

# actionscript-3 - 在 FlashDevelop 中使用图形

> ID：15727834
> 
> 赞同：0
> 
> 时间：2013-03-31T08:41:23.073
> 
> 标签：actionscript-3, flash, graphics, flashdevelop, displayobject

我已经编写 ActionScript 3 有一段时间了，最​​近我决定放弃 Flash Professional，转而使用 FlashDevelop。我很高兴这个选择，但我最终发现了一个小问题：由于我无法访问 Flash Professional 的图形库，因此有很多代码试图引用不存在的剪辑。让我们使用这个示例，其中 MC1 是 Fl​​ashPro 库的一个元素：

```
public class GraphicElement
{
    public var clip:DisplayObject;

    function GraphicElement(theClip:DisplayObject)
    {
        this.clip = theClip;
    }
}

//And in another Class:

var myGraphic:GraphicElement = new GraphicElement(new MC1() as DisplayObject); 
```

在 FlashDevelop 中，“new MC1()”没有任何意义。如何导入图形以与 DisplayObject 类一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:14:59.827

要使用 FLA 中的图形，首先将包含图形的 FLA 发布为 SWC。在 CS5.5 中，您可以在*File* -> *Publish Settings...*中设置它，然后发布它。现在将生成的 SWC 放入您的 Flash Develop 项目文件夹中，您可以将它放在任何地方，尽管“lib”文件夹通常是它所在的位置。最后，打开您的 Flash Develop 项目，在右侧的项目窗格中，右键单击您的 SWC，然后单击*Add To Library*。

现在您应该能够像往常一样访问库中的内容，就像您在 FLA 本身中编码一样。这不仅包括影片剪辑或按钮，还包括导入的图像或内置的 Flash 组件，只要它在库中即可。当然，您想要访问的任何内容也需要为 ActionScript 导出。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:44:23.320

固定的。我所说的是“如何将图像嵌入到我的项目中？”的一个非常复杂的措辞。在这里找到答案：http: [//www.streamhead.com/how-to-use-images-in-actionscript-3-with-flashdevelop-and-some-other-as3-tips/](http://www.streamhead.com/how-to-use-images-in-actionscript-3-with-flashdevelop-and-some-other-as3-tips/)

# java - Is it possible to color only a portion of JTextpane?

> ID：15727836
> 
> 赞同：2
> 
> 时间：2013-03-31T08:41:52.390
> 
> 标签：java, swing, background, jtextpane

Hi I am trying to find out whether it is possible to apply background color only to a portion of JTextpane? For example if I have a JTextpane of size 300 X 400 then can I apply some color to a portion 300 X 200 ?

I am not posting any code as I dont have any.

Eg: ![enter image description here](https://i.stack.imgur.com/wN1yx.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:02:16.913

您只需添加`StyleConstants.Background`, 作为 的参数`addAttribute()`，`StyleContext`这将返回一个`AttributeSet`对象。希望这是你要找的：

```
import java.awt.*;    
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.*;

import javax.swing.text.AttributeSet;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyleContext;

public class TextPaneTest extends JFrame
{
    private JPanel topPanel;
    private JTextPane tPane;

    public TextPaneTest()
    {
        topPanel = new JPanel();        

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);            

        EmptyBorder eb = new EmptyBorder(new Insets(10, 10, 10, 10));

        tPane = new JTextPane();                
        tPane.setBorder(eb);
        //tPane.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY));
        tPane.setMargin(new Insets(5, 5, 5, 5));

        topPanel.add(tPane);

        appendToPane(tPane, "My Name is Too Good.\n", Color.RED, Color.WHITE);
        appendToPane(tPane, "I wish I could be ONE of THE BEST on ", Color.WHITE, Color.BLUE);
        appendToPane(tPane, "Stack", Color.DARK_GRAY, Color.BLACK);
        appendToPane(tPane, "Over", Color.MAGENTA, Color.BLUE);
        appendToPane(tPane, "flow", Color.ORANGE, Color.YELLOW);

        getContentPane().add(topPanel);

        pack();
        setVisible(true);   
    }

    private void appendToPane(JTextPane tp, String msg, Color f, Color b)
    {
        StyleContext sc = StyleContext.getDefaultStyleContext();
        AttributeSet aset = sc.addAttribute(SimpleAttributeSet.EMPTY, StyleConstants.Foreground, f);
        aset = sc.addAttribute(aset, StyleConstants.Background, b);

        aset = sc.addAttribute(aset, StyleConstants.FontFamily, "Lucida Console");
        aset = sc.addAttribute(aset, StyleConstants.Alignment, StyleConstants.ALIGN_JUSTIFIED);

        int len = tp.getDocument().getLength();
        tp.setCaretPosition(len);
        tp.setCharacterAttributes(aset, false);
        tp.replaceSelection(msg);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {
                    new TextPaneTest();
                }
            });
    }
} 
```

这是输出：

![文本窗格](https://i.stack.imgur.com/4zjkK.png)

# java - Facebook，setReadPermissions 和 setPublishPermissions

> ID：15727842
> 
> 赞同：6
> 
> 时间：2013-03-31T08:43:03.173
> 
> 标签：java, android, facebook, facebook-graph-api, permissions

嘿，我正在尝试使用两种不同类型的权限。

当我只使用一个时，一切正常。

但是当我同时使用它们时，应用程序崩溃了：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setReadPermissions(Arrays.asList("friends_games_activity"));
authButton.setPublishPermissions(Arrays.asList("publish_actions")); 
```

如何毫无问题地添加 2 个权限（`friends_games_activity`和）？`publish_actions`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T09:47:02.953

您不能在 SDK 3.0 中同时拥有这两种权限，您需要将它们分开。您可以先打开会话进行阅读，获取您想要的内容，然后再 openForPublish。

> 注意：在新的 SDK 中，您可以仅在首次打开会话时请求读取权限。在用户实际向 Facebook 发布操作之前，您不应提示用户授予发布权限。这增加了用户的信任，也增加了用户选择从你的应用发布故事的可能性。要请求更多权限，请使用 Session.openForRead 或 Session.openForPublish。

您需要调用 clearPermissions。它在这里描述 [http://developers.facebook.com/docs/reference/android/3.0/LoginButton/#setReadPermissions(List)](http://developers.facebook.com/docs/reference/android/3.0/LoginButton/#setReadPermissions(List))

# iphone - iPhone：选择时更改单元格布局

> ID：15727844
> 
> 赞同：1
> 
> 时间：2013-03-31T08:43:22.440
> 
> 标签：iphone, uitableview

应用程序显示项目列表。每个项目都可以以基本或扩展模式呈现。扩展模式提供有关该项目的更多详细信息，并具有由独立 XIB 文件定义的自己的布局。可以选择多个项目。必须在选择/取消选择项目时切换布局。

我正在使用 UITableView 实现列表。问题是单元格只有在滚动出来然后回到屏幕时才会被重绘。我该如何解决？

这是我现在正在做的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
    cell = [tableView dequeueReusableCellWithIdentifier:ExtendedCellId];
}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
    cell = [tableView dequeueReusableCellWithIdentifier:CollapsedCellId];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:44:17.970

尝试`[cell setNeedsDisplay]`在修改后添加 - 这将强制它在下一个绘制周期中重新绘制。

编辑：如果高度发生变化，我认为您必须重新加载表格视图或那些单元格。修改单元格后，您可以尝试基本的更新调用：

```
 [tableView beginUpdates];
 [tableView endUpdates]; 
```

如果这不起作用，您可能想尝试在`beginUpdates`and`endUpdates`调用之间进行特定的重新加载 -

```
 [tableView beginUpdates];
 [tableView reloadRowsAtIndexPaths:<indexPath here> withRowAnimation:UITableViewRowAnimationNone];
 [tableView endUpdates]; 
```

# ruby-on-rails - 如何在“显示”页面和第二个较大的部分中呈现小部分

> ID：15727846
> 
> 赞同：1
> 
> 时间：2013-03-31T08:43:59.913
> 
> 标签：ruby-on-rails

我有一个带有帖子的简单博客应用程序。

我使用部分`_post.html.erb`来呈现我的索引页面中的帖子。

`_post.html.erb`有一个 div`class=submission_details`与我的`show`操作中使用的相同。我怎样才能将该部分分割出来，以便我可以在`_post.html.erb`部分和`show.html.erb`页面中使用它？

**post_controller.rb**

```
def index
  @posts = Post.all
end

def show
  @post = Post.find(params[:id])
end 
```

**帖子/index.html.erb**

```
<%= render @posts %> 
```

**帖子/_post.html.erb**

```
<%= post.title %>
<div class="submission_details">
  <%= time_ago_in_words(post.created_at) %>
  <span id="submission_details_<%= post.id %>">
  submitted by <%= link_to "#{post.user.name} (#{post.user.reputation_for(:points).to_i})", post.user %>
  </span>
</div> 
```

**帖子/show.html.erb**

```
<%= @post.title %>
<%= @post.content %>
<div class="submission_details">
  <%= time_ago_in_words(@post.created_at) %>
  <span id="submission_details_<%= @post.id %>">
  submitted by <%= link_to "#{@post.user.name} (#{@post.user.reputation_for(:points).to_i})", @post.user %>
  </span>
</div> 
```

我尝试制作`shared/submission_details`如下部分：

**共享/_submission_details.html.erb**

```
 <%= time_ago_in_words(@post.created_at) %>
  <span id="submission_details_<%= @post.id %>">
  submitted by <%= link_to "#{@post.user.name} (#{@post.user.reputation_for(:points).to_i})", @post.user %>
  </span> 
```

`show`这由 为动作渲染`render 'shared/submission_details'`，但在动作中给了我 nil `index`。如何为操作正确定义 @post `index`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:50:21.180

在局部上，您可以定义一个**局部变量**，当您渲染局部时，正确的语法是：

```
render(partial: 'post_information', locals: { post: @post } 
```

但这可以缩写为

```
render('post_information', post: @post) 
```

那是 show 动作，在部分**_post.html.erb**的情况下，您的 post 实例不在变量**@post**上，而是在局部变量**post**上，因此您可以这样做：

```
render('post_information', post: post) 
```

**帖子/index.html.erb**

```
<%= render @posts %> 
```

**帖子/_post.html.erb**

```
<%= post.title %>
<div class="submission_details">
  <%= render 'post_information', post: post %>
</div> 
```

**帖子/show.html.erb**

```
<%= @post.title %>
<%= @post.content %>
<div class="submission_details">
  <%= render 'post_information', post: @post %>
</div> 
```

**帖子/_post_information.html.erb**

```
<%= time_ago_in_words(post.created_at) %>
<span id="submission_details_<%= post.id %>">
submitted by <%= link_to "#{post.user.name} (#{post.user.reputation_for(:points).to_i})", post.user %>
</span> 
```

# java - Java EE alternatives for rake db:migrate

> ID：15727851
> 
> 赞同：2
> 
> 时间：2013-03-31T08:44:58.760
> 
> 标签：java, mysql, jakarta-ee, database-migration

:) Sorry for my English :(

I'm not a user of RoR, but I saw how friend of me programs :). He generates special files, that tracks changes in his database. After, He runs rake db:migrate and special utility applies changes to a database.

I study Java EE and I want to have the same functionality, because I need to develop my applications on different computers (at home, at my girl home, on a laptop, etc), so I wanna to have same files (with db changes) in VCS directory and apply them on different machines.

I know, that liquibase has that functionality, but I don't want to write XML-files for liquibase manually :(. For DB design I wanna use NetBeans or MySQL Workbench (or similar tools).

If it matters, I use Java EE 6, Netbeans 7.3, MySQL, Windows, MySQL Workbench. What is the best way for me to solve my problem? :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:11:08.320

看看飞路。这是一个简单的数据库迁移工具/库。你用纯 SQL 编写迁移。与 liquibase 相比，它更简单（普通 SQL 与 XML），但灵活性稍差一些（您依赖于特定的 SQL 方言）。[http://flywaydb.org/](http://flywaydb.org/)

至于生成模式差异 - （您对另一个答案的评论）我使用 Liquibase 的 diff 命令。它会打印出两个模式之间的差异，但是，它不会打印出从一个模式迁移到另一个模式所需的实际 SQL。虽然可以使用 Liquibase 生成 SQL，但它是两步过程（当我第一次尝试使用 Liquibase 时让我感到困惑）。您需要首先生成 changelog xml（使用 diffChangeLog 命令），然后将 changelog xml 转换为实际的 SQL 命令（使用 updateSQL 命令）。

在我需要数据库迁移的项目中，我使用 FlyWay 进行实际迁移，休眠在开发过程中从实体类生成模式，如果在开发阶段对模式有很多更改，我使用 liquibase 生成模式差异我申请了 FlyWay 迁移脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:47:11.407

you could use [MyBatis Schema Migrations](https://code.google.com/p/mybatis/wiki/Migration), it's easy and powerful.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T16:44:37.877

有点晚了，但万一这对某人有用：数据库迁移通常是一个强大的概念，可以（几乎）毫不费力地将开发数据库更改应用于多个目标，例如登台和生产。但是，对于您描述的场景，我会考虑使用`mysqldump -ujohn.smith -pv3ryS3curE dbname > relative/or/absolute/path/to/dump.sql`. 导入是一个问题`mysql -ujohn.smith -pv3ryS3curE dbname < dump.sql`。这可以使用`|`POSIX 兼容平台上的管道通过 SSH 完成。如果您为此编写一个脚本，您可以设置一个命令，其中一个命令将您的最新转储放到 Dropbox 中，另一个脚本从同一个 Dropbox 或您可能用于在计算机之间传输文件的任何其他内容进行更新。或者在云中运行您的数据库服务器，并为您的所有计算机提供相同的数据库（受持续互联网连接的影响）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-10T16:35:22.967

[liquibase](https://www.liquibase.org/)是一个开源的 java 数据库迁移工具。你提到不想写 xml，Liquibase 支持 yml。

# php - How can I name my controller 'New' in codeigniter

> ID：15727857
> 
> 赞同：0
> 
> 时间：2013-03-31T08:46:04.100
> 
> 标签：php, function, codeigniter, variables, constants

I'm trying to name my controller 'New' in codeigniter but get the following error

```
Parse error: syntax error, unexpected T_NEW, expecting T_STRING in
C:\site\application\controllers\new.php on line 3 
```

(although New doesn't seem to be reserved according to CI user guide - > [https://www.codeigniter.com/user_guide/general/reserved_names.html](https://www.codeigniter.com/user_guide/general/reserved_names.html))

Any workaround would be appreciated. tx!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:13:56.420

`new`是 php 中的保留关键字。您不能将其用作类名。

请参阅[保留关键字](http://php.net/manual/en/reserved.keywords.php)列表。

可能的重复问题[为什么我在 PHP 中收到意外的 T_NEW 错误？](https://stackoverflow.com/questions/9575590/why-am-i-getting-an-unexpected-t-new-error-in-php)

# scheme - 球拍图的语法

> ID：15727861
> 
> 赞同：4
> 
> 时间：2013-03-31T08:46:20.197
> 
> 标签：scheme, racket

我正在尝试遵循有关如何使用 2D 绘图[的球拍文档。](http://docs.racket-lang.org/plot/intro.html#%28part._.Plotting_2.D_.Graphs%29 "球拍文档")不幸的是，我似乎无法让它工作（可能很简单）

我的代码是：

```
#lang racket
(require plot)
(plot (function sin (-pi) pi #:label "y = sin(x)")) 
```

错误是：

```
compile: unbound identifier in module in: function 
```

我是球拍/口齿不清的新手，所以如果很明显，我只是没有意识到。我也尝试过插入`(require racket/gui/base)`，`(plot-new-window? #t)`但那些似乎也没有成功。

我在 Ubuntu 12.04 上使用球拍 v5.1.3。我没有使用 Racket 博士。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T11:50:08.213

问题是您正在阅读 5.3.3 的文档，但安装了 5.1.3。

在 5.3.3 版本中，程序：

```
#lang racket
(require plot)
(plot (function sin (- pi) pi #:label "y = sin(x)")) 
```

按预期工作。

[从http://racket-lang.org/download/](http://racket-lang.org/download/)获取新版本 或查看旧文档：http: [//download.racket-lang.org/docs/5.1.3/html/plot/plot .html?q=情节](http://download.racket-lang.org/docs/5.1.3/html/plot/plot.html?q=plot)

# java - 缺少退货声明错误

> ID：15727863
> 
> 赞同：1
> 
> 时间：2013-03-31T08:46:50.863
> 
> 标签：java, if-statement, return, runtime-error

以下 Java 不起作用，因为它缺少 return 语句。我不知道出了什么问题。有任何想法吗？

```
public String setusername(String u) {    
    if (username.length() > usernameLimit) {
        System.out.println("overlimit");
    } else {
        return this.username = u;
    }
} 
```

即使我取出字符串 u 它也会给出相同的错误，如果我添加 int usernameLimit 它也会给出相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:52:50.220

您的代码使用分支（如果循环）。从编译器的角度来看，两个分支，即 if 和 else 块都可能被执行。但返回仅在 else 块中。因此编译器抱怨缺少返回。

解决方案1：尝试将 return 也放入 If 块中（根据您的要求）

解决方案 2：将您的回报移出 If-Else 构造。您可以使用变量来指定返回值并在 if 或 else 中相应地填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:53:55.543

您的 return 语句位于 else 块中，因此编译器不知道运行时函数是否会返回某些内容。

将其更改为

```
public String setusername(String u) {
String result="overlimit";
if (username.length() <= usernameLimit) {
    this.username = u;
    result=u;
}
return result;
} 
```

应该可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T08:51:57.927

```
if (username.length() > usernameLimit) {
    System.out.println("overlimit");
    ////////////return what??? 
 } 
```

问题来了，方法需要return语句的时候`username.length() > usernameLimit`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T09:27:58.447

假设这个问题与您之前的问题[Java String Limit](https://stackoverflow.com/questions/15727434/java-string-limit)相关，您可能不需要在 setusername() 方法中使用 return 语句。

```
import java.io.*;

public class UserNameTest {
    private static final int USER_NAME_LIMIT=6; // constants should be all UPPERCASE_WITH_UNDERSCORES

    private String userName; // variable names should be in camelCase

    private String getUserName() {
        // normally you write a getter method to obtain value
        return userName;
    }

    private void setUserName(String u) {
        // setter method would not require a return statement,
        //   if all you trying to do is to validate and set the new value.

        if (u.length() > USER_NAME_LIMIT) { // validate length of new value
            // good practice to be descriptive when giving error messages
            System.out.println("Given user name [" + u + "] is longer than valid limit [" + USER_NAME_LIMIT + "]");
        } else {
            this.userName = u;
        }
    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String inputString = br.readLine();

        UserNameTest q1 = new UserNameTest();
        q1.setUserName(inputString); // set user name retrieved through input

        System.out.println("New user name: " + q1.getUserName()); // get user name for other operations
        // if setUserName() above rejected the input value due to length exceeding, here you will see 'null'
        //   as we have not set user name to anything beforehand
    }

} 
```

阅读并了解编码标准以及[http://geosoft.no/development/javastyle.html](http://geosoft.no/development/javastyle.html)

# c++ - C++11“枚举类型”(17.5.2.1.2)

> ID：15727869
> 
> 赞同：10
> 
> 时间：2013-03-31T08:47:35.910
> 
> 标签：c++, c++11, enums

引用 C++11 标准（17.5.2.1.2 枚举类型）：

> 1 第 27 条中定义的几种类型是*枚举类型*。每个枚举类型都可以实现为枚举或枚举的同义词（例如整数类型，具有常量整数值 (3.9.1)）。
> 
> 2 枚举类型*enumerated*可以写成：

```
enum enumerated { V0 , V1 , V2 , V3 , ..... };
static const enumerated C0 (V0 );
static const enumerated C1 (V1 );
static const enumerated C2 (V2 );
static const enumerated C3 (V3 );
..... 
```

> 3 此处，名称 C0、C1 等表示此特定枚举类型的*枚举元素*。所有这些元素都有不同的价值。

此类“枚举类型”之一是 ios_base 类（27.5.3 ios_base 类）中的“seekdir”：

```
// 27.5.3.1.5 seekdir
typedef T4 seekdir;
static constexpr fmtflags beg = unspecified ;
static constexpr fmtflags cur = unspecified ;
static constexpr fmtflags end = unspecified ; 
```

和

> 27.5.3.1.5 类型 ios_base::seekdir [ios::seekdir]

```
typedef T4 seekdir; 
```

> 1 seekdir 类型是枚举类型 (17.5.2.1.2)，包含表 126 中指示的元素。

因此，需要这些静态 const 和 constexpr 成员的唯一原因是因为“枚举类型”允许实现为整数类型（即当*枚举*为 int 时，我们需要定义常量来代替枚举器），对吧？

**问题 1**。如果库供应商决定将 seekdir 实现为枚举，他是否还需要为枚举值定义静态常量？

**问题 2**。为什么首先允许“枚举类型”实现为整数类型？即，当没有这些静态常量成员的枚举实现（并且在 C++11 中枚举可以具有任何底层整数类型）时，可能比整数类型实现更糟糕？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T10:42:54.437

编写标准时，强类型枚举不可用，而 plain 的问题`enum`是，它们的内部类型未指定，并且可能*会*根据编译器开关而改变。

对于`seekdir`，它可能是`int`或`byte`（例如），两者都是有效的表示。GCC 有一个 ( `--short-enums`or `-fshort-enums`) 的命令行选项，默认情况下它会将`int`所有`enum`s 用作最小类型，但如果使用该选项，它将使用可以包含所有值的最小类型。

这意味着如果`enum`在函数签名中使用实数，则符号可能会更改，您需要重新编译所有内容。这就是标准允许其他选项的原因，标准库实现控制类型很重要的原因，这就是允许使用特定整数类型的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T11:27:17.267

需要枚举类型值的对象的最初原因是您可以获取它们的地址。这总是让我觉得很傻，但在标准化的早期阶段有相当多的过度设计。

# lamp - php会话变量在不同页面之间不起作用

> ID：15727872
> 
> 赞同：2
> 
> 时间：2013-03-31T08:48:13.520
> 
> 标签：lamp, php

我在 php 中创建了一个带有会话的简单登录页面，它在我的 LAMP 上运行良好。但是今天我不小心将我的 /var 目录的权限更改为 chmod 777 /var 之类的东西，尽管我将其权限改回了 chmod 755 /var 。但是现在当我再次尝试访问我的登录页面时，我无法登录。再次浏览代码时，我发现我的 SESSION 变量在传输到不同页面时没有保留其数据。我在每个页面（在页面顶部）都使用 session_start() ，而且我检查了 session_id() ，它在每个页面中都是相同的。我在 linux 环境（Ubuntu 12.04）中使用 Apache 和 Mysql。我的程序代码：

index2.php：

```
<?php 
session_start();

if(isset($_SESSION['username'])) 
{
header('Location: securepage.php');
}
?>

<html>
<head>
    <title>Secure LOGIN</title>
</head> 
<body>
    <h2>User Login </h2>
    <form method="POST" action="login.php">
        <br>UserName : <input type= "text" name="username">
        <br>Password : <input type="password" name="password">
        <br><input type="submit" value="Login">
    </form>

</body>
</html> 
```

登录.php：

```
<?php
session_start();
include('load.php');
$obj = new load();
$conn = $obj-> connect();

if(!conn)
{
exit('Connection cannot be established');

}

mysqli_select_db($conn,'login') or die('Cannot be established');
$query = "SELECT * FROM users WHERE uname='".$_POST['username']."' and pass =  '".md5($_POST['password'])."';";

$login = mysqli_query($conn,$query);

if(mysqli_num_rows($login) == 1)
{
$_SESSION['username'] = $_POST['username'];
 header('Location: securepage.php');
}
else
{
header('Location: index2.php');
}

?> 
```

安全页面.php：

```
<?php

session_start();

if (!isset($_SESSION['username'])) {
header('Location: index2.php');
}

?>
<html>

<head>
<title>Secured Page</title>
</head>

<body>

<p>This is secured page with session: <b><?php echo $_SESSION['username']; ?></b>
<br>You can put your restricted information here.</p>
</body>

</html> 
```

在**echo $_SESSION['username']**上，在 login.php 中的 if(mysqli_num_rows) 语句之后，它正确显示了**username**的值，但是在 securepage.php 中的**print_r($_SESSION)**上，它显示了一个空数组。这段代码直到昨天都运行良好，我不知道为什么它现在不起作用。
我什至创建了两个简单的测试页面来检查我的 SESSION 变量，但即使这样也不起作用。尽管 $_SESSION 中的值已设置，但它不会转移到第二页。我没有触及我的 LAMP 的任何配置设置。

[我的 phpinfo() 截图](http://i.stack.imgur.com/0crzg.png)
[var direcroty 的权限](http://i.stack.imgur.com/WJnHd.png)

请告诉我哪里出错了。

我的**error.log**内容：

```
PHP Warning:  session_start(): open(/var/lib/php5/sess_mm4ja22k9n0r4gv512imc07ur0, O_RDWR) failed: Permission denied (13) in /var/www/public/index2.php on line 2, referer: http://localhost/index2.php

PHP Warning:  Unknown: open(/var/lib/php5/sess_mm4ja22k9n0r4gv512imc07ur0, O_RDWR) failed: Permission denied (13) in Unknown on line 0, referer: http://localhost/index2.php

PHP Warning:  Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/var/lib/php5) in Unknown on line 0, referer: http://localhost/index2.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:08:08.350

这只是一个建议，因为我不确定是什么导致了问题。我犯了一个类似的权限相关错误，导致我的所有脚本都无法正常工作，而没有任何错误被登录`/var/log/apache2/error.log`。我做了以下事情来解决这个问题：

（在终端）

```
:$ chmod 775 -R /var/www
:$ chown <user-name>:www-data -R /var/www 
```

请注意，`sudo`如果您不是`root`用户，则必须预先添加。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:47:59.873

你提到你做了`chmod 777`然后回到`755`目录`/var`（甚至可能是子目录）。你的问题是在那之后开始的，所以它似乎是一个权限问题。

该`/var`目录包含`www/`包含您的 Web 文档的文件夹，但也包含其他文件夹（`log`、`tmp`等），如您的屏幕截图所示。您知道您的 php 配置 (php.ini) 将您的 php 会话文件保存在哪里吗？检查[session.save_path](http://www.php.net/manual/en/session.configuration.php#ini.session.save-path)行只是为了确定。

默认是`/tmp`，但也许你正在使用`/var/tmp`or `/var/lib/php5`。问题是，该`/var/tmp`文件夹是`chmod 777`默认的，所以你可以恢复到那个文件夹。

祝你好运 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:48:23.447

感谢您提供有用的建议。发现我的**/var/lib**没有组写入权限。使用以下方法解决了问题：

**须藤 chmod 775 -R /var/lib**

谢谢

# r - 在 fa() 之后访问加载数据

> ID：15727877
> 
> 赞同：0
> 
> 时间：2013-03-31T08:49:21.763
> 
> 标签：r

我有以下代码：

```
> require(psych)
> require(MASS)
> pa <- fa(Harman74.cor$cov,4,fm="pa" ,rotate="none")
> ld <- loadings(pa)

> str(ld)

loadings [1:24, 1:4] 0.598 0.372 0.42 0.484 0.688 ...
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:24] "VisualPerception" "Cubes" "PaperFormBoard" "Flags" ...
  ..$ : chr [1:4] "PA1" "PA2" "PA3" "PA4" 
```

如何直接访问`loadings`4 个向量或 4x24 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:29:30.630

问题不清楚。`ld`是一流的`loadings`。您可以使用`unclass`将其转换为`matrix`.

```
unclass(ld)
                             PA1         PA2          PA3          PA4
VisualPerception       0.5982838  0.02973076  0.379881903 -0.216752604
Cubes                  0.3721564 -0.03009154  0.261549017 -0.148551734
PaperFormBoard         0.4195414 -0.11770506  0.364650207 -0.125225346
Flags                  0.4840396 -0.10757757  0.260532547 -0.190122114
GeneralInformation     0.6880672 -0.29797186 -0.274215767 -0.037571574
........ 
```

但是结果是不一样的，因为`print.loadings`做了一些格式化和矩阵的总结。

# html - Nested tables in Internet Explorer

> ID：15727878
> 
> 赞同：-1
> 
> 时间：2013-03-31T08:49:29.773
> 
> 标签：html, internet-explorer, html-table

I'm building a web site and I used nested tables, and the code works fine in Chrome, and Firefox and doesn't really show up in the way I want in Internet Explorer.

Below is the code for the table:

```
<table width=940>
    <tr>
        <td>
            <img src="../../images/fix_header.jpg" alt="ローンシミュレーション"  width="500"   height="30"/>

                <table width="500px" cellPadding="10px">
                    <tr>
                        <td>金額</td> 
                        <td><input type="text" name="amount" id="amount" size="20"　>円&lt;/td>
                    </tr>

                    <tr>
                        <td>期間</td>
                        <td>

                            <input type="radio"  name="bonus" value="1x"/>
                            1年
                            <input type="radio"  name="bonus" value="3x"
                             />
                            ３年
                            <input type="radio"  name="bonus" value="5x"
                            />
                            5年
                        </td>

                    </tr>   

                    <tr>
                        <td></td>
                        <td align="right">
                        <input type="reset" value="リセット" style="width: 150px; height: 40px;">
                        <input type="submit" value="計算" onclick="calculate()" style="width: 150px; height: 40px;">
                        </td>
                    </tr>

                </table >

            <br>
            <table width="500px" >

            <tr>
                <td>
                </td>
                <th >
                    1年&lt;br>＜単利型＞
                </th>
                <th>
                    3年&lt;br>＜半年複利型＞
                </th>
                <th>
                    5年&lt;br>＜半年複利型＞
                </th>
            </tr>

            <tr>
                <th >
                    受取利息<br>
                    （税引後）
                </th>
                <td>
                    <p id="intrest1" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
                <td>
                    <p id="intrest2" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
                <td>
                    <p id="intrest3" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
            </tr>

            <tr>
                <th >
                    全額<br>
                    （利息込）

                </th>
                <td>
                    <p id="tot1" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
                <td>
                    <p id="tot2" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
                <td>
                    <p id="tot3" style="color:#E64040;margin-bottom:20px; font-weight:bold; font-size:20px; " >0円&lt;/p>
                </td>
            </tr>
            </form>

            </table> 
```

I hope this information is sufficient; I'll try to explain from words how it appears:

In Internet Explorer the single row `<tr>` displays in two lines one below another where I want to display in one row in one line.

I hope you get what I'm saying... I really appreciate if any one can help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:04:10.170

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:57:13.300

包含您的代码的[W3C 验证器](http://validator.w3.org/)提要引发了几个错误，超出了这些错误

> 看到文件结尾并且有打开的元素。
> 
> 未闭合的元素表。(桌宽=940)

您应该在首先更正错误后重试。

# java - 令牌“开始”的语法错误。非常简单的代码

> ID：15727881
> 
> 赞同：0
> 
> 时间：2013-03-31T08:50:35.253
> 
> 标签：java, android

我正在尝试学习一些 java/android 开发，但我真的很努力学习基础知识。

我的代码看起来像这样。

```
package com.example.app_james3;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    MediaPlayer media=MediaPlayer.create(this, R.raw.button);
    media.start();  // THIS LINE IS GIVING ERROR: Syntax error on token "start",    Identifier expected after this token

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

任何人都可以提供建议以使这条非常简单的线路正常工作吗？我复制了其他代码，所以我相当确定语法是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:53:00.097

在 Java 中，所有语句（任何未声明变量或类的语句）都必须放在方法或构造函数中。`media.start();`是一个声明。因此，你应该把它放在一个方法中。

因为`media.start();`应该在接近启动时间执行，所以把它放在`onCreate`：

```
MediaPlayer media;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Your initialization code goes here:
    media = MediaPlayer.create(this, R.raw.button);
    media.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:56:35.677

您必须在活动中声明变量，但是当您在函数内部或**setcontentview**之后从 xml 初始化值时。您还必须阅读以下链接：- [为什么 onClickListener 在 onCreate 方法之外不起作用？](https://stackoverflow.com/questions/8321197/why-does-onclicklistener-not-work-outside-of-oncreate-method)

[什么时候调用 Application 的 onCreate() 方法？](https://stackoverflow.com/questions/7686482/when-does-applications-oncreate-method-is-called-on-android)

[什么是 onCreate(Bundle savedInstanceState)](https://stackoverflow.com/questions/10810418/whats-oncreatebundle-savedinstancestate)

```
public class MainActivity extends Activity { 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

MediaPlayer media=MediaPlayer.create(this, R.raw.button);
media.start();  // THIS LINE IS GIVING ERROR: Syntax error on token "start",    Identifier expected after this token
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

# asp.net - 如何将html5数据属性添加到asp.net mvc中的Html.TextBox？

> ID：15727882
> 
> 赞同：13
> 
> 时间：2013-03-31T08:51:17.080
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

`Html.TextBox`语法是：

```
public static MvcHtmlString TextBox(this HtmlHelper htmlHelper, string name, 
       object value, object htmlAttributes); 
```

所以，我把我的数据属性放在`htmlAttributes`. 我试过了

```
@Html.TextBox("date",Model.Date,new { data-myid="aaa"}) 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-31T08:56:23.753

尝试使用下划线`_`字符。

```
@Html.TextBox("date",Model.Date,new { data_myid="aaa"}) 
```

运行时会将其转换为`data-myid`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:04:36.717

对于更友好的语法，您可以尝试：[http ://buildmvc.codeplex.com/](http://buildmvc.codeplex.com/)

```
@Html.BuildTextBox("date", Model.Date).Data("myid", "aaa") 
```

# java - Java 相当于 Python 'in' - 用于集合成员资格测试？

> ID：15727885
> 
> 赞同：13
> 
> 时间：2013-03-31T08:51:36.587
> 
> 标签：java, python, set, membership

我想检查一个是否`item`存在于`item set`.

我想在**java**中这样做：

```
def is_item_in_set(item, item_set):
    return item in item_set 
```

我设法写了这个：

```
boolean isItemInSet(String item, String[] itemSet) {
    for(int i =0; i < itemSet.length; ++i) {
        if(item.equals(itemSet[i])) {
            return true;
        }
    }
    return false;
} 
```

有没有更好的方法来测试Java 中的**集合成员资格？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T08:55:52.733

你不能用一个直接的数组来做到这一点，但你可以[`Set<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)通过调用[`.contains`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains%28java.lang.Object%29). 如果你觉得你会做很多`isItemInSet`调用，考虑使用`Set`s 而不是数组——你会更开心。

例如，使用 a[`HashSet<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)进行`isItemInSet`O(1) 操作（平均而言）。集插入和删除也同样快。事实上，`HashSet<T>`Java 中的 a 本质上与 Python 相同`set()`（类似的底层概念和性能特征）——您将看到在集合上多次调用查询、插入或删除时速度有了很大提高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-25T10:46:59.987

随着 Java 9（及更高版本）即将到来并使用 @nneonneo 指定的 Set，我们可以在一行中实现成员资格测试，如下所示：

```
Set.of(item1, item2, item3).contains(reqItem) 
```

# validation - 我的下拉列表中的淘汰赛验证不起作用

> ID：15727888
> 
> 赞同：2
> 
> 时间：2013-03-31T08:51:44.033
> 
> 标签：validation, knockout.js, breeze

我使用 durandal 模板 + 微风处理一个 asp.net mvc 项目。

我想在我的视图上定义验证逻辑以添加/编辑操作。

到目前为止，它适用于文本，从数据库填充下拉列表：当元素不包含任何数据时，由于剔除验证，元素被标记为红色。

**但它不适用于从简单列表填充的下拉列表。**

填充列表的元素来自枚举：

```
public class Transport
{
    [Key]
    int id { get; set; }
    ...
    [Required]
    public EnumCategory Category { get; set; }
}

public enum EnumCategory
{
    Cat1,
    Cat2,
    Cat3
} 
```

**第一个问题：**我不知道是否可以从我的模型（服务器端）检索枚举以在客户端使用它？现在，我创建了一个数组客户端来填充我的下拉列表：

```
var categories = [
    { id: 1, description: "Cat1" },
    { id: 2, description: "Cat2" },
    { id: 3, description: "Cat3" }]; 
```

**第二个问题：**当显示我的视图时，如果类别下拉列表已经包含一些数据，则验证有效（我的意思是如果用户清除下拉列表，该字段将标记为红色）。但是，如果显示视图时类别下拉列表不包含任何数据，则下拉列表不会标记为红色。

验证失败时我所做的是更改元素的背景颜色（如果无效）（感谢 css 'input-validation-error' >> red color）。

```
<select data-bind="options: $root.categories,
                   optionsText: 'description',
                   optionsValue: 'id',
                   optionsCaption: 'Choose...',
                   value: category,
                   validationOptions: { errorElementClass: 'input-validation-error' },
                   valueUpdate: 'afterkeydown'">
</select> 
```

有人知道为什么我的下拉列表中的验证不起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T11:09:00.147

也偶然发现了这个，经过反复试验，我发现了以下内容：

验证失败是因为 optionsCaption 使用 undefined 作为值。

您的模型显然使用了 '' （在我的情况下它是 null），因为 null != undefined 它以某种方式全部崩溃了。

知道了这一点，有两种解决方案：

1.  在模型上将值设置为未定义（在您的示例 transport.category(undefined) 中）并像您习惯的那样使用 optionsCaption
2.  自己添加一个自定义的空 selectItem 并跳过 optionsCaption （您使用的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:54:27.520

当您说“清除下拉菜单”时，当只有三个选项时，如何不选择一个选项。您能否将第一个下拉项目设为“选择一个项目...”，以便您知道总会有一个项目。如果下拉索引为 0，则显示您的红色错误消息。

如果 selectedindex 为 0 或 itemcount 为 0，另一种选择是显示红色错误消息。

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:38:46.527

最后，我通过在我的类别列表中添加一个 id 为空的元素来使其工作：

```
var categories = [
    { id: '', description: '--Choose--' },
    { id: 1, description: 'Non classé' },
    { id: 2, description: 'Non nucléaire' },
    { id: 3, description: 'Classe II irradié' },
    { id: 4, description: 'Classe III' }]; 
```

我不知道为什么，只是简单地添加 optionsCaption: '--Choose--' 对验证不起作用。我的意思是这个元素显示在我的下拉列表中，但验证过程不会将其视为验证错误。

我明确地必须在我的列表中添加一个元素。然后，当在我的下拉列表中选择此元素时，它被标记为红色。

# javascript - Html5 game with Dashcode

> ID：15727890
> 
> 赞同：0
> 
> 时间：2013-03-31T08:51:50.720
> 
> 标签：javascript, html, dashcode

I'm new to Dashcode and I got quick question here:

Say I have a Html5 game (javascript) already, is it possible to integrate it into Dashcode (I don't know if I have myself understood) ~ I know I can add widget made with Dashcode into a ebook (using iBooks author) so it will be cool if I can add a "html5 widget game" into the book ~

Hope someone familiar with Dashcode can help me here, thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:06:33.750

我终于得到了这个工作，这很容易。

只需创建一个文件夹，将需要的info.plist和Default.png复制进去~

然后将所有游戏文件和资源复制进去并将launch html重命名为main.html

最后将文件夹重命名为 xxxx.wdgt 就是这样:)

# java - String buffer in java

> ID：15727895
> 
> 赞同：1
> 
> 时间：2013-03-31T08:52:12.910
> 
> 标签：java, string

```
import java.lang.*;
class hello
{
    public static void main(String args[])
    {
         StringBuffer s3 = new StringBuffer("R");
         String s1 = "Rahul";
         char ch = s1.charAt(0);
         System.out.println(s3.toString().equals(ch));
    }
} 
```

Output should be TRUE but it is showing false. Please help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T08:53:50.427

如果类型不同，大多数 ovverridings`equals`不会返回 true。

String 的`equals`实现是这样的：

```
1012    public boolean equals(Object anObject) {
1013        if (this == anObject) {
1014            return true;
1015        }
1016        if (anObject instanceof String) {
               ...
1030        }
1031        return false;
1032    } 
```

在这里，您正在比较 a`String`和 a `Character`（由于自动装箱，因为需要 Object）。

您可以做的是确保将字符串与字符串进行比较：

```
 System.out.println(s3.toString().equals(""+ch)); 
```

或者只是比较字符，你知道`ch`是一个字符：

```
 System.out.println(s3.charAt(0)==ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T08:53:52.353

它与 StringBuffer 无关，这是因为您将**字符串**“R”与**字符**“R”进行比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T08:54:46.660

您正在将字符串`"R"`与根据 Java 不相等的字符进行比较`'R'`，因为类型不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T08:58:33.730

您正在检查`String`(s2.toString()) 和`Character`(ch) 之间的相等性。所以，它返回 false 。对于相等性检查，您应该首先将`char`其类型化为`String`. 您可以使用以下代码：

```
System.out.println(s3.toString().equals(String.valueOf(ch))); 
```

# c# - c# 使用复选框列表

> ID：15727896
> 
> 赞同：-5
> 
> 时间：2013-03-31T08:52:29.380
> 
> 标签：c#, bots, checkboxlist

我有一个脚本（简单的登录机器人），现在可以在所有服务器上测试我的站点主 sychel，因为一些服务器已从池中取出我想做一个所有服务器的复选框列表，并且该机器人将仅在检查服务器名称，所以我希望检查的服务器将或仅将数字插入到更容易的数组或字符串中。我是 c# 中的菜鸟，所以如果你能举出例子，那就不好了。
label1.Text = string.Format("XXX{0}", i.ToString());

```
 try
        {
            //Random rnd = new Random();
            //int passwordnum = rnd.Next(1, 100);

            switch (step)
            {
                case 0:

                    this.webBrowser1.Navigate(string.Format("http://servername{0}.mysite.com:2323/mysite-sign-up/", i.ToString()));
                    step++;

                    break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:46:20.560

发现它 int i = 0; 列表服务器 = new List();

```
 i = checkedListBox1.CheckedItems.Count;

        foreach (object itemChecked in checkedListBox1.CheckedItems)
        {
            servers.Add(itemChecked.ToString()); 
```

# java - Java regex：如何在模式匹配中重用消耗的字符？

> ID：15727909
> 
> 赞同：6
> 
> 时间：2013-03-31T08:55:00.047
> 
> 标签：java, regex

有没有办法在模式匹配中重用源的消耗字符？

例如，假设我想找到一个带有正则表达式的模式，`(a+b+|b+a+)` 即多个 a 后跟多个 b 或反之亦然。

假设输入是`aaaabbbaaaaab`

`aaaabbb`然后使用正则表达式的输出将是`aaaaab`

我怎样才能得到输出

```
aaaabbb
bbbaaaaa
aaaaab 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T09:05:15.430

试试这个方法

```
String data = "aaaabbbaaaaab";
Matcher m = Pattern.compile("(?=(a+b+|b+a+))(^|(?<=a)b|(?<=b)a)").matcher(data);
while(m.find())
    System.out.println(m.group(1)); 
```

这个正则表达式使用[环顾](http://www.regular-expressions.info/lookaround.html)机制，会`(a+b+|b+a+)`发现

*   `^`存在于输入的开头
*   从`b`预测开始`a`
*   从`a`预测开始`b`。

输出：

```
aaaabbb
bbbaaaaa
aaaaab 
```

* * *

> 在这个正`^`则表达式中基本上需要？

是的，没有`^`这个正则表达式将不会捕获`aaaabbb`放置在输入开始处。

如果我在这个正则表达式匹配`(^|(?<=a)b|(?<=b)a)`后不添加`(?=(a+b+|b+a+))`

```
aaaabbb
aaabbb
aabbb
abbb
bbbaaaaa
bbaaaaa
baaaaa
aaaaab
aaaab
aaab
aab
ab 
```

所以我需要将此结果限制为仅以它之前的结果开头的结果`a`（`b`但不包括`b`在匹配中 - 所以向后看是完美的）并且`b`由`a`.

但是我们不要忘记`a`或`b`放在字符串的开头并且没有任何东西可以预测。要包括它们，我们可以使用`^`.

* * *

也许用这个正则表达式来展示这个想法会更容易

`(?=(a+b+|b+a+))((?<=^|a)b|(?<=^|b)a)`.

*   `(?<=^|a)b`将匹配`b`放置在字符串开头或`a`之前的字符串
*   `(?<=^|b)a`将匹配`a`放置在字符串开头或`b`之前的字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T09:05:43.213

你可以用lookbehind来模拟这个：

```
((?<=a)b+|(?<=b)a+) 
```

这输出

```
bbb aaaaa b 
```

# batch-file - 在 Windows 批处理中提示时输入用户名密码

> ID：15727910
> 
> 赞同：2
> 
> 时间：2013-03-31T08:55:09.900
> 
> 标签：batch-file, echo

我需要在 Windows 中为一个实用程序编写批处理文件。但是每次我从命令提示符运行时，该实用程序都会询问用户名和密码。我想在命令提示符中提示时传递用户名和密码。现在命令运行后，用户名和密码的问题出现了 qs 2 个单独的问题，例如： enter uname: enter pwd:

这成为一个问题，因为仅将 %1 和 %2 作为参数传递并没有帮助，因为 uname 和 pwd 是作为单独的 qs 来的。请帮我在windows中写一批……我对windows prog完全陌生……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:30:34.690

您是否检查过该实用程序：

*   没有用于输入用户名/密码的任何命令行参数？
*   没有其他输入用户名密码的机制，比如[使用环境变量](https://stackoverflow.com/questions/9759503/automating-a-ms-dos-batch-file-when-password-has-to-be-entered-manually)？

我假设您检查了所有这些，除了手动输入用户名和密码之外别无选择。

在这种情况下，您应该看看[AutoHotkey](http://www.autohotkey.com/)。
它用于创建可以自动化 UI 输入的脚本，特别是运行需要键盘和鼠标控制的应用程序。

还有一个名为[SendKeys.net](http://sendkeysnet.blogspot.com)的小实用程序用于批处理文件。
虽然没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:08:31.017

此任务可以通过 Windows 中的 VBS 完成。您可以使用 SendKeys() 来模拟键盘操作。它的工作方式类似于 Linux 中的命令“expect”。BAT 在这里帮不了你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:19:39.170

雷诺是对的，命令行参数将是最好的解决方案。查看您的实用程序手册或尝试实用程序.exe /？

以下解决方案可能有效（或可能无效）将您的答案写入文件（例如“credentials.txt”）（确保它仅包含两行）

```
myusername
mypassword 
```

然后尝试

```
myutility < credentials.txt 
```

**出于安全原因，如果我**编写了该实用程序，这将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-10T06:20:57.353

您可以调用此批处理-HTA-VBScript 混合文件（GUI 登录提示）：

```
<!-- :

  :: LoginGUI.bat | Wasif Hasan | Sep 2020
  :: This is a Batch-HTA-VBScript hybrid that will show a GUI window to login
  :: Save it as a .bat file and run it in your other batch files
  :: and returns the username and password as a result (to STDOUT) (in "username;password" format)
  :: If you enter no password in the dialog it will show an error message box and persist 
  :: Arguments: "BatchFilePath" "prompt (To Show beside the password box)" BoolAllowBlankUsername BoolAllowBlankPassword
  :: Default prompt is "password"

  @echo off & setlocal EnableDelayedExpansion
  if "%*"=="" (
  for /f "tokens=* delims=" %%a in ('echo "Password:" False False ^| mshta.exe "%~f0"') do set "pass=%%a"
  ) else (
  for /f "tokens=* delims=" %%a in ('echo %* ^| mshta.exe "%~f0"') do set "pass=%%a"
  )
  echo !pass! & exit /b 0

-->

<!DOCTYPE html>
<html>
<head>
<title>Password box</title>
<hta:application
  applicationName="Password box"
  border="thin"
  maximizeButton="no"
  minimizeButton="no"
  showinTaskbar="no"
  scroll="no"
  singleInstance="yes"
  contextMenu="no"
  selection="no"
/>
<script type="text/vbscript">
  Sub Window_OnLoad()
    Dim fso2, strPrompt, dblQuote
    window.resizeTo 320,180
    Set fso2 = CreateObject("Scripting.FileSystemObject").GetStandardStream(0)
    strPrompt = fso2.ReadLine
    dblQuote = Chr(34)
    strPromptX = Split(strPrompt," ")
    strPrompt = strPromptX(0)
    strPrompt = Replace(strPrompt, dblQuote, "")
    Document.All.prompt.innerHTML = strPrompt
    document.All.username.Focus
  End Sub
  Sub Validate() 
    Dim fso, GetPassword, GetUsername
    GetPassword = Document.All.Password.Value
    GetUsername = Document.All.username.Value
    If GetPassword = "" Then 
      If Not allowBlankPassword = True Then
        MsgBox "Please enter a password!",48,"Password box"
      End If
    ElseIf GetUsername = "" Then
      If Not allowBlankUsername = True Then
        MsgBox "Please enter a username!",48,"Password box"
      End If 
    Else
      Set fso = CreateObject("Scripting.FileSystemObject").GetStandardStream(1)
      window.Close(fso.write(GetUsername & ";" & GetPassword))
    End If
  End Sub
</script>
</head>
<body style="background-color:lightblue;font-family:Tahoma;">
<div align="center">
<span id="username_l">Username:</span>
<input type="text" size="20" id="username" /><br /><br />
<span id="prompt">Password:</span>
<input type="password" size="20" id="Password" />
<p><input type="button" value="Login" onClick="Validate()" /></p>
</div>
</body>
</html> 
```

# ruby - 在 Windows localhost 上运行 Jekyll 的问题

> ID：15727911
> 
> 赞同：1
> 
> 时间：2013-03-31T08:55:11.533
> 
> 标签：ruby, windows, gem, jekyll

首先，我是 Ruby 新手并使用 localhost。

我正在使用：Windows 8 Pro，Ruby is installed to `C:\Ruby200`，Ruby Devkit is installed to `C:\RubyDEV`，`config.yml`也正确配置到正确的目录。

宝石规格似乎存储在`C:\username\.gem`

最后，`Jekyll gem`根据命令提示符完美安装。`PATH`还设置了正确的 bin。

`jekyll --server`运行时说去'localhost：4000'，但似乎没有完美设置。它最初在尝试访问时给了我一个 Forbidden 错误`/`，但现在它似乎根本不想加载。

我查阅了一些教程。

*   [http://www.testically.org/2012/02/02/installing-jekyll-and-ruby-on-windows/](http://www.testically.org/2012/02/02/installing-jekyll-and-ruby-on-windows/)
*   [http://zolomon.com/tutorial/2012/02/23/setting-up-jekyll-on-windows-7/](http://zolomon.com/tutorial/2012/02/23/setting-up-jekyll-on-windows-7/)
*   [http://mahoney.eu/2011/12/12/installing-jekyll-on-windows/#.UVfxGle_Owg](http://mahoney.eu/2011/12/12/installing-jekyll-on-windows/#.UVfxGle_Owg)
*   [http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html](http://www.madhur.co.in/blog/2011/09/01/runningjekyllwindows.html)

我没有安装任何额外的依赖项，根据我所听到的，这似乎是可选的，以替换 Textile 等。

我不知道我做错了什么。

任何帮助是极大的赞赏。

切换到 1.9.3 后的最新错误

```
C:\RubyDEV>jekyll --server
WARNING: Could not read configuration. Using defaults (and options).
        No such file or directory - C:/RubyDEV/_config.yml
Building site: C:/RubyDEV -> C:/RubyDEV/_site
C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1371:in `initialize': Permission denied -
 C:/RubyDEV/_site/bin/bashbug (Errno::EACCES)
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1371:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1371:in `block in copy_file'

        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1370:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1370:in `copy_file'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:477:in `copy_file'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:396:in `block in cp'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1515:in `block in fu_each_sr
c_dest'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1531:in `fu_each_src_dest0'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1513:in `fu_each_src_dest'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:395:in `cp'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/lib/jekyll/static
_file.rb:58:in `write'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/lib/jekyll/site.r
b:256:in `block in write'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/lib/jekyll/site.r
b:255:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/lib/jekyll/site.r
b:255:in `write'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/lib/jekyll/site.r
b:43:in `process'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.1/bin/jekyll:264:in
 `<top (required)>'
        from C:/Ruby193/bin/jekyll:23:in `load'
        from C:/Ruby193/bin/jekyll:23:in `<main>'

C:\RubyDEV> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:07:28.200

许多 gem 还没有为 Ruby 2.0 准备好，特别是因为 Windows 需要预编译的二进制文件。

[RubyInstaller 列表中的RubyInstaller 2.0.0-p0 公告](https://groups.google.com/d/topic/rubyinstaller/mg5ailNICvM/discussion)中提到了这一点，为了答案的完整性，将在此处复制它：

> *   现有的预编译 gem 不兼容 Ruby 2.0
> 
> Ruby 2.0 引入了 ABI 破坏，这意味着用以前的 1.9.3 编译的 C 扩展将适用于 Ruby 2.0。
> 
> 不要在现有的 Ruby 1.9.3 之上安装 Ruby 2.0，或者尝试使用已编译的扩展。
> 
> 您将需要强制编译这些 gem：
> 
> ```
> gem install <name> --platform=ruby 
> ```
> 
> 这将要求您具有编译该 gem 所需的额外依赖项。查看 gem 文档的要求。

要解决您当前的情况，您需要卸载`yajl-ruby`并强制安装：

```
gem install yajl-ruby --platform=ruby 
```

考虑到像 RDiscount 这样的其他 gem 在这个版本上不能正常工作（还），如果你改用 Ruby 1.9.3 可能会更好。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:49:55.913

我有一个类似的安装：Win7 / Ruby 2.0。Jekyll 服务器运行良好，但是：我安装了最新的 Jekyll 版本（来自 github：gem 尚未发布），rdiscount 也是如此（请参阅问题：[https ://github.com/rtomayko/rdiscount/issues /91](https://github.com/rtomayko/rdiscount/issues/91)，用于 ruby​​ 2.0 的新 gem 2.0.7.2 将在下几天发布）。

如果我想要另一个降价库（maruku，kramdown ...），我仍然遇到一些问题，不得不暂时使用 rdiscount。你有没有检查你有好的文件`_config.yml`，而不仅仅是`config.yml`？

...似乎您在 DevKit 安装的同一目录中启动了 jekyll 站点？出于测试目的，只需创建一个新目录（即 c:\www\my_site），从 github 下载示例 Jekyll 站点（即[https://github.com/plusjade/jekyll-bootstrap/archive/master.zip](https://github.com/plusjade/jekyll-bootstrap/archive/master.zip)并解压缩在目录中，在该目录中运行 jekyll（_config.yml 在哪里）。

# android - 密钥库证书的 SHA-1 指纹

> ID：15727912
> 
> 赞同：576
> 
> 时间：2013-03-31T08:55:13.833
> 
> 标签：android, google-maps, google-plus, sha1, android-keystore

获取SHA-1指纹的方法和获取指纹的方法一样吗？以前，我正在运行此命令：

![运行 keytool.exe 的 Windows 命令提示符](https://i.stack.imgur.com/SRb3A.jpg)

我不清楚我得到的结果是否是 SHA-1 指纹。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1060
> 
> 时间：2013-03-31T08:59:06.633

按照[本](http://android-er.blogspot.in/2012/12/displaying-sha1-certificate-fingerprint.html)教程为 Google Map v2 创建 SHA1 指纹

对于调试模式：

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

对于发布模式：

```
keytool -list -v -keystore {keystore_name} -alias {alias_name} 
```

例子：

```
keytool -list -v -keystore C:\Users\MG\Desktop\test.jks -alias test 
```

> 在 Windows 上，如果**找不到 keytool 命令**，请转到您安装的 JDK 目录，例如`<YourJDKPath>\Java\jdk1.8.0_231\bin\`，打开命令行并尝试上述命令进行调试/发布模式。

使用 SHA1 或 SHA-256 的另一种方法`./gradlew signingReport`

有关更多详细信息，请访问 [使用 Gradle 的签名报告](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report)

* * *

## 回答 #2

> 赞同：728
> 
> 时间：2015-11-02T14:09:12.923

如果您使用的是 android studio，请使用简单的步骤

1.  运行你的项目
2.  点击 Gradle 菜单
3.  展开 Gradle`Tasks`树
4.  双击`android`->`signingReport`看看魔法
5.  它会告诉你运行选项卡上的一切

[![在此处输入图像描述](https://i.stack.imgur.com/z7rka.png)](https://i.stack.imgur.com/z7rka.png)

如果 Android Studio < 2.2 ，则**运行选项卡**下的结果
[![在此处输入图像描述](https://i.stack.imgur.com/cS6i5.png)](https://i.stack.imgur.com/cS6i5.png)

**从 android studio 2.2**
结果将在运行控制台下可用，但使用突出显示的切换按钮

[![在此处输入图像描述](https://i.stack.imgur.com/o49hL.png)](https://i.stack.imgur.com/o49hL.png)

或者
第二种方法是
在 android studio New -> Google Maps Activity 中创建新项目

[![在此处输入图像描述](https://i.stack.imgur.com/63q63.png)](https://i.stack.imgur.com/63q63.png)

然后打开 google_maps_api.xml xml 文件，如图所示，您将看到您的 SHA 密钥

[![在此处输入图像描述](https://i.stack.imgur.com/aj317.png)](https://i.stack.imgur.com/aj317.png)

* * *

## 回答 #3

> 赞同：205
> 
> 时间：2016-02-10T07:04:12.273

**在 android studio 中获取 SHA1 密钥的最简单方法（调试和发布模式）**

1.  打开`Android Studio`
2.  打开您的项目
3.  单击**Gradle**（从**右侧面板**，您将看到**Gradle Bar**）
4.  单击**Refresh**（从 Gradle Bar 单击 Refresh，您将看到 List Gradle 项目的脚本）
5.  单击您的项目（您的项目名称表单列表）
6.  单击任务/Android
7.  双击`signingReport`（您将在运行栏中获得`SHA1`和）`MD5`

**如果您使用的是新的 Android Studio，它会在顶部显示执行时间，点击切换任务执行模式，您将获得 SHA-1 密钥。检查第二和第三参考图像。**

![查看图片了解详情](https://i.stack.imgur.com/wVAUh.png) [![在此处输入图像描述](https://i.stack.imgur.com/poaop.png)](https://i.stack.imgur.com/poaop.png)[![在此处输入图像描述](https://i.stack.imgur.com/k2Tb1.png)](https://i.stack.imgur.com/k2Tb1.png)

**为发布模式生成 SHA-1**

1-首先在您的 gradle 中添加密钥库配置[如何在 gradle 中添加配置](https://stackoverflow.com/questions/25001479/app-release-unsigned-apk-is-not-signed/34964168#34964168)。

2-在 gradle 更改构建变体中添加配置后。[![在此处输入图像描述](https://i.stack.imgur.com/T2znj.png)](https://i.stack.imgur.com/T2znj.png)

3-然后按照上述程序，您将获得用于发布模式的 SHA-1。

4-检查图像。[![在此处输入图像描述](https://i.stack.imgur.com/ewSTI.png)](https://i.stack.imgur.com/ewSTI.png)

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2014-04-09T05:50:14.060

通过 cmd 转到您的 java bin 目录：

**C:\Program Files\Java\jdk1.7.0_25\bin>**

现在在您的 cmd 中输入以下命令：

```
keytool -list -v -keystore "c:\users\your_user_name\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2014-01-27T07:57:08.617

如果您使用的是 eclipse，请转到： *Window->Preferences->Android->Build* 您会在那里找到您正在寻找的内容。

[![在此处输入图像描述](https://i.stack.imgur.com/hYWBA.png)](https://i.stack.imgur.com/hYWBA.png)

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2017-02-22T12:02:04.567

[![![去最左边[![][1][1]](https://i.stack.imgur.com/GWycf.png)](https://i.stack.imgur.com/GWycf.png)

请参考以下图片并获取 SHA-1 密钥 [![刷新](https://i.stack.imgur.com/aEyh7.png)](https://i.stack.imgur.com/aEyh7.png)

[![在底部的控制台面板中查看](https://i.stack.imgur.com/pupNh.png)](https://i.stack.imgur.com/pupNh.png)

* * *

## 回答 #7

> 赞同：39
> 
> 时间：2013-04-02T05:46:17.357

运行以下命令获取您的 sha1：`keytool -v -list -keystore "< debug.keystore path >"`
如果您不知道 的路径`debug.keystore`，您可以`debug.keystore`通过检查找到您的路径`windows-->preferences-->android-->build`

我准备了一步一步的教程来展示如何在模拟器（android 4.2.2）上使用google map android v2
看看我的博客：[http ://umut.tekguc.info/en/content/google-android- map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

* * *

## 回答 #8

> 赞同：38
> 
> 时间：2014-08-07T13:18:44.067

我看到很多关于这个问题的帖子，所以我会保持简单+示例。

要获取 ClientID 的 SHA1 以使用 Google+ 登录和更多操作：

**一般形式：**

```
keytool -list -v -keystore <your_keystore_full_path> -alias <your_alias_name> 
```

**对于调试，替换为您的 debug.keystore 路径，例如：**

```
keytool -list -v -keystore C:\Users\DAVID\.android\debug.keystore -alias androiddebugkey 
```

密码：安卓

**对于 Release，请替换为您的密钥库路径和别名密码，例如：**

```
keytool -list -v -keystore C:\ProjectsData\keystore\my-release-key.keystore -alias alias_name 
```

密码：您的别名密码。

* * *

## 回答 #9

> 赞同：35
> 
> 时间：2018-09-27T21:00:16.093

这是对我有用的逐步过程。

首先运行应用程序，然后按照以下步骤操作（也显示在屏幕截图中）

1.  点击签名报告
2.  打开 gradle 控制台对话框
3.  它应该显示您的 SHA-1 证书编号

[![在此处输入图像描述](https://i.stack.imgur.com/ThJpx.png)](https://i.stack.imgur.com/ThJpx.png)

* * *

## 回答 #10

> 赞同：25
> 
> 时间：2018-02-02T17:08:40.047

在您的应用中使用*Google Play 应用签名功能*和 Google API 集成？

1.  如果您使用的是 Google Play App Signing，请不要忘记 Google API 凭据所需的发布签名证书指纹不是您通过此方法从您的应用获取的常规上传签名密钥 (SHA-1)：

[![上传签名证书](https://i.stack.imgur.com/cN5rV.png)](https://i.stack.imgur.com/cN5rV.png)

2.  您只能从 Google Play 控制台的应用签名页面获取您的版本 SHA-1，如下所示：-

如果您使用 Google Play 应用签名，Google 会重新签署您的应用。这就是 Google Play App Signing 给出您的签名证书指纹的方式，如下所示：

[![应用签名页面 - Google Play 控制台](https://i.stack.imgur.com/SD8PP.png)](https://i.stack.imgur.com/SD8PP.png)

阅读更多[如果使用“Google Play 应用签名”，如何获得版本 SHA-1（签名证书指纹）](https://publishingfirstandroidapp.blogspot.com/2017/07/google-play-app-signing-how-to-get.html)

* * *

## 回答 #11

> 赞同：21
> 
> 时间：2021-06-15T09:02:50.970

## 我有一个简单的答案。**要在新的 Android Studio 版本中找到 SH1，请执行以下简单步骤**

**步骤 1**进入设置，也可以按**ctrl + alt + s**

**步骤 2**转到 Experimental，然后**取消**勾选名为**Do not build Gradle task during Gradle sync**的选项，然后按 ok

**第 3 步**转到**文件**，然后选择**同步项目与 Gradle 文件的选项**

**第4步**单击面板右侧的**Gradle ，然后单击****Tasks**，然后单击**android**，然后双击**signingReport**

## 然后你得到 SH1 指纹

[![在此处输入图像描述](https://i.stack.imgur.com/2zfeU.png)](https://i.stack.imgur.com/2zfeU.png)

* * *

## 回答 #12

> 赞同：20
> 
> 时间：2014-11-12T19:51:06.273

从 Debug Keystore 我们可以得到**SHA1**值`Eclipse`。从菜单访问： `Window`-> `Preferences`-> `Android`->`Build`

但它不适用于制作`Keystore`。 ![在此处输入图像描述](https://i.stack.imgur.com/JpCn9.png)

因此，要从生产密钥库中获取**SHA1**值，请转到： `Android Tools`-> `Export Signed Application Package`。按照流程签署您的 apk，SHA1 将显示为证书。

![在此处输入图像描述](https://i.stack.imgur.com/Sm2cE.png)

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2016-07-21T06:02:46.353

> keytool 是一个密钥和证书管理实用程序。它允许用户使用数字签名管理他们自己的公钥/私钥对和相关证书，以用于自我认证（用户向其他用户/服务认证他/她自己）或数据完整性和认证服务。

**对于 Windows**

```
keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

**其他**

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

Android 上的授权使用**SHA1 指纹和包名称**来识别您的应用，而不是**客户端 ID 和客户端密码**。

[![在此处输入图像描述](https://i.stack.imgur.com/DtpzH.png)](https://i.stack.imgur.com/DtpzH.png)

> [http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html)

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2021-06-07T06:34:10.240

对于***Android Studio 4.2***及更新版本，请按照以下步骤生成***SHA Key***。这些图片中给出了步骤。

***脚步：-***

**1）**点击**gradle**。**Android Studio**的右上角。正如你在这张照片中看到的那样。

[![第1步](https://i.stack.imgur.com/6EHfL.png)](https://i.stack.imgur.com/6EHfL.png)

**2)**现在点击如下图所示的**图标。**将打开一个新的**可搜索窗口/屏幕**。

[![SHA2](https://i.stack.imgur.com/eeB3n.png)](https://i.stack.imgur.com/eeB3n.png)

**3)**现在输入***gradle signingreport***并按**Enter** 开始生成**SHA KEY**，如下图所示。

[![沙3](https://i.stack.imgur.com/1pkVW.png)](https://i.stack.imgur.com/1pkVW.png)

**4）** **您的**SHA 密钥**将生成，如图所示。使用这些步骤，您可以在 Android Studio 4.2 中生成 SHA KEY。**

[![sha4](https://i.stack.imgur.com/BoeGz.png)](https://i.stack.imgur.com/BoeGz.png)

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2016-02-29T19:07:24.757

在 Gnu/Linux 中

**第一的**

您需要 key.jks，例如在我的情况下，此文件位于 /Desktop/Keys 的文件夹中

```
/Desktop/Keys/key.jks 
```

**第二**

`cd /usr/lib/jvm/java-1.7.0-openjdk-amd64`

现在你需要执行这个命令

```
keytool -list -v -keystore /PATH/file.jks -alias YourAlias -storepass *** -keypass *** 
```

替换此字段

```
-keystore
-alias
-storepass
-keypass 
```

例如

```
 keytool -list -v -keystore /home/david/Desktop/Keys/key.jks -alias MyAlias -storepass 456 -keypass 123 
```

[![在此处输入图像描述](https://i.stack.imgur.com/uXxfR.jpg)](https://i.stack.imgur.com/uXxfR.jpg)

**祝你好运！！**

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2014-01-28T12:35:50.187

首先有相同的`.jar`文件，在`fb-sdk android-support-v4.jar`.
然后使用以下命令生成`SHA1`密钥：

```
PackageInfo info;
try {

    info = getPackageManager().getPackageInfo(
        "com.example.worldmission", PackageManager.GET_SIGNATURES);

    for (Signature signature : info.signatures) {
        MessageDigest md;
        md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        String something = new String(Base64.encode(md.digest(), 0));
        Log.e("Hash key", something);
        System.out.println("Hash key" + something);
    }

} catch (NameNotFoundException e1) {
    Log.e("name not found", e1.toString());
} catch (NoSuchAlgorithmException e) {
    Log.e("no such an algorithm", e.toString());
} catch (Exception e) {
    Log.e("exception", e.toString());
} 
```

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2016-02-09T04:36:59.320

**所有步骤的最佳方式：**

**对于发布密钥库 SHA1 密钥**：

1.  打开命令提示符
2.  `C:\Users\hiren.patel>cd..`
3.  `C:\Users>cd..`
4.  `C:\>cd "Program Files"`
5.  `C:\Program Files>cd Java`
6.  `C:\Program Files\Java>cd jdk_version_code`
7.  `C:\Program Files\Java\jdk_version_code>cd bin`
8.  `C:\Program Files\Java\jdk_version_code\bin>keytool -list -v -keystore "D:\Hiren Data\My Root Folder\My Project Folder\keystore_title.jks" -alias my_alias_name -storepass my_store_password -keypass my_key_password`

**替换**下面的东西：

1.  `jdk_version_code`
2.  `D:\Hiren Data\My Root Folder\My Project Folder\keystore_title.jks`
3.  `my_alias_name`
4.  `my_store_password`
5.  `my_key_password`

**完毕**

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2019-05-24T07:08:27.667

[![在此处输入图像描述](https://i.stack.imgur.com/szyeb.png)](https://i.stack.imgur.com/szyeb.png)

**右侧 Gradle --> 签署项目获取所有密钥**

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2020-06-12T11:16:17.057

**第 1 步：**首先在 Windows 电脑中找到**JDK 的** **bin文件夹。**见下图。

我的是 ：

```
C:\Program Files\Java\jdk1.8.0_131\bin 
```

[![在此处输入图像描述](https://i.stack.imgur.com/okxEj.png)](https://i.stack.imgur.com/okxEj.png)

第 2 步：现在通过在 Windows 10 搜索栏中键入**“cmd”来搜索****命令提示符。**然后以**管理员**模式打开**命令提示符。**见下图：

 ******[![在此处输入图像描述](https://i.stack.imgur.com/ACTDu.png)](https://i.stack.imgur.com/ACTDu.png)

**第 3 步：**现在复制此路径并将其键入命令提示符

```
 C:\Program Files\Java\jdk1.8.0_131\bin 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Yq9jx.png)](https://i.stack.imgur.com/Yq9jx.png)

在命令提示符中：

```
cd C:\Program Files\Java\jdk1.8.0_131\bin 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ofsQS.jpg)](https://i.stack.imgur.com/ofsQS.jpg)

按下**Enter**按钮后，您将进入 bin 文件夹。

[![在此处输入图像描述](https://i.stack.imgur.com/k1NzH.jpg)](https://i.stack.imgur.com/k1NzH.jpg)

您的设置已完成。现在为发布模式生成 SHA1 密钥。

**释放 SHA1 密钥：**

```
keytool -list -v -keystore C:\Users\Turzo\Desktop\earninglearning.keystore -alias turzo -storepass 12345678 -keypass 12345678 
```

[![在此处输入图像描述](https://i.stack.imgur.com/sKj2r.png)](https://i.stack.imgur.com/sKj2r.png)

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2016-07-14T08:40:30.367

如果您使用的是 Android Studio IDE，那么您可以一键获得 SHA1 对您的所有构建变体具有价值。

在 Gradle Projects 窗口下 >**选择 Root Project** > **signingReport** >**双击**

[![文件导航](https://i.stack.imgur.com/cHLTv.png)](https://i.stack.imgur.com/cHLTv.png)

下一个

[![打开运行窗口](https://i.stack.imgur.com/uzW61.png)](https://i.stack.imgur.com/uzW61.png)

转到变体：**发布**以发布

转到变体：**调试**调试

[http://devdeeds.com/create-sha1-key-using-android-studio/](http://devdeeds.com/create-sha1-key-using-android-studio/)

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2017-05-20T05:35:25.853

//获取SHA1的最简单方法

//将以下命令添加到您的终端并按Enter

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2014-08-03T15:06:41.503

您可以通过*Eclipse*获取任何工作区的*MD5*和*SHA1*指纹。 `Window>Preference>Android>Build`

 ** * *

## 回答 #23

> 赞同：6
> 
> 时间：2017-02-08T08:04:23.530

在 Windows 中打开命令提示符并转到以下文件夹。

C:\Program Files\Java\jdk1.7.0_05\bin

使用命令`cd <next directory name>`将目录更改为下一个。使用命令`cd ..`将目录更改为 Prev

现在按原样键入以下命令：

```
keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2017-12-30T07:25:33.210

除了[Lokesh Tiwar 的回答](https://stackoverflow.com/a/33479550/3849039)

对于发布版本，在 gradle 中添加以下内容：

```
android {

defaultConfig{
//Goes here
}

    signingConfigs {
        release {
            storeFile file("PATH TO THE KEY_STORE FILE")
            storePassword "PASSWORD"
            keyAlias "ALIAS_NAME"
            keyPassword "KEY_PASSWORD"
        }
    }
buildTypes {
        release {
            zipAlignEnabled true
            minifyEnabled false
            signingConfig signingConfigs.release
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

} 
```

现在像 Lokesh's Answer 中运行的 signingReport 也会显示发布版本的 SHA 1 和 MD5 密钥。

[![样本](https://i.stack.imgur.com/bnoLs.png)](https://i.stack.imgur.com/bnoLs.png)

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2020-03-28T07:50:35.163

此解决方案适用于 android studio 3.5 版本：

1.  在 Android Studio 中打开您的项目。
2.  单击右侧的 Gradle 选项卡。
3.  会看到两件事，一是我们的项目（根）和应用程序。
4.  在您的情况下选择我们的项目，它可能是您的应用程序。
5.  右键单击项目并刷新它。
6.  然后单击项目下拉按钮。
7.  单击将在其中看到 android 文件夹的任务。
8.  双击signingReport，将在运行控制台中看到详细信息。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2016-11-15T11:33:14.633

如果您使用的是 android studio，请使用简单的步骤：

*   运行你的项目

*   点击 Gradle 菜单

*   展开 Gradle 任务树

*   点击android->signingReport

[![在此处输入图像描述](https://i.stack.imgur.com/3QcBI.png)](https://i.stack.imgur.com/3QcBI.png) 如果没有显示（android studio 2.2）那么

### `Toggle tasks execution/text mode`从运行栏中单击

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2019-02-20T16:47:59.467

我在使用命令打开时遇到问题

```
[keytool -list -v -keystore C:\Users\MG\Desktop\test.jks -alias test] 
```

因此，我下载[https://sourceforge.net/projects/portecle/](https://sourceforge.net/projects/portecle/)。然后从 jar 程序中打开 .jks 文件。它将向您显示所有相关信息

[![节目截图](https://i.stack.imgur.com/aX6o6.jpg)](https://i.stack.imgur.com/aX6o6.jpg)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2016-12-01T05:30:57.710

我正在使用 Ubuntu 12.0.4，并且在生成密钥库文件后，我已经以这种方式在命令提示符下获取证书指纹以用于发布密钥库，如果您在应用程序中使用谷歌地图，您可以将此密钥用于发布的应用程序，所以这个发布后可以在应用程序内正确显示地图，我在下面的命令提示符下得到了结果

```
administrator@user:~$ keytool -list -v -keystore /home/administrator/mykeystore/mykeystore.jks -alias myprojectalias

Enter keystore password:  ******

Alias name: myprojectalias

Creation date: 22 Apr, 2014

Entry type: PrivateKeyEntry

Certificate chain length: 1
Certificate[1]:
Owner: CN=xyz, OU= xyz, O= xyz, L= xyz, ST= xyz, C=91
Issuer: CN= xyz, OU= xyz, O= xyz, L= xyz, ST= xyz, C=91

Serial number: 7c4rwrfdff
Valid from: Fri Apr 22 11:59:55 IST 2014 until: Tue Apr 14 11:59:55 IST 2039

Certificate fingerprints:
     MD5:  95:A2:4B:3A:0D:40:23:FF:F1:F3:45:26:F5:1C:CE:86
     SHA1: DF:95:Y6:7B:D7:0C:CD:25:04:11:54:FA:40:A7:1F:C5:44:94:AB:90
     SHA276: 00:7E:B6:EC:55:2D:C6:C9:43:EE:8A:42:BB:5E:14:BB:33:FD:A4:A8:B8:5C:2A:DE:65:5C:A3:FE:C0:14:A8:02
     Signature algorithm name: SHA276withRSA
     Version: 2

Extensions: 

 ObjectId: 2.6.28.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 1E A1 57 F2 81 AR 57 D6   AC 54 65 89 E0 77 65 D9  ..W...Q..Tb..W6.
0010: 3B 38 9C E1 
```

在 Windows 平台上，我们可以通过以下方式获取调试模式的密钥库

```
C:\Program Files\Java\jdk1.8.0_102\bin>keytool -l
.android\debug.keystore -alias androiddebugkey -s
id
Alias name: androiddebugkey
Creation date: Oct 21, 2016
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: C=US, O=Android, CN=Android Debug
Issuer: C=US, O=Android, CN=Android Debug
Serial number: 1
Valid from: Fri Oct 21 00:50:00 IST 2016 until: S
Certificate fingerprints:
         MD5:  86:E3:2E:D7:0E:22:D6:23:2E:D8:E7:E
         SHA1: B4:6F:BE:13:AA:FF:E5:AB:58:20:A9:B
         SHA256: 15:88:E2:1E:42:6F:61:72:02:44:68
56:49:4C:32:D6:17:34:A6:7B:A5:A6
         Signature algorithm name: SHA1withRSA
```

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2017-12-11T19:54:33.877

如果您使用的是[Google Play App Signing](https://support.google.com/googleplay/android-developer/answer/7384423?hl=en)，而不是从密钥库获取 SHA，更简单的方法是转到 Google Play Console > Your app > Release Management > App signing 并查找您的上传证书。

![您获取此信息的页面的屏幕截图](https://i.stack.imgur.com/os2Z5.png)

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2019-10-26T17:33:32.347

如果您没有密钥库和别名，则可以使用此命令：

```
keytool -list -printcert -jarfile app.apk 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2020-07-08T12:35:56.610

如果您使用的是 React Native，则 debug.keystore 在 中`android/app`，但可能不在`~/.android`.

设置 debug.keystore 路径如下：

```
keytool -list -v -keystore {PROJECT_ROOT}/android/app/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

控制台将打印如下内容：

```
Alias name: androiddebugkey
Creation date: Jan 1, 2014
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=Android Debug, OU=Android, O=Unknown, L=Unknown, ST=Unknown, C=US
Issuer: CN=Android Debug, OU=Android, O=Unknown, L=Unknown, ST=Unknown, C=US
Serial number: 2==Serial Number==2
Valid from: Wed Jan 01 06:35:04 CST 2014 until: Wed May 01 06:35:04 CST 2052
Certificate fingerprints:
     SHA1: 5E:=========== SHA1 SIGNING KEY ===========:25
     SHA256: FA:============ SHA 256 ===================9C
Signature algorithm name: SHA1withRSA
Subject Public Key Algorithm: 2048-bit RSA key
Version: 3 
```

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2020-09-21T05:50:15.097

截至目前`Sept 2020`，如果您想获取 .keystore 证书的SHA **-1 指纹**`Release`。只需打开您的`Google Play Developer Console`并打开`App Signing`标签。

[![在此处输入图像描述](https://i.stack.imgur.com/gDTl4.png)](https://i.stack.imgur.com/gDTl4.png)

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2021-01-24T09:28:09.867

### 简单的方法 - 使用 Keystore 资源管理器

## 按照步骤

1.  下载密钥库资源管理器[下载链接](https://keystore-explorer.org/)
2.  安装密钥库资源管理器
3.  通过密钥库资源管理器打开密钥库
4.  输入密码
5.  单击您的密钥库名称
6.  然后您将获得 sha1 密钥

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2021-07-01T04:55:33.300

在最近更新的 Android Studio 4.2 中，我们无法获取文件：签名报告。因此，我们可以通过以下步骤再次获得它：

```
File -> Settings -> Experimental -> 
Now we need to uncheck the *do not build Gradle list during Gradle sync* ->
Click Ok -> now again go to File -> Click on *Sync Project with Gradle files* 
```

现在您可以关注其他答案了。

感谢@PapayaCoders Youtube 频道解决了这个问题。这是有关此问题[的视频链接。](https://www.youtube.com/watch?v=rfyongdas4k)

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2015-12-01T10:00:50.870

如果您使用的是 Android Studio，这非常简单。

创建一个新的 Google 地图活动，您可以看到如下图所示的 sha1 指纹。

[![新的谷歌地图活动](https://i.stack.imgur.com/beGpA.png)](https://i.stack.imgur.com/beGpA.png)

[![您可以在下图中看到 SHA1](https://i.stack.imgur.com/j32an.png)](https://i.stack.imgur.com/j32an.png)

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2022-01-08T12:54:47.510

在新更新中，只需转到`Android`文件夹并输入`./gradlew signingReport`

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2015-06-24T10:53:29.453

首先去jar文件复制keytool路径然后添加到系统路径然后运行..我希望这个工作..

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2016-07-04T10:17:50.820

对于本地用户，您可以轻松地从 android studio 获取 sha1，但对于现场用户，请查看以下网址：

[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash)

我们大多没有完成以下步骤，因此请检查 100% 正确的链接。

```
8) If you see in openssl Bin folder, you will get a file with the name of debug.txt 
```

9) 现在您可以重新启动命令提示符或使用现有的命令提示符

10）回到C盘并给出openssl Bin文件夹的路径

11）复制以下代码并粘贴

```
openssl sha1 -binary debug.txt > debug_sha.txt 
```

12) 你将在 openssl bin 文件夹中获得 debug_sha.txt

13）再次复制以下代码并粘贴

```
openssl base64 -in debug_sha.txt > debug_base64.txt 
```

14) 你将在 openssl bin 文件夹中获得 debug_base64.txt

15) 打开 debug_base64.txt 文件这是您的密钥哈希。

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2017-10-25T01:22:44.907

与您的用户一起尝试并通过

> keytool -list -v -keystore {jks 文件路径} -alias {keyname} -storepass {keypassword} -keypass {aliaspassword}

可执行程序

> keytool -list -v -keystore "E:\AndroidStudioProject\ParathaApp\key.jks" -alias key0 -storepass mks@1 -keypass golu@1

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2020-10-26T12:31:04.077

[![更改构建变体，然后您可以看到运行将导致错误的应用程序

您必须找到发布密钥的 SHA1 代码并在您的开发者控制台上输入它。（对我来说，开发者控制台是 firebase，有些人可能会使用不同的服务）查找 SHA1 代码。简单的方法是

Go to Build --- Select Build Variant - 在左侧选择“Release”作为构建变体 - 现在进入模块设置（或尝试运行项目，android studio会告诉你一个错误并点击修复错误按钮） --- 选择签名选项卡 --- 添加您的发布密钥和密码 -- 现在转到构建类型 -- 选择发布 -- 在签名配置上选择您的发布密钥配置 -- 现在运行您的项目 -- 现在运行您的签名报告 -- - 你可以在发布版本下找到 SHA1——在你的开发者控制台上输入那个 sha1 代码

[![在此处输入图像描述](https://i.stack.imgur.com/aIcQW.png)](https://i.stack.imgur.com/aIcQW.png)

[![在此处输入图像描述](https://i.stack.imgur.com/3vt6E.png)](https://i.stack.imgur.com/3vt6E.png)

[![在此处输入图像描述](https://i.stack.imgur.com/R4ICj.png)](https://i.stack.imgur.com/R4ICj.png)

[![就是这样](https://i.stack.imgur.com/qFB4w.png)](https://i.stack.imgur.com/qFB4w.png)

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2016-08-14T06:51:15.160

在 ANDROID STUDIO 执行以下步骤：

1.  单击 ANDROID STUDIO IDE 右侧的 Gradle 菜单
2.  展开任务树
3.  点击签约报告

您将能够在 IDE 底部看到签名*******

# c# - C# 日期选择器 24 小时日期和时间

> ID：15727918
> 
> 赞同：0
> 
> 时间：2013-03-31T08:56:28.977
> 
> 标签：c#

您好，我实际上在我的 c# 应用程序中使用 datepicker。为了获取日期和时间，我在属性中使用了以下设置：

```
format = custom
customformat = dd MM yyyy hh mm ss 
```

这很好用，但只显示 1 到 12 的小时分钟，我希望能够表示从 0 到 23 的小时。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:59:06.977

请尝试 HH 而不是 hh：

格式 = 自定义

customformat = dd MM yyyy HH mm ss

进一步阅读：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:00:05.743

尝试使用：

```
customformat = dd MM yyyy HH mm ss 
```

即使用大写字母H 而不是小写字母h。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:18:35.033

您可以根据需要设置自定义格式`dd MM yyyy HH mm ss`。您可以[在此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)查看自定义格式。`DateTime`同样，您可以使用[DateTime.TryParseExact()](http://msdn.microsoft.com/en-IN/library/system.datetime.tryparseexact.aspx)读取它的值：

```
 string strDateStarted = datetimepicker1.Value.Tostring();
 DateTime datDateStarted;
 DateTime.TryParseExact(strDateStarted, new string[] { "dd MM yyyy HH mm ss" }, System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out datDateStarted);
 Console.WriteLine(datDateStarted); 
```

# mysql - 重复 SQL 选择语句，直到满足条件

> ID：15727921
> 
> 赞同：3
> 
> 时间：2013-03-31T08:56:42.567
> 
> 标签：mysql, sql

请参见下图：要获取 Mazda 父类别的 ID，我将使用以下内容：

```
SELECT `parent_id` FROM `product_categories` WHERE `category_id` = 8
if result is not equal to 0 repeat select statement 
```

在满足条件之前循环 SQL 选择语句是否被认为是不好的做法？换句话说; 我应该重新设计产品类别表吗？

非常感谢您的建议。

![产品类别表screendump](https://i.stack.imgur.com/qZnqb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:05:34.587

是的，在这种情况下，可能需要添加另一个包含最顶层父级的字段。

这当然会引入冗余，因为信息已经在表中可用，但有时这是可以接受的性能折衷。

您将为最顶层的父级添加一个字段，如下所示：

```
category_id  category_name  parent_id  top_id
------------ -------------- ---------- -------
1            CARS_          0          1
4            smartphones    0          4
5            Japanese-      1          1
7            Lexus          5          1
8            Mazda          5          1
9            Korean         1          1
10           Toyota         5          1 
```

这可用于获取单个项目的最顶层父项，或获取属于同一父项的所有项目，这对于原始布局会更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:01:10.723

好吧，使用这种查询可能会使处理结果变得复杂。我强烈和个人使用`recursive functions`而不是查询循环。

更多信息：[什么是 PHP 中的递归函数？](https://stackoverflow.com/questions/2648968/what-is-a-recursive-function-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:45:43.173

试试这个（在 PosgreSQL 中有内置函数可以做同样的事情（`with recursive query`）

[https://dba.stackexchange.com/questions/7147/find-highest-level-of-a-hierarchical-field-with-vs-without-ctes/7161#7161](https://dba.stackexchange.com/questions/7147/find-highest-level-of-a-hierarchical-field-with-vs-without-ctes/7161#7161)

# html - 专注于一个元素会改变另一个元素的 CSS

> ID：15727923
> 
> 赞同：13
> 
> 时间：2013-03-31T08:56:52.790
> 
> 标签：html, css, focus

我想`Hdr_nav_search_box`在关注另一个元素时更改元素的颜色`Hdr_nav_search_input`。以下是代码： http: [//jsfiddle.net/FJAYk/4/](http://jsfiddle.net/FJAYk/4/)我不明白为什么这不起作用。

```
<input class="Hdr_nav_search_input" />
<div class="Hdr_nav_search_box" /><span>search for location....</span><i>for example: blah blah</i></div> 
```

-

```
.Hdr_nav_search_box{
padding: 0 5px;
margin: 7.5px 0;
width:300px;
height: 25px;
background: white;
 }
.Hdr_nav_search_input:focus .Hdr_nav_search_box{
color: #d4d4d4;
 }
.Hdr_nav_search_box span,.Hdr_nav_search_box i{
line-height: 25px;
color: gray;
}
.Hdr_nav_search_input{
padding: 0 5px;
margin: 7.5px 0;
border: 0;
z-index: 2;
position: absolute;
width:300px;
height: 25px;
background: transparent;    
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-31T09:03:36.047

你的风格有一些问题。首先，您选择该框的选择器不太正确。

```
.Hdr_nav_search_input:focus .Hdr_nav_search_box 
```

那就是应用选择所有`.Hdr_nav_search_box`它们是`.Hdr_nav_search_input`. 它实际上是一个兄弟，所以你想使用下一个兄弟选择器`+`：

```
.Hdr_nav_search_input:focus + .Hdr_nav_search_box 
```

* * *

其次，如果它正在工作，这个选择器将覆盖你的颜色变化。

```
.Hdr_nav_search_box span,.Hdr_nav_search_box i{
    ...
} 
```

你可以简单地使用

```
.Hdr_nav_search_box {
    ...
} 
```

* * *

这是一个演示以及我为使其正常工作而进行的样式更改。

[jsFiddle](http://jsfiddle.net/Tyriar/Y83q6/2/)

```
.Hdr_nav_search_input:focus + .Hdr_nav_search_box {
    color: #F00;
 }
.Hdr_nav_search_box {
    line-height: 25px;
    color: gray;
} 
```

# facebook - 获取 Facebook 状态的 like_info

> ID：15727927
> 
> 赞同：0
> 
> 时间：2013-03-31T08:58:12.853
> 
> 标签：facebook, facebook-graph-api, facebook-fql

使用 FB api，当我从中获取数据时，`/statuses`我会得到一个限制为 25 个的喜欢数组。我试图获得总的**like_count**，并试图避免在 like 数组中使用分页（因为它可以有很多我不需要的数据请求）。For `photos`and`links`我正在对获取var`photo`的`link`表使用 FQL 查询。`like_info`

但是，在状态表中没有这样的 var。有什么办法得到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:12:48.217

为什么不使用 FQL 请求来获取状态呢？

```
select message, type, updated_time, likes 
  from stream 
 where source_id=me() 
   and type=46
       LIMIT 100 
```

`type`代表故事的类型，其中 46 是状态更新。

该`likes`字段是一个包含`count`键的数组。你可以用那个。

* * *

**编辑：**好的，这第一个查询并没有真正盈利。

我现在建议你继续查询`graph.facebook.com/USER_ID/statuses`并自己计算喜欢的数量（将在 0 到 25 之间）。

如果您获得 25 个赞，则意味着该状态可能会有更多赞。对于此类状态，您将特别需要发出另一个请求以获取帖子的点赞数。你需要：

*   POSTID：`id`帖子的（看起来像`"id": "10200225192185456"`），
*   USERID：`id`用户的。

通过连接用下划线 ( `_`) 分隔的 USERID 和 POSTID，您将得到我们不再称为 a`POST_ID`而是`OBJECT_ID`. OBJECT_ID 类似于：1022369831_10200225192185456。您必须使用自己的语言自己构建对象 ID。

然后，您可以使用此 OBJECT_ID 查询 POST 表并获取有关状态的更完整信息。

```
graph.facebook.com/USERID_POSTID?fields=likes 
```

或者：

```
graph.facebook.com/OBJECT_ID?fields=likes 
```

该`likes`字段现在包含`count`信息。

# jsf-2 - 之间的区别 和普通的jsf命令按钮

> ID：15727933
> 
> 赞同：2
> 
> 时间：2013-03-31T08:59:35.610
> 
> 标签：jsf-2

早上好，我只想知道像这样验证 JSF 组件之间的区别：

```
<h:form id="register">

    <h:message for="RegisterGroupPanel" style="color:red;" />

    <h:panelGrid columns="3" id="RegisterGroupPanel">

        <f:event listener="#{user.validatePassword}" type="postValidate" /> // diff between that and normal <h:command>

        <h:outputLabel for="username" value="Username : " />
        <h:inputText id="username" value="#{user.username}" required="true"
            requiredMessage="Please enter username" />
        <h:message for="username" style="color: red;" />

        <h:outputLabel for="password" value="Password : " />
        <h:inputSecret id="password" value="#{user.password}" required="true"
            requiredMessage="Please enter password" />
        <h:message for="password" style="color: red;" />

        <h:outputLabel for="confirmPassword" value="Confirm password : " />
        <h:inputSecret id="confirmPassword" required="true"
            requiredMessage="Please enter confirm password" />
        <h:message for="confirmPassword" style="color: red;" />

    </h:panelGrid>

    <h:commandButton action="thanks" value="register" />

</h:form> 
```

在这里，我将动作放在按钮内并删除了`<f:event listener="#{user.validatePassword}" type="postValidate" />`

```
<h:form id="register">

    <h:message for="RegisterGroupPanel" style="color:red;" />

    <h:panelGrid columns="3" id="RegisterGroupPanel">

        <h:outputLabel for="username" value="Username : " />
        <h:inputText id="username" value="#{user.username}" required="true"
            requiredMessage="Please enter username" />
        <h:message for="username" style="color: red;" />

        <h:outputLabel for="password" value="Password : " />
        <h:inputSecret id="password" value="#{user.password}" required="true"
            requiredMessage="Please enter password" />
        <h:message for="password" style="color: red;" />

        <h:outputLabel for="confirmPassword" value="Confirm password : " />
        <h:inputSecret id="confirmPassword" required="true"
            requiredMessage="Please enter confirm password" />
        <h:message for="confirmPassword" style="color: red;" />

    </h:panelGrid>

    <h:commandButton action="#{user.validatePassword}" value="register" />

</h:form> 
```

这增加了什么额外的功能 `<f:event>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T12:40:14.197

提供了一种在给定事件发生时`<f:event>`调用给定`listener`方法的方法`type`。该`postValidate`事件在验证阶段结束时调用，在整个表单被处理、转换和验证之后，但**在**模型更新之前。因此，如果您打算根据提交的值执行工作，则需要通过`UIInput#getValue()`.

命令按钮的操作方法在调用应用程序阶段调用，在更新模型值阶段之后。因此，如果您需要提交的值，您可以直接访问 bean 属性。

请注意，这两种方法都没有提供一种在所需组件处自动显示消息的好方法，也没有在验证失败的情况下`FacesContext#validationFailed()`返回`true`。

从这两种方式来看`<f:event type="postValidate">`，如果正确实现了侦听器方法，则该方式在技术上是执行工作的最正确方式。验证应该在验证阶段而不是在调用应用程序阶段执行。

但是，更好的方法是使用专门用于验证多个字段是否相等的组件。JSF 实用程序库[OmniFaces](http://omnifaces.org)有这样一个组件：[`<o:validateEqual>`](http://showcase.omnifaces.org/validators/validateEqual). 在您的特定情况下，您可以按如下方式使用它：

```
<h:form id="register">
    <h:panelGrid columns="3" id="RegisterGroupPanel">
        <h:outputLabel for="username" value="Username : " />
        <h:inputText id="username" value="#{user.username}" required="true"
            requiredMessage="Please enter username" />
        <h:message for="username" style="color: red;" />

        <h:outputLabel for="password" value="Password : " />
        <h:inputSecret id="password" value="#{user.password}" required="true"
            requiredMessage="Please enter password" />
        <h:panelGroup>
            <h:message for="password" style="color: red;" />
            <h:message for="validateConfirm" style="color:red;" />
        </h:panelGroup>

        <h:outputLabel for="confirmPassword" value="Confirm password : " />
        <h:inputSecret id="confirmPassword" required="true"
            requiredMessage="Please enter confirm password" />
        <h:message for="confirmPassword" style="color: red;" />
    </h:panelGrid>

    <o:validateEqual id="validateConfirm" components="password confirmPassword" message="Passwords are not equal" />    
    <h:commandButton action="thanks" value="register" />
</h:form> 
```

没有任何自定义侦听器方法。

# c# - Facebook API / C#：获取朋友的登录状态

> ID：15727934
> 
> 赞同：0
> 
> 时间：2013-03-31T08:59:49.877
> 
> 标签：c#, facebook-graph-api

我开始使用[Facebook C# API](http://nuget.org/packages/Facebook)的目的很明确：有一个朋友的用户 ID，我需要一个输出类似“现在在线/离线”的方法。

快速检查后，我看不到任何功能，我该如何继续？我应该使用 XMPP 迁移到 Facebook Chat API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:51:06.167

我会回答自己：这似乎可以在“friends_online_presence”上使用 FQL 查询

# android - 将活动传递给服务或使用广播

> ID：15727945
> 
> 赞同：0
> 
> 时间：2013-03-31T09:02:04.477
> 
> 标签：android, service, android-activity

我有一个本地`Service`和一个`Activity`. 我想将`Activity`object 传递给`service`，所以当`Activity`绑定到 my时`Service`，我可以调用 function `activty.doSomething()`。我应该这样做吗？我知道我可以使用`BroadcastReceiver`to 调用`doSomething()`from `Service`，但是与上面的想法相比，最好的方法是什么？传递`activity`给`service`还是使用`BroadcastReceiver`？谢谢大家！

```
// This is MyActivity, where I will pass `activity` to `service` when `service` 
//  is bound or when activity is resumed. I will clear the `activity` object 
//  in `Service` when `Activity` is paused.
public class MyActivity extends Activity{

    LocalService mService; // this is my 

    @Override
    public void onResume(){
        if(isServiceBound){
            mService.setActivity(this);
        }
    }

    public void onPause(){
        if(isServiceBound){
            mService.setActivity(null);
        }
    }

    // Do something here
    public void doSomething(){
    }

    //Code to start, bind service, unbind ... go here

}

public class LocalService extends Service{
    MyActivity mActivity;
    public void setActivity(MyActivity a){
        mActivity = a;
    }
    // Start service, do something here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:25:39.577

将活动绑定到服务是本地服务更灵活的选择，因为您可以在两个方向上实现丰富的 api。在此处查看[文档](http://developer.android.com/guide/components/bound-services.html)

另一方面，对于意图服务来说，BroadcastReceiver 是一个更好的选择，因为它们一旦完成工作就会过期。

还要记住，如果你想让你的服务持久化，你必须用 startService 显式启动它，否则当绑定活动的数量变为 0 时它会被杀死。

# windows-phone-8 - 如何检查网址是否有效？

> ID：15727950
> 
> 赞同：1
> 
> 时间：2013-03-31T09:03:46.323
> 
> 标签：windows-phone-8

我希望能够检查指定的 URL 是否有效 [最好是 Active 和 Well Formed]，

例如

```
//invalid
http://fdsafsd.com/
//valid
http://google.com/ 
```

可能吗？我正在使用stackoverflow中其他帖子上指定的代码，但它们似乎都不起作用。这是其中一个例子。

```
private bool checkWebsite(string url){
    WebRequest webRequest = WebRequest.Create(url);
    WebResponse webResponse;
    try{
        //System.Net.WebRequest does not contain a definition for GetResponse();
        webResponse = webRequest.GetResponse();
    }
    catch
        return false;
    return true;
} 
```

任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:42:27.610

这应该适合你。虽然不是最优雅的代码。

```
static void Main(string[] args)
{
    var uriName = "http://www.google.com";
    Uri uriResult;

    bool isUriValid = Uri.TryCreate(uriName, UriKind.Absolute, out uriResult) && uriResult.Scheme == Uri.UriSchemeHttp;

    if (isUriValid)
    {
        var webRequest = HttpWebRequest.Create(uriResult);
        // Only request the headers, not the whole content
        webRequest.Method = "HEAD";
        try
        {
            // Exception is thrown if 404
            var response = webRequest.GetResponse() as HttpWebResponse;
            // Check if status return is 200 OK, then active. You might want to check the HttpStatusCode for others
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Console.WriteLine(((int)response.StatusCode).ToString());
            }
        }
        catch (WebException e)
        {
            Console.WriteLine(e.Message);
        }  
    }
    else
    {
        Console.WriteLine("Url is not valid");
    }

    Console.Read();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:15:46.553

用 HttpClient 回答（您应该使用 System.Net.Http 添加；）：

```
 private async Task<bool> IsURLAvailable(Uri url)
    {
        var httpClient = new HttpClient();

        HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Head, url);
        HttpResponseMessage response = await httpClient.SendAsync(request);
        try
        {
            if (response.StatusCode == HttpStatusCode.OK)
                return true;
        }
        catch (WebException e)
        {
            Debug.WriteLine(e.Message);
        }
        return false;
    } 
```

# android - 高度的额外空间，android xml布局

> ID：15727951
> 
> 赞同：0
> 
> 时间：2013-03-31T09:03:49.407
> 
> 标签：android, android-linearlayout, xml-layout

我有一个线性布局，我正在使用带有高度的包装内容。但是即使在提供包装内容之后，我也会在所有元素之后获得一些额外的空间。但是，如果我手动将高度提供给“220dp”，则其格式正确。我想使用包装内容来解决这个问题。请提出您宝贵的建议。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:layout_weight="1"
    android:id="@+id/layout3" android:background="@drawable/question_backgrund"
    android:orientation="vertical">
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal">
        <TextView android:id="@+id/question_number1"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_marginLeft="5dp" android:textColor="#FF0000"
            android:text="1" />
        <ImageView android:id="@+id/answer_icon1"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_marginLeft="220dp" android:contentDescription="Answer status"
            android:src="@drawable/answer_status" android:visibility="invisible" />
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal">
        <ImageView android:id="@+id/comment_icon"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:layout_marginLeft="15dp" android:layout_marginTop="10dp"
            android:src="@drawable/write_comments_icon" />
        <TextView android:id="@+id/comment_title"
            android:layout_width="match_parent" android:layout_height="wrap_content"
            android:layout_marginTop="10dp" android:layout_marginLeft="20dp"
            android:text="title" />
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal">
        <LinearLayout android:layout_width="match_parent"
            android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="horizontal">
            <EditText android:id="@+id/write_comments"
                android:layout_width="wrap_content" android:layout_marginLeft="20dp"
                android:layout_marginTop="15dp" android:layout_height="100dp"
                android:ems="10" />
            <Button android:id="@+id/submit" android:layout_width="wrap_content"
                android:layout_marginTop = "10dp"
                android:background="@drawable/done"
                android:layout_height="wrap_content" android:layout_marginLeft="10dp" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:12:01.820

为什么`android:layout_weight="1"`主布局上有一个？有多少空间？有些元素有自然填充，如果你只有 <8 dp 它可能来自那个。它也可能来自主布局的背景图像，是 9patch 图像吗？您是否正确地大喊内容以占据图像的完整空间？

# c++ - 蒙特卡洛积分的不同结果由于输出

> ID：15727954
> 
> 赞同：6
> 
> 时间：2013-03-31T09:04:08.863
> 
> 标签：c++, gcc, clang, cout, montecarlo

我最近偶然发现了一个 C++ 错误/功能，我无法完全理解，并希望这里有更好的 C++ 知识的人可以为我指明正确的方向。

下面你会发现我尝试使用蒙特卡洛积分找出高斯曲线下的面积。食谱是：

1.  生成大量正态分布的随机变量（均值为 0，标准差为 1）。
2.  平方这些数字。
3.  取所有正方形的平均值。平均值将是曲线下面积的非常接近的估计值（在高斯的情况下，它是 1.0）。

下面的代码由两个简单的函数组成：`rand_uni`，它返回一个随机变量，均匀分布在 0 和 1 之间，以及`rand_norm`，它是正态分布随机变量的一个（相当差，但“足够好”）近似值。

`main`循环运行十亿次，`rand_norm`每次调用，将其平方`pow`并添加到累积变量中。在此循环之后，累积的结果仅除以运行次数并打印到终端作为`Result=<SOME NUMBER>`.

问题在于下面代码的非常古怪的行为：当每个生成的随机变量被打印到`cout`（是的，十亿次）时，无论使用什么编译器，最终结果都是正确的（1.0015，非常接近，我想）。如果我不在每次循环迭代中打印随机变量，我会得到`inf`448314`gcc`和`clang`.

坦率地说，这只是令人难以置信，因为这是我第一次（-ish）遇到 C++，我真的不知道问题可能是什么：它与`pow`? `cout`行为怪异吗？

任何提示将不胜感激！

# 来源

```
// Monte Carlo integration of the Gaussian curve

#include <iostream>
#include <cstdlib>
#include <cmath>

using namespace std;

enum {
  no_of_runs = 1000000
};

// uniform random variable
double rand_uni() {
  return ((double) rand() / (RAND_MAX));
};

// approximation of a normaly distributed random variable
double rand_norm() {
  double result;
  for(int i=12; i > 0; --i) {
    result += rand_uni();
  }
  return result - 6;
};

int main(const int argc,
         const char** argv) {

  double result = 0;
  double x;

  for (long i=no_of_runs; i > 0; --i) {
    x = pow(rand_norm(), 2);
    #ifdef DO_THE_WEIRD_THING
    cout << x << endl;      // MAGIC?!
    #endif
    result += x;
  }

  // Prints the end result
  cout << "Result=" 
       << result / no_of_runs
       << endl << endl;

} 
```

# 生成文件

```
CLANG=clang++
GCC=g++
OUT=normal_mc

default: *.cpp
    $(CLANG) -o $(OUT).clang.a *.cpp
    $(CLANG) -o $(OUT).clang.b -DDO_THE_WEIRD_THING *.cpp
    $(GCC) -o $(OUT).gcc.a *.cpp
    $(GCC) -o $(OUT).gcc.b -DDO_THE_WEIRD_THING *.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:12:58.270

在开始 += 随机值之前， in 未初始化为0 `result`。`double rand_norm()`

所有 cout 都使用并重置堆栈内存的一部分，稍后调用 rand_norm 使用这些内存，当您执行 cout 时“修复”您的问题。

将第一行更改`double result = 0.0;`为修复它。

```
double rand_norm() {
  double result = 0.0;
  for(int i=12; i > 0; --i) {
    result += rand_uni();
  }
  return result - 6;
}; 
```

此外，您应该播种随机数生成器，如果没有它，您将始终获得完全相同的伪随机数序列，添加一个

```
srand(time(NULL)); 
```

在您第一次调用 rand() 之前，或者查看一些更好的随机数生成器，例如[Boost.Random](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_random.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T09:14:17.883

在您的 rand_norm() 函数中，结果未初始化，这是您的错误。以防万一您想知道为什么在打印值时它会起作用，这是因为一个未初始化的变量将具有它所拥有的内存区域的值，在您的代码中它是堆栈，因此调用 cout<< 会更改您的堆栈值。这是您的功能的固定版本：

```
double rand_norm() {
  double result = 0.0;
  for(int i=12; i > 0; --i) {
    result += rand_uni();
  }
  return result - 6;
}; 
```

# append - 如何为 Rebol3 PORT 定义 APPEND？

> ID：15727955
> 
> 赞同：1
> 
> 时间：2013-03-31T09:04:10.283
> 
> 标签：append, rebol, rebol3

我正在研究 Rebol3 中的方案，我想添加 APPEND 操作。但是，将 APPEND 演员添加到方案中没有任何作用，结果`append my-scheme://localhost foobar`是`my-scheme://localhostfoobar`而不是我的行动。在这方面，[文档](http://www.rebol.net/wiki/Schemes%3aNotes#Series_Actions)有点未完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T09:56:37.330

您需要在端口上使用 append，而不是 url！

```
port: open my-scheme://localhost
append port "my data" 
```

唯一可以将 URL 作为参数的端口参与者是那些具有端口的参与者！指定为参数。这些是创建、删除、打开、关闭、读取、写入、打开？、查询、更新和重命名。请参阅[http://www.rebol.net/wiki/Schemes:Notes#Port_Actions](http://www.rebol.net/wiki/Schemes:Notes#Port_Actions)

# java - Java：组合框，组合框中每个选项的不同表

> ID：15727957
> 
> 赞同：0
> 
> 时间：2013-03-31T09:04:36.473
> 
> 标签：java, swing, jcombobox

我希望组合框中的每个选项都在我的应用程序上显示不同的内容。窗口：不同的按钮、表格、文本字段等。

我认为最好的方法是做一个“开关”，但我真的不知道在开关的测试区域放什么。

```
package tema3;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Interface {

    public static void main(String[] args) {

        new Interface();
    }

    public Interface() {

        JFrame guiFrame = new JFrame();

        guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        guiFrame.setTitle("Tema3");
        guiFrame.setSize(1200, 600);

        guiFrame.setLocationRelativeTo(null); // seteaza centrat

        String[] tableOptions = { "OPDept", "Order", "OrderItems", "Product",
                "Warehouse", "Customer" };
        // pentru combo box

        final JPanel comboPanel = new JPanel();
        JLabel comboLbl = new JLabel("Tabele:");
        JComboBox tables = new JComboBox(tableOptions);

        comboPanel.add(comboLbl);
        comboPanel.add(tables);

        tables.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent event) {

                comboPanel.setVisible(comboPanel.isVisible());

                switch (???what to insert here???) {

                case "Order": {
                    System.out.println("11111");
                    break;
                }

                case "Product": {
                    System.out.println("2222");
                    break;
                }

                    default: {
                        System.out.print("sd");
                        break;
                    }
                }

            }
        });

        guiFrame.add(comboPanel, BorderLayout.NORTH);
        guiFrame.add(tables, BorderLayout.SOUTH);

        guiFrame.setVisible(true);

    }
} 
```

谢谢， 德拉戈斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:08:52.557

您可以使用方法[`getSelectedItem`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#getSelectedItem%28%29)来获取当前选定的项目：

```
switch ((String)tables.getSelectedItem()) { ... } 
```

注意：您必须将其强制转换为 a`String`才能在 switch 语句中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:08:22.093

假设您正在使用`Java7`您可以编写如下：

```
String s = (String)tables.getSelectedItem();
                switch (s) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T09:21:04.077

如果您不使用，`Java7 +`则无法**切换****字符串**

所以你可以把它转换成`if(){}.. else{}`

像那样 ：

```
 String s = (String) tables.getSelectedItem();
 if (s.equals("Order")) {
     System.out.println("11111111");
  } else if (s.equals("Product")) {
      System.out.println("2222222");
  } else {
      System.out.print("sd");
  } 
```

[Oracle 教程：](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html) 在 Java SE 7 及更高版本中，您可以在 switch 语句的表达式中使用 String 对象。

# c++ - 从地图中删除指针

> ID：15727958
> 
> 赞同：0
> 
> 时间：2013-03-31T09:04:36.467
> 
> 标签：c++, qt

有一个映射，它将一个映射`int`到一个`Test*`。

所有`Test*`指针都在之前分配，然后分配给映射。然后，我正在输入 map`delete`*的*值并将它们设置为`null`.

之后，它检查 的有效性`one`，它应该是`null`。**但是**，`one`不是`null`。

```
#include <QString>
#include <QMap>
#include <QDebug>

class Test {
    QString name;
public:
    Test(const QString &name) : name(name) {}
    QString getName() const { return name; }
};

int main() {
    QMap<int, Test*> map;

    Test *one = new Test("one");
    Test *two = new Test("two");
    Test *three = new Test("three");

    map.insert(1, one);
    map.insert(2, two);
    map.insert(3, three);

    for (auto itr = map.begin(); itr != map.end(); itr++) {
        Test *x = *itr;
        if (x) {
            delete x;
            x = 0; // ** Sets null to the pointer ** //
        }
    }

    if (one) // ** Here one is not 0 ?! ** //
        qDebug() << one->getName() << endl; // ** And then here crashes ** //
} 
```

我想，当我在循环中使用它们时，我错过了一些东西`delete`*。*

怎么能修好？

第二个问题是，分配`delete`*的*指针是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T09:07:12.310

在循环中，变量`x`是仅在循环内部的局部指针。当您将其设置为时，`NULL`您实际上并没有将任何*其他*指针设置为`NULL`.

您应该将通过取消引用迭代器返回的引用设置为`NULL`：

```
*itr = nullptr; 
```

这将使映射中的指针变为`NULL`，但其他指针仍将指向现在已释放的内存区域。

* * *

当你有两个指针时，它看起来像这样：

```
+-----+
| 一个 | ---\
+-----+ | +---------------+
             >--> | 测试实例 |
+-----+ | +---------------+
| x | ---/
+-----+

```

如果您设置*其中一个*指针，它看起来像这样：

```
+-----+
| 一个 | ---\
+-----+ | +---------------+
             >--> | 测试实例 |
+-----+ +--------------+
| x |
+-----+

```

变量`x`是`NULL`，但变量`one`仍然指向对象。如果对象已被删除，那么取消引用该指针将导致*未定义的行为*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T14:40:56.637

删除所有内容的最简单方法是：

```
qDeleteAll(map); 
```

# prolog - Prolog-将查询的结果放在列表中

> ID：15727959
> 
> 赞同：1
> 
> 时间：2013-03-31T09:04:45.553
> 
> 标签：prolog

我有这些事实注册（hazem，数学）。注册（hazem，科学）。依此类推，我想要学生（X，ListOfCourses）。返回列表中 X 正在学习的课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:28:59.633

看看 findall/3 bagof/3, setof/3，例如：

```
student(X, ListOfCourses) :-
    findall(Courses, enroll(X, Courses), ListOfCourses). 
```

# django - django，'auth.User'来自哪里？

> ID：15727960
> 
> 赞同：1
> 
> 时间：2013-03-31T09:05:05.207
> 
> 标签：django, django-models

在一些项目中，我发现应用的模型定义是这样的：

```
from django.db import models

class CustomUser(models.Model):
    user = models.ForeignKey('auth.User') 
```

我的问题是“auth.User”来自哪里？

它是从 django.contrib.auth 导入的吗？但是，用户不在`auth/__init__.py`文件中。

django 是如何知道在`auth/models.py`文件中查找用户的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:18:35.870

Django 总是假设应用程序中有一个模型模块。所以这意味着 django 将寻找 auth.models 并在其中搜索一个名为`User`. 查找从 中的`add_lazy_relation`函数开始`django/db/models/fields/related.py`。正如您在源代码中看到的那样，当传递一个字符串时，它会为您提供三个选项，您可以传递`'self'`与当前模型的关系，也可以传递将在当前应用程序的模型模块中`'MyModel'`查找类的传递。`'MyModel'`最后你可以通过`'AnotherApp.AnotherModel'`which 将寻找`'AnotherApp.models.AnotherModel'`. 如果好奇，模型查找功能是在`django.db.models.get_model`

# javascript - 如何创建和使用动态分层 JSON？

> ID：15727967
> 
> 赞同：0
> 
> 时间：2013-03-31T09:05:50.243
> 
> 标签：javascript, json, d3.js, hierarchy

我正在使用分层数据的 d3.js 中制作图表。它将是交互式的，因此您可以添加数据值、子项等。我的问题很简单：有没有一种方法可以在浏览器中动态使用 JSON，即编辑层次结构并从中添加/删除数据。如果没有，我可以使用任何替代方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:13:02.770

不确定这是否有帮助，但 JSON 只不过是一个普通的 JS 对象，您可以使用它来定义

```
var foo = {
   name: "foo"
   type: "bar"
   children: [{}, {}]
} 
```

如果你有一个代表 JSON 的字符串，你可以解析它：

```
var json = '{"name":"foo","type":"bar",children: [{}, {}]}',
obj = JSON.parse(json); 
```

您可以通过普通的 javascript 添加/删除数据。在这里您可以找到更多相关信息： http: [//www.json.org/js.html](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:13:18.053

*使用JSON.parse*将 JSON 转换为对象（您可能需要 JSON2 库来填充），根据需要进行修改，当您需要返回 JSON（例如将其发送回服务器）时，将其重新转换为字符串使用*JSON.stringify*

# c - 能够改变 const 指针中的值

> ID：15727969
> 
> 赞同：2
> 
> 时间：2013-03-31T09:05:57.573
> 
> 标签：c, pointers, gcc

运行以下程序后：

```
gcc -c volVars.c -o volv

./volv 
```

它编译。

```
#include<stdio.h>
void main(){
    printf("study of volatile pointers\n");
    const int lConstInt=6;
    printf("\n const int is %d\n",lConstInt);
    volatile const int *lvcint=&lConstInt;
    printf("volatile const int after assignment = %d\n",*lvcint);
    //*lvcint=*lvcint+1; uncommenting this gives compilation error  
    int *track = lvcint;
    *track = *track + 1;
    printf("modified the lcoation = %d\n",*track);
} 
```

如果我取消注释`lvcint=*lvcint+1;`行，它会按预期给出错误。`lvcint`但是，如果我使用非常量的轨道引用该指针 ( )，我可以修改它的内容。我在该行收到警告，但最后我能够修改只读位置的内容。gcc 中是否有任何错误或者我缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:42:25.073

在 Linux 下，我收到以下警告：

> 警告：初始化从指针目标类型中丢弃 'const volatile' 限定符 [默认启用]

我认为这意味着编译器实际上删除了 const 限定符并正常初始化它们。我不能肯定地说，但这是我最好的猜测，因为这段代码拒绝在 Windows 下的 GCC 中编译。我在 Windows 中收到以下错误：

> “错误：从 'const volatile int*' 到 'int*' 的无效转换

所以是的，我不得不猜测代码是由编译器修改的。

至于为什么您注释掉的那一行会导致错误，那是因为您无法修改常量（您不应该能够）。

资料来源：我自己的实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:02:43.930

粗略地说，`const`关键字（仅）是一种很好的做法，可以防止一些潜在的错误，也可以触发更好的编译优化。

但它实际上并没有像权限位那样保护变量。

有时编译器可能会将常量变量放在二进制文件的只读段中，写入它们会触发无效内存访问等异常，但您不能依赖这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T11:03:26.623

这不是 gcc 中的错误，在这种情况下它确实会发出警告，您应该始终注意警告。

更改`const`变量的值会产生未定义的行为，根据标准，这意味着您无法知道会发生什么。在不同的机器、编译器、程序或系统的状态、月相上，它的行为可能完全不同。通常由开发人员来避免未定义的行为，编译器无法找出所有可能的情况并发出错误。

# fingerprint - 指纹最佳SDK

> ID：15727970
> 
> 赞同：1
> 
> 时间：2013-03-31T09:06:06.787
> 
> 标签：fingerprint

我即将创建一个将用于指纹注册、识别和验证的 Web 服务，我只有一个约束，我必须将指纹图像和个人数据存储在 oracle 数据库中，什么是最好的 SDK买？将图像与个人数据一起存储在数据库中是最佳做法吗？

BR，艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T18:42:36.823

我使用[Verifinger](http://neurotechnology.com/verifinger.html)进行了一些开发，它支持相当[多的指纹扫描仪供应商列表，](http://neurotechnology.com/cgi-bin/fingerprint-scanners.cgi)并提供多种编程语言的大量示例。还有一些其他的 SDK 供应商，例如[Griaule](http://www.griaulebiometrics.com/new/content/gbs-forensic-edition/#sdk)，它们可能值得一看。我认为将您的个人和生物特征数据存储在同一个数据库中没有任何问题，只要它得到很好的保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T14:53:23.227

曾使用过各种 SDK，包括**DigitalPersona**（现为 Crossmatch）、**Neurotechnology SDK**（他们有各种 SDK 而不是硬件制造商）、**Grauile**；如果您在使用他们自己支持的任何阅读器时没有问题，我可以说使用 Digitalpersona SDK 是我最喜欢的。您的成本主要是硬件和 SDK 初始成本。如果您打算使用来自不同供应商的硬件，那么 Neurotechnology 验证器是一个不错的选择，但要为基于设备或加密狗的许可做好准备。

关于数据存储，您可以将模板存储在主数据库中，而将原始位图存储在单独的非事务数据库中（大小通常很大）。如果将来需要将模板转换为另一种格式的迁移，则需要原始位图

# vim - 放 。在 n 个相等符号之后

> ID：15727977
> 
> 赞同：0
> 
> 时间：2013-03-31T09:06:53.057
> 
> 标签：vim, sed, vi

就我而言，我想将文本分成 3500 个符号“文本。在 3500 中”

```
%s/\(.\{3500\}\)\(.*\)/\1\.\2/

E486: Pattern not found: \(.\{3500\}\)\(.*\) 
```

它适用于上一个文本，但不适用于下一个文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:54:00.580

```
cat tmp 
```

这是第一行

现在第二行

终于第三行了

```
 cat tmp | sed ':a;N;$\!ba;s/\(.\{3\}\)/\1\./g' 
```

这是f.irs.t 线。

no.w s.eco.nd .lin.e

最后。第三。线

用 3500 替换 3 看看会发生什么 +

# javascript - Firebug：在脚本选项卡中调试期间打开控制台

> ID：15727980
> 
> 赞同：3
> 
> 时间：2013-03-31T09:07:15.753
> 
> 标签：javascript, debugging, firefox, console, firebug

当我在 Firebug 中调试 javascript 时，我必须经常在控制台和脚本选项卡之间切换，而在 Webkit Inspector 中，我只能从底部打开一个控制台。

我认为使用控制台（或测试方法）而不是图形工具来检查变量和对象更容易。

有没有办法在萤火虫中同时打开控制台和调试窗口，比如在 Chrome 或 Safari 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:52:13.787

我找到了解决方案。在脚本选项卡中，按`CTRL`+ `SHIFT`+ `L`，控制台（*Command Line Popup*，如[文档](https://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts)所述）将出现在底部（如在 Chrome 中）。

要关闭它，请按`ESC`。

# android - 在edittext中设置值并在按下按钮后将其发送到arduino Android

> ID：15727982
> 
> 赞同：0
> 
> 时间：2013-03-31T09:07:34.737
> 
> 标签：android, android-edittext, arduino

我不知道如何解决整数问题，如何发送在 EditText 中设置的值并在 Arduino 上的 Android 按下按钮后发送。

```
'

public class MainActivity extends Activity {
private static final String DEFAULT_DEVICE_ADDRESS = "00:12:10:16:12:14";
private Context context;
    TextView value, display;
    EditText nasttemp;
    Button button;  

        @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    final int nastaviTemp = Integer.parseInt(nasttemp.getText().toString());

        context = this;
        display = (TextView) findViewById(R.id.nasttemp);

        //////////// Button SET /////////////////// 
          Button button = (Button) findViewById(R.id.button);
            button.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
                 Amarino.sendDataToArduino(context, DEFAULT_DEVICE_ADDRESS, 'o',
                         new int[] { nastaviTemp );                    
             }      
            }); 
    //////////////////////////////////////////// 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:46:07.293

I found a solution for my code and here is it for others who will face with it.

```
 TextView vrednostTemp, display;
EditText nasttemp;
Button Nastavi;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    vrednostTemp = (TextView) findViewById(R.id.value);
    nasttemp = (EditText) findViewById(R.id.nasttemp);
    display = (TextView) findViewById(R.id.stanjeTemp);
    Nastavi = (Button) findViewById(R.id.button);
    context = this; 

    Nastavi.setOnClickListener(new View.OnClickListener() {         
        @Override
        public void onClick(View v) {
            int nastaviTemp = Integer.valueOf(nasttemp.getText().toString());
            display.setText("" + nastaviTemp);
            Amarino.sendDataToArduino(context,DEVICE_ADDRESS, 'o',
                   new int[] { nastaviTemp });              
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:19:30.773

首先是你做错了：-

```
final int nastaviTemp = Integer.parseInt(nasttemp.getText().toString());
display = (TextView) findViewById(R.id.nasttemp); 
```

正确的是

```
display = (TextView) findViewById(R.id.nasttemp);
final int nastaviTemp = Integer.parseInt(nasttemp.getText().toString()); 
```

在初始化之前如何获得价值。

# php - 来自接口的 PHP 抽象静态方法

> ID：15727983
> 
> 赞同：2
> 
> 时间：2013-03-31T09:07:51.277
> 
> 标签：php, interface, static, singleton, abstract

我拥有可以扩展以创建特定应用程序的网站的“基础”。在我的核心功能中，我有一个必须是单例的抽象类 C_Controller。为了使用核心功能创建特定的应用程序，开发人员必须扩展这个 C_Controller 类。这个类（我们将其命名为 C_Application）也必须是一个单例。为了强制开发人员实现自己的 getInstance 方法，我做了以下工作：

```
interface I_Singleton
{
    public static function getInstance();
}

abstract class C_Controller implements I_Singleton
{
    public abstract static function getInstance();
} 
```

然后开发人员必须在他的子类中实现该功能：

```
class C_Application extends C_Controller
{
    public static function getInstance() { ... }
} 
```

我已经为我的观点这样做了，但它是一个非静态方法（__toString）。我读过自 PHP 5.2 以来不可能有抽象的静态方法，那么有没有一种干净的方法来做到这一点？

**我仅限于 PHP 5.2。**由于我正在使用免费的网络托管服务。

谢谢你的帮助！

# java - 具有多个活动的 Android 应用程序优化设计

> ID：15727987
> 
> 赞同：0
> 
> 时间：2013-03-31T09:08:08.393
> 
> 标签：java, android, multithreading, android-activity, uart

我正在开发一个包含多项活动的大型应用程序，[请参阅链接](http://maxbodyshape.se/ezy_design.png)，我有 2 个关于基本设计的问题。

1.  关于开放活动的最佳做法是什么，这样我就不会因为同时打开同一类的多个实例而浪费内存等等？

2.  应用程序必须通过 UART 接口不断接收 USB 数据，并且应该以某种方式将此数据转发到焦点活动。现在开始活动通过处理程序接收数据。如果只有一项活动需要 USB 数据，这将起作用。我该怎么做？

**启动.java**

```
final Handler handler = new Handler()
{
    @Override 
    public void handleMessage(Message msg)
    {
        if(actualNumBytes[0] != 0x00)
        {
            info.append(String.copyValueOf(readBuffer, 0, actualNumBytes[0]));
        }
    }
}; 
```

**handler_thread.java**

```
/*usb input data handler*/
private class handler_thread extends Thread 
{
    Handler mHandler;

    handler_thread(Handler h ){
        mHandler = h;
    }

    public void run()
    {
        while(true)
        {
            Message msg = mHandler.obtainMessage();
            try{
                Thread.sleep(50);
            } 
            catch(InterruptedException e){}

            status = uartInterface.ReadData((byte)64, readBuffer, actualNumBytes);
            mHandler.sendMessage(msg);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:01:57.413

1.  如果您希望最小化活动的数量，请考虑使用片段。

2.  如果您有一个全局变量/事件/线程需要由当前活动处理，请将其放入服务中，并让活动与其通信（在启动/恢复时连接，在暂停/停止时断开连接）。

希望这可以帮助。

# java - 从消息侦听器中检索一个值并在 Main 中打印

> ID：15727989
> 
> 赞同：1
> 
> 时间：2013-03-31T09:08:20.973
> 
> 标签：java, message-driven-bean, stateless-session-bean, message-listener

我有 2 个 EJB 应用程序，A 和 B。A 有一个无状态会话，向应用程序 B（消息驱动 bean）发送消息。应用 B 将消息发送回应用 A。

现在，我在 A 中的无状态会话 bean 的消息侦听器中拥有了我想要的值。但我需要从 Main 中显示它。我尝试声明一个变量并将值存储在其中。但是当我从 Main 调用它时，值就丢失了。

```
@Stateful
public class AManagerBean implements ejb.AManagerRemote {
@Resource(mappedName = "jms/QueueConnectionFactory")
private ConnectionFactory queueConnectionFactory;
@Resource(mappedName = "jms/Queue")
private Queue queue;

private static int fineAmt;

......

static class AListener implements MessageListener{
    public void onMessage(Message message){
         .....
         fineAmt = msg.getInt("fineAmt"); 
        // I NEED FINEAMT TO SHOW IN MAIN CLASS

         .....
    }
}

public int returnFine(){
     return fineAmt;
 } 
```

在主课...

```
public class Main {

    @EJB
    public static AManagerRemote amr;

    public static void main(String[] args) {
         ......
         System.out.println(amr.returnFine());
         // ALWAYS RETURN 0 
```

我需要 Fineamt 在主课上展示。但它总是返回null。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:39:12.123

我写这个作为答案，因为评论很长，尽管它可能无法提供实际答案。

首先，不允许在 EJB 中使用非最终静态变量。[EJB Restrictionc FAQ](http://www.oracle.com/technetwork/java/restrictions-142267.html#static_fields)中有一个关于此的条目

> 在 EJB 中不允许使用非最终静态类字段，因为此类字段会使企业 bean 难以或无法分发。静态类字段在特定类的所有实例之间共享，但仅在单个 Java 虚拟机 (JVM) 中共享。更新静态类字段意味着在类的所有实例之间共享该字段的值。但是，如果一个类同时在多个 JVM 中运行，则只有与更新实例在同一 JVM 中运行的那些实例才能访问新值。换句话说，如果在单个 JVM 中运行，非最终静态类字段的行为将不同于在多个 JVM 中运行。EJB 容器保留了跨多个 JVM 分发企业 bean 的选项（运行在同一台服务器上，或任何服务器集群上）。

其次，您已经定义了一个`Stateful`会话 bean。有状态会话 bean 应该具有会话状态，并且客户端（通常）在其生命周期内拥有同一个有状态 bean 的句柄。在您的示例中我看不到任何对话内容（我假设，因为您已经删除了一些代码），所以它真的需要是一个有状态的 bean 吗？

所以我建议你做的第一件事是重新设计并尝试让一个更真实的例子启动并运行。

# actionscript-3 - AS3 - 未定义属性的访问

> ID：15727997
> 
> 赞同：-2
> 
> 时间：2013-03-31T09:09:24.133
> 
> 标签：actionscript-3

首先，我是初学者。其次，请有人更改标题，因为我想不出更好的标题。

这就是问题所在：

```
makebtn(0, 150, true, "btnstart");
btntxt(btnstart, "Start"); 
```

我做了两个功能，一个`makebtn`：`makebtn( xpos, ypos, alignMiddle, instance name);` 第二个`btntxt`：：`btntxt( target instance, displayed text);`

```
function makebtn(xpos:Number, ypos:Number, alignMiddle:Boolean, newname:String):void
{
    var button:MovieClip = new btn();
    if(alignMiddle == true){
        xpos = stage.stageWidth / 2 - button.width / 2;
    }
    button.x = xpos;
    button.y = ypos;
    button.name = newname;
    trace("Success adding button - " + button.name);
    stage.addChild(button);
    button.gotoAndStop(4);
    button.useHandCursor = false;
}

function btntxt(button:MovieClip, txt:String):void
{
    button.btnText.text = txt;
    button.buttonMode = true;
    button.useHandCursor = true;
    button.addEventListener(MouseEvent.MOUSE_OVER,overListener);
    button.addEventListener(MouseEvent.MOUSE_OUT,outListener);
    button.addEventListener(MouseEvent.MOUSE_DOWN,clickListener);
    button.addEventListener(MouseEvent.MOUSE_UP,upListener);
} 
```

我把我的按钮做成了一个movieclip，而不是一个简单的按钮。

显示的问题是未定义属性的访问权限`btnstart`。是时间不足导致问题还是什么？请帮忙！

如果我的信息太短，请告诉我。我相信听众工作正常。

我正在**时间轴**上创建这些。

好吧，如果我把`btntxt(button, "Start");`makebtn 函数放在里面，那就行了。

# 第二次编辑：

```
function makebtn(xpos:Number, ypos:Number, alignMiddle:Boolean, newname:String):void
{
var button:MovieClip = new btn();
if(alignMiddle == true){
    xpos = stage.stageWidth / 2 - button.width / 2;
}
button.x = xpos;
button.y = ypos;
button.name = newname;
trace("Success adding button - " + button.name);
stage.addChild(button);
button.gotoAndStop(4);
button.useHandCursor = false;
}

function btntxt(target:String, txt:String):void
{
var button;
button = getChildByName(target);
button.getChildByName("btnText").text = txt;
button.buttonMode = true;
button.useHandCursor = true;
button.addEventListener(MouseEvent.MOUSE_OVER,overListener);
button.addEventListener(MouseEvent.MOUSE_OUT,outListener);
button.addEventListener(MouseEvent.MOUSE_DOWN,clickListener);
button.addEventListener(MouseEvent.MOUSE_UP,upListener);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:13:17.403

通过正确声明孩子来解决：

```
function btntxt(target:String, txt:String):void
{
    var button:MovieClip = MovieClip(stage.getChildByName(target));
    var btnText:TLFTextField = TLFTextField(button.getChildByName("btnText"));
    btnText.text = txt;
    button.buttonMode = true;
    button.useHandCursor = true;
    button.addEventListener(MouseEvent.MOUSE_OVER,overListener);
    button.addEventListener(MouseEvent.MOUSE_OUT,outListener);
    button.addEventListener(MouseEvent.MOUSE_DOWN,clickListener);
    button.addEventListener(MouseEvent.MOUSE_UP,upListener);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:42:23.433

您正在尝试通过创建一个孩子并为其分配一个名称来创建一个动态属性。它不能以这种方式工作。您可以通过字符串使用`getChildByName()`和调用您的函数，`btntxt("btnstart","Start");`或者您可以使用`this[]`构造手动将属性添加到主类的动态 MovieCkip。`this[newname]=button;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T13:35:21.827

```
var button:MovieClip;
for (var i=1; i<7; i++)
{
button = MovieClip(getChildByName("btn"+i));
button.addEventListener(MouseEvent.CLICK, objClick);
button.addEventListener(MouseEvent.ROLL_OVER, objOver);
button.addEventListener(MouseEvent.ROLL_OUT, objOut);
button.buttonMode = true;
} 
```

# java - 类名末尾的尖括号符号是什么意思？

> ID：15727999
> 
> 赞同：-2
> 
> 时间：2013-03-31T09:09:35.257
> 
> 标签：java, generics, arraylist

例如看这个：

```
ArrayList<String> arrayList = new ArrayList<String>(); 
```

我可以将 <> 与自定义类一起使用吗？我该如何使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:16:16.587

`<>`只要满足泛型类的约束，您就可以将任何类放入：

```
ArrayList<MyClass> arrayList = new ArrayList<MyClass>(); 
```

您可以定义自己的类以使用`<>`简单的：

```
class MyGenericClass<E> {
    E e;
    MyGenericClass(E e) { this.e = e; }

    E getE() { return e; }
    void setE(E e) { this.e = e; }
} 
```

现在您可以自己制作：

```
MyGenericClass<String> stuff = new MyGenericClass<String>("Foo");
System.out.println(stuff.getE()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T09:15:57.047

教程[泛型](http://docs.oracle.com/javase/tutorial/java/generics/index.html)为您提供了所有需要的信息。[通用类型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)部分展示了如何声明和实现自定义类。

```
class MyClass<T> {
    ...
} 
```