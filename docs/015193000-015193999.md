# StackOverflow 问答 15193000-15193999

# javascript - Ajax RPC 和 jquery 选项卡系统冲突

> ID：15193003
> 
> 赞同：0
> 
> 时间：2013-03-04T01:09:44.403
> 
> 标签：javascript, jquery, ajax, tabs, conflict

我正在尝试在包含选项卡的页面上创建一个 ajax RPC，我已经尝试了 .noconflict() 函数，当它完成时，jquery 代码不起作用。当标签工作时，Ajax不行。编码：

```
 <script type="text/javascript">
  $.noConflict();
  $(document).ready(function() {
    $('#tc div').hide();
    $('#tc div:first').show();
    $('#tabs ul li a').removeClass('current');
    $('#tabs ul li a:first').addClass('current');

    $('#tabs ul li a').click(function(){
      $('#tabs ul li a').removeClass('current');
      $('#tabs ul li a:first').removeClass('current');
      $(this).addClass('current');
      var currentTab = $(this).attr('href');
      $('#tc div').hide();
      $(currentTab).show();
      return false;
    });
});

function changeContent(str) {
  if (str==""){
    document.getElementById("content_ops").innerHTML="";
    return;
  } 

  if (window.XMLHttpRequest) { 
    xmlhttp=new XMLHttpRequest();
  } else {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
      document.getElementById("content_ops").innerHTML=xmlhttp.responseText;
    }
  } 
  xmlhttp.open("GET","inc/get.php?id="+str, true);
  xmlhttp.send();
} 
```

代码有什么问题？谢谢

# android - 添加到资产中的文件会减慢测试速度

> ID：15193004
> 
> 赞同：0
> 
> 时间：2013-03-04T01:09:58.937
> 
> 标签：android, eclipse

我已经在我的资产中添加了数千个文件，突然从 Eclipse 调试时需要一分钟才能开始。有没有办法让它每次都不重新复制所有资产文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:31:48.997

> 有没有办法让它每次都不重新复制所有资产文件？

不，除了不要将它们放入 中`assets/`，而是以其他方式访问它们（例如，外部存储）。

请注意，Play 商店对您的 APK 文件的大小有 50MB 的限制，以防您的问题实际上是传输到设备或模拟器的时间。

# php - 使用 PhoneGap 发送 PHP 表单

> ID：15193005
> 
> 赞同：1
> 
> 时间：2013-03-04T01:10:08.567
> 
> 标签：php, javascript, jquery, html, cordova

上一个帖子出错了，粘贴的时候出错了。

一开始，我一直在玩 PhoneGap，我最终要做的是构建一个带有联系表格的应用程序，它将结果通过电子邮件发送到我选择的电子邮件中（以及在相机中拍摄的照片）应用程序）（甚至将结果发布到服务器）

我发现[了这一点](https://stackoverflow.com/questions/12597891/phonegap-contact-form-not-working-over-php)，并且一直在尝试复制它，以初步了解我的表单将如何工作，但是，我似乎无法让它运行。

这是我到目前为止所拥有的一步一步。

Index.html -> 只是指向 callsheet.html 的链接

调用表.html

```
 <!DOCTYPE html>
<html>
  <head>
    <title>Send in CallSheet</title>

    <script type="text/javascript" charset="utf-8" src="js/cordova-2.5.0.js"></script>
    <script type = "text/javascript" charset="utf-8" src="js/index.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);
</script>

  </head>
  <body>
<form action="http://contest.phoenixamd.com/ANDROIDTEST/callsheet.php" method="post">
          <div class="form-element">

        <label for="msg">Message</label>
        <textarea id="msg" name="msg" placeholder="required" rows="5" required ></textarea>
      </div>
      <input type="button" value="submit contact"/>
      </form>
  </body>
</html> 
```

callsheet.php（在我的远程服务器上）

```
 <?php
    require_once("class.phpmailer.php");

    $MessageText=$_POST["msg"];

    $mailer = new PHPMailer();
    $mailer->isSMTP();
    $mailer->CharSet='utf-8';
    $mailer->AddAddress("gabesteinberg@me.com", "Gabe");
    $mailer->Subject="Mobile App Message";
    $mailer->From = 'test@phoenixamd.com';
    $mailer->Body = $MessageText;

    //VALIDATION
    if(
    empty($MessageText)
    ) {
        echo "Error";
    } else {
        $mailer->Send();
        echo "Success";
    }

?> 
```

index.js（我保留我的 jquery 的地方）

```
 // When the document has loaded...
$(document).ready(function() {
  // Bind this action as a function to be executed when the button is clicked...
  $('input[type="button"][value="submit"]').click(function() {
    $.post('http://contest.phoenixamd.com/ANDROIDTEST/callsheet.php', {

      MessageText: $('#msg').val()

      // HTML function

      }, function (html) {
          // Place the HTML in a astring
          var response=html;

          // PHP was done and email sent
          if (response=="Success") {
            alert("Message sent!"); 
          } else {

            // Error postback
            alert("Please fill all fields!"); 
            return false;
          }
    });
  });
}); 
```

[我已经尝试按照此处](https://stackoverflow.com/questions/12711074/using-php-form-inside-phonegap)和[此处](https://stackoverflow.com/questions/12697566/phonegap-native-app-submit-form-through-php-mailer-on-live-server)采取的步骤，但似乎无法弄清楚出了什么问题......当我点击提交时，绝对没有任何反应。

我的 PHP 文件有效，如果我通过它提交，[它](http://contest.phoenixamd.com/ANDROIDTEST/callsheet.html)会回显成功并发送电子邮件。

如果我将我的 php 更改为提交而不是按钮，它可以工作，但这只是使用 html 和 php，而不是应用程序本身的实际 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:22:33.137

首先，如果您的域未列入白名单，我认为不会允许该请求`config.xml`。

我无法从您的文本中看出您的示例在哪个设备上失败 - 如果我在 android 上，我只需 grep logcat 输出以查找任何错误，默认情况下 CordovaWebView 将发送到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T14:38:07.763

在您的html文件中，您的输入类型=“按钮”应该是输入类型=“提交”，试试这个我自己也遇到过几次这个问题......

# c - 从c中的链表中删除节点

> ID：15193013
> 
> 赞同：0
> 
> 时间：2013-03-04T01:10:53.830
> 
> 标签：c

我正在尝试在 C 中创建一个简单的聊天服务（套接字编程）。服务器是并发的，可以接受多个连接。我使用服务器线程和链表来保存套接字ID。除了我用于从链表中删除节点的删除功能外，一切正常。每当客户端键入`DONE`时，我必须从链表中删除其套接字 id，但它不能正常工作。有人可以帮我弄清楚在删除功能中我必须做什么。

这是我的结构：

```
struct ClientList {
    struct ClientList *Next;
    int socket;
    char username[100];
    int count;
    FILE *file;
} ; 
```

这是用于添加节点的插入功能

```
void insert(struct ClientList *newItem,int new_s) {
    pthread_mutex_lock(&mymutex);
    struct ClientList *temp = (struct ClientList *) malloc(sizeof(struct ClientList)) ;
    temp->socket = new_s;
    temp->Next = head;
    head = temp;
    pthread_mutex_unlock(&mymutex);
}//insert function 
```

这是删除功能

```
int del(struct ClientList *temp,struct ClientList *newItem) {
    struct ClientList *cur = head;
    if (temp == head) {
        head = temp->Next;
        free(temp);
        return 0;   
    }//if
    else {
        while (cur) {
            if (cur->Next == temp) {
                cur->Next = temp->Next;
                free(temp);
            }//if
            cur = cur->Next;
        }//while
    }//else
}//del 
```

对于第一个节点我没有问题，但对于所有其他节点它不起作用。

我必须添加我的广播功能，用于向所有人广播来自任何客户端的任何消息。这是广播代码：

```
void broadcast(struct ClientList* temp,char buf[MAX_LINE],struct ClientList * newItem) {

    int len;

    pthread_mutex_lock(&mymutex); 

    for(temp = head; temp != NULL; temp  =temp->Next) {
        if (temp->socket ! =newItem->socket) {
            buf[MAX_LINE-1]= '\0';
            len = strlen(buf) + 1;
            send(temp->socket, buf, len, 0);
        }//if
    }//for

    pthread_mutex_unlock(&mymutex);
}//broadcast 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:13:41.347

你在第二次做作业，而不是比较。它应该是：

```
if(cur->Next == temp) 
```

不是

```
if(cur->Next=temp) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T01:15:00.743

很可能是因为在想要两个等号时只使用一个等号的小错误：

```
if(cur->Next=temp) 
```

应该：

```
if(cur->Next==temp) 
```

（同时删除“del”不需要的额外参数！）

提示：例如，如果您使用了一个好的编译器，`gcc`并且您启用了所有警告`-Wall`，那么当您犯此错误时它会给您一个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:57:31.653

虽然您的实际问题已经得到解答，但这里有一些关于您的删除功能的附加评论：

1.  一旦找到要删除的条目，就没有理由继续搜索列表。我会`break`在第二个之后添加一个声明`free`。
2.  `return 0`您在函数末尾没有声明。因此，如果要删除的条目不在列表的开头，则函数的返回值将是未定义的。

这些都不会导致您的程序发生故障（除非您正在检查返回值），但这些都很好纠正。

# python - Python图像处理

> ID：15193016
> 
> 赞同：0
> 
> 时间：2013-03-04T01:11:07.673
> 
> 标签：python

我知道没有足够的参数来格式化字符串，有什么建议吗？它在 else f.write 行 (52) 中。这是取平均像素值并将其替换为第二张图像。如您所见，该文件读取两个图像并写入它们。在写入过程中，我收到一条错误消息，指出没有足够的参数来格式化字符串。

```
def main():
f = open("BoardHappy.ppm","r")
lines = f.readlines()
kinds = lines[0]
size=lines[1].split()
width=int(size[0])
height=int(size[1])
depth = int(lines[2])

red=[]
green=[]
blue=[]
for i in range(3, len(lines)):
    temp = lines[i].split()
    for j in range(0, len(temp) ,3):
        red.append(int(temp[j]))
        green.append(int(temp[j+1]))
        blue.append(int(temp[j+2]))
f.close()

f = open("Godzilla.ppm","r")
lines = f.readlines()
kinds = lines[0]
size=lines[1].split()
width=int(size[0])
height=int(size[1])
depth = int(lines[2])

red1=[]
green1=[]
blue1=[]
for i in range(3, len(lines)):
    temp = lines[i].split()
    for j in range(0, len(temp), 3):
        red1.append(int(temp[j]))
        green1.append(int(temp[j+1]))
        blue1.append(int(temp[j+2]))
f.close()

f = open("lab5.ppm","w")
f.write("P3 \n")
width=720
height=540
f.write("%d %d \n"%(width,height))
f.write("255 \n")
for i in range(width*height):
    new = (red[i]+green[i]+blue[i])/3.0
    if new >=100:
        f.write("%d %d %d/n"% red[i], green[i],blue[i])
    else:
        f.write("%d %d %d/n"% red1[i], green1[i], blue1[i])

f.close()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:14:33.157

你需要括号：

```
f.write("%d %d %d/n"% (red[i], green[i],blue[i])) 
```

# python - 在递归函数中返回列表的元组

> ID：15193017
> 
> 赞同：1
> 
> 时间：2013-03-04T01:11:13.033
> 
> 标签：python

我正在学习 Python 的递归。我定义了一个链表，其中每个节点都有项目和下一个。我想写一个递归来把奇数和偶数放在一个单独的集合中。

```
class LinkNode(object):
"""A node in a linked list."""

def __init__(self, item, next=None):
    """(LinkNode, object, LinkNode) -> NoneType
    Initialize this node to store item and next.
    """
    self.item = item
    self.next = next

def odd_or_even(self):
    """(LinkNode) -> ([object], [object])
    Return a pair of lists: (odd number, even number.
    """
    if self is None:
        return ([], [])
    else:
        if (self.item % 2 == 1):
            odd_num = odd_num.append(self.item)
        else:
            even_num = even_num.append(self.item)
    if self.next is not None:
        self.next.odd_or_even()
    return (odd_num, even_num) 
```

当我运行它时，我收到以下错误：

文件“C:\Program Files\Wing IDE 101 4.1\src\debug\tserver_sandbox.py”，第 19 行，odd_or_even builtins.UnboundLocalError: local variable 'odd_num' referenced before assignment

我应该在哪里初始化奇数，偶数，这样它就不会被覆盖？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:01:38.790

```
 if (self.item % 2 == 1):
        odd_num = odd_num.append(self.item)
    else:
        even_num = even_num.append(self.item)
...
return (odd_num, even_num) 
```

上面的代码部分设置了`odd_num`或的值`even_num`，但不能同时设置两者。然后它会尝试同时返回`odd_num`and `even_num`，这会为其中一个或另一个产生错误。如果您`None`在该语句之前将两者都初始化`if`，您将避免发生的错误。但是，为了使语义起作用，您可能需要在函数中添加另一个参数，即上一级的结果；在递归调用中，将刚刚计算的`odd_num`或`even_num`向下传递到下一个级别；然后返回下一级的结果。但是，最好避免递归，而是使用一个运行两次的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:05:41.550

我认为您可以使用几种不同的方法。

一种是使用全局变量。我不是很推荐这个，但它很容易理解，所以我先介绍它：

```
even_num = [] # these should be at module level, but I'm not showing the class
odd_num = []  # so you'll have to imagine the indentation being correct

def odd_or_even(self):
    """(LinkNode) -> ([object], [object])
    Return a pair of lists: (odd number, even number.
    """
    if self.item % 2 == 1:
        odd_num.append(self.item)
    else:
        even_num.append(self.item)

    if self.next is not None:
        self.next.odd_or_even() 
```

对代码的更改很小，主要是删除`return`语句。我确实对`self`being进行了初始检查`None`，因为这在方法中是不可能的（除非调用者非常努力地让它发生）。还值得注意的是，我们不尝试分配`odd_num`或`even_num`直接分配，因为这会创建一个局部变量，而不是访问已经存在的全局变量。此解决方案的缺点是您只能调用`odd_or_even`一次并使其正常工作。如果您想再次调用它（可能在另一个列表中），您需要重新初始化全局变量。

这是一种更好的方法，它创建偶数和奇数列表作为局部变量，然后在最后返回它们。这可能是您在代码中的目标，但是您错过了将递归调用的结果添加到列表中的步骤。

```
def odd_or_even(self):
    even_num = []
    odd_num = []

    if self.item % 2 == 1:
        odd_num.append(self.item)
    else:
        even_num.append(self.item)

    if self.next is not None:
        next_even, next_odd = self.next.odd_or_even()
        even_num.extend(next_even)
        odd_num.extend(next_odd)

    return even_num, odd_num 
```

这段代码的问题是创建和扩展列表很浪费。在递归的每个级别上，将创建两个新列表，即使在该级别只处理一个值。对于整个递归过程，更好的方法可以只使用两个列表：

```
def odd_or_even(self, lists=None):
    if lists is not None:
        even_num, odd_num = lists
    else:
        even_num = []
        odd_num = []

    if self.item % 2 == 1:
        odd_num.append(self.item)
    else:
        even_num.append(self.item)

    if self.next is not None:
        return self.next.odd_or_even((even_num, odd_num))
    else:
        return even_num, odd_num 
```

这比以前的版本更有效，因为它在所有递归级别上使用相同的列表。在其他一些编程语言中，这种递归风格（所有工作都在递归调用运行之前完成）比其他类型的递归要高效得多。这是因为编译器可以优化`return`函数的步骤（并且只重用堆栈帧）。然而，Python 并没有做这种“尾调用优化”（因为它会弄乱堆栈跟踪），所以它的好处并不像它们可能的那么大。

要考虑的另一件事：您可以使用自己的链表类，而不是 Python 列表来保存偶数和奇数值。我上面展示的第二种和第三种解决方案都可以工作，但如果您愿意以相反的顺序返回偶数和奇数值，第三种方法会最自然地工作。

# java - 在服务器启动时缓存发布请求的数据

> ID：15193020
> 
> 赞同：0
> 
> 时间：2013-03-04T01:11:20.167
> 
> 标签：java, rest, caching, post, fileparsing

我有一个大型 CSV 文件，需要对其进行解析才能向 REST API 发出发布请求。发布请求正文是一个 json 字符串。文件中的第一行有键，接下来的行是值，例如

名字，姓氏
约翰，多伊马克
，吐温

因此帖子正文将类似于 {"FirstName":"John", "LastName":"Doe"}

该文件将用于为开发人员创建测试数据。我将提供一个简单的页面，开发人员可以在其中输入帐号并点击提交。目标是解析此文件并向 REST API 服务发出 POST 请求。

我想避免每次请求进入时读取文件，而是在启动时缓存这些请求以避免每次读取/解析文件的麻烦，因此每次请求进入请求正文时只需要从中检索一个缓存。在启动时缓存这些 POST 请求是正确的方法吗？

此外，可能需要添加更多 CSV 文件以获取各种数据。什么是使这种可扩展性的方法？

CSV 文件的格式（键名）将相同，因此可以以相同的方式解析每个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:15:21.177

它可以根据您的要求以 N 种方式实现，这里是一个简单的例子。你可以保留一个类

```
class Contact{
  private String firstName;
  private String lastName;
} 
```

在你的另一个持有这个价值的班级中

```
class RestEnterpriseService{

  List<Contact> contacts;

  @PostConstruct
  init(){
    contacts = readFromJSON("JSON URL");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:26:25.453

这可以通过多种方式完成。

如果您使用的是 Spring Framework 或 Java EE 容器，则可以使用上述`PostConstruct`@AvinashSingh 所述的样式解决方案。

如果您在某个 Servlet 容器中，您可以使用 Servlet 的 Listener 或其他方式来完成启动任务。

您也可以自己实现它，有很多方法可以做到这一点。就像使用一个守卫变量来检测你的`contacts`列表是否被缓存；或者使用像单例设计模式这样的技能。

# algorithm - 盒子布局的最佳包装

> ID：15193024
> 
> 赞同：1
> 
> 时间：2013-03-04T01:11:43.580
> 
> 标签：algorithm, packaging

我正在用一块纸板剪下一个切口来制作一个带腿的盒子。您可以使用在平面上布置的模型来描述每个部分的大小，如下所示：[http ://www.istockphoto.com/stock-photo-1504882-cardboard-box-layout.php](http://www.istockphoto.com/stock-photo-1504882-cardboard-box-layout.php)

由于我的设计有腿，而不仅仅是一个盒子，所以布局并不那么简单。只要折叠时一切正常，这些部分不必按任何顺序放置。这让我想到，有没有一种算法可以找到这样的布局的最接近包装？这听起来类似于装箱问题，但有更多限制。有任何想法吗？

编辑：通过最紧密的包装，我的意思是产生一种使用最少材料的布局。

# ios - 保存到 RKManagedObjectStore 的 mainQueueManagedObjectContext 的实体在下次构建时消失

> ID：15193025
> 
> 赞同：3
> 
> 时间：2013-03-04T01:11:56.030
> 
> 标签：ios, core-data, restkit

使用 RestKit v0.20.0-rc1，我成功地创建了 CoreData 映射并从捆绑的 JSON 文件中导入对象，并让数据在多个构建中保持不变。但是，当我创建自己的实体并保存它时，如果我使用 [RKManagedObjectStore defaultStore].mainQueueManagedObjectContext，该实体会在下一次构建时立即消失，但如果我使用 [RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext，该实体会正确保留。

```
 UserAccount *userAccount = [NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:managedObjectContext];
    userAccount.userID = @(userID);
    [userAccount addContactMethodsObject:phone];
    NSError *error = nil;
    if(![managedObjectContext save:&error])
        NSLog(@"%@", error); 
```

在上述代码中使用任一 managedObjectContext 都不会出错，并且从同一上下文中提取的任何内容都会正确返回实体。但是在后续构建中，如果我使用 mainQueueManagedObjectContext，即使上面的代码在主线程上运行，fetches 也将始终返回 nil。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T22:36:53.943

当您在使用 mainQueueManagedObjectContext 创建的上下文上使用 save: 时，它不会将其更改保存到存储中。根据 RKManagedObjectStore 的文档（我的粗体）：

> 托管对象上下文层次结构旨在将主线程与磁盘 I/O 隔离并避免死锁。因为主上下文管理自己的私有队列，**所以保存主队列上下文不会导致对象被保存到持久存储中。还必须保存主要上下文，以便将对象持久化到磁盘。**

如果您想保留您的更改并仍然使用 mainQueueManagedObject 上下文，请尝试使用

```
- (BOOL)saveToPersistentStore:(NSError **)error 
```

这将推动上下文层次结构的变化。

RKManagedObjectStore 的相关文档可以在[http://restkit.org/api/latest/Classes/RKManagedObjectStore.html#//api/name/persistentStoreManagedObjectContext找到](http://restkit.org/api/latest/Classes/RKManagedObjectStore.html#//api/name/persistentStoreManagedObjectContext)

restkit 的 NSManagedObject 类别的文档可以在 [http://restkit.org/api/0.20.0-pre3/Categories/NSManagedObjectContext+RKAdditions.html找到](http://restkit.org/api/0.20.0-pre3/Categories/NSManagedObjectContext+RKAdditions.html)

# python - Python 列表和运算符

> ID：15193027
> 
> 赞同：4
> 
> 时间：2013-03-04T01:12:17.843
> 
> 标签：python

来自艰难地学习 Python：

> Python 看到您提到的 mystuff 并查找该变量。它可能必须向后看，看看你是否用 = 创建，看看它是否是一个函数参数，或者它是否是一个全局变量。无论哪种方式，它都必须首先找到神秘的东西。
> 
> 一旦它找到了 mystuff，它就会点击 . （句点）运算符并开始查看属于 mystuff 的变量。由于 mystuff 是一个列表，它知道 mystuff 有一堆函数。
> 
> 然后它点击 append 并将名称“append”与 mystuff 所说的所有名称进行比较。如果 append 在那里（它是），那么它会抓住它来使用。接下来，Python 看到 (（括号）并意识到，“哦，嘿，这应该是一个函数。”此时它像正常一样调用（也就是运行，执行）该函数，但它使用一个额外的参数调用该函数。
> 
> 那个额外的论点是......神秘的！我知道，很奇怪吧？但这就是 Python 的工作方式，所以最好记住它并假设没问题。然后会发生什么，最后是一个看起来像这样的函数调用：append(mystuff, 'hello') 而不是你读到的 mystuff.append('hello')。

他从哪里得到“神秘的东西”？而且我仍然不确定那个时期运算符的工作原理（对不起，我是新手，请多多包涵），稍后我们会得到这个：

```
ten_things = "Apples Oranges Crows Telephone Light Sugar"

print "Wait there's not 10 things in that list, let's fix that."

stuff = ten_things.split(' ') 
```

我没有看到该字符串是如何在最后一行之后变成一个列表的，.split 会自动将它变成一个还是什么？他正在做的那个时期“分裂”或“追加”的事情的名称是什么？在编程中搞砸我的主要事情之一是我不知道很多东西实际上叫什么。我知道函数、变量等，但是像 .split 这样的东西让我很困惑。

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:15:03.483

`stuff = ten_things.split(' ')`不会改变 的值`ten_things`。相反，它会创建一个名为的新变量并将其创建`stuff`的列表保存`ten_things.split(' ')`到其中。这里作为参数传递给`split`方法的空间很重要。它的意思是 Python 应该使用s 参数作为分隔符来获取字符串`ten_things`并将其**拆分。**`split`

例子：

`"This is a string".split(' ') == ["This", "is", "a", "string"]`

或者

`"This|is|a|string".split('|') == ["This", "is", "a", "string"]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:55:09.860

关于“他从哪里得到‘神秘的东西’？”，`mystuff`是某种对象，在对象的属性值之间（或在其类的属性值之间）有*方法*或*函数。*点（句点）是限定符运算符；例如，`mystuff.append`将相关功能限定或标识为`append`与 object 关联的功能`mystuff`。对象方法通常有一个隐式参数（通常称为`self`）作为第一个参数，并且该参数等于该方法所属的对象。在这种情况下，就是`mystuff`.

如上一个答案中所述，`split`拆分字符串并返回一个列表。有关更多信息，另请参阅 关于以下内容的[教程](http://www.tutorialspoint.com/python/string_split.htm)`split`点：

> split() 方法返回字符串中所有单词的列表，使用 str 作为分隔符（如果未指定，则在所有空格上拆分），可选择将拆分数限制为 num。... 以下是 split() 方法的语法`str.split(str="", num=string.count(str))`：

# html - 不能同时使用网站图标和样式表，它们会互相破坏

> ID：15193029
> 
> 赞同：-1
> 
> 时间：2013-03-04T01:13:07.077
> 
> 标签：html, favicon

这是我的问题：我的标题中有这 2 个标签，但它们正在互相争斗。如果我将快捷方式图标的 rel 标记放在样式表的 rel 标记下方（因为它是在之后解析的），我的样式表会中断并且不显示，但图标在那里。如果我保持原样，则图标不会显示。我显然做错了什么，但我无法弄清楚。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:14:54.483

```
<link rel="shortcut icon" href="tophat2.ico">
<link rel="stylesheet" type="text/css" href="style.css" rel="shortcut icon" href="tophat2.jpg"/> 
```

删除第二个标签中的`rel="shortcut icon"`and the`href="tophat2.jpg"`并关闭第一个标签。

```
<link rel="shortcut icon" href="tophat2.ico"/>
<link rel="stylesheet" type="text/css" href="style.css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:18:57.697

尝试删除这一行：

并将您的 favicon 上传到 Web 服务器根目录并将其重命名为 favicon.ico

# types - Go——如何处理结构类型之间的公共字段

> ID：15193030
> 
> 赞同：7
> 
> 时间：2013-03-04T01:13:23.503
> 
> 标签：types, struct, go

如果我有两种类型：

```
type A struct {
      X int
      Y int
}

type B struct {
      X int
      Y int
      Z int 
} 
```

鉴于两者都访问同名字段并返回它们的总和，有没有什么方法可以在不需要两种方法的情况下实现以下目标？

```
func (a *A) Sum() int {
     return a.X + a.Y
}

func (b *B) Sum() int {
     return b.X + b.Y
} 
```

当然，如果是 X 和 Y 方法，我可以定义一个包含这两种方法的接口。有没有字段的类比？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T01:18:49.240

嵌入. `A`_`B`

```
type A struct {
      X int
      Y int
}

func (a *A) Sum() int {
     return a.X + a.Y
}

type B struct {
      *A
      Z int 
}

a := &A{1,2}
b := &B{&A{3,4},5}

fmt.Println(a.Sum(), b.Sum()) // 3 7 
```

[http://play.golang.org/p/fjT9c-m_Lj](http://play.golang.org/p/fjT9c-m_Lj)

但是不，没有字段接口。只有方法。

# python - 将字符串转换为对象名称

> ID：15193032
> 
> 赞同：8
> 
> 时间：2013-03-04T01:13:31.643
> 
> 标签：python, object, instance

我需要这方面的帮助。如何将字符串转换为变量/对象/实例名称，因为我不知道如何对其进行分类。
假设我的代码是：

```
a = {}
b = {}

class Test:
    def getKeys(self, var):
        return var.keys() #where var refers to the dictionary and its a string initially 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T01:21:29.473

自从我用 Python 做过任何事情以来，它已经永远存在了，但我确实记得曾经遇到过这个问题。我建议你看看这个[`eval()`](https://docs.python.org/2/library/functions.html#eval)功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T01:28:51.703

如果我理解正确，您的变量`var`是一个字符串，可能是`"a"`or `"b"`。您想使用该字母来选择要查找的正确字典全局变量。

我建议将您的字典放入另一个字典中，您可以使用键来按名称查找它：

```
my_dicts = {"a":a, "b":b}

class Test:
    def getkeys(self, dict_name):
        return my_dicts[dict_name].keys() 
```

然而，这可能只是一个设计问题。与其向`getkeys`方法发送变量名，不如简单地发送字典本身并使用您当前的代码？

而不是`Test().getkeys("a")`, 调用`Test().getkeys(a)`（无引号）。

# linux - 在 Expect 脚本中运行 Rsync 命令

> ID：15193035
> 
> 赞同：1
> 
> 时间：2013-03-04T01:14:12.757
> 
> 标签：linux, bash, unix, rsync, expect

我有以下使用 rsync 并期望自动化该过程的期望脚本。

```
#!/usr/bin/expect
rsync -a --progress --delete --rsh='/usr/bin/ssh' root@00.00.00.00:/var/www/test/ /var/www/test
expect "password:"
send "XXXXX";
interact 
```

但是 rsync 命令当然不能在期望脚本中工作。任何解决方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T17:40:25.123

正如 Raphael 已经意识到“在 rsync 解决问题之前添加“spawn””

接得好！

# mysql - 三张表使用外键链接在一起

> ID：15193037
> 
> 赞同：1
> 
> 时间：2013-03-04T01:14:29.990
> 
> 标签：mysql

我有三张桌子

1.  订单表

    *   ID
    *   用户名
    *   美食家
    *   酒鬼
2.  食物

    *   美食家
    *   姓名
3.  喝

    *   酒鬼
    *   姓名

命令如下 创建 order_table 表-------------------------------------------- -----

```
create table order_table(
id int not null auto_increment, 
user_name varchar(26) not null, 
foodid int(11) not null, 
drinkid int(11) not null, 
primary key(id), 
FOREIGN KEY (foodid) REFERENCES food(foodid),
FOREIGN KEY (drinkid) REFERENCES food(drinkid)
)ENGINE=innodb; 
```

创建食物表 ------------------------------------------------------------ --------

```
create table food (
foodid int(11) not null auto_increment, 
name varchar(26) not null, 
primary key(foodid)
)ENGINE=innodb; 
```

创建饮料表 ------------------------------------------------------------ --------

```
create table drink (
drinkid int(11) not null auto_increment, 
name varchar(26) not null, 
primary key(drinkid)
)ENGINE=innodb; 
```

现在我遇到的问题是

```
ERROR 1005 : Can't create table 't.order_table' (errno: 150) 
```

其中 t 是我的数据库名称，所以我可以为这段代码做什么，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:28:56.653

需要纠正三个问题。首先，`FOREIGN KEY`定义需要`()`围绕列名，如下所示：

```
FOREIGN KEY (foodid) REFERENCES food (foodid),
/*---------^^^^^^^^^^----------------^^^^^^^^*/ 
```

其次，您的`drinkid`外键定义引用了错误的表，`food`而不是`drink`：

```
FOREIGN KEY (drinkid) REFERENCES drink(drinkid) 
```

最后，您必须重新排列表顺序，以便在它引用的两个表*之后*`order_table`创建。把它们放在一起。然后它将正确执行，如本演示所示：[http ://sqlfiddle.com/#!2/b3aee](http://sqlfiddle.com/#!2/b3aee)

 *```
create table food (
  foodid int(11) not null auto_increment, 
  name varchar(26) not null, 
  primary key(foodid)
)ENGINE=innodb;

create table drink (
  drinkid int(11) not null auto_increment, 
  name varchar(26) not null, 
  primary key(drinkid)
)ENGINE=innodb;

create table order_table(
  id int not null auto_increment, 
  user_name varchar(26) not null, 
  foodid int(11) not null, 
  drinkid int(11) not null, 
  primary key(id), 
  FOREIGN KEY (foodid) REFERENCES food(foodid),
  FOREIGN KEY (drinkid) REFERENCES drink(drinkid)
)ENGINE=innodb; 
```*

# ruby-on-rails - 如何安装 gcc-4.2

> ID：15193038
> 
> 赞同：1
> 
> 时间：2013-03-04T01:14:32.863
> 
> 标签：ruby-on-rails, ruby, xcode, gcc, rvm

我正在尝试更新系统上的 ruby​​ 和 rails (osx 10.8.2)

当我跑

```
rvm install 1.9.3 --with-gcc=gcc-4.2 
```

我收到以下错误：

```
You requested building with 'gcc-4.2' but it is not in your path. 
```

2个问题；如何使用 gcc-4.2 安装（我在 xcode 中安装了命令行工具）？另外，我如何将它带到正确的路径？

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:47:34.700

如果您还没有使用 Homebrew，您可能需要安装它以及 apple-gcc42 软件包。此脚本将为您执行此操作，但您可能只想手动运行所需的部分：[https ://github.com/thoughtbot/laptop/blob/master/mac](https://github.com/thoughtbot/laptop/blob/master/mac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:23:24.780

尝试使用这个包安装： [https ://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

# regex - 在字符串中查找 3 个或更多重复字符

> ID：15193040
> 
> 赞同：1
> 
> 时间：2013-03-04T01:14:37.277
> 
> 标签：regex, python-3.x

我试图在用户输入的字符串中找到重复超过 2 次的字符。我有这个，但它没有进入 if 语句。

```
password = asDFwe23df333

s = re.compile('((\w)\2{2,})')

m = s.search(password)

if m:
     print ("Password cannot contain 3 or more of the same characters in a row\n")

     sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:30:53.227

您需要在您的正则表达式前加上字母“r”，如下所示：

```
s = re.compile(r'((\w)\2{2,})') 
```

如果您不这样做，那么您将不得不加倍所有反斜杠，因为 Python 通常将反斜杠视为其正常字符串中的转义字符。由于这使得正则表达式比通常更难阅读，因此 Python 中的大多数正则表达式都包含该前缀。

此外，在您包含的代码中，您的密码不在引号中，但我假设它在您的代码中包含引号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T01:22:39.170

难道你不能简单地遍历整个字符串，每次你找到一个等于前一个字符的时候，你就增加一个计数器，直到它达到 3 的值？如果字符与以前不同，只需将计数器设置回 0 即可。

编辑：或者，您可以使用：

s = 'aaabbb' re.findall(r'((\w)\2{2,})', s)

并检查第二行返回的列表是否有任何元素。

# android - json数据和android有问题

> ID：15193042
> 
> 赞同：0
> 
> 时间：2013-03-04T01:14:47.213
> 
> 标签：android, json

我被这个问题困住了。我正在尝试从 mysql 数据库中提取一些 json 数据。我目前想使用 AsyncTask 在后台完成大部分工作，并可能使用不同的 php 脚本来运行不同的查询返回不同的数据（这就是我没有将直接 url 插入到 httpost 的原因）

基本上现在，我想从数据库中检索数据，将其传递给一个变量，然后在 TextView 中显示该变量。

当我运行代码时，它只是在 TextView 中显示“无数据”，所以有些东西不起作用。我的 php 文件工作正常！继承人的代码：非常感谢任何帮助:)

```
package com.example.test1;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class clubpage extends Activity {

TextView test;
String clubphp = "http://10.0.2.2/corkgaa/Nemo.php";
String event = "No Data"; 
String name = "No Data"; 
String price = "No Data"; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.clubpage);

    test = (TextView)findViewById(R.id.clubinfo);

    new Dbhandler().execute(clubphp);

    test.setText(name);     

}

public class Dbhandler extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        JSONArray jArray; 
        String result = "no response"; 
        InputStream is = null; 
        StringBuilder sb = null;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        //http post 
        try{ 
            HttpClient httpclient = new DefaultHttpClient(); 
            HttpPost httppost = new HttpPost("clubphp"); 
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
            HttpResponse response = httpclient.execute(httppost); 
            HttpEntity entity = response.getEntity(); 
            is = entity.getContent(); 
            }
        catch(Exception e){ 
                Log.e("log_tag", "Error in http connection"+e.toString()); 
            }

        //convert response to string 
        try{ 
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 
            sb = new StringBuilder(); 
            sb.append(reader.readLine() + "\n"); 
            String line="0"; 
            while ((line = reader.readLine()) != null) { 
                sb.append(line + "\n");
                } 
            is.close(); 
            result=sb.toString(); 
            }
        catch(Exception e){ 
            Log.e("log_tag", "Error converting result "+e.toString()); 
            }

        //parsing data

        try{ 
            jArray = new JSONArray(result); 
        JSONObject json_data=null; 

        for(int i=0;i<jArray.length();i++){ 
            json_data = jArray.getJSONObject(i); 
            name=json_data.getString("NAME"); 
            event=json_data.getString("EVENT");
            price=json_data.getString("PRICE");
            }
        }
        catch(JSONException e1){ 

            }
        catch (ParseException e1) { 
            e1.printStackTrace();
            }
        return name;
    }   

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
} 
```

}

日志猫：

```
03-04 15:25:35.139: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.149: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.239: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.259: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.259: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.270: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.279: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.279: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.312: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.312: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.349: I/ActivityManager(288): START u0 {cmp=com.example.test1/.clubpage} from pid 791
03-04 15:25:35.369: W/WindowManager(288): Failure taking screenshot for (246x410) to layer 21020
03-04 15:25:35.389: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.419: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.429: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.438: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.459: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.479: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.479: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.479: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.588: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.588: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:35.609: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.028: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.099: I/Choreographer(791): Skipped 31 frames!  The application may be doing too much work on its main thread.
03-04 15:25:36.109: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.168: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.268: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.279: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.279: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.289: V/PhoneStatusBar(580): setLightsOn(true)
03-04 15:25:36.299: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.358: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.409: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-04 15:25:36.409: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.421: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.439: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.439: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.439: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.729: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.729: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.773: I/Choreographer(791): Skipped 158 frames!  The application may be doing too much work on its main thread.
03-04 15:25:36.779: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:36.779: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.209: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.209: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.240: I/ActivityManager(288): Displayed com.example.test1/.clubpage: +1s832ms
03-04 15:25:37.269: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.269: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.299: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.309: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.331: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.399: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.589: I/Choreographer(791): Skipped 48 frames!  The application may be doing too much work on its main thread.
03-04 15:25:37.649: D/dalvikvm(288): GC_CONCURRENT freed 980K, 35% free 7576K/11552K, paused 9ms+56ms, total 701ms
03-04 15:25:37.859: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.859: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.911: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.911: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.919: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:37.949: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.214: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.250: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.250: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.309: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.369: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.409: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.419: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.439: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.479: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.519: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.530: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.530: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.549: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.549: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.549: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.549: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.629: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.629: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.690: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.699: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.699: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.719: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.739: W/Trace(288): Unexpected value from nativeGetEnabledTags: 0
03-04 15:25:38.759: W/Trace(791): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T07:44:37.867

尝试用您的系统 IP 地址替换您的 10.0.2.2 并添加一个在返回名称之前打印名称的日志。在 doInbackground 中了解系统的 IP 地址，在命令提示符下执行 ipconfig

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:44:21.313

HttpPost httppost = new HttpPost("clubphp");

只需将此行替换为以下代码

HttpPost httppost = 新 HttpPost(arg0[0]);

和

执行后执行如下

```
@Override
    protected void onPostExecute(String resultName) {
       test.setText(resultName);
    } 
```

如果您发现任何问题，希望它仍然可以在这里发布 log cat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:15:33.660

您需要向`onPostExecute()`您的类添加一个方法`Dbhandler`并在该方法中设置 TextView 的文本值：

```
public class Dbhandler extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... arg0) {
        [...]
        return name;
    }

    @Override
    protected void onPostExecute(String newName) {
        test.setText(newName);
    }
} 
```

# php - 如何使用 PHP 将电子邮件退回

> ID：15193045
> 
> 赞同：4
> 
> 时间：2013-03-04T01:15:02.693
> 
> 标签：php, email, email-bounces

我通过一个 PHP 脚本对所有电子邮件进行管道传输，该脚本根据有效地址的数据库检查收件人地址。如果它存在，脚本的其余部分将处理它。但是，如果它不存在，我该如何退回电子邮件，就像我没有脚本时服务器一样？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:22:35.957

邮件是通过 smtp 协议接收的，在您的情况下，我还假设端口 25 上运行了一些服务，该服务将侦听来自外部域的邮件请求。

有不同的方式来退回邮件

> -> 在 smtp 级别本身反弹，如当您获取收件人列表时，检查 f 或 id 是否存在，如果不存在则给出 4xx 响应。然后，退回邮件将由发件人域自动生成。
> 
> -> 如果您已接受来自域的邮件，例如 gmail.com，那么您必须使用您的退回邮件与 gmail 建立新连接，这与从您的服务器向 gmail.com 发送新邮件相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T16:36:53.517

事实证明这很容易解决：只需在 PHP 脚本中回显某些内容（例如，“此帐户不存在。”），然后邮件程序守护程序会生成包含此输出的退回电子邮件。

# html - CSS浮动时髦

> ID：15193049
> 
> 赞同：0
> 
> 时间：2013-03-04T01:15:19.833
> 
> 标签：html, css

我的花车表现得很奇怪（好吧，我猜他们表现得像他们应该做的那样），但我似乎不明白为什么。出于某种原因，包含“亚历克斯”的 div 框总是下降到另一行。有什么我在搞砸吗？

样式.css

```
.clear {
    clear:both;
}
.page-header {
    width:100%;
    background:#efefef;
    border-bottom:1px #ddd solid;
    padding:3px 10px;
    margin-bottom:24px;
}
.page-header-title {
    width:200px;
    float:none;
}
.page-header-search {
    float:left;
    width:100px;
} 
.page-header-top_menu {
    float:right;
    width:200px;
} 
```

索引.html

```
<div class="page-header">
        <div class="page-header-search">
            blah
        </div>

        <div class="page-header-title">
            Calender
        </div>

        <div class="page-header-top_menu">
            Alex
        </div>

        <div class="clear"></div>
    </div> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:22:47.900

你错误地浮动它。您应该将`float`属性分配给`.page-header-title`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:24:14.967

如果你交换

```
float: none; 
```

对于“日历”-div

```
float: left; 
```

“亚历克斯”表现更好。

您没有指定它的外观。

[http://jsfiddle.net/wDp3p/](http://jsfiddle.net/wDp3p/) << 我用红色边框可视化了您的 div 结构。

[http://jsfiddle.net/wDp3p/1/](http://jsfiddle.net/wDp3p/1/) << 带浮动的版本：左；

“float”并不是真正用于表格列之类的解决方案，而是用于浮动 - 因此“calender”-div 直接在其左手前一个元素之后浮动。

# ios - 应用大小和动态下载资源

> ID：15193051
> 
> 赞同：0
> 
> 时间：2013-03-04T01:15:24.703
> 
> 标签：ios, appstore-approval

我即将发布的应用程序将在应用程序中解锁某些内容时动态下载与艺术有关的图像和资源。这将减少应用程序的大小，并且应用程序只会在需要时下载资源。与 Droid 开发非常相似，因为它们的大小上限为 50mb。

有谁知道这是否可能会损害苹果的审批流程？将要下载的扩展可能在 30mb 左右，如果用户决定对数据执行此操作，可能会非常慢。任何与苹果有关的关于此类过​​程的建议或先前的问题都会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:19:40.000

**你应该很好。**我有一个应用程序，当它发布时，它会下载每一个新的 XKCD 网络漫画。每个都是图像，这为应用程序增加了相当大的大小。

为了安全起见，我建议在应用程序描述（在应用程序内和 iTunes 商店）中包含一些内容，告诉用户应用程序动态下载内容。没有规则反对它，但让用户知道总是好的。

# css - css定位问题

> ID：15193060
> 
> 赞同：0
> 
> 时间：2013-03-04T01:16:30.003
> 
> 标签：css

我要做的是，将两个 div 放在一行中，左侧 div 的宽度是固定的，而右侧 div 的宽度在调整浏览器大小时调整大小（已经实现）。我要实现的是，为右div设置一个resize限制，即右div宽度减小，直到宽度大于等于n px。之后浏览器水平滚动。

（这样做的原因是我在右侧 div 上有一个带有 5 个选项卡的 jquery 选项卡，当我调整浏览器大小时，选项卡会在彼此的按钮上跳开，因此我想停止右侧 div 缩小直到最后一个选项卡）。

到目前为止，这是我的代码：

```
<div style="float: left; width: 300px; margin-right: 10px; ">

</div>

<div style="overflow: hidden;">

</div> 
```

请让我知道是否有更好的方法将两个 div 放在一行中（左侧宽度固定，右侧可调整大小限制）。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:22:07.060

您将查看最小宽度/最大宽度或@media

对于 min-width 只需给 div2 一个类或 id 并设置 min-width

```
 #div2{
       min-width:900px;
    } 
```

要控制不同的屏幕尺寸，请使用 @media 并设置最大/最小宽度。

```
 @media only screen and (max-width: 499px) {
      /* rules that only apply for canvases narrower than 500px */
    }

    @media only screen and (min-width: 500px) {
      /* rules that only apply for canvases wider than 500px */
    } 
```

这里有更多信息：[https ://mislav.net/2010/04/targeted-css/](https://mislav.net/2010/04/targeted-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:22:33.510

尝试：

```
<div class='left'></div>

<div class='right'></div>

<styles>
.left {
    float: left;
    margin-right: 10px;
    width: 300px;
}
.right {
    float: left;
    max-width: 300px;
    overflow-x: auto;
}
</styles> 
```

# c++ - 显式转换与使用虚函数引用的隐式转换

> ID：15193061
> 
> 赞同：0
> 
> 时间：2013-03-04T01:16:31.710
> 
> 标签：c++, reference, polymorphism, type-conversion

我确实知道一点多态性，但在这里我有点迷失了，关于隐式转换 from`B`到`A`方法 from`B`被调用，但显式调用方法 from `A`，这是有道理的，但它只有在这种情况下才有效方法是虚拟的，否则在这两种情况下`ShowA`都是输入（`A`调用类中的方法）。

```
class A
{
public:
    A(){};
    ~A(){}
public:
    int n;
      virtual void Show(){ cout << "ShowA" << endl;  };
};

class B : public A
{
public:
    B(){};
    ~B(){}
     virtual void Show() { cout << "ShowB" << endl; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    B b;
    A& a = b; //ShowB
    A& a = (A)b; //ShowA
    a.Show();

    //Extra:
    A& extra = extra;

    return 0;
} 
```

另外不被禁止是有原因`A& extra = extra`的，还是仅仅因为禁止无意义的事情不重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:37:17.323

```
A& a = (A)b; 
```

这会创建一个 类型的临时对象`A`，复制 的基类部分`b`。然后它会尝试引用这个临时文件。

幸运的是，C++ 语言不允许您对临时对象进行（非常量）引用，从而防止您意外犯这种错误。

不幸的是，您的编译器提供了允许您这样做的“语言扩展”，因此如果您必须使用该编译器，那么您需要更加小心。

一般来说，避免像瘟疫一样的 C 风格的演员表。当您确实需要显式转换时，请尽可能使用最严格的 C++ 样式转换，以帮助编译器捕获错误。

> 另外不被禁止是有原因`A& extra = extra`的，还是仅仅因为禁止无意义的事情不重要？

没有充分的理由允许这样做。`int i, &r=i;`据推测，它不是被禁止的，因为在不禁止合法声明的情况下禁止它会相当复杂`void *p = &p;`

# c# - 如何在asp.net c#中将GridView的值从一个页面传递到另一个页面？

> ID：15193062
> 
> 赞同：1
> 
> 时间：2013-03-04T01:16:40.847
> 
> 标签：c#, asp.net

如何将网格视图的值从一个页面传递到另一个页面？这是我的代码：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType != DataControlRowType.Header)
        {
        //  //  e.Row.Cells[0].Text = "<a href=" + "javascript:window.open('http://www.google.com')" + " >" + e.Row.Cells[0].Text + "</a>";
            e.Row.Cells[0].Text = "<a id=\"linkres\"  CssClass=\"dgrid\" runat =\"server\"  href= \"javascript:window.open('Preview.aspx'),_self\" >" + e.Row.Cells[0].Text + "</a>";
        }

    } 
```

我需要在 GridView 上传递所选项目的值，然后检索到另一个页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:19:22.700

每当您需要访问多个页面上的某些数据时，您有以下选择：

1.  将其存储在会话变量中。
2.  在 URL 的查询字符串中传递它。
3.  将其存储在数据库中/将其拉到另一页上。
4.  将其存储在 cookie 中。

对于你正在做的事情，我通常会选择第一个。

```
Session["GridViewValue"] = e.Row.Cells[0].Text; 
```

在另一页上

```
string something = Session["GridViewValue"].ToString(); 
```

# https - 在 mySql 中存储敏感数据

> ID：15193064
> 
> 赞同：0
> 
> 时间：2013-03-04T01:16:50.047
> 
> 标签：https, security, public-key-encryption, encryption-asymmetric

我希望加强我的一个客户站点的安全性。没有设置支付提供商，因此敏感的直接借记信息需要在 mySql 服务器上。此直接借记信息需要会计部门的用户可读。

测试服务器设置如下：

1.  目前，主站点位于 wordpress 博客上。
2.  客户使用 EV SSL 证书填写 HTTPS 加密表格。
3.  数据存储在与 wordpress 数据库不同的数据库中。
4.  直接借记详细信息当前存储为纯文本

现在第 4 部分让我感到困扰……但目前还可以，因为仅在测试服务器上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:39:06.967

这真的很难回答，因为这取决于您需要保护这些数据的程度。

第一步显然是加密存储在 mysql 中的所有详细信息，以防有人得到你的数据库的转储。

这个解决方案很好，但它引入了漏洞，就好像有人从您的应用程序服务器获取解密密钥一样，他们无论如何都能够解密数据库的转储。

从这里有很多解决方案需要考虑，我相信通过一些研究你应该能够找到一些不错的解决方案，但我想到的一种方法是：

您可以使用公钥/私钥加密算法加密应用程序服务器上的数据。公钥只能用于加密存储在您的应用服务器上的信息。如果这被黑了，他们唯一能做的就是向您的数据库添加更多数据 =/。在这种情况下，私钥将是每次人们需要查看此信息时都需要输入的密码。

这有一个明显的缺点，即您无法对您的数据进行任何机器处理，因为它的传输一直是完全加密的，直到它显示出来。

（并且您仍然存在有人访问您的应用程序服务器并简单地将会话文件/memcache 转储到必须临时存储密钥的位置的漏洞）

老实说，我要做的第一件事是以一种或另一种方式加密整个数据库。仅此一项就增加了一层不错的保护。在大多数情况下，转储数据库比访问服务器的文件系统更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:40:25.903

您是在谈论银行帐户详细信息/信用卡详细信息还是两者兼而有之？

请注意，存储信用卡详细信息会附带满足 PCI 要求。

此外，如果您打算存储机密详细信息，切勿以未加密的方式存储它们。

有任何问题，请告诉我。

法比奥@fcerullo

# oracle11g - ORA-00911: 无效字符错误

> ID：15193066
> 
> 赞同：2
> 
> 时间：2013-03-04T01:16:54.907
> 
> 标签：oracle11g, ora-00911

```
DROP TABLE employee CASCADE CONSTRAINTS;
CREATE TABLE employee (
fname    varchar2(15) not null, 
minit    varchar2(1),
lname    varchar2(15) not null,
ssn      char(9),
bdate    date,
address  varchar2(30),
sex      char,
salary   number(10,2),
superssn char(9),
dno      number(4),
); 
```

你好，谁能告诉我为什么我收到

```
ORA-00911: invalid character Error 
```

当我尝试在 Oracle Application Express 11g 中运行此代码时？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:18:47.707

最后一行之后似乎有一个额外的逗号：

```
dno      number(4), -- <<=== Here 
```

删除它应该可以解决问题（[链接到 sqlfiddle 上的演示](http://sqlfiddle.com/#!4/a4f36)）。

# javascript - 如果只有一个选项可用，则禁用选择

> ID：15193071
> 
> 赞同：1
> 
> 时间：2013-03-04T01:18:37.173
> 
> 标签：javascript, jquery

嘿，所以我有这个 HTML（通过 PHP 循环输出）：

```
<select class="dropdown" id="pa_genre" name="attribute_pa_genre">
    <optgroup label="Choose an option:"></optgroup>
    <option value="sport" selected="selected">Sport</option>
</select> 
```

还有这个 jQuery（取自[Disable a <select /> if there is only one <option /> with jQuery](https://stackoverflow.com/questions/5002360/disable-a-select-if-there-is-only-one-option-with-jquery)）：

```
$(document).ready(function(){
    var $sca = $("select.dropdown");
    if ($sca.find("option").length <= 1) {
        $sca.prop('disabled', true);
    }
}); 
```

但不能让它工作..我在页面上确实有多个具有相同类的下拉列表（因此为什么定位类而不是 id）。我将其更改为`attr`，`prop`因为我确定它是新版本并且`attr`不再使用了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:26:52.047

由于您有多个输入，因此您需要某种形式的迭代来`disabled`相应地设置它们的属性。

```
$("select.dropdown").prop('disabled', function() {
    return $('option', this).length < 2;
}); 
```

[**小提琴**](http://jsfiddle.net/8qQK4/1/)

上面的效果与以下相同：

```
$("select.dropdown").each(function() {
    this.disabled = $('option', this).length < 2;
}); 
```

* * *

上面的两个摘要都将自动设置`disabled`为`false`Select具有2个或更多选项时。如果这产生了有意义的差异，您可以使用此代码段禁用具有 < 2 个选项的选择，而无需自动重新启用具有 >= 2 个选项的选择：

```
$("select.dropdown").each(function() {
    if ( $('option', this).length < 2 ) this.disabled = true;
}); 
```

[**小提琴**](http://jsfiddle.net/8qQK4/2/)

# java - 让用户输入变量

> ID：15193072
> 
> 赞同：0
> 
> 时间：2013-03-04T01:18:38.850
> 
> 标签：java, variables, random, input

我正在编写的当前代码是让用户猜测 0-10 之间的随机数，然后让代码继续循环，直到他们得到正确的数字。到目前为止，这就是我所拥有的

```
public static void main(String[] args) {

    Scanner reader = new Scanner(System.in);
    System.out.println("A number between 0-10");
    //get user input for number
    n=reader.nextInt();

    Random generator = new Random(); 
    int number = (int) (Math.random()*10);
    int a = (int)number;
} 
```

现在，当我运行顶部时，我得到用户输入，而当我运行底部时，它会打印出 1-10 之间的随机数。

我想知道如何获得该用户输入并使其成为与我设置的随机变量进行比较的变量`int a`？

谁能指出我正确的方向？

# jquery - 在单个帖子中遇到菜单滑块问题 - Jquery

> ID：15193079
> 
> 赞同：0
> 
> 时间：2013-03-04T01:19:03.803
> 
> 标签：jquery, wordpress, menu, slider

我正在使用在活动父页面上保持突出显示的菜单滑块。但是，我创建了一个“新闻”模板页面，因此当访问者单击单个帖子时，该页面没有 JQuery 需要为活动项目调用的类“curren_page_item”。我试着想出一个快速解决这个问题：

```
if ($('body').hasClass('.single')) {
        $('#menu-item-15').addClass('.current_page_item');
} 
```

我希望正文标签具有“single”类的任何页面为新闻页面（#menu-item-15）提供“current_page_item”类，以便滑块可以工作。但那里没有运气。任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:48:26.910

您应该[`body_class($class)`](http://codex.wordpress.org/Function_Reference/body_class)在模板文件中包含该函数。

然后你可以随心所欲地操纵它..

例子 ：

```
add_filter('nav_menu_css_class', 'AddCurrentMenuItemClass',1,2);

function AddCurrentMenuItemClass($classes,$item)
{
$link = site_url().$_SERVER['REQUEST_URI'];
if(strpos($link, $item->url) !== false)
{
$classes[] = 'current-menu-item';
}
return $classes;
} 
```

# ruby-on-rails - Ruby on Rails 控制器设计

> ID：15193081
> 
> 赞同：2
> 
> 时间：2013-03-04T01:19:08.330
> 
> 标签：ruby-on-rails

当我查看 Rails 控制器的示例时，我通常会看到如下内容：

```
class WidgetController < ActionController::Base

  def new
    @widget = Widget.new
  end

  def create
    @widget = Widget.new(params[:id])
    if @widget.save
      redirect_to @widget
    else
      render 'new'
    end
  end
end 
```

这可行，但有几个问题：

## 路线

如果我将小部件添加到我的 routes.rb 文件中：

```
Example::Application.routes.draw do
  resources :widgets
end 
```

`GET /widgets/new`will route to`new`和`POST /widgets`will route to `create`。

如果用户在新的小部件页面上输入错误信息并提交，他们的浏览器将显示带有 的 URL `/widgets`，但会呈现新模板。如果用户为页面添加书签并稍后返回或刷新页面，则将调用索引操作而不是新操作，这不是用户所期望的。如果没有索引操作或用户无权查看它，则响应将是 404。

## 代码重复

作为一个人为的例子，假设我的新方法中有一些棘手的逻辑：

```
def new
  @widget = Widget.new
  do_something_tricky()
end 
```

使用当前的方法，我会在`new`and中复制该逻辑`create`。我可以调用`new`from `create`，但是我必须修改`new`以检查是否`@widget`已定义：

```
def new
  @widget ||= Widget.new
  do_something_tricky()
end 
```

另外，这感觉不对，因为它降低了控制器操作的正交性。

## 该怎么办？

那么解决这个问题的*Rails 方法是什么？*我应该重定向到`new`而不是呈现新模板吗？我应该打电话`new`到里面`create`吗？我应该忍受它吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:29:10.880

一般来说，我认为*Rails*解决问题的方法是将棘手的方法放在模型上或作为辅助方法，因此控制器保持“瘦”，您不必确保为两者添加自定义行为`#new`和`#create`。

编辑：为了进一步阅读，我推荐“Rails AntiPatterns”一书，因为它们经历了很多这些常见的设计问题并提供了潜在的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:38:13.553

我不认为这是“轨道方式”中的问题，并且没有内置功能可以在不弄脏您的手的情况下允许这样做。用户在为刚刚提交并出现错误的表单添加书签时期望什么？用户不知道更好，他们不应该为失败的表单添加书签。

我认为重定向到`new_widget_path`是最干净的解决方案。但是，您应该保留错误并将它们显示在表单上。为此，我建议您将参数保留在会话中（我希望它小于序列化的 Widget 对象）。

```
def new
  @widget = widget_from_session || Widget.new 
end

def widget_from_session
  Widget.new(session.delete(:widget_params)) if session[:widget_params].present?
end
private :widget_from_session

# Before the redirect
session[:widget_params] =  params 
```

代码是不言自明的，`Widget.new`只会在`widget_from_session`返回 nil 时调用，这是 session[:widget_params] 存在的时候。调用`delete`哈希将返回删除的值并将其从原始哈希中删除。

**更新**选项 2 使用 ajax 提交表单怎么样？您的控制器可以受益于：

```
 respond_to :html, :json

  ...

  def create
    @widget = Widget.new params[:widget]
    @widget
    respond_with @widget, location: nil
  end 
```

根据响应代码（由 Rails 设置：201 Created 或 422 Unprocessable Entity），您可以显示错误（验证失败时在响应正文中可用）或将用户重定向到 @widget

这就是 StackOverflow 的做法：[https](https://stackoverflow.com/questions/ask) ://stackoverflow.com/questions/ask 。他们异步提交表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:24:20.413

您放入`do_something_tricky()`自己的方法并在 create 操作中调用它（但仅在您呈现新模板时，即验证失败时）。

至于书签问题，我不知道防止这种情况的好方法，而是修改路由并将创建操作设置为新操作，但使用`POST`

```
get '/users/new' => 'users#new'
post '/users/new' => 'users#create' 
```

更新：使用`resources`

```
resources :platos, except: :create do
  post '/new' => 'plates#create', on: :collection, as: :create
end 
```

然后你可以`create_platos_path`在你的表格中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:35:58.640

您不需要在两个 action 中编写相同的函数，而是使用 before_filter 。

如果您想在错误提交后拥有“widget_new_url”，那么在您的表单中添加新小部件路径的 url，例如 :url => widget_new_path 。

Rails 从 Form 获取 url。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:38:36.783

我以前遇到过这个问题，所以我改用编辑操作。

这是我的代码。

路线：

```
resources :wines do
  collection do
    get :create_wine, as: :create_wine
  end
end 
```

控制器：

```
def create_wine
  @wine = Wine.find_uncomplete_or_create_without_validation(current_user)
  redirect_to edit_wine_path(@wine)
end

def edit
  @wine = Wine.find(params[:id])
end

def update
  @wine = Wine.find(params[:id])
  if @wine.update_attributes(params[:wine])
    redirect_to @wine, notice: "#{@wine.name} updated"
  else
    render :edit
  end
end 
```

模型：

```
def self.find_uncomplete_or_create_without_validation(user)
  wine = user.wines.uncomplete.first || self.create_without_validation(user)
end

def self.create_without_validation(user)
  wine = user.wines.build
  wine.save(validate: false)
  wine
end 
```

看法：

```
= simple_form_for @wine, html: { class: 'form-horizontal' } do |f|
  = f.input :complete, as: :hidden, input_html: { value: 'true' } 
```

我所做的是使用 get 操作创建一个新操作“create_wine”。

1.  如果用户请求“create_wine”，它将在没有验证的情况下创建一个新酒，并重定向到编辑操作，其中包含属性更新表单和 compele 隐藏字段。
2.  如果用户之前创建过但放弃保存酒，它将返回最后一个未完成的酒。

这意味着无论是否使用保存，url 都将与/wines/:id 相同。

不太适合 RESTful 设计，但可以解决我的问题。如果有更好的解决方案请告诉我。

# php - 使本机类符合用户定义的接口？

> ID：15193089
> 
> 赞同：1
> 
> 时间：2013-03-04T01:20:43.100
> 
> 标签：php, inheritance, interface

我目前正在创建一个需要使用[OAuth](http://oauth.net/)的库。PHP 有一个[`OAuth`](http://www.php.net/manual/en/book.oauth.php)扩展，我个人已经安装并可以使用它，但我不想为我的库要求此依赖项，因为其他人可能无法使用它。

我创建了一个`OAuthInterface`接口，我希望能够通过扩展本机`OAuth`类并实现它来实现这个接口：

```
namespace My\Lib\OAuth;

class OAuth extends \OAuth implements OAuthInterface {} 
```

但是，我很难创建一个与本机`OAuth`类的方法签名完全匹配的接口，并且不断收到以下错误：

```
PHP Fatal error:  Declaration of OAuth::fetch() must be compatible with My\\Lib\\OAuth\\OAuthInterface::fetch($url, array $params = Array, $method = 'GET', array $headers = Array) in /path/to/My/Lib/OAuth/OAuth.php on line 7 
```

我想做的事是不可能的吗？我是否需要让我的实现成为一个传递类来组合原生实例`OAuth`而不是扩展它？还是我只是还没有找到正确的方法签名？

这是界面，如果有帮助：

```
namespace My\Lib\OAuth;

interface OAuthInterface
{
    public function fetch($url, array $params = [], $method = 'GET', array $headers = []);
    public function getLastResponse();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:34:03.580

如果您尝试匹配本机 OAuth 签名，您仍然有某种依赖关系，因为一旦本机 OAuth 类发生更改，您将不得不在代码中反映这一点。您可以构建自己的界面，然后使用适配器来支持您自己的 OAuth 版本和本机版本。[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)

# javascript - 如何在链接列表中嵌入 swf 视频？

> ID：15193098
> 
> 赞同：0
> 
> 时间：2013-03-04T01:21:55.050
> 
> 标签：javascript, html, flash, swfobject

我有以下代码，我想用 swf 视频或 .AVI 视频替换图像。我有播放 swf 视频的对象视频代码，但我希望我的视频在图像当前所在的框内播放。

```
 <div class="pic_list">
    <ul id="picListItem">

            <li><a href="javascript:void(0)" imgurl="1.jpg">Image</a></li>

                        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:42:07.150

将图像的锚点替换为对象。该对象将播放 SWF 视频。你不需要锚。

如何使用对象： [http ://www.w3schools.com/html/html_object.asp](http://www.w3schools.com/html/html_object.asp)

# php - 如何将 isAdmin() 更改为 $session->isAdmin

> ID：15193101
> 
> 赞同：0
> 
> 时间：2013-03-04T01:22:09.937
> 
> 标签：php, mysql, function, session, variables

所以我浏览了一些 php 脚本，我已经看到`$session->isAdmin()`并且我喜欢它在代码中的外观......

我意识到这是在调用一个函数；但是，我无法让它工作。我可以调用一个函数，但由于某种原因无法弄清楚如何将其标记为`$session->isAdmin()`仅调用 `isAdmin()`

前任：

创建函数

```
function isAdmin() {
    return 1;
} 
```

呼应功能

```
if (isAdmin() == 1) {
    echo "admin";
} 
```

我该如何`isAdmin()`更改`$session->isAdmin()`？

我基本上是在尝试学习新东西的同时也这样做，因此任何有关这方面的文档都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:34:30.837

您观察到的可能是其他框架用于用户会话处理的包装对象。

将代码更改为对象将是一种很好的做法，并且可以像这样工作：

```
<?php

/** Session.php  */
class Session 
{
    protected $isAdmin = 0;
    public function __construct() 
    {
        // ... do your session initialisation here ...
        if (USER_HAS_SOMESPECIAL_RIGHTS)
            $this->isAdmin = 1;
    }

    /**
    * Do we have admin rights?
    * @return bool
    */
    public function isAdmin() {
        return $this->isAdmin;
    }

    /**
    * Echoing out the current role in the system
    * @return string
    */
    public function getRole() {
        if ($this->isAdmin)
            return "admin";

        return "normal mortal being (at least not an admin)."
    }
} 
```

用法：

```
include 'Session.php';
$session = new Session();   // This is when your code in __construct will be evaluated
echo $session->getRole(); 
```

当然这只是一个简单的例子，一旦你进入 OOP，你会发现你可以在更大程度上抽象它。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:29:12.033

我真的不明白你想用“$session”做什么......

我可以想象你有一个会话变量，我们称它为`$_SESSION['user_type']`1 如果管理员和 0 如果用户。

现在您想要一个说明管理员或用户的功能？

```
function isAdmin($type) {
    if ($type==1) echo "Admin";
    elseif ($type==0) echo "User";
    else echo "And who are you!?";
} 
```

调用它：

```
isAdmin($_SESSION['user_type']); 
```

# c# - 如何从标志枚举的实例中获取一组设置位？

> ID：15193103
> 
> 赞同：0
> 
> 时间：2013-03-04T01:22:28.550
> 
> 标签：c#, enums, enum-flags

该类`Enum`具有以下有用的功能：

```
public static Array GetValues(Type enumType); 
```

我怎么能写一些类似的东西来给我一个枚举实例的所有设置位的集合？带有如下签名：

```
public static IEnumerable<T> getFlagValues<T>(this Enum enum, T enumInstance) where T : struct; 
```

我无法让演员正常工作，因为我不允许限制，`Enum`所以我需要使用`struct`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:34:12.220

我认为你的意思是这样的：

```
public static IEnumerable<T> getFlagValues<T>(this T enumValue) where T : struct {
  foreach (object o in Enum.GetValues(typeof(T))) {
    if (((int)o & (int)(object)enumValue) != 0) yield return (T)o;
  }
} 
```

您只需要一个参数，就像您在枚举值上调用它一样。例子：

```
[Flags]
public enum X { a = 1, b = 2, c = 4 }

X x = X.a | X.c;

foreach (var n in x.getFlagValues()) {
  Console.WriteLine(n);
} 
```

输出：

```
a
c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:53:44.873

这可能适用于您的情况

```
public static IEnumerable<T> GetFlagValues<T>(this T enumValue) where T : struct
{
    return Enum.GetValues(typeof(T)).Cast<Enum>().Where(e => ((Enum)(object)enumValue).HasFlag(e)).Cast<T>();
} 
```

测试

```
[Flags]
public enum TestEnum
{
    One = 1,
    Two = 2,
    Three = 3
}

TestEnum test = TestEnum.One | TestEnum.Three;
var result = test.GetFlagValues(); 
```

退货

```
One
Three
One | Three 
```

# c++ - C++ unique_ptr 与友元类私有析构函数

> ID：15193108
> 
> 赞同：3
> 
> 时间：2013-03-04T01:23:16.177
> 
> 标签：c++, map, destructor, friend, unique-ptr

我有这样的安排：

```
class LexedFile
    {
    friend class Lex;
//...
private:
    ~LexedFile();
    };

class Lex
    {
//...
private:
    std::map<std::string, std::unique_ptr<LexedFile> > Files;
    }; 
```

Lex 是`LexedFile`对象的唯一创建者，并保留`LexedFile`它在地图中创建的所有对象的所有权。`LexedFile`不幸的是，由于从映射变量到析构函数的可见性规则，编译器对此非常抱怨。我可以通过`~LexedFile()`公开来解决这个问题，但当然，我将其设为私有的原因是为了加强那种类型的对象只属于对象的决定`Lex`。

我的问题是：我有哪些便携选项可以让您既`unique_ptr`开心又保持`~LexedFile()`私密？通过便携，我想它至少必须与最新的 g++ 和最新的 Visual C++ 一起工作。

我尝试插入类似的东西：

```
friend class std::unique_ptr<LexedFile>; 
```

但即使它有效（它没有）它似乎有点依赖于可能不可移植的实现的假设。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:32:53.613

只需`std::unique_ptr`使用您自己的删除器进行实例化。我认为这会起作用：

```
class LexedFile
{
    friend class Lex;

//...
private:
    struct Deleter
    {
        void operator()(LexedFile *file) const
        {
            delete file;
        }
    };

    ~LexedFile();
};

class Lex
{
//...
private:
    std::map<std::string, std::unique_ptr<LexedFile, LexedFile::Deleter>> Files;
}; 
```

# javascript - Chrome 跨窗口通信

> ID：15193109
> 
> 赞同：0
> 
> 时间：2013-03-04T01:23:18.197
> 
> 标签：javascript, dom, cross-window-scripting

我有一个 HTML5 框架，并且已经开发和集成了调试器/配置文件/控制台等。在全屏模式下，我看不到调试器（显然是因为画布是全屏的）。所以，我需要做另一个选项卡或弹出窗口，以便可以将调试器移到另一个监视器或其他任何东西上。但是，调试器需要能够访问（监视）打开它的窗口或选项卡。

我唯一的其他选择是在加载框架的调试版本时不允许全屏显示，但这不是我想要的各种搜索路径。所以基本上我的问题是，我可以让一个窗口（webapp）打开一个弹出窗口（调试器）并让那个弹出窗口访问打开的窗口（webapp）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:29:30.013

是的，您可以这样做，如果父窗口和子窗口来自不同的域，浏览器会出于安全原因阻止它。

如果它们在不同的域上运行并且您可以控制父窗口和子窗口代码，请在两个页面上设置此项。

```
document.domain = '.xyz.com'; 
```

您可以调用子窗口对象，例如，

```
winobj=window.open('child window') 
...
winobj.document.getElementById("elementname").value="" 
```

和父窗口一样，

```
window.opener.functionname(a,b) or window.opener.buttonid.name 
```

请查看响应标头“ `Access-Control-Allow-Origin`”以允许在您无法控制父窗口或子窗口域且它们不同的其他域上执行跨域脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:31:05.947

按`opener`属性如何？

`opener.runFunction();`

# php - 如何在PHP中的符号之前删除字符串的一部分

> ID：15193113
> 
> 赞同：0
> 
> 时间：2013-03-04T01:23:48.073
> 
> 标签：php, html, math, numbers

这应该很容易回答，我对这一切都很陌生......

如果我有以下内容（89 不是恒定的——它可能是 2 个，有时是 3 个数字——但 /100 是）：

> 89/100

我怎样才能将 89 保存为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:25:35.433

您可以只使用[intval()](http://php.net/manual/en/function.intval.php)：

```
$num = intval($string); 
```

这会将字符串解析为整数，在这种情况下，忽略从“/”开始的所有内容。

需要明确的是，这不包括“100”。

```
intval("89/100") => 89 
```

这是一个 phpfiddle 表明它可以工作：[http ://phpfiddle.org/main/code/n1b-reb](http://phpfiddle.org/main/code/n1b-reb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:26:17.637

我会爆炸`/`

```
explode('/','89/100'); 
```

那么你的结果将在数组的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:25:49.040

您可以通过分隔符拆分字符串`/`，使用**[`explode()`](http://php.net/manual/en/function.explode.php)**.

```
$string = '89/100';

$data = explode('/', $string);

// 89
$number = (int)$data[0]; 
```

# java - Solr (JVM) 每小时峰值

> ID：15193117
> 
> 赞同：5
> 
> 时间：2013-03-04T01:24:20.177
> 
> 标签：java, performance, solr

解决了

在我们的例子中，问题是现在已经为 SuggestRequestHandler (requestHandler name="/suggest") 设置了 facelimit：10 此外，对于应用程序发出的每个建议请求都有多个请求。为什么这会导致（仅）每小时的峰值还不清楚......

谢谢大家的提示和帮助 - 我很感激！

每隔一整小时（12:00、13:00、14:00、...、20:00、21:00、22:00、23:00）我们的 Solr/Java 进程都有一个峰值 - 这意味着 Java 进程Solr 运行的地方增加了 3 倍的 CPU 使用率和响应时间——通常需要毫秒来响应，最多 9 秒。始终持续 2 - 3 分钟，并且仅当我们的网站上有流量时（有一个调用 Java 的 php 应用程序）。Crond 被完全禁用，但每隔一小时仍然存在问题。基本上我认为我们尝试了几乎所有 GC 和内存组合（或者可能没有？）

有人知道为什么会发生这种情况 - 这里有一些细节：

*   系统：32 GB RAM，24 核（主要与 php-fpm 共享，但甚至隔离只是 solr 作为测试相同的问题）
*   Solr 版本 3.6（在 Jetty 上 - 暂时也是 Glassfish）
*   操作系统：RHEL 5.7
*   多核设置（4 个索引，每 2 个核心）

使用的处理程序（solrconfig.xml）：

```
<requestHandler name="standard" class="solr.SearchHandler" default="true">
<requestHandler name="dismax" class="solr.SearchHandler" >
<requestHandler name="/suggest" class="solr.SearchHandler">
<requestHandler name="/update" class="solr.XmlUpdateRequestHandler" />
<requestHandler name="/analysis/document" class="solr.DocumentAnalysisRequestHandler" />
<requestHandler name="/analysis/field" class="solr.FieldAnalysisRequestHandler" />
<requestHandler name="/admin/" class="org.apache.solr.handler.admin.AdminHandlers" />
<requestHandler name="/admin/ping" class="PingRequestHandler">
<requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
<requestHandler name="/replication" class="solr.ReplicationHandler" > 
```

（也在没有复制和 ping 的情况下进行了测试）

使用的过滤器：

```
<filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
<filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.PortugueseMinimalStemFilterFactory"/>
<filter class="solr.ISOLatin1AccentFilterFactory"/>
<filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1"
<filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
<filter class="solr.PortugueseMinimalStemFilterFactory"/>
<filter class="solr.LowerCaseFilterFactory" />
<filter class="solr.EdgeNGramFilterFactory" maxGramSize="30" minGramSize="1"/>
<filter class="solr.ASCIIFoldingFilterFactory"/>
<filter class="solr.LowerCaseFilterFactory" /> 
```

索引大小：~100 MB（实际上甚至更小）

当前的 Java 选项：

```
JAVA_OPTS="-Xmx4096m -Xms4096m -XX:+UseGCOverheadLimit -XX:+UseConcMarkSweepGC -XX:+UseTLAB -XX:MaxPermSize=128m -XX:+DisableExplicitGC -Dsun.rmi.dgc.server.gcInterval=300000 -Dsun.rmi.dgc.client.gcInterval=300000 -XX:NewRatio=1 -Xloggc:/shop/logs/live/solr/gc.log -verbose:gc -XX:+PrintGCDateStamps" 
```

相同的选项，但 1024、2048、8192 和 12 GB 根本没有帮助。

其他尝试：

```
JAVA_OPTS="-server -Xmx2048m -XX:MaxPermSize=128m -XX:+UseParNewGC     -XX:+UseConcMarkSweepGC -XX:+UseTLAB -XX:+CMSIncrementalMode -XX:+CMSIncrementalPacing -XX:CMSIncrementalDutyCycleMin=0 -XX:CMSIncrementalDutyCycle=10 -XX:MaxTenuringThreshold=0 -XX:SurvivorRatio=256 -XX:CMSInitiatingOccupancyFraction=60 -XX:+DisableExplicitGC" 
```

其他尝试：

```
JAVA_OPTS="-Xmx2048m -Xms2048m -XX:+UseGCOverheadLimit -XX:+UseConcMarkSweepGC -XX:+UseTLAB -XX:MaxPermSize=128m -XX:+DisableExplicitGC -Djava.util.logging.config.file=/opt/solr-jetty/etc/jetty-logging.properties" 
```

这里是 gc.log 的摘录（这样一个完整的小时问题）：

```
2013-03-03T19:59:04.157-0300: 8087.754: [GC 3433559K->1788819K(3914560K), 0.0358190 secs]
2013-03-03T19:59:12.031-0300: 8095.628: [GC 3437075K->1792088K(3914560K), 0.0365830 secs]
2013-03-03T19:59:22.419-0300: 8106.016: [GC 3440344K->1803266K(3914560K), 0.0422040 secs]
2013-03-03T19:59:29.044-0300: 8112.641: [GC 3451522K->1815743K(3914560K), 0.0439870 secs]
2013-03-03T19:59:37.002-0300: 8120.599: [GC 3463999K->1821601K(3914560K), 0.0378990 secs]
2013-03-03T19:59:45.468-0300: 8129.065: [GC 3469857K->1822911K(3914560K), 0.0386720 secs]
2013-03-03T19:59:53.750-0300: 8137.347: [GC 3471167K->1829299K(3914560K), 0.0405040 secs]
2013-03-03T20:00:01.829-0300: 8145.426: [GC 3477555K->1832046K(3914560K), 0.0383070 secs]
2013-03-03T20:00:06.327-0300: 8149.924: [GC 3480302K->1831567K(3914560K), 0.0450550 secs]
2013-03-03T20:00:11.123-0300: 8154.719: [GC 3479823K->1843283K(3914560K), 0.0401710 secs]
2013-03-03T20:00:14.360-0300: 8157.957: [GC 3491539K->1854079K(3914560K), 0.0368560 secs]
2013-03-03T20:00:17.419-0300: 8161.015: [GC 3502335K->1855130K(3914560K), 0.0375530 secs]
2013-03-03T20:00:20.006-0300: 8163.603: [GC 3503386K->1861867K(3914560K), 0.0413470 secs]
2013-03-03T20:00:22.726-0300: 8166.323: [GC 3510123K->1870292K(3914560K), 0.0360600 secs]
2013-03-03T20:00:25.420-0300: 8169.017: [GC 3518548K->1872701K(3914560K), 0.0326970 secs]
2013-03-03T20:00:27.138-0300: 8170.735: [GC 3520957K->1873446K(3914560K), 0.0381430 secs]
2013-03-03T20:00:28.748-0300: 8172.345: [GC 3521702K->1889189K(3914560K), 0.0379160 secs]
2013-03-03T20:00:30.404-0300: 8174.001: [GC 3537445K->1887193K(3914560K), 0.0407670 secs]
2013-03-03T20:00:32.713-0300: 8176.309: [GC 3535449K->1892863K(3914560K), 0.0366880 secs]
2013-03-03T20:00:34.791-0300: 8178.388: [GC 3541119K->1899095K(3914560K), 0.0398270 secs]
2013-03-03T20:00:36.533-0300: 8180.129: [GC 3547351K->1910071K(3914560K), 0.0373960 secs]
2013-03-03T20:00:39.037-0300: 8182.634: [GC 3558327K->1904198K(3914560K), 0.0393020 secs]
2013-03-03T20:00:41.548-0300: 8185.144: [GC 3552454K->1912352K(3914560K), 0.0444060 secs]
2013-03-03T20:00:43.771-0300: 8187.368: [GC 3560608K->1919304K(3914560K), 0.0427220 secs]
2013-03-03T20:00:47.411-0300: 8191.008: [GC 3566354K->1918102K(3914560K), 0.0418150 secs]
2013-03-03T20:00:50.925-0300: 8194.522: [GC 3564290K->1930888K(3914560K), 0.0414700 secs]
2013-03-03T20:00:52.991-0300: 8196.588: [GC 3579144K->1933251K(3914560K), 0.0349600 secs]
2013-03-03T20:00:53.027-0300: 8196.624: [GC 1939697K(3914560K), 0.0256300 secs]
2013-03-03T20:00:54.208-0300: 8197.804: [GC 2780505K(3914560K), 0.1424860 secs]
2013-03-03T20:00:55.684-0300: 8199.281: [GC 3029503K->1389766K(3914560K), 0.0370380 secs]
2013-03-03T20:00:58.289-0300: 8201.886: [GC 2213458K->570843K(3914560K), 0.0413220 secs]
2013-03-03T20:01:00.672-0300: 8204.268: [GC 1962741K->319619K(3914560K), 0.0410840 secs]
2013-03-03T20:01:02.906-0300: 8206.503: [GC 1966833K->319605K(3914560K), 0.0453730 secs]
2013-03-03T20:01:06.861-0300: 8210.458: [GC 1967861K->330864K(3914560K), 0.0425570 secs]
2013-03-03T20:01:10.067-0300: 8213.664: [GC 1979120K->336541K(3914560K), 0.0479380 secs]
2013-03-03T20:01:12.587-0300: 8216.184: [GC 1984797K->343203K(3914560K), 0.0376810 secs] 
```

也只有 2 个条目（大约 1 天）大于 1 秒： grep -oP ", [1-9]..*?secs]$" /shop/logs/live/solr/gc.log , 1.1727270秒] , 1.0390840 秒]

有人对 solr/jvm 有任何想法或已经有这种现象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:31:45.973

不要相信您的 GC 日志，除非您在选项中包含 -XX:+PrintGCApplicationStoppedTime。即使在那时也怀疑他们。除非您包含此标志，否则有些停顿和部分停顿可能会很长并且未报告。例如，我看到偶尔长时间运行的计数循环需要 15 秒才能达到安全点而导致的暂停，其中 GC 仅报告暂停的 0.08 秒部分，它实际上做了一些工作。还有很多暂停的原因不被认为是“GC”的一部分，因此可能不会被 GC 日志记录标志报告。

您可以尝试添加[jHiccup](http://www.jhiccup.com/)作为代理来报告观察到的暂停/故障/停顿/打嗝，而不是依赖 JVM 日志的真实性。如果它显示多秒故障，那么您将知道您的 JVM 正在暂停。如果它显示 JVM 运行顺利，那么您就知道查看您的其他配置部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:20:25.887

如果索引大小只有 100MB，并且问题与 GC 有关，我将从：

1.  把-Xmx减到1024以下，从256m左右开始，看看够不够
2.  不要在开头使用任何 -XX
3.  使用最新的 jdk

# javascript - HTML5 视频、提示点和停止点

> ID：15193129
> 
> 赞同：1
> 
> 时间：2013-03-04T01:25:35.127
> 
> 标签：javascript, video, jquery-plugins, html5-video

我已经看到有一些 HTML5 视频提示点的解决方案，方法是将元素包装在 Javascript 中，并使用 PopcornJS、CuepointsJS 等在轨道上的不同时间触发播放。

但是有什么东西不仅可以在 HTML5 视频上设置提示点，而且还可以触发停止？就像我想在一个视频中设置“章节”一样，我点击一个播放 0:25 到 0:45 并在 0:45 停止的链接怎么办？我想在 1 个视频中包含多个提示和停止，有什么可以让这成为可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-16T19:51:45.990

这是我用来处理提示点的一些相对简单的代码。它存在于这个要点中（[https://gist.github.com/positlabs/30605eccf05375da14f1](https://gist.github.com/positlabs/30605eccf05375da14f1)）

```
/*

    // mapping cues to methods
    var cuepointMethods = {
        "1": function(){},
        "2.82": function(){},
        "3.31": function(){}
    };

    // instantiate with <video>, and an array of cuepoint times => [1, 2.82, 3.31]
    var cp = new CuePoints(document.querySelector('#video'), Object.keys(cuepointMethods));

    // listen for cue event
    cp.on('cue', function(cue){
        // do something with the cue
        // in this example, we map the cue to a method
        cuepointMethods[cue]();
    });

*/

window.CuePoints = function(video, cuepoints){

    this.video = video;
    this.cuepoints = cuepoints;

    video.addEventListener('play', this._onPlayVideo.bind(this));
    if(!video.paused) this._onPlayVideo();
};

// https://www.npmjs.com/package/backbone-events-standalone
CuePoints.prototype = BackboneEvents.mixin({});

CuePoints.prototype._onPlayVideo = function(){
    this._prevTime = this.video.currentTime;
    // start animationframe
    this._onFrame();
};

CuePoints.prototype._onFrame = function(){
    // only fire cue events if video is playing. Might not be wanted in some cases...
    if(this.video.paused) return;

    this.cuepoints.forEach(function(cuepoint){
        if(cuepoint >= this._prevTime && cuepoint < this.video.currentTime){
            this.trigger('cue', cuepoint);
        }
    }.bind(this));

    this._prevTime = this.video.currentTime;
    requestAnimationFrame(this._onFrame.bind(this));
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:31:49.293

HTML5 提示对象为此有一个名为“ [pauseOnExit](http://www.w3.org/TR/html51/embedded-content-0.html#dom-texttrackcue-pauseonexit) ”的属性。

此功能在 Chrome 和 Opera 中实现。您可以使用类似[webshims](http://afarkas.github.com/webshim/demos/index.html)的 polyfill在所有浏览器中实现此功能。

这是一个[工作示例](http://jsfiddle.net/trixta/cTjaj/)。

```
var cue = new TextTrackCue(0.5, 5, "My first Cue");
cue.pauseOnExit = true; 
```

# objective-c - Apple Mach-O Linker Error 重复架构 armv7 CCVideoPlayer cocos2d 扩展 (cocos2d v2.0)

> ID：15193131
> 
> 赞同：0
> 
> 时间：2013-03-04T01:25:44.200
> 
> 标签：objective-c, cocos2d-iphone, xcode4.5, ccvideoplayer

我正在尝试解决此链接器错误问题，但我毫不怀疑，查找类重复项或其他内容，但目前尚不清楚。

有人遇到过这个问题吗？

在 cocos2d 论坛上看到[了这篇文章](http://www.cocos2d-iphone.org/forum/topic/242757?replies=2#post-399025)，但注释掉宏并没有帮助我......

重复符号 _OBJC_METACLASS_$_CCVideoPlayerImpl 在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-9962022C0BCB5653。 o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-A41A32B34B96CC5E.o 重复符号_OBJC_CLASS_$_CCVideoPlayerImpl在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-9962022C0BCB5653。o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-A41A32B34B96CC5E.o 重复符号_OBJC_CLASS_$_CCVideoPlayer在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-9962022C0BCB5653.o /Users/username /Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-A41A32B34B96CC5E.o重复符号_OBJC_METACLASS_$_CCVideoPlayer在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-9962022C0BCB5653.o /Users/username/Library /Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayer-A41A32B34B96CC5E.o 重复符号_OBJC_IVAR_$_CCVideoPlayerImpliOS._theMovie in：/Users/用户名/库/开发人员/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656。o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o 重复符号_OBJC_IVAR_$_CCVideoPlayerImpliOS ._videoOverlayView 在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656.o /Users /username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o重复符号_OBJC_IVAR_$_CCVideoPlayerImpliOS._delegate ：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656.o /Users/username/Library /Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o重复符号_OBJC_IVAR_$_CCVideoPlayerImpliOS._playing in：/Users/用户名/库/开发人员/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656。o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o 重复符号_OBJC_IVAR_$_CCVideoPlayerImpliOS .no跳过：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656.o /Users /username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o重复符号_OBJC_CLASS_$_CCVideoPlayerImpliOS在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656.o /Users/username/Library /Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o 重复符号_OBJC_METACLASS_$_CCVideoPlayerImpliOS 在：/Users/username/库/开发人员/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-2E61FAAA0338656。o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/CCVideoPlayerImpliOS-D9E5031DFFEFC61.o 重复符号_OBJC_IVAR_$_VideoOverlayView ._touch 在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-3F7278265D6C165F.o /Users /username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-24E20B177AADBD4D.o重复符号_OBJC_CLASS_$_VideoOverlayView在：/Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-3F7278265D6C165F.o /Users/username/Library /Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-24E20B177AADBD4D.o 重复符号_OBJC_METACLASS_$_VideoOverlayView 在：/Users/username/库/开发人员/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-3F7278265D6C165F。o /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-cejlpqfnlpectralthclvyvltqkk/Build/Intermediates/ProjectName.build/Debug-iphoneos/ProjectName.build/Objects-normal/armv7/videoOverlayView-24E20B177AADBD4D.o ld：22个重复符号对于架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:02:11.830

似乎您在项目中被导入`CCVideoPlayer` **了两次**`Xcode`。检查您的项目资源，如果有，请删除一个。

# erlang - 每个模拟对象一个演员，还是一个经理演员？

> ID：15193133
> 
> 赞同：0
> 
> 时间：2013-03-04T01:25:55.640
> 
> 标签：erlang, actor

我正在开发一个模拟，它将包含许多实体不断更新，可能每秒 30 次。假设我们有 1000 个实体，每个实体都有一个速度，因此每个刻度都必须更新一个位置。

那么，您将如何使用演员模型来实现这一点？我不一定在这个项目中使用 Erlang，但为了争论，我们就说我是。你会为这些实体中的每一个都有一个演员吗？或者你会有一个“经理”演员来维护和更新这些实体的列表吗？

[向你学习一些 Erlang 说](http://learnyousomeerlang.com/introduction#kool-aid)：

> 诚然，Erlang 进程非常轻量级：你可以同时存在数十万个进程，但这并不意味着你必须这样使用它，因为你可以。例如，创建一个射击游戏，其中包括子弹在内的所有东西都是它自己的演员，这很疯狂。在这样的游戏中，你唯一能射击的就是你自己的脚。从actor到actor发送消息仍然有很小的成本，如果你将任务划分得太多，你会让事情变得更慢！

所以这似乎表明管理者会更好。还是有我没有看到的第三种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:06:48.237

我认为 Learn You Some Erlang 在这里犯了一个过早的优化错误。您应该使用对您最有意义的抽象，衡量任何问题，并在必要时进行重构。就个人而言，我相信将每个粒子建模为自己的 actor 是最容易处理的，也是 Actor 模型最惯用的方法。然而，实际上，你应该做任何让你的船漂浮的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:18:56.283

你说！没有一个好的解决方案。

现在为了更有帮助，并且我的背景很少，我认为你应该看看你的项目的这些方面：

你说模拟。如果你需要每 30 毫秒刷新一次实体集合，首先要简化操作和数据模型，然后再考虑如何有效地遍历数据集合。

另一方面，如果您有一个庞大和/或不断发展的对象集合，具有简单的算法/数据模型，那么请查看比列表更智能的数据结构，注意数据副本......

如果您使用多核（或集群），请考虑将您的实体分组为多个超级实体，以便利用并行性，在单独的进程中管理它们。

接下来想想这些组是否可以帮助您减少评估次数（有自适应时间片？按需评估？...）。

最后，我认为 Erlang 比一般来说更紧凑且易于重构，因此利用这一点定义一些功能步骤，并为每个步骤，

> 让他们工作，让他们正确，然后快速（肯特贝克？）

对于最后一步，您可以从 fproof 等分析工具中获得一些帮助

勇气:o)

# objective-c - 如何将 NSDocumentController 子类化为一次只允许一个文档

> ID：15193136
> 
> 赞同：1
> 
> 时间：2013-03-04T01:26:22.590
> 
> 标签：objective-c, cocoa, nsdocumentcontroller

我正在尝试创建一个基于核心数据的基于文档的应用程序，但限制是一次只能查看一个文档（它是一个音频应用程序，对于很多文档一次发出噪音是没有意义的） .

我的计划是以一种不需要将其链接到任何菜单操作的方式对 NSDocumentController 进行子类化。这一直在合理地进行，但我遇到了一个问题，这让我对我的方法有点怀疑。

以下代码在大多数情况下都有效，除非用户执行以下操作： - 尝试打开现有“脏”文档的文档 - 在保存/不保存/取消警报上单击取消（这工作正常） - 然后尝试再次打开文档。由于某种原因，现在 openDocumentWithContentsOfURL 方法再也不会被调用，即使打开的对话框出现了。

谁能帮我弄清楚为什么？或者也许给我举个例子来说明如何正确地做到这一点？感觉就像一些人必须实现的东西，但我找不到 10.7+ 的例子。

```
- (BOOL)presentError:(NSError *)error
{
    if([error.domain isEqualToString:DOCS_ERROR_DOMAIN] && error.code == MULTIPLE_DOCS_ERROR_CODE)
        return NO;
    else
        return [super presentError:error];
}

- (id)openUntitledDocumentAndDisplay:(BOOL)displayDocument error:(NSError **)outError
{
    if(self.currentDocument) {
        [self closeAllDocumentsWithDelegate:self
                        didCloseAllSelector:@selector(openUntitledDocumentAndDisplayIfClosedAll: didCloseAll: contextInfo:)
                                contextInfo:nil];

        NSMutableDictionary* details = [NSMutableDictionary dictionary];
        [details setValue:@"Suppressed multiple documents" forKey:NSLocalizedDescriptionKey];
        *outError = [NSError errorWithDomain:DOCS_ERROR_DOMAIN code:MULTIPLE_DOCS_ERROR_CODE userInfo:details];
        return nil;
    }

    return  [super openUntitledDocumentAndDisplay:displayDocument error:outError];
}

- (void)openUntitledDocumentAndDisplayIfClosedAll:(NSDocumentController *)docController
                                      didCloseAll: (BOOL)didCloseAll
                                      contextInfo:(void *)contextInfo
{
    if(self.currentDocument == nil)
        [super openUntitledDocumentAndDisplay:YES error:nil];
}

- (void)openDocumentWithContentsOfURL:(NSURL *)url
                              display:(BOOL)displayDocument
                    completionHandler:(void (^)(NSDocument *document, BOOL documentWasAlreadyOpen, NSError *error))completionHandler NS_AVAILABLE_MAC(10_7)
{
    NSLog(@"%s", __func__);
    if(self.currentDocument) {
        NSDictionary *info = [NSDictionary dictionaryWithObjectsAndKeys:[url copy], @"url",
                                                                        [completionHandler copy], @"completionHandler",
                                                                        nil];
        [self closeAllDocumentsWithDelegate:self
                        didCloseAllSelector:@selector(openDocumentWithContentsOfURLIfClosedAll:didCloseAll:contextInfo:)
                                contextInfo:(__bridge_retained void *)(info)];
    } else {
        [super openDocumentWithContentsOfURL:url display:displayDocument completionHandler:completionHandler];
    }
}

- (void)openDocumentWithContentsOfURLIfClosedAll:(NSDocumentController *)docController
                                     didCloseAll: (BOOL)didCloseAll
                                     contextInfo:(void *)contextInfo
{
    NSDictionary *info = (__bridge NSDictionary *)contextInfo;
    if(self.currentDocument == nil)
        [super openDocumentWithContentsOfURL:[info objectForKey:@"url"] display:YES completionHandler:[info objectForKey:@"completionHandler"]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:12:13.983

[在Apple 的 cocoa-dev 邮件列表](http://lists.apple.com/archives/cocoa-dev/2010/Jan/msg00246.html)上有一个非常有用的交流，它描述了你必须做什么才能`NSDocumentController`为你的目的进行子类化。结果是在打开新文档时关闭现有文档。

您可能会考虑的其他事情是在其窗口退出主窗口时静音或停止播放文档（即，发送`NSWindowDidResignMainNotification`给窗口的委托），如果只是为了避免对用户施加看似人为的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T05:08:54.720

我知道这已经有一段时间了，但以防万一它帮助别人......

我遇到了我认为类似的问题，解决方案是在我的自定义 DocumentController 没有打开文档时调用完成处理程序*，*例如：

```
- (void)openDocumentWithContentsOfURL:(NSURL *)url display:(BOOL)displayDocument completionHandler:(void (^)(NSDocument * _Nullable, BOOL, NSError * _Nullable))completionHandler {

    if (doOpenDocument) {
        [super openDocumentWithContentsOfURL:url display:displayDocument completionHandler:completionHandler];
    } else {
        completionHandler(NULL, NO, NULL);
    }
} 
```

当我添加它时，`completionHandler(NULL, NO, NULL);`它开始工作不止一次。

# mysql - 连接两个表并从一列返回多个匹配项的 SQL 查询？

> ID：15193137
> 
> 赞同：3
> 
> 时间：2013-03-04T01:26:26.243
> 
> 标签：mysql, sql, join, subquery, concat

我的头衔很糟糕，这可能就是我在 Google 上找不到我想要的东西的原因。

我想做的是从一个旧的内部博客中导出一些数据，这样我就可以将它导入到其他东西中。我的问题是，虽然我可以创建我正在寻找的那种 JOIN，但第二个表中的匹配项可以包含多行，所以我最终会得到大量重复数据。我需要从第二个表中获取结果并将这些（如果有多个匹配项）连接到查询结果中的单个字段中。查询不需要 WHERE 约束，我正在尝试检索整个 blog_posts 表。

希望这个表结构的缩写布局将有助于说明：

```
blog_posts              blog_categories
---------------------------------------
post_id                 post_id
post_content            category_id
post_author 
```

这是一些示例数据。

blog_posts 表数据：

```
post_id  post_content  post_author
----------------------------------
1        foo1          bob
2        foo2          bob
3        foo3          fred 
```

blog_categories 表数据：

```
post_id  category_id
--------------------
1        1
1        2
1        6
2        1
3        2
3        4 
```

我理想的结果是这样的：

```
post_id  post_content  post_author  category_ids
------------------------------------------------
1        foo1          bob          1,2,6
2        foo2          bob          1
3        foo3          fred         2,4 
```

我能得到的最接近的是这样一个简单的连接：

```
SELECT 
    blog_posts.post_id, 
    blog_posts.post_content, 
    blog_posts.post_author, 
    blog_categories.category_id 
FROM blog_posts 
    INNER JOIN blog_categories 
        ON blog_posts.post_id = blog_categories.post_id 
```

但这会多次返回 blog_posts 表中的匹配项（每个匹配的 category_id 一次）。

有什么方法可以只使用 SQL 来完成我想要的吗？我在想某种子选择会起作用，但是我无法理解它是如何工作的 - 我知道我基本上想在我的“循环”中使用类别 ID 进行选择当前的帖子 id，但它的语法让我无法理解。它不需要高效，这是一次性操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:32:46.563

该[`group_concat()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)功能完全符合您的需要：

```
SELECT 
  blog_posts.post_id, 
  blog_posts.post_content, 
  blog_posts.post_author, 
  group_concat(blog_categories.category_id)
FROM blog_posts 
JOIN blog_categories ON blog_posts.post_id = blog_categories.post_id
GROUP BY 1, 2, 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:33:25.970

你想`GROUP BY blog_posts.post_id, blog_posts.post_content, blog_posts.post_author`。然后使用`aggregate function`（[http://en.wikipedia.org/wiki/Aggregate_function](http://en.wikipedia.org/wiki/Aggregate_function)）从每个组中获取所有`blog_categories.category_id`值并将其转换为单个字符串。

您使用的是哪个 DBMS？对于 Postgres，您可能只需使用数组作为聚合函数：

```
SELECT
  blog_posts.post_id,
  blog_posts.post_content,
  blog_posts.post_author,
  ARRAY_AGG(blog_categories.category_id)
FROM blog_posts
INNER JOIN blog_categories ON blog_posts.post_id = blog_categories.post_id
GROUP BY
  blog_posts.post_id,
  blog_posts.post_content,
  blog_posts.post_author 
```

或用于`ARRAY_TO_STRING(ARRAY_AGG(blog_categories.category_id), ',')`获取逗号分隔的字符串。

# ruby-on-rails - 在 Rails 中出现两次 Flash 消息

> ID：15193138
> 
> 赞同：8
> 
> 时间：2013-03-04T01:26:31.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, flash, twitter-bootstrap

我的 flash 消息出现了两次，我的网络研究告诉我这是由于渲染和重定向显示消息。我想我需要在某处使用 flash.now[] 或 flash[] 对其进行排序，但我无法确定它需要去哪里

指南控制器.rb

```
def update
  @guideline = Guideline.find(params[:id])

  respond_to do |format|
    if @guideline.update_attributes(params[:guideline])
      @guideline.update_attribute(:updated_by, current_user.id)
      format.html { redirect_to @guideline, notice: 'Guideline was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "show" }
      format.json { render json: @guideline.errors, status: :unprocessable_entity }
    end
  end
end 
```

布局/application.html.erb

```
<div class="container">

    <% flash.each do |type, message| %>

        <div class="alert <%= flash_class type %>">
            <button class="close" data-dismiss="alert">x</button>
            <%= message %>
        </div>
    <% end %>
</div>

application_helper.rb

def flash_class(type)
  case type
  when :alert
    "alert-error"
  when :notice
    "alert-success"
  else
    ""
  end
end 
```

guideline_controller.rb

```
def show
    @guideline = Guideline.find(params[:id])
    if @guideline.updated_by
     @updated = User.find(@guideline.updated_by).profile_name
   end

      if User.find(@guideline.user_id)
     @created = User.find(@guideline.user_id).profile_name
      end

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @guideline }

    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:31:31.557

您可以这样做以节省一些代码行，并只显示一次消息：

```
<%- if flash.any? %>
  <%- flash.keys.each do |flash_key| %>
    <%- next if flash_key.to_s == 'timedout' %>
    <div class="alert-message <%= flash_key %>">
      <a class="close" data-dismiss="alert" href="#"> x</a>
      <%= flash.discard(flash_key) %>
    </div>
  <%- end %>
<%- end %> 
```

通过使用 flash.discard，您可以显示 flash 消息并避免渲染两次

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-11T14:58:49.347

只是把这个放在这里给其他有麻烦的人。

我有两次闪现消息，因为我有一些东西`application.html.erb`告诉我的应用程序显示闪现消息，但我之前使用`rails generate scaffold posts`etc 生成了视图，因此自动将闪回消息添加到所有视图中。

所以解决方案是将它们从视图中删除。

[这](https://guides.railsgirls.com/devise)是一个很棒的教程，演示了仅删除一个模型/视图

所以基本上，如果你有这样的东西`application.html.erb`：

```
<% if notice %>
  <p class="alert alert-success"><%= notice %></p>
<% end %>
<% if alert %>
  <p class="alert alert-danger"><%= alert %></p>
<% end %> 
```

然后只需从每个视图中删除等效项。即从每个视图的顶部删除此行

```
<p id="notice"><%= notice %></p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-07T04:52:56.480

我也有同样的问题，也是由于`<%= render 'shared/alerts' %>`我检查后的另一个电话`flash`。我喜欢@rorra 的想法`flash_key`。但是在 2020 年，它并没有像 @tessad 所说的那样工作。它会显示消息，但不能正确格式化引导程序。

我能够更改他们的代码以与 BootStrap 4 一起使用。它甚至会按原样解散。需要改变的三件事都是处理用于显示flash通知的div的类。

```
<div class="alert-message <%= flash_key %>"> 
```

`alert-message`变为 just `alert`，并且`flash_key`必须`alert-`在它之前拥有。

```
<div class="alert alert-<%= flash_key %>"> 
```

最后一件事是我将它从控制器发送到视图 as `flash[:notice]`，这不是公认的引导警报。当我将其更改为`flash[:warning]`正确显示时。

这是对我有用的最终代码。把它放在这里以防有人在给出最初答案 7 年后现在需要它。

```
<div id="container">
<%- if flash.any? %>
  <%- flash.keys.each do |flash_key| %>
    <%- next if flash_key.to_s == 'timedout' %>
    <div class="alert alert-<%= flash_key %>">
      <a class="close" data-dismiss="alert" href="#"> x</a>
      <%= flash.discard(flash_key) %>
    </div>
  <%- end %>
<%- end %>
</div> 
```

# ios - 为什么这个按钮出现在所有 UITextField 选择中？

> ID：15193140
> 
> 赞同：0
> 
> 时间：2013-03-04T01:26:44.023
> 
> 标签：ios, objective-c, xcode

我有一个带有文本字段的 UITableViewCell，它应该用于 DatePicker。我需要制作一个自定义按钮来保存日期。但是，每当我选择任何 UITableViewCell TextFields 时，都会出现该按钮。为什么是这样？

我只是想将它“提交”到文本字段，以便我可以保存它。

谢谢

```
 - (void)textFieldDidBeginEditing:(UITextField *)dateFieldText
{    

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                   initWithTitle:@"Save Date"
                                   style:UIBarButtonItemStyleDone
                                   target:self
                                   action:@selector(flipView)];
    self.navigationItem.rightBarButtonItem = doneButton;
    UIDatePicker *datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeDateAndTime;
    [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
    [self.dateFieldText setInputView:datePicker];

} 
```

**更新**

使用 if else 块解决了我的问题。

```
- (void)textFieldDidBeginEditing:(UITextField *)sender
{
    sender.delegate = self;
        if([sender isEqual:dateFieldText])
        {
            UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                           initWithTitle:@"Save"
                                           style:UIBarButtonItemStyleDone
                                           target:self
                                           action:@selector(saveDate)];
            self.navigationItem.rightBarButtonItem = doneButton;
            UIDatePicker *datePicker = [[UIDatePicker alloc] init];
            datePicker.datePickerMode = UIDatePickerModeDateAndTime;
            [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
            [self.dateFieldText setInputView:datePicker];
        }
        else{
            UIBarButtonItem *submitButton = [[UIBarButtonItem alloc]
                                           initWithTitle:@"Done"
                                           style:UIBarButtonItemStyleDone
                                           target:self
                                           action:@selector(submitList)];
            self.navigationItem.rightBarButtonItem = submitButton;
        }  
    } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:30:42.877

您是否在重复使用表格视图单元格？您可能会考虑为您的日期字段创建一个新单元格，并为其提供与其他单元格不同的重用标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:37:30.903

您应该仅将 dataPicker 设置为预期的 TextField，即您应该添加一个 if 条件以将 datePicker 仅添加到所需字段，而不是所有字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T02:51:40.113

```
- (void)textFieldDidBeginEditing:(UITextField *)sender
{
    sender.delegate = self;
        if([sender isEqual:dateFieldText])
        {
            UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                           initWithTitle:@"Save"
                                           style:UIBarButtonItemStyleDone
                                           target:self
                                           action:@selector(saveDate)];
            self.navigationItem.rightBarButtonItem = doneButton;
            UIDatePicker *datePicker = [[UIDatePicker alloc] init];
            datePicker.datePickerMode = UIDatePickerModeDateAndTime;
            [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
            [self.dateFieldText setInputView:datePicker];
        }
        else{
            UIBarButtonItem *submitButton = [[UIBarButtonItem alloc]
                                           initWithTitle:@"Done"
                                           style:UIBarButtonItemStyleDone
                                           target:self
                                           action:@selector(submitList)];
            self.navigationItem.rightBarButtonItem = submitButton;
        }  
    } 
```

# php - iphone到mysql blob没有插入没有错误

> ID：15193144
> 
> 赞同：1
> 
> 时间：2013-03-04T01:28:03.697
> 
> 标签：php, mysql, ios, xcode, mysqli

我正在尝试将 blob 与其他值一起插入到 mysql 数据库中，其他值正常并且没有任何错误。最大允许数据包大小设置为 10mb，照片数据为 0.5mb。

这是将照片转换为二进制的代码：

```
- (NSData *)dataFromImage:(UIImage *)image{
    NSData *imageData = UIImagePNGRepresentation(image);
    return imageData;
} 
```

然后将其发布到 php 脚本中：

```
$db = new mysqli(localhost, $database, $pass, $table);

if ($query = $db->prepare("INSERT INTO JobData (someotherdata, photo) values (? ,?)")) {

    $query->bind_param("sb", 
            $_POST["someotherdata"],
            $_POST["photo"]);

    $query->execute(); 
```

otherdata 显示在数据库中，但 0 字节显示在 photo 字段中。mysqli_error 不会产生任何错误。

NSData 日志：

```
4f1eba47 4f37e5f1 d3475bf6 d9fef291 7b1cc893 af9e38c9 d3674fdd 13e4e9b3...etc 
```

也许我没有正确地将数据转换为二进制？我在网上找不到太多关于此的信息，我发现的大部分内容都与 sqlite 有关，因此非常感谢任何帮助。

我还检查是否在调用 bind_param 之前设置了所有数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:23:35.677

我最近一直在做一个类似的项目，我需要将一堆信息（姓名、id、年龄等）上传到一个带有图像的 sql 数据库中。不幸的是，它并不像将数据转换为二进制并发送它那么容易，但是有一段很棒的代码可以为你做到这一点..

```
//this is where you put in the data e.g...
 NSMutableDictionary* _params = [[NSMutableDictionary alloc] init];
[_params setObject:userName forKey:@"sendername"];
//[_params setObject:[NSString stringWithFormat:@"%d", userId] forKey:[NSString stringWithString:@"userId"]];
//[_params setObject:[NSString stringWithFormat:@"%@",_title] forKey:@"title"];

// the boundary string : a random string, that will not repeat in post data, to separate post data fields.
NSString *BoundaryConstant = @"----------V2ymHFg03ehbqgZCaKO6jy";

// string constant for the post parameter 'file'. My server uses this name: `file`. Your's may differ
NSString* FileParamConstant = @"picture";

// the server url to which the image (or the media) is uploaded. Use your server url here
NSURL* requestURL = [NSURL URLWithString:@"url name here"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];

// set Content-Type in HTTP header
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", BoundaryConstant];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];

// post body
NSMutableData *body = [NSMutableData data];

// add params (all params are strings)
for (NSString *param in _params) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [_params objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
}

// add image data
UIImage *imageToPost = [UIImage imageNamed:@"image is here"];

NSData *imageData = UIImageJPEGRepresentation(imageToPost, 1.0);
if (imageData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n", FileParamConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the reqeust
[request setHTTPBody:body];

// set the content-length
NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

// set URL
[request setURL:requestURL];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];

[connection start]; 
```

试一试，让我知道你的进展情况......它可能不是你想要的，但希望它能引导你朝着正确的方向前进。吨

# asp.net-mvc - ValidationAttribute.ErrorMessage 中的替换参数

> ID：15193145
> 
> 赞同：15
> 
> 时间：2013-03-04T01:28:14.993
> 
> 标签：asp.net-mvc, validation

在 ASP.NET MVC 4 应用程序中，LocalPasswordModel 类（在 Models\AccountModels.cs 中）如下所示：

```
public class LocalPasswordModel
{
    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Current password")]
    public string OldPassword { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "New password")]
    public string NewPassword { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm new password")]
    [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

上面的代码在 ErrorMessage 字符串中包含两个替换参数：

```
ErrorMessage = "The {0} must be at least {2} characters long." 
```

有人能告诉我替换到该字符串中的值来自哪里吗？更一般地说，是否有任何近似官方文档来描述参数替换在这种情况下如何工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T02:07:43.077

对于 StringLengthAttribute，消息字符串可以采用 3 个参数：

```
{0} Property name
{1} Maximum length
{2} Minimum length 
```

不幸的是，这些参数似乎没有得到很好的记录。这些值是从每个验证属性的`FormatErrorMessage`属性传入的。例如，使用 .NET Reflector，下面是该方法`StringLengthAttribute`：

```
public override string FormatErrorMessage(string name)
{
    EnsureLegalLengths();
    string format = ((this.MinimumLength != 0) && !base.CustomErrorMessageSet) ? DataAnnotationsResources.StringLengthAttribute_ValidationErrorIncludingMinimum : base.ErrorMessageString;
    return String.Format(CultureInfo.CurrentCulture, format, new object[] { name, MaximumLength, MinimumLength });
} 
```

可以安全地假设这永远不会改变，因为这会破坏几乎所有使用它的应用程序。

# javascript - 如何知道是否从 javascript 控制台调用了函数？

> ID：15193147
> 
> 赞同：1
> 
> 时间：2013-03-04T01:28:33.450
> 
> 标签：javascript, ajax, function, console, hide

我想知道我们如何从 javascript 控制台中隐藏一个函数，以便不能从中调用它。

为了让您更好地理解问题，假设我有一个 javascript 函数，它使用 Ajax 在数据库中添加一些记录，其他任何人都可以从控制台使用此函数在数据库中添加任意多的记录。我希望从 Web 应用程序而不是从控制台调用该函数...我试图混淆代码以隐藏它，但我们仍然可以从 Google Chrome javascript 控制台找到该函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:32:15.567

**无论您对代码进行了多少混淆和隐藏，任何可以在客户端执行的 javascript 都可以在控制台中执行，如果您希望对其进行真正的控制，您应该始终在服务器端运行权限/安全检查此类功能的安全性。**

**话虽**如此，您可以在立即调用的函数表达式中重构代码，该函数表达式不会像往常一样从控制台轻松调用，如下所示：

```
(function() {
    var myUncallableFunction = function() { alert('meow'); }
})(); 
```

该函数`myUncallableFunction`只能从父函数内部调用，因为它是该父函数的局部变量，因此在其外部无法访问。

您仍然可以在该父级内部调用此函数，但如下所示：

```
(function() {
    var myUncallableFunction = function() { alert('meow'); }
    myUncallableFunction();
})(); 
```

# android - Android：根据屏幕大小从选项卡切换到拆分器

> ID：15193154
> 
> 赞同：0
> 
> 时间：2013-03-04T01:29:56.207
> 
> 标签：android, android-fragments

我正在为客户端开发一个应用程序，其中对平板电脑与手机外形尺寸的要求从手机的选项卡和更大的平板电脑尺寸设备的拆分视图切换。

目前，该应用程序可以在带有选项卡的手机上运行，​​并且具有派生自 TabActivity 的主要活动。

根据我的阅读，针对不同尺寸的设备进行设计通常涉及针对不同尺寸设备的不同布局......但是如果活动的基类在每个布局中都不同怎么办。（即：手机的TabActivity，拆分视图的Activity）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:40:27.233

由于`TabActivity`已被弃用两年多，希望您不打算使用它。

因此，使用现代选项卡，例如 a `ViewPager`，结合[ViewPagerIndicator 库](http://viewpagerindicator.com/)`PagerTabStrip`中的选项卡样式指示器（个人而言，我更喜欢后者的外观）。将您的 UI 结构化为两个片段。将碎片放入手机中。将碎片一分为二水平放置在平板电脑上。`ViewPager``FrameLayouts``LinearLayout`

您还可以以几乎相同的方式使用操作栏中的选项卡，或者可能[是`FragmentTabHost`](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)。

# php - Timestamp、Date、Time 或 DateTime 哪个是哪个？

> ID：15193155
> 
> 赞同：0
> 
> 时间：2013-03-04T01:30:00.657
> 
> 标签：php, mysql

我知道这是一个渴望已久的问题，但我仍然找不到答案。

我的数据库中有一个固定的进出时间。我也有 date_in 和 date_out 在单独的列。我的数据库中的所有数据都来自 csv，它采用了这种精确的格式。我可以连接 (time_in 和 date_in) 和 (time_out 和 date_out) 并将它们放在时间戳格式的指定列中吗？

我正在导入和导出 csv，其中关注以下信息。到目前为止，我可以导出它，但我的导入效果不佳。我使用 phpmyadmin 的 csv 加载数据来导入。无法输入日期和时间，因为我的数据库中的其他数据混乱了。

> 注意：total_hrs 不包含在 csv 中，这意味着它已经在我的数据库中。而且它没有价值，所以基本上我会在我的脚本中为它提供值。

例子：

```
id | time_in | time_out |   date_in   |   date_out  |  total_hrs
 1 | 9:30pm  | 7:30am   | 2013-12-01  |  2013-13-01 |     ?

This should have a 10 hours elapsed time. 
```

所以基本上它也有不同的日期。我很困惑是否需要将时间转换为时间戳或类似的东西以获得时差，或者我还需要将日期作为获得两个时间之间差异的基础？任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:37:28.170

也可能是 34、58、.. 小时。我建议你存储时间戳，如果你需要漂亮的显示，你可以在 MySql 中使用 print （或类似的）函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:39:04.217

如果你有日期，你应该使用时间戳。它们更容易比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:42:36.923

在 mysql 中使用时间戳：

```
INSERT INTO tblTimes (timein) VALUES (NOW());
UPDATE tblTimes SET timeout = NOW() WHERE id=$someid; 
```

要进行比较，请参阅[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)

# php - PHP realpath 缓存如何在后台工作？

> ID：15193156
> 
> 赞同：10
> 
> 时间：2013-03-04T01:30:02.703
> 
> 标签：php, caching, realpath

我一直无法弄清楚真实路径缓存*实际上*在做什么。

以下是我的一些问题：

*   究竟什么时候缓存了路径，在什么条件下它可能不会被缓存？

*   它是如何缓存的？在内存中，在文件系统上，还有别的吗？如果在文件系统上，文件在哪里？

*   每个请求都有缓存吗？即是多个缓存，还是只有一个规范的真实路径缓存？

    我注意到，如果您转储缓存`var_dump(realpath_cache_get())`并保持，刷新页面，`Ctrl`+ `F5`，缓存的转储有时会有不同的输出？？？这里发生了什么？

*   如何以及何时清除/清理缓存？后台进程，某种垃圾收集器。例如，如果它是一个垃圾收集器：它什么时候运行，它在什么条件下运行？是每个请求，例如每个请求随机吗？我不知道，我只是在这里吐口水。

    注意：您似乎可以通过调用手动清除缓存`clearstatcache(true)`。

### realpath_* 函数

*   [真实路径](http://php.net/manual/function.realpath.php)
*   [realpath_cache_get](http://www.php.net/manual/function.realpath-cache-get.php)
*   [realpath_cache_size](http://www.php.net/manual/function.realpath-cache-size.php)
*   [清除统计缓存](http://php.net/manual/function.clearstatcache.php)

### 配置选项

[`realpath_cache_size`](http://www.php.net/manual/ini.core.php#ini.realpath-cache-size) `"16K"` `PHP_INI_SYSTEM`自 PHP 5.1.0 起可用。

[`realpath_cache_ttl`](http://www.php.net/manual/ini.core.php#ini.realpath-cache-ttl) `"120"` `PHP_INI_SYSTEM`自 PHP 5.1.0 起可用。

（来自手册）

> `realpath_cache_size` `integer`确定 PHP 使用的真实路径缓存的大小。在 PHP 打开许多文件的系统上应该增加这个值，以反映执行的文件操作的数量。
> 
> `realpath_cache_ttl` `integer`缓存给定文件或目录的真实路径信息的持续时间（以秒为单位）。对于很少更改文件的系统，请考虑增加该值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-04T11:09:20.880

`realpath()`调用时填充 Realpath 缓存。

随后对同一文件的调用`realpath()`将从`realpath`缓存中快速提取。

Realpath 缓存与常见文件系统函数 ( `stat`, `file_exists`, ...) 使用的缓存不同。

`realpath_cache_ttl`Realpath 缓存是每个进程的，并且它的条目在php.ini 设置中指定的持续时间内保持活动状态。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-04T05:47:41.157

PHP realpath 函数测试$path，指向目标文件/文件夹的路径来检查文件是否存在，或者可以说相当于调用file_exists($path)。

如果目标文件存在且不是符号链接（windows下名为“shortcut”），则返回文件名的绝对路径，不包含'/./'或'/../'</p>

如果目标文件是符号链接，或者不存在，realpath() 返回 FALSE。

```
var_dump (realpath (‘./Test.php’)); 
```

如果可以找到./Test.php文件路径，那么输出为：

```
string ‘E: \ Dropbox \ My Dropbox \ code \ php \ test.php’ (length=48) 
```

如果 ./path 是查找 test.php 的符号链接，则输出为：

```
boolean false 
```

如果./test.php找不到文件路径，那么输出为：

```
boolean false 
```

如果是在Windows平台下运行，则执行上面这行代码的结果，因为在Windows中，斜杠（/）和反斜杠（）都可以作为目录分隔符。

```
var_dump (realpath (‘. \ Test.php’)); 
```

希望以上对PHP realpath路径函数知识的描述能对大家有所帮助。

# 缓存：

缓存是按线程维护的，所以它不是灵丹妙药。

# 清除缓存：

只有活动线程的缓存才会被清除，您总共可能有几十个线程（例如 php-fpm 的实例，或 prefork 模式下的 httpd 子级）。最重要的是，当 open_basedir 启用时，PHP realpath 缓存将被禁用。

Filecache 将文件缓存在网络服务器的本地磁盘上，但会将所有 stat() 调用传递给 dbstatcache。Dbstatcache 将统计信息缓存在集群中所有 Web 服务器都可以访问的数据库中（这是检测已缓存文件是否被删除或更新所必需的）

# java - 有没有办法在不关闭底层流的情况下关闭 Writer？

> ID：15193157
> 
> 赞同：6
> 
> 时间：2013-03-04T01:30:06.160
> 
> 标签：java, sockets, io, outputstream

我有一个套接字，我向其中写入了一些字符数据和一些原始字节数据。对于字符数据，使用`PrintWriter`. 对于原始字节数据，直接写入`OutputStream`. 所以在我的代码中，我有这样的部分：

```
Writer writer = new PrintWriter(outputStream);
writer.write(someText);
...
writer.flush();
// No call to writer.close(), because that would close the underlying stream. 
```

只要我`Writer`在开始以其他方式写入流后小心不要写入此内容，就可以了。但我更愿意知道`IOException`如果我不小心写入流（就像我关闭它一样），我会得到一个安全的信息。

`Writer`有没有办法在不关闭其底层流的情况下明确防止未来写入 a ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T08:38:49.810

为什么？`close()`只做两件事：（1）刷新作者和（2）调用`close()`嵌套作者。如果您不想要（2），请给`flush()`自己打电话，根本不要打电话`close()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T01:37:59.403

简单地说，没有。Java io 流类的编写方式，它们总是链接关闭操作。当然，您可以创建自己的编写器实现来覆盖此行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T13:10:28.760

我会创建一个特殊的类，允许写入字符和二进制数据，例如：

```
class CombinedWriter extends Writer {
    private boolean isWritingBinary;
    private Writer mWriter;
    private OutputStream mOutputStream;
    public void write(byte[] bytes) {
        // flush the writer if necessary
        isWritingBinary = true;
        mOutputStream.write(bytes);
    }
    public void write(String string) {
        // flush if necessary
        isWritingBinary = false;
        mWriter.write(string);
    }
    public void flush() {
        // ...
    }
    public void close() {
        // ...
    }
} 
```

可以延长也可以不延长`Writer`；在后一种情况下，您不需要覆盖代码中未使用的方法。

writer flush 的技巧仍然存在，但它被本地化为一个类；此外，如果该技巧在未来的某个版本中出现问题，则可能会重写该类以消除该技巧（可能需要从 Android 源代码中借用一部分代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T21:15:52.453

这是将 OutputStream 用于字符和二进制数据的方法：

```
byte strBin[] = someText.getBytes("UTF-8");
outputStream.write(strBin); 
```

[如果您想要不同](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes(java.nio.charset.Charset))的编码，请替换“UTF-8” 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-06T03:46:10.707

谢谢提问！我遇到了完全相同的问题，而且很容易解决。通过阅读您的问题，听起来您可能正在尝试做我想做的事情，所以我想通过提供对我有用的解决方案来提供帮助。

在我的情况下，我试图为 jpg 编写 HTTP 响应，在这种情况下，文本标题部分后面将跟随二进制数据。这里的流是`OutputStream`Java 的`Socket`。

我正在使用 a`PrintWriter`将文本写入套接字流，但随后我需要写入二进制数据。有一个简单的解决方案，它适用于二进制数据跟随文本数据的情况，并且在二进制数据之后没有更多的文本数据。

只需`Printwriter`在流上打开 a 并使用 writer 将文本打印到流中，直到所有文本都被写入。然后将其刷新`PrintWriter`到流中，但不要关闭它（这会关闭必须保持打开的底层流）。最后，将二进制数据直接写入流。

最后，您可以简单地关闭`PrintWriter`以关闭底层流。

如果使用下面提供的类，您将：

1.  `HttpStreamWriterImpl`通过为`OutputStream`底层提供 来构造`Socket`。
2.  `writeLine()`根据需要反复调用。
3.  `writeBinary()`如果/根据需要打电话。
4.  `close()`完成后打电话。

例子：

```
public class HttpStreamWriterImpl implements Closeable
{
    private @NotNull OutputStream stream;
    private @NotNull PrintWriter printWriter;

    public HttpStreamWriterImpl(@NotNull OutputStream stream)
    {
        this.stream = stream;
        this.printWriter = new PrintWriter(stream, true, UTF_8);
    }

    public void writeLine(@NotNull String line)
    {
        printWriter.print(line);
        printWriter.print(HTTP_LINE_ENDING);
    }

    public void writeBinary(@NotNull byte[] binaryContent) throws IOException
    {
        printWriter.flush();
        stream.write(binaryContent);
        stream.flush();
    }

    @Override
    public void close()
    {
        printWriter.close();
    }
} 
```

# actionscript-3 - 如何在加载后检测图像方向（纵向与横向）然后相应地旋转舞台？

> ID：15193168
> 
> 赞同：0
> 
> 时间：2013-03-04T01:31:52.897
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我使用 flash builder 4.5 和 AS3 从实时 JSON 数据源动态加载图像。它的加载和工作正常并响应我的滑动手势（左滑动返回，右滑动前进到下一个图像）......

我想添加一些动作脚本来检测图片在成功加载后的方向，然后如果它是垂直方向的照片，将舞台旋转 90 度（并设置某种类型的标志以记住它处于“旋转状态”。

我怎样才能做到这一点？

```
if (myPic && myPic.width > myPic.height)
 {
     // this picture is horizontal, so leave stage in normal landscape aspect ratio
 } else {
     // something here to take the stage and rotate it 90 degrees
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:33:07.347

您可以使用宽高比来确定图像的形状是纵向还是横向。我不确定您是否要旋转舞台，而是要旋转图像本身。

这是我写的一个可以提供帮助的课程：

```
public class PhotoHolder extends Sprite
{

    public static const Landscape:int = 0;
    public static const Portrait:int = 1;

    private var _bitmap:Bitmap;
    private var _orientation:int = 0;

    public function PhotoHolder(bitmap:Bitmap)
    {
        _bitmap = bitmap;
        _bitmap.x = -(_bitmap.width / 2);
        _bitmap.y = -(_bitmap.height / 2);

        if(bitmap.width >= bitmap.height) _orientation = Landscape;
        else
        {
            rotation = 90;
            _orientation = Portrait;
        }

        addChild(_bitmap);
    }

    public function get orientation():int
    {
        return _orientation;
    }

} 
```

这将为您管理旋转，您将能够通过 确定图像最初是 a`Landscape`还是`Portrait`方向`.orientation`。

# .net - 在 WPF C# 5.0 和 .NET 4.5 中阻止异步调用

> ID：15193171
> 
> 赞同：1
> 
> 时间：2013-03-04T01:32:01.387
> 
> 标签：.net, async-await, c#-5.0

这是一段代码，我在长时间运行的任务中遇到了 UI 阻塞问题。我见过其他似乎做同样事情的例子，但这不起作用。我认为这很简单。

我错过了什么？

```
public class ClipManager
{
    async public Task<int> AddNewClipsAsync()
    {
        int rc = AddNewClips();  // does the work
        return rc;
    }
}

public partial class MainWindow : Window
{
private async void UpdateClick(object sender, RoutedEventArgs e)
{
    // Check event to update library from WindowsMain.xml.cs
    private async void UpdateClick(object sender, RoutedEventArgs e)
    {

        UpdateBtn.IsEnabled = false;
        Console.WriteLine("Start of Update");
        var cm = ClipManagement.Create();

        int rc = await cm.AddNewClipsAsync();  // long running method

        // UI unfreezes at this point
        Console.WriteLine("After Update of Update");
        await Task.Delay(30000);  // just debugging code
        Console.WriteLine("After delay");
        LibraryDG.Items.Refresh();
        UpdateBtn.IsEnabled = true;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:08:31.387

您的电流`AddNewClips`将阻止用户界面。您需要将其包装在 a 中`Task.Run`，以便它在后台运行：

```
public class ClipManager
{
    async public Task<int> AddNewClipsAsync()
    {
        int rc = await Task.Run<int>(() => AddNewClips());  // does the work
        return rc;
    }
} 
```

上面的代码假设`AddNewClips`不进行任何 UI 调用——它只是处理一些数据，然后返回某种结果。

# bison - 带有 yacc 的多字符运算符

> ID：15193178
> 
> 赞同：0
> 
> 时间：2013-03-04T01:32:52.283
> 
> 标签：bison, yacc, lex, flex-lexer

我一直在尝试将按位运算符添加到给定的前缀/中缀/后缀计算器，但由于某种原因，我无法使用 yacc 识别运算符“<<”“>>”“**”。我四处寻找有类似问题的其他人，尤其是这个问题[yacc/bison tokens error。'>>>' 和 '>>' 都分配了编号 62](https://stackoverflow.com/questions/1515294/yacc-bison-tokens-error-and-both-assigned-number-62)，但还没有找到可行的解决方案。

我的 lex 文件

```
%{
#include "zcalc.h"
#include <math.h>

int ch;
int flag = 0;

#define NAME 257            
#define SEMISYM 268 
#define COMMASYM 269 
#define LPARSYM 270
#define RPARSYM 271
#define EQSYM 272 
#define PLUSSYM 273
#define MULTSYM 274
#define ASGNSYM 275 
#define MINUSSYM 276 
#define NUMBER 277
#define TILDE 278

/*New stuff I added*/
#define BITAND 279
#define BITOR 280
#define BITXOR 281
/*#define BITNOT 282*/
#define LSHIFT 283
#define RSHIFT 284
#define POWER 285

void yyerror( char *mesg ); /* yacc error checker */

/* definitions for lex analyzer */
letter [A-Za-z]         
digit  [0-9]+       
ident {letter}({letter}|{digit})*           
ws  [ \t\n]+                
other  .

%%

{ws}  ;         /*---- Tokens and Actions---- */
/*New Stuff*/
"&" return BITAND;
"|" return BITOR;
"^" return BITXOR;
"<<" return LSHIFT;
">>" return RSHIFT;
"**" return POWER;

"//".* ;                
";" return SEMISYM;         
"," return COMMASYM;            
"(" return LPARSYM; 

")" return RPARSYM;         
"==" return EQSYM;          
"+" return PLUSSYM;         
"*" return MULTSYM;         
"=" return ASGNSYM;         
"-" return MINUSSYM;
"~" return TILDE;

/*New Stuff
"&" return BITAND;
"|" return BITOR;
"^" return BITXOR;
"<<" return LSHIFT;
">>" return RSHIFT;
"**" return POWER;*/

{ident}     {
                 return NAME;
            }

{digit}     {
                 return NUMBER;
            }

"$"   { return 0; }

{other} ;               /* ignore other stuff */

%%

void yyerror( char *mesg ); /* yacc error checker */

/* yacc error function */
void yyerror( char *mesg ) {
  flag = 1;
  printf("%s \n" , mesg);  
}

int main() {
  printf("Lex  \t\tToken\t\t\n"); /* header on columns */
  printf("----------------------------\n"); 
  do
  {
    ch = yylex();

    if (ch == SEMISYM)
      printf("%s\t\tSEMICOLON ", yytext);
    else if (ch == COMMASYM)
      printf("%s\t\tCOMMA ", yytext);
    else if (ch == LPARSYM)
      printf("%s\t\tL_PARENTHESIS ", yytext);
    else if (ch == RPARSYM)
      printf("%s\t\tR_PARENTHESIS ", yytext);
    else if (ch == EQSYM)
      printf("%s\t\tEQ_OP ", yytext);
    else if (ch == PLUSSYM)
      printf("%s\t\tPLUS_OP ", yytext);
    else if (ch == MULTSYM)
      printf("%s\t\tMULT_OP ", yytext);
    else if (ch == ASGNSYM)
      printf("%s\t\tASSIGNMENT_STMT ", yytext);
    else if (ch == MINUSSYM)
      printf("%s\t\tMINUS_OP ", yytext);
    else if (ch == NUMBER)
      printf("%s\t\tNUMBER ", yytext);
    else if (ch == NAME)
      printf("%s\t\tNAME\t\t", yytext);
     else if (ch == TILDE)
        printf("%s\t\tTILDE\t\t", yytext);
        else
         printf("%c ",ch);
         printf("\n");          /* end check token read */
       }
       while(ch != 0);          /* read until end of file */    

      return 0;
    }

    int yywrap() {
      return 1;
    }

    %} 
```

还有我的 yacc 文件

```
 %{ 
#include "zcalc.h"

#include <string.h>
#include <math.h>
#include <stdlib.h>
#include <stdio.h>

int flag = 0;

void yyerror( char *mesg ); /* yacc error checker */

%}

%union {
  double dval;
  struct symtab *symp;
}

%token <symp> NAME
%token <dval> NUMBER
 // %token LSHIFT
 // %token RSHIFT
%token POWER

%left '-' '+'
 //%left "**"
%left '*' '/'
 //%left LSHIFT RSHIFT
 //%left POWER

%type <dval> expression
%%

statement_list: statement '\n'
                | statement_list statement '\n'

statement: NAME '=' expression { $1->value = $3; }
           | expression { printf("= %g\n", $1); }

expression: '+' expression expression { $$ = $2 + $3; }
            | '-' expression expression { $$ = $2 - $3; }
            | POWER expression expression { $$ = $3; }
            | '*' expression expression { $$ = $2 * $3; }
            | '/' expression expression { $$ = $2 / $3; }
            | '&' expression expression { $$ = (int)$2 & (int)$3; }
            | '|' expression expression { $$ = (int)$2 | (int)$3; }
            | '^' expression expression { $$ = (int)$2 ^ (int)$3; }
            | '<' '<' expression expression { $$ = (int)$3 << (int)$4; }
            | '>' '>' expression expression { $$ = (int)$3 >> (int)$4; }
//| "**" expression expression { $$ = pow($2, $3); }
            | '~' expression { $$ = ~ (int)$2; }
            | '(' expression ')' { $$ = $2; }
            | NUMBER
            | NAME { $$ = $1->value; }
%%

struct symtab * symlook( char *s ) {
   char *p;
   struct symtab *sp;

   for(sp = symtab; sp < &symtab[NSYMS]; sp++) {
     /* is it already here? */
     if (sp->name && !strcmp(sp->name, s))
       return sp;

     /* is it free */
     if (!sp->name) {
       sp->name = strdup(s);
       return sp;
     }
     /* otherwise continue to the next */
   }
   yyerror("Too many symbols...\n");
   exit(1);
}

void addfunc( char *name, double (*func)() ) {
  struct symtab *sp = symlook(name);
  sp->funcptr = func;
}

/* yacc error function */
void yyerror( char *mesg )  {
  flag = 1;
  printf("%s \n" , mesg);  
}

int main() {

  yyparse();

  return 0;
} 
```

我在标题中摆弄了定义和规则的位置，但这似乎不起作用。我可以使用 '<' '<' 让“<<”和“>>”工作，但它会抛出参数计数，并且看起来更像是一种解决方法而不是正确的解决方案。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:27:28.180

问题是，虽然您可以在野牛中定义和使用标记`"<<"`，`">>"`但此类标记没有扩展为 .tab.h 文件中定义的值的宏，因此没有（简单）方法可以在您的词法分析器。为了使用它们，您需要弄清楚分配给它们的标记值（整数）野牛（您可以在 .output 文件中看到它）并返回该整数。但是对 .y 文件的任何更改（添加的任何新标记，甚至只是重新排序的内容）都可能会改变这一点，因此几乎无法维护。

`LSHIFT`相反，定义名称标记（如和）更有意义`RSHIFT`，bison 将为其生成扩展为标记编号的宏，从而允许您在词法分析器中轻松引用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:43:40.183

我建议使用

```
%token LSHIFT "<<"
...
%left "<<"
...
expression: expression "<<" expression {...} 
```

在 Bison 文件和 Flex 文件中：

```
"<<"  return LSHIFT; 
```

注意`"<<"`在语法文件中使用，而不是`'<<'`像你写的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T06:58:28.163

您的 Flex 来源不正确；最后`%}`应该是文件，但这太令人震惊了，将材料复制到 SO 肯定是一个问题（你会`%}`在问题中显示的位置得到“过早的 EOF”）。

测试工具未升级以打印新条目。当我将`else`条款更改为：

```
 else
        printf("%d\t\tUNKNOWN (%s)",ch, yytext); 
```

然后在这个符号的罐子上运行测试程序，它的行为似乎是：

```
Lex         Token       
----------------------------
()+*=-~ &|^>>**<<;,()===
(       L_PARENTHESIS
)       R_PARENTHESIS
+       PLUS_OP
*       MULT_OP
=       ASSIGNMENT_STMT
-       MINUS_OP
~       TILDE
279     UNKNOWN (&)
280     UNKNOWN (|)
281     UNKNOWN (^)
284     UNKNOWN (>>)
260     UNKNOWN (**)
283     UNKNOWN (<<)
;       SEMICOLON
,       COMMA
(       L_PARENTHESIS
)       R_PARENTHESIS
==      EQ_OP
=       ASSIGNMENT_STMT
0       UNKNOWN () 
```

在此之前，它会打印明显的空白行，尽管实际上它们上有控制字符，因为 279-283 以 256 为模减少为字符代码 23-27 或 control-W 为 control-[。

# c - 如何在 C 中调用函数

> ID：15193182
> 
> 赞同：0
> 
> 时间：2013-03-04T01:33:26.783
> 
> 标签：c, function

我试图找出如何从 main() 调用给定函数。

```
void initialize(struct word_pair word_table[], int size) 
```

例如`initialize ( what, 5);`

我是 C 的新手，我认为这把我脑子里的一切都搞砸了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:36:18.390

这是一个示例用法：

```
#define SIZE 10
struct word_pair word_tables[SIZE];

// Populate the elements of word_tables

initialize(word_tables, SIZE); 
```

该`initialize()`函数有 2 个参数：

*   一个数组`struct word_pair`
*   数组的大小。

在上面的示例中，变量`word_tables`是一个 size 数组`SIZE`。

`SIZE`是在上面的示例中`macro`定义`10`的，但您可以根据需要更改它。

# javascript - 如何在单独的窗口中加载所有 href 链接

> ID：15193183
> 
> 赞同：0
> 
> 时间：2013-03-04T01:33:33.907
> 
> 标签：javascript, html, email, asp-classic, frame

我正在加载从电子邮件解析的 HTML 内容到框架。如果电子邮件包含 href 链接，它会尝试在其框架中打开该链接，但我想让它在新选项卡中打开。

通常，我会通过在href中将目标设置为_blank来做到这一点，但是href标签是直接从EML文件中读取的，所以除非有更好的方法，否则我似乎唯一能做到的方法就是解析正在读取的 HTML 标记，找到所有 href 链接并将目标添加到其中。如果可能的话，我想避免这个选项，因为解析 html 通常会给性能带来很多不利影响。

如果有人知道实现这一目标的优雅方式，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:36:06.420

这不是很优雅或语义化，但作为一种快速而肮脏的解决方案，您可以在第一个链接之前打印一个基本标签：

```
<base target="_blank"> 
```

有关详细信息，请参阅[http://www.w3schools.com/tags/att_base_target.asp](http://www.w3schools.com/tags/att_base_target.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:49:57.240

如果你使用 jQuery...

```
$('#frame a').click(function(event) {
  event.preventDefault();
  window.open($(this).attr('href'), '_blank');
}); 
```

# dynamics-crm-2011 - 如何根据案例的当前状态原因限制用户可以选择的状态原因？

> ID：15193184
> 
> 赞同：1
> 
> 时间：2013-03-04T01:33:48.310
> 
> 标签：dynamics-crm-2011

我正在设计一个使用状态原因将案例路由到我们组织内的各种队列的工作流程。

为了在工作流中强制执行流程（并减少用户需要从中选择的状态原因的数量），我想限制可以根据案例的当前状态原因选择哪些状态原因。我们有 12 个状态原因。

例如，我想确保如果案例处于“准备好报告创建”状态原因，用户只能将状态原因设置为“已取消”、“搁置”或“草稿报告已完成”——但他们不应该能够将状态原因设置为“报告已批准”。

我已经对这个问题进行了一些思考，我正在考虑的当前解决方案是：

1.  隐藏案例的状态原因字段。

2.  创建一个 CRM 对话流程，根据案例的当前状态原因，为用户提供相关的状态原因以供选择。

尽管此解决方案有效，但需要进行大量配置，因为每个状态原因都需要一个页面 - 在 CRM 对话过程中。

有没有人对这个问题不那么笨拙的解决方案有任何建议？

注意：这是一个本地安装，因此我们可以部署的解决方案类型具有完全的灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:37:36.963

有几种方法可以做到这一点。

对话框肯定会给您一个无代码选项。

如果您乐于使用 JavaScript，您可以使用和Xrm.Page.ui[控制方法](http://technet.microsoft.com/en-us/library/gg334266.aspx)`adoption`等函数动态添加和删除选项。这将提供更流畅的用户体验。`clearOptions``removeOption`

如果您想强制执行业务规则，您还可以添加一个插件，该插件在设置错误状态时抛出异常，以防止任何数据导入或其他进程错误地设置值。

# javascript - Adobe AIR 应用程序在 JavaScript 中记住并设置窗口状态

> ID：15193185
> 
> 赞同：1
> 
> 时间：2013-03-04T01:33:54.647
> 
> 标签：javascript, air

我有一个使用 FlashDevelop 创建的单窗口 AIR 应用程序，并希望它在用户关闭它时记住窗口的大小和位置。当它重新打开时，它会调整大小并转到该位置。

找到了一个可以执行此操作的 AS3 脚本，但我的应用程序没有 AS3。只有一个html和js文件。

当窗口关闭时，它应该保存窗口的状态，当它打开时，它应该加载保存的状态并调整大小/移动到保存的状态。这是我在 $(document).ready 上的内容

```
 var width = screen.width;
    var height = screen.height;
    var p=new DOMParser();
    var xml,x,y,windowWidth,windowHeight;
    var f = window.runtime.flash.filesystem.File
      .applicationDirectory.resolvePath("appPosition.xml");
    if (f.exists){
        var s = new window.runtime.flash.filesystem.FileStream();
        try {
            s.open(f,window.runtime.flash.filesystem.FileMode.READ);
            xml=p.parseFromString(s.readUTFBytes(s.bytesAvailable),"text/xml");
            x = parseInt(xml.childNodes[0].getAttribute("x"),10);
            y = parseInt(xml.childNodes[0].getAttribute("y"),10); 
            windowWidth = parseInt(xml.childNodes[0].getAttribute("width"),10);
            windowHeight = 
                parseInt(xml.childNodes[0].getAttribute("height"),10);
            x = (x >= width) ? 20 : x;
            y = (y >= height) ? 0 : y;
            x = (x <= (width*-1)) ? 20 : x;
            y = (y <= (height*-1)) ? 0 : y;
            if (windowWidth >= (width-60) && windowHeight >= (height-60)) {
//the x and y are not set
                window.runtime.flash.display.NativeWindow.x =20;
                window.runtime.flash.display.NativeWindow.y = 0;
                window.resizeTo(900,600);
// not yet sure if the following works
                window.runtime.flash.display.NativeWindow.maximize();
            }else{
// x and y don't do anything here either
                window.runtime.flash.display.NativeWindow.x = x;
                window.runtime.trace("sitting window x:",x);
                window.runtime.flash.display.NativeWindow.y = y;
                window.resizeTo(windowWidth,windowHeight);
            }
        }catch (e) {
            window.runtime.trace(e.message);
        }finally{
            s.close();
        }
        return; 
```

当窗口关闭时，我希望我的函数保存窗口的状态，但无论我尝试什么函数都不会被调用：$(window).on("close"... 或 window.onclose= 或 <document onunluoad=. .. 冗长的指南似乎没有关于如何获取当前窗口的任何内容： [http ://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/scripting/pdfs/ javascript_tools_guide.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/scripting/pdfs/javascript_tools_guide.pdf) 涵盖了创建窗口，一旦拥有它就可以操作它，但我从不创建窗口，application.xml 看起来像这样：

```
...
  <initialWindow>
    <title>App Title</title>
    <content>main.html</content>
... 
```

所以我有以下问题：

1.  如何将事件侦听器添加到当前窗口？
2.  加载时如何设置当前窗口 x 和 y？
3.  我可以在窗口可见之前调整和移动窗口的大小吗，因为它现在似乎正在调整大小，但看起来有点片状，因为它最初以默认大小打开，然后重新调整为以前存储的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:32:47.720

使用window.nativeWindow解决了它（注意nativeWindow的小写n，在AS3中是大写）。这是代码：

```
$(document).ready(function(){
    var width = screen.width;
    var height = screen.height;
    var p=new DOMParser();
    var xml,x,y,windowWidth,windowHeight;
    var f = window.runtime.flash.filesystem.File
      .applicationDirectory.resolvePath("appPosition.xml");
    if (f.exists){
        var s = new window.runtime.flash.filesystem.FileStream();
        try {
            s.open(f,window.runtime.flash.filesystem.FileMode.READ);
            xml=p.parseFromString(s.readUTFBytes(s.bytesAvailable),"text/xml");
            x = parseInt(xml.childNodes[0].getAttribute("x"),10);
            y = parseInt(xml.childNodes[0].getAttribute("y"),10); 
            windowWidth = parseInt(xml.childNodes[0]
              .getAttribute("width"),10);
            windowHeight = parseInt(xml.childNodes[0]
             .getAttribute("height"),10);
            x = (x >= width) ? 20 : x;
            y = (y >= height) ? 0 : y;
            x = (x <= (width*-1)) ? 20 : x;
            y = (y <= (height*-1)) ? 0 : y;
            if (windowWidth >= (width-60) && windowHeight >= (height-60)) {
                window.nativeWindow.x =20;
                window.nativeWindow.y = 0;
                window.resizeTo(866,600);
                window.nativeWindow.height = height-60;
                window.nativeWindow.maximize();
            }else{
                window.nativeWindow.x = x;
                window.nativeWindow.y = y;
                window.resizeTo(windowWidth,windowHeight);
            }
        }catch (e) {
            window.runtime.trace(e.message);
        }finally{
            s.close();
            window.nativeWindow.visible=true;
        }
        return;
    }
    try{
        window.nativeWindow.x = 20;
        window.nativeWindow.y = 0;
        window.nativeWindow.width = 866;
        window.nativeWindow.height = height-60;
        window.nativeWindow.visible=true;
    }catch(e){
        window.runtime.trace(e.message);
    }

    window.nativeWindow.addEventListener
      (window.runtime.flash.events.Event.CLOSING, function(e){
        var xml = '<position x="'+window.nativeWindow.x 
          +'" y="'+window.nativeWindow.y+'" width="'
          + window.nativeWindow.width + '" height="' 
          + window.nativeWindow.height + '"/>';
            var f = window.runtime.flash.filesystem.File.
          applicationDirectory.resolvePath("appPosition.xml");
        f = new window.runtime.flash.filesystem.File(f.nativePath);
        var s = new window.runtime.flash.filesystem.FileStream();
        try{
            s.open(f,window.runtime.flash.filesystem.FileMode.WRITE);
            s.writeUTFBytes(xml);
        }catch (e){
            window.runtime.trace(e.message);
        }finally{
            s.close();
        }
    });

}); 
```

在 application.xml 中：

```
 <initialWindow>
    <title>app title</title>
    <content>main.html</content>
    <systemChrome>standard</systemChrome>
    <transparent>false</transparent>
    <visible>false</visible> 
```

设置 visible false 使其平滑地出现在用户关闭它的最后位置。

# javascript - 带有 jQ uery Mobile 的 Android Phonegap - 后退按钮导致滚动到页面顶部

> ID：15193186
> 
> 赞同：1
> 
> 时间：2013-03-04T01:33:57.157
> 
> 标签：javascript, android, jquery, cordova, jquery-mobile

我的移动应用程序在 iOS 上的行为与预期一样，但在 android 下，在点击指向新页面的链接之前滚动的任何溢出 div 都会在返回时滚动回顶部。页面似乎没有重新加载，只是在转换完成之前滚动到顶部。

我似乎遇到了[这里](https://github.com/jquery/jquery-mobile/issues/2121)讨论的问题。那里发布的建议解决方法都没有帮助。

我正在使用 Phonegap 2.0.0 和 jQuery Mobile 1.2.0

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:10:31.160

Android 的后退按钮与 PhoneGap 有很大的不同。我所做的只是禁用了 Android 中的后退按钮。

```
$(function(){
    document.addEventListener("deviceready", onDeviceReady, false);
})

// PhoneGap is loaded and it is now safe to call PhoneGap methods
//
function onDeviceReady() {
    // Register the event listener
    document.addEventListener("backbutton", onBackKeyDown, false);
}

// Handle the back button
//
function onBackKeyDown() {
    console.log("Back button pressed but nothing happened");
} 
```

这是我选择的方法。如果您想使用后退按钮，那么此解决方案不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:02:25.757

禁用后退按钮对我来说不是一个可行的解决方案，并且由于在 jQM 框架中使用 history.back() 进行后退导航，因此同样的结果仍然存在。即使使用 Phonegap 的 navigator.history.back() 替代方法仍然会产生不良影响。最后我添加了这样的处理程序，诚然可以改进（欢迎提出建议）：

```
/* ANDROID WORKAROUND */
$('div').on('pagebeforehide', function(event, ui) {
    var scrollPos = $(this).find('.scrolldiv').scrollTop();
    $(this).jqmData('scrollPos',scrollPos );
});

$('div').on('pagebeforeshow', function(event, ui) {        
    var page = $(this);
    setTimeout(function(){
        //using animate becuse I could not get scrollTo() to work (?)
        $(page).find('.scrolldiv').animate({scrollTop: $(page).jqmData('scrollPos')}, 0);
    },1); //add it to the JS process stack
}); 
```

# c++ - C++ 错误 c2512：没有可用的默认构造函数

> ID：15193189
> 
> 赞同：-1
> 
> 时间：2013-03-04T01:34:06.610
> 
> 标签：c++, constructor

我知道有很多关于这个的问题，但我不明白 D：对不起，我是新手，有些东西我还是不明白......这是作业，我需要为计时器设置闹钟的地方，突然出现了这个错误（我在学校的电脑上工作时它不存在），我不知道如何解决，所以请帮助我！这是我的代码：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class Display {
public:
    Display(int lim);
    void Increment();
    void SetValue(int val);
    int GetValue();
    void Show();
    int GetLimit();

private:
    int limit, value;
};

class Timer {
public:
    Timer();
    void Increment();
    void Set();
    void SetAlarm();
    void Show();
    void ShowAlarm();

private:
    Display hours, minutes, seconds, alarmH, alarmM, alarmS;
};

Display::Display(int lim)  {
    value=0;
    limit=lim;    }

void Display::Increment()  {
    value++;
    if (value==limit)
        value=0;   }

void Display::SetValue(int val)   {
    if (val<0)
        val=-val;
    value=(val%limit);   }

int Display::GetValue()  {
    return value;   }

void Display::Show()  {
    if (value<10)
        cout<<"0";
    cout<<value;  }

int Display::GetLimit() {
    return limit;  }

Timer::Timer():hours(24), minutes(60), seconds(60) {
}

void Timer::Increment()  {
    seconds.Increment();
    if(seconds.GetValue()==0) {
        minutes.Increment();
        if(minutes.GetValue()==0)
            hours.Increment();} }

void Timer::Show()  {
    hours.Show();
    cout<<':';
    minutes.Show();
    cout<<':';
    seconds.Show();  }

void Timer::ShowAlarm()  {
    alarmH.Show();
    cout<<':';
    alarmM.Show();
    cout<<':';
    alarmS.Show();  }

void Timer::Set()  {
    int setting;
    cout<<"Poner horas a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<hours.GetLimit()<<": ";
    cin>>setting;
    hours.SetValue(setting);
    cout<<"Poner minutos a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<minutes.GetLimit()<<": ";
    cin>>setting;
    minutes.SetValue(setting);
    cout<<"Poner segundos a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<seconds.GetLimit()<<": ";
    cin>>setting;
    seconds.SetValue(setting);    }

void Timer::SetAlarm()  {
    int setting;
    cout<<"Poner horas a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<hours.GetLimit()<<": ";
    cin>>setting;
    alarmH.SetValue(setting);
    cout<<"Poner minutos a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<minutes.GetLimit()<<": ";
    cin>>setting;
    alarmM.SetValue(setting);
    cout<<"Poner segundos a que valor?\n";
    cout<<"Ingresa un entero entre 0 y "; cout<<seconds.GetLimit()<<": ";
    cin>>setting;
    alarmS.SetValue(setting); }

void main()  {
    Timer t;
    cout<<"Aqui esta el valor incial del timer: ";
    t.Show();
    cout<<"\n\n";
    t.Set();
    cout<<"Aqui estan los nuevos valores: ";
    t.Show();
    cout<<"\n\n";
    cout<<"Lo corremos por 10 segundos...\n";
    for (int i=0;i<=10;i++)  {
        t.Increment();
        t.Show();
        cout<<'\n';    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:43:45.530

您的 Timer 类将 Display 对象作为数据成员，并且 Timer 的构造函数没有显式构造所有这些对象（AlarmH、AlarmM、AlarmS）。因此，编译器尝试使用 Display 的默认构造函数来构造它们，但没有。这是因为您为 Display 提供了一个（非默认）构造函数，因此编译器不会自动为您生成默认构造函数（如果您根本没有为 Display 提供任何构造函数，它会这样做）。

解决方案：为 Display 显式提供您自己的默认构造函数。

宣言：

```
class Display {
public:
    Display(); // Default constructor
    Display(int lim);
    void Increment();
    void SetValue(int val);
    int GetValue();
    void Show();
    int GetLimit();

private:
    int limit, value;
}; 
```

定义：

```
Display::Display(){} // Default constructor

Display::Display(int lim)  {
    value=0;
    limit=lim;    }

// etc. 
```

# php - 正则表达式确定字符串是否为分数

> ID：15193192
> 
> 赞同：-5
> 
> 时间：2013-03-04T01:34:26.613
> 
> 标签：php, regex

晚上好，

我正在尝试使用 php 解析大量数据。我正在努力发现数据中包含的内容。如果给我一个字符串，例如

> 亚特兰特 0-1 托卢卡

我想使用正则表达式模式来检测字符串是否包含#-#，无论#-# 之前或之后是什么。

理论上，分数可以是 0-0 -> 0-100 之间的任何值。

感谢您对创建此模式的任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:41:41.897

这将匹配一个数字，紧跟一个连字符，紧接着是另一个数字，允许多位数字，并且有组可以为您提供每个分数。

```
preg_match('/([0-9]+)\-([0-9]+)/', $string, $match); 
```

那应该对你有用。

# jquery - 使用 jQuery 选择器选择没有 ID 或类的文本

> ID：15193194
> 
> 赞同：1
> 
> 时间：2013-03-04T01:34:33.023
> 
> 标签：jquery, dom, jquery-selectors

使用以下模板如何获得“获取此文本”

```
<h1 class="classA classB">
        Obtain this text 
        <span class="unwanted">
            unwanted text
        </span>
</h1> 
```

我试过`$('.classA.classB:not(.unwanted)')`了，但我没有多余的东西就拿回来了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:37:00.603

[***jsFiddle***](http://jsfiddle.net/ZvtDZ/)
克隆它，放下孩子，获取文本：

```
$('.classA').clone().find('.unwanted').remove().end().text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:38:33.533

```
$("#foo")
    .clone()    //clone the element
    .children() //select all the children
    .remove()   //remove all the children
    .end()  //again go back to selected element
    .text();    //get the text of element 
```

.remove() 接受一个选择器，所以你可以做类似的事情`.remove('.unwanted')`

[源](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/

演示

[http://viralpatel.net/blogs/demo/jquery/get-text-without-child-element/](http://viralpatel.net/blogs/demo/jquery/get-text-without-child-element/)

提问前请先google

# mysql - 查询以获取分类的拆分集

> ID：15193195
> 
> 赞同：1
> 
> 时间：2013-03-04T01:34:33.220
> 
> 标签：mysql, sql

鉴于此表结构：

```
CREATE TABLE IF NOT EXISTS splits (
    id INT AUTO_INCREMENT,
    sector_id INT,
    type VARCHAR(100),
    percentage INT,
    PRIMARY KEY (id),
    INDEX (type)
) ENGINE MyISAM; 
```

而这个数据集：

```
INSERT INTO splits (sector_id, type, percentage) VALUES
(1, 'Manager', '50'),
(1, 'Sales Rep', '50'),
(2, 'Manager', '75'),
(2, 'Sales Rep', '25'),
(3, 'Manager', '75'),
(3, 'Sales Rep', '25'),
(4, 'Manager', '100'),
(5, 'Manager', '100'),
(6, 'Manager', '100'); 
```

我如何返回以相同方式拆分的扇区数量：

像这样：

```
Split          | Number
---------------+-------
50% M / 50% SR | 1
75% M / 25% SR | 2
100% M         | 3 
```

所以这表明 1 个扇区 (id 1) 的拆分比为 50/50，2 个扇区的拆分比为 75/25 (ids 2, 3)，3 个扇区的拆分比为 100/0 (ids 4, 5 , 6)。

这是一个带有数据库设置的 SQL Fiddle：[http ://sqlfiddle.com/#!2/6b19f/1](http://sqlfiddle.com/#!2/6b19f/1)

> *你试过什么？*

我什至想不出从哪里开始解决这个问题，所以我很抱歉无法展示一个尝试过的解决方案。如果我得到任何地方，我会更新这个问题。

我想在数据库（而不是应用程序）中完成所有这些操作的原因是因为我们的自动报告工具可以指向表/视图/查询并自动应用过滤、排序、图表等。在应用程序失去所有默认功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:42:33.923

我真的不明白这个问题。您的数据库已经包含您要检索的所有数据？！

```
SELECT
  sector_id AS Number,
  type
  percentage
FROM
  splits 
```

现在最简单的事情就是带上你的软件，然后把那些（类型百分比）元组变成字符串。**为什么需要数据库来创建和连接这个字符串？**

**可以超过`type`2s吗？**

对于 Postgres，我会使用一组元组作为输出：

```
SELECT
  sector_id,
  array_agg(row(percentage, type))
FROM
  splits
GROUP BY
  sector_id 
```

* * *

# 正确查询：

```
SELECT
  x.y,
  COUNT(*) c
FROM (
  SELECT
    sector_id,
    GROUP_CONCAT(CONCAT(percentage, '% '), type SEPARATOR ' / ') AS y
  FROM (
    SELECT
      sector_id,
      type,
      percentage
    FROM splits
    ORDER BY sector_id, type
  ) z
  GROUP BY sector_id
) x
GROUP BY x.y
ORDER by c 
```

结果将如下所示：

```
50% Manager / 50% Sales Rep | 1
75% Manager / 25% Sales Rep | 2
100% Manager                | 3 
```

# java - Java PreparedStatement 删除查询：显示删除的行数？

> ID：15193196
> 
> 赞同：2
> 
> 时间：2013-03-04T01:34:34.347
> 
> 标签：java, mysql, database, prepared-statement

我有一个带有 MySQL 查询的 PreparedStatement，它根据时间戳标准删除行。是否可以从同一个删除准备语句中删除多少行，或者我是否必须运行单独的查询才能首先获取该数字？这是我尝试过的，但没有奏效：

```
 PreparedStatement pstmt = conn.prepareStatement(delete, PreparedStatement.RETURN_GENERATED_KEYS);
        pstmt.setString(1, keyword);
        pstmt.executeUpdate();
        ResultSet rs = pstmt.getGeneratedKeys();
        while (rs.next())
        {
            n = rs.getInt(1);
        } 
        rs.close();
        pstmt.close();
        conn.close(); 
```

对不起，伙计们，我想通了。int n = pstmt.executeUpdate();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:39:29.557

一种方法是相信结果[`PreparedStatement#executeUpdate`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)：

> **返回**(1) SQL 数据操作语言 (DML) 语句的行数或 (2) 0 用于不返回任何内容的 SQL 语句

另一种方法是`SELECT COUNT(*)`在执行删除语句之前使用语句。请注意，您可以在单个连接/事务中同时执行这两项操作，以免影响结果。

# android - 从单个 SQLite 列收集数据

> ID：15193198
> 
> 赞同：1
> 
> 时间：2013-03-04T01:34:47.360
> 
> 标签：android, android-sqlite

仍然掌握这一切。

我的问题是这样的 - 我有一个列，我希望从单个表下的数据库中收集分数：

```
23
45
84
56 
```

我想把它们全部收集起来并加在一起。

我试过这个：

```
String[] projection2 = {BorrowMeTable.COLUMN_CREDIT_SCORE };
Cursor databaseCursor2 = getContentResolver().query(uri, projection2,
        null, null, null);
int number = 0;
if (databaseCursor2 != null) {
    while (databaseCursor2.isAfterLast() == false) {
        databaseCursor2.moveToFirst();
        number = number + databaseCursor2.getInt(databaseCursor2
                .getColumnIndexOrThrow(BorrowMeTable.COLUMN_CREDIT_SCORE));
    }
} 
```

但它只会让应用程序崩溃。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:57:16.440

你在这里有一个无限循环：

```
while (databaseCursor2.isAfterLast() == false){
    databaseCursor2.moveToFirst();
    ...
} 
```

您永远不会移动到光标中的下一行。通常我会使用这样的东西：

```
while(cursor.moveToNext()) {
    // do cursor stuff
    ....
} 
```

# qt - 如何使用 QuaZIP 创建一个空文件夹

> ID：15193200
> 
> 赞同：1
> 
> 时间：2013-03-04T01:35:10.773
> 
> 标签：qt, quazip

我已经成功地使用 QuaZIP 在 ZIP 文件中创建了文件夹和文件，但是为了创建一个文件夹，我使用了一种不优雅的方式，它在 ZIP 文件中创建了一个没有名称的文件。有没有办法在 ZIP 文件中创建空文件夹而不在该文件夹中创建文件？

创建文件夹的代码：

```
QuaZip zip("path_to\\zipFile.zip");
zip.open(QuaZip::mdCreate);
QuaZipFile outFile(&zip);
outFile.open(QIODevice::WriteOnly, QuaZipNewInfo("SomeFolder\\"));
outFile.close(); 
```

# opengl - rgba 缓冲区乘法 (OpenGL)

> ID：15193207
> 
> 赞同：0
> 
> 时间：2013-03-04T01:36:09.923
> 
> 标签：opengl, multiplication, rgba

我将解码后的图像保存为 RGBA，并将像素存储到类型的缓冲区中：

```
unsigned char *data1; 
```

我有另一个缓冲区（相同大小 480x720），包含另一组 RGBA 数据。

```
unsigned char *data2; 
```

如何使用 OpenGL 对这两个缓冲区进行逐点乘法

例如：如果 data1 和 data2 是：
data1 = (a0,a1,a2,a3,a4,...)

数据2 = (b0,b1,b2,b3,b4,...)

那么如何使用OpenGL来做到以下几点呢？

数据1*数据2 = (a0*b0,a1*b1,a2*b2,a3*b3,a4*b4,...)

是否可以使用 OpenGL 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:53:07.340

我不是一个重度 openGL 用户，所以我不能谈论它可以做什么和不能做什么，但我可能会建议您查看 OpenCV 以了解您想要实现的目标。有很多使用 OpenCV 的预制瞳孔跟踪示例，并且有一些非常好的指南可以在 Beagleboard 和 Rasp Pi 等嵌入式设备上编译 openCV。

我认为openGL是一种绘图工具，而openCV是一种处理工具。

openCV 带有已定义的矩阵类型，以及您想要执行的许多矩阵运算。

[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:00:02.217

您可以使用的简单片段着色器：

```
in vec2 tex_coords;
uniform sampler2d texture_a, texture_b;
out vec4 my_color;

vec4 a = texture(texture_a, tex_coords);
vec4 b = texture(texture_b, tex_coords);

my_color = vec4(a.r * b.r, a.g * b.g, a.b * b.b, 1.0); 
```

# javascript - 从 JSON 获取主干网，编辑模型数据，然后保存回 JSON

> ID：15193209
> 
> 赞同：0
> 
> 时间：2013-03-04T01:36:22.367
> 
> 标签：javascript, json, model-view-controller, backbone.js

我一直在学习 Code School 的 Anatomy of Backbone.js 课程，但在尝试将模型更改保存回服务器时感到困惑。也许你可以帮忙。

这就是我理解需要发生的事情：

1.  使用 fetch() 从 JSON 数据源填充集合；
2.  将集合附加到 DOM
3.  编辑模型（取消选中复选框，将“收藏夹”设置为 false）
4.  保存模型。

我的假设是，如果我取消选择一条记录作为“收藏夹”然后点击刷新，则更改将是持久的，并且在 JSON 文件中也很明显。但是，情况并非如此，原始集合已加载且 JSON 未更改。

我认为我的困惑在于使用 fetch 方法并在模型和集合中声明 URL。

***我怎样才能使这种模型更改保持不变？***

**模型：**

```
var Contact = Backbone.Model.extend({
    url: '/contacts',
    defaults:{
        favourite: false
    },
    toggleFavourite: function(){
        if(this.get('favourite') === false) 
        {
            this.set({ 'favourite': true });
        } else {
            this.set({ 'favourite': false })
        }
        this.save();
    }
}); 
```

**收藏**

```
var Contacts = Backbone.Collection.extend({ 
    model: Contact,
    url: '/contacts'
}); 
```

**意见**

```
var ContactView = Backbone.View.extend({
    className: 'record',
    template: _.template('<span><%= name %></span>' + 
                         '<span class="phone-number"><%= phone %></span>' +
                         '<input type="checkbox" <% if(favourite === true) print("checked") %>/>'),

    events: {
        'change input': 'toggleFavourite',
        'click .phone-number': 'dial'
    },

    initialize: function(){
        this.model.on('change', this.render, this);
    },

    toggleFavourite: function(e){
        this.model.toggleFavourite();
    },

    dial: function(e){
        alert('Dialing now...');
    },

    render: function(){
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
});

var ContactsView = Backbone.View.extend({

    initialize: function(){
        this.collection.on('add', this.addOne, this);
        this.collection.on('reset', this.addAll, this);
    },

    addOne: function(contact){
        var contactView = new ContactView({ model: contact });
        this.$el.append(contactView.render().el);
    },

    addAll: function(){
        this.collection.forEach(this.addOne, this);
    },

    render: function(){
        this.addAll();
    }

}); 
```

**应用程序.js**

```
var contacts = new Contacts(); //creates list
contactsView = new ContactsView({ collection: contacts}); //creates list view
contacts.fetch({url: 'contacts/data.json'}); //populates list
$('#mainPanel').append(contactsView.el); //appends list to DOM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:48:22.080

Backbone 在客户端上工作，不能更改服务器本身的文件。

您需要将动态数据存储在服务器上的某处（如果您使用 json 可能会更容易）。

联系人/data.json 命名的**静态**文件。因为当你没有在服务器上写它时它没有改变。

# python - 如何在 Graphite 中汇总一秒钟的数据？

> ID：15193210
> 
> 赞同：1
> 
> 时间：2013-03-04T01:36:56.283
> 
> 标签：python, linux, frequency, graphite

我是石墨新手。我刚刚编写了一个在石墨中生成数据的 Python 脚本，但是我为每个数据点发送了 1 的值，并且每秒有多个数据点。将现在只是一条直线的图转换为频率图的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:54:20.230

在 Graphite Web 应用程序中：

例如，如果您的系列名称是 testing.hits 并且您正在查看它的图表（水平线），然后单击 Graph Data -> 选择您的系列 -> Apply Function -> Transform -> Summarize 并选择持续时间.

```
summarize(testing.hits, "1min") 
```

另请查看[文档](http://graphite.readthedocs.org/en/1.0/functions.html)

# java - Android Parcelable 作为包装器

> ID：15193216
> 
> 赞同：1
> 
> 时间：2013-03-04T01:37:26.483
> 
> 标签：java, android

据此[，](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)最好实现 Parcelable 然后 Serializable 。

但是，我的大部分实体已经完成，并且没有实现每个实体的接口，因为我的所有实体似乎工作量太大，我决定创建一个像这样的 Parcelable Wrapper。
但真的更好吗？通常我在顶部保存 1、2 个对象并且它工作正常，但这被认为是对 Parcelable 的错误使用，或者甚至与 Serializable 相同（坏）的东西？

```
public class SaveParcelable implements Parcelable {
    private HashMap<String, Object> values;

    public SaveParcelable() {
        this.values = new HashMap<String, Object>();
    }

    @SuppressWarnings("unchecked")
    public <T> T getValue(String key) {
        if (this.values.containsKey(key))
            return (T) this.values.get(key);
        else
            return null;
    }

    public void setValue(String key, Object value) {
        this.values.put(key, value);
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
    }
} 
```

# java - 你能在 Java 中创建一个链表数组吗？

> ID：15193229
> 
> 赞同：1
> 
> 时间：2013-03-04T01:39:08.357
> 
> 标签：java, arrays, linked-list

是否可以创建一个链表数组？还是链表的arraylist？我一直在到处寻找，似乎得到了相互矛盾的答案。我已经看到“否”的答案表明它无法完成，因为您无法制作一系列可以取消引用的事物。我已经看到“是”的答案表明它可以完成并且它们在那里结束。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:46:51.810

如果我理解正确，您基本上想要制作一个二维数组，但后半部分是一个链表。

```
import java.util.ArrayList;
import java.util.LinkedList;

public class Test
{
    public static void main(String[] args)
    {
        LinkedList one = new LinkedList();
        LinkedList two = new LinkedList();
        LinkedList three = new LinkedList();

        ArrayList<LinkedList> array = new ArrayList<LinkedList>();

        array.add(one);
        array.add(two);
        array.add(three);

        // .. do stuff
    }
} 
```

Java 不关心数组或列表中的对象是什么，因此没有什么反对将另一个数组或列表放入其中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T01:48:46.090

最糟糕的方法：创建一个原始列表数组：

```
List[] lstString = new List[10];
for(int i = 0; i < lstString.length; i++) {
    lstString[i] = new LinkedList<String>();
    lstString[i].add(Integer.toString(i));
}
for(int i = 0; i < lstString.length; i++) {
    for(Iterator it = lstString[i].iterator(); it.hasNext(); ) {
        System.out.println(it.next());
    }
} 
```

更好的方法：使用包含 List 的包装类并创建它的数组：

```
public class Holder {
    List list = new LinkedList();
}

//...
Holder[] holders = new Holder[10];
for(int i = 0; i < holders; i++) {
    holders[i] = new Holder();
} 
```

更好的方法：使用`List<List<Data>>`：

```
List<List<Data>> lstOfListOfData = new ArrayList<List<Data>>();
for(int i = 0; i < 10; i++) {
    lstOfListOfData.add(new LinkedList<Data>());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:50:10.010

> 我已经看到“不”的答案表明它无法完成，因为您无法制作一系列可以取消引用的事物

数组的成员值是否无关紧要`null`，如果您仍然可以“访问”该成员并对其进行实例化，则它不会被取消引用。所以是的，你可以。

# mongodb - 从 Meteor 搜索查询中排除 _id？

> ID：15193230
> 
> 赞同：4
> 
> 时间：2013-03-04T01:39:18.683
> 
> 标签：mongodb, meteor

我正在尝试从没有 _id 字段但不包含的 Meteor 集合中提取文档：

```
Db.find({foo: bar}, {fields: {
  test1: 1,
  test2: 1,
  _id: 0
}}) 
```

也不排除：

```
Db.find({foo: bar}, {fields: {
  test3: 0,
  _id: 0
}}) 
```

似乎工作。两者都只返回一个空数组。我知道在 Mongo 中可以提取排除 _id 的文档，是在 Meteor 中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:21:20.017

我想你忘记了一些大括号：

```
Db.find({
    foo: bar
}, {
    fields: {
        test3: 0,
        _id: 0
     }
}); 
```

而且我在某处读到，**不支持包含/排除的混合**。这意味着，您的第一个示例将不起作用。

**编辑：**

来自流星[文档](http://docs.meteor.com/#fieldspecifiers)：

> **字段说明符**
> 
> 在服务器上，查询可以指定一组特定的字段以包含或排除在结果对象中。（*当前在客户端上忽略了字段说明符。*）
> 
> 要从结果对象中排除某些字段，字段说明符是一个字典，其键是字段名称，其值为 0。
> 
> `Users.find({}, {fields: {password: 0, hash: 0}})`
> 
> 要返回仅包含指定字段的对象，请使用 1 作为值。**_id 字段仍包含在结果中。**
> 
> `Users.find({}, {fields: {firstname: 1, lastname: 1}})`
> 
> *不能混合包含和排除样式。*

# c - 与 C 中的 recv() 混淆，是否存在底层输入缓冲区？数据从何而来？

> ID：15193231
> 
> 赞同：3
> 
> 时间：2013-03-04T01:39:25.433
> 
> 标签：c, sockets, network-programming, recv

我只是在 C 中学习套接字/网络编程，并且遇到了`recv()`函数导致一些意外行为的情况（至少对我来说是意外的）。

我有一个设置了套接字的服务器程序，并且`recv()`像这样调用：

```
bytes_received = recv(connected, recv_data, 5, 0); 
```

`recv_data`是一个 5 字节的缓冲区。

我的客户端程序用于`send()`发送数据，它的发送缓冲区是 1024 字节，但由于它是从标准输入读取的，所以在这个实验中我只给了它 1-10 个字节（字符）。

我看到即使我的`recv()`调用使用 5 字节缓冲区并施加 5 字节的限制，我仍然可以发送超过 5 个字节，而且它似乎只是在服务器端的*某个地方*排队，这样下一次`recv()`被调用（例如在一个循环中），它接收接下来的 5 个字节的传入数据。

我的理解是，它`send()`会触发它的数据（假设所有 12 个字节），但由于`recv()`只是“设置”来处理 5 个字节，所以最后的 7 个字节会丢失。服务器从哪里获取这些信息？套接字级别是否存在`recv()`从中弹出数据的底层输入缓冲区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:43:10.057

套接字的实现（在内核中）会自动为您处理这个问题。

只要它是 TCP 套接字，您就不会丢失数据。如果它是 UDP 套接字，如果缓冲区溢出，您可能会丢失数据。

# c - C - 调用 chmod 函数会导致意外结果

> ID：15193236
> 
> 赞同：0
> 
> 时间：2013-03-04T01:40:02.297
> 
> 标签：c, chmod

我正在编写一个需要能够设置文件权限的程序，但无论出于何种原因，chmod 的行为都不像我期望的那样。对于几个测试，我尝试创建两个不同的文件（fileOne.txt 和 fileTwo.txt）。fileOne.txt 的权限应该设置为 600，而 fileTwo.txt 的权限应该设置为 777。

运行我的程序会产生以下结果：

```
fileOne.txt having permissions set to ---x-wx--T
fileTwo.txt having permissions set to -r----x--t 
```

?? 什么？

下面是我的代码。我的 printf 的结果和预期的一样，(600, 777)，那为什么 chmod 不这样呢？

```
printf("chmod = %d\n", (int)getHeader.p_owner * 100 + (int)getHeader.p_group * 10 + (int)getHeader.p_world);
chmod(getHeader.file_name, (int)getHeader.p_owner * 100 + (int)getHeader.p_group * 10 + (int)getHeader.p_world); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:44:18.820

UNIX 文件系统权限是八进制的，而不是十进制的。所以乘以`100`和`10`会给你意想不到的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:44:25.980

权限以八进制报告，`600`实际上`0600`是 C（或十进制的 384）。

因此代码应该是：

```
printf("chmod = %d\n", (int)getHeader.p_owner * 100 + (int)getHeader.p_group * 10 + (int)getHeader.p_world);
chmod(getHeader.file_name, (int)getHeader.p_owner * 0100 + (int)getHeader.p_group * 010 + (int)getHeader.p_world); 
```

# ruby-on-rails - 在 Nginx 上将 TCP 连接转发到 HTTP

> ID：15193239
> 
> 赞同：0
> 
> 时间：2013-03-04T01:40:20.680
> 
> 标签：ruby-on-rails, ruby, http, tcp, nginx

我正在运行一个应用程序，它接受来自 GPS 记录器的数据，这些数据是通过 SMS、HTTP 或 TCP 发送的。我使用 HTTP 连接来传输数据，这很容易通过我的 Rails 应用程序上的 GET 请求接收。

出于省电的目的，我们将连接更改为纯 TCP，而 nginx 目前不接受这些请求：

从 nginx 的 access.log 中：

HTTP：

```
xx.xx.xx.xxx - - [03/Mar/2013:20:17:45 -0500] "GET /?imei=123456789012345&rmc=$GPRMC,035106.000,A,4145.1451,N,08506.8784,W,1.56,176.49,010213,,*13,3656mV,AUTO HTTP/1.1" 302 247 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22" 
```

TCP：

```
xx.xx.xx.xxx - - [03/Mar/2013:18:31:22 -0500] "imei=123456789012345&rmc=$GPRMC,233012.000,A,4221.6614,N,07106.1014,W,17.25,218.94,030313,,*21,4102mV,AUTO,310,260,ADB7,13EF,057,310,260,0000,0000,044,310,260,0000,0000,055,310,260,0000,0000,05A,310,260,0000,0000,059,310,260,0000,0000,05E,0,0,0000,0000,000,2" 400 172 "-" "-" 
```

有谁知道在 Nginx 上过滤这些 TCP 请求并将它们作为 HTTP GET 请求处理以通过 Rails 应用程序可用的方法？

提前致谢

回答：

我可以通过使用 em-proxy 和 faraday 创建一个自定义代理来实现这一点：

```
require 'em-proxy'
require 'faraday'

Proxy.start(:host => "0.0.0.0", :port => 8080, :debug => false) do |conn|

  conn.on_data do |data|
    http = Faraday.new(:url => 'http://example.com') do |faraday|
      faraday.request  :url_encoded             # form-encode POST params
      faraday.response :logger                  # log requests to STDOUT
      faraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP
    end
    http.get "/upload?#{data}"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:48:51.173

你应该看看websockets。Nginx 现在有对它们的原生支持，但是有一个旧的 Nginx 模块也可以工作。

[这是一个较旧的问题](https://stackoverflow.com/questions/12102110/nginx-to-reverse-proxy-websockets-and-enable-ssl-wss)，提供了两种解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-04T01:47:40.630

Nginx 是一个 HTTP 服务器，因此它希望客户端使用 HTTP。不可能让客户端以您描述的方式向 nginx 讲非 HTTP 协议（​​好吧，也许您可​​以编写一个自定义模块来做到这一点，但这似乎很愚蠢）。

我认为您需要做的是编写自己的代理服务器，它将原始 TCP 协议转换为 HTTP 请求。您的 GPS 记录器会与代理对话，然后代理会与 nginx 对话。这应该相当简单，因为 TCP 有效负载似乎只是一个 urlencoded 字符串，因此您可以直接使用它们。

# mysql - MYSQL Count unique rows on Where then Left Join 并按该计数排序，然后限制为 3

> ID：15193244
> 
> 赞同：0
> 
> 时间：2013-03-04T01:40:40.633
> 
> 标签：mysql, sorting, count, left-join, where

我有两张桌子；一个具有列文本、主题、用户称为“消息表”，另一个表具有列主题、标题称为“主题表”。

例子：

**消息表**

```
Text        Topic    User
Hi          Ball     Hank
Hello       Foot     John
Sup         Ball     Hank
Nuthin'     Foot     Hank
No          Volley   Hank 
```

**主题表**

```
Topic     Title
Ball      Basketball
Foot      Football
Volley    Volleyball 
```

我想用主题标题显示用户最喜欢的三个主题。

**结果：汉克的前 3 个主题**

```
Topic Count     Topic      Title
2               Ball       Basketball
1               Foot       Football
1               Volley     Volleyball 
```

我必须计算特定用户在“消息表”中拥有的唯一主题，然后将其加入“主题表”，以便我可以获取标题，然后按主题数按降序排列结果，这样我就可以获取用户最常用的话题。然后将结果限制为 3 行只是为了获得前 3 行。

帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:59:06.447

我假设在您的查询中，您正在搜索 Hank？如果是这样，这应该使用`COUNT`and工作`GROUP BY`：

```
SELECT Count(m.Topic), t.topic, t.title
FROM messages m
   JOIN topic t on m.topic=t.topic
WHERE m.user = 'Hank'
GROUP BY t.topic 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/75d6e/3)

**- 编辑 -**

```
SELECT user, cnt, topic, title
FROM (
  SELECT 
    @rowNum:=IF(@prevUser=m.user,@rowNum+1,1) rn,
    @prevUser:=m.user,
    m.cnt, 
    t.topic, 
    t.title, 
    m.user
  FROM (SELECT Count(Topic) cnt, topic, user FROM messages GROUP BY user, topic ORDER BY user, Count(Topic) DESC) m
     JOIN topic t on m.topic=t.topic
     JOIN (SELECT @rowNum:= 0) t
  ) t
WHERE RN <= 3
ORDER BY User 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/ac052/1)

这应该为每个用户返回 3 条记录——如果您只需要一个用户，请添加到 WHERE 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:03:37.267

如果您只需要 Hank 的 TOP-3 主题，请尝试

```
SELECT COUNT(m.Topic) `Count Topic`, m.Topic, MIN(t.Title) Title
  FROM messages m LEFT JOIN
       topics t ON m.Topic = t.Topic 
WHERE User = 'Hank'
GROUP BY m.Topic 
ORDER BY `Count Topic` DESC LIMIT 3 
```

输出：

```
| COUNT TOPIC |  TOPIC |      TITLE |
-------------------------------------
|           2 |   Ball | Basketball |
|           1 |   Foot |   Football |
|           1 | Volley | Volleyball | 
```

**[sqlfiddle](http://sqlfiddle.com/#!2/46e3a/7)**

# rest - 使用 HTTPBuilder 进行 HTTPS 的 Grails REST 插件

> ID：15193245
> 
> 赞同：0
> 
> 时间：2013-03-04T01:40:44.050
> 
> 标签：rest, grails, httpbuilder

我在 grails 中有一个运行良好的服务方法。

它通过 GET 请求提取 JSON。转到 prod 后，我们不得不将协议更改为 HTTPS，现在我遇到了异常。

要使用 HTTPS 协议，我有什么需要更改的吗？我翻遍了[HTTPBuilder 文档](http://groovy.codehaus.org/modules/http-builder/doc/rest.html)，但找不到使用 HTTPS 的单一参考。我在谷歌上也找不到一个例子。

```
 def reportList = new ArrayList()
        def result
        //TODO Dynamic PatientKey
        def http = new HTTPBuilder( 'https://mydomain/servicename?key=' + key )

        reportList = null
        http.request( GET, JSON ) { req ->

          headers.Accept = 'application/json'

          response.success = { resp, reader ->

            reportList = reader.getAt("patientReports")

          }

        }

    }
    [ reportList : reportList ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:13:19.370

你得到什么异常？请检查 SSL 证书是否对该网站有效。更多在这里。

[http://groovy.codehaus.org/modules/http-builder/doc/ssl.html](http://groovy.codehaus.org/modules/http-builder/doc/ssl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:48:17.157

这个 Grails 插件解决方案在测试或本地环境中运行良好，因为同源策略将阻止您实现前端 jQuery AJAX 调用，因为域不同。

在 Prod 中，由于使用了 HTTPS，并且由于域是相同的，所以 jQuery AJAX 调用比在控制器中使用逻辑并使用 REST 插件要好得多。

```
$.getJSON('${YOUR_URL}', function(data){ var yourData = data.yourData; //Operate on data here }); 
```

# php - 添加分页代码后的结果在 PHP 中变得混乱

> ID：15193246
> 
> 赞同：0
> 
> 时间：2013-03-04T01:40:48.897
> 
> 标签：php, html, mysql, css

下面是我的代码的一部分。我创建了一个文本框，当用户在文本框中输入单词/短语时，它会在数据库中搜索关键字。此代码还包含分页代码。我在这段代码中面临的问题是它第一次显示页码但在第一次它不显示所需的结果。当我从一页移动到另一页时，它会丢失变量“$each”的值并显示数据库中的所有结果。而这段代码应该只显示符合查询条件的部分数据

```
 <input type="text" name="k" 
        value="<?php if(isset($_GET['k'])){echo htmlentities($_GET['k']);} ?>" style="border: 1px, thin; width:92%; "/> 
    <input type="image" style="margin-bottom: 0; margin-top: 2px;" src="search.png"  value="submit" />
    </div>
    </fieldset>
</form>
</div>
<table cellpadding="0" cellspacing="0" border="1">
<tbody>    
<?php
$connection = mysql_connect('', '', '');
if(!$connection)
    echo "No database connected";
$dbase = mysql_select_db("", $connection);
if(!$dbase)
    echo "No datatable connected";

if(isset($_GET['k'])){ 
    $k1 = $_GET['k']; 
} else { 
    $k1 = ''; 
}

echo $k1;

$term = explode(" ", $k1);

$query = "SELECT * FROM kcpdatabase ";

foreach ($term as $each) {
   echo $each;
    $i++;
   if($i==1) {
        $query .= "WHERE keywords LIKE '%$each%' ";
   } else {
        $query .= "OR WHERE keywords LIKE '%$each%' ";
    }
}

echo $query;

$per_pages=3;
$page_query = mysql_query("SELECT COUNT('title') FROM kcpdatabase");

$pages = ceil(mysql_result($page_query, 0)/$per_pages)  or die($page_query."<br/><br/>".mysql_error()); //Calculating the number of pages and round it to higher side

$page = (isset($_GET['page'])) ? (int) ($_GET['page']) : 1; //Checking wheather value of page is set or not. 
                                                         //If not then assign it as a default value of 1.
$start = ($page - 1) * $per_pages; // Point to the record zero always to start displaying the data

$query .= "LIMIT $start, $per_pages";

$ourquery1 = mysql_query ($query);
if(!$ourquery1)
    echo "No query found";

    $row1 = mysql_num_rows ($ourquery1);

if($pages >= 1 && $page <= $pages){ 
   for($x = 1; $x <= $pages; $x++) {
        echo '<a href="?page='.$x.'">'.$x.'</a> ';
   }

    if ($row1 > 0) {

        while($result = mysql_fetch_assoc($ourquery1)) {
         echo "<tr>";
            echo "<td>";
            $title = $result['title'];
            $link = $result['link'];
            $region = $result['region'];
            $sector = $result['sector'];
            $theme = $result['theme'];      
            echo "<td> <a href=$link><h3>$title<h3></a>";
            echo "<h4>Sector: $sector Theme: $theme &nbsp; 
            <br> Region: $region </td> </tr>";
        }
    }   
}
echo "</tbody>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:39:42.580

[请不要](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)在新代码中使用 mysql_* 函数。它们不再被维护[并被正式弃用。](https://wiki.php.net/rfc/mysql_deprecation)看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解*[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)*，并使用**[PDO](http://php.net/pdo)**或**[MySQLi](http://php.net/mysqli)** -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择**[PDO](http://php.net/pdo)**，[这里有一个很好的教程。](http://www.brightmeup.info/article.php?a_id=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:58:02.947

您需要将搜索条件添加到分页链接 ( `k=$k1`)，因为它目前仅在您提交表单时设置。尝试类似的东西 -

```
if($pages >= 1 && $page <= $pages){ 
   for($x = 1; $x <= $pages; $x++) {
        echo '<a href="?k='.$k1.'&page='.$x.'">'.$x.'</a> ';
   } 
```

注意-您当前在`$k1`=>中使用未经处理的用户输入`$each`。

# algorithm - 三向集合不相交

> ID：15193247
> 
> 赞同：2
> 
> 时间：2013-03-04T01:40:56.787
> 
> 标签：algorithm, data-structures, disjoint-sets

这是我即将进行的测试的练习题中的一个问题。我希望在找到解决此问题的更有效解决方案方面获得帮助。现在，我知道我可以通过使用 3 个简单的`for`循环来解决这类问题，但那将是`O(N^3)`.

此外，我相信以某种方式结合二进制搜索将是最好的方法，并给出我`O(log n)`正在寻找的答案。不幸的是，我有点卡住了。

> 三路集合不相交问题定义如下：给定三个项目集*A*、*B*和*C*，如果所有三个集合都没有共同的元素，则它们是三路不相交的，即不存在*x*使得*x*在*A、B*和*C*中。
> 
> 假设*A、B*和*C*是可排序的项目集（整数）；此外，假设可以在 O( *n* log *n* ) 时间内对*n 个整数进行排序。*给出一个 O( *n* log *n* ) 算法来确定这些集合是否是三向集合不相交的。

 ***感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T05:56:51.443

问题陈述对如何解决问题给出了明显的提示。假设 3 个集合是数学集合（每个集合中元素是唯一的），只需将 3 个集合混合在一起并排序，然后线性遍历列表并搜索是否存在 3 个相同项目的实例。时间复杂度以排序为主，即`O(n log n)`. 辅助空间复杂度最多为`O(n)`。

另一种解决方案是使用基于散列的地图/字典。只需计算 3 组中项目的频率。如果任何项目的频率等于 3（这可以在检索频率进行更新时检查），则 3 个集合不是 3 路不相交的。插入、访问和修改可以`O(1)`分摊复杂度完成，所以时间复杂度为`O(n)`。空间复杂度也是`O(n)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:22:31.313

如果复杂性是约束（空间和常数项都不是），这可以在 O(n) 中解决。创建两个位图，将整数从 A 映射到第一个，将整数从 B 映射到第二个。然后遍历第三个（C）直到你用尽，或者你找到一个bitmapA（testInt）和bitmapB（testInt）都设置的条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-24T07:17:50.670

我们可以用 o(n) 来解决这个问题。如果我们使用 Set 数据结构并考虑初始容量和[负载因子](https://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)，这是可能的。

```
public static boolean checkThreeWaySetDisjointness(Set<Integer> a, Set<Integer> b, Set<Integer> c)
    {
        int capacity = Math.round((a.size() + b.size()) / 0.75f) + 1;
        Set<Integer> container = new HashSet<Integer>(capacity);
        container.addAll(a);
        for (int element : b)
        {
            if (!container.add(element))
            {
                if (c.contains(element))
                {
                    return false;
                }
            }
        }
        return true;
    } 
```

我们正在创建新的 Set 容器，因为如果我们直接在任何现有的 Set a/b/c 中添加，一旦其容量达到实际大小的 75%，java 将在内部创建新的 Hashset 并将整个现有 Set 复制到其中。此开销将具有 O(n) 的复杂性。因此，我们在这里创建新的大小**容量**的 HashSet，这将确保不会产生复制开销。然后复制整个集合 a，然后继续从集合 b 中一个接一个地添加元素。在 Java 中，如果 add() 返回 false 意味着元素已经存在于当前集合中。如果是，只需在第三组 c 中检查是否相同。HashSet 的方法 add 和 contains 的复杂度为 O(1)，因此整个代码在 O(n) 中运行。***

# asp.net-mvc-4 - MVC 4 覆盖 AuthorizeAttribute 不起作用

> ID：15193251
> 
> 赞同：11
> 
> 时间：2013-03-04T01:41:12.517
> 
> 标签：asp.net-mvc-4, authorize-attribute

我创建了一个基本的 MVC 4 项目。添加了 HomeController 和 Home\Index.cshtml 和 ContactUs.cshtml。在 Global.asax 中为 ContactUs 添加路由。

添加一个文件夹 Auth 并在 Auth 文件夹中添加一个类 Auth.css。

```
using System;
using System.Web;
using System.Web.Http;
using System.Net.Http;

namespace MvcApplicationTestProject1
{
    public class AuthAttribute : AuthorizeAttribute
    {
        //public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
        //{
        //    HandleUnauthorizedRequest(actionContext);
        //}        

        protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
        {
            var response = actionContext.Request.CreateResponse(System.Net.HttpStatusCode.Redirect);
            response.Headers.Add("Location", "http://www.google.com");
            actionContext.Response = response;
        }
        //MVC 4 Web.Http.AuthorizeAttribute has IsAuthorized function but not AuthorizeCore
        protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext)
        {
            return false;
        }
    }
} 
```

在 HomeController

```
public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            return View();
        }

        //
        // GET: /Home/  
        [Auth]       
        public ActionResult ContactUs()
        {
            return View();
        }
    } 
```

问题是当运行代码并访问 http://localhost:[port number here]/Home/ContactUs 时，它没有命中覆盖类 AuthAttribute。

代码有问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T03:42:45.513

您的评论说您正在尝试实现[这篇文章](http://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the-right-way.aspx)中的内容，但您根本不是从那篇文章中复制代码，而是从之前的 SO 帖子中复制代码：[在 MVC 4 中使用自定义授权，](https://stackoverflow.com/questions/12882407/using-custom-authorization-in-mvc-4)它指的是 Web API。在阅读该帖子时，您会发现不同之处在于您使用的 AuthorizeAttribute 。您正在使用`System.Web.Http`而不是`System.Web.Mvc`.

如果您使用了您在评论中提到的代码，那么您会发现它会起作用：

```
using System.Web;
using System.Web.Mvc;

namespace MvcApplicationTestProject1
{
    public class AuthAttribute : AuthorizeAttribute
    {
        protected override bool AuthorizeCore(HttpContextBase httpContext)
        {
            return false;
        }
    }
} 
```

# git - git push子目录向上推到github？

> ID：15193252
> 
> 赞同：2
> 
> 时间：2013-03-04T01:41:18.173
> 
> 标签：git, github

每当我推送到主服务器时，我都会尝试将我的 github 代码与实时网络服务器同步。

因此，当我`git push origin master`将代码推送到 github 上时，我也只想将一个子目录推**送到**服务器。

目前我是通过 来完成的`git subtree push --prefix dist origin master`，其中**dist**是进入实时服务器的子目录。

每当我推动也这样做时，我可以添加一个钩子`git subtree push --prefix dist origin master`吗？

还是有更简单的方法来做到这一点？

我的实时 webserer git-reporsitory 只是一个裸 gitfolder，它被`GIT_WORKING_TREE`设置为`DocumentRoot`然后`git checkout -f`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:18:31.000

`git push`该命令目前没有挂钩。据我所知，你所做的似乎是正确的。

# iphone - XCODE：开始/结束外观转换的不平衡调用 我在我的应用程序中有一个 UIWebView，在该 Web 视图中，我导航到我的移动网站，其中有一个按钮输入，类型为“选择文件”，用于加载新的个人资料图片。每次我尝试从生成的上拉 iPhone 菜单中选择“选择现有”或“拍照”选项时，当我的视图控制器消失以允许我选择照片时，我都会收到以下错误： “对 U 问问题 问问题 2013-03-04T01:41:25.327 3153 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在我的应用程序中有一个 UIWebView，在该 Web 视图中，我导航到我的移动网站，其中有一个按钮输入，类型为“选择文件”，用于加载新的个人资料图片。每次我尝试从生成的上拉 iPhone 菜单中选择“选择现有”或“拍照”选项时，当我的视图控制器消失以允许我选择照片时，我都会收到以下错误： “对 UIFileUploadFallbackRootViewController 的开始/结束外观转换的不平衡调用：0x20d65940” 选择图像后，应用程序只会返回黑屏... 当我在 Safari 中执行相同的操作时，“选择文件”功能可以正常工作。 备注： 1.) 我在我的应用程序中使用 UINavigationController（即弹出和推送视图）。 2.) 用于加载照片的移动网站上的 HTML 代码：

> ID：15193253
> 
> 赞同：0
> 
> 时间：
> 
> 标签：iphone, ios, xcode, uiviewcontroller, uiwebview

我在我的应用程序中有一个 UIWebView，在该 Web 视图中，我导航到我的移动网站，其中有一个按钮输入，类型为“选择文件”，用于加载新的个人资料图片。每次我尝试从生成的上拉 iPhone 菜单中选择“选择现有”或“拍照”选项时，当我的视图控制器消失以允许我选择照片时，我都会收到以下错误：

**“对 UIFileUploadFallbackRootViewController 的开始/结束外观转换的不平衡调用：0x20d65940”**

选择图像后，应用程序只会返回黑屏...

当我在 Safari 中执行相同的操作时，“选择文件”功能可以正常工作。

**备注**：

1.) 我在我的应用程序中使用 UINavigationController（即弹出和推送视图）。

2.) 用于加载照片的移动网站上的 HTML 代码：

```
<form class="appnitro" enctype="multipart/form-data" method="post" action="mysite.php">
<input id="file1" name="file1" class="button_text" type="file" size="50px"/> <br />
<input id="submitpic" class="button_text" type="submit" name="submit" value="Save Picture"     /> 
```

*使用 jquery 移动。*

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:09:39.890

当我同时推送两个视图控制器和动画时，通常会出现此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T16:20:29.407

您的窗口的 rootViewController 未设置。

看到这个答案： [https ://stackoverflow.com/a/16548036/199516](https://stackoverflow.com/a/16548036/199516)

# java - 最后一段代码到底在做什么？

> ID：15193257
> 
> 赞同：0
> 
> 时间：2013-03-04T01:42:00.790
> 
> 标签：java

```
protected boolean[] bitArray = new boolean[8];

protected void readNextByte() throws IOException {

    latestReadByte = reader.read();
    int decimtalTal = latestReadByte

    for(int n= 0; n < 8; n++){
        int pos = (int)Math.pow(2, n);

        bitArray[7-n] = (decimalTal & pos) == pos;  // THIS LINE

        // what is the bitwise And in bracket == pos supposed to mean?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:48:49.350

赋值右侧的代码`bitArray[7-n] =`正在测试是否`n`设置了 decimalTal 位。如果该位被设置（非零），它评估为真，如果该位被清除（零），则为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:02:07.607

@VGR 是正确的，但是当您将来遇到类似代码时要指出一个小细节：

`(decimalTal & pos) == pos` 测试pos 中的*所有*位是否也设置为 decimalTal

`(decimalTal & pos) != 0` 测试pos 中的*任何*位是否也设置为 decimalTal

在这个例子中，pos 只设置了 1 位，因为它是 2 的幂，所以没关系。

# java - LinkedIntList(java)

> ID：15193262
> 
> 赞同：1
> 
> 时间：2013-03-04T01:42:17.130
> 
> 标签：java

“RemoveAll”类是 Linked List 类的一部分。我编写的类从链接列表中删除所有键，但不会删除重复键。

有人知道为什么吗？我如何也可以删除重复的键？

```
public class LinkedIntList {

    private ListNode front; 
    private String name = "front"; 

    // Constructs an empty list.
    public LinkedIntList() {
        front = null;
    }

   public void removeAll(int key){

    if(front == null){ 

         throw new RuntimeException();

       }else if( front.data == (key)) {

      front = front.next;

      return;
   }

     ListNode cur  = front;

     ListNode prev = null;

   while(cur != null  && cur.data != (key) ){

      prev = cur;

      cur = cur.next;
   }

   if(cur == null) 

    throw new RuntimeException();

   prev.next = cur.next;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:47:00.070

如果您有重复项，蛮力方法是继续调用 removeAll() 直到它返回 false。

```
while (myCollection.removeAll(someOthercollection))
   ;  // comment here that the loop does nothing for clarity 
```

补充：正如@Dukeling 正确指出的那样，您不必这样做。但是，如果 removeALl() 实施不当，您可能不得不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:50:46.693

好吧，您的方法只找到第*一个*匹配键，然后尝试从列表中删除该项目，然后返回。找到第一个匹配项后，您将不得不循环删除项目，直到找到*不*匹配的键（或者您到达列表末尾）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-02T18:09:51.457

```
public void removeAll(T value) {
    if (this.front == null) {
        return;
    }

    Node<T> prevNode = null;
    Node<T> currNode = this.front;

    // If the node we want to remove is front node...
    while (currNode.data.equals(value)) {
        prevNode = currNode;
        currNode = currNode.next;
        prevNode.next = null;
    }
    this.front = currNode;

    while (currNode != null) {
        if (currNode.data.equals(value)) {
            prevNode.next = currNode.next;
            currNode.next = null;
        } else {
            prevNode = currNode;
        }
        currNode = prevNode.next;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:23:35.337

您需要在 data == 键时删除节点，以便确保删除*所有*事件，而不仅仅是第一个。

在这些行`else if( front.data == (key)) { front = front.next;`中，您只删除第一次出现。它应该是`while ( front.data == (key)) { front = front.next;`

再次在这里，您只删除一个节点： `prev.next = cur.next` 您需要一个`while cur.data == key`块来将`prev`and`cur`节点调整为匹配键的*最后一次*`prev.next = cur.next;`出现，然后再调用. 否则，您将只删除第一次出现。

# ruby - 将答案输出到文本文件？

> ID：15193263
> 
> 赞同：0
> 
> 时间：2013-03-04T01:42:18.823
> 
> 标签：ruby, shoes

我正在使用 ruby​​ 和鞋子为一些学生创建测试。我想知道如何让他们点击一个按钮，然后他们在文本框中的答案以文本文件格式发送到桌面。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:49:04.840

```
File.open('path/to/desktop/answers.txt', 'w') do |file| 
  file.write('answers')
end 
```

# c++ - 如何从主 C++ 之外的 argv[] 获取输入

> ID：15193272
> 
> 赞同：2
> 
> 时间：2013-03-04T01:43:12.547
> 
> 标签：c++, argv

我目前正在尝试从命令行获取带有 argv[] 的数字。换句话说，我试图从

./计算器 -q 2

我目前的设置是这样的：

```
#include <iostream>
using namespace std;

int check_q(char* argv[]){
    float q, qa;
    if(atoi(argv[1]) == q){
       qa = atof(argv[2]);
    }
    if(atoi(argv[3]) == q){
       qa = atof(argv[4]);
    }
    if(atoi(argv[5]) == q){
       qa = atof(argv[6]);
    }
    if(atoi(argv[7]) == q){
       qa = atof(argv[8]);
    }
return qa;
}

int main(int argc, char *argv[]){

    float qa = 0;
    check_q(argv);
    cout << qa << endl;

 return 0;} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:48:13.777

您没有检查 的值`argc`以查看传递给程序的参数数量。如果您只传递两个参数，那么访问`argv[3]`将给出未定义的行为；所以你必须先检查参数的数量。

此外，如果您正在寻找具有 value 的参数，请与以下内容`"-q"`进行比较`"-q"`：

```
if (std::string(argv[1]) == "-q") 
```

您将其转换为数字并与未初始化的变量进行比较，这不会做任何有用的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:54:55.323

传下去：

```
#include <string>
#include <vector>
#include <iostream>
#include <algorithm>
#include <cassert>

float check_q(std::vector<std::string> const& args)
{
    int q = 42;

    for (auto it = args.begin(); it != args.end(); std::advance(it, 2))
    {
        if (std::stoi(*it) == q)
        {
            auto next = std::next(it);
            assert(next != args.end());

            return std::stof(*next);
        }
    }

    return 0;
}

int main(int argc, const char *argv[])
{
    const std::vector<std::string> args(argv, argv+argc);

    // pass it along
    check_q(args);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:52:29.737

你在这里做错了很多事情：

```
#include <iostream>
using namespace std;

int check_q(char* argv[])
{
    float q, qa;           // you never assign `q` a value, so the following comparisons make no sense
    if(atoi(argv[1]) == q)   // you never check argc in main to determine if argv[whatever] is valid.  if the array isn't long enough, this will invoke undefined behavior.
    {
       qa = atof(argv[2]);  // you're assigning a value to `qa` declared in this function, leaving the one declared in main unchanged.  probably not what you intended
    }
    // and so on

    return qa;
}

int main(int argc, char *argv[])
{

    float qa = 0;
    check_q(argv);    // this function never changes the value of `qa` that's declared in main...
    cout << qa << endl;    // ... so this will always print 0

 return 0; 
```

}

你可能想做更多的事情：

```
#include <iostream>
#include <string>
#include <vector>

float check_q(const std::vector<std::string>& args)
{
    if(args[1] == "-q")
    {
        return ::atof(args[2].c_str());
    }
    else
    {
        return 0.0f;   // or some other default
    }
}

int main(int argc, char *argv[])
{
    const std::vector<std::string> args(argv, argv+argc);

    if(args.size() >= 3) // argv[0] is usually the name of the executable
    {
        std::cout << check_q(argv) << std::endl;
    }
    else
    {
        std::cout << "not enough args" << std::endl;
    }
} 
```

一旦你更有经验，你会想要使用像[GNU getopt](https://www.gnu.org/software/libc/manual/html_node/Getopt.html)或[boost::program_options](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options.html)这样的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T01:49:24.760

这段代码有很多东西没有多大意义，或者不安全或不优雅，我不确定您通过检查参数 1、3、5 和7，但这里至少有一个问题：

`qa`in`main`永远不会被更新，因为你没有给`check_q`它分配返回值。声明必须是：

```
float qa = 0;
qa = check_q(argv); 
```

或者真的，只是：

```
float qa = check_q(argv); 
```

# php - 将 getTotal 添加到网站

> ID：15193273
> 
> 赞同：-1
> 
> 时间：2013-03-04T01:43:13.860
> 
> 标签：php

我需要将总数添加到在线分类网站的类别中。这些总数将像类别一样动态变化，因此每次页面加载时都需要更新。我相信我需要使用 getTotal 命令，但不知道如何或在哪里输入它。提前感谢您的帮助。

目前的代码如下所示：

```
<div class="submenu">
        <?php
        foreach($catList as $row){
        ?>
        <div class="submenutxt"><a href="<?php echo base_url();?>category/listing/<?php echo $row->meta_title;?>"><?php echo $row->category_name;?> </a></div>
        <?php
        }
        ?>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:49:33.513

中的总行数`$catList`：

```
<?php

    echo "$total rows: <br />";
    foreach($catList as $row) { ?>
        echo (count($row))." items in this category";  
... 
```

# google-app-engine - 如何在 iOS/Android 回合制游戏中高效使用 GAE 数据存储

> ID：15193276
> 
> 赞同：2
> 
> 时间：2013-03-04T01:43:50.787
> 
> 标签：google-app-engine, nosql, google-cloud-datastore

我决定为我的游戏使用谷歌应用引擎。我将使用 python 数据存储来存储信息。

我需要存储有关每个用户和正在玩的游戏的信息。对于每个用户，我需要存储姓名、id、赢得的游戏等。对于每个游戏，我需要存储 player1 id、player 2 id 和其他一些与游戏相关的字符串。

将游戏信息与用户联系起来的最佳方式是什么？我应该在用户数据库中有一个 game1、game2、game3 属性，还是有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T21:24:14.313

您可以在数据存储中拥有“重复”属性，该属性提供值列表。在您的情况下，您可能会执行以下操作：

```
class Game(ndb.Model);
    ...

class User(ndb.Model):
    games = ndb.KeyProperty(kind=Game, repeated=True) 
```

在您的代码中， myUser.games 将是游戏对象的键列表。

或者，如果您的游戏有固定数量的玩家，您可以在另一个方向建立关系：

```
class Game(ndb.Model):
    player1 = ndb.KeyProperty(kind=Player)
    player2 = ndb.KeyProperty(kind=Player) 
```

然后为了获得一个玩家的所有游戏，你会查询类似的东西`Game.query(player1=myPlayer.key)`（再次查询 player2）。

# mysql - SQL 性能与 Not Equals before Equals，反之亦然

> ID：15193278
> 
> 赞同：1
> 
> 时间：2013-03-04T01:44:06.370
> 
> 标签：mysql, sql

我是 sql 查询的新手，并试图尽可能多地了解它们。这是我现在正在调情的 SQL 查询，并对此有一些疑问。

```
SELECT COUNT(id) AS count 
FROM stride 
WHERE recipientId = ? 
   AND recipientView = 0 
   AND sourceUserId != recipientId 
```

1.  将等号放在不等之前是否会产生性能差异，反之亦然？
2.  我在这里使用了两次 recipientId。第二次调用变量更好还是应该两次都填充变量？例如。

`SELECT COUNT(id) AS count FROM stride WHERE recipientId = ? AND recipientView = 0 AND sourceUserId != ?`

1.  `id`是主键。`COUNT(*)`代替它对性能有什么影响吗？我觉得这样做`COUNT(id)`会更快，但这只是一种感觉，我没有证据。
2.  我应该`IN`在这里使用或任何其他运算符来获得查询速度吗？
3.  你会在这里做些什么来使这个查询更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:07:14.403

查询优化与查询的语法关系不大，而与 RDMS 查询优化器有很大关系。

您建议的所有内容可能都*不会*产生任何影响，因为优化器会将它们分开并构建它认为最好的查询。具体来说，

1.  没关系
2.  没关系
3.  没有性能影响，但请注意，`COUNT(id)<>COUNT(*)`如果 id 列中有`NULL`s - 对于主键，则不会有任何`NULL`s。
4.  我看不出您如何使用 an 构建此查询，`IN`但无论如何它都不会影响性能
5.  `recipientId`索引会显着影响速度 - 对于此查询，索引 on`recipientView`并将`sourceUserId`产生显着影响

你应该做的就是不要相信我的话。设置每个查询并查看 RDMS 的执行计划。如果它们在那里相同，那么它们是相同的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:18:47.707

相等和不相等的位置无关紧要 - 除非有子查询。在您的情况下，where 子句将作为一个整体进行评估，因此不等于和等于的位置无关紧要。

Count(id) 与 Count(*) 相同，因为 [id] 是您的主键。两者都没有性能优势。

# recursion - Lisp 编程错误（堆栈溢出（深））

> ID：15193282
> 
> 赞同：1
> 
> 时间：2013-03-04T01:44:27.730
> 
> 标签：recursion, lisp

我要编写一个 lisp 程序来生成十六进制数的实际值。我已经编写了一个函数，但似乎遇到了 stackoverflow (deep) 错误。我想知道是否有人可以指出我的错误或指导我正确的方向。

如果没有为这个问题发布代码，我将不胜感激，因为这是家庭作业的一部分。因此，我只想要一个可能出错的解释或方向。

我觉得我的问题是我的递归没有终止，但我不知道如何解决它。

这是我的代码：

```
(defun calc (hex)
  (if hex
    (if (> (length hex) 1)
     ( + (first (reverse hex)) (* 16 (calc (reverse hex)))) hex))) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:00:18.370

“基本情况”（递归实际停止的情况/状态）是`hex`长度为 1 或更少。告诉我，每次你`calc`再次调用时，输入`calc`是否越来越小？如果不是，那么输入在数学上是不可能达到基本情况的。

假设`hex`从长度 9 开始。当您`calc`再次调用时，您已反转`hex`。所以 now`hex`是相反的，*但它的长度仍然是 9*。我怀疑这就是为什么递归永远不会停止的原因。

# haskell - 并行 parMap 和策略

> ID：15193283
> 
> 赞同：12
> 
> 时间：2013-03-04T01:44:32.287
> 
> 标签：haskell

`parMap`这是对并行策略和（Control.Parallel.Strategies）的怀疑

这是关于`parMap rseq`与 等价的`parMap rpar`。

由于`parMap`使用`parList`它并行评估，因此使用`rseq`或`rpar`将与 WHNF 并行评估。不是吗？

更新：

自从

```
parMap strat f = (`using` parList strat) . map f

parList = parTraversable

parTraversable strat = evalTraversable (rpar `dot` strat)

evalTraversable = traverse

strat2 `dot` strat1 = strat2 . runEval . strat1 
```

* * *

`parMap rseq`使用策略

```
rpar `dot` rseq 
```

这使：

```
rpar . runEval . rseq 
```

这使：

```
(\x -> x `par` return x) . runEval . (\x -> x `pseq` return x) 
```

很难去想结果。

* * *

更新：

我明白了，惰性求值首先采用组合的第一个函数，并且

```
(\x -> x `par` return x) 
```

授予可遍历容器中的每个元素将在可能的情况下触发并行计算。

所以我们可以添加*(rpar `dot`rseq)*等价于*(rseq `dot`rpar)*，不是吗？

这`parMap rpar`是多余的，因为它为每个可遍历元素生成两个火花。！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T06:11:58.537

快速冒烟测试表明是的`parMap rseq`，并且`parMap rpar`两者都得到并行评估。

```
import Control.Parallel.Strategies

fib 0 = 1
fib 1 = 1
fib n = fib (n-1) + fib (n-2)

main = print resultPlain where
  resultPlain = [fib 34, fib 34, fib 34, fib 34]
  resultPar   = parMap rpar id [fib 34, fib 34, fib 34, fib 34]
  resultSeq   = parMap rseq id [fib 34, fib 34, fib 34, fib 34] 
```

然后，使用每种`result_____`我对编译的二进制文件进行计时

```
ghc -threaded --make rpar
time ./rpar +RTS -N4 
```

并且看到`resultPlain`比`resultPar`或`resultSeq`（大约长 2 倍）长得多，`resultPar`并且`resultSeq`时间相对相同。

`Eval`缺乏 GHC 对 monad的实际解释的更多细节，但考虑到`parMap strat f = withStrategy (parList strat) . map f`这个实验的结果，我有信心说列表中的每个元素都是为了评估 WHNF 而引发的。

# javascript - .click() 事件之间的 jQuery 焦点

> ID：15193284
> 
> 赞同：0
> 
> 时间：2013-03-04T01:44:34.730
> 
> 标签：javascript, jquery, html, xml

这是作业，现在就宣布。

我必须通过 XML 加载“测验”（成功完成），并生成 td 单元格（完成）以显示所述问题（未完成，改为测试数据）。

这是我的javascript源代码

```
var selected;
var $cell;
var $cell2;
$(document).ready(function() {
    $("#getTitle").click(function() {
        selected = $("#quizname>option:selected").text();
        $("#quiztitle").html(selected+" Quiz");
        $("#quiz2").html(selected+" Quiz");
        murl = "quizdata.xml";
        $.ajax({type:"GET",
            url:murl,
            success:loaddata,
            cache:false,
            dataType:"xml",
            data:selected,
            error:ajaxerror
        });
    });
});

var $xml;
function loaddata(respobj,status,xhr) {
    //to do:
    //dynamic td creation for each xml question
    $("#questions").empty();
    $xml = $(respobj).find("quiz:contains("+selected+")");
    for (var i=0;i<$xml.attr("qnum");i++) {
        $('<tr>').attr("id","questions"+(i+1)).appendTo("#questions");

        $("<td>").attr("id","question"+(i+1)).appendTo("#questions"+(i+1));
        $("#question"+(i+1)).html((i+1)+". "+$xml.find("question[num='"+(i+1)+"']").text());
        $("#question"+(i+1)).addClass("th.thirty");

        $("<td>").attr("id","blank_question"+(i+1)).appendTo("#questions"+(i+1));
        $("#blank_question"+(i+1)).addClass("question");
        $("#blank_question"+(i+1)).html("Put Answer Here");

        $("<td>").attr("id","answer"+(i+1)).appendTo("#questions"+(i+1));
        $("#answer"+(i+1)).addClass("question");
        $("#answer"+(i+1)).html((i+1)+". "+$xml.find("answer[num='"+(i+1)+"']").text());

        $("#answer"+(i+1)).click(selectCell);
    }
}

function selectCell() {
    $cell = $(this);
    $cell.css("background-color","red");
    for (i=0;i<$xml.attr("qnum");i++) {
        $("#blank_question"+(i+1)).click(function() {
            $cell2 = $(this);
            $cell.css("background-color","lightgray");
            temp_text = $cell.text();
            temp_id = $cell.attr("id");
            $cell.attr("id",$cell2.attr("id"));
            $cell.text($cell2.attr('id'));
            $cell2.attr("id",temp_id);
            $cell2.text(temp_id);
            $("#answer"+(i+1)).unbind("click");
            $("#answer"+(i+1)).bind("click", function() {
                selectCell();
            });
        });
    }
}

function swapCell() {
    $cell.css("background-color","lightgray");
    alert($(this).attr("id"));
}

function ajaxerror(xhr,status,error) {
    $("td#desc").attr("class","");
    $("td#desc").html("xhr="+xhr);
    $("td#desc").append("<br /><br />status="+status)
    $("td#desc").append("<br /><br />error="+error);
} 
```

我的问题是（在此处尝试：[HomeWork Link](http://php.radford.edu/~jalexander/jQuery/hw2/hw2.html)）第一次单击第一个单元格时，将其与第二个单元格交换，它可以工作。但是，它仅适用于每次其他点击和交换，这让我认为存在一些绑定问题或焦点问题，因为我需要它无缝交换。代码中是否存在明显错误，或者我是否缺少特定的焦点/绑定事件？

谢谢！

编辑：交换后显示的值是单元格 ID 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:11:36.283

在谷歌搜索“jquery recursive .click binding”后，我发现不是 .click() 我将其更改为 .live() 并且效果很好。

# r - 支持向量机绘图 R 库（e1071）

> ID：15193286
> 
> 赞同：1
> 
> 时间：2013-03-04T01:44:51.270
> 
> 标签：r, plot, svm

我正在使用一个包含 500 多个变量的数据集，这些变量都是数字的。

我已经运行了库的`svm()`功能，`e1071`结果很好。

现在我正在努力绘制我的结果。

我已经回顾了一些`plot.svm`函数，我可以使它与 4 个变量一起工作。

但我想知道是否有更好的方法来绘制我的结果，总结我用 svm 创建的模型。

有什么建议么？

# acl - CakePHP 2.2 / AclExtras / aco_sync 需要很长时间才能执行

> ID：15193287
> 
> 赞同：0
> 
> 时间：2013-03-04T01:45:13.720
> 
> 标签：acl, cakephp-2.2

我有一个使用 AclExtras 的内部网络应用程序。

当我在 shell 中执行时

```
./Console/cake AclExtras.AclExtras aco_sync 
```

大约需要 4-5 分钟（！！！）。

可能有一些没有正确设置的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:05:01.353

好吧，它可能需要很多时间，因为它只需要它来重新生成所有权限，或者：

*   如果您在旧的或功能不够强大的服务器上运行它，它仍然可能运行缓慢。

*   如果由于高负载而导致数据库服务器出现问题。

*   如果您自定义编码的东西，如果没有优化它可能会运行得更慢。

*   .... 不管怎么说

如果您不提供任何代码和更详细的设置信息，无法说明为什么需要 4-5 分钟，但另一方面，它可能会占用大量资源，以至于 Shell 需要这些时间来完成它的任务。 .. 所以像“大约需要 4-5 分钟（！！！）这样的问题。可能有什么设置不正确吗？” 在这种情况下不好。请[查看如何提问](https://stackoverflow.com/questions/how-to-ask)。

# c - C中的动态全局变量

> ID：15193292
> 
> 赞同：1
> 
> 时间：2013-03-04T01:46:17.230
> 
> 标签：c, variables, dynamic, global-variables

有人可以解释为什么这不起作用：

```
int DIM = 128, hDIM = DIM/2 , dDIM = DIM*2;

int main(int argc, char **argv){

     DIM *= 2;

     printf("\n Double DIM is %d \n",dDIM);

} 
```

为什么打印 256 而不是 512？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:04:07.270

> 我如何对其进行编码以使其动态更改？

您可以使用函数而不是全局变量：

```
int DIM = 128;

int hDIM(void) { return DIM / 2; }

int dDIM(void) { return DIM * 2; }

int main(int argc, char **argv){
     DIM *= 2;
     printf("\n Double DIM is %d \n",dDIM());
} 
```

这样，`hDIM`每次使用时都会`dDIM`根据当前值进行评估。`DIM`您的代码的方式是，在程序开始时，使用 DIM 当时的值分配值，`hDIM`并且`dDIM`只分配一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:04:21.317

因为在执行`dDim`之前评估`main`。在开始 - 在`main`调用函数之前，`DIM`是 128。`dDim = 2 * DIM`这意味着`dDim`是 256。

然后`main()`调用函数，`DIM`设置为 256。但这一切对`dDim`.

> 我如何对其进行编码以使其动态更改？

您可以使用 Caleb 下面提到的方法，也可以使用预处理器宏。

```
int DIM = 128;

#define hDIM ((DIM) / 2)
#define dDIM ((DIM) * 2)

int main() {
  DIM *= 2;
  printf("%d", dDIM); /*prints 512 :-)*/
  return 0;
} 
```

但是我不推荐上述方法。这是令人讨厌且难以调试的。例如，它未通过此测试：

```
assert_equal_float(2.5f, hDIM);/*when DIM is 5*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:48:47.897

这是因为您只修改了`DIM`main() 函数中的值，而在ie`dDim`的初始值之后没有改变。`256``(128 * 2)`

```
int DIM = 128, hDIM = DIM/2 , dDIM = DIM*2; 
```

上述语句设置的值如下：

```
DIM = 128
hDIM = 64
dDIM = 256 
```

在`main()`你这样做的时候`DIM *= 2`，你只修改 DIM 的值。剩余的变量将不会被重新评估，因为您没有对`hDIM`or进行任何进一步的赋值`dDIM`。

# php - 在 Javascript 中创建 HTTP 请求

> ID：15193297
> 
> 赞同：0
> 
> 时间：2013-03-04T01:46:27.673
> 
> 标签：php, javascript, http-headers

是否可以使用 JavaScript 中的 POST 方法创建和发送类似的 HTTP 请求？

```
POST register.jsp HTTP/1.1
Host: hi/iq
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.2) Gecko/20021126
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,
video/x-mng,image/png,image/jpeg,image/gif;q=0.2,text/css,*/*;q=0.1
Accept-Language: en-us, en;q=0.50
Accept-Encoding: gzip, deflate, compress;q=0.9
Accept-Charset: ISO-8859-1, utf-8;q=0.66, *;q=0.66
Keep-Alive: 300
Connection: keep-alive
Content-Type: multipart/form-data; boundary=---------------------------29772313742745
Content-Length: 452
-----------------------------29772313742745
Content-Disposition: form-data; name="name"
J.Doe
-----------------------------29772313742745
Content-Disposition: form-data; name="email"
abuse@spamcop.com
-----------------------------29772313742745
Content-Disposition: form-data; name="file-upload"; filename="test.txt"
Content-Type: text/plain
test data with some high ascii: ¿Como estás?
-----------------------------29772313742745-- 
```

我需要的最重要的东西在最后 13 行（表单文本数据 + 表单文件数据）。数据（文本+文件）将在 PHP 文件服务器端检索。我已经尝试过使用 XMLHttpRequest 和 Formdata，但我无法让它正常工作。

imo 最有意义的尝试是：

```
 var fd3 = new FormData();
    fd3.append('mode', 'end');    // set $_POST['mode']="end"
    fd3.append('file', image.jpg);    // set $_FILES['file']=image.jpg

    var xhr3 = new XMLHttpRequest();
    xhr3.open("POST", "pages/upload_arc3d.php", false);
    xhr3.setRequestHeader("Content-type", "multipart/form-data");
    xhr3.send(fd3); 
```

# android - OnItemClickListener 查看列表详情

> ID：15193301
> 
> 赞同：1
> 
> 时间：2013-03-04T01:47:03.650
> 
> 标签：android, android-listview, android-sqlite

我有一个药物列表，当用户点击其中一种药物时，它将进入下一个显示药物详细信息的活动。

下面的代码是带有药物列表的活动..我知道我必须使用 onclicklistener..但我不知道怎么写

```
public class MedicineView extends Activity 
{
private SQLiteDatabase database;
private ArrayList<String> result = new ArrayList<String>(); 
private ArrayList<Long> idList = new ArrayList<Long>();
private ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.medicine_view);
    ListView listContent = (ListView)findViewById(R.id.listView1);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    // view data

    try{
        String query = "select * from " + DBHelper.TABLE_MEDICINE;

        Cursor c = database.rawQuery(query, null);

        if(c!=null)
        {
            c.moveToFirst();
            int getIndex = c.getColumnIndex(DBHelper.MED_ID);
            int getNameIndex = c.getColumnIndex(DBHelper.MED_NAME);
            int getDosageIndex = c.getColumnIndex(DBHelper.DOSAGE);
            int getFrequencyIndex = c.getColumnIndex(DBHelper.FREQUENCY);

            if(c.isFirst())
            {
                do{
                    idList.add(c.getLong(getIndex));
                    result.add(c.getString(getNameIndex)+" | " + c.getString(getDosageIndex)
                            +" | " + c.getString(getFrequencyIndex)+"\n" );
                }while(c.moveToNext());
            }
        }

        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,result);
        listContent.setAdapter(adapter);
        listContent.setTextFilterEnabled(true);

        c.close();

    }
    catch(SQLException e){  
    }

listContent.setOnItemClickListener(this);
}

public void onClickHome(View v){
    startActivity (new Intent(getApplicationContext(), MenuUtama.class));
}

public void onClickAdd(View v){
    startActivity (new Intent(getApplicationContext(), MedicineAdd.class));
}

@Override
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    Intent myIntent = new Intent(v.getContext(), MedicineDetail.class);
    myIntent.putExtra("position", position);
    startActivityForResult(myIntent, 0);
}
} // end class 
```

然后这是我的详细信息活动

```
public class MedicineDetail extends Activity 
 {
private SQLiteDatabase database;
private ArrayList<Long> idList = new ArrayList<Long>();
ArrayList<String> list = new ArrayList<String>();

Button btnEdit;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.medicine_detail);

    int id = getIntent().getIntExtra("id", 2); //i don't know how to do here

    btnEdit = (Button)findViewById(R.id.imageButton2);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    String sql = "select * from " + DBHelper.TABLE_MEDICINE + " WHERE id = " + id;
    Cursor cursor = database.rawQuery(sql, null);

    try{
        if( cursor != null ){
            if (cursor.moveToFirst()) {
               do {
                   idList.add(cursor.getLong(0));
                   list.add(cursor.getString(1));
                   list.add(cursor.getString(2));
                   list.add(cursor.getString(3));
                   list.add(cursor.getString(4));
                   list.add(cursor.getString(5));
                   list.add(cursor.getString(6));
               } while (cursor.moveToNext());
            }
        }
    }
    catch(SQLException e){  
    }

    cursor.moveToFirst();

    TextView StartDate = (TextView) findViewById(R.id.textView8);
    TextView EndDate = (TextView)findViewById(R.id.textView9);
    TextView MedName = (TextView)findViewById(R.id.textView10);
    TextView Dosage = (TextView)findViewById(R.id.textView11);
    TextView Frequency =    (TextView)findViewById(R.id.textView12);
    TextView Instruction =  (TextView)findViewById(R.id.textView13);

    StartDate.setText(cursor.getString(1));
    EndDate.setText(cursor.getString(2));
    MedName.setText(cursor.getString(3));
    Dosage.setText(cursor.getString(4));
    Frequency.setText(cursor.getString(5));
    Instruction.setText(cursor.getString(6));
    cursor.close();

}

public void onClickHome(View v){
    startActivity (new Intent(getApplicationContext(), MedicineView.class));
}

} // end class 
```

我不知道该怎么做，请任何人帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:58:59.610

使用 onItemSelectedListener：arg0 是列表视图，arg2 是适配器中的项目位置

```
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:07:25.887

你应该让你类实现 onItemClickListener

`implements AdapterView.OnItemClickListener`

并`onCreate`添加以下行：

```
listContent.setOnItemClickListener(this); 
```

然后覆盖：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
{
    Intent intent = createIntentwithExtra(v, position);
    startActivity(intent);  
} 
```

**更新：**

```
public Intent createIntentwithExtra(View v, int position)
{
    Intent intent = new Intent(getApplicationContext(), TaskDetailsActivity.class);
    intent.putExtra(KEY_USERNAME, username);
    intent.putExtra(KEY_ID, tasksRepository.get(position).getId());
    return intent;
} 
```

# java - public boolean removeStudent(int id)

> ID：15193302
> 
> 赞同：-1
> 
> 时间：2013-03-04T01:47:15.210
> 
> 标签：java

请帮我修复错误。

```
public boolean removeStudent(int id)
{
    for (Student student : this)
    {
        if ((student.getID()) == (id)) 
        return true;
        id.remove(); 
    }
    return false; 
} 
```

错误：无法取消引用 int。我正在尝试根据 id 从列表中删除学生。但是 .remove 与整数不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:51:29.893

`id`是`int`一个原始类型，所以它没有任何方法。

```
id.remove(); //will never compile 
```

将您的代码更改为

```
for (int x =0; x < this.size();x++) {
    //your if should contain the removal and the return statements
    if ((this.get(x).getID()) == (id)) {
        this.remove(this.get(x)); 
        return true;
    }
}
return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:01:30.587

重新缩进你的代码，你会看到问题：

```
public boolean removeStudent(int id)
{
    for (Student student : this)
    {
        if ((student.getID()) == (id)) {
            return true;
        }
        id.remove(); 
    }
    return false; 
} 
```

看看你现在在做什么：一旦你命中了一个ID匹配的学生，你会立即跳出方法，返回true。在那之前，您将删除您迭代的所有学生。即您正在删除所有学生，直到找到匹配的学生。

这对我来说看起来不太正常。

我敢打赌，您要做的是：删除所有具有匹配 ID 的学生。如果任何学生被删除，则返回 true，否则返回 false。

如果是这样，请尝试理解这段代码：（我没有直接回答你。如果你能理解这段代码中发生了什么，那么你可以轻松地修复你的）

```
// print out only odd numbers in the list, and return true if there is any.
boolean printOdd(List<Integer> numbers) {
  boolean oddFound = false;
  for (int i : numbers) {
    if ((i % 2) != 0) {
        System.out.println("Odd Number Found: " + i);
        oddFound = true;
    }
  }
  return oddFound;
} 
```

* * *

您的代码中存在更多问题：

您似乎没有正确使用 for-each 外观。你的班级是收藏吗？

```
 for (Type a : b) {...} 
```

期望`b`是一个集合（更准确地说，Iterable）或一个数组。

另一个问题是，id 是一个整数，你期望 an`id.remove()`做什么？你告诉一个整数做“remove()”

我假设您正在做类似的事情`this.studentList.remove(id)`or `this.studentList.remove(student)`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:48:26.730

你不是要打电话`student.remove()`或类似的事情吗？

此外，该代码不会被`return true`它之前的行击中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T01:50:56.563

这段代码看起来不太好。首先： remove 调用是错误的，并且总是调用 remove ，因为您的 if 语句没有用括号封装。

# java - 常数时间内二叉搜索树的高度

> ID：15193306
> 
> 赞同：1
> 
> 时间：2013-03-04T01:48:04.370
> 
> 标签：java, binary-search-tree

我需要用 O(1) 的时间来微调二叉搜索树的高度，我能想到的唯一方法是检查 add 和 remove 方法增加全局计数器是否有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:51:22.053

O(1) 时间表明您在请求时应该已经具有高度。

最好的方法是在添加/删除新节点时保持/更新正确的值。您正在以正确的方式进行操作，但是它增加了添加和删除的复杂性。

您可以通过多种方式做到这一点，例如将深度值与树中的节点一起保留等。

```
class Node{
int depth;
Object value;
}

Node lowestNode; 
```

我可以考虑将最大深度节点引用存储在一个对象中并将其保存为 depth 。因此，无论何时添加新元素，都可以根据其父元素检查元素的深度，如果新元素具有更大的深度，则替换最大深度节点。

如果要删除最大深度节点，则将其替换为父节点，否则沿树递归地更正所有元素的深度。

树的高度是 ,`lowestNode.depth`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:50:58.533

存储高度属性并在添加/删除时更新它应该是最合理的解决方案。

如果保证树是平衡的（例如 AVL），您可以通过树中元素的数量来计算高度（您必须保持元素的数量：P）

# html - 样式表链接 rel 和快捷方式图标链接 rel 相互覆盖，所以我不能同时使用我的样式表和图标

> ID：15193307
> 
> 赞同：1
> 
> 时间：2013-03-04T01:48:08.663
> 
> 标签：html, icons, stylesheet

这是我的问题，我的 html 索引标题中有 2 个链接 rel 标签。一个标签用于我的样式表，另一个标签是快捷图标链接 rel，用于在我的浏览器选项卡中使用图标（仅供参考，使用 FF19）。

```
<link rel="shortcut icon" href="tophat2.ico"/>
<link rel="stylesheet" type="text/css" href="style.css"/> 
```

每个 rel 链接都可以自己正常工作。当我一个接一个地拥有它们时，尽管底部的一个（被解析第二个）是唯一显示的。它们似乎相互覆盖，所以我得出结论，我不能同时拥有一个图标快捷方式和一个样式表作为单独的 rel 链接，但这是我可以通过谷歌找到的唯一方法，所以我被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:52:52.097

请参阅[http://mathiasbynens.be/notes/rel-shortcut-icon](http://mathiasbynens.be/notes/rel-shortcut-icon)。它说：

> 大多数网站使用以下 HTML 来指定网站图标：
> 
> ```
> <link rel="shortcut icon" href="/favicon.ico"> 
> ```
> 
> 看起来还行吧？你猜怎么着——不是！
> 
> 今天，我了解到快捷方式不是有效的链接关系。事实上，它并没有出现在 HTML5 规范中关于“链接类型”的第 4.12.5 节中。事实上，它是 Internet Explorer 专有的。如果没有 IE，rel="icon" 就足以指定一个 favicon。

由于您使用的是 Firefox，这可以解释为什么它不起作用。试试这个：

```
<link rel="icon" href="tophat2.ico"/> 
```

但请注意，这可能不适用于 IE 8 或更低版本。后来在同一篇文章中它说：

> 如果 rel 属性中省略了快捷方式值，Internet Explorer 将完全忽略该声明，在站点根目录中搜索名为 favicon.ico 的文件，然后使用该文件。事实上，几乎每个浏览器都会在没有指定链接 rel="icon" 时这样做。使用 rel="icon shortcut" 在 IE 中也不起作用，因为它不会将 rel 属性视为空格分隔的列表。
> 
> 只需确保始终将 favicon 放在站点的根目录中，并将其命名为 favicon.ico

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:14:09.543

好的，我修好了！！！我不知道为什么*** * 这有效，但确实有效。我复制了我的 rel link=icon 标记并将其粘贴为 2 个警告 rel 链接上方的副本。被解析的副本首先出现损坏，这没关系，但现在下面的 2 工作，所以我有一个工作样式表和图标。感谢您尝试帮助大家。这可能仍然是一个谜。

# android - 在 windows 中为 cyanogenmod 编译单个应用程序包

> ID：15193311
> 
> 赞同：0
> 
> 时间：2013-03-04T01:48:21.963
> 
> 标签：android, eclipse, compilation, mingw, cyanogenmod

我想修改phone.apk，有人说用cyanogenmod 很容易。

因为我无法在 Eclipse 中编译单个包（很多丢失的常量），所以我发现我需要使用 MinGW（交叉编译）以及整个 rom 源来编译它。

以前有人这样做过吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:59:24.863

目前不支持 windows 编译，所以我将使用 VirtualBox 虚拟化一个 linux 操作系统来进行编译。

# c# - 动态工具提示不起作用

> ID：15193320
> 
> 赞同：0
> 
> 时间：2013-03-04T01:48:49.830
> 
> 标签：c#, html, jtemplates, jtemplate

我正在尝试为我的应用程序创建一个动态工具提示，但这不起作用，我可以有一些想法吗？

下面是我尝试通过 java 脚本检索工具提示的代码。

```
<input type="text" tooltipid="testfamily" onclick="tooltipshow(this);" id="family"
    value="family " />

<script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<script type="text/javascript">
var data = {
    name: "enter your name",
    family: "enter your family",
    testfamily: "enter your family",
    uc1_txtname: "enter your name for Control 1 (User Control1)",
    uc2_txtname: "enter your name for Control 2 (User Control2)"
}
function tooltipshow(e) {

    var Tip = $("<div class='dinamictip'></div>");
    Tip.text('');

    var ToolTip = $(e).attr('tooltipid');
    if (ToolTip != null) {
        var offset = $(e).offset();
        var height = $(e).height() + 10;
        Tip.text(data[ToolTip]);
        Tip.css('position', 'absolute').css('left', offset.left).css('top', offset.top - height);
        Tip.appendTo('body');

        Tip.remove();

    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:10:09.390

我没有测试您的代码，但可能罪魁祸首是`Tip.remove();`：您在创建提示后立即删除它。

尝试在您的函数中进行此更改`tooltipshow`：此代码第一次执行时，它不会找到工具提示的`div`，因此它将创建它并将其添加到正文中（暂时隐藏）。然后，下次调用代码时，它会找到旧的工具提示并重用它。

```
function tooltipshow(e) {

    var Tip = $("#mydinamictip");
    if(Tip.length==0){
        Tip = $("<div id='mydinamictip' class='dinamictip'></div>");
        Tip.hide().appendTo('body');
    }

    Tip.text('');

    var ToolTip = $(e).attr('tooltipid');
    if (ToolTip != null) {
        var offset = $(e).offset();
        var height = $(e).height() + 10;
        Tip.text(data[ToolTip]);
        Tip.css('position', 'absolute').css('left', offset.left).css('top', offset.top - height);
        Tip.show();

    }
}; 
```

# css - 使用从 alpha 到颜色的 CSS3 线性渐变

> ID：15193326
> 
> 赞同：0
> 
> 时间：2013-03-04T01:49:20.750
> 
> 标签：css, gradient, linear-gradients

我正在寻找一种从“无”（alpha）到定义颜色的线性渐变：#e6a015。我在谷歌和这里都找不到它，有人能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:04:32.597

您可以使用 alpha 为零的 rgba 颜色

```
background-image: -ms-linear-gradient(top left, rgba(230,160,21,0) 0%, rgb(230,160,21)  100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top left, rgba(230,160,21,0) 0%, rgb(230,160,21) 100%);

/* Opera */ 
background-image: -o-linear-gradient(top left, rgba(230,160,21,0) 0%, rgb(230,160,21) 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, right bottom, color-stop(0, rgba(230,160,21,0)), color-stop(1, rgb(230,160,21)));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top left, rgba(230,160,21,0) 0%,rgb(230,160,21) 100%);

/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom right, rgba(230,160,21,0) 0%, rgb(230,160,21) 100%); 
```

[**演示**](http://jsfiddle.net/XHt6C/)

# perl - 为什么 Perl 的逻辑运算符 &&, ||, ! 优先于and，or，and not？

> ID：15193327
> 
> 赞同：13
> 
> 时间：2013-03-04T01:49:24.263
> 
> 标签：perl

这可能是一个小问题，但我想知道为什么 Perl 的逻辑运算符（`&&`、、`||`和`!`）优先于易于理解的“英语”逻辑运算符（`and`、`or`和`not`）。在脚本中使用前一组有什么好处，而使用后一组有什么缺点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T01:53:57.087

原始的`&&`,`||`和`!`运算符是匹配 C 语言的高优先级。

添加了较新的（但仍然是旧的）`and`和`or`运算`not`符以简化一些常见的结构。例如，比较：

```
open my $fh, '<', $filename || die "A horrible death!";
open my $fh, '<', $filename or die "A horrible death!"; 
```

其中第一个是不正确的；高优先级`||`绑定，`$filename`这`die`不是你想要的。第二个是正确的；低优先级`or`意味着缺少的括号不会导致歧义。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-04T01:58:03.683

如果`||`和`or`具有相同的优先级，则

```
return some_func $test1 || $test2; 
```

意味着

```
return some_func($test1) || $test2; 
```

代替

```
return some_func($test1 || $test2); 
```

或者

```
some_func $test1 or die; 
```

意味着

```
some_func($test1 or die); 
```

代替

```
some_func($test1) or die; 
```

这些变化都不是可取的。

虽然人们可以辩论`or`比 更容易理解`||`，但更难阅读。当运算符看起来不像它们的操作数时，更容易阅读代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-26T00:21:01.160

# 逻辑优先级和清晰度

虽然我不知道这是否是让它们进入该语言的原因，但它们对于编写清晰的代码非常有用，

```
## Some sample data...
my ($foo, $bar, $baz) = (0,1,1);

## Different results..
say ( $foo && $bar || $baz );
say ( $foo and $bar || $baz ); 
```

我们可以在代码中使用它，即使是`\n`. 不需要嘈杂的括号。

```
## When would you use this...
if (
  $cache->is_outdated
  and $db_master->has_connection || $db_slave->has_connection
) {
  $cache->refresh
} 
```

否则，这将是，

```
 $cache->is_outdated
  && ( $db_master->has_connection || $db_slave->has_connection ) 
```

但是，perl 不喜欢其他语言强加给用户的所有行噪音。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-04T02:59:08.703

*将评论转换为答案：*

如果这些运算符的偏好相同，则不必保留两个版本——只有一个版本就足够了。

但拉里沃尔是一位语言学家，他真的很喜欢在他的新语言中使用简单的英语单词。因此，他介绍了这些英式运算符（以及 with`unless`和其他）。

为了保留 C 风格的运算符及其经典含义，他需要使新关键字不冗余。因此，他对这些他更喜欢的运算符赋予了稍微不同的含义。因此，这种差异原来是运算符优先级。

# python - 在 tkinter 中编辑文本

> ID：15193330
> 
> 赞同：3
> 
> 时间：2013-03-04T01:49:33.840
> 
> 标签：python, text, tkinter

所以我将 create_text 变量传递给“text1”

```
text1 = UseCanvas(self.window, "text", width = 100, height = 100, text = "Goodbye") 
```

使用：

```
self.create_text(20,25 width=100,  anchor="center", text =self.text, tags= self.tag1) 
```

将其传递给另一个班级后。

如何编辑该文本小部件？我希望它说“你好”而不是“再见”。我已经看遍了，我可以用它做任何我想做的事情，除了更改文本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T02:06:09.003

您应该使用画布的[itemconfig](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemcget-method)方法来修改文本属性。你必须给它一个或多个画布项目的 id。这是一个小的工作示例，可让您更改一个文本对象的文本：

```
# use 'tkinter' instead of 'Tkinter' if using python 3.x
import Tkinter as tk 

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)

        self.button = tk.Button(self, text="Change text", command=self.on_change_text)
        self.canvas = tk.Canvas(self, width=400, height=400)

        self.button.pack(side="top", anchor="w")
        self.canvas.pack(side="top", fill="both", expand=True)

        # every canvas object gets a unique id, which can be used later
        # to change the object. 
        self.text_id = self.canvas.create_text(10,10, anchor="nw", text="Hello, world")

    def on_change_text(self):
        self.canvas.itemconfig(self.text_id, text="Goodbye, world")

if __name__ == "__main__":
    root = tk.Tk()
    view = Example(root)
    view.pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# javascript - 你能将一个简单的 javascript 数组绑定到你的 ember.js 模板吗？

> ID：15193333
> 
> 赞同：1
> 
> 时间：2013-03-04T01:49:49.823
> 
> 标签：javascript, ember.js, ember-data

我正在使用 ember.js RC1 + ember-data rev 11（但我还需要一些普通的 ajax 来进行模型等配置）。我想遍历一个简单的对象列表并显示记录（注意 - 这里我只创建一个基本数组）

我绑定的内容定义了如下自定义查找方法

```
App.Foo = DS.Model.extend({
    name: DS.attr('string')
}).reopenClass({
    records: [],
    all: function() {
        return this.records;
    },
    find: function() {                                                              
        var self = this;
        $.getJSON('/api/foo/', function(response) {
            response.forEach(function(data) {
              //say I want to kill everything in the array here for some strange reason...
              self.records = [];
              //the template still shows the record ... not an empty list ?
            }, this);
        });
        return this.records;
    }
}); 
```

我的另一个模型直接使用这个

```
App.Related = DS.Model.extend({
  listings: function() {
    return App.Foo.find();
  }.property()
}); 
```

现在在我的模板中

```
{{#each foo in related.listings}}
  {{foo.name}}<br />
{{/each}} 
```

默认情况下，列表会加载我放入数组中的任何内容（比如我使用 createRecord 添加一个简单的对象，就像这样）

```
add: function(record) {
    this.records.addObject(App.Foo.createRecord(record));
}, 
```

当模板被渲染时，我看到这里列出的任何内容......但正如我在上面的评论中所说，如果我决定删除记录或将绑定的列表清空，它似乎并没有以任何方式反映这一点。

是否可以像我一样绑定一个简单的数组，然后使用诸如拼接之类的基本方法从中删除项目？甚至是激烈的 self.records = []; ?

```
self.records.splice(i, 1); 
```

即使我在拼接或清空工作后手动查询客户端，它也会返回 0

```
console.log(App.Foo.all().get('length')); 
```

最初我看到记录，但后来我看到它们不见了（但 html 没有改变）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T10:31:36.910

我以这种方式理解了您的问题，以下评论是您正在努力解决的问题：

```
 response.forEach(function(data) {
          //say I want to kill everything in the array here for some strange reason...
          self.records = [];
          //the template still shows the record ... not an empty list ?
        }, this); 
```

您想知道，为什么您的模板没有显示空列表？**这是因为您没有告诉 Ember 何时更新模板。**你可以这样告诉 Ember：

```
App.Related = DS.Model.extend({
  listings: function() {
    return App.Foo.find();
  }.property("App.Foo.records.@each")
}); 
```

现在 Ember 知道，无论何时从数组中添加或删除某些内容，它都应该更新模型的列表属性。因此它知道您的视图需要重新渲染。

**关于“简单的javascript数组”的原始问题的补充说明。**使用 Ember 时，实际上并没有实例化简单的 js 数组。当您声明：

```
var a = []; // is the same as -> var a = Ember.A(); 
```

Ember 做了一些神奇的事情并包装在一个增强的 ember 版本的数组 (Ember.NativeArray) 中，这使您能够使用上面提到的此类属性依赖声明。这使得 Ember 可以在这些数组上使用 ArrayObservers，尽管它们可能感觉就像一个普通的 JS 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:06:26.340

您需要`set`在修改属性和`get`返回属性时使用该方法，否则 Ember 将无法发挥其魔力并更新模板。

在您的情况下，还有一个额外的问题，即 in ，您在异步调用将其替换为新的空数组之前`find()`返回一个引用。调用方法永远不会看到新的记录数组。您可能想改用。`records``getJSON``clear()`

您的模型应如下所示：

```
App.Foo = DS.Model.extend({
    name: DS.attr('string')
}).reopenClass({
    records: [],
    all: function() {
        // can't use 'this.get(...)' within a class method
        return Ember.get(this, 'records');
    },
    findAll: function() {
        var records = Ember.get(this, 'records');
        $.getJSON('/api/foo/', function(response) {
            records.clear();

            // in this case my json has a 'foos' root 
            response.foos.forEach(function(json) {
                this.add(json);
            }, this);
        }, this);

        // this gets updated asynchronously
        return records;
    },
    add: function(json) {
        // in order to access the store within a 
        // class method, I cached it at App.store
        var store = App.get('store');
        store.load(App.Foo, json);

        var records = Ember.get(this, 'records');
        records.addObject(App.Foo.find(json.id));
    }
}); 
```

请注意，该`addObject()`方法尊重观察者，因此模板按预期更新。`removeObject()`是删除元素的相应绑定感知方法。

[这是一个工作的jsfiddle。](http://jsfiddle.net/ahmacleod/Gb2y4/)

# python - Twisted + exceptions.AttributeError: 'datetime.timedelta' 对象没有属性 'time'

> ID：15193335
> 
> 赞同：1
> 
> 时间：2013-03-04T01:49:57.567
> 
> 标签：python, twisted

我写了一个 Twisted Server 和一个常规的套接字客户端（因为客户端没有安装 Twisted）。部分服务器代码如下

```
import time
from twisted.internet.protocol import Protocol, Factory
from twisted.internet import reactor

class Server:
    def method(self, addr,port,sock):
        command = 'tcpdump -i any  \'src ' +str(addr) +' and port 80\' -w '+str(addr)+ '_download_' +str(time.time())+'.txt &'
        os.system(command)
        sock.transport.write('ok')

class Echo(Protocol):
    def dataReceived(self,data):
        s = Server()
        #extract client ip from the method self.transport.getPeer()
        #extract client port from the data received 
        print data
        s.method(client_ip, port, self)#the client ip and port are extracted from the request received

def main():
    f = Factory()
    f.protocol = Echo
    reactor.listenTCP(33456, f)
    reactor.run()

if __name__ == '__main__':
    main() 
```

此方法适用于第一个客户端请求，但在第二个请求时失败并出现以下错误

`exceptions.AttributeError: 'datetime.timedelta' object has no attribute 'time'`连同命令的行号（我正在使用 time.time() 方法来获取文件名）

谁能指出我做错了什么的正确方向？或者为什么它会抛出错误？

编辑：

我没有在这里发布完整的代码，但回溯是

```
Unhandled Error
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 84, in callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/log.py", line 69, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/twisted/python/context.py", line 81, in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "/usr/lib/python2.7/dist-packages/twisted/internet/posixbase.py", line 586, in _doReadOrWrite
    why = selectable.doRead()
  File "/usr/lib/python2.7/dist-packages/twisted/internet/tcp.py", line 199, in doRead
    rval = self.protocol.dataReceived(data)
  File "dc.py", line 191, in dataReceived
    dc.multiQ(client_ip,multiq_port,self)
  File "dc.py", line 73, in multiQ
    command = 'tcpdump -i any  \'src ' +str(addr) +' and port 80\' -w '+str(addr)+ '_download_' +str(time.time())+'.txt &'#change any to eth0
exceptions.AttributeError: 'datetime.timedelta' object has no attribute 'time' 
```

# jquery - 什么是正确的 Jquery document.ready wrap

> ID：15193338
> 
> 赞同：2
> 
> 时间：2013-03-04T01:50:33.747
> 
> 标签：jquery, document-ready

我正在尝试在下面的代码中复制其他用户正在执行的操作：

[Jquery 显示和隐藏不起作用？缺少某些东西，我无法弄清楚](https://stackoverflow.com/questions/15192882/jquery-show-and-hide-doesnt-work-something-is-missing-and-i-cant-figure-it-out)

但就像她一样，我也被卡住了，因为它在 Dreamweaver 中不起作用。我想我没有通过添加正确的包装正确地做到这一点。知道的人可以指出或编辑我的脚本吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript">
jQuery(document).ready(function($) 
{
    $(".social").hover(function() 
    {
        $("h1", this).hide();
        $(".networks", this).fadeIn();
    }, 
    function() 
    {
        $(".networks", this).hide();
        $("h1", this).fadeIn();
    });
});
</script>

<style>
.networks 
{
    display:none;
}
</style>
</head>

<body>
<div class="social">
    <h1>Share this</h1>
    <div class="networks">
        <p>Twitter</p>
        <p>Facebook</p>
    </div>
</div>      

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:54:58.567

您可以参考正确的地址：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:59:22.807

确保您使用网络服务器（wamp 或 xampp）进行测试。如果您想在没有网络服务器的情况下对其进行测试，请下载 jquery 库并将其包含在本地

正确的包装是：

```
$(document).ready(function() {
    $(".social").hover(function() {
        $("h1", this).hide();
        $(".networks", this).fadeIn();
    }, function() {
        $(".networks", this).hide();
        $("h1", this).fadeIn();
    });
}) 
```

或者

```
$(function() {
    $(".social").hover(function() {
        $("h1", this).hide();
        $(".networks", this).fadeIn();
    }, function() {
        $(".networks", this).hide();
        $("h1", this).fadeIn();
    });
}) 
```

# visual-c++ - 重载 << 运算符时出现错误 4430

> ID：15193340
> 
> 赞同：1
> 
> 时间：2013-03-04T01:50:50.567
> 
> 标签：visual-c++

我正在尝试为家庭作业项目重载 << 运算符。我不断收到错误代码 4430 缺少类型说明符 - 假定为 int。注意：C++ 不支持默认输入。任何帮助都会很棒！

```
//EmployeeInfo is designed to hold employee ID information

#ifndef EMPLOYEEINFO_H
#define EMPLOYEEINFO_H
#include <iostream>
#include <ostream>
using namespace std;

std::ostream &operator << (std::ostream &, const EmployeeInfo &);

class EmployeeInfo
{
private: 
    int empID;
    string empName;

public:
    //Constructor
    EmployeeInfo();

    //Member Functions
    void setName(string);
    void setID(int);
    void setEmp(int, string);
    int getId();
    string getName();
    string getEmp(int &);

    //operator overloading
    bool operator < (const EmployeeInfo &);
    bool operator >  (const EmployeeInfo &);
    bool operator == (const EmployeeInfo &);

    friend std::ostream &operator << (std::ostream &, const EmployeeInfo &);
};

friend std::ostream operator<<(std::ostream &strm, const EmployeeInfo &right)
{
    strm << right.empID << "\t" << right.empName;
    return strm;
}
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:08:50.453

我认为您的问题在于这一行：

```
std::ostream &operator << (std::ostream &, const EmployeeInfo &); 
```

这一行出现在`EmployeeInfo`类的声明之前。换句话说，编译器还不知道 an`EmployeeInfo`是什么。您要么需要将该声明移至类声明之后的某个点，要么像这样“预先声明”该类：

```
class EmployeeInfo; // "Pre-declare" this class

std::ostream &operator << (std::ostream &, const EmployeeInfo &);

class EmployeeInfo
{
    // ... as you have now ...
}; 
```

# php - 如何在 PHP 中将“十进制字符串”转换为没有句点的整数

> ID：15193344
> 
> 赞同：1
> 
> 时间：2013-03-04T01:51:15.563
> 
> 标签：php, html, math, numbers

比如说，如果我`8.1`保存为字符串/明文，我怎样才能将其更改为整数（我可以用它做加法）`81`？（我必须删除句点并将其更改为整数。即使我知道它应该很简单，我似乎也无法弄清楚。我尝试的一切都只是输出`1`。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:08:21.313

你也可以试试这个

```
$str = '8.1';
$int = filter_var($str, FILTER_SANITIZE_NUMBER_INT);
echo $int; // 81
echo $int+1; // 82 
```

[**演示。**](http://codepad.viper-7.com/QwJCkR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:59:35.740

如果您正在处理整数（如您所说），您可以使用`intval`PHP 中内置的函数。

[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

所以基本上，一旦你将字符串解析并设置为一个整数，你就可以执行以下操作：

`intval("81");`

并取回整数 81。

例子：

```
$strNum = "81";
$intNum = intval($strNum);
echo $intNum;
// "81"
echo getType($intNum);
// "integer" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T02:08:14.930

由于 php 进行自动转换，这应该可以工作：

```
<?php

$str="8432.145522";
$val = str_replace('.','', $str);
print $str." : ".$val;

?> 
```

输出：

```
8432.145522 : 8432145522 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:02:30.157

不确定这是否可行。但如果你总是有一些东西（比如 1.1 或 4.2），你可以乘以 10 并执行 intval('string here')。但是如果你有 something.somethingsomething 或者更多的东西（比如 1.42 和 5.234267 等），我不知道该说什么。也许一个函数可以继续乘以十，直到它是一个带有 is_int() 的整数？

资料来源：

*   [http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)
*   [http://php.net/manual/en/function.is-int.php](http://php.net/manual/en/function.is-int.php)
*   [将字符串转换为双精度 - 这可能吗？](https://stackoverflow.com/questions/2540078/convert-a-string-to-a-double-is-this-possible)

# jquery - 带有 JQuery、JSON、AJAX 的网页流

> ID：15193345
> 
> 赞同：0
> 
> 时间：2013-03-04T01:51:19.550
> 
> 标签：jquery, ajax, json, servlets, flow

我读过几本关于 JQuery、JSON 和 AJAX 的书。我正在尝试将使用较旧的 jsp 和 servlet 技术的工作网站转换为带有 JSON、AJAX 和 JQuery 的 jsp。我无法整合一切来做我需要的事情。

1) 用户使用简单的 jsp 登录，“login.jsp”。它提交给：

```
<form action="http://localhost:8080/sc_demo/dispatcher" name="login" id="login">
        <div>
        <label for="userId" class="label">UserId</label>
        <input type="text" name="userId" id="userId" size="30">
        </div>
        <div>
        <label for="password" class="label">Password</label>
        <input type="password" name="password" id="password" size="30">
        </div>
        <div>
        <label for="organization" class="label">Organization</label>
        <input type="text" name="organization" id="organization" size="30">
        </div>
        <div>
            <input type="hidden" name="event" id="event" value="_login">
            <input type="submit" name="submit" id="submit" value="Login">
        </div>
    </form> 
```

2) 调度器 servlet 接收请求并使用 _login 的事件值，调用 EventHandler 进行身份验证并创建用户“令牌”。然后它使用：

```
Token userToken = new Token(userId, userName, organization, role, new GenericNotifier());
String jspPath = "/home.jsp?parms="+userToken.getResponseString("/home.jsp", "HR", "tasklist");
getServletContext().getRequestDispatcher(jspPath).forward(
                request, response); 
```

3）这正确地提出了一个jsp“home.jsp”。
4) home.jsp 有

```
 <script type="text/javascript" src="_js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="_js/nav1.1.min.js"></script>
<script type="text/javascript" src="_js/jquery.countdown.js"></script>
<script type="text/javascript" src="_js/parseURL.js"></script>
<script type="text/javascript" src="_js/header.js"></script> 
```

在页面的标题中。5) header.jsp 有：

```
 <!DOCTYPE HTML>
<%@ page  import="java.util.*" %>

<%
        String userToken = (String)request.getParameter("parms"); // from login

 %>
 <script>
     $(document).ready(function(){
        var data = $.parseJSON('<%=userToken%>');

        alert('app = '+data.app);
        $('#doApplication').text(data.app);
     });
  </script>
      <div id='doApplication'></div>                                         
    <hr> 
```

现在，问题是我无法解析来自 userToken 的任何内容。以下是页面来源的一段：

```
<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Home</title>
<script type="text/javascript" src="_js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="_js/nav1.1.min.js"></script>
<script type="text/javascript" src="_js/jquery.countdown.js"></script>
<script type="text/javascript" src="_js/parseURL.js"></script>
<script type="text/javascript" src="_js/header.js"></script>

    <script type="text/javascript" src="./_js/jquery.validate.min.js"></script>

    <!-- jQuery UI Theme -->
    <link type="text/css" href="./_js/alpaca/lib/jquery-ui-latest/jquery-ui-latest.custom.css" rel="stylesheet"/>

    <!-- Additional CSS -->
    <link type="text/css" href="./_js/alpaca/examples/css/960.fluid.css" rel="stylesheet"/>

    <script type="text/javascript" src="https://use.typekit.com/fnm3kpm.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

<!-- LINK REL="stylesheet" HREF="_css/site.css" / -->
<LINK REL="stylesheet" HREF="_css/home.css" />
<LINK REL="stylesheet" HREF="_css/jquery.countdown.css" />

   </head>
    <body> 
        <div class="wrapper">
            <div class="header">

 <script>
     $(document).ready(function(){
        var data = $.parseJSON('{jsp:"home.jsp",app:"HR",process:"tasklist",userToken:  {result:"S",tokenId:"98797",userID:"woo",userName:"John",organization:"Shoulders",role:"mgr",notifierId:"956597"}}');
        if( token != null )
        {
            $('#token').text(token);
        }

        alert('app = '+data.app);
        $('#doApplication').text(data.app);
     });
  </script> 
```

我检查了 .parseJSON('X'); 中的字符串 X。没有任何空格或任何换行符。它看起来像一个有效的 JSON 对象。虽然它不会解析它？我没有收到错误，但也没有收到带有 data.app 值的警报字段，它应该在那里。

我的一般问题是我看不到页面流不是“预定义”的示例。在我的例子中，每个操作都会向调度程序生成一个提交（希望使用 AJAX），其中包含有关当前状态（来自 userToken）和表单数据的信息。根据表单数据，调度程序确定下一个 jsp 并使用请求/响应返回到该页面，其中包含 userToken 和要在该页面表单中显示的信息。

那么，如何使用表单数据向调度程序提交，在每个页面顶部的 $(document).ready 函数中捕获响应数据，将其解析并显示出来？

# ruby-on-rails - Rails 模型方法效果不佳

> ID：15193350
> 
> 赞同：1
> 
> 时间：2013-03-04T01:51:45.810
> 
> 标签：ruby-on-rails, factory-bot

我有我试图在我的模型中测试的方法，但它们运行不正常，它似乎没有在应该返回 false 的时候返回 - 有什么建议吗？

```
class Registration < ActiveRecord::Base
validate :check_duplicate_section
def check_duplicate_section
    all_registrations = Registration.all
    all_registrations.each do |reg|
        puts reg.section_id
        if reg.section_id == self.section_id && reg.student_id == self.student_id 
        errors.add(:registration, "Already exists")
        return false
        end
    return true
end
end 
```

测试文件：（@bruce 在前面定义）

```
class RegistrationTest < ActiveSupport::TestCase

should "not allow invalid student registrations" do
    @mike = FactoryGirl.create(:student, :first_name => "Mike")
    good_reg = FactoryGirl.build(:registration, :section => @section2, :student => @mike)
    bad_reg = FactoryGirl.build(:registration, :section => @section1, :student => @bruce)
    bad_reg2 = FactoryGirl.build(:registration, :section => @section2, :student => @mike)
    assert_equal true, good_reg.valid?
    assert_equal false, bad_reg.valid?
    assert_equal false, bad_reg2.valid? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:58:09.920

从您尝试使用的外观来看，`check_duplicate_section`最好使用内置`uniqueness`验证

```
validates :section_id, uniqueness: { scope: :user_id } 
```

如果您不想使用它，请将您的方法更改为

```
def check_duplicate_section
  if Registration.where(section_id: self.section_id, student_id: self.student_id).exists?
    errors.add :registration, "Already exists"
  end
end 
```

此外，在您的测试中，您使用`build`的不会将任何内容保存到数据库中。您应该使用`create`或更好的是，使用模拟来强制您的数据库查询返回值。

使用内置验证方法的好处是您不需要测试它，因为它应该可以工作。

# php - echo php定位

> ID：15193351
> 
> 赞同：0
> 
> 时间：2013-03-04T01:51:49.437
> 
> 标签：php, css, styles, echo

我在这个链接[http://jardineselectricos.com/xtatanx/contacto.php](http://jardineselectricos.com/xtatanx/contacto.php)中做了一个表格，一切正常，表格只是在填写时向我发送了电子邮件，但是，当我收到回显输出时，所有网站都开始了。我想知道如何将输出放置在我想要的位置。这是我的代码。

HTML：

```
<form method="post" action="contacto.php" id="form">
    <label for="nombre">Nombre: </label>
    <input type="text" name="nombre" placeholder="Su nombre"/>
    <label for="correo">Correo electrónico: </label>
    <input type="email" name="email" placeholder="nombre@correo.com"/>
    <label for="numero-telefonico">Teléfono móvil: </label>
    <input type="text" name="telefono" placeholder="Introducir nº de telf" />
    <label for="mensaje">Mensaje: </label>
    <textarea name="mensaje" cols="20" rows="6" placeholder="Escriba un mensaje breve..."></textarea>
    <input type="submit" id="enviar" name="enviar" value="Enviar">
    <span id="respuesta">
      <?php
                $nombre = $_POST['nombre'];
                $email = $_POST['email'];
                $numero = $_POST['telefono'];
                $mensaje = $_POST['mensaje'];
                $from = 'From: UsuarioStrategyResearch'; 
                $to = 'jhonnatanhxc@gmail.com'; 
                $subject = 'Contacto Strategy Research';

                $body = "De: $nombre\n E-Mail: $email\n Movil: $numero\n Mensaje:\n $mensaje";

                if ($_POST['enviar']) {
                if (mail ($to, $subject, $body, $from)) { 
                    echo '<p>Tu mensaje ha sido enviado, pronto nos pondrémos en contacto.</p>';
                } else { 
                    echo '<p>Ha habido un error y el mensaje no ha podido ser enviado.</p>'; 
                }
            }
            ?>
    </span>
  </form> 
```

输出总是像放在网站中间一样，如果我使用垃圾邮件或 div 或者我在页脚或任何地方定位它，它不会改变，它只是在同一个地方回显。我会很感激你的帮助，非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:16:36.340

该页面向您显示问题

> 警告：无法修改标头信息 - 标头已由第 70 行 /home/jardines/public_html/xtatanx/contacto.php 中的（输出开始于 /home/jardines/public_html/xtatanx/contacto.php:57）发送

这意味着该`mail`函数需要修改 HTTP 标头，但它们已经发送，因为您已经开始输出 HTML。

您需要确保`mail`在输出任何 HTML 之前调用

```
<?php
// At the top of the file, before any HTML is output
$successfulMail = mail ($to, $subject, $body, $from);
$nombre = $_POST['nombre'];
$email = $_POST['email'];
$numero = $_POST['telefono'];
$mensaje = $_POST['mensaje'];
$from = 'From: UsuarioStrategyResearch'; 
$to = 'jhonnatanhxc@gmail.com'; 
$subject = 'Contacto Strategy Research';
$body = "De: $nombre\n E-Mail: $email\n Movil: $numero\n Mensaje:\n $mensaje";
$mailMsg = '';
if ($_POST['enviar']) {
    // Here's the trick, can't call mail after HTML has been output
    if (mail ($to, $subject, $body, $from)) { 
       $mailMsg ='<p>Tu mensaje ha sido enviado, pronto nos pondrémos en contacto.</p>';
    } else {
       $mailMsg ='<p>Ha habido un error y el mensaje no ha podido ser enviado.</p>'; 
    }
}
?>    
...
<form method="post" action="contacto.php" id="form">
    <label for="nombre">Nombre: </label>
    <input type="text" name="nombre" placeholder="Su nombre"/>
    <label for="correo">Correo electrónico: </label>
    <input type="email" name="email" placeholder="nombre@correo.com"/>
    <label for="numero-telefonico">Teléfono móvil: </label>
    <input type="text" name="telefono" placeholder="Introducir nº de telf" />
    <label for="mensaje">Mensaje: </label>
    <textarea name="mensaje" cols="20" rows="6" placeholder="Escriba un mensaje breve..."></textarea>
    <input type="submit" id="enviar" name="enviar" value="Enviar">
    <span id="respuesta"><?php echo $mailMsg ?> </span>
  </form> 
```

# javascript - 如何仅在 DIV 中应用 .toggle()

> ID：15193355
> 
> 赞同：0
> 
> 时间：2013-03-04T01:52:40.123
> 
> 标签：javascript, jquery, toggle

如何仅应用 .toggle() 已单击的 DIV。我当前的代码适用于所有切换 div。内容之间的代码切换`<div class="toggled">`

**我需要在 1.4 版中进行**

任何人都可以帮助我吗？

这是我的代码：

```
<html>
<head>
<title>TEST</title>
<link rel="stylesheet" type="text/css" href="card.css" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
    $(function() {
        $('#toggle').click("click", function() {
            $('.toggled').toggle();
            return false;
        });
    });

</script>
</head>

<body>

<div class="card">

    <div class="toggled">
    <h3>FRONT 1</h3>
    </div>

    <div class="toggled" style="display:none;">
    <h3>BACK 1</h3>
    </div>

    <a href="#" id="toggle">Switch Text Toggle</a><br/>

</div>

<div class="card">

    <div class="toggled">
    <h3>FRONT 2</h3>
    </div>

    <div class="toggled" style="display:none;">
    <h3>BACK 2</h3>
    </div>

    <a href="#" id="toggle">Switch Text Toggle</a><br/>

</div>

</body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:55:34.900

您需要将锚点的 ID 更改为一个类，因为 ID 是唯一的。

然后你会这样做：

```
$(function() {
    $('.toggle').on("click", function() {
        $(this).siblings('.toggled').toggle();
        return false;
    });
}); 
```

在哪里可以找到带有 class 的单击锚的兄弟姐妹`.toggled`，然后切换它们。您还需要一个 document.ready 函数，并且事件处理程序有一些拼写错误。

并且使用较新版本的 jQuery，1.4 已经过时了。

[**小提琴**](http://jsfiddle.net/adeneo/Ye9aw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:46:06.337

尝试这个：

```
$('.card #toggle').click(function() {
            $('.toggled').toggle();
            return false;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:54:51.610

替换`$('.toggled').toggle();`为`$(this).toggle();`。您当前请求`.toggle`切换所有容器，而不是作为事件焦点的容器。

# sql - 在 SQL Server 中运行 sum 与在代码中处理 sum 有哪些性能问题？

> ID：15193356
> 
> 赞同：-2
> 
> 时间：2013-03-04T01:52:40.970
> 
> 标签：sql, view

我正在做一个项目，因为这是我对 ef 的第一次尝试，我不太确定如何处理某些事情，比如计算我使用 SQL 计算字段来处理行总和（数量 * 价格）和一些 SQL 视图计算 Sum()

在过去，我会启动视图或存储过程

**更新**

我认为被问到的是是否使用混合解决方案来计算 SQL 中的行，或者是否将其转换为代码并在网络服务器上处理？

**结果** 我继续使用 sql server 选项，但是转移到 nosql 我现在知道我应该让它由应用程序的代码处理，因为这将使它更通用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:02:06.937

我的经验是，数据库在这类事情上的速度非常快，因为它们针对这些操作进行了大量优化。

另外，考虑替代方案。假设您要计算 50,000 行结果集的 SUM(quantity * price)（不管表大小，假设您的查询有 50k 行大）。如果您在您的应用程序中执行此操作，则必须检索 50k 对整数（假设它们是整数，并且是 32 位的 - 它们可能不是）。因此，每行 64 位和 50k 行，为我们提供了 3.2M 位或 400KB 的数据。

现在数据库必须通过网络向您的应用程序发送数据，您的应用程序必须等待数据，将其全部读取到某个数据结构中，然后对其进行迭代。该操作的网络传输时间将抵消您在应用程序中进行计算可能节省的任何费用。

相比之下，如果数据库执行总和，则您必须传输的数据要少得多。如果您能够缓存数据库大小的查询（当然这是特定于供应商的），您可能还会获得一些好处。

简而言之-除非您有充分的理由在应用程序中执行此类操作，否则只需将其留给数据库即可，以免您头疼。

# c++ - 为什么单例比全局对象更好

> ID：15193358
> 
> 赞同：0
> 
> 时间：2013-03-04T01:52:56.363
> 
> 标签：c++, namespaces, singleton, global-object

你好堆栈溢出。

我正在准备明天的 CS 考试，我正在查看我们的教授为我们提供的复习表。其中一点说要知道为什么 Singleton 是比 Global 更好的选择。

我不完全确定其中的原因，但我确实记得他说过 Singleton 使用较少的“命名空间污染”。我在 Google 上进行了几次比较 Singleton 和 Global 的搜索，但几乎所有结果都表明两者都是糟糕的选择，哈哈。所以它只是让我感到困惑。

如果有人可以帮助我解决这个问题，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:04:10.867

它们是惰性构造的：

```
LargeObject   global;                    // Large object is always constructed.

class LargeObject_Singelton
{
    public: static LargeObject& getInstance()
    {
        static LargeObject  instance;     // This object is not created until the first
        return instance;                  // time getInstance() is called.
    }                                     // If you never use it this can be important.
}; 
```

# android - Android 是否支持 window.location.replace 或任何等价物？

> ID：15193359
> 
> 赞同：2
> 
> 时间：2013-03-04T01:53:22.803
> 
> 标签：android, mobile, browser, browser-history, window.location

Android 浏览器似乎没有正确实现`window.location.replace`.

在大多数浏览器中，调用`window.location.replace`会将当前 URL 替换为传递给它的 URL。

当用户导航到其他地方然后单击返回时，他们将返回到传递给的 URL `window.location.replace`，而不是他们之前`window.location.replace`调用的 URL。

Android 浏览器似乎没有正确实现这一点。

在 Android 浏览器中，用户将被引导回*原始 URL*，而不是传递给`window.location.replace`.

你可以[在这里](http://jsfiddle.net/jorgenfb/mtTwj/1/show/light/)自己测试一下。

那么有没有其他方法可以在 Android 中重写历史记录？或者，对于 Android 用户，我是否只能在没有该功能的情况下生活？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T05:52:08.253

我遇到了同样的问题，最终得到了类似于 chris 建议的代码，但我更改了 if 语句以使用 modernizr 的功能检测。如果您不使用modernizr，代码将如下所示：

```
if(!!(window.history && history.replaceState)){
   window.history.replaceState({}, document.title, base + fragment);
} else {
   location.replace(base + fragment);
} 
```

除非您有特定的设备检测原因，否则首选功能检测，因为它基本上支持所有设备，甚至未来的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:04:01.933

要使其适用于所有/大多数移动平台，请查看此[链接](http://www.chrislinford.co.uk/get-going-guides/add-ons/iphoneandandroid.html)。

展示如何处理 Android、iPad 和 iPhone 的重定向。

Android 使用`document.location`而 iOS 支持`window.location.replace`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:04:43.300

这行得通吗？

```
document.location.href = 'http://example.com/somePage.html'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T10:22:31.977

您可以尝试在历史 window.history 上使用 replaceState 方法

```
 if (((navigator.userAgent.toLowerCase().indexOf('mozilla/5.0') > -1 && navigator.userAgent.toLowerCase().indexOf('android ') > -1 && navigator.userAgent.toLowerCase().indexOf('applewebkit') > -1) && !(navigator.userAgent.toLowerCase().indexOf('chrome') > -1))) {
          window.history.replaceState({}, document.title, base + fragment);
      } else {
          location.replace(base + fragment);
      } 
```

# visual-studio-2010 - 如何以管理员身份运行 VS 2010 Pro 命令行选项？

> ID：15193368
> 
> 赞同：0
> 
> 时间：2013-03-04T01:54:18.590
> 
> 标签：visual-studio-2010, iis-8

在 Windows 8 下运行的 Visual Studio 2010 在 Visual Studio 工具下有多个命令行选项。我找不到其中任何一个的名称，因此我可以将其中一个或全部的 .exe 设置为始终以管理员身份运行。

我也不能找到 Run 调用的 cmd 文件的位置来执行此操作。

我需要解决的问题是运行 aspnet_regiis -i 而不会出现由于需要提升而无法运行的错误。

仅供参考，我是 Windows 8 笔记本电脑的管理员，因为我是它的唯一帐户，默认为管理员。因此，当我运行可执行文件时，它应该已经以管理员身份运行。

我应该提到为什么我必须运行 aspnet_regiis -i ，也就是说，我在 IIS 8 中没有得到任何 .aspx 处理程序映射。所以，我尝试使用的 Dot Net Nuke 站点的 defaut.aspx 文件自然是不会发火。

其他论坛没有帮助。

我的猜测是我需要在 VS 2010 中找到命令行可执行文件或从 Run 定位的整个命令行，并将它们设置为以管理员身份运行。然后我应该能够运行 aspnet_regiis -i 并在 IIS 8 中获得我需要的映射。

对于那些熟悉 IIS 8 的人，我已经编辑了 applicationHost.config 文件并将 system.web 标记锁定中的处理程序和模块条目从“拒绝”设置为“允许”——显示了一些但不是所有处理程序映射。

有一口 :) 任何熟悉这个问题的人？

我正在运行 Windows 8 Home、6 GB RAM、VS 2010 SP 1、IIS 8，并选择了所有选项。同样，为了确保安装 VS 2010 和启用 IIS 8 不会以错误的顺序发生，我已经禁用 IIS，重新启动然后重新启用 IIS，希望这能处理它。

没有喜悦。

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:57:43.537

只需以管理员身份运行 VS 2010。然后，所有工具都将以管理员身份运行。

1.  右键单击 VS 2010 快捷方式
2.  选择“以管理员身份运行”

# javascript - Jade 中的生成属性

> ID：15193369
> 
> 赞同：0
> 
> 时间：2013-03-04T01:54:38.443
> 
> 标签：javascript, pug

有没有办法在 Jade 中使用 JavaScript 生成属性？

在诸如 EJS 之类的东西中，可以这样做：

```
<div <?- bool ? 'attribute' : 'no attribute' ?>> 
```

显然，Jade 中没有等价物。当然我可以这样做：

```
option(selected=bool) 
```

Jade 会为此属性生成适当的 HTML 输出。但据我所知，没有办法写出比这更复杂的东西了。

问题不在于是否需要这样做。如果没有这个，一个人可能会过得去。但是，在 Jade 中是否有可能而我只是不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:10:23.123

根据您的具体情况，您有几个选择。

如果`'no attribute'`试图排除`attribute`，您可以[将其设置为`null`or`undefined`](https://github.com/visionmedia/jade#attributes)（尽管，正如您已经指出的，`false`也可以工作）：

```
div(attribute=condition ? 'value' : null) 
```

但是，如果您的意图是属性交换，则可以使用[嵌入式标记](https://github.com/visionmedia/jade#html)和[插值](https://github.com/visionmedia/jade#tag-text)来完成此操作：

```
| <div #{bool ? 'attribute' : 'no-attribute'}> 
```

或者，我相信您必须分别设置每个条件：

```
div(attribute=bool, no-attribute=!bool) 
```

还有一些从对象中指定属性的建议，例如[#664](https://github.com/visionmedia/jade/issues/664)，它提供了`mixin`s 的可能替代方案。

# ruby-on-rails-3 - scss 单独的变量和 mixins 文件（在 heroku 上）

> ID：15193370
> 
> 赞同：0
> 
> 时间：2013-03-04T01:54:39.007
> 
> 标签：ruby-on-rails-3, heroku, sass

很多时候我需要在文件之间共享 css 变量和 mixin。我所做的只是将变量移动到一个名为“variables.css.scss”的单独文件中，然后

```
 @import 'variables' to whatever sheets need 'em. 
```

这在本地有效，因为该单独的文件实际上存在。但是，在编译资产（如在 heroku 上）之后，找不到该文件...触发加载路径错误。

有没有办法让变量和 mixins 保持干燥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:07:51.590

@import 就像一个部分。无论出于何种原因，我的本地环境并不像 heroku API 那样严格（严格更好）。我需要解决的只是将实际文件名从“variables.scss”更改为“_variables.scss”......就像部分文件名一样。Heroku现在很高兴...

# android - 车身可调速度和Engine/Box2D

> ID：15193382
> 
> 赞同：1
> 
> 时间：2013-03-04T01:56:44.113
> 
> 标签：android, box2d, andengine

我试图通过加速度计的移动来改变附着在矩形上的物理体的速度。我无法让身体改变速度，一旦设置它是永久属性吗？

这是在我的 populateScene 中：

```
rect = new Rectangle(220, -200, 24, 24, this.getVertexBufferObjectManager());
rect.setColor(Color.GREEN);
mScene.attachChild(rect); 

ball = PhysicsFactory.createBoxBody(mPhysicsWorld, rect, BodyType.DynamicBody, droppingBoxDef);

mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(
                    rect, ball)); 
```

这就是我尝试改变速度的地方：

```
@Override
    public void onAccelerationChanged(AccelerationData pAccelerationData) {

        int accellerometerSpeedX = (int)pAccelerationData.getX();
        //   accellerometerSpeedY = (int)pAccelerometerData.getY();
        //Log.v("Accelerometer X Y Z: ", ""+pAccelerationData);

        ball.setLinearVelocity(accellerometerSpeedX, 0);

    } 
```

如果没有矩形上方的第二部分，则可以正常加载并且其物理主体可以正常工作。当我尝试使用时它似乎消失了：ball.setLinearVelocity。

Body 对象是类中的全局变量，因此可以在两种方法中引用。我尝试在 Populatescene 中使用更新处理程序并在其中设置 ball.setLinearVelocity，但是结果相同。

**本质上**我的问题是：物体的速度在连接到物理世界后可以改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:13:55.153

通常在 Box2D 中，您不设置速度，而是将脉冲或力施加到物体上以使其加速或减速。
对于您上面描述的内容，您不应该使用 setLinearVelocity。尝试使用

```
ball.applyForce(new Vector2(accellerometerSpeedX, 0), ball.getWorldCenter()); 
```

或者

```
 boxBody.applyAngularImpulse(new Vector2(accellerometerSpeedX, 0)); 
```

# asp.net-mvc-3 - OutputCache 因复杂对象属性而异

> ID：15193383
> 
> 赞同：7
> 
> 时间：2013-03-04T01:56:49.657
> 
> 标签：asp.net-mvc-3, asp.net-caching

我有一个控制器操作，它接收一个复杂对象作为参数，我需要 OutputCache 随这个复杂对象的属性之一而变化。这可能吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T03:36:43.747

如果你有一个像

```
public class person{
 public string Name {get;set;}
 public string location {get;set;}
} 
```

在（强类型）视图中，您有一个表格

```
 @model Person

 @Html.BeginForm(){
  @Html.TextBoxFor(x=>x.Name)
  @Html.TextBoxFor(x=>x.location)
 } 
```

然后您将表单提交给`ActionResult` savePerson，并带有不同的签名，例如

```
public ActionResult savePerson(Person p){
 // p.Name
 // p.location

} 
```

或者

```
public ActionResult savePerson(string Name, string location){

} 
```

因此我认为如果你像这样注释 ActionResult

```
[OutputCache(Duration=3600, VaryByParam="Name")]
public ActionResult savePerson(Person p)
{
    //
    return View();
} 
```

它会为你做的，或者如果你有一个复杂的模型，比如

```
public class person{
 public string Name {get;set;}
 public Location loc {get;set;}
} 
public class Location{
  public string address
} 
```

尝试

```
[OutputCache(Duration=3600, VaryByParam="Person.Location.address")]
public ActionResult savePerson(Person p)
{
    //
    return View();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-28T14:27:10.110

我有与上述相同的要求，并提出了一种略有不同的方法

**班上**

```
/// <summary>
/// This class is used to encapsulate search filters for monitor graphs
/// </summary>
public class DatacarMonitorSearchCriteriaModel
{
    public int? SynergyCode { get; set; }

    [Required]
    [DataType(DataType.Date)]
    public DateTime StartDate { get; set; }

    [Required]
    [DataType(DataType.Date)]
    public DateTime EndDate { get; set; }

    /// <summary>
    /// Filter to apply 
    /// </summary>
    public IEnumerable<int> Countries { get; set; }

    public DatacarMonitorSearchCriteriaModel()
    {
        Countries = new List<int>();
    }

} 
```

**OutputCacheComplex 属性**

```
/// <summary>
/// <para>
///     An instance of this class mimic the behaviour of OutputCacheAttribute but for complex objects.
/// </para>
/// <para>
///     It allows to cache the output of any action that takes complex objects 
/// </para>
/// </summary>
public class OutputCacheComplexAttribute : OutputCacheAttribute
{
    private readonly Type[] _types;

    private string _cachedKey;

    /// <summary>
    /// Initializes a new instance of the <see cref="OutputCacheComplexAttribute"/> class.
    /// </summary>
    /// <param name="types">Types that this attribute will lookup for in QueryString/Form data and store values in cache.</param>
    /// <exception cref="System.ArgumentOutOfRangeException">type;type cannot be null</exception>
    public OutputCacheComplexAttribute(params Type[] types)
    {
        if (types == null)
        {
            throw new ArgumentOutOfRangeException("type", "type cannot be null");
        }
        _types = types;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        StringBuilder sbCachedKey = new StringBuilder();
        if (filterContext.HttpContext.Request.Url != null)
        {
            string path = filterContext.HttpContext.Request.Url.PathAndQuery;
            IDictionary<string, object> parameters = filterContext.ActionParameters;

            //we need to compute a cache key which will be used to store the action output for later retrieval
            //The cache key scheme is 
            //    {url}:{key 1}:{value};[{key 2}:{value 2}[; ... {key n}:{value n}]];  
            // where : 
            //  - url is the url of the action that will be executed
            //  - key n is the name of the n-th parameter
            //  - value n is the value of the n-th parameter as json string.
            foreach (KeyValuePair<string, object> kv in parameters)
            {
                var kv1 = kv;
                if (kv.Value != null && _types.AtLeastOnce(t => t.IsInstanceOfType(kv1.Value)))
                {
                    sbCachedKey = sbCachedKey.AppendFormat("{0}:{1};",kv.Key,
                        JsonConvert.SerializeObject(kv.Value, Formatting.None, new JsonSerializerSettings()
                        {
                            NullValueHandling = NullValueHandling.Ignore,
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        }));
                }
            }

            _cachedKey = String.Format("{0}:{1}:{2}", GetType().Name, path, sbCachedKey.ToString());
        }

        if (!String.IsNullOrWhiteSpace(_cachedKey) && filterContext.HttpContext.Cache[_cachedKey] != null)
        {
            filterContext.Result = (ActionResult)filterContext.HttpContext.Cache[_cachedKey];
        }
        else
        {
            base.OnActionExecuting(filterContext);
        }
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (!String.IsNullOrWhiteSpace(_cachedKey))
        {
            filterContext.HttpContext.Cache.Add(_cachedKey, filterContext.Result, null,
                DateTime.UtcNow.AddSeconds(Duration), Cache.NoSlidingExpiration,
                CacheItemPriority.Default, null);
        }

        base.OnActionExecuted(filterContext);
    }
} 
```

**属性使用**

```
[OutputCacheComplex(typeof(DatacarMonitorSearchCriteriaModel), Duration = OutputCacheDurationInSeconds, Location = OutputCacheLocation.Server)]
public async Task<JsonNetResult<DatacarMonitorDetailModel>> ReadMonitorDetailsJson([DataSourceRequest] DataSourceRequest request, DatacarMonitorSearchCriteriaModel criteria)
{ 
     //some really complicated code here
} 
```

使用这个新属性，您可以指定用于缓存的类型[s]，并且将根据每个属性的值计算缓存键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-01T15:47:46.850

对于对象，就可以正常工作：

```
 [OutputCache(VaryByParam = "*", Duration = 60)] 
```

# r - Rcpp：将编译后的函数保存为 Robj

> ID：15193384
> 
> 赞同：11
> 
> 时间：2013-03-04T01:57:08.347
> 
> 标签：r, compilation, rcpp

如果我在 R 中定义一个函数，我可以使用 save 函数保存函数对象。然后我可以使用 load 函数加载该函数对象并直接使用它。但是，如果我有一个 rcpp 函数，并且如果我尝试保存编译后的版本并将其加载回内存，我将无法再直接使用该函数对象。这甚至可能吗？我问的原因是因为编译函数需要一段时间，如果每次启动 R 环境时都有办法避免这种成本，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T02:01:42.893

不，通常您不能序列化（并因此保存）使用`cxxfunction()`or编译的函数`sourceCpp()`。你需要重新编译它，除非你把它放在一个包中。这就是为什么包是除了快速实验之外真正安装编译代码的方法。

# android - 指定的孩子在谷歌闹钟代码中已经有一个父母

> ID：15193389
> 
> 赞同：1
> 
> 时间：2013-03-04T01:57:36.940
> 
> 标签：android

我正在为我当前的项目修改一些谷歌代码。我刚开始在这个类中遇到错误，这令人费解，因为我根本没有对这个类进行任何更改。

这是错误：

```
 FATAL EXCEPTION: main
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.skipmorrow.powerclock/com.skipmorrow.powerclock.SetAlarm}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2304)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
    at android.app.ActivityThread.access$600(ActivityThread.java:150)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
    at android.view.ViewGroup.addViewInner(ViewGroup.java:3339)
    at android.view.ViewGroup.addView(ViewGroup.java:3210)
    at android.view.ViewGroup.addView(ViewGroup.java:3186)
    at com.skipmorrow.powerclock.SetAlarm.onCreate(SetAlarm.java:134)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258) 
```

这是代码。就像我说的，我没有对其进行任何更改，并且我认为没有必要根据我的项目要求对其进行任何更改。如果没有必要，我讨厌进去把事情搞砸。整个项目可在此处获得： [https ://github.com/android/platform_packages_apps_alarmclock](https://github.com/android/platform_packages_apps_alarmclock)

我正在为 API 8 编译。

```
 // Get the main ListView and remove it from the content view.
    ListView lv = getListView();
    content.removeView(lv);

    // Create the new LinearLayout that will become the content view and
    // make it vertical.
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);

    // Have the ListView expand to fill the screen minus the save/cancel
    // buttons.
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT);
    lp.weight = 1;
    ll.addView(lv, lp); // error here. Line 134 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:15:19.350

您可以尝试直接从视图中获取父级，这样就不会遇到问题。

你有

```
 // Get the main ListView and remove it from the content view.
ListView lv = getListView();
content.removeView(lv); 
```

您需要将其更改为

```
 // Get the main ListView and remove it from the content view.
ListView lv = getListView();
((ViewGroup)lv.getParent()).removeView(lv); 
```

# c# - 自托管 WCF 服务

> ID：15193390
> 
> 赞同：2
> 
> 时间：2013-03-04T01:57:39.263
> 
> 标签：c#, wcf

我正在研究从我的应用程序中创建一个自托管的 WCF 服务。我正在尝试按照 Microsoft 站点[http://msdn.microsoft.com/en-us/library/ms731758(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms731758(v=vs.100).aspx)上的示例进行操作，但我遇到了问题。

当程序运行时，我可以进入网页，上面说我可以运行 svcutil.exe 来生成客户端类，或者当我进入教程说我收到错误的 WCF 测试客户端时

```
Service metadata may not be accessible. Make sure your service is running and exposing metadata. 
```

从 svcutil.exe 我收到以下错误：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC>svcutil http://localhost:
6525/hello
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 4.0.30319.1]
Copyright (c) Microsoft Corporation.  All rights reserved.

Attempting to download metadata from 'http://localhost:6525/hello' using WS-Meta
data Exchange or DISCO.
Generating files...
Warning: No code was generated.
If you were trying to generate a client, this could be because the metadata docu
ments did not contain any valid contracts or services
or because all contracts/services were discovered to exist in /reference assembl
ies. Verify that you passed all the metadata documents to the tool.

Warning: If you would like to generate data contracts from schemas make sure to
use the /dataContractOnly option. 
```

下面是我的 WCF 应用程序的代码

```
public interface IHelloWorldService
        {
            [OperationContract]
            string SayHello(string firstName, string lastName);
        }

        static void Main(string[] args)
        {
            Uri baseAddress = new Uri("http://localhost:6525/hello");

            using (ServiceHost host = new ServiceHost(typeof(HelloWorldService), baseAddress))
            {
                ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
                smb.HttpGetEnabled = true;
                smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
                host.Description.Behaviors.Add(smb);

                host.Open();

                Console.WriteLine("The service is ready at: {0}", baseAddress);
                Console.WriteLine("Press <Enter> to stop the service");
                Console.ReadLine();
                host.Close();

            }
        }

        public class HelloWorldService : IHelloWorldService
        {
            public string SayHello(string firstName, string lastName)
            {
                return string.Format("Hello {0} {1}", firstName, lastName);
            }
        } 
```

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:35:59.467

乍一看很难找出你的问题的问题，但当我测试你的代码时，我发现你的代码中缺少一些东西。您忘记向客户公开您的合同。您的界面缺少 [ServiceContract] 属性。下面将解决您的问题，希望对您有所帮助。

```
[ServiceContract]
public interface IHelloWorldService
{
    [OperationContract]
    string SayHello(string firstName, string lastName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:07:03.950

我刚刚遇到了完全相同的问题。原来，编辑后`app.config`，设计师停止了自动更新`app.config`文件。您可以从 发布标记`app.config`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:07:34.997

元数据未在此处公开，您需要为此添加新的 EndPoint 并需要在服务配置中启用它。请执行以下操作。

```
<service name="ConsoleApplication1.WCFService1" behaviorConfiguration="newBehaviour" >
        <endpoint address="mex"  binding="mexHttpBinding"
                  contract="IMetadataExchange" />

        <host>
            <baseAddresses>
                <add baseAddress="http://localhost:80/WCFService1" />
            </baseAddresses>
        </host>
<service> 
```

并在服务行为中

```
<serviceBehaviors>
          <behavior name="newBehaviour">
            <serviceMetadata httpGetEnabled="true"/>
          </behavior>
</serviceBehaviors> 
```

我已经尝试过了，并且生成了代理没有任何问题。请让我知道任何疑虑。

# angularjs - 定义angularjs路由时，如何使显式路径优先于命名参数

> ID：15193401
> 
> 赞同：1
> 
> 时间：2013-03-04T01:59:18.220
> 
> 标签：angularjs, angular-routing

在以下示例中，两个路由都解析为 detail.html 模板。我如何使第一条路线优先，因为它是明确定义的而不是作为命名参数？

```
$routeProvider.
             when('/about', {templateUrl: 'about.html'}).
             when('/:id', {templateUrl: 'details.html'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:40:45.153

斯图维，你是对的。第一条路线优先。

# jsp - useBean 类属性 *** 的值无效。好的 NetBeans 在服务器上坏了

> ID：15193409
> 
> 赞同：0
> 
> 时间：2013-03-04T01:59:53.850
> 
> 标签：jsp, tomcat, netbeans

我正在使用 NetBeans 开发一个 JSP 项目。

我收到“useBean 类属性变量的值。播放器无效。” 我在 StackOverflow 上查看了这个问题的其他版本，罪魁祸首似乎是

1.  该类位于正确的目录中，因此在我的情况下为 WEB-INF/classes/variables/Player.class。
2.  Player 类有一个 0 参数的公共构造函数。
3.  一切都拼写正确，注意区分大小写。
4.  在使用 bean 行之后应该有一个 set property 行。

所以，1-3对我来说都是正确的。我尝试添加设置属性线，但它仍然无法运行。在我发布我的代码之前，我还想添加：

当我从 netbeans 在本地运行它时，一切正常。仅当我将其上传到服务器后才会出现此问题。Netbeans 和服务器都在为 servlet 容器运行 Tomcat7。好的，这是我的 JSP 代码中导致错误的部分

```
<html>
<head>
<jsp:useBean id="me" class="variables.Player" scope="session"/>
<jsp:setProperty name="me" property="*" />
<jsp:useBean id="allGames" class="variables.BoardList" scope="application"/>
<jsp:setProperty name="allGames" property="*" />
<%@page import="utilities.Utils" %> 
```

这是我的 Player 类代码的开始。（编辑以显示整个班级）

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package variables;

/**
 *
 * @author MagillaGorilla
 */
public class Player {
    public int number;
    public int boardID;
    public String name;

    public Player() {
    number=0;
    boardID=-1;
    name="Player0";
}
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getBoardID() {
        return boardID;
    }

    public void setBoardID(int boardID) {
        this.boardID = boardID;
    }

    public int getNumber() {
        return number;
    }

    public void setNumber(int number) {
        this.number = number;
    }
} 
```

不确定这是否重要，但这是我上传到服务器的方式：

我做了一个干净的并在netbeans中构建。我使用 ftp 将我的 project.war 文件上传到我的服务器。我的服务器是 Ubuntu 12.10 x32 服务器。我使用以下方法取消文件：

```
jar xvf project.war 
```

整个事情尤其令人沮丧，因为 netbeans 运行它没有问题！任何帮助将不胜感激。感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:33:20.757

好吧，在做了一些研究之后，我发现问题出在部署阶段。当我手动取消它时，有些东西搞砸了。因此，我将 .war 上传到我的服务器，并让 tomcat 管理器为我部署 .war，瞧，没有错误。

# linux - 如何查看 ELF 文件中包含的函数名称和参数？

> ID：15193416
> 
> 赞同：4
> 
> 时间：2013-03-04T02:01:04.503
> 
> 标签：linux, cygwin, elf

如果我查看文件的字节，我肯定可以看到其中的一些函数名称。是否有任何工具可以为我列出它们？也许甚至他们的参数也是如此？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T02:08:25.773

这应该打印目标文件或库中所有定义的符号。

```
nm -C --defined-only file.o 
```

`nm`有很多选项可用于过滤掉符号，例如`-g`仅显示`global symbols`、`-l`打印行号（如果您曾经`gcc -g`启用调试符号）等等。

如果你有一个 ELF 格式的二进制文件（看起来是你的情况），你也可以使用`readelf`

```
readelf -Ws file.o 
```

此输出中的第 8 列包含感兴趣的符号名称。您可以使用`c++filt`demangle 名称：

```
readelf -Ws file.o | awk '{print $8}' | c++filt 
```

# ios - 在 Storyboard 中设置 View Controller 根目录

> ID：15193417
> 
> 赞同：1
> 
> 时间：2013-03-04T02:01:16.860
> 
> 标签：ios, objective-c, xcode, uinavigationcontroller, storyboard

我在我的应用程序中使用了[JASidePanels](https://github.com/gotosleep/JASidePanels)和 Storyboards，当我想更改中心视图时，`self.sidePanelController.centerPanel = [[UINavigationController alloc] initWithRootViewController:[[TestViewController alloc] init];`我没有得到中心的视图。但是，如果我以编程方式进行布局，我会得到视图。

那么如何在 Storyboard 中以 root 身份初始化视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:57:37.140

您以 root 身份启动视图控制器。您可以通过拖动故事板内的箭头来做到这一点：

![在此处输入图像描述](../Images/4a358236e09c45425f160d6fe60ef7a7.png)

# plone - 登录表单、createTicket 和 UnicodeDecodeError 错误及潜在解决方案

> ID：15193428
> 
> 赞同：0
> 
> 时间：2013-03-04T02:02:03.330
> 
> 标签：plone

我最近将一个 Plone 站点从 Plone 4.1.4 迁移到 Plone 4.2.4。迁移本身没有报告错误。然而，在过去的几天里，我们收到了关于非常奇怪的行为的报告。某些用户无法登录并在 plone.session.tktauth 和 createTicket 函数（见下文）中收到 UnicodeDecodeError 并被发送回登录表单。这些用户的用户名或密码中都没有 utf-8 字符，这是所有这一切中最奇怪的部分。

经过一番调查，我看到 plone.session 是 3.5.2 版本，并且有两行将编码设置为 None。在我之前的 3.5 版本中，createTicket 和 splitTicket 中的编码设置为 utf-8。通过将这些行更改为 utf-8 我解决了错误（到目前为止！）：

```
def createTicket(secret, userid, tokens=(), user_data='', ip='0.0.0.0', timestamp=None, encoding='utf8', mod_auth_tkt=False):
...

def splitTicket(ticket, encoding='utf8'):
... 
```

不知道其他人是否经历过这个或者这是否是一个错误，但我想我会把它放在那里。希望这可以帮助任何遭受同样问题的人。

最好的，帕特里克

原始错误：

```
Module ZPublisher.Publish, line 126, in publish
Module ZPublisher.mapply, line 77, in mapply
Module ZPublisher.Publish, line 46, in call_object
Module Products.CMFFormController.FSControllerPageTemplate, line 91, in __call__
Module Products.CMFFormController.BaseControllerPageTemplate, line 28, in _call
Module Products.CMFFormController.ControllerBase, line 231, in getNext
Module Products.CMFFormController.Actions.TraverseTo, line 38, in __call__
Module ZPublisher.mapply, line 77, in mapply
Module ZPublisher.Publish, line 46, in call_object
Module Products.CMFFormController.FSControllerPythonScript, line 105, in __call__
Module Products.CMFFormController.Script, line 145, in __call__
Module Products.CMFCore.FSPythonScript, line 127, in __call__
Module Shared.DC.Scripts.Bindings, line 322, in __call__
Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
Module Products.PythonScripts.PythonScript, line 344, in _exec
Module script, line 29, in logged_in
<FSControllerPythonScript at /Plone/logged_in>
Line 29
Module Products.PlonePAS.tools.membership, line 624, in loginUser
Module Products.PlonePAS.plugins.cookie_handler, line 93, in login
Module Products.PluggableAuthService.PluggableAuthService, line 1140, in updateCredentials
Module plone.session.plugins.session, line 220, in updateCredentials
Module plone.session.plugins.session, line 140, in _setupSession
Module plone.session.tktauth, line 177, in createTicket

UnicodeDecodeError: 'ascii' codec can't decode byte 0xa8 in position 6: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:44:45.297

这里已经有关于这个的讨论：[https ://github.com/plone/plone.session/commit/0d4079c0e0ceff780ab10ce3206e99c59c4010a2#L1L200](https://github.com/plone/plone.session/commit/0d4079c0e0ceff780ab10ce3206e99c59c4010a2#L1L200)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:02:03.330

建议的解决方案，其中 plone.session.tktauth 中的 encoding=None，设置为 utf8：

```
def createTicket(secret, userid, tokens=(), user_data='', ip='0.0.0.0', timestamp=None, encoding='utf8', mod_auth_tkt=False):
...

def splitTicket(ticket, encoding='utf8'): 
```

# java - Eclipse中的Web服务与tomcat，NoClassDefFoundError：javax.servlet.ServletContainerInitializer

> ID：15193434
> 
> 赞同：1
> 
> 时间：2013-03-04T02:02:09.577
> 
> 标签：java, eclipse, web-services, tomcat

我正在关注[http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/comment-page-1/#comment上的简单示例 Web 服务的教程-130057](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/comment-page-1/#comment-130057) - 他仔细列出了所需的库，它们位于 tomcat lib 文件夹和 Web 服务本身的“用户库”部分中。（把那些放在那里让我摆脱了试图完成这件事的最后一条致命错误消息。）我已经看到一篇关于这个错误的帖子，表明“旧的 servlet.jar 可能位于某个地方。”；我在 eclipse 或 tomcat 库目录中都找不到。在tomcat lib目录下有一个servlet-api.jar，里面其实有ServletContainerInitializer。

这是 Tomcat 7，eclipse Juno，不，我不想先停下来学习 Maven。我看到另一篇帖子说，在海报清理并重新安装 JRE/JDK、Tomcat 和 eclipse 后，问题就消失了。我想如果我买了一台新机器，它也会消失，但我希望有一些不那么激烈的东西。

我不希望任何人知道问题是什么——有人可以告诉我如何解决它吗？我正在发布控制台日志的第一部分，以防万一……

```
Mar 3, 2013 8:53:41 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;PATH=C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;c:\local\derby\bin;C:\Program Files\SlikSvn\bin;C:\Program Files\Java\jre6\bin;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;c:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;c:\Program Files (x86)\Roxio\OEM\AudioCore\;C:\Program Files (x86)\Windows Live\Shared;.
Mar 3, 2013 8:53:41 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:FirstWS' did not find a matching property.
Mar 3, 2013 8:53:42 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Mar 3, 2013 8:53:42 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Mar 3, 2013 8:53:42 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 794 ms
Mar 3, 2013 8:53:42 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 3, 2013 8:53:42 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37
Mar 3, 2013 8:53:42 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletContainerInitializer
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1628)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.catalina.startup.ContextConfig.getServletContainerInitializer(ContextConfig.java:1659)
    at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1569)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1277)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletContainerInitializer
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 32 more 
```

# c++ - 为什么泄漏检测不给我行号？

> ID：15193435
> 
> 赞同：3
> 
> 时间：2013-03-04T02:02:13.003
> 
> 标签：c++, memory-leaks, visual-studio-debugging

我最近使用指向 s 的原始指针转换了一个程序，`std::shared_ptr`并希望确保没有内存泄漏。我查看了 MSDN 的[使用 CRT 库](http://msdn.microsoft.com/en-us/library/x98tx3cf(v=vs.110).aspx)页面查找内存泄漏，并按照说明设置报告。

我首先将这些行添加到我的文件中：

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

并调用报告 -`_CrtDumpMemoryLeaks();`

我确实在使用`new`来分配我的内存，所以，正如页面所示，我添加了......

```
#ifdef _DEBUG   
#ifndef DBG_NEW      
#define DBG_NEW new ( _NORMAL_BLOCK , __FILE__ , __LINE__ )      
#define new DBG_NEW   
#endif
#endif  // _DEBUG 
```

在更精确的泄漏位置方面没有显着变化。相反，我的报告仍然如下所示：

```
Detected memory leaks!
Dumping objects ->
{158} normal block at 0x006F8458, 8 bytes long.
 Data: <  ,     > DC F6 2C 00 00 00 00 00 
{155} normal block at 0x006FAD40, 40 bytes long.
 Data: <L>              > 4C 3E 17 01 03 00 00 00 01 00 00 00 CD CD CD CD 
{154} normal block at 0x006FAB68, 16 bytes long.
 Data: <d>              > 64 3E 17 01 01 00 00 00 01 00 00 00 00 00 00 00 
{149} normal block at 0x006FAC08, 40 bytes long.
 Data: <L>              > 4C 3E 17 01 03 00 00 00 01 00 00 00 CD CD CD CD 
{148} normal block at 0x006FABB8, 16 bytes long.
 Data: <d>              > 64 3E 17 01 01 00 00 00 01 00 00 00 00 00 00 00 
Object dump complete.
The program '[7152] List.exe' has exited with code 0 (0x0). 
```

不幸的是，该报告是在退出之前生成的，因此无法实时查看泄漏。

通过查看这个[问题](https://stackoverflow.com/questions/3564582/memory-leak-detecting-in-c-with-without-visual-leak-detector)的答案，我注意到我没有加载 pdb 文件，因为它是一个空项目。所以我遵循了[这里](http://www.kirupa.com/forum/showthread.php?347809-Cannot-find-or-open-the-PDB-file-hello-world-first-practise)给出的建议，它确实解决了 pdb 问题，但未能解决我的问题。

该应用程序是从空控制台应用程序生成的，如果这很重要，我正在以管理员身份运行。

此外，我知道我可以使用外部工具，但我经常使用我无权添加任何工具的计算机，因此让 VS 正常运行是理想的解决方案。让报告显示泄漏的行号的任何帮助都会很棒。

### 边注：

我想一个合乎逻辑的问题是 - 如果您使用托管指针，为什么我仍然有内存泄漏？好吧，我留下了几个本地化的指针，它们只是各种临时持有者等，似乎不应该引起问题。所以，我觉得我知道它发生在哪里，但这是一个如此简单的程序，我想知道它是如何完成的，所以我可以在更大的程序上使用它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-02T08:28:47.883

您需要确保 stdlib 的定义和包含在应用程序中的任何其他包含之前。

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>
#ifdef _DEBUG
#ifndef DBG_NEW
#define DBG_NEW new ( _NORMAL_BLOCK , __FILE__ , __LINE__ )
#define new DBG_NEW
#endif
#endif  // _DEBUG 
```

应该是您应用程序中的第一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-15T16:45:23.623

您必须验证您在项目中声明的所有类是否包括 crtdbg.h 和宏 _crtdbg_map_alloc 以及最后的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-28T14:26:42.357

我发现我必须把

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 
```

在**每个**可能是分配的潜在来源的文件中。我假设我只需要在主程序中执行此操作

```
_CrtDumpMemoryLeaks(); 
```

叫做。

# html - 移动网站处理的CSS规则

> ID：15193436
> 
> 赞同：-1
> 
> 时间：2013-03-04T02:02:20.870
> 
> 标签：html, css, mobile

移动网站的问题是当屏幕是横屏时，它是宽屏，然而，当屏幕旋转并变为potartiat时，它会变得不那么宽，并且CSS规则应该不同以保持元素显示一致。因此，我想知道当景观使用 Landscape.css 时是否有设置，当 potarait 使用 potariat .css 时。或者我需要指定一次css `$(window).resize{}`？处理差异的标准方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:16:06.693

没有灵丹妙药，您应该做什么取决于您的网站。苹果有一些很好的文档描述了各种方法：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html)

还可以看看 Bootstap，它是 Twitter 创建的一个开放框架，可以让事情变得更简单。[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# scala - Scala 正则表达式模式匹配是否正常工作？

> ID：15193439
> 
> 赞同：2
> 
> 时间：2013-03-04T02:02:34.517
> 
> 标签：scala

我是 Scala 的新手，但有人告诉我**“您正在检查“Toronto Raptor”是否 == matchNY。**对于以下代码片段@ [https://issues.scala-lang.org/browse/SI-7210](https://issues.scala-lang.org/browse/SI-7210)，我真的不知道为什么“Totonto Raptor”是在for循环中选择的唯一要匹配的字符串使用正则表达式，有人可以向我解释一下吗？
谢谢。大卫

```
 val matchNY = "^.*New.*$".r

    val teams = List(
        "Toronto Raptor",
        "New York Nets",
        "San Francisco 49ers",
        "Dallas Mavericks"
    )

    for (team <- teams) {
        team match {
            case `matchNY` => println("Go New York.")
            case _ => println("Boo")
        }
    } 
```

注1：这里解释了反引号的用法@http: [//alvinalexander.com/scala/scala-unreachable-code-due-to-variable-pattern-message](http://alvinalexander.com/scala/scala-unreachable-code-due-to-variable-pattern-message)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:18:32.873

我假设你的意思是

```
val matchNY = "^.*New.*$".r 
```

而不是`^.New.$`，如果您希望匹配包含`New`.

在 Scala 中，一个`case`语句块可以被认为是一个偏函数序列。

在你的例子中，

```
case `matchNY` => // ... 
```

翻译成类似的东西：

```
case x if x == matchNY  => // .. 
```

所以这将尝试 使用*相等性*`String` `"Toronto Raptor"`与`Regexp`对象匹配：`^.*New.*$`

 *```
"Toronto Raptor" == ("^.*New.*$".r) 
```

哪个不匹配，因为 a`String`和`Regexp`object 是 2 个不同的东西。

列表中的任何其他`String`s 也是如此：

```
"New York Nets" !=  ("^.*New.*$".r) 
```

哪个也不匹配。在 case 语句中使用正则表达式作为匹配项的方法是：

```
case matchNY() => // .... Note the () 
```

其中，在引擎盖下（大致）等同于类似的东西

```
case x matchNY.unapplySeq(x).isDefined =>  // ... 
```

case 语句中的正则表达式被实现为具有方法的[提取器对象](http://www.scala-lang.org/node/112)`unapplySeq`。最后一个表达式显示了前一个翻译成的内容。

如果 matchNY 有一个捕获，例如：

```
val matchNY = "^.*New York\s(.*)$".r 
```

然后你可以用它来提取捕获的匹配：

```
case matchNY(something) => // 'something' is a String variable 
                           // with value "Nets" 
```

**边注**

你的例子可以浓缩为

```
teams foreach { 
   case matchNY() => println("Go New York.")
   case _ => println("Boo")
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T03:12:47.977

是的，它工作正常。模式匹配背后的魔法是一种叫做[提取器](http://danielwestheide.com/blog/2012/11/21/the-neophytes-guide-to-scala-part-1-extractors.html)的东西。

[如果您深入研究Regex](http://danielwestheide.com/blog/2012/11/21/the-neophytes-guide-to-scala-part-1-extractors.html)的 ScalaDoc ，您会发现它只是定义`unapplySeq`的，而不是定义的`unapply`。

这意味着如果您想在模式匹配中使用正则表达式，您应该执行以下操作（注意 matchNY 后的括号）：

```
val matchNY = "^.*New.*$".r

val teams = List(
    "Toronto Raptor",
    "New York Nets",
    "San Francisco 49ers",
    "Dallas Mavericks"
)

for (team <- teams) {
    team match {
        case matchNY() => println("Go New York.")
        case _ => println("Boo")
    }
} 
```

否则，您只是检查列表中的元素是否为`== matchNY`，这无论如何都不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T03:07:13.983

在您的 for 循环中，您实际上是在检查列表中的每个项目`teams`是否等于正则表达式`matchNY`，并且检查列表中的每个项目而不仅仅是“Toronto Raptor”。这相当于你的 for 循环：

```
 for (team <- teams) {
    if (team == matchNY) println("Go New York.")
    else println("Boo")
  } 
```

分解为：

```
 if ("Toronto Raptor" == matchNY) println("Go New York.") else println("Boo")
  if ("New York Nets" == matchNY) println("Go New York.") else println("Boo")
  if ("San Francisco 49ers" == matchNY) println("Go New York.") else println("Boo")
  if ("Dallas Mavericks" == matchNY) println("Go New York.") else println("Boo") 
```

我认为你正在寻找的是如果有东西匹配你是正则表达式。你可以这样做：

```
 for (team <- teams) {
    matchNY.findFirstMatchIn(team) match {
      case Some(teamMatch) => {
        println("Go New York.")
        println(teamMatch)
      }
      case _ => {
        println("Boo")
        println(team)
      }
    }
  } 
```

打印出来：

```
Boo
Toronto Raptor
Go New York.
New York Nets
Boo
San Francisco 49ers
Boo
Dallas Mavericks 
```*

# r - R中的目标变量重新编码

> ID：15193441
> 
> 赞同：5
> 
> 时间：2013-03-04T02:02:58.700
> 
> 标签：r, variables, data-manipulation

我正在尝试进行一些文本处理，并且需要重新编码句子的单词，以便在新变量中以特定方式识别目标单词。例如，给定一个看起来像这样的数据框......

```
subj <- c("1", "1", "1", "2", "2", "2", "2", "2")
condition <- c("A", "A", "A", "B", "B", "B", "B", "B")
sentence <- c("1", "1", "1", "2", "2", "2", "2", "2")
word <- c("I", "like", "dogs.", "We", "don't", "like", "this", "song.")
d <- data.frame(subj,condition, sentence, word)

 subj condition sentence  word
 1         A        1     I
 1         A        1     like
 1         A        1     dogs.
 2         B        2     We
 2         B        2     don't
 2         B        2     like
 2         B        2     this
 2         B        2     song. 
```

我需要创建一个新列，其中目标单词的每个实例（在此示例中，当 d$word="like" 时）都标记为 0，并且句子块中“like”之前的所有单词和“之后的所有单词”都会递减像”增量。每个主题都有多个句子，句子因条件而异，因此循环需要考虑每个主题、每个句子的目标词实例。最终结果应该是这样的。

```
 subj condition sentence  word   position
 1         A        1     I        -1
 1         A        1     like      0
 1         A        1     dogs.     1
 2         B        2     We       -2
 2         B        2     don't    -1
 2         B        2     like      0
 2         B        2     this      1
 2         B        2     song.     2 
```

对不起，如果问题措辞不好，我希望它是有道理的！请注意，每个句子中的目标不在同一个位置（相对于句子的开头）。我对 R 很陌生，可以弄清楚如何增加或减少，但不能在每个句子块中同时做这两件事。关于解决此问题的最佳方法有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T02:10:11.140

您可以添加一个索引，然后您可以将其用于相对位置。
使用使其非常容易`data.table`分解`sentence`

```
library(data.table)
DT <- data.table(indx=1:nrow(d), d, key="indx")

DT[, position:=(indx - indx[word=="like"]), by=sentence]

# Results
DT
#    indx subj condition sentence  word position
# 1:    1    1         A        1     I       -1
# 2:    2    1         A        1  like        0
# 3:    3    1         A        1 dogs.        1
# 4:    4    2         B        2    We       -2
# 5:    5    2         B        2 don't       -1
# 6:    6    2         B        2  like        0
# 7:    7    2         B        2  this        1
# 8:    8    2         B        2 song.        2 
```

### 日期：

如果您有语法错误的句子，您可能想要使用`grepl`而不是`==`

```
DT[, position:=(indx - indx[grepl("like", word)]), by=sentence] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T02:37:06.173

我认为在文本处理中避免让您的文本条目成为因素是明智的。在这种情况下，我使用了`as.character`，但我建议设置`options(stringsAsFactors=FALSE)`；

```
d$position <- with( d, ave(as.character(word), sentence, 
                               FUN=function(x) seq_along(x) - which(x=="like") ) )
> d
  subj condition sentence  word position
1    1         A        1     I       -1
2    1         A        1  like        0
3    1         A        1 dogs.        1
4    2         B        2    We       -2
5    2         B        2 don't       -1
6    2         B        2  like        0
7    2         B        2  this        1
8    2         B        2 song.        2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T03:33:11.513

常规解决方案`plyr`

```
 ddply(d, .(subj, condition, sentence), transform, 
   position = seq_along(word) - which(word == 'like')) 
```

# android - 在 ushahidi 地图上显示从我的 android 应用程序发送的坐标

> ID：15193446
> 
> 赞同：0
> 
> 时间：2013-03-04T02:03:46.480
> 
> 标签：android, plugins, geolocation, maps

我的 android 应用程序获取用户当前位置的坐标并将其发送到安装了 Ushahidi 平台的我的网站。我需要在 ushahidi 地图上显示这些坐标。此外，android 应用程序获取用户新位置的坐标并将其发送到站点，因此我还需要一种方法来用新坐标替换用户的旧坐标。

Ushahidi 对此有任何规定吗？有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:34:18.633

当您说在 Ushahidi 地图上显示坐标时。你到底什么意思？您想在信息窗口上显示坐标吗？

您可以使用 API 来更新坐标。[https://wiki.ushahidi.com/display/WIKI/Ushahidi+Public+API](https://wiki.ushahidi.com/display/WIKI/Ushahidi+Public+API)

# javascript - 在多选列表中设置选定值

> ID：15193455
> 
> 赞同：1
> 
> 时间：2013-03-04T02:04:28.897
> 
> 标签：javascript, jquery, html

我有这个多选列表：

```
<select id="vendors" name="vendors" multiple="multiple">
    <option value="1">A</option>
    <option value="2">B</option>
    <option value="3">C</option>
    <option value="4">D</option>
    <option value="5">E</option>
</select> 
```

当页面加载时，我正在加载需要在我的选择列表中选择的 id 列表。这是我正在尝试的方法：

```
var vendors = GetVendorArray();  // list of vendor ids I want selected

$.each(vendors, function(index, item) {
    $("#vendors").filter(function() {
        return $(this).val() == item; 
    }).attr('selected', true);
}); 
```

但这不起作用，没有选择任何项目。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:13:42.053

最简单的方法是将整个数组作为值传递给`select`using `val()`。带`mulitple select`值的是一个数组

```
$('#vendors').val(  GetVendorArray()) 
```

演示：http: [//jsfiddle.net/sPKAY/](http://jsfiddle.net/sPKAY/)

您采用的方法的问题是没有循环`option`标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:08:03.927

[`filter`](http://api.jquery.com/filter)减少匹配元素的集合以匹配附加的选择器/回调 fn。输出。您需要定位`<option>`元素，而不是下拉列表本身，因为您尝试根据其值是否与数组内容匹配来选择选项。

```
var vendors = GetVendorArray();  // list of vendor ids I want selected

$.each(vendors, function(index, item) {

    //you're filtering options, not the list itself
    $("#vendors > option").filter( function() {
        return $(this).val() == item; 
    }).prop('selected', true); //use .prop, not .attr
}); 
```

# javascript - 如何将本地存储项设置回 null。

> ID：15193461
> 
> 赞同：31
> 
> 时间：2013-03-04T02:04:58.303
> 
> 标签：javascript, html, null, local-storage

我正在使用系统在站点发生重大更新时提醒用户，并且我使用 LocalStorage 来执行此操作，当我制作系统时，我让系统检查提示是否为“null”，然后将“提示”设置为当他们收到警报时是真的。现在，我想将“tip”本地存储设置回 null，并改用“tip2”。

我会这样做吗？localStorage.setItem('tip', 'null');

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-04T02:09:03.307

`localStorage.removeItem('tip')`如果您打算删除密钥

`localStorage.setItem('tip', 'null')`如果您只想将其设置为字符串“null”

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-09-02T16:06:05.330

### 无法将 localStorage 项设置为 null 值。请改用删除。

任何 localStorage 项目要么具有字符串值，要么不存在。没有其他类型是可能的，因此 null 的变化也不可能。

令人困惑的部分是，正如您在示例中注意到的那样，如果您调用 localStorage.getItem('tip') 并且它不存在，您将在调试器中或尝试显示该值时看到 null 返回值。

尽管这很不直观，但这并不意味着本地存储项实际上存在值为 null。这实际上意味着项目“提示”根本不存在。甚至没有任何与关键“提示”相关的任何内部痕迹。

对于确实存在的项目，如果您尝试将项目设置为“返回 null”（这是不可能的），那么您应该做的是**删除**该项目。

在您的示例中，这将导致您再次看到返回值显示为 null，就像您第一次调用 localStorage.getItem('tip') 时一样，即使它不为 null，它也根本不存在。为此，您可以按如下所述删除该项目。

请记住，您所需要的只是**获取**、**设置**和**删除**。

`localStorage.getItem('tip')`                             // 获取项目值
`localStorage.setItem('tip','cool stuff')`     // 设置项目值
`localStorage.removeItem('tip')`                       // 移除项目
`if (localStorage.getItem('tip') === null)`  // 检查项目是否存在

从技术上讲，@Michael Theriot 的回答是建议将项目提示设置为字符串值“null”。这与将其设置为“dog”没有太大区别，因为它们中的任何一个都不是系统识别的空值。

我猜这不是你的意思，但即使是这样，我也会倾向于反对这种做法，因为它可能会让维护你的代码的其他人感到困惑。

# jquery - 不同的编号 不同屏幕分辨率上的列数

> ID：15193462
> 
> 赞同：0
> 
> 时间：2013-03-04T02:05:03.020
> 
> 标签：jquery, css, html, twitter-bootstrap

我正在使用引导响应来创建网站。在页面中间，有一个 div 包含许多框。

要求是

1.  在大屏幕上我应该每行放置 3 个盒子，在中大屏幕上我应该每行放置 2 个盒子，在小屏幕上我应该每行放置 1 个盒子。
2.  盒子宽度（所有盒子的宽度相同）应始终最大化以填满 div 的整个宽度。

问题是我可以满足每个要求，但不能同时满足。

为了只满足 1，我可以为每个框指定固定宽度，让它们向左浮动，但框不会调整大小。

为了只满足2，我可以在盒子上使用bootstrap span类（在父div上使用row-fluid），盒子总是会根据分辨率调整大小，但不是。每行的盒子数总是相同的。

我如何同时满足 1 和 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:07:14.273

添加独特的`class`或`id`你想消失的盒子请..看看我的[**演示**](http://jsfiddle.net/jhunlio/rKA2q/)

希望这有帮助

**注意：** *查看效果滚动小提琴以扩大屏幕宽度*

**更新**

html

```
<div class="wrapper">
    <div class="box1"></div>
    <div class="box2"></div>
    <div class="box3"></div>
    <div class="box3"></div>
</div> 
```

css

```
.wrapper {
    width:100%;
    float:left;
}
.wrapper div {
    float:left;
    width:22%;
    border:1px solid red;
    height:100px;
    margin:0 2% 0 0;
}

@media screen and (max-width: 368px){ 

    .wrapper div {
        width:45%;
        margin:10px 2% 0 0;
    }
} 
```

工作[演示](http://jsfiddle.net/jhunlio/rKA2q/3/)

# xamarin.android - Monodroid 有效地加载图像

> ID：15193463
> 
> 赞同：0
> 
> 时间：2013-03-04T02:05:09.363
> 
> 标签：xamarin.android

我正在使用显示文本和图像的列表视图。我正在尝试使用 Task 对象异步下载图像并将它们加载到视图中以使列表视图有效滚动。但是我经常得到 OutOfMemoryExceptions，因为内存中有太多位图，即使我将它们保存到磁盘并访问它。我看到的一个原因是创建了许多任务（对于 20 个图像，创建了 20 个任务），它也可能占用内存。有没有一种有效的方法来做到这一点？

这是[代码](https://github.com/rohithc/TestImageDownloader)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:23:22.767

您必须缩放位图，以使它们不会以全分辨率加载到内存中。100kb 大小的位图在内存中占 400kb，因为您需要为每个像素分配 4 个字节来保存 Alpha、Red、Green 和 Blue 的所有颜色值。如果您的图像是用相机拍摄的，它们的大小很容易达到 10 倍，并且很快就会占用大量内存。

我看到您将图像缩放，[`DecodeSampledBitmap`](https://github.com/rohithc/TestImageDownloader/blob/master/TestImageDownloader/ImageDownloader.cs#L162)但是当您不再需要它时，您还需要处理它。

如果[`SetBitmap`](https://github.com/rohithc/TestImageDownloader/blob/master/TestImageDownloader/ImageDownloader.cs#L68)您忘记处理您的位图，您可以简单地`using`在它周围放置一条语句：

```
using(var bitmap = ImageDownloader.DownloadImage( url, width, height ))
{
    if( !token.IsCancellationRequested )
        (this.m_context as Activity).RunOnUiThread(
                () => imageView.SetImageBitmap( bitmap )
            );
} 
```

另请查看Xamarin 文档中的[有效加载大型位图文章](http://docs.xamarin.com/recipes/android/resources/general/load_large_bitmaps_efficiently)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:39:55.963

除了有效地加载位图，我最近发现确保 Android 知道它可以稍后发布图像也很重要。

可用的解码选项之一是，如果您希望 Android 从内存中清除任何已加载的位图，则将`InPurgeable`其设置为很重要。`true`

> 如果设置为 true，则生成的位图将分配其像素，以便在系统需要回收内存时可以清除它们。在这种情况下，当需要再次访问像素时（例如，绘制位图，调用 getPixels()），它们将被自动重新解码

看：

*   [Android 在图像捕获时内存不足](https://stackoverflow.com/questions/4511057/android-out-of-memory-on-image-capture)
*   [为什么我永远不会使用 BitmapFactory 的 inPurgeable 选项？](https://stackoverflow.com/questions/7068132/why-would-i-ever-not-use-bitmapfactorys-inpurgeable-option)
*   [http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)
*   [https://github.com/slodge/MvvmCross/pull/175](https://github.com/slodge/MvvmCross/pull/175)

# php - simple-html-dom 循环没有结束

> ID：15193465
> 
> 赞同：0
> 
> 时间：2013-03-04T02:05:10.517
> 
> 标签：php, loops, hyperlink, simple-html-dom

我试图捕捉所有链接，然后转到下一页，直到页面结束。我只是不断循环。我想我只是呆若木鸡，希望今天我能再次得到一些帮助。

getLinks(' [http://www.homedepot.com/h_d1/N-5yc1vZaqns/h_d2/Navigation?catalogId=10053&langId=-1&storeId=10051&catStyle=ShowProducts#/?c=1&style=List](http://www.homedepot.com/h_d1/N-5yc1vZaqns/h_d2/Navigation?catalogId=10053&langId=-1&storeId=10051&catStyle=ShowProducts#/?c=1&style=List) ');

```
 function getLinks($URL) {

$html = file_get_contents($URL);

$dom = new simple_html_dom();
$dom -> load($html);

    foreach ($dom->find('a[class=item_description]') as $href){
  $url = $href->href;
  echo $url;
 }

if ($nextPage = $dom->find("a[class='paginationNumberStyle page_arrows']", 0)){ 

    $nextPageURL = 'http://www.homedepot.com'.$nextPage->getAttribute('data-url'); 

    $dom -> clear();
    unset($dom);
    getLinks($nextPageURL);
} else {
    echo "\nEND";
    $dom -> clear();
    unset($dom);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:19:06.837

在您的代码中，您永远不会跟踪您去过的地方。

假设您从 A 页开始：

*   页面 A 上的第一个链接链接到页面 B。
*   您打开页面 B 并开始抓取链接。
*   页面 B 上的第一个链接链接到页面 A。
*   您打开页面 A 并开始抓取链接....

此过程将无限重复，因为您最终会一遍又一遍地抓取相同的页面。您需要保留您已抓取的页面列表，如果您已经抓取过该页面，请跳过该列表。

另请注意，它可能不是这样的简单循环。

*   A链接到B
*   B链接到C
*   C链接到D
*   ……
*   S链接到T
*   T 链接到 A

不太熟悉 PHP，但类似：

```
$arr[$url] = true; // Tell it that we know the url
if (array_key_exists($url, $arr)) { 
    // check if the url exists in the hash
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:35:16.550

问题是您正在遵循上一个箭头以及下一个箭头。您的 css 选择器需要调整以解决此问题。

# android - 我如何用图像替换应用程序的顶部，android

> ID：15193466
> 
> 赞同：-2
> 
> 时间：2013-03-04T02:05:23.937
> 
> 标签：android, image

我如何更改应用程序的顶部，这基本上是图标和名称（黑色活动）与 android 中的图像？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:58:33.960

我猜你的问题是：如何更改应用程序顶部的应用程序图像图标（ActionBar 所在的位置）？

脚步

1.  获取您想要的图像并将其保存为 .png 文件。例如，“myPic.png”。不要将其保存为 .jpg 文件！
2.  转到 res/drawable-hdpi 文件夹并删除旧图像。将其替换为您的图像。
3.  对“res/drawable-ldpi”图像和其他可绘制文件夹的图像执行相同的操作。每个不同的可绘制文件夹都适用于不同的屏幕尺寸和分辨率。所以你需要不同的照片。如果您需要更改图像的分辨率，请转到“绘画”并选择“调整大小”。我将图像设置为与原始 android 图像相同的分辨率。
4.  进入 AndroidManifest.xml 文件并将旧的 android:icon=“<code>@drawable/ic_launcher”（内部）更改为图像的名称。所以对于这个例子 android:icon= “<code>@drawable/myPic”。
5.  转到 Eclipse IDE 顶部的“Project”选项卡，然后转到“Clean...”。这将重建您的整个文件，以便保存编辑。
6.  运行你的程序，看看它是否有效。我已经几个月没有这样做了，所以希望我没有忘记任何步骤。祝你好运。让我知道如果事情不工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:21:40.783

您可以通过在全屏模式下显示您的活动来使用任何一种方式，

**使用编码**

```
 // remove title
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

**使用 Androidmanifest.xml**

```
<activity android:name=".ActivityName"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
</activity> 
```

# ios - CATiledLayer 子视图导致内存警告和崩溃

> ID：15193467
> 
> 赞同：2
> 
> 时间：2013-03-04T02:05:28.927
> 
> 标签：ios, map, catiledlayer

好吧，这就是正在发生的事情......我有一个 UIView 子类，它包括两个点（开始和结束），这两个点之间的 CGPath 和很多 UILabel。如果我将该 UIView 子类作为子视图添加到我的滚动视图（在基于 CATiledLayer 的 UIView 之上），那么我的应用程序开始收到内存警告并最终崩溃。但是，如果我删除包含点和路径的 UIView 子类并保持 CATiledLayer 视图保持原样，那么一切都可以正常运行，并且不会发生崩溃或内存警告。

有没有人知道为什么会这样？内容视图应该不会有任何问题，因为我只绘制最大 40px 宽的标签和一个也很小的 CGPath？

这是一个地图应用程序

这是一些代码：

```
 //Display the map image
 - (void)displayTiledImageNamed:(NSString *)imageName size:(CGSize)imageSize {
     self.zoomScale = 1.0;

     container = [[UIView alloc] initWithFrame:(CGRect){ CGPointZero, imageSize }];

     _zoomView = [[UIImageView alloc] initWithFrame:(CGRect){ CGPointZero, imageSize }];
     NSString *path = [NSString stringWithFormat:@"%@/%@-Small.png",[[NSBundle mainBundle] bundlePath], [imageName stringByDeletingPathExtension]];
     UIImage *zoomImage = [UIImage imageWithContentsOfFile:path];
     [_zoomView setImage:zoomImage];

     [container addSubview:_zoomView];
     [_zoomView release];

     _tilingView = [[UMTileView alloc] initWithImageName:imageName size:imageSize];
     _tilingView.frame = _zoomView.bounds;
     [_zoomView addSubview:_tilingView];
     [_tilingView release];

     [self configureForImageSize:imageSize];

     //This is the view that's causing the crash and memory warnings
     //If this view is commented out the app functions just fine
     UMMapContentView *m = [[UMMapContentView alloc] initWithFrame:CGRectMake(0,0,imageSize.width,imageSize.height) andColors:self.colors mapView:self.mapView];
    self.contentView = m;
     [container addSubview:self.contentView];
     [m release];

     [self addSubview:container];
     [container release];
 } 
```

这是我的路径视图类，它是上面 UMMapContentView 视图中的另一个子视图：

```
+ (Class)layerClass {
    return [CATiledLayer class];
}

+ (CFTimeInterval)fadeDuration {
    return 0.0;
}

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        self.userInteractionEnabled = NO;
        self.backgroundColor = [UIColor clearColor];
    }
    return self;
}

- (void)dealloc {
    self.path = nil;
    self.pathColor = nil;
    [super dealloc];
}

- (void)resetPathView {
    CATiledLayer *tiledLayer = (CATiledLayer*)self.layer;
    tiledLayer.contents = nil;
    [tiledLayer setNeedsDisplay];
}

- (void)drawPath:(UMPath*)p {
    self.path = p;
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {
    if (self.path) {
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetStrokeColorWithColor(context, self.pathColor.CGColor);
        CGContextSetShadowWithColor(context, CGSizeMake(2.0, 1.0), 1.0, [[UIColor colorWithWhite:0.2 alpha:0.8] CGColor]);
        CGContextSetLineWidth(context, 8.0);
        CGContextBeginPath (context);
        CGContextMoveToPoint (context, ((UMMapPoint*)[self.path.points objectAtIndex: 0]).x, ((UMMapPoint*)[self.path.points objectAtIndex: 0]).y);
        for (int i = 1; i < self.path.points.count; i++) {
            CGContextAddQuadCurveToPoint (context, ((UMMapPoint*)[self.path.points objectAtIndex:i-1]).x, ((UMMapPoint*)[self.path.points objectAtIndex: i-1]).y, ((UMMapPoint*)[self.path.points objectAtIndex:i]).x, ((UMMapPoint*)[self.path.points objectAtIndex:i]).y);
        }
        CGContextStrokePath (context);
    }
} 
```

这是我将所有 UILabel 放在 UMMapContentView 视图中的方法：

```
- (void)mapAllLabelsInNavigationMap:(int)navigationMap {

    //There are 1109 label dictionaries in the labels array
    for (NSDictionary *dict in labels) {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake([[dict objectForKey:@"X"] floatValue],[[dict objectForKey:@"Y"] floatValue],[[dict objectForKey:@"Width"] floatValue],[[dict objectForKey:@"Height"] floatValue])];
        [label setLineBreakMode:NSLineBreakByWordWrapping];
        [label setNumberOfLines:0];
        [label setBackgroundColor:[UIColor clearColor]];
        [label setTextColor:[self colorFromHexString:[dict objectForKey:@"Foreground"]]];
        [label setFont:[UIFont systemFontOfSize:[[dict objectForKey:@"FontSize"] floatValue]]];
        [label setTextAlignment:NSTextAlignmentCenter];
        [label setText:[[UMDataBase shared] stringForID:[[dict objectForKey:@"Texts_ID"] intValue] withLanguage:languageID]];

        [self addSubview:label];
        [localMapLabels addObject:label];
        [label release];
    }
} 
```

我不确定我需要朝哪个方向前进...任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:00:44.357

你没有给出源代码`UMMapContentView`，但是如果它使用了CATiledLayer，那可能就是问题所在。您似乎无法子查看 CATiledLayer 支持的视图。

滚动到底部（在评论部分）：[http ://red-glasses.com/index.php/tutorials/catiledlayer-how-to-use-it-how-it-works-what-it-does/](http://red-glasses.com/index.php/tutorials/catiledlayer-how-to-use-it-how-it-works-what-it-does/)

如果您无论如何编写自己的平铺层，可能会更容易。CATiledLayer 上的文档很少，而错误很多。

# actionscript-3 - 从flex中的数组中删除一个点

> ID：15193468
> 
> 赞同：0
> 
> 时间：2013-03-04T02:05:45.230
> 
> 标签：actionscript-3, apache-flex, flex3

我只需要删除位置 i 处的元素。如何直接删除元素。是否有任何直接功能。我只想从数组中删除 arr[i]。我该怎么做，我 flex 3.0。

```
indexpoly = 3;

for(indexpoint = 0; indexpoint < indexpoly; indexpoint++)
{ 
    temp.points[indexpoint].x = intpoints[indexpoint].x+this.x;
    temp.points[indexpoint].y = intpoints[indexpoint].y+this.y;
}

for(indexpoint = indexpoint + 1; indexpoint <= intpoints.length; indexpoint++)
{
    temp.points[indexpoint-1].x = intpoints[indexpoint].x + this.x;
    temp.points[indexpoint-1].y = intpoints[indexpoint].y + this.y;
} 
```

当我这样做时它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:12:31.803

您可以使用[`.splice()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29).

```
var index:int = 3;
temp.points.splice(index, 1); 
```

# arrays - 使用 fenwick 树或 BIT 的数组中非递减子序列的最大总和

> ID：15193469
> 
> 赞同：3
> 
> 时间：2013-03-04T02:05:51.847
> 
> 标签：arrays, algorithm, data-structures, fenwick-tree

我们如何使用 fenwick 树找到数组中非递减子序列的最大和？例如我们有 1 4 4 2 2 3 3 1，这里非递减子序列的最大和是 11 (1 2 2 3 3)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:22:26.740

可以使用动态规划算法找到最大和。扫描数组并将每个元素的值添加到有效的最大子序列和（子序列以不大于该元素的值结束）。

有效的实现需要某种方法来快速找到给定子范围内的最大值。可以使用增强二叉搜索树来做到这一点。Fenwick 树只是增强二叉搜索树的一种有效实现。Fenwick 树最常见的用途是在某个子范围内查找值的总和。微不足道的修改允许使用它来找到子范围最大值（这是因为在这种特殊情况下，Fenwick 树中的值永远不会减少）。

有关详细信息，请参阅此 Python 代码：

```
array = [1, 4, 4, 2, 2, 3, 3, 1]

numbers = sorted(set(array))
n = len(numbers)
indexes = {numbers[v]:v+1 for v in range(0, n)}
n += 1
bit = [0] * n
result = 0

for x in array:
    pos = indexes[x]
    i = pos
    maximum = 0
    while i != 0:
        maximum = max(maximum, bit[i])
        i = i & (i-1)
    x += maximum
    i = pos
    while i < n:
        bit[i] = max(bit[i], x)
        i += i & -i
    result = max(result, x)

print(result) 
```

`indexes`字典用于将 Fenwick 树的大小从输入数组中的最大数减小到数组的大小。首先嵌套`while`在 Fenwick 树中查找子范围最大值。在更新总和之一后，第二个嵌套`while`更新 Fenwick 树。

此代码仅适用于正数数组。在一般情况下，输入数组应通过过滤掉所有非正数进行预处理。

时间复杂度为 O(N log N)。空间复杂度为 O(N)。

# c++ - 将结构传递给 Visual Studio 中的函数

> ID：15193472
> 
> 赞同：0
> 
> 时间：2013-03-04T02:06:33.703
> 
> 标签：c++, function, structure

我正在做一个项目，我试图将一个结构传递给一个函数，我尝试了各种方法，但我仍然做不到。我收到错误消息：

> 非法使用这种类型的表达。

非常感谢您的帮助。

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <time.h>

 struct big{
        int day;
        int year;
        char month[10];
        } ;

      void gen(struct big);
      void main()
    {
int choice;

printf("\t\t\t\t\t*MENU*\n\n\n");
printf("\t\tGenerate Buying/Selling Price-------------------PRESS 1\n\n");
printf("\t\tDisplay Foreign Exchange Summary----------------PRESS 2\n\n");
printf("\t\tBuy Foreign Exchange----------------------------PRESS 3\n\n");
printf("\t\tSell Foreign Exchange---------------------------PRESS 4\n\n");
printf("\t\tExit--------------------------------------------PRESS 5\n\n\n\n");
printf("\t\tPlease enter your choice");
scanf("%d", &choice);

if (choice == 1)
{
    gen(big);
}
system("pause");

    }

void gen(big rec)
{
printf("Enter the date in the format: 01-Jan-1993");
scanf("%d %s %d", &rec.day, &rec.month, &rec.year);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:08:43.927

您正在尝试传递结构定义本身，创建它的一个实例然后传递它。

```
big myBig;
gen(myBig); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:20:09.897

a> 你没有创建一个对象的结构`big`。你可以这样做`big obj;`

b>`void main`是一种糟糕的编程方式。`int main(void)`至少使用。

c> 传递引用而不是堆栈上的副本

像这样：

```
void gen(big& obj)
{
    printf("Enter the date in the format: 01-Jan-1993");
    scanf("%d %s %d", &rec.day, &rec.month, &rec.year);
} 
```

* * *

您必须创建一个类型为 的对象`big`。`struct big`只是房子的蓝图。而`bigObject`下面**是**房子。`struct big`HOLDS 值等的实际类型变量。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

struct big{
    int day;
    int year;
    char month[10];
};

void gen(struct big);
void main()
{
    int choice;
    big bigObject;
    printf("\t\t\t\t\t*MENU*\n\n\n");
    printf("\t\tGenerate Buying/Selling Price-------------------PRESS 1\n\n");
    printf("\t\tDisplay Foreign Exchange Summary----------------PRESS 2\n\n");
    printf("\t\tBuy Foreign Exchange----------------------------PRESS 3\n\n");
    printf("\t\tSell Foreign Exchange---------------------------PRESS 4\n\n");
    printf("\t\tExit--------------------------------------------PRESS 5\n\n\n\n");
    printf("\t\tPlease enter your choice");
    scanf("%d", &choice);

   if (choice == 1)
   {
      gen(bigObject); /*pass bigObject to gen*/
   }
   system("pause");
   return 0;
}

void gen(big& rec)
{
  printf("Enter the date in the format: 01-Jan-1993");
  scanf("%d %s %d", &rec.day, &rec.month, &rec.year);
} 
```

# ruby-on-rails - 在 AJAX 请求后调用 application.js 中的函数

> ID：15193473
> 
> 赞同：1
> 
> 时间：2013-03-04T02:06:46.107
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, ujs

转动我的轮子试图弄清楚这一点。我有一个链接，单击该链接可从服务器检索表单。该表单有 3 个按钮和 1 个文本输入。我试图让非提交按钮响应 JS，在从服务器返回表单后他们不这样做。

我在 ajax:success 试图调用的 lists.js 中创建了一个函数，但我没有做正确的事情。我已经在 lists.js 中测试了这个函数，我知道它可以工作，我只是没有正确调用它。

以下是相关文件。如何激活 showPicturePicker 函数，以便在插入 AJAX 响应后使用它？

**列表.js**

```
$("#new_list")
    .bind "ajax:success", (evt, xhr, settings) -> 
        $("#list-item").html(xhr)
        showPicturePicker

showPicturePicker = () ->
    $('#picture').click (e) ->
        e.preventDefault()
        alert "yeah, you figured it out"

$(document).ready showPicturePicker 
```

**_new.html.haml（从服务器返回的表单）**

```
= form_for [@list, @item], :remote => true, :html => {:class => 'form-inline'} do |f|
  .input-append
    = f.text_field "name", :class => 'input-large', :placeholder => "Add item to this list"
    %button#picture.btn
      %span.icon-camera
    %button#link.btn{:style => "font-size: 10px;"} 
      http://
  .secondary-fields{:style => "display: none"}  
    .field.margin
      = f.text_field "link", :placeholder => "http://www.link.com", :style => "width: 325px"
    .field.margin
      = f.file_field "picture"
      = f.hidden_field "picture_cache"
  .clearfix
    = link_to "blah", "#{}", :class => "fuck-me"
  = f.submit "Add Item", :class => 'btn', :id => "add-item" 
```

这也是我需要在其他地方解决的问题，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:10:53.900

application.js 用 IIFE（立即调用的函数表达式）包装，并且在那里定义的变量将不会在其他文件中可见，除非您明确地使它们可用于全局范围（通过将它们附加到窗口或其他对象）。

在 application.js 中，尝试：

```
@showPicturePicker = ->
    ...
# or window.showPicturePicker = -> 
```

“虽然为了清楚起见，本文档中没有显示，但所有 CoffeeScript 输出都包装在一个匿名函数中： (function(){ ... })(); 这个安全包装器，结合 var 关键字的自动生成，使它变得非常困难不小心污染了全局命名空间。”

[http://coffeescript.org/#lexical_scope](http://coffeescript.org/#lexical_scope)

# c# - 如何在 Web 服务中更新 Windows Phone 8 的磁贴通知？

> ID：15193475
> 
> 赞同：0
> 
> 时间：2013-03-04T02:07:02.107
> 
> 标签：c#, windows-phone-8

我开发了一个在 web 服务中获取发票数量的应用程序，它将每 2 分钟在磁贴通知中更新一次。发票编号将在 scheduleAgent.cs 的计数变量中更新。任何想法？

在主页面

```
ServiceReference1.WebServiceSoapClient test = new ServiceReference1.WebServiceSoapClient();

test.ReadTotalOutstandingInvoiceCompleted += new EventHandler<ServiceReference1.ReadTotalOutstandingInvoiceCompletedEventArgs>(serviceClient);

test.ReadTotalOutstandingInvoiceAsync();

private void serviceClient(object sender, ReadTotalOutstandingInvoiceCompletedEventArgs e)
{
     try
     {
         PeriodicTask p = new PeriodicTask("jj");

         p.Description = "Don't push the red button";

         ScheduledActionService.Add(p);

         ScheduledActionService.LaunchForTest(p.Name, TimeSpan.FromSeconds(10));
     }

     catch(Exception ex)
     {

     }
} 
```

在 ScheduledAgent.cs

```
 protected override void OnInvoke(ScheduledTask task)
    {
         //TODO: Add code to perform your task in background
         ShellTile t = ShellTile.ActiveTiles.First();

         StandardTileData d = new StandardTileData()
         {
             Title = "asdasdad",

             BackTitle = "cxvxvxvxcv",

             Count = 42,

             BackBackgroundImage = new Uri("dog.jpg", UriKind.Relative),

             BackgroundImage = new Uri("untitled.png", UriKind.Relative)
         };
             t.Update(d);

             NotifyComplete();

    } 
```

# phpunit - PHP单元骨架生成器不工作

> ID：15193477
> 
> 赞同：0
> 
> 时间：2013-03-04T02:07:04.550
> 
> 标签：phpunit

我正在尝试安装[PhpUnit 骨架生成器](https://github.com/sebastianbergmann/phpunit-skeleton-generator)。我也在使用 PhpStorm 5.0。

我感觉它没有正确安装自己，因为当我尝试运行骨架生成器时，它给了我一个错误提示：

```
'phpunit-skelgen.bat' not found at... 
```

此外，梨似乎确实将它安装在我`pear`的文件夹下的`SebastianBergmann\PHPUnit\SkeletonGenerator`文件夹中，这似乎很奇怪，因为我本来希望它在主`pear`文件夹中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:39:27.947

问题解决了。

那是因为 phpunit-skelgen.bat 文件实际上是安装在 php 文件夹中，而不是 pear 中。所以只要在php安装文件夹的根目录下搜索即可。

# mysql - mySQL 以 X 分钟为增量获取商店中的访问者数量

> ID：15193478
> 
> 赞同：0
> 
> 时间：2013-03-04T02:07:12.937
> 
> 标签：mysql, time, distribution

我有一个数据库，可以在用户经过节点时获取用户的 MAC 地址。该节点的位置使得他们在进入和离开场地时必须通过它。我想知道在任何给定时间有多少访客在场（连续会很好，但离散的 X 分钟块也可以）。

通过以下查询，我得到以下结果：

```
SELECT MACAddress, MIN(fg_HubDataTable.timeOfRec) as entryTime, MAX(fg_HubDataTable.timeOfRec) as exitTime
FROM fg_HubDataTable
WHERE fg_HubDataTable.venueID = 2 AND eventDate = '2013-02-22'
GROUP BY fg_HubDataTable.MACAddress, fg_HubDataTable.eventDate
HAVING TIMESTAMPDIFF(SECOND, MIN(fg_HubDataTable.timeOfRec), MAX(fg_HubDataTable.timeOfRec)) > 120 
```

数据顺序为：MAC地址、进入时间、退出时间

```
001CB3BAXXXX    2013-02-22 22:05:05 2013-02-23 00:34:09
001F1FA8XXXX    2013-02-23 01:17:06 2013-02-23 02:49:12
002608A8XXXX    2013-02-22 18:09:05 2013-02-22 19:12:05
0026BB9DXXXX    2013-02-22 23:13:03 2013-02-23 01:30:04
0026FF6DXXXX    2013-02-22 23:32:06 2013-02-23 01:26:03 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:59:30.333

有一段时间`X`，如果游客`V`最近的入口`En`有 a`time < X`的时间晚于他们最近的出口`Ex`有一个`time < X`OR 没有出口有`time < X`a

例如，如果访客在 t = 2 进入，在 t = 3 退出，在 t = 4 进入并在 t = 5 退出，那么他们在 t = 2.5 时在公园内（因为他们还没有离开），而不是在公园内在 t = 3.5（因为他们最近的出口 < 3.5 晚于他们最近的入口），在公园中 t = 4.5（因为他们最近的入口 < 4.5 晚于他们最近的出口）等等。

使用此信息，您可以构建一个查询，针对给定时间戳计算在该时间戳期间将在公园内的所有游客，并将其作为数字吐出，并在特定的时间戳集上运行查询（例如每分钟或每小时）。

# c# - 读取浮点值并将其写入 NumericUpDown

> ID：15193490
> 
> 赞同：-2
> 
> 时间：2013-03-04T02:09:02.730
> 
> 标签：c#, .net, numericupdown

在 C# 中，我有一个表示浮点值的[NumericUpDown控件，例如 2.3。](https://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown(v=vs.110).aspx)它可以从用户界面以 0.1 递增和递减。

但是，不能以编程方式写入或读取此值，因为它在 C# 中是一个 int。我需要能够读写这个浮点（或双精度）值。

目前，编译器迫使我将其转换为 int 并删除小数位。这显然是 C# 中的一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-28T09:16:35.943

如果您在显示十进制值时遇到问题，请将**DecimalPlaces**属性设置为 2 或更多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T02:10:37.753

嗯，[上次我检查](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value.aspx)的`NumericUpDown.Value`属性是小数...

```
decimal d = NumericUpDown.Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-22T11:12:30.077

我像这样使用它，它对我有用。

将双精度值设置为 numericUpDown 控件，

```
numericUpDown1.Value = new decimal((double)InputVal); 
```

您可以从`numericUpDown1`以下方式获取值：

```
double val = (double)numericUpDown1.Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-01T22:32:01.243

使用小数类型的另一种选择是将文本框直接放在 NumericUpDown 控件的文本部分上，而不覆盖 updown 按钮。

我使用了 NumericUpDown 控件引发的事件，但使用了数字 updown 显示前面的文本框来检索和发布事件的结果。

我建议创建一个继承 numericUpDown 类的新类，并通过添加具有新名称的方法或覆盖 NumericUpDown 类的方法来添加所需的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-03T10:35:33.997

您可以使用以下内容：

```
double Dimension1Data = Convert.ToDouble(Dimension1.Value); 
```

`Dimension1`控制在哪里`NumericUpDown`。

# css - 如何在 AngularJS 中包含视图/部分特定样式

> ID：15193492
> 
> 赞同：132
> 
> 时间：2013-03-04T02:09:06.647
> 
> 标签：css, model-view-controller, angularjs

**为我的应用程序使用的各种视图使用单独的样式表的正确/可接受的方式是什么？**

目前我在顶部的视图/部分的 html 中放置了一个链接元素，但有人告诉我这是不好的做法，即使所有现代浏览器都支持它，但我明白为什么它不受欢迎。

另一种可能性是将单独的样式表放在我的 index.html 中，`head`但我希望它仅在以性能的名义加载其视图时才加载样式表。

这是不好的做法，因为样式直到从服务器加载css后才会生效，导致在慢速浏览器中快速闪烁未格式化的内容？尽管我在本地进行测试，但我还没有看到这一点。

有没有办法通过传递给 Angular 的对象来加载 CSS `$routeProvider.when`？

提前致谢！

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-12-05T15:54:06.117

我知道这个问题现在已经很老了，但是在对这个问题的各种解决方案进行了大量研究之后，我想我可能想出了一个更好的解决方案。

> **更新 1：**自从发布此答案以来，我已将所有这些代码添加到我已发布到 GitHub 的简单服务中。回购位于[此处](https://github.com/tennisgent/angular-route-styles)。随时查看以获取更多信息。
> 
> **更新 2：**如果您只需要一个轻量级的解决方案来为您的路线引入样式表，那么这个答案非常好。如果您想要一个更完整的解决方案来管理整个应用程序中的按需样式表，您可能需要查看[Door3 的 AngularCSS 项目](https://github.com/door3/angular-css)。它提供了更细粒度的功能。

如果将来有人感兴趣，这就是我想出的：

**`<head>`1\. 为元素创建自定义指令：**

```
app.directive('head', ['$rootScope','$compile',
    function($rootScope, $compile){
        return {
            restrict: 'E',
            link: function(scope, elem){
                var html = '<link rel="stylesheet" ng-repeat="(routeCtrl, cssUrl) in routeStyles" ng-href="{{cssUrl}}" />';
                elem.append($compile(html)(scope));
                scope.routeStyles = {};
                $rootScope.$on('$routeChangeStart', function (e, next, current) {
                    if(current && current.$$route && current.$$route.css){
                        if(!angular.isArray(current.$$route.css)){
                            current.$$route.css = [current.$$route.css];
                        }
                        angular.forEach(current.$$route.css, function(sheet){
                            delete scope.routeStyles[sheet];
                        });
                    }
                    if(next && next.$$route && next.$$route.css){
                        if(!angular.isArray(next.$$route.css)){
                            next.$$route.css = [next.$$route.css];
                        }
                        angular.forEach(next.$$route.css, function(sheet){
                            scope.routeStyles[sheet] = sheet;
                        });
                    }
                });
            }
        };
    }
]); 
```

该指令执行以下操作：

1.  它编译（使用）一个 html 字符串，该字符串使用和为对象中的每个项目[`$compile`](http://docs.angularjs.org/api/ng.$compile)创建一组标签。`<link />``scope.routeStyles``ng-repeat``ng-href`
2.  它将已编译的`<link />`元素集附加到`<head>`标签。
3.  然后它使用`$rootScope`来监听`'$routeChangeStart'`事件。对于每个`'$routeChangeStart'`事件，它都会抓取“当前”`$$route`对象（用户即将离开的路线）并从`<head>`标签中删除其部分特定的 css 文件。它还抓取“下一个”`$$route`对象（用户将要前往的路线）并将其任何部分特定的 css 文件添加到`<head>`标签中。
4.  `ng-repeat`编译标记的部分`<link />`根据添加到对象或从`scope.routeStyles`对象中删除的内容来处理页面特定样式表的所有添加和删除。

**注意：** *这要求您的`ng-app`属性在`<html>`元素上，而不是`<body>`在`<html>`.*

**2\. 使用 : 指定哪些样式表属于哪些路由`$routeProvider`：**

```
app.config(['$routeProvider', function($routeProvider){
    $routeProvider
        .when('/some/route/1', {
            templateUrl: 'partials/partial1.html', 
            controller: 'Partial1Ctrl',
            css: 'css/partial1.css'
        })
        .when('/some/route/2', {
            templateUrl: 'partials/partial2.html',
            controller: 'Partial2Ctrl'
        })
        .when('/some/route/3', {
            templateUrl: 'partials/partial3.html',
            controller: 'Partial3Ctrl',
            css: ['css/partial3_1.css','css/partial3_2.css']
        })
}]); 
```

此配置将自定义`css`属性添加到用于设置每个页面的路由的对象。该对象`'$routeChangeStart'`作为`.$$route`. 因此，在监听`'$routeChangeStart'`事件时，我们可以获取`css`我们指定的属性并`<link />`根据需要附加/删除这些标签。请注意，`css`在路由上指定属性是完全可选的，因为它在示例中被省略了`'/some/route/2'`。如果路由没有`css`属性，该`<head>`指令将对该路由不做任何事情。另请注意，您甚至可以在每个路由中拥有多个特定于页面的样式表，如上面的`'/some/route/3'`示例所示，其中`css`属性是该路由所需样式表的相对路径数组。

**3\. 你已经完成了** 这两件事设置了所有需要的东西，并且在我看来，它使用了最干净的代码。

希望能帮助其他可能像我一样在这个问题上苦苦挣扎的人。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-01-13T18:17:05.777

@tennisgent 的解决方案很棒。不过，我觉得有点局限。

Angular 中的模块化和封装超越了路由。基于 Web 正在朝着基于组件的开发方式发展，在指令中应用这一点也很重要。

如您所知，在 Angular 中，我们可以在页面和组件中包含模板（结构）和控制器（行为）。[AngularCSS](https://github.com/door3/angular-css)启用了最后一个缺失的部分：附加样式表（演示文稿）。

对于完整的解决方案，我建议使用 AngularCSS。

1.  支持 Angular 的 ngRoute、UI 路由器、指令、控制器和服务。
2.  不需要`ng-app`在`<html>`标签中。当您在同一页面上运行多个应用程序时，这一点很重要
3.  您可以自定义样式表的注入位置：头部、主体、自定义选择器等...
4.  支持预加载、持久化和缓存清除
5.  支持媒体查询并通过 matchMedia API 优化页面加载

[https://github.com/door3/angular-css](https://github.com/door3/angular-css)

这里有些例子：

**路线**

```
 $routeProvider
    .when('/page1', {
      templateUrl: 'page1/page1.html',
      controller: 'page1Ctrl',
      /* Now you can bind css to routes */
      css: 'page1/page1.css'
    })
    .when('/page2', {
      templateUrl: 'page2/page2.html',
      controller: 'page2Ctrl',
      /* You can also enable features like bust cache, persist and preload */
      css: {
        href: 'page2/page2.css',
        bustCache: true
      }
    })
    .when('/page3', {
      templateUrl: 'page3/page3.html',
      controller: 'page3Ctrl',
      /* This is how you can include multiple stylesheets */
      css: ['page3/page3.css','page3/page3-2.css']
    })
    .when('/page4', {
      templateUrl: 'page4/page4.html',
      controller: 'page4Ctrl',
      css: [
        {
          href: 'page4/page4.css',
          persist: true
        }, {
          href: 'page4/page4.mobile.css',
          /* Media Query support via window.matchMedia API
           * This will only add the stylesheet if the breakpoint matches */
          media: 'screen and (max-width : 768px)'
        }, {
          href: 'page4/page4.print.css',
          media: 'print'
        }
      ]
    }); 
```

**指令**

```
myApp.directive('myDirective', function () {
  return {
    restrict: 'E',
    templateUrl: 'my-directive/my-directive.html',
    css: 'my-directive/my-directive.css'
  }
}); 
```

此外，您可以将该`$css`服务用于边缘情况：

```
myApp.controller('pageCtrl', function ($scope, $css) {

  // Binds stylesheet(s) to scope create/destroy events (recommended over add/remove)
  $css.bind({ 
    href: 'my-page/my-page.css'
  }, $scope);

  // Simply add stylesheet(s)
  $css.add('my-page/my-page.css');

  // Simply remove stylesheet(s)
  $css.remove(['my-page/my-page.css','my-page/my-page2.css']);

  // Remove all stylesheets
  $css.removeAll();

}); 
```

您可以在此处阅读有关 AngularCSS 的更多信息：

[http://door3.com/insights/introducing-angularcss-css-demand-angularjs](http://door3.com/insights/introducing-angularcss-css-demand-angularjs)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-04T02:38:11.773

可以将新样式表附加到`$routeProvider`. 为简单起见，我使用字符串，但也可以创建新的链接元素，或者为样式表创建服务

```
/* check if already exists first - note ID used on link element*/
/* could also track within scope object*/
if( !angular.element('link#myViewName').length){
    angular.element('head').append('<link id="myViewName" href="myViewName.css" rel="stylesheet">');
} 
```

在页面中预加载的最大好处是任何背景图像都已经存在，并且更少的可能性`FOUC`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-29T12:34:21.723

@sz3，今天很有趣，我必须完全按照您的要求做：'仅当用户访问'特定页面***时才加载特定的 CSS 文件。***所以我使用了上面的解决方案。

但我来这里是为了回答你的最后一个问题：'***我应该把代码放在哪里。有什么想法***吗？

将代码包含在**resolve**中是对的，但是您需要稍微更改格式。

看看下面的代码：

```
.when('/home', {
  title:'Home - ' + siteName,
  bodyClass: 'home',
  templateUrl: function(params) {
    return 'views/home.html';
  },
  controler: 'homeCtrl',
  resolve: {
    style : function(){
      /* check if already exists first - note ID used on link element*/
      /* could also track within scope object*/
      if( !angular.element('link#mobile').length){
        angular.element('head').append('<link id="home" href="home.css" rel="stylesheet">');
      }
    }
  }
}) 
```

**我刚刚测试过，它工作正常**，它注入了 html，并且只有在我点击 '/home' 路由时才会加载我的 'home.css'。

完整的解释可以在[这里](http://docs.angularjs.org/api/ngRoute.%24routeProvider)找到，但基本上**解决：**应该得到一个格式的对象

```
{
  'key' : string or function()
} 
```

你可以给' **key** '命名任何你喜欢的名字——在我的例子中，我称之为' **style** '。

然后对于值，您有两个选择：

*   如果它是一个**字符串**，那么它就是一个服务的别名。

*   如果它是**function**，则将其注入并将返回值视为依赖项。

这里的要点是，函数内部的代码将在控制器被实例化并触发 $routeChangeSuccess 事件之前执行。

希望有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-02T23:24:53.803

太棒了，谢谢你！！只需进行一些调整即可使其与 ui-router 一起使用：

```
 var app = app || angular.module('app', []);

    app.directive('head', ['$rootScope', '$compile', '$state', function ($rootScope, $compile, $state) {

    return {
        restrict: 'E',
        link: function ($scope, elem, attrs, ctrls) {

            var html = '<link rel="stylesheet" ng-repeat="(routeCtrl, cssUrl) in routeStyles" ng-href="{{cssUrl}}" />';
            var el = $compile(html)($scope)
            elem.append(el);
            $scope.routeStyles = {};

            function applyStyles(state, action) {
                var sheets = state ? state.css : null;
                if (state.parent) {
                    var parentState = $state.get(state.parent)
                    applyStyles(parentState, action);
                }
                if (sheets) {
                    if (!Array.isArray(sheets)) {
                        sheets = [sheets];
                    }
                    angular.forEach(sheets, function (sheet) {
                        action(sheet);
                    });
                }
            }

            $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {

                applyStyles(fromState, function(sheet) {
                    delete $scope.routeStyles[sheet];
                    console.log('>> remove >> ', sheet);
                });

                applyStyles(toState, function(sheet) {
                    $scope.routeStyles[sheet] = sheet;
                    console.log('>> add >> ', sheet);
                });
            });
        }
    }
}]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-15T12:20:27.907

如果您只需要将 CSS*应用于*一个特定的视图，我将在控制器中使用这个方便的代码段：

```
$("body").addClass("mystate");

$scope.$on("$destroy", function() {
  $("body").removeClass("mystate"); 
}); 
```

这将`body`在状态加载时向我的标签添加一个类，并在状态被破坏时将其删除（即有人更改页面）。这解决了我在我的应用程序中只需要将 CSS 应用于一种状态的相关问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-10T12:04:39.790

'使用严格'; angular.module('app') .run( [ '$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) { $rootScope.$state = $state; $rootScope .$stateParams = $stateParams; } ] ) .config( [ '$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {

```
 $urlRouterProvider
                .otherwise('/app/dashboard');
            $stateProvider
                .state('app', {
                    abstract: true,
                    url: '/app',
                    templateUrl: 'views/layout.html'
                })
                .state('app.dashboard', {
                    url: '/dashboard',
                    templateUrl: 'views/dashboard.html',
                    ncyBreadcrumb: {
                        label: 'Dashboard',
                        description: ''
                    },
                    resolve: {
                        deps: [
                            '$ocLazyLoad',
                            function($ocLazyLoad) {
                                return $ocLazyLoad.load({
                                    serie: true,
                                    files: [
                                        'lib/jquery/charts/sparkline/jquery.sparkline.js',
                                        'lib/jquery/charts/easypiechart/jquery.easypiechart.js',
                                        'lib/jquery/charts/flot/jquery.flot.js',
                                        'lib/jquery/charts/flot/jquery.flot.resize.js',
                                        'lib/jquery/charts/flot/jquery.flot.pie.js',
                                        'lib/jquery/charts/flot/jquery.flot.tooltip.js',
                                        'lib/jquery/charts/flot/jquery.flot.orderBars.js',
                                        'app/controllers/dashboard.js',
                                        'app/directives/realtimechart.js'
                                    ]
                                });
                            }
                        ]
                    }
                })
                .state('ram', {
                    abstract: true,
                    url: '/ram',
                    templateUrl: 'views/layout-ram.html'
                })
                .state('ram.dashboard', {
                    url: '/dashboard',
                    templateUrl: 'views/dashboard-ram.html',
                    ncyBreadcrumb: {
                        label: 'test'
                    },
                    resolve: {
                        deps: [
                            '$ocLazyLoad',
                            function($ocLazyLoad) {
                                return $ocLazyLoad.load({
                                    serie: true,
                                    files: [
                                        'lib/jquery/charts/sparkline/jquery.sparkline.js',
                                        'lib/jquery/charts/easypiechart/jquery.easypiechart.js',
                                        'lib/jquery/charts/flot/jquery.flot.js',
                                        'lib/jquery/charts/flot/jquery.flot.resize.js',
                                        'lib/jquery/charts/flot/jquery.flot.pie.js',
                                        'lib/jquery/charts/flot/jquery.flot.tooltip.js',
                                        'lib/jquery/charts/flot/jquery.flot.orderBars.js',
                                        'app/controllers/dashboard.js',
                                        'app/directives/realtimechart.js'
                                    ]
                                });
                            }
                        ]
                    }
                })
                 ); 
```

# python - Kivy Clear_widget 奇怪的行为（附上可重现的代码）

> ID：15193494
> 
> 赞同：2
> 
> 时间：2013-03-04T02:09:36.380
> 
> 标签：python, kivy

只是我正在尝试做的事情的简要说明。我在 FloaLayout 小部件中有两个 TextInput 小部件，它们都在 .kv 文件中定义，如下所示。（我在 kivy 论坛上问过这个问题，但提供的解决方案没有奏效，所以我在这里问它以获得一些新想法）

测试.kv

```
<TESTGUI>:
    t2: TI2
    t4: TI4
    fl1: FL1

FloatLayout:
    orientation: 'lr-bt'
    id: FL1
    size: root.size
    TextInput:
        id: TI2
        size_hint: 1, 0.1  
        pos_hint: {'top': 1}
        font_size: 35
        on_text: root.realTimeSearch(TI2, TI2.text)
    TextInput:
        id: TI4
        size_hint: 1, 0.1
        pos_hint: {'top': 0.86}
        font_size: 15 
```

现在，当我在其中一个 TextInput 小部件 (t2) 中输入任何文本时，程序所做的就是在字符串中搜索该文本。每当 TextInput 小部件文本更改时，都会执行此搜索。所以基本上只要你开始输入搜索就会动态地开始。搜索结果可以有很多匹配项（所有这些匹配项都存储在一个名为 result_list 的列表中（参见下面的代码）），并且根据匹配项的数量，我添加了一个 GridLayout，其按钮数量等于结果数量（即搜索结果列表中的元素数）。现在，当我单击按钮时，发生的情况是将按钮文本传输到另一个 TextInput 小部件（如上图所示的 t4）。下面是 .py 文件中的完整代码 该程序基本上是一个具有自动完成功能的搜索实用程序。我的问题 我遇到的是 clear_widgets 在当前上下文中似乎不起作用。所以我得到了很多小部件，我需要单击它们中的每一个来摆脱它们（请参阅下面的代码以获得清晰的解释）

我建议您在您的机器上运行代码以了解正在发生的事情（尝试在 t2 textinput 小部件中输入“silicon”，您会看到 clear_widgets 无法正常工作）。

```
import re
import sys
import kivy
kivy.require('1.5.1')
from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.widget import Widget
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.gridlayout import GridLayout
from kivy.uix.textinput import TextInput
from kivy.properties import ObjectProperty, StringProperty
from kivy.uix.popup import Popup
from kivy.uix.scrollview import ScrollView
from collections import Counter
from functools import partial
reload(sys)
sys.setdefaultencoding('utf-8')

rtsstr =",,,Substrate1,,,Substrate1,,,Substrate1,,,Substrate1,,,Substrate1,,,Substrate_coating,,,silicon,,,silicon_Substrate,,,substrate_silicon,,,"
#rtsstr is the string on which search is being performed

class TESTGUI(Widget):

t2 = ObjectProperty(None)
t4 = ObjectProperty(None)
fl1 = ObjectProperty(None)

def realTimeSearch(self, instance, value):
    """
    this function is used as a real time update of search results based on the search query. It also identifies partial matches (e.g. a search for silicon can result in entries such as silicon, silicon nitride, silicon dioxide etc. being displayed
    """
    if value != '':            
        match = re.findall("(?<=,{3})(?:(?!,{3}).)*?%s.*?(?=,{3})" % value, rtsstr, re.IGNORECASE)
        result_list = list(set(match)) #using a set to remove duplicates, if any.
        self.create_search(result_list)

def create_search(self, result_list):
    layt = GridLayout(cols=3, size_hint_y = None)
    layt.bind(minimum_height=layt.setter('height'))
    scrlv = ScrollView(size_hint=(1, 0.8), pos_hint={'top': 0.8})
    self.fl1.remove_widget(scrlv)

    for result in result_list:
        buttn2 = Button(text = str(result), size_hint = (0.3, None), height = 40)
        buttn2.bind(on_press = partial(self.transferSearchText, buttn2.text, scrlv))
        layt.add_widget(buttn2)
    scrlv.add_widget(layt)
    self.fl1.add_widget(scrlv)   

def transferSearchText(self, text, scrlv, *args):
    self.t4.insert_text(text + ',')
    scrlv.clear_widgets()
    self.fl1.remove_widget(scrlv) 
    self.t2.text = ''                     

class TestApp(App):
    def build(self):
        return TESTGUI()

if __name__ == '__main__':
    TestApp().run() 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T11:19:43.873

您正在尝试清除 Scrollview，您应该清除添加到 ScrollView 的布局。

Widget.Clear_widget() 仅清除当前小部件的子级，它不是递归的，也不应该如此。

Kivy 不提供传统的可编辑组合框。Kivy 如何让您非常轻松地创建自己的结合 TextInput 和 DropDown 的小部件。

您应该使用像[片段 wiki](http://wiki.kivy.org)中所示的 ComboEdit 之类的东西，并对其进行修改以满足您的需要。

因此，您要实现的目标可以像这样完成::

```
from kivy.app import App
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.dropdown import DropDown
from kivy.uix.button import Button
from kivy.uix.textinput import TextInput
from kivy.properties import ListProperty, StringProperty

import re

from kivy.lang import Builder

Builder.load_string('''
<MainView>:
    ComboEdit:
        size_hint: .5, .3
        pos_hint: {'center':(.5, .5)}
        # `args` is the keyword for arguments passed to `on_text` in kv language
        on_text: root.on_text(self, args[1])
''')

class ComboEdit(TextInput):
    '''
    This class defines a Editable Combo-Box in the traditional sense
    that shows it's options 
    '''

    options = ListProperty(('', ))
    '''
    :data:`options` defines the list of options that will be displayed when
    touch is released from this widget.
    '''

    def __init__(self, **kw):
        ddn = self.drop_down = DropDown()
        ddn.bind(on_select=self.on_select)
        super(ComboEdit, self).__init__(**kw)

    def on_options(self, instance, value):
        ddn = self.drop_down
        # clear old options
        ddn.clear_widgets()
        for option in value:
            # create a button for each option
            but = Button(text=option,
                        size_hint_y=None,
                        height='36sp',
                        # and make sure the press of the button calls select
                        # will results in calling `self.on_select`
                        on_release=lambda btn: ddn.select(btn.text))
            ddn.add_widget(but)

    def on_select(self, instance, value):
        # on selection of Drop down Item... do what you want here
        # update text of selection to the edit box
        self.text = value

class MainView(FloatLayout):

    rtsstr = StringProperty("".join(("Substrate1,,,Substrate1,,,Substrate1,,,",
                            "Substrate1,,,Substrate1,,,Substrate_coating",
                            ",,,silicon,,,silicon_Substrate,,,substrate_",
                            "silicon,,,")))

    def on_text(self, instance, value):
        if value == '':
            instance.options=[]
        else:
            match = re.findall("(?<=,{3})(?:(?!,{3}).)*?%s.*?(?=,{3})" % value,\
                                self.rtsstr, re.IGNORECASE)
            #using a set to remove duplicates, if any.
            instance.options = list(set(match))
        instance.drop_down.open(instance)

class TestApp(App):

    def build(self):
        return MainView()

if __name__ == '__main__':
    TestApp().run() 
```

# c# - 最小起订量 HttpWebRequest 对象

> ID：15193495
> 
> 赞同：3
> 
> 时间：2013-03-04T02:10:04.803
> 
> 标签：c#, mocking, moq

我想尝试 Moq 来模拟一个请求对象，以在我的测试用例中模拟网络故障等事情。我的第一次尝试是：

```
 var mock = new Mock<WebRequest>();
        mock.Setup(m => m.GetResponse()).Throws<WebException>();
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        //trying to get this to throw a web exception
        request.GetResponse(); 
```

这不起作用，所以我正在寻找正确的方法来做到这一点。

谢谢

编辑：正如评论中指出的那样，我想使用 WebRequest.Create （它实际上是在另一种方法中，但我已经为示例进行了简化）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T02:38:06.530

静态方法和工厂（如`WebRequest.Create`）对于单元测试来说很痛苦。一些这样的工厂方法允许拦截/自定义结果，有些则不允许。

最直接的解决方案是拥有自己的代码将依赖的工厂方法（最好以接口的形式）。

在某些情况下，您可以将已创建的对象传递给您的测试代码，而不是让代码创建自己的。

在特定情况下，`WebRequest.Create`您可以通过[WebRequest.RegisterPrefix](http://msdn.microsoft.com/en-us/library/system.net.webrequest.registerprefix.aspx)提供您自己的工厂。查看描述，您将需要使用其他一些自定义 Uri 方案，因为“http”/“https”已经注册并且不允许重复注册（我也从未尝试过这种方法）。

这是一个示例代码，它为控制台应用程序中的“http://”方案提供自定义创建者。如果其他东西已经注册了 http 方案，则此代码可能会失败`WebRequest`：

```
using System;
using System.Net;
namespace CustomWebRequest
{
    class Program
    {
        static void Main(string[] args)
        {
            var success = WebRequest.RegisterPrefix("http://", new CustomRequestCreator());
            Console.Write("Handler registered:{0}", success);

            var request = WebRequest.Create(new Uri("http://home.com"));
        }

        class CustomRequestCreator : IWebRequestCreate
        {
            public WebRequest Create(Uri uri)
            {
                Console.WriteLine("Custom creator");
                return null; // return your mock here...
            }
        }
    }
} 
```

# sql - How to query SQL for groups with the same values

> ID：15193505
> 
> 赞同：2
> 
> 时间：2013-03-04T02:10:56.000
> 
> 标签：sql, oracle

I have three Oracle database tables. I'll create a contrived example to make it a little easier:

A table of veterinarians ..

```
vid         name
1           Bob
2           Sally
3           Sue
4           Henry 
```

Specialties

```
spid    Animal

1       Dogs
2       Cats
3       Mice
4       Kangaroos
5       Koala Bears 
```

Advertising

```
id     vid   spid               Ad venue

1       1      1                 TV ads
2       1      2                 TV ads
3       1      2                 Magazine ads
4       2      1                 TV ads
5       2      1                 On line ads
6       3      5                 TV ads
7       4      5                 Magazine ads 
```

I'd like to get a result set of the first 3 vets that advertise just one speciality, for each specialty. It is possible that for some specialties, NO vet just advertises that one speciality. The 'vets' table has about 30,000 rows in it. The Specialties table just has 10 rows. The advertising table has about 100,000 rows. I know how to do queries and joins, but don't have an idea for how to find rows that are all the same within the group.

So I'm looking for output like this:

```
 Dogs          null
 Cats          Sally
 Mice          null
 Kangaroos     null
 Koala Bears   Sue, Henry 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:11:53.267

```
select
   max(animal) as animal,
   listagg(name, ', ') within group (order by name) as vet_list
from
   Specialties
   left join (
      select
         vid,
         max(spid) as spid,
         row_number() over(partition by max(spid) order by null) rn
      from Advertising
      group by vid
      having count(distinct spid) = 1
   ) using(spid)
   left join veterinarians using(vid)
where lnnvl(rn > 3)
group by spid
order by spid 
```

[fiddle](http://www.sqlfiddle.com/#!4/f9ef9/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:25:21.593

This gives you the vets who only advertise 1 specialty

```
SELECT vid
FROM advertising
GROUP BY vid
HAVING COUNT(*)=1 
```

This gives you all the vets with 1 specialty in each category

```
SELECT s.Animal, v.name
FROM Specialties s
     LEFT JOIN
     advertising a ON s.spid=a.spid
     LEFT JOIN
     veterinarians v ON a.vid=v.vid
WHERE a.vid IN (SELECT vid
                FROM advertising
                GROUP BY vid
                HAVING COUNT(*)=1) 
```

Now, you haven't specified what "first" means in this context - alphabetically, by id, something else? When you decide that, you can partition by this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:46:15.477

try the following :-

```
select vid
from (select distinct vid, spid
from advertising)
group by vid
having count(*) = 1; 
```

the above will give you a list of all those vets which have only 1 speciality. To get a list of the corresponding specialities, execute the following :-

```
select * from
(select s.spid,s.animal, a.vid,v.name,row_number() over (partition by s.spid order by a.vid) rn
from specialities s inner join advertising a
on s.spid=a.spid
inner join vets v
on a.vid=v.vid
and v.vid in (select vid
    from (select distinct vid, spid
    from advertising)
    group by vid
    having count(*) = 1)
order by s.spid
)
where rn <= 3; 
```

The above will not show those specialities which should have null output (according to your example). To get that list also, convert the last inner join to a left outer join.

# python - 将顶点作为单个数组获取

> ID：15193506
> 
> 赞同：4
> 
> 时间：2013-03-04T02:10:57.657
> 
> 标签：python, api, maya

我需要获取所有选定的顶点并将它们存储在一个数组中，这样我就可以遍历并找出有关每个顶点的信息。

虽然我无法弄清楚这一点。

```
sel = cmds.ls(sl=1)
print sel 
```

回报：

```
//[u'pCube1.vtx[50:53]', u'pCube1.vtx[74:77]'] 
```

我或多或少需要我的 'sel' 变量来打印出来：

```
pCube1.vtx[50]
pCube1.vtx[51]
pCube1.vtx[52]
pCube1.vtx[53]
pCube1.vtx[74]
pCube1.vtx[75]
pCube1.vtx[76]
pCube1.vtx[77] 
```

有谁知道如何做到这一点，而无需从字面上剥离字符串？我认为这是一种非常混乱的方式，我想知道是否还有另一种可能性！也许使用 OpenMaya 的 Maya API？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T02:19:13.653

好吧，看来研究得到了回报！

```
cmds.ls(sl=1, fl=1) 
```

'fl' 标志代表“Flatten”，Flatten 返回一个对象列表，以便单独识别每个组件。

# macos - 在 MAC 上安装 Rpy2

> ID：15193507
> 
> 赞同：1
> 
> 时间：2013-03-04T02:10:57.767
> 
> 标签：macos, r, easy-install, rpy2

我正在尝试使用 easy_install 在 OSX 上安装 Rpy2。 `sudo easy_install rpy2` 我收到一条错误消息：

`Running rpy2-2.3.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-du_3ue/rpy2-2.3.3/egg-dist-tmp-GqSaS7 "/Library/Frameworks/R.framework/Resources/bin/R" CMD config --ldflags /Library/Frameworks/R.framework/Resources/bin/config: line 142: make: command not found /Library/Frameworks/R.framework/Resources/bin/config: line 143: make: command not found R was not built as a library` 无效的子字符串`

`in string`

`error: Setup script exited with Problem while running` `"/Library/Frameworks/R.framework/Resources/bin/R" CMD config --ldflags`

我猜问题出在 R 上，因为它没有共享它的库。我正在使用 Python 2.7 和 R 2.15.2 请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T12:33:24.477

使用 macports ( [https://www.macports.org](https://www.macports.org) )安装

sudo 端口安装 py27-rpy2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T21:41:24.240

您肯定需要 XCode 命令行工具 -`make`默认情况下该命令不存在，而且奇怪的是，当前 XCode 默认不安装命令行工具。转到[https://developer.apple.com/downloads](https://developer.apple.com/downloads)（它会告诉您通过使用您的 Apple ID 登录来创建开发者帐户 - 不用担心，它是免费的，与 App Store 开发者许可证不同）。查找`Command Line Tools`您的 macOS 和 Xcode 版本，下载并运行安装程序。

# arraylist - 数组列表 应该参数化

> ID：15193513
> 
> 赞同：0
> 
> 时间：2013-03-04T02:11:45.193
> 
> 标签：arraylist

我正在尝试按照教程在 java 中制作滚动射击游戏。但是我不断收到此错误。我已经尝试了很多东西，但我无法让它工作！

有谁知道这段代码有什么问题？

```
public class PhysicsSystem {

private ArrayList bodies;

public PhysicsSystem() {
bodies = new ArrayList();
}

public void addBody(PhysicsBody body) {
bodies.add(body);
}

public void removeBody(PhysicsBody body) {
bodies.remove(body);
}

public void update(float delta) {
for (PhysicsBody body : bodies)
body.physicsUpdate(delta);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:14:57.297

我认为错误，您的意思是警告。

改变

```
private ArrayList bodies;
bodies = new ArrayList(); 
```

到

```
private ArrayList<PhysicsBody> bodies;
bodies = new ArrayList<PhysicsBody>(); 
```

# ruby-on-rails - 改进了 Rails 中 link_to 的使用？

> ID：15193515
> 
> 赞同：1
> 
> 时间：2013-03-04T02:12:00.700
> 
> 标签：ruby-on-rails, views

我的 Rails 应用程序在各种视图中多次使用此链接格式：

```
<li><a class="" href="#"><i class="icon-briefcase"></i> Reports</a></li> 
```

到目前为止，我已经使用这种格式对其进行了转换：

```
<li><%= link_to raw('<i class="icon-home"></i> Dashboard'), root_path %></li> 
```

我可以更进一步，以某种方式重构 li 和 i class="icon-home" 以清理代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:19:43.737

如果您在多个地方使用此辅助方法（DRY），则首选辅助方法。查看 jvnill 的答案。

如果你想要一条线，你去：

```
<%= content_tag(:li, link_to(content_tag(:i, nil, class: 'icon-home'), root_path)) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:14:19.380

你可以添加一个辅助方法

```
def menu_link(text, url, icon_class)
  content_tag :li do
    link_to url do
      content_tag(:i, '', class: icon_class) + text
    end.html_safe
  end
end 
```

然后只需调用它使用

```
<%= menu_link 'Dashboard', root_path, 'icon-home' %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T02:26:29.073

这要好得多：

```
= link_to new_resource_path, :class=>'btn btn-primary' do
  %i.icon-file-new
  Add Resource 
```

# javascript - JS中的正则表达式（从字符串中选择标签）

> ID：15193516
> 
> 赞同：0
> 
> 时间：2013-03-04T02:12:01.753
> 
> 标签：javascript, regex

我有这个字符串：

```
some description +first tag, +second tag (tags separated by commas)
+third tag +fourth tag (tags separated by space)
+tag from new line (it's just one tag)
+tag1+tag2+tag3 (tags can follow each other) 
```

如何从此字符串中选择所有标签名称？

1) 标签可以包含多个单词，2) 标签始终以 + 号开头，3) 标签以下一个标签、换行符或逗号结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:38:24.117

我试一试：

```
var str = "some description +first tag, +second tag\n" +
   "+third tag +fourth tag\n" +
   "+tag from new line\n" +
   "+tag1+tag2+tag3";
var tags = str.match(/\+[^+,\n\s].+?(?=\s*[\+,\n]|$)/g); 
```

这导致`tags`：

```
[ '+first tag',
  '+second tag',
  '+third tag',
  '+fourth tag',
  '+tag from new line',
  '+tag1',
  '+tag2',
  '+tag3' ] 
```

详细说明：

```
\+          // Starts with a '+'.
[^+,\n\s]   // Doesn't end immedatedly (empty tag).
.+?         // Non-greedily match everything.
(?=         // Forward lookahead (not returned in match).
  \s*       // Eat any trailing whitespace.
  [\+,\n]|$ // Find tag-ending characters, or the end of the string.
) 
```

# php - phpQuery 没有从 CSS 选择器中提取结果

> ID：15193517
> 
> 赞同：0
> 
> 时间：2013-03-04T02:12:11.123
> 
> 标签：php, jquery, css-selectors, phpquery

所以我有以下选择器：

```
#rso > li > div[class=vsc] > h3 > a.l 
```

当我在 Ruby 中使用它时它做得很好，但是当我在 php 中使用 phpQuery 尝试它时，它不会拉任何东西，

```
foreach(pq('#rso > li > div[class=vsc] > h3 > a.l') as $li) 
    { 
    echo $li;
    } 
```

任何帮助将不胜感激，因为我无法弄清楚这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:41:24.077

正如阿萨德所说 - 效果很好。不知道为什么，但它奏效了。

# c# - 无法从 MonoGame 获取目录中的文件列表

> ID：15193520
> 
> 赞同：0
> 
> 时间：2013-03-04T02:12:25.290
> 
> 标签：c#, io, xna, directory, monogame

当我遇到一个有趣的问题时，我正在将我的一个 XNA 项目移植到 Monogame 中。由于作为 Windows 8 用户，我的应用程序是沙盒的，因此我不能使用我习惯使用的 Directory.GetFiles 方法来提取内容目录中的文件列表。我的目标是获取内容目录中的文件列表，例如 (myappinstalllocation\Content\TypeofContent\XmlFiles)。

在 Xna 我会使用：

```
string[] skillFiles = Directory.GetFiles(path, "*.xml"); 
```

我从 msdn 尝试了以下代码，但异步方法有时会在几分钟内无法返回，有时根本不会：

```
string[] fileNames = SystemIO.getFileNames(path, "xml").Result;

public static async Task<string[]> getFileNames(string pPath, string pExt)
    {
        List<string> results = new List<string>();
        StorageFolder folder = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFolderAsync(pPath);

        IReadOnlyList<StorageFile> contents = await folder.GetFilesAsync();

        foreach (StorageFile file in contents)
        {
            if (file.FileType.Contains(pExt))
            {
                results.Add(file.Name);
            }
        }

        return results.ToArray();
    } 
```

我不知道 MonoGame 是否提供了一种获取文件名的方法，或者 WinStore API 是否提供。我想尽可能多地动态加载我的内容，所以我希望这是可行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:30:43.030

我认为你所看到的是一个僵局。在 UI 线程上使用`Task.Result`可以做到这一点。尝试`await`改用：

```
string[] fileNames = await SystemIO.getFileNames(path, "xml"); 
```

`await`是非阻塞的，并允许 UI 线程在您的调用`getFileNames`完成时执行其他操作。

查看 Stephen Cleary 关于该主题的优秀博客文章：http: [//blog.stephencleary.com/2012/07/dont-block-on-async-code.html](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)

# image - 使用输入图像提交 Web 表单时，IE 不会在缩放的桌面上缩放点击次数

> ID：15193524
> 
> 赞同：1
> 
> 时间：2013-03-04T02:13:01.260
> 
> 标签：image, forms, internet-explorer, input

我在使用 Web 应用程序时遇到了一些严重的问题。

我在 Web 表单上有一个提交图像（输入类型 = 图像）。我特意选择了这个，因为它一直存在并且所有浏览器都理解它

当然我们最喜欢的浏览器没有！如果您缩放桌面，请说明您是否有视力问题。IE 无法正确缩放点击次数

所以我们有一张图片，当用户点击图片时，表单被提交，点击的x和y坐标也被提交。在 IE 中，这些坐标没有正确缩放。IE 提交错误的坐标。Firefox（我没有测试过其他人）提交正确的比例坐标。

例如，如果图像大小为 100*100 像素，并且当有人单击图像的右下角时桌面缩放 150%，Firefox 返回 [100,100] 但 IE 返回 [150,150]，这与图像无关！

这对我来说有点碍事，我需要一种解决方法。如果有人有任何想法，将不胜感激。也许可以以某种方式返回比例因子，我可以自己计算比例并在应用程序中进行调整？

直流

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:01:56.343

我已经解决了这个问题

正如在放大输入图像时所解释的那样，Internet Exploder 无法发送正确的点击坐标。相反，它以像素为单位发送实际的点击坐标，这通常在真实的未缩放图像区域之外。

您不能（据我所知）从 javascript 访问点击坐标，它是在提交过程中自动分配和发送的。

解决方案是等到最后一刻并计算“缩放因子”将其发送到服务器，然后调整服务器上的坐标。

在表单中添加以下 javascript（假设为 jquery）

注意：deviceXDPI 从 ie 6 开始就已经存在

```
<script>
// return the screens scale factor used for IE
function getScaleFactorX(elem_id) {
    var nscalefactor = 1;
    try {
        if (screen.deviceXDPI){
            nscalefactor = screen.deviceXDPI / screen.logicalXDPI;
            $("#" + elem_id).val( nscalefactor );
        } else {
            $("#" + elem_id).val( 1 );
        }
    } catch (e) {
     // fail silently
    }
    return nscalefactor;
}
</script> 
```

添加合适的隐藏字段，将缩容带回服务器

```
<input type="hidden" id="scalefactor" name="scalefactor" value="1"> 
```

添加一个操作，以便在单击图像时计算比例因子

```
<input name="img"  type="image" src="image.png" width="400" height="200" alt="Please click" onclick="getScaleFactorX('scalefactor'); return true;" /> 
```

在图像 onclick 处理程序上执行此操作允许用户在加载表单之后和提交之前缩放屏幕。如果您过早填充此字段，用户可能会稍后缩放图像，并且比例因子将是错误的。

在服务器上

```
// scale the click points
                if ($scalefactor) {
                    $x = (int)($x / $scalefactor);
                    $y = (int)($y / $scalefactor);
                } 
```

这假设缩放在 x 和 y 方向上是相同的，这对于缩放的网页来说是一个好的假设。也会有舍入误差，所以如果你需要完美像素，你需要考虑到这一点

直流

# javascript - 减慢 JQuery ajax 调用？

> ID：15193525
> 
> 赞同：-3
> 
> 时间：2013-03-04T02:13:11.837
> 
> 标签：javascript, jquery, ajax, json

我正在为 jquery 开发一个 ajax 登录系统，一切似乎都运行良好，我的问题是我如何才能在成功显示 gif 加载图像之前减慢通话速度或暂停 x 秒？

代码：

```
$('.AJAX').on('submit', function(event) 
{
    event.stopPropagation();
    event.preventDefault();

    var This = $(this);
    var Data = {};

    This.find('[name]').each(function(Index, Value) {

    var This = $(this),
    Name = This.attr('name'),
    Value = This.val();

    Data[Name] = Value
});

$.ajaxSetup(
{
    beforeSend:function()
    {
        $('.Msg').html('<img src="../Assets/Pictures/Loading.gif" />');
    },
    complete:function()
    {
        $('.Msg').find('img').remove();
    }
});

$.ajax(
{
    url:'Log.php',
    type:'POST',
    data:Data,
    success:function(Data)
    {
        $('.Msg').html('<span style="color:red">' + Data + '</span>').hide().fadeIn('fast');
    });

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:42:05.887

您可以使用基本的 setTimeout 来延迟操作：

```
success:function(Data) {
  setTimeout(function(){
       $('.Msg').html('<span style="color:red">' + Data + '</span>').hide().fadeIn('fast');
  }, 5000); // wait 5 seconds before showing the message
}); 
```

仅供参考 jQuery [**.delay()**](http://api.jquery.com/delay/) 延迟效果队列中的效果。.html() 不是一种效果，因此它不会受到该方法的影响。

# html - CSS (3) & HTML 切边

> ID：15193526
> 
> 赞同：5
> 
> 时间：2013-03-04T02:13:12.490
> 
> 标签：html, css, css-shapes

这已经被问过了，但我需要以不同的方式。请查看下图以查看我尝试实现的导航栏：

![导航](../Images/e534f263c26e70c1bdde0614b2a3aa89.png)

问题：

*   边缘周围的阴影
*   栏内的文字/图像
*   图形周围的 1px 实心边框会很棒

当然，静态图像可以做到这一点，但我想使用其他东西。你有什么想法，怎么做（尽可能多的浏览器支持）？

**编辑：** `<nav>`绝对定位

这是我到目前为止所做的

![导航栏进度](../Images/f3bf7d21713d9e049edf4148941a1748.png)

但是不可能应用边框，固定大小也有问题。

```
 nav {
       float: left;
       position: absolute;
       background-color: #ffffff;
       top: 0;
       left: 0;
       display: inline;
       padding: 12px;
       padding-right: 0;
       width: auto;
    }

    .behind_nav {
       height: 60px;
       width: 523px;
       position: absolute;
       top: 0;
       left: 0;
       border-right: 20px solid transparent;
       border-top: 48px solid white;
    } 
```

`.behind_nav`落后`<nav>`（惊奇，惊奇）。实际上，除了上面提到的阴影和边框问题外，这很好用。它也绑定到一个固定值，这是有问题的。`<nav>`适合内容的宽度（可能因 CMS 数据/浏览器而异）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T02:33:17.113

粗略演示：http: [//jsfiddle.net/W82UV/3/](http://jsfiddle.net/W82UV/3/)

![在此处输入图像描述](../Images/180347925c1b877785c219b5f1e8d511.png)

我*认为*这涵盖了您的困难症结，即边缘倾斜、阴影和边框。

```
<div id="top">
    The top bar
</div>
<div id="container">
    <div id="background">        
    </div>
    <nav>
        Test
    </nav>
</div>

#top{  
    background-color: #f0f0f0;
    border-bottom: 1px solid #555;
    box-shadow: 8px 8px 8px #aaa;
}

#container {
    position: relative;
    top: -1px;
    overflow: hidden;
    height: 96px;
}

#background {
    background-color: #f0f0f0;

    position: absolute;
    top: -1px;
    left: -32px;
    border: 1px solid #555;

    width: 400px;
    height: 64px;
    box-shadow: 8px 8px 8px #aaa;

   -webkit-transform: skew(-20deg); 
   -moz-transform: skew(-20deg); 
   -o-transform: skew(-20deg);
   -ms-transform: skew(-20deg); 
   transform: skew(-20deg);
} 
```

在 IE 8（不倾斜）、9、10、FF 和 Chrome 中测试。请注意，我可能会重新排列标记以使最终解决方案更清晰（更好的类名和/或 ID），并按比例放置所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:19:35.400

看起来边缘的静态图像将是唯一的方法（除非您想获得技术并使用画布，但这会很愚蠢）。您可以使用旋转块获得有角度的边缘，但您会遇到阴影问题。不过，栏中的文本似乎不是问题 - 作为参考，这些导航栏通常实现为平面列表。

对不起，我不能提供更多帮助！

# c++ - 静态变量初始化

> ID：15193527
> 
> 赞同：0
> 
> 时间：2013-03-04T02:13:34.500
> 
> 标签：c++, static, singleton

我有一个实现单例的模板类：

```
template<typename T>
class Singleton {
     static Singleton const& get() const { return _instance; }
   private:
      Singleton();
      static Singleton _instance;
}; 
```

此模板有一些特化，例如 for`Type1`和`Type2`. 和它的构造函数有相互的调用`get()`。我看到一个问题。让我们假设`Singleton`of`Type1`是首先构造的：

```
Singleton<Type1>::Singleton() {
   Singletion<Type2>::get();
} 
```

所以`Singleton`of`Type2`还没有构建。将返回`get()`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:16:00.290

您需要在函数内部创建`_instance`a 。`static``get`

```
template<typename T>
class Singleton {
     static Singleton const& get() const {
       static Singleton _instance;
       return _instance;
     }
   private:
      Singleton();
}; 
```

这样，实例将在第一次`get`被调用时被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:48:27.863

循环依赖不好：

```
struct Singleton2;

struct Singleton1 {
     static Singleton1 const& get() {
       static Singleton1 _instance;
       return _instance;
     }
   private:
      Singleton1();
      Singleton2 const& _s2;
};

struct Singleton2 {
     static Singleton2 const& get() {
       static Singleton2 _instance;
       return _instance;
     }
   private:
      Singleton2();
      Singleton1 const& _s1;
};

Singleton1::Singleton1() : _s2(Singleton2::get()) { }
Singleton2::Singleton2() : _s1(Singleton1::get()) { }

int main()
{
    auto& s1 = Singleton1::get();
    auto& s2 = Singleton2::get();
} 
```

将导致失败（请参阅[http://liveworkspace.org/code/4rPFDo$0](http://liveworkspace.org/code/4rPFDo$0)）。

就像在所有需要打破循环的情况下一样，至少让链条中的一个环节变得***懒惰***。

通过在构造过程中不需要引用另一个单例，以明显的方式解决它：

```
struct Singleton2;

struct Singleton1 {
     static Singleton1 const& get() {
       static Singleton1 _instance;
       return _instance;
     }
   private:
      Singleton1() {}
      static Singleton2 const& getOther();
};

struct Singleton2 {
     static Singleton2 const& get() {
       static Singleton2 _instance;
       return _instance;
     }
   private:
      Singleton2() {}
      static Singleton1 const& getOther();
};

Singleton2 const& Singleton1::getOther() { return Singleton2::get(); }
Singleton1 const& Singleton2::getOther() { return Singleton1::get(); }

int main()
{
    auto& s1 = Singleton1::get();
    auto& s2 = Singleton2::get();
} 
```

或者使用 boost::optional、boost::flyweight 或自定义的“lazy_ptr”进行延迟初始化：[https ://stackoverflow.com/a/878298/85371](https://stackoverflow.com/a/878298/85371)

# openstack - 在 Myeclipse 中调试 Keystone 引发异常

> ID：15193529
> 
> 赞同：1
> 
> 时间：2013-03-04T02:13:54.200
> 
> 标签：openstack, keystone

我按照这个页面 [在 Eclipse 中设置 keystone](https://wiki.openstack.org/w/index.php?title=Setup_keystone_in_Eclipse&oldid=18278)，并调试 stable/folsom 的 keystone 分支，在我启动调试菜单后，控制台会这样写：

* * *

```
pydev debugger: starting
   Traceback (most recent call last):

   File "/usr/lib/python2.7/site-packages/eventlet/hubs/hub.py", line 336, in fire_timers timer()

   File "/usr/lib/python2.7/site-packages/eventlet/hubs/timer.py", line 56, in __call__
    cb(*args, **kw)

   File "/usr/lib/python2.7/site-packages/eventlet/semaphore.py", line 95, in _acquire  waiter.switch()

error: cannot switch to a different thread 
```

* * *

因此，我无法使用它进行调试。但是，当我在没有调试模式的情况下启动 i 时它运行良好。如果有人能给我一些关于如何使用任何 ide 或其他任何东西调试 keystone 源代码的建议，我真的很感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:55:04.430

使用下面提到的链接。在那一点上，他提到了如何在 eclipse 上设置环境变量以使用标准线程。我试过了，它奏效了。希望它也对你有用。

[http://adam.younglogic.com/2012/12/keystone-and-eclipse-pydev/](http://adam.younglogic.com/2012/12/keystone-and-eclipse-pydev/)

谢谢。

# java - 方法编译给出“缺少返回语句”错误

> ID：15193530
> 
> 赞同：0
> 
> 时间：2013-03-04T02:14:03.497
> 
> 标签：java

这种方法有什么问题？这不会编译。给出如下错误：rs 可能未初始化如果我在 try 块中使用“ResultSet rs”，则错误为：未找到变量 rs 如果 return 语句也在 try 块中，则错误为：缺少 return 语句。我不知道我做错了什么。请帮助修复此错误。谢谢

```
public ResultSet mqe( String q ){
ResultSet rs;
try{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
String db= "SS.mdb";
String database= "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+ db.trim()+ ";DriverID=22}";
Connection conn= DriverManager.getConnection( database,"","" );
Statement s= conn.createStatement();
rs=s.executeQuery(q);
s.close();
conn.close();
}catch(Exception ee){ ee.printStackTrace(); }
return rs;
}//mqe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:22:32.897

一般来说，资源获取和释放的模式是：

```
Resource res = acquire();
try {
    use(res);
} finally {
    res.release();
} 
```

或者在 Java SE 7 中：

```
try (Resource res = acquire()) {
    use(res);
} 
```

您不能做的事情（默认情况下）是从方法返回资源并期望它被某种魔法清理。您可能想查看 Execute Around 习语，尽管首先更好地理解基本原理可能是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:31:41.030

`ResultSet`您必须为每个可能的执行路径返回一个。就目前而言，如果`try`块成功，则不会返回任何内容。您可以向您添加一个`finally`块`try-catch`并`return null;`在其中放入一个块，或者`return rs;`它为空，因为您没有对其进行初始化。

```
public ResultSet mqe( String q ){
ResultSet rs;

    try{
    ...
    }catch(Exception ee){
       ee.printStackTrace(); }
       return rs;
    }finally
    {
       return rs;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:21:37.743

为了让您继续前进，请将其添加为方法的最后一行：

```
return null; 
```

至少你可以开始调试（你可能需要很多）。

# qtp - 对象存储库如何工作以及它如何更快？

> ID：15193536
> 
> 赞同：2
> 
> 时间：2013-03-04T02:14:29.817
> 
> 标签：qtp

在 QTP 中，有一个存储对象的对象存储库。并且这些对象可以重复使用。重用在这里意味着什么？该对象是否保存在内存中？....对象存储库只是一个 xml 文件，它存储对象的属性，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:56:18.073

对象存储库可以被认为是对象描述的存储库，而不是对象本身的存储库。QTP 使用对象存储库根据您指定的特征来识别运行时对象。当您第一次记录一些动作时，只存储默认的标识特征。您可以根据需要修改这些，例如，如果在运行时无法正确识别对象。您正确地说存储库实际上（“幕后”）只是一个 XML 结构，可以在编辑器中查看它。所指的“重用”意味着从不同的测试中，您可以引用同一个对象存储库，而您不必完成识别对象并将对象添加到测试存储库的工作。一个示例可能是两个使用 Web 应用程序中的数据表的测试。您可以只创建一个共享存储库并使用其中包含的数据表描述来驱动与该表的两个测试交互，而不是创建两个特定于测试的存储库。您可以使用第二种方法在运行时识别对象：正则表达式。在设计大型测试或测试集时，这些可能不太灵活，因为可维护性确实成为一个问题；但是 - 恕我直言，它们往往比使用对象存储库快一点。代码示例：您可以使用第二种方法在运行时识别对象：正则表达式。在设计大型测试或测试集时，这些可能不太灵活，因为可维护性确实成为一个问题；但是 - 恕我直言，它们往往比使用对象存储库快一点。代码示例：您可以使用第二种方法在运行时识别对象：正则表达式。在设计大型测试或测试集时，这些可能不太灵活，因为可维护性确实成为一个问题；但是 - 恕我直言，它们往往比使用对象存储库快一点。代码示例：

```
If Browser(“hwnd:=“ & browserTitle).Page(“url:=“ & pageUrl).Exist(0) then
   'Do something...
End If 
```

您可以将浏览器对象添加到存储库，或者只是使用上面的代码识别它。描述性编程是一种替代方案，但应谨慎使用，并且主要围绕检查点使用。事实上，您实际上可以在存储库的对象标识属性中使用正则表达式，但那是另一回事。如果您需要更多信息，请告诉我。

希望这有助于为您提供概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:05:37.037

对象可以重复使用意味着您可以在一个或多个测试中使用存储在对象存储库中的对象，并在同一测试中使用一次或多次。

例如：假设您有一个由 2 个应用程序共享的**登录**页面（并且您正在为这两个应用程序维护 2 个不同的测试脚本）。此页面包含用户名、密码和应用程​​序名称字段。

因此，对象存储库中的对象（Login_Page（父对象）和 Username、Password 和 Application_Name（子对象））可以由 2 个不同应用程序的脚本共享。

对象存储为测试的一部分（以**.mtr**格式 - 仅适用于包含脚本）和共享对象存储库（**.tsr**格式 - 可用于与其关联的任何脚本）。所以实际上它存储在本地系统或质量中心或共享网络路径上。

对象存储库以专有格式（.mtr 或 .tsr）存储，并且可以导出为 xml 格式。

与许多网站提到的相反，对象存储库的对象访问速度与其他方法（如使用 Set 方法、描述性编程等）相当。访问对象所花费的时间取决于存储库中对象的“深度”。

假设层次结构是 Browser > Page > Frame > Field1, Field2 ... 。

无论有多少浏览器对象，访问第 n 个浏览器对象所花费的时间几乎保持不变（它是“ *0 级深度*”。页面是“ *1 级深度*”）。同样适用于它的子对象。

我发现使用描述性编程和对象存储库设置值（例如 WebEdit 框）的时间差在 100 次迭代中约为 2 秒（描述性编程更快）。

此外，没有任何可用于 QTP 的官方文档提到脚本执行脚本会随着存储库大小的增长而受到影响。（我已经使用 194KB 和 38.5MB 的存储库大小对此进行了测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T18:39:30.243

该术语的使用`regular expressions`是错误的，他的意思是`descriptive programming`，在此选项中，您正在用异常快的测试执行换取相当慢和更困难的维护。

# android - 使用 OPEN NFC 模拟器 + Linux 操作系统

> ID：15193538
> 
> 赞同：0
> 
> 时间：2013-03-04T02:15:03.153
> 
> 标签：android, linux, fedora, open-nfc

我正在开发一个可以在 NFC 标签上读写的 Android 应用程序，我想知道我是否可以在 Linux 操作系统（特别是 fedora）上使用模拟器 OPEN NFC？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:16:50.740

是的，这是来自 open-nfc.org 的链接

[http://open-nfc.org/wp/editions/linux-edition/](http://open-nfc.org/wp/editions/linux-edition/)

还有一个安卓版本

[http://open-nfc.org/wp/editions/android/](http://open-nfc.org/wp/editions/android/)

编辑：

> Linux 版本要求：
> 
> 另一台运行 Windows 的机器使用连接中心和 NFC 模拟器。

显然，这同样适用于任何构建。他们提供的唯一 NFC 模拟器是一个 win32 可执行文件。不过，您可能可以在[Wine](https://fedoraproject.org/wiki/Wine?rd=AndreasBierfert/Wine)下运行它...

# angularjs - 取消嵌套 ng-click 调用之间的事件传播的最佳方法是什么？

> ID：15193539
> 
> 赞同：187
> 
> 时间：2013-03-04T02:15:11.647
> 
> 标签：angularjs

这是一个例子。假设我想要像很多网站一样叠加图像。因此，当您单击缩略图时，整个窗口上会出现一个黑色叠加层，并且较大版本的图像会在其中居中。单击黑色叠加层将其关闭；单击图像将调用显示下一张图像的函数。

的HTML：

```
<div ng-controller="OverlayCtrl" class="overlay" ng-click="hideOverlay()">
    <img src="http://some_src" ng-click="nextImage()"/>
</div> 
```

的JavaScript：

```
function OverlayCtrl($scope) {
    $scope.hideOverlay = function() {
        // Some code to hdie the overlay
    }
    $scope.nextImage = function() {
        // Some code to find and display the next image
    }
} 
```

问题在于，使用此设置，如果您单击图像，`nextImage()`则会`hideOverlay()`调用 和 。但我想要的只是`nextImage()`被调用。

`nextImage()`我知道您可以像这样在函数中捕获和取消事件：

```
if (window.event) {
    window.event.stopPropagation();
} 
```

...但是我想知道是否有更好的 AngularJS 方法来做这件事，它不需要我在覆盖层内的元素上的所有函数前面加上这个片段。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-03-04T02:30:49.547

@JosephSilber 说了什么，或者将 $event 对象传递给`ng-click`回调并停止其中的传播：

```
<div ng-controller="OverlayCtrl" class="overlay" ng-click="hideOverlay()">
  <img src="http://some_src" ng-click="nextImage($event)"/>
</div> 
```

```
$scope.nextImage = function($event) {
  $event.stopPropagation();
  // Some code to find and display the next image
} 
```

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2013-03-04T02:19:23.780

使用`$event.stopPropagation()`：

```
<div ng-controller="OverlayCtrl" class="overlay" ng-click="hideOverlay()">
    <img src="http://some_src" ng-click="nextImage(); $event.stopPropagation()" />
</div> 
```

这是一个演示：[http ://plnkr.co/edit/3Pp3NFbGxy30srl8OBmQ?p=preview](http://plnkr.co/edit/3Pp3NFbGxy30srl8OBmQ?p=preview)

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2013-11-07T20:52:58.893

我喜欢为此使用指令的想法：

```
.directive('stopEvent', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attr) {
            element.bind('click', function (e) {
                e.stopPropagation();
            });
        }
    };
 }); 
```

然后使用如下指令：

```
<div ng-controller="OverlayCtrl" class="overlay" ng-click="hideOverlay()">
    <img src="http://some_src" ng-click="nextImage()" stop-event/>
</div> 
```

如果你愿意，你可以让这个解决方案更通用，就像对另一个问题的回答一样：[https ://stackoverflow.com/a/14547223/347216](https://stackoverflow.com/a/14547223/347216)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-08-14T05:40:14.040

有时，这样做可能最有意义：

```
<widget ng-click="myClickHandler(); $event.stopPropagation()"/> 
```

我选择这样做是因为我不想`myClickHandler()`在使用它的许多其他地方停止事件传播。

当然，我本可以在处理函数中添加一个布尔参数，但`stopPropagation()`它的意义远不止`true`.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-09-01T08:48:54.840

这对我有用：

```
<a href="" ng-click="doSomething($event)">Action</a>

this.doSomething = function($event) {
  $event.stopPropagation();
  $event.preventDefault();
}; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-09-19T11:15:18.457

如果您不想将停止传播添加到所有链接，这也可以。更具可扩展性。

```
$scope.hideOverlay( $event ){

   // only hide the overlay if we click on the actual div
   if( $event.target.className.indexOf('overlay') ) 
      // hide overlay logic

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-21T02:56:15.497

如果您在模板的父元素上插入 ng-click="$event.stopPropagation"，stopPropogation 将在树上冒泡时被捕获，因此您只需为整个模板编写一次。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-07T02:41:58.143

```
<div ng-click="methodName(event)"></div> 
```

IN控制器使用

```
$scope.methodName = function(event) { 
    event.stopPropagation();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-22T09:41:38.213

您可以在其上注册另一个指令，`ng-click`以修改默认行为`ng-click`并停止事件传播。这样您就不必`$event.stopPropagation`手动添加。

```
app.directive('ngClick', function() {
    return {
        restrict: 'A',
        compile: function($element, attr) {
            return function(scope, element, attr) {
                element.on('click', function(event) {
                    event.stopPropagation();
                });
            };
        }
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-27T13:32:27.463

就我而言`event.stopPropagation();`，每次按下链接时都会刷新页面，因此我必须找到另一个解决方案。

所以我所做的是在父母身上捕获事件并阻止触发器，如果​​它实际上来自他的孩子，使用`event.target`.

这是解决方案：

```
if (!angular.element($event.target).hasClass('some-unique-class-from-your-child')) ... 
```

所以基本上你的父组件的 ng-click 只有在你点击父组件时才有效。如果你点击了孩子，它不会通过这个条件，也不会继续它的流程。

# c - 无法创建双精度数组

> ID：15193542
> 
> 赞同：2
> 
> 时间：2013-03-04T02:15:27.870
> 
> 标签：c, arrays, double

我正在尝试创建一个双打数组，我知道我可以这样做，

```
double a[200]; 
```

但为什么我不能创建一个这样的？

```
int b = 200;

double a[b]; 
```

这没用。

谁能帮我？

更新：

```
int count;
count = 0
while (fgets(line,1024,data_file) != NULL)
{
    count++;
}

double *x = (double *)malloc(count * sizeof (double));

double xcount = 1.0;

for (int i = 0; i < count; i++)
{
    x[i] = xcount/f;
    xcount = xcount + 1.0;
    printf("%lf\n", x[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:29:58.020

@DoxyLover 是完全正确的，此外，如果您想要使用一个常数作为数组的大小，您可以使用类似`#define kMaxN 200`或`const int kMaxN = 200`用于 C++ 的 marco。

如果你想在函数中分配一个数组，你可以像这样使用它

```
int foo(int n) {
  int a[n];
} 
```

或者，如果您想将多维数组作为参数传递，您可以使用

```
int foo(int n, int arr[][n]) {
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:19:53.643

C 不支持动态数组大小。您必须动态分配内存并使用指针。

```
int b = 200;

double *a;
a = malloc(b * sizeof (double)); 
```

在此之后，您可以访问 a ，就好像它是一个数组一样。

# django - django.contrib.messages.middleware.MessageMiddleware 错误

> ID：15193545
> 
> 赞同：1
> 
> 时间：2013-03-04T02:15:50.250
> 
> 标签：django, django-messages

这以前有效，但现在它给了我一个错误。我使用内置消息来显示错误、信息或成功消息。当数据导入失败时，系统必须执行 message.error 但它会产生错误。

**例外：**

```
Types:  MessageFailure

Value:  You cannot add messages without installing django.contrib.messages.middleware.MessageMiddleware 
```

当我在设置中间件中跟踪我的代码时，消息就在那里。

```
MIDDLEWARE_CLASSES = [
    'django.middleware.gzip.GZipMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    "django.core.context_processors.request",
)

INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.humanize',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.markup',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
] 
```

以下是捕获错误的代码：

```
try:
    .......
except Exception, e:
    code = '000'
    if hasattr(e, 'code'):
        code = e.code
    msg = 'No message returned from the server'
    if hasattr(e, 'msg'):
        msg = e.msg
    messages.error(
        request,
            'Error connecting to OFX server. URL: {0} ERROR: '
            '{1} {2}'.format(self.account.bank.ofx_url, code, msg))
    return ''
return req.text 
```

# php - 我可以使用 PEAR 在 Web 应用程序中包含模块吗？

> ID：15193552
> 
> 赞同：1
> 
> 时间：2013-03-04T02:16:36.433
> 
> 标签：php, web-applications, version-control, pear

我正在 LAMP 中创建一个网络应用程序。自从我上次在 PHP 中创建任何东西以来已经有一段时间了，那时我还不熟悉包管理和版本控制之类的东西。我将在我的应用程序中使用 MySQL，所以我在 PEAR 中找到了抽象层模块 MDB2。

我以前的经验告诉我，我应该能够将模块提取到`lib/`我的开发存储库中的子目录中，这样它就会出现在存储库的每个克隆中。但是 PEAR 安装到`/usr/share/php`.

我可以让 PEAR 提取到我的开发仓库吗？

还是我采取了错误的方法？我的基本问题是如何在我正在创建的应用程序中包含一个 PHP 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:53:49.627

您可以使用自定义配置文件将 PEAR 配置为安装到您想要的任何目录中：

```
$ pear config-create lib pear.cfg 
```

现在您需要告诉 pear 安装程序使用配置文件：

```
$ pear -c pear.cfg install mdb2 
```

就这样。

* * *

顺便说一句，如果您不需要深度抽象，我建议使用 PDO 作为数据库层。

# php - sql_autoload_register 和 __autoload 的区别？

> ID：15193555
> 
> 赞同：-2
> 
> 时间：2013-03-04T02:16:46.507
> 
> 标签：php

我总是这样写：

```
function __autoload($className){
   if(file_exists($className)){
       include $classname . '.class.php';
   }
} 
```

但我发现一些编码员是这样写的：

```
sql_autoload_register(function($className){
   $class = str_replace('\\', '/', $className);
   require_once($className);
}); 
```

所以，我想问一下sql_autoload_register和__autoload的区别，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:31:53.740

来自 PHP 文档[spl_autoload_register](http://php.net/manual/en/function.spl-autoload-register.php)。粗体部分可能会给您更多的想法。

> 使用 spl 提供的 __autoload 堆栈注册一个函数。如果堆栈尚未激活，它将被激活。
> 
> 如果您的代码具有现有的 __autoload() 函数，则必须在 __autoload 堆栈上显式注册此函数。这是因为 spl_autoload_register() 将通过 spl_autoload() 或 spl_autoload_call() 有效地替换 __autoload() 函数的引擎缓存。
> 
> 如果必须有多个自动加载函数，spl_autoload_register() 允许这样做。**它有效地创建了一个自动加载函数队列，并按照定义的顺序遍历它们中的每一个。相比之下， __autoload() 只能定义一次。**

*编辑：*这个答案应该有助于[https://stackoverflow.com/a/6894585/710827](https://stackoverflow.com/a/6894585/710827)

# asp.net - WebClient.DownloadData 从某个网址生成损坏的文件

> ID：15193558
> 
> 赞同：0
> 
> 时间：2013-03-04T02:16:51.153
> 
> 标签：asp.net, .net

我正在使用以下代码下载图像：

```
Dim strImageURL as string = "http://images.bookworld.com.au/images/bau/97817433/9781743315187/0/0/plain/the-storyteller.jpg"
Dim data As Byte()
Using client As New WebClient()
  data = client.DownloadData(strImageURL)
  'client.DownloadFile(strImageURL, "MyFile.jpg")
End Using
File.WriteAllBytes("\\mappedPath\Images\MyFile2.jpg", data) 
```

该代码在大多数情况下都可以正常工作，但是我们遇到了一个图像，该图像一旦保存就已损坏..

这是令人不安的网址：http: [//images.bookworld.com.au/images/bau/97817433/9781743315187/0/0/plain/the-storyteller.jpg](http://images.bookworld.com.au/images/bau/97817433/9781743315187/0/0/plain/the-storyteller.jpg)

我尝试使用上面的代码，然后是“client.DownloadFile”行，认为它们可能有不同的结果，但我不断收到损坏的文件。

我可以点击 URL，Chrome 可以很好地显示图像。我也可以将文件保存到我的本地机器上。但是使用上面的代码，我只是得到了这个特定 URL 的损坏的 .jpg 文件。

我怀疑该图像在某种图像服务服务上，并且可能无法正确发送某些内容..但我不确定..

我什至在 C# 中尝试了相同的代码来看看它会做什么，但我得到了相同的结果.. :-(

如果有人可以帮助解决这个问题，我将非常感激..

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:06:59.857

查看来自该特定 URL 的 Web 服务器的响应标头会显示`Content-Encoding:gzip`. 换句话说，它不是返回 jpg，而是返回 gzip。Web 浏览器足够聪明，可以自动解码 zip，但事实`WebClient`并非如此。请注意，gzip*不是*您的标准 .zip 或“PK zip”，因此不要尝试将文件命名为 .zip 并期望它能够解压缩。

可以`WebClient`自动解码 gzip 响应，但需要一些技巧 -[从 WebClient 解压缩 gzip 响应](https://stackoverflow.com/questions/4567313/uncompressing-gzip-response-from-webclient)

# javascript - Javascript：没有锚（哈希）部分的 document.url

> ID：15193562
> 
> 赞同：6
> 
> 时间：2013-03-04T02:17:20.660
> 
> 标签：javascript, url, get, window, anchor

我已经尝试搜索这个 30 分钟，所以如果已经被问到，我很抱歉。

我有一些 Ajax 返回一组结果，当单击一个结果时，它只是将带有附加数据的 URL 重新加载到 URL 以便 PHP 在下一页上获取。问题是，如果用户点击了一些内置的锚点（我无法删除），`something.com#location1`那么附加的 URL 将把`?action=next`它变成`something.com#location1?action=next`浏览器解释为长锚点的位置，而不是实际指向的新 URL。

如果用户从不点击锚点部分，则此重定向可以顺利使用`window.location=document.url+"?action=next"`

有没有办法从现有页面的 URL 中删除锚点（包括井号标签）？

**解决了**

使用[迈克尔 W 的答案](https://stackoverflow.com/a/15193653/713874)，我能够解决它。我只是替换了这一行：

`window.location=document.url+"?action=next"`

有了这个：

`window.location=document.location.href.match(/(^[^#]*)/)[0]+"?action=next"`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-30T03:56:54.447

这似乎稍微简单一些：

```
document.URL.replace(/#.*$/, "") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T02:30:55.583

您可以匹配该位置的标签前部分：

```
document.location.href.match(/(^[^#]*)/) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T02:28:10.750

位置对象可以由独立的组件访问，您可以使用这些组件来重建 URL，您可以根据需要使用任意多或尽可能少的部分。

官方文档目前处于离线状态，但[这个站点](http://www.javascriptkit.com/jsref/location.shtml)似乎有它。

如果这些是您正在生成的内部链接，您只需要生成一个相对 url，*甚至*可能就`location.pathname`足够了。

请注意，您将问题标记为 Javascript，但由于您使用 PHP 进行编码，我怀疑您需要在 PHP 端生成这些链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-18T11:51:00.547

我在用着：

```
document.location.href.split('#')[0]; 
```

它找到第一个哈希并忽略路径的其余部分。如果没有哈希，没问题。在这种情况下，它将采用整个路径。

# php - 下拉菜单未显示在某些页面上

> ID：15193563
> 
> 赞同：0
> 
> 时间：2013-03-04T02:17:35.340
> 
> 标签：php, html, css

我正在为客户开发一个网站，但不知道发生了什么——可能是看代码太久了。

就下拉菜单而言，您可以看到导航菜单正在此页面上工作：

[http://www.envisionforce.com/](http://www.envisionforce.com/)

但是，在此页面上，下拉菜单未显示：

[http://portal.envisionforce.com/](http://portal.envisionforce.com/)

知道需要改变什么来解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:22:20.503

最初的外观似乎表明第二个链接不包括所需的 JavaScript 文件。您是否忘记将菜单的 JavaScript 添加到每个页面？

看起来您正在加载`wp-content/themes/Minos/data/combined4963.js?ver=1.1`您的主页，而不是其他页面。该文件包含所需的菜单下拉 JavaScript。

**编辑：我已经确认这是问题，当通过开发控制台将该脚本添加到页面时，该站点可以正常工作。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:31:15.787

处理下拉菜单 ( `whmcs.js`) 的文件将行为绑定到元素的单击事件`.dropdown-toggle`和`a.menu`

```
jQuery("html").bind("click", function (e) {
jQuery('.dropdown-toggle, a.menu').parent("li").removeClass("open");
}); 
```

您在页面上的标记不包含这些元素。

```
<li id="menu-item-1966" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1966">
<a href="http://portal.envisionforce.com/cart.php">
<b>SERVICES</b>
</a> 
```

您需要将适当的类添加到`li`和`a`元素

**编辑： OP 做对了。忽略这个胡说八道。**

# git - 如何撤消主目录上的 git init？

> ID：15193565
> 
> 赞同：8
> 
> 时间：2013-03-04T02:17:40.287
> 
> 标签：git

我做了`git init`并且`git add .`在我的主目录上，我认为这减慢了每个操作，因为目录太大了。如何撤消`git init`主目录？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T02:19:43.800

您可以`rm -rf $HOME/.git`删除 git 存储的所有版本控制信息，这会撤消`git init`所做的一切。

但我非常怀疑跑步`git init`会减慢任何速度。

# php - 多次插入后更新特定记录 - 可能使用 last_insert_id()

> ID：15193573
> 
> 赞同：2
> 
> 时间：2013-03-04T02:19:35.110
> 
> 标签：php, mysql

我有一个使用 for 循环的多个插入（4 条记录）。然后，我想对在 path_allowed = 'y' 中插入的记录运行更新查询（4 个中只有一个具有此值）。我猜 last_insert_id() 在这里会很有用，但不确定如何使用它来更新插入以下内容的记录：

```
$pathway_allowed = intval($_POST['allowed']);
$action = mysql_real_escape_string($_POST['actions']);

if(isset($_POST['submit'])){ 

$pathway_comment = array();
foreach($_POST['comment'] as $comment) {
    $pathway_comment[]= mysql_real_escape_string($comment);
}
for($i=0, $count = count($pathway_comment);$i<$count;$i++) {
    $comment = $pathway_comment[$i];
    $query = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_action_fk,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$case_pk',
           '1',
           '$action',
           '%s',
           '$comment')", $pathway_allowed === $i ? 'y' : 'n');

       $result = mysql_query($query, $connection) or die(mysql_error());
}
if($result){
- SELECT the 4 records here...
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:27:49.107

在每次循环迭代中，将 存储`mysql_insert_id()`到一个数组中，以后可以使用它来选择新记录。请注意，我在这里`for`用更整洁的方式替换了您的增量循环`foreach`：

```
// Initialize arrays for later
// one for the new ids
$inserted_ids = array();
// one to keep comments from failed queries
$failed_comments = array();
// and one for the MySQL errors of failed queries
$errors = array();

foreach ($pathway_comment as $comment) {
    $query = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_action_fk,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$case_pk',
           '1',
           '$action',
           '%s',
           '$comment')", $pathway_allowed === $i ? 'y' : 'n');

       $result = mysql_query($query, $connection);

       // If the iteration was successful, save the insert id onto an array
       // but only if $pathway_allowed == 'y'
       if ($result) {
           if ($pathway_allowed == 'y') {
               $inserted_ids[] = mysql_insert_id();        
           }
       }
       // Otherwise, keep an array of comments that failed
       // Maybe useful later if you want to print those that failed
       else {
           $failed_comments[] = $comment;
           // And keep the mysql_error() as well.
           $errors[] = mysql_error();
       }
}
// Loop is done, now you can implode() the inserted ids array:
// These are all ints from an auto_increment PK, so no additional escaping needed
// Execute the query than do whatever you need with the newly inserted rows.
$query = "SELECT * FROM pathway WHERE pathway_pk IN (" . implode(",", $inserted_ids) . ")"; 
```

您之前可能听说过，但从长远来看，请考虑切换到支持预准备语句的 API，如 MySQLi 或 PDO。您已经在此处完成了所有必要的转义和整数转换，但是如果在循环中编译和执行准备好的语句会更快，而且不需要转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:40:18.883

> mysql_connect 扩展自 PHP 5.5.0 起已弃用，将来将被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此函数的替代方法包括：PDO 和 mysqli_connect()

如果您使用的是 PDO，则可以使用它。

```
$dbh = new PDO('mysql:host=localhost;dbname=test', 'username', 'password'); 
```

在 for 循环中，您执行以下操作：

```
$stmt = $dbh->prepare("INSERT INTO test (name, email) VALUES(?,?)");
$tmt->execute( array('user', 'user@example.com'));
$inserted_ids[] = $dbh->lastInsertId(); 
```

在循环之后，您将拥有一个包含 4 个插入 id 的数组

编辑：您不需要重新选择您输入的值，您可以使用它

```
IN FOR LOOP
{
    $stmt = $dbh->prepare($query = sprintf("INSERT INTO pathway (pathway_pk,case_fk,level,pathway_action_fk,pathway_allowed, comment)
    VALUES (
       '',
       '$case_pk',
       '1',
       '$action',
       '%s',
       '$comment')", $pathway_allowed === $i ? 'y' : 'n'););

        // change the values to bindParam 

    $stmt->execute( array('user', 'user@example.com'));
    $data[$i]['pathway_pk'] = $dbh->lastInsertId(); 
    $data[$i]['case_fk'] = $case_pk;
    $data[$i]['level'] = 1;
    $data[$i]['pathway_action_fk'] = $action;
    $data[$i]['pathway_allowed'] = %s;
    $data[$i]['comment'] = $comment;

} 
```

然后

```
foreach($data as $d){

    echo $d['pathway_pk'];
    echo $d['case_fk'];

} 
```

# ruby-on-rails - 如何在 resque 作业中使用 ruby -debugger？

> ID：15193583
> 
> 赞同：4
> 
> 时间：2013-03-04T02:20:22.810
> 
> 标签：ruby-on-rails, resque, ruby-debug

我正在寻找一个命令来启动一个工作进程，以便在作业的`perform`方法内部我可以调用`debugger`并将控制权交给命令提示符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:54:04.383

而不是调用`Resque.enqueue(Archive, self.id, branch)`（来自resque自述文件），我认为你应该能够调用`Archive.perform(self.id, branch)`. 这样做，您应该能够在工作人员内部使用调试器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-05T09:35:38.803

将以下行添加到您的 Rails 应用程序 Resque.inline = true 这将导致 resque 作业不入队，而是立即执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:57:24.560

我最终使用了[pry](https://github.com/pry/pry)而不是 ruby​​-debugger。奇迹般有效。几乎是爱尔兰的魅力！

# actionscript - 如何将一个movieclip的图形复制到另一个movieclip（adobe flash cs5）

> ID：15193584
> 
> 赞同：0
> 
> 时间：2013-03-04T02:20:25.183
> 
> 标签：actionscript, flash-cs5

如果我复制影片剪辑然后对其进行一些更改，以前的影片剪辑会受到影响，我如何编辑 2 个影片剪辑而不相互影响？在没有代码动作的 adobe flash 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:39:45.827

可能发生的情况是您有另一个 MovieClip 或内部由两个剪辑共享的符号。因此，当您编辑该符号时，它会在两个 MovieClips 中更新。

您可以创建子剪辑的副本并将其替换为其中一个 MovieClip（因此它们包含不同的符号），也可以将其拆分（如果您不需要将其作为符号）。然后，您对一个剪辑所做的更改不会影响另一个剪辑。

# c++ - 虚拟内存耗尽：无法分配内存

> ID：15193585
> 
> 赞同：14
> 
> 时间：2013-03-04T02:20:55.263
> 
> 标签：c++, json, compiler-errors, virtual-memory, wt

我在 ubuntu 12.10 上编译失败，可用内存为 300mb（总共 750mb，MySQL 为 350mb），1.5ghz，我正在尝试将 wt 的基本 hello world 文件重新编写为一个简单的 ajax 页面。我很确定这不是内存问题，因为我能够使用`g++ -O3 -o hello hello.C -lwtfcgi -lwt -lboost_signals`.

我确定我把 c++ 搞砸了，因为我`HelloApplication::HelloApplication(const WEnvironment& env) : WApplication(env)`从 Wt::Json 示例中取出并放入示例

```
HelloApplication::HelloApplication(const WEnvironment& env)
  : WApplication(env)
{
    Json::Object result;
    Json::parse("{ "
             "  \"a\": \"That's great\", "
             "  \"b\": true "
             "}",
             result);

    std::cerr << "Size: " << result.size(); << std::endl; // Size: 2
    WString s = result.get("a");
    bool b = result.get("b");
    std::cerr << "a: " << s << ", b: " << b << std::endl; // a: That's great, b: true
} 
```

我是 C++ 新手，所以我几乎不知道自己在做什么。我所能做的就是执行最简单的 c++ 文件。

[这是 hello world 文件](http://www.webtoolkit.eu/wt/src/hello)的原始来源。

这是我从中[获取 json 样本](http://www.webtoolkit.eu/wt/doc/git/reference/html/group__json.html)的地方。

** 影响**

哇，我对 c++ 的尊重程度刚刚达到顶峰。

这完全摧毁了我的 VPS。我无法重新启动。我什至无法重新安装我的发行版。

当我最终投入生产时，我想我将建立一个完全不同的开发系统，以防止这样的事情扼杀我的生产系统。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-01-17T10:44:25.020

作为一个潜在的快速解决方案：您可以通过以下方式减少内存使用量

```
make -j 1 
```

它告诉构建工具只使用一个 CPU。为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:07:26.730

由于您的编译因内存不足而失败，因此可能没有足够的内存来编译您的程序。这不可能是因为接受的答案中建议的“会话管理问题”。mysql吃的比它应该吃的多吗？300MB 足以编译 C++ 吗？

在 Wt 中服务 JSon（如 REST 接口）是通过绑定到 WServer 对象的 WResource 完成的。WApplication 用于交互式用户界面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-16T15:00:31.770

只需添加交换文件即可解决此问题！

// 创建一个 1 GB 的交换文件

1.  dd if=/dev/zero of=/swapfile1 bs=1024 count=1048576
2.  chown root:root /swapfile1
3.  chmod 0600 /swapfile1
4.  mkswap /swapfile1
5.  交换 /swapfile1

// 编辑 fstab 文件

1.  vi /etc/fstab

//在文件末尾追加以下行

1.  /swapfile1 无交换 sw 0 0

// 检查交换是否准备好

1.  免费-m

# android - 我无法让 ListActivity 显示

> ID：15193586
> 
> 赞同：0
> 
> 时间：2013-03-04T02:21:12.860
> 
> 标签：android

应用程序没有崩溃，但我只是得到一个空白页....如果您需要更多，请告诉我，如果我做错了，对不起似乎我必须添加更多信息，我真的不知道要添加什么可能是我有错误的导入还是什么？：

```
package com.eric.thebasics;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class TutorialTwo extends ListActivity {

String classNames[] = {"main", "menu", "Sweet", "TutorialOne"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(this,    android.R.layout.simple_list_item_1));
}

protected void onListItemClick(ListView lv, View v, int position, long id){
    super.onListItemClick(lv, v, position, id);
    String openClass = classNames[position];
    try{
        Class selected = Class.forName("com.eric.thebasics." + openClass);
        Intent selectedIntent = new Intent(this,selected);
        startActivity(selectedIntent);
    }catch (ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

}

这是按钮代码：

```
tut2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            buttonSound.start();
            startActivity(new Intent("com.eric.thebasics.TUTORIALTWO")); 
```

这是明显的：

```
<activity
        android:name=".TutorialTwo"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.eric.thebasics.TUTORIALTWO" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:29:07.380

尝试这个

```
 setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, classNames)); 
```

您从未将您的 classNames 添加到 ArrayAdapter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:30:20.653

只需使用类型安全的 .class 引用，而不是字符串。尝试

```
startActivity(new Intent(ActivityLaunchingFrom.this, TutorialTwo.class)) 
```

将 ActivityLaunchingFrom 替换为您开始另一个活动的实际名称。您必须使用“限定 this”语法，因为否则`this`指的是`onClickListener`.

如果你真的想要数组中的类，那么就让它成为一个类数组，比如

```
 Class[] classes = {Main.class, Menu.class, TutorialTwo.class}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:27:28.880

可能 Intent 中的 TutorialTwo 都是大写的，名字不是

```
 tut2.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        buttonSound.start();
        startActivity(new Intent("com.eric.thebasics.TutorialTwo")); 
```

# html - 集成引导程序和 Typeplate

> ID：15193593
> 
> 赞同：3
> 
> 时间：2013-03-04T02:21:55.163
> 
> 标签：html, css, twitter-bootstrap

我想使用 Twitter bootstrap 作为前端框架和 Typeplate 进行排版。

可以从以下 URL 下载相应的框架并免费使用。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) [http://typeplate.com/](http://typeplate.com/)

两个框架中都定义了少数 HTML 元素的 CSS 类（例如，HTML、body、h1）

我在 Typeplate 网站上运行了 Firebug，看到了 font-family 和 font-size 等计算字段的值......即使我在我的网站中为 css 使用相同的值（即使在删除引导 css 之后），我也无法获得打字机的排版。

我在 twitter bootstrap 之后使用 typeplate。

请指教。

基本上我想在下面的代码中合并应用于文本“快乐王子”的属性

```
<html class="no-js wf-ffmetaserifwebpro-i7-active wf-ffmetaserifwebpro-i5-active wf-ffmetaserifwebpro-n5-active wf-ffmetaserifwebpro-n7-active wf-active">
<head><style>
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary
{
    display: block;
}
html
{
    font-family: sans-serif;
    -ms-text-size-adjust: 100%;
}
body
{
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
}
h1
{
    font-size: 2em;
    margin-top: 0.67em;
    margin-right: 0px;
    margin-bottom: 0.67em;
    margin-left: 0px;
}
html
{
    line-height: 1.65;
    font-family: serif;
    font-size: 112.5%;
    font-style: normal;
    font-variant: normal;
    font-weight: normal;
    font-size-adjust: none;
    font-stretch: normal;
}
body
{
    color: #444444;
    word-wrap: break-word;
}
h1, h2, h3, h4, h5, h6
{
    line-height: 1;
    margin-top: 0px;
}
h1, .alpha
{
    font-size: 3.33rem;
    margin-bottom: 0.49rem;
}
h1, h2, h3, h4, h5, h6
{
    color: #222222;
}
body
{
    margin-top: 6em;
    margin-right: auto;
    margin-bottom: 6em;
    margin-left: auto;
    max-width: 34em;
    background-image: url("../img/subtle_grunge.png");
    background-attachment: scroll;
    background-repeat: repeat;
    background-position-x: left;
    background-position-y: top;
    background-size: auto;
    background-origin: padding-box;
    background-clip: border-box;
    background-color: transparent;
}
.wf-active body, .wf-inactive body
{
    font-family: "ff-meta-serif-web-pro",serif;
    font-weight: 400;
    visibility: visible;
}

</style></head>
<body><section><article><header>

<h1>
 The Happy Prince
</h1>

</header></article></section></body></html> 
```

"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:54:52.203

如果我是你，我会尝试使用自定义构建的引导框架，排除“**规范化和重置**”、“正文**类型和链接**”和“**标题、正文等**”。

# svn - 乌龟svn中的导出功能

> ID：15193594
> 
> 赞同：-1
> 
> 时间：2013-03-04T02:21:59.240
> 
> 标签：svn, tortoisesvn

我正在使用最新版本的乌龟 svn。我已经从我的小公司的存储库中签出了代码文件。我对之前从 tortoise svn 签出的代码文件进行了很多更改。

现在，我正在与之合作的一家公司希望我给他们提供没有颠覆挂钩的代码文件。

我知道我可以使用该`export`功能从签入存储库的文件中删除颠覆挂钩。但是，我正在使用的代码文件不在存储库中。

因此，您能告诉我如何从属于我的工作站的代码文件中删除颠覆挂钩吗？我是否需要将此代码检查到 subversion 的不同分支中，然后执行导出功能？

你能告诉我实现目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:00:48.583

我认为您将钩子（服务器上的脚本）与工作副本元数据（`.svn`目录或目录，如果您的客户端是 1.6.x 或更早版本）混淆了。

如果这个假设是正确的，您可以从工作副本中导出 红皮书，通过示例[告诉您如何操作。](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)

基本上从你的工作副本做一个 `svn export . ~/exported-working copy`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T11:30:38.187

Subversion hooks 只不过是`hidden`由 tortoise 创建的文件夹，名为`.svn`.
您可以手动删除这些文件夹，然后就可以使用所需的内容了。

# jquery - 价值是“未定义的”我有什么问题？

> ID：15193597
> 
> 赞同：1
> 
> 时间：2013-03-04T02:22:21.360
> 
> 标签：jquery, html

这是我的HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd"
    >
<html lang="en">
<head>
    <title>Setlist</title>
    <style type="text/css">
    body{ }
    </style>
</head>
<body>
<script  type="text/javascript" src="javascripts/jquery-1.9.1.js"> </script>

<!-- Site navigation menu -->
<ul class="navbar">

</ul>

<button href="#" type="button" id="toggle">File Tools</button>
<div id="tools">

    <P>Add a Set list:<br>
        <LABEL for="labelName">Set List Name: </LABEL>
              <INPUT type="text" name="slName" id="slname"><button id="createSL" value="Create Setlist">Create Set</button>
        </P><br>
    <P>Delete a Set list: (need to add functionality)<br>
        <? include("remSLcombo.php"); ?> <button href="#" type="button" id="delSl">Delete Setlist</button>
    </P>

</div><BR>

<? include("combo.php"); ?>

    <script  type="text/javascript">
         $( document ).ready(function(){
            $('#tools').hide();
            $("#tunelist").change(function(e){

                var test = $(this).val();
                $.ajax({
                    type: "POST",
                    url: "new.php",
                    data: { database : test },
                    error: function(e){
                        alert(e.status);
                    },
                    success: function(response){
                        $('#display').html(response);
                    }

                });

            /*$(function(){
                setInterval(function(){
                    $("#setlist").load("new.php");
                }, 1 * 1000);
            });*/
            });

            // toggles the slickbox on clicking the noted link  
            $('#toggle').click(function() {
                $('#tools').toggle(400);
                return false;
            });

            $('#createSL').click(function(){
                var sendIt = $("#slName").val();
               $.ajax({

                    type: "POST",
                    url: "createSL.php",
                    data: {slName : sendIt},
                    error: function(e){
                        alert("The PHP Call failed!  hmmm");
                        alert(e.status);
                    },
                    success:  function(response){
                        alert(response);
                    }

                }); 
            });

        });

    </script>

<div id= "display">
</div>
</body>
</html> 
```

在函数中，当我单步执行该函数时`$('#createSL').click(function()`，值会`sendIt`显示。`undefined`我究竟做错了什么？我是否遗漏了指向 div 的指针或其他内容？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:27:04.043

ID 属性在使用选择器时区分大小写，尝试将输入的 ID 属性更改为“slName”（大写 N）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:39:37.780

jquery 的选择器区分大小写，试试这个： var sendIt = $("#slname").val();

# android - 操作栏微调器自定义

> ID：15193598
> 
> 赞同：8
> 
> 时间：2013-03-04T02:22:22.143
> 
> 标签：android, drop-down-menu, android-actionbar, spinner, customization

我正在尝试将 android actionbar spinner 自定义为类似于 google currents 应用程序的东西。基本上，只有“副标题”应该反映我从微调器中选择的内容，而“标题”保持不变。我知道需要创建一个自定义微调器，并且我必须覆盖 `getView()`and`getDropDownView()`方法。但是我在这里对如何正确覆盖这些方法感到非常困惑。有人可以将我推向正确的方向吗？我希望我把我的问题说清楚了。

[![图片截图](../Images/ac51728d2fd5000016950a75e720db2b.png)](https://i.stack.imgur.com/Jy6Lh.jpg)
[（来源：[androidcowboy.com](http://androidcowboy.com/wp-content/uploads/2012/12/google-currents-3a.jpg)）]

下面给出的是我的代码。

```
public class CustomSpinnerAdapter extends BaseAdapter {

private LayoutInflater inflater;

private final Context context;
private final String[] dropDown;
private final String mainText;
private final String subText;

public CustomSpinnerAdapter(Context context, 
        String mainText, String subText,String[] dropDown) {

    inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    this.mainText=mainText;
    this.subText=subText;
    this.context = context;
    this.dropDown=dropDown;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View actionBarView = inflater.inflate(R.layout.custom_spinner, null);
    TextView textView = (TextView) actionBarView
            .findViewById(R.id.custom_spinner_textview);
    textView.setText(mainText);
    return actionBarView;
}

@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {

    View dropDownView = inflater.inflate(R.layout.custom_spinner, null);
    TextView dropDownTextView = (TextView) dropDownView
            .findViewById(R.id.custom_spinner_dropdown_textview);

    dropDownTextView.setText(dropDown[position]);
    return dropDownView;

}
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T11:57:18.447

我解决了。

我的适配器类列表：

```
public class AdapterBaseMaps extends BaseAdapter {

Context context;
int layoutResourceId;
ArrayList<ObjectLayers> data;
LayoutInflater inflater;

public AdapterBaseMaps(Context context, int textViewResourceId,
        ArrayList<ObjectLayers> data) {
    // super(a, textViewResourceId, data);
    this.data = data;
    inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.context = context;
    this.layoutResourceId = textViewResourceId;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View actionBarView = inflater.inflate(R.layout.ab_main_view, null);
    TextView title = (TextView) actionBarView
            .findViewById(R.id.ab_basemaps_title);
    TextView subtitle = (TextView) actionBarView
            .findViewById(R.id.ab_basemaps_subtitle);
    title.setText(context.getResources()
            .getString(R.string.label_cartravel));
    subtitle.setText(data.get(position).getLayerName());
    return actionBarView;

}

@Override
public View getDropDownView(int position, View convertView, ViewGroup parent) {
    View actionBarDropDownView = inflater.inflate(
            R.layout.ab_dropdown_view, null);
    TextView dropDownTitle = (TextView) actionBarDropDownView
            .findViewById(R.id.ab_basemaps_dropdown_title);

    dropDownTitle.setText(data.get(position).getLayerName());

    return actionBarDropDownView;

}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

} 
```

ab_main_view.xml 清单：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/ab_basemaps_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:textSize="20sp"
    android:textColor="@color/White" />

<TextView
    android:id="@+id/ab_basemaps_subtitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ab_basemaps_title"
    android:text="TextView"
    android:textColor="@color/White"
    android:textSize="13sp" />

</RelativeLayout> 
```

ab_dropdown_view.xml 清单：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/ab_basemaps_dropdown_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="20sp"
    android:padding="5dp"
    android:textColor="@color/White" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T02:38:44.177

第一个答案很有帮助，但 Adapter 子类是不必要的。

在@user1624587 的答案中定义 XML，然后简单地引用它`public boolean onCreateOptionsMenu(Menu menu)`：

```
 ArrayAdapter<CharSequence> someAdapter = new
        ArrayAdapter<CharSequence>(context, R.layout.ab_main_view, 
        android.R.id.text1, getResources().getStringArray(R.array.some_array));

    someAdapter.setDropDownViewResource(R.layout.ab_dropdown);

    MenuItem item = menu.add("SomeTitle").setActionView(R.layout.some_spinner);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS); //or whatever

    someSpinner = (someSpinner) item.getActionView();
    someSpinner.setAdapter(someAdapter);
    ...etc 
```

# ruby - 使用二级扩展类的方法

> ID：15193604
> 
> 赞同：-1
> 
> 时间：2013-03-04T02:23:15.273
> 
> 标签：ruby, inheritance, mixins, class-method

我正在尝试使用由该类扩展的类扩展的方法。我正在尝试做的一个例子：

```
class A
  def foo
    "Foobar"
  end
end

class B
  extend A
end

class C
  extend B
end

B.foo #=> "Foobar"
C.foo #=> "Foobar" 
```

我不确定这种类型的功能在 Ruby 中是否可用。我知道这可以通过更改`extend`为`include`in来实现`B`，但我希望在 in 和 in 中作为类方法可用的`A`方法。`B``C`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:31:20.933

`extend`并且`include`用于模块；据我所知，您不能将模块与`extend`and一起使用`include`（实际上 Ruby 会引发错误）。相反，您应该将 A 定义为一个模块，然后将`extend`B 和 C 与 A 一起定义。请参阅John Nunemaker的[RailsTips 文章](http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)以更好地处理此设计模式。`extend``include`

另一种选择是让 B 和 C 从 A 继承，如下所示：

```
class A
  def self.foo
    "Foobar"
  end
end
class B < A; end
class C < B; end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:31:49.140

```
class A
  def self.foo
    "Foobar"
  end
end

class B < A
end

class C < B
end 
```

# javascript - 如何在 HTML 中隐藏和显示表单的输入元素

> ID：15193605
> 
> 赞同：1
> 
> 时间：2013-03-04T02:23:18.190
> 
> 标签：javascript, html

假设我有一个包含一些文件字段的表单：

```
 <form action="" method="post" enctype="multipart/form-data" id="form">
        <h3>Ask </h3>
        <p></p>
            <div>
            <p><label for="id_title">Topic</label>:<p>
            <p><input id="id_title" type="text" name="title" maxlength="300" /><p>
            </div>
            <div>
            <p><label for="id_pic">Picture</label>:<p>
            <p><input type="file" name="pic" id="id_pic" /><p>
            <p><button type="button">Add more pictures</button></p>
            </div>
            <div>
            <p><label for="id_pic_1">Picture 1</label>:<p>
            <p><input type="file" name="pic_1" id="id_pic_1" /><p>
            </div>
            <div>
            <p><label for="id_pic_2">Picture 2</label>:<p>
            <p><input type="file" name="pic_2" id="id_pic_2" /><p>
            </div>
            <div>
            <p><label for="id_pic_3">Picture 3</label>:<p>
            <p><input type="file" name="pic_3" id="id_pic_3" /><p>
            </div>
            <div>
            <p><label for="id_pic_4">Picture 4</label>:<p>
            <p><input type="file" name="pic_4" id="id_pic_4" /><p>
            </div>
            <div>
            <p><label for="id_description">Details</label>:<p>
            <p><textarea id="id_description" rows="10" cols="40" name="description"></textarea><p>
            </div>
            <button type="submit">Submit</button>
        </form> 
```

最初，我想隐藏 pic_1、pic_2、pic_3 和 pic_4，直到用户单击 pic 下的按钮。我认为 javascript 可以做到这一点，但我是 javascript 新手。

谁能给我一些指导？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:39:27.923

使用 CSS 隐藏图像

```
.hide-me {
    display: none;
 } 
```

现在在这样的之间包含 jQuery：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

现在在脚本标签之间（最好在页面末尾）：

```
<script>
$(document).on('ready', function () {

    $(.hide-me').show();

});
<script> 
```

这只是告诉 jQuery，一旦页面被加载，你想用 .hide-me 类显示图像

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:45:17.950

# 简短的回答

为您的“添加更多图片”按钮提供一个名为`add-more`. 然后，将此代码添加到您的页面之前`</body>`：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
    // Hide the additional photo uploads
    var $additionals = $("#id_pic_1, #id_pic_2, #id_pic_3, #id_pic_4");
    $additionals.hide();
    // Show more photo uploaders when we click 
    $("#add-more").on("click", function() {
        $additionals.show();
    });
});
</script> 
```

# 长答案

[jQuery](http://jquery.com/)是一个 JavaScript 库，它使这些事情*更*容易处理。它无处不在而且很有帮助，以至于有些人（包括我自己，在我学习的时候）认为 jQuery*就是*JavaScript。

在您的页面上包含指向它的链接以获取 jQuery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

在我们做任何其他事情之前，让我们给按钮一个 ID，以便我们以后可以引用它。让我们调用我们的按钮`add-more`。

```
<button type="button" id="add-more">Add more pictures</button> 
```

现在，让我们在页面中添加一些我们自己的 JavaScript。您可能应该将它放在一个单独的文件中，但是您可以在 jQuery 内容*之后*`<script>`将以下内容放在标签中：

 *```
$(document).ready(function() {

    // This code is inside of the "document ready" stuff because it
    // will execute AFTER all of the HTML stuff has been loaded.

    // First, let's find all of the additional things we want to hide
    // initially. We COULD do this with CSS but then browsers without
    // JavaScript couldn't upload more photos.
    var $additionals = $("#id_pic_1, #id_pic_2, #id_pic_3, #id_pic_4");

    // Okay, so now we have all of those in a variable called $additionals.
    // Variables don't have to start with a $, but because jQuery uses that,
    // I like to prefix my jQuery-selected elements with a dollar sign.
    // Let's hide them now!
    $additionals.hide();

    // When we click the button with the ID "add-more", show the other stuff.
    $("#add-more").on("click", function() {
        $additionals.show();
    });

}); 
```*

# html - 怎么做 鼠标悬停时下拉

> ID：15193606
> 
> 赞同：6
> 
> 时间：2013-03-04T02:23:23.510
> 
> 标签：html, css, details-tag, summary-tag

任何人都可以帮助我如何使用css在鼠标悬停时制作详细信息下拉列表

这是html代码

```
<details>
  <summary>Sample</summary>

Details of sample
</details> 
```

当鼠标悬停在它上面时，我需要一个 CSS 代码让它下拉，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T03:36:59.920

tepkenvannkorn 的解决方案有效，但在这种情况下您不需要使用 JavaScript。

**HTML**

```
<div id="summary">Sample</div>
<div id="detail">Detail of this summary</div> 
```

（请注意，摘要先于细节）

**CSS**

```
#summary:hover + #detail, #detail:hover {
  display: block;
}
#detail {
  display: none;
} 
```

[http://jsfiddle.net/vSsc5/1/](http://jsfiddle.net/vSsc5/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-01T16:36:04.587

看起来这有点旧，但看起来这两个答案并没有直接解决 HTML5 `details`/`summary`就像你问的那样。不幸的是，在 CSS 中没有办法做到这一点——你可以为*不*支持`details`/的浏览器*做到*`summary`这一点，但对于支持它的浏览器则不行。

 *可悲的是，使这项工作跨浏览器的唯一方法是通过 JavaScript。您在 上添加`open`属性`mouseover`，然后在 上删除它`mouseout`。这是一个片段（对不起jQuery）：

```
$(function() {
  $('details').on('mouseover', function() {
    $(this).attr('open', true);
  }).on('mouseout', function() {
    $(this).attr('open', false);
  })
}); 
```

这对键盘用户不起作用；你必须有点花哨。该`details`元素需要一个`tabindex="0"`属性，以便可以导航到它，并且您需要同时监听`mouseover`/`mouseout`和`focus`/ `blur`。不幸的是，当有 a时， Chrome（至少 v37）会`summary`从标签顺序中删除元素，甚至添加 a也不能解决这个问题。奇怪的。`details``tabindex``tabindex``summary`

这是一个活生生的例子：[http ://codepen.io/pdaoust/pen/fHybA](http://codepen.io/pdaoust/pen/fHybA)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-03T11:07:07.200

这是一个（Theriot 的变体）解决方案，更接近原始问题“如何在鼠标悬停时使 <'details'> 下拉”。请参阅 HTML 中的注释。

**HTML**

```
 <details open>
      <summary>Title</summary>
      <div id="uniqueDetailsDiv">
Be sure to set the attribute 'open' within the 'details' element, and use a 'div' or another tag
to support a unique 'class' or 'id' name such as 'uniqueDetailsDiv'
      </div>
  </details> 
```

**CSS**

```
#uniqueDetailsDiv
  {display: none;}
details:hover #uniqueDetailsDiv
  {display: block;} 
```

该解决方案有两个缺点：

1.  您不能永久打开“详细信息”（鼠标悬停不是鼠标按下），
2.  它与摘要上的“单击”行为冲突（单击永久隐藏详细信息，单击两次以重新建立“悬停”行为）

但这个问题不需要任何特殊的“点击”（它的替代品）。这种替代方法在台式机上可能很有用。对于触摸屏设备，常规的“细节”行为可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T02:35:07.643

试试这个：

**HTML：**

```
<div id="summary">Sample</div>
<div id="detail">Detail of theis summary</div> 
```

**CSS：**

```
#summary {
    background: #666;
    width: 100px;
    color: #fff;
}

#summary:hover {
    cursor: pointer;
    color: #fff200;
}

#detail {
    width: 300px;
    height: 300px;
    background: #fff200;
    display: none;
} 
```

**JavaScript：**

```
$(document).ready( function() {
    $('#summary').hover( function() {
        $('#detail').toggle();
    });
}); 
```

在这里查看我的[jsfile](http://jsfiddle.net/KWdfm/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-16T07:06:06.247

我有一个时间表列表，该列表也包含详细信息。

我希望鼠标移到它上面以自动扩展它并在它移动到不相关区域时自动关闭它。

这是我的代码

```
// auto-open-details.js

function getDetails(mouseEvent) {
  let target = mouseEvent.target
  if (target.tagName === 'SUMMARY') {
    target = target.parentNode
  }
  if (target.tagName !== 'DETAILS') {
    return  // Using return without a value will return the value undefined.
  }
  return target
}

(
  ()=>{
    const detailsCollection = document.getElementsByTagName('details')

    for (let [key, details] of Object.entries(detailsCollection)){
      details.onmouseover = (mouseEvent) => {
        const target = getDetails(mouseEvent)
        if (typeof target != "undefined") {
          target.open = true
        }
      }   
    }

    document.addEventListener('mouseover', (mouseEvent)=>{
      for (let [key, details] of Object.entries(detailsCollection)){
        if (details.matches(':hover')){
           return // Don't use "continue" since its subelement needs to show.
        }
        details.open = false
      }
    })  
  }
)();
```

```
<!DOCTYPE html>
<head>
  <!-- Bootstrap is not necessary. I just want to make the example look better. -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- <script defer src="auto-open-details.js"></script> -->
</head>

<article class="row">
  <section class="col-md-4 offset-md-1">
    <details>
      <summary>2021 <small class="text-muted">(5)</small></summary>
      <details>
        <summary>04 <small class="text-muted">(3)</small></summary>
        <ul>
          <li>
            <div>
              <a href="#">Post 1</a>
              <small class="text-muted">
                <time>2021-04-15</time>
              </small>
            </div>
          </li>
          <li>
            <div>
              <a>Post 2</a>
              <small class="text-muted">
                <time>2021-04-12</time>
              </small>
            </div>
          </li>
          <li>
            <div>
              <a>Post 3</a>
              <small class="text-muted">
                <time>2021-04-01</time>
              </small>
            </div>
          </li>
        </ul>
      </details>
      <details>
        <summary>03 <small class="text-muted">(2)</small></summary>
        <ul>
          <li>
            <div>
              <a>Request</a>
              <small class="text-muted">
                <time>2021-03-30</time>
              </small>
            </div>
          </li>
          <li>
            <div>
              <a>Ajax</a>
              <small class="text-muted">
                <time>2021-03-29</time>
              </small>
            </div>
          </li>
        </ul>
      </details>
    </details>
  </section>
  <section class="col-md-4 offset-md-1">
    <details>
      <summary>2020 <small class="text-muted">(2)</small></summary>
      <details>
        <summary>12 <small class="text-muted">(1)</small></summary>
        <ul>
          <li>
            <div>
              <a>Post 1</a>
              <small class="text-muted">
                <time>2021-12-15</time>
              </small>
            </div>
          </li>
        </ul>
      </details>
      <details>
        <summary>11 <small class="text-muted">(1)</small></summary>
        <ul>
          <li>
            <div>
              <a>Post 2</a>
              <small class="text-muted">
                <time>2021-11-29</time>
              </small>
            </div>
          </li>
        </ul>
      </details>
    </details>
  </section>
</article>
```*

# c++ - Qt QTreeWidget 一一添加项目

> ID：15193607
> 
> 赞同：1
> 
> 时间：2013-03-04T02:23:30.623
> 
> 标签：c++, qt, user-interface, qtreewidget, qtreewidgetitem

这是我的代码

```
QList<QString> IPs;  //IP address
...
connect(this, SIGNAL(addItems(QTreeWidgetItem*)), this, 
              SLOT(addNewItemToTree(QTreeWidgetItem*)));

void MainWindow::startPing()
{        
    for (int i = ipStart; i <= ipEnd; i++)
    {           
        QTreeWidgetItem *item = new QTreeWidgetItem();
        item->setText(0, IPs.at(i));
        if (PingHost(IPs.at(i)))
        {
            item->setText(1, "online");

        }
        else
        {
            item->setText(1, "offline");
        }
        emit addItems(item);
    }
}

void MainWindow::addNewItemToTree(QTreeWidgetItem *item)
{
    items.append(item);
    ui->treeWidget->addTopLevelItem(item);
} 
```

`PingHost`是一个函数，它的运行时间可能超过 2 秒。

我编译并运行了这个程序，没有任何错误或警告。

我想`item`会`treeWidget`一一添加（添加了一项，2秒后会添加另一项。）

但是，当我运行它时，我发现`Item`经过漫长的等待后，所有内容都已添加一次。为什么？

如何`items`按照我的想法添加这些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:39:05.950

您阻塞 GUI 线程的时间过长。理想情况下，您应该在另一个线程和 PingHost 中执行 PingHost，当结果可用时发送信号。然后你在主窗口中有一个 SLOT 来在收到信号时添加项目。

如果你坚持做你现在正在做的事情，你可以尝试在每个循环结束时更新 treeWidget。见[QWidget::update()](http://qt-project.org/doc/qt-4.8/qwidget.html#update)

# html - 将图像上传到现有的 HTML5 画布

> ID：15193610
> 
> 赞同：2
> 
> 时间：2013-03-04T02:24:03.743
> 
> 标签：html, canvas, kineticjs

我有一个带有设置背景图像的画布。然后，您可以在画布顶部添加文本，并且它是可拖动的。我希望用户也能够上传可拖动（最终可调整大小）的图像以添加到画布中。

我现在的代码如下：

```
var URL = window.webkitURL || window.URL;

window.onload = function() {
    var input = document.getElementById('input');
    input.addEventListener('change', handleFiles, false);
}

function handleFiles(e) {
    var ctx = memestage.getContext('2d');
    var url = URL.createObjectURL(e.target.files[0]);
    var img = new Image();
    img.onload = function() {
        img.add(bg);
        ctx.drawImage(img, 5, 5);    
    }
    img.src = url;

} 
```

任何建议将不胜感激。可应要求提供更多信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:56:14.040

这是在您的身份证上绘制学生姓名和照片的 KineticJS 代码。

学生可以在卡片周围拖动他们的姓名和照片。

照片不可调整大小，但我已缩放照片以适合您卡片的照片区域。如果您更改卡片布局，您可以轻松调整 KineticJS 图像对象中的宽度/高度。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/9jTtb/](http://jsfiddle.net/m1erickson/9jTtb/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
<style>
#container{
  border:solid 1px #ccc;
  margin-top: 10px;
}
</style>        
<script>
$(function(){

    var stage = new Kinetic.Stage({
        container: 'container',
        width: 472,
        height: 286
    });

    var layer=new Kinetic.Layer();
    stage.add(layer);

    var preload=[];
    var images=[];
    preload.push("http://dl.dropbox.com/u/139992952/idcard.png");
    // I use a demo photo here
    // Of course in your live site, you would use URL.createObjectURL
    preload.push("http://macmcrae.com/wp-content/uploads/2009/07/bubblebobble.jpg");
    preloadImages(preload,init);

    function init(images){
        KImage("background",0,0,472,286,false,layer,images[0]);
        KImage("Photo",284,105,160,160,true,layer,images[1]);
        KText("Name",50,190,"Verdana",27,"black",true,layer,"Sam Student");
    }

    // image preloader
    function preloadImages(sources,callback){
        var images=[];
        var count=0;
        for(var i=0;i<preload.length;i++){
            images[i]=new Image();
            images[i].onload=function(){
                if(++count==preload.length){
                    callback(images);
                }
            }
            images[i].src=preload[i];
        }
    }

    // build the specified KineticJS Image and add it to the stage
    function KImage(id,x,y,width,height,isDraggable,layer,img){
        var kImg=new Kinetic.Image({
            image:img,
            id:id,
            x:x,
            y:y,
            width:width,
            height:height,
            draggable:isDraggable
        });
        layer.add(kImg);
        stage.draw();
    }

    // build the specified KineticJS Text and add it to the stage
    function KText(id,x,y,font,fontsize,color,isDraggable,layer,text){
        var kText=new Kinetic.Text({
            text:text,
            id:id,
            x:x,
            y:y,
            fontFamily:font,
            fontSize:fontsize,
            fill:color,
            draggable:isDraggable
        });
        layer.add(kText);
        stage.draw();
    };

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
    <img id="test"/>
</body>
</html> 
```

**[编辑以回答 OP 的附加请求]**

我查看了您的代码，但找不到任何 php 上传脚本，所以这是一般的想法。

我假设您已经在 php.ini 中设置了配置，尤其是这些：

*   文件上传=真；
*   上传最大文件大小=2M；// 或您希望用户上传的任何最大大小
*   post_max_size=8M；

我假设您已经创建了一个文件夹来保存您上传的文件并授予网络服务器所有权（或足够的权限）。下面的代码假设子目录是“uploads”。

然后下面的 PHP 代码将上传您的用户的图像，并使用与用户原始文件相同的名称将其存储在“uploads”目录中。

您仍然必须修改此代码以进行您认为必要的任何边界/错误检查。就个人而言，我至少会这样做：

*   $_FILES 不为空，它是一个数组
*   $_FILES 报告没有发生错误
*   文件名仅包含这些英文字符 [0-9][AZ][.]
*   文件名不超过250个字符
*   文件不为空
*   文件不大于upload_max_size
*   文件具有以下扩展名之一：.jpg、.jpeg、.gif、.png // 或您接受的任何扩展名
*   文件不存在 // 添加逻辑以覆盖或退出
*   捕获上述测试失败的例程

php 部分如下所示：

```
<?php

var $uploadDirectory="uploads/";  // or whatever dir you set up
var $maxFileSize=1000000;         // or whatever max-size you allowed

// assuming 'file' is the name of your input-type-file tag

// oops, got an error
if ($_FILES["file"]["error"] > 0){echo "Error occured: " . $_FILES["file"]["error"] . "<br>"; }

// get filepaths
var $tempfile=$_FILES["file"]["tmp_name"];
var $basefile=basename($_FILES['file']['name']);

// save the user's file
move_uploaded_file( $tempfile, $uploadDirectory . $basefile );

// do whatever other postback stuff you need to do

?> 
```

HTML 表单将是这样的：

```
<form action="upload.php" enctype="multipart/form-data" method="post">
    <input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
    <input type="file" name="file"/>
    <input type="submit" name="submit" value="upload" />
</form> 
```

# database - 使用 Active Record 模式会导致显着的内存膨胀吗？

> ID：15193629
> 
> 赞同：0
> 
> 时间：2013-03-04T02:27:38.353
> 
> 标签：database, design-patterns, activerecord, memory-management, language-agnostic

我正在研究活动记录和数据映射器设计模式之间的区别。想到的一个简单问题是，随着每个活动记录实例中持久性方法的重复，这不会导致大量不必要的内存使用吗？还是可以忽略不计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:42:15.043

面向对象的编程语言方法通常存在于类级别，而不是对象级别。这意味着一个对象是一个类的实例，并且在调用（或发送，取决于语言）时，`object.foo`它实际上是指回类并在对象的上下文中调用该类的方法。（这可以通过多种不同的方式来完成，我没有资格深入写。）

想象一下，如果每个实例或其继承者都有该方法的副本，那么流行语言中的`ToString`//开销！`toString``to_s``Object`

因此，要回答您的问题，对于包含 Active Record 类的*类*上存在的方法，没有不必要的内存使用。

# java - java中的嵌套循环

> ID：15193630
> 
> 赞同：0
> 
> 时间：2013-03-04T02:27:47.237
> 
> 标签：java, nested-loops

我正在尝试制作一条应如下所示的对角线：

```
*
 *
  *
   *
    *
     *
      *
       *
        * 
```

我必须使用嵌套循环，并且我正在使用一个名为 Java 的程序准备好使用 java 进行编程。这是我的代码，它很接近，但我似乎无法弄清楚如何使它成为对角线。

```
// The "E006" class.
import java.awt.*;
import hsa.Console;

public class E006
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();
        int i, j;
        for(i = 1; i <= 1; i++)
            for(j = 1; j < 10; j++)
                c.println("*");

    } // main method
} // E006 class 
```

我确信这是非常简单的事情，但我才刚刚开始，所以我不太确定该怎么做。我必须使用嵌套循环（循环内的循环）。

如果有人可以帮助我，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:35:31.090

这听起来像是一项学校作业，所以我不会为你解决它。这里有一些提示：

*   您需要打印空格，而不仅仅是星号
*   您需要在每行打印更多空格
*   你的第一个 for 循环只执行一次，循环发生一次有什么好处
*   如果缩进更好，您的代码会更容易阅读。即使不需要，也要在 for 循环周围使用括号。

* * *

```
int i, j;
for(i = 1; i <= 1; i++){
    for(j = 1; j < 10; j++){
        c.println("*");
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:34:43.610

第一个循环应该超过您要打印的 * 行项目的数量。第二个内部循环应在打印星号之前打印空格。我真的没有看到嵌套循环的用途。但如果你必须使用它们：

```
for (int i = 0; i < lineSegments; i++) { 
   int whitespaces = 0;
   for (int j = 0; j < whiteSpaces; j++)
       Console.print(" ");
   Console.print("*\n");
   whitespaces++;
   Console.flush();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:35:11.303

```
public class Hehh{
    public static void main(String[] args){
    int i, j;
        for(i = 0; i < 9; i++){
        for(j = 0; j <= i; j++){
                if(j == i) System.out.println("*");
                else System.out.print(" ");
            }
    }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:38:39.757

您只需要使用正确的循环结构。你有比较部分很好，只是将迭代器向下移动到从 0 开始，因为它更自然地解决这个问题。

您也应该在进行过程中构建字符串。

```
// The "E006" class.
import java.awt.*;
import hsa.Console;

public class E006
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
    c = new Console ();
    final int NUM_ROWS = 10 // set this for number of rows
    int i, j;
    for(i = 0; i < NUM_ROWS; i++) {
        String thisLine = "";
        for(j = ; j < i; j++) {
            thisLine += " ";
        } // inner loop
        thisLine += "*";
        c.println(thisLine);
    } // outer loop

    } // main method
} // E006 class 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-04T02:33:33.123

我认为这是您的意图（未经测试）：

```
// The "E006" class.
import java.awt.*;
import hsa.Console;

public class E006
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console();
        int i, j;
        for(i = 0; i < 10; i++) {
            for(j = 0; j < i; j++) {
                c.print(" ");
            }
            c.println("*");
        }
    } // main method
} // E006 class 
```

为什么它（应该）起作用？在第一个循环 (i=0) 中，它循环 0 次打印空格，然后添加一个带有换行符的星号（println 在末尾添加一个换行符）。下一个循环，它在星号前打印一个空格，下一个打印 2，依此类推。

ps 这是作业吗？你应该标记它。

# jenkins - 使用 cloudbees 在本地（提交之前）运行测试

> ID：15193632
> 
> 赞同：1
> 
> 时间：2013-03-04T02:28:09.190
> 
> 标签：jenkins, clojure, cloudbees, compojure

我已经用 cloudbees 创建了一个 compojure 网络应用程序 - 到目前为止设置非常棒。我只是想知道如何在将测试推送到詹金斯开始构建之前在本地运行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:58:56.730

想通了：lein test

（我会留下这个，因为 cloudbees 使用 SO 作为他们的博客）。

# javascript - 使用 ember-data.js 的正确设置

> ID：15193634
> 
> 赞同：0
> 
> 时间：2013-03-04T02:28:24.407
> 
> 标签：javascript, ember.js

为了让 Emberjs 与 ember-data.js 一起工作，我实际上需要哪些版本的各种库？这很令人沮丧。

我有最新的 ember.js 来自

[http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js](http://cloud.github.com/downloads/emberjs/ember.js/ember-latest.js)

和最新的 ember-data.js 来自

[http://cloud.github.com/downloads/emberjs/data/ember-data-latest.min.js](http://cloud.github.com/downloads/emberjs/data/ember-data-latest.min.js)

和最新的 handlebars.js 来自

[http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.min.js](http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.min.js)

和 jQuery 1.8.3 来自

[http://code.jquery.com/jquery-1.8.3.min.js](http://code.jquery.com/jquery-1.8.3.min.js)

它给了我很多错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:33:39.470

你应该使用：

1.  jQuery 1.8.3 或更高版本。您现在拥有的应该可以正常工作。
2.  Handlebars.js 从[Handlebars.js 网站](http://handlebarsjs.com/)构建，目前为 1.0.0-RC.3。
3.  Ember.js 从[Ember.js 网站](http://www.emberjs.com/)构建，目前为 1.0.0-RC.1。
4.  Ember Data 的当前版本。[目前，您必须使用GitHub tracker](https://github.com/emberjs/data)上的 README 中的说明自己构建它。

# java - .jar 文件中的图标路径

> ID：15193637
> 
> 赞同：0
> 
> 时间：2013-03-04T02:28:49.783
> 
> 标签：java, image, swing, jar, embedded-resource

我的问题是，我的 JFrame 的图标在 Eclipse 中工作，但没有它就无法工作。

如果 txtIcon.png 在 .jar 文件中，我不知道我必须使用什么图标路径。

```
this.setIconImage(new ImageIcon("txtIcon.png").getImage()); 
```

请帮我。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:52:50.363

这是很常见的问题

`ImageIcon(String)`假定该`String`值表示文件系统上的一个文件。资源`Jar`不是文件。

为了加载驻留在 Jar 文件中的资源，您需要使用`getClass().getResource(String)`.

尝试将其更改为`new ImageIcon(getClass().getResource("/txtIcon.png"))`，假设`txtIcon.png`位于 Jar 的顶级/默认文件夹中

# jquery-ui - JQuery-UI可拖动重置到原始位置

> ID：15193640
> 
> 赞同：14
> 
> 时间：2013-03-04T02:29:35.230
> 
> 标签：jquery-ui, draggable, droppable

这可能很容易做到，但我总觉得太复杂了。

我刚刚使用#draggable / #droppable 设置了一个简单的测试，具有固定的宽度/高度+浮动：左。

然后，我希望重置按钮能够在 #draggable 被捕捉到 #droppable 后将其重置为其原始状态。（底线）

```
$(document).ready(function() {

    $("#draggable").draggable
    ({  
        revert: 'invalid',
        snap: '#droppable',
        snapMode: 'corner',
        snapTolerance: '22'

    });
});

    $("#droppable").droppable
    ({
        accept: '#draggable', 
        drop: function(event, ui) 
        {
            $(this).find("#draggable").html();
        }
});

    $(".reset").click(function() {
    /* What do I put here to reset the #draggable to it's original position before the snap */
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-16T13:49:40.143

我在一个项目中使用了这个

```
$("#reset").click(function () {
    $(".draggable-item").animate({
        top: "0px",
        left: "0px"
    });
}); 
```

为我做了伎俩

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-04T02:38:08.000

可拖动项目不会跟踪我所知道的原始位置；仅在拖动过程中并被弹回。不过，您可以自己执行此操作：

```
$("#draggable").data({
    'originalLeft': $("#draggable").css('left'),
    'origionalTop': $("#draggable").css('top')
});

$(".reset").click(function() {
    $("#draggable").css({
        'left': $("#draggable").data('originalLeft'),
        'top': $("#draggable").data('origionalTop')
    });
}); 
```

[http://jsfiddle.net/ExplosionPIlls/wSLJC/](http://jsfiddle.net/ExplosionPIlls/wSLJC/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-15T15:19:34.513

我刚刚在以下方面取得了巨大成功：

```
$(".draggable-item").removeAttr("style"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-18T12:50:15.270

我使用了 h0dges 的基本思想。我创造的球回到了原来的位置，但我失去了把它们变成球的样式。因此，我保留了球的样式，只是重置了它们的顶部和左侧样式以将它们恢复到原来的位置：

```
function endRound() {
   $(".ball").css({"top":"", "left":""});
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-15T22:34:42.480

我发现以下是重置到原始位置的最简单方法，但是如果您希望项目保持拖动，这将无法单独工作

```
$(".draggable-item").removeAttr('style'); 
```

这对我有用，可以重置到原始位置并保持项目可拖动：

```
$("#reset").click(function () {
    // Reset position
    $(".draggable-item").removeAttr('style');

    // Destroy original draggable and create new one
    $(".draggable-item").draggable("destroy");
    $(".draggable-item").draggable();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-15T23:09:53.210

我不确切知道人们希望看到什么，但我对通过单击垂直或水平将对象重置为初始位置做了一些改动。`Fiddle` [https://jsfiddle.net/JunaidAli/wp1n796q/321/](https://jsfiddle.net/JunaidAli/wp1n796q/321/)

# testing - 使用评估数据集评估方法的难度

> ID：15193647
> 
> 赞同：1
> 
> 时间：2013-03-04T02:30:32.207
> 
> 标签：testing, weka, instances

我读到了当训练数据集和评估不同（即不包含相同数量的属性或无序）时 weka 显示的兼容性问题，我也遇到了这些问题，但现在对我来说问题不同：

我使用一个包含 23 个实例和一个评估的训练文件，打开训练文件，选择 Naïve Bayes 方法并按下开始，到目前为止一切顺利，但是当我想评估并选择评估文件方法时，没有 weka 承认文件中包含的请求，但是 weka 识别属性的数量......

我点击开始并评估实例，但软件生成的报告显示没有实例，因此混淆矩阵显示没有分类实例，谁能帮我解决这个问题？

# facebook - C# Facebook SDK：用图片创建事件

> ID：15193649
> 
> 赞同：1
> 
> 时间：2013-03-04T02:30:47.770
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, image-uploading

我正在使用 C# Facebook SDK 从我的 ASP.Net 应用程序在 Facebook 上做几件事。

我能够成功创建一个活动，但我想用我网站上的图片设置活动的“海报”图片。这是我尝试过的，但事件是在没有图像的情况下创建的：

```
var client = new FacebookWebClient(fbAccessToken);
var arguments = new Dictionary<string, object>();

arguments.Add("name", event.Name);
arguments.Add("start_time",  event.Start.ToString("s", System.Globalization.CultureInfo.InvariantCulture));
arguments.Add("picture", "http://www.mysite.com/images/myEventImage.png");

client.Post("/me/events/", arguments); 
```

这甚至可能吗？我假设这是因为这个人声称他正在使用 PHP：

[http://hasin.me/2011/09/29/working-with-facebook-events-using-graph-api-part-1/](http://hasin.me/2011/09/29/working-with-facebook-events-using-graph-api-part-1/)

但我无法在我的网络应用程序上做到这一点。

谢谢你的时间！

# javascript - 获取用户输入以在 JavaScript 中创建文本三角形

> ID：15193651
> 
> 赞同：0
> 
> 时间：2013-03-04T02:30:51.387
> 
> 标签：javascript, function

所以我想要有 2 个文本字段，用户可以在其中选择在创建三角形时使用的符号。所以用户输入一个尺寸，比如 4，然后选择`#`第一行并输入任何符号作为第二行，它看起来像这样：

```
#
gg
###
gggg 
```

我只用 1 个预设符号将所有行设为：

```
#
##
###
#### 
```

我只是不知道如何设置它，以便用户选择要呈现的那个，有什么帮助吗？这是我的代码[http://jsfiddle.net/u6mjm/2/](http://jsfiddle.net/u6mjm/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:01:49.720

您错过了第二个值的获取：

```
var secondChoice = customJS.get("secondChoice").value; 
```

您也可以更改`createLine`为接受第二个参数，即要打印的符号。要确定哪个符号，只需检查是否`i % 2`为真：

```
var oneLine = createLine ( i, i % 2 ? firstChoice : secondChoice ); 
```

[http://jsfiddle.net/ExplosionPIlls/u6mjm/3/](http://jsfiddle.net/ExplosionPIlls/u6mjm/3/)

# jquery - 错误地将 JSON 返回给客户端 MVC

> ID：15193654
> 
> 赞同：1
> 
> 时间：2013-03-04T02:31:06.070
> 
> 标签：jquery, asp.net-mvc

我正在点击控制器，但是当我回到 javascript 时，返回的 JSON 格式不正确以填充选择列表。它以名称“System.Data.Entity.DynamicProxies.Course_C81CDD1DDC4D486F471F64D1F95990CD35185‌​07F0B5BB9F718C0910A56B73D12”和每门课程的 Value=null 的形式返回。从控制器出来的数据很好并且查询正确，所以我的javascript代码有问题

这是我的控制器：

```
public JsonResult GetCourses(int facilityId)
{
    return Json(GetCoursesSelectList(facilityId), JsonRequestBehavior.AllowGet);
}

private SelectList GetCoursesSelectList(int id)
{
    var Courses = db.Courses.Distinct().Where(a => a.FacilityId == id).ToList();
    SelectList list = new SelectList(Courses);
    return list;
} 
```

这是我的 JavaScript 函数：

```
$("#ddlFacility").change(function () {
            var selectedFacility = $(this).val();

            if (selectedFacility != null && selectedFacility != '') {
                $.getJSON("@Url.Action("GetCourses")", { facilityId: selectedFacility }, function (courses) {

                    var coursesSelect = $('#ddlCourse');
                    coursesSelect.empty();
                    $.each(courses, function (index, course) {
                        alert(course.Course_Name);
                        coursesSelect.append($('<option/>', {
                            value: course.CourseId,
                            text: course.Course_Name
                        }));
                    });
                });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:46:46.927

您不需要将 Courses 转换为 SelectList - 它会将其转换为 SelectList，然后将其转换为 JSON 对象，而 JQuery 不会按照您想要的方式解析。一个简单的`IEnumerable<Course>`将正确转换。将您的控制器操作更改为以下内容应该可以解决您的问题：

```
 private IEnumerable<Course> GetCoursesSelectList( int id )
  {
    return db.Courses.Distinct().Where(a => a.FacilityId == id).ToList();
  } 
```

**编辑：**创建工作测试应用程序，从控制器填充下拉列表

风景：

```
@{
    ViewBag.Title = "Index";
}

<select id="ddlCourse"></select>

<script>
    $.getJSON("@Url.Action("GetCourses")", { facilityId: 1 }, function (courses) {            
        var coursesSelect = $('#ddlCourse');
        coursesSelect.empty();
        $.each(courses, function (index, course) {               
            coursesSelect.append($('<option/>', {
                value: course.CourseId,
                text: course.Course_Name
            }));
        });
    });
</script> 
```

控制器：

```
 public class HomeController : Controller
   {
      public static IEnumerable<string> items = new List<string>() { "abc", "1234" };

      public ActionResult Index()
      {
         return View( "Index" );
      }

      public JsonResult GetCourses( int facilityId )
      {
         return Json( GetCoursesSelectList( facilityId ), JsonRequestBehavior.AllowGet );
      }

      private IEnumerable<Course> GetCoursesSelectList( int id )
      {
        return db.Courses.Distinct().Where(a => a.FacilityId == id).ToList();
      }
   } 
```

# c - 在 Windows 中启用主题的 C 代码

> ID：15193656
> 
> 赞同：1
> 
> 时间：2013-03-04T02:31:15.150
> 
> 标签：c, visual-studio-2010, visual-studio, winapi, themes

我在下面有一个小代码，假设在 Windows 7 中启用/禁用主题。这是我使用 Visual Studio 2010 编译的 Win32 控制台应用程序。

执行时，它适用于禁用主题。但是，启用不起作用，因为代码挂起并且不退出。

我发现我可以通过评论 pragma 选项行来修复挂起。代码正确退出，但主题仍未启用。

```
#include <windows.h>
#include <Uxtheme.h>
#include <stdio.h>

//#pragma comment(linker, "/entry:main")

// Main application function
int main(void) {

    if (!IsThemeActive()) 
        EnableTheming(TRUE);
    else
        EnableTheming(FALSE);

    printf("Last error: %d", GetLastError());

    SendNotifyMessage(HWND_BROADCAST, WM_SETTINGCHANGE, NULL, (LPARAM)TEXT("VisualEffects"));

} 
```

问题：

1.  一般如何启用主题？我错过了什么？

2.  如何使其与创建自定义入口点的 pragma 选项一起使用？我需要一个非常小的可执行文件大小。

非常感谢

# url - 带有亚马逊应用程序的 Admob 站点 URL

> ID：15193660
> 
> 赞同：0
> 
> 时间：2013-03-04T02:31:24.560
> 
> 标签：url, admob, amazon, ads

我正在将应用程序从 Google Play 移植到亚马逊，并且我读过亚马逊应用程序也支持 Admob。我的问题是我必须使用 Admob 为 Amazon 构建“添加站点/应用程序”吗？如果是，“站点 URL”应该是

`amzn://apps/android?p=com.MySiteName.MyAppName`

而不是

`market://details?id=com.MySiteName.MyAppName`

谢谢，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:17:26.530

您可以只使用您的市场网址和/或在您的亚马逊和 Google Play 版本中使用相同的 AdMob 站点 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T19:54:50.140

您可以在站点 URL 中使用：

http://www.amazon.com/gp/mas/dl/android?p=[your.package.name.here]

来源：[https ://developer.amazon.com/appsandservices/community/post/Tx3A1TVL67TB24B/Linking-To-the-Amazon-Appstore-for-Android](https://developer.amazon.com/appsandservices/community/post/Tx3A1TVL67TB24B/Linking-To-the-Amazon-Appstore-for-Android)

# azure - Azure - 将 CreateTableIfNotExist() 代码从 Run() 移动到 OnStart() 时性能大幅下降

> ID：15193661
> 
> 赞同：1
> 
> 时间：2013-03-04T02:31:28.283
> 
> 标签：azure

我有一个工作角色，它执行一些涉及 Azure 存储的处理。如果我将 CreateTableIfNotExist() 代码从 workerrole 的 Run() 方法移动到 OnStart() 方法，整体性能会下降。例如，在将 CreateTableIfNotExist() 代码添加到 OnStart() 的情况下，将条目添加到 Azure 存储大约需要 5-10 秒，而在将 CreateTableIfNotExist() 代码添加到 Run() 的情况下，只需 200 毫秒） 方法。没有其他代码更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:43:27.630

您不是偶然将 CreateTableIfNotExists() 方法移到了非结束循环中，对吗？CreateTableIfNotExists() 通常是一个缓慢的调用，并且应该很少调用（最好每个应用程序调用一次）

# google-app-engine - dev_server.py ：更改代码状态始终为 200 且正文为空时的第一个请求

> ID：15193674
> 
> 赞同：0
> 
> 时间：2013-03-04T02:32:55.887
> 
> 标签：google-app-engine, tornado

我在 app.yaml 中使用它

```
- url: /.*
  script: server.application 
```

使用开发服务器时

dev_appserver.py --use_sqlite -a 0.0.0.0 -p 8842 /home/bitcoin/42btc

第一次，是空白页第二次，一切正常

我用龙卷风

```
application = tornado.wsgi.WSGIApplication(
   [
            (r"/(.*)", ViewIndex),
        ],
) 
```

当您更改代码时，第一个请求将在 shell 中打印响应，并且状态为 200 并且正文为空

```
INFO     2013-03-04 02:26:57,679 dev_appserver_multiprocess.py:658] Admin console is available at: http://0.0.0.0:8942/_ah/admin
INFO     2013-03-04 02:26:58,487 py_zipimport.py:148] zipimporter('/home/bitcoin/42btc/misc/virtualenv.zip', '')
Status: 200
Content-Length: 4792
Etag: "17302e0828d268f8d65efab7c1edb483d0ffa61d"
Content-Type: text/html; charset=UTF-8
Server: TornadoServer/2.4.1
Set-Cookie: _xsrf=cf8c38780922411a859f197e686910a4; Path=/

<!DOCTYPE html><meta charset="utf-8"><script src="/js/init.js"></script><link rel="stylesheet" href="/css/init.css" type="text/css"><title>42btc.com</title><body>

... 
```

第二个请求是好的....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:22:50.177

It looks like stdout may not be getting redirected properly on the first page load.

I don't see this with my version of dev_appserver. It may be tornado or some other library that you're using.

# java - 如何将arraylist =设置为正则表达式的每个匹配项

> ID：15193675
> 
> 赞同：0
> 
> 时间：2013-03-04T02:32:59.080
> 
> 标签：java, regex, arrays, string, arraylist

我试图将所有可能的匹配项放入 arraylist Returnvalue 中，尽管在 regexMatcher 上调用 group 时，它只返回最后一个结果。

我如何完成将所有匹配项放入字符串或数组或任何其他类型的变量中？

```
while ( regexMatcher.find() ){
if (regexMatcher.group().length() != 0){
  returnvalue.add(regexMatcher.group());
  Writer.println(returnvalue.add);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:11:53.023

据我了解，假设您有 String`"John writes about this, and John writes about that"`和 pattern `"(John)([^,]*)"`，您希望将字符串中模式的每个匹配项作为 ArrayList 的元素返回`return Value`。

在这种情况下，将有 2 个这样的匹配项，`"John writes about this"`并且`"John writes about that"`. 如果是这样，下面的简短程序将给出确切的答案。尝试更改代码以满足您的需要。

```
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class testCode
{
    public static void main(String args[])
    {
        String text = "John writes about this, and John writes about that";
        String patternString1 = "(John)([^,]*)";

        Pattern pattern = Pattern.compile(patternString1);
        Matcher regexMatcher = pattern.matcher(text);

        List<String> returnValue= new ArrayList<String>();

        while(regexMatcher.find())
            if(regexMatcher.group().length() != 0)
                returnValue.add(regexMatcher.group());

        for(int i=0; i<returnValue.size(); i++)
            System.out.println(returnValue.get(i));
    }
} 
```

输出：

```
John writes about this
John writes about that 
```

# javascript - 如果文本太长，则用省略号填充文本

> ID：15193676
> 
> 赞同：2
> 
> 时间：2013-03-04T02:33:02.527
> 
> 标签：javascript, jquery

我正在尝试解决一个 jQuery 问题。我正在使用一个 wordpress 插件，它从最近的帖子中创建一个小部件。该插件会自动生成一些我试图用 CSS 和 jQuery 格式化/破解的代码。自动生成的项目之一是标题：

```
<h4 class="srp-post-tilte">HEADLINE HERE</H4> 
```

我的设计取决于这个标题不超过给定的长度。（约 45 个字符）。该插件提供了一个选项，可以在此问题的标题后添加省略号（我将其设置为 45 个字符）。问题是当标题少于 45 个字符时，省略号仍然会出现。

所以，我已经关闭了这个功能，并试图在 jQuery 中做到这一点。我只想在标题被裁剪为 45 个字符的情况下添加省略号。我试过这个，但它不工作。

```
if ($j("h4.srp-post-title").val().length > 44) { 
         // Show the elipsis
            $j('h4.srp-post-title').append("...");
} else {
         // Don's show the elipsis (do nothing)
        $j('h4.srp-post-title').append("");
} 
```

如果有人可以提供帮助，将不胜感激。[您可以在http://dreamlets.sfplanning.org/](http://dreamlets.sfplanning.org/)上看到一个实时示例，但请注意，其中有很多 CSS，因此可能很难理解幕后发生的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:17:33.083

你试过使用`text-overflow: ellipsis;`吗？

```
.srp-post-tilte {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
} 
```

我在chrome上试了一下，没有发现任何问题！

![在此处输入图像描述](../Images/fa4e1ee09f9967649a477a02a63892b7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:38:06.020

## 解决方案

```
var header = $('h4.srp-post-title').text();
if( $('h4.srp-post-title').text().length > 45 )
    $('h4.srp-post-title').html(header.substring(0,45) + '&hellip;'); 
```

`[**Working example**](http://jsbin.com/ojuyax/1/edit)`

* * *

### 解释

**首先是 API 使用错误**。使用`text()`方法而不是方法`val()`来获得您需要的东西。那是：

```
$j("h4.srp-post-title").text().length 
```

代替

```
$j("h4.srp-post-title").val().length 
```

`val()`只是获取`value`元素的属性，主要用于从`input`字段中获取值。

**此外，附加 HTML 实体`&hellip;`**（而不是三个点），因为它是您要查找的正确字符。

我还注意到**你根本没有修剪**，我不知道是不是因为这只是一个例子。在任何情况下，你都必须像我上面提到的那样来修剪你的文本。

基本上你要做的是检查标题是否超过 45 个字符，然后使用`substring`字符串方法获取前 45 个字符并添加省略号。瞧。

* * *

顺便说一句，修改插件的工作方式可能是一个更好的选择，它应该没有那么困难。最后，你的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:33:53.167

我编写了一个插件来完成这个（以及更多！），称为 ellipsify。

你会这样使用它：

```
$j("h4.srp-post-title").ellipsify({
    count: 45
}); 
```

[https://github.com/ethagnawl/ellipsify](https://github.com/ethagnawl/ellipsify)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:47:40.310

您需要剪掉部分文本，然后应用省略号，如下所示：

```
$j("h4.srp-post-title").text(function(i, txt) {
    return txt.substring(0,42) + (txt.length > 45 ? '...' : '');
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/wHQ9W/)

# javascript - 为调查猴子检测 iframe 中的变化

> ID：15193677
> 
> 赞同：2
> 
> 时间：2013-03-04T02:33:04.433
> 
> 标签：javascript, jquery, html, surveymonkey

我在我的页面上嵌入了一项调查猴子调查，我想检测用户何时提交调查并被路由到“谢谢”页面。（此时我想重定向到另一个页面，为了简单起见，我们只说 www.google.com）。如何检测 div 中对调查猴子确认 url 的更改？（这似乎是：[http](http://www.surveymonkey.com/Home_Landing.aspx?sm=HO4sAuxWGVqYlHQe3fZmKuIQKB2Chu5Pcw9UfeB2rP5FLvW8Xg8B7nyhEj9ZH1Fe) ://www.surveymonkey.com/Home_Landing.aspx?sm=HO4sAuxWGVqYlHQe3fZmKuIQKB2Chu5Pcw9UfeB2rP5FLvW8Xg8B7nyhEj9ZH1Fe ）

这是他们让我添加的调查猴子嵌入信息：

```
 <div id="surveyMonkeyInfo">
<div><script src="http://www.surveymonkey.com/jsEmbed.aspx?sm=vWWHOiYv9Mb1LAjgBfpOEw_3d_3d"> </script>
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:35:35.350

SurveyMonkey 有能力基本上提供一个回调站点。

[http://help.surveymonkey.com/articles/en_US/kb/Can-I-redirect-respondents-to-a-different-website-upon-completion](http://help.surveymonkey.com/articles/en_US/kb/Can-I-redirect-respondents-to-a-different-website-upon-completion)

另一个使用 jquery 来检查 iframe 的选项，以获取表明已完成调查的内容。这将无法通过 iframe 直接链接到调查，因为您将尝试跨不同域访问数据。

```
$().ready(function(){
if($('#surveyFrameId').contents().find("div .embed_title").val() == 'Thank you for taking the survey!'){
    // do something
}

setTimeout(arguments.callee, 10000);}) 
```

您可以按照以下帖子中的说明解决跨域问题。

[不安全的 JavaScript 尝试使用 URL 访问框架](https://stackoverflow.com/questions/4324108/unsafe-javascript-attempt-to-access-frame-with-url)

# javascript - 如何从 JavaScript 函数返回一个对象并访问该返回的对象？

> ID：15193683
> 
> 赞同：-5
> 
> 时间：2013-03-04T02:33:35.180
> 
> 标签：javascript

在下面的代码中，我希望访问 getEnvironment 函数返回的环境对象。我将如何在我的代码中的其他地方访问这个对象？

```
window.EXAMPLE = {

        config : {
            local: 'http://localhost:8888/example',
            staging_v2: 'http://example.com/staging',
            production: 'http://example.com',
            image_path: '/images/',

        },

        getEnvironment : function () {
            if (window.location.href.indexOf(EXAMPLE.config.local) > -1) {
                var environment = {
                    path : EXAMPLE.config.local + EXAMPLE.config.image_path,
                }
                return environment;
            }

            if (window.location.href.indexOf(EXAMPLE.config.staging_v2) > -1) {
                var environment = {
                    path : EXAMPLE.config.staging_v2 + EXAMPLE.config.image_path,
                }
                return environment;
            }

            if (window.location.href.indexOf(EXAMPLE.config.production) > -1) {

                var environment = {
                    path : EXAMPLE.config.production + EXAMPLE.config.image_path,
                }
                return environment;
            }
        },

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:39:27.150

由方法或函数返回的对象的行为与任何其他对象没有什么不同。这是使用示例中`environment`的方法返回的对象的示例：

```
var env = EXAMPLE.getEnvironment();
console.log(env.path); 
```

# java - 如何在我的程序启动时验证 Java 版本？

> ID：15193688
> 
> 赞同：1
> 
> 时间：2013-03-04T02:34:56.933
> 
> 标签：java, lwjgl, slick2d

我的 java 应用程序要求用户安装 Java 7。但是，如果他们不这样做，除非他们从控制台启动应用程序，否则不会向用户显示或返回任何内容。该应用程序只是终止。
如果用户还没有正确的 Java 版本，我将如何生成一个显示指向正确版本 Java 的链接的弹出窗口？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:40:12.217

您可以使用`System.getProperty("java.version")`在为所有版本编译的程序中获取 java 版本。然后，您可以让该程序启动您的主应用程序/游戏，否则将用户重定向到安装 JRE 7。

执行此操作的正确方法是在游戏安装期间以及启动期间对其进行验证。

您的启动器应编译为可能的最低 JDK 版本，例如，

```
javac file.java -source 1.3 
```

如果可能，请将您的启动器保留为 .bat/.sh 文件，这样您就可以确保在缺少 java 时启动器不会失败

例如看这个，

[使用批处理脚本检查环境中是否存在 JAVA_HOME](https://stackoverflow.com/questions/7021873/check-if-java-home-is-present-in-environment-using-batch-script)

# java - 动态创建 ComboBox 值 Java

> ID：15193701
> 
> 赞同：0
> 
> 时间：2013-03-04T02:37:00.713
> 
> 标签：java, user-interface, jcombobox

我是 Java 新手，对 Java GUI 非常陌生。我有一个非常基本的 GUI 设置，带有选项卡式窗格。一个基本窗格允许用户将项目添加到集合中。我已经开始设置另一个窗格，我希望在其中有一个 ComboBox 菜单，列出上述窗格中的项目（即，已添加的所有项目的列表），并允许用户选择要删除的项目（通过按钮））。我尝试将项目数组传递给“删除”窗格并以多种不同方式在 ComboBox 中使用，但由于 ComboBox 是在构造函数中创建的，因此它永远不会随着项目的添加而更新。

访问该数组的最佳方法是什么，因为它是从另一个窗格动态更新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:50:44.950

我可以想出几种方法来实现它。

向两个面板传递对通用模型接口的引用的最佳方法之一。这将允许第一个面板向其中添加项目，并在发生这些更改时通知第二个面板并自行更新。

如果您不想在设置时将此模型传递给两个面板，则可以改用单例，从而使两个面板都可以全局访问模态。我倾向于将模型传递给构造函数，因为这样更容易更改模型实现。

一种可能的解决方案是使用 a[`DefaultComboBoxModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultComboBoxModel.html)作为基础实现。这允许您从模型中添加和删除元素，但允许您非常轻松地分配给组合，因为它是模型。但这将归结为您希望通过该系列实现的目标。

另一种方法是附加`ChangeListener`到`JTabbedPane`. 当活动选项卡更改时，您可以检查第一个窗格中的值并将它们分配给第二个窗格。

这比第一个更耦合，因为它假设选项卡式窗格“知道”两个窗格之间的关系（并且知道需要更新哪两个窗格）

# java - 我的 java 代码出了点问题

> ID：15193702
> 
> 赞同：-5
> 
> 时间：2013-03-04T02:37:05.907
> 
> 标签：java, swing, jframe

当我尝试使用 if 语句将两个单独的单词打印到控制台时，无论输入什么，它始终只返回一个单词。

我的完整代码：

```
public class Frame{

    //Declaring needed text variables

    //Text Pane
    static JFormattedTextField formattedTextField = new JFormattedTextField();
    static String username = formattedTextField.getText();

    //Frame
    static JFrame UsernameFrame = new JFrame("Welcome");

    /**
     * @wbp.parser.entryPoint
     */
    public static void frame(){

        /**
         * Configuring the Frame
         */
        UsernameFrame.setSize(400,150);
        UsernameFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        UsernameFrame.getContentPane().setLayout(null);

        /**
         * Configuring Submit button
         */
        JButton btnSubmit = new JButton("Submit");
        btnSubmit.setBounds(0, 89, 384, 23);
        btnSubmit.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                if(username.length() < 5){
                    System.out.println("no");
                }
                if(username.length() > 5){
                    System.out.println("continue");
                }
                //Execute when the button is pressed
                System.out.println("The button has been pressed");
            }
        });
        UsernameFrame.getContentPane().add(btnSubmit);

        /**
         * Configuring user-name text pane
         */
        JLabel lblEnterYourSelected = new JLabel("Enter your selected username below");
        lblEnterYourSelected.setHorizontalAlignment(SwingConstants.CENTER);
        lblEnterYourSelected.setBounds(81, 11, 214, 14);
        UsernameFrame.getContentPane().add(lblEnterYourSelected);

        /**
         * Configuring content pane
         */
        formattedTextField.setBounds(129, 36, 120, 20);
        UsernameFrame.getContentPane().add(formattedTextField);
        UsernameFrame.setVisible(true);

    }
} 
```

这是我正在使用的特定线路

```
if(username.length() < 5){
  System.out.println("no");
}
if(username.length() > 5){
  System.out.println("continue");
} 
```

我一直在寻找解决方案，但我找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:50:05.527

您必须在按下按钮后读取用户名的值，在这种情况下，它将采用输入的最新值并检查长度。

如果您声明如下

```
public void actionPerformed(ActionEvent e){
            String username = formattedTextField.getText();

                if(username.length() < 5){
                    System.out.println("no");
                }
                if(username.length() > 5){
                    System.out.println("continue");
                }
                //Execute when the button is pressed
                System.out.println("The button has been pressed");
            } 
```

这会奏效。此外，您还必须包含测试长度是否等于 5 的条件。

# facebook - Spotify 和其他大横幅应用程序如何在墙贴上显示自定义内容

> ID：15193705
> 
> 赞同：0
> 
> 时间：2013-03-04T02:37:20.047
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, foursquare

我刚刚在我的新闻提要中看到了这个

[http://imageshack.us/photo/my-images/836/spotifywallpost.png/](http://imageshack.us/photo/my-images/836/spotifywallpost.png/)

Spotify 如何添加这些自定义播放按钮和歌曲列表？我也可以为我的应用程序这样做吗？或者 Facebook 是否为某些大横幅应用程序提供了这些特殊功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:43:04.873

> Spotify 如何添加这些自定义播放按钮和歌曲列表？

通过将 Flash 播放器嵌入到他们的帖子中。相关关键字是[Feed Gaming](https://developers.facebook.com/docs/feed-gaming/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:39:55.160

Facebook 为某些应用程序提供此功能。[不过，您可以使用 Open Graph Actions](https://developers.facebook.com/docs/concepts/opengraph/actions/)、[Objects](https://developers.facebook.com/docs/concepts/opengraph/objects/)和[Aggregations](https://developers.facebook.com/docs/concepts/opengraph/aggregations/)构建一些非常漂亮的东西。

# ios - iOS在表格中显示数组中的数据，最后一个索引除外

> ID：15193707
> 
> 赞同：0
> 
> 时间：2013-03-04T02:37:40.627
> 
> 标签：ios, uitableview, nsarray, directions

我已经在数组的表格视图中显示了我的数据，但我不想显示数组中的最后一个对象。我该如何做到这一点？谢谢

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    MQManeuver *manuever = [[route maneuvers] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.imageView.image = nil;

    cell.detailTextLabel.numberOfLines = 2;
    cell.detailTextLabel.adjustsFontSizeToFitWidth = YES;
    cell.detailTextLabel.text = manuever.narrative;
    cell.detailTextLabel.font = [UIFont boldSystemFontOfSize:12];
    cell.detailTextLabel.textColor = [UIColor blackColor];

    float distance = manuever.distance;
    NSString *distance1 = [NSString stringWithFormat:@"%.1f", distance];
    cell.textLabel.text = [distance1 stringByAppendingFormat:@" miles"];
    cell.textLabel.textColor = [UIColor grayColor];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:10:42.460

尝试这个

将 NSArray 数据转移到 NSMutableArray

```
NSMutableArray Methods for Removing Objects:
– removeAllObjects
– removeLastObject   ///you can use removeLastObject Method
– removeObject:
– removeObject:inRange:
– removeObjectAtIndex:
– removeObjectsAtIndexes:
– removeObjectIdenticalTo:
– removeObjectIdenticalTo:inRange:
– removeObjectsFromIndices:numIndices:
– removeObjectsInArray:
– removeObjectsInRange: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T06:03:46.040

请尝试使用这个...我认为这会很好。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if([[route maneuvers] count] == 0)
        return 0;
    else
       return [[route maneuvers] count] - 1;
} 
```

# django - Django 1.4 带查询的分页

> ID：15193713
> 
> 赞同：0
> 
> 时间：2013-03-04T02:38:10.310
> 
> 标签：django, pagination, python-2.6, django-1.4, django-q

我正在尝试按照[https://docs.djangoproject.com/en/dev/topics/pagination/](https://docs.djangoproject.com/en/dev/topics/pagination/)中的示例使分页工作。我正在使用查询，似乎无法将查询数据传递给连续的页面。第一页按预期返回我的查询限制为 10 个结果，但下一页只返回一个空白表。

*   版本：Django 1.4.4 和 python 2.6.6

代码：

```
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

def search(request):
    query_string = ''
    found_entries = None
    if ('q' in request.GET) and request.GET['q'].strip():
            query_string = request.GET['q']

            entry_query = get_query(query_string, ['id', 'address', 'itemcode', 'qty', 'description', 'metatags' ])

            found_entries = inventory.objects.filter(entry_query).order_by('-qty')
            paginator = Paginator(found_entries, 10) # Show 10 items per page

            page = request.GET.get('page')
            try:
                    found_entries = paginator.page(page)
            except PageNotAnInteger:
                    # If page is not an integer, deliver first page.
                    found_entries = paginator.page(1)
            except EmptyPage:
                    # If page is out of range (e.g. 9999), deliver last page of results.
                    found_entries = paginator.page(paginator.num_pages)

    return render_to_response('dynamite_frontpage.html', {"found_entries": found_entries}) 
```

网址：

```
(r'^search/$', 'dynamite.views.search'), 
```

当我排除查询并显示所有结果分页工作时，我的模板设置正确 - 例如：

```
def search(request):
    found_entries = inventory.objects.all().order_by('-qty')
    paginator = Paginator(found_entries, 10) # Show 10 items per page      

    page = request.GET.get('page') 
    try:
            found_entries = paginator.page(page)
    except PageNotAnInteger:
            found_entries = paginator.page(1)
    except EmptyPage:
            found_entries = paginator.page(paginator.num_pages)

    return render_to_response('dynamite_frontpage.html', {"found_entries": found_entries}) 
```

提前致谢。

搜索功能：

```
def normalize_query(query_string,
                findterms=re.compile(r'"([^"]+)"|(\S+)').findall,
                normspace=re.compile(r'\s{2,}').sub):
''' Splits the query string in invidual keywords, getting rid of unecessary spaces
    and grouping quoted words together.
    Example:

    >>> normalize_query('  some random  words "with   quotes  " and   spaces')
    ['some', 'random', 'words', 'with quotes', 'and', 'spaces']

'''
return [normspace(' ', (t[0] or t[1]).strip()) for t in findterms(query_string)] 

def get_query(query_string, search_fields):
''' Returns a query, that is a combination of Q objects. That combination
    aims to search keywords within a model by testing the given search fields.

'''
query = None # Query to search for every search term        
terms = normalize_query(query_string)
for term in terms:
    or_query = None # Query to search for a given term in each field
    for field_name in search_fields:
        q = Q(**{"%s__icontains" % field_name: term})
        if or_query is None:
            or_query = q
        else:
            or_query = or_query | q
    if query is None:
        query = or_query
    else:
        query = query & or_query
return query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:46:24.263

```
from django.core.paginator import Paginator, InvalidPage, EmptyPage

def search(request):
    found_entries = inventory.objects.filter()

    if request.GET.get('q'):
        query_string = request.GET.get('q')
        found_entries = found_entries.filter(
                id__icontains=query_string
            ).filter(
                address__icontains=query_string
            ).filter(
                itemcode__icontains=query_string
            ).filter(
                qty__icontains=query_string
            ).filter(
                description__icontains=query_string
            ).filter(
                metatags__icontains=query_string
            ).order_by('-qty')

    paginator = Paginator(found_entries, 10) # Show 10 items per page

    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    try:
        found_entries = paginator.page(page)
    except (EmptyPage, InvalidPage):
        found_entries = paginator.page(paginator.num_pages)

    return render_to_response('dynamite_frontpage.html', {
        "found_entries": found_entries,
    }) 
```

在您的模板中：

```
<input name="q" type="text" value="{{ request.GET.q }}"> 
```

模板标签测试：

```
<form class="form-searchbar" method='get' action='/search/'>
    <input name="q" type="text" value="{{ request.GET.q }}">
</form> 
```

# ios - 使用 UIFileSharingEnabled 时在哪里保存私人文件

> ID：15193717
> 
> 赞同：0
> 
> 时间：2013-03-04T02:38:34.317
> 
> 标签：ios

`UIFileSharingEnabled`设置为 yes 使用户可以访问文档目录。

应该在哪里存储文件目录之外的文件和文件夹，这些文件和文件夹对应用程序来说是私有的并且不应该在 iTunes 文件共享窗口中对用户可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:07:31.043

这些进入`~/Library`. 有关各种子目录的详细信息，请参阅文件系统编程指南中[的库目录存储应用程序特定文件](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。通常，您的文件将进入`~/Library/Application Support`.

# java - 不断使索引超出范围

> ID：15193720
> 
> 赞同：0
> 
> 时间：2013-03-04T02:38:50.973
> 
> 标签：java, char, boolean, double, indexoutofrangeexception

我正在制作一个计算句子中单词的程序。空格不算数，标点符号不算数。我正在使用一个接收输入并输出答案的模块。但是不要担心，因为我认为这不是我的程序打印出这个的原因

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: 
String index out of range: 11
    at java.lang.String.charAt(String.java:658)
    at WordCount.main(WordCount.java:20) 
```

```
public class WordCount{
    public static void main(String[] args){

        System.out.println("Please enter sentence");
        String sentence= IO.readString();

        System.out.println("Please enter minimum word length");
        double minword= IO.readInt();

        String word;
        int wordletter=0;
        int wordcount= 0;

        int count= -1;
        int end= sentence.length();

        do{
            count++;
            char space= sentence.charAt(count);

            if(Character.isLetter(space)){
                boolean cut= Character.isSpaceChar(space);
                if(cut== true)
                    word=sentence.substring(0,count);
                    count= 0;
                    wordletter= word.length();
                    end= end- wordletter;

                    if(wordletter< minword){
                        ;
                    }else{
                        wordcount= wordcount+1;
                    }
                }else{
                    ;
                }
            }else{
                ;
            }
        }while(count!= end);

    IO.outputIntAnswer(wordcount);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:43:56.367

`char space= sentence.charAt(count);`导致异常，因为您的循环条件运行了太多次。对于 while 条件，您想要小于而不是不等于

```
while (count - 1 < end); 
```

负 1 是必需的，因为您以一种奇怪的方式构建了循环，我通常会这样做：

```
int end= sentence.length();
count = -1;
while (++count < end) {

} 
```

或者，甚至更好。使用`for`循环。

```
int end = sentence.length();
for (int i = 0; i < end; i++ {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:50:58.953

简单的答案是数组具有`array.length`索引为 的元素`0, 1, ... array.length - 1`。您的代码（如所写）将尝试索引`0, 1, ... array.length`。

考虑一下您使用的终止循环的条件。

* * *

但这不足以修复您的程序。我至少可以看到另外两个错误。由于这显然是一个学习练习，我建议您自己找到并修复它们……因为这是您需要发展的一项重要技能。我建议您使用 IDE 的调试器运行您的程序，并通过您的代码“单步”查看它在做什么。

# ios - 正确使用 NSFetchRequest

> ID：15193722
> 
> 赞同：1
> 
> 时间：2013-03-04T02:38:58.040
> 
> 标签：ios, core-data, nsfetchrequest

我是 CoreData 的新手，并试图编写一个通用函数来从数据库中查询信息。我面临一些问题。

我设置了一个名为 NSError *error 的私有变量。我的代码如下所示：

```
@interface DatabaseHandler ()
{
    NSError * error;
}
@end

-(void)queryCoreDataModel:(NSString*)tableName sortBy:(NSArray *)sortArray{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:tableName];
    request.fetchLimit = 20;
    request.sortDescriptors = sortArray;
    [context executeFetchRequest:request error:&error];
} 
```

它给了我这个错误：`Passing address of non-local object to __autoreleasing parameter for write-back.`

但是当我这样做时：

```
-(void)queryCoreDataModel:(NSString*)tableName sortBy:(NSArray *)sortArray{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:tableName];
    request.fetchLimit = 20;
    request.sortDescriptors = sortArray;
    NSError *error;
    [context executeFetchRequest:request error:&error];
} 
```

它没有给我任何错误。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:18:33.390

错误变量不能是实例变量，因为实例变量不允许自动释放。错误参数需要自动释放以避免泄漏，这就是局部变量起作用的原因。

# c++ - 奇怪的堆损坏问题？

> ID：15193723
> 
> 赞同：1
> 
> 时间：2013-03-04T02:39:00.087
> 
> 标签：c++, heap-corruption

出于某种原因，我从以下类定义文件中得到了一个奇怪的堆损坏，很可能是在“CreateFromNode”函数中。谁能帮我这个？自从我抓住它以来，我真的很想立即处理它，并且以后不会看到它出现。此外，没有外部力量正在修改此类的任何成员（或其成员）。

```
#include "Object.h"

TmxMap::Object::Object():name(), position(), size(), gid(-1), visible(true),
properties(), image(), polygon(NULL), polyline(NULL), ellipse(false){}

TmxMap::Object::Object(rapidxml::xml_node<>* const& object_node):name(),
    position(), size(), gid(-1), visible(true), properties(), image(),
    polygon(NULL), polyline(NULL), ellipse(false){
CreateFromNode(object_node);
}

TmxMap::Object::Object(TmxMap::Object const& from):name(from.name),
    position(from.position), size(from.size), gid(from.gid),
    visible(from.visible), properties(from.properties),
    image(from.image), polygon(from.polygon), polyline(from.polyline),
    ellipse(from.ellipse){}

TmxMap::Object::~Object(){
DeleteObjects();
}

void TmxMap::Object::CreateFromNode(rapidxml::xml_node<>* const& object_node){
DeleteObjects();

rapidxml::xml_node<>* data_node = NULL;
rapidxml::xml_attribute<>* data_attrib = NULL;

if((data_attrib = object_node -> first_attribute("name")))
    name = data_attrib -> value();

if((data_attrib = object_node -> first_attribute("width")))
    size.x = std::strtol(data_attrib -> value(), NULL, 10);
if((data_attrib = object_node -> first_attribute("height")))
    size.y = std::strtol(data_attrib -> value(), NULL, 10);

position.Set(
        std::strtol(object_node -> first_attribute("x") -> value(), NULL, 10),
        std::strtol(object_node -> first_attribute("y") -> value(), NULL, 10)
);

if((data_node = object_node -> first_node("polygon")))
    polygon = new Polygon2D<int>(data_node);

if((data_node = object_node -> first_node("polyline")))
    polyline = new Polyline2D<int>(data_node);

ellipse = (object_node -> first_node("ellipse") != NULL);
}

void TmxMap::Object::DeleteObjects(){
if(polygon){delete polygon; polygon = NULL;}
if(polyline){delete polyline; polyline = NULL;}
}

void TmxMap::Object::Destroy(){
name.clear();
position.Set();
size.Set();
gid = 0;
visible = true;
properties.Destroy();
image.Destroy();
DeleteObjects();
ellipse = false;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:30:18.227

您的复制构造函数复制指针`polygon`和`polyline`.
这将导致它们被多次删除。

您应该复制这些对象而不是指针。

# java - 我如何输入文件并编写代码以查找列表中的最高数字

> ID：15193726
> 
> 赞同：0
> 
> 时间：2013-03-04T02:39:11.723
> 
> 标签：java

我是 java 新手，感谢这个站点，我知道如何从列表中获取最低值，但我仍在努力解决如何让相同的代码为最高值工作。在过去的 2 个小时里，我一直在努力。再次感谢任何帮助

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class LargenSmall {
    public static void main(String[] args) throws IOException {
        String filename;        //Numbers file
        double lowest = Double.POSITIVE_INFINITY;//lowest number in list
        double highest; //highest number in list

        //Open the file
        File file = new File("Numbers.txt");
        Scanner inputFile = new Scanner(file);

        //Set lowest to zero

        //Read all the values in Numbers file and find the lowest value
        while (inputFile.hasNext()) {
            //Read the numbers in the file and compare each value to find lowest value
            double number = inputFile.nextDouble();
            if (number < lowest) lowest = number;
        }

        //Set highest to zero
        highest = 0.0;

        //Read all the values in Numbers file and find the highest value
        while (inputFile.hasNext()) {
            //Read the numbers in the file and compare each value to find highest value
            double number = inputFile.nextDouble();
            if (number > highest) highest = number;
        }

        //Close file
        inputFile.close();

        //Print out the lowest value in the list
        System.out.println("The lowest number in your file called, " +
                "Numbers.txt is " + lowest + ".");

        //Print out the highest value in the list
        System.out.println("The highest value in the list is " + highest);
    }
} 
```

我已经尝试了一些变化，最高值一直返回为 0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:17:18.447

在学习语言时（以及在学习之后），有一小部分代码很有帮助，易于编写、测试和维护。例如，比较一个数字并记住可以转移到另一个班级并进行测试。

我不打算纠正你的编程错误。我想记录一下[编写更好代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)的良好编程实践。

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class LargenSmall {
    BigHolder bigHolder= new BigHolder();
    SmallHolder smallHolder = new SmallHolder();

    public static void main(String[] args) throws IOException {
        new LargenSmall().doSearch(args[0]);

    }
     void doSearch (String filename) throws IOException {
        //Open the file
        File file = new File(filename);
        Scanner inputFile = new Scanner(file);
        iterateAndFetchNumbers(inputFile);
        inputFile.close();
        printResult();

         testNumbers();
     }

    private void iterateAndFetchNumbers(Scanner inputFile) {
        //Read all the values in Numbers file and find the highest value
        while (inputFile.hasNext()) {
            //Read the numbers in the file and compare each value to find highest value
            double number = inputFile.nextDouble();
            smallHolder.accept(number);
            bigHolder.accept(number);
        }
    }

    private void printResult() {
        //Print out the lowest value in the list
        System.out.println("The lowest number in your file called, " +
                "Numbers.txt is " + smallHolder.small + ".");

        //Print out the highest value in the list
        System.out.println("The highest value in the list is " + bigHolder.big);
    }
    //
    private static class SmallHolder {
        double small= Double.POSITIVE_INFINITY;
        public void accept(double newNumber) {
            if ( newNumber < small) {
                small = newNumber ;
            }
        }

    }

    private static class BigHolder {
        double big= 0;
        public void accept(double newNumber) {
            if ( newNumber > big ) {
                big = newNumber ;
            }
        }
    }

    //self test example - should be in junit class
    public void testNumbers() {
        BigHolder b = new BigHolder();

        b.accept(1);
        b.accept(3);
        b.accept(8);
        b.accept(0);
        b.accept(100);
        assert b.big == 0;//junit assert really
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:52:22.630

首先，您应该在循环之前声明变量以提高速度：

```
double number;
while (inputFile.hasNext())
{
number = inputFile.nextDouble();
if (number > highest) highest = number;
} 
```

其次，您似乎没有在开始查找最大值之前从文件的开头开始读取，因此，该块可能没有被执行（因为您已经到达文件的末尾）：

```
while (inputFile.hasNext())
{
double number = inputFile.nextDouble();
if (number > highest) highest = number;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:59:06.347

你几乎在那里。您不需要两个 While 循环。第二个 While 循环不适用于您的情况。您可以在第一个 while 循环中包含条件，如下所示。

```
 double lowest = Double.POSITIVE_INFINITY;
    double highest = 0d;
    // Read all the values in Numbers file and find the lowest value
    while (inputFile.hasNext()) {
        // Read the numbers in the file and compare each value to find
        // lowest value
        double number = inputFile.nextDouble();
        if (number < lowest)
            lowest = number;
        else if (number > highest)
            highest = number;
    } 
```

# c# - 无法在 LINQ 中执行逗号分隔的列表聚合

> ID：15193728
> 
> 赞同：1
> 
> 时间：2013-03-04T02:39:16.413
> 
> 标签：c#, linq

我有一个实体如下

```
public class A
    {
        public string TestMethodName { get; set; }
        public string FailedFor { get; set; }
    } 
```

我正在填充，然后执行联合

```
 List<A> aCollection = new List<A>();
            List<A> bCollection = new List<A>();

            aCollection.Add(new A { TestMethodName = "Method1", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method2", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method3", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method4", FailedFor = "DPLServerURL" });

            bCollection.Add(new A { TestMethodName = "Method1", FailedFor = "OrderXmlLocation" });
            bCollection.Add(new A { TestMethodName = "Method2", FailedFor = "OrderXmlLocation" });
            bCollection.Add(new A { TestMethodName = "Method5", FailedFor = "OrderXmlLocation" });

            var kk = aCollection.Union(bCollection); 
```

我正在寻找的是 TestMethodNames 和 FailedFor 上的 group by 应该用逗号分隔。

例如最终输出应该是

```
Method1  DPLServerUrl,OrderXmlLocation
Method2   DPLServerUrl,OrderXmlLocation
Method3   DPLServerUrl
Method4   DPLServerUrl
Method5   OrderXmlLocation 
```

我的尝试

```
 var mm  = kk.GroupBy(g => g.TestMethodName)
                  .Select(group =>
                        new
                        {
                            Name = group.Key,
                            AggregateFailedFor= group.Aggregate("",(a, b) => a.Join(",",b.FailedFor))
                        }); 
```

我收到编译时错误

**成员 'string.Join(string, params string[])' 不能通过实例引用访问；改为使用类型名称来限定它**

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:45:38.253

该错误是不言自明的。`Join`是静态的..所以你不能在实例变量上调用它。您必须通过类型名称（例如`string`）调用它：

```
Students = group.Aggregate("", (a, b) => string.Join(",", a, b.FailedFor))
//                                       ^^^^^^ this 
```

请注意，聚合无疑会在结果的开头放置一个逗号，因为第一次调用将是“join nothing and FailedFor using a comma”，结果是“,FailedFor”。

编辑：

刚刚将您的代码更改为：

```
kk.GroupBy(g => g.TestMethodName)
    Select(group =>
        new
        {
            Name = group.Key,
            Students = group.Aggregate("", (a, b) => 
            {
                if (string.IsNullOrEmpty(a))
                {
                    return b.FailedFor;
                }
                else 
                {
                    return string.Join(",", a, b.FailedFor);
                }
            })
        }); 
```

..这就是结果（你说你在追求）：

![查询结果](../Images/a32891a1f2c200e6f701907f349bca9b.png)

# javascript - this.$something = this.$('something') 是什么意思？

> ID：15193735
> 
> 赞同：2
> 
> 时间：2013-03-04T02:39:41.367
> 
> 标签：javascript, backbone.js

我刚刚开始了解[骨干基础知识](http://addyosmani.github.com/backbone-fundamentals/)，不太了解这里发生了什么：

```
this.$input = this.$('#new-todo'); 
```

有人可以给我一个概述/细分这实际上是做什么的吗？

根据我有限的理解告诉我，`this.$('#new-todo')`这是一个典型的 jquery 选择器，它找到`#new-todo`（输入）并将其提供给`this.$input`，（根据[this](http://addyosmani.github.com/backbone-fundamentals/#what-is-el)）是 $(this + 'input') 排序的简写，但这里是我把它弄丢了——为什么它真的在那里？真的只是将`#new-todo`DOM 分配给 $(this + 'input') 吗？如果是这样，使用 this.$('something') DOM 选择器而不是 this.$input 中的内容不是更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:42:41.343

代码示例正在缓存 jQuery 元素。

当您使用 jQuery 构造函数时，您正在查询 DOM；找到所有匹配的元素。根据您使用的选择器，这可能是一项非常昂贵的操作。

如果您计划多次使用 jQuery 对象，最好只查询 DOM 一次。

这是一个例子：

```
var foo = $('.someClass');
foo.css("background-color", "yellow");
console.log(foo.length + " items updated"); 
```

即使上面的代码`foo`多次使用，DOM 也只查询了一次。

如果您的代码使`foo`jQuery 对象这一事实更加明显，那不是很好吗？

```
// a lot of developers like to prepend a $ to variable names
var $foo = $('.someClass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:42:14.057

`Backbone.$`委托给 jQuery（或 Zepto）。

在这种情况下`this.$`，将委托给 jQuery 并返回一个带有 id 的元素`new-todo`

`this.$input`是一个命名约定，表示它`$input`是一个 jQuery 对象。

this 对象指的是一个 Backbone 实例，而不是一个 DOM 上下文。

```
this.$ == jQuery 
```

`this.$input`只是一个属性。

`this.$input = this.$("#new-todo");`可以改写为：

`this.input = jQuery("#new-todo");`或者

```
this.input = $("#new-todo"); 
```

`$input`只是一个任意命名的属性，就像变量可以命名为`$foo`等一样`$bar`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:42:16.477

`this.$input` will be just an attribute to the `object` which `this` is pointing to.

And `this.$('#new-todo')` will find and return the matching element from the current view (element pointed by `el` for the view).

When we do `this.$`, according to the [docs](http://backbonejs.org/#View-dollar), the queries to get the element specified by the selector are scoped within the view's element (say el). [Here](http://api.jquery.com/jQuery/#jQuery1) is what scope means in `jQuery`, referred by `context` there.

Hence `this.$('#new-todo')` isn't same as `jQuery('#new-todo')`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:48:35.273

我知道这并没有这样做，因为除非是字符串`$(this + 'input')`，否则这可能是无效的。`this`我不知道 Backbone，但它似乎`this.$`是 jQuery，所以`this.$("#new-todo")`在 Backbone 中与 相同`jQuery('#new-todo')`，它只是选择该元素。将它存储在一个名为的成员中`$input`允许您只调用一次 jQuery 选择器函数，并且它还允许您`this.$input`在其他方法中引用而无需知道原始选择器。

# objective-c - componentsSeparatedByString：不拆分包含分隔符中所有字符的字符串

> ID：15193737
> 
> 赞同：0
> 
> 时间：2013-03-04T02:39:45.657
> 
> 标签：objective-c, cocoa, nsstring, tokenize

我对`componentsSeparatedByString:`给我奇怪的结果有疑问。

使用此代码：

```
CCLOG(@"    Found string %@",string);
tokens = [string componentsSeparatedByString:@"[,]"];

CCLOG(@"    sanity %@", (NSString *)[tokens objectAtIndex:0]);
int type = [(NSString *)[tokens objectAtIndex:0] integerValue];
int x = [(NSString *)[tokens objectAtIndex:1] integerValue]; //<< breakpoint 
```

我得到这个输出日志：

```
2013-03-03 21:29:39.184 Legends[33427:c07]     Found string 1[0,5]
2013-03-03 21:29:39.185 Legends[33427:c07]     sanity 1[0,5] 
```

所以程序在最后一行中断是有道理的，因为数组标记中的第一个对象具有整个字符串，但不应该将字符串`@"1[0,5]"`拆分为`@"1"` `@"0"`and`@"5"`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:45:34.460

不，您误解了该方法的工作原理。`componentsSeparatedByString:`不使用传递字符串中的单个字符，它使用整个字符串。您的分隔符是三个字符的序列`[,]`。类似的字符串`@"pecan[,]pie"`使用此分隔符，但`@"1[0,5]"`不使用。类似的方法[`componentsSeparatedByCharactersInSet:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW5)会做你所期望的：

```
[string componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"[,]"]]; 
```

如果您想从字符串中提取数字并获取它们的数值，您可能需要查看[`NSScanner`](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html).

# java - 如何将双精度数舍入到小数点后一位？

> ID：15193739
> 
> 赞同：2
> 
> 时间：2013-03-04T02:40:02.567
> 
> 标签：java, double

我正在尝试以 #.# 的格式向我返回一个随机双精度值，但是我得到的值是这样的：0.9395772067578356

由于我无法将参数放在 .nextDouble 中，您如何强制随机返回小数点后一位。

```
 myRandomNumGenerator = new Random();
        loadedValue = myRandomNumGenerator.nextDouble(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T02:45:14.307

```
DecimalFormat oneDigit = new DecimalFormat("#,##0.0");//format to 1 decimal place

System.out.println(oneDigit.format(anyVariable)); //generic usage

loadedValue = Double.valueOf(oneDigit.format(loadedValue));//specific usage posted in comments 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T02:46:01.887

我不认为你可以强迫一个地方返回。但是，您可以将其打印在一个地方。

```
System.out.printf("%.1f", loadedValue); 
```

这会将值打印到一个地方。

# c# - 将 Int32 从托管代码返回到 Delphi

> ID：15193740
> 
> 赞同：3
> 
> 时间：2013-03-04T02:40:12.007
> 
> 标签：c#, delphi

我使用了这篇文章中的信息[Delphi - Accessing data from dynamic array that were paid from an untyped Pointer](https://stackoverflow.com/q/628965)和其他人，加上 Robert Giesecke 的[Unmanaged Exports](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)来编写一些很棒的代码 - 谢谢大家。例如，我编写了将复杂的字节流从 C# 返回到 Delphi 的方法。但是，我在做最简单的事情时遇到了麻烦——从函数调用中返回一个整数。

所以，我在 Delphi 中定义了这个原型：

```
TReturnIntFunc = function(AnInteger: Integer): Integer; safecall; 
```

这在 C# 中：

```
[DllExport("NegateInt", CallingConvention.StdCall)]
[return: MarshalAs(UnmanagedType.I4)]
static Int32 NegateInt([MarshalAs(UnmanagedType.I4)] Int32 AnInteger)
{
  return AnInteger * -1;
} 
```

与我编写的其他方法一样，我动态加载 C# DLL，找到该函数很好，但是当我从 Delphi 执行它时，它会抛出一个异常，并显示消息“安全调用方法中的异常”。

任何线索任何人？我可以并且让 marshal 返回一个 out 或 ref 整数，而不是作为返回值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T04:47:14.013

Safecall 和 StdCall 不是一回事——也可以尝试在 Delphi 端使用 StdCall。

# nginx - nginx 反向代理 websockets

> ID：15193743
> 
> 赞同：25
> 
> 时间：2013-03-04T02:40:19.960
> 
> 标签：nginx, websocket

*nginx 现在支持代理 websockets，但是如果没有单独的location*块适用于使用 websockets 的 URI，我无法找到有关如何执行此操作的任何信息。

我见过一些人推荐这种方法的一些变体：

```
location / {
    proxy_http_version 1.1;

    proxy_set_header    Upgrade     $http_upgrade;
    proxy_set_header    Connection  "upgrade";

    proxy_pass  http://host:port;
} 
```

这会是代理标准 HTTP 和 websockets 的正确方法吗？

我不希望`Upgrade`标题或`Connection`设置为，`upgrade`除非这是浏览器发送的内容，但这些`proxy_set_header`行是 websocket 工作所必需的。

为什么 nginx 不只是转发原始的 Upgrade/Connection 标头？

我已经对此进行了试验，发现 nginx 不会代理`Upgrade`标头并将标头更改`Connection`为`close`from`upgrade`如果在没有这两`proxy_set_header`行的情况下运行。与它们一起，`Connection`用于`upgrade`非 websocket 请求，这也很糟糕。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-04T09:46:36.693

> 为什么 nginx 不只是转发原始的 Upgrade/Connection 标头？

来自[官方文档](http://nginx.org/en/docs/http/websocket.html)：*由于“升级”是逐跳标头，因此它不会从客户端传递到代理服务器*

请参阅[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-13.5.1)。

* * *

> 我不希望将 Upgrade 标头或 Connection 设置为“升级”，除非这是浏览器发送的内容，

还有一个例子：

```
map $http_upgrade $connection_upgrade {
    default upgrade;
    ''      close;
}

server {
    ...

    location /chat/ {
        proxy_pass http://backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
    }
} 
```

* * *

> 对于非 websocket 请求，连接是“升级”，这也很糟糕。

你真的知道`Connection`标题是什么意思吗？只是来自 RFC 的引用：*对于此字段中的每个连接令牌，请从消息中删除与连接令牌同名的任何标头字段。*

怎么可能不好？

# ember.js - 带有 emberjs + ember-data 的子资源

> ID：15193745
> 
> 赞同：7
> 
> 时间：2013-03-04T02:40:36.450
> 
> 标签：ember.js, ember-data

所以我遇到了（我认为是）一个关于 Ember 数据的一般问题。我想知道如何正确自定义适配器以适应以下情况。

假装我有两个对象：`Post`和`Tag`

调用通过ing`App.Post.find()`返回所有帖子，位于。这很好。`GET``api.com/posts``App.Post.find(1)``api.com/posts/1`

`App.Tag.find()`将返回所有可用的标签`api.com/tags`。`App.Tag.find(1)`将在正确的 url 返回适当的标签。也很好。

`App.Post.createRecord({...})`如果我通过它将创建新帖子`POST`到正确的网址。创建`Tags`. 到目前为止，一切都是花花公子。

`Tags`on a`Post`是嵌入的，因为它们在那个帖子上。

```
App.Adapter.map("App.Post", {
    tags: {embedded: 'always'}
}); 
```

在加载期间，Ember-data 一切正常，我仍然非常高兴。

所以我的问题来自将 a 添加`Tag`到 a `Post`。我想`PUT`或`POST`标签对象到`api.com/posts/1/tags`服务器将在其中执行所有服务器端的事情。

目前，

1.  带有配置集的 Ember-data`{embedded: 'always'}`会将整个对象（包括新对象）作为 JSON 字符串化字符串发送`PUT`到。`api.com/posts/1``Post``Tag`

2.  如果没有`{embedded: 'always'}`配置集，ember-data 将尝试`PUT`标记对象`api.com/tags`并发送`Tag`带有`post_id`参数的对象，以便服务器端可以做所有服务器端的事情。

我宁愿不做 1 因为我的服务器不是这样设置的。我宁愿不做 2 因为`PUT/POST/GET`s on`api.com/tags`真的应该是我的应用程序的“标签管理”部分，而不是真正将标签应用于帖子。这种行为的另一个例子是在[Github v3 API for Labels & Issues](http://developer.github.com/v3/issues/labels/#add-labels-to-an-issue)中。

有谁知道用 ember-data 处理这个问题的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:40:26.997

您可以考虑覆盖 RESTAdapter#dirtyRecordsForHasManyChange 函数来管理在事务期间如何处理标签。

但是您没有嵌入关系有点令人困惑，但是您不想在发布模型关系更改期间对标签执行 PUT。我不确定我是否看到了开箱即用适配器行为的问题。

# javascript - Javascript 错误：this.form 未定义，我无法在成员方法中获取对象变量

> ID：15193749
> 
> 赞同：1
> 
> 时间：2013-03-04T02:41:04.283
> 
> 标签：javascript, prototype-programming

我正在使用以下代码：

```
 var frontPic = e.target.files[0]
 var frontPicName = frontPic.name
 var salonId=$("#salonId").val()
 upload = new Upload(frontPicName, salonId)
 upload.resize(frontPic) 
```

调用以下代码

```
function Upload(filename, salonId){

    var form = new FormData()
        form.append("filename", filename)
        form.append("salonId", salonId)
};

Upload.prototype.resize = function(file){
    $.canvasResize(file,
    {
        width: 400,
        height: 0,
        crop: false,
        quality: 100,
        callback: function (data)
        {
            alert(data)
            // Add file data
            this.form.append("file", $.canvasResize('dataURLtoBlob', data));
            $('body').css("background", "url("+data+")")
        }
    });
} 
```

我的 alert(data) 似乎工作正常，所以实际的调整大小操作看起来很好。

但是我收到了`this.form is undefined`该行的错误`this.form.append("file", $.canvasResize('dataURLtoBlob', data));`

什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:44:37.203

您的代码中有两个问题：

1.  被`form`声明为构造函数中的局部变量，而不是对象的属性。

2.  `this`在你的回调函数中不是指`upload`对象。您必须将其存储在局部变量中。

```
function Upload(filename, salonId){

    this.form = new FormData()
    this.form.append("filename", filename)
    this.form.append("salonId", salonId)
};

Upload.prototype.resize = function(file){

    var self = this;

    $.canvasResize(file,
    {
        width: 400,
        height: 0,
        crop: false,
        quality: 100,
        callback: function (data)
        {
            self.form.append("file", $.canvasResize('dataURLtoBlob', data));
            $('body').css("background", "url("+data+")")
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:43:32.673

`this`可能适用于其他东西。您应该在调用之前创建一个引用`$.canvasResize`。

```
Upload.prototype.resize = function(file){
    var self = this;
    $.canvasResize(file, 
```

然后替换`this`为`self`.

# java - 如何像数组一样遍历 LinkedList 中的每个元素？

> ID：15193750
> 
> 赞同：-2
> 
> 时间：2013-03-04T02:41:05.980
> 
> 标签：java, arrays, linked-list

对于 LinkedList 对象，如何遍历 LinkedList 的每个元素？

我知道在数组中我可以为（int x：数组）做，但是我怎样才能为 LinkedList 对象做这个确切的事情呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:43:38.443

是的，您可以使用增强的 for 样式来遍历链表。不过，您将遍历其中的每个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:13:30.267

由于两者都是集合，因此您可以以相同的方式迭代它们。这里（[对于每个循环文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)）解释了不同的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T02:44:29.203

完全相同的方式：

```
for (Something s: SomethingList) {
    // do something with s
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:45:05.447

您还可以为您的链接列表创建参考。`LinkedList ll = YourLinkedList;` 然后你可以做`while (ll != null) ll = ll.next;`。

# objective-c - 将枚举与 NSNumber 进行比较

> ID：15193758
> 
> 赞同：1
> 
> 时间：2013-03-04T02:42:52.650
> 
> 标签：objective-c, cocoa, pointers, comparison, nsnumber

我正在做一些绘图，并有一个名为的类，它为我正在制作的绘图类型`Draw2DHelper`定义一个常量，以及一个使用这些类型的属性：`enum``drawingType`

```
enum {
    LINE_DRAWING,
    BEZIER_PATH_DRAWING,
    FRACTAL_DRAWING,
    POINT_DRAWING
};
typedef NSNumber * drawingTypes;

@property drawingTypes drawingType; 
```

在之前的场景中，我定义了一个 UIPickerView 来反映我的绘图类型，并使用此代码填充绑定到它的数组（这就是我使用 NSNumber 的原因）：我现在已经将问题追溯到关于选择器及其返回数据的方式。我的父 ViewController 中有以下代码：

```
NSNumber *myNum1 = [NSNumber numberWithInt:BEZIER_PATH_DRAWING];
NSNumber *myNum2 = [NSNumber numberWithInt:LINE_DRAWING];
NSNumber *myNum3 = [NSNumber numberWithInt:POINT_DRAWING];
NSNumber *myNum4 = [NSNumber numberWithInt:FRACTAL_DRAWING];

_nameArray = [[NSArray alloc] initWithObjects: @"Bezier Path", @"Line Drawing", @"Point Drawing", @"Fractal Drawing", nil];

_typeArray = [[NSArray alloc] initWithObjects: myNum1, myNum2, myNum3, myNum4,nil]; 
```

所以后来，在 pickerView didSelectRow 方法中我有这个：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent: (NSInteger)component
{
    if (component == 0)
    {
        _drawingType = [_typeArray objectAtIndex: row];
        NSString *drawingTypeName = [ _nameArray objectAtIndex:row ] ;
    }
} 
```

当 _drawingType 被分配时，会发生一些奇怪的事情；我不确定我那里的指针是否正确......我正在使用字符串来填充选择器的视觉效果 - 我应该只使用这些来使比较更容易吗？我究竟做错了什么？我在想我可能没有将数组正确绑定到选择器，所以 didSelectRow 方法没有返回正确的数据。想法？建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:51:15.660

没有看到任何理由，为什么它必须是 NSNumber 对象，只使用整数

```
enum {
    LINE_DRAWING,
    BEZIER_PATH_DRAWING,
    FRACTAL_DRAWING,
    POINT_DRAWING
};
typedef NSInteger drawingTypes;

switch (self.drawingType) //is this inside -create…? that uses type instead   
{
    case POINT_DRAWING:
   // do something
       break;
    case BEZIER_PATH_DRAWING:
   // do something
       break;
   default:
      [self drawRandomSetOfSquaredBezierPaths: (UIBezierPath*) path :(int) maxPoints];
      break;
} 
```

typedefed enums 是一种 C 技术，对象存在于 Objective-C 层。他们不太适合在一起。

也看看`- (void) createDrawing: (drawingTypes) type : (UIBezierPath*) path :(int) maxPoints`我不得不相信，你的意思是传递一个像`(LINE_DRAWING| BEZIER_PATH_DRAWING)`for parameter这样的位掩码`type`。你只能用 C 整数来做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T03:00:41.363

我认为@vikingosegundo的答案是要走的路，但只是为了回答原来的问题：

如果你这样定义你的枚举：

```
enum {
    LINE_DRAWING,
    BEZIER_PATH_DRAWING,
    FRACTAL_DRAWING,
    POINT_DRAWING
};
typedef NSNumber * drawingTypes; 
```

[然后，您可以使用Objective-C 文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)将 NSNumber 对象与枚举进行比较

```
NSNumber *number = (wherever your number comes from)
if ([number isEqualToNumber:@(LINE_DRAWING)]) {
} 
```

这与`[number isEqualToNumber:[NSNumber numberWithInteger:LINE_DRAWIN]])`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T02:59:20.537

您的绘图类型需要是 int 值。不是对象（NSNumber）。

代码应编写如下。

```
typedef enum {
    LINE_DRAWING,
    BEZIER_PATH_DRAWING,
    FRACTAL_DRAWING,
    POINT_DRAWING
} DrawingType;

@property(nonatomic) DrawingType drawingType;

- (void) createDrawing: (DrawingType) type : (UIBezierPath*) path :(int) maxPoints
{
   switch (type)    
   {
    case POINT_DRAWING:
   // do something
       break;
    case BEZIER_PATH_DRAWING:
   // do something
       break;
   default:
      [self drawRandomSetOfSquaredBezierPaths: (UIBezierPath*) path :(int) maxPoints];
      break;
    }

} 
```

# c# - TextBoxOnFocus 的来源

> ID：15193760
> 
> 赞同：0
> 
> 时间：2013-03-04T02:42:55.670
> 
> 标签：c#, winforms, focus

使用 C# WinForms，我用一些额外的功能扩展了 TextBox。除其他外，当文本框获得焦点时，我会突出显示文本。当用户选项卡或单击控件时，这可以正常工作。但是，当整个窗口获得焦点时（例如从另一个应用程序到我的 alt+tab），也会调用 OnFocus，这是不可取的。

有什么想法可以检查 onfocus() 是否因为整个表单获得焦点而被调用？

谢谢，

麦克风

我当前的 OnFocus() 看起来像：

```
 protected void mTextBox_OnFocus(object sender, EventArgs e)
    {
        if (MouseButtons == MouseButtons.None)
        {
            mTextBox.SelectAll();
            mHasFocus = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:46:38.880

在 GotFocus 事件处理程序中，尝试检查 TextBox`Focused`属性是否为真。看：

[Control.Focused 属性 - MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focused%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:22:11.427

尝试使用[Control.Capture](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.capture.aspx)或[ContainsFocus](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.containsfocus.aspx)属性来确定文本框是否已捕获鼠标或包含焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:24:00.753

我建议你这样做：

```
 public class Text : TextBox
  {
    protected override void OnEnter(EventArgs e)
    {
      base.OnEnter(e);
      //To stuff there
    }
  } 
```

我已经尝试过几次来控制焦点，但它非常“滑”。此外，很难确定焦点来自哪里 - 或者正在去哪里

# mysql - 如何编写 MySQL if else endif 语句？

> ID：15193763
> 
> 赞同：5
> 
> 时间：2013-03-04T02:43:35.377
> 
> 标签：mysql, sql, sql-update, sql-insert

我想要一个 MySQL if, else, endif 语句的简单示例。

我想做这样的事情（在Java中）：

```
SELECT COUNT(*) FROM  `table` WHERE  `userID` =  1

if(count == 0){
  INSERT INTO  `table` (`userID`,`A` ,`B`)VALUES ('1',  '323',  '232')
}
else{
  UPDATE  `table` SET  `A` =  '323', `B` =  '232' WHERE  `userID` =1
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T02:58:18.200

MySQL`INSERT ON DUPLICATE KEY UPDATE`允许您更新该值是否已存在，如果不存在则插入。

首先你需要设置一个`UNIQUE`约束，

```
ALTER TABLE myTable ADD CONSTRAINT tb_uq UNIQUE (ID) 
```

如果你想`ID`独一无二，就是这样。（*这只是一个例子*）

```
INSERT INTO tableName(userID, A, B) 
VALUES (1, 323, 232)
ON DUPLICATE KEY
UPDATE  A = 323,
        B = 232 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T02:59:51.037

if 语句（在存储块中）：

```
IF search_condition THEN statement_list
    [ELSEIF search_condition THEN statement_list] ...
    [ELSE statement_list]
END IF 
```

或 if 函数（内联）：

```
IF(expr1,expr2,expr3) 
```

其工作方式为： IF(condition, what_to_do_if_true, what_to_do_if_false ) 最后一部分与“else”相同。if-else-if 需要像这样嵌入：

```
SELECT IF( id==1, "1", IF( ID==2, "2", "Neither" ); 
```

在大多数编程语言中，这将与此相同：

```
if( id == 1 ) {
    print "1"
} elsif( id == 2 ) {
    print "2"
} else {
    print "Neither"
} 
```

# javascript - 在 grunt/requirejs 构建期间设置/取消设置调试标志

> ID：15193767
> 
> 赞同：6
> 
> 时间：2013-03-04T02:43:55.520
> 
> 标签：requirejs, gruntjs, javascript, debugging, build, requirejs, gruntjs

我从[requirejs](/questions/tagged/requirejs "显示标记为“requirejs”的问题")和[gruntjs](/questions/tagged/gruntjs "显示标记为“gruntjs”的问题")开始。我在应用程序中有一个调试标志，例如：

```
var debugEnabled = true; 
```

是否可以通过某种方式将其设置为，从构建中运行的优化中`false`自动设置？`requirejs``grunt`

**编辑：** 为了澄清，我只有一个运行`requirejs`优化器的默认任务。该变量`debugEnabled`位于我的应用程序本身的模块之一中，例如`AppLogger`，它是对`main`.

是否有某种方式`requirejs`构建可以将此变量设置为`false`，以便缩小版本的`AppLogger`将停止执行`console.log`等。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T17:36:49.630

[@asgoth](https://stackoverflow.com/users/1916258/asgoth)的[答案](https://stackoverflow.com/a/15195973/218882)肯定会起作用，但还想出了几个其他选项来在构建过程中“注入”（或删除）代码。

如[示例 build.js 文件](https://github.com/jrburke/r.js/blob/98ead89afaa601a4c4c7e37e967471703f89afea/build/example.build.js)中所述，我们可以`pragmas`在构建过程中使用构建来包含/排除代码片段。

```
//Specify build pragmas. If the source files contain comments like so:
//>>excludeStart("fooExclude", pragmas.fooExclude);
//>>excludeEnd("fooExclude");
//Then the comments that start with //>> are the build pragmas.
//excludeStart/excludeEnd and includeStart/includeEnd work, and the
//the pragmas value to the includeStart or excludeStart lines
//is evaluated to see if the code between the Start and End pragma
//lines should be included or excluded. If you have a choice to use
//"has" code or pragmas, use "has" code instead. Pragmas are harder
//to read, but they can be a bit more flexible on code removal vs.
//has-based code, which must follow JavaScript language rules.
//Pragmas also remove code in non-minified source, where has branch
//trimming is only done if the code is minified via UglifyJS or
//Closure Compiler.
pragmas: {
    fooExclude: true
},

//Same as "pragmas", but only applied once during the file save phase
//of an optimization. "pragmas" are applied both during the dependency
//mapping and file saving phases on an optimization. Some pragmas
//should not be processed during the dependency mapping phase of an
//operation, such as the pragma in the CoffeeScript loader plugin,
//which wants the CoffeeScript compiler during the dependency mapping
//phase, but once files are saved as plain JavaScript, the CoffeeScript
//compiler is no longer needed. In that case, pragmasOnSave would be used
//to exclude the compiler code during the save phase.
pragmasOnSave: {
    //Just an example
    excludeCoffeeScript: true
}, 
```

`jquery.mobile` [我可以在代码](https://github.com/jquery/jquery-mobile/blob/e802d5ad665480d91bdd67e22a2134609fb02d6a/js/events/navigate.js)上看到这一点，这可能是学习`AMD`和借鉴的好地方`requirejs`。

这对我有用：

**AppLogger.js：**

```
/* global console: false */
define(function () {

  var debugEnabled = false;
//>>excludeStart('appBuildExclude', pragmas.appBuildExclude);
  debugEnabled = true;
//>>excludeEnd('appBuildExclude');
  return {
    log:function (message) {
      if (debugEnabled && console) {
        console.log('APP DEBUG: ' + message);
      }
    }
  };

}); 
```

**Gruntfile.js：**

```
requirejs:{
  compile:{
    options:{
      baseUrl:"js/",
      mainConfigFile:"js/main.js",
      name:'main',
      out:'js/main.min.js',
      pragmas:{ appBuildExclude:true }
    }
  }
} 
```

使用`requirejs`my中的这种配置，编译/构建文件中的和`Gruntfile`的编译指示中的部分被剥离。`excludeStart``excludeEnd`

我还在学习`requirejs`，所以没有人声称这是这类事情的最佳实践，但这肯定对我有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T06:42:54.550

假设您有两个任务：

*   发展
*   生产

`development`做你在开发中需要的所有东西，比如 jshint，coffeescript 编译，...... `production`确实需要js优化，css缩小，......

然后你可以注册一个`build`检查你的调试标志的任务：

```
 grunt.registerTask('build', 'run build', function () {
        var task = debugEnabled ? 'development' : 'production';

        // run the targetted task
        grunt.task.run(task);
    }); 
```

在命令行上，`grunt build`将执行它。

或者，您可以在 grunt 中使用[option参数：](http://gruntjs.com/api/grunt.option)

```
 grunt.registerTask('build', 'run build', function () {
        // start development build by default
        var target = grunt.option('target') || 'development';

        // run the targetted task
        grunt.task.run(target);
    }); 
```

在命令行上，`grunt build --target=production`将执行它。

**编辑：**

有点误解了这个问题。我看到的唯一方法是将调试标志分开在一个单独的模块中：

**路径/到/debug.js**

```
define(function() {
   return true;
}); 
```

然后您创建一个生产版本（靠近您的 grunt 任务）：

**路径/to/grunt/tasks/debug.js**

```
define(function() {
   return false;
}); 
```

在您的`requirejs`任务中，您指定该版本：

```
requirejs: {
   options: {
      paths: {
         debug: 'path/to/grunt/tasks/debug.js'
      }
   }
} 
```

# couchdb - CouchDB - 使用文档修订号的正确方法？

> ID：15193771
> 
> 赞同：0
> 
> 时间：2013-03-04T02:44:16.617
> 
> 标签：couchdb

我们是 Couch DB 的新手，不确定如何使用文档修订号。特别是，我们不确定客户端应用程序是否应该知道这个修订号，以及是否应该在每次保存请求时将其发送回服务器以确保连续性。

我们的情况是我们在 CouchDB 和客户端应用程序（用 Actionscript 3 编写的游戏）之间有一个 NodeJS 服务器。游戏世界被分成一个网格，在短时间内可能会对单个图块进行多次更改，每次更改都会产生新的保存请求。由于无法保证两个同时请求会以特定顺序到达服务器，因此我们需要确保仅当切片数据比数据库中已有的数据更新时才会保存切片数据。

我们正在考虑使用附加到每个文档的自定义事务 ID，但我们担心我们可能只是做错了，或者错过了 CouchDB 的一些基本行为（即“正确方式”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T02:50:56.383

是的，`_rev`每次保存时都包含该属性。来自[http://wiki.apache.org/couchdb/HTTP_Document_API#PUT](http://wiki.apache.org/couchdb/HTTP_Document_API#PUT)

> 要更新现有文档，您还可以发出 PUT 请求。在这种情况下，JSON 正文必须包含一个 _rev 属性，它让 CouchDB 知道编辑基于哪个修订版。如果当前存储在数据库中的文档的修订版本不匹配，则返回 409 冲突错误。

有关冲突管理的信息，请参阅： http: [//guide.couchdb.org/editions/1/en/conflicts.html#working](http://guide.couchdb.org/editions/1/en/conflicts.html#working)

# shell - tcsh - 以破折号 (-) 开头的命令行参数

> ID：15193773
> 
> 赞同：2
> 
> 时间：2013-03-04T02:44:30.490
> 
> 标签：shell, unix, tcsh

我需要检查第一个命令行参数以查看它是否为`-cleanup`. 我的代码是：

```
if ( $* != null ) then

if ( "X$argv[$n]" == "X-cleanup" ) then
    echo "its cleanup" 
```

我首先检查以确保至少有 1 个参数。 `n`设置为`1`在程序的开头。当我尝试使用`-cleanup`作为参数运行脚本时，出现此错误：

```
if: Malformed file inquiry. 
```

我从网上找到的几个论坛帖子中尝试了解决方案，但我无法弄清楚如何正确处理破折号。这是一个 tcsh 外壳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:24:26.060

这个脚本片段对我有用：

```
set n = 1
echo $argv[$n]
if ( "$argv[$n]" == "-cleanup" ) then
    echo "its cleanup"
endif 
```

当我运行时`tcsh ./test-cleanup.tcsh -cleanup`产生以下输出：

```
-cleanup
its cleanup 
```

有问题的代码是以下行。当`-cleanup`未引用时，它会将 csh 解释器混淆为文件检查。

```
if ( $* != null ) then 
```

用这一行替换它：

```
if ( "$*" != "" ) then 
```

# prolog - 如何打印出 Prolog 中的所有解决方案？

> ID：15193777
> 
> 赞同：2
> 
> 时间：2013-03-04T02:45:00.487
> 
> 标签：prolog

我正在尝试打印包含问题的所有解决方案的列表，但 Prolog 只给了我部分解决方案，并且像这样在中间切断：

`[[something-something], [something-something], [something-something], [...-...], [...][...].`

如何让 Prolog 打印所有解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T06:50:16.723

我使用 maplist/2

```
?- numlist(1,10,L),maplist(writeln,L).
1
2
3
4
5
6
7
8
9
10
L = [1, 2, 3, 4, 5, 6, 7, 8, 9|...]. 
```

如果您正在运行 SWI-Prolog，您可以指示它避免省略号

```
?- [user].
|: no_ellipsis :-
|:     current_prolog_flag(toplevel_print_options, V),
|:     select(max_depth(_), V, U),
|:     set_prolog_flag(toplevel_print_options, U).
|: end_of_file.
|: % user://3 compiled 0,05 sec, 1 clauses
true.

?- no_ellipsis.
true .

?- numlist(1,20,L).
L = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]. 
```

这样的规则可以放在启动文件中（在 Unix 上是 ~/.plrc ）

或者你可以使用写谓词

```
?- numlist(1,20,L),format('~w',[L]).
[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
L = [1, 2, 3, 4, 5, 6, 7, 8, 9|...]. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T03:15:57.123

你只需要写出来。SWI-Prolog 中默认的交互式漂亮打印机这样做是为了避免让您淹没在输出中。所以，如果你现在正在做：

```
?- foo(X).
X = [[something-something], [something-something], [something-something], [...-...], [...][...]. 
```

而是这样做：

```
?- foo(X), write(X), nl.
... the complete output ...
X = [[something-something], [something-something], [something-something], [...-...], [...][...]. 
```

例如：

```
?- length(X, 10), write(X), nl.
[_G1607,_G1610,_G1613,_G1616,_G1619,_G1622,_G1625,_G1628,_G1631,_G1634]
X = [_G1607, _G1610, _G1613, _G1616, _G1619, _G1622, _G1625, _G1628, _G1631|...]. 
```

# javascript - setTimeout 和 clearTimeout 分配给 var 并指定

> ID：15193778
> 
> 赞同：0
> 
> 时间：2013-03-04T02:45:04.773
> 
> 标签：javascript, jquery, settimeout

```
var nothover = function(){window.setTimeout(function() {
     $('#proFBfeel').hide();
      $('#proFBfeel .moreinfos').html('');
       $('.contact_pro').html('');
     },3000);
   };
  $('#proFBfeel').nothover();
    $('#proFBfeel').hover(function() {
        window.clearTimeOut(nothover);
     });
         $('html').click(function() {
           $('#proFBfeel').hide();
            $('#proFBfeel .moreinfos').html('');
             $('.contact_pro').html('');
          }); 
```

好的，正如您在我分配的 var 中看到的那样`nothover`，setTimeout

三秒钟后，我希望函数运行，除非对象悬停。如果它被悬停以清除超时。

然后一旦回到对象之外再次运行该函数，或者除非他们单击 HTML 元素，然后隐藏该对象。

尽管它对我说，但它运行不正常

未捕获的类型错误：对象 [object Object] 没有方法“nothover”

为什么是这样？如果有人可以提供帮助，我将不胜感激。通过帮助，我的意思是解释一些 javascript 函数以及我将如何确保这些函数正常运行。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:43:22.803

`setTimeout`返回一个值。如果要“取消”超时，请将值提供给`clearTimeout`. 您**没有**将函数传递给`clearTimeout`. 那不会做任何事情。此线程中的任何人似乎都没有注意到这一点。这是有关此的文档：[clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。

这是工作代码：

```
var notHover = function() {
   var timerId = setTimeout(function () {
      $('#proFBfeel').hide();
      $('#proFBfeel .moreinfos').html('');
      $('.contact_pro').html('');  
    }, 3000);

    // return a function which will cancel the timer
    return function () { clearTimeout(timerId); };
};

// start the timer.  We can call cancelTimer() if we want to cancel it
var cancelTimer = notHover();

$('#proFBfeel').hover(function() {
    // mouse in, cancel the notHoverTimer
    if (cancelTimer) {
        cancelTimer();
        cancelTimer= undefined;
    }
}, function () {
    // mouse out, start the timer again
    cancelTimer = notHover();
}); 
```

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:48:37.580

要将方法添加到 jQuery 对象，您必须做`$.fn.nothover = function(){`......您所拥有的只是将函数表达式分配给变量，这绝不会影响 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T03:00:08.507

```
$.fn.nothover = function () {
    function hideIt() {
        this.hide();
        this.find(".moreinfos").html("");
    }
    this.hover(function () {
        window.clearTimeout(hideIt);
    });
    window.setTimeout(hideIt, 3000);
}; 
```

这是否符合您要执行的操作...？

在这段代码中，我通过在`$.fn`对象上定义一个属性来定义一个 jQuery 插件。在这个插件中，我定义了一个函数`hideIt`，其中包含您似乎想要在 3 秒后调用的代码，*除非*用户将鼠标悬停在有问题的元素上，在这种情况下我们清除 3 秒超时。那正确吗？

**尝试#2**

也许是这样的......？

```
$.fn.nothover = function () {
    function initialize() {
        window.setTimeout(doSomething, 3000);
    }

    function doSomething() {
        // do something
    }

    this.hover(function () {
        window.clearTimeout(doSomething);
    }, initialize);

    initialize();
}; 
```

更近一点？

# sql-server - 选择内连接

> ID：15193780
> 
> 赞同：0
> 
> 时间：2013-03-04T02:45:06.210
> 
> 标签：sql-server, select

![在此处输入图像描述](../Images/165de81e4c7c756e6949dd5f9be03bfd.png)

所以我有这 4 张桌子。
基本上我有这个代码。

```
$sql_exp = "SELECT c.Branch
FROM    dbo.users a
        INNER JOIN dbo.FA_Laptop b
            ON a.userID = b.UserID
        INNER JOIN dbo.Branch c
            ON a.BranchID = c.BranchID
WHERE   b.fa_id = $faidf"; 
   $rs = $conn->Execute($sql_exp);   
 if ($rs->EOF) {
    echo "<br><br><tr><td><font size=2> Branch is missing</td>";
} else {
    while (!$rs->EOF){ 
        echo "<br><br><tr><td>".$rs->Fields("Branch")."</td>";
        $rs->movenext();
    }
}
$rs->Close(); 
```

它是我的选择语句，它使我能够打印用户的“分支”（juan），其中 fa_id= $faidf.（对于本例 $faidf="1"）

我接下来要做的是使用 FAID=$faidf（即“1”）打印 Pedro 的分支。虽然他们的 fa_id 不同，但我可以使用laptop_id 连接它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:06:25.240

试试这个 SQL

```
SELECT c.Branchname, a.employeename
FROM   dbo.users a
INNER JOIN dbo.FA_Laptop b
   ON a.userID = b.UserID
INNER JOIN dbo.Branch c
   ON a.BranchID = c.BranchID
WHERE b.Laptop_id=
    (SELECT x.laptop_id FROM FA_Laptop x
     WHERE x.fa_id="$faidf"); 
```

你应该得到
branchname , employeename
1, juan
1, Pedro

那是你要找的吗？

# c++ - 如何让 CMake 在 Ubuntu 上识别 pthread？

> ID：15193785
> 
> 赞同：37
> 
> 时间：2013-03-04T02:45:27.163
> 
> 标签：c++, pthreads, cmake, ubuntu-12.10

如果我直接在命令行上用 g++ 编译，我可以看到我需要的一切都在那里：

```
$ g++ -pthread test.cpp
$ ldd a.out
    linux-vdso.so.1 =>  (0x00007fffd05b3000)
    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f4a1ba8d000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f4a1b870000)
    ...more... 
```

然后我尝试为这个 5 行测试应用程序创建一个简单的 cmake 文件：

```
$ cat CMakeLists.txt 
PROJECT ( Test CXX )
CMAKE_MINIMUM_REQUIRED ( VERSION 2.8 )
FIND_PACKAGE ( Threads REQUIRED )
ADD_EXECUTABLE ( test test.cpp )
TARGET_LINK_LIBRARIES ( test ${CMAKE_THREAD_LIBS_INIT} ) 
```

但是，我无法弄清楚为什么 CMake 找不到它需要使用的内容`Threads`：

```
$ cd build/
$ cmake ..
CMake Error at /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (MESSAGE):
  Could NOT find Threads (missing: Threads_FOUND)
Call Stack (most recent call first):
  /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:288 (_FPHSA_FAILURE_MESSAGE)
  /usr/share/cmake-2.8/Modules/FindThreads.cmake:166 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
  CMakeLists.txt:4 (FIND_PACKAGE)
-- Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-04T02:55:27.527

哦，这太痛苦了！我可能为此浪费了2个小时。这是解决方案：

CMake 使用简短的“C”应用程序来测试/尝试事物。如果 CMakeLists.txt 声明 C++ 用于该项目，但没有列出 C，那么其中一些短路测试错误地失败，然后 cmake 认为这些东西没有找到。

解决方案是从此更改 CMakeLists 的第一行：

```
PROJECT ( Test CXX ) 
```

...将 C 作为一种语言包括在内：

```
PROJECT ( Test C CXX ) 
```

然后 delete `build`，重新创建它，然后一切正常：

```
rm -rf build
mkdir build
cd build
cmake .. 
```

# javascript - 添加 Javascript 后页面未加载

> ID：15193788
> 
> 赞同：-1
> 
> 时间：2013-03-04T02:45:46.887
> 
> 标签：javascript, html, css

这是有问题的页面：

[http://portal.envisionforce.com/cart.php?gid=20](http://portal.envisionforce.com/cart.php?gid=20)

此 javascript 代码已添加到页眉中：

```
<script type='text/javascript' src='http://www.envisionforce.com/wp-content/themes/Minos/data/combined4963.js?ver=1.1'></script> 
```

当它不存在时，页面加载正确，但导航的下拉菜单不起作用。需要进行哪些更改才能使两者都起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:50:17.213

您缺少该脚本所依赖的 jQuery UI 插件。在您添加的行上方添加此脚本。

```
<script type='text/rocketscript' data-rocketsrc='wp-content/themes/Minos/js/jquery-ui4963.js?ver=1.1'></script> 
```

如果您没有将 Firefox 与 FireBug 或 Google Chrome 一起使用，请立即安装 Google Chrome。然后您可以按`F12`访问开发人员工具，该工具有一个 JavaScript 控制台，可以显示您页面上发生的错误。对调试非常有用。

# php - 回显所有数组结果

> ID：15193790
> 
> 赞同：-2
> 
> 时间：2013-03-04T02:45:53.337
> 
> 标签：php, mysql

我在下面得到了这段代码，它只显示了数组的第一个结果。它如何向我展示所有这些？

```
$res = mysql_query("SELECT clients FROM area ORDER BY date") or die("Error: " . mysql_error());
while($row = mysql_fetch_array($res)){ 
    foreach($row as $value){
        $result = explode(",", $value);

        foreach($result as $newvalue){
            $query="SELECT clients FROM names where names.id='$newvalue'";

            $res2 = mysql_query($query);
            $r = mysql_fetch_array($res2);
            $parent = $r['clients']; 
        }
    }

    // echo part

    echo "<td>" . $parent . "</td>";
} 
```

另外，我想回显区域名称和日期，但是当我选择 * 并回显名称和日期时，我什么也没得到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:29:44.670

您的主要问题是您不断重写 $parent 的值；这就是为什么您只能取回一行数据的原因。$parent 需要是一个可以添加到找到的行的数组。

此外，请考虑使用 PHP 的 PDO，它更安全且更面向对象：

```
$database = PDO(/*db_connection_data*/);

$stmt = $database->prepare( "SELECT `clients` FROM `area` ORDER BY `date`" );
$stmt->execute();

$res = $stmt->fetchAll( PDO::FETCH_ASSOC );

if( $stmt->rowCount() > 0 ) { # if results were found

     $parent = array();  # array needs to be initialized or else you keep overwriting it.

     foreach( $res as $value ) {

          $stmt = $database->prepare( "SELECT `clients` FROM `names` WHERE `names.id` = ?" );
          $stmt->bindValue( 1, $value );
          $stmt->execute();

          $res2 = $stmt->fetchAll( PDO::FETCH_ASSOC );

          # use $parent[] to add result as next element of the array 
          if( $res2->rowCount() > 0 ) { $parent[] = $res2[ 'clients' ]; }
          else { $parent[] = ""; }

     }

}

echo "<pre>" . print_r( $parent, 1 ) . "</pre>"; # print the $parent array in a more readable form. 
```

# flash - MAC 上的 Air 返回文件未找到

> ID：15193796
> 
> 赞同：0
> 
> 时间：2013-03-04T02:46:20.063
> 
> 标签：flash, air

我正在开发一个需要从文件系统获取图像的 AIR 应用程序。它根据预先加载的配置文件确定图像的路径。

问题是在 Windows 上，它工作得很好。但在 MAC 上，我收到错误 #2035，找不到文件。

这是我用来加载图像的代码：

```
var L:Loader = new Loader();
        L.contentLoaderInfo.addEventListener(Event.COMPLETE, onImageLoaded);
        L.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onLoadError);
        L.load(new URLRequest(File.desktopDirectory.resolvePath(this.asset_path + this.asset_xml.@image_name).nativePath)); 
```

根据客户的说法，错误消息中显示的路径是正确的：'/Users/Lachlan/Desktop/release/images/aisle_1.jpg'

在这种情况下，我应该尝试以其他方式访问文件吗？

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:55:18.200

您应该尝试使用`url`File Class 的属性而不是 nativePath。

通常 Mac 需要文件协议来访问文件，例如`file:///`

```
 L.load(new URLRequest(File.desktopDirectory.resolvePath(this.asset_path + this.asset_xml.@image_name).url)); 
```

# joomla - 为什么没有加载语言？我做错了什么？

> ID：15193799
> 
> 赞同：0
> 
> 时间：2013-03-04T02:46:29.673
> 
> 标签：joomla, joomla-extensions

我正在开发我的第一个 Joomla 3.0 组件，因此我为语言创建了两个文件夹：

```
com_moving/language/en-GB/en-GB.ini
com_moving/language/es-ES/es-ES.ini 
```

我的moving.xml 就是这个（取自com_ola_j3 我发现的某个地方）：

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="component" version="3.0" method="upgrade">
    <name>COM_MOVING</name>
    <creationDate>Marzo 2013</creationDate>
    <author>Reynier Perez Mira</author>
    <authorEmail>reynierpm@gmail.com</authorEmail>
    <authorUrl>http://www.reynierpm.com</authorUrl>
    <copyright>Copyright (C) 2013 Reynier Perez Mira. Derechos reservados.</copyright>
    <license>http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL</license>
    <version>1.0</version>
    <description>COM_MOVING_DESCRIPTION</description>
    <scriptfile>script.php</scriptfile>

    <install> <!-- Runs on install -->
        <sql>
            <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
        </sql>
    </install>
    <uninstall> <!-- Runs on uninstall -->
        <sql>
            <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
        </sql>
    </uninstall>

    <!-- Site Main File Copy Section -->
    <!-- Note the folder attribute: This attribute describes the folder
    to copy FROM in the package to install therefore files copied
    in this section are copied from /site/ in the package -->
    <files folder="site">
        <filename>index.html</filename>
        <filename>moving.php</filename>
        <filename>controller.php</filename>
        <folder>views</folder>
        <folder>models</folder>
        <folder>language</folder>
    </files>

    <media destination="com_moving" folder="media">
        <filename>index.html</filename>
        <folder>images</folder>
    </media>

    <languages folder="site">
        <language tag="en-GB">language/en-GB/en-GB.com_moving.ini</language>
        <language tag="es-ES">language/es-ES/es-ES.com_moving.ini</language>
    </languages>

    <administration>
        <!-- Administration Menu Section -->
        <menu img="../media/com_moving/images/tux-16x16.png">COM_MOVING_MENU</menu>
        <!-- Administration Main File Copy Section -->
        <!-- Note the folder attribute: This attribute describes the folder
        to copy FROM in the package to install therefore files copied
        in this section are copied from /admin/ in the package -->
        <files folder="admin">
            <!-- Admin Main File Copy Section -->
            <filename>index.html</filename>
            <filename>config.xml</filename>
            <filename>access.xml</filename>
            <filename>moving.php</filename>
            <filename>controller.php</filename>
            <!-- SQL files section -->
            <folder>sql</folder>
            <!-- tables files section -->
            <folder>tables</folder>
            <!-- models files section -->
            <folder>models</folder>
            <!-- views files section -->
            <folder>views</folder>
            <!-- controllers files section -->
            <folder>controllers</folder>
            <!-- helpers files section -->
            <folder>helpers</folder>
        </files>

        <languages folder="admin">
            <language tag="en-GB">language/en-GB/en-GB.com_moving.ini</language>
            <language tag="en-GB">language/en-GB/en-GB.com_moving.sys.ini</language>
            <language tag="es-ES">language/es-ES/es-ES.com_moving.ini</language>
            <language tag="es-ES">language/es-Es/es-ES.com_moving.sys.ini</language>
        </languages>
    </administration>
</extension> 
```

当我转到扩展 > 扩展管理器 > 发现时，我没有得到刚刚得到“COM_MOVING”的组件名称，为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:05:26.627

您应该有两个独立的语言集。一个用于管理端，一个用于站点（前端）。总共，四个文件应位于以下位置：

```
com_moving/admin/language/en-GB/en-GB.ini
com_moving/admin/language/es-ES/es-ES.ini

com_moving/site/language/en-GB/en-GB.ini
com_moving/site/language/es-ES/es-ES.ini 
```

您可以在 xml 文件中看到这一点，其中有两种不同的语言声明，并且每个声明都指定一个文件夹。

# python - 我的函数在 python 中没有返回任何内容

> ID：15193803
> 
> 赞同：0
> 
> 时间：2013-03-04T02:46:42.947
> 
> 标签：python, function, if-statement, printing, nested

我为我在计算机科学课上工作的游戏做了一个函数定义。

```
 def bidf(bid): #this card is going to repeat until they give a valid bid
     bid=float(input("What is your bid? "))
     if bid>pot:
         print("Invalid bid: You can't bid more than what is in the pot")
         bidf()
     elif bid>value:
         print("Invalid bid: You don't have that much")
         bidf()
     elif bid<0:
         print("You can not bid negative money")
         bidf()
     else:
         return float(bid) 
```

并且每次我尝试使用出价变量时它都不起作用例如此代码总是崩溃的地方

```
if g=="y":
      bidf()
      if card(insidecard[0])==card(outsidecard[0]):
           z=input("Will the next card be higher or lower than the pair?(h/l): ")
           if card(insidecard[0])==14 and card(hand[0])==14:
                print("You quadruple your bid and lose $",bid)
                bid=bid*4
                value=value-bid
                pot=pot+bid 
```

我想要做的是让出价出现在打印语句中，以及用于对其他变量进行数学运算的出价。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:48:07.173

`bidf()`用替换所有调用`return bidf()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:58:22.947

调用`bidf()`代码时，需要存储返回值。所以做类似的事情：

```
if g=="y":
    bid = bidf() 
```

# ios - 在 Phonegap 中，HTML 不会随着应用旋转而调整大小

> ID：15193807
> 
> 赞同：4
> 
> 时间：2013-03-04T02:47:14.193
> 
> 标签：ios, html, cordova

我有一个 Phonegap iPhone/iPad 应用程序，当我将 iPad 应用程序旋转到横向时，它就像没有刷新 HTML/CSS 一样，所以我在应用程序右侧卡住了一个黑条。同样的事情，如果我以横向打开应用程序，它看起来不错，但然后旋转到纵向，它需要滚动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T21:25:36.010

我不得不从我的元标记中删除 height=device-height 并修复它。感谢所有帮助过我的人！

# java - 为什么我的 if 语句没有执行并显示 Toast？

> ID：15193809
> 
> 赞同：0
> 
> 时间：2013-03-04T02:47:42.980
> 
> 标签：java, android

我现在正在制作一个简单的密码应用程序。

就像我在VB中所做的那样。

我有我的代码

```
package com.example.password;
import android.widget.*;

import com.example.password.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity {
    Button btn1;
    EditText et1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btn1 = (Button) findViewById(R.id.button1);
        et1 = (EditText) findViewById(R.id.editText1);
    btn1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        if ("u" == et1.getText().toString()){
            Toast.makeText(MainActivity.this, "Yay!! GOOD GUESS", Toast.LENGTH_LONG ).show();

        }

    }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; his adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

没有编译或运行时错误，但是`Toast`当我获得正确的“密码”时没有弹出窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:48:47.680

改变

```
if ("u" == et1.getText().toString()) 
```

到

```
if ("u".equals(et1.getText().toString())) 
```

你也可以做

```
if (et1.getText().toString().equals("u")) 
```

但我相信第一种方法更安全，`NPE`但如果你检查，`null`那么它并不重要。您当前执行此操作的方式检查它们是否引用相同的对象。在处理时使用`.equals("string")`检查值是否相等`String`

**[Java 字符串函数](http://docs.oracle.com/javase/tutorial/java/data/comparestrings.html)**

# c - 通过函数传递结构

> ID：15193810
> 
> 赞同：1
> 
> 时间：2013-03-04T02:47:48.470
> 
> 标签：c, function, struct, parameter-passing

我想为结构employeeData（小时）的每个数组填写第三个参数。

我想通过询问“请输入员工 x 的小时数”来提示手动输入小时数部分，如下所示。但它似乎不起作用。

```
void Get_input (long id_number[], float hours[], int num_empl)
  {
  /*Local Variable Declaration */

int i; /* Variable used in loop counter */

  /* Gets number of employee hours and stores them in an array. */

for (i = 0; i < num_empl; ++i)
  {
    printf("\nEnter the numbers of hours worked by employee # %06li: ",
            employeeData[i].id_number);
    scanf ("%f", &employeeData[i].hours);
  }

 printf("\n\n");
 } 
```

到目前为止，这是我的完整“程序”：

```
/*Define and Includes */

 #include <stdio.h>
 #include <cstdlib> 

 /* Define Constants */
#define NUM_EMPL 5
#define OVERTIME_RATE 1.5f
#define STD_WORK_WEEK 40f

/* Define a global structure to pass employee data between functions  */

 struct employee
 {
 long  id_number;
 float wage;
 float hours;
 float overtime;
 float gross;
 };

 /* define prototypes here for each function except main */

 /************************************************************************/
 /*                      Function: Get_input                             */
 /*                                                                      */
 /*  Purpose:    Obtains input from user, the number of hours worked per */
 /*              employee and stores the results in an array that is     */
 /*              passed back to the calling program by reference.        */ 
 /*                                                                      */
 /*  Parameters: clockNum- Array of employee clock numbers.              */
 /*              hours- Array of number of hours worked by an employee   */
 /*              size- Number of employees to process                    */
 /*                                                                      */
 /*  Returns:    Nothing, since 'clockNum' & 'hours' arrays are passed by */
 /*              reference.                                              */
 /************************************************************************/

 void Get_input (long id_number[], float hours[], int num_empl)
 {
  /*Local Variable Declaration */

int i; /* Variable used in loop counter */

  /* Gets number of employee hours and stores them in an array. */

for (i = 0; i < num_empl; ++i)
  {
    printf("\nEnter the numbers of hours worked by employee # %06li: ",
            employeeData[i].id_number);
    scanf ("%f", &employeeData[i].hours);
  }

  printf("\n\n");
  }  

  void Output_results_screen (struct employee [ ], int num_empl);

  /*************************************************************************
  **                      Function: Output_results_screen                  
  **                                                                       
  **  Purpose:    Outputs to screen in a table format the following        
  **                       information about an employee:  Clock, Wage,    
  **                       Hours, Overtime, and Gross Pay.                
  **                                                                       
  **  Parameters:  employeeData - an array of structures containing        
  **                              employee information                     
  **               size - number of employees to process                   
  **                                                                       
  **  Returns:    Nothing (void)                                           
  **                                                                       
   *************************************************************************/

  void Output_results_screen ( struct employee employeeData[], int num_empl )
  {
    int i;    /* loop index */

         printf ("-----------------------------------------\n");   /*Print Header To Screen */
         printf ("Clock# \t Wage \t Hours \t OT \t Gross\n");
         printf ("-----------------------------------------\n");

    /* printf information about each employee */
    for (i = 0; i < num_empl ; ++i)
    {

         printf("%06li    %5.2f    %4.1f   %4.1f   %8.2f    \n", 
                    employeeData[i].id_number, employeeData[i].wage, employeeData[i].hours, 
                    employeeData[i].overtime, employeeData[i].gross);
    } /* for */

    } /* Output_results_screen */

    int main ()
     {

    /* Variable Declaration and initialization */
    struct employee employeeData[NUM_EMPL] = {
    { 98401, 10.60 },
    { 526488, 9.75 },
    { 765349, 10.50 },
    { 34645, 12.25 },
    { 127615, 8.35 }
    };  

     /* Call various functions needed to reading, calculating, and printing as needed */

        /* Function call to get input from user. */
Get_input (id_number, hours, NUM_EMPL);

   /* Function call to output results to the screen in table format. */
    Output_results_screen (employeeData, NUM_EMPL);
    system("pause");  
    return(0);  /* success */

    } /* main */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:10:16.610

`employeeData`是本地的`main`，无法在内部看到，`GetInput()`所以我假设您遇到了编译器错误。

将该数组放在顶部的所有函数之外（即使其成为全局），它应该可以工作。或者传递一个指向数组的指针，`GetInput`以便您可以读入适当的记录。

# java - 如何打印数组表？

> ID：15193812
> 
> 赞同：1
> 
> 时间：2013-03-04T02:48:01.330
> 
> 标签：java, arrays

我在这里看看是否有人能够帮助解决这个问题。

我正在尝试打印一张看起来像这样的表格

```
 Month #1      Month #2
   Person 1  $1293         $128
   Person 2  $122          $1233 
```

我已经完成了获取数字的所有其他步骤，等等我只是陷入了获取正确输出作为表格的最后一步。

```
int[][] table = new int[people][month];

     // Load the table with values
    for (int i=0; i < table.length; i++){     
          for (int j=0; j < table[i].length; j++){
            table[i][j] = r.nextInt(20000-1000) + 1000;
           }
      }

      // Print the table
      System.out.println("\n\nSummer Internship Salary Information:");
      for (int i=0; i < table.length; i++) {
          for (int j=0; j < table[i].length; j++)                    
             System.out.print ("Person #" + (i+1) + "$" + table[i][j] + "\t");
         System.out.println();     

      } 
```

数组的初始大小由用户确定。以及用值加载表格的第一部分。这可以忽略。

我遇到真正麻烦的部分是从表格中打印出来。从我现在拥有的代码中，它给出了一个输出

```
 person#1 $12312   person #1 $12312
     person#2 $12312   person #2 $12312 
```

（请注意，数字不是正确的数字，它只是一个例子）

我怎样才能使它具有如下所示的输出：

```
 Month#1   Month#2
    Person#1  $12312    $12312
    Person#2  $12312    $12312 
```

在这个练习中，我不允许使用 call 方法或 JCF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:00:37.103

假设所有人的月数相同：

```
System.out.println("\n\nSummer Internship Salary Information:");
for (int j=0; j < table[0].length; j++) {
    System.out.print("\tMonth #" + (j+1));
}
for (int i=0; i < table.length; i++) {
    System.out.print("\nPerson #" + (i+1));
    for (int j=0; j < table[i].length; j++) {
        System.out.print("\t$" + table[i][j]);
    }
}
System.out.println(); 
```

请注意，从内部循环中取出 Person#，并首先打印列标题。

还要注意，如果任何数字太宽（比制表位宽），它会破坏布局。您必须更聪明地解决这个问题（首先找到每列的最大宽度或截断值）

（编辑以将制表符和换行符放在更好的位置；更少的字符串和没有尾随的制表符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:48:06.627

由于列的可变性质，我也会计算每列的“所需宽度”。这将用于“填充”较短的列以确保列对齐......

这将允许增加人数和工资规模，而无需任何额外的补偿......

```
public class SalaryColumns {

    public static void main(String[] args) {

        int people = 20;
        int month = 12;

        String monthLabel = "Month #";
        String personLabel = "Person #";

        Random r = new Random(System.currentTimeMillis());
        int[][] table = new int[people][month];

        int[] columWidths = new int[month + 1];
        columWidths[0] = personLabel.length() + Integer.toString(people).length() + 1;
        // Load the table with values
        for (int i = 0; i < table.length; i++) {
            for (int j = 0; j < table[i].length; j++) {
                table[i][j] = r.nextInt(20000 - 1000) + 1000;
                columWidths[j + 1] = Math.max(
                        columWidths[j + 1], 
                        Math.max(
                            monthLabel.length() + Integer.toString(month).length() + 1, 
                            Integer.toString(table[i][j]).length() + 2));
            }
        }

        // Print the table
        System.out.println("\n\nSummer Internship Salary Information:");
        System.out.print(pad("", columWidths[0]));
        for (int i = 0; i < month; i++) {
            String value = monthLabel + String.format("%d", i);
            value += pad(value, columWidths[i + 1]);
            System.out.print(value);
        }
        System.out.println();

        for (int i = 0; i < table.length; i++) {
            String value = personLabel + String.format("%d", i);
            value += pad(value, columWidths[0]);
            System.out.print(value);
            for (int j = 0; j < table[i].length; j++) {
                value = String.format("$%d", table[i][j]);
                value += pad(value, columWidths[j + 1]);
                System.out.print(value);
            }
            System.out.println();

        }
    }

    public static String pad(String value, int length) {
        StringBuilder sb = new StringBuilder(length);
        while ((value.length() + sb.length()) < length) {
            sb.append(" ");
        }
        return sb.toString();
    }
} 
```

输出类似...

```
 Month #0  Month #1  Month #2  Month #3  Month #4  Month #5  Month #6  Month #7  Month #8  Month #9  Month #10 Month #11 
Person #0  $19428    $6333     $19057    $9502     $3265     $3731     $13855    $10254    $2997     $11370    $3264     $13038    
Person #1  $11988    $2313     $7722     $13457    $1100     $10589    $5453     $5996     $12301    $11490    $12283    $4407     
Person #2  $15179    $13993    $19421    $12370    $12090    $18623    $13716    $13215    $7308     $8446     $6657     $7861     
Person #3  $19673    $2956     $10505    $11141    $2020     $1025     $6833     $8821     $4366     $4127     $8938     $16353    
Person #4  $17210    $9442     $7960     $3178     $19924    $17406    $9637     $11655    $13862    $9136     $17205    $10832    
Person #5  $1609     $16141    $17245    $5073     $5716     $17390    $11861    $10235    $12540    $6037     $5199     $1782     
Person #6  $10721    $2257     $16660    $6635     $17384    $9606     $17578    $16799    $4066     $1960     $9563     $4705     
Person #7  $13224    $17277    $5932     $8532     $17321    $12650    $9672     $12527    $2251     $2702     $9033     $10322    
Person #8  $11625    $14107    $1171     $19300    $18455    $13178    $15637    $19687    $12751    $8870     $9412     $6501     
Person #9  $18550    $17017    $6902     $16676    $1057     $12067    $17656    $9220     $15494    $18450    $17341    $10378    
Person #10 $18408    $1907     $1203     $17781    $17106    $4861     $19259    $16245    $12223    $16278    $4429     $18283    
Person #11 $17548    $6160     $18262    $9116     $15075    $16619    $19431    $3463     $15789    $17814    $2059     $16414    
Person #12 $3882     $14816    $6580     $14257    $2192     $11033    $1387     $12269    $14246    $18406    $14794    $9036     
Person #13 $14124    $10216    $11960    $7462     $18001    $6254     $12928    $18118    $14161    $10585    $8102     $7295     
Person #14 $9849     $4085     $7184     $16173    $6847     $10288    $1796     $17384    $11323    $10811    $2636     $9946     
Person #15 $13500    $15157    $7618     $1810     $9368     $3295     $12586    $17489    $16092    $10978    $15227    $5506     
Person #16 $19668    $8540     $16249    $1039     $13672    $14082    $8978     $2710     $17092    $11280    $8090     $10266    
Person #17 $18138    $7467     $18246    $7110     $16501    $6583     $14026    $14204    $10877    $18628    $14575    $4836     
Person #18 $15090    $1579     $15613    $8480     $15854    $15687    $10024    $17004    $15452    $16351    $13714    $19755    
Person #19 $11015    $1152     $11733    $7620     $18217    $8518     $7243     $11819    $10313    $4339     $13532    $13700 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-13T20:45:09.580

我知道这篇文章很老了，但是因为我经常陷入这个问题，可能是因为在互联网上被很多人观看，我终于想发表我对它的回答。

我写了一个非常简单的类，它使用该`String.format`方法来格式化对象的通用表：

```
public class TableFormatter {
    private int columns;
    private List<String> cells = new LinkedList<>();
    private int minSpacesBetweenCells = 4;
    private boolean alignLeft = true;
    private int maxLength = 0;

    public TableFormatter(int columns) {
        this.columns = columns;
    }

    public TableFormatter insert(Object... cells) {
        for (Object content : cells) {
            String cell = content.toString();
            maxLength = Math.max(maxLength, cell.length());
            this.cells.add(cell);
        }
        return this;
    }

    public TableFormatter setMinSpacesBetweenCells(int minSpacesBetweenCells) {
        this.minSpacesBetweenCells = minSpacesBetweenCells;
        return this;
    }

    public TableFormatter alignCellsToRight() {
        this.alignLeft = false;
        return this;
    }

    public TableFormatter alignCellsToLeft() {
        this.alignLeft = true;
        return this;
    }

    @Override
    public String toString() {
        String format = "%";
        if (alignLeft)
            format += "-";
        format += maxLength + "s";

        String spaces = new String(new char[minSpacesBetweenCells]).replace("\0", " ");

        StringBuilder sb = new StringBuilder();

        int row = 0;
        int currentColumn = 0;
        for (String cell : cells) {
            if (currentColumn == 0) {
                if (row > 0)
                    sb.append("\n");
            } else {
                sb.append(spaces);
            }

            sb.append(String.format(format, cell));

            currentColumn = (currentColumn + 1) % columns;
            if (currentColumn == 0)
                row++;
        }

        return sb.toString();
    }

    public static void main(String[] args) {
        TableFormatter tableFormatter = new TableFormatter(3);

        tableFormatter.insert("column1", "column2", "column3");
        tableFormatter.insert("e11", 12, "e13");
        tableFormatter.insert("e21", "e22", 23);
        tableFormatter.insert(3.1d, "e32", "e33");
        tableFormatter.insert("e41", "e42", true);

        System.out.println(tableFormatter);
    }
} 
```

请参阅类底部的 main 方法。它产生以下输出：

```
column1    column2    column3
e11        12         e13    
e21        e22        23     
3.1        e32        e33    
e41        e42        true 
```

我希望这对这篇文章的下一个访问者有用。

# phpunit - PHPUnit 不允许我包含文件

> ID：15193816
> 
> 赞同：2
> 
> 时间：2013-03-04T02:48:29.600
> 
> 标签：phpunit

每当我尝试包含文件时，PHPUnit 都会给我一条错误消息。例如，以下代码给了我错误：

```
<?php

include_once "PHPUnit/Autoload.php";
require_once "controller/ProductController.php";

class SecurityTests extends PHPUnit_Framework_TestCase
{
    public function testSmth() {
        $this->assertTrue(1==1);
    }
} 
```

?>

但如果我删除第四行 ( `require_once "controller/ProductController.php";`)，它运行良好。

我得到的错误是：

```
Warning: require_once(PHPUnit/Framework/Error.php): failed to open stream: No such file or directory in E:\wamp\bin\php\php5.4.3\pear\PHPUnit\Util\ErrorHandler.php on line 48 
```

**编辑：** 我在 php.ini 文件中的 include_path 是：

```
include_path = ".;E:\wamp\bin\php\php5.4.3\pear\;E:\wamp\www\renting\" 
```

有什么奇怪的：

```
<?php
echo get_include_path(); **// Will echo .;E:\wamp\bin\php\php5.4.3\pear\;E:\wamp\www\renting\** 
require_once 'PHPUnit/Autoload.php';
require_once 'controller/AccountController.php';
echo get_include_path(); **// Will echo E:/wamp/www/renting/** 
```

并且：

```
<?php

require_once 'controller/AccountController.php';
echo get_include_path(); **// Will echo E:/wamp/www/renting/**
require_once 'PHPUnit/Autoload.php';

echo get_include_path(); **// Will not even echo.** 
```

这对我来说很奇怪。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-18T08:52:21.180

我有一个类似的问题，PHPUnit 无法在父目录中找到文件。它仅将文件定位到导入它们的类的当前目录的子目录中，例如

文件结构：

```
var/
    www/
        /api
            index.php
            conf.php
        /config
           dbconfig.php 
```

# 索引.php

```
require_once 'conf.php'; #works fine
require_once '../config/dbconfig.php; #ERROR 
```

PHPUnit 在尝试转到父文件夹时无法找到相对路径。看完[这个答案。](https://stackoverflow.com/a/1882059/9348902)解决方案是 insert `dirname(dirname(__FILE__))`，`dirname(__FILE__)`它返回当前目录`dirname`的路径，通过应用于路径，它返回父路径。

# 索引.php

```
require_once 'conf.php'; #works fine
require_once dirname(dirname(__FILE__)) . '../config/dbconfig.php'; #works fine. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:57:06.233

这是一个已知问题。

验证您的 PHUnit 安装在以下软件包中：

> pear channel-discover pear.phpunit.de
> pear channel-discover components.ez.no
> pear install phpunit/PHP_CodeCoverage

如果您没有权限，请尝试**sudo 。**

一些对您有帮助的链接：

[https://bugs.launchpad.net/ubuntu/+source/phpunit/+bug/701544](https://bugs.launchpad.net/ubuntu/+source/phpunit/+bug/701544)

[运行 phpunit 时找不到致命错误“File/Iterator/Autoload.php”](https://stackoverflow.com/questions/8700642/fatal-error-file-iterator-autoload-php-not-found-when-running-phpunit)

[phpunit require_once() 错误](https://stackoverflow.com/questions/1528717/phpunit-require-once-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T02:38:06.303

好吧，我花了几天时间才弄清楚这一点。我希望没有人会经历我所经历的。

我的 php.ini 中有：

```
include_path = ".;E:\wamp\bin\php\php5.4.3\pear\;E:\wamp\www\renting\" 
```

但是因为我以前不在我的 ini 文件中使用多个 php 包含路径，所以我使用了

```
set_include_path("E:/wamp/www/renting/"); 
```

在某些文件中，即使它们不是我试图包含的文件。

无论如何，这听起来可能很愚蠢和令人困惑，但是**如果您发现自己处于 PHPUnit 由于某种原因无法正确加载的情况，请考虑您的代码以某种方式更改包含路径的可能性。**

# google-maps-api-3 - 无法在谷歌地图 v3 中保留标记

> ID：15193822
> 
> 赞同：1
> 
> 时间：2013-03-04T02:49:26.223
> 
> 标签：google-maps-api-3

```
function showPointMarker (point, index, address, changeCenter, changeZoomLevel) {

    if (changeCenter)
    {
        if (changeZoomLevel) {
        //  marker.setMap(map);
            map = new google.maps.Map(
                      document.getElementById('map'), {
                      center: point,
                      zoom: 7,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    });
        } else {
            map = new google.maps.Map(
                      document.getElementById('map'), {
                      center: point,
                      zoom: 10,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    });

        var letter = String.fromCharCode("A".charCodeAt(0) + index);
        //var letteredIcon = new GIcon(baseIcon);
        //letteredIcon.image = "";
        var pinImage = new google.maps.MarkerImage("http://www.google.com/mapfiles/marker" + letter + ".png" ,
                new google.maps.Size(21, 34),
                new google.maps.Point(0,0),
                new google.maps.Point(10, 34));
        var siteLatLng = new google.maps.LatLng(point.hb,point.ib);
        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            icon:pinImage,
            html: address
        });
        marker.setMap(map);
        google.maps.event.addListener(marker, "click", function () {
            //  alert(this.html);
              infowindow.setContent(this.html);
              infowindow.open(map, this);
          });

        } //else ends here
    } // if change center ends here

} //function ends here 
```

我正在尝试在地图上添加标记，我无法保留我以前的标记，我只看到最后一个，请在这里帮助我。感谢您的帮助。我在这里遗漏了一些东西，任何人都可以指出我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:55:04.700

看起来您每次都在重新初始化地图。您只想执行一次这些操作，例如：

```
if( ! map ) {
    map = new google.maps.Map(        
    // ... 
```

使 map 成为一个以 null 开头的全局变量。

```
var map = null; 
```

此外，如果您正在刷新页面，则需要重绘循环中的所有点。

# javascript - 如何在 MongoDB 中检索“相关”文档？

> ID：15193824
> 
> 赞同：1
> 
> 时间：2013-03-04T02:49:48.133
> 
> 标签：javascript, node.js, mongodb, express, mongoskin

我正在为 MongoDB 使用 node.js、express 和 MongoSkin 驱动程序。

我正在尝试在我的博客应用程序中呈现一个显示博客文章列表的视图。每个帖子都有一个作者 ID 的引用。我正在尝试对每个帖子进行第二次查询，以获取每个参考文献的完整作者文档。一切都是异步的让我很困惑。

在获取博客文章列表的回调中，我将遍历每篇文章并进行第二次调用以获取相关用户。我不知道如何仅在所有帖子都添加了作者文档后才呈现视图。我什至不确定我是否做对了这些。我如何参考其他文件来完成我想做的事情？

```
// getPageOfPosts is a custom helper that accepts the page number and number of items to retrieve.
db.collection('blogPosts').getPageOfPosts(req.param('page') || 1, 3, function (err, blogPosts) {
    if (err) req.next(err);
    blogPosts.forEach(function (blogPost) {
        db.collection('users').findOne({ _id: blogPost.authorId }, function (err, user) {
            if (err) req.next(err);
            blogPost.author = user;
        });
    });
    var viewModel = {
        posts: blogPosts
    };
    res.render('blog/index', viewModel);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:31:42.560

您可以在 nodejs [https://github.com/caolan/async](https://github.com/caolan/async)中使用异步库。这有助于串行或并行执行一组函数，一旦所有这些都完成，就会调用最终回调，您可以在其中进行渲染部分。

* * *

## 由问题作者编辑：

这是一个很好的建议，效果很好！就是这样：

```
db.collection('blogPosts').getPage(req.param('page') || 1, 3, function (err, blogPosts) {
    if (err) req.next(err);
    var addUsersArray = [];
    blogPosts.forEach(function (blogPost) {
        addUsersArray.push(function (callback) {
            db.collection('users').findOne({ _id: blogPost.author }, function (err, user) {
                if (err) callback(err);
                blogPost.author = user;
                callback(null, blogPost);
            });
        });
    });
    async.parallel(addUsersArray, function (err, blogPosts) {
        if (err) req.next(err);
        var viewModel = {
            posts: blogPosts
        };
        res.renderView('blog/index', viewModel);
    });
}); 
```

以下也很好用

```
db.collection('blogPosts').getPageOfPosts(req.param('page') || 1, 3, function (err, blogPosts) {
if (err) req.next(err);
async.each(blogPosts,function (blogPost,cb) {
    db.collection('users').findOne({ _id: blogPost.authorId }, function (err, user) {
        if (err) req.next(err);
        blogPost.author = user;
        cb(err);
    });
},function(error)
{
    var viewModel = {
    posts: blogPosts
    };
    res.render('blog/index', viewModel);
}); 
```

});

# regex - 尝试解析 Linux 版本

> ID：15193834
> 
> 赞同：0
> 
> 时间：2013-03-04T02:50:19.057
> 
> 标签：regex, python-2.7, python-2.6

我正在尝试使用以下正则表达式解析 linux 版本

```
^Linux version ([0-9a-z.-]*) \([^@]*@[^)]*).* 
```

这是结果

Traceback（最近一次调用最后）：
文件“”，第 1 行，模块
文件“/usr/lib/python2.6/re.py”，第 190 行，编译
返回 _compile(pattern, flags)
文件“/usr/lib/python2.6/re.py”，第 245 行，在 _compile 中
引发错误，v # invalid expression
sre_constants.error: unbalanced parenthesis

如何解决这个问题？，我的正则表达式有问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:54:06.167

```
^Linux version ([0-9a-z\.\-]*) ([^@]*@[^)]*).* 
```

您没有逃脱第一组方括号中的破折号。破折号有一个特殊的值（它表示一组值，也就是 0 到 9，A 到 Z。因此它必须被转义。

您还转义了一个圆括号“（”，我认为您不是故意的，因为这会导致括号不平衡。如果您确实想要，也可以转义第二个括号（见下文）。

选择：

```
^Linux version ([0-9a-z\.\-]*) \([^@]*@[^)]*\).* 
```

# php - jquery onhover 有效，onclick 无效

> ID：15193836
> 
> 赞同：0
> 
> 时间：2013-03-04T02:50:34.420
> 
> 标签：php, javascript, jquery

我在我的漫画网站上添加了喜欢/不喜欢的功能。

我已经为它制作了自定义图形。

*   当用户将鼠标悬停在选择上时，它会改变，然后从悬停中切换回来......

*   当用户点击时，它会交换图像，直到他们再次点击相同的投票，它会切换回原来的。

![在此处输入图像描述](../Images/85e4c7a01e2fbfa74665757c55bc56f3.png)

悬停有效，但点击无效...我正在尝试使用 Jquery 实现这一点：

```
<script type="text/javascript">
  var images = {
      "like": [
        "./images/SiteDesign/like_hover.png",
        "./images/SiteDesign/like.png",
        "./images/SiteDesign/liked.png"         
        ],
      "dislike": [
        "./images/SiteDesign/dislike_hover.png",
        "./images/SiteDesign/dislike.png",
        "./images/SiteDesign/disliked.png"
        ]);

jQuery(document).ready(function($) {
                $("#like, #dislike").hover(function(e) {
                     // mouseover handler
                     if (this.id in images) // check for key in map
                         this.src = images[this.id][0];
                }, function(e) {
                     // mouseout handler
                     if (this.id in images)
                         this.src = images[this.id][1];
                });

                $("#like, #dislike").click(function(e) {
                    alert("clicked");
                    if (this.id in images) // check for key in map
                         this.src = images[this.id][2];
                }, function(e) {
                     // mouseout handler
                     if (this.id in images)
                         this.src = images[this.id][1];
                });                     
            });
</script> 
```

有什么想法吗？我什至在 click 函数中放置了一个 alert("clicked") ，但它甚至没有调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:55:54.553

替换这个：

```
$("#like, #dislike").click(function(e) {
      alert("clicked");
      if (this.id in images) // check for key in map
            this.src = images[this.id][2];
}, function(e) {
      // mouseout handler
      if (this.id in images)
            this.src = images[this.id][1];
}); 
```

有了这个：

```
$("#like, #dislike").click(function(e) {
      alert("clicked");
      if (this.id in images)
            this.src = images[this.id][2];
}); 
```

**编辑：**

事实上，这样做会更容易：

```
$("#like, #dislike").on({
    mouseenter: function() {
       if (this.id in images) this.src = images[this.id][0];
    },
    mouseleave: function() {
       if (this.id in images) this.src = images[this.id][1];
    },
    click: function() {
       if (this.id in images) {
           this.src = images[this.id][2];
           $(this).off('mouseenter mouseleave');
       }
    }
}); 
```

# php - 如何在 Azure 上启用 Zend Guard Loader 扩展 (ZendLoader.dll)？

> ID：15193837
> 
> 赞同：1
> 
> 时间：2013-03-04T02:50:36.393
> 
> 标签：php, azure

我有一个运行 php 5.3 的天蓝色网站和使用 Zend Guard 加密的文件。我无法加载 ZendGuard 扩展。我遵循了这个建议：http: [//blogs.msdn.com/b/silverlining/archive/2012/09/17/using-custom-php-extensions-in-windows-azure-web-sites.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/09/17/using-custom-php-extensions-in-windows-azure-web-sites.aspx)

我有一个应用设置：PHP_EXTENSIONS = bin/ZendLoader.dll

我有一个 .user.ini 文件，其中 upload_max_filesize = 10M

```
[Zend]
zend_loader.enable=1
zend_loader.disable_licensing=0
zend_extension="bin/ZendLoader.dll" 
```

正在采用upload_max 设置，所以我知道正在加载文件，并且PHP_EXTENSIONS 在PHPinfo 中显示为服务器变量，但没有加载扩展名。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T00:01:57.963

我刚刚写了一篇关于如何[在 Windows Azure 网站中启用 ZendGuard](http://blog.syntaxc4.net/post/2013/07/25/enabling-zendguard-encoding-in-windows-azure-web-sites.aspx)的博文。

一个主要的不同是 ZendLoader 是一个 ZendExtension，它需要一个应用程序设置键**PHP_ZendExtensions**而不是**PHP_Extensions**

此[链接](http://forums.iis.net/post/1994318.aspx)描述了如何在 PHP 中配置 ZendGuard，并在 IIS 中使用 FastCGI 运行。

# jquery-mobile - 根据 jQuery Mobile 中的设备/屏幕分辨率更改元视口

> ID：15193838
> 
> 赞同：1
> 
> 时间：2013-03-04T02:50:36.957
> 
> 标签：jquery-mobile, media-queries, viewport

我想改变我的视口：

```
<meta name="viewport" content="user-scalable=no"> 
```

至：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

基于设备屏幕。第一个示例非常适合 iPad，但在 iPhone 上，我有一个我想要启动的响应式样式表。

我已经尝试过我从这个问题修改的这个片段。[根据设备分辨率更改视口](https://stackoverflow.com/questions/6216409/changing-viewport-based-on-device-resolution)

```
// Check for iPhone screen size
if($.mobile.media("screen and (min-width: 320px)")) {
    // Change viewport for smaller devices
    $('meta[name=viewport]').attr('content','width=device-width, initial-scale=1');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T03:47:46.667

我想到了。问题出在我的媒体查询上。它应该是最大设备宽度，而不是最小宽度或最大宽度。

```
// Check for device screen size
if($.mobile.media("screen and (max-device-width: 480px)")) {
    // Change viewport for smaller devices
    $('meta[name=viewport]').attr('content','width=device-width, initial-scale=1');
} 
```

# image - Magento 导入产品 API 调用模型：product_api：创建产品 1 产品需要 40 秒

> ID：15193839
> 
> 赞同：2
> 
> 时间：2013-03-04T02:50:37.493
> 
> 标签：image, magento, import, product, magmi

有人知道为什么 api 调用需要这么多时间来创建 1 个产品吗？

对于一个客户来说，一个产品需要 1-3 秒，对于另一个客户来说，相同的代码需要 30 秒到 1 分钟。

我从 Alan Storm [http://alanstorm.com/magento_soap_api_shell_scripts的文章“Scrubbing Bubbles for Magento's SOAP”中得到它](http://alanstorm.com/magento_soap_api_shell_scripts)

因此，您可以跳过 SOAP 或 XML-RPC 层并在核心中使用直接调用。

更新（1）：我看到索引是很久以前（几周）建立的，之后它的速度要快得多。但不要太快。每个产品 6 秒，3 秒仅用于产品的创建。在另外 3 秒内更新股票 api 并添加媒体 api。

更新（2）：索引正在重建（在程序中也自动）但今天每个产品需要 40 秒（这怎么可能，网店不慢）

UPDATE(3)：这个是缓存问题，每次清空缓存（storage cache），3-6秒再刷一次（只是第一次没问题，一大堆产品，以后每晚都会出几个新的产品）。

更新（4）：是的，Magmi 的速度非常快，每小时 18.000 个产品，并且创建了所有图像和额外图像（包括自己的 ERP 扩展记录）。但是插件gallery_images的目录问题，花了最多时间让它工作，我的程序是从根+子目录运行的，而Magmi将根+子目录作为“根”，所以我不得不改变Magmi，以确定是否有创建产品也不例外，因为我必须在之后做自己的事情（为 ERP 扩展创建记录）。

UPDATE(5)：Magento API（创建产品）和 Magmi 有什么区别？Magmi 在数据库中创建直接记录，但如果扩展做额外的事情核心扩展可能被 Magento API（创建产品）覆盖，我认为你必须自己做的事情，因此我找到 Magento API（创造产品）更安全使用，或不使用？（第一次慢，正常后，​​但在任何版本中都是安全的）

问题：我创建这个是因为我在论坛上看到，Magmi 和 Martinez 速度很快，但他们都有问题，你不能做所有事情。所以我只使用 Magmi 来更新产品，速度非常快（Martinez 也是）。**但这是真的吗，还是您通常也可以使用 Magmi 或 Martinez 轻松创建产品？**（我的程序对我来说总是第二种可能性）。但我现在去试试这个（Magmi），因为这一切都太慢了。

回答：是的，现在使用 Magmi 似乎可以轻松创建产品 .. 我还不知道因为其他扩展而错过了什么 ..

代码：

```
 $model = Mage::getModel('catalog/product_api');

  $type = 'simple';
  $product_attribute_set_id = '9';
  $sku = ($products_array[$p][0]);
  $data = array('short_description' => $products_array[$p][3],
                'name' => $products_array[$p][1],
                'weight' => ((float)str_replace(",", ".", $products_array[$p][16])),
                'price' => ((float)str_replace(",", ".", $products_array[$p][7])) * $profit,
                'cost' => ((float)str_replace(",", ".", $products_array[$p][8])),
                'description' => $products_array[$p][2],
                'tax_class_id' => $tax_class_id,
                'status' => '1',
                'eancode' => $products_array[$p][4],
                'afas_sku' => $products_array[$p][0],
                'leverancier' => $supplier,
                'inhoud_verpakking' => $products_array[$p][0],
                'size' => $products_array[$p][13],
                'material' => $products_array[$p][15],
                'kleur' => $color,
                'manufacturer' => $manufacturer,
                'delivery' => $delivery,
                'pptitleadditional' => $products_array[$p][24],
                'meta_title' => $products_array[$p][1] . " | " . $products_array[$p][23] . " | xxxxx.nl",
                'meta_description' => "xxx.",
                'categories' => array('0' => $cat_new_prod1[(string)( $products_array[$p][0])],
                                      '1' => $cat_new_prod2[(string)( $products_array[$p][0])],
                                      '2' => $cat_new_prod3[(string)( $products_array[$p][0])],
                                      '3' => $cat_new_prod4[(string)( $products_array[$p][0])],
                                      '4' => $cat_new_prod5[(string)( $products_array[$p][0])]
                                     )
               );
  try {
    $new_product_id = $model->create($type,$product_attribute_set_id,$sku,$data);
  } catch (Exception $e) { // sku already used
    userErrorHandler(E_USER_WARNING, $e->getMessage(), $e->getFile(), $e->getLine(), "");
    continue;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:17:11.227

查看 Magmi wiki “ [Project origins](http://wiki.magmi.org/index.php?title=Project_Origins) ” 条目，您就会明白为什么要花费这么多时间。

Magmi Datapump [API](http://wiki.magmi.org/index.php?title=Magmi_Datapump_API)非常适合调整您的脚本，几乎不需要修改

# java - 创建一个使用数组的自定义类

> ID：15193840
> 
> 赞同：0
> 
> 时间：2013-03-04T02:50:40.073
> 
> 标签：java, arrays, class, nullpointerexception

我创建了一个类，它的对象是将帐号与帐号数组进行比较，并调用一个方法来返回一个数字是否有效。我收到以下编译器错误：program07.Program07.main(Program07.java:18) 的 program07.AccountVal.(AccountVal.java:12) 的线程“main”java.lang.NullPointerException 中的异常

这是我的课

```
package program07;

public class AccountVal
{
    private String[] accountNums;
    private String newAccount;

    public AccountVal()
    {
        accountNums[0] = "5658845";
        accountNums[1] = "8080152";
        accountNums[2] = "1005231";
        accountNums[3] = "4520125";
        accountNums[4] = "4562555";
        accountNums[5] = "6545231";
        accountNums[6] = "7895122";
        accountNums[7] = "5552012";
        accountNums[8] = "3852085";             
        accountNums[9] = "8777541";
        accountNums[10] = "5050552";
        accountNums[11] = "7576651";
        accountNums[12] = "8451277";
        accountNums[13] = "7825877";
        accountNums[14] = "7881200";
        accountNums[15] = "1302850";
        accountNums[16] = "1250255";
        accountNums[17] = "4581002";
        newAccount = "";
    }

    public void setAccountNums(String[] acc)
    {
        accountNums = acc;
    }

    public void setNewAccount(String newAcc)
    {
        newAccount = newAcc;
    }

    public String[] getAccountNums()
    {
        return accountNums;
    }

    public String getNewAccount()
    {
        return newAccount;
    }

    public boolean AccountValidation(String newAccount)
    {
        boolean test = false;

        for (int i = 0; i < 18; i++)
        {
            if(newAccount == accountNums[i])
            {
                test = true;
            }
        }
        return test;
    }
} 
```

错误从程序中引用的行是我声明对象时：

```
AccountVal test = new AccountVal(); 
```

任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:52:29.250

`NPE`发生在这条线上

```
accountNums[0] = "5658845"; 
```

因为`String`数组`accountNums`尚未初始化。你可以这样做：

```
private String[] accountNums = new String[18]; 
```

* * *

或者，您可以声明您的数组，而不是使用数组大小​​和使用索引：

```
private String[] accountNums = { "5658845", "8080152", ... }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:52:38.373

您永远不会初始化`accountNums`数组。你需要说：

```
private String[] accountNums = new String[18]; 
```

# html - 我希望我的标签与我的输入字段垂直对齐

> ID：15193848
> 
> 赞同：14
> 
> 时间：2013-03-04T02:51:28.720
> 
> 标签：html, css, forms, input, label

这是我到目前为止的工作：

[http://jsfiddle.net/2RCBQ/](http://jsfiddle.net/2RCBQ/)

```
<div id="main">
<form>
    <label>First Name:<input type="text" id="firstname"></label><br/>
    <label>Last Name:<input type="text" id="lastname"></label><br>
    <label>E-Mail:<input type="text" id="email"></label><br/>
    <label>Phone:<input type="text" id="phone"></label><br/>
</form>
</div> 
```

CSS

```
#main {
    width:300px;

}  

#main input {
    float:right;
    display:inline;
}

#main label {
    color: #2D2D2D;
    font-size: 15px;
    width:250px;
    display: block;
} 
```

目前，标签（左侧）有点靠近输入字段的顶部（右侧）。我想将它们垂直对齐，以便标签位于输入字段的中间。

我试过垂直对齐，但它不起作用。请帮助我尝试找出问题所在。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T04:16:37.740

我觉得嵌套`<span>`增加了很多不必要的标记。

`display: inline-block`让`<label>`和`<input>`坐在一起，就像`float: right`但不破坏文档流一样。此外，如果您（或用户的屏幕阅读器）想要更改`font-size`.

编辑：[jsfiddle](http://jsfiddle.net/2RCBQ/8/)

```
label, input {
    display: inline-block;
    vertical-align: baseline;
    width: 125px;
}

label {
    color: #2D2D2D;
    font-size: 15px;
}

form, input {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
}

form {
    width: 300px;
}
```

```
<form>
    <label for="firstname">First Name:</label><input type="text" id="firstname">
    <label for="lastname">Last Name:</label><input type="text" id="lastname">
    <label for="email">E-Mail:</label><input type="text" id="email">
    <label for="phone">Phone:</label><input type="text" id="phone">
</form>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-16T10:47:08.280

您可以使用 flexbox css 进行垂直对齐。

只需包装父元素`display-flex`。

```
.display-flex {
    display: flex;
    align-items: center;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T03:06:43.077

html:

我在您的标签中添加跨度，以便我们可以添加特定于文本标签的样式：

```
<div id="main">
    <form>
        <label><span>First Name:</span><input type="text" id="firstname"></label><br/>
        <label><span>Last Name:</span><input type="text" id="lastname"></label><br>
        <label><span>E-Mail:</span><input type="text" id="email"></label><br/>
        <label><span>Phone:</span><input type="text" id="phone"></label><br/>
    </form>
</div> 
```

CSS：

```
#main label span {
    position:relative;
    top:2px;
} 
```

[**演示**](http://jsfiddle.net/jhunlio/2RCBQ/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T03:02:56.577

您可以将`<label>`元素包含在跨度中并将跨度设置`vertical-align`为`middle`

**HTML**

```
<div id="main">
    <form> <span><label>First Name:<input type="text" id="firstname" /></label></span>
        <br/> <span><label>Last Name:<input type="text" id="lastname" /></label></span>
        <br/> <span><label>E-Mail:<input type="text" id="email" /></label></span>
        <br/> <span><label>Phone:<input type="text" id="phone" /></label></span>
        <br/>
    </form>
</div> 
```

* * *

**CSS**

```
#main {
    width:300px;
}
#main input {
    float:right;
    display:inline;
}
#main label {
    color: #2D2D2D;
    font-size: 15px;
}
#main span {
    display: table-cell;
    vertical-align: middle;
    width:250px;
} 
```

* * *

[http://jsfiddle.net/2RCBQ/2/](http://jsfiddle.net/2RCBQ/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T01:17:01.580

我认为以下是**适用于所有输入类型**的唯一方法。

```
label { display: flex; align-items: center; }
input { margin: 0; padding: 0; }
```

```
<label><input type="checkbox">&nbsp; HTML</label>
<label><input type="radio">&nbsp; JS</label>
<label>CSS &nbsp;<input type="text"></label>
<label>Framework &nbsp;
  <select><option selected>none</option></select>
</label>
```

我放`&nbsp;`是因为它似乎是对齐不同输入类型的最简单方法；但是，边距工作得很好。

# java - 字符串没有被返回返回 因此我无法在另一个类中使用该字符串

> ID：15193853
> 
> 赞同：0
> 
> 时间：2013-03-04T02:52:12.830
> 
> 标签：java, android, string, return

我在这里有一个小问题。最后我有一个`public String`和一个`return`。return 应该得到值，所以我可以在另一个类中使用它，但这没有发生。从另一个类调用该字符串后，我想将 setText 设置为文本字段。我有一种感觉，好像我在 for 循环中遗漏了一些东西，但我可以看到什么？任何提示和答案都非常感谢:)

```
public String Question (String quesion)
    {
        RandomMathQuestionGenerator questionGenerator = new RandomMathQuestionGenerator();
        List<Question> randomQuestions = questionGenerator.getGeneratedRandomQuestions();
        for (Question question : randomQuestions) 
        {
            System.out.println(question);//prints questions
        }
        return quesion;
    } 
```

在我的另一堂课上

```
String ArithmeticQuestion = null;
    ArithmeticQuestion = question.Question(ArithmeticQuestion);

    EditText editText = (EditText)findViewById(R.id.displayBox);
    editText.setText(ArithmeticQuestion); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:57:17.677

您将 null 传递给 Question（顺便说一句，方法和变量在 Java 中应以小写字母开头），Question 正在返回该 null，然后您将 null 分配回 ArithmeticQuestion。这可能不是你想要做的。

如果您想从列表中传回一个随机问题，您可以执行以下操作：

```
public String Question (String quesion)
{
    RandomMathQuestionGenerator questionGenerator = new RandomMathQuestionGenerator();
    List<Question> randomQuestions = questionGenerator.getGeneratedRandomQuestions();
    for (Question question : randomQuestions) 
    {
        System.out.println(question);//prints questions
    }
    Random random = new java.util.Random();
    return randomQuestions.get(random.nextInt(randomQuestions.size())).toString();
} 
```

但是仍然没有使用问题，因此您可以将方法更改为无参数参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:01:10.037

您从未在 Question 方法中使用过“问题”，因此它将返回 null，您应该根据您的要求更新您的方法。

您的程序违反了 N 种 java 编码实践，例如保留有意义的方法名称、变量名称等。

此外，您从 List 获取字符串的整个逻辑也丢失了。

# java - 如何在java中创建一个接受回调函数的方法？

> ID：15193856
> 
> 赞同：0
> 
> 时间：2013-03-04T02:52:26.897
> 
> 标签：java, asynchronous

我创建了一个分布式锁类，我设计成这样使用：

```
myLock.lock();
doSomething();
myLock.unlock(); 
```

在我当前的实现中，lock() 会阻塞，直到获得锁为止。但是我在这个实现中遇到了一些死锁问题。所以我想将它重写为异步的，但我不知道如何在 java 中做到这一点。

我认为这样的事情会起作用：

```
myLock.lock(myCallbackFunction);

private void myCallbackFunction(boolean result){
    if(result){
        doSomething();
        mylock.Unlock();
    }
} 
```

有没有办法在java中做到这一点？

编辑（更详细）：同步实现死锁的原因很复杂且不相关。分布式锁是通过具有多个系统的网络获取资源的互斥。实际上，我唯一要寻找的是如何编写一个接受回调函数的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:54:05.963

你还不能在 Java 中做到这一点。你*可以*做的是定义一个`LockCallback`接口：

```
interface LockCallback {
  void run(boolean result, MyLock lock);
} 
```

并`MyLock#lock`以 a`LockCallback`作为参数。然后调用者可以将其称为

```
myLock.lock(new LockCallback {
  public void run(boolean result, MyLock lock) {
    // ... do whatever needs to be done ...
    lock.unlock();
  }); 
```

Java 8 中的 Lambda 语法应该使它看起来不那么难看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:05:17.783

与其编写自己的想法然后因为无法使其工作而放弃这个想法，为什么不使用已经存在并正确实现的[Semaphore呢？](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)

# android - 如何将片段放置到 Activity 的默认根 ViewGroup 中？

> ID：15193864
> 
> 赞同：1
> 
> 时间：2013-03-04T02:53:28.083
> 
> 标签：android, android-fragments, android-actionbar

根据android开发者指南，

> 要开始，您的布局必须包含一个 ViewGroup，您可以在其中放置与选项卡关联的每个 Fragment。确保 ViewGroup 具有资源 ID，以便您可以从选项卡交换代码中引用它。或者，如果选项卡内容将填充活动布局（不包括操作栏），那么您的活动根本不需要布局（您甚至不需要调用 setContentView()）。相反，您可以将每个片段放在默认的根 ViewGroup 中，您可以使用 android.R.id.content ID 来引用它（您可以在片段事务期间在下面的示例代码中看到此 ID）。

但是没有`setContentView()`，每当我调用 时`getActionBar()`，它都会返回 null。我想知道如何将片段放入`default root ViewGroup`？我是通过 XML 还是以编程方式添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:33:36.737

> 但是没有 setContentView()，每当我调用 getActionBar() 时，它都会返回 null

您在哪些 Android 版本上进行了测试？如果我没记错的话，这确实发生在 11 和 12 API 级别上，但在其他版本上它可以工作。

为避免复杂化，您只需将内容视图设置为一个简单的布局，`FrameLayout`并将其用作片段的容器。您也可以尝试在[`Window.FLAG_ACTION_BAR`](http://developer.android.com/reference/android/view/Window.html#FEATURE_ACTION_BAR)没有内容视图的情况下使用：

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:47:23.100

您可以将片段添加到具有 id 的默认视图组`android.R.id.content`。您不需要使用来布局您的活动`setContentView()`。

```
mFragmentTransaction.add(android.R.id.content, mFragment, mTag); 
```

# c# - 如何从 NUnit 测试中启动控制台

> ID：15193866
> 
> 赞同：0
> 
> 时间：2013-03-04T02:53:58.267
> 
> 标签：c#, testing, nunit, moq

我正在运行 NUnit 测试。我需要启动控制台来对其进行测试。当我写在我的[测试]

```
Console.Write("test"); 
```

它不起作用。我知道我们不应该运行控制台或进行人机交互。但我有需要在控制台上显示消息的情况。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:56:49.103

如果您使用的是 ReSharper 测试运行器，如果您需要查看控制台上显示的内容，则应显示控制台输出。为此，请单击测试运行器工具栏中的“显示输出”按钮：

![在此处输入图像描述](../Images/d2aee8f94e7aa80d0921fa7a09075cac.png)

然后，您将能够看到如下输出：

![在此处输入图像描述](../Images/a13e871cc206dc0affd917002c0f658a.png)

或者，如果您使用 NUnit GUI 运行器，则会有一个“文本输出”选项卡，它应该会显示您需要的内容。

或者，当然，您可以使用 Debug.WriteLine 代替输出到 VS 的“输出”框。

# java - Arraylist，无与伦比的类型：DieClass 和 int

> ID：15193872
> 
> 赞同：0
> 
> 时间：2013-03-04T02:54:47.097
> 
> 标签：java, methods, for-loop, arraylist, dice

尝试编写一个“掷”骰子并显示玩家和计算机掷骰结果的程序，以及找出每个数字掷了多少。比如说，玩家掷出 3 4 3 5 6，那么玩家就有了一场由 2 个 3 组成的比赛。还没有编写代码来显示匹配。

我的问题是我正在尝试将滚动记录到`ArrayList`，然后比较玩家和计算机滚动`ArrayList`的每个数字，并计算每个数字出现的次数，但我不断收到错误

> 错误：无法比较的类型：DieClass 和 int

每当我尝试从 ArrayList 进行比较时

有问题的程序使用类中的方法`DieClass`

```
import java.util.ArrayList;
public class DieTester
{
private static ArrayList<DieClass> player = new ArrayList<DieClass>();
private static ArrayList<DieClass> computer = new ArrayList<DieClass>();

public static void main(String[] args)
{
    for(int a = 1; a <= 5; a++)
    {
        DieClass roller = new DieClass();
        player.add(roller);
    }
    for(int a = 1; a <= 5; a++)
    {
        DieClass roller = new DieClass();
        computer.add(roller);
    }
    System.out.println("The user rolls: "+player);
    System.out.println("The computer rolls: "+computer);
}

public String findMatching()
{
    int count1 = 0;
    int count2 = 0;
    int count3 = 0;
    int count4 = 0;
    int count5 = 0;

    for(int i=1; i<player.size(); i++)
    {
        if(player.get(i)==1)
        {
            count1++;
        }
        else if(player.get(i)==2)
        {
            count2++;
        }
        else if(player.get(i)==3)
        {
            count3++;
        }
        else if(player.get(i)==4)
        {
            count4++;
        }
        else if(player.get(i)==5)
        {
            count5++;
        }
    }

    for(int i=1; i<player.size(); i++)
    {
        if(computer.get(i)==1)
        {
            count1++;
        }
        else if(computer.get(i)==2)
        {
            count2++;
        }
        else if(computer.get(i)==3)
        {
            count3++;
        }
        else if(computer.get(i)==4)
        {
            count4++;
        }
        else if(computer.get(i)==5)
        {
            count5++;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:04:38.890

您的问题是您正在将 DieClass 与 Integers 进行比较

```
 if(player.get(i)==1) 
```

对于计数器，为什么不使用 int 数组？喜欢

```
int counters [] = new int[6]; 

counters[2]++; 
```

请发布 DieClass，但是，我认为您的代码应该是这样的。

```
for (DieClass dieClass : player) {          
counters[dieClass.getNumber()-1]++; //Supose that DieClass has a getNumber method and set minus one because counters goes from 0 to 5
} 
```

# javascript - 在 rowview (Titanium) 中创建倒计时

> ID：15193873
> 
> 赞同：0
> 
> 时间：2013-03-04T02:54:51.240
> 
> 标签：javascript, titanium, appcelerator, countdown

我是 Appcelerator Titanium APP 开发的初学者。[受此](http://cssgallery.info/create-a-countdown-timer-with-titanium-appcelerator/)链接的启发，我正在尝试创建一个倒数计时器以在 TableRowView 中工作，因为每一行都有自己的时间设置。我自定义这个类来显示**小时**和分钟和秒。

我在每个 TableRowView 中创建了以下代码以动态执行列表中的倒计时。

**代码 1**

```
my_timer[timer_index] = new countDown(parseInt(timer_index), parseInt(15), parseInt(50),
function() {
    remainingTime.text = ''+my_timer[timer_index].time.h + " : " + my_timer[timer_index].time.m + " : " + my_timer              [timer_index].time.s;
}, function() {
    //alert("The time is up!");
    }
); 
```

my_timer[timer_index++].start();

**my_time**用于推送每行的所有倒数计时器实例。

数据来自 XHR，因此我创建了一个数组文字来保存代码片段中的所有实例。

**问题**：当我尝试使用此代码运行我的应用程序时，它向我显示一个异常，说“`time.h`未定义”之类的内容。但是，`time.h`正如您在代码中看到的那样，我进行了定义。

此外，我可以通过使用**单个数组将此类用于多个倒计时**

例如：

```
my_timer[0] = new countDown(2,5,5,function(){
    somelabel1.text = my_timer[0].time.h+":"+my_timer[0].time.m+":"+my_timer[0].time.s;
})
my_timer[1] = new countDown(2,5,5,function(){
    somelabel1.text = my_timer[1].time.h+":"+my_timer[1].time.m+":"+my_timer[1].time.s;
}) 
```

上面的代码完美运行，没有错误。但是如果我尝试在循环中使用这个类并传递索引号而不是像**Code 1**中的硬编码值，它会显示我上面所说的异常。

任何帮助都将是非常可观的。

先感谢您。

![在 TableRowView 中使用倒数计时器创建的愿望屏幕](../Images/e031469adf23a9dd3e0bae84a25be37b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:39:48.537

好吧，如果我不得不猜测，我必须猜测，因为你没有给我们一个完整的例子，甚至没有描述你的问题......

直觉是你循环创建行，在嵌套函数中引用一个可变变量（remainingTime）。但是当您继续循环中的下一个项目时，剩余时间会发生变化。所以当嵌套函数引用它时，它和你最初指定的不一样，所以只有最后一个计时器在更新。

下面的代码证明了这一点，该代码警告“3”三次。

```
for (var i = 0; i < 3; i++) {
    setTimeout(function() {
        alert(i);
    }, 100);
} 
```

如果你不知道为什么，或者如何解决它，那么我建议你多花点时间在篝火旁喝杯咖啡和一本关于 JavaScript 的好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:24:13.733

感谢您的时间和答案。我刚刚通过自定义 CountDown 类解决了这个问题

```
var countDown = function(h, m, s, _instance_index, fn_tick, fn_end) {
        return {
            total_sec : h * 60 * 60 + m * 60 + s,
            timer : this.timer,
            instance_index : _instance_index,
            set : function(h, m, s) {
                this.total_sec = parseInt(heart) * 60 * 60 + parseInt(e) * 60 + parseInt(s);
                this.time = {
                    h : h,
                    m : m,
                    s : s
                };
                return this;
            },
            start : function() {
                var self = this;
                this.timer = setInterval(function() {
                    ///alert('running');
                    if (self.total_sec) {
                        self.total_sec--;
                        var hour = parseInt(self.total_sec / (60 * 60));
                        var min = (self.total_sec - (parseInt(hour * (60 * 60))) - (self.total_sec % 60)) / 60;

                        self.time = {
                            h : parseInt(self.total_sec / (60 * 60)),
                            m : parseInt(min),
                            s : (self.total_sec % 60)
                        };
                        fn_tick(self.time.h + ":" + self.time.m + ":" + self.time.s, self.instance_index);
                    } else {
                        self.stop();
                        fn_end();
                    }
                }, 1000);
                return this;
            },
            stop : function() {
                clearInterval(this.timer);
                this.time = {
                    h : 0,
                    m : 0,
                    s : 0
                };
                this.total_sec = 0;
                return this;
            }
        };
    }; 
```

并使用以下代码调用此类：

```
 my_timer[items_json.Record.NEW[i].ASSIGN_QUEST_ID] = new countDown(parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), items_json.Record.NEW[i].ASSIGN_QUEST_ID, function(curr_time, instance_index) {
                                        questTime[instance_index].text = 'TIME LEFT ' + curr_time;

                                    }, function() {
                                        //alert("The time is up!");
                                    });
                                    my_timer[items_json.Record.NEW[i].ASSIGN_QUEST_ID].start(); 
```

# primefaces - , 过滤器和转换器

> ID：15193876
> 
> 赞同：0
> 
> 时间：2013-03-04T02:55:26.057
> 
> 标签：primefaces

我有一个带过滤器的菜单。值和标签都是字符串。在这种情况下，是否必须设置“转换器”属性？我问的原因是如果没有提供“转换器”，过滤器功能将不起作用。例如，

```
<p:selectOneMenu value="#{menuBean.selectedCountry}" filter="true" filterMatchMode="startsWith">
    <f:selectItem itemLabel="Select One" itemValue=""/>
    <f:selectItem itemLabel="US" itemValue="1"/>
    <f:selectItem itemLabel="Spain" itemValue="2"/>
</p:selectOneMenu> 
```

感谢您的积分和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:26:54.003

您没有指定您的 primefaces 版本，但这是 3.4 中的错误。您可以设置 p:selectOneMenu 的高度属性，也可以从此处应用以下修复。 [带有过滤器的 SelectOneMenu 不能使用少于 10 个元素](https://code.google.com/p/primefaces/issues/detail?id=4594)。

# java - 防止 Java 7 过早 GC

> ID：15193878
> 
> 赞同：1
> 
> 时间：2013-03-04T02:55:34.367
> 
> 标签：java, garbage-collection, benchmarking, jit

类似于[可以防止 JIT 优化远离方法调用吗？](https://stackoverflow.com/questions/12176175/can-jit-be-prevented-from-optimising-away-method-calls)我正在尝试跟踪长期存在的数据存储对象的内存使用情况，但是我发现如果我初始化一个存储，记录系统内存，然后初始化另一个存储，有时编译器（可能是 JIT）足够聪明请注意，不再需要这些对象。

```
public class MemTest {
    public static void main(String[] args) {
       logMemory("Initial State");
       MemoryHog mh = new MemoryHog();
       logMemory("Built MemoryHog");
       MemoryHog mh2 = new MemoryHog();
       logMemory("Built Second MemoryHog"); // by here, mh may be GCed
    }
} 
```

现在链接线程中的建议是保留指向这些对象的指针，但 GC 似乎足够聪明，可以告诉这些对象不再被使用`main()`。我可以在最后一次调用之后添加对这些对象的`logMemory()`调用，但这是一个相当手动的解决方案 - 每次我测试一个对象时，我都必须在最后一次调用之后进行某种副作用触发调用`logMemory()`，否则我可能会得到不一致的结果.

我正在寻找一般案例解决方案；我知道`System.out.println(mh.hashCode()+mh2.hashCode())`在末尾添加一个电话`main()`方法就足够了，但我不喜欢这个有几个原因。首先，它引入了对上述测试的外部依赖——如果删除了 SOUT 调用，则 JVM 在内存记录调用期间的行为可能会发生变化。第二，容易出现用户错误；如果上面测试的对象发生变化，或者添加了新对象，用户必须记得手动更新这个 SOUT 调用，否则他们会在测试中引入难以检测的不一致。最后，我根本不喜欢这个解决方案的打印——这似乎是一个不必要的黑客攻击，我可以通过更好地理解 JIT 的优化来避免。最后一点，Patricia Shanahan 的回答提供了一个合理的解决方案（明确打印输出是出于内存健全的目的），但如果可能的话，我仍然想避免它。

所以我最初的解决方案是将这些对象存储在一个静态列表中，然后在主类的 finalize 方法*中迭代它们，如下所示：

```
public class MemTest {
    private static ArrayList<Object> objectHolder = new ArrayList<>();

    public static void main(String[] args) {
       logMemory("Initial State", null);
       MemoryHog mh = new MemoryHog();
       logMemory("Built MemoryHog", mh); // adds mh to objectHolder
       MemoryHog mh2 = new MemoryHog();
       logMemory("Built Second MemoryHog", mh2); // adds mh2 to objectHolder
    }

    protected void finalize() throws Throwable {
        for(Object o : objectHolder) {
            o.hashCode();
        }
    }
} 
```

但是现在我只解决了这个问题一步——如果 JIT 优化了 finalize 方法中的循环，并决定不需要保存这些对象怎么办？诚然，对于 Java 7 来说，也许简单地将对象保存在主类中就足够了，但是除非有文档证明 finalzie 方法不能被优化掉，否则*理论上*仍然没有什么可以阻止 JIT/GC 尽早摆脱这些对象，因为我的 finalize 方法的内容没有副作用。

一种可能性是将 finalize 方法更改为：

```
protected void finalize() throws Throwable {
    int codes = 0;
    for(Object o : loggedObjects) {
        codes += o.hashCode();
    }
    System.out.println(codes);
} 
```

据我了解（我在这里可能是错的），调用`System.out.println()`会阻止 JIT 摆脱这段代码，因为它是一种具有外部副作用的方法，所以即使它不会影响程序，也不能删除。这是有希望的，但如果我能提供帮助，我真的不希望输出某种乱码。JIT 不能（或不应该！）优化离开`System.out.println()`调用的事实向我表明 JIT 有副作用的概念，如果我可以告诉它这个 finalize 块有这样的副作用，它永远不应该优化它离开。

所以我的问题：

*   holdijng 是否是主类中的对象列表足以防止它们被 GC 处理？
*   循环遍历这些对象并`.hashCode()`在 finalize 方法中调用一些微不足道的东西就足够了吗？
*   用这种方法计算和打印一些结果是否足够？
*   JIT 是否知道其他方法（例如`System.out.println`）无法优化掉，或者更好的是，有没有办法告诉 JIT 不要优化掉方法调用/代码块？

*一些快速测试证实，正如我所怀疑的，JVM 通常不会运行主类的 finalize 方法，它会突然退出。JIT/GC 可能仍然不够聪明，无法仅仅因为 finalize 方法存在而对我的对象进行 GC，即使它没有运行，但我不确定情况总是如此。如果它没有记录在案的行为，我不能有理由相信它会保持真实，即使它现在是真实的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:28:54.953

是`mh1`的，那时收集垃圾是合法的。那时，没有可能使用该变量的代码。如果 JVM 可以检测到这一点，则相应的`MemoryHog`对象将被视为不可访问……如果 GC 将在该点运行。

稍后调用 like`System.out.println(mh1)`将足以阻止对象的收集。在“计算”中使用它也是如此；例如

```
 if (mh1 == mh2) { System.out.println("the sky is falling!"); } 
```

* * *

> 在主类中保存一个对象列表是否足以防止它们被 GC？

这取决于声明列表的位置。如果列表是一个局部变量，并且之前变得不可访问`mh1`，那么将对象放入列表中没有任何区别。

> 循环遍历这些对象并在 finalize 方法中调用像 .hashCode() 这样的微不足道的东西就足够了吗？

在调用该`finalize`方法时，GC 已经确定该对象不可达。该`finalize`方法可以防止对象被删除的唯一方法是将其添加到其他（可达）数据结构或将其分配给（可达）变量。

> JIT 是否知道其他方法（如 System.out.println）不能被优化掉，

是的......任何使对象可到达的东西。

> 甚至更好，有没有办法告诉 JIT 不要优化方法调用/代码块？

没有办法做到这一点......除了确保方法调用或代码块做一些有助于执行计算的事情。

* * *

**更新**

首先，这里发生的并不是真正的 JIT 优化。相反，JIT 正在发出某种“映射”，GC 使用该“映射”来确定*局部变量*（即堆栈上的变量）何时死亡……取决于程序计数器（PC）。

> 您禁止收集的示例都涉及通过 SOUT 阻止 JIT，我想避免这种有点 hacky 的解决方案。

嘿......任何取决于垃圾收集时间的确切时间都是黑客攻击。您不应该在适当设计的应用程序中这样做。

> 我更新了我的代码，以明确保存我的对象的列表是主类的静态变量，但似乎如果 JIT 足够聪明，一旦它知道主方法不需要它们，理论上它仍然可以 GC 这些值.

我不同意。在实践中，JIT 无法确定 a`static`永远不会被引用。考虑这些情况：

*   在 JIT 运行之前，似乎什么都不会`static s`再次使用。JIT 运行后，应用程序加载一个新类，该类引用`s`. 如果 JIT “优化”了`s`变量，GC 会将其视为不可访问，并且要么`null`它要么创建一个悬空引用。当动态加载的类然后查看`s`它时，会看到错误的值......或更糟。

*   如果应用程序......或应用程序使用的任何库......使用反射，那么它可以引用任何`static`变量的值，而 JIT 不会检测到这一点。

因此，虽然理论上可以进行这种优化，但在少数情况下：

*   在绝大多数情况下，你不能，并且
*   在极少数情况下，回报（在性能改进方面）很可能可以忽略不计。

> 我同样更新了我的代码，以澄清我说的是主类的 finalize 方法。

主类的 finalize 方法无关紧要，因为：

*   您没有创建主类的实例，并且
*   finalize 方法不能引用另一个方法（例如`main`方法）的局部变量。

> ...它的存在阻止了 JIT 破坏我的静态列表。

不对。无论如何，该`static`列表不能被核弹；往上看。

> 据我了解，JIT 知道 SOUT 有一些特别之处，这会阻止它优化此类调用。

没有什么特别的`sout`。这只是我们**知道**会影响计算结果的东西，因此我们**知道**JIT 不能合法地优化掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:34:03.587

这是一个可能有点矫枉过正的计划，但应该是安全且相当简单的：

*   保留对对象的引用列表。
*   最后，遍历对 hashCode() 结果求和的列表。
*   打印哈希码的总和。

打印总和可确保最终循环无法优化。对于每个对象创建，您唯一需要做的就是将其放入 List add 调用中。

# django - 我可以将一个 django 站点放在另一个站点中吗？

> ID：15193881
> 
> 赞同：0
> 
> 时间：2013-03-04T02:55:51.747
> 
> 标签：django, django-sites

我开始分别开发两个站点，但现在我需要将它们合并（所以[http://site1.com/site2](http://site1.com/site2)）指向 site2（它有一个单独的 settings.py）。

我可能会重构代码并使 site2 成为 site1 的应用程序，但我怀疑有一种简单的方法。此外，site2 使用不同的数据库，我不打算混淆这两个数据库......

如果我想使用子域（如 site2.site1.com），它会更容易吗？

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:04:55.380

最简单的方法是将两个 Django 应用程序分开，但使用反向代理（例如 nginx）将它们呈现为一个站点。应用程序将存在于不同的服务器上，或者至少在不同端口上的同一台服务器上提供服务，并且 nginx 将根据请求的路径将请求代理到一个应用程序或另一个应用程序。

# mysql - 更新多个表中的数据

> ID：15193886
> 
> 赞同：1
> 
> 时间：2013-03-04T02:56:55.410
> 
> 标签：mysql, sql, sql-update

三表如下

```
mysql> select * from food;
+--------+------+-------+
| foodid | name | price |
+--------+------+-------+
|      1 | 雞   |   100 |
|      2 | 鴨   |   200 |
|      3 | 魚   |   300 |
|      4 | 肉   |   400 |
+--------+------+-------+
4 rows in set

mysql> select * from drink;
+---------+------+-------+
| drinkid | name | price |
+---------+------+-------+
|       1 | 紅茶 |    50 |
|       2 | 綠茶 |   100 |
|       3 | 奶茶 |   150 |
+---------+------+-------+
3 rows in set

mysql> select * from order_table;
+----+-----------+--------+---------+------------+-------------+-------------+
| id | user_name | foodid | drinkid | food_count | drink_count | total_price |
+----+-----------+--------+---------+------------+-------------+-------------+
|  2 | 小明      |      3 |       2 |          2 |           2 |           0 |
|  3 | 小華      |      1 |       1 |          1 |           8 |           0 |
|  4 | 小英      |      1 |       3 |          3 |           3 |           0 |
|  6 | 小a       |      2 |       1 |          4 |           6 |           0 |
|  7 | 小b       |      2 |       2 |          5 |           4 |           0 |
|  8 | 小c       |      2 |       3 |          6 |          10 |           0 |
|  9 | 大A       |      3 |       1 |          9 |           8 |           0 |
| 10 | 大B       |      3 |       2 |          5 |           4 |           0 |
| 11 | 大C       |      3 |       3 |         10 |           3 |           0 |
+----+-----------+--------+---------+------------+-------------+-------------+ 
```

order_table 中的 foodid 是指向食物表
中的 foodid 的链接，order_table 中的 drinkid 是指向饮料表中的 drinkid 的链接，

现在，我想计算总价，

```
Total_price = 
    order_table.foodid(food.price in food table) * order_table.food_count +
    order_table.drinkid(drink.price in drink table) * order_table.drink_count; 
```

所以，让我知道更新总价的命令

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:02:44.433

我在以下查询中使用的原因`LEFT JOIN`是因为我假设某些订单可能只包含`drinks`or `foods`。

```
UPDATE  order_table a
        LEFT JOIN food b
            ON a.foodid = b.foodID
        LEFT JOIN drink c
            ON a.drinkID = c.drinkID
SET     a.total_price = (a.food_count * COALESCE(b.price, 0) +
                        a.drink_count * COALESCE(c.price, 0)) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/40d15/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:01:15.047

这样的事情应该很接近：

```
SELECT COALESCE(F.Price,0)*OT.Food_Count+COALESCE(D.Price,0)*OT.Drink_Count Total_price 
FROM Order_Table OT
    LEFT JOIN Food F ON OT.FoodId = F.FoodId
    LEFT JOIN Drink D ON OT.DrinkId = D.DrinkId 
```

并实际更新该列：

```
UPDATE Order_Table OT
    LEFT JOIN Food F ON OT.FoodId = F.FoodId
    LEFT JOIN Drink D ON OT.DrinkId = D.DrinkId
SET OT.Total_Price =  COALESCE(F.Price,0)*OT.Food_Count+COALESCE(D.Price,0)*OT.Drink_Count 
```

# java - 如何防止 PrintWriter 在每个文件的开头打印一个空行？

> ID：15193889
> 
> 赞同：0
> 
> 时间：2013-03-04T02:57:31.050
> 
> 标签：java

我正在尝试编写几种方法来将二叉树保存到文件中。它们工作正常，除了一个小问题。问题是在创建的每个文件的开头都插入了一个空行。为什么 PrintWriter 会这样做，我该如何防止它发生？

这是我的代码：

```
import java.io.*;

void callSaveGame(String fileName) throws IOException {
    PrintWriter out = new PrintWriter(new FileWriter("X:\\path\\to\\save\\directory\\" + fileName)); // associate PrintWriter with file

    saveGame(root, out);

    out.close();
}

void saveGame(Node current, PrintWriter out) {
    if (current != null) {
        out.println(current.getData()); // print node to file

        saveGame(current.getLChild(), out); // call for left child(ren)

        saveGame(current.getRChild(), out); // call for right child(ren)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:03:36.217

不是`PrintWriter`插入空行。 `PrintWriter`不会那样做。

问题的实际原因未显示在您提供的代码片段中，但如果代码准确反映了您的实际应用程序，那么有问题的空白行已经在第一次`getData()`调用的结果中。

# php - 什么是与 PHP 框架的依赖注入结合的好的 DAO 模式？

> ID：15193891
> 
> 赞同：4
> 
> 时间：2013-03-04T02:57:37.260
> 
> 标签：php, dependency-injection, dao

我正在开发一个基于依赖注入的 PHP 框架。我的数据对象是可注入的组件，就像其他任何组件一样。

我有一个抽象 DAO 类，每个模型都应该扩展它，它具有：

*   基本的crud方法
*   对 DI 容器的引用，用于实例化对象

简而言之，事情就是这样

```
abstract class AbstractDao {
  protected $fields;
  protected $container; // This is the (injected) DI container, used to create instances.
  protected $driver; // The injected database driver (i.e. PDO)
  public function insert() {
    // Insert implementation
    // Insert current instance.
  }
  public function fetch($id) {
    // Fetch implementation
    // Fetches a row and sets fields on current instance
  }
  public function fetchAll() {
    // Performs a select * query on database driver
    // Iterates through results, and creates an instance
    // for each result using $container, like this:
    foreach ($results as $row) {
      // I can't just make $instances[] = new Something(), or all the
      // dependency injection thing would mess up.
      $instances[] = $this->container->get('someDao');
    }
    return $instances;
  }
  // Other methods.
}

class Book extends AbstractDao {
  protected $fields = array('field', 'definition', 'goes', 'here',);
  // No special behaviour is needed, so we can keep default
  // abstract implementation without overriding.
} 
```

我的问题：每个数据对象实现（一本书、一个人、一个用户等）都必须扩展我的 AbstractDao 对象，**因此它将承担**$driver 和 $container 的重量。此外，由于 $fields 属性是在实例级别定义的，因此每个数据对象都有自己的，增加了更多开销。

我担心在处理大数据集时，就性能而言，此解决方案可能会导致非常昂贵的解决方案。我知道对象只会被引用，而不是被克隆，但开销可能会非常高。

我想到的几个解决方案是

*   使用静态方法实现，可以减少子类的开销
*   不要让我的 Daos 扩展上面提到的 AbstractDao，那应该成为一种 DaoProvider。在这种情况下，对于每种方法，我都应该传入实例（我不太喜欢的东西）

我不太喜欢这些解决方案...首先我不喜欢使用静态的东西，因为它们与注入的整个想法有点冲突。其次，我不喜欢删除 dao 子类模式的想法。

任何好主意将不胜感激，谢谢。

**=== 编辑 ===**

我又想到了一件事。我不喜欢第二种方法（“dao 提供者”）是提供者必须对 Dao 字段执行操作（设置值、设置状态、设置 isDirty 等），因此必须使字段可以从外部访问. 使用子类化方法可以保持那些受保护的或私有的。

**=== /编辑 ===**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:50:31.130

我建议您创建一个 DAO 接口来声明 DAO 实现必须定义的行为。现在，在每个具体的 DAO 实现中，您都可以定义您的`$driver`,`$container`和`$fields`实例字段。

之后，您可能希望创建一个`AbstractModel`每个具体模型都应扩展的类，以便您的`AbstractModel`模型和具体模型都将“与数据访问无关”。该`AbstractModel`课程最终将如下所示：

```
/*
* an AbstractModel
*/
abstract class AbstractModel {

    protected $daoImpl;

    function __construct(DAOInterface $daoImpl) {
        $this->daoImpl = $daoImpl;
    }

    //some other functions that are common to concrete models
}

/*
* a concrete model
*/
class Model extends AbstractModel {

    function findAll($params) {
        //You can use the $daoImpl of AbstractModel to perform a CRUD operation
        $this->daoImpl->findAll($params);
    }

} 
```

现在，每当您实例化一个具体模型时，您都会将 DAO 实现注入到模型类中。

```
//inject a DAOInterface implementation into Model
$model = new Model(new DAOImpl());
$model->findAll($params); 
```

这里的优点是您可以在测试期间存根不同的 DAO 实现，也许这就是 DI 容器派上用场的地方。几天前我在创建 DI 容器时创建了一个[类似的代码示例。](https://github.com/tafadzwagonera/dutu/blob/master/tests/test.php)

顺便说一句，我认为不需要将`$container`对象放入 AbstractDAO 中，为什么不传入调用容器属性时返回的对象。这样，您可以使用[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)来强制对象参数为某种类型，并在传入错误的对象时鼓励采用快速失败机制，并且您可能还会发现创建一个 Config 类来处理您的`$driver`详细信息是有益的，这样用户可以自由配置他们想要用于 db 的驱动程序。

# java - Java nio OP_READ 在 OP_WRITE 存在时未执行，在 Android 中？

> ID：15193904
> 
> 赞同：0
> 
> 时间：2013-03-04T02:58:40.540
> 
> 标签：java, android, multithreading, networking, nio

我正在尝试使用 NIO 在 Android 中编写服务器。在我的 ServerChannel 被接受后，我已经注册了 OP_READ、OP_WRITE。

但是，有线的事情是......在while循环中，在我这样做之后：

```
SelectionKey key = (SelectionKey) iterator.next();
iterator.remove(); 
```

在里面：

```
if(key.isReadable()){
} else if(key.isWritable()){ 
```

似乎 isReadable 从未返回 true。

我的客户端代码是两个线程，一个线程用于读取，另一个线程用于写入。我想知道为什么会这样..？我认为如果有人能给我一些关于 Java NIO 中客户端处理的参考，那将会很有帮助。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:01:31.713

您通常不应该注册 OP_WRITE。它几乎总是准备就绪。您应该只在获得短写入结果时使用它，这表明发送缓冲区已满。另一方面，OP_READ 仅在发送缓冲区中有数据时才准备就绪。您的回答中没有任何内容表明存在问题。我想知道您是否以某种方式在精神上没有这些状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:22:56.437

我在理解 .register 方法时犯了一个错误，正确的方法是：

```
client.register(selector, SelectionKey.OP_READ | SelectionKey.OP_WRITE); 
```

而我所做的是：

```
client.register(selector, SelectionKey.OP_READ);
client.register(selector, SelectionKey.OP_WRITE); 
```

因此后者取代了前者。

# gwt - 带有 Google Web Toolkit (GWT) 的模型视图演示器

> ID：15193909
> 
> 赞同：1
> 
> 时间：2013-03-04T02:59:09.513
> 
> 标签：gwt, mvp, gwt-mvp

我正在考虑使用 web 工具包开发一个新的应用程序。我决定最好的选择是使用模型-视图-演示者设计模式。经过大量研究，我发现了两种不同的实现骨架代码的方法。（我仍在努力学习 MVP 以及如何最好地利用模型和视图之间的分离）

这是讨论 GWT MVP 的两个链接

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces) [https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture)

我通读并理解了第二个链接中的所有信息，您如何将演示者与视图相关联，以及您如何拥有自定义事件等。我真的很喜欢这个，因为这意味着几个开发人员将能够处理我想到的项目。

但是，第一个链接，也指出了一些有趣的东西，主要是使用 XML 和@UiBinder 等东西。我觉得这些对于这个特定的应用程序来说不是必需的，但我想确保我没有忽略任何东西。

基本上 - 第二个链接中的样式（每个视图都有演示者的那个）是一种编程实践的好坏

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T04:06:50.160

您不应该比较[MVPActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)和[MVP](https://developers.google.com/web-toolkit/articles/mvp-architecture)。如果浏览器历史管理不是您关心的问题，请仅使用[MVP](https://developers.google.com/web-toolkit/articles/mvp-architecture)。

1.  活动和地点对于 MVP 不是强制性的。它们只允许您清理与 MVP 架构完美集成的浏览器历史管理。

2.  [UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)对于 MVP 来说不是强制性的。它们可以与 MVP 一起使用。

3.  MVP 设计范式主要以单元测试为主要驱动力，并尽可能避免运行缓慢的 GWTTestCase。

> 这种模式的核心是将功能分离为逻辑上有意义的组件，但在 GWT 的情况下，明确的重点是使视图尽可能简单，以最大限度地减少我们对 GWTTestCase 的依赖并减少总体时间花在运行测试上。

# javascript - 将 OpenSSL 命令行 AES 加密映射到等效的 NodeJS Crypto API

> ID：15193913
> 
> 赞同：3
> 
> 时间：2013-03-04T02:59:36.190
> 
> 标签：javascript, node.js, cryptography, openssl, aes

在尝试理解[Node.js Crypto](http://nodejs.org/api/crypto.html) API 时，我一直在尝试将代码与通过管道传输以进行十六进制显示的等效[`OpenSSL enc`](http://www.openssl.org/docs/apps/enc.html#)命令行（插入换行符以提高可读性）相匹配。[`xxd`](http://linux.die.net/man/1/xxd)

```
$ echo -n "The quick brown fox jumps over the lazy dog" | openssl enc -aes256 -e
  -K "a891f95cc50bd872e8fcd96cf5030535e273c5210570b3dcfa7946873d167c57"
  -iv "3bbdce68b2736ed96972d56865ad82a2"  | xxd -p -c 64
582178570b7b74b000fd66316379835809874f985e0facadabb5b9c6b00593171165ae21c091f5237cea1a6fd939fd14 
```

但是，当我运行时`node test-aes.js`，我得到以下输出：

```
b8f995c4eb9691ef726b81a03681c48e 
```

这与我的预期输出不匹配（它甚至是长度的三分之一）。这是我的`test-aes.js`文件：

```
var crypto = require("crypto");

var testVector = { plaintext : "The quick brown fox jumps over the lazy dog",
    iv : "3bbdce68b2736ed96972d56865ad82a2",
    key : "a891f95cc50bd872e8fcd96cf5030535e273c5210570b3dcfa7946873d167c57",
    ciphertext : "582178570b7b74b000fd66316379835809874f985e0facadabb5b9c6b00593171165ae21c091f5237cea1a6fd939fd14"};

var key = new Buffer(testVector.key, "hex");
var iv = new Buffer(testVector.iv, "hex");
var cipher = crypto.createCipher("aes256", key, iv);
cipher.update(testVector.plaintext, "utf8");
var crypted = cipher.final("hex");
console.log(crypted); 
```

**问题：**在将 OpenSSL 参数映射到 Node.js Crypto API 时我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:14:07.130

给你：

```
var cipher = crypto.createCipheriv("aes256", key, iv);
var crypted = cipher.update(testVector.plaintext, "utf8", "hex");
crypted += cipher.final("hex");
console.log(crypted); 
```

您的原始代码有两个问题

1.  `createCipher`是错误的功能，你应该使用`createCipheriv`.
2.  `update`有返回值，你需要跟踪它。

# ruby-on-rails - Rails - 创建一个类似于 Facebook 的通知系统

> ID：15193925
> 
> 赞同：0
> 
> 时间：2013-03-04T03:01:13.100
> 
> 标签：ruby-on-rails

我是一个新手，正在尝试制作他的第一个 Web 应用程序。我现在想到的是一个类似于 Facebook 的通知系统。我快速搜索了一下其他人对这个主题的看法，并看到了许多关于如何解决这个问题的不同意见：有些人建议使用 Resque/Delayed Job/Beanstalkd 在后台执行该过程，而其他人则指向 gems 之类的邮箱。

为什么需要在后台处理作业？它仅用于传入消息吗？此外，延迟作业是否足以用于简单的通知系统？我听说 beanstalkd 是最快的，但不支持 Windows。

任何帮助/建议/答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:39:50.853

您将需要运行 rake 任务或延迟作业。

在 Web 应用程序中，您必须立即将答案发送给用户，您不想让他等到您完成所有广播处理，所以您只需保存发布并向他显示成功消息。

然后，您处理通知，并将此通知广播给所有订阅者，此过程可能需要一些时间（假设某人有 2,000 个朋友）。

最后，如果你想让通知系统显示实时通知，后台进程可以通过 javascript 和 websockets 广播消息，看看[Best Ruby on Rails WebSocket tool](https://stackoverflow.com/questions/4767268/best-ruby-on-rails-websocket-tool)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T04:04:02.413

看看这个出色的视频和文字教程[http://railscasts.com/episodes/406-public-activity](http://railscasts.com/episodes/406-public-activity)它可能会为您指明正确的方向

同样在同一个网站上，您会发现很多有用的信息

# python - 这些运算符是什么意思（**、^、%、//）？

> ID：15193927
> 
> 赞同：68
> 
> 时间：2013-03-04T03:01:15.167
> 
> 标签：python, math, operators, native

除了标准的`+`, `-`,`*`和`/`运算符；但这些是什么意思 ( `**`, `^`, `%`, `//`) ？

```
>>> 9+float(2) # addition
11.0
>>> 9-float(2) # subtraction
7.0
>>> 9*float(2) # multiplication
18.0
>>> 9/float(2) # division
4.5
>>>
>>> 9**float(2) # This looks like a square, (i.e. power 2) 
81.0
>>> 9**float(3) # So ** is equivalent to `math.pow(x,p)` ?
729.0 
```

**`^`运营商呢？**

```
>>> 9^int(2) # What is `^` in `x^u` , it only allows `int` for `u`
11
>>> 9^int(3)
10
>>> 9^int(4)
13
>>> 9^int(5)
12
>>> 9^int(6)
15
>>> 9^int(7)
14
>>> 9^int(8)
1
>>> 9^int(9)
0
>>> 9^int(10)
3
>>> 9^int(11)
2
>>> 9^int(12)
5 
```

**`%`in`x%m`返回正常的余数模数，但仅当 时`m < x`，为什么会这样？做什么`%`？**

```
>>> 9%float(2)
1.0
>>> 9%float(3)
0.0
>>> 9%float(4)
1.0
>>> 9%float(5)
4.0
>>> 9%float(6)
3.0
>>> 9%float(7)
2.0
>>> 9%float(8)
1.0
>>> 9%float(9)
0.0
>>> 9%float(10)
9.0
>>> 9%float(11)
9.0
>>> 9%float(12)
9.0 
```

**`//`运营商呢？它有什么作用？**

```
>>> 9//float(2)
4.0
>>> 9//float(3)
3.0
>>> 9//float(4)
2.0
>>> 9//float(5)
1.0
>>> 9//float(6)
1.0
>>> 9//float(7)
1.0
>>> 9//float(8)
1.0
>>> 9//float(9)
1.0
>>> 9//float(1)
9.0
>>> 9//float(0.5)
18.0 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-03-04T03:07:35.320

*   `**`: 取幂
*   `^`: 异或（按位）
*   `%`: 模数
*   `//`：除以整数结果（丢弃余数）

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-04T03:33:02.153

您可以在[Python 语言参考](http://docs.python.org/2/reference/expressions.html)中找到所有这些运算符，但您必须滚动一下才能找到所有这些运算符。正如其他答案所说：

*   `**`运算符进行幂运算。被提升为权力`a ** b`。相同的符号也用于函数参数和调用符号，具有不同的含义（传递和接收任意关键字参数）。`a``b``**`
*   运算符执行`^`二进制异或。`a ^ b`将返回一个值，其中仅设置了 in`a`或 in`b`但不是同时设置了这两个位。这个很简单！
*   算子主要是求两个整数的`%`模。`a % b`返回除以 后的余`a`数`b`。与其他一些编程语言（例如 C）中的模运算符不同，在 Python 中，模数将与 具有相同的符号`b`，而不是与`a`. 相同的运算符也用于字符串格式的“旧”样式，因此`a % b`如果`a`是格式字符串并且`b`是可以插入的值（或值的元组），则可以返回字符串`a`。
*   该`//`运算符执行 Python 版本的整数除法。Python 的整数除法与其他一些语言（如 C）提供的整数除法并不完全相同，因为它向负无穷大舍入，而不是向零舍入。与模运算符一起，您可以说`a == (a // b)*b + (a % b)`. 在 Python 2 中，除法是两个整数相除时的默认行为（使用普通除法运算符`/`）。由于这可能是出乎意料的（尤其是当您对作为函数参数的数字类型并不挑剔时），Python 3 已更改为使“真”（浮点）除法成为四舍五入的除法规范否则，它只会在明确要求时进行“地板”除法。`from __future__ import division`在文件的顶部。我强烈推荐它！）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-04T03:08:56.117

你是对的，这`**`是幂函数。

`^`是按位异或。

`%`确实是模运算，但请注意，对于正数，`x % m = x`只要`m > x`. 这是从模数的定义得出的。（另外，Python 指定`x % m`符号为`m`。）

`//`是一个除法运算，通过丢弃余数返回一个整数。这是`/`在大多数编程语言中使用的标准除法形式。然而，Python **3**改变了`/`执行浮点除法的行为，*即使参数是整数*。该`//`运算符是在 Python 2.6 和 Python 3 中引入的，以提供在 Python 2 和 Python 3 之间行为一致的整数除法运算符。这意味着：

```
| context                                | `/` behavior   | `//` behavior |
---------------------------------------------------------------------------
| floating-point arguments, Python 2 & 3 | float division | int divison   |
---------------------------------------------------------------------------
| integer arguments, python 2            | int division   | int division  |
---------------------------------------------------------------------------
| integer arguments, python 3            | float division | int division  | 
```

有关更多详细信息，请参阅此问题：[Python 2.7 中的除法。和 3.3](https://stackoverflow.com/q/21316968/1858225)

# c++ - 如何将动态数组中的数组指向某物？

> ID：15193928
> 
> 赞同：1
> 
> 时间：2013-03-04T03:01:28.383
> 
> 标签：c++, arrays, dynamic, linked-list

我有一个`struct`这样的：

```
struct Key_Node
{
    int key;
    struct Package_Node *next_package;
}; 
```

我将创建一个动态数组“ `struct Key_Node arrayMain[X]`”，其中的值`X`将由用户输入，并根据它创建动态数组。

由于我不知道数组的大小，显然我不能将动态数组的每个指针指向某个东西。那么我必须在这里做什么？

我有另一个`struct`看起来像这样。

```
struct Package_Node
{
    int bar_code;
    float package_weight;
    struct Package_Node *next_packaged;
}; 
```

`Key_Node mainArray[dynamicvalue]`和

`package_node totalPackages[dynamicvalue]`

依次是动态数组和链表。我将创建随机包并使用哈希表方法对它们进行排序。如果我`X`是 3 并且我的随机条形码是 10，我将执行`10 % 3`结果为 1，因此随机`package_node`数将被添加到列表中，`mainArray[1]`并且列表将像这样增长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:26:31.650

看来你需要一点帮助才能开始。看起来你被要求实现一个[哈希表](http://en.wikipedia.org/wiki/Hash_table)。在`C`您使用`malloc`分配动态存储时，在`C++`您使用`new`时，请参阅[在什么情况下我使用 malloc 与 new？](https://stackoverflow.com/questions/184537/in-what-cases-do-i-use-malloc-vs-new/)

这应该可以帮助您入门，希望对您有所帮助。

```
#include <iostream>
struct Key_Node
{
    int key;
    struct Package_Node *next_package;
};

struct Package_Node
{
    int bar_code;
    float package_weight;
    struct Package_Node *next_packaged;
};

int main() {
    size_t X;
    std::cout << "Enter X: ";
    std::cin >> X;
    Key_Node *mainArray = new Key_Node[X];

    for(size_t i=0; i<X; ++i) {
        mainArray[i].next_package = NULL;
    }

    //-- Rest of your program goes here

    delete [] mainArray;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:00:12.127

好吧，我想我明白了，但我可能会走偏。

重要提示：这是 C++，但我不能确定您实际上没有使用 C（这更复杂）。到目前为止您发布的代码和您尝试执行的任务感觉就像 C。

首先，快速介绍链表。它们有一个“头”元素，然后每个元素指向列表中的下一个元素：

```
struct Item {
    Item *next;
    // data here
};

struct ItemList {
    Item *first;
};

ItemList myList;
myList.first = new Item( );
myList.first->next = new Item( );
myList.first->next->next = new Item( ); 
```

这是一种设置链表的愚蠢方式，但演示了结构；我们通过一次一个地遍历每个元素来找到节点。

你想要一个使用链表的哈希表（从我能收集到的）。这意味着您将拥有一个固定长度的链表数组，并且能够向其中添加项目：

```
struct Item {
    Item *next;
    int key;
    int something;
};

struct ItemList {
    Item *first;
};

const int NUM_BUCKETS = 3;

ItemList keys[NUM_BUCKETS];

Item *addItemKey( int key, Item *o ) {
    int index = key % NUM_BUCKETS;
    if( keys[index].first != NULL ) {
        o->next = keys[index].first;
    }
    o->key = key;
    keys[index].first = o;
    return o;
}

int main( ) {
    Item *myItem1 = addItemKey( 10, new Item( ) );
    myItem1->something = 7;
    Item *myItem2 = addItemKey( 5, new Item( ) );
    myItem2->something = 3;
} 
```

那有什么作用呢？那么 addItemKey 会将您提供的项目放入哈希表的“桶”之一。如果那里已经有一个项目，它将推动它成为第二个项目。为了方便起见，它还返回项目。了解这里发生了什么很重要，因此请花一些时间来玩一下我在本文末尾链接到的示例。

要从键中查找项目，您必须再次计算*索引*并遍历相应的列表，直到其中一个项目匹配：

```
Item *findItemKey( int key ) {
    int index = key % NUM_BUCKETS;
    Item *test = keys[index].first;
    while( test != NULL ) {
        if( test->key == key ) {
            return test;
        }
        test = test->next;
    }
    return NULL;
}

int main( ) {
    // set up the items as before here

    Item *myFoundItem = findItemKey( 10 );
    if( myFoundItem != NULL ) {
        cout << myFoundItem->something << endl; // should say 7 with the code above
    }
} 
```

看到它在这里工作：[http ://codepad.org/b03NxST2](http://codepad.org/b03NxST2)

要改变的事情：

1.  这不是针对您的问题设置的。这是故意的；如果我为你做，你什么也学不到！
2.  键数组在编译时具有固定大小。看看您是否可以将其与@amdn 的示例混合以让用户选择尺寸。
3.  根本不需要 ItemList 结构。我只是为了清楚起见才包括它。看看能不能去掉。
4.  这使用全局值，这通常是一个坏主意。您应该使用对象方法，但现在这对您来说可能有点高级。

如果你真的需要这样做，你应该看看这些为你做这一切的标准对象：

*   [http://www.cplusplus.com/reference/map/map/](http://www.cplusplus.com/reference/map/map/)
*   [http://www.cplusplus.com/reference/list/list/](http://www.cplusplus.com/reference/list/list/)
*   [http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

# erlang - inets 支持 CGI 吗？

> ID：15193942
> 
> 赞同：0
> 
> 时间：2013-03-04T03:03:51.450
> 
> 标签：erlang, inets

YAWS 可以完美地运行使用 python 编写的旧 CGI 应用程序。但是，我仍然想知道 inets 是否支持 CGI ？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:50:12.433

如果您在此 PDF 中搜索 CGI，您将找到有关它的信息。我还没有尝试过，但是是的，CGI 脚本应该可以工作。

[http://www.erlang.org/doc/apps/inets/inets.pdf](http://www.erlang.org/doc/apps/inets/inets.pdf)

# google-app-engine - 在 Google javascript api 客户端中导致 json 序列化错误的拥有实体

> ID：15193944
> 
> 赞同：2
> 
> 时间：2013-03-04T03:04:07.667
> 
> 标签：google-app-engine, jackson, google-api-client, google-cloud-endpoints

得到错误：

```
java.lang.IllegalArgumentException: Can not deserialize instance of java.lang.String out of START_OBJECT token
 at [Source: N/A; line: -1, column: -1] 
```

和

```
Caused by: com.google.appengine.repackaged.org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.lang.String out of START_OBJECT token
 at [Source: N/A; line: -1, column: -1] 
```

我的实体样本：

```
@PersistenceCapable
public class User {
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;
    public Key getKey() {return this.key;   }
    public User()   {}
    public Address getAddress() {return address;}
    public void setAddress(Address address) {this.address = address;}
    @Persistent
    private Address address;
}

@PersistenceCapable
public class Address {
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;
@Persistent
private String otherProperty;
//Also have the set and get
} 
```

使用 google javascript api 客户端工具 ( [https://code.google.com/p/google-api-javascript-client/](https://code.google.com/p/google-api-javascript-client/) )

连接到 Eclipse 中生成的 Google 云端点。- 在使用 api explorer 时，我可以添加地址没问题的用户（localhost:8888/_ah/api/explorer）。

不使用地址时，调用按预期工作：

```
var request = gapi.client.userendpoint.user.insert({
firstName : "test",
lastName : "test",
emailAddress : "test",
phoneNumber : "test"
});
console.log(request);
request.execute(function(resp){console.log(resp);}) 
```

但是，当使用地址调用时，它会失败：

```
var request2 = gapi.client.userendpoint.user.insert({
firstName : "test",
lastName : "test",
emailAddress : "test",
clubName : "test",
ahaNumber : "test",
phoneNumber : "test",
address: {
attention : "test",
line1 : "test",
line2 : "test",
line3 : "test",
state : "test",
postalCode : "test",
country : "test"
}
});
console.log(request2);
request2.execute(function(resp){console.log(resp);}) 
```

有错误：

```
POST http://localhost:8888/_ah/api/rpc 500 (Can not deserialize instance of java.lang.String out of START_OBJECT token  at [Source: N/A; line: -1, column: -1]) 
```

任何反馈表示赞赏！

感觉好像我错过了一些明显的东西......

# ruby-on-rails-3 - 如何在 simple_form 选择中设置 ajax 响应？

> ID：15193948
> 
> 赞同：0
> 
> 时间：2013-03-04T03:05:17.637
> 
> 标签：ruby-on-rails-3, jquery, simple-form

我有一个 ajax 请求，负责获取所选州的一些城市。所以，我有一个使用 simple_form 的表单和两个选择，州和城市，如下所示：

我不知道如何替换城市选择的城市。我就是这样做的：

```
Controller ajax method
def by_state
   cities = City.by_state params["state"]
   render :json => { :cities => cities }
end

Form
<%= simple_form_for @store, :html => { :class => 'store-filter' } do |f| %>
  <table align="center" cellspacing="10" cellpadding="2">
    <tr>
      <th colspan="2">Store list</th>
    </tr>
    <tr>
      <td>State:</td>
      <td>
        <%= f.input :state, :collection => State.all, :include_blank => false, :label => false, :input_html => { :id => "state", :name => "state" } %>
      </td>
    </tr>
    <tr>
      <td>City:</td>
      <td>
        <%= f.input :city, :collection => City.find(:all, :conditions => { :state_id => 1 }), :include_blank => false, :label => false, :input_html => { :id => "city", :name => "city" } %>
      </td>
    </tr>
    .
    .
    .

Ajax
$("#state").change(function() {
  var state_id = $(this).val();
  $.ajax({
    type: "GET",
    url: "cities/state/"+state_id,
    success: function(data) {
      console.log(data); //returns Object with Array of Cities
      $("#city").html(data["cities"]); //replaces to nothing city select 
    }
  });
}); 
```

因此，当我选择一个州时，城市选择被 null 取代。为什么？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T03:26:02.800

我认为不需要AJAX。您可以从另一个下拉列表填充一个下拉列表。这里有很多有用的信息：[http ://forums.asp.net/t/1431726.aspx](http://forums.asp.net/t/1431726.aspx)

# php - 在选项组合框中创建链接

> ID：15193950
> 
> 赞同：-1
> 
> 时间：2013-03-04T03:05:24.837
> 
> 标签：php, javascript, option

我正在尝试在组合框中创建链接，但出现错误。

这是我的 JS 函数：

```
<script type="text/javascript">
function handleSelect(elm)
{
    window.location = elm.value+".php";
}
</script> 
```

这是组合框的形式

```
<select name="Pilihan">
    <option value="" selected href="view1.php">- Item -</option>
    <option value="" selected href="view2.php">- Budg -</option>
    <option value="" selected href="view3.php">- Dept -</option>
    <option value="" selected href=>- Silahkan Pilih -</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:07:58.130

看起来你可能错过了这个：

```
<select name="Pilihan" onchange="handleSelect(this)"> 
```

或类似的东西。

此外，您可能不希望将选项默认为 all `selected`。

**更新**

我现在看到了问题，您正在尝试使用该`option`值，但您似乎想实际使用`href`option 标记的。您可能想尝试：

```
<option value="view1.php">- Item -</option>
<option value="view2.php">- Budg -</option> 
```

然后是建议的事件绑定方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:09:52.383

`href`不是选项标签的有效属性，您不能真正将链接放在选择下拉列表中。但是，您可以使用一些 javascript 魔术来执行此操作，如下所示：

```
<select name="Pilihan" onchange="document.location = this.options[this.selectedIndex].value;">
   <option value="view1.php">- Item -</option>
   <option value="view2.php">- Budg -</option>
   <option value="view3.php">- Dept -</option>
</select> 
```

或者使用事件处理程序：

```
<select name="Pilihan">
   <option value="view1.php">- Item -</option>
   <option value="view2.php">- Budg -</option>
   <option value="view3.php">- Dept -</option>
</select>

<script type="text/javascript">
    document.getElementsByName('Pilihan')[0].onchange = function() {
        document.location.href = this.options[this.selectedIndex].value;
    }
</script> 
```

# c++ - 模板构造函数重载问题

> ID：15193957
> 
> 赞同：1
> 
> 时间：2013-03-04T03:07:11.367
> 
> 标签：c++, templates, function-templates, constructor-overloading

我有一个带有三个构造函数的类模板，其中一个是函数模板。

```
template<class T>
class TemplateOverLoading
{
public:
    TemplateOverLoading(void){};
    ~TemplateOverLoading(void){};
    //constructor that take reference
    TemplateOverLoading(std::string& qName, T& qValue )
        :   mName(qName),
            mValue( &qValue)
    {
        std::cout << "Reference -> "<< *mValue <<"\n";
    }

    //Template constructor that takes array
    template<class T, int N>
    TemplateOverLoading(std::string& qName, T (&t)[N])
        :   mName(qName),
            mValue(t)
    {
        std::cout << "Array ->\n";
        for(int i = 0; i < N; i++)
            std::cout<< mValue[i];
        std::cout << std::endl;
    }

    //Other constructor that take pointer
    TemplateOverLoading(std::string& qName, T* qValue )
        :   mName(qName),
            mValue( qValue)
    {
        std::cout << "Pointer "<< *mValue <<"\n";
    }
private:
    T*               mValue;
    //T*              mValueArray;
    std::string&    mName;
}; 
```

从我的应用程序中，我需要区分引用类型/值、指针和数组并执行特定操作。因此，我决定必须使用不同的构造函数。

我正在尝试以下列方式调用构造函数：

```
int init(10);
int intArray[10] = {0,1,2,3,4,5,6,7,8,9};
TemplateOverLoading<int> mInt(std::string("mInt"), init);    
TemplateOverLoading<int> mIntArray( std::string("mIntArray"), intArray ); 
```

问题是如果定义了带有指针的构造函数，则永远不会调用数组构造函数。但是，如果我将其注释掉，它会按应有的方式打印数组。

输出：

```
(when pointer constructor is present)
Reference -> 10
Pointer 0

(when pointer constructor is not present)
Reference -> 10
Array ->
0123456789 
```

所以在语法上它是可能的，并且推断数组大小 N 是正确的。

显然，当存在数组构造函数时，我会混淆编译器。因此，我没有让编译器自动推断，而是尝试为数组构造函数指定模板参数，只发现与常规函数不同，模板参数不能具体指定。

我想在数组构造函数中引入一个虚拟参数来区分重载，但这似乎不太好。

有没有其他方法可以解决这个问题？任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:14:36.003

将您的指针构造函数参数设为`T*& qValue`.

```
TemplateOverLoading(std::string& qName, T*& qValue )
    :   mName(qName),
        mValue( qValue)
{
    std::cout << "Pointer "<< *mValue <<"\n";
} 
```

通过使其成为对指针的引用，可以防止数组到指针的衰减并选择数组构造函数。

另外，我看不到您的代码是如何编译的，我看到很多错误：

您的模板构造函数有一个参数`class T`，这与`class T`类模板的冲突：

```
template<class T, int N>
    TemplateOverLoading(std::string& qName, T (&t)[N]) 
```

这需要更改为其他内容`class T`，例如`class U`：

```
template<class U, int N>
        TemplateOverLoading(std::string& qName, U (&t)[N]) 
```

您的构造函数还采用**非 const**左值引用，非 const 引用不能绑定到您在构造函数调用中传递的临时对象，即`std::string("mIntArray")`. 您需要将其更改为`const std::string&`或按值获取。此外，您的成员`std::string& mName;`是参考，您应该删除`&`那里。

# ruby - 是什么！！在这个 Ruby 函数中是什么意思？

> ID：15193962
> 
> 赞同：4
> 
> 时间：2013-03-04T03:07:48.533
> 
> 标签：ruby

是什么！！在这个 Ruby 函数中是什么意思？

```
def is_i?
   !!(self =~ /^[-+]?[0-9]+$/)
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:10:14.120

它确保响应是布尔值。So `nil`or `false`will become `false`, 任何其他值都变成`true`

# python - 使用对象比使用 dict 伪对象有什么好处？

> ID：15193964
> 
> 赞同：4
> 
> 时间：2013-03-04T03:07:54.847
> 
> 标签：python

以以下代码为例：

```
import numpy as np

N = 200
some_prop = np.random.randint(0,100, [N, N, N])

#option 1
class ObjectThing():
  def __init__(self, some_prop):
    self.some_prop = some_prop

object_thing = ObjectThing(some_prop)

#option 2
pseudo_thing = {'some_prop' : some_prop } 
```

我喜欢选项 1 提供的结构，它使应用程序的操作更加严格等等。但是，我想知道是否还有其他我不知道的更绝对的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:12:33.177

如果您正在使用包含 JIT 编译器（例如 PyPy）的 Python 实现，则使用实际对象可以提高编译器优化代码的能力（因为编译器更容易推断如何使用对象的成员，不像一本普通的字典）。

使用对象还允许子类化，这可以节省一些冗余的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T03:17:42.440

使用对象的明显优势是您可以扩展它们的功能，而不仅仅是存储数据。例如，您可以有两个属性，并`__eq__`以某种方式定义和使用这两个属性的方法，*而*不是简单地比较它们并返回`False`，除非两者都匹配。

此外，一旦定义了一个类，您就可以轻松地定义该类的新实例，这些实例将共享原始的结构，但是使用字典，您要么必须重新定义该结构，要么制作某种副本原始的，然后更改每个元素以匹配您希望新伪对象具有的值。

字典的主要优点是它们带有各种预定义的方法（例如`.items()`），可以很容易地迭代`in`using字符串变量（虽然实际上，该`getattr`函数用对象实现了同样的事情）。

# mysql - 在mysql中使用虚拟列

> ID：15193972
> 
> 赞同：1
> 
> 时间：2013-03-04T03:09:09.563
> 
> 标签：mysql, sql, database, select

我有如下的mysql查询：

```
SELECT
  company_name,
  SUM(purchase_qty * num_of_certificate) AS total_purchase_qty,
  total_sold_qty,
  (total_purchase_qty - total_sold_qty) AS rem_qty
FROM tbl_company
  JOIN tbl_share_purchase
ON purchase_company_id = tbl_company.id
  JOIN (SELECT
      sold_company_id,
      SUM(sold_qty)   AS total_sold_qty
    FROM tbl_share_sales
    GROUP BY sold_company_id) s
ON s.sold_company_id = tbl_company.id
GROUP BY purchase_company_id 
```

是否可以使用**(total_purchase_qty - total_sold_qty) AS rem_qty**来获取剩余数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:10:43.283

如果将其包装在子查询上，则可以这样做，但是如果别名定义在同一级别，则不能使用别名进行计算，

```
SELECT  company_name,
        SUM(purchase_qty * num_of_certificate) AS total_purchase_qty,
        total_sold_qty,
        (SUM(purchase_qty * num_of_certificate) - total_sold_qty) AS rem_qty
FROM    tbl_company
        JOIN tbl_share_purchase
            ON purchase_company_id = tbl_company.id
        JOIN 
        (
            SELECT  sold_company_id,
                    SUM(sold_qty)   AS total_sold_qty
            FROM    tbl_share_sales
            GROUP   BY sold_company_id
        ) s ON s.sold_company_id = tbl_company.id
GROUP   BY purchase_company_id 
```

这里使用子查询，

```
SELECT  company_name,
        total_purchase_qty,
        total_sold_qty,
        (total_purchase_qty - total_sold_qty) AS rem_qty
FROM
(
    SELECT  company_name,
            SUM(purchase_qty * num_of_certificate) AS total_purchase_qty,
            total_sold_qty
    FROM    tbl_company
            JOIN tbl_share_purchase
                ON purchase_company_id = tbl_company.id
            JOIN 
            (
                SELECT  sold_company_id,
                        SUM(sold_qty)   AS total_sold_qty
                FROM    tbl_share_sales
                GROUP   BY sold_company_id
            ) s ON s.sold_company_id = tbl_company.id
    GROUP   BY purchase_company_id
) 
```

# php - 更新 Flot PHP、AJAX、JSON

> ID：15193973
> 
> 赞同：1
> 
> 时间：2013-03-04T03:09:11.280
> 
> 标签：php, jquery, json, flot

我在将 Flot 条形图从 Ajax 请求更新为返回 JSON 数据的 PHP 脚本时遇到了一些问题。

PHP 脚本是：

```
$vars = array(
    'result' => "success",
    'msg' => AJAX_SUCCESS,
    'series' => "Group One,80,Group Two,10" 
    );
echo json_encode($vars); 
```

这将返回到变量“系列”

```
var data = [series.series]; 
```

这将输出到控制台：

```
Group One,80,Group Two,10 
```

我还有一个注释掉的变量，它是：

```
//var datatwo = [ ["Group One", 80], ["Group Two", 10] ]; 
```

这也输出到控制台

```
Group One,80,Group Two,10 
```

创建图表的实际javascript是

```
$.plot("#group-month-graph", [data], options); 
```

选项分配在脚本的另一个位置。

我试图弄清楚我做错了什么，因为当我警告返回的数据或将其输出到控制台时，值是相同的，但是返回的数据不会绘制图形，而如果我使用注释掉的值它会。

希望这是有道理的。我已经削减了完整的脚本，因为我认为问题不在其他任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:30:08.350

当插件需要一个数组时，您正在返回一个字符串。你应该回来`[["Group One",80],["Group Two",10]]`

将您的 php 系列结构更改为：

```
$vars = array(
    'result' => "success",
    'msg' => AJAX_SUCCESS,
    'series' => array(array("Group One",80),array("Group Two",10))
); 
```

此外，您应该使用而不是`series`使用数组`data``[data]`

```
$.plot("#group-month-graph", data, options); 
```

# php - 嵌套的简单 HTML DOM 试图捕捉下一个

> ID：15193974
> 
> 赞同：-1
> 
> 时间：2013-03-04T03:09:45.737
> 
> 标签：php, simple-html-dom

我将如何检索最后一次出现的 a.page_arrows

```
 <div class="page-nav">  
    <a class="paginationNumberStyle page_arrows" data-url="/Building-Materials-Concrete-Cement-Masonry/h_d1/N-5yc1vZ25ecodZarlk/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=384&amp;storeId=10051"> 
    <img alt="" src="/static/images/layout/triangle-green-left.gif"></a>                          
    <span>6</span>
    <a class="paginationNumberStyle" data-url="/Building-Materials-Concrete-Cement-Masonry/h_d1/N-5yc1vZ25ecodZarlk/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=576&amp;storeId=10051">7</a>
    <a class="paginationNumberStyle" data-url="/Building-Materials-Concrete-Cement-Masonry/h_d1/N-5yc1vZ25ecodZarlk/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=672&amp;storeId=10051">8</a>
    <a class="paginationNumberStyle page_arrows" data-url="/Building-Materials-Concrete-Cement-Masonry/h_d1/N-5yc1vZ25ecodZarlk/h_d2/Navigation?catalogId=10053&amp;Nu=P_PARENT_ID&amp;langId=-1&amp;Nao=576&amp;storeId=10051"> 
    <img alt="" src="/static/images/layout/triangle-green-right.gif"></a>
</div> 
```

我正在尝试收集链接，然后转到下一页并收集其余链接，直到没有嵌套页面。这是我的代码：

```
 getLinks('http://www.homedepot.com/Building-Materials-Concrete-Cement-Masonry/h_d1/N-5yc1vZ25ecodZarlk/h_d2/Navigation?catalogId=10053&Nu=P_PARENT_ID&langId=-1&storeId=10051&currentPLP=true&omni=c_Concrete,%20Cement%20&%20Masonry&searchNav=true');

   function getLinks($URL) {

$html = file_get_contents($URL);

$dom = new simple_html_dom();
$dom -> load($html);

    foreach ($dom->find('a[class=item_description]') as $href){
  $url = $href->href;
  echo $url.'<br>';
 }

if ($nextPage = $dom->find("a[class=paginationNumberStyle]" ,0)){ 
    $nextPageURL = 'http://www.homedepot.com'.$nextPage->getAttribute('data-url'); 

    $dom -> clear();
    unset($dom);
    getLinks($nextPageURL);
} else {
    echo "\nEND";
    $dom -> clear();
    unset($dom);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:18:53.063

我有同样的问题，并使用 children 方法来抓取第一级项目。

```
<ul class="my-list">
<li>
    <a href="#">Some Text</a>
    <ul>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
    </ul>
</li>
<li>
    <a href="#">Some Text</a>
    <ul>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
        <li><a href="#">Some Inner Text</a></li>
    </ul>
</li>
</ul> 
```

这是获取第一级 li 项目的简单 HTML Dom 代码：

```
$html = file_get_html( $url );
$first_level_items = $html->find( '.my-list', 0)->children();

foreach ( $first_level_items as $item ) {
... do stuff ...
} 
```

# java - 如何使用多线程扫描目录

> ID：15193977
> 
> 赞同：6
> 
> 时间：2013-03-04T03:10:15.053
> 
> 标签：java, database, multithreading, file, directory

我有一个单线程目录扫描程序。扫描文件时，我必须读取属性信息并将其插入数据库。

我有 2 个问题。为了提高性能：

1.  如何使用多线程扫描？（扫描安卓手机的sd卡​​）
2.  如何优化批量插入数据库？

下面是代码清单：

```
void scan() {
    File file = new File("/mnt/sdcard");
    fun(file);
}

void fun(File file) {
    if (!file.exists()) {
        return;
    }
    if (!file.isDirectory()) {
        // read attribute information and insert to db
        return;
    } else {
        File[] arr = file.listFiles();
        for (int i = 0; i < arr.length; i++) {
            fun(arr[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T03:17:29.470

我不认为使用多线程在这里会有所帮助。扫描目录是 IO 有界的。即使你使用多线程，它们都会在一个工作线程中等待 IO 操作完成。所以在任何时候都只有一个线程扫描。

除非您的目录上的 IO 操作可以并行化，例如多个磁盘，否则它将有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T03:45:16.557

是的，您可以使用多线程来提高性能，当一个进行磁盘 I/O 另一个进行网络 I/O 时，我将写一个小例子。

这是示例，最好在睡眠前阅读 :) 使用类的构造函数`ReadThenAll(5);`创建 5 个线程来探索文件夹和子文件夹。玩得开心 ！！

```
package foo;

import java.io.File;
import java.util.Queue;
import java.util.concurrent.ConcurrentLinkedQueue;

public class ReadThenAll {

    // subfolders to explore
    private final Queue exploreList = new ConcurrentLinkedQueue();

    private long counter = 0;

    public void count() {
        counter++;
    }

    public static void main(String[] args) {

        ReadThenAll me = new ReadThenAll(5);
        me.scan("/tmp");

    }

    int[] threads;

    public ReadThenAll(int numberOfThreads) {
        threads = new int[numberOfThreads];

        for (int i = 0; i < threads.length; i++) {
            threads[i] = -1;
        }
    }

    void scan(String fileName) {

        final long start = System.currentTimeMillis();

        // add the first one to the list
        File file = new File(fileName);
        exploreList.add(file);

        for (int i = 0; i < threads.length; i++) {
            FileExplorer explorer = new FileExplorer(i, this);
            Thread t = new Thread(explorer);
            t.start();
        }

        Thread waitToFinish = new Thread(new Runnable() {

            @Override
            public void run() {

                boolean working = true;
                while (working) {
                    working = false;

                    for (int i = 0; i < threads.length; i++) {
                        if (threads[i] == -1) {
                            working = true;
                            break;
                        }
                    }

                    try {
                        Thread.sleep(2);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

                long elapsed = System.currentTimeMillis() - start;
                System.out.println("total time (ms) : " + elapsed);

            }
        });

        waitToFinish.start();
    }

    public void done(int id, int counter) {
        threads[id] = counter;
    }

    class FileExplorer implements Runnable {

        public int counter = 0;
        public ReadThenAll owner;
        private int id;

        public FileExplorer(int id, ReadThenAll owner) {
            this.id = id;
            this.owner = owner;
        }

        @Override
        public void run() {
            while (!owner.exploreList.isEmpty()) {

                // get the first from the list
                try {
                    File file = (File) owner.exploreList.remove();

                    if (file.exists()) {

                        if (!file.isDirectory()) {
                            doThemagic(file);
                        } else {

                            // add the files to the queue
                            File[] arr = file.listFiles();
                            if (arr != null) {
                                for (int i = 0; i < arr.length; i++) {
                                    owner.exploreList.add(arr[i]);
                                }
                            }
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                    // silent kill :)
                }

                try {
                    Thread.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

            owner.done(id, counter);
            System.out.println("total of files : " + counter);
        }

        private void doThemagic(File file) {
            System.out.println(file.toString());
            counter++;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T04:11:11.073

你可以按照下面的设计之一

```
1 - Create a queue in which supports multiple read  and single write.
2-  Get the number of cpu in the system in which you need to run the program because you can not run more threads simultaneously.

3- I/O is always blocking if you have 2 threads which are writing on Disk then they have to be serialized or you have multiple physical storage devices so you can access those.

4- The Queue you created in step 1 , you can write into the queue and simultaneously read.

5- Again database operation is blocking one that means your thread has to wait until it got the response from the db server rather than blocking the thread you can think of asynchronous  processing and callback mechanism. 
```

# cordova - phonegap 和地理定位服务在设备上不起作用

> ID：15193980
> 
> 赞同：1
> 
> 时间：2013-03-04T03:10:22.690
> 
> 标签：cordova

几周前我一直在使用phonegap，但是当我使用地理定位服务时发现问题。在浏览器中工作正常，但编译不（使用 build.honegap.com）。

在我的 config.xml 文件中，我有这样的内容：

```
Config package name, id, author, icon,etc...

<feature name="http://api.phonegap.com/1.0/device" />
<plugin name="Geolocation" value="CDVLocation" />
<plugin name="Geolocation" value="org.apache.cordova.GeoBroker" />
<feature name="http://api.phonegap.com/1.0/geolocation"/> 
```

和一个 androidmanifest.xml 只有这个：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.me"
    android:versionCode="1"
    android:versionName="6.5" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
</manifest> 
```

只是为了测试，我做了这个脚本（jquery），但只是在 chrome 浏览器上工作。总是触发错误函数（总是输入 if 语句，“Nav on”）：

```
document.addEventListener("deviceready", onDeviceReady(), false);

function onDeviceReady(){
    if (navigator.geolocation) { 
        alert('Nav on');
        setTimeout(function(){
        navigator.geolocation.getCurrentPosition(function(position){
            alert("success " + position.coords.latitude + ' , ' + position.coords.longitude)
        }, function(error){
            alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
        },
        {enableHighAccuracy:true});
        }, 600);
    }else{
        alert('Nav off');
    }
}; 
```

知道我的代码有什么问题吗？我整个周末都在为此工作，一无所获

PS，我有一个三星 Galaxy s2 用于测试，对我的英语感到抱歉。

我忘了说错误消息说：

> 代码：2
> 消息：无法启动地理定位服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T21:09:51.930

首先确保您的代码没有错误！如果您确定，那么您还需要做一件事！只需更改 Android 设备的安全设置即可。转到设置 -> 安全 -> 选中“未知来源”复选框，以允许您的 apk 正常运行。

希望它对我有用！

最好的，

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-30T23:56:10.343

在某些 Android 设备上

```
navigator.geolocation.getCurrentPosition() 
```

不会返回地理位置，除非您将 enableHighAccuracy 选项设置为 true。用这个替换对 navigator.geolocation 的调用：

```
navigator.geolocation.getCurrentPosition(onSuccess, onError,{enableHighAccuracy: true}); 
```

# dart - 是否有内置方法来填充字符串？

> ID：15193983
> 
> 赞同：9
> 
> 时间：2013-03-04T03:11:06.807
> 
> 标签：dart

我正在尝试向数字添加零填充。我做了一些搜索，但找不到明显的方法来做到这一点。我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-14T21:08:15.223

*Dart 1.3*引入了[String.padLeft](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-core.String#id_padLeft)和[String.padRight](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-core.String#id_padRight)你可以使用：

```
String intToString(int i, {int pad 0}) => i.toString().padLeft(pad, '0'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-07T00:21:47.670

您可以使用字符串函数 .padLeft(Int width, [String = ' '])

[https://api.dartlang.org/apidocs/channels/dev/dartdoc-viewer/dart-core.String#id_padLeft](https://api.dartlang.org/apidocs/channels/dev/dartdoc-viewer/dart-core.String#id_padLeft)

```
int i = 2;
print(i.toString().padLeft(2, "0")); 
```

结果：02

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T03:49:42.993

我认为您没有遗漏任何东西，现在严重缺乏格式化功能。我认为你能做的最好的事情是：

```
String intToString(int i, {int pad: 0}) {
  var str = i.toString();
  var paddingToAdd = pad - str.length;
  return (paddingToAdd > 0) 
      ? "${new List.filled(paddingToAdd, '0').join('')}$i" : str;
} 
```

显然，采用格式字符串的东西会更好。功能要求？

# sql - 如何从另一个表中获取具有匹配 id 的另一个表中的名称？

> ID：15193986
> 
> 赞同：3
> 
> 时间：2013-03-04T03:11:43.693
> 
> 标签：sql, sql-server-2008-r2

我在我的网站中使用带有 php 的 sql server 2008 r2。我有 2 张桌子。

1是给员工的。

```
(int)      (nvarchar)   (nvarchar)

id         name        type
 1         john         2
 2         peter        1
 3         leah         2
 4         frank        1
 5         tang         3 
```

2 用于工作

```
(int)      (nvarchar)   (nvarchar)

workid      name        employees
  1         task1       1,3
  2         task2       2,3
  3         task3       1,3,4
  4         task4         2 
```

我想查询它给我工作描述的员工姓名，其中 type < 3。

意味着我想得到这样的结果。

```
workid       name       employee
  1          task1      john, leah
  2          task2      peter, leah
  3          task3      john,leah,frank 
```

同样地

那么我怎样才能用 sql 查询来实现这个结果呢？

我无法更改表架构。

我尝试使用 case when 语句，但它不起作用。

请帮我完成这个工作..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:19:03.830

其内容并不能完全回答问题，但会建议您如何正确规范化表格以简化问题。

这是一个`Many-to-Many`关系。

```
Employees
- ID (Primary Key)
- Name
- Type

Task
- ID (Primary Key)
- Name

Work
- EmployeeID (Foreign Key)
- TaskID (Foreign Key) 
```

员工表

```
id         name        type
 1         john         2
 2         peter        1
 3         leah         2
 4         frank        1
 5         tang         3 
```

任务表

```
 id         name        
  1         task1       
  2         task2       
  3         task3       
  4         task4 
```

工作表

```
TaskID  EmployeeID
1           1
1           3
2           2
2           4
3           1
3           2
3           3
4           4 
```

询问，

```
SELECT  t.ID, t.Name,
        STUFF(
        (SELECT ',' + b.Name
        FROM    Work a
                INNER JOIN Employee b
                    ON a.EmployeeID = b.ID
        WHERE   a.TaskID = t.ID 
        FOR XML PATH (''))
        , 1, 1, '')  AS NamesList
FROM    Task t
-- WHERE    ..... -- add additional conditions...
GROUP   BY t.ID, t.Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/7c903/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:36:02.680

这是您可以使用以下方式拆分逗号分隔列表的一种方法`For XML`：

```
SELECT w.workid, w.name, 
  STUFF((
   SELECT ',' +  E.Name AS [text()]
    FROM  (
      SELECT A.workid,  
      Split.a.value('.', 'VARCHAR(100)') AS EmpId
      FROM  
      (SELECT workid,  
       CAST ('<M>' + REPLACE(employees, ',', '</M><M>') + '</M>' AS XML) AS String  
       FROM  work
      ) AS A 
      CROSS APPLY String.nodes ('/M') AS Split(a)
    ) A 
    JOIN employees E ON A.EmpId = E.Id
    WHERE WorkId = w.WorkId
    FOR XML PATH('')
  ), 1, 1, '') AS Employees
FROM work w 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/328e2/1)

这导致：

```
WORKID   NAME    EMPLOYEES
1        task1   john,leah
2        task2   peter,leah
3        task3   john,leah,frank
4        task4   peter 
```

# c - 我在串口上收到垃圾邮件

> ID：15193987
> 
> 赞同：5
> 
> 时间：2013-03-04T03:11:47.830
> 
> 标签：c, windows, serial-port

我有一个 Atmel 微控制器发送我想通过 COM1 在我的 PC 上接收的数据。

当我附加一个终端程序时，数据被正确接收（它都是 ascii，除了 \n 之外都是可打印的）。

但是，我的代码似乎正在接收垃圾（非 ascii 字符）。谁能看到我做错了什么？谢谢

发送代码，仅供参考

```
// USART options.
static const usart_options_t USART_CONSOLE_OPTIONS =
{
    .baudrate     = 115200,
    .charlength   = 8,
    .paritytype   = USART_NO_PARITY,
    .stopbits     = USART_1_STOPBIT,
    .channelmode  = USART_NORMAL_CHMODE
}; 
```

接收代码

```
E_boolean OpenCom1(void)
{
   COMMTIMEOUTS timeouts;

   comPortHandle = CreateFile("COM1",  // Specify port device: default "COM1"
   GENERIC_READ | GENERIC_WRITE,       // Specify mode that open device.
   0,                                  // the device isn't shared.
   NULL,                               // the object gets a default security.
   OPEN_EXISTING,                      // Specify which action to take on file.
   0,                                  // default (not overlapped i/o).
   NULL);                              // default (hTemplate must be NULL for COM devices).

   if (comPortHandle == INVALID_HANDLE_VALUE)
      return False;

   deviceControlBlock.DCBlength = sizeof(deviceControlBlock);

    if((GetCommState(comPortHandle, &deviceControlBlock) == 0))
    {
      // CodeMe: do what?
      return False;
    }

    deviceControlBlock.BaudRate = CBR_115200;
    deviceControlBlock.StopBits = ONESTOPBIT;
    deviceControlBlock.Parity   = NOPARITY;
    deviceControlBlock.ByteSize = DATABITS_8;
    deviceControlBlock.fRtsControl = 0;

    if (!SetCommState(comPortHandle, &deviceControlBlock))
    {
      // CodeMe: do what?
      return False;
    }

    // set short timeouts on the comm port.
    timeouts.ReadIntervalTimeout = MAXDWORD;
    timeouts.ReadTotalTimeoutMultiplier = MAXDWORD;
    timeouts.ReadTotalTimeoutConstant = 1000;   // oen second
    timeouts.WriteTotalTimeoutMultiplier = 1;
    timeouts.WriteTotalTimeoutConstant = 1;
    if (!SetCommTimeouts(comPortHandle, &timeouts))
    {
      // CodeMe: do what?
      return False;
    }

   FlushFileBuffers(comPortHandle);

   PurgeComm (comPortHandle, PURGE_TXABORT | PURGE_RXABORT | PURGE_TXCLEAR | PURGE_RXCLEAR);

   return True;
}//OpenCom1()

// +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=
void      ReadCharacterFromCom1(INPUT char *theCharacter)
{
   DWORD numBytesRead;

   numBytesRead = 0;

   while (numBytesRead == 0)
   {
      ReadFile(comPortHandle,           // handle of file to read
               theCharacter,            // store read data here
               sizeof(char),            // number of bytes to read
               &numBytesRead,           // pointer to number of bytes actually read
               NULL);
   }

   return;
}//ReadCharacterFromCom1() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:27:29.073

使用“sizeof(char)”调用函数“ReadFile”以获取要读取的字节数。这将始终被评估为 1，可能不是您想要的值。结果是每次调用 ReadCharacterFromCom1 只会从端口读取 1 个有效字符并返回，您看到的其余部分是留在缓冲区中的垃圾，因为缓冲区不是（手动）以空值终止的。

建议你改成：

```
 /* ============================================================ */
DWORD ReadCharacterFromCom1(char *pszBuffer, int nMaxCharToRead)
{
    DWORD dwBytesRead = 0;
    while (dwBytesRead == 0)
    {   ReadFile(comPortHandle, // handle of file to read
            pszBuffer,  // store read data here
            nMaxCharToRead, // number of bytes to read
            &dwBytesRead,   // pointer to number of bytes actually read
            NULL);
    }
    // terminate string with null
    pszBuffer[dwBytesRead] = 0;
    return dwBytesRead;
}

// test code ------------------------
char szBuffer[512];
DWORD dwCount = ReadCharacterFromCom1(szBuffer, sizeof(szBuffer)-1);
printf(_T("Receive %d chars: <%s>"), nCount, szBuffer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:29:56.517

假设波特率、数据位数、奇偶校验和停止位数设置正确，您很可能缺少设置任何类型的流量控制。您没有（完全）向我们展示您如何初始化 DCB。

流量控制禁止发送方/接收方中的缓冲区溢出。

根据您使用的串行电缆类型以及应传输的数据类型，可以使用软流控制或硬件流控制。

硬件流控制是首选类型的流控制，因为它适用于要传输的纯 ASCII**和二进制数据。**它需要一个完全有线的串行连接。它也称为 RTS 和/或 DTR 流控制。

如果您只有最小的三线 RS232/V.24 电缆，您可能希望使用软件流控制（也称为 Xon/Xoff 握手）。Xon/Xoff-handshake 流控制仅适用于要传输的 ASCII 数据。要通过这种连接发送二进制数据，需要将其编码为纯 ASCII。例如，使用 base64 编码来执行此操作。

如何在windows下设置流量控制你可能想在这里阅读：[http ://www.cplusplus.com/forum/windows/89698/](http://www.cplusplus.com/forum/windows/89698/)

这个[http://msdn.microsoft.com/en-us/library/ff802693.aspx](http://msdn.microsoft.com/en-us/library/ff802693.aspx)可以作为参考。

# form-submit - 如何使用 Python 在 Google App Engine 上实现 Post-redirect-get？

> ID：15193988
> 
> 赞同：2
> 
> 时间：2013-03-04T03:12:06.063
> 
> 标签：form-submit, post-redirect-get

我正在使用 Python 在 Google App Engine 上开发一个在线竞价系统。关于 post-redirect-get 机制，我已经在谷歌上搜索了一段时间，但仍然不清楚如何实现它。认为：

HTML：

```
<form action="/test" method="post">
  ...
  <input type="submit" value="Submit" />
</form> 
```

Python：

```
# Collect data from the posted form
...
# Save data into datastore
...
# Prepare template values

tempalteValues = { ... }
path = os.path.join(os.path.dirname(__file__), 'templates/', 'responseMessage.html')
handler.response.out.write(template.render(path, templateValues))

# Then what? 
```

我有两个问题：

1) 渲染响应消息文件后，接下来应该做什么？也就是说，如何实现'GET'？

2）我能想到的另一种策略是：如果帖子应该只发生一次（例如，具有唯一订单号的产品购买），我可以在实体中设置一个标志，指示表单已提交以及以下帖子如果设置了标志将被忽略？这是可行的，甚至是正确的吗？

（注意：由于订单号是系统生成的，所以在提交表单之前必须先保存实体才能得到该号）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:17:05.543

您正在寻找的是构建一个像这样的 Restful 服务：

```
class BiddingHandler(webapp2.RequestHandler):
    def get(self):
        #Get code goes here for this handler

    def post(self):
        #code that gets your posted data and processes it

    def delete(self):
        #code to delete something

app = webapp2.WSGIApplication([('/bidding', BiddingHandler)]) 
```

查看上面的内容，如果您想在帖子的最后一行发布帖子而不是呈现模板后进行重定向，您只需使用以下行将用户重定向到处理程序的 get 部分：

```
self.response.redirect('/bidding') 
```

我在上面向您展示的是实现它的正确方法。为每个请求写入数据存储并从中读取将意味着更多的开销和成本。

# ios - 如何制作 UIView 的渐变边框？

> ID：15193993
> 
> 赞同：23
> 
> 时间：2013-03-04T03:12:52.147
> 
> 标签：ios, border, gradient

我想制作一个渐变边框，如下图所示：

![图片](../Images/a6be3061191c5860de89ab763971d62c.png)

但我不知道究竟是怎么做的，即我应该使用什么渐变色来做呢？如何设置我的视图以显示像图像一样的边框？

我正在使用以下代码来获取边框：

```
 self.view.layer.borderColor = [UIColor orangeColor].CGColor;
 self.view.layer.borderWidth = 2.0f; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-11-19T09:28:05.033

这就是我所做的，而且效果很好

```
 extension CALayer {
    func addGradienBorder(colors:[UIColor],width:CGFloat = 1) {
        let gradientLayer = CAGradientLayer()
        gradientLayer.frame =  CGRect(origin: CGPointZero, size: self.bounds.size)
        gradientLayer.startPoint = CGPointMake(0.0, 0.5)
        gradientLayer.endPoint = CGPointMake(1.0, 0.5)
        gradientLayer.colors = colors.map({$0.CGColor})

        let shapeLayer = CAShapeLayer()
        shapeLayer.lineWidth = width
        shapeLayer.path = UIBezierPath(rect: self.bounds).CGPath
        shapeLayer.fillColor = nil
        shapeLayer.strokeColor = UIColor.blackColor().CGColor
        gradientLayer.mask = shapeLayer

        self.addSublayer(gradientLayer)
    }

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-05-29T17:00:23.640

感谢蒂亚戈**·门德斯**的回答。

我改进了功能：

*   添加圆角半径。

并修复了一些问题以确保正确的遮罩和给定的边框宽度：

*   改进的渐变层框架；
*   改进的掩码路径舍入矩形。

**斯威夫特 5**

```
public extension UIView {

    private static let kLayerNameGradientBorder = "GradientBorderLayer"

    func gradientBorder(width: CGFloat,
                        colors: [UIColor],
                        startPoint: CGPoint = CGPoint(x: 0.5, y: 0.0),
                        endPoint: CGPoint = CGPoint(x: 0.5, y: 1.0),
                        andRoundCornersWithRadius cornerRadius: CGFloat = 0) {

        let existingBorder = gradientBorderLayer()
        let border = existingBorder ?? CAGradientLayer()
        border.frame = CGRect(x: bounds.origin.x, y: bounds.origin.y,
                              width: bounds.size.width + width, height: bounds.size.height + width)
        border.colors = colors.map { return $0.cgColor }
        border.startPoint = startPoint
        border.endPoint = endPoint

        let mask = CAShapeLayer()
        let maskRect = CGRect(x: bounds.origin.x + width/2, y: bounds.origin.y + width/2,
                              width: bounds.size.width - width, height: bounds.size.height - width)
        mask.path = UIBezierPath(roundedRect: maskRect, cornerRadius: cornerRadius).cgPath
        mask.fillColor = UIColor.clear.cgColor
        mask.strokeColor = UIColor.white.cgColor
        mask.lineWidth = width

        border.mask = mask

        let exists = (existingBorder != nil)
        if !exists {
            layer.addSublayer(border)
        }
    }
    private func gradientBorderLayer() -> CAGradientLayer? {
        let borderLayers = layer.sublayers?.filter { return $0.name == UIView.kLayerNameGradientBorder }
        if borderLayers?.count ?? 0 > 1 {
            fatalError()
        }
        return borderLayers?.first as? CAGradientLayer
    }
} 
```

`startPoint`对于渐变层和渐变层的更易读的声明，`endPoint`我使用以下代码：

```
public extension CGPoint {

    enum CoordinateSide {
        case topLeft, top, topRight, right, bottomRight, bottom, bottomLeft, left
    }

    static func unitCoordinate(_ side: CoordinateSide) -> CGPoint {
        switch side {
        case .topLeft:      return CGPoint(x: 0.0, y: 0.0)
        case .top:          return CGPoint(x: 0.5, y: 0.0)
        case .topRight:     return CGPoint(x: 1.0, y: 0.0)
        case .right:        return CGPoint(x: 0.0, y: 0.5)
        case .bottomRight:  return CGPoint(x: 1.0, y: 1.0)
        case .bottom:       return CGPoint(x: 0.5, y: 1.0)
        case .bottomLeft:   return CGPoint(x: 0.0, y: 1.0)
        case .left:         return CGPoint(x: 1.0, y: 0.5)
        }
    }
} 
```

所以最终的用法是：

```
view.gradientBorder(width: 3, colors: [.red, .orange], startPoint: .unitCoordinate(.top), endPoint: .unitCoordinate(.bottom), andRoundCornersWithRadius: 12) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-26T07:05:36.710

您可以使用此方法制作视图和角半径的渐变边框（如果需要） -

```
self.yourView.layer.cornerRadius=4;

self.yourView.layer.masksToBounds=YES;

CAGradientLayer *gradient = [CAGradientLayer layer];

gradient.frame = self.yourView.bounds;

gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:255/255.0 green:226/255.0 blue:138/255.0 alpha:1.0] CGColor], (id)[[UIColor colorWithRed:255/255.0 green:198/255.0 blue:91/255.0 alpha:0.9] CGColor],(id)[[UIColor colorWithRed:255/255.0 green:226/255.0 blue:138/255.0 alpha:1.0] CGColor], nil];

gradient.startPoint = CGPointMake(0.0, 0.0);

gradient.endPoint = CGPointMake(1, 1);

CAShapeLayer *shapeLayer =[[CAShapeLayer alloc] init];

shapeLayer.lineWidth = 15; // higher number higher border width

shapeLayer.path = [UIBezierPath bezierPathWithRect:self.yourView.bounds].CGPath;

shapeLayer.fillColor = nil;

shapeLayer.strokeColor = [UIColor blackColor].CGColor;

gradient.mask = shapeLayer;

[self.yourView.layer insertSublayer:gradient atIndex:0]; 
```

这会帮助你！谢谢

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-29T13:21:50.150

这是另一个正在使用 swift 4 的解决方案

```
import UIKit

public extension UIView {

    private static let kLayerNameGradientBorder = "GradientBorderLayer"

    func setGradientBorder(
        width: CGFloat,
        colors: [UIColor],
        startPoint: CGPoint = CGPoint(x: 0.5, y: 0),
        endPoint: CGPoint = CGPoint(x: 0.5, y: 1)
    ) {
        let existedBorder = gradientBorderLayer()
        let border = existedBorder ?? CAGradientLayer()
        border.frame = bounds
        border.colors = colors.map { return $0.cgColor }
        border.startPoint = startPoint
        border.endPoint = endPoint

        let mask = CAShapeLayer()
        mask.path = UIBezierPath(roundedRect: bounds, cornerRadius: 0).cgPath
        mask.fillColor = UIColor.clear.cgColor
        mask.strokeColor = UIColor.white.cgColor
        mask.lineWidth = width

        border.mask = mask

        let exists = existedBorder != nil
        if !exists {
            layer.addSublayer(border)
        }
    }

    private func gradientBorderLayer() -> CAGradientLayer? {
        let borderLayers = layer.sublayers?.filter { return $0.name == UIView.kLayerNameGradientBorder }
        if borderLayers?.count ?? 0 > 1 {
            fatalError()
        }
        return borderLayers?.first as? CAGradientLayer
    }

} 
```

如何使用：

view.setGradientBorder（宽度：10，颜色：[UIColor（红色：47，绿色：198，蓝色：176），UIColor（红色：67，绿色：210，蓝色：128）]）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T21:35:44.937

以下是使用 Core Graphics 的方法。创建一个 UIView 子类，并在其中`drawRect:`创建一个渐变并覆盖一个黑色内容矩形：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create and draw the gradient
    UIColor *gradientColorTop = [UIColor orangeColor];
    UIColor *gradientColorBottom = [UIColor yellowColor];
    NSArray *gradientColors = @[(id) gradientColorTop.CGColor, (id) gradientColorBottom.CGColor];
    CGFloat locations[] = {0.1, 0.80};

    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)(gradientColors), locations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    UIBezierPath *gradientBorder = [UIBezierPath bezierPathWithRoundedRect:rect
    byRoundingCorners:UIRectCornerAllCorners cornerRadii:CGSizeMake(10.0, 10.0)];
    [gradientBorder addClip];

    CGContextDrawLinearGradient(ctx, gradient, startPoint, endPoint, 0);

    // Draw the inner content rectangle
    UIBezierPath *contentPath = [UIBezierPath bezierPathWithRect:CGRectInset(rect, 20.0, 20.0)];
    [[UIColor blackColor] setFill];
    [contentPath fill];

    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);
} 
```

这将产生类似于您想要实现的结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-26T05:56:51.093

Christos Hadjikyriacou 回答的客观 c 版本

```
 @implementation CALayer(Border)

-(void) addGradientBorder {

CAGradientLayer *gradientLayer =  [[CAGradientLayer alloc] init];
gradientLayer.frame = CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height);
gradientLayer.startPoint = CGPointMake(0.0, 0.5);
gradientLayer.endPoint = CGPointMake(1.0, 0.5);
gradientLayer.colors = @[(id)[UIColor redColor].CGColor, (id)[UIColor blueColor].CGColor];

CAShapeLayer *shapeLayer =[[CAShapeLayer alloc] init];
shapeLayer.lineWidth = 0.5;
shapeLayer.path = [UIBezierPath bezierPathWithRect:self.bounds].CGPath;
shapeLayer.fillColor = nil;
shapeLayer.strokeColor = [UIColor blackColor].CGColor;
gradientLayer.mask = shapeLayer;
[self addSublayer : gradientLayer];
}
@end 
```

# android - 根据sqlite中的数据列表显示不同的活动

> ID：15193994
> 
> 赞同：0
> 
> 时间：2013-03-04T03:13:07.720
> 
> 标签：android, android-listview, android-sqlite

我有这样的活动：

![图片1](../Images/dea65c4c4c5e879dfb5453c8097604a2.png)

我从 SQLite 加载列表，并使用上下文菜单选择列表：

![图片2](../Images/ad7d50ca4b61831e58bfb50c75669cd1.png)

我选择更新以显示活动。

问题是，当 i=我选择列表并根据数据列表在上下文菜单中选择更新时，如何显示不同的链接或加载活动？

例子：

在备注字段中，我有三组数据：“Serangan Hama”、“Pestisida”和“Bencana Alam”。

我有每个数据的 3 个活动表格。

如果我选择“Bencana Alam”，那么它将显示活动 BencanaAlam.java

如果我选择“Pestisida”，那么它将显示活动 Pestisida.java

这是活动代码：

```
public class MainListKeliling extends ListActivity {
      private LocationManager lm;
      String[] remark = { "Bencana Alam", "Serangan Hama", "Pestisida" };
      Spinner spinRemark;
      private LocationListener locListener;
      private TextView latTxt, lonTxt;

      Intent intent = null;
      private static final int ADD_ID = Menu.FIRST+1;
      private static final int DELETE_ID = Menu.FIRST+3;
      private static final int UPDATE_ID = Menu.FIRST+4;
      private static final int DETAIL_ID = Menu.FIRST+5;
      private static final int CANCEL = Menu.FIRST+6;
      public static final int SHOW_SUB_ACTIVITY_VIEW=3;
      public static final int DIALOG_DATE_AWAL = 5;
        public static final int DIALOG_DATE_AKHIR = 6;
      private DatabaseHelper db=null;
      private DatabaseHelper ds=null;
      private Cursor constantsCursor=null;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lyt_banner_keliling);
        //ds = new DatabaseHelper(getApplicationContext());
        //ds.loadAll();

        db=new DatabaseHelper(this);
        constantsCursor=db
                          .getReadableDatabase()
                          .rawQuery("SELECT _ID, alamat, tglb, tipe "+
                                    "FROM keliling ORDER BY _ID",
                                    null);

        ListAdapter adapter=new SimpleCursorAdapter(this,
                              R.layout.lyt_list_keliling, constantsCursor,
                              new String[] {
                                            DatabaseHelper.ID,
                                            DatabaseHelper.ALAMAT,
                                            DatabaseHelper.TYPE,
                                            DatabaseHelper.TANGGAL_AKHIR
                                            },
                              new int[] {R.id.id, R.id.alamat, R.id.remark, R.id.tglakhir});

        setListAdapter(adapter);
        registerForContextMenu(getListView());

        Button button = (Button) findViewById(R.id.btnKembali);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                LogOut();
                setResult(RESULT_OK, null);
                finish();
            }
        });

        button = (Button) findViewById(R.id.btnDataBaru);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                add();
            }
        });

      }// onCreate

      private void LogOut(){

        }//LogOut

      @Override
      public void onDestroy() {
        super.onDestroy();

        constantsCursor.close();
        db.close();
      }

      @Override
      public void onCreateContextMenu(ContextMenu menu, View v,
                                        ContextMenu.ContextMenuInfo menuInfo) {
        menu.add(Menu.NONE, DETAIL_ID, Menu.NONE, "Detail");
        menu.add(Menu.NONE, UPDATE_ID, Menu.NONE, "Update");
        menu.add(Menu.NONE, DELETE_ID, Menu.NONE, "Delete");
        menu.add(Menu.NONE, CANCEL, Menu.NONE, "Back")

            .setAlphabeticShortcut('d');
      }

      @Override
      public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        case DETAIL_ID:
            AdapterView.AdapterContextMenuInfo info=
              (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

            detail(info.id);
            return(true);

        case DELETE_ID:
            AdapterView.AdapterContextMenuInfo infoDetail=
              (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

            delete(infoDetail.id);
            return(true);

          case UPDATE_ID:
              intent = new Intent(MainListKeliling.this, UpdateKeliling.class);
                startActivityForResult(intent, SHOW_SUB_ACTIVITY_VIEW);
              return(true);
        }

        return(super.onOptionsItemSelected(item));
      }

      private LocationManager lman;
      private LocationListener locaListener;
      private TextView latTxtt, lonTxtt;
      private EditText tvDisplayDateAwal, tvDisplayDateAkhir;
      private DatePicker dpResult;
      private int year;
      private int month;
      private int day;

        private void add() {
        LayoutInflater inflater=LayoutInflater.from(this);
        View addView=inflater.inflate(R.layout.lyt_add_keliling, null);
        latTxtt = (TextView) addView.findViewById(R.id.latitudeTxtt);
        lonTxtt = (TextView) addView.findViewById(R.id.longitudeTxtt);

        lman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locaListener = new MyLocationListenerDialog();
        lman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 10,locaListener);

        tvDisplayDateAwal = (EditText) addView.findViewById(R.id.tglawal);
        tvDisplayDateAkhir = (EditText) addView.findViewById(R.id.tglakhir);
        dpResult = (DatePicker) addView.findViewById(R.id.dpResult);
        dpResult.setVisibility(View.GONE);

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

        // set current date into textview
        tvDisplayDateAkhir.setText(new StringBuilder()
                // Month is 0 based, just add 1
                .append(day).append("-").append(month + 1).append("-")
                .append(year).append(" "));

        // set current date into datepicker
        dpResult.init(year, month, day, null);
        Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                dpResult.getMonth(), dpResult.getDayOfMonth());
        SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
        String dateString = dates.format(date1);
        tvDisplayDateAkhir.setText(dateString);

        View showDlgAwal = addView.findViewById(R.id.tglawal);
        showDlgAwal.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                showDialog(DIALOG_DATE_AWAL);
            }
        });

        View showDlgAkhir = addView.findViewById(R.id.tglakhir);
        showDlgAkhir.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                showDialog(DIALOG_DATE_AKHIR);
            }
        });

        //spinner
        // buat spinner manual Petak
        Spinner spinRemark = (Spinner) addView.findViewById(R.id.tipe);

        ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, remark);
        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinRemark.setAdapter(aa);

        spinRemark = (Spinner) addView.findViewById(R.id.tipe);
        spinRemark.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                //Toast.makeText(CPupukApp.this, "Anda Memilih: " + manufaktur[position],Toast.LENGTH_LONG).show();
            }

            public void onNothingSelected(AdapterView<?> parent) {

            }

            });

        final DialogWrapper wrapper=new DialogWrapper(addView);

        new AlertDialog.Builder(this)
          .setTitle(R.string.add_title)
          .setView(addView)
          .setPositiveButton(R.string.ok,
                              new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,
                                  int whichButton) {
              processAdd(wrapper);
              lman.removeUpdates(locaListener);
            }
          })
          .setNegativeButton(R.string.cancel,
                              new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,
                                  int whichButton) {
              // stop gps
                lman.removeUpdates(locaListener);
            }
          })
          .show();
      }//akhir fungsi add

        public Dialog onCreateDialog(int id) {
            switch (id) {
            case (DIALOG_DATE_AWAL):
                return new DatePickerDialog(this, datePickerListenerAwal, year,
                        month, day);

            case (DIALOG_DATE_AKHIR):
                return new DatePickerDialog(this, datePickerListenerAkhir, year,
                        month, day);
            }
            return null;
        }// onCreateDialog

        // isi dialog awal
        private DatePickerDialog.OnDateSetListener datePickerListenerAwal = new DatePickerDialog.OnDateSetListener() {

            // when dialog box is closed, below method will be called.
            public void onDateSet(DatePicker view, int selectedYear,
                    int selectedMonth, int selectedDay) {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;

                // set selected date into textview
                tvDisplayDateAwal.setText(new StringBuilder().append(day)
                        .append("-").append(month + 1).append("-").append(year)
                        .append(" "));

                // set selected date into datepicker also
                dpResult.init(year, month, day, null);

                Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                        dpResult.getMonth(), dpResult.getDayOfMonth());
                SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
                String dateString = dates.format(date1);
                tvDisplayDateAwal.setText(dateString);
            }
        };

        // isi dialog akhir
        private DatePickerDialog.OnDateSetListener datePickerListenerAkhir = new DatePickerDialog.OnDateSetListener() {

            // when dialog box is closed, below method will be called.
            public void onDateSet(DatePicker view, int selectedYear,
                    int selectedMonth, int selectedDay) {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;

                // set selected date into textview
                tvDisplayDateAkhir.setText(new StringBuilder().append(day)
                        .append("-").append(month + 1).append("-").append(year)
                        .append(" "));

                // set selected date into datepicker also
                dpResult.init(year, month, day, null);

                Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                        dpResult.getMonth(), dpResult.getDayOfMonth());
                SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
                String dateString = dates.format(date1);
                tvDisplayDateAkhir.setText(dateString);
            }
        };

      private class MyLocationListenerDialog implements LocationListener {
            @Override
            public void onLocationChanged(Location loc) {
                // TODO Auto-generated method stub
                if (loc != null) {
                    latTxtt.setText(String.valueOf(loc.getLatitude()));
                    lonTxtt.setText(String.valueOf(loc.getLongitude()));
                }
            }

            @Override
            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub

            }

        }

      private void loadUser(View view) {

            // Creating adapter for spinner

        }

      private void detail(final long rowId) {
            if (rowId>0) {
                LayoutInflater inflater=LayoutInflater.from(this);
                View addView=inflater.inflate(R.layout.detail_keliling, null);

                final DialogWrapper wrapper=new DialogWrapper(addView);
                TextView idDt = (TextView) addView.findViewById(R.id.idDetail);
                TextView codeTxtDt = (TextView) addView.findViewById(R.id.codeDetail);
                TextView alamatTxtDt = (TextView) addView.findViewById(R.id.alamatDetail);
                TextView batasTxtDt = (TextView) addView.findViewById(R.id.batasDetail);
                TextView latTxtDt = (TextView) addView.findViewById(R.id.latDetail);
                TextView lonTxtDt = (TextView) addView.findViewById(R.id.lonDetail);
                TextView luasTxtDt = (TextView) addView.findViewById(R.id.luasDetail);
                TextView tglAwalTxtDt = (TextView) addView.findViewById(R.id.tglAwalDetail);
                TextView tglAkhirTxtDt = (TextView) addView.findViewById(R.id.tglAkhirDetail);
                TextView remarkTxtDt = (TextView) addView.findViewById(R.id.tipe);
                //View editTextHidden = (EditText) findViewById(R.id.txtHidden);
                // database handler
                DatabaseHelper db = new DatabaseHelper(getApplicationContext()); 
                // Spinner Drop down elements
                SQLiteDatabase dbs = db.getReadableDatabase();

                Cursor cursor = dbs.rawQuery("SELECT * FROM keliling where _ID=" +rowId+"", null);
              if (cursor.moveToFirst()) {
                 do {
                    String noId=cursor.getString(0); // Here you can get data from table and stored in string if it has only one string.
                    String code=cursor.getString(1);
                    String alamat=cursor.getString(2);
                    String batas=cursor.getString(3);
                    String lat=cursor.getString(4);
                    String lon=cursor.getString(5);
                    String luas=cursor.getString(6);
                    String tglAwal=cursor.getString(7);
                    String tglAkhir=cursor.getString(8);
                    String remark=cursor.getString(9);

                    idDt.setText(noId);
                    codeTxtDt.setText(code);
                    alamatTxtDt.setText(alamat);
                    batasTxtDt.setText(batas);
                    latTxtDt.setText(lat);
                    lonTxtDt.setText(lon);
                    luasTxtDt.setText(luas);
                    tglAwalTxtDt.setText(tglAwal);
                    tglAkhirTxtDt.setText(tglAkhir);
                    remarkTxtDt.setText(remark);

                 } while (cursor.moveToNext());
              }
              if (cursor != null && !cursor.isClosed()) {
                 cursor.close();
              }
              if(db!=null)
              {
                  db.close();
              }
              new AlertDialog.Builder(this)
                .setTitle(R.string.detail_title)

                .setView(addView)
                .setPositiveButton(R.string.ok,
                                    new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog,
                                        int whichButton) {
                  // ignore, just dismiss
                  }
                })
                .show();
            }
          }

      private void delete(final long rowId) {
        if (rowId>0) {
          new AlertDialog.Builder(this)
            .setTitle(R.string.delete_title)
            .setPositiveButton(R.string.ok,
                                new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog,
                                    int whichButton) {
                processDelete(rowId);
              }
            })
            .setNegativeButton(R.string.cancel,
                                new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog,
                                    int whichButton) {
              // ignore, just dismiss
              }
            })
            .show();
        }
      }

      private void processAdd(DialogWrapper wrapper) {
        ContentValues values=new ContentValues(2);

        values.put(DatabaseHelper.CODE, wrapper.getCode());
        values.put(DatabaseHelper.ALAMAT, wrapper.getAlamat());
        values.put(DatabaseHelper.BATAS, wrapper.getBatas());
        values.put(DatabaseHelper.LAT, wrapper.getLat());
        values.put(DatabaseHelper.LON, wrapper.getLon());
        values.put(DatabaseHelper.LUAS, wrapper.getLuas());
        values.put(DatabaseHelper.TANGGAL_AWAL, wrapper.getTglA());
        values.put(DatabaseHelper.TANGGAL_AKHIR, wrapper.getTglB());
        values.put(DatabaseHelper.TYPE, wrapper.getRemark());

        db.getWritableDatabase().insert("keliling", DatabaseHelper.ALAMAT, values);
        constantsCursor.requery();
      }

      private void processDelete(long rowId) {
        String[] args={String.valueOf(rowId)};

        db.getWritableDatabase().delete("keliling", "_ID=?", args);
        constantsCursor.requery();
      }

      class DialogWrapper {
        EditText codeField=null;
        EditText alamatField=null;
        EditText batasField=null;
        EditText luasField=null;
        EditText tglAField=null;
        EditText tglBField=null;
        TextView latField=null;
        TextView lonField=null;
        Spinner remark=null;
        View base=null;

        DialogWrapper(View base) {
          this.base=base;
          tglBField=(EditText)base.findViewById(R.id.tglakhir);
        }

        String getCode() {
            return(getCodeField().getText().toString());
          }

        String getAlamat() {
          return(getAlamatField().getText().toString());
        }

        String getBatas() {
            return(getBatasField().getText().toString());
          }

        String getLuas() {
            return(getLuasField().getText().toString());
          }

        String getTglA() {
            return(getTglAField().getText().toString());
          }

        String getTglB() {
          return(getTglBField().getText().toString());
        }

        String getLat() {
            return(getLatField().getText().toString());
          }

        String getLon() {
            return(getLonField().getText().toString());
          }

        String getRemark(){
            return(getRemarkField().getSelectedItem().toString());
        }
        //String spinnerMan=((Spinner) remark).getSelectedItem().toString();

        private EditText getCodeField() {
            if (codeField==null) {
              codeField=(EditText)base.findViewById(R.id.code);
            }
            return(codeField);
          }

        private EditText getAlamatField() {
          if (alamatField==null) {
              alamatField=(EditText)base.findViewById(R.id.alamat);
          }

          return(alamatField);
        }

        private EditText getBatasField() {
            if (batasField==null) {
              batasField=(EditText)base.findViewById(R.id.batas);
            }

            return(batasField);
          }

        private TextView getLatField() {
            if (latField==null) {
              latField=(TextView)base.findViewById(R.id.latitudeTxtt);
            }

            return(latField);
          }

        private TextView getLonField() {
            if (lonField==null) {
             lonField=(TextView)base.findViewById(R.id.longitudeTxtt);
            }

            return(lonField);
          }

        private EditText getLuasField() {
            if (luasField==null) {
              luasField=(EditText)base.findViewById(R.id.luas);
            }

            return(luasField);
          }

        private EditText getTglAField() {
            if (tglAField==null) {
                tglAField=(EditText)base.findViewById(R.id.tglawal);
            }

            return(tglAField);
          }

        private EditText getTglBField() {
          if (tglBField==null) {
              tglBField=(EditText)base.findViewById(R.id.tglakhir);
          }

          return(tglBField);
        }

        private Spinner getRemarkField() {
              if (remark==null) {
                  remark=(Spinner)base.findViewById(R.id.tipe);
              }

              return(remark);
            }
      }
    } 
```

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:43:51.207

所以基本上你想从 onContextItemSelected() 中的 List 中获取选定的项目。

```
// Here's how you can get the correct item in onContextItemSelected()
AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
Object item = getListAdapter().getItem(info.position); 
```

由于您使用 SimpleCursorAdapter 作为 ListAdapter，因此上面返回的对象是 Cursor。

```
 Cursor c = (Cursor) item;
    String type = c.getString(c.getColumnIndex(DatabaseHelper.TYPE));
    Intent intent;

    if ("Bencana Alam".equals(type)) {
        intent = new Intent(MainListKeliling.this, BencanaAlam.class);
    } else if ("Pestisida".equals(type)) {
        intent = new Intent(MainListKeliling.this, Pestisida.class);
    }
    startActivityForResult(intent, SHOW_SUB_ACTIVITY_VIEW); 
```

# buffer - linux缓冲区是如何实现的？

> ID：15193998
> 
> 赞同：0
> 
> 时间：2013-03-04T03:13:56.983
> 
> 标签：buffer

我是 linux 内核内部的新手。我正在尝试了解 linux 缓冲区管理。我正在查看 buffer_head.h 和 blkdev.h。我发现 linux 如何管理缓冲区非常复杂。这些是正确的源文件吗？“struct buffer_head”有什么作用？

另外，块类似于缓冲区吗？

你能给我一个大概的buffer_head.h和blkdev.h的概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:56:33.417

您可以参考 Book Understanding.the.Linux.Kernel.3rd.Edition，第 15 章页面缓存，了解缓冲区管理的一些概述。