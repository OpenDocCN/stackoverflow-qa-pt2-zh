# StackOverflow 问答 13958000-13958999

# java - 我如何将 fft 应用于图像，显示图像，然后对 ifft 执行相同的操作？

> ID：13958002
> 
> 赞同：3
> 
> 时间：2012-12-19T17:38:34.197
> 
> 标签：java, image, fft, ifft

![在此处输入图像描述](../Images/0647d1d2b64e20374ba71ef6ce6d5150.png)![在此处输入图像描述](../Images/a7544a136716e57e6cf60f0d38f7ecf3.png)![在此处输入图像描述](../Images/cdf3b548a81e9a4a6323d473d67a8605.png)这个问题有点宽泛。

这是我所做的：

我有一种应用 fft 的方法。我不打算发布它，因为它是否正确并不是这里的重点。

我通过该方法运行一个图像，然后尝试显示两个相同大小的图像，一个用于实部，一个用于虚部。

这似乎工作正常，除了我的方法产生的灰度值通常远大于 255，因此我不确定我看到的是什么。

然后我获取原始结果（不是我显示的任何像素值，因为我假设它们以某种方式被修改以适应 0 到 255 之间）并通过与以前相同的方法运行它，但通过符号更改来实现 ifft。

然后我也尝试显示它。同样，原始值在大多数情况下都远大于 255。

我的问题归结为：a.) 我是否必须对 fft 进行一些缩放以使其适合 0 到 255 之间？b.) 当我做 ifft 时，我是否必须反转这个缩放比例？c.) 在我申请 ifft 之前，我必须在 fft 上做任何翻译吗？

c部分源于我已经阅读了一些关于将fft的角落居中的内容，但我不确定这意味着什么。

一个较小的问题，d 部分，如果我通过首先将 1d fft 应用到所有行然后再应用到所有列来在原始图像上应用 2d fft，我是否需要以相同的顺序应用 ifft 或我需要颠倒顺序吗？

我想这就是现在的全部。我一直在寻找答案，但似乎找不到太多，因此不胜感激。

编辑：我添加了一些图片，也许它们会有所帮助。第一个是原始图像，第二个是我的 fft 方法（幅度和虚部）的结果，第三个是中间图像上的 ifft 的结果。

EDIT2：将图像更新为来自较新方法的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:14:27.693

人们通常不会发现分开查看实部和虚部很有用，而是查看幅度，可能还有相位，但通常只查看幅度。

a) 通常，是的，无论您正在查看哪些组件，您都需要应用缩放。图像的总功率和它的 FFT 之间存在比例关系，而不是单个分量。此外，您经常想做一些事情，比如记录数据的日志，或者忽略零分量等，所以最好自己进行缩放。

b）在*a*部分，您应该进行缩放以进行可视化，而不是缩放实际的 FFT。您应该采用原始 FFT 的 IFFT。

c) 根据您的 FFT 例程，您可能需要除以 2pi 或样本中的点数，但这取决于您的 FFT 例程的工作方式。文档应该澄清这一点。首先，看看你开始和结束之间是否有 2pi 的因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:48:31.067

回答你的四个问题：

一个。您是否必须缩放 FFT 的结果才能查看它们？是的。您需要取幅值，然后缩小到 0 到 255 之间的值。

湾。您是否必须在 IFFT 之前反向缩放。仅当您想查看 FFT 的结果时才回答 A。您不能 IFFT 缩放数字。使用原始数字。

C。在 FFT 和 IFFT 之间进行转换？不。

d。FFT 期间 Row 与 Col 的顺序是否重要？不，FFT 的结果是一组实数和虚数。这是一个确定性的结果。您可以按任意顺序进行 IFFT。

您可能遇到的关键方面之一是数学和可视化之间的差异。IFFT 适用于浮点数或双实数和虚数。图像需要 0 到 255 之间的整数。您必须在代码中处理此转换。您表示您认为它已“以某种方式修改”。自己执行此转换更安全。

最后同上tom10的答案。您可能需要缩放 IFFT 的结果。这取决于 FFT 和 IFFT 的实现。

# c# - MVC3 - 在哪个模块中引用单独的服务项目？

> ID：13958006
> 
> 赞同：2
> 
> 时间：2012-12-19T17:38:44.820
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, design-patterns

初始情况：

我想构建一个具有分层架构的 MVC3 应用程序。这些层将是持久层（存储库模式）、服务层和视图层。我还想将实体映射到持久层中的 DTO，并将这些 DTO 传递给视图。

在视图中，我想通过使用 MVC3 weapp 来应用 MVC 模式。现在我的问题是，我应该在哪个模块、控制器或模型中访问（引用）服务层。我总是在控制器中看到对服务层的引用，如下所示：

```
public class CustomerController
{
 public ViewResult Details( int id )
    {
       CustomerDTO customerDto = MyService.GetCustomerById();
       return View( customerDto );
    }
} 
```

我不应该访问模型模块中的服务层吗？如果我在控制器中访问我的服务层，我根本不需要模型模块......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:44:36.013

我总是在服务层的任何实际工作都在控制器中完成的基础上工作。

> 如果我在控制器中访问我的服务层，我根本不需要模型模块......？

不正确 -您的服务类型*极不可能*具有，甚至***应该***具有正确的形状和元数据（例如`[Display]`或`[DataType]`属性），或者使它们与 MVC 视图一起正常工作。您应该为视图提供的所有对象都有一个模型类型，即使它们是您的服务类型的一对一克隆 - 因为这样您的视图和控制器所需的数据与您的服务之间就有了分离类型。

如果您尝试将视图直接绑定到您的服务类型，那么您正在创建以下两种情况之一：

*   使更改视图和控制器代码变得更加困难，因为来回发送的数据必须符合服务类型
*   使更改服务类型变得更加困难，因为这样做意味着更改每个视图

（`ViewModel`或`Model`，取决于您的观点）是您在查看（显示在网页上）和绑定（从网页接收）之间的适配器 - 很简单，这两件事通常会偏离在业务逻辑级别使用的*实际*服务类型。事实上，他们*应该这样*做，因为他们旨在解决不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:56:12.273

取决于您是否要从控制器中隐藏 MyService。

在您的示例中它是可见的。如果你在 Model 上有一个同名的方法，然后委托给 MyService，那就不会了。

隐藏它的好处是您可以将 MyService 替换为 YourService 而不会影响 View 和 Controller 层。

至于没有型号。那么你在哪里定义你的 DTO 呢？基本上 MyService 将是您的模型。

您还假设模型到控制器查看的 DTO 始终相同，即使添加至少一个其他层也是如此。

如果我是你，我会考虑这个假设...

# ruby-on-rails - Rails：限制用户可以申请的任务数量

> ID：13958014
> 
> 赞同：2
> 
> 时间：2012-12-19T17:39:17.803
> 
> 标签：ruby-on-rails, validation

我正在编写一个简单的项目管理应用程序作为 Rails 中的学习练习。

我有一个`task`模型，一个`user`模型。该`task`模型有一个`user`字段，表示哪个用户已经声明了给定的任务。

我想在模型级别执行几件事，但不确定如何：

1.  每个用户最多可以申请 5 个任务，仅此而已。
2.  每个用户只能为他们自己声明任务（即，该`user`字段可以设置为当前活动用户，而不是任何其他用户）。换句话说，您不能分配任务 - 用户只能声明它们。

尝试将这些作为验证强制执行是正确的做法吗？你能指出我需要的验证方向吗？我应该自己写吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:46:43.547

您应该添加自己的验证。您正在寻找的那些没有默认值。这是一些示例代码：

```
validate :has_only_five_tasks

def has_only_five_tasks
  if User.find(self.user_id).tasks.count >= 5
    errors.add(:user_id, "User may only have 5 tasks assigned.")
  end
end 
```

另一个和上面一样，只有 if 改变，所以我相信你可以研究这个并适应你自己的需求。

# shell - 壳牌 - 比较不到两倍

> ID：13958015
> 
> 赞同：0
> 
> 时间：2012-12-19T17:39:19.990
> 
> 标签：shell

```
#!/bin/bash

# Obtain the server load
loadavg=`uptime |cut -d , -f 4|cut -d : -f 2`
thisloadavg=`echo $loadavg|awk -F \. '{print $1}'`

if [ "$thisloadavg" -eq "0.01" ]; then

ulimit  -n 65536
service nginx restart
service php-fpm restart

fi 
```

错误是：

```
./loadcheck.sh: line 7: [: 0.01: integer expression expected 
```

我想做一个可以比较双精度而不是整数的负载检查 shell 脚本，因为我想确保负载返回小于 0.01 即 0.00 ，

如果我使用 0，即使负载为 0.05 ，它仍然会执行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:47:07.337

在 zsh 你可以简单地使用：

```
if [[ "$thisloadavg" < "0.01" ]]; then 
```

[double [[ 结构](http://tldp.org/LDP/abs/html/testconstructs.html)允许额外的测试，在 zsh 中它允许浮点测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:51:32.907

Bash 无法处理浮点值，因此您需要使用额外的命令，例如`awk`,`expr`或`bc`为您完成。例如，使用`bc`：

```
loadavg=$(uptime | cut -d, -f4 |cut -d: -f2)
low_load=$(echo "$loadavg < 0.01" | bc -l)
if [ $low_load -eq 1 ]; then
  # do stuff
fi 
```

# c++ - 在 C++ 中获取“yyyymmdd”日期字符串的最简单方法（允许提升）

> ID：13958018
> 
> 赞同：7
> 
> 时间：2012-12-19T17:39:28.520
> 
> 标签：c++

你能给我命名一些从 C++ 获取当前“yyyymmdd”（例如“20121219”）字符串的简单方法吗？升压是允许的，所以这应该使它更容易。我可以使用`ctime`，但设置该结构有点痛苦。

我已经这样做了

```
boost::gregorian::date current_date(boost::gregorian::day_clock::local_day());
int year_int = current_date.year();
int month_int = current_date.month();
int day_int = current_date.day(); 
```

然后将`int`s 转换为`string`s 使用

```
std::string year = boost::lexical_cast<std::string>(year_int);
std::string month = boost::lexical_cast<std::string>(month_int);
std::string day = boost::lexical_cast<std::string>(day_int); 
```

但问题是第 1 天将是“1”而不是“01”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:42:20.113

使用日期时间 I/O 和构面：

```
/// Convert date operator
std::string operator()(const boost::gregorian::date& d) const
{
  std::ostringstream os;
  auto* facet(new boost::gregorian::date_facet("%Y%m%d"));
  os.imbue(std::locale(os.getloc(), facet));
  os << d;
  return os.str();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-20T16:16:04.167

作为单行：

```
#include <boost/date_time/gregorian/gregorian.hpp>

std::string date = boost::gregorian::to_iso_string(boost::gregorian::day_clock::local_day()); 
```

[http://www.boost.org/doc/libs/1_57_0/doc/html/date_time/gregorian.html#date_time.gregorian.date_class](http://www.boost.org/doc/libs/1_57_0/doc/html/date_time/gregorian.html#date_time.gregorian.date_class)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T17:51:38.343

`<ctime>` *很*可怕，但实际上以几乎直接的方式实现了您的需求：

```
char out[9];
std::time_t t=std::time(NULL);
std::strftime(out, sizeof(out), "%Y%m%d", std::localtime(&t)); 
```

（[测试](http://ideone.com/XzUcah)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:43:26.290

从[boost](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/date_time_io.html)中有一堆格式标志可以使用：

[http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/date_time_io.html](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/date_time_io.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T18:01:54.260

@Matteo Italia 答案的一个稍微面向 C++ 的版本将[`std::put_time`](http://en.cppreference.com/w/cpp/io/manip/put_time)与结构结合使用`tm`。

```
std::time_t time = std::time(nullptr);
std::tm* tm = std::localtime(&time);

std::ostringstream ss;
ss << std::put_time(tm, "%Y%m%d");

std::cout << ss.str() << std::endl; 
```

当然，您可以将 的结果存储`ss.str()`在`std::string`.

# php - 在 PHP PDO 中插入用户类型（用于 tutis 登录）

> ID：13958019
> 
> 赞同：0
> 
> 时间：2012-12-19T17:39:31.703
> 
> 标签：php, mysql, database, pdo

我在[这里](http://www.firedartstudios.com/labs/tutis-login)使用 Tutis 登录脚本。

在该`register()`函数中，我只是希望能够在创建新用户时为保存在数据库中的数据再添加一个值。该脚本使用具有`users`一定数量列的数据库表，我还需要一列，`type`，我已将其添加到数据库中的表中。

问题是我不知道为什么这段代码不起作用：

```
$database->query('INSERT INTO users(username, password, email, date, type) 
VALUES (:username, :password, :email, :date, :type)', 
array(':username' => $username, 
'password' => $password, 
'email' => $email, 
'date' => $date, 
'type' => 'staff' // this is the line I added, just ensuring the user is 'staff'
)); 
```

原始代码完全相同，没有`'type'=> 'staff'`行。运行此命令时，当我检查时，其余值仍会正确保存在数据库中，但该`type`列仍为空。尝试注册用户时出现以下错误：

```
Warning: PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in... line database.class.php 71. 
```

在警告之后，我检查了，但在`database.class.php`文件的第 71 行，这就是全部内容：

```
/* Execute Query & check for any errors */
if(!$this->statement->execute()){ //this is line 71
    $result = array(
        1 => 'false',
        2 => '<b>[DATABASE] Error - Query:</b> There was an error in sql syntax',
    );
    return $result; 
```

我是 PDO 的新手，我也可以查看教程（并且有），但我无法简单地弄清楚这一点。有什么问题，有人有什么想法吗？如果您熟悉 PDO，您会寻找什么？

# javascript - Javascript 替换字符串中的内容（如果存在）

> ID：13958024
> 
> 赞同：5
> 
> 时间：2012-12-19T17:39:53.263
> 
> 标签：javascript, regex, replace

我有一个看起来像这样的字符串：

```
var minLength = 3;
var mystring = "This field must be {{minLength}} characters" 
```

我很好奇检测`{{`...存在`}}`并用 minLength 变量替换内容的好方法。正如您可能期望的那样，有许多不同的变量，例如 minLength、maxLength 等。我尝试了正则表达式，但似乎无法让它工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:44:44.817

```
var values = {
    minLength: 3
};

var text = "This field must be {{minLength}} characters";
var mystring = text.replace(/\{\{([^}]+)\}\}/, function(i, match) {
    return values[match];
}); 
```

[**演示**](http://jsfiddle.net/s2kwb/7/)

这样，您可以添加多个要替换的值，您只需添加它`values`并添加`g`到正则表达式。

```
var values = {
    minLength: 3,
    maxLength: 10
};

var text = "This field must be min {{minLength}} characters and max {{maxLength}}";
var mystring = text.replace(/\{\{([^}]+)\}\}/g, function(i, match) {
    return values[match];
});
console.log(mystring); // This field must be min 3 characters and max 10 
```

[**演示**](http://jsfiddle.net/s2kwb/8/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T17:44:20.553

```
var newString =  mystring.replace(/{{minLength}}/,minLength); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:46:45.787

您可以使用这种方法：

```
var str = "This field must be {{minLength}} characters";
var result = str.replace(/{{minLength}}/,"3");​​
alert(result); 
```

演示：[小提琴](http://jsfiddle.net/XR4ZG/)

# java - servlet 中的会话失效

> ID：13958025
> 
> 赞同：3
> 
> 时间：2012-12-19T17:39:54.950
> 
> 标签：java, jsp, web-applications, servlets

我的 Web 应用程序中有以下场景：

1.  所有资源都受到保护。
2.  用户从登录屏幕开始，然后他被转发到起始页面 - index.jsp
3.  会话到期前不久，用户会看到一个对话框 - 会话即将到期，单击“扩展”以延长会话，单击“取消”以取消它，并且有一个倒计时到会话到期的计时器。
4.  如果用户没有点击任何东西，我会调用我的 servlet，它应该使会话过期并转发到 index.jsp（这应该会触发登录屏幕）。这是使会话无效的代码：

    ```
    @Override
     protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    HttpSession session = request.getSession(false);

    if(session != null)
        session.invalidate();

    try {
        request.getRequestDispatcher("/jsp/index.jsp").forward(request,response);
    } catch (Exception e) {
        e.printStackTrace();
    }

    } 
    ```

我的问题是，虽然它第一次在 IE 中显示登录屏幕，但第二次看起来会话没有失效，并且主屏幕只是在会话即将到期时不断刷新（刷新扩展了会话）。

在 Firefox 中，它甚至不会在第一次显示登录屏幕，当它进入到期 servlet 时，我在控制台中看到了错误。

你认为可能是什么问题？

PS 看起来像将这个添加到 IE 中帮助的 servlet：

```
 // Set standard HTTP/1.1 no-cache headers.
  response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate");

  // Set IE extended HTTP/1.1 no-cache headers (use addHeader).
  response.addHeader("Cache-Control", "post-check=0, pre-check=0");

  // Set standard HTTP/1.0 no-cache header.
  response.setHeader("Pragma", "no-cache"); 
```

我需要进一步调查FF。

好的，为了回答我关于 FF 的问题，问题是我异步调用会话过期并且它内部有一个重定向，所以这在 FF 中不起作用，但在 IE 中出于某种原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T09:48:16.777

我知道为时已晚。但它可能对另一个人有帮助。

据我了解，您的问题是
您想在会话过期后带来登录页面。为此，您可以将以下代码行添加到您的 jsp 头标记

```
<head><meta http-equiv="refresh" content="${pageContext.session.maxInactiveInterval};url=login"></head> 
```

会话过期后，它会将您的页面重定向到上述代码**url属性中提到的 url。**

您还可以在 JSP 页面顶部添加以下代码

```
<%
response.setHeader("Pragma", "No-cache");
response.setHeader("Cache-Control",
        "no-cache, no-store, must-revalidate, private, max-age=0");
response.setDateHeader("Expires", 0);
%>
<%@page session="true"%> 
```

因为不缓存任何东西。

# java - 无法使用 struts2 拦截器验证图像上传表单

> ID：13958029
> 
> 赞同：0
> 
> 时间：2012-12-19T17:40:17.440
> 
> 标签：java, file-upload, struts2, interceptor

如果用户提交无效的图像扩展名，我正在尝试`image upload`使用 struts2 拦截器将验证放入我的表单中，应该有验证错误消息吗？

上传主题图片.jsp

```
<s:form action="updatethemeimageform"  method="post" enctype="multipart/form-data" id="remoteform"  theme="simple" >
     <s:hidden value="%{#parameters.themeid}" name="themId"/>  
      <s:file name="thempic" label="Theme Screenshot" /> 
      <sj:a button="true" id="btnsid" buttonIcon="ui-icon-gear" dataType="json" indicator="indicator"  onSuccessTopics="reloadMyGrid,handleJsonResult"  
        formIds="remoteform" targets="result">Submit This Form</sj:a>  </s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:58:31.570

如果您不在`<s:fielderror />`JSP 中放置标签，您将看不到错误。

在之前添加它`<s:form>`，您将看到您的验证错误...

PS：同样适用于`<s:actionmessage />`and `<s:actionerror >`（不参与验证但由您添加）

# css - 将 html 中的 Ruby 块添加到输入类 - Twitter Bootstrap

> ID：13958032
> 
> 赞同：1
> 
> 时间：2012-12-19T17:40:32.433
> 
> 标签：css, twitter-bootstrap

我正在尝试将 ruby​​ 块添加到 HTML 文件中的 span 类中。

```
<%= f.label :email => 
```

div & span 类如下：

```
<div class="input-prepend">
    <span class="add-on">
        <i class="icon-envelope"></i>
    </span>
    <input class="span" id="prependedInput" type="text" placeholder="">
</div> 
```

我已将 ruby​​ 块放在输入类中：

```
<div class="input-prepend">
    <span class="add-on">
        <i class="icon-envelope"></i>
    </span>
    <input class="span <%= f.text_field :email %>" id="prependedInput" type="text" placeholder="">
</div> 
```

我正在使用 Twitter Bootstrap，这是将 ruby​​ 块放置在 div/spans/或输入标签内的正确方法吗？

我想要做的是在输入字段中添加一个图标。当我提交文本时，它确实有效。它只是看起来很奇怪，代码和实际对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:50:44.123

我怀疑这可能是你所追求的：

```
<div class="input-prepend">
  <span class="add-on"><i class="icon-envelope"></i></span>
  <%= f.text_field :email, :id => "prependedInput" %>
</div> 
```

# javascript - 如何检查文档中是否出现新元素？

> ID：13958034
> 
> 赞同：0
> 
> 时间：2012-12-19T17:40:37.883
> 
> 标签：javascript, dom

> **可能重复：**
> [检测/监控 DOM 更改的最有效方法？](https://stackoverflow.com/questions/2457043/most-efficient-method-of-detecting-monitoring-dom-changes)

我试过这个，但它不起作用：

```
HTMLElement.prototype.onload = function() {
    alert(this.tagName);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:45:40.230

除非您将元素放在那里，否则元素不会出现在文档中。

存在突变事件以捕获插入、删除等，但它们没有得到很好的支持，因此大多数情况下最好在执行插入时捕获插入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:48:37.600

Really, what are you trying to achieve here?

If it is only about to determine if a given HTMLElement is currently in the DOM you can refer to the element's `parentNode` attribute. All elements except `<html>` will have a parentNode when they are part of the DOM tree. And you can have elements that you created via JS but never inserted into the DOM or elements that were in the DOM but now are removed from it. Either way, one with parentNode IS currently in the DOM and one w/o is not.

# aptana - Aptana - 手机模拟器

> ID：13958035
> 
> 赞同：2
> 
> 时间：2012-12-19T17:40:39.210
> 
> 标签：aptana

我是 Aptana Studio 3 开发环境的新手。我已经创建了一些 .html 页面（并且想在某个时候添加 jQuery Mobile）并且想看看它们在手机上的外观，例如 iPhone 或 Android 设备。

当我单击运行按钮时，我可以选择 (A) Firefox - 内部服务器或 (B) Internet Explorer - 内部服务器。这确实带来了一个视图......但它确实没有显示代码在手机上的外观。

有没有办法让我可以单击“运行”（或其他）并让视图像在手机上一样出现？

不确定我是否需要安装一些模拟器或插件或配置我的环境？

听说有个叫“Titanium Studo”的东西会更好？

任何意见将是有益的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T11:10:03.923

在 Chrome 中测试波纹模拟器，这是一个扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:57:01.367

Titanium Studo 是一个使用 javascript 开发移动应用程序（如 Android 和 iPhone）的 IDE，我们在 Android 和 iPhone 模拟器中测试我们的应用程序。

还有一个移动网络项目，允许您使用 HTML5（如 m.facebook.com）创建移动网络应用程序，但我没有在 Titanium Studo 中看到任何移动网络模拟器。

对于ipad，我使用这个网站进行测试：ipadpeek.com

# php - 将滚动条附加到jQuery中的元素

> ID：13958036
> 
> 赞同：5
> 
> 时间：2012-12-19T17:40:41.550
> 
> 标签：php, javascript, jquery

我有一个修改过的 jPlayer，带有“正在播放的内容”信息栏。

信息栏显示来自 PHP 文件的回显信息。

我需要在该播放器栏上的信息上附加一个滚动条，但我似乎无法确定它。

滚动条位于单独的 js 文件中。

[http://www.maxvergelli.com/jquery-scroller/](http://www.maxvergelli.com/jquery-scroller/)

*jQuery：*

```
getCurrentTrack();

$('.now_playing').SetScroller({
    velocity: 50,
    direction: 'horizontal',
    startfrom: 'right',
    loop: 'infinite',
    movetype: 'linear',
    onmouseover: 'pause',
    onmouseout: 'play',
    onstartup: 'play',
    cursor: 'pointer'
});

function getCurrentTrack() {
    $('.now_playing').load('/player/readerPlayer2.php');
    setInterval(function() {
        $('.now_playing').load('/player/readerPlayer2.php');
    }, 9000);
};​ 
```

*PHP信息：*

```
<?php
header("Expires: Tue, 03 Jul 2040 06:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

$xml = simplexml_load_file("http://**.**.**.**:8000/live.xspf"); 

foreach ($xml->trackList->track as $data) { 
    $radio = $data->location;
    $song  = $data->title;  
    $info = $data->listeners;   
}
echo '<div class="IceSong">'.$song.'</div>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:00:21.913

您是否尝试过在浏览器控制台中查找输出？

我刚刚尝试过这个，当我从你的加载 uri 中删除第一个斜杠时，它似乎对我来说很好。

请注意，您可以简单地从 setInterval 再次调用 getCurrentTrack 函数，而不是重新声明它。

```
 function getCurrentTrack() {
        $('.now_playing').load('player/readerPlayer2.php');
        setInterval(getCurrentTrack, 9000);
    } 
```

需要指出的另一件事是，函数声明后不需要分号。有关更多信息，请参阅[为什么我应该在 javascript 中的每个函数后使用分号？](https://stackoverflow.com/questions/1834642/best-practice-for-semicolon-after-every-function-in-javascript)

希望这会有所帮助，-让我知道你的进展情况。

# objective-c - 通过代码添加和设置 NSLayoutConstraint

> ID：13958037
> 
> 赞同：9
> 
> 时间：2012-12-19T17:40:47.757
> 
> 标签：objective-c, macos, cocoa, autolayout, nslayoutconstraint

我有一些麻烦`NSLayoutConstraint`。

如果我尝试`constant`使用该`setConstant:`方法进行更改，NSLayoutConstraint 会给我一个例外。当我通过代码添加高度约束时，我只有这个问题。

首先，我得到这样的高度约束：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"firstAttribute = %d", NSLayoutAttributeWidth];
NSArray *filteredArray = [[self constraints] filteredArrayUsingPredicate:predicate];
return filteredArray[0]; 
```

这给了我正确的约束。我有一个 NSTextField 子类，它可以完美地工作。约束在 Interface Builder 中设置，我可以设置和更改常量。

现在我有了一个视图，在其中我在运行时添加了不同的子视图。这些子视图位于自己的 NIB 中，这意味着我无法固定它们的宽度和高度。所以我想我会在视图被添加到超级视图后立即添加约束。这是正在执行的`viewDidMoveToSuperview`。

```
// Pin Width & Height
[self addConstraint:[NSLayoutConstraint constraintWithItem:self
                             attribute:NSLayoutAttributeWidth
                             relatedBy:NSLayoutRelationEqual
                                toItem:nil
                             attribute:NSLayoutAttributeNotAnAttribute
                            multiplier:1.0f
                              constant:self.frame.size.width]];
[self addConstraint:[NSLayoutConstraint constraintWithItem:self
                                                 attribute:NSLayoutAttributeHeight
                                                 relatedBy:NSLayoutRelationEqual
                                                    toItem:nil
                                                 attribute:NSLayoutAttributeNotAnAttribute
                                                multiplier:1.0f
                                                  constant:self.frame.size.height]]; 
```

添加了约束，我可以通过 NSLog 确认这一点。

```
"<NSLayoutConstraint:0x100605cc0 H:[ITControlPanelChildView:0x100616eb0(269)]>",
"<NSLayoutConstraint:0x100614410 V:[ITControlPanelChildView:0x100616eb0(317)]>" 
```

现在，最后，当我尝试使用更改约束时，`[constraint setConstant:somethingDifferent];`出现以下异常：

```
Unable to simultaneously satisfy constraints:
(
    "<NSLayoutConstraint:0x10192fcb0 V:[ITControlPanelChildView:0x10192e4f0(100)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x10053ff10 h=--& v=&-- V:[ITControlPanelChildView:0x10192e4f0(317)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x10192fcb0 V:[ITControlPanelChildView:0x10192e4f0(100)]> 
```

这正是我想要改变的约束。谁能向我解释为什么会这样？

* * *

# 编辑

我刚刚读到`NSAutoresizingMaskLayoutConstraint`s 是自动添加的，如果您设置`[self setTranslatesAutoresizingMaskIntoConstraints:NO];`.

如果我禁用它，它可以工作。

如果我可以访问创建的内容，那就更好`NSAutoresizingMaskLayoutConstraint`了。有谁知道这是如何工作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:01:31.780

如您未包含的日志消息的其余部分所示，您有不想要或不需要的自动调整大小约束。

您可以在添加子视图时删除这些。在您上面使用的方法中，只需添加以下行：

```
self.translatesAutoresizingMaskIntoConstraints = NO; 
```

虽然如果您在单独的 nib 中创建视图，它的大小是从哪里获得的？它不是已经有大小限制，您可以创建出口吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:25:00.243

I have had this problem *twice*.

I used a technique described in *Cocoa Programming for Mac OSX 4th Ed* by Hillegass & Preble. The book advises using an NSBox as a view container and switching the views into it using code. The book also includes some handy code for manually resizing the external containing window to hold the view you just switched to.

The first time I tried their technique I got this exception:

```
2013-01-05 22:56:05.103 MyApp[17717:303] Unable to simultaneously satisfy constraints:
(
    "<NSAutoresizingMaskLayoutConstraint:0x100141330 h=--& v=--& H:[NSView:0x10012fdf0(4)]>",
"<NSLayoutConstraint:0x1001316c0 H:[NSScrollView:0x100123ff0]-(NSSpace(20))-|   (Names: '|':NSView:0x10012fdf0 )>",
"<NSLayoutConstraint:0x1001315d0 H:|-(NSSpace(20))-[NSScrollView:0x100123ff0]   (Names: '|':NSView:0x10012fdf0 )>")

Will attempt to recover by breaking constraint 
```

Frustratingly enough I had to refactor the UI and in the rebuilt version (which is based on NSDocument rather than a simple window) I struck the same problem again.

If I set translatesAutoResizingConstraints to NO on the sub-views they don't get laid out properly. But those sub-views are complex so its not a solution though because my windows are not laid out. That does stop the exception from being thrown however.

If I turn off AutoLayout on the top level NSDocument based window XIB - then the exception also stops being thrown. But then the layout for the top level elements is wrong, and the box is not sized correctly. This is not so complex that I couldn't manually lay it all out I guess.

The weird thing is on my first version of the UI it works with no throw. The first version has Autolayout set for the top-level view and all the subviews.

I cannot for the life of me find what obscure setting is turned on in one, but not the other. I pasted the exact same code that works in the window version for swapping views into the document based version, and I went thru control by control checking every setting.

My memory of fixing the issue the first time is that I had turned off AutoLayout on the XIB, but looking at it now trying to fix for the second time, the AutoLayout is turned on and it works fine.

First version works - second one doesn't. The only thing I can think of is that somehow something in NSDocument or something else is causing the issue.

However I did find a way to fix it in case number two: turn off the "AutoResizes Subviews" check-box for the NSBox used as a view container.

Why this is not required in the first version of the UI (which works fine with that checkbox set) is a mystery.

Anyway - documented here in case it helps someone else.

# wpf - 为什么我的命令绑定仅在按钮位于工具栏中时才有效？

> ID：13958042
> 
> 赞同：0
> 
> 时间：2012-12-19T17:40:58.900
> 
> 标签：wpf, xaml, routed-commands

我有一个带有工具栏的窗口，其中包含一些带有命令的按钮。按钮停止工作，因为我用包含按钮的堆栈面板替换了工具栏。

据我了解，这应该没有任何区别。按钮仍然设置了 Command 属性，我没有更改自定义命令类中的任何内容，并且 CommandBinding 也仍然相同。它们实现了一些比按钮更深的网格和用户控件，但它们确实有效，只要按钮位于 ToolBar 控件中！

如果我直接在窗口中实现 CommandBindings，它们就可以工作（但这不是我想要的）

下面是代码（删节）：

```
<Window>
    <Grid>
        <StackPanel>
            <Button Command="gui:GuiCommands.Hello">Hello</Button>
        </StackPanel>

        <Grid>
            <TabControl>
                <TabItem Header="MyTab">
                    <Grid>
                        <Grid.CommandBindings>
                            <CommandBinding Command="gui:GuiCommands.Hello" Executed="hello_Clicked"/> <!-- THIS WOULD NOT WORK -->
                        </Grid.CommandBindings>
                    <Grid>
                </TabItem>
            </TabControl>
        </Grid>
    </Grid>

    <Window.CommandBindings>
        <CommandBinding Command="gui:GuiCommands.Hello" Executed="hello_Clicked"/> <!-- THIS WOULD WORK -->
    </Window.CommandBindings>
</Window> 
```

我知道它不会编译，但我必须简化它。只要我用我的应用程序将“StackPanel”替换为“ToolBar”，这就会起作用。怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:58:29.447

好的，我想我自己又想通了（为什么这总是在我发布问题后立即发生？）

短：我需要`FocusManager.IsFocusScope="true"`设置`StackPanel`

Long：查看这个问题的答案：[我必须使用 CommandTarget 吗？我认为任何集中的元素都会收到命令](https://stackoverflow.com/questions/10834190)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:55:42.680

[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)仅将子元素排列成可以水平或垂直定向的单行。

而[工具栏](http://msdn.microsoft.com/en-us/library/system.windows.controls.toolbar.aspx)为一组命令或控件提供了一个容器。

那么如果你在 ToolBar 中放置一个 StackPanel 元素会发生什么

```
<ToolBar>
    <StackPanel>
        <Button Command="gui:GuiCommands.Hello">Hello</Button>
    </StackPanel>
</ToolBar> 
```

# database - 多值依赖示例棘手

> ID：13958044
> 
> 赞同：1
> 
> 时间：2012-12-19T17:41:12.800
> 
> 标签：database, dependencies, key, relationship, modeling

`Employé3: {noEmp, ability, country}`

我有这一小套属性和以下限制： 每个员工可能具有与某个国家相关的一些能力。例如，阿尔弗雷德会做意大利菜和中国菜，还会用法语写作。

我的问题是我无法决定哪种 DM 是最好的解决方案。我试过 use `noEmp,country ->> aptitude`，但它让我感到困惑。它说我可以有两个具有相同`(noEmp,country)`但不一定具有相同能力的元组。好的！但是够了吗？

我想过用`noEmp->>country,ability`，但它似乎没有表达能力和国家之间的关系。

当然，所有这些 DM 都是微不足道的，因为它抱怨所有属性，所以也许这是一个愚蠢的问题......

还有一个问题：钥匙呢？我可以使用 DM 来确定它吗？起初我以为不是，因为密钥必须是单的。但是在这种情况下，我将被迫使用所有属性作为键，这有点奇怪，如果我不能使用 DM 来确定某些东西，我怎么可能有 4FN 关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:25:57.333

对`(ability, country)`是*复合属性*。让我们称之为`ethnic_ability`缺乏更好的术语。复合属性是复杂的域，它们被扁平化为多列原始数据类型。例子：`(yyyy_mm_ss_date, hh_mm_daytime)`, `(first_name,last_name)`, `(integer_part_of_real_number,decimal)`. 从 DM 的角度来看，复合属性可以被认为是原子的。因此，您有一个包含两列的表`{noEmp, ethnic_ability}`，依赖理论对二元谓词的描述并不多。

# emacs - 在 .emacs 中设置默认目录

> ID：13958049
> 
> 赞同：1
> 
> 时间：2012-12-19T17:42:01.297
> 
> 标签：emacs, elisp, dot-emacs

我真的不知道该说什么。

我一直在定制我的 emacs，我注意到它实际上并没有`.emacs`在启动时加载我的。根据（http://www.gnu.org/software/emacs/manual/html_node/emacs/Find-Init.html#Find-Init），emacs首先在HOME目录（`~/`）中查找初始化文件...

当我启动 emacs 时，我的`.emacs`文件*似乎*被正确读取 -`.notes`例如，当我访问一个文件时，钩子被评估等等。令我惊讶的是：未设置默认目录 - 同一加载文件中的命令。我可以手动评估它，也可以简单地执行`(load "~/.emacs")`它，它会正常工作。

我想这个问题可以总结一下：如果`load`命令在手动执行时按预期工作，为什么它不能在启动时自动工作？

完整（注释掉的函数除外）`.emacs`文件：

```
; http://stackoverflow.com/a/13946304/1443496
(defvar auto-minor-mode-alist ()
  "Alist of filename patterns vs correpsonding minor mode functions,
   see `auto-mode-alist'. All elements of this alist are checked,
   meaning you can enable multiple minor modes for the same regexp.")

(defun enable-minor-mode-based-on-extension ()
  "check file name against auto-minor-mode-alist to enable minor modes
the checking happens for all pairs in auto-minor-mode-alist"
  (when buffer-file-name
    (let ((name buffer-file-name)
          (remote-id (file-remote-p buffer-file-name))
          (alist auto-minor-mode-alist))
      ;; Remove backup-suffixes from file name.
      (setq name (file-name-sans-versions name))
      ;; Remove remote file name identification.
      (when (and (stringp remote-id)
                 (string-match-p (regexp-quote remote-id) name))
        (setq name (substring name (match-end 0))))
      (while (and alist (caar alist) (cdar alist))
        (if (string-match (caar alist) name)
            (funcall (cdar alist) 1))
        (setq alist (cdr alist))))))

(add-hook 'find-file-hook 'enable-minor-mode-based-on-extension)

;; the wrapping up of the two loads make sure 
;; auctex is loaded only when editing tex files. 
(eval-after-load "tex-mode" 
  '(progn
     (load "auctex.el"  nil nil t)
     (load "preview-latex.el" nil nil t)
     )
  )

; Sets my default directory to my dropbox (platform-dependent)
(setq default-directory
      (concat
       (if (eq system-type 'windows-nt)
       "t:" "~")
       "/Dropbox/Public/School/TeX/"))

; Set up the .notes extension
(setq auto-mode-alist
      (cons '("\\.notes\\'" . text-mode)
        auto-mode-alist))
(setq auto-minor-mode-alist
      (cons '("\\.notes\\'" . auto-fill-mode)
            auto-minor-mode-alist))

;; AUCTeX replaces latex-mode-hook with LaTeX-mode-hook
(add-hook 'LaTeX-mode-hook
      (lambda ()
        (setq TeX-auto-save t)
        (setq TeX-parse-self t)
        ;; (setq-default TeX-master nil)
        (reftex-mode t)
        (TeX-fold-mode t))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:10:40.663

默认目录是本地缓冲区。你的 .emacs 加载得很好；为您打开的每个新缓冲区（重新）设置默认目录的值。当您重新加载 .emacs 时，它只会更改您所在缓冲区的 default-directory 的值。

# java - 提高 Solr 查询超过 1600 万条推文的速度

> ID：13958052
> 
> 赞同：2
> 
> 时间：2012-12-19T17:42:20.330
> 
> 标签：java, search, solr, information-retrieval, solrcloud

我使用 Solr (SolrCloud) 来索引和搜索我的推文。大约有 1600 万条推文，索引大小约为 3 GB。推文在出现时会被实时索引，以便启用实时搜索。目前我使用`lowercase`字段类型作为我的推文正文字段。对于搜索中的单个搜索词，大约需要 7 秒，并且随着每个搜索词的添加，搜索所花费的时间线性增加。3GB 是为 solr 进程分配的最大 RAM。示例 solr 搜索查询如下所示

```
tweet_body:*big* AND tweet_body:*data* AND tweet_tag:big_data 
```

关于提高搜索速度的任何建议？目前我只运行 1 个包含整个推文集合的分片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:56:49.067

`tweet_body:*big*`预计该查询的性能会很差。尾随通配符很容易，可以使用 ReversedWildcardFilterFactory 轻松处理前导通配符。然而，两者都必须扫描每个文档，而不是能够利用索引来定位匹配的文档。结合这两种方法只会让你搜索：

```
tweet_body:*big tweet_body:big* 
```

这不是一回事。如果您确实必须搜索带有前导和尾随通配符的术语，我建议您将数据索引为 N-gram。

* * *

我以前不知道，但`lowercase`字段类型似乎是小写过滤的关键字分析器。这不是你想要的。这意味着整个字段被视为单个标记。适用于标识号等，但不适用于您希望对其执行全文搜索的正文。

所以是的，你需要改变它。 `text_general`可能是合适的。这将索引一个正确标记的字段，并且您应该能够执行您正在寻找的查询：

```
tweet_body:big AND tweet_body:data AND tweet_tag:big_data 
```

您将不得不重新编制索引，但这是无法避免的。没有对关键字字段执行全文搜索的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T10:00:26.813

尝试使用过滤器查询，因为过滤器查询并行运行

# .net - 如何在数据绑定期间保持忙碌指示器工作？

> ID：13958053
> 
> 赞同：1
> 
> 时间：2012-12-19T17:42:21.890
> 
> 标签：.net, wpf, wpf-controls

在单独的线程上获取数据或运行其他一些长时间任务时，忙碌指示器旋转正常，但是一旦长时间运行的任务完成并且数据绑定到 UI 使用的集合启动忙碌指示器冻结...

现在，忙碌指示器和数据绑定都在 UI 线程上工作，所以这是有道理的，但我一直认为有一种方法可以让忙碌指示器在数据绑定期间保持工作......我假设两者之一将不得不在不同的线程上工作，但这不可能……

我目前正在使用 Telerik 控件，但我在其他集合中的繁忙指标上遇到了同样的问题，所以它不是 Telerik 独有的。

有什么想法吗？

# php - 优化从一个非常大的 MySQL 表中提取数据的算法

> ID：13958055
> 
> 赞同：1
> 
> 时间：2012-12-19T17:42:22.280
> 
> 标签：php, mysql, algorithm

我的网站提供了大量标记和分类的内容，我正在尝试创建一个强大的算法来使内容符合用户需求。用户可以选择他们最感兴趣的标签，并且与这些标签匹配的内容被给予更高的优先级。此外，内容可以被“喜欢”（将其优先推高），而时间衰减会将其推低优先级。因此，最终，用户应该看到与他们感兴趣的内容相一致的相对较新的内容，并且也受到其他用户的欢迎。

当前算法的工作原理如下：

1.  从桌子上拉出所有物品`content`。为每个项目分配 1 分。
2.  检查`content_tags`以`user_tags`查看从步骤 1 中提取的数组中是否存在匹配项。如果是，则将乘数应用于该项目的分数。
3.  检查`content_likes`每个项目有多少喜欢。根据此金额应用另一个乘数。
4.  根据项目的时间衰减应用第三个因素。显然，旧物品比新物品受到更大的惩罚。
5.  按总分排序。结果数组应该首先包含最相关的项目。然后，我可以简单地将这个数组缩减为 20 个左右的项目并将它们显示在页面上。

正如您可能知道的那样，这是一个缓慢的算法，它不仅必须运行查询来提取*每一条内容*，而且还必须运行单独的查询来检查`content_tags`、`user_tags`和`content_likes`。查询太多！

我想我的第一个问题是：我做错了吗？除此之外，您能想出任何方法来优化我上面总结的所有内容吗？该算法本身运行良好，假设项目和用户具有相关标签。但我担心当我的`content`桌子增长到几万件时，我会一团糟。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:58:41.697

使用许多查询会减慢您的页面速度。尝试将它们组合成尽可能少，并请在您的 mysql-tables 上使用索引！您会注意到创建索引肯定会影响页面的加载时间。

# json - Django活塞。如何序列化为不是模型子类的 JSON 对象？

> ID：13958057
> 
> 赞同：2
> 
> 时间：2012-12-19T17:42:37.600
> 
> 标签：json, django, django-piston

我正在使用 django + 活塞，到目前为止，我创建了一些 url，它们可以很好地以 JSON 格式返回我的 django 模型。我什至不必指定发射器，JSON 序列化是自动完成的。

现在我需要返回一个不扩展 Django Model 类的 JSON 序列化对象。如果我返回它的值，活塞会返回 __str __ 值，即使我添加 JSON 发射器也不会发生任何事情。我不想在 __ str __ 方法中添加 JSON 序列化，因为它不正确。什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:49:56.923

您可以使用 python 的[json](http://docs.python.org/2/library/json.html)包来执行此操作。

片段：

```
>>> import json
>>> json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}])
'["foo", {"bar": ["baz", null, 1.0, 2]}]' 
```

如果您希望在 django 视图的上下文中创建它，您需要确保发送回正确的内容类型。那是，

```
from django.http import HttpResponse
return HttpResponse(your_json_string, mimetype='application/json') 
```

请注意，这不一定适用于所有类型。通常构造一个`dict`包含您想要返回的内容的对象，然后对其进行序列化是一个好主意。

# json - 在erlang中解析从http返回的json

> ID：13958059
> 
> 赞同：2
> 
> 时间：2012-12-19T17:42:40.913
> 
> 标签：json, erlang

我用这段代码测试：

```
get_fee(Transaction,SourceNumber,Amount, Currency) ->
Url = lists:concat(["http://localhost/test.php","?transaction=", Transaction, "&saccount=", SourceNumber,Amount,"&currency=",Currency]),
        inets:start(),
        {Flag, Response} = http:request(get, {Url, []}, [], []),
        case Flag of
            ok ->
                { { _, ReturnCode, _ }, _, Body } = Response,

                if ReturnCode =:= 200 ->
                        {ok,{_,[{_,Code},{_,Permission},{_,Payer},{_,Payee}]}} = json:decode_string(Body),
                            case Permission of true ->
                                if Code =:= 200 ->
                                    {ok,{Code, Payer, Payee}};
                                Code =:= 204 ->
                                    {nok,{Code, not_found}};
                                true ->
                                    {nok,{Code, parameter_error}}
                                end;
                            false ->
                                {nok,{Code, parameter_error}}
                            end;
                    true->
                        {error, http_error}
                end;
            error ->
                case Response of
                    nxdomain -> {error, dns_error};
                    _ -> {error, network_error}

                end
        end. 
```

http的响应是： `{"code":200,"permission":true,"fee_payer":0,"fee_payee":19}`

但是现在我喜欢做同样的想法，但是在这种情况下 http 的返回例如是：

```
{"CIN":"08321224","Name":21} 
```

所以在这种情况下我只有 CIN 和 Name

我尝试改变以前的

```
get_fee(Num) ->
    Url = lists:concat(["http://localhost/GTW/Operation.php","?ACCOUNT_NUM=", Num]),

            inets:start(),
             {Flag, Response} = http:request(get, {Url, []}, [], []),
            case Flag of
                ok ->
                    { { _, ReturnCode, _ }, _, Body } = Response,
                    %% for debug
                   io:format("~p~n",[ReturnCode]),
                    if ReturnCode =:= "08321224" ->
                            {ok,{_,[{_,CIN},{_,Name}]}} = json:decode_string(Body),
                                case Name of 21 ->
                                                 io:format(CIN),
                                                 io:format(Name),
                                    if CIN =:= "08321224"->
                                        {ok,{CIN, Name}};
                                    CIN =:= 204 ->
                                        {nok,{CIN, not_found}};
                                    true ->
                                        {nok,{CIN, parameter_error}}
                                    end;
                                false ->
                                    {nok,{CIN, parameter_error}}
                                end;
                        true->
                            {error, http_error}
                    end;
                error ->
                    case Response of
                        nxdomain -> {error, dns_error};
                        _ -> {error, network_error}
                    %% for debug
                    %%io:format("pass2~n ~p~n",[Response]),
                    end
  end. 
```

但它显示：

```
test:get_fee("0001").
200
{error,http_error} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T10:50:04.840

所以我会在这里挑剔风格，因为如果你遵循 Erlang 的语义思想，你会更好：

```
get_fee(Num) ->
    Url = lists:concat(["http://localhost/GTW/Operation.php","?ACCOUNT_NUM=", Num]),
    inets:start(), 
```

这是错误的起点`inets`。它应该在此功能之外启动，因为您只需要执行此操作。

```
{Flag, Response} = http:request(get, {Url, []}, [], []), 
```

这部分最好用*模式匹配*编码。`Flag`和的区分`Response`可以直接用简单的匹配来解码。写，

```
case http:request(get, {Url, []}, [], []) of
  {ok, {{_, 200, _}, _, Body}} ->
      {ok, R} = json:decode_string(Body),
      get_fee_decode_(get_cin(R), get_name(R));
  {error, Reason} -> {error, Reason}
end. 
```

我建议不要更改`{error, nxdomain}`为，`{error, dns_error}`因为无论如何都可以`nxdomain`完美地编码这种情况。只需将错误元组传递给调用者并让他处理即可。

```
get_fee_decode_("08321224" = CIN, 21 = Name) -> {ok, {CIN, Name}};
get_fee_decode_("204" = CIN, 21) -> {nok, {CIN, not_found}};
get_fee_decode_(CIN, _Name) -> {nok, {CIN, parameter_error}}; 
```

引入一个像这样的新函数来处理代码库的内部部分。并将匹配提升到顶层。从长远来看，这有助于将您的代码解耦为函数。

请注意，在 JSON 结构中，“对象”没有顺序，因此您不能假设该结构是

```
{"code":200,"permission":true,"fee_payer":0,"fee_payee":19} 
```

但根据 JSON，解码不必保留这种结构。所以一个有效的解码可能是：

```
[{"fee_payee", 19}, {"fee_payer", 0}, {"permission", true}, {"code", 200}] 
```

这将无法在您的代码中匹配，并且您稍后会为一些讨厌的错误设置自己。

你想要一些类似的东西：

```
get_fee_payer(PL) -> proplists:get_value("fee_payer", PL). 
```

另一个对你的编程风格有问题的事情是你隐藏了错误信息的情况。在 Erlang 中，您通常可以避免只处理代码中的“快乐路径”，而将所有错误处理都放在一边，直到您知道代码库中存在什么样的错误。然后您可以开始慢慢添加错误处理。如果可以避免，防御性编程不是你应该做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:19:43.720

你变了：

```
if ReturnCode =:= 200 -> 
```

至：

```
if ReturnCode =:= "08321224" -> 
```

但是，这需要在您的版本中保持不变。200 是“OK”的 HTTP 状态码——这里的第一步是验证服务器是否确实处理了请求并返回了肯定的回复。您只会在其中找到该数字`Body`-这就是该`if CIN =:= "08321224"->`零件的用途。

# ruby - attr 与 attr_accessor

> ID：13958061
> 
> 赞同：22
> 
> 时间：2012-12-19T17:42:52.160
> 
> 标签：ruby, oop

在 Ruby 中，实例变量有四种不同的 getter 和 setter 方法`attr`，`attr_reader`、`attr_writer`、 和`attr_accessor`。问题是，在 Ruby中，如果传递了附加参数 true ，是否与`attr :dilithium`相同`attr_reader :dilithium`，并且相同？`attr_accessor :dilithium`也就是说是

```
class Enterprise
  attr :dilithium, true 
```

相同

```
class Enterprise
  attr_accessor :dilithium 
```

这两个功能或多或少是多余`attr`的吗？`attr_accessor`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T17:45:29.340

一个区别是`attr_accessor`和朋友更清楚，可选的布尔参数`attr`现在[已弃用](https://ruby-doc.org/core-2.5.3/Module.html#method-i-attr "rubydoc")。除此之外，以及`attr`没有文档的事实，没有真正的区别。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T18:13:03.813

在 Ruby 1.8 中，`attr`只能定义一个属性，并且可以选择`true`创建一个 setter 。在 1.9 中，它的行为类似于`attr_reader`:it 允许多个属性。正如@Linuxios 所说，不推荐使用可选的布尔值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-02T08:39:19.047

如果您查看 Ruby 2.3.0 中的 C 代码，您会看到这一点`attr`并且`attr_reader`实际上在做同样的事情（除了不推荐使用的代码路径）。它们本质上是等价的功能。

对我来说，主要区别是：

`attr`因为它更短，所以更容易写下来。我也喜欢它在函数式/不可变编程上下文中的感觉（在那些上下文中，`attr_writer`并且`attr_accessor`是不相关的，因此使用`attr_reader`感觉冗长和多余）。

`attr`具有多个实例变量使得很难记录，除非在非常特殊的情况下，例如

```
# The coordinates in WGS84.
attr :x, :y

# The location name.
attr :name

# The popularity of the location.
attr :popularity 
```

如果它们在同一条线上，则更难以记录`:name`和独立。`:popularity``attr :name, :popularity`

除此之外，它归结为个人喜好。实际上没有性能差异或任何其他差异。

# php - SFTP 将动态生成的 HTML 文件发送到外部服务器

> ID：13958064
> 
> 赞同：-1
> 
> 时间：2012-12-19T17:42:55.720
> 
> 标签：php, html, ftp, sftp

我正在尝试 SFTP 动态制作的 HTML 文件（使用文件放置内容）和 shh2 库。

这是我到目前为止所得到的，apache 报告它无法发送，因为本地磁盘上不存在该文件：

```
$pageBody = '<body>
    <div id="canvas_container">
        <canvas id="designer_canvas" width="430" height="415">
        </canvas>
    </div>
<div style="display:none" id="share_design_details">
<li>'.$mc1.'</li><li>'.$mc1.'</li><li>'.$mc2.'</li><li>'.$sp.'</li><li>'.$p.'</li><li>'.$c.'</li></div>

<div id="test">This design is called : '.$designName.'</div></body>' ; 

$newFile = file_put_contents('newfile.html',$pageBody);
$connection = ssh2_connect('myhost.com', 22);
ssh2_auth_password($connection, 'myuser', 'mypass');

$sftp = ssh2_sftp($connection);
ssh2_scp_send($connection, $newFile, $newFile, 0644); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:15:28.380

我自己会使用 phpseclib，一个纯 PHP SFTP 实现。例如。

```
<?php
include('Net/SFTP.php');

//Define content
$pageBody = 'CONTENT HERE';

//Connect to SFTP host
$sftp = new Net_SFTP('myhost.com', 22);
$sftp->login('myuser', 'mypass');

//Send the file
$sftp->put('/tmp/temp.html', $pageBody);
?> 
```

更便携，可以说也更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:01:52.243

***完全***未经测试，但通常写入 SSH 连接（请注意，在 shell 下）使其可用于另一端。考虑到这一点，运行一个命令，将它放在另一侧的正确位置，然后写入它。

```
$stream = ssh_exec('cat > some/file');
$result = fwrite($stream, $pageBody); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:52:15.050

ssh2_scp_send **()**函数需要本地和远程文件的文件路径。

[http://php.net/manual/en/function.ssh2-scp-send.php](http://php.net/manual/en/function.ssh2-scp-send.php)

**file_put_contents()**函数返回写入文件的字节数，而不是文件路径。

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

因此，您的**ssh2_scp_send()**应该读取如下内容，其中目标服务器上的目标目录是*/tmp*：

```
ssh2_scp_send($connection, 'newfile.html', '/tmp/newfile.html', 0644); 
```

我认为不可能上传尚不存在的文件，因为您实际上是直接写入目标服务器而不是上传文件。

我会在使用**unlink()**函数发送后简单地删除文件。

[http://php.net/manual/en/function.unlink.php](http://php.net/manual/en/function.unlink.php)

所以你的完整逻辑如下：

```
//Define content
$pageBody = 'CONTENT HERE';

//Create the file
$newFile = file_put_contents('temp.html', $pageBody);

//Connect to SFTP host
$connection = ssh2_connect('myhost.com', 22);
ssh2_auth_password($connection, 'myuser', 'mypass');
$sftp = ssh2_sftp($connection);

//Send the file
ssh2_scp_send($connection, 'temp.html', '/tmp/temp.html', 0644);

//Delete the local file
unlink('temp.html); 
```

# android - 如何在布局中垂直居中两个 TextView

> ID：13958067
> 
> 赞同：6
> 
> 时间：2012-12-19T17:43:13.327
> 
> 标签：android, android-relativelayout

我有一个`RelativeLayout`（我没有结婚）和两个`TextView`s。我希望第一个的底部`TextView`与其父级的中心对齐，第二个的顶部与`TextView`其父级的中心对齐。

![在此处输入图像描述](../Images/3f4efeda308a2a73842895bbd7d9be5d.png)

我在上图中的父级（垂直）中心放置了一条绿线。s目前`TextView`正好在正确的位置，但我这样做了，正如我将在下面描述的那样，将它们与父级对齐并知道父级的大小。

由于各种原因，我不能只使用一个`TextView`并将其居中。另外我不知道父级的高度，所以我不能将每个对齐到父级的顶部/底部并将它们向下/向上边缘以使它们居中。

我还尝试了另一个`View`占据一半高度的 be `invisible`，但`layout_height`不占百分比（或者至少它给了我错误）。

有什么想法可以做到这一点吗？

我是否应该将两个`TextView`s 放在另一个布局中并拥有该中心本身？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T17:46:39.480

创建一个以父级为中心并用作锚点的 0 高度视图。（为此使用该属性`android:layout_centerVertical="true"`。）将一个文本视图放置在锚点上方，另一个放在锚点下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:53:41.917

我之前通过使用带有两个 TextView 的垂直 LinearLayout 解决了这个问题。

ps.：Android 设计指南[http://developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)具体指出`Don't use right-pointing carets on line items`. 它可能不是您正在做的订单项，但如果是，请指出。

# css - 如何使用 Modernizr 检测是否支持 SVG CSS 背景？

> ID：13958073
> 
> 赞同：5
> 
> 时间：2012-12-19T17:43:35.353
> 
> 标签：css, modernizr

正如问题所说，我如何使用 Modernizr 来检测是否支持 SVG CSS 背景？

`.svg #example{}`不是正确的方法，因为不同的浏览器对 svg 文件的支持不同。

例如 Modernizr 报告 SVG 在 Firefox 3.5 中受支持，但不支持 SVG 文件和 CSS 作为背景图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:59:13.597

纯 CSS 解决方案怎么样？我可以确认这适用于 IE8。

```
E {
background-image:  url('image.png');
background-image:  none, url('image.svg'), url('image.png');
background-size: 100% 100%;
} 
```

[http://www.broken-links.com/2010/06/14/using-svg-in-backgrounds-with-png-fallback/](http://www.broken-links.com/2010/06/14/using-svg-in-backgrounds-with-png-fallback/)

或者试试这个其他方法：

```
E {
background: transparent url(fallback-image.png) center center no-repeat;
background-image: linear-gradient(transparent, transparent), url(vector-image.svg);
} 
```

[http://pauginer.tumblr.com/post/36614680636/invisible-gradient-technique](http://pauginer.tumblr.com/post/36614680636/invisible-gradient-technique)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T17:35:15.563

一种选择是在modernizer中使用**Inline SVG选项。**我可以确认这在 FF 3.6.14 中有效。您可以选择“内联 SVG”作为现代化器构建的一部分，并且可以在 CSS 中管理它，例如：

```
.logo {
    background: url(mahimage.svg);
    ...
}

.no-inlinesvg .logo {
    background: url(mahimage.png);
    ...
} 
```

或在 javascript 中，如：

```
if (Modernizr.inlinesvg) {
    ...
}
else {
    ....
} 
```

# android - android GCM获取规范ID的原始ID

> ID：13958079
> 
> 赞同：9
> 
> 时间：2012-12-19T17:44:17.330
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试向某些 android 设备发送推送更新。他们中的一些人同时有了一个新的 id，所以我谷歌告诉我有规范的 id。从我阅读的文档中：

如果设置了 message_id，请检查 registration_id：

*   如果设置了registration_id，则将原始ID 替换为服务器数据库中的新值（规范ID）。注意原始ID不是结果的一部分，所以需要从请求中传入的registration_ids列表中获取（使用相同的索引）。

我是否遗漏了一部分，或者如果您向 Google 发送超过 1 个注册 ID，这是否含糊不清？

我的要求（替换 id 以提高可读性）：

```
"{"data":{"favorite":1},"registration_ids":["1","2","3","4","5","6"]}" 
```

谷歌的回应是：

```
{
  "multicast_id":7917175795873320166,
  "success":6,
  "failure":0,
  "canonical_ids":4,
  "results":[
    {"registration_id":"3","message_id":"m1"},
    {"message_id":"m1"},
    {"message_id":"m1"},
    {"registration_id":"3","message_id":"m1"},
    {"registration_id":"3","message_id":"m1"},
    {"registration_id":"3","message_id":"m1"}
 ]
} 
```

由此，我知道 id 3 是正确的，但我应该用 3 替换哪些原始 id？为每个注册的 id 发送每条消息将是一种浪费。我在这里阅读了一篇关于 Stackoverflow（[GCM 和 id 处理](https://stackoverflow.com/questions/13752995/gcm-and-id-handling)）的帖子，为 Java 服务器解决了它，但我的不是（RoR）。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T18:46:40.357

如您链接到的帖子中所述，这一切都基于响应列表中的位置。因此，当您获得规范 ID 时，您需要在“发送列表”的相同位置更新原始注册 ID。

因此，在您的示例中，其中 4 个结果是规范的（0、3、4、5）：

```
[0] {"registration_id":"3","message_id":"m1"},
[1] {"message_id":"m1"},
[2] {"message_id":"m1"},
[3] {"registration_id":"3","message_id":"m1"},
[4] {"registration_id":"3","message_id":"m1"},
[5] {"registration_id":"3","message_id":"m1"} 
```

这是您的“发送列表”：

```
[0] "1",
[1] "2",
[2] "3",
[3] "4",
[4] "5",
[5] "6" 
```

根据结果​​，您需要将位置 0、3、4、5 的注册 ID 更新为 ID 3。这意味着您最终将得到如下注册列表：

```
[0] "3",
[1] "2",
[2] "3",
[3] "3",
[4] "3",
[5] "3" 
```

最后：

```
[0] "3",
[1] "2", 
```

另请参阅：[https](https://developer.android.com/google/gcm/adv.html#canonical) ://developer.android.com/google/gcm/adv.html#canonical和[https://developer.android.com/google/gcm/gcm.html#response](https://developer.android.com/google/gcm/gcm.html#response)

# c++ - mingw 编译错误：从 'FARPROC' 到 'void*' 的无效转换，但 msvc 编译正常

> ID：13958081
> 
> 赞同：1
> 
> 时间：2012-12-19T17:44:25.177
> 
> 标签：c++, winapi, visual-c++, mingw

我正在尝试将一个开源项目移植到 mingw。我在一个在 msvc 下编译良好的源文件中遇到了一个奇怪的转换错误。

这是重现错误的隔离测试用例：

```
#include <windows.h>

void * test(HMODULE h, const char *name)
{
    return GetProcAddress(h, name);
}

int main() {} 
```

以及使用mingw编译时对应的错误输出：

```
g++.exe -Wall  -g  -pedantic -Wall   -IG:\OSS\blender-dev\lib\mingw32\opencolorio\include  -c G:\OSS\compile_test\main.cpp -o Debug\main.o
G:\OSS\compile_test\main.cpp: In function 'void* test(HMODULE, const char*)':
G:\OSS\compile_test\main.cpp:45:34: error: invalid conversion from 'FARPROC {aka int (__attribute__((__stdcall__)) *)()}' to 'void*' [-fpermissive] 
```

当然，解决此编译错误的一种简单方法是进行显式转换：

```
return (void *)GetProcAddress(h, name); 
```

但在此之前，我需要了解以下内容：

*   为什么这在 MSVC 下不是问题，但在 Mingw 下？
*   像这样进行演员表适合解决这个问题吗？有什么我需要担心的副作用吗？
*   有替代方案吗？移植这样的代码时有什么建议？

我目前正在使用 Mingw 4.7.2 构建它，但我也尝试过类似错误的早期版本，如 4.7.1 和 4.5.2。

对于那些好奇的人，这里是实际的源文件：发生这种情况的存储库中的行：[https ://github.com/OpenImageIO/oiio/blob/master/src/libutil/plugin.cpp#L96](https://github.com/OpenImageIO/oiio/blob/master/src/libutil/plugin.cpp#L96)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:43:53.740

> 为什么这在 MSVC 下不是问题，但在 MinGW 下？

Visual C++ 有一个“扩展”，它允许从指向函数的指针隐式转换为`void*`. 这种转换不是 C++ 语言的一部分。

> 像这样进行演员表适合解决这个问题吗？有什么我需要担心的副作用吗？

在 Windows 上，指向非成员函数的指针和指向对象的指针大小相同，在这里使用强制转换没有问题。实际上，所有使用的代码`GetProcAddress`都需要在某个时候强制转换返回的指针，以将其转换为正确的函数指针类型，以便在调用表达式中使用。

# php - 〜在php中做什么？

> ID：13958085
> 
> 赞同：6
> 
> 时间：2012-12-19T17:44:42.757
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

在[这个文件中](https://github.com/xPaw/PHP-Minecraft-Query/blob/master/MinecraftQuery.class.php)，我看到了这个“~”并且想知道 id 是做什么的。我试过谷歌搜索，但谷歌不搜索字符，比如你搜索 ? ：你必须搜索问号冒号。

# java - 从 Java 中的 MongoDB 文档中获取二进制属性

> ID：13958089
> 
> 赞同：2
> 
> 时间：2012-12-19T17:44:50.487
> 
> 标签：java, mongodb

好吧，我正在使用 ByteArrayOutputStream 创建转储对象。然后将它们作为我文档中的属性写入 MongoDB。当我读回它时，如何在不使用中间的 toString 的情况下将其转换为字节数组或二进制？

这是我现在这样做的方式，我认为它不安全：

```
BasicBSONObject temp = (BasicBSONObject) models.get("0");
model = null;
    if (temp != null) {
        // TODO fix this serialization!
        try {
            ObjectInputStream ois = new ObjectInputStream(
                    new ByteArrayInputStream(temp.toString().getBytes()));

        } catch (IOException e) {
            L.error("unable to read model from string!");
            L.error(e.getStackTrace().toString());
        }
    } 
```

# c# - Facebook Graph API - 不推荐使用 offline_access

> ID：13958091
> 
> 赞同：2
> 
> 时间：2012-12-19T17:44:52.877
> 
> 标签：c#, facebook-graph-api

我对 Facebook Graph API 有点困惑。

首先，我在开发者页面上创建了一个应用程序，然后我使用如下 URL 对我的应用程序进行了自动化：

```
www.facebook.com/dialog/oauth?client_id=MY_CLIENT_ID&redirect_uri=http://www.facebook.com/connect/login_success.html&type=user_agent 
```

好的......在此之后页面返回了一个这样的 URL：

```
www.facebook.com/connect/login_success.html#access_token=ACCESS_TOKEN&expires_in=5171411&code=CODE 
```

我意识到返回的 ACCESS_TOKEN 总是相同的。所以我曾经搜索用户，像这样：

```
graph.facebook.com/search?q=QUERY_SEARCH&type=user&access_token=ACCESS_TOKEN 
```

我相信上面所有的网址都是正确的。

我的疑问是：我不知道如何使用长寿令牌（实际上我什至不知道返回的令牌是否是长寿令牌）。当我使用这些 URL 时，总是为我返回相同的令牌，所以我总是使用相同的 ACCESS_TOKEN。

但正如我在 Facebook Graph 页面上所读到的，令牌不能永远处于活动状态......它们现在过期了。

我怎么知道我是否有一个长寿令牌？当令牌过期时，我如何“刷新”它？

我试图按照文档进行操作，但我完全迷失了……

```
developers.facebook.com/roadmap/offline-access-removal/ 
```

该页面说高级设置菜单上存在“不推荐使用的offline_access”......但事实并非如此！

所以......我不知道如何在令牌过期时管理令牌，也不知道如何知道我是否正在使用长期令牌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:51:58.920

我认为一般的想法是您的访问令牌将持续一个月左右，当它停止工作时，您需要请求一个新的。

我有一个这样的方法来获取一个新的：

```
public static class GraphApiRequestProcessor
{
    public static string GetNewAccessToken( CancellationToken cancellationToken )
    {
        const string tokenUrlPattern = @"https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&grant_type=client_credentials";
        string tokenUrl = string.Format( tokenUrlPattern, Settings.FacebookAppId, Settings.FacebookAppSecret );

        using( var client = new WebClient() )
        {
            // allows cancellation while executing request
            using( cancellationToken.Register( client.CancelAsync ) )
            {
                using( var data = client.OpenRead( tokenUrl ) )
                {
                    using( var reader = new StreamReader( data ) )
                    {
                        string response = reader.ReadToEnd();
                        int index = response.IndexOf( "=", StringComparison.InvariantCultureIgnoreCase );
                        string code = response.Substring( index + 1 );
                        return code;                
                    }                   
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T22:29:58.067

[您可以在Access Token Debugger](https://developers.facebook.com/tools/debug/access_token/)上检查您的访问令牌何时到期。

您可以使用此 api 在需要输入短期访问令牌的地方获取长期访问令牌。

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

这将返回新的长期访问令牌。（有效期为 2 个月。）

# c++ - 如何使用 Make 构建库并将其与源链接

> ID：13958092
> 
> 赞同：0
> 
> 时间：2012-12-19T17:44:59.150
> 
> 标签：c++, makefile

我还是很陌生。我正在尝试编译一个项目，其中 maketest.cpp 和 maketest.hpp 依赖于`Users/wen/Projects/maketest`Makefile 本身。`.cc`问题是，我还想`.hh`在`Users/wen/Projects/include/bigint`.

```
# Macros

INCLUDE = -I/Users/wen/Projects/include/bigint
LIBS =

CC = g++
override FLAGS += -O2

HEADERS= $(wildcard *.hpp) $(wildcard Users/wen/Projects/include/bigint/*.hh) 

# EXE Name
INSTALL = maketest

CC_FILES = %.cpp Users/wen/Projects/include/bigint/%.cc
OBJ_FILES = maketest.o $(wildcard Users/wen/Projects/include/bigint/*.o)

# Rules

$(INSTALL): $(OBJ_FILES)
    $(CC) $(FLAGS) $^ -o $@ $(LIBS)

%.o: $(CC_FILES) $(HEADERS)
    $(CC) $(FLAGS) $(INCLUDE) -c $< -o $@

# Installation types

install: $(INSTALL)

release:
    @echo "Re-run with parameter:"
    @echo "FLAGS=-D_RELEASE"

debug:
    @echo "Re-run with parameter:"
    @echo "FLAGS=-D_DEBUG"

# Cleaning up

clean:
    rm -f $(OBJ_FILES) $(INSTALL) 
```

该代码编译 maketest.cpp 并链接它，但不是 bigint。

构建和链接文件的正确方法是`Users/wen/Projects/include/bigint`什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:31:21.187

最后我想通了，谢谢Jay。问题是我忘记了前面的斜杠`Users/wen/Projects/include/bigint`，所以它不是从根目录搜索，而是从项目文件夹搜索。现在它起作用了！

> 尝试在 OBJ_FILES 中显式指定来自 bigint 的文件之一（可能是“bigint.o”？）。我不认为你的通配符得到你想要的。

# javascript - Javascript 中的 if 条件有什么问题？

> ID：13958094
> 
> 赞同：5
> 
> 时间：2012-12-19T17:45:14.823
> 
> 标签：javascript, if-statement

这个 IF 条件有什么问题？当我将 EEID 值设为 123456 时，它不应该出现这种情况。但我看到它即将到来。有人可以让我知道我做错了什么吗？

```
if ((EEID.value.length != 6) || (EEID.value.length != 11)) {
        alert(EEID.value.length); //This shows that the value length = 6
        alert("Your Member ID must be a 6 digit or 11 digit number.");
        EEID.focus();
        return false;
      } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T17:47:38.283

满足条件是因为 EEID.value.length 不是 11。 or (||) 允许 != 6 或 != 11 满足 if 条件。

您需要将 or (||) 更改为 and (&&)，如下所示：

```
if ((EEID.value.length != 6) && (EEID.value.length != 11)) {
    alert(EEID.value.length);
    alert("Your Member ID must be a 6 digit or 11 digit number.");
    EEID.focus();
    return false;
} 
```

这样，只有当 EEID.value.length 不是 6 而不是 11 时才满足 if 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:55:09.947

您最初拥有的 ,`(!P || !Q)`始终返回 true，因为`EEID.value.length`不能同时两者`6`兼而有之`11`。当一个为假时，另一个为真，反之亦然，因此它始终为真。

看看[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，或者更准确地说

```
(!P && !Q) == !(P || Q) 
```

这与您所拥有的类似，但如果`EEID.value.length`既不是`6` *or* `11` ，则表明条件为真。（**请注意**，我更喜欢右侧，因为它只否定一次。）所以，基本上，你可以写你的条件，如

```
if ((EEID.value.length != 6) && (EEID.value.length != 11)) { 
```

或者

```
if (!(EEID.value.length == 6 || EEID.value.length == 11)) { 
```

# matlab - 在matlab中绘制三角波而不是Sin波

> ID：13958095
> 
> 赞同：1
> 
> 时间：2012-12-19T17:45:22.773
> 
> 标签：matlab, plot, trigonometry

我正在设计复合正弦波，例如

`input=sin(2*pi*Fm_1*t) + sin(2*pi*Fm_2*t);`

其中 Fm_1 和 Fm_2 由用户给出，并且

```
t=0:Ts:2*Tm; 
```

在哪里

```
Ts=1/Fs;
Tm=1/(maxof(Fm_1,Fm_2) (NOT A FUNCTION, just to explain) 
```

和`Fm_1 = 5`和`Fm_2 = 10`和`Fs = 30` 使用`plot(t,input);`

现在由于某种原因，输出是正确的，但不是正弦波，而是三角波（直线）。除此之外，输出是正确的。

**编辑：**

我刚刚发现，因为我以相同的比例绘制了两个图表，所以第二个图表中的错误搞砸了第一个图表。

现在问题是使用以下过滤输入：

```
 output = filtfilt(B,A,input); 
```

为什么当我绘制它时这没有给我任何东西（我也尝试过使用`filter`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:25:10.630

正如上面评论中提到的，问题在于您使用的采样频率太低来绘制详细的图表。您可以使用以下函数看到这一点：

```
function myplot(Fm_1, Fm_2, Fs)
  Ts = 1/Fs;
  Tm = 1/max(Fm_1,Fm_2);
  t = 0:Ts:2*Tm;
  input = sin(2*pi*Fm_1*t) + sin(2*pi*Fm_2*t);
  plot(t, input);
end 
```

正如您所注意到的，`Fs = 30`您会得到这样的情节：

![在此处输入图像描述](../Images/3e7ce6d9b516aecf0c776323a389ba89.png)

增加到`Fs = 100`，情况改善：

![在此处输入图像描述](../Images/17caba0b9f0fb1bca49079558ba0c66a.png)

对于`Fs = 1000`情节，您可能首先会期望：

![在此处输入图像描述](../Images/62ae7b86d91352201a8ae0a509550dbf.png)

请注意，对于以上所有内容，我都使用了`Fm_1 = 5`您`Fm_2 = 10`提供的值。

# javascript - 带变量的 iframe 源

> ID：13958097
> 
> 赞同：3
> 
> 时间：2012-12-19T17:45:34.330
> 
> 标签：javascript, dom, iframe, encoding

我有一些问题：

1.  和HTMLIFrameElement`<iframe src="/index.php"></iframe>`一样吗？

2.  为什么

    ```
    <iframe src="data:text/html;base64,aHR0cDovL2V4YW1wbGUuY29t"
        height=1280 width=800></iframe> 
    ```

    工作正常，但是

    ```
    a=document.getElementsByTagName('body')[0];
    b=document.createElement('iframe');
    b.src="data:text/html;base64,aHR0cDovL2V4YW1wbGUuY29t";
    a.appendChild(b); 
    ```

    不工作？我的意思是在 DOM HTMLIFrameElement src 中，我可以使用编码字符串放置函数。是否可以仅在 src 变量中编码字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:47:53.290

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:05:02.173

数据 URI 方案用于直接嵌入数据。

```
data:text/html;base64,aHR0cDovL2V4YW1wbGUuY29t 
```

表示以 html 页面`"http://example.com"`为唯一内容的页面。

你可能想要`"http://example.com"`作为`src`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:35:09.953

对于您的第 2 点：您的两种方法给出了相同的结果。

现场演示：http: [//jsfiddle.net/Ft9gh/](http://jsfiddle.net/Ft9gh/)

```
a=document.getElementsByTagName('body')[0];
b=document.createElement('iframe');
b.src="data:text/html;base64,aHR0cDovL2V4YW1wbGUuY29t";
a.appendChild(b); ​ 
```

# eclipse - 比较 Java 项目的不同版本

> ID：13958099
> 
> 赞同：1
> 
> 时间：2012-12-19T17:45:42.240
> 
> 标签：eclipse, versioning

我不是经验丰富的 Java 开发人员，我目前正在修改和重新构建一个插件项目。我即将采用版本控制系统（例如 Subclipse），但是我已经有这样的项目的多个版本。我的目的是检查这些版本之间的不同之处，我想知道最好的方法是什么。我使用 Eclipse IDE。

确实感谢，

我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:19:38.400

Subclipse 只是将 Eclipse 与 Subversion 存储库连接起来。您必须在某个地方有一个 Subversion 存储库才能使 Subclipse 工作。

假设您有一个 Subversion 存储库，您首先提交最旧的版本。您将在您的计算机上创建一个 Eclipse 工作区，用于与 Subversion 通信。首先，将项目的最旧版本复制到 Eclipse 工作区中。然后提交工作区。通过将每个保存的版本依次复制到 Eclipse 工作区来更新工作区，然后提交。

这样，源代码管理将能够向您显示每个已保存版本之间的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:51:58.770

Ctrl 单击两个项目的根目录，右键单击，然后比较 -> 彼此

专业提示：使用比 svn 更好的源代码控制系统，例如 Bazaar、Git 或 Mercurial

# c++ - 传递（在构造函数中）一个指向包含它的类的指针是一个糟糕的设计，如果是这样，解决方案是什么

> ID：13958101
> 
> 赞同：5
> 
> 时间：2012-12-19T17:46:06.970
> 
> 标签：c++, object-design

我经常遇到像这样的代码

```
/*initializer list of some class*/:m_member(some_param,/* --> */ *this) 
```

这样做的原因是 m_member 可以从包含它的类中调用成员函数......也就是

```
//code in class that is m_member instance of

    m_parent->some_function(); 
```

我个人不喜欢它，因为我认为它是可悲的设计（“亲爱的孩子，你知道你对你的类封装做了什么”），但我想知道这种行为通常是不好的，如果是的话如何避免这种设计。

编辑：请不要在初始化列表中关注这个，假设它在 ctor 正文中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:07:54.927

这可能是灾难性的，因为您的父母不是在参考集的时间构建的。下面的例子将证明这一点：

```
#include <iostream>
using namespace std;

struct TheParent;

struct TheChild
{
    TheChild(TheParent& parent);
    TheParent& myParent;
};

struct TheParent
{
    TheParent()
      : mychild(*this)
      , value(1)
    {
        cout << "TheParent::TheParent() : " << value << endl;
    }

    TheChild mychild;
    int value;
};

TheChild::TheChild(TheParent& parent)
   : myParent(parent)
{
    cout << "TheChild::TheChild() : " << myParent.value << endl;
};

int main()
{
    TheParent parent;
    return 0;
} 
```

产生以下输出，清楚地指出父对象的不确定状态：

```
TheChild::TheChild() : 1606422622
TheParent::TheParent() : 1 
```

底线：不要这样做。您最好使用动态*子*分配，但即使这样也有警告：

```
#include <iostream>
using namespace std;

struct TheParent;

struct TheChild
{
    TheChild(TheParent& parent);
    TheParent& myParent;
};

struct TheParent
{
    TheParent()
      : mychild(NULL)
      , value(1)
    {
        mychild = new TheChild(*this);
        cout << "TheParent::TheParent() : " << value << endl;
    }

    ~TheParent()
    {
        delete mychild;
    }

    TheChild* mychild;
    int value;
};

TheChild::TheChild(TheParent& parent)
   : myParent(parent)
{
    cout << "TheChild::TheChild() : " << myParent.value << endl;
};

int main()
{
    TheParent parent;
    return 0;
} 
```

这给了你你可能希望的东西：

```
TheChild::TheChild() : 1
TheParent::TheParent() : 1 
```

`TheParent`但是请注意，如果它是继承链中的中间类，并且您希望访问尚未构建的派生类中可能被覆盖的函数的虚拟实现，那么即使这样也会有问题。

同样，底线是，如果您发现自己这样做，您可能想首先考虑为什么需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:58:08.697

这很糟糕，因为在构造 m_member 时还不清楚父类的完整性。

例如：

```
class Parent
{
   Parent()
   : m_member(this), m_other(foo)
   { }
};

class Member
{
    Member(Parent* parent)
    {
       std::cout << parent->m_other << std::endl; // What should this print?
    }
}; 
```

如果需要父指针，稍微好一点的方法是让 Member 在构造函数的主体中调用一个“setParent”方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:55:19.983

*像绝大多数编程实践一样，一般来说*不可能说它是坏的（如果你这样做了，你就是一个坏人，应该感到羞耻）。我有时会使用它，但并不常见；但是，我不会通过更改课程设计来刻意避免这种情况。

请注意我在上一段中如何大量使用“我”，这肯定表明这是一个高度主观的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:25:51.373

我将语言视为实现给定问题解决方案的工具。按照设计，C++ 允许显式使用，`this`而其他 OO 语言则不允许。因此，我将语言功能视为我工具箱中的工具，并且每隔一段时间就会使用一种或另一种工具。

但是，这就是编码风格和实践的用武之地，我应该知道我在做什么。我应该知道如何使用我的工具，我应该知道使用它们的含义。C++ 初始化一个新对象有一个定义的顺序，只要我*使用*它，我就很好。不幸的是，有时人们很幸运；其他时候，他们以这种方式制造错误。您需要了解您的工具以及如何使用它们:-)

用我个人的观点回答你的问题：我尽量避免这种特殊的结构，但有时我不得不使用它。即使考虑重新设计类也不会避免这种情况。所以我在下面提交了这个场合，“嗯，有时我的设计无法在干净整洁的直接 OO 中建模，类之间的依赖关系太紧，性能太重要了。”

# visual-c++ - 接口派生自 IXMLHttpRequest 时注册 COM 服务器时出错

> ID：13958102
> 
> 赞同：1
> 
> 时间：2012-12-19T17:46:07.653
> 
> 标签：visual-c++, com, xmlhttprequest, atl, idl

我们已经`IXMLHttpRequest`在 COM 服务器 (.exe) 中创建了自己的实现，如下所示：

```
interface IMyXMLHttpRequest : IXMLHttpRequest {
    ...
};

coclass MyXMLHttpRequest {
    [default] interface IMyXMLHttpRequest;
}; 
```

问题是，当构建尝试注册 COM 服务器时，我们收到错误“访问 OLE 注册表时出错”。我调试了注册码，它在`RegisterTypeLib`. 看起来它正试图提取一些与该接口相关的类型信息，`IXMLHttpRequest`并且（在这里猜测）无法更改与该接口相关的一些注册表项。

从中派生出来是完全错误的`IXMLHttpRequest`吗？我们是否应该派生`IDispatch`并让我们的类使用双接口？或者是否有可能从中派生`IXMLHttpRequest`而我们只是做错了？

**更新：**我上传了一个[可重现的测试用例](https://www.dropbox.com/s/ngt6yo35d66yb9z/COMServerTest.zip)。我只是使用 Visual Studio 向导生成了一个 ATL COM 服务器，然后我创建了一个派生自它的新接口`IXMLHttpRequest`和一个实现它的 coclass。如我所述，注册失败。如果我将接口更改为从中派生，`IDispatch`则它可以正常工作。使用 Visual Studio 2010 在 Windows 7 上 100% 可重现，以提升的权限运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:42:33.233

> 错误 MSB3073: :VCEnd" 退出，代码为 -2147319780。

仅作记录，错误是`0x8002801C` `TYPE_E_REGISTRYACCESS`“访问 OLE 注册表时出错”。

`IXMLHttpRequest`正如您已经确定的那样，问题在于从类型库之外定义的接口继承。首先通过继承扩展接口基本上不是一个好主意。是的，这是可能的，而且是有道理的，但是一旦您将其放入类型库并具有外部引用，您可能会开始遇到奇怪的问题。

一旦您引用了`IXMLHttpRequest`，MIDL 编译器也会尝试将其放入您的类型库中。您可以通过查看中间构建文件来见证这一点：

![IXMLHttpRequest 的意外副本](../Images/68a56c34b53edf6d3e86406b375b3dfb.png)

这不是你想要的，是吗？您只是想引用它，因为它已经由`msxml6.dll`system32 (syswow64) 目录中的文件中的另一个类型库定义和托管。

主要问题是为什么要从`IXMLHTTPRequest`. 为什么您认为“正常”的独立新 IDispatch 派生接口在这里不够好？您仍然可以`IXMLHTTPRequest`在这个 COM 类上实现。那时你不会首先陷入这个麻烦。

无论如何，构建问题是在 IDL 上，编译器`IXMLHTTPRequest`直接看到来自 Windows SDK 文件的定义。

您想按如下方式更改您的 IDL 文件：

```
import "oaidl.idl";
//import "ocidl.idl"; // <<--- Make direct IXMLHTTPRequest definition invisible

[
    uuid(7397D60F-A428-42C5-B698-9FA850638074),
    version(1.0),
]
library COMServerTestLib
{
    importlib("stdole2.tlb");
    importlib("msxml6.dll"); // <<--- Reference MSXML type library to import the right interface 
```

在您的 C++ 文件中，您希望使界面对 C++ 代码可见：

```
#include "stdafx.h"
#include "resource.h"
#include <msxml6.h> // <<--- Re-add IXMLHTTPRequest definition for C++ code
#include "COMServerTest_i.h" 
```

您的项目可以从这里再次构建。

# android - 看没有eclipse的android logcat

> ID：13958104
> 
> 赞同：6
> 
> 时间：2012-12-19T17:46:13.687
> 
> 标签：android, eclipse, logcat

我需要我的朋友在不安装 eclipse 的情况下查看我的应用程序日志。让他们看到我的应用程序日志的最简单/最快的方法是什么？他们只需要安装 android-sdk 并运行 monitor.bat 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T17:46:49.760

您可以在 Android SDK 中使用 DDMS.bat（或 Monitor.bat）

此外，您可以从 Play 商店安装日志应用程序，例如[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5qdGIuYWxvZ2NhdCJd)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:02:57.577

*   正如 Bryan 指出的那样，您可以使用 aLogCat。
*   如果您安装了 sdk，则可以`adb logcat`从终端运行。

# sed - grep -f forEXACT 模式

> ID：13958106
> 
> 赞同：1
> 
> 时间：2012-12-19T17:46:22.890
> 
> 标签：sed, awk, grep

我想从其他更大的文件（输入）中提取名称列表，具有该名称以及与该名称相关的一些附加信息。我的问题是 grep -f 选项，因为它与输入文件中的确切条目不匹配，但其他一些包含相似名称的条目。

我试过了：

```
$ grep -f list.txt -A 1 input >output 
```

以下是文件的格式；

列表.txt

```
TE_final_35005
TE_final_1040 
```

输入文件

```
>TE_final_10401
ACGTACGTACGTACGT
>TE_final_35005 
ACGTACGATCAGT
>TE_final_1040
ACGTACGTACGT 
```

所需输出：

```
>TE_final_35005 
ACGTACGATCAGT
>TE_final_1040
ACGTACGTACGT 
```

我得到的输出：

```
>TE_final_10401
ACGTACGTACGTACGT
>TE_final_35005 
ACGTACGATCAGT
>TE_final_1040
ACGTACGTACGT 
```

虽然`TE_final_10401`不在list.txt中

我如何`^`在列表中使用？

请帮助匹配确切的值或建议其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:51:00.820

添加整个单词 switch ( `-w`)：

```
grep -w -A1 -f list.txt infile 
```

输出：

```
>TE_final_35005 
ACGTACGATCAGT
>TE_final_1040
ACGTACGTACGT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:54:49.623

有几件事，首先从文件中删除空白行：

```
sed  -i '/^\s*$/d' file list 
```

然后`-w`用于仅匹配整个单词，`-A1`并将在匹配后打印下一行：

```
$ grep -w -A1 -f list file > new_file

$ cat new_file
>TE_final_35005
ACGTACGATCAGT
>TE_final_1040
ACGTACGTACGT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:15:32.227

正如其他人所提到的，添加`-w`标志是基于您的样本数据的最干净和最简单的方法。但是由于您明确询问了如何使用`^`in `list.txt`，所以这是另一种选择。

为每一行添加`^`和/或锚点：`$``list.txt`

```
$ cat list.txt
^>TE_final_35005[ ]*$
^>TE_final_1040[ ]*$ 
```

这将在行首搜索您的模式，前面有一个`>`字符，并忽略任何尾随空格。那么您之前的命令将起作用（假设您删除这些空行或将您的参数更改为`-A 2`）。

如果您想将这些锚点自动添加到列表文件中（并同时删除任何空行），请使用以下`awk`构造：

```
awk '{if($0 != ""){print "^>"$0"[ ]*$"}}' list.txt >newlist.txt 
```

或者，如果您更喜欢`sed`就地编辑：

```
sed -i '/^[ ]*$/d;s/\(.*\)/^>\1[ ]*$/g' list.txt 
```

# freebsd - freebsd 自定义端口树不能从类别级别构建端口

> ID：13958110
> 
> 赞同：0
> 
> 时间：2012-12-19T17:46:31.743
> 
> 标签：freebsd, ports

Freebsd 9.1 RC3

首先澄清一下：顶层位于 /usr/ports，类别级别位于 /usr/ports/devel

我正在研究定制的端口树。基本上，只需将原始的整个端口树修剪为我们需要的即可。而且，在大多数情况下，它是相同的，例如 GID、UID、Mk/、Tools/、模板，就 Makefile 而言，我只是将 SUBDIR 更改为我们需要的。

一般问题：对于每个单独的端口，例如在 /usr/ports/devel/protobuf 运行“make install clean”，一切正常。但是，问题是在类别级别运行“make install clean”，它会中断。

实际问题：在 usr/ports/devel 运行“make install clean -DBATCH”

```
 ....
  Usage: ./help2man.h2m.PL [--quiet] [--stdout|--output=FILE] [--locale=STRING]    [--message-     
 dir=DIR]
 gmake[1]: *** [help2man.el.h2m] Error 255
 gmake[1]: Leaving directory `/usr/ports/misc/help2man/work/help2man-1.40.12'
 Option include requires an argument
 `help2man' generates a man page out of `--help' and `--version' output.

 Usage: help2man [OPTION]... EXECUTABLE

 -n, --name=STRING       description for the NAME paragraph
 -s, --section=SECTION   section number for manual page (1, 6, 8)
 -m, --manual=TEXT       name of manual (User Commands, ...)
 -S, --source=TEXT       source of program (FSF, Debian, ...)
 -L, --locale=STRING     select locale (default "C")
 -i, --include=FILE      include material from `FILE'
 -I, --opt-include=FILE  include material from `FILE' if it exists
 -o, --output=FILE       send output to `FILE'
 -p, --info-page=TEXT    name of Texinfo manual
 -N, --no-info           suppress pointer to Texinfo manual
 -l, --libtool           exclude the `lt-' from the program name
     --help              print this help, then exit
     --version           print version number, then exit

  EXECUTABLE should accept `--help' and `--version' options and produce output on
  stdout although alternatives may be specified using:

   -h, --help-option=STRING     help option string
   -v, --version-option=STRING  version option string
   --version-string=STRING      version string
   --no-discard-stderr          include stderr when parsing option output

  Report bugs to <bug-help2man@gnu.org>.
  gmake: *** [help2man.el.1] Error 255
  *** [do-build] Error code 1

  Stop in /usr/ports/misc/help2man.
  *** [/usr/ports/misc/help2man/work/.build_done.help2man._usr_local] Error code 1

  Stop in /usr/ports/misc/help2man.
  *** [build-depends] Error code 1

  Stop in /usr/ports/devel/autoconf.
  *** [/usr/ports/devel/autoconf/work/.configure_done.autoconf._usr_local] Error code 1

  Stop in /usr/ports/devel/autoconf.
  *** [build-depends] Error code 1

  Stop in /usr/ports/devel/automake.
  *** [/usr/ports/devel/automake/work/.configure_done.automake._usr_local] Error code 1

  Stop in /usr/ports/devel/automake.
  *** [build-depends] Error code 1

  Stop in /usr/ports/devel/apr1.
  *** [/usr/ports/devel/apr1/work/.configure_done.apr._usr_local] Error code 1

  Stop in /usr/ports/devel/apr1.
  *** [_apr1.realinstall] Error code 1

  Stop in /usr/ports/devel. 
```

自定义端口树的结构

```
# ls
GIDs  Tools distfiles  net  xxxxxxxxxx  x11-fonts KNOBS  UIDs  doc   net-mgmt print  Makefile   bin   graphics   xxxxxxx security Makefile.inc converters   xxxx.sh  xxxxxxxxx  textproc Mk databases    lang        xxxxxxxxx   www Templates  devel    misc   xxxxxxxxxxxx    x11

 # ls devel
 autoconf-wrapper libevent   makedepend  py-asn1  py-setuptools automake  libltdl  p5-Locale-gettext py-asn1-modules swig13 Makefile  automake-wrapper libpthread-stubs pcre py-dateutil  zmq apr1  gettext libtool pkgconf py-protobuf autoconf    gmake  m4  protobuf py-pyzmq 
```

通过参考[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports-using.html)

```
Note: You can build all the ports in a category or as a whole by running make in the top level directory, just like the aforementioned make fetch method. This is dangerous, however, as some ports cannot co-exist. In other cases, some ports can install two different files with the same filename. 
```

希望有人能帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:21:44.240

我希望你现在已经解决了这个问题。如果没有，**freebsd-ports@freebsd.org**或**hackers@freebsd.org**将是回答这些问题的最佳地点。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T20:26:45.033

看起来当时 help2man 端口已过时/损坏。此外，在端口中添加或删除类别和目录时，您需要编辑 Mk/bsd.port.mk 以更新相关列表。

某些端口也可能依赖于已删除的端口。您可以尝试运行 make index 并查看它是否可以干净地构建索引。这是关于端口中至少默认选项稳定性的一个很好的线索。（条件依赖不会得到测试）运行 portlint 还可以帮助验证端口，它的依赖看起来不错。**

# sql - 针对特定值生成索引

> ID：13958111
> 
> 赞同：3
> 
> 时间：2012-12-19T17:46:34.467
> 
> 标签：sql, performance, oracle, indexing

是否可以为数据库中的特定列值生成索引？例如，我有一个名为`status`values的列，但最常调用`{0,1,2,3}`status ，因此我想专门索引该值。`2`这可能吗？我想语法将类似于您可以像这样按降序索引的方式：

```
create index foo on table(bar desc); 
```

我可能会看到这个工作：

```
 create index foo on table(status 2); 
```

`missing right parenthesis`这会在 SQLdeveloper 中针对 Oracle 数据库生成错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T17:50:35.403

基于函数的索引...

```
create index foo on table(case status when 2 then status end) 
```

...和一个谓词...

```
...
where case status when 2 then status end = 2 
```

……就是为了这个。

这利用了从 btree 索引中省略空值的优势。如果状态为 2，则 case 表达式返回“2”，否则返回 null，因此索引仅包含状态 =“2”的条目。如您所见，您确实需要一个不同的谓词。坦率地说，其他一些 RDBMS 在这方面做得更好。

# silverlight - WP7 Scrollviewer 中的图像旋转

> ID：13958113
> 
> 赞同：2
> 
> 时间：2012-12-19T17:46:39.427
> 
> 标签：silverlight, windows-phone-7, image-rotation

在 Windows Phone 7 应用程序中，我想在用户单击按钮时对图像应用 90º 旋转。我正在执行以下操作：

```
<Image Height="369" Name="imageView" Stretch="Uniform" Width="394">
   <Image.RenderTransform>
      <RotateTransform Angle="0" />
   </Image.RenderTransform>
</Image> 
```

在功能上：

```
((RotateTransform)imageView.RenderTransform).Angle += 90; 
```

到目前为止，一切都很好。当我将图像放在滚动查看器中时，就会出现问题。

```
<ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Visible"  ScrollViewer.VerticalScrollBarVisibility="Visible" Height="389" HorizontalAlignment="Left" Margin="12,78,0,0" Name="scrollViewer" VerticalAlignment="Top" Width="409">
   <Image Height="369" Name="imageView" Stretch="Uniform" Width="394">
      <Image.RenderTransform>
         <RotateTransform Angle="0" />
      </Image.RenderTransform>
   </Image>
</ScrollViewer> 
```

在这种情况下，我收到一个错误 - InvalidCastException 未处理 - 在这行代码中：

```
((RotateTransform)imageView.RenderTransform).Angle += 90; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:57:19.933

问题是 imageView.RenderTransform 不是 RotateTransform ，而是 CompositeTransform ，所以试试这个：

```
((CompositeTransform)imageView.RenderTransform).Rotation += 90; 
```

如果您也想直接在 XAML 中将其指定为复合转换，您可以这样做：

```
<ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Visible"  ScrollViewer.VerticalScrollBarVisibility="Visible" Height="389" HorizontalAlignment="Left" Margin="12,78,0,0" Name="scrollViewer" VerticalAlignment="Top" Width="409">
    <StackPanel>
         <Image Height="369" Name="imageView" Stretch="Uniform" Width="394" Source="/PhoneApp2;component/Images/lumia-920-rainbow.png">
            <Image.RenderTransform>
                <CompositeTransform Rotation="0" CenterX="197" CenterY="184" />
            </Image.RenderTransform>
        </Image>
    <StackPanel>
</ScrollViewer> 
```

# jquery - 多个 jQuery Cycle 寻呼机导航

> ID：13958116
> 
> 赞同：3
> 
> 时间：2012-12-19T17:46:47.110
> 
> 标签：jquery, jquery-plugins, jquery-selectors, jquery-cycle

我正在实施 jQuery 循环插件以创建 20 个图像画廊，每个画廊都有自己的上一个、下一个和寻呼机导航控件，而不必为每个幻灯片创建和引用 3 个新的 id 名称，并且避免必须为每个幻灯片。在下面的示例中，我尝试为每个幻灯片提供一个独特的寻呼机，但没有取得有限的成功。我希望有一种更直观的方式来使用**.each()**函数来编写它。提前感谢任何可以提供帮助的人。

HTML：（我在这个例子中只包含了两个幻灯片）

```
<div class="slideshow_container">
    <div class="work_slideshow">
        <div class="slideshow" id="s1">
            <img class="slide" src="images/port/design_unique_1.jpg" />
            <img class="slide" src="images/port/design_unique_2.jpg" />
            <img class="slide" src="images/port/design_unique_3.jpg" />
        </div>
        <div class="controls">
            <img src="images/arrow_left.png" class="prev"/>
            <img src="images/arrow_right.png" class="next"/>
        </div>
        <div class="pager" id="pager1"></div>
    </div>

    <div class="work_slideshow">
        <div class="slideshow" id="s2">
            <img class="slide" src="images/port/design_equality_1.jpg" />
            <img class="slide" src="images/port/design_equality_2.jpg" />
        </div>
        <div class="controls">
            <img src="images/arrow_left.png" class="prev"/>
            <img src="images/arrow_right.png" class="next"/>
        </div>
        <div class="pager" id="pager2"></div>
    </div>
</div> 
```

jQuery：

```
$('.slideshow').cycle({   
    fx: 'fade',
    easing: 'easeOutExpo',
    speed:2000,
    prev:'.prev',
    next:'.next',
    timeout:0,
    pagerAnchorBuilder: function(idx, el) {
        return '<a href="#" title="Slides"></a>';
    },
});
$('#s1').cycle({
pager:'#pager1'
});
$('#s2').cycle({
pager:'#pager2'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:54:07.927

编辑：没有正确阅读问题。干得好

```
$('.slideshow').each(function () {
var pager = $(this).closest('.work_slideshow').find('.pager');
$(this).cycle({
    fx: 'fade',
    easing: 'easeOutExpo',
    speed:2000,
    timeout:0,
    pager: pager,
    pagerAnchorBuilder: function(idx, el) {
        return '<a href="#" title="Slides"></a>';
    },
});
}); 
```

像这样的东西？

对于上一个和下一个，我认为像这样手动绑定上一个和下一个按钮会更有效。

```
$('.slideshow_container').on('click','.controls .prev',function (e) {
    e.preventDefault();
    $(this).closest('.work_slideshow').find('.slideshow').cycle('prev');
});

$('.slideshow_container').on('click','.controls .next',function (e) {
    e.preventDefault();
    $(this).closest('.work_slideshow').find('.slideshow').cycle('next');
}); 
```

基本上所有下一个/上一个按钮都有一个单击处理程序，并使用 .cycle('prev') 和 .cycle('next') 手动访问循环插件

如果需要，您甚至可以将其缩小为只需单击一次的处理程序

```
$('.slideshow_container').on('click','.controls a',function (e) {
  e.preventDefault();
  if ($(this).hasClass('next') {
    $(this).closest('.slideshow').cycle('next');
  } else {
    $(this).closest('.slideshow').cycle('prev');
  }
}); 
```

# java - 正则表达式将字符串拆分为 3 部分

> ID：13958119
> 
> 赞同：3
> 
> 时间：2012-12-19T17:46:51.900
> 
> 标签：java, regex, matcher

我有一个这样的信息动态输入示例：

> Xbox 360（黑色）精英控制台 120GB（伊利诺伊州梅森市）200 美元
> 
> 200 美元 2013 年 North Trail Camper（RT 202。曼彻斯特，缅因州）224 美元/月。
> 
> 雪地摩托自行车拖车（Winthrop / Augusta）每月 40 美元
> 
> “伟大的圣诞礼物”Xbox 360 吉他英雄 (Springfied)

我正在尝试在 Android 中使用 Regex 将字符串拆分为三个部分：

1.  XXX() 之前的文本
2.  (XXX) 中的文字
3.  () XXX 之后的文字

有时不会有价格，（）中位置后的文本。

我试过

```
Pattern p = Pattern.compile("\(([^]*)\)");
Matcher m = p.matcher(title); 
```

但我无法让匹配器在 Android 中工作。当我查看时它总是返回空`matcher.group(1)`。我目前已将其设置为查找 ( 或 $ 并爆炸也给我单独的字符串。但这不准确且效率低下。

任何帮助都会得到帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:05:49.863

我怀疑你可以用正则表达式来做到这一点，但不这样做可能更简单。

```
 String input[] = {
            "Xbox 360 (black) Elite Console 120GB (Mason City Illinois ) $200",
            "$200 2013 North Trail Camper (RT 202\. Manchester, Maine) $224/mo.",
            "Snowmobile Bike trailers (Winthrop / Augusta) $40 Monthly",
            "\"Great Xmas Gift\" XBox 360 Guitar Hero (Springfied)"
    };
    for (String s : input) {
        int lastClose = s.lastIndexOf(')');
        int lastOpen = s.lastIndexOf('(', lastClose);
        System.out.println(s.substring(0, lastOpen).trim() +
                "~" + s.substring(lastOpen + 1, lastClose).trim() +
                "~" + s.substring(lastClose + 1).trim());
    } 
```

印刷

```
Xbox 360 (black) Elite Console 120GB~Mason City Illinois~$200
$200 2013 North Trail Camper~RT 202\. Manchester, Maine~$224/mo.
Snowmobile Bike trailers~Winthrop / Augusta~$40 Monthly
"Great Xmas Gift" XBox 360 Guitar Hero~Springfied~ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:00:18.807

**[编辑]**我不会使用正则表达式来解决这个问题；相反，我会简单地使用该[`String#lastIndexOf(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf%28int%29)方法来查找最后一个字符的边界`(`并`)`从这些值返回子字符串：

```
public static String[] splitParens(String s) { 
  if (s == null) return null;
  int indexOfLastOpenParen = s.lastIndexOf('(');
  int indexOfLastCloseParen = s.lastIndexOf(')');
  return new String[] { 
    s.substring(0, indexOfLastOpenParen),
    s.substring(indexOfLastOpenParen + 1, indexOfLastCloseParen),
    s.substring(indexOfLastCloseParen + 1)
  };
} 
public static void main(String args[]) throws Exception { 
  String input[] = { 
    "Xbox 360 (black) Elite Console 120GB (Mason City Illinois ) $200",
    "$200 2013 North Trail Camper (RT 202\. Manchester, Maine) $224/mo.",
    "Snowmobile Bike trailers (Winthrop / Augusta) $40 Monthly",
    "\"Great Xmas Gift\" XBox 360 Guitar Hero (Springfied)"
  };
  Pattern p = Pattern.compile("\\(([^\\)]+)\\)");
  for (String s : input) { 
    System.out.println(Arrays.asList(splitParens(s)));
  }
  // =>
  // [Xbox 360 (black) Elite Console 120GB , Mason City Illinois ,  $200]
  // [$200 2013 North Trail Camper , RT 202\. Manchester, Maine,  $224/mo.]
  // [Snowmobile Bike trailers , Winthrop / Augusta,  $40 Monthly]
  // ["Great Xmas Gift" XBox 360 Guitar Hero , Springfied, ]
} 
```

当然，需要更多的错误检查（例如，如果没有`(`或`)`？）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:52:12.727

如果您确定总会有 3 个组，则此表达式将起作用：

(.*)\((.*)\)(.*)

您可以在这里自己尝试：

[http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRiU8y0M/index.html](http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRiU8y0M/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:55:03.720

不确定是否需要使用正则表达式，但如果不需要，为什么不使用[String.split](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)。然后您可以使用`"\\(|\\)"`在括号中拆分字符串，然后从创建的字符串数组中获取各个部分。

# indexing - 如何将函数应用于日期索引的 DataFrame

> ID：13958129
> 
> 赞同：3
> 
> 时间：2012-12-19T17:47:40.190
> 
> 标签：indexing, group-by, pandas

我在使用带有日期索引的 DataFrame 时遇到了很多问题。

```
from pandas import DataFrame, date_range
# Create a dataframe with dates as your index
data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
idx = date_range('1/1/2012', periods=10, freq='MS')
df = DataFrame(data, index=idx, columns=['Revenue'])
df['State'] = ['NY', 'NY', 'NY', 'NY', 'FL', 'FL', 'GA', 'GA', 'FL', 'FL'] 

In [6]: df
Out[6]: 
       Revenue   State
2012-01-01   1      NY
2012-02-01   2      NY
2012-03-01   3      NY
2012-04-01   4      NY
2012-05-01   5      FL
2012-06-01   6      FL
2012-07-01   7      GA
2012-08-01   8      GA
2012-09-01   9      FL
2012-10-01   10     FL 
```

我正在尝试添加一个以`'Mean'`组平均值命名的附加列：

### 我试过这个，但它不起作用：

```
df2 = df
df2['Mean'] = df.groupby(['State'])['Revenue'].apply(lambda x: mean(x))

In [9]: df2.head(10)
Out[9]:
       Revenue    State    Mean
2012-01-01   1       NY     NaN
2012-02-01   2       NY     NaN
2012-03-01   3       NY     NaN
2012-04-01   4       NY     NaN
2012-05-01   5       FL     NaN
2012-06-01   6       FL     NaN
2012-07-01   7       GA     NaN
2012-08-01   8       GA     NaN
2012-09-01   9       FL     NaN
2012-10-01   10      FL     NaN 
```

### 但我试图得到：

```
 Revenue    State    Mean
2012-01-01   1       NY     2.5
2012-02-01   2       NY     2.5
2012-03-01   3       NY     2.5
2012-04-01   4       NY     2.5
2012-05-01   5       FL     7.5
2012-06-01   6       FL     7.5
2012-07-01   7       GA     7.5
2012-08-01   8       GA     7.5
2012-09-01   9       FL     7.5
2012-10-01   10      FL     7.5 
```

我怎样才能得到这个数据框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T21:02:24.110

你几乎拥有它！首先创建 groupby 对象：

```
means = df.groupby('State').mean()

In [5]: means
Out[5]: 
       Revenue
State         
FL         7.5
GA         7.5
NY         2.5 
```

然后`apply`这对 DataFrame 中的每个状态：

```
df['mean'] = df['State'].apply(lambda x: means.ix[x]['Revenue'])

In [7]: df
Out[7]: 
            Revenue State  mean
2012-01-01        1    NY   2.5
2012-02-01        2    NY   2.5
2012-03-01        3    NY   2.5
2012-04-01        4    NY   2.5
2012-05-01        5    FL   7.5
2012-06-01        6    FL   7.5
2012-07-01        7    GA   7.5
2012-08-01        8    GA   7.5
2012-09-01        9    FL   7.5
2012-10-01       10    FL   7.5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T01:57:31.823

使用`join`or`merge`也可以：

```
In [68]: revs = df.groupby('State').Revenue.mean()

In [69]: revs.name = 'Mean Revenue'

In [70]: df.join(revs, on='State')
Out[70]: 
            Revenue State  Mean Revenue
2012-01-01        1    NY           2.5
2012-02-01        2    NY           2.5
2012-03-01        3    NY           2.5
2012-04-01        4    NY           2.5
2012-05-01        5    FL           7.5
2012-06-01        6    FL           7.5
2012-07-01        7    GA           7.5
2012-08-01        8    GA           7.5
2012-09-01        9    FL           7.5
2012-10-01       10    FL           7.5 
```

# javascript - 悬停后保留背景图像？

> ID：13958131
> 
> 赞同：1
> 
> 时间：2012-12-19T17:47:48.607
> 
> 标签：javascript, jquery, css

我正在尝试制作一个星级类型系统，并且只在此刻处理 css 部分。我已经这样做了，使用 css 中的背景图像通过背景图像将星星替换为点亮的星星，如下所示：

```
.hover-stars:hover{
    background-image: url(http://www.softwares.com/img/icons/favorites.png);
    background-repeat: no-repeat;       
} 
```

我想尝试并知道的是实现悬停后效果，因此一旦用户将图像悬停在其上，图像就会保留在那里。如果可能，如果用户再次将鼠标悬停在它上面，请撤消该操作。创造星星跟随用户鼠标轨迹的错觉。

我已经尝试过了，但它不起作用。

```
.hover-stars:hover:after{
    background-image: url(http://www.softwares.com/img/icons/favorites.png);
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:06:51.723

选择`:after`器在元素之后插入内容。所以这不是正确的使用方法。我不相信你正在寻找的东西可以用 CSS 来完成。您可以通过在[hover](http://api.jquery.com/hover/)上向元素[添加](http://api.jquery.com/addClass/)或[删除](http://api.jquery.com/removeClass/)类来查看 jQuery 来为您解决问题。例如...

```
$(".hover-stars").hover(
function () { $(this).addClass(".hover-star-after")
});​ 
```

然后添加您要添加​​的额外 CSS 类...

```
.hover-stars-after {
background-image: url('http://www.softwares.com/img/icons/favorites.png');
background-repeat: no-repeat;
} 
```

# ruby - 如何在没有任何扩展的情况下运行 chromedriver？

> ID：13958133
> 
> 赞同：0
> 
> 时间：2012-12-19T17:47:50.307
> 
> 标签：ruby, selenium, cucumber, capybara

如何通过 Capybara env.rb 将 chromedriver 设置为在没有任何扩展的情况下运行？

这是我的 env.rb

```
require 'capybara'
require 'capybara/cucumber'
require 'rspec'
require 'selenium/webdriver'
#require 'capybara/rails'

caps = Selenium::WebDriver::Remote::Capabilities.chrome #chrome|firefox
caps.version = "8"
caps.platform = :WINDOWS

Capybara.server_port = 3001
Capybara.app_host = "http://www.google.com"
Capybara.default_driver = :selenium
Capybara.ignore_hidden_elements = false
Capybara.register_driver :selenium do |app|
    Capybara::Selenium::Driver.new(app,
    :browser => :chrome #chrome|firefox
    #,
    #:url => "localhost:4444/wd/hub",
    #:desired_capabilities => caps
    )
end 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:30:11.127

所以我认为答案是安德烈·博塔洛夫所说的。

就我而言，问题是我安装了一个名为 Conduit 的病毒软件。虽然冒充合法软件，但如果没有某种防病毒软件，几乎不可能将其删除。

发生的情况是在启动 chromedriver 运行测试的每个实例中，管道会将 NewTabAPI.js 加载到新的 chromdriver 上。这反过来又启动了一个糟糕的工具栏。在我的情况下 InternetHelper1.5。

在杀死 NewTabAPI.js 时，\Users[user]\AppData\Local\Temp\scoped_directory_... 中有多个副本。

删除这些会杀死病毒，但我发现周围有许多管道目录，我觉得删除它们也是谨慎的。

无论如何，这就是我需要做的事情。在大多数情况下，安德烈的评论应该可以很好地回答我的问题。

# php - PHP中的数组减慢程序

> ID：13958138
> 
> 赞同：0
> 
> 时间：2012-12-19T17:48:01.143
> 
> 标签：php, codeigniter

我在 CodeIgniter 中遇到问题，我正在运行此代码。

有了它，我的 PHP 代码没有完成。该视图绝对拒绝加载。它只是显示加载。

`$gen1`是服务器端的一个数组，我将它传递给

```
$data['gen1']=$gen1;
$this->load->view('name',$gen1); 
```

在客户端

```
 <?php for($i=1;$i<=count($gen1);$i):?>
           <a href="#" class="linktoquestion"><?php echo $i;?></a>
 <?php endfor;?> 
```

`$gen1`是一个只有 3 个对象的数组。

每个对象大约有 5 或 6 个字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T17:49:47.053

仔细观察你的`for`循环。`$i`永远不会改变，所以这将是一个无限循环。

你可能想要

```
 <?php for($i=1;$i<=count($gen1);$i++):?> 
```

# c# - Capture key press in whole application

> ID：13958142
> 
> 赞同：8
> 
> 时间：2012-12-19T17:48:17.303
> 
> 标签：c#, wpf, keypress

Is it possible, to capture (somewhere in app.xaml.cs i guess) any key and if it pressed open window?

Thanks for help!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-27T11:43:00.147

有个更好的方法。在 MS 论坛上找到了[这个。](https://social.msdn.microsoft.com/Forums/vstudio/en-US/cf884a91-c135-447d-b16b-214d2d9e9972/capture-all-keyboard-input-regardless-of-what-control-has-focus?forum=wpf "关联")奇迹般有效。

将此代码放在应用程序启动中：

```
EventManager.RegisterClassHandler(typeof(Window),
     Keyboard.KeyUpEvent,new KeyEventHandler(keyUp), true);

private void keyUp(object sender, KeyEventArgs e)
{
      //Your code...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T18:28:22.137

你可以使用类似[这个 gist](https://gist.github.com/4339044)的东西来注册一个全局钩子。只要在您的应用程序运行时按下给定的键，它就会触发。你可以`App`像这样在你的课堂上使用它：

```
public partial class App
{
    private HotKey _hotKey;

    protected override void OnActivated(EventArgs e)
    {
        base.OnActivated(e);
        RegisterHotKeys();
    }

    protected override void OnExit(ExitEventArgs e)
    {
        base.OnExit(e);
        UnregisterHotKeys();
    }

    private void RegisterHotKeys()
    {
        if (_hotKey != null) return;

        _hotKey = new HotKey(ModifierKeys.Control | ModifierKeys.Shift, Key.V, Current.MainWindow);
        _hotKey.HotKeyPressed += OnHotKeyPressed;
    }

    private void UnregisterHotKeys()
    {
        if (_hotKey == null) return;

        _hotKey.HotKeyPressed -= OnHotKeyPressed;
        _hotKey.Dispose();
    }

    private void OnHotKeyPressed(HotKey hotKey)
    {
        // Do whatever you want to do here
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T18:20:32.780

是和不是。

焦点在处理给定键的顺序中起作用。捕获初始按键的控件可以选择不传递键，这将禁止您在最顶层捕获它。此外，.NET 框架中有一些控件可以在某些情况下吞下某些键，但是我无法回忆起特定的实例。

如果您的应用程序很小并且深度只不过是一个带有按钮的窗口，那么这当然是可以实现的，并且将遵循在 WPF 应用程序中捕获击键的标准方法。

```
protected override void OnKeyDown(KeyEventArgs e)
{
    if (e.Key == Key.LeftCtrl || e.Key == Key.RightCtrl)
          myVariable = true;
    if (ctrl && e.Key == Key.S)
          base.OnKeyDown(e);
}

protected override void OnKeyUp(KeyEventArgs e)
{
    if (e.Key == Key.LeftCtrl || e.Key == Key.RightCtrl)
          myVariable = false;

    base.OnKeyUp(e);
} 
```

如果您的应用程序很大，您可以尝试此处详述的[全局挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)，但要了解上述警告仍然存在。

# java - Tomcat WebSocketServlet 和 Google Guice

> ID：13958143
> 
> 赞同：27
> 
> 时间：2012-12-19T17:48:29.657
> 
> 标签：java, servlets, websocket, tomcat7, guice

我有一个需要使用 Tomcat 7 Web 套接字的 Web 应用程序。

在这个 webapp 中，所有标准 Servlet（那些扩展的`javax.servlet.http.HttpServlet`）都可以很好地（并且正确地）与**Google Guice**一起工作。为了让我的 Servlet 与 Guice 处理程序一起工作，我只需：

1.  装饰 servlet`@Singleton`
2.  `Provider`例如声明私有`MyHandler`并生成一个标记为注入的设置器
3.  装饰 Servlet 的构造函数`@Inject`

演示以上几点的示例：

```
@Singleton
public class MyServlet extends HttpServlet {

    private Provider<MyHandler> myHandler;

    @Inject
    MyServlet() {
    }

    @Override
    protected void service(..) throws ServletException { ... }

    @Inject
    public void setMyHandler(Provider<MyHandler> myHandler) {
        this.myHandler = myHandler;
    }

    ...
} 
```

**如何调用上面`myHandler`从 a调用的同一个 Guice 处理程序[`WebSocketServlet`](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/websocket/WebSocketServlet.html)？**

我不能采用与标准 servlet 用例相同的样式，因为每个 WebSocket 通信都会导致实例扩展，而不是像标准 servlet 那样具有 Singleton servlet [`MessageInbound`](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/websocket/MessageInbound.html)；然后从MessageInbound 实例中`MyHandler`的方法（例如`onOpen`或）调用将调用的适当方法；**不是**来自上述实例中的方法。`onClose`**`HttpServlet``MyServlet`**

 ***我尝试了什么？*我确实尝试了一些（概念上错误的）解决方案，例如从`MessageInbound`实例中调用 websocket-servlet 的处理程序；这当然会导致降低 Guice 堆栈跟踪的范围问题。这样做的概念上*正确*的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:14:14.867

查看 GitHub 示例后更新：

你如何使用 Guice 就很好。由于 MessageInbound 只有一种特殊用法，因此不需要像 AbstractGuiceWebSocketServlet 这样的糖。提供者 chatLogHdlr 再做手动构建就可以了。但是你失去了 AOP 支持。如果需要，您可能需要进行辅助注射。但现在这很好。

附带说明一下，使用构造注入而不是 setter 注入。

我立即看到了问题所在。**这不是 Guice，而是你如何使用 Guice-Persist。**我没有经常使用 GP，仍然使用古老的 Warp-persist。但我发现在代码中使用 Guice-persist 存在两个问题：

1.  你需要注入 PersistService 来启动 Guice-Persist。它在[WIKI](http://code.google.com/p/google-guice/wiki/JPA)中有解释，例如

    ```
    public class PocWebApp extends GuiceServletContextListener {

    @Inject
    PersistService ps;

    @Override
    protected Injector getInjector() {
        Injector injector = Guice.createInjector(new ServletModule() {

            @Override
            protected void configureServlets() {
                install(new JpaPersistModule("DesktopPU"));
                serve("/socket/main/").with(MainSocket.class);
            }

        });
        injector.injectMembers(this);
        return injector;
    }

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        super.contextInitialized(servletContextEvent);
        ps.start();
    }
    } 
    ```

2.  PersistFilter 是无用的，因为只有第一次 WebSocket 会通过过滤器，但所有后续通信都不会通过过滤器。在@Transactional (Session-per-transaction) 附近使用 txn 是要走的路。

题外话：

您打算支持多少用户？如果这将是一个核心聊天服务器，我会改用 Netty，但它会涉及更多。谷歌搜索发现了这个：

[http://comoyo.github.com/blog/2012/07/30/integrating-websockets-in-netty/](http://comoyo.github.com/blog/2012/07/30/integrating-websockets-in-netty/)

原答案：

所以这是一个关于风格的问题？

**WebSockets != Servlet。**如果他们需要稍微不同的风格，这没有什么错。我什至更愿意被提醒我不是在处理 vanilla servlet。

一些观察：

[WebSocketServlet](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/websocket/WebSocketServlet.html)没什么特别的。您可以轻松地将它与 Guice-Servlet 一起使用。例如：

```
 @Singleton
 public class FooGuiceWebSocketServlet extends WebSocketServlet {...} 
```

然后将其称为

```
 serve("/foo").with(FooGuiceWebSocketServlet.class); 
```

现在，正如您所解释的，所有特殊的[MessageInbound](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/websocket/MessageInbound.html)都由 Tomcat 处理。MessageInbound 是 WebSocket 范围的。现在 Guice 对这个范围一无所知，这样保留它可能是有意义的。

对于初学者，我会确保 MessageInbound 是由 Guice 创建的。沿着这条线的东西：

```
@Singleton
public class ExampleWebSocketServlet extends AbstractGuiceWebSocketServlet {

    @Override
    public Class<? extends StreamInbound> serveWith() {
        return Foo.class;
    }

    public static class Foo extends MessageInbound {

    @Inject GuiceCreatedAndInjected bar;

    @Override
    protected void onBinaryMessage(ByteBuffer byteBuffer) throws IOException {
        // do nothing
    }

    @Override
    protected void onTextMessage(CharBuffer charBuffer) throws IOException {
        // this getSwOutbonds() is not very friendly to testing
        getWsOutbound().writeTextMessage(bar.echo(charBuffer));
    }

   }
} 
```

在哪里

```
public abstract class AbstractGuiceWebSocketServlet extends WebSocketServlet {

    @Inject Injector injector;

    @Override
    protected StreamInbound createWebSocketInbound(String subProtocol, HttpServletRequest request) {
        return injector.getInstance(serveWith());
    }

    public abstract Class<? extends StreamInbound> serveWith();

} 
```

您可以根据需要从这里转到更高的抽象和/或范围。我不是特别喜欢[#getWsOutbound()](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/websocket/MessageInbound.html)，因为它会阻碍测试。

继续改进风格，直到您满意为止。说如果您需要更多帮助（将修改答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:40:32.917

我不太明白你想要完成什么。我会在 Guice 中寻找 AOP 支持。似乎您需要在 MessageInbound 子类实例的某些方法中使用之前设置（注入） MyHandler 。一个方面可以做到这一点。

但是，您需要问一个问题：（实例化）控件在哪里？如果有某种方法可以在您的 Tomcat 应用程序配置中添加某种委托，Guice 可以“增强” MessageInbound 实例，进而在使用前设置正确的 MyHandler。**

# javascript - JavaScript checking radio buttons

> ID：13958147
> 
> 赞同：2
> 
> 时间：2012-12-19T17:48:54.900
> 
> 标签：javascript, if-statement, radio-button

Ok, this is really a simple question but I am really incompetent at JavaScript.

Basically all I have a form with 2 radio buttons on them.

I need a JavaScript statement which basically says

```
If radiobutton1 is selected then
document.write ("radiobutton1selected")
else if radiobutton2 is selected then
document.write ("radiobutton2selected") 
```

There are similar questions on here i accept but they are all alot more advanced than what i need.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T17:53:12.013

单选按钮html：

```
<input type="radio" name="radionbutton" value="1" id="button1"/>
<input type="radio" name="radionbutton" value="2" id="button"/> 
```

Javascript：

```
var button1 = document.getElementById("button1");
var button2 = document.getElementById("button2");

if (button1.checked){
    alert("radio1 selected");
}else if (button2.checked) {
    alert("radio2 selected");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:53:09.357

[http://jsfiddle.net/Squeegy/KCT8h/](http://jsfiddle.net/Squeegy/KCT8h/)

**html**

```
<input type="radio" name="zing" id="foo" checked/>
<input type="radio" name="zing" id="bar"/>​ 
```

**js**

```
if (document.getElementById('foo').checked) {
    alert('foo');
} else {
    alert('bar');
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T14:25:49.340

这很简单：

```
var button1 = document.getElementById('button1');
var button2 = document.getElementById('button2');
alert(button1.checked?"Button1 is checked":"Button2 is checked"); 
```

# sql - Oracle 数据库迁移 - 触发器相关

> ID：13958149
> 
> 赞同：0
> 
> 时间：2012-12-19T17:49:07.850
> 
> 标签：sql, oracle, plsql, data-migration

我们一直在将数据转储从一个数据库实例迁移到另一个（都是 oracle 11gR2）。我们发现目标数据库实例表中的触发器无效或未迁移，我们不得不重新创建它们。
谁能解释这是否是一个有效的场景？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:01:04.853

无效与“未迁移”非常不同。

如果无效的触发器具有有效的语法，那么它将在下一个触发事件时自动重新编译：http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm)

如果触发器不存在，那么您必须调查您的卸载和加载方法。你在使用数据泵吗？

# javascript - 如何更改拉斐尔图标的大小？

> ID：13958150
> 
> 赞同：6
> 
> 时间：2012-12-19T17:49:07.600
> 
> 标签：javascript, jquery, css, raphael

如何从免费的 Raphael 图标更改图标的宽度和高度？

我试过用`attr`，试过用`%`，像这样`var paper = Raphael("canvas", 100%, 100%);`。

我需要这样做：如果我改变父块的大小，我的图标大小也会改变。

更新：我尝试使用“缩放”和“变换”，但图标从中心调整大小并且不适合父级

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:10:05.407

根据 Raphael.js 文档

```
var el = paper.rect(10, 20, 300, 200);
// translate 100, 100, rotate 45°, translate -100, 0
el.transform("t100,100r45t-100,0");
// if you want you can append or prepend transformations
el.transform("...t50,50");
el.transform("s2...");
// or even wrap
el.transform("t50,50...t-50-50");
// to reset transformation call method with empty string
el.transform("");
// to get current value call it without parameters
console.log(el.transform()); 
```

* * *

[检查这个小提琴](http://jsfiddle.net/wpEMH/)：所有转换的演示

```
var icon = paper.rect(100,200,100,100);

var anim = Raphael.animation({
    "10%":{transform:'t100,0'}, //transform on x-axis
    "20%":{transform:'...t0,100'},//transform on y-axis
    "30%":{transform:'...t-100,0'},//transform on x-axis(negative)
    "40%":{transform:'...t0,-100'},//transform on y-axis(negative)
    "50%":{transform:'...t200,200'},//transform diagonally
    "60%":{transform:'...t-100,-100'},//transform diagonally(negative)
    "70%":{transform:'...s1,1.5'},//scale y-axis
    "80%":{transform:'...s1.5,1'},//scale x-axis
    "90%":{transform:'...s2'},//scale in both direction
    "100%":{transform:'...r45'},//rotate
},5000);

icon.animate(anim.delay(1000)); 
```

* * *

所以在你的情况下，你必须这样做：

> var somename = paper.path("路径坐标").transform('s2,3');

其中 2 代表宽度，3 代表高度。

# apache - 阻止来自我不拥有的域的 CNAME 重定向

> ID：13958152
> 
> 赞同：3
> 
> 时间：2012-12-19T17:49:13.670
> 
> 标签：apache, redirect, dns, seo, cname

有人注册了一个域并使用 CNAME 重定向将流量引导到我的网站。谷歌认为这是重复的内容，它影响了我的排名。

无论如何阻止访问通过 domainnotundermycontrol.com 重定向进入我的网站的流量？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:59:15.103

“没有不好的宣传。”

CNAME 只是一个 DNS 工具。一旦从 DNS 查找中获得您的 IP，对您的服务器的请求仍应向您的 apache 服务器发送对 domainnotundermycontrol.com/somepage 的请求。Apache 会将“ServerName”视为 domainnotundermycontrol.com

听起来您可以控制的域对服务器名称没有过滤，也许只有 ip。在您的服务器上为 domainnotundermycontrol.com 创建一个虚拟主机，以捕获对该服务器名称的所有请求，并提供一个索引文件，其中包含指向您希望人们点击的合法页面或只是一些广告词的链接。然后它将不再被您的其他虚拟主机捕获。

享受免费流量。

# javascript - 为什么 Safari 或 Firefox 不能处理来自 MediaElementSource 的音频数据？

> ID：13958158
> 
> 赞同：11
> 
> 时间：2012-12-19T17:49:48.707
> 
> 标签：javascript, html, firefox, safari, web-audio-api

**[Safari 或 Firefox 都无法`MediaElementSource`使用 Web Audio API 处理来自 a 的音频数据。](http://jsbin.com/ImUmOXe/1/edit?js,output)**

```
var audioContext, audioProcess, audioSource,
    result = document.createElement('h3'),
    output = document.createElement('span'),
    mp3 = '//www.jonathancoulton.com/wp-content/uploads/encodes/Smoking_Monkey/mp3/09_First_of_May_mp3_3a69021.mp3',
    ogg = '//upload.wikimedia.org/wikipedia/en/4/45/ACDC_-_Back_In_Black-sample.ogg',
    gotData = false, data, audio = new Audio();

function connect() {
  audioContext = window.AudioContext ? new AudioContext() : new webkitAudioContext(),
  audioSource  = audioContext.createMediaElementSource( audio ),
  audioScript  = audioContext.createScriptProcessor( 2048 );

  audioSource.connect( audioScript );
  audioSource.connect( audioContext.destination );
  audioScript.connect( audioContext.destination );
  audioScript.addEventListener('audioprocess', function(e){
    if ((data = e.inputBuffer.getChannelData(0)[0]*3)) {
      output.innerHTML = Math.abs(data).toFixed(3);
      if (!gotData) gotData = true;
    }
  }, false);
}

(function setup(){
  audio.volume = 1/3;
  audio.controls = true;
  audio.autoplay = true;
  audio.src = audio.canPlayType('audio/mpeg') ? mp3 : ogg;
  audio.addEventListener('canplay', connect);
  result.innerHTML = 'Channel Data: ';
  output.innerHTML = '0.000';
  document.body.appendChild(result).appendChild(output);
  document.body.appendChild(audio);
})();
```

有没有计划在不久的将来修补这个问题？或者是否有一些解决方法仍然可以为用户提供音频控制？

对于 Apple 来说，这可以在 WebKit Nightlies 中修复，还是我们必须等到 Safari **8.0**发布才能让 HTML5`<audio>`与 Web Audio API 很好地配合？Web Audio API 至少从 6.0 版开始就存在于 Safari 中，我最初在 Safari 7.0 发布之前很久就发布了这个问题。有没有理由这还没有解决？它会被修复吗？

对于 Mozilla，我知道您仍在从旧的音频数据 API 进行切换，但这是您的 Web 音频实现的一个已知问题吗？它会在 Firefox 的下一个版本之前得到解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T17:44:17.093

这个答案几乎完全来自我对相关问题的回答：[Firefox 25 and AudioContext createJavaScriptNote not a function](https://stackoverflow.com/questions/19708561/firefox-25-and-audiocontext-createjavascriptnote-not-a-function/19710142#19710142)

## 如果媒体遵守[Same-Origin Policy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript) ， Firefox*确实*支持，但是当尝试使用来自远程来源的媒体时，Firefox 不会产生错误。`MediaElementSource`

该*规范*并没有真正*具体*说明它^(（双关语）)，但有人告诉我这是一种预期的行为，问题实际上出在 Chrome 上……[需要更新 Blink 实现（Chrome、Opera）以要求科尔斯](http://twitter.com/jsantell/status/396753990412562432)。

## [MediaElementSource 节点和跨域媒体资源](http://lists.w3.org/Archives/Public/public-audio/2013JulSep/0219.html)：

> `From: Robert O'Callahan <robert@ocallahan.org>`
> `Date: Tue, 23 Jul 2013 16:30:00 +1200`
> `To: "public-audio@w3.org" <public-audio@w3.org>`
> 
> HTML 媒体元素可以播放来自任何来源的媒体资源。当一个元素从与页面来源不同的来源播放媒体资源时，我们必须防止页面脚本能够读取媒体的内容（例如提取视频帧或音频样本）。特别是我们应该阻止 ScriptProcessorNodes 访问媒体的音频样本。我们还应该了解有关以其他方式泄漏的样本的信息（例如定时通道攻击）。目前，网络音频规范对此只字未提。
> 
> 我认为我们应该通过防止任何非同源数据进入 Web Audio 来解决这个问题。这将最大限度地减少攻击面和对 Web 音频的影响。
> 
> **我的建议是让 MediaElementAudioSourceNode 将来自不同源流的数据转换为静音。**

如果这个提议成为规范，开发人员几乎不可能意识到他为什么`MediaElementSource`不工作。就目前而言，在[Firefox 26](http://jsfiddle.net/9eGSp/1/)`createMediaElementSource()`中调用一个`<audio>`元素实际上完全[**停止**](http://jsfiddle.net/9eGSp/1/)[了](http://jsfiddle.net/9eGSp/1/)[控件的工作](http://jsfiddle.net/9eGSp/1/)并且**没有抛出任何错误**。[**`<audio>`**](http://jsfiddle.net/9eGSp/1/)

 ****您可以对来自远程来源的音频/视频数据做哪些危险的事情？一般的想法是，如果不对节点应用同源策略`MediaElementSource`，一些恶意 javascript 可以访问只有用户应该有权访问的媒体（会话、vpn、本地服务器、网络驱动器）并发送其内容或某些表示它——对攻击者。

默认情况下，HTML5 媒体元素没有这些限制。`<audio>`您可以使用、`<img>`或`<video>`元素在所有浏览器中包含远程媒体。只有当您想从这些远程资源中操作或提取数据时，同源策略才会发挥作用。

> [它] 出于同样的原因，您不能通过以下方式跨域转储图像数据`<canvas>`：媒体可能包含敏感信息，因此允许流氓网站转储和重新路由内容是一个安全问题。- [@nmaier](https://stackoverflow.com/users/484441/nmaier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T18:51:39.000

createMediaElementSource() 在 Safari 8.0.5（可能更早版本）中无法正常工作，但在 Webkit Nightly 中已修复，截至 10600.5.17, r183978****

# jquery - 使 jquery 滑块在触摸设备上工作

> ID：13958159
> 
> 赞同：1
> 
> 时间：2012-12-19T17:49:54.667
> 
> 标签：jquery, user-interface, touch, screen

我使用 jquery ui 创建了一个页面，并且知道默认情况下它不支持触摸设备。你可以在[这里](http://training.mercury.stellarbluewebdesign.com/GainOil/)找到它！我正在尝试使滑块在触摸屏设备上移动。请不要用“使用触摸打孔”来回答这个问题，因为我知道它的存在，但不知道如何使用它。它使用的 Js 可以在页面顶部的 js/functions.js 链接下找到。谢谢你

# .net - Biztalk SOAP 适配器最大消息数

> ID：13958160
> 
> 赞同：1
> 
> 时间：2012-12-19T17:49:59.910
> 
> 标签：.net, performance, biztalk, esb

我想知道是否有人可以提供帮助。我们正在经历一段时间的性能测试，我们将消息从 .Net 代码发送到 Biztalk 公开的 SOAP 适配器。当我们尝试同时（按顺序）发送 100 条消息时，我们遇到了一些问题。

我们的 Biztalk '专家' 回来并建议 Biztalk SOAP 适配器可能无法快速连续处理那么多请求。这对我来说听起来很荒谬，任何人都可以指出任何有关请求阈值的官方数据/或分享他们的经验。

（了解 WCF 可能是更好的选择，但我们目前无法使用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:14:15.977

我认为它可能与线程有关，请参阅部分：线程问题或连接，请参阅部分：与 HTTP、SOAP 或 WSE 适配器性能相关的 ASP .NET 设置在[BizTalk Server SOAP 适配器故障排除](http://msdn.microsoft.com/en-US/library/dd297484%28v=BTS.10%29.aspx)

# ruby-on-rails - 带有 Mongoid 的 Rails 引擎

> ID：13958165
> 
> 赞同：1
> 
> 时间：2012-12-19T17:50:09.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid, rails-engines

我正在创建独立的 Rails 引擎应用程序，它将使用 mongoid 进一步添加到主应用程序中。所以，我就这样开始了。

```
rails plugin new some_engine --mountable --skip-active-record 
```

然后在gem文件中：

```
gem 'mongoid', "~> 3.0.15" 
```

然后我运行这个命令来生成 mongo 配置文件：

```
some_engine\test\dummy>rails g mongoid:config 
```

在 test/dummy/config 文件夹下生成 mongoid.yml

现在，如果我生成一些模型，它仍在调用活动记录

```
some_engine>rails generate scaffold post title:string 
```

它给出输出：

```
 invoke  active_record
 create    db/migrate/20121219170013_create_some_engine_posts.rb
........... 
```

然后我更改 script/rails 文件夹下的 rails 文件，因为它具有：

```
require 'rails/all' 
```

到

```
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
require "rails/test_unit/railtie" 
```

然后，如果我生成一些东西，它仍然不会调用 mongoid

```
some_engine>rails generate model post 
```

这里什么也没有发生。

当我跑步时

```
some_engine>rails generate scaffold post title:string

 invoke  resource_route..... 
```

是不是我在这里遗漏了一些将 mongoid 与 Rails 引擎一起使用的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T20:25:43.787

听起来像 mongoid 仍然没有加载。对不起，我没有时间重现。如果您在`engine.rb`文件中明确要求 mongoid 会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T13:50:11.263

在 Rails 4 中，如果我们不需要 active_resource。生成的插件应用程序在 bin/rails 中加载了 rails 模块。

```
 require "action_controller/railtie"
require "action_mailer/railtie"
require "sprockets/railtie"
require "rails/test_unit/railtie"
require "mongoid"
require 'rails/engine/commands' 
```

# java - context=this 使我的应用程序停止工作

> ID：13958166
> 
> 赞同：1
> 
> 时间：2012-12-19T17:50:11.893
> 
> 标签：java, android

这`context=this`使我的应用程序停止工作。怎么了？

```
package com.robot.soccer.control;
import com.robot.soccer.control.R;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Vibrator;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class Main extends Activity implements OnClickListener, AccelerometerListener {

TextView ipText;
 TextView portText;
 TextView status;
 TextView xStatus;
 TextView yStatus;
 TextView zStatus;
 TextView accText;

 ImageButton goBut;
 ImageButton kickBut;
 public float xVal;
 public float yVal;

private static Context CONTEXT;
    @Override
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        accText=(TextView)this.findViewById(R.id.accm);
        xStatus=(TextView)this.findViewById(R.id.x);
        yStatus=(TextView)this.findViewById(R.id.y);
        zStatus=(TextView)this.findViewById(R.id.z);
        status=(TextView)this.findViewById(R.id.status);
        portText = (TextView)this.findViewById(R.id.portText);
        ipText=(TextView)this.findViewById(R.id.ipText);
        goBut=(ImageButton)this.findViewById(R.id.goBut);
        kickBut=(ImageButton)this.findViewById(R.id.kickBut);
        goBut.setOnClickListener(this);
        kickBut.setOnClickListener(this);
        accText.setText("AccelerometerStatus ");
        //CONTEXT=this;

    } 
```

这是我的日志：

```
12-20 01:22:50.271: E/AndroidRuntime(281): FATAL EXCEPTION: main
12-20 01:22:50.271: E/AndroidRuntime(281): java.lang.SecurityException: Requires VIBRATE permission
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.Parcel.readException(Parcel.java:1247)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.Parcel.readException(Parcel.java:1235)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.IVibratorService$Stub$Proxy.vibrate(IVibratorService.java:106)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.Vibrator.vibrate(Vibrator.java:44)
12-20 01:22:50.271: E/AndroidRuntime(281):  at com.robot.soccer.control.Main.vibrate(Main.java:253)
12-20 01:22:50.271: E/AndroidRuntime(281):  at com.robot.soccer.control.Main.OnAccelerationChanged(Main.java:239)
12-20 01:22:50.271: E/AndroidRuntime(281):  at com.robot.soccer.control.AccelerometerManager$1.onSensorChanged(AccelerometerManager.java:135)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:449)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.os.Looper.loop(Looper.java:123)
12-20 01:22:50.271: E/AndroidRuntime(281):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-20 01:22:50.271: E/AndroidRuntime(281):  at java.lang.reflect.Method.invokeNative(Native Method)
12-20 01:22:50.271: E/AndroidRuntime(281):  at java.lang.reflect.Method.invoke(Method.java:521)
12-20 01:22:50.271: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-20 01:22:50.271: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-20 01:22:50.271: E/AndroidRuntime(281):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:28:15.087

```
 java.lang.SecurityException: Requires VIBRATE permission 
```

将 VIBRATE 权限添加到您的清单。

[http://developer.android.com/reference/android/Manifest.permission.html#VIBRATE](http://developer.android.com/reference/android/Manifest.permission.html#VIBRATE)

`<uses-permission android:name="android.permission.VIBRATE"/>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:28:54.987

正如您的 logcat 结果所说：

> java.lang.SecurityException：需要振动权限 12-20

意味着您需要将 VIBRATE 权限添加`AndroidManifest.xml`为：

```
<uses-permission android:name="android.permission.VIBRATE" /> 
```

# sql - 我可以使用触发器来创建列吗？

> ID：13958167
> 
> 赞同：0
> 
> 时间：2012-12-19T17:50:15.200
> 
> 标签：sql, sql-server, key-value, entity-attribute-value

作为 Entity-Attribute-Value 或 Key-Value Pair 表等反模式的替代方案，是否可以通过`INSERT`参数表上的触发器将列动态添加到数据表中？

这是我的桌子：

```
CREATE TABLE [Parameters]
(
    id int NOT NULL 
        IDENTITY(1,1) 
        PRIMARY KEY,
    Parameter varchar(200) NOT NULL,
    Type varchar(200) NOT NULL
)
GO

CREATE TABLE [Data]
(
    id int NOT NULL
        IDENTITY(1,1)
        PRIMARY KEY,
    SerialNumber int NOT NULL
)
GO 
```

然后触发器将被放置在参数表上，由添加的新参数触发：

```
CREATE TRIGGER [TRG_Data_Insert]
    ON [Parameters]
    FOR INSERT 
AS BEGIN            
            -- The trigger takes the newly inserted parameter
            -- record and ADDs a column to the data table, using
            -- the parameter name as the column name, the data type
            -- as the column data type and makes the new column 
            -- nullable.
END
GO 
```

这将允许我的数据挖掘应用程序获取要挖掘的参数列表，并在挖掘数据后有一个存储数据的地方。它还允许用户添加新参数以动态挖掘，而不必弄乱 SQL。

这可能吗？如果是这样，你会怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:02:23.103

我认为动态添加列的想法将是一个定时炸弹，只是逐渐向[SQL Server 限制](http://msdn.microsoft.com/en-us/library/ms143432.aspx)之一蔓延。

您还将把数据库设计交到用户手中，任由他们的命名约定和疯狂的想法摆布。

因此，虽然有可能，但它是否比 EAV 表更好，这对于下一个开发人员来说至少是显而易见的选择你的程序吗？

# vba - 如果单元格超过另一个单元格，则显示消息框

> ID：13958173
> 
> 赞同：0
> 
> 时间：2012-12-19T17:50:26.543
> 
> 标签：vba, excel

如果一个单元格中的值小于或大于另一个单元格 - 然后显示差异，那么编写 VBA 代码以弹出消息框的最佳方法是什么？

N 列包含总应用程序（手动输入）

R 列包含总结果（生成的公式）

如果计算后 R 列中的单元格小于或大于 N 列中的单元格，则会弹出消息框并显示 Total results is less than appts by # 或 Total results is greater than appts by #。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:48:18.057

将以下例程添加到 VBA 项目中所需的工作表（例如 Sheet1）

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Target = Range("N1") Or Target = Range("R1") Then 'Only attempt to run the below code if target is a range you care about

        If Range("R1").Value2 <> Range("N1").Value2 Then
            MsgBox "Values differ"
        End If

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T15:53:23.587

假设您想将两个单元格相互比较（而不是一整列单元格）：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    If Range("N1") > Range("R1") Then
        MsgBox "Oops. Results less than Input by " & Abs(Range("N1") - Range("R1"))
    End If

    If Range("N1") < Range("R1") Then
        MsgBox "Oops. Results greater than Input by " & Abs(Range("N1") - Range("R1"))
    End If

End Sub 
```

这应该实现以下目标：

*   每当工作表发生变化时，将两个单元格相互比较（无论是 R1 的公式生成值、N1 的手动输入还是工作表上的任何其他内容）
*   确定哪个更大
*   弹出适当的消息

# apache-flex - 当应用程序启动时有两种状态时将焦点设置在 TextField 上

> ID：13958178
> 
> 赞同：2
> 
> 时间：2012-12-19T17:50:42.347
> 
> 标签：apache-flex, cursor, focus, state, textinput

我有下一个应用程序标题：

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="init()" creationPolicy="all" enterState="focusManager.setFocus(employeeIDTextInput);">

public function init():void {
    focusManager.showFocusIndicator = true;
    focusManager.showFocus();
    focusManager.setFocus(theTextInput);
} 
```

并且 TextInput 处于默认状态。但是当应用程序启动时，TextField 被聚焦（TextField 周围有一个蓝色矩形），但光标不在 TextField 内。但是在下一个状态中，我有 anotherTextInput ，当您在状态之间切换时，两个文本输入都按照您的预期正确聚焦，并且光标正确出现在每个文本输入中。

```
<mx:State name="secondState" enterState="{focusManager.setFocus(anotherTextInput)}"> 
```

我的问题是，为什么当应用程序启动时光标不在 init() 函数上的命令的 TextInput 内？

谢谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:16:18.310

我解决了，这个问题是因为这是一个组件，并且是从主菜单调用的，并且在组件出现在屏幕上之前创建菜单的那一刻，就调度了 creationComplete 事件。我所做的是附加一个事件处理程序来显示事件，就是这样。

```
<mx:Canvas width="100%" height="100%" xmlns:mx="http://www.adobe.com/2006/mxml" 
       creationComplete="init()" creationPolicy="all"
       show="focusManager.setFocus(employeeIDTextInput)"
       > 
```

非常感谢每一个问我问题的人...

# c++ - 内联 asm 将值写入内存

> ID：13958190
> 
> 赞同：2
> 
> 时间：2012-12-19T17:51:32.617
> 
> 标签：c++, c, assembly

我怎样才能在内联汇编中写这个？我想将packet的值写入cave in inline asm的内存位置，怎么办？我可以用 WriteProcessMemory 做到这一点，但我想摆脱它并用 asm 替换

```
int SendToClient(BYTE *packet, int Length)
{
    int cave = (int)VirtualAllocEx(hProcess, NULL, Length, MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE); 

    if (WriteProcessMemory(hProcess, (void*)cave, packet, Length, NULL))
    {

    }

    __asm
    {
        //how?
    }
} 
```

例如，假设我想从地址 senderOffset 中读取数据：

```
int GetSenderID()
{
    int value;

    __asm
    {
        mov eax, senderOffset
        mov value, eax
    }

    return *(int*)value;
} 
```

这是做“ReadProcessMemory(GetCurrentProcess(), (VOID*)senderOffset, &value, 0) 会做的事情，我只是在寻找与内联 asm 的“WriteProcessMemory”相同的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:00:32.303

如果你想要做的基本上是在内联汇编中重写 WriteProcessMemory()，算了吧，这不会发生。WriteProcessMemory() 是一个操作系统接口，允许您更改另一个进程的虚拟内存空间的内容，无论您使用什么指令，您都无法直接从用户空间进程执行此操作。无论是内联还是在单独的程序集源文件中，任何程序集都无法施展魔法，让您的进程在其虚拟内存沙箱中运行，无需通过操作系统即可写入另一个进程的虚拟内存沙箱。这样做。在您的用户模式程序中运行时，MMU 被设置为让您的进程访问它自己的内存而没有别的。甚至试图访问内存

要访问另一个进程地址空间中的内存，您必须调用操作系统来执行此操作。每个系统都有一种进行操作系统调用的受控方式，可以将处理器从用户模式切换到内核模式。在 x86 中，这些被称为“环”，操作系统在最高特权的“环 0”中运行，用户模式代码在最低特权的“环 3”中运行。驱动程序在其他两个环中运行。您不能简单地将 CPU 从 ring 3 切换到 ring 0；试图这样做会触发特权违规。在 ring 3 中，您不能更改 MMU 以允许您的进程访问（读取或写入或执行）另一个进程的内存空间。

# sql-server - 如何将 REPLACE 与包含撇号的字符串一起使用？

> ID：13958194
> 
> 赞同：0
> 
> 时间：2012-12-19T17:51:43.500
> 
> 标签：sql-server, string, apostrophe

> **可能重复：**
> [替换 sql server 中的单引号](https://stackoverflow.com/questions/1440733/replace-single-quote-in-sql-server)

所以我正在尝试使用以下代码：

```
UPDATE TableName
SET FieldName = REPLACE(FieldName, 'SearchFor', 'ReplaceWith'); 
```

它非常适合我需要做的事情，除了我需要搜索的是“有效的驾驶执照”这一事实。该撇号似乎与代码不一致。我试过这样做：

```
'valid driver''s license' 
```

...但这似乎也不起作用。我收到以下错误：

```
Argument data type text is invalid for argument 1 of replace function. 
```

如果有人以前处理过这个问题，我希望得到一些帮助！这将节省我很多时间，而不是手动更新每条记录。-__-

艾莉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T17:58:23.920

该错误准确地告诉您问题所在。`FieldName`是 type 的一列`text`，它不适用于`REPLACE`函数。尝试将第一个参数作为`VARCHAR(MAX)`第一个，它应该可以工作。IE：

```
UPDATE TableName
SET FieldName = REPLACE(CAST(FieldName AS VARCHAR(MAX)), 'SearchFor', 'ReplaceWith'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:57:58.947

那很好笑。几分钟前我刚刚遇到了这个确切的事情。事实证明我不得不改变这个：

UPDATE TableName SET FieldName = REPLACE(FieldName, 'SearchFor', 'ReplaceWith');

为此： UPDATE TableName SET FieldName = REPLACE(cast(FieldName as varchar(5000)), 'SearchFor', 'ReplaceWith');

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T17:58:02.337

您必须用斜杠转义单引号。

```
UPDATE TableName
SET FieldName = REPLACE(FieldName, 'Isn\'t', 'Is not'); 
```

# sql-server - 将 FOR XML 转换为 Varchar(max)

> ID：13958195
> 
> 赞同：3
> 
> 时间：2012-12-19T17:51:44.680
> 
> 标签：sql-server, xml, ssms, for-xml

我有一个返回要转换为 varchar 的 XML 的查询。我的查询返回 93,643 个字符的 XML。当我尝试将我的 xml 结果转换为 varchar 时，当我将结果集复制到文本编辑器时，我只得到 43,679 个字符。当我执行 len(xmlString) 时，我得到 93,643 个字符。

我从这篇[文章](https://stackoverflow.com/questions/1761124/how-many-characters-in-varcharmax)中知道 varchar(max) 最多可以有 2^31 个字符和 1 个字节 = 1 个字符，但它似乎切断了我的数据。

XML 字符是否超过 1 个字节？为什么我无法从我的 xml 结果中选择所有数据？

```
CAST((SELECT COLUMNS FROM TABLE FOR XML PATH('Name'), TYPE) AS VARCHAR(MAX) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:08:10.667

这只是 Managementstudio 的限制。
在更大的表上进行测试查询，我得到了 43,679 个字符的描述。
同一个查询通过 ADO 在应用程序中传递 267089 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:39:02.123

不知道为什么需要将 xml 数据转换为 varchar(max) 但如果您只想复制所有数据，则根本不要转换它。在这种情况下，在结果窗口中，您将看到一个带有可点击值的单元格（就像 Web 链接一样）。单击它，您的所有数据将在新窗口中打开，然后您将能够像文件一样保存或复制它。希望能帮助到你。

# python - 解码编码为GB2312的json

> ID：13958196
> 
> 赞同：2
> 
> 时间：2012-12-19T17:51:45.673
> 
> 标签：python, unicode, encoding, gb2312

通过 GET 请求，我从 Google 地理编码 API 中提取 json：

```
import urllib, urllib2

url = "http://maps.googleapis.com/maps/api/geocode/json"
params = {'address': 'ivory coast', 'sensor': 'false'}
request = urllib2.Request(url + "?" + urllib.urlencode(params))
response = urllib2.urlopen(request)
st = response.read() 
```

结果看起来像：

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "CÃ´te d'Ivoire",
               "short_name" : "CI",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "CÃ´te d'Ivoire",
         "geometry" : { ... # rest snipped 
```

如您所见，国家名称存在一些编码问题。我试图猜测这样的编码：

```
import chardet
encoding = chardet.detect(st)
print "String is encoded in {0} (with {1}% confidence).".format(encoding['encoding'], encoding['confidence']*100) 
```

返回：

```
String is encoded in GB2312 (with 99.0% confidence). 
```

我想知道的是如何将其转换为具有`ô`正确显示（带抑扬符的o）编码的字典。

我试过：

```
st = st.decode(encoding['encoding']).encode('utf-8') 
```

但后来我得到：

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Cä¹ˆte d'Ivoire",
               "short_name" : "CI",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Cä¹ˆte d'Ivoire",
         "geometry" : { ... # rest snipped 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:08:07.540

google api 结果总是以 编码`UTF-8`，你甚至可以从他们的 HTTP Content-Type 标头中手动读取：

![在此处输入图像描述](../Images/0ad8a585271f98a8ba5454a5aa3b4064.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:14:43.280

一旦你（正确地）解码它，不要重新编码它；`json`可以`unicode`很好地工作。

```
>>> json.loads(u"[\"C\xf4te d'Ivoire\"]")
[u"C\xf4te d'Ivoire"] 
```

# c++ - 带有 Clang 或 GCC 的 Mac 上的 C++11

> ID：13958197
> 
> 赞同：14
> 
> 时间：2012-12-19T17:51:48.273
> 
> 标签：c++, xcode, c++11, g++, clang

我在 Moutain Lion 上安装了 Xcode 4.5.2，并且安装了最新的“命令行工具”，但是当我尝试使用`g++`or `clang++`（和 options `-std=c++11 -stdlib=libc++`）进行编译时出现错误。与`g++`：

```
cc1plus: error: unrecognized command line option "-std=c++11"
cc1plus: error: unrecognized command line option "-stdlib=libc++" 
```

与`clang++`：

```
clang: error: invalid deployment target for -stdlib=libc++ (requires OS X 10.7 or later) 
```

它在一个 Qt 项目中。

那么如何在我的 Mac 上使用 C++11 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:26:28.097

如您所见，g++ 不支持这些命令行选项。

听起来您正在使用 Xcode。

对于 clang，您应该查看项目设置，并确保“部署目标”设置为 10.7（或 10.8）

错误消息告诉您的是 libc++ 不适用于 10.6 及之前的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:10:33.783

我在我的 Mac 上安装了 gcc-4.7 以使 C++11 工作。当前版本的 GCC 在支持 C++11 方面相当出色，所以这应该是一个公平的选择。

安装可以由[Homebrew](http://mxcl.github.com/homebrew/)完成，并不复杂（至少我能够做到......）

如果您还没有 Homebrew，要安装它：

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)" 
```

现在运行

```
brew doctor 
```

并解决出现的任何问题（hombrew 文档中为此编写了一些内容）。最后，安装当前的 gcc：

```
brew install gcc 
```

如果一切顺利，您应该可以访问`g++-4.7`，这允许`-std=c++0x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:31:28.640

`-std=c++0x`如果`c++11`不起作用，请尝试。在 GCC中对该`-std=c++11`选项的支持相对较新，您可能没有足够新的版本。

在 libc++ 问题上，我相信 Marshall。

# bash - cat/column 环境下一行打印文件

> ID：13958200
> 
> 赞同：0
> 
> 时间：2012-12-19T17:51:58.550
> 
> 标签：bash, cat

我需要在 cat/column 环境中的一行中打印文件列表。问题是——它打印成多行：

```
#!/bin/bash

Files=`ls ~/`

echo $Files # prints in one line as I want. But I have to do it inside cat/column:

# prints files in column -- despite column separator is &:
cat << EO | column -s\& -t

$Files

EO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:03:34.733

您可以在没有以下情况下达到相同的效果`cat`：

```
echo $Files | column -s\& -t 
```

这不会给出问题`cat`。

* * *

对于链接中给出的输入：

```
 column -s\& -t <(echo "  -a, --all & apply the sed script to files in current dir and subdirs
-d, --dirs & apply the sed script to first-level-dir names
-f, --file & apply the sed script to a given file. It is a single command, but the script keep You from getting into manuals
-h, --help & show this output
-s, --script & the sed script to be used (currently: `ls $(dirname $0)/scripts`)
-v, --version & show version information
-I, --noi & overwrite existing files") 
```

会工作。

# git - Netbeans Git 模块将文件显示为已忽略，但它们不是

> ID：13958202
> 
> 赞同：2
> 
> 时间：2012-12-19T17:52:12.797
> 
> 标签：git, netbeans, gitignore

Netbeans 将 /var/www/application/app/webroot/ 下的所有文件和文件夹显示为已忽略，但这不是 .gitignore 文件中的内容。有任何想法吗？这是令人难以置信的烦人。

Git 版本 1.7.9.5

Netbeans 版本 7.2.1（内部版本 201210100934）

这是忽略文件：

```
Config/database.php
.idea
.DS_Store
Config/Schema/Builds/*.sql
Config/build.properties

Config/Schema/Dumps/*
!Config/Schema/Dumps/empty

# Test URI
# Ignore netbeans folder
nbproject/*

# Ignore private folder
private/*
!private/empty

# Ignore packed asset files
webroot/css/packed/*
!webroot/css/packed/.htaccess
webroot/js/packed/*
!webroot/js/packed/.htaccess

# MAC
.DS_Store

# Windows
Thumbs.db

# Eclipse project files
.cache
.project
.settings
.buildpath

# Cake TMP Dirs
tmp/*
!tmp/

tmp/cache/*
!tmp/cache/empty

tmp/cache/models/*
!tmp/cache/models/
!tmp/cache/models/empty
tmp/cache/views/*
!tmp/cache/views/
!tmp/cache/views/empty

tmp/logs/*
!tmp/logs/empty

tmp/sessions/*
!tmp/sessions/empty

tmp/tests/*
!tmp/tests/empty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T15:46:13.383

这在 NetBeans 7.4 中不再是问题

# android - Android 在 RFCOMM 套接字上发送数据

> ID：13958204
> 
> 赞同：0
> 
> 时间：2012-12-19T17:52:23.820
> 
> 标签：android, sockets, bluetooth, rfcomm, spp

我正在将蓝牙医疗设备与我的 Android 应用程序连接起来。所以，我创建了一个通信通道 RFCOMM（SPP 协议），因为医疗设备允许 SSP 通信协议。设备指南为我提供了在 SPP 协议上发送的命令结构。例如 0x02 0x70 0x04 0x0A 表示一个简单的 4 字节命令）。所以，我需要发送这样的命令（符合 SPP 协议）。

创建后，`BluetoothSocket`我以这种方式获取输入和输出流（按照此[链接](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)）：

```
 InputStream iStream = null;
  iStream = socket.getInputStream(); // socket is my BluetoothSocket object
  OutputStream oStream = null;
  oStream = socket.getOutputStream(); 
```

为了发送从十六进制序列 0x02 0x70 0x04 0x0A 表示的命令，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:45:44.610

您可以在 OutputStream 上使用 write 来写入字节数组。

```
byte[] bytes = new byte[]{ 0x02,0x70,0x04,0x0A };
oStream.write(bytes); 
```

# sql - 像 Oracle 的“翻译”函数一样工作的 SQLite 函数？

> ID：13958210
> 
> 赞同：2
> 
> 时间：2012-12-19T17:52:42.777
> 
> 标签：sql, oracle, sqlite

Oracle 有一个名为的函数`translate`，可用于将字符串中的单个字符替换为其他字符，其顺序与它们出现的顺序相同。它与函数不同，该`replace`函数将整个第二个参数的出现替换为整个第三个参数。

```
translate('1tech23', '123', '456');     --would return '4tech56'
translate('222tech', '2ec', '3it');     --would return '333tith' 
```

我需要这个来实现对 SQLite 数据库的搜索，忽略我的查询字符串上的口音（巴西葡萄牙语）。将要查询的表中的数据可能带有或不带有重音符号，因此，根据用户键入查询字符串的方式，结果会有所不同。

示例：搜索“maçã”，用户可以输入“maca”、“maça”、“macã”或“maçã”，表格中的数据也可能是四种可能之一。使用 oracle，我只会使用这个：

```
Select Name, Id 
  From Fruits 
 Where Translate(Name, 'ãç','ac') = Translate(:QueryString, 'ãç','ac') 
```

...以及这些其他字符替换：

```
áéíóúÁÉÍÓÚàèìòùÀÈÌÒÙãõÃÕäëïöüÄËÏÖÜâêîôûÂÊÎÔÛñÑçÇ 
```

经过：

```
aeiouAEIOUaeiouAEIOUaoAOaeiouAEIOUaeiouAEIOUnNcC 
```

当然，我可以嵌套多个对 Replace 的调用，但这不是一个好的选择。

在此先感谢一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-08T13:40:22.523

用于 SQLite 的开源 Oracle 函数已在堪萨斯州立大学编写。它们包括 translate()（顺便说一句，完全支持 UTF-8），可以在[此处](http://sqlite-libs.cis.ksu.edu "这里")找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:06:51.897

我不相信 sqlite 中有任何东西可以像您描述的那样一次性翻译文本。

然而，这并不难实现为[用户定义的函数](http://www.sqlite.org/c3ref/create_function.html)。这是一个不错的入门[参考](https://stackoverflow.com/q/7867099/839436)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T14:46:30.437

我用了`replace`

替换（字符串，模式，替换）

[https://www.sqlitetutorial.net/sqlite-replace-function/](https://www.sqlitetutorial.net/sqlite-replace-function/)

# c# - WPF 相同的弧段由 2 种不同的颜色组成

> ID：13958211
> 
> 赞同：1
> 
> 时间：2012-12-19T17:52:48.177
> 
> 标签：c#, wpf

要求：我必须配备电压表用户控件。

以下代码绘制了一个弧线，由电压表刻度和值组成。

```
 <Path Name="Pth" Stroke="DarkGray"  StrokeThickness="2" Width="Auto"  Height="48" Canvas.Top="12">
        <Path.Data>
            <PathGeometry >
                <PathFigure   StartPoint="35,28">
                    <ArcSegment   IsLargeArc="False"
                            Size="23,75"
                            Point="200,28"
                            SweepDirection="Clockwise"
                                RotationAngle="90"/>
                </PathFigure>
            </PathGeometry>
        </Path.Data> 
```

正如上面可以看到的，使用的笔是笔画=深灰色。我不是在谈论 Fill 属性。

**但是，必须将弧的一部分呈现为蓝色**（作为警报值）以响应用户指定的范围。弧的任何部分。

大图是弧线的主要部分用灰色笔渲染，报警部分是蓝色的。

正如上面所看到的问题，我们可以只将笔分配给路径（不是弧段或几何或路径图），并且路径一次只能使用一支笔。

渐变刷在此处无法工作，因为颜色混合在一起。此处弧的两个部分必须通过颜色彼此清晰区分。

如果我使用两条路径将弧分成 2 个弧段，我必须进行各种现有计算，这取决于路径几何的分数值。

我的情况最好的方法是什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:54:53.927

取自[这里](https://stackoverflow.com/questions/13945821/wpf-to-stroke-arc-with-two-different-brushes/13945872#13945872)：

一个想法可能是使用渐变画笔，颜色块之间没有间距。

例如：

```
<Rectangle Width="200" Height="50">
    <Rectangle.Fill>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="Red" Offset="0.500"/>
            <GradientStop Color="Lime" Offset="0.500"/>
        </LinearGradientBrush>
    </Rectangle.Fill>
</Rectangle> 
```

会导致以下结果：

![](../Images/f18891a9d380ed0b1efcc9193b74e18d.png)

虽然我担心你可能很难找到正确的偏移量，以防它应该动态计算。

编辑：你能告诉我们弧线大概是什么样子吗？

# .net - 类范围的 Linq 内存查询

> ID：13958213
> 
> 赞同：2
> 
> 时间：2012-12-19T17:53:09.737
> 
> 标签：.net, vb.net, linq

我创建了以下类：

```
Public Class Candidate
    Public Account As String
    Public StartDate As Date
    Public EndDate As Date
End Class 
```

现在，在第二堂课中，我想`List(Of Candidate)`通过匹配开始日期和结束日期来进行分组。我有以下代码：

```
Public Class MyClass

Private _Candidates As New List(Of Candidate)
Private _Grouped_Candidates as ????????

    Sub Group_Candidiates()
        _Grouped_Candidates = From Candidate In _Candidates
            Group Candidate By StrtDt = Candidate.StartDate, EndDt = Candidate.EndDate Into Group
            Select New With {.Grp = Group, .StrtDt = StrtDt, .EndDt = EndDt}
    End Sub

End Class 
```

然后在这个类的不同部分，我想对这个内存查询执行一个操作：

```
Sub DoStuff()
    For Each Grp In _Grouped_Candidates
        DoSometihng(Grp.Grp.Select(Function(Candidate) Candidate.Account).ToList, _
                                   Grp.StrtDt, _
                                   Grp.EndDt)
    Next
End Sub 
```

这给了我一个错误，因为我没有`_Grouped_Candidates`正确声明。

我的问题是这是否是不好的编程习惯（将内存中的查询保存在子范围之外），如果是，应该怎么做。而且，如果没有，我怎样才能正确声明查询，以便我可以在我的课堂上使用它？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:00:14.383

匿名类型专门设计用于在单个方法的范围内使用。虽然有跨方法使用它们的方法，但它们很混乱，通常是不好的做法，总的来说，工作量远远超过它们的价值。最简单的解决方案是创建一个新的命名类型，该类型具有代表当前匿名类型使用的属性，然后使用该命名类型。负责维护代码的人将感谢您投入微小的前期时间，而不是使用凌乱的黑客。

# java - 并行化远程服务调用

> ID：13958216
> 
> 赞同：0
> 
> 时间：2012-12-19T17:53:24.163
> 
> 标签：java, spring, soap, task

**在我目前的工作中，对于一个用例，我们按顺序**进行多个远程服务调用（SOAP over HTTP）。这些是独立的电话，我必须整理每个电话的数据，最后准备我的回复。我想并行化这些调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:56:41.417

听起来您应该使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。

创建一个执行查询并实现[Runnable](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)的类。然后，您可以将此类的实例提交给一个`Executor`，它将在多个线程中运行它（池等 - 所有可配置）。每次提交都会返回一个[Future](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)`get()`对象，只需调用它即可获得结果。

该框架意味着您不必担心实例化线程、设置池、确定正在运行的内容等。

这是[教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:04:02.173

我们被告知在 Java EE 中生成线程是不行的。但是，OP 没有说明使用的是 Java EE 还是 Java SE。

对于 Java EE，[WorkManager API](http://workmanager.blogspot.ch/)可能很有用。

除此之外，是的，`ExecutorService`或者[Spring TaskScheduler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html)（如果我解决了问题就不太可能）。

# objective-c - iOS - 等到一个进程结束

> ID：13958219
> 
> 赞同：2
> 
> 时间：2012-12-19T17:53:41.027
> 
> 标签：objective-c, ios, uiviewcontroller

这是一个IOS6的问题。

我有一个应用程序正在调用一个类（A）来检查一些东西。然后我想调用一个类（B）来做别的事情是否可以确保在进程A完成之前进程B不会启动？

目前，我只是在RootVC中一个接一个地调用。

每个都显示一个模态视图，我只能看到 B ..

```
[self performA];
[self performB]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:11:38.410

有几种工具可用于管理您可用的应用程序部分的执行顺序。但是，由于您正在展示视图控制器，因此您有一些限制；您不想阻塞主线程（否则应用程序将变得无响应）并且您必须在主线程上执行 UI 操作。

在这种情况下，最常见且可能最合适的解决方案是设置回调以`B`在操作`A`完成时触发操作。

作为其一部分的模态视图控制器`A`可能会在成功完成其任务时调用委托。然后该委托可以开始任务`B`。

或者，您可以传递一个在完成`A`时`A`将执行的块。然后该块可以执行任务`B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:36:54.390

我敢于失败。故事：我的应用程序一直在给我从 iOS4 目标到 iOS6 的地狱更新（带有适用于 iOS5/3GS 的子代码）。它会崩溃，除非我使用 @try 等......在重新尝试时具有内置的延迟间隔（这很愚蠢，因为我不知道用户拥有多大的数据库，也不知道加载它们需要多长时间） . 这是解决我的真正问题的一种痛苦方法：视图在 CoreData 堆栈（日志）可以完全加载之前加载，我看不到让初始视图等到它的 NSMutableArray 的方法（基于我的 CoreData 数据库）对象）加载。基本上，我不断收到关于 addObjectsSortedBy 的错误错误：我的实体的最重要属性。线程似乎是答案，但我需要加载一个 NSMutableArray 并将其输入到我的 initialViewController 中，这将在每次启动时可见（不包括 FirstTime 初始），但我尝试（好吧，12 次尝试）使用线程只是在应用程序启动的早期发生崩溃。结果：我向那些纠缠过那条线的人鞠躬。我的解决方案是在 AppDelegate.m 中构建一个通知，我的 initialViewController viewDidLoad 被告知要先监听它。如果它收到通知，它会跳过并完成正常流程到 [super viewDidLoad]; 如果没有，它会执行@try、@catch、@finally。在@try 中，我尝试就好像通知到达一样继续进行（好像有点晚了），然后我通过向用户显示“请稍候”标签来处理（@catch）错误，然后我告诉应用程序等待.xx 并重复原来的 addObjectsSortedBy：命令好像一切都开始了。我的应用程序的最佳位置，日志中的图像和数据似乎是等待间隔@50 个测试条目的 0.15，有空闲时间并且没有明显的负载延迟。我可能会减少到 0.10 @50 个条目。但是：我不知道如何扩展这个，没有加载足够的日志来获得 object.count！没有它，就无法扩展我的延迟，这意味着它可能（阅读：将）不适用于具有许多条目（200+）的大型日志！我有一个解决方法，但我将继续尝试掌握线程，以便找到解决方案。老实说，一旦我输入了 20 个条目，通知就永远不会及时触发@try。如果可以，请使用线程。由于未能及早这样做，我将自己逼入绝境，并为此付出了代价：我的应用程序需要大修，但我需要在我的腰带上有这个缺口，然后它才值得。越早实现线程加载对您的长期开发越好。与此同时，您也许可以使用我的解决方法来继续测试您应用程序的其他部分。

# objective-c - 如何在图像的两个角上做页面卷曲效果

> ID：13958224
> 
> 赞同：4
> 
> 时间：2012-12-19T17:53:55.460
> 
> 标签：objective-c, ios, user-interface, effects, page-curl

![在此处输入图像描述](../Images/7c75fafa1cb8eecb81dd6ba492ec87d6.png)

我正在尝试在我的应用程序中实现上面显示的效果，但不确定最佳实践是什么。我想要的效果是外框底角的卷曲。

是否更好：

1.  使用页面卷曲库，例如：[XBPageCurl](https://github.com/xissburg/XBPageCurl)
2.  使用图像
3.  使用其他效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:01:23.723

请参阅适用于 iOS 的 Curled View 类别：http: [//www.cocoacontrols.com/controls/curledviews-category](http://www.cocoacontrols.com/controls/curledviews-category)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:14:47.700

您可以使用[这些](http://graphicriver.net/item/32-realistic-modern-web-shadows/152144)阴影图像。

# java - 在应用程序服务器之外测试 Java 实体类（使用 JUnit）

> ID：13958226
> 
> 赞同：0
> 
> 时间：2012-12-19T17:54:17.213
> 
> 标签：java, jakarta-ee, jpa, orm, junit

我正在编写一些单元测试来测试一个实体类，并且我在 Eclipse 中运行这些测试。

在我的 persistence.xml 中，我引用了 GlassFish 中设置的数据源的 JNDI 名称。

从 Eclipse 运行单元测试时，出现以下异常：

```
Exception Description: Cannot acquire data source [JNDI-NAME-FROM-APP-SERVER]. 
```

这可能是因为我不在应用服务器的上下文中，如果是这样，解决这个问题的“最好”方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:51:39.020

使用您的测试数据库 url 和用户/密码将属性映射传递给 Persistence.createEntityManagerFactory(pu, properties)。

或者为 Java SE 测试定义一个单独的持久性单元。

# x3dom - 将属性显示为 x3dom 对象的表

> ID：13958229
> 
> 赞同：1
> 
> 时间：2012-12-19T17:54:32.040
> 
> 标签：x3dom

我从 X3DOM 开始，并试图找到一种方法来显示存储在客户端数据库中的 X3DOM 对象的属性数据。查询数据并获取 3D 对象并不是那么困难，但目前在单击该对象时无法在弹出窗口中获取其属性数据。如果有人能在这方面帮助我，我将不胜感激。我曾尝试为此寻找教程，但找不到任何教程。如果有人有他们认为有帮助的此类链接，请同时提供该链接。我自己也在寻找相关材料。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:14:41.157

# python - PyQT 在另一个正在运行的应用程序之上渲染

> ID：13958230
> 
> 赞同：2
> 
> 时间：2012-12-19T17:54:37.780
> 
> 标签：python, qt, pyqt

我对 PyQT 非常陌生，并试图找出是否可以在另一个（第三方非 QT）应用程序之上进行渲染。

例如说我想在应用程序上渲染我的 QT 应用程序有什么方法可以获取当前窗口的位置和尺寸以及 z-index（如果这不是正确的术语，请原谅）并在上面渲染我的 QT 应用程序?

# php - 在 Zend 框架中使用 ssl 连接到 mysql

> ID：13958238
> 
> 赞同：7
> 
> 时间：2012-12-19T17:55:12.113
> 
> 标签：php, mysql, zend-framework, ssl

使用此代码，我可以正常使用 zend 框架连接到 mysql：

```
resources.db.adapter = "Pdo_Mysql"
resources.db.params.host = "xx.xx.xx.xx"
resources.db.params.username = "test_user"
resources.db.params.password = "test_pass"
resources.db.params.dbname = "test_database"
resources.db.params.port="xxxx"

;parameters here for ssl connection?? 
```

在我的`Controller`：

```
 public function indexAction() {
        $config = new Zend_Config_Ini('/path/to/application.ini', 'development');
        $db = Zend_Db::factory($config->resources->db);
        $sql = 'SELECT * FROM test_table';
        $result = $db->fetchAll($sql);

        echo '<pre>';
        print_r($result);
    } 
```

现在的问题是我想使用**ssl**连接到 mysql ，但我还没有找到任何关于如何做到这一点的文档。

在数据库管理员的帮助下，我通过如下配置 ssl 连接，设法使用 Navicat 与服务器建立了连接： ![在此处输入图像描述](../Images/cde276517e3a2827bb76a492ae30e5bf.png)

现在的问题是如何使用php连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:58:10.643

您应该能够像这样指定驱动程序选项：

```
;PDO::MYSQL_ATTR_SSL_KEY
resources.db.params.driver_options.1010 = "/path/to/client-key.pem"
;PDO::MYSQL_ATTR_SSL_CERT
resources.db.params.driver_options.1011 = "/path/to/client-cert.pem"
;PDO::MYSQL_ATTR_SSL_CA
resources.db.params.driver_options.1012 = "/path/to/ca-cert.pem" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:59:28.270

从[http://php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)：

> [使用适当的PDO_MySQL 常量](http://php.net/manual/en/ref.pdo-mysql.php#pdo-mysql.constants)启用 SSL 支持，这相当于调用[» MySQL C API 函数 mysql_ssl_set()](http://dev.mysql.com/doc/mysql/en/mysql-ssl-set.html)。此外，不能使用 PDO::setAttribute 启用 SSL，因为连接已经存在。另请参阅有关[» 使用 SSL 连接到 MySQL](http://dev.mysql.com/doc/mysql/en/configuring-for-ssl.html)的 MySQL 文档。

另见： http: [//php.net/manual/en/ref.pdo-mysql.php#103501](http://php.net/manual/en/ref.pdo-mysql.php#103501)

您的 PHP 安装还需要 openssl 才能正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T16:52:36.353

我通过 SSL 对 Zend Db（适配器：Pdo_Mysql）的工作配置：

```
Array
(
    [host] => XX.XX.XX.XX
    [username] => nice-user
    [password] => ************
    [dbname] => database
    [driver_options] => Array
        (
            [1010] => /path/to/client-key.pem
            [1011] => /path/to/client-cert.pem
            [1012] => /path/to/ca-cert.pem
            [1013] => 
            [1014] => DHE-RSA-AES256-SHA
        )
) 
```

如果您的应用程序是基于 Web 的，请确保 Apache 用户（Debian 上的“www-data”）可以读取上面列出的证书文件，我假设它是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-24T14:44:08.393

要与 Zend 连接，请像这样设置您的 application.ini：

```
;PDO::MYSQL_ATTR_SSL_KEY = 1007
resources.db.params.driver_options.1007 = "/path/to/client-key.pem"
;PDO::MYSQL_ATTR_SSL_CERT = 1008
resources.db.params.driver_options.1008 = "/path/to/client-cert.pem"
;PDO::MYSQL_ATTR_SSL_CA = 1009
resources.db.params.driver_options.1009 = "/path/to/ca-cert.pem" 
```

# c# - Application.Run (new Main()) 处的 NullReferenceException

> ID：13958243
> 
> 赞同：2
> 
> 时间：2012-12-19T17:55:42.007
> 
> 标签：c#, winforms, visual-studio-2010, nullreferenceexception

我已经黔驴技穷了。我有一个应用程序喜欢在运行时崩溃几分钟`NullReferenceException`（对象引用未设置为对象的实例）。通常我可以处理得很好，但是当 Visual Studio 爆发时，它告诉我问题发生在`Application.Run(new Main());`. 我不知道该怎么做才能开始解决这个问题。调用堆栈没有任何帮助，因为它只是指向那条`Application.Run(new Main());`线。

我进入 Visual Studio ( `CTRL + ALT + E`) 的异常窗口并告诉它向我报告所有异常。我希望它会在我得到这个之前找到问题`NullReferenceException`。但没有运气。

我可以使用哪些工具来帮助查找此问题？

**编辑：**

这是 Visual Studio 报告的调用堆栈：

```
StackTrace:
       at GMap.NET.WindowsForms.GMapOverlay.DrawRoutes(Graphics g)
       at GMap.NET.WindowsForms.GMapOverlay.Render(Graphics g)
       at GMap.NET.WindowsForms.GMapControl.OnPaintOverlays(Graphics g)
       at GMap.NET.WindowsForms.GMapControl.OnPaint(PaintEventArgs e)
       at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer)
       at System.Windows.Forms.Control.WmPaint(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
       at System.Windows.Forms.UserControl.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Foxhunt.Client.Program.Main() in C:\Users\Michael\Documents\Visual Studio 2010\Projects\Foxhunt.Client\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:56:12.750

此异常实际上是在第三方的代码中引发的，但 Visual Studio 并未向您展示这一点。

查看异常的堆栈跟踪以查看完整堆栈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:21:02.983

您的代码中的某处可能存在未处理的异常，请尝试添加以下内容以查看它是否提供更多信息：

```
static void Main()
{
  Application.ThreadException += ThreadException;
  AppDomain.CurrentDomain.UnhandledException += UnhandledException;

  Application.EnableVisualStyles();
  Application.SetCompatibleTextRenderingDefault(false);
  Application.Run(new Main());
}

private static void ThreadException(object sender, ThreadExceptionEventArgs e)
{
  MessageBox.Show(e.Exception.ToString());
}

private static void UnhandledException(object sender, UnhandledExceptionEventArgs e)
{
  MessageBox.Show(e.ExceptionObject.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:09:05.483

这可能在几个地方。将您的代码更改为

```
var mf = new Main();
Application.Run(mf); 
```

如果第一行倒下，问题出在构造函数链的某个地方

如果是第二个，那么它在初始化链中的某个位置

开始在 Main() 类中的所有相关方法上敲打红点，并逐步跟踪，直到找到它。

# c# - 在 HTTP 客户端中使用公共代理服务器

> ID：13958249
> 
> 赞同：5
> 
> 时间：2012-12-19T17:56:01.057
> 
> 标签：c#, http, proxy

我正在尝试使用公共代理服务器 (http://www.unblockwebnow.info/) 将 HTTP 请求发送到目标站点，例如[http://stackoverflow.com](http://stackoverflow.com) :)

我的 HTTP 客户端具有以下架构：

```
string url = "http://stackoverflow.com";
HttpWebRequest HttpWRequest = (HttpWebRequest)WebRequest.Create(url);
HttpWRequest.Method = "GET";

WebProxy myProxy = new WebProxy();
myProxy.Address = new Uri("http://www.unblockwebnow.info/");
HttpWRequest.Proxy = myProxy;

HttpWebResponse HttpWResponse = (HttpWebResponse)HttpWRequest.GetResponse();
StreamReader sr = new StreamReader(HttpWResponse.GetResponseStream(), encoding);
var rawHTML = sr.ReadToEnd();
sr.Close(); 
```

执行 rawHTML 的代码后，我得到`"pageok -managed by puppet - hostingcms02 pageok"`

如果我注释掉`HttpWRequest.Proxy = myProxy;`行，我会得到网站内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:39:03.917

这似乎有效，但不适用于您的代理（不知道 unblockwebnow.info 的端口号）。在 URI 中的“:”后添加端口号

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string url = "http://stackoverflow.com";
            HttpWebRequest HttpWRequest = (HttpWebRequest)WebRequest.Create(url);
            HttpWRequest.Method = "GET";

            WebProxy myProxy = new WebProxy();

            //United States proxy, from http://www.hidemyass.com/proxy-list/
            myProxy.Address = new Uri("http://72.64.146.136:8080");
            HttpWRequest.Proxy = myProxy;

            HttpWebResponse HttpWResponse = (HttpWebResponse)HttpWRequest.GetResponse();
            StreamReader sr = new StreamReader(HttpWResponse.GetResponseStream(), true);
            var rawHTML = sr.ReadToEnd();
            sr.Close();

            Console.Out.WriteLine(rawHTML);
            Console.ReadKey();
        }
    }
} 
```

# c++ - mingw g++ 4.7.2 中未声明的 decltype

> ID：13958250
> 
> 赞同：4
> 
> 时间：2012-12-19T17:56:06.907
> 
> 标签：c++, c++11, g++, mingw

出于某种原因或其他原因，当尝试在 mingw 上的 G++ 中编译以下代码时

```
#include <iostream>
#include <string>
#include <cctype>

int main( int argc, char **argv )
{
    std::string s( "Hello, World!" );

    decltype( s.size(  ) ) punct_cnt = 0;

    for ( auto c : s )
    {
        if ( ispunct( c ) )
            ++punct_cnt;
    }

    std::cout << punct_cnt << " punctuation characters in " << s << std::endl;

    return 0;
} 
```

我收到以下错误

```
test.cpp: In function 'int main(int, char**)':
test.cpp:9:23: error: 'decltype' was not declared in this scope
test.cpp:9:25: error: expected ';' before 'punct_cnt'
test.cpp:11:13: error: 'c' does not name a type
test.cpp:17:2: error: expected ';' before 'std'
test.cpp:17:15: error: 'punct_cnt' was not declared in this scope
test.cpp:19:2: error: expected primary-expression before 'return'
test.cpp:19:2: error: expected ')' before 'return' 
```

`decltype`我已经检查过，g++ 编译器的版本是 4.7.2，除了更改为之外，任何人都知道如何解决`std::string::size_type`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T17:57:55.893

`decltype`是一个 c++11 功能。你需要这样调用 gcc

```
g++ -std=c++11 
```

# winforms - 当 AutoGenerateColumns 为 true 时，DataGridView 是否允许用户排序

> ID：13958252
> 
> 赞同：0
> 
> 时间：2012-12-19T17:56:16.937
> 
> 标签：winforms, datagridview

我想编写的代码如下所示：

```
IEnumerable<SomeModel> items = GetTheItems();

dataGridView1.AutoGenerateColumns = true;
dataGridView1.DataSource = BuildTheDataSource(items); 
```

数据网格将在标题上显示排序字形，并允许用户通过单击它们进行排序。

到目前为止，我最有希望的线索是[这个答案](https://stackoverflow.com/a/4217210/644812)提出的 SortableBindingList ，但该解决方案（和其他）似乎仅适用于手动创建的列。

**更新**

好吧，鸡蛋现在在我脸上！SortableBindingList 确实有效，但我犯了一个典型的错误：

```
void Bind(List<Model> items)
{
    this.items = new SortableBindingList<Model>(items);

    // oops! "items" is a List<T>... what I really wanted was
    // "this.items" which is a SortableBindingList<T>
    dataGridView1.DataSource = items;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:28:48.273

如果我理解你的问题。[SortableBindingList](http://www.timvw.be/wp-content/code/csharp/SortableBindingList.zip)的给定示例

因此是：

```
 this.dataGridView1.AutoGenerateColumns = false;

        this.ColumnId.DataPropertyName = "Id";
        this.ColumnFirstName.DataPropertyName = "FirstName";
        this.ColumnLastName.DataPropertyName = "LastName";
        this.ColumnBirthday.DataPropertyName = "Birthday";
        this.ColumnScore.DataPropertyName = "Score";

        List<Person> list = new List<Person>();
        list.Add(new Person(1, "Tim", "4", new DateTime(1980, 4, 30), 100.1));
        list.Add(new Person(2, "Amy", "2", new DateTime(1983, 1, 1), 200.2));
        list.Add(new Person(3, "Sarah", "3", new DateTime(1984, 1, 24), 300.3));
        list.Add(new Person(4, "Mike", "1", new DateTime(1988, 3, 21), 400.4));

        SortableBindingList<Person> persons = new SortableBindingList<Person>(list);

        this.dataGridView1.DataSource = persons; 
```

所以，从`List<Person>`到`SortableBindingList`列是在 的 中创建`Fields and Properties`的`Person`。

你的问题是什么意思？：

*but that solution (and others) seem to work only for manually created columns.*

**Update**

Try this one

```
 dataGridView1.AutoGenerateColumns = true;
        IEnumerable<SomeModel> items = GetTheItems();

        SortableBindingList<SomeModel> items = new SortableBindingList<SomeModel>(items.ToList()); 
        dataGridView1.DataSource = items; 
```

# jquery - 使用 .wrap() 函数

> ID：13958256
> 
> 赞同：0
> 
> 时间：2012-12-19T17:56:34.520
> 
> 标签：jquery, html

我正在尝试以以下方式编辑我网站的一些图像的代码：例如，我有：

```
<div id="slideshowContainer473">
<img src="src_image1" alt="image1" title="image1" />
<img src="src_image2" alt="image2" title="image2" />
<img src="src_image3" alt="image3" title="image3" />
</div> 
```

对于每个图像，我想要的是获得：

```
<a href="src_image1" rel="lightbox"><img src="src_image1" alt="image1" title="image1" /></a> 
```

也就是说，通过 jquery，**给 href 与 src 相同的值**，我还需要添加 rel="lightbox" 因为我认为使用[http://lokeshdhakar.com/projects/lightbox/](http://lokeshdhakar.com/projects/lightbox/)

我想我可以得到它，使用 .wrap() 我认为 .each() 也是需要的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:01:53.130

尝试这个

```
$("div#slideshowContainer473 img").wrap(function(){
    return "<a href=\"" + this.src + "\" rel=\"lightbox\" />";
}); 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:03:00.980

尝试这个

```
$('img').wrap(function() {
    return $('<a>', {
        src: $(this).attr('src'),
        rel: 'lightbox'
    })
})​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ktvpA/1/)**

# vmware - 在 solaris 10 globalzone 上安装 clearcase

> ID：13958258
> 
> 赞同：1
> 
> 时间：2012-12-19T17:56:39.423
> 
> 标签：vmware, clearcase, virtualization, solaris-10

我们正在迁移到新的数据中心，参与帮助我们迁移的公司建议我们使用虚拟化并在其中一个虚拟环境中安装 ClearCase。我对虚拟化的经验是最低限度的，在这种情况下，我正在尝试通读 Rational 提供的文档。

如果有人已经在使用全局区域和非全局区域，您能否向我解释一下在不损失任何性能的情况下配置它的正确方法。根据文档，我们希望在全局区域上安装 ClearCase 而不是在非全局区域上安装它，因为没有真正的好处或性能提升，而是更多的管理开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:06:23.157

根据我过去在 Solaris 上的安装，您*必须*：

*   将其安装在全局区域（以便 mvfs 部分正确安装并可供所有 ngz 使用）
*   将它安装在您需要 ClearCase 的非全局区域上

在 ngz 中安装期间，ClearCase 将无法访问它需要的所有路径，因此第一次安装在全局区域上。

例如，请参阅 CC8.0：“[安装 Rational ClearCase 以支持非全局区域。](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.platforms.doc/topics/t_ux_sun5_sol10_ngz_install.htm) ”

> 在全局区域上安装和配置 Rational ClearCase，然后在任何非全局区域上安装和配置它。
> 如果您计划在非全局区域上运行动态视图，则必须在该计算机的全局区域上安装 MVFS。具体来说，这意味着在全局区域上安装 Rational ClearCase 时，您不能选择 ClearCase Server-only Installation 选项。

只要您为每个 ngz 保留适当数量的资源（磁盘、内存），我从来没有因为在 ngz 中而缺乏性能。

我从来没有只在全局区域中使用过 ClearCase，因为我需要在每个 ngz 中独立地启动/停止 ClearCase。因此，我要求在 ngz 中拥有 CC，而不仅仅是在全局区域中。

# android - 我可以通过移动网站获取 Android 设备 ID 吗？

> ID：13958260
> 
> 赞同：10
> 
> 时间：2012-12-19T17:56:39.310
> 
> 标签：android, uniqueidentifier, telephony, mac-address

是否可以通过移动网站获取设备的电话 ID、MAC 地址、序列号和/或 Android ID？

也就是说，不是通过可下载的应用程序，而是通过用户在移动设备上的浏览器中访问的链接？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:59:58.907

不，这是不可能的。即使对于本机应用程序，设备身份信息也受到`READ_PHONE_STATE`许可的保护。

由于网站无法请求权限，因此您无法在应用程序之外检索此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:07:42.360

你说你需要一个网站上的唯一（ish）ID。

查看 UserAgents：[http](http://en.wikipedia.org/wiki/User_agent) ://en.wikipedia.org/wiki/User_agent ，它会告诉你什么样的设备/浏览器正在查看你的网页

您还可以检索用户的 IP 地址，这可能会在未来对您网站的请求中发生变化。

您也可以尝试存储 cookie，但用户可以随时删除他们的 cookie。

关于如何获得这些的细节，这取决于你的网站是用什么构建的。

# c# - ClosedXML 区分大小写的列标题

> ID：13958262
> 
> 赞同：3
> 
> 时间：2012-12-19T17:56:46.997
> 
> 标签：c#, excel, closedxml

例如，我有这样的代码：

```
DataTable table = new DataTable("Name");
table.Columns.Add("CASESENSITIVE", typeof(string));
table.Columns.Add("casesensitive", typeof(string));
table.Rows.Add("Indocin", "David");
table.Rows.Add("Enebrel", "Sam");

var wb = new XLWorkbook();
wb.Worksheets.Add(table);
wb.SaveAs("Excel.xlsx"); 
```

当我打开刚刚创建的文件时，我看到警报：“Excel 在 Excel.xlsx 中发现了不可读的内容 ....”

如果我确认此警报 excel 会自动为“区分大小写”列添加“2”。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T03:59:06.987

我相信即使大小写不同，您也不能有两个具有相同名称的列。ClosedXML 可能不是在寻找这种情况——因此您可以下载 ClosedXML 的源代码并更新它，或者在您的代码中您可以自己检查这种情况并确保它不会发生（例如，通过在任何潜在的重复后附加数字列名称，直到它们不再重复，等等）。

# sql-server - DECLARE 语句中的子查询带回多个值

> ID：13958264
> 
> 赞同：1
> 
> 时间：2012-12-19T17:57:01.187
> 
> 标签：sql-server, stored-procedures, declare

我有下面需要帮助的存储过程。其目的是找出暂存数据库和生产数据库之间的差异。当它发现差异时，存储过程将使用正确的信息更新生产数据库。问题是有时数据库之间存在不止一个差异。存储过程一次只能处理 DB 之间的一个差异。我希望存储过程能够处理它发现的尽可能多的差异。如果它一次只能处理一个差异，则存储过程将需要持续运行。非常感谢任何想法或帮助。

```
 `BEGIN TRANSACTION

            DECLARE @FILENUM NVARCHAR(30)

            SET @FILENUM = ( SELECT TOP 1 B.ID FROM DBO.ABC_FILE_NUMBER F WITH ( NOLOCK )

                            JOIN DBO.REL_PRIMARY_NUMBER R WITH ( NOLOCK ) ON F.ID = R.FILE_NUMBER_ID

                            JOIN DBO.ABC_PRIMARY_NUMBER P WITH ( NOLOCK ) ON R.PRIMARY_NUMBER_ID = P.ID

                            JOIN DBO.STAGINGDATA S WITH ( NOLOCK ) ON F.FILE_NUMBER_ALIAS = S.ID

                            WHERE S.PRIMARYNUMBER <> P.PRIMARY_NUMBER_ALIAS)

            DECLARE @PRIMNUM NVARCHAR(30)

            SET @PRIMNUM = ( SELECT DISTINCT P.ID FROM DBO.STAGINGDATA S WITH ( NOLOCK )

                            JOIN DBO.ABC_PRIMARY_NUMBER P WITH ( NOLOCK ) ON P.PRIMARY_NUMBER_ALIAS = S.PRIMARYNUMBER

                            WHERE S.ID = ( SELECT F.FILE_NUMBER_ALIAS FROM ABC_FILE_NUMBER WHERE ID = @FILENUM))

            UPDATE  DBO.REL_PRIMARY_NUMBER
            SET     PRIMARY_NUMBER_ID = @PRIMNUM
            WHERE   FILE_NUMBER_ID = @FILENUM

            UPDATE  DBO.ABC_WORKSPACE
            SET     PRIMARY_NUMBER_ID = @PRIMNUM
            WHERE   FILE_NUMBER_ID = @FILENUM

            UPDATE  DBO.ABC_DOCUMENT
            SET     PRIMARY_NUMBER_ID = @PRIMNUM
            WHERE   FILE_NUMBER_ID  = @FILENUM

            UPDATE  DBO.ABC_FILE_NUMBER
            SET     MODIFIED_TIME = GETDATE(), MODIFIED_BY_ID = '21403'
            WHERE   FILE_NUMBER_ID = @FILENUM

            COMMIT` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:10:19.983

您可以如下构建一个循环来“遍历”每个循环，`@FILENUM`并使用您现在使用的相同脚本完成工作。更好的选择是重写每个 DML 操作，以基于集合的方式执行工作并立即对所有行进行操作，但这可能不是您的选择，具体取决于您正在执行的其他操作。

这是一个循环遍历每个 FileNum 的简单设置：

```
declare @Process table (ProcessId int identity(1,1), FileNum nvarchar(30));

-- stage *all* the fileNums (perhaps in some order?)
insert into @Process (FileNum)
    SELECT B.ID FROM DBO.ABC_FILE_NUMBER F WITH ( NOLOCK )
    JOIN DBO.REL_PRIMARY_NUMBER R WITH ( NOLOCK ) ON F.ID = R.FILE_NUMBER_I
    JOIN DBO.ABC_PRIMARY_NUMBER P WITH ( NOLOCK ) ON R.PRIMARY_NUMBER_ID = P.ID
    JOIN DBO.STAGINGDATA S WITH ( NOLOCK ) ON F.FILE_NUMBER_ALIAS = S.ID
    WHERE S.PRIMARYNUMBER <> P.PRIMARY_NUMBER_ALIAS

declare @ProcessId int,
        @FileNum nvarchar(30);

select @ProcessId = min(ProcessId) from @Process;

while @ProcessId is not null
begin

    select @FileNum = FileNum from @Process where ProcessId = @ProcessId;

    print 'Working on FileNum: ' + @FileNum;
    /*
        do your work here
    */

    select @ProcessId = min(ProcessId) from @Process where ProcessId > @ProcessId;

end 
```

基于集合的操作看起来像：

```
declare @Stage table (FileNum nvarchar(30), PrimNum nvarchar(30) primary key  (FileNum));

-- stage the (FileNum:PrimNum) dataset
insert into @Stage (FileNum)
    select FileNum, PrimNum from dbo.yourTables where yourColumn ...

--now perform set based updates
UPDATE  rpn
SET     PRIMARY_NUMBER_ID = s.PRIMNUM
from    @Stage s 
join    DBO.REL_PRIMARY_NUMBER rpn on
        s.FileNum = rpn.FILE_NUMBER_ID

UPDATE  aw
SET     PRIMARY_NUMBER_ID = s.PRIMNUM
from    @Stage s
join    DBO.ABC_WORKSPACE aw on
        s.FileNum = aw.FILE_NUMBER_ID

-- and so on... 
```

# html - 使按钮元素填充可用宽度

> ID：13958266
> 
> 赞同：5
> 
> 时间：2012-12-19T17:57:03.010
> 
> 标签：html, css, css-float

这个网站上有很多“填充可用空间”的问题，但我的问题有点特殊，因为我已经找到了解决方案，但它不适用于按钮。我想了解为什么这对按钮不起作用，以及如何使它起作用。我想这只是我需要覆盖的按钮元素的一些浏览器样式。

我在一个（固定宽度，如果重要的话）包装div中有两个浮动元素。右边的元素有固定的宽度，左边的元素应该占据剩下的任何宽度。

我可以通过将右侧元素设置为具有固定宽度和`float: right`，并让左侧元素不使用任何特殊样式来实现这一点。这非常适合 div。它也适用于跨度，但前提是我设置`display: block`它们。对于按钮，我根本无法让它工作。我尝试了 block、inline-block 以及`width`我在 MDN 上可以找到的每个晦涩的值。

[http://jsfiddle.net/wjFbD/2/](http://jsfiddle.net/wjFbD/2/)

* * *

我不知道为什么我没有想到早点将按钮包装在 div 中。这是我想出的：

[http://jsfiddle.net/SkczB/2/](http://jsfiddle.net/SkczB/2/)

这涉及到`overflow: hidden` [盒子格式化上下文技巧](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)（我怀疑它会在这里出现，但不太清楚该放在哪里）。强调：

1.  这两个按钮被包裹在带有类 buttonWrapper 的 div 中。
2.  这些 div 是根据我在上面第三段中概述的技巧进行格式化的。右 div 具有 float: right 和固定宽度，左 div 没有特殊样式。
3.  我们现在应用盒子格式化上下文技巧。左边的 div 被赋予溢出：隐藏，这会导致它为右边浮动的 div 腾出空间。
4.  我们现在可以对右边的 div 应用左边距，并改变它的宽度，左边的 div 将永远是正确的大小。
5.  div 为我们创建了所需的“填充可用宽度”效果，现在我们只需将按钮放在 div 内并给它们 100% 的高度和宽度。
6.  如果它是您想要具有固定宽度的左按钮，则基本上重复上述步骤，左右交换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:42:01.913

这可能不是您在这里寻找的东西，但这里有一个选项，似乎用您的小提琴为我解决了问题。

如果您有一个包含元素的固定宽度 div，您可以在按钮 A 设置为填充后拆分获取 div 的剩余宽度，例如 100 像素，然后将按钮 2 设置为剩余大小.

或者，另一种选择是以 20%/80%、30%/70% 之类的百分比运行它。这是一个小提琴，它可以在底部的按钮包装器上实现您正在寻找的东西。我为它应用了特定的类，并在每个按钮周围添加了 div 以获得更多控制。按钮包装器 div 分别设置为 20% 和 80%，而按钮设置为填充 100% 的包含空间。

这是修改后的小提琴和修改后的 HTML/CSS。希望它对您正在寻找的内容有所帮助...

[http://jsfiddle.net/wjFbD/7/](http://jsfiddle.net/wjFbD/7/)

HTML

```
<div class="btnWrapper">
    <div class="buttonWrapperB">
    <button class="left">
        button Left
    </button>
    </div>
    <div class="buttonWrapperA">
    <button class="right">
        button Right
    </button>
    </div>
</div>​ 
```

CSS

```
.btnWrapper
{
    width: 100%;
    background-color: #FEE;
    border: 2px solid black;
    margin-bottom: 10px;
    height: 50px;
}

.buttonWrapperB{
    float: left;
    width: 20%;
}
.buttonWrapperB button{
    width: 100%;
    height: 50px;
}

.buttonWrapperA{
    float:left;
    width: 80%;            
}

.buttonWrapperA button{
    width: 100%;
    height: 50px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:39:32.903

我调整了`.right`元素的背景不透明度，以查看它们下方发生了什么。看起来`.left`元素不仅占据了剩余空间——它们还占据了整行。奇怪的是，这些元素中的文本居中，就好像它只占用了剩余的空间。

如果您希望按钮同样适用，似乎唯一的解决方案涉及一点技巧。按钮确实相当复杂。

```
button.left {
  margin: 0;
  position: absolute; /*this seems to be the only way to get the button to stay on the same row - floating it left won't even work*/
  z-index: -1; /*hides the "overflowing" part below the right button*/
  width: 100%; /*make the button stretch to the full width of the row*/
  padding-right: 400px; /*add a padding-right hack so that text will be centered correctly - should be same size as fixed width .right element*/
  padding-left: 0;
  display: block;

} 
```

请参阅更新的小提琴：http: [//jsfiddle.net/wjFbD/6/](http://jsfiddle.net/wjFbD/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T14:19:20.777

从...开始

> 一个元素具有固定宽度，而另一个元素应占据剩余的任何宽度。

这是我的一般解决方案：

[![在此处输入图像描述](../Images/b6d4819f6b02f64c641a6ac3c68d4c6f.png)](https://i.stack.imgur.com/Xv8Ej.png)

```
<div class="container">
    <div class="two">125&thinsp;€&lt;/div>
    <div class="one">my favorite provider</div>
</div>

(stylus syntax, in your mind just add {,},;)

.one // red
    border none
    height auto

    overflow hidden
    white-space nowrap
    text-overflow ellipsis
.two // green
    float left
    white-space nowrap
    text-overflow ellipsis 
```

您可以将一个绿色的东西设置为固定宽度，但实际上，您甚至不必这样做！事情很顺利。如果 String get 太长，它会用省略号截断。

`<button>`当其中一个是 a而不是 a时，事情会变得有点复杂`<div>`（我不知道哪个样式属性区分了它们，所以我需要样式化掉），但无论如何，使用包装器，这也可以：

[![在此处输入图像描述](../Images/9c6987cbf588c2675249c5f65ed8145a.png)](https://i.stack.imgur.com/r9WDP.png)

→[在此处查看完整的 codepen](https://codepen.io/fnocke/pen/jaPmpK?editors=1100)。（感谢反馈。）

# php - 为什么 PHP 的内置函数使用常量而不是字符串作为参数？

> ID：13958269
> 
> 赞同：6
> 
> 时间：2012-12-19T17:57:21.643
> 
> 标签：php

我注意到 PHP 的内部函数从不将字符串用于预定义或限制值，只使用常量。

[例如](http://hu2.php.net/manual/en/function.str-pad.php)：

> **垫型**：
> 
> 可选参数 pad_type 可以是 STR_PAD_RIGHT、STR_PAD_LEFT 或 STR_PAD_BOTH。如果未指定 pad_type，则假定为 STR_PAD_RIGHT。

这里不使用字符串作为参数的原因是什么？

`str_pad($test, 10, 0, 'left')`似乎比简单得多`str_pad( $test, 10, 0, STR_PAD_LEFT)`

（这更像是一个元问题。我希望可以在这里问。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:01:11.367

输入字符串时更容易出错。使用未定义的常量会引发警告。这不仅仅是 PHP 的事情。常规 API 函数（即操作系统的）通常也使用数字常量作为这样的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:01:33.160

他们使用`int`.. 并且由于区分大小写、拼写错误、解析字符串、更适合 IDE、错误等，它更有效。

如果您不喜欢常量，则可以使用 int 值

```
 str_pad($test, 10, 0, 0) == str_pad( $test, 10, 0, STR_PAD_LEFT) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:03:32.867

请注意，`$pad_type`参数中的类型实际上是`int`。传递整数比传递（然后比较）字符串要快得多。因此，您无需将数字传递给函数来告诉它要做什么，而是传递相应的常量，从而使您的代码更清晰。如果 PHP 开发人员想要将其更改为传递字符串而不是整数，只要您使用常量，他们就可以在不破坏任何代码的情况下做到这一点。

# php - 带有 Google Maps API 的大 Foreach 循环

> ID：13958270
> 
> 赞同：2
> 
> 时间：2012-12-19T17:57:29.763
> 
> 标签：php, mysql, google-maps-api-3

我对 foreach() 循环和 Google Maps API 类有一个更大的问题。

目前我的 MySQL 表中有 1500 个数据集，我按“纬度为空”对它们进行排序。然后我想对它们进行 foreach() 并每次调用 Google Maps API (KM6_Geo) 并将新的地理编码保存到 MySQL 数据库中。

但是：在大约 250/300 次呼叫/更新后，我的服务器回复“超时”。

现在这是我当前的脚本：

```
    foreach(KM6_Addresses::getGeoCodes() as $item):

        $geocode = KM6_Geo::generate($item['street'].' '.$item['zipcode'].' '.$item['city']);
        $数据 = 数组（
            'lat' => $geocode['lat'],
            'lng' => $geocode['lon']

        );

        $where = array('company_id' => $item['company_id']);        
        KM6_Addresses::updateGeoCode($data,$where);
    结束；

```

现在我的问题：我如何使用包或类似的东西进行 foreach()。所以我不尝试更新 1500 个数据集。

也许有人可以帮助我。

谢谢！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:05:12.520

您似乎已达到 API 配额。

这是由给定日期内来自同一 IP 的过多请求或一段时间内过多的请求触发的。

我会考虑做以下事情。

尝试每 50-100 个数据集暂停一次，看看这是否有助于第一组配额。

另一个是查看可能具有更高配额的 API Premier。

检查[此](https://stackoverflow.com/questions/3923086/geocoding-5000-addresses-in-php-script)内容以获取同一行的另一个响应。

- 编辑 -

我当时确实遇到过[这个](https://developers.google.com/maps/documentation/business/articles/usage_limits)。

如果您能够了解状态代码，如果您获得 TOO_MANY_Queries，那么在他们的 Python 代码中，他们会执行 2.0 秒的延迟。

也许正在考虑做类似的事情，在每个 ForEach 之间应用 2 秒的延迟，或者循环直到达到限制，sleep(2) 然后恢复，看看是否有效。

这里最重要的是你不想被列入黑名单。你需要在 10-30 秒内跑完所有 1500 台吗？或者，如果您在每个之间实施 2 秒的延迟，您将看到 3000 秒，或者您的代码在 50 分钟内完成，并且在 24 小时内您的配额中仍有 1,000 个调用。

我强烈建议在 24 小时内建立保护措施以防止接近 2500 限制。

# javascript - XMLHttpRequest 身份验证

> ID：13958278
> 
> 赞同：0
> 
> 时间：2012-12-19T17:57:56.890
> 
> 标签：javascript, xmlhttprequest

如果用户已经通过服务器进行了身份验证，我对您将如何确定使用 XMLHttpRequest 感兴趣？我可以发送我的请求并返回数据，但如果我刷新页面并再次请求数据，即使会话超时尚未过期，我的登录表单也会触发。

有什么想法吗？

谢谢克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:20:06.013

这里有几个选项。通常，服务会以登录表单响应任何未经身份验证的请求。因此，如果您正在发出一个获取 JSON 的 AJAX 请求，您只需查看响应的内容类型 ala `xhr.getResponseHeader('Content-Type')`。经过身份验证的响应应该类似于`application/json`，而未经身份验证的响应将是`text/html`（或类似的东西。）

但是...您还可以查看`document.cookie`用户是否定义了会话 cookie。虽然这不是一个防弹检查（cookie 可能无效，或者服务器可能有额外的检查仍然可能使请求失败），但这并不是一个不合理的检查。

# c++ - 使用 do-while 循环和 if-else 语句进行双重验证

> ID：13958279
> 
> 赞同：0
> 
> 时间：2012-12-19T17:57:57.547
> 
> 标签：c++, if-statement, while-loop, do-while

我需要弄清楚如何验证 2 个条件。

1.  检查之前的号码是否已播放。
2.  检查数字是否在 1 到 9 之间。

无论哪种情况，它都应该循环回到开头。在第一种情况下，它不应该运行，直到用户输入一个尚未播放的数字。

```
do
{
  cout << "Interesting move, What is your next choice?: ";
  cin >> play;
  Pused[1] = play;

  if(play != Pused[0] && play != cantuse[0] && play != cantuse[1] )
  {
    switch(play)
    {
      default:
        cout << "Your choice is incorrect\n\n";
        break;
    }   
  }
}while(play != 1 && play != 2 && play != 3 && play != 4
    && play != 5 && play != 6 && play != 7 && play != 8 && play != 9);

Dis_board(board); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:21:40.900

我喜欢使用无限循环+`break`语句的组合，而不是 do-while 循环，如下所示：

```
cout << "What is your first choice? ";
while (true)
{
    // Input the choice, including validation

    // Do the move

    if (game_over)
        break;

    cout << "Interesting move; what is your next choice? ";
} 
```

在上面的代码中，两个注释代表代码，它本身可能包含循环。为了减少混淆，您可能希望将此代码填充到单独的函数中。例如，输入选项：

```
while (true)
{
    cin >> play;
    bool is_illegal =
        play == cantuse[0] ||
        play == cantuse[1] ||
        play < 1 ||
        play > 9;
    if (is_llegal)
        cout << "Your choice is incorrect; please enter again: ";
    else
        break;
} 
```

注意：要实现对用户错误的良好处理，您还必须考虑用户输入废话而不是数字的情况；查找`istream::ignore`并`ios::clear`为此。

# intuit-partner-platform - 是否可以在 IPP QBO 中对客户名称进行通配符搜索？

> ID：13958282
> 
> 赞同：1
> 
> 时间：2012-12-19T17:58:02.660
> 
> 标签：intuit-partner-platform, quickbooks-online

[这里](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Customer)和[这里](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects#Filtering)的文档似乎是说我只能过滤与“支持的字符串运算符：EQUALS：”完全匹配的字符串

我正在使用 IPP .NET Devkit，所以我的搜索看起来像这样：

```
CustomerQuery qboCustomerQuery = new CustomerQuery();
qboCustomerQuery.Name = "Southwest";
List<Customer> customers = qboCustomerQuery.ExecuteQuery<Customer>(context).ToList<Customer>(); 
```

但是我需要找到一个包含“西南”的客户名称。我唯一的选择真的是在本地缓存客户名称并搜索我自己的数据库吗？这看起来很愚蠢。请告诉我，我是个白痴，而且这个系统并没有这么明显的坏掉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:43:16.097

不幸的是，Intuit Anywhere API 目前真的很糟糕。:-(

以下是字符串支持的过滤器操作列表： [https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects#Supported_Filter_Operators](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects#Supported_Filter_Operators)

请注意，唯一受支持的是：

```
:EQUALS: 
```

哎呀！

幸运的是，Intuit 正在努力开发 v3 API。有传言说 v3 将支持更好的过滤。

不幸的是，Intuit 正在做他们平常的事情，不再让开发人员参与到 v3 开发过程中，所以在 v3 真正发布之前，我们真的不知道 v3 是否会很糟糕。*叹息*你会注意到[关于 v3 数据服务的最后一次更新](https://idnforums.intuit.com/messageview.aspx?catid=91&threadid=17297&enterthread=y&STARTPAGE=2)是在 10 月由 Wei 发布的......不幸的是 Wei 甚至不再在 Intuit 的那个团队中，所以谁知道状态是什么，或者即使有任何人在工作Intuit 不再提供 v3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:23:27.440

我不得不做类似的事情。可悲的是，正如基思指出的那样，它尚未得到支持。我最终做的是回退到 LINQ。

我阅读了所有客户，然后使用 LINQ 进行过滤。这使我不必从数据库中写入和读取，并通过将数据保存在内存中来加快速度。

所以，现在，试试 LINQ。希望 v3 出来时我们能得到更好的解决方案。

# c++ - 迭代向量如何检查我在哪个位置？

> ID：13958283
> 
> 赞同：1
> 
> 时间：2012-12-19T17:58:03.727
> 
> 标签：c++, vector, iteration

例子：

```
for (vector<string>::reverse_iterator it = myV.rbegin(); it != myV.rend(); ++it)
{
  cout << "current value is: " << *it << ", and current position is: " << /*  */ << endl;
} 
```

我知道我可以检查向量中有多少项目，做一个计数器，等等。但我想知道是否有一种更直接的方法来检查当前索引，而无需断言我得到了正确的向量长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:59:48.637

矢量迭代器支持[差异](http://www.cplusplus.com/reference/iterator/reverse_iterator/operator-/)，您可以从 rbegin 中减去当前迭代器。

* * *

*编辑*

如评论中所述，并非所有迭代器都支持 operator- 因此必须使用 std::distance 。但是，我不建议这样做，因为 std::distance 会导致非随机访问的迭代器产生线性时间性能成本，而如果您使用`it - begin()`编译器会告诉您这不起作用，然后您可以在必要时使用距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:00:27.033

从当前迭代器中减去`std::vector<T>::begin()`（或在您的情况下）。`rbegin()`这是一个小例子：

```
#include <vector>
#include <iostream>

int main()
{
    std::vector<int> x;
    x.push_back(1);
    x.push_back(1);
    x.push_back(3);

    std::cout << "Elements: " << x.end() - x.begin();
    std::cout << "R-Elements: " << x.rend() - x.rbegin();
    return 0;    
} 
```

正如上面一个非常棒的评论所指出的，`std::distance`可能是一个更好的选择。 `std::distance`支持常数时间的随机访问迭代器，也支持线性时间的其他类别的迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:11:14.257

迭代器用于允许编写对容器选择不变的通用算法。我在[STL Book](https://rads.stackoverflow.com/amzn/click/com/0201379260)中读到这很棒，但可能会导致性能下降，因为有时容器的成员函数针对容器进行了优化，并且比依赖迭代器的通用代码运行得更快。在这种情况下，如果您正在处理一个大向量，您将调用 std::distance，虽然常量不是必需的。如果你知道你将在这个算法中使用 oly 向量，你可能会认识到它支持直接访问运算符“[]”并编写如下内容：

```
#include <vector>
#include <iostream>

using namespace std;

int main ()
{

    vector<int> myV;

    for (int I = 0; I < 100; ++I)
    {
        myV.push_back(I); 
    }

    for (int I = 0; I < myV.size(); ++I)
    {
        cout << "current value is: " << myV[I] 
            << ", and current position is: " << I << endl;
    }

    return 0; 
} 
```

如果您对速度感兴趣，您可以随时尝试此处提出的不同答案并测量执行时间。这可能取决于矢量大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:02:16.087

保留一个计数器：

```
for (vector<string>::reverse_iterator it = myV.rbegin(), 
                                 int pos = myV.size; 
     it != myV.rend(), 
         --pos; 
     ++it)
{
    cout << "current value is: " << *it << ", and current position is: " << pos << endl;
} 
```

# delphi - 如何将非绑定列添加到 DevExpress DB QuantumGrid

> ID：13958291
> 
> 赞同：3
> 
> 时间：2012-12-19T17:58:34.803
> 
> 标签：delphi, devexpress, delphi-xe2, vcl, unidac

我正在使用这些组件：

```
UniDac for connection to mysql database
DevExpress for QuantumGrid 
```

IDE：

```
Embarcadero Rad Studio XE2 
```

我有一个具有一个级别的 cxGrid 组件和一个指定为级别视图的 cxGrid1DBTableView。我可以从我的数据库中获取数据并在网格中对其进行编辑。我想添加一个不在绑定数据集中的列。当我将**Column 属性**值指定为**CheckBox**时，我可以看到该列，但我无法通过单击将值从未选中更改为选中。该字段没有分配给它的**DataBinding 。**我尝试了其他类型的属性，但都相同，我无法更改网格中的行值。

这几天我一直在寻找解决这个问题的方法，所以我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:33:35.293

您是否尝试添加一个后面没有数据库字段的复选框项目？我的一张表格上有这个。

除了将 Properties 设置为“Checkbox”之外，您还需要将 DataBinding -> ValueType 设置为“Boolean”。DataBinding->FieldName 可以留空。

要访问这些值或更改它们的默认值，您可以像这样使用 DataController：

```
View.DataController.Values[i, CheckBoxFieldIndex] := true; 
```

另外你需要设置

```
DataController.DataModeController.SmartRefresh := true; 
```

要设置该选项，您还需要为控制器定义一个 KeyField (DataController.KeyFieldNames)

将 SmartRefresh 设置为 true 将阻止网格尝试从基础数据集中获取更新的值。您需要防止刷新，否则非绑定列的值将被设置回 Null。这对您更新数据集的方式有一些限制。除非您明确刷新网格，否则对代码中的数据所做的任何更改都不会反映在网格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T13:41:47.710

您还必须使用数据集字段之一填充字段**View.DataController.KeyFieldNames 。**至少我在 Delphi 7 中需要它。

# mvvm - 淘汰赛 2：如何延迟可观察对象。

> ID：13958294
> 
> 赞同：2
> 
> 时间：2012-12-19T17:58:42.807
> 
> 标签：mvvm, observer-pattern, knockout-2.0

嗨，我在淘汰赛 2 中有一个问题：我想做后期绑定，因为我正在通过 jQuery 添加数据绑定

```
$("#button1").on ("click", function() {
        lateBinding = $("#lateBindingElem);
        if (lateBinding.length) {
           lateBinding.attr("data-bind", "text: obs");
        }
     }
}); 
```

后期绑定是动态生成的 html。

我已经创建了一个视图模型，名为 MyViewModel。

我想在现有视图模型中动态添加另一个属性或另一个可观察对象（可以计算或未计算）？我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-02T16:32:42.430

希望您已经在其他地方找到了答案（7个月前：D），但是由于我偶然发现了这个问题，希望找到类似问题的解决方案，我不妨尝试给出一个答案其他人调查它。这不会让您操作已绑定到模型的元素的绑定，但允许您在给定点暂停绑定并将新创建的元素绑定到当前或不同的视图模型。

建立在 Ryan Niemeyers**[关于如何停止绑定的精彩文章](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)**和附带的[jsfiddle 示例](http://jsfiddle.net/rniemeyer/fjj7q/)的基础上，是一个**[小演示](http://jsfiddle.net/jaakkytt/HHUUf/)**，它向 dom 添加新的输入元素并将它们绑定到不同的视图模型。

因为一旦您需要使用自定义绑定在某个点停止向下绑定，您只能绑定 dom 的一部分。

```
ko.bindingHandlers.stopBinding = {
   init: function() {
      return { controlsDescendantBindings: true };
   }        
}; 
```

将其分配给包装器

```
<div data-bind="stopBinding: true" id="addNewContentHere"></div> 
```

并插入你的新元素

```
function addInput(){
   var data=$('<input type="input" data-bind="value: newInput" />');
   ko.applyBindings(MyViewModel, data[0]);
   $('#addNewContentHere').append(data);
}; 
```

希望它有一些用处:)

# php - PHP中的cURL下载进度

> ID：13958303
> 
> 赞同：19
> 
> 时间：2012-12-19T17:59:23.783
> 
> 标签：php, curl

我对 cURL 很陌生，所以我已经为此苦苦挣扎了好几个小时。我正在尝试使用 cURL 在 iframe 中下载网站的源代码，并在加载时显示加载了多少。到目前为止，我已经成功下载了源代码，但没有显示加载进度。你能解释一下如何显示下载进度吗？如果没有 cURL，我会逐字节读取文件，然后将下载的字节总数除以文件的总大小。由于 cURL 将源作为一个整体读取，因此如何在 cURL 中完成此操作？（至少我认为这是唯一的方法，不确定）这是我到目前为止所得到的：

```
/* Download source */
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $adress);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
$html = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-19T18:17:53.040

你需要的是

```
<?php
ob_start();

echo "<pre>";
echo "Loading ...";

ob_flush();
flush();

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://stackoverflow.com");
//curl_setopt($ch, CURLOPT_BUFFERSIZE,128);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PROGRESSFUNCTION, 'progress');
curl_setopt($ch, CURLOPT_NOPROGRESS, false); // needed to make progress function work
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
$html = curl_exec($ch);
curl_close($ch);

function progress($resource,$download_size, $downloaded, $upload_size, $uploaded)
{
    if($download_size > 0)
         echo $downloaded / $download_size  * 100;
    ob_flush();
    flush();
    sleep(1); // just to see effect
}

echo "Done";
ob_flush();
flush();

?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T18:11:25.997

这是回调在 C 中的外观：

```
typedef int (*curl_progress_callback)(void *clientp,
                                      double dltotal,
                                      double dlnow,
                                      double ultotal,
                                      double ulnow); 
```

可能在 PHP 中它应该看起来像

```
curl_progress_callback($clientp, $dltotal, $dlnow, $ultotal, $ulnow) 
```

因此，假设您有 page.html，它在 iframe 中加载了一个 .php 文件。

在您的 php 脚本中，您将需要以下函数：

```
curl_setopt($curl, CURLOPT_PROGRESSFUNCTION, 'curl_progress_callback');    
curl_setopt($curl, CURLOPT_BUFFERSIZE,64000);    
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); 
```

这应该会产生类似于以下内容的输出：

```
0
0.1
0.2
0.2
0.3
0.4
... 
```

然后在 iframe 页面上，您将有一个进度条

```
<div id="progress-bar">
    <div id="progress">0%</div>
</div> 
```

CSS会是这样的

```
#progress-bar {
    width: 200px;
    padding: 2px;
    border: 2px solid #aaa;
    background: #fff;
}

#progress {
    background: #000;
    color: #fff;
    overflow: hidden;
    white-space: nowrap;
    padding: 5px 0;
    text-indent: 5px;
    width: 0%;
} 
```

javascript

```
var progressElement = document.getElementById('progress')

function updateProgress(percentage) {
    progressElement.style.width = percentage + '%';
    progressElement.innerHTML = percentage + '%';
} 
```

您可以让它输出 JavaScript 并让它为您更新进度条，例如：

```
<script>updateProgress(0);</script>
<script>updateProgress(0.1);</script>
<script>updateProgress(0.2);</script> 
```

您可能对更多[示例代码感兴趣](https://gist.github.com/1030450)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-04T20:47:10.740

要在类中使用回调，您必须这样做：

```
curl_setopt($ch, CURLOPT_PROGRESSFUNCTION, array($this, 'progress')); 
```

或者如果使用静态函数，如下所示：

```
curl_setopt($ch, CURLOPT_PROGRESSFUNCTION, array('self', 'progress')); 
```

...到一个回调函数来做你需要的任何事情：

```
private static function progress($resource, $downloadSize, $downloaded, $uploadSize, $uploaded)
{
    // emit the progress
    Cache::put('download_status', [
        'resource' => $resource,
        'download_size' => $downloadSize,
        'downloaded' => $downloaded,
        'upload_size' => $uploadSize,
        'uploaded' => $uploaded
    ], 10);
} 
```

# c# - 滚动条在 Mdi 子幻灯片表单中不起作用

> ID：13958314
> 
> 赞同：-3
> 
> 时间：2012-12-19T18:00:05.517
> 
> 标签：c#, winforms, scrollbar, mdichild

我有一个在 mdi 父级中加载的子表单。这个子表单在加载时具有滑动效果，并且来自屏幕的左侧，并将设置在屏幕的中心（我用一个简单的计时器做到了这一点）。

问题是，如果我不将`dockstyle`表单设置`fill`为滚动条不起作用，如果我设置`dockstyle`为`fill`，滑动效果将不起作用并且表单加载简单！

这是form1中的按钮：

```
 Timer timerPrevMonth = new Timer();
    //reserve_vaght_azar is the form that will be load in sliding effect
    reserve_vaght_azar reservevaghtazar = null;
    private void btn_prev_dey_Click(object sender,EventArgs e)
    {

        reservevaghtazar = new reserve_vaght_azar();
        reservevaghtazar.StartPosition = FormStartPosition.Manual;
        reservevaghtazar.Location = new Point( this.Location.X-Width,Location.Y );
        reservevaghtazar.MdiParent = MdiParent;
        this.TopMost = true;
       //here is dockstyle
       // reservevaghtazar.Dock=DockStyle.Fill;
        reservevaghtazar.Show();
        timerPrevMonth.Start();
    } 
```

这是计时器功能：

```
 void timerPrevMonth_Tick(object sender,EventArgs e)
    {
        timerPrevMonth.Stop();
        reservevaghtazar.Location = new Point( reservevaghtazar.Location.X +15,this.Location.Y );

        if (this.Location.X-reservevaghtazar.Location.X <5)
        {
            reservevaghtazar.Location = new Point( this.Location.X,this.Location.Y );
            this.TopMost = false;
            reservevaghtazar.BringToFront();
            reservevaghtazar.Focus();

        }
        else
            timerPrevMonth.Start();
    } 
```

当在form1中按下按钮时，表单`reserve_vaght_azar`将以滑动效果加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:18:26.190

我解决了！

我只是`reservevaghtazar.Dock=DockStyle.Fill;`在之后添加`reservevaghtazar.Focus();`

问题是我在幻灯片表单完全加载到屏幕之前停靠表单。我改变了停靠线的位置并解决了。

But yet Its very Strange that scrollbar doesnt work if the form doesnt be fill in Mdi parent.

# java - 是否可以获得用于在 java 中启动 jvm 的命令？

> ID：13958318
> 
> 赞同：41
> 
> 时间：2012-12-19T18:00:24.597
> 
> 标签：java, jvm

我想知道是否可以从代码中获取用于启动 java 程序的命令。

例如，如果我启动一个 java 程序：

```
 java -cp lib1:lib2:... -jar mylib.jar com.foo.Bar 
```

我想获得确切的字符串（包括 jvm 参数）。

可能吗？

* * *

**评论赏金和问题**

谢谢大家的回复。不幸的是，我没有得到我最初想要的答案。我希望有一些可移植的解决方案可以从程序本身（包括类路径等）中获取完整的 java 命令。似乎没有可移植的解决方案，因为我使用的是 Linux，所以我使用*agodinhost*和*Luigi R. Viggiano*的响应来解决我的问题。但是，我将赏金奖励给*rahulroc*以获得最完整（便携）的响应。对于其余的所有人都投赞成票:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-02T12:28:07.600

下面提到的代码应该显示所有 JVM 参数、传递给 main 方法的参数以及主类名。

```
import java.lang.management.ManagementFactory;
import java.lang.management.RuntimeMXBean;

import java.util.List;

public static void main(String[] args) {
  RuntimeMXBean bean = ManagementFactory.getRuntimeMXBean();
  List<String> jvmArgs = bean.getInputArguments();

  for (int i = 0; i < jvmArgs.size(); i++) {
    System.out.println( jvmArgs.get( i ) );
  }
  System.out.println(" -classpath " + System.getProperty("java.class.path"));
  // print the non-JVM command line arguments
  // print name of the main class with its arguments, like org.ClassName param1 param2
  System.out.println(" " + System.getProperty("sun.java.command"));
} 
```

[getInputArguments](http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html#getInputArguments%28%29)的 javadoc

> 返回传递给 Java 虚拟机的输入参数，其中不包括 main 方法的参数。如果 Java 虚拟机没有输入参数，则此方法返回一个空列表。
> 
> 一些 Java 虚拟机实现可能会从多个不同来源获取输入参数：例如，从启动 Java 虚拟机的应用程序传递的参数，例如“java”命令、环境变量、配置文件等。
> 
> 通常，并非“java”命令的所有命令行选项都传递给 Java 虚拟机。因此，返回的输入参数可能不包括所有命令行选项。

你也可以看看：[jps](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jps.html)

> 它是一个 Java 程序，能够获取所有 Java 进程的完整命令行，包括主类的完整类名和 JVM 选项。

您可以找到各种[JVM 工具](http://marxsoftware.blogspot.com/2009/02/day-to-day-java-development-tools-and.html)的很好的总结，包括 [Java Application Launcher](http://java.sun.com/javase/6/docs/technotes/tools/windows/java.html)链接到：

*   [`ManagementFactory.getRuntimeMXBean(`)](http://java.sun.com/javase/6/docs/api/java/lang/management/ManagementFactory.html#getRuntimeMXBean()) - 返回 Java 虚拟机的运行时系统的托管 bean。
*   [`getInputArguments()`](http://java.sun.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html#getInputArguments())文档
*   确定 JVM 是否在[调试模式下运行](http://technology.amis.nl/blog/4214/accessing-jvm-arguments-from-java-to-determine-if-jvm-is-running-in-debug-mode)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-19T18:03:33.127

您可以使用[它](http://docs.oracle.com/javase/7/docs/api/java/lang/management/RuntimeMXBean.html#getInputArguments())来检索 VM 参数：

```
public static void main(String args[]) {
    List<String> inputArguments = ManagementFactory.getRuntimeMXBean().getInputArguments();
    System.out.println("input arguments = " + inputArguments);
} 
```

但是它不会给你所有的命令行（只给出 JVM 参数，没有主类也没有参数）。样本输出：

> 输入参数 = [-Dfile.encoding=UTF-8, -XX:-UseTLAB, -Xms2000m, -Xmx2000m, -XX:+PrintCompilation, -XX:+PrintGC]

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-28T01:36:11.777

它仅适用于~~ Sun ~~  Oracle JVM：`System.getProperty("sun.java.command")`

此外，您可以查看[JavaSysMon](https://github.com/jezhumble/javasysmon/wiki)，它可以报告活动进程的命令行。要检查当前的 JVM 进程，请在此处检查：[Java 程序如何获取自己的进程 ID？](https://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-28T11:52:20.363

在 linux 机器上运行会更容易：

```
ps -ef | grep java 
```

此命令将列出所有使用它使用的参数运行的 java 程序。

不确定在 Windows 环境中可以使用什么。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-03T17:22:29.000

在 Win2003 的任务管理器中，您可以像在 linux 上一样启用显示命令的列的显示。或者，您可以从命令行执行此操作，如下所示：

```
wmic.exe PROCESS where "name like '%java%'" get Processid,Caption,Commandline 
```

# ios - iOS：从背景图像中检索矩形形状的图像

> ID：13958321
> 
> 赞同：5
> 
> 时间：2012-12-19T18:00:28.667
> 
> 标签：ios, opencv

我正在研究一个在大背景图像中有一个矩形图像的实现。我正在尝试以编程方式从大图像中检索矩形图像并从该特定矩形图像中检索文本信息。我正在尝试使用 Open-CV 第三方框架，但无法从大背景图像中检索矩形图像。有人可以指导我，我怎么能做到这一点？

**更新：**

我找到了使用 OpenCV 找出正方形的[链接。](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/c/squares.c?rev=27)我可以修改它以查找矩形形状吗？有人可以指导我吗？

最新更新：

我终于得到了代码，下面是它。

```
 - (cv::Mat)cvMatWithImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);

    return cvMat;
}
-(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
    CGColorSpaceRef colorSpace;
    if ( cvMat.elemSize() == 1 ) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }

    //CFDataRef data;
    CGDataProviderRef provider = CGDataProviderCreateWithCFData( (CFDataRef) data ); // It SHOULD BE (__bridge CFDataRef)data
    CGImageRef imageRef = CGImageCreate( cvMat.cols, cvMat.rows, 8, 8 * cvMat.elemSize(), cvMat.step[0], colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, false, kCGRenderingIntentDefault );
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease( imageRef );
    CGDataProviderRelease( provider );
    CGColorSpaceRelease( colorSpace );
    return finalImage;
}
-(void)forOpenCV
{
    imageView = [UIImage imageNamed:@"myimage.jpg"];
    if( imageView != nil )
    {
        cv::Mat tempMat = [imageView CVMat];

        cv::Mat greyMat = [self cvMatWithImage:imageView];
        cv::vector<cv::vector<cv::Point> > squares;

        cv::Mat img= [self debugSquares: squares: greyMat];

        imageView = [self UIImageFromCVMat: img];

        self.imageView.image = imageView;
    }
}

double angle( cv::Point pt1, cv::Point pt2, cv::Point pt0 ) {
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

- (cv::Mat) debugSquares: (std::vector<std::vector<cv::Point> >) squares : (cv::Mat &)image
{
    NSLog(@"%lu",squares.size());

    // blur will enhance edge detection

    //cv::Mat blurred(image);
    cv::Mat blurred = image.clone();
    medianBlur(image, blurred, 9);

    cv::Mat gray0(image.size(), CV_8U), gray;
    cv::vector<cv::vector<cv::Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
        mixChannels(&image, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                Canny(gray0, gray, 10, 20, 3); //

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, cv::Mat(), cv::Point(-1,-1));
            }
            else
            {
                gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            cv::vector<cv::Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(cv::Mat(contours[i]), approx, arcLength(cv::Mat(contours[i]), true)*0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 &&
                    fabs(contourArea(cv::Mat(approx))) > 1000 &&
                    isContourConvex(cv::Mat(approx)))
                {
                    double maxCosine = 0;

                    for (int j = 2; j < 5; j++)
                    {
                        double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                        maxCosine = MAX(maxCosine, cosine);
                    }

                    if (maxCosine < 0.3)
                        squares.push_back(approx);
                }
            }
        }
    }

    NSLog(@"squares.size(): %lu",squares.size());

    for( size_t i = 0; i < squares.size(); i++ )
    {
        cv::Rect rectangle = boundingRect(cv::Mat(squares[i]));
        NSLog(@"rectangle.x: %d", rectangle.x);
        NSLog(@"rectangle.y: %d", rectangle.y);

        if(i==squares.size()-1)////Detecting Rectangle here
        {
            const cv::Point* p = &squares[i][0];

            int n = (int)squares[i].size();

            NSLog(@"%d",n);

            line(image, cv::Point(507,418), cv::Point(507+1776,418+1372), cv::Scalar(255,0,0),2,8);

            polylines(image, &p, &n, 1, true, cv::Scalar(255,255,0), 5, CV_AA);

            int fx1=rectangle.x;
                NSLog(@"X: %d", fx1);
            int fy1=rectangle.y;
                NSLog(@"Y: %d", fy1);
            int fx2=rectangle.x+rectangle.width;
                NSLog(@"Width: %d", fx2);
            int fy2=rectangle.y+rectangle.height;
                NSLog(@"Height: %d", fy2);

            line(image, cv::Point(fx1,fy1), cv::Point(fx2,fy2), cv::Scalar(0,0,255),2,8);

        }

    }

    return image;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:19:49.280

这是一个完整的答案，它使用一个小型包装类将 c++ 与 Objective-c 代码分开。

我不得不[在 stackoverflow 上提出另一个问题](https://stackoverflow.com/questions/14104510/objective-c-wrapper-invoking-c-static-member-functions)来处理我糟糕的 c++ 知识——但我已经以示例代码为例，计算出了将 c++ 与 Objective-c 代码*干净地接口所需的一切。*`squares.cpp`其目的是尽可能保持原始 c++ 代码的原始性，并将 openCV 的大部分工作保留在纯 c++ 文件中以实现（不）可移植性。

我保留了我原来的答案，因为这似乎超出了编辑范围。[完整的demo项目在github上](https://github.com/foundry/OpenCVSquares)

CVViewController.h / CVViewController.m

*   纯Objective-C

*   通过 WRAPPER 与 openCV c++ 代码进行通信......它既不知道也不关心 c++ 正在处理包装器后面的这些方法调用。

CVWrapper.h / CVWrapper.mm

*   客观-C++

做的越少越好，真的只有两件事……

*   调用 UIImage objC++ 类别来转换 UIImage <> cv::Mat
*   在 CVViewController 的 obj-C 方法和 CVSquares c++（类）函数调用之间进行调解

CVSquares.h / CVSquares.cpp

*   纯 C++
*   `CVSquares.cpp`在类定义中声明公共函数（在本例中为一个静态函数）。
    这将替换 `main{}`原始文件中的工作。
*   为了可移植性，我们尝试`CVSquares.cpp`尽可能接近 C++ 原版。

**CVViewController.m**

```
//remove 'magic numbers' from original C++ source so we can manipulate them from obj-C
#define TOLERANCE 0.01
#define THRESHOLD 50
#define LEVELS 9

UIImage* image =
        [CVSquaresWrapper detectedSquaresInImage:self.image
                                       tolerance:TOLERANCE
                                       threshold:THRESHOLD
                                          levels:LEVELS]; 
```

**CVsquaresWrapper.h**

```
//  CVSquaresWrapper.h

#import <Foundation/Foundation.h>

@interface CVSquaresWrapper : NSObject

+ (UIImage*) detectedSquaresInImage:(UIImage*)image
                          tolerance:(CGFloat)tolerance
                          threshold:(NSInteger)threshold
                             levels:(NSInteger)levels;

@end 
```

**CVSquaresWrapper.mm**

```
//  CVSquaresWrapper.mm
//  wrapper that talks to c++ and to obj-c classes

#import "CVSquaresWrapper.h"
#import "CVSquares.h"
#import "UIImage+OpenCV.h"

@implementation CVSquaresWrapper

+ (UIImage*) detectedSquaresInImage:(UIImage*) image
                          tolerance:(CGFloat)tolerance
                          threshold:(NSInteger)threshold
                             levels:(NSInteger)levels
{
    UIImage* result = nil;

        //convert from UIImage to cv::Mat openCV image format
        //this is a category on UIImage
    cv::Mat matImage = [image CVMat]; 

        //call the c++ class static member function
        //we want this function signature to exactly 
        //mirror the form of the calling method 
    matImage = CVSquares::detectedSquaresInImage (matImage, tolerance, threshold, levels);

        //convert back from cv::Mat openCV image format
        //to UIImage image format (category on UIImage)
    result = [UIImage imageFromCVMat:matImage]; 

    return result;
}

@end 
```

**CVsquares.h**

```
//  CVSquares.h

#ifndef __OpenCVClient__CVSquares__
#define __OpenCVClient__CVSquares__

    //class definition
    //in this example we do not need a class 
    //as we have no instance variables and just one static function. 
    //We could instead just declare the function but this form seems clearer

class CVSquares
{
public:
    static cv::Mat detectedSquaresInImage (cv::Mat image, float tol, int threshold, int levels);
};

#endif /* defined(__OpenCVClient__CVSquares__) */ 
```

**CVsquares.cpp**

```
//  CVSquares.cpp

#include "CVSquares.h"

using namespace std;
using namespace cv;

static int thresh = 50, N = 11;
static float tolerance = 0.01;

    //declarations added so that we can move our 
    //public function to the top of the file
static void findSquares(  const Mat& image,   vector<vector<Point> >& squares );
static void drawSquares( Mat& image, vector<vector<Point> >& squares );

    //this public function performs the role of 
    //main{} in the original file (main{} is deleted)
cv::Mat CVSquares::detectedSquaresInImage (cv::Mat image, float tol, int threshold, int levels)
{
    vector<vector<Point> > squares;

    if( image.empty() )
        {
        cout << "Couldn't load " << endl;
        }

    tolerance = tol;
    thresh = threshold;
    N = levels;
    findSquares(image, squares);
    drawSquares(image, squares);

    return image;
}

// the rest of this file is identical to the original squares.cpp except:
// main{} is removed
// this line is removed from drawSquares: 
// imshow(wndname, image); 
// (obj-c will do the drawing) 
```

**UIImage+OpenCV.h**

UIImage 类别是一个 objC++ 文件，其中包含在 UIImage 和 cv::Mat 图像格式之间进行转换的代码。这是您移动两种方法的`-(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat`地方`- (cv::Mat)cvMatWithImage:(UIImage *)image`

```
//UIImage+OpenCV.h

#import <UIKit/UIKit.h>

@interface UIImage (UIImage_OpenCV)

    //cv::Mat to UIImage
+ (UIImage *)imageFromCVMat:(cv::Mat&)cvMat;

    //UIImage to cv::Mat
- (cv::Mat)CVMat;

@end 
```

此处的方法实现与您的代码相同（尽管我们没有传入 UIImage 进行转换，而是参考`self`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T13:12:53.337

这是部分答案。它并不完整，因为我正在尝试做完全相同的事情，并且每一步都遇到了巨大的困难。我对 Objective-C 的了解非常强，但对 C++ 的了解却很薄弱

您应该阅读[本指南以包装 c++](http://robnapier.net/blog/wrapping-cppfinal-edition-759)

以及Ievgen Khvedchenia 的[计算机视觉讲座](http://computer-vision-talks.com/)博客上的所有内容，尤其是*openCV*[教程](http://computer-vision-talks.com/2012/06/opencv-tutorial-a-collection-of-opencv-samples-for-iphoneipad-part-1/)。Ievgen 还在github 上发布了一个[非常完整的项目来配合教程。](https://github.com/BloodAxe)

话虽如此，我仍然[很难](https://stackoverflow.com/questions/13905471/opencv-2-4-3-ios-framework-compiler-trouble-recognising-some-c-headers)让 openCV 顺利编译和运行。

例如，Ievgen 的教程作为一个完成的项目运行良好，但如果我尝试从头开始重新创建它，我会遇到一直困扰我的相同 openCV 编译错误。这可能是我对 C++ 的理解不足，它与 obj-C 的集成。

关于 squares.cpp

你需要做什么

*   `int main(int /*argc*/, char** /*argv*/)`从 squares.cpp 中删除
*   `imshow(wndname, image);`从 drawSquares中删除（obj-c 将进行绘图）
*   创建头文件 squares.h
*   在头文件中创建一个或两个公共函数，您可以从 obj-c（或从 obj-c/c++ 包装器）调用它们

这是我到目前为止...

```
class squares
{
public:
         static cv::Mat& findSquares( const cv::Mat& image, cv::vector<cv::vector<cv::Point> >& squares );
         static cv::Mat& drawSquares( cv::Mat& image, const cv::vector<cv::vector<cv::Point> >& squares );

}; 
```

您应该能够将其简化为一种方法，例如`processSquares`使用一个 input`cv::Mat& image`和一个 return `cv::Mat& image`。该方法将在 .cpp 文件中声明`squares`并调用`findSquares`和。`drawSquares`

包装器将接受输入 UIImage，将其转换为`cv::Mat image`，使用该输入调用`processSquares`，并获得结果`cv::Mat image`。该结果将转换回 NSImage 并传递回 objc 调用函数。

所以这是我们需要做的一个简洁的草图，一旦我真正做到了，我会尝试扩展这个*答案*！

# ruby-on-rails - 为什么编辑操作尝试保存嵌套属性

> ID：13958324
> 
> 赞同：1
> 
> 时间：2012-12-19T18:00:53.630
> 
> 标签：ruby-on-rails, nested-attributes

我有一个像 Routine 和 RoutineContent 这样的模型，用于
在 Routine.rb中进行本地化

```
Class Routine < ActiveRecord::Base
  has_many :routine_contents, dependent: :destroy
  accepts_nested_attributes_for :routine_contents, reject_if: proc {|attributes| attributes['title'].empty?}
end 
```

并在 RoutinesContent

```
class RoutineContent < ActiveRecord::Base
  belongs_to :routine
  validates_presence_of :title
end 
```

在新的 Routine 动作中，我为语言添加了 RoutineConten 字段。如果一个对象中的标题为空，则该对象将被拒绝。

当我去编辑动作时，我这样做

```
def set_routine_contents
    contents = @routine.routine_contents.group_by {|content| content.lang}
    if contents['ru'].nil?
      @routine.routine_contents << RoutineContent.new(lang: 'ru')
    end
    if contents['en'].nil?
      @routine.routine_contents << RoutineContent.new(lang: 'en')
    end
end 
```

在此 Rails INSERT INTO 表中的 emty 对象之后结束，为什么？我怎样才能禁用它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:23:42.290

**解决方案**

```
def set_routine_contents
    contents = @routine.routine_contents.group_by {|content| content.lang}
    if contents['ru'].nil?
      @routine.routine_contents.build(lang: 'ru')
    end
    if contents['en'].nil?
      @routine.routine_contents.build(lang: 'en')
    end
end 
```

使用构建方法。通过 << 添加到数组是个坏主意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:14:06.087

`has_many``routine_id`用表中的外键实现关联`routine_contents`。

因此，将新的 RoutineContent 添加到您的 Routine 需要在 Routine 中确定要写入的主键，`routine_id`如果尚未保存，则会导致 Routine 保存。

# extjs - 我使用 appProperty 属性做什么？

> ID：13958326
> 
> 赞同：2
> 
> 时间：2012-12-19T18:00:55.973
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我最近在`appProperty`课堂上绊倒了`Ext.app.Application`，想知道我为什么要使用它。无论如何，我都需要访问 App 实例才能访问再次包含该实例的变量？也许我很困惑，但这个属性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:48:33.497

我想你在这里有一个误解；该`name`属性只是定义了应用程序的名称空间以及它的 getter 方法（`getApplication()`），但它不会为您提供该应用程序的当前实例，除非您调用 getter 或使用新的`appProperty`。

假设您有以下应用程序

```
Ext.application({
    name: 'App',
    appProperty: 'instance',
    launch: function() {
        // some more code
    }
}); 
```

您可以通过调用任一组件从任何组件访问此应用程序

```
App.getApplicatio(); 
```

或者

```
App.instance 
```

第二个会更快一些，因为它没有方法调用，并且您可以肯定地定义此属性的名称。所以我猜你看到这个属性非常有用！

> *请注意，命名空间始终是 javascript 中的对象。这就是您能够将属性放入其中的原因。*

# android - 我的 R.java 文件消失了，没有任何效果

> ID：13958327
> 
> 赞同：0
> 
> 时间：2012-12-19T18:01:04.297
> 
> 标签：android, r.java-file

手动更改一些资源（图像）后，我的 R.java 文件消失了。我已经尝试了所有，我已经阅读[了 this](https://stackoverflow.com/questions/4516428/r-java-auto-generated-file)，[this](https://stackoverflow.com/questions/4603217/r-java-deleted-automatically-android)和很多条目，但对我没有任何作用。我已经修改了我所有的布局和资源，但显然任何布局都没有问题。是否可以导出我的所有项目并构建另一个项目？还是没有 R.java 类我无事可做？多谢！

**我已经解决了！**我删除了最后添加的文件并重新启动了eclipse，现在一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:04:47.683

您是否检查了问题选项卡中 /res/ 文件夹中的错误？如果您的任何资源文件有问题，则不会生成 R 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:05:10.340

查看您的控制台输出。您可能有一个非法命名的文件，并有类似的消息 -

> ```
> Invalid file name: must contain only [a-z0-9_.] 
> ```

# c - 如何从二进制文件读入struct c？

> ID：13958328
> 
> 赞同：1
> 
> 时间：2012-12-19T18:01:04.033
> 
> 标签：c, file

我有以下结构

```
struct
{
    char order;
    int row;
    int column;
    int length;
    char printChar;
}record; 
```

我的文件看起来像这样

```
F
30
40
7
X 
```

我如何使用 fread 将文件存储在结构中？我的文件是否正确显示，还是所有组件都需要在一行中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:04:39.127

如果我理解正确，您是在问是否可以

```
struct record r;
fread(file, &r, sizeof(r)); 
```

还是你被迫使用

```
struct record r;
fread(file, &r.order, sizeof(r.order)); 
```

如果这是您的问题，那么答案是：您必须一一阅读字段，因为结构成员之间可能存在填充。或者，如果您使用 GNU 兼容的编译器，您可以通过将您的结构声明为“打包”来指示它不包含任何填充：

```
struct record {
    // ...
} __attribute__((packed)); 
```

但除非绝对必要，否则不建议这样做（它不是便携式的）。

另外，您的文件真的是二进制文件吗？如果没有，您应该注意换行符并将数字从文本转换为它们的实际数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:04:25.630

不可能从该格式的文件（基本上包含数据的字符表示）中读取到结构中。读取它的一种方法是使用和读取每一行并将数据分配到结构中（如果错误检查不那么重要，则[使用 strtol](http://linux.die.net/man/3/strtol)或[atoi](http://linux.die.net/man/3/atol)[`fgets`](http://linux.die.net/man/3/fgets)等函数根据需要转换数值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:11:10.057

您的文件似乎是一个文本文件，所以如果这正是文件的格式，您可以使用`fscanf`：

```
fscanf(file, "%c%d%d%d%c", &(record.order), &(record.row), ... 
```

如果您对基本错误处理感兴趣，可以检查返回值。如果您需要更好地描述错误，只需使用`fgets`一次读取一行并使用`sscanf`、`atoi`和`strtol`类似函数解析它。

如果要直接将数据保存在结构中，不，不能（使用那种文件），在文本文件`30`中是两个字符的字符串，而不是二进制形式的整数。

# android - 当向上和向下滚动列表行关联视图被更改

> ID：13958330
> 
> 赞同：0
> 
> 时间：2012-12-19T18:01:07.467
> 
> 标签：android, android-widget

我制作了一个自定义类别列表。某些类别具有嵌套类别。

当列表最多包含 9 行（可见区域可以包含 9 行而不滚动）时，代码运行良好，但是当我添加第 10 行（此处列表变为可滚动）并向下滚动列表时，行外观会改变。

包含嵌套列表的行会发生这种情况（它们具有“移动下一个图像”）。当我向下滚动并向上滚动时，具有“移动下一个图像”的行会消失。

我使用的自定义适配器是：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View rowView = convertView;

        if (rowView == null)
        {
          LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          rowView = inflater.inflate(R.layout.m_category_list_activity, null);

          ViewHolder viewHolder = new ViewHolder();

          viewHolder.text = (TextView) rowView.findViewById(R.id.label);
          viewHolder.image = (ImageView) rowView.findViewById(R.id.icon);

          rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();

        holder.text.setText(values.get(position));

        String s = status.get(position);

        if (s.equals("s")) 
        {
            holder.image.setVisibility(IGNORE_ITEM_VIEW_TYPE);
        } 

        return rowView;
     } 
```

我不明白问题是什么。我什至在使用convertView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:12:43.390

```
 if (s.equals("s")) 
    {
        holder.image.setVisibility(IGNORE_ITEM_VIEW_TYPE);
    } 
```

我认为您缺少“else”子句（重置为默认值），这就是回收失败的原因。请记住，当您回收视图时，您将获得与最后一个项目完全相同的视图，因此您需要再次设置您关心的所有视图属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T11:24:14.677

将您的 getView() 方法更改为此，它将为您工作

```
@Override

 public View getView(int position, View convertView, ViewGroup parent) 
  {
    View rowView = convertView;

    if (rowView == null)
    {
      LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      rowView = inflater.inflate(R.layout.m_category_list_activity, null);

      ViewHolder viewHolder = new ViewHolder();

      viewHolder.text = (TextView) rowView.findViewById(R.id.label);
      viewHolder.image = (ImageView) rowView.findViewById(R.id.icon);

      rowView.setTag(viewHolder);
    } else {
       rowView.getTag(viewHolder);
    }

    ViewHolder holder = (ViewHolder) rowView.getTag();

    holder.text.setText(values.get(position));

    String s = status.get(position);

    if (s.equals("s")) 
    {
        holder.image.setVisibility(IGNORE_ITEM_VIEW_TYPE);
    } 

    return rowView;
 } 
```

# php - PHP 列总和结果 MYSQL

> ID：13958337
> 
> 赞同：1
> 
> 时间：2012-12-19T18:01:29.720
> 
> 标签：php, mysql

```
$query = "SELECT SUM(Veldspar) FROM hauled WHERE miningrun=2 AND hauler=1";
$result = mysql_query($query) or die(mysql_error());
$veldtotal = mysql_fetch_array($result);

printf("Results:  %s<br>", $veldtotal);
printf("Length of array: %s<br>", count($veldtotal));
printf("Array into Int: %s<br>", (int)$veldtotal); 
```

为什么第一个 printf 返回一个空白变量？
我想要做的就是获取查询的总和，并将其传递给要在屏幕上显示的变量。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:02:59.450

那是因为`mysql_fetch_array`返回一个数组。您可以使用`$veldtotal[0]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:06:08.707

使用这个或 var_dump() 来了解你的内容`$veldtotal`

```
echo "<pre>";
print_r($veldtotal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:10:21.100

如果您想在查询中访问计算的总和，您应该将其命名为：

```
$query = "SELECT SUM(Veldspar) AS total FROM hauled WHERE miningrun = 2 AND hauler = 1"; 
```

并阅读它：

```
printf("Results:  %s<br>", $veldtotal['total']);
printf("Length of array: %s<br>", count($veldtotal));
printf("Array into Int: %s<br>", (int)$veldtotal); 
```

您也可以使用 $veldtotal[0] 阅读它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:10:48.777

```
$query = "SELECT SUM(Veldspar) FROM hauled WHERE miningrun=2 AND hauler=1";

$veldtotal = mysql_result(mysql_query($query), 0, 0);

printf("Results:  %s<br>", $veldtotal);
printf("Length of array: %s<br>", count($veldtotal));
printf("Array into Int: %s<br>", (int)$veldtotal); 
```

另外，什么`Length of array`意思？

# android - Android：下拉微调器标题

> ID：13958340
> 
> 赞同：-2
> 
> 时间：2012-12-19T18:01:36.163
> 
> 标签：android

安卓 4.0.3

我有一个简单的下拉微调器。默认情况下，微调器的标题是列表中的第一项，但我想设置我的文本。怎么做 ？android：promt - 不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:22:55.320

我假设您想在微调器关闭时更改它的文本，对吗？好吧， android:prompt 不打算这样做。它只为微调器设置一个标题。默认情况下，您无法更改关闭的微调器上显示的文本。Android 采用微调器的第一项并显示它。因此，如果您不希望这样做，则必须修改适配器。

# jquery - 带有类.css的jQuery img不起作用

> ID：13958341
> 
> 赞同：1
> 
> 时间：2012-12-19T18:01:44.893
> 
> 标签：jquery, html, css, jquery-selectors

我一直在寻找几个小时为什么以下代码不起作用：

```
naam = "div#" + $(naam).next('div').attr('id');
current = "img." + $(naam).attr('id');
$(current).css("border", "solid 4px #9966FF"); 
```

div 的 id 与 img 中的类同名：

```
<div id="michiel"> 
```

这是我想在上面使用代码的图像：

```
<img src="Images/michielsmall.jpg" class="michiel, link" alt="Michiel"> 
```

如您所见，我正在尝试使用 class 更改 img 的边框`"michiel"`。

当 I 时`console.log(current);`，输出为：`img.michiel`，这是正确的。

我真的不知道为什么这不起作用，请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:05:41.527

那是因为类名中的**逗号**

```
class="michiel, link"
              ^^------- Remove this 
```

应该是

```
class="michiel link" 
```

或 .. 如果您希望**逗号出现**，请将您的选择器更改为

```
var current = "img." + $(naam).attr('id') + "\\,"; 
```

但这不推荐

**[检查小提琴](http://jsfiddle.net/sushanth009/bRQ4U/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:09:53.373

`naam`没有定义。[我在这里](http://jsfiddle.net/jmutv/)做了一个 jsfiddle并查看了 chrome 控制台。

### 更新

我将您的 javascript 更改为`$('.michiel').css('border', 'solid 4px #9966FF');`如果您需要它更具体，我相信您可以从这里获取它。

[http://jsfiddle.net/jmutv/2/](http://jsfiddle.net/jmutv/2/)

# python - 字母后跟数字的字符串输入验证

> ID：13958353
> 
> 赞同：0
> 
> 时间：2012-12-19T18:02:24.690
> 
> 标签：python, python-3.x

我希望用户输入采用字母数字格式。字母应该来自`A-H`，数字应该介于两者之间`1-7`例如`A4`或`H7`。我不希望用户输入为例如`AA`,`AAA`或. 这是我到目前为止所做的：`2B``22`

```
x=input("Write something:")

if len(x) !=2:
    print("Wrong")

letter=x[0]
number= x[1]

if number >=8:
    print("Wrong")

if letter not ["A","B","C","D","F","G"]:
    print("Wrong")

if letter == int:
    print("Wrong")

if number == str:
    print("Wrong")

else:
    print("Perfect") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:07:50.427

我会用[正则表达式](http://docs.python.org/2/library/re.html)匹配来做到这一点：

```
import re

x=input("Write something: ")

if re.match('^[A-H][1-7]$',x):
     print('Perfect!')
else:
     print ('Wrong') 
```

正则表达式`'^[A-H][1-7]$'`是`x`必须适合的模式。

```
^      # This character matches the start of the string
[A-H]  # After the start of the string we allow the group A-H (A,B,C,D,E,F,G,H)
[1-7]  # The next character must be a digit between 1 and 7
$      # This character matches the end of the string 
```

锚点的使用`^,$`意味着 的长度`x`必须为 2，这是隐含的，因此我们不需要单独检查。

循环直到收到正确值的改进：

```
import re

while not re.match('^[A-H][1-7]$',input("Write something: ")):
     print('Wrong')

print('Perfect!') 
```

演示：

```
Write something: 11
Wrong
Write something: AA
Wrong
Write something: a1
Wrong
Write something: A9
Wrong
Write something: A1
Perfect! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:13:38.163

```
if letter == int:
    print("Wrong")

if number == str:
    print("Wrong") 
```

这不起作用有两个原因。首先，在这种情况下，字母和数字在技术上总是字符串。任何来自键盘的输入都是一个字符串，即使它是一个数字。其次，`==`运算符用于比较两个对象（这里的“对象”包括字符串或整数甚至类）的相等性，与询问“此对象是否是此类的实例”不同。

我同意其他答案，因为您最好使用正则表达式，但如果您只想使用条件来判断字符串是单字符数字还是字母，您可以使用字符串方法：

```
if not letter.isalpha():
    print("Wrong")

if not number.isdigit():
    print("Wrong") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:27:22.217

使用正则表达式的完美场景

```
import re
x=input("Write something: ")
print("Perfect" if re.match('^[A-H][1-7]$', x) else "Wrong") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:07:56.453

这是正则表达式的完美用例，

```
import re
x = input("Write something")
if re.match("^[A-H][1-7]$", x):
    print("Perfect") 
```

# java - Java 运算符总是从左到右读取吗？

> ID：13958369
> 
> 赞同：1
> 
> 时间：2012-12-19T18:03:50.627
> 
> 标签：java, operators

假设我们有这样的代码：

```
int k=1;
System.out.println(k++ * ++k); 
```

输出将是三个，这就是我的问题所在。Java是否总是如此，而不是首先阅读整行并将前指令与后指令分开，从而将其视为：

```
int k=1;
k+=1;
System.out.println(k*k);
k+=1; 
```

...只是从左到右阅读？还是它依赖于编译器并且不应该依赖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:12:40.173

```
k++ * ++k 
```

从左到右进行评估。

**解释：**

*   `k++`：首先使用k的原始值（即1）
*   之后增加 k，所以现在 k 为 2。
*   `++k`：先增加k再使用。所以 k 现在是 3。

k 的初始值为 1，`k++ * ++k`is 变为：`1 * 3`，结果为 3。

请注意，子表达式的副作用在 Java 中是明确定义的，这使得该表达式在 Java 中有效。表达式 like`k++ * ++k`会导致 C 或 C++ 中的未定义行为。所以一般避免这样的表达；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:08:34.793

这是由语言规范逐个运算符定义的。在您的第一个示例中，`*`运算符的规则在[JLS 15.17](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17)中定义：

> 乘法运算符具有相同的优先级并且在语法上是左结合的（它们从左到右分组）。

# database - ms 访问查询挂起

> ID：13958370
> 
> 赞同：1
> 
> 时间：2012-12-19T18:04:02.567
> 
> 标签：database, ms-access

**qFieldInner**

```
PARAMETERS pText1 Text ( 255 );
SELECT entries.en_main, MIN(entries.en_id) AS en_id
FROM entries
WHERE (((entries.en_main) In (625, 1310)))
GROUP BY en_main; 
```

当我运行此查询时，它返回：

625 76719
1310 177239

但是，如果我将其转换为：

```
PARAMETERS pText1 Text ( 255 );
SELECT entries.en_main, MIN(entries.en_id) AS en_id
FROM entries
WHERE (((entries.en_main) In (SELECT en_main FROM qFieldInnest)))
GROUP BY en_main; 
```

然后它就挂了。

**qFieldInnest**是这个，当我手动运行它时正确返回 625 和 1310

```
PARAMETERS pText1 Text ( 255 );
SELECT DISTINCT entries.en_main
FROM entries
WHERE (((entries.en_lect) Like ("* " & [pText1] & "*") Or (entries.en_lect) Like ([pText1] & "*")) AND ((entries.en_ref)=0) AND (((entries.en_se)=1) OR ((entries.en_meros)=6))) OR (((entries.en_thama) Like ("* " & [pText1] & "*") Or (entries.en_thama) Like ([pText1] & "*"))); 
```

我不明白这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:41:26.170

我会使用一个查询来解决这个问题，该查询将 SQL from`qFieldInnest`作为子查询，并将`INNER JOIN`子查询用于`entries`表。

中的`WHERE`条款`qFieldInnest`对我来说具有挑战性。它也将挑战数据库引擎，因为它必须做大量的工作。

我没有什么可以测试的，所以不确定我是否在下面的 SQL 中犯了错误。如果它不起作用，请将子查询 SQL 分解为一个新查询并单独测试。

```
PARAMETERS pText1 Text ( 255 );
SELECT e.en_main, MIN(e.en_id) AS en_id
FROM
    entries AS e
    INNER JOIN
    (
        SELECT DISTINCT en_main
        FROM entries
        WHERE
                (
                    (
                           en_lect Like "* " & [pText1] & "*"
                        Or en_lect Like [pText1] & "*"
                    )
                    AND en_ref=0
                    AND
                        (
                               en_se=1
                            OR en_meros=6
                        )
                )
            OR
                (
                       en_thama Like "* " & [pText1] & "*"
                    Or en_thama Like [pText1] & "*"
                )

    ) AS sub
    ON e.en_main = sub.en_main
GROUP BY e.en_main; 
```

# jquery-mobile - Jquery Mobile 对话框表单

> ID：13958372
> 
> 赞同：0
> 
> 时间：2012-12-19T18:04:15.213
> 
> 标签：jquery-mobile

我正在使用 jQueryMobile，我想使用表单在数据库中输入一些值。

我有一个可以工作并使用 test123.php 将数据提交到数据库的表单：

```
 <form method="get" action="test123.php?test=1">
         <input type="submit" value="spiegel" />
  </form> 
```

我得到一个按钮，但新页面显示为普通页面。

使用此解决方案：

```
 <a  data-role="button" data-rel="dialog" href="#test">
           spiegel
  </a> 
```

我得到一个具有相同输出的对话框（我得到消息“spiegel”）。

但我希望确认站点显示为对话框。

与 data-rel"dialog" 的链接，所以我想使用我的 php 站点，但我希望在提交数据后看起来像一个对话框，做一个数据库。我不知道该怎么做。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:30:02.350

```
<!DOCTYPE html> 
<html> 
<head>
  <!--add all your jquery,jquery mobile as well as its CSS refrences here-->
 </head>
<body>
<div data-role = "page">
    <div data-role="header">
<a href="#login" data-role="button" data-rel="dialog" data-transition="pop" data-icon="plus">opendialogpage</a>
</div>
    <div data-role="content">
<p>just for sample display</p></div>
</div>
    <div data-role="dialog" id="login">
    <div data-role="header" data-theme="e"></div>
    <div data-role="content">
        <form id="login_form">
            <fieldset>
                <div data-role="fieldcontain">
                <label>USER NAME:</label>
                <input type="text" id="name" value=""/>
                </div>
                <div data-role="fieldcontain">
                    <label>EMAIL ID:</label>
                    <input type="text" id="email" value=""/></div>
            </fieldset>  
</form>
</div>
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:47:02.563

好的，所以您希望 PHP 页面中的数据在对话框中而不是在下一页中打开。

您正在寻找的是 AJAX。

AJAX 允许您在不更改整个页面的情况下刷新和更改部分 HTML 页面。

```
$.ajax({
   url: 'test123.php',
   type: 'POST',
   data: {spiegel : 'spiegel'}
   error : function (){ document.title='error'; }, 
  success: function (data) {
    $('#ajax_content').html(data);
} 
```

});

所以这个函数将返回到可变数据中生成的任何内容`test123.php`

链接到文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:31:02.887

我也为此挣扎了一段时间。最后看了一下jquery mobile为对话框页面创建的html。只需创建一个具有以下结构的页面，它将始终作为对话框页面打开（就像它是从带有 的链接打开的一样`data-rel="dialog"`）。

```
<!DOCTYPE html> 
<html> 
<head> 
<title>Page Title</title> 
<!-- include your css, jquery, and jquery mobile files here -->
</head> 
<body> 
<div data-role="dialog">
<div data-role="content">   
<!-- content goes here -->
</div><!-- /content -->
</div><!-- /dialog -->
</body>
</html> 
```

您所做的只是更改`data-role="page"`为`data-role="dialog"`.

# ruby-on-rails - awesome_print 没有显示关联的对象

> ID：13958374
> 
> 赞同：7
> 
> 时间：2012-12-19T18:04:18.780
> 
> 标签：ruby-on-rails, printing, awesomeprint

如何让 AwesomePrint.ap 显示嵌套在对象内的关联对象？默认情况下它不会这样做，我假设有办法强制它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:14:10.510

您可以使用`raw`参数，例如

```
ap my_model, raw: true 
```

这递归地格式化实例变量。您也可以使用`AwesomePrint.defaults`（[文档](https://github.com/michaeldv/awesome_print#setting-custom-defaults)）将其设为默认值

但请注意：该功能会增加大量噪音，尤其是在打印 Rails 相关对象实例时。（特别是`ActiveRecord::Base`）

# mysql - mysql加入多个孩子，如果只有一个，则加入一个

> ID：13958377
> 
> 赞同：3
> 
> 时间：2012-12-19T18:04:28.187
> 
> 标签：mysql

我有以下情况：

```
t1
------
| id |
|----|
| 1  |
| 2  |
| 3  |
| 4  |
------

t2
----------------------
| id | pid | current |
|----|-----|----------
| 1  |  1  | 1       |
| 2  |  1  | NULL    |
| 3  |  2  | NULL    |
| 4  |  3  | 1       |
| 5  |  4  | NULL    |
| 6  |  4  | 1       |
---------------------- 
```

预期结果：

```
---------
| t1.id |
|-------|
| 1     |
| 2     |
--------- 
```

用文字来说：我想选择每个 t1，它具有（只有一个当前 IS NULL 的孩子）或（至少 2 个孩子，其中至少有一个当前 IS NULL 且 id 高于当前 NOT NULL 的孩子)

一切顺利

# c++ - 如何知道您输入了 std::array 中的最后一个元素是什么？

> ID：13958380
> 
> 赞同：1
> 
> 时间：2012-12-19T18:04:35.007
> 
> 标签：c++, stl

我正在制作一个 mfc 应用程序来制作某种绘图机制。使用折线，用户可以绘制图形，并且在按下回车键时，线的当前点连接到起点[形成一个封闭的多边形]。我想你应该已经明白了。现在，我使用 STL 数组来存储多边形的每个顶点——简单来说，在绘制图形时单击鼠标左键的每个点都存储在数组中。

```
std::array<CPoint,11> v;   //vertices 
```

我使用以下机制来输出这个数组的元素，即点：

```
 for(int j=0 ; j<v.size() ; j++ )
    {
        s.Format(L"%d %d\n",v[j].x, v[j].y);
        aDC.TextOutW(x+=20,y+=20,s );     //each time print the coordinates
        s=" ";                                    //at a different location
    } 
```

在执行过程中，当用户通过单击屏幕周围的点来绘制图形时，这些点将存储在数组中。数组声明有 12 个元素，但形状很少有 12 个顶点。元素的其余部分（空元素）保持 (0,0)- 但这些元素在循环中输出。所以我打印的是 3-4 个坐标和很多 (0,0)s。有没有办法只打印存储顶点的那些元素（我希望你明白我的意思）。类似的东西`vertices[n]=/*some character that signifies the last element*/`。我的问题是，这个角色会是什么？就像字符串中的 '\0'。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:11:22.397

看起来结构中没有一个很好的“结束标记”候选者[`CPoint`](http://www.oifii.org/ns-org/nsd/ar/cp/vst/niallmoody-com-ndcplugs_AmplitudeImposer_source-v22/vstgui_3_0_beta2/Documentation/html/struct_c_point.html)：每一对都`{x,y}`代表一个合法点，至少在理论上是这样。

如果您坚持使用固定数组（可能是出于性能原因），您还可以将多边形顶点的数量存储在一个单独的变量中（继续您的字符串类比，这将是点的“帕斯卡字符串”，而不是“ C 字符串”的点）。

如果使用数组不是必需的，您可能需要切换到 a `std::vector<CPoint>`，这是一个更适合表示可变大小结构（例如多边形）的容器。

最后，您可以将一个点指定为非法点（例如 at `{std::numeric_limits<long>::max(), std::numeric_limits<long>::max()}`），静态创建该点的实例，并将其用作序列结束标记。在这种情况下，请考虑将数组扩展一，并将结束标记用作哨兵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:19:26.310

好吧，如果您打算将该`(0; 0)`点用作无效点，则只需检查一个点是否位于`(0; 0)`：

```
if (vertices[i].x != 0 && vertices[i].y != 0) {
    // valid
} 
```

# java - 在枚举中保留可能的异常

> ID：13958382
> 
> 赞同：1
> 
> 时间：2012-12-19T18:04:41.027
> 
> 标签：java, enums

我正在研究一些工作流程，并且可能会引发许多异常。我听说我们可以将所有可能的异常保存在 Enum (Exception1, Exception2 ...) 中并使用它。我们如何在 Java 中使用枚举来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:14:04.457

您可以添加异常类

```
enum EnumWithExceptions {
    ENUM1(Exception1.class, Exception2.class),
    ENUM2(Exception3.class);

    private final Class<? extends Exception>[] exceptions;

    private EnumWithExceptions(Class<? extends Exception>... exceptions) {
        this.exceptions = exceptions;
    }

    public boolean matches(Exception e) {
        for(Class<? extends Exception> e2: exceptions)
            if (e2.isInstance(e)) return true;
        return false;
    }
} 
```

* * *

```
} catch(Exception e){ 
    if (ENUM1.matches(e)){ 
        //do something 
    } else if(ENUM2.matches(e)) {
        //do something 
    } else {
         //do something 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:18:24.047

```
enum Fred {
  SAM(AnException.class),
  I(AnotherException.class),
  AM(YetAnotherException.class)
  ;
   private Throwable t;
  Fred(Throwable throwable) {
       this.t = throwable;
  }
  public Throwable getThrowable() {
    return t;
  } 
```

}

...

```
 throw Fred.SAM.getThrowable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:36:33.933

为什么不将异常存储在 ArrayList 中？或者，如果要命名索引，可以使用 HashMap。

```
import java.util.ArrayList;
import java.util.HashMap;

public final class ExceptionStorage {
    private static int exceptionCount = 0;

    private static HashMap<String, Exception> indexedExceptions = new HashMap<>();
    private static ArrayList<Exception> exceptions = new ArrayList();

    public static void addException(Exception e) {
        exceptions.add(e);
    }

    public static void putException(Exception e) {
        indexedExceptions.put("Exception" + (++exceptionCount), e);
    }

    public static ArrayList<Exception> getUnindexedExceptions() {
        return this.exceptions;
    }

    public static HashMap<String, Exception> getIndexedExceptions() {
        return this.indexedExceptions;
    }
} 
```

显然，您必须修改代码以使用`[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html "Array List")`or `[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html "HashMap")`，但我认为这将是比使用 Enums 更好的解决方案。

# qt - 如何使 qt qgraphicsview 缩放不影响点画图案？

> ID：13958385
> 
> 赞同：6
> 
> 时间：2012-12-19T18:04:54.043
> 
> 标签：qt, qgraphicsview, qpixmap

我在里面画了几个矩形`QGraphicsView`；我通过`QBrush`使用我的`QPixmap`. 这将按预期以默认缩放级别显示。

当我调用`view->scale()`时，矩形显示得更大或更小，正如我预期的那样。然而，Qt 已经对点画图案的各个位进行了缩放，这是意料之中的；我希望它用画笔再次绘制更大或更小的矩形。例如。如果我使用具有一个像素点和像素空间的点画图案，放大后，我想看到一个更大的矩形，但我想要具有相同像素间隙的相同点画图案。这是否可以以某种方式实现？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T13:56:30.650

我在 Qt 中开发 EDA 工具伴侣时遇到了同样的问题。

经过一番尝试，我所做的（并且似乎对我有用）是创建一个自定义图形项。在绘画方法上，我这样做：

```
QBrush newBrush = brush_with_pattern;
newBrush.setTransform(QTransform(painter->worldTransform().inverted()));
painter->setBrush(newBrush); 
```

那就是将项目的逆变换应用于画笔（因此它不会缩放）。

我认为 setDashOffset 仅用于形状的边框（不是填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:58:44.910

你可以使用 QPen::setDashOffset：

[http://harmattan-dev.nokia.com/docs/library/html/qt4/qpen.html#setDashOffset](http://harmattan-dev.nokia.com/docs/library/html/qt4/qpen.html#setDashOffset)

您需要根据场景缩放/缩放级别设置偏移量。您可以通过调用 scene() 来获取指向项目中场景的指针，但不要忘记检查 NULL，因为它在未添加到场景时将为 NULL（尽管理论上您不应该得到一个 paint()不在场景中时）。

另一种选择是使用：

[http://doc.qt.digia.com/qt/qpainter.html#scale](http://doc.qt.digia.com/qt/qpainter.html#scale)

撤消在您的画家上缩放的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T16:37:09.863

如果有人仍在关注此[问题，此处](https://stackoverflow.com/questions/41538932)有关标准填充模式而不是像素图填充模式的缩放的相关问题可能会有所帮助。基本上，可能无法修改标准填充图案的缩放比例（列出了一些解决方法），但是，如果您正在寻找不同的颜色，尤其是灰度级，使用 alpha 值会产生所需的效果 - 而且要少得多令人费解。

# php - 雄辩的如何搜索关系的值

> ID：13958386
> 
> 赞同：4
> 
> 时间：2012-12-19T18:04:54.397
> 
> 标签：php, laravel, eloquent

我有以下表格，其中包含以下字段：

**人**：身份证，姓氏，名字

**phonebookentry** : id, 姓名

我有以下两个模型：

```
class Person extends Eloquent
{

    public static $table = 'personphonebookentries';

    public function phonebookentry()
    {
        return $this->has_one('Phonebookentry', 'id');
    }

} 
```

```
class Phonebookentry extends Eloquent
{
     public function person()
    {
        return $this->belongs_to('Person', 'id');
    }

} 
```

我不知道如何获取所有具有特定名字或特定号码的人。

我试过了 ：

```
Person::or_where('firstname', 'LIKE', '_name_')->phonebookentry()->or_where('number', '=', '_number_')->get(); 
```

我需要帮助来了解如何完成这项工作:)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T22:20:34.223

在这种情况下，一个简单的关系不会有帮助，因为您想根据作为第二个查询的关系来约束 People 结果。

使用此模式，您需要进行连接，以防您将 person_id 添加到 phonebookentry 表中：

```
Person::join('phoneboookentry', 'person.id', '=', 'phoneboookentry.person_id')
    ->where('person.firstname', 'LIKE', "%$name%")
    ->or_where('phoneboookentry.number', '=', $number)
    ->get('person.*'); 
```

但是对于每个一对一的关系，强烈建议考虑模式，很有可能合并表会更好。过度规范化通常没有帮助。

还有一些杂项：

1.  您有“personphonebookentries”作为表格，但您说您有 person 表格。
2.  将 id 指定为外键并不是一件好事，保持两个表同步只会产生问题。
3.  到处使用都是不必要和错误的`or_where()`，只在需要的时候使用它。
4.  从您在处理查询对象的模型上运行任何查询或关系方法的那一刻起，您就无法对查询对象执行关系方法。( `phonebookentry()`) 你必须有一个结果模型。

# razor - 如果两个模型具有同名的属性，则使用 HTML 扩展的值与应有的值不同

> ID：13958390
> 
> 赞同：6
> 
> 时间：2012-12-19T18:05:08.110
> 
> 标签：razor, properties, asp.net-mvc-4, htmlextensions

这是我的场景。

1.  创建了两个具有共同属性名称的模型

    ```
    public class SimpleModel1
    {
    // Some Properties

    public string Property1 { get; set; }

    }

    public class SimpleModel2
    {
    // Some Properties

    public string Property1 { get; set; } // Same name as Property1 in SimpleModel1

    } 
    ```

2.  在返回看起来像这样的视图的操作（例如索引）中使用 SimpleModel1

    ```
    @model MvcApplication2.Models.SimpleModel1

    @{
    ViewBag.Title = "Home Page";
    }

    @using (Html.BeginForm("Test", "Home", FormMethod.Post))
    {
      <label>Enter something here</label>
       @Html.TextBoxFor(m => m.Property1)
       <button type="submit">Submit</button>
    } 
    ```

3.  将值提交给以 SimpleModel1 作为参数的 Test 操作，执行一些工作，并返回一个采用 SimpleModel2 的视图

    ```
    public ActionResult Test(SimpleModel1 model)
    {
        SimpleModel2 newModel = new SimpleModel2();

        // Do Something

        newModel.Property1 = "Something different than model's Property1";

        return View(newModel);
    } 
    ```

4.  Test.cshtml（Test 操作返回的视图）如下：

    ```
    @model MvcApplication2.Models.SimpleModel2

    @{
        ViewBag.Title = "Test";
    }

    <h2>Test</h2>

     @* Model Propery without using HTML extension*@
     @Model.Property1

     @* Model property using HTML extension (Incorrect) *@

     @Html.TextBoxFor(m => m.Property1)
     @Html.HiddenFor(m => m.Property1)
     @Html.TextAreaFor(m => m.Property1)

      @* Correct Value *@
     <input value="@Model.Property1" /> 
    ```

我期望的是，Property1 的所有值都将是“与模型的 Property1 不同的东西”，如测试操作中设置的那样。但事实证明，使用 Html 扩展（Html.TextBoxFor、Html.HiddenFor 等）的那些具有发布到测试操作的 Property1 值。例如，如果我将“多么惊喜”（SimpleModel1 的 Property1）发布到测试操作，SimpleModel2 的 Property1 的值也是“多么惊喜”，无论我将其设置为什么。

我不知道发生了什么。对我来说似乎是一个错误。有谁有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T18:16:01.870

执行**POST**时会看到此行为，因为已发布的数据保留在 ModelState 中。Property1 的值将是为此属性发布的任何值。为了查看您的新值，您需要在 ActionResult 测试中包含这行代码：

```
ModelState.Clear(); 
```

作为一般规则，只要记住包含这一行，以防您发布数据、修改数据并尝试在返回的视图中查看修改后的数据。

# c# - 在 C# 中使用 |= 运算符时会发生什么？

> ID：13958393
> 
> 赞同：5
> 
> 时间：2012-12-19T18:05:16.930
> 
> 标签：c#, .net, operators, assignment-operator

如果我使用这样的东西：

```
xr.Settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings; 
```

究竟是什么`|=`成就？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T18:07:07.553

`|=`是将两个值组合在一起并将结果分配给第一个变量的快捷方式。

```
xr.Settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings; 
```

相当于：

```
xr.Settings.ValidationFlags = xr.Settings.ValidationFlags | XmlSchemaValidationFlags.ReportValidationWarnings; 
```

`|`是 C# 中的 OR 运算符，因此上面的代码有效地`ReportValidationWarnings`在 value 上设置了标志`xr.Settings.ValidationFlags`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:06:29.927

在这种情况下`XmlSchemaValidationFlags.ReportValidationWarnings`，您在`ValidationFlags`.

`|=`通常是按位运算`or`符，以防`Flags`它用于设置标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:07:15.073

这是布尔 OR-Equals。

相当于：

```
xr.Settings.ValidationFlags = xr.Settings.ValidationFlags | XmlSchemaValidationFlags.ReportValidationWarnings; 
```

这是确保`XmlSchemaValidationFlags.ReportValidationWarnings`设置的位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:07:36.463

那是一个复合作业。基本上你在做：

```
xr.Settings.ValidationFlags = 
    xr.Settings.ValidationFlags | 
    XmlSchemaValidationFlags.ReportValidationWarnings; 
```

这基本上会添加`XmlSchemaValidationFlags.ReportValidationWarnings`到`xr.Settings.ValidationFlags`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T18:44:55.137

正如其他人所提到的， a |= b 是 a = a | 的简写。b，就像 a += b 是 a = a + b 的缩写一样。现在是什么 | 运营商呢？它可以重载，但它的一般用途是按位或。它类似于 || 运算符，但它是逐位工作的（将每个位视为布尔值）：

假 || 真的是真的

0100 | 0110 是 0111

最后一件事是传递一堆布尔标志的经典方法之一是将它们编码为整数。一个 32 位整数可以容纳 32 个单独的标志，每个位一个。要设置标志，请将相应的位设置为 1。

所以 0000 没有设置标志，而 1001 在位置 1 和 4 设置了标志。

然后 |= 是设置特定标志的便捷方法。

int my_flags = 0;

我的标志 |= 验证标志；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-14T12:33:22.647

[driis 的回答](https://stackoverflow.com/a/13958419/1304050)是正确的。

`|=`与在条件测试中使用运算符相同，`|`如下例所示：

```
xr.Settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings 
```

**在语义上等同于**

```
xr.Settings.ValidationFlags = xr.Settings.ValidationFlags | XmlSchemaValidationFlags.ReportValidationWarnings 
```

## `|`关于vs的附加说明`||`

我发现另一个有用的花絮是[**逻辑 OR**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/boolean-logical-operators#logical-or-operator-) ( `|`) 和[**条件 OR**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/boolean-logical-operators#conditional-logical-or-operator-) ( `||`) 之间的区别：

逻辑 OR 将始终评估两个操作数，即使第一个是`true`. 条件 OR 只会在第一个是 时评估第二个，如果`false`不需要执行第二个操作数来确定最终结果，则有效地短路。

# jquery - ajax调用后第二次找不到jquery ui组合框

> ID：13958399
> 
> 赞同：0
> 
> 时间：2012-12-19T18:05:45.050
> 
> 标签：jquery, autocomplete, combobox, sitemesh

我们在 sitemesh 装饰器 JSP 的 header 标记中加载 jquery 脚本，如下所示：

```
<head>
<script src="${prefix}/resources/js/jquery/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="${prefix}/resources/js/jquery/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
</head> 
```

现在我正在创建一个自动完成组合框，例如 @ [http://jqueryui.com/resources/demos/autocomplete/combobox.html](http://jqueryui.com/resources/demos/autocomplete/combobox.html)

单击标签时，我将另一个 jsp 加载到如下对话框中：

```
$.ajax({
url: <some url>,
success: <create my dialog>
}); 
```

对话框中的这个 JSP 也被 sitemesh 修饰，并且在它的标记中具有相同的脚本。对话工作正常，但现在在这个 ajax 调用之后我的 combobox() 停止工作并且在控制台上的错误是：

> $().combobox 不是一个函数..

这对我来说是一个紧迫的缺陷。以前有人遇到过这个问题吗？它与 jquery 脚本缓存或加载有关吗？

我们可以在 Firefox 和 IE 9 中重现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:11:08.053

ComboBox 不是 jQueryUI 的典型功能。如果您检查您提供的演示页面的页面源代码，您会注意到该小部件是在从第 31 行开始的脚本标记中声明的：

```
 <script>
(function( $ ) {
    $.widget( "ui.combobox", { //... et cetera 
```

在组合框演示中显示的 JS 文件中的某处包含小部件定义，并查看这是否解决了您的问题。

# dns - 是否可以检测 HOSTS 文件解析与 DNS 解析

> ID：13958402
> 
> 赞同：3
> 
> 时间：2012-12-19T18:05:53.640
> 
> 标签：dns, hosts

出于诊断目的，我希望能够查明客户是否由于 HOSTS 文件条目而出现主机名故障。是否可以检测到 DNS 查询已被 HOSTS 或 DNS 解析？

（当然我对多种操作系统很好奇：Windows、HPUX、AIX、Linux、Mac）

我怀疑如果我可以绕过机器的主机名解析排序配置，这可能是可能的。当然，直接读取 HOSTS 文件是一种选择，但如果存在内存问题（即病毒，或者只是更改以删除错误配置但尚未生效），那么它不会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:15:52.023

在 Windows 上，如果您正在查找，`server1`您可以将输出中打印的 IP 地址`ping server1`与`nslookup server1`命令的输出进行比较。

此 URL 指出，在 Windows 上，`nslookup`不使用该`hosts`文件：

[https://serverfault.com/questions/95036/what-c​​an-cause-a-dns-lookup-to-ignore-a-hosts-file-entry](https://serverfault.com/questions/95036/what-can-cause-a-dns-lookup-to-ignore-a-hosts-file-entry)

两者`ping server1`并`nslookup server1`打印它们关联的 IP 地址`server1`，但`ping`将使用该`hosts`文件（在我的系统上）`nslookup`而不使用。

# regex - 正则表达式匹配，无论间距如何

> ID：13958403
> 
> 赞同：2
> 
> 时间：2012-12-19T18:05:56.970
> 
> 标签：regex

我正在尝试用更新的函数替换旧的函数调用。

我正在寻找这样的东西：

`$myvar = myclass::getmyvar();`

但是，由于代码格式，制表符/间距可能会有很大差异。如何匹配 和 之间的任意数量的制表符或`$myvar`空格`= myclass::getmyvar();`？

我已经尝试过这样的变体：

`$myvar[* \t]=[* ]myclass::getmyvar();`

没有成功。

我想将它传递给如下语句：

```
grep -rl '$myvar[* \t]=[* ]myclass::getmyvar();' ./ | xargs sed -i 's/$myvar[* \t]=[* ]myclass::myvar();/$myvar = mynewclass::myvar();/g' 
```

这是正确的语法，还是我应该使用 egrep？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:07:45.810

你在寻找`\s*`，意义`0 or more whitespace characters`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:08:14.223

您需要移动`*`字符类的外部，因此要匹配任意数量的空格或制表符，您可以在正则表达式中使用以下内容：

```
[ \t]* 
```

您也可以使用`\s*`，但请注意，这也将匹配换行符，听起来您只对制表符和空格感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:10:23.093

我相信您的问题在于您的位置`*`而不是逃避`$`，`(`并且`)`。这将产生更好的结果。

```
\$myvar[ \t]*=[ ]*myclass::getmyvar\(\); 
```

此外，您可以使用`\s`而不是字符类对其进行更新以匹配任何空格。

```
\$myvar\s*=\s*myclass::getmyvar\(\); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:08:45.497

应该是这样的。您不应该在 [] 大括号中包含 *，并转义 $ 和 () 大括号：

```
\$myvar[\s\t]*?=[\t\s]*?myclass::getmyvar\(\); 
```

包括 *？使正则表达式变得不贪婪。

# vb.net - RateService 未在 VB.NET 中使用 FedEx WSDL 定义

> ID：13958405
> 
> 赞同：2
> 
> 时间：2012-12-19T18:06:09.627
> 
> 标签：vb.net, wsdl, fedex

我在 Visual Studio 2007 中使用 VB.NET。我正在尝试使用 FedEx WSDL 将 FexEd 评级服务集成到我公司的一个网站中。据我所知，我与 WSDL 的连接/集成似乎工作正常（第一次使用 WSDL），因为它没有抱怨未定义的方法等。

例外情况是，当我尝试创建一个新实例时`RateService`出现错误

> “未定义类型‘费率服务’。”

我使用的声明与 FexEx 提供的示例代码中的声明完全相同，`Dim service As RateService = New RateService()`并且具有相同的导入语句。

谁能想到我在这门课上遇到问题的原因？或者有没有用过fedex服务的可以指点一下？如果您需要更多信息，请随时问我问题，因为我很可能遗漏了一些重要的信息。

提前致谢。

这是 urbanlemur 要求的 RateService 构造函数的开头

```
Imports System.ComponentModel
Imports System.Diagnostics
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Xml.Serialization

' 
' This source code was auto-generated by wsdl, Version=2.0.50727.1432.
' 

''' <remarks/>
<System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.1432")> _
<System.Diagnostics.DebuggerStepThroughAttribute> _
<System.ComponentModel.DesignerCategoryAttribute("code")> _
<System.Web.Services.WebServiceBindingAttribute(Name := "RateServiceSoapBinding", [Namespace] := "http://fedex.com/ws/rate/v13")> _
Public Partial Class RateService
    Inherits System.Web.Services.Protocols.SoapHttpClientProtocol

    Private getRatesOperationCompleted As System.Threading.SendOrPostCallback

    ''' <remarks/>
    Public Sub New() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:57:07.213

只是为了验证您是否创建了代理类？（听起来像你这样做，但从来没有伤害过问）

[从 WSDL 文件在 Visual Studio 中创建 Web 服务代理](https://stackoverflow.com/questions/4304281/create-web-service-proxy-in-visual-studio-from-a-wsdl-file)

您的网络配置中是否定义了连接？

```
<applicationSettings>
    <RateWebServiceClient.Properties.Settings>
      <setting name="RateWebServiceClient_RateServiceWebReference_RateService" serializeAs="String">
        <value>##fedex webservice address ##</value>
      </setting>
    </RateWebServiceClient.Properties.Settings>
  </applicationSettings> 
```

# python - c速度cython属性，可能吗？备择方案？

> ID：13958406
> 
> 赞同：3
> 
> 时间：2012-12-19T18:06:23.127
> 
> 标签：python, properties, cython, getter-setter

我有一个 python 类，它有一些属性。我将类转换为 cython 扩展类型并在其中定义属性，使用属性[http://docs.cython.org/src/userguide/extension_types.html#properties](http://docs.cython.org/src/userguide/extension_types.html#properties)的 cython 语法。我看到必须使用 def 声明属性，否则会出现编译错误“此处不允许 cdef 语句”。

我的类也在另一个 cython 模块中使用，我想以 c 速度而不是 python 速度访问该类的属性，否则它会否定我通过使用 cython 获得的加速。我知道如果我使用像 get_params() 和 set_params(params) 这样的 cdef setter 和 getter 函数会更快，但是如果我做这个改变，那么我也必须在 python 代码中做这件事（这样我的 python 和 cython 代码差异不大并且可以兼容）但这使得python代码的可读性降低....进退两难！

有没有快速访问cython属性的方法？还是您有任何其他建议，这样我就不必更改我的 python 代码来使用 setter 和 getter 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:32:40.043

不是真的，因为描述符只存在于 Python 级别。让您的 Cython 代码实现 getter 和 setter，并创建一个通过属性公开它们的 Python 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:00:40.883

要使该属性在 python 和 cython 中都可用，您必须将其公开，例如：

```
cdef class PyBrowser:
    cdef CefRefPtr[CefBrowser] cefBrowser

    cdef public dict clientCallbacks
    cdef public list allowedClientCallbacks
    IF CEF_VERSION == 1:
        cdef public JavascriptBindings javascriptBindings
    cdef public dict userData

    # Properties used by ToggleFullscreen().
    cdef public int isFullscreen
    cdef public int maximized
    cdef public int gwlStyle
    cdef public int gwlExStyle
    cdef public tuple windowRect 
```

# graph - 如何通过标准差绘制 RRD 可堆叠数据以最大限度地提高可读性

> ID：13958409
> 
> 赞同：1
> 
> 时间：2012-12-19T18:06:25.997
> 
> 标签：graph, rrdtool

这是一个非常具体的用途，但它可以派上用场。

想象一下，你有不同的值要堆叠，有些数据变化很大，有些几乎是恒定的。如果使用默认顺序，变量数据堆叠在常量数据下，变量数据会使常量数据有一个非常可变的基数。因此，如果您首先在底部堆叠较少可变的数据，它可能会有所帮助。

示例：这两个图表显示了如何通过堆叠更深的数据来提高可读性，这些数据移动得越少，即标准偏差越小。

![默认图形不利于可读性](../Images/6cdc271557b24c5209b9932d47cd8635.png)
默认图形可能导致可读性差

![提高按标准差排序时的可读性](../Images/46d8817c93eeae6a097b3e3311fb45b7.png)
提高按标准差排序时的可读性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:06:25.997

1.  使用`rrdtool graph`with`PRINT`命令获取数据源的标准差 ( `stdev_array`)
2.  种类`stdev_array`
3.  通过按顺序堆叠绘制图形`stdev_array`

这是 PHP 中的代码，但任何语言都可以做到。
我正在使用 RRDtool 1.4.5
不要忘记定义`$rrd_path`（rrd 文件`$img_path`的路径）、（写入图像的路径）、`$data_sources`（DS 名称的数组，取决于您如何构建 RRD）、`$rrd_colors`（六色）。

```
$rrd_colors_count = count($rrd_colors);
$stdev_command = "rrdtool graph /dev/null ";
foreach ($data_sources as $index => $ds_name)
{
  $stdev_command .= "DEF:serv$index=$rrd_path:$ds_name:AVERAGE ";
  $stdev_command .= "VDEF:stdev$index=serv$index,STDEV PRINT:stdev$index:%lf ";
}
exec($stdev_command, $stdev_order, $ret);
if ($ret === 0)
{
  array_shift($stdev_order); // remove first useless line "0x0" (may depend on your rrdtool version?)
  asort($stdev_order); // sort by standard deviation keeping the indexes
}
else $stdev_order = $data_sources; // backup in case $stdev_command failed

$graph_command = "rrdtool graph $img_path ";
$graph_command .= "AREA:0 ";
foreach ($stdev_order as $index => $useless)
{
  $ds_name = $data_sources[$index];
  $graph_command .= "DEF:line$index=$rrd_path:$ds_name:AVERAGE ";
  $graph_command .= "STACK:line$index" . $rrd_colors[$index%$rrd_colors_count].' ';
}
exec($graph_command, $out, $ret);
// check $ret (and $out) to see if all is good 
```

# java - JAVA HashTable 对象将在哪里同步？

> ID：13958412
> 
> 赞同：-2
> 
> 时间：2012-12-19T18:06:33.500
> 
> 标签：java, multithreading, hashtable, synchronized

一开始我以为所有的方法`HashTable`都是同步的。查找java doc，发现没有一个方法被声明为同步的。那么一个 JAVA`HashTable`对象究竟在哪里被定义为同步呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:10:30.663

大多数方法都是同步的。如果您查看源文件，您可以看到同步关键字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:11:08.350

如果您查看 的[来源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Hashtable.java)，`Hashtable`您可以看到我们用于迭代或添加或删除的类的每个方法都是`synchronized`，因此我们可以说`Hashtable`是同步的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:10:26.717

[类描述](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)的最后一行说明

> 从 Java 2 平台 v1.2 开始，该类被改进为实现 Map 接口，使其成为 Java Collections Framework 的成员。**与新的集合实现不同，Hashtable 是同步的**。如果不需要线程安全的实现，建议使用 HashMap 代替 Hashtable。如果需要线程安全的高并发实现，那么建议使用 ConcurrentHashMap 代替 Hashtable。

（重点补充）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:10:34.320

Hashtable 是原始实用程序集合之一，所有这些都是同步的。来自所有方法之前的 Javadoc 描述：“从 Java 2 平台 v1.2 开始，该类已被改造为实现 Map，使其成为 Java 集合框架的一部分。与新的集合实现不同，Hashtable 是同步的。 "

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T18:11:34.627

在 javadoc: 中的 java.util.Hastable:

> 与新的集合 * 实现不同，{@code Hashtable} 是同步的。

方法是同步的！

# spring - Spring 3.1 无法加载配置类：

> ID：13958414
> 
> 赞同：1
> 
> 时间：2012-12-19T18:06:40.100
> 
> 标签：spring, websphere, cglib

我正在开发带有 Spring 3.1.0 的 Rest Service 的项目。发布。我正在使用 Config 类来加载 bean。正如建议的那样，使用 cglib 2.2 和 asm-3.3 jars。

这在 websphere 8.5 中失败，但有以下异常。但适用于 Apache Tomcat 7.0。

```
[12/19/12 12:47:26:439 EST] 00000062 webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[dispatcher]: java.lang.IllegalStateException: Cannot load configuration class: com.hps.config.ApplicationConfig
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:313)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:197)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:620)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1651)
    at com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize(WebAppImpl.java:414)
    at com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication(WebGroupImpl.java:88)
    at com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication(VirtualHostImpl.java:169)
    at com.ibm.ws.webcontainer.WSWebContainer.addWebApp(WSWebContainer.java:746)
    at com.ibm.ws.webcontainer.WSWebContainer.addWebApplication(WSWebContainer.java:634)
    at com.ibm.ws.webcontainer.component.WebContainerImpl.install(WebContainerImpl.java:426)
    at com.ibm.ws.webcontainer.component.WebContainerImpl.start(WebContainerImpl.java:718)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:1170)
    at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart(DeployedApplicationImpl.java:1370)
    at com.ibm.ws.runtime.component.DeployedModuleImpl.start(DeployedModuleImpl.java:638)
    at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:968)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:769)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplicationDynamically(ApplicationMgrImpl.java:1364)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:2169)

Caused by: java.lang.VerifyError: JVMVRFY007 final method overridden; class=net/sf/cglib/core/DebuggingClassWriter, method=visit(IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)V
    at java.lang.ClassLoader.defineClassImpl(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:262)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:69)
    at com.ibm.ws.classloader.CompoundClassLoader._defineClass(CompoundClassLoader.java:852)
    at com.ibm.ws.classloader.CompoundClassLoader.localFindClass(CompoundClassLoader.java:762)
    at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:585)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:627)
    at java.lang.J9VMInternals.verifyImpl(Native Method)
    at java.lang.J9VMInternals.verify(J9VMInternals.java:85)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:162)
    at net.sf.cglib.core.AbstractClassGenerator.<init>(AbstractClassGenerator.java:38)
    at net.sf.cglib.core.KeyFactory$Generator.<init>(KeyFactory.java:127)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:112)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
    at net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:228)
    at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:136)
    at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:109)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:303)
    ... 109 more 
```

有关如何解决此问题的任何建议。

尝试使用不同版本的 cglib 和 asm jar，但没有运气..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:26:39.463

确保所有依赖的 JAR 文件都存储在`WEB-INF/lib`WAR 文件的目录中，包括 Sam-3.3。如果您使用 Maven，请确保您没有排除此 JAR 或无意中将其范围设置为`provided`.

现在您在 WebSphere 中部署应用程序，确保将应用程序类加载之前设置为应用程序优先（父类最后）。要在 WebSphere 中执行此操作，您需要找到链接`Manage Modules`并找到类加载链接，实际上不记得它在 WebSphere 中是什么但是应该很容易找到。这应该可以解决您的问题。

更新：刚刚注意到您提供的链接已经建议使用 parent last。在 WebSphere 中，我发现这是必须的，否则您将遇到许多此类问题，而且升级变得更加容易！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:16:35.333

我能够解决这个问题..

问题出在 Websphere 8.5 它有自己的 asm4.0 jar 版本。而spring3.1使用的cglib2.2 jar只兼容asm3.3。websphere的asm4.0 jar是罪魁祸首..解决方法是使用cglib-nodep jar而不是cglib2.2 jar

[http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14880673](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14880673)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T18:02:55.887

这似乎是Websphere 8.5中的一个错误（ [PM71336 ）](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM71336)

该错误已在 Websphere V8.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24034672中修复](http://www-01.ibm.com/support/docview.wss?uid=swg24034672)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T19:27:03.397

使用 cglib-nodep jar 代替 cglib2.2 jar。另外，不要忘记从你的库中删除 asm3.3 jar。最初我没有删除仍然导致问题的 asm3.3 jar。

# javascript - PHP XML DOM - 加载 XML 文件

> ID：13958418
> 
> 赞同：0
> 
> 时间：2012-12-19T18:06:59.753
> 
> 标签：javascript, php, xml, xmldom

我正在创建一个使用 PHP 的网页，并尝试根据用户的选择加载 XML 文件。我查看了各种网站和论坛，看看我是否做错了什么，但即使我尝试复制代码，它似乎也不起作用。我得出的结论是，我需要一双全新的眼睛来注意到一些我可能没有注意到的东西。当我从下拉列表中选择一个项目时，我希望它加载选定的 XML 文件并显示其中的信息，但是使用代码我到目前为止什么都没有发生。我从下拉列表中选择一个选项，但没有任何反应。我认为这是加载 XML 文件的问题，因为当我更改 loadXML() 函数中的代码以输出所选选项时，它起作用了。我只是不知道为什么它不起作用。

```
<html>
<head>
<h1><u>State Information</u></h1>
</head>
<body>
<p><b>Please select an area of the US in the dropdown list below.</b></p>
<p><select name="area" onchange="loadXML(this.value)">

<?php
//set directory and open it
$xmldir = 'XML';
$dir = opendir($xmldir);

//create array and read through files in directory
$xmlfiles = array();
while ($file = readdir($dir))
{
//if the first char is not '.' then add to array
if (substr($file,-1,1) !== ".")
{
    $xmlfiles[] = $file;
} else
{
    //do nothing
}
}

echo '<option value="select">Select</option>';

foreach($xmlfiles as $area){ 
      echo '<option value="'.$area.'">'.$area.'</option>'; 
}
echo '</select>';

//close directory
closedir($dir);
?>

</p>
</body>
</html>

<script>
function loadXML($area) {
if (window.XMLHttpRequest)
{
    xhttp=new XMLHttpRequest();
}
else
{
    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xhttp.open("GET",$area,false);
xhttp.send();
xmlDoc = xhttp.responseXML;
x=xmlDoc.getElementsByTagName("name");

for (i=0;i<x.length;i++)
        {
    document.write(x[i].childNodes[0].nodeValue);
    document.write("
       ");
} 
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:15:11.493

您的 xml 文件路径设置不正确，请尝试

```
echo '<option value="XML/'.$area.'">'.$area.'</option>'; 
```

此外，您还有一个多行字符串，这将导致语法错误，请更改

```
 document.write("
   "); 
```

类似于

```
 document.write("\n"); 
```

在页面加载后使用`document.write`也会覆盖整个页面。

# ruby-on-rails - 路由错误：没有路由匹配 [GET] "/users"

> ID：13958429
> 
> 赞同：0
> 
> 时间：2012-12-19T18:07:41.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

当我尝试导航到 localhost:3000/users 时出现此错误

[http://i.imgur.com/8fptg.png?1](http://i.imgur.com/8fptg.png?1)

这是我的 routes.rb 文件：

[http://i.imgur.com/ERoFq.png?1](http://i.imgur.com/ERoFq.png?1)

我已经查看了关于 SO 的类似问题/答案，但它们似乎都有更大的代码库。我相信这应该是一个简单的错误，因为除了脚手架生成的代码，我几乎没有写过任何代码。

如果有帮助，我正在关注迈克尔·哈特尔 (Michael Hartl) 的一本书

由于 Andrew Wei 解决了问题，不得不重新安装 ruby​​ 堆栈（ruby、rails、git、gem、railsinstaller 等）

# java - Lucene 4.0 IndexWriter updateDocument 用于数字项

> ID：13958431
> 
> 赞同：3
> 
> 时间：2012-12-19T18:07:47.230
> 
> 标签：java, lucene, indexing

我只是想知道如何根据数字字段更新（删除/插入）文档。到目前为止，我这样做了：

```
LuceneManager.updateDocument(writer, new Term("id",  NumericUtils.intToPrefixCoded(sentenceId)), newDoc); 
```

但是现在在 Lucene 4.0 中，NumericUtils 类已经变成了我不太理解的[这个。](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/util/NumericUtils.html#intToPrefixCoded%28int,%20int,%20org.apache.lucene.util.BytesRef%29)有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-08T10:39:03.633

使用 Lucene 5.x，这可以通过以下代码解决：

```
 int id = 1;
    BytesRefBuilder brb = new BytesRefBuilder();
    NumericUtils.intToPrefixCodedBytes(id, 0, brb);
    Term term = new Term("id", brb.get());
    indexWriter.updateDocument(term, doc); // or indexWriter.deleteDocument(term); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:21:54.393

使用 Lucene 4，您现在可以像这样创建[IntField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/IntField.html)、[LongField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/LongField.html)、[FloatField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/FloatField.html)或[DoubleField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/DoubleField.html)：

```
document.add(new IntField("id", 6, Field.Store.NO)); 
```

要在修改后编写文档，它仍然是：

```
indexWriter.updateDocument(new Term("pk", "<pk value>"), document); 
```

**编辑：** 这是一种进行包含此数字字段的查询的方法：

```
// Query <=> id <= 7
Query query = NumericRangeQuery.newIntRange("id", Integer.MIN_VALUE, 7, true, true);
TopDocs topDocs = indexSearcher.search(query, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:50:41.873

你可以这样使用它：

首先，您必须设置`FieldType`的数字类型：

```
FieldType TYPE_ID = new FieldType();
...
TYPE_ID.setNumericType(NumericType.INT);
TYPE_ID.freeze(); 
```

进而：

```
int idTerm = 10;
BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
NumericUtils.intToPrefixCoded(id, 0, bytes);
Term idTerm = new Term("id", bytes); 
```

现在您就可以使用它`idTerm`来更新文档了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T18:51:17.317

我会建议，如果可能的话，最好将 ID 存储为关键字字符串，而不是数字。如果它只是一个唯一标识符，那么将索引作为关键字更有意义。这消除了任何与数字格式混淆的需要。

如果它实际上被用作数字，那么您可能需要手动执行更新。也就是说，搜索并获取要更新的文档，使用[tryDeleteDocument](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/IndexWriter.html#tryDeleteDocument%28org.apache.lucene.index.IndexReader,%20int%29)删除旧文档，然后使用 addDocument 添加更新的[版本](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/IndexWriter.html#addDocument%28java.lang.Iterable,%20org.apache.lucene.analysis.Analyzer%29)。据我所知，这基本上就是 updateDocument 所做的。

不过，第一种选择肯定是更好的方法。用作更新 ID 的非数字字段将使生活更轻松。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-29T16:15:12.987

根据[Lucene 4.0.0 的文档](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/StringField.html)，ID 字段必须与 StringField 类一起使用：

“被索引但未标记的字段：整个字符串值被索引为单个标记。例如，这可能用于 'country' 字段**或 'id' 字段**，或您打算用于排序的任何字段或通过字段缓存访问。”

我和你有同样的问题，我通过做出这个改变解决了这个问题。之后，我的更新和删除工作完美。

# maven-3 - 如何让 Maven 安装子模块 pom？

> ID：13958447
> 
> 赞同：0
> 
> 时间：2012-12-19T18:08:25.107
> 
> 标签：maven-3, nexus

我有一个项目在我的笔记本电脑上运行良好。今天我开始在我们的 Bamboo 服务器上为此设置构建。一切都签入。我的笔记本电脑和构建服务器都使用 Maven 3.0.4。

我有一个顶级聚合器 pom，它指定了几个模块，但是这个 pom 不是任何模块的父级。我确实使用了父 pom，但是这些父母在依赖它们的子模块的对等子模块中，并且我在所有 pom 中都有空白的“relativePath”元素。

在顶级聚合器 POM 的 Bamboo 构建中，我看到几个这样的错误：

[错误] 项目 com.example.cde:java-project-parent:1.0.1 (/volatile/bamboo/bamboo3.4.3_data/xml-data/build-dir/FOO-BUILD-JOB1/java-project-parent /pom.xml) 有 1 个错误 2012 年 12 月 18 日 16:40:21 [错误] 不可解析的父 POM：未能在[http://中找到 com.example.cde:project-parent:pom:1.0.0 hostname.net:8081/nexus/content/groups/stuff](http://hostname.net:8081/nexus/content/groups/stuff)已缓存在本地存储库中，直到 nexus 的更新间隔已过或强制更新并且“parent.relativePath”指向本地 POM @ 行之前，不会重新尝试解析6，第 11 列 -> [帮助 2]

“java-project-parent”是父层次结构中的 pom 之一。

我发现在顶级聚合器 pom 中运行“mvn install”实际上并没有在子模块中安装工件。当我查看本地 repo 时，本地 repo 中每个目录中唯一的东西就是像“... pom.lastUpdated”这样的文件。实际的 POM 不存在。

当我让管理员在第一个子模块中手动运行“mvn install”时，实际上将 POM 安装到本地存储库中。我有一种感觉，如果他手动安装其他两个父 pom，则依赖于它们三个的项目的构建将构建良好。

我一定误解了使用子模块构建的一个重要细节。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-19T20:58:20.133

使用强制更新选项运行 maven clean install，如下所示：

> mvn 干净安装 -U

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:17:53.913

尝试执行 mvn -U install 以强制 mvn 访问您的 nexus 存储库以获取更新的 aritfacts 还使用 -e 开关运行 mvn 以查看详细的错误消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:12:32.487

您的层次结构可能已损坏。您可以通过在擦除本地存储库后在本地计算机中构建它来测试它。您很可能会发现与构建机器相同的故障。

要修复它，我建议删除所有相对路径元素并调整结构，以便构建可以正常工作。理想情况下，您甚至可以将纯父项目分解为单独的项目并将它们发布到您的存储库管理器中，以便任何其他构建从那里获取它们。

# php - 显示一条sql查询的结果数

> ID：13958448
> 
> 赞同：0
> 
> 时间：2012-12-19T18:08:25.683
> 
> 标签：php, sql

我想计算连接表中显示的每个值的行数

2张桌子（活动和地点）

我想计算每个位置的事件（表事件）。名称（表位置）

```
 $resultN = doQuery("SELECT e.PkID 
                    FROM " . HC_TblPrefix . "events e 
                            LEFT JOIN " . HC_TblPrefix . "locations l ON (e.LocID = l.PkID)
                    WHERE DATE(StartDate) > DATE(CURDATE())
                    "); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:17:09.583

您可以使用下面的查询来计算结果的数量，其中

```
SELECT l.name ,Count(e.PkID) 
FROM " . HC_TblPrefix . "events e 
LEFT JOIN " . HC_TblPrefix . "locations l ON (e.LocID = l.PkID)
WHERE DATE(StartDate) > DATE(CURDATE())
GROUP BY l.name 
```

此查询的结果将是这样的

位置 | 数数

马德里 6

西雅图 91

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:14:59.607

这应该有帮助

```
SELECT COUNT(*), l.name from events AS e
    JOIN locations AS l ON e.locid = l.locid
    WHERE DATE(startdate) > DATE(CURDATE())
    group by l.name 
```

# visual-studio - VS2010构建顺序影响我的构建是否成功

> ID：13958450
> 
> 赞同：2
> 
> 时间：2012-12-19T18:08:35.313
> 
> 标签：visual-studio, oracle

我有一个用 Pro*C（带有嵌入式 Oracle SQL 的 C）编写的应用程序，我在 VS2008 中使用自定义构建文件进行预处理。源是 .m4 格式（出于遗留原因 - 我会在某个时候摆脱它，但它在我的优先级列表中并不高）。.m4 由 M4 实用程序处理为 .pc（Pro*C 文件），然后由 Oracle ProC 实用程序转换为 .C 文件。

我们的客户端同时使用 Oracle 10 和 Oracle 11 客户端，因此我为每个数据库版本设置了一个项目，因为它们需要使用不同的 Oracle 版本构建。两个项目都使用相同的源代码——唯一的区别在于规则文件。

使用 VS2008 时，我在此过程中从未遇到任何问题。当我将项目移至 VS2010（将规则文件转换为 .xml、.props 和 .targets 文件）时，我开始收到构建错误，其中我的自定义构建规则为其中一个项目返回了错误代码。

有趣的是，每隔一次我“重建所有”，失败的项目和项目成功的切换（即第一次oracle10项目成功和oracle11项目失败，第二次oracle10失败和oracle11成功）。每次我构建时，成功的项目都会可靠地交替，尽管它似乎总是第一个要处理的项目（不确定为什么 Visual Studio 不会每次都从同一个项目开始）。

如果我单独构建每个项目，我没有任何问题。如果我创建解决方案级别的项目依赖项，无论哪个项目引用哪个，我都没有任何问题。

因此，尽管我找到了解决方法，但我很好奇是什么导致了这个问题的开始。

PS - 我对 StackOverflow 很陌生，所以如果我在问这个问题时遗漏了什么，我提前道歉。让我知道是否还有其他可以帮助解决问题的方法。

# javascript - 将成功添加到双 jquery/ajax 帖子

> ID：13958455
> 
> 赞同：3
> 
> 时间：2012-12-19T18:09:04.733
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我正在使用以下内容将表单数据从 Web 应用程序发布到服务器端 php 和 quickbase。fill.php 处理签名，将其附加到 pdf，然后通过电子邮件发送结果。

一切正常，除了这部分我没有真正的成功功能：

```
$('#sendbtn').click(function(){

    signatures();

    $.post( 'https://www.quickbase.com/db/dbname?act=API_AddRecord', $('form').serialize());

    $.post( 'fill.php', $('form').serialize(), $.mobile.changePage('#successpop', {transition: 'pop', role: 'dialog'}));

}); 
```

弹出窗口显示，但它不是任何成功的真正指标。在显示成功弹出窗口之前，如何从其中一个或两个帖子中获得回复？有条件地从一个帖子转到另一个帖子会很好，但我并不担心 QuickBase 帖子。在显示成功之前，我肯定需要确认 fill.php 帖子。

我喜欢这个的是它避免了重定向到我的应用程序之外的 url。

谢谢你的帮助！！

```
<form action="" encoding='multipart/form-data' encType='multipart/form-data'>
<input type=text name=_fid_6 >
<input type=text name=_fid_7 >
<input type=text name=_fid_8 >
<input type="hidden" name="img" id="img" />
<input type="button" value="Sign!" id="sendbtn" />
</form>  

        <script>
            $(document).ready(function() {
                $("#signature").jSignature()
            })
            function signatures(){
                var $sigdiv = $("#signature");
                var datax = $sigdiv.jSignature("getData","image");
                $('#img').val(datax);
                $sigdiv.jSignature("reset")
            }
        </script>

<script>
$(document).ready( function(){
    $('#sendbtn').click(function(){

        signatures();

        $.post( 'https://www.quickbase.com/db/dbname?act=API_AddRecord', $('form').serialize());

        $.post( 'fill.php', $('form').serialize(), $.mobile.changePage('#successpop', {transition: 'pop', role: 'dialog'}));

    });
});
</script>

<div data-role="page" id="successpop">
<div data-role="header" data-theme="c">
<h1>QAF Sent</h1>
</div>
<div data-role="content" data-theme="d">    
<h2>Your QAF has been sent</h2> 
<p><input type="button" data-inline="true" data-theme="b" value="Begin New QAF" data-icon="back" onclick="clearForm();"/></p>
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:33:09.863

其中一个 $.post() 将首先完成，一个将在第二个完成。您不一定知道在第一个完成时设置为 true 的全局变量（如布尔值），然后添加对 true 的检查。当成功函数将值视为 true 时，它​​会调用 onDoubleSuccess() 函数。像这样（[演示](http://jsfiddle.net/qtTn6/1/)）：

```
<script>
  $(document).ready( function(){
    $('#sendbtn').click(function(){
      var finishedFirstPost = false,
      onDoubleSuccess = function() {
        //code goes here
        $.mobile.changePage('#successpop', {transition: 'pop', role: 'dialog'});
      };
      signatures();
      $.post(
        'https://www.quickbase.com/db/dbname?act=API_AddRecord',
        $('form').serialize(),
        function() {
          if(finishedFirstPost) {
            onDoubleSuccess();
          } else {
            finishedFirstPost = true;
          }
        });
      $.post(
        'fill.php',
        $('form').serialize(),
        function() {
          if(finishedFirstPost) {
            onDoubleSuccess();
          } else {
            finishedFirstPost = true;
          }
        });
    });
  });
</script> 
```

[此外，您不能在没有CORS 支持](http://www.w3.org/TR/cors/)的情况下向外部域执行 HTTP POST，因此您应该将 Quickbase 更改`$.post()`为`$.get()`. 这是显示这应该有效的[API 文档。](http://www.quickbase.com/api-guide/add_record.html)

# google-app-engine - 使用 gevent 运行 remote_api_shell.py

> ID：13958457
> 
> 赞同：0
> 
> 时间：2012-12-19T18:09:22.597
> 
> 标签：google-app-engine, gevent

我有一个相对简单的脚本，用于在我的数据上运行映射作业，我希望它通过使用 gevent 从数据存储区进行非阻塞读取来运行得更快。

我尝试添加`gevent.monkey.patch_socket()`到顶部`remote_api_shell.py`，但是在我登录后，它会抛出一个`urllib2.URLError`（[回溯](https://gist.github.com/4338945)）。

我是 GAE 和 gevent 的新手。有没有更简单的方法来完成我想要做的事情？有人可以为我指明正确的方向以使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:59:56.787

## 如果使用`ndb`：

您可以使用`ndb`数据[`*_async`存储操作](https://developers.google.com/appengine/docs/python/ndb/async)：
[https ://developers.google.com/appengine/docs/python/ndb/async](https://developers.google.com/appengine/docs/python/ndb/async)

例如，要按键检索元素列表：

```
ndb.get_multi_async(list_of_keys) 
```

最棒的`ndb`是，对键或实体的每个数据存储操作都有一个异步等效项。

## 如果使用`db`：

您可以使用[异步数据存储 API](https://developers.google.com/appengine/docs/python/datastore/async)。

例如，要按键检索元素列表：

```
from google.appengine.ext import db
db.get_async(list_of_keys) 
```

Where`list_of_keys`包含的元素可以是字符串、 的实例`google.appengine.api.datastore_types.Key`或 的实例 `google.appengine.api.datastore.Entity`。

同样，您可以`db.put_async`在实体`db.delete_async`列表和类似于 的列表中使用`db.get_async`。

# jquery - 滚动按钮

> ID：13958458
> 
> 赞同：2
> 
> 时间：2012-12-19T18:09:25.983
> 
> 标签：jquery, scroll

当我单击 .down 时，我正在尝试滚动 .text 中的文本。我有一个隐藏溢出的简单文本。我在这里有一个例子：http: [//jsbin.com/ofaquh/1/edit](http://jsbin.com/ofaquh/1/edit)

我一直在寻找 jQuery scrollTo 函数，但我想我不知道如何很好地使用它：

```
$(function(){      
    $(".down").click(function() {
        $(".text").scrollTo(20);
    });
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:14:57.173

见小提琴：http: [//jsfiddle.net/AWQzg/](http://jsfiddle.net/AWQzg/)

采用`scrollTop()`

```
$(function(){

$(".down").click(function() {
    $(".text").scrollTop(20);
});

}) 
```

​</p>

请参阅：http: [//jsfiddle.net/AWQzg/1/](http://jsfiddle.net/AWQzg/1/)每次单击时重复滚动 20px

```
$(function(){

$(".down").click(function() {
    $(".text").scrollTop($(".text").scrollTop() + 20);
});

}) 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:14:40.447

`.scrollTo()`实际上是一个插件。

您可以使用`.animate()`and`scrollTop`并获得相同的结果：

```
$(".down").click(function() {
    $(".text").animate({ scrollTop: 200 });
}); 
```

[jsBin 演示](http://jsbin.com/ofaquh/9/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:13:38.117

除非您使用的是 scrollTo 插件，否则我认为您想使用 jQuery 的[`scrollTop`](http://api.jquery.com/scrollTop/)功能。

前任：`$(".text").scrollTop(20);`

或者，在评论中回答您的问题时，请尝试：

```
var move = 20;     
$(".down").click(function() {
    $(".text").scrollTop(move);
        move += 20;
}); 
```

# c - 为什么普通变量不允许位域？

> ID：13958464
> 
> 赞同：4
> 
> 时间：2012-12-19T18:09:57.120
> 
> 标签：c, gcc, struct, unions, bit-fields

我想知道为什么位域可以与联合/结构一起使用，但不能与普通变量（如`int`or ）一起使用`short`。
这有效：

```
struct foo {
    int bar : 10;
}; 
```

但这失败了：

```
int bar : 10; // "Expected ';' at end of declaration" 
```

为什么此功能仅适用于联合/结构而不适用于变量？技术不一样吗？

* * *

**编辑：**

如果允许，您可以创建一个 3 个字节的变量，例如，无需每次都使用 struct/union 成员。这就是我使用结构的方式：

```
struct int24_t {
    int x : 24 __attribute__((packed));
};

struct int24_t var; // sizeof(var) is now 3
// access the value would be easier:
var.x = 123; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:24:54.677

这是一个主观问题，“为什么规范会这样说？” 但我会全力以赴。

函数中的变量通常具有“自动”存储，而不是其他持续时间之一（静态持续时间、线程持续时间和分配的持续时间）。

在结构中，您明确定义了某个对象的内存布局。但是在函数中，编译器会以某种未指定的方式自动为您的变量分配存储空间。`x`这里有一个问题：堆栈上占用了多少字节？

```
// sizeof(unsigned) == 4
unsigned x; 
```

它可能占用 4 个字节，也可能占用 8 个字节，或 12 个字节，或 0 个字节，或者它可以同时放在三个不同的寄存器中，或者堆栈和一个寄存器，或者它可以在堆栈上获得四个位置.

关键是编译器正在为您进行分配。由于您没有进行堆栈布局，因此不应指定位宽。

**扩展讨论：**位域实际上有点特殊。该规范规定相邻的位域被打包到同一个存储单元中。位域实际上不是对象。

1.  您不能`sizeof()`使用位字段。

2.  您不能`malloc()`使用位字段。

3.  您不能`&addressof`使用位字段。

所有这些事情你都可以用 C 中的对象来做，但不能用位域来做。位域是一种特殊的东西，专为结构而设计，其他任何地方都没有。

**关于`int24_t`（更新）：**它适用于某些架构，但不适用于其他架构。它甚至没有*一点*便携性。

```
typedef struct {
    int x : 24 __attribute__((packed));
} int24_t; 
```

在 Linux ELF/x64、OS X/x86、OS X/x64 `sizeof(int24_t) == 3`、. 但在 OS X/PowerPC 上，`sizeof(int24_t) == 4`.

注意 GCC 为加载生成的代码`int24_t`基本上等同于：

```
int result = (((char *) ptr)[0] << 16) |
             (((unsigned char *) ptr)[1] << 8) |
             ((unsigned char *)ptr)[2]; 
```

它是 x64 上的 9 条指令，仅用于加载单个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:06:32.980

结构或联合的成员在其存储位置之间具有关系。由于布局的严格限制，编译器无法以巧妙的方式重新排序或打包它们以节省空间；基本上，编译器在布局结构方面的唯一自由是可以自由添加超出对齐所需数量的额外填充。位域允许您通过承诺 (1) 您不需要这些成员的地址，以及 (2) 您不需要存储某个有限范围之外的值，从而*手动给编译器更多的自由来紧密打包信息。*

如果您谈论的是单个变量而不是结构成员，那么在抽象机器中，它们的存储位置之间**没有关系。**如果它们是函数中的局部自动变量并且它们的地址从未被占用，则编译器可以随意将它们保存在寄存器中或将它们打包在内存中。手动向编译器提供此类提示几乎没有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:21:59.417

因为没有意义。位域声明用于在`struct`. 如果您没有成员，只有一个变量，它的大小是恒定的（这是实现定义的），例如，将`char`几乎可以肯定是 8 位宽的 a 声明为一位或十二位变量是矛盾的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T20:14:26.110

如果一个结构体`QBLOB`包含将四个 2 位位域组合成一个字节，那么与仅包含四个类型字段的结构体相比，每次使用该结构体都将节省三个字节`unsigned char`。如果声明一个数组`QBLOB myArray[1000000]`，这样的数组将只占用 1,000,000 个字节；如果 QBLOB 是一个有四个`unsigned char`字段的结构，它就需要多 3,000,000 字节。因此，使用位域的能力可能会节省大量内存。

相比之下，在大多数体系结构中，将简单变量声明为最佳大小的位域类型与将其声明为最小的合适标准整数类型相比，最多可以节省 15 位。由于访问位域通常比访问标准整数类型的变量需要更多的代码，因此很少有将单个变量声明为位域会提供任何优势的情况。

不过，这一原则有一个明显的例外：一些架构包含的功能可以设置、清除和测试单个位，甚至比读取和写入字节的效率更高。一些此类架构的编译器包含一个`bit`类型，并将该类型的八个变量打包到存储的每个字节中。此类变量通常仅限于静态或全局范围，因为处理它们的专用指令可能仅限于使用某些内存区域（链接器可以确保将任何此类变量放置在它们必须去的地方）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T20:30:08.833

All *objects* must occupy one or more contiguous bytes or words, but a bitfield is not an *object*; it's simply a user-friendly way of masking out bits in a word. The `struct` containing the bitfield must occupy a whole number of bytes or words; the compiler just adds the necessary padding in case the bitfield sizes don't add up to a full word.

There's no *technical* reason why you couldn't extend C syntax to define bitfields outside of a struct (AFAIK), but they'd be of questionable utility for the amount of work involved.

# bash - 如何在 telnet 会话中运行脚本

> ID：13958466
> 
> 赞同：1
> 
> 时间：2012-12-19T18:10:06.173
> 
> 标签：bash, shell, telnet

我想使用 telnet 连接到远程主机，没有用户名/密码验证

```
telnet remotehost 
```

然后我需要输入一些命令进行初始化

然后我需要重复以下命令：

```
cmd argument 
```

参数是从本地文件中读取的，在这个文件中有很多行，每一行都是一个参数，运行一个“cmd参数”后，远程主机会输出一些结果，它可能会输出一行字符串“OK”或输出很多行，其中之一是字符串“ERROR”，我需要根据结果做一些事情。

基本上，脚本是这样的：

```
initialization_cmd  #some initial comands
while read line
do    
  cmd $line
  #here the remote host will output results, how can I put the results into a variable?
  # here I want to judge the results, like
  if $results contain "OK";then
       echo $line >>good_result_log
  else
       echo $line >> bad_result_log
  fi     
done < local_file

 the good_result_log and bad_result_log are local files 
```

有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:22:38.537

这不起作用，因为 echo 将输出到 tty 的标准输出，而不是 telnet 进程的标准输入。

我建议为此任务编写一个[期望脚本。](http://en.wikipedia.org/wiki/Expect)也许你可以适应这样的[东西](https://stackoverflow.com/questions/7789710/expect-script-to-automate-telnet-login)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:18:08.570

至少在四个不同的论坛上同时提出了这个问题。不知道这种创业能赚多少分，但这里有答案链接：

*   [linux论坛](http://www.linuxforums.org/forum/programming-scripting/193839-how-run-scripts-within-telnet-session.html#post913520)
*   [unix.com](http://www.unix.com/shell-programming-scripting/210639-how-run-scripts-within-telnet-session.html)
*   [超级用户.com](https://superuser.com/questions/521716/how-to-run-scripts-within-a-telnet-session/532285#532285)

# python - GAE 是否支持 django 管理表单

> ID：13958475
> 
> 赞同：2
> 
> 时间：2012-12-19T18:10:46.170
> 
> 标签：python, html, django, google-app-engine, datastore

我一直在学习 Django，所以我可以在我的 GAE 应用程序中使用 Django 管理表单。我刚刚读到 GAE 不支持 django 模型，所以我认为它也不支持管理表单。

所以问题是 GAE 是否支持任何其他“表单”或“报告”环境，或者你必须用 html 做所有事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:20:35.047

如果您使用 CloudSQL，则支持 django 模型，您会没事的。

如果您使用 HRD，则让管理页面工作会更加困难。

不支持 django 模型。应用程序引擎 SDK 带有 django 样式的表单，可与 GAE db.Model 字段一起使用。

或者，您可以使用 django-nonrel，它包含一个翻译层，允许 django 模型与 GAE 一起使用。翻译层有各种限制，最突出的是不支持多对多关系。这破坏了管理员使用的 Django 权限模块。我已经看到一些记录在案的尝试来解决这个问题，但我不确定人们有多成功。

# r - 在 R 中使用 mapreduce

> ID：13958477
> 
> 赞同：3
> 
> 时间：2012-12-19T18:10:45.747
> 
> 标签：r, rmongodb

我正在尝试使用 R 进行 mapreduce。有一个名为 mapReduce 的 R 包，但它的功能不适用于复杂的 mapreduce 应用程序。我正在为我的数据库使用 mongodb 并使用 R 的 rmongodb 包来访问它。现在如果你需要做一些 mapredece，有人知道一个好的 R 包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:21:33.377

看看 RHadoop (http://blog.revolutionanalytics.com/2011/09/mapreduce-hadoop-r.html)。也许这可以提供更多...

问候

# jquery - 更改 css onclick/unclick

> ID：13958479
> 
> 赞同：2
> 
> 时间：2012-12-19T18:10:56.940
> 
> 标签：jquery, css

尝试通过单击/取消单击另一个 DIV 来更改 DIV 的边距。

现在有这个：

```
$(document).ready(function(){
    $(".model_drop_pane").hide();
    $(".show-hide").click(function() {
        if ($("#body_machine_novideo").css('margin-top', '50px')) {
            $("#body_machine_novideo").css('margin-top', '300px');
            $(".model_drop_pane").slideToggle();
      } else {
            $("#body_machine_novideo").css('margin-top', '50px');
            $(".model_drop_pane").slideToggle();
    }
    });
}); 
```

想法是：单击 .show-hide DIV 后，`#body_machine_novideo`DIV 将其`margin-top`从 50 像素更改为 300 像素，并且`.model_drop_pane`DIV 也被切换。这部分有效。

问题：第二次单击 .show-hide DIV（“取消单击”）时，`.model_drop_pane`DIV 会按应有的方式切换，但是`#body_machine_novideo`DIV 的边距值不会重置回 50px，而是保持在 300px。

[可以在此处找到该问题的工作演示](http://www.wes-cor.ca/equipment_chemical.php)。单击徽标下方的设备：化学混合站链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:19:38.963

检查你的状态来改变你的观点，不要检查你的观点来找出你的状态。

也就是说，不要将css放在你的JS中。不要检查内联样式以查看您是否设置了该样式，然后在响应中插入硬编码的 css 值。元素是否具有特定的类是你的*状态*。CSS 只是以某些方式呈现某些类。

**CSS**

```
#body_machine_novideo {
  margin-top: 50px;
}

#body_machine_novideo.open {
  margin-top: 300px;
} 
```

**JS**

```
$(document).ready(function(){
    $(".model_drop_pane").hide();
    $(".show-hide").click(function() {
        $("#body_machine_novideo").toggleClass('open');
        $(".model_drop_pane").slideToggle();
    });
}); 
```

看看清洁度有多高？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:14:49.183

您正在比较 的值`$("#body_machine_novideo").css('margin-top')`，但您真正应该做的是使用该`.toggleClass()`方法切换类。

您应该创建一个`class`以添加额外的边距。将表示问题留给 CSS，将行为或交互性留给 JavaScript。更好的是，如果`margin-bottom`将来需要更改 的值，您只需更改样式表，JavaScript 仍将按预期工作。

```
// JavaScript
$(".show-hide").click(function(event) {
    $("#body_machine_novideo").toggleClass('more');
    $(".model_drop_pane").slideToggle();
    event.preventDefault(); // Added: prevent the clicking event to execute normally
}); 
```

还有你的 CSS：

```
/* CSS */
#body_machine_novideo { margin-top:50px; }
#body_machine_novideo.more { margin-top:300px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:14:37.857

改变你的 if 条件

```
if ($("#body_machine_novideo").css('margin-top', '50px'))
// This part is always true.
// You are not comparing the values in the first place 
```

**至**

```
if ( parseInt($("#body_machine_novideo").css('margin-top'),10) === 50) 
```

**或者**

```
if ( +$("#body_machine_novideo").css('margin-top') === 50) 
```

此外，您似乎在控制台中遇到错误，因为代码的其余部分可能无法执行..

**对象 [对象对象] 没有方法 'fancybox'**

# jquery - 如何将两条数据显示到一个文本输入中

> ID：13958486
> 
> 赞同：0
> 
> 时间：2012-12-19T18:11:10.040
> 
> 标签：jquery

在下面的代码中，我有一个 array_push() 命令，它将数据存储在必要的列中：

```
$studentInfo = array();

while ( $studentqrystmt->fetch() ) {

$studentData = array();
$studentData["StudentId"] = $dbStudentId;
$studentData["StudentDOB"] = $dbStudentDOB;
$studentData["StudentYear"] = $dbStudentYear;
$studentData["CourseNo"] = $dbCourseNo;
$studentData["CourseName"] = $dbCourseName;

array_push($studentInfo, $studentData); 
```

现在我尝试使用下面的 jquery 代码做的是，我使用文本输入 id 将每列中的必要数据存储到所需的文本输入中。现在下面的代码适用于存储在其文本输入中的 DOB 和 Year：

```
 $('#studentsDrop').change( function(){

        var studentId = $(this).val();

                if (studentId !== '') {
    for (var i = 0, l = studentinfo.length; i < l; i++)
    {
            if (studentinfo[i].StudentId == studentId) { 

    var currentdob = $('#currentStudentDOB').val(studentinfo[i].StudentDOB);
    var currentyear = $('#currentStudentYear').val(studentinfo[i].StudentYear);

            break;       
        } 
```

但是当我尝试将它包含在上面的函数中时，下面的行不起作用；

```
var currentcourse = $('#currentStudentCourse').val(studentinfo[i].CourseNo." - ".studentinfo[i].CourseName); 
```

在上面的行中，我想要做的是在一个文本输入中显示 CourseNo 和 CourseName，中间用一个分隔`-`。但是当我尝试这样做时，我最终会出现错误说明：

> SyntaxError: 后缺少名称。操作员

错误指向那行代码。我的问题是如何通过在单个文本输入中同时显示 CourseNo 和 CourseName 来修复错误`'#currentStudentCourse'`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:15:16.087

在 JavaScript 中，您应该使用`+`运算符来连接字符串：

```
var currentcourse = $('#currentStudentCourse').val(studentinfo[i].CourseNo + " - " + studentinfo[i].CourseName); 
```

# javascript - “选择”的事件处理程序

> ID：13958489
> 
> 赞同：-5
> 
> 时间：2012-12-19T18:11:17.020
> 
> 标签：javascript, jquery, html, css, select

**一天中的所有美好时光）**

我以[这里](http://tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/)为例， **Demo 6**

一切正常，但是我不知道如何放置处理程序，这将从那里获得价值。也就是当你改变选择器时改变“内容”。这是选择器的代码：

```
 <select id="cd-dropdown" class="cd-select">
    <option value="-1" selected>Choose an animal</option>
    <option value="1" class="icon-monkey">Monkey</option>
    <option value="2" class="icon-bear">Bear</option>
    <option value="3" class="icon-squirrel">Squirrel</option>
    <option value="4" class="icon-elephant">Elephant</option>
    </select> 
```

,但是页面上已经显示

```
 <div class="cd-dropdown">
    <span>Choose an animal</span>
    <input type="hidden" name="cd-dropdown">
    <ul>
        <li data-value="1"><span class="icon-monkey">Monkey</span></li>
        <li data-value="2"><span class="icon-bear">Bear</span></li>
        <li data-value="3"><span class="icon-squirrel">Squirrel</span></li>
        <li data-value="4"><span class="icon-elephant">Elephant</span></li>
    </ul>
   </div> 
```

，我意识到发生了这种“转变”

```
jquery.dropdown.js 
```

* * *

创建了 2 个表单，forma1 的 id = "f1"，同样 form2 c id = "f2"，一个表单确实隐藏了。穿上选择

```
onChange="func(this.value)" 
```

,

```
function a(value){  
$('#f' + value).show() 
if (value == 1) 
    $('#f2').hide() 
else
    $('#f1').hide()
} 
```

中性选择有效，但事实并非如此。如果控制台浏览器调用一个具有一定值的函数，例如： *а(2)*，则一切正常输出。

所以就像把事件处理程序放在哪里，它检查隐藏字段的值？？？

提前致谢

# mongodb - 在 MongoDB 中检索列表的长度

> ID：13958490
> 
> 赞同：3
> 
> 时间：2012-12-19T18:11:20.803
> 
> 标签：mongodb

我正在尝试进行 mongo 查询，在其中获取每个文档中数组的长度，而不检索列表的全部内容。理想情况下，这将是一个沿着这些方向的投影选项：

```
db.log.find({},{entries:{$length: 1}}) 
```

但这不受支持。也许这可以通过新的聚合框架以一种优雅的方式实现？我想出的是：

```
db.log.find({},{"entries.length": 1}) 
```

它返回如下结果：

```
{ "_id" : ObjectId("50d2fb07e64cfa55431de693"), "entries" : [   {    },     {    },     {    },     {    },     {    },     {    },     {    },     {  },   {    },     {    },     {    },     {    },     {    },     {  },   {    },     {    },     {    },     {    } ] } 
```

这很难看，但基本上可以满足我的需求，因为我可以计算此列表的长度，而无需获取完整内容的网络权重。但我不知道为什么会这样。这个查询实际上在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:03:36.417

现在，我可以考虑两种方法：

1）使用聚合框架：

```
db.log.aggregate([ { $unwind : "$entries" }, { $group : { _id : "$_id", entries : {$sum:1}  } }  ]); 
```

2) 或者您可以在包含条目计数的文档中添加一个字段。因此，每次将新值推送到条目数组时，都必须增加计数器。更新将是这样的：

```
db.log.update({ _id : 123 }, { $push : { entries : 'value' }, $inc : { entriesCount : 1 } }) 
```

显然，您在这里需要权衡：聚合框架对于这个简单的操作来说太昂贵了。但是在文档中添加一个字段，每次更新都应该增加计数器。

恕我直言，计数器看起来更合理，尽管它看起来是一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T00:26:33.517

[根据 mongodb 文档：](https://docs.mongodb.org/manual/reference/operator/aggregation/size/)

您也可以使用 $size：

```
db.log.aggregate([{$project:{'_id':1, 'count':{$size: "$entriesCount"}}}]); 
```

# linux - linux 标准输入、标准输出、标准错误

> ID：13958494
> 
> 赞同：1
> 
> 时间：2012-12-19T18:11:32.377
> 
> 标签：linux, stdio

> **可能重复：**
> [写入标准输入并从标准输出读取（UNIX/LINUX/C 编程）](https://stackoverflow.com/questions/7383803/writing-to-stdin-and-reading-from-stdout-unix-linux-c-programming)

我有一个关于 linux 系统的 stdio 的简单问题。

如果程序写入标准输入会发生什么？或从标准输出、标准错误……读取？

我想从操作系统的角度了解细节。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:23:49.090

Linux 上的 stdio 流与文件描述符相关联，Linux 和 UNIX 上的所有文件和流也是如此。最初，这些文件描述符与一个 tty 相关联，它实际上只是一个文件（某种意义上的）。最初，那些文件描述符被映射到那些 TTY。用户或您的程序也可以重新映射它们。例如，我可以将 stderr 重新映射到日志文件，或将 stdin 重新映射到一些预烘焙的输入。

# c# - 如何使用片段从当前类中获取属性？

> ID：13958499
> 
> 赞同：1
> 
> 时间：2012-12-19T18:12:07.730
> 
> 标签：c#, reflection, code-snippets

我是否可以创建一个片段并让它分析当前类，获取所述类的属性，然后创建一个 sql 函数，逐行写出命令参数中的每个属性。

我正在寻找的是做这样的事情：

```
public static int Add(MyObject Message) {
        MySqlConnection connection = new MySqlConnection(MySqlConnection);
        MySqlCommand command = new MySqlCommand("Add_Message", connection);
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.AddWithValue("@IMFromUserID", Message.IMFromUserID);
        command.Parameters.AddWithValue("@IMToUserID", Message.IMToUserID);
        command.Parameters.AddWithValue("@IMMessage", Message.IMMessage);
        command.Parameters.AddWithValue("@IMTimestamp", Message.IMTimestamp);
        connection.Open();
        MySqlDataReader reader = command.ExecuteReader();
        while (reader.Read()) {
            Message.IMID = (int)reader["IMID"];
        }
        command.Dispose();
        connection.Close();
        connection.Dispose();
        return Message.IMID;
    } 
```

基本上我希望片段填充整个 Add 函数`@PropertyName`并`Message.PropertyName`在`command.Parameters.AddWithValue`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:35:42.100

我认为[代码片段](http://msdn.microsoft.com/en-us/library/ms165392.aspx)不够强大。也许[ReSharper 的代码模板](http://www.jetbrains.com/resharper/)足够强大，但我也不这么认为。如果您真的需要或想要代码生成，您可以考虑使用[T4 模板。](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

我个人建议完全避免编译时代码生成。您可以使用反射 - 简单但缓慢 - 或运行时代码生成 - 复杂但快速。如果性能不是主要问题，我建议使用反射。

```
 public static Int32 Add<TMessage>(TMessage message)
     where TMessage: IMessageWithIMID
 {
    using (var connection = new MySqlConnection(connectionString))
    using (var command = new MySqlCommand("Add_Message", connection))
    {
        command.CommandType = CommandType.StoredProcedure;

        // We look only at public instance properties but you can easily
        // change this and even use a custom attribute to control which
        // properties to include.
        var properties = typeof(TObject).GetProperties(BindingFlags.Public |
                                                       BindingFlags.Instance);

        foreach (var property in properties)
        {
            var parameterName = "@" + property.Name;

            var value = property.GetValue(message, null);

            command.Parameters.AddWithValue(parameterName, value);
        }

        connection.Open();

        message.IMID = (Int32)command.ExecuteScalar();

        return message.IMID;
    }
} 
```

请注意，您必须引入并实现接口`IMessageWithIMID`才能访问该属性`IMID`。

```
internal interface IMessageWithIMID
{
    Int32 IMID { get; set; }
} 
```

请注意，您也不需要读取数据 - 您只需使用[`ExecuteScalar()`](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.executescalar.aspx). 这转

```
using (var reader = command.ExecuteReader())
{
    while (reader.Read())
    {
        message.IMID = (Int32)reader["IMID"];
    }
} 
```

进入

```
message.IMID = (Int32)command.ExecuteScalar(); 
```

你就完成了。

# ruby-on-rails - Rails 3.2 + OSX：无法安装 rmagick gem

> ID：13958500
> 
> 赞同：4
> 
> 时间：2012-12-19T18:12:15.607
> 
> 标签：ruby-on-rails, ruby, osx-lion, rmagick

我正在尝试从 Github 安装 RoR 应用程序，并且在运行`bundle install`时出现此错误：

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/adam/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for clang... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/adam/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
/Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/adam/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
    from extconf.rb:193:in `<main>'

Gem files will remain installed in /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occurred while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

我试图运行`gem install rmagick -v '2.13.1'`，但我得到了同样的错误。

我在 Mac OS X Lion 上运行。我错过了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T23:04:50.250

尝试运行：

```
brew link imagemagick 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:15:43.043

确保你有一个编译器。XCODE 命令行工具，或者只安装 gcc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T05:30:33.400

我也无法安装 rmagick gem...

为了正确安装 Imagemagick，我首先

```
brew remove libtool
brew install libtool --universal 
```

然后我可以使用以下命令安装 Imagemagick：

```
brew install imagemagick --build-from-source 
```

然后正确安装了 rmagick gem

当 rmagick 无法安装时，我收到的错误消息如下所示：

```
linking shared-object RMagick2.bundle
ld: file not found: /usr/local/lib/libltdl.7.dylib for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [RMagick2.bundle] Error 1

make failed, exit code 2 
```

这适用于 Imagemagick 6.8.9-8 和 rmagick 2.13.2

# php - 网络爬虫上的内爆错误

> ID：13958505
> 
> 赞同：1
> 
> 时间：2012-12-19T18:12:27.660
> 
> 标签：php, foreach

我正在编写我正在编写的网络爬虫的最后一条。

网络爬虫抓取 BBC 新闻，然后将链接以及标题和描述等插入数据库。所有这些都有效，但我有一个包含所有起始 url 的数组，因此只插入以其中任何一个开头的链接。

我正在使用 foreach 循环所有链接数组的所有数组变量，并检查它们是否符合条件，插入新数组，然后将其内爆到字符串，然后插入 mysql 数据库。

但是，关于我的内爆函数会出现错误。我被困住了。

```
 $bbc_values = array('http://www.bbc.co.uk/news/health-', 'http://www.bbc.co.uk/news/politics-', 'http://www.bbc.co.uk/news/uk-', 'http://www.bbc.co.uk/news/technology-', 'http://www.bbc.co.uk/news/world-', 'http://www.bbc.co.uk/news/england-', 'http://www.bbc.co.uk/news/northern_ireland-', 'http://www.bbc.co.uk/news/scotland-', 'http://www.bbc.co.uk/news/wales-', 'http://www.bbc.co.uk/news/business-', 'http://www.bbc.co.uk/news/education-', 'http://www.bbc.co.uk/news/science_and_enviroment-', 'http://www.bbc.co.uk/news/entertainment_and_arts-', 'http://edition.cnn.com/');

  foreach ($links as $link) {
  $output = array(
"title"       => Titles($link), //dont know what Titles is, variable or string?
"description" => getMetas($link),
"keywords" => getKeywords($link), 
"link"        => $link                 
 );
if (empty($output["description"])) {
$output["description"] = getWord($link);
}

    foreach ($output as $new_array) {
if (in_array($new_array['link'], $bbc_values)) {
    $news_stories[] = $new_array;
}
     }

 $data = '"' . implode('" , "', $news_stories) . '"';
 $result = mysql_query("INSERT INTO news_story (`title`, `description`, `keywords`, `link`) VALUES (" . $data . ")"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:21:31.423

首先，`$links`没有定义。你的意思是`$bbc_value`？

否则，您必须关闭第一个 foreach（关闭`}`缺失）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:33:03.810

在你的`foreach`循环里面你有

```
$news_stories[] = $new_array; 
```

这将产生一个数组数组，可能类似于以下

```
array(
    array(
        'title'=>'title1',
        'description'=>'description1',
        'keywords'=>'keywords1',
        'link'=>'link1'
    ),
    array(
        'title'=>'title2',
        'description'=>'description2',
        'keywords'=>'keywords2',
        'link'=>'link2'
    )
); 
```

你正在使用`implode`这样的循环之外

```
$data = '"' . implode('" , "', $news_stories) . '"'; 
```

除非您在数组中指定索引，否则它不应该工作。因此，如果您使用以下代码

```
$data='"' . implode('" , "', $news_stories[0]) . '"';
echo $data; 
```

然后它会从数组中内爆第一个数组项`$news_stories`，它会产生以下

```
"title1" , "description1" , "keywords1" , "link1" 
```

如果你想产生以下

```
$result = mysql_query("INSERT INTO news_story (`title`, `description`, `keywords`, `link`) VALUES ('title1' , 'description1' , 'keywords1' , 'link1')"); 
```

那么你可以使用

```
$data="'" . implode("' , '", $news_stories[0]) . "'"; 
```

所以如果你写

```
$result = mysql_query("INSERT INTO news_story (`title`, `description`, `keywords`, `link`) VALUES (" . $data . ")"); 
```

然后它会产出

```
$result = mysql_query("INSERT INTO news_story (`title`, `description`, `keywords`, `link`) VALUES ('title1' , 'description1' , 'keywords1' , 'link1')"); 
```

# android - Android：尝试在 AsyncTask 中创建一个对话框 我正在使用 AsyncTask 我使用父创建意图没有错误。 创建对话框的行给父级无法解析为 ye。新的 parent.AlertDialog.Builder(this) 我得到的错误是父级不存在，但我在相同的方法中使用父级来调用意图 代码块私有类 SendTextOperation 扩展 Asyn 问问题 问问题 2012-12-19T18:12:34.190 52 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 AsyncTask 我使用父创建意图没有错误。 创建对话框的行给父级无法解析为 ye。新的 parent.AlertDialog.Builder(this) 我得到的错误是父级不存在，但我在相同的方法中使用父级来调用意图 代码块私有类 SendTextOperation 扩展 AsyncTask { @Override protected void onPreExecute() { //Update UI here } @Override protected String doInBackground(String... params) { // Talk to server here to avoid Ui hanging rt=TalkToServer("http://besttechsolutions.biz/projects/bookclub/login.php"); return(rt); } @Override protected void onPostExecute(String result) { if (rt.contains("ok")) { Intent i = new Intent(parent, cChat.class); startActivity(i); } else { new parent.AlertDialog.Builder(this) .setTitle("Game Over") .setMessage("Your time is up, You saved " +" Million more people!!") .setNeutralButton("Try Again",new DialogInterface.OnClickListener() { public void onClick(DialogInterface dlg, int i) { }} ).show(); } } } 假设您在名为 MyActivity 的类中声明了该类，然后在创建对话框时使用 MyActivity.this 而不是这个。 android 4 3 回答 3 This answer is useful 1 为了AlertDialog从非 Activity 显示，您需要将当前 Activity 上下文传递给非 Activity 类，在您的情况下到SendTextOperation类。 Constructor为as创建一个SendTextOperation： public class SendTextOperation extends AsyncTask<string,void,string>{ Context context; public SendTextOperation(Context context) { this.context = context; } @Override protected void onPreExecute() { //Update UI here } @Override protected String doInBackground(String... params) { // Talk to server here to avoid Ui hanging rt=TalkToServer("http://besttechsolutions.biz/projects/bookclub/login.php"); return(rt); } @Override protected void onPostExecute(String result) { if (rt.contains("ok")) { Intent i = new Intent(context, cChat.class); startActivity(i); } else { new context.AlertDialog.Builder(context) .setTitle("Game Over") .setMessage("Your time is up, You saved " +" Million more people!!") .setNeutralButton("Try Again",new DialogInterface.OnClickListener() { public void onClick(DialogInterface dlg, int i) { }} ).show(); } } } 并开始SendTextOperation AsyncTask： SendTextOperation sendtxtasyncTask = new SendTextOperation(CurrentActivity.this); sendtxtasyncTask.execute(""); 于 2012-12-19T18:20:04.543 回答 This answer is useful 0 看起来你应该这样称呼它： final AlertDialog.Builder builder = new AlertDialog.Builder(_context); builder.setMessage(_context.getString(R.string.error) + ": " + _errorMessage) .setTitle(_context.getString(R.string.loginError)) .setIcon(android.R.drawable.ic_dialog_alert) .setCancelable(true) .setPositiveButton(_context.getString(R.string.ok), null); final AlertDialog alert = builder.create(); alert.show(); （我自己的示例代码） 如果 parent 是您的上下文，您的错误似乎正在尝试执行parent.AlertDialog.Builder(this)，您需要在哪里使用。new AlertDialog.Builder(parent) 于 2012-12-19T18:20:34.093 回答 This answer is useful 0 假设您在名为 MyActivity 的类中声明了该类，然后在创建对话框时使用 MyActivity.this 而不是这个。 于 2012-12-19T18:19:46.973 回答 Related 1 performance - 在用户空间与内核空间中实现协议 - 性能影响 5 css - 在css中创建凹角 1 wordpress - web.config 在 Azure 上不可写 4 cordova - PhoneGap 应用程序中的“插件未定义” 3 java - for循环忽略布尔if语句 7 ios - 键盘和光标显示，但我无法在 UITextFields 和 UITextViews 内输入 4 mysql - 外部连接问题 1 database - 如何在自引用对象中获得最高父级 10 python - 寻找欧拉之旅 2 jquery - jQuery | 用户滚动时显示 div Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,void,string>

> ID：13958508
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android

我正在使用 AsyncTask

我使用父创建意图没有错误。

创建对话框的行给父级无法解析为 ye。新的 parent.AlertDialog.Builder(this)

我得到的错误是父级不存在，但我在相同的方法中使用父级来调用意图

代码块私有类 SendTextOperation 扩展 AsyncTask {

```
 @Override
      protected void onPreExecute() {

        //Update UI here

      }

      @Override
      protected String doInBackground(String... params) {
            // Talk to server here to avoid Ui hanging 
          rt=TalkToServer("http://besttechsolutions.biz/projects/bookclub/login.php");
          return(rt);
      }      

      @Override
      protected void onPostExecute(String result) {  

          if (rt.contains("ok")) 
          {

              Intent i = new Intent(parent, cChat.class);
                startActivity(i);
          }
          else
          {

                 new parent.AlertDialog.Builder(this)
                .setTitle("Game Over")
                .setMessage("Your time is up, You saved " 
                        +" Million  more people!!")
                .setNeutralButton("Try Again",new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dlg, int i)
                    {

                    }} ).show();    

          }
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:20:04.543

为了`AlertDialog`从非 Activity 显示，您需要将当前 Activity 上下文传递给非 Activity 类，在您的情况下到`SendTextOperation`类。

`Constructor`为as创建一个`SendTextOperation`：

```
public class SendTextOperation extends AsyncTask<String,Void,String>{
Context context;
    public SendTextOperation(Context context) {
        this.context = context;
    }

      @Override
      protected void onPreExecute() {

        //Update UI here

      }

      @Override
      protected String doInBackground(String... params) {
            // Talk to server here to avoid Ui hanging 
          rt=TalkToServer("http://besttechsolutions.biz/projects/bookclub/login.php");
          return(rt);
      }      

      @Override
      protected void onPostExecute(String result) {  

          if (rt.contains("ok")) 
          {

              Intent i = new Intent(context, cChat.class);
                startActivity(i);
          }
          else
          {

                 new context.AlertDialog.Builder(context)
                .setTitle("Game Over")
                .setMessage("Your time is up, You saved " 
                        +" Million  more people!!")
                .setNeutralButton("Try Again",new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dlg, int i)
                    {

                    }} ).show();    

          }
      }

} 
```

并开始`SendTextOperation` `AsyncTask`：

```
SendTextOperation sendtxtasyncTask = new SendTextOperation(CurrentActivity.this);
sendtxtasyncTask.execute(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:20:34.093

看起来你应该这样称呼它：

```
final AlertDialog.Builder builder = new AlertDialog.Builder(_context);
            builder.setMessage(_context.getString(R.string.error) + ": " + _errorMessage)
                .setTitle(_context.getString(R.string.loginError))
                .setIcon(android.R.drawable.ic_dialog_alert)
                .setCancelable(true)
                .setPositiveButton(_context.getString(R.string.ok), null);

            final AlertDialog alert = builder.create();
            alert.show(); 
```

（我自己的示例代码）

如果 parent 是您的上下文，您的错误似乎正在尝试执行`parent.AlertDialog.Builder(this)`，您需要在哪里使用。`new AlertDialog.Builder(parent)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:19:46.973

假设您在名为 MyActivity 的类中声明了该类，然后在创建对话框时使用 MyActivity.this 而不是这个。

# iphone - 刷新 iPhone 应用程序中的 web 视图

> ID：13958509
> 
> 赞同：0
> 
> 时间：2012-12-19T18:12:37.537
> 
> 标签：iphone, objective-c, uiwebview, viewdidappear

在我的 iphone 应用程序的主页中，我正在调用一个网页，用户可以从我的应用程序的其他选项卡执行一些操作（评论等） - 之后，当返回主页时，必须刷新网页（例如： - 评论/喜欢计数必须增加）如果用户刷新主页（从顶部向上滚动）页面正在刷新，但客户端想要自动刷新所以我已经在 viewDidAppear 方法中加载了网页， **现在的问题是 - 每当用户返回主页时，它都会刷新并从顶部显示（如果用户从底部的某个链接转到详细信息并返回，则网页显示顶部）**

如何防止这种情况，或者有没有更好的自动刷新方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:19:29.540

也许更好的方法是使用 javascript 在后台下载更新，然后适当地更新您的内容。`UIWebView`有一个方法[–stringByEvaluatingJavaScriptFromString:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)可用于运行 javascript 代码。您可以提供方法调用以在您的方法中执行刷新`-viewDidLoad`。

另一种选择是`HTML`在后台下载，并比较显示的内容，如果不同，则交换。这样，内容仅在需要时刷新。尽管这仍然会给您带来内容移到顶部的问题。

# vb.net - VB.NET Listview Textchanged 搜索

> ID：13958512
> 
> 赞同：2
> 
> 时间：2012-12-19T18:12:56.540
> 
> 标签：vb.net, listview, search, filter, textchanged

我尝试在 stackoverflow 上搜索并实现我发现但无济于事的代码。随着文本的更改，我想使用文本框中的当前文本来过滤列表视图项目（因此未关闭匹配的项目将被删除），它只留下列中包含的任何内容。

这是我的意思的一个例子：

搜索：“乔治”

|1|安德森席尔瓦|安德森席尔瓦是...|

|2| **乔治**·圣皮埃尔| **乔治**是...的冠军

|3| **乔治·**索托罗波利斯| **Georges** Sotoropolis是轻量级拳手|

通过此搜索，只会返回第 2 行和第 3 行。第一行将被省略且不显示。一旦我删除了这些条款，它就会显示出来。

这是我目前拥有的代码：

```
Private Sub tbSearch_TextChanged(sender As Object, e As System.EventArgs) Handles tbSearch.TextChanged
    lwArticles.BeginUpdate()

    If tbSearch.Text.Trim().Length = 0 Then
        'Clear listview
        lwArticles.Clear()

        'If nothing is in the textbox make all items appear
        For Each item In originalListItems
            lwArticles.Items.Add(item)
        Next
    Else
        'Clear listview
        lwArticles.Clear()

        'Go through each item in the original list and only add the ones which contain the search text
        For Each item In originalListItems
            If item.Text.Contains(tbSearch.Text) Then
                lwArticles.Items.Add(item)
            End If
        Next
    End If
    lwArticles.EndUpdate()

End Sub 
```

它似乎正在工作，但一旦我在 tbSearch 中输入内容，我就看不到列表视图项目。滚动条变小/变大取决于是否由于执行搜索而有更多/更少的项目。我的问题似乎他们不可见

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:45:47.077

我会建议另一种方法 - 首先`DataTable`根据您的原始项目创建一个。然后创建一个`DataView`并将其分配为`DataSource`您的`ListView`. 现在您可以更改[`DataView.RowFilter`](http://msdn.microsoft.com/en-ca/library/system.data.dataview.rowfilter.aspx)，您的列表将自动更新，因此只有匹配过滤器的项目才会显示。使用这种方法，您不需要每次都从头开始重新创建所有内容，并且您`TextChanged`变得非常简单和可维护 -如果已经创建`RowFilter`了相应的内容，它只会更改。`DataView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:19:08.323

Listview.Clear 清除项目、列和组。看来您只想清除物品，因此请致电`lwArticles.Items.Clear`而不是`lwArticles.Clear`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:22:44.720

这是我的问题的最终答案：

```
Private originalListItems As New List(Of ListViewItem) 'this gets populated on form load

Private Sub tbSearch_TextChanged(sender As Object, e As System.EventArgs) Handles tbSearch.TextChanged
    lwArticles.BeginUpdate()

    If tbSearch.Text.Trim().Length = 0 Then
        'Clear listview
        lwArticles.Items.Clear()

        'If nothing is in the textbox make all items appear
        For Each item In originalListItems
            lwArticles.Items.Add(item)
        Next
    Else
        'Clear listview
        lwArticles.Items.Clear()

        'Go through each item in the original list and only add the ones which contain the search text
        For Each item In originalListItems
            If item.Text.Contains(tbSearch.Text) Then
                lwArticles.Items.Add(item)
            End If
        Next
    End If

    lwArticles.EndUpdate()
End Sub 
```

感谢 Dan-o 解释 lwArticles.Clear() 将清除**所有内容**。他通知我我需要 lwArticles.Items.Clear() 来仅清除列表视图中的项目。

# python - python命令行在python shell中可以，但不能通过windows cmd

> ID：13958514
> 
> 赞同：0
> 
> 时间：2012-12-19T18:13:14.550
> 
> 标签：python, windows, printing, cmd, syntax-error

我正要从 cmd windows 默认 shell 测试 ftpmirror 内置脚本（python322，winXP 32bits）并得到这个：

```
File "C:\Program Files\python322\Tools\Scripts\ftpmirror.py", line 161
print('Skip pattern', repr(pat), end=' ')
                                    ^
SyntaxError: invalid syntax 
```

我直接在 python shell 中测试了 print() 行，通过 cmd 并使用空闲（也在搅拌机中）：这项工作非常顽固。

我用这样的 coucou.py 文件重现了错误：

```
#! /usr/bin/env python3
pat = 'toto'
print("Skip pattern", repr(pat), end=" ") 
```

从 cmd 提示符直接调用时：

```
C:\Program Files\python322\Tools\Scripts>coucou.py 
```

与 ftpmirror 相同的错误，但是：

```
C:\Program Files\python322\Tools\Scripts>python coucou.py 
```

没问题

而且我的环境还可以，我可以通过双击 .py 文件直接从 Windows ui 执行 py 脚本，当从 .bat 调用时，我的工作脚本工作正常

我不明白，它看起来特定于 print() 结束参数，关于从 windows cmd shell 执行 python3 的方式，我还没有读到什么？

谢谢，

杰罗姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:19:32.527

尝试在双击或从命令行运行时检查您是否正在运行相同的 python 解释器`python`。

将其保存在`.py`包含此内容的文件中，并尝试使用两种方法运行它：

```
import sys
print sys.version_info 
```

我敢打赌，您在每种情况下都使用不同的口译员。

# iphone - 限制 UIPanGestureRecognizer 的平移范围

> ID：13958516
> 
> 赞同：0
> 
> 时间：2012-12-19T18:13:31.890
> 
> 标签：iphone, objective-c, ios, ipad

我有一个视图，我目前隐藏在屏幕底部。现在我希望能够通过 y 轴垂直滚动来移动视图。但我不希望它超过视图的全高度（即：我不想在底部看到空白）。我写了这段代码：

```
- (IBAction)panHighlightReadingVC:(UIPanGestureRecognizer *)recognizer
{
    CGPoint translation = [recognizer translationInView:self.view];

    CGPoint newCenter = CGPointMake(self.view.bounds.size.width / 2,
                                    roundf(recognizer.view.center.y + translation.y));

    CGFloat velocityY = [recognizer velocityInView:self.view].y;
    if ((recognizer.view.frameY > self.view.frameHeight - recognizer.view.frameHeight || velocityY > 0)) {
        recognizer.view.center = newCenter;
        [recognizer setTranslation:CGPointZero inView:self.view];
    } 
} 
```

这种工作，如果我慢慢滚动的话。如果我滚动得非常快，那么视图的 frameY 有可能小于 `superView.frameHeight - Recognizer.view.frameHeight。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:38:21.997

当您计算 newCenter 时，请将其限制在您实际希望它适合的范围内。如果您将其限制在您的限制范围内，您可能不需要最后一个 if 语句`newCenter`。

另外，帮自己一个忙，只有在它实际上使事情变得更简单时才使用中心。在你的情况下，我认为你应该使用 frame. 然后你不必担心除以 2。

尝试这样的事情：

```
- (IBAction)panHighlightReadingVC:(UIPanGestureRecognizer *)recognizer
{
    CGPoint translation = [recognizer translationInView:self.view];

    CGFloat newY = MAX(recognizer.view.frame.origin.y + translation.y, self.view.frameHeight - recognizer.view.frameHeight);

    CGRect newFrame = CGRectMake(recognizer.view.frame.origin.x, newY, recognizer.view.frame.size.width, recognizer.view.frame.size.height);

    recognizer.view.frame = newFrame;
    [recognizer setTranslation:CGPointZero inView:self.view];
} 
```

此外，速度似乎不适用于您的情况，它只会使事情复杂化。

# iis - 使用重写添加“假”根文件夹

> ID：13958520
> 
> 赞同：0
> 
> 时间：2012-12-19T18:13:46.993
> 
> 标签：iis, url-rewriting, rewrite, iis-modules

我不知道该去哪里。我已经重写以删除文件扩展名等，但我似乎无法找到如何将“假”根目录添加到站点。例如，如果站点是 www.foo.com/index.htm，我想重写 URL 以显示 www.foo.com/root/index.htm。我可以使用 IIS 重写模块或 mod 重写我只是不确定如何去做（或者是否可能），我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:47:49.847

如果我理解正确，您希望请求带有`root`前缀。在这种情况下，此重写将执行此操作：

```
<rule name="StripRoot" stopProcessing="true">
    <match url="root/(.*)" />
    <action type="Rewrite" url="/{R:1}" />
</rule> 
```

要修改提供给客户端出站规则的 html，需要：

```
<outboundRules>
    <rule name="FakeRoot" preCondition="IsHtml">
        <match filterByTags="A, Area, Base, Form, Frame, IFrame, Img, Input, Link, Script" pattern="http://www\.foo\.com/(.*)" />
        <action type="Rewrite" value="http://www.foo.com/root/{R:1}" />
    </rule>
    <preConditions>
        <preCondition name="IsHtml">
            <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
        </preCondition>
    </preConditions>
</outboundRules> 
```

它假定您在标记属性中具有完全限定的 URL，如果使用相对链接，则需要更复杂的重写。

# asp.net-mvc - 从下拉框中添加外键值/数据未显示在下拉列表中

> ID：13958521
> 
> 赞同：1
> 
> 时间：2012-12-19T18:13:49.777
> 
> 标签：asp.net-mvc, entity-framework

我正在为我的租户控制器使用创建方法。每个新租户都有一个与之相连的相应建筑物。我想要它，以便在我的创建视图中显示建筑物名称，然后用相应的 id 填充表。我无法弄清楚如何让它发挥作用。

```
public class Renter
    {
        [Key]
        public int RenterId { get; set; }
        public int BuildingID { get; set; }
        public String FirstName { get; set; }
        public String LastName { get; set; }
        [DataType(DataType.PhoneNumber)]
        public String Phone { get; set; }
        [DataType(DataType.EmailAddress)]
        public String Email { get; set; } 
        public Boolean IsApproved { get; set; }

        //Foreign Key
       // [Required]
        public virtual Building Building { get; set; }
    }

public class Building
    {
        [Key]
        public int BuildingId { get; set; }
        public string BuildingName { get; set; }
        public virtual ICollection<Renter> Residents { get; set; }
        public int ManagerId { get; set; }
        public virtual Manager Manager { get; set; }
    }
 public class Manager
    {
        [Key]
        public int ManagerId { get; set; }
        public virtual ICollection<Renter> Tenants { get; set; }
        public virtual ICollection<Building> Buildings { get; set; }

    } 
```

创建视图

```
@model RPMS.Models.Renter

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Renter</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.BuildingID, "Building")
        </div>
        <div class="editor-field">
            @Html.DropDownList("BuildingID", String.Empty)
            @Html.ValidationMessageFor(model => model.BuildingID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Phone)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Phone)
            @Html.ValidationMessageFor(model => model.Phone)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsApproved)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsApproved)
            @Html.ValidationMessageFor(model => model.IsApproved)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

目前，当我运行它并去选择建筑物时，即使我已经初始化了数据，下拉框中也没有显示任何内容

```
protected override void Seed(RPMSContext context)
        {
            var renters = new List<Renter>
            {
            new Renter {RenterId = 1, BuildingID = 1, FirstName="Bradley", LastName="Woods",Phone="614-218-0294", Email="bradleydeanwoods@gmail.com",IsApproved = true},

            };
            renters.ForEach(s => context.Renters.Add(s));
            context.SaveChanges();

            var buildings = new List<Building>
            {
                new Building {BuildingId = 1, BuildingName="Annex at River South",ManagerId = 1},
            };
            buildings.ForEach(s => context.Buildings.Add(s));
            context.SaveChanges();

            var managers = new List<Manager>
            {
                new Manager {ManagerId = 1,},
            };
            managers.ForEach(s => context.Managers.Add(s));
            context.SaveChanges();
        } 
```

最后是 DbContext

```
public class RPMSContext : DbContext
    {
        public DbSet<Renter> Renters { get; set; }
        public DbSet<Building> Buildings { get; set; }
        public DbSet<Manager> Managers { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    } 
```

提前感谢您的帮助，帮助我克服了这个症结。

**更新**种子数据显示我何时取出外键关系，这就是我现在所做的，只是决定继续前进。

# php - 如何将搜索栏文本区域更改为 opencart 中的下拉菜单？

> ID：13958527
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:14:29.243
> 
> 标签：php, search, drop-down-menu, opencart

我的商店里有一些制造商，我想修改搜索，以便您可以从下拉菜单中选择制造商 :)

我希望将搜索框更改为 opencart 中的下拉菜单。那可能吗？如果是，请告诉我如何。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:15:53.083

好的，我不知道你为什么要这样做，但这是一种方法......我正在使用标题搜索这个例子，Opencart 1.5.4.1 Edit catalog/controller/commmon/header.php。第 96 行之后：

```
$this->load->model('catalog/product'); 
```

添加这个：

```
 // - - Manufacturers Dropdown Data Start - - - - - - - - 
    // load manufacturer model
    $this->load->model('catalog/manufacturer');

    //get manufacturers data
    $manufacturers = $this->model_catalog_manufacturer->getManufacturers();

    //populate data array for use in view
    $this->data['manufacturers'] = array();
    foreach ($manufacturers as $manufacturer){
        $this->data['manufacturers'][] = array(
            'id'   => $manufacturer['manufacturer_id'],
            'name' => $manufacturer['name']
        );
    }

    // - - Manufacturers Dropdown Data End - - - - - - - - - 
```

现在，在 catalog/view/theme/xxx/template/common/header.tpl 找到搜索 DIV，注释掉搜索输入（第 55-62 行）：

```
<div id="search">

<!-- <div class="button-search"></div>
<?php if ($filter_name) { ?>
<input type="text" name="filter_name" value="<?php echo $filter_name; ?>" />
<?php } else { ?>
<input type="text" name="filter_name" value="<?php echo $text_search; ?>" onclick="this.value = '';" onkeydown="this.style.color = '#000000';" />
<?php } ?> -->
... 
```

添加您的选择元素：

```
<div id="search">

<!-- <div class="button-search"></div>
<?php if ($filter_name) { ?>
<input type="text" name="filter_name" value="<?php echo $filter_name; ?>" />
<?php } else { ?>
<input type="text" name="filter_name" value="<?php echo $text_search; ?>" onclick="this.value = '';" onkeydown="this.style.color = '#000000';" />
<?php } ?> -->

<select name='manuf_dropdown' ONCHANGE="location = this.options[this.selectedIndex].value;">
<option value=''></option>
<?php foreach ($manufacturers as $manufacturer) { 
    if (isset($_GET['manufacturer_id']) && $_GET['manufacturer_id'] ==  $manufacturer['id']){
?>
    <option selected="selected" value="./?route=product/manufacturer/info&manufacturer_id=<?php echo $manufacturer['id'] ?>"><?php echo $manufacturer['name'] ?></option>
<?php } else { ?>

        <option value="./?route=product/manufacturer/info&manufacturer_id=<?php echo $manufacturer['id'] ?>"><?php echo $manufacturer['name'] ?></option>
<?php }} ?>
</select>
</div> 
```

如果您需要对代码进行任何解释，请告诉我。

# java - Java 正则表达式特殊字符和 & 符号

> ID：13958531
> 
> 赞同：0
> 
> 时间：2012-12-19T18:14:44.560
> 
> 标签：java, regex

我有一个搜索所有大写单词的正则表达式，但我需要一个搜索特殊字符和“&”字符的正则表达式。例如，我需要一个正则表达式来查找“A&E”或“A/V”之类的词。以下是我所有大写单词的标准正则表达式。

```
String twoPlusUCRegEx = "[A-Z][A-Z]+\\s"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:19:03.767

只需在第二`[A-Z]`类中包含您想要的特殊字符。例如：

```
"[A-Z][A-Z&/]+\\s" 
```

如果您想要所有 US-ASCII 标点符号，您可以使用 POSIX 字符类：

```
"[A-Z][A-Z\p{Punct}]+\\s" 
```

您可能还想在 re 的开头放置一个单词边界等，这样您就不会匹配“aAB”之类的字符串。

# c++ - 如何在编译时确定位序分配？

> ID：13958532
> 
> 赞同：2
> 
> 时间：2012-12-19T18:14:46.307
> 
> 标签：c++

众所周知，对于某些编译器：

```
struct T{
    char bits: 4; // 3:0
}; 
```

对于其他人：

```
struct T{
    char bits: 4; // 7:4
}; 
```

因为这不是标准中规定的。（我觉得这个（算术意义）应该是标准规定的，实际的物理分配是另一个不能规定的问题。）

但是，我希望我的代码更通用，所以我尝试了：

```
union helper{
    unsigned char b:1;
    unsigned char c;
    constexpr helper(unsigned char i): c(i){}
};

constexpr int lsb_defined_at_top(){ return helper(1).b;}

enum{
    LSB_AT_DEFINED_AT_TOP = lsb_defined_at_top()
}; 
```

但编译器（gcc 4.7.2）抱怨：

错误：访问 'helper::b' 成员而不是常量表达式中初始化的 'helper::c' 成员

我想知道有没有办法在编译时确定这一点......

# python - 如何使用 Python 将 airport -s -x 的输出保存到文件中

> ID：13958533
> 
> 赞同：0
> 
> 时间：2012-12-19T18:14:46.657
> 
> 标签：python, macos, encoding

我正在学习 python，我在将一个小函数的输出保存到文件时遇到了麻烦。我的python函数如下：

```
#!/usr/local/bin/python

import subprocess
import codecs

airport = '/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport'

def getAirportInfo():
    arguments = [airport, "--scan" , "--xml"]
    execute = subprocess.Popen(arguments, stdout=subprocess.PIPE)
    out, err = execute.communicate()
    print out
    return out

airportInfo = getAirportInfo()

outFile = codecs.open('wifi-data.txt', 'w')
outFile.write(airportInfo)
outFile.close() 
```

我猜这只能在 Mac 上工作，因为它引用了一些 PrivateFrameworks。

无论如何，代码几乎可以正常工作。print 语句打印一个巨大的 xml 文件，我想将其存储在一个文件中，以供将来处理。从这里开始问题。在上面的版本中，脚本执行没有任何错误，但是，当我尝试打开文件时，我收到一条错误消息，*与 utf-8 encoding 错误*行一致。忽略这一点，打开文件，大多数事情看起来都很好，除了几件事：

*   一些 SSID 有**非 ascii 字符**，如 ä、ö 和 ü。在屏幕上打印时，它们会正确显示为**\xc3\xa4**等等。当我打开文件时，它显示不正确，通常是随机垃圾。

*   某些 xml 值在屏幕上打印时如下所示： Data("\x00\x11WLAN-0024FE056185\x01\x08\x82\x84\x8b\x96\x0c\ ... x10D\x00\x01\x02") 但像这样从文件读取时：//8AAAAAAAAAAAAAAAAAA==

我认为这可能是一个编码错误（看到元音变音有问题，错误消息说明了 utf-8 编码被搞砸了，以及包含 \x 类型字符的文本），我试着在这里寻找可能的解决方案. 但是，无论我做什么，仍然有错误：

*   向 codecs.open 添加一个附加参数 'utf-8' 会产生 *UnicodeDecodeError: 'ascii' codec can't decode byte 0x9a in position 24227: ordinal not in range(128)*并且生成的文件是空的。

*   **在保存之前使用outFile.write(airportInfo.encode('utf-8'))**显式编码为 utf-8会导致相同的错误

*   不是专家，我尝试对其进行解码，也许我只是在做与需要做的完全相反的事情，但我得到了一个*UnicodeDecodeError: 'utf8' codec can't decode byte 0x8a in position 8980: invalid start byte*

唯一有效的（不出所料）是将字符串的 repr() 写入文件，但这不是我需要的，而且我无法制作一个很好的 .plist 文件，其中包含转义符号.

所以请，请，有人可以帮助我吗？我错过了什么？如果有帮助，则保存在 airportInfo 中的类型是 str （如 type(airportInfo) == str 中）而不是 u

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:33:40.243

当您的文本已经是 unicode 时，您不需要重新编码。只需将文本写入文件即可。它应该可以工作。

```
In [1]: t = 'äïöú'

In [2]: with open('test.txt', 'w') as f:
    f.write(t)
   ...: 
```

此外，您可以`getAirportInfo`使用[`subprocess.check_output()`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output). 此外，混合大小写名称只能用于类，而不是函数。参见[PEP8](http://www.python.org/dev/peps/pep-0008/)。

```
import subprocess

def get_airport_info():
    args = ['/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport', 
            '--scan', '--xml']
    return subprocess.check_output(args)

airportInfo = get_airport_info()
with open('wifi-data.txt', 'w') as outf:
   outf.write(airportinfo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:30:18.840

我应该在原始答案之前阅读此内容： [编码/解码之间有什么区别？](https://stackoverflow.com/questions/447107/whats-the-difference-between-encode-decode-python-2-)

我总是对字符串和 unicode 转换感到困惑。在我的 Mac 上，**导入 sys; sys.getfilesystemencoding()**建议子进程返回一个 'utf-8' 字符串 - 所以我不知道为什么 airportInfo.encode('utf-8') 失败。是否可以做 airportInfo.encode('utf-8', 'ignore') 并丢弃无效字符？

另外-您是否尝试将文件写为 wb: **outFile = codecs.open('wifi-data.txt', 'wb')** - 'w' 不打开 ascii 文件？

关于您的文本编辑器 - 它可能会以不同的方式处理 unicode 字符。如果它以 ascii 格式读取 unicode 文本文件，则 unicode 字符可能会出现乱码。您可以尝试将文件命名为 .xml，根据您的文本编辑器，它可能会更好地读取为 unicode。

# php - 如何使用 PHP 和 Javascript 滚动图片数组

> ID：13958536
> 
> 赞同：1
> 
> 时间：2012-12-19T18:14:53.987
> 
> 标签：php, javascript, html

我有一个 sql 查询，它提取一个包含我的图像的文件路径的数组。

它存储在变量中`$rows`，我可以通过索引来访问各个路径...

IE。

```
$rows[0]...$rows[n] 
```

我怎样才能利用java脚本来逐步完成这个。

最终目标是让图片在其下方出现“下一个”“上一个”按钮。点击下一个将显示下一个图像（无需刷新）

```
echo $rows[0]; 
```

会打印

```
images/a.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:04:07.837

也许使用 PHP 的 json 函数，您可以将 PHP 数组转换为 js 数组......然后使用 javascript 函数来控制要显示的图片

```
<script type="text/javascript">
    var images = <?php echo json_encode($rows) ?>, counter = 0;

    function prevImage() {
        counter = (counter<=0)?images.length-1:counter-1;
        var i = document.getElementById('myImage');
        i.src = images[counter];
    }
    function nextImage() {
        counter = (counter==images.length-1)?0:counter+1;
        var i = document.getElementById('myImage');
        i.src = images[counter];
    }
</script> 
```

和

```
<img src="img/0.jpg" id="myImage" />
<a href="#" onClick="prevImage(); return false;">Previous</a> - <a href="#" onClick="nextImage(); return false;">Next</a>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:35:28.213

这是一个将 php 数组移动到 javascript 数组的小示例：

```
<?php
    $row = array("image/image1","image/image2","image/image3");
?>
<html>
    <head>
    <title>Sample Array</title>
    <script>
    var jsArray = new Array();
    <?php 
    for ($i=0; $i<3; $i++)
    {
         echo "jsArray[$i] = '$row[$i]';";  
    }
    ?>
    for(i = 0; i < jsArray.length;i++)
    {
        alert(jsArray[i]);
    }
    </script>
    </head>
    <body>
        <span>Sample Array</span>
    </body>
</html> 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:45:03.650

**将您的 PHP 数组（服务器端）转换为 Javascript（客户端）**

*有很多方法可以做到这一点，但我推荐[JSON](http://en.wikipedia.org/wiki/JSON)。它有很多优点，但最明显的一个是您可以将数组和 javascript 对象存储为字符串。如果您不熟悉它，考虑到您必须处理 Javascript，这将是开始将其包含在您的工作流程中的绝佳时机。*

**PHP**

1.  将数组转换为 JSON：

    `$jsonResults = json_encode($arrayOfResults);`

2.  从 PHP 获取 JSON 到 Javascript：

    ```
    <script>
        var myAppsData = {};
        myAppsData.slideshowJSON = JSON.parse($jsonResults);
    </script> 
    ```

现在您的 JSON 对象可以在`myAppsData.slideshowJSON`.

剩下的工作就像用 for 循环遍历对象一样简单（就像你在 PHP 中所做的那样），抓取内容并用它做你想做的事。

干杯!

# ios - UICollectionView 从右向左滚动（反向）

> ID：13958543
> 
> 赞同：6
> 
> 时间：2012-12-19T18:15:11.173
> 
> 标签：ios, uiscrollview, uistoryboard, uicollectionview

我想要一个从右到左滚动的 UICollectionView，即当它在加载后出现在屏幕上时，集合视图应该首先显示最右边的单元格/项目，然后在左侧添加其余部分。我已经尝试过[这里](https://stackoverflow.com/questions/13784250/make-uicollectionview-scroll-right-to-left)介绍的解决方法，但是如果我调用它，`viewWillAppear:`我会得到：

```
*** Assertion failure in -[UICollectionViewData layoutAttributesForItemAtIndexPath:], /SourceCache/UIKit/UIKit-2372/UICollectionViewData.m:485 
```

如果我滚动到最后一个项目，`viewDidAppear:`它工作正常，除了现在用户首先看到左边的项目，然后滚动到最后一个项目。还尝试`contentOffset`在 UICollectionView 上使用该属性（因为它是 UIScrollView 的子类），但此参数也仅在两者之间的某个时间`viewWillAppear:`设置`viewDidAppear:`

有什么选择吗？我想我可以尝试继承 UICollectionViewFlowLayout 并从右到左布局单元格，但我有点急于进入那个领域。

这就是我所做的：

```
- (void)_scrollToTheRight
{
    NSIndexPath *lastIndexPath = [self.fetchedResultsController indexPathForObject:self.fetchedResultsController.fetchedObjects.lastObject];
    if (lastIndexPath)
    {
        [self.collectionView scrollToItemAtIndexPath:lastIndexPath atScrollPosition:UICollectionViewScrollPositionRight animated:NO];
    }
} 
```

每个值是：

```
lastIndexPath
(NSIndexPath *) $0 = 0x1f1754a0 <NSIndexPath 0x1f1754a0> 2 indexes [0, 21]

(NSInteger)[self.fetchedResultsController.fetchedObjects count]
(NSInteger) $3 = 22 [no Objective-C description available]

(NSInteger)[self.collectionView numberOfItemsInSection:0]
(NSInteger) $2 = 22 [no Objective-C description available] 
```

最后一点：集合视图控制器是从一个由 UIPageViewController 放在屏幕上的视图控制器的容器视图（iOS 6 故事板中的新功能）加载的。

谢谢。

**编辑1：** 所以我认为问题在于使用我的故事板布局（`UICollectionViewController`使用新的容器视图嵌入）导致了问题。 ![在此处输入图像描述](../Images/253002901ff039b776137b811ffe7f32.png) 因为在应用程序的其他地方，我还嵌入了视图控制器（一个普通的`UITableViewController`）`viewDidAppear:`在视图实际出现之前被调用。我怀疑这个设置没有正确通知每个子视图控制器他们应该加载和布局他们的视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-10-29T20:17:39.723

由于 iOS 9 可以使用

```
collectionView.semanticContentAttribute = .forceRightToLeft 
```

用于从右到左滚动，`scrollDirection = .horizontal`并且 itemSize 填充整个高度（即只有一个水平的项目行）

# ruby - 时间表 - Ruby 中的 Fizzbuzz 类型问题

> ID：13958545
> 
> 赞同：0
> 
> 时间：2012-12-18T04:06:36.193
> 
> 标签：ruby

我是编程新手，Ruby 是我的第一语言。我正在进行的一项练习是创建一个执行以下操作的乘法表：

```
1x1 = 1
1x2 = 2
(etc)
2x1 = 2
2x2 = 4 
```

我想我会通过创建一个嵌套的 while 循环来做到这一点：

```
a = 1
b = 1

while a <= 5
    while b <= 5
        puts "#{a} * #{b} = #{a * b}"

        b += 1
    end
    a += 1  
end 
```

当我运行脚本时，它会打印第一组时间表（1x1 - 1x5）然后停止。它不会迭代父循环。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:51:55.717

你说你是一个新手，所以`while`现在循环是可以的。但是，当您提高编程和 Ruby 技能时，您应该能够编写更多地道的代码。沿着这些思路：

```
puts [*1..5].product([*1..5]).map { |x, y| "#{x} * #{y} = #{x*y}" }.join("\n") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T04:33:02.360

您永远不会将您的重置`b`为`1`. 看第二个`while`循环：

```
while b <= 5:
    ...
    b += 1 
```

在这个循环结束时`b = 6`， 和循环退出。然后`a += 1`执行，我们的外循环开始。但是，在所有下一个内部循环迭代`b = 6`中，因此不会执行。因此你需要：

```
...
end
a += 1
b = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T22:17:54.623

接受的答案中解释的“簿记错误”很容易制作。这是该`each`方法通常优于`while`循环的原因之一：

```
(1..5).each do |a|
  (1..5).each do |b|
    puts "#{a} * #{b} = #{a * b}"
  end
end 
```

不记账！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T17:29:58.277

```
class MultiplicationTable
i=1
j=5
while i <= j
    (1..12).each do |x|
        puts "#{i} * #{x} = #{i*x}"
    end
    i+=1
end 
```

结尾

# python - 无法在 python 中找到正确的正则表达式

> ID：13958548
> 
> 赞同：0
> 
> 时间：2012-12-19T18:15:13.363
> 
> 标签：python, regex

我搜索了几个小时，但我找不到正确的正则表达式来匹配一个简单的模式。使用此文本（它是卷组列表中逻辑卷的标准输出）：

```
rootvg:
hd5                 boot       1     1     1    closed/syncd  N/A
hd4                 jfs        38    38    1    open/syncd    /
datavg:
data01lv            jfs        7     7     1    open/syncd    /data1
data02lv            jfs        7     7     1    open/syncd    /data2 
```

我希望从我的正则表达式中找到这种结果（例如，使用 regex.findall(text)）：

```
 [(u'rootvg', u'hd5 boot 1 1 1 closed/syncd N/A\nhd4 jfs 38 38 1 open/syncd /\n'),(u'datavg', u'data01lv jfs 7 7 1 open/syncd /data1\ndata02lv jfs 7 7 1 open/syncd /data2')] 
```

但我能拥有的最好的就是这种模式：`^(?P<vgname>\w+):\s(?P<lv>[\w\s\.\_\/-]+)+` findall 的结果：

```
[(u'rootvg', u'hd5 boot 1 1 1 closed/syncd N/A\nhd4 jfs 38 38 1 open/syncd /\ndatavg')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:21:38.053

尝试以下操作：

```
re.findall(r'^(\w+):(.*?)(?=^\w+:|\Z)', text, flags=re.DOTALL | re.MULTILINE) 
```

例子：

```
>>> text = '''rootvg:
... hd5                 boot       1     1     1    closed/syncd  N/A
... hd4                 jfs        38    38    1    open/syncd    /
... datavg:
... data01lv            jfs        7     7     1    open/syncd    /data1
... data02lv            jfs        7     7     1    open/syncd    /data2'''
>>> re.findall(r'^(\w+):(.*?)(?=^\w+:|\Z)', text, flags=re.DOTALL | re.MULTILINE)
[('rootvg', '\nhd5                 boot       1     1     1    closed/syncd  N/A\nhd4                 jfs        38    38    1    open/syncd    /\n'), ('datavg', '\ndata01lv            jfs        7     7     1    open/syncd    /data1\ndata02lv            jfs        7     7     1    open/syncd    /data2')] 
```

`re.DOTALL`标志使它`.`可以匹配换行符，标志`re.MULTILINE`使它可以分别匹配行的开头和结尾，而不仅仅是字符串的开头和结尾`^`。`$`

解释：

```
^            # match at the start of a line
(\w+)        # match one or more letters or numbers and capture in group 1
:            # match a literal ':'
(.*?)        # match zero or more characters, as few as possible
(?=          # start lookahead (only match if following regex can match)
   ^\w+:       # start of line followed by word characters then ':'
   |           # OR
   \Z          # end of the string
)            # end lookahead 
```

或者，您可以使用`re.split()`更简单的正则表达式来获得类似的输出，将其转换为您需要的格式应该不会太难：

```
>>> re.split(r'^(\w+):', text, flags=re.MULTILINE)
['', 'rootvg', '\nhd5                 boot       1     1     1    closed/syncd  N/A\nhd4                 jfs        38    38    1    open/syncd    /\n', 'datavg', '\ndata01lv            jfs        7     7     1    open/syncd    /data1\ndata02lv            jfs        7     7     1    open/syncd    /data2'] 
```

以下是您如何将其转换为所需格式的方法：

```
>>> matches = re.split(r'^(\w+):', text, flags=re.MULTILINE)
>>> [(v, matches[i+1]) for i, v in enumerate(matches) if i % 2]
[('rootvg', '\nhd5                 boot       1     1     1    closed/syncd  N/A\nhd4                 jfs        38    38    1    open/syncd    /\n'), ('datavg', '\ndata01lv            jfs        7     7     1    open/syncd    /data1\ndata02lv            jfs        7     7     1    open/syncd    /data2')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:48:26.157

```
#!/usr/bin/env python

"""
    Demo code for Stackoverflow question:
    http://stackoverflow.com/questions/13958548/unable-to-find-the-correct-regex-in-python#13958634
"""

import StringIO

text = """
rootvg:
hd5                 boot       1     1     1    closed/syncd  N/A
hd4                 jfs        38    38    1    open/syncd    /
datavg:
data01lv            jfs        7     7     1    open/syncd    /data1
data02lv            jfs        7     7     1    open/syncd    /data2
"""

def gen_lines(text):    
    """ yield non-blank lines in input """
    for line in text:
        if line.strip():
            yield line

def gen_groups(text):
    group = None
    data = []
    for line in gen_lines(text):

        # We found a new group label
        if len(line.split()) == 1 and line.strip().endswith(':'):
            if group:
                yield group, data
            group = line.strip()[:-1]
            data = []

        # We found a data line
        elif group:
            data.append(line.split())

    # We're done with input; yield final group
    else:
        if group:
            yield group, data

def main():

    # Mimics behavior of mock_file = open('input.txt')
    mock_file = StringIO.StringIO(text)

    for group, data in gen_groups(mock_file):
        print group
        for d in data:
            print d

main() 
```

### 和输出：

```
rootvg
['hd5', 'boot', '1', '1', '1', 'closed/syncd', 'N/A']
['hd4', 'jfs', '38', '38', '1', 'open/syncd', '/']
datavg
['data01lv', 'jfs', '7', '7', '1', 'open/syncd', '/data1']
['data02lv', 'jfs', '7', '7', '1', 'open/syncd', '/data2'] 
```

# java - Hibernate 中带有注释的标记系统

> ID：13958551
> 
> 赞同：0
> 
> 时间：2012-12-19T18:15:20.877
> 
> 标签：java, mysql, hibernate, tagging

我正在尝试在我的数据库（MySQL V5.1.61）中实现一个标记系统，然后让它在休眠状态下工作。以下是我的数据库的相关部分： ![架构](../Images/6df68c9c83822eed3f41d49dbbf15dd2.png)

数据包含： ![用户表](../Images/e0f972d3dcac803b47208e41bf85fc65.png)

![用户标签](../Images/8b3051f8ec248a6f4e6f09ff16253e0d.png)

![标签](../Images/345cdf6ebd590731bd550ecec2babfb7.png)

如果我这样做正确，那么“nir”应该有 3 个与他相关的标签，“食物”、“联谊会”和“暑期实习”。

我遇到的问题是在休眠中实现这种关系（使用注释）：

UserHibernate 类（我正在使用 GWT，所以我需要单独的 hibernate 和 DTO 对象）：

```
@Entity
@Table(name="user")
public class UserHibernate implements Serializable{

    private int ID;
    //removed fields for brevity
    private Set<UserTagsHibernate> tags;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "uID")
    public int getID() {
        return ID;
    }

    public void setID(int iD) {
        ID = iD;
    }

    /**
     * @return the tags
     */
    @OneToMany(mappedBy="user", fetch=FetchType.EAGER)
    public Set<UserTagsHibernate> getTags() {
        return tags;
    }
    /**
     * @param tags the tags to set
     */
    public void setTags(Set<UserTagsHibernate> tags) {
        this.tags = tags;
    }

} 
```

UserTagsHibernate 类：

```
@Entity
@Table(name="usertags")
public class UserTagsHibernate {
    private int usertagsID;
    private UserHibernate user;
    private TagsHibernate tags;

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="userforeignkey")
    public UserHibernate getUser() {
        return user;
    }
    public void setUser(UserHibernate userHibernate) {
        this.user = userHibernate;
    }

    @OneToOne
    @JoinColumn(name="tagforeignkey")
    public TagsHibernate getTags() {
        return tags;
    }
    public void setTags(TagsHibernate tagsHibernate) {
        this.tags = tagsHibernate;
    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "usertagsID")
    public int getUsertagsID() {
        return usertagsID;
    }
    public void setUsertagsID(int usertagsID) {
        this.usertagsID = usertagsID;
    }

} 
```

TagsHibernate 类：

```
@Entity
@Table(name = "tags")
public class TagsHibernate {
    private int tagID;
    //removed for brevity

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "tagID")
    public int getTagID() {
        return tagID;
    }

    public void setTagID(int tagID) {
        this.tagID = tagID;
    }

} 
```

我遇到的问题是，当我尝试检索用户时，这里是“nir”，他出现了 3 次。我相信这是因为他有 3 个标签，所以出于某种原因，当我发出查询 "session.createCriteria(UserHibernate.class).add(Restrictions.eq("username", "nir")).list(); " 我得到一个长度为 3 的列表。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:11:21.670

这个问题在使用 Criteria API 时总是会出现......这是一个已知的怪癖。解决方法是改用 HQL 或添加一个过滤掉重复项的转换器，如下所示：

```
session.createCriteria(UserHibernate.class)
    .add(Restrictions.eq("username", "nir"))
    .setResultTransformer(CriteriaSpecification.DISTINCT_ROOT_ENTITY)
    .list(); 
```

# android - 如何在android中像一条无尽的道路一样移动图像？

> ID：13958554
> 
> 赞同：3
> 
> 时间：2012-12-19T18:15:41.677
> 
> 标签：android, image, animation, infinite-loop

我是android新手。我想开发一个汽车移动应用程序。我想无休止地运行道路图像，以便用户认为汽车在移动。请帮助我。以下是我到目前为止尝试过的，

Image_MoveActivity

```
package com.image;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.ImageView;

public class Image_moveActivity extends Activity {
    /** Called when the activity is first created. */
    private ImageView mScanner, mScanner1,mScanner2;
    private Animation mAnimation,mAnimation1, mAnimation2;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mScanner = (ImageView)findViewById(R.id.imageView1);
        mScanner1 = (ImageView)findViewById(R.id.imageView3);
        mScanner2 = (ImageView)findViewById(R.id.imageView4);
        mAnimation = new TranslateAnimation(0, 0, 0, 500);
        mAnimation1 = new TranslateAnimation(5, 5, 5, 500);
        mAnimation2 = new TranslateAnimation(5, 5, 5, 500);
        mAnimation.setDuration(10000);
        mAnimation.setFillAfter(true);
       mAnimation.setRepeatCount(Animation.INFINITE);
        mAnimation.setRepeatMode(Animation.INFINITE);
        mScanner.setAnimation(mAnimation);
        mScanner.setVisibility(View.VISIBLE);
    mAnimation1.setDuration(100);
        mAnimation1.setFillAfter(true);
       mAnimation1.setRepeatCount(Animation.INFINITE);
    mAnimation1.setRepeatMode(Animation.INFINITE);
    mScanner1.setAnimation(mAnimation);
    mScanner1.setVisibility(View.VISIBLE);
    mAnimation2.setDuration(100);
    mAnimation2.setFillAfter(true);
   mAnimation2.setRepeatCount(Animation.INFINITE);
mAnimation2.setRepeatMode(Animation.INFINITE);
mScanner2.setAnimation(mAnimation);
mScanner2.setVisibility(View.VISIBLE);
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="@drawable/road">

    <FrameLayout
        android:id="@+id/frameLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/road" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/player" android:layout_gravity="bottom" android:layout_marginLeft="100dp"/>

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/car2" android:layout_gravity="right"/>

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/car3" android:layout_gravity="top|center" android:layout_marginLeft="15dp"/>

    </FrameLayout>

</LinearLayout> 
```

# apache - Apache Wicket 如何呈现（非检票口）响应页面

> ID：13958555
> 
> 赞同：1
> 
> 时间：2012-12-19T18:15:43.130
> 
> 标签：apache, http, post, wicket, apache-httpclient-4.x

我正在使用 Apache Wicket，但遇到以下问题：

**在 onSubmit() 方法中，我使用Apache httpClient**向外部网址发送 POST 请求。作为响应，我得到 html（在我的响应对象内）。

如何让 Wicket 在浏览器中呈现此 html？

所以基本上我在这里尝试做的就是如果我向这个网址提交一个 html 表单通常会发生什么。但是，出于安全原因，我不想为用户页面提供包含我要发送的数据的表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:45:17.507

您可以在任何组件中通过 getResponse() 获取响应。（我假设 onSubmit() 在表单上）。

怎么样：

```
getResponse().reset();
getResponse().write(htmlPage); 
```

`htmlPage`应该是一个`CharSequence`包含要呈现的 html 页面。

# parsing - 在特殊情况下进一步解析表达式

> ID：13958557
> 
> 赞同：3
> 
> 时间：2012-12-19T18:15:56.427
> 
> 标签：parsing, ocaml, frontend, lexer

目前我的前端可以解析诸如`123`, `"abcd"`, `"=123"`, `"=TRUE+123"`... 这样的普通表达式。以下是相关代码：

```
(* in `syntax.ml`: *)
and expression =
  | E_integer of int  
  | E_string of string

(* in `parser.mly`: *)
expression:
  | INTEGER { E_integer $1 }
  | STRING { E_string $1 } 
```

现在我想改进解析器，这样，当我们遇到以 开头的字符串时`=`，我们会尝试将其评估为公式，而不是文字字符串。所以`syntax.ml`变成了：

```
(* in `syntax.ml`: *)
and expression =
  | E_integer of int  
  | E_string of string
  | E_formula of formula

and formula =
  | F_integer of int  
  | F_boolean of bool
  | F_Add of formula * formula 
```

问题是我不知道如何改变`parser.mly`，我试过这个不起作用（`This expression has type string but an expression was expected of type Syntax.formula`）：

```
(* in `parser.mly`: *)
expression:
  | INTEGER { E_integer $1 }
  | STRING { 
    if String.sub $1 1 1 <> "="
    then E_string $1
    else E_formula (String.sub $1 2 ((String.length $1) - 1)) } 
```

我不知道如何让解析器知道，对于以 开头的字符串`=`，我需要根据...的规则进一步解析它`formula`。有人可以帮忙吗？

**根据以下评论`gasche`：**

我同意我需要一个公式解析器。现在的问题是我是否需要单独`lexer.mll`的公式。我希望不会，因为只对整个程序进行一次 lex 是一种逻辑，不是吗？另外，我可以直接将公式语法添加到现有的`parser.mly`吗？

在当前`lexer.mll`，我有：

```
let STRING = double_quote ([^ '\x0D' '\x0A' '\x22'])* double_quote
rule token = parse
  | STRING as s { STRING s } 
```

我想我可以直接在这里做点什么：

```
let STRING = double_quote ([^ '\x0D' '\x0A' '\x22'])* double_quote    
let FORMULA_STRING = double_quote = ([^ '\x0D' '\x0A' '\x22'])* double_quote
rule token = parse
  | FORMULA_STRING as fs { XXXXX }
  | STRING as s { STRING s } 
```

我不知道我应该写什么地方，如果我分开的话`XXXXX`，应该是什么？如果我只有其中包含所有语法，包括公式之一怎么办？`Parser_formula.formula token fs``parser_formula.mly``parser.mly`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:51:38.860

问题出在你的线路上

```
 else E_formula (String.sub $1 2 ((String.length $1) - 1)) 
```

而不是`(String.sub ...)`, 它有 type `string`，你应该返回一个 type 的值`Syntax.formula`。如果你有一个`parse_formula : string -> Syntax.formula`函数，你可以在这里写

```
 else E_formula (parse_formula (String.sub $1 2 ((String.length $1) - 1))) 
```

我认为您可以通过首先将公式语法定义为单独的解析器来定义这样的函数。

**编辑：**在您自己编辑之后：

*   如果您为公式调用不同的解析器，则不需要定义不同的词法分析器

*   如果您选择在词法分析器级别处理字符串和公式之间的区别（您确定这是正确的吗？以 '=' 开头的真实字符串呢？），那么您不需要单独的公式解析器，您可以将它们作为当前语法中的规则。但是要做到这一点，您需要您的词法分析器在公式上以更细粒度的方式运行：您应该将其识别为公式的开头，而不是仅仅识别`"=.*"`为单个标记，然后对公式的其余部分进行*lex*直到遇到结束。为了避免冲突，您可能希望使用词法规则而不是简单的正则表达式来处理简单的字符串。`"=`*`"`*

 *如果你能得到第二种方法来工作，我认为这确实是一个更简单的想法。

PS：请使用menhir变量命名工具，而不是`$1`一旦变量不连续（因为中间终端）或者您需要重复多次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T02:37:41.973

继续@gasche 的回答。

您想在*parser*中包含新的语法规则，这意味着您需要更改*parser.mly*中的语法规则以适应这些新规则。

该`String.sub`方法在某种程度上朝着正确的方向发展，但您实际上是在手动完成 mly 文件可以让您自动化的事情。

考虑您的`formula`类型：`F_Add`那里的数据类型允许您对二进制求和公式进行编码，因此包含 2 个公式。在 mly 文件中，您可以将其描述为：

```
formula:
   INTEGER                              { F_Integer $1 }
  | BOOL                                   { F_Bool $1 }
  | formula PLUS formula   { F_Add ($1, $3) }
; 
```

请注意语法规则定义如何反映`formula`类型定义。如您所见，公式的递归属性由语法规则为您很好地处理。

关于`lexer.mll`，正则表达式`STRING`和`FORMULA_STRING`完全相同。如果您在相同的词法分析器规则中使用它们（如在您的代码片段中），它将不会像您期望的那样工作。词法分析器不知道解析器中发生了什么，它**不能选择**在解析器方便填写特定规则时提供 a`STRING`或 a 。使用 ocamlyacc（以及它从中汲取灵感的工具），它可以工作`FORMULA_STRING`反之亦然：解析器接收词法分析器从文本流中识别的标记，并尝试根据他之前已经弄清楚的内容找到与它们对应的规则。

请注意，`BOOL`终端必须由 _lexer.mll `(just like`INTEGER`) 重新识别，因此您需要使用正确的正则表达式对其进行修改。

另外，您应该问自己以下问题：在`=5`公式中，是否有某个表达式等待被发现？

如果是这样，您能否根据表达式和新标记重新制定公式的定义？*

# c - 为什么我的代码只使用 fscanf 存储文件中的最后一个单词？

> ID：13958560
> 
> 赞同：2
> 
> 时间：2012-12-19T18:16:05.950
> 
> 标签：c, scanf

这里的 printf 语句只打印出文件中的最后一个单词。这是为什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void)
{
    FILE *fp;
    int c;
    char string[100];
    fp = fopen("exam.txt", "r");
    c = getc(fp);
    while(c!=EOF)
    { 
        fscanf(fp, "%s", string);
        c = getc(fp);
    }
    fclose(fp);
    printf("%s", string);
    return 0; 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:17:17.490

因为你最后只打印一次......

```
printf("%s", string); 
```

您需要在此循环内打印：

```
while(c!=EOF)
{ 
    fscanf(fp, "%99s", string);
    printf("%s\n", string);  // now you can see the files as you read it.
     c = getc(fp);
} 
```

如果你想看到每一行。你只是`string`每次都覆盖。

`int c`此外，您在使用它之前不会进行初始化。

分解`fscanf()`：

```
 fscanf(fp,       // read from here   (file pointer to your file)
        "%99s",   // read this format (string up to 99 characters)
         string); // store the data here (your char array) 
```

您的循环条件是当下一个字符不是 EOF 表示文件结束时（在从文件中读取所有数据后发生的条件）

所以：

```
while (we're not at the end of the file)
     read up a line and store it in string
     get the next character 
```

您会注意到您的算法不会检查该字符串中的任何内容，它只是写入它。这将每次覆盖那里的数据。这就是为什么您只能看到文件的最后一行，因为您一直在写`string`，而其中的最后一件事恰好是您在看到 EOF 字符并跳出 while 循环之前阅读的最后一行。

# android - 在 www.000webhost.com 上托管 wamp 数据库，在 android 中显示 jsonparsing 错误

> ID：13958563
> 
> 赞同：0
> 
> 时间：2012-12-19T18:16:12.857
> 
> 标签：android, wamp, web-hosting, arrays

我完成了我的时间表应用程序，其中时间表存储在 wamp 服务器中，我的 android 应用程序将获取表并将它们保存在 android 上的 sqlite DB 中。我使用 Jsonparsing 从服务器获取数据。

我未能在 www.000webhost.com 上托管我的表，在 android logcat 中，我收到有关 Json 解析的警告和错误。

浏览时我知道，我在 wamp 中使用的 php 是 3.4，但在上面的网站上它是 3.2，它不支持 json 数组。

有没有办法解决这个问题？是否有任何其他免费网站可以托管支持 Json 数组？

这是我的部分代码..

```
private class GrabURL extends AsyncTask<String, Void, Void>
{
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();;

    private ProgressDialog Dialog = new ProgressDialog(MainActivity.this);

    protected void onPreExecute() 
    {
        Dialog.setMessage("Loading...");
        Dialog.show();
        nameValuePairs.add(new BasicNameValuePair("DEPT",DEPT));
        nameValuePairs.add(new BasicNameValuePair("SEM",SEM));
        nameValuePairs.add(new BasicNameValuePair("DIV",DIV));
    }
    protected Void doInBackground(String... urls)
    {
       try{
              HttpClient httpclient = new DefaultHttpClient();
              HttpPost httppost = new HttpPost(url);
              httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
              response=httpclient.execute(httppost);
              inputStream = response.getEntity().getContent();

          }
          catch(Exception e)
          {
              Dialog.dismiss();
              Toast.makeText(getBaseContext(), "Check your internet connection", Toast.LENGTH_SHORT).show();
              Log.e("log_tag", "Error in http connection "+e.toString());

          }

       return null;
    }
    protected void onPostExecute(Void unused)
    {
         try{
           BufferedReader reader = new BufferedReader(new InputStreamReader(
                    inputStream, "iso-8859-1"), 8);

            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            inputStream.close();
             json = sb.toString();
       }
       catch (Exception e) {
              Log.e("Buffer Error", "Error converting result " + e.toString());
          }
       try{
           JSONArray jarray = new JSONArray(json);
        SQLiteDatabase db=openOrCreateDatabase("Mydb", MODE_PRIVATE,null);
        db.execSQL("DROP TABLE IF EXISTS stores;");
        db.execSQL("CREATE TABLE IF NOT EXISTS stores(day VARCHAR,first VARCHAR,sec VARCHAR," +
                "third VARCHAR,fourth VARCHAR,fifth VARCHAR,sixth VARCHAR," +
                "seventh VARCHAR,eighth VARCHAR);");
        db.execSQL("INSERT INTO stores VALUES('DAY','8-9','9-10','10:15-11:15','11:15-12:15'," +
                "'12:30-1:30','1:30-2:30','2:45-3:45','3:45-4:45');");
           for (int i=0; i < (jarray.length()); i++)
           {
             JSONObject oneObject = jarray.getJSONObject(i);
          SQLiteDatabase db1=openOrCreateDatabase("Mydb", MODE_PRIVATE,null);

          db1.execSQL("INSERT INTO stores ( day,first,sec,third,fourth,fifth,sixth,seventh,eighth) " +
                "VALUES ( ?, ?, ?, ?, ?, ?, ?, ?,? )",
                new Object [] {
               strday = oneObject.getString("day"),
               strone = oneObject.getString("8-9"),
               strtwo = oneObject.getString("9-10"),
               strthree = oneObject.getString("10:15-11:15"),
               strfour = oneObject.getString("11:15-12:15"),
               strfive = oneObject.getString("12:30-1:30"),
               strsix = oneObject.getString("1:30-2:30"),
               strseven = oneObject.getString("2:45-3:45"),
               streight = oneObject.getString("3:45-4:45")
        }
                  );
        db1.close();
        Dialog.dismiss(); 
           }
        Toast.makeText(getBaseContext(), "Successfully saved.", Toast.LENGTH_SHORT).show();
           db.close();

       }
       catch (Exception e) {
            e.printStackTrace();
         Log.e("log_tag", "oops!! error in saving"+e.toString());
        Toast.makeText(getBaseContext(), "oops!! error in saving ur  time table", Toast.LENGTH_SHORT).show();
        Toast.makeText(getBaseContext(), "Your Time Table is not available", Toast.LENGTH_SHORT).show();
        }

    }
}
public void grabURL(String url)
{
    new GrabURL().execute(url);
} 
```

日志猫....

```
12-18 18:27:59.373: W/KeyCharacterMap(1014): No keyboard for id 0
12-18 18:27:59.373: W/KeyCharacterMap(1014): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-18 18:28:37.283: D/dalvikvm(1014): GC_EXTERNAL_ALLOC freed 167K, 51% free 2716K/5511K, external 513K/517K, paused 51ms
12-18 18:28:38.643: D/dalvikvm(1014): GC_FOR_MALLOC freed 66K, 50% free 2827K/5639K, external 518K/1030K, paused 47ms
12-18 18:28:39.363: W/System.err(1014): org.json.JSONException: Value Invalid of type java.lang.String cannot be converted to JSONArray
12-18 18:28:39.363: W/System.err(1014):     at org.json.JSON.typeMismatch(JSON.java:107)
12-18 18:28:39.363: W/System.err(1014):     at org.json.JSONArray.<init>(JSONArray.java:91)
12-18 18:28:39.363: W/System.err(1014):     at org.json.JSONArray.<init>(JSONArray.java:103)
12-18 18:28:39.363: W/System.err(1014):     at com.exam.allabouttable.MainActivity$GrabURL.onPostExecute(MainActivity.java:195)
12-18 18:28:39.373: W/System.err(1014):     at com.exam.allabouttable.MainActivity$GrabURL.onPostExecute(MainActivity.java:1)
12-18 18:28:39.373: W/System.err(1014):     at android.os.AsyncTask.finish(AsyncTask.java:417)
12-18 18:28:39.373: W/System.err(1014):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
12-18 18:28:39.373: W/System.err(1014):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
12-18 18:28:39.373: W/System.err(1014):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 18:28:39.373: W/System.err(1014):     at android.os.Looper.loop(Looper.java:123)
12-18 18:28:39.373: W/System.err(1014):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-18 18:28:39.373: W/System.err(1014):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 18:28:39.373: W/System.err(1014):     at java.lang.reflect.Method.invoke(Method.java:507)
12-18 18:28:39.383: W/System.err(1014):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-18 18:28:39.383: W/System.err(1014):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-18 18:28:39.383: W/System.err(1014):     at dalvik.system.NativeStart.main(Native Method)
12-18 18:28:39.383: E/log_tag(1014): oops!! error in savingorg.json.JSONException: Value Invalid of type java.lang.String cannot be converted to JSONArray
12-18 18:36:29.023: I/dalvikvm(1014): Jit: resizing JitTable from 512 to 1024 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T16:41:13.300

对不起，我刚刚解决了我的问题，[在这里得到了回答](https://stackoverflow.com/questions/19983697/couldnt-connect-to-database-with-android/20011651?noredirect=1#20011651)

我已将 HttpPost 更改为 HttpGet，用于检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:15:10.210

从您的日志看来，您传递给的字符串`new JSONArray()`不是有效的 JSON。确保你的字符串是有效的，也许在你传递它之前打印出来只是为了检查它是否有效。

# php - 在选择下拉列表时将数据加载到文本框中

> ID：13958564
> 
> 赞同：0
> 
> 时间：2012-12-19T18:16:15.820
> 
> 标签：php, javascript, mysql

我有一个学生管理系统项目，我正在使用自定义 php 应用程序在线获取学生注册表格。

当我在表格的第一个开头插入注册表时，会有一个学生 ID 的下拉列表。我的客户希望如果他/她从下拉列表中选择特定学生的 ID，他的数据将根据选择自动显示在文本框中。

我知道在这里我需要javascript，但我不知道该怎么做。我已经搜索过，但没有找到任何相关的东西。任何人都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:35:20.353

您需要先捕获下拉列表的 onchange 事件。当此事件触发时，您需要运行对服务器进行 AJAX 调用的 javascript，以便根据下拉列表中选定的学生检索学生的数据。您将需要 PHP/MySQL 服务器端代码来处理此请求。当 AJAX 调用与数据一起返回时，您将需要更多的 javascript 来填充您希望显示数据的文本框。

我不会为您编写代码，但希望这足以为您指明正确的方向。

编辑：如果您需要更多详细信息，请查看如何在 jQuery 中创建 AJAX 调用。您的要求并不少见，因此您应该能够找到非常接近您需要的示例。查看相关教程：[jQuery AJAX 教程](http://www.php4every1.com/tutorials/jquery-ajax-tutorial/)

# web-services - 如何在 jboss-esb 中使用 xslt 转换创建 wsproxy

> ID：13958565
> 
> 赞同：0
> 
> 时间：2012-12-19T18:16:19.420
> 
> 标签：web-services, xslt, jboss, proxy, esb

JBoss ESB 4.11

你好！

我使用 JBoss ESB 4.11，我们正在创建 web 服务代理，我们需要使用 xslt 转换来转换有效负载消息。但我可以找到任何功能示例来使用。

这是原始消息的示例

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cim:ESRGERAL xmlns:cim="http://iec.ch/TC57/2007/profile#">
<cim:Terminal>
<cim:mRID>_012345_term</cim:mRID>
<cim:aliasName>term01</cim:aliasName>
<cim:name>term01</cim:name> 
```

这是xslt文件

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
<xsl:output method="xml" encoding="utf-8" indent="yes"/>
<xsl:template match="*">
<ESRGERAL xmlns:cim="http://iec.ch/TC57/2007/profile#">
<xsl:for-each select="//cim:Terminal">
<Terminal>
<mRID>
<xsl:value-of select="cim:mRID"/>
</mRID>
<name>
<xsl:value-of select="cim:aliasName"/>
</name>
</Terminal>
</xsl:for-each>
</cim:ESRGERAL>
</xsl:template>
</xsl:stylesheet> 
```

我需要帮助在 jboss-esb.xml 中创建正确的配置，当我使用 java 实现时，这两个文件工作正常，但我可以在 jboss esb 中做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T09:14:36.950

如果您想使用 XSLT 来转换 XML 有效负载，那么我相信 XsltAction 就是您正在寻找的：

[http://docs.jboss.org/jbossesb/docs/4.11/manuals/html/Programmers_Guide/index.html#OOB-transformers-xsltaction](http://docs.jboss.org/jbossesb/docs/4.11/manuals/html/Programmers_Guide/index.html#OOB-transformers-xsltaction)

Not sure that this fully answers your question but in any case, your use case seems very straight forward so I believe JBoss ESB will support it right out of the box without the need for custom code.

One caveat is if you really need to use XSLT 2.0 and not XSLT 1.0 (like in your example), then you will need to do something to make it load your 2.0 XSLT library instead of the standard.

# python - defbeforePeriod(s):

> ID：13958567
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:16:23.543
> 
> 标签：python, string, helper

如何编写一个以 defbeforePeriod(s): 开头的 Python 函数，它返回字符串 s 中第一个句点之前的子字符串，即参数。该字符串包含一个句点。所以如果 s 是“abc2.3ty”，我的函数将返回“abc2”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:35:31.410

```
import re
def beforePeriod(s):
    m = re.match('(.*)\..*',s)
    if m:
       return m.groups()[0] 
```

或者

```
def beforePeriod(s):
   return s[s:s.index('.')] 
```

或者

```
 def beforePeriod(s):
       return s.split('.')[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:40:04.147

如果您查看 docs.python.org 部分[5.6.1。字符串方法](http://docs.python.org/2/library/stdtypes.html#string-methods)你会看到一个`str.find()`函数：

> str.find(sub[, start[, end]])
> 返回找到子字符串 sub 的字符串中的最低索引 ... find() 方法仅应在您需要知道 sub 的位置时使用。

`find()`可以如以下示例所示使用，该示例是从 ipython 解释器脚本中截取的。

```
In [2]: def defbeforePeriod(s):
   ...:     return s[:s.find('.')]
   ...: 

In [3]: defbeforePeriod('abc2.3ty')
Out[3]: 'abc2'

In [4]: defbeforePeriod('abc2.3ty.zeta')
Out[4]: 'abc2' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T19:05:04.650

如果您正在尝试操作文件名，请[`os.path`](http://docs.python.org/2/library/os.path.html)查看[`os.path.splitext()`](http://docs.python.org/2/library/os.path.html#os.path.splitext).

# php - PHP 和 JQuery：值不更新

> ID：13958569
> 
> 赞同：2
> 
> 时间：2012-12-19T18:16:23.757
> 
> 标签：php, jquery

几个问题：

1）我试图在每次按下按钮时更新一个新的随机值。单击按钮时，会生成一次值...但不是随机的。所以我不确定是否在单击时再次调用该函数，因为没有生成新值。

2) 当使用 $.get() 之类的服务器调用并将其作为同一文件中的函数调用时，我可以将 php 代码包含在与 jquery 相同的文件中吗？

原因是，我不想继续创建新的 php 脚本文件，而宁愿将代码与调用 jquery 放在同一个文件中。

意义...

代替`$.get("../scripts/NameGenerator2.php",`

我这样做：`$.get("a php function within this same file",`

**查询：**

```
<?php 
   if ($imgid == 1) {
?>
<button onclick="generate()">Generate</button>

<button id="generateButton">Generate</button>

<script type="text/javascript">
    $(document).ready(function() {
        $("#generateButton").click(function(e) {
            //alert("called");
           $.get("../scripts/NameGenerator2.php", 
                function(returned_data) {
                    $("#generated").html(returned_data);
                }
            ).error(function(jqXHR, status, error) {
                console.log("error in $.get")
            });
        });
    });
</script>       
<?php } ?>
<br /><span id="generated"></span><br /> 
```

**PHP：**

```
<?php 
$adj = array("Happy", "Great", "Mandarin", "New", "Golden", "Ming's");
$noun = array("Dragon", "Sea", "Wok", "Fortune", "Rice", "Empire");
$place = array("Garden", "China", "Village", "Palace", "Kitchen", "Mountain");

$x = rand(0, count($adj)-1);
$y = rand(0, count($noun)-1);
$z = rand(0, count($place)-1);

echo '<p>' . $adj[$x] . " " . $noun[$y] . " " . $place[$z] . '</p>';

?> 
```

有什么想法吗？谢谢！

更新：我似乎得到的唯一错误是我的“myJquery.js”文件中的“预期对象”，这不是我正在使用的文件，并且似乎没有连接。

![在此处输入图像描述](../Images/71c8e119023cdcf2b34f8b179320ca47.png)

当我将准备好的文档添加到我的函数中时，按钮 onclick() 调用似乎中断了。

![在此处输入图像描述](../Images/464e956b7ce7b584ec31b63341d0676b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:32:10.827

您可以使用 jQuery 调用 .php 文件。但是您的浏览器应该可以访问该文件，并且应该返回合格的数据。

使用[.get()](http://api.jquery.com/jQuery.get/)您可以定义预期的数据类型。它可以是 xml、json、脚本或 html。如果您想使用 json（我最喜欢的），请使用 php-function [json_encode](http://php.net/manual/de/function.json-encode.php)来生成输出。

如果您想使用相同的文件，请创建一个 GET 参数，例如 ?ajax=1。使用您的 AJAX 请求，您可以调用该文件并附加 GET 参数。然后在您的 .php 文件中，您可以在正常调用和返回其他输出的 ajax 调用之间切换。

```
<?php
    if (!empty($_GET) && !empty($_GET['ajax']) && $_GET['ajax'] == 1) {
        // header("Content-type: application/json");
        // $data = array(some_data);
        // echo json_encode($data);
        echo 'AJAX-call-output';
    } else {
?>
        <!-- [...] -->
        <script type="text/javascript">
            function generate() {     
               $.get("../scripts/NameGenerator2.php",
                    { ajax: 1 },  // GET-Parameter
                    function(returned_data) {
                        //alert("test");
                        $("#generated").html(returned_data);
                    }
                    //, "json"
                );
            }
        </script>
        <!-- [...] -->
<?php
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:25:01.873

您无法获取 PHP 函数，但您可以加载页面并获取特定的 div -

```
$('#generated').load('../scripts/NameGenerator2.php #pagePart'); 
```

例如，您使用正确的 id 回显 PHP -

```
echo '<p id="pagePart">' . $adj[$x] . " " . $noun[$x] . " " . $place[$x] . '</p>'; 
```

在不使用任何内联 JavaScript 的情况下，这就是您的 jQuery 代码可能的样子 -

```
<button id="generate">Generate</button>

$(document).ready(function() {
    $('#generate').click(function(e){
        e.preventDefault();
        $('#generated').load('../scripts/NameGenerator2.php #pagePart');
    });
}); 
```

根据您的更新，您需要将所有 jQuery 函数移动到文档就绪函数中。

# freebase - Freebase“别名”数据集转储

> ID：13958571
> 
> 赞同：1
> 
> 时间：2012-12-19T18:16:41.230
> 
> 标签：freebase

是否存在 Freebase 别名的数据集转储文件（例如“体育”主题 - 运动队的别名、运动员的别名等）？

我知道我可以通过 http 请求/应用程序获取特定对象的别名，但我只需要别名列表并且不想发出 250 万（或更多）次的 http 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:10:46.380

所有别名都包含在 quad 和 RDF 转储文件中。 [http://wiki.freebase.com/wiki/Data_dumps](http://wiki.freebase.com/wiki/Data_dumps)

# php - PHP：如何从模式 H:i (17:45) 创建时间戳？

> ID：13958572
> 
> 赞同：2
> 
> 时间：2012-12-19T18:16:45.710
> 
> 标签：php, datetime, timestamp, mktime

我当前的代码：

```
<?php
    $timestamp = DateTime::createFromFormat("d.m.Y H:i", $_POST["datetime"]);
    echo $timestamp; // works!
?> 
```

现在我有一个包含两个字段的表单：日期和时间，分开。

```
<?php
    $timestamp = DateTime::createFromFormat("d.m.Y", $_POST["date"]);
    echo $timestamp; // works!

    $timestamp = DateTime::createFromFormat("H:i", $_POST["time"]);
    echo $timestamp; // doesn't work (error below)!

    // Edit: 
    /* Fatal error: Call to a member function getTimestamp() on a non-object in */
?> 
```

我想避免将explode() 与mktime() 一起使用。这感觉很脏，我认为可能还有另一种干净的方式。

您将如何从格式创建时间戳？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:20:25.137

你不能。时间戳需要一个日期才能计算出来，并且没有可用的日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:20:45.640

如果您想从中获取日期和时间`$_POST["date"]`并`$_POST["time"]`使用以下

```
DateTime::createFromFormat("d.m.Y H:i", $_POST["date"]." ".$_POST["time"]); 
```

如果你想知道从午夜到那个特定时间的秒数，你可以使用它，

```
DateTime::createFromFormat("Ymd H:i", date("Ymd")." ".$_POST["time"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:27:01.623

使用日期时间的[settime](http://php.net/manual/en/datetime.settime.php)方法

```
$timestamp = \DateTime::createFromFormat("d.m.Y", '10.10.2012');
$timestamp->setTime(17,12);
var_dump($timestamp); 
```

给

```
object(DateTime)#1142 (3) { ["date"]=> string(19) "2012-10-10 17:12:00" ["timezone_type"]=> int(3) ["timezone"]=> string(3) "UTC" } 
```

# c++ - c++ operator new 和 delete 与容器的内存泄漏

> ID：13958576
> 
> 赞同：0
> 
> 时间：2012-12-19T18:16:51.603
> 
> 标签：c++, list, memory, containers, memory-leaks

似乎很简单的问题，但我很怀疑。**当我调用使用运算符创建**的非空列表时，运算符会`delete`销毁**所有** `Object`元素吗？当然会，但我需要确认。如您所见，有构造函数，但没有分发器。`delete list` **`new``Object`**

 **代码：

```
std::list<Object>* ptr_listObjects = new std::list<Object>();
OtherObject* ptr_null = NULL;
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
ptr_listObjects->push_back ( Object( ptr_null, 'A') );
delete ptr_listObjects; // no any possible memory leaks? (Object does not use `new` operator)

class Object
{
public:
    Object( OtherObject* ptr_other, char xxx):
    ptr_OtherObject(ptr_other),
    charflag(xxx)
    {}

    OtherObject* ptr_OtherObject;
    char charflag;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:20:59.257

`std::list`析构函数将运行，其元素的析构函数也将运行。也就是说，你为什么要动态分配一个容器？您使容器无法为您管理内存。让它发挥作用；分配具有自动存储期限的列表。

顺便说一句，`Object` *确实*有一个析构函数，编译器会为你生成一个空的。但是没有什么要清理的，所以它什么也没做。此外，从类设计中可以清楚地看出，实例`Object`不拥有其构造函数中的指针，因此请确保永远不要释放它，除非您对设计进行了重大更改。**

# c# - 如何使用模型优先方法使用动态连接字符串，但仍使用 EDMX 中的数据模型？

> ID：13958579
> 
> 赞同：8
> 
> 时间：2012-12-19T18:17:22.937
> 
> 标签：c#, entity-framework, t4, .net-4.5, entity-framework-5

我已经使用 EF 5 和 Model First 方法创建了一个 EDMX，即我从一个空白设计器开始并为我的实体建模。现在我希望能够使用在 EDMX 中定义的这个模型，但提供运行时 SQL Server 连接字符串，而无需修改配置文件。

我知道如何将连接字符串传递给 DbContext，但问题是在程序集中定位映射的元数据。

例如，我的 EDMX 在 app.config 中有这个连接字符串

```
<add name="MesSystemEntities" connectionString="metadata=res://*/Data.DataContext.EntityFramework.MesSystem.csdl|res://*/Data.DataContext.EntityFramework.MesSystem.ssdl|res://*/Data.DataContext.EntityFramework.MesSystem.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=MyMachine;initial catalog=MesSystem;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我缺少的部分是`"metadata=res://*/Data.DataContext.EntityFramework.MesSystem.csdl|res://*/Data.DataContext.EntityFramework.MesSystem.ssdl|res://*/Data.DataContext.EntityFramework.MesSystem.msl;"`

我希望能够以`DbContext`编程方式创建一个传入 SQL Server 连接字符串但“添加”元数据部分的方法。

这就是我希望由 T4 文件生成的...

```
public partial class MesSystemEntities : DbContext
{
    public MesSystemEntities()
        : base("name=MesSystemEntities")
    {
    }

    public MesSystemEntities(string sqlServerConnectionString)
        : base(GetEfConnectionString(sqlServerConnectionString))
    {    
    }

    private string GetEfConnectionString(string sqlServerConnectionString)
    {
       // values added by T4 generation
       string format = "metadata=res://*/Data.DataContext.EntityFramework.MesSystem.csdl|res://*/Data.DataContext.EntityFramework.MesSystem.ssdl|res://*/Data.DataContext.EntityFramework.MesSystem.msl;;provider=System.Data.SqlClient;provider connection string=\"{0}\"";    
       return String.Format(format, sqlServerConnectionString);
    }
...
} 
```

我的问题是如何在不为每个 EDMX 文件硬编码的情况下，在 T4 生成文件中获取创建实体框架连接所需的元数据

*或者*

有没有更简单的方法以编程方式从程序集中加载元数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:58:05.707

我遇到了同样的问题，所以我没有依赖连接字符串中的所有元数据（我认为这不是一个好主意），而是编写了一个方法来从标准连接字符串创建它。（我可能应该将它重构为 DbContext 的扩展方法，但这应该可以）

```
internal static class ContextConnectionStringBuilder
{
  // Modified Version of http://stackoverflow.com/a/2294308/209259
  public static string GetEntityConnectionString(string ConnectionString, 
                                                 Type ContextType)
  {
    string result = string.Empty;

    string prefix = ContextType.Namespace
      .Replace(ContextType.Assembly.GetName().Name, "");

    if (prefix.Length > 0
        && prefix.StartsWith("."))
    {
      prefix = prefix.Substring(1, prefix.Length - 1);
    }

    if (prefix.Length > 1
        && !prefix.EndsWith("."))
    {
      prefix += ".";
    }

    EntityConnectionStringBuilder csBuilder = 
      new EntityConnectionStringBuilder();

    csBuilder.Provider = "System.Data.SqlClient";
    csBuilder.ProviderConnectionString = ConnectionString.ToString();
    csBuilder.Metadata = string.Format("res://{0}/{1}.csdl|"
                                        + "res://{0}/{1}.ssdl|"
                                        + "res://{0}/{1}.msl"
                                        , ContextType.Assembly.FullName
                                        , prefix + ContextType.Name);

    result =  csBuilder.ToString();

    return result;
  }
} 
```

基本用法是这样的：

```
string connString = 
  ConfigurationMananager.ConnectionStrings["name"].ConnectionString;

string dbConnectionString = ContextConnectionStringBuilder(connString,
                                                           typeof(MyDbContext));

var dbContext = new MyDbContext(dbConnectionString); 
```

# ruby-on-rails - Heroku 上的不受信任的证书

> ID：13958580
> 
> 赞同：7
> 
> 时间：2012-12-19T18:17:28.067
> 
> 标签：ruby-on-rails, ruby, ssl, heroku

一般来说，我对 ssl 和证书的了解并不多，因为我最近才开始“真正”与他们合作并理解他们。我有一个问题。

我正在运送一个连接到特定域“derp.com”的android库。我的每个客户都有一个子域来访问图书馆。例如“customer.derpy.com”

因此，在 android 上使用 https 可能会很痛苦，但这并不是世界末日。我遇到的问题是我的证书没有被所有使用服务器 https 的设备信任。我怀疑这就是为什么：

```
heroku certs --app my-app
Endpoint                  Common Name(s)                Expires               Trusted
------------------------  ----------------------------  --------------------  -------
cdepy412532.herokussl.com  *.derp.com, derp.com  2013-04-05 22:36 UTC  False 
```

证书被标记为不受信任。我怀疑这是问题的原因，因为设备抱怨他们无法验证证书。为什么会这样？

* * *

该证书由 ca 颁发。我认为它要么是rapidssl，要么是geotrust。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T10:33:27.180

我确实讨厌回答我自己的问题，宁愿删除它，但这可能对其他人有所帮助。

我的问题是我忘记将中间证书与根证书结合起来。

[Ryan McGeary](http://ryan.mcgeary.org/2011/09/16/how-to-add-a-dnsimple-ssl-certificate-to-heroku/)的这篇教程很有帮助。

我唯一的建议是确保您拥有来自您的老板或任何收到它们的人的中间证书（pem 或 crt）、根证书（pem 或 crt）和私钥（密钥）。如果您没有所有这些，那么您将在 heroku 上获得不受信任的证书。

# c - 服务器怎么知道消息队列被销毁了

> ID：13958582
> 
> 赞同：1
> 
> 时间：2012-12-19T18:17:28.210
> 
> 标签：c, linux, message-queue

我编写了一个小型服务器客户端消息队列程序，其中服务器创建消息队列，写入队列，客户端获取消息队列 id 并从队列中读取写入的数据。

问题是，一旦客户端停止/重新启动，客户端将销毁/删除队列。服务器将尝试写入队列，但失败了。当客户端再次启动时，它会创建一个新的消息队列，现在服务器是否有可能知道消息队列已创建并开始写入队列。或者有没有其他方法可以克服这种情况。

注意：服务器不能销毁队列，因为写入的数据应该由客户端读取。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:05:36.103

好吧，客户端和服务器共享队列 ID。所以你需要使用 ipcs 命令轮询 queueid。

# opengl - 不推荐使用的 OpenGL 函数

> ID：13958585
> 
> 赞同：2
> 
> 时间：2012-12-19T18:17:48.623
> 
> 标签：opengl

我目前正在通过 5th Superbible 学习 OpenGL。它教你核心配置文件。但我真的很困惑。

我知道 khronos 在 3.3 中删除了固定函数管道，并将某些函数声明为已弃用。但是 Superbible 现在只是用自己的函数替换了那些不推荐使用的函数。

为什么 khronos 应该删除 glRotate 或 matrixstack 之类的东西，以便我必须使用 3rd 方库（或我自己的）而不是官方库？

或许是极品有缺陷？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:26:25.883

glRotate() 等已被删除，因为 openGL 在内部处理矩阵，因此让您直接提供矩阵是一种更简洁的设计。

几乎所有复杂的openGL应用程序都会做一堆其他矩阵的东西，并且会有自己的矩阵类，openGL更容易得到结果，而不是坚持从一堆旋转/平移/缩放中创建它们来电。

他们本可以提供自己的矩阵类 - 但是您可以使用很多第 3 方库。openGL 的一项政策（失败）是它确实依赖 3rd 方库来执行实际图形之外的任何事情。因此，初学者程序是 GLUT、GLEW、SDL 等的巧妙组合，可以在屏幕上显示任何内容 - 而 DirectX 拥有开箱即用的所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:55:12.053

Khronos 从核心配置文件中删除了这些功能，但它们仍然在兼容性配置文件中可用。主要原因是性能之一：

在当今的大多数应用程序中，必须在渲染器和应用程序之间来回传递的信息量比十年前要大得多。因此 ARB 提出了缓冲区（顶点数组和顶点缓冲区对象），以最大限度地利用主系统和渲染硬件之间的可用带宽。但是，如果您开始使用 VBO 机制来传输数据，那么大多数遗留功能将变得毫无用处。

也就是说，除了需要支持遗留应用程序（这是兼容性配置文件的充分理由）之外，我认为这个 API 对于学习目的仍然有用。

至于您的主要问题，上述内容仅适用于 OpenGL 的完整版本，而不是不支持旧原语的 ES 版本，在这种情况下，需要一个仿真层。

# c++ - QT 项目无法编译，没有可构建的编译器

> ID：13958586
> 
> 赞同：2
> 
> 时间：2012-12-19T18:17:48.693
> 
> 标签：c++, macos, qt

我正在运行 Mountain Lion 并且已经安装了 QT Library 4.8

[从此页面...](http://qt-project.org/downloads) Qt 库 4.8.4 for Mac (185 MB)

我还从同一页面安装了 Qt Creator 2.6.1 for Mac (Intel 32/64bit) (51 MB)。

当我尝试运行时，我收到此错误：

> 18:14:01：无法启动进程“make”-w 在构建/部署项目 WebBrowser 时出错（目标：桌面）执行步骤“Make”时

我将在三个屏幕截图中包含我的构建设置

![套件](../Images/7c1793fbc6068fcdf6184cc585a3baae.png) ![QT 版本](../Images/c9eab4b679fac8551c1f664c2cd62f17.png) ![编译器](../Images/1e69cf852ff8659384d5d1b5dd3ea347.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:24:04.570

好像您没有安装 XCode 的 UNIX 命令行工具包。安装它，它应该可以工作。请参阅此处了解如何在 XCode 中安装 UNIX 工具：

[https://stackoverflow.com/a/9329325/856199](https://stackoverflow.com/a/9329325/856199)

如果您不想安装 XCode，也有独立版本的 UNIX 命令行开发工具。你可以在这里找到它们：

[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)

寻找“XCode 的命令行工具（OS X Mountain Lion）”。获取最新版本。

# javascript - Javascript 正则表达式 - 删除大写字母之前的字母并将 _ 替换为空格

> ID：13958589
> 
> 赞同：-2
> 
> 时间：2012-12-19T18:17:58.127
> 
> 标签：javascript, regex

我有一个正在迭代的字符串列表。他们之中有一些是

```
data-Start, data-End_Start, Name, ID, data-Allocate_Memory 
```

我需要这种格式的

```
Start,End Start, Name, ID, Allocate Memory 
```

所以我需要删除“data-”，然后用空格替换_。我对正则表达式一无所知。你能帮忙的话，我会很高兴 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:23:20.777

要从第一个大写字母开始您的字符串，您可以使用：

```
str = str.replace(/^[^A-Z]+/,''); 
```

要替换`_`为空格，只需使用：

```
str = str.replace(/_/g,' '); 
```

由于这两个正则表达式无法合理组合，您可以将它们链接起来：

```
str = str.replace(/^[^A-Z]+/,'').replace(/_/g,' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:26:33.307

*这将*替换字符串开头出现的*data- ：*

 *```
str.replace(/^data-/, "") 
```

这将替换所有下划线：

```
str.replace(/_/g, " ") 
```

把它们放在一起：

```
var a = ["data-Start", "data-End_Start", "Name", "ID", "data-Allocate_Memory"];
for(var i = 0; i < a.length; i++) {
    a[i] = a[i].replace(/^data-/, "").replace(/_/g, " ");
} 
```*

# java - 自动完成装饰器

> ID：13958590
> 
> 赞同：1
> 
> 时间：2012-12-19T18:18:01.620
> 
> 标签：java, swing, autocomplete, decorator, swingx

我在 Swing 应用程序中实现 autocompleteDecorator。我的代码是这样的。

```
public inventory_purchase() {
    initComponents();
    AutoCompleteDecorator.decorate(this.combo);
}

public void autocomplete(){
    try{
        Class.forName("org.apache.derby.jdbc.ClientDriver");
        Connection conn= DriverManager.getConnection("jdbc:derby://localhost:1527/C:/jpublisher/pub", "APP", "app");
        Statement stmt = conn.createStatement();
        String query="SELECT * FROM INVENTORY";
        ResultSet rs = stmt.executeQuery(query);
        while(rs.next()){
            combo.addItem(rs.getString("CATEGORY"));
        }
    }
    catch ( ClassNotFoundException | SQLException ex) {
        JOptionPane.showMessageDialog(null, "Data cannot be loaded. Error!!");
    }   

} 
```

这个自动完成装饰器只有在我调用这个函数时才起作用

```
formWindowOpened(java.awt.event.WindowEvent evt){autocomplete();} 
```

如何将此自动完成功能与关键侦听器一起使用？喜欢 ：

```
private void comboKeyReleased(java.awt.event.KeyEvent evt) {
    autocomplete();
} 
```

是否有任何其他简单的过程可以使用数据库中的自动完成功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:03:40.353

您可能想使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。这是一个简单的例子：

```
import java.awt.event.*;
import javax.swing.*;

public class KeyBindings extends Box{
    public KeyBindings(){
        super(BoxLayout.Y_AXIS);

        final JLabel text = new JLabel("Original Text");
        add(text);

        Action action = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {
                text.setText("New Text");
            }};
         String keyStrokeAndKey = "control H";
         KeyStroke keyStroke = KeyStroke.getKeyStroke(keyStrokeAndKey);
         getInputMap().put(keyStroke, keyStrokeAndKey);
         getActionMap().put(keyStrokeAndKey, action);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new KeyBindings());
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# openerp - 从向导运行报告

> ID：13958591
> 
> 赞同：2
> 
> 时间：2012-12-19T18:18:14.623
> 
> 标签：openerp

我有一个带按钮的向导。在按钮操作上，我想运行报告并将 PDF 保留在服务器上。我有上面的代码片段，它使用 Web 服务创建报告。但是在向导上下文中，我通常只有 uid（我认为）。

在向导中将报告写入磁盘的等效方法是什么？

```
def reportToDisk(self, cr, uid, ids, context=None):

    dbname = 'db'
    username = 'user'
    pwd = 'pass'
    model = 'sale.order'
    report_name = 'doc.sale'

    sock_common = xmlrpclib.ServerProxy ('http://localhost:8069/xmlrpc/common')
    uid = sock_common.login(dbname, username, pwd)

    sock = xmlrpclib.ServerProxy ('http://localhost:8069/xmlrpc/object')
    ids = sock.execute(dbname, uid, pwd, model, 'search',[])[0:1]

    sock_report = xmlrpclib.ServerProxy('http://localhost:8069/xmlrpc/report')
    id_report = sock_report.report(
            dbname, uid, pwd, report_name, ids,{'model': model, 'id': ids[0], 'report_type':'pdf'}
    )

    cont = True
    while cont:
            report = sock_report.report_get(dbname, uid, pwd, id_report)
            cont = not report['state']

    string_pdf = base64.decodestring(report['result'])
    file_pdf = open('/home/arch-in/file.pdf','w')
    file_pdf.write(string_pdf)
    file_pdf.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:23:21.833

在您的按钮单击时返回报告操作（它可以是向导按钮或查看按钮，它仅适用于按钮单击返回），如下所示：

```
 def btn_clik_action(self, cr, uid, ids, context=None):
        if context == None:
            context = {}
        value =  {
        'type': 'ir.actions.report.xml', 
        'report_name':'report.name.(servicename)',
        'datas': {
                  'model':'model.name',
                  'id': ids and ids[0] or False,
                  'ids': ids and ids or [],
                  'report_type': 'pdf'
                 },
           'nodestroy': True
       } 
```

只需返回报告操作将为您提供报告文件，基本上您不需要编写或任何内容。

谢谢你

# windows - 从列表中复制文件

> ID：13958594
> 
> 赞同：1
> 
> 时间：2012-12-19T18:18:30.133
> 
> 标签：windows, cmd

我有一个包含 4000 个 .tif 图像的列表，我需要从包含 20,000 多个图像的文件夹中复制这些图像。

我正在尝试通过使用从谷歌搜索我的问题中找到的代码来使用命令提示符来执行此操作。

代码如下：

```
for /f %a in H:\list.txt do copy %a H:\new

"H:\list.txt" is my list file
"H:\new" is where i want my files to be copied to 
```

我在包含 .tif 文件的文件夹中运行此命令，`H:\Doc2`并且不断收到：

> H:\list.txt 此时出乎意料。

是什么导致了这个问题？我的列表设置不正确吗？

它看起来像这样：

```
ABBA.TIF
ABBD.TIF
ABBQ.TIF 
```

文件名后是否需要逗号或冒号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:25:21.520

`H:\list.txt`是一个文字，你想遍历文件的每一行。看一下这个：

[如何使用 Windows 批处理文件遍历文本文件中的每一行？](https://stackoverflow.com/questions/155932/how-do-you-loop-through-each-line-in-a-text-file-using-a-windows-batch-file)

```
for /F "tokens=*" %%A in (myfile.txt) do [process] %%A 
```

建议：也用“windows”标记它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:01:25.313

Amir 诊断出您的直接问题 - 您的代码缺少 IN 子句周围的括号。

但是你还有另一个潜在的问题。您的列表可能包括文件名和/或包含空格或其他特殊字符的路径。如果是这样，则必须引用该名称。

列表中的值可能已经被引用，也可能没有。您可以使用`~`修饰符去除可能存在或不存在的任何现有封闭引号，然后显式添加您自己的。

```
for /f %a in (H:\list.txt) do copy "%~a" H:\new 
```

如果要在批处理文件中包含该行，则`%`必须将每个行加倍为`%%`.

# iphone - 如何从导航控制器中的视图更改为选项卡栏中的视图

> ID：13958598
> 
> 赞同：0
> 
> 时间：2012-12-19T18:18:45.290
> 
> 标签：iphone, objective-c, ios, xcode

在情节提要中，我设置了一个选项卡控制器，其中第一个选项卡通向一个带有多个视图控制器的导航控制器，而第二个选项卡通向一个视图控制器。

当我按下导航控制器中的按钮时，我想切换到第二个选项卡视图控制器。如果我执行模态转场，它不起作用，因为标签栏是隐藏的，如果我使用推送转场也不行，因为第二个视图显示为第一个选项卡。

我希望你能得到我的问题并感谢每一个答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:30:49.777

在按钮方法中只需调用标签栏控制器的 setSelectedIndex: 方法：

```
[self.tabBarController setSelectedIndex:1]; 
```

# powershell - 在 PS 脚本中找不到 XML 元素

> ID：13958613
> 
> 赞同：1
> 
> 时间：2012-12-19T18:20:07.807
> 
> 标签：powershell, xml-parsing

我正在尝试使用此 powershell 脚本 [https://gist.github.com/557222] 来分析我的 VS 解决方案引用，因为我有冲突但我不知道在哪里。

问题是它不起作用，因为这个错误：

```
ForEach-Object : Property 'HintPath' cannot be found on this object. Make sure that it exists.
At C:\bsi\Projects\Bsi.ManagementConsole\Branches\Tango58\Get-VSSolutionReferences.ps1:37 char:31
+                 ForEach-Object <<<<  {
    + CategoryInfo          : InvalidOperation: (.:OperatorToken) [ForEach-Object], RuntimeException
    + FullyQualifiedErrorId : PropertyNotFoundStrict,Microsoft.PowerShell.Commands.ForEachObjectCommand 
```

在某些情况下，XML 似乎没有任何 HintPath 元素。如果我删除有问题的行，脚本运行正常。但是，它没有提供我需要的最相关信息：HintPath。

所以，我需要的是在可能的情况下拥有这些信息。我的意思是，如果 XML 元素有我需要的 HintPath 元素，但它什么也没显示。

我问这个是因为我不了解 Powershell，无论我多么努力，我都无法按照我的意愿工作。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:31:24.110

注释掉该行，因为当您尝试访问对象上的属性并且该属性不存在`Set-StrictMode -Version Latest`时，这会导致错误。`HintPath`或者您可以将检查修改为`$_.HintPath`：

```
if (($_.psobject.Properties.Match('HintPath')) -ne $null -and $_.HintPath) {
    $RefPath = $ProjectRoot | Join-Path -ChildPath $_.HintPath
} 
```

但是从我的简单测试来看，您还需要在脚本的其他部分执行此操作，例如`SpecificVersion could not be found`.

# android - 如何检查不受限制的 Internet 访问？（强制门户检测）

> ID：13958614
> 
> 赞同：36
> 
> 时间：2012-12-19T18:20:13.533
> 
> 标签：android, http, authentication, redirect, connectivity

我需要可靠地检测设备是否具有完整的互联网访问权限，即用户不限于*强制门户*（也称为*围墙花园*），即强制用户在表单上提交其凭据以获得完整的有限子网使用权。

我的应用程序正在自动执行身份验证过程，因此在开始登录活动之前了解无法完全访问 Internet 非常重要。

问题*不*在于如何检查网络接口是否已启动并处于连接状态。这是为了确保设备具有不受限制的互联网访问权限，而不是沙盒内网段。

到目前为止我尝试过的所有方法都失败了，因为连接到任何知名主机都不会引发异常，而是返回有效的`HTTP 200`响应代码，因为所有请求都被路由到登录页面。

以下是我尝试过的所有方法，但它们都返回`true`而不是`false`出于上述原因：

1：

```
InetAddress.getByName(host).isReachable(TIMEOUT_IN_MILLISECONDS);
isConnected = true; <exception not thrown> 
```

2：

```
Socket socket = new Socket();
SocketAddress sockaddr = new InetSocketAddress(InetAddress.getByName(host), 80);
socket.connect(sockaddr, pingTimeout);
isConnected = socket.isConnected(); 
```

3：

```
URL url = new URL(hostUrl));
URLConnection urlConn = url.openConnection();
HttpURLConnection httpConn = (HttpURLConnection) urlConn;
httpConn.setAllowUserInteraction(false);
httpConn.setRequestMethod("GET");
httpConn.connect();
responseCode = httpConn.getResponseCode();
isConnected = responseCode == HttpURLConnection.HTTP_OK; 
```

那么，如何确保我连接到实际主机而不是登录重定向页面？显然，我可以从我使用的“ping”主机检查实际响应正文，但它看起来不是一个合适的解决方案。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-25T11:36:58.087

作为参考，这里是来自 Android 4.0.1 AOSP 代码库的“官方”方法： [WifiWatchdogStateMachine.isWalledGardenConnection()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/net/wifi/WifiWatchdogStateMachine.java#WifiWatchdogStateMachine.isWalledGardenConnection%28%29)。我将下面的代码包括在内，以防万一将来链接中断。

```
private static final String mWalledGardenUrl = "http://clients3.google.com/generate_204";
private static final int WALLED_GARDEN_SOCKET_TIMEOUT_MS = 10000;

private boolean isWalledGardenConnection() {
    HttpURLConnection urlConnection = null;
    try {
        URL url = new URL(mWalledGardenUrl); // "http://clients3.google.com/generate_204"
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setInstanceFollowRedirects(false);
        urlConnection.setConnectTimeout(WALLED_GARDEN_SOCKET_TIMEOUT_MS);
        urlConnection.setReadTimeout(WALLED_GARDEN_SOCKET_TIMEOUT_MS);
        urlConnection.setUseCaches(false);
        urlConnection.getInputStream();
        // We got a valid response, but not from the real google
        return urlConnection.getResponseCode() != 204;
    } catch (IOException e) {
        if (DBG) {
            log("Walled garden check - probably not a portal: exception "
                    + e);
        }
        return false;
    } finally {
        if (urlConnection != null) {
            urlConnection.disconnect();
        }
    }
} 
```

这种方法依赖于一个特定的 URL，`mWalledGardenUrl = "http://clients3.google.com/generate_204"`总是返回一个`204`响应代码。即使 DNS 受到干扰，这也会起作用，因为在这种情况下，`200`将返回一个代码而不是预期的`204`. 我看到一些强制门户网站欺骗了对这个特定 URL 的请求，以防止在 Android 设备上出现*Internet 无法访问的消息。*

谷歌有这个主题的变体：获取`http://www.google.com/blank.html`将返回一个`200`长度为零的响应正文的代码。所以如果你得到一个非空的身体，这将是另一种判断你在围墙花园后面的方法。

Apple 有自己的 URL 用于检测强制门户：当网络启动时，IOS 和 MacOS 设备将连接到诸如[http://www.apple.com/library/test/success.html、http://attwifi.apple](http://www.apple.com/library/test/success.html)之类的URL [。 com/library/test/success.html](http://attwifi.apple.com/library/test/success.html)或[http://captive.apple.com/hotspot-detect.html](http://captive.apple.com/hotspot-detect.html)必须返回 HTTP 状态代码`200`和包含`Success`.

> *注意*：这种方法不适用于互联网访问受限的地区，例如中国，整个国家都是*围墙花园*，并且某些 Google/Apple 服务可能会被阻止。其中一些可能不会被阻止：`http://www.google.cn/generate_204`、、或——但这些都属于谷歌，因此不能保证能正常工作`http://g.cn/generate_204`。`http://gstatic.com/generate_204``http://connectivitycheck.gstatic.com/generate_204`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T12:00:06.987

另一种可能的解决方案可能是通过 HTTPS 连接并检查目标证书。不确定围墙花园是否真的通过 HTTPS 为登录页面提供服务，或者只是断开连接。无论哪种情况，您都应该能够看到您的目的地不是您所期望的。

当然，您也有 TLS 和证书检查的开销。不幸的是，这就是经过身份验证的连接的代价。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:24:35.887

我相信防止您的连接重定向会起作用。

```
URL url = new URL(hostUrl));
HttpURLConnection httpConn = (HttpURLConnection)url.openConnection();

/* This line prevents redirects */
httpConn.setInstanceFollowRedirects( false );

httpConn.setAllowUserInteraction( false );
httpConn.setRequestMethod( "GET" );
httpConn.connect();
responseCode = httpConn.getResponseCode();
isConnected = responseCode == HttpURLConnection.HTTP_OK; 
```

如果这不起作用，那么我认为唯一的方法是检查响应的正文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T20:44:33.810

这已在 Android 4.2.2+ 版本上实现 - 我发现他们的方法快速而有趣：

CaptivePortalTracker.java 检测围墙花园如下 - 尝试连接到 www.google.com/generate_204 - 检查 HTTP 响应是否为 204

如果检查失败，我们就在一个有围墙的花园里。

```
private boolean isCaptivePortal(InetAddress server) {
    HttpURLConnection urlConnection = null;
    if (!mIsCaptivePortalCheckEnabled) return false;

    mUrl = "http://" + server.getHostAddress() + "/generate_204";
    if (DBG) log("Checking " + mUrl);
    try {
        URL url = new URL(mUrl);
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setInstanceFollowRedirects(false);
        urlConnection.setConnectTimeout(SOCKET_TIMEOUT_MS);
        urlConnection.setReadTimeout(SOCKET_TIMEOUT_MS);
        urlConnection.setUseCaches(false);
        urlConnection.getInputStream();
        // we got a valid response, but not from the real google
        return urlConnection.getResponseCode() != 204;
    } catch (IOException e) {
        if (DBG) log("Probably not a portal: exception " + e);
        return false;
    } finally {
        if (urlConnection != null) {
            urlConnection.disconnect();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T07:01:52.997

如果您已经在使用`retrofit`，您可以通过`retrofit`. 只需创建一个 ping.html 页面并使用改造向其发送头部请求，并确保您的 http 客户端配置如下：（`followRedirects(false)`部分是最重要的部分）

```
private OkHttpClient getCheckInternetOkHttpClient() {
    return new OkHttpClient.Builder()
            .readTimeout(2L, TimeUnit.SECONDS)
            .connectTimeout(2L, TimeUnit.SECONDS)
            .followRedirects(false)
            .build();
} 
```

然后像下面这样构建你的改造：

```
private InternetCheckApi getCheckInternetRetrofitApi() {
    return (new Retrofit.Builder())
            .baseUrl("[base url of your ping.html page]")             
            .addConverterFactory(GsonConverterFactory.create(new Gson()))
            .client(getCheckInternetOkHttpClient())
            .build().create(InternetCheckApi.class);
} 
```

你的 InternetCheckApi.class 就像：

```
public interface InternetCheckApi {
    @Headers({"Content-Typel: application/json"})
    @HEAD("ping.html")
    Call<Void> checkInternetConnectivity();
} 
```

那么你可以像下面这样使用它：

```
getCheckInternetOkHttpClient().checkInternetConnectivity().enqueue(new Callback<Void>() {
     public void onResponse(Call<Void> call, Response<Void> response) {
       if(response.code() == 200) {
        //internet is available
       } else {
         //internet is not available
       }
     }

     public void onFailure(Call<Void> call, Throwable t) {
        //internet is not available
     }
  }
); 
```

请注意，您的 Internet 检查 http 客户端必须与您的主要 http 客户端分开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-24T05:12:32.400

这最好在 AOSP 中完成： [https ://github.com/aosp-mirror/platform_frameworks_base/blob/6bebb8418ceecf44d2af40033870f3aabacfe36e/core/java/android/net/captiveportal/CaptivePortalProbeResult.java#L61](https://github.com/aosp-mirror/platform_frameworks_base/blob/6bebb8418ceecf44d2af40033870f3aabacfe36e/core/java/android/net/captiveportal/CaptivePortalProbeResult.java#L61)

[https://github.com/aosp-mirror/platform_frameworks_base/blob/e3a0f42e8e8678f6d90ddf104d485858fbb2e35b/services/core/java/com/android/server/connectivity/NetworkMonitor.java](https://github.com/aosp-mirror/platform_frameworks_base/blob/e3a0f42e8e8678f6d90ddf104d485858fbb2e35b/services/core/java/com/android/server/connectivity/NetworkMonitor.java)

```
private static final String GOOGLE_PING_URL = "http://google.com/generate_204";
private static final int SOCKET_TIMEOUT_MS = 10000;

public boolean isCaptivePortal () {

try {
            URL url = new URL(GOOGLE_PING_URL);
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setConnectTimeout(SOCKET_TIMEOUT_MS);
            urlConnection.setReadTimeout(SOCKET_TIMEOUT_MS);
            urlConnection.setUseCaches(false);
            urlConnection.getInputStream();
            return (urlConnection.getResponseCode() != 204)
                    && (urlConnection.getResponseCode() >= 200)
                    && (urlConnection.getResponseCode() <= 399);
        } catch (Exception e) {
            // for any exception throw an exception saying check was unsuccesful
        } finally {
            if (urlConnection != null) {
                urlConnection.disconnect();
            }
        }
} 
```

请注意，这可能不适用于代理网络，并且需要完成 AOSP url 中更高级的操作

# image - Matlab - 图像的大小

> ID：13958621
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:20:47.607
> 
> 标签：image, matlab, pixel, image-size

`matlab`在using中检查图像`size(I)`的大小，我期望大小为`8X8`，我得到以下信息：

> > 尺寸（一）

答案=

```
 8     8     3 
```

这是什么`3`？而且，我的图像是否被视为`8X8`图像？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:22:15.220

3 是彩色图像中的通道数。也就是红色、绿色和蓝色。如果您有灰度图像，那么它将是`8x8`.

是的，您的图像是`8x8`，但是是彩色的。

# ios - 按钮作为子视图，单击启动超级视图

> ID：13958626
> 
> 赞同：0
> 
> 时间：2012-12-19T18:21:00.413
> 
> 标签：ios

我有一个按钮，它将成为添加到另一个 UIView 的子视图，就像 Path 一样。这个想法是这个按钮将在屏幕的一个角落保持静止，而用户可以滚动它后面的 UIVIew。我正在处理 pointinside 方法，以了解用户何时单击它是在按钮上还是在超级视图上。

```
 - (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
 {
     return CGRectContainsPoint(customButton.frame, point);
 } 
```

我的问题是，如果用户确实点击了按钮，我需要打开一个 UIImagePickerController，它是 superview 的一个属性。我怎么能在superview上做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:42:55.010

您应该通过 addTarget 方法向按钮添加事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:44:36.033

如果按钮被**保证**（我的意思是，因为它会在没有保证的情况下崩溃）成为您提到的超级视图的子视图，那么强制转换`self.superview`将允许您访问它的`UIImagePickerController`属性。更安全的实现将使用对拥有的超级视图的弱引用，然后如果您尝试在没有超级视图的情况下重新使用按钮，则属性操作将优雅地失败。

# c - 循环和微控制器

> ID：13958631
> 
> 赞同：2
> 
> 时间：2012-12-19T18:21:14.777
> 
> 标签：c, loops, while-loop, microcontroller

这就是我想要弄清楚的，我有一个 MC9S08AW60。它有两个计时器，我正在尝试配置或仅检查计时器的滴答声，即，我只想检查溢出标志何时更改。代码的基本设计是：

```
PTFDD = 0xFF;
int j,ch_nbr;
// LED mask values:
#define mLED0    0x01
#define mLED1    0x02
#define mLED2    0x04
#define mLED3    0x08
#define mLED4    0x10
#define mLED5    0x20
#define mLED6    0x40
#define mLED7    0x80

void main()
{

  While(j>0){

  ch_nbr++;
  if (ch_nbr == 8)  ch_nbr = 0;
  if (ch_nbr == 0)  PTFD = mLED0;  // Turn LED0 on, other LEDs off
  if (ch_nbr == 1)  PTFD = mLED1;  // Turn LED1 on, other LEDs off
  if (ch_nbr == 2)  PTFD = mLED2;  // Turn LED2 on, other LEDs off
  if (ch_nbr == 3)  PTFD = mLED3;  // Turn LED3 on, other LEDs off
  if (ch_nbr == 4)  PTFD = mLED4;  // Turn LED4 on, other LEDs off
  if (ch_nbr == 5)  PTFD = mLED5;  // Turn LED5 on, other LEDs off
  if (ch_nbr == 6)  PTFD = mLED6;  // Turn LED6 on, other LEDs off
  if (ch_nbr == 7)  PTFD = mLED7;  // Turn LED7 on, other LEDs off
  Mydelay();
   }
   } 
 void Mydelay(int *j)
{

 if (TPM1SC_TOF == 0) j=0;
 else j=1;
 return j;
 } 
```

这个想法是检查值“j”是否同时决定 LED 是否应该亮起！这段代码不起作用。自从我使用 C 编程以来已经有一段时间了。我有点动摇，需要一些帮助。一个适当的解释会很好。请考虑 MCU 数据表的以下链接：http: [//cache.freescale.com/files/microcontrollers/doc/data_sheet/MC9S08AW60.pdf](http://cache.freescale.com/files/microcontrollers/doc/data_sheet/MC9S08AW60.pdf)

是否可以替换以下函数而不是现有的 Mydelay：

```
int Mydelay(int& j)
{
 if(TPM1SC_TOF == 0) j=0;
 else j=1;
 return j;
}
void main()
{
  PTFDD = 0xFF;
int j,ch_nbr;
// LED mask values:
#define mLED0    0x01
#define mLED1    0x02
#define mLED2    0x04
#define mLED3    0x08
#define mLED4    0x10
#define mLED5    0x20
#define mLED6    0x40
#define mLED7    0x80   
  While(j==1)
 {
  ch_nbr++;
  if (ch_nbr == 8)  ch_nbr = 0;
  if (ch_nbr == 0)  PTFD = mLED0;  // Turn LED0 on, other LEDs off
  if (ch_nbr == 1)  PTFD = mLED1;  // Turn LED1 on, other LEDs off
  if (ch_nbr == 2)  PTFD = mLED2;  // Turn LED2 on, other LEDs off
  if (ch_nbr == 3)  PTFD = mLED3;  // Turn LED3 on, other LEDs off
  if (ch_nbr == 4)  PTFD = mLED4;  // Turn LED4 on, other LEDs off
  if (ch_nbr == 5)  PTFD = mLED5;  // Turn LED5 on, other LEDs off
  if (ch_nbr == 6)  PTFD = mLED6;  // Turn LED6 on, other LEDs off
  if (ch_nbr == 7)  PTFD = mLED7;  // Turn LED7 on, other LEDs off
 }
 Mydelay();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:39:07.150

首先，您可能希望使用[位移](https://stackoverflow.com/q/141525/69809)来显着简化您的代码（因为这就是您本质上在做的事情，位移位）。

这意味着您不需要为每个位置设置 8 个常量，而只需使用`<<`运算符在每次迭代时将位向左移动一个位置：

```
int MoveToLeft(int bitPosition)
{
    // shift left
    bitPosition = bitPosition << 1;

    // reset to '1' when we shift through all 8 bits
    if ((bitPosition & 0xFF) == 0)
        bitPosition = 1;

    return bitPosition;
} 
```

接下来，比轮询定时器值更好的方法是使用[中断例程](http://en.wikipedia.org/wiki/Interrupt)。您需要设置一个函数，该函数将在您的计时器完成计数时自动调用。

我不确定您的代码是否可以这样工作。您的计时器的目的是在 LED 更改之间产生延迟吗？您的计时器会自动重置吗？如果计时器只在转换前等待，这样的事情会更合乎逻辑：

```
while (1) // repeat indefinitely
{
     // shift the bit
     ch_nbr = MoveLeft(ch_nbr);
     PTFD = ch_nbr;

     // while the timer is counting, do nothing
     while (TPM1_TOF == 0) 
     { }

     // reset the timer
     (not sure about this part, check your docs)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:32:29.933

好吧，如果这是您代码的剪切粘贴，那么您需要解决一些问题：

*   第一行：`While(j>0){`我没有看到 j 在任何地方声明或定义。编译器应该对此产生错误，并且`While`应该是小写`while ( j > 0 )`的。

*   与 相同`ch_nbr`。

*   当你打电话时，`MyDelay()`你写了它`&int`，你可能的意思是`(int *j)`，然后你什么都没有传递。

*   `If`需要小写`if`

*   是的，正如评论显示的那样，您有 3 个左括号`{`和 5 个右括号`}`。

修复这些，确保它不时编译，然后处理任何逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:35:06.313

1.  右括号比左括号多。尝试通过匹配括号来纠正这个问题（缩进会有所帮助）。

2.  您没有在任何地方声明变量`j`，`cn_nbr` 但您使用它们。

3.  C 语句是小写的 ( `while`, not `While`)。

4.  `Mydelay()`当`Mydelay(int &j)`期望一个参数时，您正在不带参数地调用。此外，`&j`返回变量的地址`j`。我想你想要`int *j`这里。阅读更多关于指针的信息。

5.  使用`switch`or`if ... else if`代替`if ... if ... if ...`. 您的代码可以双向工作，但使用 switch 或 if else 更快。

考虑在此处了解有关 C 编程的更多信息：[http ://www.cprogramming.com/](http://www.cprogramming.com/)

# java - 在 Java 中使用线程并发模拟多核 CPU

> ID：13958636
> 
> 赞同：0
> 
> 时间：2012-12-19T18:21:40.173
> 
> 标签：java, multithreading

我正在尝试编写一个模拟多核 cpu 的程序。

我们有 3 个线程可以为我们完成核心工作。

还有一些任务将以 FIFO（先进先出）顺序完成。由于我是java中线程概念的新手，在对此进行了很多思考之后，我仍然对如何编写程序一无所知。

我只想知道如何以最简单的方式做到这一点以及必须使用哪些方法和类。

我正在考虑使用`wait()`,`notifyAll()`东西，但我不确定这是否可行。

在这个程序中，就像在每一步中，main 方法都会打印出来并增加主时钟，然后线程将根据主时钟的当前值决定是否必须打印一些东西（开始一个新任务，上下文切换） . 我会很感激任何提示。

输出必须如下所示：

```
Task 2 : 6 time units
Task 3 : 9 time units
Task 4 : 10 time units
Task 5 : 10 time units
Task 6 : 8 time units
Task 7 : 7 time units

--------------------

Master Clock : 0
  Core 2 started its first task of 7 time units
  Core 0 started its first task of 9 time units
  Core 1 started its first task of 6 time units
Master Clock : 1
Master Clock : 2
Master Clock : 3
Master Clock : 4
Master Clock : 5
Master Clock : 6
  Core 1 started context switch
Master Clock : 7
  Core 2 started context switch
Master Clock : 8
  Core 1 started a new task of 9 time units
Master Clock : 9
  Core 2 started a new task of 10 time units
  Core 0 started context switch
Master Clock : 10
Master Clock : 11
  Core 0 started a new task of 10 time units
Master Clock : 12
Master Clock : 13
Master Clock : 14
Master Clock : 15
Master Clock : 16
Master Clock : 17
  Core 1 started context switch
Master Clock : 18
Master Clock : 19
  Core 1 started a new task of 8 time units
  Core 2 started context switch
Master Clock : 20
Master Clock : 21
  Core 0 completed a total of 2 tasks
  Core 2 started a new task of 7 time units
Master Clock : 22
Master Clock : 23
Master Clock : 24
Master Clock : 25
Master Clock : 26
Master Clock : 27
  Core 1 completed a total of 3 tasks
Master Clock : 28
  Core 2 completed a total of 3 tasks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:10:43.180

根据您的描述，您似乎不需要（或不应该想要）Java 线程来进行此模拟。虚拟内核基于主时钟同步运行。您只需要一个代表主时钟的主循环，以及每个虚拟内核的操作队列。在每个主时钟步骤中，您确定每个虚拟内核的操作并执行它。不需要真正的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:38:41.350

您绝对应该了解更多关于 Java 并发的知识。这是一篇关于线程池和工作队列的文章，可以帮助您了解在 Java 中可以做什么 - [http://www.ibm.com/developerworks/library/j-jtp0730/index.html](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)

# jquery - jQuery ajax，获取html跨域

> ID：13958642
> 
> 赞同：1
> 
> 时间：2012-12-19T18:22:01.243
> 
> 标签：jquery, ajax

我有一个网页，我正在尝试使用 ajax 调用将一些来自另一个网页的 html 内容放入其中。但是我正在努力解决跨域问题。

```
$('.trigger').click(function(e) {
    e.preventDefault();
    $.ajax({
        url: 'http://myothersite.com',
        datatype: 'text/html',
        type: 'GET',
        success: function(data) {
            var content = data.responseText;
            console.log(content);
        }
    });
}); 
```

谁能建议我将如何实现这一目标？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:22:47.500

您**无法**`text/html`在任何现代浏览器中进行跨域获取。

我知道目前唯一有效的返回类型是`jsonp`

* * *

或者你可以做一些[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:28:38.833

如果可以适当调整 headers，就可以执行跨域请求。

为了使其工作，您需要更改客户端和服务器：

客户：

```
xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"]; 
```

使用 jQuery 的客户端

```
jQuery.support.cors = true; 
```

需要更改服务器以`OPTIONS`适当地响应请求。我已经[为 ASP.NET Web API 编写了一个示例](http://www.stevefenton.co.uk/Content/Blog/Date/201211/Blog/Using-CORS-With-ASP-NET-Web-API/)，但是无论您在服务器上运行什么，概念都是相同的。

如果您无法对服务器进行更改（例如它是第三方服务），您仍然可以使用[老式的 JSONP](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)。

# struts2 - 嵌入式模式下的 OSGi 暴露主应用程序中存在的 jars

> ID：13958648
> 
> 赞同：2
> 
> 时间：2012-12-19T18:22:41.747
> 
> 标签：struts2, osgi, apache-felix

我有一个以嵌入式模式运行 Apache Felix OSGi 的 struts2 应用程序。是否可以将主 webapp 中的 jar 文件公开给 OSGi 包？否则，我将不得不部署相同的 jar 文件两次，包括在主应用程序的 webapp 类路径中，并再次作为捆绑包部署在嵌入式 Felix OSGi 容器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:45:30.860

是的。你当然可以做到这一点。但是，在 webapp 中嵌入 OSGi 容器存在一些已知问题。这是因为 webapp 的类加载器上下文是非标准的。我一直在使用一个做同样事情的应用程序。如果我能够从头开始编写应用程序，我不会这样做。相反，我会将 Struts2 部署为 OSGi 包本身，以及其他所有内容。换句话说，我会完全接受 OSGi 模块化运行时。

话虽如此，OSGi 容器本身就是一个包，可以像任何包一样导出包。它被称为“系统包”，您可以将“主机”应用程序的类加载器中的包指定为要通过系统包导出到 OSGi 容器的包。

请参阅此[页面](http://felix.apache.org/site/apache-felix-framework-launching-and-embedding.html)上的示例，并搜索此配置参数。

```
Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA 
```

此配置参数包含主机应用程序的类加载器中的包列表，这些包应该可用于您的 osgi 包。

至于“问题”，请参阅这些链接作为开始：

[很好地描述了嵌入到 webapp 中的危险。](http://markmail.org/message/r5y7duqw2p3azd3z?q=osgi%20webapp%20chad#query%3aosgi%20webapp%20chad%20page:1%20mid%3az2i52q7cevvalqgu%20state%3aresults)

[关于类加载器问题的细节。](http://markmail.org/thread/hxxu7eos2y4izlcc)

# c# - 为什么将新段落添加到文档块时，运行的父级变为空？

> ID：13958649
> 
> 赞同：3
> 
> 时间：2012-12-19T18:22:42.793
> 
> 标签：c#, wpf, richtextbox

我正在尝试为我的`RichTextBox`控件创建一个自定义撤消/重做管理器。我`char`在 Run 中插入 a 并将插入位置和 Run 等信息保存在`Undo Stack`.

当我尝试撤消时，我删除了插入的`char`. 之后，我通过这行代码设置 CaretPosition：

```
CaretPosition = run.ContentStart.GetPositionAtOffset(position); 
```

当我不开始新的`Paragraph`.

当我按下回车并开始一个新段落并且我想撤消时，会发生一些奇怪的事情。让我再解释一下：

**1-**我按回车并`Paragraph`生成一个新的。
**2-**我打电话`Undo`。
**3-**它到达上面的代码行并抛出此异常：`Cannot set CaretPosition to be outside of RichTextBox.`

我认为这是因为`run.Parent==null`它的父段落而不是它的父段落（这个运行在第一段，我的意思是我按下返回的段落）。**当我将此运行保存到`Undo Stack`时，其父级不为空。**

我看到了`ContentElement.cs`（Run 的基类）的源代码。这个已经写完了：

```
internal DependencyObject _parent;
internal DependencyObject Parent  { get { return _parent; } } 
```

**在进行一些更改后，此属性如何`_parent`变为 null，如何防止这种情况发生？**

**更新**
（假设我在第一段中写了“123”。）第一段存在于 Document.Blocks 中，其中包含“123”。但这是一个不同的运行。这是否意味着生成了新的运行？！我真的很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:37:47.660

我错的可能性很大，但是当它是新的 paragrpah 时，尝试删除最后 2 个字符。我认为您收到此错误是因为当您按回车键时，它会插入两个字符：**\r\n** (carret return + new line)

# networking - 网络：IP6 中是否需要 NAT

> ID：13958651
> 
> 赞同：0
> 
> 时间：2012-12-19T18:22:51.133
> 
> 标签：networking

如此链接： [NAT 破坏的事物](http://www.steve.org.uk/Reference/what-nats-break.html)

我们看到 NAT 有很多弱点，但是 NAT 的强项是可以使用私有地址，这在 IP4 中很有价值：当 IP 地址不足以满足所有设备时，使用私有地址会节省很多公共 IP 地址为您的公司/集团...

但是在 IP6，IP 地址对所有人来说已经足够了，那么我们真的需要在 IP6 中进行 NAT 吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:03:58.417

IPv6 中没有 NAT。有一些提议，但[IETF 不赞成](https://www.rfc-editor.org/rfc/rfc4864)。地址空间足够大以至于不需要它，以及其他原因。（阅读[RFC 4864。](https://www.rfc-editor.org/rfc/rfc4864)）

此外，还有私有 IPv6 地址范围。相反，有[唯一的本地 IPv6 地址](https://www.rfc-editor.org/rfc/rfc4193)。

# objective-c - ios多类实现

> ID：13958652
> 
> 赞同：3
> 
> 时间：2012-12-19T18:22:51.330
> 
> 标签：objective-c, ios, cocoa, oop, class

我来自前端开发，所以 MVC 和 OOP 仍然让我有些头疼。只是为了向您解释，我向 nodejs 服务器发送了 500 个字典（带有 100 个参数）。问题是我为每个参数和每个字典创建了 ivars。现在我想在我的同步类的同一个头文件中创建一些类，比如一个人类。我可以在标题上做这样的事情：

```
#import <Foundation/Foundation.h>
#import "GCDAsyncSocket.h"

@class GCDAsyncSocket;

@interface socketDelegate : NSObject<NSStreamDelegate>
{
    NSInputStream   *inputStream;
    NSOutputStream  *outputStream;
    NSMutableArray  *messages;
    GCDAsyncSocket *socket;
    dispatch_queue_t connectionQueue_;
}

- (void) initNetworkCommunication;
- (void) sendMessage:(NSArray *)message:(int)numberOfContactsToSend;

@end

@interface  personInfo: NSObject

@property (nonatomic,weak)NSString*firstName;
@property (nonatomic,weak)NSString*lastName;
@property (nonatomic,weak)NSDictionary*dicToSendWithConctactInfo;

@end 
```

但在实现中我不知道如何处理多个类。就像我在“socketDelegate”类中有一个需要使用 person 类的方法，但它在其中不可用。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:27:29.957

通常，不同的类应该在不同的文件中。一旦`PersonInfo`（请大写类名）拥有它自己的`PersonInfo.h`and `PersonInfo.m`，那么您只需添加

```
#import "PersonInfo.h" 
```

到上面的头文件，以便能够`PersonInfo`从您的`SocketDelegate`类中引用（再次，请大写类名）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:31:46.653

要回答您的直接问题，您可以`personInfo`在文件顶部前向声明`socketDelegate`：

```
@class personInfo; 
```

通常你只是把每个公共类放在它自己的实现和头文件中，每个实现文件都包含它使用的所有类的头文件。头文件通常只需要转发声明它们引用的类（就像您对`@class GCDAsyncSocket;`. `#import "GCDAsyncSocket.h"`'不需要导入。但是，要正确使用`GCDAsyncSocket`，您将需要实现`GCDAsyncSocketDelegate`协议，这将要求您导入标头；但是，您可能应该将该协议作为实现文件中“类扩展”的一部分来实现）。

如果您是子类化类或实现在标头中声明的协议，则只需要在标头中导入某些内容的标头。对于所有其他用途（即使用类或协议作为指针类型的一部分），您可以简单地前向声明它。（并且对于实现协议，如果您不需要人们知道您正在实现协议，您可以在实现文件中使用“类扩展”来执行此操作。

# django - Django：没有数据库查询的多表继承和向上转换

> ID：13958656
> 
> 赞同：1
> 
> 时间：2012-12-19T18:22:57.770
> 
> 标签：django, django-models

*简洁版本：*

在Django中使用多表继承，给定一个派生类的模型对象，是否可以在不进行额外的数据库查询的情况下，获取对应的基类模型对象？

*长版：*

我在我的 Django 应用程序中使用多表继承。我有一种情况，基类定义了某些被派生类覆盖的方法，但我实际上想调用基类方法。这是一个例子：

```
from django.db import models

class Animal(models.Model):
    name = models.CharField(max_length=100)

    def speak(self):
        return "generic animal noise"

    def foo(self):
        ...

    def bar(self):
        ...

    def baz(self):
        ...

class Dog(Animal):
    breed = models.CharField(max_length=100)

    def speak(self):
        return "Arf"

    def foo(self):
        ...

    def bar(self):
        ...

    def baz(self):
        ... 
```

我有一个 Dog 类型的模型对象的引用，我想在它上面调用 Animal.speak 方法，而不是 Dog.speak 方法。我知道我可以这样做：

```
dog = Dog.objects.get(name="rover")
Animal.speak(dog) 
```

但是，在我正在编写的代码中，我需要调用多个被覆盖的方法，因此不要这样做：

```
Animal.foo(dog)
Animal.bar(dog)
Animal.baz(dog)
... 
```

我希望能够进行向上转换，然后将所有调用解析为基类的方法：

```
animal = upcast_to_animal(dog)
animal.foo()
animal.bar()
animal.baz() 
```

我知道一种实现 upcast_to_animal 的方法，但它需要进行数据库查询：

```
def upcast_to_animal(x):
    return Animal.objects.get(pk=x.pk) 
```

我的问题是：是否可以在不对数据库进行额外查询的情况下实现“upcast_to_animal”方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:45:35.957

只是一个简单的演示（向上转换）：

```
class Animal(models.Model):
    name = models.CharField(max_length=30)

    def foo(self):
        print 'hello animal'

class Dog(Animal):
    name_me = models.CharField(max_length=30)

    def foo(self):
        print 'hello dog'

# django shell        
>>> dog = Dog.objects.create(name_me='bull dog')
>>> dog.foo()
hello dog
>>> animal = super(dog.__class__, dog)
>>> animal.foo()
hello animal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:46:17.813

怎么样：

```
import copy

animal = copy.deepcopy(dog)
animal.__class__ = Animal 
```

# web2py - web2py，如何执行 SELECT ... FOR UPDATE？

> ID：13958657
> 
> 赞同：1
> 
> 时间：2012-12-19T18:23:02.093
> 
> 标签：web2py

我正在学习 web2py 框架和数据库抽象级别。我需要做 SELECT ... FOR UPDATE 语句。web2py有办法吗？[我在手册](http://web2py.com/books/default/chapter/29/06)中没有找到答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:53:47.427

```
db(query).select(..., for_update=True) 
```

请注意，如果您使用 SQLite，这是通过将 select 和 update 包装在事务中来模拟的（这会锁定整个数据库，而不仅仅是选定的记录）。

# bash - 使用 bash 脚本将下划线替换为空格

> ID：13958658
> 
> 赞同：1
> 
> 时间：2012-12-19T18:23:05.953
> 
> 标签：bash, whitespace

如何使用 Bash 脚本将多个文件名中的所有下划线字符替换为空格？使用此代码，我们可以用破折号替换下划线。但它如何与空白一起使用？

```
for i in *.mp3;
do x=$(echo $i | grep '_' | sed 's/_/\-/g');
if [ -n "$x" ];
then mv $i $x;
fi;
done; 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T18:32:52.820

这应该这样做：

```
for i in *.mp3; do
    [[ "$i" = *_* ]] && mv -nv -- "$i" "${i//_/ }"
done 
```

*   该测试`[[ "$i" = *_* ]]`测试文件名是否包含任何下划线，如果包含下划线，则会`mv`将文件`"${i//_/ }"`扩展为`i`所有下划线已被空格替换的位置（请参阅[shell 参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)）。
*   选项意味着:`-n`不会覆盖任何现有文件（非常安全）。*可选*。`mv``no clobber`
**   选项`-v`是`mv`for `verbose`: 会说明它在做什么（如果你想看看发生了什么）。*非常可选*。*   这里`--`是为了说明`mv`争论将从这里开始。这始终是一个好习惯，就像文件名以 开头一样`-`，`mv`会尝试将其解释为一个选项，并且您的脚本将失败。*很好的练习*。*

 *另一条评论：当使用 glob（即`for i in *.mp3`）时，设置`shopt -s nullglob`或`shopt -s failglob`. 如果没有文件与模式匹配，前者将`*.mp3`扩展为空（因此不会执行循环），后者将显式引发错误。如果没有这些选项，如果不`*.mp3`存在匹配的文件，则循环内的代码将使用可能导致问题`i`的逐字值执行。`*.mp3`（好吧，这里不会有任何问题，因为有 guard `[[ "$i" = *_* ]]`，但是总是使用任何一个选项都是一个好习惯）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:25:19.600

您的脚本因空格而失败的原因是文件名在传递给`mv`. 您需要引用文件名，以便将每个文件名视为一个单独的参数。更新脚本中的相关行：

```
mv "$i" "$x"  
# where $i is your original filename, and $x is the new name 
```

顺便说一句，如果您安装了[perl 版本的 rename 命令](http://man.he.net/man1/rename)，您可以跳过脚本并使用以下方法实现相同的目的：

```
rename 's/_/ /' *.mp3 
```

或者，如果您有[更经典的`rename`命令](http://linux.die.net/man/1/rename)：

```
rename "_" " " *.mp3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:26:36.647

使用`tr`

```
tr '_' ' ' <file1 >file2 
```*

# php - 如何根据“标题”和“描述”列在 MySQL 表中查找“相似”记录？

> ID：13958659
> 
> 赞同：4
> 
> 时间：2012-12-19T18:23:09.590
> 
> 标签：php, mysql, nlp, artificial-intelligence, text-analysis

我有一个 MySQL 表存储一些用户生成的内容。对于每条内容，我都有一个标题 (VARCHAR 255) 和一个描述 (TEXT) 列。

当用户查看记录时，我想根据标题/描述相似来查找与其“相似”的其他记录。

这样做的最佳方法是什么？我正在使用 PHP 和 MySQL。

我最初的想法是：

1）要么从标题和描述中去掉常用词，留下“唯一”关键字，然后找到共享这些关键字的其他记录。

例如，在句子：“Bob 早上 5 点醒来去上学”中，关键字将是：“Bob,wake, 5, going, school”。然后，如果有另一张唱片的标题谈到“鲍勃”和“学校”，它们将被视为“相似”。

2）或者使用MySQL的全文搜索，虽然我不知道这对这样的事情是否有好处？

这两种方法中哪种方法更好，或者还有另一种更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:38:55.917

我会保持简短（可能太长了）...

我不会“手动”选择他们的关键字或修改您的原始数据。

MySQL 支持使用 MyISAM（不是 InnoDB）引擎进行全文搜索。查询数据库时可用选项的完整描述可[在此处](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)获得。查询可以根据查询方法自动去除数据集中常见的停用词和过于常见的词（超过 50% 的行包含它们）。查询扩展也可用，查询类型应根据您的需要决定。

还可以考虑使用像 Lucene 这样的单独引擎。使用 Lucene，您可能会拥有更多功能和更好的索引/搜索。例如，您可以自动删除常用词（它们得分低且不影响搜索）并将事物用作词干。有一点学习曲线，但我肯定会研究它。

**编辑：**

MySQL '[全文自然语言搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)'返回最相似的行（及其相关性分数），而不是布尔匹配搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:28:22.610

您将首先定义相似对您意味着什么，以及您希望如何对两个不同文档之间的相似性进行评分。

使用该算法，您可以处理所有文档并构建相似度得分表。

根据评分算法的复杂性和数据集的大小，这可能不是实时运行的，而是通过 Hadoop 之类的东西进行批处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:34:20.723

我做过这样的事情。我用 % 替换字符串中的所有空格，然后在 where 子句中使用 LIKE。在这里，我会给你我的代码。它来自 MSSQL，但可以稍作调整以与 MySQL 一起使用。希望能帮助到你。

```
CREATE FUNCTION [dbo].[fss_MakeTextSearchable] (@text NVARCHAR(MAX)) RETURNS NVARCHAR(MAX)
--replaces spaces with wildcard characters to return more matches in a LIKE condition
--              for example:
--              @text = 'my file' will return '%my%file%'
--              SELECT WHERE 'my project files' like @text would return true

AS
BEGIN
   DECLARE @searchableText NVARCHAR(MAX)

   SELECT @searchableText = '%' + replace(@text, ' ', '%') + '%' 

   RETURN @searchableText
END 
```

然后像这样使用函数：

```
SELECT @searchString = dbo.fss_MakeTextSearchable(@String) 
```

然后在您的查询中：

```
Select * from Table where title LIKE @searchString 
```

# java - 将 SQL 请求转换为 JPQL 请求

> ID：13958662
> 
> 赞同：0
> 
> 时间：2012-12-19T18:23:20.017
> 
> 标签：java, jpql

我正在学习 JPQL，我想知道如何将此查询转换为 JPQL ？

我有`Astre`astres 表和`Planete`planetes 表的实体。`generate_series()`是 PostgreSQL 函数。

```
SELECT t1.galaxie, t1.ss, t1.position FROM 
(
   SELECT galaxie, ss, position FROM 
   generate_series(1, 9) galaxie 
   CROSS JOIN generate_series(1, 500) ss 
   CROSS JOIN generate_series(1, 15) position 
) t1
 LEFT JOIN 
(
   SELECT a.galaxie, a.ss FROM astres a 
   INNER JOIN planetes p 
   ON a.id=p.astre_id 
   WHERE p.planete_mere=TRUE 
   GROUP BY a.galaxie, a.ss 
   HAVING COUNT(*)=3 
) t2 
ON t1.galaxie = t2.galaxie 
AND t1.ss = t2.ss 
LEFT JOIN 
( 
   SELECT a.galaxie, a.ss, a.position FROM astres a 
   INNER JOIN planetes p 
   ON a.id=p.astre_id 
) t3 
ON t1.galaxie=t3.galaxie 
AND t1.ss=t3.ss 
AND t1.position=t3.position 
WHERE t2.galaxie IS NULL 
AND t3.galaxie IS NULL 
ORDER BY t1.galaxie, t1.ss, t1.position 
```

如果需要，我可以提供实体代码。

感谢帮助。

# entity - 正在安装错误的 EntityFramework 版本

> ID：13958664
> 
> 赞同：1
> 
> 时间：2012-12-19T18:23:40.683
> 
> 标签：entity, nuget

从包管理器控制台我这样做：

```
Install-Package EntityFramework -Version 5.0.0 
```

然后我右键单击参考，我看到它是版本 4.4.0.0。进行卸载然后安装没有帮助。

这发生在解决方案中的 1 个项目中，在另一个项目中它安装了正确的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:26:20.087

原来问题是项目是 .NET 4.0，一旦我将它升级到 4.5，它就会安装正确的版本。

# image - 使用 mvvmcross 和 mono touch 将照片上传到 web 服务

> ID：13958665
> 
> 赞同：3
> 
> 时间：2012-12-19T18:23:40.580
> 
> 标签：image, post, mono, mvvmcross

我想做的只是使用mono touch/mono droid和mvvmcross将照片上传到网络服务，希望在某种程度上我只需要为android和IOS编写一次代码:)

我最初的想法是让用户选择一个图像（在 android 中使用意图）获取图像的路径。然后使用 MvxResourceLoader resourceLoader 从路径打开一个流，然后使用 restsharp 创建一个带有流的发布请求。

但是我已经碰壁了，当用户选择图像时，路径是例如“/external/images/media/13”。使用 MvxResourceLoader 资源加载器时，此路径导致找不到文件异常。

关于为什么我得到例外的任何想法，或者是否有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:40:18.453

这就是我最终这样做的方式 - 谢谢斯图尔特和所有链接:)

```
public class PhotoService :IPhotoService, IMvxServiceConsumer<IMvxPictureChooserTask>,IMvxServiceConsumer<IAppSettings>
    {
        private const int MaxPixelDimension = 300;
        private const int DefaultJpegQuality = 64;

        public void ChoosePhotoForEventItem(string EventGalleryId, string ItemId)
        { 
        this.GetService<IMvxPictureChooserTask>().ChoosePictureFromLibrary(
               MaxPixelDimension,
                DefaultJpegQuality,
               delegate(Stream stream) { UploadImage(stream,EventGalleryId,ItemId); },
                () => { /* cancel is ignored */ });

        }

        private void UploadImage(Stream stream, string EventGalleryId, string ItemId)
        {
            var settings = this.GetService<IAppSettings>();
            string url = string.Format("{0}/EventGallery/image/{1}/{2}", settings.ServiceUrl, EventGalleryId, ItemId);
            var uploadImageController = new UploadImageController(url);

            uploadImageController.OnPhotoAvailableFromWebservice +=PhotoAvailableFromWebservice;

            uploadImageController.UploadImage(stream,ItemId);

        }
    }

    public class PhotoStreamEventArgs : EventArgs
    {
        public Stream PictureStream { get; set; }

        public Action<string> OnSucessGettingPhotoFileName { get; set; }

        public string URL { get; set; }
    }

     public class UploadImageController : BaseController, IMvxServiceConsumer<IMvxResourceLoader>, IMvxServiceConsumer<IErrorReporter>, IMvxServiceConsumer<IMvxSimpleFileStoreService>
    {

        public UploadImageController(string uri)
            : base(uri)
        {

        }
        public event EventHandler<PhotoStreamEventArgs> OnPhotoAvailableFromWebservice;

        public void UploadImage(Stream stream, string name)
        {
            UploadImageStream(stream, name);
        }

        private void UploadImageStream(Stream obj, string name)
        {

            var request = new RestRequest(base.Uri, Method.POST);

            request.AddFile("photo", ReadToEnd(obj), name + ".jpg", "image/pjpeg");

            //calling server with restClient
            var restClient = new RestClient();

            try
            {

                this.ReportError("Billedet overføres", ErrorEventType.Warning);

                restClient.ExecuteAsync(request, (response) =>
                {
                    if (response.StatusCode == HttpStatusCode.OK)
                    {
                        //upload successfull
                        this.ReportError("Billedet blev overført", ErrorEventType.Warning);
                        if (OnPhotoAvailableFromWebservice != null)
                        {
                            this.OnPhotoAvailableFromWebservice(this, new PhotoStreamEventArgs() { URL = base.Uri });
                        }
                    }
                    else
                    {
                        //error ocured during upload
                        this.ReportError("Billedet kunne ikke overføres \n" + response.StatusDescription, ErrorEventType.Warning);
                    }
                });
            }
            catch (Exception e)
            {

                this.ReportError("Upload completed succesfully...", ErrorEventType.Warning);
                if (OnPhotoAvailableFromWebservice != null)
                {
                    this.OnPhotoAvailableFromWebservice(this, new PhotoStreamEventArgs() { URL = url });
                }
            }

        }

        //method for converting stream to byte[]

        public byte[] ReadToEnd(System.IO.Stream stream)
        {
            long originalPosition = stream.Position;
            stream.Position = 0;
            try
            {
                byte[] readBuffer = new byte[4096];
                int totalBytesRead = 0;
                int bytesRead;
                while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
                {
                    totalBytesRead += bytesRead;
                    if (totalBytesRead == readBuffer.Length)
                    {

                        int nextByte = stream.ReadByte();
                        if (nextByte != -1)
                        {
                            byte[] temp = new byte[readBuffer.Length * 2];
                            Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                            Buffer.SetByte(temp, totalBytesRead, (byte)nextByte);
                            readBuffer = temp;
                            totalBytesRead++;
                        }

                    }
                }

                byte[] buffer = readBuffer;
                if (readBuffer.Length != totalBytesRead)
                {
                    buffer = new byte[totalBytesRead];
                    Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
                }
                return buffer;
            }
            finally
            {
                stream.Position = originalPosition;
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:26:50.627

尝试：

*   [在 WP 上使用 MvvmCross 拍摄图像并显示它们的问题](https://stackoverflow.com/questions/13725439/issues-taking-images-and-showing-them-with-mvvmcross-on-wp)
*   [需要一个用 MonoDroid 和 MVVMCross 拍照的例子](https://stackoverflow.com/questions/13475896/need-an-example-of-take-a-picture-with-monodroid-and-mvvmcross)
*   [https://github.com/Redth/WshLst/](https://github.com/Redth/WshLst/) - 使用 Xam.Mobile 拍照

# android - 如何使用 OnMarkerClickListener

> ID：13958669
> 
> 赞同：2
> 
> 时间：2012-12-19T18:23:53.197
> 
> 标签：android, google-maps-markers, google-maps-api-2

我正在尝试制作一个应用程序，允许使用 GoogleMap.OnMarkerClickListener 方法从地图上的标记打开新活动，但不知道如何使用它。有人帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T18:37:56.867

只需使用这个：

```
getMap().setOnInfoWindowClickListener(new OnInfoWindowClickListener() {

        public void onInfoWindowClick(Marker marker) {
            Intent i = new Intent(getActivity(), NewActivity.class);
            startActivity(i);

        }
    }); 
```

我在扩展的自定义类中使用了此代码，`MapFragment` 我已将其放置在此方法中：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T10:10:54.567

在标记内触摸信息窗口时，如果将当前屏幕更改为另一个屏幕（类或活动），请执行以下操作；

```
private GoogleMap mMap:

.....
protected void onCreate(Bundle savedInstanceState) {
.....

private void setUpMap() {
.....
mMap.setOnInfoWindowClickListener(this);

@Override
    public void onInfoWindowClick(Marker marker) {
        // When touch InfoWindow on the market, display another screen. 
        Intent intent = new Intent(this, Another.class);
        startActivity(intent);
    } 
```

# visual-studio - 尝试在 VS 2010 中打开 QB 模板时出错

> ID：13958670
> 
> 赞同：1
> 
> 时间：2012-12-19T18:23:59.607
> 
> 标签：visual-studio, quickbooks, qbfc

我正在运行 Visual Studio 2010 Ultimate。我已将 Intuiut SDK v12.0 安装到其默认位置。我复制了文件“IntuitWizardQBFC.zip”并将其粘贴到 Visual Studio 的模板文件夹中。快速书籍模板的图标在面试屏幕上，但是当我点击它时，我收到一条错误消息。它指出“无法加载文件或程序集'Interop QBFC10，Version=11.0.0.132，Culture=neutral，PublicKeyToken=31d8aec64e18259'或其依赖项之一。系统找不到指定的文件”我看到了一个类似的帖子，关于现有应用程序. 我无法打开模板来创建第一个应用程序。我的机器是 Windows 7 64 位。当我为班级编写程序时，我将目标设置为 x86，这样如果我可以在旧计算机上测试它们。此设置通常在新项目启动时创建解决方案后设置。请帮助我目前正在使用访问权限从我的 QB 数据库中获取数据并想做一些不同的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T23:03:01.873

模板向导程序集 IntuitWizardQBFC 具有对 Interop.QBFC10 版本 11.0.0.132 的引用，该版本在您的系统上不存在。转至 C:\Windows\Assembly，查找 Interop.QBFC10，然后查看 Version 列中的内容。就我而言，它显示的是 11.0.0.29。

[您可以通过重定向程序集版本](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)来强制 Visual Studio 使用版本 11.0.0.29 而不是 11.0.0.132 。编辑 devenv.exe.config，并在结束`</assemblyBinding>`标记之前添加：

```
 <dependentAssembly>
            <assemblyIdentity name="Interop.QBFC10" publicKeyToken="31d8aec643e18259" culture="neutral"/>
            <bindingRedirect oldVersion="11.0.0.132" newVersion="11.0.0.29"/>
        </dependentAssembly> 
```

如果 Visual Studio 已打开，请关闭它；启动它，并使用模板创建一个新项目。它应该启动向导，而不是显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:38:12.047

尝试安装 QBFC10，然后尝试模板。构建 SDK 12 时，我可能忘记更新模板。

您可以从获得 SDK 的同一位置下载 QBFC10。

威廉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T16:28:03.003

我今天刚刚下载了 QuickBooks Desktop SDK v13，但 VS.NET 项目向导仍然存在这个问题。

跟进上面 Adam C 的帖子，devenv.exe.config 中该节点的完整路径如下：

```
<?xml version ="1.0"?>
<configuration>
    ...
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            ...
            <dependentAssembly>
                <assemblyIdentity name="Interop.QBFC10" publicKeyToken="31d8aec643e18259" culture="neutral"/>
                <bindingRedirect oldVersion="11.0.0.132" newVersion="11.0.0.29"/>
            </dependentAssembly>
            ...
        </assemblyBinding>
    </runtime>
    ...
</configuration> 
```

# java - Spring项目如何访问JBoss JNDI数据源

> ID：13958672
> 
> 赞同：2
> 
> 时间：2012-12-19T18:24:05.800
> 
> 标签：java, spring, jboss, datasource, jndi

下面是我的 Spring 项目的当前 database.xml 文件。有人可以告诉我必须更改什么，以便我可以在其中使用 JBoss JNDI 数据源。我想这样做，所以我不需要包含数据库用户和密码以及 url 的配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx" 
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

                            <!-- 

     Last changed: $LastChangedDate: 2012-11-19 08:53:13 -0500 (Mon, 19 Nov 2012) $
     @author $Author: johnathan.smith@uftwf.org $
     @version $Revision: 829 $

    -->

    <context:property-placeholder location="classpath:app.properties" />

    <context:component-scan base-package="org.uftwf" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">

        <!-- these are C3P0 properties      --> 
        <property name="acquireIncrement" value="${database.c3p0.acquireIncrement}" />
        <property name="minPoolSize" value="${database.c3p0.minPoolSize}" />
        <property name="maxPoolSize" value="${database.c3p0.maxPoolSize}" />
        <property name="maxIdleTime" value="${database.c3p0.maxIdleTime}" />
        <property name="maxIdleTimeExcessConnections" value="${database.c3p0.maxIdleTimeExcessConnections}" />
        <property name="numHelperThreads" value="${database.c3p0.numHelperThreads}" />
        <property name="unreturnedConnectionTimeout" value="${database.c3p0.unreturnedConnectionTimeout}" />
        <property name="idleConnectionTestPeriod" value="300" />

        <property name="driverClass" value="${database.driver}" />
        <property name="jdbcUrl" value="${database.url}" />
        <property name="user" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.enrollment.model.Contact</value>
                <value>org.uftwf.enrollment.model.Enrollment</value>
                <value>org.uftwf.enrollment.model.Member</value>
                <value>org.uftwf.enrollment.model.Profile</value>
                <value>org.uftwf.enrollment.model.School</value>

            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:55:52.810

我假设您可以`DataSource`在 JBoss 中进行配置。请注意，您必须在应用程序服务器配置中定义其 JNDI 名称。获得名称后，只需将`dataSource`bean 替换为：

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/some-name"/>
</bean> 
```

或捷径：

```
<jee:jndi-lookup id="dataSource" jndi-name="jdbc/some-name" expected-type="javax.sql.DataSource" /> 
```

# ios - UIAlertView 在 performSelector 中包含的dismissWithClickedButtonIndex 后不断重新出现：withObject：afterDelay：

> ID：13958673
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:09.500
> 
> 标签：ios, iphone, ios5, uialertview

我有一个按钮，如果密码正确，我想在触发 segue 之前使用密码实现。直到您输入错误密码的那一刻，一切看起来都很好，我已经实现了另一个 alertView 来告诉用户密码错误。**当警报视图弹出并在延迟后消失时，它会不断重新出现和消失，屏幕上什么也做不了！** 如何阻止重新出现？以下是我处理此问题的代码部分：

```
- (IBAction)editLeagues:(id)sender {

    [self presentAlertViewForPassword];

}

-(void)presentAlertViewForPassword
{

    _passwordAlert = [[UIAlertView alloc]initWithTitle:@"Password"
                                                           message:@"Enter Password to edit Leagues"
                                                          delegate:self
                                                 cancelButtonTitle:@"Cancel"
                                                 otherButtonTitles:@"OK", nil];
    [_passwordAlert setAlertViewStyle:UIAlertViewStyleSecureTextInput];
    _passwordField = [_passwordAlert textFieldAtIndex:0];
    _passwordField.delegate = self;
    _passwordField.autocapitalizationType = UITextAutocapitalizationTypeWords;
    _passwordField.tag = textFieldPassword;
    [_passwordAlert show];

}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSString *password = [NSString stringWithFormat:@"55555"];

      if ( ![_passwordField.text isEqual:password]) {

          _wrongPassword = [[UIAlertView alloc] initWithTitle:@"Wrong Password"
                                                                message:@"You are not authorised to use this feature!"
                                                               delegate:self
                                                      cancelButtonTitle:nil
                                                      otherButtonTitles:nil];
        [_wrongPassword show];

        [self performSelector:@selector(allertViewDelayedDissmiss:) withObject:nil afterDelay:2];
    }
    else
    {
         [self performSegueWithIdentifier:@"addLeague" sender:[alertView buttonTitleAtIndex:0]];
    }

}

-(void) allertViewDelayedDissmiss:(UIAlertView *)alertView
{
    [_wrongPassword dismissWithClickedButtonIndex:-1 animated:YES];

}

- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
    NSString *inputText = [[alertView textFieldAtIndex:0] text];
    if( [inputText length] >= 4 )
    {
        return YES;
    }
    else
    {
        return NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:33:24.947

`[_wrongPassword dismissWithClickedButtonIndex:-1 animated:YES];`将调用委托方法`alertView:didDismissWithButtonIndex:`

你有两个选择：

1.  不要在错误密码警报上设置代表

2.  检查`alertView:didDismissWithButtonIndex:`例如正确的警报

    ```
    - (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
    {
        if (alert == _passwordAlert) {
            NSString *password = [NSString stringWithFormat:@"55555"];
            // and so on
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:34:13.893

导致问题的原因是当您关闭错误的密码警报时，它也会调用`didDismissWithButtonIndex`委托方法。

**解决方案 1**

将`delegate`密码错误警报设置为`nil`。

```
wrongPassword = [[UIAlertView alloc] initWithTitle:@"Wrong Password"
                                                                message:@"You are not authorised to use this feature!"
                                                               delegate:nil
                                                      cancelButtonTitle:nil
                                                      otherButtonTitles:nil]; 
```

**解决方案 2**

将标签添加到您的 alertView。并更改您的方法，例如：

```
-(void)presentAlertViewForPassword
 {
       _passwordAlert = [[UIAlertView alloc]initWithTitle:@"Password"
                                                       message:@"Enter Password to edit Leagues"
                                                      delegate:self
                                             cancelButtonTitle:@"Cancel"
                                             otherButtonTitles:@"OK", nil];
       [_passwordAlert setAlertViewStyle:UIAlertViewStyleSecureTextInput];
       passwordAlert.tag = 7;
       _passwordField = [_passwordAlert textFieldAtIndex:0];
       _passwordField.delegate = self;
       _passwordField.autocapitalizationType = UITextAutocapitalizationTypeWords;
       _passwordField.tag = textFieldPassword;
       [_passwordAlert show];
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    if(alertView.tag == 7)
    {
       NSString *password = [NSString stringWithFormat:@"55555"];
       if ( ![_passwordField.text isEqual:password])
       {
          _wrongPassword = [[UIAlertView alloc] initWithTitle:@"Wrong Password"
                                                                message:@"You are not authorised to use this feature!"
                                                               delegate:self
                                                      cancelButtonTitle:nil
                                                      otherButtonTitles:nil];
        [_wrongPassword show];

        [self performSelector:@selector(allertViewDelayedDissmiss:) withObject:nil afterDelay:2];
      }
      else
      {
         [self performSegueWithIdentifier:@"addLeague" sender:[alertView buttonTitleAtIndex:0]];
      }
   }
} 
```

# tcl - 如何防止 doxygen 从 tcl 中删除压痕

> ID：13958674
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:10.670
> 
> 标签：tcl, doxygen

我正在为我的 tcl 包制作文档。我确实设置了 INLINE_SOURCES，但是，当显示时，空格都会从源代码中删除。有没有办法保持缩进？

# mysql - SQL，未应用 where 子句

> ID：13958676
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:24.427
> 
> 标签：mysql, sql, where

我正在使用 mysql 5.1

这是我的请求，我想统计年龄在 0 到 14 岁之间且拥有启用帐户的用户数量。

```
SELECT COUNT( DISTINCT user.id ) AS user
FROM profile, user
WHERE (
profile.age
BETWEEN 0 
AND 14
)
AND user.enabled =1 
```

`user.enabled=1`条件有效，但不是`profile.age BETWEEN 0 AND 14`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:33:27.750

您没有将 2 个表连接在一起，因此您只是在运行两者的笛卡尔积。您需要通过一个公共密钥加入它们。

像这样的东西：

```
SELECT COUNT( DISTINCT user.id ) AS user
FROM profile join user on user.id=profile.user_id
WHERE (
profile.age
BETWEEN 0 
AND 14
)
AND user.enabled =1 
```

# php - 您如何使用 jQuery 加载（），就像使用 PHP 内联代码中的 include（）一样？

> ID：13958677
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:23.617
> 
> 标签：php, javascript, jquery, html

在底部更新我习惯于使用涉及 id 或类的选择器，所以甚至不确定这是否可能至少是我正在考虑的功能。我有一个名为 replist.html 的单独文件，我以这样的一对一关系保存数据（35,000 行的部分列表）......

```
'Illinois': 'joesmoe',
'Nevada': 'messytess',
<!-- start of new zip codes -->
'01001': 'julsguls',
'01002': 'julsguls', 
```

我最初使用 include_once() 将文件拉到我正在使用脚本的页面中，但现在正在修改以更改移动设备及其对位置检测的处理（我正在将 IP 转换为 zip）。由于性质，我希望通过 PHP 上的客户端脚本访问数据。这是我到目前为止...

```
<script>
...
<?php
if(!(($detect->isMobile()))) {  ?>
            var reps = {
            <?php include_once('repList.html'); ?>
            };
 <?php
}
else { ?>
    <!-- custom mobile location detection here --> 
    reps = {***would like to get load() here***}; 
<?php } ?>
...
</script> 
```

...否则我希望添加移动位置检测脚本，然后**加载（）**我的 repList.html 文件。

我已经简化了 else ，只专注于如何让我的 load() 在那里。如果有人有更好的 jQuery、其他 JavaScript 库或任何客户端解决方案，我很乐意。我计划在此过程之前使用的脚本是客户端，为什么我不能像以前那样使用 PHP。

我相信我会保留 PHP 并继续...

```
var reps_load = {<?php include_once('repList.html'); ?>};

<?php
if(!(($detect->isMobile()))) {  ?>
    var reps = reps_load;
 <?php
}
else {
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:29:49.967

根据手册`load()`确实：

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

所以不能为你的 javascript 变量分配任何东西。

您可以[`json_encode`](http://php.net/manual/en/function.json-encode.php)在数据服务器端[`jQuery.getJSON()`](http://api.jquery.com/jQuery.getJSON/)改用，将返回的值分配给回调函数中的变量。

但是您会调用另一个 php 文件，该文件又会读取您的数据并进行准备。

就像是：

```
else
{
?>
  <!-- custom mobile location detection here -->
  var reps;
  $.getJSON('script_that_returns_data_as_json.php', function(data) {
    reps = data;
    // you might need to process it to get it the form you want...
  });
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:03:34.467

此方法仅使用纯 javascript，但如果您的数据位于不同的域中，它甚至可以跨站点工作。您可以在文件前面添加包含为 JSON 或 javascript 变量的数据

```
var script=document.createElement("script");
script.src="your_url.js"
var head = document.getElementsByTagName('head')[0]
head.insertBefore(script,head.firstChild) 
```

然后您的数据文件可能类似于：

```
items=[
{"state":"Illinois","name":"joesmoe"},
{"zip":"01001", "value":"julsquls"}
]; 
```

可以通过以下方式访问：

```
for (var i=0;i<items.length;i++){
    if(items[i].state) /*state stuff*/;
    if(items[i].zip) /*zip stuff*/;
} 
```

# javascript - 如何根据当前事件日期突出显示元素？

> ID：13958679
> 
> 赞同：4
> 
> 时间：2012-12-19T18:24:30.310
> 
> 标签：javascript, jquery, html

我从另一个关于 SO 的问题中借用了一些代码，因为我找不到可以完成我想要实现的目标的脚本。

我想做的是根据分配的日期突出显示当前事件，并且以下代码不适用于`<td>`table、a`<div>`​​ 或元素中的`<p>`元素。

我还想将突出显示应用于任何同名的 ID，这可能与我现在拥有的一样吗？

```
<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title></title>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<style>
body {padding: 20px; font-family: sans-serif;}
p {margin-top: 80px; font-size: 11px;}
.active {color: hotpink;
background:#000;
font-weight:bold;
}
</style>
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
var TODAY = new Date();
//Individual dates could be organized as objects, but using arrays below seems to be more readable and tidy
var SCHEDULE = {
'some-class': ['May 5 2011', 'June 5 2011'],
'some-class-a': ['May 5 2012', 'June 5 2012'],
'some-class-b': ['May 10 2012', 'June 10 2012'],
'some-class-c': ['December 15 2012', 'December 31 2012'],
'some-class-d': ['May 20 2012', 'June 20 2012'],
'some-class-e': ['December 15 2012', 'December 31 2012']
};
for (var events_ in SCHEDULE) {
console.log('checking ' + events_ + ', dates have to be within the ' + SCHEDULE[events_] + ' range');
if (TODAY >= Date.parse(SCHEDULE[events_][0]) && TODAY <= Date.parse(SCHEDULE[events_][1])) {
console.log(events_ + ' is currently in session!');
document.getElementById(events_).classList.add('active');
}
}
});//]]>
</script>
</head>
<body>
<ul>
<li id="some-class">Event 1</li>
<li id="some-class-a">Event 2</li>
<li id="some-class-b">Event 3</li>
<li id="some-class-c">Event 4</li>
<li id="some-class-d">Event 5</li>
<li id="some-class-e">Event 6</li>
</ul>
<p id="some-class-e">Current event here text</p>
<div id="some-class-e">Current event here, more text</div>
<table id="events" border="1">
<tr>
<td>Event 1 (May 16 - Dec 1)</td>
</tr>         
<tr>
<td>Event 2 (May 31 - June 1)</td>
</tr>
<tr>
<td id="some-class-e">Current Event (December 15 - December 31)</td>
</tr>               
</table>
</body>
</html> 
```

[jsFiddle 演示](http://jsfiddle.net/davidThomas/jhd7G/2/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:37:42.817

首先，`ID`s 需要是唯一的，并且通过使用`document.getElementById`你只会获取一个。

`some-class-e`如果您想多次使用相同的标识符（例如， ），则需要使用类名。

您可以使用类名获取所有元素`document.getElementsByClassName`，然后将`active`类名应用于它。

```
<ul><li class="some-class-e">Event 6</li></ul>
<p class="some-class-e">Current event here text</p>
<div class="some-class-e">Current event here, more text</div> 
```

```
var matches = document.getElementsByClassName(events_);
for(var i = 0; i < matches.length; ++i){
  matches[i].classList.add('active');
} 
```

[**看这里。**](http://jsfiddle.net/qvFGC/)

* * *

## 更新

一个 jQuery 变体：

```
$.each(SCHEDULE, function(classname, dates) {
  if (TODAY >= Date.parse(dates[0]) && TODAY <= Date.parse(dates[1])) {
    $("." + classname).addClass("active");
  }
}); 
```

[**你去吧。**](http://jsfiddle.net/fSF3V/)

# iphone - iPhone - 设置带数组的块时出错

> ID：13958683
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:51.833
> 
> 标签：iphone, asynchronous, objective-c-blocks

我写这篇文章是为了跟进我昨天提出的[这个](https://stackoverflow.com/questions/13938354/iphone-nsurlconnection-asynchronous-download-using-urls-in-nsarray)问题，但我还没有收到原始回复者的回复。我很乐意等待，但我的时间有限。他极大地帮助了我的 NSURLConnection 代码，我完全理解它是如何工作的，但我似乎无法让语法正确。

我无法让 handler:^ 被识别，这一行：

```
[self loadImageArray:urlArray handler:^(NSMutableArray *)imageArray 
```

并且它需要获取一个填充有图像的数组（来自 loadImageArray 的 imageArray）。

```
- (void)loadImageArray:(NSArray *)urls handler:(void(^)( handler) 
```

这应该从服务器异步填充一个数组（imageArray）。

如何正确设置块调用？我已经阅读了一些网站上的有关块的信息，但没有任何建议有帮助。

我再次询问了最初的回复者，但没有收到回复。

我希望编辑有所帮助。谢谢！

这是我的.h

```
@interface OBNSURLViewController : UIViewController
{
    NSArray *jsonArray;
    NSMutableData *theJsonData;
    IBOutlet UIView *mainView;
    __weak IBOutlet UIImageView *mainImage;
    __weak IBOutlet UILabel *mainLabel;

}
@property (nonatomic, strong) NSData *serverData;
@property (strong, nonatomic) IBOutlet UIScrollView *mainScroll;
@property (nonatomic, retain) NSMutableArray *imageArray;
@property (nonatomic, retain) NSMutableArray *urlArray;
@property (nonatomic, retain) UIImage *imageData;
@end 
```

这是我坚持的相关代码：

```
- (void)parseJSONAndGetImages:(NSData *)data
{
    //initialize urlArray
    urlArray = [[NSMutableArray alloc]init];
    //parse JSON and load into jsonArray
    jsonArray = [NSJSONSerialization JSONObjectWithData:theJsonData options:nil error:nil];
    //assertion?
    assert([jsonArray isKindOfClass:[NSArray class]]);

    //Make into one liner with KVC.... Find out what KVC is

    //Code to load url's into array goes here....

    //load the images into scrollview after fetching from server
    [self loadImageArray:urlArray handler:^(NSMutableArray *)imageArray //Here is a big problem area
     {
         //work goes here....
     }];
}

- (void)loadImageArray:(NSArray *)urls handler:(void(^)( handler)//This does not want to work either. I am stuck on handler???
{ dispatch_async(0, ^{
        //imageArray = [NSMutableArray array];
        for (int y = 0; y < urlArray.count; y++)
        {
            //stuff goes here.....a
    });
        dispatch_async(dispath_get_main_queue(),^{
            handler(imageArray);
        });

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:41:41.300

在我阅读本文时，方法语法应如下所示。如果处理程序块接受参数，则需要声明它接受。

```
- (void)loadImageArray:(NSArray *)urls handler:(void (^)(NSMutableArray *imageArray))handler
{
    NSMutableArray *imageArray = [NSMutableArray array];

    // Do something with the urls array to fill in entries in imageArray...

    handler(imageArray);
} 
```

您可以这样调用该方法：

```
NSArray *urls = // filled in somewhere else...
[myObject loadImageArray:urls handler:^(NSArray *imageArray) { 
    NSLog(@"%@", imageArray); 
}]; 
```

# android - 与 Android 的自定义对话框

> ID：13958684
> 
> 赞同：2
> 
> 时间：2012-12-19T18:24:53.660
> 
> 标签：android, android-custom-view, android-dialog

我必须在运行时构建一个自定义对话框。根据具体情况，对话框应显示一到四个搜索栏。我想获得类似的东西：

*   标题1 搜索栏1
*   标题2 搜索栏2 ...

我正在试验取自 Android 开发人员指南网页的 FireMissilesDialogFragment 示例代码。我修改了 onCreateDialog() 方法，添加了以下代码：

```
 // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    Context     context = builder.getContext();//getActivity().getBaseContext(); 
    LinearLayout    layout = new LinearLayout( context );

    layout.setLayoutParams( new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT) );

    SeekBar         seek_bar = new SeekBar( context );

    TextView        text = new TextView( context );
    text.setClickable(false);
    text.setText( "slide me" );

    layout.addView( text, new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT) );

    layout.addView( seek_bar, new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT) );

    builder.setView( layout ); 
```

但是，它不是在两个不同的行中显示文本“滑动我”和搜索栏，而是仅显示文本。如何创建这样的自定义对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:05:36.563

Android Dialogs 可以包含的内容有些限制。创建 Activity 并告诉 android 将其显示为对话框更容易：

1.  创建一个新活动并使用这些滑块添加一个布局文件

2.  在清单中，使用这一行

`<activity android:theme="@android:style/Theme.Dialog">`

让活动显示为对话框。这种方法不会出错。
此外，如果您需要从对话框中获取结果，可以使用[startActivityForResult](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:36:11.323

您需要先使用搜索栏和文本视图进行布局。您可以使用布局充气器将其添加到您的对话框中。尝试这个....

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
View layout = inflater.inflate(R.layout.yourLayoutId, (ViewGroup) findViewById(R.id.MyLayout));
AlertDialog.Builder builder = new AlertDialog.Builder(this)
.setView(layout);
AlertDialog alertDialog = builder.create();
alertDialog.show();
SeekBar sb = (SeekBar)layout.findViewById(R.id.yourSeekBar);
sb.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser){
        //Do something here with new value
    }
}); 
```

# javascript - JavaScript 对锦标赛种子进行排序

> ID：13958686
> 
> 赞同：0
> 
> 时间：2012-12-19T18:24:54.577
> 
> 标签：javascript, sorting, seed, tournament

我在这里使用了一些帖子来创建一个使用 JavaScript 和 Jquery 来显示括号的锦标赛括号系统。

我有 16 支球队 1-16 号种子。目前我排序的种子如下：

`[1,8],[4,5],[2,7],[3,6]`

如您所见，它在某种程度上有效，但半决赛将是 1v4 和 2v3，这是不正确的。我希望半决赛是 1v3 和 2v4，但无论我尝试什么，我似乎都无法将其打印出来。所以应该是：

`[1,8],[3,6],[5,4],[7,2]`

这也使得当您查看纸上的括号时，1 和 2 在括号的两端是正确的，但无论我尝试什么，它都不起作用。

编辑：我也希望这适用于更多团队，因此是 16/32 团队锦标赛，但是当我尝试使用此算法时，我似乎根本没有得到正确的种子。

这是我的代码：

```
var seeds = [ 1,2,3,4,5,6,7,8],
    num_rounds = Math.log(seeds.length) / Math.log(2);

// 2-dimensional array
// Each subarray holds the seeds active in that round in order of matches played
// Example:
// seeds in first match of 2nd round are: bracket_round[1][0] & bracket_round[1][1]
var bracket_round = [];

// Create empty arrays inside bracket_round
for(var i = 0; i < num_rounds; i++) {
  bracket_round[i] = [];
}

// Assuming no upsets
// Final is seed 1 and seed 2
bracket_round[num_rounds] = [ seeds[0], seeds[1] ];

// For each round in the bracket
for(var roundNum = num_rounds; roundNum > 0; roundNum--) {
  var round = bracket_round[roundNum];
  var prev_round = bracket_round[roundNum - 1];

  // For each seed in the round, work out who they defeated in previous round, storing result
  for(var m = 0; m < round.length; m++) {
    // round.length = number of matches in the round
    // number of teams in the round will be, number of matches * 2
    var num_teams_in_round = round.length * 2;

    // previous match team A = current match team "m"
    prev_round[m * 2] = round[m];

    // previous match team  B = (# teams in previous round + 1) - (current match seed "m")
    prev_round[(m * 2) + 1] = (num_teams_in_round + 1) - round[m];
  }
}

document.write(bracket_round[1]);

var singleElimData = {
    teams : [              // Matchups
        [ bracket_round[1][0], bracket_round[1][1] ],
    [ bracket_round[1][2], bracket_round[1][3] ],
    [ bracket_round[1][4], bracket_round[1][5] ],
    [ bracket_round[1][6], bracket_round[1][7] ]
  ],
  results : [[
      [ [1, 0], [1, 0], [1,0], [1, 0] ],
      [ [1, 0], [1, 0] ],
      [ [1, 0], [0, 1] ]
    ]
  ]
}

$(function() {
    $('#singleElim').bracket({
        init: singleElimData
    })
})

1 = 0001    0001 = 1
2 = 0010    0011 = 3
3 = 0011    0010 = 2
4 = 0100    0110 = 6
5 = 0101    0111 = 7
6 = 0110    0101 = 5
7 = 0111    0100 = 4
8 = 1111    1000 = 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:26:49.887

创建树时，您可以使用格雷码来确定哪条边是玩家。基本上它是反转位并添加 1。阅读此处：[http](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/229068) ://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/229068 。

# html - 带有悬挂缩进的内联列表

> ID：13958692
> 
> 赞同：1
> 
> 时间：2012-12-19T18:25:15.757
> 
> 标签：html, css, list, inline

在 HTML 中，我正在布置一个类似这样的无序列表：

```
Fruit: Apple, Banana, Cherry, Durian... 
```

我将“水果：”一词视为生成的内容。我希望列表能够换行，以便第二行与第一个“Apple”齐平。

我目前的尝试是[在这里](http://jsfiddle.net/2t8cq/2/)。我已经包含了一个背景颜色，只是为了突出奇怪的接近但没有雪茄的间距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:32:10.247

这可能不是完全正确的方法，但只需将 -4em 更改为 -2.2em 似乎就可以解决问题。不确定它如何跨浏览器或字体大小更改进行测试，但它可以作为一个开始：

```
li:first-child:before {
    content: 'fruits: ';
    margin-left: -2.2em;
} 
```

[http://jsfiddle.net/2t8cq/4/](http://jsfiddle.net/2t8cq/4/)

*更新：此方法确实会随着字体大小的增加或减少而失效。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:06:19.160

好的，[这就是我想出的](http://jsfiddle.net/2t8cq/5/)。它使用定位而不是边距，这看起来有点难看，但确实有效。我仍然对其他解决方案持开放态度。

相关部分：

```
 ul {
        margin: 0 0 0 4em;
        padding: 0;
        position: relative;
        }
    li {
        margin: 0;
        padding: 0;
        display: inline;
        background-color: #ccc;
        list-style: none;
        }
li:first-child:before {
        content: 'Fruit: ';
        position: absolute;
        left: -3em;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:33:34.053

您需要的通常是使用定义列表完成的。您将需要相应地对其进行样式设置。

```
<dl>
     <dt>Fruit:</dt>
     <dd>Apple</dd>
     <dd>Banana</dd>
</dl> 
```

# android - Android GoogleMaps V2 不刷新

> ID：13958697
> 
> 赞同：4
> 
> 时间：2012-12-19T18:25:22.713
> 
> 标签：android, google-maps, refresh, loading, invalidation

我的应用程序显示用户的驾驶路线。几秒钟后，地图停止加载新内容，如下所示： ![在此处输入图像描述](../Images/2b76764837ba557f726992db6c7aa626.png)

我的代码：XML

```
 <fragment 
    xmlns:android="http://schemas.android.com/apk/res/android"
    class="com.google.android.gms.maps.SupportMapFragment"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    map:cameraZoom="19"
    android:layout_below="@+id/tracking_maps_colorgradient">
</fragment> 
```

爪哇：

```
 float zoom =  18;//googleMap.getCameraPosition().zoom;
        LatLng latLng = new LatLng(lastLatitude, lastLongitude);
        locations.add(latLng);
        CameraPosition pos = new CameraPosition.Builder()
            .target(latLng)
            .bearing(bearing)
            .zoom(zoom)
            .tilt(googleMap.getCameraPosition().tilt)
            .build();

        googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(pos));
        Polyline p = googleMap.addPolyline(new PolylineOptions()
            .add(latLng)
            .width(15)
            .color(Color.RED)
            .geodesic(true));
        p.setPoints(locations); 
```

有没有办法使地图无效？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:39:40.277

好的，对于有同样问题的人，这是解决方案。问题是 GoogleMap 不会一直刷新，当用户超出边界时，您必须更改相机位置。

```
LatLngBounds bounds = this.googleMap.getProjection().getVisibleRegion().latLngBounds;

if(!bounds.contains(new LatLng(gps.getLatitude(), gps.getLongitude())))        {
    //Move the camera to the user's location if they are off-screen!
    CameraPosition cameraPosition = new CameraPosition.Builder()
  .target(new LatLng(gps.getLatitude(), gps.getLongitude()))      
  .zoom(zoom)                   // Sets the zoom
  .bearing(bearing)
  .build();                   // Creates a CameraPosition from the builder
    googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T15:00:37.030

Use Thread.sleep(300); after updating the map with markers, overlays, etc. Google Maps uses its own internal threads and need time to apply changes. It is possible that the thread adding stuff to the map is blocking Google Map's thread. The sleep will give it some time to make the update.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T19:14:52.510

我不知道有没有，直到你有问题。但我解决了，我想和你分享。您可以使用处理程序和 Thread.sleep(600)。如果你只使用处理程序，你会遇到同样的问题。Thread.sleep 函数等待更新地图，然后继续标记。

# jquery - 检查是否加载了 jquery-mobile

> ID：13958698
> 
> 赞同：6
> 
> 时间：2012-12-19T18:25:26.750
> 
> 标签：jquery, jquery-mobile, button

是否有检测是否加载了 jquery-mobile/或任何其他库？

我知道我可以做一个简单的`$('#button').button('enable');`，就像这里提到的[如何启用 jQuery Mobile 按钮？](https://stackoverflow.com/questions/6497131/how-to-enable-a-jquery-mobile-button)但是为了好玩我只想知道是否有任何方法可以检测是否加载了库，然后执行上面的代码

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T18:31:27.923

您可以检查其中一项功能是否存在。

```
if ( $.mobile ) {
   //jq mobile loaded
} else {
  // not
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:30:28.877

这就是你使用 jQM 的方式：

```
$(document).bind("mobileinit", function(){
    //apply overrides here
}); 
```

这是 jQM 开始执行的时刻。它只执行一次。

你可以在这里阅读更多关于它的信息：http: [//jquerymobile.com/demos/1.0.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.0.1/docs/api/globalconfig.html)

但在你的情况下，它有点不同。您需要等待加载 DOM 以更改页面内容中的某些内容，针对这种情况的最佳 jQM 实践是 pagebeforeshow 事件：

```
$('#pageID').live('pagebeforeshow', function (event) {
    // Some code here
}); 
```

# schema - 只能在 SDL Tridion 中编辑架构/组件的源

> ID：13958701
> 
> 赞同：0
> 
> 时间：2012-12-19T18:25:46.850
> 
> 标签：schema, tridion

我正在设计一个带有嵌入式多媒体模式（图像等）的模式。当我保存它并用 CME 再次打开时，设计视图消失了，我只能转到源视图来更改它。

![NoDesignViewForSchema](../Images/ddc6551e523bacd0d1e0cb8c8e9ce547.png)

更糟糕的是，只有当您尝试基于模式创建组件时，您才会看到源视图。对我来说，这是严重的可用性问题。在没有工具支持的情况下编写 xml 很糟糕。 ![NoDeisgnViewCreateComponent](../Images/7b68076e445f5511eccd5a37178a99ff.png)

不知道大家有没有类似的经历，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T21:39:42.577

Tridion 支持两种模式：

1.  网络模式
2.  复杂模式

Tridion 提供了一个用于构建 Web 模式的 Web 界面，并且可以为编辑器生成一个输入表单，然后根据这些模式将内容输入到组件中。

对于复杂的模式，Tridion 只提供了一个文本区域，用于编辑 XSD 的源代码或组件的实际 XML 内容。这背后的基本原理是客户将使用一些外部 XML 编辑器（例如 XML Spy）来处理这些内容类型。

Tridion 会在您编辑模式时自动区分两种模式类型。当它发现无法生成表单的东西时，它会切换到“复杂模式模式”，隐藏友好的表单构建器控件。

通常，您应该只能通过在 Web 界面的源选项卡上手动编辑 XSD 来将常规 Web 模式复杂化。您当然可能已经找到了另一种方法来完成它，在这种情况下，我很想听听您是如何完成它的。

并且一定要与我们分享您的 XSD 源代码，因为这将使我们能够帮助您将架构转换回 Web 架构。

# c# - DbContext 用法和属性值

> ID：13958704
> 
> 赞同：0
> 
> 时间：2012-12-19T18:25:53.347
> 
> 标签：c#, asp.net-mvc-3, properties, dbcontext, entity-framework-4.3

首先，让我们先说我是一个菜鸟。话虽如此，我正在使用带有 EF4.3.1 的 MVC3 使用 db first 方法在 C# 中构建一个 Web 应用程序。在登录过程中，我想设置一些在整个应用程序中使用的会话变量。

我的问题是我不确定如何将值读入会话变量。以下是当前在 AccountController.cs 中的代码：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, 
                                              model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) 
                && returnUrl.Length > 1 
                && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") 
                && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", 
                "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

从我读过的内容来看，我应该尝试使用 DbContext 来访问给定字段的属性，类似于：

```
using (var context = new DbContext())
{
    var svc100 = context.SVC00100.Where(t => 
                        t.TECHEMAIL.Contains("model.UserName")

    // Read the current value of the Name property
    Session["Name"] = context.Entry(svc100).Property(u =>
                                                 u.Name).CurrentValue;
} 
```

现在......我如何确定在第二个代码块中应该使用什么来代替 DbContext() ？如果我尝试使用下拉菜单并选择我需要的内容，我看不到与包含 DbContext 短语的我的实体 (CPLUEntities) 相关的任何内容。

我发现的一些链接：

[在 MembershipProvider 中实现自定义“ValidateUser”](https://stackoverflow.com/questions/5431243/implement-custom-validateuser-in-membershipprovider)

[使用属性值的实体框架](http://msdn.microsoft.com/en-US/data/jj592677)

[在 EF 4.1 第 5 部分中使用 DbContext：使用属性值](http://blogs.msdn.com/b/adonet/archive/2011/01/30/using-dbcontext-in-ef-feature-ctp5-part-5-working-with-property-values.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:33:00.980

```
using (var context = new DbContext())
  {
     var svc100 = context.SVC00100
                 .FirstOrDefault(t => t.TECHEMAIL.Contains(model.UserName));

     // Read the current value of the Name property
     if (svc100 != null && !String.IsNullOrEmpty(svc100.Name))
         Session["Name"] = svc100.Name;
  } 
```

# xss - Java El 和持久性 XSS

> ID：13958705
> 
> 赞同：0
> 
> 时间：2012-12-19T18:26:00.383
> 
> 标签：xss, el

首先，这只是一个到目前为止似乎运行良好的 POC，基本上我想知道您对这种解决方案的看法。

问题：

我有这个包含大量 EL 代码的应用程序，现在我应该防止 XSS 错误，我目前的解决方案（但这并不意味着它是我要修复的唯一问题）只涉及在 EL 上下文中防止 XSS。

下面的代码在一个jsp页面中：

```
This is your car color ${car.color} 
```

汽车对象设置如下：

```
ModelAndView mv = new ModelAndView("page3");
String xss = "<script>window.alert('XSS!!');</script>";
Car c = new Car(xss);
mv.addObject("car", c);
return mv; 
```

这样应该会弹出一条警报消息，这里没有什么新东西......

我的建议（有效）如下

```
This is your car color${car.color.preventXSS} 
```

这意味着就像向每个字符串“添加”一个 preventXSS 属性（我没有修改 String 类），我通过一个自定义的 EL Resolver 来实现这一点，基本上如下

```
try {
    value = context.getELResolver().getValue(context, base, property);
} catch (PropertyNotFoundException e) {
    if ((base instanceof String) && property.equals(PREVENT_XSS)) {
        context.setPropertyResolved(true);
        value = ESAPI.encoder().encodeForHTML(base.toString());
    }
} 
```

在这种情况下，'base' 具有值`<script>window.alert('XSS!!');<;/script>` ，'PREVENT_XSS' 是 'preventXSS' 的常量，它是我们 EL 表达式中的最后一个属性。

顺便说一句，我正在使用 OWASP esapi 编码器来处理 XSS，如果需要，可以通过添加其他不同的编码（如 encodeForHTMLAttribute 和 OWASP 的 esapi 支持的许多其他编码）来改进这一点。

note1：我知道我可以使用 EL 函数来实现相同的目的，但我只想添加“属性”preventXSS，而不必在每个页面中都包含 jsp taglib 指令。

note2：我也知道 jstl`c:out`标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:32:11.233

是的，您提出的解决方案有效，但是我看到的一个问题是，由于不遵循 EL 标准，附加属性在维护时可能会令人困惑。如果你使用 Spring MVC，你可以看看以下方法来防止 XSS：

[参考 1](http://jeevanpatil.wordpress.com/2011/07/22/prevention_of_xss/)

[参考 2](http://forum.springsource.org/showthread.php?128974-Preventing-Cross-site-scripting-attacks-in-Spring)

[参考文献 3](http://www.hdiv.org/)

# android - 如何获得端到端的滑动 ViewPager？

> ID：13958708
> 
> 赞同：2
> 
> 时间：2012-12-19T18:26:11.620
> 
> 标签：android, android-viewpager, android-view, swipe

我正在使用`ViewPager`扩展名为`PagerAdapter`. 没有`Fragments`涉及。我正在使用`ViewPager`with 常规`Views`。我注意到在浏览视图时，视图不会保持端到端连接/连接。这就像一个无限的边缘。（开始或结束的情况都没有错，只是刷卡时的动态情况。）

**如何立即在下一页中滑动？**

明确一点：我看到了

![在此处输入图像描述](../Images/86890218dbaf85f164954e08b83f6ff7.png)

相反，我想看到：

![在此处输入图像描述](../Images/7d5581609520b93284da808ac1fa511c.png)

我注意到使用带有选项卡的操作栏和 FragmentPagerAdapter，然后使用 ViewPager 和 Fragments，确实具有这种正确的行为。即使它有时也会留下空白。

这是我的代码：

**HelloTabWidget.java**：

```
package com.example.hellotabwidget;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.HorizontalScrollView;
import android.widget.TabHost;
import android.widget.TabWidget;
import android.widget.TextView;

public class HelloTabWidget extends Activity {

    private TabHost mTabHost;

    TabsAdapter mTabsAdapter;

    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hello_tab_widget);

        findViews();
    }

    /**
     *
     */
    protected void findViews() {

        mViewPager = (ViewPager) findViewById(R.id.realtabcontent);

        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        HorizontalScrollView mScrollView = (HorizontalScrollView) findViewById(R.id.sv);

        TabWidget mTabWidget = (TabWidget) findViewById(android.R.id.tabs);

        mTabsAdapter = new TabsAdapter(this, mViewPager, mTabHost, mTabWidget, mScrollView);

        TabHost.TabSpec tab;
        tab = mTabHost.newTabSpec("tab_test1")
                .setIndicator("TABLATURE_1_IT_IS").setContent(R.id.textview1);
        mTabsAdapter.addTab(tab, R.id.textview1, "tab_test1", null);

        tab = mTabHost.newTabSpec("tab_test2")
                .setIndicator("TABLATURE_2_IT_IS").setContent(R.id.textview2);
        mTabsAdapter.addTab(tab, R.id.textview2, "tab_test2", null);

        tab = mTabHost.newTabSpec("tab_test3")
                .setIndicator("TABLATURE_3_IT_IS").setContent(R.id.textview3);
        mTabsAdapter.addTab(tab, R.id.textview3, "tab_test3", null);

        tab = mTabHost.newTabSpec("tab_test4")
                .setIndicator("TABLATURE_4_IT_IS").setContent(R.id.textview4);
        mTabsAdapter.addTab(tab, R.id.textview4, "tab_test4", null);

        tab = mTabHost.newTabSpec("tab_test5")
                .setIndicator("TABLATURE_5_IT_IS").setContent(R.id.textview5);
        mTabsAdapter.addTab(tab, R.id.textview5, "tab_test5", null);

        mTabsAdapter.finalizeTabs();

        mTabHost.setCurrentTab(0);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_hello_tab_widget, menu);
        return true;
    }

    /**
     * This is a helper class that implements the management of tabs and all
     * details of connecting a ViewPager with associated TabHost. It relies on a
     * trick. Normally a tab host has a simple API for supplying a View or
     * Intent that each tab will show. This is not sufficient for switching
     * between pages. So instead we make the content part of the tab host 0dp
     * high (it is not shown) and the TabsAdapter supplies its own dummy view to
     * show as the tab content. It listens to changes in tabs, and takes care of
     * switch to the correct paged in the ViewPager whenever the selected tab
     * changes.
     */
    public static class TabsAdapter extends PagerAdapter implements
            ViewPager.OnPageChangeListener, TabHost.OnTabChangeListener {
        public static final class TabInfo {
            private final Bundle args;
            private final String tag;
            private final int tabContentViewId;

            TabInfo(Bundle args, String tag, int tabContentViewId) {
                this.args = args;
                this.tag = tag;
                this.tabContentViewId = tabContentViewId;
            }

            public String getTag() {
                return tag;
            }

            public int getTabContentViewId() {
                return tabContentViewId;
            }
        }

        private Activity mContext;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        private final ViewPager mViewPager;

        private final TabHost mTabHost;

        private final TabWidget mTabWidget;

        private final HorizontalScrollView mScrollView;

        private Runnable mTabSelector;

        public TabsAdapter(Activity context, ViewPager pager, TabHost tabHost, TabWidget tabWidget, HorizontalScrollView scrollView) {
            super();
            mContext = context;
            mTabHost = tabHost;
            mTabHost.setOnTabChangedListener(this);
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
            mTabWidget = tabWidget;
            mScrollView = scrollView;
        }

        public void finalizeTabs() {
            for (int i = 0; i < getCount(); i++) {
                //mTabWidget.getChildAt(i).setFocusableInTouchMode(true);//TODO
            }

            //Keep everything in memory.
            mViewPager.setOffscreenPageLimit(getCount());
        }

        public void addTab(TabHost.TabSpec tab, int tabContentViewId,
                String tag, Bundle args) {
            TabInfo info = new TabInfo(args, tag, tabContentViewId);
            mTabs.add(info);
            mTabHost.addTab(tab);
            notifyDataSetChanged();
        }

        /**
         * Determines whether a page View is associated with a specific key
         * object as returned by instantiateItem(ViewGroup, int). This method is
         * required for a PagerAdapter to function properly.
         * 
         * @param view
         *            Page View to check for association with object
         * @param object
         *            Object to check for association with view
         * @return
         */
        @Override
        public boolean isViewFromObject(View view, Object object) {
            return ((object instanceof View) && (view.getId() == ((View)object).getId()))
                    || (view == object);
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }

        @Override
        public void onPageSelected(int position) {
            mTabHost.setCurrentTab(position);
            animateToTab(position);
        }

        @Override
        public void onTabChanged(String tabId) {
            for (int i = 0; i < mTabs.size(); i++) {
                if (mTabs.get(i).getTag().equals(tabId)) {
                    mViewPager.setCurrentItem(i);
                    animateToTab(i);
                }
            }
        }

        public void destruct() {
            mContext = null;
        }

        /**
         * Remove a page for the given position. The adapter is responsible for
         * removing the view from its container, although it only must ensure
         * this is done by the time it returns from
         * {@link #finishUpdate(android.view.ViewGroup)}.
         * 
         * @param collection
         *            The containing View from which the page will be removed.
         * @param position
         *            The page position to be removed.
         * @param view
         *            The same object that was returned by
         *            {@link #instantiateItem(android.view.View, int)}.
         */
        @Override
        public void destroyItem(ViewGroup container, int position, Object view) {
            container.removeView((TextView) view);
        }

        /**
         * Create the page for the given position. The adapter is responsible
         * for adding the view to the container given here, although it only
         * must ensure this is done by the time it returns from
         * {@link #finishUpdate(android.view.ViewGroup)}.
         * 
         * @param collection
         *            The containing View in which the page will be shown.
         * @param position
         *            The page position to be instantiated.
         * @return Returns an Object representing the new page. This does not
         *         need to be a View, but can be some other container of the
         *         page.
         */
        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            View view = mContext.findViewById(mTabs.get(position)
                    .getTabContentViewId());
            if(view==null) return null;//Might happen if ViewPager.setOffscreenPageLimit() is not big enough
            ViewGroup formerParent = (ViewGroup)view.getParent();
            if(formerParent!=null && formerParent.getId()==container.getId()){
                return view;
            }
            if(formerParent!=null){
                formerParent.removeView(view);
            }
            container.addView(view, 0, new ViewPager.LayoutParams());
            return view;
        }

        /**
         * Called when the a change in the shown pages has been completed. At
         * this point you must ensure that all of the pages have actually been
         * added or removed from the container as appropriate.
         * 
         * @param arg0
         *            The containing View which is displaying this adapter's
         *            page views.
         */
        @Override
        public void finishUpdate(ViewGroup container) {
            super.finishUpdate(container);
        }

        private void animateToTab(final int position) {
            final View tabView = mTabWidget.getChildAt(position);
            if (mTabSelector != null) {
                mScrollView.removeCallbacks(mTabSelector);
            }
            mTabSelector = new Runnable() {
                public void run() {
                    final int scrollPos = tabView.getLeft()
                            - (mScrollView.getWidth() - tabView.getWidth()) / 2;
                    mScrollView.smoothScrollTo(scrollPos, 0);
                    mTabSelector = null;
                }
            };
            mScrollView.post(mTabSelector);
        }

    }
} 
```

**activity_hello_tab_widget.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textview50"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TextView
        android:id="@+id/textview60"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TextView
        android:id="@+id/textview70"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|fill_vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="fill_vertical"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:id="@+id/sv"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:fadingEdge="horizontal"
                android:fillViewport="true"
                android:scrollbars="none" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" />
            </HorizontalScrollView>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" >

                <TextView
                    android:id="@+id/textview1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a tab" />

                <TextView
                    android:id="@+id/textview2"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is another tab" />

                <TextView
                    android:id="@+id/textview3"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a third tab" />

                <TextView
                    android:id="@+id/textview4"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a fourth tab" />

                <TextView
                    android:id="@+id/textview5"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a fifth tab" />
            </FrameLayout>

            <android.support.v4.view.ViewPager
                android:id="@+id/realtabcontent"
                android:layout_width="match_parent"
                android:layout_height="0px"
                android:layout_weight="1" >
            </android.support.v4.view.ViewPager>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:32:38.317

这是使用布局实现 ViewPager 的方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(2);
} 
```

PagerAdapter 定义为：

```
private class MyPagerAdapter extends PagerAdapter {
        public int getCount() {
            return 5;
        }
        public Object instantiateItem(View collection, int position) {
            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.farleft;
                break;
            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            case 4:
                resId = R.layout.farright;
                break;
            }
            View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(view, 0);
            return view;
        }
        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);
        }
        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);
        }
        @Override
        public Parcelable saveState() {
            return null;
        }
} 
```

由于我忘记了我的心灵感应头盔，并且无法读取您的代码，所以肯定有什么问题！

从这个简单的例子开始，试着找出你的实现中的错误在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:45:16.530

问题是我在`instantiateItem()`. 我的猜测是我在错误的时刻将它们从父级中删除，因此是白色的无限边距（没有下一个视图）。我需要将 静态定义`TextViews`为 的子项`ViewPager`，将它们从 中删除`FrameLayout`，但保留为 dummy `TextView`。然后不再需要从父级中删除。

这是我的固定代码：

**HelloTabWidget.java**：

```
package com.example.hellotabwidget;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.HorizontalScrollView;
import android.widget.TabHost;
import android.widget.TabWidget;
import android.widget.TextView;

public class HelloTabWidget extends Activity {

    private TabHost mTabHost;

    TabsAdapter mTabsAdapter;

    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hello_tab_widget);

        findViews();
    }

    /**
     *
     */
    protected void findViews() {

        mViewPager = (ViewPager) findViewById(R.id.realtabcontent);

        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        HorizontalScrollView mScrollView = (HorizontalScrollView) findViewById(R.id.sv);

        TabWidget mTabWidget = (TabWidget) findViewById(android.R.id.tabs);

        mTabsAdapter = new TabsAdapter(this, mViewPager, mTabHost, mTabWidget, mScrollView);

        TabHost.TabSpec tab;
        tab = mTabHost.newTabSpec("tab_test1")
                .setIndicator("TABLATURE_1_IT_IS").setContent(R.id.dummy_textview);
        mTabsAdapter.addTab(tab, R.id.textview1, "tab_test1", null);

        tab = mTabHost.newTabSpec("tab_test2")
                .setIndicator("TABLATURE_2_IT_IS").setContent(R.id.textview2);
        mTabsAdapter.addTab(tab, R.id.textview2, "tab_test2", null);

        tab = mTabHost.newTabSpec("tab_test3")
                .setIndicator("TABLATURE_3_IT_IS").setContent(R.id.textview3);
        mTabsAdapter.addTab(tab, R.id.textview3, "tab_test3", null);

        tab = mTabHost.newTabSpec("tab_test4")
                .setIndicator("TABLATURE_4_IT_IS").setContent(R.id.textview4);
        mTabsAdapter.addTab(tab, R.id.textview4, "tab_test4", null);

        tab = mTabHost.newTabSpec("tab_test5")
                .setIndicator("TABLATURE_5_IT_IS").setContent(R.id.textview5);
        mTabsAdapter.addTab(tab, R.id.textview5, "tab_test5", null);

        mTabsAdapter.finalizeTabs();

        mTabHost.setCurrentTab(0);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_hello_tab_widget, menu);
        return true;
    }

    /**
     * This is a helper class that implements the management of tabs and all
     * details of connecting a ViewPager with associated TabHost. It relies on a
     * trick. Normally a tab host has a simple API for supplying a View or
     * Intent that each tab will show. This is not sufficient for switching
     * between pages. So instead we make the content part of the tab host 0dp
     * high (it is not shown) and the TabsAdapter supplies its own dummy view to
     * show as the tab content. It listens to changes in tabs, and takes care of
     * switch to the correct paged in the ViewPager whenever the selected tab
     * changes.
     */
    public static class TabsAdapter extends PagerAdapter implements
            ViewPager.OnPageChangeListener, TabHost.OnTabChangeListener {
        public static final class TabInfo {
            private final Bundle args;
            private final String tag;
            private final int tabContentViewId;

            TabInfo(Bundle args, String tag, int tabContentViewId) {
                this.args = args;
                this.tag = tag;
                this.tabContentViewId = tabContentViewId;
            }

            public String getTag() {
                return tag;
            }

            public int getTabContentViewId() {
                return tabContentViewId;
            }
        }

        private Activity mContext;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        private final ViewPager mViewPager;

        private final TabHost mTabHost;

        private final TabWidget mTabWidget;

        private final HorizontalScrollView mScrollView;

        private Runnable mTabSelector;

        public TabsAdapter(Activity context, ViewPager pager, TabHost tabHost, TabWidget tabWidget, HorizontalScrollView scrollView) {
            super();
            mContext = context;
            mTabHost = tabHost;
            mTabHost.setOnTabChangedListener(this);
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
            mTabWidget = tabWidget;
            mScrollView = scrollView;
        }

        public void finalizeTabs() {
            for (int i = 0; i < getCount(); i++) {
                //mTabWidget.getChildAt(i).setFocusableInTouchMode(true);//TODO
            }

            //Keep everything in memory.
            mViewPager.setOffscreenPageLimit(getCount());
        }

        public void addTab(TabHost.TabSpec tab, int tabContentViewId,
                String tag, Bundle args) {
            TabInfo info = new TabInfo(args, tag, tabContentViewId);
            mTabs.add(info);
            mTabHost.addTab(tab);
            notifyDataSetChanged();
        }

        /**
         * Determines whether a page View is associated with a specific key
         * object as returned by instantiateItem(ViewGroup, int). This method is
         * required for a PagerAdapter to function properly.
         * 
         * @param view
         *            Page View to check for association with object
         * @param object
         *            Object to check for association with view
         * @return
         */
        @Override
        public boolean isViewFromObject(View view, Object object) {
            return ((object instanceof View) && (view.getId() == ((View)object).getId()))
                    || (view == object);
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }

        @Override
        public void onPageSelected(int position) {
            mTabHost.setCurrentTab(position);
            animateToTab(position);
        }

        @Override
        public void onTabChanged(String tabId) {
            for (int i = 0; i < mTabs.size(); i++) {
                if (mTabs.get(i).getTag().equals(tabId)) {
                    mViewPager.setCurrentItem(i);
                    animateToTab(i);
                }
            }
        }

        public void destruct() {
            mContext = null;
        }

        /**
         * Remove a page for the given position. The adapter is responsible for
         * removing the view from its container, although it only must ensure
         * this is done by the time it returns from
         * {@link #finishUpdate(android.view.ViewGroup)}.
         * 
         * @param collection
         *            The containing View from which the page will be removed.
         * @param position
         *            The page position to be removed.
         * @param view
         *            The same object that was returned by
         *            {@link #instantiateItem(android.view.View, int)}.
         */
        @Override
        public void destroyItem(ViewGroup container, int position, Object view) {
            container.removeView((TextView) view);
        }

        /**
         * Create the page for the given position. The adapter is responsible
         * for adding the view to the container given here, although it only
         * must ensure this is done by the time it returns from
         * {@link #finishUpdate(android.view.ViewGroup)}.
         * 
         * @param collection
         *            The containing View in which the page will be shown.
         * @param position
         *            The page position to be instantiated.
         * @return Returns an Object representing the new page. This does not
         *         need to be a View, but can be some other container of the
         *         page.
         */
        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            View view = mContext.findViewById(mTabs.get(position)
                    .getTabContentViewId());
            container.addView(view, 0, new ViewPager.LayoutParams());
            return view;
        }

        /**
         * Called when the a change in the shown pages has been completed. At
         * this point you must ensure that all of the pages have actually been
         * added or removed from the container as appropriate.
         * 
         * @param arg0
         *            The containing View which is displaying this adapter's
         *            page views.
         */
        @Override
        public void finishUpdate(ViewGroup container) {
            super.finishUpdate(container);
        }

        private void animateToTab(final int position) {
            final View tabView = mTabWidget.getChildAt(position);
            if (mTabSelector != null) {
                mScrollView.removeCallbacks(mTabSelector);
            }
            mTabSelector = new Runnable() {
                public void run() {
                    final int scrollPos = tabView.getLeft()
                            - (mScrollView.getWidth() - tabView.getWidth()) / 2;
                    mScrollView.smoothScrollTo(scrollPos, 0);
                    mTabSelector = null;
                }
            };
            mScrollView.post(mTabSelector);
        }

    }
} 
```

**activity_hello_tab_widget.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textview50"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TextView
        android:id="@+id/textview60"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TextView
        android:id="@+id/textview70"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="some text" />

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|fill_vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="fill_vertical"
            android:orientation="vertical" >

            <HorizontalScrollView
                android:id="@+id/sv"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:fadingEdge="horizontal"
                android:fillViewport="true"
                android:scrollbars="none" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" />
            </HorizontalScrollView>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" >

                <TextView
                    android:id="@+id/dummy_textview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="dummy" />
            </FrameLayout>

            <android.support.v4.view.ViewPager
                android:id="@+id/realtabcontent"
                android:layout_width="match_parent"
                android:layout_height="0px"
                android:layout_weight="1" >

                <TextView
                    android:id="@+id/textview1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a tab" />

                <TextView
                    android:id="@+id/textview2"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is another tab" />

                <TextView
                    android:id="@+id/textview3"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a third tab" />

                <TextView
                    android:id="@+id/textview4"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a fourth tab" />

                <TextView
                    android:id="@+id/textview5"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="this is a fifth tab" />
            </android.support.v4.view.ViewPager>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

请注意，此代码可以进一步美化，并且可能包含一些小的过度行为。另外，最后我并没有采用静态视图，而是集成了 Waza_Be 的布局膨胀思想，因为它更接近于`Fragments`没有实际存在`Fragments`，分离一个长布局似乎是个好主意。那么功能是相同的。

# java - 超过 200 列的 SWT 表无法正确呈现

> ID：13958709
> 
> 赞同：4
> 
> 时间：2012-12-19T18:26:13.237
> 
> 标签：java, eclipse, swt, rcp

在我们的 Eclipse RCP 3.7 应用程序中，我们加载 Excel 文件并在表格中显示前 30 行，渲染的问题不在于行数，而在于列数，当表格达到一定大小时，表格不会t 似乎画得很好，当你向右滚动时，单元格和标题不对齐，整个事情变得疯狂。

下面的独立类演示了这个问题，并遵循我在应用程序中使用的基本模式，以防出现问题。

关于如何解决这个问题的任何想法？

```
import java.util.ArrayList;
import java.util.List;

import org.eclipse.jface.viewers.ArrayContentProvider;
import org.eclipse.jface.viewers.StyledCellLabelProvider;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.jface.viewers.ViewerCell;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;

public class Snippet {

    public static TableViewer viewer;

    public static void main( String[] args ) {
        Display display = new Display();
        Shell shell = new Shell( display );
        shell.setLayout( new FillLayout() );
       viewer = new TableViewer(shell, SWT.FULL_SELECTION | SWT.H_SCROLL
                | SWT.V_SCROLL);
        Table table = viewer.getTable();
        table.setLinesVisible(true);
        table.setHeaderVisible(true);

        viewer.setContentProvider(new ArrayContentProvider());
        createColumns(300);
        viewer.setInput(generateData(300, 30));
        for (TableColumn c : viewer.getTable().getColumns()) {
            c.pack();
        }

        shell.setSize( 300, 500 );
        shell.open();
        while( !shell.isDisposed() ) {
            if( !display.readAndDispatch() ) {
                display.sleep();
            }
        }
        display.dispose();
    }

    private static void createColumns(int columnCount) {

        for (int i = 0; i < columnCount; i++) {
            createTableViewerColumn(i);

        }
    }

    private static TableViewerColumn createTableViewerColumn(int colNum) {
        final TableViewerColumn viewerColumn = new TableViewerColumn(viewer,
                SWT.NONE);
        final TableColumn column = viewerColumn.getColumn();
        column.setText("Table Header " + colNum);
        column.setWidth(100);
        column.setResizable(true);
        column.setMoveable(false);
        viewerColumn.setLabelProvider(new Snippet.SampleDataTableCellProvider(colNum));
        return viewerColumn;
    }

    private static List<String[]> generateData(int cols, int rows) {
        ArrayList<String[]> result = new ArrayList<String[]>();
        for  (int y = 0; y < rows; y++) {
            String[] row = new String[cols];
            for  (int x = 0; x < cols; x++) {
                row[x] = "Big long string to test how long these columns can go before it all goes mental.";
            }
            result.add(row);
        }
        return result;
    }

    private static class SampleDataTableCellProvider extends StyledCellLabelProvider {

        private int colnumber;

        private SampleDataTableCellProvider(int colnumber) {
            this.colnumber = colnumber;
        }

        @Override
        public void update(ViewerCell cell) {

            String[] row = (String[]) cell.getElement();
            if (row.length > colnumber) {
                cell.setText(row[colnumber]);
            } else {
                cell.setText("");
            }

            super.update(cell);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T19:07:49.933

我猜`TableViewer`滚动时无法足够快地更新和呈现内容。

您可以尝试查看`SWT.VIRTUAL`JFace 查看器的样式和惰性内容提供程序。

从[TableViewer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/TableViewer.html)的 javadoc ：

> 从 3.1 开始，TableViewer 现在支持 SWT.VIRTUAL 标志。如果基础表是 SWT.VIRTUAL，则内容提供者可以实现 ILazyContentProvider 而不是 IStructuredContentProvider。

`TableViewer`带有`SWT.VIRTUAL`样式的 A可以使用 an`ILazyContentProvider`来按需创建和显示内容。有关使用虚拟查看器的一些副作用，请参阅 javadoc，例如对排序或过滤的限制。

另请参阅此博客条目：[JFace 的查看器性能](http://manuelselva.wordpress.com/2008/04/16/jfaces-viewers-performances/)。

由于标准`TableViewer`缓存行而不是列，Nebula`GridTableViewer`似乎更适合处理大量列的问题。它通知可见单元格，并且可以与`LazyColumnLabelProvider`.

有关使用 Nebula 的解决方案，`GridTableViewer`请参阅这篇文章：[JFace-Viewer and Eclipse Databinding with > 10.000 Objects](http://tomsondev.bestsolution.at/2011/10/07/jface-viewer-and-eclipse-databinding-with-10-000-objects/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T04:47:02.093

这似乎是一个类似的问题。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=124965](https://bugs.eclipse.org/bugs/show_bug.cgi?id=124965)

# c# - 如何访问 EventArgs 类中的 MouseEventArgs 类？

> ID：13958716
> 
> 赞同：0
> 
> 时间：2012-12-19T18:26:30.350
> 
> 标签：c#, visual-studio-2012

我正在尝试对单击单选按钮控件做出反应。在运行时，EventArgs 变量显示了一个 MouseEventArgs 类型的元素，它有一个 EventArgs 类型的基类，如图所示。

![在此处输入图像描述](../Images/e99e9c17406cefdd99170816f2b49203.png)

红色箭头显示了我将 EventArgs 转换为 MouseEventArgs 以允许编译的位置，因为没有转换，唯一可用的方法是 equals、getHashCode、getType 和 ToString。请注意，我正在手动创建此控件 - 而不是在设计器中。

但是，如果我让它继续，我会收到以下错误。

![在此处输入图像描述](../Images/fcc03c5709eb850b5afc173f82072d41.png)

我了解该错误，但我无法弄清楚如何编译它，因为“EventArgs”没有可访问的 Clicks 方法。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:30:38.407

您只需要指定具有 type 的事件处理程序的第二个参数`MouseEventArgs`。像这样：

```
private static void AutoMan_RadBut_Click(object sender, MouseEventArgs e) 
```

这样，您不必在方法中强制转换参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:54:50.107

感谢大家的回应。

最终解决方案使用了亚当答案的一部分。我需要将 EventArgs 更改为 MouseEventArgs 但这本身就会导致错误。整个解决方案包括改变

```
new EventHandler(AutoMan_RadBut_Click); 
```

至

```
new MouseEventHandler(AutoMan_RadBut_Click) 
```

感谢亚当让我走上了正确的道路。

PS 我仍然不知道为什么 'e' 在运行时有一个 MouseEventArgs 子类，但我无法在编译时访问它。

# facebook-like - 输出错误的点数

> ID：13958719
> 
> 赞同：0
> 
> 时间：2012-12-19T18:26:37.410
> 
> 标签：facebook-like

我对 Facebook 有疑问。我想进行 fql 查询以获取页面上的喜欢计数，例如[http://graph.facebook.com/?ids=http://www.mysite.com/index.php?data1=1&data2=2](http://graph.facebook.com/?ids=http://www.mysite.com/index.php?data1=1&data2=2)。但是测试时，我把它放在我的浏览器中，我得到了错误的点赞数，json 输出作为 id 参数 {..."id": "http://www.mysite.com/index.php?data1 =1"...}，丢弃data2参数。为什么流程不对？（知道 mysite 也是一个 facebook 应用程序，这个页面有 og metas）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:51:28.787

您忘记在查询中编码 `& 字符：

`http://graph.facebook.com/?ids=http://www.mysite.com/index.php?data1=1%26data2=2` 按预期工作

# r - R线性回归问题：lm.fit（x，y，offset = offset，singular.ok =singular.ok，...）

> ID：13958722
> 
> 赞同：6
> 
> 时间：2012-12-19T18:26:45.337
> 
> 标签：r, linear-regression, lm

我尝试使用 R 进行回归。我有以下代码在导入 CSV 文件时没有问题

```
 dat <- read.csv('http://pastebin.com/raw.php?i=EWsLjKNN',sep=";")
dat # OK Works fine
Regdata <- lm(Y~.,na.action=na.omit, data=dat)
summary(Regdata) 
```

但是，当我尝试回归时，它不起作用。我收到一条错误消息：

```
Erreur dans lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) : 
  aucun cas ne contient autre chose que des valeurs manquantes (NA) 
```

我所有的 CSV 文件都是数字，如果“单元格”为空，我有“NA”值。有些列不是空的，而其他一些行有时是空的，带有 NA 值......

所以，我不明白为什么我会收到一条错误消息，即使是：

```
na.action=na.omit 
```

PS：CSV 数据可在： http: [//pastebin.com/EWsLjKNN](http://pastebin.com/EWsLjKNN)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:42:59.120

您收到此错误消息是因为您的所有数据框行都包含至少一个缺失值。例如，可以使用以下代码对其进行检查：

```
 apply(data,1,function(x) sum(is.na(x)))
 [1] 128 126  82  78  73  65  58  34  31  30  28  30  20  21  12  20  17  16  12  42  50 128 
```

因此，当您运行回归机智`lm()`并`na.action=na.omit`删除所有数据框行并且没有适合回归的数据时。

但这不是主要问题。如果您提供的数据包含您拥有的所有信息，那么您正在尝试应用包含 165 个自变量（X 变量）的回归，而只有 22 个观察值。自变量的数量必须小于观察的数量。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-20T06:37:55.450

我相信我可以为此添加一点清晰度，因为我亲身经历了这一点，这就是我在这里的原因——除了我的问题是 gls（广义最小二乘模型）与标准线性模型。一些类似的逻辑“可能”适用于此处或类似情况。

到目前为止，我不反驳任何人所说的任何话。人们对观察的看法以及 R 对这些事物的看法可能会有些混淆。

假设您有 160 多个自变量。假设您有一个给定的来源，所有数据都来自该来源。您从文件、数据库等中导入它。假设您有相同数量的响应变量或满足 R 用于回归分析目的的东西。

R 会告诉你你有 2 个观察值。现在，如果您从另一个来源以相同的方式获得了类似的数据，那么如果您在 RStudio 中查看您的全局环境，您将有 3 个观察结果。

我之所以提到这一点是因为数学意义上的“观察”一词（因为它在这里使用）是完全可以接受的。就 R 而言，它以多种方式看待观察。

这是我遇到类似问题的一个重要原因——它告诉我我缺少值，na.omit this，na.action that 等等。当我查看 OrchardSpray 演示时，我回顾了自己的方法，我想到了。

关键是我们如何感知数据中的“观察”是一回事。R 有另一个术语，它吐出错误消息的方式可能会引起额外的混乱。

明白了吗？

# ios - 是否可以使用 ABPersonViewController 从我的 iOS 应用程序更新链接的联系人？

> ID：13958725
> 
> 赞同：2
> 
> 时间：2012-12-19T18:26:52.020
> 
> 标签：ios, abaddressbook, abpersonviewcontroller, addressbookui, carddav

我的应用程序允许用户从他们的通讯录中导入联系人并将其存储在我们的 CardDAV 服务器中。我想让我们 CardDAV 服务器上的联系人与地址簿中的所有其他链接联系人（例如 iCloud）保持同步。

使用通讯簿的统一联系人视图编辑联系人时，所有链接的联系人都会更新。我想让我的应用程序的用户在不离开应用程序的情况下做同样的事情。ABPersonViewController 是否具有与原生 iOS 通讯录相同的功能，可以使用“统一视图”更新所有链接的联系人？

控制器有一个名为 shouldShowLinkedPeople 的属性，但我不确定它实际上做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:01:32.653

我实际上遇到了同样的问题，但找不到答案。但后来我看到你提到了属性“shouldShowLinkedPeople”，这正是解决方案！您所要做的就是将该属性设置为 YES，您将能够在 ABPersonViewController 中查看和编辑所有链接的联系人。

这是我所做的（我的应用程序利用了 ABPeoplePickerNavigationController）：

在我符合 ABPeoplePickerNavigationControllerDelegate 的 ABPeoplePickerNavigationController 子类中：

```
#import <UIKit/UIKit.h>
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h>

@interface ContactsViewController : ABPeoplePickerNavigationController <ABPeoplePickerNavigationControllerDelegate>

@end 
```

实现该方法，该方法允许您通过 ABPersonViewController 通过单击 ABPeoplePickerNavigationController 中的联系人来查看/编辑联系人：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker
      shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    ABPersonViewController *contactDetailViewController = [[ABPersonViewController alloc] init];
    contactDetailViewController.shouldShowLinkedPeople = YES;
    contactDetailViewController.displayedPerson = person;
    contactDetailViewController.allowsEditing = YES;

    [self pushViewController:contactDetailViewController
                    animated:YES];

    return NO;
} 
```

要编辑链接的联系人（例如 Facebook、iCloud 等），您必须包含以下行：

```
contactDetailViewController.shouldShowLinkedPeople = YES; 
```

否则，您将只能编辑其中一个链接的联系人，这可能是不受欢迎的。

# c++ - 赋值后不久指针值重置为空

> ID：13958726
> 
> 赞同：1
> 
> 时间：2012-12-19T18:26:53.200
> 
> 标签：c++, pointers

我有一个指针设置为`0`，然后在同一个函数中，在一些循环/条件内我尝试重新分配它..（请阅读评论）

```
for(Entity* tile : _originalFloorTiles)
        {
            for(Turns turn : pointsUpLeftDownRight)
            {
                if(tile->GetCollisionRect().ContainsPoint(turn.first.x, turn.first.y)){
                    turn.second = tile; //everything looks fine here, turn.second is still null and tile is a valid pointer
                    assert(turn.second); //turn.second is definitely assigned the value of tile here.
                }
               HAPI->DebugText("check pointsUpLeftDownRight now");//!Here's where it gets weird,
            // If i hover over turn and inspect it in visual studio now, turn.second is still completely valid 
            // (with the assigned value of tile).
            // But hovering over pointsUpLeftDownRight shows its contents for each turn..
            // and inside there the current turn is a NULL pointer for turn.second!
            }
        } 
```

所以前一刻我分配了我的指针没有问题，下一刻指针似乎根本没有改变。

澄清一下，这`Turns`是一个懒惰的 typedef `std::pair<Vect, Entity*>`，如果这让我的代码更难阅读，我很抱歉，它是一些快速拼凑起来的敌人 ai。我将在下面发布完整的功能。

我真的很困惑，不确定我是白痴还是发生了什么奇怪的事情，非常感谢任何人花时间看。

//寻找幽灵可以采取的转弯。

```
void IceGhostNPC::RespondToTimePassed()
{   
    //Entity* t = _originalFloorTiles[0];

    //test if enough time has passed since ghost last decided to look for turns
    if(_lastTimeTurned < timeGetTime() - _timeBeforeSearchingForTurns)
    {
        //store points surrounding ghost in a way that we can associate them with a valid floor tile to move onto 
        std::vector<Turns> pointsUpLeftDownRight;
        pointsUpLeftDownRight.push_back(
            Turns(Vect(GetCenterXPos(), GetCenterYPos() - floorTileHeight), 0)); //point above
        pointsUpLeftDownRight.push_back(
            Turns(Vect(GetCenterXPos() - floorTileWidth, GetCenterYPos()), 0)); //point left
        pointsUpLeftDownRight.push_back(
            Turns(Vect(GetCenterXPos(), GetCenterYPos() + floorTileHeight), 0)); //point down
        pointsUpLeftDownRight.push_back(
            Turns(Vect(GetCenterXPos() + floorTileWidth, GetCenterYPos()), 0)); //point right

        //look through original floor tiles, 
        for(Entity* tile : _originalFloorTiles)
        {
            //see if its possible to take a turn 
            for(Turns turn : pointsUpLeftDownRight)
            {
                if(tile->GetCollisionRect().ContainsPoint(turn.first.x, turn.first.y)){
                    turn.second = tile;
                    assert(turn.second);
                }
                HAPI->DebugText("check pointsUpLeftDownRight now");
            }
        }

        //Now to make the behaviour more interesting we have the ghost randomly take one of the turns,
        // ( we use associated tile to check the turn is possible, and we can also change that tile to an icy patch )
        bool turnTaken = false;
        do{
            int turnChoice = rand() % 4;
            if(pointsUpLeftDownRight[turnChoice].second == 0)
                continue; //go back to top of loop if that turn had a null tile
            else
            {
                switch(turnChoice){
                    case 0: //turn upwards
                        _moveable->SetYDirection(Controller::UP);
                        _moveable->SetXDirection(Controller::NONE);
                        break;
                    case 1: //turn leftwards
                        _moveable->SetYDirection(Controller::NONE);
                        _moveable->SetXDirection(Controller::LEFT);
                        break;
                    case 2: //turn downwards
                        _moveable->SetYDirection(Controller::DOWN);
                        _moveable->SetXDirection(Controller::NONE);
                        break;
                    case 3: //turn right
                        _moveable->SetYDirection(Controller::NONE);
                        _moveable->SetXDirection(Controller::RIGHT);
                        break;
                }
                turnTaken = true;
                _lastTimeTurned = timeGetTime();
                //ice tile up baby
            }

        }while(turnTaken = false);
    }

    FinishResponding(timeGetTime());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:28:57.920

检查这一行：

```
for(Turns turn : pointsUpLeftDownRight) 
```

您**正在**遍历. 当副本被销毁时（在正文`pointsUpLeftDownRight`的末尾），您分配给该副本的任何值都将丢失。`for`您的分配临时更改。

试试这个：

```
for(Turns& turn : pointsUpLeftDownRight) 
```

# javascript - Javascript对象继承未显示预期结果

> ID：13958730
> 
> 赞同：4
> 
> 时间：2012-12-19T18:27:08.753
> 
> 标签：javascript, oop

我以前认为这两个作业`a = "foo"`和`a = new String('foo')`是同一个东西。但是对于前一个声明，`console.log(a instanceof Object)`或`console.log(a instanceof String)`返回`false`，而它返回后者的预期`true`。

这看起来很奇怪，原因有两个。首先，即使是普通的声明`a = 'foo'`，所有的字符串方法都在它上面工作，这表明它是从`String`对象继承的。其次，`a.constructor`返回`String`。

任何人都可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:28:22.453

`"foo"`是原始文字。

但是`new String("foo")`是String类的一个实例。

您可以在原始值上调用方法，因为

> JavaScript 自动将原语转换为 String 对象，因此可以将 String 对象方法用于原语字符串。在原始字符串上调用方法或发生属性查找的上下文中，JavaScript 将自动包装字符串原始并调用方法或执行属性查找。

（来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)）

# yql - 如何在 YQL 中获取响应字段列表

> ID：13958731
> 
> 赞同：0
> 
> 时间：2012-12-19T18:27:10.007
> 
> 标签：yql

给定表格 answers.getquestion; 我的印象是“desc answers.getquestion”会提供一个用于查询answers.getquestion的所有可能响应字段的列表。相反，它提到 question_id 作为必填字段。

我在哪里/如何获得类似[http://developer.yahoo.com/answers/V1/getQuestion.html](http://developer.yahoo.com/answers/V1/getQuestion.html)在响应字段下提到的列表？另外，我在哪里可以看到请求中的映射标识 question_id 是响应中的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:50:45.513

在 YQL 中，“desc”命令给出了表格的简短摘要（参考：[YQL 文档](http://developer.yahoo.com/yql/guide/statement_summary.html)）。在您的示例中，请求[`desc answers.getquestion`](http://developer.yahoo.com/yql/console/?q=desc%20answers.getquestion)显示有关此表的一些简单信息：

```
<table hash="2143dbc888c9ccf3daac6778d0f57a32"
    name="answers.getquestion" security="ANY">
    <meta>
        <author>James Broad</author>
        <documentationURL>http://developer.yahoo.com/answers/V1/getQuestion.html</documentationURL>
        <sampleQuery>select * from answers.getquestion where question_id="20090526102023AAkRbch"</sampleQuery>
    </meta>
    <request>
        <select>
            <key name="appid" private="true" type="xs:string"/>
            <key name="question_id" required="true" type="xs:string"/>
        </select>
    </request>
</table> 
```

对于您关于响应字段的问题，它们将直接来自 Yahoo! 答案[获取问题 API 调用](http://developer.yahoo.com/answers/V1/getQuestion.html)。YQL 表只是底层 API 的包装器，因此结果将简单地通过 YQL 流回。

例如，您可以[`select * from answers.getquestion where question_id="1005120800412"`](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20answers.getquestion%20where%20question_id%3D%221005120800412%22)在 YQL 控制台中查看结果：

```
<Question xmlns="urn:yahoo:answers" id="1005120800412" type="Answered">
    <Subject>Why is there no TITLE tag in the header of answers.yahoo.com?</Subject>
    <Content>Come on, you guys.  It's not valid HTML if there's no title. :) Correction: there's no TITLE tag in any of the edit screens, including the one I'm using to add these details. Sorry, my bad.</Content>
    <Date>2005-12-08 08:22:33</Date>
    <Timestamp>1134058953</Timestamp>
    etc.
</Question> 
```

# cmake - 使用 CMake 链接 GLEW

> ID：13958733
> 
> 赞同：3
> 
> 时间：2012-12-19T18:27:16.677
> 
> 标签：cmake, glew

我的项目依赖于 GLEW 并且是用 CMake 构建的，所以我从这里[http://code.google.com/p/nvidia-texture-tools/source/browse/trunk/cmake/FindGLEW.cmake 获取了 FindGLEW.cmake？ r=96](http://code.google.com/p/nvidia-texture-tools/source/browse/trunk/cmake/FindGLEW.cmake?r=96)并写`find_package(GLEW REQUIRED)`在我的 CMakeLists.txt 中。问题是我正在使用集群 PC，有几个版本的 GLEW 可用。一个版本被存储在`/usr/lib`其中不是最新的。最新版本存储在`/opt/local/lib64`. 这是我要链接的版本。所以我在 GLEW_LIBRARY 路径下添加了 FindGLEW.cmake 的路径。问题是makefile总是链接到旧版本，但我需要最新版本（1.7）来使用类似的东西`GL_PATCHES`，`GL_PATCH_PARAMETERS`等等。我能知道如何强制 CMake 使用较新的版本，就像 FindBoost.cmake 的情况一样。一种解决方案是删除旧的，但这不是一种选择。我还更改了 GLEW_LIBRARY 列表中路径的顺序，但没有成功。

在我刚刚写`LDDFLAGS = -L/opt/local/lib64 -lGLEW`的旧 Makefile 中，路径绝对清晰，但现在使用 CMake 我想使用查找功能，但想要更喜欢特定版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:18:46.857

我使用它静态链接到特定位置的自定义编译 GLEW 库：

```
#GLEW libraries
add_library(glew_static STATIC IMPORTED)
set_target_properties(glew_static PROPERTIES
    IMPORTED_LOCATION /home/ryan/DevLibrary/glew-1.9.0/lib/libGLEW.a)
target_link_libraries(smolder glew_static) 
```

有了这个，你可以删除

```
find_package(GLEW REQUIRED) 
```

您也可以将它与共享库一起使用，只需从 add_library 中删除 STATIC 关键字。

# php - ZF2 中的 Zend_Db_Table_Abstract::createRow()

> ID：13958736
> 
> 赞同：3
> 
> 时间：2012-12-19T18:27:27.503
> 
> 标签：php, database, zend-framework2

在 ZF1 中，有一个`Zend_Db_Table_Abstract::createRow()`创建新空白行的功能。然后可以操作此新行并将其存储在表中。使用`rowID`自动增量自动设置，并且使用数据库模式中的默认值填充值。

我怎样才能在**ZF2**中做到这一点？有替代品`Zend_Db_Table_Abstract::createRow()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:39:53.520

挖掘 ZF2 源代码，我发现了如何取回原型。这深受`Zend\Db\TableGateway\AbstractTableGateway::executeSelect()`和的启发`Zend\Db\ResultSet\ResultSet`。为方便起见，我在 AbstractMapper 中使用此方法。正如您可能已经猜到的那样，这只适用于`ResultSet`（而不是`HydratingResultSet`）。但我想这也是你的情况，否则你不需要这样的方法。

```
<?php

namespace Application\Mapper;

use Zend\Db\TableGateway\TableGateway;

class AbstractMapper
{
    /**
     * @var \Zend\Db\TableGateway\TableGateway 
     */
    protected $tableGateway;

    public function __construct(TableGateway $tableGateway)
    {
        $this->tableGateway = $tableGateway;
    }

    /**
     * Create and returns a new row which is not yet saved in database
     * @return AbstractModel
     */
    public function createRow()
    {
        $resultSet = $this->tableGateway->getResultSetPrototype();
        $newRow = clone $resultSet->getArrayObjectPrototype();

        return $newRow;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:36:35.570

您可以使用 TableGateway：

```
$table= new TableGateway('users', $adapter);
$rowset = $table->insert(array('username' => 'bob')); 
```

# wso2 - 无法将 WSO2 JAX-RS 服务添加/导入 StratosLive 应用程序服务器

> ID：13958742
> 
> 赞同：3
> 
> 时间：2012-12-19T18:28:04.027
> 
> 标签：wso2

我的本地计算机上安装了 WSO2 应用程序服务器，版本 5.0.1。

我创建了一个 JAX-RS 服务并在本地对其进行了测试。

WAR 文件已成功构建并部署到本地 Application Server。当我登录到本地应用程序服务器管理控制台时，我看到它在应用程序下显示为类型 JaxWebApp，并且在操作列下列出了“查找服务”。

我有一个 StratosLive 订阅，我正在尝试将此 JAX-RS 服务作为 WAR 文件添加/上传到 StratosLive 应用程序服务器。StratosLive 应用程序服务器的管理控制台是不同的。在 Main 选项卡上，它显示 Web 应用程序和 Web 服务，而不是我在本地运行的 5.0.1 应用程序服务器的管理控制台上的应用程序和服务。

因此，我没有看到将我的 JAX-RS 服务添加/上传为 WAR 文件的选项。唯一的选择是添加一个 Web 应用程序 WAR 文件（我试过了，但它不能正常工作 - 认为它是一个 Web 应用程序）或 JAX-WS Web 服务作为带注释的 JAR 文件。

看起来我使用的 StratosLive 应用程序服务器可能与我在本地使用的 5.0.1 版本不同（可能更早）。

是否有其他人能够将 JAX-RS 服务添加/上传到 StratosLive 应用程序服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:11:29.597

通常将产品的 StratosLive 版本升级到最新的独立产品版本需要很短的时间。现在 StratosLive 已升级到最新的 Application Server 版本，您应该能够在 StratosLive 上运行上述用例而不会出现任何问题。

# jquery - jQuery 在 Twitter Bootstrap 模式中显示/隐藏

> ID：13958743
> 
> 赞同：2
> 
> 时间：2012-12-19T18:28:05.157
> 
> 标签：jquery, forms, jquery-selectors, twitter-bootstrap

这是一些在普通页面上工作但在引导模式中不起作用的代码，知道为什么这可能不起作用吗？

```
<script type="text/javascript">
$(document).ready(function(){
 $('.box').hide();
  $('#dropdown').change(function() {
    $('.box').hide();
    $('#div' + $(this).val()).show();
 });
});
</script>
<form>
 <select id="dropdown" name="dropdown">
  <option value="0">Choose</option>
  <option value="area1">DIV Area 1</option>
  <option value="area2">DIV Area 2</option>
  <option value="area3">DIV Area 3</option>
 </select>
</form>
<div id="divarea1" class="box">DIV Area 1</div>
<div id="divarea2" class="box">DIV Area 2</div>
<div id="divarea3" class="box">DIV Area 3</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:31:59.920

因为在`$(document).ready()`加载父页面时已经触发了。您应该监听引导模式的`shown`事件。我假设您在模态内容中使用 AJAX？

# javascript - Javascript 等价于 Ruby Time.parse

> ID：13958750
> 
> 赞同：0
> 
> 时间：2012-12-19T18:28:29.733
> 
> 标签：javascript, ruby

我允许用户以他们喜欢的任何格式输入日期时间，只要 Ruby 的 Time.parse 方法可以处理它。现在我需要在 javascript 中比较这些日期时间。是否有任何与 Ruby 的 Time.parse 方法等效的 JavaScript 方法？

我需要一些可以解析的东西，例如“2012 年 10 月 13 日上午 8:15”。我尝试了 datejs，但它无法处理“at”字。我真的更喜欢只需要一个函数调用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:53:26.480

JavaScript 语言对于它接受的日期格式很挑剔（并且实现方式各不相同），因此不使用库就没有希望。

[Date.js](http://www.datejs.com/)很容易成为您的最佳选择；但是，正如您所指出的，肯定会有一些格式对用户来说非常有意义，但图书馆却无法预料到。

作为解决方法，我建议您将 Date.js 解析器包装在您必须维护的自定义清理函数中：

```
// using Date.js
function parseDate(str) {
  var wordsToRemove = ['on', 'at'] // ...
    , regex = new RegExp('\\b(' + wordsToRemove.join('|') + ')\\b', 'g');
  return Date.parse(str.replace(regex, ''));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:43:46.117

这有点晚了，但希望它仍然会有所帮助：

如果您只解析美国语言环境日期字符串，请查看[Sherlock.js](https://github.com/Tabule/Sherlock)。

唯一的限制是它不支持指定年份或过去日期。它可以解析“2012 年 10 月 13 日上午 8:15”，但它将返回 2013 年 10 月 13 日上午 8:15 的日期对象，因为它总是向前看。您可以编写一些正则表达式，例如`/\b20\d\d\b/`在需要时自己从字符串中解析出年份。

*披露：*我是 Sherlock.js 的创建者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:32:33.107

[Datejs](http://www.datejs.com/)有一个非常令人印象深刻的东西来处理 javascript 中的日期

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:34:41.707

试试[http://momentjs.com/](http://momentjs.com/)，有史以来最好的时间库！

# java - Java中不同枚举类联合的switch语句

> ID：13958754
> 
> 赞同：2
> 
> 时间：2012-12-19T18:29:14.557
> 
> 标签：java, enums, switch-statement

**我有两个枚举类，比如 Enum1 和 Enum2：**

```
enum Enum1 {ONE, TWO, THREE}
enum Enum2 {FOUR, FIVE} 
```

**我有这样的方法：**

```
public <E extends Enum<E>> method (E arg) {
    switch (arg) {    // Here is the compile error -- Cannot switch
                      // on a value of type E. Only convertible int
                      // values, strings or enum variables are permitted

                      // (And of course, all the cases are incorrect
                      // because the enum set is unknown)
        case ONE:
            // do something
        case TWO:
            // do something
        case THREE:
            // do something
        case FOUR:
            // do something
        case FIVE:
            // do something
        default:
            // do something
    }
} 
```

* * *

## 那么是否可以切换通用枚举类型的值？

* * *

有一种方法可以将其更改为字符串（仅适用于 JDK7）：

```
public <E extends Enum<E>> method (E arg) {
    switch (arg.name()) {
        case "ONE":
            // do something
        case "TWO":
            // do something
        case "THREE":
            // do something
        case "FOUR":
            // do something
        case "FIVE":
            // do something
        default:
            // do something
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:50:15.427

你不能做你正在尝试的事情。一方面，`enum`开关实际上是`ordinal()`枚举中开关的简写。因此，即使您可以让开关识别您的“联合枚举”类型，该语句也有重复的`case`分支。（例如，`ONE`两者`FOUR`都有序数 0。）

一种方法可能是将操作移动到枚举本身中。然后，您可以让每种`enum`类型实现一个通用接口：

```
interface Actor {
    void doSomething();
}

enum Enum1 implements Actor {
    ONE {
        public void doSomething() { . . . }
    },
    TWO {
        public void doSomething() { . . . }
    },
    THREE {
        public void doSomething() { . . . }
    }
}

enum Enum2 implements Actor {
    FOUR {
        public void doSomething() { . . . }
    },
    FIVE {
        public void doSomething() { . . . }
    }
} 
```

然后你可以实现你的方法来简单地将处理委托给actor：

```
public void method(Actor actor) {
    if (actor == null) {
         // default action
    } else {
        actor.doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:35:59.903

您需要在 switch 语句之前将枚举转换为特定类型（因此每种类型都有一个单独的 switch 语句）。也就是说，这不是最好的想法。通过重构代码，您可能会找到更好的解决方案，这样您就不需要这样做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T09:54:44.300

你提到的开关显然不起作用。

我有一个（非常奇怪的）替换：创建一个“帮助枚举”，其中包含列出的所有值，并有一个`Map<Request<Enum<?>, HelperEnum>`，如下所示：

```
private enum HelperEnum {
       ONE(Enum1.ONE),
       TWO(Enum1.TWO),
       THREE(Enum1.THREE),
       FOUR(Enum2.FOUR),
       FIVE(Enum2.FIVE);

       private Enum<?> source;

       private HelperEnum(Enum<?> source) {
           this.source = source;
       }

       private static Map<Enum<?>, HelperEnum> map;

       public static HelperEnum lookUp(Enum<?> source) {
           if (map == null) {
               map = Arrays.stream(HelperEnum.values())
                   .collect(Collectors.toMap(x -> x.source, x -> x));
           }
           return map.get(source);
       } 
```

（未经测试！）

这样你就可以做到

```
switch(HelperEnum.lookUp(a_request)){
    case ONE: ....
    case TWO: ....
    case THREE: ....
    case FOUR: ....
    case FIVE: ....
} 
```

（模拟版本首次[在这里](https://stackoverflow.com/a/41891051/296974)发布）

有一个由所讨论的枚举实现的通用接口会很有帮助，但这个接口可能也可以工作。

# vb.net - 应用程序不断崩溃，隔离存储

> ID：13958756
> 
> 赞同：0
> 
> 时间：2012-12-19T18:29:15.303
> 
> 标签：vb.net, windows-phone-7, crash

很长一段时间以来，我在一页中使用了大约 40 个复选框和 40 个按钮。复选框的每个状态都保存在 IO 中。我用相同数量的复选框和按钮制作了另一个页面，所以我想了一点关于更快的页面加载。突然……我使用了模拟器，然后……我的应用程序在 50% 的情况下在启动这个大页面时崩溃了。（40 个复选框+40 个按钮）我将它分成 4 页（每页有 10 个复选框+10 个按钮），但问题一直在发生。第二次启动此页面时出现错误。实际上，在第 1 页中，一切正常。

```
System.ArgumentOutOfRangeException is the error 
```

排队 ：

```
 cb11.IsChecked = cbStates(10) 
```

这是代码：

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Net
Imports System.Windows
Imports System.Windows.Controls
Imports System.Windows.Documents
Imports System.Windows.Input
Imports System.Windows.Media
Imports System.Windows.Media.Animation
Imports System.Windows.Shapes
Imports Microsoft.Phone.Controls
Partial Public Class Weidersix2
    Inherits PhoneApplicationPage
    Private cbStates As List(Of Boolean)
    ' Constructor
    Public Sub New()
        InitializeComponent()
        cbStates = New List(Of Boolean)()
    End Sub
    Protected Overrides Sub OnNavigatedTo(e As System.Windows.Navigation.NavigationEventArgs)
        MyBase.OnNavigatedTo(e)
        cbStates = DB.readStates()
        If cbStates.Count > 0 Then
            cb11.IsChecked = cbStates(10)
            cb12.IsChecked = cbStates(11)
            cb13.IsChecked = cbStates(12)
            cb14.IsChecked = cbStates(13)
            cb15.IsChecked = cbStates(14)
            cb16.IsChecked = cbStates(15)
            cb17.IsChecked = cbStates(16)
            cb18.IsChecked = cbStates(17)
            cb19.IsChecked = cbStates(18)
            cb20.IsChecked = cbStates(19)
        Else
            If cb11.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb12.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb13.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb14.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb15.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb16.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb17.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb18.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb19.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If
            If cb20.IsChecked = True Then
                cbStates.Add(True)
            Else
                cbStates.Add(False)
            End If

        End If
    End Sub
    Protected Overrides Sub OnNavigatedFrom(e As System.Windows.Navigation.NavigationEventArgs)
        MyBase.OnNavigatedFrom(e)
        DB.saveStates(cbStates)
    End Sub
    Private Sub cb11_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(10) = True
        End If
    End Sub

    Private Sub cb11_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(10) = False
        End If

    End Sub
    Private Sub cb12_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(11) = True
        End If
    End Sub

    Private Sub cb12_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(11) = False
        End If

    End Sub
    Private Sub cb13_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(12) = True
        End If
    End Sub

    Private Sub cb13_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(12) = False
        End If

    End Sub
    Private Sub cb14_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(13) = True
        End If
    End Sub

    Private Sub cb14_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(13) = False
        End If

    End Sub
    Private Sub cb15_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(14) = True
        End If
    End Sub

    Private Sub cb15_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(14) = False
        End If

    End Sub
    Private Sub cb16_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(15) = True
        End If
    End Sub

    Private Sub cb16_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(15) = False
        End If

    End Sub
    Private Sub cb17_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(16) = True
        End If
    End Sub

    Private Sub cb17_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(16) = False
        End If

    End Sub
    Private Sub cb18_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(17) = True
        End If
    End Sub

    Private Sub cb18_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(17) = False
        End If

    End Sub
    Private Sub cb19_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(18) = True
        End If
    End Sub

    Private Sub cb19_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(18) = False
        End If

    End Sub
    Private Sub cb20_Checked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(19) = True
        End If
    End Sub

    Private Sub cb20_Unchecked(sender As Object, e As RoutedEventArgs)
        If cbStates.Count > 0 Then
            cbStates(19) = False
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:00:43.483

听起来您没有保存那么多状态。尝试将您的逻辑更改为：

```
 If cbStates.Count >= 20 Then
        cb11.IsChecked = cbStates(10) 
```

您正在尝试读取一个不存在的状态。

# jquery - 轻松的ajax请求

> ID：13958757
> 
> 赞同：3
> 
> 时间：2012-12-19T18:29:16.733
> 
> 标签：jquery, jax-rs, resteasy, cors

我有一个 RestEasy api，我需要向移动客户端提供对所有 http 方法的访问，所有这些请求都必须通过 ajax 发送。

这是客户端代码的示例：

```
var data = {
   login: 'usertest@gmail.com',
   password: '123456'
 };

 $.ajax({
   url: 'http://1.1.1.3:8080/api/admin',
   type: 'POST',
   contentType : 'application/json',
   dataType: "json",
   data: JSON.stringify(data),
   success: function(){
     console.log(arguments);
   },
   error: function(){
     console.log('error')
   }
 }); 
```

而这里的服务器：

```
@POST
@Consumes("application/json")
@Produces("application/json")
public Response doLogin(User user) {...} 
```

这是错误：

```
XMLHttpRequest cannot load http://1.1.1.3:8080/api/admin. Origin http://stackoverflow.com is not allowed by Access-Control-Allow-Origin. 
```

当我从 Localhost 请求时，这是来自服务器的标题答案

```
Access-Control-Allow-Cred...    true
Access-Control-Allow-Orig...    http://1.1.1.3:8080 //request sent from http://1.1.1.3:8080
Access-Control-Expose-Hea...    X-Test-2, X-Test-1
Content-Length  1136
Content-Type    text/html;charset=utf-8
Date    Wed, 19 Dec 2012 17:54:19 GMT
Server  Apache-Coyote/1.1 
```

PS：通过通常的 http 请求一切正常。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:49:23.137

我在朋友的帮助下找到了它......我正在使用来自这里[http://software.dzhuvinov.com](http://software.dzhuvinov.com)的 Cors 过滤器库，我在 web.xml 中缺少一个参数，我修复了将“Origin”添加到：

```
 <init-param>
        <param-name>cors.supportedHeaders</param-name>
        <param-value>Origin, Accept, Content-Type,
            X-Requested-With</param-value>
    </init-param> 
```

# java - 如何使用 Java ClassLoader 打开外部 H2DB 驱动程序？

> ID：13958758
> 
> 赞同：4
> 
> 时间：2012-12-19T18:29:21.913
> 
> 标签：java, classloader, h2

我想在我的应用程序加载时加载 h2 数据库驱动程序。我使用 URLClassLoader 将外部库加载到类路径中，但出现以下错误：

```
19:25:56 [SEVERE] java.sql.SQLException: No suitable driver found for jdbc:h2:x\y\store.h2db
19:25:56 [SEVERE]       at java.sql.DriverManager.getConnection(Unknown Source)
19:25:56 [SEVERE]       at java.sql.DriverManager.getConnection(Unknown Source) 
```

我使用此代码加载我的库：

```
File myJar = new File("./lib/h2.jar");
URL url = myJar.toURL();  
URL[] urls = new URL[]{url};
URLClassLoader cl = new URLClassLoader(urls, this.getClass().getClassLoader());
Driver drv = (Driver) Class.forName("org.h2.Driver", true, cl).newInstance();
DriverManager.registerDriver(drv); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:13:32.913

**更新：**

我找到了解决方案，使用以下代码加载 JAR 文件或类。

```
private void loadExternalDriver(File file) throws Exception {
    Method method = URLClassLoader.class.getDeclaredMethod("addURL", new Class[]{URL.class});
    method.setAccessible(true);
    method.invoke(ClassLoader.getSystemClassLoader(), new Object[]{file.toURI().toURL()});
} 
```

在我的例子中：

```
File driver = new File("./lib/h2.jar");
this.loadExternalDriver(driver);
Class.forName("org.h2.Driver"); 
```

它工作得很好。谢谢你的帮助。

# java - 在小程序中嵌入 Jzy3D

> ID：13958759
> 
> 赞同：0
> 
> 时间：2012-12-19T18:29:26.780
> 
> 标签：java, 3d, applet, jogl, jzy3d

我正在尝试制作一个显示可操作的 Jzy3D 图形的小程序。目前我已经设法让它显示图表，但无论如何我都无法影响它；这是有道理的，因为小程序目前不寻找任何用户输入。

我应该如何获取用户输入（鼠标移动、点击等）？我想我可以尝试创建一个信使类，它接收小程序输入并将其发送到 Jzy3D，然后 Jzy3D 进行移动并对其进行处理，但这似乎非常复杂。~~查看[社区讨论板](https://groups.google.com/forum/#!searchin/jzy3d/applet/jzy3d/jhgtHmq8jpc/8Uxg7DGMvoMJ)，建议使用 JOGLAppletLaucher。是为了绕过这个问题吗？如果是这样，它应该怎么做？~~

**编辑：**我相信我现在理解了 JOGLAppletLauncher（及其继任者 JNLPAppletLauncher）的意义，但如何传输用户输入的问题仍然存在。有任何想法吗？

我当前的代码：

```
package daniel.work;

import java.applet.Applet;

import javax.swing.JApplet;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

import com.sun.opengl.util.JOGLAppletLauncher;

public class SimpleApplet extends JApplet {

  public void start(){
      try{
          SwingUtilities.invokeAndWait(new Runnable(){
              public void run(){

                  add(ScatterCanvas.generateCanvas());

              }
          });
      }
      catch(Exception e){
          System.out.println(e);
      }
  }
} 
```

和

```
package daniel.work;

import java.awt.Canvas;

import org.jzy3d.chart.Chart;
import org.jzy3d.colors.Color;
import org.jzy3d.demos.AbstractDemo;
import org.jzy3d.demos.Launcher;
import org.jzy3d.maths.Coord3d;
import org.jzy3d.plot3d.primitives.Scatter;

public class ScatterCanvas extends AbstractDemo{

    public static Canvas generateCanvas(){
            // Create the dot cloud scene and fill with data
            int size = 2000;
            float x;
            float y;
            float z;
            float a;

            Coord3d[] points = new Coord3d[size];
            Color[]   colors = new Color[size];

            for(int i=0; i<size; i++){
                    x = (float)Math.random() - 0.5f;
                    y = (float)Math.random() - 0.5f;
                    z = (float)Math.random() - 0.5f;
                    points[i] = new Coord3d(x, y, z);
                    a = 0.25f + (float)(points[i].distance(Coord3d.ORIGIN)/Math.sqrt(1.3)) / 2;
                    colors[i] = new Color(x, y, z, a);
            }

            Scatter scatter = new Scatter(points, colors);
            chart = new Chart();
            chart.getScene().add(scatter);
            return (Canvas) chart.getCanvas();
    }

    protected static Chart chart;

    @Override
    public void init() throws Exception {
        // TODO Auto-generated method stub

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:40:09.990

知道了！这是我的代码。我还更改了我的 generateScatter 以现在返回图表“返回图表”，而不是 ICavnas

```
package myjogl;

import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.SwingUtilities;

import org.jzy3d.chart.Chart;
import org.jzy3d.chart.controllers.mouse.ChartMouseController;
import org.jzy3d.chart.controllers.thread.ChartThreadController;
import org.jzy3d.plot3d.rendering.canvas.ICanvas;

@SuppressWarnings("serial")
public class JzyApplet extends JApplet implements ActionListener{

private Chart chart = null;
private ICanvas canvas = null;

public void init(){
    try{
        SwingUtilities.invokeAndWait(new Runnable(){
            public void run(){
                chart = ScatterCanvas.generateCanvas(); //this just returns a chart object with a scatter object
                canvas = chart.getCanvas();

                add((Component) canvas);                
            }
        });     
    }
    catch(Exception e){
        System.out.println(e);
    }   

    ChartMouseController mouse   = new ChartMouseController();

    chart.addController(mouse);

    ChartThreadController thread = new ChartThreadController();
    mouse.addSlaveThreadController(thread);
    chart.addController(thread);

    thread.start();

}

@Override
public void actionPerformed(ActionEvent e) {}

public void zoom(){
    float value = canvas.getView().getBounds().getXmax()-10;
    canvas.getView().getBounds().setXmax(value);
    canvas.getView().shoot();
}

} 
```

# android - Viewflipper onclick 不起作用

> ID：13958766
> 
> 赞同：0
> 
> 时间：2012-12-19T18:30:08.643
> 
> 标签：android

场景：我有一个视图 lobby4.xml，其中有一个 ViewFlipper 和两个 RelativeLayout。两个相对布局都有一个名为 buttonTOG 的按钮，我想用它来从一个相对布局翻转到另一个。这是代码：

```
 @Override
public void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
  setContentView(R.layout.lobby4);
  Context context = getApplicationContext();
  final ViewFlipper vf = (ViewFlipper) findViewById( R.id.viewFlipper );
  bTOG=(Button)findViewById(R.id.buttonTOG);
  final Activity the_a = this;
  final Context static_ctx = this.getApplicationContext();
    bTOG.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
          String buttons=bTOG.getText().toString();
          bTOG=(Button)findViewById(R.id.buttonTOG);
          String mystring = getResources().getString(R.string.Playbyemail);
          if( buttons!=null && buttons.compareTo(mystring)==0){
              vf.showPrevious();  
          }else{
              vf.showNext();  
          }

      }
    });

} 
```

当我第二次单击 bTOG 时，没有 onClick 事件。所以我想我必须注册onclick？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:03:27.847

应该足够了：

```
@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.lobby4);
final ViewFlipper vf = (ViewFlipper) findViewById( R.id.viewFlipper );
bTOG=(Button)findViewById(R.id.buttonTOG);
  bTOG.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
      if(vf.getDisplayedChild() == 0){
vf.setDisplayedChild(1);
}else{
vf.setDisplayedChild(0)
}

  }
 });

} 
```

# android - 使用多行线性布局动态显示 ImageView

> ID：13958767
> 
> 赞同：1
> 
> 时间：2012-12-19T18:30:12.463
> 
> 标签：android, imageview, android-linearlayout

我将动态地将 ImageView 放入 LinearLayout 中（在代码中）我只在我的 XML 中定义了这个 LinearLayout：

```
<LinearLayout
   android:id="@+id/pictures"
   android:orientation="horizontal"
   android:singleLine="false"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
</LinearLayout> 
```

目前，LinearLayout 仅显示 1 行图像。剩下的图像不见了。我应该在代码中放入什么，以便 LinearLayout 自动跳转到新行并加载所有图像？例如：4 行每行 3 张图像？

[图像] [图像] [图像] [图像]
[图像] [图像] [图像] [图像]
[图像] [图像] [图像] [图像]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:02:40.990

您可能应该使用`ListView`而不是`LinearLayout`. 因为`ListView`为您提供了添加相同类型的`View`s 作为`Item`内部。

做事，

1) [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)
2) [http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/](http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/)
3) [http ://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html](http://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html)
4) [http://www.androidhive.info/2012/02/android-custom-listview-with-图像和文本/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# ruby-on-rails - rails：使用特定的 html 视图呈现模型集合

> ID：13958771
> 
> 赞同：6
> 
> 时间：2012-12-19T18:30:32.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对rails有以下简单的问题。

假设我有一个模型用户。在一个视图中，如果我这样做：

```
<%= render User.all %> 
```

将为每个用户调用和打印views/user/_user.html.erb 中的文件视图。

如何更改它以使用特定视图？我需要类似的东西：

```
<%= render :data=>User.all :template=>"user/_user_2ndview.html"%> 
```

有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T18:33:38.487

您可以使用以下`collection`选项：

```
<%= render :collection => User.all, :partial => "users/user2ndview", 
           :as => :user %> 
```

视图必须放在views/users/_user2ndview

有关更多详细信息，请参阅[有关渲染集合的 Rails 指南](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections)。

# java - 在单独的线程中停止可运行对象

> ID：13958774
> 
> 赞同：4
> 
> 时间：2012-12-19T18:30:46.173
> 
> 标签：java, android, multithreading, runnable

嘿，我目前的 android 应用程序有问题。我正在通过实现 Executor 接口启动一个额外的线程：

```
class Flasher implements Executor {
    Thread t;
   public void execute(Runnable r) {
     t = new Thread(r){
     };
     t.start();
   }
 } 
```

我像这样开始我的 Runnable：

```
flasherThread.execute(flashRunnable); 
```

但我怎么能阻止它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:52:19.517

好的，这只是非常基本的线程 101，但让我们再举一个例子：

老派线程：

```
class MyTask implements Runnable {
    public volatile boolean doTerminate;

    public void run() {
        while ( ! doTerminate ) {
            // do some work, like:
            on();
            Thread.sleep(1000);
            off();
            Thread.sleep(1000);
        }
    }
} 
```

然后

```
MyTask task = new MyTask();

Thread thread = new Thread( task );

thread.start();

// let task run for a while...

task.doTerminate = true;

// wait for task/thread to terminate:
thread.join();
// task and thread finished executing 
```

编辑：

刚刚偶然发现这篇关于如何停止线程的内容非常丰富的[文章。](http://www.javaspecialists.eu/archive/Issue056.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:38:28.733

不确定实施`Executor`是一个好主意。我宁愿使用 Java 提供的执行器之一。它们允许您通过界面控制您的`Runnable`实例：`Future`

```
ExecutorService executorService = Executors.newSingleThreadExecutor();
Future<?> future = executorService.submit(flashRunnable);
...
future.cancel(true); 
```

当您的程序不再需要异步执行时，还要确保`ExecutorService`通过调用来释放正在消耗的资源。`executorService.shutdown()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T20:15:54.907

我建议使用 ExecutorService 和 Furure 对象，它可以让您控制由执行程序创建的线程。像下面的例子

```
ExecutorService executor = Executors.newSingleThreadExecutor();
Future future = executor.submit(runnabale);
try {
     future.get(2, TimeUnit.SECONDS);
} catch (TimeoutException ex) {
     Log.warn("Time out expired");
} finally {
     if(!future.isDone()&&(!future.isCancelled())) 
        future.cancel(true);

    executor.shutdownNow();
} 
```

此代码表示可运行对象将在 2 秒后强制终止。当然，您可以随意处理您的 Future 对象，并根据您的要求终止它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:39:11.417

您应该查看 ExecutorService ，而不是实现自己的[Executor](http://developer.android.com/reference/java/util/concurrent/ExecutorService.html)。ExecutorService 有一个关闭方法，它：

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。

# javascript - 标记未显示在我的地图上

> ID：13958776
> 
> 赞同：1
> 
> 时间：2012-12-19T18:30:54.520
> 
> 标签：javascript, google-maps, google-maps-api-3, infobubble

我正在尝试根据数据库中的事件添加标记，并且在同一位置发生事件的情况下，为该新事件向 infoBubble 添加一个选项卡。我似乎无法弄清楚为什么标记（和我的 infoBubbles）没有出现在我的地图上。

**这是我的代码：**

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpQfirqx48owNbdu6ZF01pTr3Lt-tjYQI&sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble.js"></script>
<script type="text/javascript">

 var location_icon = new google.maps.MarkerImage('../images/FAFSA_Logo_icon.png');  
 var map;
 var markersArray= [];
 var infobubblesArray = [];
  function load() {

    map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(33.961586, -106.008728),
        zoom: 6,
        mapTypeId: 'roadmap'
    });

    downloadUrl("../site_parts/mapmysql.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("event_name");
        var address = markers[i].getAttribute("venue_address");
        var city = markers[i].getAttribute("venue_city");
        var state = markers[i].getAttribute("venue_state");
        var zip = markers[i].getAttribute("venue_zip");
        var website = markers[i].getAttribute("venue_website");

        var date = markers[i].getAttribute("event_date");
        var start_time = markers[i].getAttribute("event_start_time");
        var end_time = markers[i].getAttribute("event_end_time");
        var room = markers[i].getAttribute("event_room");
        var cord = markers[i].getAttribute("ec_fname") + " " + markers[i].getAttribute("ec_lname");
        var cord_email = markers[i].getAttribute("ec_email");
        var cord_pnumber = markers[i].getAttribute("ec_pnumber");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("venue_lat")),
            parseFloat(markers[i].getAttribute("venue_lng")));
        var html = "<b>" + name + "</b> <br/>" + address +", "+ city +", "+ state +", "+ zip + "<br/>" +"<b>Date </b> "+ date +"<br/>" +"<b>Time </b> "+ start_time + " - "+ end_time +"<br/>" + "<b>Room </b>" + room + "<br/>"+ "<b> Cordinator </b>" + cord + " " + "<a href='mailto:" + cord_email + "?Subject=FAFSA%20FFA%20Event'>" + cord_email + "</a> " + cord_pnumber;
        var icon =  location_icon;

            for (var x = 0; x < markersArray.length; x++){
                if (markersArray[x].getPosition() == point){
                    infobubblesArray[x].addTab(date, html);
                    break;
                }  
                if (x < (markersArray.length -1)){continue} else{
                    var newM = x+1;
                    markersArray[newM] = new google.maps.Marker({map: map, position: point, icon: icon});
                    infobubbleArray[newM] = new InfoBubble({maxWidth: 400, borderWidth: 2});
                    bindinfoBubble(markersArray[newM], map, infobubblesArray[newM])
                    infobubblesArray[newM].addTab(date, html);
                  }
            }  
        }
    });
  }

function bindinfoBubble(marker, map, infoBubble) {
  google.maps.event.addListener(marker, 'click', function() {

    infoBubble.open(map, marker);

  });
}

function downloadUrl(url,callback) {
 var request = window.ActiveXObject ?
    new ActiveXObject('Microsoft.XMLHTTP') :
    new XMLHttpRequest;

request.onreadystatechange = function() {
    if (request.readyState == 4) {
    request.onreadystatechange = doNothing;
    callback(request, request.status);
    }
};

request.open('GET', url, true);
request.send(null);
}

function doNothing() {} 

</script> 
```

**XML**

```
<markers>
<marker event_name="Atrisco Heritage Academy" venue_address="10800 Dennis Chavez             Boulevard" venue_city="Albuquerque" venue_state="New Mexico" venue_zip="87121"         venue_website="http://ahahighschool.com" venue_lat="35.022449" venue_lng="-106.748777"             event_date="2013-01-17" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Bernalillo High School" venue_address="250 Isidro Sanchez Rd" venue_city="Bernalillo" venue_state="New Mexico" venue_zip="87004" venue_website="http://www.bernalillo.bps.k12.nm.us/education/school/school.php?sectionid=3" venue_lat="35.321560" venue_lng="-106.541828" event_date="2013-01-22" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Bernalillo High School" venue_address="250 Isidro Sanchez Rd" venue_city="Bernalillo" venue_state="New Mexico" venue_zip="87004" venue_website="http://www.bernalillo.bps.k12.nm.us/education/school/school.php?sectionid=3" venue_lat="35.321560" venue_lng="-106.541828" event_date="2013-01-23" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Cibola High School" venue_address="1510 Ellison Drive" venue_city="Albuquerque" venue_state="New Mexico" venue_zip="87114" venue_website="http://www.cibolacougars.com" venue_lat="35.205190" venue_lng="-106.663214" event_date="2013-01-23" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Rio Rancho High School" venue_address="301 Loma Colorado N.E." venue_city="Rio Rancho" venue_state="New Mexico" venue_zip="87124" venue_website="http://rioranchohigh.rrps.net/" venue_lat="35.272536" venue_lng="-106.678116" event_date="2013-01-30" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Farmington high School" venue_address="2200 Sunset Ave." venue_city="Farmington" venue_state="New Mexico" venue_zip="87401" venue_website="http://fhs.fms.k12.nm.us/" venue_lat="36.749957" venue_lng="-108.204563" event_date="2013-02-04" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="Cimarron High School" venue_address="165 North Collison Avenue" venue_city="Cimarron" venue_state="NM" venue_zip="87714" venue_website="http://www.chsrams.org/" venue_lat="36.512275" venue_lng="-104.920166" event_date="2013-02-04" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
<marker event_name="West Mesa High School" venue_address="6701 Fortuna Road NW" venue_city="Albuquerque" venue_state="New Mexico" venue_zip="87121" venue_website="http://www.westmesamustangs.com" venue_lat="35.095882" venue_lng="-106.716171" event_date="2013-02-05" event_start_time="0" event_end_time="0" event_room="TBD" ec_fname="TBD" ec_lname="" ec_email="" ec_pnumber=""/>
</markers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T01:11:44.950

有不同的问题，最重要的是`for (var x = 0; x < markersArray.length; x++)`

您在此循环中创建标记，但最初标记数组为空，您将永远不会运行此循环。还有错别字，`infobubbleArray`应该是`infobubble**s**Array`

固定代码：

```
downloadUrl("../site_parts/mapmysql.php", function(data) {

    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    outer: for (var i = 0; i < markers.length; i++) {

           /* creation of the variables may stay here as it is */

            for (var x = 0; x < markersArray.length; x++){
                if (markersArray[x].getPosition().toString() == point.toString()){
                    infobubblesArray[x].addTab(date, html);                         
                    continue outer;
                }}

                var newM = markersArray.length;
                    markersArray[newM] = new google.maps.Marker({map: map, position: point});
                    infobubblesArray[newM] = new InfoBubble({maxWidth: 400, borderWidth: 2});
                    bindinfoBubble(markersArray[newM], map, infobubblesArray[newM])
                    infobubblesArray[newM].addTab(date, html);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:14:07.037

我找到了一个似乎有效的解决方案（除了在当前选项卡上方的一行中开始的选项卡），这是检查该问题的结束循环：

```
var x = 0;

while (x < (markersArray.length)){
  if (markersArray[x].getPosition().toString() == point.toString()){
  infobubblesArray[x].addTab(date, html);
  continue xmlLoop; /*to the outside loop for the xml sheet readthrough*/
  }x++;
}

var newM = markersArray.length;
markersArray[newM] = new google.maps.Marker({map: map, position: point, icon: icon});
infobubblesArray[newM] = new InfoBubble({maxWidth: 500, minHight: 600, borderRadius: 0});
bindinfoBubble(markersArray[newM], map, infobubblesArray[newM]);
infobubblesArray[newM].addTab(date, html); 
```

# java - Java - 在 GroupLayout 中混合组件大小

> ID：13958783
> 
> 赞同：5
> 
> 时间：2012-12-19T18:31:21.107
> 
> 标签：java, swing, components, grouplayout, preferredsize

我正在尝试为计算器 GUI 安排两组按钮。每个人都使用 GroupLayout 来制作它们。一组是数字（和“.”），另一组是操作按钮。这基本上是可行的，但如果其中一个按钮的长度是双倍的（例如我的操作集上的等号按钮），它会使其他按钮不符合要求。我将以操作集为例。有两列四行按钮。最后一行只有一个按钮 - 等于。我想让这个双倍长度延伸到两列。目前，当我希望第二列放在它上面时，它只是将第二列推到它的末尾。

这是布局的代码 - operLayout 是操作的布局名称，第一行是左右括号，第二行是 + 和 -，第三行是 * 和 /，最后一行是等于。每个按钮在其他地方都有一个 minimumSize 设置（它们都是相同的，除了 equals 是两倍长）。

```
operLayout.setAutoCreateGaps(true);
operLayout.setAutoCreateContainerGaps(true);
operLayout.setVerticalGroup(operLayout
        .createSequentialGroup()
        .addGroup(
operLayout.createParallelGroup(GroupLayout.Alignment.BASELINE).addComponent(leftBracket)
                            .addComponent(rightBracket))
            .addGroup(operLayout.createParallelGroup().addComponent(add).addComponent(subtract))
            .addGroup(operLayout.createParallelGroup().addComponent(multiply).addComponent(divide))
            .addGroup(operLayout.createParallelGroup().addComponent(equals)));
    operLayout.setHorizontalGroup(operLayout
            .createSequentialGroup()
            .addGroup(
                    operLayout.createParallelGroup().addComponent(leftBracket).addComponent(add)
                            .addComponent(multiply).addComponent(equals))
            .addGroup(
                    operLayout.createParallelGroup().addComponent(rightBracket).addComponent(subtract)
                            .addComponent(divide))); 
```

我理解为什么会发生这种情况，但我不确定如何解决。有简单的方法吗？还是我应该改变我做事的方式？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:41:09.647

**将`equals`组件放在其自己的平行水平组中。**

首先，确保在使用`GroupLayout`. 我发现这对于跟踪正在发生的事情绝对至关重要。

您看到您报告的行为的原因是因为等号与第一列按钮属于同一水平平行组的一部分。因此，当您将其设置为双倍宽度时，它会将第二列按钮推到右侧。这正是您告诉它要做的事情，因为您告诉它留在第一个并行组（列）中。

为了获得您想要的行为，您必须单独布局该按钮，与其他按钮平行。为此，您可以将其放入自己的并行组中。为了获得最佳行为，您可能还想对该组进行对齐。我想`GroupLayout.Alignment.CENTER`这就是你想要的。

另请注意，如果其中只有一个组件，则无需创建新组。只需添加该组件即可。

```
operLayout.setVerticalGroup(operLayout.createSequentialGroup()
    .addGroup(operLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
        .addComponent(leftBracket)
        .addComponent(rightBracket))
    .addGroup(operLayout.createParallelGroup()
        .addComponent(add)
        .addComponent(subtract))
    .addGroup(operLayout.createParallelGroup()
        .addComponent(multiply)
        .addComponent(divide))
    .addComponent(equals));
operLayout.setHorizontalGroup(operLayout.createParallelGroup()
    .addGroup(operLayout.createSequentialGroup()
        .addGroup(operLayout.createParallelGroup()
            .addComponent(leftBracket)
            .addComponent(add)
            .addComponent(multiply))
        .addGroup(operLayout.createParallelGroup()
           .addComponent(rightBracket)
           .addComponent(subtract)
           .addComponent(divide)))
    .addComponent(equals)); 
```

# jquery - Rails 3，如何构建 link_to :remote => true 突出显示和淡出已删除项目

> ID：13958784
> 
> 赞同：6
> 
> 时间：2012-12-19T18:31:24.067
> 
> 标签：jquery, ajax, ruby-on-rails-3

我是 ajax 新手，但对 Rails 很合理。我用回形针设置了基本的多个附件。我有建议 has_many 资产。

在我的推荐编辑表单中，我希望用户能够删除资产、确认、突出显示和淡出该字段。

我拥有的 link_to 代码是：

```
<%= link_to "Delete Attachment", destroy_asset_path(asset.id), :method => :delete, :confirm => "Are you sure?", :remote => true %> 
```

很直接。然后assets_controller（基于我的路线）

```
def destroy_asset
     @asset = Asset.find(params[:id])
     @asset.destroy

     respond_to do |format|
       format.js
     end
  end 
```

这有效，资产被销毁，这是日志输出：

```
Started DELETE "/asset/11" for 127.0.0.1 at 2012-12-19 10:27:42 -0800
  Processing by AssetsController#destroy_asset as JS
  Parameters: {"id"=>"11"}
  Asset Load (0.2ms)  SELECT "assets".* FROM "assets" WHERE "assets"."id" = $1 LIMIT 1  [["id", "11"]]
   (0.1ms)  BEGIN
[paperclip] Scheduling attachments for deletion.
[AWS S3 200 0.112224 0 retries] head_object(:bucket_name=>"bestofbauer-dev",:key=>"assets/11/original/DaffyDuck.jpg")
  SQL (0.2ms)  DELETE FROM "assets" WHERE "assets"."id" = $1  [["id", 11]]
[paperclip] Deleting attachments.
[paperclip] deleting /assets/11/original/DaffyDuck.jpg
[AWS S3 204 0.117975 0 retries] delete_object(:bucket_name=>"bestofbauer-dev",:key=>"assets/11/original/DaffyDuck.jpg")
   (11.7ms)  COMMIT
Rendered assets/destroy_asset.js (0.4ms)
Completed 200 OK in 268ms (Views: 9.8ms | ActiveRecord: 14.1ms) 
```

这是我在 destroy_asset.js 中尝试的

```
$("#asset_<%= @asset.id %>").effect('highlight', {color:"#999"}, 3000).remove(); 
```

但它既不突出也不淡化 div ......有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T18:45:04.320

我做过类似的事情，但我只是将一个事件绑定到`ajax:success`（由不显眼的 JS 触发），这意味着您无需费心更改控制器中的任何内容或添加新的 .js.erb 模板。在我的编辑产品页面上，我显示了与该产品相关的所有图像，每个图像都有一个删除链接：

```
<div id="image-container">
  <% @product.images.each do |image| %>                                                                                                                                  
    <div class="image">
      <%= image_tag image.file.thumb %>
      <%= link_to "Destroy", admin_image_destroy_path(image), class: "destroy-image",  method: :delete, confirm: "Are you sure?", remote: true %>
    </div>
  <% end %>
</div> 
```

在 products.js.coffee 中：

```
$("#image-container").on "ajax:success", "div a.destroy-image", (event, data, status, xhr) ->
  $(event.target).parent().fadeOut "slow", () ->
    $(this).remove() 
```

无需执行控制器返回的js。在淡出然后删除之前首先突出显示此亮点并没有太多工作。

更多信息：[https ://github.com/rails/jquery-ujs/wiki/ajax](https://github.com/rails/jquery-ujs/wiki/ajax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:57:01.867

阅读您的评论并提出这个想法。将 id 保存在另一个实例变量中，然后在 js.erb 文件中使用它：

```
def destroy_asset
 @asset = Asset.find(params[:id])
 @asset.destroy
 @asset_id = params[:id]

 respond_to do |format|
   format.js
 end
end 

$("#asset_<%= @asset_id %>").effect('highlight', {color:"#999"}, 3000).remove(); 
```

# mysql - 修复连接的多对多 MySQL 查询

> ID：13958788
> 
> 赞同：1
> 
> 时间：2012-12-19T18:31:28.763
> 
> 标签：mysql, sql, join, many-to-many

我有两个看起来像这样的表：

表 A：

```
+-----+-----+------+-------+
| aID | uID | attr | value |
+-----+-----+------+-------+
| 1   | 1   | fn   | john  |
+-----+-----+------+-------+
| 2   | 1   | ln   | smith |
+-----+-----+------+-------+
| 3   | 2   | fn   | jim   |
+-----+-----+------+-------+
| 4   | 2   | ln   | bean  |
+-----+-----+------+-------+ 
```

表 B：

```
+-----+-----+-------+-------+
| bID | uID | perm  | value |
+-----+-----+-------+-------+
| 1   | 1   | admin | 1     |
+-----+-----+-------+-------+
| 2   | 2   | news  | 1     |
+-----+-----+-------+-------+
| 3   | 2   | cms   | 1     |
+-----+-----+-------+-------+ 
```

如图所示，`Table A`保存用户的属性数据`uID`，并`Table B`保存用户的权限数据`uID`。

目前，我正在使用：

```
SELECT GROUP_CONCAT(`a`.`attr`) AS `attrs`
     , GROUP_CONCAT(`a`.`value`) AS `values`
     , GROUP_CONCAT(`b`.`perm`) AS `perms` 
FROM `a` 
JOIN `b` 
ON `a`.`uID` = `b`.`uID` 
GROUP BY `a`.`uID`, `b`.`uID` 
```

但它给了我一个结果：

```
+-------------+-------------------+-------------------+
| attrs       | values            | perms             |
+-------------+-------------------+-------------------+
| fn,ln       | John,Smith        | admin,admin       |
+-------------+-------------------+-------------------+
| fn,fn,ln,ln | Jim,Jim,Bean,Bean | news,cms,news,cms |
+-------------+-------------------+-------------------+ 
```

我需要在查询中进行哪些更改才能获得：

```
+-------+------------+----------+
| attrs | values     | perms    |
+-------+------------+----------+
| fn,ln | John,Smith | admin    |
+-------+------------+----------+
| fn,fn | Jim,Bean   | news,cms |
+-------+------------+----------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:33:55.650

`GROUP_CONCAT`[需要额外的](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)参数，如其文档页面中所述。

你想要的是`distinct`：

```
SELECT GROUP_CONCAT(distinct `a`.`attr`) AS `attrs` . . . 
```

# c++ - 处理未初始化的指针数组 C++ 时出错

> ID：13958790
> 
> 赞同：2
> 
> 时间：2012-12-19T18:31:37.830
> 
> 标签：c++, arrays, pointers

我有五个文件：T 类、M 类（抽象类）、MC 类（容器）、AC 类（创建添加到 MC 容器中的特定对象）和我的主文件。我有这些函数来添加一个对象（在本例中为 AC）并检索您在 AC 中找到的数据成员（标题）。

程序编译，看来我可以创建和添加一个 AC 对象。但是，当我尝试使用 GetTitle 函数时，程序崩溃并出现以下错误

> “TLab 5.exe 中 0x00b938e6 处未处理的异常：0xC0000005：访问冲突读取位置 0xcccccce4。”</p>

从我查找的内容来看，这意味着我有一个错误/未初始化的指针。我的程序中唯一的指针是这样的：

```
 M *C[MCSize] //Found in MC.h 
```

MC 的构造函数如下所示：

```
 MC::MC()
 {
cout << "Enter Name: ";
getline(cin, CName);

cout << "Enter size of collection: ";
cin >> CurrentMCSize;
if (CurrentMCSize < 0 || CurrentMCSize > MCSize)
{
    cout << "Size is invalid. Please re-enter: ";
    cin >> CurrentMCSize;

 }; //MCSize is defined in the header of MC. 
```

调用输入的标题的函数在这里：

```
 void MC::ListMTitles()
 {
      for (int i = 0; i < CurrentMCSize; i++)
      {
         cout << i << ". " << Collection[i]->GetTitle();
      }
 };
 //GetTitle is defined in M.cpp 
```

DMA发生的地方：//MC.cpp

```
 void MC::AddM()
 {
int Selection;
if(CurrentMCSize < MCSize)
{
    DisplayMTypeMenu();
    Selection = GetMTypeSelection();
    switch(Selection)
    {
    case 1: Collection[CurrentMCSize] = new AC;
    break;
    // Other case statements

    }
    if (0 == Collection[CurrentMCSize])
    {
        cout << "Error: Memory Allocation Failed.";
        exit(1);
    }
    else
    {
        cout << "New M Type added!" << endl << endl;
    }
    CurrentMCSize++;
} 
```

我没有正确初始化我的指针吗？我的 Add 函数实际上是在欺骗我，并且没有添加任何内容吗？我环顾四周，但我看到的大多数答案都涉及使用向量，为了这个项目，我认为我不允许使用向量，因为教授没有仔细研究它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:49:12.667

您要求用户在构建期间输入集合的大小，但您从未填充集合的这些元素。然后，当您调用 时`AddM`，它会从 继续`CurrentMCSize`。相反，您应该`CurrentMCSize`在构造函数中初始化为零，并且根本不要求它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:59:11.803

出现问题是因为这个

```
 for (int i = 0; i < CurrentMCSize; i++)
  {
     cout << i << ". " << Collection[i]->GetTitle();
  } 
```

从 0 开始，但不能保证 AddM() 将从 0 开始添加：

```
void MC::AddM()
{
int Selection;
if(CurrentMCSize < MCSize)
{
    DisplayMTypeMenu();
    Selection = GetMTypeSelection();
    switch(Selection)
    {
    case 1: Collection[CurrentMCSize] = new AC; 
```

相反，它将添加任何 CurrentMCSize 可以作为类似 4 输入构造函数的值。您要跟踪三个单独的值：最大支持大小、当前使用的大小和下一个分配项目的插槽，但您已经将最后两个折叠成一个变量。

相关问题 - 您不想简单地使用 std::vector 和 push_back 的任何原因？

编辑：啊，我没看到，帕迪打败了我。

# ios - MFMessageComposeViewController:canSendText：如果没有 SIM，则返回 true

> ID：13958792
> 
> 赞同：1
> 
> 时间：2012-12-19T18:31:45.897
> 
> 标签：ios

如果我从 iPhone 中取出 SIM 卡，然后调用 [MFMessageComposeViewController canSendText]，它会返回 true，但显然该设备无法发送 SMS。

这是此功能的错误还是已知行为？

鉴于这种行为，是否有一种解决方法可以知道是否因为没有 SIM 卡而无法发送 SMS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:37:48.787

如果 iPhone 运行的是 iOS 5+，您可能有 iMessage 可用。这将导致`canSendText`返回 YES。

# finite-automata - 如何求解这个 DFA 的 δ(A,01)？

> ID：13958800
> 
> 赞同：0
> 
> 时间：2012-12-19T18:32:15.863
> 
> 标签：finite-automata, regular-language, automata, dfa

![在此处输入图像描述](../Images/071db401a1c353ff2e5596f99e460b33.png) 考虑 DFA：

**δ(A,01) 等于多少？** 选项：

```
A) {D}    
B) {C,D}      
C) {B,C,D}       
D) {A,B,C,D} 
```

正确答案是选项 B），但我不明白如何。请有人向我解释解决它的步骤，以及一般来说，我们如何解决任何 DFA 和任何过渡的问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:17:22.437

**B) 选项不是正确答案！**对于这个转移图。

在转换图（TG）中，符号`ε`表示**NULL-move** ( `ε-move`)。TG 中有两个 NULL 动作。

```
One:       (A) --- `ε` ---->(B)  
Second:    (A) --- `ε` ---->(C) 
```

一种`ε-move`无需消耗任何符号即可更改状态的方法。在您的图表中来自`A to B`或`A to C`。

> δ(A,01) 等于多少？

问题问“`A`如果输入是`01`”，则状态的路径是什么。（据我了解，因为只有一个最终状态）

`01`可以通过两种方式之一进行处理。

> *   (A) -- ε --->(B) -- 0 --> (B) -- 1 --> (D)
>     
>     
> *   (A) -- ε --->(C) -- 0 --> (B) -- 1 --> (D)

`01`此外，即使您不想达到最终状态 ，也没有其他方法可以处理字符串。

[**答案**]
所以有问题（或者你做了）。

您可以学习如何从转换图中删除 NULL-move。另外[如何为 DFA 编写正则表达式](https://stackoverflow.com/questions/7550711/what-is-the-language-of-this-deterministic-finite-automata/13965717#13965717)

如果您从 TG 中删除 null-moves，您将获得三种接受方式`01`。

![TG](../Images/a28fe1dddbf46a93134fe676cae24efc.png)

**没有 NULL-MOVE 的等效转换图**

请注意，Graph 中有三个起始状态。

三种方式：

```
{ABD}  
{CBD}  
{BBD} 
```

总之`state-(B)`，必须要来。

还有，你`Consider the DFA :`写错了。TG 不是确定性的，因为存在不确定性移动 δ(A,ε) 并且下一个状态是 B 或 C。

# c# - 将本地文件传递给 HttpPostedFileBase

> ID：13958801
> 
> 赞同：1
> 
> 时间：2012-12-19T18:32:18.750
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个将 HttpPostedFileBase 作为参数的方法，但我不确定如何将本地文件分配为 HttpPostedFileBase。

```
 string httpPostedFileBase = @"C:\SVN - Apps\trunk\files\230.flv";

    var uploadedFile= FileAndMediaService.UploadFile(httpPostedFileBase, fileInfo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:54:13.733

如果该文件已本地存在于运行 MVC 的机器的硬盘驱动器上（通过 IIS 或 IIS Express），则它不会通过 HTTP 发布。HttpPostedFileBase 是一个用于转换从 HTTP POST 获得的文件上传的对象。

如果要使用服务器上已经存在的文件，请查看 System.IO 命名空间中的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:14:47.090

我从来没有尝试过，但是根据[这篇文章](https://stackoverflow.com/questions/7466687/how-to-create-an-instance-of-httppostedfilebaseor-its-inherited-type?rq=1)的答案，您可以创建一个派生类来代替`HttpPostedFileBase`. 由于您在磁盘上有一个文件并且问题涉及字节数组，因此您必须将文件读入字节数组（使用`System.IO`命名空间中的类）或进行其他修改。

另一种选择是简单地编写一个小的 MVC 页面（因为你已经用 MVC 标记了这个条目，我假设这就是你正在做的）然后上传文件并从那里开始。但是如果你有多个文件要上传，你可能想去派生类路线。

# c# - 在 .net 4.5 中从 XAML 绑定到对象的属性

> ID：13958807
> 
> 赞同：2
> 
> 时间：2012-12-19T18:32:48.677
> 
> 标签：c#, xaml, binding, attributes

> **可能重复：**
> [在 xaml 中访问 DisplayName](https://stackoverflow.com/questions/6154050/access-displayname-in-xaml)

XAML 中是否有标准方法可以绑定到对象的属性？我知道这是一个与此类似的问题[，](https://stackoverflow.com/questions/6154050/access-displayname-in-xaml)我可以创建一个 MarkupExtension 或使用一个转换器。我只是想知道.net 4.5 中是否有一些内置标记或本机支持。

IE

```
// Some class with an Attribute:

[Description("A description")]
class Foo
{
}

// XAML - DataContext is a Foo object
<UserControl DataContext="{StaticResource myFoo}"  
  <TextBlock Text="{Binding ?Description?}"/>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:35:12.130

没有对绑定到属性的本机支持。您应该编写自己的标记扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:36:56.570

不; 它需要是通过, 即...显式`Property`或隐式继承的。`DataContext``{Binding}`

# asp.net - 向现有 Excel 表添加新行时图表不会更新（不必使用命名范围）

> ID：13958809
> 
> 赞同：4
> 
> 时间：2012-12-19T18:32:55.807
> 
> 标签：asp.net, excel-2007, named-ranges, closedxml

我对使用 closedXMl 和 Excel 也很陌生（至少为此目的），如果我问愚蠢的问题，我很抱歉。

我知道 closedXML 还不支持图表，所以唯一想到解决这个问题的是使用[excel table](http://chandoo.org/wp/2009/09/10/data-tables/)创建我的图表。这样，我认为 ClosedXML 会在我插入新行时更新范围，并且图表会选择它。好吧，它没有。至少当我使用 closedXML 库从代码中添加行时不会。

奇怪的是，从 excel 中添加新行会自动更新图表，但如果我想从代码中获得相同的结果，我必须使用 OFFSET 公式和命名范围，然后将图表源数据设置为这些命名范围。这就是为什么我想知道我用来插入新行的代码是否有问题：

```
 Dim ruta As String = Server.MapPath("~/Templates/MyTemplate.xlsx")
    Dim wb As New XLWorkbook(ruta)
    Dim ws = wb.Worksheet(1)

    Dim tblData = ws.Table("Table1")

    Dim year As Integer = 2000
    For i As Integer = 1 To 13

        With tblData.DataRange.LastRow()
            .Field("Year").SetValue(year)
            .Field("Sales").SetValue(CInt(Math.Floor((2000 - 500 + 1) * Rnd())) + 500)
        End With
        tblData.DataRange.InsertRowsBelow(1)
        year = year + 1
    Next

    tblData.LastRow.Delete() 
```

如您所见，代码非常简单，模板也很简单，它只包含两列：**“Year”**（table1[Year]）和**“Sales”**（Table1[Sales]

我认为这与我的模板没有任何关系，因为正如我告诉你的那样，直接从 excel 添加新行按预期工作，只有当我从代码生成表格时，图表系列才不包含新行添加的 ![在此处输入图像描述](../Images/c3b5ea521ea6ce113af3510b353d650e.png)

有必要手动添加新范围（**Sheet1!Table1[Sales]**和**Sheet1!Table1[Year]**），因为它只包括第一行（插入表格时默认添加的行） ![在此处输入图像描述](../Images/fa4d4023a31deec64a0a102bcaa0aec2.png)

任何帮助将非常感激

PS 这是一个包含完整代码以及 excel 模板的 rar[链接（\Templates\MyTemplate.xlsx）](http://sdrv.ms/YlnosS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:24:17.490

如果问题是您的表无法识别其他行，请尝试在最后一行删除后添加：

```
tblData.Resize tblData.Range(1, 1).CurrentRegion 
```

那应该调整表格的大小。然后希望您的表操作应该有效。

# c# - 使用 WCF 数据服务直接引用 DbContext 上的方法？

> ID：13958812
> 
> 赞同：0
> 
> 时间：2012-12-19T18:33:04.617
> 
> 标签：c#, wcf-data-services, entity-framework-5

下午好，堆垛机（或溢出机，无论您喜欢哪个），这比其他任何事情都更像是一个清洁和便利问题，但我无法想象我是唯一一个对此感到疑惑的人，所以我们开始......

我有一个基本的启用 OData 的 WCF 数据服务类，它使用我的实体框架数据上下文。

```
[JsonpSupportBehavior]
public class ControlBindingService : DataService<MyDataContext>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
        config.DataServiceBehavior.AcceptCountRequests = true;
        config.SetEntitySetAccessRule("*", EntitySetRights.All);
        config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);          
    }

    protected override MyDataContext CreateDataSource()
    {
        if (HttpContext.Current == null)
            throw new InvalidOperationException("The WCF Data Services implementation must be hosted in IIS.");

        string username;
        if (HttpContext.Current.User.Identity.IsAuthenticated)
            username = HttpContext.Current.User.Identity.Name;
        else
        {
            // The request didn't have user identity, attempt to find UserName in the 
            // request header before returning 401 to the caller.
            if (!String.IsNullOrEmpty(HttpContext.Current.Request.Headers["UserName"]))
            {
                username = HttpContext.Current.Request.Headers["UserName"];
                // REVIEW: We should validate user before passing it to the datacontext.
            }
            else
                throw new DataServiceException(401, "Client did not pass required authentication information.");
        }

        return MyDataContext.GetInstance(username);
    }

    [WebGet]
    public List<DailyKeyPerformanceIndicator> GetResourceKPIs(
        int resourceId, string jsonStart, string jsonEnd, int scenarioId)
    {
        DateTime start = jsonStart.DeserializeJson<DateTime>();
        DateTime end = jsonEnd.DeserializeJson<DateTime>();

        if (scenarioId < 1)
        {
            scenarioId = CurrentDataSource.GetScenarios()
                .Single(s => s.IsProduction).ScenarioID;
        }

        return CurrentDataSource.GetDailyResourceKPI(
            scenarioId, start, end, resourceId);
    }
} 
```

数据上下文只是一个标准（代码优先）`DbContext`实现，具有暴露实体集的属性等。

但是，我们也有一些方法可以公开一些我们想要对其强制执行某些约束的表。具体来说（见下面的代码），我们想知道调用者想要使用数据做什么，这样我们就可以只返回适当的结果。例如，如果调用者想要从employees 表中获取行——他们可能想要获取所有行，或者只获取他们具有更新权限的行。

```
[Serializable]
public partial class MyDataContext : DbContext
{
    static MyDataContext()
    {
        Database.SetInitializer<MyDataContext>(null);
    }

    public MyDataContext()
        : base("name=MyDBString")
    { }

    // Standard table properties...

    public DbSet<User> Users
    {
        get { return this.Set<User>(); }
    }

    public DbSet<UserSetting> UserSettings
    {
        get { return this.Set<UserSetting>(); }
    }

    public DbSet<SettingDefinition> SettingDefinitions
    {
        get { return this.Set<SettingDefinition>(); }
    }       

// Restricted table methods...

public DbSet<Client> GetClients(
    DatabasePermissions perms = DatabasePermissions.Select)
{
   // getPermissibleSet is a method in a helper class that does some 
   // magical querying and produces a filtered DbSet.
   return getPermissibleSet<Client>(perms);
}

public DbSet<Employee> GetEmployees(
    DatabasePermissions perms = DatabasePermissions.Select)
{
   // getPermissibleSet is a method in a helper class that does some 
   // magical querying and produces a filtered DbSet.
   return getPermissibleSet<Employee>(perms);
}       
} 
```

现在到问题的根源......我想避免做的是`[WebGet]`在我的数据上下文中为每个“受限表方法”编写一个。原因实际上只不过是冗余——该`[WebGet]`方法最终将直接传递到数据上下文。

因此，总而言之，我想说我基本上要做的是标记我的数据上下文类中的方法，WCF 将以与我的 DbSet 属性相同的方式公开这些方法。有接盘侠吗？

谢谢！Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T12:46:44.163

这是一个有趣的问题。我正在尝试做类似的事情。这有点像在这里扔飞镖，但你有没有尝试过这样的事情？您可能应该将泛型分开，这样您就不会为每种类型创建唯一的上下文，但似乎您应该能够使用泛型摆脱重复的代码。

```
[Serializable]
public partial class MyDataContext<T> : DbContext where T : class
{
    static MyDataContext()
    {
        Database.SetInitializer<MyDataContext>(null);
    }

    public MyDataContext()
        : base("name=MyDBString")
    { }

    // Standard table properties...

    public DbSet<T> SettingDefinitions
    {
        get { return this.Set<T>(); }
    }

    // Restricted table methods...

    public DbSet<T> GetClients(
        DatabasePermissions perms = DatabasePermissions.Select)
    {
        // getPermissibleSet is a method in a helper class that does some 
        // magical querying and produces a filtered DbSet.
        return getPermissibleSet<T>(perms);
    }
} 
```

# c# - 在动态创建的 CheckBoxList 中嵌套 foreach

> ID：13958822
> 
> 赞同：3
> 
> 时间：2012-12-19T18:33:35.980
> 
> 标签：c#, asp.net, .net

我有一个动态创建的`CheckBoxList`. 在此`CheckBoxList`，我有一个`foreach`用于验证用户输入的嵌套循环。用户输入他或她的电子邮件地址。一旦用户单击提交，`CheckBoxList`就会创建。如果用户的电子邮件与某个主题的订阅相匹配，则会选中该主题旁边的复选框。我遇到的问题是将原始外部`foreach`与嵌套的`foreach`.

```
int i = 0;
foreach (Topic topic in result)
{
    string topicName = topic.TopicArn.ToString().Split(':').Last();
    ListItem li = new ListItem(topicName, topic.TopicArn);
    checkBoxList1.Items.Add(li);

    foreach (Subscription subscription in subs) // where topic equals current 
                                                // topic in original foreach?
    {
        if (txtEmail.Text == subscription.Endpoint)
            checkBoxList1.Items[i].Selected = true;
    }
    i++;
} 
```

我在想我也许可以使用 LINQ 向`nested`foreach 循环添加一个条件，但我还不能把它全部放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:43:53.837

您必须先创建所有复选框，然后才能开始评估是否应选中它们。在上面的代码中，您创建了一个 Listitem，然后循环遍历所有订阅，因此在您在复选框列表中创建第二个 listitem 之前，它将在该循环中超出范围。

```
 foreach (Topic topic in result)
 {
   string topicName = topic.TopicArn.ToString().Split(':').Last();
   ListItem li = new ListItem(topicName, topic.TopicArn);
   li.Selected = subs.Any(s => s.Endpoint == txtEmail.Text && s.TopicArn == topic.TopicArn);
   checkBoxList1.Items.Add(li); 
 } 
```

# javascript - AJAX 线程 - 如何等待它完成？

> ID：13958825
> 
> 赞同：1
> 
> 时间：2012-12-19T18:33:38.943
> 
> 标签：javascript, jquery, ajax

我想知道如何让我的脚本等待 AJAX 完成：

```
function urlExists(testUrl){
    var ajaxurl = 'some AJAX URL';
    jQuery.ajax({
        type: "POST",
        url: ajaxurl,
        data: {
                "action": "somefunction",
                "content": testUrl
            },
        global: false,
        success: function(){
            alert('ajax successs');
            return true;
        },
        error: function(){
            return false;
        }
    });
    return false;
}

/* The AJAX function returns TRUE or FALSE 100% alright. */
/* The interesting part begins below. */

if(urlExists(src)){
    alert('test');
}else{ 
    alert('test2');
} 
```

当 AJAX 返回 TRUE（或 FALSE）时，`if(urlExists(src))`总是说`test2`……我敢打赌这是因为它没有等待 AJAX 完成？但是这有什么用呢？为什么会这样？我得到`test2`了，不久之后`ajax successs`。我需要它来显示`test`消息。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:39:57.970

> AJAX 函数返回 TRUE 或 FALSE 100% 好。

不，它总是返回`false`，如最后一行所述。

> 如何等待它完成？

就“睡眠”而言，您不能“等待”，因为它是一个*异步*任务。您将需要使用回调。使用 jQuery 的 Deferreds，它看起来像这样：

```
function urlExists(testUrl){
    return jQuery.ajax({
        type: "POST",
        url: 'some AJAX URL',
        data: {
                "action": "somefunction",
                "content": testUrl
            },
        global: false,
        success: function(){
            alert('ajax successs');
        }
    });
}
urlExists(src).done(function(){
    alert('test');
}).fail(function(){ 
    alert('test2');
}); // returns the promise immediately, but will alert later on 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:40:40.933

发生这种情况是因为 AJAX 是异步的，这意味着进行 AJAX 调用并继续执行，而无需等待响应返回。这就是为什么您的`urlExists`() 在响应到来之前执行。在成功处理程序中调用响应到达后调用它，如下所示：

```
function urlExists(testUrl){
    var ajaxurl = 'some AJAX URL';
    jQuery.ajax({
        type: "POST",
        url: ajaxurl,
        data: {
                "action": "somefunction",
                "content": testUrl
            },
        global: false,
        success: function(){
            alert('ajax successs');
            if(urlExists(src)){
                 alert('test');
             }else{ 
                 alert('test2');
                  }
            return true;
        },
        error: function(){
            return false;
        }
    });
    return false;
}

/* The AJAX function returns TRUE or FALSE 100% alright. */
/* The interesting part begins below. */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:42:01.357

您可以使您的请求异步，但我不建议这样做。每当网络或服务器没有快速响应时，都会导致糟糕的用户体验。

```
function urlExists(testUrl){
    var result;
    var ajaxurl = 'some AJAX URL';
    jQuery.ajax({
        type: "POST",
        url: ajaxurl,
        async: false, // BAD
        data: {
                "action": "somefunction",
                "content": testUrl
            },
        global: false,
        success: function(){
            alert('ajax successs');
            result = true;
        },
        error: function(){
            result = false;
        }
    });
    return result;
}

if(urlExists(src)){
    alert('test');
}else{ 
    alert('test2');
} 
```

推荐的方法是使用延迟对象或回调。下面是一个使用延迟的例子。

```
function urlExists(testUrl){
    var ajaxurl = 'some AJAX URL';
    return jQuery.ajax({
        type: "POST",
        url: ajaxurl,
        data: {
                "action": "somefunction",
                "content": testUrl
            },
        global: false
    });

}

urlExists(src).done(function(){
    alert('test');
}).fail(function(){
    alert('test2');
}); 
```

**另请注意，如果您正在测试是否存在跨域 url，这将始终失败。**

# facebook - 如何授权某个 Facebook 帐户删除 Facebook 评论插件中的评论？

> ID：13958830
> 
> 赞同：0
> 
> 时间：2012-12-19T18:33:57.223
> 
> 标签：facebook, facebook-graph-api, facebook-comments

我已将 facebook 评论插件添加到我的网站，并且我想控制网站中的评论。有没有办法让某些 Facebook 帐户有权从评论框中删除评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:30:47.650

这很简单。您需要做的就是在页面标题中添加一个应用程序 ID 元数据：

```
<meta property="fb:app_id" content="<?= APP_ID; ?>" /> 
```

然后，`Developper`在您的应用角色设置中列出的每个人都可以在评论框中审核评论。

几周前，有一个`Moderator`可用的角色，但现在已删除。不确定这个特定的角色变成了什么；但是`Developper`并且`Admin`可以审核评论。

# java - 我可以仅使用 id 创建 OneToOne 关系吗？

> ID：13958840
> 
> 赞同：1
> 
> 时间：2012-12-19T18:34:42.270
> 
> 标签：java, jpa

在 JPA 中是否可以仅通过一个想法而不嵌入类来创建 @OnToOne 关系？例如：

```
@Entity public class Relationship {
   @Id
   @OneToOne
   private Long parentId; // instead of "private User parent;"

   @Id
   @OneToOne
   private Long childId; // instead of "private User child;"

   int type;

   ... 
```

我不介意有一个带有惰性获取的 getter 方法，但我不需要一个，而且我宁愿不必拉入完整的父对象来处理子对象。另外，我想仅使用 id 而不是嵌入对象将其反序列化为 JSON。我可以通过添加一个委托给#getParent().getId() 的getter 并在#getParent() 方法上放置一个JsonIgnore 来做到这一点（对于孩子也是如此），但我更愿意让实体看起来像这样我希望它从一开始就不需要添加这些东西。可能，如果是的话怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:03:08.353

不，如何`Object`与数字相关？毕竟这是一种面向对象的语言。

将某些内容标记为 @OneToOne 在语义上等同于数据存储中的 FK。如果您只是省略 @OneToOne 并使用数字，那么您在数据存储区中有一个**没有**FK 的数字列。所以 JPA 两者都允许，但一个提供了 FK 的好处，而另一个你只是传递“数字”而没有与它们相关的上下文

# facebook-graph-api - 如何使用 Facebook OG 对象访问“共享”计数器？

> ID：13958841
> 
> 赞同：1
> 
> 时间：2012-12-19T18:34:55.173
> 
> 标签：facebook-graph-api

我有一个 facebook 应用程序，其中有一个带有 meta og 标签的页面。当我运行[http://graph.facebook.com/ID_Object](http://graph.facebook.com/ID_Object)时，我得到一个没有共享计数条目的 json 文件，但该页面被共享了多次。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:48:35.407

尝试通过 id 调用 url。

```
https://graph.facebook.com/?id=YourURL 
```

参考：[https ://developers.facebook.com/docs/reference/api/#auth](https://developers.facebook.com/docs/reference/api/#auth)

> 您还可以使用“ids”查询参数在单个查询中请求多个对象。例如，URL [https://graph.facebook.com?ids=arjun,vernal](https://graph.facebook.com?ids=arjun,vernal)在同一响应中返回两个配置文件。
> 
> “ids”查询参数也接受 URL。这对于在 Open Graph 中查找 URL 的 ID 很有用。例如： [https ://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/)

**Open Graph 协议定义了四个必需的属性：**

**og:title** - 应该出现在图表中的对象的标题，例如“The Rock”。

**og:type** - 对象的类型，例如“电影”。请参阅支持类型的完整列表。

**og:image** - 应在图中表示您的对象的图像 URL。图片必须至少为 50 像素 x 50 像素（但最好是 200 像素 x 200 像素）并且最大宽高比为 3:1。我们支持 PNG、JPEG 和 GIF 格式。您可以包含多个 og:image 标签以将多个图像与您的页面相关联。

**og:url** - 对象的规范 URL，将在图中用作其永久 ID，例如[http://www.imdb.com/title/tt0117500/](http://www.imdb.com/title/tt0117500/)。

# android - 如何访问 View 的状态？

> ID：13958842
> 
> 赞同：1
> 
> 时间：2012-12-19T18:34:57.933
> 
> 标签：android, android-layout, listview, view

我正在尝试为列表中状态禁用的项目设置主题的默认**ENABLED_STATE**颜色，因此列表项目在我的**ListView**中不会看起来是灰色的。如何让 stateSet 在以下代码中使用：

```
textview.setTextColor(textview.getTextColors().getColorForState(stateSet, android.R.attr.textColor); 
```

从[文档](http://developer.android.com/reference/android/view/View.html)中我可以看到 ENABLED_STATE_SET 是一个受保护的字段。所以我不能明确地访问它。

PS如果有人知道将列表项的禁用颜色更改为主题默认启用颜色的任何其他方法（例如使用XML），请写出来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:47:42.250

您是否尝试过使用属性？检查`?android:attr/textColorPrimary`。

# python - Python中对datetime.timedelta的人类可读日期时间间隔？

> ID：13958844
> 
> 赞同：2
> 
> 时间：2012-12-19T18:35:07.683
> 
> 标签：python, datetime, intervals

我发现自己需要在 python 配置文件中指定一个时间跨度。

有没有一种方法可以在带有 stdlib 的 python 配置文件中指定更人类可读的时间范围（类似于 PostgreSQL 的间隔语法）？或者这需要第 3 方库吗？

**澄清** 我不是`ConfigParser.ConfigParser`专门在 stdlib API 中寻找任何东西。我想我真正需要的是一种从人类可读的日期/时间间隔到`datetime.timedelta`值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-09T18:56:10.137

我在一个[有点相关](https://stackoverflow.com/a/50961202/1174784)的问题中找到了一个很好的答案。原来[`humanfriendly`](https://pypi.org/project/humanfriendly/)图书馆做得很好：

```
In [1]: import humanfriendly

In [2]: humanfriendly.parse_timespan('1w')
Out[2]: 604800.0 
```

那是几秒钟。要获取一个`timedelta`对象，您可以简单地加载它：

```
In [3]: from datetime import timedelta

In [4]: timedelta(seconds=humanfriendly.parse_timespan('1w'))
Out[4]: datetime.timedelta(7) 
```

由于humanfriendly 还支持另一种方式的转换，您也可以进行完整的往返，如下所示：

```
In [5]: humanfriendly.format_timespan(timedelta(seconds=humanfriendly.parse_timespan('1w')).total_seconds())
Out[5]: '1 week' 
```

请注意如何`format_timespan`不访问`timedelta`对象，不幸的是：只有一个整数（秒）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:48:33.470

我认为没有标准库模块。我写了一个这样做的。您可以安装它，或根据您的需要调整它。

该模块称为[pycopia.timespec](http://code.google.com/p/pycopia/source/browse/trunk/aid/pycopia/timespec.py)

它将诸如“1day 3min”之类的字符串转换为秒，作为浮点数。很容易从中得到一个`datetime.timedelta`。

# javascript - 为什么 JavaScript Intellisense 在 Visual Studio 2012 中并不总是有效？

> ID：13958850
> 
> 赞同：0
> 
> 时间：2012-12-19T18:35:19.507
> 
> 标签：javascript, windows-8, visual-studio-2012, intellisense, javascript-intellisense

我正在使用[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)并构建一个 JavaScript Windows Store 应用程序。

在大多数情况下，智能感知有效，但在某些情况下却无效。我只是想知道为什么。这里有一些例子：

```
var ctl=document.getElementById("txtName").winControl; 
```

尽管出现了其他项目，但“winControl”项目并未出现在智能感知中，但它仍然有效。此行中的“srcElement”也是如此：

```
var nameInput = eventInfo.srcElement; 
```

这是可以预料的还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:56:40.570

随着您对 JavaScript 的深入了解，与强类型语言不同，要弄清楚这些值将是什么变得更加困难，除非 JavaScript 代码编写在 HTML 页面中，编辑器可以实时运行该页面.

```
var myFunc = function (evt) { console.log(evt); }

window.onclick = myFunc;

myFunc("Bob"); 
```

IDE 应该做什么，应该`evt`有什么属性？

如果 JavaScript 是强类型的，并且该函数只能接受 Event 对象或 ClickEvent 对象，那么 IDE 可以准确地知道预期的属性。

就像`.getElementById`——如果一个页面具有“myEl”，`<a>`而另一个页面具有相同的 ID，`<canvas>`那么属性应该是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T08:09:57.087

对于像 JS 这样的动态语言提供建议的困难，Norguard 是正确的。为了在这种情况下提供帮助，您可以使用文档注释向 Visual Studio JavaScript 编辑器提供提示。例如，我可以使用以下代码：

```
/// <var type="WinJS.UI.ListView"/>
var listView = document.querySelector("#listView").winControl; 
```

并且 /// 注释会将 WinJS.UI.ListView 类型与我的 listView 变量相关联。然后键入`listView.`将显示一个完成列表，其中包含对 ListView 的建议。

*   乔丹，微软 Visual Studio 项目经理

# c# - 路由和消息处理程序：请求处理订单问题

> ID：13958853
> 
> 赞同：4
> 
> 时间：2012-12-19T18:35:23.877
> 
> 标签：c#, asp.net, asp.net-web-api

我遇到了 ASP.NET Web API 请求管道的执行顺序问题。

根据 ASP.NET Web API 文档（可[在此处](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)获得），全局消息处理程序应该在路由机制之前执行。

![请求管道](../Images/63f70ba95a32a76e49a0c5ea8dbc3127.png)

在此图像上，`MessageHandler1`是一个全局消息处理程序，而`MessageHandler2`特定于*Route 2*。

* * *

我创建了一个非常简单的示例来表明执行顺序似乎存在问题……或者我真的错过了一些重要的东西。

我有这个控制器

```
public class FooController : ApiController {
    [HttpPut]
    public string PutMe() {
        return Request.Method.Method;
    }
} 
```

它只接受`PUT`请求。

应用程序配置如下：

```
protected void Application_Start() {
    var configuration = GlobalConfiguration.Configuration;

    configuration.MessageHandlers.Add( new SimpleMethodOverrideHandler() );
    configuration.Configuration.Routes.MapHttpRoute(
        name: "Foo",
        routeTemplate: "api/foo",
        defaults: new { controller = "foo", action = "putme" },
        constraints: new { put = new HttpPutOnlyConstraint() }
    );
} 
```

`SimpleMethodOverrideHandler`很简单，就是根据查询字符串中的`DelegatingHandler`一个参数改变请求的方法。`"method"`

```
public class SimpleMethodOverrideHandler : DelegatingHandler {
    protected override Task<HttpResponseMessage> SendAsync( HttpRequestMessage request, CancellationToken cancellationToken ) {
        var method = request.RequestUri.ParseQueryString()["method"];
        if( !string.IsNullOrEmpty( method ) ) {
            request.Method = new HttpMethod( method );
        }
        return base.SendAsync( request, cancellationToken );
    }
} 
```

所以基本上，在我的浏览器中请求`/api/foo?method=put`会触发`FooController`'s`PutMe`方法。
实际上，如前所述，消息处理程序在将请求传递给`HttpRoutingDispatched`.

最后，这里是如何`HttpPutOnlyConstraint`定义 const 的：

```
public class HttpPutOnlyConstraint : IHttpRouteConstraint {
    public bool Match( HttpRequestMessage request,
                       IHttpRoute route,
                       string parameterName,
                       IDictionary<string, object> values,
                       HttpRouteDirection routeDirection ) {
        return request.Method == HttpMethod.Put;
    }
} 
```

* * *

那么问题是当我`/api/foo?method=put`在浏览器中请求时，程序首先进入`HttpPutOnlyConstraint`'`Match`方法，这是错误的。

如果我们参考之前链接的图像，应该首先执行消息处理程序，不幸的是它不是。

因此，当然，`Match`返回`false`并且没有为请求找到控制器/操作，发生 404。

如果我从路由定义中删除约束，程序进入`SimpleMethodOverrideHandler`，请求的方法被成功更改，它能够匹配并执行我的控制器的方法。

难道我做错了什么？为了做这样的事情，是否有一个秘密的配置参数需要知道？:-)

如果有人需要整个项目，可以[在此处获得 [7KB zip 文件]](http://pk.am/b/WebApplication1.zip)。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:54:06.043

您将路由引擎与 Web API 管道混淆了。`HttpRoutingDispatcher`不是路由引擎的概念。路由约束将首先被处理，因为您的底层主机需要构建一个路由表并匹配您的请求的路由。

`HttpRoutingDispatcher`只是另一个实现，`HttpMessageHandler`它所做的只是检查`IHttpRoute`已匹配的路由，并选择接下来要调用的消息处理程序。如果不存在 per-route 处理程序，它将处理委托给`HttpControllerDispatcher`.

# asp.net - 将数据库中的数据插入文本框

> ID：13958854
> 
> 赞同：0
> 
> 时间：2012-12-19T18:35:24.873
> 
> 标签：asp.net, vb.net

我不确定是否有办法做到这一点。我正在尝试使网站的用户能够编辑他们输入的评论。我的讲师不允许我们使用网格视图任务窗格中可用的启用编辑选项，我正在努力寻找解决方案。我知道如何将数据库的内容内容写入下拉列表。但是在为文本框执行此操作时出现错误。我要做的是让用户选择他们为其撰写评论的电影的名称，生成他们为该评论撰写的内容并将其插入文本框中，以便对其进行编辑。这是一件简单的事情吗？还是我需要考虑其他事情？

我用于下拉列表的代码是：

```
ddlRemoveUreview.DataSource = aDataReader
ddlRemoveUreview.DataTextField = "MovieTitle"
ddlRemoveUreview.DataValueField = "MovieTitle"
ddlRemoveUreview.DataBind() 
```

我为将内容写入文本框而编写的代码：

```
query = "Select ReviewText FROM MReviewTexts, Movies, UserDetails WHERE MReviewTexts.MReviewID = Movies.MReviewID AND Movies.UserID = UserDetails.UserID AND UserDetails.Username = '" & HttpContext.Current.User.Identity.Name & "'"
Dim cmd = New OleDbCommand(query, dbConnect)
    aDataReader = cmd.ExecuteReader
    If aDataReader.Read() = True Then
        'A row was returned
        txtContent.Text = aDataReader(0)
    Else
        txtContent.Text = "No content entered - please edit"
    End If 
```

得到它的工作。我的 sql 错误 - 正确的解决方案是：

```
Dim query As String = "Select ReviewText FROM MReviewTexts, MovieReviews, UserDetails WHERE MReviewTexts.MReviewID = MovieReviews.MReviewID AND MovieReviews.UserID = UserDetails.UserID AND UserDetails.Username = '" & HttpContext.Current.User.Identity.Name & "'"
    dbConnect.Open()
    Dim cmd = New OleDbCommand(query, dbConnect)
    aDataReader = cmd.ExecuteReader()
    If aDataReader.Read() = True Then
        'A row was returned
        txtContent.Text = Convert.ToString(aDataReader(0))
    Else
        txtContent.Text = "No content entered - please edit"
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:16:41.950

此代码有效。它将数据库中的内容显示到文本框中：

```
Dim query As String = "Select ReviewText FROM MReviewTexts, MovieReviews, UserDetails WHERE MReviewTexts.MReviewID = MovieReviews.MReviewID AND MovieReviews.UserID = UserDetails.UserID AND UserDetails.Username = '" & HttpContext.Current.User.Identity.Name & "'"
dbConnect.Open()
Dim cmd = New OleDbCommand(query, dbConnect)
aDataReader = cmd.ExecuteReader()
If aDataReader.Read() = True Then
    'A row was returned
    txtContent.Text = Convert.ToString(aDataReader(0))
Else
    txtContent.Text = "No content entered - please edit"
End If 
```

# c++ - OpenMP 和 OOP（分子动力学模拟）

> ID：13958858
> 
> 赞同：4
> 
> 时间：2012-12-19T18:35:34.667
> 
> 标签：c++, parallel-processing, openmp

我正在进行分子动力学模拟，我一直在努力并行实现它，虽然我成功地完全加载了我的 4 线程处理器，但并行计算时间大于计算时间串行模式。

研究每个线程开始和结束循环迭代的时间点，我注意到了一种模式：就好像不同的线程在相互等待。就在那时，我将注意力转向了我的程序结构。我有一个类，它的一个实例代表我的粒子系统，包含有关粒子的所有信息以及一些使用这些信息的函数。我还有一个类实例，它代表我的原子间势，包含势函数的参数以及一些函数（其中一个函数计算两个给定粒子之间的力）。

所以在我的程序中存在两个不同类的实例，它们相互交互：一个类的某些函数引用另一个类的实例。我试图并行实现的块如下所示：

```
 void Run_simulation(Class_system &system, Class_potential &potential, some other arguments){
          #pragma omp parallel for
              for(…) 
      } 
```

for(...) 是实际的计算，使用来自类实例的数据和来自`system`类实例的一些`Class_system`函数。`potential``Class_potential`

我说得对吗，正是这种结构才是我麻烦的根源？

你能建议我在这种情况下应该做什么吗？我必须以完全不同的方式重写我的程序吗？我应该使用一些不同的工具来并行实现我的程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T10:43:59.080

如果没有关于您的模拟类型的更多详细信息，我只能推测，所以这是我的推测。

您是否研究过负载平衡的问题？我猜这个循环会在线程之间分配粒子，但如果你有某种受限的范围潜力，那么在模拟体积的不同区域中，计算时间可能会因粒子而异，具体取决于空间密度。这是分子动力学中一个非常常见的问题，并且在分布式内存（大多数情况下为 MPI）代码中很难正确解决。幸运的是，使用 OpenMP，您可以直接访问每个计算元素上的所有粒子，因此负载平衡更容易实现。它不仅更容易，而且是内置的，可以这么说 - 只需使用子句更改`for`指令的调度，其中`schedule(dynamic,chunk)``chunk`是一个很小的数字，其最佳值可能因模拟而异。您可以将`chunk`部分输入数据添加到程序中，或者您可以改为编写`schedule(runtime)`，然后通过将`OMP_SCHEDULE`环境变量设置为`"static"`、`"dynamic,1"`、`"dynamic,10"`、等值来使用不同的调度类`"guided"`。

另一个可能导致性能下降的来源是虚假共享和真实共享。当您的数据结构不适合并发修改时，就会发生错误共享。例如，如果您为每个粒子保留 3D 位置和速度信息（假设您使用速度 Verlet 积分器），给定 IEEE 754 双精度，每个坐标/速度三元组占用 24 个字节。这意味着一个 64 字节的高速缓存行可容纳 2 个完整的三元组和另一个的 2/3。这样做的结果是，无论您如何在线程之间分配粒子，总是至少有两个线程必须共享一个缓存行。假设这些线程在不同的物理内核上运行。如果一个线程写入它的缓存行副本（例如它更新一个粒子的位置），将涉及缓存一致性协议，它将使另一个线程中的缓存行无效，然后必须从较慢的缓存甚至主内存中重新读取它。当第二个线程更新其粒子时，这将使第一个内核中的缓存行无效。这个问题的解决方案是适当的填充和适当的块大小选择，这样没有两个线程会共享一个缓存行。例如，如果你添加一个表面的第 4 维（你可以用它来存储粒子在位置向量第 4 元素中的势能和在速度向量第 4 元素中的动能）那么每个位置/速度四元组将占用 32 个字节，并且恰好两个粒子的信息将适合单个高速缓存行。如果您随后在每个线程中分配偶数个粒子，

当线程同时访问相同的数据结构并且结构的各个部分之间存在重叠并由不同的线程修改时，就会发生真正的共享。在分子动力学模拟中，这种情况非常频繁地发生，因为我们想利用牛顿第三定律，以便在处理成对相互作用势时将计算时间减半。当一个线程计算作用在粒子上的力时`i`，在枚举其邻居`j`时，计算`j`施加在的力会`i`自动为您提供施加在的力，`i`以便`j`可以将贡献添加到总力上`j`。但`j`可能属于另一个可能同时修改它的线程，因此必须对两个更新都使用原子操作（两者，因为另一个线程可能会更新`i`如果它恰好与它自己的多个粒子中的一个相邻）。x86 上的原子更新是通过锁定指令实现的。这并不像经常出现的那样慢得可怕，但仍然比常规更新慢。它还包括与虚假共享相同的缓存行失效效果。为了解决这个问题，以增加内存使用为代价，可以使用本地数组来存储部分力贡献，然后在最后执行减少。缩减本身必须与锁定指令串行或并行执行，因此可能会证明使用这种方法不仅没有任何好处，而且可能会更慢。适当的粒子分类和处理元件之间的巧妙分布以最小化界面区域可用于解决这个问题。

我想谈的另一件事是内存带宽。根据您的算法，获取的数据元素数量与循环的每次迭代执行的浮点运算数量之间存在一定的比率。每个处理器只有有限的带宽可用于内存获取，如果您的数据恰好不能完全放入 CPU 缓存中，那么内存总线可能无法提供足够的数据来支持在单个处理器上执行的这么多线程插座。您的 Core i3-2370M 只有 3 MiB 的 L3 缓存，因此如果您明确保留每个粒子的位置、速度和力，您只能在 L3 缓存中存储大约 43000 个粒子，在 L2 缓存中存储大约 3600 个粒子（或大约 1800 个）每个超线程的粒子数）。

最后一个是超线程。正如高性能标记已经指出的那样，超线程共享大量核心机器。例如，只有一个 AVX 矢量 FPU 引擎在两个超线程之间共享。如果您的代码未矢量化，您将失去处理器中可用的大量计算能力。如果您的代码是矢量化的，那么两个超线程将在争夺对 AVX 引擎的控制权时相互进入。只有当超线程能够通过将计算（在一个超线程中）与内存负载（在另一个超线程中）重叠来隐藏内存延迟时，超线程才有用。使用密集的数字代码在执行内存加载/存储之前执行许多寄存器操作，超线程没有任何好处，你' d 最好以一半的线程数运行并将它们显式绑定到不同的内核，以防止操作系统调度程序将它们作为超线程运行。Windows 上的调度程序在这方面特别愚蠢，请参阅[这里](http://bitsum.com/pl_when_hyperthreading_hurts.php)以咆哮为例。英特尔的 OpenMP 实现支持通过环境变量控制的各种绑定策略。GNU 的 OpenMP 实现也是如此。我不知道在 Microsoft 的 OpenMP 实现中控制线程绑定（又名关联掩码）的任何方法。

# oracle - 流畅的nhibernate调用oracle函数

> ID：13958864
> 
> 赞同：0
> 
> 时间：2012-12-19T18:36:12.470
> 
> 标签：oracle, function, nhibernate, fluent

`我尝试在包中调用 oracle 函数

功能 ：

```
FUNCTION test_func (I_PARAMS               IN TPARAMS,
                O_RESPONSE_CODE        OUT VARCHAR2,
              O_RESPONSE_EXPLANATION OUT VARCHAR2)
        RETURN BOOLEAN IS
    BEGIN
            O_RESPONSE_CODE          := 0;
            O_RESPONSE_EXPLANATION   := 'Başarılı';
            return true;
    END test_func; 
```

Ora 测试脚本：

```
declare
  I_PARAMS                                          TPARAMS;
  O_RESPONSE_CODE                      VARCHAR2(4);
  O_RESPONSE_EXPLANATION    VARCHAR2(500);
  reslt                    boolean;

begin
  O_RESPONSE_EXPLANATION  := ' a';
  O_RESPONSE_CODE                    := '2';

reslt := D_PKG.test_func(I_PARAMS  , O_RESPONSE_CODE ,  O_RESPONSE_EXPLANATION );
dbms_output.put_line(o_response_explanation || ' ' || o_response_code);
end; 
```

它可以工作，但我的流利代码不起作用：S 有人可以帮助我吗？

就是这样……

```
IQuery query = session.CreateSQLQuery("reslt := D_PKG.test_func(I _PARAMS  , O_RESPONSE_CODE ,  O_RESPONSE_EXPLANATION )")
                    .SetParameter("I_PARAMS", input, NHibernateUtil.Object)
                    .SetString("O_RESPONSE_CODE", null)
                    .SetString("O_RESPONSE_EXPLANATION", null)
                    .SetBoolean("reslt",false);

                output.RESULT = query.ExecuteUpdate(); 
```

这是我的参数 I_PARAMS 不作为命名参数存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:53:30.563

可能是`session.CreateSQLQuery("reslt := D_PKG.test_func(:I _PARAMS , :O_RESPONSE_CODE , :O_RESPONSE_EXPLANATION )")`。错过了：字符？

# c - 警告：函数“fsync”的隐式声明在 C99 中无效

> ID：13958866
> 
> 赞同：4
> 
> 时间：2012-12-19T18:36:25.817
> 
> 标签：c, macos, compilation, posix, clang

由于某种原因，当我编译我的代码时，编译器找不到 fsync 和 truncate 的原型。我明白了：

```
cc -c -Wall -Wno-overflow  -pedantic -std=c99 -I/Users/matt/Programming/BitEagle_Projects/cbitcoin/include -I/usr/local/ssl/include -I/opt/local/include -O3 -arch i386 -arch x86_64 -D_POSIX_SOURCE -fPIC dependencies/storage/CBBlockChainStorage.c -o build/CBBlockChainStorage.o
dependencies/storage/CBBlockChainStorage.c:154:6: warning: implicit declaration of function 'fsync'
      is invalid in C99 [-Wimplicit-function-declaration]
                if(fsync(indexAppend)){
                   ^
dependencies/storage/CBBlockChainStorage.c:649:6: warning: implicit declaration of function
      'truncate' is invalid in C99 [-Wimplicit-function-declaration]
        if (truncate(filename, CBArrayToInt32(data, 0))) {
            ^ 
```

我该怎么做才能删除这些警告？我包括 unistd.h。这是在 OSX 上使用 clang：

```
$ cc --version
Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:44:40.133

如果您使用`-std=c99`，系统头文件将尝试提供与 C 标准兼容的声明/宏命名空间，其中不包括来自 POSIX 或其他标准或非标准扩展的任何附加功能。您需要定义适当的*功能测试宏*来获取它们。例如，放在`-D_POSIX_C_SOURCE=200809L`命令行上或在源文件中定义它。

# mysql - MySQL 查询用于获取多个不同的值

> ID：13958868
> 
> 赞同：2
> 
> 时间：2012-12-19T18:36:46.170
> 
> 标签：mysql, select, distinct

```
id  qid answer  date                    answer_userKey
72  2   2       2012-07-30 00:00:00     1
71  1   4       2012-07-30 00:00:00     1
70  2   2       2012-07-30 00:00:00     2
69  1   4       2012-07-30 00:00:00     2
68  2   2       2012-07-30 00:00:00     3
67  1   3       2012-07-30 00:00:00     3
66  2   2       2012-07-31 00:00:00     4
65  1   4       2012-07-31 00:00:00     4
64  2   2       2012-07-31 00:00:00     5 
```

这是我的示例表，我需要像这样为每个日期获取所有数据 + 所有不同的 answer_userKeys

```
date           DISTINCT(answer_userKey)
2012-07-30     3
2012-07-31     2 
```

以及正常关联数组中的所有单个值，就像你做的那样

```
SELECT * FROM tbl_data 
WHERE date BETWEEN '2012-07-29' AND '2012-08-01' 
```

在这里尝试了一切:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:45:25.790

试试这个：

```
SELECT DATE(date) dte, COUNT(DISTINCT answer_userKey) cnt
FROM tbl_data 
WHERE DATE(date) BETWEEN '2012-07-29' AND '2012-08-01'
GROUP BY dte; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:41:19.437

我希望这是你的要求..这个适用于甲骨文

```
select to_char(date,'yyyy-mm-dd') date
      ,count(distinct answer_userKey) DISTINCT(answer_userKey) 
from table_name 
group by to_char(date,'yyyy-mm-dd') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:45:35.510

如果您需要详细数据和聚合数据，那么您可能需要执行两个查询来获取这两组不同的数据，或者只需查询详细信息并使用您使用的任何语言构建聚合（可能在多维数组中） ）。例如在伪代码中：

```
Query: SELECT * FROM tbl_data WHERE date BETWEEN '?' AND '?'

array; // multidimensional associative array to be populated
while ([fetch next row from result set as row] ) {
    array[row['date']][row['answer_userKey']] = row
} 
```

# javascript - 根据菜单选择将文本文件内容加载到文本字段中

> ID：13958873
> 
> 赞同：2
> 
> 时间：2012-12-19T18:37:12.807
> 
> 标签：javascript, html, perl, drop-down-menu, cgi

我正在尝试做与该用户意图相同的事情：

[如何使用下拉选择填写文本字段](https://stackoverflow.com/questions/5263839/how-to-fill-in-a-text-field-with-drop-down-selection)

而且效果很好。除了我的下拉菜单项的“值”是文本文件的本地路径（在 linux 服务器上）之外，我不想打印出该路径，而是要加载文本文件的实际内容。

而不是直接加载值

```
 mytextbox.value = mytextbox.value  + this.value; //to appened 
```

我想加载this.value（例如/var/files/myfile.txt）指向的文件（在服务器而不是客户端）。

我的搜索显示 JS 无法做到这一点，但我希望有一种简单的方法可以做到这一点。

** 我应该提到这是在 perl-cgi 脚本中格式化的 HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:57:58.527

xmlhttpRequest 是唯一可以使用 xmlhttp.open 和 xmlhttp.send

# python - 使用 psycopg2 copy_from 和 copy_expert 复制表？

> ID：13958874
> 
> 赞同：4
> 
> 时间：2012-12-19T18:37:15.713
> 
> 标签：python, postgresql, psycopg2

我想使用psycopg2 中可用的[复制命令将表行从旧数据库复制到新数据库中。](http://initd.org/psycopg/docs/usage.html#copy)我以为我可以通过[StringIO](http://docs.python.org/2/library/stringio.html#module-StringIO)重定向，如下所示

```
io = StringIO.StringIO('')
whereClause = " SELECT %s FROM %s WHERE home_city='%s' "%(
                 ','.join(columns), tablename, city,
                     )
old_db_cursor.execute(whereClause)
rows = old_db_cursor.fetchall()
logger.info('Should get %d rows',len([r for r in rows]))
sql = 'COPY (%s) to STDOUT'%(whereClause,)
old_db_cursor.copy_expert( sql, io,  )
new_db_cursor.copy_from( io, tablename, columns=columns)
new_db_connection.commit() 
```

日志显示我应该得到 30,000 行。但是尽管没有错误消息，但我没有得到新的行。对于它的价值，检查`io.read()`显示它的长度为零。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:43:33.787

回答我自己的问题，有必要倒带 StringIO 对象，使用

```
io.seek(0) 
```

# linux - 使用带有“find”命令的 while/for 循环来复制文件和目录

> ID：13958884
> 
> 赞同：-1
> 
> 时间：2012-12-19T18:37:55.470
> 
> 标签：linux, find, cp

我有以下问题：我想制作一个脚本，将某个目录完全备份到另一个目录。我可能不会使用 cp -r 或任何其他递归命令。所以我在考虑使用while或for循环。需要备份的目录由参数给出。这是我到目前为止所拥有的：

```
OIFS="$IFS"
IFS=$'\n'

for file in `find $1`
do
  cp $file $HOME/TestDirectory
done

IFS="$OIFS" 
```

但是当我执行它时，这就是我的终端所说的： Script started, file is typescript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:44.507

试试这个：

```
find "$1" -type f -print0 | xargs -0 cp -t $HOME/TestDirectory 
```

不要运行你的脚本`script`！

在文件顶部添加这个（shebang）：

```
#!/bin/bash

find "$1" -type f -print0 | xargs -0 cp -t $HOME/TestDirectory 
```

更改脚本添加`executable`标志的权限：

```
chmod +x myScript 
```

使用参数在本地运行您的脚本：

```
./myScript rootDirectoryWhereSearchForFiles 
```

# javascript - 要选择的事件处理程序

> ID：13958890
> 
> 赞同：5
> 
> 时间：2012-12-19T18:38:13.960
> 
> 标签：javascript, jquery, html, css, select

我以[这里](http://tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/)为例， **Demo 6**

一切正常，但是我不知道如何放置处理程序，这将从那里获得价值。也就是当你改变选择器时改变“内容”。这是选择器的代码：

```
 <select id="cd-dropdown" class="cd-select">
    <option value="-1" selected>Choose an animal</option>
    <option value="1" class="icon-monkey">Monkey</option>
    <option value="2" class="icon-bear">Bear</option>
    <option value="3" class="icon-squirrel">Squirrel</option>
    <option value="4" class="icon-elephant">Elephant</option>
    </select> 
```

,但是页面上已经显示

```
 <div class="cd-dropdown">
    <span>Choose an animal</span>
    <input type="hidden" name="cd-dropdown">
    <ul>
        <li data-value="1"><span class="icon-monkey">Monkey</span></li>
        <li data-value="2"><span class="icon-bear">Bear</span></li>
        <li data-value="3"><span class="icon-squirrel">Squirrel</span></li>
        <li data-value="4"><span class="icon-elephant">Elephant</span></li>
    </ul>
   </div> 
```

，我意识到发生了这种“转变”

```
jquery.dropdown.js 
```

* * *

创建了 2 个表单，forma1 的 id = "f1"，同样 form2 c id = "f2"，一个表单确实隐藏了。穿上选择

```
onChange="a(this.value)" 
```

,

```
function a(value){  
$('#f' + value).show() 
if (value == 1) 
    $('#f2').hide() 
else
    $('#f1').hide()
} 
```

中性选择有效，但事实并非如此。如果控制台浏览器调用一个具有一定值的函数，例如： *а(2)*，则一切正常输出。

所以就像把事件处理程序放在哪里，它检查隐藏字段的值？？？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:22:11.830

[***演示***](http://jsfiddle.net/8uw6Y/)

**HTML**：

```
<select id="cd-dropdown" class="cd-select">
    <option value="-1" selected>Choose an animal</option>
    <option value="1" class="icon-monkey">Monkey</option>
    <option value="2" class="icon-bear">Bear</option>
    <option value="3" class="icon-squirrel">Squirrel</option>
    <option value="4" class="icon-elephant">Elephant</option>
</select>

<div id="div1" class="animalDiv">MONKEY</div>
<div id="div2" class="animalDiv">BEAR</div>
<div id="div3" class="animalDiv">SQUIRREL</div>
<div id="div4" class="animalDiv">ELEPHANT</div> 
```

**CSS**：

```
.animalDiv {
 display:none;
} 
```

**JS/jQuery** :

```
$(function() {
    $('#cd-dropdown').dropdown({
        gutter: 5,
        stack: false,
        delay: 100,
        slidingIn: 100,
        onOptionSelect: function(e) {
            var _counter = ($(e).html()).split('data-value="')[1].split('"')[0];
            $(".animalDiv").hide();
            $("#div" + _counter).show();
        }
    });
});​ 
```

***注意：** 我应该注意到我还在 jquery.dropdown.js 中进行了更改：

```
val !== -1 ? classes !== undefined ? optshtml += '<li><span data-value="' + val + '" class="' + classes + '">' + label + '</span></li>' : optshtml += '<li><span data-value="' + val + '">' + label + '</span></li>' : selectlabel = label; 
```

从到`data-value`_`li``span`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:23:58.513

我不确定你到底在问什么，但我会采取行动。

我假设您正在询问如何将处理程序添加到单击“选项”之一。也就是说，当有人点击“猴子”时，你想用一个函数来处理那个点击。

通过查看插件源，我看到他们允许一个名为`'onOptionSelect'`. 我没有看到有关此选项的任何解释或文档，但从查看源代码来看，这是单击事件的处理程序：

```
this.opts.on( 'click.dropdown', function() {
        if( self.opened ) {
            var opt = $( this );
            self.options.onOptionSelect( opt );
            self.inputEl.val( opt.data( 'value' ) );
            self.selectlabel.html( opt.html() );
            self.close();
        }
   } ); 
```

在这里您可以看到他们正在调用“onOptionSelect”函数并将所选项目作为唯一参数传入。因此，当您在脚本中创建下拉列表时，请为您的处理程序添加函数：

```
$('#cd-dropdown').dropdown({onOptionSelect: aHandler});

function aHandler(value){  
$('#f' + value).show() 
if (value == 1) 
    $('#f2').hide() 
else
    $('#f1').hide()
} 
```

通过这种方式，您可以编写一个处理程序并在单击选项时对该值执行任何您想要的操作。

如果您想弄清楚在“下拉菜单”中选择了哪些项目，则需要查询名称为“cd-dropdown”的“隐藏”。此隐藏输入具有选定值：

```
$('input[name="cd-dropdown"]').val() --> equals the selected value 
```

我希望这是有帮助的。我认为该插件需要更多文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T05:41:35.073

```
$('#cd-dropdown').dropdown({
            onOptionSelect: function (opt) {
                alert(opt.data('value'));
                return false;
            }
        }); 
```

# mysql - 从数据库中获取日期范围内的数据

> ID：13958891
> 
> 赞同：4
> 
> 时间：2012-12-19T18:38:14.597
> 
> 标签：mysql, unix-timestamp

我总是将我的日期作为 unix 时间戳存储在数据库中。现在我有两个日期：我想在网站上显示的一些图像的开始日期和结束日期。该图像应在“开始日期”上可见，并在达到“结束日期”后消失。

我现在使用这个简单的查询：

```
SELECT name, image, link
FROM exclusive
WHERE CURDATE( ) >= from_unixtime( start_date, '%d-%m-%Y' )  
AND CURDATE( ) <= from_unixtime( end_date, '%d-%m-%Y' )
AND category = 'movies'
LIMIT 0 , 5 
```

但这每次都返回一个空结果，尽管数据范围内有两个字段。

我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:45:04.843

试试这个，它还有一个额外的好处，你实际上可以使用你在开始和结束日期可能拥有的任何索引。

```
SELECT name, image, link
FROM exclusive
WHERE UNIX_TIMESTAMP() BETWEEN start_date AND end_date
AND category = 'movies'
LIMIT 0 , 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T18:46:04.110

问题是您将比较作为字符串类型，而不是时间戳。因此，格式很重要。更改为 yyyy-mm-dd 使其工作（因为最重要的部分，年份，在左边）。

但更好的和可优化的索引是作为时间戳进行比较。

```
WHERE start_date <= unix_timestamp(curdate())
    AND end_date >= unit_timestamp(curdate()) 
```

或者，对于某些 SQL 引擎，使用 BETWEEN 运算符：

```
WHERE unix_timestamp(curdate()) BETWEEN start_date AND end_date 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T18:48:51.757

而不是格式化，使用该[`DATE()`](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date)函数删除时间戳的时间部分：

```
SELECT name, image, link
FROM exclusive
WHERE 
    CURDATE( ) BETWEEN DATE(from_unixtime( start_date ) )
    AND DATE(from_unixtime( end_date ) )
    AND category = 'movies'
LIMIT 0 , 5 
```

# c# - 在 nUnit 上运行 Selenium 测试不执行脚本

> ID：13958892
> 
> 赞同：6
> 
> 时间：2012-12-19T18:38:20.300
> 
> 标签：c#, selenium, nunit, webdriver, selenium-webdriver

当我在 C#-visualnUnit 上运行我的测试时，它运行成功，但是当我只在 Nunit 上运行它并且只在项目中使用 dll 时，它的输出如下所示：

```
Started ChromeDriver
port=49771
version=23.0.1240.0
log=\chromedriver.log

[1220/011848:ERROR:ipc_sync_channel.cc(738)] Canceling pending sends
[1220/011848:ERROR:ipc_sync_channel.cc(738)] Canceling pending sends
[1220/011848:ERROR:ipc_sync_channel.cc(738)] Canceling pending sends
[18104:3564:1220/011849:ERROR:window_impl.cc(55)]Failed to unregister class Chrome_WidgetWin_0\. Error = 1412 
```

我在这里有多线程。它适用于我的 vs 和 visualnUnit。问题是当我尝试仅在 Nunit 中运行它时。

我`IWebdriver driver = new ChromeDriver();`在visualNunit中声明它不会产生任何cmd并且运行平稳，而使用Nunit它只会产生其驱动程序的cmd提示并且不会继续流程。

我运行的系统是：Windows7 64bit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:19:38.273

您必须有错误的退货声明。

应该是这样的：

```
 return ConfigurationSettings.AppSettings["SampleHost"]; 
```

# progress-4gl - 跨应用服务器调用中的事务

> ID：13958901
> 
> 赞同：0
> 
> 时间：2012-12-19T18:38:37.267
> 
> 标签：progress-4gl

进度版本 10c。

假设我有两个不同的应用服务器，让我们调用一个 X 和另一个 Y，每个都指向不同的数据库实例。

如果我有一个在 X 上运行的 .p 进程并使用（锁定）X.db 上的一些记录，并且在其中我调用 appserver Y 上的一个进程，以便操作 Y.db 上的记录...在失败的情况下获得正确的“行为”？

IE

*   Y 进程失败，X 进程可以检测到它并回滚（单独或通过在代码本身中强制它。
*   *X 进程在成功调用 Y 进程后*失败，Y 回滚任何更改。
*   Y 提交后 X 提交：两者都更新了各自的数据并释放了所有锁

即使这项工作有效，我是否应该注意任何具体的警告？性能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:17:43.380

两个进程之间没有事务状态的自动链接。应用服务器只是另一个会话——它与另一个用户没有什么不同。这两个会话恰好在它们之间有一个通信通道，但没有 TRX 状态协调。

在场景 1 中，如果应用服务器调用失败，它会返回错误代码。然后父进程可以通过代码决定它想要做什么。但并不是所有的 TRX 失败都会返回给调用者（想想“kill -9”......）并且应用程序驱动的错误逻辑可能有错误。

在场景 2 中，Y 将独立于 X 提交。不会发生回滚。

我看不出场景 3 与场景 2 有什么不同。如果其中一个是异步调用，它仍然无关紧要，事务仍然彼此不同。

# linux - 在文件中查找唯一字符串，向上一行并追加？

> ID：13958903
> 
> 赞同：4
> 
> 时间：2012-12-19T18:38:45.570
> 
> 标签：linux, bash, sed, awk

有人可以帮我解决这个问题吗？我正在寻找可用于在配置文件 (Linux) 中查找唯一字符串的 SED 或 AWK 命令，向上一行并将字符串附加到该行的末尾？

例如：

**配置文件：**

> 定义主机组{
> hostgroup_name http-urls ; 主机组别
> 名 HTTP URL 的名称；组
> 成员的长名称 domain1.com, domain2.com, domain3.com,
> #MyUniqueString
> }

在上面的示例中，我想使用 SED 或 AWK 来查找**#MyUniqeString**，上一行以**成员**开头并在行尾附加**“domain4.com”**。

我在下面找到了这个问题，但我需要先在文本文件中搜索字符串，然后在上面一行。

[Bash脚本：在文件特定行的最后一个字符处附加文本](https://stackoverflow.com/questions/5890052/bash-script-appending-text-at-the-last-character-of-specific-line-of-a-file)

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:52:43.983

您可以通过以下方式有效地做到这一点[`ed`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/ed.html)：

```
ed yourfile <<-'EOF'
    /#MyUniqueString/ # Find the matching line
    - # Go up a line
    a # Append text
    domain4.com
    . # Stop appending
    .-1,.j # Join the line above with the appended line
    w # Write the line
EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:25:14.280

## 三种不同解决方案的比较

### 更小，使用`sed`：

```
sed -e ':a;N;/\n#MyUniqueString/{s/\n/ domain4.com\n/};H;s/\n.*$//;p;g;s/^.*\n//;ta;' config.file 
```

这可以运行为：

```
sed -e '
   :a;
    N;
    /\n#MyUniqueString/{
        s/\n/ domain4.com\n/
    };
    H;
    s/\n.*$//;
    p;
    g;
    s/^.*\n//;
    ta;
   ' config.file 
```

*简介：*

```
time sed ':a;N;/\n#MyUniqueString/{s/\n/ domain4.com\n/};H;
                      s/\n.*$//;p;g;s/^.*\n//;ta;' config.file 
define hostgroup{
hostgroup_name http-urls ; The name of the hostgroup
alias HTTP URLs ; Long name of the group
members domain1.com, domain2.com, domain3.com, domain4.com
#MyUniqueString
}

real    0m0.010s
user    0m0.000s
sys     0m0.008s 
```

### 为什么不是**纯 bash**？

由于**没有 fork**，这可能非常快（如果来自`bash`并且不是太长的*配置文件*）：

```
readarray configFile < ./config.file
for ((i=${#configFile};i--;));do
    [[ "${configFile[i]}" =~ "#MyUniqueString" ]] && break
  done
configFile[i-1]+=" domain4.com"
printf "%s\n" "${configFile[@]//$'\n'/}" 
```

分析运行：

```
time {
    readarray configFile < ./config.file
    for ((i=${#configFile};i--;));do
        [[ "${configFile[i]}" =~ "#MyUniqueString" ]] && break
      done
    configFile[i-1]+=" domain4.com"
    printf "%s\n" "${configFile[@]//$'\n'/}"
} 
```

会给：

```
define hostgroup{
hostgroup_name http-urls ; The name of the hostgroup
alias HTTP URLs ; Long name of the group
members domain1.com, domain2.com, domain3.com, domain4.com
#MyUniqueString
}

real    0m0.001s
user    0m0.000s
sys     0m0.000s 
```

### 测试`awk`

```
time awk '{a[NR]=$0}/#MyUniqueString/{a[NR-1]=a[NR-1]" domain4.com"}END{for(i=1;i<=NR;i++)print a[i]}' config.file 
define hostgroup{
hostgroup_name http-urls ; The name of the hostgroup
alias HTTP URLs ; Long name of the group
members domain1.com, domain2.com, domain3.com, domain4.com
#MyUniqueString
}

real    0m0.009s
user    0m0.004s
sys     0m0.000s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T19:32:32.513

这是另一个使用反向引用的 sed 解决方案：

```
sed '{N; N; s/\(.*\)\n\(#MyUniqueString\)/\1domain4.com\n\2/g}' config.file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T18:46:15.090

试试这个单行：

```
awk '{a[NR]=$0}/#MyUniqueString/{a[NR-1]=a[NR-1]"domain4.com"}END{for(i=1;i<=NR;i++)print a[i]}' configFile 
```

测试

```
kent$  cat test.txt 
define hostgroup{
hostgroup_name http-urls ; The name of the hostgroup
alias HTTP URLs ; Long name of the group
members domain1.com, domain2.com, domain3.com,
#MyUniqueString
}

kent$  awk '{a[NR]=$0}/#MyUniqueString/{a[NR-1]=a[NR-1]"domain4.com"}END{for(i=1;i<=NR;i++)print a[i]}' test.txt 
define hostgroup{
hostgroup_name http-urls ; The name of the hostgroup
alias HTTP URLs ; Long name of the group
members domain1.com, domain2.com, domain3.com,domain4.com
#MyUniqueString
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T20:54:05.270

这个 awk 解决方案只需要记住上一行

```
awk '
    /#MyUniqueString/ {prev = prev "domain4.com"} 
    NR > 1 {print prev}
    {prev=$0}
    END {print prev}
' 
```

# mysql - #1062 - 键 'PRIMARY' 的重复条目 '%-test-'

> ID：13958906
> 
> 赞同：0
> 
> 时间：2012-12-19T18:38:56.240
> 
> 标签：mysql, mamp

我正在尝试通过 MAMP 中的 phpMy Admin 使用 MySQl 备份 .sql 文件，但出现此错误：

```
SQL query: 

--
-- Dumping data for table `db`
--
INSERT INTO  `db` (  `Host` ,  `Db` ,  `User` ,  `Select_priv` ,  `Insert_priv` ,       `Update_priv` ,  `Delete_priv` ,  `Create_priv` ,  `Drop_priv` ,  `Grant_priv` ,  `References_priv` ,  `Index_priv` ,  `Alter_priv` , `Create_tmp_table_priv` ,  `Lock_tables_priv` ,  `Create_view_priv` ,  `Show_view_priv` ,  `Create_routine_priv` ,  `Alter_routine_priv` ,  `Execute_priv` ,  `Event_priv` ,  `Trigger_priv` ) 
VALUES 
   (  '%',  'test',  '',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'N',  'Y',  'Y',  'Y',  'Y',          
      'Y',  'Y',  'Y',  'Y',  'N',  'N',  'Y',  'Y'), 
   (  '%',  'test\\_%',  '',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'N',  'Y',  'Y',  'Y',  'Y',       'Y',  'Y',  'Y',  'Y',  'N',  'N',  'Y',  'Y'), 
   (  'localhost',  'phpmyadmin',  'phpmyadmin',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'N',      
      'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y'  );

MySQL said: 

#1062 - Duplicate entry '%-test-' for key 'PRIMARY' 
```

它是说错误就在这一行：

```
 '%',  'test',  '',  'Y',  'Y',  'Y',  'Y',  'Y',  'Y',  'N',  'Y',  'Y',  'Y',  'Y',      'Y',  'Y',  'Y',  'Y',  'N',  'N',  'Y',  'Y' 
```

有什么提示吗？任何方式我都可以通过 MAMP 忽略此错误，因为我在这里找到：http: [//linuxadminzone.com/ignore-mysql-error-while-executing-bulk-statements/](http://linuxadminzone.com/ignore-mysql-error-while-executing-bulk-statements/)？

编辑：

这是数据库输出（我认为）：

```
CREATE TABLE IF NOT EXISTS `db` (
  `Host` char(60) COLLATE utf8_bin NOT NULL DEFAULT '', 
  `Db` char(64) COLLATE utf8_bin NOT NULL DEFAULT '', 
  `User` char(16) COLLATE utf8_bin NOT NULL DEFAULT '',
  `Select_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Insert_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Update_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Delete_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Create_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Drop_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Grant_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `References_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Index_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Alter_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Create_tmp_table_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Lock_tables_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Create_view_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Show_view_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Create_routine_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Alter_routine_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Execute_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Event_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  `Trigger_priv` enum('N','Y') CHARACTER SET utf8 NOT NULL DEFAULT 'N',
  PRIMARY KEY (`Host`,`Db`,`User`),
  KEY `User` (`User`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='Database privileges'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:06:52.240

看起来您正在尝试使用空用户插入两行`''`。在插入第一行空用户后，尝试插入另一个将导致密钥冲突。

# android - 添加后如何在Android中实现下拉导航操作栏？

> ID：13958912
> 
> 赞同：3
> 
> 时间：2012-12-19T18:39:35.200
> 
> 标签：android, drop-down-menu, navigation, android-actionbar

按照本指南，[http://wptrafficanalyzer.in/blog/adding-drop-down-navigation-to-action-bar-in-android/](http://wptrafficanalyzer.in/blog/adding-drop-down-navigation-to-action-bar-in-android/)

我能够添加我的下拉导航栏。点击事件和一切功能。现在，我该如何做到这一点，一旦选择了一个选项，它就会导航到具有自己布局和不同功能的不同屏幕。

任何帮助都会很棒，在此先感谢！

编辑：这就是我所拥有的。我的应用程序运行了大约一毫秒，我可以看到“Hello World”，然后它崩溃了。顺便说一句，我正在使用 Sherlock，如果这很重要的话。

```
package com.poe.statcalc;

import com.actionbarsherlock.app.SherlockActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.OnNavigationListener;

public class MainActivity extends SherlockActivity {

 /** An array of strings to populate dropdown list */
String[] actions = new String[] {
    "Bookmark",
    "Subscribe",
    "Share",
    "Something"

};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    /** Create an array adapter to populate dropdownlist */
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.sherlock_spinner_item, actions);

    /** Enabling dropdown list navigation for the action bar */
    getSupportActionBar().setNavigationMode(com.actionbarsherlock.app.ActionBar.NAVIGATION_MODE_LIST);

    /** Defining Navigation listener */
    ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {

        @Override
        public boolean onNavigationItemSelected(int itemPosition, long itemId) {
            switch(itemPosition) {
            case 0:
                Intent i = new Intent(MainActivity.this, SecondActivity.class);
                startActivity(i);
                break;
            case 1:
                //...
                break;
            }
            return false;
        }
    };

    /** Setting dropdown items and item navigation listener for the actionbar */
    getSupportActionBar().setListNavigationCallbacks(adapter, navigationListener);
    adapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

}

@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:42:38.713

如果要更改元素，则需要对其进行操作`ArrayAdapter`，但我认为您不能将`ArrayAdapter<String>`类用于该多孔。您可能需要使用字符串以外的其他内容。

要处理点击，您需要更改`onNavigationItemSelected`功能：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    switch(itemPosition) {
    case 0:
        Intent i = new Intent(this, SecondActivity.class);
        startActivity(i);
        break;
    case 1:
        // ...
        break;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:42:03.127

您必须通过调用回调来启动一个新的活动`startActivity(Intent)`。`onNavigationItemSelected`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T08:16:45.103

不知道这是否是您遇到的确切问题（尽管听起来很像！），但请注意使用微调器中的 startActivity：它可以在 onCreate() 期间调用。

[ActionBar中的onNavigationItemSelected在启动时被调用如何避免它？](https://stackoverflow.com/questions/10167162/onnavigationitemselected-in-actionbar-is-being-called-at-startup-how-can-avoid-i)

# java - JBoss 和 Quartz 上的 Java 堆空间停止运行

> ID：13958916
> 
> 赞同：0
> 
> 时间：2012-12-19T18:39:45.713
> 
> 标签：java, jboss, heap-memory, quartz-scheduler

我正在使用 JBoss 5.1.0.GA 和 Quartz Sheduler。当我的 JBoss 发生 Java 堆空间时，我的 Quartz 调度程序停止。奇怪的是：我的Jboss在那之后还在运行

这是我的堆栈

```
 2012-12-19 10:32:21,296 ERROR [STDERR] (AOPListner) Exception in thread "AOPListner" 
2012-12-19 10:32:26,531 ERROR [STDERR] (AOPListner) java.lang.OutOfMemoryError: Java heap space
2012-12-19 10:32:26,531 ERROR [STDERR] (AOPListner)     at java.util.WeakHashMap.put(WeakHashMap.java:416)
2012-12-19 10:32:28,125 ERROR [STDERR] (AOPListner)     at org.jboss.aop.AspectManager.getAdvisors(AspectManager.java:546)
2012-12-19 10:32:29,703 ERROR [STDERR] (AOPListner)     at org.jboss.console.plugins.AOPLister$RefreshPoller.run(AOPLister.java:891)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread) Exception in thread "DefaultQuartzScheduler_QuartzSchedulerThread" 
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread) java.lang.OutOfMemoryError: Java heap space
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronExpression.addToSet(CronExpression.java:852)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronExpression.storeExpressionVals(CronExpression.java:483)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronExpression.buildExpression(CronExpression.java:376)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronExpression.<init>(CronExpression.java:248)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronExpression.clone(CronExpression.java:1375)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.CronTrigger.clone(CronTrigger.java:431)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.simpl.RAMJobStore.acquireNextTrigger(RAMJobStore.java:1161)
2012-12-19 10:32:45,593 ERROR [STDERR] (DefaultQuartzScheduler_QuartzSchedulerThread)   at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:233) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T05:47:08.343

你应该明白这是一个错误，而不是异常。基本上，一旦你在 Java 中内存不足，你的进程就会变得不稳定，即使 jboss 继续运行，你也无法真正确定未来程序执行的结果是什么。

我建议进行内存转储（JVM 中有一个参数允许在发生此错误时保存内存转储）。然后用你最喜欢的分析器分析它（VisualVM 是免费的并且捆绑到 JDK，或者你可以使用任何其他的）并尝试找出错误发生的原因，而不是如何保持 Quartz 运行。

它可能是应用程序泄漏，或者创建了太多对象。在任何情况下都应该对其进行分析。

当然，通常对此的“即时”解决方案只是增加您的 java 进程的内存堆大小，但如果您说它不是一个选项，我不会详细说明...

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:41:51.977

这就是为什么这些被称为错误。因此，修复内存问题并重新启动服务器总是好的，因为当它从内存不足错误中恢复时，您可能会遇到异常行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:43:52.607

尝试为您的 jboss 服务器分配更多内存并重新启动它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T06:40:32.783

您可以尝试停止和备份+删除 Jboss as's 或 esb's 自动创建的表，如上所示；

> `JBM_USER JBM_ROLE JBM_POSTOFFICE JBM_MSG JBM_COUNTER ... etc.`

然后你应该重新启动服务器。

这解决了我们的问题。

# c# - 使用 C#/CSP 在 HSM 中使用不可导出密钥进行 RSA 加密

> ID：13958921
> 
> 赞同：8
> 
> 时间：2012-12-19T18:40:09.797
> 
> 标签：c#, encryption, rsacryptoserviceprovider

我正在尝试使用这段代码在 C# 中使用 RSA（CSP 中的交换密钥）加密对称密钥（RSA 密钥 CSP50C8C7CD 不可导出，它在 HSM 中）：

```
CspParameters csp_dnet = new CspParameters(1, "HSM especific CSP");
csp_dnet.Flags = CspProviderFlags.UseNonExportableKey;
csp_dnet.KeyContainerName = "test";

RSACryptoServiceProvider rsa_dnet = new RSACryptoServiceProvider(csp_dnet);

// Create 3DES key
TripleDES tripleDES = new TripleDESCryptoServiceProvider();

// Encrypt 3DES with RSA
byte[] encryptedSessionKey = rsa_dnet.Encrypt(tripleDES.Key, false); 
```

看到 CSP 日志，我注意到 C# 正在尝试导出密钥以继续操作。下面的 CSP 日志仅显示有关**rsa_dnet.Encrypt**使用的部分：

```
LOG CSP

...

[12/12/2012 17:28:45] [3688] D [CryptExportKey]  Blob type: PRIVATEKEYBLOB

...

[12/12/2012 17:28:45] [3688] E [CryptExportKey]  Return: FALSE. An internal error occurred. 
```

Windows SO 调用 CryptExportKey 传递 PRIVATEKEYBLOB 意味着导出私钥。

```
LOG HSM

...
2012/12/12 17:44:02 [4DD18140] new key 'test/CSP50C8C7CD', t: 6, a: 0
2012/12/12 17:44:14 [4DC2A1C0] 'test' auth ok, 10.0.87.19
2012/12/12 17:44:17 [4DC2A1C0] 'test/CSP50C8C7CD' not exportable, conn: 9  --- ERROR 
```

在 HSM 中，此日志显示 Windows SO 正在尝试提取私钥（这意味着 ERRO，因为该密钥不可导出）。

当我在 HSM 中使用可导出密钥 CSP50C8C7CE 时，日志显示一切正常：

```
LOG HSM

...

2012/12/12 17:47:46 [4DEF4040] 'test' auth ok, IP: 10.0.87.19
2012/12/12 17:47:46 [4DEF4040] export: 'test/CSP50C8C7CE', 1462
2012/12/12 17:47:46 [4DEF4040] export: 'test/CSP50C8C7CE', 1462
2012/12/12 17:47:46 [4DEF4040] delete 'test/CSP50C8C7CE'
2012/12/12 17:47:46 [4DEF4040] import obj 'test/CSP50C8C7CE', 00000004
2012/12/12 17:47:46 [4DEF4040] pk test/CSP50C8C7CE [1]
2012/12/12 17:47:46 [4DEF4040] import obj 'cf1c34c8be5d2fa8a4575c63dd903454', 00000003
2012/12/12 17:47:46 [4DEF4040] delete 'test/CSP50C8C7CE'
2012/12/12 17:47:46 [4DEF4040] import obj 'test/CSP50C8C7CE', 00000006
2012/12/12 17:47:47 [4DEF4040] export: 'cf1c34c8be5d2fa8a4575c63dd903454', 24
2012/12/12 17:47:47 [4DEF4040] delete 'cf1c34c8be5d2fa8a4575c63dd903454' 
```

请注意，此日志显示了许多 RSA 密钥导入/导出操作（参考：CSP50C8C7CE - 可导出密钥）。

**问题：** 库 System.Cryptography 中的 Encrypt 函数需要密钥必须始终可导出？或者我在我的程序中犯了任何错误？可能有任何遗漏的参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:23:29.080

您不能在 HSM 中使用不可导出的密钥在内存中进行加密或解密。由于您尝试在内存中进行加密，因此 .NET 正在尝试将私钥提取到内存中，而 HSM 阻止了它。另一方面，您可以拥有私钥的句柄并将您的“要加密/解密的数据”发送到 HSM。换句话说，您可以通过指定其句柄来告诉 HSM 使用其包含的私钥对您的数据进行加密。

您的 HSM 应该为您提供一个实现 PKCS11 标准并且通常用 C 编写的 API。您可以从这个非托管库中提取方法并在 C# 中使用它们。[在这里](http://sourceforge.net/projects/pkcs11net/)，您可以找到用 C# 编写的 PKCS11 包装器库。

# vb.net - VB.NET - 如何将原始图像数据转换为字符串

> ID：13958924
> 
> 赞同：1
> 
> 时间：2012-12-19T18:40:35.383
> 
> 标签：vb.net, image-processing, httpwebrequest, gdi

如何将原始图像数据获取到 VB.NET 中的字符串，类似于以下内容：

```
J©õÝ¨e‚Lnž¿Ëã/Ç§úÐ5ý¼C÷Cý>ß’t;fm—=Äw:�/E±ËÙÏ$á@%Pc>×    Šgw.²Ab“:ÅÓù:Ï¯Ìh6à€Z§Ó‚g£®hÚD6¨Ø^Ú2ô`ä¨L�YÆÄÅCX#I“ÈÌãj¦L˜•’|¥�Eb¡ëQ–¤Ú, 3\UzL  öÔoj4�•±’u«c¼#„oÕ`îF>·o—ŠûÅ«ÎÑ™¶Ç˜ýº*i°œÈVŒ�Qû”Ñ[.�ÔmçE•ì¦eNCh�Ù
é§�É$m¿ôš"»ÌNæ(VÌmp›F¹XÈ88™ªüµ…d•XµÔÜ#�ˆŠv‘º‚F‚§Yûb 
```

我目前的代码是：

```
Dim FileName As String = "Image.jpg"
Dim ImageData() As Byte = File.ReadAllBytes(ProfileImagePath)
Dim NewImageData As String = Convert.ToBase64String(ImageData) 
```

这将返回 Base64 代码，但我正在尝试获取上面示例中的实际原始数据，以便我可以发布到也以这种方式发布的分段上传表单。

我上传的完整代码是：

```
Dim boundary As String = "-----------------------------" & DateTime.Now.Ticks.ToString("x")
        Dim req As HttpWebRequest = DirectCast(WebRequest.Create("http://www.mysite.com/upload.php"), HttpWebRequest)
        req.Method = "POST"
        req.ContentType = "multipart/form-data; boundary=" & "---------------------------" & DateTime.Now.Ticks.ToString("x")
        req.KeepAlive = False
        Dim builder As New StringBuilder()
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""variable1""" & vbCrLf & vbCrLf & "1" & vbCrLf)
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""file""; filename=""" & FileName & """" & vbCrLf)
        builder.Append("Content-Type: application/octet-stream")
        builder.Append(vbCrLf & vbCrLf)
        ' Add Photo Here
        If UpdateImage = True Then
            ' Load Image
            Dim ImageData() As Byte = File.ReadAllBytes(ProfileImagePath)
            Dim NewImageData As String = Convert.ToBase64String(ImageData)
            ' Add Image To Header
            builder.Append(NewImageData)
            builder.Append(vbCrLf)
        Else
            builder.Append(vbCrLf)
        End If
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""save""" & vbCrLf & vbCrLf & "save")
        ' Footer Bytes
        Dim close As Byte() = Encoding.UTF8.GetBytes("--")
        Dim postHeader As String = builder.ToString()
        Dim postHeaderBytes As Byte() = Encoding.UTF8.GetBytes(postHeader)
        Dim boundaryBytes As Byte() = Encoding.ASCII.GetBytes(vbCrLf & boundary & "--" & vbCrLf)
        Dim length As Long = postHeaderBytes.Length + boundaryBytes.Length
        req.ContentLength = length
        Dim requestStream As Stream = req.GetRequestStream()
        Dim fulllength As Integer = postHeaderBytes.Length + boundaryBytes.Length
        ' Write out our post header
        requestStream.Write(postHeaderBytes, 0, postHeaderBytes.Length)
        ' Write out the trailing boundary
        requestStream.Write(boundaryBytes, 0, boundaryBytes.Length)
        Dim responce As WebResponse
        responce = req.GetResponse()
        requestStream.Close()
        Dim s As Stream = responce.GetResponseStream()
        Dim sr As New StreamReader(s)
        Dim Content As String = sr.ReadToEnd() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:44:34.167

> 这将返回 Base64 代码，但我正在尝试获取实际的原始数据，如上面的示例

“实际原始数据”**不是文本数据**，因此您根本不应该将其放在字符串中；至少不是没有像base64这样的东西。

If you want to post binary data, then *either* use base64 *or* post it as raw bytes, but *not* as text. Your data is *not* UTF-8-encoded text, so don't try to use it as if it were.

(I can't remember the details of multi-part form data; if you can specify a part length before the part itself, then you should be fine to include the binary data directly. If it's *always* just delimited by some separator, then you may want to use base64 instead.)

# android - 在 Android 上处理 SQLite 表和游标

> ID：13958926
> 
> 赞同：7
> 
> 时间：2012-12-19T18:40:41.043
> 
> 标签：android, android-contentprovider, android-sqlite

我很难优化 Android 上 SQLite 数据库处理的向后兼容性、复杂性和最佳实践。我发现了两种未弃用的方法来管理 SQLite 数据库和游标：

*   **直接通过`android.database.sqlite`**
*   **`ContentProvider`,`CursorLoader`和`LoaderManager`**

我正在尝试设计数据库实现的未来证明。这意味着我想实施 Google 推广的最佳实践。[我找到了一个](http://www.vogella.com/articles/AndroidSQLite/article.html#todo_activities)关于实现`ContentProvider`和`LoaderManager`.

如果我遵循 Lars Vogels 的建议，我的代码就会被重复和不必要的复杂性所破坏。这对我数据库中的某些表确实有意义。但是对于具有三个字段的映射表（例如）实现这一点是没有意义的。此外，我遇到`ActionbarSherlock`了回调接口的问题`LoaderManager`（有一个解决方案，但它会使我的数据处理类加倍）。

通过直接处理数据库和游标`android.database.sqlite`会引发资源管理问题（关闭游标！）并使我负责任务处理。

**我的问题：**
您如何在 Android 上处理 SQLite 数据库？
你什么时候加倍努力实施`ContentProvider`和`LoaderManager`？
你如何保持向后兼容？

**我目前的方法：**
我创建了一个将数据库 I/O（通过`android.database.sqlite`）与活动分开的类。所有方法都打开和关闭它们在执行期间（在我的活动之外）使用的游标，并根据需要返回对象或数据（而不是游标）。I/O 操作在`AsyncTasks`. 这种方法似乎非常过时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:15:15.190

我最近遇到了同样的普通 sqllite / 内容提供者困境，看起来内容提供者是解决问题的最常见方法。

即使[官方文档](http://developer.android.com/guide/topics/providers/content-providers.html)声明

> 如果您不打算与其他应用程序共享数据，则无需开发自己的提供程序

他们添加了让未导出的内容提供商使用的选项

```
android:exported="false" 
```

我读过的所有书籍，包括 Reto Meier 的*Professional Android Development 4*，都建议使用内容提供程序。

此外，以大量样板代码为代价，您可以忘记多线程和开放游标问题。

无论如何，我不得不说，你从内容提供者/游标加载器组合中获得的最大优势是，只要底层数据发生变化，你的加载器就会自动得到通知。

如果你使用普通的 sqllite，你需要实现一些方法来让客户端类在后台数据发生变化时得到通知。例如，我使用广播来通知任何活动，即在意图服务中更新了表。

最后，我对您所抱怨的所有代码重复感到有些失望，因此我决定编写一个 python 脚本来仅使用数据模型的描述来生成内容提供程序。您可能必须修改生成的类（或者更好地扩展它），但我认为它可以节省很多时间。你可以在[这里找到](https://github.com/fedepaol/Android-sql-lite-helper)

**结论**：

*   如果您想将数据导出到其他应用程序（不那么常见），您需要使用内容提供商
*   如果您想观察数据/更新 ui，因为您的数据集可能会在后台更改，内容提供程序 + 加载程序非常强大
*   如果你有一个预加载的数据集，也许你在显示数据的同一个活动中更新它，或者你需要对你的表执行简单的操作，也许一个 sqllite 帮助类就足够了

# javascript - 如何在 D3 旭日形图中正确旋转文本标签

> ID：13958929
> 
> 赞同：4
> 
> 时间：2012-12-19T18:40:44.007
> 
> 标签：javascript, d3.js, label, hierarchy, sunburst-diagram

在以下 D3 旭日形首饰：

[http://jsfiddle.net/maxl/eabFC/](http://jsfiddle.net/maxl/eabFC/)

```
.attr("transform", function(d) {
    return "rotate(" + (d.x + d.dx / 2 - Math.PI / 2) / Math.PI * 180 + ")";
}); 
```

左象限中的标签是颠倒的，我想对它们进行旋转，以便文本从左到右读取。

变换应仅适用于从大约 100 度到 270 度的弧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T14:34:16.647

按照这个例子：[http ://www.jasondavies.com/coffee-wheel/](http://www.jasondavies.com/coffee-wheel/)

我在这里编辑了你的 jsfiddle：http: [//tributary.io/inlet/4127332/](http://tributary.io/inlet/4127332/)

你将不得不处理你的长标签，上面的例子展示了如何做多行。

另请注意，您使用的是旧版本的 d3，不再需要单独调用 d3.layout。这是 d3 的新闪亮版本的链接：

```
 <script src="http://d3js.org/d3.v3.js"></script> 
```

# c++ - 使用 C++ 过滤 MySQL ResultSet

> ID：13958932
> 
> 赞同：1
> 
> 时间：2012-12-19T18:40:58.240
> 
> 标签：c++, mysql

有没有办法过滤 MySQL ResultSet？我正在制作一款大型 2D MMO 风格的游戏。我有一个地图的 MySQL 表，定义为：row、col、layer、tile_id。在服务器上，当客户端四处移动时，我将向客户端发送地图块，以便为客户端创建一个无缝的世界。

我已经为此设置了所有内容，但是我想避免在循环遍历每个玩家需要的行/列时过多地访问数据库，所以我做了几个大查询来返回行/列信息。一旦我在寻找行/列时获得了这个 ResultSet，我只想过滤这些值的 ResultSet 以获取 tile_id。所以我的问题是，我可以从我已经运行的查询中过滤包含我知道我需要的所有数据的 ResultSet 来填充它吗？

在 C++ 中执行此操作。

同样，我不想在我的原始查询之后再次访问数据库，所以这必须是 C++ 而不是 sql。我只是不想对数据库进行冲击，并且进行更大的读取与大量较小的读取似乎更有效。

# dns - 使用外部 URL 指向本地服务器，本地

> ID：13958934
> 
> 赞同：3
> 
> 时间：2012-12-19T18:41:11.923
> 
> 标签：dns, ip, subdomain, raspberry-pi

我希望能够使用我设置的动态 dns 名称在本地访问我的树莓派，但我遇到了一些麻烦。

例子：

**pi.domain.com** - 这可以从网络外部正常访问，它会动态更新 IP 等。

从我的本地网络内部访问**pi.domain.com**时，与 RPi 所在的网络相同，我不能这样做（超时）。

如果我使用**raspberrypi/**或**192.168.1.72**我可以从内部网络访问它，:22 访问等。

我的问题是：是否可以配置一些东西，以便当我在 RPi 本地时，我可以使用**pi.domain.com**并且它会解析为raspberrypi **/**？

谢谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:36:36.860

恐怕很简单的解决方案。我所做的只是在我的路由器设置中将端口转发：80 到我的 RPi，繁荣。认为它会比那更难......我不会删除它，只是为了包住其他做同样事情的人遇到这个问题。

我认为由于 Pi 在路由器 DMZ 中，它会自动完成此操作……哦，好吧！

# jsp - 如何在我的同一台机器上同时运行 JSP 和 php

> ID：13958938
> 
> 赞同：4
> 
> 时间：2012-12-19T18:41:25.073
> 
> 标签：jsp

我正在使用 Xaamp 服务器进行 php 开发..现在我已经安装了 Apache 和 Eclipse 来执行 jsp。现在如果我尝试执行 jsp 页面，Apache 服务器会给出错误，即需要的几个端口 8080,8086etc 很忙，即使如果我关闭了 xaamp 服务器。是否可以在我的同一台机器上同时运行 php 和 jsp 页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:47:36.057

“ [Apache](http://apache.org) ”是一家提供多种产品的大型软件公司的名称。我假设您实际上是指它的产品“ [Tomcat](http://tomcat.apache.org) ”。

鉴于您使用的是 XAMPP，您很可能使用的是 Windows。鉴于您是使用 Windows 的 PHP 人员，您很可能已将 Tomcat Windows 安装程序下载为`.exe`文件，而不是将 Tomcat 库作为`.zip`文件下载。Windows 安装程序旨在用于 Windows 生产环境（因此不适用于开发环境），它将 Tomcat 安装为 Windows 服务，该服务会在您每次启动 Windows 时自动启动（因此已经占用了这些端口）。

如果您只是在开发并希望从 Eclipse 内部控制 Tomcat，则您不想使用 Tomcat Windows 服务。

在 Windows 服务管理器中停止 Tomcat 服务（*开始 > 运行 > services.msc*）和/或卸载 Tomcat Windows 服务。您只需要 Tomcat 库作为`.zip`文件。您需要做的就是将其提取到所需的位置。一旦停止/卸载，您就可以毫不费力地在 Eclipse 中启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:44:10.400

您需要将每台服务器配置为在不同的端口上运行。你可以配置 XAMPP 服务器运行在 80 端口，然后 Tomcat 可以运行在 8080 端口。那么运行多个服务器就没有问题了。在 Google 上快速搜索“如何更改 XAMPP 端口号”会出现许多解释这一点的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:47:49.580

您可以更改 XAMPP 使用的端口。要做到这一点：

*   如果 XAMPP 服务器已经在运行，请停止它。
*   打开文件[XAMPP安装文件夹]/apache/conf/httpd.conf。
*   现在搜索字符串 Listen 80（我假设您的 XAMPP 正在使用端口 80。否则，只需搜索字符串“Listen”）。这是 XAMPP 使用的端口号。将此 80 更改为您喜欢的任何其他数字。
*   然后搜索字符串“ServerName”并在那里更新端口号。
*   现在保存并重新启动 XAMPP 服务器，您就完成了。

[http://veerasundar.com/blog/2009/07/how-to-change-xampp-server-port/](http://veerasundar.com/blog/2009/07/how-to-change-xampp-server-port/)

# .net - 如何在 Visual Studio 中将内部类重构为顶级类？

> ID：13958940
> 
> 赞同：2
> 
> 时间：2012-12-19T18:41:41.460
> 
> 标签：.net, visual-studio-2010, refactoring

我有几个关于 VS2010 中重构的问题。首先我想知道我是否可以重构一个内部类并使其成为顶级类。也就是说，如果我有：

```
namespace ABC{
    Public class A{
        ...
        Public class B{
            ...
        }
    }
} 
```

我可以生产：

```
namespace ABC{
    Public class A{
        ...
    }
    Public class B{
        ...
    }

} 
```

是否将所有引用从 AB 更改为仅 B？此外，如果我有一个包含两个项目的解决方案，一个 VB.net 和一个 C#，是否有办法使前者中的重构更改在后者中生效，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:22:23.583

经过研究，我发现 VS 默认不支持这些功能，但我发现了一个 VS2010 扩展，它支持这两个功能以及更多。它被 Jetbrains 称为 ReSharper。这是他们网站的[链接](http://www.jetbrains.com/resharper/features/code_refactoring.html)，其中包含功能列表。

我需要的是：

> 将类型移动到外部范围
> 
> 这种重构将内部类型移动到上层。如果内部类型使用封闭类型的成员，则对封闭类型的引用作为参数传递给移动类型的构造函数。可以通过移动重构命令访问此重构。

和：

> 我们的每个代码重构都会分析它所应用的代码选择的整个范围（可以与您的整个解决方案一样广泛），包括跨语言代码。

最好的消息是，自从“明天世界末日”以来，他们将享受 75% 的折扣！哇！

# java - 从 PPT Apache POI 中删除图像

> ID：13958950
> 
> 赞同：2
> 
> 时间：2012-12-19T18:42:24.007
> 
> 标签：java, image-processing, powerpoint, apache-poi

我遇到了一种情况：

```
 XSLFSlide xslfSlide = ppt.createSlide();

            for (XSLFShape shape : xslfSlide) {
                if (shape instanceof XSLFTextShape) {
                    //some code here
                } else if(shape instanceof XSLFPictureShape) {
                    //some code here
                }
            } 
```

如果我有一个形状类型 XSLFPictureShape（简单地说 - 图片），它会抛出一个异常：

```
java.lang.IllegalArgumentException: Unsupported shape: org.apache.poi.xslf.usermodel.XSLFPictureShape 
```

有没有办法从幻灯片中删除图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-29T16:24:58.127

在 amanteaux 提出错误报告后，我已在[r1717018中修复了此问题](https://svn.apache.org/viewvc?view=revision&revision=1717018)

阅读评论后，我还在[r1717087中添加了缺失的表格删除代码](https://svn.apache.org/viewvc?view=revision&revision=1717087)

至于答案，通常最好在项目问题跟踪系统中提出错误，而不是希望项目中的某个人检查 SO 的帖子。（我已经停止跟踪/回答 SO 帖子，因为我的投票主要是针对简单明了的，而不是针对我工作了几天/几周的工作......）

# .net - 如何调用使用 Powershell 中的 C# out 参数的重载 .NET 函数？

> ID：13958955
> 
> 赞同：9
> 
> 时间：2012-12-19T18:42:47.250
> 
> 标签：.net, powershell, reference, overloading

我知道 Powershell 可以调用 .NET 代码，可能看起来像这样

```
PS> [Reflection.Assembly]::LoadFile(($ScriptDir + ".\SharpSvn-x64\SharpSvn.dll"))
PS> $SvnClient = New-Object SharpSvn.SvnClient 
```

而且我知道 C# 有`out`参数的地方，Powershell 有`[ref]`参数，可能看起来像这样：

```
PS> $info = $null
PS> $SvnClient.GetInfo($repo.local, ([ref]$info))

True

PS> $info

(...long output snipped...)
NodeKind           : Directory
Revision           : 16298
Uri                : http://server/path/to/remoterepo
FullPath           : C:\path\to\localrepo
(...long output snipped...) 
```

而且我知道在 C# 中您可以重载函数，就像 SharpSvn 库为其[SvnClient.Update() 方法](http://docs.sharpsvn.net/current/html/Overload_SharpSvn_SvnClient_Update.htm)所做的那样：

1.  `Update(ICollection(String))`- 将指定路径递归更新到最新（HEAD）修订版
2.  `Update(String)`- 递归更新指定路径到最新（HEAD）修订
3.  `Update(ICollection(String), SvnUpdateArgs)`- 将指定路径更新到指定修订版
4.  `Update(ICollection(String), SvnUpdateResult)`- 将指定路径递归更新到最新（HEAD）修订版
5.  `Update(String, SvnUpdateArgs)`- 递归更新指定路径
6.  `Update(String, SvnUpdateResult)`- 递归更新指定路径到最新（HEAD）修订
7.  `Update(ICollection(String), SvnUpdateArgs, SvnUpdateResult)`- 将指定路径更新到指定修订版
8.  `Update(String, SvnUpdateArgs, SvnUpdateResult)`- 递归更新指定路径到最新（HEAD）修订

但是，如果我们想把所有这些放在一起怎么办？例如，如果我想调用第 6 个版本`Update()`，即接受 String 和 SvnUpdateResult 的版本，其中 SvnUpdateResult 是 C# out 对象？我的第一直觉是尝试这样的事情：

```
PS> $repopath = "C:\path\to\localrepo"
PS> $update = $null
PS> $svnclient.update($repopath, [ref]$update)

Multiple ambiguous overloads found for "Update" and the argument count: "2".
At line:1 char:18
+ $svnclient.update <<<< ($repopath, [ref]$update)
    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest 
```

好的，也许我必须提出论点？

```
PS> $svnclient.update([string]$repopath, [ref][SharpSvn.SvnUpdateResult]$update)

Multiple ambiguous overloads found for "Update" and the argument count: "2".
At line:1 char:18
+ $svnclient.update <<<< ([string]$repopath, [ref][SharpSvn.SvnUpdateResult]$update)
    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest 
```

但这似乎也不起作用。我尝试过的其他事情：

*   铸造`$update`为`[SharpSvn.SvnUpdateResult][ref]`- 也就是说，颠倒我铸造它的顺序。这会导致一个错误，指出：“[ref] 只能是类型转换序列中的最终类型。”
*   在使用它之前投射`$update`到： . 这导致了我在上面遇到的相同的“多个不明确的重载”错误`SharpSvn.SvnUpdateResult``$update = [SharpSvn.SvnUpdateResult]$null`
*   在使用它之前投射`$update`到： . 这会导致错误：“无法将“System.Management.Automation.PSReference”类型的“System.Management.Automation.PSReference”值转换为“SharpSvn.SvnUpdateResult”类型。`ref``$update = [ref]$null`

似乎将其投射两次是问题所在 - 最后一次投射只是覆盖了第一次投射，它们不会相互补充。这是怎么回事？有没有办法两次施放东西？有没有其他方法可以解决这个问题？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:05:39.750

这可能不是一个理想的解决方案，但您可以使用 Add-Type 并制作一个更 PowerShell 友好的类型来包装 Update 方法。

```
Add-Type -TypeDefinition "
public class SvnClientEx
{
   public static SvnUpdateResult Update(SvnClient client, string path)
   {
       SvnUpdateResult result; 
       client.Update(path, out result);
       return result; 
   } 
}
"

$result = [SvnClient]::Update($svnClient, $repopath) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T11:23:54.057

这似乎很难做到正确。

这是什么版本的 PowerShell？是`SvnUpdateArgs`和`SvnUpdateResult`相关的（即一个类派生自另一个）？我假设不会。

基于我构建的类似场景，使用当前版本（4.0）的 PowerShell，我认为这是可行的：

```
PS> $repopath = "C:\path\to\localrepo"
PS> [SharpSvn.SvnUpdateResult]$update = $null
PS> $svnclient.Update([string]$repopath, [ref]$update) 
```

**但是，我只能让它与其中一个重载一起工作！？**不确定是不是巧合，但这是我说`$svnclient.Update`要查看重载定义时首先列出的重载。

在我的 PowerShell 版本中，如果我将第二个参数设为`[ref][SharpSvn.SvnUpdateResult]$update`，则重载似乎已正确解决，该方法运行时不会出错，但分配给“out”参数的对象似乎丢失了。

即使`$repopath`被声明为类型安全的`[string]$repopath = "C:\path\to\localrepo"`，似乎我们`[string]$repopath`在传递它时仍然需要再说一遍（按值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-28T04:27:56.327

当您使用类的 out 参数调用的方法和具有类似签名的另一个重载（该类可以是此签名中的任何类）时，PowerShell 中似乎存在问题。

我为这个问题创建了一个简单的重现，并为 PowerShell[提交了一个问题](https://github.com/PowerShell/PowerShell/issues/2936)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T13:11:17.700

您可以简单地使用代码块并访问此块中的结果（输出）对象：

```
PS> $repopath = "C:\path\to\localrepo"
PS> $svnclient.update($repopath, { 
      Write-Host $_.Revision
      Write-Host $_.HasRevision
      # Access all the Member and Methods of the result object here
    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-26T14:57:00.983

你可以做几件事：

首先，返回的结果`$svnclient.update`是 a `PSMethod`。`PSMethod`有`Invoke`方法。你可以尝试使用它。

其次，如果这不起作用，您可以使用真正的反射：

```
# To get all methods:
$svnclient.gettype().getmethods()     

# Then filter the results to get overload you need.
# Use GetParameters to get parameters of an overloaded method 
# return by GetMethods
# For example (using PS 3.0 features):

$svnclient.gettype().getmethods()|? name -eq Update |
% {write-host "***`n"';$_} | % GetParameters

# Will list parameter sets for each overload of Update, each set separated by stars

# Alternatively use getmethod with appropriate parameters    
# GetMethod (link below) can be used to select correct overload without the 
# filtering above. The next to the last overload of GetMethod at the link is the one to use

# After obtaining correct overload, then call the Invoke method like this:
$correctOverload.Invoke( $svnclient, @($repopath, [ref] $SvnUpdateResult)) 
```

[获取方法链接](https://msdn.microsoft.com/en-us/library/system.type.getmethod(v=vs.110).aspx)

# java - 消除borderLayout中Jpanel之间的间隙

> ID：13958959
> 
> 赞同：3
> 
> 时间：2012-12-19T18:43:09.353
> 
> 标签：java, swing, jpanel, layout-manager, border-layout

我将一个 2 jpanel (CENTER AND PAGE_END) 添加到另一个 Jpanel 中，该 Jpanel 位于 JFrame 中。我想消除的两个面板（panneauDateDebut 和 panneauDateFin）之间存在巨大差距。我尝试将它们设置为不同的配置（开始/中心、开始/结束、中心/结束），但没有运气。如何才能做到这一点 ？

编辑以获得工作代码

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Frame;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class CreerModificationAbsence extends JDialog {

    private JPanel modificationAbsence1, modificationAbsence2,
            modificationAbsence3, panneauDateDebut, panneauDateFin;
    private JButton modifier, annuler;
    private JLabel raison, prenomNomEmpl, prenomNomChef;
    private JComboBox<String> raisonC, heureDebutC, heureFinC, minuteDebutC,
            minuteFinC;
    private JTextField prenomNomEmplT, prenomnomChefT;
    private final String[] raisonAbsence = { "Malade" };

    private JLabel dateDebut, dateFin;
    private JTextField dateDebutT, dateFinT;

    private final String[] heures = { "00" };
    private final String[] minutes = { "00", "15", "30", "45" };

    private BorderLayout gestionnaireComposant;
    private GridLayout gridGestionnaireComposant;
    private FlowLayout panneauMilieuLayout;
    final FlowLayout gestionnaireComposantBas;

    public CreerModificationAbsence() {
        super((Frame) null, "Modification - Absence d'employé", true);

        setPreferredSize(new Dimension(600, 250));
        setAlwaysOnTop(true);
        setResizable(false);
        setLocation(400, 200);
        setAlwaysOnTop(true);
        gestionnaireComposant = new BorderLayout();
        this.getContentPane().setLayout(gestionnaireComposant);

        // Modification Panneau Haut

        modificationAbsence1 = new JPanel();

        gridGestionnaireComposant = new GridLayout(3, 2, 2, 2);
        modificationAbsence1.setLayout(gridGestionnaireComposant);

        raison = new JLabel("Raison : ");
        raisonC = new JComboBox<>(raisonAbsence);
        raisonC.setEditable(true);
        prenomNomEmpl = new JLabel("Prénom et Nom de l'employé : ");
        prenomNomEmplT = new JTextField();
        prenomNomChef = new JLabel("Prénom et Nom du chef d'équipe : ");
        prenomnomChefT = new JTextField();

        modificationAbsence1.add(raison);
        modificationAbsence1.add(raisonC);
        modificationAbsence1.add(prenomNomEmpl);
        modificationAbsence1.add(prenomNomEmplT);
        modificationAbsence1.add(prenomNomChef);
        modificationAbsence1.add(prenomnomChefT);

        // Modification Panneau Milieu

        modificationAbsence2 = new JPanel();
        panneauDateDebut = new JPanel();
        panneauDateFin = new JPanel();

        panneauMilieuLayout = new FlowLayout();

        panneauDateDebut.setLayout(panneauMilieuLayout);
        panneauDateDebut.setPreferredSize(new Dimension(600, 0));
                   panneauDateDebut.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);

        panneauDateFin.setLayout(panneauMilieuLayout);
        panneauDateFin.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        panneauDateFin.setPreferredSize(new Dimension(600, 113));

        modificationAbsence2.setLayout(new BorderLayout(0,0));

        dateDebutT = new JTextField(12);
        heureDebutC = new JComboBox<>(heures);
        minuteDebutC = new JComboBox<>(minutes);
        dateFinT = new JTextField(12);
        heureFinC = new JComboBox<>(heures);
        minuteFinC = new JComboBox<>(minutes);

        dateDebut = new JLabel("Date de début :");
        dateFin = new JLabel("Date de fin :");

        dateDebutT.setPreferredSize(new Dimension(125, 20));
        dateFinT.setPreferredSize(new Dimension(125, 20));
        dateDebut.setPreferredSize(new Dimension(125, 20));
        dateFin.setPreferredSize(new Dimension(125, 20));
        heureDebutC.setPreferredSize(new Dimension(130, 20));
        minuteDebutC.setPreferredSize(new Dimension(130, 20));
        heureFinC.setPreferredSize(new Dimension(130, 20));
        minuteFinC.setPreferredSize(new Dimension(130, 20));

        panneauDateDebut.add(dateDebut);
        panneauDateDebut.add(dateDebutT);
        panneauDateDebut.add(heureDebutC);
        panneauDateDebut.add(minuteDebutC);
        panneauDateFin.add(dateFin);
        panneauDateFin.add(dateFinT);
        panneauDateFin.add(heureFinC);
        panneauDateFin.add(minuteFinC);
        modificationAbsence2.add(panneauDateDebut, BorderLayout.CENTER);
        modificationAbsence2.add(panneauDateFin, BorderLayout.PAGE_END);

        // Modification Panneau Bas

        modificationAbsence3 = new JPanel();
        gestionnaireComposantBas = new FlowLayout(FlowLayout.RIGHT);
        modificationAbsence3.setLayout(gestionnaireComposantBas);

        modifier = new JButton("Modifier");
        annuler = new JButton("Annuler");

        modificationAbsence3.add(modifier);
        modificationAbsence3.add(annuler);

        this.add(modificationAbsence1, BorderLayout.NORTH);
        this.add(modificationAbsence2, BorderLayout.CENTER);
        this.add(modificationAbsence3, BorderLayout.SOUTH);
        /*this.*/setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        this.pack();
            /*this.*/setVisible(true);
    }

 public static void main(String s[]) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            CreerModificationAbsence textf = new CreerModificationAbsence();
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:43:10.300

对于初学者来说很好（对于结束者来说，不知道这是否是英语）：不要打电话`setPreferredSize()`！这就是导致你所有问题的原因。停止使用它（永远在你的生活中〜糟糕的幽默感，不要苛刻），你会解决你所有的问题。

试试这个：

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.FlowLayout;
import java.awt.Frame;
import java.awt.GridLayout;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class CreerModificationAbsence extends JDialog {

    private JPanel modificationAbsence1, modificationAbsence2, modificationAbsence3, panneauDateDebut, panneauDateFin;
    private JButton modifier, annuler;
    private JLabel raison, prenomNomEmpl, prenomNomChef;
    private JComboBox<String> raisonC, heureDebutC, heureFinC, minuteDebutC, minuteFinC;
    private JTextField prenomNomEmplT, prenomnomChefT;
    private final String[] raisonAbsence = { "Malade" };

    private JLabel dateDebut, dateFin;
    private JTextField dateDebutT, dateFinT;

    private final String[] heures = { "00" };
    private final String[] minutes = { "00", "15", "30", "45" };

    private BorderLayout gestionnaireComposant;
    private GridLayout gridGestionnaireComposant;
    private FlowLayout panneauMilieuLayout;
    final FlowLayout gestionnaireComposantBas;

    public CreerModificationAbsence() {
        super((Frame) null, "Modification - Absence d'employé", true);

        // setPreferredSize(new Dimension(600, 250));
        setAlwaysOnTop(true);
        setResizable(false);
        setAlwaysOnTop(true);
        gestionnaireComposant = new BorderLayout();
        this.getContentPane().setLayout(gestionnaireComposant);

        // Modification Panneau Haut

        modificationAbsence1 = new JPanel();

        gridGestionnaireComposant = new GridLayout(3, 2, 2, 2);
        modificationAbsence1.setLayout(gridGestionnaireComposant);

        raison = new JLabel("Raison : ");
        raisonC = new JComboBox(raisonAbsence);
        raisonC.setEditable(true);
        prenomNomEmpl = new JLabel("Prénom et Nom de l'employé : ");
        prenomNomEmplT = new JTextField();
        prenomNomChef = new JLabel("Prénom et Nom du chef d'équipe : ");
        prenomnomChefT = new JTextField();

        modificationAbsence1.add(raison);
        modificationAbsence1.add(raisonC);
        modificationAbsence1.add(prenomNomEmpl);
        modificationAbsence1.add(prenomNomEmplT);
        modificationAbsence1.add(prenomNomChef);
        modificationAbsence1.add(prenomnomChefT);

        // Modification Panneau Milieu

        modificationAbsence2 = new JPanel();
        panneauDateDebut = new JPanel();
        panneauDateFin = new JPanel();

        panneauMilieuLayout = new FlowLayout();

        panneauDateDebut.setLayout(panneauMilieuLayout);
        panneauDateDebut.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);

        panneauDateFin.setLayout(panneauMilieuLayout);
        panneauDateFin.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);

        dateDebutT = new JTextField(12);
        heureDebutC = new JComboBox(heures);
        minuteDebutC = new JComboBox(minutes);
        dateFinT = new JTextField(12);
        heureFinC = new JComboBox(heures);
        minuteFinC = new JComboBox(minutes);

        dateDebut = new JLabel("Date de début :");
        dateFin = new JLabel("Date de fin :");

        panneauDateDebut.add(dateDebut);
        panneauDateDebut.add(dateDebutT);
        panneauDateDebut.add(heureDebutC);
        panneauDateDebut.add(minuteDebutC);
        panneauDateFin.add(dateFin);
        panneauDateFin.add(dateFinT);
        panneauDateFin.add(heureFinC);
        panneauDateFin.add(minuteFinC);
        modificationAbsence2.add(panneauDateDebut, BorderLayout.CENTER);
        modificationAbsence2.add(panneauDateFin, BorderLayout.PAGE_END);

        // Modification Panneau Bas

        modificationAbsence3 = new JPanel();
        gestionnaireComposantBas = new FlowLayout(FlowLayout.RIGHT);
        modificationAbsence3.setLayout(gestionnaireComposantBas);

        modifier = new JButton("Modifier");
        annuler = new JButton("Annuler");

        modificationAbsence3.add(modifier);
        modificationAbsence3.add(annuler);

        this.add(modificationAbsence1, BorderLayout.NORTH);
        this.add(modificationAbsence2, BorderLayout.CENTER);
        this.add(modificationAbsence3, BorderLayout.SOUTH);
        /*this.*/setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        this.pack();
        setLocationRelativeTo(null);
        /*this.*/setVisible(true);
    }

    public static void main(String s[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                CreerModificationAbsence textf = new CreerModificationAbsence();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T20:53:16.547

您遇到的问题是因为您`setPreferredSize`在`JDialog`. 所以发生的情况是 Dialog 必须是给定的大小。因为它现在**必须**是那个大小，所以必须给予一些东西。这就是 LayoutManagers 接管的地方。在 BorderLayout 中，Center 中的任何内容都将始终拉伸。

如果您设置有问题的两个面板的背景，您可以看到发生了什么：

```
 panneauDateDebut = new JPanel();
    panneauDateDebut.setOpaque(true);
    panneauDateDebut.setBackground(Color.blue);
    panneauDateFin = new JPanel();
    panneauDateFin.setOpaque(true);
    panneauDateFin.setBackground(Color.green); 
```

解决方案（纪尧姆在我写作时指出）是停止使用`setPreferredSize`. 因此，如果您的构造函数如下所示，则应该解决您的问题：

```
public PageCentering() {
        super((Frame) null, "Modification - Absence d'employé", true);

        //setPreferredSize(new Dimension(600, 250));

        ...

} 
```

# java - 抛出异常： JSONObject json = new JSONObject();

> ID：13958960
> 
> 赞同：0
> 
> 时间：2012-12-19T18:43:13.987
> 
> 标签：java, json

我的应用程序构建良好，但是当我运行它时，当以下行尝试执行时，我不断收到异常：

```
JSONObject json = new JSONObject(); 
```

我得到以下异常：

例外

> javax.servlet.ServletException：Servlet 执行引发异常

根本原因

> java.lang.NoClassDefFoundError: org/apache/commons/lang/exception/NestableRuntimeException

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:15:13.360

我想到了。apache commons lang jar 必须是 2.6 版。我使用的是最新版本 3.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:44:58.943

您需要类路径上的[apache commons lang jar](http://commons.apache.org/lang/download_lang.cgi)

# android - 如何在 AVD (SDK 4.2) 中获取（查看）虚拟键盘？

> ID：13958962
> 
> 赞同：0
> 
> 时间：2012-12-19T18:43:15.877
> 
> 标签：android, android-emulator

我正在尝试了解 Android 平台上的键盘应用程序的源代码，因此非常重要的是我**只使用虚拟键盘**而不是笔记本电脑键盘在虚拟设备上输入文本。

到目前为止，我一直无法在我的“Galaxy Nexus”AVD 上启动虚拟键盘。谁能给我一个快速解决这个问题的方法？

这是我在新 AVD 中最新版本的平台工具（rev 21）中看到的屏幕截图![在此处输入图像描述](../Images/9b0dad565aa37f3587f951b7eea3ee6d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:49:05.010

如果您拥有最新版本的平台工具（修订版 21），则创建一个新的 AVD 以获取新的创建对话框。您可以在设备下拉列表中选择 Galaxy Nexus，然后它应该“正常工作”。

如果您有较旧的平台工具对话框，您可以在底部的窗口中添加一个选项以显示虚拟键盘。它类似于“可用的硬件键盘”并将其设置为 false。我不记得它到底叫什么了，因为我没有旧的对话框可用了。

我强烈建议使用新的，但获得类似于真实设备的模拟器要容易得多。

# java - 在调用 Thread.run() 之前，JVM 在后台做了什么？或者为什么 Thread.run() 不向用户公开？

> ID：13958963
> 
> 赞同：4
> 
> 时间：2012-12-19T18:43:25.443
> 
> 标签：java, multithreading, jvm

当程序员调用线程的运行方法时，JVM`Thread.start()`会调用该方法。

1.  JVM 在调用之前在后台做了什么`Thread.run()`？

2.  为什么`Thread.run()`不暴露给用户？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T18:50:51.060

> JVM 在调用之前在后台做了什么`Thread.run()`？

它执行 JVM 工作来管理线程对象（分配堆栈空间、线程局部变量……）以及每个架构的本地工作，例如分叉和调度新线程/进程/克隆或架构用于实现线程的任何内容。

> 为什么`Thread.run()`不暴露给用户？

我假设您在堆栈框架方面谈论“暴露”。就像静态`main`方法一样，用户代码上方的调用框架显然没有暴露给用户，因为它们没有用并且会令人困惑。关于方法，我也会说同样的话`Thread.run()`。*如果您*`Thread`扩展和覆盖，它将显示在调用堆栈中，`run()`但如果您传入 target*则不会*`Runnable`。

我在这个答案中有很多关于这个的细节：

> [Java run() 方法是如何工作的？](https://stackoverflow.com/questions/10763928/how-does-java-run-method-work/10765139#10765139)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:16:04.807

> 在调用 Thread.run() 之前，JVM 在后台做了什么？

`Thread`当您调用 start() 时，它会启动一个与调用线程的 run() 方法的对象关联的线程。

注意：创建、启动和调度线程的所有工作都由操作系统完成。Java 只是进行正确的系统调用。真正起作用的不是 JVM 代码。

> 或者为什么 Thread.run() 不向用户公开？

它暴露了。它是公开的，您可以像任何其他方法一样调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:45:07.887

当您通过 thread.run() 启动时，您将其作为正常进程运行，而不是真正将其用作线程。它将与主线程连接。使用 thread.start()，JVM 分配不会与主线程连接的单独线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:46:04.467

当您调用`start()`时，`Thread`该类实际上创建了新的 JVM 线程（与调用线程分开），并`run()`从该新线程调用。

创建新的 JVM 线程，使应用程序代码可以有多个线程运行代码，是一种低级 JVM 操作。

如果`run()`暴露给用户，并且它被调用而不是`start()`，那么 in 中的代码`run()`将在单个调用线程中串行执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T18:55:38.573

`someThread.start()`调用本机方法，该方法告诉 JVM 创建一个新线程。例如，热点的血腥细节可以[在源代码](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/9b0ca45cd756/src/share/vm/runtime/thread.cpp)中找到。

实质上，`start()`要求操作系统创建一个新线程，然后调用该`Thread#run()`新创建线程中的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T19:04:13.313

您开始深入研究 JVM 本身的实现，因为启动新线程需要与操作系统交互。这是 JVM 中线程的一个[很好的中级解释](http://openjdk.java.net/groups/hotspot/docs/RuntimeOverview.html#Thread%20Management%7Coutline)。

# networking - 网络：路由器是否违反端到端原则？

> ID：13958970
> 
> 赞同：0
> 
> 时间：2012-12-19T18:43:50.170
> 
> 标签：networking

这是`end-to-end principle`来自维基百科的部分

> 端到端连接是 Internet 的一种属性，它允许网络的所有节点将数据包发送到网络的所有其他节点，而无需中间网络元素进一步解释它们。

但是你应该注意到路由器（中间设备）总是在终端节点之间。因此，`end-to-end principle`如上所述，不仅`NAT`，而且通常网络也有中断`end-to-end principle`。

是真的吗？如果不是，请为我解释为什么，通常带有路由器的网络不会破坏端到端原则。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T03:56:06.860

路由器有一项特殊的工作，它必须*促进*端到端的原则。

基本上，路由器的工作是解释目标 IP 地址并确定将其发送到的下一个路由器（或终端节点）。路由器通常做两件事：

*   减少 TTL
*   根据目的IP地址查找下一跳

一般来说，它不应该*进一步*解释数据包。

现在，NAT 会破坏端到端，因为它会*进一步*解释和转换数据包。例如，NAT 可能会更改数据包的源地址。在这种情况下，您已经破坏了端到端，因为另一个 Internet 主机将无法识别发送数据包的特定主机。他们只能识别 NAT 的源地址。

* * *

**编辑**：[RFC 1812](https://www.rfc-editor.org/rfc/rfc1812)在第 2.2.1 节中明确说明了这一点，其中描述了分层职责：

```
o Transport Layer
   The Transport Layer provides end-to-end communication services. 
```

...

```
 TCP is a reliable connection-oriented transport service that
   provides end-to-end reliability, resequencing, and flow control. 
```

...

```
o Internet Layer
   All Internet transport protocols use the Internet Protocol (IP) to
   carry data from source host to destination host.  IP is a
   connectionless or datagram internetwork service, providing no
   end-to-end delivery guarantees. 
```

在第 2.2.3 节中，它继续指出：

```
Routers provide datagram transport only, and they seek to minimize
the state information necessary to sustain this service in the
interest of routing flexibility and robustness. 
```

“普通”路由器根本不处理“端到端”原则。它的工作只是在 Internet 层传递数据包，根据定义，这就是“不提供端到端传递保证”。这就是传输层的工作。NAT 通过在传输层而不是简单的 Internet 层上运行来“打破端到端”，并为每个连接保留过多的状态。

希望这是有道理的。我知道这可能会令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:02:47.430

我浏览了维基百科中的文章，发现它有一个条件，即它仅适用于*特定于应用程序的工作*，不适用于由中间路由器执行的其他支持性任务，如地址转换或重定向、NAT 等......这里是那篇文章的一部分

> 端到端原则指出，应用程序特定的功能应该驻留在网络的终端主机中，而不是在中间节点中——前提是它们可以在终端主机中“完全且正确地”实现。

因此，保留该原则，因为中间路由器不处理*特定于应用程序的功能*，而是执行这些功能的终端路由器（节点）。

# jquery - 添加 jquery mobile 将文本添加到现有的 html 按钮

> ID：13958973
> 
> 赞同：0
> 
> 时间：2012-12-19T18:43:54.137
> 
> 标签：jquery, jquery-mobile

在尝试向我的网站添加点击事件时，我添加了 jquery mobile，以便我的按钮可以在桌面和平板电脑上使用。

但是，我所有现有的按钮现在旁边都有额外的文本。在添加 jquery mobile 之前，我有一个名为“添加相机”的按钮。现在添加 jquery mobile 它具有相同的按钮，但旁边是一些与按钮同名的文本：“添加相机”。

简单按钮：

```
<button class="addwebcam">Add camera</button> 
```

只是想添加绑定事件：

```
jQuery('.addwebcam').bind('click tap', function() {
    jQuery('#cameraformwebcam').show();
    jQuery('.addwebcam').hide();
}); 
```

如果您查看 html 源代码，它不会显示额外的文本，我也看不到任何错误。

我应该注意我补充说：

```
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

没有其他的。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:07:14.783

听起来您缺少 jQuery 移动的样式表（CSS 文件）。

使用 JQM 按钮将为您的 DOM 引入额外的标记，因此如果您不使用它们的样式表，您还需要设置额外标记的样式。

当您将常规 HTML 按钮转换为 jQuery 移动按钮时，会发生以下情况：

```
<div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="null" data-iconpos="null" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" aria-disabled="false">
  <span class="ui-btn-inner ui-btn-corner-all">
    <span class="ui-btn-text">Button element</span>
  </span>
  <button class="ui-btn-hidden" aria-disabled="false">Button element</button>
</div> 
```

正如 Gajortres 在评论中提到的，您需要检查 DOM 而不是查看源代码以查看在 JavaScript 中创建的更新的 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:17:14.287

AFAIK：您不应该将 jQuery.mobile 添加到非全部的 jQuery.mobile-build-site 中。这以许多问题告终。jQuery.mobile 解释 html 代码并对其进行特殊思考，尤其是针对移动站点。

我的解决方案是构建一个新的 HTML 文件，该文件仅包含按钮所需的所有内容，并将其放置在带有 iframe 的原始页面中。我认为这是不与其他 javascript 冲突的最安全的解决方案。

这是一个示例解决方案：您首先为需要 jquery.mobile() 的按钮创建一个文件。

**移动.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.js"></script>
        <link type="text/css" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css" rel="stylesheet" />

        <script type="text/javascript">
            jQuery(document).ready(function() {
                if (inIframe()) {
                    var $links = jQuery('a[href]');

                    $links.unbind('click').click(function(event) {
                        event.preventDefault();

                        var $this = jQuery(this);
                        var href = $this.attr('href');

                        window.parent.location.href = href;
                    });
                }
            });

            var inIframe = function() {
                return (top != self);
            };
        </script>

        <style type="text/css">
            [data-role="page"] {
                background-image: none;
                background-color: white;
            }
            [data-role="button"] {
                margin-left: 3px;
                margin-right: 3px;              
            }
        </style>
    </head>
    <body>
        <a href="http://stackoverflow.com/a/13959531/655224" data-role="button">Tutorial</a>
    </body>
</html> 
```

**索引.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <style type="text/css">
            iframe {
                border: 0 none;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <iframe src="mobile.html" width="150" height="50" scrolling="no" />
    </body>
</html> 
```

另见[演示](http://algorhythm.de/tools/jquery_and_jquerymobile/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:12:03.637

我这样做了：

```
$('#button').parent().find('.ui-btn-text').text(''); 
```

它对我有用，不是我想要的，但很好！:)

# javascript - 给定两个对象，如何根据另一个对象更新一个对象的属性

> ID：13958974
> 
> 赞同：0
> 
> 时间：2012-12-19T18:43:54.493
> 
> 标签：javascript, jquery

我正在尝试根据另一个对象的属性匹配更新对象的属性。属性名称必须匹配。我试图实现的一个非常简单的示例如下所示：

给定两个对象：

```
var obj1 = {
   one: "1",
   two: "2",
   three: {
            threeDotOne: "3.1",
            threeDotTwo: "3.2",
            threeDotAny: "3.3"
          }
}

var obj2 = {threeDotAny: "3.4"} 
```

updateObjectOneProperty(obj1, obj2)

结果如下所示：

```
var obj1 = {
   one: "1",
   two: "2",
   three: {
            threeDotOne: "3.1",
            threeDotTwo: "3.2",
            threeDotAny: "3.4"
          }
} 
```

在这里，我假设在 obj1 中只有一个具有这样名称的属性，这很好。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:49:14.793

jQuery`$.extend`可以做到：

[http://jsfiddle.net/vjCvM/](http://jsfiddle.net/vjCvM/)

```
var obj1 = {
    one: "1",
    two: "2",
    three: {
        threeDotOne: "3.1",
        threeDotTwo: "3.2",
        threeDotAny: "3.3"
    }
}

var obj2 = {
    threeDotAny: "3.4"
}

$.extend(obj1.three, obj2); 
```

如果您希望能够在不指定`obj1.three`,的情况下执行此操作，则`three`需要是 的属性，`obj2`否则无法知道将其放置在哪里。

# c# - .Net 如何直接播放音频样本

> ID：13958977
> 
> 赞同：6
> 
> 时间：2012-12-19T18:43:58.313
> 
> 标签：c#, .net, audio, naudio

我有通过 NAudio 提取的音频样本，我知道参数：

*   渠道
*   每个样本的字节数，
*   采样率

如何使用 .Net api / 或其他 .Net 库播放样本

这里代码：

```
 openFileDialog1.ShowDialog();
    using (var reader = new Mp3FileReader(openFileDialog1.FileName))
    {
        var pcmLength = (int)reader.Length;
        var _leftBuffer = new byte[pcmLength / 2];
        var buffer = new byte[pcmLength];
        var bytesRead = reader.Read(buffer, 0, pcmLength);
        int index = 0;
        for (int i = 0; i < bytesRead; i += 4)
        {
           //extracting only left channel 
           _leftBuffer[index] = buffer[i];
           index++;
           _leftBuffer[index] = buffer[i + 1];
           index++;
         }

         // How to play  _leftBuffer (Single channel, 2 bytes per sample, 44100 samples per secound)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:00:21.157

首先，您需要实现`IWaveProvider`或`IWaveProvider`使用 NAudio 附带的实现之一`WaveProvider16`，例如。接下来，使用 using初始化一个`WaveOut`对象，最后调用。`IWaveProvider``WaveOut.Init(IWaveProvider Provider)``WaveOut.Play()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:16:32.960

是的，我找到了解决方案：[A low-level audio player in C#](http://www.codeproject.com/Articles/3352/A-low-level-audio-player-in-C)

完整的工作代码：

```
public partial class Form1 : Form
    {
        private byte[] _leftBuffer;
        private BiQuadFilter _leftFilter;
        private BiQuadFilter _rightFilter;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            openFileDialog1.ShowDialog();
            using (var reader = new Mp3FileReader(openFileDialog1.FileName))
            {
                var pcmLength = (int)reader.Length;
                _leftBuffer = new byte[pcmLength / 2];
                var buffer = new byte[pcmLength];
                var bytesRead = reader.Read(buffer, 0, pcmLength);

                int index = 0;
                for (int i = 0; i < bytesRead; i += 4)
                {
                    _leftBuffer[index] = buffer[i];
                    index++;
                    _leftBuffer[index] = buffer[i + 1];
                    index++;
                }
                var player = new WaveLib.WaveOutPlayer(-1, new WaveLib.WaveFormat(44100, 16, 1), _leftBuffer.Length, 1, (data, size) =>
                                                                                                               {
                                                                                                                   byte[] b = _leftBuffer;
                                                                                                                   System.Runtime.InteropServices.Marshal.Copy(b, 0, data, size);
                                                                                                               });
            }
        }
    } 
```

# java - 从不在我的类路径中的路径加载属性文件

> ID：13958980
> 
> 赞同：10
> 
> 时间：2012-12-19T18:44:13.707
> 
> 标签：java, properties

嗯，简单的任务，但我如何从不在我的类路径中的路径加载属性文件？

**例如：**我有一个简单的 java 文件，我像这样执行： foo.jar d:/sample/dir/dir/app1.properties 并且在我做的代码中：

```
 public boolean InitConfig(String propePath) {
         prop = new Properties(); 
         try {

            InputStream in =  this.getClass().getClassLoader().getResourceAsStream(propePath);
            prop.load(in);
            return true;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        }
     } 
```

其中 propePath 为：d:/sample/dir/dir/app1.properties
并且 InputStream in 始终为空。为什么会这样？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T18:49:53.180

唯一可以加载的资源是`Classloader.getResourceAsStream`类（加载器）路径中的资源。要从任意路径读取属性，请使用[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)类本身的`load`功能之一。

```
final Properties props = new Properties();
props.load(new FileInputStream(filePath)); 
```

# javascript - 将 json 数据从 Web 服务器拉入文本

> ID：13958995
> 
> 赞同：3
> 
> 时间：2012-12-19T18:45:06.660
> 
> 标签：javascript, json, dojo, get

大家好，我已经在这个问题上停留了一段时间。我目前正在使用 dojo.xhrget 将 json 数据作为文本放到我的 html 页面上。目前我在 safari 上不断收到错误，我相信由于跨域问题，它似乎没有响应其他浏览器 -

```
" An unexpected error occurred: RequestError: Unable to load 171.51.21.41:3000/information.json status: 0" 
```

我曾尝试使用 dojo.io.script，但它仍然是空白的。我怀疑由于某种原因它无法读取我的 json 数据 - 任何帮助将不胜感激。

```
require(["dojo"], function(dojo){

dojo.ready(function(){
// Look up the node we'll stick the text under.
var targetNode = dojo.byId("licenseContainer");

// The parameters to pass to xhrGet, the url, how to handle it, and the callbacks.
var xhrArgs = {
url: "171.51.21.41:3000/information.json ",
handleAs: "json",
load: function(data){
  // Replace newlines with nice HTML tags.
  data = data.replace(/\n/g, "<br>");

  // Replace tabs with spaces.
  data = data.replace(/\t/g, "&nbsp;&nbsp;&nbsp;");

  targetNode.innerHTML = data;
},
error: function(error){
  targetNode.innerHTML = "An unexpected error occurred: " + error;
}
}

 // Call the asynchronous xhrGet
 var deferred = dojo.xhrGet(xhrArgs);
});

}); 
```

我借用了这段代码并进行了编辑。我知道错误语句是由于错误函数而出现的；但我想知道为什么以及如何访问 json。

先谢谢了~

我的 JSON 片段：

```
[{"id":1,"Field":"Devices","Phase":"Final","Name":"MP3 Player"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:29:36.150

您需要`http://`输入您的 xhrArgs 网址

# mysql - Magento：从另一个表填充列数据

> ID：13958996
> 
> 赞同：0
> 
> 时间：2012-12-19T18:45:08.143
> 
> 标签：mysql, magento, phpmyadmin

我正在使用 Magento 社区 1.6.2。

由于进口不好，我的媒体职位都搞砸了。

要修复，我想导出 catalog_product_entity_media_gallery_value 并编辑**位置**字段。不幸的是，catalog_product_entity_media_gallery_value 仅显示 value_id 作为与产品/图像相关联的标识符。

catalog_product_entity_media_gallery（另一方面）包含字段**value**，它是图像路径。它还包含字段 value_id。

为了准备，我将**value**列添加到 catalog_product_entity_media_gallery_value

**现在我的问题：**

我想将我在 catalog_product_entity_media_gallery_value 中创建的新**值****字段**与来自**catalog_product_entity_media_gallery**的信息结合起来，使用 value_id 将正确的值与其对应的**value_id**相关联。

 ******帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:13:11.293

您的意思是在 value_id 上将两个表连接在一起？

```
SELECT * FROM `catalog_product_entity_media_gallery_value` v
INNER JOIN `catalog_product_entity_media_gallery` g
ON g.value_id = v.value_id 
```******

# asp.net-mvc - ASP.NET MVC 4 - 如何编写复杂的自定义 url？

> ID：13958997
> 
> 赞同：2
> 
> 时间：2012-12-19T18:45:18.287
> 
> 标签：asp.net-mvc, url-rewriting, seo, custom-url

我的一个页面的动态网址如下所示：

“http://myDomain/CarComparison/CompareCarTab?brandIds=3~3~3&modelIds=8~8~7&modelVersionIds=4~5~19”

这里**CarComparison**是**控制器**，**CompareCarTab**是**action**。

**4~5~19 代表汽车版本名称**。

现在请指导我如何自定义上面的网址，如下所示。

“http://myDomain/Car-Comparison-Hyundai-i20-Magna-VS-Hyundai-i20-Magna-Optional-1.2-VS-Hyundai-i10-D-lite”

**这里“Hyundai-i20-Magna-VS-Hyundai-i20-Magna-Optional-1.2-VS-Hyundai-i10-D-lite”部分依赖于“modelVersionIds=4~5~19”**

谢谢，

@保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:58:37.810

对于初学者，您需要在 RouteConfig.cs 中创建一个新路由

```
routes.MapRoute(
    name: "",
    url: "comparison/{cars}",
    defaults: new { controller = "carcomparison", action = "carcomparetab" }
);

// /comparison/car1-vs-car2-vs-car3 
```

而且我不知道如何将这种类型的 url`Hyundai-i20-Magna-VS-Hyundai-i20-Magna-Optional-1.2-VS-Hyundai-i10-D-lite`转换为一些可用的参数，而不是拆分它`VS`并在数据库中按名称查找每个参数。

* * *

另一种可能性是有多个比较路线

```
routes.MapRoute(
    name: "",
    url: "comparison/{car1}/{car2}/{car3}",
    defaults: new { controller = "carcomparison", action = "carcomparetab" }
);

// /comparision/car1/car2/car3 
```

# python - Python 列表理解、解包和多重操作

> ID：13958998
> 
> 赞同：30
> 
> 时间：2012-12-19T18:45:19.490
> 
> 标签：python, tuples, list-comprehension, flatten

我想通过执行以下操作来解压缩我创建的元组，因此结果只是一个简单的列表。我可以在 2-3 行中得到想要的结果，但肯定有一个 oneliner list.comp 吗？

```
x = range(10)
y = [(i,j**2) for i,j in zip(x,x)]
>>>y
[(0, 0), (1, 1), (2, 4), (3, 9), (4, 16), (5, 25), (6, 36), (7, 49), (8, 64), (9
, 81)]
>>> 
```

我想要的是`result = [0,0,1,1,2,4,3,9.....]`

正在做

```
y = len(x)*[0]
y[::2] = x
y[1::2] = [i**2 for i in x] 
```

给出我想要的，但如果我需要更一般的情况怎么办：

```
y = [(i, sqrt(i), i**3, some_operation_on_i, f(i), g(i)) for i in x] 
```

例如，我应该能够得到一个类似结果的直接列表，其中我只指定了一个操作（正方形）来跟随每个 i，但现在每个 i 之后有任意数量的操作。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-19T18:47:27.507

使用嵌套列表推导：

```
result = [a for tup in y for a in tup] 
```

例子：

```
>>> x = range(10)
>>> y = [(i,j**2) for i,j in zip(x,x)]
>>> [a for tup in y for a in tup]
[0, 0, 1, 1, 2, 4, 3, 9, 4, 16, 5, 25, 6, 36, 7, 49, 8, 64, 9, 81] 
```

这也适用于您更一般的情况，或者您可以一步完成所有操作：

```
y = [a for i in x for a in (i, sqrt(i), i**3, some_operation_on_i, f(i), g(i))] 
```

万一嵌套列表推导看起来很奇怪，这是一个正常`for`循环的样子：

```
y = []
for i in x:
    for a in (i, sqrt(i), i**3, some_operation_on_i, f(i), g(i)):
        y.append(a) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-19T18:46:58.407

```
>>> import itertools
>>> list(itertools.chain.from_iterable(y))
[0, 0, 1, 1, 2, 4, 3, 9, 4, 16, 5, 25, 6, 36, 7, 49, 8, 64, 9, 81] 
```