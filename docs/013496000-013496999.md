# StackOverflow 问答 13496000-13496999

# git - 离开分支只是一种礼仪，但无法在 GIT 中访问它

> ID：13496001
> 
> 赞同：1
> 
> 时间：2012-11-21T15:00:42.160
> 
> 标签：git, git-branch, git-log

我希望能够虚拟地删除一个分支，因此没有人可以从该点签出它并进行更改，而是将分支的名称作为历史记录中的指标或礼仪。

换句话说，我希望 gitk 继续向我显示我过去分支的名称，无论我是否删除了它们。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:03:10.447

听起来你想要[标记](http://git-scm.com/book/en/Git-Basics-Tagging)。

示例用法：

`git tag archive/branch_name`

`git push origin archive/branch_name`

然后，您可以删除标记引用的分支。

就个人而言，我使用下面的[别名](https://git.wiki.kernel.org/index.php/Aliases)来标记一个分支，推送它并删除远程分支和本地分支：

```
tagarchive = !f() { git tag archive/$1 origin/$1 && git push origin :$1 && git push origin archive/$1 && git branch -d $1; }; f 
```

用法：`git tagarchive branch_name`

# php - 调用未定义的函数 curl_init()，但我取消注释 extension=php_curl.dll

> ID：13496002
> 
> 赞同：1
> 
> 时间：2012-11-21T15:00:46.370
> 
> 标签：php, curl

我有这个错误，但我在 php.ini 中取消注释这个 extension=php_curl.dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:15:38.260

问题是，wamp curl 模块在 64 位版本中有一个错误。我在这里遇到了同样的问题。

**看这里：**
[http :](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)
[//www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/ http://forum.wampserver.com /read.php?2,85716](http://forum.wampserver.com/read.php?2,85716)

使用 curl 模块并将其替换为您现有的模块（如果您有 64 位版本），我也已将模块替换为 32 位版本。但是你需要另一个模块。使用 TS（线程安全）版本。我希望你使用 64 位版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:07:27.787

确保您重新启动 apache 和 mysql - 如果您不确定如何，重新启动将对其进行排序。在重新启动之前，还要检查`extension=php_curl.dll` php.ini 中未注释的 php 和 apache 文件夹以及 dll 文件是否确实存在于您的构建中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T15:05:53.330

创建一个新的 php 文件——比如 temp.php——然后添加：

```
phpinfo(); 
```

它应该为您提供整个 PHP 配置的信息。滚动浏览已安装的库并查看 cURL 是否存在。如果没有，请点击手册 - h​​ttp: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php) - 并进行设置。那里的说明非常好。

正如发布者：[CaseySoftware](https://stackoverflow.com/users/41752/caseysoftware) [在这里](https://stackoverflow.com/a/2997860/1169669)

# c# - 有没有办法发出 System.Threading.Tasks.Task 完成的信号？

> ID：13496006
> 
> 赞同：8
> 
> 时间：2012-11-21T15:00:56.667
> 
> 标签：c#, .net

我有一个库，它是许多网络连接的复杂仲裁者。它的主要对象的每个方法都接受一个委托，当网络响应给定请求时调用该委托。

我想翻译我的库以使用新的 .NET 4.5“async/await”模式；这将要求我返回一个“任务”对象，该对象将向用户发出调用的异步部分已完成的信号。创建这个对象需要一个函数来代表任务——据我了解，它本质上是一个轻量级线程。

这并不真正适合我的库的设计 - 我希望任务的行为更像一个事件，并直接向用户发出他们的请求已完成的信号，而不是代表一个函数。这可能吗？我应该避免以这种方式滥用“异步/等待”模式吗？

不知道我说得好不好，希望你能明白我的意思。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T15:11:39.813

> 据我了解，它本质上是一个轻量级线程。

不，这不是真的。在某些情况下，我*可能*`Task`是真的，但这只是. 你*可以*通过传递一个委托来启动一个线程，并让它执行它（通常是异步的，可能是同步的，默认情况下使用线程池）。

使用线程的另一种方法是使用`TaskCompletionSource`. 当您这样做时，任务（可能）不会创建任何线程、使用线程池或任何类似的东西。此模型的一个常见用法是将基于事件的 API 转换为基于任务的 API：

让我们假设，仅仅因为它是一个常见的例子，我们希望 a`Task`将在`From`我们拥有的 a 关闭时完成。已经有一个`FormClosed`事件在该事件发生时触发：

```
public static Task WhenClosed(this Form form)
{
    var tcs = new TaskCompletionSource<object>();

    form.FormClosing += (_, args) =>
    {
        tcs.SetResult(null);
    };

    return tcs.Task;
} 
```

我们创建一个`TaskCompletionSource`，向相关事件添加一个处理程序，在该处理程序中，我们发出任务完成的信号，并`TaskCompletionSource`为我们提供`Task`返回给调用者的 a 。这`Task`不会导致创建任何新线程，也不会使用线程池或类似的东西。

您可以使用这种看起来非常异步的构造来创建基于任务/事件的模型，但仅使用单个线程来完成所有工作（UI 线程）。

一般来说，只要你想要一个`Task`代表除执行函数之外的东西的东西，你就会考虑使用`TaskCompletionSource`. 它通常是解决问题的适当概念方法，而不是可能使用现有的 TPL 方法之一，例如`WhenAll`,`WhenAny`等。

> 我应该避免以这种方式滥用“异步/等待”模式吗？

不，因为这不是滥用。这是对`Task`构造以及`async/await`. 例如，考虑一下您可以使用我上面的辅助方法编写的代码：

```
private async void button1_Click(object sender, EventArgs e)
{
    Form2 popup = new Form2();
    this.Hide();
    popup.Show();
    await popup.WhenClosed();
    this.Show();
} 
```

这段代码现在可以正常工作了；创建一个新表单，隐藏自己，显示弹出窗口，等到弹出窗口关闭，然后再次显示自己。但是，由于它不是阻塞等待，因此 UI 线程不会被阻塞。我们也不需要为事件而烦恼；添加处理程序，处理多个上下文；移动我们的逻辑，或其中任何一个。（所有这些都发生了，只是对我们隐藏了。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T15:04:58.527

> 我想翻译我的库以使用新的 .NET 4.5“async/await”模式；这将要求我返回一个“任务”对象，该对象将向用户发出调用的异步部分已完成的信号。

好吧，不是真的 - 你可以返回任何实现等待模式的东西 - 但 a`Task`是最简单的方法。

> 这并不真正适合我的库的设计 - 我希望任务的行为更像一个事件，并直接向用户发出他们的请求已完成的信号，而不是代表一个函数。

您可以调用`Task.ContinueWith`以充当“处理程序”以在任务完成时执行。事实上，这就是`TaskAwaiter`引擎盖下的作用。

老实说，您的问题并不是很清楚，但是如果您*真的*想创建一个`Task`，然后可以随时强制完成，我怀疑您只是想要[`TaskCompletionSource<TResult>`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)-您调用[`SetResult`](http://msdn.microsoft.com/en-us/library/dd449202.aspx),[`SetCanceled`](http://msdn.microsoft.com/en-us/library/dd449188.aspx)或[`SetException`](http://msdn.microsoft.com/en-us/library/dd990643.aspx)方法来指示适当的完成类型。（或者您可以调用`TrySet...`版本。）使用该[`Task`](http://msdn.microsoft.com/en-us/library/dd449187.aspx)属性将任务返回到任何需要它的地方。

# ios - Facebook SDK 3.1 - com.facebook.sdk 使用 [facebook authorize:permissions] 进行身份验证时出现错误 5

> ID：13496007
> 
> 赞同：4
> 
> 时间：2012-11-21T15:00:59.383
> 
> 标签：ios, xcode, facebook, sdk, authorization

使用以下授权方法进行身份验证时，我收到了带有 startWithGraphPath 和 startForMeWithCompletionHandler 但不是 requestWithGraphPath 的 com.facebook.sdk 错误 5。我成功地获得了令牌（在 didLogin 中打印）并使用 requestwithGraphPath 获得了我想要的任何东西，但我无法使用其他方法。如果有人遇到相同的问题或类似的问题或有任何想法，如果您分享，我会很高兴。

谢谢

方法：

```
NSArray *permissions = [[NSArray alloc] initWithObjects: @"user_likes",@"offline_access",@"read_stream",@"publish_stream",nil];
[_facebook authorize:permissions]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T20:43:39.397

startWithGraphPath 和其他 start* 方法可能不会获取活动会话。这些方法依赖于设置的活动会话。看：

[https://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection#startWithGraphPath%3AcompletionHandler%3A](https://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection#startWithGraphPath%3AcompletionHandler%3A)

“该请求使用由 [FBSession activeSession] 表示的活动会话。”

所以你必须做这样的事情：

```
[FBSession setActiveSession:session]; 
```

其中 session 是您之前设置的 FBSession。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:57:30.063

以下解决方案对我有用。但是，如果您要存储永久访问令牌，则需要确保用户没有删除应用程序权限，否则会出错。您可以使用 requestWithGraphPath -> "me/permissions" 进行检查。

应用程序初始化函数（例如：didFinishLaunchingWithOptions/或您在其中初始化*需要同时为 fbsessiondelegate*的 Facebook 对象）

```
...    
NSArray* permissions = [[NSArray alloc] initWithObjects:@"user_likes",@"offline_access", nil];

        FBSession*oursession = [[FBSession alloc] initWithPermissions:permissions];
... 
```

FBDidLogin 函数：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize]; 
```

图 api 请求函数示例：

```
NSUserDefaults *userDefaults =[NSUserDefaults standardUserDefaults];
        NSString *key = [userDefaults stringForKey:@"FBAccessTokenKey"];

    FBRequest* ourcon = [[FBRequest alloc] initWithSession:oursession graphPath:@"me/likes" parameters:params HTTPMethod:@"GET"];

            [ourcon startWithCompletionHandler: ^(FBRequestConnection *connection, id<FBGraphUser> result, NSError *error){
                if(error)
                {
                    //NSLog(error.code);
                    return;
                }

                NSArray* collection = (NSArray*)[result data];
                NSLog(@"You have %d like", [collection count]);

                NSDictionary* name = [collection objectAtIndex:14];
                NSLog(@"Like Name: %@", [name objectForKey:@"name"]);
            }]; 
```

# apache-flex - AS3 XMLSocket 无法检测到客户端断开连接

> ID：13496009
> 
> 赞同：1
> 
> 时间：2012-11-21T15:01:02.207
> 
> 标签：apache-flex, sockets, connection, monitoring, xmlsocket

在 Flex 应用程序（不是 AIR，而是 Flash 播放器）中，我有一个 XMLSocket 正在运行，而且我终其一生都无法弄清楚如何检测客户端断开连接。如，当我从我的计算机连接到远程服务器，然后断开计算机与互联网的连接时，套接字认为它仍然连接（没有 IOError 或关闭事件抛出）。在我的套接字类中，我让它每两秒向套接字发送一条消息，希望一旦连接被切断，它会检测到 XMLSocket.send() 上的 IOError，但即使这样也行不通！它仍然尝试发送数据，并且不会抛出异常，尽管它肯定会失败。

当互联网连接建立时，远程服务器上的套接字服务器会从 Flex 客户端接收消息。

我研究了 SocketMonitor 和 URLMonitor，但它们仅适用于 AIR，而不适用于 flash 播放器。

我想我不了解套接字的一些基本原理。任何人都可以帮忙吗？

```
package org.MB.components
{
import flash.errors.IOError;
import flash.events.DataEvent;
import flash.events.Event;
import flash.events.IOErrorEvent;
import flash.events.SecurityErrorEvent;
import flash.events.TimerEvent;
import flash.net.XMLSocket;
import flash.utils.Timer;

import org.MB.appData.DataHolder;
import org.MB.utils.XMLUtils;

public class MBSocket extends XMLSocket
{
    private var timer:Timer;

    private var _host:String;
    private var _port:int;

    public function MBSocket(host:String=null, port:int=0)
    {
        super(host, port);

        this._host = host;
        this._port = port;

        addListeners();
    }

    public function addListeners():void
    {
        addEventListener(Event.CLOSE, onClose);
        addEventListener(Event.CONNECT, onConnect);
        addEventListener(IOErrorEvent.IO_ERROR, onIOError);
        addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);

        addEventListener(DataEvent.DATA, onData);
    }

    //Various event handlers and code to deal with the two-second timer here

    protected function onConnectedTimer(e:TimerEvent):void
    {
        //I get this traced message, and no IOError is thrown
        trace("SENDING TEST");
        this.send(':::\0'); 
    }
} 
```

# php - 图像上的 div 颜色

> ID：13496010
> 
> 赞同：-1
> 
> 时间：2012-11-21T15:01:05.337
> 
> 标签：php, jquery, mysql, css

我有这张图片，我在上面放置了小 div。当用户单击 div 时，div 的颜色会从蓝色变为红色，并使用 div id 将值插入数据库。

我的问题是

1.  页面刷新时单击后如何保留 div 的颜色。我可以调用数据库并检查每个 div 但不知何故我觉得这不是最好的方法

2.  我已经设置 **了位置：绝对；左：80px；上：21px；**对于每个 div。我想知道是否还有其他更好的方法，因为我必须为每个用户制作一个具有相同功能的图像

请帮我找到解决方案

[1]：[http](http://i.stack.imgur.com/Hhdstrong) : //i.stack.imgur.com/Hhdstrong textzi.png

提前谢谢大家

我没有被允许在这里添加图像，所以我暂时从本地系统共享图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:08:02.520

单击时更改颜色

```
<div onclick="changeColor()" id="demo">

function changeColor(){
document.getElementById("demo").style.background="red";
} 
```

颜色可以存储在数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:10:22.397

1.  如果您想将选定的值保存一段时间，这是唯一真正的解决方案（存储和检索值）；它还将适应刷新。

2.  这是一个很好的解决方案，但如果我理解正确，它会迫使您计算每个新用户的位置。您可以考虑浮动容器 div 并相应地将绝对 div 定位在其中。

# android - again: Android MQTT unable to create client

> ID：13496011
> 
> 赞同：8
> 
> 时间：2012-11-21T15:01:16.863
> 
> 标签：android, adt, mqtt

I'm trying to create an MqttClient in Android, using an Android emulator (Nexus7) on ADT (Eclipse 3.8.0 on a Linux Fedora17. I found this question answered [(Android MQTT unable to create client)](https://stackoverflow.com/questions/13407045/android-mqtt-unable-to-create-client), but it failed to solve my problem.

I created an activity that allows the user to enter the directory where to store the presistence file, but there is no way to avoid catching the exception. I tried with "/mnt/sdcard/", "/mnt/", "/mnt/sdcard/tmp/" and similar.

Do I need to pay attention to particular settings in Android emulator on in Eclipse project? Are there any uses-permissions to be included in the application?

I looked at the various mqtt resources mentioned in the quoted answered question, but I couldn't manage to find an answer.

This is my code:

```
package com.storassa.android.mqttsample;

import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttDefaultFilePersistence;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.TextView;

public class MqttSample extends Activity {

    Button okButton = null;
    AutoCompleteTextView inputTextView = null;
    TextView errorTextView = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mqtt_sample);

        okButton = (Button)findViewById(R.id.okButton);
        inputTextView = (AutoCompleteTextView)findViewById(R.id.InputText);
        errorTextView = (TextView)findViewById(R.id.errorText);

        okButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                try {
                    String dir = inputTextView.getText().toString();
                    MqttDefaultFilePersistence mdfp = new MqttDefaultFilePersistence(
                            dir);
                    MqttClient client = new MqttClient("tcp://127.0.0.1:1833",
                            "0001", mdfp);
                }
                catch (Exception e) {
                    String errorText = "";
                    for (StackTraceElement error : e.getStackTrace())
                        errorText += error.toString() + "\n";
                    errorTextView.setText(errorText);
                }
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_mqtt_sample, menu);
        return true;
    }

} 
```

and this is the Stack:

```
MqttException(0) at
org.eclipse.paho.client.mqttv3.MqttDefaultFilePersistence.open(MqttDefaultFilePersistence.java:74)
org.eclipse.paho.client.mqttv3.MqttClient.<init>(MqttClient.java:183)
com.storassa.android.mqttsample.MqttSample$1.onClick(MqttSample.java:38)
android.view.View.performClick(View.java:4202)
android.view.View$PerformClick.run(View.java:17340)
android.os.Handler.handleCallback(Handler.java:725)
android.os.Handler.dispatchMessage(Handler.java:92)
android.os.Looper.loop(Looper.java:137)
android.app.ActivityThread.main(ActivityThread.java:5039)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T10:53:24.430

You could alternatively use an instance of the class MemoryPersistence if you don't rely on file persistency.

So the call to get a client would be:

```
MemoryPersistence persistence = new MemoryPersistence();
MqttClient client = new MqttClient(host, clientId, persistence); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T09:12:47.243

After a whole day spent in understanding the issue and in googling anywhere to find it, eventually I got it: very simply a permission has to be added to the manifest

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

I don't know whether internal directories can be used instead of the sdcard.

As this is the first time I answer my own question, let me know whether it is a good etiquette to flag as correct answer my own answer (I found different opinions on this topics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T02:37:33.953

This solved my issue.

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

There is a bit mocking around the WAMP as well.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T18:07:10.937

```
 MqttClientPersistence persistence = new MqttDefaultFilePersistence(mContext.getApplicationInfo().dataDir);
        mqttclient = new MqttAsyncClient(url.toString(), clientId, persistence); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-26T19:35:02.890

The error is because the MQTT client code is trying to open a file on the local storage to store messages in when publishing at high (1/2) QOS levels. There will be 2 causes for the error:

1.You may not have granted storage access to the application

2.You are unlikely to have permission to write to the default location that the MQTT client chooses.

The easiest way to get round this is to use the in memory storage (org.eclipse.paho.client.mqttv3.persist.MemoryPersistence) for the MQTT client.

```
...
MemoryPersistence persistence = new MemoryPersistence();
client = new MqttClient("tcp://test.mosquitto.org:1883", clientId);
... 
```

Once you get round that problem you are likely to run into the issue of doing network io on the UI thread. To avoid that I suggest you look at the [AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html) code that Android provides

# javascript - Javascript点击监听器循环两次

> ID：13496013
> 
> 赞同：1
> 
> 时间：2012-11-21T15:01:21.823
> 
> 标签：javascript

我正在侦听 . 当我在单击链接时查看调试器中发生的事情时，它会在下面的 Javascript 中循环两次。这意味着它似乎什么也没做，但它第一次工作，第二次被撤消。

这是有问题的Javascript：

```
$("#list a").click(function(e) {
    var id = $(e.currentTarget).attr("id");
    $("div#edit_due_at_"+id).toggleClass("hidden");
    $("span.due_"+id).toggleClass("hidden");
    $(this).addClass("hidden");
    e.preventDefault();
    return false
}); 
```

和 HTML：

```
 <ul id="list">
      <li class="up" id="32">
            <span class="cname ">sally and eddie</span>
            <br>
            <span class="time-ago">Added 6 days ago.</span><br>
              <span class="time-ago">
                <a href="#" id="32">add due date</a>

              </span>
          <form accept-charset="UTF-8" action="/contacts/32" class="edit_contact" id="edit_contact_32" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="dwUgdONDp1TWL6zpdI1+UYvcy3KvIxWUIoRiqMwJklY=" /></div>  
                    <input id="contact_done" name="contact[done]" type="hidden" value="true" />
            <input id="contact_date_done" name="contact[date_done]" type="hidden" value="2012-11-21" />
                    <input class="btn btn-small hidden done_btn" name="commit" type="submit" value="Mark as done" />
</form>      </li>
      <li class="up" id="33">
            <span class="cname ">adding a contact for next Monday</span>
            <br>
            <span class="time-ago">Added 5 days ago.</span><br>
              <span class="time-ago">
                <a href="#" id="33">add due date</a>

              </span>
          <form accept-charset="UTF-8" action="/contacts/33" class="edit_contact" id="edit_contact_33" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="dwUgdONDp1TWL6zpdI1+UYvcy3KvIxWUIoRiqMwJklY=" /></div>  
                    <input id="contact_done" name="contact[done]" type="hidden" value="true" />
            <input id="contact_date_done" name="contact[date_done]" type="hidden" value="2012-11-21" />
                    <input class="btn btn-small hidden done_btn" name="commit" type="submit" value="Mark as done" />
</form>      </li>........</ul> 
```

我以为这`return false`会阻止它再次循环通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:53:11.107

问题是我在 HTML 头中引用了两个 contacts.js 文件。在 Rails 中，我复制了 contacts.js.coffee 文件并将其设为 contacts.js，但我没有删除原始的 contacts.js.coffee 文件。一旦我删除了第二个文件，它就可以与原始 JS 和 @Sander 的 JS 一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:07:47.067

这是你需要的吗？

```
// add a custom click handler
$("#list a").on("click.myHandler", function(e) {
    e.preventDefault();
    var id = $(e.currentTarget).attr("id");
    $("div#edit_due_at_"+id).toggleClass("hidden");
    $("span.due_"+id).toggleClass("hidden");
    $(this).addClass("hidden");
    // remove the custom click handler
    $(this).off("click.myHandler");
}); 
```

请注意，我删除了 return false，因为 e.preventDefault() 也是如此

# python - Python 2.6 / Django1.3 中是否可以有变量点访问器？

> ID：13496017
> 
> 赞同：1
> 
> 时间：2012-11-21T15:01:26.637
> 
> 标签：python, django

这是我要求的一个人为的例子：

```
random_list = []
random_uuid = "1234567890-1234567890"
model_instance = Model.objects.filter(related_link=random_uuid)
for x in ['foo', 'bar', 'ray', 'mee']:
    random_list.append(model_instance.x) 
```

三个必答题：

*   这可能吗？
*   如果有怎么办？
*   有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:05:13.033

当然，只需使用[getattr](http://docs.python.org/2/library/functions.html#getattr)：

```
for x in ['foo', 'bar', 'ray', 'mee']:
    random_list.append(getattr(model_instance, x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:06:29.650

```
for x in ['foo', 'bar', 'ray', 'mee']:
    random_list.append(getattr(model_instance, x)) 
```

（编辑：getattr 抱歉没有得到）

# javascript - 在 JSON 对象中的特定位置插入属性

> ID：13496023
> 
> 赞同：8
> 
> 时间：2012-11-21T15:01:41.377
> 
> 标签：javascript, jquery, json

> **可能的重复：**
> [JavaScript 是否保证对象属性顺序？](https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order)

我想知道如何在特定位置插入 JSON 对象属性？让我们假设这个 Javascript 对象：

```
var data = {
  0: 'lorem',
  1: 'dolor sit',
  2: 'consectetuer'
} 
```

我有一个 ID 和一个字符串，例如：

```
var id = 6;
var str = 'adipiscing'; 
```

现在，我想插入和（例如）`id`之间，它应该是这样的：`0``1`

```
data = {
  0: 'lorem',
  6: 'adipiscing',
  1: 'dolor sit',
  2: 'consectetuer'
} 
```

**我怎样才能做到这一点？** 有没有 jQuery 解决方案呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T15:08:02.847

要指定对象元素的放置顺序，您需要使用对象数组，如下所示：

```
data = [
    {0: 'lorem'},
    {1: 'dolor sit'},
    {2: 'consectetuer'}
] 
```

然后，您可以将元素推送到数组中的某个位置：

```
// Push {6: 'adipiscing'} to position 1
data.splice(1, 0, {6: 'adipiscing'})

// Result:
data = [
    {0: 'lorem'},
    {6: 'adipiscing'},
    {1: 'dolor sit'},
    {2: 'consectetuer'}
]
// Access it:
data[0][0] //"lorem" 
```

但是，这将使您指定的索引 ( `{0:`) 几乎毫无用处。

# tsql - tsqlt - 为单元测试创 建单独的数据库

> ID：13496024
> 
> 赞同：10
> 
> 时间：2012-11-21T15:01:45.537
> 
> 标签：tsql, tsqlt

我已经开始使用 tsqlt，我的问题是可以有一个单独的数据库，只包含测试的东西吗？（表/sp's/程序集等）。

此测试数据库将与实际/目标数据库位于同一实例上。

如果我尝试伪造表格，则会收到以下错误：

```
FakeTable could not resolve the object name, 'target_db.dbo.Sometable' 
```

有没有人有这方面的经验？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T07:46:49.707

正如您所发现的，这目前是不可能的，因为模拟过程不接受三个部分名称。这是 SQL 测试（RedGate 的产品，充当 tSQLt 的前端）的用户反馈论坛中涵盖的内容：http: [//sqltest.uservoice.com/forums/140716-sql-test-forum/suggestions/ 2421628-减少足迹](http://sqltest.uservoice.com/forums/140716-sql-test-forum/suggestions/2421628-reduce-the-footprint)

tSQLt 框架的作者之一丹尼斯·劳埃德（Dennis Lloyd）在该线程的末尾写道，他们将继续考虑支持单独的“tSQLt”数据库。

[还有一个在http://sqltest.uservoice.com/forums/140716-sql-test-forum/suggestions/2423449-being-able-to-mock-fake-remote-objects](http://sqltest.uservoice.com/forums/140716-sql-test-forum/suggestions/2423449-being-able-to-mock-fake-remote-objects)上模拟远程对象的相关问题

我希望这会有所帮助，

戴夫

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-07T21:11:03.880

您现在可以执行此操作，只要 tSQLt 框架位于另一个数据库中：

```
EXEC tSQLt.FakeTable '[dbo].[Position]';
EXEC OtherDB.tSQLt.FakeTable '[dbo].[PositionArchive]'; 
```

[来源](http://datacentricity.net/2011/12/advanced-database-unit-testing-with-tsqlt-testing-cross-database-tables/)

这意味着您至少可以将测试放在您想要的地方，尽管您必须将框架安装在被测的实际数据库中。这并不完美，但更好。

# java - 使用反射比较字段值

> ID：13496026
> 
> 赞同：11
> 
> 时间：2012-11-21T15:01:49.897
> 
> 标签：java, reflection, field

我正在尝试以通用方式比较两个不同对象的字段值。我有一个函数（见下文），它接受两个对象，然后获取字段，然后在循环中比较字段，如果字段不相同，则将字段添加到列表中 - 这是正确的方法吗？

```
public void compareFields(Object qa, Object qa4) throws FieldsNotEqualException
{

  Field[] qaFields = qa.getClass().getFields();
  Field[] qa4Fields = qa4.getClass().getFields();

  for(Field f:qaFields) 
  { 

    for(Field f4:qa4Fields)
    {
       if(f4.equals(f))
       {
           found = true;
           break;
       }
       else
       {
           continue;
       }
    }
  }

 if(!found)
 {
    report.add(/*some_formatted_string*/) //some global list 
    throw new FieldsNotEqualException();
 }
} 
```

我在谷歌上搜索，发现 C# 有一个 PropertyInfo 类——Java 有类似的东西吗？另外，有没有办法像`f.getFieldValue()`- 我知道没有这样的方法，但也许还有另一种方法？？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T15:10:46.727

您可以查看 org.apache.commons.lang.builder.EqualsBuilder 如果您想逐个字段进行比较，这将为您省去很多麻烦。

```
org.apache.commons.lang.builder.EqualsBuilder.reflectionEquals(Object, Object) 
```

如果您想自己比较字段，请查看`java.lang.Class.getDeclaredFields()`哪个将为您提供所有字段，包括非公共字段。

要比较字段的值，请使用`f.get(qa).equals(f.get(qa4))` 当前，您实际上是在比较字段实例而不是值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:16:44.137

如果您想比较 bean 属性（getter 返回的值）而不是比较字段值，[commons-beanutils 之](http://commons.apache.org/beanutils/)类的库可以为您提供帮助。

但是，如果您想坚持使用普通反射，您应该：

1.  使用`Class.getDeclaredFields()`代替`Class.getFields()`，因为后者只返回公共字段。
2.  由于字段仅依赖于它们的类，因此您应该缓存结果并将字段保存在静态/实例变量中，而不是`getDeclaredFields()`为每次比较调用。
3.  Once you have an object of that class (say `o`), in order to get the value of some field `f` for that particular object, you need to call: `f.get(o)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T14:38:06.753

// If you want to have some fields, not all field then use this.

```
 public boolean compareObject(Object object) throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException 
{

 String[] compareFields = { "fieldx", "fieldy","fieldz", "field15",
        "field19"}; // list of all we need 
for(String s : compareFields) {
Field field = DcrAttribute.class.getDeclaredField(s); // get a list of all fields for this class
    field.setAccessible(true);
    if(!field.get(this).equals(field.get(object))){  //if values are not equal          
    return true;    
    }       

    }

    return false;
} 
```

# c++ - C++ - 防止全局实例化？

> ID：13496027
> 
> 赞同：8
> 
> 时间：2012-11-21T15:01:51.183
> 
> 标签：c++, constructor, global

有没有办法强制在堆栈上实例化一个类，或者至少阻止它在 C++ 中是全局的？

我想防止全局实例化，因为构造函数调用需要先前初始化的 C API。AFAIK 无法控制全局对象的构造顺序。

编辑：该应用程序以嵌入式设备为目标，动态内存分配也被禁止。用户实例化类的唯一可能解决方案是在堆栈上或通过放置新运算符。

Edit2：我的类是依赖于其他外部库（来自 C API）的库的一部分。我无法修改这些库，也无法控制库在最终应用程序中的初始化方式，这就是为什么我正在寻找一种方法来限制类的使用方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:08:42.900

我宁愿通过将 C API 包装到一个类中来安全地调用 C API，而不是对你的类的对象施加一些任意的限制。该类的构造函数将进行初始化，而析构函数将释放获取的资源。

然后你可以要求这个类作为你的类的参数，初始化总是会成功的。

用于包装器的技术称为 RAII，您可以[在此 SO 问题](https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii)和此[wiki 页面](http://en.wikipedia.org/wiki/RAII)中阅读更多有关它的信息。它原本是为了将资源初始化和释放封装到对象中，但也可以用于各种其他的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:42:23.577

本质上，您不能阻止将对象作为全局对象。我认为你不应该尝试：毕竟，为什么不能构建一个初始化这些库的对象，全局实例化它，然后全局实例化你的对象？

因此，让我重新表述这个问题以深入了解其核心：

> 在一些初始化工作完成之前，如何防止我的对象被构​​造？

一般来说，响应是：*取决于*。

这一切都归结为初始化工作是什么，特别是：

*   有没有办法检测它还没有被调用？
*   多次调用初始化函数有缺点吗？

例如，我可以创建以下*初始化程序*：

```
class Initializer {
public:
    Initializer() { static bool _ = Init(); (void)_; }

protected:
    // boilerplate to prevent slicing
    Initializer(Initializer&&) = default;
    Initializer(Initializer const&) = default;
    Initializer& operator=(Initializer) = default;

private:
    static bool Init();
}; // class Initializer 
```

第一次实例化此类时，它调用`Init`，然后将其忽略（以微不足道的比较为代价）。现在，从这个类继承（私有）以确保在调用构造函数的初始化程序列表或主体时已执行所需的初始化是微不足道的。

> 应该如何`Init`实施？

取决于什么是可能的和更便宜的，要么检测初始化完成，要么调用初始化。

> 如果 C API 如此糟糕，您实际上也不能这样做吗？

你是吐司。欢迎文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:06:06.517

半个答案：为了防止堆分配（因此只允许堆栈分配）覆盖 operator new 并将其设为私有。

```
void* operator new( size_t size ); 
```

编辑：其他人说只是记录限制，我有点同意，尽管如此，只是为了它：没有堆分配，没有全局分配，API 初始化（不是在构造函数中，但我认为仍然足够好）：

```
class Boogy
{
public:

    static Boogy* GetBoogy()
    {
        // here, we intilialise the APIs before calling
        // DoAPIStuffThatRequiresInitialisationFirst()
        InitAPIs();
        Boogy* ptr = new Boogy();
        ptr->DoAPIStuffThatRequiresInitialisationFirst();
        return ptr;
    }

    // a public operator delete, so people can "delete" what we give them
    void operator delete( void* ptr )
    {
        // this function needs to manage marking array objects as allocated                        
        // or not
    }

private:

    // operator new returns STACK allocated objects.  
    void* operator new( size_t size )
    {
        Boogy* ptr = &(m_Memory[0]);
        // (this function also needs to manage marking objects as allocated 
        // or not)
        return ptr;
    }

    void DoAPIStuffThatRequiresInitialisationFirst()
    {
        // move the stuff that requires initiaisation first
        // from the ctor into HERE.
    }

    // Declare ALL ctors private so no uncontrolled allocation, 
    // on stack or HEAP, GLOBAL or otherwise, 
    Boogy(){}

    // All Boogys are on the STACK.
    static Boogy m_Memory[10];

}; 
```

我不知道我是骄傲还是惭愧！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:31:04.317

> 有没有办法强制在堆栈上实例化一个类，或者至少阻止它在 C++ 中是全局的？

**并不真地。**您可以将构造函数设为私有并仅使用工厂方法创建所述对象，但没有什么能真正阻止您使用所述方法创建全局变量。

如果全局变量在应用程序进入“main”之前被初始化，那么你可以在“main”设置一些标志之前从构造函数中抛出异常。但是，由实现决定何时初始化全局变量。因此，它们可以在应用程序进入“main”后被初始化。即，这将依赖于未定义的行为，这不是一个好主意。

理论上，您可以尝试遍历调用堆栈并从那里看到它被调用。但是，编译器可以内联构造函数或多个函数，这将是不可移植的，并且在 C++ 中遍历调用堆栈会很痛苦。

您也可以手动检查“this”指针并尝试猜测它的位置。但是，这将是特定于该特定编译器、操作系统和体系结构的不可移植的 hack。

所以没有我能想到的好的解决方案。

因此，最好的想法是改变你的程序行为，正如其他人已经建议的那样——创建一个单例类，在构造函数中初始化你的 C api，在析构函数中取消初始化，并在必要时通过工厂方法请求这个类。这将是解决您的问题的最优雅的解决方案。

或者，您可以尝试记录程序行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T15:18:27.417

您可以尝试使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-21T15:13:05.257

要在堆栈上分配一个类，你只需说

```
FooClass foo; // NOTE no parenthesis because it'd be parsed 
              // as a function declaration. It's a famous gotcha. 
```

要在堆上分配，你说

```
std::unique_ptr<FooClass> foo(new FooClass()); //or
FooClass* foop = new FooClass(); // less safe 
```

只有在程序范围内声明它时，您的对象才会是全局的。

# .net - .NET：在加载时扩展类还是有类加载器的概念？

> ID：13496034
> 
> 赞同：0
> 
> 时间：2012-11-21T15:02:29.550
> 
> 标签：.net, classloader, dynamic-assemblies

这个问题可能被问了数百次，但又问了一遍：.NET 中是否存在类加载器的概念。让我详细说明一下这个问题：我不想在一个类中注入几个额外的代码项，以便能够将这个类的对象插入要开发的框架中。

在 Java 中，我使用读取字节码的类加载器来执行此操作，应用必要的修改并将类作为类型实例提供给应用程序。现在，可以通过反射的方式创建对象。

通过反射的方式，这在 .NET 中也肯定是可能的。因此，使用 Type::GetType() 调用当前 AppDomain 实例的 TypeResolver。在解析器中，加载原始类型，然后将其用作在动态程序集中创建的派生类型的基类。这有点棘手，因为派生类型不在同一个程序集中，因此内部类并不容易处理。但它是可行且稳定的。

现在，称我为迂腐的德国人，我加载了原始类型和派生类型，而在 Java 中我只有修改后的类型。我是否也可以在 .NET 中完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-24T07:43:19.487

为了在这里做一些家务，这就是问题所在。

事实上，我鄙视在加载时更改现有类的方法。从 .NET 的角度来看，将所有者设置为要扩展的类型的 DynamicMethod 可以解决问题。但是，您不能以这种方式添加数据对象——如果这是必需的，您需要通过 Reflection.TypeBuilder 派生您自己的类。这两个概念在 .Net Standard（前 PCL）中都不可用。

如果您有类似的要求，我强烈建议您联系 DLR（动态元对象）——这是我最终开始使用的概念。

# wordpress - 静态首页上的分页问题wordpress

> ID：13496035
> 
> 赞同：1
> 
> 时间：2012-11-21T15:02:30.190
> 
> 标签：wordpress, pagination

嗨有一个问题，我无法在静态首页上进行分页，查看了 wordpress codex 并完成了它所说的构建但仍然没有乐趣，

非常感谢任何帮助

```
<?php
$paged = (get_query_var('page')) ? get_query_var('page') : 1;
$type = 'Galleries';
$args=array(
   'category_name' => 'Gallery',
   'post_status' => 'publish',
   'posts_per_page' => 2,
   'paged' => $paged 
 );

$my_query = null;
$my_query = new WP_Query($args);
?> 
<section id="maincontent" class="twelve columns">
<ul id="gallery_menu">
<?php if( $my_query->have_posts() ) {
    while ($my_query->have_posts()) : $my_query->the_post(); ?>
        <li class="gallery_titleframe">
            <div class="gallery_titleborder">
                <div class="gallery_titleimage">
                <?php $str = get_the_ID() ; ?> 
                    <a href="<?php the_permalink() ?>" title="<?php  echo get_post_meta($str, 'gallery1', true); ?>">  
                        <img src="<?php echo get_post_meta($str, 'gallery1', true); ?>"  width="256" height="186">
                     </a>
                </div>
            </div>
            <div class="gallery_titletext">
                <a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a>
            </div>
         </li>    
<?php endwhile;
    } ?> 
        <div id="nav-below" class="navigation">
            <div class="nav-previous"><?php next_posts_link(); ?></div>
            <div class="nav-next"><?php previous_posts_link(); ?></div>
        </div><!-- #nav-below -->

 <?php wp_reset_query();  // Restore global post data stomped by the_post(). ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:27:21.670

`next_posts_link`并`previous_posts_link`依赖于全局`$wp_query`。您可以在调用它们之前将您的自定义查询临时分配给全局。

```
<?php
  $temp = $wp_query;
  $wp_query = null;
  $wp_query = $my_query;
?>
<div id="nav-below" class="navigation">
  <div class="nav-previous"><?php next_posts_link(); ?></div>
  <div class="nav-next"><?php previous_posts_link(); ?></div>
</div><!-- #nav-below -->
<?php
  $wp_query = null;
  $wp_query = $temp;
  wp_reset_query();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T05:25:56.767

替换这个

```
$paged = (get_query_var('page')) ? get_query_var('page') : 1; 
```

有了这个

```
if ( get_query_var('paged') ) {
    $paged = get_query_var('paged');
} elseif ( get_query_var('page') ) {
    $paged = get_query_var('page');
} else {
    $paged = 1;
} 
```

# jquery - 使用 td-value 作为 jQuery 的 tr-class？

> ID：13496036
> 
> 赞同：0
> 
> 时间：2012-11-21T15:02:30.640
> 
> 标签：jquery, css, html-table

我想给表格行一个单元格的类，如下所示：

我有这张桌子，

```
<table id="mytable">
 <tr>
  <th>Name</th>
  <th>Favorite color</th>
 </tr>
  <td>James</td>
  <td>red</td>
 </tr>
 <tr>
  <td>John</td>
  <td>blue</td>
 </tr>
</table> 
```

我希望它以这样的方式结束。

```
<table id="mytable">
 <tr>
  <th>Name</th>
  <th>Favorite color</th>
 </tr>
 <tr class="red">
  <td>James</td>
  <td>red</td>
 </tr>
 <tr class="blue">
  <td>John</td>
  <td>blue</td>
 </tr>
</table> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:06:31.140

您可以使用`addClass`方法：

```
$('tbody tr').addClass(function(){
    return $('td:last', this).text()
}) 
```

[http://jsfiddle.net/SweLe/](http://jsfiddle.net/SwELe/)

请注意，您`tr`之前缺少开始标签`<td>James</td>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:09:06.737

使用那里的 HTML：

```
$("tr:not(:first)").each(function(i) {
    $(this).addClass($(this).children("td").last().text());
}); 
```

# [jsFiddle [（又名。示例）]](http://jsfiddle.net/SpYk3/wq2Qy/)

这是做什么的：

*   [$ =](http://api.jquery.com/jQuery/#jQuery1) *jQuery*的简写符号
**   [("tr](http://api.jquery.com/category/selectors/) = jQuery 选择器的开始，在这种情况下，我们从标签开始`tr`*   [:not](http://api.jquery.com/not-selector/) = 这告诉我们的选择器**不要**选择括号中的内容*   [(:first)](http://api.jquery.com/first/) = 这是 的参数`:not`，在这种情况下告诉它我们不希望在整体元素选择中的第一个元素*   [.each(](http://api.jquery.com/jQuery.each/) = 这个 jQuery 函数在被选中的元素上就像一个 For 循环
    *   jQuery 对象基于 0 索引（意味着它从 0 开始并向上计数）*   [function(i)](http://api.jquery.com/jQuery.Callbacks/) { = 这是`callback`.each 调用函数的开始。`i`表示每个元素通过时的索引*   [$(this)](http://remysharp.com/2007/04/12/jquerys-this-demystified/) = 这个 jQuery 选择器在循环中抓取当前元素*   [addClass(](http://api.jquery.com/addClass/) = 这个 jQuery 函数允许我们向元素添加类名*   [$(this)](http://remysharp.com/2007/04/12/jquerys-this-demystified/) = 再次，指的是当前被操作的元素*   [.children("td")](http://api.jquery.com/children/) = 由于当前元素是一个 TR，那么我们知道它的子元素应该是`td`'s，因此我们使用子选择器来抓取这些子元素*   [.last()](http://api.jquery.com/last/) = 这告诉我们的选择器我们只想要对象集合中的**最后一个元素***   [.text()](http://api.jquery.com/text/) = 这告诉我们的选择器我们想要选择元素的文本*   ); }); = 简单地关闭一切！*

# html - 作为 HTMLElement 的选项

> ID：13496037
> 
> 赞同：0
> 
> 时间：2012-11-21T15:02:38.083
> 
> 标签：html, css

我希望有一个单选按钮输入，但不是单纯的圆圈，我更喜欢另一个 html 元素（包括结构）来说明选择。我认为这可能适用于`appearance`样式，但它不起作用（可能是因为`input[radio]`可能不包含其他元素。

有没有什么方法可以设置一个 input *radio*的样式，所以它会显示另一个 HTMLElement 而不是它的圆圈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:17:11.487

为什么不只留下单选按钮，而是使用标签标签使整个图像可点击？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:07:17.117

你可能想看看[Uniform](https://github.com/fidian/uniform)。它是一种对表单元素进行完全设计控制的好方法。事实上，它确实需要 JavaScript，但如果默认情况下未启用它，Uniform 会优雅地降级，提供标准表单功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:09:56.173

一些浏览器允许你覆盖设置，但你将不得不做一些超级 CSS 技巧来让它工作。

[http://acidmartin.wordpress.com/2009/07/17/using-css-to-style-radiobuttons-and-checkboxes-for-safari-and-chrome/](http://acidmartin.wordpress.com/2009/07/17/using-css-to-style-radiobuttons-and-checkboxes-for-safari-and-chrome/)

是一个很好的网站，它描述了如何做你正在谈论的事情。他们使用精灵表和特定于浏览器的外观样式来根据状态更改框的外观。

# maven - 在 Maven 发布期间跳过结帐测试：执行

> ID：13496039
> 
> 赞同：3
> 
> 时间：2012-11-21T15:03:01.133
> 
> 标签：maven

在 maven release:perform 目标期间，准备好的标签正在从 SCM 中检出，并且似乎在分叉的 maven 实例中尝试构建。

我希望此时跳过测试，因为无论出于何种原因，它们都会失败（构建涉及通过 cargo 运行测试 Web 应用程序，我相信这在这种环境下效果不佳）。

有什么方法可以指示 maven 这样做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T15:27:26.473

您可以在命令行上为分叉的 maven 实例指定参数：

```
mvn release:prepare -Darguments="-DskipTests"
mvn release:perform -Darguments="-DskipTests" 
```

或者在你的 pom 中指定一个 maven-release-plugin 配置，可能在 pluginManagement 下：

```
 <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-release-plugin</artifactId>
      <configuration>
        <arguments>-DskipTests</arguments>
      </configuration>
    </plugin> 
```

# semantic-web - 租赁、预订和 Schema.org

> ID：13496047
> 
> 赞同：1
> 
> 时间：2012-11-21T15:03:29.063
> 
> 标签：semantic-web, microdata, schema.org

有没有办法使用[Schema.org](http://Schema.org)或/和 GoodRelation 来表达预订或租赁的时间概念（如以天或周为单位）？

[如本问题所述，](https://stackoverflow.com/questions/10058170/what-itemtype-to-use-for-a-rentals-vacancies-website)它可能是产品和报价的组合，但它并没有真正表达同一产品在不同时间可用的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:44:04.673

首先，使用新版本的 schema.org (0.99) 和 itemtype **http://schema.org/Offer**。清楚地表明您有一个使用属性的租赁报价 - **businessFunction**，其值为[http://purl.org/goodrelations/v1#LeaseOut](http://purl.org/goodrelations/v1#LeaseOut)。

报价的有效性是使用属性**validFrom**和**validThrough**指定的（即可以接受您的报价的时间段）。

对于多个替代租赁期，创建多个报价实体。

使用期限和最短/最长停留时间指定使用

*   **合格**持续时间：给定报价有效的持续时间。
*   **availabilityStarts**：出租对象的可用性开始。
*   **availabilityEnds** : 出租对象的可用性结束

日的 UN/CEFACT 单位代码为 DAY，月为 MON。

计费增量等使用[http://schema.org/UnitPriceSpecification](http://schema.org/UnitPriceSpecification)建模。

如果您需要详细的图案，请通过[http://www.heppresearch.com/contact](http://www.heppresearch.com/contact)与我联系。我们为 schema.org 构建了新的电子商务模块。

# asp.net-mvc - 如何在 MVC 中测试 ModelMetadata.FromLambdaExpression？

> ID：13496050
> 
> 赞同：5
> 
> 时间：2012-11-21T15:03:35.913
> 
> 标签：asp.net-mvc, unit-testing, c#-4.0, asp.net-mvc-4, extension-methods

我在 MVC4 项目中有一个辅助类的扩展方法：

```
public static class ExtensionMethods
{

    public static object Value<TModel, TProperty>(this Expression<Func<TModel, TProperty>> expression, ViewDataDictionary<TModel> viewData)
    {
        return ModelMetadata.FromLambdaExpression(expression, viewData).Model;
    }

} 
```

这以一种非常简单的方式完成了一些非常简单的事情。

那么，如何才能最好地进行单元测试呢？最好避免模拟静态方法或使用依赖注入，但如果这些真的是这种情况下唯一可行的方法，我持开放态度。

这只是一个有缺陷的设计，可以改进以便更适合单元测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:11:29.897

这确实是一个有缺陷的设计，并且可能很常见。正确的方法签名需要切换参数顺序：

```
public static object Value<TModel, TProperty>(this ViewDataDictionary<TModel> viewData, Expression<Func<TModel, TProperty>> expression)
{
    return ModelMetadata.FromLambdaExpression(expression, viewData).Model;
} 
```

然后可以从单元测试中调用它：

```
Expression<Func<Model, string>> expression = (t => t.PropertyName);
ExtensionMethods.Value<Model, string>(viewData, expression)); 
```

# javascript - 我是否需要向 OAuth2 提供商（如 google）注册域，或者可以使用我自己的 IP 地址/本地主机来发送请求？

> ID：13496051
> 
> 赞同：1
> 
> 时间：2012-11-21T15:03:38.223
> 
> 标签：javascript, google-api, localhost, oauth-2.0

我无法将我的代码推送到我的域，并且一直在我的本地 Web 服务器 127.0.0.1 上进行测试。但是我可以避免向 OAuth2 提供商注册域，并从我的 IP 地址发送请求吗？

到目前为止，我已经完成了所有研究，但我没有看到任何迹象表明这是不可能的。我也没有看到任何明确的信息。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:06:00.343

您可以注册任何域，包括`localhost`用于本地测试。

Oauth 服务器不会自行联系该域。作为身份验证过程的一部分，它只会将用户重定向回该域，当您在本地使用`localhost`.

# android - Android - 在应用程序中嵌入 youtube iframe

> ID：13496056
> 
> 赞同：2
> 
> 时间：2012-11-21T15:04:17.020
> 
> 标签：android, html, video

我需要在我的应用程序中嵌入一个 youtube 视频，可能在我在应用程序中而不使用 youtube 应用程序时显示视频。我可以使用 webview 和 youtube 视频中的 iframe 嵌入东西来做到这一点，它在我的 2 台设备上运行良好：一个有 Android 4.1.1，另一个有 4.2。当我在装有 Android 2.3.4 的手机上尝试时，它不起作用：它显示缩略图，但当我点击它时，它仍然是一个黑色空间。也许 Android 版本 < 3.0 不支持 HTML5 标签？抱歉，我对这件事比较陌生。提前致谢。这是我的代码：

```
 wbv = (WebView) this.findViewById(R.id.webView1);
    wbv.setFocusable(true);
    wbv.setFocusableInTouchMode(true);
    wbv.getSettings().setJavaScriptEnabled(true);
    wbv.getSettings().setPluginState(PluginState.ON);
    wbv.getSettings().setRenderPriority(RenderPriority.HIGH);
    wbv.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
    wbv.getSettings().setDomStorageEnabled(true);
    wbv.getSettings().setDatabaseEnabled(true);
    wbv.getSettings().setAppCacheEnabled(true);
    wbv.setWebViewClient(new WebViewClient());
    wbv.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);

    String html ="<html><body><iframe class=\"youtube-player\" type=\"text/html\" width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/ID\" frameborder=\"0\" allowfullscreen></iframe></body></html>";
    String mime = "text/html";
    String encoding = "utf-8";        
    wbv.loadData(html, mime, encoding); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:29:58.727

至于我，它的工作方式如下：

```
final WebSettings settings = webView.getSettings();
settings.setDefaultTextEncodingName("utf-8");
settings.setJavaScriptEnabled(true);
settings.setLoadsImagesAutomatically(true);
settings.setPluginsEnabled(true);
//settings.setPluginState(PluginState.ON);
webView.loadUrl("http://www.youtube.com/embed/"+videoClip.youtubeId); 
```

使用 aos 2.3.4 设备。如果使用你的方式，我也可以工作，我的意思是 IFrame：

```
final String sUrl =  "http://youtube.com/embed/"+videoClip.youtubeId;
final String html ="<html><body><iframe class=\"youtube-player\" type=\"text/html\" width=\"560\" height=\"315\" src=\""+sUrl+"\" frameborder=\"0\" allowfullscreen></iframe></body></html>";
webView.loadData(html, "text/html", "utf-8"); 
```

但是我确认这两种方法都不适用于我的 froyo (2.2.2) aos 设备。它在几秒钟内引起了一些蓝筹，仅此而已。它保持黑屏或框架。

# touch - 在拖动触摸时将项目垂直居中检测重叠

> ID：13496058
> 
> 赞同：1
> 
> 时间：2012-11-21T15:04:27.707
> 
> 标签：touch, drag, setinterval, collision, overlap

我需要在红色矩形触摸几秒钟后将每个项目的每个列的中心定位并检测哪个项目更位于红色矩形内，以移动到中心。

[链接在这里](http://proyectos.ilogica.cl/bancoestado/brasil-movil/)

```
<div id="snap"></div><!--- center here a .item on touch and overlap after  x seconds --->
            <div class="cont-area"></div>

            <div class="overflow-items" id="comere">
                <div class="cont-items">

                        <div class="item">
                            1
                        </div>

                        <div class="item">
                            2
                        </div>

                        <div class="item">
                            3
                        </div>

                        <div class="item">
                            4
                        </div>

                        <div class="item">
                            1
                        </div>

                        <div class="item">
                            2
                        </div>

                        <div class="item">
                            3
                        </div>

                        <div class="item">
                            4
                        </div>
                </div>
            </div> 
```

# r - 如何确定与 read.fwf 一起使用的正确文件编码（或使用解决方法来删除不合格字符）

> ID：13496059
> 
> 赞同：2
> 
> 时间：2012-11-21T15:04:28.447
> 
> 标签：r, character-encoding

我在以下问题中尝试了该方法，但仍然被卡住。

[如何检测 read.csv 的正确编码？](https://stackoverflow.com/questions/4806823/how-to-detect-the-right-encoding-for-read-csv)

以下代码应该是可复制的......有什么想法吗？我宁愿不使用 scan() 或 readLines，因为我过去一直成功地将此代码用于各种状态级 ACS 数据......

我的另一个想法是在导入之前编辑文本文件。但是，我存储压缩文件并使用脚本解压缩然后访问数据。不得不在 R 环境之外编辑文件真的会搞砸这个过程。提前致谢！

```
Filename <- "g20095us.txt"
Url <- "http://www2.census.gov/acs2005_2009_5yr/summaryfile/2005-2009_ACSSF_By_State_By_Sequence_Table_Subset/UnitedStates/All_Geographies_Not_Tracts_Block_Groups/"

Widths <- c(6,2,3,2,7,1,1,1,2,2,3,5,5,6,1,5,4,5,1,3,5,5,5,3,5,1,1,5,3,5,5,5,2,3,
        3,6,3,5,5,5,5,5,1,1,6,5,5,40,200,6,1,50)
Classes <- c(rep('character',4),'integer',rep('character',47))
Names <- c('fileid','stusab','sumlev','geocomp','logrecno','us','region','division',
       'statece','state','county','cousub','place','tract','blkgrp','concit',
       rep('blank',14),'ua',rep('blank',11),'ur',rep('blank',4),'geoid','name',rep('blank',3))
GeoHeader <- read.fwf(paste0(Url,Filename),widths=Widths,
                  colClasses=Classes,col.names=Names,fill=TRUE,strip.white=TRUE) 
```

下面文件“g2009us.txt”中的四行。第二个“Canoncito”引起了问题。下载中的其他文件是 csv，但这个是固定宽度的，并且是识别感兴趣的地理所必需的（数据的组织不是很直观）。

ACCSF US251000000964 2430 090 25100US2430090 卡梅伦章，纳瓦霍民族保留和非保留信托土地，亚利桑那州--NM--UT ACSF US251000000966 2430 095 25100US2430095 卡萨梅罗湖分会，Navajo Nation Reservation and Off-Reservation Trust Land, AZ--NM--UT ACCSF US251000000967 2430 105 25100US2430105 Chi Chil Tah Chapter, Navajo Nation Reservation and Off-Reservation Trust Land, AZ--NM--UT

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T22:51:40.817

首先，我们首先识别所有非 ASCII 字符。为此，我将其转换为原始向量，然后查找超过 127 的值（ASCII 中最后一个明确编码的值）。

```
lines <- readLines("g20095us.txt")

non_ascii <- function(x) {
  any(charToRaw(x) > 127)
}

bad <- vapply(lines, non_ascii, logical(1), USE.NAMES = FALSE)
lines[bad] 
```

然后我们需要弄清楚正确的编码是什么。当我们只有两个案例时，这是具有挑战性的，并且经常涉及一些试验和错误。在这种情况下，我用谷歌搜索“encoding \xf1”，并发现 [为什么这种转换为 utf8 不起作用？](https://stackoverflow.com/questions/7163485)，这表明 latin1 可能是正确的编码。

我测试了使用`iconv`which 从一种编码转换为另一种编码（并且您总是想使用 utf-8）：

```
iconv(lines[bad], "latin1", "utf-8") 
```

最后，我们使用正确的编码重新加载。令人困惑的是，任何`read.*`函数的编码参数都不会这样做 - 您需要在连接上手动指定编码：

```
fixed <- readLines(file("g20095us.txt", encoding = "latin1"))
fixed[bad] 
```

# c++ - 带参数的 MSVC 2010 项目范围宏

> ID：13496068
> 
> 赞同：1
> 
> 时间：2012-11-21T15:05:03.330
> 
> 标签：c++, visual-c++

我正在尝试为包含的代码创建一个 Visual Studio 项目

```
DL_EXPORT(void) initlua(void); 
```

所以我基本上需要一个宏

```
#define DL_EXPORT(retVal) __declspec(dllexport) retVal 
```

哪个有效，但特定于操作系统/编译器，所以我想把它放在项目中*。但我不知道在*Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions*（或在命令行中）中放置什么来做到这一点。我认为这些中的任何一个都可以：

```
DL_EXPORT(retVal) __declspec(dllexport) retVal
DL_EXPORT(retVal)=__declspec(dllexport) retVal 
```

我倾向于后者，但似乎都不起作用 - 编译时出现以下错误：

```
error C2061: syntax error : identifier 'initlua'
error C2059: syntax error : ';'
error C2059: syntax error : 'type' 
```

使用 /P 编译以获得预处理器结果解释了原因：什么也没发生，因此编译器将其解释为`int DL_EXPORT(void)`并期望`;`.

定义的正确语法是什么？还是没有，正如[这个问题](https://stackoverflow.com/questions/2944168/visual-c-2010-solution-wide-macros-with-parameters)中的人们所假设的那样？

谢谢。

* 我没有对 MSVC 使用简单的#ifdef-check，因为我只是想用我不想破坏的现有构建脚本为现有库（疯狂的 python）创建一个 Visual Studio 项目。虽然我可以承认使用`#ifndef DL_EXPORT`- 但我仍然想知道我是否遗漏了什么，或者这在 Visual Studio 中是否不可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:59:52.007

我认为应该可以在命令行上使用[/FI](http://msdn.microsoft.com/en-us/library/8c5ztk84%28v=vs.100%29.aspx)来指定一个包含文件以自动包含在每个源文件中。在该文件中，您放置所需的`#define`语句。

# javascript - 在 Javascript Switch 语句上设置 Cookie

> ID：13496069
> 
> 赞同：1
> 
> 时间：2012-11-21T15:05:09.450
> 
> 标签：javascript, cookies, switch-statement, jquery-cookie

我有这个 javascript switch 语句：

```
function showSideMenu() {
            switch (document.forms["culinaryrequest"].culinarytype.selectedIndex) {
                case 0:
                    document.getElementById('case1').style.display="none";
                    document.getElementById('case2').style.display="none";
                    document.getElementById('case3').style.display="none";
                    document.getElementById('case4').style.display="none";
                    break;
                case 1:
                    document.getElementById('case1').style.display="table-row";
                    document.getElementById('case2').style.display="none";
                    document.getElementById('case3').style.display="none";
                    document.getElementById('case4').style.display="none";
                    break;
                case 2:
                    document.getElementById('case1').style.display="none";
                    document.getElementById('case2').style.display="table-row";
                    document.getElementById('case3').style.display="none";
                    document.getElementById('case4').style.display="none";
                    break;
                case 3:
                    document.getElementById('case1').style.display="none";
                    document.getElementById('case2').style.display="none";
                    document.getElementById('case3').style.display="table-row";
                    document.getElementById('case4').style.display="none";
                    break;
                case 4:
                    document.getElementById('case1').style.display="none";
                    document.getElementById('case2').style.display="none";
                    document.getElementById('case3').style.display="none";
                    document.getElementById('case4').style.display="table";
                    break;
                default:
                    break;
            }
        } 
```

当用户从下拉菜单中选择一个选项时，它会显示由上述 switch 语句控制的某个元素。问题出在刷新时，或者如果用户遇到错误并被带回页面，则该元素再次被隐藏。我想设置一个 cookie 以保持元素显示，但我不确定如何将 cookie 添加到 switch 语句中。我可以举个例子吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:15:31.353

可能这可能会有所帮助。前任。设置 cookie

```
function SetCookie(cookieName,cookieValue) {
 var today = new Date();
 var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
 expire.setTime(today.getTime() + 3600000*24);
 document.cookie = cookieName+"="+escape(cookieValue)
                 + ";expires="+expire.toGMTString();
} 
```

获取 cookie 值

```
function ReadCookie(cookieName) {
 var theCookie=" "+document.cookie;
 var ind=theCookie.indexOf(" "+cookieName+"=");
 if (ind==-1) ind=theCookie.indexOf(";"+cookieName+"=");
 if (ind==-1 || cookieName=="") return "";
 var ind1=theCookie.indexOf(";",ind+1);
 if (ind1==-1) ind1=theCookie.length; 
 return unescape(theCookie.substring(ind+cookieName.length+2,ind1));
} 
```

在每种情况下调用方法 setCookie 并在刷新后获取 cookie

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:34:53.377

您可以使用框架来完成这项工作。

```
<html>
    <head>
        <title></title>
        <style type="text/css">
            div.case{
                display: none;
            }
        </style>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script>
        <script type="text/javascript">
            (function($){
                $(document).ready(function(){
                    // Define cookie key
                    var cookiekey = "mycookiekey";

                    // Get cases
                    var cases = $('div.case').hide();

                    // Set handler
                    var handler = $('#culinarytype');

                    // Show case based on cookie
                    handler.val($.cookie(cookiekey));

                    // Define the select function
                    var selectFromHandler = function(){
                        selected = handler.val();

                        // First hide all cases
                        cases.hide();

                        // Show only wanted case
                        if(selected > 0){
                            $(cases.get(selected - 1)).show();
                        }

                        // Set cookie
                        $.cookie(cookiekey, selected, { expires: 7 });
                    }

                    // Based on handler change
                    handler.change(selectFromHandler);

                    // Default
                    selectFromHandler();
                });
            })(jQuery);
        </script>
    </head>
    <body>
        <select id="culinarytype">
            <option value="0"></option>
            <option value="1">Case 1</option>
            <option value="2">Case 2</option>
            <option value="3">Case 3</option>
            <option value="4">Case 4</option>
        </select>

        <div class="case">Case 1</div>
        <div class="case">Case 2</div>
        <div class="case">Case 3</div>
        <div class="case">Case 4</div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:27:27.330

```
function showSideMenu() {
    var choice = document.forms["culinaryrequest"].culinarytype.selectedIndex;
    for (var x = 1, y = 4; x < y; x++) {
      document.getElementById('case' + x).style.display = (x == choice ? (choice == 4 ? "table" : "table-row") : "none");
    }
    setCookie("MYAWESOMECOOKIE", choice);
}

function getCookie(c_name) {
  if (document.cookie.length > 0) {
    var c_start = document.cookie.indexOf(c_name + "=");
    if (c_start != -1) {
      c_start = c_start + c_name.length + 1 ;
      var c_end = document.cookie.indexOf(";", c_start);
      if (c_end == -1) {
        c_end = document.cookie.length;
      }
      return decodeURIComponent(document.cookie.substring(c_start, c_end));
    }
  }
  return null;
}

function setCookie(c_name, value, expires) {
  if (typeof(expires) === "undefined") {
    expires = 365;
  }
  var expiresDate = new Date();
  expiresDate.setTime(expiresDate.getTime() + (expires * 24 * 3600 * 1000));
  document.cookie = c_name + "=" + encodeURIComponent(value) + ((expires == null) ? "" : "; expires=" + expiresDate.toGMTString());
}

function removeCookie(c_name) {
  if (getCookie(c_name)) {
    document.cookie = c_name + "=" + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
  }
} 
```

# liferay - 如何在 Liferay Service Builder 中编写实现 Like 命令的查找器？

> ID：13496071
> 
> 赞同：0
> 
> 时间：2012-11-21T15:05:14.093
> 
> 标签：liferay

如何在服务生成器中编写一个查找器来实现 SQL 的 LIKE 命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:18:16.267

我认为您正在谈论如何使用Liferay[`LIKE`的`SQL`](http://www.w3schools.com/sql/sql_like.asp "如何在 SQL 中使用 LIKE 运算符")`DynamicQuery`.

您可以使用 as 的[`ilike`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/kernel/dao/orm/RestrictionsFactoryUtil.html#ilike%28java.lang.String,%20java.lang.Object%29 "Liferay 6.1 GA2 API：RestrictionsFactoryUtil 的 ilike 方法")方法[`RestrictionsFactoryUtil`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/kernel/dao/orm/RestrictionsFactoryUtil.html "Liferay 6.1 GA2 API：RestrictionsFactoryUtil")：

```
DynamicQuery dyQuery = DynamicQueryFactoryUtil.forClass(MyCustomClass.class);

dyQuery.add(RestrictionsFactoryUtil.ilike("propertyName", "anyValue"))
              .addOrder(OrderFactoryUtil.asc("propertyName")
           ); 
```

这种`ilike`liferay 的工作方式类似于[Hibernate Restriction 的](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-narrowing) [`ilike`](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/criterion/Restrictions.html#ilike%28java.lang.String,%20java.lang.Object%29 "Hibernate API：org.hibernate.criterion.Restrictions.ilike 方法")方法。

希望这可以帮助。如果您有其他想法，请详细说明您的问题以提供详细信息，并且您尝试过的一些场景或代码也会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:21:37.860

在您的 finderImpl 中，您可以创建一个 com.liferay.portal.kernel.dao.orm.Criterion，使用此标准您可以创建像
`Criterion criterion = RestrictionsFactoryUtil.gt("PropertyName", value);` Create DynamicQuery 这样的查询，而不是使用
`DynamicQuery query = DynamicQueryFactoryUtil.forClass(YourModel.class).add(criterion);`
和执行它
`List results = YourLocalServiceUtil.dynamicQuery(query);`

RestrictionsFactoryUtil 有很多评价，我想你会找到你想要的

高温高压

# matlab - matlab如何将值插入矩阵？

> ID：13496072
> 
> 赞同：0
> 
> 时间：2012-11-21T15:05:18.453
> 
> 标签：matlab, matrix, insert

我有一个包含 2 个值的矩阵，比如说 matrix=[1,2]; 现在我想将 3,4 插入到矩阵中，低于 1,2。最后，我想要一个具有 2 个列和 n 个值的矩阵。你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:22:17.047

[vertcat](http://www.mathworks.com/help/matlab/ref/vertcat.html)将连接具有相同列数的数组/矩阵。

或者，您可以使用类似的方法手动完成

```
a = [1, 2];
b = [3, 4];
a = [a; b]; 
```

这里，分号表示一个新行。

# response.redirect - HTTP 状态 500 - 从 adfs 重定向到 fedlet 时预期为空输入

> ID：13496078
> 
> 赞同：0
> 
> 时间：2012-11-21T15:05:49.660
> 
> 标签：response.redirect, adfs2.0, federation

当我访问我的 fedlet 时，它会将我重定向到 adfs 登录屏幕，我在其中输入我的凭据，然后从该登录页面我重定向到 fedlet 应用程序页面，其中显示“HTTP 状态 500 - Null 输入”异常。我没有得到什么肯定是错的。请任何人都可以帮助我解决问题。

我还附上了发送回帮助的解码响应：“ http://aaa.domain.com/adfs/services/trust CN=sso_te, OU=IT,O = comapnyname 1352204053 fHQDdZB2QYtpvmkjA + K + z2xDcIM8iE7esA9qpeiSvDsiPnfw5QoVKFis16wkA0XHIeZA4rLn0OWZ2gkAkx3GAVCCQe1MDpET / VGg1YcLs60YD3gu7zH2KZHERXwamxR4yHpT7Sf4Gh / Wwl98kJ644SZAwy2sC7xsqJKtQ + EpPFUZVs9Ii3pRfRscXIVysHqmMPuEdtCNQg0CkYNLNYiiU59Ki2i / CP0TJDI08uZ0r0ukqFNbatRpZ4ABTTum0 / XLVzInvVwuRJfdrM / + + cY4h7X5AG5mVDWbjZiqdACvv65vBHPW CJsW5hP9y5O54 / ICKvLOhCzXAFcMV + nGwmvLiA == pCTZd0kNSw6DrM / R / eAKNGnL2sctIjeSgxC9dE75nRsgHudTZOhWslACex4vWYnJS4HN2Vw6YGJdw / vgid4CimY / VCC1YNKokru7eVXX4pRfQ3T95S8wP7UeBapblMqVPzvdNBpnQPy9MII / ZYFcauY6m + 2AETJ0V0VmZI75dmsONT + 1CsVVpwQm5x3 + lRfchzV8mOO / Ynj3hQYQ4ubX + vYuy6hdQrJx3GG5pIv"

如果有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:17:47.593

在 Firefox 中运行 - 清除所有 cookie。

启动 SAML 跟踪器。

如果您在启用了 SAML 跟踪器的情况下在 FireFox 中运行，当您重定向到 AFDS 时，您应该会在 SAML 跟踪器中看到一条标有橙色 SAML 按钮的消息。如果单击 SAML 选项卡，则消息为：

```
<samlp:AuthnRequest ... 
```

响应将是：

```
<samlp:Response 
```

它将包含以下内容：

```
<AttributeStatement>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">
                <AttributeValue>Joe Bloggs</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">
                <AttributeValue>a@company.com</AttributeValue>
            </Attribute>
</AttributeStatement> 
```

这与您在 ADFS 中为 RP 配置的声明相匹配。

你看到这样的事情了吗？

我不知道你的消息代表什么。

# c - vim中分割线的出现

> ID：13496086
> 
> 赞同：4
> 
> 时间：2012-11-21T15:06:06.283
> 
> 标签：c, vim

我想更改当前使用`|`. 有没有 Vim 设置，或者可以在源代码中修改吗？请给我一些提示。

![在此处输入图像描述](../Images/0271ef4a3b2d94bc4acf21b9959ff656.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T15:09:18.587

该设置由设置管理`fillchars`。要将其修改为使用与 不同的字符`|`，请使用

```
" Set the vertical split character to +
:set fillchars+=vert:\+

" Set the vertical split character to  a space (there is a single space after '\ ')
:set fillchars+=vert:\ 
```

垂直填充字符的单个空白字符将使其成为您所看到的全部颜色方案的垂直分割颜色。

### 使用单个空白字符作为上面的第二个示例的示例。颜色方案背景颜色显示出来。

![这使用 fillchars+=vert:\](../Images/2c3b7f339c9c3bde40041af552454cf9.png)

分割线的宽度取决于当前的字体大小。它是当前定宽字体的一个字符宽度。

阅读关于`fillchars`with的文档

```
:help fillchars 
```

# python - Python：如何生成 12 位随机数？

> ID：13496087
> 
> 赞同：18
> 
> 时间：2012-11-21T15:06:05.073
> 
> 标签：python

在 Python 中，如何生成一个 12 位的随机数？有没有可以指定范围的函数`random.range(12)`？

```
import random
random.randint() 
```

输出应该是一个字符串，包含 0-9 范围内的 12 位数字（允许前导零）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-21T15:14:30.697

直截了当的方法有什么问题？

```
>>> import random
>>> random.randint(100000000000,999999999999)
544234865004L 
```

如果你想要它带有前导零，你需要一个字符串。

```
>>> "%0.12d" % random.randint(0,999999999999)
'023432326286' 
```

**编辑：**

我自己对这个问题的解决方案是这样的：

```
import random

def rand_x_digit_num(x, leading_zeroes=True):
    """Return an X digit number, leading_zeroes returns a string, otherwise int"""
    if not leading_zeroes:
        # wrap with str() for uniform results
        return random.randint(10**(x-1), 10**x-1)  
    else:
        if x > 6000:
            return ''.join([str(random.randint(0, 9)) for i in xrange(x)])
        else:
            return '{0:0{x}d}'.format(random.randint(0, 10**x-1), x=x) 
```

测试结果：

```
>>> rand_x_digit_num(5)
'97225'
>>> rand_x_digit_num(5, False)
15470
>>> rand_x_digit_num(10)
'8273890244'
>>> rand_x_digit_num(10)
'0019234207'
>>> rand_x_digit_num(10, False)
9140630927L 
```

速度计时方法：

```
def timer(x):
        s1 = datetime.now()
        a = ''.join([str(random.randint(0, 9)) for i in xrange(x)])
        e1 = datetime.now()
        s2 = datetime.now()
        b = str("%0." + str(x) + "d") % random.randint(0, 10**x-1)
        e2 = datetime.now()
        print "a took %s, b took %s" % (e1-s1, e2-s2) 
```

速度测试结果：

```
>>> timer(1000)
a took 0:00:00.002000, b took 0:00:00
>>> timer(10000)
a took 0:00:00.021000, b took 0:00:00.064000
>>> timer(100000)
a took 0:00:00.409000, b took 0:00:04.643000
>>> timer(6000)
a took 0:00:00.013000, b took 0:00:00.012000
>>> timer(2000)
a took 0:00:00.004000, b took 0:00:00.001000 
```

它告诉我们什么：

对于长度低于 6000 个字符的任何数字，我的方法更快 - 有时更快，但对于更大的数字，[arshajii](https://stackoverflow.com/users/1357341/a-r-s)建议的方法看起来更好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T15:08:01.823

做`random.randrange(10**11, 10**12)`。它就像`randint`遇见一样工作`range`

从文档中：

```
randrange(self, start, stop=None, step=1, int=<type 'int'>, default=None, maxwidth=9007199254740992L) method of random.Random instance
    Choose a random item from range(start, stop[, step]).

    This fixes the problem with randint() which includes the
    endpoint; in Python this is usually not what you want.
    Do not supply the 'int', 'default', and 'maxwidth' arguments. 
```

这实际上就像做`random.choice(range(10**11, 10**12))`or `random.randint(10**1, 10**12-1)`。由于它符合与 相同的语法`range()`，因此它比这两个替代方案更直观、更简洁

如果允许前导零：

```
"%012d" %random.randrange(10**12) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T15:14:30.373

由于允许前导零（根据您的评论），您还可以使用：

```
int(''.join(str(random.randint(0,9)) for _ in xrange(12))) 
```

* * *

***编辑***：当然，如果你想要一个*字符串*，你可以省略`int`部分：

```
''.join(str(random.randint(0,9)) for _ in xrange(12)) 
```

在我看来，这似乎是最直接的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T15:13:28.327

有很多方法可以做到这一点：

```
import random

rnumber1 = random.randint(10**11, 10**12-1) # randint includes endpoint
rnumber2 = random.randrange(10**11, 10**12) # randrange does not

# useful if you want to generate some random string from your choice of characters
digits = "123456789"
digits_with_zero = digits + "0"

rnumber3 = random.choice(digits) + ''.join(random.choice(digits_with_zero) for _ in range(11)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T15:19:34.963

这可能不是您正在寻找的，但是像[rstr](https://bitbucket.org/leapfrogdevelopment/rstr/)这样的库可以让您生成随机字符串。有了这个，你所需要的就是（允许前导 0）：

```
import rstr
foo = rstr.digits(12) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T15:10:03.330

```
from random import randint

def random_with_N_digits(n):
    range_start = 10**(n-1)
    range_end = (10**n)-1
    return randint(range_start, range_end)

print random_with_N_digits(12) 
```

# javascript - 父对象引用

> ID：13496088
> 
> 赞同：2
> 
> 时间：2012-11-21T15:06:09.443
> 
> 标签：javascript, object

我想我可能会遗漏一些东西来引用对象，在下面的情况下，是`this`指测试对象吗？如果不是我怎么能这样声明`b`呢`test.a = test.b`？

```
test = {
 a: 1,
 b: this.a,
 check : function(){
  console.log(test.a); // returns 1
  console.log(test.b); // returns undefined
 }
};
test.check(); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:14:10.883

你可以这样声明：

```
function test(){
   this.a = 1;
   this.b = this.a;

    this.check = function(){
       console.log(this.a);  // output 1
       console.log(this.b); // output 1
    }        
}

var t = new test();
t.check(); 
```

现场示例：http: [//jsfiddle.net/Rqs86/](http://jsfiddle.net/Rqs86/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:09:22.720

`test.b`指`this.a`声明对象时的任何内容。

```
var foo = this; 
```

你不会指望这里`this`提到`foo`，对吧？它在这里的工作原理完全相同：

```
var bar = [ this ]; 
```

和

```
var baz = { 'blag' : this }; 
```

# mapreduce - 选择 CouchDB 中值为最大值的记录

> ID：13496089
> 
> 赞同：3
> 
> 时间：2012-11-21T15:06:08.630
> 
> 标签：mapreduce, couchdb

我有一个包含 156 个 json 文档的 couchdb 数据库。我想在文档中找到某个值的最大值，然后发出包含该最大值的整个文档。我使用了这段代码，但它似乎不起作用。这可以帮助你理解我的意思。

```
function(doc) {
    var i,m;
    for (i = 0; i < doc.watchers.length; i++)
        m = Math.max(m,doc.watchers[i]);
        for (i = 0; i < doc.watchers.length; i++)
            if (m = doc.watchers[i])
                emit(doc.watchers[i], doc.watchers);
} 
```

我还想选择具有最大值的 2 个顶级文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:18:32.097

仅仅使用 map 函数是行不通的，因为 map/reduce 的工作方式不能同时为 map 函数提供完整的键和值集。我会为此使用reduce函数。像这样的东西：

**地图功能**

```
function(doc) {
  var i,m;
  for (i = 0; i < doc.watchers.length; i++) {
    emit([doc._id, doc.watchers[i]], doc.watchers);
  }
} 
```

*减少功能*

```
function(keys, values) {
  var top=0;
  var index=0;
  for (i=0;i<keys.length;i++) {
    if (keys[i][1] > top) {
      top = keys[i][1];
      index = i;
    }
  }
  return({keys[index], values[index]})
} 
```

要使此策略起作用，您需要使用 group_level=1 进行查询，以便 couch 将按文档 id 分组的结果传递给 map 函数。我还没有测试过这个解决方案，它还没有解决你的第二个问题。如果你认为它走对了，我可以改进它。

# c# - 为什么 EwfPage 中有一些页面/应用程序方法，而 EwfUiStatics 中有一些页面/应用程序方法？

> ID：13496092
> 
> 赞同：1
> 
> 时间：2012-11-21T15:06:17.553
> 
> 标签：c#, enterprise-web-library

我已经使用 EWL 一段时间了，我觉得好像有不一致的地方。某些操作，例如添加状态消息是通过`EwfPage`实例完成的，而其他操作（例如添加页面级操作）是通过`EwfUiStatics`.

为什么不是所有这些类似的方法都在一个地方或另一个地方？我的一个猜测是，可能存在的方法`EwfPage`需要实例（而其他方法是静态的）。但是这个原因会被属性存在的事实所驳斥`EwfPage.Instance`，总是为您提供这些方法的静态句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:06:31.407

`EwfPage`成员可以在所有页面上使用，而`EwfUiStatics`成员只能在企业 Web 框架用户界面 (EWF UI) 页面上使用。

# c++ - 调试：跟踪（和区分）同一程序的两个版本的函数调用树

> ID：13496094
> 
> 赞同：2
> 
> 时间：2012-11-21T15:06:21.977
> 
> 标签：c++, debugging, gdb, trace, callgrind

我正在重写 C++ 命令行程序中的一些代码。

我更改了它使用的低级数据结构，新版本毫无问题地通过了所有测试（很多），并且我从新版本和旧版本中都得到了正确的输出......不过，当给出某些输入时，他们给出不同的行为。

切入正题：作为一个大项目，我不知道如何追踪执行流程何时出现分歧，所以......有没有办法追踪函数调用树（可能不包括std调用）以及，我不知道，源文件中的行号和源名称？也许一些 gcc 或宏功夫？

我需要一个 Linux 解决方案，因为这是程序运行的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:43:20.453

> 尽管如此，当给出某些输入时，它们会给出不同的行为

为了更好地了解您的算法在`certain input`. 当它变得更清楚时，如果您仍然需要它，您可以例如使用 gdb。

**更新**

好，至于我的日志记录是好的，但你不想添加它。

另一种方法是追踪。实际上我只在 Solaris 上使用过它，但我发现它也存在于 Linux 上。我没有在 Linux 上使用它，所以这只是一个你可以测试的想法。

您可以使用[SystemTap](http://sourceware.org/systemtap//SystemTap_Beginners_Guide.pdf)

> **用户空间探测**
> SystemTap 最初专注于内核空间探测。但是，在许多情况下，用户空间探测可以帮助诊断问题。SystemTap 0.6 添加了支持以允许探测用户空间进程。SystemTap 支持探测用户空间进程中函数的进入和返回，探测用户空间代码中的预定义标记，以及监视用户进程事件。

我可以保证它会起作用，但为什么不试一试呢？

文档中甚至还有一个示例：

> 如果您想查看函数 xmalloc 函数是如何被命令 ls 调用的，您可以使用用户空间回溯函数来提供该信息。

```
stap -d /bin/ls --ldd \
-e 'probe process("ls").function("xmalloc") {print_ustack(ubacktrace())}' \
-c "ls /" 
```

# android - 任何简单的方法来要求 EditTextPreference 值在 Android 中不能为空？

> ID：13496099
> 
> 赞同：5
> 
> 时间：2012-11-21T15:06:37.343
> 
> 标签：android, android-2.3-gingerbread, edittextpreference

我有一个数字，`EditTextPreference`其中必须是数字 0-9。我可以阻止其他字符但不能退格。Backspace + Okay = 一个空值。空值意味着当它被检索并解析为一个数字时，它将崩溃。

目前，我检查首选项何时更改，是否具有某些键且没有长度，如果是，则使用“0”重新保存。有没有更简单的内置方法来做到这一点？“需要值”属性，或者至少是更自动的东西，比如能够获得`digits`更改后的偏好？（如果数字是“0123456789”，那么它不能为空）。

到目前为止，在我的**设置活动**中：

```
public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    //Prevent EditText from being non number
    String type = this.findPreference(key).getClass().getSimpleName();
    if( type.equals("EditTextPreference")
        //Put key of any allowed to be blank here...
                && prefs.getString(key, "0").length()==0 ){ 
            this.findPreference(key).setSummary("0");

        SharedPreferences.Editor prefedit = prefs.edit();
        prefedit.putString(key, "0");
        prefedit.commit();
    }
    updateSummaries();
} 
```

（设置摘要不起作用--^。能够检查`android:digits="0123456789"`属性就可以了，所以我不需要放置任何应该为空白的键。）

或者在**主要活动**中，我可以将所有数字首选项放入字符串中，检查字符串，如果不好则将其设置为 0，然后解析每个字符串。随着我使用它们中的更多，这感觉不那么吸引人，而不是自动的。

```
String sTT = prefs.getString("mykey", "0");
>> x10
if(sTT.length()==0){ sTT="0"; }
>> x10
tt = Long.parseLong( sTT );
>> x10, different types 
```

（这可能仍然是最好的方法......？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:11:05.227

您可以将 a`TextWatcher`应用于`EditTextPreference`的底层`EditText`。这允许您拦截对文本的任何更改，并以您想要的任何方式对其进行修改，例如强制它包含默认数字 ( `0`)。

虽然，我认为在解析数据时处理空输入总体上更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:11:11.170

你总是可以制作一个简单的首选项类，它需要一个 EditText`android:inputType = "number"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T01:08:32.427

真的很老，但以防万一有人对此有问题，这是我通常在这种情况下所做的，

让你的应用程序类实现 OnSharedPreferenceChangeListener，它看起来像这样：

```
public class MyAppApplication extends Application implements
        OnSharedPreferenceChangeListener 
```

把这个放在oncreate中，这样你就可以随时主动关注Menu更新；

```
preference = PreferenceManager.getDefaultSharedPreferences(this);
        preference.registerOnSharedPreferenceChangeListener(this); 
```

你可以在你的应用程序类的任何合适的部分做到这一点，

```
if (preference.getString("prefkey", "").compareTo("") == 0) {
            SharedPreferences.Editor temp = preference.edit();
            temp.putString("prefkey", defaultServerAddress);
            temp.apply();
        } 
```

我在我的`OnCreate`tho 中这样做，所以每当应用程序启动时，有问题的首选项总是被还原。

您还可以进行智能移动`public void onSharedPreferenceChanged`，以跟踪首选项变为空白的可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-15T10:45:48.727

一个非常简单的方法是像这样简单地覆盖 EditTextPreference。

```
public class SafeEditTextPreference extends EditTextPreference {

    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
    public SafeEditTextPreference(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    public SafeEditTextPreference(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public SafeEditTextPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SafeEditTextPreference(Context context) {
        super(context);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        boolean valid = this.getEditText().getText().toString().length() > 0;
        super.onDialogClosed(valid);
    }

} 
```

然后使用它而不是 EditTextPreference。如果文本字符串至少为 1 长，它只会保存到首选项，但是您可以将该有效性检查更改为您需要的任何内容。

您可以添加一个 TextWatcher 来为用户提供更动态的响应。

# javascript - 在 raphael 中为多个 SVG 提供 ID

> ID：13496100
> 
> 赞同：2
> 
> 时间：2012-11-21T15:06:41.297
> 
> 标签：javascript, svg, raphael

我有多个要添加 ID 的 SVG。问题是它们是由 Raphael 对象自动创建的。有没有一种简单的方法可以将 ID 添加到 Raphael 论文中？（注意有多篇论文）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:21:43.260

Raphael 中的所有对象都返回一个 shape 元素，您可以使用该[`node`](http://raphaeljs.com/reference.html#Element.node)属性来访问原始元素。从那里给元素一个ID相当简单。

例如，要创建一个带有 ID 的矩形：

```
paper.rect(0, 0, 300, 300, 0).attr({fill: "orange", stroke: "none"}).node.setAttribute('id', 'myElement'); 
```

还有一个可以看到它的工作小提琴：http: [//jsfiddle.net/CwmZr/1/](http://jsfiddle.net/CwmZr/1/)

请注意，Raphael 可能并不总是使用 SVG。在旧版本的 IE 中，它将使用 VML，因此`node`可能会引用 VML 元素，而不是 SVG 元素。

**编辑**：

如果要设置纸张对象（`<svg />`元素）的 ID，可以执行以下操作：

```
var paper = //get the paper object
paper.canvas.setAttribute('id', 'mySvgElement'); 
```

# javascript - IE Javascript 不工作但没有错误？

> ID：13496116
> 
> 赞同：5
> 
> 时间：2012-11-21T15:07:21.303
> 
> 标签：javascript, jquery, internet-explorer, background

我正在尝试创建一个自动拉伸背景以填充窗口的函数。该代码在除 IE 8 之外的所有浏览器中都可以正常工作，没有任何反应。根本不值一提！

这是我正在开发的网站：http: [//goo.gl/BlqDS](http://goo.gl/BlqDS)

这是 javascript 文件（主要是 jQuery）：http: [//goo.gl/ITuUa](http://goo.gl/ITuUa)

相关代码在顶部，在第一个`jQuery(document).ready()`.

我在 IETester 中进行测试，它经常崩溃并且行为怪异，所以我不是 100% 确定它不起作用，但我很确定它不是。我正在使用带有 IETester 的调试工具栏，但我从控制台中什么也得不到。我至少应该得到“找不到背景”。

有什么建议么？已经看了好几个小时了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:33:22.757

发生的情况是 img`src`设置不正确（您可能会注意到 IE8- 左上角的图像损坏）。我通过查看 IE 的开发人员工具也发现了这一点。它`src`是空的，它试图设置一个属性，该属性是图像 url 名称的一部分。我不是 100% 确定为什么，但你可以试一试：

```
- jQuery('body').append('<img id="body-background-img" src="'+ burl +'" />')
+ jQuery('body')
+    .append(jQuery("<img>", {'id': 'body-background-img', 'src': burl})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:08:38.110

正如@explosion-pills 所指出的，IE 在 CSS 中的 URL 周围添加了引号，因此您可以使用正则表达式来获取实际的 URL：

```
var burl = jQuery('body.custom-background').css('background-image');
burl = burl.match(/^url\((['"]*)(.*)(\1\))$/)[2]; 
```

这里`\1`正则表达式中的 是指第一个捕获的子模式，即引号（无论是单引号、双引号还是不存在）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T15:11:42.170

也许你想尝试而不是

```
jQuery(document).ready(function() {...}); 
```

尝试使用

```
$(function () {...}); 
```

# java - 需要双击 EditText 以使单击侦听器响应

> ID：13496117
> 
> 赞同：16
> 
> 时间：2012-11-21T15:07:21.343
> 
> 标签：java, android, android-edittext, onclicklistener, settext

我有一段代码，我想在用户选择 EditText 框时更改 textView 中显示的文本。

我遇到的问题是 textView 仅在我双击 EditText 框时才会更改，单击一次并且 textView 没有更改。

我应该使用另一个点击监听器吗？

```
final EditText box0105 = (EditText)findViewById(R.id.box0105);
final TextView txtHint = (TextView)findViewById(R.id.txtHint);
        box0105.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            txtHint.setText(onOneClick);                
        }
    }); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-21T15:10:36.140

添加`android:focusableInTouchMode="false"`EditText xml 然后 EditText 将接受单击

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T15:10:47.880

尝试设置`OnTouchListener`而不是`OnClickListener`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-02T08:33:06.810

使用它，它会首先触发。

```
editText.setOnTouchListener(new OnTouchListener() { 
        @Override 
        public boolean onTouch(View v, MotionEvent event) {
            if(MotionEvent.ACTION_UP == event.getAction())
                // Do whatever you want to do man, but don't trouble your mother
            return false; 
        } 

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-25T02:33:04.597

设置你`edittext`的 `xml`

```
<EditText
  android:focusable="false"
  ...
/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-16T10:11:04.220

我设置了 2 个监听器，一个是 OnClick，另一个是 OnFocusChange。像这样：

```
editText.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        System.out.println("Edittext has been clicked");
    }
});

editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        System.out.println("Edittext has been clicked");
    }
}); 
```

第一次单击 Edittext 时调用 OnFocus，然后在所有其他时间调用 OnClick。

# windows-phone-7 - 从 wp7 启动另一个应用程序

> ID：13496119
> 
> 赞同：1
> 
> 时间：2012-11-21T15:07:23.230
> 
> 标签：windows-phone-7

我想在我的应用程序中为一系列应用程序放置一组启动器。单击图标时，有没有办法从 Windows Phone 7 启动另一个应用程序？

如果这是不可能的，有没有办法将另一个应用程序的启动器嵌入到我的程序中以达到相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:24:01.227

**不**，没有办法在 WP7 中启动另一个应用程序。
您只能使用预定义的**选择器或启动器**，但不能启动 3rd 方应用程序：http:
[//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769550 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769550(v=vs.105).aspx)

但是，在 Windows Phone 8 中，您可以使用所谓的**协议处理程序**，例如，如果您想使用选定的用户启动 Skype，您可以使用以下内容：

```
await Windows.System.Launcher.LaunchFileAsync("skype:myskypeid"); 
```

此功能目前尚未广泛使用，因此我们应该会在不久的将来看到更多这些启动器的使用。这些 Uri shemes 已经在工作，您可以使用它们： http:
[//msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937(v=vs.105).aspx)

指导如何**在 WP8 中使用 Uri 协议处理程序和文件关联**：http :
[//blogs.microsoft.co.il/blogs/alex_golesh/archive/2012/11/02/what-s-new-in-windows-phone- 8-4-out-of-8-protocol-handler-and-file-extensions.aspx](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2012/11/02/what-s-new-in-windows-phone-8-4-out-of-8-protocol-handler-and-file-extensions.aspx)

# ruby-on-rails - Omniauth 和 Web2py

> ID：13496124
> 
> 赞同：2
> 
> 时间：2012-11-21T15:07:34.937
> 
> 标签：ruby-on-rails, omniauth, web2py

我有一个使用 web2py 构建的复杂应用程序，但我很想使用omniauth 的功能来连接Gmail、Google Apps、twitter 等。有没有人知道使用 Omniauth on Rails 处理身份验证然后处理到 web2py 的会话的方法?

# vim - 任何人都可以通过更改编译 gVIM 源代码吗

> ID：13496126
> 
> 赞同：1
> 
> 时间：2012-11-21T15:07:45.327
> 
> 标签：vim

我在 Windows 上，我无法编译 Vim 源代码。

没有这个丑陋的（3d）边框，任何人都可以重新编译它吗？

![在此处输入图像描述](../Images/e43375ad6d0f79a53f3859078345c2e1.png)

它位于文件`src/gui_w32.c`. 在行`1476`，将`WS_EX_CLIENTEDGE`标志更改为`0`：

```
s_textArea = CreateWindowEx(
    WS_EX_CLIENTEDGE,
    szTextAreaClass, "Vim text area",
    WS_CHILD | WS_VISIBLE, 0, 0,
    100,                /* Any value will do for now */
    100,                /* Any value will do for now */
    s_hwnd, NULL,
    s_hinst, NULL); 
```

我认为这会解决。

**[编辑]**

Mutch更好，啊

![在此处输入图像描述](../Images/b4c9444ae2be6074fbd0e30c6bb2afd9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:25:35.743

通过让 Internet 上的陌生人为您编译一个二进制文件，您将

*   为恶意代码敞开心扉；你永远不会知道可能对源代码进行了哪些其他修改
*   在 Vim 开发取得进展的同时，长时间坚持使用该特殊构建。

因此，最好询问您在开发环境、编译器等方面遇到的特定问题。

此外，如果您认为 UI 总体上应该改进，请将您的补丁提交到[vim_dev 邮件列表](http://www.vim.org/community.php)。（在我的 GVIM 中，边框在那里，但不像你的截图那样明显，我非常喜欢这种方式。）

# html - 在页面底部做页脚

> ID：13496134
> 
> 赞同：0
> 
> 时间：2012-11-21T15:08:07.473
> 
> 标签：html, css, ruby-on-rails

我有这样的代码（全部） [http://jsfiddle.net/NSzdm/](http://jsfiddle.net/NSzdm/)

但主要问题是我尝试在页面底部像往常一样做页脚，但我得到这样的东西： ![https://dl.dropbox.com/u/59666091/screen001.jpg](../Images/6586bd04d31a39f81446459a34ad4c37.png)

很简单，仍然有带中心的包装器，但我也有页脚，它必须在包装器之后......请参阅 jsfiddle，所有代码都在那里......

页脚CSS：

```
.footer {
  margin: 50px 0 0 0;
  background-color: #3a3a3a;
  background-image: linear-gradient(bottom, #3b3b3b 0%, #424242 100%);
  background-image: -o-linear-gradient(bottom, #3b3b3b 0%, #424242 100%);
  background-image: -moz-linear-gradient(bottom, #3b3b3b 0%, #424242 100%);
  background-image: -webkit-linear-gradient(bottom, #3b3b3b 0%, #424242 100%);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff3b3b3b', endColorstr='#ff424242',GradientType=0);
  /* IE6-9 */
  width: 100%;
  height: 144px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:23:51.850

I think you just need to change position:absolute to position:relative in your CSS for .wrapper .center {position:relative}.

That seemed to move your footer down, not sure if it affects the other parts of your page, hard to tell with no images.

# java - 使用循环中声明的文件 IO

> ID：13496135
> 
> 赞同：3
> 
> 时间：2012-11-21T15:08:11.200
> 
> 标签：java, file, loops, io, java.util.scanner

编辑：

工作代码：

```
 Scanner input = new Scanner(System.in);
    String inputFile = "Computer_Store_DSV.txt";
    String userInputFile;

    File sourceFile;
    do {
        System.out.println("Please enter the path of the file, enter to use the default path");
        userInputFile = input.nextLine();
        if (!"".equals(userInputFile)) {
           inputFile = userInputFile;   
        }
        sourceFile = new File(inputFile);

        System.out.println("Path is = " + inputFile);

        if (!sourceFile.canRead()) {
            System.out.println("Unable to read the file");
        }
    } while (!sourceFile.canRead());
    Scanner record = new Scanner(sourceFile); 
```

感谢呼吸的帮助。

我有以下代码：

```
Scanner input = new Scanner(System.in);
boolean fileLoop = false;
String inputFile = "Computer_Store_DSV.txt";
String userInputFile;

    do {
        System.out.println("Please enter the path of the file, enter to use the default path");
        userInputFile = input.nextLine();
        if (!"".equals(userInputFile)) {
            inputFile = userInputFile;
        }
        File sourceFile = new File(inputFile);
        System.out.println("Path is = " + inputFile);

        if (!sourceFile.canRead()) {
            System.out.println("Unable to read the file");
            fileLoop = true;
        }
    while (fileLoop);
    Scanner record = new Scanner(sourceFile); 
```

如您所见，我正在尝试在启动邮件程序之前“验证”文件是否存在。

有没有办法在不使用 File 类两次“验证和实际程序”的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:18:16.737

请看一下这个解决方案。我相信它可以实现您想要实现的目标。我已经重组了代码并使用了 2 种额外的方法。最后我关闭了输入，因为你可以创建一个内存泄漏，以防它保持打开状态。

我已经测试了任何文件位置的代码，它可以毫无问题地检索它。您可以从项目内或计算机的任何位置检索文件。您唯一需要提供的是路径（不包括文件名），因为只要您始终使用同一个文件，您就可以利用 String 的 concat() 方法。

假设该文件位于目录 /foo/fooBar/Examples/Computer_Store_DSV.txt 中。如果您想访问该文件，您应该编写 foo/fooBar/Examples/ （**注意最后一个斜杠：** ****你必须提供它****）。另一个例子：如果文件位于项目的根文件夹中，按回车键会找到正确的方法。如果它在您的项目中名为 resources 的文件夹中，那么您只需编写 resources/ ，它就会找到该文件。

如果找到该文件，它会通知您该文件已找到，它使 fileLoop 为 false 并创建一个 Scanner 命名记录。

您将看到这些方法被声明为静态的。它们是这样的，因为我在 main 内部使用它们并且它们必须是静态的。如果您的代码不在主类中，则可以从方法中删除静态。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class TestScanner {
    public static void main(String args[]) throws FileNotFoundException {
        Scanner input = new Scanner(System.in);
        boolean fileLoop = true;
        String inputFile = "Computer_Store_DSV.txt";
        String userInputFile;
        File sourceFile = null;
        Scanner record = null;
        do {
            System.out.println("Please enter the path of the file, or press enter to use the default path");
            userInputFile = input.nextLine();

            if (!userInputFile.isEmpty() && new File(userInputFile.concat(inputFile)).exists() ) {
                inputFile=userInputFile.concat(inputFile);
                printState(inputFile,"File found.!");
                sourceFile = new File(inputFile).getAbsoluteFile();
                fileLoop=readFile(sourceFile);
                record = new Scanner(sourceFile);
            }
            else if (new File(inputFile).getAbsoluteFile().exists()){
                sourceFile = new File(inputFile).getAbsoluteFile();
                printState(inputFile,"File found.!");
                fileLoop=readFile(sourceFile);
                record = new Scanner(sourceFile);
            }
            else{
                fileLoop=true;
                printState(inputFile,"File does not exist.!");
            }
        } while (fileLoop);
        input.close();

    }

    public static boolean readFile(File sourceFile){
        if (!sourceFile.canRead()) {
            System.out.println("Unable to read the file");
            return true;
        }
        else
            return false;
    }

    public static void printState(String inputFile,String state){
        System.out.println(state);
        System.out.println("Path used:  " + new File(inputFile).getAbsolutePath()+"\n");
    }
} 
```

您还可以通过传递以下内容来避免创建 sourceFile

```
new File(inputFile).getAbsoluteFile() 
```

像这样直接到扫描仪

```
record = new Scanner(new File(inputFile).getAbsoluteFile()). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:18:24.683

如果要验证文件是否存在，可以使用[Files.exist(Path,LinkOption...)](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#exists%28java.nio.file.Path,%20java.nio.file.LinkOption...%29)方法。这样您根本不需要创建[文件](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)。

```
final boolean fileExists = Files.exists (Paths.get ("fileName")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:32:54.810

虽然您的用例看起来相对简单，但我建议您探索 Apache Commons Lang(http://commons.apache.org/lang/api-3.1/index.html) 和 Commons IO (http://commons.apache.org /io/api-release/index.html) 库。这些实用程序类将来会变得更加方便。

一些笔记基于`if (!"".equals(userInputFile))`

什么是字符串 userInputFile 是“”还是 null？为此，我通常使用 Commons Lang(3) 中的 Validate。Validate.notBlank(userInputFile) 来帮助解决这种情况。

至于验证文件是否存在并且可以读取，您可以使用 File.exists() 如上所述。您也可以将其移至 if 语句中：

```
if(sourceFile.exists() && sourceFile.canRead() {
    // do some work with the file
} 
```

# jquery - 使用 iecors 插件的 Ajax Post

> ID：13496138
> 
> 赞同：3
> 
> 时间：2012-11-21T15:08:30.560
> 
> 标签：jquery, ajax, internet-explorer-8, xdr

为了解决 ie8 + 9 中的跨域问题，我开始编写自己的`XDomainRequest`包装器。直到高兴，我`iecors`在 github [https://github.com/dkastner/jquery.ieco](https://github.com/dkastner/jquery.iecors) ​​rs 上发现了 jQuery 插件。它通过修改 jQuery 的 AJAX 事务来工作。我不必修改过多的`getJSON` `AJAX`电话，这令人欣慰地松了一口气。

但是，当我使用该`$.post`方法时，响应数据作为字符串返回。这会导致问题，因为在整个应用程序中，函数都设置为处理 json 对象。

我已经做了很多关于这个的阅读，我知道有很多常见的陷阱。但除了帖子回复之外，一切似乎都有效。我可以预处理后响应数据以使其成为对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:14:44.830

jQuery 通常会根据响应标头更改返回的数据类型。返回（希望是有效的）JSON 字符串的脚本应该首先发出`Content-Type: application/json`标头。当然，如果返回的*所有内容*都是 JSON，您可以随时使用

```
$.ajaxSetup({'dataType': 'json'}) 
```

# php - CakePHP shell 使用现有的 MVC 从视图输出创建 pdf

> ID：13496139
> 
> 赞同：0
> 
> 时间：2012-11-21T15:08:33.673
> 
> 标签：php, cakephp, cakephp-1.3

使用 CakePHP 1.3 我有一个带有方法 single_invoice($customer_id) 的现有 InvoicesController，并且通过正常使用一切都很好。但是，我想通过 cake shell 做同样的事情并将其构建为 cronjob。

我创建了 shell，它确实作为 cronjob 运行，所以这不是问题。问题是我无法从 cronjob 获取视图。基本上，这是我到目前为止所拥有的：

```
class InvoiceCreationShell extends Shell {

    var $uses = array('Institution');

    function main()
    {
        $institutions = $this->Institution->find('all');

        foreach ($institutions as $institution)
        {
            App::import('Core', 'Controller');
            App::import('Controller', 'Invoices');

            $Invoices = new InvoicesController;
            $Invoices->constructClasses();

            $invoice = $Invoices->single_invoice();

            $pdf = create_pdf($invoice);

            file_put_contents($pdf);
        }
    }
} 
```

我想要的是通过 $invoice 参数返回呈现的视图内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:50:21.387

您不能这样做，因为 Shell 用于 CLI 应用程序，其中 PHP 环境与通过 Web 服务器（如 Apache 或 Nginx）调用的环境不同。

但是，您仍然可以使用现有的 Web 应用程序功能，并且您有两种选择：

1.  初始化一个控制器对象

    **以下代码示例适用于 CakePHP >= 2.x**

    对不起，但最初我没有看到问题是关于 1.3。在这种情况下，第 2 点有一个很好的建议。还有一种方法可以在 CakePHP1.3 中初始化一个 Controller 对象——[例如](https://stackoverflow.com/questions/6411954/cakephp-using-email-component-from-shell-cronjob)。

    在这种情况下，它实际上取决于您的发票生成是如何实现的。请记住，视图部分是“不可能的”。因此，如果您渲染到一个变量，然后从该变量创建 pdf（例如），您仍然可以得到它。诀窍是如何在 Shell 中初始化控制器对象：

    首先包括所需的类：

    App::import('控制器','控制器'); App::import('Controller', 'initializedController');

    在 Shell/Task 中有一个变量：

    私人 $initializedController;

    然后：

    $this->initializedController = new initializedController(new CakeRequest('/'), new CakeResponse()); $this->initializedController->constructClasses(); $this->initializedController->startupProcess();

现在您可以调用 Controller 中的所有方法。

2.向现有WebApp发出HTTP请求

这可以通过 CakePHP 自己的[HttpSocket 类](http://book.cakephp.org/1.3/en/view/1517/HttpSocket)或诸如 Guzzle 之类的请求库来[实现](http://guzzlephp.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:22:20.830

在与许多人交谈后，我得出的结论是，使用 shell 的视图是不可能的，在这里和 IRC 都发帖。所以这是我解决问题的方法：

我没有尝试从 shell 中获取视图输出，而是简单地从控制器中渲染视图。这是控制器解决此问题的示例：

```
class InvoicesController extends AppController {

    function single_invoice($institution_id)
    {
        /* Do stuff */

        return $this->render('single_invoice', 'invoice_layout');
    }
} 
```

这允许 shell 在 $invoice 参数中捕获渲染视图的内容，然后将其传递给 pdf 生成器。

我还在 $is_shell 的 single_invoice 操作中添加了一个参数，未显示。然后我将 return $this->render... 包围在 "if ($is_shell) {" 中，以检查仅在 shell 使用时才渲染。

# .net - Image CLI 类的正确包括

> ID：13496140
> 
> 赞同：0
> 
> 时间：2012-11-21T15:08:35.240
> 
> 标签：.net, c++-cli, wic

我找不到我使用 CLI 的那个 Image^ 类的正确命名空间。它来自该站点的[http://msdn.microsoft.com/en-us/library/aa970689.aspx 。](http://msdn.microsoft.com/en-us/library/aa970689.aspx)问题是微软没有公布我想导入的内容，所以我什至不知道他们在想什么课。

**我想添加什么来使这项工作（图像类）？**

```
Error   1   error C3083: 'Controls': the symbol to the left of a '::' must be a type    C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 9   1   Jpg
Error   2   error C2039: 'Image' : is not a member of 'System::Windows' C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 9   1   Jpg
Error   3   error C2871: 'Image' : a namespace with this name does not exist    C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 9   1   Jpg 
```

* * *

```
 #include "stdafx.h"
    #include "Form1.h"
    #using <mscorlib.dll> //requires CLI
    using namespace System;
    using namespace System::IO;
    using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Controls::Image;
        Stream^ imageStreamSource = gcnew FileStream("C:\Users\Duke\Desktop\heart.jpg", FileMode::Open, FileAccess::Read, FileShare::Read);

                JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions::PreservePixelFormat, BitmapCacheOption::Default);
                BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape
                // Draw the Image
                Image^ myImage = gcnew Image();
                myImage->Source = bitmapSource;
                myImage->Stretch = Stretch::None; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:52:14.027

System::Windows::Controls 命名空间（对于 Image 类）需要 PresentationFramework.dll 作为参考，而 System::Windows::Media::Imaging（对于 BitmapSource 类）命名空间需要 PresentationCore.dll。

您是否在项目中包含这两个参考？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:18:49.457

鉴于您正在使用 WIC 类（例如`BitmapDecoder`和`BitmapSource`），您将希望避免涉及`System::Drawing`所有老式 GDI 命名空间的任何事情。要么在`using`指令中不引用这些命名空间，要么明确使用整个`System::Windows::Media`命名空间。

`Image`您所追求的特定课程可能是（[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)`System::Windows::Controls::Image`的文档）。

您需要在项目中添加对 WIC 包装器和一些支持程序集的引用，以便链接到适当的 DLL。

*   **PresentationCore**具有您想要的所有主要图像编解码器和操作类，[`JpegBitmapDecoder`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.jpegbitmapdecoder.aspx)文档中提到了这一点。
*   **`Freezable`WIC 包装器（和）使用的一些附加依赖项需要**WindowsBase**`DispatcherObject`。**
***   **System.Xaml**也可能作为依赖项出现...在我在这里拥有的使用 WIC 的 C# 项目中，没有该程序集的构建会由于缺少 `System.Windows.Markup.IUriContext`. 然而，这可能是我使用 WIC 程序集的产物（但我当然没有使用 Xaml 或 IUriContext）。*   **PresentationFramework**提供`Image`类及其依赖项，如[相应文档中所述](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)**

# c# - 将自定义工具提示添加到 DataGrid 中的行

> ID：13496142
> 
> 赞同：12
> 
> 时间：2012-11-21T15:08:39.880
> 
> 标签：c#, wpf, xaml, datagrid

我想自定义我的 DataGrid 以在所选行中显示工具提示，请参阅下面的模型图像以更好地了解我想要实现的目标。

**就目前而言**- 显示单个选定的行： ![在此处输入图像描述](../Images/8226a2c234081e62b8d4af9c0b0deed5.png)

**我想要的**- 显示选择的同一行，现在带有工具提示：

![在此处输入图像描述](../Images/19aad717e94d8047abcc815be1efa11c.png)

*   我的 DataGrid 使用绑定到 ViewModel。
*   使用适用于 Windows 桌面的 WPF 和 C#。

我真的不知道如何实现这一点，所以我完全愿意接受任何建议。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-08-14T09:40:07.093

我使用`DataGrid.RowStyle`来设置工具提示。

我的绑定对象有一个`ToolTipText`属性，其中包含`ToolTip`.

```
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="ToolTip">
            <Setter.Value>
                <TextBlock Text="{Binding ToolTipText}" />
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.RowStyle> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-21T15:26:40.050

You can use [RowDetailsTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowdetailstemplate.aspx).

Here is sample code:

```
<DataGrid Name="grid" AutoGenerateColumns="False">
    <DataGrid.RowDetailsTemplate>
        <DataTemplate>
            <TextBlock Background="Orange" Text="{Binding MoreInfo}" TextWrapping="Wrap"
                       HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
        </DataTemplate>
    </DataGrid.RowDetailsTemplate>
    <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
        <DataGridTextColumn Header="ID" Binding="{Binding Name}" />
        <DataGridTextColumn Header="ID" Binding="{Binding Surname}" />
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T10:14:26.467

在数据网格中的一行上添加工具提示的另一种简单方法如下。

使用`LodingRow`事件并添加您的工具提示，如下所示：

```
private void grdItemlogs_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        if (e.Row != null)
        {
            string toolTipText = "Your Tooltip string content"
            e.Row.ToolTip = toolTipText;

        }
    } 
```

# android - Encog在Android上运行太慢，怎么办？

> ID：13496144
> 
> 赞同：2
> 
> 时间：2012-11-21T15:08:50.410
> 
> 标签：android, performance, neural-network, encog

我已经使用 Encog 3.1.0 为桌面开发了一个应用程序，但我的意图始终是将它移植到 Android 平台。好吧，在桌面平台上它运行得很好，非常快，只需几秒钟即可完成工作。另一方面，当我在 Android 上运行相同的代码时，它变得非常慢。

我的问题是：如何为桌面或 Android 编程 Engog NN 有什么不同吗？我应该怎么做才能在可接受的时间内在 Android 上运行我的应用程序？

PS：我的设备是三星 Galaxy tab 2

谢谢大家，B.Ramon

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:44:53.883

您使用的是什么硬件平台？我计划很快通过 Encog 为 Android 提供更多“官方”支持。我计划研究一些优化。

基本上，问题似乎出在 Android 平台上 Java 数学库的速度上。其他包也有类似的问题。你可以在这里看到更多。 [Android浮点数学性能](https://stackoverflow.com/questions/8617789/android-floating-point-math-performance)

我相信让 Encog 在 Android 上更快的方法是利用 Android NDK 或者可能利用 BLAS 的一些例程。

# java - Antlr 在 Lexer 中使用 Parser

> ID：13496145
> 
> 赞同：1
> 
> 时间：2012-11-21T15:08:57.463
> 
> 标签：java, antlr

我是 Antlr 的新手，我已经使用 Antlr 3 定义了一个基本语法。

语法如下：

```
grammar data;

@header {
package com.data.language;
}

null        : 'null';
data        : null | STRING | INTEGER;
STRING  : ('a'..'z'|'A'..'Z')+;
INTEGER : '0'..'9'+; 
```

这完美地工作并且 ANTLRWorks 生成代码。但是，我想在词法分析器中使用 data 关键字。例如：

```
I : data '*' INTEGER; 
```

问题是，一旦完成，我会收到以下异常：

```
Error 106: reference to undefined value: data 
```

而且我看不到 ANTLRWorks 图表中的数据。我只能看到 I 词法分析器的 * INTEGER。

是我想要做的，有可能吗？这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:28:10.653

在词法分析器中使用解析器生成是不可能的：词法分析器生成稍后由解析器使用的标记（“单词”），而解析器识别单词序列（“短语”）。词法分析器层位于解析器层之下；没有“反馈通道”可以让词法分析器“了解”解析器正在做什么。

像这样的解析器规则

```
data_star_int : data '*' INTEGER; 
```

显然，很好，因为解析器规则可以引用词法分析器标记和其他解析器规则。您可以使用`data_star_int`来匹配多标记序列。

我会用`*`命名标记替换内联，但这是一个偏好问题。

# c# - HighCharts 时间序列缺失点？

> ID：13496147
> 
> 赞同：2
> 
> 时间：2012-11-21T15:09:05.310
> 
> 标签：c#, asp.net-mvc, highcharts, time-series, dotnethighcharts

我在这里使用 DotnetHighCharts TimeSeries：http: [//dotnethighcharts.codeplex.com/SourceControl/changeset/view/15464#188170](http://dotnethighcharts.codeplex.com/SourceControl/changeset/view/15464#188170)

我每小时分组数据如下：

```
DATE               | DATA
11.19.2012 - 06:00 | 23
11.19.2012 - 07:00 | 12
11.19.2012 - 08:00 | 34
11.19.2012 - 09:00 | 46
11.20.2012 - 08:00 | 23
11.20.2012 - 09:00 | 78 
```

之间没有数据`11.19.2012 - 09:00`-`11.20.2012 - 08:00`

当我设置 startPoint`11.17.2012 - 06:00`并设置 pointInterval `1000*60*60`。

结果：

```
DATE               | DATA
11.19.2012 - 06:00 | 23
11.19.2012 - 07:00 | 12
11.19.2012 - 08:00 | 34
11.19.2012 - 09:00 | 46
11.19.2012 - 10:00 | 23
11.19.2012 - 11:00 | 78 
```

之间没有数据`11.19.2012 - 09:00`-`11.20.2012 - 08:00`所以向左移动直到没有数据。

如何将缺失值设置为“0”。还是另一种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:45:48.890

在您的评论中使用该演示链接，我创建了[这个](http://jsfiddle.net/wergeld/NsZDe/2/)。我看不到您在 2012 年 11 月 20 日的缺失时间中看到的内容。您是否有显示您的问题的示例网站或屏幕截图？代码（js）：

```
chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'spline'
            },
            title: {
                text: ''
            },
            xAxis: {
                type: 'datetime'
            },
            yAxis: {
                title: {
                    text: ''
                }
            },
            plotOptions: {
                series: {
                    pointStart: Date.UTC(2012, 10, 17, 6, 0),
                    pointInterval: 1000*60*60
                }
            },
            series: [{
                name: 'Test',
                data: [
                    [Date.UTC(2012, 10, 19, 6, 0), 23],
                    [Date.UTC(2012, 10, 19, 7, 0), 12],
                    [Date.UTC(2012, 10, 19, 8, 0), 34],
                    [Date.UTC(2012, 10, 19, 9, 0), 46],
                    [Date.UTC(2012, 10, 20, 8, 0), 23],
                    [Date.UTC(2012, 10, 20, 9, 0), 78]
                    ]}]
        }); 
```

# c# - Rx IObservable 仅在值发生一定幅度变化时才产生值

> ID：13496157
> 
> 赞同：4
> 
> 时间：2012-11-21T15:09:26.063
> 
> 标签：c#, .net, c#-4.0, system.reactive

我有一种感觉，这可能是我错过的一个非常简单的扩展方法，但我看不到它......

我基本上想采用一个流来产生一个流，其中值随着每个新值缓慢增加。我想节流/采样这个，不是按时间，而是按“容忍度”。例如

```
var ob = Enumerable.Range(0, 30).ToObservable(); // 0, 1, 2, 3, 4, 5,....., 30
var largeMovingOb = ob.WhenChangedBy(10); // 0, 10, 20, 30 
```

当我有诸如 [1, 4, 20, 33] 之类的序列并且我想在值更改超过最后一个的 15 时输出 - 这将导致：[1, 20]。其中值 12 的变化将导致：[1,20,33]

是否有内置的 Rx 扩展？理想情况下，它适用于所有数字类型，而无需为每种类型编写重载。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T00:22:14.933

我认为这很适合`Observable.Scan`

```
var ob = Enumerable.Range(0, 30).ToObservable();
var largeMovingOb = ob.Scan((acc, i) => acc + 10 > i ? acc : i)
  .DistinctUntilChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:07:05.610

您可以重新利用的另一个内置运算符是[DistinctUntilChanged](http://msdn.microsoft.com/en-us/library/hh229776%28v=vs.103%29.aspx)，它将为您跟踪最后一个值。这里最大的“hack”是`IEqualityComparer`可能不遵循平等的标准期望（`a == b && b == c`并不意味着`a == c`取决于函数）

```
public static IObservable<T> DistinctUntilChangedBy<T>(
    this IObservable<T> source, Func<T, T, bool> isChanged)
{
    //check arguments
    return source.DistinctUntilChanged(new MarginEqualityComparer<T>(isChanged));
}

class MarginEqualityComparer<T> : IEqualityComparer<T>
{
    MarginEqualityComparer(Func<T, T, bool> comparer)
    {
        _comparer = comparer;
    }

    private readonly Func<T, T, bool> _comparer;

    public bool Equals(T x, T y)
    {
        return _comparer(x, y);
    }

    public int GetHashCode(T obj)
    {
        throw new NotSupportedException("This comparer does not support hashing.");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T00:43:15.337

有一个内置的运算符可以执行您想要的操作。

试试这个：

```
var ob = Observable.Range(0, 30);
var largeMovingOb = ob.DistinctUntilChanged(x => x / 10); 
```

它适用于任何类型，而不仅仅是数字类型，因为签名如下所示：

```
IObservable<TSource> DistinctUntilChanged<TSource, TKey>(
    this IObservable<TSource> source, Func<TSource, TKey> keySelector) 
```

简单的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T17:28:22.407

您可以在上使用[`Where`扩展方法](http://msdn.microsoft.com/en-us/library/hh211607%28v=vs.103%29.aspx)[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)，跟踪您上次产生的内容，并且仅当值超过公差级别的最后产生的值时，谓词才返回 true。

这可以包装到一个扩展方法中，该方法利用闭包来执行此操作，如下所示：

```
public static IObservable<int> WhenLastObservedChangesByMoreThan(
    this IObservable<int> observable, int tolerance)
{
    // Validate parameters.
    if (observable == null) throw new ArgumentNullException("observable");

    // Tolerance must be positive, so comparisons are correct after
    // addition/subtraction.
    if (tolerance < 0) 
        throw new ArgumentOutOfRangeExeption("tolerance", tolerance,
            "The tolerance parameter must be a non-negative number.");

    // Shortcut: If tolerance is 0, then every value is returned, just
    // return the observable.
    if (tolerance == 0) return observable;

    // The last value yielded.
    int? lastYielded = null;

    // Filter.
    observable = observable.Where(i => {
        // If there is a previous value
        // that was yielded.
        if (lastYielded != null)
        {
            // Is the last value within
            // tolerance?
            if (i - tolerance < i && i < i + tolerance)
            {
                // Do not process.
                return false;
            }
        }

        // This is being yielded, store the value.
        lastYielded = i;

        // Yield the value.
        return true;
    });
} 
```

请注意，上面不是线程安全的，如果您从多个线程`IObservable<T>`调用[`OnNext`](http://msdn.microsoft.com/en-us/library/dd782792.aspx)，那么您必须锁定对`lastYielded`变量的访问（这很容易使用[`lock`语句](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)来完成）。

# c# - 使用 kinect 将用户脸上的跟踪点放入数组中

> ID：13496158
> 
> 赞同：0
> 
> 时间：2012-11-21T15:09:32.710
> 
> 标签：c#, arrays, tracking, kinect, face-recognition

我目前正在尝试使用 xbox kinect 跟踪用户的面部。我从“面部跟踪基础”中获取了一些代码，并存储了它使用的点的位置：

```
 var faceModelPts = new List<Point>();
            var faceModel = new List<FaceModelTriangle>();

            for (int i = 0; i < this.facePoints.Count; i++)
            {
                faceModelPts.Add(new Point(this.facePoints[i].X + 0.5f, this.facePoints[i].Y + 0.5f));
            } 
```

我希望能够使用这些信息来计算其中一些点之间的距离。所以我尝试将它们放在一个单独的数组中，如下所示：

```
 var faceModelPts = new List<Point>();
            var faceModel = new List<FaceModelTriangle>();
            double[] xarray;
            double[] yarray;

            for (int i = 0; i < this.facePoints.Count; i++)
            {
                faceModelPts.Add(new Point(this.facePoints[i].X + 0.5f, this.facePoints[i].Y + 0.5f));
                xarray[i] = this.facePoints[i].X;
                yarray[i] = this.facePoints[i].Y;
            } 
```

但这似乎返回错误。但我可以通过执行以下操作来获取信息：

```
 double xpos21 = this.facePoints[21].X; 
```

我在做什么只是一个简单的错误，还是不能以这种方式将这些信息放入数组中？

另外，一旦我有了点的位置，我该如何检索该位置的深度信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:57:35.467

你似乎没有初始化你的数组。

```
xarray = new double[someSize];
yarray = new double[someSize]; 
```

这将解释数组中的空指针，除非您在引用的代码之外声明它。

在 Visual Studio 中的该行上设置断点。当您在调试期间点击它时，请检查以验证它`xarray`不为空。

# xml - 选择 XML 节点作为属性

> ID：13496160
> 
> 赞同：4
> 
> 时间：2012-11-21T15:09:37.697
> 
> 标签：xml, tsql, sql-server-2008-r2, xquery, sqlxml

我假设我的问题的答案将是一些我自己无法弄清楚的简单问题。这是场景：

我正在使用 SQL Server 2008 R2，其中一个表有一个 XML 列，其中数据以以下格式保存：

```
<Person>
    <firstName>John</firstName>
    <lastName>Lewis</lastName>
</Person> 
```

该`Person`节点可以有任意数量的子节点，其元素名称可能不同（事先不知道）。我正在寻找一个查询来返回一个 XML，该 XML 具有所有节点的值作为属性。

所以上述 XML 的输出应该是：

```
<Person firstName="John" lastName="Lewis"/> 
```

我想不出一个查询来获得上述输出。我不想使用类似的查询

```
Select 
      PersonColumn.value('(/Person/firstName)[1]', 'varchar(100)') AS '@firstName'
    , PersonColumn.value('(/Person/lastName)[1]', 'varchar(100)') AS '@lastName'
FROM MyTable
WHERE MyTable.MyPrimaryKey=1
FOR XML PATH('Person'), TYPE 
```

因为我不知道节点下可能有哪些`Person`节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:13:26.363

我试过这样做

```
select
    PersonColumn.query('
        element Person {
            for $i in /Person/*
            return attribute {local-name($i)} {string($i)}
        }
    ')
from MyTable 
```

但事实证明，使用动态属性名称是不可能的

```
XQuery [MyTable.PersonColumn.query()]: Only constant expressions are supported for the name expression of computed element and attribute constructors.: select PersonColumn.query(' element Person { for $i in /Person/* return attribute {local-name($i)} {string($i)} } ') from MyTable 
```

所以到目前为止我能做的最好的就是

```
select 
    cast(
        '<Person ' + 
        (
            select
                PersonColumn.query('
                for $i in /Person/*
                return concat(local-name($i), "=""", data($i), """")
                ').value('.', 'nvarchar(max)')
            for xml path('')
        ) + '/>'
    as xml)
from MyTable 
```

也可以这样做

```
select
    cast(
        '<Person ' + 
        PersonColumn.query('
            for $i in /Person/*
            return concat(local-name($i), "=""", data($i), """")
        ').value('.', 'nvarchar(max)') +
        '/>'
      as xml)
from MyTable 
```

`<` `>`但是如果您的数据包含一些诸如之类的字符，它将不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:10:11.013

看起来您本质上想要`PIVOT`对作为 Person 节点的直接子节点的元素的名称。如果你必须在 TSQL 中完成这一切，你必须动态地构造查询。请参阅[如何在 T-SQL 中透视 XML 列的属性以](https://stackoverflow.com/questions/1580077/how-do-i-pivot-on-an-xml-columns-attributes-in-t-sql?rq=1)获得灵感。在这种情况下，枢轴表达式也是一个属性值，而在您的情况下，它是一个元素名称。

我觉得有必要指出一个明显的问题——这样的解决方案可能表现不佳，结果难以使用（因为列名和计数未知）并且可能容易受到 sql 注入攻击，具体取决于上下文。

# python - 试图捕获 raw_input 以供以后使用

> ID：13496163
> 
> 赞同：1
> 
> 时间：2012-11-21T15:09:46.170
> 
> 标签：python, input

我正在尝试制作一个使用 ra_input 的 def 函数，并且数据将在函数之外使用。该函数将被多次调用。

```
var1=""
var2=""
theresult=""
def getstuff():
    theresult = raw_input("Enter your result")
print "Here is the result:"

print theresult 
```

没有结果出现。试过return，试过return()，试过return result，试过return(result)，有人帮忙吗？？还有为什么当我输入问题时下面的框没有格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:14:21.150

最干净的方法可能是：

```
def getstuff():
    return raw_input("Enter your result")

theresult = getstuff()
print theresult 
```

另一种选择是使用`global`，但我认为这里不合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:35:06.143

这是应该完成这项工作的代码。

> def getstuff():
> 
> ```
> theresult = raw_input("Enter your result:  ")
> return theresult 
> ```
> 
> 定义主（）：
> 
> ```
> var1 = " "
> var2 = " " 
> ```
> 
> 结果 = getstuff()
> 
> print "结果如下："
> 
> 打印结果
> 
> 主要的（）

# php - PHP 致命错误：require()：无法解锁 pthread 锁

> ID：13496165
> 
> 赞同：10
> 
> 时间：2012-11-21T15:09:52.780
> 
> 标签：php, apache, apache2

我在 Debian Linux 上使用 LAMP。阿帕奇 2.2.22-12，PHP 5.4.4。

有时我收到此错误，然后我无法重新加载页面或打开页面，其中包括带有此错误的文件。出现此类错误后，我无法重新启动 apache

> 重新启动 Web 服务器：apache2(98) 地址已在使用中：make_sock：无法绑定到地址 [::]:80
> 
> (98)地址已在使用：make_sock：无法绑定到地址 0.0.0.0:80 没有可用的侦听套接字，正在关闭
> 
> 无法打开日志
> 
> 操作“开始”失败。
> 
> Apache 错误日志可能包含更多信息。失败的！

在 apache 日志文件中：

> [Wed Nov 21 15:07:55 2012] [warn] 子进程 4020 仍然没有退出，发送一个 SIGTERM
> 
> [Wed Nov 21 15:07:55 2012] [warn] 子进程 4021 仍然没有退出，发送一个 SIGTERM
> 
> [Wed Nov 21 15:07:55 2012] [warn] 子进程 4022 仍然没有退出，发送一个 SIGTERM
> 
> [2012 年 11 月 21 日星期三 15:07:57] [错误] 子进程 1309 仍然没有退出，发送 SIGKILL
> 
> [2012 年 11 月 21 日星期三 15:07:57] [错误] 子进程 1310 仍然没有退出，发送 SIGKILL
> 
> [2012 年 11 月 21 日星期三 15:07:57] [错误] 子进程 1311 仍然没有退出，发送 SIGKILL

和主机日志：

> [2012 年 11 月 21 日星期三 12:21:24] [错误] [客户端 127.0.0.1] PHP 致命错误：require()：无法解锁 ~/www/yii/yii-1.1.11.58da45/framework/base 中的 pthread 锁/CApplication.php 第 127 行

有

```
$config=require($config); 
```

或者：

> [2012 年 11 月 14 日星期三 21:04:26] [错误] [客户端 127.0.0.1] PHP 致命错误：require_once()：无法解锁第 14 行 ~/projects/politiya/index.php 中的 pthread 锁定

有：

```
require_once($game_loader); 
```

* * *

我已经删除了 php-apc，现在灯效果很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-28T02:53:07.257

## 使固定

如前所述[，](http://codedmemes.com/lib/php-performance-apc-os-x-server/)我不得不快速卸载并重新安装 apc（字面意思是 5 秒）：

`1` `sudo pecl uninstall apc`

`2` `sudo pecl install apc`

`BUT`将**`no`**已为 pthread 互斥锁填充的内容更改为**`yes`**

`AND`将**`yes`**已经为 pthread 读/写锁填写的内容更改为**`no`**.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T17:19:31.417

发生此错误是因为 APC 中的“死锁错误”。一个[php 错误报告页面](https://bugs.php.net/bug.php?id=59620)说，此错误已在 APC 3.1.8 中修复

[我们还可以在此处](http://pecl.php.net/package-changelog.php?package=APC)查看 APC 更改日志

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-30T12:52:58.160

仅供参考（针对 OMG 关于 APC 版本错误的评论），我正在运行 APC 3.1.13 和 PHP 5.4.17，但我仍然遇到了错误：

```
unable to obtain pthread lock (EDEADLK) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T13:02:55.060

这意味着正在运行的某个进程正在使用此端口，因此请尝试终止该进程

喜欢得到这个过程

例如：ps -ef | grep httpd

然后杀死进程

例如 kill -9 进程 ID

- - - - - - - - - - - -或者 - - - - - - - - - - -

80端口被另一个服务使用，所以找到并更改system-config-httpd.conf：system-config-httpd.conf system-config-httpd.conf。所有这一切，重启httpd：/etc/init.d/httpd start

# java - 添加组件时，Javafx 阶段不会调整大小

> ID：13496171
> 
> 赞同：0
> 
> 时间：2012-11-21T15:10:03.490
> 
> 标签：java, javafx, stage

所以我有这个应用程序可以获取一些数据并显示图表！

当我启动我的程序时，没有创建图形数据和折线图，因此我的程序如下所示：

![在此处输入图像描述](../Images/61a114485f166869e4cc42d2c76f4609.png)

然后当我按下“Hent data”按钮时，我的折线图被创建并添加到边框的中心，这使得 gui 看起来像这样： ![在此处输入图像描述](../Images/023511854d7dcba818c5657dd8ab5c5e.png)

如您所见，应用程序阶段的大小不适合所有组件。

但是，如果我通过创建一个随机图形（而不是更改大小）来启动程序，程序将如下所示：

![在此处输入图像描述](../Images/6b122343bfaa5da2a676371b5bf2f173.png)

在所有示例中，我的主要阶段代码如下所示：

```
public void start(Stage primaryStage) throws Exception {
    this.primaryStage = primaryStage;
    bp = new BorderPane();
    bp.setTop(createTopPane());
    Group root = new Group();
    root.getChildren().add(bp);
    bp.setCenter(createCenter());
    AnchorPane leftPane = new AnchorPane();

    leftPane.setPrefWidth(20);
    Separator vSeparator = new Separator(Orientation.VERTICAL);
    bp.setRight(leftPane);
    Scene scene = new Scene(root);
    scene.getStylesheets().addAll("test.css", "calendarstyle.css");
    primaryStage.setScene(scene);
    primaryStage.setMinHeight(500);
    primaryStage.setMinWidth(527);
    primaryStage.show();
} 
```

即使尚未创建图表，我如何确保舞台保持适合图表的大小？

请注意，当我单击按钮时，我已经尝试更改 primaryStage 大小，但这并没有解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:04:30.567

使用`AnchorPane.setLeftAnchor(javaFxNode, 0.0);`和`AnchorPane.setRightAnchor(javaFxNode, 0.0);`静态方法。两者中的 0 值都应该将图表的两侧“粘贴”到其容器上。当然，您也可以使用`setTopAnchor`and`setBottomAnchor`来解决同样的高度问题。

# boolean - 将带括号的条件转换为不带括号的等价条件

> ID：13496172
> 
> 赞同：5
> 
> 时间：2012-11-21T15:10:08.527
> 
> 标签：boolean, boolean-logic, boolean-expression

我正在开发一个应用程序，用户可以在其中为某些任务添加条件。

例如，他可以有条件 a、b、c、d 并将它们组合在一起，最终看起来像：

`(a AND b) OR ( c AND d )`
或
`(a AND b AND c) or d`
或
`(a AND !b) AND c OR !d`

等等

如何通过删除括号将这些条件转换为等效条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T01:25:00.067

`AND`布尔代数中的每个表达式都可以仅使用, `OR`, 和`!`(unary `NOT`)转换为等价表达式，无需括号。

这是一个简单但低效的算法：

使用示例表达式`(a OR !b) AND c`，

1.  为变量的每个真值组合建立一个真值表：

    ```
    | a | b | c | (a OR !b) AND c  |
    | 0   0   0 | 0                |
    | 0   0   1 | 1                |
    | 0   1   0 | 0                |
    | 0   1   1 | 0                |
    | 1   0   0 | 0                |
    | 1   0   1 | 1                |
    | 1   1   0 | 0                |
    | 1   1   1 | 1                | 
    ```

2.  对于表达式为真的每一组值（最右列中的每一行），使用s`1`创建一个表达式，并且仅针对该特定值集计算为真。`AND``!`

    ```
    | a | b | c | (a OR !b) AND c  |
    | 0   0   0 | 0                |
    | 0   0   1 | 1                |  (!a AND !b AND c )
    | 0   1   0 | 0                |
    | 0   1   1 | 0                |
    | 1   0   0 | 0                |
    | 1   0   1 | 1                |  (a  AND !b AND c )
    | 1   1   0 | 0                |
    | 1   1   1 | 1                |  (a  AND b  AND c ) 
    ```

3.  用 OR 连接表达式。

    ```
    (!a AND !b AND c ) OR (a  AND !b AND c ) OR (a  AND b  AND c ) 
    ```

4.  生成的表达式很少是最小的，因此您可能希望在之后应用一些最小化技术。

    ```
    (!a AND !b AND c) OR (a AND !b AND c) OR (a AND b AND c)
    =
    (!a AND !b AND c) OR (a AND c)
    =
    (!b AND c) OR (a AND c) 
    ```

达达！

需要注意的是，在步骤 1 中构建真值表是一个 O(2^n) 操作（以变量数量计），这很糟糕。对于具有大量变量的情况，您可能需要使用不同的技术。该算法的主要优点是它使任何表达式如何转换为您想要的形式变得非常明显。

编辑：要清楚，如果您使用正常的优先规则，您可以删除最终表达式中的括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T15:59:27.137

您可以使用布尔代数的各种[属性](http://ndgohar.seecs.nust.edu.pk/pages/professional/teaching/spring%2008/Help%20Notes/Help%20Notes/Boolean%20Algebra/Boolean%20Algebra.htm)来帮助简化表达式，但您可能无法摆脱所有括号。括号对于某些表达式是必需的，因为 NOT、AND 和 OR 的运算没有顺序。因此，如果您不能重新排列表达式以从左到右阅读，则需要括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:54:37.160

不完全确定转换为非括号等效项的动机是什么，所以我认为这意味着您正在尝试建立一种表达能力（即表达语言），以便用户将他们所需的任务条件传达给您的应用程序。

您无法消除对括号的需求，并且仍然支持具有正常运算符优先级规则的正常中缀表达式语言中的任意复杂表达式。

你有几个选择，我认为：

1.  支持括号。（它们并不难解析。）

2.  使用不使用括号的替代相对标准或众所周知的表达语言，例如反向波兰表示法，又名 RPN。请参阅[http://en.wikipedia.org/wiki/Reverse_Polish_notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。RPN 使用后缀表示法，允许用户通过定位和堆叠而不是使用括号来完全控制运算符优先级。这是以必须仔细（重新）排序操作数和操作为代价的。（没有免费的午餐。）

3.  将您的语言的表现力限制为某些特定模式，这些模式在更正常（中缀）语言（具有运算符优先级）中不需要括号。

最后，如果你有一个用户界面来帮助用户编写他们的表达式（而不是文本语言），你可以像上面的 #2 那样做一些事情，并使用用户定义子表达式的顺序来指示运算符的优先级，而不需要括号。基本上，您的 UI 将帮助他们构建表达式树。

最后，如果您的问题是如何删除括号以执行表达式，这更像是代码生成问题。同样，RPN 堆栈很有用。或者，您可以将（可能带有括号的）表达式转换为由附加（在编译器术语中是临时的）变量显式连接的单个迷你（例如三个操作数）语句。例如，`(a + b) * c`变成`t1 = a + b`后面跟着`final-result = t1 * c`。

# javascript - 如何将值传递到 javascript 函数中的 aspx 页面 onClientClick

> ID：13496173
> 
> 赞同：8
> 
> 时间：2012-11-21T15:10:05.940
> 
> 标签：javascript, asp.net

我想在回发发生之前检查文本框的值。我将`onClientClick`值设置为我的函数，但我不知道如何传递数据进行检查，在这种情况下，我想检查 txt1 输入的文本。

```
<asp:textbox id="txt1" runat="server />

<asp:LinkButton ID="LinkButton1"
                runat="server"
                Text="Save" 
                onclick="Save"
                OnClientClick="javascript:check(WANT TO PUT TEXTBOX VALUE HERE);"
                /> 
```

我的JavaScript：

```
function check(txt) {
 var pattern = /^[0-9]{1,11}(,[0-9]{0,2})?$/;
 if (!pattern.test(txt)) {
    return false;
 }
 else {
    return true;
 }
} 
```

问题是这个检查功能是在 txt1 的按键事件中使用的，所以我不能使用：

```
function check(){
    var txt=$('#txt1').val();
} 
```

整个JS代码：

```
$('#txt1').keypress(function (e) {
    var key = String.fromCharCode(e.which);
    var txt = $(this).val() + key;
    if (check(txt)) {
        // do sth
    } else {
        e.preventDefault();
        // do sth
    }
}); 
```

如何告诉 OnclientCLick 函数获取 txt1 值？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:21:57.780

类似的东西：

```
<asp:textbox id="txt1" runat="server />

<asp:LinkButton ID="LinkButton1"
                runat="server"
                Text="Save" 
                onclick="Save"
                OnClientClick="check(document.getElementById('<%=txt1.ClientID%>').value;)"
                /> 
```

* * *

**编辑：**
其他方法：

1.  您可以在服务器端添加它：`LinkButton1.OnClientClick="check(document.getElementById('" + txt1.ClientID + "').value;)"`;

2.  如果您想留在 aspx 页面中，您必须在 OnClientClick 中放置一个 javascript 函数的名称，并在脚本标记中实现该 javascript 函数：

    ```
    <asp:LinkButton ID="LinkButton1"
                    runat="server"
                    Text="Save" 
                    OnClientClick="validate();"
                    />
    <script type="text/javascript">
        function validate() {
            alert(document.getElementById('<%=txt1.ClientID%>').value);
            return false;
        }
    </script> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:55:21.857

你有几种方法。

第一种方法：

```
function sayHello(obj){
   alert(obj.id + " says 'Hello!'");
};

<asp:Button runat="server" ID="btnApproach1" OnClientClick="sayHello(this)"
 Text="Say Hello" /> 
```

这会将 Button 控件（实际上只是一个`<input`元素）传递给函数，然后您可以随意处理它。

第二种方法：

```
function checkValue(e) {

    //If it has a target, use it. Otherwise, use srcElement (for IE)
    var ctrl = e.target || e.srcElement;

    //Do whatever you need to with the text, no button necessary.

};

function bindEvent(ctrl, event, handler, propagates) {
    if (ctrl.addEventListener) {
        ctrl.addEventListener(event, handler, propagates);
    }
    else {
        ctrl.attachEvent("on" + event, handler);
    }
};

window.onload = function () {

var myCtrl = document.getElementById('<%=txtToValidate.ClientID%>');

bindEvent(myCtrl, "keydown", checkValue, false);

};

<asp:Button runat="server" ID="btnApproach2" Text="Say Hello" /> 
```

在这里，您将事件绑定到幕后的控件（最好）并从表示层（您的 .aspx）中删除该逻辑。

两种方法都可以，但我建议使用选项二来分离关注点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-21T15:18:27.323

您只需在字符串传递的两端添加单引号即可检查功能，如下所示。

```
javascript:check('WANT TO PUT TEXTBOX VALUE HERE'); 
```

# javascript - 使用 javascript 模数将类添加到每三个项目，但不希望将其应用于前 0

> ID：13496174
> 
> 赞同：1
> 
> 时间：2012-11-21T15:10:19.320
> 
> 标签：javascript

我试图将最后一个添加到每个`i`完美除以 3 的值上，但我不希望索引 0 成为其中之一。谁能告诉我如何在除第一个项目之外的每个第三个项目上使用模数？

```
((i%3==0) ? 'last' : ''); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T15:12:39.287

```
if (i!=0 && i % 3 == 0) ... 
```

有时，与其试图为你的边缘情况寻找一个包容性的解决方案，不如明确地说你不想包括 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T15:12:37.360

就像是：

```
if(i > 0 && i % 3 == 0) {
    // stuff ...
} 
```

如果您需要做的只是将 CSS 类应用于除第一个元素之外的所有第三个元素，您应该能够：

```
$('.yourClass:nth-child(3n+4)').addClass('newClass');​ 
```

**演示**：http: [//jsfiddle.net/uuBzD/](http://jsfiddle.net/uuBzD/)

如果从 index 开始计数`0`，这会将类应用于元素`3`、`6`等`9`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:42:24.270

这听起来可能太简单了，但如果它是一个`for`循环，您可以从 1 开始计数，并且不需要在每次迭代中都进行检查（性能稍好）：

```
for ( var i = 1; i < arr.length; i++ ) {
  arr[i].className = i % 3 ? "" : "last";
} 
```

如果您不需要为不是的`className`元素分配 ，那么您可以通过使用 来稍微提高性能：`i %3``0``if`

```
for ( var i = 1; i < arr.length; i++ ) {
  if ( !( i % 3 ) ) {
    arr[i].className = "last";
  }
} 
```

当然，如果你必须从 0 开始计数，你可以使用这个循环：

```
for ( var i = 0; i < arr.length; i++ ) {
  if ( !( i % 3 ) && ( i ) ) {
    arr[i].className = "last";
  }
} 
```

之所以`i!==0`将条件放在后面，`i % 3`是因为第一个条件比较常见，几乎所有迭代都需要检查，所以性能会比`i!==0`每次迭代都盲目检查更好。

无论如何，以您自己的编码风格简短地回答它：

```
(i%3==0 && i ? 'last' : ''); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T20:30:14.023

在尝试了一些已发布的答案后，我发现最简单的解决方案是将 1 添加到索引以使计算基于非零：

```
var isThirdIteration = (i + 1) % 3 === 0; 
```

# azure - 批量查询异步复制 Blob Azure API 的状态

> ID：13496177
> 
> 赞同：2
> 
> 时间：2012-11-21T15:10:28.113
> 
> 标签：azure, azure-storage, azure-blob-storage

前段时间，我问了一个[关于](https://stackoverflow.com/questions/8582145/copying-storage-data-from-one-azure-account-to-another)如何将大量 blob 从一个帐户复制到另一个帐户的问题。我发现的最佳解决方案是使用新的[Copy Blob API](http://msdn.microsoft.com/en-us/library/windowsazure/dd894037.aspx)，该 API 允许在帐户之间复制 blob 而无需下载它们。

从那以后，我测试了新的 API（它现在在 Azure SDK 中可用，至少在它的最新[gitHub 版本](https://github.com/WindowsAzure/azure-sdk-for-net)中可用）并且我的基准测试显示了显着的改进 - 而复制一个 90MB 的 blob 需要 1.5 分钟“旧方式”（即下载，然后上传），通过 Copy Blob 复制只需 10 秒。这就是好消息。

现在，坏消息：复制 Blob API 是异步的，这意味着它会立即返回，我需要轮询目标 blob 的属性以了解复制何时完成。原则上这很好，但是当我要复制数千个 blob 时效率极低。

所以我的问题是：在使用 Copy Blob API 将数千个（在我的情况下，超过 600,000 个）blob 从一个存储帐户复制到另一个存储帐户时找出复制何时完成的一种好的、有效的方法是什么？

这是一些超慢的代码，可以找出完成的百分比：

```
 foreach (ICloudBlob blob in cloudBlobContainer.ListBlobs())
        {
            totalCount++;

            // TOO SLOW!
            ICloudBlob blobDetails = cloudBlobContainer.GetBlobReferenceFromServer(blob.Name);

            if (blobDetails.CopyState.Status == CopyStatus.Success)
            {
                successCount++;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:39:24.937

CloudBlobContainer.ListBlobs 方法采用一个名为 blobListingDetails 的参数，该参数描述要包含在列表中的内容。如果您指定 BlobListingDetails.Copy，则列表还将包括复制属性。

有关详细信息，请参阅[MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblobcontainer.listblobs.aspx)。

# magento - 在 Magento 中翻译“银行转账付款”

> ID：13496178
> 
> 赞同：1
> 
> 时间：2012-11-21T15:10:30.063
> 
> 标签：magento, magento-1.7

在 Magento 1.7 中，下订单时，在第 3 步中有一个“付款方式”段落，其下方带有文本“银行转账付款”（目前我唯一的付款选项，所以看起来）。

由于我正在处理的网上商店不是英文的，我想翻译文本“银行转账付款”，但不知道如何翻译。通过 Magento 的前端内联翻译工具无法更改此槽，我只能在文件中找到这些文本`app\code\core\Mage\Payment\etc\system.xml`：

```
<banktransfer translate="label">
    <label>Bank Transfer Payment</label>
    <frontend_type>text</frontend_type>
    <sort_order>30</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store> 
```

和`app\code\core\Mage\Payment\etc\config.xml`：

```
<banktransfer>
    <active>0</active>
    <model>payment/method_banktransfer</model>
    <order_status>pending</order_status>
    <title>Bank Transfer Payment</title>
    <allowspecific>0</allowspecific>
    <group>offline</group>
</banktransfer> 
```

..但是更改标签/标题中的一个或两个似乎并没有改变任何东西。

我对 XML 和 PHP 有合理的理解。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:22:18.573

根据您的语言环境、主题设置（默认语言环境是 en_US）和所需区域（前端或后端），您可以在*translate.csv*中执行此操作，例如

```
app/design/[adminhtml or frontend]/[PACKAGE]/[THEME]/locale/en_US/translate.csv 
```

您将拥有以下内容：

```
"Bank Transfer Payment","Desired translation" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:13:44.600

您是否尝试过从magento后端系统>配置>付款方式>银行转帐Paymentde更改它

谢谢

# silverlight - 如何区分 RegionManager.RequestNavigate 调用中具有相同名称的 2 个视图？

> ID：13496181
> 
> 赞同：0
> 
> 时间：2012-11-21T15:10:44.687
> 
> 标签：silverlight, silverlight-4.0, prism

我有 2 个来自不同命名空间的同名“RootView”视图：“Foo”和“Bar”。我必须将什么作为视图名称传递给 RegionManage.RequestNavigate 方法？

```
this.regionManager.RequestNavigate("MainRegion", "RootView"); // <--- RootView from Foo or Bar? 
```

与往常一样，MSDN 上对此一无所知：http: [//msdn.microsoft.com/en-us/library/gg418956 (v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/gg418956(v=pandp.40).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:17:20.337

答案是：全名

```
this.regionManager.RequestNavigate("MainRegion", typeof(Foo.RootView).FullName); // <--- RootView from Foo or Bar? 
```

感谢您的关注。

# c# - 在同一站点上执行 Response.Redirect 从一个页面到另一个页面的正确方法

> ID：13496186
> 
> 赞同：7
> 
> 时间：2012-11-21T15:10:54.047
> 
> 标签：c#, asp.net, request

我敢肯定，这已经被问过一次又一次。是的，我已经搜索过了。但是，我找不到一个清楚地展示我想要完成的事情的例子。

我目前在`mywebsite/test.aspx`，我想重定向到`mywebsite/testing.aspx`。但是，我希望此重定向能够在服务器上和 Visual Studio 的调试中实时工作。我试过了

```
Response.Redirect(Request.RawUrl.Replace(Request.RawUrl,"testing.aspx")) 
```

然而，这取代了整个事情。

希望这是有道理的 -`mywebsite/test.aspx`应该重定向到`mywebsite/testing.aspx`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T15:18:23.413

使用应用程序相对 URL。`~/`表示应用程序根路径，因此它适用于`/`和`/virtual-directory/`。

```
Response.Redirect("~/testing.aspx"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T15:19:57.480

如果您的页面位于同一目录级别，则可以使用：

```
Response.Redirect("testing.aspx", false); 
```

如果您的页面位于应用程序根目录上，您可以使用以下命令：

```
Response.Redirect("~/testing.aspx", false); 
```

最后，如果您的页面位于当前页面的子目录中，您可以使用：

```
Response.Redirect("MyFolder/testing.aspx", false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:14:08.330

您可以使用相对于网站根目录的 url。这些 url 总是以`/`'root'开头

对于`Response.Redirect`您知道的任何其他 url 将由服务器处理（如服务器控件中指定的 url），最好以`~/`root 身份启动 url，这将有助于虚拟目录混乱。

# ruby-on-rails - 为什么我的规范/支持文件没有被 rspec 拾取？

> ID：13496196
> 
> 赞同：5
> 
> 时间：2012-11-21T15:11:18.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有一个奇怪的错误，我的 spec/support 文件夹中有一个实用程序.rb 文件来保存一些帮助函数，例如登录方法。

规范/支持/实用程序.rb

```
include ApplicationHelper

def sign_in(user)
  visit new_user_session_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
end 
```

我的保护文件：

```
require 'active_support/core_ext'

guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch('config/environments/test.rb')
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb') { :rspec }
  watch('test/test_helper.rb') { :test_unit }
  watch('spec/support/')
  watch(%r{^spec/support/.+\.rb$})
  watch(%r{features/support/}) { :cucumber }
end

guard 'rspec', :version => 2, :all_after_pass => false, :cli => '--drb' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara request specs
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/requests/#{m[1]}_spec.rb" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }

  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  do |m|
    ["spec/routing/#{m[1]}_routing_spec.rb",
     "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
     "spec/acceptance/#{m[1]}_spec.rb",
     (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" :
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")]
  end
  watch(%r{^app/views/(.+)/}) do |m|
    (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" :
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")
  end

end 
```

在我的集成测试 requests/link_pages_spec.rb 我尝试做这样的事情，但它给了我一个错误

```
require 'spec_helper'

describe "Link pages" do

  subject { page }

  describe 'creating a link' do

    before do
      sign_in FactoryGirl.create(:user)
      visit new_link_path
    end

    describe "with invalid information" do
      it "should not create a link" do
        expect { click_button 'Create Link' }.not_to change(Link, :count)
      end
    end

  end

end 
```

错误：

```
Failure/Error: sign_in FactoryGirl.create(:user)
     NoMethodError:
       undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1::Nested_1:0x007f8ebb563e10>
     # ./spec/support/utilities.rb:5:in `sign_in'
     # ./spec/requests/link_pages_spec.rb:10:in `block (3 levels) in <top (required)>' 
```

奇怪的是，如果我删除链接页面规范中的描述块，就没有错误..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-28T17:16:54.420

此外，如果您正在运行 Spork，您通常需要重新启动它以重新加载支持目录中文件的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:32:21.263

制定了解决方案，错误是由于最新的 Capybara gem 引起的。Capybara 2+ 要求您在规范/功能中进行集成测试。我只是回滚到旧版本。

见[http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T11:58:52.517

我遇到过同样的问题。但是，尝试了一个稍微不同的修复：我按照您包含的链接中的建议将“spec/requests”文件夹重命名为“spec/features”。也可以在这里查看： [https ://github.com/rspec/rspec-rails/blob/master/Capybara.md](https://github.com/rspec/rspec-rails/blob/master/Capybara.md)

之后，我的所有测试都在 Guard/Spork 以及 Sublime Text 测试插件中运行绿色。

# python - 在多级字典中获取和设置值的最佳实践

> ID：13496202
> 
> 赞同：2
> 
> 时间：2012-11-21T15:11:46.277
> 
> 标签：python, getter-setter, magic-methods, dictionary

> **可能重复：**
> [使用点符号字符串检查字典](https://stackoverflow.com/questions/12414821/checking-a-dictionary-using-a-dot-notation-string)

有一个像这样的多级字典：

```
some_infomations = {
    "root":{
        "sub":{
            "more_deep":{
                "not_enough": "Some value",
                "another": "bla..bla"
            }
        },
        "more":{
            "more_deep":{
                "not_enough": "Some value",
                "another": "bla..bla"
            }
        }
    }
} 
```

我有一个 crumbs 字符串，例如`root.sub.more_deep.another`，有没有一种简单而好的方法来完成这项工作`eval("some_infomations[root.sub.more_deep.another] = some_value")`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:39:06.327

在这里发布主要是为了好玩，但也因为`reduce`它的用途比大多数人认为的要多得多……：

```
from operator import getitem
def dot_get(your_dict,s):
    return reduce(getitem, s.split('.'), your_dict)  

d = {'foo': {'bar': {'baz': 1}}}
print dot_pull(d,'foo.bar.baz') 
```

**编辑**——显然这是 OP 在上一个问题中的做法，我没有仔细阅读，尽管 OP 使用`dict.get`它会抑制 KeyError。

要设置项目，您需要拆分最后一个元素，并获取其上方的元素：

```
def dot_set(your_dict,s,v):
    head,tail = s.rsplit('.',1)
    dot_get(yourdict,head)[tail] = v 
```

# ftp - BizTalk FTP 接收适配器 - NLST 上的 550 错误

> ID：13496203
> 
> 赞同：1
> 
> 时间：2012-11-21T15:11:51.267
> 
> 标签：ftp, biztalk

我正在尝试设置 BizTalk FTP 接收位置。我用包含 CSV 文件的 /test 子文件夹设置了我的 FTP 服务器。我已经通过相同的接收端口在本地测试了 CSV 文件，它工作正常。执行 NLST 命令以根据我设置的文件掩码列出 /test 文件夹的内容时，FTP 端口似乎正在死亡。根据日志，它正在接收来自服务器的 550 响应。

这是日志输出：

```
< 220 Microsoft FTP Service
> USER XXXXXXXX
< 331 Password required for XXXXXXXX.
> PASS xxxx
< 230 User logged in.
> PWD
< 257 "/" is current directory.
> PWD
< 257 "/" is current directory.
> PWD
< 257 "/" is current directory.
> SYST
< 215 Windows_NT
> PWD
< 257 "/" is current directory.
> CWD /test/
< 250 CWD command successful.
> PWD
< 257 "/test" is current directory.
> TYPE A
< 200 Type set to A.
> PORT XXXXXXXX
< 200 PORT command successful.
> NLST *XXXXXXXX*.csv
< 150 Opening ASCII mode data connection.
< 550 
> QUIT
< 221 Goodbye. 
```

当我使用 Windows ftp 命令时，我可以发出这些相同的命令，而且它似乎工作得很好。FileZilla 可以毫无问题地连接到 FTP 服务器。所以我认为这是 BizTalk 客户端中的问题，而不是服务器中的问题。

无论在端口配置中将“使用名称列表 (NLST)”设置为“是”还是“否”，我都会得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:18:07.550

弄清楚了。我将 FTP 接收端口配置为使用活动模式，显然 BizTalk 和服务器之间的某个防火墙阻止了该端口。在接收端口配置中切换到被动模式会导致事情开始工作。

# android - 如何从 Manifest 获取 android:versionName？

> ID：13496206
> 
> 赞同：1
> 
> 时间：2012-11-21T15:12:04.593
> 
> 标签：android, manifest

我想在我的应用程序信息（关于）页面中显示来自 AndroidManifest 的 android:versionName。有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:14:54.413

`android:versionName="@string/verName"`

在代码中获取版本名称如下

`String version = getResources().getString(R.string.verName);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:14:15.740

```
 try {
        PackageInfo pi = getPackageManager().getPackageInfo(getPackageName(), 0);
        version = pi.versionName;
    } catch (NameNotFoundException e) {
        version = "1.0";
    } 
```

# php - SQL 更新布尔值

> ID：13496207
> 
> 赞同：1
> 
> 时间：2012-11-21T15:12:08.987
> 
> 标签：php, mysql, codeigniter

我正在 Code Igniter 中构建一个应用程序。我在更新数据库中的布尔单元格时遇到问题。这是我的声明：

```
public function updateHide($id) {
        $sql = "UPDATE holiday_request SET hide = '1' WHERE holiday_request_id = " . (int)$id;
        $this->db->query($sql);
        echo $this->db->affected_rows();            
    } 
```

我正在使用受影响的行函数来快速检查 Firebug 是否影响了有效行。我已经打印出 SQL 语句并在 PHP Myadmin 中对其进行了测试，它工作正常，这意味着 ID 是正确的，并且数据库中有一个有效的行。我一生都无法弄清楚为什么表格没有更新。有人能指出我正确的方向吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:51:31.873

感谢所有帮助人员，但事实证明我是个白痴，并在没有意识到的情况下将数组传递给函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T15:26:35.260

For updates I think you should use the `exec` method instead:

```
$affected_rows = $this->db->exec($sql); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T15:27:32.650

尝试将数据库加载到您的函数中，如下所示

```
public function updateHide($id) {
  $this->load->database();
  $sql = "UPDATE holiday_request SET hide = '1' WHERE holiday_request_id = " . (int)$id;
  $this->db->query($sql);
  echo $this->db->affected_rows();            
} 
```

[从这里](http://www.phpeveryday.com/articles/CodeIgniter-Form-Updating-Data-P290.html)得到提示

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-21T15:14:53.660

将值设置为 TRUE 而不是“1”

```
public function updateHide($id) {
    $sql = "UPDATE holiday_request SET hide = TRUE WHERE holiday_request_id = " . (int)$id;
    $this->db->query($sql);
    echo $this->db->affected_rows();            
} 
```

# web-services - 调用 Web 服务时出现 Coldfusion 异常

> ID：13496208
> 
> 赞同：1
> 
> 时间：2012-11-21T15:12:10.357
> 
> 标签：web-services, coldfusion, jboss, axis

我编写了一个使用简单 web 服务的 portlet。当我将它部署到 jboss 中时，它会抛出异常。我尝试将coldfusion.jar 添加到构建路径中。但没有运气。谁可以帮我这个事？

```
2012-11-21 20:31:03,919 ERROR [STDERR] Caused by: org.apache.axis.ConfigurationException: java.lang.ClassNotFoundException: No ClassLoaders found for: coldfusion.xml.rpc.RequestHeaderHandler
java.lang.ClassNotFoundException: No ClassLoaders found for: coldfusion.xml.rpc.RequestHeaderHandler
    at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:212)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:521)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:415)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at org.apache.axis.utils.ClassUtils$2.run(ClassUtils.java:187)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.axis.utils.ClassUtils.loadClass(ClassUtils.java:160)
    at org.apache.axis.utils.ClassUtils.forName(ClassUtils.java:100)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getJavaClass(WSDDDeployableItem.java:353)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.makeNewInstance(WSDDDeployableItem.java:295)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getHandler(WSDDDeployment.java:394)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:276)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDChain.makeNewInstance(WSDDChain.java:125)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getGlobalRequest(WSDDDeployment.java:473)
    at org.apache.axis.configuration.FileProvider.getGlobalRequest(FileProvider.java:269)
    at org.apache.axis.AxisEngine.getGlobalRequest(AxisEngine.java:365)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:126)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at com.test.MyWebserviceSoapBindingStub.addition(MyWebserviceSoapBindingStub.java:121)
    at com.test.SampleWebservice.doView(SampleWebservice.java:30)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:348)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:253)
    at org.apache.pluto.driver.services.container.FilterChainImpl.doFilter(FilterChainImpl.java:163)
    at org.apache.pluto.driver.services.container.FilterChainImpl.processFilter(FilterChainImpl.java:91)
    at org.apache.pluto.driver.services.container.FilterManagerImpl.processFilter(FilterManagerImpl.java:105)
    at org.apache.pluto.container.driver.PortletServlet.dispatch(PortletServlet.java:340)
    at org.apache.pluto.container.driver.PortletServlet.doPost(PortletServlet.java:267)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:557)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:481)
    at org.apache.pluto.driver.container.DefaultPortletInvokerService.invoke(DefaultPortletInvokerService.java:233)
    at org.apache.pluto.driver.container.DefaultPortletInvokerService.render(DefaultPortletInvokerService.java:117)
    at org.apache.pluto.container.impl.PortletContainerImpl.doRender(PortletContainerImpl.java:157)
    at org.apache.pluto.driver.tags.PortletTag.doStartTag(PortletTag.java:165)
    at org.apache.jsp.ns360.portletfrag_jsp._jspx_meth_pluto_005fportlet_005f0(portletfrag_jsp.java:393)
    at org.apache.jsp.ns360.portletfrag_jsp._jspService(portletfrag_jsp.java:166)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:557)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:481)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.ns360.portalhome_jsp._jspx_meth_c_005fforEach_005f0(portalhome_jsp.java:395)
    at org.apache.jsp.ns360.portalhome_jsp._jspx_meth_c_005fwhen_005f1(portalhome_jsp.java:296)
    at org.apache.jsp.ns360.portalhome_jsp._jspx_meth_c_005fchoose_005f0(portalhome_jsp.java:132)
    at org.apache.jsp.ns360.portalhome_jsp._jspService(portalhome_jsp.java:85)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)
    at org.apache.pluto.driver.PortalDriverServlet.doGet(PortalDriverServlet.java:214)
    at org.apache.pluto.driver.PortalDriverServlet.doPost(PortalDriverServlet.java:233)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.pluto.driver.ns.PortalFilter.doFilter(PortalFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.newscale.bfw.signon.filters.AuthenticationFilter.doFilter(AuthenticationFilter.java:321)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 
```

谢谢你。

# typescript - 无法让打字稿调试工作

> ID：13496210
> 
> 赞同：1
> 
> 时间：2012-11-21T15:12:17.287
> 
> 标签：typescript

我安装了 0.81 并将项目执行设置为“调试”，我的项目文件中包含 typescript 编译器内容并正在创建源映射，但没有进行调试。

断点未命中，错误错误进入 .js 文件而不是 .ts 文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T22:09:28.077

为什么它对我不起作用的两件事：

1.  确保您直接引用 .js 文件并且您没有使用 Mvc 包功能。
2.  使用 IE10 以便 VS 可以挂接到您的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:14:47.867

我假设您使用的是 Visual Studio，在这种情况下，您只能通过支持 SourceMap 的浏览器来调试 TypeScript。一个很好的例子是 Chrome Canary。

如果您使用 chrome，您将无法通过 VS 的环境进行调试，但您将能够通过开发人员工具进行调试。

您现在还可以在 IE 中通过最新的 TS 版本通过 Visual Studio 执行此操作。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:45:01.410

我发现了这个问题。它实际上与此项目相关：[Web Essentials linking ts files](https://stackoverflow.com/questions/13461758/referencing-typescript-file-includes-whole-file-in-output)。

基本上没有在该链接上发布修复程序，Web Essentials 正在编译 js 文件，其中包含文件中包含的所有链接文件。通过使用该更新版本，它只编译当前文件。一旦这个问题得到修复，那么 IE 10、Chrome 和新的 Firefox 版本都将按照设计的方式调试到 TS 文件中，这是优秀的。

感谢您的提示！

# python - 使用 Python ElementTree 找不到我要查找的属性

> ID：13496213
> 
> 赞同：0
> 
> 时间：2012-11-21T15:12:32.573
> 
> 标签：python, elementtree

![在此处输入图像描述](../Images/86f677b02c147072dc9ef87cef9c213b.png)我的 xml 看起来像这样：

`<fiscalYear start="2012-01-01" end="2012-12-31">2012`

`<startingBalance account="1220" balance="3453871"/>` 查看图片了解更多信息

现在我想查找前帐户“1220”是否具有 2012 年财政年的起始余额。问题是我在 xml 中有几个财政年，而在属性“起始余额”中我没有要查找的年份。因此，在某种程度上，我必须同时查看“fiscalYear”和“startingBalance”，但我不知道如何使用 ElementTree。

我试过这样做：

```
fiscalYear = xmltree.iter('fiscalYear')
   startingBalance = 0
   for i in fiscalYear:
          if "startingBalance" in i.attrib:
                 print("found something")
                 if i.attrib['account'] == accountNr:
                        startingBalance = i.attrib['balance']
                 else:
                        print("No startingBalance found for account:", accountNr,"year:",year )
          else:
                 print("No startingBalance found for year:",year ) 
```

但它只是打印出“没有找到一年的起始余额”5 次（xml 中的 5 个会计年度）

有人知道如何解决它...？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:24:20.427

如果我正确地阅读了您的 xml，那么 startingBalance 不是属性，而是标签。将您的 if 语句更改为

```
if "startingBalance" in i.tag: 
```

看看这是否没有帮助。

我用我在这里的一些 xml 测试了你的代码，另一个问题是你的代码没有到达会计年度的子元素。您必须添加另一行迭代子元素。像这样的东西：

```
 for i in fiscalYear:
       for subele in i:   
           if "startingBalance" in subele.tag:
               print("found something")
               if subele.attrib['account'] == accountNr:
                    startingBalance = subele.attrib['balance']
                    #etc, etc 
```

# ios - 适用于 iPhone 和 iPad 的 Xib

> ID：13496218
> 
> 赞同：4
> 
> 时间：2012-11-21T15:12:58.173
> 
> 标签：ios, xcode, xib, nib

我有一个适用于 iPhone 的 Xib，我需要一个类似的 iPad 视图，只有 iPad 大小。

这样做的最佳方法是什么？您能否将两个视图放在同一个 Xib 中并以某种方式指定显示哪一个？

还是我需要制作 2 个 Xib 文件和 2 个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T18:36:58.990

我最终使用了 1 节课。我将两个 XIB 文件的文件所有者设置为同一类。

我只是使用了 XIB 文件的名称

所以我有 2 个 xibFiles，iPadXib.xib 和 iPhoneXib.xib

```
NSString *nibFileName = (iPadVersion) ? @"iPadXib" : @"iPhoneXib";

ViewControllerName *vc = [[ViewControllerName alloc] initWithNibName:nibFileName bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:31:32.810

> 还是我需要制作 2 个 Xib 文件和 2 个类？

实际上，使用三个类和 2 个 xib。像这样：

1.  我的课
2.  MyClass_iPhone：我的班级
3.  MyClass_iPad：我的班级

还有两个xib。它为您提供了更多的灵活性。保留 MyClass 上的通用逻辑，并将其他两个子类用于 iPhone 和 iPad 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:52:19.480

如果你想要 iPhone 和 ipad 创建通用应用程序。只创建一个XIB，所有控件只创建一次，不需要单独做。在编码中绘制框架。即，为 iphone 和 ipad 创建单独的框架。

# bash - 如何对 find 的输出进行排序？

> ID：13496221
> 
> 赞同：0
> 
> 时间：2012-11-21T15:13:01.790
> 
> 标签：bash, sorting, find

在下面的代码段中，我合并了许多文件，中间有换行符。但是文件的顺序并不代表我的目录结构。

如下所示调用`sort`不起作用。我究竟做错了什么？

```
find ./lib/app -type f | sort | \
xargs awk 'ENDFILE {print ""} {print}' > myFile 
```

当前文件顺序：

```
./lib/app/b/file
./lib/app/config.json
./lib/app/d/file 
```

我需要的文件顺序：

```
./lib/app/config.json
./lib/app/b/file
./lib/app/d/file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:14:37.877

```
find ./lib/app -type f | sort | tee myFile 
```

恕我直言，那里不需要[awk](/questions/tagged/awk "显示标记为“awk”的问题")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:29:43.193

您似乎希望将子目录中的文件列在子目录中的任何文件之前。这根本不是一个标准的排序。我认为该算法在概念上应该是：

1.  如果两个文件名之间最长的公共初始子路径是`X`，则名称是`X/A`和`X/B`。
2.  如果两者都`A`包含`B`一个或多个斜杠，则进行直字符串比较（of`A`和`B`）。
3.  否则，如果既不`A`也不`B`包含斜线，则进行直字符串比较（of`A`和`B`）。
4.  否则，如果`A`包含斜线`B`且不包含斜线，则在 .`B`之前排序`A`。
5.  Else (`B`包含一个斜线并且`A`没有，所以) 排序`A`在 之前`B`。

在样本数据中：

*   F1 =`./lib/app/b/file`
*   F2 =`./lib/app/config.json`
*   F3 =`./lib/app/d/file`
*   F4 =`./lib/app/b/a/file`
*   F5 =`./lib/app/b/other`

比较：

```
Names      X             A              B              Rule   Result
F1, F2    ./lib/app/     b/file         config.json    4      F2 < F1
F1, F3    ./lib/app/     b/file         d/file         2      F1 < F3
F1, F4    ./lib/app/b/   file           a/file         5      F1 < F4
F1, F5    ./lib/app/b    file           other          3      F1 < F5
F2, F3    ./lib/app/     config.json    d/file         5      F2 < F3
F2, F4    ./lib/app/     config.json    b/a/file       5      F2 < F4
F2, F5    ./lib/app/     config.json    b/other        5      F2 < F5
F3, F4    ./lib/app/     d/file         b/a/file       2      F4 < F3
F3, F5    ./lib/app/     d/file         b/other        2      F5 < F3
F4, F5    ./lib/app/b    a/file         other          3      F5 < F3 
```

在 Perl 中编码：

```
#!/usr/bin/env perl
use strict;
use warnings;

my @files;
while (<>)
{
    chomp;
    push @files, $_;
}

sub pathsorter
{
    my(@abits) = split /\//, $a;
    my(@bbits) = split /\//, $b;

    my $na = scalar(@abits);
    my $nb = scalar(@bbits);
    my $nbits = (($na < $nb) ? $na : $nb) - 1;
    my $i;
    for ($i = 0; $i < $nbits; $i++)
    {
        last if ($abits[$i] ne $bbits[$i]);
    }

    # abits[0..$i] == bbits[0..$i] == X
    return $a cmp $b if ($i < $nbits);
    return $a cmp $b if ($na == $nb && $i == $nbits);
    return -1 if ($na < $nb);
    return +1 if ($na > $nb);
    return 0;
}

print "$_\n" foreach (sort pathsorter @files); 
```

输入：

```
./lib/app/b/file
./lib/app/config.json
./lib/base/basename
./lib/app/d/file
./lib/app/b/a/file
./lib/app/b/other
./lib/app/animosity
./lib/base/basename 
```

输出：

```
./lib/app/animosity
./lib/app/config.json
./lib/app/b/file
./lib/app/b/other
./lib/app/b/a/file
./lib/app/d/file
./lib/base/basename
./lib/base/basename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T18:01:57.457

假设您需要首先排序的斜杠较少的路径名，然后：

```
find ... |
perl -e 'print sort {(($a =~ tr{/}{/}) <=> ($b =~ tr{/}{/})) or ($a cmp $b)} <>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:38:33.897

我发现我可以这样做以首先从最顶层目录获取文件，然后按字母顺序按子文件夹：

```
find ./subfolder ./subfolder/*/ -maxdepth 1 -type f 
```

如果目录结构发生变化，它可能会停止，但如果有人有更好的主意，请告诉我。

# django - Allauth 注册模板，一页上有普通帐户和社交帐户

> ID：13496224
> 
> 赞同：2
> 
> 时间：2012-11-21T15:13:12.310
> 
> 标签：django, django-templates, django-authentication

我发现 allauth 模板有点难以理解，并且无法真正弄清楚如何创建一个允许在社交身份验证（在我的情况下为 FB）和普通身份验证（电子邮件等）之间进行选择的模板，比如 Stackoverflow 上的那个。

基本上我想使用`{{ form.as_p }}`注册视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T07:21:54.890

您可以覆盖[此](https://github.com/pennersr/django-allauth/blob/master/allauth/templates/account/login.html)模板 ( `account/login.html`)。

对于普通的登录表单，您可以从上述模板中提取以下代码段：

```
{% load i18n %}
<form class="login" method="POST" action="{% url 'account_login' %}">
  {% csrf_token %}
  {{ form.as_p }}
  {% if redirect_field_value %}
  <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
  {% endif %}
  <a class="button secondaryAction" href="{% url 'account_reset_password' %}">{% trans "Forgot Password?" %}</a>
  <button class="primaryAction" type="submit">{% trans "Sign In" %}</button>
</form> 
```

对于 facebook 社交身份验证，您可以根据[此模板](https://github.com/pennersr/django-allauth/blob/master/allauth/templates/socialaccount/snippets/provider_list.html)获得以下内容：

```
{% load socialaccount %} 
<a title="Facebook" class="socialaccount_provider facebook" 
     href="{% provider_login_url facebook process='login' %}">Facebook</a> 
```

提到的两个模板都由 django-allauth 提供，但可以通过向`templates`django 应用程序添加文件夹并创建相同的目录结构来覆盖，在这种情况下：

```
myapp
  |_templates
        |_account
             |_login.html 
```

并将您的代码放入`login.html`. 这同样适用于您要覆盖的任何其他模板。[以下](https://github.com/pennersr/django-allauth/tree/master/allauth/templates)是 的模板`django-allauth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T16:20:41.403

您应该为“正常身份验证”的用户/密码创建一个表单，然后为社交身份验证页面添加链接。

```
<form>
 user... pass...
</form>
<a href="">Facebook</a> 
```

# php - oAuth 教程需要在 PHP 中用于 Twitter 和 Facebook

> ID：13496225
> 
> 赞同：6
> 
> 时间：2012-11-21T15:13:18.827
> 
> 标签：php, facebook, twitter, oauth

我有一个问题，他们是否有任何好的和简单的教程来为 Twitter 和 Facebook 做 oAth ......我想做一个应用程序，我想执行许多操作，但一开始我被卡住了如何做到这一点.. 我用谷歌搜索但是我没有找到任何可靠的来源，或者我没有得到任何简单的解决方案是他们的任何好的教程如何为 twitter 和 Facebook 实现 oAth ......我是 php 新手，请告诉我......如果有人给我，我非常感激我想提前感谢我的适当细节。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:20:47.150

oAuth 并不容易快速理解。

[也许这是对 Twitter 有用的教程](http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/)。

[还有一个用于 facebook。](http://net.tutsplus.com/tutorials/php/how-to-authenticate-your-users-with-facebook-connect/?search_index=3)

我爱Tuts+

# java - 系统属性为空，即使它是在命令行中定义的

> ID：13496226
> 
> 赞同：4
> 
> 时间：2012-11-21T15:13:21.140
> 
> 标签：java

我正在调试大型系统中的问题。我能够在一个相当基本的 java 功能中找到问题 - 应用程序以 -D 选项启动以指定一些系统属性。但是，在运行时，未设置所述属性并且它们的值为空。

试图重现该问题，我创建了以下非常简单的应用程序：

```
 public static void main(String[] args) {
    String propName = "sysprop";
    String propValue = System.getProperty(propName);
    System.out.println(propName + "=" + propValue);
  } 
```

我使用以下命令行启动应用程序，令我惊讶的是得到了相同的结果：

> java -cp javaapplication8.jar javaapplication8.JavaApplication8 -Dsysprop="一些值"
> 
> 系统属性=空

显然我遗漏了一些明显的东西（或缺乏一些基本知识），但它是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:16:04.950

您在类名`-D` *之后*指定，因此它被视为常规命令行参数以传递给应用程序本身。如果您打印出`args`.

像这样运行应用程序：

```
java -cp javaapplication8.jar -Dsysprop="some value" javaapplication8.JavaApplication8 
```

*所有*适用于环境而不是应用程序的参数都应该在类名之前。如果你只运行`java`，你会看到这样的使用帮助：

```
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)
where options include
[...] 
```

# ruby-on-rails - 如何将form_for的对象传递给文件`action_name.js.erb`中的部分渲染

> ID：13496229
> 
> 赞同：0
> 
> 时间：2012-11-21T15:13:31.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I have used an action to display all topics of a course, when that course is selected. 现在我想使用虚拟属性`number_question`在表单上显示一个字段，每个主题使用可以输入一个数字。我的模型：

```
class GeneralExam < ActiveRecord::Base
  attr_accessible :course_id, :description
  attr_accessor :numbe_question
end 
```

这是我的表格：

```
<%= simple_form_for @general_exam, defaults: { error: false } do |f| %>
            <fieldset>
                <legend>General Exam information</legend>
                <%= render 'shared/error_messages', object: f.object %>
                    <%= f.association :course, collection: current_user.courses, prompt: "Choose Course for exam"  %>
                    <%= f.input :name %>
                    <%= f.input :description, input_html: { rows: 2, class: 'span6' } %>
            </fieldset>

            <fieldset>
                <legend>Choose number question for topics</legend>
                <div id="list_topics">
                </div>
            </fieldset>
            <%= f.submit class: "new_resource" %>
<% end %> 
```

这是我的行动：

```
 def update_topics
    @course = Course.find(params[:course_id])
    @topics = @course.topics
  end 
```

我的`update_topics.js.erb`

```
$('#list_topics').html("<%= j (render('general_exams/list_topics')) %>") 
```

我的`_list_topics.html.erb`部分：

```
<% @topics.each do |topic| %>
    <h5><%= topic.name %></h3>
    <%# f.input :number_question, input_html: { name: "number_question[#{topic.id}]" } %>
<% end %> 
```

但是如果我想显示输入字段，我必须有一个`f`对象，但是当我渲染时`_list_topics`，我没有。所以我想问一下如何将`f`形式对象传递给部分`_list_topics`？

或者有人可以告诉我如何使用 jquery`h5`在表单上的元素后添加输入字段，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:09:41.847

我认为有一些不同的方法可以解决这个问题。其中两个（我：

1）您可以定义一个不同的表单来将 number_question 数据发布到另一个控制器操作。2）当用户完成更新字段值时，使用jquery的更改回调提交number_question。

我认为第一个选项更好，更容易编码。你最终会得到这样的东西：

```
<%= simple_form_for @general_exam, defaults: { error: false } do |f| %>
    <fieldset>
        <legend>General Exam information</legend>
        <%= render 'shared/error_messages', object: f.object %>
            <%= f.association :course, collection: current_user.courses, prompt: "Choose Course for exam"  %>
            <%= f.input :name %>
            <%= f.input :description, input_html: { rows: 2, class: 'span6' } %>
    </fieldset>
    <%= f.submit class: "new_resource" %>
<% end %> 
```

然后，您将在同一模板上使用不同的表单（提交主题编号）：

```
<%= simple_form_for @general_exam, url: whatever_is_your_new_topics_number_path, defaults: { error: false } do |f| %>
    <fieldset>
        <div id="list_topics">
        </div>
    </fieldset>
<% end %> 
```

您将继续使用您的 JS 部分响应，将 div 的内容相应地替换为主题数据。

# backbone.js - 主干.js 没有获取模型上下文

> ID：13496231
> 
> 赞同：2
> 
> 时间：2012-11-21T15:13:47.787
> 
> 标签：backbone.js, handlebars.js

请看下面的[小提琴](http://jsfiddle.net/PezzA/Gay4b/20/)。

HTML

```
<script id="person" type="text/x-handlebars-template">        
    <div>Title : {{title}} </div>  
    <div>First Name : {{firstname}}</div>
    <div>Last Name : {{lastname}}</div>                      
</script>
<div id="people"></div> 
```

JS

```
(function ($) {
       var personTemplate= Handlebars.compile($("#person").html());

       var Person= Backbone.Model.extend({
           title: null,
           firstname : "",
           lastname : ""
        });

        PersonView = Backbone.View.extend({
            tagName: "div",
            template:  personTemplate,
            render: function () {
                $(this.el).html(this.template(this.model));
                return this;
            }
        });

        $(document).ready(function () {
        var AppView = Backbone.View.extend({
            initialize: function () {              
                var passView = new PersonView (
                    { model: new Person({ title: "Mr",
                                          firstname : "John",
                                          lastname : "Smith"})
                    });

                $('#people').append(passView.render().el.outerHTML);
            }
        });

        var App = new AppView();
    });
})(jQuery); 
```

我已经创建了一个基本模式和视图，但是模板没有获取视图的参数。如果我直接在人模型上设置值，它会找到它们。但如果我通过模式的新实例设置它们（或者即使我使用 init 方法对它们进行 .set() 设置也不会。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:38:15.017

为了获取与模板一起使用的对象，您需要调用模型的[toJSON](http://documentcloud.github.com/backbone/#Model-toJSON)方法。

例如

```
PersonView = Backbone.View.extend({
            tagName: "div",
            template:  personTemplate,
            render: function () {
                $(this.el).html(this.template(this.model.toJSON()));
                return this;
            }
        }); 
```

如果您在 Firebug 中检查您的模型之一（或只是将其输出到控制台），您会注意到有更多的属性，而不是您指定的那些，并且您指定的值实际上包含在属性*attributes*下，调用`toJSON`返回一个具有您指定的模型*“值”的对象。*

# sql - 使用 GENERATED BY DEFAULT AS IDENTITY 列更新表

> ID：13496234
> 
> 赞同：0
> 
> 时间：2012-11-21T15:13:53.770
> 
> 标签：sql, derby

我有一个使用 Derby 的数据库，并试图在一个表上执行一个更新语句，该表的列具有“GENERATED BY DEFAULT AS IDENTITY”。我不是要更新此专栏，而是要更新所有其他专栏。

我似乎找不到正确的语法来更新其余列，而不会出现诸如“尝试修改标识列”之类的错误。

尝试更新我一直在使用该`UPDATE`命令的表，

```
UPDATE TableName SET Name = '...', ..., WHERE Name = '...' 
```

表中的第一个值是具有`GENERATED BY DEFAULT AS IDENTITY`设计的 ID 字段，我不想更新此值，我只想更新`UPDATE`命令中的所有其他字段。我不知道如何跳过更新此值或简单地更新 ID 字段本身。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:20:57.377

所以，这就是我所做的；它工作得很好。你能确定你在做什么与这不同吗？

```
ij> create table t1 (a int generated by default as identity, b int);
0 rows inserted/updated/deleted
ij> insert into t1 (b) values (1);
1 row inserted/updated/deleted
ij> update t1 set b=2 where b = 1;
1 row inserted/updated/deleted
ij> select * from t1;
A          |B          
-----------------------
1          |2          
1 row selected 
```

# jquery - 单击时停止“选择”jqGrid行，同时仍保留编辑

> ID：13496235
> 
> 赞同：2
> 
> 时间：2012-11-21T15:13:53.350
> 
> 标签：jquery, jqgrid

我有一个三列的 jqGrid。其中一列是为单元格编辑设置的，如下所示：

```
$('#myGrid').jqGrid({
    ...
    editUrl: 'clientArray',
    cellEdit: true,
    cellsubmit: 'clientArray',
    colModel: [
        {name: 'Col1'},
        {name: 'Col2'},
        {
             name: 'Col3',
             editable: true,
             editrules: {required: true, number: true}
         }
    ]
}); 
```

当用户单击第三列中的单元格时，编辑器会自动出现。但是，当用户单击某一行时，该行也会突出显示（“选中”）。**如果用户单击可编辑列中的单元格，是否可以禁用此突出显示同时仍允许显示单元格编辑器？**

我试过了

```
$('#myGrid').jqGrid({
    ...
    beforeSelectRow: function() { return false; }
}) 
```

...但这会禁用编辑以及选择行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:33:38.263

您没有发布任何代码来显示您*如何*实现内联编辑。有许多不同的实现使用内联编辑。最典型的是

*   在行选择上开始编辑，按 保存`Enter`，在丢弃先前未保存行中的更改后选择另一行
*   在行选择上开始编辑，按 保存`Enter`，选择另一行后静默保存上一个未保存行中的更改
*   双击行开始编辑，按 保存`Enter`，选择另一行后丢弃先前未保存行中的更改
*   双击行开始编辑，按 保存`Enter`，选择另一行后静默保存上一个未保存行中的更改
*   使用附加列`formatter: "actions"`
*   inlineNav方法的[使用](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)
*   ...

例如，如果您使用上述列表的第一个版本并且您不想进行任何行选择，则可以将代码从[onSelectRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)移动到`beforeSelectRow`.

[该演示](http://www.ok-soft-gmbh.com/jqGrid/InlineEditingWithoutSelection.htm)演示了一个可能的实现：

```
beforeSelectRow: function (rowid) {
    var $this = $(this),
        editingRowId = $this.jqGrid("getGridParam", "editingRowId"),
        setEditingRowId = function (newId) {
            $this.jqGrid("setGridParam", {editingRowId: newId});
        };

    if (rowid !== editingRowId) {
        if (editingRowId !== undefined) {
            $this.jqGrid("restoreRow", editingRowId);
        }
        $this.jqGrid("editRow", rowid, {
            keys: true,
            oneditfunc: function (id) {
                setEditingRowId(id);
            },
            aftersavefunc: function () {
                setEditingRowId();
            },
            afterrestorefunc: function () {
                setEditingRowId();
            }
        });
    }

    return false;
} 
```

**更新**：如果您想使用单元格编辑模式，相应的实现会更加困难。不过，您可能应该主要遵循[答案](https://stackoverflow.com/a/9513549/315935)中的想法。[该演示](http://www.ok-soft-gmbh.com/jqGrid/CellEditingWithoutSelection.htm)演示了您需要的部分代码。它不使用任何键盘绑定。

```
beforeSelectRow: function (rowid, e) {
    var $this = $(this),
        $td = $(e.target).closest("td"),
        $tr = $td.closest("tr.jqgrow"),
        iRow, iCol;

    if ($tr.length > 0) {
        iRow = $tr[0].rowIndex;
        iCol = $.jgrid.getCellIndex($td[0]);
        $this.jqGrid('setGridParam', {cellEdit: true});
        $this.jqGrid('editCell', iRow, iCol, true);
        $this.jqGrid('setGridParam', {cellEdit: false});
    }

    return false;
} 
```

# css - E > E:nth-child(2) 模式不起作用。如何解决？

> ID：13496238
> 
> 赞同：0
> 
> 时间：2012-11-21T15:14:07.513
> 
> 标签：css, css-selectors, pseudo-class

我有一个结构：

```
<div id="outer">
    <div> <!-- first div -->
        <div>  <!-- second div -->
        </div>
    </div>
</div> 
```

我想使用模式将样式应用于第**一个**和**第二个**div `E > E:nth-child(n)`。但它不适用于**第二个**div，仅适用于**第**一个。

```
/* this works */
#outer > div:nth-child(1) {
    border: 1px solid red;
    padding: 10px;
}

/* this doesn't work */
#outer > div:nth-child(2) {
    border: 1px solid green;
    padding: 10px
} 
```

为什么不起作用？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:15:59.957

试试这个：

```
#outer > div:nth-child(1) > div:nth-child(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:16:35.967

第二个 div 不是来自`#outer`. 因此，您的选择器`#outer > div`不会影响第二个 div，因为`>`仅选择**直接**子级。也许你可以使用

```
/* this works */
#outer > div:nth-child(1) {
    border: 1px solid red;
    padding: 10px;
}

/* this should also work */
#outer > div:nth-child(1) > div:nth-child(1) {
    border: 1px solid green;
    padding: 10px
} 
```

# linux - 弱符号、共享库和 dlopen

> ID：13496245
> 
> 赞同：1
> 
> 时间：2012-11-21T15:14:27.810
> 
> 标签：linux, dll, linker, shared-libraries, weak-references

我有一个带有弱符号的二进制文件，我希望能够在运行时将其与运行相关的共享库链接。

```
$nm testrun
...         
w basic2.test
... 
```

我的第一个测试是`.o`在静态链接时使用一个文件，该文件有效，但我需要共享它。

因此，我的第二个测试是获得一个定义了该符号的共享库，并在编译时将其与`-lmy`(libmy.so) 链接，这实际上也很有效。

第三步尝试在编译时不链接并使用 ld_preload 技巧，但这不起作用。

```
nm libmy.so
...
00000550 T basic2.test
... 
```

我真的不知道为什么这个特定的不工作，看起来动态加载器应该有足够的信息来使用 libmy.so 中的那个设置 testruns 弱符号。

我的最终目标，我想这需要更多的工作是在启动时加载一个小函数，该函数使用 dlsym 检查适当的符号并将其设置在那里。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:31:22.937

看来您可能需要与手册[页](http://www.kernel.org/doc/man-pages/online/pages/man8/ld-linux.so.8.html)`LD_DYNAMIC_WEAK`一起使用：`LD_PRELOAD`

> LD_DYNAMIC_WEAK（自 2.1.91 以来的 glibc）**允许覆盖弱符号**（恢复到旧的 glibc 行为）。出于安全原因，从 glibc 2.3.4 开始，对于 set-user-ID/set-group-ID 二进制文件，LD_DYNAMIC_WEAK 将被忽略。

注意：这可能是一个错字，但你应该使用`-lmylib.so`而不是`-Lmylib.so`

# objective-c - 在 Objective C 中使用 Open Graph 通过 facebook ID 标记朋友

> ID：13496248
> 
> 赞同：0
> 
> 时间：2012-11-21T15:14:32.213
> 
> 标签：objective-c, facebook-graph-api, facebook-opengraph, facebook-ios-sdk

`NSArray * tags`of`FBOpenGraphAction`期望什么样的元素？从[Open Graph Explorer](https://developers.facebook.com/tools/explorer/)工具看来，它似乎只需要一些 facebook ID 作为素材。但是，当这样做时

```
id<OpenGraphObject> event = (id<OpenGraphObject>)[FBGraphObject graphObject];
event.url = @"http://example.com/obj1234?fb:app_id=1111&og:type=myapp:share";
id<OpenGraphShareAction> action = (id<OpenGraphShareAction>)[FBGraphObject graphObject];
action.object = event
action.tags = [NSArray arrayWithObjects:[NSNumber numberWithInt:3300252], [NSNumber numberWithInt:585025503], nil]; 
```

然后发布

```
[FBRequestConnection
    startForPostWithGraphPath:@"me/myapp:share"
    graphObject:action
    completionHandler: ...
 ]; 
```

但是，这不起作用-`[__NSCFNumber dataUsingEncoding:]: unrecognized selector sent to instance`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:42:36.723

看起来它不需要一个 NSNumber，而是一个 NSString。鉴于我们正在谈论 ID，这将非常有意义。

试试看，让我们知道结果如何

# installation - 安装 mapnik-rasterizers 失败

> ID：13496249
> 
> 赞同：0
> 
> 时间：2012-11-21T15:14:36.640
> 
> 标签：installation, mapnik

我想根据这里的 README 安装 mapnik-rasterizers：[https ://github.com/stellaeof/mapnik-rasterizers](https://github.com/stellaeof/mapnik-rasterizers)

现在的问题是“make install”给了我这个错误信息：

```
hiwi1102@hiwi1102:~/mapnik-rasterizers-master$ make install
make: mapnik-config: Kommando nicht gefunden
make: mapnik-config: Kommando nicht gefunden
make: mapnik-config: Kommando nicht gefunden
g++ -c  -fPIC -I/usr/include/agg2  -MMD -MP -MF .heatmap_datasource.cpp.d heatmap_datasource.cpp -o heatmap_datasource.os
In file included from rasterizer_datasource.hpp:11:0,
                 from heatmap_datasource.hpp:10,
                 from heatmap_datasource.cpp:7:
chained_datasource.hpp:12:30: schwerwiegender Fehler: mapnik/feature.hpp: Datei oder Verzeichnis nicht gefunden
Kompilierung beendet.
make: *** [heatmap_datasource.os] Fehler 1
hiwi1102@hiwi1102:~/mapnik-rasterizers-master$ 
```

有人可以帮我解决这个问题吗？

我的机器上运行了 python-mapnik2
apt-show-versions python-mapnik2 显示：python-mapnik2/precise uptodate 2.0.0+ds1-3build1
Ubuntu-Version：Ubuntu 12.04.1。

在“make install”之后这个fork（https://github.com/springmeyer/mapnik-rasterizers）的错误信息

```
hiwi1102@hiwi1102:~/mapnik-rasterizers-master$ make install 
make: mapnik-config: Kommando nicht gefunden
make: mapnik-config: Kommando nicht gefunden
make: mapnik-config: Kommando nicht gefunden
g++ -c  -fPIC -I/Users/dane/projects/mapnik/deps/agg/include  -MMD -MP -MF .heatmap_datasource.cpp.d heatmap_datasource.cpp -o heatmap_datasource.os
In file included from rasterizer_datasource.hpp:11:0,
                 from heatmap_datasource.hpp:10,
                 from heatmap_datasource.cpp:7:
chained_datasource.hpp:12:30: schwerwiegender Fehler: mapnik/feature.hpp: Datei oder Verzeichnis nicht gefunden
Kompilierung beendet.
make: *** [heatmap_datasource.os] Fehler 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:26:52.773

原作者目前没有维护光栅化程序代码。[请在https://github.com/springmeyer/mapnik-rasterizers](https://github.com/springmeyer/mapnik-rasterizers)使用我的叉子。根据您的 mapnik 版本，我需要对代码进行一些调整，因此请发布您的 mapnik 版本的问题以及基于尝试从我的 fork 编译的确切错误。

# ruby - 字段与方法 ruby on rails

> ID：13496253
> 
> 赞同：1
> 
> 时间：2012-11-21T15:14:47.127
> 
> 标签：ruby, mongoid

我有这堂课：

```
class User
  include Mongoid::Document
  field :revenues, :type => Integer, :default => nil
  attr_accessible :revenues
  #now method
  def revenues
   return 1
  end
end 
```

为什么在控制台中我得到`1`了`nil`？

```
1.9.3-p125 :002 > u.revenues
 => 1 
```

哪个优先，方法还是领域？如何创建具有与字段相同功能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:29:23.833

该`field`宏在 Mongoid::Document 中定义。它既不是 Ruby 的语法特性，也不是 Rails 的语法特性。

您的代码发生的情况如下：

1.  该`field`函数为您创建了一些方法，其中之一称为`revenues`.
2.  当您创建另一个名为 的方法时`revenues`，您实际上是在覆盖先前定义的方法，因此使其无用。

简短回答：我不了解有关 Mongoid 的 zip，但是即使您再次定义了一个名为`revenues`. 唯一的缺点是您无法再通过调用来访问它`myUser.revenues`。

尝试进行测试：使用符号访问您的字段，`some_user[:revenues]`看看会发生什么:)

最好的祝福

# javascript - 如何使用 Kendo UI 查询本地 websql 数据库

> ID：13496254
> 
> 赞同：10
> 
> 时间：2012-11-21T15:14:49.290
> 
> 标签：javascript, kendo-ui

如果这个问题对 SO 来说过于宽泛，请原谅我，但我正在努力寻找任何我需要的例子，并认为有人可能能够为我指明正确的方向。

我刚开始使用 Kendo UI 移动版，并试图找到一个教程或任何示例代码，用于在 kendo ui 移动版中创建/查询本地客户端 websql 数据库。文档中没有任何内容...

任何人都可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-21T15:48:56.320

您可以为 Kendo 数据源创建自定义传输。例如，在[transport.read](http://docs.kendoui.com/api/framework/datasource#transportread-objectstringfunction)中，您可以对 websql 数据库执行查询并返回结果：

```
var dataSource = new kendo.data.DataSource({
   transport: {
      read: function(options) {

        db.transaction(function(tx) {

          tx.executeSql('SELECT * from my_table', [], function(tx, result) {

             var data = [];
             // copy the rows to a regular array
             for (var i = 0; i < result.rows.length; i++) {
                data[i] = result.rows.item(i);
             }

             options.success(data); // return the data back to the data source
          });
        });
      }
   }
}); 
```

这是一个完整的 CRUD 演示：http: [//jsbin.com/azukin/4/edit](http://jsbin.com/azukin/4/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T08:19:58.677

使用 JayData，您只需几行代码即可完成，它不仅支持 websql，还支持 indexeddb [http://jaydata.org/blog/jaydata-kendo-ui-awesomeness](http://jaydata.org/blog/jaydata-kendo-ui-awesomeness)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T16:58:19.090

您还可以使用[PouchDB](http://pouchdb.com)，它可以将数据存储在 WebSQL 中。有[kendo-pouchdb](https://github.com/terikon/kendo-pouchdb)适配器将 PouchDB 数据库与 Kendo UI 或 Kendo Mobile 小部件连接起来。

这是读取和更新 PouchDB 中数据的 Kendo Grid[演示。](http://terikon.github.io/kendo-pouchdb/demo/kendo-pouchdb-grid.html)

PS我是kendo-pouchdb的作者。

# jquery - 如何获取和显示 Jpicker Alpha 值

> ID：13496255
> 
> 赞同：0
> 
> 时间：2012-11-21T15:14:51.793
> 
> 标签：jquery, jquery-plugins, ruby-on-rails-3.1, jpicker

我使用 Jpicker 已经有一段时间了，在今天之前，我的要求是只获取 6 位或 rgb 值并存储它们。但是，现在我也想使用 Alpha/透明度值。所以现在我的文本框应该包含 8 位而不是 6 位。为了启用 Alpha 支持，我确实在 Jpicker-1.1.6 中更改了这一行，js 在 $.fn.jPicker.defaults

```
 alphaSupport:true // at line# 1748 
```

这样做的原因是，尽管我也确实从 .erb 文件中启用了它，但 Alpha 并未显示。我的 .erb 文件中的代码如下所示

```
 $('Alpha').jPicker({
         window:{
                expandable:true
            },
            color:{
          //to enable Alpha support
                alphaSupport:true,
                active:new $.jPicker.Color({ ahex:'#ffcc00ff' })
            },
            position:{ x:$(this).offset.left + $(this).width(), y:($(this).offset.top - $(window).scrollTop()) + $(this).height() }

        },
        function (color, context) {
            var all = color.val('all');
                alert('Color chosen - hex: ' + (all && '#' + all.hex || 'none') + ' - alpha: ' + (all && all.a + '%' || 'none'));

            if (all.a != null)
            {
              var b =   Math.precision((all.a * 100) / 255, 0);
                alert(b);
            }

            $('#Commit').css(
                    {
                        backgroundColor:all && '#' + all.hex || 'transparent'
                    }); // prevent IE from throwing exception if hex is empty
        },
         // For testing purpose
        function (color, context) {
            if (context == LiveCallbackButton.get(0)) alert('Color set from button');
            var hex = color.val('hex');
            LiveCallbackElement.css(
                    {
                        backgroundColor:hex && '#' + hex || 'transparent'
                    }); // prevent IE from throwing exception if hex is empty
        },
        function (color, context) {
            alert('"Cancel" Button Clicked');
        }); 
```

好吧，在渲染的 Jpicker 实例中，我可以看到一个启用的 Alpha 部分和 6 位十六进制旁边的小文本框。同样在警报中，我得到了所有部分的价值。但是，我主要关心的是如何显示整个 8 位数字，并且我还想存储它们，因为我已经存储了 6 位数字。

那是我的文本字段生成的 HTML。

```
 <input id="app_setting_nav_background_color" class="colorInput Alpha" type="text" 
    value="000000" size="45" name="app_setting[nav_background_color]" maxlength="45" 
    style="background-color: rgb(0, 0, 0); color: rgb(255, 255, 255);"> 
```

所以简而言之，我想用现有的 RGB 颜色获得每个元素的 Alpha/透明度，比如“#000000f”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-03T19:22:50.300

你必须写：

```
window:{
     alphaSupport:true,
     expandable:true,
     position:{ x:$(this).offset.left + $(this).width(), y:($(this).offset.top - $(window).scrollTop()) + $(this).height() }
 },
 color:{
     active:new $.jPicker.Color({ ahex:'#ffcc00ff' })
 }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:28:41.607

我已经自己解决了，所以如果有人从 Jpicker 1.1.6 获取 Alpha 值有问题。可以执行以下操作，虽然它是一个不错的工具，但对我来说 Jpicker 网站上给出的设置不起作用，所以必须分叉插件默认功能。在我的 erb 文件中，我执行了以下操作。

```
 $('.Alpha').jPicker({

            window:{
                expandable:true
            },
            color:{
                alphaSupport:true,
                active:new $.jPicker.Color({ ahex:'#ffcc00ff' })
            },
            position:{ x:$(this).offset.left + $(this).width(), y:($(this).offset.top - $(window).scrollTop()) + $(this).height() }

        },
        function (color, context) {
            var all = color.val('all');
            if (all.a != null) {
                var c = calc_in_to_hex(all.a);
                 //embedding hex of Alpha with the original string of rgb Hex
                $(this).val($(this).val() + c);
            }

        });

// function to convert int to Hex and return it back
function calc_in_to_hex(color) {
    var result = (color | 0).toString(16);
    if (result.length == 1) result = ('0' + result);
    return result.toLowerCase();
} 
```

尽管大部分内容来自原始插件代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:01:06.083

jPicker 文档中解释了一种更简单的方法。

[http://www.digitalmagicpro.com/jPicker/#Live](http://www.digitalmagicpro.com/jPicker/#Live)

```
function (color, context) {
    // If single colorpicker is used then the index would be 0
    // Else jPicker maintains a list and appropriate index should be used for that
    alert($.jPicker.List[0].color.active.val('ahex'));
}); 
```

# android - Android 位图移位/移动问题

> ID：13496263
> 
> 赞同：3
> 
> 时间：2012-11-21T15:15:29.243
> 
> 标签：android, bitmap, android-canvas

我有一个我无法真正解决的问题。我创建了一个图形应用程序，其中包含具有大量数据点的数据。为了在图形中启用滚动，我创建了图形数据的位图，并根据用户输入将位图移动/移动到屏幕的右侧或左侧。位图始终是图形视图高度和图形视图宽度。当用户移动位图时，我移动位图：

memoryCanvas.drawBitmap(memoryBitmap, bitmapShift, 0.0f, paint);

其中 shift 是一个包含移位值的浮点值。

现在，在我尝试过的大多数设备上，它都非常好用。我已经在 HTC Desire、Galaxy Tab 和 Galaxy S 上进行了尝试。但是，在我自己的 Galaxy S 上进行测试时，我得到了我无法解释的奇怪结果。请注意，我的 Galaxy S 包含一个自定义 rom（使用 android 4.0.4），所以这可能是我得到这种行为的原因，但我仍然无法理解或正确缓解它。

因此，在正常的用例行为中，位图按 bitmapShift 像素数移动，然后我通过正常的线条绘制填充空白区域。但是当使用我的手机时，向任一方向缓慢拖动位图，因此 bitmapShift 值在 0.5 左右，位图不移动，或者只是有时移动。我比较了其他平台上的bitmapShift，它们在相同的范围内，缓慢拖动时为0.5。这种行为当然会搞砸我的画。在快速拖动时也会发生这种情况，但在缓慢拖动时最明显。

我无法真正弄清楚导致这种行为的原因。位图不会根据我的 bitmapShift 值移动。它适用于我尝试过的所有其他平台。如果我跳过使用位图，只根据移位值绘制线条，一切正常。

有谁知道什么可能导致这种行为？坐了几天试图弄清楚后，我有点跑了。关键代码如下。这段代码在我的 onDraw 函数中。

```
memoryCanvas.setBitmap(emptyBitmap); //First set another bitmap to clear 
memoryCanvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR); //Clear it
memoryCanvas.drawBitmap(memoryBitmap, bitmapShift, 0.0f, paint); //Draw shifted bitmap on it
memoryCanvas.drawLines(lineDrawPoints, 0 , cnt, paint); //Draw remaining lines
memoryCanvas.setBitmap(memoryBitmap); //Set the original 
memoryCanvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR); //Clear original
memoryCanvas.drawBitmap(emptyBitmap, 0.0f, 0.0f, paint); //Draw the final image                 
canvas.drawBitmap(memoryBitmap, 0, 0.0f, paint); //And finally draw on real canvas 
```

非常欢迎任何帮助、提示和建议。

干杯威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:01:44.840

当 Canvas 上只有一个简单的变换集时（一个简单的变换 = 仅平移、无旋转、无缩放），Android 的 2D 渲染库 Skia 会将位图与像素网格对齐。这意味着少于 1 个像素的移动可能根本不可见。一个愚蠢的解决方法是在绘制位图之前在 Canvas 上设置一个非常非常小的比例或旋转变换。这具有不将位图捕捉到像素网格的副作用。

我想我应该在 Paint 上添加一个新的 API，让应用程序对位图进行亚像素定位，无论设置什么变换。

# magento - Magento 函数 getMessages - 如何检测消息是否已设置

> ID：13496269
> 
> 赞同：2
> 
> 时间：2012-11-21T15:15:39.887
> 
> 标签：magento

有谁知道如何检测它的消息已设置？

我在核心/会话中发现了以下内容：

```
public function getMessages($clear=false) 
```

但是我现在如何检查是否有消息？

（我们用它来使缓存无效）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:01:51.643

感谢比西

```
Mage::getSingleton('core/session')->getMessages()->count() 
```

IF > 0 我们使我们的 FP 缓存（或块）无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:23:28.083

您需要检查每个会话命名空间（目录、结帐、核心、客户、标签...）的存储是否存在消息。EE 观察该`core_session_abstract_add_message`事件并写入一个 cookie，然后可以参考该 cookie 以确定是否有要显示的消息。如果您获得授权，请参阅`Enterprise_PageCache_Model_Container_Messages`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T15:35:10.093

你可以做：

```
Mage::getSingleton('core/session')->getMessages(); 
```

# nhibernate - nhibernate的自定义 查询

> ID：13496270
> 
> 赞同：1
> 
> 时间：2012-11-21T15:15:41.583
> 
> 标签：nhibernate, mapping, set, one-to-many, outer-join

我想对`ClassA.ClassBCollection`属性进行过滤和分页。我需要动态更改过滤。

默认查询将产生如下结果：

```
 select * from ClassA 
             left outer join ClassB 
             on id == FK_ClassB 
```

我可以以某种方式自定义对 nhibernate 集的查询吗？

**映射：**

```
<class name="ClassA">
    <property name="Name" />
    <set name="ClassBCollection">
      <key column="FK_ClassB" on-delete="cascade" />
      <one-to-many class="ClassB" />
    </set>
  </class>

  <class name="ClassB">
    <property name="Something"/>
  </class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:53:18.820

如果我明白你的问题...

> 我可以以某种方式自定义对 nhibernate 集的查询吗？

...正确，答案是否定的。

我的意思是，如果您考虑获取实例`ClassA`并对其`<set>`集合进行一些分页和过滤。这将始终在内存中完成。*（我们可以用我在末尾附加的映射做什么）*。

### 我们可以改变方法

在这种情况下，当您需要过滤器并对*集合*项进行分页时，我强烈建议您采用另一种方式。创建`Criteria`( `QueryOver`, `HQL`) 不是在 上`ClassA`而是在**`ClassB`**.

首先，我们必须扩展`ClassB`映射：

```
<class name="ClassB">
  <property name="Something" />
  <many-to-one name="ClassA" column="FK_ClassB" fetch="join" />
</class> 
```

然后创建一个`Criteria`这样的

```
var criteria = NHSession.Current.CreateCriteria<ClassB>();

criteria
    .Add(new InExpression("ClassA", new object[] {1})) // id of one or more ClassA
    .AddOrder(new Order("Something", true))            // Order By
    .SetFirstResult(2)                                 // Skip
    .SetMaxResults(10);                                // Take

var list = criteria.List<ClassB>(); 
```

因为我们使用了 ClassA`fetch="join"`的映射，所以生成的 SQL 语句将与此问题中的第一个片段非常相似。

所以这样一来，我们就可以实现想要的SQL Select，但是不能`ClassA.ClassBCollection`直接使用。我们是这样做的...

### 笔记：

*我们可以影响`<set>`映射的过滤器/分页是 where 子句中的静态过滤器和获取值的样式。*

*当加载`ClassBCollection`为`ClassA`. 它可能就像`where="IsActive=true"`*

*如果 ClassA 可以在 ClassBCollection 中有很多项目，我们可以管理它们的加载方式。非常有效的方法是属性批大小[记录在这里](http://nhforge.org/doc/nh/en/index.html#performance-fetching-batch)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T23:04:01.873

> 我可以以某种方式自定义对 nhibernate 集的查询吗？

我不完全确定这意味着什么。如果您的意思是，我可以在集合上查询和使用 WHERE 子句吗，答案是肯定的。就是这样：

```
[TestFixture]
public class StackOverflowQuestion13496270Tests
{
    public ISession session;

    [SetUp]
    public void SetUp()
    {
        session = // Get the current NHibernate session
    }

    [Test]
    public void Query_ClassA()
    {
        var results = session.Query<ClassA>()
            .Where( x => x.ClassBCollection.Any( y => y.Name == "Bob" ) )
            .Fetch( x => x.ClassBCollection )
            .Skip( 0 )
            .Take( 50 )
            .ToList();
    }

    [Test]
    public void Query_ClassB()
    {
        var results = session.Query<ClassB>()
            .Where( x => x.Name == "Bob" )
            .Fetch( x => x.ClassAParent )
            .Skip( 0 )
            .Take( 50 )
            .ToList();
    }

    public class ClassA
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual IList<ClassB> ClassBCollection { get; set; }
    }

    public class ClassB
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }

        // Add this and the appropriate mapping modifications to be able to navigate back to the parent
        public virtual ClassA ClassAParent { get; set; }
    }
} 
```

# php - PHP如何正确显示汉字？

> ID：13496271
> 
> 赞同：12
> 
> 时间：2012-11-21T15:15:47.780
> 
> 标签：php

我有这些汉字：

```
汉字/漢字''test 
```

如果我做

```
echo utf8_encode($chinesevar); 
```

它显示

```
??/??''test 
```

或者即使我只是做一个简单的

```
echo $chinesevar 
```

它仍然显示一些奇怪的字符...

那么，如果不使用带有 UTF-8 的 <meta> 标记 .. 或带有 UTF-8 的 ini_set UTF-8 甚至 header() 的东西，我将如何显示这些汉字呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T15:20:04.227

简单的：

1.  将源代码保存为 UTF-8
2.  输出一个 HTTP 标头以向您的浏览器指定它应该使用 UTF-8 解释页面：

    ```
    header('Content-Type: text/html; charset=utf-8'); 
    ```

完毕。

`utf8_encode`用于将 Latin-1 编码的字符串转换为 UTF-8。你不需要它。

有关更多详细信息，请参阅[在 Web 应用程序中前后处理 Unicode](http://kunststube.net/frontback/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:21:01.557

看看您的文件是 UTF8 没有 BOM 并且您的网络服务器以 UTF-8 交付您的网站

**HTML：**

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
```

**在 PHP 中：**

```
header('Content-Type: text/html; charset=utf-8'); 
```

如果您使用数据库，如果您从数据库中读取文本，请查看您的数据库是 UTF-8 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-09T10:29:53.817

$chinesevarOK = mb_convert_encoding($chinesevar, 'HTML-ENTITIES', 'UTF-8');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T12:21:41.393

Perhaps take a look at the following solutions:

1.  Your *database*, *table* and *field* COLLATE should be utf8_unicode_ci
2.  Check if your records are showing the correct characters within the database...
3.  Set your html to utf8

4.  Add the following line to your php after connecting to the database

    mysqli_set_charset($con,"utf8");

[http://www.w3schools.com/php/func_mysqli_set_charset.asp](http://www.w3schools.com/php/func_mysqli_set_charset.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-30T04:06:28.067

将源代码保存为 UTF-8 无 BOM

# asp.net - Windows 服务立即启动和退出

> ID：13496278
> 
> 赞同：4
> 
> 时间：2012-11-21T15:16:20.897
> 
> 标签：asp.net, windows-services

我编写了一个 Windows 服务，它又调用了一个 Web 服务。**当我从测试应用程序运行 Windows 服务时，它运行良好**。但是，当我安装该服务然后启动它时，它几乎立即停止。我在日志中看到的仅有的两个条目是 **Constructor**和**Thread Started**。不知道出了什么问题。

```
public partial class WindowsService : ServiceBase
{
    public LogManager.LogFile _log;
    public Thread m_thread;
    protected TimeSpan m_delay;

    CommonFunctions _cf = new CommonFunctions();
    DBFunctions _db = new DBFunctions();

    public WindowsService()
    {
        InitializeComponent();
        _log = new LogManager.LogFile(@"c:\test\servicelog.txt", true, true);
        _log.WriteToLog("Constructor", LogLevel.Level0);
    }

    protected override void OnStart(string[] args)
    {

       m_delay = new TimeSpan(0,0,300);
       base.OnStart(args);

        try
        {
            m_thread = new System.Threading.Thread(Execute);
            m_thread.Start();
            _log.WriteToLog("Thread Started", LogLevel.Level0);
        }
        catch (Exception ex)
        { _log.WriteToLog(ex.Message, LogLevel.Level0); }

    }

  public void Execute()
    {
        _log.WriteToLog("Begin Execute...", LogLevel.Level0);

        try
        {

            ProcessNewLMSUsers();

         }
        catch (Exception ex)
        {
             _log.WriteToLog(ex.Message.ToString());
        }

     }

    private void ProcessNewLMSUsers()
    {
        try
        {
            _log.WriteToLog("Begin: Processing new LMS Users", LogLevel.Level1);

            // Check for new users in the LMS.
            string callErrorText = "";
            bool userAdded = false;

            LMSWS.SSO lms = _cf.GetLMSSSOWS(); **// this is a web service**
            lms.Timeout = 99999;

          }

             REST OF THE CODE.................
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:59:09.017

我看不出你的代码有什么问题。但您可以尝试在 OnStart 方法的开头添加“Thread.Sleep(20000);”代码。例如

```
protected override void OnStart(string[] args)
{
   Thread.Sleep(20000); 

   m_delay = new TimeSpan(0,0,300); //set a break-point here
   base.OnStart(args);

    try
    {
        m_thread = new System.Threading.Thread(Execute);
        m_thread.Start();
        _log.WriteToLog("Thread Started", LogLevel.Level0);
    }
    catch (Exception ex)
    { _log.WriteToLog(ex.Message, LogLevel.Level0); }

} 
```

一旦你在 Windows 服务中启动了这个服务程序，那么你必须快速将你的源代码附加到服务程序中。在 Visual Studio 中，它是菜单“调试”->“附加到进程...”。然后你可以在源代码的任何地方设置断点来检查出了什么问题。

# javascript - 选择和取消选择在 IE9 中不起作用？

> ID：13496279
> 
> 赞同：2
> 
> 时间：2012-11-21T15:16:24.810
> 
> 标签：javascript, jquery, html

我有一个下拉`<select>`元素可以从 50 个状态列表中选择状态，我选择第一个值，保存它，然后在 DOM 中显示该值。我更改并选择了第 5 个值，保存它会显示 DOM 中的值更新。现在回来我选择第二个值，并保存它。它没有将值保存在 DOM 中，而是显示之前选择的第 5 个值。我检查了不同的值，发现在选择任何更高的索引值后，选择返回，更低的值在 DOM 中没有影响，因此我在 POST 中没有得到正确的值。

这是我正在调用的函数`change`。

```
function updateDOM(inputField) {
    var elementId = inputField;
    if (inputField.type == "select-one") {
       var prev_select = inputField.selectedIndex;
       $('#'+inputField.id+' option').each(
          function() {
             $(this).removeAttr('selected');
          }
       );
       document.getElementById(elementId.id).selectedIndex = prev_select;
       if (browserVersion == 9) {
          document.getElementById(elementId.id)
             .options[prev_select].setAttribute("selected","selected");
       }
       else {
          document.getElementById(elementId.id)
             .options[prev_select].setAttribute("selected","selected");
       }
       document.getElementById(elementId.id).value
          = document.getElementById(elementId.id).options[prev_select].value;
} 
```

的HTML

```
 <select id="abc"  name="abc"  onchange="javascript:updateDOM(this);" class="required" >
      <option name="" value="" title="null" selected ></option>
      <option name="AK" value="Alaska" title="null"  >Alaska</option>
      <option name="AL" value="Alabama" title="null"  >Alabama</option>
      <option name="AR" value="Arkansas" title="null"  >Arkansas</option>
      <option name="AZ" value="Arizona" title="null"  >Arizona</option>
   </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:20:42.267

首先，你为什么不使用 jQuery 的 ":selected" 选择器呢？另外，你为什么只使用一次 jQuery？我建议以 jQuery 样式执行此操作（抱歉，我不太确定您在代码中到底要做什么）：

[http://jsfiddle.net/msLXt/1/](http://jsfiddle.net/msLXt/1/)

PS这些条件有什么区别？

```
 if (browserVersion == 9) {
      document.getElementById(elementId.id)
         .options[prev_select].setAttribute("selected","selected");
   }
   else {
      document.getElementById(elementId.id)
         .options[prev_select].setAttribute("selected","selected");
   } 
```

# css - css：水平居中浮动图片库

> ID：13496280
> 
> 赞同：2
> 
> 时间：2012-11-21T15:16:25.393
> 
> 标签：css

我有一个类似画廊的带有文本内容的块项目列表。使用 display: table* stuff 将文本内容与底部对齐。该列表不是固定宽度，因为它通过创建更多列扩展到视口宽度。我想使列表在屏幕上居中，这样底行仍将与所有其他行的左侧对齐（我无法弄清楚如何使用内联块的原因之一）。例子：

```
<!doctype html>
<html>
    <head>
        <title>test</title>
        <style>
            ul{
                margin: 0;
                padding: 0;
                list-style: none;
            }
            ul:after{
                display: block;
                clear: both;
                content: ' ';
            }
            li{
                display: table;
                float: left;
                border: 1px solid red;
                width: 300px;
                height: 300px;
            }
            .gridRow{
                display: table-row;
            }
            .gridCell{
                display: table-cell;
                vertical-align: bottom;
            }
        </style>
    </head>
    <body>
        <ul>
            <li><span class="gridRow"><span class="gridCell">1</span></span></li>
            <li><span class="gridRow"><span class="gridCell">2</span></span></li>
            <li><span class="gridRow"><span class="gridCell">3</span></span></li>
            <li><span class="gridRow"><span class="gridCell">4</span></span></li>
            <li><span class="gridRow"><span class="gridCell">5</span></span></li>
            <li><span class="gridRow"><span class="gridCell">6</span></span></li>
            <li><span class="gridRow"><span class="gridCell">7</span></span></li>
            <li><span class="gridRow"><span class="gridCell">8</span></span></li>
            <li><span class="gridRow"><span class="gridCell">9</span></span></li>
            <li><span class="gridRow"><span class="gridCell">10</span></span></li>
            <li><span class="gridRow"><span class="gridCell">11</span></span></li>
            <li><span class="gridRow"><span class="gridCell">12</span></span></li>
            <li><span class="gridRow"><span class="gridCell">13</span></span></li>
            <li><span class="gridRow"><span class="gridCell">14</span></span></li>
            <li><span class="gridRow"><span class="gridCell">15</span></span></li>
            <li><span class="gridRow"><span class="gridCell">16</span></span></li>
            <li><span class="gridRow"><span class="gridCell">17</span></span></li>
            <li><span class="gridRow"><span class="gridCell">18</span></span></li>
            <li><span class="gridRow"><span class="gridCell">19</span></span></li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:19:25.440

您需要给 UL 一个宽度或将其放入具有宽度和“overflow:auto;”的包含元素中。

宽度可以以 px 或 % 为单位。

然后给容器一个边距“margin:0 auto;”

然后你只需将你的 LI 元素设置为“display:inline-block;” 或者给他们“float:left;”

示例：http: [//jsfiddle.net/jDqbJ/1/](http://jsfiddle.net/jDqbJ/1/)

```
.container {
 width:75%;
 overflow:auto;
 margin:0 auto;
}

.container ul li {
 float:left;width:75px;
 height:75px;
 background:#ccc;
 margin:0 10px 20px 0;
} 
```

# android - 尝试在 ant 构建中将 autoCompleteTextView 适配器设置为 null 时出现编译错误

> ID：13496284
> 
> 赞同：2
> 
> 时间：2012-11-21T15:16:26.687
> 
> 标签：android, ant, android-build

我正在尝试使用 ant everything 构建一个 apk，但编译失败并显示以下错误消息：

```
[javac]  type parameters of <T>void cannot be determined; no unique maximal instance exists for type variable T with upper bounds android.widget.ListAdapter,android.widget.Filterable
[javac]             currentAddressTextView.setAdapter(null); 
```

在 eclipse 中它编译得很好，当我删除这部分代码时，它也会在 ant 构建期间编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:21:58.140

你可以试试下面：

```
 ArrayAdapter<String> adapter = null;
     currentAddressTextView.setAdapter(adapter); 
```

# sql - 为报表动态构建表格

> ID：13496289
> 
> 赞同：0
> 
> 时间：2012-11-21T15:16:42.597
> 
> 标签：sql, sql-server, sql-server-2008, tsql, reporting

我有一个临时表，其中包含所有可用项目

```
#TableA

ItemId  ItemName    ItemVer
1       Name1       2
2       Name2       9
3       Name3       5
.
.
.
500     Name500     3 
```

然后我有另一个保存快照的所有日期以及 SnapshotId

```
CREATE TABLE #tmpSnapshot_Dates(
[SnapshotId] [uniqueidentifier] NOT NULL,
[DateTaken] datetime NOT NULL) 

INSERT INTO #tmpSnapshot_Dates SELECT SnapshotId, DateTaken From Snapshot_Info Where DateTaken <= @EndDate 
```

现在对于`#tmpSnapshot_Dates`表中的每个日期，我想获得一个与每个项目相关的计数

```
SELECT ItemId, Count(*) From Items Where SnapshotId = @SnapshotId 
```

然后`#TableA`通过添加一列进行更新

```
DECLARE @ColName VARCHAR(100)
SET @ColName = 'Installed ' + CONVERT(Varchar, @DateA, 6)

exec('ALTER TABLE #TableA ADD ['+@ColName+']  int NOT NULL CONSTRAINT [DF_#TableA_Installed on] DEFAULT 0') 
```

然后将数据插入新列。然后我需要为每个日期重复这个`#tmpSnapshot_Dates`

给出一个`#TableA`看起来像的结果

```
#TableA

ItemId  ItemName    ItemVer    Installed 01 Jan 12    Installed 07 Feb 12 
1       Name1       2          34                     33
2       Name2       9          56                     59
3       Name3       5          12                     26
.
.
.
500     Name500     3          98                     106 
```

我的问题是

1.  我是否以错误的方式接近它而在这里制造了一场噩梦？
2.  我如何最好地循环`#tmpSnapshot_Dates`然后获取数据以创建下一列？我总是尽量避免使用游标，但这是我需要使用的情况之一吗？

可能有 12 列要添加，并不是每个日期都会返回每个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:03:44.280

绝对不会很好，但是是的，您需要使用游标并遍历`#tmpSnapshot_Dates`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:47:49.000

Would it not be better to have a separate (temp?) table referencing the `ItemId` in `#TableA` eg:

```
InstalledDate    ItemId    Count
-------------    ------    -----
2012-01-01            1       34
2012-01-01            2       56
2012-01-01            3       12
.                     .        .
.                     .        .
.                     .        .
2012-01-01          500       98
2012-02-07            1       33
2012-02-07            2       59
2012-02-07            3       26
.                     .        .
.                     .        .
.                     .        .
2012-02-07          500      106 
```

# layout - UICollectionView layoutAttributesForElementsInRect 不返回可重用视图

> ID：13496291
> 
> 赞同：2
> 
> 时间：2012-11-21T15:16:51.690
> 
> 标签：layout, view, ios6, uicollectionview, supplementary

我正在尝试使用补充视图实现 UICollectionView。我使用一个 Nib 文件来创建我的补充视图。这是布局中添加supplementaryView的方法：

```
 NSMutableArray *attributesInRect = [[super layoutAttributesForElementsInRect:rect] mutableCopy];

NSLog(@"%@", attributesInRect);
if ([self.collectionView numberOfItemsInSection:0] > 1 && !self.selectedItem)
{
    if ([self.musicList count] > 0)
    {
        UICollectionViewLayoutAttributes *musicViewAttributes = [self layoutAttributesForSupplementaryViewOfKind:@"MusicView" atIndexPath:[NSIndexPath indexPathForRow:1 inSection:0]];

        musicViewAttributes.size = CGSizeMake(CGRectGetWidth([[UIScreen mainScreen] bounds]), 150);
        musicViewAttributes.center = CGPointMake(musicViewAttributes.size.width/2, musicViewAttributes.size.height/2);
        musicViewAttributes.zIndex = 0;
        [attributesInRect addObject:musicViewAttributes];
    }
}
return attributesInRect; 
```

这里不用注意条件，只在属性数组（attributesInRect）上。当我这样做时，我的补充将正确添加到 CollectionView。

我的问题是检索添加的补充视图。在 NSLog 上，我的补充视图似乎没有在数组中列出。在这种情况下，我无法在添加新之前检查它的存在。

我真的不明白为什么文档指定：

> 返回值 UICollectionViewLayoutAttributes 对象数组，表示单元格和视图的布局信息。默认实现返回 nil。

据此，我的补充视图应该在那个数组中。

有什么想法吗？

# neural-network - 递归神经网络模式区分

> ID：13496292
> 
> 赞同：0
> 
> 时间：2012-11-21T15:16:53.890
> 
> 标签：neural-network

是否可以区分模式`[ABCDEFG]`和`[ABCDEGF]`？那么区分`[ABCDEFGH]`and`[BCDEFGH]`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:38:21.893

我获得了题为“神经网络中的时间序列处理”的博士学位。它包含许多用于准确解决此类问题的想法。你可以[在这里](http://www.reiss.demon.co.uk/misc/m_reiss_phd.pdf)下载。第 9 章涉及序列的识别，尽管它可能会涉及到前面章节中涵盖的很多内容，所以我不确定你是否可以单独阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:57:23.970

是的，使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance "莱文斯坦距离")。

# java - Java Ganymed Trlead Orion ssh 会话超时

> ID：13496294
> 
> 赞同：5
> 
> 时间：2012-11-21T15:16:57.913
> 
> 标签：java, session, ssh, libssh2

我正在使用 SSH Ganymed 库别名 Trilead 别名 Orion。

我试图了解会话的确切行为，因为我需要保持 ssh 连接打开很长时间（可能永远）并在我的 jvm 出现故障或类似情况时关闭它。

所以，我的问题是这个。假设我做这样的事情：

```
Connection conn = new Connection(this.hostName, this.port);
conn.addConnectionMonitor(new ConnectionMonitor()
{            
  @Override
  public void connectionLost(Throwable reason)
  {
     System.out.println("Connection Lost "   reason.getMessage());
  }
});
conn.connect(null, 1000, 20000);
conn.authenticateWithPublicKey(this.user, keyfile, this.password);
Thread.sleep(30000); //sleep the Thread for 30 seconds
Session sess = conn.openSession();
sess.execCommand("ls");
conn.close(); 
```

而且，在线程休眠的那 30 秒内，我断开网络接口以模拟网络问题。

1）connectionMonitor没有拦截到disconnect事件并且没有打印Connection Lost消息 2）当

```
Session sess = conn.openSession(); 
```

被执行，进程阻塞并且没有任何反应，直到我不再连接网络接口。这是因为，查看 Ganymed 代码，似乎由于未检测到断开连接事件，会话已打开，并且在会话成功之前打开了一个锁。

所以我的问题是：1）这种行为是想要的还是一个错误？2）有没有办法在 Connection.openSession() 方法和 Connection.connect() 方法中设置超时？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T01:05:15.190

我认为问题在于您无法通过拔下电缆 30 秒来模拟 ssh 断开连接。看看这个：如果您在终端上打开 ssh 连接并拔下电缆，ssh 客户端也会阻塞，但在再次插入电缆后会自动重新连接。我假设您的代码也会这样做。

如果在配置的时间内（即一段时间不活动），无论是否插入电缆，客户端和服务器之间都没有发送数据，您通常会断开连接。默认情况下，此时间段很可能大于 30 秒。

在 sshd 服务器上，您可以配置

> ClientAliveInterval
> 
> TCPKeepAlive
> 
> ClientAliveCountMax

这些参数将决定服务器在从客户端收到一些数据之前要等待多长时间，以及他多久会接受一个简单的保活数据包而不是真实数据。在客户端你可以配置

> ServerAliveInterval

如果 ClientAliveInterval 小于 ServerAliveInterval - 服务器期望保持活动数据包的频率高于客户端发送它们的频率 - 在 ClientAliveInterval 不活动量后您将断开连接。有了它，您可以测试您的代码。

这些配置也是保持 ssh 连接无限期打开的关键。如果您的 ServerAliveInterval 小于 ClientAliveInterval - 客户端将比服务器期望的更频繁地发送保持活动数据包 - 您的连接将无限期打开。

看看这里[https://www.simplified.guide/ssh/disable-timeout](https://www.simplified.guide/ssh/disable-timeout)

我认为重新启动服务器或客户端计算机仍会导致断开连接。如果您的客户端计算机重新启动，无论如何您都需要再次运行整个代码，如果服务器计算机重新启动，连接监视器将启动并重新连接。

# java - 登录HTTPS ASPX页面的Android App

> ID：13496297
> 
> 赞同：0
> 
> 时间：2012-11-21T15:17:04.487
> 
> 标签：java, android, asp.net, http

为了清楚起见，我几乎没有 HTTP 方面的经验。这个项目对我来说雄心勃勃，但我愿意学习以便能够完成它。我已经在网上搜索了一些示例，但似乎找不到合适的解决方案。我知道 GET 和 POST 之类的术语，并且了解以编程方式与网站交互的基本方式。

基本上，我正在与之合作的公司有一个网站，其中包含我可以登录的客户数据库。对于初学者，我只想编写一个能够使用我的用户名和密码登录到主页的 Android 应用程序。该站点的登录 URL 为 https://"app.companysite.com"/Security/Login.aspx?ReturnUrl=%2fHome%2fDefault.aspx，并具有用于以下目的的证书：“确保远程计算机”。

我正在做的事情可能吗？最终，我希望能够打开一个客户页面并编辑他们的数据并重新提交，但一步一步。

如果你能指出一些相关的阅读材料或源代码的方向来帮助我实现我的目标，那就太棒了。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:12:56.257

我不知道这是否有帮助，但我登录的方式只是为了证明。所以我所做的（因为我假设验证是通过 MySQL 数据库完成的）是创建一个 php 文件来验证登录用户名和密码是否正确并打印出“正确”或“是”，否则只是“否” ”或“无效”。像这样的东西：

```
php
//Connects to your Database

      $username = $_POST['username'];
      $password = $_POST['password'];

      //make your mysql query if the username and password are in the database
      //if there is a an approval
     $approval = 1 
     //otherwise
     $approval = 0

    if ($approval > 0) {
       echo "correct";
    } else {
       echo "invalid";
    }

    ?> 
```

现在在 Android 中，您可以发出此请求来调用此网站并返回如下输出：

```
HttpParams httpParameters = new BasicHttpParams();
//make a timeout for the connections in milliseconds so 4000 = 4 seconds                    httpParameters.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
int timeoutConnection = 4000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
int timeoutSocket = 4000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

HttpClient httpclient = new DefaultHttpClient(httpParameters);
HttpPost httppost = new HttpPost("your website URL");

// Add your data
String username = "your username";
String password = "your password";

List<NameValuePair> nameValuePairs;
nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("username", username));
nameValuePairs.add(new BasicNameValuePair("password", password));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
// Execute HTTP Post Request
HttpResponse response = httpclient.execute(httppost);

BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

String lines = "";
String data = null;
ArrayList<String> al = new ArrayList<String>();

while((lines = in.readLine()) != null){
    data = lines.toString();
    al.add(data);
}
in.close();

//To get the response
if(al.get(0).equals("correct")){
      //Your login was successful
}
else {
    //Your login was unsuccessful
} 
```

我希望这对您有所帮助，并为您指明了正确的方向。

# asp.net-mvc-3 - 具有多个模型的 MVC3 视图

> ID：13496301
> 
> 赞同：1
> 
> 时间：2012-11-21T15:17:18.020
> 
> 标签：asp.net-mvc-3, visual-studio, view, model

我有一个视图模型。此视图包含一个 @Html.DropDownList，其值在模型中。我怎样才能让我的观点为程序的不同部分采用两种模型？

例如，我有

```
@model IEnumerable<projectname.mymodel>
@{
   ViewBag.Title = "my title"
 }
 <!--This should use a different model-->
 <p>@Html.DropDownList(m =>m.name), new set(Model.list, "value", "key")) 
```

如果我有model1和model2（连接到数据库）-都存储在Model文件夹中；和一个像这样的大模型类

```
public class MyViewModel {
   public model1 var1 { get; set; }
   public IEnumerable<projectname.Model.model2> var2 { get; set; }
} 
```

在我看来，我称这个模型为：

> @model ProjectName.Models.Models

如何引用模型 1 或模型 2 中的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:21:00.373

只需将一个新类作为模型传递给您的视图，其中包含您需要的所有数据：

```
public class MyViewModel {
    public SelectList list { get; set; }
    public IEnumerable<projectname.mymodel> Items { get; set; }
} 
```

另一种方法是在 Viewbag 中传递列表：

```
Viewbag.list = new SelectList() ... 
```

# .net - 以 sql 文本形式发送同步数据，同步框架 1

> ID：13496304
> 
> 赞同：2
> 
> 时间：2012-11-21T15:17:25.990
> 
> 标签：.net, sync, microsoft-sync-framework

我现在继承了一个 WCF Web 服务，它通过 Microsoft Sync Framework 1.0 将 sql server 2008 DB 与偶尔连接的具有 mssqlCE 3.5 DB 的 PDA 同步。它不是一个大数据库，但表之间有相当数量的关系。问题是我们正在尝试同步跨越多个表的数据，即使只同步 1 个原子数据单元（跨越表的记录）也会在 PDA 上出现内存不足的异常。我们尝试使用数据代理，这有点缓解，批处理，但后来我们意识到尝试同步 1 条数据记录失败。有没有一种方法可以让我获取同步数据并将其作为 sql 文件传输，然后传输并将其应用到 PDA 和/或服务器上，然后在失败或成功时触发事件？我们的同步政策是 PDA 永远赢。

提前致谢！

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:09:08.683

不幸的是，API 中没有任何内容可供您将更改导出为 SQL 语句。您可以尝试拦截 ChangesSelected 事件中的更改，将数据集导出为 XML 并在客户端使用 XML 应用更改。但是如果您在内存中加载许多记录，您可能仍然会遇到相同的内存问题......

# java - 多个 JVM 进程可以共享公共类的内存吗？

> ID：13496307
> 
> 赞同：6
> 
> 时间：2012-11-21T15:17:54.463
> 
> 标签：java, memory, jvm, shared-libraries

我想在我的 Web 服务器上运行多个 Java 进程，每个 Web 应用程序一个。我正在使用一个具有大量支持类和 jar 文件的 Web 框架（Play），并且 Java 进程使用大量内存。一个 Play 进程显示大约 225MB 的“驻留私有”内存。（我正在使用 Java 1.7.0_05 的 Mac OS X 上对此进行测试。）特定于应用程序的代码可能只有几 MB。我知道典型的 Java Web 应用程序是添加到一个服务器进程（Tomcat 等）的 jar，但似乎运行 Play 的标准方式是作为独立的应用程序/进程。如果这些是 C 程序，那 200MB 中的大部分将是共享库，并且不会在每个应用程序中复制。有没有办法在 Java 中实现这一点？我看到一些关于[类数据共享](http://en.wikipedia.org/wiki/Java_performance#Class_data_sharing)的页面，但这似乎只适用于核心运行时类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:33:28.600

目前，对于 Oracle VM，这是不可能的。

但我同意，这将是一个不错的功能，特别是因为 Java 拥有自动执行此操作所需的所有信息。

最重要的是，我认为 JIT 是它无法工作的唯一原因：JIT 将运行时行为考虑在内。因此，如果应用 A 使用与应用 B 不同的模式的某些代码，则会导致在运行时生成不同的汇编代码。

但是，通常的“模式”是“这段代码的使用频率”。因此，如果应用程序 A 经常调用某个方法而 B 没有，他们仍然可以共享代码，因为 A 已经为优化/编译它付出了代价。

您可以尝试将多个应用程序作为 WAR 文件部署到单个 VM 中。但根据我的经验，这通常会导致无法正确清理线程本地变量或关闭挂钩的代码出现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T00:04:42.437

IBM JDK 有一个 jvm 参数来实现这一点。查看@http [://www.ibm.com/developerworks/library/j-sharedclasses/](http://www.ibm.com/developerworks/library/j-sharedclasses/)

这将其带到下一步：[http ://www.ibm.com/developerworks/library/j-multitenant-java/index.html](http://www.ibm.com/developerworks/library/j-multitenant-java/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:40:42.377

在 JVM 实例之间共享内存的问题在移动平台上更为紧迫，据我所知，Android 在 Zygote 中有一个非常聪明的解决方案：初始化 VM，然后在运行应用程序时对其进行`fork()`编辑。Linux 在 RAM 页面上使用写时复制，因此大部分数据不会被复制。

如果您在 Linux 上运行并想尝试使用 Dalvik 作为您的 VM（我看到声称在 Dalvik 上有一个工作的 tomcat 端口），那么移植这个解决方案是可能的。我预计这将是一项巨大的工作，最终为您节省几美元的内存升级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T15:31:42.720

如果您使用支持虚拟主机的 servlet 容器（我相信 Tomcat 会这样做），您将能够使用[play2-war-plugin](https://github.com/dlecan/play2-war-plugin)。从 Play 2.1 开始，始终作为根应用程序的要求将被取消，因此您可能能够使用任何 servlet 容器。

需要记住的一件事是，如果您可能需要调整 war 文件以将内容从`WEB-INF/lib`servlet 容器的 lib 目录中移动，以避免再次加载所有类，并且如果它使用单例或其他形式的类共享，这可能会影响您的应用程序数据。

# c# - 如何在没有绑定的情况下动态填充数据网格？

> ID：13496311
> 
> 赞同：0
> 
> 时间：2012-11-21T15:18:09.977
> 
> 标签：c#, .net, wpf, datagrid

只是主题。找不到没有数据绑定的方法。

我正在尝试这样做：

```
maingrid.ColumnDefinitions.Add(col1);

DataGrid listOfExercises = new DataGrid();

listOfExercises.ItemsSource = GetDayExercises(ref time);

Grid.SetRowSpan(listOfExercises, maingrid.RowDefinitions.Count - 1);
Grid.SetColumn(listOfExercises, maingrid.ColumnDefinitions.Count - 1);

maingrid.Children.Add(listOfExercises); 
```

GetDayExercises() 返回 int[]。我得到了下一个结果：

![程序窗口](../Images/f74b2bfa173e0f6e58c01fc7e50a82b4.png)

行数与必须相同，但数字在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:04:30.470

看来你错过了`Binding`。试试这个：

```
DataGridTextColumn col1 = new DataGridTextColumn();
col1.Binding = new Binding();
dataGrid1.Columns.Add(col1);

dataGrid1.ItemsSource = Enumerable.Range(1, 10); 
```

它显示数字从 1 到 10 的数据网格

# c++ - 如何在windows中直接在屏幕上绘图？

> ID：13496312
> 
> 赞同：2
> 
> 时间：2012-11-21T15:18:11.223
> 
> 标签：c++, winapi, gdi

比如说我想在屏幕中间画一个红色方块（或多个红色方块），并且仍然能够看到没有被方块覆盖的所有东西，有点像闪屏。

我想在 Windows 中实现这一点，但我不知道在屏幕顶部绘制的最佳方式。到目前为止，这些是我的想法：

*   我最初尝试通过为其获取设备上下文来直接在桌面上绘图。
*   制作矩形/sa 单独的窗口，因为它们很容易移动，而且我不必担心透明度。
*   创建一个覆盖整个屏幕并保持在顶部的透明窗口。在屏幕的客户区绘制矩形

我认为这三个想法中最好的是最后一个，但对我的想法或新想法的任何意见将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:25:33.420

Creating transparent window, then drawing in it, in my experience it is messy.
Why don't you just take a screenshot from the back ground set it as the back ground for you snake game. When ever they click somewhere/die you just close your game.
You could catch the last click and resubmit it after closing the game.

That is how I would do, but of course that just an opinion.

# login - ASP 登录系统（无数据库）

> ID：13496314
> 
> 赞同：0
> 
> 时间：2012-11-21T15:18:18.790
> 
> 标签：login, asp-classic

我怎样才能在一些 html 页面上做一个不使用数据库的简单 ASP**登录系统？**喜欢脚本，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:25:39.503

You'd assign a cookie server-side upon successful login, then check for the presence of the cookie on each request.

You could use an array for userids and passwords instead of a database on the server for account look-up.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:03:06.270

[在http://www.4guysfromrolla.com/webtech/050499-1.shtml](http://www.4guysfromrolla.com/webtech/050499-1.shtml)查看此示例代码

# iphone - xcode ios 6 摇动从前一个视图调用 IBaction

> ID：13496318
> 
> 赞同：6
> 
> 时间：2012-11-21T15:18:26.410
> 
> 标签：iphone, xcode, ios4, ios6, motion-detection

我对应用程序开发有点陌生。在 viewController ( VPviewController ) 我有以下代码：

```
- (void) motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event{
    if (motion == UIEventSubtypeMotionShake){       
        [self startGame:nil];
    }   
} 
```

在不同的 viewController ( VPgameViewController ) 我有不同的 MotionShake 事件：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event{
    if(event.subtype == UIEventSubtypeMotionShake){
        if(count < 3 ){

            [self changeText:nil];
            AudioServicesPlaySystemSound(1016);
            count++;

         }else{

            count = 0;
            AudioServicesPlaySystemSound(1024);
            UIStoryboard *storyboard = self.storyboard;
            VPpoepViewController *shit = [storyboard instantiateViewControllerWithIdentifier:@"PoepViewController"];
           shit.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
           [self presentViewController:shit animated:YES completion:nil];
        }
    }
} 
```

当我在 VPgameView 中并摇动 Iphone 时，它​​也会调用不同 viewController 摇动事件中的 startGame 函数。

我怎么能阻止这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:26:51.013

听起来您必须取消订阅您`VPViewController`在其`viewWillDisappear:`功能中接收震动事件通知。

通常，如果您希望您的 viewController 仅在可见时接收某些事件通知，您应该在函数中订阅通知并在`viewWillAppear:`函数中取消订阅`viewWillDisappear:`。

# cross-platform - 使用 Maven Tycho 构建 Eclipse 跨平台

> ID：13496321
> 
> 赞同：6
> 
> 时间：2012-11-21T15:18:28.530
> 
> 标签：cross-platform, eclipse-rcp, tycho

我尝试使用and编译`Eclipse Indigo RCP`应用程序。如果我只是为一个平台构建它，它工作得很好，但如果我尝试构建它更多的构建停止工作。`Maven``Tycho`

问题是我要构建的产品文件中有特定于平台的插件。依赖`org.eclipse.swt.win32.win32.x86`项是`org.eclipse.swt`.
当我没有向我的产品添加特定于平台的片段时，应用程序将无法启动，因为没有像 org.eclipse.swt.win32.win32.x86 这样的平台库。作为 Tycho 存储库，我们使用托管在我们自己的服务器上的 eclipse indigo 更新站点的克隆。它包括增量包。当我为所有平台添加所有片段时，构建崩溃了，maven 告诉我平台过滤器与 Linux 构建不匹配。

有谁知道如何解决这一问题？
我应该将这些平台相关的东西添加到我的产品中吗？我更喜欢将特定的依赖项排除在我的产品之外，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:53:29.580

听起来您有一个基于插件的产品。在这种情况下，您需要手动编辑 .product 文件并为这些插件添加平台过滤器。不幸的是，eclipse 中的内置产品编辑器没有公开这些值。请参阅[http://wiki.eclipse.org/Tycho/FAQ#How_to_build_plugin-based_products_with_platform-specific_fragments.3F](http://wiki.eclipse.org/Tycho/FAQ#How_to_build_plugin-based_products_with_platform-specific_fragments.3F)

对于每个插件，例如 org.eclipse.swt.win32.win32.x86，您需要添加类似的内容；

```
<plugin id="org.eclipse.swt.win32.win32.x86" fragment="true" ws="win32" os="win32" arch="x86"/> 
```

请注意，如果您使用产品编辑器，它将删除这些值。

然而，最好使用基于功能的产品。特征编辑器允许编辑这些字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-15T19:03:51.947

我在博客中找到了一个更简单的解决方案：http: [//blog.sdruskat.net/building-a-cross-platform-feature-based-eclipse-rcp-product-with-tycho-the-umpteenth/](http://blog.sdruskat.net/building-a-cross-platform-feature-based-eclipse-rcp-product-with-tycho-the-umpteenth/)

在 parent/master pom.xml 中，要使用 p2 中的所有插件，请指定以下内容：

> ```
> <build>
>  <plugins>
>   <plugin>
>     <groupId>org.eclipse.tycho</groupId>
>     <artifactId>tycho-maven-plugin</artifactId>
>     <version>${tycho-version}</version>
>     <extensions>true</extensions>
>   </plugin>
> 
>   <plugin>
>     <groupId>org.eclipse.tycho</groupId>
>     <artifactId>target-platform-configuration</artifactId>
>     <version>${tycho-version}</version>
>     <configuration>
>        <resolver>p2</resolver>
>         <environments>
>           <environment>
>             <os>linux</os>
>             <ws>gtk</ws>
>             <arch>x86_64</arch>
>           </environment>
>           <environment>
>             <os>win32</os>
>             <ws>win32</ws>
>             <arch>x86_64</arch>
>           </environment>
>         </environments>
>     </configuration>
>   </plugin>
>  </plugins>
> </build> 
> ```

我的第谷版本是 0.21.0

# android - 为什么我在 Android 中注销后尝试重新登录时没有出现 Facebook 登录页面？

> ID：13496322
> 
> 赞同：0
> 
> 时间：2012-11-21T15:18:28.883
> 
> 标签：android, facebook

我按照本教程[http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)将 Facebook 连接到我的 Android 应用程序。我没有很多按钮，而是有一个用于登录和注销的按钮。

1）我第一次运行课程时，我可以登录然后成功注销。当我点击同一个按钮再次登录时，登录页面不会出现，但是会出现 Toast 文本**“LOGGING IN”**，这是`loginToFacebook()`我的**if-else**函数之后。因此，我认为，它应该像我第一次运行课程一样运行 facebook 登录页面。但是没有出现登录页面。

我做错了什么？我该怎么办？

2）以及如何`String fbLoggedIn`在登录后显示用户名而不是文本“CONNECTED!!” ?

```
public class FacebookActivity extends Activity{

private static String APP_ID = "";
private Facebook facebook;
private AsyncFacebookRunner mAsyncRunner;
String FILENAME = "AndroidSSO_data";
private SharedPreferences mPrefs;
private Button backButton;
private String name = "CONNECTED!!";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings_share);

    facebook = new Facebook(APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(facebook);

    RelativeLayout fbButton = (RelativeLayout) findViewById(R.id.fbLayout);
    fbButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (!facebook.isSessionValid())
            {
            System.out.println("Not Connected. Clicked and Login.");    
            loginToFacebook();
            Toast.makeText(getApplicationContext(), "LOGGING IN", Toast.LENGTH_LONG).show();}

            else
            {
            System.out.println("Connected. Logged Out.");   
            logoutFromFacebook();
            Toast.makeText(getApplicationContext(), "LOGGED OUT", Toast.LENGTH_LONG).show();}
        }
    });     
}

public void loginToFacebook() {
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {   

        facebook.authorize(this, new String[] { "email", "publish_stream" }, new DialogListener() {

                    @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", facebook.getAccessToken());
                        editor.putLong("access_expires", facebook.getAccessExpires());
                        editor.commit();   

                        TextView fbUser = (TextView) findViewById(R.id.fbUser);
                        fbUser.setVisibility(View.VISIBLE);
                        String fbLoggedIn = name;
                        fbUser.setText(fbLoggedIn); 
                        Toast.makeText(getApplicationContext(), "LOGGED IN AS " + name, Toast.LENGTH_LONG).show();         
                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error
                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors
                    }

                });
    }
}

public void getProfileInformation() {
    mAsyncRunner.request("me", new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.d("Profile", response);
            String json = response;
            try {
                JSONObject profile = new JSONObject(json);
                // getting name of the user
                final String name = profile.getString("name");
                // getting email of the user
                final String email = profile.getString("email");

                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(getApplicationContext(), "Name: " + name + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                    }

                });

            } catch (JSONException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onIOException(IOException e, Object state) { }

        @Override
        public void onFileNotFoundException(FileNotFoundException e, Object state) { }

        @Override
        public void onMalformedURLException(MalformedURLException e, Object state) { }

        @Override
        public void onFacebookError(FacebookError e, Object state) { }
    });
}

//logout from Facebook
public void logoutFromFacebook() {
    mAsyncRunner.logout(this, new RequestListener() {
        @Override
        public void onComplete(String response, Object state) {
            Log.d("Logout from Facebook", response);
            if (Boolean.parseBoolean(response) == true) {
                // User successfully Logged out
         }

        }

        @Override
        public void onIOException(IOException e, Object state) { }

        @Override
        public void onFileNotFoundException(FileNotFoundException e, Object state) { }

        @Override
        public void onMalformedURLException(MalformedURLException e, Object state) { }

        @Override
        public void onFacebookError(FacebookError e, Object state) { }
    });
 } 
```

为了更清楚起见，我将我的 if-else 设置为这样（从上面的完整代码中提取）。

```
 RelativeLayout fbButton = (RelativeLayout) findViewById(R.id.fbLayout);
    fbButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (!facebook.isSessionValid())
            {
            System.out.println("Not Connected. Clicked and Login.");    
            loginToFacebook();
            Toast.makeText(getApplicationContext(), "LOGGING IN", Toast.LENGTH_LONG).show();}

            else
            {
            System.out.println("Connected. Logged Out.");   
            logoutFromFacebook();
            Toast.makeText(getApplicationContext(), "LOGGED OUT", Toast.LENGTH_LONG).show();}
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:08:49.620

这是 Facebook 希望您使用他们的 API 采取的行为。您的登录方法会检查您是否已经登录过一次并且 Facebook 会话是否处于活动状态。如果会话处于活动状态，则它会设置 facebook 对象的属性并将其连接到 sences 后面，这样登录页面就不会再次显示。

所以你没有做错任何事，它应该以这种方式发生。

# javascript - 同时扩展一个 JQuery Plugin 和 JQuery

> ID：13496323
> 
> 赞同：0
> 
> 时间：2012-11-21T15:18:31.410
> 
> 标签：javascript, jquery

我正在构建一个 Jquery 插件。我的骨架代码如下：

```
(function (window, document, $, undefined) {

    var methods = {
        init : function(options){
        },
        func_1: function(){
        },
        func_2: function(){
        }
    };

    $.fn.myplugin = function(args){

        if ( methods[args] )
        {
            return methods[ args ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        }
        else if ( typeof args === 'object' || ! args ) 
        {
            var opts = $.extend({}, $.fn.myplugin.defaults, args);
            var new_args = new Array(opts);
            return methods.init.apply( this, new_args );
        }
        else 
        {
            $.error( 'Method ' +  args + ' does not exist' );
        }
    };

    $.fn.myplugin.defaults = {
         func_1: function(){},
         func_2: function(){}
    };

}(window, document, jQuery)); 
```

我正在寻找扩展这个插件，以便我可以向 JQuery 添加额外的功能。所以，我想让这些函数调用如下：

```
$.myplugin.new_func(); 
```

我该怎么做呢？我知道我可能必须使用`$.extend`但不知道如何去做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:29:25.750

$.fn.myplugin 和 $.myplugin 之间的区别在于后者没有任何上下文。因此，您可以使用以下代码定义后者。为了在 $.myplugin 的结果上使用链接，您只需要返回一个您想在其上使用 .new_func() 方法的对象，例如某个 jQuery 对象。

```
$.myplugin = function () {
   ...
   return $('body');
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:26:03.193

好的，在浏览了一些较旧的 JQuery 插件（尤其是 FancyBox 2）之后，我设法找到了一种方法来做到这一点。下面是整个骨架代码：

```
(function (window, document, $, undefined) {

    var methods = {
        init : function(options){
        },
        func_1: function(){
        },
        func_2: function(){
        }
    };

    $.fn.myplugin = function(args){

        if ( methods[args] )
        {
            return methods[ args ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        }
        else if ( typeof args === 'object' || ! args ) 
        {
            var opts = $.extend({}, $.fn.myplugin.defaults, args);
            var new_args = new Array(opts);
            return methods.init.apply( this, new_args );
        }
        else 
        {
            $.error( 'Method ' +  args + ' does not exist' );
        }
    };

    $.fn.myplugin.defaults = {
        func_1:     function(){},
        func_2:     function(){}
    };

    //below is the code I added to get the desired functionality
    var D = $.myplugin = function(){};
    $.extend(D, {
        new_func: function(){
            //add functionality here
        }
    });

}(window, document, jQuery)); 
```

也可以在对象`new_func`内部定义一个函数（调用或其他）`methods`，然后使用`methods.new_func()`.

干杯。

# php - 如何将两张图片合二为一，以便在所有浏览器中垂直对齐？

> ID：13496324
> 
> 赞同：0
> 
> 时间：2012-11-21T15:18:37.447
> 
> 标签：php, jquery, html, css

我正在创建一个电子商务网站，但无法将所有缩略图垂直居中。问题是我所有的图像都是不同的大小，让每个图像在所有浏览器中垂直对齐变得很痛苦。我研究了不同的 CSS 选项、`display-table`、`line-height`和其他选项。他们在现代浏览器中工作，但在 IE 中表现不佳（当然）。我的想法是大型大型网站正在调整图像的大小（我可以毫无问题地做到这一点），然后将图像覆盖在背景上他们需要的确切大小。有谁知道这是否是这样做的？如果是这样，您能指导我阅读一些有关如何在 PHP 中执行此操作的文档吗？

或者，如果有人认为我可以在没有叠加图像的所有额外工作的情况下做到这一点，请告诉我。万一你想看看我在这里做什么：

**HTML**

```
<a href="#">
    <div id="product">
        <div id="product-image">
            <img src="" border="0" />
        </div>
        <div id="product-name"></div>
        <div id="product-price"></div>
    </div>
</a> 
```

**选项 1：JQUERY**（这似乎是我最大的希望，但无法让它正常工作）

```
var h = $('#product-image').height();
$.map($('#product-image img'), function(e)
{
    var top =( h- $(e).height())/2;
    $(e).css("margin-top",top);
}); 
```

**选项 2：CSS**

```
#product
{
    float:left;
    margin:5px;
    width:200px;
    height:200px;
    border:1px solid #999;
}
#product-image
{
    margin:2px auto;
    width:194px;
    height:145px;
    text-align:center;
}
#product-image img
{
    max-height: 100%;
    max-width: 100%;
    vertical-align:middle;
} 
```

**编辑**

我找到了工作代码，感谢 Explosion Pills。对于任何试图完成这项工作的人，我建议使用这个 jQuery 方法和 Fiddle 链接[http://jsfiddle.net/9VfUS/1/](http://jsfiddle.net/9VfUS/1/)：

**工作查询**

```
var h = $('div#product-image').height();
$('div#product-image img').each(function ()
{
    var top = (h - $(this).height()) / 2;
    $(this).css("margin-top",top);
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:38:21.963

如果你可以使用 JavaScript，我会这样做，因为它肯定会让事情以你想要的方式工作。您正在使用`.map`错误的目的。你想要`.each`：

```
$('#product-image img').each(function () {
   var top = (h - $(this).height()) / 2;
   $(this).css("margin-top",top);
}); 
```

我假设`h`已经正确计算为最高图像或容器的高度或您拥有的东西。如果不是，那么你必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:38:20.147

试试这个，如果你事先知道你的图像的大小......

```
HTML:
<a href="#">
    <div class="product">
        <div class="product-image" data-image-loc="path_to_your_image">&nbsp;</div>
        <div class="product-name"></div>
        <div class="product-price"></div>
    </div>
</a>

CSS:
div.product-image {
    background-position:center center;
    background-repeat:no-repeat;
    background-color: transparent;
    background-attachment: scroll;
}
div.product-image-width-x-height {
    width:{width}px;
    height:{height}px;
}

JS:
$(document).ready(function() {
    $('div.product-image').each(function() {
        $(this).css({backgroundImage:url($(this).attr('data-image-loc'))});
    });
}); 
```

如果您不知道您的尺寸，那么将所有图像提供为新尺寸的调整大小脚本将解决该问题，您只需将宽度/高度 css 属性移动到 div#product-image CSS 声明。

# .net - Azure 未能在 Windows Server 2012 工作者角色上找到证书

> ID：13496327
> 
> 赞同：1
> 
> 时间：2012-11-21T15:18:51.067
> 
> 标签：.net, azure, x509certificate, .net-4.5, windows-server-2012

我目前正在尝试将我们的 Azure 云服务（Web 和 Worker 角色）升级到 .Net 4.5 Framework。为此，我们必须将 Azure 部署从 Windows Server 2008 更改为 Windows Server 2012。

这需要我们在 ServiceConfiguration 文件中将 OSFamily 从“1”更改为“3”。

当前系统

*   .Net 4.0
*   MVC3
*   英孚 4.4
*   Azure 工具 1.6
*   视觉工作室 2010
*   视窗服务器 2008

升级系统

*   .Net 4.5
*   MVC4
*   英孚 5
*   Azure 工具 1.8
*   视觉工作室 2012
*   视窗服务器 2012

当我们查询 Azure 证书以确定我们是处于“生产”还是“暂存”环境时，我遇到了一个问题。

以下代码行查找证书。为清楚起见而缩短。

```
// Open the certificate store for the current user.
            X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);
            certStore.Open(OpenFlags.ReadOnly);

            foreach (var cert in certStore.Certificates)
            {
                OutputToFile.OutputDataReceived("Cert - " + cert.FriendlyName + " -- Thumb -- " + cert.Thumbprint);
            }

            // Find the certificate with the specified thumbprint.
            X509Certificate2Collection certCollection = certStore.Certificates.Find(
                                 X509FindType.FindByThumbprint,
                                 thumbPrint,
                                 false);

            // Close the certificate store.
            certStore.Close(); 
```

如您所见，我将证书详细信息打印到日志文件中，以查看是否出现故障。在 OSFamily="1" (Windows Server 2008) 上，这可以完美运行。它找到证书。

但是，当我设置 OSFamily="3" (Windows Server 2012) 时，日志文件不会从循环中打印证书详细信息。

它在本地也可以正常工作。

这是 Windows Server 2012 的问题还是 Azure 部署的问题？自从迁移到 Windows Server 2012 后，我必须对我的证书执行额外的步骤吗？

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T11:26:29.263

我在这里找到了我的问题的答案：[Azure Autoscaling 在本地工作，但在部署时不工作](https://stackoverflow.com/questions/14448689/azure-autoscaling-works-locally-but-not-when-deployed/14468164#14468164)

在 OS Family 3 中，WaWorkerHost 运行在“NETWORK SERVICE”账户下，该账户没有私钥访问权限。所以我需要以提升的权限运行该角色。

# android - 第二次使用不同的 URLConnection 调用 getInputStream 时的 LocalCloseInputStream

> ID：13496335
> 
> 赞同：-1
> 
> 时间：2012-11-21T15:19:23.903
> 
> 标签：android, inputstream, httpurlconnection

我正在尝试从我的应用程序服务器下载两个 apk，因此在使用 HTTPURLConnection 的不同活动中一个接一个地下载，但第二次我得到一个空的输入流。在完成第一个活动之前，我已经取消了之前的连接，并且还根据 stackoverflow 上的一些答案使用了 setUseCaches(false) ，但我仍然面临这个问题。我还检查了日志，因为我认为问题在于获取 LocalCloseInputStream 而不是 LimitedInputStream，这是我第一次尝试时得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:20:55.107

经过大量研究后，我终于得到了解决方案。我刚刚添加

```
System.setProperty("http.keepAlive", "false"); 
```

在 AsynkTask 的 doInBackground 函数的第一行，它对我来说工作正常。希望它将来能帮助其他人。谢谢。

# android - android LocationListener 没有停止 GPS 的使用

> ID：13496336
> 
> 赞同：0
> 
> 时间：2012-11-21T15:19:33.013
> 
> 标签：android, service, gps, locationlistener, location-provider

在我的`service`中，在某些情况下，我无法阻止 GPS 搜索和耗尽设备电池。

*LocationListenerAgent.java*

```
@Override
public void onCreate() {
    thisContext = this;
    // Register ourselves for location updates

    networkListener = new LocationListenerAgent();
    gpsListener = new LocationListenerAgent();

    lmgrNet = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    lmgrGps = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
    gps_enabled = lmgrGps.isProviderEnabled(LocationManager.GPS_PROVIDER);
    lmgrNet.requestLocationUpdates("network", ONE_MINUTE, 10, networkListener);
    lmgrGps.requestLocationUpdates("gps", ONE_MINUTE, 10, gpsListener);

    super.onCreate();
}

@Override
public void onDestroy() {
    super.onDestroy();
    // Unregister listener
    lmgrNet.removeUpdates(this);
    lmgrNet = null;
    lmgrGps.removeUpdates(this);
    lmgrGps = null;
} 
```

当我在破坏应用程序的主要活动上按“返回”时，从我的应用程序的某些地方，这被称为：

```
@Override
protected void onStop() {
    if (mBound) {
        unbindService(mConnection); //this is a callback to the locationlisteneragent class to bind it to a service
        mBound = false;
    }
    super.onStop();
}
@Override
protected void onDestroy() {

    if (mBound) {
        unbindService(mConnection);
        mBound = false;
    }
    stopService(new Intent(this, LocationListenerAgent.class));
    super.onDestroy();
} 
```

也许我的`super.On`生命周期方法需要在该方法的代码之前。

我还需要做什么才能停止 GPS ？？？我见过其他人对此有疑问，答案似乎并不那么绝对。

在我的应用程序的其他情况下，GPS 确实停止了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:53:14.727

我解决了我的问题。我知道我在原始帖子中没有提到 mapview，但如果您也在使用 MapView，解决方案是 mapview 可以使用与您自己的 gps 位置侦听服务无关的 GPS 服务。

在您的地图视图中

`private MyLocationOverlay currLocationOverlay;`

```
@Override
protected void onStop() {
    if(currLocationOverlay!=null)
        currLocationOverlay.disableMyLocation();
    super.onStop();
}
@Override
protected void onDestroy() {
    if(currLocationOverlay!=null)
        currLocationOverlay.disableMyLocation();
    stopService(new Intent(this, LocationListenerAgent.class));
    super.onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:51:59.623

根据您发布的代码，我认为您没有删除位置更新。

在您的 onDestroy() 方法中，它应该是：

```
lmgrNet.removeUpdates(networkListener);
lmgrNet.removeUpdates(gpsListener); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T12:38:30.950

你也可以像这样停止

stopService(new Intent(AlertsActivity.this,PollingService.class)); android.os.Process.killProcess(android.os.Process.myPid());

# sql - 每个团队每天的 sql 选择信息

> ID：13496341
> 
> 赞同：0
> 
> 时间：2012-11-21T15:19:56.597
> 
> 标签：sql

我需要每天和每个团队从数据库中选择一些信息。我想看看每个团队每天购买了多少物品。例如，如果在 2012 年 11 月 21 日购买了 6 件商品，我希望我的结果显示：团队 1 购买了 3 件商品，团队 2 - 2 件商品，最后一个团队购买了 1 件商品。我可以使用以下方法获取一个团队的信息：

```
select count(CONVERT(date, getdate())) as Team1
from items
where team = 1
group by CONVERT(date, getdate()) 
```

但我不确定如何获得所有团队所需的信息。

**编辑**

我需要的结果是这样的：

```
Date      |Team1   | Team2   | Team3  
2012-11-21|2 items | 3 items | 0 items 
```

我的表结构是这样的：`Date, Product, Price, Team`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:32:14.733

你在这里需要的是`PIVOT`你的桌子，像这样：

```
SELECT 
  Date,
  SUM(CASE WHEN team = 'team1' THEN 1 ELSE 0 END) 'team1',
  SUM(CASE WHEN team = 'team2' THEN 1 ELSE 0 END) 'team2',
  SUM(CASE WHEN team = 'team3' THEN 1 ELSE 0 END) 'team3'
FROM Tablename
GROUP BY date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:23:38.157

你需要`GROUP BY`组队和约会。

```
SELECT datecol, team, COUNT(*)
FROM items
GROUP BY datecol, team 
```

根据您更新的要求并且不知道您的 DBMS 是什么：

```
SELECT a.datecol AS 'Date',
    (SELECT COUNT(*) FROM items WHERE datecol = a.datecol AND team = '1') AS 'Team1',
    (SELECT COUNT(*) FROM items WHERE datecol = a.datecol AND team = '2') AS 'Team2',
    (SELECT COUNT(*) FROM items WHERE datecol = a.datecol AND team = '3') AS 'Team3'
FROM items a
GROUP BY a.datecol 
```

# javascript - Primefaces 3.4 p：日历。如何以不同的语言（日文/中文）显示上午/下午？

> ID：13496348
> 
> 赞同：4
> 
> 时间：2012-11-21T15:20:20.653
> 
> 标签：javascript, calendar

我正在尝试使用`p:calendar`显示日期时间（时间戳）。

```
PrimeFaces.locales['zh_CN'] = {
  closeText: '关闭',
  prevText: '上个月',
  nextText: '下个月',
  currentText: '今天',
  monthNames: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
  monthNamesShort: ['一月','二月','三月','四月','五月','六月','七月','八月','九月','十月','十一月','十二月'],
  dayNames: ['星期日','星期一','星期二','星期三','星期四','星期五','星期六'],
  dayNamesShort: ['日','一','二','三','四','五','六'],
  dayNamesMin: ['日','一','二','三','四','五','六'],
  weekHeader: '周',
  firstDay: 1,
  isRTL: false,
  showMonthAfterYear: true,
  yearSuffix: '', // 年
  timeOnlyTitle: '仅时间',
  timeText: '时间',
  hourText: '时',
  minuteText: '分',
  secondText: '秒',
  ampm: false,
  month: '月',
  week: '周',
  day: '日',
  allDayText : '全天'
}; 
```

脚本定义

```
<p:calendar locale="zh_CN" pattern="yyyy年MM月dd日 HH点mm分ss秒 aa" value="#{xBean.dateStr}" showOn="button" /> 
```

但它只显示 PM/AM，比如 pattern = "yyyy年MM月dd日HH点mm分ss秒aa"。

> 2012年11月21日 21点34分55秒 下午

但我想让它像这样：

> 2012年11月21日 21点34分55秒下午

怎么会这样？</p>

谢谢。

# xcode - 如何禁用 Xcode 4 控制台换行？

> ID：13496349
> 
> 赞同：4
> 
> 时间：2012-11-21T15:20:21.123
> 
> 标签：xcode

我试图在我的日志输出中禁用换行，但我找不到该选项

如何在 Xcode 控制台中禁用换行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:38:49.933

我认为这是不可能的（从 Xcode 4.6 开始）。请在[radar.apple.com](https://bugreport.apple.com/)提交错误。

# android - 使用具有 GPL v3 许可证的代码

> ID：13496350
> 
> 赞同：1
> 
> 时间：2012-11-21T15:20:25.210
> 
> 标签：android, licensing

我目前正在阅读 Mario Zechner 的《Beginning Android Games》一书，他在书中为游戏提供了许多基础框架类。他还说源代码是在 GPL 版本 3 下获得许可的。如果我希望使用他提供的框架类开发和发布游戏，这对我意味着什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:30:49.057

我不是律师，但我之前不得不处理 GPL 许可问题。基本上，这意味着如果您使用任何代码，您必须在相同的许可条款下分发衍生作品。

旁注：即使您必须发布源代码，您也可以对软件收取费用。

# php - 序列化/反序列化或连接表

> ID：13496352
> 
> 赞同：0
> 
> 时间：2012-11-21T15:20:29.310
> 
> 标签：php, mysql

我需要将数据（具有 6 个值的关联数组）保存到数据库表中。什么更好 - 在令人兴奋的表中创建一个“文本”字段（并在读取时取消序列化字段值）或创建另一个表并每次都加入它？哪个变体执行得更快？

对不起我的英语不好 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:25:21.940

取决于您存储的数据。

对于现有表中的每一行，这个数组是否总是具有相同的键？然后将它们添加到该表中或加入它们。

数组是一种杂项键和值的大杂烩吗？那么存储序列化版本可能更有意义。

执行时间的差异可能非常微不足道，甚至不值得考虑。

# java - Android - 动态gridview（多列绑定行）

> ID：13496354
> 
> 赞同：1
> 
> 时间：2012-11-21T15:20:39.577
> 
> 标签：java, android, data-binding, gridview, dynamic

我想在 Android 中实现一个 gridview，它基本上由 4 列组成（它的作用类似于表格）。

这本质上是一个分布在 4 列（名称、数量、p1、p2）的项目列表。所以每行包含 4 列是唯一的 1 个项目。因此，我需要一种将这 4 列绑定在一起的方法，以便当我选择这 4 列中的任何位置时，将选择整行，同时返回“名称”列作为文本 ID。

有没有一种简单的方法可以做到这一点？这是我当前的 gridView 代码：

XML 布局：

```
<GridView
    android:id="@+id/gvShopCompleteList"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/spnShopCharacters"
    android:layout_above="@+id/linerBuyBtns"
    android:numColumns="1"
    android:fastScrollEnabled="true"
    android:scrollbarStyle="insideOverlay">
</GridView> 
```

动态内容的绑定：

```
GridView gridview;
static final String[] listItems = new String[] { "name","qty","p1","p2","itemname","5","100","1" };
gridview = (GridView)findViewById(R.id.gvShopCompleteList);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems);
gridview.setAdapter(adapter);

gridview.setOnItemClickListener(new OnItemClickListener() 
{
    public void onItemClick(AdapterView<?> parent, View v,int position, long id) 
    {
        Toast.makeText(getApplicationContext(),
        ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
    }
}); 
```

最后，我想添加的一个附加功能是使标题只读并突出显示与其他行不同的颜色。任何帮助在这里将不胜感激，我不必使用 GridView，但希望尽可能保持通用 android 的外观（在我的应用程序中保持一致）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:47:48.687

我做了一个小样本。下面是该行的布局文件，`R.layout.adapters_tablelikelistview`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/data1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/data2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/data3"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/data4"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:layout_weight="1" />

</LinearLayout> 
```

以及`Activity`使用上述布局的 and 适配器：

```
public class TableLikeListView extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        String[] data1 = new String[] { "Header1", "data1", "data2" };
        String[] data2 = new String[] { "Header2", "data1", "data2" };
        String[] data3 = new String[] { "Header3", "data1", "data2" };
        String[] data4 = new String[] { "Header4", "data1", "data2" };
        setListAdapter(new MyAdapter(this, R.layout.adapters_tablelikelistview,
                R.id.data1, data1, data2, data3, data4));
    }

    private static class MyAdapter extends ArrayAdapter<String> {

        private String[] data1, data2, data3, data4;

        public MyAdapter(Context context, int resource, int textViewResourceId,
                String[] data1, String[] data2, String[] data3, String[] data4) {
            super(context, resource, textViewResourceId, data1);
            this.data1 = data1;
            this.data2 = data2;
            this.data3 = data3;
            this.data4 = data4;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);
            if (position == 0) {
                // header
                v.setBackgroundColor(Color.GREEN);
            } else {
                v.setBackgroundResource(android.R.drawable.list_selector_background);
            }
            TextView t1 = (TextView) v.findViewById(R.id.data1);
            t1.setText(data1[position]);
            TextView t2 = (TextView) v.findViewById(R.id.data2);
            t2.setText(data2[position]);
            TextView t3 = (TextView) v.findViewById(R.id.data3);
            t3.setText(data3[position]);
            TextView t4 = (TextView) v.findViewById(R.id.data4);
            t4.setText(data4[position]);
            return v;
        }

        @Override
        public boolean isEnabled(int position) {        
            return position == 0 ? false : true;
        }       

    }

} 
```

# powershell - 试图让 log4net 与 PowerShell 一起工作（混合使用 log4net 配置文件）

> ID：13496363
> 
> 赞同：5
> 
> 时间：2012-11-21T15:21:03.920
> 
> 标签：powershell, log4net, log4net-configuration, log4net-appender

我一直在努力让 log4net 与 PowerShell 一起工作。我有以下 PowerShell 代码，该代码使用配置文件引入 log4net，然后尝试创建一个简单的日志文件条目，但出现错误。

```
Clear-History
Clear-Host
#
Write-Host "BEGIN: Importing module psm_logger.psm1"
Import-Module "C:\Users\Administrator\Desktop\ps\IIS\psm_logger.psm1" -Force
Write-Host "BEGIN: log4net configuration definition"
$log = New-Logger -Configuration "C:\Users\Administrator\Desktop\ps\IIS\logging\log4net.config" -Dll "C:\Users\Administrator\Desktop\ps\IIS\logging\log4net.dll"
Write-Host "END: log4net configuration definition"
Write-Host "BEGIN: log4net configuration DEBUG definition"
#$log.DebugFormat("Logger configuration file is : '{0}'", (Resolve-Path "C:\Users\Administrator\Desktop\ps\IIS\logging\log4net.config"))
Write-Host "END: log4net DEBUG configuration definition"
#======================
$ThisHostname = $env:COMPUTERNAME
#======================
Write-Host "BEGIN: Module/Snapin import/addition"
Write-Host ""
$log.Info("BEGIN: Module/Snapin import/addition")
#====================== 
```

上面引用的 psm_logger.psm1 文件包含：

```
function New-Logger
{
#Write-Host "BEGIN: New-Logger"
<#
.SYNOPSIS
      This function creates a log4net logger instance already configured
.OUTPUTS
      The log4net logger instance ready to be used
#>
     [CmdletBinding()]
     Param
     (
          [string]
          # Path of the configuration file of log4net
          $Configuration,
          [Alias("Dll")]
          [string]
          # Log4net dll path
          $log4netDllPath
     )
     Write-Verbose "[New-Logger] Logger initialization"
     $log4netDllPath = Resolve-Path $log4netDllPath -ErrorAction SilentlyContinue -ErrorVariable Err
     if ($Err)
     {
          throw "Log4net library cannot be found on the path $log4netDllPath"
     }
     else
     {
          Write-Verbose "[New-Logger] Log4net dll path is : '$log4netDllPath'"
          [void][Reflection.Assembly]::LoadFrom($log4netDllPath) | Out-Null
          # Log4net configuration loading
          $log4netConfigFilePath = Resolve-Path $Configuration -ErrorAction SilentlyContinue -ErrorVariable Err
          if ($Err)
          {
               throw "Log4Net configuration file $Configuration cannot be found"
          }
          else
          {
               Write-Verbose "[New-Logger] Log4net configuration file is '$log4netConfigFilePath' "
               $FileInfo = New-Object System.IO.FileInfo($log4netConfigFilePath)
               [log4net.Config.XmlConfigurator]::Configure($FileInfo)
               $script:MyCommonLogger = [log4net.LogManager]::GetLogger("root")
               Write-Verbose "[New-Logger] Logger is configured"
               return $MyCommonLogger
          }
     }
} 
```

log4net 的配置文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" **requirePermission="false"**/>
    </configSections>
    <log4net>
        <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
            <param name="File" value="C:\Users\Administrator\Desktop\ps\IIS\LOGS\LogTest2.txt" />
            <param name="AppendToFile" value="true" />
            <layout type="log4net.Layout.PatternLayout">
                <param name="Header" value="[Header]\r\n" />
                <param name="Footer" value="[Footer]\r\n" />
                <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
            </layout>
        </appender>
        <root>
            <level value="ALL" />
            <appender-ref ref="LogFileAppender" />
        </root>
    </log4net>
</configuration> 
```

运行时产生的输出和错误是：

BEGIN：导入模块 psm_logger.psm1 BEGIN：log4net 配置定义 END：log4net 配置定义 BEGIN：log4net 配置 DEBUG 定义 END：log4net DEBUG 配置定义 BEGIN：模块/管理单元导入/添加

**方法调用失败，因为 [System.Object[]] 不包含名为“Info”的方法。在 C:\Users\Administrator\Desktop\ps\IIS\IIS_localLogs.ps1:18 char:10 + $log.Info <<<< ("BEGIN: Module/Snapin import/addition") + CategoryInfo : InvalidOperation: (Info :String) [], RuntimeException + FullyQualifiedErrorId : MethodNotFound**

任何帮助将不胜感激！

（仅供参考：我最初是从最佳实践博客条目中获得此代码的：http: [//blog.octo.com/en/powershell-v2-my-best-practices/](http://blog.octo.com/en/powershell-v2-my-best-practices/) ，我发现这很有帮助）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:46:45.117

Found the solution...

The config file was corrupted by the presence of some asterisks towards the top. Removing those fixed the issue. Thank you to anybody who may have started to look at this and I hope this helps somebody else in the future.

The configuration file now looks like:

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" requirePermission="false"/>
    </configSections>
    <log4net>
        <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
            <param name="File" value="C:\Users\Administrator\Desktop\ps\IIS\LOGS\LogTest2.txt" />
            <param name="AppendToFile" value="true" />
            <layout type="log4net.Layout.PatternLayout">
                <param name="Header" value="[Header]\r\n" />
                <param name="Footer" value="[Footer]\r\n" />
                <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
            </layout>
        </appender>
        <root>
            <level value="ALL" />
            <appender-ref ref="LogFileAppender" />
        </root>
    </log4net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T13:09:39.797

New-Logger 是一个非常有用的 cmdlet，值得为更新版本的 Powershell 进行更新。psm_logger.psm1 当前在 PS V3 及更高版本下会出现 System.Void 错误。将装配负载更改为

```
[Reflection.Assembly]::LoadFrom($log4netDllPath) | Out-Null 
```

没有[Void]就解决了问题。

# sql - 在同一张表中的sql选择查询

> ID：13496368
> 
> 赞同：6
> 
> 时间：2012-11-21T15:21:23.787
> 
> 标签：sql, select

我有一个 newby sql 相关的问题。

假设我有这个简单的表：

```
A      B
------ ------
a      b
a      c
b      a
m      n
m      o
n      m 
```

我想查询仅具有“对应项”的记录，即我只想在表中`a b`有`b a`但我想跳过“反向链接”（即`b a`此处）时获取。总结一下，我想得到以下结果

```
A       B
------  ------
a       b
m       n 
```

此 sql 查询不起作用，因为在`b a`处理的情况下，`a b`它已从我的结果集中删除。

```
SELECT DISTINCT x1.A, x1.B
FROM TEST x1, TEST x2
WHERE x1.A = x2.B AND x1.B = x2.A -- all records /w counterparts only
AND x1.A NOT IN (SELECT B from TEST where B = x1.A) -- skip the "back links" 
```

WHERE 子句的第二部分不能按预期工作。

你有什么提示吗？对此的任何帮助将不胜感激。

问候彼得

ps 我正在使用 derby db。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T16:54:53.683

您可以将最后一行更改为：

```
AND x1.A < x1.B 
```

这假设您的列从不自引用（例如：a、a）或者您不希望出现循环引用。如果你这样做了，那么：

```
AND x1.A <= x1.B 
```

编辑：

您最好也使用显式连接：

```
SELECT DISTINCT 
    x1.A
    , x1.B
FROM 
    TEST x1
JOIN 
    TEST x2
    ON x1.A = x2.B 
        AND x1.B = x2.A -- all records /w counterparts only
WHERE x1.A < x1.B --Skip backreference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:49:09.850

```
SELECT Distinct
  case when tab1.A < tab1.B then tab1.A else tab1.B end as A,
  case when tab1.A > tab1.B then tab1.A else tab1.B end as B
FROM
  tab inner join tab tab1 on tab.B = tab1.A
WHERE
  tab1.B = tab.A 
```

**编辑：**根据您更新的答案，我认为您需要这个：

```
select distinct
  (case when tab1.A < tab1.B then tab1.A else tab1.B end) as A,
  (case when tab1.A > tab1.B then tab1.A else tab1.B end) as B
from TEST tab1 left join TEST tab2 on tab1.B = tab2.A 
```

它给出的结果与您的查询相同，但由于没有笛卡尔连接，因此速度要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T16:27:31.860

我没有要测试的 derby db，但我认为这应该可以。
由于您没有指定我们如何确定 a/b 和 b/a 之间的哪一个是反向链接，所以我使用了第一次出现的正确方向。

查询背后的想法是将同一个表连接在一起以获取反向链接和表示找到项目位置的 row_number。然后将带有位置的表格连接在一起，并取第一次出现的表格。

```
select TOT1.A, TOT2.B
(select distinct t1.A, t1.B, row_number() over() as num
from test t1
join test t2
on t1.A = t2.B and t1.B = t2.A) as TOT1
join
(select distinct t1.A, t1.B, row_number() over() as num
from test t1
join test t2
on t1.A = t2.B and t1.B = t2.A) as TOT2
on TOT1.A = TOT2.B and TOT1.B = TOT2.A and TOT1.NUM < TOT2.NUM 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:36:07.580

感谢到目前为止的所有答案

我的第一个问题有一个稍微修改（更简单）的版本。我不需要检查“对应”行，我只需要跳过后面的引用。

到目前为止，我修改了 fthiellas 解决方案（见下文）并且它有效。不知何故，我认为必须有一个更简单的解决方案。

```
select distinct
( case when tab1.A < tab1.B then tab1.A else tab1.B end ) as A,
( case when tab1.A > tab1.B then tab1.A else tab1.B end) as B
from TEST tab1, TEST tab2 
```

由于我不限于德比，我想知道切换到另一个数据库系统时 CASE 功能是否会出现问题。一个“通用”的解决方案会很好，它适用于所有不同的 sql 方言（mysql、postgres、oracle、mssql 等）

有任何想法吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T16:24:26.600

```
SELECT *
FROM ztable t
WHERE EXISTS (
    SELECT * FROM ztable x
    WHERE x.a = t.b AND x.b = t.a
    AND x.a > x.b -- tie breaker
    ); 
```

存在的优点是（关联的）子查询对外部查询不可见；所以`select *`只会扩展到表 t 的列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:12:10.380

在下面，您将找到用于创建我的表的 sql 代码以及插入的数据

```
CREATE TABLE TEST (A varchar(4), B varchar(4));
INSERT INTO TEST (ID,A,B) VALUES ('1','d','a');
INSERT INTO TEST (ID,A,B) VALUES ('1','c','a');
INSERT INTO TEST (ID,A,B) VALUES ('1','b','a');
INSERT INTO TEST (ID,A,B) VALUES ('1','a','xxx');
INSERT INTO TEST (ID,A,B) VALUES ('1','a','d');
INSERT INTO TEST (ID,A,B) VALUES ('1','a','c');
INSERT INTO TEST (ID,A,B) VALUES ('1','a','b');
INSERT INTO TEST (ID,A,B) VALUES ('2','g','a');
INSERT INTO TEST (ID,A,B) VALUES ('2','a','g');
INSERT INTO TEST (ID,A,B) VALUES ('3','f','b');
INSERT INTO TEST (ID,A,B) VALUES ('3','b','f');
INSERT INTO TEST (ID,A,B) VALUES ('4','s','r');
INSERT INTO TEST (ID,A,B) VALUES ('4','r','s');
INSERT INTO TEST (ID,A,B) VALUES ('5','r','t');
INSERT INTO TEST (ID,A,B) VALUES ('7','h','g'); 
```

如前所述，使用此查询：

```
select distinct tab1.ID,
   ( case when tab1.A < tab1.B then tab1.A else tab1.B end ) as A,
   ( case when tab1.A > tab1.B then tab1.A else tab1.B end) as B
from TEST tab1, TEST tab2 
```

...我得到了*想要的结果*：

```
ID  A  B
--  -- --
1   a  b
1   a  c
1   a  d
1   a  xxx
2   a  g
3   b  f
4   r  s
5   r  t
7   g  h 
```

抱歉，伙计们，也许我在这里想念一些东西，但您的解决方案似乎仍然无法按预期工作。

@fthiella：我测试了您的解决方案：

```
SELECT tab1.*
FROM TEST tab1 LEFT JOIN TEST tab2 on tab1.B=tab2.A
WHERE tab1.A<tab1.B OR tab2.A is null 
```

结果（`a/b`重复，`g/h`缺失）：

```
ID  A  B
--  -- --
1   a  b
1   a  b
1   a  c
1   a  xxx
2   a  g
3   b  f
4   r  s
5   r  t 
```

@wildplasser：看来这个解决方案也不起作用

```
SELECT * FROM TEST t
WHERE EXISTS (
    SELECT * FROM TEST x
    WHERE x.a = t.b AND x.b = t.a
    AND x.a > x.b -- tie breaker
    ); 
```

结果（`a/xxx`并且`r/t`丢失）：

```
ID  A  B
--  -- --
1   a  b
1   a  c
1   a  d
2   a  g
3   b  f
4   r  s 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-12T23:40:42.530

为什么你甚至需要tab2。这应该根据您想要的结果起作用。

```
select 
  distinct tab1.ID, 
  case when tab1.A < tab1.B then tab1.A else tab1.B end as A,
  case when tab1.A > tab1.B then tab1.A else tab1.B end as B  
from TEST tab1; 
```

# apache-flex - Adobe Flex 移动嵌入音频 m3u、ram 或 asx

> ID：13496374
> 
> 赞同：0
> 
> 时间：2012-11-21T15:21:43.600
> 
> 标签：apache-flex, audio, mobile, embed

是否可以在 Adob​​e Flex Mobile 中嵌入和播放 m3u、ram 或 asx 音频流？

我有一个音频源，我想在我的应用程序中提供，但在连接它时遇到问题。谢谢。

JH

```
import flash.media.Sound;
import flash.media.SoundLoaderContext;
import flash.net.URLRequest;

var s:Sound = new Sound();
var req:URLRequest = new URLRequest('url to my stream');
var context:SoundLoaderContext = new SoundLoaderContext(8000, true);
s.load(req, context);
s.play(); 
```

# ruby-on-rails - Rails 关联不存在。更好的方法？

> ID：13496375
> 
> 赞同：11
> 
> 时间：2012-11-21T15:21:51.197
> 
> 标签：ruby-on-rails, sqlite, ruby-on-rails-3.2

使用 Rails 3.2.9
我试图获取与没有所有者的组织相关联的项目列表。

我能够使用下面的方法获得一个数组列表，但对我来说似乎很难看。有一个更好的方法吗？

```
Items.all(:select => "items.id, items.name",
  :joins => "INNER JOIN organizations on items.organization_id = organizations.id",
  :conditions => "NOT EXISTS (select * from items k JOIN items_owners on items.id = items_owners.item_id) and items.organization_id = 1") 
```

表设置：
所有者：

*   ID
*   姓名

项目：

*   ID
*   姓名
*   组织 ID

物品所有者：

*   owner_id
*   item_id

组织：

*   ID
*   项目清单

楷模：

```
class Organization < ActiveRecord::Base
   attr_accessible :name

   has_many :items
end

class Item < ActiveRecord::Base
   attr_accessible :description, :name, :owner_ids, :organization_id

   has_many :items_owner
   has_many :owners, :through => :items_owner
   belongs_to :organization
end

class Owner < ActiveRecord::Base
   attr_accessible :name

   has_many :items_owner
   has_many :items, :through => :items_owner
end

class ItemsOwner < ActiveRecord::Base
   attr_accessible :owner_id, :item_id

   belongs_to :item
   belongs_to :owner
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T16:00:13.477

> 编辑：删除`.all`，添加`references`和添加使用`arel_table`

```
Items.joins(:organization).includes(:owners).references(:owners).
  where('owners.id IS NULL') 
```

如果你想同时使用`includes`：

```
Items.includes(:organization, :owners).references(:organization, :owners).
  where('organisations.id IS NOT NULL AND owners.id IS NULL') 
```

正如@Dario Barrionuevo 所写，它应该是belongs_to :organisation in Item

`arel_table`在第一个示例中使用：

```
Items.joins(:organization).includes(:owners).references(:owners).
  where(Owner.arel_table[:id].eq(nil)) 
```

> 在 Rails 5 中（来自@aNoble 的评论）：

```
Items.joins(:organization).left_joins(:owners).
  where(Owner.arel_table[:id].eq(nil)) 
```

但是`includes`如果要在代码中引用关系，使用仍然是更可取的，以避免额外的读取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-10-19T22:40:15.830

在 rails 5、6 中有很多方法可以做到 NOT EXISTS：

1.  不同的项目**OUTER JOIN** item_owners 其中 item_owners.id 为空
2.  items.id **NOT IN**（从 item_owners 中选择 item_id）
3.  **不**存在（从 item_owners 中选择 1，其中 item_id = items.id）
4.  where (select **COUNT** (*) from item_owners where item_id = items.id) = 0

在我的脑海中，我可以想到 4 种方法，但我似乎记得有 7 种。无论如何，这是一个切线，但可能会给你一些更适合你的用例的想法。

我发现使用 NOT IN 方法对我的团队来说是最容易创建和维护的。我们的目标是避免 arel，支持 owner 表中的 WHERE 子句（例如：admin owner），并支持多个级别的 rails :through。

```
Items.where.not(id: Items.joins(:owners).select(:id))
     .select(:id, :name)

Items.where.not(id: Items.joins(:items_owners).select(:id))
     .select(:id, :name)

Items.where.not(id: ItemOwners.select(:item_id)) 
```

我们使用第一个，但这些示例应该按照从最优化到最佳的顺序排列。也是从对模型的了解最少到最多的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T15:37:07.357

试试这个

```
Items.joins(:organisations).where(Items.joins(:items_owners).exists.not).select('items.id,items.name') 
```

# windows - 打印到 TCP、HTTP 或流的 Windows 虚拟打印机

> ID：13496378
> 
> 赞同：0
> 
> 时间：2012-11-21T15:21:56.377
> 
> 标签：windows, printing

是否有任何虚拟打印机可以将打印作业重定向到 TCP 或 HTTP 服务器，或者只是将它们传递给流（例如`stdin`其他一些进程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:29:55.000

打印机驱动程序的架构包括：

*   打印机驱动程序，它接收来自 GDI 的输入，并将其输出发送到...
*   端口监视器，它接收来自打印机驱动程序的输入，并将其输出发送到任何地方（例如本地硬件，或远程/网络打印机）。

因此，您可能正在寻找 a`port monitor`而不是`printer driver`.

[https://www.google.ca/search?q=printer+port+monitor](https://www.google.ca/search?q=printer+port+monitor)可以找到您可能感兴趣的各种页面。

# c++ - 使用std :: setw后如何从流输出时清除宽度？

> ID：13496387
> 
> 赞同：7
> 
> 时间：2012-11-21T15:22:18.957
> 
> 标签：c++, stringstream, iomanip, setw

我正在使用 std::stringstream 将固定格式的字符串解析为值。但是，要解析的最后一个值不是固定长度。

要解析这样的字符串，我可能会这样做：

```
std::stringstream ss("123ABCDEF1And then the rest of the string");
ss >> std::setw(3) >> nId
   >> std::setw(6) >> sLabel
   >> std::setw(1) >> bFlag
   >> sLeftovers; 
```

但是如何设置宽度以便输出字符串的其余部分？

通过反复试验，我发现这样做很有效：

```
 >> std::setw(-1) >> sLeftovers; 
```

但是正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:29:15.687

请记住，输入运算符`>>`在空白处停止读取。

使用 eg[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)获取字符串的其余部分：

```
std::stringstream ss("123ABCDEF1And then the rest of the string");
ss >> std::setw(3) >> nId
   >> std::setw(6) >> sLabel
   >> std::setw(1) >> bFlag;
std::getline(ss, sLeftovers); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:30:39.323

`std::setw`只影响一个操作，`>> bFlag`即将它重置为默认值，所以你不需要做任何事情来重置它。

即您的代码应该可以正常工作

```
std::stringstream ss("123ABCDEF1And then the rest of the string");
ss >> std::setw(3) >> nId
   >> std::setw(6) >> sLabel
   >> std::setw(1) >> bFlag
   >> sLeftovers; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:30:57.837

试试这个：

```
std::stringstream ss("123ABCDEF1And then the rest of the string");
std::stringstream::streamsize initial = ss.width(); // backup
ss >> std::setw(3) >> nId
   >> std::setw(6) >> sLabel
   >> std::setw(1) >> bFlag
   >> sLeftovers;

ss.width(initial); // restore 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T16:16:30.103

我很惊讶它`setw(-1)`实际上对你有用，因为我还没有看到这个文档，当我在 VC10 上尝试你的代码时，我只得到了`sLeftovers`. 我可能会使用`std::getline( ss, sLeftovers )`字符串的其余部分，这在 VC10 中对我有用。

# gdb - GDB 远程协议：如何分析数据包？

> ID：13496389
> 
> 赞同：14
> 
> 时间：2012-11-21T15:22:24.260
> 
> 标签：gdb, ecos

**我有：**

*   带有 eCos OS 的专有原型 ARM 板（基于 Cortex-M3）
*   该板具有已编程的 RedBoot 引导加载程序
*   串行线 (RS-232)
*   ARM 的 GDB 调试器 (arm-eabi-gdb)
*   主机操作系统是 Windows/Cygwin 和/或 Linux（实际上，没关系）

**问题：** GDB 调试器无法通过串行线路连接到目标。

**我想要**的是：嗅探 GDB 远程协议的数据包，以了解目标上的 GDB 存根是否处于活动状态并且正在运行。

**详细信息：** RedBoot 可以选择将目标的控制权传递给内置的 GDB 存根。我知道 RedBoot 还活着，我可以连接到它并通过串行线路向它发送命令。[RedBoot 手册](http://ecos.sourceware.org/docs-latest/redboot/redboot-commands-and-examples.html)说，可以通过键入 $ 或 + 符号（实际上是 GDB 远程协议数据包的前缀）来切换到 GDB 存根。当我发送这些符号时，它似乎适用于终端死机。但我不确定 RedBoot 是否使用 GDB 存根支持编译（不要问我为什么 :-)）。

然后，当我尝试使用我的 GDB 调试器连接到开发板时，我得到以下图片（在 Windows 上）：

```
(gdb) target remote COM3
Remote debugging using COM3
Ignoring packet error, continuing...
Ignoring packet error, continuing...
Ignoring packet error, continuing...
Ignoring packet error, continuing... 
```

端口正确，波特率也正确。实际上，如果我尝试对另一个未连接任何东西的串行端口执行相同的操作，我会得到相同的输出。

我想知道的是 GDB 存根是否发回任何东西？

直觉上我认为可能

```
set verbose on 
```

会有所帮助，但 GDB 手册说它的效果非常有限，我的情况超出了它。

是否可以使用启用调试日志记录的宏来编译 GDB 调试器？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-21T18:36:16.770

> 我想知道的是 GDB 存根是否发回任何东西？

这样做（之前`target remote`）：

```
(gdb) set debug remote 1 
```

# derby - 与 Apache Qpid 一起使用时，Apache Derby 将其文件存储在哪里？

> ID：13496416
> 
> 赞同：5
> 
> 时间：2012-11-21T15:23:55.543
> 
> 标签：derby, amqp, qpid

我正在使用[Derby DB](http://db.apache.org/derby/)作为我的[Qpid 代理](http://qpid.apache.org/)的存储。当作为嵌入式数据库运行时，试图找出 Derby 存储数据文件的位置。

任何人都知道文件的位置或如何设置要使用的目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:26:05.447

这是由[derby.system.home](http://docs.oracle.com/javadb/10.8.1.2/ref/rrefproper32066.html#rrefproper32066)属性决定的。

> 指定 Derby 系统目录，该目录包含包含您创建的数据库和文本文件 derby.properties 的子目录。

每个数据库都有一个以数据库命名的对应目录。此目录下的文件结构记录[在此处](http://db.apache.org/derby/docs/10.0/manuals/develop/develop13.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:07:25.813

您应该设置以下变量：

`QPID_HOME`- 指定您安装 Qpid 的位置，用于代理查找文件等

`QPID_WORK`- 定义代理创建的所有工作文件的位置，包括日志和**数据库**（即 BDB，如果使用）。请注意，`QPID_WORK`如果未设置，该变量默认为当前用户的主目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T19:29:06.003

我在 Derby 文档中看到 Derby 数据库由数据文件和一个 service.properties 文件组成。
如果您在 Windows 7 上使用 Netbeans 和 Java DB 别名 Derby，则所有数据库都存储在
C:\users\your_user_name\.netbeans-derby\your_database\seg0 中。

# sql-server - Unit Tests for Powershell SMO Restore Scripts

> ID：13496420
> 
> 赞同：2
> 
> 时间：2012-11-20T18:07:32.490
> 
> 标签：sql-server, powershell, smo, unit-testing

I am implementing a collection of scripts to manage backup files and restores. The scripts are based on this article: [http://www.solidq.com/sqj/Documents/2010%20September%20Issue/SQJ_003_pag._30-41.pdf](http://www.solidq.com/sqj/Documents/2010%20September%20Issue/SQJ_003_pag._30-41.pdf)

I want to develop Unit Tests around the scripts. I'm interested in using a framework such as [Pester](https://github.com/pester/Pester/wiki) or [PSUnit](http://psunit.org/)

My problem is that I don't understand what I should be looking for in the tests. I'm new to Unit testing, and most of what I have read relies on mocking up files, changing them with a function, and verifying that you can read the value you expect out of the file.

The functions I will build interact with a collection of backup files in some read-only fashion. My first inclination is to create a static directory with a couple of files and store it with my tests. Since the code only reads from the files, the test directory will always stay the same.

This would require storing these backup files in source control, which I don't love. I also don't think this follows in the true spirit of unit tests, but I'm not sure of a better way to do it. Any suggestions would be really appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:12:04.750

我在 CodePlex 项目[SQL Server Powershell Extensions的一些工作中使用了 PSUnit](http://sqlpsx.codeplex.com)

查看源区域中的 PSUnit 测试脚本：http: [//sqlpsx.codeplex.com/SourceControl/changeset/view/ed45217f200e#Test%20Scripts%2fTest.SQLServer.ps1](http://sqlpsx.codeplex.com/SourceControl/changeset/view/ed45217f200e#Test%20Scripts%2fTest.SQLServer.ps1)

Test.SQLServer.ps1 脚本中有一个测试函数，用于测试 invoke-sqlbackup 函数：

```
##function Test.Invoke-SqlBackup([switch] $Skip)
function Test.Invoke-SqlBackup([switch] $Category_InvokeSql)
{
    #Arrange
    $server = get-sqlserver "$env:computername\sql2k8"
    #Act
    Invoke-SqlBackup "$env:computername\sql2k8" "pubs"  "$($server.BackupDirectory)\pubs.bak" -force
    $Actual = $?
    Write-Debug $Actual
    #Assert
    Assert-That -ActualValue $Actual -Constraint {$ActualValue}
} 
```

对于任何基于 xUnit 的框架，您都将遵循安排、行动、断言。还可能有一个拆卸操作来执行清理后的任务。至于一般的单元测试，而不是专注于 PSUnit 或 Pester。阅读 xUnit/nUnit 框架概念。

# extjs - 煎茶触摸列表

> ID：13496425
> 
> 赞同：0
> 
> 时间：2012-11-21T15:24:23.313
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我是煎茶的新手。我遇到了一些奇怪的行为。不久我想用工具栏和下面的列表制作一个窗口。

**主要启动代码**：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'xxx',

    controllers: ['Main'],
    views: ['Home', 'Header', 'Footer', 'list.MainMenu'],
    stores: ['MainMenu'],
    models: ['MenuItem'],

    launch: function() {
        Ext.create('xxx.view.Viewport');
    }
}); 
```

**视口视图**：

```
Ext.define('xxx.view.Viewport', {
    extend: 'Ext.Panel',

    config: {
        fullscreen: true,

        items: [
            {
                xtype: 'headerpanel',
            },{
                xtype: 'MainMenu'
            }
        ]
    }
}); 
```

**标题视图**：

```
Ext.define('xxx.view.Header', {
    extend: Ext.Panel,
    xtype: 'headerpanel',

    config: {               
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: '<img src="lib/resources/images/x.png" />',  

                items: [
                    {
                        text: 'One',
                        align: 'left'
                    },{
                        text: 'Two',
                        align: 'right'
                    }
                ]
            }
        ]
    }
}); 
```

**梅牛观点**：

```
Ext.define('xxx.view.list.MainMenu', {
    extend: 'Ext.List',
    xtype: 'MainMenu',

    requires: ['xxx.store.MainMenu'],

    config: {
        itemTpl: '{title}',
        store: 'MainMenu'       
    }
}); 
```

**菜单商店**：

```
Ext.define('xxx.store.MainMenu', {
    extend: 'Ext.data.Store',

    config: {
        model: 'xxx.model.MenuItem',
        data: [
            {icon: 'a', title: 'A'},
            {icon: 'b', title: 'B'},
        ]
    }
}); 
```

**菜单型号**：

```
Ext.define('xxx.model.MenuItem', {
    extend: 'Ext.data.Model',   

    config: {
        fields: ['icon', 'title']
    }
}); 
```

这段代码的结果**只是没有任何列表的工具栏**。

![在此处输入图像描述](../Images/34469f3d66e5e89f0c77ad9fa8590aba.png)

我将布局设置为*“适合”*值，结果相反：只有我能看到的列表。

![在此处输入图像描述](../Images/667462d70ecce4252af2cb494c247714.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:55:34.777

您忘记为您的视口视图设置布局。没有布局，容器不知道如何显示内部项目。

尝试以下操作：

```
Ext.define('xxx.view.Viewport', {
    extend: 'Ext.Panel',

    config: {
        fullscreen: true,
        layout:'fit',
        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: '<img src="lib/resources/images/x.png" />',  

                items: [{
                    text: 'One',
                    align: 'left'
                },{
                    text: 'Two',
                    align: 'right'
                }]
            },{
                xtype: 'list',
                itemTpl: '{title}',
                store: 'MainMenu' 
            }
        ]
    }
}); 
```

[您可以在此处](http://www.sencha.com/learn/intro-to-layouts-in-sencha-touch-2)找到有关布局的更多信息

# ruby-on-rails - Cucumber scenarios don't run when is task invoked in a lib/tasks task

> ID：13496426
> 
> 赞同：9
> 
> 时间：2012-11-21T15:24:25.407
> 
> 标签：ruby-on-rails, cucumber, rake

I have the following task in lib/tasks:

```
    task :cuke_test_db_constraints do
      puts 'cuke_test_db_constraints'
      ENV['TEST_DB_CONSTRAINTS'] = '1'
      Rake::Task['cucumber'].reenable
      Rake::Task['cucumber'].invoke
    end

    task :default => :cuke_test_db_constraints

```

As you see, I want to run cucumber again after setting an env variable. However, while cuke_test_db_constraints task runs, cucumber doesn't run scenarios. The cucumber task itself runs, I checked it with adding debug output under :cucumber task in lib/tasks/cucumber.rake.

Any ideas? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T14:27:18.513

您应该声明`cucumber`任务依赖于`cuke_test_db_constraints`而不是强制调用任务。

```
task :cuke_test_db_constraints do
  puts 'cuke_test_db_constraints'
  ENV['TEST_DB_CONSTRAINTS'] = '1'
end

task :default => :cucumber
task :cucumber => :cuke_test_db_constraints 
```

# c# - How to ensure that all the code in a try code block executes or fails completely

> ID：13496430
> 
> 赞同：-3
> 
> 时间：2012-11-21T15:24:37.903
> 
> 标签：c#

please is there any way to ensure that all the code in a **c# try code block executes or fails completely.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:28:45.347

就使您的代码具有事务性而言，没有办法确保`try`块内的所有内容都将一起执行。

相反，在您的`catch`块中，您需要以某种方式恢复状态，或回滚更改。

我建议将任何重要的重要内容存储在内存（如果您担心应用程序完全关闭，则存储在磁盘上），然后在您的 catch 语句中恢复状态信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:42:09.217

从我的猜测来看，你的`try`街区里发生了很多事情。就像是：

```
try
{
     Func1();
     Func2();
} 
```

现在，在此示例中，您希望两个函数都通过或失败。因此，如果`Func1()`失败，您仍然希望它调用`Func2()`. 问题是如果`Func1()`失败，那么块就会失败。没有办法解决这个问题。如果第一部分失败，继续下去就没有意义了，所以`Func2()`甚至不会被调用。如果确实如此，您将不得不使用一个`if`语句，或者`try catch`为每个函数使用一个。

# security - 保护浏览器游戏中的 http 交易

> ID：13496436
> 
> 赞同：1
> 
> 时间：2012-11-21T15:25:03.407
> 
> 标签：security, encryption, flash, httprequest

我想建立一个系统，让许多人可以玩基于浏览器的简单（swf 或 html5）游戏（如蛇、赛车、卢多等）。这些游戏将非常简单，不需要在服务器中编写逻辑。得分最高的人将赢得一些奖品。

现在的问题是保护工作流程。我的方法可能不正确，请随时提出任何替代方案。
1.游戏开始时，会生成一个游戏ID。
2\. 游戏结束后，返回分数和游戏ID。

问题是，第 2 步可以被欺骗。任何人都可以发送类似的 http 请求，生成游戏 id 和任何分数。我怎么知道分数来自我的游戏而不是直接发送。

我想加密分数，但加密机制将再次出现在 javascript 中，可以很容易地复制。

请帮忙，先谢谢了。

编辑 1：我不担心嗅探器、会话劫持、中间人攻击。HTTPS 将处理所有这些。我担心用户本身。他可以在浏览器中右键单击 > 检查并检查正在发送的请求标头。他可以轻松地重放相同的请求标头（只需右键单击并在新选项卡中打开）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:29:55.097

我想这取决于数据的价值，但听起来价值非常低。

选择一个功能上不可能猜到的 ID。例如，一个 GUID（128 位随机生成的值）。如果有人猜到了，他们就会得到游戏。但从统计上讲，他们永远不可能做到正确。如果你通过 HTTPS 发送它，那么他们就无法嗅出它（我会通过 HTTPS 发送它，只是因为）。

如果你想做得更好，你可以选择一个随机密码来配合它，但我怀疑数学是否支持这一点是必要的。听起来您的数据价值非常低。真的有关系吗？

FWIW，我更担心的是那个决定拒绝你的人，要求你为不存在的游戏存储大量数据......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:43:09.367

您可以添加提交签名/编码层以隐藏数据，并添加 JS 代码混淆以使用户更难撤消该级别的保护。

但最终你无法解决问题。您将信任以预期方式运行您的代码给不受信任的客户端，这自然会产生不可信的输出。欺骗分数只是一个切入点——攻击者可以很容易地篡改客户端游戏逻辑的其他部分来作弊。

信任客户是一个长期存在的安全问题，几乎没有可能的解决方案。对于没有人关心的微不足道的高分表，您可能会通过大量的混淆来避开临时攻击者，再加上手动监控和修剪明显欺诈性的提交。

如果您正在考虑提供实际理想的奖品，您可能需要将游戏的某些重要部分移至您控制的服务器上。您需要保护哪些部分以及如何保护高度依赖于游戏，并且可能存在难以防御的残留攻击。（例如，考虑商业多人基于服务器的游戏在尝试防御诸如瞄准机器人之类的客户端黑客攻击时的长度。）

# java - How to split string in Java on whitespace?

> ID：13496437
> 
> 赞同：-6
> 
> 时间：2012-11-21T15:25:01.190
> 
> 标签：java, regex, string

> **Possible Duplicate:**
> [How do I split a string with any whitespace chars as delimiters?](https://stackoverflow.com/questions/225337/how-do-i-split-a-string-with-any-whitespace-chars-as-delimiters)

Yes, I tried to search it on google and stackoverflow, but no good results. I have a string, lets say: "Lets do some coding in Java" and I would like to got strings (split it on whitespaces):

Lets, do, some, coding, in, Java

I used `string.split("\\s")` for this, but know I need to use regex instead. Any ideas?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T15:27:21.577

```
String str = "Hello How are you";
String arrayString[] = str.split("\\s+") 
```

请使用这个

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:30:37.200

要将空格指定为拆分字符，您可以将`" "`其作为参数传递给`String#split`. 例子：

```
String test="Lets do some coding in Java";
    for(String token : test.split(" "))
        System.out.println(token); 
```

# iphone - 滚动视图更改页面后更改背景颜色

> ID：13496439
> 
> 赞同：0
> 
> 时间：2012-11-21T15:25:15.450
> 
> 标签：iphone, ios, uiscrollview

我有`scrollView`一个**UIScrollView**，`CustomCell`它是**UITableViewCell**的子类。我在一个单元格中有两个不同的页面。所以，我正在使用我`scrollView`的`pagingEnabled`模式。

我的问题是，我可以在通过第二页后更改我的`scrollView`背景颜色，然后在返回后将其设置回初始颜色吗？

到目前为止，我尝试使用两个不同的**UIScrollView**，然后我意识到我不能使用`pagingEnabled`模式。

更具体地说，我想要我的初始屏幕，宽度为 360，高度为 70，蓝色，我的第二个屏幕是绿色，从 360 像素开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:41:40.500

尝试使用 scrollViewDelegate

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
           CGFloat pageWidth = 360;
           int page = floor(scroll.contentOffset.x / pageWidth) ;

           if (page == 1) { /// second scroll page
               myView.backgroundColor = [UIColor greenColor];
           } else {  ///first scroll page
               myView.backgroundColor = [UIColor blueColor];
           }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:47:49.203

试试这个：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{
    int page = scrollView.contentOffset.x / scrollView.frame.size.width;
    if (page == 0){
    // first page's background color
    }
    else{
    // first page's background color
    }
} 
```

同样在`viewDidLoad`添加这个：

```
mainScroll.ContentSize = CGSizeMake(320*2, 70); 
```

# reporting-services - 如何在 SSRS 2008 中按聚合/计算列交互排序

> ID：13496443
> 
> 赞同：3
> 
> 时间：2012-11-21T15:25:23.530
> 
> 标签：reporting-services, ssrs-2008

我有一个存储过程，它返回一个详细的表

```
agentid (varchar) , 
totalcalls (int) , 
talktime (int - seconds), 
holdtime (int - seconds) 
```

每小时。

所以我有一个 SSRS tablix，它对给定时间段内每个 agentid 的总调用数（报告的参数）求和，也对通话时间和保持时间求和，然后我在 tablix 中有两列显示通话时间的百分比（总和（通话时间） /sum(talktime)/sum(holdtime)) 和保持时间百分比（公式类似）

我想提供的是让用户按这些百分比列中的任何一个进行排序，这样他们就可以看到谁说得最多、最少等等。

我的问题是，我如何对这些列进行交互排序？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T16:44:38.177

转到表格列标题文本框（通话时间）属性，单击“交互式排序”添加排序表达式作为您所需的百分比公式“（总和（通话时间）/总和（通话时间）/总和（保持时间））”然后单击确定..即使你可以使用相应的公式将排序添加到标题“holdtime”文本框。

![在此处输入图像描述](../Images/575b47124600d13736dd76a8b4d22c82.png)

# .net - Windows Azure Active Directory 权限管理

> ID：13496444
> 
> 赞同：0
> 
> 时间：2012-11-21T15:25:30.330
> 
> 标签：.net, azure, azure-web-roles, rights-management, azure-active-directory

看到这个链接

[Active Directory 权限管理服务 SDK 2.0](http://msdn.microsoft.com/en-us/library/windows/desktop/hh535290%28v=vs.85%29.aspx)

*Active Directory 权限管理服务 SDK 2.0 平台使开发人员能够构建利用 Active Directory 权限管理服务 (AD RMS) 或 Windows Azure Active Directory 权限管理 (AADRMS) 来提供信息保护的应用程序。*

尝试了解有关“Windows Azure Active Directory 权限管理 (AADRMS)”的更多信息。
它有一个名称 AADRMS，但对其进行搜索只能返回上面的链接。

我知道不止一个问题，但都是关于 Azure RMS 的。
服务器组件是否可以托管在 Azure Web 角色中？虚拟服务器？
在 Azure 下，身份验证是否来自 ACS（通过 Active Directory 联合服务）？

我看到 Office 365 开发人员站点可以在哪里使用 ACS。
这根本不是我的问题。
我们的服务不会创作或更改任何内容。
我们现有的文件需要 RMS 提供的安全级别。

如果桌面应用程序不支持 RMS，我们能否使用 RMS 保护 XPS 再现？

这个问题对我的问题（Azure 中的主机 RMS）表示“否”。
[在此处输入链接描述](https://stackoverflow.com/questions/10816075/deploy-active-directory-and-adfs-2-0-in-azure-virtual-machine-and-integrate-it-w)
使用 RMS 2.0(.1) 和 ACS 是否发生了变化？

如果答案是 NO 没有任何改变，请告诉我，我将删除该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:07:08.790

该名称实际上是 Azure Active Rights Directory Management (AAD RM)。我会解决这个问题。AAD RM 今天作为 Office 365 的一部分提供。您可以在此处获取有关此内容的更多详细信息：technet.microsoft.com/en-us/library/jj585016.aspx

几天前发布的 AD RMS SDK 2.1 RC 位于：[https](https://connect.microsoft.com/site1170/Downloads/DownloadDetails.aspx?DownloadID=48166) ://connect.microsoft.com/site1170/Downloads/DownloadDetails.aspx?DownloadID=48166 。（如果您尚未在 Microsoft Connect 上注册，则：转到 connect.microsoft.com，使用您的 Microsoft 帐户登录 > 目录 > 搜索权限管理服务 > 加入）

您也可以在[http://connect.microsoft.com/site1170/feedback](http://connect.microsoft.com/site1170/feedback)上写下您的问题。RMS 团队每天都会监控这些反馈，并可以在那里回答您的问题。

或者，您可以直接发送电子邮件至 askIPTeam@microsoft.com

# .net - Why does TimeSpan.Milliseconds evaluate to 0?

> ID：13496450
> 
> 赞同：2
> 
> 时间：2012-11-21T15:25:41.457
> 
> 标签：.net, timespan, milliseconds

Why does `TimeSpan.FromSeconds(30).Milliseconds` evaluate to `0` when it would seem more correct for it to evaluate to `30000`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:27:07.037

您必须使用`TotalMilliseconds`而不是`Milliseconds`. `Milliseconds`仅返回 DateTime "01:01:01:342" 的毫秒部分将返回 342 毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:27:06.710

`TotalMilliseconds`就是你要找的。 `Milliseconds`返回“剩余”毫秒（即部分秒）

# php - 单个文件夹还是多个文件夹，可存储数百家商店的 800 万张图像？

> ID：13496452
> 
> 赞同：3
> 
> 时间：2012-11-21T15:25:51.330
> 
> 标签：php, image

我正在开发一个价格比较网站，其中包含数百家商店和每家商店的数千张产品图片。

总共有 800 万张图像。

每张图片都有这个文件名格式：StoreID-productID.jpg

每个图像大小小于 10KB。平均 7KB。

该网站是用php和mysql开发的。

我有linux专用服务器。

我有很多磁盘空间。所以，这不是问题。

**我的问题是：**

1.  我应该将所有商店的所有图像保存在一个文件夹中吗？

因此，800 万张图像将位于一个文件夹中。

它会影响检索它们的效率吗？

目前我正在使用这种方法，想知道这种方法是否有任何缺点。

1.  我应该为每个商店保留一个文件夹并将该商店的图像保存在该文件夹中吗？

**像：**

```
images/storeID1/
images/storeID2/
.... 
```

请建议。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:30:13.017

取决于您使用的文件系统。（EXT3、NTFS、FAT 等）。

每个都有不同的文件夹大小限制和性能特征。

对于 800 万个文件，将尽可能多的文件夹分开是最安全的。然后，如果遇到扩展问题，您可以选择使它们成为不同的物理驱动器。

如果您使用的是 Linux，则可以轻松地在现有文件夹结构中安装另一个驱动器。您也可以使用符号链接。

```
images/Store1/FILES...
images/Store2 ---> /mount/SDA01/Store2/ (symbolic link to a separate drive) 
```

### 限制

有关不同文件系统限制的更多详细信息，请参阅此超级用户问题：[https ://superuser.com/questions/446282/max-files-per-directory-on-ntfs-vol-vs-fat32](https://superuser.com/questions/446282/max-files-per-directory-on-ntfs-vol-vs-fat32)

请注意，这些是系统可以处理的绝对限制。这些限制上限的性能肯定会受到影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:32:24.310

在我最近的一个项目中，随着时间的推移，我不得不存储大量图像。我们决定最好的办法是将它们分成编号的目录，每个目录中有一定数量的图像。我们的数据库将存储与之关联的项目的文件名、目录、外键、允许我们禁用它而无需删除内容的标志以及下载日期。从那以后效果很好。

# sql - 在sql中将空值和空值分组为一个

> ID：13496453
> 
> 赞同：3
> 
> 时间：2012-11-21T15:25:54.637
> 
> 标签：sql

我有一个查询，它提供了应用于数据库中事物的不同类别的细分：

```
select categories, count(*) from products 
group by categories 
```

数据是这样的：

```
NULL                56
                    42
FooCategory         12
BlahCategory        2 
```

我想分组`NULL`和`<blank>`

```
NoCategory          98
FooCategory         12
BlahCategory        2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:27:13.150

尝试

```
select ISNULL(categories,'') as Categories, count(*) from products 
group by ISNULL(categories,'') 
```

**更新**

有关所需参数，请参见此处

[ISNULL（检查表达式，替换值）](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T15:30:27.043

尝试

```
select categories, 
case when categories is null or categories = ' ' 
then 'noCategory' else categories end as grouped,
count(*) 
from products 
group by grouped 
```

# javascript - 如何将参数从 jsp 传递到 iframe？

> ID：13496457
> 
> 赞同：0
> 
> 时间：2012-11-21T15:26:18.160
> 
> 标签：javascript, jquery, jsp, iframe

我有一个 jsp，我将 iframe 称为 iframe1 。

```
<iframe id="iframe1" style="display:none;" height="430" width="675" src="Myjps.jsp" ></iframe> 
```

现在我有一个名为 myActualValue 的参数，它是从 bean 中获取的。现在我必须将此参数传递给 iframe1 。我该怎么做 ？

请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:27:47.223

在 URL 中传递它

```
src="Myjps.jsp?myval=something" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:33:22.030

在第一个jsp里面：

```
<iframe id="iframe1" style="display:none;" height="430" width="675" src="Myjps.jsp?myActualValue=<%= myActualValue %>" ></iframe> 
```

内部 Iframe1 (Myjps)

```
<script>
 var myActualValue = location.search.substring(1).split("=")[1];
</script> 
```

# mysql - mysql，在父母中包括第一个孩子

> ID：13496462
> 
> 赞同：1
> 
> 时间：2012-11-21T15:26:40.220
> 
> 标签：mysql, sql, left-join, parent-child

我有以下结构：

**专辑**

```
+----------+----------------------+-------------------+-------------------+--------+
| id_album | description          | name              | url               | status |
+----------+----------------------+-------------------+-------------------+--------+
|        1 | el primer album      | primer album      | primer-album      |      1 |
|        2 | El album del viernes | album del viernes | album-del-viernes |      1 |
|        3 | dasdas               | album 3           | album             |      1 |
+----------+----------------------+-------------------+-------------------+--------+ 
```

**照片**

```
+----------+-------------+-----------------------------+-------+---------+
| id_photo | description | image           | album | published           |
+----------+-------------+-----------------------------+-------+---------+
|        1 |             | 1_1361894_n.jpg |     1 | 2012-05-24 13:36:36 |
|        2 |             | 1_537885_n.jpg  |     1 | 2012-05-24 13:36:39 |
|        3 |             | 17227078_n.jpg  |     1 | 2012-05-24 13:36:40 |
|        4 |             | _6891390_n.jpg  |     1 | 2012-05-24 13:36:40 |
|        5 |             | 15743568_n.jpg  |     1 | 2012-05-24 13:36:44 |
|        6 |             | -sol.jpg        |     2 | 2012-06-29 09:55:23 |
|        9 |             | fondo2.gif      |     2 | 2012-08-13 16:46:10 |
|        8 |             | barra.gif       |     1 | 2012-07-10 12:13:04 |
+----------+-------------+-----------------+-------+---------------------+ 
```

* * *

实际上，我正在选择包含至少一张照片的所有相册：

```
SELECT a.id_album, a.name, count(p.id_photo) AS photos 
FROM album a
LEFT JOIN photo p ON a.id_album = p.album 
GROUP BY a.id_album 
HAVING photos > 0;

+----------+-------------------+--------+
| id_album | name              | photos |
+----------+-------------------+--------+
|        1 | primer album      |      6 |
|        2 | album del viernes |      2 |
+----------+-------------------+--------+ 
```

这里一切顺利。但是现在，我想知道是否可以将每个相册的一张照片包含在行中。例如：

```
| id_album | name | photos | id_photo | image | 
```

看上面我已经包括`id_photo`和`image`从*照片*表。但我不知道如何触发 sql 以获得该结果。我很感激你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:28:34.193

```
SELECT a.id_album, a.name, count(p.id_photo) AS photos, p.id_photo, p.image 
FROM album a
LEFT JOIN photo p ON a.id_album = p.album 
GROUP BY a.id_album 
HAVING photos > 0; 
```

如果它有任何照片，它很可能会首先插入相册的照片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:33:06.337

```
SELECT  a.*, b.*, c.totalCount
FROM    Album a
        INNER JOIN Photo b
            ON a.id_album = b.album
        INNER JOIN
        (
            SELECT  album, 
                    MAX(published) maxDate,
                    COUNT(*) totalCount
            FROM    Photo
            GROUP BY album
        ) c ON b.album = c.album AND
                b.published = c.maxDate
WHERE   c.totalCount > 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0c93ea/1)

# node.js - 如何使用 coffeescript 在 Express 中使应用程序全球化

> ID：13496465
> 
> 赞同：0
> 
> 时间：2012-11-21T15:26:41.687
> 
> 标签：node.js, coffeescript, express

我正在尝试在 CoffeeScript 中构建一个 Express 项目。我正在尝试使`app`变量成为全局变量，以便我可以在任何地方使用 - 从中​​读取配置设置。

到目前为止，我已经尝试过这个 -

在我的`app.coffee`档案中 -

```
app = express()
app.configure ->
    app.set 'host', 'localhost'
http.createServer(app).listen 8888, ->
    console.log 'Server started'
exports.app = app 
```

我想`host`在我的一个路由文件中访问上面设置的变量。所以，我尝试了我的路由处理程序，

```
exports.app.get('host') # I get this undefined 
```

如何做到这一点？我必须`require(app)`在我的路线文件中吗？`app.coffee`需要路由所在的模块，显然是为了路由，也就是说，

```
app.get '/', 'route_handler' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T16:52:37.343

您的路由处理程序将接收请求和响应对象。它们都引用了全局 app 变量。从那里您可以通过 req.app.settings.host 获取您通过 app.set 'host' 设置的值

```
app.get '/', (req, res) -> 
    console.log req.app.settings.host
    # your code goes here 
```

# c# - 在 C# 中动态地将网站翻译成阿拉伯语

> ID：13496469
> 
> 赞同：4
> 
> 时间：2012-11-21T15:26:56.943
> 
> 标签：c#, html, css, dom, arabic

目前，我在一个具有多种语言的大型网站上面临着一个令人讨厌的问题。到达网站后，它会检测您来自哪个国家/地区并提示您确认。确认后，它会从数据库中换出页面语言并显示相关语言。这是使用 jQuery 完成的。现在的问题是阿拉伯语读取 rtl，所以我需要：

-- 将样式表换成“rtl”版本

或者

-- 更改 HTML 标记并包含 "dir='rtl'" arrtribute

现在，我已经尝试了这两种方法，但都失败了。当我查看页面源代码时，它仍然显示没有“dir”属性的旧 Css 文件或 HTML 标记。如果我错了，请纠正我，但我认为这是由于 DOM 没有注册新的更改，因为它们是在 DOM 被实例化后通过 jQuery 异步发生的。

毕竟那些废话和tldr；
有没有更简单的方法来动态交换文本方向？如果这是一个 DOM 问题，我如何在异步回调后重新加载 DOM？

我已经在这个问题上待了几个小时，并且在 interwebz 上运气不佳。

欢迎并非常感谢任何和所有帮助。

亲切的问候，

威廉·弗朗西斯

编辑：

经过大量调查，我发现真正以阿拉伯语方式工作的唯一方法是回发。一旦选择了语言，您就可以进行回发，然后它只是一个从后面的代码更改样式表 HREF 属性的简单过程。似乎没有任何形式的 JavaScript 或 jQuery 可以在没有回发的情况下更改它并且仍然反映新的样式表。注意：您需要在每次回发时设置样式表 HREF，即通过母版页。样式表更改不会跨页面持续存在。

这是一个帮助很大的网站，它解释了很多关于使用 JavaScript 更改样式表的内容。可悲的是，它对我不起作用。

[http://www.alistapart.com/articles/alternate/](http://www.alistapart.com/articles/alternate/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:33:24.610

可能有几件事正在发生。当我处理类似的事情时，我发现这个页面非常有帮助，所以我强烈推荐它：

[http://www.w3.org/International/tutorials/bidi-xhtml/](http://www.w3.org/International/tutorials/bidi-xhtml/)

此外，如果您还没有这样做，请使用 Firebug 之类的工具在 AJAX 运行后检查生成的 DOM，以确保您看到的是 DOM 的更改状态，而不是页面的初始源。可以动态更改目录——您*可以*使用 Firebug 将新属性添加到该页面的 HTML 标记（设置 dir="rtl"）以查看它动态更改。可能是某些其他元素覆盖了方向，可能是 AJAX 更改未正确加载或其他原因。如果您可以发布更多代码，那么给出更好的答案会很有帮助，但我希望这会有所帮助。

# symfony - 在 symfony2 中，即使在 IS_AUTHENTICATED_ANONYMOUSLY 时允许访问，如何限制对特定角色的访问

> ID：13496471
> 
> 赞同：2
> 
> 时间：2012-11-21T15:26:59.143
> 
> 标签：symfony, fosuserbundle, access-control

我正在使用 FOSUserBundle，我有两个 ROLE：ROLE_A 和 ROLE_B。我希望 ROLE_A 被限制在特定区域，例如 /admin ：

```
access_control:
    - { path: ^/test/, roles: ['ROLE_B', 'IS_AUTHENTICATED_ANONYMOUSLY'] }
    - { path: ^/admin/, role: ROLE_A } 
```

使用这个access_control，只有ROLE_A 可以访问/admin，但是现在，当一个用户作为ROLE_A 连接时，我不希望他被允许看到/test。我可以为每个控制器使用这样的东西：

```
public function testAction()
{
    if (true === $this->get('security.context')->isGranted('ROLE_A')) {
        throw new AccessDeniedException();
    }

    // ...
} 
```

但是对于很多控制器，我认为这不是一个好主意......我需要使用几个防火墙或 ACL 吗？因为我觉得没必要...

# testing - 在模拟器上运行 Telerik Test Studio 测试

> ID：13496473
> 
> 赞同：1
> 
> 时间：2012-11-21T15:27:06.350
> 
> 标签：testing, console, ios-simulator, telerik-test-studio

我正在尝试在我的 Jenkins 服务器上添加一个步骤来自动测试我的 iOS 应用程序。我知道[如何](http://www.telerik.com/automated-testing-tools/blog/12-10-19/deploy-test-studio-for-ios-to-the-simulator.aspx)在模拟器上部署 TestStudio 应用程序，但我必须：

1.  从终端控制台在模拟器上运行 Test Studio 应用程序
2.  执行测试（仍然从终端）

我认为使用终端命令是将此操作集成到 Jenkins 工作中的最佳解决方案，但如果有人想出更好的主意，我会很高兴听到这个消息。知道如何执行这些任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:22:57.227

目前无法从命令行为 iOS 测试执行 Test Studio。

我们的下一个主要版本将于 2013 年初发布，其中包括一个 API 自动化框架。有了它，您可以编写可以从命令行触发并与 Jenkins 集成的编码单元测试。

# javascript - 关于 Javascript 变量类型预测的资源？

> ID：13496480
> 
> 赞同：1
> 
> 时间：2012-11-21T15:27:16.287
> 
> 标签：javascript, static-analysis, dynamic-typing, dynamic-analysis

引用这篇学术论文：[动态语言中的句法和语义预测](http://rd.springer.com/content/pdf/10.1007/978-3-642-05441-9_6)：

> IntelliSense 实际上是基于变量类型的知识。因此，描述变量的符号必须包含它们的类型，如果它是已知的并且可以解析的话。此外，在动态语言中，一个变量可以在代码的不同部分和不同的程序执行中携带不同的类型实例。变量也可以动态启动，**其类型只能在运行时知道**。因此，符号应该包含一些在语义分析中解析的可能类型列表。但总的来说**，动态语言无法明确解决**； **即使是单个程序执行也无济于事。**

我在哪里可以找到更多这方面的资源，我特别感兴趣的是上面引用中强调的陈述，最后是一些关于代码静态分析预测率的统计数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:13:23.230

这实质上是著名的图灵不可计算性结果：通常，您无法知道计算的作用（或作为类型生成）的答案。

虽然这在一般情况下是正确的，但它并没有说明具体情况。稍加思考就会让你相信，如果程序员不知道某个标识符的类型是什么，他们可能无法编写任何使用它的代码。所以原始编码人员知道（除非他们编写了错误的代码）。但是他们通过对系统的其余部分做出假设，然后强制执行这些假设（通常在其他地方）来知道。

静态分析器不知道程序员做了什么假设，所以它不能那么精确。但在许多特定情况下，静态分析可以推断出类型。问题是，它有多少代码，它能否使用构成代码背后语言的深层语义来解释该代码？

我总是被“分析器不能（像人类一样）好”的概念所困扰。如果分析人员可以访问与人类相同的信息，它应该至少一样好，而且通常更好；它可以以人们无法做到的方式跟踪交互。更重要的是，如果静态分析器无法访问您代码背后的关键假设，您怎么能指望其他程序员处理该代码？存在什么理由坚持他们知道某些代码块中使用的所有背景/假设？

所以我认为静态分析器的大部分限制，甚至适用于动态语言，都是由于我们不愿意或无法写下我们在编写代码时使用的假设造成的。（在那之后，设计一个适当强大的分析仪的能量问题）。

# c# - 在 C# 中使用自定义按钮创建消息框

> ID：13496486
> 
> 赞同：2
> 
> 时间：2012-11-21T15:27:30.747
> 
> 标签：c#, winforms

想知道是否可以创建一个带有自定义按钮的 MessageBox，类似于在 java 中使用 showOptionDialog 实现的功能？

```
String[]colors = {"Red", "Green", "Blue"};
int color = JOptionPane.showOptionDialog(null, "Please choose color", "Color please", 0, JOptionPane.INFORMATION_MESSAGE,null, colors, colors[0]);
if(color == 0)
{
  JOptionPane.showMessageDialog(null, "Red it is");
} 
```

这在 C# 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:29:40.460

恐怕答案是：你不能。

据我所知，没有办法改变 MessageBox 。您将需要编写自己的对话框（并不难）。

可能 MessageBox 类在最后进行了 WinApi 调用，这可能是主要原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T00:13:11.693

我认为这可以满足您的要求：

[http://snipplr.com/view/14245/custom-messagebox-buttons/](http://snipplr.com/view/14245/custom-messagebox-buttons/)

这是 C++ 中的类似方法，但有更多解释：

[http://www.codeproject.com/Articles/10037/How-to-change-the-MessageBox-window-Add-controls-a](http://www.codeproject.com/Articles/10037/How-to-change-the-MessageBox-window-Add-controls-a)

**注意：**请注意，WinApi 消息框经过优化，即使在内存非常低的情况下也能显示。因此操作系统可以在崩溃或内存不足的情况下显示消息。

如果你像上面那样乱用它，你可能会失去一些稳健性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:39:31.220

我不认为你可以。messagebox 类只有私有构造函数，所以你不能从它派生。然而，正如 SoMoS 已经写的那样，您可以使用 windows 窗体及其 showdialog() 方法制作自己的自定义消息框。希望它有所帮助

# d3.js - d3.js 的砌体算法

> ID：13496488
> 
> 赞同：4
> 
> 时间：2012-11-21T15:27:33.587
> 
> 标签：d3.js, jquery-masonry, jquery-isotope

d3.js 有砌体类型算法吗？（一个同位素[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)）

作为一个相关问题（如果不可用），我将如何去做？具体来说：我知道 d3 的进入/更新/退出范式，但它似乎独立处理所有点。如果我想根据我放置第一个点的位置更改第二个点的布局，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T16:33:23.563

矩阵布局可能是您正在寻找的，您可以在此处查看示例：http: [//bl.ocks.org/mbostock/1009139](http://bl.ocks.org/mbostock/1009139) 编辑：刚刚找到提供类似布局的第二个示例：[http://bl.ocks。 org/herrstucki/5684816](http://bl.ocks.org/herrstucki/5684816)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T16:44:56.740

这是 d3 的砌体布局： [https ://github.com/shawnbot/masonic](https://github.com/shawnbot/masonic)

演示： [http ://shawnbot.github.io/masonic](http://shawnbot.github.io/masonic)

# iphone - 如何在移动网站上使用触摸事件而不是点击事件

> ID：13496489
> 
> 赞同：1
> 
> 时间：2012-11-21T15:27:35.600
> 
> 标签：iphone, web, click, touch

iphone网站上的click事件似乎有延迟，但是`touchstart`or`touchend`可以正确响应，但是如何使用唯一的`touchstart`，`touchend`来`touchmove`模拟`click`事件呢？甚至在 iphone 上模拟网站上的长按事件？

我想我不能将点击处理程序直接绑定到`touchstart`or`touchend`事件，一种情况是当用户按下屏幕时，触发 touchstart 事件，但如果他不想要点击事件，他怎么能取消它，要么我无法将处理程序绑定到 touchend 事件。

那么如何使用 touchstart 和 touchend 事件来模拟 click 事件？是否有冲突或我应该提到什么？是否有一些帖子或文章谈论我如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:08:42.290

为此，我刚刚做了一个 chrome 扩展。它将 mousedown、mousemove、mouseup 事件转换为 touchstart、touchmove、touchend。它实际上模拟了iphone5。

[https://chrome.google.com/webstore/detail/touchphone-simulator/jijkpkhmnpbecppjhicgegndbbgfnngf](https://chrome.google.com/webstore/detail/touchphone-simulator/jijkpkhmnpbecppjhicgegndbbgfnngf)

我使用幻肢.js。如果你想要更多像手势这样的功能（我在我的扩展中排除了），请访问 brian 的 github。

[https://github.com/brian-c/phantom-limb](https://github.com/brian-c/phantom-limb)

# sql - SQL 在 Start 和 EndDate 中分隔小时

> ID：13496492
> 
> 赞同：0
> 
> 时间：2012-11-21T15:27:44.273
> 
> 标签：sql

我需要帮助来创建查询。我的问题是我有一个 StartDate 和 EndDate 并且需要在 60 分钟内将其分开。

```
DECLARE @STARTDATE AS SMALLDATETIME
DECLARE @ENDDATE AS SMALLDATETIME

SET @STARTDATE = '2012-11-21 11:03:00'
SET @ENDDATE = '2012-11-21 13:04:00' 
```

我需要退货：

```
Hour, Time
11  , 57
12  , 60
13  , 04 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:46:34.313

您可以使用递归 CTE。例如：

```
declare @startDate datetime = '2012-11-21 22:05:00'
declare @endDate datetime = '2012-11-22 01:06:00'

; with  TimeList as
        (
        select  @startDate as dt
        union all
        select  dateadd(hour, 1, dateadd(hour, datediff(hour, 0, dt), 0))
        from    TimeList
        where   dateadd(hour, 1, dt) < @endDate
        )
select  dt
from    TimeList
union all
select  @endDate 
```

该片段`dateadd(hour, datediff(hour, 0, dt), 0)`从日期中删除小时和分钟。它通过计算自 date 以来的小时数`0`，然后添加该小时数来做到这一点`0`。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/d41d8/1044/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:36:31.587

我不确定我是否理解您的意思，但这将以 60 分钟的间隔返回您开始日期后的小时和分钟。

```
DECLARE @STARTDATE AS SMALLDATETIME
DECLARE @ENDDATE AS SMALLDATETIME

DECLARE @time AS TABLE(id int identity(1,1), [hour] int, [time] int)

SET @STARTDATE = '2012-11-21 11:03:00'
SET @ENDDATE = '2012-11-21 13:04:00'

WHILE @STARTDATE < @ENDDATE
BEGIN
    SELECT @STARTDATE = DATEADD(MINUTE,60,@STARTDATE)
    INSERT INTO @time (hour,time)
    VALUES(DATEPART(HOUR,@STARTDATE),DATEPART(MINUTE,@STARTDATE))
END

SELECT * FROM @time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:38:15.357

你可以分三块做。第一段是第一个小时，60 减去分钟值，第二段是时间 = 60，开始 + 1 和结束之间的所有小时，第三段是结束分钟

然后将它们插入到临时表中，就像 abstractChaos 所做的那样。

像 AbstractChaos 一样插入临时表：

```
DECLARE @STARTDATE AS SMALLDATETIME
DECLARE @ENDDATE AS SMALLDATETIME

DECLARE @TIME AS TABLE(id INT IDENTITY(1,1), [HOUR] INT, [TIME] INT)

SET @STARTDATE = '2012-11-21 11:03:00'
SET @ENDDATE = '2012-11-21 13:04:00'

INSERT INTO @TIME (HOUR,TIME) 
VALUES (datepart(HOUR,@startdate) ,60 - datepart(MINUTE,@startdate) )

WHILE @STARTDATE < @ENDDATE
BEGIN
    SELECT @STARTDATE = DATEADD(MINUTE,60,@STARTDATE)
    INSERT INTO @TIME (HOUR,TIME) 
    VALUES(datepart(HOUR,@STARTDATE) , 60) 
END

INSERT INTO @TIME (HOUR,TIME) 
VALUES(datepart(HOUR,@enddate) , datepart(MINUTE,@startdate)) 
```

# php - 从旧方式 ajax 拆分返回数据

> ID：13496494
> 
> 赞同：0
> 
> 时间：2012-11-21T15:27:50.140
> 
> 标签：php, ajax

我有通过旧方式 ajax 添加新记录的页面，此代码是添加新记录并返回错误或完成结果消息，我如何在 div 上打印消息并在其他 div 上打印结果。我尝试但有人告诉我使用 JOSN，我该怎么做

```
<script language="JavaScript">
$(document).ready(function() {
});
$("#closeerr").live('click', function() {
    $("#gadget").hide();
});

       var HttPRequest = false;

       function doCallAjax(Mode,Page,ID) {
          HttPRequest = false;
          if (window.XMLHttpRequest) { // Mozilla, Safari,...
             HttPRequest = new XMLHttpRequest();
             if (HttPRequest.overrideMimeType) {
                HttPRequest.overrideMimeType('text/html');
             }
          } else if (window.ActiveXObject) { // IE
             try {
                HttPRequest = new ActiveXObject("Msxml2.XMLHTTP");
             } catch (e) {
                try {
                   HttPRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
             }
          } 

          if (!HttPRequest) {
             alert('Cannot create XMLHTTP instance');
             return false;
          }

          var url = 'AjaxItemsGroupsRecord.php';
          var pmeters = "titems_groups_GroupName=" + encodeURI( document.getElementById("items_groups_GroupName").value) +
                        "&titems_groups_sys_type_ID=" + encodeURI( document.getElementById("items_groups_sys_type_ID").value ) +
                        '&myPage='+Page +
                        "&tID=" + ID +
                        "&tMode=" + Mode;

            HttPRequest.open('POST',url,true);

            HttPRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            HttPRequest.setRequestHeader("Content-length", pmeters.length);
            HttPRequest.setRequestHeader("Connection", "close");
            HttPRequest.send(pmeters);

            HttPRequest.onreadystatechange = function()
            {

                 if(HttPRequest.readyState == 3)  // Loading Request
                  {
                   document.getElementById("mySpan").innerHTML = "looding";
                  }

                 if(HttPRequest.readyState == 4) // Return Request
                  {
                   document.getElementById("mySpan").innerHTML = HttPRequest.responseText;
                  }

            }

       }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:34:45.080

**如果 jQuery 是一个选项...**正如我的评论中提到的，我建议您尝试 jQuery [http://jquery.com/](http://jquery.com/)，因为您看起来对 JavaScript 相当陌生。它使 AJAX 请求更简单，您不必担心`XMLHttpRequest`跨浏览器工作。

要进行实际的 AJAX 请求，请参阅：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

现在，如果您想使用 JSON，您需要将数据转换为在您的 PHP 脚本中返回。这真的很简单，你只需传入数据`json_encode()`，它就会将数据转换为 JSON 字符串。然后，您只需将其回显，以便将其返回到 AJAX 请求。

```
echo json_encode($data); 
```

现在，如果您已将 AJAX 请求设置为期待 JSON 响应，那么您可以使用返回的数据。所以是这样的：

```
$.ajax({
    url: 'request.php',    // the php you want to call
    dataType: 'json'       // the type of data being returned
}).done(function(json) {
    // you now have a json object
}); 
```

**如果您只能使用本机 JavaScript...** 如果您不能使用 jQuery，那么它的工作方式大致相同。您的示例中将包含 AJAX 请求的代码。你仍然会`json_encode()`在 PHP 中使用。唯一的区别是当数据返回时，您需要像这样解析它：

```
JSON.parse(json); 
```

有关最后一点结帐的更多信息：[Parse JSON in JavaScript?](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

# wpf - 在 Itemscontrol 数据模板中使用 FindAncestor 在数据模板之外查找文本块

> ID：13496495
> 
> 赞同：7
> 
> 时间：2012-11-21T15:28:06.987
> 
> 标签：wpf, relativesource, findancestor

我有一个绑定到对象的 ItemsControl，在 ItemsControl 的数据模板中，我有两个文本块，我想将第一个文本块的文本属性绑定到位于此 ItemsControl 之外的另一个文本块。

我已经尝试在父数据上下文中找到对象，也只是尝试使用 Path=Text 找到 TextBlock

一个例子如下：

```
 <TextBlock Name="Name" Text="{Binding Name}"                                                            
     Grid.Column="0"   
     FontSize="{DynamicResource SmallSize}"
     TextWrapping="Wrap"
     TextAlignment="Right"
     Padding="4,0,0,0"
     Grid.ColumnSpan="2" Background="Aqua"/>

     <ItemsControl ItemsSource="{Binding TheValue}"                                                  
         Padding="4,0,0,0" 
         Grid.Column="2"  
         HorizontalAlignment="Right">

         <ItemsControl.ItemTemplate>
             <DataTemplate>
                 <WrapPanel>
                     <TextBlock Text = "{
                           Binding RelativeSource = 
                               {RelativeSource FindAncestor, 
                                AncestorType={x:Type Window}}, Path=Name}"                                                                                                            
                           Grid.Column="0"
                           FontSize="{DynamicResource SmallSize}"
                           TextWrapping="Wrap" ........................ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T16:21:56.957

```
{Binding RelativeSource = {RelativeSource FindAncestor,
                           AncestorType={x:Type Window}}, Path=Name} 
```

在这里，您要对 WPF 使用 Type Window 找到此控件的第一个父级，例如它是“ParentWindow”。此绑定发生在“ParentWindow”Name 属性之后。

如果要启用绑定到在相同 XAML 中定义的控件，可以使用 Binding.ElementName 属性显式设置源。这是您的代码示例：

```
<TextBlock Text = "{Binding ElementName=Name, Path=Text}"/> 
```

顺便说一句，使用控件名称作为“名称”不是很好。如果您在其后面使用此控件表单代码，则它看起来像 Name.Text = "some text"，这可能会导致难以理解正在发生的事情。

**更新：** 绑定到不同数据模板中控制 DataContext 属性的示例

```
class MainViewModel
{
    public Class1 C1 { get; set; }
    public Class2 C2 { get; set; }

    public MainViewModel()
    {
        C1 = new Class1 { S1 = "This is C1 data context" };
        C2 = new Class2 { S2 = "This is C2 data context" };
    }
} 
```

在 XAML 中：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"        
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:MainViewModel}">
            <StackPanel>
                <ContentControl Name="cc1" Content="{Binding C1}"/>
                <ContentControl Name="cc2" Content="{Binding C2}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Class1}">
            <TextBlock Text="{Binding S1}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:Class2}">
            <TextBlock Text="{Binding ElementName=cc1, Path=DataContext.C1.S1}"/>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ContentControl Content="{Binding}"/>
    </Grid>
</Window> 
```

但是，我不认为这样的方法是一个好方法。特别是，因为这可能是这个 DataTemplate 的许多项目。也许您需要将此委托给您的 ViewModel。

# qt - QML - 如何将动画应用于页面中的所有元素？

> ID：13496498
> 
> 赞同：0
> 
> 时间：2012-11-21T15:28:13.383
> 
> 标签：qt, qml, qt-quick

受 Windows 8“现代 UI”应用程序的启发，我想在页面加载时将动画应用于页面中的所有 QML 元素。这样，页面上的每个单独元素都会在出现时进行动画处理。

我似乎在 QML 文档中找不到任何有用的东西。在 XAML 中，我可以通过以下方式完成此操作：

```
<StackPanel Orientation="Vertical" VerticalAlignment="Center">
    <StackPanel.ChildrenTransitions>
        <TransitionCollection>
            <EntranceThemeTransition FromHorizontalOffset="100"/>
        </TransitionCollection>
    </StackPanel.ChildrenTransitions>
    [...]
</StackPanel> 
```

有 QML 等价物吗？

我已经想出了如何为单个元素执行此操作，但我想要一种简单的方法来将动画应用于某些父级的每个元素，就像上面的 XAML 示例中一样。这是我的单元素实现：

```
Rectangle {
    id: foobar
    opacity: 0.001
    anchors.centerIn: parent
    anchors.horizontalCenterOffset: -100

    Component.onCompleted: {
        foobar.anchors.horizontalCenterOffset = 0
        foobar.opacity = 1
    }

    Behavior on anchors.horizontalCenterOffset { PropertyAnimation{ duration: 250; easing.type: Easing.OutQuad } }
    Behavior on opacity { NumberAnimation { property: "opacity"; to: 1; duration: 250; } }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:00:54.313

不，QML 中没有等价物。您必须为每个子元素定义动画。

但是您可以轻松地定义一个 QML 组件来封装所需的动画行为并将其用于每个孩子。

```
/* SlidingRectangle.qml */

import QtQuick 1.1

Rectangle {
    id: foobar
    opacity: 0.001
    anchors.centerIn: parent
    anchors.horizontalCenterOffset: -100

    Component.onCompleted: {
        foobar.anchors.horizontalCenterOffset = 0
        foobar.opacity = 1
    }

    Behavior on anchors.horizontalCenterOffset { PropertyAnimation{ duration: 250; easing.type: Easing.OutQuad } }
    Behavior on opacity { NumberAnimation { property: "opacity"; to: 1; duration: 250; } }
}

/* main.qml */

import QtQuick 1.1

Item {
    anchors.fill: parent
    SlidingRectangle {
        /* child items of first rectangle */
    }
    SlidingRectangle {
        /* child items of second rectangle */
    }
    /* ... */
} 
```

这样，您还必须只定义一次动画。

# android - 通过模拟几个 android api 类在 android 项目上使用 JUnit？

> ID：13496501
> 
> 赞同：0
> 
> 时间：2012-11-21T15:28:27.407
> 
> 标签：android, junit, mocking

我的 android 项目中有一些只使用纯 java 代码的源代码。我为这些类创建了 UnitTests (JUnit) 来测试它们。

问题是这些函数在内部使用了一些 android 类。目前这些是 Log 和 Base64。

现在我正在寻找一种简单的方法来模拟这些类，但我无法这样做。

我用谷歌搜索了很多模拟工具，如 jmocking、mockito、robolectric 等，但我对这个库很困惑，没有一个可以工作。

我没有找到一个好的分步教程，它向我展示了如何简单地模拟一些 android 类，所以我没有得到这个 stub / classnotfound 错误。

问题是：

*   最常用的android模拟库是什么？

*   如何模拟一些我不直接在我的 UnitTest 中使用但由我调用的函数使用的类？

谢谢， 苏比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:34:31.603

您需要 robolectric 来模拟 Android 类：[http ://pivotal.github.com/robolectric/index.html](http://pivotal.github.com/robolectric/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:32:59.007

我不确定任何模拟库是否会完全支持 Android。Android 和 mock 不能相处有几个技术原因。

如果要对使用 Android API 的 java 对象进行单元测试，通常必须使用 android.test.* 中的测试用例类之一。Android 类通常需要一个 Android 上下文才能正常工作。

对于单元测试，您通常会注入一个依赖项，但也有限制。毕竟，您不会对乘法运算进行单元测试！您可以对 Android 类进行单元测试，一旦您对它们的工作感到满意，您就可以假设它们工作正常。

# java - Struts2 排除模式 - 它究竟是如何工作的？

> ID：13496504
> 
> 赞同：3
> 
> 时间：2012-11-21T15:28:29.733
> 
> 标签：java, web-applications, spring-mvc, struts2

我正在尝试将 Struts2 应用程序（版本 2.2.1.1）迁移到 Spring MVC，并且很难将 struts.xml 映射转换为 SpringMVC servlet 映射。

我的第一个问题是 Struts2 排除模式究竟是如何工作的。假设在我的 web.xml 中，我为 struts2 设置了一个过滤器/映射，如下所示：

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在我的 struts.xml 中，我定义了一堆已经在工作的操作。现在根据我的理解，基于 struts2 文档-

（从 Struts 2.1.7 开始，您可以提供一个逗号分隔的模式列表，当与请求 URL 匹配时，过滤器将通过该列表。这是通过配置选项 struts.action.excludePattern 完成的，例如在您的struts.xml) -

如果我添加排除模式，例如：

```
<constant name="struts.action.excludePattern" value="/*"/> 
```

那么过滤器应该被绕过并且上面提到的操作不应该解决，对吗？

由于某种原因，这没有发生，我的所有操作仍在适当地路由。

是什么赋予了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-13T11:04:39.250

struts 值必须遵守 java.util.regex.Pattern 类标准。 [http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

因此，如果您想避免所有 /rest/* url，例如：

```
/rest/[a-zA-Z_0-9]* 
```

如果，您需要处理具有多个参数的 REST Web 服务：

```
/rest/[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]* 
```

为了测试您的模式，您可以使用以下代码：

```
Pattern pattern = Pattern.compile("/rest/[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*/?[a-zA-Z_0-9]*");
String uri = "/rest/users/1/1";
System.out.println(pattern.matcher(uri).matches()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T19:30:15.397

排除模式是一个正则表达式。

如果你想排除一切，你会想要`.*`.

[http://struts.apache.org/2.x/docs/webxml.html#web.xml-SimpleExample](http://struts.apache.org/2.x/docs/webxml.html#web.xml-SimpleExample)

我不知道你*为什么*想要那个，因为你可以删除 S2 过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T11:29:10.193

我得到了对上一个答案的补充。[您可以按照此处](http://struts.apache.org/development/2.x/docs/webxml.html#web.xml-SimpleExample)所述定义排除项。

但是文档中似乎有一个错误。如果您需要转义一个点 '.' 你必须只使用一个反斜杠：

```
<struts>
<constant name="struts.action.excludePattern" value=".*unfiltered.*,.*\.nofilter"/>
...
</struts> 
```

# bash - bash & linux 符号，Jboss

> ID：13496508
> 
> 赞同：0
> 
> 时间：2012-11-21T15:28:47.890
> 
> 标签：bash, jboss, signals

我正在编写一个脚本来启动 Jboss、加载应用程序、向应用程序发送请求、关闭 jboss 并重复。但是我不知道如何从脚本中关闭 Jboss。目前我正在使用

```
pkill -9 java 
```

但我认为这是不对的，因为它会杀死进程，而不是关闭它。有没有类似于按 CTRL-C 的方法来关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:30:03.397

你想要一个简单的

```
pkill java 
```

从手册页：

> pkill 将向每个进程发送指定的信号（默认为 SIGTERM）

`SIGTERM`将向进程发送终止信号。如果进程写得好，它会捕捉到这个信号并执行有序的关闭。如果失败，那么您可以使用`SIGKILL`(-9) 强制终止，进程没有机会捕获并执行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:30:43.097

从不`kill -9 <PID>`默认使用。它分解了一些东西，比如*文件描述符*等。

开始`kill <PID>`单独运行，默认为`-15`信号。

看

```
man 7 signal 
```

我[应该以什么顺序向正常关闭进程发送信号？](https://stackoverflow.com/questions/690415/in-what-order-should-i-send-signals-to-gracefully-shutdown-processes/690631#690631)

**笔记**

*   `kill`或者`pkill`没有改变太多，触发相同的信号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T21:14:58.067

你真正想要的是：

pkill -f jboss

使用 pkill java 可以杀死在盒子上使用 java 的任何其他进程。

# c# - 如何在 Mono Android 应用程序中将数据源设置为网格视图？

> ID：13496509
> 
> 赞同：1
> 
> 时间：2012-11-21T15:28:50.590
> 
> 标签：c#, android, .net, gridview, mono

如何将数据源设置为 Android 应用程序？

就像在 .NET 中一样，我们`gridview.datasource = datatable;`的服务返回一个数据表，其中包含来自我的数据库的记录。现在我需要将 gridview 的数据源设置为从我的服务返回的数据表。我想在 Android Mono 中做同样的事情。

（我是 Android 开发的新手。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:34:55.973

使用[适配器](http://developer.android.com/reference/android/widget/Adapter.html)来实现这一点。创建您的适配器并调用`gridView.setAdapter()`. *[Grid View](http://developer.android.com/guide/topics/ui/layout/gridview.html)*中有一个指南。

# fortran - 将未分配的数组传递给没有显式接口的例程有什么问题吗？

> ID：13496510
> 
> 赞同：7
> 
> 时间：2012-11-21T15:28:52.507
> 
> 标签：fortran, subroutine

考虑：

```
program main
real, allocatable, dimension(:) :: foo
integer n
n=10
call dofoo(foo,n,1)
allocate(foo(n))
call dofoo(foo,n,0)
end program main

subroutine dofoo(foo,n,mode)
real foo(n)
integer i,n,mode
if(mode.eq.1)then
   n=6
   return
endif
do i=1,n
   foo(i)=i
enddo
return
end subroutine dofoo 
```

上面的代码有什么问题吗？（它适用于 gfortran）我第一次传入一个未分配的数组，但我没有触及它——标准中是否有任何东西可能导致它以系统依赖的方式运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T15:44:44.153

你几乎已经回答了你自己的问题。是的，按照标准，如果您在范围内没有接口，则将未分配的可分配数组作为实际参数传递总是非法的。

如果您在范围内有一个接口，则只有当虚拟参数也是可分配的时才合法。

是的，我被它咬了。我的工作是在调​​用之前分配为零大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-21T14:49:54.150

[伊恩布什](https://stackoverflow.com/a/13496808/3157076)的回答正确地指出问题中的使用是不允许的。不过，我们可以更精确。（括号中引用了 Fortran 2018 标准。）

在三种情况下，可以使用未分配的可分配实际参数：

*   当虚拟参数也是可分配的（仅自 Fortran 2003 或 Fortran 95+TR-15581 起）（15.5.2.6 p.2）
*   当虚拟参数是可选的普通参数时（仅自 Fortran 2008 起）（15.5.2.12 p.1、15.5.2.4 p.7）
*   当过程是内在查询功能时（15.5.2.4 p.7、16.1 p.2）

“未使用”的虚拟参数也不例外。无论可分配参数是数组还是标量，这些限制都适用。

任何其他用途意味着程序不符合标准（15.5.2.4 p.7、15.5.2.7 p.2）。

在符合标准的程序中，这些可接受的情况中的每一个都有一个可用的显式接口。可分配或可选的虚拟参数需要一个 (15.4.2.2 p.1(3))，并且可访问的内部过程始终具有可用的显式接口 (15.4.2.1 p.1)。

这些对程序的要求并不是编译器[必须能够分析](https://stackoverflow.com/a/57558908/3157076)的。这样一个不符合标准的程序并不一定意味着你在编译和运行的时候会看到问题。在问题程序的情况下，它不会试图以不好的方式取消引用，你很可能会侥幸逃脱。但是，编写不符合标准的程序并不好，依赖它们“工作”非常糟糕。

有一些事情可能会出错：

*   运行时检查
*   编译时检查
*   `value`具有属性的假人（同样，在这种情况下需要显式接口）

也就是说，您的程序在某些编译器/编译器选项下的行为可能会有所不同。如果你的编译器注意到你应该有一个可用的显式接口，它可能会拒绝编译程序。如果运行时检查参数是否已分配，程序可能会在进入子例程时中止。`value`如果在未分配实际参数的情况下尝试使用属性创建数组的匿名可定义副本，运行时可能会做一些非常意外的事情。

* * *

对于这个问题，还有另一个不合规需要担心。显式长度伪参数`foo(n)`意味着实际参数必须至少有`n`元素。未分配的数组至少没有`n`元素（对于任何元素，甚至为零`n`）。如果`foo`是`intent(out)`编译器将在其权利范围内做一些事情来“取消定义”实际参数的这些元素。这可能会失败。

# joomla - joomla meadowmart 搜索斜线错误

> ID：13496511
> 
> 赞同：0
> 
> 时间：2012-11-21T15:28:55.783
> 
> 标签：joomla, joomla2.5, virtuemart

我目前正在开发一个`joomla`站点，其中包含`virtuemart`我的书面组件，该组件运行良好，但是当我尝试使用`virtuemart`搜索搜索产品时出现问题，例如当我搜索`12/4 name`它时，它会替换`12/4 name`为`124 name`并且不显示任何结果。

所以问题是在哪里`sql-query`加载这些项目以便我可以修改它？还是有其他`plug-in`东西可以解决这个问题，`/`或者有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:13:15.057

所以过了一会儿，我终于解决了这个问题。我的修复并不好，因为我没有找到`virtuemart`组件从搜索查询中删除斜杠的确切位置，所以我只是这样做了......

由于`frontend`使用位于我的模块，`admin/components/com_virtuemart/modules`我必须编辑名为`product`. 在名为`sortSearchListQuery2`我的函数中添加了一些代码

```
 if ($useCore) {
//      if ( $this->keyword !== "0" and $group ===false) {
            if (!empty($this->keyword) and $this->keyword !== '' and $group === FALSE) {
                $this->setKeyWord($_GET['keyword']);//Added this line!
                        //$keyword = trim(preg_replace('/\s+/', '%', $keyword), '%');
                $keyword = '"%' . $this->_db->getEscaped ($this->keyword, TRUE) . '%"';
                //var_dump($keyword,$this->keyword,$_GET['keyword']); debug_zval_dump($keyword); debug_print_backtrace(); die(); 
```

在`frontend`名为 i 的视图`Category`中`view.html.php`替换`$keyword=vmRequest::uword('keyword', '', ' ')`为`$keyword = $_GET['keyword']`

这就是我解决这个问题的方法！

# php - 在具有 open_basedir 限制的服务器上包含一个 php 文件

> ID：13496512
> 
> 赞同：2
> 
> 时间：2012-11-21T15:29:00.790
> 
> 标签：php, include, document-root

我正在 000webhost.com 上建立一个网站，尝试使用包含一个 php 文件

```
<?php include ($_SERVER['DOCUMENT_ROOT']."/main/meta.php") ?> 
```

但服务器说
`Warning: include() [function.include]: Failed opening '/main/meta.php' for inclusion (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/USER_NAME/public_html/index.php on line 5
Warning: include() [function.include]: open_basedir restriction in effect. File(/usr/local/apache/htdocs/main/head.php) is not within the allowed path(s): (/home/:/usr/lib/php:/tmp) in /home/USER_NAME/public_html/index.php on line 7`

我应该怎么做任何其他方式来包含文件（我不打算使用 ../../main/meta.php），因为我的网站有这么多文件夹和子文件夹，我不想编辑每个文件。

有什么办法可以包含文件。
我有完整的 .htaccess 支持。

# xna - Apply3D 位置的 XNA 值

> ID：13496513
> 
> 赞同：0
> 
> 时间：2012-11-21T15:29:08.047
> 
> 标签：xna

我目前正在我的 3d XNA 游戏中处理 3d 位置音频（使用 SoundEffectInstance），但是我无法找到发射器和列表器位置的正确值。

我开始将听众的位置设置为摄像机位置（这是第一人称游戏），并将各种发射器的位置设置为发出声音的对象的位置。与我使用 Apply3D 方法之前相比，这样做完全静音了声音。

我对这些值进行了一些试验，并发现在我将位置的值变得更小之后，我开始听到声音。我的地图大小在 x/z 平面上的值从 0 到 5000（仅在 y 轴上在 0 到 ~500 之间移动），因此听者和发声体之间的距离通常会很高（与我需要听到的值相比任何介于 0 和 1 之间的东西）。

有什么方法可以控制 soundEffectInstance 的“近”和“远”吗？还是我应该标准化距离值？我阅读了几篇关于 3D 声音的指南，但我没有看到任何与距离值标准化或控制相关的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:42:50.993

After some more testing, I found that simply dividing the position values with a factor (arround 500 seems right for me) provides a good result. I dont know if this is the way It's supposed to be done, but it seems to be working fine.

# ios - 如何捕获 UIButton 事件：在自定义 UITableViewCell 实现中添加的 UIButton

> ID：13496520
> 
> 赞同：0
> 
> 时间：2012-11-21T15:29:32.787
> 
> 标签：ios, uitableview

在著名的 UITableCellView 中有一些[关于](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)如何将 UIButton 添加到 UITableCellView 的讨论

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

方法以及如何处理按钮点击。我已经对它们进行了测试，它们或多或少都可以正常工作。

我的设置略有不同。我想添加 UIButton - 事实上我有几个按钮位于不同的 UIImageViews - 在我的自定义 UITableCellView 类中使用滑动触摸隐藏/显示。为了简单起见，我们假设只有一个 UIImageView 添加到单元格的视图堆栈中，并且只有一个 UIButton：

这是我的 UITableViewCell 实现的相关部分：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
   self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
   if (self) {
     // sub menu
     self.tableCellSubMenu = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320.0, 88.0)];
     [self.tableCellSubMenu setImage:[UIImage imageNamed:@"cell_menu_back"]];
     [self addSubview:self.tableCellSubMenu];

     UIButton *but = [UIButton buttonWithType:UIButtonTypeCustom];                              
     but.frame = CGRectMake(10.0, 0, 77.0, 88.0);
     [but setImage:[UIImage imageNamed:@"cell_menu_icon_plus_up"] forState:UIControlStateNormal];
     [but setImage:[UIImage imageNamed:@"cell_menu_icon_plus_down"] forState:UIControlStateSelected];
     [but setImage:[UIImage imageNamed:@"cell_menu_icon_plus_down"] forState:UIControlStateHighlighted];
     [but addTarget:self action:@selector(tableCellButtonPress:) forControlEvents:UIControlEventTouchUpInside];
     [self.tableCellSubMenu addSubview:but];
     ...
     }
   return self;
} 
```

UIButton 被添加到 UIImageView，而 UIImageView 又被添加到单元格的视图堆栈中。为简单起见，我将按钮的目标配置为“self”。在我的实际设置中，目标是我处理按钮事件的 UITableViewController。我可以保证所有设置都正常工作（例如，通过将 UIImageView 替换为 UIControl，我们稍后会看到）。

不幸的是，在这种配置中，按钮上的 touch up inside 事件不会触发。唯一被调用的函数是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

在控制器中。通常，我将 UIButtons 放在 UIControl 视图上。话虽如此，当我在上面的代码中用 UIControl 替换 UIImageView 时，按钮事件按预期触发，但是，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

不再被调用。我两个都想要。

如何让它工作？

**更新1：**

我在自定义 UITableViewCell 实现中实现了以下方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint location = [((UITouch *)[touches anyObject]) locationInView:self];
    if (CGRectContainsPoint(but.frame, location)) {
      [self.touchButtonDelegate tableViewCellButtonTouched:self button:(UIButton*)but indexPath:self.touchButtonIndexPath];
    }
    [super touchesBegan:touches withEvent:event];
} 
```

我仍在使用“UIImageView”对几个按钮进行分组和定位。

self.touchButtonDelegate**是**UITableViewController。[此处](https://stackoverflow.com/questions/1171476/checkbox-image-toggle-in-uitableviewcell)提供了更完整的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:43:13.617

UIImageViews 没有启用用户交互。您应该将其添加到单元格本身或另一个 UIView。

# objective-c - iOS 使用块和变量进行枚举

> ID：13496522
> 
> 赞同：0
> 
> 时间：2012-11-21T15:29:39.403
> 
> 标签：objective-c, ios, properties, objective-c-blocks, enumeration

我有一个用于枚举的块和 .h 文件中的一些属性，并且想在我的块中访问它们我该怎么做？

这是我的代码：

```
.h file

@property (nonatomic,retain) NSMutableArray *productsArray;

.m file

NSArray *products = [jsonDict objectForKey:@"products"];
        [products enumerateObjectsUsingBlock:^(id obj,NSUInteger idx, BOOL *stop){
            //getting the products links on productsArray
            [self.productsArray addObject:[obj objectForKey:@"thumbnail_url"]];
        }]; 
```

但是我的 _productsArray 在块执行后是空的

我研究过 _block 变量名，但属性呢？

我只想在枚举一些特定项目后得到一个数组！

这是一个好习惯吗？

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:33:12.060

在向 productsArray 添加对象之前，您需要先初始化 productsArray：

```
self.productsArray = [NSMutableArray array]; 
```

# c++ - async_connect() 超时，多个线程执行 io_service.run()

> ID：13496523
> 
> 赞同：0
> 
> 时间：2012-11-21T15:29:41.460
> 
> 标签：c++, boost, boost-asio

我正在尝试用超时实现 async_connect()。

```
 async_connect_with_timeout(socket_type & s,
        std::function<void(BoostAndCustomError const & error)> const & connect_handler,
        time_type timeout); 
```

当操作完成时`connect_handler(error)`调用并`error`指示操作结果（包括超时）。

我希望使用[超时示例 1.51](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/timeouts/async_tcp_client.cpp)中的代码。最大的不同是我使用了多个工作线程来执行 io_service.run()。

保持示例代码正常工作需要进行哪些更改？

我的问题是：

1.  调用时：

    ```
    Start() {
        socket_.async_connect(Handleconnect);
        dealine_.async_wait(HandleTimeout);
    } 
    ```

    `HandleConnect()`甚至可以在另一个线程中完成`async_wait()`（不太可能但可能）。我必须`strand`包装`Start()`,`HandleConnect()`和`HandleTimeout()`吗？

2.  如果`HandleConnect()`第一次调用没有错误，但`deadline_timer.cancel()`或者`deadline_timer.expires_from_now()`因为`HandleTimeout()`“已在不久的将来排队等待调用”而失败怎么办？看起来示例代码可以`HandleTimeout()`关闭套接字。这种行为（我们在连接后愉快地开始一些操作后定时器关闭连接）很容易导致严重的头痛。

3.  如果`HandleTimeout()`和`socket.close()`被首先调用怎么办。是否有可能`HandlerConnect()`已经“排队”而没有错误？文档说：“任何异步发送、接收或连接操作都将立即取消，并完成`boost::asio::error::operation_aborted`错误”。在多线程环境中“立即”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:39:42.757

1.  如果要防止它们在不同线程中并行执行，则应使用 strand 包装每个处理程序。我猜一些完成处理程序会访问`socket_`或计时器，所以你肯定也必须`Start()`用一个链包裹。`io_service`但是使用 io_service-per-CPU 模型（即基于池的应用程序）不是更简单吗？恕我直言，你的头痛会少得多*。*

2.  是的，这是可能的。为什么会头疼？套接字由于“错误超时”而关闭，并且您开始重新连接（或其他）过程，就好像它由于网络故障而关闭一样。

3.  是的，这也是可能的，但同样，它不应该对正确设计的程序造成任何问题：如果`HandleConnect`你试图在一个封闭的套接字上发出一些操作，你会得到适当的错误。无论如何，当您尝试发送/接收数据时，您并不真正知道当前的套接字/网络状态。

# css - 使用 `position: relative` 和 `top: 50%` 垂直居中

> ID：13496530
> 
> 赞同：0
> 
> 时间：2012-11-21T15:29:59.493
> 
> 标签：css, position

我试图`.spinner`在以下标记（[小提琴](http://jsfiddle.net/aaronj1335/t8vJ9/)）中垂直居中元素：

```
<div class=grid>
  <div class=spinner></div>
  <table>
    <tr><td>row 1 cell 1</td><td>row 1 cell 2</td></tr>
    <tr><td>row 2 cell 1</td><td>row 2 cell 2</td></tr>
    <tr><td>row 3 cell 1</td><td>row 3 cell 2</td></tr>
  </table>
</div> 
```

使用以下样式：

```
.spinner {
    position: relative;
    top: 50%;
    left: 50%;
    height: 3px;
    width: 3px;
    background-color: red;
} 
```

如果我将该`.spinner` `top`属性设置为某个像素值，浏览器实际上会根据该值定位它，但如果我尝试将其设置为百分比，则它不起作用。

**如何垂直居中`.spinner`元素？**

注意：我知道我可以将`.grid`位置设置为相对位置并将`.spinner`位置设置为绝对位置，但我更愿意保持网格静态定位。`.grid`在不修改's 样式的情况下这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:36:12.787

首先，你应该使用`absolute`定位，用`.grid`set来`relative`定位。然后，在元素上设置`top`、`bottom`、`left`和`right`to 。由于您有一个固定的/ ，因此定位将完美地居中元素（[示例](http://jsfiddle.net/t8vJ9/7/)）：`0``.spinner``width``height``margin:auto;`

```
.grid {
    position:relative;
}
.spinner {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin:auto;
    height: 3px;
    width: 3px;
    background-color: red;
}

table {
    width: 100%;
} 
```

最后回应您的注释，不，元素的静态定位是不可能的`.grid`（除非您在`.grid`元素中添加包装器）。这是因为如果`.spinner`没有某种具有相对定位的容器（这是元素发挥作用的地方）`position:relative;`，该元素无法知道表格的高度尺寸。`.grid`您可以根据需要使用负边距或相对定位来解决此问题，但它永远无法容纳动态内容（使用当前的浏览器/标准集）。

# vb.net - 如何在 Pocket PC 中以编程方式拨打号码？

> ID：13496536
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:05.983
> 
> 标签：vb.net, windows-mobile-6.5

我正在为 Windows Mobile 6.5 使用 VS 2008 中的 Pocket VB.NET 创建一个应用程序。我在表格上有一个按钮。当我点击按钮时，我希望电话拨一个预先设置好的号码。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:38:44.503

起诉 Windows.Mobile.Telephony 命名空间怎么样？

```
public void Talk(string number)
Member of Microsoft.WindowsMobile.Telephony.Phone

Summary:
Places the phone call, using the specified string phone number.

Parameters:
number: The phone number to dial 
```

只需在您的智能设备项目中添加对 Windows.Mobile.Telephony 的引用（至少针对 Windows Mobile 5 SDK（或 6 或更高版本））：

![windows.mobile.telephony](../Images/bd19c99787a0735b030a7f83c87a781c.png)

# php - SonataAdminBundle 和密码编码

> ID：13496540
> 
> 赞同：1
> 
> 时间：2012-11-21T15:30:10.400
> 
> 标签：php, symfony, symfony-2.1, symfony-sonata, sonata-admin

我正在使用带有 FOSUserBundle 的 Symfony2.1.x 和 SonataAdminBundle。

我有一个包含密码字段的新实体。通过管理面板添加新条目时，如何对密码进行编码？

另外，在另一个实体表单上，如果字段为空，我该如何不将其更新为学说？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:15:07.647

passwordType 不是您想要的吗？ [http://symfony.com/doc/current/reference/forms/types/password.html](http://symfony.com/doc/current/reference/forms/types/password.html)

# node.js - NodeJs / ExpressJs URL

> ID：13496543
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:13.597
> 
> 标签：node.js, url-rewriting, express

我需要解析以这种形式出现的 URL 中的参数：

本地主机：8080/p/a=12345&b=acbd

读取变量后，我加载了一个 HTML 文件，该文件位于我的 express 服务器的公共文件夹中。这行得通。问题是我的 HTML 文件加载了几个 JS 和 CSS 文件，并且由于路径是**localhost:8080/p/**，因此找不到具有相对路径的文件。

我需要的是类似于 apache URL 重写的东西，我可以将流量发送到特定文件并更改 URL 以按照我想要的方式查看。我还没有找到可以做到这一点的节点模块，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:31:10.777

如果您使用静态中间件来提供静态文件，则可以使用

```
app.use('/p', express.static(__dirname + '/public')); 
```

代替

```
app.use(express.static(__dirname + '/public')); 
```

[您可以在 Express 的文档中](http://expressjs.com/api.html#app.use)查看更多详细信息

# actionscript-3 - How can I like a Fanpage with the Facebook Graph API

> ID：13496546
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:29.307
> 
> 标签：actionscript-3, facebook-graph-api, facebook-like, facebook-actionscript-api

it is possible to lika a FanPage with the actionscript3 Facebook Api or the Graph API?

I used follow methode:

```
Facebook.api(Page_ID + "/likes/", getLikeHandler, URLRequestMethod.POST); 
```

But I get follow Exception

```
{
  "error": {
    "message": "(#3) Application does not have the capability to make this API call.", 
    "type": "OAuthException", 
    "code": 3
  }
} 
```

Do you have an solution for my problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:35:17.783

This is currently not possible via any of the public Facebook APIs. You can only publish 'likes' for Open Graph objects.

# javascript - 从 PopUp 向父级返回值

> ID：13496547
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:33.753
> 
> 标签：javascript, popup

我有一个难题，不知道这是否可能：

我的父窗口上有一个链接，它打开一个带有网页的弹出窗口：forum.website.com。该网页是一个带有论坛的页面，用户可以在其中发布新主题。他键入主题和内容，然后提交主题。网址现在是：forum.website.com?board=1&topic=X 其中 X 是唯一 ID。现在这个 ID 应该被发送到父窗口，所以它知道新生成的主题的 id。我怎么能用javascript做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:34:14.300

使用 sessionStorage 解决这个问题：

[http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/](http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:39:40.163

**父/源窗口代码：**

```
var storedData;
function setData(id){
    storedData = id;
} 
```

**弹出代码：**

```
function topicPosted(id){
    opener.setData(id);
    // Do stuff
} 
```

当您在 IE 中关闭弹出窗口时，弹出窗口分配给开启者对象的数据会丢失。这就是为什么您需要从弹出窗口调用函数到开启程序，并使用数据作为参数。然后该函数将数据设置（复制）到 opener 中的变量。如果不是 IE，你可能只是这样做了：

```
function topicPosted(id){
    opener.storedData = id;
    // Do stuff
} 
```

# css - CSS 转场交换功能

> ID：13496549
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:38.167
> 
> 标签：css, css-transitions

我正在使用 CSS 过渡来制作滑出面板。我正在使用 Javascript 像这样触发动画；

```
function slidein()
    {
    document.getElementById('container').className = 'slidein';
    }

    function slideout()
    {
    document.getElementById('container').className = 'slideout';
    }

<div onclick="slideout()">Click</div> 
```

我需要知道的是，一旦我触发了第一个函数，我该如何交换该函数，以便用户可以关闭面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:54:34.747

尝试这样的事情：

```
var slideState = 'slidein';

function slide() {
    if ( slideState == 'slidein' ) slideout();
    else slidein();
}

function slidein() {
    document.getElementById('container').className = 'slidein';
    slideState = 'slidein';
}

function slideout() {
    document.getElementById('container').className = 'slideout';
    slideState = 'slideout';
}

<div onclick="slide()">Click</div> 
```

# java - Java H2 数据库框架

> ID：13496552
> 
> 赞同：2
> 
> 时间：2012-11-21T15:30:42.427
> 
> 标签：java, database, frameworks, h2

我知道这是一个新手问题，但我就是这样。我正在用java编写一个应用程序，它有很多H2数据库查询到目前为止我已经编写了从数据库中提取我需要的数据的方法，因为这是我知道的唯一方法。我的问题是，有没有一种更简单的方法可以更有效地从我的数据库中获取数据并减少工作量。在我的研究中，Spring 做了类似的事情，但如果是这样，我一直无法找到关于如何实现它的好信息。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:37:58.600

我想说有更好的方法叫做[Java Persistence API](http://en.wikipedia.org/wiki/Java_Persistence_API)。它将使您的代码 ORM 不可知，并提供一些灵活性。

JPA 2.0 非常丰富，可以满足您的所有需求。所以我认为你不应该直接使用 Hibernate，而应该尽可能地使用 JPA。请注意，Hibernate 是 JPA 2.0 提供者。

请参阅以下示例[使用 Hibernate 3.5 和 JPA 2.0 注释创建好的 DAO](http://www.theserverside.com/tutorial/Creating-DAOs-with-Hibernate-35-JPA-20-Annotations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:36:37.337

我也在大型环境中大量使用 H2。我的建议是使用 JPA，尤其是 Hibernate，因为它是最流行的实现之一。

您要避免的是编写本机 sql，就好像您要更改数据库一样（如果您是），您将遇到许多本机 sql 问题。JPA 通过定义类似于 SQL 的 JPQL 来解决它，但可以在任何数据库上工作。

hibernate 的另一个巨大好处是可以使用 L2 缓存，这可以大大加快您的应用程序的速度。

最后一个好处可能与您最相关 - 设置可能需要更长的时间，但是一旦设置好，使用纯 java 的数据库就容易多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:23:54.413

有很多选择。正如 ShyJ 所写，[Spring Data JPA](http://www.springsource.org/spring-data/jpa)就是其中之一。许多人使用[休眠](http://www.hibernate.org/)。您可以使用其他库，例如[SimpleORM](http://www.simpleorm.org/)。

但我想知道“哪个更好”是否是 StackOverflow 的正确问题类型。有很多方法可以“正确”地做到这一点，并且需要考虑很多事情。

# drupal - 如何在 drupal apache solr 中索引未发布的节点

> ID：13496556
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:49.037
> 
> 标签：drupal, solr, drupal-7, drupal-modules

我在 drupal 7 中使用 apache solr 模块。我必须索引未发布的节点。

但是 drupal apache solr 模块只索引已发布的节点。

索引未发布节点是否有任何补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:17:59.340

您可能需要关注此线程：[索引未发布的节点](http://drupal.org/node/632282)。目前没有可用的补丁，但如果需要，您会发现一些提示来构建您自己的自定义模块。

# autofac - 使用 MiniProfiler 和 EF 5 和 Autofac 分析 DbContext 的正确方法

> ID：13496557
> 
> 赞同：6
> 
> 时间：2012-11-21T15:30:51.020
> 
> 标签：autofac, entity-framework-5, dbcontext, mvc-mini-profiler

MiniProfiler[站点](http://miniprofiler.com/)提供了以下用于生成实体框架的代码`ObjectContext`：

```
public static MyModel Get()
{
  var conn =  new StackExchange.Profiling.Data.EFProfiledDbConnection(GetConnection(), MiniProfiler.Current);
  return ObjectContextUtils.CreateObjectContext<MyModel>(conn); // resides in the MiniProfiler.EF nuget pack
} 
```

但是，使用 Entity Framework 5，我没有使用`ObjectContext`- 而是使用`DbContext`. 我无法在此处插入模型名称，因为该`CreateObjectContext<T>()`方法需要`T`类型为`ObjectContext`. （出于同样的原因，[这个答案](https://stackoverflow.com/a/11230573/51)中给出的代码也不起作用）。

此外，我正在使用 autofac 来初始化我的 Db 连接。这是使用以下内容注册的（`MyData`=我的 EF DataContext 的名称）：

```
Builder.RegisterType<MyData>().As<DbContext>().InstancePerHttpRequest(); 
```

所以结合两个部分：如何使用 autofac 来初始化绑定到 MiniProfiler.EF 的 DbContext？如果那不可能，至少我该怎么做第一部分（为 MiniProfiler.EF 创建工厂方法以返回 a `DbContext`）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T17:05:59.523

我刚刚得到这个工作：

```
public static class DbContextUtils
{
    private const BindingFlags PrivateInstance = BindingFlags.NonPublic | BindingFlags.Instance;

    public static T CreateDbContext<T>() where T : DbContext
    {
        return CreateDbContext<T>(GetProfiledConnection<T>());
    }

    public static T CreateDbContext<T>(this DbConnection connection) where T : DbContext
    {
        var workspace = new MetadataWorkspace(new[] { "res://*/" }, new[] { typeof(T).Assembly });
        var factory = DbProviderServices.GetProviderFactory(connection);

        var itemCollection = workspace.GetItemCollection(DataSpace.SSpace);
        var providerFactoryField = itemCollection.GetType().GetField("_providerFactory", PrivateInstance);
        if (providerFactoryField != null) providerFactoryField.SetValue(itemCollection, factory);

        var ec = new EntityConnection(workspace, connection);

        return CtorCache<T, DbConnection>.Ctor(ec);
    }

    public static DbConnection GetProfiledConnection<T>() where T : DbContext
    {
        var dbConnection = ObjectContextUtils.GetStoreConnection("name=" + typeof(T).Name);
        return new EFProfiledDbConnection(dbConnection, MiniProfiler.Current);
    }

    internal static class CtorCache<TType, TArg> where TType : class
    {
        public static readonly Func<TArg, TType> Ctor;
        static CtorCache()
        {
            var argTypes = new[] { typeof(TArg) };
            var ctor = typeof(TType).GetConstructor(argTypes);
            if (ctor == null)
            {
                Ctor = x => { throw new InvalidOperationException("No suitable constructor defined"); };
            }
            else
            {
                var dm = new DynamicMethod("ctor", typeof(TType), argTypes);
                var il = dm.GetILGenerator();
                il.Emit(OpCodes.Ldarg_0);
                il.Emit(OpCodes.Newobj, ctor);
                il.Emit(OpCodes.Ret);
                Ctor = (Func<TArg, TType>)dm.CreateDelegate(typeof(Func<TArg, TType>));
            }
        }
    }
} 
```

它基于[MiniProfiler 中的`ObjectContextUtils`](https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling.EntityFramework/ObjectContextUtils.cs)代码。

你像这样使用它：

```
builder.Register(c => DbContextUtils.CreateDbContext<MyData>()).As<DbContext>().InstancePerHttpRequest(); 
```

此解决方案**要求**您`DbContext`有一个构造函数，该构造函数接受 a`DbConnection`并将其传递给 base，如下所示：

```
public MyData(DbConnection connection)
    : base(connection, true)
{
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T16:31:20.717

有一个类的[构造函数](http://msdn.microsoft.com/en-us/library/gg696604%28v=vs.103%29.aspx)，`DbContext`它采用现有的`DbConnection`

所以你需要一个新的构造函数，它只`MyData`调用基础

```
public class MyData : DbContext
{
    public MyData(DbConnection existingConnection, bool contextOwnsConnection)
        : base(existingConnection, contextOwnsConnection)
    {
    }

    //..
} 
```

然后你注册你`MyData`的`Register`：

```
builder.Register(c => 
{
   var conn =  new EFProfiledDbConnection(GetConnection(), MiniProfiler.Current);
   return new MyData(conn, true);
}).As<DbContext>().InstancePerHttpRequest(); 
```

# javascript - html表格如何通过更改悬停边框来突出显示列？

> ID：13496559
> 
> 赞同：7
> 
> 时间：2012-11-21T15:30:55.717
> 
> 标签：javascript, html, css, html-table, hover

我正在探索如何设置表格样式，以便在鼠标悬停在列上时可以更改边框。

![在此处输入图像描述](../Images/d20de02386e9d342d84812bdc62c7915.png)

当鼠标悬停在一列上时，我想通过更改边框颜色来突出显示该列：

![在此处输入图像描述](../Images/30d250194a1cdd9bee50cc2342a19832.png)

为了突出显示，我将以下 JavaScript 代码与 jQuery 库一起使用：

```
$('td').hover(function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').addClass('highlighted');
},
function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').removeClass('highlighted');
}); 
```

使用以下 CSS：

```
.highlighted {
    border-top: 2px solid black;
    border-right: 2px solid black;
    border-left: 2px solid black;
} 
```

您可以在此 JSFiddle 中查看其工作原理：http: [//jsfiddle.net/sCFjj/1/](http://jsfiddle.net/sCFjj/1/) 这仅在我将鼠标悬停在最左侧的列上时有效。否则，它会突出显示右列（和顶部），但不会突出显示左垂直列。有没有办法让左垂直列出现？

理想情况下，我希望效果忽略最低行，但我不确定如何从 jQuery 选择中排除一行。

我的尝试密切基于这个先前的[问题](https://stackoverflow.com/a/11828637/258755)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:47:20.903

链接：[jsFiddle](http://jsfiddle.net/nsKHw/)。还添加到上一列border-right，你会得到你想要的。我认为该列的右边界在下一个列的左边界之上。

JavaScript：

```
$('td').hover(function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').addClass('highlighted');

    if(t>1){
        var t1 = t -1;
        //alert("T:" + t + "<br/> T1:" + t1);
        $('td:nth-child(' + t1 + ')').addClass('highlightedPrev');
    }
},
function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').removeClass('highlighted ');
        if(t>1){
         var t1 = t -1;
         $('td:nth-child(' + t1 + ')').removeClass('highlightedPrev');
    }
});​ 
```

CSS：

```
.highlighted {
    border: 2px solid black;
}
.highlightedPrev {
    border-right: 2px solid black;
} 
```

希望我解决了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:48:27.110

似乎每一行都在他的“右邻居”之上，所以它们相互重叠。您可以更深入地研究为什么会这样，或者只是通过以下方式修复它：

```
$('td').hover(function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').addClass('highlighted');
    $('td:nth-child(' + (t-1) + ')').addClass('highlighted_only_right');
},
function() {
    var t = parseInt($(this).index()) + 1;
    $('td:nth-child(' + t + ')').removeClass('highlighted');
    $('td:nth-child(' + (t-1) + ')').removeClass('highlighted_only_right');
}); 
```

如果您发现更好的东西，请告诉我们；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:49:22.287

## 表格边框折叠

您面临的问题是表格默认折叠边框。所以你必须在表格本身上设置一个额外的样式：

```
border-collapse: separate; 
```

这也意味着您的边框需要有 1 个像素的边框，因为同级边框将增加到 2 个像素。

然后，附加样式可以移除内部样式并仅突出外部样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:49:43.753

试试这个：http: [//jsfiddle.net/sCFjj/27/](http://jsfiddle.net/sCFjj/27/)

我添加了一个 highlight_left，并稍微简化了 javascript（删除了所有单元格的突出显示类）

```
$('td').hover(function() {
    var t = parseInt($(this).index());
    $('tr td').removeClass('highlighted');
    $('tr td').removeClass('highlighted_left');
    $('tr td:nth-child(' + (t+1) + ')').addClass('highlighted');
    $('tr td:nth-child(' + (t) + ')').addClass('highlighted_left');
});​ 
```

highlight_left 是：

```
.highlighted_left{
    border-right: 2px solid black;
} 
```

# python - 在python中创建一个文件

> ID：13496560
> 
> 赞同：0
> 
> 时间：2012-11-21T15:30:58.043
> 
> 标签：python, hashtable

现在我知道如何通过文件 txt 实现字典。所以我创建了example.txt（通用文件）：

```
aaa.12
bbb.14
ccc.10 
```

并制作字典：

```
with open('example.text') as f:
    hash = {}
    for line in f:
        key, value = line.strip().split('.', 1)
        hash[key] = int(value) 
```

所以现在我想按价值订购我的元素：所以我尝试

```
with open('example.txt') as f:
    hash = {}
    for line in f:
        key, value = line.strip().split('.', 1)
        hash[key] = int(value)
        print hash #this print my dict
        value_sort=sorted(hash.values())
        print value:sort #to check the what return and gave me in this case value_sort=[10, 12, 14] 
```

完美，所以现在我如何在 example.txt 上写我的项目按价值排序：

```
ccc.10
aaa.12
bbb.14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:43:10.787

You'll need to loop through the `hash` dict separately, where you ask it to be sorted on value:

```
from operator import itemgetter

hash = {}
with open('example.text') as f:
    for line in f:
        key, value = line.strip().split('.', 1)
        hash[key] = int(value)

for key, value in sorted(hash.items(), key=itemgetter(1)):
    print '{0}.{1}'.format(key, value) 
```

The `sorted()` call is given a key to sort by, namely the second element of each `.items()` tuple (a key and value pair).

If you wanted to *write* the sorted items to a file, you'd need to open that file in writing mode:

```
with open('example.txt', 'w') as f:
    for key, value in sorted(hash.items(), key=itemgetter(1)):
        f.write('{0}.{1}\n'.format(key, value)) 
```

Note that we write newlines (`\n`) after every entry; `print` includes a newline for us but when writing to a file you need to include it manually.

# c# - 如何在 windows phone 8 中使用 js 从隔离存储中获取图像缓存

> ID：13496561
> 
> 赞同：1
> 
> 时间：2012-11-21T15:31:02.363
> 
> 标签：c#, javascript, cordova, windows-phone-8

我可以使用 C# 代码从网络下载一些图像，然后存储在隔离存储中，但我无法使用 js 代码从隔离存储中获取图像缓存；phonegap 将 base64 返回到 html 客户端，我认为这种方式并不完美；方式：“ms-appdata:///...”不行。

# html - 服务器上的某些文件夹在哪里以及如何转换为 URL 地址？

> ID：13496564
> 
> 赞同：1
> 
> 时间：2012-11-21T15:31:11.517
> 
> 标签：html, sql-server, wordpress

服务器上的某些文件夹在哪里以及如何转换为 URL 地址？例如，我`wp-admin`在服务器根文件夹上调用的wordpress文件夹如何变成`http://mysite.com/wp-admin`？它发生在数据库中还是在 html 代码中或其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:42:09.200

它发生在 Web 服务器配置中。对于 apache，有一个名为`DocumentRoot`. 此目录下的任何文件或目录都可用于您的 Web 服务器。例如，如果您`DocumentRoot`是`/usr/local/apache2/htdocs`，那么`/usr/local/apache2/htdocs/foo`将被视为`http://mysite.com/foo`。

# jdbc - 使用 JDBC 捕获类似 SQLPlus 的反馈

> ID：13496565
> 
> 赞同：1
> 
> 时间：2012-11-21T15:31:15.873
> 
> 标签：jdbc

在 SQLPlus 中，Oracle 的“反馈”让我们知道执行的 SQL 语句的状态——比如“创建表”、表更改等（使用“设置反馈”）。

当使用 JDBC 运行 SQL 语句时，是否可以捕获这样的反馈？我正在寻找更多的 DDL 语句。我不是在寻找 Prepared Statement 方法的输出。我正在寻找数据库直接给出的东西——比如在 SQLPlus 中。

目的：我们想创建一个运行 DDL 语句的作业。输出需要显示在审计中。

谢谢，米顿。

# php - 快速连续发布 2 个表单时未发布 PHP 值

> ID：13496567
> 
> 赞同：2
> 
> 时间：2012-11-21T15:31:20.677
> 
> 标签：php, apache, post

我正在使用 Apache 2.2.22、PHP 5.3.10 和 IE7（它在工作 Intranet 上，所以我无法控制 IE 的版本）。我使用的是更高版本的 Apache（2.4.3，我的 php 在其上运行良好），但我需要对用户进行身份验证，显然 2.4.3 与 mod_auth_sspi.so 不兼容。

无论如何，我有 3 个 php 页面（index.php --> stage2.php --> stage3.php）。当我在 index.php 上提交表单并发布到 stage2.php 时，会正确接收这些值。但是，如果我随后提交 stage2.php 并尝试立即（5 秒后）将值发布到 stage3.php，则 $_POST 值为空。如果我等待 10 秒，它会正常工作。

如果我使用 GET 而不是 POST，它也可以正常工作，但 stage2.php 是一个搜索结果页面，并且可能必须将大量变量传递给 stage3.php。我不知道 URL 长度是否有限制，但可能有数千个字符，具体取决于找到的结果数量。

另外，我过去曾尝试将标头设置为过期，但没有成功。

```
if(!strpos(strtolower($_SERVER[HTTP_USER_AGENT]), "msie") === FALSE) {
   header("HTTP/1.x 205 OK");
} else {
   header("HTTP/1.x 200 OK");
}    
header("Pragma: no-cache");
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-cache, cachehack=".time());
header("Cache-Control: no-store, must-revalidate");
header("Cache-Control: post-check=-1, pre-check=-1", false); 
```

我错过了什么吗？是否有设置发布表格之间的时间的设置？

迪翁

更新@aleation

实际页面很大，但我可以使用简单的 html 表单（test_form.html 和 test_form.php）重新创建问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>

<form name="RequestForm" method="post" action="test_form.php">
<input name="firstname" type="text" id="firstname">
<input name="lastname" type="text" id="lastname">

<input type="submit" class="nextbutton" id="next_button" name="save" value="Send">
</form>

</body> 
```

```
<?php

$first = $_POST["firstname"];
$last = $_POST["lastname"];

echo "first name = " . $first . "<br>";
echo "last name = " . $last;

?> 
```

@aleation 不幸的是，服务器在我的工作内联网上。以下是使用 GET 从 stage2 发布到 stage3 的数据示例：

```
stage3.php?r1=729&save=Next&transcount=3&requesttype=invoice&requestedby=campbelld 
```

奇怪的是，它只发送那些设置的输入 - stage2.php 为每个搜索结果都有一个复选框，它只发送一个被选中的（第 1 行），所以如果我找不到解决方案，那么毕竟可以使用 GET . 当我在家进行测试时，它会发送每个复选框，因此 URL 最终会变得很大。

# java - 从另一个 java 进程启动 java 进程时进程挂起

> ID：13496569
> 
> 赞同：1
> 
> 时间：2012-11-21T15:31:25.103
> 
> 标签：java, jvm, freeze

我们有一个 32 位进程 A，它必须启动另一个必须在 64 位进程中运行的 java jar。它们通过套接字进行通信。该系统运行良好。

但在极少数情况下，我们会看到第二个进程 (B) 挂起，直到我们关闭启动它的进程 (A)。在调试此问题时，我想读取进程 B 的输入流以查看正在输出哪些消息，并看到从进程 B 的输入流中读取的内容解决了该问题。所以我们创建了一个哑线程，它只读取进程 B 的输入流，一切正常。

这个问题很奇怪，但我们不得不继续前进。我们认为它与控制台输出缓冲区大小或类似的东西有关。但是我们已经看到这个问题出现在新安装的机器上，尽管我们读取了启动进程 (B) 的输入流。

尽管这种情况非常罕见，但我们希望绝对确定为什么会发生这种情况。可能是什么原因？是否有我们不知道的默认设置？你以前遇到过这样的情况吗？

快速总结：

*   进程 A 在 32 位进程中运行
*   进程 B 在 64 位进程中运行
*   进程 A 通过指向 64 位 javaw.exe 发出 Runtime.exec 来启动进程 B
*   进程 B 挂起，直到我们关闭进程 A
*   我们看到进程B出现在任务管理器中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:33:31.250

您需要从生成的进程中同时使用 stadout 和 stderr，并且您需要同时执行此操作*，*否则生成的进程可能会阻塞等待父进程使用该输出。

更多信息[在这里](https://stackoverflow.com/a/882795/12960)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-06T05:47:29.187

我有进程挂起问题。对我来说，我想要来自衍生子进程的 stdout 和 stderr 日志。由于使用来自父进程的读取阻塞调用“readLine()”，生成的子进程挂起。以下代码对我造成了问题。

```
 BufferedReader processInputReader =  new BufferedReader(new InputStreamReader(process.getInputStream()));
       while ((line = processInputReader.readLine()) != null){
           bw.write(line+"\n"); //write to temp file 
       }
       processInputReader.close();

       //get error stream
       processInputReader =  new BufferedReader(new InputStreamReader(process.getErrorStream()));
       while ((line = processInputReader.readLine()) != null){
           bw.write(line+"\n"); //write to temp file 
       }
       processInputReader.close(); 
```

我通过参考[https://ostermiller.org/utils/src/ExecHelper.java.html](https://ostermiller.org/utils/src/ExecHelper.java.html)更改了流读取逻辑。现在我不再看到挂起问题了。

# linux - tcpdump -dd 输出与 pcap_compile_nopcap 不匹配

> ID：13496574
> 
> 赞同：1
> 
> 时间：2012-11-21T15:31:56.383
> 
> 标签：linux, pcap, libpcap, packet-capture

当我创建一个数据包过滤器（例如仅用于 tcp 流量）时

```
tcpdump -dd tcp 
```

包过滤器输出是

```
{ 0x28, 0, 0, 0x0000000c },
{ 0x15, 0, 2, 0x000086dd },
{ 0x30, 0, 0, 0x00000014 },
{ 0x15, 3, 4, 0x00000006 },
{ 0x15, 0, 3, 0x00000800 },
{ 0x30, 0, 0, 0x00000017 },
{ 0x15, 0, 1, 0x00000006 },
{ 0x6, 0, 0, 0x0000ffff },
{ 0x6, 0, 0, 0x00000000 }, 
```

但是当我以编程方式做同样的事情时；

```
pcap_compile_nopcap(1500, DLT_EN10MB, &fcode, "tcp", 1, 0);
struct bpf_insn *insn = fcode.bf_insns;

for (i = 0; i < fcode.bf_len; ++insn, ++i)
{
  printf("{ 0x%x, %d, %d, 0x%08x },\n",
     insn->code, insn->jt, insn->jf, insn->k);
} 
```

我得到以下数据包过滤器输出：

```
{ 0x28, 0, 0, 0x0000000c },
{ 0x15, 0, 5, 0x000086dd },
{ 0x30, 0, 0, 0x00000014 },
{ 0x15, 6, 0, 0x00000006 },
{ 0x15, 0, 6, 0x0000002c },
{ 0x30, 0, 0, 0x00000036 },
{ 0x15, 3, 4, 0x00000006 },
{ 0x15, 0, 3, 0x00000800 },
{ 0x30, 0, 0, 0x00000017 },
{ 0x15, 0, 1, 0x00000006 },
{ 0x6, 0, 0, 0x000005dc },
{ 0x6, 0, 0, 0x00000000 }, 
```

为什么两个数据包过滤器不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:40:30.613

可能是因为您系统上的 tcpdump 是使用比您的程序旧版本的 libpcap 构建的。您系统上的 tcpdump 可能正在使用 libpcap 而没有进行此更改：

```
commit 58275c05a5cf9c3512bcbb1192ff351d32ccccbd
Author: Guy Harris <guy@alum.mit.edu>
Date:   Thu Sep 1 22:21:45 2011 -0700

    Handle some amount of IPv6 fragmentation.

    If we're checking for a particular protocol running on top of IPv6, and
    we're not doing full protocol-chain chasing for all "running on top of
    IPv6" tests, at least check for a fragmentation header before the header
    for the protocol. 
```

并且您的程序可能正在使用带有该更改的 libpcap。该更改在 libpcap 1.3.x 时间范围内的某个地方进入了 libpcap。

# android - Android 空异常

> ID：13496577
> 
> 赞同：-2
> 
> 时间：2012-11-21T15:32:05.187
> 
> 标签：android

我正在尝试使用 LocationManager 查找手机当前位置的经度和纬度。但是当我调用 getLongitude 时，我得到一个空指针异常。可能有一个简单的解决方案。有人可以帮我吗？

```
import android.location.Criteria;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    private LocationManager locationManager;
    private String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        getCord();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void getCord() {
        final TextView text = (TextView) findViewById(R.id.textView);
        LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
        boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);

        if (!enabled) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(intent);
        }

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // defaultazz
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        //int lng = (int) (location.getLongitude());

        text.setText("" +location.getLatitude());
    }

} 
```

猫：

```
11-21 14:53:35.830: E/AndroidRuntime(722): FATAL EXCEPTION: main
11-21 14:53:35.830: E/AndroidRuntime(722): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.envio/com.example.envio.MainActivity}: java.lang.NullPointerException
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.os.Looper.loop(Looper.java:137)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread.main(ActivityThread.java:5039)
11-21 14:53:35.830: E/AndroidRuntime(722):  at java.lang.reflect.Method.invokeNative(Native Method)
11-21 14:53:35.830: E/AndroidRuntime(722):  at java.lang.reflect.Method.invoke(Method.java:511)
11-21 14:53:35.830: E/AndroidRuntime(722):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-21 14:53:35.830: E/AndroidRuntime(722):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-21 14:53:35.830: E/AndroidRuntime(722):  at dalvik.system.NativeStart.main(Native Method)
11-21 14:53:35.830: E/AndroidRuntime(722): Caused by: java.lang.NullPointerException
11-21 14:53:35.830: E/AndroidRuntime(722):  at com.example.envio.MainActivity.getCord(MainActivity.java:54)
11-21 14:53:35.830: E/AndroidRuntime(722):  at com.example.envio.MainActivity.onCreate(MainActivity.java:24)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.Activity.performCreate(Activity.java:5104)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-21 14:53:35.830: E/AndroidRuntime(722):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-21 14:53:35.830: E/AndroidRuntime(722):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:35:50.607

你读过错误信息吗？

```
11-21 14:53:35.830: E/AndroidRuntime(722): Caused by: java.lang.NullPointerException
11-21 14:53:35.830: E/AndroidRuntime(722):  at com.example.envio.MainActivity.getCord(MainActivity.java:54) 
```

似乎您有一个在第 54 行返回 Null 的方法，但您没有检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:38:07.400

修改您的**getCord**方法，如下所示：

```
public void getCord() {
    final TextView text = (TextView) findViewById(R.id.textView);
    LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);

    if(service != null){
      if (!service.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
      }
      else{
        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // defaultazz
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        //int lng = (int) (location.getLongitude());

        text.setText("" +location.getLatitude());
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:38:47.493

您的变量位置为空，您必须测试： if(location!=null) TODO ..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T12:33:25.320

尝试

```
locationManager = (LocationManager) getSystemService(context.LOCATION_SERVICE);

Criteria criteria = new Criteria();
provider = locationManager.getBestProvider(criteria, false);

 if (locationManager != null) {
        if (ContextCompat.checkSelfPermission(this,android.Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED
                || ContextCompat.checkSelfPermission(this,android.Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
            location = locationManager.getLastKnownLocation(provider);
        }
    }

    if (location != null) {
        onLocationChanged(location);
    } else {
        text.setText("Location not available");

    }
} 
```

然后覆盖 onLocationChange 方法：

@覆盖

```
public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());

    text.setText(String.valueOf(lat));

} 
```

这对我有用

# mysql - 在触发器中使用局部变量

> ID：13496579
> 
> 赞同：0
> 
> 时间：2012-11-21T15:32:07.163
> 
> 标签：mysql, sql

在此触发器中：

```
 CREATE TRIGGER `after_insert_normas_revision`
    AFTER INSERT ON `normas_revision` FOR EACH ROW
    BEGIN

      DECLARE VAR_P_RHID INT;
      DECLARE VAR_P_VERSION INT;

      SELECT MAX(a.`rhID`)
      INTO VAR_P_RHID
        FROM `revision_history` a
        WHERE a.nID = new.`nID`;

      IF VAR_P_RHID IS NULL THEN
        SET VAR_P_VERSION = 0;
      ELSE
        SELECT `version`
          INTO VAR_P_VERSION
          FROM `revision_history` a
          WHERE a.`rhID` = VAR_P_RHID;
      END IF;

      DECLARE VAR_NEW_VERSION INT;
      SET VAR_NEW_VERSION = VAR_P_VERSION + 1;

      INSERT INTO `revision_history`
        (`revID`, `nID`, `userID`, `timestamp`, 
         `prev_rhID`, `version`, `action`, `comment`)
      VALUES
        (new.`revID`, new.`nID`, new.`userID`, CURRENT_TIMESTAMP, VAR_P_RHID, VAR_NEW_VERSION, 'UPDATE', new.`_rev_comment`);

    END 
```

我收到此错误

> Schema Creation Failed：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'DECLARE VAR_NEW_VERSION INT; 附近使用正确的语法；设置 VAR_NEW_VERSION = VAR_P_VERSION + 1；' 在第 23 行：

如果我删除

```
DECLARE VAR_NEW_VERSION INT; 
SET VAR_NEW_VERSION = VAR_P_VERSION + 1 
```

或将局部变量更改为会话变量（以 @ 开头）然后代码运行正常。

* * *

**问：为什么会这样？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:37:32.003

所有的 DECLARE 都应该在触发器的开头。

这不是一种类似 C++ 的语言，您可以混合使用声明和语句，而更像 C，所有声明必须在所有语句之前完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:37:49.713

问题出在语法上。这是不正确的。

所有声明必须在 BEGIND...END 子句的开头。您可以在代码中的任何位置设置用户变量。

# c++ - 在 C++ 中创建成员函数模板特化

> ID：13496580
> 
> 赞同：5
> 
> 时间：2012-11-21T15:32:08.943
> 
> 标签：c++, templates

我正在编写一个类，我想在其中创建这样的成员函数模板专业化

```
namespace aha
{
class Foo
{
public:
    template < typename T >
    T To() const
    {
        // some code here
    }
};
template <>
bool Foo::To < bool > () const
{
    // some other code here
}
} 
```

gcc 给出错误：

> 'To < bool >' 在实例化后的显式实例化

我只想使用成员函数的模板专业化来做到这一点，以便我的库的用户在转换`Foo`为不同的数据类型时可以获得相同的函数，例如

```
Foo obj;
bool b( obj.To < std::string > () );
int i( obj.To < int > () );
float f( obj.To < float > () ); 
```

等等。

请让我知道我在代码中做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:57:25.803

> 'To < bool >' 在实例化后的显式实例化

以上说明了一切：它在它的通用版本已经被使用之后变得专门化。

函数模板特化可以通过重载来模拟，这是一种更灵活的机制（例如，函数模板没有部分特化，但通过重载可以达到预期的效果）：

```
template<class T> struct Type {}; // similar to boost::type<>

class Foo
{
    template<class T>
    T doTo(Type<T>) const; // the generic version

    bool doTo(Type<bool>) const; // an overload for bool only
    // add more overloads as you please

public:
    template < typename T >
    T To() const {
        return this->doTo(Type<T>());
    }
}; 
```

# apache-flex - GraniteDS - 外部化服务配置文件

> ID：13496583
> 
> 赞同：0
> 
> 时间：2012-11-21T15:32:22.343
> 
> 标签：apache-flex, graniteds

我正在寻找一种方法来外部化配置文件*services-config.xml*，GraniteDS 使用它来建立 Java 和 Flex 之间的通信。

我需要这种配置，以便能够更改*工厂*节点中定义的**servername**、**serverport**和**安全凭据**，而无需重建整个应用程序。

 *提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:18:09.933

我设法通过使用基于 EjbServiceFactory 的**CustomEjbServiceFactory覆盖****EjbServiceFactory**来实现我想要的，但是从特定目录中的属性文件而不是从默认的 services-config.xml 中检索 InitialContext 的所有信息

 **请参见[EjbServiceFactory.java](https://github.com/graniteds/graniteds/blob/master/core/org/granite/messaging/service/EjbServiceFactory.java)***

# javascript - 使用逗号运算符链接多个函数定义

> ID：13496585
> 
> 赞同：3
> 
> 时间：2012-11-21T15:32:37.303
> 
> 标签：javascript, uglifyjs

我在查看 Uglify-js 的源代码时发现了一些有趣的东西。在`bin/uglifyjs`( [ref](https://github.com/mishoo/UglifyJS/blob/master/bin/uglifyjs) ) 中定义了几个函数，如下所示：

```
//syntax A
var defsym = function(sym) {
  ...
},
defval = function(v) {
  ...
}; 
```

考虑到 Uglify-js 是由专业人士编写的，并且在许多产品中使用，例如 JQuery，我不明白为什么代码不是这样编写的：

```
//syntax B
var defsym = function(sym) {
  ...
};
var defval = function(v) {
  ...
}; 
```

这将更清楚地表明这是两个局部变量。或者这个怎​​么样：

```
//syntax C
function defsym(sym) {
  ...
}
function defval(v) {
  ...
} 
```

这使得`defsym`和`defval`函数在母函数的整个范围内都可用。

他们为什么会选择第一种语法？为什么不是其他语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:40:53.107

我认为这只是风格问题。前两个定义是等价的，但第一个更短，因为您不必在每个定义前加上`var`.

将除函数之外的其他值分配给 vars 也是如此。例如

```
var a = "a",
    b = "b"; 
```

是相同的

```
var a = "a";
var b = "b"; 
```

这真的归结为个人喜好（我更喜欢第二种风格）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T15:52:20.220

他们为什么不使用`Syntax B`？因为它需要更多的字符。

他们为什么不使用`Syntax C`？因为它的含义并不完全相同。函数声明与函数表达式并不完全相同。

* * *

现在我看到分配发生在 a 中`try/catch`，这意味着它们在一个块中。

在块中声明函数是无效的*（即使某些实现允许）*。

```
 // Invalid
try {
    function defsym(sym) {
        // ...
    }
    // ...
} catch(e) {
    // ...
} 
```

* * *

```
 // Valid
try {
    var defsym = function(sym) {
        // ... 
    },
    // ...
} catch(e) {
    // ...
} 
```

所以这就解释了为什么他们没有选择`Syntax C`。

此外，“严格模式”将通过抛出错误来绝对禁止此类无效声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T15:41:55.067

这是一个简单的 var 声明。

如果这是有效的：

```
var number1 = 1, number2 = 2; 
```

这也是有效的：

```
var func1 = function(){}, func2 = function(){}; 
```

唯一的区别是第二个例子是存储函数而不是整数。

# pdf - 在 iframe 中显示 pdf 的环境注意事项

> ID：13496591
> 
> 赞同：0
> 
> 时间：2012-11-21T15:32:49.177
> 
> 标签：pdf, iframe, browser, adobe

我有一个带有 iframe 的页面，该页面的 src 属性被分配了 pdf 文件的路径。我可以验证这一切都适用于我的开发环境，我什至正在使用以下标记对其进行测试：

```
<html>
<body>
<iframe src="hello.pdf" height="500px" width="500px"/>
</body>
</html> 
```

这显示得很好，但是一旦我将它移动到测试环境，它就会调用下载对话框或冻结浏览器。

**我试过的：**

*   我已经用许多 pdf 阅读器（包括非 Adob​​e 阅读器）尝试过这个。
*   我已经尝试了所有可以看到的 pdf 阅读器配置设置。
*   我还调整了浏览器的安全设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:50:58.507

我已经进行了一些测试，它完全可以使用 PDF。对我来说，它要么与您有关管理 pdf 文件（或应用程序/pdf mimetype 等）的浏览器设置有关，要么与您有关处理 pdf 文件的应用程序服务器设置有关。

# django - 将 WEKA 集成到 Web 应用程序 (Django)

> ID：13496594
> 
> 赞同：1
> 
> 时间：2012-11-21T15:32:54.350
> 
> 标签：django, weka

我有兴趣将软件套件 WEKA ( [http://en.wikipedia.org/wiki/Weka_%28machine_learning%29](http://en.wikipedia.org/wiki/Weka_%28machine_learning%29) ) 的结果添加到 DJANGO 中构建的网络应用程序中。我不确定这是否可能，但 WEKA 包含了开发人员常见问题解答（[http://weka.wikispaces.com/Frequently+Asked+Questions#x-Developing%20with%20WEKA](http://weka.wikispaces.com/Frequently+Asked+Questions#x-Developing%20with%20WEKA)）。里面有什么好用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:44:57.663

Weka 是一个基于 Java 的应用程序。这意味着如果您使用[Django Jython](http://code.google.com/p/django-jython/) ，您可以将它与 Django 一起使用。如果您已经编写了一些使用 Weka 的代码，这可能是阻力最小的路径。

或者，如果您想要一个“普通”的基于 Python 的机器学习库 ，我建议您研究[scikit-learn 。](http://scikit-learn.org/stable/)

还有一些其他方法可以将 Weka 的结果集成到 Django 应用程序中。一个涉及使用某种外部接口包装您的 Weka 代码。您可以使用 JSON+HTTP、ZeroMQ 或其他一些选项。

# android - SurfaceView和View的SurfaceView颜色差异

> ID：13496598
> 
> 赞同：0
> 
> 时间：2012-11-21T15:32:56.647
> 
> 标签：android

我有两个不同的元素，并排放置在线性布局中。其中一个元素延伸`SurfaceView`，而另一个延伸`View`。

现在，用相同的纯色填充每个元素，表明它们的渲染方式不同，正在扩展的元素`View`使颜色比其他元素稍暗。

我在两个元素中都使用了`canvas.drawColor(int)`, 创建了一个油漆并使用`drawRect()`了相同的油漆。

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:38:22.983

我猜 SurfaceView 没有使用 32 位颜色。尝试 getHolder().setFormat(PixelFormat.RGBA_8888);

# r - 在R中使用texreg进行分位数回归时如何设置se = boot？

> ID：13496599
> 
> 赞同：2
> 
> 时间：2012-11-21T15:32:55.073
> 
> 标签：r, regression, quantile, statistics-bootstrap, quantreg

我正在运行分位数回归（包`quantreg`）并`texreg`用于创建我的模型的乳胶输出。

我对引导 se 感兴趣并在摘要选项中设置 se="boot" 但是当我使用 texreg 时，我得到 "nid" se

如何更改该选项？

这是我正在做的事情：

```
tm3 <- rq(nback ~ cara + mat + dut + e_brown + e_green + e_blue + ins_no + ins_1
          + ins_5 + lit + sci + lan + gender_f + partner,  
          tau = 0.75, data=tru_all, model=TRUE)
summary(tm3, se = "boot")
texreg(tm3) 
```

我尝试查看 texreg （在控制台上键入 texreg）并在第 35-38 行发现

```
for (i in 1:length(models)) {
cf <- models[[i]]@coef
se <- models[[i]]@se
pv <- models[[i]]@pvalues 
```

如何设置 se 方法？我从未更改过 R 函数，如果这是我需要做的，你能建议一个链接来解释如何做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:06:44.210

我已经更新了 texreg 源代码。您对“...”参数的建议应在下一个版本中实施。如果您有更多建议，您可能希望将它们发布在 texreg 论坛中。

最好的，菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:35:43.747

部分成功。我不太擅长 S4 类，但我能够通过下载包源并编辑前几行来获得一些工作`extract.rq`：

```
extract.rq <- function(model, include.nobs=TRUE, include.percentile=TRUE,...) {
  co <- summary(model, cov=TRUE,...)$coef[,1]
  names <- rownames(summary(model, cov=TRUE,...)$coef)
  se <- summary(model, cov=TRUE,...)$coef[,2]
  pval <- summary(model, cov=TRUE,...)$coef[,4]

  n <- length(summary(model,...)$resid)
  tau <- summary(model,...)$tau 
```

然后从修改后的源构建和安装包似乎可以工作，如下所示：

```
library(quantreg)
library(texreg)
data(stackloss)
m <- rq(stack.loss ~ stack.x,.5)

texreg(m,se = "boot")
texreg(m,se = "iid") 
```

# mysql - 选择按用户分组的最新状态

> ID：13496600
> 
> 赞同：0
> 
> 时间：2012-11-21T15:32:58.660
> 
> 标签：mysql, performance, select

我正在处理状态表，我将显示每个用户的基本信息以及在获取每个用户的最新状态和按用户分组时需要进行哪些过滤。

所以我需要使用的状态表信息是：

*   ID
*   内容
*   用户身份

我需要使用的用户信息是：

*   ID
*   位置ID

所以我想要实现的最终结果是拥有按用户分组的每个用户的最新状态。

我正在使用：

```
SELECT ID, content
    FROM status
    WHERE content NOT RLIKE "#[0-9azA-Z]"
    AND type = "5"
    AND userID IN (
        SELECT DISTINCT ID
        FROM users
        WHERE hometownID = "'.$locationID.'"
        OR locationID = "'.$locationID.'"
    )
    GROUP BY status.userID
    ORDER BY addedDate DESC 
```

然后我在 PHP 中使用已添加用户的数组按用户分组并排除它们，但这对于扩展和加载更多结果并不理想，所以我想要一个仅 SQL 的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:38:52.037

第二次尝试[SQL Fiddle](http://www.sqlfiddle.com/#!2/f93b0/1/0)

```
select s.userid, s.content, r.addeddate
from status s
join (select s.userid, max(s.addeddate) as addeddate
      from status s
      join users u on s.userid = u.id
      where u.hometownid = 2
            and u.locationid = 3
            and s.type = '5'
            and s.content not rlike '#[0-9a-zA-Z]'
      group by userid) r on s.userid = r.userid
                            and s.addeddate = r.addeddate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:48:09.980

This is working for me!

```
SELECT *
FROM status
NATURAL JOIN (
    SELECT userID, MAX(addedDate) as addedDate
    FROM status
    GROUP BY userID
) AS mostRecent
WHERE userID IN (
    SELECT DISTINCT ID
    FROM users
    WHERE users.locationID = "'.$locationID.'"
    OR users.hometownID = "'.$locationID.'"
)
AND status.content NOT RLIKE "#[0-9azA-Z]"
AND type = "5"
#AND userID != "'.$userID.'"
ORDER BY status.addedDate DESC
LIMIT 10 
```

# knockout.js - 两个带淘汰赛的日期选择器，一个更新另一个

> ID：13496605
> 
> 赞同：3
> 
> 时间：2012-11-21T15:33:18.690
> 
> 标签：knockout.js, jquery-ui-datepicker

我附加了带有淘汰赛自定义绑定处理程序的jQuery datepicker，并且我想在更新第一个字段时将minDate设置为第二天（以防其他日期未设置为以后的日期）。

```
<label>Check-in:</label>
<input type="date" id="checkIn" data-bind="datepicker: checkIn, datepickerOptions: {
    minDate: 0,
    dateFormat: 'dd/mm/yy',
    firstDay: 1
    }" />
<br/>
<br/>

<label>Check-out:</label>
<input type="date" id="checkOut" data-bind="datepicker: checkOut, datepickerOptions: {
    minDate: 0,
    dateFormat: 'dd/mm/yy',
    firstDay: 1
    }" /> 
```

我[为此设置了小提琴](http://jsfiddle.net/juvastyle/mNuEK/)

例如，如果 checkOut 日期选择为 28/11/2012，而您为 checkIn 选择 25/11/2012，则无需更改 checkOut 日期，只需将 checkOut 的 minDate 设置为 26/11/2012。

但是如果您选择 29/11/2012 进行 checkIn，则 checkOut 需要更新到 30/11/2012

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T15:42:59.777

One way to do it is to subscribe to the first date observable property and use that to set the second:

```
self.checkIn.subscribe(function(newValue) {
    $("#checkOut").datepicker("option", "minDate", self.checkIn());
}); 
```

See [here](http://jsfiddle.net/mNuEK/1/)

Of course, this is not the most elegant solution, since it requires knowing which part of the view relates to the other property. A better solution might be to create another custom binding.

Something like this:

```
ko.bindingHandlers.minDate = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
        current = $(element).datepicker("option", "minDate", value);
    }        
} 
```

Bound like this:

```
<input type="date" id="checkOut" data-bind="{datepicker: checkOut, datepickerOptions: {
minDate: 0,
dateFormat: 'dd/mm/yy',
firstDay: 1
},
minDate: checkIn}" /> 
```

See [here](http://jsfiddle.net/mNuEK/2/).

# .net - 这个 WCF 服务是如何工作的？

> ID：13496606
> 
> 赞同：1
> 
> 时间：2012-11-21T15:33:20.090
> 
> 标签：.net, visual-studio-2010, wcf

我拿起了一个几个月没有碰过的项目我用这个项目来学习 WCF，当我在 Visual Studio 中运行它时，它会打开一个页面，允许我获取生成的 WSDL，我可以点击代码的服务。

但是当我查看 Web.config 时，那里几乎没有任何信息：

```
<?xml version="1.0"?>
<configuration>

<system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

没有服务端点或任何东西，但它运行良好（至少在 Visual Studio 中），这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:44:59.990

WCF 3.x 的痛点之一是配置起来非常繁重，而且很难正确配置，即使对于最微不足道的服务也是如此。WCF 4 引入了[“简化配置”功能](http://msdn.microsoft.com/en-us/library/ee530014.aspx)，因此几乎需要零配置，但以牺牲灵活性为代价。您仍然可以使用您想要的所有配置，此时它只是可选的。

更多细节[在 MSDN 博客上](http://blogs.msdn.com/b/dsnotes/archive/2012/01/24/windows-communication-foundation-4-0-simplified-configuration-feature.aspx)：

> 因此，在 WCF 4.0 中，无需在 WCF 配置中添加任何内容即可创建 WCF 服务。WCF 基础结构将负责为您的服务创建一个默认端点（以及默认绑定和默认行为）。

# autosys - AutoSys X 代码 -655

> ID：13496613
> 
> 赞同：0
> 
> 时间：2012-11-21T15:33:44.167
> 
> 标签：autosys

我对 AutoSys 完全陌生，一直在摸索。我设法弄清楚我发送到 AutoSys 服务器的作业失败了，退出代码是 -655。谁能告诉我这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:03:03.647

如果您为了安全而绑定到活动目录，那么 655 可能意味着

1.  帐户未定义到 Active Directory
2.  帐户未定义到 autosys_secure 表
3.  autosys_secure 中的密码与 Active Directory 中的密码不匹配
4.  活动目录帐户锁定
5.  已禁用 Active Directory 帐户
6.  Active Directory 批处理帐户限制到不同的服务器

有更多的安全违规可以触发此错误。这些是最常见的。655 总是一些与安全相关的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-12T09:01:23.760

请确保以下工作正常

autoping -m (机器名) - Autoping 成功

autorep -m (机器名) 这应该在机器在线时返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:42:50.240

根据 Unicenter AutoSys Job Management for UNIX and Windows Reference Guide 的附录 A：

> -655 (SYSTEM_ERROR) => STARTJOB 失败，因为 auto_remote 不会启动。

有点帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-27T06:32:24.573

当作业中的配置文件与现有配置文件不匹配时，我收到此错误。就我而言，这是由于错字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-26T15:53:37.833

参考：[https ://comm.support.ca.com/kb/exitcode-655-on-windows-system-agent/kb000006112](https://comm.support.ca.com/kb/exitcode-655-on-windows-system-agent/kb000006112)

> 退出代码：Windows 系统代理上的 -655

文档 ID : KB000006112 最后修改日期 : 14/02/2018 显示技术文档详细信息

**问题：**

我们已经在 Windows 系统上成功安装了 11.3 系统代理。自动处理工作正常。用户和密码在 autosys_secure 中定义。

测试作业已提交并以退出代码 -655 结束。

```
[03/08/2017 10:06:53] CAUAJM_I_40245 EVENT: FORCE_STARTJOB JOB: testjob 

[03/08/2017 10:06:53] CAUAJM_I_40245 EVENT: CHANGE_STATUS STATUS: STARTING JOB: testjob MACHINE: win_agent 

[03/08/2017 10:06:54] CAUAJM_I_40245 EVENT: ALARM ALARM: STARTJOBFAIL JOB: testjob MACHINE: win_agent

[03/08/2017 10:06:54] <Owner attribute error. User does not exist in the system> 

[03/08/2017 10:07:04] CAUAJM_I_40245 EVENT: CHANGE_STATUS STATUS: FAILURE JOB: testjob MACHINE: win_agent EXITCODE: -655 
```

**环境：**

11.3 Windows 上的 SP7 系统代理

**原因：**

机器定义包含错误的 node_name。

**解析度：**

使用正确的 node_name 调整机器定义。

# oracle-adf - 带有视图链接的 Oracle ADF

> ID：13496614
> 
> 赞同：2
> 
> 时间：2012-11-21T15:33:58.643
> 
> 标签：oracle-adf

我正在尝试使用业务组件通过 Oracle ADF 运行我的应用程序，当我单击视图链接时，我收到了以下错误消息：

```
(oracle.jbo.SQLStmtException) JBO-27122: SQL error during statement preparation. 
Statement:
SELECT Meldung.MELDUNG_ID,
Meldung.MELDUNG_MESSAGE,
Meldung.SACHBEARBEITER_ID,
Meldung.MELDUNG_DATUM FROM MELDUNG Meldung
WHERE Meldung.SACHBEARBEITER_ID = :Bind_SachbearbeiterId
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:55:40.527

将 VO（此 sql 查询出错）的 Binding Style 更改为 Oracle Positional 并尝试（双击 VO 并在 SQL Statement 部分下，您应该有 Binding Style 选项）。

如果这不起作用，请尝试以下操作： [https ://blogs.oracle.com/ADFProgrammers/entry/bind_variable_and_sql_error](https://blogs.oracle.com/ADFProgrammers/entry/bind_variable_and_sql_error)

# ruby - 无限期在后台运行 Ruby 脚本

> ID：13496616
> 
> 赞同：2
> 
> 时间：2012-11-21T15:34:04.243
> 
> 标签：ruby, linux, ubuntu, backgroundworker

我有一个运行/查询数据库并每 30 秒输入/删除信息的 Ruby 脚本。我使用以下命令从命令行运行它：

```
ruby worker.rb 
```

我正在进入服务器。当我关闭终端时，工作人员停止运行。有没有办法确保它继续运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T15:39:08.027

是的。简单的方法是使用`nohup`and `&`：

```
nohup ruby worker.rb & 
```

将启动它，将控制权返回给 shell，并让它独立于终端运行。另一种选择是使其成为守护进程。此代码在设置代码之后：

```
Process.daemon 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:06:57.367

为了获得最佳控制，您想使用[**Screen**](http://en.wikipedia.org/wiki/GNU_Screen)或[**Tmux**](http://en.wikipedia.org/wiki/Tmux)

您将能够像往常一样启动脚本（无需守护进程）并查看输出。

您可以关闭 SSH 会话，脚本将继续运行。

下次登录时，您将获得相同的环境，就像您从未注销一样。

# ios - 在服务器上处理来自 iOS 的用户对用户的请求

> ID：13496636
> 
> 赞同：0
> 
> 时间：2012-11-21T15:35:13.790
> 
> 标签：ios, facebook, facebook-graph-api

我们的 iOS 应用程序使用 FB 请求对话框发送用户对用户请求以邀请朋友。受邀的 fb 用户会收到显示请求的通知。当他们单击请求时，他们会到达以下 URL：

```
www.our_url.com/?request_id=XXXX&ref=notif&app_request_type=user_to_user&code=A_LONG_STRING/ 
```

我找不到有关如何处理此 URL 和 GET 参数定义的官方文档。

`request_id`很清楚，但参数到底是什么`code`？

是否可以为此回调设置另一个 URL？我尝试将`redirect_uri`参数设置为，`[facebook dialog:@"apprequests" andParams:params andDelegate:self]`但这并没有改变任何东西。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:38:53.733

查看详细说明如何使用 iOS 发送请求以及如何处理来自 Facebook for iOS 应用程序的传入请求的文档：

[https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

基本上，如果您已正确配置，您的应用程序将由 iOS 应用程序的 FB 调用，其中包含根据您的需要处理请求的所有必要参数的 target_url 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:34:31.617

备查：

*   代码参数只不过是此处讨论的 oauth 代码参数： [https ://developers.facebook.com/docs/howtos/login/server-side-login/#step6](https://developers.facebook.com/docs/howtos/login/server-side-login/#step6)
*   回调 URL 对应于使用 Facebook 登录的网站部分下的应用设置中给出的 URL

希望这可以帮助某人...

# java - 用于在单元格之间编辑和移动的 swt Table Viewer java 键盘快捷键

> ID：13496640
> 
> 赞同：0
> 
> 时间：2012-11-21T15:35:34.930
> 
> 标签：java, eclipse, swt, rcp

我有一个 RCP 应用程序，我有一个 swt 表查看器，其中一个列是可编辑的，我希望能够通过使用选项卡在表中移动，并在按 Enter 时编辑单元格。我之前在一些表格查看器中看到了该功能，所以我知道它是可能的。

任何想法如何做到这一点？它是plugin.xml 中的一些通用绑定还是特定于查看器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:48:19.280

这可以通过添加[CellNavigationStrategy](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/CellNavigationStrategy.html)来实现。看看[JFace 片段 059](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/examples/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet059CellNavigationIn33.java)。

# c++ - c++ map/set iterator not dereferencable

> ID：13496644
> 
> 赞同：6
> 
> 时间：2012-11-21T15:35:43.863
> 
> 标签：c++, iterator, multiset

我想问你一个提示，因为我是初学者，在互联网上找不到任何合适的答案。我收到此错误： **调试断言失败 - map/set iterator not dereferencable** 在如下所示的行：

```
pointA = active->pointNext(timeNext); 
```

使用**pointNext()**函数，我看到一切正常，而关于**active**，我有：

```
active = setS.data.end(); 
```

更多信息：

**活动**是**多集< classA, classB::classC >::const_iterator**

**setS**有：**setS.Q、setS.W、setS.T**和**setS.data**，其中**setS.data**在方括号内有 0。当我在 .cpp 文件中有多重迭代器声明时，在调试期间我无法进入以查看内部活动的内容，当它在 .h 文件中时，我可以。

在 .cpp 我不能进入**active**，所以可以想象它就像指针（迭代器）不能取消引用，因为里面是错误的。如果它是空的，即**setS.data**是空的怎么办？或者里面是否有垃圾？

我知道这个东西以前在 linux 下运行，是否有一些我必须更改才能在 Windows 上运行的功能？例如将多个模板参数更改为一个？（正确地将**setS.data**归因于**active**，因为我不确定 - 我做得对吗？

很抱歉这个相当混乱的帖子，我想添加我的猜测，如果他们错了，我会忽略他们。如果这里有什么不清楚或缺少一些信息，我很乐意补充。你能告诉我什么原因可能导致我得到解引用错误，我应该在哪里寻找它？因为我被卡住了，不知道如何进行。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T15:37:51.460

很简单，因为`active`指向容器的`end()`，所以不允许取消引用它。

> 我知道这个东西以前在 linux 下运行

如果代码完全像这样并且正在“运行”，那么所有这一切都意味着错误从未以您注意到的方式表现出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T15:39:28.200

这是你的问题：

```
active = setS.data.end(); 
```

这将一个迭代器返回到一个传递到容器末尾的迭代器。
因此，它指向的项目无效。您也不能在迭代器所引用的对象上调用任何方法。

如果你做了：

```
active = setS.data.end();
if (setS.data.begin() != active)
{
    // make sure the set is not empty first
    --active;
    active->methodCall(); // This would be OK
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:38:01.147

您不能取消引用标准库`end()`函数返回的迭代器，因为这是“最后一个元素之后的一个”。通常，您会遍历有效范围，即在到达*之前*`end()`停止：

```
for(someIteratorType it = setS.data.begin(); it != setS.data.end(); ++it)
{
  it->someMethod();
} 
```

或者，在 C++11 中，

```
for (const auto& elem : setS.data)
{
  elem.someMethod();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:38:07.577

end() 指向最后一个元素之后的元素。所以 end() 是不可解引用的。

您需要添加一个检查以查看您是否在末尾，如果是，请不要取消引用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T15:39:34.620

```
pointA = active->pointNext(timeNext); 
```

尝试必须取消引用“活动”以在其上调用 operator->(...)，但活动等于 setS.data.end();

end() 返回一个迭代器，指向容器结束**后的元素。**因此，您不能取消引用它。

# kendo-ui - IE10 上 KendoUI PanelBar 的 CSS 错误？

> ID：13496647
> 
> 赞同：1
> 
> 时间：2012-11-21T15:35:51.143
> 
> 标签：kendo-ui, internet-explorer-10, panelbar

在 IE10 上使用 KendoUI PanelBar 是否存在 CSS 错误？当我在所有其他浏览器上尝试[演示](http://demos.kendoui.com/web/panelbar/index.html)时，它运行良好，但使用 ie10，项目显示有额外的空间。

任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:00:31.700

我遇到了一个问题，即在 IE10、Chrome 和 Firefox 以及早期版本的 IE10 中控件未正确呈现，我找到并立即解决的一个解决方案是为 .NET 4.5 更新 .NET Framework 4.0，服务器所在的服务器发布的应用程序必须安装 4.5 版。我希望我有所帮助。

# android - NoClassDefFoundError：sun.misc.BASE64Decoder

> ID：13496648
> 
> 赞同：2
> 
> 时间：2012-11-21T15:35:51.183
> 
> 标签：android, bouncycastle, noclassdeffounderror

```
AndroidRuntime(1109): java.lang.NoClassDefFoundError: sun.misc.BASE64Decoder 
```

尝试使用依赖于 BouncyCastle 加密库的组件 jar 时遇到此错误。在 Java Servlet 应用程序中使用相同的组件 jar 没有任何错误，所以我很困惑。我的 Android 应用程序中的 jar 引用与我为 Web 应用程序所做的相同，而没有特定于 Web 的引用。

请帮忙！

**编辑**

作为记录，jar 位于构建路径和导出中。它现在是导出中的第一项，但我仍然收到错误消息。

![在此处输入图像描述](../Images/0ac15d62024f5e7fb650f50891e5ad08.png)

**让我重申一下，这个 SAME 库在 Java Serlvet 应用程序中运行良好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:41:23.493

您是否将 jar 文件添加到您的 Java 构建路径中？如果它已添加但仍然不起作用，请转到“订购和导出”并检查文件的标记并重建项目，看看它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:41:31.243

确保您的 jar 在 Project properties > Java build bath > Order and export 中导出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:43:13.243

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在`/libs`文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于`/libs`. 将其放在那里并将其重新添加到构建路径中。

大多数情况下，出现此类错误是因为较新版本的 ADT 要求所有外部 jar 都位于 `/libs 文件夹中。您的同事可能与您使用的版本不同，因此出现了错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:58:36.003

如果您`NoClassDefFoundError`在运行时获得，那么我怀疑您没有在运行时包含您的工作。您必须像这样检查每个 .jar 的复选框：

![在此处输入图像描述](../Images/0768261d28c9ae4c94edaeac086c1f76.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T00:53:21.570

我解决了这个问题 - 详细信息可以在这个[SO](https://stackoverflow.com/questions/13556782/is-there-a-base64-library-that-is-compatible-with-both-android-and-java)帖子中找到。

# c# - 获取 Active Directory 中的用户列表

> ID：13496650
> 
> 赞同：1
> 
> 时间：2012-11-21T15:36:06.953
> 
> 标签：c#, active-directory

我正在编写一个需要从指定域获取用户列表的应用程序。我现在可以获得用户，但这是一种减慢速度的方式，尤其是在较大的域上，我怎样才能更快地做到这一点？

```
using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, domain))
        {
            UserPrincipal userPrincipal = new UserPrincipal(pc);

            PrincipalSearcher search = new PrincipalSearcher(userPrincipal);

            PrincipalSearchResult<Principal> results = search.FindAll();

            foreach (var principals in results.Partition(20))
            {
                IDictionary<string, string> users = new Dictionary<string, string>(20);
                foreach (UserPrincipal principal in principals.Cast<UserPrincipal>())
                {
                    users.Add(principal.SamAccountName, principal.DisplayName);
                }

                yield return users;
            }
        } 
```

基本上在外部 foreach 循环中，我得到了一个 IEnumerable> 的 IEnumerable。我这样做是为了尝试一次递增地加载一些并将它们显示给用户，而其余的仍在加载，但是一旦我点击了那个内部循环，我就会挂起几分钟。

我也在尝试以域\用户名格式获取用户名，但我还没有弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:24:51.090

试试这个。它应该工作得更快。

```
using System.DirectoryServices;

string[] RetProps = new string[] { "SamAccountName", "DisplayName" };
                //IDictionary<string, string> users = new Dictionary<string, string>();
List<string[]> users = new List<string[]>();

           foreach (SearchResult User in GetAllUsers("YourDomain", RetProps))
           {
            DirectoryEntry DE = User.GetDirectoryEntry();
            try
               {
                users.Add(new string[]{DE.Properties["SamAccountName"][0].ToString(), DE.Properties["DisplayName"][0].ToString()});
               }
               catch
               {
               }
            }

    internal static SearchResultCollection GetAllUsers(string DomainName, string[] Properties)
    {
      DirectoryEntry DE = new DirectoryEntry("LDAP://" + DomainName);
      string Filter = "(&(objectCategory=organizationalPerson)(objectClass=User))";
      DirectorySearcher DS = new DirectorySearcher(DE);
      DS.PageSize = 10000;
      DS.SizeLimit = 10000;
      DS.SearchScope = SearchScope.Subtree;
      DS.PropertiesToLoad.AddRange(Properties); DS.Filter = Filter;
      SearchResultCollection RetObjects = DS.FindAll();
      return RetObjects;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:51:38.157

这是相当快的。我在几秒钟内得到了 14k 个结果。如果您需要更新 ui，您可以使用事件处理程序和不同的线程。

```
 string groupName = "Domain Users";
            string domainName = "domain";
            var results = new List<string>();
            using (var pc = new PrincipalContext(ContextType.Domain, domainName))
            {
                using (var grp = GroupPrincipal.FindByIdentity(pc, IdentityType.SamAccountName, groupName))
                {
                    if (grp != null)
                        foreach (var p in grp.GetMembers(false))
                        {
                            results.Add(p.DisplayName);
                        }
                }
                Assert.IsTrue(results.Count > 0);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:34:44.627

dc 是域控制器，例如“company.com”

```
public static ArrayList GetAllActiveDirectoryUsersByDisplayName(string dc) 
            {
                ArrayList list = new ArrayList();

                PrincipalContext ctx = new PrincipalContext(ContextType.Domain, dc);
                UserPrincipal u = new UserPrincipal(ctx);

                PrincipalSearcher ps = new PrincipalSearcher(u);
                PrincipalSearchResult<Principal> results = ps.FindAll();

                foreach (UserPrincipal usr in results)
                {
                    list.Add(usr.Name);
                }

            list.Sort();

            return list; 
        } 
```

在你的前端，你可以这样做：

```
ArrayList list = GetAllActiveDirectoryUsersByDisplayName("company.com");

                foreach (string x in list)
                {
                  Console.WriteLine(x);
                } 
```

# linux - Kate 文本编辑器不能处理超过 1024 的行？

> ID：13496654
> 
> 赞同：7
> 
> 时间：2012-11-21T15:36:31.927
> 
> 标签：linux, text-editor, kate

这是编辑某些配置文件的一个非常烦人的限制，例如 mozilla `prefs.js`。它通常包含比这更长的行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T15:48:12.687

这是一个众所周知的“安全选项”，它是可配置的：

去：

```
Settings / configure editor / open and save
set line length limit [ 1024 ] 
```

并更改 1024

![在此处输入图像描述](../Images/736d76ff09555c314eb706dc54c648b9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:40:35.697

如果你反对 VIM 和 EMACS（试试看），有 gnome 的替代 Gedit，还有轻量级 IDE Geany 和 Mousepad，还有成熟的 IDE，如 Ajunta、NetBeans、QTCreator 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T09:11:39.053

这个问题现在已经解决了，见[https://bugs.kde.org/show_bug.cgi?id=345775](https://bugs.kde.org/show_bug.cgi?id=345775)

在 2019 年的 Kate 19.12.3 中，包含数千列的行似乎工作正常。尽管 127 000 列导致滞后，但与 Geany 不同。

# c# - VS2010 调试器陷入困境

> ID：13496657
> 
> 赞同：3
> 
> 时间：2012-11-21T15:36:41.023
> 
> 标签：c#, visual-studio-2010, debugging

我有一个大型的多线程 C# 程序正在开发中，它从几个 VS2010 项目/解决方案中加载多个 DLL。调试它证明比我预期的要困难（谁会想到）。

问题如下。通常情况下，经过几次单步和/或中断所有操作后，程序（或者可能是调试器）进入某种既不运行也不停止的不确定状态。在`Debug`菜单中，两者`Continue`和`Break All`都是灰色的，所以我无法继续使用该程序。

有时，但并非总是如此，当发生这种情况时，我会在监视窗口中看到一条消息：

> 函数评估已禁用，因为之前的函数评估超时。

该程序似乎没有运行（没有输出，没有在断点处停止......）并且似乎也没有停止（`Watch`窗口变灰，`Call Stack`窗口为空）。

`Stop Debugging`并且`Restart`命令可用且有效。

我可以做任何事情以便能够正常调试事物，而无需一遍又一遍地重新启动会话吗？

我是 Windows 环境中的开发新手，可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:51:28.033

正如@Conrad Frix 所说，您最好的选择可能是进行内存转储并检查您的线程在做什么。有许多工具可用于 Windows 和 .Net 开发，每个工具都带来一些不同的东西：

[Windbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx) - 基于文本的内存检查。非常适合深入研究框架/操作系统和检查线程堆栈，但学习曲线非常陡峭。（但是没有比这更强大的了）

[JetBrains dotTrace](http://www.jetbrains.com/profiler/) - 如果您使用它，则与 Reshaper 集成。虽然不是我的经验中最好的结果。

[RedGate ANTS](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/) - 我最喜欢的“现代”基于 GUI 的分析器。这使您可以很好地了解线程正在做什么，但是如果您的应用程序中有数百个线程，则可能会有点难以使用。

Jetbrains 和 RedGate 是付费产品，因此您可能需要使用他们的免费试用版来解决您的问题。

# mysql - 删除记录后如何确保 ids 保持连续？

> ID：13496658
> 
> 赞同：-1
> 
> 时间：2012-11-21T15:36:57.397
> 
> 标签：mysql, sql, database

我有一个包含多个表的数据库。一张表称为“用户”。数据的一个例子是

```
0 John Black
1 Joe Bloggs
2 Jane Doe 
```

如果我对行执行删除，`where id = 1`数据变为：

```
0 John Black
2 Jane Doe 
```

我将编写什么 SQL 来更改进一步的记录以减少 ID，以便数据变为：

```
0 John Black
1 Jane Doe 
```

**注意：**还有其他包含相关数据的表，例如员工详细信息可能通过 ID 列链接地址和电话号码，但我认为这也会改变，因为`ON UPDATE`设置为“级联”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:45:29.800

通常，出于完整性原因，我们从不更改数据库中的 ID，并且数据库中存在间隙也没有问题。这是正常的！

您不应该根据行号查找记录。如果您因为差距而遇到问题，您需要重新考虑您的应用程序中的设计。

但如果出于显示原因，我建议使用[Row_Number](https://stackoverflow.com/questions/3126972/mysql-row-number)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:55:58.793

如果你*真的*想要，你可以：

1.  写一个删除记录的[触发器](http://msdn.microsoft.com/en-us/library/ms189799.aspx)
2.  更新所有大于 -1 被删除的 id
3.  然后更新所有引用该表的表。

根据您使用的数据库，您可能需要在事务开始时删除外键约束并在结束时重新启用它们。

* * *

**但是**您可能在这里解决了错误的问题。这似乎是一个糟糕的主意，源于肛门而不是任何真正的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T17:19:06.843

不要改变你的身份。这就像每次有人离开银行时银行都会更改您的帐号。这里有太多的风险可以让事情出错。

您尝试做的另一种方法是拥有一个 sort_order 列并自行修复。每次删除时，都会使用基于 UserID ASC 的 MS SQL 函数 RANK 函数的 mysql 版本触发更新列。

这将为您提供相同的理想输出，但不会破坏任何表链接。

问候，

马库斯

# php - 我的 if 语句不能用 '||' 正确读取

> ID：13496661
> 
> 赞同：0
> 
> 时间：2012-11-21T15:37:25.560
> 
> 标签：php

我正在尝试创建一个系统，该系统取决于 a) 登录的用户或 b) 如果在数组中找到用户名。

如果您已登录并在此人的friend_array 中，您应该会看到“取消好友”按钮。如果您在属于您自己的个人资料的页面上，则所有内容都将被隐藏 如果您不在您的页面上且不在数组中，则“添加朋友”。

“添加朋友”的语句必须错误地读取我的语句，因为我只希望它出现在您不在数组中并且 _Session 用户名不等于通过获取 id 选择的用户名时。

```
 $cool = $_GET['id'];

    $evan = mysql_query("SELECT * FROM users WHERE username='{$_SESSION['user_login']}'");
    $joe1 = mysql_fetch_assoc($evan);

$cookie = mysql_query("SELECT * FROM users WHERE id='{$_GET['id']}'");
$joe = mysql_fetch_assoc($cookie);

$i = 0;
$berbs = $joe['username'];
error_reporting(E_ERROR | E_PARSE);

if (in_array($_SESSION['user_login'], $friendArray)) {
 $addAsFriend = '<input type="submit" name="removefriend" value="UnFriend">';
echo $addAsFriend;

}
error_reporting(E_ERROR | E_PARSE);

 if ($_GET['id'] == $joe1['id']) {
     $addAsFriend = '<input style="display:none;" type="submit" name="addfriend" value="Add Frimm1end">';
    echo $addAsFriend;

}
error_reporting(E_ERROR | E_PARSE);

if (!in_array($joe1['username'], $friendArray) || $_GET['id'] != $joe1['id']) {
     $addAsFriend = '<input type="submit" name="addfriend" value="Add Friend">';
     echo $addAsFriend; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:39:59.267

问题是您错误地反转了布尔逻辑。

您从这样的表达式开始：`(a() || b == c)`并且想要反转它。您假设这`!(a() || b == c)`与 相同`(!a() || b != c)`，但事实并非如此。根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，你需要改变`||`为`&&`给予`(!a() && b != c)`。

修正后的代码如下：

```
if (!in_array($joe1['username'], $friendArray) && $_GET['id'] != $joe1['id']) 
```

或者，您可以避免尝试在脑海中执行布尔逻辑：

```
if (!(in_array($joe1['username'], $friendArray) || $_GET['id'] == $joe1['id'])) 
```

* * *

您还可以从您提出问题的方式中注意到您的错误：

> 我只希望它出现在您不在数组中**并且**_Session 用户名不等于通过获取 id 选择的用户名时。

请注意，您在描述您的问题时使用了这个*词*。这直接对应于操作符`&&`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:42:19.470

我认为你应该改变你的|| (or) to && (and) 在你的情况下

# c# - 限制多个 XPath 上 SelectSingleNode 的查询时间

> ID：13496663
> 
> 赞同：1
> 
> 时间：2012-11-21T15:37:42.370
> 
> 标签：c#, xml, performance, xpath

我有一个 XML 文件，我想将三个不同节点之一解析到我的 C# 程序中。这三种不同的 XPath 中只有一种对任何 XML 文件有效，并且每一种都尽可能具体。下面是一个示例 XPath：

```
/ns:root/ns:foo/ns:bar[@barattr='{0}']/ns:foobar{1}/ns:{2} |                     
/ns:root/ns:foo/ns:bar[@barattr='{0}']/ns:{2} |                                
/ns:root/ns:foo/ns:bar[@barattr='{0}' and @{2}] 
```

请注意，它们中有格式化程序，因为在代码中我使用 String.Format 动态生成这些查询。

那么，我的问题是，如果第一个 XPath 返回一个节点，SelectSingleNode 会做什么（即存在 ns:root/ns:foo/ns:bar[@barattr='{0}']/ns:foobar{1}/ ns:{2})? 它仍然会查询所有三个 XPath 并只返回第一个，还是会知道在那个时候停止？如果它仍然查询所有三个，C# 或 XPath 中是否有任何方法表示一旦找到匹配项就停止？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:50:43.770

Not in a single XPath expression.

**You could try this, and must rely on the cleverness of the Optimizer being used:**

```
Exp1 | Exp2[not(Exp1)] | Exp3[not(Exp1) and not(Exp2)] 
```

If the optimizer is a decent one (which in the case of .NET I believe it is), Exp2 will be evaluated only if Exp1 doesn't select a node, and Exp3 will be evaluated only if neither of Exp1 and Exp2 doesn't select a node.

# sencha-touch - Sencha 命令生成错误

> ID：13496664
> 
> 赞同：1
> 
> 时间：2012-11-21T15:37:41.507
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1, sencha-command

我刚刚将我的应用程序升级到 Sencha Touch 2.1，现在我正在尝试构建它以用于生产。不幸的是，我收到以下错误消息：

```
Sencha Cmd v3.0.0.250
[DBG]       checking /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app for plugin.xml
[DBG]       checking /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/workspace for plugin.xml
[DBG]       checking /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current for plugin.xml
[DBG]       checking /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250 for plugin.xml
[DBG]       located plugin /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/plugin.xml
[INF]       init-properties:
[INF]       init-sencha-command:
[INF]       init:
[INF]       -before-app-build:
[INF]       app-build-impl:
[DBG]       found sencha.cfg at /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250
[DBG]       found workspace at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/workspace
[DBG]       found app at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app
[DBG]       loading framework config from /Users/titouanvanbelle/Documents/workspace/app/sencha/touch
[DBG]       found cmd at /Users/titouanvanbelle/Documents/workspace/app/sencha/touch/cmd
[DBG]       Checking for framework config overrides
[DBG]       resolving framework config overrides for 'touch'
[DBG]       Detected framework version 2.1.0.447
[DBG]       using framework config override '/Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current'
[INF]       production:
[INF]       -before-init-local:
[INF]       -init-local:
[INF]       -after-init-local:
[INF]       init-local:
[INF]       find-cmd:
[INF]       -before-init:
[INF]       -init:
[DBG]       Initialize Sencha Cmd with prefix = ''
[DBG]       found sencha.cfg at /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250
[DBG]       found workspace at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/workspace
[DBG]       found app at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app
[DBG]       loading framework config from /Users/titouanvanbelle/Documents/workspace/app/sencha/touch
[DBG]       found cmd at /Users/titouanvanbelle/Documents/workspace/app/sencha/touch/cmd
[DBG]       Checking for framework config overrides
[DBG]       resolving framework config overrides for 'touch'
[DBG]       Detected framework version 2.1.0.447
[DBG]       using framework config override '/Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current'
[DBG]       adding /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/sencha.jar to classpath
[INF]       -after-init:
[INF]       init:
[INF]       -before-build:
[INF]       sass:
[INF]       -before-sass:
[INF]       -sass:
[INF]       [shellscript] identical ../css/app.css 
[INF]       -after-sass:
[INF]       page:
[INF]       -before-page:
[INF]       -page:
[INF]       building application
[INF]       Deploying your application to /Users/titouanvanbelle/Documents/workspace/app/sencha/build/sencha/production
[DBG]       copying all assets
[DBG]       copying file /Users/titouanvanbelle/Documents/workspace/app/sencha/app.js
[INF]       Copied app.js
[DBG]       copying file /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/css/app.css
[INF]       Copied resources/css/app.css
[DBG]       copying all extras
[DBG]       copying from /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/images to /Users/titouanvanbelle/Documents/workspace/app/sencha/build/sencha/production/resources/images
[INF]       Copied /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/images
[DBG]       copying from /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/icons to /Users/titouanvanbelle/Documents/workspace/app/sencha/build/sencha/production/resources/icons
[INF]       Copied /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/icons
[DBG]       copying from /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/startup to /Users/titouanvanbelle/Documents/workspace/app/sencha/build/sencha/production/resources/startup
[INF]       Copied /Users/titouanvanbelle/Documents/workspace/app/sencha/resources/startup
[INF]       Resolving your application dependencies (file:////Users/titouanvanbelle/Documents/workspace/app/sencha/index.html)
[DBG]       found sencha.cfg at /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250
[DBG]       found workspace at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/workspace
[DBG]       found app at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app
[DBG]       loading framework config from /Users/titouanvanbelle/Documents/workspace/app/sencha/touch
[DBG]       found cmd at /Users/titouanvanbelle/Documents/workspace/app/sencha/touch/cmd
[DBG]       Checking for framework config overrides
[DBG]       resolving framework config overrides for 'touch'
[DBG]       Detected framework version 2.1.0.447
[DBG]       using framework config override '/Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current'
[INF]       Compiling app.js and dependencies
[DBG]       running compiler with options : 'compile --ignore=src/locale,src/platform,auth2/Auth.js,scroller/Infinite.js --options=debug:false,logger:no,minVersion:3,product:touch union --recursive --file=app.js and concatenate -out=/Users/titouanvanbelle/Documents/workspace/app/sencha/build/sencha/production/app.js'
[DBG]       found sencha.cfg at /Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250
[DBG]       found workspace at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/workspace
[DBG]       found app at /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app
[DBG]       loading framework config from /Users/titouanvanbelle/Documents/workspace/app/sencha/touch
[DBG]       found cmd at /Users/titouanvanbelle/Documents/workspace/app/sencha/touch/cmd
[DBG]       Checking for framework config overrides
[DBG]       resolving framework config overrides for 'touch'
[DBG]       Detected framework version 2.1.0.447
[DBG]       using framework config override '/Users/titouanvanbelle/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current'
[DBG]       java.lang.NoSuchMethodError
[ERR]       BUILD FAILED
[ERR]       com.sencha.exceptions.BasicException: The following error occurred while executing this line:
[ERR]       /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/build-impl.xml:120: javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped com.sencha.exceptions.BasicException: java.lang.NoSuchMethodError: org.mozilla.javascript.CompilerEnvirons.setRecordingComments(Z)V (<Unknown source>#461) in <Unknown source> at line number 461
[ERR]           at com.sencha.exceptions.BasicException.wrap(BasicException.java:43)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.cli.AbstractCommand.dispatch(AbstractCommand.java:182)
[ERR]           at com.sencha.ant.SenchaCommandTask.doExecute(SenchaCommandTask.java:58)
[ERR]           at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:22)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]           at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]           at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:87)
[ERR]           at com.sencha.command.BasePluginCommands$BasePluginCommand.run(BasePluginCommands.java:91)
[ERR]           at com.sencha.command.BasePluginCommands$BaseNamePathCommand.run(BasePluginCommands.java:135)
[ERR]           at com.sencha.command.app.AppCommands$BuildCommand.execute(AppCommands.java:106)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]           at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]       Caused by: /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/build-impl.xml:126: The following error occurred while executing this line:
[ERR]       /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/build-impl.xml:120: javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped com.sencha.exceptions.BasicException: java.lang.NoSuchMethodError: org.mozilla.javascript.CompilerEnvirons.setRecordingComments(Z)V (<Unknown source>#461) in <Unknown source> at line number 461
[ERR]           at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:551)
[ERR]           at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:444)
[ERR]           at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[ERR]           at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]           at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]           at com.sencha.command.ant.AntCommand.execute(AntCommand.java:75)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]           ... 31 more
[ERR]       Caused by: /Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/build-impl.xml:120: javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped com.sencha.exceptions.BasicException: java.lang.NoSuchMethodError: org.mozilla.javascript.CompilerEnvirons.setRecordingComments(Z)V (<Unknown source>#461) in <Unknown source> at line number 461
[ERR]           at org.apache.tools.ant.util.ReflectUtil.toBuildException(ReflectUtil.java:183)
[ERR]           at org.apache.tools.ant.util.ReflectUtil.throwBuildException(ReflectUtil.java:166)
[ERR]           at org.apache.tools.ant.util.ReflectUtil.invoke(ReflectUtil.java:110)
[ERR]           at org.apache.tools.ant.util.ReflectWrapper.invoke(ReflectWrapper.java:81)
[ERR]           at org.apache.tools.ant.util.optional.JavaxScriptRunner.evaluateScript(JavaxScriptRunner.java:103)
[ERR]           at org.apache.tools.ant.util.optional.JavaxScriptRunner.executeScript(JavaxScriptRunner.java:67)
[ERR]           at org.apache.tools.ant.taskdefs.optional.script.ScriptDef.executeScript(ScriptDef.java:350)
[ERR]           at org.apache.tools.ant.taskdefs.optional.script.ScriptDefBase.execute(ScriptDefBase.java:50)
[ERR]           at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[ERR]           at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[ERR]           at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]           at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]           at org.apache.tools.ant.Target.performTasks(Target.java:413)
[ERR]           at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[ERR]           at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
[ERR]           at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[ERR]           at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
[ERR]           ... 52 more
[ERR]       Caused by: javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped com.sencha.exceptions.BasicException: java.lang.NoSuchMethodError: org.mozilla.javascript.CompilerEnvirons.setRecordingComments(Z)V (<Unknown source>#461) in <Unknown source> at line number 461
[ERR]           at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:156)
[ERR]           at com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:170)
[ERR]           at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:247)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERR]           at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[ERR]           at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[ERR]           at java.lang.reflect.Method.invoke(Method.java:597)
[ERR]           at org.apache.tools.ant.util.ReflectUtil.invoke(ReflectUtil.java:108)
[ERR]           ... 69 more
[ERR]       Total time: 21 seconds
[ERR]       com.sencha.exceptions.BasicException: The following error occurred while executing this line:
/Users/titouanvanbelle/Documents/workspace/app/sencha/.sencha/app/build-impl.xml:120: javax.script.ScriptException: sun.org.mozilla.javascript.internal.WrappedException: Wrapped com.sencha.exceptions.BasicException: java.lang.NoSuchMethodError: org.mozilla.javascript.CompilerEnvirons.setRecordingComments(Z)V (<Unknown source>#461) in <Unknown source> at line number 461 
```

我设法通过启用 V2 兼容模式来编译应用程序，如下所述：

[http://docs.sencha.com/touch/2-1/#!/guide/command_app-section-3](http://docs.sencha.com/touch/2-1/#!/guide/command_app-section-3)

那么在没有启用此模式的情况下无法编译的原因可能是什么？

我刚刚浏览了我所有的观点并仔细检查了需求声明，它们都在那里。此外，我不会覆盖我的应用程序中的任何组件。

**更新**

它在我的一位同事的 mac 上编译没有错误。我在山狮上，这是我的`java -version`

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:08:33.657

看起来有一个指向过时版本的系统环境变量（也许是 rhino vers）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:47:13.123

它可能正在尝试使用应用程序构建进行 sass 构建（2.1 现在可以这样做），您需要安装 compass 才能使其工作，但有时即使安装了它也不会。我发现最简单的方法是自己构建 sass 并添加：

```
skip.sass=1 
```

到 touch\cmd 中的**sencha.cfg**文件。

将它添加到长虚线之前，即第一部分。

看看是否有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T00:59:56.787

我正在运行 Sencha Touch 2.1，我遇到了同样的问题，但安装了 compass gem 并且它工作正常，没有弄乱 rhino。

刚刚从命令行运行 gem install compass 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:49:26.397

这些错误是由解决依赖关系时的错误引起的。你实际上[链接](http://docs.sencha.com/touch/2-1/#!/guide/command_app-section-3)到解释。确保在任何地方都定义了您的需求/使用语句。

> 默认使用新的 Sencha Cmd 编译器来确定依赖关系。与以前的版本不同，编译器通过处理源代码（应用程序和框架）来确定依赖关系。在某些情况下，这可能会导致缺少依赖项，即在以前的版本中自动检测到但编译器未检测到的依赖项。
> 
> 在这种情况下，理想的解决方案是添加缺少的 requires 语句来解决问题。这可能包括将覆盖切换到新的命名表单，例如：

```
Ext.define('MyApp.patches.foo.Bar', {
   override: 'Ext.foo.Bar',
   ...
}); 
```

> 这使得它们的名称需要覆盖，因此编译器可以按正确的顺序处理它们。
> 
> 如果需要推迟这项工作，您可以启用 V2 兼容模式（基于通过无头 WebView 内的文件系统协议启动应用程序以提取依赖项）。

# svn - Intellij Idea svn 配置

> ID：13496665
> 
> 赞同：3
> 
> 时间：2012-11-21T15:37:46.547
> 
> 标签：svn, configuration, intellij-idea

我想配置两个 svn 存储库并通过 Intelij idea cvs/svn 插件从它们中检出。我已经通过版本控制/Svn/EditNetworkOptions 对话框配置了网络模板。每个 svn 存储库 0 的一个模板，包括 URL 模式字段和服务器（没有端口 - 通过浏览器检查 url - 它有效）我在尝试添加新存储库位置时得到的只是 svn：E175002：服务器拒绝连接以前配置的位置工作正常。请建议。

# wordpress - 如何在类别视图中检索特色图片网址？

> ID：13496669
> 
> 赞同：0
> 
> 时间：2012-11-21T15:37:54.877
> 
> 标签：wordpress

我正在编辑主题的 entry.php 以用帖子的特色图片替换缩略图。

编写了以下脚本：

```
echo $post->ID; //outputs 141
$feat_image = wp_get_attachment_url($post->ID, array('100', '100'));
var_dump($feat_image); 
```

输出：布尔（假）

我只想获取特色图片的 URL，以便我可以自己在标签下对其进行样式设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:41:09.467

您确定将图像尺寸设置为 100x100px 吗？您可以尝试传递“缩略图”而不是数组（“100”，“100”）吗？

# regex - 如何将 if 函数与 GREL 集成到 forEach 函数中？

> ID：13496671
> 
> 赞同：2
> 
> 时间：2012-11-21T15:38:03.377
> 
> 标签：regex, google-refine

我现在正在与 Google Refine 合作。我的目标是将一个现有的列拆分为两部分。我正在使用内置的“基于...添加列”功能。该列包含街道名称和对应的门牌号。例如，我有这个：

```
Stackoverflow Street 89 
```

每一行的结构都相同，这意味着街道名称可以长也可以短，可以包含一个或多个单词，但它总是以（门牌）号码结尾，并且总是用空格分隔。

当我使用 Google Refine 时，我正准备使用 GREL 语句（Google Refine Expression Language）来做到这一点。这个想法是这样的：将除以空格的每个值分成几块。将每个拆分值保存在一个变量中。然后检查特定值是否包含数值（即门牌号）。如果它是一个数值，则取该值并将其转发到输出。我已经得到了这样的东西。

```
forEach(value.split(" "), v, v).join(";") 
```

这是一个问题：我如何在 forEach 函数中集成一个 IF 函数？如果我知道该怎么做，我可能不仅可以拆分值，还可以检查它是否为数字。要检查它是否为数字，可以使用 isNumeric(value)。

我感谢每一个提示。谢谢，约尔格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T16:39:06.777

如果您描述的所有约束都成立（它始终是最后一块并且始终存在），我会使用`value.split('')[-1]`

在回答您提出的直接问题时，如果其他人在搜索中发现此问题，您到目前为止的表达相当于：

```
value.split(" ").join(";") 
```

即 forEach 没有做任何事情。要集成 if()，请将其用作表达式的一部分，该表达式构成 forEach 的第三个参数

```
forEach(value.split(" "), v, if(isNumeric(v),null,v)).join(";") 
```

我不确定您要实现哪种输出格式，但这将为您提供一个以分号分隔的单元格值中所有非数字单词的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:55:47.260

我将[`Edit column > Split into several columns...`](http://code.google.com/p/google-refine/wiki/ColumnEditing#Splitting_Columns)在您的列上使用并使用 regex`\s(?=\d+)`将其拆分，这意味着拆分必须是空格字符后跟多个数字的位置，并且数字不是拆分的一部分。

# opencl - clGetKernelWorkGroupInfo - CL_KERNEL_WORK_GROUP_SIZE 是 OpenCL 在 clEnqueueNDRange 内核中未指定时使用的大小吗？

> ID：13496681
> 
> 赞同：7
> 
> 时间：2012-11-21T15:38:24.770
> 
> 标签：opencl

我读到，当内核入队时未指定工作组大小时，OpenCL 会为我选择一个。

例如：

```
//don't know which workgroup size OpenCl will use!
clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &global_size, NULL, 0, NULL, NULL); 
```

有没有办法获得 OpenCL 在这里使用的工作组大小？工作组大小 OpenCL 是选择 clGetKernelWorkGroupInfo 返回的那个吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:37:05.537

CL_KERNEL_GLOBAL_WORK_SIZE 是您可以获得的**最大**工作组大小，这取决于内核的内存需求。

如果您在执行内核时未指定工作组大小，OpenCL 将尝试为您选择最佳的，它**可能**是或**可能不是**最大大小。

实际上，仅当与设备的计算单元数量相比，您有很多工作项时，使用最大尺寸才是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:15:49.230

您在调用 clEnqueueNDRangeKernel 时指定大小。[文档在这里。](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clEnqueueNDRangeKernel.html)在这种情况下，重要的参数是“local_work_size”。

“工作组中工作项的总数计算为 local_work_size[0] *... * local_work_size[work_dim - 1]”

# jquery - 使用 jquery 验证插件为多个控件显示单个验证消息

> ID：13496684
> 
> 赞同：1
> 
> 时间：2012-11-21T15:38:42.563
> 
> 标签：jquery, asp.net, jquery-validate

我正在为我的表单控件使用 jquery 验证插件。我可以很容易地用三个不同的消息验证三个单独的控件，并对数字、最小长度、最大长度进行适当的验证。我有网络参考、出生日期、邮政编码和其他字段等控件，它们有多个文本框。以下是供网络参考的html，

```
<input name="txtRef1" runat="server" type="text" id="txtRef1" />
<span class="ForwardSlash">-</span>
<input runat="server" name="txtRef2" type="text" id="txtRef2"  />
<span class="ForwardSlash">-</span>
<input runat="server" name="txtRef3" type="text" id="txtRef3"  /> 
```

我为此编写了一个自定义验证器方法，它检查上述三个文本框中是否有任何一个为空，然后用户将收到一条消息 - “字段是必需的”。我不想有单独的消息，因为它会破坏包括表单设计布局在内的设计。实现上述目的的脚本在这里：

```
function setuppagevalidationrecall() {

    $.validator.addMethod('example',

      function (value, element) {

              return ((value != "") && ($('#txtRef2').val() != "") && ($('#txtRef3').val() != ""));

          }, "Field is required");

    var validator = $("#form1").validate({
        rules: {
            txtRef1: {
                example: true,
                number: true,
                minlength: 3,
                maxlength: 3
            }

        }
    }); 
```

如何改进此功能以检查数字、最小长度和最大长度，以便对于上面的所有三个文本框，我只收到一条消息作为验证消息。并且还使示例方法像使用参数一样动态化，以便它可以应用于任何字段，如邮政编码（2 个文本框）、出生日期（3 个文本框，dd/mm/yyyy）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:22:48.837

为多个控件显示单个验证消息是组的用途。

> 指定错误消息的分组。组由作为键的任意组名称和作为值的元素名称的空格分隔列表组成。使用 errorPlacement 来控制组消息的放置位置。

采用

```
groups:{ txtRef : "txtRef1 txtRef2 txtRef3" } 
```

和

```
errorPlacement: function (error, element) {
                if (element.attr("name") == "txtRef1"
             || element.attr("name") == "txtRef2"
             || element.attr("name") == "txtRef3")
                    error.insertAfter("#txtRef3");
                else
                    error.insertAfter(element);
    }, 
```

**在这里试试：**

[http://jsfiddle.net/uZYMr/2/](http://jsfiddle.net/uZYMr/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:21:37.020

你想要做什么可以通过正确使用来处理，并且`invalidHandler`不需要创建一个来为表单中的许多元素存储一个全局错误消息。`errorPlacement``jquery.validate``function`

我知道`jquery.validate`有时会因为同时触发所有错误而很烦人，但我相信这会对你有所帮助。

**看看这个例子：**

[http://jsfiddle.net/Lrvxk/](http://jsfiddle.net/Lrvxk/)

如您所见，没有自定义功能或棘手的事情可以让事情按您的意愿工作。

希望这可以帮助 ：-）

# excel - 如何使用 VBA 保存分号分隔的 csv 文件？

> ID：13496686
> 
> 赞同：13
> 
> 时间：2012-11-21T15:38:42.643
> 
> 标签：excel, vba

我将数据复制到电子表格中，使用 VBA 对其进行格式化，然后将该工作表保存到 CSV 文件中。

我使用以下代码：

```
ws.SaveAs Filename:=filestr, Fileformat:=xlCSV 
```

ws 是我保存的工作表。

这给了我一个逗号分隔的 CSV 文件。

我想将该工作表保存到以分号分隔的文件中。

我发现了以下内容：

1.  转到开始>设置>区域和语言选项
2.  点击自定义按钮
3.  在列表分隔符旁边键入分号 (;)

我按照上面的步骤将代码更改为：

```
ws.SaveAs Filename:=filestr, Fileformat:=xlCSV, Local:=True 
```

我仍然得到一个逗号分隔的 CSV 文件作为输出。

我正在使用 Excel 2003，我的操作系统是 Windows XP。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-28T15:44:14.220

我刚刚检查过这个，因为有同样的问题。在这种情况下，文件名没有任何功能。

这对我有用：

```
With ActiveWorkbook
    .SaveAs Filename:="My File.csv", FileFormat:=xlCSV, Local:=True
    .Close False
End With 
```

在区域设置中 -> ; <- 作为列表分隔符。关闭时不要保存更改也很重要 -> 使用 Close 您必须使用`False`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-21T17:26:29.580

无需声明所有这些变量，只需在 SaveAs 方法的末尾添加 local:=true 即可，如下所示：

```
ActiveWorkbook.SaveAs Filename:="C:/Path/TryMe.csv", FileFormat:=xlCSV, Local:=True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-19T17:19:56.373

我遇到了同样的问题，在考虑尝试使用 VBA 代码和内核调用更改区域设置中的“行分隔符”后，我认为这会更痛苦，所以我只是找到了一些使用 Scripting.FileSystemObject 的示例来满足我的需求。

以下代码将采用现有的 csv 文件并将所有逗号替换为波浪号“~”字符。

```
Private Sub commaReplace()

    Dim objFSO
    Dim filePath
    Dim migratorFileName
    Dim strFullPath1
    Dim strFullPath2
    Const ForReading = 1
    'define a TextStream object
    Dim objTS
    Dim strContents As String

    'note, my code actually uses the below commented out filepath
    'as the location of the workbook can be arbitrary, e.g.
    'Worksheets("FilePath").[A2:A2].Value is determined when workbook
    'is opened
    'filePath = Worksheets("FilePath").[A2:A2].Value
    filePath = "C:\Temp\"

    'our original file that we've exported as csv file in another section of code
    migratorFileName = "MigratorInput.csv"
    strFullPath1 = filePath + migratorFileName

    'the path and file name we want to save to, tilde separated vs. comma
    migratorFileName = "MigratorInput.tilde.csv"
    strFullPath2 = filePath + migratorFileName

    'read everything from the csv file, replacing comma with tilde
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set objTS = objFSO.OpenTextFile(strFullPath1, ForReading)
    strContents = objTS.ReadAll
    strContents = Replace(strContents, ",", "~")
    objTS.Close

    'write everything out to another file, note, this could just overwrite
    'the original file if you pass the optional overwrite flag
    Set objTS = objFSO.CreateTextFile(strFullPath2)
    objTS.Write strContents
    objTS.Close

End Sub 
```

然后，您可以从创建 csv 文件的子例程中调用 commaReplace 子例程。

希望它可以帮助某人！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-25T21:03:26.950

在构建成功后使用 vbs 脚本：

.SaveAs 文件名, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1

其中参数是：

```
Object Filename,
Object FileFormat,
Object Password,
Object WriteResPassword,
Object ReadOnlyRecommended,
Object CreateBackup,
XlSaveAsAccessMode AccessMode,
Object ConflictResolution,
Object AddToMru,
Object TextCodepage,
Object TextVisualLayout,
Object Local 
```

源链接：[https ://msdn.microsoft.com/ru-ru/library/microsoft.office.tools.excel.workbook.saveas.aspx](https://msdn.microsoft.com/ru-ru/library/microsoft.office.tools.excel.workbook.saveas.aspx)

“SaveAs”函数中的最后一个“1”等于 Local=True

此外，分号必须定义为操作系统区域设置中的列表分隔符（请参阅上面的答案）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-01T09:28:53.700

使用 xlCSVMSDOS 插入 xlCSV

```
ActiveWorkbook.SaveAs Filename:="my File.csv", FileFormat:= xlCSVMSDOS, Local:=True 
```

它对我有用

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-07-02T09:23:29.473

只需使用此代码：ActiveWorkbook.SaveAs "My File.csv", xlCSV, Local:=True

（不要使用：文件名：=）

# sql - 具有不同有效期的产品 ID

> ID：13496689
> 
> 赞同：1
> 
> 时间：2012-11-21T15:38:53.563
> 
> 标签：sql, database-design, data-modeling

现在我正在创建一个应用程序来管理库存。我们经常收到产品，通常它们有不同的到期日期或价格。例子：

```
RECEIPT    PROVIDER     PRODUCT       PRODUCT EXPIRATION DATE    PRICE   QUANTITY
2125       IQT          PLASTIC BAG   10/21/2012                 2.35    30
2126       MDU          PLASTIC BAG   05/03/2012                 2.45    60
2127       PRADO        PLASTIC BAG   10/21/2012                 2.30    10

PRODUCT    NAME          EXPIRATION DATE   PRICE  QUANTITY
1001       PLASTIC BAG   10/21/2012        2.35   30
1001       PLASTIC BAG   05/03/2012        2.45   50
1001       PLASTIC BAG   10/21/2012        2.30   10 
```

我的问题是我是否也应该设置 EXPIRATION DATE 和 PRICE 主键，以便我可以注册具有不同参数的产品。或者我应该创建 PRODUCT ID 和 RECEIPT ID 的双 PK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:52:25.410

我认为缓慢变化的维度表中的复合键是可以接受的。我不同意产品的价格是组合键的一部分。(ProductID, ExpirationDate) 会很好。有些人可能会争辩说您实现了一个存档表（例如 Product_Archive），并且只在 Product 表中保留当前记录。

您可以选择使用代理键代替主键中的 SKU、UPC 或 PLU。

我建议将产品价格作为单独表格的候选者，因为产品价格有许多驱动因素。在实体环境中，您的产品价格会因地点而异。

以脐橙为例。您可以根据购买它们的季节或地区等因素从多个供应商处获得它们。

# php - 使用 Composer 和 post-install-cmd 在 AppKernel 中自动添加注册包？

> ID：13496690
> 
> 赞同：2
> 
> 时间：2012-11-21T15:38:59.960
> 
> 标签：php, symfony, bundle, composer-php

我已经看到了这一点，目前正在尝试将其作为一个选项来实现：

*   [有没有办法在 symfony2 中自动更新 AppKernel？](https://stackoverflow.com/questions/13082254/is-there-a-way-to-update-automatically-the-appkernel-in-symfony2)

但是有没有人使用 Composer 使用 post-install-cmd 选项在 AppKernel 中自动注册一个 Bundle？

所以在我安装了一个包之后：

```
composer require Project/ProjectBundle:1.* 
```

所以在 composer.json 我可能会添加这样的东西

```
"scripts": {
    "post-install-cmd": [
        "Project\\Bundle\\ProjectBundle\\Composer\\RegisterBundle::registerBundleName"
    ]
}, 
```

也对其他想法、想法和建议持开放态度

# java - JavaFX 2、SWT 和 Webstart

> ID：13496697
> 
> 赞同：3
> 
> 时间：2012-11-21T15:39:14.860
> 
> 标签：java, swt, javafx, jnlp, java-web-start

我们正在开发一个使用一些 JavaFX 控件的 SWT 应用程序。[http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm](http://docs.oracle.com/javafx/2/swt_interoperability/jfxpub-swt_interoperability.htm)中的示例 建议我们使用本地安装的版本`jfxrt.jar`作为 JavaFX 运行时环境，并且 NetBeans 将使用此 jar 作为包的一部分在构建 webstart/jnlp 发行版时。

但是，通常不鼓励这样做，因为 jfxrt.jar 必须与客户端上安装的版本相匹配（否则会导致崩溃）。相反，建议使用在 jnlp 文件中定义对 JavaFX 的依赖项

```
<jfx:javafx-runtime [...]> 
```

标签。不幸的是，这样做时，SWT 集成失败并抛出：

```
java.lang.NoClassDefFoundError: org/eclipse/swt/widgets/Canvas 
```

这可能是因为 SWT 类的定位方式。

有什么办法，支持这种情况吗？

感谢您提供任何线索。

# xml - 如何将无效的 XML 转换为有效的 XML

> ID：13496698
> 
> 赞同：2
> 
> 时间：2012-11-21T15:39:20.987
> 
> 标签：xml, xsd

如何根据给定的 xsd-schema 将无效的 XML 转换为有效的 XML？例如，我有下一个 xsd 架构：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="note">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="to" type="xs:string"/>
      <xs:element name="from" type="xs:string"/>
      <xs:element name="heading" type="xs:string"/>
      <xs:element name="body" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

和下一个无效的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<note xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../my_xsd.xsd">
  <to>reviver@mail.com</to>
  <from>sender@mail.com</from>
  <body>blablabla</body> <!-- IVALID LINE, IT IS NOT IN RIGHT PALCE -->
  <heading>head</heading>
</note> 
```

我的问题是：JAXB、XSTREAM 或其他 XML 解析器是否有解决方案来根据给定模式将我的无效 XML 转换为有效 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<note xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../my_xsd.xsd">
  <to>reviver@mail.com</to>
  <from>sender@mail.com</from>
  <heading>head</heading>
  <body>blablabla</body>
</note> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:47:49.593

如果您需要对项目进行重新排序，您可能必须首先在没有 xsd 的情况下阅读它们，然后使用 xslt 根据 xsd 的喜好对它们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:50:44.717

假设：我假设输入是格式良好的 XML。

一般来说**，**答案是否定的……没有算法能够将**任意**XML 输入文档转换为给定模式的有效*且语义正确*的实例。

*但是，*如果输入无效的方式**仅限**于一小部分问题，例如子元素`<note>`乱序，那么**是**的，几乎任何 XML 解析和序列化库都可以帮助您解决问题。正如@KevinDTimm 所暗示的那样，您需要关闭这些工具中的模式验证，以便它们在修复之前不会拒绝输入。

我个人会使用 XSLT，因为我已经习惯了。您可以让它以它们出现的任何顺序读取子元素，并以正确的顺序将它们输出为 XML：

```
<xsl:template match="note">
  <xsl:copy>
    <xsl:apply-templates select="to" />
    <xsl:apply-templates select="from" />
    <xsl:apply-templates select="heading" />
    <xsl:apply-templates select="body" />
  </xsl:copy>
</xsl:template> 
```

但是您列出的示例工具 - JAXB 和 XSTREAM - 不仅是 XML 解析器，而且是 XML*对象*解析器/序列化器。如果您需要在构建对象时纠正验证错误，那会使事情变得复杂。一个单独的更正然后反序列化的过程会更简单。

# vb.net - 如何在 vb.net 中使用滚轮放大图片框

> ID：13496706
> 
> 赞同：9
> 
> 时间：2012-11-21T15:39:47.713
> 
> 标签：vb.net, vb.net-2010

我正在使用一组图形覆盖来使用图形对象在图片框控件内绘制图像。我已将 Picturebox 放置在 Panel 内并将 Panel 设置为自动滚动。我现在需要知道如何做的是使用鼠标滚轮以小增量放大图片的大小，同时保持绘制的图像质量。有人知道怎么做吗？

当我使用下面的 Abdias Software 代码进行更新时，当图片框的 Sizemode 属性设置为 StretchImage 时，图片开始变小。我的鼠标具有平移功能，可能会干扰此代码无法正常工作。有任何想法吗？什么可能会阻止它正常工作？

***解决了***

这段代码对我来说比下面的任何一个都好得多：

```
Private Sub PictureBox_MouseWheel(sender As System.Object,
                             e As MouseEventArgs) Handles PictureBox1.MouseWheel
    If e.Delta <> 0 Then
        If e.Delta <= 0 Then
            If PictureBox1.Width < 500 Then Exit Sub 'minimum 500?
        Else
            If PictureBox1.Width > 2000 Then Exit Sub 'maximum 2000?
        End If

        PictureBox1.Width += CInt(PictureBox1.Width * e.Delta / 1000)
        PictureBox1.Height += CInt(PictureBox1.Height * e.Delta / 1000)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T16:59:45.720

你可以试试这段代码。它假设存在一个`Panel1`and`PictureBox1`在表单上（`PictureBox1`在`Panel1`with内`Panel1.AutoScroll = True`），并且在 上设置了一个图像`PictureBox`。

该代码不计算缩放的中心点，但您可以为此使用 e.Location（或 eX/eY）。

更新 - 这是（应该）比以前更健壮的新代码（见底部）：

```
Public Class Form1

    Private _originalSize As Size = Nothing
    Private _scale As Single = 1
    Private _scaleDelta As Single = 0.0005

    Private Sub Form_MouseWheel(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseWheel

        'if very sensitive mouse, change 0.00005 to something even smaller   
        _scaleDelta = Math.Sqrt(PictureBox1.Width * PictureBox1.Height) * 0.00005

        If e.Delta < 0 Then
            _scale -= _scaleDelta
        ElseIf e.Delta > 0 Then
            _scale += _scaleDelta
        End If

        If e.Delta <> 0 Then _
        PictureBox1.Size = New Size(CInt(Math.Round(_originalSize.Width * _scale)), _
                                    CInt(Math.Round(_originalSize.Height * _scale)))

    End Sub

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage

        'init this from here or a method depending on your needs
        If PictureBox1.Image IsNot Nothing Then
            PictureBox1.Size = Panel1.Size
            _originalSize = Panel1.Size
        End If

    End Sub

End Class 
```

旧代码 - 有效，但可能由于 Scale() 中的舍入错误而在大更改时不稳定：

```
Public Class Form1

    Private _scale As New SizeF(1, 1)
    Private _scaleDelta As New SizeF(0.01, 0.01) '1% for each wheel tick

    Private Sub Form_MouseWheel(sender As System.Object, 
                                e As MouseEventArgs) Handles Me.MouseWheel
'count incrementally 
        _scale.Height = 1
        _scale.Width = 1

        If e.Delta < 0 Then
            _scale += _scaleDelta
        ElseIf e.Delta > 0 Then
            _scale -= _scaleDelta
        End If

        If e.Delta <> 0 Then _
        PictureBox1.Scale(_scale)

    End Sub

    Private Sub Form1_Load(sender As System.Object, 
                           e As EventArgs) Handles MyBase.Load

        PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage

        'init picturebox size = image size
        If PictureBox1.Image IsNot Nothing Then
            PictureBox1.Scale(New SizeF(1, 1))
            PictureBox1.Size = PictureBox1.Image.Size
        End If

    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:57:20.493

基本上，您需要一个图像查看器。我以前用过这个： [http ://cyotek.com/blog/creating-a-scrollable-and-zoomable-image-viewer-in-csharp-part-4](http://cyotek.com/blog/creating-a-scrollable-and-zoomable-image-viewer-in-csharp-part-4)

效果很好。但是，它是一个用户控件。

对于图片框，您需要从图像创建图形，然后对其进行插值。这是一个例子： [http ://www.dotnetcurry.com/ShowArticle.aspx?ID=196](http://www.dotnetcurry.com/ShowArticle.aspx?ID=196)

我没有检查这个，但看起来会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T19:15:33.193

我注意到`StretchImage` `SizeMode`忽略图像比例会产生不良影响。我刚刚添加了一个宽度和高度比率变量以包含在“缩放”算法中。请参阅下面`_ratWidth`的`_ratHeight`代码。

```
Public Class Form1

Private _originalSize As Size = Nothing
Private _scale As Single = 1
Private _scaleDelta As Single = 0.0005
Private _ratWidth, _ratHeight As Double

Private Sub Form_MouseWheel(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseWheel

    'if very sensitive mouse, change 0.00005 to something even smaller   
    _scaleDelta = Math.Sqrt(PictureBox1.Width * PictureBox1.Height) * 0.00005

    If e.Delta < 0 Then
        _scale -= _scaleDelta
    ElseIf e.Delta > 0 Then
        _scale += _scaleDelta
    End If

    If e.Delta <> 0 Then _
    PictureBox1.Size = New Size(CInt(Math.Round((_originalSize.Width * _ratWidth) * _scale)), _
                                CInt(Math.Round((_originalSize.Height * _ratHeight) * _scale)))

End Sub

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage

    'init this from here or a method depending on your needs
    If PictureBox1.Image IsNot Nothing Then
        _ratWidth = PictureBox1.Image.Width / PictureBox1.Image.Height
        _ratHeight = PirctureBox1.Image.Height / PictureBox1.Image.Width
        PictureBox1.Size = Panel1.Size
        _originalSize = Panel1.Size
    End If
End Sub
End Class 
```

# java - 如何覆盖 Log4J 行号

> ID：13496707
> 
> 赞同：1
> 
> 时间：2012-11-21T15:39:49.663
> 
> 标签：java, parameters, log4j, overriding

我不确定这是否可行，但我希望能够使用 log4j 注销数据。但是，比起 log.info() 语句的实际位置，我更希望 log4j 在普通字段中显示调用函数方法名称、行等，而不是作为日志数据。

是否可以覆盖日志事件的数据字段？

```
public class Foo
{
    public static void info(String msg)
    {
        Logger aLogger = Logger.getRootLogger();

        // -- Set the calling function location info here

        aLogger.info(msg);
     }
}

public class Bar
{
    public void test()
    {
        Foo.info("x");   // -- Want this line, file, class, method logged
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T20:19:00.793

我不完全确定我完全按照你在做什么，但听起来 AspectJ 可以帮助你解决问题。

如果您要创建一个包装对记录器方法的调用的方面，您将能够提取调用者的方法/类并覆盖发送到实际记录器的任何参数（使用[ProceedingJoinPoint](https://www.eclipse.org/aspectj/doc/next/runtime-api/org/aspectj/lang/ProceedingJoinPoint.html)）。

我不完全确定您可以在 Log4j 的哪个位置指定您自己的行号、类信息等，但我认为某处必须有某些东西。否则，您必须编写自己的记录器实现，您可以在其中指定该信息。

# vb.net - 在 linq 中使用左连接查询

> ID：13496710
> 
> 赞同：1
> 
> 时间：2012-11-21T15:39:59.580
> 
> 标签：vb.net, linq

您好我正在尝试在 linq 中进行查询，但我想我需要一些帮助...

我有两个表： langAvailable 和 Translations 我想要一个“行”，即使没有记录翻译

例如：

```
 LangId: 1  TranslationID:10  Translation: Hello
           LangId: 2  TranslationID:10  Translation: Bonjour
           LangId: 1  TranslationID:11  Translation: Thanks
           LangId: 2  TranslationID:11  Translation: 
```

这就是我所做的：

```
 Dim query = From c In db.LangAvailable _
             Join o In db.Translate On c.ID_Lang Equals o.Lang_ID _
             Where o.TranslationID = 243 _
             Select New With {c.LangId, o.Translation} 
```

如果翻译表中没有翻译，这只会给我一条记录......知道我怎么能得到那个吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:21:11.097

您可以使用群组加入来做您想做的事情。尝试这个：

```
Dim query = From c In db.LangAvailable _
                Group Join o In db.Translate On c.ID_Lang Equals o.Lang_ID Into Group _
                From o In Group.DefaultIfEmpty() _
                Where o.TranslationId = 243 _
                Select LangId = c.ID_Lang, Translation = If(o.Translation Is Nothing, Nothing, o.Translation) 
```

# c++ - 写入文件时OpenCV未处理的异常

> ID：13496712
> 
> 赞同：2
> 
> 时间：2012-11-21T15:40:03.687
> 
> 标签：c++, opencv

在尝试了不同的事情之后，我的程序在保存图像时总是崩溃。它可以很好地读取图像，我可以将其可视化，但我无法保存文件（它出现在我使用 imwrite 时使用 OpenCV 制作的所有程序中）。它在使用 OpenCV 2.1 在 Visual Studio 10.0 中进行调试时发生：

```
Unhandled exception at 0x67570fcd in SR.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

这里的代码：

```
Mat imLow;

imLow=imread("Cameraman256.png",0);
if(!imLow.data)                             
{
    std::cout<<  "Could not open or find the image" << std::endl ;
    return -1;
}
imwrite( "image.png", imLow); 
```

谁能告诉我如何解决这个问题？谢谢

**更新**：这似乎是 PNG 和 JPEG 格式的问题，因为该行在以 BMP 格式保存时有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:14:30.650

BMP 文件保存是内置的，IIRC .PGM 也是内置的，其他文件由 3rd 方库提供，具体取决于您的操作系统。

你自己构建了openCV吗？什么操作系统？

# c# - 成员资格自定义提供程序在 web.config 中调用失败

> ID：13496713
> 
> 赞同：2
> 
> 时间：2012-11-21T15:40:05.713
> 
> 标签：c#, asp.net, custom-membershipprovider

大家好，这是我的应用程序配置

```
 <membership
 defaultProvider="TheTWMembershipProvider" userIsOnlineTimeWindow="20">
      <providers>
        <clear/>
        <add name="TheTWMembershipProvider"
            type="Model.TWMembershipProvider, Model"/>
      </providers>
    </membership> 
```

**这是我尝试登录时遇到的错误**

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Exception has been thrown by the target of an invocation.

Source Error: 

Line 99:         <clear/>
Line 100:        <add name="TheTWMembershipProvider"
Line 101:            type="Model.TWMembershipProvider, Model"/>
Line 102:      </providers>
Line 103:    </membership> 
```

我得到了以`Model.Dll`自定义提供程序命名类命名的 Dll`TWMembershipProvider : System.Web.Security.MembershipProvider`

我暗示

```
 public override bool ValidateUser(string username, string password)
    {
        return true;
    } 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T11:58:26.753

错误消息表明调用成员资格提供程序的构造函数（实例或静态）时出错。请记住，字段初始值设定项算作构造函数的一部分！

您应该有一个包含更多详细信息的内部异常。

# html - 如何创建 html 文件以执行自动发布请求

> ID：13496714
> 
> 赞同：0
> 
> 时间：2012-11-21T15:40:11.550
> 
> 标签：html, forms, post, cookies, submit

我正在尝试创建一个带有 jquery 支持的文件 html，它会检查一些 cookie。如果存在 cookie，它会填写一个表格并提交（一切都在加载！）。如果 cookie 不存在，它会显示一个登录表单。

所以我想要开发的是一个带有登录表单的页面，用于首次访问和其他访问“重定向”到另一个域上的另一个页面。

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>mylocalpage</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
            <script src="http://mysite.com/jquery-cookie.js"></script>
            $(document).ready(function(){
                var ag = $.cookie("agenc");
                var op = $.cookie("oper");
                var pa = $.cookie("pass");
                if(ag==null || op==null || pa==null){
                    var loginBox = $('#login-box');
                    $(loginBox).fadeIn(300);
                    var popMargTop = ($(loginBox).height() + 24) / 2; 
                    var popMargLeft = ($(loginBox).width() + 24) / 2; 

                    $(loginBox).css({ 
                        'margin-top' : -popMargTop,
                        'margin-left' : -popMargLeft
                    });
                    $('body').append('<div id="mask"></div>');
                    $('#mask').fadeIn(300);
                }else{
                    $('#txtAgency_ext').val(ag);
                    $('#txtUsername_ext').val(op);
                    $('#txtPassword_ext').val(pa);
                    $('#form').submit();
                }
            });
            function saveData(){
                var ag = $('#txtAgency_ext').val(), op = $('#txtUsername_ext').val(), pa = $('#txtPassword_ext').val();
                if(ag.length>0 && op.length>0 && pa.length>0){
                    $.cookie("agenc",ag,{ expires: 365,path:"/" });
                    $.cookie("oper",op,{ expires: 365,path:"/" });
                    $.cookie("pass",pa,{ expires: 365,path:"/" });
                    $('#form').submit();
                }else{
                    alert('All field required!');
                }
            }
        </script>
    </head>
    <body>
        <style>
            #mask {
    display: none;
    background: #000; 
    position: fixed; left: 0; top: 0; 
    z-index: 10;
    width: 100%; height: 100%;
    opacity: 0.8;
    z-index: 999;
}

.login-popup{
    display:none;
    background: #333;
    padding: 10px;  
    border: 2px solid #ddd;
    float: left;
    font-size: 1.2em;
    position: fixed;
    top: 50%; left: 50%;
    z-index: 99999;
    box-shadow: 0px 0px 20px #999;
    -moz-box-shadow: 0px 0px 20px #999; /* Firefox */
    -webkit-box-shadow: 0px 0px 20px #999; /* Safari, Chrome */
    border-radius:3px 3px 3px 3px;
    -moz-border-radius: 3px; /* Firefox */
    -webkit-border-radius: 3px; /* Safari, Chrome */
}

img.btn_close {
    float: right; 
    margin: -28px -28px 0 0;
}

fieldset { 
    border:none; 
}

form.signin .textbox label { 
    display:block; 
    padding-bottom:7px; 
}

form.signin .textbox span { 
    display:block;
}

form.signin p, form.signin span { 
    color:#999; 
    font-size:11px; 
    line-height:18px;
} 

form.signin .textbox input { 
    background:#666666; 
    border-bottom:1px solid #333;
    border-left:1px solid #000;
    border-right:1px solid #333;
    border-top:1px solid #000;
    color:#fff; 
    border-radius: 3px 3px 3px 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    font:13px Arial, Helvetica, sans-serif;
    padding:6px 6px 4px;
    width:200px;
}
        </style>
        <div id="login-box" class="login-popup">
            <form method="post" id="form" name="login" action="http://a.page.com">
                <label>
                    <span>Agency</span>
                    <input id="txtAgency_ext" name="txtAgency_ext" value="" type="text">
                </label>

                <label>
                    <span>Operator</span>
                    <input id="txtUsername_ext" name="txtUsername_ext" value="" type="text">
                </label>

                <label>
                    <span>Password</span>
                    <input id="txtPassword_ext" name="txtPassword_ext" value="" type="password">
                </label>
          </form>
          <button class="button" onclick="saveData()">Save and submit!</button>
        </div>
    </body>
</html> 
```

我的问题是，当提交表单时，页面被重定向到她自己，所以这对夫妇提交->重定向->提交->重定向等无限时间......我该如何解决？谢谢！

编辑：这里发生了什么：

[http://jsfiddle.net/x96qV/](http://jsfiddle.net/x96qV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:08:46.753

让我们检查一下您的应用程序的流程。

1.  用户点击提交按钮，设置 cookie 并提交表单。页面重新加载。
2.  页面加载并检查 cookie。它们存在，所以`else`语句被执行。这包括`$('#form').submit();`提交表单的行。页面重新加载。
3.  无限期地重复第 2 步。

因此，您需要删除该`$('#form').submit();`行以阻止表单无限期地自行提交。

# c# - 另存为使用提供的文件名，但稍后在代码中更改为 null - 这导致文件永远不会被创建

> ID：13496716
> 
> 赞同：0
> 
> 时间：2012-11-21T15:40:15.107
> 
> 标签：c#, logic, save-as

所以，我上次有一个关于语法的问题，现在语法错误已经修复，我有一个问题，即使我的教授看了之后，他也不知道如何修复。我们逐行浏览了我的代码，并通过初始的另存为对话框，一切看起来都很好，并且文件名/路径显示在调试器中。它传递到创建文件行，然后传递到我必须添加以使我的语法正常工作的代码 - 然后继续到我试图打开文件的位置，以便能够使用带有我的随机数的 writeline 命令生成器 - 而不是打开适当的文件，它变成“空”作为一个值！但它并没有就此停止，它继续到随机数生成器，并滚动所需数量的随机数，但当然，由于开始值显示为“null”，它不会 t 像它应该的那样保存到文件中。哦，我教科书中的代码是产生第一个语法错误的原因，但没有提供修复它的方法。这是代码，对不起，如果它很长/难以阅读。

```
using System.IO; // Added to be able to use StreamWriter variable type

namespace Random_Number_File_Writer
{
public partial class Form1 : Form
{ 
    StreamWriter randomNumberFile; //Name streamwriter
    decimal numbers; //Variable to insert the number up down value into
    Random rand1 = new Random(); //Random number generator
    int writeitem; // Variable to insert random number into, to write.

    public Form1()
    {

        InitializeComponent();
    }
    public void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
    {
    }

    private void generateButton_Click(object sender, EventArgs e)
    {
        try
        {
            //Initial opening point for save file dialogue
            saveFileDialog1.InitialDirectory = @"C:\Users\Heather\Documents\Visual Studio 2010\Projects\Random Number File Writer";
            //Save As popup - Opening the file for writing usage once it's created.
            if(saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                randomNumberFile = File.CreateText(openFileDialog1.FileName);
            }
            else // Popup informing user that the data will not save to a file because they didn't save.
            {
                MessageBox.Show("You elected not to save your data.");
            }

            numbers = numericUpDown1.Value; //Gathering the number of numbers to generate from the number box.

            while (numbers > 0) // Loop counting down to 0 to give the user the appropriate number of requested random numbers.
            {

                writeitem = rand1.Next(101); // Random number generated.
                randomNumberFile.WriteLine(writeitem); //Random number written to file
                numbers--; // Initial number for user input decremented so that loop will have an ending and user only gets the amount of randoms asked for.
            }
            randomNumberFile.Close();
        } 
```

我只包括了相关的部分——事后我确实有一点，但这只是用于退出/清除按钮，调试器根本不会跳转到它们，所以我剪掉了多余的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:43:36.847

您正在使用`openFileDialog1.Filename`with`File.CreateText`但高于您使用`saveFileDialog1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:43:23.097

对我来说，您的 while 数字循环位于保存文件对话框的 if else 逻辑之外，这对我来说毫无意义。如果他们没有选择文件，那么您为什么还要尝试将随机数写入文件？在 if 语句中移动 while 循环。

此外，正如马里奥指出的那样，您正在使用来自 2 个不同对话框的不匹配文件名，因此这是问题的根本问题，但我建议您同时修复这两个问题以避免将来出现问题。

```
try
    {
        //Initial opening point for save file dialogue
        saveFileDialog1.InitialDirectory = @"C:\Users\Heather\Documents\Visual Studio 2010\Projects\Random Number File Writer";
        //Save As popup - Opening the file for writing usage once it's created.
        if(saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            randomNumberFile = File.CreateText(saveFileDialog1.FileName);
            numbers = numericUpDown1.Value; //Gathering the number of numbers to generate from the number box.
            while (numbers > 0) // Loop counting down to 0 to give the user the appropriate number of requested random numbers.
            {
                writeitem = rand1.Next(101); // Random number generated.
                randomNumberFile.WriteLine(writeitem); //Random number written to file
                numbers--; // Initial number for user input decremented so that loop will have an ending and user only gets the amount of randoms asked for.
                randomNumberFile.Close();
            }
        }
        else // Popup informing user that the data will not save to a file because they didn't save.
        {
            MessageBox.Show("You elected not to save your data.");
        }
    } 
```

# actionscript-3 - 静态主类 - AS3

> ID：13496718
> 
> 赞同：5
> 
> 时间：2012-11-21T15:40:22.017
> 
> 标签：actionscript-3, flash, main

有没有办法使主类 - 基于主 .fla 的类 - 静态？所以我们可以像在java中一样使用它，能够从其他类中引用它，因为我必须将main本身的实例作为参数传递给一个类，否则我会失去引用。我试图添加静态前缀，但似乎 as3 不允许。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:43:32.690

AS3 中没有静态类的概念。

您可以使用单例模式来公开主类的唯一实例：

```
public class Main extends Sprite {

    public static var instance:Main;

    public function Main() {
         instance = this;
    } 
```

...或者只是将其他属性/方法标记为`static`，尽管它变得更难管理。

我需要提一下，虽然使用`static`有时会导致糟糕的代码设计（例如，您可以通过`Main`构造函数将实例传递给需要它的类）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T17:21:14.407

这不会是流行的答案，我知道......使用静态属性来公开实例是一个非常糟糕的主意。Singleton 反模式非常流行，但不应该流行，它会导致不良实践并不必要地将类相互联系起来。

你需要问问自己是否真的需要在其他类中引用主类？AS3 有一个事件系统，可以为您提供所需的所有松散耦合。如果显示对象需要与主类实例通信，这可以通过通过显示列表发送事件来完成。

依赖管理的问题最好由依赖注入框架来处理（其中许多框架都有一些集中的消息传递系统，这远远超过了显示列表上的事件）。如果您觉得任何流行的（PureMVC、RobotLegs 等）太过分了，您可以自己轻松创建（简单且有限的）一个。

有很多工具和模式永远不必依赖单例或静态实例访问器，因为它们让你的生活变得悲惨，你的代码脆弱、不灵活、不可测试、不可靠和有缺陷。

# sql - 我在使用 Oracle SQL 练习时遇到了问题

> ID：13496720
> 
> 赞同：0
> 
> 时间：2012-11-21T15:40:28.023
> 
> 标签：sql, oracle, between, to-date

我对 Oracle SQL 有以下说明：

```
SELECT TO_DATE(FE_DAY || '/' || FE_MO || '/' || FE_YEAR, 'dd/mm/yyyy')
 FROM TI_DATE
WHERE FE_DAY =15 BETWEEN TO_DATE('01/01/2011') AND TO_DATE('31/12/2012') 
```

并且实际上我得到了所有包含该日期`15`之间的日期`intervals`

但我需要做其他事情。

如何显示包含的所有日期

*   FE_Day=15

*   FE_MO=02

*   FE_MO=05

*   FE_MO=07

*   FE_YEAR= 2011 和 FE_YEAR=2012 之间

    从`TI_DATE table`?

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:44:37.073

我认为您不应该将这些视为日期。`WHERE`只需在一个子句中实施您的规则：

```
where (FE_Day = '15' or FE_MO in ('02', '05', '07')) and
      FE_YEAR in ('2011', '2012') 
```

我将所有内容都用单引号括起来，因为我猜数据类型是字符。

# validation - 在不选择任何单选按钮的情况下接受表单提交

> ID：13496722
> 
> 赞同：0
> 
> 时间：2012-11-21T15:40:30.737
> 
> 标签：validation, jsf, seam, jsf-1.2, selectoneradio

我正在使用 JSF 1.2 和 Seam 框架编写一个带有 Java EE 的应用程序。我有一个从单选按钮输入的表单，如下所示：

```
<h:selectOneRadio value="#{testAction.selectedOptionId}"
                 id="selectedQuestionOption"
                 layout="pageDirection">
    <s:selectItems var="selectedOption" value="#{currentQuestion.options}"
                   label="#{selectedOption.optionString}"
                   itemValue="#{selectedOption.optionId}"/>
 </h:selectOneRadio>

 <h:commandButton id="goToNextQuestion" value="Submit"
                 action="#{testAction.postAnswer}"/> 
```

我想要这样，如果有人在没有选择单选按钮的情况下提交表单，我会接受结果，但它不起作用。因为在验证阶段 jsf 拒绝提交并导致验证错误。我试图为它编写一个自定义验证器，不幸的是这对我也不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:04:12.427

通过编写自定义验证器，我没有找到任何解决此问题的方法，这在这种情况下应该是理想的解决方案。但我找到了解决这种情况的方法。`immediate = "true"`我可以通过像这样设置提交按钮来绕过绑定值和验证阶段：

```
 <h:commandButton id="goToNextQuestion" value="Submit" immediate="true"
             action="#{testAction.postAnswer}"/> 
```

通过这样做跳过后续阶段，servlet 将转到调用应用程序阶段，并且将应用您的应用程序逻辑，并且当您跳过处理阶段时，来自您的发布请求的数据将不会绑定到您的 bean。`RequestParameterMap`因此，在使用这些 bean 之前，您应该从我下面所做的（在我的情况下）中读取它们的值：

```
 Map<String, String> paramMap = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();

    for (String key : paramMap.keySet()) {
        //log.info("Param: " + key + " Value: " + paramMap.get(key));
        if (key.contains("selectedQuestionOption")) {
            //log.info("OptionParam: " + key + " Value: " + paramMap.get(key));
            selectedOptionId = Integer.parseInt(paramMap.get(key));
        }
    } 
```

然后应用我真正的业务逻辑。

# ruby-on-rails - 获取所有嵌套资源记录

> ID：13496726
> 
> 赞同：2
> 
> 时间：2012-11-21T15:40:46.370
> 
> 标签：ruby-on-rails, ruby, activerecord

我必须遵循模型

```
User
has_many :threads
....

Thread
belongs_to :user
has_many :posts
....    

Post
belongs_to :thread
.... 
```

要从用户那里获取所有线程，我可以`User.find( params[:id]).threads` 如何从用户那里获取所有帖子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:55:31.940

```
 class User
  has_many :threads
  has_many :posts, :through => :threads
end 

```

User.find(params[:id]).posts

除非我今天早上被吓坏了，否则应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T16:03:43.467

```
User
has_many :threads
has_many :posts, :through => :threads
....

Thread
belongs_to :user
has_many :posts
....    

Post
belongs_to :thread 
```

然后你应该能够做到：

```
user = User.first
user.posts 
```

# xslt - 如何将xml的所有完整元素提取到文本文件中？

> ID：13496730
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:03.997
> 
> 标签：xslt

我有一个包含用户 ID 和名称的 XML 文件。我想提取这两个属性都有值的所有元素。

这是我的xml

```
<pens>
<pen id="A">
    <user name="USER1" email="USER1EMAIL" />
</pen>
<pen id="B">
    <user name="USER2" email="USER2EMAIL" />
</pen>
<pen id="C"></pen>
<pen id="D">
    <user name="USER3" email="USER3EMAIL" />
</pen>
</pens> 
```

我需要这样的出路

```
A - USER1
B - USER2
D - USER3 
```

我用 XSL 试试，但我不明白……有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:51:55.480

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" method="text" />
  <xsl:strip-space elements="*" />

  <xsl:template match="user[@name][@email]">
    <xsl:value-of select="parent::*/@id" />
    <xsl:text> - </xsl:text>
    <xsl:value-of select="@name" />
    <xsl:text>&#10;</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于您的原始 XML：**

```
<pens>
  <pen id="A">
    <user name="USER1" email="USER1EMAIL"/>
  </pen>
  <pen id="B">
    <user name="USER2" email="USER2EMAIL"/>
  </pen>
  <pen id="C"/>
  <pen id="D">
    <user name="USER3" email="USER3EMAIL"/>
  </pen>
</pens> 
```

**...产生了想要的结果：**

```
A - USER1
B - USER2
D - USER3 
```

**解释：**

*   我们将元素的`@method`属性设置`<xsl:output>`为值`text`（因为我们对文本结果感兴趣）。

*   一个模板匹配已定义和属性`<user>`的元素。`@name``@email`

*   当`<user>`找到一个这样的元素时，我们输出其父元素的`@id`属性值、破折号、元素`@name`属性的值，最后是换行符。

将此结果保存到文件中取决于您使用的 XSLT 处理器。如果您通过命令行运行转换（例如，方式`xsltproc`），您可以执行以下操作：

`$ xsltproc t.xsl input.xml > output.xml`

# algorithm - 整数数组中的最小移位，因此它们的差 >= k

> ID：13496733
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:11.650
> 
> 标签：algorithm

我被要求实现一个算法，该算法将以下内容作为输入：

- 整数 a 的排序数组，例如 a=[0,0,0,0,0,2,4,4,4,4,4]。如果它有帮助，则将实际输入作为两个数组给出，第一个给我们整数，第二个给我们第一个整数的每个整数出现的次数。对于我们的示例 [0,2,4],[5,1,5]。

- 整数 k。

并返回一个由唯一实数组成的数组 b（两位小数），其连续元素至少相差 k 且最大差异 |a[i]-b[i]| 是可能的最小值。数组 a 和 b 都已排序。

到目前为止，如前所述，我已经将两个给定的数组合二为一，并且在几个循环之后设法使数组 a 成为具有唯一元素的排序数组，步骤如下：

- 对于整数的每次多次出现，例如 5 次 0 ，我将它们移动最小可能的距离：假设 k=2 然后 [0,0,0,0,0]->[-4,-2,0, 2,4]。

- 然后我对数组进行排序，以找到由移位引起的多个外观。

- 重复这两个步骤，直到数组只有唯一元素。如果我有办法将最后一个数组的元素移动到他们请求的位置（所以他们的最终差异是 >=k），我假设后者与起始数组的差异将由我请求的班次决定。

我的整个想法可能是错误的或太慢了，但我已经在这个问题上走到了死胡同，所以任何帮助都会很棒！先感谢您 ！！！

PS我包括一个练习的小例子，使整个事情更清楚：K=2, a=[0,1], b=[3,1] (->c= [0,0,0,1] ) 所以我们的结果应该是 [-2,5 , -0,5 , 1,5 , 2,5] 这使得最大最小移位为 2,50。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:48:45.763

如果`max-min <= k*n`, 那么数组`b`是

```
M+0, M+k, M+2k, ..., M+(n-1)k 
```

哪里`M`满足

```
|max-M-k(n-1)| = |min-M|. 
```

`a`只要您的连续数组`b`元素不同，您需要关心的是数组的第一个和最后一个元素，`k`并且在这种情况下它们必须获得最佳结果。

如果`max-min > k*n`那么它更容易：设置

```
k=(max-min)/(n-1) 
```

满足您条件中的小数位数并设置`b[0]=min`. 添加`k`到 的每个下一个元素`b`。

# c++ - 在模板类列表/节点程序中出现错误

> ID：13496734
> 
> 赞同：0
> 
> 时间：2012-11-21T15:41:11.093
> 
> 标签：c++, class, templates, linked-list

我正在尝试使用一个在链表上创建和执行操作的程序。

该程序按原样工作和编译，但我必须创建一个可以处理任何类型数据（int、float、char）的程序模板版本。程序中有两个类，NodeSLList 类和 IntNode 类。

我已尽力创建这两个类的模板版本，同时按我认为应该的方式更改成员声明和定义，但对于我的生活，我无法摆脱其中一些错误。我正在阅读和重新阅读关于模板和模板类的笔记，并在网上搜索以获得更好的解释，并且在发布此内容时将继续工作，但同时我非常感谢任何帮助。

有两个头文件和一个源代码文件。

IntNode.h：

```
///////////////////////////////////////////////////////////////////////
// class IntNode
//
// Description: represents the data that we want to store in our 
//              linked list
///////////////////////////////////////////////////////////////////////
#ifndef __INT_NODE__
#define __INT_NODE__

#include <iostream>

using std::ostream;

// class declaration
template <typename N>
class IntNode {

// make the following friends of this class in order that they be
// able to directly access private data of this container class

    friend void NodeSLList_Test(void);
    template <typename N> friend class NodeSLList<N>;
    friend class TSArray;
    friend ostream& operator<<(ostream &, NodeSLList<N> &);

public:

///////////////////////////////////////////////////////////////////////
// ostream operator
// 
// Description: provide overloaded ostream operator
// Input: reference to ostream object
//        reference to IntNode object to output
// Output: none
// Returns: reference to same ostream operator for cascading
///////////////////////////////////////////////////////////////////////
    friend ostream& operator<<(ostream & out, IntNode<N> & n)
    {
        out << "[" << n.row << "]"
            << "[" << n.col << "]"
            << "[" << n.depth << "]:"
            << n.data;
        return out;
    }

///////////////////////////////////////////////////////////////////////
// default constructor
// 
// Description: provide default construction of an IntNode object
// Input: row of array
//        column of array
//        depth of array
//        initial value of node
//        pointer to next IntNode
// Output: none
// Returns: reference to same ostream operator for cascading
///////////////////////////////////////////////////////////////////////
    IntNode(int inRow=0, int inCol=0, int inDepth=0, N inData, IntNode<N> *in = 0)
    {
        data = inData; 
        next = in;
        row = inRow; 
        col = inCol; 
        depth = inDepth;
    }

///////////////////////////////////////////////////////////////////////
// GetRow
// 
// Description: return row member
// Input: none
// Output: none
// Returns: row member
///////////////////////////////////////////////////////////////////////
    const int GetRow() const
    {
        return row;
    }

///////////////////////////////////////////////////////////////////////
// GetColumn
// 
// Description: return column member
// Input: none
// Output: none
// Returns: column member
///////////////////////////////////////////////////////////////////////
    const int GetColumn() const
    {
        return col;
    }

///////////////////////////////////////////////////////////////////////
// GetDepth
// 
// Description: return depth member
// Input: none
// Output: none
// Returns: depth member
///////////////////////////////////////////////////////////////////////
    const int GetDepth() const
    {
        return depth;
    }

///////////////////////////////////////////////////////////////////////
// GetData
// 
// Description: return data member
// Input: none
// Output: none
// Returns: data member
///////////////////////////////////////////////////////////////////////
    const N GetData() const
    {
        return data;
    }

private:

///////////////////////////////////////////////////////////////////////
// row
// 
// this variable holds the row of the array element (i.e first demension)
///////////////////////////////////////////////////////////////////////
    int row;

///////////////////////////////////////////////////////////////////////
// column
// 
// this variable holds the column of the array element (i.e 2nd demension)
///////////////////////////////////////////////////////////////////////
    int col;

///////////////////////////////////////////////////////////////////////
// depth
// 
// this variable holds the column of the array element (i.e 3rd demension)
///////////////////////////////////////////////////////////////////////
    int depth;

///////////////////////////////////////////////////////////////////////
// data
// 
// this variable holds the actual data at the array element
///////////////////////////////////////////////////////////////////////
    N data;

///////////////////////////////////////////////////////////////////////
// column
// 
// this variable holds the column of the array element (i.e 2nd demension)
///////////////////////////////////////////////////////////////////////
    IntNode<N> *next;
};

#endif __INT_NODE__ 
```

节点SLList.h：

```
///////////////////////////////////////////////////////////////////////
// Class NodeSLList Interface
//
// Description - This is the interface for a class which implements 
//               a singly linked list of integers. Each node in the 
//               linked list is IntNode object, defined by the IntNode
//               class. 
///////////////////////////////////////////////////////////////////////
#ifndef INT_LINKED_LIST
#define INT_LINKED_LIST

#include <iostream>

using std::ostream;
using std::cout;
using std::cin;
using std::endl;

#include "IntNode.h"

// Class NodeSLList Declaration

template< typename N >
class NodeSLList {

///////////////////////////////////////////////////////////////////////
// operator<<
// 
// Description: print the list
// Input: reference to ostream object
//        reference to an NodeSLList object to be printed
// Output: linked list printed to screen
// Returns: reference to an ostream object
///////////////////////////////////////////////////////////////////////
    //friend ostream& operator<<( ostream &, NodeSLList<N> & );
    template <typename N> friend ostream & operator<<(ostream &, NodeSLList<N> &);

public:

///////////////////////////////////////////////////////////////////////
// default constructor
// 
// Description: initialize list
// Input: none
// Output: none
// Returns: none
///////////////////////////////////////////////////////////////////////
    NodeSLList()
    {
        head = tail = 0;
    }

///////////////////////////////////////////////////////////////////////
// destructor
// 
// Description: deallocates all memory for linked list by calling
//              destroyList() member function
// Input: none
// Output: none
// Returns: none
///////////////////////////////////////////////////////////////////////
    ~NodeSLList()
    {
        // call destroyList() to remove all nodes
        // and reset linked list
        DestroyList();
    }

///////////////////////////////////////////////////////////////////////
// IsEmpty
// 
// Description: returns status of array
// Input: none
// Output: none
// Returns: TRUE if list is empty
//          FALSE otherwise
///////////////////////////////////////////////////////////////////////
    bool IsEmpty() const
    {
        return (head == 0); 
    }

///////////////////////////////////////////////////////////////////////
// GetSize
// 
// Description: get current number of nodes in list
// Input: none
// Output: none
// Returns: number of nodes in list
///////////////////////////////////////////////////////////////////////
    int GetSize() const
    {
        // check to see if the list is empty. if 
        // so, just return 0
        if ( IsEmpty() ) return 0;

        int size = 1;
        IntNode<N> *p = head;
        // compute the number of nodes and return
        while (p != tail)
        {
            size++;
            p = p->next;
        }
        return size;
    }

///////////////////////////////////////////////////////////////////////
// AddToHead
// 
// Description: add a node to the head of the list
// Input: data for node to be added
// Output: updated linked list
// Returns: none
///////////////////////////////////////////////////////////////////////
    void AddToHead(IntNode<N> & node)
    {
        // create a new node, and make it the head. the 
        // previous head will become head->next
        head = new IntNode<>(node.row, node.col, node.depth, node.data, head);

        // if this is the first node, make the tail the 
        // same as the head
        if (tail == 0)
            tail = head;
    }

///////////////////////////////////////////////////////////////////////
// DeleteFromHead
// 
// Description: remove a node from the head of the list
// Input: none
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<N> DeleteFromHead()
    {
        IntNode<N> temp;
        if (IsEmpty())
        {
            cout << "*****ERROR: Can't delete from head. List is Empty" << endl;
            return temp;
        }

        temp.data = head->data;
        temp.col = head->col;
        temp.row = head->row;
        temp.depth = head->depth;

        IntNode<N> *tmp = head;

        // if there is only one node, set the head and pointer tails
        // to NULL (0)
        if (head == tail)
            head = tail = 0;

        // otherwise, move the head pointer to the next node 
        // in the list
        else
            head = head->next;

        // delete head node
        delete tmp;

        return temp;
    }

///////////////////////////////////////////////////////////////////////
// DeleteFromTail
// 
// Description: remove a node from the tail of the list
// Input: none
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<N> DeleteFromTail()
    {
        IntNode<N> nodeData;
        nodeData.col = tail->col;
        nodeData.row = tail->row;
        nodeData.depth = tail->depth;
        nodeData.data = tail->data;

        // if there is only one node, delete the only node, and set the 
        // head and tail pointers to NULL (0) 
        if (head == tail)
        {
            delete head;
            head = tail =0;
        }

        // otherwise, traverse to the tail node and delete it
        else
        {
            IntNode<N> * temp;
            for (temp = head; temp->next != tail; temp = temp->next);       //shifts thru the node, from the head to the node right before the tail
            delete tail;
            tail = temp;
            tail->next = 0;
        }

        return nodeData;
    }

///////////////////////////////////////////////////////////////////////
// DeleteNode
// 
// Description: remove a node from the list
// Input: node number to be removed
// Output: updated linked list
// Returns: data that was at the node just removed
///////////////////////////////////////////////////////////////////////
    IntNode<N> DeleteNode(int nodeNum)
    {
        if (nodeNum <= 0) nodeNum = 1;
        IntNode<N> *prev=head , *temp=head;
        IntNode<N> current;

        // traverse to the node
        for (int loop=1; loop<nodeNum; loop++)
        {
            prev=temp, temp=temp->next;
            // check for case where nodeNum is > the number of 
            // nodes in the list. if we reach the tail before
            // we traverse to the node, delete the tail 
            if ( temp == tail )
                return DeleteFromTail();
        }

        // if deleting the head just call 
        // the appropriate member function 
        // and don't repeat that logic here
        if (temp == head) return DeleteFromHead();

        // otherwise, delete the node we traversed to
        prev->next = temp->next;
        current.row = temp->row;
        current.col = temp->col;
        current.data = temp->data;

        delete temp;

        return current;
    }

///////////////////////////////////////////////////////////////////////
// RetrieveNode
// 
// Description: retrieve data from a node without removing it from 
//              the list
// Input: node number (1-N; not 0-N-1)
// Output: none
// Returns: reference to node data
///////////////////////////////////////////////////////////////////////
    IntNode<N> &RetrieveNode(int nodeNum) const
    {
        IntNode<N> *tmp = head;

        // traverse to the node, or to the last node, whichever comes
        // first
        for (int i=1; i< nodeNum && tmp != tail; i++)
            tmp = tmp->next;

        return *tmp;
    }

///////////////////////////////////////////////////////////////////////
// UpdateNode
// 
// Description: update a node's data
// Input: node number (1-N; not 0-(N-1))
// Output: updated node
// Returns: none
///////////////////////////////////////////////////////////////////////
    void UpdateNode(int nodeNum, IntNode<N> &node)
    {
        IntNode<N> *tmp = head;

        // traverse to the node, or to the last node, whichever comes
        // first
        for (int i=1; i< nodeNum && tmp != tail; i++)
            tmp = tmp->next;

        tmp->data = node.data;
        tmp->col = node.col;
        tmp->row = node.row;
    }

///////////////////////////////////////////////////////////////////////
// DestroyList
// 
// Description: deallocates all memory for linked list
// Input: none
// Output: reset linked list
// Returns: none
///////////////////////////////////////////////////////////////////////
    void DestroyList()
    {
        // while the list is NOT empy
        // keep removing the head node and make
        // the next node the head node
        for (IntNode<N> *p; !IsEmpty(); )
        {
            p = head->next;
            delete head;
            head = p;
        }
        head = tail = 0;
    }

private:

    IntNode<N> *head, *tail;

};

#endif INT_LINKED_LIST 
```

测试驱动程序.cpp：

```
// TEST DRIVER. Only used to test the class.
// Activated by defining TEST_DRIVER in the 
// Project - Settings - C/C++ - Preprocessor definitions
#ifdef LIST_DRIVER

#include <stdlib.h>
#include "NodeSLList.h"
#include "IntNode.h"

template <typename N>
void NodeSLList_template_Test()
{

    NodeSLList_template<N> s;
    IntNode_template<N> temp;

    IntNode_template<N> n1(1,1,1,10);
    IntNode_template<N> n2(1,2,1,20);
    IntNode_template<N> n3(1,3,1,30);
    IntNode_template<N> n4(1,4,1,40);
    IntNode_template<N> n5(1,5,1,50);

    cout << "Testing addToHead() operation" << endl;
    s.AddToHead(n5);
    s.AddToHead(n4);
    s.AddToHead(n3);
    s.AddToHead(n2);
    s.AddToHead(n1);

    cout << s << endl;

    cout << "\nTesting GetSize() operation" << endl;
    cout << "list contains " << s.GetSize() << " node(s)" << endl;

    cout << "\nTesting DeleteFromHead() operation" << endl;
    temp = s.DeleteFromHead();
    cout << "node retrieved " << temp << endl;
    cout << s << endl;

    cout << "\nTesting DeleteFromTail() operation" << endl;
    temp = s.DeleteFromTail();
    cout << "node retrieved " << temp << endl;
    cout << s << endl;

    cout << "\nTesting RetrieveNode() operation" << endl;
    temp = s.RetrieveNode(0);
    cout << "node retrieved (should be first node) " << temp << endl;
    temp = s.RetrieveNode(50);
    cout << "node retrieved (should be last node) " << temp << endl;
    temp = s.RetrieveNode(2);
    cout << "node retrieved (should be 2nd node) " << temp << endl;
    pause();

    cout << "Adding n3 to head" << endl;
    cout << "Adding n2 to head" << endl;
    s.AddToHead(n3);
    s.AddToHead(n2);
    cout << "List is now: " << s << endl;
    cout << "\nTesting DeleteNode() operation" << endl;
    temp = s.DeleteNode(50);
    cout << "node deleted (should be last node) " << temp << endl;
    cout << s << endl;
    temp = s.DeleteNode(3);
    cout << "node deleted (should be 3rd node) " << temp << endl;
    cout << s << endl;

    cout << "Test SsEmpty() operation" << endl;
    cout << (s.IsEmpty() ? "List IS Empty\n" : "List NOT Empty\n");

    cout << "\nTesting UpdateNode() operation (updating 3rd node with [10][20][30]:500)" 
        << endl;
    temp.row = 10;
    temp.col = 20;
    temp.depth = 30;
    temp.data = 500;
    s.UpdateNode(3,temp);
    cout << s << endl;

    pause();

    cout << "\nTesting the ability to delete nodes from head, even" << endl
        << "after list is empty" << endl
        << "Should recieve 2 errors" << endl;
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();
    temp = s.DeleteFromHead();

    cout << "\nTest IsEmpty() operation" << endl;
    cout << (s.IsEmpty() ? "List IS Empty\n" : "List NOT Empty\n");

    cout << "\nTesting DestroyList() operation" << endl;
    s.AddToHead(n3);
    s.AddToHead(n2);
    s.AddToHead(n1);
    cout << s << endl;
    cout << "calling DestoryList()" << endl;
    s.DestroyList();
    cout << s << endl;

}

void pause()
{
    cout << "Press RETURN to continue" << endl;
    cin.get();
    system("cls");
}

void pause();

void main(void)
{
    NodeSLList_template_Test<int>();
}

#endif 
```

还有我的错误：

```
Error   1   error C2143: syntax error : missing ';' before '<' c:\cis554\hw_7_2\hw_7_2\intnode.h    24
Error   2   error C2059: syntax error : '<' c:\cis554\hw_7_2\hw_7_2\intnode.h   24
Error   3   error C2238: unexpected token(s) preceding ';'  c:\cis554\hw_7_2\hw_7_2\intnode.h   24
    4   IntelliSense: default argument not at end of parameter list c:\CIS554\HW_7_2\HW_7_2\IntNode.h   61 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:47:58.633

You have a circular dependency. `IntNode` needs the declaration of `NodeSLList` and vice-versa.

As an aside, names with leading underscores or two adjacent underscores are reserved for the implementation, so you should change this

```
#ifndef __INT_NODE__ 
```

to something like

```
#ifndef INT_NODE_H_ 
```

# c - 使 C 共享库的逆向工程更加困难的技巧

> ID：13496735
> 
> 赞同：10
> 
> 时间：2012-11-21T15:41:16.410
> 
> 标签：c, obfuscation, reverse-engineering, decompiling

我对您可以采取的预防措施感兴趣，以使逆向工程 C 共享库更加困难

似乎不可能完全预防，但您可以采取可能使其花费更长的步骤，因此吸引力降低/成本更高

诸如代码混淆、编译器优化选项编译器调试标志等（我会对 gcc 编译器特别感兴趣）

还对逆向工程一个 ~5KLOC C 共享库（.so 大小约为 200kb）的相对难度（以美元或工时等计算）感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:48:53.677

这些是我知道的一些技巧：

*   `strip`与选项一起使用`--strip-unneeded`以删除除重定位所需的符号之外的所有符号（因为我们正在谈论共享库）：

    `strip --strip-unneeded libmylib.so`

*   与标准 libc*静态*链接，这会导致更大的库/二进制文件，这意味着要通过更多代码并且还会混淆，因为将函数与库函数分开会更加困难：

    `gcc -static ...`

*   强制编译器内联小函数，这会将小函数嵌入到您的代码中而不是调用它们，因此几乎不可能区分您的代码和标准库代码。

话虽如此，我必须补充一点，我有一个使用上述措施的二进制文件，并且我能够在几个小时内对其进行逆向工程，`symtab`如果你好奇的话，我首先重建它，我不是逆向工程大师。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T15:51:28.427

**- 不需要代码混淆（如在 C# 或 Java 中）。**

目标代码中不存在您的内部变量和函数的名称。

但是，您导出的函数的名称仍将清晰地显示在共享对象文件中。这听起来很合理。

**- 最好使用`gcc`优化标志`-O2`或`-O3`.**

使用编译器优化，目标代码可以与源代码有很大不同。回到原始的 C 源代码实际上是非常困难的。

但是，始终可以在装配级别恢复工程师。通常，并非所有程序都是有价值的。在汇编中对有趣的部分进行逆向工程比在 C 中对整个程序进行逆向工程会更容易。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T13:50:43.927

最常见的反逆转技术的问题在于它们是众所周知的并且有克服它们的工具。当然，剥离符号和混淆是必须的，但这只是隐藏名称/符号。

如果您想让逆向者的工作更加困难，请自己发明一些代码操作。它可以非常简单，例如使用自定义调用约定，但这会使所有反汇编程序无法识别函数的开始和结束。

这些简单的技巧将非常有效，因为不会有现成的工具可以将代码还原为原始代码。你看，几乎每一个商业打包器或加密器，都已经有了一个一键解包器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T15:49:30.283

没有那么多。一旦您剥离了调试符号*并*混淆了所有*内部*符号（不是外部符号，因为库的客户端需要一个符号来链接），您就无能为力了。由于指令到操作码的 1-1 映射，汇编反汇编非常容易。另一方面，很难理解编译器生成的汇编代码，因为它充满了奇异的优化和效率技巧。

关于这一点，将 GCC 提高到最高优化可能是您可以使用的最佳混淆技巧之一。

考虑到现代计算能力，拆解本身不会花那么长时间，到那时就需要人来破译它。

只是好奇：什么是不进行逆向工程如此重要？确保财务数据安全的加密和安全性大多是开源的。或者这是专有软件保护的东西？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:41:02.167

将您的代码与开关/大小写混淆（使其非线性）混合。

在编译时使用 C++ 模板加密变量/字符串。可以将整数类型封装在 double 类型中，以使反转变得更加困难。

在真实代码之间插入汇编混淆宏（jmp x, db 0E8h, x: 等）

使用 BOOST ;) 它确实让逆向工程变得很痛苦...... ;)

# java - 带注释的 Spring Portlet MVC 的 parameterMappingInterceptor

> ID：13496737
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:20.207
> 
> 标签：java, spring, portlet, interceptor

如果我不使用 portletModeParameterHandlerMapping，我想知道是否有办法模拟 parameterMappingInterceptor 行为。当然，我使用的是带注释的方法。我试图像这样定义我的 portlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:webflow="http://www.springframework.org/schema/webflow-config"
   xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
        http://www.directwebremoting.org/schema/spring-dwr 
        http://www.directwebremoting.org/schema/spring-dwr-2.0.xsd        
        http://www.springframework.org/schema/webflow-config 
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd        
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:component-scan base-package="es.xunta.formacion.sifo3.economico.web.controllers"/>

<bean id="parameterMappingInterceptor" class="org.springframework.web.portlet.handler.ParameterMappingInterceptor"/>  

</beans> 
```

但显然，这根本不起作用，我仍然需要在渲染阶段设置动作参数，以访问渲染方法：

```
@RequestMapping(params = "action=myAction")
public final void doAction(@ModelAttribute(value = "myAttribute") MyBean myBean, Errors errors, ActionRequest actionrequest, ActionResponse actionresponse) {
validateBean(escrituraBean, errors);
//..
actionresponse.setRenderParameter("action", actionrequest.getParameter("myAction"));
}

@RequestMapping(params = "action=myAction")
public final String doRender(ModelMap model, RenderRequest renderrequest) {
//..
} 
```

编辑：我也试过用这个来配置xml：

```
<bean id="annotationMapper" class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
<property name="interceptors">
    <list>
                <bean id="parameterMappingInterceptor" class="org.springframework.web.portlet.handler.ParameterMappingInterceptor"/>  
    </list>
</property>
</bean> 
```

获取此异常：

```
 Interceptor type not supported: org.springframework.web.portlet.handler.ParameterMappingInterceptor 
```

# windows - 基于文本文件在 Windows 7 中自动创建打印机

> ID：13496739
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:26.987
> 
> 标签：windows, printing, batch-file

我想创建一个简单的批处理文件（...或 vbs 或 Wscript）来在运行 Windows 7 的计算机上安装网络打印机。

我将得到一个包含以下信息的文本文件：

```
--------------------------------------> infoprint.txt

REM [COMPUTER_NAME] [PRINTER_NAME] [IP_ADDRESS]

PC00001 HP_4750 10.0.0.109
PC00001 HP_4650 10.0.0.110
PC00002 HP_4650 10.0.0.110
PC00003 HP_5000 10.0.0.111
PC00004 HP_4750 10.0.0.109
PC00004 HP_4650 10.0.0.110
PC00004 HP_8050 10.0.0.112
REM (and more...)
-------------------------------------- 
```

如何制作此脚本来读取包含在 Windows 7 下创建打印机所需的所有信息的文本文件 (infoprint.txt)？

简单的方法是每台打印机都是 HP 并且使用每台计算机上已经安装的相同通用打印驱动程序，因此安装打印机很容易。

* * *

# javascript - Extjs Ext.get 方法基础

> ID：13496741
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:31.260
> 
> 标签：javascript, extjs, spket

我正在使用 Ext.get 来获取一个元素。我正在使用 Eclipse 和 Spket。在 Spket 编辑器中，我看到 get 方法是红色的。我声明的变量也没有自动完整的支持。

```
var exp = Ext.get('id'),
exp. 
```

这是正确的行为吗？为什么 exp 变量没有自动完成？我使用正确的 Ext 方法吗？最佳做法是什么？我认为这可能更像是一个Spket问题。任何指针都会有所帮助。

谢谢，阿米特

# c# - 使用 EM_FORMATRANGE 消息将 RTF 绘制到位图会产生带有难看的黑色片段的文本

> ID：13496742
> 
> 赞同：1
> 
> 时间：2012-11-21T15:41:31.823
> 
> 标签：c#, cleartype

我需要在自定义背景上绘制 RTF 文本。我正在使用一个扩展的 RichTextBox 控件，例如[这里](http://www.andrewvos.com/2008/05/23/draw-rtf-text-on-a-graphics-object-in-c/)描述的来呈现 RTF 本身。如果图形与屏幕相关联，这可以正常工作。但是当我使用从位图创建的图形时，cleartype 字体有难看的黑色片段，比如抗锯齿不会正确地将文本与背景混合（我先绘制背景）。这是什么原因？它可以以某种方式修复吗？

生成丑陋位图的代码示例：

```
private void CreateBitmap(string rtf, Rectangle bitmapRectangle)
{
    using (Bitmap bitmap = new Bitmap(bitmapRectangle.Width, bitmapRectangle.Height))
    {
        using (Graphics gr = Graphics.FromImage(bitmap))
        {
            gr.Clear(Color.Yellow);

            // extended RichTextBox control from www.andrewvos.com
            RichTextBoxDrawer rtbDrawer = new RichTextBoxDrawer();
            rtbDrawer.Rtf = rtf;
            rtbDrawer.Draw(gr, bitmapRectangle);

            bitmap.Save(@"c:\bitmap.png");
        }
    }
} 
```

还有一件事：Graphics.DrawString 工作正常并正确绘制抗锯齿文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:04:05.447

好吧，看来我在错误的地方画了背景。如果我在从设备上下文句柄创建的图形上绘制背景，该句柄是在 RichTextBoxDrawer.Draw 方法中发送的 EM_FORMATRANGE 消息，则文本将正确呈现：

```
public void Draw(Graphics graphics, Rectangle layoutArea, Bitmap background = null)
{
    //Calculate the area to render.
    SafeNativeMethods.RECT rectLayoutArea;
    rectLayoutArea.Top = (int)(layoutArea.Top * anInch);
    rectLayoutArea.Bottom = (int)(layoutArea.Bottom * anInch);
    rectLayoutArea.Left = (int)(layoutArea.Left * anInch);
    rectLayoutArea.Right = (int)(layoutArea.Right * anInch);    

    IntPtr hdc = graphics.GetHdc();
    using (Graphics backgroundGraphics = Graphics.FromHdc(hdc))
    {
        // draw some background
        backgroundGraphics.Clear(Color.Yellow);
    }

    // rest of the method is same
} 
```

# unix - 在程序之间管道二进制输出而不损坏终端

> ID：13496743
> 
> 赞同：0
> 
> 时间：2012-11-21T15:41:33.247
> 
> 标签：unix, terminal

我正在尝试一个程序（prog1），它生成我想传递给另一个程序（prog2）的二进制输出（它是一个编码器）。prog2 可以从标准输入获取数据，所以我想将 prog1 的输出通过管道传输到 prog2。问题是，由于它是二进制数据，终端可能会损坏。例如 $> prog1 | 编2-

还有其他方法吗？如果可以的话，我想避免编写胶水代码只是为了在两者之间路由数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:05:25.207

当你写

```
$ prog1 | prog2 - 
```

prog1 写入其标准输出的所有内容都将发送到 prog2，而不是您的 tty。prog1 当然可以通过将二进制数据写入 stderr 或通过其他方式将数据写入终端，但您的 prog2 更有可能也在写入二进制数据。作为一个简单的测试，请尝试：

```
$ prog1 | prog2 - | xxd 
```

（如果您没有 xxd，请尝试任何十六进制转储程序，或者只是`od`）

如果这不起作用，请尝试：

```
$ { prog1 | prog2 - | xxd; } 2> /dev/null 
```

或者

```
$ { prog1 | prog2 -; } 2>&1 | xxd 
```

或该主题的其他变体。

# selenium - 如何以外部服务器作为节点在 Jenkins（作为集线器）中启动硒测试？

> ID：13496749
> 
> 赞同：2
> 
> 时间：2012-11-21T15:41:55.197
> 
> 标签：selenium, grid

我有一个（希望是）小问题：

我正在使用 Jenkins 来构建我的项目。这很好用，但我也想用它来测试我的网络项目。

Jenkins 在 debian-Server 上运行，Windows-Machine 提供 Selenium-Server。

我安装了 Jenkins Selenium 插件 (https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Plugin)，因此 Jenkins 可以作为集线器运行。我的 Windows 机器注册为“Jenkins-Hub”的 Selenium-Node。詹金斯向我展示了“Selenium Grid”菜单中注册的远程控制。我认为他们已经准备好使用了。

首先是我的问题：如何使用遥控器？

我想我通过 ANT-Build.xml 告诉我的项目 TestSuits 在哪里以及结果必须放在哪里。但是我发现这种解决方案没有语法。也许这是错误的方式？

最好的问候托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:04:07.807

好吧，我对 CI 和 SVN 使用 selenium web driver+ java + hudson。此外，我还有一台 IP 为 192.168.4.52 的远程机器，上面运行着 XP、JDK 和 selenium stanalone 服务器。所以设置如下：1）哈德森： ![在此处输入图像描述](../Images/ff3808da92d9861e672fdfd48ac21a6e.png)

并在您的 BaseSeleniumTest.java 中添加如下内容：

```
....
 @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

          DesiredCapabilities capability = DesiredCapabilities.firefox();

        driver = new RemoteWebDriver(new URL("http://192.168.4.52:4444/wd/hub"), capability);

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
        driver.manage().window().setSize(new Dimension(1920, 1080));
    }
    @Before
    public void homePageRefresh() throws IOException {

        driver.manage().deleteAllCookies();
        driver.get(propertyKeysLoader("login.base.url"));
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();
    } 
```

在字符串中的位置

```
 driver = new RemoteWebDriver(new URL("http://192.168.4.52:4444/wd/hub"), capability); 
```

你写你的远程机器的IP地址。

BaseSeleniumTest.java - selenium 项目中的基本类，我在其中描述所有基本方法：`isElementPresent(By locator),fluentWait(By locator),isElementVisible(By locator), @Before, @BeforeClass, @AfterCLass, @After` 注释。其他类仅包括涵盖不同形式的测试。它们继承了 BaseSeleniumTest 的所有方法： ![在此处输入图像描述](../Images/d6add833c96ef6e060456095a2f566f1.png)

*以及如何告诉 Jenkins 有一个测试脚本 (BaseSeleniumTest.java)，Jenkins 必须运行它？* 问题是我使用 maven - 作为构建管理器（参见上面的 hudson 设置）和 Tortoise SVN。我创建存储库，在存储库中提交我的项目。获取链接，将其粘贴到哈德森。正如哈德森所知，maven 用于构建项目（带有干净的测试选项）。您按下 Build project - hudson make：从存储库中签出，构建项目，即运行测试并打印结果。

希望对您有所帮助。

# python - Django不上传图片

> ID：13496765
> 
> 赞同：1
> 
> 时间：2012-11-21T15:42:44.787
> 
> 标签：python, django, django-models, python-imaging-library

希望是一个直截了当的，但它已经到了我要绕圈子的地步！我最近使用 apache2 / mod wsgi 设置了我的网站。但是，我已经设置了 apache 配置。我无法上传任何图片，我不知道为什么。我的媒体配置指向正确的位置，因为网站上的所有静态图像等都在工作。

我知道了，所以当我在 CMS 中上传图片时，它会提供链接。例如 /media/test/pic.jpg 但是当我单击链接进行测试时，我收到“未找到”错误消息。我已经通过 FTP 连接到服务器，并且图像没有上传到任何地方。

对于我的图像字段，这是我的模型中的内容：

```
image = models.ImageField(blank=True, null=True, upload_to="test") 
```

媒体设置：

```
MEDIA_ROOT = 'media'

MEDIA_URL = '/media/' 
```

我想主要问题是图像没有上传到我放入的任何目录。

无论如何，希望这是足够的信息继续下去。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:50:02.527

MEDIA_ROOT 必须是绝对路径（即 /home/user/media）

阅读有关[MEDIA_ROOT的更多信息](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-MEDIA_ROOT)

# c++ - C++ 中的多键自定义排序

> ID：13496767
> 
> 赞同：11
> 
> 时间：2012-11-21T15:42:44.800
> 
> 标签：c++, sorting, vector, struct

**问题陈述：**

我想`std::vector`使用我的自定义排序标准对结构进行排序。

结构是：

```
struct Node
{
   int x;
   int y;
   float value;
}; 
```

向量是：

```
std::vector<Node> vec; 
```

我的自定义排序标准是向量应该先排序，`y`然后再排序`x`（就像在 Microsoft Excel 中一样）。

## 例子：

**输入：**

```
x y

5 6
2 4
1 1
1 0
8 10
4 7
7 1
5 4
6 1
1 4
3 10
7 2 
```

**输出：**

```
x y

1 0
1 1
6 1
7 1
7 2
1 4
2 4
5 4
5 6
4 7
3 10
8 10 
```

上述排序可以通过任何 C++ 标准库排序函数来实现吗？如果没有，还有其他我可以使用的库吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T15:44:41.410

是的，您可以[`std::sort`](http://www.cplusplus.com/reference/algorithm/sort/)使用比较功能来做到这一点。

```
bool comparison(const Node& node1, const Node& node2)
{
    if (node1.y < node2.y) return true;
    if (node1.y == node2.y) return node1.x < node2.x;

    return false;
}

int main() {
    std::sort(vec.begin(), vec.end(), comparison);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T18:10:03.913

通常，当需要**字典顺序**时，为多个字段实现比较运算符（和函数）更清楚地表示为[tie](http://en.cppreference.com/w/cpp/utility/tuple/tie)。

 **```
static bool compare(Node const& l, Node const& r) {
    // Note the alignment so that both expressions only differ in their `l` and `r` ?
    return std::tie(l.y, l.x)
         < std::tie(r.y, r.x);
} 
```

然而，即使这样也会留下一些重复和不一致的路线。下面的助手看到了这一点：

```
static std::tuple<int&,int&> tuplize(Node const& n) { return std::tie(n.y, n.x); } 
```

然后可以简单地应用它：

```
static bool compare(Node const& l, Node const& r) {
    return tuplize(l) < tuplize(r);
} 
```

塔阿达姆 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-10T15:59:09.327

从[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)开始，您还可以使用[lambda 表达式](http://en.cppreference.com/w/cpp/language/lambda)而不是定义比较函数：

```
std::sort(std::begin(vec), std::end(vec), [](const Node& a, const Node& b) {
    return a.y < b.y || (a.y == b.y && a.x < b.x);
}); 
```

这样你就可以保持你的代码相当短。

[Ideone 上的代码](https://ideone.com/O4oZBZ)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T15:44:31.383

[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)采用自定义比较功能。我没有对此进行测试，但您的可能看起来像：

```
bool cmp (const Node& lhs, const Node& rhs)
{
    if ( lhs.y < rhs.y ) return true;
    else if ( lhs.y == rhs.y ) return ( lhs.x < rhs.x );
    else return false;
} 
```**

# java - 有效保存唯一值

> ID：13496768
> 
> 赞同：0
> 
> 时间：2012-11-21T15:42:50.250
> 
> 标签：java, jpa, unique

我正在使用带有 JPA 的 Java EE 开发一个 Web 应用程序。现在，我遇到了一些需要为一个实例保存的值。例如：Web 应用程序的名称、税号、联系数据。其中一些值可以由 CMS 更改。

保存这些数据的有效方法是什么？

*   实体对象：为此创建一个对象，将其保存为实体，我觉得不对。这样，它将创建一个只有一个条目的表。我也需要创建一个 DAO 来访问它。
*   属性文件：我不想在运行新版本的 WAR 后丢失任何更改。其次，我认为可能有比编辑属性文件更好的解决方案。
*   Applicationscoped bean：无论出于何种原因，我都不希望我的数据在重新启动应用程序时丢失。

还有另一种更有效的方法来处理这些值吗？或者我应该使用其中一种方式，如果是，为什么？

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:14:57.160

我不确定您的应用程序的细节是否足以确定哪个是最好的，但我对何时使用哪种类型的设置存储的想法是：

*   数据库（设置表） - 真正蓬勃发展的地方，您将拥有独立于源代码发生变化的值，这些值是特定于环境的，或者您不想在文件系统上乱搞的人会改变这些值（例如，是否在环境中启用了一项功能，针对某种类型的请求与哪个服务器通信）
*   属性文件 - 适用于在集群中基于每台机器设置的数据（尽管我建议对集群中的所有内容进行标准化），或者当您的 CMS 将是设置属性的主要（唯一？）方式时并且您将在每次安装时替换该文件
*   应用程序 bean - 应用程序启动时需要设置（例如，要启动的 bean 数量或数据库连接字符串）
*   在代码中 - 值永远不会改变......永远（例如应用程序名称）

存储设置的最有效方法是直接在代码中，但它非常不灵活，在大多数情况下不值得。将属性存储在文件系统中而不是在数据库中将大致相同，假设您为数据库缓存并且每次获取属性时都从数据库中读取它。如果您没有缓存，那么您将在每次访问属性时支付磁盘读取的费用，因为属性文件将在读取后将值存储在内存中。

为了便于更改值，我认为将其存储在数据库中是更改它的最简单方法（假设您不经常在许多不同的环境中更改它），因为您可以在应用程序运行时更改它并且拥有它很快生效。如果您在文件系统上的文件中有该属性，您要么需要一种方法来强制您的应用程序在运行时重新读取该属性，否则您将不得不退回您的应用程序以更改该属性。如果您在代码中拥有它，则必须重新构建您的构建以影响该属性（显然）。

# ios - NSManagedObject 继承的类不响应添加

> ID：13496773
> 
> 赞同：0
> 
> 时间：2012-11-21T15:43:04.303
> 
> 标签：ios, core-data

我有一个 NSManagedObject 模型名称 A，我为其创建了一个附加 A+Additions
但是当我从 A+Additions 调用一个方法时，应用程序崩溃，未知选择器发送到类 NSManagedObject 的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:50:28.440

发现如果您不从编辑器菜单创建 Am，xdatamodeld 中的对象不会使用类名“A”更新，默认为“NSManagedObject”。
因此，您必须手动设置它，然后一切都会再次运行。

# ruby - 使用多个 Rake 文件构建应用程序

> ID：13496780
> 
> 赞同：2
> 
> 时间：2012-11-21T15:43:29.030
> 
> 标签：ruby, rake

是否可以使用多个 Rakefile 构建多个应用程序？

任何指向实际使用 Rake 构建多个应用程序的人的指针将不胜感激。

我尝试过使用 import，但是单独的 Rakefiles 中的变量似乎相互覆盖？

```
import 'application1/Rakefile'
import 'application2/Rakefile'

task :build => ['application1:build', 'application2:build'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:33:40.713

在 WebYaST 中，[主 Rakefile](https://github.com/webyast/webyast/blob/e45363b0dba3b0c15f8857f3b51e4eb3e823881d/Rakefile)运行来自所有子项目的任务，但在单独的 rake 进程中，通过`system`.

# linux - osql can not find IP address, tsql works on Ubuntu

> ID：13496781
> 
> 赞同：1
> 
> 时间：2012-11-21T15:43:30.287
> 
> 标签：linux, odbc, freetds

I am having ODBC problems on Ubuntu (12.10). The weirdest part about it - I set all of this up a year ago and haven't had any trouble with it until recently.

I am trying to connect to a MS SQL Server using FreeTDS / ODBC. I primarily use sqsh to talk to the server, but when I need to do anything analytical, I pull the data into R using RODBC. Yesterday, when I tried to do this, it failed.

I can connect to the database using sqsh / tsql. This makes me think FreeTDS is still set up correctly. The problem seems to be on the ODBC side. So, I pulled out osql and I get the strangest error.

```
checking shared odbc libraries linked to isql for default directories...
strings: '': No such file
        trying /tmp/sql ... no
        trying /tmp/sql ... no
        trying /etc ... OK
checking odbc.ini files
        reading /home/andy/.odbc.ini
[CANS] found in /home/andy/.odbc.ini
found this section:
        [CANS]
        Description                     = FreeTDS
        Driver                      = FreeTDS
        Servername                      = Portland
        Database                        = CANS
        UID                             = NotRelevant
        PWD                             = NotRelevant
        Port                        = 1433

looking for driver for DSN [CANS] in /home/andy/.odbc.ini
  found driver line: "  Driver                      = FreeTDS"
  driver "FreeTDS" found for [CANS] in .odbc.ini
found driver named "FreeTDS"
"FreeTDS" is not an executable file
looking for entry named [FreeTDS] in /etc/odbcinst.ini
  found driver line: "  Driver = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so"
  found driver /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so for [FreeTDS] in 
        odbcinst.ini
/usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so is an executable file
    Using ODBC-Combined strategy
DSN [CANS] has servername "Portland" (from /home/andy/.odbc.ini)
cannot read "/home/andy/.freetds.conf"
/etc/freetds/freetds.conf is a readable file
looking for [Portland] in /etc/freetds/freetds.conf
found this section:
    [Portland]
        host           = 63.***.**.***
        port           = 1433
        tds version    = 8.0
        client charset = UTF-8
looking up hostname for ip address 63.***.**.***
osql: no IP address found for "host145.actwd.net" 
```

I don't understand why osql is trying to resolve an IP address when it has it already. This server has quite a bit of IP blocking going on to help protect it and you can only access it from a set of white-listed IP addresses. You can't do a DNS lookup on the address. I'm at the office so my IP address is fine and furthermore, I can connect using tsql, so this part shouldn't be a problem, but this looks like the failure point.

Thoughts?

One other note, actwd.net is our host. So, this isn't totally zany, I just don't know why it doesn't use the IP address I'm handing it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:20:21.983

今天的课程 - 在将内容发布到 Stack Overflow 之前 - 我应该注意到我的端口号不知何故从 1433 更改为 1044。不知道我是如何做到的，但这就是问题所在。

SQL Server 期望端口 1433 上的连接。不是 1044。有些日子我真的不喜欢计算机。. . .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-12T23:59:33.827

我收到一个 IP 地址错误，因为我的 odbc.ini 指定的是“服务器”设置而不是“服务器名称”设置。前者是实际的服务器，后者是 freetds.conf 中的一个条目。

# ruby-on-rails - Rails，验证输入字段的最大长度

> ID：13496783
> 
> 赞同：9
> 
> 时间：2012-11-21T15:43:33.977
> 
> 标签：ruby-on-rails

我有一个评论模型，我限制评论的最大长度，例如：

```
validates_length_of :comment, :maximum => 500 
```

在我看来，我已经声明了输入字段：

```
<%= f.text_area :comment,:as => :text, :maxlength => 500 %> 
```

输入字段的限制按预期工作，它限制为最多 500 个字符。

但是，模型限制没有按预期工作。带有换行符的 500 个字符的文本会产生验证错误。该模型将换行符计为两个字符（以及可能的其他字符）。所以

此输入将起作用，没有换行符：

```
 abc abc abc abc.... 
```

这不会：

```
abc

abc
.
. 
```

是否有一种简单的方法可以使 validates_length_of 将换行符（和其他）计为一个字符？

===结果1===

我结合了 Jon 和 Dario 的优秀答案并创建了这个：

```
before_validation(:on => :create) do
  self.comment = comment.gsub("\r\n","\n") if self.comment
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:46:18.433

浏览器从 textareas 发送换行符为 "\r\n" 当使用 Rails 默认长度验证器时，每个换行符都被计为两个字符

所以要么在控制器中创建一个替换方法，要么创建一个自定义长度验证器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T16:08:00.657

您可以使用长度验证器的标记器选项，只计算单词，而不是换行符。

```
validates :comment, length: {
  maximum: 500,
  tokenizer: lambda { |str| str.scan(/\w+/) }
} 
```

有关更多信息，请查看此处：[Active Record Validations and Callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-12T18:37:10.907

你可以使用

```
validates :comment, length: {
  maximum: 500,
  tokenizer: lambda { |str| str.scan(/./) }
} 
```

这样你就可以得到你期望的字符串大小。

这个文本区域输入：

> 这是一个字符串
> 
> 换行符

导致这个字符串

> "这是一个带有\r\na 换行符的字符串"

默认情况下，rails 验证器计算每个字符并获得 36 的长度

```
"This is a string with \r\na line break".length
=> 36 
```

如果您将标记器与正则表达式一起使用，`/./`您会得到 35 的结果，正如您所期望的（每个字符 + 空格 + 1 个换行符），因为它会剥离`\n`但会计数`\r`。

```
"This is a string with a\r\na line break".scan(/./)
=> ["T", "h", "i", "s", " ", "i", "s", " ", "a", " ", "s", "t", "r", "i", "n", "g", " ", "w", "i", "t", "h", " ", "a", "\r", "a", " ", "l", "i", "n", "e", " ", "b", "r", "e", "a", "k"]

"This is a string with \r\na line break".scan(/./).count 
=> 35 
```

有关字符串方法的更多信息，`scan`请参见[http://ruby-doc.org/core-2.2.0/String.html#method-i-scan](http://ruby-doc.org/core-2.2.0/String.html#method-i-scan)

有关正则表达式的更多信息，您可以使用[http://rubular.com/](http://rubular.com/)

# c#-4.0 - 访问 IList 中未知类型的属性

> ID：13496784
> 
> 赞同：0
> 
> 时间：2012-11-21T15:43:34.193
> 
> 标签：c#-4.0, generics, reflection

我正在实现一个自定义控件，它接收 T 类型的属性列表（作为字符串）和一个 IList 并将其呈现到 HTML 表中。我有标记和`CreateChildControls`部分。

我想要做的是通过反射遍历属性并获取在`foreach`列表上运行的循环内的属性值。

我不知道编译时 T 是什么，我希望能够为任何 T 容纳 List。

最好的方法是什么？

**编辑：**

```
public class CustomControl : System.Web.UI.WebControls.WebControl, INamingContainer
{
    private List<string> _properties;
    private **?????????** _dataSource;

    public List<string> Properties
    { set { _properties = value; } }

    public **?????????** DataSource
    { set { _dataSource = value; } }
} 
```

现在假设我将 Properties 的值设置为如下所示：

```
_properties = new List<string>()
        {
            "FirstName",
            "LastName"
        }; 
```

并传入 person 类型的对象列表：

```
public class Person
{
    public string FirstName
    { get; set; }
    public string LastName
    { get; set; }
} 
```

person calss 只是一个占位符。我想对列表中的任何 T 执行此操作。调用类知道类型 T 而自定义控件不知道。此外，自定义控件本身不打算成为一个泛型类。希望这有助于集中我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:49:02.277

您可以将数据源定义为 plain `IEnumerable`，然后通过反射获取每种类型的值。例如：

```
private IEnumerable _dataSource;

foreach (object o in _dataSource)
{
    foreach (string propName in _properties)
    {
        PropertyInfo prop = o.GetType().GetProperty(propName);

        // ...
    }
} 
```

# asp.net-mvc-3 - favicon.ico 404

> ID：13496787
> 
> 赞同：0
> 
> 时间：2012-11-21T15:43:40.460
> 
> 标签：asp.net-mvc-3, iis-7, http-status-code-404

我的母版页中有一个 favicon 图标（假设我定义了 ~/resources/company.ico）。现在如果这个 company.ico 不存在，浏览器（经过测试的 ie 和 mozilla）将尝试查找默认的 favicon 名称，即 ~/favicon.ico。如果最后一个不存在，它将 404 直接到用户屏幕。

这与 if for ex 非常不同。我放置了一个指向不存在的 css 文件的链接，浏览器将在其中向用户隐藏此 404 并显示没有此资源的页面。

为什么这两种情况的表现如此不同？这种情况是否仅适用于 favicon.ico 或其他“特定”类型的资源是否会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T15:46:14.650

此行为仅与 favicon 相关，并且取决于浏览器的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:25:23.470

可能在我最初的问题中没有足够的信息，我期待有人指出它不应该那样做。后来通过缺少 favicon 的静态页面证明了这一点，该页面优雅地处理了该资源的 404。

答案实际上与 web.config 中 http 模块上的 Run All Modules 选项有关，因为静态文件（CSS、JS、*.ico 等）是通过 ASP.Net 管道运行的。

我们正在使用盒式磁带来提供静态文件，并且我们使用的盒式磁带版本不支持关闭 RAMMFAR 选项。

这些是对 web.config 的更改，它阻止了不正确的行为：

```
<modules runAllManagedModulesForAllRequests="false">
    <add name="CassetteHttpModule" type="Cassette.Aspnet.CassetteHttpModule, Cassette.Aspnet" />
    <add name="AuthenticationModule" type="ProjName.Web.HttpModules.AuthenticationModule" preCondition="managedHandler" />
    <add name="ErrorModule" type="ProjName.Web.HttpModules.ErrorModule" preCondition="managedHandler" />
</modules> 
```

感谢所有试图提供帮助的人。

有帮助的资源：

斯科特汉塞尔曼：[http ://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)

里克·斯特拉尔：[http ://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78](http://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78)

# perl - grep in nested hash perl

> ID：13496788
> 
> 赞同：3
> 
> 时间：2012-11-21T15:43:48.173
> 
> 标签：perl, grep

My hash looks like this :

```
$VAR1 = {
      '1238' => {
                  'OUT3FA_5' => 65,
                  'SEV' => '3_major',
                  'OUT3A_5' => 20,
                  'OUT3-Fix' => 45,
                  'IN1' => 85
                },
      '1226' => {
                  'OUT3FA_5' => 30,
                  'SEV' => '4_minor',
                  'OUT3A_5' => 5,
                  'OUT3-Fix' => 25,
                  'IN1' => 40
                },
      '1239' => {
                  'OUT3FA_5' => 56,
                  'SEV' => '4_minor',
                  'OUT3A_5' => 34,
                  'OUT3-Fix' => 22,
                  'IN1' => 94
                }] 
```

I want my Perl script to only return the values corresponding to "SEV" = "4_minor" In this case it'll return :

```
 '1226' => {
                  'OUT3FA_5' => 30,
                  'SEV' => '4_minor',
                  'OUT3A_5' => 5,
                  'OUT3-Fix' => 25,
                  'IN1' => 40
                },
      '1239' => {
                  'OUT3FA_5' => 56,
                  'SEV' => '4_minor',
                  'OUT3A_5' => 34,
                  'OUT3-Fix' => 22,
                  'IN1' => 94
                } 
```

But when I use grep like this :

```
my $Sev_Logged = "4_minor";
my $node_hash = {
Week => [
  grep {  $hash{$_}{'SEV'} eq $Sev_Logged } %hash,
   ]
    };

# Print in json format
my $json = encode_json \%$node_hash;
print $json; 
```

It only returns :

```
{"Week":["1226","1239"]} 
```

And I want it to return all the other data corresponding to each of the weeks found containing SEV="4_minor". How can I do this? Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T15:49:14.603

当您将`%hash`这种方式移交给Perl 时， `grep`Perl 会将散列解释为键和值的偶数列表 - 导致`grep {...}`每个键调用一次块，每个值调用一次（而不是为每一对调用核心价值）。

尝试这样的事情：

```
{ map { ($_ => $hash{$_} } grep { $hash{$_}->{SEV} eq $Sev_Logged } keys %hash } 
```

`grep`保留那些`SEV`字段与您想要的匹配的哈希键。`map`之后重建一个哈希（因为那时我们只有从 返回的键）`grep`，最后我们将它转​​换为一个哈希引用。

# python - Python：迭代一个字符串2个字符

> ID：13496790
> 
> 赞同：2
> 
> 时间：2012-11-21T15:43:54.763
> 
> 标签：python, hex, iteration

假设我有以下 ascii 十六进制字符串“4a65737573”。我现在如何迭代它，包装固定数量的字符，但始终以 2 递增。即 4a65、6573、7375...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T15:45:48.100

这应该这样做：

```
In [218]: mystr =  "4a65737573"

In [219]: for i in range(0, len(mystr), 2):
   .....:     print mystr[i:i+4]
   .....:     
4a65
6573
7375
7573
73 
```

# perl - perl可以删除文件中的多行吗？

> ID：13496791
> 
> 赞同：0
> 
> 时间：2012-11-21T15:43:55.427
> 
> 标签：perl

我被告知可以使用 perl 从我拥有的文本文件中删除行。但是，我对 perl 的经验非常简短。

我需要匹配从第二个文件获得的文本文件中的一个数字，然后从第一个文件中删除该行及其后的下一个 2，然后跳到下一个匹配的数字，依此类推。我试图匹配的数字将在一个范围内。这可能吗？或者在实际脚本中包含要匹配的数字而不是在第二个文件中是否更容易，例如在 -

```
__DATA__
23-28
47-55
108-139
etc 
```

某种格式？

任何帮助或方向将不胜感激。

提前谢谢了。

*对不起，我可能应该从我所做的开始，我已经尝试过这段代码：”

```
#!/usr/bin/env perl 

use strict; 
use warnings; 

my $number = <DATA>; 

open( FILE, "<MGE.txt" ); 
my @LINES = <FILE>; 
foreach my $LINE ( @LINES ) { 
    print FILE $LINE unless ( $LINE =~ m/$data/ ); 
} 
close( FILE ); 
}
__DATA__
34163-51525
80765-83026
137322-138041
141474-142274
315945-318143
etc... 
```

但是，我收到 -

```
Global symbol $data requires explicit package name. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:05:48.610

您的尝试存在一些问题：

1.  `FILE`只开放阅读，所以你将无法阅读`print`。
2.  在所有的行中啜饮之后`FILE`将在文件的末尾。

沿着您的原始代码的解决方案：

```
open(FILE, "<", "MGE.txt") or die "open read failed: $!";
my @LINES = <FILE>;
# reopen FILE for writing
open(FILE, ">", "MGE.txt") or die "open write failed: $!"
for my $LINE (@LINES) {
  print FILE $LINE if ...;
}
close(FILE); 
```

另一种标准方法是使用`Tie::File`模块 - [http://perldoc.perl.org/Tie/File.html](http://perldoc.perl.org/Tie/File.html)

# jquery - 验证后重定向到同一页面时正在执行 document.ready 中的方法

> ID：13496793
> 
> 赞同：0
> 
> 时间：2012-11-21T15:44:00.120
> 
> 标签：jquery, ajax, json

我用jsp写了一些代码

```
$(document).ready(function() {

$("#invDiffAccount").trigger("change");
$("#adatAccount").trigger("change");
$("#originalInvNo").trigger("keyup");

$("#originalInvNo").keyup(function() {
        //////calling json //////
    });

$('#confirmationParty').change(function(){
    ///setting some label values///
    });

$('#invDiffAccount').change(function(){
    ///setting some label values///
    });

$('#adatAccount').change(function(){
          ///setting some label values///
    });

}); 
```

我的问题是当我收到任何验证消息并且页面重定向到同一页面时

它应该执行所有这些功能，因为我已将其写入`document.ready`

谁能告诉我为什么它没有发生..???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:57:35.320

如果在附加事件处理程序之前触发事件，则不会调用处理程序。如果这是您要执行的操作，*请先*附加，*然后*触发。

```
$("#originalInvNo").keyup(function() {
    //////calling json //////
});

$("#originalInvNo").trigger("keyup"); 
```

如果要在重新加载页面时触发处理程序，则需要以不同的方式进行。事件处理程序将无法在页面重新加载后继续存在：

*   `SessionStorage`当用户导航到同一域上的不同页面时，该对象会保留其内容。
*   浏览器在导航到页面时会发送一个 HTTP`referer`标头，其中包含上一页的 URL。不过，有些浏览器不这样做。
*   如果您想要实现的只是确定您是否在表单提交页面上，那么有很多方法可以做到这一点。
    *   检查 DOM 节点是否存在：`if($("#my-form-error").length){...`
    *   让服务器在全局范围内注入一个 javascript 变量：`<script> shouldTriggerX = true``. 不过要小心污染全局范围。
    *   让服务器触发事件​​：`<script> $(document).ready(onFormSubmitDone) </script>`. 这具有污染全局范围的相同问题。
    *   让服务器为始终存在的某个元素（例如`body`）设置一个 ID 或类：`if($(body).is(".form-error-page"){...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:00:26.883

你应该尝试这个小重构：

```
$(function() {

$("#originalInvNo").on('keyup',function() {
        //////calling json //////
    });

$('#confirmationParty').on('change',function(){
    ///setting some label values///
    });

$('#invDiffAccount').on('change',function(){
    ///setting some label values///
    });

$('#adatAccount').on('change',function(){
          ///setting some label values///
    });

$("#invDiffAccount").trigger("change");
$("#adatAccount").trigger("change");
$("#originalInvNo").trigger("keyup");

}); 
```

# mysql - mysql 显示第二个表中不匹配的项目。

> ID：13496795
> 
> 赞同：0
> 
> 时间：2012-11-21T15:44:05.357
> 
> 标签：mysql

我相信我理解加入，左，右内部，但我对这项任务有疑问。我必须在第二个表中显示不匹配的记录。

就像如果您是员工，并且employee_phone 表没有与您匹配的记录，我应该使用哪种查询？

我需要在employee_phone 表中找到所有不匹配的员工。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:45:49.020

```
select * 
from employee
where id not in (select emp_id from employee_phone) 
```

或者

```
select e.* 
from employee e
left outer join employee_phone ep on e.id = ep.emp_id
where ep.emp_id is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:45:35.453

如果您只想显示在另一个表上没有匹配的记录，查询将如下所示。

```
SELECT  a.*
FROM    tableA a
        LEFT JOIN tableB b
            ON a.ID = b.ID
WHERE   b.ID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/45cad/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:48:06.930

select * from employees e where not exists (select 'x' from employee_phone ep where e.emp_id = ep.emp_id );

基本上，您想在employee_phone 表中进行不存在搜索，并使用员工ID（或其他加入因素）加入它们

需要有关表结构的更多信息以使其更准确

# wordpress - 当第三个参数设置为 true 时，get_post_meta 返回一个数组

> ID：13496796
> 
> 赞同：0
> 
> 时间：2012-11-21T15:44:09.293
> 
> 标签：wordpress

**[编辑]** *TLDR：答案：不要使用`echo`，但是`print_r`*

我尝试了以下方法以将元值作为字符串而不是数组来获取。第三个值设置为 true，所以这应该是一个字符串。

```
<?php

    // The data
    $projects = $wpdb->get_results( "SELECT * FROM $wpdb->posts" ); 

    // Loop them
    foreach ( $projects as $project ) 
    {
        // Get the meta
        $metas = get_post_meta( $project->ID,'bc_invited', true );

        // This is rendering
        echo '<h2>' . $project->post_title . '</h2>';

        foreach($metas as $meta){
            // This is not rendering
            echo $meta . '<br/>';
        }

    }
?> 
```

为什么我没有看到预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:50:23.327

**get_post_meta**函数将第三个参数接收为（布尔值）（可选）如果设置为 true，则函数将返回单个结果，作为字符串。

如果为 false 或未设置，则该函数返回自定义字段的数组。这在序列化数组的上下文中可能不直观。如果您使用此方法获取序列化数组，您希望 $single 为 true 以实际获取未序列化数组。如果您传入 false 或将其省略，您将拥有一个包含 1 的数组，并且索引 0 处的值将是序列化字符串。默认值：假

```
 <?php $meta_values = get_post_meta($post_id, $key, $single); ?> 
```

现在您的问题是您将元数据作为数组返回并使用了导致问题的**回**显，您必须使用**print_r**来查看结果

# sql - 相关更新

> ID：13496797
> 
> 赞同：0
> 
> 时间：2012-11-21T15:44:13.523
> 
> 标签：sql, oracle10g

我正在尝试使用另一个表中的字段来更新一个表：

```
Update x
From y
Set 1=y.1, 2=y.2, 3=y.3
Where y.4="*Cash*" and y.5="*Use*" 
```

这可能吗？还是我必须使用内部联接或子查询？我的更新语法中不断出现错误：“缺少或无效选项”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:02:46.903

你似乎在要求类似的东西

```
UPDATE x
   SET (col1, col2, col3) = (select y.col1, y.col2, y.col3
                               from y
                              where y.col4 = '*Cash*'
                                and y.col5 = '*Use*') 
```

通常，会有一些附加条件与表格`x`和`y`. 如果针对的查询`y`返回单行，并且您想`x`使用该单行数据更新每一行，则没有必要。但通常情况下，你会有类似的东西

```
UPDATE x
   SET (col1, col2, col3) = (select y.col1, y.col2, y.col3
                               from y
                              where y.col4 = '*Cash*'
                                and y.col5 = '*Use*'
                                and x.someKey = y.someKey) 
```

如果您只想更新`x`其中具有匹配行的行`y`

```
UPDATE x
   SET (col1, col2, col3) = (select y.col1, y.col2, y.col3
                               from y
                              where y.col4 = '*Cash*'
                                and y.col5 = '*Use*'
                                and x.someKey = y.someKey)
 WHERE EXISTS( select 1
                 from y
                where y.col4 = '*Cash*'
                  and y.col5 = '*Use*'
                  and x.someKey = y.someKey) 
```

# gcc - 在编译时检查工具链配置

> ID：13496802
> 
> 赞同：1
> 
> 时间：2012-11-21T15:44:29.310
> 
> 标签：gcc, makefile, toolchain, gnu-toolchain

有没有一种在编译时检查（gcc）编译器配置的好方法（从 Makefile 中或从 C 源文件中）。我想检查正在使用的编译器是否对正在编译的代码有足够的支持，如果没有，我希望它立即失败，并显示一条明确的消息，要求用户升级他们的工具链。

谢谢

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:54:36.513

如果检测到的问题的解决方案是升级工具链，则检查编译器预定义的`__GNUC__`宏`__GNUC_MINOR__`。`__GNUC_PATCHLEVEL__`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:49:28.300

我推荐的最常用的工具是[autotools](http://en.wikipedia.org/wiki/GNU_build_system)和[CMake](http://www.cmake.org/)。

Autotools 是 GNU 项目的历史工具，是一套脚本，允许开发人员通过 M4 脚本 (autoconf) 实现特征检测。有用于常见测试的预定义宏。

CMake 是一个更新的原生 C++ 工具链，它还包括对最常见功能检查的支持，并允许开发人员通过其强大的语言实现自己的测试。

请注意，两者都是完全替代手写 makefile 的完整构建工具链。然而，我相信它们在跨平台支持和可维护性方面提供的优势比 makefile 提供的控制级别更有价值。

# meteor - 运行流星后终端冻结

> ID：13496809
> 
> 赞同：1
> 
> 时间：2012-11-21T15:44:45.327
> 
> 标签：meteor

我第一次尝试在 Mac os x 10.7.5 上安装流星。进入后

```
cd ~/directory/to/project
meteor 
```

并接收

```
Running on: http://localhost:3000/ 
```

在终端中，它冻结了。默认页面上的按钮死了，我不能再使用终端窗口了。我似乎在 Meteor 文档中找不到有关重新安装或解决此特定问题的任何内容。有没有其他人遇到过这个问题并且知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:35:31.963

此行为符合预期。Meteor 正在运行，并为您的页面提供服务。

查看浏览器上的 javascript 控制台。（在 OSX 中的 Chrome 上，您可以通过键入 command-option-j 到达那里，查看您自己的浏览器文档了解详细信息）。当您点击默认示例应用程序上的按钮时，应该会出现一条消息。

当您希望 Meteor 停止运行时，您可以按 control-c，这将使 Meteor 退出为您的页面结束提供服务。

相反，如果您想强制 Meteor 进入后台并在不退出的情况下恢复命令行，请按 control-z。您的终端会告诉您流星已停止，并在其左侧给您一个“工作编号”。您可以使用该作业编号和`bg`命令来设置 Meteor 在后台运行。当您希望它再次出现在前台时（例如，控制-c 退出它）您可以使用该`fg`命令。

这是我如何将流星放入背景的示例：

```
Running on: http://localhost:3000/
^Z
[1]+  Stopped                 meteor
gobo:blank naomi$ bg 1
[1]+ meteor &
gobo:blank naomi$ 
```

请注意，这些命令和组合键是我的 shell（在本例中为 bash）的一部分，而不是流星的一部分。

# sql-server - 使用 SQL 别名连接到 SQL Server 时出现问题

> ID：13496814
> 
> 赞同：1
> 
> 时间：2012-11-21T15:45:13.170
> 
> 标签：sql-server, connection-string

我创建了一个 SQL 别名：

```
Name: CIHDB
Server: SQLSRV
Protocol: tcp
Port no: (empty) 
```

我在 Visual Studio 中的连接字符串说：

`Data Source=CIHDB;Initial Catalog=CIH;Integrated Security=SSPI;MultipleActiveResultSets=True;Application Name=EntityFramework`

但这失败并出现错误：`TCP Provider, error: 0 - No connection could be made because the target machine actively refused it.`

当我将连接字符串中的“数据源”更改为“本地主机”时，连接没有问题。

我在想我在别名中使用了错误的协议。

任何人都可以对此有所了解吗？

谢谢埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:38:15.207

当我同时使用

`cliconfg.exe`

和

`c:\windows\syswow64\cliconfg.exe`

（cliconfg.exe 的 64 位和 32 位版本）

我看到 tcp/ip 没有启用，所以一旦我修复了它，一切就到位了。

# php - 使用 simple_html_dom.php 库抓取 Html

> ID：13496819
> 
> 赞同：0
> 
> 时间：2012-11-21T15:45:24.347
> 
> 标签：php, dom, simple-html-dom

有一个html文档，格式如下：

```
<div....>
  <map name="blah"
           .
           .
   />
  <map name="blah2"
          .
          .
   />
</div> 
```

我想总是检索第二张地图。但是，我想让完全动态。

```
$url = $_GET['url'];
$html_content = getHTML($url);
$html = str_get_html($html_content);

$map = $html->find('map[name=blah2]'); 
```

上述线路运行良好。但正如我之前提到的，我不想手动命名。我只想总是拿第二张地图。此外，我还想检索地图的名称。

有任何想法吗？

ps 下面的代码不起作用。我以前试过这个。并且不显示地图下的内容。但是，正确返回地图的名称

```
 $map = $html->find('map',1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:49:35.453

关于什么：

```
$map = $html->find('map', 1);
echo $map->name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:49:52.050

这很容易：

```
$map = $html->find('map',1);
if($map != null)
    $name = $map->name; 
```

你只需要[看看](http://simplehtmldom.sourceforge.net/manual.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:50:56.027

您可以使用 jQuery 的端口，例如 PHPQuery [http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)，这将为您提供 eq() 选择器，并且通常可以对 XML 进行相当丰富的操作

# ruby-on-rails - Rails / Sinatra SOA 架构内部认证

> ID：13496824
> 
> 赞同：0
> 
> 时间：2012-11-21T15:45:47.130
> 
> 标签：ruby-on-rails, sinatra, soa

我目前正在实现一个基于 Rails 和 sinatra 的架构，并在努力确定我应该提供哪种数据访问方面的身份验证。

服务（Sinatra）应该响应主应用程序（Rails，使用基于 HTTParty 的客户端），也应该响应 API 客户端。

我应该实施哪种身份验证/授权方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:50:32.120

Basically I would advise using OAuth 2.0\. And have your main app as just another API client.

Not sure on your particular use-case but why don't you look at the [Doorkeeper gem](https://github.com/applicake/doorkeeper)?

You can configure various permissions, etc on a per client basis so your main app can have more data-access rights than other API clients.

# ruby-on-rails - Heroku 部署错误 H10（应用程序崩溃）

> ID：13496827
> 
> 赞同：156
> 
> 时间：2012-11-21T15:45:49.057
> 
> 标签：ruby-on-rails, deployment, heroku

我有一个在本地计算机上运行的 RoR 应用程序，但是当我将它发送到 heroku 时，它崩溃了。错误日志给出错误 H10 并说：

```
 2012-11-21T15:26:47+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/newrelic_rpm-3.4.2/lib/new_relic/control/instance_methods.rb:95:in `start_agent'
    2012-11-21T15:26:48+00:00 heroku[web.1]: State changed from starting to crashed
    2012-11-21T15:26:48+00:00 heroku[web.1]: Process exited with status 1
    2012-11-21T15:26:59+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:27:00+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:30:08+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:30:08+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:30:59+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:31:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:31:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:32:08+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes=
    2012-11-21T15:32:08+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=xxx.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes= 
```

编辑：

```
2012-11-22T10:00:58+00:00 app[web.1]: 
2012-11-22T10:00:59+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=xxx.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=1ms service=26ms status=200 bytes=0 
```

有没有人以前有过这种情况，并且知道可能导致问题的原因吗？我找不到解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2014-06-09T03:23:37.703

我在上面遇到了同样的错误，应用程序在 heroku 上崩溃（在 dev 中运行良好）但 heroku 上的错误日志没有显示任何线索。我在此页面上阅读了其他答案，并在看到“重建应用程序”后大汗淋漓。我想也许我可以进入 heroku 控制台并环顾四周。我做到了，甚至控制台也崩溃了，但这一次它告诉了我原因。这是我在几个小时前的故障排除会话中忘记删除的一些模糊变量。我并不是说您会遇到同样的问题，但是当我尝试通过控制台时，我发现了更多信息。希望这可以帮助。

```
$ heroku run rails console 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-01-12T16:43:41.733

我遇到了同样的问题。日志也没有给我任何线索。所以我缩小并扩大了测功机。这为我解决了这个问题：

```
heroku ps:scale web=0 
```

等了几秒...

```
heroku ps:scale web=1 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-06-30T20:26:48.403

```
$heroku run rails console 
```

这是最好的选择，因为它会在您的终端中给您一个错误，这将比您 Heroku 日志中的“应用程序崩溃”错误更详细。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-02-21T22:20:51.700

```
$ heroku restart 
```

帮助我让我的测功机再次运行。我是 Heroku 的新手，但很高兴我现在知道了。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-07-06T21:49:29.087

当我在错误的端口上监听时，这发生在我身上

我将listen（）更改为“process.env.PORT”，所以：

```
http.listen((process.env.PORT || 5000), function(){
  console.log('listening on *:5000');
}); 
```

代替

```
http.listen(5000, function(){
  console.log('listening on *:5000');
}); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-04-14T03:04:46.437

今天晚上有同样的问题。不是一个很有帮助的错误，所以我尝试在控制台中运行

```
heroku run rails c 
```

它失败了，给了我一个更有帮助的错误。我忽略了删除生产中的方法调用。一旦我解决了这个问题，该应用程序就可以正常工作了。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-17T07:59:28.283

我通过推送到 Git 解决了这个问题：

```
git add .
git commit -am "some text"
git push 
```

然后推送到 Heroku：

```
git push heroku 
```

然后 rake db:migrate 在 Heroku 上：

```
heroku run rake db:migrate 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-09-17T17:26:11.537

我设法不包括我的 .gitignore 文件-> 破坏了heroku。#doh

这是一个有效的 .gitignore 文件

```
/.bundle
/vendor/bundle/
/vendor/ruby/

db/*.sqlite3
/db/*.sqlite3-journal
/log/*
/tmp/*

**.war
*.rbc
*.sassc
.redcar/
.sass-cache
/config/config.yml
/config/database.yml
/coverage.data
/coverage/
/db/*.javadb/
/db/*.sqlite3
/doc/api/
/doc/app/
/doc/features.html
/doc/specs.html
/public/cache
/public/stylesheets/compiled
/public/system/*
/spec/tmp/*
/cache
/capybara*
/capybara-*.html
/gems
/specifications
rerun.txt
pickle-email-*.html
.zeus.sock

**.orig

.DS_Store

/nbproject/

.idea

/*.tmproj

**.swp

.env
.powenv 
```

要创建 .gitignore 文件，请在终端导航到您的应用程序目录并使用以下命令

```
touch .gitignore 
```

然后你可以在你的文本编辑器中打开它并将上面的代码放入其中。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-06-20T19:24:50.100

在我的情况下，我在我的应用程序中使用 ENV 变量，但它没有在 heroku 配置中设置。

heroku 控制台给出了正确的错误：

```
heroku console
`validate_options': Missing required arguments: aws_access_key_id, aws_secret_access_key (ArgumentError) 
```

然后设置 ENV 配置

```
heroku config:set AWS_ACCESS_KEY_ID='key' 
```

重启 Heroku

```
heroku restart 
```

有用！！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-02-04T19:30:46.053

我在 Heroku 中遇到了同样的 H10 应用程序崩溃错误。我在heroku界面中点击了'restart all dynos'，问题就解决了。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-11-28T03:11:13.280

`H10`由于主代码文件的名称错误，我使用 Heroku 和 Node。编辑`package.json`：

```
{

  ...

  "main": "correct_file_name.js",

  ...

  "scripts": {
    "start": "node correct_file_name.js"
  }
} 
```

或者重命名文件。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-06-22T15:33:53.713

就我而言，`Procfile`我使用的是破坏一切。Heroku`Procfile`在启动应用程序时查找并应用其设置 - 显然我使用的开发设置对产品服务器没有任何意义。我不得不将其重命名为`Procfile.dev`，一切都开始正常工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-02-20T15:49:51.690

如果您使用的是 Node，您可以尝试直接在控制台中运行 serve 命令。就我而言，我正在运行一个角度应用程序，所以我尝试了：

```
heroku run npm start 
```

这向我展示了应用程序启动期间的确切错误。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-09-10T09:00:21.317

解决方案为我工作，尝试运行命令：：

> Heroku 重启

[![在此处输入图像描述](../Images/d052e31f97dd92f972f2af9316545003.png)](https://i.stack.imgur.com/spbzt.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-12-11T10:21:52.470

我面临的问题的根源是没有数据库。为了解决这个问题，我首先导出了我的本地数据库：

```
$ heroku addons:add heroku-postgresql:dev 
$ heroku addons:add pgbackups
$ PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h localhost -U myuser mydb > mydb.dump 
```

然后将其导入 Heroku：

```
$ heroku pgbackups:restore DATABASE 'http://site.tld/mydb.dump' 
```

在这些示例中要替换的变量是：`mypassword`、`myuser`、`mydb`& `http://site.tld/mydb.dump`。请注意，我必须将转储上传到临时服务器。

为了解决我所有的问题，我写了一份关于如何将 Enki 部署到 Heroku 的快速指南，[可以在这里找到](https://web.archive.org/web/20150219152706/http://www.benji.so/articles/enki-for-heroku)。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-06-10T08:41:47.133

看看你是否得到

```
bash: bin/rails: No such file or directory 
```

在日志中运行（heroku logs -t）命令如果是，那么请运行

```
bundle exec rake rails:update 
```

不要覆盖你的文件，最后这个命令将创建

```
 create  bin
  create  bin/bundle
  create  bin/rails
  create  bin/rake 
```

将这些文件推送到heroku，你就完成了。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-09-06T04:48:20.817

我得到了与“应用程序崩溃”相同的上述错误，heroku 应用程序日志没有显示与错误消息原因相关的太多信息。然后我在 heroku 中重新启动了 dynos，然后它显示错误，在我的设置中的 index.js 文件之一中显示附加花括号。删除并在 heroku 上重新部署应用程序后，该问题得到解决。

希望这对面临同样问题的人有所帮助。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-01-04T20:31:29.297

在浏览了整个答案列表后，我偶然发现了这个网站：[https](https://status.heroku.com/) ://status.heroku.com/ ，它详细介绍了 Heroku 的当前状态/事件。在将头撞到墙上之前检查事件总是安全的。对我来说，是在上述链接上发布的附加事件报告导致了错误。

[![服务器事件更新](../Images/ca4cd045396ebe797660da3590f1126d.png)](https://i.stack.imgur.com/fS1Rj.png)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-10-06T11:36:34.113

我有同样的问题，我做了以下

```
heroku run rails c 
```

它在控制器允许的参数中识别出语法错误和缺少逗号。如上所述，Heroku 日志没有提供足够的信息来解决问题。

我之前没有在 Heroku 上看到应用程序崩溃的消息。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-12-12T06:01:11.640

我和@Ahmed Elkoussy 一样将我的问题追溯到Puma 服务器，但我只是通过在puma.rb 文件中注释以下行来解决：

`# pidfile ENV.fetch("PIDFILE") { "tmp/pids/server.pid" }`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-12-11T05:20:50.097

我今天遇到了同样的问题。尽管我之前迁移了模型，但我确实做到`heroku run rake db:migrate`了，并且应用程序没有崩溃。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-10-02T02:07:42.330

复制和粘贴代码时要非常小心。有时，当您将块添加到文件中时，它的格式不正确并会产生错误。

我以前遇到过这个问题并得到了这个错误：意外的tIDENTIFIER，期待keyword_end

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-06-30T10:05:43.357

有同样的问题。对我来说这是 before_action 过滤器中的错误（因为空数据库）检查你的 before_action 过滤器，也许他们会抛出无法处理的异常。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-07-13T22:20:27.280

我在尝试在子目录中运行 Rails 时遇到了这个问题，而不是在`/`. 例如，我运行 Angular/Node/Gulp 应用程序`/client`和运行 Rails 应用程序`/server`，但它们都在同一个 git 存储库中，因此我可以跟踪前端和后端的更改。尝试将它们部署到 Heroku 时出现此错误。对于其他遇到此问题的人，这里有一个自定义构建包，它允许在子目录中运行 Rails。

[https://github.com/aarongray/heroku-buildpack-ruby](https://github.com/aarongray/heroku-buildpack-ruby)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-12-12T15:59:18.100

我遇到了同样的问题（heroku 上的同样错误，在本地机器上工作），我尝试了这里列出的所有解决方案，包括 `heroku run rails console` 运行时没有错误消息的解决方案。我试`heroku run rake db:migrate`了`heroku run rake db:migrate:reset`几次。这些都没有解决问题。在浏览一些用于生产但不在开发环境中的文件时，我发现 puma.rb 文件中的一些空白是罪魁祸首。希望这可以帮助有同样问题的人。改变它使它工作

```
 ActiveRecord::Base.establish_connection
  End 
```

到

```
 ActiveRecord::Base.establish_connection
end 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-11-17T22:17:11.170

我在部署到 Heroku（应用程序崩溃）时遇到了同样的问题。日志没有指出问题可能是什么。Heroku 控制台在额外括号的代码中显示语法错误。令人惊讶的是，我在运行应用程序时在本地轨道上没有遇到问题，因此错过了它。在更正和 git push 到 Heroku 之后，该应用程序开始在 Heroku 上运行！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-06-12T16:06:41.707

我从 app.set('ip_address', process.env.IP || **'127.0.0.1'** ); 更新了我的设置；

到

app.set('ip_address', process.env.IP || **'0.0.0.0'** );

我为 Openshift 托管更改了

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-02-11T20:39:49.120

[当我根据他们的指南](https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#adding-puma-to-your-application)页面开始在 heroku 中使用 Puma 时遇到了同样的问题，当我评论下面显示的端口行时，这个问题得到了解决

```
# port        ENV['PORT']     || 3000 
```

因此，在配置目录的 puma.rb 中禁用上述行解决了这个问题

```
workers Integer(ENV['WEB_CONCURRENCY'] || 2)
threads_count = Integer(ENV['RAILS_MAX_THREADS'] || 5)
threads threads_count, threads_count

preload_app!

rackup      DefaultRackup
# port        ENV['PORT']     || 3000
environment ENV['RACK_ENV'] || 'production'

on_worker_boot do
  # Worker specific setup for Rails 4.1+
  # See: https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#on-worker-boot
  ActiveRecord::Base.establish_connection
end 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-10-24T16:22:44.140

就我而言，`git push heroku master`当我不在主分支上时，我正在执行。我必须先去 master 分支，将代码与我的另一个分支合并，然后 git push。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-04-24T11:20:32.577

我也遇到了同样的错误。向我的项目添加`.gitignore`文件解决了我的问题。

我的`.gitignore`文件在这里：

```
# Node build artifacts
node_modules
npm-debug.log

# Local development
*.env
*.dev
.DS_Store

# Docker
Dockerfile
docker-compose.yml 
```

我改变了`listen()`功能；

```
app.listen(5000, function() {
console.log("Server running on port 5000...");
}); 
```

我把它改成了；

```
 const PORT = process.env.PORT || 5000

...

    app.listen(PORT, function() {
    console.log("Server running on port 5000...");
    }); 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2020-06-25T01:53:42.123

我在 Dev 上发布的解决方案适用于大多数使用 React 的人：

[https://medium.com/@uros.randelovic/causes-of-heroku-h10-app-crashed-error-and-how-to-solve-them-70495914d2a3?sk=1c51cf95e904f754a43a4b63a06b5503](https://medium.com/@uros.randelovic/causes-of-heroku-h10-app-crashed-error-and-how-to-solve-them-70495914d2a3?sk=1c51cf95e904f754a43a4b63a06b5503)

```
npm install serve --s
"scripts": {
"dev": "react-scripts start",
"start": "serve -s build",
"build": "react-scripts build",
"test": "react-scripts test --env=jsdom",
"eject": "react-scripts eject",
"heroku-postbuild": "npm run build"
} 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-07-31T04:53:39.060

我在服务器端应用程序中遇到了同样的问题。默认情况下，浏览器向 favicon.ico 请求服务器。所以我使用[了 serve-favicon](https://www.npmjs.com/package/serve-favicon)包。这是设置：

```
import favicon from "serve-favicon";
server.use(favicon(path.join(__dirname, "../assets/images/favicon.ico"))); 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-08-05T20:36:39.693

我的 50 美分，我也遇到了这个问题，并通过以下方式解决：

*   从构建过程的一开始就通过 UI 检查日志（例如，在提交之后，重新启动 dynos）以查看崩溃前发生了什么

*   当链接模块不包括项目的根目录时（我的问题..）

这：

```
const router = require('./logic/router.js') 
```

代替：

```
const router = require('../DMS/logic/router.js') 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-12-14T09:55:11.907

我知道这个问题很老了。我添加了新的答案，以防万一有人在 Rails 3 上遇到同样的问题。

就我而言，一旦在 Gemfile 上意外评论了“薄”宝石，应用程序就开始在 Heroku 上崩溃。

它再次起作用，我添加了那个宝石。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-04-06T17:47:46.200

在 node.js 中有同样的问题

修复：从项目的 .env 文件中删除 PORT

// app.ts 或 app.js

```
const PORT = process.env.PORT || '5000'; 
```

// .env

# PORT=5000 <--- 注释或删除此行

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2022-02-18T11:40:24.183

我从 rails 6 升级到 rails 7 后遇到了这个问题。这是因为 rails 7 使用默认的图像处理器`:vips`，但我没有准备我的应用程序使用 vips，所以出现了问题。

由于我想继续使用 :mini_magick ，就像在 rails 6 中一样，我只需将这一行添加到 config/application.rb 中，一切都很好：

```
config.active_storage.variant_processor = :mini_magick 
```

我在[这里得到了这些信息](https://github.com/rails/rails/issues/44211#issuecomment-1017461170)

* * *

现在，我是怎么想出来的？谢天谢地，我可以看到最后一个 heroku 日志来了解用户刚刚在生产应用程序上做了什么，我在本地运行应用程序，并在本地执行相同的操作，服务器崩溃了，我在服务器日志中看到了一个涉及 vips 的问题.

# javascript - 设置时间不起作用

> ID：13496828
> 
> 赞同：0
> 
> 时间：2012-11-21T15:45:51.517
> 
> 标签：javascript, google-apps-script, google-calendar-api

有谁知道为什么这个简单的代码不起作用？：

```
var formattedSched = new Date(sched).setHours(15); 
```

我只是想通过应用程序脚本向谷歌日历中的日历事件添加时间。我什至在 w3 页面上使用基本相同的样本设定时间。[http://www.w3schools.com/jsref/jsref_sethours.asp](http://www.w3schools.com/jsref/jsref_sethours.asp)

但是每次我运行脚本在谷歌日历中创建一个事件时，我都会收到一条错误消息，谷歌认为它是一个数字而不是日期对象。没有 setHours() 它可以正常工作，但有了它，谷歌认为这是一个数字。谢谢

**更新**：好的，我拆分了一个测试函数来尝试记录正在发生的事情：

```
function testsetcal() {

  var formattedSched = new Date(); Logger.log(formattedSched.setHours(15))

  CalendarApp.getDefaultCalendar()
  .createEvent('Commo', formattedSched, formattedSched);
} 
```

**没有**setHours的 Logger 结果是：`Wed Nov 21 08:12:33 PST 2012`

**使用**setHours 的记录器结果是：`1.35352881266E12` 它看起来与 w3 页面上的示例结果完全不同。

**更新**：仍然无法使用与主变量分离的 setHours 获得相同的记录器结果：`1.35352881266E12`

```
function testsetcal() {

  var formattedSched = new Date(); 
  var withHours = formattedSched.setHours(15);

  Logger.log(withHours);

  CalendarApp.getDefaultCalendar()
  .createEvent('Commo', withHours, withHours);
} 
```

**更新**：好的哇 - 这很奇怪。我去我的谷歌日历删除了所有的测试事件，至少只是我认为成功的那些。然后我发现比我想象的要多，有些设置为 1500 - 然后我回到代码并发现 setHours() 在谷歌日历创建事件之外工作，如下所示：

```
function testsetcal() {  
  var formattedSched = new Date(); 

  formattedSched.setHours(15);

  Logger.log(formattedSched.setHours(15));

  CalendarApp.getDefaultCalendar()
  .createEvent('Commo', formattedSched, formattedSched);
} 
```

因此，此代码将小时设置为 1500，但该部分代码不包含在事件的创建中。完全让我感到惊讶，但这似乎是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:52:19.920

我想我应该继续并关闭它。感谢您的回复。对我有用的代码可以在一段时间内将事件带入 GCal：

```
function testsetcal() {  
  var formattedSched = new Date(); 

  formattedSched.setHours(15);

  Logger.log(formattedSched.setHours(15));

  CalendarApp.getDefaultCalendar()
  .createEvent('Commo', formattedSched, formattedSched);
} 
```

`.setHours`必须在`.createEvent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:48:30.067

不完全是，您当前正在将 setHours 响应返回给 var，请尝试

```
var formattedSched = new Date(sched);
formattedSched.setHours(15); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:49:53.143

您需要按照您引用的示例将其分开。

```
var formattedSched = new Date(sched);
formattedSched.setHours(15); 
```

您正在尝试实现`setHours()`尚未创建的日期对象。

# jquery - 清除旧的 jsonp 回调

> ID：13496833
> 
> 赞同：0
> 
> 时间：2012-11-21T15:46:11.240
> 
> 标签：jquery, ajax, cross-domain, jsonp

我有一段工作代码可以联系 nominatim 进行地理编码。这是通过跨域请求完成的。对于每个请求，我都会创建一个独特的回调函数。我在 DOM 检查器中注意到所有这些旧请求“堆积”。由于我将网站更改为更像应用程序的行为（因此用户停留在同一页面上），这可能会成为一个问题。

如何清除这些旧的请求和变量？只是为了清除 DOM 并防止这种明显的内存浪费。

```
 $.ajax({
        url: 'http://nominatim.openstreetmap.org/search',
        type: 'GET',
        dataType: 'jsonp',
        jsonp: 'false',
        jsonpCallback: 'json_callback' + myGeocoder.requestIndex,
        data: {
            format: 'json',
            q: request.term,
            addressdetails: 1,
            limit: 10,
            json_callback: 'json_callback' + myGeocoder.requestIndex
        },
        beforeSend: function(x) { 
            if (x && x.overrideMimeType) { 
                x.overrideMimeType("application/json;charset=UTF-8"); 
            } 
        },
        success: processResult
    });
    myGeocoder.requestIndex++; 
```

在 Firebug DOM 检查器中，经过几次使用该函数后：

```
 json_callback0 undefined
 json_callback1 undefined
 json_callback2 undefined
 json_callback3 undefined
 json_callback4 undefined
 json_callback5 undefined
 json_callback6 undefined
 json_callback7 undefined
 json_callback8 undefined
 json_callback9 undefined 
```

等等...

# python - 在获得提示时遇到问题

> ID：13496835
> 
> 赞同：2
> 
> 时间：2012-11-21T15:46:18.193
> 
> 标签：python, fabric, fexpect

我似乎没有得到预期的工作。我似乎无法真正抓住提示。

这是我所拥有的：

```
with settings(hide('commands', 'warnings') , warn_only=True):
   prompts = expect('Are you sure you want to perform this operation? [Y/N]:', 'N')
   with expecting(prompts):
      run(sudo("/something.sh apply /some.file" , user="someuser")) 
```

我很确定我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:58:33.060

我用一些小东西编辑了你的代码：

1.  `expecting`需要一个列表
2.  Fabric/Fexpect sudo() 和 run() 不能嵌套。你可能只需要 sudo()
3.  您必须转义正则表达式符号，例如`[]`使用斜杠`\[`或只是使“期望”更短：

    ```
    prompts = []
    prompts += expect('Are you sure.*', 'N')
    with expecting(prompts):
        sudo("/something.sh apply /some.file" , user="someuser") 
    ```

此外，也许你不应该`hide('commands')`，这取决于提示`something.sh`使用什么。

# xml - XML 格式约定：为什么要在 /> 之前留一个空格？

> ID：13496837
> 
> 赞同：13
> 
> 时间：2012-11-21T15:46:17.800
> 
> 标签：xml, coding-style, formatting, whitespace

我已经在几个地方看到过它，例如 Eclipse XML 自动格式化也可以做到：在`/>`空元素的关闭之前放置一个空格。

有

```
<element attribute="value"/> 
```

将被重新格式化为

```
<element attribute="value" /> 
```

为什么要这么做？从 XML 的角度来看，它是等价的。是公约吗？是为了可读性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:50:06.617

使用 XHTML XML 很可能是安全的，这需要一些早期 XHTML 浏览器中的空间。

更好的答案：[关闭斜线之前的空间？](https://stackoverflow.com/questions/462741/space-before-closing-slash)

# macos - Android Phonegap Mac 路径变量

> ID：13496838
> 
> 赞同：2
> 
> 时间：2012-11-21T15:46:20.033
> 
> 标签：macos, variables, cordova, path

./create 导致没有这样的文件或目录。我在 paths.d 中添加了平台工具和工具，我仍然得到这个结果。

导出 PATH=${PATH}:/Users/ryan/Documents/adt-bundle-mac/sdk/platform-tools:/Users/ryan/Documents/adt-bundle-mac/sdk/tools

按照这些说明：[http ://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html)

# html - 为什么 github logo 是用 HTML 作为字体实现的？

> ID：13496839
> 
> 赞同：4
> 
> 时间：2012-11-21T15:46:22.373
> 
> 标签：html, css, github, octicons

谁能解释一下左上角或页面底部中心的小八角猫标志是如何实现的，*为什么*？

我只能看到这个标记：

```
<span class="mega-icon mega-icon-blacktocat"></span> 
```

这个CSS：

```
.mega-icon-blacktocat:before {
    content: "";
}

.mega-icon {
font-family: 'Octicons Regular';
} 
```

我在那里看不到图片，所以我猜他们正在使用该字体。但是为什么会有那个奇怪的  字符，为什么它在样式中而不是在 HTML 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:50:09.773

这是一种称为 CSS 字体的技术，他们使用字体将  文本替换为完整图标，该图标将在他们创建的字体文件中。

它允许徽标根据分辨率随站点无限缩放，并倾向于减少加载时间。他们还可以更改颜色并对其应用其他很酷的 CSS 规则，这与图像不同。

Pictos 和 Picons 之类的东西很相似，因为它们提供了一种字体，您可以在其中使用字母 H 来显示例如饼图。

# ruby-on-rails - ice_cube 的营业时间

> ID：13496841
> 
> 赞同：3
> 
> 时间：2012-11-21T15:46:23.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ice-cube

我如何能够在一个时间表内规定餐厅的营业时间？

周一至周五 8-16 很容易：

```
schedule = Schedule.new(Time.parse(Date.yesterday.to_s + ' 8:00'), :duration => 60*60*8)
(...)
schedule.add_recurrence_rule Rule.daily.day(:wednesday)
schedule.add_recurrence_rule Rule.daily.day(:thursday)
(...)
schedule.occurring_at?(Time.now) 
```

问题是当试图统治类似的事情时：周一 9-17，Tu 16-01（午夜后的第二天）等。

我可以用那个插件做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:27:33.750

刚刚收到来自 Ice_Cube 作者的电子邮件，回答了我的问题。可能有用：

> 不幸的是，我们努力保持与 iCalendar 标准的向后兼容性 - 因此您无法根据每个规则更改持续时间。如果你想完成类似上面的事情，人们要么使用多个时间表，要么分别存储持续时间（后者是高度优选的）

# css - 粘贴到CKEditor时如何不继承格式？

> ID：13496842
> 
> 赞同：3
> 
> 时间：2012-11-21T15:46:25.883
> 
> 标签：css, formatting, styles, ckeditor, copy-paste

**问题：**当用户从另一个网站复制大量代码并将其粘贴到 CKEditor 中时，它会包含大量内联样式，这些样式指的是从中复制的网站上内容的样式。当粘贴的内容被保存并显示在我的网站上时，它不使用我的样式，而是使用复制的内联样式。

我浏览了 CKEditor 文档，老实说，我没有找到可以缩小范围的文档。有一个可用的粘贴功能可以删除格式，但这是菜单中的一个可选按钮，而大多数用户只会发布到主要的大区域，因此它毫无价值。

**主要问题：**有没有办法在粘贴时将 CKEditor 设置为去除格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T15:51:23.323

啊，我找到了答案：

```
// Apply editor instance settings.
CKEDITOR.config.forcePasteAsPlainText = true; 
```

# dynamic-programming - 动态规划的递归方程

> ID：13496845
> 
> 赞同：1
> 
> 时间：2012-11-21T15:46:36.380
> 
> 标签：dynamic-programming

我的情况与背包问题非常相似，但我只想确认我的递归方程与背包问题相同。

我们最多可以投资 M 美元。我们有 N 个不同的投资，每一个都有成本 m(i) 和利润 g(i)。我们想找到最大化利润的递推方程。

这是我的答案：

```
 g(i,j) = max{g(i-1,j), g_i + (i-1,j-m_i)}      if j-m_i >= 0

              g(i-1,j)                              if j-m_i < 0 
```

我希望我的解释清楚。

谢谢你，祝你有美好的一天！

鲍比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:51:35.590

你的递归方程是正确的。该问题与传统的背包问题相同。其实你可以对空间复杂度做一些优化。这是 C++ 代码。

```
int dp[M + 10];
int DP{
    memset(dp, 0, sizeof(dp));
    for(int i = 0; i < N; ++i)
        for(int j = M; j >= m[i]; --j) // pay attention
            dp[j] = max(dp[j], dp[j - m[i]] + g[i]);
    int ret = 0;
    for(int i = 0; i <= M; ++i) ret = max(ret, dp[i]);
    return ret;
} 
```

# java - smartgwt 保存图像文件而不是在浏览器中显示

> ID：13496847
> 
> 赞同：0
> 
> 时间：2012-11-21T15:46:38.470
> 
> 标签：java, image, dialog, save, smartgwt

我有一个 smartgwt 应用程序，它创建一个带有 jpg/gif/png/pdf 文件的链接。此文件显示在浏览器中。我想获得保存对话框，而不是当我想在本地机器上保存文件时询问我的路径。我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:20:34.070

据我所知，您必须通过将 Content-disposition 设置为附件来更改响应标头。像这样：

'内容配置：附件；文件名=image.jpg' '内容类型：image/jpeg'

有了这些，浏览器将理解大多数情况下它应该显示一个对话框来保存名称为：image.jpg 的图像。它还可以让您将其直接发送到应用程序，例如图像查看器。

为了让它从一个简单的链接工作，也许您必须编写一个 servlet，它将返回具有正确标题的请求文件，并从每个链接调用该 servlet，并带有一个参数到真实文件。

# python - Google 用户 API 是否返回用户的（主要电子邮件）地址？

> ID：13496850
> 
> 赞同：0
> 
> 时间：2012-11-21T15:46:44.510
> 
> 标签：python, google-app-engine

尽管我没有在任何地方看到此文档，但我假设`User`Google 用户 API 返回的对象与 Google 帐户而不是电子邮件地址具有 1-1 对应关系。

假设这是真的，并且记住 Google 帐户可以与多个电子邮件地址相关联，那么该`email()`方法返回的帐户的 PRIMARY EMAIL 地址是吗？

IE。[该用户的https://www.google.com/settings/account](https://www.google.com/settings/account)中列出的主要电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:55:16.767

在这种情况下，Google 帐户和电子邮件地址是一回事。这由 User 类演示，该类只能由电子邮件地址或联合身份（取决于应用程序的身份设置）构建。

> 如果使用与有效 Google 帐户不对应的电子邮件地址调用 User 构造函数，则将创建该对象，但它不会与真正的 Google 帐户对应。 [https://developers.google.com/appengine/docs/python/users/userobjects?hl=en](https://developers.google.com/appengine/docs/python/users/userobjects?hl=en)

在您考虑多个电子邮件地址的地方，我认为这可能是可以链接的多个 Google 帐户。使用应用引擎的 Google 身份验证选项时，仍会提示用户选择特定帐户进行身份验证（如果有多个，则从链接帐户列表中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T09:21:08.960

答案是肯定的 - Google 用户 API 返回 Google 帐户的主要电子邮件地址。

# c# - TFS 2010 API Documentation

> ID：13496855
> 
> 赞同：3
> 
> 时间：2012-11-21T15:47:16.247
> 
> 标签：c#, visual-studio-2010, tfs, tfs-sdk

So after countless hours crawling the internet I am unable to find any form of proper API for TFS 2010 for C# (I have not installed any SPs yet) I am unable to find any proper results

I have found the SDK on the Microsoft site but it is for Java for some reason.. Can anyone help me and provide me with some proper documentation, I have found some relating to VS2005 but this all seems to have been removed from the framework as you can no longer import Microsoft.Core

Links to items I have looked at:

*   [http://www.microsoft.com/en-us/download/details.aspx?id=22616](http://www.microsoft.com/en-us/download/details.aspx?id=22616)
*   [http://tfsapiwrapper.codeplex.com/](http://tfsapiwrapper.codeplex.com/) (although this is kind of what I need, I don't hugely want to install random wrappers without a huge amount of information regarding it)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:51:53.717

如果您正在寻找 C# API（可能基于问题标签），则有`Microsoft.TeamFoundation`命名空间。我以前用过。

您需要在项目中包含以下程序集作为引用：

*   `Microsoft.TeamFoundation.Client`
*   `Microsoft.TeamFoundation.Common`

并根据您的具体需求提供以下一项或多项：

*   `Microsoft.TeamFoundation.VersionControl.Client`
*   `Microsoft.TeamFoundation.WorkItemTracking.Client`
*   `Microsoft.TeamFoundation.Build.Client`
*   `Microsoft.TeamFoundation.TestManagement.Client`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:51:23.023

一个好的起点：

1.  [http://msdn.microsoft.com/en-us/library/ms252473.aspx#ObMod](http://msdn.microsoft.com/en-us/library/ms252473.aspx#ObMod)
2.  [http://msdn.microsoft.com/en-us/library/ff732845.aspx](http://msdn.microsoft.com/en-us/library/ff732845.aspx)

都在 .NET 中

我什至不知道有Java API...

# php - php if statement based on previous click through url in Wordpress

> ID：13496856
> 
> 赞同：1
> 
> 时间：2012-11-21T15:47:16.560
> 
> 标签：php, wordpress

I'm trying to write an if statement based on the url of the previously click page_id

Something like this:

```
<?php 
$page_id = " the id or url of the page clicked to get to this page"
if($page_id){
    jr_register_form_jseeker( $redirect, $role ); 
}else{
    jr_register_form( $redirect, $role ); 
}
?> 
```

I've looked at `is_page()` but that only seems to deal with the current page...?

Any ideas..?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:11:54.043

您可以使用`wp_get_referer()`. [在文档](http://codex.wordpress.org/Function_Reference/wp_get_referer)中阅读更多信息。

或者只是打电话给：`$_SERVER['HTTP_REFERER']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:12:49.033

没有返回上一页 id 的 wordpress 函数。但是，您可以使用`$_SERVER['HTTP_REFERER']`. 它应该包含上一页的 ID 作为参数。结合`parse_url`和`parse_str`你应该能够获得ID：

```
parse_str(parse_url($_SERVER['HTTP_REFERER'], PHP_URL_QUERY), $output);
$id = $output['p']; 
```

（未测试）

# javascript - jQuery Date Format [Today/Tomorrow/Yesterday/Month-Day] - 不能让它工作

> ID：13496860
> 
> 赞同：4
> 
> 时间：2012-11-21T15:47:24.903
> 
> 标签：javascript, jquery, date-format

## 我想要实现的是当我在这个函数中输入一个日期时，它应该给我这个：

如果日期是：

今天 - 输出为`Today`
明天 - 输出为`Tomorrow`
昨天 - 输出为`Yesterday`

Else - 输出为“月 - 日”格式

但我无法让它工作。有什么帮助吗？JsFiddle[在这里](http://jsfiddle.net/xqnc8/3/)。

```
//My Date variable
var mydate = "22-Nov-2012"

alert(MDFormat(mydate));

/*
If the date is:
    Today - show as "Today";
    Tomorrow - show as "Tomorrow"
    Yesterday - show as "Yesterday"
    Else - show in "Month - Day format"
*/
function MDFormat(MMDD) {
    MMDD= new Date(MMDD);
    var months = ["Jan", "Feb", "Mar", "Apr", "May", "June", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var day = MMDD.getDate();
    var month = months[MMDD.getMonth()];

    var currentDay = new Date().getDay();
    var today;
    if (currentDay == MMDD.getDay()) {
        today = MMDD.getDay();
    } 
    var tmr = currentDay + 1; 
    var yest = currentDay - 1; 

    var strDate;

    switch (MMDD) {
        case today:
            strDate = "Today";
            break;
        case tmr:
            strDate = "Tomorrow";
            break;
        case yest:
            strDate = "Yesterday";
            break;
        default:
            strDate = month + "-" + day;
            break;
    }

    return strDate;
}​ 
```

**注意**：我更喜欢无插件的方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T18:36:42.233

`getDate`仅适用于有效的预定义日期格式。您使用的不是有效的预定义格式。如果你试试这个：

```
var mydate = "Nov 22, 2012";
alert(MDFormat(mydate)); 
```

有用。

还冒昧地解决了您的逻辑的一些问题：

```
//My Date variable
var mydate = "Nov 22, 2012"

alert(MDFormat(mydate));

/*
If the date is:
    Today - show as "Today";
    Tomorrow - show as "Tomorrow"
    Yesterday - show as "Yesterday"
    Else - show in "Month - Day format"
*/

function MDFormat(MMDD) {
    MMDD = new Date(MMDD);

    var months = ["Jan", "Feb", "Mar", "Apr", "May", "June", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var strDate = "";

    var today = new Date();
    today.setHours(0, 0, 0, 0);

    var yesterday = new Date();
    yesterday.setHours(0, 0, 0, 0);
    yesterday.setDate(yesterday.getDate() - 1);

    var tomorrow = new Date();
    tomorrow.setHours(0, 0, 0, 0);
    tomorrow.setDate(tomorrow.getDate() + 1);

    console.log(MMDD.getTime(),today.getTime(),MMDD.getTime()==today.getTime());

    if (today.getTime() == MMDD.getTime()) {
        strDate = "Today";
    } else if (yesterday.getTime() == MMDD.getTime()) {
        strDate = "Yesterday";
    } else if (tomorrow.getTime() == MMDD.getTime()) {
        strDate = "Tomorrow";
    } else {
        strDate = months[MMDD.getMonth()] + "-" + MMDD.getDate();
    }

    return strDate;
} 
```

演示：http: [//jsfiddle.net/xqnc8/4/](http://jsfiddle.net/xqnc8/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:24:48.933

用[Datejs](http://www.datejs.com/)插件试试 - 它很容易使用。我为您准备了一种可能的解决方案，[http://jsbin.com/otasiz/1/edit](http://jsbin.com/otasiz/1/edit)。下面还有：

```
var downTheRoad = "11/30/2012";
var yesterday = "11/20/2012";
var tomorrow = "11/22/2012";
var today = "11/21/2012";

test(downTheRoad);
test(yesterday);
test(tomorrow);
test(today);

function test(dateStr) {
  var date = Date.parse(dateStr);
  var today = Date.parse("today");
  var todayStr = today.toString("MM/dd/yyyy");
  var tomorrow = Date.parse("tomorrow");
  var tomorrowStr = tomorrow.toString("MM/dd/yyyy");
  var yesterday = Date.parse("yesterday");
  var yesterdayStr = yesterday.toString("MM/dd/yyyy");

  if (dateStr === todayStr) {
    alert(dateStr + " as today");
  } else if (dateStr === tomorrowStr) {
    alert(dateStr + " as tomorrow");
  } else if (dateStr === yesterdayStr) {
    alert(dateStr + " as yesterday");
  }
  else {
    alert(dateStr + " as " + Date.parse(dateStr).toString("MMM-dd"));
  }
} 
```

# jquery - 在jquery中获取按钮之前的文本框

> ID：13496864
> 
> 赞同：1
> 
> 时间：2012-11-21T15:47:36.417
> 
> 标签：jquery, dom

嘿伙计们，我试图在按钮之前获取文本框的值，假设按钮和文本框可以递增，这就是我只使用一个 .click 功能的原因。我是 jquery 的新手，这就是为什么仍在尝试获取它的可能方式。这就是我尝试过的。

```
<html>
<head>
    <style type="text/css">
        #container{
            width:500px;
            height:300px;
            background-color:#F9F9F9;;
        }

    </style>
    <script type="text/javascript" src="jquery-1.8.3.min.js"> </script>
    <script type="text/javascript">     

        $(document).ready(function(){ 
            $('#trigger').click(function (){

            var prev =  $(this).prev('input[type=text]');
            var val = $(prev).val();
            alert(val);
            });

        });
    </script>
</head>

<body>
    <table>
        <tr>
            <td><input type="text"></td>
            <td><input type="button" id="trigger" value="submit"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="button" id="trigger" value="submit"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="button" id="trigger" value="submit"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="button" id="trigger" value="submit"></td>
        </tr>
        <tr>
            <td><input type="text"></td>
            <td><input type="button" id="trigger" value="submit"></td>
        </tr>
    </table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:48:56.493

您需要分配一个公共类，因为 html 元素应该具有唯一的 id。

**[现场演示](http://jsfiddle.net/rajaadil/kaVna/3/)**

```
$('.myclass').click(function() {

    var prev = $(this).parent().prev().find('input[type=text]');
    var val = $(prev).val();
    alert(val);
});​ 
```

如果你想用 id 来做，因为你不能像你有问题的那样使用 class，那么你可以使用 id select 这种方式。

**[现场演示](http://jsfiddle.net/rajaadil/kaVna/5/)**

```
$('[id=trigger]').click(function() {
    var prev = $(this).parent().prev().find('input[type=text]');
    var val = $(prev).val();
    alert(val);
});​ 
```

# python - 将 .py 扩展名转换为可执行文件

> ID：13496868
> 
> 赞同：1
> 
> 时间：2012-11-21T15:47:50.443
> 
> 标签：python

假设我有一个用于计算器应用程序的 main.py。我为不同的函数使用了不同的 .py 文件（add.py 用于加法，mul.py 用于乘法），所有这些文件都导入到 main.py 中。当我单击 main.py 时，它会成功执行并执行所有功能，例如添加、mul 等。我要做的是为 main.py 创建一个可执行文件，以便我可以在没有安装 python 的计算机上运行它或任何该模块（add.py，..）存在于硬盘中。那可能吗？？谢谢您的帮助

最后我得到了解决方案。PyInstaller 在我的情况下运行良好，而且也很容易使用。感谢您的帮助。（：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:51:36.213

我没有 Python 的经验，但是一个简单的谷歌搜索出现了 py2exe

至于独立于操作系统，这是不可能的，这就是解释器的全部意义所在。代码写一次就可以在任何地方运行，但是一旦你编译它，你必须为特定平台编译它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:00:33.957

不可能有在任何操作系统上运行的独立可执行文件，这就是 Python 是解释型语言的原因。您可以做的是使用 pyinstaller 将 Python 脚本编译为您希望它在其上运行的每个操作系统上的可执行文件，这样您就有了一堆不同的独立程序，用于不同的操作系统，它们都构建在同一个 Python 脚本上。

Pyinstaller 比 py2exe 有一个优势，因为它更容易将所有脚本编译到一个文件中，而不是一个目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T16:02:58.587

除了嵌入代码和 Python 可执行文件（如 py2exe 那样）之外，还有其他一些可能的选项（尽管我没有尝试过其中任何一个）。

*   用[Cython 编写](http://cython.org/)并使用编译器为所有目标平台生成可执行文件
*   [用Jython](http://www.jython.org/)编写并生成 .class 文件并在 JVM 上运行
*   [用IronPython](http://ironpython.net/)编写并在 .NET/Mono 上运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T17:53:08.117

就像其他人之前提到的那样，不可能为多个操作系统创建一个可执行文件。如果您的问题是我如何理解它，尝试捆绑几个在主 .py 文件中使用的 .py 文件，那么是的，这可以通过[py2exe](http://www.py2exe.org)实现。您需要创建一个`setup.py`包含以下内容的文件：

```
from distutils.core import setup
import py2exe, sys, os

includes = ['add.py', 'mult.py', 'div.py', 'subt.py']
dll_excludes = ['mswsock.dll', 'powrprof.dll',]

setup(
        console=[{
                'script': 'math.py',
                'name': 'Calculator',
                'version': '1.0',
                'description': 'Basic calculator',
                'author': 'Firstname Lastname'
        }],
        options={
                'py2exe': {
                        'includes': includes,
                        'dll_excludes': dll_excludes,
                        'bundle_files': 1,  # 1 = .exe; 2 = .zip; 3 = separate
                }
        },
        zipfile=None,  # Put libs into .exe to save space.
) 
```

将其保存为之后，您可以通过运行该文件`setup.py`来创建您的 .exe 。`setup.py`

# sql - 在可靠的参考手册中，主键是外键的——这如何工作？

> ID：13496869
> 
> 赞同：1
> 
> 时间：2012-11-21T15:47:51.543
> 
> 标签：sql, recursion, foreign-keys, recursive-query

我有一个来自[The Data Model Resource Book, Vol. 的数据库模式。1](https://rads.stackoverflow.com/amzn/click/com/0471380237) . 里面有一张这样的表：

```
CREATE TABLE [dbo].[AccountingPeriod](
  [AccountingPeriodID] [int] NOT NULL,
  [RoleTypeID] [int] NOT NULL,
  [PeriodTypeID] [int] NOT NULL,
  [AcctgPeriodNum] [int] NOT NULL,
  [FromDate] [smalldatetime] NOT NULL,
  [ThruDate] [smalldatetime] NOT NULL,
  [PartyID] [int] NOT NULL,
PRIMARY KEY CLUSTERED (
  [AccountingPeriodID] ASC) 
```

约束定义为：

```
ALTER TABLE [dbo].[AccountingPeriod]  WITH CHECK ADD FOREIGN KEY([AccountingPeriodID])
REFERENCES [dbo].[AccountingPeriod] ([AccountingPeriodID]) 
```

AccountingPeriodID 列有一个自引用外键，文本声称它是一个递归引用列，但我认为这是一个错误。我想我需要另一列来正确存储此表中的递归引用。提供的表定义能不能实现作者的方法，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:17:42.143

是的，您需要另一列将引用表本身的主键列，以便自引用表。**自引用列真的没有任何意义。**

# java - 定位元素和调整大小的问题

> ID：13496874
> 
> 赞同：0
> 
> 时间：2012-11-21T15:48:07.447
> 
> 标签：java, swing, user-interface, layout, cardlayout

请看下面的代码

**向导面板**

```
package wizardGUI;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class WizardPanel extends JDialog
{
    private JPanel cardPanel, buttonPanel;
    private JButton next,previous;
    private CardLayout c1;

    private FileSelector fileSelector;
    private DelemeterSelector delemeterSelector;

    private int count = 1;

    public WizardPanel()
    {
        //Intializing instance variables
        fileSelector = FileSelector.getInstance();
        delemeterSelector = DelemeterSelector.getInstance();

        cardPanel = new JPanel();
        c1 = new CardLayout();
        cardPanel.setLayout(c1);

        cardPanel.add(fileSelector,"1");
        cardPanel.add(delemeterSelector,"2");

        c1.show(cardPanel, "1");;

        buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

        next = new JButton("Next");
        next.addActionListener(new NextButtonAction());
        previous = new JButton("Previous");

        buttonPanel.add(next);
        buttonPanel.add(previous);

        //Creating the GUI
        this.setLayout(new BorderLayout());
        this.add(cardPanel,"Center");
        this.add(buttonPanel,"South");

        this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        this.setResizable(true);
        this.pack();
        this.setVisible(true);

    }

    private class NextButtonAction implements ActionListener
    {
        public void actionPerformed(ActionEvent ae)
        {

                c1.show(cardPanel, "2");

        }
    }
} 
```

**文件选择器**

```
package wizardGUI;

/*This is the first panel is wazard GUI. Using this window user can select the correct file
  which contains the data required to create the table
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class FileSelector extends JPanel
{
    private JLabel fileName, description;
    private JTextField fileTxt;
    private JButton browse;

    private GridBagLayout gbl;
    private GridBagConstraints gbc;

    private static FileSelector instance = null;

    private FileSelector()
    {
        //Intializing instance variables
        fileName = new JLabel("File Name: ");
        description = new JLabel("Specify the source of the data");

        fileTxt = new JTextField(10);

        browse = new JButton("Browse");

        gbl = new GridBagLayout();
        gbc = new GridBagConstraints();

        //Creating GUI
        this.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.weightx = 0.0;
        gbc.weighty = 0.0;
        gbc.fill = GridBagConstraints.BOTH;
        this.add(description,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(0,10,0,0);
        this.add(locationPanel(),gbc);

        this.setBorder(BorderFactory.createEmptyBorder());
    }

    private JPanel locationPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new FlowLayout());

        panel.add(fileName);
        panel.add(fileTxt);
        panel.add(browse);

        return panel;
    }

    public static FileSelector getInstance()
    {
        if(instance==null)
        {
            instance = new FileSelector();
        }

        return instance;
    }
} 
```

**删除选择器**

```
/*This is the second windows in wizard
This class is designed to let the user to select the delemeter to break information */

package wizardGUI;

import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class DelemeterSelector extends JPanel
{
    private JLabel description;
    private JRadioButton tabBtn, semicolanBtn, commaBtn, spaceBtn;
    private JTextArea txtArea;
    private JScrollPane scroll;
    private ButtonGroup btnGroup;

    private GridBagLayout gbl;
    private GridBagConstraints gbc;

    private static DelemeterSelector instance = null;

    private DelemeterSelector()
    {
        //Initializing instance variables
        description = new JLabel("What delemeter separates your fields? Select the appropreiate delemeter");

        tabBtn = new JRadioButton("Tab");
        semicolanBtn = new JRadioButton("Semicolan");
        commaBtn = new JRadioButton("Comma");
        spaceBtn = new JRadioButton("Space");

        btnGroup = new ButtonGroup();
        btnGroup.add(tabBtn);
        btnGroup.add(semicolanBtn);
        btnGroup.add(commaBtn);
        btnGroup.add(spaceBtn);

        txtArea = new JTextArea(20,70);

        scroll = new JScrollPane(txtArea);

        gbl = new GridBagLayout();
        gbc = new GridBagConstraints();

        this.setLayout(gbl);

        //Creating the GUI
        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(20,0,0,0);
        this.add(description,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(20,0,0,0);
        this.add(radioPanel(),gbc);

        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.insets = new Insets(10,0,0,0);
        gbc.fill = GridBagConstraints.BOTH;
        this.add(scroll,gbc);
    }

    private JPanel radioPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new FlowLayout());

        panel.add(tabBtn);
        panel.add(semicolanBtn);
        panel.add(commaBtn);
        panel.add(spaceBtn);

        panel.setBorder(BorderFactory.createTitledBorder("Choose the Delimeter that seperates your fields"));

        return panel;
    }

    public static DelemeterSelector getInstance()
    {
        if(instance == null)
        {
            instance = new DelemeterSelector();
        }

        return instance;
    }
} 
```

当我运行代码时，“FileSelector”看起来真的很难看。我希望所有内容都出现在窗格的顶部，但相反，所有内容都出现在中间！我什至尝试过`GridBagLayout`使其可调整大小的选项，但它也失败了。它的外观在附图中

![在此处输入图像描述](../Images/a59b6cda0baf501fe6286471ea90e3d3.png)

我怎样才能让它看起来漂亮和可扩展？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:35:50.963

在这种情况下，`fill`约束不是必需的。另外，`gridx`从`gridy`0 开始。这个示例代码

```
 gbc.anchor = GridBagConstraints.NORTHWEST;
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.insets = new Insets(10,0,0,0);
    this.add(description,gbc);

    gbc.gridx = 0;
    gbc.gridy = 1;
    gbc.weighty = 1;
    gbc.insets = new Insets(0,10,0,0);
    this.add(locationPanel(),gbc); 
```

产生这个

![在此处输入图像描述](../Images/a9c777967444fb52618aea80f736d17e.png)

不确定这是否是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:00:35.647

只是一个显示相同行为和修复的快速示例，不需要所有外部代码（[SSCCE](http://sscce.org)）

```
import javax.swing.*;
import java.awt.*;

public class CardLayoutDemo {

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "TestFrame" );

        CardLayout cardLayout = new CardLayout();
        JPanel contentPane = new JPanel( cardLayout );

        JPanel firstPanel = new JPanel(  );
        firstPanel.setLayout( new BorderLayout(  ) );
        firstPanel.add( new JLabel( "Contents" ) );

        //wrap the smallest panel instead of directly adding it
        contentPane.add( firstPanel, "first" );
//        JPanel wrappedPanel = new JPanel( new BorderLayout(  ) );
//        wrappedPanel.add( firstPanel, BorderLayout.NORTH );
//        contentPane.add( wrappedPanel, "first" );

        JPanel secondPanel = new JPanel( new BorderLayout(  ) );
        secondPanel.add( new JComponent() {
          @Override
          public Dimension getPreferredSize() {
            return new Dimension( 500, 500 );
          }
        }, BorderLayout.CENTER );
        contentPane.add( secondPanel, "second" );

        cardLayout.show( contentPane, "first" );

        frame.setContentPane( contentPane );
        frame.pack();
        frame.setDefaultCloseOperation( WindowConstants.DISPOSE_ON_CLOSE );
        frame.setVisible( true );
      }
    } );
  }
} 
```

当您在不进行更改的情况下运行代码时，它会显示一个面板，其中内容居中（`firstPanel`）。无需对 进行任何更改`firstPanel`，只需将其包装起来，您就可以将其保持在顶部。只需将`contentPane.add( firstPanel, "first" )`下面的 3 行（在注释中）替换。

很多时候，[嵌套布局](https://stackoverflow.com/a/5630271/1076463)可以更容易地获得所需的结果，imo 这就是其中之一。

# c# - 如果覆盖 0-9，则减少整数

> ID：13496878
> 
> 赞同：1
> 
> 时间：2012-11-21T15:48:20.783
> 
> 标签：c#, algorithm, compression

在 c# 中对整数数组执行以下操作（可能更好地将它们视为字符串）的最佳解决方案是什么：

**示例 1：**

数组包括：

```
440 - 441 - 442 - 443 - 444 - 445 - 446 - 447 - 448 - 449 - 51 - 9876 
```

结果应该是：

```
44 - 51 - 9876 
```

应用规则 441 到 449 替换为 44，因为我们有完整的 0 - 9 集

**示例 2**

数组包括：

```
440 - 441 - 442 - 443 - 444 - 445 - 446 - 447 - 448 - 449 - 40 - 41 - 42 - 43 - 45 - 46 - 47 - 48 - 49 
```

结果应该是：

```
4 - 51 - 9876 
```

应用规则：首先将 3 个字符串（所有以 44 开头的字符串）减少到 44，然后相同的规则将 40 减少到 49 到 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T22:50:40.267

懒惰只使用 LINQ 怎么样？

```
int[] arr1 = { 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 51, 9876 };

// This is just one reduction step, you would need loop over it until
// no more reduction is possible.
var r = arr1.GroupBy(g => g / 10).
        SelectMany(s => s.Count() == 10 ? new int[] {s.Key} : s.AsEnumerable()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:02:51.233

这是一个使用排序数据结构但保存一些排序的解决方案

伪代码：

```
numbers //your array of number
sortedSet //a sorted data structure initially empty

function insertSorted (number) {
  sortedSet.put(number) //simply add the number into a sorted structure
  prefix = number / 10 //prefix should be int to truncate the number

  for (i=0;i<10;i++){
    if ( ! sortedSet contains (prefix * 10 + i) )
      break; //so i != 10, not all 0-9 occurrences of a prefix found
  }
  if ( i== 10 ) {//all occurrences of a prefix found
    for (i=0;i<10;i++){
      sortedSet remove (prefix*10 + i)
    }
    insertSorted(prefix) //recursively check if the new insertion triggered further collapses
  }
} 
```

最后我会这样打电话：

```
foreach number in numbers
  insertSorted (number) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:30:01.440

创建一个十分支索引树，记录每个节点的子节点数。然后浏览树，停在子编号为 10 的节点处。

# android - 如果 wrap_content 并保留旧图像，ImageLoader 类显示图像要小得多

> ID：13496885
> 
> 赞同：1
> 
> 时间：2012-11-21T15:48:44.077
> 
> 标签：android, image, android-asynctask, lazy-loading, android-imageview

我在 ImageLoader 中遇到了延迟加载图像的问题。

1.  如果我将图像设置为 wrap_content，图像大小会非常小。
2.  即使我更改了新图像文件，图像仍会显示旧图像。

有人得到帮助或提示吗？

这是 ImageLoader.java

```
package hk.com.softmax.listview_softmax;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Collections;
import java.util.Map;
import java.util.WeakHashMap;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.widget.ImageView;

public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    final int stub_id=R.drawable.stub;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Throwable ex){
           ex.printStackTrace();
           if(ex instanceof OutOfMemoryError)
               memoryCache.clear();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            FileInputStream stream1=new FileInputStream(f);
            BitmapFactory.decodeStream(stream1,null,o);
            stream1.close();

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            FileInputStream stream2=new FileInputStream(f);
            Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
            stream2.close();
            return bitmap;
        } catch (FileNotFoundException e) {
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            try{
                if(imageViewReused(photoToLoad))
                    return;
                Bitmap bmp=getBitmap(photoToLoad.url);
                memoryCache.put(photoToLoad.url, bmp);
                if(imageViewReused(photoToLoad))
                    return;
                BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
                Activity a=(Activity)photoToLoad.imageView.getContext();
                a.runOnUiThread(bd);
            }catch(Throwable th){
                th.printStackTrace();
            }
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T05:45:22.277

您需要调整 REQUIRED_SIZE。现在它设置为 70。如果希望您的图像显示更大，请将大小增加到更大的数字。试试 256 或 512。

# java - jsp:param 与 Java 类

> ID：13496889
> 
> 赞同：14
> 
> 时间：2012-11-21T15:48:54.807
> 
> 标签：java, jsp, include, parameter-passing, param

我有一个包含另一个 JSP 文件的 JSP 文件。第一个 JSP 应该将 Java 类（小部件）的实例传递给第二个 JSP 文件。

这就是我所拥有的：

第一个 JSP：

```
<jsp:include page="/container/SpecialWidget.jsp">
     <jsp:param name="widget" value="${widget}"/> // widget is a .Java POJO
</jsp:include> 
```

第二个JSP：

```
${param.widget.id} 
```

问题是这段代码给出了一个错误（它说它不知道 ID）。如果我省略“.id”部分，页面将打印 Java 类的 Java 代码，这意味着该类已正确传输。如果我更改第一页的 ${widget} 规则，例如 ${widget.id} 并尝试打印 ${param.widget}，一切正常。

我的问题：为什么我不能传递一个 Java 类并直接调用它的属性？我究竟做错了什么？

编辑：错误消息：原因：javax.el.PropertyNotFoundException：在 java.lang.String 类型上找不到属性“id”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T09:59:39.360

我设法用以下代码解决了我的问题：

```
<c:set var="widget" value="${widget}" scope="request" />
<jsp:include page="/SOMEWHERE/SpecialWidget.jsp"/> 
```

谢谢你们的帮助：）它拯救了我的一天

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T16:05:18.970

当您传递变量`${widget}`时，它会在请求时转换为字符串 ( `widget.toString()`)。然后将该值作为字符串传递给第二个 JSP，而不是作为原始 java 对象。

访问对象值的一种方法是使用属性值设置参数值：

```
<jsp:param name="widgetId" value="${widget.id}"/> 
```

然后在第二个 JSP 上使用下面的代码：

```
${param.widgetId} 
```

您还可以将小部件设置为请求**属性**，并在第二页上将其用作`${widget.id}`或 ${request.widget.id}。我建议你使用第二种方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-21T15:54:31.310

`<jsp:param>`将参数作为 HTTP 请求参数传递，该参数只能是 String。在您的小部件上调用so `toString()`，并将此方法的结果作为参数传递。

您应该使用作为标记文件实现的 JSP 标记，而不是使用 JSP 包含。请参阅[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)了解如何定义使用它们。

例如：

标签定义，在 /WEB-INF/tags/specialWidget.tag 中：

```
<%@ tag %>
<%@ attribute name="widget" required="true" type="the.fully.qualified.name.of.WidgetClass" %>
TODO: add the HTML markup that must be displayed, using ${widget} to access the passed in widget attribute 
```

标记用法，在任何 JSP 中：

```
<%@ taglib prefix="myTags" tagdir="/WEB-INF/tags" %>
...
Tada! I will use the specialWidget tag here, with widget as an attribute:
<myTags:specialWidget widget="${widget}"/> 
```

# ruby-on-rails - Rails 3：验证关联并向用户完美展示验证

> ID：13496893
> 
> 赞同：5
> 
> 时间：2012-11-21T15:49:07.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

拳头，我正在使用 rails 3.0.9 和 ruby​​ 1.8.7。我需要一些帮助，因为我无法验证并在屏幕上完美地向我的用户展示。

该模型：

```
class Book < ActiveRecord::Base
    belongs_to :genre
    validates_presence_of :title, :genre
    attr_accessible :genre_id
end 
```

表格：

```
<div class="field">
    <%= f.label :genre %><br />
    <%= f.collection_select(:genre_id, Genre.all(:order => :name), :id, :name, :prompt => 'Select') %>
</div> 
```

当我以空白形式发送表单（默认选择提示值）时，错误消息完美显示“类型不能为空白”，但在表单中我收到的 html 如下：

```
<div class="field">
    <div class="field_with_errors">
        <label for="book_genre">Genre</label>
    </div>
    <br>
    <select name="book[genre_id]" id="book_genre_id">
        <option value="">Select</option>
        <option value="2">Gramatic</option>
        <option value="1">Terror</option>
    </select>
</div> 
```

我也需要 div.field_with_erros 中的选择字段，因为我在 CSS 中定义的红色背景。

之后我尝试将 f.collection_select :genre_id 更改为 :genre

现在我得到了 div.field_with_erros 中的选择字段。Owwww 是的，胜利了一会儿，直到我意识到验证总是指责错误，rails 不知道选择字段 :genre 是它寻找的 :genre_id 。

我的问题是：如何在验证中将 :genre 更改为 :genre_id？或者你们都有更好的方法来做到这一点？

继续进行测试我尝试将标签和collection_select更改为genre_id并且验证工作完美但没有使用div.field_with_errors生成html所以我尝试将:genre_id放在validates_presence_of中所以现在它看起来像：“validates_presence_of:title , :流派, :genre_id”。

很好，但是...

1.  当我提交表单并选择默认提示值时，验证工作正常，但他们指责 2 个错误，一个到 :genre，另一个到 :genre_id (¬¬) 但 html 很好，标签和选择在 div 内.field_with_erros。

2.  如果我提交表单并从类型中选择了一些值，则验证和 html 就可以了。

3.  如果我提交了表单，但我将某个选项的值更改为一个无效，以测试模型之间的验证是否有效，则验证确实可以正常工作，但 html 没有创建 div.field_with_erros。

任何人都可以帮助我，好吗？（是的，我的英语不是最好的。对不起！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:24:24.970

我创建了一些脚手架模型来测试这一点。我设置了 2 个迁移：

```
class CreateGenres < ActiveRecord::Migration
  def change
    create_table :genres do |t|
      t.string :title
      t.timestamps
    end
  end
end

class CreateBooks < ActiveRecord::Migration
  def change
    create_table :books do |t|
      t.string :name
      t.references :genre
      t.timestamps
    end
  end
end 
```

以我的形式：

```
<%= f.label :genre_id %>
<%= f.collection_select(:genre_id, Genre.all(:order => :title), :id, :title, :prompt => 'Select') %> 
```

在我拥有的模型中：

```
class Genre < ActiveRecord::Base
  attr_accessible :title
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :genre
  validates_presence_of :name, :genre_id
  attr_accessible :name, :genre_id
end 
```

然后验证按我的预期工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T17:32:11.233

我没有找到解决此问题的任何方法，并决定只检查视图中的错误：

```
<% if f.object.errors.include?(:genre) %>
  <div class='field_with_errors'> 
<% end %>
// :genre field
<% if f.object.errors.include?(:genre) %>
  </div> 
<% end %> 
```

一些链接：

1.  [http://railsguides.net/belongs-to-and-presence-validation-rule1/](http://railsguides.net/belongs-to-and-presence-validation-rule1/)为什么不验证`id`关联本身的存在。
2.  [https://github.com/frank-west-iii/association_validations](https://github.com/frank-west-iii/association_validations)在验证`id`或关联方面的差异。
3.  [http://iada.nl/blog/article/rails-tip-display-association-validation-errors-fields](http://iada.nl/blog/article/rails-tip-display-association-validation-errors-fields)劫持 Rails 方法

# mysql - mysql：锁定表但没有打开

> ID：13496896
> 
> 赞同：1
> 
> 时间：2012-11-21T15:49:16.290
> 
> 标签：mysql

我有一张桌子：

```
mysql> show status like '%\_locks\_%';
+-----------------------+-------+
| Variable_name         | Value |
+-----------------------+-------+
| Table_locks_immediate | 59137 |
| Table_locks_waited    | 1     |
+-----------------------+-------+
2 rows in set (0.00 sec) 
```

我用[它](https://stackoverflow.com/questions/3230693/get-locked-tables-in-mysql-query)来看看它是什么，但没有打开任何东西：

```
mysql> show open tables WHERE In_use > 0;
Empty set (0.00 sec) 
```

这是正常的吗？有什么技巧可以查看这里锁定的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:59:03.023

> 您可以通过检查 Table_locks_immediate 和 Table_locks_waited 状态变量来分析系统上的表锁争用情况，它们分别指示可以立即授予表锁请求的次数和必须等待的次数。

这是容量，实际上有多少人必须等待一次

# ios - IOS Phonegap - 背景颜色上的文本变成双字

> ID：13496897
> 
> 赞同：0
> 
> 时间：2012-11-21T15:49:18.550
> 
> 标签：ios, css, cordova, webkit

在我的 iphone phonegap 应用程序上，每当我在背景颜色上显示文本时，文本似乎会产生重影效果，相同的文本在下方重复 2 或 3 个像素，几乎就像一个投影，但正好在下方且颜色相同作为文本。

任何想法如何摆脱这个？我猜它应用了某种 -webkit 特定样式，但我似乎找不到它是什么。

下面是正在发生的事情的图像，左边的文字，“网络交易”是问题，而右边的文字很好。

![在此处输入图像描述](../Images/2e52360ab872ceb7f414438e3a80d1c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:40:05.350

好的，我设法解决了这个问题，它从 jquery mobile css 中获取了一个 text-shadow 属性。它将它应用于所有文本，但因为它是白色的，所以它只在具有背景颜色的文本上可见。谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:45:54.923

请发布您的CSS。

如果您能够在桌面上的 Chrome 浏览器上打开该应用程序，请尝试检查元素，您可以找到应用于文本的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T13:22:06.360

由于您没有提供任何 CSS，我将假设您的文本呈现为粗体。在移动 Safari 或 WebView 中呈现粗体字是错误的，并导致奇怪的效果。

尝试改用文本阴影。

```
.bold {
  //font-weight: bold;
  text-shadow: 0 0 0 2px white;
} 
```

# objective-c - 计算 NSString 中大写字母和数字的出现次数

> ID：13496900
> 
> 赞同：4
> 
> 时间：2012-11-21T15:49:24.610
> 
> 标签：objective-c, nsstring

在 PHP 中，我使用以下代码...

```
$passwordCapitalLettersLength = strlen(preg_replace("![^A-Z]+!", "", $password));
$passwordNumbersLength = strlen(preg_replace("/[0-9]/", "", $password)); 
```

...计算密码中出现了多少次大写字母和数字。

在 Objective C 中这个等价物是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T15:57:52.613

您可以使用`NSCharacterSet`：

```
NSString *password = @"aas2dASDasd1asdASDasdas32D";
int occurrenceCapital = 0;  
int occurenceNumbers = 0;
for (int i = 0; i < [password length]; i++) {
    if([[NSCharacterSet uppercaseLetterCharacterSet] characterIsMember:[password characterAtIndex:i]])
       occurenceCapital++;

    if([[NSCharacterSet decimalDigitCharacterSet] characterIsMember:[password characterAtIndex:i]])
       occurenceNumbers++;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:09:01.443

这可以使用 和 的功能相当简洁地完成`NSString`，`NSCharacterSet`而不需要手动迭代。

*需要减 1，因为`componentsSeparatedByCharactersInSet:`总是会返回至少一个元素，并且该元素不会计算您的分离。*

```
NSString* password = @"dhdjGHSJD7d56dhHDHa7d5bw3/%£hDJ7hdjs464525";

NSArray* capitalArr = [password componentsSeparatedByCharactersInSet:[NSCharacterSet uppercaseLetterCharacterSet]];
NSLog(@"Number of capital letters: %ld", (unsigned long) capitalArr.count - 1);

NSArray* numericArr = [password componentsSeparatedByCharactersInSet:[NSCharacterSet decimalDigitCharacterSet]];
NSLog(@"Number of numeric digits: %ld", (unsigned long) numericArr.count - 1); 
```

**原始答案：**虽然您提供的代码不会涵盖所有基础，但如果出于安全/风险原因需要继续使用这些正则表达式，您可以在下面这样做。

您可以在 Objective-C 中使用 RegEx。保存手动迭代字符串，并保持代码简洁。这也意味着因为您没有手动迭代，您可能会获得性能提升，因为您可以让编译器/框架编写者对其进行优化。

```
// Testing string
NSString* password = @"dhdjGHSJD7d56dhHDHa7d5bw3/%£hDJ7hdjs464525";

NSRegularExpression* capitalRegex = [NSRegularExpression regularExpressionWithPattern:@"[A-Z]"
                                                                              options:0
                                                                                error:nil];
NSRegularExpression* numbersRegex = [NSRegularExpression regularExpressionWithPattern:@"[0-9]"
                                                                              options:0
                                                                                error:nil];

NSLog(@"Number of capital letters: %ld", (unsigned long)[capitalRegex matchesInString:password
                                                                              options:0
                                                                                range:NSMakeRange(0, password.length)].count);
NSLog(@"Number of numeric digits: %ld", (unsigned long)[numbersRegex matchesInString:password
                                                                             options:0
                                                                               range:NSMakeRange(0, password.length)].count); 
```

# c# - 如何在 C# 中限制 for 循环

> ID：13496908
> 
> 赞同：0
> 
> 时间：2012-11-21T15:49:50.297
> 
> 标签：c#, for-loop

我在下面有这段代码，但是我只希望它在字符串中最多显示 15 个字符。我该怎么做呢？

```
string star = "";
for (int i = 0; i < Model.orgInternalcontact.User.Password.Length; i++)
{
     string mem = "*";
     star = star + mem;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T15:51:26.337

```
string star = "";
for (int i = 0; i < Model.orgInternalcontact.User.Password.Length && i < 15; i++)
{
     string mem = "*";
     star = star + mem;
} 
```

你可以在 for 的第二部分有任何条件语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T15:52:10.393

```
string star = new string('*', 
     Math.Min(Model.orgInternalcontact.User.Password.Length, 15)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T15:51:30.063

请执行下列操作：

```
string star = "";
for (int i = 0; i < Math.Min(15, Model.orgInternalcontact.User.Password.Length); i++)
{
     string mem = "*";
     star = star + mem;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T15:51:38.083

```
string star = "";
for (int i = 0; i < Model.orgInternalcontact.User.Password.Length && i < 15; i++)
{
     string mem = "*";
     star = star + mem;
} 
```

您可以在语句中进行多次比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T15:52:59.797

```
string star = "";
string mem = "*";
var count = Math.Min(15, Model.orgInternalcontact.User.Password.Length);
for (int i = 0; i < count ; i++)
{
     star = star + mem;
} 
```

# windows-8 - WinJS ListView 自动调整大小

> ID：13496925
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:23.073
> 
> 标签：windows-8, winjs

我想在 WinJS 中显示一个 ListView，它从不显示它自己的滚动条。我希望它水平地增长到它的父容器中。我实现它的方式基本上是通过在 ListView 上设置 min-width css 属性。在初始加载时，这完美无缺。当附加数据加载到支持数据源（在本例中为 WinJS.Binding.List）时，我希望 ListView 绘制元素并调整自身大小。相反，ListView 绘制元素并添加自己的滚动水平条。大约一两秒后，ListView 突然自动调整大小并适合父容器。

添加元素后如何立即调整大小？强制布局不起作用，因为它会重绘每一个项目，并且我在这个 ListView 中填充了很多元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:11:39.443

我使用了一种我发现的关于[如何检测](https://stackoverflow.com/questions/2059743/detect-elements-overflow-using-jquery)div 溢出的技术。基本上，在添加所有新数据项后，我确保增加 ListView 的父 div 的大小，直到 ListView div 不再溢出。

编辑：所以最后我决定反对这个策略，因为这篇文章的建议。我查看了内置的 Grid 项目模板，并弄清楚了如何确保列表视图正确地适合整个屏幕。我使用了以下 CSS。

```
#listid{
    height: 100%;
    position: relative;
    width: 100%;
    z-index: 0;
}
#section[role=main]{
    margin-left: 0;
}

#listid .win-horizontal.win-viewport .win-surface {
    margin-left: 120px;
    margin-right: 115px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:07:38.117

我同意 Dominic 的观点，您应该尝试在 listview 控件上收听 loadingStateChanged 事件。它有可能不会立即触发，在这种情况下，我会在您的列表中显示进度元素并等待它重绘，然后删除进度。

# javascript - javascript and html character escaping

> ID：13496926
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:25.523
> 
> 标签：javascript, html, encoding, escaping

I have this problem: I have a javascript, saved in a database field, that is going to be used in a web page as a href target, e.g.

```
insert into table_with_links (id, url) 
       values (1, 'javascript:var url="blö blö";.....');

// run scripts that use the database values to generate web pages

// part of the generated html code:
<a href="javascript:var url='blabla';..... </a> 
```

So far no problems. I have german letters (Umlaute - e.g. **ö**) in the javascript. I shouldn't save the german letters in the database, so I escape them:

```
insert into table_with_links (id, url) 
       values (1, 'javascript:var url="bl%F6 bl%F6";.....'); 
```

Now comes the problem - I shouldn't store the **%** sign in the database either, because the scripts that generate the web pages cannot handle it properly. I guess you can imagine how these scripts are 3-rd party scripts and cannot be changed.

So, my question is - **can I also escape the % sign?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:03:27.110

你试过这个吗？：

```
var str= "remove the %";
var str_n = str.replace("%",""); 
```

这里是基础[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

然后你可以使用一个字符数组来替换看看这里[javascript replace global with array](https://stackoverflow.com/questions/2064047/javascript-replace-globally-with-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T16:06:19.970

我建议使用 oracle 的内置国际化功能，Oracle 能够处理特殊的德语字符：

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_i18n.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_i18n.htm)

如果您想自己处理它，我建议对您知道的某个序列进行字符串替换：

```
var str = str.replace(/ö/g,"[german-umlaute]"); 
```

（/ö/g 末尾的 g 是替换字符串中所有出现的地方）

# c# - 使用反射来获取比较为空的字段/属性？

> ID：13496929
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:31.283
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0, log4net

我如何知道日志中最后一个为空的属性？

例如，

```
var a = "somevalue";
......
......
if(a == null)
{
   Log.Error(MethodBase.GetCurrentMethod().Name  + "Property : a is null");      

   //blah blah
} 
```

就像我如何使用反射来获取当前方法名称一样，应该有一些方法可以记录正在比较的最新局部变量（或属性或字段）？顺便说一下，我使用 log4net 来记录错误。

1）有什么方法可以实现这一点还是我们应该手动记录它？

2) 是否有任何自定义方法可以打印为空的类 -> MethodName -> Propertyname(或 FieldName)？

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:07:19.323

正如@fsimonazzi 所提到的，“a”将是一个局部变量。

话虽如此，仍然没有办法检查当前的比较操作，因为在 MSIL 中没有 IF 块的正式概念 - 只有条件跳转。

如果您想对反射感到非常疯狂，您也许可以找到当前正在执行的指令并在其附近四处寻找变量，但即便如此，您也不会找到名称 - 只是一个参考 - 因为名称仅用于在编译之前。

无论哪种方式，反思在这里都不会帮助你。

相反，请尝试使用 Exceptions - 特别是[ArgumentNullException](http://msdn.microsoft.com/en-us/library/system.argumentnullexception.aspx)。这段代码将变为：

```
void doStuff(string param1, int param2)
{
    if (param == null)
        throw new ArgumentNullException("param1", "param1 must not be null");
    if (param2 < 0)
        throw new ArgumentOutOfRangeException("param2", "param2 should be non-negative.");

    //method body
} 
```

然后，当您调用该方法时，您可以捕获异常并记录它——不管它是什么。

```
public static void Main(string[] args)
{
    try 
    {
        doStuff(null, 3);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
} 
```

[FxCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)等工具可以帮助确保您正确验证每个参数。

* * *

属性实际上是作为方法实现的，因此反射可以帮助您。例如，如果您正在验证一个属性并希望自动记录该位置，那么您可以。

```
private object _cachedObject = null;
public object CachedObject 
{
    get 
    {
        if (_cachedObject == null)
        {
            log(MethodBase.GetCurrentMethod().Name, "creating cached object");
            _cachedObject = createCachedObject();
        }
        return _cachedObject;
    }
} 
```

* * *

.Net Framework 4.5 还带来了一个新属性，可用于替换`MethodBase.GetCurrentMethod().Name`您用于获取方法名称的构造。见`[CallerMemberNameAttribute][3]`。

# c# - 调用基于 PHP 的 web 服务

> ID：13496932
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:33.947
> 
> 标签：c#, web-services

我正在开发一个用 C# 构建的 asp.net web 应用程序。我必须实现使用 PHP 创建的第三方 Web 服务。这是一个非常简单的服务，只包含一个功能。我使用 wsdl 添加了服务引用，到目前为止一切顺利。

当我使用正确的参数调用 Web 服务函数时，它总是返回 null。我开始使用 SoapUI 进行故障排除。我从应用程序中捕获了肥皂消息并将其粘贴到 SoapUI 中，执行它并返回正确的消息。使用 Fiddler，我在来自 web 服务的响应中发现了一些奇怪的东西，如原始输出所示：

```
HTTP/1.1 200 OK
Date: Wed, 21 Nov 2012 15:24:31 GMT
Server: Apache/2.2.16 (Unix) mod_ssl/2.2.16 OpenSSL/0.9.8o
X-Powered-By: PHP/5.2.13-pl1-gentoo
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=ddc342cfe7e56e77456fe31b758bf3de; path=/
Vary: Accept-Encoding,User-Agent
Content-Encoding: gzip
Content-Length: 812
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/xml; charset=utf-8

?????????KS?0???`r?~?<???   ?I
I?????0??+?.????kK.????[E?????[???????}??g4
?1J???~w?i??<?M?+w??[>]ziIc???.?
???yvi?"x?  F??d?Y?aR,4?X?
[UQ^F)?$`?
7??[?F"?$??h???S?a??4??Q?E??6Td,t6%Hg??w/)??????]??G*   ?l[??&6?0?$??>??????~?????:??6??W#?a????E?G?
s??Z????§o?_??c??\???-???)?????cc??w???/??f??}?)??r???????T?/???    m??K??8?    ?X?/F8?<???:?m???&f ?Z#[31?*?X,c?Z??0h"??aFb.?<??p??a???Q?B?r>????Z??5??6???????n\y?d?.??\??Hc]??
Z,?x??l???g?Q?*&???1?)??????^?????v??pQ???_y~??%??????*?
>???;??6?+?>???RQq?????a?(?Z????C?5???G??Ce??H?9??xYL|"??i?
e8?Vk???s???AK^?e~??
??(??Lt???r???vs????7??d?w???Jj-B????pt????c??MBi?s)Mo?.??^?aB3?x8&??:_K|???5???)[?M?Xc?j?zX?=G?i/??TO???g????5??c0??w???T?? 
```

标题显示正确。响应已编码，需要解码。SoapUI 和 Fiddler 都能够解码响应，但代理类不能并返回 null。

我该如何克服这个问题？任何帮助是极大的赞赏！

**编辑：**

服务调用方式：

```
LisenceServiceFR.ServiceRegistration_PortTypeClient client = new LisenceServiceFR.ServiceRegistration_PortTypeClient();
LisenceServiceFR.aVehicleInfo info = client.getVehicleInfo("xxx", "xxx", licensePlate, "localhost"); 
```

**编辑2：**

来自 Fiddler 的响应 XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://services.audaconfr.com/ServiceRegistration.wsdl">
    <SOAP-ENV:Body>
        <SOAP-ENV:getVehicleInfoResponse>
            <aVehicle>
                <ns1:errorCode>200</ns1:errorCode>
                <ns1:errorMessage>Success</ns1:errorMessage>
                <ns1:vehicleXml>
            &lt;vehicule&gt;
                &lt;carr&gt;MONOSPACE COMPACT&lt;/carr&gt;
                &lt;carr_cg&gt;CI&lt;/carr_cg&gt;
                &lt;co2&gt;152&lt;/co2&gt;
                <!-- etc -->
            &lt;/vehicule&gt;
        </ns1:vehicleXml>
            </aVehicle>
        </SOAP-ENV:getVehicleInfoResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:16:44.643

我最终使用 HttpWebRequest 来调用网络服务：

```
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
doc.InnerXml = xml;
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(endPoint);
req.Timeout = 100000000;

if (proxy != null)
    req.Proxy = new WebProxy(proxy, true);

req.Headers.Add("SOAPAction", "");
req.ContentType = "application/soap+xml;charset=\"utf-8\"";
req.Accept = "application/x-www-form-urlencoded"; 
req.Method = "POST";
Stream stm = req.GetRequestStream();
doc.Save(stm);
stm.Close();
WebResponse resp = req.GetResponse();
stm = resp.GetResponseStream();
StreamReader r = new StreamReader(stm);
string responseData = r.ReadToEnd();

XDocument response = XDocument.Parse(responseData);

/* extract data from response */ 
```

这不是我正在寻找的解决方案，但它就像一个魅力。

# ios - 将程序化 uiscrollview 更改为 IB

> ID：13496938
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:46.243
> 
> 标签：ios, xcode, uiscrollview

这里有点小问题。我一直在关注本教程，该教程使用 uiscrollview 创建了一个自动滚动幻灯片。这段代码用于我的 viewdidload -

```
UIScrollView *scr=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 120, 320, 180)];
scr.tag = 1;
scr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:scr];
[self setupScrollView:scr];
UIPageControl *pgCtr = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 280, 320, 60)];
[pgCtr setTag:12];
pgCtr.numberOfPages=10;
pgCtr.autoresizingMask=UIViewAutoresizingNone;
[self.view addSubview:pgCtr]; 
```

如您所见，以编程方式创建了一个小的 uiscrollview，它是 320x180。它完美地工作，除了我的 UI 有另一个 uiscrollview 占用整个 ui，大约为 320x700。我需要将这个以编程方式创建的滚动视图嵌入其中，有什么想法吗？或者，我需要使用情节提要创建自己的滚动视图并使用代码将其链接起来，但不知道我将如何去做。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:54:36.483

您必须将滚动视图嵌入滚动视图而不是主视图

```
[self.scrollView addSubview:scr]; 
```

# migration - PowerBuilder compatibility on Windows 7

> ID：13496939
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:48.523
> 
> 标签：migration, powerbuilder, powerbuilder-build-deploy

I'm having problems migrating a PowerBuilder application from XP to Windows 7\.

We've built the application in PowerBuilder on Windows XP, and when we attempt to install components in to component services on Windows 7 machines, we get compatibility errors. Everything works great on Windows XP. But I think because the DLL's on 7 are so different, it's having problems.

If the program was built using a PowerBuilder IDE in a Windows 7 environment, would that possibly fix the problem?

The application is divided into
- a server component running on Server 2003
- a client component which installs sucessfully on Win7
- proxy components that are generated into an MSI when the server components are installed.

The problem is only the proxy. The MSI doesn't want to work on Windows 7\. Without the proxy installed on the client desktops, the client can't communicate with the server.

When I run the MSI in compatibility mode on Windows 7, I get some details of the error. Here they are

> Program Compatibility Issues found Incompatible Application Fix application CCS_Proxy_XP_Exports
> 
> Issues found Incompatible Application CCS_Proxy_XP_Exports is incompatible.
> 
> Fix application CCS_Proxy_XP_Exports Provides steps to fix the incompatible application. CompatMode CompatMode UserVerifySolution User Verification of Solution Verify_NO
> 
> Detection details Collection information Computer Name: ########## Windows Version: 6.1 Architecture: amd64 Time: Wednesday, November 14, 2012 11:56:36 AM
> 
> Publisher details Program Compatibility Make older programs run in this version of Windows. Package Version: 1.5 Publisher: Microsoft Windows
> 
> Program Compatibility Make older programs run in this version of Windows. Package Version: 1.0 Publisher: Microsoft Corporation

If I view more details on the event log, I get the following

> “Product: Client Communications (Application Proxy) -- Error 1928. Error registering COM+ Application. Contact your support personnel for more information.”</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:49:23.390

以为，您的代理 exe/dll 文件没有清单或清单不包含兼容性部分。尝试将[兼容性信息](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371711%28v=vs.85%29.aspx)添加到清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:38:58.283

## 大概的概念

其实win7平台上的dll和之前的没什么区别。现在存在于 WinSxS dll-hell 目录中的多个不同的 C 运行时可能存在差异，但这不应该影响 powerbuilder（正如我可以从我的 11.5 经典发布体验中说的那样）。

我怀疑您可能有一些与 UAC 和/或 ACL 管理相关的问题。我最近通过添加对 Vista / Win7 规范的兼容性来升级一些旧的 PB 应用程序。

简而言之：应用程序必须在不需要管理权限的情况下运行，并且不得尝试在`c:\`或等特权位置修改数据`c:\windows`。

因此，所有东西都不能再安装在`program files`目录中。应用程序二进制文件可以部署在其中，`program files`但如果应用程序需要创建/修改某些文件，则必须将它们部署在`ProgramData`用户共享数据的子目录和/或私有数据的本地用户数据文件中。必须修改应用程序才能在正确的目录中创建或查找文件。如果不遵守标准，文件虚拟化机制可以隐藏权限不足，可以模拟`VirtualStore`用户本地数据中目录中的文件，但这只是一种解决方法，它会带来一些其他问题。

## Com+ 错误

给定错误消息，如果代理也是 PB 应用程序，鉴于 PB 仅生成 32 位二进制文​​件而您的系统是 64 位的，也许将[32b COM+ 注册到 Win2008](https://stackoverflow.com/questions/11369743/how-to-register-a-32-bit-dll-com-application-on-windows-2008-r2)的提示可以帮助您？

# javascript - jQuery砌体示例不适合我

> ID：13496942
> 
> 赞同：0
> 
> 时间：2012-11-21T15:50:51.017
> 
> 标签：javascript, jquery, html, css, jquery-masonry

基于[jQuery masonry](http://masonry.desandro.com/)，我得到以下内容：

**jQuery：**

```
$('#container').masonry({
    itemSelector : '.item',
        columnWidth: 240
}); 
```

**jQuery ajax：**（jquery-masonry`success`在页面加载后第一次工作。如果在没有重新加载页面的情况下再次发生，jquery-masonry 将不起作用`success`。）

```
success: function( widget_shell ) 
{ 

    if( widget_shell.d[0] ) {

        $( "#container" ).empty();

        var i = 0;

        // creating the div elements
        for ( i = 0; i <= widget_shell.d.length - 1; i++ ) {

            var j = Math.floor(Math.random() * 200) + 50

            var $widget = $( "<div class='item col1' style='height:" + j + "px'></div>" ).appendTo( $( "#container" ) );
            $( "<span>" + widget_shell.d[i].widget_id + " - " + j + "</span>" ).appendTo( $widget );

        }

        // initialising the jquery masonry plugin
        $('#container').masonry({
            itemSelector : '.item',
            columnWidth: 240
        });

    }

} 
```

**HTML：（**通过 jQuery-ajax 动态创建）

```
<div id="container" style="position: relative; height: 0px;" class="masonry">
    <div class="item col1" style="height:154px"><span>39 - 154</span></div>
    <div class="item col1" style="height:100px"><span>52 - 100</span></div>
    <div class="item col1" style="height:229px"><span>53 - 229</span></div>
    <div class="item col1" style="height:126px"><span>55 - 126</span></div>
    <div class="item col1" style="height:245px"><span>56 - 245</span></div>
    <div class="item col1" style="height:242px"><span>57 - 242</span></div>
    <div class="item col1" style="height:146px"><span>58 - 146</span></div>
    <div class="item col1" style="height:63px"><span>59 - 63</span></div>
    <div class="item col1" style="height:118px"><span>60 - 118</span></div>
    <div class="item col1" style="height:249px"><span>61 - 249</span></div>
    <div class="item col1" style="height:136px"><span>62 - 136</span></div>
    <div class="item col1" style="height:114px"><span>63 - 114</span></div>
    <div class="item col1" style="height:152px"><span>64 - 152</span></div>
    <div class="item col1" style="height:52px"><span>65 - 52</span></div>
    <div class="item col1" style="height:95px"><span>66 - 95</span></div>
</div> 
```

**CSS：**

```
.item {
    width: 220px;
    margin: 10px;
    float: left;
    background:white;
} 
```

**结果：**

![在此处输入图像描述](../Images/41c4908fdb507bb9a0ba92aa0baf1208.png)

**预期的：**

当div 在水平和垂直方向上相互对抗时，它应该看起来像[这样。](http://masonry.desandro.com/demos/basic-single-column.html)

**问题：**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:09:00.803

[`.masonry('reload')`](http://masonry.desandro.com/demos/adding-items.html)添加更多元素后，您需要使用该功能。例如，这*可能*有效：

```
success: function( widget_shell ) 
{ 

    if( widget_shell.d[0] ) {

        $( "#container" ).empty();

        var i = 0;

        // creating the div elements
        for ( i = 0; i <= widget_shell.d.length - 1; i++ ) {

            var j = Math.floor(Math.random() * 200) + 50

            var $widget = $( "<div class='item col1' style='height:" + j + "px'></div>" ).appendTo( $( "#container" ) );
            $( "<span>" + widget_shell.d[i].widget_id + " - " + j + "</span>" ).appendTo( $widget );

        }

        // reload jquery masonry plugin
        $('#container').masonry('reload')

    }

} 
```

否则，请检查 jsFiddle：http: [//jsfiddle.net/RNA8R/1/](http://jsfiddle.net/RNA8R/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:05:39.990

我怀疑你`jquery.masonry.min.js`的加载不正确。检查您的萤火虫或您的 chrome 开发人员工具上的网络选项卡。

这是我`index.html`文件中的确切代码（不是在我的 dom 上呈现的内容；我的 html 文件中的实际代码）：-

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
        <script src="./masonry-master/jquery.masonry.min.js"></script>
        <script>
            $(function(){
              $('#container').masonry({
                // options
                itemSelector : '.item'
              });
            });
        </script>
        <style>
            body {
                background: #999;
            }

            .item {
                width: 220px;
                margin: 10px;
                float: left;
                background:white;
            }​
        </style>
    </head>
    <body>
    <div id="container">
        <div class="item" style="height:154px"><span>39 - 154</span></div>
        <div class="item" style="height:100px"><span>52 - 100</span></div>
        <div class="item" style="height:229px"><span>53 - 229</span></div>
        <div class="item" style="height:126px"><span>55 - 126</span></div>
        <div class="item" style="height:245px"><span>56 - 245</span></div>
        <div class="item" style="height:242px"><span>57 - 242</span></div>
        <div class="item" style="height:146px"><span>58 - 146</span></div>
        <div class="item" style="height:63px"><span>59 - 63</span></div>
        <div class="item" style="height:118px"><span>60 - 118</span></div>
        <div class="item" style="height:249px"><span>61 - 249</span></div>
        <div class="item" style="height:136px"><span>62 - 136</span></div>
        <div class="item" style="height:114px"><span>63 - 114</span></div>
        <div class="item" style="height:152px"><span>64 - 152</span></div>
        <div class="item" style="height:52px"><span>65 - 52</span></div>
        <div class="item" style="height:95px"><span>66 - 95</span></div>
    </div>

    </body>
</html> 
```

目录结构：-

我的`index.html`加载在同一目录级别的`jquery.masonry.min.js`一个名为right 的目录中`masonry-master`

# jquery-ui - 带有字母 AZ 或其他自定义范围的 jQuery UI Spinner

> ID：13496943
> 
> 赞同：1
> 
> 时间：2012-11-21T15:50:51.970
> 
> 标签：jquery-ui, jquery-ui-spinner

有没有办法自定义 jQuery UI 微调器，以便 AZ 字母（或任何自定义范围）成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:04:27.527

是的，这是可能的。这是一个使用 AZ 的简单示例，改编自[提供的时间示例](http://jqueryui.com/spinner/#time)：

```
$.widget("ui.alphaspinner", $.ui.spinner, {
    options: {
        min: 65,
        max: 90
    },
    _parse: function(value) {
        if (typeof value === "string") {
            return value.charCodeAt(0);
        }
        return value;
    },
    _format: function(value) {
        return String.fromCharCode(value);
    }
}); 
```

用法：

```
$("#my-input").alphaspinner(); 
```

**示例：http:** [//jsfiddle.net/4nwTc/1/](http://jsfiddle.net/4nwTc/1/)

上面的示例创建了一个名为的新小部件`alphaspinner`，它继承自`spinner`. 您可以使用以下方法仅对一个微调器执行此操作：

```
$(function() {
    var spinner = $("#alpha-spinner").spinner({
        min: 65,
        max: 90
    }).data("spinner");

    spinner._parse = function (value) {
        if (typeof value === "string") {
            return value.charCodeAt(0);
        }
        return value;        
    };

    spinner._format = function (value) {
        return String.fromCharCode(value);        
    }
});​ 
```

**示例：http:** [//jsfiddle.net/4nwTc/2/](http://jsfiddle.net/4nwTc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T07:11:11.707

我在 Andrews 代码的基础上构建了一个微调器小部件，该小部件接受一个字符串数组作为输入。

您可以在[此处](https://stackoverflow.com/questions/9245047/jquery-spinner-with-strings-as-input/18845945#18845945)查看解决方案。

# java - Java 在两个数字之间进行选择

> ID：13496944
> 
> 赞同：1
> 
> 时间：2012-11-21T15:50:52.987
> 
> 标签：java

我正在尝试制作一种方法，您可以在 main 中选择 2 个数字，并且该方法会找到数字之间的最大值。

程序将一个数除以 2，如果不可能除以乘以 3 并加 1，再除以此类推，直到达到 1。

输出：数字 10 6 次

```
int count = 0;
  while( number != 1){

    count++;

    if(number % 2 == 0){
    number = number / 2;
    }else{

    number = number * 3 + 1;

   }
}

 return count; 
```

这是我到目前为止所拥有的，我不知道如何选择 2 个数字并找到这 2 个之间的最高数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:53:40.353

如果你把你所拥有的东西放在一个以 int 作为参数的方法中，你可以调用它两次，一次使用 java.util.Random - 生成的数字，再次使用不同的随机值。您可以将两个调用的结果存储为整数，并比较它们。希望有帮助！

```
int first = reduceNumber(r.nextInt());
int second = reduceNumber(r.nextInt()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:56:33.323

使用 Random 类生成随机数。要知道其中的最大值，

```
int max = Math.max(n1, n2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:52:07.347

使用`java.util.Random`生成随机值。

```
Random r = new Random();
int n1 = r.nextInt();
int n2 = r.nextInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T11:38:19.860

对不起。那些数字是我主要选择的。我想我必须使用数组。所以输出应该是这样的：在 main 中使用 Scanner。

最低限制：2 最高限制：10000000 数字 837799（找到数字的方法）是被划分次数最多的一个：524（计算它被划分次数的代码）我有..

这就是它的样子。所以我认为随机不会有帮助。

# ios - 按来自 NSExpressionDescription 的表达式排序

> ID：13496946
> 
> 赞同：9
> 
> 时间：2012-11-21T15:50:54.647
> 
> 标签：ios, core-data

是否可以通过表达式对数据进行排序`NSExpressionDescription`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:16:57.677

不，[`NSSortDescriptor`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)用于对结果进行排序。

[根据文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSExpressionDescription_Class/NSExpressionDescription.html)，`NSExpressionDescription`用于进一步缩小搜索范围。

> An`NSExpressionDescription`描述要从 fetch 返回的列，该列可能不会直接显示为实体上的属性或关系。示例可能包括`upper(attribute)`或 `max(attribute)`。您不能将`NSExpressionDescription`对象设置为实体的属性。

[Fetching Managed Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)`NSExpressionDescription`提供了和的一些代码示例`NSSortDescriptor`。这是`NSSortDescriptor`示例的一个片段。

```
// Set example predicate and sort orderings...
NSNumber *minimumSalary = ...;
NSPredicate *predicate = [NSPredicate predicateWithFormat:
    @"(lastName LIKE[c] 'Worsley') AND (salary > %@)", minimumSalary];
[request setPredicate:predicate];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
    initWithKey:@"firstName" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]]; 
```

# c# - 去除 h2 标签之间的内容（包括 h2 标签）

> ID：13496947
> 
> 赞同：1
> 
> 时间：2012-11-21T15:50:54.793
> 
> 标签：c#, html, regex

我正在尝试使用 C# 中的正则表达式从字符串中的 h2 标记之间剥离内容：

```
<h2>content needs removing</h2> other content... 
```

我有以下正则表达式，根据我用来测试它的正则表达式伙伴软件，它应该可以工作，但它不能：

```
myString = Regex.Replace(myString, @"<h[0-9]>.*</h[0-9]>", String.Empty); 
```

我有另一个在此之后运行以删除所有其他 HTML 标记的正则表达式，它以相同的方式调用并且工作正常。谁能帮我解决为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:58:45.227

不要使用正则表达式。

`HTML`不是正则语言，因此无法使用正则表达式正确解析。

例如，您的正则表达式将匹配：

```
<h2>sample</h1> 
```

这是无效的。处理嵌套结构时，这会导致意外结果（`.*`贪婪并匹配所有内容，直到`h[0-9]`输入 HTML 字符串中的最后一个结束标记）

您可以使用`XMLDocument`（HTML 不是 XML，但这足以满足您的要求），也可以使用[Html Agility Pack](http://html-agility-pack.net/?z=codeplex)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T16:01:17.687

试试这个代码：

```
String sourcestring = "<h2>content needs removing</h2> other content...";
String matchpattern = @"\s?<h[0-9]>[^<]+</h[0-9]>\s?";
String replacementpattern = @"";
MessageBox.Show(Regex.Replace(sourcestring,matchpattern,replacementpattern)); 
```

`[^<]+`比`.+`因为它停止收集它看到的地方更安全`<`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T15:56:59.987

这对我来说很好：

```
string myString = "<h2>content needs removing</h2> other content...";
Console.WriteLine(myString);
myString = Regex.Replace(myString, "<h[0-9]>.*</h[0-9]>", string.Empty);
Console.WriteLine(myString); 
```

显示：

```
<h2>content needs removing</h2> other content...
other content... 
```

正如预期的那样。

如果你的问题是你的真实案例有几个不同的标题标签，那么你有一个贪婪的 * 量词的问题。它将创建最长的匹配。例如，如果您有：

```
<h2>content needs removing</h2> other content...<h3>some more headings</h3> and some other stuff 
```

您将匹配从`<h2>`to 的所有内容`</h3>`并替换它。要解决此问题，您需要使用惰性量词：

```
myString = Regex.Replace(myString, "<h[0-9]>.*?</h[0-9]>", string.Empty); 
```

会给你留下：

```
other content... and some other stuff 
```

但是请注意，这不会修复嵌套`<h>`标签。正如@fardjad 所说，对 HTML 使用 Regex 通常不是一个好主意。

# c# - 将 javascript 对象转换为 c# 对象

> ID：13496951
> 
> 赞同：0
> 
> 时间：2012-11-21T15:51:03.543
> 
> 标签：c#, javascript

我正在做客户端编程，我想将一个 javascript 对象转换为 c# 对象，以便我可以将它保存在数据库中。有什么方法可以实现吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T15:56:01.287

javascript:

```
var obj = {id:0,userName:'Bill'}; 
```

c#，定义类：

```
public class myClass
{
  public int id;
  public string userName;
} 
```

然后将 obj 传输到服务器（例如使用 AJAX 请求），并在需要使用对象时反序列化

```
myClass obj = (new JavascriptSerializer()).Deserialize<myClass>(objJson); 
```

但是您可以不进行反序列化并将 objJson 字符串存储到数据库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:52:10.410

首先，您需要将 JSON 对象传递到服务器端，可能使用背后代码中的 Web 服务，然后您可以尝试这个很棒的库：

[JSON.net](http://james.newtonking.com/projects/json-net.aspx)

无论您决定使用哪种序列化/反序列化技术，您在这里必须克服的最大障碍是如何将 JSON 字符串从客户端传递到您可以使用它的代码后面。为此，我建议使用 jQuery 的 AJAX 功能。当我学习如何从客户那里传递信息时，[这篇文章对我来说非常宝贵](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T16:06:10.007

要使此解决方案起作用，您需要由 T 表示的类型是用 DataContract 和 DataMember 属性修饰的类型。DataContractJsonSErializer 比 JavascriptSerializer 好得多。这是我为 C# REST 客户端编写的一些代码。它确实展示了如何进行一般的序列化和反序列化。包含的示例对象

```
[DataContract]
public SampleObject
{
   [DataMember("MyProperty")]
   public string MyProperty {get;set;}
}

    private static byte[] SerializeRequest<T>(string contentType, T request)
    {
        using (MemoryStream requestObjectStream = new MemoryStream())
        {
            if (contentType == "applicaton/json")
            {
                DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
                serializer.WriteObject(requestObjectStream, request);
            }
            else if (contentType == "application/xml")
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                serializer.WriteObject(requestObjectStream, request);
            }
            else
            {
                throw new Exception("invalid contentType");
            }
            requestObjectStream.Position = 0;

            return requestObjectStream.ToArray();
        }
    }

    private static T DeserializeResponse<T>(string acceptHeader, string responseString)
    {            
        if (acceptHeader == "applicaton/json")
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
            MemoryStream responseObjectStream = new MemoryStream(Encoding.UTF8.GetBytes(responseString));
            return (T)serializer.ReadObject(responseObjectStream);
        }
        else if (acceptHeader == "application/xml")
        {
            DataContractSerializer serializer = new DataContractSerializer(typeof(T));
            MemoryStream responseObjectStream = new MemoryStream(Encoding.UTF8.GetBytes(responseString));
            return (T)serializer.ReadObject(responseObjectStream);
        }

        return default(T);
    } 
```

# vba - 在vba中向下移动行范围

> ID：13496955
> 
> 赞同：4
> 
> 时间：2012-11-21T15:51:12.620
> 
> 标签：vba, rows, move, offset

我正在尝试选择电子表格的前 7 行（确切数字可能会有所不同）并将其向下移动 32 行（向下移动的行数也可能会有所不同）。有人可以帮我写代码吗？我努力了：

```
Worksheets("Report").Cells(x1, 5).EntireRow.Offset(32, 0).Select 
```

我也试过

```
for i = 1 to 7
set x1 = worksheets("Report").Cells(i, 5)
Rows(x1).EntireRow.Offset(32, 0).Select 
```

也不行。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T16:07:48.903

这可以满足您的要求，如果 32 之后有任何行，则将它们向下移动：

```
Sub MoveRowsDown()
Dim NumRows As Long
Dim TargetRow As Long
Dim ws As Excel.Worksheet

NumRows = 7 'change as necessary
TargetRow = 33 'change as necessary
Set ws = ActiveSheet ' change as necessary

ws.Range("A1").Resize(NumRows).EntireRow.Cut
ws.Range("A" & TargetRow + NumRows).EntireRow.Insert shift:=xlDown
End Sub 
```

编辑：这是一个只是剪切和粘贴的版本，没有花哨的插入：

```
Sub MoveRowsDown()
Dim NumRows As Long
Dim TargetRow As Long
Dim ws As Excel.Worksheet

NumRows = 7 'change as necessary
TargetRow = 33 'change as necessary
Set ws = ActiveSheet ' change as necessary

ws.Range("A1").Resize(NumRows).EntireRow.Cut Destination:=ws.Range("A" & TargetRow)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T22:22:59.260

尝试这个

```
Sub marine()

ActiveSheet.Rows("32:38").Value = ActiveSheet.Rows("1:7").Value
ActiveSheet.Rows("1:7").Clear

End Sub 
```

用您的工作表名称替换 activesheet。activesheets 不是最好的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-05T15:22:24.483

刚发现这个：

```
range("A1:C6").Cut range("A10") 
```

甜的！

我也会尝试：

```
rows("1:7").cut rows("32") 
```

# c++ - 隐式生成移动构造函数

> ID：13496956
> 
> 赞同：1
> 
> 时间：2012-11-21T15:51:18.893
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

有什么方法可以隐式生成仅移动类的移动构造函数？考虑这样一个类：

```
class moveable_only
{
  unique_ptr<int> p_;
};

moveable_only m;
foo(std::move(m)); 
```

这不会编译，因为隐式声明的复制构造函数不能复制 p_。(12.8/7)

> 如果类定义没有显式声明复制构造函数，则隐式声明。如果类定义声明了移动构造函数或移动赋值运算符，则隐式声明的复制构造函数定义为已删除；否则，它被定义为默认值（8.4）。

现在考虑一下：

```
class moveable_only
{
  unique_ptr<int> p_;

   moveable_only(const moveable_only&);
   moveable_only& operator = (const moveable_only&);
};

moveable_only m;
foo(std::move(m)); 
```

这也不能编译，因为 12.8/9

> 如果类 X 的定义没有显式声明移动构造函数，当且仅当
> 
> — X 没有用户声明的复制构造函数，
> 
> — X 没有用户声明的复制赋值运算符，
> 
> — X 没有用户声明的移动赋值运算符，
> 
> — X 没有用户声明的析构函数，并且
> 
> — 移动构造函数不会被隐式定义为已删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T15:54:04.990

> 这不会编译，因为隐式声明的复制构造函数不能复制 p_。(12.8/7)

不需要复制构造函数。这不会编译，因为您的编译器似乎不会自动生成移动构造函数，*它应该*。

除了自己实现或更新编译器之外，没有其他办法。

# z3 - 我如何在 Z3 中用编程语言描述整数除法？

> ID：13496971
> 
> 赞同：1
> 
> 时间：2012-11-21T15:51:40.403
> 
> 标签：z3

我正在使用 SMT 求解器来帮助分析程序。在编程语言中，可以满足以下条件：

```
int x;
if((x/2) * 2 != x)  {
//reachable
} 
```

但是对于数学中的整数类型，这是不能满足的。我可以用Z3来形容吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:23:41.417

您的示例在数学整数中也可以满足。您可以找到`x`任何奇数的模型。

在 Z3 中，您应该使用机器整数，[即位向量](http://rise4fun.com/z3/tutorialcontent/guide#h25)进行建模：

```
(declare-const x (_ BitVec 32))
(assert (not (= (bvmul (bvsdiv x (_ bv2 32)) (_ bv2 32)) x)))
(check-sat)
(get-model) 
```

这个示例^([rise4fun 链接](http://rise4fun.com/Z3/Kv6L))确实可以满足。

# linux - 什么是 X-style 几何字符串？

> ID：13496976
> 
> 赞同：2
> 
> 时间：2012-11-21T15:51:55.900
> 
> 标签：linux, geometry

我想在linux中使用feh在特定位置打开图像。我使用“man feh”，只是为了找到“feh -g”或“feh --geometry”。但是，需要输入的参数是 x 样式的几何字符串。

格式是

```
feh -g width x height [ + x + y ] 
```

我只是从 "man feh" x 复制格式，y 是我需要的偏移量。但是如何输入呢？你能给我一个例子吗？

# c# - 为什么这个 C# If 语句没有找到空值？

> ID：13496978
> 
> 赞同：0
> 
> 时间：2012-11-21T15:51:58.537
> 
> 标签：c#, if-statement, tostring

下面的 if 语句永远不会解析为`true`找不到注册表项。我在这里想念什么？

```
if ((Convert.ToString(Registry.GetValue(key, "EnableLinkedConnections", "")) == "0") ||
    (Convert.ToString(Registry.GetValue(key, "EnableLinkedConnections", "")) == null)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T15:55:28.570

根据[MSDN Docs](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.getvalue.aspx)，您传入的第三个参数是未找到密钥时返回给您的值。

由于您正在指定“”（String.Empty） - 这是您应该检查的值，而不是 null 或“0”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T15:53:16.617

Convert.ToString on null 作为对象返回“”。试试`string.IsNullOrEmpty()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T15:58:38.387

因为 Registry.GetValue 返回一个 null 对象，该对象 Convert.ToString() 转换为您不检查的空字符串（参见[此处）。](https://stackoverflow.com/questions/10355736/why-does-convert-tostringnull-return-a-different-value-if-you-cast-null)试试这个：

```
object value = Registry.GetValue(key, "EnableLinkedConnections", "");
if (value != null)
{
    string text = Convert.ToString(value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:58:20.200

根据经验，请在 Convert.ToString 之前检查它是否为空，在调用两次相同的方法之前将其存储在对象中，这将提高性能。

```
object regystryValue = Registry.GetValue(key, "EnableLinkedConnections", "");

if(regystryValue != null && regystryValue.ToString() =="0"){
//do things
} 
```

# c# - 使用 Reflection.Emit 从字符串生成动态代码

> ID：13496979
> 
> 赞同：0
> 
> 时间：2012-11-21T15:52:03.477
> 
> 标签：c#, reflection, reflection.emit, dynamic-code

我在数据库表中存储了一些 C# 代码。

我在一个字符串中有一个基类的整个代码。

使用存储的 C# 代码，我向类中添加了一个名为`m1`包含 a`return <<some C# code>>;`的方法（该方法始终返回`object`，因此 C# 代码可以是：`88 + 90`、、、`"hello world"`等`this.ToString()`），将其保存到文件并使用 编译`CSharpCodeProvider`，然后运行它在我的程序上。

存储的 C# 代码可以使用基类中的一些方法。

这个方案效果很好。

现在，我将使用它`Reflection.Emit`来执行此操作，以避免编译步骤。

这有可能吗？如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:31:54.743

> 现在，我将使用它`Reflection.Emit`来执行此操作，以避免编译步骤。

这对我来说没有多大意义。如果您有要执行的源代码，则基本上有两种选择：

1.  将其编译为其他可以直接执行的形式。（像 C 这样的经典编译语言就是这样工作的。）
2.  将其解析为一些内存结构，然后逐个执行。（经典的解释语言就是这样工作的，就像旧浏览器中的 JavaScript。）

由于虚拟机和中间语言等原因，现在事情实际上并不那么简单，但这些是基本的选择。

如果您不想使用 CodeDOM，那么您有两个选择（对应于上面的两个选项）：

1.  解析代码，然后从中创建一些可执行形式，可能使用`Reflection.Emit`.
2.  解析代码并直接执行结果。你不需要`Reflection.Emit`那个。

选择 1 意味着您需要实现完整的 C# 编译器。选择 2 意味着您需要实现 C# 编译器的一半，以及内存结构的解释器。在这两种情况下，这将是一个巨大的项目，你不会真正“避免编译步骤”。

# windows - 在 Windows 上阅读 tiff 图像

> ID：13496980
> 
> 赞同：0
> 
> 时间：2012-11-21T15:52:05.393
> 
> 标签：windows, image, visual-studio-2008, file-io, tiff

我想在 C 中读取 tiff 图像（Windows 64 位，Visual Studio 2008）。有没有可以为 libtiff 64bit 编译库的地方？[http://bigtiff.org/libtiff.lib-4.1.zip](http://bigtiff.org/libtiff.lib-4.1.zip)上提供的那个是为 32 位编译的，当用于 64 位项目时会引发链接错误。

我愿意探索其他（简单）库以在上述设置中读取 16 位 TIFF 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:02:44.593

[我可以通过使用 Visual Studio 2008 编译 libtiff 来解决问题，从http://bigtiff.org/libtiff-4.1.zip](http://bigtiff.org/libtiff-4.1.zip)下载 libtiff-4.1 ，打开 libtiff.vcproj 并更改 Visual Studio 2008 中的包含文件夹（在设置），并编译为 64 位，一旦你编译了 libtiff，就可以使用带有头文件的库来读取 tiff 图像

# php - Php Ajax 表单在颜色框中提交

> ID：13496982
> 
> 赞同：0
> 
> 时间：2012-11-21T15:52:07.297
> 
> 标签：php, ajax, forms, submit, colorbox

我有一个带有一些 php 的表单来验证并在提交时插入到数据库中，并且表单在颜色框中打开。

到现在为止还挺好。我想要做的是关闭颜色框并在成功时刷新 div。

我想如果一切正常，我需要从 php 传递对 ajax 的响应，用 setTimeout($.fn.colorbox.close,1000); 之类的东西关闭颜色框。并刷新 div，但我被卡住了，因为我是 ajax 新手。

我会很感激这里的任何帮助。

这是我的ajax：

```
jQuery(function(){
 jQuery('.cbox-form').colorbox({maxWidth: '75%', onComplete: function(){
   cbox_submit();

  }});
});

function cbox_submit()
{
  jQuery("#pre-process").submit(function(){
   jQuery.post(
      jQuery(this).attr('action'),
      jQuery(this).serialize(),
      function(data){
       jQuery().colorbox({html: data, onComplete: function(){
          cbox_submit();

        }});
      }
    );
    return false;
  });
} 
```

形成php代码：

```
 <?php
error_reporting(-1); 
include "conf/config.php";

if(isset($_REQUEST['rid'])){$rid=safe($_REQUEST['rid']);}
if(isset($_REQUEST['pid'])){$pid=safe($_REQUEST['pid']);}
$msg = '';
if (!$_SESSION['rest_id']) $_SESSION['rest_id']=$rid; //change to redirect

$session_id=session_id();

if(isset($_REQUEST['submit'])){

if(isset($_POST['opta'])){
$opta=safe($_POST['opta']);
$extraso = implode(',',array_values( array_filter($_POST['opta']) ));
                    }

if (array_search("", $_POST['opt']) !== false) 
{
$msg = "Please select all accessories!";
}else{

$extrasm = implode(',',array_values( array_filter($_POST['opt']) ));

if ($_POST['opt'] && isset($_POST['opta'])) {$extras= $extrasm .",". $extraso;}
if ($_POST['opt'] && !isset($_POST['opta'])) {$extras= $extrasm;}
if (!$_POST['opt'] && isset($_POST['opta'])) {$extras= $extraso;}

$sql['session_id']  = $session_id;
    $sql['rest_id'] = $_POST['rid'];
    $sql['prod_id'] = $_POST['pid'];
    $sql['extras']  = $extras;
    $sql['added_date']  = Date("Y-m-d H:i:s");
    $newId=insert_sql("cart",$sql);

    }
}
?>

<form id="pre-process" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<div style="background-color:#FFF; padding:20px;">
<?=$msg;?>
  <?php
  $name = getSqlField("SELECT name FROM products WHERE resid=".$_SESSION['rest_id']." and id=".$pid."","name");
  echo "<div style='color:#fff; background-color:#F00;padding:10px;' align='center'><h2>".$name."</h2></div><div style='background-color:#FFF; padding: 20px 70px 30px 70px; '>Please select accessories.<br><br>";
 $getRss = mysql_query("SELECT * FROM optional_groups_product where prodid=".$pid." order by id asc");
    while ($rsrw = @mysql_fetch_array($getRss)) {

  $goptionals = getSqlField("SELECT goptionals FROM optionals_groups WHERE resid=".$_SESSION['rest_id']." and id=".$rsrw['goptid']."","goptionals");

        $goptionals=explode(', ',($goptionals));

echo "<select name='opt[]' id='opt[]' style='width:220px;'>";
echo "<option value='' >Select Options</option>";
    foreach($goptionals as $v)
    {
         $vname = mysql_query("SELECT * FROM optionals where id=".$v." LIMIT 0,1");
         while ($rsgb = @mysql_fetch_array($vname)) {
             $aa=$rsgb['optional'];
         }
             echo "<option value=".$v." >".$aa."</option>";

    }
         echo "</select>(required)<br>";       
    //}
        }
        $getRss = mysql_query("SELECT * FROM optional_product where prodid=".$pid.""); 
        ?>
        <br><br>
        <table border="0" cellpadding="0" cellspacing="0" >
       <tr>
    <td bgcolor="#EAFFEC">
<div style="width:440px; "> 
<?php

while ($rssp = @mysql_fetch_array($getRss)) {
 $optional=getSqlField("SELECT optional FROM optionals WHERE id=".$rssp['optid']."","optional");
 $price=getSqlField("SELECT price FROM optionals WHERE id=".$rssp['optid']."","price");
?>
<div style="width:180px;background-color:#EAFFEC; float:left;padding:10px;""><input type="checkbox" name="opta[]" id="opta[]" value="<?=$rssp['optid']?>"  /> <i><?=$optional?> [<?=CURRENCY?><?=$price?> ]</i> </div>
<?php } ?>
</div>

</td>
 </tr></table>
<input type="hidden" name="rid" value="<?=$rid?>" />
<input type="hidden" name="pid" value="<?=$pid?>"/>
    </div><input type="hidden" name="submit" /><input  id='submit' class="CSSButton"    style="width:120px; float:right;" name='submit' type='submit' value=' Continue ' /><br />

<br /><br />
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:10:41.363

我不知道 colobox，但如果我理解你想要做什么，
我会说你的 javascript 应该更像这样

```
function cbox_submit()
{
  jQuery("#pre-process").submit(function(e) {
    e.preventDefault(); // prevents the form to reload the page
    jQuery.post(
      jQuery(this).attr('action')
    , jQuery(this).serialize()
    , function(data) {
        if (data['ok']) { // ok variable received in json
          jQuery('#my_colorbox').colorbox.close(); // close the box
        }
      }
    );
    return false;
  });
}

jQuery(function() {
  jQuery('#my_colorbox').colorbox({
    maxWidth: '75%'
  , onComplete: cbox_submit // Bind the submit event when colorbox is loaded
  });
}); 
```

您应该至少分开执行 post 部分的 php 脚本。

如果成功，这个 php（用 调用`jQuery(this).attr('action')`）应该返回一个 json`ok`变量。例子：

```
<?php
# ... post part ...
# if success
ob_clean();
header('Content-type: application/json');
echo json_encode(array('ok' => true));
?> 
```

# akka - Akka EventBus 可以与远程参与者一起使用吗？

> ID：13496989
> 
> 赞同：9
> 
> 时间：2012-11-21T15:52:22.560
> 
> 标签：akka

Akka 的 EventBus 可以与远程参与者一起使用吗？

据我所知，它本身并不支持这一点。有人可以确认吗？

看起来可以编写一些提供类似功能的 Actor。例如，启动订阅远程服务器上的 EventBus 的远程 Actor，并将消息发送回本地 Actor 以在本地 EventBus 上重新发布。但是，如果它已经被支持，那么写这个是没有意义的！

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T07:02:42.017

EventBus 本身是本地的，这意味着事件不会自动传输到其他系统上的 EventBus，但您可以订阅任何您想要的 ActorRef，包括远程的。您只需要在生成事件的节点上有一个参与者：

```
case class Subscribe(clazz: Class[_])
system.actorOf(Props(new Actor {
  def receive = {
    case Subscribe(c) =>
      context.system.eventStream.subscribe(sender, c)
  }
}), "eventer") 
```

然后你可以从远程主机上查找那个并让你自己订阅。

# asp.net-mvc - 在 MVC 4 中创建具有多对多关系的对象

> ID：13496992
> 
> 赞同：1
> 
> 时间：2012-11-21T15:52:34.853
> 
> 标签：asp.net-mvc, entity-framework, many-to-many

我正在使用带有 EF 代码优先方法的 MVC 4。我有两个简单的对象。这些是他们的 POCO 课程：

```
public class Activity
{
        //Primitive Properties
        [HiddenInput]
        public int Id { get; set; }

        [Required]
        public int LengthInMinutes { get; set; }

        public string AdditionalInfo { get; set; }

        [Required]
        public bool Archive { get; set; }

        //Navigation Properties
        public virtual User User { get; set; }
        public virtual ActivitySet ActivitySet { get; set; }
        public virtual ICollection<Company> Companies { get; set; }
        public virtual ICollection<Description> Descriptions { get; set; }
}

public class Company
{
        //Primitive Properties
        [HiddenInput]
        public int Id { get; set; }

        [Required]
        public string Title { get; set; }

        [Required]
        public bool Archive { get; set; }

        //Navigation Properties
        public virtual ICollection<Activity> Activities { get; set; }
} 
```

因此 Activity 和 Company 实体之间存在多对多的关系。我正在我的存储库类中创建新活动，但是当我为活动分配公司时，如下所示：

```
activity.Companies.Add(company); 
```

我得到 NullReference 异常。我环顾四周，但根据此链接：

[BuildStarted.com](http://buildstarted.com/2010/08/27/entity-framework-with-many-to-many-one-to-many-and-one-to-one-relationships/)

我的方法似乎是正确的。

为什么它不起作用？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:59:14.487

在您可以使用 Add() off Companies 之前，需要对其进行初始化。

```
activity.Companies = new List<Company>(); 
```

您也可以在 Activity 的构造函数中对其进行初始化。

```
public class Activity
{
    public Activity()
    {
        Companies = new List<Company>();
        Descriptions = new List<Description>();
    }

    //Primitive Properties
    [HiddenInput]
    public int Id { get; set; }

    [Required]
    public int LengthInMinutes { get; set; }

    public string AdditionalInfo { get; set; }

    [Required]
    public bool Archive { get; set; }

    //Navigation Properties
    public virtual User User { get; set; }
    public virtual ActivitySet ActivitySet { get; set; }
    public virtual ICollection<Company> Companies { get; set; }
    public virtual ICollection<Description> Descriptions { get; set; }
} 
```

# ireport - 分组没有数据时如何打印分组内容--Ireport

> ID：13496994
> 
> 赞同：1
> 
> 时间：2012-11-21T15:52:42.967
> 
> 标签：ireport

当没有来记录时，我需要打印组。我实际上添加了当记录属于该组时打印的组，但如果它为空白则不会打印。谁能告诉我可能是什么表达或任何解决方案？

```
 <groupExpression>
            <![CDATA[(($F{GROUP_EXP}.doubleValue() >= new BigDecimal(250000).doubleValue() 
                     && $F{GROUP_EXP}.doubleValue() < new BigDecimal(500000).doubleValue() && $F{NE}.charAt(0)=='E'))]]>
   </groupExpression> 
   <groupHeader> 
        <band height="109"> 
             <printWhenExpression>
                  <![CDATA[(($F{GROUP_EXP}.doubleValue() >=new BigDecimal(250000).doubleValue() 
                            && $F{GROUP_EXP}.doubleValue() < new BigDecimal(500000).doubleValue() && $F{NE}.charAt(0)=='E'))]]>
             </printWhenExpression> 
```

# sql - SQL - 在多个星期内传播一个值

> ID：13496996
> 
> 赞同：0
> 
> 时间：2012-11-21T15:52:50.573
> 
> 标签：sql, sql-server

我目前的数据存储如下：

```
PERSON      DATE        RATE
----------------------------
John Smith  1/4/2012    1.2
John Smith  8/6/2012    1.7
John Smith  8/13/2012   1.9
John Smith  8/20/2012   2
John Smith  9/10/2012   1.8
John Smith  10/1/2012   3 
```

我正在尝试为每个人输出一年中每周（周日结束）的费率。如果给定一周的费率不存在，则使用前一周，即：

```
PERSON      WEEK       RATE
----------------------------
John Smith  1/8/2012    1.2
John Smith  1/15/2012   1.2
John Smith  1/22/2012   1.2
John Smith  1/29/2012   1.2 
```

ETC

我可以为日期和星期组合建立一个表格，这样我就可以确定星期。我怎样才能复制费率呢？外部连接或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:08:05.330

关于你的数据我有很多不知道的地方，但这里有一个建议。第一个子查询选择所有不同的人，第二个子查询将这些人中的每一个与每周相匹配（假设您将周存储为日期和周日早上 00:00）。这假设 Person 是唯一的，但我希望您有一个可用于确定谁是谁的主键。

```
SELECT 
    X.Person,
    W.Date,
    X.Rate
FROM
(
    SELECT
        Person
    FROM
        Ratings
    GROUP BY
        Person      
) P

CROSS JOIN
(
    SELECT
         Date AS DateEnd    
    FROM
        Weeks
) W

CROSS APPLY
(   -- Last Rate before week end
    SELECT TOP 1 
        Rate
    FROM 
        Ratings
    WHERE 
        Person = P.Person AND
        Date < Dateadd(DAY,1,W.DateEnd)
    ORDER BY 
        DATE DESC
) X 
```