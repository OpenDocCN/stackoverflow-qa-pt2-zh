# StackOverflow 问答 12585000-12585999

# windows-phone-7 - 使用 SQL 数据库将代码从 WP7.5 移植到 Windows 8 的推荐方法？

> ID：12585005
> 
> 赞同：1
> 
> 时间：2012-09-25T14:21:05.773
> 
> 标签：windows-phone-7, sql-server-ce, windows-runtime, code-sharing

我有一个现有的 Windows Phone 7.5 应用程序。此应用程序使用本地数据库将数据存储在手机上（[WP 中本地数据库的概述](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202860%28v=vs.92%29.aspx)）。正因为如此，我的业务模型都装饰了属性以支持 SQL 表中的存储，例如 [Column]、[Table]...

我正在考虑将此应用程序移植到 Windows 8。我想知道在更改存储时重用业务模型的好方法是什么（WinRT 不支持 SQL 数据库）。我想分享两个平台之间的商业模式的源代码。

谢谢，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:52:21.053

I think using SQLite is the recommended approach. See this [short tutorial](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx) for some info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:43:19.650

我相信推荐的方法是使用 MVVM 模式。

[MSDN：模型-视图-视图模型设计模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# mysql - 在mysql中创建一堆表到一个主表中

> ID：12585006
> 
> 赞同：-2
> 
> 时间：2012-09-25T14:21:18.650
> 
> 标签：mysql, phpmyadmin

好的，我将尝试解释我需要什么。我正在制作一个浏览器游戏，其中玩家有一些可以报名参加比赛的动物。但是每天都有新的比赛。

我的想法： 主表 **比赛** 与子表比赛 比赛 1 该比赛的结果 比赛 2 该比赛的结果 比赛 3 该比赛的结果

这是可能的还是我想错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:26:38.313

你想错了。

您希望有一个表比赛，每场比赛都有一排。它将具有诸如 CompetitionID、DateOfCompetition 等列。

您应该有另一个表 CompetitionResults，其中包含任何比赛的结果。这可能有 CompetitionId、AnimalId、Results。

您应该有一张名为 Animals 的表，以便您可以跟踪动物，也许还有一个称为所有者的表。

无论如何，SQL 没有“子表”的概念。它具有实体和关系的概念。您应该对此主题进行一些研究并尝试将其应用于该领域。

# asp.net-mvc-3 - 在 url 中隐藏操作（mvc 4 web 应用程序）

> ID：12585009
> 
> 赞同：1
> 
> 时间：2012-09-25T14:21:22.883
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有一个名为 News as Area 的模块。在 NewsAreaRegistration 我有

```
context.MapRoute(
            "NewsShow",
            "News/{controller}/{friendlyUrlName}/{idNews}",
            new { controller = "Show", action = "Index", friendlyUrlName = "", idNews = "" }
        ); 
```

在我看来（在主视图文件夹中）我使用 RouteUrl 方法来强制执行我的自定义路由

```
@Url.RouteUrl("NewsShow", new { controller = "Show",  action = "Index", friendlyUrlName = FriendlyURL.URLFriendly(true, Model.News.Data.ElementAt(0).Title), idNews = Model.News.Data.ElementAt(0).IdNews})" 
```

我想做的是有一条像 www.something.com/News/Show/bla-bla-bla/9 这样的路线，没有我在 Show 控制器中的操作名称索引。我尝试了这个例子的所有排列，但没有任何效果。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:33:04.007

好的，所以我尝试了这个......

路由表：（默认前）

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Hidden",
            url: "News/{controller}/{friendlyUrlName}/{idNews}",
            defaults: new {controller = "Home", action = "Index", friendlyUrlName = "", idNews = ""});

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Account", action = "Index", id = UrlParameter.Optional }
        ); 
```

在视图中：

```
@Url.RouteUrl("Hidden", new { friendlyUrlName = "Dude-Check-It-Out", idNews = 12 }) 
```

在我的控制器中：

```
public ActionResult Index(string friendlyUrlName, int idNews)
        {
            ViewBag.Message = "Modify this template to kick-start your ASP.NET MVC application.";
            ViewBag.UrlName = friendlyUrlName;
            ViewBag.NewsId = idNews;
            return View();
        } 
```

我得到了这个..

```
/News/Home/Dude-Check-It-Out/12 
```

我去的网址：

```
http://localhost:49840/News/Home/Dude-Check-It-Out/12 
```

我还将我的默认路由更改为其他内容，以确保这没有使用默认路由。让我知道这是否有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:27:27.820

你把这条路线放在默认路线之前吗？路线位置很重要，从上到下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:49:56.920

好的......我设法以某种方式工作。

在我的 NewsAreaRegistration 中，我必须在默认之前移动 NewsShow 路由。不知道为什么，因为 RouteUrl 应该准确地映射到 NewsShow。

```
public override void RegisterArea(AreaRegistrationContext context)
{
  context.MapRoute(
    "NewsShow",
    "News/{controller}/{friendlyUrlName}/{idNews}",
    new { controller = "Show", action = "Index", friendlyUrlName = "", idNews = "" }
  );

  context.MapRoute(
    "News_default",
    "News/{controller}/{action}/{id}",
    new { action = "Index", id = UrlParameter.Optional }
  );
} 
```

这是我现在的 RouteUrl（请注意我必须编写控制器。也不确定为什么：

```
@Url.RouteUrl(
  "NewsShow", new { controller = "Show", friendlyUrlName = FriendlyURL.URLFriendly(true, Model.News.Data.ElementAt(0).Title), idNews = Model.News.Data.ElementAt(0).IdNews }
); 
```

# oracle - 如何使用子查询 Oracle 优化此 SELECT

> ID：12585016
> 
> 赞同：2
> 
> 时间：2012-09-25T14:21:36.557
> 
> 标签：oracle, indexing

这是我的查询，

```
 SELECT ID As Col1,
   (
         SELECT VID FROM TABLE2 t 
         WHERE (a.ID=t.ID or a.ID=t.ID2) 
         AND t.STARTDTE =
         (
               SELECT MAX(tt.STARTDTE) 
               FROM TABLE2 tt 
               WHERE (a.ID=tt.ID or a.ID=tt.ID2)  AND tt.STARTDTE < SYSDATE
         )
   ) As Col2
   FROM TABLE1 a 
```

Table1 有 48850 条记录，Table2 有 15944098 条记录。

我在 TABLE2 中有关于 ID、ID 和 STARTDTE、STARTDTE、ID、ID2 和 STARTDTE 的单独索引。

查询仍然太慢。如何改进？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:55:59.533

我猜测`OR`in 内部查询正在破坏优化器使用索引的能力。此外，我不会推荐一种可以扫描所有`TABLE2`给定大小的解决方案。

这就是为什么在这种情况下，我建议使用一个可以有效检索您正在寻找的信息的函数（每次调用 2 次索引扫描）：

```
CREATE OR REPLACE FUNCTION getvid(p_id table1.id%TYPE) 
   RETURN table2.vid%TYPE IS
   l_result table2.vid%TYPE;
BEGIN
   SELECT vid
     INTO l_result
     FROM (SELECT vid, startdte
             FROM (SELECT vid, startdte
                     FROM table2 t
                    WHERE t.id = p_id
                      AND t.startdte < SYSDATE
                    ORDER BY t.startdte DESC)
            WHERE rownum = 1
           UNION ALL
           SELECT vid, startdte
             FROM (SELECT vid, startdte
                     FROM table2 t
                    WHERE t.id2 = p_id
                      AND t.startdte < SYSDATE
                    ORDER BY t.startdte DESC)
            WHERE rownum = 1
            ORDER BY startdte DESC)
    WHERE rownum = 1;
   RETURN l_result;
END; 
```

您的 SQL 将变为：

```
SELECT ID As Col1,
       getvid(a.id) vid
  FROM TABLE1 a 
```

`table2(id, startdte DESC)`确保在和上都有索引`table2(id2, startdte DESC)`。索引的顺序非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:43:41.737

可能尝试以下，虽然未经测试。

```
WITH max_times AS
    (SELECT a.ID, MAX(t.STARTDTE) AS Startdte
     FROM TABLE1 a, TABLE2 t 
     WHERE (a.ID=t.ID OR a.ID=t.ID2) 
         AND t.STARTDTE < SYSDATE
     GROUP BY a.ID)
SELECT b.ID As Col1, tt.VID
FROM TABLE1 b
    LEFT OUTER JOIN max_times mt
    ON (b.ID = mt.ID)
    LEFT OUTER JOIN TABLE2 tt
    ON ((mt.ID=tt.ID OR mt.ID=tt.ID2) 
        AND mt.startdte = tt.startdte) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:59:45.277

您可以查看[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)以避免不得不两次点击第二个表。像这样的东西可能会起作用：

```
SELECT id AS col1, vid
FROM (
    SELECT t1.id, t2.vid, RANK() OVER (PARTITION BY t1.id ORDER BY
        CASE WHEN t2.startdte < TRUNC(SYSDATE) THEN t2.startdte ELSE null END
        NULLS LAST) AS rn
    FROM table1 t1
    JOIN table2 t2 ON t2.id IN (t1.ID, t1.ID2)
)
WHERE rn = 1; 
```

内部选择从两个表中获取`id`和值，并在or`vid`上进行简单连接。该函数根据 . 计算第二个表中每个匹配行的排名。你想过滤那个日期有点复杂，所以我使用 a通过将评估值更改为 null 来有效地忽略今天或以后的任何日期，在这种情况下，这意味着子句中的忽略。`id``id2``rank``startdte``case``order by``over``nulls last`

我建议您首先单独运行内部选择 - 可能只是`id`为了简洁起见，只需几个值 - 看看它在做什么，以及正在分配什么等级。

然后，外部查询只是为 each 选择排名靠前的结果`id`。

不过，您仍然可能会得到重复；如果`table2`有多个相同的行，`id`他们`startdte`将获得相同的排名，但是您之前可能遇到过这种情况。您可能需要以`order by`对您有意义的方式向 中添加更多字段以打破关系。

但这主要是推测，无法查看您现有查询的实际速度慢的地方。

# spring - Spring MessageSource.getMessage() 的命名参数而不是位置参数

> ID：12585020
> 
> 赞同：7
> 
> 时间：2012-09-25T14:22:06.080
> 
> 标签：spring, named-parameters

我们正在使用 Spring MessageSource 在我们的应用程序中构建错误消息。

我们像这样填充我们的错误消息

```
dobInvalid = The DOB supplied {0} is invalid 
```

我们想使用命名参数，所以我们可以做

```
dobInvalid = The DOB supplied {dob} is invalid 
```

查看 getMessage 的 Api 文档似乎建议您可以执行此操作 [http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/context/MessageSource.html](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/context/MessageSource.html)

> args - 将为消息中的参数填充的参数数组（参数在消息中类似于“{0}”、“{1,date}”、“{2,time}”），如果没有，则为 null。

显然我们可以自己编写，但想知道 spring 是否可以做到，是否有人可以提供示例或使用命名参数而不是位置参数。

干杯马克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:06:36.730

AIUI，Spring MessageSource 与 JDK [MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)一起使用，因此没有这样的命名参数。`{1,date}`是一个示例，其中“date”指的是 formatType，no 指的是任意命名参数。

参数的一般形式是：

```
{ ArgumentIndex , FormatType , FormatStyle } 
```

# javascript - 如何将值从 HTML 页面传递到 Java 小程序？

> ID：12585022
> 
> 赞同：3
> 
> 时间：2012-09-25T14:22:06.320
> 
> 标签：javascript, applet, param

我尝试使用 javascript 传递值，如下所示

```
<script language= "javascript" type= "text/javascript">
var num;
function getVal()
{
num=document.getElementById('in').value;
alert(document.getElementById('parm').value);
}
</script>
<body>
<form >
Number : <input type="text" id="in"  ><br/>
<button id="myBtn" onclick="getVal()">Try it</button><br/>  
</form>
<APPLET code="Calc.class" width="100" height="100">
<PARAM name="number" id="parm">
</APPLET>

</body>    
</html> 
```

警报框在屏幕上显示输入的值，但小程序代码显示的不同。我的小程序代码是

```
public class Calc extends Applet
{

    private String strDefault = "Hello! Java Applet.";
    public void paint(Graphics g) {
    String strParameter = this.getParameter("number");
    if (strParameter == null)
    strParameter = strDefault;
    g.drawString(strParameter, 10, 10);
    }
} 
```

谁能告诉我将值传递到参数标签和从参数标签到html的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:32:33.247

我认为您可以从 javascript 对象中指定参数，如下所示：

```
<applet code="Calc.class" width="100" height="100">
    <param name="number" id="parm" value="&{num};">
</applet> 
```

但是，我不确定与 IE 的兼容性，因此您可能必须将`document.write`您的小程序代码注入相应的参数值，如下所示：

```
<head>
    <script type="text/javascript">
        var num;

        function getVal() {
            num = document.getElementById('in').value;

            writeAppletTags();
        }

        function writeAppletTags() { 
            var container = document.getElementById("applet-container");

            container.innerHTML = "<applet code=\"Calc.class\" width=\"100\" height=\"100\">";
            container.innerHTML += "<param name=\"number\" value=\"" + num + "\">";
            container.innerHTML += "</applet>";
        }
    </script> 
</head>
<body>
    Number : <input type="text" id="in"  ><br/>
    <button id="myBtn" onclick="getVal()">Try it</button><br/>  
    <div id="applet-container" />
</body> 
```

**从 Java 发送 POST**

正如我在评论中所说，这有点复杂。您必须将您的值发布（也可以使用 GET）到托管文件（可以是任何服务器端脚本技术）。下面演示了这一点，[代码取自此处](http://bytes.com/topic/java/answers/720825-how-build-http-post-request-java)。

```
URL url;
URLConnection urlConnection;
DataOutputStream outStream;
DataInputStream inStream;

// Build request body
String body = "key=value";

// Create connection
url = new URL("http://myhostedurl.com/receiving-page.php");
urlConnection = url.openConnection();
((HttpURLConnection)urlConnection).setRequestMethod("POST");
urlConnection.setDoInput(true);
urlConnection.setDoOutput(true);
urlConnection.setUseCaches(false);
urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
urlConnection.setRequestProperty("Content-Length", ""+ body.length());

// Create I/O streams
outStream = new DataOutputStream(urlConnection.getOutputStream());
inStream = new DataInputStream(urlConnection.getInputStream());

// Send request
outStream.writeBytes(body);
outStream.flush();
outStream.close();

// Close I/O streams
inStream.close();
outStream.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T14:34:48.030

[本文](http://www.cafeaulait.org/course/week5/16.html)来源

例如：这是您的小程序代码：

```
import java.applet.*;    
import java.awt.*; 

public class DrawStringApplet extends Applet {

  private String defaultMessage = "Hello!";

  public void paint(Graphics g) {

    String inputFromPage = this.getParameter("Message");
    if (inputFromPage == null) inputFromPage = defaultMessage;
    g.drawString(inputFromPage, 50, 25);

  }

} 
```

然后在 HTML 中：

```
<HTML>
<HEAD>
<TITLE> Draw String </TITLE>
</HEAD>

<BODY>
This is the applet:<P>
<APPLET code="DrawStringApplet" width="300" height="50">
<PARAM name="Message" value="Howdy, there!">
This page will be very boring if your 
browser doesn't understand Java.
</APPLET>
</BODY>
</HTML> 
```

**注意：** DrawStringApplet 是你的小程序名称；Message是发送给小程序的参数；然后小程序将显示：`Howdy, there!` 结果。

# visual-studio - 在剃刀视图的 javascript 部分中使用 C# 变量时如何避免 Visual Studio 警告

> ID：12585025
> 
> 赞同：0
> 
> 时间：2012-09-25T14:22:14.137
> 
> 标签：visual-studio, razor

在剃刀视图中，我有一个使用模型属性值的脚本片段：

```
<script>
var @(Model.DialogModel.DialogVar) = new AjaxDialog("@(Model.DialogModel.DialogHtmlId)");
</script> 
```

DialogVar 和 DialogHtmlId 都是 String 类型，并且脚本工作正常，但 Visual Studio 显示“=”符号周围存在“预期标识符”错误。

如何在不全局关闭“显示语法错误”的情况下抑制错误提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:09:28.587

将整行放入一个剃刀表达式，如：

```
var dlg = new AjaxDialog("@(Model.DialogModel.DialogHtmlId)");
@("var " + Model.DialogModel.DialogVar + " = dlg;") 
```

# javascript - Grunt 插件未安装在当前位置

> ID：12585026
> 
> 赞同：4
> 
> 时间：2012-09-25T14:22:16.920
> 
> 标签：javascript, gruntjs

我正在使用 Mac OS X 10.7.5，并且正在使用 Grunt 连接一些 js 文件并缩小它们。现在我还想缩小我的 css 文件。由于 grunt 不提供任何功能，我想为此安装一个 grunt 插件。根据说明，我必须 cd 进入我的项目根文件夹并使用 npm 安装插件。所以我做了以下事情：

```
cd <PROJECT_ROOT>
npm install grunt-contrib-css 
```

该插件的说明在这里：[https](https://npmjs.org/package/grunt-contrib-mincss) ://npmjs.org/package/grunt-contrib-mincss 我打开了我的 grunt.js 文件并添加了

```
grunt.loadNpmTasks('grunt-contrib-mincss'); 
```

但是当我尝试运行 grunt 我只是得到

```
Local Npm module "grunt-contrib-mincss" not found. Is it installed?
<WARN> Task "mincss" not found. Use --force to continue. </WARN> 
```

安装没有任何问题，并且 npm ls 确实列出了该模块。

任何想法我做错了什么？非常感谢！

**更新**

当我像这样进入一个项目时

```
cd ~/Sites/path/to/project 
```

然后安装插件

```
sudo npm install grunt-contrib-mincss 
```

该模块实际安装在

```
~/node_modules/grunt-contrib-mincss 
```

我可以将文件硬拷贝到我的项目根目录中（这可行），但这有点奇怪，不是吗？

*更新 2* 我更新了节点并再次尝试。下面是控制台输出。

```
me:~ Fritz$ node -v
v0.8.10
me:~ Fritz$ npm -v
1.1.62
me:~ Fritz$ mkdir ./Sites/npm-test
me:~ Fritz$ cd ./Sites/npm-test/
me:npm-test Fritz$ sudo npm install grunt-contrib-mincss
Password:
npm http GET https://registry.npmjs.org/grunt-contrib-mincss
npm http 304 https://registry.npmjs.org/grunt-contrib-mincss
npm http GET https://registry.npmjs.org/gzip-js
npm http GET https://registry.npmjs.org/clean-css
npm http GET https://registry.npmjs.org/grunt-contrib-lib
npm http 304 https://registry.npmjs.org/gzip-js
npm http 304 https://registry.npmjs.org/clean-css
npm http 304 https://registry.npmjs.org/grunt-contrib-lib
npm http GET https://registry.npmjs.org/crc32
npm http GET https://registry.npmjs.org/deflate-js
npm http GET https://registry.npmjs.org/optimist
npm http 304 https://registry.npmjs.org/deflate-js
npm http 304 https://registry.npmjs.org/crc32
npm http 304 https://registry.npmjs.org/optimist
npm http GET https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/wordwrap
grunt-contrib-mincss@0.3.0 ../../node_modules/grunt-contrib-mincss
├── grunt-contrib-lib@0.3.0
├── gzip-js@0.3.1 (crc32@0.2.2, deflate-js@0.2.2)
└── clean-css@0.4.2 (optimist@0.3.4) 
```

为什么插件安装在外面？或者有没有办法定义它的实际安装位​​置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T21:31:57.960

我在 Ubuntu 12.04 上遇到了类似的模块问题`grunt-jasmine-task`（与上述相同的错误消息）。这为我解决了这个问题：

1.  `node_modules`在项目的根目录中手动创建文件夹。
2.  再跑`npm install grunt-jasmine-task`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T11:21:37.860

这种安装方式对我有用：

1.  `cd <PROJECT_ROOT>`.
2.  运行`npm install grunt-contrib-mincss`。
3.  在当前目录中创建了测试文件，测试内容如下：

    ```
    module.exports = function(grunt) {

        grunt.initConfig({
            mincss: {
                compress: {
                    files: {
                        "path/to/output.css": ["path/to/input_one.css", "path/to/input_two.css"]
                    }
                }
            }
        });

        grunt.loadNpmTasks('grunt-contrib-mincss');

        grunt.registerTask('default', 'mincss');

    }; 
    ```

4.  我的目录结构此时看起来像这样（请检查一下，如果某些文件不存在或在其他文件夹中，则可能是它不起作用的原因）：

    ```
    <PROJECT_ROOT> /
        node_modules /
            grunt-contrib-mincss/
        grunt.js 
    ```

5.  `grunt`在终端中运行。

脚本有效。

它在您的情况下不起作用的可能原因：

1.  您全局安装了插件（使用 -g 参数）。
2.  您将它安装在某个子文件夹中（grunt.js 和 node_modules 必须在同一个文件夹中）。

请检查一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T21:31:00.763

我见过没有`package.json`文件导致模块被全局安装的情况。我不确定当时运行的是什么版本，因为它不是我的机器。

下次`npm init`在安装模块之前尝试运行。之后，安装使用`npm install grunt-contrib-css --save`将其添加到您的`package.json`文件中。您还可以使用`--save-dev`将其添加到您的 devDependencies。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T12:12:48.953

就我而言，我忘了添加：

```
grunt.loadNpmTasks('grunt-jsdoc-plugin'); 
```

到 grunt.js，所以它应该是这样的：

```
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({

    jsdoc : {
      dist : {
        src: ['frontend/js/**/*.js'], 
        dest: 'docs/frontend'
      }
    }

  });

  grunt.loadNpmTasks('grunt-jsdoc-plugin');

}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-27T14:30:53.867

如果您查看 grunt-contrib-mincss 文件夹下，有一个自述文件，它们将名称从 grunt-contrib-mincss 更改为 grunt- **contrib** - **cssmin**。

无论如何，这不是你（和我）的错。XD

# matlab - MATLAB 是否使用 OpenCv CascadeClassifier？

> ID：12585028
> 
> 赞同：11
> 
> 时间：2012-09-25T14:22:20.377
> 
> 标签：matlab, opencv, vision, matlab-cvst

我有一个关于`CascadeObjectDetector`MATLAB 的问题。在 MATLAB 的源代码中`CascadeObjectDetector`，我看到：

```
pCascadeClassifier; % OpenCV pCascadeClassifier 
```

然后我看到：

```
%------------------------------------------------------------------
% Constructor
%------------------------------------------------------------------
function obj = CascadeObjectDetector(varargin)              
    obj.pCascadeClassifier = vision.internal.CascadeClassifier;
    ...
end 
```

并在`stepImpl`：

```
bbox = double(obj.pCascadeClassifier.detectMultiScale(I, ...
            double(obj.ScaleFactor), ...
            uint32(obj.MergeThreshold), ...            
            uint32(obj.MinSize), ...
            uint32(obj.MaxSize))); 
```

你知道，什么是`vision.internal.CascadeClassifier`？它只是 OpenCV`CascadeClassifier`吗？函数的源代码在哪里`detectMultiScale`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:20:33.313

问题是matlab提供了以下对象检测器

1.  模板匹配
2.  斑点分析
3.  中提琴琼斯算法更多信息在这里： http: [//www.mathworks.ch/products/computer-vision/description4.html](http://www.mathworks.ch/products/computer-vision/description4.html)

现在谈谈opencv。用于人脸检测（通常用于对象检测）的 opencv 函数 cv.HaarDetectObjects() 使用 viola jones 算法，该算法又使用类似 harr 的特征。

我个人的看法是，实现可能略有不同，但它们本质上具有相同的算法。

如果您仍然不相信并想使用 matlab 中的 opencv 函数，您可以使用 MEX。因此，您可以使用 matlab 中的 cv.HaarDetectObjects()。更多详细信息，请访问：http: [//www.mathworks.ch/discovery/matlab-opencv.html](http://www.mathworks.ch/discovery/matlab-opencv.html)

# c++ - 当我将 void 指针导入到具有指向共享对象中的函数的指针的结构时，我没有收到警告

> ID：12585030
> 
> 赞同：7
> 
> 时间：2012-09-25T14:22:21.793
> 
> 标签：c++, compilation, struct, shared-libraries, function-pointers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:49:05.733

首先，g++*不*将链接视为类型的一部分。你不`so.hpp` 应该编译，因为它试图用 初始化一个`myclass* (*)()` （指向`extern "C"`函数的指针）`make`，这是一个`extern "C"`函数。这是非法的，并且需要编译器错误，但 g++ 接受它甚至没有警告。

除此之外，如果未定义，为什么要`host.cpp`生成警告。`usefunction`在 DLL 中，`interface`是*包含*指向函数的指针的数据类型的实例。您用于`dlsym`获取此变量（不是函数）的地址，并将其转换为数据类型。永远不要将指向数据的指针转换为指向函数的指针；您取消引用指向包含指向函数的指针的数据对象的指针，这很好。

至于带有. `reinterpret_cast`_ 标准（至少通过 C++03）说这种转换是非法的，并且我使用了无法使其工作的编译器，因为指向函数的指针大于指向数据的指针。作为在 C 中允许的限制，Unix (Posix) 要求指向函数的指针和指向数据的指针具有相同的大小和表示形式，并且 Posix 标准规定将返回值转换如下：`dlsym``void*``dlsym`

```
myclass* (*func)();
*reinterpret_cast<void**>( &func ) = dlsym( th, "make" ); 
```

如果 a`myclass* (*)()`和 a`void*`实际上具有相同的大小和表示，这是合法的，并且会起作用（并且不应触发任何警告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:53:20.167

gcc 的警告是因为 gcc 不知道您是否愿意假设 Posix。所以它假设不是并且（根据 C++ 标准的要求）它诊断出格式错误的程序。

但是，您正在使用`dlsym`并期望它完成 Posix`dlsym`所做的事情，因此您愿意依赖 Posix。然后你可以对你的函数指针类型进行 C 风格的`void*`转换，并且 gcc 保证这是可以的，即使 C++ 没有。任何模仿的非 Posix 系统`dlsym`都必须保证类似的东西，否则在 a 中返回函数指针是无意义的`void*`。

既然您知道自己在做什么，那么您就可以使来自 gcc 的任何警告静音。

具有结构的代码`API`没有给出任何警告的原因是它`void*`可以`static_cast`指向任何指向对象的指针。我认为您在访问数据成员时违反了严格的别名，因为`API`当该位置的实际对象是`void*`. `void*`但是因为您的结构的布局与您的实现中的 a 和指向函数的指针的布局相同，所以它无论如何都可以工作。从理论上讲，即使使用相同的布局，它也可能因为严格的混叠违规而中断（您使用的优化越多）。

避免严格混叠违规的安全方法是：与Kerrek`std::memcpy(&fp, &p, sizeof p)`的相同，但由于需要一个完整的类型，因此需要`std::copy`较少的`reinterpret_casts`混乱。除了避免严格的混叠违规外，这还方便地避免了任何诊断。您不再在函数和对象指针之间进行转换：您直接将一个对象表示复制到另一个。只要保证 的对象表示与指向函数的指针相同（在 Posix 中就是这种情况），这将起作用。`memcpy``void*``std::copy``void*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:28:30.130

完全符合标准的解决方案：

```
extern "C" typedef int (func_t)(char, double); // desired API function signature

int main()
{
    static_assert(sizeof(void *) == sizeof(func_t *), "pointer cast impossible");

    void       *  p = dlsym(handle, "magic_function");
    char const * cp = reinterpret_cast<char const *>(&p);

    func_t     * fp;

    std::copy(cp, cp + sizeof p, reinterpret_cast<char *>(&fp));

    return fp('a', 1.25);
} 
```

一种更简单但更可疑的写法是使用一些类型双关语：

```
static_assert(sizeof(void *) == sizeof(func_t *), "pointer cast impossible");

void   * vp = dlsym(handle, "magic_function");
func_t * fp;

*reinterpret_cast<void **>(&fp) = vp;  // this is type-punning 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:46:45.277

如果您将函数指针包装在结构中，那么您可以通过添加额外的间接级别来解决问题。想象一下，如果一个函数指针占用 10 个字节，而一个对象指针占用 4 个字节。您的结构至少有 10 个字节，并且您将有一个 4 字节的指针。这一切都很好。当您访问该结构以获取您的函数指针时，您提取了完整的 10 个字节。什么都没有丢失。但是，如果要将 10 字节的函数指针转换为 4 字节的对象指针，则必然会丢失 6 字节的信息。

这不是一个实际的问题，因为支持 dlsym 的平台必须有足够大的 void 指针来存储函数指针的地址，但是编译器试图阻止您编写不可移植的代码。

# javascript - 在 JAVASCRIPT 中循环引用值

> ID：12585035
> 
> 赞同：1
> 
> 时间：2012-09-25T14:22:28.080
> 
> 标签：javascript, loops

以下是所有 Javascript EFS，它是 javascript，但适用于股票和交易软件。

因此，在以下示例中：high() 只是 1 分钟柱中的最高价格。所有柱线每分钟处理一次最高价和最低价（该分钟的价格）。

好的，我已经弄清楚如何使用循环。但是，我很难访问我创建的循环中的值，例如

```
var Source2 = high();
 var vValue2   = Source2.getValue(15);

for (h = -15; h < 0; h++)       {  
     vValue2 = Math.max(vValue2, Source2.getValue(-h)); 

 if (vValue2 == Source2.getValue(-h))        { 
        barIndex2 = getCurrentBarIndex()-h; 
       }
} 
```

现在让我们假设这一切都很好，它会返回我的值（在这种情况下，从入口点向前看的最高 15 个柱）。但是，我现在希望为循环处理创造条件（全部用于回测目的），例如：

*   我想返回 (vValue2 +1) 例如，“vValue2”已作为最高价（15 个柱）返回，现在我想知道“vValue2 +1 柱”的值，即使这不是最高柱。
*   有没有办法让循环只在满足多个条件时才返回值，例如：i。如果此返回值的柱 ('h' +1) 的 LOW 小于 ('h') && ('h' 的 LOW +2)、('h'+3)、('h'+4)，所有的 High 都小于 ('h')。

基本上我想添加多个 IF 条件来启动循环？还是我应该在循环返回其值后添加 IF 条件？？？

*   我不确定我需要的东西是否可能，或者我是否必须使用一个又一个循环来获得所需的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:33:02.960

您可以在`for`循环中使用多个条件，如下所示：

`for (h = -15; (h < 0 && something == somethingElse); h++)`

您也可以`break`使用这样的方法退出循环：

```
for (h = -15; h < 0; h++)       { 
    if(blah == 1)break;  // breaks out of loop completely
} 
```

# java - 我应该对负责在文件系统上持久化数据的 bean 使用 @Repository Spring 注释吗

> ID：12585037
> 
> 赞同：4
> 
> 时间：2012-09-25T14:22:36.377
> 
> 标签：java, spring, filesystems, repository-pattern

我的应用程序中有三层：

*   REST 接口 (JBOSS RestEasy)
*   服务层（Spring Services）
*   持久层（Spring bean）

在持久层中，我将实现两个类（实现相同的接口）：一个是 a `MemoryStore`，另一个是`FileSystemStore`。

这些实现是否应该由 注释`@Repository`？

这两个类将没有任何数据库访问权限。它可以稍后实现到 DatabaseStore，但现在情况并非如此。

更一般地说，注解`@Repository`必须用于任何持久性 Bean 还是仅用于访问数据库的人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:31:02.197

类[javadoc](http://static.springsource.org/spring/docs/3.1.2.RELEASE/javadoc-api/org/springframework/stereotype/Repository.html)说：

> 当与 PersistenceExceptionTranslationPostProcessor 一起使用时，这样注释的类 [with @Respository] ​​有资格进行 Spring DataAccessException 转换。注释类也被阐明了它在整个应用程序架构中的作用，用于工具、方面等。

我相信如果您需要特殊的异常翻译（来自 JDBC、Hibernate 或其他）或您自己的技术（但这意味着您必须扩展 spring 以了解这一点），您必须使用 @Repository 注释您的类，否则，只需注释@零件。

在您的特定情况下，我认为使用 @Repository 进行注释是正确的，因为您的界面是为数据持久性而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:49:58.133

这不仅仅是关于 @Repository 注释，而是关于类是什么原型。如果它是一个存储库类，那么它可能会被命名为 XxxxxRepository 并具有 @Repository 注释。

存储库可以有不同的实现，例如：

*   JpaRepository
*   MongoDb存储库

您可以将文件系统存储库添加为另一个实现。这似乎符合回购模式。

# mysql - 用于在 Google App Engine 上的 GWT 项目上持久化的外部 MySQL 数据库

> ID：12585039
> 
> 赞同：0
> 
> 时间：2012-09-25T14:22:38.443
> 
> 标签：mysql, google-app-engine, gwt, requestfactory

我正在开发一个托管在 GAE 中的 GWT 项目，并且我想使用外部 MySQL 数据库而不是 Datastore 来实现持久性。是否有可能做到这一点？它与 RequestFactory 兼容吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:35:48.357

GAE 提供了使用 Google Cloud SQL 而不是 High Replication Datastore 的能力。RequestFactory 不会对您正在使用的数据存储做出假设，因此将它与 Google Cloud SQL 一起使用应该不会有任何问题。您也可以同时使用两者。

您无法连接到托管在其他任何地方的数据库服务器，除非您创建一个在 HTTP 级别上工作的接口……这听起来像一个非常糟糕的主意，原因有几个。

# r - 为什么 read.csv in r 将我的所有数据移动一列？

> ID：12585042
> 
> 赞同：0
> 
> 时间：2012-09-25T14:22:44.697
> 
> 标签：r, readfile

我正在尝试在 R 中导入一个 csv 文件。我已经做了好几次了，但是对于这个特定的文件，它会返回一个错误。

在 csv 的第一行，我有部分文本和部分数字的列名称，因为它们代表月份、年份和一些观测点的数量。.csv 文件即使更大，也如下所示：

```
Mo,Yr2,4,10,32,38,41,60,63,82

9,1980,    6.0,    0.2,    0.7,    1.0,    0.4,    0.7,    0.4,    1.5

10,1980,   25.1,   39.7,   41.4,   15.5,   20.8,   43.6,   37.1,   17.8

11,1980,   11.5,    8.6,   23.6,    7.5,   15.6,   12.2,   13.4,    7.6

12,1980,   59.6,   90.0,  103.9,   50.0,   67.1,  109.2,   81.6,   48.4 
```

我尝试了以下错误：

```
> m <- read.csv(file="my_file.csv", sep=",",head=TRUE)

  Error in read.table(file = "my_file.csv", sep = ",", head = TRUE) : 
  duplicate 'row.names' are not allowed 
```

所以我试过：

```
> m <- read.csv(file="my_file.csv", sep=",",head=TRUE,row.names=NULL)

> m

    row.names   Mo   Yr2    X4   X10   X32   X38   X41   X60   X63   X82

1           9 1980   6.0   0.2   0.7   1.0   0.4   0.7   0.4   1.5   NA

2          10 1980  25.1  39.7  41.4  15.5  20.8  43.6  37.1  17.8   NA

3          11 1980  11.5   8.6  23.6   7.5  15.6  12.2  13.4   7.6   NA

4          12 1980  59.6  90.0 103.9  50.0  67.1 109.2  81.6  48.4   NA 
```

有人可以告诉我有什么问题吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:35:43.540

您是否使用过 count.fields 来查看所有行是否具有相同数量的分隔符？table(count.fields( ..)) 是一个有用的检查。

当标题行上的分隔符数量与文件的其余部分不同时，我已经看到了您描述的问题。

# android - 安卓SD卡

> ID：12585043
> 
> 赞同：4
> 
> 时间：2012-09-25T14:22:45.593
> 
> 标签：android, android-emulator, android-sdcard

我正在尝试运行 Android 模拟器，但我无法让它识别 SD 卡。

我已经完成了所有通常的设置步骤——我确保我的应用`WRITE_EXTERNAL_STORAGE`在其清单中具有权限，我确保我的 avd 启用了 SD 卡支持 ( `hw.sdCard = yes`)，我确保我指定了一张 SD 卡在 AVD 设置中。当我运行该应用程序时，它无法创建任何新文件或目录，当我调用`Environment.getExternalStorageState()`检查 SD 卡是否已安装时，它总是返回`removed`.

我已经运行了其他已知良好的项目以查看是否遇到相同的错误，并且我已让其他人尝试运行代码以查看是否可以使其正常工作。所有其他项目都有同样的问题，其他运行代码的人已经让它工作了。

我在 Retina Macbook Pro、Eclipse Juno 版本上运行 OS X 10.8.2，并使用 Android SDK 预览版 21rc4。

有谁知道我可能做错了什么？

附录：这是相关 avd 的 config.ini 文件的文本：

```
hw.sdCard=yes
hw.lcd.density=240
sdcard.size=1024M
skin.name=WVGA800
skin.path=platforms/android-16/skins/WVGA800
hw.cpu.arch=arm
abi.type=armeabi-v7a
hw.cpu.model=cortex-a8
vm.heapSize=48
hw.ramSize=512
image.sysdir.1=system-images/android-16/armeabi-v7a/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:51:14.600

确保 sdcard.img 文件存在，并且大小正确，并且可由您的登录名写入。如果这不起作用，您可以尝试使用以下命令重新创建它：

```
mksdcard 1024M sdcard.img 
```

# javascript - Seadragon Events - 触发事件时获取 Seadragon 查看器

> ID：12585044
> 
> 赞同：1
> 
> 时间：2012-09-25T14:22:48.970
> 
> 标签：javascript, jquery, events, seadragon

我有个问题。我希望能够在同一页面上实例化多个 Seadragon Viewer 对象。一切都很好，除了我编写了事件处理程序（如单击、鼠标等）并且我希望它们是通用的。

但是，似乎无法知道该事件被称为哪个 Seadragon 查看器。例如，所有 jQuery 事件都可以调用“this”来引用触发事件的元素。到目前为止，我发现的唯一方法是将我的 Seadragon 查看器声明为全局变量，这不是很优雅......

海龙事件有“这个”等价物吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:34:52.350

我为我声明的所有 Seadragon Viewer 对象使用了一个数组，得到了一个稍微优雅的解决方案。因此，我将 SD 查看器的引用存储在全局数组中。用于使 Seadragon 对象生成的每个元素都具有“Seadragon”类。

当事件被触发时，我会：

var id = $(this).closest('.SeadragonViewport').attr('id'); var cSDObj = g_SDObjects[id];

其中 cSDObj 是我应该使用的当前 Seadragon 对象。

我愿意接受任何比这个更好的建议，但到目前为止，它奏效了！

# python - 如何模拟不存在的模块的层次结构？

> ID：12585046
> 
> 赞同：10
> 
> 时间：2012-09-25T14:22:54.760
> 
> 标签：python, mocking, python-mock

假设我们有一个只存在于生产阶段的模块系统。在测试这些模块的时刻不存在。但我仍然想为使用这些模块的代码编写测试。我们还假设我知道如何从这些模块中模拟所有必要的对象。问题是：如何*方便*地将模块存根添加到当前层次结构中？

这是一个小例子。我要测试的功能放在一个名为的文件中`actual.py`：

```
actual.py:

def coolfunc():
  from level1.level2.level3_1 import thing1
  from level1.level2.level3_2 import thing2
  do_something(thing1)
  do_something_else(thing2) 
```

在我的测试套件中，我已经拥有了我需要的一切：我拥有`thing1_mock`和`thing2_mock`. 我还有一个测试功能。我需要的是添加`level1.level2...`到当前的模块系统中。像这样：

```
tests.py

import sys
import actual

class SomeTestCase(TestCase):
  thing1_mock = mock1()
  thing2_mock = mock2()

  def setUp(self):
    sys.modules['level1'] = what should I do here?

  @patch('level1.level2.level3_1.thing1', thing1_mock)
  @patch('level1.level2.level3_1.thing1', thing2_mock)
  def test_some_case(self):
    actual.coolfunc() 
```

我知道我可以`sys.modules['level1']`用包含另一个对象的对象替换，依此类推。但这对我来说似乎有很多代码。我认为必须有更简单和更漂亮的解决方案。我只是找不到它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T21:40:14.767

所以，没有人帮我解决我的问题，我决定自己解决。[这](https://github.com/ikostia/surrogate)是一个名为的 micro-lib `surrogate`，它允许为不存在的模块创建存根。

Lib 可以这样使用`mock`：

```
from surrogate import surrogate
from mock import patch

@surrogate('this.module.doesnt.exist')
@patch('this.module.doesnt.exist', whatever)
def test_something():
    from this.module.doesnt import exist
    do_something() 
```

首先`@surrogate`装饰器为不存在的模块创建存根，然后`@patch`装饰器可以改变它们。就像`@patch`，`@surrogate`装饰器可以“复数”使用，从而存根多个模块路径。所有存根仅在修饰函数的生命周期内存在。

如果有人可以使用这个库，那就太好了:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-27T10:51:12.133

[您可以在patch()](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch)方法中使用“create”参数，如果该属性不存在，它将强制创建该属性。

# android - 媒体扫描仪广播事件的问题...！

> ID：12585047
> 
> 赞同：2
> 
> 时间：2012-09-25T14:22:58.190
> 
> 标签：android

我正在开发一个应用程序，在其中显示画廊图像，我使用了设备本机画廊源代码（来自 grep 代码）。在其他设备上一切正常，但我正面临果冻豆版本设备的问题。在深入研究问题后，我发现代码中的一个问题是它没有触发媒体扫描仪的广播事件。

这是代码片段：

```
private void onResume()
{

    IntentFilter intentFilter = new IntentFilter(Intent.ACTION_MEDIA_MOUNTED);
    intentFilter.addAction(Intent.ACTION_MEDIA_UNMOUNTED);
    intentFilter.addAction(Intent.ACTION_MEDIA_SCANNER_STARTED);
    intentFilter.addAction(Intent.ACTION_MEDIA_SCANNER_FINISHED);
    intentFilter.addAction(Intent.ACTION_MEDIA_EJECT);
    intentFilter.addDataScheme("file");

    BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (action.equals(Intent.ACTION_MEDIA_MOUNTED)) {

            } else if (action.equals(Intent.ACTION_MEDIA_UNMOUNTED)) {
                // SD card unavailable
                rebake(true, false);
            } else if (action.equals(Intent.ACTION_MEDIA_SCANNER_STARTED)) {
                rebake(false, true);
            } else if (action.equals(Intent.ACTION_MEDIA_SCANNER_FINISHED)) {
                rebake(false, false);
            } else if (action.equals(Intent.ACTION_MEDIA_EJECT)) {
                rebake(true, false);
            }
        }
    };
    registerReceiver(mReceiver, intentFilter);
} 
```

# php - 从php中的日期检索日期，月份，年份

> ID：12585048
> 
> 赞同：2
> 
> 时间：2012-09-25T14:22:58.193
> 
> 标签：php

我有这段代码可以从数据库中获取一个字段：

```
$end_date=$row1['end_date']; 
```

如果我打印它，它会给我类似的信息：25-09-2012 我需要的是获取月份值、年份和日期。就像是：

```
$month=09;
$day=25;
$year=2012; 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:27:17.930

使用[日期](http://php.net/manual/en/class.datetime.php)时间：

```
$date = new DateTime($row1['end_date']);
$year = $date -> format('Y');
$month = $date -> format('m');
$day = $date -> format('d'); 
```

如果您的时间戳都与提供的时间戳一样，请保持简单：

```
list($day, $month, $year) = explode('-', $row1['end_date']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:25:11.067

在您的情况下，您可以像这样使用[explode](http://php.net/manual/en/function.explode.php)函数：

```
// store a string containing "25-09-2012"
$end_date = $row1['end_date'];

// split "25-09-2012" into an array of three elements
$thedate = explode("-", $end_date);

// retrieve the values
$month = $thedate[0]; // 25
$day = $thedate[1]; // 09
$year = $thedate[2]; // 2012 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:24:23.427

尝试 `[month('end_date')]` `[day('end_date')]` `[year('end_date')]`

或使用[爆炸](http://php.net/manual/en/function.explode.php)并使用 - 作为分隔符

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:26:01.437

在这个描述 PHP 中各种格式化方法和有用的日期函数的有用教程中取得高峰：

[日期/时间函数](http://php.net/manual/en/function.date.php)

[日期格式](http://php.net/manual/en/datetime.formats.date.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:26:16.243

```
$values = getdate(strtotime($row1['end_date']));
echo $values['mon']; //month
echo $values['mday']; //day
echo $values['year']; //year 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T14:28:26.300

A. 你可以使用`DateTime`

```
$date = DateTime::createFromFormat('d-m-Y',$row1['end_date']);
$month = $date->format("m");
$day = $date->format("d");
$year = $date->format("Y"); 
```

B. 使用`strtotime`

```
$date = strtotime($row1['end_date']);
$month = date("m", $date);
$day = date("d", $date);
$year = date("Y", $date); 
```

C. 你可以只`sscanf`扫描字符串

```
$date = sscanf($row1['end_date'], "%d-%d-%d");
$month = $date[0] ;
$day =  $date[1] ;
$year =  $date[2] ; 
```

D. 另一种方法是使用`list`&`explode`

```
list($day, $month, $year) = explode('-', $row1['end_date']); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-25T14:35:31.420

Do it on a single line and format it however you would like. (Dec, December, 12) and so on with date().

```
list($month, $day, $year) = explode('-', date('m-d-Y', strtotime($row1['end_date']))); 
```

# json - dojox.calendar 和 JsonRest - 如何更新？

> ID：12585051
> 
> 赞同：0
> 
> 时间：2012-09-25T14:23:02.037
> 
> 标签：json, dojo

我对道场很陌生，所以请多多包涵。我目前正在创建一个 dojo 日历，其中的事件来自数据库。日历默认为网格（每月）视图，并在加载时进行初始调用以获取第一组事件。默认视图会调用以获取当前月份的事件 +/- 一周。我在 Observable 中使用 JsonRest 对象来完成此操作。

这目前工作没有问题。我遇到的问题是提取/更新其他月份的数据。期望的效果是让用户单击前进或后退按钮以移动到下一个月或上个月。发生这种情况时，我想查询数据库以显示要显示的新事件。我能够返回新数据并将其记录到控制台，但我无法让它显示在日历上。我确定我遗漏了一些（希望如此）简单的东西，但我无法弄清楚，或者找到任何好的文档。这是我所拥有的：

```
require(['dojo/parser', 
         'dojo/ready',
         'dojox/calendar/Calendar',
         'dojo/store/Observable',
         'dojo/store/JsonRest',
         'dijit/registry'],
  function(parser, ready, Calendar, Observable, JsonRest, registry) {
    ready(function(){
        var MM   = new Date().getMonth() + 1;
        if (MM < 10)
          { MM = '0' + MM};

        var YYYY = new Date().getFullYear();
        var monthStore  = new Observable(JsonRest({target: '/levelx/teamSchedule/getMonthInfo/'}));
        calendar = new Calendar({
          store: monthStore,
          dateInterval: 'month',
          style: styleText,
          editable: false,
          cssClassFunc: function(e){
            return e.calendar;
          },
          query: '?q=' + YYYY + '-' + MM
        }, 'calendar');

    calendar.on("timeIntervalChange",function(e){
      var YYYY = e.startTime.getFullYear();
      var MM   = e.startTime.getMonth() + 1;
      if (MM < 10)
        { MM = '0' + MM};
      monthStore.query('?q=' + YYYY + '-' + MM).then(function(results){
        console.log(results);
      });
    }); 
```

我觉得我很接近。就像我说的，我将正确的数据返回到控制台 (console.log(results))，但不知道如何让它在实际日历中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:35:30.133

通过以下修改，我能够完成我所需要的。每当用户更改显示的日期范围时，它将自动运行查询以收集和显示正确的事件。

```
require(['dojo/parser',
         'dojo/ready',
         'dojox/calendar/Calendar',
         'dojo/store/JsonRest',
         'dijit/registry',
         'dojo/dom',
         'dojo/html'],
  function(parser, ready, Calendar, JsonRest, registry, dom, html) {
    ready(function(){
        var MM   = new Date().getMonth() + 1;
        if (MM < 10)
          { MM = '0' + MM};
        var YYYY = new Date().getFullYear();
        var detailStore = JsonRest({target: '/levelx/teamSchedule/getDayInfo/'});
        var monthStore  = JsonRest({target: '/levelx/teamSchedule/getMonthInfo/'});

        calendar = new Calendar({
          dateInterval: 'month',
          style: styleText,
          editable: false,
          cssClassFunc: function(e){
            return e.calendar;
          }
        }, 'calendar');

        calendar.on("timeIntervalChange",function(e){
          var YYYY = e.startTime.getFullYear();
          var MM   = e.startTime.getMonth() + 1;
          if (MM < 10)
            { MM = '0' + MM};

          calendar.set('query','?q=' + YYYY + '-' + MM);
          calendar.set('store', monthStore);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:29:21.590

尝试更改间隔更改功能，以便通过日历对象设置查询，而不是直接在商店中设置。

```
calendar.on("timeIntervalChange",function(e){
  var YYYY = e.startTime.getFullYear();
  var MM   = e.startTime.getMonth() + 1;
  if (MM < 10)
    { MM = '0' + MM};

// this
  this.query('?q=' + YYYY + '-' + MM).then(function(results){
    console.log(results);
  });
}); 
```

还没有使用过日历，所以这是一个猜测。但看起来`query`在日历属性中设置了一个首字母，这应该反映在`dojo.store.api`. 日历本身很可能没有正确观察，然后在新数据到达时又不会呈现。

# javascript - JQuery--无法在点击事件中正确获取选中的单选

> ID：12585052
> 
> 赞同：0
> 
> 时间：2012-09-25T14:23:08.160
> 
> 标签：javascript, jquery, javascript-events

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:25:06.230

如果您使用将`for`属性设置为正确输入的标签，则可以避免所有这些问题。

```
<input type="radio" class="direct" name="r1" id="r11" value="first"/>
<label class="proxy" for="r11">radio1</label>
<input type="radio" class="direct" name="r1" id="r12" value="second"/>
<label class="proxy" for="r12">radio1</label>​​​​​​​​​ 
```

[**演示**](http://jsfiddle.net/FyUcW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:32:44.240

正如我之前所说，问题并不清楚，至少对我来说是这样。但是，如果您想在单击下一个跨度时检查收音机，您可以这样做：

```
$('.proxy').click(function(e) {
    $(this).prev().attr('checked', true)
});​ 
```

# google-app-engine - GWT+GAE：在 RemoteServiceServlet 中设置的会话属性，当从常规 HTTPServlet 访问时为空

> ID：12585070
> 
> 赞同：0
> 
> 时间：2012-09-25T14:24:17.303
> 
> 标签：google-app-engine, gwt, servlets, blobstore

我的 GWT+GAE 应用程序中有两个 servlet。一种是“MyServlet 扩展 RemoteServiceServlet”，它处理来自客户端的所有调用。另一个是“上传扩展 HTTPServlet”处理从客户端发布的文件，如下所述：[https ://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)

如何从 Upload servlet 访问在 MyServlet 中设置的对象？

```
//
//MyServlet extends RemoteServiceServlet
//
public User login(String username, String password) {
    User user = null;
    PersistenceManager pm = PMF.get().getPersistenceManager();

    Query query = pm.newQuery(User.class, "username == '" + username + "' && password == '" + password + "'");
    List<User> users = (List<User>) query.execute();
    if (!users.isEmpty()) {
        user = new User();
        User userDB = users.get(0);
        user.setUsername(userDB.getUsername());
        getThreadLocalRequest().getSession().setAttribute("user", user);
    }

    pm.close();
    return user;
}
public void doSomething() {
    //Never returns null. This is good.
    User user = getThreadLocalRequest().getSession().getAttribute("user"); 
    ....
}

//
//Upload extends HTTPServlet
//
public void doPost(HttpServletRequest req, HttpServletResponse res) {
    // Always returns null. WHY?!?
    req.getSession().getAttribute("user");
    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:41:40.580

您不能调用`getThreadLocalRequest()`非 GWT HttpServlet，因为此方法是由 GWT 的 RemoteServiceServlet 提供的。在标准 servlet 中，您应该使用传递给 doGet() 或 doPost() 方法的请求对象，例如：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException {
    if(request.getSession().getAttribute("user")==null) return;
} 
```

# xml - XPath 表达式在重复父节点中选择元素的第一个实例

> ID：12585071
> 
> 赞同：0
> 
> 时间：2012-09-25T14:24:18.117
> 
> 标签：xml, xpath, infopath

**编辑：**虽然从 XPath 的角度来看，这个问题的答案（感谢 Tom！）在*技术上*是正确的，但 MS InfoPath 不能很好地与 People Picker 配合使用。请注意，这将不允许您清除人员选择器并重新分配第一个选择的人员。InfoPath 仅在人员选取器重新验证**后才**清除预先存在的 XML 结构。这意味着将应用程序焦点从选择器上移开，然后再切换回来。由于 MS InfoPath 的技术限制，我的最终目标似乎无法实现。在那，我希望这对其他一些新手有用！

**问题：**我需要在重复的父节点中选择节点或元素的第一个实例。（我的术语可能不正确）。尝试在stackoverflow上调整其他帖子中的表达式无济于事。

基本情况：在 MS InfoPath 中使用人员/组选择器。如果有人在选择器字段中选择了多个用户，我想将其重置为第一个选择的用户。问题是表单上有多个选择器使用类似的 XML 结构，所以我的 XPath 不起作用......

InfoPath 将处理表达式并使用规则来检查选取器中是否存在多个用户。

这是我的示例 XML，后面是我失败的表达式：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.24" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\35e8a7eff4a841a9\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?><my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls" xmlns:ma="http://schemas.microsoft.com/office/2009/metadata/properties/metaAttributes" xmlns:d="http://schemas.microsoft.com/office/infopath/2009/WSSList/dataFields" xmlns:q="http://schemas.microsoft.com/office/infopath/2009/WSSList/queryFields" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:dms="http://schemas.microsoft.com/office/2009/documentManagement/types" xmlns:tns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService" xmlns:s1="http://microsoft.com/wsdl/types/" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-06T15:09:43" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
<my:section1>
    <my:group>
        <pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Green, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Green</pc:AccountId>
            <pc:AccountType>User</pc:AccountType>
        </pc:Person><pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Smith, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\john.smith</pc:AccountId>
            <pc:AccountType>User</pc:AccountType></pc:Person>
    </my:group>
</my:section1>
<my:section2>
    <my:group>
        <pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Public, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Q.Public</pc:AccountId>
            <pc:AccountType>User</pc:AccountType>
        </pc:Person><pc:Person xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls">
            <pc:DisplayName>Doe, John</pc:DisplayName>
            <pc:AccountId>DOMAIN\John.Doe</pc:AccountId>
            <pc:AccountType>User</pc:AccountType></pc:Person>
    </my:group>
</my:section2>
</my:myFields> 
```

以下表达式*同时*返回DOMAIN\John.Green 和 DOMAIN\John.Smith...

```
/descendant::my:section1/my:group/pc:Person/pc:DisplayName[1] 
```

关闭但没有雪茄。

我需要两个单独的表达式；一种选择 DOMAIN\John.Green，另一种选择 DOMAIN\John.Q.Public。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:50:59.763

您在错误的地方使用了谓词。

你的表情，

`/descendant::my:section1/my:group/pc:Person/pc:DisplayName[1]`

返回一组`pc:DisplayName`元素，它们是其对应父级（`pc:Person`元素）中的第一个元素，因此您可以得到`DOMAIN\John.Green`和`DOMAIN\john.smith`

它基本上*是每个**中**的**第`DisplayName`**一个`Person``group``section1`*

您想要的是*每个 each**中*`DisplayName`的***第`Person`***一个，它转换为以下 XPath 表达式： *`group``section1`*`/descendant::my:section1/my:group/pc:Person[1]/pc:DisplayName`

# scala - 如何从 CL 构建在 eclipse scala 插件中创建的 scala 应用程序

> ID：12585075
> 
> 赞同：1
> 
> 时间：2012-09-25T14:24:26.493
> 
> 标签：scala, eclipse-plugin

我第一次开发了一个 scala 应用程序，但我必须使用“一键式”类型的脚本来部署它，该脚本可以在没有 ECLIPSE 的情况下从源代码运行和构建 scala 应用程序。

因为我对 scala 完全陌生，所以我不知道如何告诉它我所有的源文件在哪里等等......让它从命令行构建我的应用程序。我还有 2 个第 3 方 .jar 库，我需要告诉 scala 编译器链接到...

有这方面的文件吗？或者示例命令行？我的项目层次结构是：

*   src/packagename：包含所有 .scala
*   bin/packagename：包含 all.class 文件
*   libs/ -> 包含 2 个 .jar 文件，我需要以某种方式导入

我正在研究 debian linux

编辑：我在 Eclipse 中发现了这种导出能力，所以我创建了一个 .java 文件并从中调用我的主要 scala 对象。然后我导出为一个可运行的 jar。但是，当我运行新的可运行 jar “sudo java runnable.jar”时，它显示“类未找到异常：runnable.jar”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:09:26.193

你应该看看[https://github.com/harrah/xsbt/wiki](https://github.com/harrah/xsbt/wiki)这是构建 Scala 项目的常用方法。浏览 wiki 中的教程，了解如何组织目录结构，以便一切正常运行。

如果您想将它与 eclipse 结合，请查看此插件：[https ://github.com/typesafehub/sbteclipse](https://github.com/typesafehub/sbteclipse)

# jsf - RichFaces 3 到 RichFaces 4 迁移

> ID：12585086
> 
> 赞同：4
> 
> 时间：2012-09-25T14:25:01.127
> 
> 标签：jsf, richfaces

我目前正在从事一个项目，我想从 3.3.3.Final 版本迁移到 RichFaces 4。我在想...

*   在迁移之前我应该​​考虑或知道或考虑什么重要的事情？

*   （可能是一个愚蠢的问题，但是......）你能“混合”richfaces 3 和richfaces 4 吗？

我想进行切换的主要原因之一是使用richfaces 4 自动完成功能，有没有办法使用richfaces 3 做这样的事情，或者迁移是最简单的？

我正在使用 JSF。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-26T04:30:51.793

**TLDR：** RichFaces 在 2016 年 6 月达到了生命的终点。这是一个管理不善的项目灾难，不值得更好。

请注意，官方迁移指南仅完成了大约 30%。作为衡量标准，我在 2011 年根据迁移指南编写了一个 378 行的 XSLT 样式表。然后我将这个项目搁置到 2015 年 6 月，根据进一步的调查并让它工作，它已经达到了 1090 行。请记住，任何 XSLT 样式表都有一些开销，378/1090 = 大约 35%。

完成迁移指南中的说明后：

1.  打开您在相邻浏览器选项卡中使用的每个组件的 TLD/VLD 生成的文档，每个版本一个，并仔细比较它们。属性名称和用途有数十处未记录的更改，并且一些属性已从父容器移至子容器。

2.  还有一些重要的东西刚刚被随意删除了，比如`rich:page`和`rich:layout.`

    我将在本文末尾提供一些我发现的额外内容的列表。

3.  然后，您将面临令人不快的发现，即他们还更改了大量自己的样式类名称，因此，如果您已在自己的样式表中为任何这些定义了样式，您还有更多工作要做。

4.  您还会发现他们声称您可以定义自己的样式类并在丰富的组件中指定它们以实现您自己的样式的说法是完全不真实的。您的样式类应用于包含级别，但在许多情况下，例如他们认为适合在表格单元格级别定义字体等的表格单元格，您可以覆盖它们的唯一方法是通过名称重新定义其单元格样式。

5.  您还必须确保您的样式表包含在 Rich Faces 样式表之后。在 3.3 中，这是自动的，因为首先包含了他们的。他们现在最后包含在内，因此您必须`h:outputStylesheet`尽可能晚地使用并这样做，以确保它是在之后生成的。

我使用 XSLT 转换来实现迁移指南并完成上面的 1-2。它目前有超过 1000 行，我还没有完成。为什么他们自己不能提供这样的东西对我来说是个谜。

为什么认为有必要在第 3 版和第 4 版之间进行如此重大的更改是另一个更深层次的谜团。这是一个管理很差的产品。我不会再次迁移它或重新部署它。

**编辑**我发现的未记录的更改（为简洁起见，使用 XPath 语法）：

*   `a4j:status`

    1.  文档在这一点上含糊不清，但该`for=`属性已被删除：它现在默认在最近的 parent 内运行`a4j:region`，除非通过`status=`属性与特定小部件有关联。因此，如果您在同一区域内有多个，它们现在将全部开火。

    2.  如果您希望它通过您应用到特定的小部件，`status=`您必须更改对应`a4j:status/@id`的`@name`属性。

    3.  在你修复所有这些之后，它仍然不起作用：

        *   `a4j:status`带有（`@for`已删除）属性不会停止
        *   有一个`@name`属性并且 no`@id`不会做任何事情
        *   并且两者`@name`都`@id`不会停止。
*   `rich:column/@breakBefore`现在`breakRowBefore`

*   `rich:page`删除。

*   `rich:layout`删除。

*   `rich:column/@sortOrder`现在必须小写。

*   `rich:dropDownMenu/@value`现在`rich:dropDownMenu/@label`

*   `rich:dropDownMenu/@direction`和`rich:dropDownMenu/@jointPoint`

    这些值已分别从`{top-left, top-right, bottom-left, bottom-right}`更改`{tl, tr, bl, br}`为`{topLeft, topRight, bottomLeft, bottomRight}`。

*   `rich:contextMenu/@submitMode`, `rich:dropDownMenu/@submitMode`,`rich:menuItem/@submitMode`

    这些都是现在`rich:<whatever>/@mode`，`"none"`需要将值更改为`"client"`.

*   `rich:isUserInRole`

    对于 Mojarra 2.2.08 和 EL 2.2，至少对我而言，这已经不再有效。幸运的是，有了 EL 2.2，您不再需要它并且可以使用`request.isUserInRole(...)`.

*   `rich:menuGroup/@value`现在`rich:menuGroup/@label`。

*   `rich:tab/@label`现在`rich:tab/@header`。

*   `rich:tab/f:facet/@name[.='label']`现在`rich:tab/f:facet/@name[.='header']`。

*   `rich:tabPanel/@activeTabClass`, `rich:tabPanel/@contentStyle`, `rich:tabPanel/@disabledTabClass`, `rich:tabPanel/@inactiveTabClass`,`rich:tabPanel/@tabClass`

    现在`tabActiveHeaderClass`, `tabContentClass`, `tabDisabledHeaderClass`, `tabHeaderClass`, `tabInactiveHeaderClass`,`tabContentClass`分别。

*   `rich:tree/@adviseNodeOpened`

    这已被删除和`rich:treeNode/@expanded`添加。这没有很好的记录：它必须是一个 EL，例如`"#{true}"`， not `"true"`，它*可以*是树节点的 bean 属性，例如`"#{node.expanded}"`，或任何其他 bean；必须是布尔值。（新`rich:collapsibleSubTable/@expanded`属性也是如此。）

*   `rich:tree/@nodeFace`现在`rich:tree/@nodeType`。

*   `rich:tree/@switchType`现在`rich:tree/@toggleType`和可能`rich:tree/@selectionType`。

*   `rich:tree/@treeNodeVar`现在`var`，或者可能刚刚删除。

*   `rich:treeNodesAdaptor`

    现在`rich:treeModelAdaptor,`不再处理数组、节点集、...或任何不是 a`Map`或`Iterable`. 它也失去了它的`var`属性，据我所知，它完全破坏了它以供嵌套使用。现在唯一`var`可用的属性是祖先的属性`rich:tree`。因此，例如，如果您同时想要父节点和当前子节点，它们根本不可用。此更改需要进行重要的重写或以下内容。

    老的：

    ```
     <rich:tree>
          <rich:treeNodesAdapter var="vm_host">
              <rich:treeNode .../>
              <rich:treeNodesAdapter var="vm_guest">
                  <rich:treeNode .../>
              </rich:treeNodesAdapter>
          </rich:treeNodesAdapter>
      </rich:tree> 
    ```

    新的：

    ```
     <rich:tree ... var="node"> <!-- Add a 'var' attribute -->
          <rich:treeModelAdapter>
              <c:set var="vm_host" value="#{node}"/>
              <rich:treeNode .../>
              <rich:treeModelAdapter>
                  <c:set var="vm_guest" value="#{node}"/>
                  <rich:treeNode .../>
              </rich:treeModelAdapter>
          </rich:treeModelAdapter>
      </rich:tree> 
    ```

    您也可以使用`<ui:param>`代替`<c:set>`.

RichFaces 拒绝错误检查属性名称使转换过程变得更加困难。您可以继续使用旧名称，但它们只是不起作用。默默。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T14:41:48.113

> *在迁移之前我应该​​考虑或知道或考虑什么重要的事情？*

他们的建议是遵循他们自己的[RichFaces 3.3.x - 4.x 迁移指南](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration)——这似乎远未完成，请参阅[下面的 EJP 回答](https://stackoverflow.com/a/31064946)以获得真实体验。

* * *

> *（可能是一个愚蠢的问题，但是......）你能“混合”richfaces 3 和richfaces 4 吗？*

不，你不能。它会与自己发生冲突。

# linux - 退出 bash 脚本时终止在远程服务器中启动的无限循环

> ID：12585089
> 
> 赞同：0
> 
> 时间：2012-09-25T14:25:13.197
> 
> 标签：linux, bash

在后台无限循环执行命令的脚本

```
<SOMETHING ELSE AT START OF SCRIPT>

cmd='while true;
do
    ps aux | head;
    sleep 1;
done > $FILE'    

ssh root@$SERVER $cmd &
...
...
<SOME OTHER TASKS>
...
...
( at the end of this script, how to kill the above snippet executing in remote server)
[ kindly note i dont want to wait as the while loop is infinite ] 
```

阅读并尝试了一些来自 stackoverflow 的帖子，但找不到此问题的确切解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:34:41.383

如果您想在脚本结束时终止在后台运行的 ssh 进程，只需执行以下操作：

```
kill $! 
```

我认为这是您在后台启动的唯一（或最后一个）过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:08:11.513

而不是无限循环，使用哨兵文件：

```
cmd='while [ -r /tmp/somefile];
do
  # stuff
done > $FILE'

ssh root@$SERVER touch /tmp/somefile
ssh root@$SERVER $cmd &
# do other stuff
ssh root@$SERVER rm -f /tmp/somefile 
```

这遵循您当前将远程命令放在变量中的做法，但应考虑反对其他地方引用的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:55:21.090

尝试以下顺序

```
CTRL+Z
fg
CTRL+C 
```

或者

```
jobs
kill %jobspec 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:33:41.463

要杀死属于登录用户的所有内容，您可以尝试：

```
 whois=`w|grep $user|awk '{print $2}'`;user=root; ssh $user@server -C "ps auwx|grep $whois|awk '{print \$2}'" 
```

这将列出您刚刚登录的用户拥有的所有进程 - 只需添加 |xargs kill -9

```
 whois=`w|grep $user|awk '{print $2}'`;user=root; ssh $user@server -C "ps auwx|grep $whois|awk '{print \$2}'|xargs kill -9  "

 whois=`w|grep $user|awk '{print $2}'`;user=root; ssh $user@server -C "ps auwx|grep $whois|awk '{print \$2}'|awk '{print "kill -9 " $1}'|/bin/sh " 
```

# c# - 重新连接订阅到集线器的连接会导致立即断开连接

> ID：12585090
> 
> 赞同：1
> 
> 时间：2012-09-25T14:25:13.650
> 
> 标签：c#, signalr

采取以下控制台应用程序

```
 static void Main(string[] args)
    {
        Thread connector = new Thread(Connector);
        connector.Start();

        while (true)
        {
            Thread.Sleep(500);
        }
    }

    private static void Connector()
    {
        SignalR.Client.Hubs.HubConnection connection = new SignalR.Client.Hubs.HubConnection("http://192.168.42.10:1327/Chat");

        SignalR.Client.Hubs.IHubProxy loginHub = connection.CreateProxy("LoginHub");

        connection.Received += connection_Received;
        connection.Reconnected += connection_Reconnected;
        connection.StateChanged += connection_StateChanged;
        connection.Error += connection_Error;
        connection.Closed += connection_Closed;

        connection.Start().Wait();
    } 
```

LoginHub 实现 IDisconnect。

如果我启动应用程序，让它连接，拉网线，等待服务器端断开事件触发，重新连接网线，客户端将重新连接，然后立即关闭其连接。

如果我在服务器端断开连接触发之前拔下并重新插入网络电缆，则连接重新连接就好了。

这是预期的行为吗？重新连接应该如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:11:31.307

已编辑（重新阅读并看到我并不清楚）：当客户端立即与 SSE 断开连接时，在大多数情况下（在 0.5.3 中），它将被抛出无限重新连接循环（参见下面的错误）。

但是，在某些情况下，它会重新连接，然后立即断开连接，这是有意的行为。我们之所以强制客户端断开连接，是因为此时服务器已经完全忘记了客户端。因此客户端需要通过 $.connection.hub.start 等重新实例化它的连接。

在下一个版本中，我们修复了无限重新连接问题，并在流程中添加了“警告”，以通知开发人员服务器可能已关闭（onConnectionSlow）。如果您成功重新连接并且服务器忘记了您，您将被告知然后断开连接。

这是对该错误的引用： [https ://github.com/SignalR/SignalR/issues/687](https://github.com/SignalR/SignalR/issues/687)

# sql-server - SQL Server：请执行动态 sql 帮助

> ID：12585091
> 
> 赞同：0
> 
> 时间：2012-09-25T14:25:17.413
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, stored-procedures

```
EXEC SP_EXECUTESQL 
            @DynamicSQL
        ,   N'@HostIDs VARCHAR(MAX) OUTPUT'
        ,   @HostIDs OUTPUT;

PRINT @HostIDs;

SELECT @HostIDs AS HostIDs;
SET @UpdateSQL = '
            EXECUTE [dbo].[usp_Win7_HostUpdater_NEW]
            @HostID = ''' + @HostIDs + ''' , 
            @PackageID = ''' + @PackageID  + ''' , 
            @MigrationFlag = ''' + @MigrationFlagID + ''' , 
            @Manufacturer = ' + @Manufacturer + ' , 
            @Product = ' + @Product + ' , 
            @Version = ' + @Version + ' ,
            @Reason = ' + @Reason + ' ,
            @Contact = ' + @Contact + '
        ';

        SELECT @UpdateSQL AS UpdateSQL;
        PRINT @UpdateSQL;           
        EXEC( @UpdateSQL )  
  END 
```

我在 SQL Server 2005 和 2008 上都有一个存储过程，其中上面的代码是

它返回一个`VARCHAR(MAX)`由逗号分隔的数字。

现在这个返回值超过了 600k 个字符。如果我在 SQL Server 2005 上执行此操作，它的工作时间为 50%，`@HostIDs`始终填充并`@UpdateSQL`使用正确的值生成并执行。

在 SQL Server 2008 上，`@HostIDs`已填充但`@UpdateSQL`始终为 NULL

这让我非常奇怪

任何人都可以阐明我的奇怪问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:19:29.973

如果任何参数为空，则整个语句将为空。您可以通过执行以下操作来解决它（我不知道数据类型是什么，但有时您需要将它们从 int/bool/etc. 类型转换为 varchar 以使串联工作）：

```
SET @UpdateSQL = '
            EXECUTE [dbo].[usp_Win7_HostUpdater_NEW]
            @HostID = ' + ISNULL('''' + @HostIDs + '''', 'null') + ' , 
            @PackageID = ' + ISNULL('''' + @PackageID + '''', 'null')  + ' , 
            @MigrationFlag = ' + ISNULL('''' + @MigrationFlagID + '''', 'null') + ' , 
            @Manufacturer = ' + ISNULL(@Manufacturer, 'null') + ' , 
            @Product = ' + ISNULL(@Product, 'null') + ' , 
            @Version = ' + ISNULL(@Version, 'null') + ' ,
            @Reason = ' + ISNULL(@Reason, 'null') + ' ,
            @Contact = ' + ISNULL(@Contact, 'null') + '
        '; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:46:44.863

看看这些

```
SET CONCAT_NULL_YIELDS_NULL OFF
select 'abc' + null + 'def'
--- abcdef

SET CONCAT_NULL_YIELDS_NULL ON
select 'abc' + null + 'def'
--- NULL 
```

这是解决此问题的一种方法，即在构建字符串之前将其关闭，然后再重新启动。字符串连接序列中的任何 NULL 都会将整个语句呈现为 NULL，这就解释了`it works like 50% of the time`- 这些是所有变量都不为 null 的情况。

不过完全同意 freefaller 的观点，除非问题是对更大谜题的抽象，否则没有理由构建动态 SQL 并在直接执行适用于所示特定代码段时执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:05:04.413

这是因为您没有处理空值

您可以使用 sp_executesql 而不是 exec 它比 exec 有一些好处

# java - Autowire 'byType' 的 Spring Bean 覆盖问题

> ID：12585097
> 
> 赞同：0
> 
> 时间：2012-09-25T14:25:45.493
> 
> 标签：java, spring, javabeans, autowired, overriding

我有一个具有 autowired="byType" 属性的 bean 名称“MasterService”。在该 bean 中，我有一个属性为 AccountService accountService；我已经将此 bean 的实现注册为“DefaultAccountService”。现在有人想扩展“DefaultAccountService”并创建“CustomAccountService”。并且还注册，但在“MasterService”的初始化期间获得了 AccountService [DefaultAccountService 和 CustomAccountService] 有 2 个 bean 的异常。我们不知道如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:30:09.803

你需要 @Qualifier 注释

看这个例子：

[http://www.mkyong.com/spring/spring-autowireing-qualifier-example/](http://www.mkyong.com/spring/spring-autowiring-qualifier-example/)

在您的情况下，它将是：

```
@Autowired
@Qualifier("customAccountService")
private  AccountService accountService; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:59:18.993

如果您想覆盖默认的自动装配，我认为如果您手动装配该特定服务会更清楚，因此维护人员乍一看就知道在这种情况下*不*使用默认值：

```
<bean id="masterService" ... autowired="byType">
    <property name="accountService" ref="customAccountService"/>
</bean> 
```

如果您只是不想手动连接任何东西，肯特的回答就可以了。

# google-analytics - 默认情况下在 AJAX 上触发分析？

> ID：12585101
> 
> 赞同：0
> 
> 时间：2012-09-25T14:25:54.587
> 
> 标签：google-analytics

我正在尝试让 Google Analytics Site Search 工作，但我们的搜索是基于 # 而不是基于？，这意味着参数没有被拾取。

我想截获发送到 GA 的 url 并将 # 替换为 ?，但我很惊讶地看到我们的 AJAX 调用在每次搜索时都已发送到 GA。这种行为来自哪里 - 默认情况下 GA 会自动绑定到 AjaxComplete 吗？那我怎么能完成拦截呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:55:32.103

AJAX 调用的更新是由 jQuery 完成的，而不是 GA。有用。

我的问题的解决方法是使用带有 _setAllowAnchor 的额外指令，它指示 GA 将 # 视为？。

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking)

我们在这里找到了解决方案： [http ://www.lunametrics.com/blog/2009/02/04/setallowanchor/](http://www.lunametrics.com/blog/2009/02/04/setallowanchor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:48:27.757

另一种方法是使用 Google Analytics 中的搜索和替换过滤器。

jQuery地址正在将url重写`/Search#reg=term`为`/Search/reg=term`

我们使用`^\/Search\/`带有替换字符串的搜索字符串作为`/Search?`

# actionscript-3 - 使用事件更新多个视图之一

> ID：12585103
> 
> 赞同：0
> 
> 时间：2012-09-25T14:26:03.933
> 
> 标签：actionscript-3, flash, events

我不完全了解actionscript中的事件机制，所以如果问题被转储，请原谅。假设我们有一个`Controller`(extends `EventDispatcher`) 和几个视图，请注意视图可以是各种类的实例。假设每个视图都在监听`CustomEvent.SOMETHING_CHANGED`。问题是如果我这样做`dispatchEvent(new CustomEvent(CustomEvent.SOMETHING_CHANGED))`，`Controller`事件是否会出现在每个听众身上，或者它会被第一个观点捕捉到并且不会更进一步。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:30:14.003

是的，它将被传递给所有侦听器，直到其中一个调用事件对象的 stopImmediatePropagation 方法（这只会在事件可取消时停止事件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:41:54.973

任何对象要观察另一个对象派发的事件，有几个条件：

1.  该对象必须是显示对象。
2.  调度该事件的对象必须是侦听对象的子对象。
3.  如果父对象正在侦听冒泡阶段（默认），则在事件创建期间必须将冒泡设置为 true。

    ```
     dispatchEvent(new Event(TYPE_NAME, true)); 
    ```

4.  否则它可以在捕获阶段被捕获，添加事件监听器'useCapture = true 来完成这个。

    ```
     addEventListener(TYPE_NAME, onFuncName, true); 
    ```

在所有其他情况下，对象只能在目标阶段捕获由对象本身调度的事件。

这是一个代码示例：

```
package regression 
{
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.KeyboardEvent;
    import flash.events.MouseEvent;
    import flash.events.EventPhase;
    /**
     * ...
     * @author ...
     */
    public class Check_event_listening_1 extends Sprite
    {
        public  const   EVENT_DANCE     : String    = "dance";
        public  const   EVENT_PLAY      : String    = "play";
        public  const   EVENT_YELL      : String    = "yell";
        private var     baby            : Shape     = new Shape();
        private var     mom             : Sprite    = new Sprite();
        private var     stranger        : EventDispatcher = new EventDispatcher();

        public function Check_event_listening_1() 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            trace("test begun");
            addChild(mom);
            mom.addChild(baby);
            stage.addEventListener(EVENT_YELL, onEvent);
            this.addEventListener(EVENT_YELL, onEvent);
            mom.addEventListener(EVENT_YELL, onEvent);
            baby.addEventListener(EVENT_YELL, onEvent);
            stranger.addEventListener(EVENT_YELL, onEvent);
            trace("\nTest1 - Stranger yells with no bubbling");
            stranger.dispatchEvent(new Event(EVENT_YELL, false));
            trace("\nTest2 - Stranger yells with bubbling");
            stranger.dispatchEvent(new Event(EVENT_YELL, true));

            stage.addEventListener(EVENT_PLAY, onEvent);
            this.addEventListener(EVENT_PLAY, onEvent);
            mom.addEventListener(EVENT_PLAY, onEvent);
            baby.addEventListener(EVENT_PLAY, onEvent);
            stranger.addEventListener(EVENT_PLAY, onEvent);
            trace("\nTest3 - baby plays with no bubbling");
            baby.dispatchEvent(new Event(EVENT_PLAY, false));
            trace("\nTest4 - baby plays with bubbling");
            baby.dispatchEvent(new Event(EVENT_PLAY, true));
            trace("\nTest5 - baby plays with bubbling but is not a child of mom");
            mom.removeChild(baby);
            baby.dispatchEvent(new Event(EVENT_PLAY, true));
            mom.addChild(baby);

            stage.addEventListener(EVENT_DANCE, onEvent, true);
            this.addEventListener(EVENT_DANCE, onEvent, true);
            mom.addEventListener(EVENT_DANCE, onEvent, true);
            baby.addEventListener(EVENT_DANCE, onEvent, true);
            trace("\nTest6 - Mom dances without bubbling - everyone is listening during capture phase(not target and bubble phase)");
            mom.dispatchEvent(new Event(EVENT_DANCE, false));
            trace("\nTest7 - Mom dances with bubbling - everyone is listening during capture phase(not target and bubble phase)");
            mom.dispatchEvent(new Event(EVENT_DANCE, true));
        }

        private function onEvent(e : Event):void
        {
            trace("Event was captured");
            trace("\nTYPE : ", e.type, "\nTARGET : ", objToName(e.target), "\nCURRENT TARGET : ", objToName(e.currentTarget), "\nPHASE : ", phaseToString(e.eventPhase));
        }

        private function phaseToString(phase : int):String
        {
            switch(phase)
            {
                case EventPhase.AT_TARGET :
                    return "TARGET";
                case EventPhase.BUBBLING_PHASE :
                    return "BUBBLING";
                case EventPhase.CAPTURING_PHASE :
                    return "CAPTURE";
                default:
                    return "UNKNOWN";
            }

        }

        private function objToName(obj : Object):String
        {
            if (obj == stage) return "STAGE";
            else if (obj == this) return "MAIN";
            else if (obj == mom) return "Mom";
            else if (obj == baby) return "Baby";
            else if (obj == stranger) return "Stranger";
            else return "Unknown"
        }

    }

} 
```

我很高兴能对这个主题有更多的了解。

# mysql - 执行插入/删除批处理spring-jdbc/mysql的最佳方法

> ID：12585106
> 
> 赞同：1
> 
> 时间：2012-09-25T14:26:17.867
> 
> 标签：mysql, sql, batch-file, spring-jdbc, batch-updates

首先，我会尝试描述我愿意做什么，然后，我会问我的问题。我需要执行以下操作：

*   列出与某些条件对应的所有行
*   做一些测试（例如：检查它是否尚未插入），如果测试通过，则将行插入另一个数据库
*   删除行（是否通过测试）

以下是我的实现

```
List<MyObject> toAdd = new ArrayList<MyObject>();
for(MyObject obj:list){
    if(!notYetInserted(obj){
        toAdd.add(obj);
    }
}
myObjectDAO.insertList(toAdd);
myObjectDAO.deleteList(list); 
```

服务方法被标记为事务性的。

在我的 DAO 中，deleteList 和 insertList 的方法非常相似，所以我将在这里放置插入方法。

```
public void insertList(final List<MyObject> list){
String sql = "INSERT INTO table_test " +
    "(col_id, col2, col3,col4) VALUES (?, ?, ?,?)";

List<Object[]> paramList = new ArrayList<Object[]>();

for (MyObject myObject : list) {
    paramList.add(new Object[] {myObject.getColId(), 
        myObject.getCol2(), myObject .getCol3(), myObject.getCol4()}
    );
}
simpleJdbcTemplate.batchUpdate(sql, paramList); 
```

}

我不确定执行此类操作的最佳方法，我[在这里](http://k2java.blogspot.com/2011/05/spring-simplejdbctemplate-batchupdate.html)读到，在循环内调用更新可能会减慢系统速度（特别是在我的情况下，我一次将有大约 100K 插入/删除）。我想知道 DAO 中的这些额外循环是否不会进一步减慢我的系统，如果在处理该批次时反复发生问题会发生什么（我还考虑将测试从服务移动到 DAO，以便只有一个循环和一个额外的测试，我真的不知道这是否是个好主意）。所以，我想听听你的建议。非常感谢。

PS：如果您需要更多详细信息，请随时询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:37:42.240

This is not necessarily a bad approach, but you are right, it might be really slow. If I were to do a process like this that inserted or deleted this many rows I would probably do it all in a stored procedure. My code would just execute the proc and the proc would handle the list and the enumeration through it (as well as the inserts and deletes).

# jquery - 如何在 jQuery 中模拟单击事件以使幻灯片放映自动前进

> ID：12585107
> 
> 赞同：1
> 
> 时间：2012-09-25T14:26:18.353
> 
> 标签：jquery, click, slider, slideshow

我有**[这个](http://www.flymedia.ro/design/slider.html)幻灯片**。我希望它**自动前进，除非有人点击导航**元素。我正在考虑在特定时间（例如 3000 毫秒）模拟每个链接上的连续点击事件，但我的代码无效（我承认 JavaScript/jQuery 不太好）。Martin Angelov's [nice tutorial](http://tutorialzine.com/2011/01/how-to-make-auto-advancing-slideshows/)，不幸的是不能满足我的需要。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:02:50.963

改编自链接教程中的功能的版本。代码可以更简洁，但我试图尽可能清楚地说明发生了什么。

```
 (function autoAdvance(index){
    //We use index to keep track of which nav link you should be clicking on.

    //Click on the next nav link
    var allNavLinks = $('#slidernav a'); //This selector gets every anchor that is a descendant of your slidernav list
    var currentNavLink = allNavLinks.get(index);
    currentNavLink.click(); //Simulates a click on your nav link

    // Schedule your next autoAdvance
    var clickNextFn = function(){autoAdvance((index+1)%allNavLinks.length)}; //You need to wrap the callback to autoAdvance in a function so that setTimeout can evaluate it later.
    timeOut = setTimeout(clickNextFn,5000); //Will call the clickNextFn in 5 seconds
})(0); //Start the function by auto clicking on index 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:32:43.443

```
$("#ButtonID").click() 
```

该`.click()`函数模拟 jQuery 中的单击。请注意，此单击不限于按钮。

# python - How do I instantiate a specific subclass based on arguments passed to __init__?

> ID：12585115
> 
> 赞同：0
> 
> 时间：2012-09-25T14:27:00.690
> 
> 标签：python, python-2.7

I'm wrapping a remote XML-based API from python 2.7\. The API throws errors by sending along a `<statusCode>` element as well as a `<statusDescription>` element. Right now, I catch this condition and raise a single exception type. Something like:

```
class ApiError(Exception):
    pass

def process_response(response):
    if not response.success:
        raise ApiError(response.statusDescription) 
```

This works fine, except I now want to handle errors in a more sophisticated fashion. Since I have the `statusCode` element, I would like to raise a specific subclass of ApiError based on the statusCode. Effectively, I want my wrapper to be extended like this:

```
class ApiError(Exception):
    def __init__(self, description, code):
        # How do I change self to be a different type?
        if code == 123:
            return NotFoundError(description, code)
        elif code == 456:
            return NotWorkingError(description, code)

class NotFoundError(ApiError):
    pass

class NotWorkingError(ApiError):
    pass

def process_response(response):
    if not response.success:
        raise ApiError(response.statusDescription, response.statusCode)

def uses_the_api():
    try:
        response = call_remote_api()
    except NotFoundError, e:
        handle_not_found(e)
    except NotWorkingError, e:
        handle_not_working(e) 
```

The machinery for tying specific `statusCode`'s to specific subclasses is straightforward. But what I want is for that to be buried inside of ApiError somewhere. Specifically, I don't want to change process_response except to pass in the value `statusCode`.

I've looked at metaclasses, but not sure they help the situation, since `__new__` gets write-time arguments, not run-time arguments. Similarly unhelpful is hacking around `__init__` since it isn't intended to return an instance. So, how do I instantiate a specific subclass based on arguments passed to `__init__`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:32:43.640

A factory function is going to be much easier to understand. Use a dictionary to map codes to exception classes:

```
exceptions = {
    123: NotFoundError,
    456: NotWorkingError,
    # ...
}

def exceptionFactory(description, code):
    return exceptions[code](description, code) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:29:45.760

You could create a series of subclasses and use the base class' `__new__` as a factory for the children. However, that's probably overkill here; you could just create a simple factory method or class. If you wanted to get fancy in another direction though, you could create a metaclass for the base class that would automatically add your subclasses to a factory when they are created. Something like:

```
class ApiErrorRegistry(type):

    code_map = {}

    def __new__(cls, name, bases, attrs):

        try:
            mapped_code = attrs.pop('__code__')
        except KeyError:
            if name != 'ApiError':
                raise TypeError('ApiError subclasses must define a __code__.')
            mapped_code = None
        new_class = super(ApiErrorRegistry, cls).__new__(cls, name, bases, attrs)
        if mapped_code is not None:
            ApiErrorRegistry.code_map[mapped_code] = new_class
        return new_class

def build_api_error(description, code):

    try:
        return ApiErrorRegistry.code_map[code](description, code)
    except KeyError:
        raise ValueError('No error for code %s registered.' % code)

class ApiError(Exception):

    __metaclass__ = ApiErrorRegistry

class NotFoundError(ApiError):

    __code__ = 123

class NotWorkingError(ApiError):

    __code__ = 456

def process_response(response):

    if not response.success:
        raise build_api_error(response.statusDescription, response.statusCode)

def uses_the_api():
    try:
        response = call_remote_api()
    except ApiError as e:
        handle_error(e) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:30:23.943

Create a function that will yield requested error class basing on description. Something like this:

```
def get_valid_exception(description, code):
    if code == 123:
        return NotFoundError(description, code)
    elif code == 456:
        return NotWorkingError(description, code) 
```

Depending on your requirements and future changes, you could create exceptions with different arguments or do anything else, without affecting code that uses this function.

Then in your code you can use it like this:

```
def process_response(response):
    if not response.success:
        raise get_valid_exception(response.statusDescription, response.statusCode) 
```

# objective-c - UICollectionView：如何在委托方法中设置特定项目后获取项目大小

> ID：12585118
> 
> 赞同：14
> 
> 时间：2012-09-25T14:27:04.683
> 
> 标签：objective-c, ios6, uicollectionview

我正在摆弄新的 UICollectionView 和 UICollectionViewLayout 类。我创建了一个自定义布局，继承 UICollectionViewFlowLayout。

我的单元格大小正在动态变化，我使用下面的委托方法设置项目大小

```
- (CGSize)collectionView:(UICollectionView *)collectionView
                  layout:(UICollectionViewLayout*)collectionViewLayout
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

      NSLog(@"SETTING SIZE FOR ITEM AT INDEX %d", indexPath.row);
      return CGSizeMake(80, 80);
} 
```

现在，在我的自定义 UICollectionViewFlowLayout 类的 prepareLayout 方法下，我需要访问这些大小变量，以便我可以计算如何放置它们并为 layoutAttributesForItemAtIndexPath 缓存它们。

但是，我似乎无法在 UICollectionView 或 UICollectionViewFlowLayout 下找到任何属性来达到我在委托方法中设置的自定义项目大小。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T15:50:45.550

自己找到的。

像不省略一样实现自定义类`UICollectionViewDelegateFlowLayout`

```
@interface SECollectionViewCustomLayout : UICollectionViewFlowLayout 
                                          <UICollectionViewDelegateFlowLayout> 
```

然后你可以打电话

```
CGSize size = [self collectionView:self.collectionView 
                            layout:self 
            sizeForItemAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-06T07:41:29.970

查看各种`UICollectionView...`头文件，并观看[WWDC 2012 Session 219 - Advanced Collection Views and Building Custom Layouts](https://developer.apple.com/videos/wwdc/2012/)视频（从大约 6:50 开始），似乎可扩展委托模式利用了动态类型来确保布局可以正确访问它的扩展委托方法。

## 简而言之...

1.  如果您使用自己的委托定义自定义布局，请在布局的头文件中定义该委托协议。
2.  您的委托对象（通常`UI(Collection)ViewController`是管理集合视图的委托对象）应声明自己以支持此自定义协议。
    *   *如果您的布局只是其`UICollectionViewFlowLayout`子类或子类，这仅意味着声明符合`UICollectionViewDelegateFlowLayout`.*
    *   *`.m`如果您不想`#import`将布局标题放入委托的界面，请随意在文件中的类扩展中执行此操作。*
3.  要从布局中访问委托方法，请调用集合视图的委托。
    *   *使用布局的`collectionView`属性，并将**委托转换为符合所需协议的对象**以说服编译器。*
    *   *`respondsToSelector:`在调用可选委托方法之前，不要忘记像往常一样检查委托。事实上，如果你愿意，对所有方法都这样做并没有什么坏处，因为类型转换意味着没有运行时保证委托甚至会实现所需的方法。*

## 在代码中...

因此，如果您实现了一个自定义布局，该布局需要一个委托来获取其某些信息，您的标题可能如下所示：

```
@protocol CollectionViewDelegateCustomLayout <UICollectionViewDelegate>
- (BOOL)collectionView:(UICollectionView *)collectionView
                layout:(UICollectionViewLayout *)layout
shouldDoSomethingMindblowingAtIndexPath:(NSIndexPath *)indexPath;
@end

@interface CustomLayout : UICollectionViewLayout
// ...
@end 
```

您的委托声明一致性（我在此处的实现文件中这样做了）：

```
#import "CustomLayout.h"

@interface MyCollectionViewController () <CollectionViewDelegateCustomLayout>
@end

@implementation
// ...
- (BOOL)collectionView:(UICollectionView *)collectionView
                layout:(UICollectionViewLayout *)layout
shouldDoSomethingMindblowingAtIndexPath:(NSIndexPath *)indexPath
{
    return [self canDoSomethingMindblowing];
}
// ...
@end 
```

在您的布局实现中，您可以像这样访问该方法：

```
BOOL blowMind;
if ([self.collectionView.delegate respondsToSelector:@selecor(collectionView:layout:shouldDoSomethingMindblowingAtIndexPath:)]) {
    blowMind = [(id<CollectionViewDelegateCustomLayout>)self.collectionView.delegate collectionView:self.collectionView
                                                                                             layout:self
                                                            shouldDoSomethingMindblowingAtIndexPath:indexPath];
} else {
    // Perhaps the layout also has a property for this, if the delegate
    // doesn't support dynamic layout properties...?
    // blowMind = self.blowMind;
} 
```

请注意，在这里进行类型转换是安全的，因为我们正在检查委托是否事先响应该方法。

## 证据...

这只是猜测，但我怀疑这是 Apple 管理`UICollectionViewDelegateFlowLayout`协议的方式。

*   流布局上没有`delegate`属性，所以调用必须通过集合视图的委托。
*   `UICollectionViewController`不公开符合扩展流布局委托（我怀疑它在另一个私有标头中这样做）。
*   `UICollectionView`的`delegate`属性仅声明符合“基本”`UICollectionViewDelegate`协议。同样，我怀疑`UICollectionView`流布局是否使用了私有子类/类别来防止需要进行类型转换。为了进一步强调这一点，Apple 不鼓励`UICollectionView`在文档中进行子类化（[iOS 的集合视图编程指南：创建自定义布局](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CreatingCustomLayouts/CreatingCustomLayouts.html#//apple_ref/doc/uid/TP40012334-CH5-SW8)）：

> 避免继承 UICollectionView。集合视图很少或没有自己的外观。相反，它会从您的数据源对象中提取其所有视图，并从布局对象中提取所有与布局相关的信息。

所以我们开始了。并不复杂，但值得知道如何以范式友好的方式进行操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-15T10:38:22.453

有一个快速版本：

```
self.collectionView(self.collectionView, layout: self.collectionView.collectionViewLayout, sizeForItemAtIndexPath: indexPath) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-05T22:09:11.063

查看GitHub 上的[UICollectionView-FlowLayout](https://github.com/charlieelliott/UICollectionView-FlowLayout)。同样的想法，这只是使访问 flowLayout 的扩展委托方法更加简洁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-25T05:25:01.707

对于后来的读者，IOS 7 有 UICollectionViewFlowLayout 已经定义了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-11T23:20:33.793

在我的情况下，关于布局、单元格布局等的所有内容都在 UIViewController 的 nib 和 UICollectionViewCell 的单独 nib 中定义。`MyCollectionViewCell`包含`UIImageView`自动布局到具有填充/边距但方形的单元格。

我需要圆形图标而不是方形图标，但不想关心我为 iPhone 或 iPad 使用哪个笔尖（我有单独的笔尖用于设备和方向）。

我不想`@selector(collectionView:layout:sizeForItemAtIndexPath:)`在我的视图控制器中实现。

所以，在里面`collectionView:cellForItemAtIndexPath:` 我可以使用

```
CGSize size = cell.imageView.bounds.size;
cell.imageView.layer.masksToBounds = YES;
cell.imageView.layer.cornerRadius = size.height/2.0; 
```

因为`collectionView:layout:sizeForItemAtIndexPath:`之前调用`collectionView:cellForItemAtIndexPath:`和布局完成。

您可以查看底部的圆形头像

[![在此处输入图像描述](../Images/042104885ce44b40439f174e9418da2b.png)](https://i.stack.imgur.com/tIhqo.png)

# javascript - 如何为克隆的元素创建新的用户 ID

> ID：12585119
> 
> 赞同：0
> 
> 时间：2012-09-25T14:27:08.803
> 
> 标签：javascript, jquery, uniqueidentifier, cloning

> **可能重复：**
> [jquery 创建一个唯一的 id](https://stackoverflow.com/questions/1817114/jquery-create-a-unique-id)

我正在克隆一个表单，并希望为每个克隆的元素提供一个唯一的 ID。我怎样才能做到这一点？

这是我的脚本：

```
 // Duplicates category select menu 

       $(".add-color").click(function(){
      $(".color-category").clone().removeClass('color-category').appendTo("#we-want-to").find('.submenu-select').addClass('hide');

    });

    $(".add-color-alternate").click(function(){
      $(".color-category-alternate").clone().removeClass('color-category-alternate').appendTo("#we-want-to").find('.submenu-select, .results-table').addClass('hide');

    }); 
```

HTML：

```
 <div id="we-want-to" class="sortable"></div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:50:14.797

试试这个...

```
var i =1; 
 $(".add-color").click(function(){
         $(".color-category").clone().removeClass('color-category').attr('id',i++).appendTo("#we-want-to");
 }); 
```

# android - 在android中编辑数据库的内容

> ID：12585122
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:27:19.160
> 
> 标签：android, sql, sqlite, android-layout, android-intent

我的应用程序中有一个编辑选项卡，用户可以在其中编辑他在注册期间给出的详细信息。在编辑活动中，我有一个保存按钮，单击该按钮可保存数据或将数据更新到数据库中。

代码

```
public void onSave(View btn)
{
    EditText edtName = (EditText) findViewById(R.id.edtNameED);
    EditText edtPass = (EditText) findViewById(R.id.edtPassED);
    EditText edtEmail = (EditText) findViewById(R.id.edtEmailED);
    EditText edtPh = (EditText) findViewById(R.id.edtPhED);
    int id=0;
    String where = DataBase_Server.C_ID+"=?";
    String[] whereArgs = {id+""};
    DataBase_Server database=new DataBase_Server(Edit.this);
    SQLiteDatabase db=database.getWritableDatabase();
    ContentValues values=new ContentValues();
    values.put(DataBase_Server.MOBILE_NO, edtPh.getText().toString());
    values.put(DataBase_Server.PASS, edtPass.getText().toString());
    values.put(DataBase_Server.EMAIL, edtEmail.getText().toString());
    for(int i=0;i<edtName.length();i++)
    {
        id+=(int)edtName.getText().toString().charAt(i);
    }
    Toast.makeText(this,id+"  hello", Toast.LENGTH_LONG).show();
    try
    {
        db.update(DataBase_Server.TABLE, values,where,whereArgs);
    }catch(Exception e){}
    Toast.makeText(this,"UPDATE SUCESSFULL !!", Toast.LENGTH_LONG).show();
    db.close();
    database.close();
} 
```

该代码没有给出一个错误，但它甚至没有更新数据库中的任何内容。即使在用户编辑他的详细信息之后，数据库也根本没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:30:02.583

您正在将名称中所有字符的值相加：

```
for(int i=0;i<edtName.length();i++)
    id+=(int)edtName.getText().toString().charAt(i); 
```

这不太可能是您的真实 ID 值。如果没有符合`WHERE`条件的记录，更新将无声无息地执行任何操作。

您*必须*记住加载数据时的 ID 值，因为名称可能已更改。

# django - 如何强制 Django 将小数保存到浮点数据库列

> ID：12585123
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:27:22.823
> 
> 标签：django, python-2.6

我正在尝试为某种货币计算创建自己的字段，但我无法在我的数据库中使用十进制数据类型，这就是我目前所拥有的。我真的只是在学习自定义字段类型并且不确定我做错了什么。

```
class MoneyField(models.DecimalField):
    """
    """

    __metaclass__ = models.SubfieldBase

    def __init__(self, verbose_name=None, name=None, max_digits=10, decimal_places=2, seperator=',', dp='.', pos='', neg='-', trailneg='', **kwargs):
        models.DecimalField.__init__(self, verbose_name, name, decimal_places=2, max_digits=10, **kwargs)

    def get_internal_type(self):
        return models.DecimalField.__name__

    def pre_save(self, model_instance, add):
        value = getattr(model_instance, self.attname)
        if self.decimal_places > 0:
            dp_modifier = Decimal(1 / Decimal(pow(10, self.decimal_places)))
        else:
            dp_modifier = Decimal(1)
        if value != None:
            value = Decimal(str(value))

        print value
        print type(value.quantize(Decimal(dp_modifier)))
        return value.quantize(Decimal(dp_modifier))

    def to_python(self, value):
        try:
            if self.decimal_places > 0:
                dp_modifier = Decimal(1 / Decimal(pow(10, self.decimal_places)))
            else:
                dp_modifier = Decimal(1)
            if value != None:
                value = Decimal(str(value))
            return super(MoneyField, self).to_python(value).quantize(Decimal(dp_modifier))
        except AttributeError:
            return None

    def get_db_prep_save(self, value, connection):
        return float(value)

    def get_prep_value(self, value):
        return float(value) 
```

例外：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8001/appdata/joinery/costing/cost-boughtin-by-item/glass/1A346B0F-0705-11E2-9E84-7071BCB8D2AB/

Django Version: 1.3.1
Python Version: 2.6.2
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin',
 'appdata.generic',
 'appdata.contacts',
 'appdata.dashboard',
 'appdata.scheduler',
 'appdata.financial',
 'appdata.work',
 'appdata.boughtin',
 'appdata.bespoke',
 'appdata.joinery',
 'appdata.home',
 'appdata.globaltags',
 'appdata.importdata',
 'appdata.database',
 'appdata.ads',
 'appdata.workshop',
 'appdata.transfer',
 'appdata.setup',
 'appdata.languages',
 'appdata.machine_output',
 'appdata.machine_output.modules',
 'appdata.printing',
 'django_cpserver',
 'appdata.djangologdb',
 'raven.contrib.django']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'appdata.middleware.UserAgent',
 'appdata.middleware.SiteLogin',
 'appdata.middleware.RequestIdent',
 'appdata.middleware.ProfilerMiddleware',
 'django.middleware.transaction.TransactionMiddleware',
 'djangologdb.middleware.LoggingMiddleware',
 'raven.contrib.django.middleware.Sentry404CatchMiddleware')

Traceback:
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\JoinerySoft\Development\working folder\appdata\joinery\costing.py" in cost_boughtin
  202\.         net_cost, charge_out, xml = calc_model.objects.cost_by_item(item,get_xml=True)
File "C:\JoinerySoft\Development\working folder\appdata\joinery\models.py" in cost_by_item
  719\.         return self._cost_component_list(item_list, costbook, get_xml, item=item)
File "C:\JoinerySoft\Development\working folder\appdata\joinery\models.py" in _cost_component_list
  699\.             calc_data = self._cost_components(calc_item_list, costbook)
File "C:\JoinerySoft\Development\working folder\appdata\joinery\models.py" in _cost_components
  688\.             calc_item.apply_cost(cost_item, item_cache)
File "C:\JoinerySoft\Development\working folder\appdata\joinery\models.py" in apply_cost
  1024\.         calc_component.save()
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\base.py" in save
  460\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\base.py" in save_base
  526\.                         rows = manager.using(using).filter(pk=pk_val)._update(values)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\query.py" in _update
  491\.         return query.get_compiler(self.db).execute_sql(None)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\sql\compiler.py" in execute_sql
  869\.         cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\sql\compiler.py" in execute_sql
  725\.             sql, params = self.as_sql()
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\sql\compiler.py" in as_sql
  834\.                 val = field.get_db_prep_save(val, connection=self.connection)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\fields\subclassing.py" in inner
  28\.             return func(*args, **kwargs)
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\fields\__init__.py" in get_db_prep_save
  786\.         return connection.ops.value_to_db_decimal(self.to_python(value),
File "C:\JoinerySoft\Development\working folder\lib\site-packages\django\db\models\fields\__init__.py" in to_python
  761\.             return decimal.Decimal(value)
File "C:\JoinerySoft\Development\working folder\lib\decimal.py" in __new__
  653\.                             "First convert the float to a string")

Exception Type: TypeError at /appdata/joinery/costing/cost-boughtin-by-item/glass/1A346B0F-0705-11E2-9E84-7071BCB8D2AB/
Exception Value: Cannot convert float to Decimal.  First convert the float to a string 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:29:36.693

我认为您可能是从错误的方向解决问题。与其尝试将 db 中的 Decimal 字段保存为 float，不如尝试从 float 字段中获取 Decimal 值。

尝试这种性质的东西：

```
class MoneyField(models.FloatField):
    __metaclass__ = models.SubfieldBase

    def to_python(self, value):
        t_value = type(value)

        if t_value is Decimal:
            return value

        elif t_value is float:
            return Decimal.from_float(value)

        elif t_value in (str, unicode,):
            return Decimal(value)

        else:
            raise TypeError('Unsupported value type: %s' % str(t_value))

    def get_prep_value(self, value):
        return float(value) 
```

因此，它的作用与浮点字段相同，因此与 db 中的浮点字段兼容。但是，无论何时检索该值，它都会确保返回浮点数的十进制版本。并且在尝试保存该字段时，它将其转换为浮点数。

没有测试，所以不确定是否 100% 正确，但我认为这应该让你朝着正确的方向前进。最重要的是，您可以强制执行所有金钱方面的事情...

# jquery - 复制控件

> ID：12585126
> 
> 赞同：0
> 
> 时间：2012-09-25T14:27:36.943
> 
> 标签：jquery, drop-down-menu, textbox, grid, kendo-ui

我用一些控件制作了一个界面，来自 Kendo UI。它是一个数字、文本框和下拉列表。它的作用是通过按下“+”按钮创建自身的许多副本，并通过按下它的“-”按钮删除一行。

```
{% extends "saloons/templates/base.html" %}
{% from "ui/forms/macro.html" import wtform %}
{% block content %}
  <form method="POST" action="">
    <table>
        <tr>
            <td>{{ form.order_date.label }}</td>
            <td>{{ form.order_date }}</td>
        </tr>
    </table>
  <div id="grid-users"  class="grid-content" style="text-align: center; width: 100%!important">
      <table id="grid">
    <thead>
      <tr>
        <th data-field="number" style="text-align: center">Nro.</th>
        <th data-field="item" style="text-align: center">Articulo</th>
        <th data-field="staff" style="text-align: center">Usuario</th>
        <th data-field="button" style="text-align: center">Añadir/Remover</th>
      </tr>
    </thead>
    <tbody id="pedidos">
      <tr>
        <td>1.</td>
        <td>{{ form.item }}</td>
        <td>{{ form.staff }}</td>
        <td><button type="button" id="add_textbox">+</button></td>
      </tr>
    </tbody>
      </table>
      <center>
     <div class="buttons">{{ form.save }}</div>
      </center>
  </div>
  </form>
<script type="text/javascript">
    $(function() {
        $("#save").attr('class','k-button');
        $("#c0").attr('class', 'k-input');
        var sel = $("#t0").clone();
        var sel2 = $("#c0").clone();
        var i = 1;
        var data = "{{ inventory }}".replace("[", "").replace("]", "");
                var a = data.split(",");
                for(j=0;j<a.length;j++)
                {
                  if(j == 0){
                   a[j] = a[j].substring(2,a[j].length -1);
                  }
                  else
                  {
                    a[j] = a[j].substring(3,a[j].length -1);
                  }
                }
        $("#add_textbox").attr('class', 'k-button');
        $("#add_textbox").live('click', function() {               
            i++;
            $("#pedidos").append('<tr>' +
                        '<td>'+ i +'. </td>' +
            '<td id="c'+ i +'"></td>' +
            '<td id="t'+ i +'"></td>' +
            '<td><button type="button" rel="del" class="k-button">-</button></td>' +
            '</tr>');
            $(sel2).attr('id',"tc"+i);
            $(sel).attr('id',"ts"+i);
            $(sel2).appendTo("#c"+i);
            $(sel).appendTo("#t"+i);
            $("#tc"+i).css('width', 180);
            $("#tc"+i).kendoAutoComplete({
                   dataSource: a
                        });
            sel = $(sel).clone();
            sel2 = $(sel2).clone();
            $("#ts"+i).css('width', 270);
            $("#ts"+i).kendoDropDownList();
        });

                $("button[rel=del]").live('click', function() {
                   $(this).parent().parent().remove();
                   i--;

                   var a2 = 0;
                   $("#pedidos tr").each(function(i){
                      a2++;
                      $(this).find("td:first").html(a2);                     
                   });                  
        });

        $("#order_date").kendoDatePicker({
             min: new Date(),
             value: new Date(),
                     format: "dd/MM/yyyy"
          });
        $("#order_date").attr('disabled','disabled');

        $("#grid").kendoGrid({
          height: 460,
          sortable: false,
          columns: [{field:"number", width:40},
                {field:"item", width:40},
                {field:"staff", width:80, editor: function(container, options){
                  }},
                {field:"button", width:40}]

          });
        $("#t0").css('width', 270);
        $("#t0").kendoDropDownList();

        $("#c0").css('width', 180);
        $("#c0").kendoAutoComplete({
                    dataSource: a
                });
        });
</script>
{% endblock %} 
```

当您开始删除行时，某些下拉列表和文本框会分配给错误的行。起初我以为是因为在减号按钮中重新计数时某些 id 不匹配，但我已经尝试过了。

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:24:04.320

当您使用索引时，通常会出现此类问题。因此，在最初的绑定中，一切正常，但在删除一行后，一切都变得混乱了。

通常解决方案是使用每条记录的某个 ID（或其他主键）。

我不确定这是否是您的问题，但我认为值得尝试。

# c# - 抽象基类或助手类

> ID：12585128
> 
> 赞同：6
> 
> 时间：2012-09-25T14:27:42.323
> 
> 标签：c#, inheritance, composition

我今天刚刚学到了一些关于**Composition over Inheritance**的知识。我想知道我是否应该将这个概念应用到我最近写的东西上。

我们**之前**有两个*几乎*相同的类，除了一些小的差异。它们包含一些基本的数据库访问功能，但对不同（但相关）的对象类型进行操作。因此，我们之前的课程结构如下：

```
class BallMillDBHandler{

    public BallMillDBHandler(){ ... }

    public void InsertTool(BallMill tool) { ... }
    public BallMill QueryTool(string toolID) { ... }
    public void UpdateTool(BallMill tool) { ... }
    public void DeleteTool(string toolID) { ... }
}

class DiamondToolDBHandler{

    public DiamondToolDBHandler(){ ... }

    public void InsertTool(DiamondTool tool) { ... }
    public DiamondTool QueryTool(string toolID) { ... }
    public void UpdateTool(DiamondTool tool) { ... }
    public void DeleteTool(string toolID) { ... }
} 
```

我采用了大部分几乎重复的方法并将它们重构为一个`BaseToolDBHandler()`类，并从其他两个继承它，提供一些抽象方法和属性来处理访问数据库参数本身的差异。

`BaseToolDBHandler`将辅助类改为包含在数据库访问器中并为它们提供先前抽象属性/方法的通用接口是否有意义？还是我应该把它作为继承的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:35:25.093

继承确实倾向于被过度使用，但这似乎是一个合适的案例。在许多情况下，人们只是看到重复代码并认为“我将使用继承通过基类删除重复代码”。实际上，大多数重复的代码都可以完全重构为另一个在多个地方使用的类。通常使用它的类不是“相关的”，它们正在做两件完全不同的事情，只是碰巧分享了做一些（或一些系列）小任务的需要。

当你真的可以说类“是”基类的一个实例时，应该使用继承，而不仅仅是一些需要访问在其他地方定义的一堆方法的类。在您的特定情况下，很明显这两个类*都是*数据库处理程序。在关键点上，它们都服务于相同的总体目标，但它们是该目标的两种不同的可能实现方式。我在这里可以看到的唯一问题（鉴于您没有显示任何方法的内容）是您可以将两个类组合成一个类，但我们需要了解更多关于细节的信息知道这是否可行或可取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:36:00.293

这看起来像是通过基类/接口使泛型和继承受益的场景。

```
class DBHandler<TTool> where TTool : ToolBase // or ITool
{
    public DBHandler(){ ... }

    public void InsertTool(TTool tool) { ... }
    public TTool QueryTool(string toolID) { ... }
    public void UpdateTool(TTool tool) { ... }
    public void DeleteTool(string toolID) { ... }
} 
```

如果需要，您可以创建一个基类（可选抽象）或一个接口用作类型约束，以保证您需要工具在方法主体内具有的某些成员。

**例子：**

```
var handler = new DBHandler<BallMill>();
BallMill value = handler.QueryTool("xyz");
value.SomeProperty = "New Value";
handler.UpdateTool(value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:39:14.983

我会说这绝对是继承的任务......但让我们先搞清楚一件事。组合是一种设计模式，可以而且应该在类的多重继承不是给定语言的特性（例如 C#）的情况下使用

组合意味着您的 Composite 类实例化类，通常它们会被继承。在这种情况下，您通过接口向实现提供合同。

为了给你一个关于如何将继承应用到你的代码的粗略例子，考虑一下：（这不是使用组合）

```
public interface IHandler
{
    void InsertTool(ITool tool);
    void UpdateTool(ITool tool);
    void DeleteTool(string toolID);
    //void DeleteTool(ITool tool) - seems more consistent if possible!?

    ITool QueryTool(string toolID);
}

public interface ITool
{

}

class BallMill : ITool
{
}

class DiamondTool : ITool
{
}

class BallMillDBHandler : IHandler
{

    public BallMillDBHandler(){ ... }

    public void InsertTool(ITool tool) { ... }
    public BallMill QueryTool(string toolID) { ... }
    public void UpdateTool(ITool tool) { ... }
    public void DeleteTool(string toolID) { ... }
}

class DiamondToolDBHandler : IHandler
{

    public DiamondToolDBHandler(){ ... }

    public void InsertTool(ITool tool) { ... }
    public DiamondTool QueryTool(string toolID) { ... }
    public void UpdateTool(ITool tool) { ... }
    public void DeleteTool(string toolID) { ... }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:40:05.873

与其继承，不如使用泛型。您想对不同类型的对象执行相同的操作，这正是泛型最擅长的。

# gwt - 在 GWT 中设置滚动顶部的正确时刻

> ID：12585130
> 
> 赞同：2
> 
> 时间：2012-09-25T14:27:56.337
> 
> 标签：gwt

我在让 setScrollTop 在 GWT 中工作时遇到问题。基本上，我正在尝试在构建视图之后立即设置自定义滚动位置（以专注于特定的所需元素）。它似乎不起作用，因为我没有在正确的时间设置它（并且 UI 可能仍在渲染/构建中，等等）。

设置如下。

*   我有一个小部件，其启动方法如下所示：

    ```
    public void start(AcceptsOneWidget widget, EventBus eventBus) {

         widget.setWidget(view);s
             Runnable onLoadCallback = new Runnable() {
             public void run() {
                 initView();
             }
         };

         VisualizationUtils.loadVisualizationApi(onLoadCallback, LineChart.PACKAGE);
    } 
    ```

*   在 initView 面板中，我动态构建了一个包含一些图表的视图（通过向服务器发出请求，等待答案到来，然后根据服务器的答案呈现 UI）。

*   在服务器的答案到达之后，在我完成 UI 构建之后，我试图设置滚动位置，如下所示：

    ```
    view.getContainerPanel().getElement().setScrollTop(2000); 
    ```

*   这似乎完全没有任何效果。但是，如果我离开这个视图，稍后再回到它，它确实可以工作（大概是因为它已经被初始化或其他什么？）

问题是：调用 setScrollTop 的正确时间是什么时候？我尝试从相应的视图中覆盖一些方法，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:35:37.080

在 initView() 之后使用调度程序：

```
Scheduler.get().scheduleDeferred(new ScheduledCommand() {

    @Override
    public void execute() {
        view.getContainerPanel().getElement().setScrollTop(2000);
    }
}); 
```

解释：

您的程序不知道浏览器渲染视图需要多长时间。这就是创建 Scheduler.scheduleDeferred() 方法的目的。它告诉你的程序等到浏览器完成它正在做的事情并准备好下一个任务。

# javascript - 移动重定向到常规站点 - javascript 有问题吗？

> ID：12585133
> 
> 赞同：1
> 
> 时间：2012-09-25T14:28:04.577
> 
> 标签：javascript, redirect, mobile

如果移动用户单击重定向链接，我在将他们重定向到常规站点时遇到问题；当点击链接时，他们仍然被定向到移动网站。

我正在使用以下 javascript 位：

```
function setCookie(c_name, value, exdays) {
    c_name = c_name.toLowerCase();
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

function getCookie(c_name) {
    c_name = c_name.toLowerCase();
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            //alert("x = " + x);
            return unescape(y);
        }
    }
}

function getQuerystring(key, default_) {
    key = key.toLowerCase();
    //alert("key : " + key);
    //alert("default_ : " + default_);
    if (default_ == null) default_ = "";
    key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regex = new RegExp("[\\?&]" + key + "=([^&#]*)");
    var qs = regex.exec(window.location.href.toLowerCase());
    if (qs == null) {
        //alert("default_ : " + default_);
        return default_;
    } else {
        //alert("qs[1] : " + qs[1]);
        return qs[1];
    }
}

function detectMobileAndRedirect(a, b) {
    // alert(location.href);
    if (/android|webOS|avantgo|blackberry|blazer|elaine|hiptop|ip(hone|od)|kindle|midp|mmp|mobile|o2|opera mini|palm( os)?|pda|plucker|pocket|psp|smartphone|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce; (iemobile|ppc)|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-)|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
        if (/ipad/i.test(a)) {
            return false;
        }
        location.href = b;
    }
}

function removeQueryString(url) {
    return url.split("?")[0];
}
var FullSiteCookie = getCookie("viewFullSite");
var viewFullSite = getQuerystring("viewFullSite");
var renderFullSite = new Boolean();
renderFullSite = false;
if (FullSiteCookie != null && FullSiteCookie != "") {
    if (FullSiteCookie.toLowerCase() == "true") {
        if (viewFullSite.toLowerCase() == "false") {
            setCookie("viewFullSite", false, 1);
        } else {
            renderFullSite = true;
            //alert("Set 11");
        }
    } else {
        if (viewFullSite != null && viewFullSite != "") {
            if (viewFullSite.toLowerCase() == "true") {
                renderFullSite = true;
                //alert("Set 2");
                setCookie("viewFullSite", true, 1);
            } else {
                if (viewFullSite.toLowerCase() == "false") {
                    setCookie("viewFullSite", false, 1);
                }
                renderFullSite = false;
                //alert("Set 3");
            }
        } else {
            renderFullSite = false;
            //alert("Set 4");
        }
    }
} else {
    viewFullSite = getQuerystring("viewFullSite");
    //alert("viewFullSite 1 : " + viewFullSite);
    if (viewFullSite != null && viewFullSite != "") {
        if (viewFullSite.toLowerCase() == "true") {
            renderFullSite = true;
            //alert("Set 5");
            setCookie("viewFullSite", true, 1);
        } else {
            renderFullSite = false;
            //alert("Set 6");
        }
    } else {
        renderFullSite = false;
        //alert("Set 7");
    }
}
//alert("renderFullSite : " + renderFullSite);
if (!renderFullSite) {
    //alert("location href before: " + location.href);
    var mobilesite = "http://parlourdc.mobi";
    var locationhref = removeQueryString(location.href);
    //alert("location href after: " + locationhref);
    if (locationhref == "http://parlourdc.com") {
        mobilesite = "http://parlourdc.mobi/index.php";
    }
    detectMobileAndRedirect(navigator.userAgent || navigator.vendor || window.opera, mobilesite);
}

function BookMark() {
    $('#BookmarkImg').animate({
        "top": "-81px"
    }, 1000);
    baseCookieName = "rwbookmark";
    var exdate = new Date();
    var expiredays = "1";
    exdate.setDate(exdate.getDate() + expiredays);
    //use of arbritary stop point so no endless loop occurs
    for (var i = 0; i < 10000; i++) {
        var curName = baseCookieName + i;
        if (document.cookie.indexOf(curName) < 0) {
            document.cookie = curName + "=" + escape(window.location.href) + "[#]contentid=" + document.getElementById("inputContentID").value + "[#]title=" + GetPageTitle() + ";expires=" + exdate.toGMTString() + ";path=/;domain=parlourdc.com;";
            break;
        }
    }
    var link = document.getElementById('BookmarkLink');
    link.onclick = null;
    link.style.cursor = "default";
}

function GetPageTitle() {
    var titlefromdom = "";
    var titlefromdomarray = "";
    $(document).ready(function() {
        titlefromdom = document.title;
    });
    titlefromdomarray = titlefromdom.split("|");
    if (titlefromdomarray.length > 0) {
        titlefromdom = titlefromdomarray;
    }
    return titlefromdom;
} 
```

这是他们通过移动网站点击的实际链接：

```
<a href="http://parlourdc.com/?ViewFullSite=true">click here to view full site</a> 
```

任何想法可能导致麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:46:15.380

这是我在上面的评论中提到的一个例子：

首先给锚标签一个 ID：
`<a id="fullsite" href="http://parlourdc.com">click here to view full site</a>`

该过程如下所示：

1.  监听“点击”事件。
2.  设置你的 cookie。
3.  将位置设置为完整的站点 URL。

JavaScript：

```
document.getElementById('fullsite').addEventListener('click',gotoFullSite,true);

function gotoFullSite(e) {
     e.preventDefault();
     setCookie("viewFullSite", true, 1);
     location.href = this.getAttribute('href');
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T10:52:36.617

**将以下代码也放在移动网站页面和桌面网站页面上。**

```
<script type="text/javascript" charset="utf-8">    
var docCookies = {
            getItem: function (sKey) {
                if (!sKey || !this.hasItem(sKey)) { return null; }
                return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1"));
            },
            setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
                if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/.test(sKey)) { return; }
                var sExpires = "";
                if (vEnd) {
                    switch (typeof vEnd) {
                        case "number": sExpires = "; max-age=" + vEnd; break;
                        case "string": sExpires = "; expires=" + vEnd; break;
                        case "object": if (vEnd.hasOwnProperty("toGMTString")) { sExpires = "; expires=" + vEnd.toGMTString(); } break;
                    }
                }
                document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
            },
            removeItem: function (sKey) {
                if (!sKey || !this.hasItem(sKey)) { return; }
                var oExpDate = new Date();
                oExpDate.setDate(oExpDate.getDate() - 1);
                document.cookie = escape(sKey) + "=; expires=" + oExpDate.toGMTString() + "; path=/";
            },
            hasItem: function (sKey) { return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie); }
        };
</script> 
```

**将以下代码放在完整站点上**

```
<script type="text/javascript" charset="utf-8">
 if( /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) )
 { 
     if( !docCookies.getItem("isMobile") ) 
     {   
      console.log("redirection");
      docCookies.setItem("isMobile","true");  
      document.location = "http://mobile site";
     }
 }
</script> 
```

**将以下代码放在移动页面上**

HTML 代码：

```
<a href="#" onclick='redirectDesktopSite();'>
 Desktop Site
</a> 
```

Java脚本代码：

```
<script type="text/javascript" charset="utf-8">
function redirectDesktopSite()
{
docCookies.setItem("isMobile","true"); 
document.location='http://desktop site';
}
</script> 
```

# php - 从 $_get 绑定 PDO mysql 参数不起作用

> ID：12585144
> 
> 赞同：2
> 
> 时间：2012-09-25T14:28:31.190
> 
> 标签：php, binding, get, pdo, parameter-passing

```
// url: http://localhost/asdf/?sort=credits

if(isset($_GET['sort'])){
    $sort = $_GET['sort'];
}

$statement = $db->prepare("SELECT * FROM myTable ORDER BY :sort");
$statement->bindParam(':sort', $sort, PDO::PARAM_STR, 8);

var_dump($statement);
//object(PDOStatement)[2] public 'queryString' => string 'SELECT * FROM table1 ORDER BY :sort' (length=36)

$statement->execute(); 
```

我正在尝试从获取参数中选择排序选项，有人可以帮我吗？

**按照@Uchiha Madara 的建议进行**更新，我创建了一些预定义的排序字符串****

 **```
if(isset($_GET['sort'])){
    switch ($_GET['sort']){
        case 'val1':
            $sortName = 'val1';
            break;
        case 'val2':
            $sortName = 'val2';
            break;

        default:
            $sortName = false;
            break;
    }
}

if($sortname != false){
    // then prepare query
    $statement = $db->prepare("SELECT * FROM table1 ORDER BY ?");
    $statement->execute(array($sortName));
} 
```

但结果仍然相同，订购选择被忽略

**最后更新！**

```
$sort = 'val1';

$orderList = array(
    'val1',
    'val2'
);

// then prepare query
$statement = $db->prepare("SELECT * FROM myTable ORDER BY $sort");
$statement->execute(); 
```

感谢@Madara Uchiha 和@Ray！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:29:56.537

见马德拉的[回答](https://stackoverflow.com/a/12585182/212940)。

您不能绑定列。使用有效列的白名单数组进行排序（比较 $_GET 值）并将其替换到查询中：

```
$valid_cols = array('name', 'age');
$sort = 'default_sort_field';
if(isset($_GET['sort']) && in_array($_GET['sort'], $valid_cols)){
    $sort = $_GET['sort'];
}

$statement = $db->prepare("SELECT * FROM myTable ORDER BY $sort"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:30:34.963

~~也许是因为您命名了变量`$sort`，但您正在尝试绑定`$order`？~~

那是因为您不能将列名与准备好的语句绑定。它们仅用于与值一起使用。

相反，您应该做的是拥有一组预定义的选项，并按这些选项排序。您不应该让用户选择按真实列名直接排序。**

# python - Python中的新行是如何表示的？

> ID：12585146
> 
> 赞同：-3
> 
> 时间：2012-09-25T14:28:47.777
> 
> 标签：python

我有一个特殊字符列表：

```
specialCharList=['`','~','!','@','#','$','%','^',
                         '&','*','(',')','-','_','+','=',
                         '|','','{','}','[',']',';',':',
                         '"',',','.','<','>','/','?',"'",'\\',' '] 
```

当用户按下输入按钮换行时，我需要包含某种字符表示法。我试过'\n'，但没有奏效。有任何想法吗？

更多信息如下

对不起，我应该指定的。我正在制作一个基本的加密/解密应用程序。它所做的是将字符向右移动 6 个位置并输出。

例如 abc 将输出为 ghi 例如 123 将输出为 789

我用特殊字符做了同样的事情。使用下面的列表来查看它是如何工作的。

```
specialCharList=['`','~','!','@','#','$','%','^',
                         '&','*','(',')','-','_','+','=',
                         '|','','{','}','[',']',';',':',
                         '"',',','.','<','>','/','?',"'",'\\',' '] 
```

比如~！将输出为 ^&

虽然当有人在要加密的文本框中输入和组合文本、数字和特殊字符时一切正常，但如果有人输入新行（例如按回车键），我会收到错误消息。

```
index=specialCharList.index(tbInput[i]) 
```

ValueError: u'\n' 不在列表中

完整代码如下。

```
import wx
import os
class mainForm(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Encryption Tool v2',size=(270,300))
        panel=wx.Panel(self)
        #Setting up controls
        wx.StaticText(panel,-1,'Enter Text Below',(10,10),(200,25))
        self.tbInput=wx.TextCtrl(panel,-1,'',(10,30),(250,220),wx.TE_MULTILINE)
        self.rdEncrypt=wx.RadioButton(panel,-1,'Encrypt',(10,250),(200,-1))
        self.rdDecrypt=wx.RadioButton(panel,-1,'Decrypt',(10,270),(200,-1))
        btnExecute=wx.Button(panel,-1,'Execute',(181,252),(80,-1))
        btnExecute.Bind(wx.EVT_BUTTON,self.encryptionDecryption)
    def encryptionDecryption(self,event):
        tbInput=self.tbInput.GetValue()
        rdEncrypt=self.rdEncrypt.GetValue()
        rdDecrypt=self.rdDecrypt.GetValue()
        if rdEncrypt==True and tbInput!='':
            #copy encryption code below
            encryptedStr=''
            alphabet=['X','M','y','B','e','f','N','D','i','Q',
                 'k','u','Z','J','s','A','q','Y','E','P','S',
                 'v','w','a','U','z','p','d','C','h','o','F',
                 'G','H','I','n','K','W','b','g','O','t','j',
                 'R','l','T','c','V','L','x','r','m']
            specialCharList=['`','~','!','@','#','$','%','^',
                             '&','*','(',')','-','_','+','=',
                             '|','','{','}','[',']',';',':',
                             '"',',','.','<','>','/','?',"'",'\\',' ',]
            for i in range(0,len(tbInput)):
                if tbInput[i].isalpha():
                    index=alphabet.index(tbInput[i])
                    if index+6>len(alphabet)-1:
                        index=5+(index-(len(alphabet)-1))
                        encryptedStr+=alphabet[index]
                    else:
                        encryptedStr+=alphabet[index+6]
                elif tbInput[i].isdigit():
                    if int(tbInput[i])+6>9:
                        encryptedStr+=str(-1+(int(tbInput[i])+6)-9)
                    else:
                        encryptedStr+=str(int(tbInput[i])+6)
                else:
                    index=specialCharList.index(tbInput[i])
                    if index+6>len(specialCharList)-1:
                        index=5+(index-(len(specialCharList)-1))
                        encryptedStr+=specialCharList[index]
                    else:
                        encryptedStr+=specialCharList[index+6]
            #print 'Encrypted Text: '+encryptedStr
            #text file here
            e=open('encryptedText.txt', 'w')
            e.write(encryptedStr)
            e.close()
            if os.name == 'nt':
                os.system('notepad ecryptedText.txt&')
            elif os.name == 'posix':
                os.system('gedit decryptedText.txt&')
            os.system('gedit encryptedText.txt&')
        elif rdDecrypt==True and tbInput!='':
            #copy code for decryption below
            decryptedStr=''
            alphabet=['X','M','y','B','e','f','N','D','i','Q',
                 'k','u','Z','J','s','A','q','Y','E','P','S',
                 'v','w','a','U','z','p','d','C','h','o','F',
                 'G','H','I','n','K','W','b','g','O','t','j',
                 'R','l','T','c','V','L','x','r','m']
            specialCharList=['`','~','!','@','#','$','%','^',
                             '&','*','(',')','-','_','+','=',
                             '|','','{','}','[',']',';',':',
                             '"',',','.','<','>','/','?',"'",'\\',' ']
            for i in range(0,len(tbInput)):
                if tbInput[i].isalpha():
                    index=alphabet.index(tbInput[i])
                    if index-6>len(alphabet)-1:
                        index=5+(index-(len(alphabet)-1))
                        decryptedStr+=alphabet[index]
                    else:
                        decryptedStr+=alphabet[index-6]
                elif tbInput[i].isdigit():
                    if int(tbInput[i])-6<0:
                        decryptedStr+=str(-1+(int(tbInput[i])-6)+11)
                    else:
                        decryptedStr+=str(int(tbInput[i])-6)
                else:
                    index=specialCharList.index(tbInput[i])
                    if index-6>len(specialCharList)-1:
                        index=5+(index-(len(specialCharList)-1))
                        decryptedStr+=specialCharList[index]
                    else:
                        decryptedStr+=specialCharList[index-6]
            #print 'Decrypted Text: '+decryptedStr
            #text file here
            d=open('decryptedText.txt', 'w')
            d.write(decryptedStr)
            d.close()
            if os.name == 'nt':
                os.system('notepad ecryptedText.txt&')
            elif os.name == 'posix':
                os.system('gedit decryptedText.txt&')
            os.system('gedit encryptedText.txt&')
        else:
            message=wx.MessageDialog(None, 'Please enter text for encryption/decryption','No Text Found',wx.OK|wx.ICON_INFORMATION)
            message.ShowModal()
            message.Destroy()
if __name__=='__main__':
    encryptionToolv2=wx.PySimpleApp()
    frame=mainForm(parent=None,id=-1)
    frame.Show()
    encryptionToolv2.MainLoop()
#usrInput=raw_input('Please enter your text.\n> ')
#eOrD=raw_input('Do you want to encrypt or decrypt? (e or d)\n> ')
#if eOrD=='e' or eOrD=='E':
#    encryption()
#elif eOrD=='d' or eOrD=='D':
#    decryption() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:36:40.663

大多数文本框（主要是 Windows）需要`\r\n`切换到下一行。`\n`单独是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:41:05.007

我仍然认为您应该使用[字符串](https://stackoverflow.com/questions/12576418/how-to-include-backslash-and-quotes-in-python-strings/12579310#12579310)来提高可读性。但仍然：

```
specialCharacters += ["\n", "\r", "\r\n", "\t"] 
```

对于`new line`, `carriage return`, `carriage return and new line`, `tab`.

# graphics - 以相交顺序排列矩形，以便 i 我们正在创建包含大量不规则矩形的交互式 SVG 图表。我们的用户在 SVG 的某个区域内单击，并基于此提供有关该对象的更多信息。（我稍微简化了一点——这是一个工业应用程序，这些区域实际上不是矩形——但我假设我们可以使用每个形状的边界矩形。） 不幸的是 问问题 问问题 2012-09-25T14:29:00.430 122 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我们正在创建包含大量不规则矩形的交互式 SVG 图表。我们的用户在 SVG 的某个区域内单击，并基于此提供有关该对象的更多信息。（我稍微简化了一点——这是一个工业应用程序，这些区域实际上不是矩形——但我假设我们可以使用每个形状的边界矩形。） 不幸的是，一些矩形“完全包含”了其他一些矩形。例如，R2 可以是一个“完全包含”在另一个矩形 R1 中的小矩形。如果在 R1之后将R2 添加到 SVG 文件，那么小矩形 R2 是交互式的。不幸的是，对象的输入流并不能保证这一点。我可能会在 R1 之后得到 R2。然后 R1 被打印出来，因此 R2 不能被点击，因为它完全被 R1 覆盖。（对象是半透明的，所以 R1 仍然可见 - 只是不可点击 - 最烦人的！） 因此，我们想要对矩形数组进行排序，使得所有“i”都小于“j”，我们可以保证“Ri”不包含在“Rj”中。但除此之外，我们希望对原始序列的 z 顺序产生最小的干扰。我们将有数千个矩形要排序——所以无论我们选择什么算法，最好不要有 n 平方行为。 我最初认为这将是图形系统中相当普遍的问题。但对文献的扫描似乎并不表明它是。我自己对此有一些想法 - 包括将空间分成区域（KD树）和/或按区域对矩形进行排序（小矩形不能包含大矩形！）但是，找到一个好的这个问题的解决方案已经存在。也许我只是没有使用正确的搜索词。 有任何想法吗 ？ 分组报告项目 我正在尝试在 SSRS 2008 中创建报告，它或多或少看起来像任何消费者声明。意思是，我需要在每个账单号的报告上显示“账单地址”和“账单号”。然后我需要提供每个账单号的详细信息。 我需要为每个账单号码重复此操作。 这是示例： BillTo Clark 1111, Noth St New york USA Bill Number:111111 Line Items Qty amount 1 1 1000 2 2 2000 对客户 2 重复上述操作 BillTo John 1111, Noth St New york USA Bill Number:111111 Line Items Qty amount 1 2 500 2 2 2000 我使用文本框作为地址并放置在报告正文中，我使用表格作为详细信息。 我不知道如何将这些报告项目分组以针对每个账单编号重复。 graphicsz-orderrectangles 4 0 回答 0 Related 2 autofixture - 无效构造函数参数的自动夹具测试 2 apache-flex - 计算数据网格中的列 2 python - 美丽的汤安装 2 asp.net-mvc - 正确完成 ASP.NET MVC：查看模型 2 c# - C# <-> Java 套接字通信 1 f# - 在 F# 类型提供程序中发出生成的类型 1 android - 为 Galaxy Nexus 定义可绘制对象和布局 1 ruby-on-rails - 默认 I18n ActiveRecord 验证翻译 1 android - 祝酒中的 Android WebView 3 list - Haskell在特定位置重复元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12585148
> 
> 赞同：2
> 
> 时间：
> 
> 标签：graphics, z-order, rectangles

我们正在创建包含大量不规则矩形的交互式 SVG 图表。我们的用户在 SVG 的某个区域内单击，并基于此提供有关该对象的更多信息。（我稍微简化了一点——这是一个工业应用程序，这些区域实际上不是矩形——但我假设我们可以使用每个形状的边界矩形。）

不幸的是，一些矩形“完全包含”了其他一些矩形。例如，R2 可以是一个“完全包含”在另一个矩形 R1 中的小矩形。**如果在 R1之后**将R2 添加到 SVG 文件，那么小矩形 R2 是交互式的。不幸的是，对象的输入流并不能保证这一点。我可能会在 R1 之后得到 R2。然后 R1 被打印出来，因此 R2 不能被点击，因为它完全被 R1 覆盖。（对象是半透明的，所以 R1 仍然可见 - 只是不可点击 - 最烦人的！）

因此，我们想要对矩形数组进行排序，使得所有“i”都小于“j”，我们可以保证“Ri”不包含在“Rj”中。但除此之外，我们希望对原始序列的 z 顺序产生最小的干扰。我们将有数千个矩形要排序——所以无论我们选择什么算法，最好不要有 n 平方行为。

我最初认为这将是图形系统中相当普遍的问题。但对文献的扫描似乎并不表明它是。我自己对此有一些想法 - 包括将空间分成区域（KD树）和/或按区域对矩形进行排序（小矩形不能包含大矩形！）但是，找到一个好的这个问题的解决方案已经存在。也许我只是没有使用正确的搜索词。

有任何想法吗 ？

# html - 显示顺序设置 在 HTML 中使用 CSS

> ID：12585152
> 
> 赞同：0
> 
> 时间：2012-09-25T14:29:13.820
> 
> 标签：html, css

我有两个`<div>`，我很难订购它们。请教我并帮助我。

```
<div class="menubar">
    <ul class="menu">
        <li class="itmes"></li>
        <li class="itmes"></li>
        <li class="itmes"></li>
    </ul>
</div>
<div class="b_header">

</div> 
```

这是相关的CSS。

```
.menubar{
width: 110%;
background-color: #000000;
margin-top: 32px;
height: 35px;
display: block;
position: absolute;
margin-left: -20px;
vertical-align: middle;
text-align: center;}

.b_header{
width: 110%;
background: url('./img/b_header.gif');
margin-left: -20px;
height: 15px;
position: inherit;
margin-top: 0px;} 
```

我希望并期望看到`<div class="b_header">`下面的内容，`<div class="b_header">`但事实并非如此。

解决办法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:35:07.793

消除

```
position:absolute; 
```

它会起作用。绝对定位将从页面流中删除菜单，因此它下面的标题 div 将有效地假装菜单不存在。

或者（如果你需要`position:absolute`）你可以通过给标题一个来强制你的标题在菜单下方`margin-top:67px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:34:40.603

你的菜单栏的垂直对齐是中间的，所以我怀疑 b_header 被放在它上面？尝试垂直对齐：顶部；

# ssrs-2008 - 分组报告项目

> ID：12585153
> 
> 赞同：1
> 
> 时间：2012-09-25T14:29:17.450
> 
> 标签：ssrs-2008

我正在尝试在 SSRS 2008 中创建报告，它或多或少看起来像任何消费者声明。意思是，我需要在每个账单号的报告上显示“账单地址”和“账单号”。然后我需要提供每个账单号的详细信息。

我需要为每个账单号码重复此操作。

这是示例：

```
BillTo
Clark
1111, Noth St
New york
USA

Bill Number:111111

Line Items                Qty       amount
1                           1         1000
2                           2         2000 
```

对客户 2 重复上述操作

```
BillTo
John
1111, Noth St
New york
USA

Bill Number:111111

Line Items                Qty       amount
1                           2          500
2                           2         2000 
```

我使用文本框作为地址并放置在报告正文中，我使用表格作为详细信息。

我不知道如何将这些报告项目分组以针对每个账单编号重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:49:21.473

您需要根据您的帐单编号创建一个组和组。本文 ( [http://msdn.microsoft.com/en-us/library/ms170712.aspx](http://msdn.microsoft.com/en-us/library/ms170712.aspx) ) 将引导您完成整个过程，我很乐意回答您的任何问题。

# jquery-ui - 自动完成设置建议区域宽度

> ID：12585157
> 
> 赞同：0
> 
> 时间：2012-09-25T14:29:29.830
> 
> 标签：jquery-ui

我在下面的演示中使用 jquery 组合框自动完成功能。

[jquery组合框自动完成](http://jqueryui.com/demos/autocomplete/#combobox)

添加[jQuery UI Autocomplete Select First Extension](https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js)后，我对建议区域的宽度有疑问。

在某些情况下，建议区域的宽度比平时大。如何解决这个问题？

我知道我可以输入这段代码：

*$(this).autocomplete("widget").css({"width": 250});*

但是，它会改变我所有的组合风格。那么我可以在我制作的每个组合框上输入此代码吗？我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:42:16.760

我只想更改`css`列表`ul.ui-autocomplete`。[jsFiddle](http://jsfiddle.net/TheJoeFletch/Q55Gj/2/)

```
.ui-autocomplete {
    width: 300px;
    background-color:red;
}    

.ui-autocomplete li {
    border: 1px solid black;
} 
```

如果您需要更改结果的类`ul`，那么我将按照此链接在此处找到解决方案。[链接](https://stackoverflow.com/questions/9337796/autocomplete-renderitem-and-adding-a-class-to-wrapper)

# java - 从 jsp 页面运行 servlet

> ID：12585159
> 
> 赞同：0
> 
> 时间：2012-09-25T14:29:35.867
> 
> 标签：java, tomcat, servlets

我有 index.jsp 页面：

```
</head>
<body>
     <form action="HelloWorldServlet" method="post">
        <input class="button" type="submit" value="load list" />
     </form>
</body>
</head> 
```

我想通过单击“加载列表”按钮来运行我的 HelloWorldServlet。

```
public class HelloWorldServlet extends HttpServlet {

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        PrintWriter writer = response.getWriter();
        writer.println("Hello, World!");
        writer.close();
    }
} 
```

但不是“你好，世界！” 消息，它尝试加载`http://localhost:8080/HelloWorld/HelloWorldServlet`页面.. 有什么意义？

这是我的 web.xml：

```
<!DOCTYPE web-app PUBLIC '-//Sun Microsystems, Inc.//DTD 
  Web Application 2.3//EN' 'http://java.sun.com/dtd/web-app_2_3.dtd'>
<web-app>
  <servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>HelloWorldServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/hello</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:33:14.960

如果您的 servlet 映射到`/hello`，那么您`<form>`应该发布到相同的 URL。

```
<form action="hello" method="post"> 
```

# css - 如何在不破坏宽度的情况下调整 pikaChoose 插件的高度？

> ID：12585165
> 
> 赞同：2
> 
> 时间：2012-09-25T14:29:53.030
> 
> 标签：css, grails, plugins

我虔诚地遵循本教程： http: [//www.icodeya.com/2012/08/grails-creating-image-gallery-feat.html](http://www.icodeya.com/2012/08/grails-creating-image-gallery-feat.html)关于如何在 grails 中添加图片库功能。它工作得很好，但我想调整主（大）图像的高度。我成功了，但是当我上传超过默认宽度的图像时，它会破坏整个布局。就像，图像的一部分将从布局的其余部分溢出。我想这更像是一个 css 问题.. 我很讨厌 CSS。代码如下。在这里可以看到一个很好的演示： [http](http://www.pikachoose.com/) ://www.pikachoose.com/请注意，如果我将宽度更改为 100%，则高度会变得不一致。:(

*上传图片，如果没有，自己看看。

有人想帮助我吗？:D

我提供免费饼干。:) :)

```
@charset "UTF-8";
/* Just for the example. Fee free to delete these three lines */
body{font-family:Helvetica, sans-serif;}
a{color:white;}
.pikachoose {width: 800px; margin: 20px auto 20px auto;}

/* Style the thumbnails */
.pika-thumbs{ padding: 0 16px; height: 75px; margin-top: 10px; width: 100%;}
    .pika-thumbs li{ width: 144px; height:74px; margin: 5px; padding: 2px; overflow: hidden;
        float: left; list-style-type: none; background: #fafafa; border: 1px solid #e5e5e5; cursor: pointer;}
    .pika-thumbs li:last {margin: 0;}
    .pika-thumbs li .clip {position:relative;height:100%;text-align: center; vertical-align: center; overflow: hidden;}

/* The stage is the wrapper. The image fills 100% the height of the stage */
.pika-stage, .pika-textnav {width: 800px;}
.pika-stage {overflow:hidden; position: relative; background: #fafafa; border: 1px solid #e5e5e5; padding: 10px 10px 40px 10px; text-align:center; height:400px;}
.pika-stage img{height:100%;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:05:11.610

从演示来看，主图像的舞台看起来是 800 像素，所以只需为出现在主舞台上的图像添加最大宽度：

.pika-stage img { 高度：100%; 最大宽度：800px；/* 与主舞台的宽度相同，因此图像不会延伸过去 */ }

# objective-c - Objective-C 中的可变数组。如何更改/操作数组元素？

> ID：12585167
> 
> 赞同：1
> 
> 时间：2012-09-25T14:29:55.417
> 
> 标签：objective-c, arrays, minesweeper

我正在尝试构建一个包含 400 个整数的数组（在 20 x 20 矩阵的上下文中处理）。所有元素都初始化为 0，然后选择 40 个随机点具有整数 9（在扫雷上下文中指定为地雷）。由于某种原因，我的程序挂在了线上：

**[map replaceObjectAtIndex: mine_placement withObject:[NSNumber numberWithInt:9]];**

在此之后，我有一个例程来累积每个元素的地雷接近度，最后的位创建字符串对象以发送到控制台（日志）。我很想听 Objective-C 专业人士说我做错了什么，以及为什么输出不正确。它构建得很好，只是没有输出。我收到一些关于线程正在启​​动的消息。我是 Obj-C 的新手，所以对此事的任何想法都会很棒。

这是main里面的内容：

```
@autoreleasepool
{

    int number_of_mines = 40;
    int mine_placement;

    // create map of 400 char elements
    NSMutableArray* map = [[NSMutableArray alloc] init];

    // char map[400];
    // build array with zeros everywhere
    for(int i = 0; i < 400; i++)
        [map addObject:[NSNumber numberWithInt:0]];

    // add randomly placed mines

    for(int i = 0; i < number_of_mines; i++) // loop for 40 mines
    {
        mine_placement = arc4random() % 400;
        while([map objectAtIndex: mine_placement] == [NSNumber numberWithInt:9]) // if we are already on a mine, repeat
            {
                mine_placement = arc4random() % 400;
            }
        [map replaceObjectAtIndex: mine_placement withObject:[NSNumber numberWithInt:9]];
    }

    // proximity accumulator (an iterative approach)
    for(int i = 0; i < 400; i++)
    {
        if([map objectAtIndex: i] != [NSNumber numberWithInt:9])
        {
            int accumulator = 0;

            // check top three neighbors
            if(i >= 20) // past first row
            {
                if(i % 20 != 0) // past first column
                    if([map objectAtIndex: (i-21)] == [NSNumber numberWithInt:9]) // top-left
                        accumulator++;

                if((i+1) % 20 != 0) // before last column
                    if([map objectAtIndex: (i-19)] == [NSNumber numberWithInt:9]) //top-right
                            accumulator++;

                if([map objectAtIndex: (i-20)] == [NSNumber numberWithInt:9]) // top
                    accumulator++;
            }

            // check bottom three neighbors
            if(i < 380) // before last row
            {
                if(i % 20 != 0) // past first column
                    if([map objectAtIndex: (i+19)] == [NSNumber numberWithInt:9]) // bottom-left
                        accumulator++;

                if((i+1) % 20 != 0) // before last column
                    if([map objectAtIndex: (i+21)] == [NSNumber numberWithInt:9]) // bottom-right
                            accumulator++;

                if([map objectAtIndex: (i+20)] == [NSNumber numberWithInt:9]) // bottom
                    accumulator++;
            }

            // left neighbor
            if(i % 20 != 0) // past first column
                if([map objectAtIndex: (i-1)] == [NSNumber numberWithInt:9]) // left
                    accumulator++;

            // right neighbor
            if((i+1) % 20 != 0) // before last column
                if([map objectAtIndex: (i+1)] == [NSNumber numberWithInt:9]) // right
                    accumulator++;

            if(accumulator > 0)
                [[map objectAtIndex: i] replaceObjectAtIndex: i withObject:[NSNumber numberWithInt:accumulator]];
        }
    }

    // output map of 400 char elements
    // build string rows

    NSMutableString* string_row = [[NSMutableString alloc] init];
    for(int row = 0; row < 20; row++)
    {
        for(int s = 0; s < 20; s++)
        {
            [string_row insertString:[map objectAtIndex: s] atIndex:s];
        }
        NSLog(@"%@", string_row);
        [string_row setString:@""]; // clear string_row for next row pass
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:32:50.427

您的程序可能会挂起

```
while([map objectAtIndex: mine_placement] == [NSNumber numberWithInt:9]) 
```

您在这里比较指针（地址），但您想比较值。尝试这个：

```
while ([[map objectAtIndex:mine_placement] isEqualTo:[NSNumber numberWithInt:9]]) 
```

顺便说一句，现在您可以使用Xcode 4.5`@9`来代替。`[NSNumber numberWithInt:9]`如果您使用 iOS 6 SDK 编译，您也可以使用`map[mine_placement]`它，因此它应该会稍微缩短您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:39:43.470

您的程序还挂起：

```
[[map objectAtIndex: i] replaceObjectAtIndex: i withObject:[NSNumber numberWithInt:accumulator]]; 
```

因为*[map objectAtIndex: i]*是 NSNumber，它没有 replaceObjectAtIndex 方法。您可能应该检查阵列的逻辑。那就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:45:16.690

我将您的代码放入测试应用程序的 applicationDidFinishLaunching 方法中，并且在您所说的地方我没有遇到任何问题-我不知道为什么它在那里的行为与在 main 中的行为不同。我确实在这一行得到了一个错误：

```
[[map objectAtIndex: i] replaceObjectAtIndex: i withObject:[NSNumber numberWithInt:accumulator]]; 
```

我想你希望它是：

```
[map replaceObjectAtIndex: i withObject:[NSNumber numberWithInt:accumulator]]; 
```

此外，您创建可变字符串的代码的最后一部分也不起作用，因为您试图将 NSNumber 插入到字符串中。可以这样修复：

```
[string_row insertString:[NSString stringWithFormat:@"%@",[map objectAtIndex: s]] atIndex:s]; 
```

# android - Android：文件有存档属性吗？

> ID：12585179
> 
> 赞同：1
> 
> 时间：2012-09-25T14:30:21.620
> 
> 标签：android, file

Android 中的文件是否像桌面操作系统中一样具有存档属性？这通常是一个属性，指示文件已被修改，备份程序可以使用它来确定要备份哪些文件。

# javascript - 如何在 Windows Metro Style App 上重新加载 iframe 的内容

> ID：12585181
> 
> 赞同：1
> 
> 时间：2012-09-25T14:30:30.780
> 
> 标签：javascript, windows-8, microsoft-metro

我想要“重新加载”按钮并在单击 Windows Metro Style App 时重新加载 iframe 的内容。当我单击该按钮时，出现 Javascript 运行时错误，并且它说没有写访问权限。

源代码如下：

== default.html ==

```
<iframe id="iframe" src="http://example.com" width="800px" height="400px"></iframe>
<button id="reloadButton">Reload</button> 
```

== default.js ==

```
var reloadButton = document.getElementById("reloadButton");
reloadButton.addEventListener("click", reload, false);

function reload() {
    var iframe = document.getElementById("iframe");
    iframe.contentWindow.location.reload();
} 
```

任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:43:23.043

这是因为[同源政策](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)。

你应该写这样的东西：

```
iframe.contentWindow.location.href = "http://www.example.com"` 
```

要更新框架内页面的 URL，例如，您可以将其[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)到框架的父级 - 如果您有权访问页面的源代码

# xml - 在 XML 文件中指定序列

> ID：12585184
> 
> 赞同：0
> 
> 时间：2012-09-25T14:30:41.703
> 
> 标签：xml, xml-parsing, xsd

我有以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<game>
  <a>
    <b>
      <test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="picture">
        <pic>sample.png</pic>
      </test>
      <c>
        <test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="content">
          <text> Something </text>
          <photo> p1.png </photo>
          <position> middle </position>
        </test>
        <test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="content">
          <text> Something else </text>
          <photo> p2.png </photo>
          <position> corner </position>
        </test>
        <test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="content">
          <text> some text here </text>
          <photo> p3.png </photo>
          <position> corner </position>
        </test>
      </c>
    </b>
  </a>
</game> 
```

这个 xml 被解析为遵循 MVC 架构的代码。代码由模型解析并呈现在视图上。视图应该知道视图上元素的顺序行为。比如上面的xml中，当解析到标签中遇到第一个标签时，视图上应该有一个图片samle.png。当它来到下方并看到标签内的三个标签时，视图应该首先显示照片 p1，过了一会儿，它应该清除照片 p1，然后在视图上显示照片 p2 和 p3。

我们不必担心这里的编码部分。任务是通过 xml 告诉代码“这是顺序”，这意味着我需要在 xml 中写一些东西来告诉上面事件的顺序，当被代码解析时，代码明白什么是序列并相应地在视图上呈现它。

让我知道它是否令人困惑，或者让我知道您在这里的方法，我尝试了其中的几个，但我认为它们不正确。让我知道是否有人能想到什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:54:49.390

XML 应用程序中的常规约定是 XML 文档中的元素序列可以传达信息，因此所有设计良好的通用 XML API 都通过 API 使父元素中的子元素序列可见。例如，在 SAX 接口中，元素序列由 SAX 事件序列传达。在 DOM 接口中，序列信息记录在节点的属性中，允许您在子序列中找到下一个节点，等等。

因此，除非您正在为您的 XML 使用一个非常古怪的接口，否则您不需要向 XML 添加排序信息。您只需要确保您的模型具有所需的排序信息，并且您用于从 XML 填充模型的代码执行正确的操作。祝你好运。

# iphone - 应用程序崩溃：Bugsense 将此输出作为错误：libsystem_c.dylib at :749

> ID：12585192
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:31:12.897
> 
> 标签：iphone, ios, xcode, crash

应用程序崩溃：Bugsense 将此输出作为错误：libsystem_c.dylib at :749

以下是崩溃日志：

![在此处输入图像描述](../Images/452530e4f1d6bfabed223384d30e345f.png)

![在此处输入图像描述](../Images/452530e4f1d6bfabed223384d30e345f.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:11:25.413

749不是行号，而是libsystem_c.dylib框架中最后执行的代码的内存偏移量。

但这对您没有帮助，也不是导致崩溃的原因！崩溃大多不是由最上面的行引起的，有时也不是由崩溃的线程引起的。

您需要对崩溃报告进行符号化，然后特别查看在层次结构中调用的代码。

# windows - 如何在线程中创建的对话框的任务栏上隐藏选项卡

> ID：12585193
> 
> 赞同：1
> 
> 时间：2012-09-25T14:31:13.100
> 
> 标签：windows, visual-c++, mfc

我在 VC++ 类中创建了线程。使用常规方式，即[如何将 CreateThread 用于类成员函数？](https://stackoverflow.com/questions/1372967/how-do-you-use-createthread-for-functions-which-are-class-members)

现在我在这个线程中向用户显示警报消息框。使用对话框（不使用 AfxMessageBox）

对话框样式为 POPUP。但它在任务栏上显示此警报的另一个新选项卡以及我的主对话框选项卡

如何从任务栏中的显示中删除此选项卡（警报选项卡）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T10:46:36.993

好吧，在另一个线程中显示一个窗口是一个很大的禁忌！*始终*在您的 UI 线程中显示 UI。如果你的工作线程需要显示一些 UI，它需要通知 UI 线程（以安全的方式）让它显示对话框。

删除`WS_EX_APPWINDOW`样式**不是**这里的解决方案。如果你做得不对，你很可能会以奇怪的死锁告终。

让您的线程将消息*发布*到您的 UI 窗口，然后在那里处理它！

```
#define UWM_SHOW_UI (WM_APP + 1)
//    
// In your thread procedure:
PostMessage(pThreadData->m_hWnd, UWM_SHOW_UI);
WaitForMultipleObjects(...); // Wait for both exit event (set in `OnDestroy`) and continue event.
// Handle signal... Exit or continue?
//
// In your main window message handler:
void CMyWindow::OnShowUI(WPARAM wParam, LPARAM lParam)
{
    CMyDlg dlg(this);
    dlg.DoModal();
    //
    SetEvent(m_hEventContinue); // Continue thread!
} 
```

# xml - joomla RTL 参数不起作用

> ID：12585197
> 
> 赞同：0
> 
> 时间：2012-09-25T14:31:20.030
> 
> 标签：xml, joomla, arabic, right-to-left

我的本地主机上有 Joomla 2.5.6，我使用[Gantry 框架](http://www.gantry-framework.org/)支持的模板，因此它最[支持 RTL](http://www.gantry-framework.org/documentation/joomla/advanced/rtl-support-and-limitations)（从右到左）语言，如阿拉伯语和希伯来语，为此我们必须输入文件[“language/en-GB/ en-Gb.xml”](http://www.php.joomlademo.de/nav.html?installation/language/en-GB/en-GB.xml.source.html)，我们有一个名为 rtl 的 xml 属性，默认情况下它是 0 ，当我们把它变成 1 时，整个模板通过启用 rtl.css 文件大部分转向 rtl ，我的问题是即使在改变之后值为 1 它是 sill LTR ，它根本没有改变，当我打开源代码时我看不到并且加载了 rtl.css 文件，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:25:34.463

*   我不认为 Gantry Framework 提供了 rtl.css 文件
*   检查模板内部是否是 RTL 文件或对此类内容的任何引用（可能是您的模板不支持 RTL）。

# c# - 从资源文件中引用资源键

> ID：12585203
> 
> 赞同：0
> 
> 时间：2012-09-25T14:31:58.420
> 
> 标签：c#, wpf, resourcedictionary

我曾经有一个 WinForms 应用程序，其中我使用静态类来获取简单的字符串资源。在这堂课中，我有可以访问的常量字符串。其中一个字符串由另一个常量的值加上它自己的值组成。像这样的东西：

```
private const string Path = @"C:\SomeFolder\";
public const string FileOne = Path + "FileOne.txt";
public const string FileTwo = Path + "FileTwo.txt"; 
```

现在我有一个 WPF 应用程序，我正在使用一个 ResourceDictionary，我将它合并到 Application 范围。一切正常，但我想要类似上面的 C# 代码。这是我已经拥有的：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:System="clr-namespace:System;assembly=mscorlib">

    <System:String x:Key="Path">C:\SomeFolder\</System:String>
    <System:String x:Key="FileOne">FileOne.txt</System:String>
    <System:String x:Key="FileTwo">FileTwo.txt</System:String>

</ResourceDictionary> 
```

现在我需要一些自动添加到两个文件字符串中的东西（某种对“路径”的引用），它不需要像 C# 代码中那样是私有的。有谁知道我怎么能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:16:23.640

您仍然可以将静态类与资源一起使用：

```
namespace WpfStaticResources
{
    class MyResources {
        private const string Path = @"C:\SomeFolder\";
        public const string FileOne = Path + "FileOne.txt";
        public const string FileTwo = Path + "FileTwo.txt";
    }
} 
```

然后从您的 XAML 参考中：

```
<Window x:Class="WpfStaticResources.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfStaticResources="clr-namespace:WpfStaticResources" 
    Title="{x:Static WpfStaticResources:MyResources.FileOne}" Height="350" Width="525">
    <Grid>

    </Grid>
</Window> 
```

就个人而言，我宁愿不使用静态类，而是创建一个域对象，将其设置为您的 DataContext 然后绑定到它的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:22:05.823

如果你想在 XAML 中使用它，这里有两个想法：

**想法一：一个`Binding`**

在您的资源中，仅添加`Path`：

```
<System:String x:Key="Path">C:\SomeFolder\</System:String> 
```

而且，在您的 XAML 中的某处：

```
<TextBlock Text='{Binding Source={StaticResource Path}, StringFormat={}{0}FileOne.txt}' /> 
```

这将显示 Path+"FileOne.txt"

（注意：你可以写任何你想要的东西而不是 FileOne.txt ）

你可以用这种方式定制东西。

**想法2：一个`MultiBinding`**

更方便您尝试做的事情恕我直言：您保留`Resources`您定义的这三个。

如果您想在某处调用它们以便显示 Path + fileOne，只需使用它（例如带有 a `TextBlock`）

```
 <TextBlock >
        <TextBlock.Text>
            <MultiBinding StringFormat="{}{0}{1}">
                <Binding Source="{StaticResource Path}" />
                <Binding Source="{StaticResource FileOne}" />
            </MultiBinding>
        </TextBlock.Text>
    </TextBlock> 
```

这就是你所需要的！

或者，如果您不在`String`UI 中使用这些 s，您仍然可以使用静态类。但是使用 XAML 方式更清洁恕我直言（所有与 UI 相关的东西都应该保留在 XAML 中）

# php - php 将上传的文件重命名为扩展名

> ID：12585207
> 
> 赞同：0
> 
> 时间：2012-09-25T14:32:17.770
> 
> 标签：php, file-io

我有一个php代码如下：

```
 $titleA = $_POST["title"];

if (in_array($_FILES["file"]["type"], $valid_mime_types)) {
    $destination = "bannerImages/" . $_FILES["file"]["name"];
    move_uploaded_file($_FILES["file"]["tmp_name"], $destination); } 
```

我想用 $titleA 变量更改文件名。但是扩展名是一样的。基本上，文件名将成为标题所写的内容。让我说，原始文件是 first.jpeg 第二个将是 second.jpeg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:40:24.267

您好，如果我理解正确，您在提取扩展信息时遇到问题。你可以随时使用`pathinfo`

例子

```
$extention = pathinfo("first.jpeg ",PATHINFO_EXTENSION);
$newName = "secound." . $extention ;
var_dump($newName); 
```

输出

```
string 'secound.jpg' (length=11) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:43:42.867

基本上你需要上传文件的扩展名，

你必须先获得扩展名，你有文件

```
$_FILES["file"]["name"] 
```

字符串位置“strpos()”将获取文件的点

```
$idx = strpos($_FILES['file']['name'],'.'); 
```

在点之后，您必须通过文件扩展名；

```
$ext = substr($_FILES['file']['name'],$idx); 
```

最后根据需要更改文件名，

```
$file_name = $titleA . $ext; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:39:53.000

使用 move_uploaded_file 时，您可以选择文件名，因此您可以选择任何您想要的。

当您上传文件时，它会被放入一个临时目录，move_uploaded_file() 允许您移动该文件，并且您还需要设置文件的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-14T06:35:31.347

下面是我如何将文件扩展名全部从 .png 重命名为 .jpg 的代码

```
function replace_extension($filename, $new_extension) {
     $info = pathinfo($filename);
    $newname = $info['filename'] . '.' . $new_extension;
    rename('/home/image/'.$filename, '/home/image/'.$newname);
    return $newname;
}
$dir = '/home/image';
$files = scandir($dir);
//print_r($files);
foreach($files as $key => $file)
{
     echo replace_extension($file, 'jpg');
    echo "<br />";
} 
```

# qa - Rational Functional Tester 无法启用浏览器

> ID：12585208
> 
> 赞同：0
> 
> 时间：2012-09-25T14:32:19.827
> 
> 标签：qa, rft

我正在尝试在 Mozilla firefox 浏览器上启用 RFT 测试环境，但总是收到以下错误消息
**CRFCN0792E：无法启用浏览器。浏览器位置是 C:\Program Files (x86)\Mozilla Firefox。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:13:40.387

它是哪个版本的 Firefox？
还要检查您是否运行了多个 Firefox 实例（任务管理器中的 firefox.exe）。

# asp.net - 我可以将 Excel 文件放在我的 Web 应用程序中，并受 ASP.Net 授权的控制吗？

> ID：12585211
> 
> 赞同：1
> 
> 时间：2012-09-25T14:32:23.653
> 
> 标签：asp.net, asp.net-authorization

我正在寻找一种仅允许特定用户访问某些 Excel 文件的方法。

这是场景：

我有一个 ASP.Net 4 应用程序，它是表单身份验证。我希望能够让许多用户访问不断增长的 Excel 文件集。每个用户都可以访问其中一组。

我可以很容易地安排一个导航页面，它只会显示指向允许用户查看的 Excel 文件的超链接。但是，通过猜测 URL，也可以检索其他人的文件。

我尝试了以下场景：为所有 Excel 文件设置一个基本文件夹，其中每个用户都有一个文件夹。在每个文件夹中，都会放置一个 web.config 文件。在主文件夹上，它包含以下内容：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <deny users="*" />
        </authorization>
    </system.web>
</configuration> 
```

每个子文件夹：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow users="<username>" />
        </authorization>
    </system.web>
</configuration> 
```

这适用于文件夹内的任何 .aspx 文件，但不适用于其他类型的资源，例如我的 Excel 文件。始终允许访问这些内容。我认为这是由于这些文件不是由 ASP.Net 工作进程处理的事实引起的。

什么是只安排正确用户访问的好方法？我正在考虑将 Excel 文件存储在 ASP.Net 应用程序的虚拟目录之外，并编写一些 ServeExcel.aspx 页面，该页面将使用响应流输出 Excel 文件。有没有更好的方法来做到这一点？

* * *

另外，针对BrOSs的评论

我阅读了“演练：创建具有会员资格和用户登录的网站”并创建了一个测试站点。我没有从一个空的项目模板开始，而是从一个 ASP.Net Web 应用程序开始，而不是遵循所有步骤，并赶上了步骤“创建仅限成员的页面”中的演练。我跟进并包括步骤“添加新用户”。我创建了两个用户，用户“member”，授予对文件夹 Membership 的访问权限，另一个用户“visitor”，拒绝访问此文件夹。除了教程中的步骤之外，我还添加了访问规则“拒绝用户”。

运行 Web 应用程序时，成员页面 ~\MemberPages\Members.aspx 对“成员”可见，而对“访问者”不可见。

之后，我将文件*test.xls*放在 MemberPages 文件夹中。令我大吃一惊的是，“访问者”（和匿名用户）也拒绝访问此文件！

*2013-01-03 添加的注释：上述保护 Excel 文件的真正原因是我使用了内部 Visual Studio 开发服务器。在服务器上，将使用 IIS，默认情况下 IIS 本身将提供 Excel 文件。我尝试通过修改 ISAPI 过滤器配置来修改 IIS 6.0 和 7.5 的配置，但最后这似乎对错误配置很敏感，所以我应用了 Joe 建议的解决方案。*

这与我使用自己的 Web 应用程序的经验有很大不同，我发现项目之间存在显着差异。

我的项目不使用 ASP.Net Membership，而是使用自定义用户表。此外，自定义代码存在于 global.asax.vb 文件中：

```
Sub Application_AuthenticateRequest(ByVal sender As Object, ByVal e As EventArgs)
    If (Not (HttpContext.Current.User Is Nothing)) Then
        Dim objLogin As New Person(ConfigurationManager.AppSettings("DBConnection"))
        objLogin.AuthenticateUser(HttpContext.Current.User.Identity.Name)

        Dim strRoles(10) As String
        strRoles(0) = "user"
        Dim objPrincipal As New System.Security.Principal.GenericPrincipal(objLogin, strRoles)
        Context.User = objPrincipal
        System.Threading.Thread.CurrentPrincipal = objPrincipal
    End If
End Sub 
```

注意：*Person*类实现了 System.Security.Principal.IIdentity 接口。我不确定是否在测试项目中执行了类似的代码，但至少在 Global.asax.cs 或 Login.aspx.cs 文件中没有类似的代码。

我将调试器附加到我的项目中，发现 Application_AuthenticateRequest 对 aspx 文件的每个请求都执行，并且每次都没有 HttpContext.Current.User 。在请求 Excel 文件期间，不会执行此代码，我认为这就是为什么在没有 web.config 授权设置施加的任何限制的情况下提供文件的原因。

我发现了另一篇文章：[ASP.NET 中的对象持久性（回发之间），](https://stackoverflow.com/questions/4588052/object-persistence-between-post-backs-in-asp-net/)并将深入研究它，看看它可以帮助我。

尽管如此，由于我正在编写代码，为许多项目使用的一种框架 ASP.Net 应用程序添加一些自定义功能，我认为更改 global.asax 文件将超出可接受的修改范围。因此，我仍在考虑使用 ServeExcel.aspx/ashx 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:07:33.463

使用`ServeExcel.aspx`页面（或`ServeExcel.ashx`处理程序）来处理授权和提供 Excel 文件是一种合理的方法。

# python - 遇到python问题

> ID：12585212
> 
> 赞同：0
> 
> 时间：2012-09-25T14:17:35.980
> 
> 标签：python, python-3.x

我是 python 新手，我正在尝试做一个简单的应用程序（年龄计算器）；我正在使用 Python 3。

这是我的代码：

```
date=2012
age=input("type in the date you born to calculate your age")

print ("your age is ") + (date-age) 
```

对我来说似乎很好，但它给了我一个`TypeError: cannot concatente 'str' and 'int' objects`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T14:34:45.577

将所有内容作为一系列参数传递给`print`函数：

```
print("your age is", date - int(age)) 
```

该`print()`函数将为您将结果转换为`date - int(age)`字符串。请注意，您需要`age`先将（字符串）转换为整数，然后才能从中减去它`date`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:59:34.333

Python 是[强类型](http://en.wikipedia.org/wiki/Strong_typing)的，因此您需要将数据转换为适当的类型。

*   `age`是一个`str`（字符串），因为它来自输入。你应该写：

    `date - int(age)`

*   `print ("your age is ") + (date-age)`不会工作有两个原因：

    1.  `print`在 python 3 中是一个函数，所以它只考虑`print ("your age is ") + (date-age)`作为它的参数列表；

    2.  同样，您正在连接 a`str`和 an `int`，这在强类型语言中是非法的。

可以覆盖最后一次转换，因为`print`为您完成了所有工作：

```
print("your age is ", date - int(age)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:02:47.573

`input`会给你一个字符串。然而，2012 是一个整数。它们都需要是算术类型才能对它们进行数学运算。您希望输入是一个数字，可能是一个 int。使用`int(age)`. 所以你会做`print("Your age is ", date - int(age))`

挑剔你的代码，如果我出生于 1992 年 12 月呢？然后你的代码会说我是 20 岁，即使我实际上是 19 岁。另外，如果我输入我的实际出生日期怎么`June 6, 1992`办？

如果您刚刚开始学习语法，这些内容无关紧要，但考虑一下是件好事，因为您很快就会发现这些事情实际上会给您带来编程问题，而基本语法和很少在您熟悉该语言后，技术性往往是您可以在 Google 上查找或使用备忘单（我的首选方法，因为我使用许多具有 C 样式语法的不同语言）的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T15:09:00.277

在您学习 Python 时，最好将错误显示在最后一行并将其提供给搜索引擎。

`TypeError: cannot concatenate 'str' and 'int' objects`绝不是独一无二的。

[TypeError：无法连接“str”和“int”对象](https://stackoverflow.com/questions/7001664/typeerror-cannot-concatenate-str-and-int-objects)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T11:33:26.023

这里的问题是你试图连接一个字符串和一个 int。Python（或大多数其他语言）不支持这一点，这就是错误消息告诉你的内容。你所做的是错误的，因为你混淆了两个不同的概念

1.  错误地调用了函数 - 你应该这样调用它。

    ```
    print('Your age is: ', date-age) 
    ```

2.  您使用了 + 运算符。这是连接字符串和数字的另一种方法，但是要做到这一点，您必须首先确保它们都是相同的类型。在这种情况下 - 字符串。您可以使用 string 函数来执行此操作。

    ```
    print('Your age is: ' + str(date-age)) 
    ```

一个更好的方法是使用字符串格式化，主要是因为它支持各种格式而不需要将它们转换为字符串以及使具有多个值的长字符串更容易。

```
print('Your age is: %d' % date-age) 
```

[您可以在此处](http://docs.python.org/library/stdtypes.html#string-formatting)阅读有关字符串格式的更多信息。

:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T20:26:40.580

您要做的第一件事是将要打印的所有内容保存在 print() 函数括号内。

```
print ("your age is ") + (date-age) 
```

不管用。

这可能会更好

```
 print("your age is" + str(date-int(age))) 
```

当你继续使用 python 时，你会意识到为什么你不能做你用 print 函数做的事情。无论如何，我希望这对您有所帮助。您也可能会注意到我在代码中使用了一些功能；str() 和 int()。这些是类型转换函数。您可能以前遇到过这些，或者您很快就会遇到。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2012-09-25T14:24:34.403

尝试：

```
print("Your age is ",date-int(age)) 
```

`str`会将您的整数结果转换为字符串，以便可以正确地将其“添加”到字符串的其余部分。

# mysql - 使用单个 SQL 命令将数据库 A 中的多行插入数据库 B

> ID：12585215
> 
> 赞同：0
> 
> 时间：2012-09-25T14:32:30.303
> 
> 标签：mysql

我有一个名为“客户”的表的数据库，其中包含客户的电话号码。它绝对不止一排。

另一方面，我还有一个名为“SMS”的数据库，其中有一个名为“发件箱”的表。

为了显示“客户”表中的所有电话号码，我使用以下 SQL 查询：

```
SELECT Customers.PhoneNumber FROM Customers WHERE PurchaseDate BETWEEN 2012-01-01 AND 2012-01-31; 
```

现在，我需要将这些电话号码（多行）一次插入“发件箱”。每个电话号码都会收到相同的消息。所以，基本上我只需要知道如何对多行使用这个 INSERT 查询：

```
INSERT INTO Outbox (PhoneNumber, Message) VALUES (*Multiple PhoneNumbers Here*, 'Same Message To All Customers'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:37:53.177

我假设您希望每个电话号码有一个单独的行。您可以通过将 INSERT 与 SELECT 结合使用来做到这一点：

```
INSERT INTO db2.Outbox (PhoneNumber, Message)
    SELECT Customers.PhoneNumber, 'Same Message To All Customers' as message
    FROM db1.Customers
    WHERE PurchaseDate BETWEEN 2012-01-01 AND 2012-01-31; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:37:12.223

```
INSERT INTO Outbox (PhoneNumber, Message) 
SELECT Customers.PhoneNumber,  'Same Message To All Customers' as Message 
FROM Customers 
WHERE PurchaseDate BETWEEN 2012-01-01 AND 2012-01-31; 
```

你应该做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:40:24.437

```
INSERT INTO dbX.table_a
    SELECT ...
        FROM dbY.table_b
        WHERE ... 
```

如果确保选择的列列表与 dbX.table_a 完全匹配，则不必在插入的值列表中指定任何内容**。**

# phone-number - 查找手机国家代码和运营商代码的API

> ID：12585223
> 
> 赞同：-3
> 
> 时间：2012-09-25T14:32:45.743
> 
> 标签：phone-number

我正在寻找一个 API，它可以为我提供给定手机号码的国家代码和运营商代码，如果任何机构有任何线索，请更新。

它可以是数据库或 API。
例如：- 我将电话号码作为
电话号码：97155xxxxxxxx
国家代码：971 国家是阿联酋
运营商代码：55 运营商名称是“du”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-05T05:51:18.523

没有提供服务提供商和手机号码信息的特定 API，您可以使用提供所有国际电话号码运营商 (HLR) 的付费服务。

[访问链接了解更多信息](http://www.telecomabc.com/h/hlr.html)

# performance - 休眠映射性能

> ID：12585228
> 
> 赞同：1
> 
> 时间：2012-09-25T14:33:03.837
> 
> 标签：performance, hibernate, orm

我有一个由 hibernate4 映射的简单对象并像这样获取它们

```
Criteria crit = session.createCriteria(Entity.class);
crit.add(Restrictions.in("id", ids));
System.out.println(crit.list().size()); 
```

它获取大约 2000 个对象。纯 SQL 查询大约需要 100ms。没有连接等。但在休眠状态下大约需要 4 秒。所以或映射/缓存等需要很多时间。有没有办法加快速度？

你有什么建议？

实体看起来像这样。我已启用 sql 日志记录，但没有选择 ManyToOne 急切

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorFormula("type")
public abstract class Entity extends ResourceEntity implements Cloneable {
    @Id
    @NotNull
    @GeneratedValue(strategy = GenerationType.AUTO)
    @JsonProperty(value = "id")
    private Integer id;

    @NotNull
    private Type type; //Enum

    private Date expirationDate;

    @NotNull
    private boolean shared;

    private int orderID;

    @ManyToOne
    private MaappedEntity me;

    private String strinvar; 
```

mh，即使使用普通的 sql 查询，休眠似乎也很慢

```
SQLQuery sql = session.createSQLQuery("select * from Entity");
System.out.println(sql.list().size()); 
```

![在此处输入图像描述](../Images/c884aab2ccc81a9e7bcc807b1b1b76f1.png)

# scala - 播放 2.0 Scala 和异步回调

> ID：12585232
> 
> 赞同：3
> 
> 时间：2012-09-25T14:33:09.903
> 
> 标签：scala, playframework-2.0

我想对我的数据库进行两次调用，这需要一段时间才能返回结果，而且我不想阻塞当前线程。我使用 Akka Futures 来包装数据库调用。

我不想等待（阻塞）两个调用返回，而是指定一个要调用的回调函数，然后它可以呈现响应。我怎么做？这是我的控制器代码：

```
def showPie = IsAuthenticated(Roles.validator) { user => implicit request =>
    val eventUid = request.session.get(EventUid).get

    val printed = Akka.future(TicketRepository.getCountForState(eventUid, "Printed"))
    val validated = Akka.future(TicketRepository.getCountForState(eventUid, "Validated"))

    //this would be evil, because it would block: Ok(views.html.pie(printed.await(1000).get, validated.await(1000).get)) 

    //create a promise for all the promised results
    val promise = Promise.sequence(List(printed, validated))

    //this doesnt work, but how can I make it work WITHOUT blocking this thread?
    promise.callWhenResultIsReady(Ok(view.html.pie(promise.get))
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T14:41:12.220

你很近。你可以简单地调用`map`一个 promise 来处理它。在 Async 块内，它保持非阻塞。[相关文档](http://www.playframework.org/documentation/2.0/ScalaAsync)（参见“AsyncResult”）。

```
def showPie = IsAuthenticated(Roles.validator) { user => implicit request =>
    val eventUid = request.session.get(EventUid).get

    val printed = Akka.future(TicketRepository.getCountForState(eventUid, "Printed"))
    val validated = Akka.future(TicketRepository.getCountForState(eventUid, "Validated"))

    //create a promise for all the promised results
    val promise = Promise.sequence(List(printed, validated))
    Async {
        promise map { res =>
            Ok("Got it!" + res)
        }
    }
} 
```

***编辑*：** 从您下面的评论中，让我们仔细看看 Async 块。`Async`接受 a`Promise`，并返回 a`AsyncResult`，它是`Result`（这是`Action`需要的）的子类型。

```
 Async {
        // We take the promise, and add something akin to a callback
        //  function with `map`. This new function is called when `promise`
        //  is complete.
        val result = promise map { res => // this is the redeemed promise
          Ok("Got it!" + res)
        }
        result // this is the new promise
    } 
```

由于该`map`函数在`promise`完成时被调用，因此它保持非阻塞。这整个块用`AsyncResult`, 和 Play!快速返回。以类似的方式管理它，当它完成时返回客户端（并释放 Play！同时做其他事情）。

# ruby-on-rails - Rails`update_attributes`未定义方法`first`为nil：NilClass

> ID：12585233
> 
> 赞同：0
> 
> 时间：2012-09-25T14:33:13.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, update-attributes, globalize3

我正在尝试在记录上使用 update_attributes，但它失败了，我不知道为什么，我必须错过一些明显的东西，因为我已经多次使用该方法。

我正在尝试为`Globalize3`用于其名称变量的模型播种数据。

```
class City < ActiveRecord::Base
  attr_accessible :name

  translates :name
end 
```

请注意， City 没有名为 的列`name`。

在控制台中，我做类似的事情没有问题`city.update_attributes(name: "new name")`，但是下面的代码（in `seeds.rb`）总是失败，`Undefined method`首先是`for nil:NilClass`：

```
localized_cities_attributes = [
  { en: { name: "New York City" }, fr: { name: "New York" } },
  { en: { name: "Montreal" }, fr: { name: "Montréal" } }
]
localized_cities_attributes.each do |city_localized_attributes|
  city = nil

  city_localized_attributes.each do |locale, attributes|
    with_locale(locale) do
      if city
        city.update_attributes(name: attributes[:name])
      elsif (city = City.find_by_name(attributes[:name])).nil?
        city = City.create(attributes)
      end
    end
  end
end 
```

`with_locale`被定义为：

```
def with_locale(new_locale, &block)
  return if block.nil?

  locale_to_restore = I18n.locale
  I18n.locale = new_locale
  block.call
  I18n.locale = locale_to_restore
  nil
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:06:07.157

我终于想通了使用跟踪。

事实证明，我的自定义方法`with_locale`也是由 globalize3 定义的，并导致了各种问题。

感谢`@cthulhu`，我发现`I18n.with_locale`并使用了它。

# flash - 使用现有源调试动作脚本

> ID：12585238
> 
> 赞同：1
> 
> 时间：2012-09-25T14:33:37.627
> 
> 标签：flash, debugging

我有现有的 .swf 及其来源。我必须重建它才能调试它吗？或者我可以使用现有源连接调试器？我使用闪存生成器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:30:19.990

一些与调试相关的信息只有在专门为此而构建时才会存储在 SWF 中，例如，行号仅编译为使用`-debug=true`设置编译的 SWF。仍然可以调试 SWF，只要您在调试播放器中运行它，但会缺少一些功能。您将没有局部变量的名称，并且导航代码将变得困难，但堆栈跟踪将在那里。

值得注意的是，如果您有 MXML 源，调试器将无法使用这些源，除非 SWF 有调试信息。AS 来源会有所帮助，但不要期望太多。使用调试信息编译会好得多。

# tk - 如何为 TCL Tk 禁用 Tk 表中的完整列

> ID：12585241
> 
> 赞同：1
> 
> 时间：2012-09-25T14:33:57.827
> 
> 标签：tk

我是 TCL Tk 的新手，我正在使用 Tk 表在我的 GUI 中创建一个表。

```
Basically it contains some hardware register's info like its name, address, value....etc.
Now i want that user should not be able to change the register address and name and hence i 
```

想完全禁用 Tk 表的名称和地址列。谁能告诉我我该怎么做。我很长时间以来都在尝试这个。请帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:20:20.750

Tk 没有内置的表格小部件，所以我假设您正在使用[此处](http://sourceforge.net/projects/tktable/)的 Tktable/Tile 。

这是我拼凑在一起的一个示例，它禁用了 2 个列。基本上，您通过使用 -coltag 命令和函数将要编辑的所有条目分配给特定标签，然后将状态等属性应用于该标签。

```
package require Tktable

array set cells {
    0,0 David 0,1 "1234 Fake st" 0,2 foo
    1,0 John 1,1 "444 New York Ave" 1,2 bar
}

# This function returns the tag to assign to all cells in col $col
proc tagCol col {
    # If we're name or address column, add the disabledColumn tag to it
    if {$col == 0 || $col == 1} {
        return disabledColumn;
    }
}

table .mytable -rows 2 -cols 3 -variable cells -coltagcommand tagCol

# Disable editing of the disabled column entries
.mytable tag config disabledColumn -state disabled -fg blue

pack .mytable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T08:18:50.600

您还可以使用任何选项**-titlerows 'n'**和**-titlecols 'm'**来声明前 'n' 行是只读标题，或者前 'm' 列是只读标题。

希望我有所帮助

# asp-classic - Active Directory 密码更改 - 不会搜索上下文

> ID：12585243
> 
> 赞同：0
> 
> 时间：2012-09-25T14:34:13.350
> 
> 标签：asp-classic, vb6

我有一个旧脚本可以为我们的学生帐户处理一些密码重置，但是当用户移动到子 OU 并导致问题时，它似乎遇到了一些障碍。

基本上以下是 LDAP 连接字符串。

```
strLDAP ="LDAP://Studc01.student.college.ad:389/OU=Students,DC=student,DC=college,DC=ad" 
```

如果学生帐户驻留在此主 OU 中，则该脚本似乎能够将其密码重置为指定的默认值。但是，如果帐户位于顶级学生 OU 的子 OU 中，则脚本会失败并失败。

该脚本如下所示，并从先前输入的文本字段中获取一些信息。

```
if request.form("AccountName")<> "" then
sAMAccountName = request.form("AccountName")
cUser = request.form("User")
else
response.write("There was an error no account details were given.")
response.end
End if

strLDAP ="LDAP://Studc01.student.college.ad:389/OU=Students,DC=student,DC=college,DC=ad"

Set obj = GetObject(strLDAP)

for each objUser in obj
if ucase(objUser.sAMAccountName) = ucase(sAMAccountName) then
Exit for
end if
next

Response.write("The password has now been reset (Password1) for account " &   objUser.sAMAccountName & ", thank you")

objUser.SetPassword "Password1"
objUser.Put "pwdLastSet", 0
objUser.SetInfo 
```

这些脚本似乎使用 IIS 内应用程序池中的网络服务来运行 - 关于它为什么无法搜索上下文的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:47:55.803

循环用户`For Each`是非常低效的。尝试`ADsDSOObject`使用 ADO 的 OLEDB 提供程序来像这样查询 AD 子树

```
strLDAP = "LDAP://" & GetObject("LDAP://RootDSE").Get("defaultNamingContext")
sAMAccountName = "wqw"

With CreateObject("ADODB.Connection")
    .Open "Provider=ADsDSOObject;Page Size=1000;Searchscope=2"
    With .Execute("<" & strLDAP & ">;(&(objectCategory=person)(objectClass=user)(sAMAccountName=" & sAMAccountName & "));ADsPath;subtree")
        If Not .EOF Then
            Set objUser = GetObject(.Fields("ADsPath").Value)
            WScript.echo "Will reset password of " & objUser.name
        End If
    End With
End With 
```

另请注意，您必须过滤域用户，`(&(objectCategory=person)(objectClass=user))`否则可能会重置计算机帐户的密码。

# c# - 如何在循环中重置计数器

> ID：12585244
> 
> 赞同：1
> 
> 时间：2012-09-25T14:34:15.317
> 
> 标签：c#, loops

这是我的代码

```
 int i = 0;
        while (i < 10)
        {
            i++;
            i = i % 10;
        } 
```

上面的代码在达到限制时将计数器重置为 0。只是想有没有办法在下面的代码中做一些类似的事情来替换 if 条件

```
 int i = 10;
        while (i > -1)
        {
            i--;
            if (i == -1)
                i = 10;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:43:13.043

您的两个循环都是`while(true)`如此，因此它们在问题中不起任何作用。

剩下的就是：“我可以在没有if的情况下进行倒计时吗？”

答案是肯定的，如果你真的想：

```
 i--;
 i = (i + 10) % 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:40:48.630

```
 int i = 10;
    while (true)
    {
        i = (i + 10) % 11;
    } 
```

这会给你：

```
10 -> 9
9 -> 8
8 -> 7
7 -> 6
6 -> 5
4 -> 3
3 -> 2
2 -> 1
1 -> 0
0 -> 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:41:57.127

通过使用它，您可以在达到限制 10 时将 i 的值重置为 0。

```
int i = 0;
while (i < 10)
{
   i++;
   if(i==10)
   {
      i=0;
   }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T14:42:26.070

您的第一个循环遍历数字 0..9。你可以用同样的方式让你的代码在 9..0 上迭代：

```
int i = 10;
while (i > -1)
{
    i--;
    i = i % 10;
} 
```

# c# - 使用 GUID + Windows 8 进行身份验证

> ID：12585247
> 
> 赞同：0
> 
> 时间：2012-09-25T14:34:22.443
> 
> 标签：c#, wcf, microsoft-metro

当我向我的 MVC3 应用程序添加服务引用时：我获得了带有`guid`in 参数的方法：

```
void getcities( string token);
void getCountry( string token); 
```

但是当我向 Windows 8 应用程序添加服务引用时，生成的代理不包含令牌：

```
public System.Threading.Tasks.Task<Maquette_MyAirport_Win8.ServiceFlightInfo.CitiesResponse> GetAllCitiesAsync() 
{
  Maquette_MyAirport_Win8.ServiceFlightInfo.BaseRequest inValue = new Maquette_MyAirport_Win8.ServiceFlightInfo.BaseRequest();

  return ((Maquette_MyAirport_Win8.ServiceFlightInfo.FlightInfoService)(this)).GetAllCitiesAsync(inValue);
} 
```

因此，当我在没有 的情况下调用此方法时`guid`，会引发错误：您无权访问此服务。

请问您有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:31:17.590

响应是 [System.ServiceModel.MessageHeaderAttribute] 在 Windows 8 中不受支持。

所以我添加了一个这样的自定义行为来注入 headermessage： [如何向每个 WCF 调用添加自定义 HTTP 标头？](https://stackoverflow.com/questions/964433/how-to-add-a-custom-header-to-every-wcf-calls)

# ios - 获取默认图片名称

> ID：12585250
> 
> 赞同：2
> 
> 时间：2012-09-25T14:34:23.647
> 
> 标签：ios

我有一个应用程序需要在启动期间继承 default.png 图像。我的应用程序是国际化的，所以我为每个国家/地区都有不同的图像，并且遵循了图像的几个选项的指南（默认、@2x 版本、横向等）

那么对于查询，是否可以在启动后确定选择显示哪个版本的图像？

提前致谢！

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:45:48.753

这行得通吗？

```
NSString *imageName = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"UILaunchImageFile"];
UIImage *image = [UIImage imageNamed:imageName]; 
```

# java - Android：ListView 标头中的 SetText

> ID：12585252
> 
> 赞同：2
> 
> 时间：2012-09-25T14:34:29.940
> 
> 标签：java, android, listview, header, android-listview

我有一个带有布局作为标题的 ListView，只是我想以编程方式更改文本和图像。我不知道将它放在代码中的哪个位置。这是我的代码[http://plaatscode.be/141928/](http://plaatscode.be/141928/)（密码：Android），这是我要放置的代码：

```
MenuFoto.setImageResource(R.drawable.------);
MenuTitle.setText(getResources().getString(R.string.------));
MenuInfo.setText(getResources().getString(R.string.------)); 
```

注意：[http://plaatscode.be/141928/](http://plaatscode.be/141928/)上的代码是一个完整的工作代码。

我必须在哪里放置上面的代码才能使其正常工作？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:46:17.233

**使用来自评论的新信息编辑答案**

你更新了你的代码，所以我会更新我的答案。您将 MenuFoto、MenuTitle 和 MenuInfo 放在错误的位置。代替：

```
MenuFoto = (ImageView) findViewById(R.id.ProductFoto);
MenuTitle = (TextView) findViewById(R.id.ProductTitle);
MenuInfo = (TextView) findViewById(R.id.ProductInfo); 
```

做：

```
ImageView menuFoto = (ImageView) header.findViewById(R.id.MenuFotoID);
TextView menuTitle = (TextView) header.findViewById(R.id.MenuTitleID);
TextView menuInfo = (TextView) header.findViewById(R.id.MenuInfoID);

menuFoto.setImageResource(R.drawable.------);
menuTitle.setText(getResources().getString(R.string.------));
menuInfo.setText(getResources().getString(R.string.------)); 
```

后：

```
ViewGroup header = (ViewGroup)inflater.inflate(R.layout.productenlistviewheader, list, false); 
```

之前：

```
list.addHeaderView(header, null, false); 
```

在`MenuFoto = (ImageView) findViewById(R.id.ProductFoto);`您尝试在 ContentView 中获取 id 时（当`setContentView`您定义 ContentView 时）。但是，您想从标题中获取您的 id，因此您必须在标题上执行 findViewById（您使用`inflate.inflate`.

# java - 如何在提交时删除 Intellij IDEA 中未使用的导入？

> ID：12585253
> 
> 赞同：175
> 
> 时间：2012-09-25T14:34:30.527
> 
> 标签：java, import, automation, intellij-idea

有没有办法在提交时删除 Intellij IDEA 中未使用的导入？

手动操作不是很理想，`CTRL`++`ALT`有`O`帮助，但它仍然是手动的。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2015-06-04T03:25:32.247

如果您使用的是 IntelliJ IDEA 或 Android Studio：

![Android 优化导入](../Images/769e729c57f14458720188d4b91e08ef.png)

转到**Settings `>`Editor `>`General `>`Auto Import**并选中**Optimize imports on the fly**复选框。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-09-25T14:37:15.377

提交时，勾选`Optimize imports`右侧的选项。这将成为默认设置，直到您更改它。

我也更喜欢使用该`Reformat code`选项。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-09-25T14:40:56.697

您可以在提交对话框中选中复选框。

![在此处输入图像描述](../Images/3f39f116a315b7c523ab6353f5827a79.png)

从 11.1 及更高版本开始，您可以使用设置自动优化导入。

![在此处输入图像描述](../Images/a524c6bf58e65353bd7a3e51dffee190.png)

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2017-08-08T20:50:19.417

在 Mac IntelliJ IDEA 中，命令为`Cmd`++`Option``O`

对于某些旧版本，它显然是`Ctrl`++ 。`Option``O`

（字母 O 不是零 0）最新版本 2019.x

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2016-02-22T10:52:33.710

**在项目视图中选择要从中删除未使用的导入**的项目/模块。**然后从**Code**菜单中选择**Optimize imports**并使用**Run**确认。导入将在整个项目/模块中清理。**

 *** * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-08-12T13:47:01.197

在 mac 书

智能

Control + Option + o（不是零，字母“o”）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-12-03T17:02:04.533

或者您可以执行以下快捷方式：

**MAC** : Shift + Command + A (Enter Action 菜单弹出)

和写 ：`Optimize Imports`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-06-29T11:08:21.077

删除 windows 中未使用的导入。请使用下面的默认组合键。

**`CTRL + ALT + O ---> to remove the unused imports in windows.`**

但是，您也可以**在设置中更改“优化导入”的键盘映射。**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-18T22:20:05.260

在 IntelliJ 中，选择要优化导入的项目，转到**代码**菜单并选择**优化导入**，然后会出现一个小的**优化导入**弹出窗口。在弹出窗口中，您需要单击“**运行”**按钮。或者，在 Mac 上的 IntelliJ 上，您可以使用键盘快捷**键****`Option`++`Command``O`**

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-12T10:27:05.323

`File/Settings/Inpsections/Imports`并将“未使用的导入”更改为错误。这在“检查”装订线和“检查结果”面板中更清楚地标记了它们。**

# javascript - 为什么 $.each 循环通过一个正确的元素但不是第二个？

> ID：12585255
> 
> 赞同：1
> 
> 时间：2012-09-25T14:34:38.753
> 
> 标签：javascript, jquery

我有很多包含产品信息的行，我想获取标题、产品 ID 和价格。当我使用 $.each 遍历所有内容时，它确实适用于标题和产品 ID，但不适用于价格。我总是得到每一行的所有价格。这是我的代码：

```
<tr id="ric685197870" class="n_ListTab1 ric_art">
            <td class="n_ListPic"><img title="Das Angebot verfügt über ein Bild." alt="Das Angebot verfügt über ein Bild." src="https://pics.ricardostatic.ch/ImgWeb/2/V3/listing/img.gif"></td>
            <td class="n_ListIcons"><a title="Das Angebot endet in weniger als 3 Stunden." href="javascript:help('symbol_uebersicht')"><span class="sprite icon_3h"></span></a></td>
            <td class="n_ListTitle"><a class="entry-title" href="http://www.ricardo.ch/kaufen/buecher-und-comics/belletristik/sonstige/ich-jagte-eichmann-s-wiesenthal/v/an685197870/" title="Ich jagte Eichmann/S.Wiesenthal">Ich jagte Eichmann/S.Wiesenthal</a></td>
            <td class="n_ListDate">11.9.2012 11:00</td>
            <td class="n_ListOffer">0</td>
            <td class="n_ListPrice">
            <div class="Auc">
                <span class="currency">CHF </span>0.10
            </div></td>
        </tr>
        <tr id="ric686793488" class="n_ListTab2 ric_art">
            <td class="n_ListPic"><img title="Das Angebot verfügt über ein Bild." alt="Das Angebot verfügt über ein Bild." src="https://pics.ricardostatic.ch/ImgWeb/2/V3/listing/img.gif"></td>
            <td class="n_ListIcons"><a title="Das Angebot endet in weniger als 3 Stunden." href="javascript:help('symbol_uebersicht')"><span class="sprite icon_3h"></span></a></td>
            <td class="n_ListTitle"><a class="entry-title" href="http://www.ricardo.ch/kaufen/buecher-und-comics/belletristik/romane/sonstige/angelika-overath-alle-farben-des-schnees/v/an686793488/" title="Angelika Overath: Alle Farben des Schnees">Angelika Overath: Alle Farben des Schnees</a></td>
            <td class="n_ListDate">11.9.2012 11:02</td>
            <td class="n_ListOffer">1</td>
            <td class="n_ListPrice">
               <div class="Auc">
                  <span class="currency">CHF </span>4.00
               </div></td>
</tr>

<script type="text/javascript">
$.each($(".n_ListTitle"), function(i, v) {
            var node = $(this);
            var nodeParent = node.parent();
            var nodeText = node.text();
            var nodePrice = nodeParent.children(i)[5];

            var prodPrice = $(nodePrice.nodeName + ' div').text();
            var prodId = nodeParent.attr('id').replace('ric', '');
            var prodTitle = nodeText;

            var json = {
                id : prodId,
                price : prodPrice,
                currency : "CHF",
                name : prodTitle
            };
            console.log(json);
        }); 
```

我明白了：

> 对象
> 货币：“CHF”
> id：“681625138”
> 名称：“BEVERLEY HARPER：HELLER MOND IN SCHWARZER NACHT--TASCHENBUCH”
> 价格：“**问题出在：每一行的每个价格**”

我希望这是可以理解的，我希望有人可以帮助我弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:38:00.553

```
var prodPrice =  $(nodePrice.nodeName + ' div').text(); 
```

这并不像你认为的那样。 `nodePrice.nodeName`是`"tr"`，所以你的选择器是：

```
$('tr div') 
```

所以，你得到了所有的价格，因为你选择`div`了每个`tr`.

你真正想要的是：

```
var prodPrice = $('div', nodePrice).text(); 
```

这相当于`$(nodePrice).find('div')`

还：

```
var nodePrice = nodeParent.children(i)[5]; 
```

你为什么要经过`i`这里？ `i`是“数组”中的索引，它对 . 没有任何用处`.children`。你想用这个：

```
var nodePrice = nodeParent.children().eq(5); 
```

或者，更好的是（你有这些类，让我们使用它们）：

```
var nodePrice = node.siblings('.n_ListPrice'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:42:18.307

尝试这个：

```
var nodePrice = node.siblings(".n_ListPrice"); 
```

然后您可以使用提取实际价格

```
$(nodePrice).text(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:36:55.400

这适用于数组（[jQuery.each()](http://api.jquery.com/jQuery.each/)）：

```
$.each($(".n_ListTitle"), function(i, v) { 
```

你需要（[.each()](http://api.jquery.com/each/)）：

```
$(".n_ListTitle").each(function(i, v) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:45:36.007

```
var nodePrice = nodeParent.find('.n_ListPrice div');
var prodPrice = nodePrice.text(); 
```

如果您决定稍后添加一行，则更喜欢使用另一个选择器，`eq(5)`您将不得不更改所有这些...`find()`用于查找具有价格持有者类的 TD 并选择其中的 div。你去吧:)

# android - 将文件保存到android的内部存储器？

> ID：12585263
> 
> 赞同：1
> 
> 时间：2012-09-25T14:34:54.090
> 
> 标签：android

我正在借助通过 Web 服务提供的 URL 从服务器下载文件。我对每个版本的设备都很成功，但在 OS 4.1 设备中出现异常。我正在使用以下代码：

```
public static Boolean DownloadFile(String fileURL, File directory) {
                try {

                        FileOutputStream f = new FileOutputStream(directory);
                        URL u = new URL(fileURL);
                        HttpURLConnection c = (HttpURLConnection) u.openConnection();
                        c.setRequestMethod("GET");
                        c.setDoOutput(true);
                        c.connect();

                        InputStream in = c.getInputStream();

                        byte[] buffer = new byte[1024];
                        int len1 = 0;
                        while ((len1 = in.read(buffer)) > 0) {
                                f.write(buffer, 0, len1);
                        }
                        f.close();
                        return true;
                } catch (Exception e) {
                        e.printStackTrace();
                        return false;
                }
        } 
```

我在**c.getInputStream();行收到 java.io.FileNotFoundException** 请建议我解决这个问题。

我打算使用内部存储器，但由于用户无法访问内部存储器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T16:30:03.980

试试这个代码：请注意，创建文件的上下文可能是 Activity/ApplicationContext/etc

```
public boolean downloadFile(final String path) {
    try {
        URL url = new URL(path);

        URLConnection ucon = url.openConnection();
        ucon.setReadTimeout(5000);
        ucon.setConnectTimeout(10000);

        InputStream is = ucon.getInputStream();
        BufferedInputStream inStream = new BufferedInputStream(is, 1024 * 5);

        File file = new File(CONTEXT.getDir("filesdir", Context.MODE_PRIVATE) + "/yourfile.png");

        if (file.exists()) {
            file.delete();
        }
        file.createNewFile();

        FileOutputStream outStream = new FileOutputStream(file);
        byte[] buff = new byte[5 * 1024];

        int len;
        while ((len = inStream.read(buff)) != -1) {
            outStream.write(buff, 0, len);
        }

        outStream.flush();
        outStream.close();
        inStream.close();

    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T14:45:20.797

试试这个代码：

```
String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/saved_images");
myDir.mkdirs();
Random generator = new Random();
int n = 10000;
n = generator.nextInt(n);
String fname = "Image-" + n + ".jpg";
File file = new File(myDir, fname);

if (file.exists()) file.delete();

try {
  FileOutputStream out = new FileOutputStream(file);
  finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
  out.flush();
  out.close();
} catch (Exception e) {
  e.printStackTrace();
} 
```

并添加清单：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# asp.net - ValidationAttribute 类的 RequiresValidationContext 属性有什么用？

> ID：12585267
> 
> 赞同：6
> 
> 时间：2012-09-25T14:35:08.347
> 
> 标签：asp.net, .net, validation, data-annotations, .net-4.5

在 .NET Framework 4.5 中，[`ValidationAttribute`](http://msdn.microsoft.com/en-us/library/cc679227.aspx)该类现在有一个`Boolean`名为[`RequiresValidationContext`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.requiresvalidationcontext.aspx).

我已经挖了很长时间了，我找不到这个属性是为了什么。这个的默认值是假的，我最初认为如果这个设置为假，下面的方法会被调用：

```
public virtual bool IsValid(object value) 
```

如果设置为 true，则调用以下函数：

```
protected virtual ValidationResult IsValid(object value, ValidationContext validationContext); 
```

事实证明，无论你设置什么，总是调用`IsValid`返回的方法。`ValidationResult`

看在上帝的份上，这个`RequiresValidationContext`财产有什么用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-10T17:41:12.270

RequiresValidationContext 对于像 CompareAttribute 或自定义属性这样的验证器很有用。

ValidationAttribute 是抽象类，它取决于你的意思是什么实现。例如，我有验证属性，仅当另一个属性具有某些值时才检查某些字段是否是必需的。

是否调用 IsValid(object value) 取决于 Attribute 实现。例如：

```
[Display(Name = "Your employer")]
[LoginTypeRequired(LoginType = LoginType.Employee, ErrorMessage = "Employee must fill in Employer.")]
public int? Employer { get; set; } 
```

属性代码：

```
public class LoginTypeRequiredAttribute : RequiredAttribute
{
     public override bool RequiresValidationContext
     {
          get {return true;} 
     }

     public LoginType LoginType { get; set; }

     protected override ValidationResult IsValid(object value, ValidationContext validationContext)
     {
          RegisterModel model = (RegisterModel)validationContext.ObjectInstance;

          if (LoginType != model.LoginType)
              return null;
          else
              return base.IsValid(value, validationContext);
      }

       public override bool IsValid(object value)
       {
          return base.IsValid(value);
        }
} 
```

第一个带有两个参数的方法使用 IsValid(object value, ValidationContext validationContext) 来处理上下文。如果一切正常，它会调用基础，内部 .NET 4.5 堆栈是：

> LinqDataModel.dll!LinqDataModel.Models.LoginTypeRequiredAttribute.IsValid(object value) Line 92 C# System.ComponentModel.DataAnnotations.dll!System.ComponentModel.DataAnnotations.ValidationAttribute.IsValid(object value, System.ComponentModel.DataAnnotations.ValidationContext validationContext) + 0x74字节
> 
> > LinqDataModel.dll!LinqDataModel.Models.LoginTypeRequiredAttribute.IsValid(object value, System.ComponentModel.DataAnnotations.ValidationContext validationContext) Line 87 + 0xe bytes C# System.ComponentModel.DataAnnotations.dll!System.ComponentModel.DataAnnotations.ValidationAttribute.GetValidationResult(object value , System.ComponentModel.DataAnnotations.ValidationContext 验证上下文) + 0x1e 字节
> > System.Web.Mvc.dll!System.Web.Mvc.DataAnnotationsModelValidator.Validate.MoveNext() + 0xa2 字节 System.Web.Mvc.dll!System.Web.Mvc.ModelValidator.CompositeModelValidator.Validate.MoveNext() + 0x138 字节System.Web.Mvc.dll!System.Web.Mvc.DefaultModelBinder.OnModelUpdated(System.Web.Mvc.ControllerContext controllerContext, System.Web.Mvc.ModelBindingContext bindingContext) + 0x212 字节

因此，您可以看到 IsValid(object value, ValidationContext validationContext) 的 case 正在调用 IsValid(object value) 如果没有覆盖。

但是您仍然有机会覆盖 IsValid(object value, ValidationContext validationContext) 而不是调用基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:39:43.850

如果我没记错的话，如果调用[Validate(Object, String)](http://msdn.microsoft.com/en-us/library/cc679256.aspx)重载而不是[Validate(Object, ValidationContext)](http://msdn.microsoft.com/en-us/library/dd411784.aspx)，它会抛出[ValidationException](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationexception.aspx)。

# push-notification - PubNub 推送通知

> ID：12585275
> 
> 赞同：1
> 
> 时间：2012-09-25T14:35:35.627
> 
> 标签：push-notification, pubnub

所以我有推送通知设置。当多个客户端连接并推送消息时，其他客户端都会收到该消息。这很好，但我需要的是 Pubnub 也能推送给发送消息的人。我该怎么办？

我正在使用此功能来收听。是否可以指定某种选项以便我也收到通知？

```
PUBNUB.subscribe({
    channel: "notify",
    callback: function(data) {
        alert(data.message);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:26:18.467

“发布”用户是否也在“订阅”？这也将使他能够接收到消息。

# magento - 如何在magento结帐页面中隐藏侧边栏？

> ID：12585278
> 
> 赞同：0
> 
> 时间：2012-09-25T14:35:37.880
> 
> 标签：magento

我想在 magento 结帐页面中隐藏侧边栏。任何人都可以建议我如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:45:32.320

最简单的方法是`display:none`使用 CSS，因为*opcheckout.js*中的 js将与该 div 中的 DOM 元素交互以通过 AJAX 更新信息。

# coldfusion - CFLDAP 未返回任何结果

> ID：12585279
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:35:39.617
> 
> 标签：coldfusion, active-directory, ldap

我是 LDAP 菜鸟，正在尝试查询 LDAP 服务器以获取用户名中包含“smith”的用户列表。我从下面的代码中得到一个空的结果集。一如既往地感谢任何帮助。

（注意：我已经通过 Softerra LDAP 浏览器连接验证了连接信息）

```
<cfldap 
    server = "#variables.server#"
    port = "#variables.port#"
    username="#variables.username#"
    password="#variables.password#"
    action="query" 
    name="results" 
    start="DC=hsd1"
    filter="((&(objectClass=user))(samaccountname=*smith*))"
    attributes = "cn,o,l,st,sn,c,mail,telephonenumber, givenname,homephone, streetaddress, postalcode, SamAccountname, physicalDeliveryOfficeName, department"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:23:45.333

如果我不得不猜测（我会），我会说问题可能出在你的“开始”属性上。根据我的经验，开头通常包含定义更明确的 DN。就像是：

```
start="dc=dirDomain,dc=domain,dc=topLevelDomain" 
```

因此，例如，如果您登录的域是 hsd1.mydomain.com，那么它将是

```
start="dc=hsd1,dc=mydomain,dc=com" 
```

问题也可能与您的过滤器有关。我想你可能有太多的parans。

也许尝试这样的事情：

```
filter="(&(objectClass=user)(samaccountname=*smith*))" 
```

# php - 当您必须构建要从字符串和变量分配的数组名称时，如何在 php 中将一个数组分配给另一个数组？

> ID：12585282
> 
> 赞同：1
> 
> 时间：2012-09-25T14:35:43.107
> 
> 标签：php, arrays, concatenation, variable-assignment

我有一些 $option_name_options 形式的数组，其中包含与 $option_name 中的内容相关的值。我需要将这些数组传递给 foreach 循环中的函数，为此我尝试了以下操作：

```
foreach($options as $option_name => $option_value) {

...

$select_options = '$' . $option_name . '_options';

...

} 
```

但这会将数组的名称作为字符串分配给 $select_options，而不是数组本身，这正是我想要的。我试图找到一个小时的解决方案，还没有运气。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:39:34.870

删除字符串中的 $ 符号，只需将名称分配为字符串并使用变量变量。

```
$select_options = $option_name . '_options';

print_r($$select_options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:43:01.917

```
foreach($options as $option_name => $option_value) {
    ...
    $select_options[] = $option_name; //if you want an array of keys from $options
    ...
} 
```

或者更好的解决方案：

```
 $select_options = array_keys($options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:43:14.077

```
$varname = $option_name.'_options';
$select_options = $$varname; 
```

# java - 带有选择项的richface树（复选框）

> ID：12585285
> 
> 赞同：1
> 
> 时间：2012-09-25T14:35:52.370
> 
> 标签：java, jsp, jsf, tree, richfaces

我正在尝试将复选框放在树节点中。我的代码如下。我使用了richfaces - SC。

**在 JSP 页面中：**

```
<h:panelGrid>
<sc:tree value="#{templateCategoriesBackingBean.rootNode}">
</sc:tree>
</h:panelGrid> 
```

**在 BackingBean 中：**

```
private TreeNode<SelectItem> rootNode;
public TreeNode<SelectItem> getRootNode() {
rootNode = new TreeNodeImpl<SelectItem>();

for (int i = 0; i < 10; i++) {
    TreeNodeImpl<SelectItem> treeNodeImpl = new TreeNodeImpl<SelectItem>();
    treeNodeImpl.setData(new SelectItem(i, "Hello : "+i));
    rootNode.addChild(new Integer(i), treeNodeImpl);
}
return rootNode;
} 
```

它在屏幕上显示节点，但如下所示......

![在此处输入图像描述](../Images/8ed9d6824f1320d373ad5bcd66d1c74a.png)

> 我如何获得实际的复选框？

* * *

**更新**

我尝试了建议的内容。但这不是我想要的。它肯定会返回一个字符串，我可以看到我`SelectItem`在树中的标签。

但我想要的是见[例子](http://www.primefaces.org/showcase-labs/ui/treeSelectionCheckbox.jsf)。这是一个 primefaces 树复选框示例。我想要一个类似的使用richfaces 或myfaces。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:38:17.650

实现一个`toString()`方法`SelectItem`。

类似的东西

```
class SelectItem {
  private String name;

  @Override
  public String toString(){
    return name;
  }
} 
```

# java - Hadoop Hbase 查询

> ID：12585286
> 
> 赞同：0
> 
> 时间：2012-09-25T14:35:57.747
> 
> 标签：java, python, hadoop, hbase, thrift

我有以下设置

> 2 节点 hadoop/hbase 集群，thirft 服务器在 hbase 上运行。
> 
> Hbase 有一个包含 1000 万行的表。

我需要在 hbase 表上运行 sum() 之类的聚合查询以在网络上显示它（图表目的）。

现在我正在使用 python(thrift client) 来获取数据集并显示。

我正在寻找要在网络中使用的数据库（hbase）级聚合函数。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:33:43.113

这通常是一个 map reduce 作业。您可能希望考虑使用 Hive 为您提供一种类似 SQL 的方式来编写查询。[https://cwiki.apache.org/Hive/hbaseintegration.html](https://cwiki.apache.org/Hive/hbaseintegration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T10:54:43.180

可以参考凤凰。网址： [https ://github.com/forcedotcom/phoenix/](https://github.com/forcedotcom/phoenix/) [http://forcedotcom.github.io/phoenix/](http://forcedotcom.github.io/phoenix/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T18:50:14.230

对于 Hbase 表比 Hive 的低延迟结果，Phoenix 是一个很好的解决方案。它比 Hbase 扫描器更适合范围扫描，因为它们使用二级索引和 SkipScan。与您的情况一样，您使用 Python 和 phoenix API 只有 JDBC 连接器。

其他尝试 Hbase 协处理器。执行 SUM、MAX、COUNT、AVG 函数。您可以在创建表时启用协处理器，并且可以使用协处理器功能

你可以试试 Impala，它提供了 ODBC 连接器、JDBC 连接器。Impala 使用 hive 元表来执行大规模并行批处理。您需要为您的 Hbase 表创建一个 Hive 元表。

# java - 在列表中查找唯一值的快速方法

> ID：12585288
> 
> 赞同：3
> 
> 时间：2012-09-25T14:36:13.040
> 
> 标签：java, performance, collections

给定一个 KeyValuePairs 列表，其中每对都有一个`getValue()`方法，获得一个`List`（或`Set`）唯一值的最快方法是什么？

以下所有内容都会产生可接受的结果。`u1`似乎比预期的列表大小（大约 1000-2000 KVP）最快

**我们可以做得更好（更快）吗？**

```
private static Set<String> u1(List<_KVPair> pairs) {
    Set<String> undefined = new HashSet<String>();

    for (_KVPair pair : pairs) {
        undefined.add(pair.getValue());
    }

    if (undefined.size() == 1) {
        return new HashSet<String>();
    }
    return undefined;
}

private static List<String> u2(List<_KVPair> pairs) {

    List<String> undefined = new ArrayList<String>();
    for (_KVPair pair : pairs) {
        if (!undefined.contains(pair.getValue())) {
            undefined.add(pair.getValue());
        }
    }

    return undefined;
}

private static List<String> u3(List<_KVPair> pairs) {

    List<String> undefined = new LinkedList<String>();

    Iterator<_KVPair> it = pairs.iterator();
    while (it.hasNext()) {
        String value = it.next().getValue();
        if (!undefined.contains(value)) {
            undefined.add(value);
        }
    }
    return undefined;
} 
```

在大约 3600 对时，'u3' 获胜。在大约 1500 对时，'u1' 获胜

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T14:45:58.683

第一个选项应该更快。您可以通过在使用之前调整集合大小来使其更快。通常，如果您预计会有少量重复：

```
Set<String> undefined = new HashSet<String>(pairs.size(), 1); 
```

请注意，我使用 1 作为负载因子以防止任何调整大小。

出于好奇，我进行了测试（下面的代码） - 结果是（编译后）：

**测试 1**（注意：预热需要几分钟）

> 原始列表的大小 = 3,000，没有重复：
> 设置：8数组列表
> ：668
> 链接列表：1166

**测试 2**

> 原始列表的大小 = 30,000 - 所有字符串相同：
> 设置：25数组列表
> ：11
> 链接列表：13

这种说法是有道理的：

*   当有很多重复时，`List#contains`将运行得相当快，因为​​会更快地找到重复并且分配大集合的成本+散列算法正在惩罚
*   当没有重复或重复很少时，该组以很大的优势获胜。

```
public class TestPerf {

    private static int NUM_RUN;
    private static Random r = new Random(System.currentTimeMillis());
    private static boolean random = false; //toggle to false for no duplicates in original list

    public static void main(String[] args) {

        List<String> list = new ArrayList<>();

        for (int i = 0; i < 30_000; i++) {
            list.add(getRandomString());
        }

        //warm up
        for (int i = 0; i < 10_000; i++) {
            method1(list);
            method2(list);
            method3(list);
        }

        NUM_RUN = 100;
        long sum = 0;
        long start = System.nanoTime();
        for (int i = 0; i < NUM_RUN; i++) {
            sum += method1(list);
        }
        long end = System.nanoTime();
        System.out.println("set: " + (end - start) / 1000000);

        sum = 0;
        start = System.nanoTime();
        for (int i = 0; i < NUM_RUN; i++) {
            sum += method2(list);
        }
        end = System.nanoTime();
        System.out.println("arraylist: " + (end - start) / 1000000);

        sum = 0;
        start = System.nanoTime();
        for (int i = 0; i < NUM_RUN; i++) {
            sum += method3(list);
        }
        end = System.nanoTime();
        System.out.println("linkelist: " + (end - start) / 1000000);

        System.out.println(sum);
    }

    private static int method1(final List<String> list) {
        Set<String> set = new HashSet<>(list.size(), 1);
        for (String s : list) {
            set.add(s);
        }
        return set.size();
    }

    private static int method2(final List<String> list) {
        List<String> undefined = new ArrayList<>();
        for (String s : list) {
            if (!undefined.contains(s)) {
                undefined.add(s);
            }
        }
        return undefined.size();
    }

    private static int method3(final List<String> list) {
        List<String> undefined = new LinkedList<>();

        Iterator<String> it = list.iterator();
        while (it.hasNext()) {
            String value = it.next();
            if (!undefined.contains(value)) {
                undefined.add(value);
            }
        }
        return undefined.size();
    }

    private static String getRandomString() {
        if (!random) {
            return "skdjhflkjrglajhsdkhkjqwhkdjahkshd";
        }
        int size = r.nextInt(100);
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < size; i++) {
            char c = (char) ('a' + r.nextInt(27));
            sb.append(c);
        }
        System.out.println(sb);
        return sb.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:38:56.863

**更新：见下面的编辑**

当你可以做的时候，迭代列表是没有意义的

```
return new HashSet<_KVPair>(pairs) 
```

最糟糕的选择是 u2 和 u3，您将第一个列表中的项目添加到第二个列表并调用`List.contains(item)`循环的每次迭代。此操作方法`O(n^2)`-`List.contains(item)`需要将项目与可能的整个列表进行比较。避免需要迭代列表*并*调用一些也迭代列表的操作的算法。

如果您想要独特的物品，请使用`Set`. 如果您需要按排序顺序排列这些项目，请使用 a `TreeSet`，否则 99% 的时间您需要 a `HashSet`。

**编辑**：我错过了你想要一套`pair.getValue()`；但无论如何建议都是一样的 - 使用 Set，不要`List.contains()`在循环中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:44:48.830

您可以`u1`通过将第一行更改为：

```
Set<String> undefined = new HashSet<String>(pairs.size()); 
```

否则，当您添加值时，该集合将在内部进行很多调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:44:13.907

我敢说选项 1 是最快和最干净的。在检查值是否已经包含在那里方面，很难击败哈希集。

基于列表的解决方案不会像之前的答案中所说的那样扩展

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:53:08.630

另一种方法可能是`Sort list`在一个循环中，如果引用相等，您可以通过保留添加的最后一个元素的引用来消除重复项不要添加到新列表，否则添加

```
Collections.sort(pairs)//O(n log n)

Loop
if(!lastAdded.equals(pairs.get(i)))
 {
   //Add to list 
   //change lastAdded
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-25T15:04:59.490

给出的答案都没有从最终结果中删除重复项，它们只是删除了重复项。因此，如果一个字符串出现两次，它仍然会出现在最终结果中，但只会出现一次。如果那不是必需的，那么是的，我刚刚浪费了五分钟...

```
 public Map<String, String> countOccurences(List<String> source){
       Map<String, Integer> result =   new HashMap<>(source.size());
        int temp =0;
        for (String value : source) {
            if(result.containsKey(value)){
                temp = result.get(value);
                temp++;
                result.put(value, temp);
                temp = 0;
            }
            else {
                result.put(value, 1);
            }
        }
    }
    public List<String> sublistSingles(Map<String, Integer> results){
        List<String> duplicatesRemoved = new ArrayList<>(results.size());
        for(Map.Entry<String, Integer> result:results.entrySet()){
            if(result.getValue().equals(1)){
              duplicatesRemoved.add(result.getKey());
            }
        }
        return duplicatesRemoved;
    } 
```

# image-processing - 外发光作为 HLSL 着色器

> ID：12585292
> 
> 赞同：8
> 
> 时间：2012-09-25T14:36:24.767
> 
> 标签：image-processing, directx, hlsl, outline, glow

我仍在从事一个图像处理项目，该项目利用 HLSL 着色器添加 Photoshop 式过滤器，如投影、斜角等。现在我正在寻找一种在 HLSL 中实现外发光效果的方法。

我目前正在尝试以下想法：

1）缩放当前纹理以创建发光（参数：glowSize，设置轮廓的大小）

2) 水平模糊

3）模糊垂直，将模糊颜色更改为发光颜色并在顶部添加原始纹理

我正在使用以下多通道 HLSL 着色器来渲染发光：

```
float4 PS_Scale(VS_OUTPUT IN) : COLOR0
{
    float2 tex = IN.texture0;
    float2 scaleCenter = float2(0.5f, 0.5f);
    float2 scaleTex = (tex - scaleCenter) * glowSize + scaleCenter;
    return tex2D(foreground, scaleTex);
}

float4 PS_GlowH(VS_OUTPUT IN) : COLOR0
{
    float2 Tex = IN.texture0;

    float4 sum = float4(0.0, 0.0, 0.0, 0.0);
    sum += tex2D(secondForeground, float2(Tex.x - 4.0*blur, Tex.y))*0.05;
    sum += tex2D(secondForeground, float2(Tex.x - 3.0*blur, Tex.y))*0.09;
    sum += tex2D(secondForeground, float2(Tex.x - 2.0*blur, Tex.y))*0.12;
    sum += tex2D(secondForeground, float2(Tex.x - blur, Tex.y))*0.15;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y))*0.16;
    sum += tex2D(secondForeground, float2(Tex.x + blur, Tex.y))*0.15;
    sum += tex2D(secondForeground, float2(Tex.x + 2.0*blur, Tex.y))*0.12;
    sum += tex2D(secondForeground, float2(Tex.x + 3.0*blur, Tex.y))*0.09;
    sum += tex2D(secondForeground, float2(Tex.x + 4.0*blur, Tex.y))*0.05;

    return sum;
}

float4 PS_GlowV(VS_OUTPUT IN) : COLOR0
{
    float2 Tex = IN.texture0;

    float4 sum = float4(0.0, 0.0, 0.0, 0.0);
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y - 4.0*blur))*0.05;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y - 3.0*blur))*0.09;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y - 2.0*blur))*0.12;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y - blur))*0.15;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y))*0.16;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y + blur))*0.15;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y + 2.0*blur))*0.12;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y + 3.0*blur))*0.09;
    sum += tex2D(secondForeground, float2(Tex.x, Tex.y + 4.0*blur))*0.05;

    float4 result = sum * opacity;
    result.rgb = float3(glowColor.r, glowColor.g, glowColor.b) / 255.0f;

    float4 src = tex2D(foreground, IN.texture0.xy);
    return result * (1-src.a) + src;
} 
```

使用椭圆等简单形状时，此代码的结果看起来不错，但在文本上应用着色器时不起作用：

![上述着色器的输出](../Images/a14e95e1c7caa646a2ea1b10bed46f7d.png)

很明显，缩放存在问题。我不知道如何缩放原始纹理以将其用作轮廓。这甚至可能吗？任何其他想法如何在 HLSL 中实现外部发光或轮廓过滤器？

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T08:41:34.703

在这种情况下无法应用您的扩展策略。扔掉缩放步骤，只使用模糊步骤和合成步骤。它会起作用的。

让我向您展示模糊着色器如何创建发光效果。

A：有原图。

![原始图像](../Images/ad624d457102ff46487f6670872f84e1.png)

B ：更改图像的颜色，并应用模糊着色器。

![图像模糊](../Images/6a39ba560babfbde42fcfbc96fe0f178.png)

C ：将模糊图像与原始图像结合。

![结果图像](../Images/8c50c8515be94ec0678bab212a22077e.png)

如果要控制发光大小，请为此使用模糊步骤的内核大小，而不是缩放。我使用高斯模糊来创建下面的图像。

*   内核大小 5

![高斯尺寸 5](../Images/0d56646fa759d81156896e2cce28961c.png)

*   内核大小 10

![高斯大小 10](../Images/d6699989a30a0da77859fe5ffaf8d2a9.png)

*   内核大小 15

![在此处输入图像描述](../Images/a3eb33b93943481f2ab99d08691b1660.png)

# apache-flex - 使用 Firefox 浏览器上传带有文件引用的文件

> ID：12585298
> 
> 赞同：0
> 
> 时间：2012-09-25T14:36:51.717
> 
> 标签：apache-flex, firefox, filereference

在 Flash 中使用 Filereference 类上传文件在 FireFox 中不起作用。在 IE ， chrome 中没问题...我试图包含 SessionId 但这对我不起作用。我猜 Firefox 两次上传同一个文件。有没有办法阻止第二次不必要的上传？

# android - 如何抛出异常/中断主 UI 线程

> ID：12585299
> 
> 赞同：0
> 
> 时间：2012-09-25T14:36:53.260
> 
> 标签：android, multithreading

我目前有一个本机线程，它可以共享我的应用程序功能。

我遇到的一个问题是，当从 Native 代码调用 SIGNAL 时，Java 代码在任务中死亡（例如 ListAdapter 支持 Native 代码在 中抛出异常`getView()`）作为副作用。这些本机代码错误用 Java 堆栈跟踪填充 Google 控制台，这相当于“本机代码在某处死亡”（Java 堆栈跟踪没有描述本机代码死亡的情况）。

我正在捕捉信号并通过 JNI 调用，但在试图弄清楚如何中断 UI 线程时遇到了问题。

我能想到的最接近的是尝试：

```
handler.post(new Runnable() {

    @Override
    public void run() {
        throw new RuntimeException();               
    }
}); 
```

从处理程序内部，但这似乎被完全忽略了。谁能告诉我我还能如何中断我的主/ UI线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:06:24.477

runOnUiThread(runnableAction) might help you.

# jquery - 如果选中语句 jquery primefaces

> ID：12585301
> 
> 赞同：0
> 
> 时间：2012-09-25T14:36:59.540
> 
> 标签：jquery, if-statement, primefaces, radio-button

我知道已经有一些关于此的主题，但我认为我有正确的概念只是某个地方的缺陷。我需要一个 if 语句来确定是否选中了 radioButton。下面是我的代码。

```
if($j("input:radio[name=selector1]").is(":checked")){
   //do something here
}

<p:selectOneRadio id="radioButtonsId" widgetVar="rb1">

    <f:selectItem id="selector1" itemLabel="Yes" itemValue="true"/>
    <f:selectItem id="selector2" itemLabel="No" itemValue="false"/>

</p:selectOneRadio> 
```

我想知道 if 块中的名称是否错误。我在使用 primeFaces 和 jQuery 时也遇到了很多问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:11:22.033

这不起作用的原因是因为 selector `input:radio[name=selector1]`。id *selector1*不会是输入标签的*id*或*名称*。单选按钮组的输入标签的*ID*和*名称*将遵循命名约定：

*身份证*：`formId:selectOneRadioId:indexOfTagInGroup`

*名称*：`formId:selectOneRadioId`

因此，在您的情况下，*selector1*的名称将是`someGeneratedJSFId:radioButtonsId`，*id*将是`someGeneratedJSFId:radioButtonsId:0`. 为了选择这个特定元素，您可以使用：

```
 $("input:radio[id*=radioButtonsId\\:0]") 
```

*   `id*=`选择具有包含您指定的字符串的*id的单选按钮*
*   `\\`是元字符的转义字符，例如`:`
*   `0`选择单选按钮组中的第一个输入标签

因此，请尝试以下操作：

```
 if($("input:radio[id*=radioButtonsId\\:0]").is(":checked")){
    //do something here
 }

<p:selectOneRadio id="radioButtonsId" widgetVar="rb1">
     <f:selectItem id="selector1" itemLabel="Yes" itemValue="true"/>
     <f:selectItem id="selector2" itemLabel="No" itemValue="false"/>
</p:selectOneRadio> 
```

# c# - 保存来自 2 个表单的数据并以第 3 个表单 c# 显示它

> ID：12585305
> 
> 赞同：-6
> 
> 时间：2012-09-25T14:37:18.753
> 
> 标签：c#, asp.net, .net

我在 Visual Studio 2008，C# 框架 3.5 中工作，我有 3 个表单，在 form1 和 form2 我读取了一些数据（包含在每个表单的 gridview 中）并将其传递给 form3，但是当我尝试保存数据时（在 form3 ）我只是从form1或form2获取数据，但不是两者都我认为问题出在加载页面中，在此先感谢，这是我的代码：

```
 //form3:

public partial class menu2 : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

    lblNombreUsuario.Text = (string)Session["sesionicontrol"];
    //prueba
    if (Request.QueryString.Count > 0)
    {
        try
        {
            txtRutEncuestador.Text = Request.QueryString["rut"].ToString();
            leerNombre();
        }
        catch { };
    }

    if (!IsPostBack)
    {
        if (Request.QueryString.Count > 0)
        {
            try
            {

                txtIdEstudio.Text = Request.QueryString["cod_sap"].ToString();
                leerEstudios();

            }
            catch { };

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:04:02.743

从您发布的原始代码中，我看到您正在做的只是在 page1 和 page2 中填充一个网格，并将行选择重定向到 menu2 页面。我没有看到你在哪里填充“sessioncontrol”，所以它可能是 null 并且不能转换为字符串。此外，做空尝试捕捉是不好的编码习惯。您应该改为执行以下操作：

```
lblNombreUsuario.Text = (string)Session["sesionicontrol"];
if (!IsPostBack)
{
    //prueba 
    if (Request.QueryString.Count > 0)
    {
        if Request.QueryString["rut"] != null)
        {
            txtRutEncuestador.Text = Request.QueryString["rut"].ToString();
            leerNombre();
        }

        if (Request.QueryString["cod_sap"] != null)
        {
            txtIdEstudio.Text = Request.QueryString["cod_sap"].ToString();
            leerEstudios();
        }
    } 
} 
```

如果您想将两者都放在一个页面中，您将需要一个查询，该查询同时包含两者，然后在选择时执行：（在此处使用 sudo 代码）

```
Request.Redirect("~/Menu2.aspx?rut=" + rut + "&code_sap=" + codeSap); 
```

# python - 使用带有类别的 XML-RPC WordPress API 和 Python 发布帖子

> ID：12585307
> 
> 赞同：6
> 
> 时间：2012-09-25T14:37:36.727
> 
> 标签：python, wordpress, xml-rpc, categories

我正在从一个网站迁移到另一个使用 Wordpress 的网站。

我根据需要创建了新的自定义类型（使用插件自定义帖子类型），并为每个自定义类型创建了类别。

然后我用 Python 编写了一个脚本（改编自[这篇文章](http://www.jansipke.nl/using-python-to-add-new-posts-in-wordpress/)），它使用从 3.4.x 版本开始支持的新 Wordpress XML-RPC API 从数据库中获取帖子并将它们远程推送到新的（测试）网站上。

目前，我可以发布具有正确帖子类型的新帖子。但是如果我指定一个类别，wordpress 总是会返回这个错误：

```
xmlrpclib.Fault: <Fault 401: 'Sorry, one of the given taxonomies is not supported by the post type.'> 
```

我确定给定分类法支持帖子类型。我认为我使用错误的语法来指定类别 ID。这是代码：

```
import datetime, xmlrpclib, MySQLdb

def post_remotely(post_data):

    wp_url = "[my wordpress blog url]"
    wp_username = "[myuser]"
    wp_password = "[mypasswd]"
    wp_blogid = "0"

    status = 'publish'

    server = xmlrpclib.ServerProxy(wp_url)

    data = { 'post_title': post_data['title'], 'post_content': post_data['content'], 
             'post_date': post_data['data'], 'post_type': post_data['post_type'], 'terms': post_data['categories'], 
             'post_status': status  }

    post_id = server.wp.newPost(wp_blogid, wp_username, wp_password, data)

    return post_id 
```

在调用者上，指定类别：

```
new_post['categories'] = [ { 'term_id': 3, 'taxonomy': 'news-cat' } ] 
```

“news-cat”是与自定义类型“news”相关联的分类名称。“term-id”是类别的 id，我使用 phpMyAdmin 发现的。

我也尝试过其他方法，但无济于事。没有类别，它工作得很好。

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T05:44:26.220

[XML-RPC WordPress API 文档](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost)说：

```
struct terms: Taxonomy names as keys, array of term IDs as values.
struct terms_names: Taxonomy names as keys, array of term names as values. 
```

这意味着 terms 和 terms_names 是目录，键名是您想要的分类名称，值是数组列表。

如果你想设置一个类别，你应该设置

```
‘terms‘:{‘my-category’:[4]} 
```

或者

```
‘terms_names’:{‘my-category’:["Wordpress"]} 
```

在帖子结构中，其中“my-category”是您的分类名称。

一些信息来自：[解决Python发布wordpress内容返回抱歉，文章类型不支持您的分类法。错误](http://www.godoone.com/archives/python-wordpress-sorry-one-of-the-given-taxonomies-is-not-supported-by-the-post-type.html)

# python - 请求，绑定到一个 ip

> ID：12585317
> 
> 赞同：13
> 
> 时间：2012-09-25T14:38:44.257
> 
> 标签：python, urllib2, python-requests

我有一个脚本，它使用`urllib2`.

[我使用Stack Overflow 上其他地方建议](https://stackoverflow.com/questions/1150332/source-interface-with-python-and-urllib2)的技巧将另一个 ip 绑定到应用程序，我的计算机有两个 ip 地址（IP A 和 IP B）。

我想改用[`requests`图书馆](http://docs.python-requests.org/en/latest/index.html)。有谁知道我如何使用该库实现相同的功能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-25T20:35:34.067

查看该`requests`模块，它看起来像是`httplib`用于发送 http 请求。`httplib`用于`socket.create_connection()`连接 www 主机。

知道这一点并遵循您提供的链接中的猴子修补方法：

```
import socket

real_create_conn = socket.create_connection

def set_src_addr(*args):
    address, timeout = args[0], args[1]
    source_address = ('IP_ADDR_TO_BIND_TO', 0)
    return real_create_conn(address, timeout, source_address)

socket.create_connection = set_src_addr

import requests
r = requests.get('http://www.google.com') 
```

看起来`httplib`将所有参数 (to `create_connection()`) 作为 args (vs 关键字) 传递，因为尝试扩展`kwargs`内部的 dict`set_src_addr`失败了。我相信以上是您想要的，但是我没有要测试的双宿主机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-19T15:02:12.717

实际上，您应该**将 IP 绑定**到这样的请求：

```
import urllib3
real_create_conn = urllib3.util.connection.create_connection

def set_src_addr(address, timeout, *args, **kw):
    source_address = ('YOUR_BIND_IP', 0)
    return real_create_conn(address, timeout=timeout, source_address=source_address)

urllib3.util.connection.create_connection = set_src_addr

import requests
r = requests.get('http://ipecho.net/plain')
print( r.text) 
```

# delphi - 将文本标题添加到文本框

> ID：12585318
> 
> 赞同：0
> 
> 时间：2012-09-25T14:38:47.277
> 
> 标签：delphi

我对 Delphi 比较陌生，这可能是一个非常基本的查询，但到目前为止我还没有找到答案。

问题是，我已经构建了一个表单，其中包含一个无限的自由文本字段，用户将在其中输入数据。当表单加载时，我希望在文本字段中有标题，以提示用户在这些标题下做相关注释。

有没有办法将这些标题插入到自由文本字段中，以便每次加载表单时显示它们？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:21:43.693

您可以`TLabel`在文本框上方放置一个控件。

如果您想要文本中的多个标题，本质上是*在*文本中创建部分，那么您可以设置文本框的`Text`属性以包含您想要的任何起始文本：

```
TextBox.Text := 'Heading 1'#13#10#13#10'Heading 2'; 
```

该`#13#10`部件在文本中插入换行符。一些较新的 Delphi 版本也有`sLineBreak`可以用来代替字符文字的常量。

不过，我认为它不再是真正的“自由文本”字段，所以如果你想强制人们填写为特定部分指定的文本，那么你应该有单独的文本框，然后你可以`TLabel`用每一个。

# android - 如何将 LevelHelper 链接到 cocos2d-x 项目

> ID：12585321
> 
> 赞同：0
> 
> 时间：2012-09-25T14:38:57.750
> 
> 标签：android, android-ndk, cocos2d-x

我们正在使用 cocos2d-x 为 Android 和 IOS 做 1 款游戏。为此，我们关注了[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://this.)链接。一切正常，除了当我们尝试将 LevelHelper 链接/包含到我们的项目时，它会抛出错误

```
undefined reference to `LevelHelperLoader::LevelHelperLoader(char const*)' 
```

下面是 Android.mk 文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := helloworld/main.cpp \
                   ../../Classes/AppDelegate.cpp \
                   ../../Classes/HelloWorldScene.cpp

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes \
$(LOCAL_PATH)/../../../Box2D \
$(LOCAL_PATH)/../../Classes/LevelHelper \
$(LOCAL_PATH)/../../Classes/LevelHelper/

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static box2d_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) $(call import-module,cocos2dx) $(call import-module,Box2D) 
```

我们不知道我们哪里出错了。任何线索都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:08:36.457

我认为 LevelHelper 只兼容 cocos2d-x for iOS，仅限 Mac，还没有人在 android 平台上测试过。而在cocos2d-x网站上，并没有说android有什么进展。这是链接[http://www.cocos2d-x.org/news/14](http://www.cocos2d-x.org/news/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:37:18.547

最后我得到了这个答案。我需要在下面添加所有`.cpp`文件`LevelHelper``Android.mk`

```
LOCAL_SRC_FILES := helloworld/main.cpp \
               ../../Classes/AppDelegate.cpp \
               ../../Classes/HelloWorldScene.cpp \
               ../../Classes/LevelHelper/LevelHelperLoader.cpp \
               ../../Classes/LevelHelper/Utilities/LHDictionary.cpp \
               ../../Classes/LevelHelper/Utilities/LHObject.cpp \
               ../../Classes/LevelHelper/Utilities/LHArray.cpp \
               ../../Classes/LevelHelper/Nodes/SHDocumentLoader.cpp \
               ../../Classes/LevelHelper/Nodes/LHSprite.cpp \
               ../../Classes/LevelHelper/Nodes/LHTouchMgr.cpp \
               ../../Classes/LevelHelper/Nodes/LHSettings.cpp \
               ../../Classes/LevelHelper/Nodes/LHPathNode.cpp \
               ../../Classes/LevelHelper/Nodes/LHParallaxNode.cpp \
               ../../Classes/LevelHelper/Nodes/LHNode.cpp \
               ../../Classes/LevelHelper/Nodes/LHLayer.cpp \
               ../../Classes/LevelHelper/Nodes/LHJoint.cpp \
               ../../Classes/LevelHelper/Nodes/LHFixture.cpp \
               ../../Classes/LevelHelper/Nodes/LHCuttingEngineMgr.cpp \
               ../../Classes/LevelHelper/Nodes/LHCustomSpriteMgr.cpp \
               ../../Classes/LevelHelper/Nodes/LHContactNode.cpp \
               ../../Classes/LevelHelper/Nodes/LHContactListener.cpp \
               ../../Classes/LevelHelper/Nodes/LHContactInfo.cpp \
               ../../Classes/LevelHelper/Nodes/LHBezier.cpp \
               ../../Classes/LevelHelper/Nodes/LHBatch.cpp \
               ../../Classes/LevelHelper/Nodes/LHAnimationNode.cpp \
               ../../Classes/LevelHelper/CustomClasses/LHUntitledClass.cpp \
               ../../Classes/LevelHelper/CustomClasses/TemporaryDummyClass.cpp 
```

如需进一步帮助，请参阅[此](http://www.levelhelper.org/phpBB3/viewtopic.php?f=9&t=1641&p=10837&hilit=android&sid=3727f9ccd166beb1f82c7089c4396aa9)链接。希望它也可以帮助其他用户。

# objective-c - 使用动画刷新 UITableView

> ID：12585328
> 
> 赞同：1
> 
> 时间：2012-09-25T14:39:09.977
> 
> 标签：objective-c, ios, uitableview, uiview

我在我的应用程序中使用单个 UITableView。我根据行选择等更改 UITableView 的委托和数据源。

为了在用户四处移动时为过渡设置动画，我抓取了当前 UITableView 的图像，将图像放置在 UITableView 顶部的 UIImageView 中，在 UITableView 上重新加载数据，然后在动画过渡中移除 UIImageView。

代码如下：

```
-(void)showImageEditPageWithImageId:(NSString*)imageId
{
    UITableView* tableview = (UITableView*)[self.view viewWithTag:VIEWTAG_P1_MAINTABLEVIEW];

    UIImage* image = [HPSImageHelper imageWithView:tableview];
    UIImageView* imageView = [[UIImageView alloc] initWithFrame:tableview.frame];
    imageView.tag = 336611;
    imageView.layer.borderWidth=1;
    imageView.layer.borderColor = [UIColor blueColor].CGColor;
    [imageView setImage:image];

    _tableViewController = [[HPSImageEditTableViewController alloc] initWithImageId:imageId];
    ((HPSImageEditTableViewController*)_tableViewController).callingController = self;    
    tableview.dataSource = _tableViewController;
    tableview.delegate = _tableViewController;

    [tableview reloadData];

    [tableview.superview addSubview:imageView];

    [NSTimer scheduledTimerWithTimeInterval:0.1
                                     target:self
                                   selector:@selector(removeCoveringImage)
                                   userInfo:nil
                                    repeats:NO];

}

-(void)removeCoveringImage
{
    UIView* imageView = [self.view viewWithTag:336611];

    [UIView transitionWithView:imageView
                      duration:0.9
                       options:UIViewAnimationOptionTransitionCurlUp
                    animations:^{
                        //Nothing here

                    }
                    completion:^(BOOL finished){

                        [imageView removeFromSuperview];
                    }
     ];

} 
```

麻烦的是，UITableView 只有在转换完成后才会在视觉上刷新自己，所以新视图会突然跳入视图。

在我看来， UITableView 并没有刷新自己，因为它“知道”它实际上并不可见。

Is that what's happening, and if so how do I get the UITableView to redraw even though it is covered by the UIImageView?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:49:39.300

Try calling setNeedsDisplay on your table view after load data. If that doest help try add UIViewAnimationOptionLayoutSubviews option to your animation. If nether of those help, try to lower alpha of imageView only slightly enough(0.99 or 0.98 or 0.90) to force tableView to redraw before animation. Hope this helped

# jquery - jQuery.min.js 文件冲突

> ID：12585330
> 
> 赞同：0
> 
> 时间：2012-09-25T14:39:15.337
> 
> 标签：jquery, wordpress, jquery-tooltip

我安装了一个 WordPress 工具提示脚本，该脚本使用 jQuery.min.js 文件，该文件位于我的 header.php 和 footer.php 两个文件中。通过这样做，我的网站布局完全被打乱，其他 jQuery 插件无法正常工作。如果我删除了任何这个 jQuery.min.js 文件（无论是来自 footer.php 还是 header.php），工具提示将不再起作用。

请帮我。

我的 Header.php 工具提示代码是：

```
<!-- Scripts -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.min.js"></script>

        <!-- aToolTip js -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.js"></script>

        <!-- aToolTip js -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.min.js"></script>

        <!-- Scripts -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.pack.js"></script>
        <script type="text/javascript">
            $(function(){
                $('a.normalTip').aToolTip();

                $('a.fixedTip').aToolTip({
                    fixed: true
                });

                $('a.clickTip').aToolTip({
                    clickIt: true,
                    tipContent: 'Follow me on Instagram! @roomno11'
                    closeTipBtn: 'aToolTipCloseBtn',
                    persistent: true,
                });     

                $('a.callBackTip').aToolTip({
                    clickIt: true,
                    onShow: function(){alert('I fired OnShow')},
                    onHide: function(){alert('I fired OnHide')}
                });

            }); 
        </script> 
```

并且相同的代码在 footer.php 文件中：

```
<!-- Scripts -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.min.js"></script>

        <!-- aToolTip js -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.js"></script>

        <!-- aToolTip js -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.min.js"></script>

        <!-- Scripts -->
        <script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/js/jquery.atooltip.pack.js"></script>
        <script type="text/javascript">
            $(function(){
                $('a.normalTip').aToolTip();

                $('a.fixedTip').aToolTip({
                    fixed: true
                });

                $('a.clickTip').aToolTip({
                    clickIt: true,
                    tipContent: 'Follow me on Instagram! @roomno11'
                    closeTipBtn: 'aToolTipCloseBtn',
                    persistent: true,
                });     

                $('a.callBackTip').aToolTip({
                    clickIt: true,
                    onShow: function(){alert('I fired OnShow')},
                    onHide: function(){alert('I fired OnHide')}
                });

            }); 
        </script> 
```

请帮我。

另外对不起我的英语不好。我希望你明白这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T00:29:07.417

首先，检查 wordpress 是否已经包含 jquery。它应该，因为你提到有其他插件试图使用它。

然后，从页眉和页脚中删除 jquery.min.js 调用（如果存在），并将 $() 指令替换为 jQuery()。例如，现在你有

```
$(function(){
                $('a.normalTip').aToolTip(); 
```

它应该是

```
jQuery(function(){
                jQuery('a.normalTip').aToolTip(); 
```

这是因为 jquery 总是包含在“on”冲突模式中，以避免与任何其他 javascript 库发生冲突。

# shell - 从 KornShell 调用 sh 脚本

> ID：12585331
> 
> 赞同：2
> 
> 时间：2012-09-25T14:39:23.253
> 
> 标签：shell, unix, scripting, sh, ksh

我必须编写一个 KornShell (ksh) 脚本来调用另一个目录中的 Bourne 脚本 (sh)，然后它会调用 java 程序。我有 sh 脚本工作，但不知道如何从 ksh 调用它。

谁能告诉我如何在 ksh 脚本中调用（引用）sh 脚本？我还需要将参数传递给sh。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:02.900

```
/bin/sh /other-directory/shellscript.sh 
```

# javascript - 是否可以在没有 c 代码的情况下用纯 Javascript (nodejs) 编写同步阻塞 IO？

> ID：12585332
> 
> 赞同：2
> 
> 时间：2012-09-25T14:39:25.967
> 
> 标签：javascript, node.js

1.  Javascript 在设计上是不鼓励还是不允许 Sync 阻塞 IO ？
2.  为什么 Javascript 中没有睡眠 API？是因为以上几点吗？
3.  浏览器可以有多个执行 javascript 的单线程吗？为什么总是单线程？

以上几点（由于浏览器限制）是否使 javascript 成为服务器端非阻塞语言的理想语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:43:48.993

浏览器只会在一个线程中运行 Javascript（至少每个域，Web Worker 除外）。
这主要是为了简单；直到最近，还没有人为 Javascript 编写线程 API。

为了使浏览器更易于编写（并且更快），该线程是浏览器 UI 线程。因此，Javascript 中的任何同步工作（或睡眠调用）都会冻结浏览器。
这就是不鼓励同步操作的原因。

# asp.net - 链接到应用程序外部的文件

> ID：12585334
> 
> 赞同：0
> 
> 时间：2012-09-25T14:39:32.597
> 
> 标签：asp.net, web-applications, iis-7, web, web-config

我有一个包含 3 个应用程序的网站。在网站根目录中，有 3 个文件夹（每个文件夹包含一个 asp.net 应用程序）和一个以`index.html`3 个链接命名的文件，如下所示：

```
<a href="Linea1/Pages/Sintesi.aspx"> Linea 1 </a> <br />
<a href="Linea2/Pages/Sintesi.aspx"> Linea 2 </a> <br />
<a href="Linea3/Pages/Sintesi.aspx"> Linea 3 </a> <br /> 
```

在每个应用程序的 webconfig 中都有一个 appSettings 值，如下所示：

```
<add key="linkPaginaHome" value="Index.html" /> 
```

在三个应用程序的每个页面中都有一个链接，他的 href 值是从 web.config 中读取的。换句话说，我希望允许您`index.html`从站点的每个应用程序访问页面，并且此参数必须是可配置的。

我应该在 webconfig 值中写什么以使其指向`index.html`文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:45:29.917

您可以添加此配置

```
<configuration>
   <system.webServer>
    <defaultDocument>
        <files>
            <add value="Index.html" />
        </files>
    </defaultDocument>
   </system.webServer>
</configuration> 
```

链接：[http ://www.iis.net/configreference/system.webserver/defaultdocument](http://www.iis.net/configreference/system.webserver/defaultdocument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:57:18.677

我只是使用了完整的网址：

```
http://localhost:2012/Index.html 
```

而不是只写

```
Index.html 
```

# java - 使用 Spring Security 自定义注销 URL

> ID：12585343
> 
> 赞同：3
> 
> 时间：2012-09-25T14:39:57.470
> 
> 标签：java, spring-security

我们在创建 URI 时遵循一定的约定。所有与身份验证相关的 URI，例如`/login`,`/logout`等都`/changepassword`属于 sub-context `/auth`。

因此，我们与身份验证相关的 URI 如下所示：

```
/auth/login
/auth/logout
/auth/changepassword 
```

这就是我们在 Spring 安全上下文 XML 中的内容。

```
<http pattern="/auth/**" security="none" />
<http pattern="/resources/**" security="none" />

<http auto-config="true" access-decision-manager-ref="accessDecisionManager">
    <intercept-url pattern="/admin/**" access="ADMINISTRATIVE_ACCESS"/>
    <intercept-url pattern="/**" access="XYZ_ACCESS"/>

    <form-login
            login-page="/auth/login"
            default-target-url="/content"
            authentication-failure-url="/auth/loginFailed"
            authentication-success-handler-ref="authenticationSuccessHandler"/>

    <logout logout-url="/auth/logout" logout-success-url="/auth/login"/>
</http> 
```

现在的问题是`/auth/logout`访问时给我一个404。`/auth`但是，如果我将其更改为以`/abcd/logout`or even以外的其他内容开头`/logout`，则效果很好。

我认为这是因为我们已将其定义`/auth/**`为不安全但仍试图将其用作注销页面。（如果您还没有登录，如何访问注销？）

为了满足我们相当严格的 URI 命名约定，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:57:14.447

你是对的部分：

> 我认为这是因为我们已将其定义`/auth/**`为不安全但仍试图将其用作注销页面。（如果您还没有登录，如何访问注销？）

更精确的定义

```
<http pattern="/auth/**" security="none" /> 
```

意味着没有 Spring Security 过滤器应用于匹配`/auth/**`模式的请求，因此 Spring Security 不会控制`/auth/logout`URL，而它应该。

因为 Spring Security 从上到下匹配模式，所以`/auth/logout`main 中的简单覆盖`<http>`将不起作用，因此该问题的解决方案可以定义单独的模式：

```
<http pattern="/auth/login" security="none" />
<http pattern="/auth/changepassword" security="none" />
<http pattern="/resources/**" security="none" />

<http auto-config="true" use-expressions="true" access-decision-manager-ref="accessDecisionManager">
    <intercept-url pattern="/auth/logout" access="permitAll"/>
    <intercept-url pattern="/admin/**" access="ADMINISTRATIVE_ACCESS"/>
    <intercept-url pattern="/**" access="XYZ_ACCESS"/>
    <!-- rest of your config -->
</http> 
```

如果你有很多`/auth/*`URL 需要处理，你可以使用`<http>`'s [`request-matcher="regex"`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http-request-matcher)，但我不认为那样可读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:52:06.247

而不是`security="none"`，我认为你想要`access="permitAll"`（[在文档中对 permitAll 的解释](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)）。

我不确定`security="none"`应该做什么，但我认为您可能会将其与 混淆`filters="none"`，这会导致[Spring Security 链被完全绕过](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/appendix-namespace.html#d0e7366)。

# javascript - 一次为两个数组迭代jquery每个循环

> ID：12585344
> 
> 赞同：10
> 
> 时间：2012-09-25T14:39:57.387
> 
> 标签：javascript, jquery

我有两个相同大小的 Javascript 数组

```
var demo=new Array();
var demo3=new Array(); 
```

我需要在 JQuery 代码中的每个循环中访问两个数组的值。冲浪一段时间后，我遇到了 zip 操作，我尝试使用代码

```
$.zip(demo,demo3).each(function(){                                   
    alert("demo "+this[0]);
    alert("demo3 "+this[1]);      
}); 
```

但是此代码不起作用。请帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T14:42:02.720

由于它们的大小相同，因此只需循环一个，并用`i`.

```
$.each(demo, function(i, item) {
    console.log(demo[i], demo3[i]);
}); 
```

如果您不需要配对索引，则只需使用`.concat`.

```
$.each(demo.concat(demo3), function(i, item) {
    console.log(item);
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-25T14:41:36.773

确定它们会保持相同的尺寸吗？使用一个好的 ol' `for`：

```
for(var i = 0; i < demo.length; i++){
    console.log(demo[i]);
    console.log(demo3[i]);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T14:43:05.003

`.concat`如果您想联合迭代，请尝试使用..

```
$.each(demo.concat(demo3), function (idx, el) {
     alert(el);
}); 
```

否则只需迭代数组并使用索引访问下一个..

```
$.each(demo, function (idx, el) {
     alert(el);
     alert(demo3[idx]);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:53:54.993

如果您尝试使用下划线 (http://underscorejs.org/#zip) 中的 zip 功能，您可以执行以下操作：

```
var combined = _.zip(demo, demo3);
$.each(combined, function(index, value) {
    // value[0] is equal to demo[index]
    // value[1] is equal to demo3[index]

});
​ 
```

演示：http: [//jsfiddle.net/lucuma/jWbFf/](http://jsfiddle.net/lucuma/jWbFf/)

_zip Documentation: Merges together the values of each of the arrays with the values at the corresponding position. Useful when you have separate data sources that are coordinated through matching array indexes. If you're working with a matrix of nested arrays, zip.apply can transpose the matrix in a similar fashion.

[http://underscorejs.org/#zip](http://underscorejs.org/#zip)

All that said, a plain for loop is quite easy and efficient in this case.

# facebook - Drupal - fbconnect：找不到Facebook PHP库

> ID：12585346
> 
> 赞同：0
> 
> 时间：2012-09-25T14:40:07.183
> 
> 标签：facebook, drupal

我在drupal 7上的fbconnect模块有问题。
我安装了模块，我激活了它，并且按照自述文件的建议，我在site/all/libraries/facebook-php-sdk中上传了facebook-php-sdk，现在看起来像site/all/libraries/facebook-php-sdk/src/facebook.php，但状态报告仍然输出：

> “Facebook PHP sdk Fbconnect：未找到 Facebook PHP 库。请参阅 README.txt”。

我没有找到解决方案，有什么想法吗？
请原谅我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:22:31.317

你试过这个模块吗，我认为这是 Drupal 7 中最好的 Facebook 身份验证模块。 [http://drupal.org/project/fboauth](http://drupal.org/project/fboauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T16:19:12.363

我修复了它：

```
\xampp\htdocs\yoursite\sites\all\libraries\facebook-php-sdk\src\ 
```

看看你的`s`in `site\`。

# sql - 关于数据库和 SQL 的一点解释

> ID：12585347
> 
> 赞同：1
> 
> 时间：2012-09-25T14:40:07.587
> 
> 标签：sql, database

我想知道 Facebook（超过 9 亿用户）、Twitter（超过 3 亿用户）等网站如何从数据库中选择用户的登录名和密码来检查用户是否输入了登录凭据是正确的。例如，在 SQL 中，您使用：

```
SELECT * FROM Persons
WHERE username=[username from user] 
  and password = [password from user] 
```

但是在像 Facebook 这样的更大系统中，他们是否会选择所有 9 亿用户并在用户登录时检查单个用户的登录凭据？如果不是，那么他们会做什么？

**PS：**

我问是因为我是这个领域的新手。我知道 SQL，但想知道拥有数百万用户的系统如何检查其用户的登录凭据以及用户从站点搜索某些特定信息的其他相关情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:42:06.227

是的，这就是查询表的方式。这就是 SQL 的用途，高效地查询大量数据。

可以非常有效地对正确[索引](http://en.wikipedia.org/wiki/Database_index)的列进行排序/过滤。该数据库不会对 9 亿条记录进行线性搜索，它将使用某种优化的[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)。假设一棵完美平衡的二叉树，搜索 900,000,000 的最坏情况只需要**30**次比较，即 900,000,000 的 log2。

# view - 来自查询/视图的数据表服务器端处理不是单个表

> ID：12585353
> 
> 赞同：1
> 
> 时间：2012-09-25T14:40:29.300
> 
> 标签：view, datatables, server-side

我正在使用 DataTables jQuery 插件来显示查询中的数据，该查询执行涉及连接和子查询的多个计算。我使用客户端处理使其工作正常，数据来自 sAjaxSource。我想实现服务器端处理 - 但我不确定最合适的方法，因为我的数据不是来自单个表。

可以在[http://datatables.net/release-datatables/examples/data_sources/server_side.html找到服务器端处理的基本示例](http://datatables.net/release-datatables/examples/data_sources/server_side.html)

解决这个问题的最佳方法是什么？如果只是像在这里使用视图一样简单......

```
/* DB table to use */
$sTable = "ajax"; 
```

变成

```
 /* DB table to use */
    $sTable = "myView"; 
```

此外，我更愿意使用 PDO 而不是基本的 mysql_query 等来实现这一点 - 但任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:52:36.557

要实现服务器端处理，您必须简单地编写一些代码，返回一个 json 对象，该对象具有[本页](http://datatables.net/usage/server-side)中解释的数据结构。而已。我已经在 node.js 和 PHP 中使用它，但你可以使用任何你想要的东西。
你可以使用任何你想实现的东西，记住你必须考虑分页（所以查询的 LIMIT 子句）、列排序（ ORDER BY 子句）和过滤（ WHERE 子句），你必须了解数据表如何传递数据您可以使用它来构建查询。

# iphone - UITableView 中随着用户拉动而增长的标题

> ID：12585357
> 
> 赞同：5
> 
> 时间：2012-09-25T14:40:42.643
> 
> 标签：iphone, ios, uitableview

我正在尝试在 UITableView 上方添加 UIView。目的是当用户拉下内容时（就像通常拉刷新那样），而不是 UITableView 的背景显示，表格上方的 UIView 应该增长以保持卡在向下滑动的顶部 UITableViewCell . 当用户向另一个方向滚动时（内容向上），UIView 会消失，就好像它只是顶部的 UITableViewCell。

您可以在 Path（下拉时间线和顶部个人资料图片展开，[例如 0:15 处](http://youtu.be/oWbWyCyehWg)）和新 Facebook 应用程序的签入（地图在附近地点列表上方增长）中看到此实现。

不确定解决此问题的最佳方法。我认为要达到类似的效果，您必须将 UIView 作为第一个单元格。但是[这个问题](https://stackoverflow.com/questions/10555876/efficiently-resize-uitableviewcell-on-scroll)让我有点担心在滚动时尝试调整单元格的高度。理论上，调整大小只需要在下拉时发生，而不是向上推，如果它只是顶部的 UITableViewCell。

**编辑：**当前代码 - 使用来自 rummad 的建议，我在 tableview 上为 contentOffset 添加了一个 keypath 观察器，并根据它调整单元格的高度，但它到处乱跳。

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
    if (self.tableView == (UITableView*)object) {
        if ([keyPath isEqualToString:@"contentOffset"]) {
            CGPoint scrollLoc = self.tableView.contentOffset;
            if (scrollLoc.y < 0) {
                NSLog(@"offset:%@", NSStringFromCGPoint(scrollLoc));
                headerSize = 100 - scrollLoc.y;
                [self.tableView beginUpdates];
                [self.tableView endUpdates];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T17:11:58.960

实际上看起来那里有几个库，并且使用第一个表格单元格不是要走的路。“视差”似乎是神奇的谷歌术语。

[http://rowboatrevolution.com/2012/02/uitableview-parallax-background-a-la-path/](http://rowboatrevolution.com/2012/02/uitableview-parallax-background-a-la-path/) [https://github.com/Rheeseyb/RBParallaxTableViewController](https://github.com/Rheeseyb/RBParallaxTableViewController)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T14:56:40.413

在您的`viewDidScroll:`委托方法中跟踪`contentOffset`您的`UITableView`. 然后，您可以`UIView`相应地设置 ' 框架。

# logic - Wumpus 世界模型中的混乱？

> ID：12585359
> 
> 赞同：0
> 
> 时间：2012-09-25T14:40:46.917
> 
> 标签：logic, artificial-intelligence, wumpus-world

Wumpus 世界是知识表示、推理和规划的一个例子——代理人必须探索一个由一系列相互连接的房间组成的洞穴。在山洞里的一个房间里，有一只乌普斯，如果它进入那个房间就会杀死特工。有些房间有坑，如果特工也进入其中任何一个房间，它就会死。特工有一支箭可以杀死Wumpus。目标是找到隐藏在洞穴某处的黄金，并在不被杀死的情况下返回起点。

[http://www.cis.temple.edu/~giorgio/cis587/readings/wumpus.shtml](http://www.cis.temple.edu/~giorgio/cis587/readings/wumpus.shtml)

正好有一个 Wumpus。因此`W1,1 ∨ W1,2 ∨ ... W4,3 ∨ W4,4`

一种说最多有一个 wumpus 的方法是，对于任何 2 个方格，其中一个必须是无 wumpus 的。使用*n 个*正方形，我们得到*n(n-1)/2 个*句子，例如 ¬W1,1 ∨ ¬W1,2 。对于一个 4*4 的世界，我们从总共 155 个包含 64 个不同符号的句子开始。

* * *

我无法理解我们如何得到*n(n-1)/2 个*句子。还有——我们怎么知道在一个 4*4 的世界中我们总共有 155 个句子？有人可以向我解释这个概念吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:14:05.237

在 4*4 的世界中，您总共有 16 个方格。我们正在为每对状态创建一个句子。不失一般性，我们可以将每个二维索引 (r,c) 转换为一维索引 (r*4 +c)。这只是一个简化步骤。从算法上讲，您可以将这些句子的创建写为：

```
for(i = 0; i < 16; ++i)
  for(j = i+1; j < 16; ++j)
    print ~Wi v ~Wj 
```

然后我们可以分析为 i 循环的每次迭代所做的打印语句的数量。

i = 0：15 个句子

i = 1：14 个句子

...

i = 15: 1 句话

所以在这种情况下，句子的数量是数字 1 到 15 的总和。众所周知的公式是 n(n-1) / 2，给出的答案是 105。这与你所说的 155 的答案不同，所以我不知道你从哪里得到这个号码。155 不是该公式可以找到的数字。

另外，请注意，我使用的 n 与平方数不同；它比平方数少一。原因是您不希望像 ~W1,1 v ~W1,1 这样比较同一个正方形的语句。

# java - Jax-B 如何绕过 Collection 的默认编组行为？

> ID：12585365
> 
> 赞同：1
> 
> 时间：2012-09-25T14:41:26.573
> 
> 标签：java, xml, collections, jaxb

我有一个实现 java.util Collection 接口的类，我想使用 jax-b 进行自定义 XML 编组。

当我尝试使用 XmlAdapter 时，它会被忽略，并且 jax-b 使用默认行为进行收集。

如果我删除 implements Collection，jax-b 将使用我的适配器。

以下代码不起作用：

```
@XmlJavaTypeAdapter(value = MyAdapter.class)
public class MyClassCollection implements Collection<MyClass> {
    ...
} 
```

以下代码有效（但未实现 Collection）：

```
@XmlJavaTypeAdapter(value = MyAdapter.class)
public class MyClassCollection {
    ...
} 
```

有人知道如何将 MyAdapter.class 与实现 Collection 的类一起使用吗？

提前致谢！

# c - 程序无法使用 GCC 运行，但可以使用 clang

> ID：12585368
> 
> 赞同：1
> 
> 时间：2012-09-25T14:41:34.043
> 
> 标签：c, gcc, clang

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <stdint.h>
#include <inttypes.h>

typedef struct tmp_num{
    int tmp_1;
    int tmp_2;
}t_num;

/* Dichiarazione prototipi secondo le direttive di pthread */
void *num_mezzo_1(void *num_orig);
void *num_mezzo_2(void *num_orig);

int main(int argc, char *argv[]){

    /* Inizializzo i 2 thread */
    pthread_t thread1, thread2;
    int tmp=0,rc1,rc2,num;

    t_num main_tnum;
    num=atoi(argv[1]);
    if(num <= 3){
        printf("Questo è un numero primo: %d\n", num);
        exit(0);
    }
    if( (rc1=pthread_create( &thread1, NULL, &num_mezzo_1, (void *)num)) ){
        printf("Creazione del thread fallita: %d\n", rc1);
        exit(1);
    }
    if( (rc2=pthread_create( &thread2, NULL, &num_mezzo_2, (void *)num)) ){
            printf("Creazione del thread fallita: %d\n", rc2);
            exit(1);
    }
    main_tnum.tmp_1 = 0;
    main_tnum.tmp_2 = 0;
    pthread_join(thread1, (void **)&(main_tnum.tmp_1));
    pthread_join(thread2, (void **)&(main_tnum.tmp_2));
    tmp=main_tnum.tmp_1+main_tnum.tmp_2;
    if(tmp>2){
        printf("Questo NON è un numero primo: %d\n", num);
    }
    else{
        printf("Questo è un numero primo: %d\n", num);
    }
    exit(0);
}

void *num_mezzo_1(void *num_orig){
    t_num p1_tnum;
    int cont_1;
    int n_orig=(int)num_orig;
    p1_tnum.tmp_1 = 0;
    for(cont_1=1; cont_1<=(n_orig/2); cont_1++){
        if((n_orig % cont_1) == 0){
            (p1_tnum.tmp_1)++;
        }
    }
    pthread_exit((void *)(p1_tnum.tmp_1));
    return NULL;
}

void *num_mezzo_2(void *num_orig){
    t_num p2_tnum;
    int cont_2;
    int n_orig=(int)num_orig;
    p2_tnum.tmp_2 = 0;
    for(cont_2=((n_orig/2)+1); cont_2<=n_orig; cont_2++){
        if((n_orig % cont_2) == 0){
            (p2_tnum.tmp_2)++;
        }
    }
    pthread_exit((void *)(p2_tnum.tmp_2));
    return NULL;
} 
```

我正在使用 Debian Sid 64 位，我开发的这个简单程序有问题。
如果我用我编译，`clang -Wall -Wextra -o test prime.c -lpthread`我只得到 1 个警告（*未使用的 argc*）并且程序运行良好。
但是，如果我使用 GCC-4.7.2 ( `gcc -Wall -Wextra -o test prime.c -lpthread`) 编译它，我会收到**更多**警告（*未使用的 argc* +*从指针到不同大小的整数的各种转换*）并且程序因 SegFault 而失败。
我不明白为什么使用 clang 可以工作，而使用 GCC 则不行。

**编辑：**

```
num_primo_pthread.c: In function ‘main’:
num_primo_pthread.c:33:57: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
num_primo_pthread.c:37:57: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
num_primo_pthread.c:16:14: warning: unused parameter ‘argc’ [-Wunused-parameter]
num_primo_pthread.c: In function ‘num_mezzo_1’:
num_primo_pthread.c:61:13: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
num_primo_pthread.c:68:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
num_primo_pthread.c: In function ‘num_mezzo_2’:
num_primo_pthread.c:75:13: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
num_primo_pthread.c:82:15: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:45:59.423

问题出在这一行

```
int n_orig=(int)num_orig; 
```

num_orig 是指向 int，而不是 int 的指针。用。。。来代替：

```
int n_orig=(int)*num_orig; 
```

编辑：

问题有点深：

```
(void *)num 
```

你不能那样做，指针不是那样使用的，把它改成

```
(void *)&num 
```

查看错误后的第二次编辑：

你对返回函数做同样的事情

```
(void *)(p2_tnum.tmp_2) 
```

需要是

```
(void *)(&p2_tnum.tmp_2) 
```

这是一个局部变量，所以你不能返回它。

```
t_num p2_tnum 
```

必须是分配了动态内存的指针。

```
t_num *p2_tnum = (t_num *) malloc(sizeof(t_num)); 
```

这些修复将需要您进行一些额外的修改，但我认为您可以管理这些。

# ajax - 如何根据 h:selectOneRadio 设置的布尔值有条件地渲染 ah:panelGroup

> ID：12585379
> 
> 赞同：1
> 
> 时间：2012-09-25T14:41:59.023
> 
> 标签：ajax, jsf

我使用`<h:selectOneRadio>`JSF2 中的组件来创建单选按钮。一个是“是”，另一个是“否”。请注意，我不能在这里使用复选框。

在我的支持 bean 中，我有一个`boolean`属性。When "yes" is selected, I want that boolean to be `true`and when "no" is selected I want it to be `false`. 我怎样才能做到这一点？

这不这样做：

```
<h:selectOneRadio value="#{bean.bool}">
    <f:selectItem itemValue="false" itemLabel="Yes" />
    <f:selectItem itemValue="true" itemLabel="No" />
    <f:ajax event="change" render="theDiv" />
</h:selectOneRadio>
<h:panelGroup layout="block" id="theDiv" rendered="#{bean.bool}">
....
</panelGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:41:46.637

JSF 在网络服务器中运行并生成 HTML。Ajax/JavaScript 在 Web 浏览器中运行并处理 JSF 生成的 HTML 输出。您不能对 JSF 组件的 HTML 表示进行 ajax 更新，该组件本身永远不会呈现为 HTML。您需要对*始终*呈现的 JSF 组件的 HTML 表示进行 ajax 更新：

```
<h:selectOneRadio value="#{bean.bool}">
    <f:selectItem itemValue="false" itemLabel="Yes" />
    <f:selectItem itemValue="true" itemLabel="No" />
    <f:ajax render="foo" />
</h:selectOneRadio>
<h:panelGroup id="foo">
    <h:panelGroup layout="block" id="theDiv" rendered="#{bean.bool}">
    ...
    </panelGroup>
</h:panelGroup> 
```

*（请注意，我删除`event="change"`了，因为这是错误的，默认的已经是正确的）*

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# java - Maven 无法在以下位置找到 Javac 编译器：

> ID：12585380
> 
> 赞同：76
> 
> 时间：2012-09-25T14:42:00.597
> 
> 标签：java, maven, javac

当我尝试生成战争文件时，它显示了一些错误，例如

```
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] C:\Program Files\Java\jre7\..\lib\tools.jar 
```

当我这样做`echo %path%`时

```
 C:\Windows\System32;D:\name\name1\Softwares\Maven\apache-maven-3.0.4\b
in;C:\Program Files\Notepad++\;%JDK_HOME% 
```

当我做`echo %JDK_HOME%`

```
D:\name\name\core java\software\Java\Java_1.6.0_04_win\jdk1.6.0_04\bin 
```

当我的环境变量是 jdk 时，我不知道为什么 maven 指的是 jre。我还将安装的 JRE 更改为 jdk1.6。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-03-20T09:53:15.713

**仅在 Eclipse 设置中**

它有 4 个步骤 TODO。

步骤 1：右键单击 Eclipse 项目属性

第 2 步：Java 构建路径 -> 库

第 3 步：选择 JRE System Library -> 单击 Edit 按钮 -> 单击 Installed JREs... 按钮

第 4 步：将 JRE 编辑为 Set JRE Home = JAVA_HOME

**截图：**

![在此处输入图像描述](../Images/2d2c17cc62a8ab2cc1ba67b1686fb9b4.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-21T16:55:01.983

转到窗口 -> 首选项... -> Java -> 已安装的 JRE

编辑 JRE Home = JAVA_HOME 或 JAVA_HOME\jre

例如，如果您使用安装在 C:\Program Files 中的 jdk1.6.0_04，请进行以下更改：

C:\Program Files\Java\jdk1.6.0_04\jre 或 C:\Program Files\Java\jdk1.6.0_04 而不是默认的 C:\Program Files\Java\jre7

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-25T15:09:48.240

有同样的问题，但在我的情况下，目录 eclipse 指出 JRE 是 JDK。所以，我搜索了那个 tools.jar 并且在那里。

我做了

*   Java 构建路径 >> 库
*   JRE 系统库 >> 编辑
*   已安装的 JRE >> 点击我的 jdk >> 编辑
*   添加外部罐子>> tools.jar

然后编译好

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T14:49:07.670

JDK_HOME 变量应该始终指向 jdk 的基本目录，而不是 bin 目录：

```
D:\name\name\core java\software\Java\Java_1.6.0_04_win\jdk1.6.0_04 
```

那已定义，将您的路径固定为

```
C:\Windows\System32;D:\name\name1\Softwares\Maven\apache-maven-3.0.4\bin;C:\Program Files\Notepad++\;%JDK_HOME%\bin 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-25T15:46:41.277

这是一个 Eclipse 问题。当我尝试使用从命令行构建它时

```
mvn package 
```

它工作得很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-25T14:46:04.520

听起来您已`JDK_HOME`定义为用户变量并`PATH`定义为系统变量，反之亦然 -`echo %PATH%`不应包含未解析的变量，例如`...;%JDK_HOME%`.

确保`%JDK_HOME%\bin`路径在您的 PATH 变量上，未解析，即使您必须明确输入路径。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-01T09:27:31.177

我有同样的错误，因为 JUNIT 版本，我有 3 个 3.8.1，我已经更改为 4.8.1。

所以解决方案是

你必须去 POM，并确保你的依赖看起来像这样

```
 <dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.8.1</version>
  <scope>test</scope>
</dependency> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-21T07:22:56.610

对于在 Eclipse 中面临此问题的其他人，即使路径设置为正确 JDK，您也需要从已安装的 JRE 中删除其他 JRE。

转到**窗口**->**首选项**-> **Java** ->**已安装的 JRE**

单独选择未使用的 JRE 并**删除**

它对我有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-04T12:22:40.123

我尝试了上述所有建议，但对我不起作用，但我发现了如何解决我的错误。

以下步骤使项目编译成功：

在项目资源管理器中，右键单击项目，选择“属性” 在右侧的树中，转到 Java 构建路径。选择选项卡“库”。单击“添加库”。选择 JRE 系统库。点击下一步。选择单选按钮备用 JRE。单击“已安装的 JRE”。选择具有正确版本的 JRE。单击应用并关闭。在下一个屏幕中，单击完成。在属性窗口中，单击应用并关闭。在项目资源管理器中，右键单击您的 pom.xml 并选择 run as > maven build 在目标文本框中，编写“安装”。单击运行。

这使得项目在我的情况下成功构建。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-28T07:18:13.530

我遇到了类似的问题，由于没有人发布与我类似的方法，所以我开始了。

> 导航到您要启动的运行配置。
> 那里选择了 JRE 选项卡。在那里调整“运行时 JRE”，你就可以开始了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-09T04:35:59.953

在 Eclipse 中，导入 Maven 项目或调用“更新源”等操作在运行 Eclipse 的同一 JVM 中运行。如果该 JVM 来自不属于 JDK 的 JRE，则不会有 Java 编译器（tools.jar）。

因此，要从 Eclipse 中启动 Maven，用于启动的 JRE 也需要来自 JDK。默认情况下 Eclipse 注册 JRE 它是在其中启动的，但这可以在 Parthasarathy 上面提到的“Window / Preferences ... / Java / Installed JREs”首选项页面上进行配置

或者，您可以在 pom.xml 中指定 compilerId，这样 Maven 在编译 Java 代码时就不会寻找 JDK：

```
 <plugin>
  <artifactid>maven-compiler-plugin</artifactid>
  <configuration>
    <compilerid>eclipse</compilerid>
  </configuration>
  <dependencies>
    <dependency>
      <groupid>org.codehaus.plexus</groupid>
      <artifactid>plexus-compiler-eclipse</artifactid>
      <version>xxxx</version>
    </dependency>
  </dependencies>
</plugin> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-17T06:46:59.540

如果您执行上述所有步骤，可能会感到困惑，而我们的问题只是缺少 tools.jre，那么只需按照以下步骤添加 tools.jre，问题就解决了。

第 1 步：在 Eclipse 中转到 Windows -> 首选项

第 2 步：Java -> 已安装的 JRE（双击它）

第 3 步：单击编辑按钮 -> 单击添加外部 JAR

第 4 步：现在选择 tools.jar 路径

现在应用更改，它工作正常。

[这是屏幕截图](https://i.stack.imgur.com/aBM8z.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-30T19:21:08.000

尽管上面有一些关于这个问题的非 Eclipse 答案没有提到 Eclipse，但它们需要更改路径变量。另一种方法是使用命令行选项 java.home，例如：

```
mvn package -Djava.home="C:\Program Files\Java\jdk1.8.0_161\jre" 
```

注意末尾的 \jre - 一个令人惊讶的必要性。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-08-15T22:22:16.967

当前的答案都没有帮助我。我们得到了类似的东西：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:
    #.#.#:compile (default-compile) on project Streaming_Test: Compilation failure
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] /opt/java/J7.0/../lib/tools.jar 
```

发生这种情况是因为 Java 安装已确定它是 JRE 安装。它期望在 JRE 子目录*上方*`../lib`有 JDK 内容，因此在路径中。我们`tools.jar`在`$JAVA_HOME/lib/tools.jar`不在`$JAVA_HOME/../lib/tools.jar`。

不幸的是，我们没有在我们的操作系统上安装 JDK 的选项（不要问），所以这不是一个选项。我通过将以下内容添加到 maven 来解决问题`pom.xml`：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <fork>true</fork>  <!-- not sure if this is also needed -->
      <executable>${JAVA_HOME}/bin/javac</executable>
      <!--        ^^^^^^^^^^^^^^^^^^^^^^ -->
    </configuration>
  </plugin> 
```

通过将可执行文件指向正确的位置，这至少可以解决我们的编译失败问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-22T14:29:32.707

我可以通过执行以下步骤来解决：

> 右键单击项目选择构建路径->配置构建路径->选择库选项卡->然后选择JRE系统库[您拥有的JavaSE-1.7版本]->单击编辑按钮->在JRE系统库窗口中选择执行环境- 在下拉列表中，您可以选择为我列出的 JDK 它的 JavaSE-1.7 -> 在此单击环境按钮旁边 -> 在执行环境窗口中，您必须再次为我选择 Java SE 它的 JavaSE-1.7 -> 只需选择它，您将在 Compatible JREs 选项卡中有选项，因此请选择您想要在我的情况下使用的 jdk1.7.0_25 的 JDK。

* * *

> 单击确定并通过执行适当的操作确定/完成来完成其余窗口。

最后做 Maven Clean 和 Maven Install。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-07-05T20:42:45.153

这取决于 Maven 版本。当您安装较新版本的 Maven 时，不会出现此错误。您还可以使用 tools.jar 文件 lib/tools.jar 添加另一个目录 - 它也解决了这个问题。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-09-04T08:36:14.553

对于*Intellij Idea* ，请适当设置所有内容（类似于此）：

```
JAVA_HOME = C:\Program Files\Java\jdk1.8.0_60
JRE_HOME = JAVA_HOME\jre 
```

并且不要忘记**重新启动 Idea**。该程序在启动时获取变量，因此在程序运行时对环境变量的任何更改都不会产生任何影响。

# vba - 在excel表格中插入图片

> ID：12585381
> 
> 赞同：1
> 
> 时间：2012-09-25T14:42:00.860
> 
> 标签：vba, excel, worksheet-function

在我的 Office 2010 xlsm 工作表中，我创建了一个固定大小的 Image ActiveX 控件，名为`Image1`. 在我看来，以下宏应该将图像路径设置为在单元格中指定的路径`B3`，但它会在 Image1.Picture 行出现“运行时错误'424'：需要对象”错误消息。我检查了`imPath`等于`"C:\some\valid\image\path.jpg"`。

```
Private Sub Worksheet_Change(ByVal Target As Range)
   If Target.Address = "$B$3" Then
        imPath = Range("B3")
        Image1.Visible = True         
        Image1.Picture = imPath
        Image1.PictureSizeMode = fmPictureSizeModeZoom   
        Image1.BorderStyle = fmBorderStyleNone    
        Image1.BackStyle = fmBackStyleTransparent
    End If
End Sub 
```

这里有什么问题？顺便说一句，有没有办法检查指定的文件是否真的存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:54:29.180

快速查看 excel-help，搜索图片，建议您使用此行：

```
Image1.Picture = LoadPicture(imPath) 
```

要检查文件是否存在，请使用 FileSystemObject

```
Dim fs as variant
Set fs = CreateObject("Scripting.FileSystemObject")
fs.FileExists(imPath) 
```

*编辑*

顺便说一句，你可以使用

```
imPath = Target.value 
```

设置 imPath （未测试，但很确定这一点）

# mysql - 如何通过 LINQ 生成这个特殊查询？

> ID：12585397
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:42:56.990
> 
> 标签：mysql, linq, join

> **可能重复：**
> [需要一个 linq 来生成自己加入](https://stackoverflow.com/questions/12579917/need-a-linq-to-generate-itself-join)

根据这篇文章[为什么 MYSQL 更高的 LIMIT 偏移量会减慢查询速度？](https://stackoverflow.com/questions/4481388/why-does-mysql-higher-limit-offset-slow-the-query-down)这篇文章[http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)我需要一个 linq 来创建下面的查询

```
SELECT  news.*
FROM    (
        SELECT  id
        FROM    news
        WHERE   cat_id= x
        ORDER BY
                id DESC
        LIMIT m, n
        ) o
JOIN    news
ON      news.id = o.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:04:26.317

好吧我试过了...

```
var res =
    from item in 
        (from newsItem in news
        where newsItem.cat_id = x
        select newsItem.id).Skip(m).Take(n)

    join other in news
    on other.id equals item.id

    select item 
```

# c - 如何将参数从终端传递给函数

> ID：12585398
> 
> 赞同：1
> 
> 时间：2012-09-25T14:42:57.510
> 
> 标签：c, linux, terminal

> **可能重复：**
> [从命令行将参数传递给 C 程序](https://stackoverflow.com/questions/498320/pass-arguments-into-c-program-from-command-line)

我正在尝试将三个参数从终端传递到一个名为 replace 的函数中。我想知道是否可以从终端执行以下操作

```
 % ./replace d DDD mytest.tx 
```

我在网上查看过，但只能找到有关将值直接传递给 main() 而不是内部函数的信息。

编辑：我编辑了主要功能如下：

```
void replace(char* string_a, char* string_b, char* string_f)
 {
  }

int main(int argc, char *argv[])
  { 
       if(argc < 4)
  { 
    printf("Not enough arguments\n");
   return 0;
  }

replace(argv[1],argv[2],argv[3]);
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:45:09.077

您的主要功能应采用以下格式：

```
int main ( int argc, char *argv[] ) 
```

argv 是指向您的参数的指针。请注意，第一个参数是您的程序的名称。

这是 有关命令行参数的[课程：](http://www.cprogramming.com/tutorial/c/lesson14.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:48:10.447

当然可以，主原型是`int main(int ac, char **av)`其中 ac 是传递给程序的参数数量，而 char** 是包含传递给程序的参数的数组数组。

例如对于您的代码：

```
int main(int ac, char **av)
     {
      void replace (av[1], av[2], av[3])
        { 
         .......
        }

     } 
```

如果你启动你的 exec 为 : `./replace d DDD mytest.tx`， av[0] 将是你的程序名称， av[1] 将是`d`， av[2]`DDD`和 av[3]`mytest.tx`

祝你好运 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:46:51.163

所有独立的正确 C 程序都以`main()`. 这就是语言的工作方式。

所以你需要做的是在验证和解释参数之后调用`replace()`from 。`main()`命令行参数将在标准`int argc, char *argv[]`参数中`main()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:46:51.290

您要做的是使用`main`的参数列表。

您可以使用以下签名：

`int main(int argc, char* argv[])`，其中 argv 是指向参数列表的指针，从命令行传递。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:49:41.973

向上看`argc`和`argv`。

argc 是参数的数量，而 argv 是指向参数的指针数组。

所以你的代码应该是这样的：

```
void replace (char string_a[],char string_b[], char string_f[])
{
    //...
}

int main(int argc, char *argv[])
{
    if(argc < 4)
    {
        printf("Not enough arguments\n");
        return 0;
    }

    replace(argv[1], argv[2], argv[3]);
} 
```

还要记住，argv( `argv[0]`) 中的第一项是执行程序的路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T15:08:10.717

要回答您的确切问题： `I am trying to pass three arguments from terminal into a function called replace.`不，您不能绕过将参数发送到 main。

C 语言被定义为它寻找`main()`程序的入口点，如果你没有入口点，它会抱怨。因为`main()`预计会出现，所以它被用作任何命令行参数的入口点：

```
[void | int] main(int argc, char *argv[]) 
```

其中`argc`是命令行参数的数量，`argv[]`是字符指针数组（参数列表的“字符串”版本）

如果你想通过它们来替换你真的只需要直接发送它们：

```
int main(int argc, char *argv[]){
  if argc is big enough to satisfy
     replace(argv's) 
```

如果你真的不想`main()`知道参数，你需要将它们存储在一个文件中，或者在运行时`stdin`从你的`replace()`函数中获取它们。

如果您试图让“替换”成为您的主要功能，那么如果您的链接器允许您定义入口点，那么这是可能的。

再次......不太确定你的目标是什么。

# javascript - AngularJS 无法识别 LiveScript 的控制器

> ID：12585407
> 
> 赞同：1
> 
> 时间：2012-09-25T14:43:24.747
> 
> 标签：javascript, angularjs, livescript

不知道这里发生了什么！

我不断收到错误：

```
Error: Argument 'TasksController' is not a function, got undefined
    at qa (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:16:79)
    at ra (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:16:187)
    at $get (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:50:411)
    at $get.f (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:42:146)
    at m (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:6:312)
    at j (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:42:8)
    at e (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:38:207)
    at e (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:38:224)
    at e (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:38:224)
    at e (http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:38:224)
        ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js:60 
```

这是我的[LiveScript](http://gkz.github.com/LiveScript) `/Scripts/app.txt`文件：

```
TasksController = (scope) ->
        scope.tasks = ["a", "b"] 
```

这是我的html：

```
<!DOCTYPE html>
<html lang="en" ng-app>
<head>    
    <link href="/Styles/site.css" rel="stylesheet" />
    <link href="/Styles/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/Styles/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="/Scripts/bootstrap.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
</head>
<body>

    <div ng-controller="TasksController">
        <ul>
            <li ng-repeat="task in tasks">
                {{task}}
            </li>
        </ul>
    </div>

     <script type="text/ls" src="/Scripts/app.txt"></script>    
    <script src="/Scripts/livescript.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:30:17.823

只是为了完整起见，这是我想出的。

首先编译 livescript 文件，（例如，使用 Node Livescript 编译器）。否则，“livescript.js”（内联编译器）在解释脚本文件时会来不及让 AngularJS 及时调用它。

# gwt - Gwt 性能问题：庞大的数据和单元格表

> ID：12585408
> 
> 赞同：3
> 
> 时间：2012-09-25T14:43:25.653
> 
> 标签：gwt, gwt-celltable

我有一个向我发送大量 DTO 的服务器端服务。我需要将它们放在 CellTable 中。这就像 10-200 行，我需要同时查看所有内容。

我有一个服务器端日志，它跟踪我的服务的最后一个“人造”代码行（就在返回之前）。

最好的情况是，此日志与完全加载的表之间有 2 分钟的差距。大多数时候，在这个过程中有些东西会中断，这让我悬而未决。

我有什么选择？

谢谢

编辑：我尝试了 Andrei 的想法，区分数据下载的长度（rpc 回调）和 celltable 加载的长度。

我想确定一下，这就是我在回调中所做的：

```
@Override
public void onSuccess(ResponseBean result) {
  Window.alert("success " + new Date().toString());

  resultPanel.updateResults(result);

  Window.alert("celltable " + new Date().toString());
} 
```

第一个警报发生在约 10 秒后。但是第二个永远不会被调用。

这是 updateResults 背后的方法：

```
public void updateResults(ResponseBean response) {
  dataProvider.getList().clear();
  dataProvider.getList().addAll(response.beans());
  myCellTable.setPageSize(response.beans.size());
} 
```

编辑2：我尝试了很多东西。当我尝试用我的数据填充单元格表时会出现问题。在 Chrome 中，出现了 BSOD 的 chrome 版本。在 Firefox 中，它会静默中断，但不会执行剩余的 js 指令。如果我尝试在 firebug 中读取控制台，我的 firefox 会使用 ~2.5GB ram 冻结。如果我使用 gwt-runner，它也会冻结。

在我的示例中，只有 4 行（4 个具有多个依赖项的对象）！

我怎样才能找到什么中断和在哪里？

感谢您的帮助:)

最后：好的，所以我显然是个白痴。在 getValues() 的某个地方，有一段“业务逻辑”不应该存在，这导致了 OutOfMemory 错误。

外卖虽然：

*   跟踪最后一次调用server-side和onSuccess client-side的第一行，看问题是否与RPC有关
*   如果您的单元格表中断但只有几行，那么您做了一些您不会引以为豪的事情
*   Scheduler.get().scheduleDeffered 允许您渲染页面，然后执行您的业务逻辑。所以这很酷。

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:13:34.310

通常我会把钱押在 RPC 序列化是瓶颈而不是`CellTable`渲染上。
但是，您说第一个警报会在 10 秒后出现，这会反对。

使用 . 渲染 200 个 DTO 应该足够快`CellTable`。
此外，通过网络发送 200 个 DTO 应该没问题。

我已经使用`CellTable`并通过网络发送了大约 5000 个 DTO，没有任何性能问题（尽管我一次只显示 50 个并使用分页）。

几个想法：

*   开发模式比生产模式慢得多（尤其是在反序列化方面）。因此也在生产模式下测试性能。
*   要找出究竟是什么导致了您的问题，请使用 Chrome 开发工具。您可以分析您的代码并查看导致延迟的原因。
*   您能否在代码中手动创建 200 个虚拟 DTO 并将其传递给您的`updateResults`函数并查看性能比较。
*   你显示多少列？如果您显示许多列，请将其减少到仅一列，看看它如何影响性能。
*   CellTable 列中使用的任何 getter 是否具有昂贵的业务逻辑？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T22:20:10.313

对于这么多数据，您应该使用寻呼机和 AsyncDataProvider。这是我们如何做到这一点的模板。它可能无法满足您的需求，但它会给您一个起点。DatastoreObjectProxy 从 EntityProxy 扩展而来，并使用请求工厂来获取项目。您可以将您的表添加到此数据提供程序中，并且寻呼机将处理获取您的数据块。

```
public abstract class DaoBaseDataProvider<T extends DatastoreObjectProxy> extends AsyncDataProvider<T> implements SearchProvider<T> {

    public static final ProvidesKey<DatastoreObjectProxy> KeyProvider = new ProvidesKey<DatastoreObjectProxy>() {

        @Override
        public Long getKey(DatastoreObjectProxy item) {
            return item.getId();
        }
    };

    public interface HasBaseDataProvider<T extends DatastoreObjectProxy> {
        public void setDataProvider(DaoBaseDataProvider<T> dataProvider);

        public void setSelectionModel(SelectionModel<? super T> selectionModel);
    }

    public DaoBaseDataProvider() {
        super(new ProvidesKey<T>() {
            public Long getKey(T item) {
                // Always do a null check.
                return (item == null) ? null : item.getId();
            }
        });
    }

    @Override
    public void search(String searchText) {

        getSearchQuery(searchText).fire(new Receiver<List<T>>() {

            @Override
            public void onSuccess(List<T> values) {
                updateRowData(0, values);
                updateRowCount(values.size(), true);
            }
        });
    }

    public void showAll() {
        updateRowCount(10, false);
    }

    @Override
    protected void onRangeChanged(HasData<T> display) {
        final Range range = display.getVisibleRange();

        Request<List<T>> request = getRangeQuery(range);
        if (getWithProperties() != null) {
            request.with(getWithProperties());
        }

        request.fire(new Receiver<List<T>>() {

            @Override
            public void onSuccess(List<T> values) {
                updateRowData(range.getStart(), values);
            }
        });
    }

    public abstract String[] getWithProperties();

    public abstract DaoRequest<T> getRequestProvider();

    public void remove(final Set<Long> idsToDelete) {
        getDeleteQuery(idsToDelete).fire(new Receiver<Integer>() {

            @Override
            public void onSuccess(Integer response) {
                for (HasData<T> display : getDataDisplays()) {
                    // Force the display to relaod it's view.
                    display.setVisibleRangeAndClearData(display.getVisibleRange(), true);
                }
            }
        });
    }

    /**
     * This can be overridden so that you can change the query.
     * 
     * @param range
     * @return
     */
    protected Request<List<T>> getRangeQuery(Range range) {
        Request<List<T>> request = getRequestProvider().findRange(range.getStart(), range.getLength());
        if (getWithProperties() != null) {
            request.with(getWithProperties());
        }
        return request;
    }

    protected Request<List<T>> getSearchQuery(String searchText) {
        Request<List<T>> request = getRequestProvider().search(searchText).with(getWithProperties());
        if (getWithProperties() != null) {
            request.with(getWithProperties());
        }
        return request;

    }

    protected Request<Integer> getDeleteQuery(Set<Long> idsToDelete) {
        return getRequestProvider().deleteList(idsToDelete);
    }
} 
```

这是用于获取对象的客户端类。您可以使用自己的 RequestContext 扩展它。

```
public interface DaoRequestFactory extends RequestFactory {

    @Service(value = DaoBase.class, locator = DaoServiceLocator.class)
    public interface DaoRequest<T extends DatastoreObjectProxy> extends RequestContext {

        Request<T> find(Long id);

        Request<List<T>> findRange(int start, int end);

        Request<Integer> deleteList(Set<Long> idsToDelete);

        Request<List<T>> search(String searchText);

        Request<Long> save(T obj);

        Request<Void> delete(Long objId);
    }
} 
```

# php - PHP tidy 关闭代码改进

> ID：12585423
> 
> 赞同：0
> 
> 时间：2012-09-25T14:44:19.013
> 
> 标签：php, html, tidy

我想使用 PHP 的整洁只是为了使 HTML 输出更具可读性，而不是为了我的代码的任何“优化”。在我看来，我负责提供格式良好的 HTML，而不是可读的 HTML。

那么我怎样才能关闭这种行为呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:16:15.630

好像是不可能的。随时发布更好的答案。

# python - 将文件和对象写入亚马逊 s3

> ID：12585424
> 
> 赞同：5
> 
> 时间：2012-09-25T14:44:19.517
> 
> 标签：python, amazon-s3

我正在使用亚马逊 S3 将动态生成的文件分发到 S3。

在本地服务器上，我可以使用

```
destination = open(VIDEO_DIR + newvideo.name, 'wb+') 
```

将生成的视频存储到 VIDEO_DIR.newvideo.name 位置

是否有可行的方法将 VIDEO_DIR 更改为 S3 端点位置。那么动态生成的视频可以直接写入S3服务器吗？

另一个问题是：有没有可行的方法直接将对象写入S3？比如a `chunklet=Chunklet()`，如何将这个chunklet对象直接写入S3服务器？

我可以先创建一个本地文件并使用 S3 API。例如，

```
mime = mimetypes.guess_type(filename)[0]
k = Key(b)
k.key = filename
k.set_metadata("Content-Type", mime)
k.set_contents_from_filename(filename)
k.set_acl('public-read') 
```

但我想提高效率。使用 Python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:48:25.877

使用[`boto`库](http://code.google.com/p/boto/)访问您的 S3 存储。但是，您仍然必须先将数据写入（临时）文件，然后才能发送它，因为尚未实现流写入方法。

我会使用上下文管理器来解决这个限制：

```
import tempfile
from contextlib import contextmanager

@contextmanager
def s3upload(key):
    with tempfile.SpooledTemporaryFile(max_size=1024*10) as buffer:  # Size in bytes
        yield buffer  # After this, the file is typically written to
        buffer.seek(0)  # So that reading the file starts from its beginning
        key.set_contents_from_file(buffer) 
```

将其用作上下文管理的文件对象：

```
k = Key(b)
k.key = filename
k.set_metadata("Content-Type", mime)

with s3upload(k) as out:
    out.write(chunklet) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T10:19:10.737

Martijn's solution is great but it forces you to use the file in a context manager (you can't do `out = s3upload(…)` and `print >> out, "Hello"`). The following solution works similarly (in-memory storage up until a certain size), but works both as a context manager and as a regular file (you can do both `with S3WriteFile(…)` and `out = S3WriteFile(…); print >> out, "Hello"; out.close()`):

```
import tempfile
import os

class S3WriteFile(object):
    """
    File-like context manager that can be written to (and read from),
    and which is automatically copied to Amazon S3 upon closing and deletion.
    """

    def __init__(self, item, max_size=10*1024**2):
        """
        item -- boto.s3.key.Key for writing the file (upon closing). The
        name of the object is set to the item's name (key).

        max_size -- maximum size in bytes of the data that will be
        kept in memory when writing to the file. If more data is
        written, it is automatically rolled over to a file.
        """

        self.item = item

        temp_file = tempfile.SpooledTemporaryFile(max_size)

        # It would be useless to set the .name attribute of the
        # object: when using it as a context manager, the temporary
        # file is returned, which as a None name:
        temp_file.name = os.path.join(
            "s3://{}".format(item.bucket.name),
            item.name if item.name is not None else "<???>")

        self.temp_file = temp_file

    def close(self):
        self.temp_file.seek(0)
        self.item.set_contents_from_file(self.temp_file)
        self.temp_file.close()

    def __del__(self):
        """
        Write the file contents to S3.
        """
        # The file may have been closed before being deleted:
        if not self.temp_file.closed:
            self.close()

    def __enter__(self):
        return self.temp_file

    def __exit__(self, *args, **kwargs):
        self.close()
        return False

    def __getattr__(self, name):
        """
        Everything not specific to this class is delegated to the
        temporary file, so that objects of this class behave like a
        file.
        """
        return getattr(self.temp_file, name) 
```

(Implementation note: instead of delegating many things to `self.temp_file` so that the resulting class behaves like a file, inheriting from `SpooledTemporaryFile` would in principle work. However, this is an old-style class, so `__new__()` is not called, and, as far as I can see, a non-default in-memory size for the temporary data cannot be set.)

# symfony - Symfony 2 validateProperty：注意：未定义的索引

> ID：12585425
> 
> 赞同：0
> 
> 时间：2012-09-25T14:44:20.290
> 
> 标签：symfony, validation

我对验证器服务的 validateProperty 有一点问题。

我的目的是在处理程序中的处理功能期间对我的表单字段添加约束。问题是我有一个错误通知我 symfony 找不到我给 validateProperty 方法的索引。但是，我检查了第一个参数给出的对象类型，以及与第二个参数同名的属性！

我在处理程序中的代码：

```
$regex = new Regex([
    'pattern' => '#pattern#', 
    'match' => false, 
    'message' => "Error"]);

$this->validator->validateProperty($this->form->getData(), 'content', $regex); 
```

（getData() 返回一个 Message 类型的实体，其中有一个字段 $content）

你知道是什么问题吗？

非常感谢。

有用的链接：[http ://api.symfony.com/2.0/Symfony/Component/Validator/Validator.html#method_validateProperty](http://api.symfony.com/2.0/Symfony/Component/Validator/Validator.html#method_validateProperty)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:19:21.643

~~哼，你应该复习 PHP 基础知识：http: [//php.net/manual/fr/function.array.php](http://php.net/manual/fr/function.array.php)~~

~~您不能使用 '[' 和 ']' 动态声明数组。~~

validateProperty 的第三个参数是一组验证组，而不是 Regex 本身。默认为空...

# android - MikeOrtiz 的 TouchImageView 用于编辑原始 img

> ID：12585428
> 
> 赞同：2
> 
> 时间：2012-09-25T14:44:30.057
> 
> 标签：android, matrix, bitmap

我正在使用 MikeOrtiz (https://github.com/MikeOrtiz/TouchImageView) 的 TouchImageView。我想添加以下功能：在*TIV* (TouchImageView) 中将加载保存在 SDCard 上的图像的预览，用户将滚动和缩放。然后我需要根据*TIV*中可见的内容裁剪原始图像。有没有办法获取可见位图的坐标？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:29:55.237

很简单，TouchImageView 是 ImageView 的子类，所以你应该搜索如何获取 ImageView 可见区域。这里有一些代码可以做到这一点：

```
TouchImageView img = (TouchImageView) findViewById(R.id.imageViewZoom);
Bitmap bitmap = null;
img.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(img.getDrawingCache());   // get visible image
img.setDrawingCacheEnabled(false); 
```

位图变量具有可见的 imageview，然后您可以将其保存到磁盘、显示在另一个 imageview 或任何您需要的地方。希望对你有帮助

# c# - 图片框可以用来显示基于矢量的图像吗？

> ID：12585430
> 
> 赞同：3
> 
> 时间：2012-09-25T14:44:35.267
> 
> 标签：c#, vb.net, visual-studio-2010, components

可以使用[PictureBox](https://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox%28v=vs.110%29.aspx)控件显示基于矢量的图像吗？

我读过一篇文章，声称 PictureBox 可用于显示基于矢量的图像而不是位图图像。因此可以调整框的大小，并且图片将像矢量图像一样保持其质量。

所以我决定尝试一下，虽然我看起来很优质。我的矢量图像不是完全矢量的问题吗？如果这是不可能的，是否有另一种方法可以在不诉诸 WPF 的情况下做到这一点？

我正在使用 VB.NET。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T20:50:06.113

是的，这是可能的。它是元文件，而不是位图。最好使用 Paint() 事件显示，这样它可以在图片框改变大小时动态重新缩放。示例代码：

```
Public Class Form1
    Public Sub New()
        InitializeComponent()
        PictureBox1.Dock = DockStyle.Fill
        image = New System.Drawing.Imaging.Metafile(New System.IO.MemoryStream(My.Resources.schoolbus))
    End Sub

    Private Sub PictureBox1_Paint(ByVal sender As System.Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles PictureBox1.Paint
        e.Graphics.DrawImage(image, New Rectangle(Point.Empty, PictureBox1.ClientSize))
    End Sub

    Private Sub PictureBox1_Resize(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PictureBox1.Resize
        PictureBox1.Invalidate()
    End Sub

    Private image As System.Drawing.Imaging.Metafile

End Class 
```

其中“校车”是我作为资源添加的示例 .wmf 文件。文件格式是常见的症结所在，目前支持它的绘图程序并不多。你可以[从这里](http://office.microsoft.com/en-us/images/results.aspx?qu=Academic#ai%3aMC900410867%7C)得到一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T19:15:18.557

**这是 2012 年的过时答案，不再支持 Adob​​e SVG 视图。**

PictureBox 不支持基于矢量的图像。如果您不想使用 WPF，则可能需要下载 SVG 视图控件。这是来自[Adob](https://en.wikipedia.org/wiki/Adobe_Systems) ​​e 的一个：http : [//www.adobe.com/svg/viewer/install/](http://www.adobe.com/svg/viewer/install/)

安装后，控制 DLL 文件应位于例如 `C:\Program Files\Common Files\Adobe\SVG Viewer 3.0\NPSVG3.dll`.

如果您在表单上添加控件，则可以按如下所述加载文件。

```
AxSVGCtl1.SRC = Filename 
```

*[从 .NET 使用 Adob​​e 的 SVG 控件](http://www.mecxpert.de/svg/SvgDotNet.html)*展示了如何在 .NET 中使用 SVG 控件，尽管它是 C# 代码。

# grails - 如何在战争创建期间执行命令？

> ID：12585434
> 
> 赞同：5
> 
> 时间：2012-09-25T14:44:42.620
> 
> 标签：grails

我的环境：Grails v2.1.1

我需要在战争过程中运行一个小型实用程序。这个应用程序生成我想要包含在我的战争文件中的文件。我尝试将代码放入 BuildConfig.groovy 的 grails.war.resources 中，但我没有看到错误，也没有看到我期望创建的文件。

有谁知道我如何执行这个实用程序，以便它的输出在我的战争中？

这是在终端实例中运行的命令：

```
sencha app build -e production -d $stagingDir/production 
```

这是我尝试通过`grails.war.resources`in运行它`BuildConfig.groovy`：

```
grails.war.resources = { stagingDir ->

//calling echo() does nothing.  I don't see the comment in the build output
echo(message:'executing grails.war.resources')
def outputDir =  new File("${stagingDir.getParentFile().getPath()}/target/ranForReal")

def command = """sencha app build -e testing -d ${outputDir.getPath()}"""

def executionDir = new File("${stagingDir.getParentFile().getPath()}/web-app")

def proc = command.execute(null,executionDir)

proc.waitFor()

//my desperate attempt to see if anything is happening.  I'd expect an error here
def x = 1/0

// Obtain status and output
println "return code: ${ proc.exitValue()}"
println "stderr: ${proc.err.text}"
println "stdout: ${proc.in.text}" // *out* from the external program is *in* for groovy

//this for loop does work and does remove servlet jars, so I know this closure is called.
for (name in ['servlet']) {
    delete {
        fileset dir: "$stagingDir/WEB-INF/lib/",
                includes: "$name*.jar"
    }
}

} 
```

是`grails.war.resources`要走的路吗？

**更新**

对于后代，这是我使用以下答案的有点复杂的示例。

从*`_Events.groovy`*文件

```
/**
 * Generate an optimized version of the sencha app.
 */
eventCreateWarStart = {warName, stagingDir ->
    //argsMap contains params from command line, e.g 'war --sencha.env=production'
def senchaEnvironment = argsMap["sencha.env"] ?: 'testing'

    //println is the only way I've found to write to the console.
println "running sencha optimizer code for $senchaEnvironment environment..."

ant.exec(outputproperty: "cmdOut", executable:'sencha',
        dir:"$stagingDir",failOnError:true){
    arg(value:'app')
    arg(value:'build')
    arg(value:"-e $senchaEnvironment" )
}

println "${ant.project.properties.cmdOut}"

println'completed sencha optimization process.'

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T14:52:26.290

你可以`eventCreateWarStart`在你的`scripts/_Events.groovy`. 这个事件接收两个参数，WAR的名字和stagingDir

```
eventCreateWarStart = { warName, stagingDir ->
  // ..
} 
```

您可以访问为您提供的`ant`变量，`AntBuilder`因此您可以执行以下操作

```
ant.exec(executable:'sencha') {
  arg(value:'app')
  arg(value:'build')
  // ...
} 
```

# wordpress - Wordpress 中二十一个子主题的黑屏问题

> ID：12585436
> 
> 赞同：1
> 
> 时间：2012-09-25T14:44:46.507
> 
> 标签：wordpress, wordpress-theming, wsod

我创建了一个简单的 21 岁儿童主题，包含 style.css、functions.php 和 footer.php

functions.php 如下：

```
<?php
//This adds a custom favicon to the front site of the website
function childtheme_favicon() { ?>
    <link rel="shortcut icon" href="<?php echo 
    bloginfo('stylesheet_directory') ?>/images/favicon.ico">
<?php }
add_action('wp_head', 'childtheme_favicon');

//This is for automatically calculating the copyright years
function comicpress_copyright() {
    global $wpdb;
    $copyright_dates = $wpdb->get_results("SELECT
    YEAR(min(post_date_gmt)) AS firstdate,
    YEAR(max(post_date_gmt)) AS lastdate FROM $wpdb->posts
    WHERE post_status = 'publish' ");

    $output = '';
    if($copyright_dates) {
        $copyright = "© " . $copyright_dates[0]->firstdate;
        if($copyright_dates[0]->firstdate != $copyright_dates[0]->lastdate) {
            $copyright .= '-' . $copyright_dates[0]->lastdate;
        }
        $output = $copyright;
    }
    return $output;
}
?> 
```

footer.php 曾经有一些版权代码，但到目前为止，出于测试原因，它是未经编辑的父主题的精确副本。

**WSOD** [又名死亡白屏]

所以这就是问题所在。如果我从子主题中删除 footer.php 或 functions.php，该站点将按预期工作！

但是，如果这两个在子主题文件夹中共存，当我尝试注销时，我会得到一个完全空白的屏幕。如果我通过删除 cookie、salt 或其他内容强制注销，我将无法重新登录仪表板，再次出现空白屏幕。尝试了不同的浏览器，结果相同，调试模式处于活动状态，但到目前为止我没有收到任何错误消息。该网站托管在 bluehost 上。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T13:12:47.997

你只是从父主题复制你的functions.php和footer.php文件吗？或者您是否从一个新文件开始。我知道更多时候不仅仅是简单地复制functions.php文件会给你白屏死机。

# php - 检查数组是否为空

> ID：12585438
> 
> 赞同：3
> 
> 时间：2012-09-25T14:44:49.417
> 
> 标签：php, arrays, if-statement

以下代码显示了`$rows`来自 MySQL 查询的数组中的记录数组。我还添加了一条`if`语句来检查是否`$rows`为空，但它不起作用。

```
$rows = array();

$result1 = mysql_query("SELECT * FROM TestPhase where Pid<10", $db) or die("cannot select");
while($row = mysql_fetch_array($result1)) {
  $rows []= array(
    'id' => $row['id'],
    'parent' => $row['parent'],
    'name' => $row['name'],
  );

}

if($rows == ""){
    echo "No Data";

    } 
```

这种`if`说法是行不通的。如何检查数组是否返回空并回显“无数据”。

我如何检查javascript中的数组是否为空？我已将`$rows`数组放在`var treeData`.

```
if (treeData) is empty{
$("button").hide();
     } 
```

如何检查是否`treeData`为空以隐藏按钮。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-25T14:46:27.493

**PHP**
简单使用[`empty()`](http://php.net/manual/en/function.empty.php)，即

```
if(empty($rows)){
    echo 'No Data';
} 
```

或者你也可以使用[`count()`](http://php.net/manual/en/function.count.php)，即

```
if(count($rows) < 1){ // or if(count($rows) === 0)
    echo 'No Data';
} 
```

**JavaScript**
你可以使用该`length`属性

```
if(treeData.length == 0){
    $("button").hide();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:46:37.500

用于`count`检查

```
if(!count($rows)){
    echo "No Data";
} 
```

使用 JavaScript，这里是示例

```
var arr = new Array('one', 'two', 'three'); //assume you have list of values in array
if(!arr.length){ //if no array value exist, show alert()
   alert('No Data');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:46:49.800

您不能将数组视为字符串（即`$rows == ""`）。使用`count()`or`empty()`代替：

```
if(count($rows) == 0)
{
    echo "No Data";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:46:54.193

使用[`empty`](http://php.net/manual/en/function.empty.php)：

```
if( empty( $rows) ) { ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:46:57.047

```
if ( count( $rows ) == 0 ) {...} 
```

# maven - maven - 缺少工件错误

> ID：12585442
> 
> 赞同：1
> 
> 时间：2012-09-25T14:45:05.040
> 
> 标签：maven, dependencies

我将我的 Eclipse 项目（dcmfileer）安装到本地 repo 并尝试依赖另一个项目的资源。maven 声称“缺少工件错误”。我可以在 pom 依赖项添加站点的搜索对话框中找到该文件。我可以在 repo 中看到文件。

我取消选中“解决工作区项目中的依赖项”，因为我想在不同的工作区中使用配置。

settings.xml 包含：${user.home}/.m2/repository

有人知道为什么它不起作用？![依赖 pom.xml](../Images/04b3eae6b3485a3f109748eae6af7a79.png)

![本地存储库视图](../Images/b767ad3ffa2e7bf7a25f03b9513180b1.png)

![eclipse构建路径属性](../Images/7a7d54e252bf25f8f5dd745341cc23c1.png)

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.stabilit</groupId>
  <artifactId>Test</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>Test</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>org.dcm</groupId>
      <artifactId>dcmFileer</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <scope>compile</scope>
    </dependency>
  </dependencies>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <url>http://repo1.maven.org/maven2</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo1.maven.org/maven2</url>
    </pluginRepository>
  </pluginRepositories>
  <build>
    <sourceDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\src\main\java</sourceDirectory>
    <scriptSourceDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\src\main\scripts</scriptSourceDirectory>
    <testSourceDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\src\test\java</testSourceDirectory>
    <outputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\classes</outputDirectory>
    <testOutputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\test-classes</testOutputDirectory>
    <resources>
      <resource>
        <directory>C:\stabilit\projects\EUREX\DCM\java\Test\src\main\resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>C:\stabilit\projects\EUREX\DCM\java\Test\src\test\resources</directory>
      </testResource>
    </testResources>
    <directory>C:\stabilit\projects\EUREX\DCM\java\Test\target</directory>
    <finalName>Test-0.0.1-SNAPSHOT</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2-beta-5</version>
        </plugin>
        <plugin>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.0</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.4.1</version>
        <executions>
          <execution>
            <id>default-clean</id>
            <phase>clean</phase>
            <goals>
              <goal>clean</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-install</id>
            <phase>install</phase>
            <goals>
              <goal>install</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.3</version>
        <executions>
          <execution>
            <id>default-resources</id>
            <phase>process-resources</phase>
            <goals>
              <goal>resources</goal>
            </goals>
          </execution>
          <execution>
            <id>default-testResources</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>testResources</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.7.1</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
              <goal>testCompile</goal>
            </goals>
          </execution>
          <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-jar</id>
            <phase>package</phase>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>default-deploy</id>
            <phase>deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-site-plugin</artifactId>
        <version>2.0.1</version>
        <executions>
          <execution>
            <id>default-site</id>
            <phase>site</phase>
            <goals>
              <goal>site</goal>
            </goals>
            <configuration>
              <outputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
          <execution>
            <id>default-deploy</id>
            <phase>site-deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
            <configuration>
              <outputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <outputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\site</outputDirectory>
          <reportPlugins>
            <reportPlugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-project-info-reports-plugin</artifactId>
            </reportPlugin>
          </reportPlugins>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <reporting>
    <outputDirectory>C:\stabilit\projects\EUREX\DCM\java\Test\target\site</outputDirectory>
  </reporting>
</project> 
```

存储库中的 POM - 依赖项 (dcmFileer)

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.dcm</groupId>
    <artifactId>dcmFileer</artifactId>
    <name>dcmFileer</name>
    <version>0.0.1-SNAPSHOT</version>
    <url>http://www.stabilit.ch</url>
    <properties>
        <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
        <project.reporting.outputEncoding>ISO-8859-1</project.reporting.outputEncoding>
        <skipTests>true</skipTests>
    </properties>
    <issueManagement>
    </issueManagement>
    <organization>
        <name>STABILIT Informatik AG</name>
        <url>www.stabilit.ch</url>
    </organization>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.7</version>
                <configuration>
                    <!-- switch on dependency-driven aggregation -->
                    <includeDependencySources>true</includeDependencySources>

                    <dependencySourceIncludes>
                        <dependency-source>org.serviceconnector.*</dependency-source>
                    </dependencySourceIncludes>

                    <excludePackageNames>org.serviceconnector.cln</excludePackageNames>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-source-plugin</artifactId>
                <version>2.1.2</version>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <phase>verify</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    <dependencies>
    </dependencies>
    <repositories>
        <repository>
            <id>repository.jboss.org</id>
            <url>http://repository.jboss.org/nexus/content/groups/public/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <repository>
            <id>sourceforge-releases</id>
            <name>Sourceforge Release Repository</name>
            <url>http://oss.sonatype.org/service/local/staging/deploy/maven2</url>
        </repository>
    </repositories>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:48:55.987

对于初学者，您意识到（在 Linux 和其他 Unix 变体上）`${user.home}`会扩展到类似的东西`C:\Documents and Settings\JTraber`，对吗？

我怀疑此时您必须回购，一个在您的实际用户主页下，一个在项目工作区下。您需要配置 Eclipse 的 Maven 插件以使用您实际下的存储库`${user.home}`

此外，您在 Windows 上。`${}`变量不会被操作系统插值。相反，您必须使用 Windows 样式，即`%HOMEPATH%`. `${user.home}`我怀疑你会在你的项目中找到一个名为的实际目录。

# android - 带有（内部）服务的 Android 异步 Http 客户端

> ID：12585445
> 
> 赞同：0
> 
> 时间：2012-09-25T14:45:10.313
> 
> 标签：android, http

我需要创建强大的 SYNC Rest 系统 Android <--> Server。我选择这种方式：1）创建服务 2）循环服务 3）内部循环创建请求（使用 James Smith 的 Android 异步 Http 客户端）

**但是请求不起作用** 另一种方法使用后续请求但这个库不支持它，也许我错了。

```
 @Override
    public void onStart(Intent intent, int startid) { 

        loopThread = new Thread()
        {
            @Override
            public void run() {
                try {
                    Looper.prepare();
                    do {    
                        AsyncHttpClient client = new AsyncHttpClient();
                         client.get("http://www.google.com", new AsyncHttpResponseHandler() {
                             @Override
                             public void onStart() {
                                 Log.v("Mad Service", "onStart");
                             }

                             @Override
                             public void onSuccess(String response) {
                                 Log.v("Mad Service", "onSuccess");
                             }

                             @Override
                             public void onFailure(Throwable e, String response) {
                                 Log.v("Mad Service", "onFailure");
                             }

                             @Override
                             public void onFinish() {
                                 Log.v("Mad Service", "onFinish");
                             }
                         });

                    } while(mQuit == false);

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };

        loopThread.start();
    } 
```

# .net - 如何在 WinForms 应用程序上设置大图标

> ID：12585446
> 
> 赞同：1
> 
> 时间：2012-09-25T14:45:10.820
> 
> 标签：.net, windows, winforms, icons

> **可能重复：**
> [Windows 7 图标大小问题](https://stackoverflow.com/questions/8042158/windows-7-icon-sizing-problems)

我有 ico 文件，里面有以下最多 128x128 的图像。我可以在任何图标编辑器和 Windows 资源管理器中看到该图标包含该大小。当我将此图标附加到我的 Windows 窗体应用程序时，我可以看到它使用的图标不超过 48x48。有什么问题？不能为 WinForms 应用程序设置大图标吗？

谢谢。

# node.js - 访问 node.js 全局模块

> ID：12585447
> 
> 赞同：7
> 
> 时间：2012-09-25T14:45:14.207
> 
> 标签：node.js

npm 文档是这样说的：

> *   如果您正在安装要在程序中使用的东西，请使用 require('whatever')，然后将其安装在本地项目的根目录下。
> *   如果您要在 shell、命令行或其他地方安装要在 shell 中使用的东西，请全局安装它，以便它的二进制文件最终出现在您的 PATH 环境变量中。

我目前正在编写 --- 或者至少正在尝试编写 --- 在节点中的真正命令行程序，该程序旨在从 shell 中使用。因此，根据上述情况，我的依赖项应该安装为全局模块。

我如何在节点中实际*使用*通过 npm 安装的全局模块？当然，调用`require()`不起作用，因为`/usr/local/lib/node_modules`默认情况下 npm 全局模块目录 ( ) 不在路径上。我可以通过将其显式添加到程序顶部的路径来使其工作，但这是一个非常糟糕的解决方案，因为它不可移植——它需要知道 npm 的全局模块目录在任何给定系统上的位置。

只是为了让生活更加糟糕，我通过 dpkg 安装了一些全局模块。这些已被放入`/usr/lib/nodejs`，并且它们可以正常工作。这让我很困惑，因为如果不应该将全局模块用于普通应用程序，我不希望它们都在路径上；否则我希望他们都在路上，并要求全局模块在任何地方都可以工作。有一个但没有另一个似乎很奇怪。这里发生了什么？

**更新：**我应该指出，这个程序只是一个脚本，`#!/usr/bin/env nodejs`在顶部；它不是一个正式的节点模块，这对于如此微不足道的事情来说太过分了。由于 Debian 模块在这样的脚本中都是必需的，对我来说 npm 的全局模块也应该是必需的似乎是明智的，但我有一种感觉，这是 Debian 主义......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:18:59.997

> 因此，根据上述情况，我的依赖项应该安装为全局模块。

不完全的。

这意味着*您的模块*可以作为全局安装，因此它的[二进制文件](https://npmjs.org/doc/json.html#bin)可以从 shell 中获得：

```
npm install -g your-module
your-module-binary --option etc. 
```

另一方面，它的依赖项应该在第一点之后安装，驻留在`node_modules`项目中的一个目录中（通常在一个可以管理它们的目录中指定[`package.json`](https://npmjs.org/doc/json.html#dependencies)）`npm`。

但是，全局模块（通常）不适用于`require`. 它们不遵循从[文件夹](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)[加载`node_modules`](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)，`npm`本地模块遵循，并且它们的路径通常不在[从全局文件夹加载](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)`NODE_PATH`的变量中列出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:40:50.453

因此，您的说明与 npm 模块有关，但您正在进行本地开发。这里有一些指导方针。

就您的源代码而言，您只需要两种类型的`require`语句

```
var dep = require('somedep') 
```

将它用于您的库需要通过 npm 包含的任何核心模块（如`fs`）和第三方模块（在您的 package.json 中将它们列为依赖项）。在这里您指定一个不合格的包名称，节点根据其搜索算法查找模块。

```
var mymod = require('./lib/mymod') 
```

使用它通过相对于当前 javascript 文件的路径来要求项目本身中的其他模块。

这就是您处理 javascript 依赖项所需要做的一切。

好的，现在如何安装依赖项？

对于本地开发（在您的项目的源代码树中），只需 cd 进入项目目录并运行`npm install`，它将读取您的`package.json`文件并在`node_modules`子目录中安装您需要的模块，一切都将适用于本地开发。

如果您要将它实际发布为 npm 模块，其他用户（并且您可以是开发人员和“其他用户”之一）`npm -g`如果他们想要访问您的项目的二进制实用程序，`PATH`则可以安装它包括`/usr/lib/nodejs/lib/node_modules`，但在这种情况下，`npm -g`将同时安装您的代码和项目的依赖项。

这就是你感到困惑的地方。

> 因此，根据上述情况，我的依赖项应该安装为全局模块。

您不需要将依赖项显式安装为全局变量，只需要您感兴趣的顶级模块，在这种情况下就是您的项目本身。npm 将自动处理依赖关系，这是它在生活中的主要目的。你的项目的依赖项不会被全局安装，而是在`node_modules`你的项目的子目录中，它将被全局安装。

这是目录和那里的内容：

*   `~/yourproject`：源代码的本地开发
*   `~/yourproject/node_modules`: 项目在开发过程中使用的 npm 模块。`npm install`通过运行创建/填充`~/yourproject`
*   `/usr/lib/nodejs/lib/node_modules`：全局安装的 npm 模块（如果您将其发布到 npm 注册表，最终可能包括您的项目）
*   `/usr/lib/nodejs/lib/node_modules/yourproject/node_modules`：当您这样做时，您的项目的依赖项将安装在这里`npm install -g yourproject`

您还可以找到我关于管理解释器和 PATH相关[的博客文章。](http://peterlyons.com/problog/2012/09/managing-per-project-interpreters-and-the-path)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T02:56:37.740

此外，Node.js 将在以下 GLOBAL_FOLDERS 列表中搜索：

1：$HOME/.node_modules 2：$HOME/.node_libraries 3：$PREFIX/lib/node

# c - 在更快的算法和代码检查方面需要帮助 - 将值与数据库数据进行比较

> ID：12585448
> 
> 赞同：1
> 
> 时间：2012-09-25T14:45:15.290
> 
> 标签：c, algorithm, sqlite, cgi

我需要帮助来开发一种更快的算法，以便在我的 CGI 文件中使用（使用 C）。我有四个 sqlite3 数据库表，其中包含两个参数攻击类型和防御类型。这些表是 mod_no、mod_ne、mod_av 和 mod_se。函数`double modifier(int attack_type, int defend)`时，sqlite3 语句从数据库中选择是否在其中一个表中同时存在攻击类型和防御类型的条目。根据 sqlite3 语句产生的表 == 1，该函数将返回数据类型 double 的特定值。

这是代码：

```
double modifier(int attack_type, int defend_type)
{
    sqlite3 *conn;
    sqlite3_stmt *res;
    sqlite3_open("MP1.sl3", &conn);
    int i,n;
    int eff;
    char    temp[MAXLENGTH];
    char    mod_tables[4][8] = {"mod_no","mod_ne","mod_av","mod_se"};
    for (i = 0; i <=3; i++) {
        printf(temp, "select exists(select atk_typ,pok_typ from %s where atk_typ = %d and pok_typ = %d);",mod_tables[i],atk_typ, pok_typ);
        sqlite3_prepare_v2(conn,temp,MAXLENGTH,&res,NULL);
        while(sqlite3_step(res) != SQLITE_ROW) {
            n = sqlite3_column_int(res,0);
        }
        sqlite3_finalize(res);
        if (n == 1) eff = i;
        if (eff == i) break;

    }
    sqlite3_close(conn);
    return eff/(double)2;   
} 
```

这段代码的问题是（1）它不返回任何值，以及（2）它很慢。为了测试问题是否出在代码上，我进行了初始化`eff = 2`，使函数返回 1。CGI 文件运行得很快。但是当我删除初始值时，它又变慢了。

我需要有一个工作功能。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:01:45.683

这是一种可能的优化：

```
select exists(select atk_typ,pok_typ from mod_no where atk_typ = %d and pok_typ = %d);",mod_tables[i],atk_typ, pok_typ)
union
select exists(select atk_typ,pok_typ from mod_ne where atk_typ = %d and pok_typ = %d);",mod_tables[i],atk_typ, pok_typ)
union
select exists(select atk_typ,pok_typ from mod_av where atk_typ = %d and pok_typ = %d);",mod_tables[i],atk_typ, pok_typ)
union
select exists(select atk_typ,pok_typ from mod_se where atk_typ = %d and pok_typ = %d);",mod_tables[i],atk_typ, pok_typ) 
```

然后你只有 1 个查询并且可以摆脱外部的 for 循环。

# asp.net-mvc - 填写下拉列表

> ID：12585451
> 
> 赞同：0
> 
> 时间：2012-09-25T14:45:20.957
> 
> 标签：asp.net-mvc

我是 MVC 和实体框架的新手。

我想填写一个下拉列表，我对控制器进行了如下编码：

```
var LevelLst = new List<string>();
var LevelQry = from d in db.Products
where d.CategoryLevel==1
orderby d.CategoryName
select d.CategoryName;
LevelLst.AddRange(LevelQry.Distinct());
ViewBag.Level1 = new SelectList(LevelLst); 
```

这就是我在查看部分中的内容；

```
<% using (Html.BeginForm("Index","Product",FormMethod.Get))
    { %>   
         **Level1**: <%:Html.DropDownList("Level1", "All")%>    
         <input type="submit" value="Filter" /></p>
<%}%> 
```

它工作正常，没有任何问题，但我有 4 个级别的组合框要填充。我是否必须为其他 3 个级别重复控制器代码，还是有另一种方法来填充下拉列表？如果是，请以简单的方式告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:51:11.360

您不需要在数据库中点击 4 次。例如，您可以在控制器上使用相同的 SelectList 对象在 ViewBag 中添加 4 个属性：

```
var list = new SelectList(LevelLst);

ViewBag.Level1 = list;
ViewBag.Level2 = list;
ViewBag.Level3 = list;
ViewBag.Level4 = list; 
```

并在您的视图中渲染它：

```
<p>
   <label>Level 1: </label> <%: Html.DropDownList("Level1", "All") %>
</p>

<p>
   <label>Level 2: </label> <%: Html.DropDownList("Level2", "All") %>
</p>

<p>
   <label>Level 3: </label> <%: Html.DropDownList("Level3", "All") %>
</p>

<p>
   <label>Level 4: </label> <%: Html.DropDownList("Level4", "All") %>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:06:12.247

首先，**尽量避免像 ViewBag / ViewData 这样的动态东西**将数据从控制器传输到视图。始终使用**强类型**视图。

因此，您将为您的视图创建一个视图模型。

```
public class ProductViewModel
{
   public int ProductID { set;get;}

   public List<SelectListItem> Level1Items { set;get;}
   public int Level1SelectedItem { set;get;}

   public List<SelectListItem> Level2Items { set;get;}
   public int Level2SelectedItem { set;get;}

   public List<SelectListItem> Level3Items { set;get;}
   public int Level3SelectedItem { set;get;}

   public ProductViewModel()
   {
        Level1Items =new List<SelectListItem>();
        Level2Items =new List<SelectListItem>();
        Level3Items =new List<SelectListItem>();
   }
} 
```

在您的 GET 操作中，您将集合项设置为此视图模型类的实例并将其发送到您的视图。

```
public ActionResult Index()
{
  var prodVM=new ProductViewModel();
  prodVM.Level1Items=GetItemsForCategory(1);
  prodVM.Leve21Items=GetItemsForCategory(2);
  prodVM.Leve31Items=GetItemsForCategory(3);
  return View(prodVM);
} 
```

假设 GetItemsForCategory 方法接受类别 id 并从数据源返回 SelectListItems 列表

```
public List<SelectListItem> GetItemsForCategory(categoryId)
{
  // to do :return the List of SelectListItem for each categoryID
} 
```

现在在你的强类型视图中，

```
@model ProductViewModel
@using(Html.BeginForm())
{
  Level 1 : 
   @Html.DropDownListFor(m => m.Level1SelectedItem ,
                       new SelectList(Model.Level1Items,"Value", "Text")"Select")
  Level 2 : 
   @Html.DropDownListFor(m => m.Level2SelectedItem ,
                       new SelectList(Model.Level2Items,"Value", "Text")"Select")
  Level3 : 
   @Html.DropDownListFor(m => m.Level3SelectedItem ,
                       new SelectList(Model.Level3Items,"Value", "Text")"Select")
  <input type="submit" />
} 
```

在您的 HTTPPOST 操作中，您将在 Level1SelectedItem 属性中获得第一个下拉列表的选定值（其他下拉列表也相同）

```
[HttpPost]
public ActionResult Index(ProductViewModel model)
{
  if(ModelState.IsValid)
  { 
    //check for model.Level1SelectedItem property value
  }
  //to do  : reload the dropdown items 
  return View(model);
} 
```

# javascript - Android：使用php函数从服务器打开远程pdf开始下载，但一旦启动失败

> ID：12585455
> 
> 赞同：1
> 
> 时间：2012-09-25T14:45:33.710
> 
> 标签：javascript, android, pdf

我已经为此苦苦挣扎了很长一段时间，我进行了研究，发现唯一的答案是针对原生 android 构建，我现在正在做的事情有点复杂。

我得到了一个由 Mr.X 编写的黑莓应用程序，并被要求将其移植到 Android，我已经这样做了，并且大多数应用程序都可以完美运行 - 直到它必须打开远程文件 (pdf)从运行 php 函数的服务器。

举个例子：

```
var auth = make_base_auth(username, password);

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", baseURL + "/api/streampdf.php?pdf="+name, true);
xmlhttp.onreadystatechange = function() {
 if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
 {
    alert(xmlhttp.responseText);
    window.location.href = xmlhttp.responseText;      
 }
} 
```

这将打开默认浏览器并给出来自 XMLHTTP 的响应文本，并说明该服务暂时不可用。

我似乎无法弄清楚这一点！

# iis - MVC4 中的虚拟目录问题

> ID：12585457
> 
> 赞同：2
> 
> 时间：2012-09-25T14:45:36.930
> 
> 标签：iis, asp.net-mvc-4, asp.net-web-api, virtual-directory

测试服务器 (IIS 6) 将我的应用程序放入一个虚拟目录中。

所以根网址是`http://www.testingserver.net/testsite/`

常规路由很好，但是当我进行 REST Api 调用时它失败了。Ajax 调用`/Api/{controller}`return`http://www.testingserver.net/api/controller`而不是`http://www.testingserver.net/testsite/api/controller`，最终以`404 Not Found`.

谁能告诉我如何解决它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:07:56.067

这听起来像是客户端脚本问题。如果您使用的是 jQuery，请查看：[https ://stackoverflow.com/a/9079801/173225](https://stackoverflow.com/a/9079801/173225)

基本上，您只需要设置基本标签。如果您不使用 jQuery，链接的帖子应该为您提供足够的详细信息以适应您正在做的任何事情。

# php - Cookies 没有保留在 PHP 中？

> ID：12585458
> 
> 赞同：1
> 
> 时间：2012-09-25T14:45:40.727
> 
> 标签：php, cookies, session-cookies, setcookie

### 如何让 cookie 保留在 php 中？

* * *

**give_cookie.php**

```
<?php
    if (!isset($_COOKIE["muffin"]))
        setcookie("muffin", "55", 100 * 60 * 60 * 24 * 30);
    $_COOKIE["lid"]=true;
?> 
```

**jar.php**

```
<?php
    var_dump($_COOKIE);
    if($_COOKIE["lid"])
        echo "open";
?> 
```

* * *

按该顺序运行代码会给我输出：

> array(0) { } 注意：未定义索引：第 3 行 jar.php 中的盖子

`jar.php`从in嵌入代码`give_cookie.php`给了我输出：

> 数组（1）{[“盖子”]=>布尔（真）}打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:49:11.617

您应该提供 cookie 何时过期的 UNIX 时间戳（从纪元开始计算）作为函数调用的第三个参数。

> cookie 过期的时间。这是一个 Unix 时间戳，因此是自纪元以来的秒数。换句话说，您很可能会使用 time() 函数加上您希望它过期之前的秒数来设置它。或者你可以使用 mktime()。time()+60*60*24*30 将设置 cookie 在 30 天内过期。如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

我建议您阅读[`setcookie`](http://php.net/manual/en/function.setcookie.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:50:00.070

您正在设置 cookie`muffin`并尝试检索`lid`.you 还需要 setcookie `lid`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:51:00.047

我想你设定的时间还在过去

目前

```
time() = 1348584550

100 * 60 * 60 * 24 * 30 =  259200000 
```

所以试试

```
setcookie("muffin", "55", time() + (100 * 60 * 60 * 24 * 30));

if($_COOKIE["muffin"])
    echo "open"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:58:25.047

其他答案是正确的，但还有另一个考虑。Cookies**在服务器向客户端发送 html 时**设置，并**在用户请求页面时**从用户处接收。这意味着，如果您尝试读取刚刚*正确*设置的 cookie ，它将为空，直到用户下次重新加载页面。避免这种情况的唯一方法是，正如您所做的那样，不确定是否故意，手动分配 cookie 的值并同时设置它，因为它是一个超全局的。这不是一个好的做法，因为 Cookie 的值在执行时会丢失。这应该*有效*，但不会做太多工作：

**give_cookie.php**

```
<?php
    if (!isset($_COOKIE["muffin"]))
        setcookie("muffin", "55", 100 * 60 * 60 * 24 * 30);
    setcookie("lid", TRUE, time() + 100 * 60 * 60 * 24 * 30);
    $_COOKIE["lid"]=TRUE;

?> 
```

**jar.php**

```
<?php
    if($_COOKIE["lid"])
        echo "open";
?> 
```

PS，您的代码还有更多问题（除了它没有任何用处）。告诉我们您想要达到的目标，以便我们为您提供更多帮助。

# scala - 您如何在 Play 2.0.x 中获取请求的大小？

> ID：12585459
> 
> 赞同：5
> 
> 时间：2012-09-25T14:45:41.077
> 
> 标签：scala, playframework-2.0

在 Play Framework 2.0.3 (scala) 中，如何确定任何 Request[_] 的大小（以字节为单位）？

我们正在尝试获取此信息以用于记录目的。

我们期望 request.body.asRaw 有一些价值，但我们总是获得 None：

```
def logRawRequest[A](request: Request[A]) {
  request.body match {
    case c: AnyContent => println("Raw: "+c.asRaw)
  }
} 
```

我们一定缺少一些简单的东西，对吧？

* * *

感谢您提供有用的答案！事实证明，Content-Length 标头仅存在于 POST/PUT，因此我们将其用于这些，并回退到 GET/DELETE 的查询长度，如下所示：

```
val requestSize = request.method match {
  case "POST" | "PUT" => request.headers.get(CONTENT_LENGTH).map(_.toInt).getOrElse(-1)
  case _ => request.toString().length
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T09:52:18.533

我没试过这个，但也许

```
request.headers.get(play.api.http.HeaderNames.CONTENT_LENGTH) 
```

会成功吗？它至少适用于简单的 POST 请求。它只会给身体长度。

GET 请求没有来源的主体 - 取决于您想要测量的内容，`request.uri.length`应该这样做，也许还有标头的总大小（可能有一些大的 cookie）。如果您计算此总数，则应将其添加到 POST 的内容长度中。

# html - 控制表格单元格之间的间距

> ID：12585461
> 
> 赞同：76
> 
> 时间：2012-09-25T14:45:52.523
> 
> 标签：html, css, css-tables

我正在尝试创建一个表格，其中每个单元格都有背景颜色，它们之间有空白。但我似乎很难做到这一点。

我尝试设置`td`边距，但似乎没有效果。

```
table.myclass td {
    background-color: lime;
    margin: 12px 12px 12px 12px;
} 
```

如果我对 做同样的事情`padding`，它可以工作，但是我没有单元格之间的间距。

有人可以帮我解决这个问题吗？

jsFiddle：http: [//jsfiddle.net/BfBSM/](http://jsfiddle.net/BfBSM/)

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-25T14:56:25.840

使用元素[`border-spacing`](http://www.w3.org/wiki/CSS/Properties/border-spacing)上的属性`table`来设置单元格之间的间距。

确保[`border-collapse`](http://www.w3.org/wiki/CSS/Properties/border-collapse)设置为`separate`（或者每个单元格之间会有一个边框，而不是每个单元格周围有一个单独的边框，它们之间可以有间距）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-25T14:58:11.467

检查这个[小提琴](http://jsfiddle.net/7JufT/8/)。您将需要看看使用边框折叠和边框间距。IE 有一些怪癖（像往常一样）。这是基于对这个[问题](https://stackoverflow.com/questions/339923/how-to-set-cellpadding-and-cellspacing-in-css)[的回答](https://stackoverflow.com/a/8381051/2106)。

```
table.test td {
  background-color: lime;
  margin: 12px 12px 12px 12px;
  padding: 12px 12px 12px 12px;
}

table.test {
  border-collapse: separate;
  border-spacing: 10px;
  *border-collapse: expression('separate', cellSpacing='10px');
}
```

```
<table class="test">
  <tr>
    <td>Cell</td>
    <td>Cell</td>
    <td>Cell</td>
  </tr>
  <tr>
    <td>Cell</td>
    <td>Cell</td>
    <td>Cell</td>
  </tr>
  <tr>
    <td>Cell</td>
    <td>Cell</td>
    <td>Cell</td>
  </tr>
</table>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T14:58:45.723

```
table.test td {
    background-color: lime;
    padding: 12px;
    border:2px solid #fff;border-collapse:separate;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T16:45:39.617

要完成工作，请使用

```
<table cellspacing=12> 
```

如果您宁愿“做对”而不是把事情做好，您可以改用 CSS 属性`border-spacing`，某些浏览器支持该属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:59:42.980

使用border-collapse 和border-spacing 来获取表格单元格之间的空间。我不建议使用 QQping 建议的浮动单元格。

[JSFiddle](http://jsfiddle.net/fTMmv/1/)

# iphone - 一些 UITextfields 在 iOS6 中没有响应

> ID：12585463
> 
> 赞同：6
> 
> 时间：2012-09-25T14:45:57.920
> 
> 标签：iphone, ios, uitextfield, ios6

自从更新到 iOS 6 后，我在尝试制作 UITextField 或 UITextView firstResponder 时遇到了这个最奇怪的错误。

......它不起作用。

我无法选择字段或视图并调出键盘，也没有光标或任何东西。最奇怪的是，它仅不适用于某些字段，不同视图控制器中的其他字段可以正常工作。

我有：

```
[self.window makeKeyAndVisible];
self.window.rootViewController = self.viewController; 
```

在我的 appDelegate 中。它在 iOS 5 上工作并且仍然没有问题。

关于它可能是什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:27:50.490

我发现了导致问题的原因。从视图控制器中，我展示了来自文本字段的新视图控制器是 firstResponder。所以当我通过调用取消它时

```
[textview resignFirstResponder]; 
```

或者

```
[self.view endEditing:YES]; 
```

在展示新的视图控制器之前，它可以正常工作。问题仍然存在……这是为什么呢？有没有更好的方法来克服这个问题？我对辞职整个应用程序中的每个文本字段并没有太大感觉...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T15:38:08.757

我知道这篇文章很旧，但如果它有帮助，在 iOS6 中，你还需要在“祖父母”视图中辞去响应者的职务。

前任：

搜索视图（不要辞职响应者）-> 详细视图-> 超级详细视图（这个有问题）。

详细视图没有第一响应者，但搜索视图有。

我们必须在搜索视图中辞职响应者以解决超级详细视图中的问题。

我假设我们还必须在 Search View 的 previws 控制器中退出响应者。

# c# - 限制旋转的 TextBlock 大小

> ID：12585466
> 
> 赞同：0
> 
> 时间：2012-09-25T14:46:01.767
> 
> 标签：c#, wpf, windows, xaml

我试图在旋转 TextBlock 后限制第一列的高度以匹配第二列的高度。

我有以下 XAML：

```
<Viewbox>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBlock
            Grid.Column='1'
            Text='Ubuntu'
            FontFamily='Ubuntu'
            FontSize='36' />

        <TextBlock
            Grid.Column='0'
            Text='Linux'
            FontFamily='Ubuntu'
            FontSize='36'>
            <TextBlock.LayoutTransform>
                <RotateTransform
                    Angle='-90' />
            </TextBlock.LayoutTransform>
        </TextBlock>

    </Grid>
</Viewbox> 
```

这将呈现以下内容：

![实际输出](../Images/6358c9b76502ec507cac3961f26fc4d8.png)

但是，我正在尝试获取此输出，以便左列的高度将适应第二列的高度：

![期望的输出](../Images/5214f19328a6c8dee535904212a36462.png)

您知道如何纯粹使用声明性 XAML 来做到这一点吗？IE。没有绑定到高度或代码隐藏。我也不想指定控件的任何边距。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:08:44.370

对代码稍作修改可以为您提供所需的内容：

**第一：您更新的代码**

```
<Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="UbuntuBox"
            Grid.Column='1'
            Text='Ubuntu'
            FontFamily='Ubuntu'
            FontSize='36' />

            <TextBlock Width="{Binding ElementName=UbuntuBox, Path=Height}"
            Grid.Column='0'
            Text='Linux'
            FontFamily='Ubuntu'
            >
            <TextBlock.LayoutTransform>
                <RotateTransform
                    Angle='-90' />
            </TextBlock.LayoutTransform>
            </TextBlock>

        </Grid> 
```

**二：说明**

*   您`TextBlock`显示的“Linux”必须链接到 Ubuntu `TextBlock`。在这种情况下，它`Width`必须与 Ubuntu 相同`Height`，所以我添加了以下内容：`Width="{Binding ElementName=UbuntuBox, Path=Height}"`
*   你不能有`TextBlock`36`FontSize`适合这个给定的宽度。删除它将保持默认设置，然后您可以根据需要使用它

这就是你所需要的！那里没有硬编码添加的东西=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:53:55.797

This is the best i could come up with. The bad part is the hardcoded row definition, but because you already have the root grid inside a viewbox, its relative, so it shouldn't be a big problem.

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="36"/>
    </Grid.RowDefinitions>
    <TextBlock
        Grid.Column='1'
        Text='Ubuntu'
        FontFamily='Ubuntu'
        FontSize='36' />

    <Viewbox Grid.Column='0'>
        <TextBlock
            Text='Linux'
            FontFamily='Ubuntu'
            FontSize='36'>
            <TextBlock.LayoutTransform>
                <RotateTransform
                    Angle='-90' />
            </TextBlock.LayoutTransform>
        </TextBlock>
    </Viewbox>
</Grid> 
```

# c# - 用于 XML XSD 映射的 Excel 加载项

> ID：12585470
> 
> 赞同：1
> 
> 时间：2012-09-25T14:46:09.690
> 
> 标签：c#, xml, excel, map, add-in

我是 Office 加载项世界的新手，这就是我想要做的。

我想创建一个加载项，它将：

1.  读取打开的 excel 文档（xls、xml、csv 等）的列名。
2.  读取提供的 XSD XML 模式文件的字段。
3.  如果字段完全匹配，则将它们映射到列，否则显示一条消息，指出未找到某些列。

我相信该`Workbook.XmlMaps`物业是我应该看的地方，但是我想知道是否有人已经做了类似的事情，或者可以给我正确方向的提示/指针。

# csv - 如何将此 XML 转换为 CSV

> ID：12585472
> 
> 赞同：0
> 
> 时间：2012-09-25T14:46:13.100
> 
> 标签：csv, xml-parsing

过去 4 天，我正在尝试使用此字段分布将此 XML 文件转换为 CSV

XML 文件部分

```
<!-- language: lang-xml -->

<ponudba podjetje="SO d.o.o." velja_od="23.09.2012 @ 12:30:48">
    <artikel koda="LS593EAR" naziv="HP ENVY 17-2199e" kategorija="Prenosniki" podkategorija="Hewlett Packard (HP)" v_akciji="ne" kosovnost="več">
    <opis>
    HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)
    </opis>
    <opis_detail>
    HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)<br/><table> <col width="25%" /> <col /> <tbody> <tr> <th>Procesor</th> <td>Intel® Core™ i7-2630QM / 2.00 GHz / Quad-Core</td> </tr> <tr> <th>Delovni pomnilnik</th> <td>8 GB DDR3</td> </tr> <tr> <th>Trdi disk</th> <td>1 TB (1000 GB) / 5400 / SATA</td> </tr> <tr> <th>LCD zaslon</th> <td>43,9 cm (17,3'') Full HD HP Ultra BrightView Infinity Display (1920x1080)</td> </tr> <tr> <th>Grafična kartica</th> <td>AMD Radeon™ HD 6850 Graphics</td> </tr> <tr> <th>Optična enota</th> <td>SuperMulti DVD-RW Double Layer</td> </tr> <tr> <th>USB 2.0</th> <td>2x</td> </tr> <tr> <th>USB 3.0</th> <td>1x</td> </tr>    <tr> <th>eSATA</th> <td>da</td> </tr> <tr> <th>HDMI</th> <td>da</td> </tr> <tr> <th>WiFi</th> <td>da</td> </tr> <tr> <th>Bluetooth</th> <td>da</td> </tr> <tr> <th>WWAN</th> <td>ne</td> </tr> <tr> <th>Spletna kamera</th> <td>da</td> </tr> <tr> <th>Card Reader</th> <td>da</td> </tr> <tr> <th>Express Card</th> <td>ne</td> </tr> <tr> <th>TV kartica</th> <td>ne</td> </tr> <tr> <th>Finger Print</th> <td>ne</td> </tr> <tr> <th>Vhodne naprave</th> <td>brez</td> </tr>     <tr> <th>Operacijski sistem</th> <td>Microsoft Windows 7 Home Premium (64 bit)</td> </tr> <tr> <th>Država uvoza</th> <td>Italijanska tipkovnica (priložene SLO nalepke)</td> </tr>  <tr> <th>Stanje modela</th> <td>HP Renew</td> </tr>     </tbody> </table>
    </opis_detail>
    <garancija_v_mesecih>12</garancija_v_mesecih>
    <cena_v_EUR>1.049,00</cena_v_EUR>
    <proizvajalec>HP</proizvajalec>
    <stanje>na zalogi</stanje>
    <url_foto_artikla>
    http://www.so-doo.si/media/catalog/product/cache/1/image/265x/9df78eab33525d08d6e5fb8d27136e95/c/0/c02034964.jpg.hri_4.jpg
    </url_foto_artikla>
    <vec_fotk_artikla>
    <slika href="http://www.so-doo.si/media/catalog/product/c/0/c02034982.jpg.hri_4.jpg"/>
    <slika href="http://www.so-doo.si/media/catalog/product/c/0/c02034991.jpg.hri_4.jpg"/>
    </vec_fotk_artikla>
    <teza_artikla_v_kg>2.9000</teza_artikla_v_kg>
    </artikel> 
```

这是我想要的 CSV 文件 - 标头所有字段来自 XML 的所有数据，而不仅仅是一些数据:(

```
<!-- language: lang-csv -->

koda    naziv   kategorija  podkategorija   v_akciji    kosovnost   opis    opis_detail garancija_v_mesecih cena_v_EUR  proizvajalec    stanje  password    url_foto_artikla    vec_fotk_artikla 
```

我试过这个：

```
// The order here determines the order in the output CSV file
$columns = array(
    'koda',
    'naziv',
    'kategorija',
    'podkategorija',
    'v_akciji',
    'kosovnost'
);

// This will be used later on to correctly sort in the attribute values
// Note: the third paramter of "array_fill" determines what value to use
// in case a node lacks an attribute
$csv_blueprint = array_combine(
    $columns,
    array_fill(0, count($columns), '')
);

$data = array($columns);
$filexml = 'so_feed.xml';

if ( !file_exists($filexml) ) {
    // Do some error routine
} else {
    $xml = simplexml_load_file($filexml);
    $artikel = $xml->artikel;

    if ( !count($artikel) ) {
        // Stop processing 'cause there's nothing to do
    } else {
        foreach ( $artikel as $item ) {
            // Clone the row blueprint to leave the original unspoiled
            $row = $csv_blueprint; 
```

我也试过这个：

```
$xml = simplexml_load_file($filexml);
//$artikel = $xml->artikel;
$ponudbas = $xml->ponudba;
...
    foreach ( $ponudbas as $ponudba ) {
        // Clone the row blueprint to leave the original unspoiled
        $row = $csv_blueprint; 
```

但是这两种情况都不会解析 XML 中的所有数据。我不知道该怎么办 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:10:19.970

如果您的 XML 与您复制的完全相同，则它不是有效的 XML 文档。最后缺少了`</ponudba>`。

要考虑的另一件事是 XML 格式是元素内的数据，在您的情况下，我们可以看到在两个元素（17''）中使用双引号 ''。在某些特殊情况下，这可能会导致解析错误。如果您真的想使用这些，也许最好使用 CDATA 块中的数据来转义那些特殊字符。

**编辑：**我刚刚看到您的 XML 在 XML 元素中包含 HTML 元素，我们鼓励您对这种 XML 元素使用 CDATA 块。

如果对您来说更容易，您可以简单地将 XML 转换为 JSON 并将其直接解码为 php 对象：

```
$json = json_encode($xml);
$data = json_decode($json, TRUE); 
```

如果你想写回一个 csv 文件，你应该考虑使用 fputcsv (http://php.net/manual/fr/function.fputcsv.php)

**编辑 2** 尝试一个简单的测试：

利用：

```
$file='file.xml';
$xml = simplexml_load_file($file);

foreach ($xml->artikel as $art)
{    
    echo $art->opis_detail;
} 
```

这将仅输出：

```
HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit) 
```

现在，如果您在节点上的 XML 上使用 CDATA 元素：

```
<opis_detail><![CDATA[HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)<br/><table> <col width="25%" /> <col /> <tbody> <tr> <th>Procesor</th> <td>Intel® Core™ i7-2630QM / 2.00 GHz / Quad-Core</td> </tr> <tr> <th>Delovni pomnilnik</th> <td>8 GB DDR3</td> </tr> <tr> <th>Trdi disk</th> <td>1 TB (1000 GB) / 5400 / SATA</td> </tr> <tr> <th>LCD zaslon</th> <td>43,9 cm (17,3'') Full HD HP Ultra BrightView Infinity Display (1920x1080)</td> </tr> <tr> <th>Grafična kartica</th> <td>AMD Radeon™ HD 6850 Graphics</td> </tr> <tr> <th>Optična enota</th> <td>SuperMulti DVD-RW Double Layer</td> </tr> <tr> <th>USB 2.0</th> <td>2x</td> </tr> <tr> <th>USB 3.0</th> <td>1x</td> </tr>    <tr> <th>eSATA</th> <td>da</td> </tr> <tr> <th>HDMI</th> <td>da</td> </tr> <tr> <th>WiFi</th> <td>da</td> </tr> <tr> <th>Bluetooth</th> <td>da</td> </tr> <tr> <th>WWAN</th> <td>ne</td> </tr> <tr> <th>Spletna kamera</th> <td>da</td> </tr> <tr> <th>Card Reader</th> <td>da</td> </tr> <tr> <th>Express Card</th> <td>ne</td> </tr> <tr> <th>TV kartica</th> <td>ne</td> </tr> <tr> <th>Finger Print</th> <td>ne</td> </tr> <tr> <th>Vhodne naprave</th> <td>brez</td> </tr>     <tr> <th>Operacijski sistem</th> <td>Microsoft Windows 7 Home Premium (64 bit)</td> </tr> <tr> <th>Država uvoza</th> <td>Italijanska tipkovnica (priložene SLO nalepke)</td> </tr>  <tr> <th>Stanje modela</th> <td>HP Renew</td> </tr>     </tbody> </table>]]>
    </opis_detail> 
```

现在将输出：

```
HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)
Procesor    IntelÂ® Coreâ„¢ i7-2630QM / 2.00 GHz / Quad-Core
Delovni pomnilnik   8 GB DDR3
Trdi disk   1 TB (1000 GB) / 5400 / SATA
LCD zaslon  43,9 cm (17,3'') Full HD HP Ultra BrightView Infinity Display (1920x1080)
GrafiÄna kartica    AMD Radeonâ„¢ HD 6850 Graphics
OptiÄna enota   SuperMulti DVD-RW Double Layer
USB 2.0 2x
USB 3.0 1x
eSATA   da
HDMI    da
WiFi    da
Bluetooth   da
WWAN    ne
Spletna kamera  da
Card Reader da
Express Card    ne
TV kartica  ne
Finger Print    ne
Vhodne naprave  brez
Operacijski sistem  Microsoft Windows 7 Home Premium (64 bit)
DrÅ¾ava uvoza   Italijanska tipkovnica (priloÅ¾ene SLO nalepke)
Stanje modela   HP Renew 
```

我认为这是缺少的数据不是吗？

# c# - 如何做多部分表单数据 wcf 服务

> ID：12585474
> 
> 赞同：0
> 
> 时间：2012-09-25T14:46:22.227
> 
> 标签：c#, wcf, web-services, http-post

如何使用多部分表单数据输入进行 wcf 服务。我已经完成了一个 Web 服务，它获取图像的字节 [] 并将其保存在本地路径中并发送 url 的路径。我已经使用运行正常的 c#windows/web 应用程序对此进行了测试，但是客户端应用程序（例如使用目标 c）无法联系服务并发送字节 []。因此我切换到 wcf 服务，我认为这很容易做到。顺便说一句，我对 wcf 也不太了解。下面是我在 wp7 应用程序中使用的示例片段。

WebClient webClient = new WebClient();

```
 webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            var uri = new Uri("http://localhost/snap/service.asmx/getImages");
            StringBuilder postData = new StringBuilder();
            postData.AppendFormat("&{0}={1}", "EventName", HttpUtility.UrlEncode("sample"));
            postData.AppendFormat("&{0}={1}", "EventVenue", HttpUtility.UrlEncode("chennai"));
            webClient.Headers[HttpRequestHeader.ContentLength] = postData.Length.ToString();
            webClient.UploadStringCompleted += new UploadStringCompletedEventHandler(webClient_UploadStringCompleted);
            webClient.UploadStringAsync(uri, "POST", postData.ToString()); 
```

提前致谢...

# php - 选择选项以根据 mysql 填充的下拉列表更新第二个选择选项

> ID：12585487
> 
> 赞同：1
> 
> 时间：2012-09-25T14:47:17.100
> 
> 标签：php, javascript, mysql, html, ajax

我正在尝试创建一个智能表单，它将自动限制第二个下拉框的可用选项。

背景：我正在创建一个票务系统，我希望用户从“站点选择”下拉列表中选择一个站点，然后“用户选择”下拉列表将仅包含链接到第一个下拉列表中选择的站点的用户，从 MySQL 填充的所有信息。

未来：然后我想在“选择受影响的服务”下使用复选框列出与该用户关联的所有服务

我的js很差。到目前为止，我已经能够通过在这里搜索找到一些代码，这些代码允许我将用户的计算机 ID 写入文本字段。但我无法弄清楚如何捕获输出和查询计算机名称（不同的表）并将其显示为复选框选项或使用相同的方法来限制下一批选择框。下面列出的所有代码我还没有清理，alpha 阶段。

我意识到我可以仅使用 PHP 分步执行此操作，但我正在尝试在这里和那里完善我的编码。

显示下拉菜单：

```
 <h3>Assign Site</h3> 

    <select id="site_add" name="site_add" style="width:217px; height:20px !important;">
        <option value="-1"></option>';

  $o = "SELECT * FROM company_sites WHERE company_id = " . $company_id . " ORDER BY sitename";
$rs = mysql_query($o);
$nr = mysql_num_rows($rs);
for ($i=0; $i<$nr; $i++) {
$r = mysql_fetch_array($rs);
        echo '<option value="' . $r['id'] . '">' . $r['sitename'] . '</option>';
    }

    <h3>Assign User</h3> 
    <select id="comp_add" name="comp_add_1" style="width:217px; height:20px !important;">
        <option value=""></option>';

  $o = "SELECT * FROM company_staff WHERE company_id = " . $company_id . " ORDER BY id DESC";
$rs = mysql_query($o);
$nr = mysql_num_rows($rs);
for ($i=0; $i<$nr; $i++) {
$r = mysql_fetch_array($rs);

    $user_computer_id = $r['computer_id'];

        echo '<option value="' . $r['id'] . '">' . $r['firstname'] . ' ' . $r['lastname'] . '</option>';
    } 
```

当前 JS 将所​​选用户的计算机 ID 输出到文本字段中：

```
<script type="text/javascript"> 
window.onload=function() { attachBehaviors(); }; 
// 
function attachBehaviors() { 
 document.getElementById(\'person\').onchange=function() { 
 loadUser(this.options[this.selectedIndex].value); // <-- check this, may be incorrect 
 } 
} 
function loadUser(optionvalue) { 
 // Always set a default 
 if (optionvalue==\'\') {  
 return; 
 }
 opts = optionvalue.split(\':\'); 
 var name = opts[0]; 
 var email = opts[1]; 
 document.getElementById(\'computer_id\').value=name; 
} 

</script> 

<select name="person" id="person"> 
    <option value=""></option>';

$result=mysql_query("SELECT * FROM company_staff"); 
while($row=mysql_fetch_array($result)) { 

$submit_firstname = $row['firstname']; 
$submit_lastname = $row['lastname']; 
$submit_staff_id = $row['id']; 
$submit_computer_id = $row['computer_id']; 

 echo '<option value="' . $submit_staff_id . '">' . $submit_firstname . ' ' . $submit_lastname . '</option>\n'; 
} 
echo '
</select> 
<input type="text" id="computer_id" name="name" placeholder="name" /> 
'; 
```

任何有关如何实现这一目标的建议将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:07:39.557

你需要 AJAX，它是 PHP 和 JS 的结合。（javascript从服务器请求数据，php处理请求，返回数据）。

您需要稍微练习一下 AJAX 才能了解如何制作此选择框。

这是理论上的过程：

1.  您使用 PHP 输出您的第一个选择框。
2.  为其创建一个 onchange 事件处理程序，该处理程序将调用服务器以获取信息。

    ..选项..

3.  此 updateNewDropDown 函数将从您选择的服务器响应中获取值，并通过 PHP 为第二个选择菜单获取新数据，并使用提供的数据 AJAX 响应创建新选择菜单。

AJAX 教程：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) [http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

# iphone - 我想从我的 NSDictionary 填充我的 tableview

> ID：12585488
> 
> 赞同：0
> 
> 时间：2012-09-25T14:47:21.570
> 
> 标签：iphone, ios, json, uitableview

```
- (void)receiveData:(NSData *)data {
    self.office = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
    self.files = [office objectForKey:@"files"];
    [self.myTableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.files.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] init];

    NSDictionary *file = [self.files objectAtIndex:indexPath.row];
    cell.textLabel.text = [file objectAtIndex:1];  //here i want to get data from the array
    cell.textLabel.font = [UIFont boldSystemFontOfSize:15];
    cell.textLabel.numberOfLines = 1;
    return cell;
    NSLog(@"files:\n%@", file);
} 
```

我有一个 json 响应，我存储在 NSDictionary 办公室中，并且该 json 中的数组存储在 NSArray 文件中，现在我已将 files 数组提供给另一个 NSDictionary 文件，并根据存储在该文件中的数据，我希望该数据在我的表中行，但我的文件数组中没有任何“键”，只有该数组中的值，

所以我的问题是，我如何在我的文件字典中指出该值，我已在我想要的地方发表评论，请参阅该评论....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:53:06.143

您正在创建字典：

```
NSDictionary *file = [self.files objectAtIndex:indexPath.row]; 
```

`NSDictionary`用键索引，所以你必须用`objectForKey:`

```
cell.textLabel.text = [file objectForKey:@"fileName"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:10:27.980

我认为你要么误解了 NSDictionary 的工作原理，要么你在 self.files 中访问的对象实际上并不是 NSDictionaries。如果它们实际上是 NSDictionary 对象，则需要像 runmad 所说的那样访问它们

```
[file objectForKey:@"keyName"] 
```

如果没有键，那么您正在处理不同类型的对象，我们需要了解更多细节才能为您提供帮助。当您发布问题时，runmad 给了您正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:20:37.733

JSON 解析器 NSJSONSerialization 可能没有创建您认为拥有的 NSDictionary/NSArray 结构。您必须检查您的 JSON，例如使用[jsonlint.com](http://jsonlint.com)，然后使用 NSLog 查看您的字典/数组中放置的内容。还可以尝试一些 NSJSONReadingOptions 选项。

# objective-c - 用于标记句子的 Objective C 正则表达式

> ID：12585489
> 
> 赞同：0
> 
> 时间：2012-09-25T14:47:25.610
> 
> 标签：objective-c, regex

我有一些以下格式的文本：

```
{{st1:[[word1]]-[[word2]]s [[word1]] [[word3]]}} {{st2:[[word2]] [[word3]] [[word1]]-[[word4]]s.}} 
```

我想过滤掉`{{st[0-9]: }}`包含给定单词（签名）的句子（签名`[[word]]`）。因此，如果我正在搜索`[[word1]]`，输出应该是

```
{{st1:[[word1]]-[[word2]]s [[word1]] [[word3]]}} 
{{st2:[[word2]] [[word3]] [[word1]]-[[word4]]s.}} 
```

而如果我正在搜索`[[word4]]`，输出应该是

```
{{st2:[[word2]] [[word3]] [[word1]]-[[word4]]s.}} 
```

到目前为止，我已经编写了以下代码，但无法实现上述目标。请帮我纠正它。

```
NSString* aString = @"{{st1:[[word1]]-[[word2]]s [[word1]] [[word3]]}} {{st2:[[word2]] [[word3]] [[word1]]-[[word4]]s.}}";
NSString *regexString   = @"\\{\\{st[1-9]:.*(word).*\\}\\}";
for(NSString *match in [aString componentsMatchedByRegex:regexString])
    NSLog(@"%@", match); 
```

我正在使用 RegexKitLite ，但我愿意接受任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:58:36.787

您当前的正则表达式的问题是`.*`将匹配`}}`句子末尾的 ，您需要确保正则表达式的内部部分永远不会超过 a `}}`，这是一种方法：

```
\\{\\{st[1-9]:[^}]*(word)[^}]*\\}\\} 
```

如果单个右花括号是单词的一部分的有效字符，它会变得有点复杂，但你应该能够`[^}]*`用`(\}?[^}])*`or替换`(?:(?!\}\}).)*`。

# java - 如何测试 JSONObject 是否为空或不存在

> ID：12585492
> 
> 赞同：46
> 
> 时间：2012-09-25T14:47:33.020
> 
> 标签：java, android, json

我有一组`JSONObject`从服务器接收并对其进行操作的值。大多数时候我得到一个`JSONObject`带有值的值（比如说统计数据），有时，它返回一个`Error`带有代码和错误描述的对象。

我如何构造我的代码，以便它在返回错误时不会中断。我以为我可以做到这一点，但没有用。

```
public void processResult(JSONObject result) {
    try {
        if(result.getJSONObject(ERROR) != null ){
            JSONObject error = result.getJSONObject(ERROR);
            String error_detail = error.getString(DESCRIPTION);
            if(!error_detail.equals(null)) {
                //show error login here
            }
            finish();
        }
        else {
            JSONObject info = result.getJSONObject(STATISTICS);
            String stats = info.getString("production Stats"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-09-25T14:58:55.773

使用`.has(String)`和`.isNull(String)`

保守的用法可能是；

```
 if (record.has("my_object_name") && !record.isNull("my_object_name")) {
        // Do something with object.
      } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-10-25T17:50:42.533

可能有点晚（这是肯定的），但将其发布给未来的读者

您可以使用[`JSONObject optJSONObject (String name)`](https://developer.android.com/reference/org/json/JSONObject.html#optJSONObject(java.lang.String))不会抛出任何异常的

> 如果存在并且是 JSONObject，则返回按名称映射的值，否则返回 null。

所以你可以做

```
JSONObject obj = null;
if( (obj = result.optJSONObject("ERROR"))!=null ){
      // it's an error , now you can fetch the error object values from obj
} 
```

或者如果您只想测试无效性而不获取值，那么

```
if( result.optJSONObject("ERROR")!=null ){
    // error object found 
} 
```

有整个系列的[opt 函数](https://developer.android.com/reference/org/json/JSONObject.html)可以返回`null`，或者您也可以使用重载版本使它们返回任何预定义的值。例如

[`String optString (String name, String fallback)`](https://developer.android.com/reference/org/json/JSONObject.html#optString(java.lang.String,%20java.lang.String))

> 如果存在，则返回按名称映射的值，必要时强制它，如果不存在此类映射，则回退。

意思是，`coercing`它会尝试将值转换为字符串类型

* * *

@TheMonkeyMan 答案的修改版本，以消除冗余查找

```
public void processResult(JSONObject result) {
    JSONObject obj = null;
    if( (obj = result.optJSONObject("ERROR"))!=null ){
       //^^^^ either assign null or jsonobject to obj
      //  if not null then  found error object  , execute if body                              
        String error_detail = obj.optString("DESCRIPTION","Something went wrong");
        //either show error message from server or default string as "Something went wrong"
        finish(); // kill the current activity 
    }
    else if( (obj = result.optJSONObject("STATISTICS"))!=null ){
        String stats = obj.optString("Production Stats");
        //Do something
    }
    else
    {
        throw new Exception("Could not parse JSON Object!");
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-25T14:54:05.697

在 JSONObject 中，您可以使用“Has”方法来确定密钥。

我不知道这是否可行，但它看起来可信。

```
public void processResult(JSONObject result) {

    if(result.has("ERROR"))
    {
        JSONObject error = result.getJSONObject("ERROR")
        String error_detail = error.getString("DESCRIPTION");

        if(error_detail != null)
        {
            //Show Error Login
            finish();
        }
    }
    else if(result.has("STATISTICS"))
    {
        JSONObject info = result.getJSONObject("STATISTICS");
        String stats = info.getString("Production Stats");

        //Do something
    }
    else
    {
        throw new Exception("Could not parse JSON Object!");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-13T13:45:37.770

有时，使用 NULL 对象比使用 Java 的 null 值更方便，也更不模糊。

*   JSONObject.NULL.equals(null) 返回真。

    JSONObject.NULL.toString() 返回“null”。

例子：

System.out.println(test.get("地址").equals(null)); // 首选方式 System.out.println(test.getString("address").equals("null"));

来源——JSONObject oracle 文档

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-11T16:38:41.740

只是一个说明：

使用 EE8 json 规范，我可以进行异常安全的获取：

```
result.asJsonObject().getString("ERROR", null); 
```

但是，如果我想做一个检查，我可以这样做：

```
result.asJsonObject().get("ERROR").equals(JsonValue.NULL) 
```

# javascript - 为元素内的复选框创建标签

> ID：12585496
> 
> 赞同：4
> 
> 时间：2012-09-25T14:47:51.710
> 
> 标签：javascript, html, dom, checkbox

我尝试动态制作线条，问题是当我使用javascript动态添加带有标签的复选框时不起作用。但是，我默认使用 Html 创建的那个可以正常工作。

事实上，我希望我添加的图像（on.png / off.png）替换复选框。当我只使用 html（复选框 + 标签）时，代码可以工作，但现在我只想用 Javascript 创建元素，我可以使用标签但是当我单击它时它不起作用。

这是我所有的代码：

主.html

```
 <HTML>
 <HEAD>
<TITLE>  </TITLE>
<link rel="stylesheet" type="text/css" href="style.css" />
<SCRIPT language="javascript">
    function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        element1.id =  "id2" ;
        cell1.appendChild(element1);

        // Create label
        var label = document.createElement("label");
        label.for =  "id2" ;
        cell1.appendChild(label);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell3.appendChild(element2);

    }

    function deleteRow(tableID) {
        try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }

        }
        }catch(e) {
            alert(e);
        }
    }

</SCRIPT>
 </HEAD>
<BODY>
<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />

<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

<TABLE id="dataTable" width="350px" border="1">
    <TR>
        <TD><INPUT type="checkbox" name="chk"  id="id1" /> <label for="id1" > </label>   </TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" /> </TD>
    </TR>
  </TABLE>
</BODY>
</HTML> 
```

样式.css

```
 input[type=checkbox] {
  display:none;
}

 input[type=checkbox] + label
 {
   background: url(images/off.png) no-repeat;
   height: 64px;
   width: 64px;
   display:inline-block;
   padding: 0 0 0 0px;
 }

  input[type=checkbox]:checked + label
 {
    background: url(images/on.png) no-repeat;
    height: 64px;
    width: 64px;
    display:inline-block;
    padding: 0 0 0 0px;
  } 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T14:50:18.020

改变这个

```
label.for =  "id2" ; 
```

对此

```
label.htmlFor =  "id2" ; 
```

由于一些 JavaScript 实现不允许关键字/保留字作为对象属性，因此必须为该`for`属性制定解决方法，因此他们选择了`htmlFor`.

类似的情况发生了`.class`，这就是他们使用`.className`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:49:50.227

你的问题是第 17 行，`label.for = "id2" ;`应该是`label.htmlFor = "id2";`

# tex - Sweave 到 LaTeX“未定义的控制序列”错误

> ID：12585505
> 
> 赞同：4
> 
> 时间：2012-09-25T14:48:25.790
> 
> 标签：tex, sweave, rstudio

我试图在使用 RStudio 的 TeX 文档中包含一些 R 结果。我已经设法让 RStudio 生成，在我看来，一个很好的 tex 文件，但它无法编译 pdf。

我得到错误返回说！未定义的控制序列。' 这似乎是由于 str(data) 调用的第一行和显示显着性级别的行而返回的：

```
"! Undefined control sequence.
<argument> '
            data.frame':    1980 obs. of  5 variables:
l.39 'data.frame':  1980 obs. of  5 variables:

The control sequence at the end of the top line
of your error message was never \def'ed. If you have
misspelled it (e.g., `\hobx'), type `I' and the correct
spelling (e.g., `I\hbox'). Otherwise just continue,
and I'll forget about whatever was undefined."

"! Undefined control sequence. <argument> 
Signif. codes:  0 '
                              ***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
l.95 ...**' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

The control sequence at the end of the top line
of your error message was never \def'ed. If you have
misspelled it (e.g., `\hobx'), type `I' and the correct
spelling (e.g., `I\hbox'). Otherwise just continue,
and I'll forget about whatever was undefined." 
```

例如，只有摘要（数据）的文件可以正常工作

环顾其他邮件列表等，我发现这可能是因为 tex 找不到 Sweave 包，因此已将其复制到不同位置（与 Rnw 和 tex 文件相同的文件夹，以及路径中没有空格的目录）并尝试重新运行文件。似乎没有任何效果。

同样，这不起作用，但使用 summary(cars) 而不是 str(cars) 可以。这向我表明它与 ' 字符有关。

```
\documentclass [a4paper]{article}
\usepackage{Sweave} 
\title {Sweave Example 1}
\author {Friedrich Leisch}
\begin {document}
\maketitle
In this example we embed parts of the examples from the
\texttt {kruskal.test} help page into a \ LaTeX {} document :
<<>>=
data ( cars )
str(cars)
@
\end{document} 
```

（改编自 sweave 手册）关于我做错了什么的任何想法？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:00:16.257

将`[noae]`package 选项添加到您的`\usepackage{Sweave}`声明中。

# java - Eclipse Gradle STS 扩展：无法为对象堆保留足够的空间

> ID：12585506
> 
> 赞同：18
> 
> 时间：2012-09-25T14:48:29.953
> 
> 标签：java, eclipse, jvm, gradle, sts-springsourcetoolsuite

**当 Gradle STS 扩展在安装了 Gradle STS 扩展后启动 Eclipse 3.7 (Indigo) 后尝试执行我的项目的 gradle 构建脚本时，***偶尔我会收到以下错误，*****

 **```
Unable to start the daemon process. The exit value was: 1.
This problem might be caused by incorrect configuration of the daemon.
For example, an unrecognized jvm option is used.
Please refer to the user guide chapter on the daemon at http://gradle.org/docs/current/userguide/gradle_daemon.html
Please read below process output to find out more:
-----------------------
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.

Could not fetch model of type 'EclipseProject' using Gradle distribution 'http://services.gradle.org/distributions/gradle-1.0-bin.zip'. 
```

这是我的系统规格：

*   Windows 7 32 位
*   Eclipse 3.7 32 位
*   Java jdk1.7.0_07 32位

这是此插件的已知错误吗？关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-11-04T10:34:44.893

在 Eclipse 中，转到 Window、Preferences、Gradle、Arguments 并在对话框中添加 gradle jvmargs **-Xms128m -Xmx512m**：

![首选项对话框](../Images/5ec64f7da35c8d161092ce13004cb41d.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T15:34:24.390

听起来有时，您的系统无法保留足够的内存来启动 Gradle 守护程序。项目是否有`gradle.properties`包含内存设置 ( `org.gradle.jvmargs`)？或者，你有一个`gradle.properties`~/.gradle 吗？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-17T10:00:54.020

我在导入 Gradle 项目时遇到了同样的问题。（Windows 7 64 位，sts-3.2.0.RELEASE 32 位，Java jdk1.7.0_13 32 位）。

* * *

解决了在项目目录（=sts 工作区）中创建**gradle.properties文件，内容为：** **org.gradle.jvmargs=-Xms128m -Xmx512m**。

* * *

请注意，-Xmx=512m 是我可以在我的系统上使用的最大 JVM 内存大小。更大的 Xmx 内存大小会导致所描述的错误。**

# php - symfony2 原则 postConnect 事件从未触发

> ID：12585507
> 
> 赞同：2
> 
> 时间：2012-09-25T14:48:31.350
> 
> 标签：php, symfony, doctrine

我正在尝试在 symfony2 项目中将教义与 oracle 10g 数据库一起使用。

一切正常，但是当我尝试在表中插入带有日期列的行时，出现以下错误：

> [PDOException] SQLSTATE[HY000]：一般错误：1850 OCIStmtExecute：ORA-01850：ORA-01850：小时必须在 0 到 23 之间（ext\pdo_oci\oci_statement.c:148）

根据[How to use Doctrine OracleSessionInit listener with Symfony2?](https://stackoverflow.com/questions/8168161/how-to-use-doctrine-oraclesessioninit-listener-with-symfony2) 可以通过将 Doctrine\DBAL\Event\Listeners\OracleSessionInit 类添加到 Doctrine 中的事件管理器来修复此错误。

```
app/config/config.yml 

services:
    my.listener:
        class: Doctrine\DBAL\Event\Listeners\OracleSessionInit 
        tags:
            - { name: doctrine.event_listener, event: postConnect } 
```

我尝试了这个解决方案，但它对我不起作用。所以我通过我的控制器手动将侦听器添加到学说中的 eventManager ：

```
public function indexAction()
    {
        $product= new Product();
        $product->setCreationDate(new \DateTime());
        $this->getDoctrine()->getConnection()->getEventManager()->addEventSubscriber($this->get('my.listener'));
        $em->persist($product);
        $em->flush();
        return array();
    } 
```

这是可行的，但这并不是很优雅，我不想对我所有的控制器都这样做......

所以我的听众似乎工作正常。在我看来，要么 postConnect 事件永远不会被触发，要么我的 config.yml 错误并且监听器没有正确设置。

一些帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:50:34.407

谢谢m2mdas。我能够根据您的建议调试事件管理器，但我发现我的侦听器未列出。所以我再次检查了我的 config.yml，结果发现它的格式不正确（缺少 2 个空白字符）。

无论如何，现在一切正常，非常感谢您的帮助。

# objective-c - setNeedsDisplay:NO 有什么用吗？

> ID：12585508
> 
> 赞同：5
> 
> 时间：2012-09-25T14:48:32.543
> 
> 标签：objective-c, cocoa, nsview, setneedsdisplay

在 Cocoa 中，当我们想要重绘视图时，我们会向视图发送一条`setNeedsDisplay:`消息，告诉视图重绘自身，并带有 YES 参数。我想知道是否在任何情况下您想要发送 view `setNeedsDisplay:NO`，例如多线程环境，如果发送 view a `setNeedsDisplay:YES`，那么在 with 之后立即再次设置它`setNeedsDisplay:NO`会使视图重绘本身。如果没有理由调用`setNeedsDisplay:NO`，那么为什么要创建这样一个乏味的方法，他们可以在其中实现类似的东西`[view redrawView]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:52:24.800

`setNeedsDisplay:NO`如果您想丢弃以前调用`setNeedsDisplay:YES`的 . 例如，有时将所有子视图标记为需要显示然后运行算法来取消标记其中一些会更容易。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T16:01:41.530

您可能知道，每次通过正常事件循环时，显示更新都是自动的（如果需要）。如果有必要，您可以调用`setNeedsDisplay:`以强制在两者之间进行显示更新。

从以下文档`NSView`：

> **讨论**
> 每当用于绘制视图对象的数据或状态发生变化时，应该向视图发送 setNeedsDisplay: 消息。标记为需要显示的 NSView 对象在每次通过应用程序的事件循环时自动重新显示。（当然，在事件循环出现之前需要重新显示的视图对象可以立即发送适当的 display... 方法。）

~~此函数的布尔参数仅指定是否影响相关视图*的整个边界*，而不是某些属性“needsDisplay”设置为 true 或 false。因此，`setNeedsDisplay:`确实确实很像“redrawView”，只是使用了附加参数。~~

**编辑**

以上内容的灵感来自相同的文档：

> *flag*
> 如果是，则将接收者的*整个边界*标记为需要显示；如果否，则将其标记为不需要显示。

# android - Android - Mediarecorder 输出格式为 base64

> ID：12585511
> 
> 赞同：3
> 
> 时间：2012-09-25T14:48:47.270
> 
> 标签：android, mediarecorder

我正在android中开发录音机应用程序。我的目标是录制音频并将其发送到我的网络服务方法。录制音频的代码片段如下。

```
private MediaRecorder mRecorder = null;
private static String mFileName = Environment.getExternalStorageDirectory().getAbsolutePath() + "/audiorecordtest.3gp";

private void startRecording() {
     mRecorder = new MediaRecorder();
     mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
     mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
     mRecorder.setOutputFile(mFileName);
     mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
     try {
        mRecorder.prepare();
     } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
     }
     mRecorder.start();
}

private void stopRecording() {
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
} 
```

在上面的代码中，输出文件存储在**“mFileName”**路径中。现在我得到输出并将其存储到指定的“ExternalStorageDirectory”路径中。但我不想将输出文件存储到“ExternalStorageDirectory”中。我想将输出转换为 base64 字符串。谁能帮我做到这一点？

```
Objective:
    1) I don't want to store the output in local.
    2) Convert the output into base64 string. 
```

# web-applications - 使用 ant 任务在 tomcat 7 中取消部署会出现需要 POST 而不是 GET 的错误

> ID：12585517
> 
> 赞同：1
> 
> 时间：2012-09-25T14:49:02.127
> 
> 标签：web-applications, ant, tomcat7, undeploy

当我尝试使用 ant 任务在 tomcat 7.0.30 中取消部署 webapp 时，它给了我这样的消息

> FAIL - 尝试通过 GET 请求使用命令 /undeploy 但需要 POST

但我找不到这个问题的任何解决方案。

难道我的蚂蚁任务错了？还是tomcat配置？

我的蚂蚁任务是...

```
<path id="catalina-ant-classpath">
    <fileset dir="${tomcat.base.dir}/lib">
            <include name="catalina-ant.jar"/>
            <include name="tomcat-coyote.jar"/>
            <include name="tomcat-util.jar"/>
    </fileset>
    <fileset dir="${tomcat.base.dir}/bin">
    <include name="tomcat-juli.jar"/>
    </fileset>
</path>

<taskdef name="undeploy" classname="org.apache.catalina.ant.UndeployTask" classpathref="catalina-ant-classpath"/>
<target name="undeploy" description="undeploy from tomcat">
    <undeploy 
            url="http://localhost:8080/manager/html"
            username="admin"
            password="password"
            path="/mywebapp"
    />
</target> 
```

而我的 tomcat-users.xml 是......

```
<user username="admin" password="password" roles="manager-gui, manager-jmx, manager-status"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:40:49.247

尝试使用此网址而不是以“html”结尾的网址：

```
http://localhost:8080/manager/text 
```

您可能还需要在 tomcat-users.xml 中将这些角色添加到您的用户：

```
manager-script, admin-script 
```

# matlab - 在 MATLAB/Octave 中向量化 for 循环

> ID：12585525
> 
> 赞同：1
> 
> 时间：2012-09-25T14:49:21.603
> 
> 标签：matlab, octave

我的问题是：有没有办法在 MATLAB/Octave 中对这个操作进行矢量化？

```
y = %a (m x 1) vector, with every entry in [1, 10]
y2 = repmat(1 : 10, [m 1]);
for i = 1 : m
    y2(i, :) = (y2(i, :) == y(i));
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:04:22.617

`bsxfun`是扩展和矢量化计算的好方法（如果有好处，它将执行多线程计算）。

```
m = 10;

y = randperm(m);

y2 = bsxfun(@eq,y,(1:m)')'; 
```

# jquery - 我无法理解 jQuery 链接的工作原理

> ID：12585528
> 
> 赞同：1
> 
> 时间：2012-09-25T14:49:38.670
> 
> 标签：jquery, javascript, javascript-framework, unobtrusive-javascript

我无法理解 jQuery 链接是如何工作的。

```
jQuery("div").attr("id", "_id")
    .hide()
    .show(); 
```

我做了类似链接的事情，但我不确定它是否与 jQuery 使用的逻辑相同。

```
var fun = (function (parma) {
return function () {
    return {
        start: function () {
            console.log("start");
            return this;
        },

        mid: function () {
            console.log("mid");
            return this;
        },

        last: function () {
            console.log("last");
            return this;
        }
    }
} 
```

})();

```
// Working
fun().start()
    .mid()
    .last(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T14:54:17.007

如果函数的返回值是具有方法的对象，则可以立即调用该方法。就那么简单。

由于您正在返回`this`，因此您正在返回与调用前一个方法相同的对象。这意味着您正在返回一个具有所有相同方法的对象。

* * *

这样想：

```
var f = {
    foo: function() {
             console.log("foo");
             return b;
         }
};

var b = {
    bar: function() {
             console.log("bar");
             return f;
         } 
}; 
```

这里我们有两个对象。

*   该`f`对象有一个被调用的方法，该方法`foo`返回该`b`对象。
*   该`b`对象有一个被调用的方法，该方法`bar`返回该`f`对象。

因此，在调用 之后`foo`，我们可以调用`bar`，反之亦然。

```
f.foo().bar().foo().bar(); // etc 
```

但是因为`f`doesn't have`bar`和`b`doesn't have `foo`，我们永远不能两次调用同一个方法。

* * *

但是如果我们只有一个对象，它有两种方法，而且两种方法总是返回相同的原始对象呢？

```
var fb = {
    foo: function() {
             console.log("foo");
             return fb;
         },
    bar: function() {
             console.log("bar");
             return fb;
         }
}; 
```

现在我们总是返回一个同时具有`foo`和`bar`方法的对象，所以我们可以调用任何一种方法。

```
fb.foo().bar().bar().bar().foo().foo().bar(); 
```

所以现在唯一真正的区别是我们返回`fb`而不是`this`，但这并不重要，因为它们是同一个对象。上面的代码可以做到`return this;`，并且行为相同。

如果您想创建对象的多个实例，这很重要，但这***是面向对象技术的问题，而不是方法链接***。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:51:39.820

每个`return`函数上的 jQuery 对象。每个 jQuery 对象都会引用所有的函数，比如`show/hide`and 所以你可以简单地写

```
jQuery("#myDiv")         //returns a jQuery object 
    .attr("id", "_id")   //sets the ID and returns the jQuery object
    .hide()              //Hides the element with ID myDiv and returns jQuery object
    .show();             //show the element with ID myDiv and returns jQuery object 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T14:55:26.147

可以这样想：

```
var myLib = {
    foo: function() {
        alert("FOO!");
        return this;
    },
    bar: function() {
        alert("BAR!");
        return this;
    }
}

myLib.foo().bar(); 
```

jQuery 并非完全如此，但这是获得链接功能的一种方式。这个特定的不存储有关当前对象的信息。

jQuery 对象具有返回修改后的 jquery 对象的方法，允许您在其上调用更多方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T15:05:39.093

如果我没记错的话，jQuery 使用一种经典的方法在其原型中进行链接，但有一个例外，它`enhanced`的原型中还有一个构造函数`init`。这是一个简单的模式：

```
function myQuery(elem){
   return new myQuery.prototype.init(elem);
};

myQuery.prototype.init = function(elem) { // the constructor "enhanced"
    this.elem = elem;
};

// now copy the myQuery prototypes into init.prototype
myQuery.prototype.init.prototype = myQuery.prototype;

// here comes the chainable prototypes:

myQuery.prototype.start = function() {
    this.elem.className = 'start';
    return this; // returning the instance allows further chaining
};

myQuery.prototype.finish = function() {
    this.elem.className = 'finish';
    return this;
};

// now use it
myQuery(document.body).start().finish(); 
```

链接原型更有效，因为您可以为每个实例重用原型方法。jQuery 经常在一个文档中被初始化很多次，如果你每次都创建一个包含所有可链接方法的新对象，它会增加不必要的开销和可能的泄漏。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:51:16.933

几乎每个 jQuery 函数也会返回一个 jQuery 对象。因此，您可以在每个返回的对象上运行 jQuery 函数。

通过编写链式代码，您不仅可以节省时间，还可以提高性能。在不强制计算机寻找和使用特定节点的情况下，对返回的对象进行操作比启动另一个实例要高效得多。

# c# - 无顺序无重复的线程安全集合

> ID：12585531
> 
> 赞同：20
> 
> 时间：2012-09-25T14:49:50.727
> 
> 标签：c#, .net, collections, concurrency, thread-safety

我需要一个线程安全的集合来保存没有重复的项目。`ConcurrentBag<T>`允许非唯一项目并且`HashSet<T>`不是线程安全的。.NET Framework 4.5 中有这样的集合吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T13:05:56.507

这是我刚刚编写的用于执行此 ConcurrentSet 构造的一些代码：

```
public class ConcurrentSet<T> : IEnumerable<T>, ISet<T>, ICollection<T>
{
    private readonly ConcurrentDictionary<T, byte> _dictionary = new ConcurrentDictionary<T, byte>();

    /// <summary>
    /// Returns an enumerator that iterates through the collection.
    /// </summary>
    /// <returns>
    /// A <see cref="T:System.Collections.Generic.IEnumerator`1"/> that can be used to iterate through the collection.
    /// </returns>
    public IEnumerator<T> GetEnumerator()
    {
        return _dictionary.Keys.GetEnumerator();
    }

    /// <summary>
    /// Returns an enumerator that iterates through a collection.
    /// </summary>
    /// <returns>
    /// An <see cref="T:System.Collections.IEnumerator"/> object that can be used to iterate through the collection.
    /// </returns>
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    /// <summary>
    /// Removes the first occurrence of a specific object from the <see cref="T:System.Collections.Generic.ICollection`1"/>.
    /// </summary>
    /// <returns>
    /// true if <paramref name="item"/> was successfully removed from the <see cref="T:System.Collections.Generic.ICollection`1"/>; otherwise, false. This method also returns false if <paramref name="item"/> is not found in the original <see cref="T:System.Collections.Generic.ICollection`1"/>.
    /// </returns>
    /// <param name="item">The object to remove from the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.</exception>
    public bool Remove(T item)
    {
        return TryRemove(item);
    }

    /// <summary>
    /// Gets the number of elements in the set.
    /// </summary>
    public int Count
    {
        get { return _dictionary.Count; }
    }

    /// <summary>
    /// Gets a value indicating whether the <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.
    /// </summary>
    /// <returns>
    /// true if the <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only; otherwise, false.
    /// </returns>
    public bool IsReadOnly { get { return false; } }

    /// <summary>
    /// Gets a value that indicates if the set is empty.
    /// </summary>
    public bool IsEmpty
    {
        get { return _dictionary.IsEmpty; }
    }

    public ICollection<T> Values
    {
        get { return _dictionary.Keys; }
    }

    /// <summary>
    /// Adds an item to the <see cref="T:System.Collections.Generic.ICollection`1"/>.
    /// </summary>
    /// <param name="item">The object to add to the <see cref="T:System.Collections.Generic.ICollection`1"/>.</param><exception cref="T:System.NotSupportedException">The <see cref="T:System.Collections.Generic.ICollection`1"/> is read-only.</exception>
    void ICollection<T>.Add(T item)
    {
        if(!Add(item))
            throw new ArgumentException("Item already exists in set.");
    }

    /// <summary>
    /// Modifies the current set so that it contains all elements that are present in both the current set and in the specified collection.
    /// </summary>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public void UnionWith(IEnumerable<T> other)
    {
        foreach (var item in other)
            TryAdd(item);
    }

    /// <summary>
    /// Modifies the current set so that it contains only elements that are also in a specified collection.
    /// </summary>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public void IntersectWith(IEnumerable<T> other)
    {
        var enumerable = other as IList<T> ?? other.ToArray();
        foreach (var item in this)
        {
            if (!enumerable.Contains(item))
                TryRemove(item);
        }
    }

    /// <summary>
    /// Removes all elements in the specified collection from the current set.
    /// </summary>
    /// <param name="other">The collection of items to remove from the set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public void ExceptWith(IEnumerable<T> other)
    {
        foreach (var item in other)
            TryRemove(item);
    }

    /// <summary>
    /// Modifies the current set so that it contains only elements that are present either in the current set or in the specified collection, but not both. 
    /// </summary>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public void SymmetricExceptWith(IEnumerable<T> other)
    {
        throw new NotImplementedException();
    }

    /// <summary>
    /// Determines whether a set is a subset of a specified collection.
    /// </summary>
    /// <returns>
    /// true if the current set is a subset of <paramref name="other"/>; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool IsSubsetOf(IEnumerable<T> other)
    {
        var enumerable = other as IList<T> ?? other.ToArray();
        return this.AsParallel().All(enumerable.Contains);
    }

    /// <summary>
    /// Determines whether the current set is a superset of a specified collection.
    /// </summary>
    /// <returns>
    /// true if the current set is a superset of <paramref name="other"/>; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool IsSupersetOf(IEnumerable<T> other)
    {
        return other.AsParallel().All(Contains);
    }

    /// <summary>
    /// Determines whether the current set is a correct superset of a specified collection.
    /// </summary>
    /// <returns>
    /// true if the <see cref="T:System.Collections.Generic.ISet`1"/> object is a correct superset of <paramref name="other"/>; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set. </param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool IsProperSupersetOf(IEnumerable<T> other)
    {
        var enumerable = other as IList<T> ?? other.ToArray();
        return this.Count != enumerable.Count && IsSupersetOf(enumerable);
    }

    /// <summary>
    /// Determines whether the current set is a property (strict) subset of a specified collection.
    /// </summary>
    /// <returns>
    /// true if the current set is a correct subset of <paramref name="other"/>; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool IsProperSubsetOf(IEnumerable<T> other)
    {
        var enumerable = other as IList<T> ?? other.ToArray();
        return Count != enumerable.Count && IsSubsetOf(enumerable);
    }

    /// <summary>
    /// Determines whether the current set overlaps with the specified collection.
    /// </summary>
    /// <returns>
    /// true if the current set and <paramref name="other"/> share at least one common element; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool Overlaps(IEnumerable<T> other)
    {
        return other.AsParallel().Any(Contains);
    }

    /// <summary>
    /// Determines whether the current set and the specified collection contain the same elements.
    /// </summary>
    /// <returns>
    /// true if the current set is equal to <paramref name="other"/>; otherwise, false.
    /// </returns>
    /// <param name="other">The collection to compare to the current set.</param><exception cref="T:System.ArgumentNullException"><paramref name="other"/> is null.</exception>
    public bool SetEquals(IEnumerable<T> other)
    {
        var enumerable = other as IList<T> ?? other.ToArray();
        return Count == enumerable.Count && enumerable.AsParallel().All(Contains);
    }

    /// <summary>
    /// Adds an element to the current set and returns a value to indicate if the element was successfully added. 
    /// </summary>
    /// <returns>
    /// true if the element is added to the set; false if the element is already in the set.
    /// </returns>
    /// <param name="item">The element to add to the set.</param>
    public bool Add(T item)
    {
        return TryAdd(item);
    }

    public void Clear()
    {
        _dictionary.Clear();
    }

    public bool Contains(T item)
    {
        return _dictionary.ContainsKey(item);
    }

    /// <summary>
    /// Copies the elements of the <see cref="T:System.Collections.Generic.ICollection`1"/> to an <see cref="T:System.Array"/>, starting at a particular <see cref="T:System.Array"/> index.
    /// </summary>
    /// <param name="array">The one-dimensional <see cref="T:System.Array"/> that is the destination of the elements copied from <see cref="T:System.Collections.Generic.ICollection`1"/>. The <see cref="T:System.Array"/> must have zero-based indexing.</param><param name="arrayIndex">The zero-based index in <paramref name="array"/> at which copying begins.</param><exception cref="T:System.ArgumentNullException"><paramref name="array"/> is null.</exception><exception cref="T:System.ArgumentOutOfRangeException"><paramref name="arrayIndex"/> is less than 0.</exception><exception cref="T:System.ArgumentException"><paramref name="array"/> is multidimensional.-or-The number of elements in the source <see cref="T:System.Collections.Generic.ICollection`1"/> is greater than the available space from <paramref name="arrayIndex"/> to the end of the destination <paramref name="array"/>.-or-Type <paramref name="T"/> cannot be cast automatically to the type of the destination <paramref name="array"/>.</exception>
    public void CopyTo(T[] array, int arrayIndex)
    {
        Values.CopyTo(array, arrayIndex);
    }

    public T[] ToArray()
    {
        return _dictionary.Keys.ToArray();
    }

    public bool TryAdd(T item)
    {
        return _dictionary.TryAdd(item, default(byte));
    }

    public bool TryRemove(T item)
    {
        byte donotcare;
        return _dictionary.TryRemove(item, out donotcare);
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T14:52:09.433

我建议您使用 a`ConcurrentDictionary`并且只为每个条目使用一个虚拟值。就效率而言（具有所有这些虚拟值）很烦人，但我怀疑在大多数应用程序中这将是微不足道的。

您可能希望将其包装在您自己的`ConcurrentSet`实现中，这足以满足您的目的，这样您就不需要在大部分代码中看到抽象漏洞。

# visual-studio-2012 - VS2012 中的 C++ Native Multi-Targeting 可以用来定位 VS2005 吗？

> ID：12585536
> 
> 赞同：2
> 
> 时间：2012-09-25T14:50:06.170
> 
> 标签：visual-studio-2012, multi-targeting

我通过在 VS2012 中加载将我的 vcproj 文件转换为 vcxproj 文件。然后我加了

```
<TargetFrameworkVersion>v2.0</TargetFrameworkVersion> 
```

到标有“全局”的 PropertyGroup。我已尽可能关注[http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)为 v80 工具集添加 .props 和 .target 文件. 当我尝试构建时，出现以下错误：

```
error MSB4057: The target "Build" does not exist in the project. 
```

# java - 调用不同类的函数

> ID：12585540
> 
> 赞同：0
> 
> 时间：2012-09-23T00:11:17.043
> 
> 标签：java, list

我正在编写一个程序，我应该在调用它之前检查某个对象是否在列表中。我设置了`contains()`应该使用我在我的类上实现`equals()`的接口的方法的方法， 但它似乎没有调用它（我将打印语句放入检查）。我似乎无法弄清楚代码有什么问题，我用来浏览列表的类甚至使用了我在我的类中定义的正确方法，但由于某种原因它不会使用我实现的方法。`Comparable``Golfer``ArrayUnsortedList``toString()``Golfer``equals()`

```
//From "GolfApp.java"    
public class GolfApp{
ListInterface <Golfer>golfers = new ArraySortedList<Golfer> (20);
Golfer golfer;
//..*snip*..
if(this.golfers.contains(new Golfer(name,score)))
    System.out.println("The list already contains this golfer");
else{
    this.golfers.add(this.golfer = new Golfer(name,score));
    System.out.println("This golfer is already on the list");
}

//From "ArrayUnsortedList.java"
protected void find(T target){
    location = 0;
    found = false;

    while (location < numElements){
        if (list[location].equals(target))  //Where I think the problem is                       
        {
            found = true;
            return;
        }
        else 
            location++;
    }
 }

 public boolean contains(T element){
    find(element);
    return found;
 }

//From "Golfer.java"    
public class Golfer implements Comparable<Golfer>{
//..irrelavant code sniped..//
public boolean equals(Golfer golfer)
{
    String thisString = score + ":" +  name;  
    String otherString = golfer.getScore() + ":" + golfer.getName() ;
    System.out.println("Golfer.equals() has bee called");

    return thisString.equalsIgnoreCase(otherString);
}

public String toString()
{
    return (score + ":" + name);
} 
```

我的主要问题似乎是让 find 函数在部分中`ArrayUnsortedList`调用我的 equals 函数，但我不确定为什么，就像我说的那样，当我把它打印出来时，它可以与我完美实现的方法一起使用。`find()``List``toString()`

我几乎肯定问题与不调用我的方法`find()`中的函数有关。我尝试使用其他一些依赖于该方法的函数并得到了相同的结果。`ArraySortedList``equals()``find()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:56.880

您的`equals`方法应该采用 Object 参数，而不是 Golfer。该`equals(Golfer)`方法重载了`Comparable`'s`equals(Object)`方法，但没有实现它。它只是一个其他代码不知道的重载方法，因此不会被调用。

```
public boolean equals(Object obj)
{
    if(!(obj instanceof Golfer)) return false;

    Golfer golfer = (Golfer)obj;
    String thisString = score + ":" +  name;  
    String otherString = golfer.getScore() + ":" + golfer.getName() ;
    System.out.println("Golfer.equals() has bee called");

    return thisString.equalsIgnoreCase(otherString);
} 
```

# eclipse - 如何让 Eclipse 简介正确导出？

> ID：12585541
> 
> 赞同：0
> 
> 时间：2012-09-25T14:50:42.473
> 
> 标签：eclipse, eclipse-rcp

我有一个 RCP 应用程序，其欢迎页面在产品中的一个插件中实现 org.eclipse.ui.intro.config。此欢迎页面在从 IDE 运行时可以正常工作，但在从 PDE 导出运行时失败并出现文件未找到错误。java.io.FileNotFoundException: C:\app\introContent.xml（系统找不到指定的文件）

如果我将 introContent.xml 复制到应用程序目录，则错误将更改为所有引用的页面。

如何获取导出的 RCP 应用程序来运行介绍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:02:44.700

答案（与大多数导出问题一样）是确保您已在 build.properties 中选择要导出的项目。

# iphone - NSValue 到 NSNumber 转换崩溃

> ID：12585542
> 
> 赞同：0
> 
> 时间：2012-09-25T14:50:50.373
> 
> 标签：iphone, objective-c, ios, nsnumber, nsvalue

我想将 NSValue 转换为 NSNumber。这段代码有什么问题？

```
char value[4];
[myNSValue getValue:(void*)value];
NSNumber *number = [[NSNumber alloc] initWithBytes:(void*)value objCType:[myNSValue objCType]];
NSTimeInterval duration = [number intValue]; 
```

它会导致最后一行崩溃。这里会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T18:06:11.347

正如@ale0xB 在上面的评论中诊断的那样，`NSNumber` [实际上并没有提供自己](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)的`-initWithBytes:objCType:`方法实现；因此，当您调用该选择器时，您实际上得到了来自`NSNumber`的基类的实现`NSValue`。和之间没有任何区别——它们都调用相同的方法实现，释放它给出的并返回^(一个)通常是类型的新对象（一个未记录的子类，但不是）。`[[NSNumber alloc] initWithBytes:foo objCType:bar]``[[NSValue alloc] initWithBytes:foo objCType:bar]``self``NSConcreteValue``NSValue``NSNumber`

更清楚的是：

```
#import <assert.h>
#import <Foundation/Foundation.h>

int main()
{
    id x;

    x = [NSNumber numberWithInt:42];
    assert( [x isKindOfClass:[NSNumber class]] );
    assert( [x respondsToSelector:@selector(intValue)] );

    int fortytwo = 42;
    x = [[NSNumber alloc] initWithBytes:&fortytwo objCType:@encode(int)];
    assert(   [x isKindOfClass:[NSValue class]] );
    assert( ! [x isKindOfClass:[NSNumber class]] );  // yikes!
    assert( ! [x respondsToSelector:@selector(intValue)] );  // your particular problem
} 
```

但是，**类来救援！**Martin Häcker 编写了一个类别`NSNumber(CreatingFromArbitraryTypes)`，可以根据需要进行调整。[在此处](http://code.google.com/p/uispec/source/browse/trunk/src/utils/NSNumberCreator.m?r=2)查看公共域源代码。²基本思想是对每种可能的类型编码进行特殊处理：

*   如果你想编码一个`"i"`, 然后派发到`-numberWithInt:`;
*   如果你想编码一个`"f"`, 然后派发到`-numberWithFloat:`;

等等。这很乏味；但是一旦您编写了一次代码，您就可以从那时起使用该类别并简单地调用`[NSNumber numberWithValue:myNSValue]`.

（¹ - 或多或少。我想说，*在这种情况下没有显着差异。）*

（² - 该代码有几个错误，尤其是在以后的修订版中。请参阅[我的补丁here](http://code.google.com/p/uispec/issues/detail?id=7)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:21:50.467

请阅读我上面的评论以获得进一步的解释。

要实现你想要的，只需用你的 (char *) 初始化一个 NSString，然后调用 NSString 的 intValue。-*假设你知道类型，如果不看下面的评论*-

干杯

# php - 伪代码 - 如何将图像调整为最大尺寸

> ID：12585543
> 
> 赞同：1
> 
> 时间：2012-09-25T14:50:57.537
> 
> 标签：php, image, imagemagick, pseudocode

快问这里。

我有一个尺寸为 $height 和 $width 的图像。我想要的最大尺寸是： $maxHeight = 200; $最大宽度 = 120;

如果 $height > $maxHeight || 如何调整图像大小 $宽度> $最大宽度？

（假设有一个函数 setSizeForImage($newHeight,$newWidth)）

（实际上在 php 中使用 imagemagick，但我不认为有什么特定的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:55:16.700

假设你想保持宽高比，

```
$scale = min(
            $maxWidth / $img_width,
            $maxHeight / $img_height
        );
if ($scale > 1) {
    $scale = 1;
}

$new_width = $img_width * $scale;
$new_height = $img_height * $scale;
setSizeForImage($new_height,$new_width); 
```

# android - 在 Android 中加载所有语言

> ID：12585547
> 
> 赞同：1
> 
> 时间：2012-09-25T14:51:13.357
> 
> 标签：android, string, resources, locale

我在 Android 应用程序中有几个语言文件：value/strings.xml、value-en/strings.xml、...等 可以将这些文件的内容加载到某些数组或其他内容中。例如，我想在运行时将默认文本字符串和英文字符串加载到 2 个不同的数组中。

谢谢

阿林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:09:24.493

创建一个这样的方法：

```
Resources getResourcesByLocale( Context context, String localeName ) {
    Resource res = context.getResources();
    Configuration conf = new Configuration(res.getConfiguration());
    conf.locale = new Locale(localeName);
    return new Resources(res.getAssets(), res.getDisplayMetrics(), conf);
} 
```

您可以获得您定义的任何语言环境的资源，例如：

```
Resources res_en = getResourcesByLocale(context, "en");
Resources res_de = getResourcesByLocale(context, "de");
Resources res_fr = getResourcesByLocale(context, "fr");

String some_name_en = res_en.getString(R.string.some_name);
String some_name_fr = res_fr.getString(R.string.some_name);
// etc... 
```

此外，如果您没有为某些语言环境定义字符串，则不需要注意异常，因为无论如何`res/values/*`都会加载默认值 (from )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T08:23:24.223

其实情况就是这样。想象一下我有这样的场景：一些中国人打开应用程序。他的手机设置为 ch locale。应用程序默认为 xx 作为语言，这意味着我有 2 个语言文件 values/strings.xml（例如默认为西班牙语）和另一种语言文件 values-en/strings.xml 为英语。默认对他来说没有意义，所以英语将是最适合他理解的，即使他不太懂。因此，在应用程序启动时，我打开语言设置（android 语言设置），除非他选择英语，否则任何选择都会将应用程序设置为西班牙语。我强迫他基本上用英语更改电话区域设置，只是为了使用我的应用程序。总的来说，android 的概念是错误的，因为我需要能够以我想要的任何语言查看应用程序，而无需更改设备语言。

* * *

我所做的： - 我在 values 文件夹中创建了另一个 string_xx.xml 文件。现在，对于翻译字符串名称 = “txtTranslation”，我在 string_xx 文件中拥有“en_txtTranslation”键。R.java 将它们全部加载并在我的应用程序中，基于全局 var selectedLanguage = xx，我使用以下代码附加写入字符串：

```
public String translate(String text)
{
      String appLanguage = UtilsCentral.getUserLanguage(getApplicationContext());
      if (appLanguage != "")
      {
          return getString(getResources().getIdentifier(appLanguage + "_" + text, "string", this.getPackageName()));  
      }
      else 
      {
          return getString(getResources().getIdentifier(text, "string", this.getPackageName()));
      }
} 
```

实际上，在创建活动时，我需要使用 .text = tarnslate("txtTranslation") 设置所有视图

注意：UtilsCentral.getUserLanguage(getApplicationContext()) 返回应用语言（用户选择）

结论，还有更多无用的工作，但让我做我需要的，我认为是正常的。

# arrays - 如何将数组转换为元组？

> ID：12585549
> 
> 赞同：28
> 
> 时间：2012-09-25T14:51:16.527
> 
> 标签：arrays, scala, type-conversion, tuples

我有一个`Array[Any]`来自 Java JPA 的包含（在这种情况下是两个，但考虑任何少量）不同类型的东西。我想将这些表示为元组。

我有一些快速而肮脏的转换代码，想知道如何改进它，也许可以使其更通用。

```
val pair = query.getSingleOrNone // returns Option[Any] (actually a Java array)
pair collect { case array: Array[Any] =>
  (array(0).asInstanceOf[MyClass1], array(1).asInstanceOf[MyClass2]) } 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-25T14:58:42.690

这个怎么样？

```
val pair = query.getSingleOrNone
pair collect { case Array(x: MyClass1, y: MyClass2, _*) => (x,y) }
// result would be Option[(MyClass1, MyClass2)] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-11-23T23:39:22.033

使用`map { case Array(f1,f2) => (f1,f2) }`.

这是一个例子：

```
Array( "CA:California", "WA:Washington", "OR:Oregon").
  map(s => s.split(":")).
  map { case Array(f1,f2) => (f1,f2)} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-23T14:22:14.943

我的解决方案如下：

```
val loginValues = line.split(",")  // return an Array

val (ip, date, action, username) = (loginValues(0), loginValues(1).toLong, loginValues(2), loginValues(3)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-12-02T07:13:43.373

您可以使用 Tuple.fromArray。适用于 Scala 3.0.2，尚未检查早期版本。

```
scala> val a = Array("a", "b")
val a: Array[String] = Array(a, b)

scala> Tuple.fromArray(a)                                                        
val res1: Tuple = (a,b) 
```

# sql - SQL Server 2008，如何检查数据库中是否存在多条记录？

> ID：12585550
> 
> 赞同：2
> 
> 时间：2012-09-25T14:51:16.370
> 
> 标签：sql, sql-server, sql-server-2008, duplicates

我有 3 张桌子：

*   食谱：
    *   身份证，姓名
*   成分：
    *   身份证，姓名
*   配方成分：
    *   id、recipeId、componentId、数量

每次，客户创建一个新配方时，我都需要检查`recipeingredient`表格以验证该配方是否存在。如果`ingredientId`和`quantity`完全相同，我会告诉客户配方已经存在。由于我需要检查多行，因此需要帮助来编写此查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:54:12.077

了解您的成分和数量后，您可以执行以下操作：

```
select recipeId as ExistingRecipeID
from recipeingredient
where (ingredientId = 1 and quantity = 1)
    or (ingredientId = 8 and quantity = 1)
    or (ingredientId = 13 and quantity = 1)
group by recipeId
having count(*) = 3 --must match # of ingeredients in WHERE clause 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:03:22.290

我最初认为以下查询会找到具有完全相同成分的食谱对：

```
select ri1.recipeId, ri2.recipeId
from RecipeIngredient ri1 full outer join
     RecipeIngredient ri2
     on ri1.ingredientId = ri2.ingredientId and
        ri1.quantity = ri2.quantity and
        ri1.recipeId < ri2.recipeId
group by ri1.recipeId, ri2.recipeId
having count(ri1.id) = count(ri2.id) and   -- same number of ingredients
       count(ri1.id) = count(*) and        -- all r1 ingredients are present
       count(*) = count(ri2.id)            -- all r2 ingredents are present 
```

但是，此查询无法正确计算事物，因为不匹配项没有正确的 id 对。唉。

以下*确实*进行了正确的比较。它在连接之前计算每个配方中的成分，因此可以在所有匹配的行上比较这个值。

```
select ri1.recipeId, ri2.recipeId
from (select ri.*, COUNT(*) over (partition by recipeid) as numingredients
      from @RecipeIngredient ri
     ) ri1 full outer join
     (select ri.*, COUNT(*) over (partition by recipeid) as numingredients
      from @RecipeIngredient ri
     ) ri2
     on ri1.ingredientId = ri2.ingredientId and
        ri1.quantity = ri2.quantity and
        ri1.recipeId < ri2.recipeId
group by ri1.recipeId, ri2.recipeId
having max(ri1.numingredients) = max(ri2.numingredients) and
       max(ri1.numingredients) = count(*) 
```

该`having`子句保证每个食谱的成分数量相同，并且匹配成分的数量是总数。这一次，我在以下数据上进行了测试：

```
insert into @recipeingredient select 1, 1, 1
insert into @recipeingredient select 1, 2, 10
insert into @recipeingredient select 2, 1, 1
insert into @recipeingredient select 2, 2, 10
insert into @recipeingredient select 2, 3, 10
insert into @recipeingredient select 3, 1, 1
insert into @recipeingredient select 4, 1, 1
insert into @recipeingredient select 4, 3, 10
insert into @recipeingredient select 5, 1, 1
insert into @recipeingredient select 5, 2, 10 
```

如果你有一个新的配方，你可以修改这个查询，只在一个表（比如 ri1）中使用`on`子句上的附加条件来查找配方。

如果将成分放在临时表中，则可以用新表替换其中一个表，例如 ri1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:36:41.283

您可以尝试这样的方法来查找是否有重复项：

```
-- Setup test data
declare @recipeingredient table (
      id int not null primary key identity
    , recipeId int not null
    , ingredientId int not null
    , quantity int not null
)
insert into @recipeingredient select 1, 1, 1
insert into @recipeingredient select 1, 2, 10
insert into @recipeingredient select 2, 1, 1
insert into @recipeingredient select 2, 2, 10

-- Actual Query
if exists (
    select *
    from @recipeingredient old
        full outer join @recipeingredient new
            on old.recipeId != new.recipeId         -- Different recipes
            and old.ingredientId = new.ingredientId -- but same ingredients
            and old.quantity = new.quantity         -- and same quantities
    where old.id is null    -- Match not found
        or new.id is null   -- Match not found
)
begin
    select cast(0 as bit) as IsDuplicateRecipe
end
else begin
    select cast(1 as bit) as IsDuplicateRecipe
end 
```

由于这实际上只是在搜索重复项，因此您可能希望替换一个临时表或为“新”表[传递一个表变量](http://www.techrepublic.com/blog/datacenter/passing-table-valued-parameters-in-sql-server-2008/168)。这样您就不必在进行搜索之前插入新记录。您还可以插入基表，将整个事物包装在事务中并根据结果回滚。

# ios - 更改 Xcode 故事板中视图控制器的列表顺序

> ID：12585551
> 
> 赞同：55
> 
> 时间：2012-09-25T14:51:21.687
> 
> 标签：ios, xcode, xcode4, uistoryboard

我刚刚使用故事板开始我的第一个应用程序。我正在使用 Xcode 4.5 和 iOS 6 SDK。我想知道如何更改控制器在文档大纲（故事板左侧的面板）中列出的顺序。![在此处输入图像描述](../Images/14cc446cbc3b1f3bb8dacd2de6736379.png)

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-11-08T08:20:17.367

在最新的 Xcode 13 中，您可以手动重新排序情节提要场景。只需在左窗格中拖放即可。

旧答案

在**Xcode 11**中，您只需打开故事板 XML 并将特定的“场景”移动到“场景”标签下的适当位置。就是这样。该顺序将对应于文档大纲。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-25T19:17:44.010

在 Xcode 5 中，情节提要的“文档大纲”中列出的视图控制器/场景的顺序似乎是由情节提要 XML 文件中的 sceneID 属性值的字母数字排序决定的。

从 4.6 升级到 Xcode 5 后，文档大纲似乎以随机顺序列出了我的场景。我检查了情节提要 XML 文件（右键单击情节提要文件 -> 打开为 -> 源代码），但场景的顺序是正确的。经过进一步调查，我意识到 sceneID 属性值是问题所在。我找到了每个 sceneID 属性，并为该值添加了一个按字母数字递增的前缀。例如，对于应该出现在文档大纲中的第一个场景，我在其 sceneID 值前加上“1a”，第二个“1b”，第三个“1c”等等。在对我所有的场景都这样做之后，他们在文档大纲中有了正确的列表顺序。

我认为 sceneID 值可能仅用于唯一标识/排序目的，因此希望更改它们不会导致其他意外问题。但是我仍然可以毫无问题地使用 Interface Builder 中的情节提要，并且我的应用程序似乎可以正常工作。因此，如果这个问题和我一样让您感到恼火，您可能会考虑这种解决方法，直到 Apple 为我们提供适当的解决方案……请务必先进行备份！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-12T11:46:16.620

在 Document Outline 中，拖动橙色的视图控制器图标。执行此操作时，您将看到蓝色的水平插入点出现在灰色框之间。放手，视图控制器的整个灰色组框将重新定位。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-16T00:20:06.427

至少对于 Xcode 4.6 ，场景按照它们存储在情节提要 xml 中的顺序排列。

因此，您可以使用文本编辑器打开它并根据自己的喜好重新排列标签，然后启动 Xcode。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-03T07:06:35.337

我不确定它是否对你仍然有意义。从 xcode 6.1 开始，您可以右键单击情节提要文件，选择“打开为...”->“源代码”并更改视图控制器重新排列部分顺序的顺序。由于未知原因，我无法通过拖放视图控制器图标来移动它们，所以这是唯一适合我的方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-22T14:20:14.460

对于 Xcode 5.1.1，您必须更改 tag 的顺序`segue`。打开`storyboard`为`source code`（右键单击-> 打开为-> 源代码）

```
<segue destination="Bdn-Z8-Ql8" kind="relationship" relationship="viewControllers" id="0DS-1d-02F"/>
<segue destination="KY3-Z9-s1u" kind="relationship" relationship="viewControllers" id="u45-Ly-JkB"/>
<segue destination="k72-nP-MyV" kind="relationship" relationship="viewControllers" id="TAj-be-l8p"/>
<segue destination="gcA-x5-8Iw" kind="relationship" relationship="viewControllers" id="B7T-js-1Vs"/> 
```

更改上述行的顺序将更改 ViewControllers 的顺序

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T15:00:56.473

似乎视图控制器属于标签栏控制器，因此按钮的顺序决定了顺序而不是视图控制器在屏幕上的位置。您应该能够拖放按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-22T03:16:40.477

只需在您的第一个视图控制器屏幕中拖放底部的图标即可。Xcode 11.6

# php - 如何使用 PHP 将图像从一个页面发送到另一个页面

> ID：12585554
> 
> 赞同：2
> 
> 时间：2012-09-25T14:51:30.517
> 
> 标签：php, image, photo, photos

我有一个正在开发的项目，它关于（图形密码）它是一个身份验证安全系统（基于 Web），它要求用户通过输入他的信息来注册，例如（名字..姓氏..等）和这些信息将有一组图像，每个图像下面都有一个数字，因此用户将像往常一样输入他的信息，并且将是一个额外的字段（图像编号）用户写下他的图像编号想要，，（图像将在页面中预览为缩略图）。最后他点击提交，信息将使用（PHPMyAdmin）存储在数据库中，在数据库中，每个数据都有列加上图像编号列，它将只存储图像编号而不是图像，图像存储在名称为（1-20）的文件夹中，直到这里没问题..

***问题是：***当用户单击提交时，它应该打开另一个页面，并且它应该显示他之前从预览页面中选择的带有大尺寸图像的图像，以便稍后我可以对图像进行一些处理..

**我的问题是：**如何使用 PHP 语言将该图像发送到另一个页面。

我正在使用 DreamWeaver CS6，这是网站[http://www.4shared.com/photo/YcBeAhsz/Capture.html](http://www.4shared.com/photo/YcBeAhsz/Capture.html)的照片？

代码在这里：[http](http://www.4shared.com/file/unOI9Ejs/registeration_page.html) ://www.4shared.com/file/unOI9Ejs/registeration_page.html ？

我希望我的问题很清楚，我希望我能得到一些答案..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:10:25.423

在不知道您使用的代码的情况下，这有点棘手。

您可以通过以下方式将获得的图像存储到 Web 服务器：

```
file_put_contents('image1.gif',file_get_contents('http://static.php.net/www.php.net/images/php.gif')); 
```

在下一页显示图像回来。

```
<?php
$user_picked_img_id = 1;
?>

<img src="image<?php echo $user_picked_img_id ?>.gif"/> 
```

让我知道这是否适合您正在尝试做的事情。

# .net - 我初始化为 New List(Of) 的对象的 NullReference 异常？

> ID：12585555
> 
> 赞同：0
> 
> 时间：2012-09-25T14:51:33.997
> 
> 标签：.net, vb.net, nullreferenceexception

有人可以解释为什么我获得一个初始化为 New List(Of) 的对象的 NullReference 异常吗？

```
Module Module1
  ' MAIN =================================    
  Sub Main()
    Console.Clear()
    Console.WriteLine("Creating Bar")
    Dim myBar As New Bar()
    Console.ReadLine()
  End Sub    
End Module

Class Foo
  Public Overridable Property Test As String

  Public Sub New()
    Me.Test = "hello"
  End Sub
End Class

Class Bar
  Inherits Foo
  Private _MyString As New List(Of String)

  Public Sub New()
    MyBase.New()
  End Sub

  Public Overrides Property Test As String
    Get
      Return MyBase.Test
    End Get
    Set(value As String)
      MyBase.Test = value
      ' NULL REFERENCE EXCEPTION ???????!!!!!!!!!!!
      Console.WriteLine("{0}, and _MyString.Count = {1}", MyBase.Test, Me._MyString.Count)
    End Set
  End Property
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:54:04.863

`Foo.New()`在`Bar()`.

的`New`部分`As New List(Of String)`实际上是`Bar.New()`构造函数的一部分，它在`MyBase.New()`.

# ios - 从表中查找空值并将其替换为空格 - sqlite

> ID：12585560
> 
> 赞同：1
> 
> 时间：2012-09-25T14:51:50.053
> 
> 标签：ios, sqlite, replace, find

我有 sqlite 数据库。

在某些列中，我有空值。

我想用空格替换空值..

对此有任何疑问吗？

请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:54:24.000

使用[`IFNULL`](http://www.sqlite.org/lang_corefunc.html#ifnull). 在查询中：

```
SELECT IFNULL(mycolumn, ' ') FROM mytable 
```

或者更改表中的数据：

```
UPDATE mytable SET mycolumn = IFNULL(mycolumn, ' ') 
```

或者：

```
UPDATE mytable SET mycolumn = ' ' WHERE mycolumn IS NULL 
```

# android - 我可以以编程方式备份 联系人等数据吗？

> ID：12585561
> 
> 赞同：-2
> 
> 时间：2012-09-25T14:51:50.670
> 
> 标签：android

我正在设计一个防盗应用程序，我想实现一个远程备份功能，可以将简单而重要的数据（例如联系人）从丢失的手机转移到另一部手机或通过电子邮件。这可能吗？确实需要一些意见。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:05.480

我不明白你为什么不能。为要保存的属性创建一个带有一堆字符串的“myContacts”类。创建一个 myContacts 数组。查询所有联系人以使用该值填充您的 myContacts 数组。从那里将其吐出到 xml、json、电子邮件或其他任何内容中。

然后要恢复，您可以使用联系人提供程序。[http://developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html)有关于如何做到这一点的详细信息。

# c# - 静态与公共 C#

> ID：12585562
> 
> 赞同：2
> 
> 时间：2012-09-25T14:51:55.103
> 
> 标签：c#, static, instantiation

我知道在 SO 上已经多次回答了这个问题，但我仍然不明白实例化一个类究竟意味着什么。我读[了这篇](http://www.codeproject.com/Articles/15269/Static-Keyword-Demystified)文章，它确实帮助了我的理解。

我知道静态类 like`Console`不能与`new`表达式 like一起使用，`Console c = new Console()`因为该类中没有任何实例变量。我也知道静态类提供了“通用”方法，并且通常用于`Math`函数。我知道，一旦您像现在这样实例化一个类，`Double d = new Double();`就可以访问该类内部的任何方法`Double`。

我知道这些事实，但我觉得我并不真正理解它们的真正含义。有人可以举一个例子说明静态类是绝对必要的，以及创建一个类的实例是绝对必要的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T14:55:40.400

把一个类想象成一组蓝图。实例化一个类就像获取蓝图并构建项目。当工程师设计汽车时，他会提出设计方案。那将是类。汽车设计完成后，将计划交给要建造的装配线。每辆下线的汽车都是该设计的一个实例。

当汽车还只是一个设计时，你真的不能用它做任何事情。如果没有车，你就不能打开它的门。一旦你有了汽车的实例，你就可以操纵它。您可以打开门，启动引擎等。类似的类也是如此`Double`。拥有实例后，您可以对其进行操作。

像 一样的静态类`Console`是没有实例的类。它们更像是一种对有用的相关功能进行分组的方式。在 的情况下`Console`，该功能用于与命令行交互。`Math`用于对数学相关的代码进行分组。`Configuration`用于读取/操作配置文件。这些东西都不需要你创造任何独特的东西来让它们工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:55:45.873

公共类必须在应用程序中由另一个类调用，例如这可能是一个数据访问类（由业务层调用）。

静态类不一定需要创建实例，例如跟踪或日志记录类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:31:43.317

考虑静态的一个（可能已经结束）简化示例如下：

如果你有 Dog 类；你可以实例化类来创建 Dog Poodle = new Dog(); 和狗拉布拉多=新狗（）；如果 Dog 类有一个变量 hairColor，那么对于 Poodle 和 Labrador，hairColor 可能会有所不同。这两个不同的实例是分开的。

但是，如果您向 Dog 添加了一个名为 numberOfDogs 的静态变量，并在每次实例化新 Dog 时递增该变量（例如，您可以在构造函数中这样做），那么该变量将计算 Dog 的总数，并且将是无论您检查的是哪个 Dog 实例，都是相同的数字。根据您的使用方式，这很有用（也很危险）。

# java - 如何在远程 Linux 服务器上的现有 jar 中编辑 application.properties 或 application.yml 文件的内容

> ID：12585567
> 
> 赞同：33
> 
> 时间：2012-09-25T14:52:08.607
> 
> 标签：java, jar

如何`application.properties`在远程 Linux 服务器上的现有 jar 文件中编辑属性文件（如 ）。

想象一下 jar 位于`/home/user/my-spring-boot.jar`，我喜欢将用户名更改为`application.propertires`from

```
username=foo 
```

到

```
username=bar 
```

如何打开文件并更改属性？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-25T14:55:46.023

`.jar`文件只是`.zip`具有不同扩展名的文件，可以`vim`直接编辑 zip 文件及其内容！简单地说，使用文件导航器找到您的属性文件并进行更改`vim`。将使用您的编辑来维护 zip。`.jar``vim`

有关更多详细信息，请参见[此处](http://vim.wikia.com/wiki/Edit_Java_jar_and_other_files)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T14:53:43.533

可能的方法是将 jar 复制到 zip 文件中，提取，更改属性，压缩为 zip 并重命名为 jar

```
cp myJar.jar myJar.zip
unzip myJar.zip
vim myProperties.properties (doing the change here)
zip allMyFiles into myJar.zip
cp myJar.zip myModifiedJar.jar 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-03T16:06:35.553

更改现有的 JAR 工件不是一个好主意。相反，Spring Boot 允许您以多种方式轻松地使用外部值覆盖捆绑的属性。

例如，您可以`application.properties`在 JAR 旁边放置一个文件，其中包含您想要覆盖的值。您甚至不需要将整个属性文件复制到那里，只需要复制您想要更改的属性，因为它仍然会退回到捆绑的默认值。

详细信息记录在这里：

[https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T14:58:48.003

您可以这样做`emacs`（在复制文件进行备份之后）：

```
$ cp /home/user/bigExecutableJar.jar /home/user/bigExecutableJar.jar.bak 
$ emacs /home/user/bigExecutableJar.jar 
```

*   如果文件很大，它会询问您是否真的要打开文件。
*   然后，您可以在列出 jar 中所有文件的缓冲区中搜索要修改的文件；如果需要，请使用`C-s`进行搜索。
*   通过选择文件打开文件，然后按`RET`。
*   进行更改，并使用`C-x C-s`.
*   最后用 . 关闭 Emacs `C-x C-c`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T14:57:58.283

使用 emacs 编辑 jar 文件上的内容

```
emacs jarfile 
```

打开jar后，您可以浏览文件夹和文件。搜索 jdbc.properties 并对其进行编辑。然后使用 cx cs 保存更改。

注意：必须安装zip和unzip

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-20T06:53:55.653

我发现Java（或者更具体地说可能是Spring Boot）对JAR中文件的顺序很挑剔（引入了循环库依赖：“应用程序上下文中一些bean的依赖形成了一个循环”）。因此，需要一种保持顺序的方法。

解压缩原始 JAR并在生成的目录树`1.jar`中`unzip 1.jar`进行更改。`2.jar`然后使用原始文件`1.jar`作为参考，在保留文件顺序的同时生成一个新存档。

```
## -r = --recurse-paths
## -Z = --compression-method
zip -r -Z store 2.jar $(unzip -l 1.jar |tr -s ' ' |cut -d' ' -f5 |grep -v /$ )
zip -r -Z store 2.jar $(unzip -l 1.jar |tr -s ' ' |cut -d' ' -f5 |grep    /$ ) 
```

这会将目录放在文件*之后*，这很奇怪，但我发现这是唯一可行的方法（关于循环依赖问题）。这两行可以合并为一个调用`zip`，但为了整洁，我在这里将它们分开。

为了使订单保存工作，重要的是新的档案`2.jar`要重新创建（不存在）。

Java 要求在不进一步压缩的情况下归档嵌套的 JAR 文件。完成此操作的最简单方法是使用`-Z store`写入新存档的所有文件。这可能会导致新存档大于原始存档。

您可以使用以下内容查看存档的内部顺序（插入您最喜欢的图形差异实用程序）

```
diff <(unzip -t 1.jar) <(unzip -t 2.jar) 
```

在 Ubuntu 18.04 上测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T14:56:36.247

您可以`jar`使用该`jar xf bigExecutableJar.jar`命令解压缩档案。如果可以的话，我建议安装`atool`，因为它提供了一个更好的命令行来打包/解包档案。

除非您知道如何处理`vi`，否则请`nano`用作编辑器。一些系统还`mc`安装了一个基于控制台的文件浏览器，它有一个内置的编辑器。

更改文件后，您可以使用`jar cf bigExecutableJar-new.jar -C .`（或`atool --add`）再次打包存档

如果您真的想要/需要使用`jar`，我建议您先在新目录中尝试该命令，因为它有时不会像您预期的那样运行。**切勿在原始文件上使用它！**

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-01-23T11:34:10.397

```
sed -i "s/\(customAuthHeaderName=\).*\$/\1${customAuthHeaderName}/" configuration.properties

sed -i "s/\(logoutPage=\).*\$/\1${logoutPage}/" configuration.properties 
```

第二个`customAuthHeaderName`值来自属性文件

# python - Bentley-McIlroy 3 路分区

> ID：12585572
> 
> 赞同：1
> 
> 时间：2012-09-25T14:52:31.557
> 
> 标签：python, algorithm, sorting, partitioning, quicksort

以下是`Hoare`我编写的分区算法，用于根据给定的枢轴对数组进行分区（在这种情况下，它是数组的第一个元素，一个相当糟糕的选择！）。但是，`Bentley-McIlroy 3-way partitioning`http [://www.sorting-algorithms.com/static/QuicksortIsOptimal.pdf](http://www.sorting-algorithms.com/static/QuicksortIsOptimal.pdf)声称当键数相等时可以提供更好的性能。谁能简要解释第 9 页上的代码实现了什么，以及为什么它比`Hoare`算法执行得更好？还有一个问题，分区基于 和 放置`<`元素。如果多次出现的元素不是枢轴怎么办？`=``>`

```
def hoare(arr,start,end):
     pivot = arr[start]
     i,j = start,end
     while i < j:
        while i < j and arr[i] <= pivot:
            i += 1
        while j >= i and arr[j] > pivot:
            j -= 1
        if i < j:
            arr[i],arr[j] = arr[j],arr[i]
     arr[start],arr[j] = arr[j],arr[start]
     return j 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:30:00.973

我发现可以根据 N. Lumoto 的想法来实现 3-way partition，这更容易一些。（正如 Jon Bentley 在他的《Programming Pearls》一书中提到的，Lumoto 的方法很简单）。

这个想法是在扫描期间保持不变，即在任何时候小于枢轴的元素都放在最左边的部分，而等于枢轴的元素在该部分的旁边，大于的元素枢轴放在最右边。剩下的部分是那些元素还没有被检查过。

这些部分以`i`、`k`和为界`j`。当我们检查一个元素时，如果它等于pivot，我们就前进到下一个，如果它小于pivot，我们可以将它与'equal'部分的第一个交换，这样不变量可以是恢复。否则，我们需要继续与更大部分前面的最后一个交换它。

```
/*
 * Another 3-way partition ternary quick sort based on N. Lomuto's method.
 *   Invariant: ... less ... | ... equal ... | ... ? ... | greater |
 *                           i               k           j
 */
void qsort3(Key* xs, int l, int u) {
    int i, j, k; Key pivot;
    if (l < u - 1) {
        i = l; j = u; pivot = xs[l];
        for (k = l + 1; k < j; ++k) {
            while (pivot < xs[k]) { --j; swap(xs[j], xs[k]); }
            if (xs[k] < pivot) { swap(xs[i], xs[k]); ++i; }
        }
        qsort3(xs, l, i);
        qsort3(xs, j, u);
    }
} 
```

我针对标准库中的 qsort API 用 100,000 个元素测试了这个程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:54:04.760

我认为第 9 页的代码在第 8 页的图表中得到了很好的解释：您首先进行分区，但还将等于枢轴的元素交换到向量的边缘，因此最终结果为：

```
[equals-left] [lesses] [greaters] [equals-right] 
```

然后将相等的元素交换回中心：

```
[lesses] [equals-left] [equals-right] [greaters] 
```

然后你递归排序`[lesses]`和`[greaters]`

Sedgwick 的假设是数据集中有许多重复的元素。在这种情况下，重复枢轴是很常见的，如果是这样，您可以通过在任何一个快速排序递归中不包括任何枢轴的重复来获得一些好处，以便总和的大小两个分区的大小将小于向量的大小，减去枢轴的重复次数（即使它只是单独的）。这减少了您需要递归的元素数量，从而使递归更快。

这样做的代价是每个元素进行一到两次额外比较，尽管它们都只是重复先前的比较，但成功条件不同。在比较复杂的情况下，您可能希望使用显式的三向比较函数，以便能够保存最后一个 < 比较的结果（在 Sedgwick 代码的 while 循环中）。如果不重复枢轴，那么这正是额外的成本：那些额外的比较。如果重复主元，则对于每个重复的主元元素，有一个或两个额外的交换和两个或一个额外的比较（所以三个额外的操作，如果交换和比较花费相同的时间），加上每个重复的主元元素的两个额外比较其他元素。

这值得吗？我持怀疑态度，但如果 Sedgwick 这么说，那么你应该听他的，而不是听我的。

# ios - 剪切图像的抗锯齿

> ID：12585576
> 
> 赞同：4
> 
> 时间：2012-09-25T14:52:40.637
> 
> 标签：ios, uiimage, antialiasing, uibezierpath

我一直在尝试在圆形路径中剪切图像。但是，我似乎无法让剪切路径抗锯齿。

我尝试了一些不同的东西，但似乎都没有。如何使剪切的图像具有抗锯齿功能？

```
UIImage*originalImage = [UIImage imageNamed:@"grandpa.png"];
int minWidth = originalImage.size.width;
bool isWidth = YES;
if(minWidth > originalImage.size.height){
        minWidth = originalImage.size.height;
        isWidth = NO;
}

UIBezierPath *path;
if(isWidth)
    path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, (originalImage.size.height - minWidth)/2, minWidth, minWidth)];
else
    path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake((originalImage.size.width - minWidth)/2, 0, minWidth, minWidth)];

UIGraphicsBeginImageContextWithOptions(originalImage.size, NO, 0);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetAllowsAntialiasing(context, true);
CGContextSetShouldAntialias(context, true);
[path addClip];
[originalImage drawAtPoint:CGPointZero];
UIImage *maskedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//This is based on the full size image
CGRect imageRect = CGRectMake(0, 0, maskedImage.size.width + 2, maskedImage.size.height + 2);
UIGraphicsBeginImageContext(imageRect.size);
[maskedImage drawInRect:CGRectMake(1,1,maskedImage.size.width,maskedImage.size.height)];
maskedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

![锯齿图像](../Images/ff55ecd8b34419e346c5402628f02e19.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T12:56:57.167

我遇到了这个问题，我在谷歌和调试上花了几个小时，但我终于想通了。

发生的事情是，当您将其设置`maskedImage`为时`imageView.image`，会进行一些调整大小，其中包括圆形剪裁（在图像上），结果很时髦。

一个小例子是，如果您`imageView`的边界为 100x100 并且`maskedImage`边界为 300x300，那么当`imageView.image`集合时`maskedImage`，将减少调整大小以适应图像。这种减小的尺寸不会更新圆形剪裁，因此您的结果似乎是锯齿状边缘。如果在添加圆形剪裁之前，您将其缩放`maskedImage`到接近 的大小，`imageView`那么您的圆形边缘将完全符合您的要求！

# c# - 将深度数据与先前存储的深度数据进行比较

> ID：12585578
> 
> 赞同：3
> 
> 时间：2012-09-25T14:52:54.377
> 
> 标签：c#, kinect, openni

我需要做的是存储某个动作的深度数据，然后比较玩家是否正在执行该动作。所以基本上我需要将当前玩家的深度数据与记录的深度数据进行比较，看看玩家与记录的姿势有多接近，同时考虑到一个小的误差范围（如衣服）。我不仅需要知道它们是否匹配，还需要知道哪个部分不匹配。

我想不出任何方法来仅通过比较数据来做到这一点，而且我能想到的用于比较 2 个深度图的每种方法对于实时应用程序来说要么太慢，要么无法为我提供足够的信息。有谁知道我该如何处理？

运动是一个人躺在地板上，所以用骨骼来比较关节的位置和旋转不是一个选择，当躺在地板上时，骨骼都是一团糟。但我仍然有球员的形状。

我知道 Kinect 不是为跟踪地板上的人而设计的，但我知道它可以做到，至少有 2 款 Xbox360 游戏可以做到这一点，The Biggest Loser Ultimate Workout 和 Your Shape Fitness Evolved 2012。例如： [http:// /www.youtube.com/watch?v=NQC2mgCKsto#t=8m00s](http://www.youtube.com/watch?v=NQC2mgCKsto#t=8m00s)

我正在使用 Kinect 和官方的 Windows SDK 1.5，但即使解决方案只是 OpenNi，我仍然可以使用它。

提前致谢。

# asp.net - Application_Error 在不同的线程上触发

> ID：12585579
> 
> 赞同：3
> 
> 时间：2012-09-25T14:52:58.227
> 
> 标签：asp.net, exception, iis, httpapplication

最近我们开始看到一个问题，即 Application_Error 事件处理程序（对于[HttpApplication.Error](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.error.aspx)）正在与处理请求的不同线程上被调用。

我们最近改变的事情：

*   32 位到 64 位
*   经典到集成管道模式

对于它的价值，这里有一些代码可能有助于解释这一点：
在一个代表性测试中，页面上显示的线程是 7，而电子邮件中的线程是 10。

```
//The application
public class MyApplication : HttpApplication
{
    protected virtual void Application_Error(ByVal sender As Object, ByVal e As EventArgs)
    {
        var threadId = System.Threading.Thread.Current.ManagedThreadId;
        SendEmail("There was an error on threadId " + threadId.ToString());
    }

    private void SendEmail(string message)  
    { 
        //snip 
    }
}

//Some aspx page
<%
var threadId = System.Threading.Thread.Current.ManagedThreadId;
throw new Exception("This is a test.  ThreadId = " + threadID.ToString());
%> 
```

这给我们带来了问题，因为我们将身份验证信息存储在[Thread.CurrentPrincipal](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx)中，并且我们需要记录该信息，但有例外。

我怎样才能将它保持在同一个线程上，或者让 IIS 给我来自原始线程的 CurrentPrincipal？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:04:52.303

我假设您看到这种行为是因为 ASP.Net 使用不同的线程来执行 ASP.Net 页面并处理错误。

您应该能够通过使用来解决您的问题`HttpContext.Current.User`。但是，它们之间可能存在细微差别。您可以查看[这篇](http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx)文章，解释它们可以指向不同的对象（但基本上只有当你这样做时才会这样做）

# php - PHP - 获取真实 IP 地址或替代唯一标识

> ID：12585583
> 
> 赞同：0
> 
> 时间：2012-09-25T14:53:16.327
> 
> 标签：php

我试图从我的用户那里获取 IP 地址，但是当我在网上搜索这样做的方法时，我发现这是不可能的，因为 IP 很容易被伪造。

我不需要 IP，因为我正在创建一个不需要创建用户的非凡应用程序，但您仍然可以对某些对象进行投票。我不希望每个“用户”投多票。

现在，我如何获得真实的 IP 地址？甚至可能吗？

还是有另一种方法来保持选票相对“独特”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:55:35.693

IP 地址可以伪造，是的，但您也会遇到更普遍的代理和 NAT 问题，最终用户可能没有“真正的”公共 IP。对此您无能为力。

如果您希望它是唯一的，您将不得不找到一些不使用 IP 地址的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:55:08.030

可以使用 $_SERVER['REMOTE_ADDR']。不过，我不确定您所说的“真实 IP 地址”是什么意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:56:14.553

不可能; 你最好的选择是坚持`_SERVER['REMOTE_ADDR']`。虽然它可以被欺骗，但通常不是，特别是对于没有恶意的用户。唯一的另一种可能性是使用 cookie 来跟踪用户，但这些也很容易被欺骗/清除。您可能会看到为什么人们现在不使用 IP 地址进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:56:22.887

IP 欺骗（伪造）将始终是一个问题。这就是为什么您在外面看不到太多这些应用程序的原因。我会推荐使用[evercookies](http://samy.pl/evercookie/)。我认为这是您可以从无需注册的唯一标识用户中获得的最接近的结果。

# bash - 如何使用 bash 将带有 ext *.css.scss 的 mv 文件 git 到 *.scss？

> ID：12585584
> 
> 赞同：0
> 
> 时间：2012-09-25T14:53:16.367
> 
> 标签：bash

我遇到过几次，我对自动化它感到好奇。如果我想将一堆匹配模式的文件移动到稍微不同的模式，我该怎么做？

更具体地说，如果我想要`git mv`以下文件

```
fileA.css.scss
fileB.css.scss
... 
```

至

```
fileA.scss
fileA.scss
... 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:59:15.667

我会写这样的东西：

```
for file in *.css.scss ; do
    mv "$file" "${file%.css.scss}.scss"
done 
```

（注意：我不确定 的正确参数`git mv`，所以我只是演示了使用`mv`，我希望没关系）

有关符号的信息，请参阅[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)[中的 §3.5.3 Shell Parameter Expansion](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)。`${*parameter*%*word*}`[](http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion)

# visual-c++ - 从 VC++ 6 运行的应用程序因“未找到 kernelbase.dll 模块”而崩溃

> ID：12585588
> 
> 赞同：0
> 
> 时间：2012-09-25T14:53:24.150
> 
> 标签：visual-c++

这只发生在特定的机器上。

所以它必须是机器中的VS 6安装或机器本身。

如果我在 VC++6 中运行该应用程序，在某个操作后，我会出现“未找到 kernelbase.dll 模块”的崩溃。

但是在独立执行时，它运行良好。

有人经历过这种症状吗？我必须重新安装 VC++6 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:17:24.867

我通过重新组织系统路径解决了这个问题。通过系统路径中一些不必要的目录，我可以解决这个问题。希望这会帮助其他有类似问题的人。

# objective-c - ABPersonViewControllerDelegate shouldPerformDefaultActionForPerson 不工作

> ID：12585590
> 
> 赞同：1
> 
> 时间：2012-09-25T14:53:31.163
> 
> 标签：objective-c, ios, addressbook, abaddressbook

出于某种原因，我的 shouldPerformDefaultActionForPerson 函数永远不会在模拟器和设备中被调用。有人可以看看这个并告诉我我错过了什么吗？从我找到的所有示例中，我看不出我做错了什么。

这是我的标题：

```
#import <Foundation/Foundation.h>
#import <AddressBookUI/AddressBookUI.h>
#import <MessageUI/MessageUI.h>
#import "SWO.h"

@interface CustomABPersonViewController : ABPersonViewController
<MFMessageComposeViewControllerDelegate, ABPersonViewControllerDelegate>
{
    SWO *theSWO;
}

- (id)initWithSWO:(SWO *)aSWO;

@end 
```

这是我的实现文件：

```
#import "CustomABPersonViewController.h"
#import <MessageUI/MessageUI.h>
#import "SWO.h"

@implementation CustomABPersonViewController

- (id)initWithSWO:(SWO *)aSWO
{
    if (self = [super init])
    {
      //Various init code
    }
    return self;
}

- (BOOL)personViewController:(ABPersonViewController *)personView shouldPerformDefaultActionForPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)IdentifierForValue
{
    NSLog(@"In here!");
    return YES;
}

@end 
```

这是我在视图中调用的时间：

```
CustomABPersonViewController *view = [[CustomABPersonViewController alloc] initWithSWO:aSWO];
    view.personViewDelegate = self; 
    view.displayedPerson = aRecord;

    [self.navigationController setToolbarHidden:NO animated:NO];
    [self.navigationController pushViewController:view animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:26:19.313

许多默认操作在模拟器上不起作用。您必须在实际设备上试用它们。

# python - Python 相当于浏览器中的“复制链接位置”

> ID：12585591
> 
> 赞同：-2
> 
> 时间：2012-09-25T14:53:39.067
> 
> 标签：python, file, url

[www.pythonchallenge.com/pc/def/peak.html](http://www.pythonchallenge.com/pc/def/peak.html)的来源如下：

```
<html>
<head>
  <title>peak hell</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>
<center>
<img src="peakhell.jpg"/>
<br><font color="#c0c0ff">
pronounce it
<br>
<peakhell src="banner.p"/>
</body>
</html>

<!-- peak hell sounds familiar ? --> 
```

`www.pythonchallenge.com/pc/def/banner.p`我可以通过右键单击并在 Firefox 中`banner.p`选择来获取 url ( )。`copy link location`如何仅使用 Python 获取此 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:31.277

```
>>> urlparse.urljoin('http://www.pythonchallenge.com/pc/def/peak.html', 'banner.p')
'http://www.pythonchallenge.com/pc/def/banner.p' 
```

# algorithm - 如何证明前序树遍历算法终止？

> ID：12585594
> 
> 赞同：0
> 
> 时间：2012-09-25T14:53:50.827
> 
> 标签：algorithm

我认为**结构归纳是证明算法****终止**属性的常用方法，但通过**树**算法上的归纳来证明并不容易。现在我正在努力证明前序树遍历算法是可终止的：

```
preorder(node)
  if node == null then return
  visit(node)
  preorder(node.left) 
  preorder(node.right) 
```

我该怎么证明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:40:11.577

通过对树高的[强烈感应。](http://en.wikipedia.org/wiki/Mathematical_induction#Complete_induction)

## 基本情况

**该算法在高度为 0 的树上终止**，因为在高度为 0 的树中，我们有没有儿子的根。`visit(node)`在根上是一个步骤，访问`node.left`并`node.right`终止，因为它们都是`NULL`.

## 感应步骤

**假设前序遍历在所有高度为 的树上终止`0, 1, 2, .. n`，我们证明它在所有高度为 的树上终止`n+1`。**让我们看一下：

```
visit(node) 
```

终止，因为它是一个步骤。

```
preorder(node.left) 
```

终止，因为如果我们的树有高度，`n+1`则`node.left`最多是高度为 的树`n`，并且通过强归纳假设，前序遍历在高度小于或等于 的树上终止`n`。

```
preorder(node.right) 
```

一样`node.left`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:03:17.203

树不包含循环。如果有循环，算法将永远运行。因此，没有循环是证明的关键点。其他点是左或右受内存约束最终指向 null。

# iis - 什么是浏览器代理GTB7.4？

> ID：12585595
> 
> 赞同：1
> 
> 时间：2012-09-25T14:53:50.813
> 
> 标签：iis, logging, browser, agent

在我的 IIS 日志中，一些条目说 Mozilla/4.0(compatible...;+GTB7.4;...)。我是一个好奇/多疑的人，想知道“GTB7.4”是什么意思。没有关于 goog、bing 或 SO 的有用信息。它似乎是 MSIE 8.0 的一些附加组件。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:01:03.533

它是用户代理的一个片段，它告诉您特定浏览器安装了 Google Toolbar v. 7.4。从您发布的片段中-

> Mozilla/4.0（兼容

它可能是 Internet Explorer 8 或更低版本。

参考：

*   [用户代理 GTB 或 GTB5 是 Google 工具栏](http://gingerjoos.com/blog/technology/user-agent-gtb-or-gtb5-is-the-google-toolbar)
*   [从 HTTP_USER_AGENT 中删除或忽略 GTB（Google 工具栏）条目](http://forums.devshed.com/php-development-5/remove-or-ignore-gtb-google-toolbar-entry-from-the-http-782317.html)

# mysql - Symfony 防火墙无法访问 mysql 数据库

> ID：12585602
> 
> 赞同：0
> 
> 时间：2012-09-25T14:54:04.690
> 
> 标签：mysql, authentication, symfony, fosuserbundle

我在 login_check 操作中收到以下错误：

```
[2012-09-25 11:51:19] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] [] 
[2012-09-25 11:51:19] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest". [] [] 
[2012-09-25 11:51:19] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] [] 
[2012-09-25 11:51:19] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] [] 
[2012-09-25 11:51:19] security.INFO: Authentication request failed: SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/tmp/mysql.sock' (13) [] [] 
[2012-09-25 11:51:19] security.DEBUG: Redirecting to /user/login [] [] 
[2012-09-25 11:51:19] event.DEBUG: Listener "Symfony\Component\Security\Http\Firewall::onKernelRequest" stopped propagation of the event "kernel.request". [] [] 
```

这很奇怪，因为我已经在 /tmp/mysql.sock 和 /run/mysqld/mysqld.sock 之间创建了符号链接，并且我能够创建数据库、模式、加载装置等......

到底是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:00:27.727

像往常一样，stackoverflow 似乎是灵感的来源，我设法解决了这个问题。我需要以 root 而不是用户身份创建符号链接。这样做

```
sudo rm /tmp/mysql.sock
sudo ln -s /run/mysqld/mysqld.sock /tmp/mysql.sock 
```

成功了。

作为旁注：¿我如何在没有超级用户的情况下在 /tmp 上创建符号链接？

¿ 它不应该阻止我这样做吗？

# mysql - mysql性能基准

> ID：12585603
> 
> 赞同：0
> 
> 时间：2012-09-25T14:54:10.220
> 
> 标签：mysql, performance, amazon-web-services, profiling, amazon-rds

我正在考虑将我们的生产环境从自托管解决方案转移到亚马逊 AWS。我查看了不同的服务，并考虑使用[RDS](http://aws.amazon.com/rds/)替代我们的 mysql 实例。我们为 master 使用的硬件似乎比使用 rds（Quadruple Extra Large DB Instance）时所能获得的最好硬件要好。因为我不能简单地将我们的生产环境移动到 aws 并查看性能是否仍然足够好，所以我很想提前进行一些测试。

我考虑从我们当前的 master 创建一个完整的查询日志，配置 rds 实例并开始针对它重播完整的查询日志。实际上我什至不知道这种测试是否是一个好主意，但我想你会告诉我是否有更好的方法来确保在迁移到 rds 时 mysql 的性能不会急剧下降。

1.  是否有首选工具来重放完整的查询日志？
2.  在运行测试时我应该查看哪些指标
    *   CPU使用率？
    *   内存使用情况？
    *   磁盘使用情况？
    *   查询时间？
    *   还要别的吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:48:29.110

我建议不要重播查询日志——它几乎肯定不会给你想要的信息，而且会花费大量的精力。

首先，您需要准备好数据库，以便在插入、更新或删除数据时重放查询日志不会破坏约束，并且后续的“选择”查询将找到他们应该找到的记录。这在除了玩具数据库之外的任何东西上显然都不是微不足道的——仅仅备份并重放日志并不一定保证 DML 语句的顺序与生产中发生的顺序相匹配。这很可能会给您一种错误的舒适感——您的所有选择语句都会在几毫秒内返回，因为它们要查找的数据不存在！

其次，负载和性能测试很少通过重播生产中发生的事情来进行——这（通常）不能反映使您的系统崩溃的峰值条件。例如，大多数生产系统大部分时间都以 <50% 的容量愉快地运行，但在白天会经历峰值，当它们可能达到 80% 或更多的容量时——这就是你关心的，你的新环境能否处理峰值.

我的建议是使用[JMeter](http://jmeter.apache.org/)之类的工具来编写性能脚本（使用 JDBC 驱动程序直接写入数据库，或者如果您有 Web 应用程序，则通过前端）。您的性能脚本应该反映您从用户那里看到的行为，并进行参数化，以便它们不依赖于创建记录的顺序。

为自己设置一些性能目标（最好基于当前的生产水平，用一个乘数来保护您免受峰值影响），例如“100 个并发用户，没有超过 1 秒的查询”），并使用 JMeter 来模拟该负载。如果你第一次到达，恭喜 - 回家！如果没有，请查看性能计数器以了解瓶颈在哪里；看看你是否可以缓解这个瓶颈（或者调整你的查询，你很棒的本地硬件可能隐藏了一些性能问题）。典型的瓶颈是 CPU、RAM 和磁盘 I/O。

尝试不同的测试场景——“大量写入”、“大量读取”、“大量报告查询”，并将它们混合起来。

这个想法是了解系统上的瓶颈，看看你离这些瓶颈有多远，并了解你可以做些什么来缓解它们。一旦您知道这一点，您迁移的决定就会更加稳健。

# windows - 启用 TPM 的 Windows 脚本

> ID：12585606
> 
> 赞同：0
> 
> 时间：2012-09-25T14:54:15.787
> 
> 标签：windows, vbscript, tpm

我正在寻找使用 VBScript 编写一个脚本，该脚本将在 Windows 中启用 TPM 芯片和 BitLocker。一般来说，我是 VBScript 和 Windows 脚本的新手。我似乎遇到困难的一个部分是让我的脚本在重新启动后再次启动。

例如，要启用 TPM 芯片，需要重新启动才能打开芯片，然后需要第二次重新启动才能获得 TPM 芯片的所有权。需要第三次重新启动才能启用 BitLocker。

每次重新启动后如何让脚本再次启动以进入下一步？VBscript 是完成这项任务的最佳选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:32:16.317

像这样的东西应该工作：

```
rem Make sure you applied the appropriate policies before activating!

manage-bde -tpm -TurnOn
manage-bde -tpm -TakeOwnership PASSWORD
manage-bde -on C: -RecoveryPassword -SkipHardwareTest 
```

不过，必须首先在 BIOS 中启用 TPM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:53:07.623

Microsoft 已经提供了用于启用 BitLocker 的 VBScript。您可以在此处了解更多信息：

[使用 WMI 脚本启用 BitLocker](http://technet.microsoft.com/en-us/library/dd875527%28v=ws.10%29.aspx)

脚本本身可从此处获得：

[BitLocker 部署示例资源](http://archive.msdn.microsoft.com/bdedeploy/Release/ProjectReleases.aspx?ReleaseId=3205)

# function - Erlang - 未定义的函数

> ID：12585612
> 
> 赞同：5
> 
> 时间：2012-09-25T14:54:40.873
> 
> 标签：function, exception, erlang, export

我正在尝试执行一个非常简单的 Erlang 代码，但它不起作用。我已经尝试执行了一些没有问题的 hello world，但不是我自己的代码。

```
-module(server).
%% Exported Functions
-export([start/0, process_requests/1]).
%% API Functions
start() ->
    ServerPid = spawn(server, process_requests, [[]]),
    register(myserver, ServerPid).
process_requests(Clients) ->
    receive
         {client_join_req, Name, From} ->
         NewClients = [From|Clients],  %% TODO: COMPLETE
            broadcast(NewClients, {join, Name}),
            process_requests(NewClients);  %% TODO: COMPLETE
        {client_leave_req, Name, From} ->
            NewClients = lists:delete(From, Clients),  %% TODO: COMPLETE
            broadcast(Clients, {leave, Name}),  %% TODO: COMPLETE
            process_requests(NewClients);  %% TODO: COMPLETE
        {send, Name, Text} ->
            broadcast(Clients, {message, Name, Text}),  %% TODO: COMPLETE
            process_requests(Clients)
end.
%% Local Functions
broadcast(PeerList, Message) ->
    Fun = fun(Peer) -> Peer ! Message end,
    lists:map(Fun, PeerList). 
```

编译结果：

```
5> c(server).
    {ok,server}
6> server:start().       
** exception error: undefined function server:start/0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-22T02:14:52.083

您使用 编译代码`c/1`，但忘记使用`l/1`. 虽然 VM 确实会自动加载**新**模块（尚未加载到 VM 的模块），但它不会在每次编译到新梁时重新加载它们。

如果您在开发中经常这样做，您可能需要研究诸如[sync](https://github.com/rustyio/sync)之类的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T01:05:02.440

尝试使用 pwd() 检查。您是否在列出的服务器代码所在的目录中。似乎是路径问题。也可能发生在您的代码中：get_path() 有一个目录，另一个 server.beam 所在的目录没有启动功能。

# php - PHP 和 MYSQL：插入外键

> ID：12585614
> 
> 赞同：1
> 
> 时间：2012-09-25T14:54:52.303
> 
> 标签：php, mysql

我有两张表，IMAGES 和 CATEGORIES。

类别到图像是 1:M 关系（许多图像可以有 1 个类别）。

我想将图像从文件系统插入数据库，在进入的过程中动态分配外键类别。

我想用一个插入来实现这一点，但似乎我需要为每个类别的图像插入一个，如下所示：

```
 $allimages = scandir('./images/all_images/');
 $category1= scandir('./images/category1/');
 $category2= scandir('./images/category2/');

//CATEGORY 1: 
for($x=0; $x<count($category1); $x++)
{   
if(!is_dir(IMAGES_PATH . $category1[$x]))   
{  
  INSERT INTO images (imgid, imgname, categoryfk) VALUES ('$x', '$category1', 1)

//CATEGORY 2: 
for($x=0; $x<count($category2); $x++)
{   
if(!is_dir(IMAGES_PATH . $category2[$x]))   
{  
  INSERT INTO images (imgid, imgname, categoryfk) VALUES ('$x', '$category2', 2)

//CATEGORY 3: 
for($x=0; $x<count($allimages); $x++)
{   
if(!is_dir(IMAGES_PATH . $allimages[$x]))   
{  
  INSERT INTO images (imgid, imgname, categoryfk) VALUES ('$x', '$allimages', 3) 
```

这真的是我能做到这一点的唯一方法吗？我可以在单个插入和循环中实现此类别分配吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:14:48.047

此外，您还可以通过插入查找结果即时*查找*外键，例如查找“类别 1”的外键，然后插入引用此类别的新图像：

```
INSERT INTO Images(imgId, imgname, categoryFk)
   SELECT 9876, 'photo1.jpg', cat.categoryId
   FROM Category cat
   WHERE cat.categoryName = 'Category 1'; 
```

[SQLFiddle在这里](http://www.sqlfiddle.com/#!2/06403/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:59:26.723

不确定我是否正确理解您，但据我了解，应该这样做：

```
INSERT INTO images 
   (imgid, imgname, categoryfk) 
VALUES 
   ('$x', '$category1', 1),
   ('$x', '$category2', 2),
   ('$x', '$allimages', 3) 
```

# magento - 从 Magento 多商店安装迁移一个商店

> ID：12585622
> 
> 赞同：3
> 
> 时间：2012-09-25T14:55:16.863
> 
> 标签：magento, transfer, migrating

我需要从 Magento 多商店安装中导出/迁移一家商店。谷歌搜索，但没有找到仅迁移一家商店的快速解决方案。这里有人对如何做有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:44:00.877

我在我的本地主机上关注了这个：http: [//www.magentocommerce.com/wiki/groups/227/moving_magento_to_another_server](http://www.magentocommerce.com/wiki/groups/227/moving_magento_to_another_server)，删除了其他商店和客户，并对此进行了另一个（新）备份。这似乎是迄今为止最好的解决方案。

（感谢@Andrew 提出这个建议）

# database - sqlite 创建/删除大量表

> ID：12585626
> 
> 赞同：2
> 
> 时间：2012-09-25T14:55:30.420
> 
> 标签：database, transactions, sqlite

我在多线程进程中使用 sqlite。我将内存数据库和文件系统数据库连接在一起。我需要将表从内存数据库移动到文件系统数据库（每 5 秒移动 2 个表）。还要继续删除两个数据库中的旧表集（每 5 秒大约 5 个表）。我想知道获得最佳性能的最佳设计方法应该是什么？

在某些时候，我注意到数据库被锁定超过 2 秒。每个数据库中大约有 400 个表，但这些表的大小大多为 2 行。我对每个操作都使用开始立即事务类型。

# ruby-on-rails - has_many 通过一个额外的列

> ID：12585627
> 
> 赞同：2
> 
> 时间：2012-09-25T14:55:31.187
> 
> 标签：ruby-on-rails, ruby, associations, has-many-through

我正在解决一个我无法解决的问题。

我有以下内容：

组表：

```
create_table "groups", :force => true do |t|
  t.string   "name"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

团契表：

```
create_table "groupships", :force => true do |t|
  t.integer  "group_id"
  t.integer  "user_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
  t.boolean  "owner"
  t.text     "permission"
end 
```

组.rb：

```
class Group < ActiveRecord::Base
   belongs_to :user
   has_many :groupships
   has_many :groups, through: :groupships
end 
```

groupship.rb:

```
class Groupship < ActiveRecord::Base
   belongs_to :user
   belongs_to :group
end 
```

我想通过 groupship 查看用户是否是组的所有者以及用户具有哪些权限。这可能吗，还是我必须制作一个 group_perssions 表？

我在一个视图中尝试了这个：

```
<% @groups.each do |group| %>
   <div class="well well-small">
      <h3><%= group.name %></h3>
      Owner: <%= group.groupships.owner %> //True or false readout for development.
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:12:45.627

我认为您提供的 Groupship 课程示例可能略有错误。不应该吗。。

```
class Group < ActiveRecord::Base
  has_many :groupships
  has_many :users, through: :groupships
end 
```

一个组可以有很多用户，一个用户可以有很多组，对吗？

至于您给出的视图示例，您不能简单地调用`group.groupships.owner`，因为`group.groupships`它是一个集合，而所有者布尔值是单个 groupship 的属性。你可以这样做：

```
<% @groups.each do |group| %>
  <div class="well well-small">
    <h3><%= group.name %></h3>
    Owners:
    <%= group.groupships.each do |groupship| %>
      <%= groupship.user.name %>:
      <%= groupship.owner? %>
    <% end -%>
  </div>
<% end %> 
```

# iphone - iPhone：我可以有一个隐藏的 UITextField，其中的文本用小圆圈隐藏

> ID：12585630
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:55:36.157
> 
> 标签：iphone

> **可能重复：**
> [隐藏 uitextfield 密码](https://stackoverflow.com/questions/6578824/make-uitextfield-password-obscured)

我有一个接受密码的应用程序。在网络上，编辑框可以隐藏文本，只显示代表每个字母的小圆圈，因此其他人看不到密码。

有没有办法在 iPhone 上做到这一点？我查看了苹果文档 [https://www.google.com/search?q=UITextField&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a](https://www.google.com/search?q=UITextField&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

对于 UITextField，没有找到任何关于隐藏文本的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:12:11.700

安全复选框位于检查器的底部：

![在此处输入图像描述](../Images/12f7105a72d0e7f73081b516a9e38ff5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T14:59:26.963

试试这个：

```
textField.secureTextEntry = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:59:52.307

你可以使用

```
UITextField *textField;

textField.secureTextEntry = YES; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T15:00:47.610

如果您在 Xcode 中构建应用程序，您只需选择文本字段，然后在 Attributes Inspector 中选中“Secure”。

或在代码中：

```
[self.passwordTextField setSecureTextEntry:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:59:56.737

您正在寻找的是一个安全的文本字段。

```
textField.secureTextEntry = YES; 
```

# git - 列出已删除分支上的所有提交历史记录

> ID：12585631
> 
> 赞同：0
> 
> 时间：2012-09-25T14:55:37.147
> 
> 标签：git

几个月前我在我的项目中删除了一个远程分支，但现在我需要访问它:(

该分支已从我的本地计算机和远程 git 服务器中删除。

如何查看已删除分支上所有提交的列表，然后将其中一个提交签出（或合并）到我的本地计算机？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:02:29.570

如果分支已合并回原始分支，那么您仍然可以查看所有提交（但不一定作为单独的分支）。假设删除的分支没有被垃圾回收，您可以尝试使用`git reflog`查看分支的原始结帐然后克隆它：[http ://deekayen.net/recover-deleted-git-branch](http://deekayen.net/recover-deleted-git-branch)

# java - IOException：从 HDFS 读取多个文件时出现流关闭错误

> ID：12585638
> 
> 赞同：1
> 
> 时间：2012-09-25T14:55:45.763
> 
> 标签：java, io, hdfs

尝试从 HDFS 读取一些作业配置文件时遇到一个奇怪的错误。我正在尝试从文件中检索作业，然后循环读取它们的作业配置 XML 文件。

摘抄：

```
for(JobStatus status : statuses)
{
    JobID jobId = null;
    try
    {
        jobId = status.getJobID(); //TODO check the hash-code/equals implementation of JobID
        if(!jobIdsUnderObservation.contains(jobId))
        { //explore jobs if it's new
            RunningJob runningJob = jobClient.getJob(jobId);
            if(runningJob != null)
            {
                String jobFile = runningJob.getJobFile();
                FileSystem fs = FileSystem.get(conf);
                if(fs.exists(new Path(jobFile)))
                {
                    String sessionId = null;
                    InputStream is = fs.open(new Path(jobFile));
                    conf.addResource(is);
                    sessionId = conf.get("hive.session.id"); //this particular line breaks 
                    //from the second file onwards 
                    if(sessionId.equals(this.sessionId))
                    {
                        jobIdsUnderObservation.add(jobId);
                    }
                }
            }
        }
    }
    catch(IOException ioe)
    {
        ioe.printStackTrace();
    }
    int prevStatus = 0; 
```

它可以很好地读取第一个文件，但它会从第二个文件开始中断。它抛出一个 IOException：流已关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:11:13.723

有时 xml 阅读器在调用其 close 方法时会关闭底层流。这不是他们在文档中所说的，而是在发行说明中...

为了避免这种行为，您可以覆盖阅读器的 close 方法或将流包装到另一个类中。

几年前我向太阳报告过，但“修复风险太大”

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6539065](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6539065)

（那里有一些例子）

# javascript - 下面的javascript代码给出了两个警报？

> ID：12585639
> 
> 赞同：-4
> 
> 时间：2012-09-25T14:55:47.263
> 
> 标签：javascript

下面的代码一个接一个地给我两个警报 - Hello1234 和 undefined

```
var b ={ status:"Ready" ,
         deep : { a:12 , b:"String" ,
                  c:function() {alert("Hello1234");
                               }
                 }  
        }

alert(b.deep.c()); 
```

谁能让我知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:57:51.690

因为您调用`alert()`了两次：一次在 of 内部，`c()`然后再次以 . 的结果调用`c()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:58:58.953

看来您想要“Hello..”作为值尝试以下操作：

```
var b ={ status:"Ready" ,
         deep : { a:12 , b:"String" ,
                  c:function() {return "Hello1234";
                               }
                 }  
        }

alert(b.deep.c()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T14:59:09.507

发生这种情况是因为：

1.  `b.deep.c()`里面有一个电话`alert`。
2.  该方法的返回值未定义，但您尝试`alert`返回值，因此获取 [未定义的字符串表示形式] `undefined`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:58:55.990

`c`返回什么都没有，所以你得到`undefined`，返回一些东西：

```
var b ={ status:"Ready" ,
         deep : { a:12,
                  b:"String" ,
                  c:function() {
                     alert("Hello1234"); 
                     return "ALERT ME";
                  }
                 }  
        }

alert(b.deep.c());​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:59:05.910

该函数`c`不返回任何值，因此当您调用`alert(c())`它时会执行`c`（警告“Hello1234”）然后警告返回值 - `undefined`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T15:14:56.143

印刷精美，即：

```
var b = {
  status: "Ready",
  deep: {
    a: 12,
    b: "String",
    c: function () {
      alert("Hello1234");
    }
  }  
};

alert(b.deep.c()); 
```

首先，您正在使用对实例`b`的引用来初始化变量。`Object`该对象使用自己的`status`和`deep`属性进行初始化。该`deep`属性使用对另一个`Object`实例的引用进行初始化。另一个对象使用属性`a`、`b`和进行初始化`c`。属性`c`通过对匿名`Function`实例（没有名称的实例）的引用进行初始化。 `Function`实例是可调用的对象。

在第二步中，您正在调用该`alert()`方法（应该`window.alert(…)`改为）。您正在向该方法传递该属性所引用的函数的*返回值。*`c`

这调用了该函数，

```
function () {
  alert("Hello1234");
} 
```

（在伪代码中）它本身有一个

```
 alert("Hello1234"); 
```

打电话给它。如此`alert()`调用，首先显示“Hello1234”。

然后进行该`alert()`调用的函数结束，因为没有更多的语句。该函数*没有显式*返回值（使用`return`语句），因此它*隐式*返回该类型的`undefined`值`Undefined`。

我们现在又回到了最初的`alert()`通话中。的返回值`b.deep.c()`就是`undefined`值，所以

```
alert(b.deep.c()); 
```

被评估为

```
alert(undefined); 
```

但是`alert()`，旨在显示文本消息，需要一个`String`值。因此，它执行从到的*类型转换*。`Undefined``String`

ECMAScript 实现中的每个值都有一个*字符串表示*。该`undefined`值的字符串表示形式是`"undefined"`，所以

```
alert(String(undefined)); 
```

被评估为

```
alert("undefined"); 
```

这就是第二个警报框显示“未定义”的原因。[如果您使用脚本调试器（例如内置的Chrome/Chromium 调试器](https://developers.google.com/chrome-developer-tools/)或用于 Firefox 等基于 Mozilla 的浏览器的[Firebug 扩展](http://getfirebug.com/)程序）逐步执行程序，您可以自己看到这一点。

# php - restler 多条路线

> ID：12585640
> 
> 赞同：0
> 
> 时间：2012-09-25T14:55:50.733
> 
> 标签：php, rest, restler

我遇到了多个路由的问题，其中一些无法正常工作。

```
/**
 * 
 * @url GET /fetch
 * @url GET /fetch/lazyload/:lazy
 * @url GET /fetch/:id/
 * @url GET /fetch/:id/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit
 * @url GET /fetch/start/:offset/limit/:limit/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/orderby/:order
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/orderby/:order/lazyload/:lazy
 */
protected function fetch($id = null, $offset = 0, $limit = 25, $lazy = false, $sort = 'asc', $order = null){
    //override
    throw new RestException(501);
} 
```

例如

```
@url GET /fetch/start/:offset/limit/:limit 
```

如果 url`/fetch/start/1/limit/2` 将不起作用，但如果它会起作用 `/fetch/start/1/2`

并将 `/fetch/:id/`覆盖 `/fetch/lazyload/:lazy`

所以`/fetch/lazyload/true`不起作用，识别的模式将返回 `/fetch:id => lazyload`

我错过了什么，或者这种映射是不可能的？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:35:53.390

歧义在这里发挥了作用！阅读[此线程](https://github.com/Luracast/Restler/issues/10)以了解更多信息

简而言之，url中的参数是贪婪的，所以我们需要确保它们出现在非贪婪的url之后

例如让我们谈谈两个 url

1.  `simple\:param`
2.  `simple\name`

如果我们将 url 保持与上面相同的顺序并调用`simple\name`，则只有映射到的 api 方法`simple\:param`才会接收它，并将 param 设置为“name”。我们可以通过简单地改变顺序来解决这个问题

1.  `simple\name`
2.  `simple\:param`

同样，您可以使用以下方法修复您的 api

```
/**
 *
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/orderby/:order/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/orderby/:order
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit/sort/:sort
 * @url GET /fetch/start/:offset/limit/:limit/lazyload/:lazy
 * @url GET /fetch/start/:offset/limit/:limit
 * @url GET /fetch/lazyload/:lazy
 * @url GET /fetch/:id/lazyload/:lazy
 * @url GET /fetch/:id/
 * @url GET /fetch
 */
protected function fetch($id = null, $offset = 0, $limit = 25, $lazy = false, $sort = 'asc', $order = null)
{
    //override
    throw new RestException(501);
} 
```

高温高压

# c++ - OpenGL - 四边形上的纹理坐标

> ID：12585647
> 
> 赞同：0
> 
> 时间：2012-09-25T14:56:13.183
> 
> 标签：c++, opengl, sdl

我不知道出了什么问题。一切似乎都很好。这是代码（已加载纹理，只是绘图）：

```
glBegin( GL_QUADS );
    float TX1,TX2,TY1,TY2;

    TX1=some_numbers_check_below_code;
    TX2=some_numbers_check_below_code;
    TY1=some_numbers_check_below_code;
    TY2=some_numbers_check_below_code;

    glTexCoord2f(TX1,TY2);
    glVertex3f( float(RectOutput.x), float(RectOutput.y), 0.0f );

    glTexCoord2f(TX2,TY2);
    glVertex3f( float(RectOutput.x+InputWidth), float(RectOutput.y), 0.0f );

    glTexCoord2i(TX2,TY1);
    glVertex3f( float(RectOutput.x+InputWidth), float(RectOutput.y+InputHeight), 0.0f );(InputY)/float(Input.H)) );

    glTexCoord2f(TX1,TY1);
    glVertex3f( float(RectOutput.x), float(RectOutput.y+InputHeight), 0.0f );

glEnd(); 
```

没关系：

```
TX1=0.0;
TX2=1.0;
TY1=1.0;
TY2=0.0; 
```

（好：http: [//i.imgur.com/xLeBm.png](http://i.imgur.com/xLeBm.png)）

但是被（例如）打破：

```
TX1=0.0;
TX2=0.5;
TY1=1.0;
TY2=0.5; 
```

（像这样：http: [//i.imgur.com/UykBh.png](http://i.imgur.com/UykBh.png)）

真的，这让我很烦。可能问题不在此代码中。一切都应该没问题……但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:10:15.047

“我不知道出了什么问题。一切似乎都很好”。那太好了，不用回答了！

您应该首先解释在第二种情况下您期望得到什么。我不是 OpenGL 专家，但你的第二组坐标似乎坏了。

第一个`0,0 -> 1,0 -> 1,1 -> 0,1`：：

```
 0     1
0 x---->x
  |     |
  |     |
  |     v
1 x<----x 
```

第二个`0,.5 -> .5,.5 -> .5,1 -> 0,1`：：

```
 0     1
0 +-----+
  |     |
  x->x  |
  |  v  |
1 +--x->x 
```

如果您想缩放纹理（但我不知道，因为您还没有写出应该是什么结果），那么这显然是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:06:44.053

哦……我觉得自己很愚蠢。抱歉耽误了时间。这是错误：

glTexCoord2i(TX2,TY1);

我应该使用 glTexCoord2 **f**而不是**我**...只是忘记更改它...

# php - PHP：第 156 行 /opt/lampp/htdocs/UI/user/index.php 中的意外“回声”（T_ECHO）

> ID：12585659
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:56:42.657
> 
> 标签：php

我在 url 中做一个 php 变量减速

我有一段代码

```
$message =  "Username or  password is not correct.";
header("Location:".echo get_site_url()."/UI/user/index.php?message={$message}"); 
```

get_site_url() 在哪里

```
$GLOBAL_URL_OF_THE_SITE= "http://webfaction";

function get_site_url(){

    global $GLOBAL_URL_OF_THE_SITE;

    return $GLOBAL_URL_OF_THE_SITE; 
} 
```

现在我想在位置重定向标题

```
header("Location:http://webfaction/UI/user/index.php"); 
```

但是为什么我的代码给出了这个错误

```
 Parse error: syntax error, unexpected 'echo' (T_ECHO) in /opt/lampp/htdocs/UI/user/index.php on line 156 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:58:29.763

你为什么要这样加入`echo`你的`header`电话？ `echo`仅用于将字符串打印到屏幕上。否则，当使用字符串（或返回字符串的函数）时，您不需要它。

```
header("Location:".get_site_url()."/UI/user/index.php?message={$message}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:57:53.070

尝试一下：

```
header("Location:".get_site_url()."/UI/user/index.php?message={$message}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:58:26.230

它应该是：

```
header("Location:".get_site_url()."/UI/user/index.php?message={$message}"); 
```

你不需要那里的回声..你不是想写信给用户，而是把它保存在 PHP 代码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T14:58:45.817

```
header("Location:".echo get_site_url()."/UI/user/index.php?message={$message}"); 
```

变成

```
header("Location:". get_site_url()."/UI/user/index.php?message={$message}"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T14:59:03.193

运算符在`.`字符串之间执行连接，同时`echo`将字符串呈现到输出。

摆脱掉`echo`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T15:05:17.610

您可以使用`sprintf`正确格式化字符串

尝试

```
header("Location:". sprintf("%s/UI/user/index.php?message=%s",get_site_url(),$message)); 
```

# android - Intent.category.BROWSABLE：设置对外部应用程序的可见性

> ID：12585660
> 
> 赞同：1
> 
> 时间：2012-09-25T14:56:44.307
> 
> 标签：android, android-intent, web

在我的 android 应用程序中，我支持在我的应用程序或外部浏览器中打开网站。所以我在android清单中添加了以下代码：

```
<activity
        android:name=".MyActivity"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="http" />
            <data android:scheme="https" />
        </intent-filter>
</activity> 
```

因此，现在当用户尝试打开某个 url 时，他会看到一个对话框，在该对话框中他可以选择更喜欢的应用程序来查看该 url。但我希望我的应用程序仅针对从我的应用程序内部打开的 url 显示在此对话框中。当用户尝试在 Facebook 应用程序中打开某些外部链接时，我不希望它出现。有没有办法做到这一点？

请注意，我的应用程序支持打开不同的链接，我不能为它们设置任何特定的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:00:57.507

> 但我希望我的应用程序仅针对从我的应用程序内部打开的 url 显示在此对话框中。

这是不可能的，对不起。

您*可以*通过 and 启用和禁用此组件来伪造此行为，以便`PackageManager`仅`setComponentEnabledSetting()`在可能遇到此类 URL 时启用它。但是，要使其 100% 可靠可能很困难。

# background-image - 如何在 CSS 中淡化盒子阴影？

> ID：12585661
> 
> 赞同：0
> 
> 时间：2012-09-25T14:56:48.690
> 
> 标签：background-image, gradient, fade, css

注意我已经看过[这篇文章](https://stackoverflow.com/questions/10938462/taper-fade-css-box-shadow)并且无法模仿它。我正在尝试在[英国文化协会瑞典](http://www.britishcouncil.se/)网站上复制阴影：

这是我设法在[我自己的网站](http://solaslite.wpengine.com/)上获得的：

我还不能发布图片，但 HTML 的结构如下：

```
<div id="inner">
<!--Full width div, blue bar of color here-->

    <div class="wrap">
    <!--Existing gradient background image here-->

         <div id="content-wrapper">
         <!--Content begins-->
         </div>

     </div>

</div> 
```

现有的 CSS：

```
#inner{
    background: #1e5799;
    background: -moz-linear-gradient(top,  #1e5799 0%, #0057be 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#0057be));
    background: -webkit-linear-gradient(top,  #1e5799 0%,#0057be 100%);
    background: -o-linear-gradient(top,  #1e5799 0%,#0057be 100%);
    background: -ms-linear-gradient(top,  #1e5799 0%,#0057be 100%);
    background: linear-gradient(to bottom,  #1e5799 0%,#0057be 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#0057be',GradientType=0 );
    background-size: 1px 100px;
    background-repeat: repeat-x;
    margin: 0 auto;
    overflow: hidden;
    padding: 20px;
    position: relative;
}

#inner .wrap {
    background: -moz-linear-gradient(top,  rgba(0,0,0,0.25) 0%, rgba(0,0,0,0) 45%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0,0,0,0.25)), color-stop(45%,rgba(0,0,0,0)));
    background: -webkit-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0) 45%);
    background: -o-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0) 45%);
    background: -ms-linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0) 45%);
    background: linear-gradient(top,  rgba(0,0,0,0.25) 0%,rgba(0,0,0,0) 45%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6000000',endColorstr='#00000000',GradientType=0 );
    border-radius: 10px;
}

#content-sidebar-wrap {
    background: #fff;
    float: left;
    margin: 1em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:07:42.090

试试这个可能会有所帮助

[演示](http://jsfiddle.net/afshinprofe/8YsAg/)

# asp.net-mvc-3 - 空白空间而不是html表格中的单元格

> ID：12585662
> 
> 赞同：0
> 
> 时间：2012-09-25T14:57:00.843
> 
> 标签：asp.net-mvc-3, razor, html-table

我在 html 表中得到一个空白空间而不是一个单元格。 [单击此处查看屏幕截图](http://i.stack.imgur.com/twLoF.png)

实际上，我正在使用带有剃刀引擎的 MVC 来生成带有大量 c# 代码的 html。任何人的帮助将不胜感激。我想发布代码，但它是一个客户端项目，因此我需要保密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:52:45.263

没有看到代码，这是 HTML/CSS 的问题。有几件事要检查：

1.  单元格间距/单元格填充（对于 CSS 上的每个单元格等）
2.  检查您是否有多余的空间。
3.  检查单元格的长度（如果是 div 等宽度）
4.  尝试这样做（删除文本和结束 td 标签之间的运营商返回）。

    `<td`>这是一个细胞。`</td`>

5.  检查此行中所有单元格的字体大小。

6.  检查文本，单元格高度。看起来所有其他行都有，而有空格的行没有。可能受身高影响。

几乎我在没有看到代码/html/css 的情况下在黑暗中拍摄。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:58:38.407

您可以使用 td 的 colspan 属性：

```
<td colspan="2" style = "text-align:center;"> 
```

# c# - ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象

> ID：12585664
> 
> 赞同：71
> 
> 时间：2012-09-25T14:57:03.907
> 
> 标签：c#, entity-framework, ninject, repository-pattern, entity-framework-5

使用带有通用存储库模式的 EF5 和 ninject 进行依赖注入，并在尝试使用我的 edmx 存储的过程将实体更新到数据库时遇到问题。

我在 DbContextRepository.cs 中的更新是：

```
public override void Update(T entity)
{
    if (entity == null)
        throw new ArgumentException("Cannot add a null entity.");

    var entry = _context.Entry<T>(entity);

    if (entry.State == EntityState.Detached)
    {
        _context.Set<T>().Attach(entity);
        entry.State = EntityState.Modified;
    }
} 
```

从返回到我的存储库的 AddressService.cs 中，我有：

```
 public int Save(vw_address address)
{
    if (address.address_pk == 0)
    {
        _repo.Insert(address);
    }
    else
    {
        _repo.Update(address);
    }

    _repo.SaveChanges();

    return address.address_pk;
} 
```

当它遇到 Attach 和 EntityState.Modified 时，它会出现错误：

**ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。**

我已经查看了堆栈和互联网上的许多建议，但没有提出任何解决它的方法。任何变通方法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-25T17:03:15.763

**编辑**：使用原始答案`Find`而不是`Local.SingleOrDefault`. 它与@Juan 的`Save`方法结合使用，但可能会导致对数据库的不必要查询，并且`else`部分可能永远不会执行（执行 else 部分会导致异常，因为 Find 已经查询了数据库并且没有找到实体，因此无法更新） . 感谢@BenSwayne 发现问题。

您必须检查具有相同键的实体是否已被上下文跟踪并修改该实体而不是附加当前实体：

```
public override void Update(T entity) where T : IEntity {
    if (entity == null) {
        throw new ArgumentException("Cannot add a null entity.");
    }

    var entry = _context.Entry<T>(entity);

    if (entry.State == EntityState.Detached) {
        var set = _context.Set<T>();
        T attachedEntity = set.Local.SingleOrDefault(e => e.Id == entity.Id);  // You need to have access to key

        if (attachedEntity != null) {
            var attachedEntry = _context.Entry(attachedEntity);
            attachedEntry.CurrentValues.SetValues(entity);
        } else {
            entry.State = EntityState.Modified; // This should attach entity
        }
    }
} 
```

如您所见，主要问题是该`SingleOrDefault`方法需要知道找到实体的密钥。您可以创建简单的接口来公开密钥（`IEntity`在我的示例中）并在您想要以这种方式处理的所有实体中实现它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-28T12:22:30.717

我不想通过添加接口或属性来污染我自动生成的 EF 类。所以这真的是上述一些答案的一点点（所以归功于Ladislav Mrnka）。这为我提供了一个简单的解决方案。

我在更新方法中添加了一个函数来找到实体的整数键。

```
public void Update(TEntity entity, Func<TEntity, int> getKey)
{
    if (entity == null) {
        throw new ArgumentException("Cannot add a null entity.");
    }

    var entry = _context.Entry<T>(entity);

    if (entry.State == EntityState.Detached) {
        var set = _context.Set<T>();
        T attachedEntity = set.Find.(getKey(entity)); 

        if (attachedEntity != null) {
            var attachedEntry = _context.Entry(attachedEntity);
            attachedEntry.CurrentValues.SetValues(entity);
        } else {
            entry.State = EntityState.Modified; // This should attach entity
        }
    }
} 
```

然后当你调用你的代码时，你可以使用..

```
repository.Update(entity, key => key.myId); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-20T07:18:01.517

您实际上可以通过反射检索 Id，请参见下面的示例：

```
 var entry = _dbContext.Entry<T>(entity);

        // Retreive the Id through reflection
        var pkey = _dbset.Create().GetType().GetProperty("Id").GetValue(entity);

        if (entry.State == EntityState.Detached)
        {
            var set = _dbContext.Set<T>();
            T attachedEntity = set.Find(pkey);  // access the key
            if (attachedEntity != null)
            {
                var attachedEntry = _dbContext.Entry(attachedEntity);
                attachedEntry.CurrentValues.SetValues(entity);
            }
            else
            {
                entry.State = EntityState.Modified; // attach the entity
            }
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-31T14:46:29.660

@ [serj-sagan](https://stackoverflow.com/users/550975/serj-sagan)你应该这样做：

**请注意，YourDb 应该是从 DbContext 派生的类。

```
public abstract class YourRepoBase<T> where T : class
{
    private YourDb _dbContext;
    private readonly DbSet<T> _dbset;

    public virtual void Update(T entity)
    {
        var entry = _dbContext.Entry<T>(entity);

        // Retreive the Id through reflection
        var pkey = _dbset.Create().GetType().GetProperty("Id").GetValue(entity);

        if (entry.State == EntityState.Detached)
        {
           var set = _dbContext.Set<T>();
           T attachedEntity = set.Find(pkey);  // access the key
           if (attachedEntity != null)
           {
               var attachedEntry = _dbContext.Entry(attachedEntity);
               attachedEntry.CurrentValues.SetValues(entity);
           }
           else
           {
              entry.State = EntityState.Modified; // attach the entity
           }
       }
    } 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T17:52:44.403

如果您将上下文设置为 AsNoTracking() 这将停止 aspmvc 跟踪内存中实体的更改（无论如何这都是您在网络上想要的）。

```
_dbContext.Products.AsNoTracking().Find(id); 
```

我建议您在[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/advanced-entity-framework-scenarios-for-an-mvc-web上阅读更多相关信息-应用](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/advanced-entity-framework-scenarios-for-an-mvc-web-application)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-24T19:04:52.190

另一个解决方案（基于@Sergey 的回答）可能是：

```
private void Update<T>(T entity, Func<T, bool> predicate) where T : class
{
    var entry = Context.Entry(entity);
    if (entry.State == EntityState.Detached)
    {
        var set = Context.Set<T>();
        T attachedEntity = set.Local.SingleOrDefault(predicate); 
        if (attachedEntity != null)
        {
            var attachedEntry = Context.Entry(attachedEntity);
            attachedEntry.CurrentValues.SetValues(entity);
        }
        else
        {
            entry.State = EntityState.Modified; // This should attach entity
        }
    }
} 
```

然后你会这样称呼它：

```
Update(EntitytoUpdate, key => key.Id == id) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-15T03:46:16.463

如果没有反射并且不想使用接口，可以使用功能委托在数据库中查找实体。这是上面的更新示例。

```
private void Update<T>(T entity, Func<ObservableCollection<T>, T> locatorMap) where T : class
{
    var entry = Context.Entry(entity);
    if (entry.State == EntityState.Detached)
    {
        var set = Context.Set<T>();
        T attachedEntity = locatorMap(set.Local); 

        if (attachedEntity != null)
        {
            var attachedEntry = Context.Entry(attachedEntity);
            attachedEntry.CurrentValues.SetValues(entity);
        }
        else
        {
            entry.State = EntityState.Modified; // This should attach entity
        }
    }
} 
```

你可以这样称呼它：

```
Update(EntitytoUpdate, p => p.SingleOrDefault(a => a.Id == id)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-13T06:38:27.210

分离找到的实体（参见`attachedEntity`Ladislav[的](https://stackoverflow.com/users/413501/ladislav-mrnka)解决方案）并重新附加修改后的实体对我来说效果很好。

这背后的原因很简单：如果某些东西是不可变的，那么将它（作为一个整体，实体）从它所属的位置替换为所需的那个。

以下是如何执行此操作的示例：

```
var set = this.Set<T>();
if (this.Entry(entity).State == EntityState.Detached)
{
    var attached = set.Find(id);
    if (attached != null) { this.Entry(attached).State = EntityState.Detached; }
    this.Attach(entity);
}

set.Update(entity); 
```

当然，人们可能很容易发现这个片段是泛型方法的一部分，因此使用了`T`作为模板参数的 和`Set<T>()`。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-12-28T03:46:05.557

上面的答案可能是 EF 4.1+。对于那些使用 4.0 的人，试试这个简单的方法……没有经过真正的测试，但确实附加并保存了我的更改。

```
 public void UpdateRiskInsight(RiskInsight item)
    {
        if (item == null)
        {
            throw new ArgumentException("Cannot add a null entity.");
        }

        if (item.RiskInsightID == Guid.Empty)
        {
            _db.RiskInsights.AddObject(item);
        }
        else
        {
            item.EntityKey = new System.Data.EntityKey("GRC9Entities.RiskInsights", "RiskInsightID", item.RiskInsightID);
            var entry = _db.GetObjectByKey(item.EntityKey) as RiskInsight;
            if (entry != null)
            {
                _db.ApplyCurrentValues<RiskInsight>("GRC9Entities.RiskInsights", item);
            }

        }

        _db.SaveChanges();

    } 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-08-24T23:00:39.660

你可能忘记`fBLL = new FornecedorBLL();`在 algun 地方instaçia 对象

# wicket - 需要 AjaxCallDecorator 根据下拉值有条件地显示

> ID：12585665
> 
> 赞同：1
> 
> 时间：2012-09-25T14:57:06.317
> 
> 标签：wicket

我有一个使用 AjaxCallDecorator 的下拉列表。目前，当您从下拉列表中选择一个地址时，我会使用一些 ajax 对地址进行一些检查。我使用下拉菜单旁边的微调器图标让用户知道正在发生某些事情。下拉列表中的选项之一是“手动输入地址”。当他们选择这个时，我不希望 AjaxCallDecorator 进行装饰。它不会弹出很长时间（可能是四分之一秒），但我根本不希望它出现。

我不知道如何根据用户在下拉菜单中选择的内容有条件地显示装饰器。getAjaxCallDecorator 仅用于确定要使用的装饰器，我很确定它只在初始化或页面加载时调用一次。每次选择新的下拉选项时都不会调用它。

谢谢。

（对不起，应该包括我正在使用 wicket 1.4.20）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:07:05.277

想到的第一个解决方案是直接在 JavaScript 代码中检查用户选择了什么选项。

这是 Wicket 1.5 的代码（因为它是最后一个带有 AjaxCallDecorator 的版本）：

```
@Override
protected IAjaxCallDecorator getAjaxCallDecorator() {
    return new AjaxCallDecorator() {

        @Override
        public CharSequence decorateScript(Component c, CharSequence script) {
            return "if (" + shouldUseDecoratorScript() + ") { /* Show the spinner icon */ } " + script;
        }

        @Override
        public CharSequence decorateOnSuccessScript(Component c, CharSequence script) {
            return "if (" + shouldUseDecoratorScript() + ") { /* Hide the spinner icon */ } " + script;
        }

        @Override
        public CharSequence decorateOnFailureScript(Component c, CharSequence script) {
            return "if (" + shouldUseDecoratorScript() + ") { /* Hide the spinner icon */ } " + script;
        }

        private CharSequence shouldUseDecoratorScript() {
            return "this.value !== \"" + enterAddressManuallyItem.getId() + "\"";
        }
    };
} 
```

这里 enterAddressManuallyItem 是与“手动输入地址”选项对应的项目。我假设它有 getId() getter，你使用类似的东西

```
new ChoiceRenderer<DropDownChoiceItem>("text", "id") 
```

作为 DropDownChoice 构造函数的最后一个参数。

也许，有更好的解决方案。

# visual-studio-2010 - 退出 VS 时从 Office 中删除加载项

> ID：12585668
> 
> 赞同：0
> 
> 时间：2012-09-25T14:57:12.590
> 
> 标签：visual-studio-2010, add-in

当我在 Outlook 加载项上运行调试时，它会安装它。问题是当我退出 VS 时，它仍然在程序中注册并在程序中有效。所以，当我第二天启动 Outlook 时，各种愚蠢的东西都会弹出来。

我应该清理解决方案，但谁记得在与软件中的昆虫战斗 16 小时后......

我可以以某种方式删除附加组件吗？以编程方式注销它，或者更好的是，在 VS 中进行设置等，以便它自行清除。

# emacs - Emacs 函数和命令之间的关系

> ID：12585670
> 
> 赞同：14
> 
> 时间：2012-09-25T14:57:17.393
> 
> 标签：emacs, elisp

据我了解，在 Emacs 中，我可以运行诸如（顺便说一下，我认为它代表 ）之类的**命令**。该命令本身用于运行诸如通过键入minibuffer 之类的事情。`M-x``execute-extended-command``M-x``customize_face``M-x customize-face`

我的问题是：

**问题 1。**是`customize-face`命令**吗**？或者它是一个**功能**？我们是否说它作为**参数**`customize-face`传递给**命令** ？`M-x`

 ****Q.2**所有 Emacs 命令都有关联的 Emacs**功能**吗？（即当我输入时，`M-x customize-face`我假设调用了一个定义的**函数**）。如果是这样，我如何从命令名称中查找函数名称？（反之亦然）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T15:21:52.543

是的，所有 Emacs 命令都是函数，但并非所有函数都是 Emacs 命令。`M-x`您可以使用以下命令使任意 elisp 函数成为可访问的命令`(interactive)`：

```
(defun my-command ()
 "This is the docstring"
 (interactive)
 (do-foo)
 (do-bar)) 
```

现在您已将其定义`my-command`为交互式，您可以立即使用`M-x my-command`. Emacs 会自动为您完成所有使用该名称的簿记工作。

这就是添加新命令所需要做的*一切！*然后，您可以将其绑定到一个键，例如：

```
(global-set-key (kbd "C-c f") 'my-command) 
```

此外，每个键绑定都与这样的交互功能相关联。您可以找到使用哪个键调用哪个函数`C-h k`并输入您的键序列。这将为您提供将在该键序列上调用的函数的文档。如果您运行我给您的代码，doing`C-h k C-c f`会给您一个包含（除其他外）您的文档字符串的缓冲区：

```
C-c f runs the command my-command, which is an interactive Lisp
function.

It is bound to C-c f.

(my-command)

This is the docstring 
```

所以：所有 Emacs 命令都只是用`(interactive)`. （实际上，也有一些来自 Emacs 的 C 核心的原始函数，但这并不是很重要。）

命令和函数之间的这种简单而优雅的关系——在任何一个方向上都很容易遵循——是使 Emacs 如此易于定制的部分原因。如果您想知道您的正常操作调用了哪些函数，您可以轻松查找它们，如果您想添加更多命令，您只需在函数中多写一行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T00:55:12.460

更多细节：对于那些想知道为什么需要添加`(interactive)`以将函数标记为命令的人来说，诀窍在于`interactive`解释如何为函数提供参数。所以`(interactive)`说“这也是一个命令，当交互运行时，只需调用*不带*参数的函数”，其中`(interactive (list 2))`说“这也是一个命令，当交互运行时，评估表达式`(list 2)`将构建参数列表以传递给命令”。

已经讨论过扩展，`interactive`以便在交互式调用时，它不仅可以采用形式，`(interactive ARGs-FORM)`还可以采用*RETURN-FORM*指定如何处理返回值的形式。典型的例子：作为一个*函数*不打印任何东西，只是返回一个数字，但是当交互运行时（即用作*命令*），如果它不打印任何东西就变得无用，所以*RETURN-FORM*将获取返回的数字并打印它。`(interactive ARGS-FORM RETURN-FORM)`*`current-column`***

# ruby-on-rails - Rails 响应慢

> ID：12585671
> 
> 赞同：0
> 
> 时间：2012-09-25T14:57:17.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个轨道应用程序。但在我的日志中，我有一些奇怪的输出，尤其是字符串

```
Completed 200 OK in 113ms (Views: 45.0ms | ActiveRecord: 2.9ms | Sphinx: 0.0ms) 
```

45ms(views) + 3ms(AR) = 48ms 但不是 113

我的应用程序应该快 2 倍。问题是什么？

这是单个请求的[完整日志](https://raw.github.com/gist/3782419/c1e3c15506e159acb3321b80086026be5827c504/log)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:05:39.767

没有地方说你`113ms`应该是括号内任何内容的总和。rails 处理请求所花费的时间不存在，您的操作中的逻辑所花费的时间也不存在。

# batch-file - 检查批处理文件中的GAC中是否存在程序集

> ID：12585672
> 
> 赞同：2
> 
> 时间：2012-09-25T14:57:18.447
> 
> 标签：batch-file, gac, gacutil

我们如何检查 Windows 批处理文件中的 GAC 中是否存在程序集？

我在尝试：

```
C:\>gacutil /l ExistentAssembly
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:
  ExistentAssembly, Version=4.0.0.0, Culture=neutral, PublicKeyToke
n=023235e0weaaa8f0, processorArchitecture=x86

Number of items = 1 
```

当我们列出一个不存在的程序集时：

```
C:\>gacutil /l NonExistentAssembly
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:

Number of items = 0 
```

但是没有找到项目时没有错误级别。这里的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:58:17.463

最简单的方法是解析输出，然后检查 findstr 的错误级别：

```
gacutil /l assemblyname | findstr /c:"Number of items = 0"
if "%ERRORLEVEL%" equ "1" (
    echo Assembly not found.
) else (
    echo Assembly found
) 
```

# c# - 如何使用 SQL Server 将可为空的 guid 声明为 C# CLR 存储过程的可选参数

> ID：12585675
> 
> 赞同：12
> 
> 时间：2012-09-25T14:57:38.563
> 
> 标签：c#, sql-server, stored-procedures, guid, optional-parameters

我正在编写一个部署在 SQL Server 2008 R2（所以 .Net 3.5）上的 C# 存储过程，并希望将一个可选参数声明为可为空的 guid。这是我首先尝试的：

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void spCalcPerc(
     SqlGuid pID
    , SqlGuid sID = DBNull.Value
    ) 
```

这因编译时错误而失败：

> *'sID' 的默认参数值必须是编译时常量*

这是因为`DBNull.Value`不是一个常数，这是一种痛苦。

所以我尝试将声明更改为：

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void spCalcPerc(
     SqlGuid pID
    , Guid? sID = null
    ) 
```

这可以编译，但现在我收到此部署错误：

> *部署错误：无法为参数 System.Nullable 创建类型*

试：

```
, SqlGuid sID = null 
```

给出这个编译时错误：

> *'< null >' 类型的值不能用作默认参数，因为没有标准转换为 'System.Data.SqlTypes.SqlGuid' 类型*

所以感觉相当卡住了，我求助于这个：

```
, SqlGuid sID = "00000000-0000-0000-0000-000000000000" 
```

我不想这样做，因为在代码中测试该字符串感觉就像一个杂物。但是，当我收到此编译错误时，这也不起作用：

> *'string' 类型的值不能用作默认参数，因为没有标准转换为 'System.Guid' 类型*

Gah，4 种不同的方法，但它们都不起作用。 *叹*

将不胜感激您的想法或推动正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:23:41.240

尝试

```
, SqlGuid sID = New Guid() 
```

您可以使用

```
if (sID == Guid.Empty) 
```

检查它是否没有被赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:34:32.713

正如您所指出的，这是因为 C#2.0 不支持可选参数。

一种解决方法可能是将 .NET 存储过程包装在接受默认参数的常规 T-SQL 存储过程中。

例如：

```
CREATE PROCEDURE TestProcWrapper
(
    @TestIntWrapperParam int = null
)
AS
EXEC TestProc @TestInt = @TestIntWrapperParam 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T00:17:14.163

Is there something wrong with just passing in Nulls for the values you want defaulted?
Granted this may not work in every situation.
Sometimes you may want to know if the actual value is indeed Null, and therefore avoid using the default.
If this is the case, then I would resort to adding an additional "*Default*" parameter.

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void MySproc(SqlGuid pID, SqlGuid sID, SqlBoolean UseDefault_sID)
{
    sID = (UseDefault_sID == SqlBoolean.True && sID == SqlGuid.Null)
        ? SomeDefaultPIDValue : sID;
} 
```

This saves on having to write additional "*wrapper*" sprocs to take in optional parameters with default values that then call your CLR sproc.

To use the Default-Value when Null pass in: UseDefault_pID = 1
To keep the Actual-Value when Null pass in: UseDefault_pID = 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:16:47.583

我没试过，但你试过了吗

```
Guid.Empty 
```

?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:50:01.563

只需将其声明为：

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void spCalcPerc(
     SqlGuid pID
    , SqlGuid sID
    ) 
```

然后在 SQL Server 中手动注册：

```
ALTER PROCEDURE [dbo].[spCalcPerc]
    @pID [uniqueidentifier],
    @sID [uniqueidentifier] = null
WITH EXECUTE AS CALLER
AS
EXTERNAL NAME [SqlServerProject3].[StoredProcedures].[spCalcPerc] 
```

然后您可以使用该[`IsNull`](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlguid.isnull.aspx)属性来测试是否`sID`实际上为 null：

```
SqlContext.Pipe.Send(sID.IsNull.ToString()); 
```

恐怕我不知道在 C# 代码中声明默认值的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-09T06:37:11.870

如下检查 null。

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void spCalcPerc(SqlGuid pID)
{
    // check for null or set default
    Guid refId = pID.IsNull ? Guid.NewGuid() : pID.Value; 
```

# c# - C# + 异步连接并循环等待数据

> ID：12585680
> 
> 赞同：1
> 
> 时间：2012-09-25T14:58:04.400
> 
> 标签：c#, sockets, asynchronous

我猜这种问题已经被问了很多，但我仍然对我应该做什么感到困惑。

我想要的是通过等待数据发送来异步连接到服务器（由其他人编写）。当收到一条消息时，它必须关闭并使用该数据做一些事情，我认为使用后台工作器可能是最好的。

但是，我并不真正理解整个回调的事情，而且 msdn 的示例似乎无法正常工作。它只读取一次然后关闭。我需要连接保持打开状态，等待消息通过。

我是通过连接和等待消息以正确的方式做事，还是应该充当服务器端，允许来自客户端的连接，然后接收他们发送给我的消息？

请朝正确的方向推动会有所帮助。

问候，

尼尔

更新1：

谢谢大家的回复。我了解回调函数的必要性，但我对以下代码感到困惑：

```
// Read data from the remote device.
        int bytesRead = client.EndReceive(ar);

        if (bytesRead > 0) {
            // There might be more data, so store the data received so far.
        state.sb.Append(Encoding.ASCII.GetString(state.buffer,0,bytesRead));

            // Get the rest of the data.
            client.BeginReceive(state.buffer,0,StateObject.BufferSize,0,
                new AsyncCallback(ReceiveCallback), state);
        } else {
            // All the data has arrived; put it in response.
            if (state.sb.Length > 1) {
                response = state.sb.ToString();
            }
            // Signal that all bytes have been received.
            receiveDone.Set();
        } 
```

据我了解，它接收数据并将其存储在某人中。但是如果有更多数据，它是否应该再次调用自己？我收到的测试数据很小，所以第一次收到所有内容，但是如果我在该代码上放置一个断点并单步执行，它不会再次调用回调，所以：

```
response = state.sb.ToString(); 
```

永远不会被击中。

我不确定的另一件事是如何在循环中使用 Receive() 以便我的连接将无限期地等待数据，传递它接收到的数据。

回调是否在单独的线程上？或者我应该在收到数据时使用后台工作人员，以便它可以关闭并执行所需的操作，并且连接可以继续侦听数据？

感谢所有的帮助。

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:21:24.257

我假设你已经用你正在使用 .Net 套接字命名空间的套接字标记了这个问题。这支持异步接受连接以及异步读取。以下链接正确解释了它 -

[http://msdn.microsoft.com/en-us/library/bew39x2a.aspx](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)

为了解释，我将复制并粘贴代码 -

```
private static void Receive(Socket client) {
    try {
        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = client;

        // Begin receiving the data from the remote device.
        client.BeginReceive( state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReceiveCallback), state);
    } catch (Exception e) {
        Console.WriteLine(e.ToString());
    }
} 
```

与服务器建立成功连接时调用上面的接收函数。请注意对 BeginReceive 的调用，它需要一个新的 AsyncCallback 函数作为参数。每当服务器发送数据时，将调用此函数（ReceiveCallBack），该函数将对其进行处理。这行得通！

希望这可以帮助。

# xml - XML 到字符串生成器

> ID：12585684
> 
> 赞同：0
> 
> 时间：2012-09-25T14:58:13.243
> 
> 标签：xml, vb.net, xml-parsing, xsd

我有一个包含多个`DETAIL`元素的 XML 文档。每个`DETAIL`元素都可以包含`UpdateDate`和`Description`属性。例如，这是一个简短的示例：

```
<MyDocument>
    <DETAIL UpdateDate='18-Sept-2012' />
    <DETAIL UpdateDate='18-Sept-2012' Description='A description goes here' />
</MyDocument> 
```

我需要转换 XML，以便所有属性都成为子元素，例如：

```
<MyDocument>
    <DETAIL>
        <UpdateDate>18-Sept-2012</UpdateDate>
    </DETAIL>
    <DETAIL>
        <UpdateDate>18-Sept-2012</UpdateDate>
        <Description>A description goes here</Description>
    </DETAIL>
</MyDocument> 
```

我用来转换 XML 的方法如下所示：

```
Function ProcessDetail(ByVal xmlText As String) As String
    Dim xmlDoc As New XmlDocument()
    xmlDoc.LoadXml(xmlText)
    Dim sDetail As New StringBuilder()
    sDetail.Append("<DETAIL>")
    For Each detailNode As XmlNode In xmlDoc.SelectNodes("//DETAIL")
        If Not detailNode.Attributes Is Nothing Then
            For Each attribute As XmlAttribute In detailNode.Attributes
                sDetail.Append("<" & attribute.Name.ToUpper & ">" & attribute.Value & "</" & attribute.Name.ToUpper & ">")
            Next
        End If
    Next
    sDetail.Append("</DETAIL>")
    Return sDetail.ToString()
End Function 
```

此方法适用于大多数`DETAIL`元素，但在尝试转换如下所示的元素时会失败：

```
<DETAIL Description='Problem:<br><br>CRS750 dumps when panel F is opened' /> 
```

由于它在属性值中保留了诸如`<`和之类的字符，`>`因此它会抛出一个异常：

```
error message - `'<', hexadecimal value 0x3C, is an invalid attribute character. Line 1, position 1326.` 
```

如何修复我的方法，以便它可以在`DETAIL`不引发异常的情况下转换这些类型的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:04:26.287

这不是有效的 XML，因此实际上无法解析，当然也不能使用任何标准的 XML 解析器库。如果可能，修复生成 XML 的代码，以便正确转义保留的字符（例如`>`，应更改为`&gt;`）。为了解决这个问题，应该使用一个 XML 解析器对象（例如`XmlDocument`or `XDocument`）来生成 XML，而不是直接通过字符串连接来构建它。但是，如果更改它太难，至少应该`HttpServerUtility.HtmlEncode`在将每个节点值连接到 XML 文档字符串之前调用它。

如果无法修复生成 XML 的代码，您将不得不自己手动解析无效的 XML，方法是删除`"<DETAIL Description='"`字符串开头的 和`"' />"`结尾的 。但这只有在它是完整的字符串并且它始终具有相同的确切开始和结束格式时才有效。

# html - KineticJS 过渡到缩放

> ID：12585685
> 
> 赞同：0
> 
> 时间：2012-09-25T14:58:15.613
> 
> 标签：html, canvas, kineticjs

我正在用 Kinetic JS 开发一个画布项目。我想知道是否有办法在 transitionTo 方法中改变对象的比例。下面是我的代码的简化版本。我意识到你可以通过使用 animate 方法来做到这一点，但出于需要大量解释的原因，我不想这样做。

```
window.onload = function() {
    var stage = new Kinetic.Stage({
        container: 'container',
        width: 1600,
        height: 1200
    });

        var layer = new Kinetic.Layer();
        var book = new Image();
    book.onload = function () {
        bookImg = new Kinetic.Image ({ x: 800, y: 680, image:book, name:book, offset: [85.5, 106], opacity: 0,});

        layer.add(bookImg);
        stage.add(layer);
    }
book.src = "images/book.png";

    setTimeout(function() {
       bookImg.transitionTo({ x: 800, y: 680, opacity: 1, duration: 4, });
    }, 1000);

}; 
```

所以在过渡到我想改变对象的比例。因此，将原始比例设置为 0.5 到 1。但是我找不到任何帮助文档。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:08:38.970

使用该`scale`属性将其更改为：

> ```
> bookImg = new Kinetic.Image({
>    x: 100,
>    y: 110,
>    image: book,
>    name: book,
>    offset: [85.5, 106],
>    opacity: 0,
>    scale: { x:0.5, y:0.5 } 
> ```
> 
> });

到：

> ```
> bookImg.transitionTo({
>    x: 100,
>    y: 110,
>    opacity: 1,
>    duration: 4,
>    scale: { x:1, y:1 } 
> ```
> 
> });

你可以看到它在[这里工作](http://jsfiddle.net/jbalsas/8t8H5/1/)

# php - apache 抛出 404 - 无法重写规则

> ID：12585695
> 
> 赞同：2
> 
> 时间：2012-09-25T14:58:42.847
> 
> 标签：php, apache, mod-rewrite, redirect

这是我遇到的一个问题：

*   我的虚拟主机配置为将不存在的文件重写为 /init.php?REQUEST。例如：www.test.com/module/action 将重写为 /init.php?module/action。这是一个非常常见的功能，通过以下方式实现：

    ```
    <Directory /path/to/test.com/htdocs/>

      RewriteEngine on
      RewriteBase /
      RewriteCond %{REQUEST_FILENAME} !-f
      RewriteRule ^(.*)$ init.php?$1

    </Directory> 
    ```

*   现在我试图打开这个：

    ```
    location.href = 'http://www.test.com/module/action/' + encodeURIComponent('htp://www.google.com/'); 
    ```

但是现在 apache 甚至没有进入重写部分就抛出了 404 页面。

*   事实 1：它的发生是因为 %2F 符号（正斜杠）
*   事实 2：apache 甚至没有进入 <Directory> 规则。很明显，我们想要 htdocs/ 下的东西，那么为什么 apache 不进入目录规则？

有人可以向我解释一下为什么斜线符号会搞砸吗？

谢谢你的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:24:00.697

讨厌回答我自己的问题，但今天早上我醒来时头脑清醒并解决了它......

*   问题：似乎 %2F 在任何 URL 中都无效。Apache 需要一个特殊的指令来处理它（也许是 AllowEncodedSlashes？）
*   解决方案1：编码后将%2F替换为%252F
*   解决方案 2：根本不编码 %2F （不适合我的情况）
*   解决方案 3：将 %2F 传递到查询字符串中（对我的情况也不好）

因此，如果将来有人遇到这种情况 - 现在您有一些解决方案可供选择:)

# php - Zend Framework 2 如何在控制器动作中测试重定向？

> ID：12585711
> 
> 赞同：5
> 
> 时间：2012-09-25T14:59:14.950
> 
> 标签：php, phpunit, zend-framework2

如何使用 PHPUnit 在控制器操作中测试重定向？

```
class IndexControllerTest extends PHPUnit_Framework_TestCase
{

    protected $_controller;
    protected $_request;
    protected $_response;
    protected $_routeMatch;
    protected $_event;

    public function setUp()
    {
        $this->_controller = new IndexController;
        $this->_request = new Request;
        $this->_response = new Response;
        $this->_routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->_routeMatch->setMatchedRouteName('default');
        $this->_event = new MvcEvent();
        $this->_event->setRouteMatch($this->_routeMatch);
        $this->_controller->setEvent($this->_event);
    }

    public function testIndexActionRedirectsToLoginPageWhenNotLoggedIn()
    {
        $this->_controller->dispatch($this->_request, $this->_response);
        $this->assertEquals(200, $this->_response->getStatusCode());
    }

} 
```

当我运行单元测试时，上面的代码会导致此错误：

```
Zend\Mvc\Exception\DomainException: Url plugin requires that controller event compose a router; none found 
```

这是因为我在控制器操作中进行了重定向。如果我不做重定向，单元测试就可以工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:35:10.360

这是我在setUp中需要做的：

```
public function setUp()
{
    $this->_controller = new IndexController;
    $this->_request = new Request;
    $this->_response = new Response;

    $this->_event = new MvcEvent();

    $routeStack = new SimpleRouteStack;
    $route = new Segment('/admin/[:controller/[:action/]]');
    $routeStack->addRoute('admin', $route);
    $this->_event->setRouter($routeStack);

    $routeMatch = new RouteMatch(array('controller' => 'index', 'action' => 'index'));
    $routeMatch->setMatchedRouteName('admin');
    $this->_event->setRouteMatch($routeMatch);

    $this->_controller->setEvent($this->_event);
} 
```

# sql - 使用 CTE 从前一行值更新值

> ID：12585713
> 
> 赞同：3
> 
> 时间：2012-09-25T14:59:25.310
> 
> 标签：sql, sql-server-2008, tsql

这个问题是我的旧问题[here](https://stackoverflow.com/questions/11785805/update-null-column-value-from-non-null-value-in-previous-row)的变体。我希望用一个例子来解释这个问题。所以

**示例数据**
这是要使用的示例数据：

```
DECLARE @Test TABLE (GID      int,             Seq     int, 
                     IsLive   bit,             Eff     date, 
                     Name     varchar(50),     Salary  decimal) 

INSERT INTO @Test VALUES (1, 1, 1, '01-08-2012', 'RTS', NULL)
INSERT INTO @Test VALUES (1, 2, 0, '01-09-2012', 'RTA', NULL)
INSERT INTO @Test VALUES (1, 3, 1, '01-10-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (1, 4, 0, '01-11-2012',  NULL, NULL)
INSERT INTO @Test VALUES (1, 5, 1, '01-12-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (2, 1, 1, '01-08-2012', 'RTS', NULL)
INSERT INTO @Test VALUES (2, 2, 0, '01-09-2012', 'RTA', NULL)
INSERT INTO @Test VALUES (2, 3, 1, '01-10-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (2, 4, 0, '01-11-2012', 'GSM', NULL)
INSERT INTO @Test VALUES (2, 5, 1, '01-12-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (3, 1, 1, '01-01-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (3, 2, 0, '01-02-2012', NULL, NULL)
INSERT INTO @Test VALUES (4, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (4, 2, 0, '01-02-2012', 'FSA', NULL)
INSERT INTO @Test VALUES (4, 3, 0, '01-03-2012', NULL, NULL)
INSERT INTO @Test VALUES (5, 1, 0, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (5, 2, 1, '01-02-2012', 'LSI', NULL)
INSERT INTO @Test VALUES (5, 3, 0, '01-03-2012', NULL, NULL)
INSERT INTO @Test VALUES (6, 1, 1, '01-01-2012', NULL, NULL)
INSERT INTO @Test VALUES (6, 2, 0, '01-02-2012', 'LSI', NULL)
INSERT INTO @Test VALUES (6, 3, 1, '01-03-2012', NULL, NULL)

SELECT * FROM @Test 
```

**以下是两个*示例结果集*。尽管片段显示了*插入*，但重点是显示可接受的*输出集*是什么样的：**

**示例输出 #1**
在下面的数据集中，当行具有`IsLive=0`然后其列中的值必须覆盖其`IsLive=1`下方跳过 NULL 值的行上的相同列的值。忽略`IsLive=1`第一行之前的任何行`IsLive=0`。

```
 INSERT INTO @Test VALUES (1, 1, 1, '01-08-2012', 'RTS', NULL)
    INSERT INTO @Test VALUES (1, 2, 0, '01-09-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (1, 3, 1, '01-10-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (1, 4, 0, '01-11-2012',  NULL, NULL)
    INSERT INTO @Test VALUES (1, 5, 1, '01-12-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 1, 1, '01-08-2012', 'RTS', NULL)
    INSERT INTO @Test VALUES (2, 2, 0, '01-09-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 3, 1, '01-10-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 4, 0, '01-11-2012', 'GSM', NULL)
    INSERT INTO @Test VALUES (2, 5, 1, '01-12-2012', 'GSM', NULL)
    INSERT INTO @Test VALUES (3, 1, 1, '01-01-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (3, 2, 0, '01-02-2012', NULL, NULL)
    INSERT INTO @Test VALUES (4, 1, 1, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (4, 2, 0, '01-02-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (4, 3, 0, '01-03-2012', NULL, NULL)
    INSERT INTO @Test VALUES (5, 1, 0, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (5, 2, 1, '01-02-2012', 'LSI', NULL)
    INSERT INTO @Test VALUES (5, 3, 0, '01-03-2012', NULL, NULL)
    INSERT INTO @Test VALUES (6, 1, 1, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (6, 2, 0, '01-02-2012', 'LSI', NULL)
    INSERT INTO @Test VALUES (6, 3, 1, '01-03-2012', 'LSI', NULL)

    SELECT * FROM @Test AS FakedOutput_1 
```

**示例输出 #2**
在下面的数据集中，当一行具有`IsLive=0`然后其列中的值必须覆盖其下方行上相同列的值`IsLive=1`。具有 NULL 值的列采用前一行的值。

```
 INSERT INTO @Test VALUES (1, 1, 1, '01-08-2012', 'RTS', NULL)
    INSERT INTO @Test VALUES (1, 2, 0, '01-09-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (1, 3, 1, '01-10-2012', 'RTA', NULL)
    -- <- the following row is different from prev
    INSERT INTO @Test VALUES (1, 4, 0, '01-11-2012', 'RTA', NULL) 
    INSERT INTO @Test VALUES (1, 5, 1, '01-12-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 1, 1, '01-08-2012', 'RTS', NULL)
    INSERT INTO @Test VALUES (2, 2, 0, '01-09-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 3, 1, '01-10-2012', 'RTA', NULL)
    INSERT INTO @Test VALUES (2, 4, 0, '01-11-2012', 'GSM', NULL)
    INSERT INTO @Test VALUES (2, 5, 1, '01-12-2012', 'GSM', NULL)
    INSERT INTO @Test VALUES (3, 1, 1, '01-01-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (3, 2, 0, '01-02-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (4, 1, 1, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (4, 2, 0, '01-02-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (4, 3, 0, '01-03-2012', 'FSA', NULL)
    INSERT INTO @Test VALUES (5, 1, 0, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (5, 2, 1, '01-02-2012', 'LSI', NULL)
    INSERT INTO @Test VALUES (5, 3, 0, '01-03-2012', 'LSI', NULL)
    INSERT INTO @Test VALUES (6, 1, 1, '01-01-2012', NULL, NULL)
    INSERT INTO @Test VALUES (6, 2, 0, '01-02-2012', 'LSI', NULL)
    INSERT INTO @Test VALUES (6, 3, 1, '01-03-2012', 'LSI', NULL)

    SELECT * FROM @Test AS FakedOutput_2 
```

**尝试的解决方案**
这是我到目前为止提出的，但它失败了我的第一个测试用例（`GID=1`）

```
;WITH CTE AS ( 
    -- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
    SELECT  T.GID, T.SEQ, T.IsLive, NULL cGuid, NULL cSEQ, 
            cast(0 as bit) cIsLive, T.Name, T.Salary 
    FROM    @Test T
    JOIN    @Test S ON T.GID = S.GID AND T.Seq = S.Seq AND S.IsLive = 0
    -- - - - - - - 
      UNION ALL 
    -- - - - - - - 
    SELECT  t.GID, t.SEQ, T.IsLive, c.GID cGID, c.Seq cSEQ, 
             c.IsLive cIsLive, ISNULL(C.Name, T.Name), 
             ISNULL(t.Salary, c.Salary) 
    FROM    CTE c 
    JOIN    @Test t ON    t.GID     = c.GID   AND 
                          t.Seq     > c.Seq   AND 
                          t.IsLive  = 1       AND 
                          c.IsLive  = 0
    -- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
) 
--SELECT * FROM CTE ORDER BY CTE.GID, CTE.Seq
UPDATE  t 
SET     Name = c.Name, Salary = c.Salary
FROM    @Test t 
JOIN    CTE c     ON c.GID = t.GID AND c.Seq = t.SEQ
WHERE   C.cIsLive IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:10:00.603

使用`APPLY`适用于您的测试用例。以下给出与您的解决方案2相同的内容

```
SELECT  t1.GID,
        t1.Seq,
        t1.IsLive,
        t1.Eff,
        CASE WHEN t1.IsLive = 0 THEN COALESCE(t1.Name, t3.Name) ELSE COALESCE(t3.Name, t1.Name) END AS Name,
        Salary
FROM    @Test T1
        OUTER APPLY
        (   SELECT  TOP 1 Name
            FROM    @Test T2
            WHERE   T2.GID = T1.GID
            AND     T2.Seq < T1.Seq
            AND     t2.IsLive = 0
            AND     t2.Name IS NOT NULL
            ORDER BY Seq DESC
        ) t3 
```

**编辑**

刚刚注意到需要一个`UPDATE`：

```
UPDATE  @Test
SET     Name = CASE WHEN t1.IsLive = 0 THEN COALESCE(t1.Name, t3.Name) ELSE COALESCE(t3.Name, t1.Name) END
FROM    @Test T1
        OUTER APPLY
        (   SELECT  TOP 1 Name
            FROM    @Test T2
            WHERE   T2.GID = T1.GID
            AND     T2.Seq < T1.Seq
            AND     t2.IsLive = 0
            AND     t2.Name IS NOT NULL
            ORDER BY Seq DESC
        ) t3 
```

**编辑 2**

我稍微改变了apply中的查询，现在它将尝试找到live = 0且名称不为null的最近行，如果没有live = 1的行（如GID = 4），它将采用名称不为空的最近行：

```
UPDATE  @Test
SET     Name = CASE WHEN t1.IsLive = 0 THEN COALESCE(t1.Name, t3.Name) ELSE COALESCE(t3.Name, t1.Name) END
FROM    @Test T1
        OUTER APPLY
        (   SELECT  TOP 1 Name
            FROM    @Test T2
            WHERE   T2.GID = T1.GID
            AND     T2.Seq < T1.Seq
            AND     t2.Name IS NOT NULL
            ORDER BY t2.IsLive, Seq DESC
        ) t3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T10:20:09.587

我花了一段时间才意识到这个问题只是我之前发布的问题的一个微小变化。刚离开键盘一段时间就帮我看到了答案！@GarethDs 的回答也为此做出了贡献。

```
;WITH CTE AS ( 
    SELECT  T.GID, T.SEQ, T.IsLive, Name, Salary 
    FROM    @Test T
    JOIN    ( SELECT   GID, MIN(Seq) Seq 
              FROM     @Test 
              GROUP BY GID     
            ) S ON T.GID = S.GID AND T.Seq = S.Seq

    UNION ALL 

    SELECT t.GID, t.SEQ, T.IsLive,
           CASE WHEN T.IsLive = 0 THEN COALESCE(T.Name, C.Name) 
                ELSE COALESCE(C.Name, T.Name) END,
           CASE WHEN T.IsLive = 0 THEN COALESCE(T.Salary, C.Salary) 
                ELSE COALESCE(C.Salary, T.Salary) END 
    FROM   CTE C
    JOIN   @Test T ON T.GID = C.GID AND T.SEQ = C.SEQ+1 
) 
--SELECT * FROM CTE ORDER BY CTE.GID, CTE.Seq
UPDATE T 
SET    Name   = C.Name,  
       Salary =  C.Salary
FROM   @Test T
JOIN   CTE C ON C.GID = T.GID AND C.Seq = T.SEQ 
```

# java - JInput 不会检测控制器 Win 7 64 位

> ID：12585716
> 
> 赞同：-1
> 
> 时间：2012-09-25T14:59:28.283
> 
> 标签：java, jinput

我正在尝试使用 JInput 检测控制器设备。它在我的 Win7 32 位 PC 和 Java 32 位 VM 上运行良好。但不幸的是，当我在带有 Java 64 位 VM 的 Win7 64 位 PC 上启动程序时，它没有找到控制器。我的代码是这样的：

```
private boolean init() {

    ControllerEnvironment env = new DirectAndRawInputEnvironmentPlugin();

    Controller[] cs = env.getControllers();

    for (int i = 0; i < cs.length; i++) {

        if (cs[i].getName().contains("TM3 PTT")) {
            pttController = cs[i];
        }
    }

    if (pttController == null || !pttController.poll()) {
        pttController = null;
        return false;
    }

    return true;

} 
```

任何人都有一个想法，我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:36:41.777

您不应该自己构建控制器环境，请使用 ControllerEnvironment.getDefaultEnvironment() 上的静态方法。

[请参阅此处](http://www.java-gaming.org/topics/getting-started-with-jinput/16866/view.html)的入门指南。

# asp.net - ASP.NET Request.UserHostName 不包含主机名

> ID：12585717
> 
> 赞同：5
> 
> 时间：2012-09-25T14:59:32.830
> 
> 标签：asp.net, c#-4.0

如果创建了新数据集，我需要将请求计算机的主机名存储在数据库中。为了向用户清楚地表明这一点（这都是公司内部的），我们在用户填写的表单中将其显示为三个文本框。这三个文本框是这样填充的：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            txtHostname.Text = Request.UserHostName.ToString();
            txtIPAdress.Text = Request.UserHostAddress.ToString();
            txtWindowsLogin.Text = Request.LogonUserIdentity.Name.ToString();
        }
    } 
```

但是，无论我从哪个客户端测试，应该在 Request.UserHostname 中提供主机名的 IP 的反向查找都不起作用，因此该字段填充了 IP 地址。如果我在服务器上使用 nslookup，则反转工作正常。对我有什么建议可以从哪里开始？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:03:05.557

您需要[配置 IIS](http://www.expta.com/2010/01/how-to-enable-reverse-dns-lookup-in-iis.html)才能使其正常工作。或者，如果您只在一个地方需要它，您可以使用[Dns.GetHostEntry进行反向查找。](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.80%29.aspx)

每个请求的反向查找都会对性能产生严重影响，这就是默认情况下不启用它的原因。`Dns.GetHostEntry`如果可以的话，我会推荐这条路线。

这是我们使用的一种有用的反向查找方法：

```
public static string ReverseLookup(string ip)
{
    if (string.IsNullOrEmpty(ip)) return ip;

     try 
     {
       return Dns.GetHostEntry(ip).Select(entry => entry.HostName).FirstOrDefault() ?? ip;
     } 
     catch(SocketException) { return ip; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T07:20:27.620

Page.Request.ServerVariables["HTTP_HOST"].ToUpper();

您可以使用它来获取负载平衡应用程序上的主机名。

# javascript - 让一个简单的 jquery 'hover' 工作的问题

> ID：12585719
> 
> 赞同：0
> 
> 时间：2012-09-25T14:59:36.337
> 
> 标签：javascript, jquery, jquery-selectors

我有一个容器`<div>`，我可以在其中动态插入我无法控制的第三方内容，换句话说，我得到了我得到的东西。

如果第三方网站上插入的元素具有悬停状态，我已经将该悬停颜色存储为十六进制颜色；我无法将其存储为样式，因为此颜色变量是动态更新的。

我想要做的是将该悬停颜色变量应用于落在我的容器内的元素。

如果我提前编码样式，我可以让它工作，但是，正如我所说，我事先不知道它，所以我不能这样做。这个简单的代码确实有效，使链接处于橙色悬停状态。（见我的[工作小提琴](http://jsfiddle.net/vVjg4/1/)。）：

```
<style>
    .hovering, #container a:hover {color: orange;}
</style>
<script>
    $('#container').hover(function() {
        $(this).addClass('hovering');
    }, function() {
        $(this).removeClass('hovering');
    });
</script>

<div id="container">
    <a href="something">
        some link
    </a>    
</div> 
```

但是，我必须使用存储的悬停颜色变量`hoverClass`并应用它，但我无法让它工作。我试过这个，但它不工作。（请参阅[我正在尝试制作的小提琴](http://jsfiddle.net/cKpLk/1/)。）：

```
<script>
    var hoverClass = '.hovering, #container a:hover {color: orange;}';
    $('#container').hover(function() {
        $(this).addClass(hoverClass);
    }, function() {
        $(this).removeClass(hoverClass);
    });
</script>
<div id="container">
    <a href="something">
        some link
    </a>    
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:04:28.350

`.hovering, #container a:hover {color: orange;}`不是一个类，它是一个 CSS 规则。

如果您需要将颜色作为变量，我建议更改为以下内容：

```
<script>
    var hoverColour = "orange";
    $('#container a').hover(function() {
        $(this).css("color", hoverColour);
    }, function() {
        $(this).css("color", "auto");
    });
</script>
<div id="container">
    <a href="something">
        some link
    </a>    
</div> 
```

* * *

或者，更简单的解决方案是使用 jQuery 添加样式：

```
$(function(){
    var hoverColor = "orange";
    $("head").append("<style type='text/css'>#container a:hover { color: " + hoverColor + "; }</style>");
}); 
```

[**-- 工作小提琴 --**](http://jsfiddle.net/dBELH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:04:50.323

您正在尝试传递 addClass css 值。

addClass 只是将类名添加到元素。您需要在样式表中定义 css 规则的作用。

像这样。[http://jsfiddle.net/cKpLk/27/](http://jsfiddle.net/cKpLk/27/)

例子：

```
<script>
        var hoverClass = 'hovering';

        $('#container a').hover(function() {
            $(this).addClass(hoverClass);
        }, function() {
            $(this).removeClass(hoverClass);
        });
</script>
<style>
        .hovering, #container a:hover {color: orange;}
</style>
<div id="container">
    <a href="something">
        some link
    </a>    
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:17:36.183

```
 var hovercolor = 'red';
$(function() {
    $("#container a").hover(function() {
        $("#container a").css('color', hovercolor);
    }, function() {
        $("#container a").css('color','');
    });
});​ 
```

# java - 如何在 Android 项目中使用单例模式？

> ID：12585720
> 
> 赞同：2
> 
> 时间：2012-09-25T14:59:39.483
> 
> 标签：java, android, singleton

我知道 Singleton，但我不能在 Android 项目中使用它。我是Android的初学者。请告诉我如何以及在哪里可以在 Android 大数据项目中使用 Singleton。我已经将它用于简单的值。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-25T16:23:45.700

Android 中的 Singleton 与 Java 中的 Singleton 相同：

一个基本的 Singleton 类示例：

```
public class AppManager
{
    private static AppManager   _instance;

    private AppManager()
    {

    }

    public synchronized static AppManager getInstance()
    {
        if (_instance == null)
        {
            _instance = new AppManager();
        }
        return _instance;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T15:03:58.483

1.  对于“大数据”，请使用数据库。Android 为您提供 SQlite。
2.  当然你可以在 Android 中使用 Singletons。是什么让你认为你不能？

有关单例模式的更多信息，请阅读[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

有关 android 中 SQLite 的更多信息，请阅读：http: [//developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

# java - UAC和java创建文件的文件虚拟化

> ID：12585725
> 
> 赞同：2
> 
> 时间：2012-09-25T14:59:53.040
> 
> 标签：java, winapi, uac

我有一个前端应用程序（在 PowerBuilder 中，但这并不重要），它正在调用一个用 Java 开发并与 launch4j 打包的帮助应用程序。

应用程序的最终用户可以自由配置到前端的路径，其中一些文件将由前端或后端生成。

我注意到，在激活了 UAC 的 Windows Vista 或 Windows7 上，如果用户（没有管理员权限）已将输出配置为`C:\`，则生成的文件会以静默方式虚拟化到`c:\Users\user_name\AppData\Local\VirtualStore\`目录中。

但是，当该过程使 java 应用程序`FileOutputStream`在同一文件中创建一些文件（通过 a ）时`C:\`，java 会因“拒绝访问”异常而失败，这可能与用户无法访问驱动器根目录这一事实相一致，但另一个应用程序是虚拟化的。任务管理器确认一个是虚拟化的，而不是另一个。

我发现[其他 SO question](https://stackoverflow.com/q/8852967/317266)提供了一些线索但不是我的案例的答案，因为这两个应用程序在 32 系统上都是 32 位的，并且两者都没有涉及清单。

有没有办法让 java 表现得像 PB 应用程序（即被虚拟化 - 它是客户请求）？当然，更好的解决方案是检查路径是否可访问，如果不是，则通知用户。

**编辑：** 在查看 java.exe 二进制文件时，我注意到它包含一个声明（但我不熟悉）

```
<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
  <security>
     <requestedPrivileges>
        <requestedExecutionLevel
                  level="asInvoker"
                  uiAccess="false"/>
     </requestedPrivileges>
  </security>
</trustInfo> 
```

也许这是问题的答案：java不是设计虚拟化的？**编辑：**我确实明白清单机制会禁用虚拟化。

**结语：**感谢您的解释，您的论点有助于改变客户的要求。现在人们承认，处理缺少写入某些文件夹的权限比让 Windows 虚拟化以太中某处的文件要好：o）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:29:34.063

> 也许这是问题的答案：java不是设计虚拟化的？

我认为更好的思考方式是 Java 是 UAC 感知的 - 正如你可以从你找到的清单中看出的那样。由于 Java 支持 UAC，因此 Windows 确定 Java 知道它在做什么。由于清单不请求管理员权限并且由标准用户运行，Windows 正确地禁止写入受保护的目录 (C:\)，并且您会收到拒绝访问错误。

[请注意http://msdn.microsoft.com/en-us/library/windows/desktop/bb756960.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756960.aspx)处的警告

> 实施虚拟化是为了改善在 Windows Vista 上作为标准用户运行的应用程序的应用程序兼容性问题。开发人员不得依赖 Windows 后续版本中存在的虚拟化。

如果您的客户真的认为虚拟化是一件好事，那么您需要对 Java 进行脑叶切除术并找到某种方法来删除该清单。然后 Windows 会认为 Java 不知道它在做什么，并将重新打开虚拟化。或者在 Java 代码中自己实现虚拟化 - 并检测对根驱动器、程序文件等的访问，并将它们替换为 c:\Users\user_name\AppData\Local\VirtualStore\ 路径。

可能有一种方法可以为 UAC 感知应用程序重新打开虚拟化，而无需破解 exe，但我找不到它。

最后的替代方法可能是像 exe4j 那样生成一个新的 java 运行器。我相信 exe4j 可以让您配置生成的可执行文件是否支持 UAC。在您的情况下，您可能希望创建一个不支持 UAC 的 exe（无清单）。然后使用您的新 exe 而不是 java.exe。请参阅[http://www.ej-technologies.com/products/exe4j/overview.html](http://www.ej-technologies.com/products/exe4j/overview.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:32:14.383

处理此问题的更好方法是在 power basic 应用程序中禁用虚拟化。

您可以通过在清单中添加一个部分来说明该过程是 vista 感知的。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191%28v=vs.85%29.aspx)中找到更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T06:50:25.960

您`<requestedPrivileges>`在 的应用程序清单中找到了元素`java.exe`。这就是 Java UAC 感知的原因。由于 Java*明确*要求标准用户的权限，因此关闭了虚拟化。

如前所述[，](https://stackoverflow.com/a/12587226/572834)虚拟化可以使旧应用程序尽可能无缝地工作。因此，好的解决方案是通过向其添加适当的清单来使 Windows 为您的 PowerBuilder 前端应用程序关闭虚拟化。

另一个建议是`Access Denied`在 Java 中处理错误并尝试使用虚拟化位置。但这与其说是真正的解决办法，不如说是一种解决方法：*您不应该依赖虚拟化*。

* * *

除非两个部分都在同一侧，否则检查路径是否可访问是很棘手的。如果一个是虚拟化的而另一个不是，您将面临现在看到的相同问题。我的意思是，如果您在PB中执行检查它是否可以在指定的文件夹中创建文件，您将获得成功，因为系统会将调用虚拟化。同时，后端也会失败。

# xpages - xpages：动态更改数据源时，不会更新与字段的数据绑定

> ID：12585733
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:00:16.753
> 
> 标签：xpages

到目前为止，我已经能够通过搜索网络解决所有与 XPages 相关的问题，但是这个问题一直让我发疯，我真的可以使用一些帮助：

在我的 XPage 上，我有一个带有动态数据源的面板（计算 documentid 和 action（值来自`sessionScope`））。在这个面板中，我有多个通过“简单绑定”绑定到数据源的编辑框。在面板之外，我有一个组合框，用户可以在其中选择要显示的文档和创建新文档的按钮。当组合框值更改时，我将 documentid 和 action 放入`sessionScope`并执行面板的部分更新。一切正常，文件以正确的方式显示。当我按下按钮创建一个新文档 (documentid="",action="newDocument") 时，我得到一个新文档，并且面板中的编辑框是空的，就像它应该的那样。

但是，如果我在创建新文档后从组合框中选择现有文档，则编辑框不会更新，但与我刚刚创建的文档中的相同。我发现部分刷新适用于数据源（documentid 是正确的），但似乎数据绑定不起作用，这意味着文档中的值没有写入编辑框。之后，如果我从组合框中选择另一个文档或执行另一个部分刷新，数据绑定会突然再次起作用。

有谁知道如何解决这个问题？为什么我需要在这里进行 2 次部分刷新？

我试图解决这个问题但没有奏效：

1.  将数据源的范围更改为请求
2.  执行完全更新，而不是仅对面板进行部分更新
3.  设置`ignorerequestparameter`为`true`
4.  所有可能的设置`computewithform`

我知道我可以手动将文档中的数据写入编辑框，但我认为应该可以在没有解决方法的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:48:31.473

这是一些 Java 代码的 SSJS 端口，当更改 bean 值服务器端时，我使用它来重置绑定到 bean 的字段的本地字段值。如果不这样做，UI 字段将显示“旧”值。

SSJS 未经测试，因此可能存在拼写错误。希望你会弄清楚如果你得到错误。

```
function resetComponentAndChildren( component ) {
    if( component instanceof javax.faces.component.EditableValueHolder ) {
        // Reset value bindings on component
        var valueHolder = component;
        valueHolder.setSubmittedValue( null );
        valueHolder.setValue( null );
        valueHolder.setLocalValueSet( false );
        valueHolder.setValid( true );
    }

    var children = component.getChildren();
    for ( var i = 0; i < children.length; i++ ) {       
        resetComponentAndChildren( children[i] );
    }
}

function resetRefreshTargetAndChildren(){
    var refreshId = param.get( "$$ajaxid" ).replaceFirst( "^view:", "" );
    var refreshTarget = view.findComponent( refreshId );
    resetComponentAndChildren( refreshTarget );
} 
```

**resetRefreshTargetAndChildren**用于重置部分刷新区域的字段。如果您的组合框事件导致刷新包含所有文档字段的区域，它应该满足您的需求（如果您的问题与我对 bean 的问题相同）。在组合框的 onChange 事件中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:41:45.777

通过为数据源尝试许多可能的参数组合以及刷新选项，我找到了解决方案：

在执行面板的部分刷新时，我必须在**“服务器选项”中将“****未经验证的处理数据”**设置为 true 。我无法解释为什么它现在有效，特别是因为我什至不使用任何字段验证。然而，它有效！

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:39:37.593

我确定您想做的事情是可能的……尽管我需要查看您的代码来模拟一些东西来玩它。当然，您会希望设置 ignoreRequestParams。我通常会不惜一切代价避免使用 computeWithForm。

虽然您应该能够通过数据绑定使其工作，但我通常更倾向于不将此类内容的编辑字段绑定到文档数据源。我想我会让它们不受约束，然后使用 SSJS 填充这些值，然后保存这些值。我不认为这是一种“解决方法”或“黑客”——在我看来，这只是另一种有效的方法。**

# java - 在可运行线程的文件中写入换行符

> ID：12585741
> 
> 赞同：1
> 
> 时间：2012-09-25T15:00:50.950
> 
> 标签：java, android, multithreading, printwriter

我想编写一个简单的类，每 5 秒打印一次文件。

我的代码是：

```
public class FileLoggerTask implements Runnable
{
    private PrintWriter printWriter = null;
    private boolean isActive = true;

    public FileLoggerTask(PrintWriter printWriter)
    {
        this.printWriter = printWriter;
    }

    public void run()
    {
        while(isActive)
        {
            printWriter.println("Test line");

            try
            {
                Thread.sleep(5000);
            }

            catch(InterruptedException e)
            {
                System.out.println(e);
            }
        }
    }

    void closeTask()
    {
        isActive = false;
    }
} 
```

在一个按钮的监听器中，我写道：

```
File file = new File("TestFile.txt");
FileWriter fileWriter = new FileWriter(file);
PrintWriter printWriter = new PrintWriter(fileWriter);
FileLoggerTask fileLoggerTask = new FileLoggerTask(printWriter);
Thread thread = new Thread(fileLoggerTask); 
```

在另一个按钮的监听器中，我写道：

```
fileLoggerTask.closeTask();
printWriter.close(); 
```

我的问题是它每 5 秒在我的文件中写入“测试行”，但它没有附加任何换行符。我尝试添加 printWriter.println() 或 printWriter.println("\n") 但它不起作用，我不知道为什么。

你有什么建议吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:04:23.463

你怎么知道没有换行符？我问是因为如果您在 Windows 上使用一些文本编辑器，但您的代码在 Unix 上运行，您可能看不到它们。

你试过`printWriter.println("\n\r")`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:04:29.437

试试这个：

```
String newLine = System.getProperty("line.separator"); 
```

# r - ggplot2中缺少情节标题

> ID：12585745
> 
> 赞同：1
> 
> 时间：2012-09-25T15:01:08.827
> 
> 标签：r, ggplot2

如何在 ggplot2 中创建绘图标题？我犯了一个愚蠢的语法错误吗？

ggplot2[文档](http://docs.ggplot2.org/current/labs.html)表明 labs(title = 'foo') 应该可以工作，但我只能获取参数`x='foo'`并`y='foo'`使用`labs()`. 既没有`ggtitle()`也没有`title()`工作。

这是一个例子。

```
x <- rnorm(10,10,1)
y <- rnorm(10,20,2)
xy.df <- data.frame(x,y)
qplot(x,y, data=xy.df, geom='point', color=x*y) + 
  labs(title = "New Plot Title",
       x='Some Data', 
       y='Some Other Data') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:20:00.533

您可以在`main`函数中使用参数`qplot`：

```
qplot(x,y, data=xy.df, geom='point', color=x*y, main = "New Plot Title") + 
  labs(x='Some Data', 
       y='Some Other Data') 
```

![在此处输入图像描述](../Images/a739c84f70c50b8340e4afe7200c6a22.png)

# c# - SQL Server 条件连接

> ID：12585746
> 
> 赞同：2
> 
> 时间：2012-09-25T15:01:13.543
> 
> 标签：c#, asp.net, mysql, sql, sql-server

我必须根据可以为空的值选择相应的列来加入。详细地：

```
SELECT shoporders.orderid, 
   shopaddresses.companyname, 
   shopaddresses.firstname, 
   shopaddresses.lastname, 
   shopaddresses.address1,  
FROM   shoporders 
   INNER JOIN shopaddresses 
           ON shoporders.InvoiceAddressId = shopaddresses.addressid
where orderid = 110
order by shoporders.createddate desc 
```

如果 shoporders.InvoiceAddressId 为空，那么我必须使用 shoporders.DeliveryAddressId

有什么线索吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:02:25.380

```
ON coalesce(shoporders.InvoiceAddressId, shoporders.DeliveryAddressId) = shopaddresses.addressid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:02:49.957

你可以试试

```
SELECT shoporders.orderid, 
   shopaddresses.companyname, 
   shopaddresses.firstname, 
   shopaddresses.lastname, 
   shopaddresses.address1,  
FROM   shoporders 
   INNER JOIN shopaddresses 
           ON COALESCE (shoporders.InvoiceAddressId, shoporders.DeliveryAddressId)  = shopaddresses.addressid
where orderid = 110
order by shoporders.createddate desc 
```

**编辑：**有关合并的定义，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms190349.aspx)。总结如下

返回其参数中的第一个非空表达式。`COALESCE(expression1,...n)`等价于以下`CASE`表达式：

```
CASE

   WHEN (expression1 IS NOT NULL) THEN expression1

   WHEN (expression2 IS NOT NULL) THEN expression2

   ...

   ELSE expressionN

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:05:15.040

你可以试试

```
 SELECT shoporders.orderid, 
       shopaddresses.companyname, 
       shopaddresses.firstname, 
       shopaddresses.lastname, 
       shopaddresses.address1,  
       FROM   shoporders 
       INNER JOIN shopaddresses 
       ON( 
          (shoporders.InvoiceAddressId IS NOT NULL  
                  AND shoporders.InvoiceAddressId = shopaddresses.addressid)
          OR (shoporders.DeliveryAddressId = shopaddresses.addressid) 
          )

       WHERE orderid = 110
       ORDER BY shoporders.createddate DESC 
```

# android - 如何通过 Intent 在 Android 中打开文件

> ID：12585747
> 
> 赞同：16
> 
> 时间：2012-09-25T15:01:34.230
> 
> 标签：android, android-intent, filesystems, actionview

如何打开以前存储在“privat”文件系统中的文件？该文件正在由 Web 服务下载，应存储在本地 fs 上。尝试通过 Intent (Action_View) 打开文件时出现“奇怪”错误。尽管该文件存在于文件系统中（在 emulator/eclipse 的文件资源管理器中看到该文件），但它不会显示在启动的调用画廊活动中。画廊显示的不是图片，而是一个没有内容的黑屏（操作栏除外）。尝试通过此方法打开 pdf/movie/mp3 文件时也会发生同样的情况（例如，pdf 表示文件已损坏）。

顺便说一句：已经存储在本地 fs 上的数据是有效的（没有损坏），我从调试器下载了文件（通过 pull 方法），这些文件可以在我的工作站上打开......

```
public void onAttachment(Context context, Attachment attachment) {
    try {
        //Attachment is a structured data object that contains of a byte[], filename and mimetype (like image/jpeg)
        FileOutputStream fos = FileOutputStream fos = context.openFileOutput(attachment.getAttachmentFileName(), Context.MODE_PRIVATE);
        fos.write(attachment.getBinary());
        fos.flush();
        fos.close();
        File f = context.getFileStreamPath(attachment.getAttachmentFileName());
        Uri uri = Uri.fromFile(f);          
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(uri,attachment.getAttachmentMimetype());
        context.startActivity(intent);                  
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T15:13:08.860

您的代码中附件的类型是什么？也许它返回错误的 mime 类型？

这段代码对我有用：

```
File file = new File("EXAMPLE.JPG");

// Just example, you should parse file name for extension
String mime = MimeTypeMap.getSingleton().getMimeTypeFromExtension(".JPG");

Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), mime);
startActivityForResult(intent, 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:19:56.527

您不能像那样打开不在 sdcard 上的文件。您需要将文件复制到 SD 卡，然后打开它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:08:43.043

将位置设置为“ `openFileOutput("fileName", Activity.MODE_WORLD_READABLE)`”时，它将起作用。`Context.MODE_PRIVATE`设置为“ ”时，其他应用程序无法读取存储的数据（即使查看）

参见[stackoverflow上的其他帖子](https://stackoverflow.com/questions/7399001/android-uri-for-open-an-image-with-action-view)

# javascript - 如何判断右上角是否在可编辑的 div 中可见

> ID：12585749
> 
> 赞同：2
> 
> 时间：2012-09-25T15:01:35.987
> 
> 标签：javascript, jquery, html

我有一个`<div>`设置为内容可编辑并具有固定高度的。溢出时`<div>`显示垂直滚动条。我想要的是在我的可编辑文件中检测图像右上角（或左上角）点的绝对坐标，`<div>`尤其是当图像部分可见时。是否可以？更重要的是，有没有办法判断右上角是对用户可见还是在视图外滚动？

任何帮助或想法将不胜感激。

这应该说明我的想法：

![带有一些内容的可编辑 div](../Images/88968b2991244310dc85074e90beec52.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:05:11.197

“是顶部可见”的问题是微不足道的：只需检查 div`scrollTop`并查看它是否非零（或更具体地说：小于`offsetTop`您要查找的元素的 ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:04:31.003

您可以使用获取元素相对于*文档*[`.offset`](http://api.jquery.com/offset/)的 X/Y（左上角）坐标。为了查看它是否在窗口之外，请将其与. 后者为您提供当前窗口相对于文档的 X/Y 坐标，因此如果窗口的 Y 坐标高于相关元素，则它的顶部不在屏幕上。*`$(window).offset()`*

# java - Selenium webdriver：将屏幕截图导出到机器人框架日志文件

> ID：12585753
> 
> 赞同：0
> 
> 时间：2012-09-25T15:02:11.540
> 
> 标签：java, selenium-webdriver, webdriver, robotframework

我将 selenium webdriver 与机器人框架一起使用，但遇到以下问题：

每次测试失败时，我都想制作一个屏幕截图并将此屏幕截图导出到 log.html 文件。

制作截图是一件很容易的事情：

```
 String path;
    try {
        WebDriver augmentedDriver = new Augmenter().augment(driver);
        File source = ((TakesScreenshot) augmentedDriver)
                .getScreenshotAs(OutputType.FILE);
        path = "./screenshots/" + source.getName();
        FileUtils.copyFile(source, new File(path));
    } catch (IOException e) {
        path = "Failed to capture screenshot: " + e.getMessage();
    } 
```

但问题是将屏幕截图导出为html。

在 selenium RC 中，带有屏幕截图的 html 部分如下所示：

```
<tbody>
    <tr>
        <td class="time">15:25:44.968</td>
        <td class="fail level">FAIL</td>
        <td class="message">Value of text field 'xpath=//input' should have been '' but was 'VpomRihh3Xa' Screenshot: </td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="./screenshots/screenshot175324738088103861.png">
        </td>
    </tr>
</tbody> 
```

好的，所以我认为这应该很容易实现，并将我的 captureScreenshot() 函数扩展为：

```
private String captureScreen() {

    String path;
    try {
        WebDriver augmentedDriver = new Augmenter().augment(driver);
        File source = ((TakesScreenshot) augmentedDriver)
                .getScreenshotAs(OutputType.FILE);
        path = "./screenshots/" + source.getName();
        FileUtils.copyFile(source, new File(path));
    } catch (IOException e) {
        path = "Failed to capture screenshot: " + e.getMessage();
    }

    StringBuilder builder = new StringBuilder();

    builder.append("\n<tr><td colspan=\"3\"><img src=\"").append(path).append("\"></tr></td>");

    System.out.println(builder.toString());

    return "";

} 
```

但问题是，这种实现不能满足我的需要。它看起来不错，但我得到的只是标签内的一些文本，不会显示为图像。

为了更好地理解它，这里是我得到的截图：

[http://gyazo.com/5d7dec1e05443786b5d390054edad3e8](http://gyazo.com/5d7dec1e05443786b5d390054edad3e8) （由于声誉低，无法发布图片）

所以问题是 - 如何将屏幕截图导入机器人框架 log.html 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:59:12.673

尝试使用以下示例：

```
 System.out.println("*HTML* <img src=\"testScreenshot.png\" width=\"800px\">"); 
```

# c++ - 如何组织更大的多类 GUI 项目？

> ID：12585754
> 
> 赞同：1
> 
> 时间：2012-09-25T15:02:14.133
> 
> 标签：c++, class, project

我制作了一个控制台应用程序，它可以做一些事情。看起来像：

```
class C
    {
    public:
        void print()
        {
            print("something that only class C knows");
        }
    }   
//**************************************    

class B
    {
    public:
        void print()
        {
            print("something that only class B knows");

            for_each(C c)
            {
                c.print();
            }
        }

    private:
        std::vector<C> c_classes;
    }
//**************************************

class A
    {
    public:
        void print()
        {   
            print("something that only class A knows");

            for_each(B b)
            {
                b.print();
            }
        }
    private:
        std::vector<B> b_classes;
    } 
```

并且在控制台中运行良好，我可以从任何地方打印。

当我想将此应用程序移植到 GUI 时出现问题。我需要展示 A、B 和 C 班知道的一切。做这个的最好方式是什么？

我想让 A 类返回对 B 类向量的引用（它返回对 C 类向量的引用）并从 GUI 类中的每个实例获取值。

但我不想让 GUI 类如此依赖这些类。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:13:18.590

`Printable`创建一个具有纯虚方法（可能返回一个字符串）的通用接口，`print()`并在某处有一个指向该对象的指针向量。有类`A`，`B`并`C`派生自`Printable`. 因此，当您想打印每个对象的统计信息时，只需遍历此向量并显示输出即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:30:17.290

从类层次结构中获取数据的一个好方法是使用[访问者设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)。通过这种方式，层次结构被遍历（类似于您现在所拥有的）并生成可供 GUI 使用的结果。这个结果可能是一个 std::map，对象名作为键，打印的字符串作为值；GUI 可以使用此地图来制作其表格。

不利的一面是，访问者最初会产生一些额外的复杂性，希望以后会得到回报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:41:23.603

其他答案的替代方法是实现一个“to_string()”成员，该成员存在于每个类中并返回一个带有相关数据的字符串（例如，这是所有 Java 程序中的完成方式）。

或者，您可以为您的特定类重载 ostream << 运算符。网上应该有很多例子来描述如何做到这一点。

# c# - 为 combobbx 项目设置正确的索引

> ID：12585758
> 
> 赞同：1
> 
> 时间：2012-09-25T15:02:23.153
> 
> 标签：c#, winforms

有些对象具有诸如 OrderNanme、OrderCode 之类的属性，以及我目前将它们插入到 HashSet 中的许多其他属性（它们是唯一的，因此在我的场景中可以找到使用“集合”）。

然后在代码中的其他地方我枚举这个 HashSet 并将这些对象的 OrderName 添加到组合框，以便用户可以看到组合框中的名称。

现在我还有一个 OrderCode，如果它与那些 HashSet 项目中的任何订单代码匹配，那么我希望在该订单上设置组合框的默认文本，当然我们仍然在组合框中填充整个项目。 .. 有没有办法一次性做到？我想我需要另一个 foreach 去查找该项目在哪里并将其索引设置为组合框的选定索引，但有更短的方法吗？

```
double defaultOrder = GiveMeDefaulyOrder() ; // ok so some order number we have here.

foreach(CustomerOrderClass item in cntrlr.ThatHashSet)
{
    comboBox.Item.Add( item.OrderName)
}

//  Now do I need another foreach to just go and find that defaultOrder and set its defaultIndex...but is there a shorter way for this? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:32:13.493

我以组合框的DataSource绑定一个简单的HashSet为例。
此代码需要使用一些 Linq 表达式，但不需要循环将 Order 项添加到组合框。

```
public partial class Form1 : Form
{
    HashSet<Order> list = new HashSet<Order>();

    public Form1()
    {
        InitializeComponent();
        LoadData();
        comboBox1.DisplayMember = "OrderName";
        comboBox1.ValueMember = "OrderNum";
        comboBox1.DataSource = list.ToArray<Order>();
    }

    private void LoadData()
    {
        // Load some sample data
        for(int x = 0; x < 10; x++)
        {
            Order o = new Order(){OrderName = "Name" + x, OrderNum = x};
            list.Add(o);
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // Select the item with order number = 4 
        var x = list.Where<Order>(o => o.OrderNum == 4).FirstOrDefault<Order>();
        comboBox1.SelectedItem = x;

    }
}

public class Order
{
    public string OrderName;
    public int OrderNum;
    public override string ToString()
    {
        return this.OrderName;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:09:35.223

如果您以后不打算以某种方式对组合内容进行排序，则实际上可以在`foreach`迭代本身期间找到索引。例如：

```
int currentComboIndex = 0;
foreach(CustomerOrderClass item in cntrlr.ThatHashSet)
{
    comboBox.Item.Add( item.OrderName)
    if(orderCode == item.OrderCode)
        currentComboIndex ++;
} 
```

退出循环后，您将获得或或等于指定的**最后**`0`一项的索引（可以顺便说一句），因此您可以在循环后执行以下操作：**`orderCode``0`**

 **```
comboBox.SelectedIndex = currentComboIndex; 
```**

# php - 提交或回滚是否在 PHP 的 mysqli 中隐含地打开自动提交？

> ID：12585760
> 
> 赞同：4
> 
> 时间：2012-09-25T15:02:26.647
> 
> 标签：php, mysqli, commit, rollback, autocommit

我正在使用 mysqli 类在 PHP 中进行交易，我发现 autocommit() 的文档非常不完整。我从示例中推断，将 autocommit 设置为 false 会隐式执行“开始事务”。这个对吗？更重要的是，我看不到自动提交在哪里被重置为 true，我认为它应该是在事务完成后。这会在调用 commit() 或 rollback() 方法时自动发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:09:00.983

它不会隐式执行 a `START TRANSACTION`，因为它执行临时事务：[http ://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

使用`autocommit(false)`时，您必须在任何时候执行写入查询`COMMIT`才能使其在磁盘上永久更新。从那时起，该连接中的所有查询都是如此。使用`autocommit(true)`，如果您使用`START TRANSACTION`，运行更新，运行`COMMIT`，然后运行另一个更新，*两个*更新将立即应用（即不需要第二个`COMMIT`）。

`autocommit`永远不会重置为`true`，但它只设置每个会话（MySQL 会话，而不是 PHP 会话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T05:02:22.587

对于以下查询，Autocommit(FALSE) 将保持为 false。执行提交语句后，自动提交将恢复为 true。不确定回滚是否相同。我已经使用这种方式几年了，它一直运行良好。

当您希望数据库保持一致性时，这是一种方法。

# matlab - 有人可以帮我解决matlab中的这个for循环吗？

> ID：12585764
> 
> 赞同：0
> 
> 时间：2012-09-25T15:02:39.157
> 
> 标签：matlab, for-loop

我是 Matlab 的新手。仍在尝试学习语法和所有内容。我有一个大数据矩阵 DI 正在尝试删除部分大矩阵并制作小矩阵。我正在搜索 3 列并返回包含数字的矩阵在 3 列中。

```
BPI20 = D(D(:,1) == 0 &D(:,2)==0 &D(:,6)==20,:);
BPI21 = D(D(:,1) == 0 &D(:,2)==0 &D(:,6)==21,:);
BPI22 = D(D(:,1) == 0 &D(:,2)==0 &D(:,6)==22,:);
BPI23 = D(D(:,1) == 0 &D(:,2)==0 &D(:,6)==23,:);
BPI24 = D(D(:,1) == 0 &D(:,2)==0 &D(:,6)==24,:); 
```

我想为上面的代码写一个for循环，变量BPI的值也应该增加谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:24:07.523

不要使用这样的名称`BPI`（即名称本身带有增量的名称），而是使用[元胞数组](http://www.mathworks.nl/help/matlab/ref/cell.html)：

```
col1is0 = D(:,1)==0;
col2is0 = D(:,2)==0;

maxBPI = 24;
BPI = cell(maxBPI,1);
for ii=1:maxBPI
    BPI{ii} = D(col1is0 & col2is0 & D(:,6)==ii, :);
end 
```

另见[这篇文章](http://www.mit.edu/~pwb/cssm/matlab-faq_4.html#evalcell)！

# android - 自定义视图很慢

> ID：12585772
> 
> 赞同：1
> 
> 时间：2012-09-25T15:02:56.977
> 
> 标签：android, android-layout, android-custom-view

我正在构建一个数独游戏，但我在这里遇到了性能问题。

我有这个网格，我想用 81 个单元格填充网格。这些单元格是自定义视图，因为我希望它们中有 10 个标签以及一些功能 blabla。

我现在的问题是我必须创建 81 个子视图（没问题），用我的模型中的数据填充它们（没问题），然后将整个网格添加到我的布局中（biiiig 问题）。

整个建筑是在这样的异步任务中完成的：

```
protected Void doInBackground(Void... params) {
    Model.Cell[][] sudoku = Controller.getInstance().startNewGame(); //call model for a new game
    ArrayList<TableRow> rows = ga.generateTable(sudoku); //generate the table
    tl = new TableLayout(ga); //create tablelayout
    //add the rows to the layout
    for (TableRow v : rows) {
        tl.addView(v);
    }

    return null;
} 
```

然后在这完成后：

```
protected void onPostExecute(Void result) {
    super.onPostExecute(result);

    RelativeLayout rl = (RelativeLayout) ga.findViewById(R.id.gridContainer); //get the container
    //create layout rules
    android.widget.RelativeLayout.LayoutParams params = new android.widget.RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.CENTER_HORIZONTAL);
    //add the table to the container with the layout
    rl.addView(tl, params); //this is slow as hell.

    //stop loading indicator
    this.loading.dismiss();
} 
```

我不介意有一段时间加载栏。但是我的加载栏正在停止，因为 rl.addView(tl, params) 非常慢。

有人可以帮我如何保持我的主线程快速吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:23:15.910

我相信问题在于您要在视图中添加*大量的*TableLayout。它必须遍历每一个单元格以使其适合布局`measure`。`layout`

您可以做的一件事是创建单`TableLayout`输入`onPreExecute`并将其添加到布局中。然后，您可以创建每个面板并将其添加到`TableLayout`正在制作的面板中。这将在单个单元格上完成所有布局内容，而不是在一个大块中完成所有布局。

我想指出可能或可能不相关的一件事是您`TableLayout`在后台线程中创建了一个。[众所周知，在后台线程中膨胀视图会导致某些设备出现问题。](https://stackoverflow.com/questions/6691311/inflate-a-view-in-a-background-thread) 你没有膨胀。你正在创建一个`View`对象，所以它*很可能*是不一样的，但我想没有保证。因此，我可能会使用后台线程来创建和收集每个单元格的数据，然后创建并添加在`onProgressUpdate`UI 线程上运行的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:43:34.603

我发现与 tablerows 结合使用的 tablelayout 非常慢。我尝试使用 Horizo​​ntal 和 VerticalLinearlayouts，这将生成视图的速度至少提高了 300%。

感谢所有新提示。以后我会考虑的！

# java - 在java中运行程序阅读它在做什么

> ID：12585774
> 
> 赞同：0
> 
> 时间：2012-09-25T15:02:57.753
> 
> 标签：java, runtime.exec, processbuilder

我想在java中运行一个像视频游戏这样的程序并让它输出它在java中所做的一切，这可能吗？为了澄清一切，我想看看游戏在做什么方面的输出。我知道它可能无法完全理解，因为它会使用不同的程序语言。这里有人记得使用gameshark/gamegenie破解游戏代码吗？这就是我想做的事情。

到目前为止，我尝试了运行时和 processbuilder，但它什么也没做。

下面是我的代码：

```
public class ProcessW {
     public static void main(String[] args) throws IOException {
         String command = "...my game...";

         ProcessBuilder pb = new ProcessBuilder(command); 
         pb.redirectErrorStream(true); 
         Process proc = pb.start(); 

         java.io.InputStream is = proc.getInputStream(); 
         InputStreamReader isr = new InputStreamReader(is); 
         BufferedReader br = new BufferedReader(isr); 

         String line; 
         int exit = -1; 

         while ((line = br.readLine()) != null) { 
             // Outputs your process execution 
             System.out.println(line); 
             try { 
                 exit = proc.exitValue(); 
                 if (exit == 0)  { 
                     // WinProcess finished 
                 } 
             } catch (IllegalThreadStateException t) { 
                 // The process has not yet finished.  
                 // Should we stop it? 
                 //if (processMustStop()) 
                     // processMustStop can return true  
                     // after time out, for example. 
                     proc.destroy(); 
             } 
         } 
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:08:04.260

如果在没有 Java 的情况下启动游戏时游戏在控制台上打印了一些东西，那么你的问题是缓冲。只有在写入 4096 字节的输出后，Java 才会看到游戏的输出。

防止这种情况的唯一方法是在每行之后更改游戏代码以调用`stdout.flush()`（或类似）以强制操作系统将输出发送到 Java 进程。

# sql - SQL - 为什么在比较字符时填充空格？

> ID：12585776
> 
> 赞同：1
> 
> 时间：2012-09-25T15:03:04.990
> 
> 标签：sql, oracle, db2

似乎 DB2 和 Oracle 通过在右边用空格填充较短的字符串来实现字符比较。但为什么？

如果数据库引擎修剪较大的字符值而不是用空格填充较短的字符值不是更好吗？即，如果我的查询是`SELECT * from SOME_TABLE where CUSTOMER_NAME = 'Popeye '`，数据库引擎最终会在每一行中添加空格`SOME_TABLE`，而它本可以修剪此处传递的值，即`'Popeye '`

另外，只是想知道为什么 Oracle 和 DB2 只在右边添加空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:12:40.897

您混淆了不同类型的角色以及正在发生的事情。当你执行：

```
SELECT * from SOME_TABLE where CUSTOMER_NAME = 'Popeye ' 
```

“SOME_TABLE 中的每一行”都没有添加空格。唯一的问题是结果的宽度。此宽度由 SOME_TABLE 中列的属性设置，而不是由 WHERE 子句中出现的内容设置。

如果您的 CUSTOMER_NAME 被声明为 char(x) 值，则字符串必须具有该长度。说，它是`char(10)`，你将“大力水手”分配给它。该值有六个字符，并且必须以某种方式填充到 10。SQL 标准是在右侧填充，使值`'Popeye '`.

如果您想要可变长度字符串，请使用 varchar 或 varchar2。

# java - SureFire 插件的问题：-“分叉的虚拟机在没有正确告别的情况下终止。虚拟机崩溃或 System.exit 被调用？”

> ID：12585784
> 
> 赞同：15
> 
> 时间：2012-09-25T15:03:42.347
> 
> 标签：java, junit, powermock, maven-surefire-plugin

运行单元测试时发生以下异常：

```
org.apache.maven.lifecycle.LifecycleExecutionException: ExecutionException; nested exception is java.util.concurrent.ExecutionException: java.lang.RuntimeException: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ?
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:600)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T15:15:12.477

> 有什么建议么？

异常的错误消息可能解释了发生了什么。您的一个单元测试有

*   称为`System.exit()`, 或
*   破坏了单元测试工具，或
*   做了一些导致运行它的 JVM 崩溃的事情。

我们不能告诉你是哪一个。

（我想这个问题被报告了，因为 maven JVM 期望子 JVM 将单元测试结果写入其标准输出。它从孩子那里得到的结果是缺少表明单元测试的消息（或其他）已经完成。可能根本原因可能与建议的替代方案不同，但我对此表示怀疑，而且猜测毫无意义......）

有问题的单元测试的日志文件中可能有更多信息。检查那个/他们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-30T12:38:04.207

我在运行 Maven 目标“包”时遇到了同样的问题。当我在执行“package”之前执行目标“clean”时，问题得到了解决

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-24T23:56:07.630

我有同样的问题。结果我更新了我的库而没有更新我的 java 版本，而且我的 servlet.jar 有点太新了。在“forked VM bla exception”之前，我在日志中发现了以下消息：

```
Caused by: java.lang.UnsupportedClassVersionError: javax/servlet/ServletRequest : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
at java.lang.Class.getMethod0(Class.java:2670)
at java.lang.Class.getMethod(Class.java:1603)
at org.apache.maven.surefire.util.ReflectionUtils.tryGetMethod(ReflectionUtils.java:57)
at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isSuiteOnly(JUnit3TestChecker.java:64)
at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.isValidJUnit3Test(JUnit3TestChecker.java:59)
at org.apache.maven.surefire.common.junit3.JUnit3TestChecker.accept(JUnit3TestChecker.java:54)
at org.apache.maven.surefire.common.junit4.JUnit4TestChecker.accept(JUnit4TestChecker.java:51)
at org.apache.maven.surefire.util.DefaultScanResult.applyFilter(DefaultScanResult.java:97)
at org.apache.maven.surefire.junit4.JUnit4Provider.scanClassPath(JUnit4Provider.java:194)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:92) 
```

更新 JVM 有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-29T23:12:53.413

我只在接受的答案中报告的詹金斯遇到了同样的问题，并且花了一个小时才意识到问题是詹金斯的工作名称中有一个空格，这是在做一些事情（仍然不知道是什么）由于作业名称是 jenkins 工作区中所有内容所在的文件夹，因此调用 surefire 插件会发疯。

所以，要清楚，詹金斯与这个问题无关，我只在詹金斯看到它，因为只有我在我的道路上有一个空间

我希望这对其他人有帮助。这是在万无一失的 2.14.1 和 2.16 下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T19:22:30.867

这可能与管理员权限有关。`mvn clean install`从 Cygwin运行构建时，我遇到了同样的问题。

现在每次构建时，我都以“以管理员身份运行”启动 cygwin，问题就解决了。

# android - Android：ScrollView 不适用于 TableLayout

> ID：12585787
> 
> 赞同：1
> 
> 时间：2012-09-25T15:03:55.087
> 
> 标签：android, scrollview, tablelayout

我尝试在 ScrollView 中使用 ScrollView 和 TableLayout，如下所示：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Input text: " />

            <EditText
                android:id="@+id/weightEditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:inputType="numberDecimal" >

                <requestFocus />
            </EditText>
        </TableRow>

    </TableLayout>

</ScrollView> 
```

但它不起作用。即使我的内容太大，也不会显示滚动条。有没有人有任何建议为什么它会这样工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:24:51.073

尝试将滚动视图 layout_height 更改为 match_parent ，如下所示：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp" > 
```

当您使用 wrap_content 时，即使屏幕结束，您的滚动视图也会变大，但是当使用 match_parent 时，您的滚动视图将适合屏幕，并且当滚动视图的内容溢出时，它将显示滚动条。

罗尔夫

# wpf - 当用户单击它时关闭 WPF 弹出窗口

> ID：12585789
> 
> 赞同：3
> 
> 时间：2012-09-25T15:03:58.800
> 
> 标签：wpf, xaml, mvvm, popup

单击其内容时如何关闭以下弹出窗口？

```
<Button Name="myButton" Content="Hover to open" />
<Popup PlacementTarget="{Binding ElementName=myButton}" Placement="Bottom">
    <Popup.Resources>
        <DataConversion:BooleanOrConverter x:Key="booleanOrConverter" />
    </Popup.Resources>            
    <Popup.IsOpen>
        <MultiBinding Mode="OneWay" Converter="{StaticResource booleanOrConverter}">
            <Binding Mode="OneWay" ElementName="myButton" Path="IsMouseOver"/>
            <Binding RelativeSource="{RelativeSource Self}" Path="IsMouseOver" />
        </MultiBinding>
    </Popup.IsOpen>
    <!-- some content here -->
</Popup> 
```

我想避免在文件后面的代码中编写代码，并将诸如 IsOpen 属性或 MouseDown 事件之类的视觉和行为事物绑定到 ViewModel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:25:59.623

`EventTrigger`您需要一个`Popup`触发情节提要的情节提要，该情节提要包含`BooleanAnimationUsingKeyFrames`设置`IsOpen`为的情节提要`false`，[类似于此](https://stackoverflow.com/questions/3372628/help-me-please-with-a-popup)。更容易使用代码隐藏；o)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:31:18.147

您可以只制作`Popup.Child`a `Button`（样式让它看起来不像一个），处理它的`Click`事件并设置`IsOpen`为`false`（最好使用[`SetCurrentValue`](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.setcurrentvalue.aspx)不破坏绑定）。

您可以在后面的代码中执行此操作，也可以使用行为/触发操作。

# java - 不断得到： Bean 名称“索引”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：12585790
> 
> 赞同：1
> 
> 时间：2012-09-25T15:03:59.267
> 
> 标签：java, spring, spring-mvc, controller

我不明白我做错了什么。我有一个控制器：

```
@Controller
@RequestMapping(value = "/index.htm")
public class LoginController {

    @Autowired
    private AccountService accountService;

    @RequestMapping(method = RequestMethod.GET)
    public String showForm(Map model) {
        model.put("index", new LoginForm());
        return "index";
    }

    @ModelAttribute("index")
    public LoginForm getLoginForm() {
        return new LoginForm();
    }

    @RequestMapping(method = RequestMethod.POST)
    public String processForm(LoginForm loginForm, BindingResult result,
                              Map model) {

        if (result.hasErrors()) {
            HashMap<String, String> errors = new HashMap<String, String>();
            for (FieldError error : result.getFieldErrors()) {
                errors.put(error.getField(), error.getDefaultMessage());
            }
            model.put("errors", errors);
            return "index";
        }

        List<Account> accounts = accountService.findAll();
        loginForm = (LoginForm) model.get("loginForm");

        model.put("index", loginForm);
        return "loginsuccess";
    }

} 
```

和 Spring html 表单：

```
<form:form action="index.htm" commandName="index">

    <table cellspacing="10">
        <tr>
            <td>
                <form:label path="username">
                    <spring:message code="main.login.username"/>
                </form:label>
            </td>
            <td>
                <form:input path="username" cssClass="textField"/>
            </td>
        </tr>
        <tr>
            <td>
                <form:label path="password">
                    <spring:message code="main.login.password"/>
                </form:label>
            </td>
            <td>
                <form:password path="password" cssClass="textField"/>
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" class="button" value="Login"/>
            </td>
        </tr>
    </table>

</form:form> 
```

当我尝试访问 URL 时：`http://localhost:8080/webclient/index.htm`

我不断收到此异常：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'index' available as request attribute 
```

我的控制器出了什么问题，为什么我不断收到这样的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:44:56.387

我会做出以下改变。首先你的`GET`方法应该是这样的：

```
@RequestMapping(method = RequestMethod.GET)
public String showForm(@ModelAttribute("index") LoginForm loginForm) {
    return "index";
} 
```

使用`@ModelAttribute`注解会自动将“索引”放入请求的模型中。

你的`POST`方法声明应该是这样的：

```
@RequestMapping(method = RequestMethod.POST)
public String processForm(@ModelAttribute("index") LoginForm loginForm, 
                          BindingResult result, Map model) { 
```

最后，也可能是真正的问题，将控制器类的`@RequestMapping`注释更改为：

```
@RequestMapping(value = "/index") 
```

您拥有的“.htm”是多余的。您已经配置了 web.xml 和 Spring 配置以响应“.htm”请求。

# python - 根据每个项目的第一个字母打印字符串项目的函数

> ID：12585791
> 
> 赞同：1
> 
> 时间：2012-09-25T15:03:59.720
> 
> 标签：python, string, sorting

在 Python 中，我试图创建一个函数，该函数将根据每个字符串项的第一个字母从字符串中打印项。

```
def foods(lst):
    if lst[0][0] == 'A':
        print(lst[0])

foods(['Apples', 'Bananas', 'Yogurt', 'Zucchini', 'Grapes'])
Apples 
```

我不太确定如何制作它，以便如果您只想根据您的字符串项目列表打印以 A->L 或 L->Z 开头的项目。

我尝试使用`lst[0][1]`etc 添加更多 if 语句来检查每个项目，但什么都不会打印。

我还尝试创建一个语句，例如：

```
if [x[0] for x in (lst)] == ['A', 'B', 'C']: 
```

但也不会打印任何内容。

任何帮助将不胜感激，我希望我能明确我的问题。谢谢。

基于你们的一些人的帮助和回顾以前的笔记，我发现了一种更“初学者”的方式来完成我想要问的事情；

```
 def foods(lst):
        for char in lst:
            if char[0] > 'N':
                pass
            else:
                print(char) 
```

谢谢各位帮忙，不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:07:29.517

您可以使用列表推导和 ord 来执行此操作：

```
[x for x in lst if ord('A') <= ord(x[0]) < ord('L')]
              # check first letter is between A and L

lst = foods(['Apples', 'Bananas', 'Yogurt', 'Zucchini', 'Grapes'])
print [x for x in lst if ord(A) <= ord(x[0]) < ord(L)]
# ['Apples', 'Bananas', 'Grapes'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:09:53.383

```
def food(lst, start, end):
    charLst = [chr(x) for x in range(ord('A'),ord('D'))]
    if lst[0][0] in charLst:
         print(lst[0])

foods(['Apples', 'Bananas', 'Yogurt', 'Zucchini', 'Grapes'], 'A', 'D') 
```

> > 苹果香蕉

# html - IE8中的表头，开启了怪癖模式

> ID：12585795
> 
> 赞同：1
> 
> 时间：2012-09-25T15:04:09.890
> 
> 标签：html, html-table, internet-explorer-8

我觉得这是一个基本问题，但在这里找不到解决方案。

我有一个要在 IE8 上显示的 html 页面（怪癖模式）。可悲的是，标题并没有使用它们应该使用的所有空间，而是显示在多行而不是一行。相同的 html 源代码适用于 chrome/firefox，但不适用于 ie8 并开启了 quirks 模式。

我应该怎么做才能在 IE8 上获得 chrome 的结果？不需要多浏览器支持，只需要IE8。

文件：

```
<html>
<head>
<style type="text/css">
.color5 {background-color:#DBEAF5;font-family:arial;font-size:8pt;font-weight:normal;}
</style>
</head>
<body>
<TABLE WIDTH="100%"  cellpadding=0 cellspacing=1 border=0  class="color6"    >
  <TR id="ED_ACTIONPLAN1_TR_1"  class="color5" >
<TD    WIDTH="47" class="color5" ALIGN=CENTER ></TD>
<TD    WIDTH="86" class="color5" ALIGN=CENTER >Code</TD>
<TD    WIDTH="285" class="color5" ALIGN=CENTER >Libelle</TD>
<TD    WIDTH="86" class="color5" ALIGN=CENTER >Priorite</TD>
<TD    WIDTH="86" class="color5" ALIGN=CENTER >Date de debut effective</TD>
<TD    WIDTH="109" class="color5" ALIGN=CENTER >Date d'echeance reelle</TD>
<TD    WIDTH="86" class="color5" ALIGN=CENTER >Taux de realisation</TD>
</TR>
</TABLE>
</body>
</html> 
```

这些图像来自我的 1920x1080 屏幕的右上角。

铬合金：

![镀铬版](../Images/e9dc003f5d402ac983fffea3182ff749.png)

IE8：

![IE8版本](../Images/c9fa972988d3ef3db84ef8e412204fee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:13:46.740

添加`white-space: pre;`类然后它将在 IE 中单行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T01:54:55.923

问题是您将`td`元素固定值（*被视为像素*）提供给宽度为 100% 的表格（*这意味着其实际像素大小取决于浏览器大小*）。

旧版本的 IE 将以指定的固定大小换行文本，并且您的文本不适合 86 或 109 像素。

如果您将固定数字转换为百分比，则可以使用

因此，您当前的像素值总计为 785 个像素。如果你做你的数学，你会得到这个

```
<TABLE WIDTH="100%"  cellpadding=0 cellspacing=1 border=0  class="color6">
    <TR id="ED_ACTIONPLAN1_TR_1"  class="color5" >
        <TD WIDTH="6.02%" class="color5" ALIGN=CENTER ></TD>
        <TD WIDTH="10.95%" class="color5" ALIGN=CENTER >Code</TD>
        <TD WIDTH="36.30%" class="color5" ALIGN=CENTER >Libelle</TD>
        <TD WIDTH="10.95%" class="color5" ALIGN=CENTER >Priorite</TD>
        <TD WIDTH="10.95%" class="color5" ALIGN=CENTER >Date de debut effective</TD>
        <TD WIDTH="13.88%" class="color5" ALIGN=CENTER >Date d'echeance reelle</TD>
        <TD WIDTH="10.95%" class="color5" ALIGN=CENTER >Taux de realisation</TD>
    </TR>
</TABLE> 
```

**[在http://jsfiddle.net/gaby/4qhPZ/1/embedded/result/](http://jsfiddle.net/gaby/4qhPZ/1/embedded/result/)**工作演示****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:25:36.537

请使用这种风格。

```
<style type="text/css">
   .color5 {background-color:#DBEAF5;font-family:arial;font-size:8pt;font-weight:normal;text-align:center;width:auto;padding:5px}
</style> 
```**

# matlab - 为包含空格的matlab结构字段名赋值

> ID：12585797
> 
> 赞同：2
> 
> 时间：2012-09-25T15:04:16.460
> 
> 标签：matlab

我正在使用一个大型的预定义 Matlab 结构，该结构具有多个包含空格和奇怪字符的字段名，例如：

```
Pending Equity > T: [20000x1 double] 
```

我可以很好地看到数据：

```
>> r.('Pending Equity > T')(1)

ans =

     0 
```

但是，我无法分配新值：

```
>> r.('Pending Equity > T')(1) = 5
??? Invalid field name: 'Pending Equity > T'. 
```

有任何想法吗？我无法更改原始字段名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:16:48.070

从[结构文档](http://www.mathworks.nl/help/matlab/ref/struct.html#inputarg_field)：

> 字段名称，指定为字符串。有效的字段名称以字母开头，可以包含字母、数字和下划线。字段名称的最大长度是 namelengthmax 函数返回的值。

所以没有空格（也没有`><!:;,`等），尝试使用下划线而不是空格。

如果您确定可以很好地读出数据，那么它最初是如何构建的？从上面可以看出，不支持这样的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:39:23.933

好吧，您可以创建一个 new `struct`，它是一个副本，`r`但具有有效的字段名：

```
names    = fieldnames(r);
newnames = genvarname(names);

for ii = 1:numel(names)
    new_r.(newnames{ii}) = r.(names{ii});
end 
```

这将允许您以您指定的方式将内容分配给所有字段。

它有一个明显的缺点，例如字段名`'Pending Equity > T'`会被重命名为更不漂亮的`'PendingEquity0x3ET'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:02:36.210

有两件事要尝试。

将其转换为有效的数据类型：使用`fieldnames`和`struct2cell`从该单元格中弹出名称和所有数据元素。然后，您可以手动查找该列表中的字段名称以获取元胞数组的索引。您可以编写一个小类，将它们包装在字段中，其行为就像一个允许任意字段名称的结构，这与大多数期望结构的代码兼容。或者，如果您可以接受传递引用行为和不同的语法，请将它们粘贴在 a`containers.Map`中，它允许任意字符串作为键。

或者，您可以下拉到 MEX 并编写自己的代码`getfieldunsafe()`，让您在这些虚假结构中使用虚假字段名称。尝试调用`mxGetField`并查看它是否适用于虚假字段名称。如果没有，请让您的 MEX 函数在结构的字段列表中手动查找字段名称，然后使用`mxGetFieldByNumber`. 请参阅[http://www.mathworks.com/help/matlab/access-data.html](http://www.mathworks.com/help/matlab/access-data.html)。

将其转换为有效对象可能是最好的。如果给您带来麻烦，您可以只为转换`struct2cell`而`fieldnames`删除 MEX，以便一次将数据从虚假结构中取出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:22:15.020

有人能够创建这样的结构非常奇怪。可能是旧版本的 Matlab？无论如何，唯一想到的就是功能`setfield`。但它也可能会给您“无效的字段名称”错误。

# android - 模拟来自 android 服务的按键

> ID：12585806
> 
> 赞同：0
> 
> 时间：2012-09-25T15:04:30.093
> 
> 标签：android, key, android-browser, simulate

我想制作一个 android 服务，让我在收到意图时模拟按键以填充网页上的字段。这是否可能以任何方式或可能通过不同的过程（不是通过模拟按键？）。

例如，我希望能够做的一个例子。

用户在他的平板电脑上并选择了网页上的一个字段。对于发现的任何蓝牙设备，使用该 ID 填写该字段。

有没有办法通过调用网络浏览器的意图或类似的东西来做到这一点？

谢谢

编辑：认为我的例子很糟糕。

这是我真正想做的

当在手机上检测到 nfc 标签时，读取 nfc 标签 ID，模拟 id 标签的按键事件，无论当前手机上的焦点是什么

示例：我在谷歌上专注于搜索字段，我在手机上放置了一个 nfc 标签，手机在谷歌搜索字段上输入了 Nfc 标签 ID，瞧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:33:10.863

如果你真的想模拟按键事件，你可以使用系统调用：

```
input keyevent <keycode> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:27:45.560

我建议您使用广播接收器。之后您必须创建一个自定义意图类，当用户选择一个字段时注册接收者。与网页交互，最好使用javascript调用原生android方法。当您检测到设备发送您的广播时，如果您已注册，您将处理该事件。

# php - 处理一堆不同的请求进入数据库

> ID：12585809
> 
> 赞同：1
> 
> 时间：2012-09-25T15:04:54.083
> 
> 标签：php, mysql, database

我目前有一个 php 页面，它从数据库中获取信息并生成带有数据属性的 HTML，这些数据属性由 MySQL 查询填充。该数据库将用于搜索，有许多不同的搜索选项。

我需要帮助的是知道一种方法来组织如何处理许多变量。这是一个非常混乱的代码，即使我放了所有的评论，它也让我头疼，试图弄清楚如何在搜索中添加另一个变量。

除了 LIMIT 到哪一行和多少个结果之外，所有变量都是可选的。因此，如果有人将除此空白之外的所有内容都留下，我仍然希望它能够像他们精心填写所有字段一样发挥作用。

这就是我所拥有的，有 6 个变量。

```
<?php
$product_size = "(".$_GET['size']." BETWEEN productsizeDOWN AND productsizeUP)";  // This code sets the variable to input into the MySQL string based on the URL
$product_size_check = $_GET['size'];    // the _checks check are used to see if the value is or isn't empty using if statements below
$manufacturer = $_GET['manufacturer']; 
$product_manufacterer_check = $_GET['manufacturer']; // _check
$product_invisible = "(hideproduct = '".$_GET['invisible']."')"; // Checks if product is hidden
$product_invisible_check = $_GET['invisible']; // _check
$product_instock_check = $_GET['instock']; // _check
$product_limit0 = $_GET['startat']; // This is the first number after LIMIT; the row to start in.
$product_limit1 = $_GET['results']; // This is how many results to load.

    $manufacturer_array = explode(",", $manufacturer); // The manufacturer comes in as "Nike,Addidas,Rebok" and is turned into an array
    $manufacturer_imploded = implode("' OR productmanufacturer = '", $manufacturer_array); // Puts it back together with "OR productmanufacturer =" between each name.
    $product_manufacterer = ("(productmanufacturer = '".$manufacturer_imploded."')"); // formats it so it can be directly inserted into MySQL string with a WHERE in front.

if($product_invisible_check == ""){
    $product_invisible = "";
}else{$where = "WHERE ";};  //Useless code that I havn't deleted that I tried to use when I searched the entire database
if($product_size_check == ""){
    $product_size = "";
}else{$where = "WHERE ";};
if($product_manufacterer_check == ""){
    $product_manufacterer = "";
}else{$where = "WHERE ";};
if($product_instock_check == "N"){ 
    $product_instock = "(stockstatus <= '0' AND donotallowbackorders = 'Y') AND "; // Checks if product is in stock (Allowing backordering OR stock >1)
    $where = "WHERE ";
}
elseif($product_instock_check == "Y") {
    $product_instock = "(stockstatus > '0' OR donotallowbackorders = 'N') AND ";
    $where = "WHERE ";
}
else {
    $product_instock = "";
};

$sql="Select * FROM ioa7pd_Products WHERE ".$product_instock.$product_size."AND".$product_manufacterer_and.$product_manufacterer."".$product_invisible." LIMIT ".$product_limit0.", ".$product_limit1; // The end result of it all. 
echo $sql;
    ?> 
```

当 URL 是

```
test.php?size=5&manufacturer=Nike,Addidas,Rebok&invisible=N&instock=Y&startat=0&results=30 
```

生成的 SQL 查询是

```
Select * FROM ioa7pd_Products WHERE (stockstatus > '0' OR donotallowbackorders = 'N') AND (5 BETWEEN productsizeDOWN AND productsizeUP)AND(productmanufacturer = 'Nike' OR productmanufacturer = 'Addidas' OR productmanufacturer = 'Rebok')(hideproduct = 'N') LIMIT 0, 30 
```

但我计划在搜索中添加更多选项。

我的主要问题很简单：**我可以通过什么方式组织它以简化添加更多变量？**分层 if 语句？

**Travesty 一直在帮助我编写代码，并且在组织它方面真的很棒。**

这是当前代码。它需要安全以防止注射。

```
// Database connection
$con = mysql_connect("[CENSORED]","[CENSORED]","[CENSORED]")

    or die("Could not connect: " . mysql_error());

mysql_select_db("[CENSORED]") or die('Could not select database');

// Begin organization of URL variables into MYSQL Query
$get_size = $_GET['size'];
$get_manufacturer = $_GET['manufacturer'];
$get_invisible = $_GET['invisible'];
$get_instock = $_GET['instock'];
$get_sex = $_GET['sex'];
$get_startat = $_GET['startat'];
$get_results = $_GET['results'];

if ($get_size != ""){
    $all_selectors[] = "(".$get_size." BETWEEN productsizeDOWN AND productsizeUP)"; // Add to array if size is not blank.
};

if ($get_manufacturer != ""){
    $manufacturer_exploded = explode(",", $get_manufacturer);
    $manufacturer_imploded = implode("' OR productmanufacturer = '", $manufacturer_exploded);
    $all_selectors[] = ("(productmanufacturer = '".$manufacturer_imploded."')");
};

if ($get_invisible != ""){
    $all_selectors[] = "(hideproduct = '".$get_invisible."')";
};

if($get_instock == "N" or $get_instock == "n"){
    $all_selectors[] = "(stockstatus <= '0' AND donotallowbackorders = 'Y')";
}elseif($get_instock == "Y" or $get_instock == "y") {
    $all_selectors[] = "(stockstatus > '0' OR donotallowbackorders = 'N')";
};

if ($get_startat != "" or $get_results != ""){
    $number_results = "LIMIT ".$get_startat.", ".$get_results;
} else {
    $number_results = "LIMIT 0, 15";
};

// All variables are now in an array, except "startat" and "results"
$all_selectors0 = "WHERE ".implode(" AND ", $all_selectors);

// Create SQL query

$sql="Select * FROM sadsads_Products ".$all_selectors0." ".$number_results; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:28:29.857

我会做更多这样的事情。它没有经过测试，可能不是 100% 完成...您可能需要做一些进一步的自定义，特别是在`switch`语句中添加更多特殊情况时，但这将使添加更多变量变得更加容易：

> 删除旧示例，请参阅下面的更新示例

需要注意的关键一件事是您没有清理数据库输入。您的代码容易受到 SQL 注入的攻击。我上面的示例有助于解决这个问题，但此代码尚未经过全面测试，因此您应确保在任何查询中使用之前对所有用户输入进行清理。

* * *

如果您的字段名称与您的 MySQL 列不匹配（看起来它们不匹配），那么您可以使用关联数组来修复它们：

```
$columns = array(
    // [form field] => [mysql column]
    'size' => 'product_size',
    'manufacturer' => 'product_manufacturer',
    'invisible' => 'hideproduct'
    // ...
); 
```

然后在你的`switch`声明中，做更多这样的事情：

```
$whereClause[] = "{$columns[$key]} = '{$value}'"; 
```

* * *

**最后更新：**

**[记录样本](http://codepad.org/LSv5fgQ8)**- 有大量的评论和额外的东西，使它可以在键盘上工作

**确切的工作代码**- 您应该能够复制并粘贴它（并添加您的数据库凭据）并且它应该可以工作：

```
$con = mysqli_connect("[CENSORED]", "[CENSORED]", "[CENSORED]") or die("Could not connect: ". mysqli_error());
mysqli_select_db("[CENSORED]") or die("Could not select database");

$columns = array(
    'size' => 'product_size',
    'manufacturer' => 'product_manufacturer',
    'invisible' => 'hideproduct'
);

$whereClause = array();
$limit = array("startat" => 0, "results" => 15);

foreach ($_GET as $key=>$value) {
    $key = mysqli_real_escape_string($key);
    if (is_array($value)) {
        for ($i = 0; $i < count($value); $i++) {
            $value[$i] = mysqli_real_escape_string($value[$i]);
        }
    } else {
        $value = mysqli_real_escape_string($value);
    }

    switch ($key) {
        case 'size':
            $whereClause[] = "({$value} BETWEEN productsizeDOWN AND productsizeUP)";
            break;
        case 'startat':
        case 'results':
            $limit[$key] = $value;
            break;
        case 'instock':
            $whereClause[] = "(stockstatus ". ($value == 'N' ? "<=" : ">") ." '0' ". ($value == 'N' ? "AND" : "OR") ." donotallowbackorders = '". ($value == 'N' ? "Y" : "N") ."')";
            break;
        default: {
            if (is_array($value)) {
                $whereClause[] = "{$columns[$key]} IN ('". implode("', '", $value) ."')";
            } else {
                $whereClause[] = "{$columns[$key]} = '{$value}'";
            }
        }
    }
}

$sql = "SELECT * FROM ioa7pd_Products". (empty($whereClause) ? "" : " WHERE ". implode(" AND ", $whereClause)) ." LIMIT {$limit['startat']}, {$limit['results']}";
echo $sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:09:20.313

后

```
 else {
$product_instock = "";
 }; 
```

做：

```
$limit = '';
if( !empty($product_limit0) && !empty($product_limit1) )
 $limit = " LIMIT $product_limit0, $product_limit1"; 

$sql="Select * FROM ioa7pd_Products WHERE ".$product_instock.$product_size."AND".$product_manufacterer_and.$product_manufacterer."".$product_invisible." $limit"; // The end result of it all. 
 echo $sql; 
```

如果在 中有单独的参数`$_GET`，则必须遍历多个`if`语句。您可以使用数字键将参数作为数组传递给`$_GET`，这将有助于一堆。

# java - Ruby on Rails，如何在 like/unlike 上使用 Ajax 更新 Div

> ID：12585812
> 
> 赞同：0
> 
> 时间：2012-09-25T15:04:58.817
> 
> 标签：java, ruby-on-rails, haml

所以我遇到的问题是让我的喜欢/不喜欢按钮在我的 Ruby on Rails 应用程序中使用 ajax 刷新，这是我的代码：

> 应用程序/视图/_comment.html.haml

* * *

```
- likes = comment.likes
%div.comment{id: "comment-#{comment.id}"}
  .comment-avatar
    .medium-user-avatar.avatar-canvas
      - if comment.user.avatar_url
        = image_tag comment.user.avatar_url(:medium)
      - else
        %span.medium-user-initials.initials-decoration
          = comment.user.avatar_initials
  %span.comment-username= link_to(comment.user_name, "#")
  %span.comment-body~ markdown(comment.body)
  .comment-time
    = time_ago_in_words(comment.created_at) + " ago"
    - if can? :like, comment
      = " · "
      - if likes.find_by_user_id(current_user.id).nil?
        = link_to "Like", like_comment_path(comment), method: :post, remote: true
      - else
        = link_to "Unlike", unlike_comment_path(comment), method: :post, remote: true
    - if comment.user == current_user
      = " · "
      = link_to "Delete", comment_path(comment), method: :delete, remote: true,
        :data => { :confirm => "Are you sure you want to delete this comment?" }
  - if likes.count > 0
    .comment-likes
      - likers = likes.map { |like| link_to(like.user_name, "#") }
      - if likers.length > 1
        - likers = likers.slice(0, likers.length - 1).join(", ").concat(" and " +     likers.slice(-1))
      - else
        - likers = likers[0]
      = "Liked by #{likers}".html_safe 
```

> 应用程序/控制器/comments_controller.rb

* * *

```
class CommentsController < BaseController
  load_and_authorize_resource

  def destroy
    destroy!{ discussion_url(resource.discussion ) }
  end

  def like
    comment_vote = resource.like current_user
    Event.comment_liked!(comment_vote)
    #redirect_to discussion_url(resource.discussion )
    render :partial => "like"
    comment_likes
  end

  def unlike
    resource.unlike current_user
    #redirect_to discussion_url(resource.discussion)
    render :partial => "unlike"
    comment_likes
  end

  def comment_likes
    render :partial => "comment_likes"
  end
end 
```

然后是 like、like 和 comment_likes 的 .js.erb 文件：

> 应用程序/视图/_like.js.erb

* * *

```
$(".comment-time a#like").html("<%= escape_javascript(render('.comment-time a#like'") 
```

> 应用程序/视图/_unlike.js.erb

* * *

```
$(".comment-time a#unlike").html("<%= escape_javascript(render('.comment-time a#unlike'") 
```

> app/views/_comment_likes.js.erb

* * *

```
$(".comment-likes a##").html("<%= escape_javascript(render('.comment-likes a##'") 
```

目前单击like 将更新数据库，但在页面刷新之前不会显示更改，我只想用ajax 刷新单个div。有关 div 的更多信息可能会有所帮助，因此 ruby​​ 创建 html 并包含在其中作为示例，或者当已经喜欢时，我只需要刷新这些 div 以显示数据库中的最新信息以及包含 http://localhost :3000/comments/7/不像 500 (内部服务器错误)"

如果这很重要，其余的脚本已经在coffeescript中完成了吗？我读到控制器功能应该使用 .js.erb 所以希望这不会影响它。（我确定我的 js.erb 是错误的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:29:47.413

我不确定这是否是主要问题，但要解决的一件事是 .js.erb 文件中的渲染语句。

Rails 渲染方法需要 erb 模板或要渲染的操作作为其参数。你打电话时：

```
render('.comment-time a#unlike') 
```

Rails 将尝试在您的视图路径中的某处查找名称为“.comment-time a#unlike”的模板，这可能会引发某种错误。确保您注意应用程序（服务器上）的 javascript（客户端）中发生的事情之间的区别。

因此，解决此问题的一种方法如下。首先检查您要更新视图的哪一部分，为简单起见，因为您已经有了 _comment 部分，让我们使用它。其次弄清楚它应该替换dom中的哪个部分，在你的情况下是具有当前评论ID的div。然后我们可以执行以下操作：

```
$("#comment-<%= @comment.id %>").replace_html(
  "<%= escape_javascript render('comments/comment', :comment => @comment) %>"
); 
```

这将渲染`_comment.html.erb`部分 in `app/views/comments`，将结果（转义）插入到您的 (dis-)like.js.erb 中的 javascript 中，并将其发送回浏览器以执行。然后浏览器将`replace_html`在评论的 div 上（由 ID 指示。）

因为我们要替换整个评论 div，所以您可以对喜欢和不喜欢使用相同的方法。如果您需要节省带宽，您可以对其进行微调以仅重新渲染点赞按钮本身，但现在这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:43:09.953

问题是**您的控制器不知道如何响应 ajax 请求。**默认情况下，渲染方法将*渲染 html.erb*或在您的情况下*为 html.haml*模板。

除非您执行以下操作：

```
respond_to do |format|
  format.js { comment_likes }
end 
```

现在，如果 ajax 请求进入 _comments_likes.js.erb 模板将被渲染。

如果您有更多这些 ajax 类型的问题[，那么我们正在努力为 rails 重写 ajax 指南。](https://github.com/rails/rails/pull/7493)

[顺便说一句，请考虑清理您的视图。](http://railscasts.com/episodes/55-cleaning-up-the-view)

# javascript - Javascript 重定向对 SEO 的影响

> ID：12585813
> 
> 赞同：0
> 
> 时间：2012-09-25T15:05:00.797
> 
> 标签：javascript, redirect

不确定这是否是这个问题的最佳地点，但这是我一直很好奇的事情。我想使用仅在客户端可用的数据来加载网站的资源/资产，例如设备像素比、触摸支持等。

页面上的内容不会改变，只是像 JS 文件、CSS 文件和图像文件这样的资源。

已经有一些像这样工作的脚本运行客户端测试，然后将数据存储在 cookie 中，然后重新加载页面，根据存储在 cookie 中的数据加载资源。

该过程如下：

*   用户来到网站
*   JS 设置带有设备特性的 cookie
*   **JS 重新加载当前页面**
*   服务器现在可以访问包含所有特征数据的 cookie
*   可以根据这些数据有条件地加载资源和资产

当用户访问它时立即重新加载页面是一种不好的做法。这种方法是否有任何 SEO 缺点。这似乎是一种基于设备功能有条件地加载资源的好技术。我只是不确定是否有任何理由不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:08:43.243

许多网络爬虫不使用完整的 Javascript 或 cookie 功能。例如，GoogleBot 默认情况下会解释*所有*Javascript。因此，您作为 cookie 的一部分动态加载的所有内容可能不会被爬虫检测到，因此不会被编入索引。这会扼杀搜索引擎优化。

引用 Matt Cutts（谷歌的垃圾邮件专家）的一句话：

> “有一段时间，我们在 JavaScript 中进行扫描，我们一直在寻找链接。Google 在 JavaScript 方面变得更加智能，可以执行一些 JavaScript。我不会说我们执行所有 JavaScript，所以在某些情况下我们不执行'不执行 JavaScript。当然有一些常见的、众所周知的 JavaScript 东西，比如 Google Analytics，你甚至不想执行它们，因为你不想尝试从 Googlebot 生成幻像访问到你的 Google Analytics 中”。

**参考**：[http ://www.searchnewz.com/topstory/news/sn-2-20100315SEOInterviewwithMattCutts.html](http://www.searchnewz.com/topstory/news/sn-2-20100315SEOInterviewwithMattCutts.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:09:21.343

好吧，搜索引擎通常既不支持 cookie 也不支持 JavaScript，因此它们只会获取默认版本。

一些搜索引擎可能会对此进行测试，并将其视为“门口页面”（从而惩罚该网站）。我想知道他们启动自己的网络浏览器的原因之一是否是作为开发检查此类事情的机器人的副产品。显然，机器人需要在 JavaScript 中快速......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:08:52.600

当我刚开始使用它时，我当然不希望页面重新加载。

您可能应该使用媒体查询（用于 CSS）和特征检测（用于 JS）。

```
@media all and (min-width:420px) {
    /*styles...*/
} 
```

和：

```
if( typeof window.localStorage !== "undefined") {
    // you can now do stuff with localStorage.
} 
```

# objective-c - 获取传递到 MyApp Objective-C Mac 的文件的文件路径

> ID：12585818
> 
> 赞同：0
> 
> 时间：2012-09-25T15:05:18.497
> 
> 标签：objective-c, macos, file, path, filepath

**我** `-(void)application:(NSApplication *)sender openFiles:(NSArray *)filenames` **用来在文件名末尾带有 .myfiletype 的文件时执行操作。**

我也`NSString *fileThing = [NSString stringWithContentsOfFile:@"/Users/baileyseymour/Desktop/myfile.myfiletype" encoding:NSUTF8StringEncoding error:nil];` **用来获取文件的内容，但使用绝对路径。**

***我怎样才能做到这一点，以便我可以获得正在打开的文件的路径而不是绝对路径？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:10:26.647

您是否正在查找文件名数组中的每个文件名？像这样：

```
-(void)application:(NSApplication *)sender openFiles:(NSArray *)filenames {
    for (NSString *filename in filenames) {
        NSString *fileThing = [NSString stringWithContentsOfFile:filename 
                                                        encoding:NSUTF8StringEncoding 
                                                           error:nil];
    }
} 
```

# python - Python - 将 2 个类导入主文件

> ID：12585819
> 
> 赞同：2
> 
> 时间：2012-09-25T15:05:19.330
> 
> 标签：python, class

我不太清楚如何表达问题的主题......

我有 3 个文件布局：

**银行.py：**

```
class Bank(object):

    def __init__(self, money):
        self.money = money

    def currentMoney(self):
        print "You currently have $%d" %self.money

    def useMoney(self, money_use):
        self.money = self.money - money_use
        print "You used $%d" %money_use
        self.currentMoney()

    def getMoney(self, money_get):
        self.money = self.money + money_get
        print "You received $%d" %money_get
        self.currentMoney() 
```

**事件.py：**

```
class Event(object):

    def Event1(self):
        print "Your dad needs money. Will you give him?"
        decision = raw_input("Yes or No")
        if decision == "Yes":
            Bank.useMoney(500)
        elif decision == "No":
            print "Your father is sad"
        else:
            print "I do not know what are you talking about" 
```

**主要.py：**

```
import bank
import event

Bank = bank.Bank(1000)
Event = event.Event()

Event.Event1() 
```

当我执行代码时。我收到以下错误：

```
NameError: global name 'Bank' is not defined 
```

基本上，我想做的是使用 event.py 来创建一系列会影响金钱的事件，我可以使用 main.py 来运行不同的系列事件。

你能启发我如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:11:55.927

`Bank`如另一个答案中所述，您需要导入`event.py`

```
from bank import Bank 
```

话虽如此，查看 中的代码`event.py`，您将遇到另一个错误：

```
 Bank.useMoney(500) 
```

as作为第一个参数，所以它需要在实例上运行，`useMoney()`而**不是**在类本身上运行（在 Java 类型中，是实例方法，而不是静态方法）。`self``Bank` **`useMoney`**

 **我*认为*您的意图是在`Bank`内部包含一个实例`Event`，然后`useMoney`在调用时`Event1`调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:06:23.247

您需要`import bank`in`event.py`并使用

```
if decision == "Yes":
    bank.Bank(...) 
```

或者你可以在你的开头使用`event.py`：

```
from bank import Bank

class Event(object):
    ... 
```

否则，Python 在加载模块时无法知道该`Bank`对象是在模块中定义的。`bank``event`**

# wpf - 移动时 VisualBrush for Image 出现 WPF 问题

> ID：12585820
> 
> 赞同：0
> 
> 时间：2012-09-25T15:05:20.297
> 
> 标签：wpf, image, visualbrush

我有图像，当我将对象从一个点移动到另一个点时，我已经为图像创建了视觉画笔。但我在视觉画笔上看不到图像。如果你看到我的矩形，它应该显示图像。

见图片：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e8833983-3d73-45e1-8af1-3bc27846441d](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e8833983-3d73-45e1-8af1-3bc27846441d)

这是代码：

```
internal static VisualBrush GetVisualBrushByObject(LabelObject obj, Rect objectRect, int quality, FlowDirection flowdirection)
    {
        DrawingVisual drawingVisual = new DrawingVisual();
        DrawingContext drawingContext = drawingVisual.RenderOpen();
        Rect objectbounds = new Rect(0, 0, objectRect.Width, objectRect.Height);
        if (obj is TextObject)
        {
            TextObject txtObj = obj.Clone() as TextObject;
            DymoTextBlock txtBlock = txtObj.DymoTextBlock as DymoTextBlock;
            objectbounds = new Rect(txtBlock.GetNaturalSize(txtBlock.GetFormattedText(flowdirection)));
        }
        if (obj is ImageObject)
        {
            drawingContext.DrawImage(((ImageObject)obj).Image, objectbounds);
        }

        LabelObject.RenderParams lrp = new LabelObject.RenderParams(drawingContext, new Common.Resolution(96, 96), false, objectbounds, flowdirection);
        obj.Render(lrp);

        VisualBrush vBrush = new VisualBrush();
        vBrush.TileMode = TileMode.None;
        vBrush.Stretch = Stretch.Fill;
        if (obj is ImageObject)
        {
            vBrush.Opacity = 0.4;
        }
        drawingContext.Close();

        vBrush.Visual = drawingVisual;

        return vBrush;
    } 
```

请帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:31:17.837

如果您使用变换（TranslateTransform）移动图像，则必须在视觉画笔阶段撤消它。

# coldfusion - ColdFusion 包括

> ID：12585824
> 
> 赞同：4
> 
> 时间：2012-09-25T15:05:42.357
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10

我目前正在学习 ColdFusion。我有 PHP 的背景，对此我有点困惑。

我有一个选择菜单，我希望将选项保存在不同的文件中。（例如 options.cfm）当我调用文件时，我想在选择菜单中包含选项。现在我意识到我可能可以这样做：

```
<select>
    <cfinclude template="options.cfm">
</select> 
```

虽然我真正想做的事情有点复杂。我想`cfinclude`保存在一个变量中。我意识到这行不通，但这基本上是我想要完成的：

```
<cfset options=<cfinclude template="options.cfm">> 
```

有没有办法做到这一点？或者至少是一种更好的方式来完成我正在做的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T15:13:20.053

看一下[cfsavecontent](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d57.html)标记，它允许您捕获原本会输出到响应的内容：

```
<cfsavecontent variable="options">
    <cfinclude template="options.cfm">
</cfsavecontent> 
```

更新：不是每次需要将这些选项保存到变量时都使用 cfsavecontent，而是可以在 options.cfm 文件中执行一次。然后，只要您包含该文件，它就会创建该变量。

```
<!--- Inside options.cfm --->
<cfsavecontent variable="options">
    <option value="val1">Value 1</option>
    <option value="val2">Value 2</option>
    <option value="val3">Value 3</option>
</cfsavecontent> 
```

然后，无论您需要该变量存在的任何地方，您都只需要 cfinclude 该文件。

```
<cfinclude template="options.cfm"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T08:07:01.117

我知道这有点晚了，但我看到的一个问题是这是站点范围还是每个客户。

如果站点范围很广，那么很好，但是如果每个客户端都不同，则可能会导致一些问题。

我不使用 cookie 或会话的解决方案是创建一个临时表并将变量写入其中。加载并需要该数据查询和/或写入表的每个页面。当客户端访问该站点并命名该表时，将创建一个客户端 ID 变量。

只是一个想法。

# c# - LINQ 投影过滤 C#

> ID：12585827
> 
> 赞同：1
> 
> 时间：2012-09-25T15:05:52.090
> 
> 标签：c#, linq, entity-framework

我想根据包含的表过滤我的 LINQ 查询，但遇到了一些麻烦。

这是原始声明，它有效：

```
return 
    this.ObjectContext.People.
        Include("Careers").
        Include("Careers.Titles").
        Include("Careers.Titles.Salaries"); 
```

现在我正在尝试使用投影过滤来过滤职业，但遇到了麻烦。它编译但它遗漏了 Titles 和 Salaries 表，这会导致运行时错误，我似乎无法将这些表重新添加：

```
var query1 = (
    from c in 
    this.ObjectContext.People.
        Include("Careers").
        Include("Careers.Titles").
        Include("Careers.Titles.Salaries")
    select new
    {
        c,
        Careers = from Careers in c.Careers
                  where Careers.IsActive == true
                  select Careers
    });

    var query = query1.AsEnumerable().Select(m => m.c);
    return query.AsQueryable(); 
```

如何在过滤后的查询中包含职称和薪水表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:11:34.337

您可以大大简化查询，这应该可以解决您的问题。我假设您希望所有人都拥有至少 1 个活跃的职业：

```
var query = 
    from c in 
    this.ObjectContext.People.
        Include("Careers").
        Include("Careers.Titles").
        Include("Careers.Titles.Salaries")
    where c.Careers.Any(c => c.IsActive);

return query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:37:59.177

我会尝试类似的东西，

```
var query = from p in ObjectContext.People
            join c in ObjectContext.Careers on p equals c.Person
            where c.IsActive
            select p; 
```

# javascript - 嵌套函数的父函数名称

> ID：12585828
> 
> 赞同：0
> 
> 时间：2012-09-25T15:05:52.853
> 
> 标签：javascript, jquery

我需要嵌套函数的父函数名称。我正在使用 jquery ajaxComplete 方法，在那里我将获得外部函数名称：

```
$(document).ajaxComplete(function (e, xhr, settings){
 // this shows me only the success function of the ajax call, 
 // but I need the outermost function
 alert(settings.success.toString()); 
} 
```

非常感谢您的支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:36:03.937

没有内置方法可以获取最初调用 AJAX 方法的函数。但是，`.ajaxComplete`从`$.ajax`调用中接收设置参数。您可以要求所有 AJAX 调用者包括以下内容：

```
caller: <theirname>, 
```

在设置中。jQuery 应该忽略这个额外的选项，但它会传递给你。

# css - 在尊重父框的同时覆盖兄弟框

> ID：12585829
> 
> 赞同：7
> 
> 时间：2012-09-25T15:05:58.157
> 
> 标签：css, css-position

我认为这是不可能的，但我不是 CSS 专家，所以我想我会检查一下。我有一个半透明的 div 绝对定位在图像上。到目前为止这很好，但我想强制我的半透明 div 尊重包含它和图像的框。

```
<div class="parent">
  <div class="title-bar"> /* prolly not important */
    <h2>Title</h2>
  </div>
  <img src="whatever"/>
  <div class="overlay">
    A few lines of txt
  </div>
</div> 
```

我想得越多，我想我可能要求的越多——我希望父级用 img 扩展，但覆盖层受到父级的约束。这可以做到吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T15:32:02.127

要强制容器随孩子一起扩展`img`，请制作它`float`。
要强制覆盖与容器位置和大小相关，请使容器`relative`.

```
.parent {
    float: left;
    position: relative;
} 
```

要强制覆盖尊重容器的边界，请使用百分比。

```
.overlay {
    position: absolute;
    max-width: 100%;
    /* And then, position it at will */
    top: 0;
    left: 0;
} 
```

我准备了一个例子：http: [//jsfiddle.net/rYnVL/](http://jsfiddle.net/rYnVL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:33:08.487

这是 [可行的，但不是很漂亮](http://jsfiddle.net/G43tb/1/)：

```
<div id="parent">
    <div id="abs">stuff fadsfasd fsad fasdsdaf </div>
    <img src="/img/logo.png" />
</div>

#parent {width:auto; height:auto; border:1px solid blue; background-color:grey;position:relative; display:block;float:left;}

#abs {position:absolute;width:100%;height:100%;background:#ff0000;opacity:0.4;} 
```

需要注意的要点：
`parent`浮动没有 100% 的宽度。位置是相对的。
`abs`是绝对的，大小为 100%。

此外，如果`abs`内容大于图像，它会溢出。如果您不喜欢这样，只需添加`overflow:hidden`.

# php - PHP mod重写重定向错误的方式

> ID：12585837
> 
> 赞同：1
> 
> 时间：2012-09-25T15:06:30.987
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我正在尝试获得一个我正在制作的 php 网站，以拥有类似的 seo 友好 url，就像 wordpress 网站有时所做的那样。例如，我希望 mysite.com/page.php?section=great 显示为 mysite.com/great。

我一直在研究其他教程，这个网站试图让它工作，似乎我只能让它向后工作。也就是说，我输入 mysite.com/great，用户会看到 mysite.com/page.php?section=great，但反过来就不行。

这是我的 .htaccess 文件中的代码...

```
RewriteEngine on
RewriteRule /([^/]*)$ http://www.mysite.com.au/really/long/url/page.php?section=$1 [R] 
```

我已经尝试反转上面的代码，因此 /$ 部分位于实际完整 url 的右侧，但不确定这是否真的正确。以前从未使用过 mod rewrite 并发现这非常令人沮丧。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:29:25.940

你需要这样的东西。

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /really/long/url/page.php\?section=([^&\ ]+)
RewriteRule ^ /%1? [L,R=301] 
```

它必须与实际请求而不是 URI 匹配，因为 URI 被您拥有的其他规则破坏了。

# macos - ccMouseDragged 未在 CCMenu 上方调用

> ID：12585839
> 
> 赞同：0
> 
> 时间：2012-09-25T15:06:40.230
> 
> 标签：macos, cocos2d-iphone, scroll, mouseevent

我创建了一个包含许多 CCMenu 节点的简单滚动视图。只要我不拖动菜单上方的区域（因为它具有更高的优先级），滚动就可以正常工作。所以我通过注册鼠标事件解决了这个问题，如下所示：

```
 [[CCEventDispatcher sharedDispatcher] addMouseDelegate:self priority:INT_MIN+1]; 
```

滚动适用于此修复程序，但由于滚动条具有更高的优先级，因此永远不会触发 CCMenu 选择器。如何通过让图层始终检测鼠标事件以及仅通过点击工作的 CCMenu 项目来解决此问题（我不希望它们在拖动时工作）？请注意，我正在使用 OSX 和 cocos2d 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:50:25.867

对我有用的“临时”解决方案是将 CCMenu 更改为 CCSprite 并手动检查 ccMouseUp 中的鼠标事件。

# linq - Linq 使用可为空的日期时间字段

> ID：12585842
> 
> 赞同：1
> 
> 时间：2012-09-25T15:06:48.660
> 
> 标签：linq

我对使用以下内容的 LINQ（使用 EF - 4.3.1.0）有疑问：

```
 DateTime? dtcollected = DateTime.TryParse(dateCollected, out dateVal) ? dateVal : (DateTime?)null;
    DateTime?  dtanalyzed =  DateTime.TryParse(dateanalyzed, out dateVal) ? dateVal : (DateTime?)null; 

     var doesexist = (from pw in dbContext.WtTbl                                      
                      where pw.CompanyId == 13
                      && pw.DateCollected == dtcollected
                      && pw.DateAnalyzed == dtanalyzed                                    
                      select pw).Any(); 
```

请注意，dateCollected 以字符串形式出现，因此我必须将其转换为可为空的 DateTime。日期分析也是如此。

令我震惊的是，我的 companyId 为 13。dtcollected 为空值。dtanalyzed 的值已经在表中，所以我希望 doexist 返回 true，但它返回 false。

如果我注释掉

```
 var doesexist = (from pw in dbContext.WtTbl                                      
                      where pw.CompanyId == 13
                    //   && pw.DateCollected == dtcollected
                      && pw.DateAnalyzed == dtanalyzed                                    
                      select pw).Any(); 
```

或者说：

```
 var doesexist = (from pw in dbContext.WtTbl                                      
                      where pw.CompanyId == 13
                      && pw.DateCollected == null
                      && pw.DateAnalyzed == dtanalyzed                                    
                      select pw).Any(); 
```

然后我得到一个真实的。为什么它无法理解 dtcollected 的 null 值？难道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:23:23.003

在大多数数据库系统（绝对是 SQL Server）中，如果比较的一侧为空，则比较的结果是未知的，因此不包含在结果集中（或者，出于所有意图和目的，为 false）。

也就是说，您需要对变量执行 null 检查，仅在参数为非 null 时检查数据库字段，如下所示：

```
var doesexist = (
    from pw in dbContext.WtTbl                                      
    where 
        pw.CompanyId == 13 && 
        (dtcollected == null || pw.DateCollected == dtcollected) &&
        (dtanalyzed == null || pw.DateAnalyzed == dtanalyzed)
    select pw).Any(); 
```

这大致翻译为：

```
declare @dtcollected date = null
declare @dtanalyzed date = null

select 
    * 
from 
    Table as t
where
    (@dtcollected is null or t.DateCollected = @dtcollected) and
    (@dtanalyzed is null or t.DateAnalyzed  = @dtanalyzed) 
```

# php - 现代浏览器中是否可以进行客户端-客户端通信？

> ID：12585845
> 
> 赞同：2
> 
> 时间：2012-09-25T15:06:57.410
> 
> 标签：php, html, web, webserver, websocket

> **可能重复：**
> [是否可以在 Web 浏览器中创建对等连接？](https://stackoverflow.com/questions/4628125/is-it-possible-to-create-peer-to-peer-connections-in-a-web-browser)
> [如何建立浏览器到浏览器（点对点）的连接？](https://stackoverflow.com/questions/7022383/how-to-make-a-browser-to-browser-peer-to-peer-connection)

使用 PHP 进行聊天或文件传输等通信，通常是`client-server-client`在 Ajax 或 Comet（Ajax 池）的帮助下，存在一种开始通信的方式`client-server-client`（用于服务器当前客户端）以及之后`client-client`？

# javascript - 客户端实时图像遮罩

> ID：12585848
> 
> 赞同：0
> 
> 时间：2012-09-25T15:07:20.310
> 
> 标签：javascript, jquery, html

我想在客户端屏蔽所有图像。我通过在透明模板上使用填充来创建一个形状。我想用这个形状作为面具。棘手的部分是我希望用户能够移动和旋转被遮罩的图像。所以我希望找到一个允许我进行图像遮罩的库。有什么建议么？

我尝试过的事情：

CCS - webkit-mask-url

jQuery - Ben Barnett 画布实用工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:37:46.033

[这里](http://blog.rjzaworski.com/2011/03/masking-images-with-css-and-jquery/)有一篇关于使用 jQuery 进行图像屏蔽的文章（[小提琴](http://jsfiddle.net/rjzaworski/dpetM/3/)）。如果你想旋转图片，你可以添加一些 css 到它。例如：

```
.rotated_image{
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

[小提琴](http://jsfiddle.net/jur4x/dpetM/97/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T13:56:41.293

我创建了一个插件来屏蔽图像。它使用户能够屏蔽图像的多个部分。看看下面的链接。

**HTML**

```
<body>
  <div id="photoContainer"><img id="image" src="http://www.cpplcounseling.com/uploads/4/6/8/2/46828361/2181364_orig.jpg" / title="Double click to mask" width="100%"></div>

  <br>
  <button id="mask">Mask</button>
  <button id="undoMask">Undo Mask</button>
  <button id="unMask">UnMask</button>
  <button id="save">Save</button>
  <button id="getSaved">Get Saved</button>
  <br>
  <br>
  <i>Note : Double click on particular portion of the image to mask that spot</i>
</body> 
```

**JS**

```
/*! Developed by Nofiden Noble
 * To apply multiple masking on a image
 **/

$(document).ready(function() {
  var maskStyles = [];
  $("#image").click(function() {
    $(".imageMask").draggable({
      disabled: true
    }).resizable({
      disabled: true
    });
    $(".imageMask").addClass("blur");
  });
  $("#image").dblclick(function(e) {
    var x = e.offsetX;
    var y = e.offsetY;
    $(".imageMask").draggable({
      disabled: true
    }).resizable({
      disabled: true
    });
    $(".imageMask").addClass("blur");
    $("#photoContainer").append('<div  class="imageMask ui-draggable ui-draggable-handle ui-resizable" style="left: ' + (x - 3) + 'px; top: ' + (y - 3) + 'px;"></div>');
    $("#photoContainer .imageMask:last-child").draggable({
      containment: 'parent'
    }).resizable({
      handles: 'all'
    });
  });
  $("#mask").click(function() {
    $(".imageMask").draggable({
      disabled: true
    }).resizable({
      disabled: true
    });
    $(".imageMask").addClass("blur");
    $("#photoContainer").append('<div  class="imageMask ui-draggable ui-draggable-handle ui-resizable" style="left: 65px; top: 55px;"></div>');
    $("#photoContainer .imageMask:last-child").draggable({
      containment: 'parent'
    }).resizable({
      handles: 'all'
    });
  });
  $("#undoMask").click(function() {
    if ($("#photoContainer .imageMask:last-child").hasClass("blur")) {
      $("#photoContainer .imageMask:last-child").removeClass("blur");
      $("#photoContainer .imageMask:last-child").draggable({
        disabled: false
      }).resizable({
        disabled: false,
        handles: 'all'
      });
    } else {
      $("#photoContainer .imageMask:last-child").remove();

    }
  });
  $("#unMask").click(function() {

    $("#photoContainer .imageMask").remove();
  });
  $("#save").click(function() {
    maskStyles = [];
    $("#photoContainer .imageMask").each(function(i, obj) {
      maskStyles.push(obj.getAttribute("style"));
    });
    console.log(maskStyles);
  });

  $("#getSaved").click(function() {
    for (maskStyle in maskStyles) {
      $("#photoContainer").append('<div  class="imageMask ui-draggable ui-draggable-handle ui-resizable blur" style="' + maskStyles[maskStyle] + '"></div>');
    }
    $("#photoContainer .imageMask").draggable({
      containment: 'parent',
      disabled: true
    }).resizable({
      disabled: true,
       handles: 'all'
    });
    $("#image").trigger('click');
  });
}); 
```

**CSS**

```
 .imageMask {
   background-color: #131212;
   opacity: .75;
   position: absolute;
   left: 85px;
   top: 66px;
   width: 30px;
   height: 30px;
 }

 .imageMask:hover {
   cursor: move;
 }

 #photoContainer {}

 .blur {
   -webkit-filter: blur(3px);
   filter: blur(3px);
   opacity: 1;
   cursor: default!important;
 }

 * * jQuery UI Resizable @VERSION * * Copyright 2010,
 AUTHORS.txt (http: //jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses. * http: //jquery.org/license
 * * http: //docs.jquery.com/UI/Resizable#theming
 */ .ui-resizable {
   position: relative;
 }

 .ui-resizable-handle {
   position: absolute;
   font-size: 0.1px;
   z-index: 99999;
   display: block;
 }

 .ui-resizable-disabled .ui-resizable-handle, .ui-resizable-autohide .ui-resizable-handle {
   display: none;
 }

 .ui-resizable-n {
   cursor: n-resize;
   height: 7px;
   width: 100%;
   top: -5px;
   left: 0;
 }

 .ui-resizable-s {
   cursor: s-resize;
   height: 7px;
   width: 100%;
   bottom: -5px;
   left: 0;
 }

 .ui-resizable-e {
   cursor: e-resize;
   width: 7px;
   right: -5px;
   top: 0;
   height: 100%;
 }

 .ui-resizable-w {
   cursor: w-resize;
   width: 7px;
   left: -5px;
   top: 0;
   height: 100%;
 }

 .ui-resizable-se {
   cursor: se-resize;
   width: 12px;
   height: 12px;
   right: 1px;
   bottom: 1px;
 }

 .ui-resizable-sw {
   cursor: sw-resize;
   width: 9px;
   height: 9px;
   left: -5px;
   bottom: -5px;
 }

 .ui-resizable-nw {
   cursor: nw-resize;
   width: 9px;
   height: 9px;
   left: -5px;
   top: -5px;
 }

 .ui-resizable-ne {
   cursor: ne-resize;
   width: 9px;
   height: 9px;
   right: -5px;
   top: -5px;
 } 
```

[关联](https://jsfiddle.net/Nofiden/110gvrqu/24/)

# internet-explorer - require.js 'Backbone' 仅是未定义的 IE

> ID：12585850
> 
> 赞同：2
> 
> 时间：2012-09-25T15:07:21.250
> 
> 标签：internet-explorer, backbone.js, undefined, require

网站在所有浏览器中都能完美运行，但 IE: SCRIPT5009: 'Backbone' is undefined

这里是 main.js，它已经花费了很多时间并且似乎符合所有 API 要求？

```
requirejs.config({
    paths: {
    //  "jquery" : "jquery-1.7.2.min",
        "jquery.json" : "jquery.json-2.3.min",
        "jquery.jtemplates" : "jquery-jtemplates",
        "jquery.nailthumb" : "jquery.nailthumb.1.1.min",
        "jquery.ui" : "jquery-ui-1.8.21.custom.min",
        "jquery.fileupload" : "jquery-fileupload/jquery.fileupload",
        "jquery.iframe-transport" : "jquery-fileupload/jquery.iframe-transport",
        "jquery.ui.widget" : "jquery-fileupload/vendor/jquery.ui.widget",
        "jquery.fancybox" : "jquery.fancybox",
        "handlebars" : "handlebars",
        "input" : "input",
        "validator" : "cars/modules/carsValidator",
        "backbone" : "backbone",
        "underscore": "underscore"

    },
    shim: {
        'jquery.jtemplates': {
            deps: ['jquery']
        },
            //exports: "jQuery.fn.setTemplate"
        //},
        'jquery.json': {
            deps: ['jquery'],
            exports: "JSON"
        },
        'jquery.nailthumb':{
            deps: ['jquery']
        },
        'jquery.iframe-transport':{
            deps: ['jquery']
        },
       'jquery.fancybox':{
            deps: ['jquery']
        },
        'input': {
            deps: ['jquery']
        },
        'backbone': {
            deps: ['jquery', 'underscore'],
            exports: "Backbone"
        },
        'underscore' :{
            exports: '_'
        }

    } 
});
requirejs(["jquery"], function($) {
    window.$ = $;
    if (typeof console == "undefined") {
        this.console = {log: function() {}};
    }
    //this will invoke the script for the page
    if (module){
        require([module], function(module){});
    }

}); 
```

和我的定义电话：

```
define(["jquery", "backbone"], function ($, backbone) {
    return backbone.Model.extend({
        update: function (message) {
            return this.type(message.type).message(message.message);
        },

        type: function (type) {
            if (type) {
                this.set({type: type});
                return this;
            }
            return this.get("type");

        },

        message: function (message) {
            if (message) {
                this.set({message: message});
                return this;
            }
            return this.get("message");
        }
    });
}); 
```

任何帮助都会很棒....谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:09:25.107

我知道这不是您期望的解决方案，但我在 IE10 上遇到了同样的错误。问题是在较旧的 ie 版本（ie9、8、7、6）中它运行良好，所以我决定使用官方的 MS 'hack' - [X-UA-Compatible](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx)。

只需将以下行添加到您的 html`<head>`部分：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

希望能帮助到你！

# python - 通过属性公开 dict 值

> ID：12585853
> 
> 赞同：0
> 
> 时间：2012-09-25T15:07:37.767
> 
> 标签：python

我有这个（Py2.7.2）：

```
class MyClass(object):
    def __init__(self, dict_values):
        self.values = dict_values
        self.changed_values = {} #this should track changes done to the values{}
        .... 
```

我可以这样使用它：

```
var = MyClass()
var.values['age'] = 21
var.changed_values['age'] = 21 
```

但我想像这样使用它：

```
var.age = 21
print var.changed_values #prints {'age':21} 
```

我怀疑我可以使用属性来做到这一点，但如何？

**更新：**

我在设计时不知道 dict 内容。它只会在运行时知道。它可能不会为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:15:47.750

您可以创建一个从 dict 继承的类并覆盖所需的函数

```
class D(dict):
    def __init__(self):
        self.changed_values = {}
        self.__initialized = True

    def __setitem__(self, key, value):
        self.changed_values[key] = value
        super(D, self).__setitem__(key, value)

    def __getattr__(self, item):
        """Maps values to attributes.
        Only called if there *isn't* an attribute with this name
        """
        try:
            return self.__getitem__(item)
        except KeyError:
            raise AttributeError(item)

    def __setattr__(self, item, value):
        """Maps attributes to values.
        Only if we are initialised
        """
        if not self.__dict__.has_key('_D__initialized'):  # this test allows attributes to be set in the __init__ method
            return dict.__setattr__(self, item, value)
        elif self.__dict__.has_key(item):       # any normal attributes are handled normally
            dict.__setattr__(self, item, value)
        else:
            self.__setitem__(item, value)

a = D()
a['hi']  = 'hello'
print a.hi
print a.changed_values

a.hi = 'wow'
print a.hi
print a.changed_values

a.test = 'test1'
print a.test
print a.changed_values 
```

输出

```
>>hello
>>{'hi': 'hello'}
>>wow
>>{'hi': 'wow'}
>>test1
>>{'hi': 'wow', 'test': 'test1'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:15:35.280

只有当要监视的属性集是有界的时，属性（实际上是描述符）才会有所帮助。`__set__()`只需在描述符的方法中归档新值即可。

如果属性集是任意的或无界的，那么您将需要覆盖`MyClass.__setattr__()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:15:55.247

您可以使用`property()`内置功能。

这比覆盖`__getattr__`and更可取`__setattr__`，如此[处](http://www.python.org/download/releases/2.2/descrintro/#property)所述。

```
 class MyClass:  

      def __init__(self):
          self.values = {}
          self.changed_values = {}

      def set_age( nr ):
           self.values['age'] = nr
           self.changed_values['age'] = nr

      def get_age():
           return self.values['age']

      age = property(get_age,set_age) 
```

# python - 扁平化浅嵌套列表的成语：它是如何工作的？

> ID：12585854
> 
> 赞同：6
> 
> 时间：2012-09-25T15:07:38.737
> 
> 标签：python

我在我正在处理的模块中发现了这段代码：

```
l = opaque_function()
thingys = [x for y in l for x in y] 
```

我看不懂这个。通过实验，我能够确定它正在展平一个 2 级嵌套列表，但语法对我来说仍然是不透明的。它显然省略了一些可选的括号。

```
>>> l = [[1,2],[3,4]]
>>> [x for y in l for x in y]
[1, 2, 3, 4] 
```

我的眼睛想将其解析为：`[x for y in [l for x in y] ]`或`[ [x for y in l] for x in y ]`，但由于`y`未定义，这两个都失败了。

我应该怎么读这个？

（我怀疑当这被解释时我会感到非常尴尬。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T15:10:12.480

这曾经让我很困惑。您应该像嵌套循环一样阅读它：

```
new_list = []
for y in l:
    for x in y:
        new_list.append(x) 
```

变成

```
for y in l for x in y [do] new_list.append(x) 
```

变成

```
[x for y in l for x in y] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T15:10:40.870

您应该将其阅读为：

```
for y in l:
    for x in y:
        yield x 
```

那是生成器版本，但所有推导式都具有相同的基本语法：虽然`x`放在前面，但表达式的其余部分仍然是从左到右读取的。一开始我也对此感到困惑，以为它会反过来，但是一旦添加了过滤表达式，它就有意义了：

```
>>> l = [[1,2,3,4,5], [1,"foo","bar"], [2,3]]
>>> [x for y in l
...    if len(y) < 4
...    for x in y
...    if isinstance(x, int)]
[1, 2, 3] 
```

现在想象一下必须把整个事情倒过来写：

```
[x if isinstance(x, int)
   for x in y
   if len(y) < 4
   for y in l] 
```

即使是资深的 Prolog 程序员也会感到困惑，更不用说维护 Python 解析器的人了 :)

当前的语法也与[Haskell](http://wiki.python.org/moin/PythonVsHaskell)中的相匹配，这首先激发了列表推导。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T15:15:35.183

从[列表中显示](http://docs.python.org/reference/expressions.html#list-displays)文档：

> 提供列表推导时，它由一个表达式组成，后跟至少一个`for`子句和零个或多个`for`or`if`子句。在这种情况下，新列表的元素是通过将每个`for`or`if`子句视为一个块、从左到右嵌套并在每次到达最里面的块时计算表达式以产生一个列表元素而产生的元素。

因此，您的表达式可以重写为：

```
thingys = []
for y in l:
    for x in y:
        thingys.append(x) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T15:10:30.337

```
lis=[x for y in l for x in y] is Equivalent to:

lis=[]
for y in l:
   for x in y:
      lis.append(x) 
```

# sql-server-2005 - 当列被索引时，为什么我会得到聚集索引扫描？

> ID：12585855
> 
> 赞同：2
> 
> 时间：2012-09-25T15:07:40.107
> 
> 标签：sql-server-2005, indexing

所以，我们有一个表，`InventoryListItems`它有几列。因为我们有时会根据特定列（`g_list_id`外键）查找行，所以我们将该外键列放入我们将调用的非聚集索引中`MYINDEX`。

所以当我搜索这样的数据时：

```
-- fake data for example
DECLARE @ListId uniqueidentifier
SELECT @ListId = '7BCD0E9F-28D9-4F40-BD67-803005179B04' 

SELECT *
FROM [dbo].[InventoryListItems]
WHERE [g_list_id] = @ListId 
```

我希望它会使用`MYINDEX`索引来查找所需的行，然后在这些行中查找信息。所以不如在索引本身中找到我们需要的所有内容，但仍然比对表进行全面扫描要好得多。

但相反，我似乎仍在进行聚集索引扫描。我无法弄清楚为什么会发生这种情况。

如果我只选择索引包含的列中的值，它会执行我期望的操作，即索引搜索，并且只是从索引中提取所有内容。

但是如果我`SELECT *`，为什么它只是在索引上保释并进行扫描，因为它似乎仍然可以从使用它中受益，因为它在 WHERE 子句中被引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:23:54.197

由于您正在执行 a`SELECT *`并因此检索**所有列**，SQL Server 的查询优化器可能已经决定只进行聚集索引扫描更容易和更有效 - 因为它需要转到聚集索引叶级别以获取所有列（首先进行搜索，然后进行键查找以实际获取整个数据页面，这是一项相当昂贵的操作 - 在此设置中扫描可能更有效）。

我几乎可以肯定如果你尝试

```
SELECT g_list_id
FROM [dbo].[InventoryListItems]
WHERE [g_list_id] = @ListId 
```

那么将会有一个索引**搜索**（因为你只检索一个列 - 不是所有的）。

这就是为什么我建议在使用时要格外小心的原因之一`SELECT * ....`——尽可能避免使用它。

# excel - Microsoft.Office.Interop.Excel 2010 气泡图渐变

> ID：12585857
> 
> 赞同：3
> 
> 时间：2012-09-25T15:07:43.497
> 
> 标签：excel, ms-office, com-interop, office-interop

我正在尝试设置以编程方式创建的图表的一些属性，但无法设置*通常*在 Excel 2010 中为气泡图找到的属性：

> 格式化数据系列 | 填写 | 渐变填充 | 类型 | **径向**

使用下面的代码。

```
Interop.Series s = TemplateBubble.SeriesCollection(1);
Interop.ChartFillFormat ff = s.Fill;
ff.TwoColorGradient(Microsoft.Office.Core.MsoGradientStyle.msoGradientFromCenter, 2); 
```

[ChartFillFormat.TwoColorGradient 方法](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.chartfillformat.twocolorgradient.aspx)表示第二个参数可以将类型设置为 Radial，因为有 4 种渐变类型。

调试后`ff.GradientVariant`等于`1`显示代码的最后一行。如何获得径向渐变？

# java - 无法使用 Javapns/Javaapns SSL 握手失败发送推送通知

> ID：12585858
> 
> 赞同：24
> 
> 时间：2012-09-25T15:07:43.900
> 
> 标签：java, ssl-certificate, apple-push-notifications

我对推送通知有疑问。我有一个由团队成员创建的 p.12 证书，并且我有要推送到的设备的设备令牌。我正在使用 javapns 库进行推送（也尝试了具有相同结果的 javaapns 库），但我不断收到此错误：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1720)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:954)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:632)
at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59)
at java.io.OutputStream.write(OutputStream.java:58)
at javapns.notification.PushNotificationManager.sendNotification(PushNotificationManager.java:402)
at javapns.notification.PushNotificationManager.sendNotification(PushNotificationManager.java:350)
at javapns.notification.PushNotificationManager.sendNotification(PushNotificationManager.java:320)
at javapns.Push.sendPayload(Push.java:177)
at javapns.Push.combined(Push.java:100)
at PushTest.push(PushTest.java:43)
at PushTest.main(PushTest.java:25) 
```

这是我用来测试的代码

```
try {
    List<PushedNotification> n = Push.combined(text, 20, null, file, "********", false, token);

    for (PushedNotification notification : n) {
        if (notification.isSuccessful())  
            System.out.println("Push notification sent successfully to: " + notification.getDevice().getToken());
        else {
            String invalidToken = notification.getDevice().getToken();

            Exception theProblem = notification.getException();
            theProblem.printStackTrace();

            ResponsePacket theErrorResponse = notification.getResponse();
            if (theErrorResponse != null)
                System.out.println(theErrorResponse.getMessage());
        }
    }
}
catch (CommunicationException e)  {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch (KeystoreException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我阅读并尝试了其他几篇文章的建议，包括将证书导入 cacerts 密钥库，但导入也失败了。我正在 Windows 机器上使用 eclipse 进行开发。

有谁熟悉这个问题？我是使用 ssl 的新手，所以也许我做错了什么，或者我不能使用在另一台机器上生成的证书？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-30T07:29:39.717

我是一名新的 iOS 开发人员，之前也遇到过同样的问题。

我终于发现问题是由于`p12 certificate`. 我们不应该使用私钥 p12 文件，而是应该从您的私钥和从 Apple 下载的证书生成 p12。

请执行以下 OpenSSL 命令以获取正确的 p12 文件：

```
developer_identity.cer <= download from Apple
mykey.p12 <= Your private key

openssl x509 -in developer_identity.cer -inform DER -out developer_identity.pem -outform PEM
openssl pkcs12 -nocerts -in mykey.p12 -out mykey.pem
openssl pkcs12 -export -inkey mykey.pem -in developer_identity.pem -out iphone_dev.p12 
```

之后，您应该使用`iphone_dev.p12`与苹果服务器进行通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-09T15:42:21.417

[Sunny's answer](https://stackoverflow.com/a/12659502/3982001) is a great one, but unfortunately it didn't work for me.

I got it working by exporting the certificate/private key pair from the keychain. The trick is that the selection sequence matters! The certificate has to be selected first, followed by the private key.

Here is how it works:

1.  Import the certificate downloaded from Apple into the keychains
2.  Expand so that the private key is visible
3.  Select the certificate followed by the private key
4.  Right click and choose [Export 2 items...]

# javascript - 如何使 HTML 多选像控制按钮始终被按住一样

> ID：12585863
> 
> 赞同：14
> 
> 时间：2012-09-25T15:08:08.283
> 
> 标签：javascript, jquery, html, select

我有一个我正在处理的 Web 应用程序，它需要一个 HTML 多选元素的操作，就像始终按住控制键一样。即点击一个选项将切换它是否被选中。

我尝试了各种 Jquery 事件绑定，但似乎标准的 HTML 多选行为在 Jquery 绑定事件触发之前执行，因此几乎不可能简单地拦截事件并修改标准行为。

我怎样才能使单击将切换单个选项的选择？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T15:22:29.723

试试这个。您可以将选项值存储在对象中并使用单击操作更新对象，然后将更改应用于选择。

演示

[**http://jsfiddle.net/iambriansreed/BSdxE/**](http://jsfiddle.net/iambriansreed/BSdxE/)

HTML

```
<select class="select-toggle" multiple="multiple">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select>​ 
```

JavaScript

```
$('.select-toggle').each(function(){    
    var select = $(this), values = {};    
    $('option',select).each(function(i, option){
        values[option.value] = option.selected;        
    }).click(function(event){        
        values[this.value] = !values[this.value];
        $('option',select).each(function(i, option){            
            option.selected = values[option.value];        
        });    
    });
});​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T15:22:13.317

您可能需要考虑一个更简单的解决方案，例如在其溢出属性设置为滚动的 div 中使用复选框列表。这可能对你更好。获得一个下拉菜单来做你所要求的有点复杂。

例如看这个：

```
label{display:block;}
    #container{height:100px;width:200px;overflow:scroll;}
```

```
<div id="container">
        <label><input type="checkbox" name="test" value="1" />Option 1</label>
        <label><input type="checkbox" name="test" value="2" />Option 2</label>
        <label><input type="checkbox" name="test" value="3" />Option 3</label>
        <label><input type="checkbox" name="test" value="4" />Option 4</label>
        <label><input type="checkbox" name="test" value="5" />Option 5</label>
        <label><input type="checkbox" name="test" value="6" />Option 6</label>
        <label><input type="checkbox" name="test" value="7" />Option 7</label>
        <label><input type="checkbox" name="test" value="8" />Option 8</label>
        <label><input type="checkbox" name="test" value="9" />Option 9</label>
        <label><input type="checkbox" name="test" value="10" />Option 10</label>
        <label><input type="checkbox" name="test" value="11" />Option 11</label>
        <label><input type="checkbox" name="test" value="12" />Option 12</label>
    </div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-20T08:12:03.263

必须自己解决这个问题，并注意到[一个简单的拦截`mousedown`](http://jsfiddle.net/7n8nnjus/1/)和设置属性会有的错误行为，所以覆盖了 select 元素并且效果很好。

### jsfiddle：http: [//jsfiddle.net/51p7ocLw/](http://jsfiddle.net/51p7ocLw/)

**注意：**此代码确实通过替换 DOM 中的选择元素来修复错误行为。这有点激进，并且会破坏您可能附加到元素的事件处理程序。

```
window.onmousedown = function (e) {
    var el = e.target;
    if (el.tagName.toLowerCase() == 'option' && el.parentNode.hasAttribute('multiple')) {
        e.preventDefault();

        // toggle selection
        if (el.hasAttribute('selected')) el.removeAttribute('selected');
        else el.setAttribute('selected', '');

        // hack to correct buggy behavior
        var select = el.parentNode.cloneNode(true);
        el.parentNode.parentNode.replaceChild(select, el.parentNode);
    }
}
```

```
<h4>From</h4>

<div>
    <select name="sites-list" size="7" multiple>
        <option value="site-1">SITE</option>
        <option value="site-2" selected>SITE</option>
        <option value="site-3">SITE</option>
        <option value="site-4">SITE</option>
        <option value="site-5">SITE</option>
        <option value="site-6" selected>SITE</option>
        <option value="site-7">SITE</option>
        <option value="site-8">SITE</option>
        <option value="site-9">SITE</option>
    </select>
</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-12T00:04:23.647

上述解决方案都具有不支持复选框中的选择的主要缺点，这实际上是我`<select>`首先使用 -boxes 而不是 checkbox-inputs 的原因。最初我访问此页面以找到解决此问题的内置方法，但考虑到上述答案，我将只编写自己的代码。

以下代码还有一个优点，即它不会在 mouseup 上更新，而不是在 iambriansreed 的当前最佳答案上更新，而是在 mousedown 上更新，这是浏览器中的默认行为。

只是为了帮助未来的谷歌人，我的代码如下：

```
// Copyright (c) 2018 Joeytje50\. All rights reserved.
// This code is licenced under GNU GPL3+; see <http://www.gnu.org/licenses/>

// Source code and most recent version:
// https://gist.github.com/Joeytje50/2b73f9ac47010e7fdc5589788b80af77

// select all <options> within `sel` in the range [from,to]
// change their state to the state sel.options[from] is in,
// ie. change it to the current state of the first selected element
function selectRange(sel, from, to) {
  var toState = sel.options[from].selected;
  // make sure from < to:
  if (from > to) {
    var temp = from;
    from = to;
    to = temp;
  }
  if (!(sel instanceof HTMLSelectElement)) {
    throw new TypeError('selectRange requires a single non-jQuery select-element as first parameter');
  }
  // (de)select every element
  for (var i=from; i<=to; i++) {
    sel.options[i].selected = toState;
  }
}

$(function() {
  $('.addSelect').data('select-start', 0); // default selection start
  $('.addSelect').on('mousedown', function(e) {
    $(this).focus();
    // clicking on the edge of the <select> shouldn't do anything special
    if (!$(e.target).is('option')) return;
    // if Ctrl is pressed, just let the built-in functionality take over
    if (e.ctrlKey) return;
    // keep everything selected that's not affected by the range within a shift-click
    if (e.shiftKey) {
      var fromIdx = $(this).data('select-start')
      selectRange(this, $(this).data('select-start'), e.target.index);
      e.preventDefault();
      return false;
    }
    // save the starting <option> and the state to change to
    $(this).data('select-start', e.target.index);
    e.target.selected = !e.target.selected;
    e.preventDefault();
    // save a list of selected elements, to make sure only the selected <options>
    // are added or removed when dragging
    var selected = [];
    for (var i=0;i<this.selectedOptions.length;i++) {
      selected.push(this.selectedOptions[i].index);
    }
    $(this).data('selected', selected);
    $(this).children('option').on('mouseenter', function(e) {
      var sel = this.parentElement;
      // first reset all options to the original state
      for (var i=0;i<sel.options.length;i++) {
        if ($(sel).data('selected').indexOf(i) == -1) {
          sel.options[i].selected = false;
        } else {
          sel.options[i].selected = true;
        }
      }
      // then apply the new range to the elements
      selectRange(sel, $(sel).data('select-start'), e.target.index);
    });
  });
  // clean up events after click event has ended.
  $(window).on('mouseup', function() {
    $('.addSelect').children('option').off('mouseenter'); // remove mouseenter-events
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<select class="addSelect" multiple size="10">
<option value="0">Foo0</option>
<option value="1">Bar1</option>
<option value="2">Baz2</option>
<option value="3">Lol3</option>
<option value="4">Heh4</option>
<option value="5">Hey5</option>
<option value="6">Meh6</option>
<option value="7">Xcq7</option>
<option value="8">Hmm8</option>
<option value="9">End9</option>
</select>
```

随意使用此代码，只需将其复制到您想要使用它的任何项目中即可。

# sql - VB.NET连接Win2008 SQL server DB

> ID：12585866
> 
> 赞同：0
> 
> 时间：2012-09-25T15:08:13.980
> 
> 标签：sql, sql-server, vb.net, connection, dataadapter

我在我的 Windows XP Professional SP3 机器上运行 Visual Studio 2008。

服务器在 Windows 2008 R2 Enterprise SP1 上

服务器在我们的网络上，我可以通过我的连接字符串中使用的 DNS 名称以及 IP 地址来 ping 它。

在 ObjDa.Fill(dsReturn) 语句期间，会发生此错误。

> 没有可用的错误消息，结果代码：DB_E_ERRORSOCCURRED(0x80040E21)。

```
 Dim strQuery As String = "select * from sys.Tables" 
    Dim strConn As String = "Server=dev.xxxxxxx.vmc;" & _
              "Uid=xxxx;PWD=xxxxx;Database=report1;Integrated Security=False;"

    Dim ObjDa As OleDb.OleDbDataAdapter = New OleDb.OleDbDataAdapter(strQuery, strConn)

    Try
        Dim dsReturn As DataSet = New DataSet
        ObjDa.Fill(dsReturn)
        ObjDa.Dispose()
        Return dsReturn
    Catch ex As Exception
        Dim strError as string = ex.Message()
    End Try 
```

* * *

**编辑**

* * *

根据蒂姆的评论建议，我已将代码更改为使用以下行

```
Dim ObjDa As SqlDataAdapter = New SqlDataAdapter(pStrQuery, strConnection) 
```

现在，我收到此消息

> 用户“vmc\adam”登录失败。

当我通过远程桌面连接连接到该服务器时，使用我的 Windows 凭据登录，然后打开 SQL Management Studio ...身份验证类型是“VMC\adam”的“Windows 身份验证”，我没有输入密码。

但是，当我在连接字符串中使用相同的凭据时，它会出错。想法？

* * *

**编辑**

* * *

我发现一个站点建议在连接字符串中使用以下设置，并删除用户名和密码，以启用 Windows 身份验证。

**现在正在工作。**

```
integrated security=SSPI;persist security info=False; Trusted_Connection=Yes; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:52:48.573

当您指定 uid/密码组合并将集成安全设置为 false 时，它​​会尝试查找 sql server 登录而不是 windows 登录。如果要使用 Windows 身份验证，则需要将连接字符串更改为此。

```
Server=dev.xxxxxxx.vmc;Database=report1;Integrated Security=True; 
```

# maven - 从其他 Maven 模块添加 jar-with-dependencies 工件

> ID：12585868
> 
> 赞同：1
> 
> 时间：2012-09-25T15:08:29.650
> 
> 标签：maven, maven-2

我有一个多模块 Maven 项目。其中一个模块负责将所有其他模块的输出打包成一个可交付成果。我目前遇到了一个问题，我的程序集无法从其他模块收集输出，失败并显示以下消息：

```
[WARNING] The following patterns were never triggered in this artifact 
  inclusion filter:
o  '*:a' 
```

我的项目布局的简化版本如下所示，其中`moduleA`是一个构建标准 jar-with-dependencies 输出的项目，并且`moduleB`是我负责打包的模块。根级`pom.xml`列表`moduleA`和`moduleB`模块。

```
parent
|- moduleA (foo:a)
   |- pom.xml
   |-src
     |- ...   
|- moduleB (foo:b)
   |- pom.xml
   |- src
      |- main
         |- assembly
            |- assembly.xml
|- pom.xml 
```

我已经为它创建了一个程序集描述符`moduleB`，目前看起来像这样：

```
<assembly>
  <id>dist</id>
  <formats>
    <format>tar.gz</format>
  </formats>

  <moduleSets>
    <moduleSet>
      <includes>
        <include>*:a</include>
      </includes>
      <binaries>
        <attachmentClassifier>jar-with-dependencies</attachmentClassifier>
        <outputDirectory>package</outputDirectory>
        <dependencySets>
          <dependencySet>
            <excludes>
              <exclude>*:*</exclude>
            </excludes>
          </dependencySet>
        </dependencySets>
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly> 
```

我还列出了in的文件（编译范围）`moduleA`的依赖项。我这样做是因为我相信它会强制在之后建造；它似乎工作。`moduleB``moduleB``pom.xml``moduleB``moduleA`

任何人都可以建议为什么我的`moduleB`程序集没有收集来自 jar-with-dependencies 输出`moduleA`并抱怨该模式从未被触发？

我曾尝试指定`moduleA`（而不是使用通配符）的 groupId，但它没有帮助。我还尝试将程序集描述符简化`moduleB`如下，但结果没有任何变化：

```
<assembly>
  <id>dist</id>
  <formats>
    <format>tar.gz</format>
  </formats>

  <moduleSets>
    <moduleSet>
      <includes>
        <include>foo:a</include>
      </includes>
      <binaries>
        <outputDirectory>package</outputDirectory>
        <dependencySets></dependencySets>
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly> 
```

**新**：可以在此处找到此问题的 SSCCE：[http ://dl.dropbox.com/u/108474287/parent.zip](http://dl.dropbox.com/u/108474287/parent.zip)

Maven版本：`Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:42:47.887

我认为问题在于您有一个多模块项目，并且您尝试`<moduleSet/>`引用兄弟姐妹。从[包含模块二进制文件](http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html)中，您可以找到以下文本：

> moduleSet 部分中的新（自 2.2 起）useAllReactorProjects 标志允许您在多模块构建中使用来自子模块的模块二进制文件。这对于解决 Maven 的构建顺序与模块二进制文件的旧方法之间的冲突非常重要，其中程序集是从父 POM 构建的。

所以我将你的程序集文件更新到这个（添加`<useAllReactorProjects/>`）并让它工作：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2
                              http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>dist</id>
    <formats>
        <format>tar.gz</format>
    </formats>

    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>
            <includes>
                <include>*:a</include>
            </includes>
            <binaries>
                <outputDirectory>package</outputDirectory>
                <dependencySets>
                    <dependencySet>
                        <excludes>
                            <exclude>*:*</exclude>
                        </excludes>
                    </dependencySet>
                </dependencySets>
            </binaries>
        </moduleSet>
    </moduleSets>
</assembly> 
```

**注意**我已经删除了标签`<attachmentClassifier>jar-with-dependencies</attachmentClassifier>`，因为它是完全错误的。

输出是`.tar.gz`我认为你想要实现的，尽管这`jar-with-dependencies`有点指向另一个方向。我不太清楚你想要什么...

* * *

的替代方法[`maven-assembly-plugin`](http://maven.apache.org/plugins/maven-assembly-plugin/index.html)是使用[`maven-shade-plugin`](http://maven.apache.org/plugins/maven-shade-plugin/index.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T06:26:51.917

就我而言，我错过了将该模块作为 POM 中的依赖项包含在 src.xml 中。如果您遇到问题，它只是另一个可以查看的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:22:18.317

根据 Maven 文档，给定以下项目结构，以及父 POM 中的所有适当模块引用：

```
+ parent (groupId: org.test, artifactId: parent)
  |
  + child1 (groupId: org.test, artifactId: child1)
  |
  + child2 (groupId: org.test, artifactId: child2) 
```

我们可以使用以下 moduleSet 只选择 child1 模块：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  [...]
  <moduleSets>
    [...]
    <moduleSet>
      <includes>
        <include>org.test:child1</include>
      </includes>
    </moduleSet>
  </moduleSets>
  [...]
</assembly> 
```

我从来没有在包含选项中使用通配符，你能提到包而不是通配符吗？

# visual-studio-2010 - TFS 2010 报告单元测试通过/失败的单元数

> ID：12585870
> 
> 赞同：1
> 
> 时间：2012-09-25T15:08:36.067
> 
> 标签：visual-studio-2010, tfs, tfsbuild

有谁知道描述如何创建 TFS 2010 查询或报告的链接，该链接显示一段时间内特定自动构建运行/通过/失败的单元测试数量？

# sql-server - SQL Studio 2008 r2 - 复制向导（MO 方法）无效的列名（什么对象？）

> ID：12585871
> 
> 赞同：3
> 
> 时间：2012-09-25T15:08:36.193
> 
> 标签：sql-server, sql-server-2008, ssms

嗨，我在 studio 2008 r2 中使用复制向导。

我正在使用管理对象方法，因为我无法使数据库脱机。

复制失败并出现以下错误：

> 事件名称：OnError 消息：错误：errorCode=0 描述=列名“组织”无效。helpFile= helpContext=0 idofInterfaceWithError={C81DFC5A-3B22-4DA3-BD3B-10BF861A7F9C} StackTrace：在 Microsoft.SqlServer.Management.Dts.DtsTransferProvider.ExecuteTransfer() 在 Microsoft.SqlServer.Management.Smo.Transfer.TransferData() 在 Microsoft .SqlServer.Dts.Tasks.TransferObjectsTask.TransferObjectsTask.TransferDatabasesUsingSMOTransfer() 运算符：NT AUTHORITY\SYSTEM 源名称：CDW_SQL_SQL_5 源 ID：{8EF4C2A1-3B69-4729-8569-091F9B4863CB} 执行 ID：{61878ECA-D8C4-441A-9988- 53ECC75D9283} 开始时间：25/09/2012 15:53:34 结束时间：25/09/2012 15:53:34 数据代码：0

但是它并没有告诉我 Column 在什么对象上。我根据错误输出找到此列的最合理方法是什么？

# nicedit - nicEdit 在本地上传 - nicUpload 的问题

> ID：12585880
> 
> 赞同：2
> 
> 时间：2012-09-25T15:09:08.190
> 
> 标签：nicedit

如果有人设法在本地上传图像，我将非常感谢一些帮助。

我已经下载了最新版本的 nicEdit 以及 nicUpload 插件（来自 nicedit.com - 2012 年 6 月 7 日发布的 0.9 r24 版）。

我还从[http://svn.nicedit.com//trunk/nicUpload/php/nicUpload.php下载了 nicUpload.php](http://svn.nicedit.com//trunk/nicUpload/php/nicUpload.php)

NicUpload.php - 我将 NICUPLOAD_PATH 和 NICUPLOAD_URI 都设置为 'images'，这是 nicupload.php 和 nicEdit.js 所在的子文件夹。

NicEdit.js - 我已将以下内容添加到第 271 行：-

```
uploadURI : 'nicUpload.php?id=123', 
```

我给了它一个 ID，否则它会因 ID 代码无效而失败。但是 ?id=123 并不意味着存在。我也相应地设置了iconsPath。

第 1370 行我已经切换了这个：-

```
nicURI : 'http://api.imgur.com/2/upload.json', 
```

为了这：-

```
nicURI : 'http://www.mydomain.com/nicedit/nicUpload.php', 
```

但我仍然收到“上传图片失败”。我已经搜索和搜索并搜索了这个问题的答案，我已经接近花了两天时间修补它。

通过一些调试显示，我可以看到它在 nicUpload.php 的第 46 行失败，它说：-

$file = $_FILES['nicImage']; $image = $file['tmp_name'];

$max_upload_size = ini_max_upload_size(); 如果（！$文件）{...

最后一个 IF 为真，这就是它以错误退出的地方。

感谢任何能够提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:08:38.413

我没有使用 niceedit 上传功能来做你想做的事。我设法在链接和 img 下拉菜单中添加了一个按钮。该按钮打开一个文件管理器窗口，您也可以在其中上传。我设法将图像或文档的然后 de url 放入 nicedit 下拉 img 或 url 窗口。这就是我解决问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:16:07.150

nicUpload.php 脚本文件很糟糕，我什至不明白它是如何工作的。

NicEditor 使用 imgur 作为默认的图片上传服务。源代码遵循此处描述的 API 格式：http: [//api.imgur.com/resources_anon#upload](http://api.imgur.com/resources_anon#upload)

我的建议是实现那里定义的 API 请求和响应。

# c# - 估计剩余秒数（基于时间和进度）

> ID：12585882
> 
> 赞同：0
> 
> 时间：2012-09-25T10:51:15.097
> 
> 标签：c#

我正在尝试估计 MSI 安装还剩多少秒。虽然我知道这不准确，但我的计算似乎比应有的要差 - 我该如何改进？一个问题是，我经常发现进度从 ~0% 飞速增长到 ~95%，在很长一段时间内评估为还剩 0 秒。

我从 MSI 获得进度事件，每次更新进度时，我都会执行以下操作：

```
 private int CalculateSecondsLeft(DateTime start, int overallProgress)
    {
        lock (this)
        {         
            if (overallProgress == 0)
            {
                return 0;
            }

            var timeSpent = DateTime.Now - start;
            double cal1 = timeSpent.TotalSeconds / overallProgress;
            double cal2 = cal1 * (100 - overallProgress);
            return (int)cal2;
        }
    } 
```

# visual-studio-2010 - 从 TFS 中锁定的文件中排除某些文件

> ID：12585888
> 
> 赞同：0
> 
> 时间：2012-09-25T15:09:38.853
> 
> 标签：visual-studio-2010, version-control, tfs, file-locking

所以我有一个 web 项目，它可以将我们的 javascript 压缩并压缩为几个文件作为后期构建操作。问题是，为了正确构建项目，我必须检查目标文件，否则构建会失败，因为 VS 没有对这些文件的写入权限。是否有将这些文件包含在 TFS 中但不需要为它们锁定文件？我已经用 SVN 做了类似的事情，但我一直无法在 TFS 中找到一种方法。

# javascript - 使用 javascript 在 Chrome 中的 iframe 中触发文件输入

> ID：12585893
> 
> 赞同：3
> 
> 时间：2012-09-25T15:10:03.633
> 
> 标签：javascript, html, google-chrome, file-upload

我正在尝试解决我公司的 Web 框架中丑陋的浏览器特定的上传按钮。

我创建的是一个隐藏的 iframe，里面有一个表单。iframe 之外是一个“选择文件”按钮。该按钮从 iframe 中检索输入元素并在其上调用“click()”。

单击会在 IE 和 FF 中打开文件选择对话框，但不会在 Chrome 中打开。在 javascript 函数中从 iframe 中调用“click()”对于 Chrome 也不起作用。

一些示例代码：

文件上传测试.html：

```
<div id="button" style="background-color:red; height:50px; width:200px;" onclick="clicky()">Browse files</div>
<iframe id="frame" src="fileupload.html" style="display:none"></iframe>

<script type="text/javascript">
    function clicky() {
        var iframe = document.getElementById("frame");
        var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
        innerDoc.getElementById("input").click();
    };   
</script> 
```

文件上传.html：

```
<form>
    <div><input type="file" id="input" multiple/></div>
</form> 
```

通过消除 iframe 并仅在第一页中包含表单，Chrome 会像我想要的那样打开文件选择器对话框。但是，我必须在我们的 Web 应用程序中使用 iframe，以便我可以单独提交它。

删除“显示：无”没有效果。当“onclick”属性添加到输入元素时，它会被 Chrome 的“click()”事件触发。

为什么 Chrome 在 iframe 中的输入上调用“click()”时不打开文件选择器对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:30:40.443

Chrome 将每个文件路径视为不同的来源。当我在服务器中托管您的示例时，它在 Chrome 中运行良好。您还可以使用“--allow-file-access-from-files”作为参数启动 Chrome 以规避此[安全措施](http://en.wikipedia.org/wiki/Same_origin_policy)。

# php - 如果不加载，则替代 WebGL

> ID：12585898
> 
> 赞同：0
> 
> 时间：2012-09-25T15:10:13.290
> 
> 标签：php, javascript, html, webgl, alt

我在 iframe 中有一些 WebGL 的东西。在某些网络浏览器或旧计算机上，iframe 无法加载。发生这种情况时，我想加载图像。有可能吗？如果可以，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:43:28.563

## 中的问题`<script>`：

首先，您的`<script>`标签中似乎存在一些问题。标记内有普通的`<center><iframe ...`HTML 标记`<script>`，它不起作用，因为这里应该只有 javascript。还有一些缺少的`;`分号。

## 检测 WebGL 的解决方案：

你可以试试这个，但我也建议在我的回答结束时查看链接的网站：

```
?>
<script type="text/javascript">
if (!window.WebGLRenderingContext) {
    var myImage = new Image();
    myImage.src = "http://domain.tld/picture.jpg";
    $(myImage).prependTo(document.body);
} else {
    $(document.body).prepend('<center><iframe ALLOWTRANSPARENCY="true" frameborder="0" height="340" width="454" src="CORRECT THIS FIELD"></iframe></center>');
}
</script>
<?php 
```

只需添加`echos`PHP 和正确的`<iframe src="CORRECT THIS FIELD">`属性，还将图像 url 设置为真正存在的东西。

代替`document.body`您可以使用例如`'#myWebGLArea'`并添加`<div id="myWebGLArea"></div>`到您的页面。

## 更多主题：

另请查看[https://gist.github.com/1709384](https://gist.github.com/1709384)上的 WebGL 检测脚本和另一个 Q/A [https://stackoverflow.com/a/9904965/1338846](https://stackoverflow.com/a/9904965/1338846)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:13:10.070

最好检查是否支持 WebGL，就像在 Javascript 中一样

```
WebGLRenderingContext gl = canvas.getContext("experimental-webgl")

if(!gl)
{
    $("#image").show()
} 
```

# deployment - 直接在我的构建服务器上安装 Authenticode 代码签名证书以创建生产签名构建是否可以接受？

> ID：12585901
> 
> 赞同：6
> 
> 时间：2012-09-25T15:10:20.060
> 
> 标签：deployment, build, code-signing, tfsbuild, authenticode

直接在构建服务器上安装 Authenticode 代码签名证书以创建生产签名构建是否可以接受？我正在网上寻找一些资源，这些资源建议或支持这种做法是合法的，前提是您已采取适当的步骤来保护构建服务器以及创建和部署构建的过程。

我能找到的关于代码签名实践的所有“最佳实践”指南在建议的过程方面都远远超过了顶部。Microsoft 的参考文档有多达 6 个服务器在使用，用于签署单个程序集的简单操作。 [http://download.microsoft.com/download/a/f/7/af7777e5-7dcd-4800-8a0a-b18336565f5b/best_practices.doc](http://download.microsoft.com/download/a/f/7/af7777e5-7dcd-4800-8a0a-b18336565f5b/best_practices.doc)

# 一些背景：

我的公司为其员工和直接客户创建了简单的富客户端业务线应用程序。我们不创建商业软件。我的构建服务器使用我的公司严格的安全策略和程序进行物理安全和网络安全。只有组织中非常具体的人才能在我的环境中开始构建。

我们当前的流程要求我将构建/部署流程分解为多个阶段，并**配备大量**手动流程。我们使用物理设备来存储 Authenticode 证书，需要用户输入 PIN 才能访问。我们必须将需要代码签名的程序集/清单改组到指定的代码签名 PC，这些 PC 也必须受到物理保护。

对我来说，传递物理令牌/设备并保留所有这些手动步骤是不太安全的。没有什么可以阻止对令牌/设备具有物理访问权限的人签署他们想要的任何东西。至少，通过自动化、记录、受控的构建服务器环境，您知道签名的内容和签名者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:04:40.970

在构建服务器上安装证书并使其可供构建帐户访问的主要问题是，现在任何开发人员都可以通过将任何恶意代码临时提交给某个合法项目并在构建后将其恢复来签署任何恶意代码。

无论记录哪些操作，都很难识别或预防违规行为。尤其是在开发处于活跃状态并且每天完成多个构建的情况下。

我能想到的唯一解决方案是限制可以触发“RTM”构建的人数。其他构建类型可能使用测试证书或完全避免签名。

事实上，这也是我头疼的问题。

# .htaccess - htaccess 重写删除文件名

> ID：12585910
> 
> 赞同：0
> 
> 时间：2012-09-25T15:10:40.530
> 
> 标签：.htaccess

如何使用 htaccess 以这种方式更改 url？

1.  [http://www.domain.com/index.html?page=home](http://www.domain.com/index.html?page=home)
2.  [http://www.domain.com/indexf6f2.html?page=blog](http://www.domain.com/indexf6f2.html?page=blog)

至

1.  [http://www.domain.com/?page=home](http://www.domain.com/?page=home)
2.  [http://www.domain.com/?page=blog](http://www.domain.com/?page=blog)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:20:03.063

您可以尝试使用此站点[http://cooletips.de/htaccess/](http://cooletips.de/htaccess/)`.htaccess`根据您的规则生成您自己的文件。

问候， 海华沙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:30:14.363

我没有给出确切的解决方案。只需使用以下内容，您就可以使用 .htaccess 解决其他 URL 重写

从以下 URL 获取帮助

*   [http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

关于通过 .htaccess 重写的其他重要信息

*   [http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)
*   [RewriteRule 重命名 URL？](https://stackoverflow.com/questions/3698935/rewriterule-to-rename-url)

对于一个很好的基本

*   [http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)

# php - 如何在 Drupal 的一个模块中允许多个块

> ID：12585912
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:10:45.410
> 
> 标签：php, drupal, module, drupal-7, drupal-modules

我正在尝试为 Drupal 7 制作一个模块，该模块提供一个块并具有某些配置设置。现在我想要的是我想为用户提供 5 个块，以便他们可以在每个块中使用不同的设置。换句话说，我想为每个块提供一组单独的设置。我怎样才能做到这一点？

编辑：实际上我已经制作了一个显示单个块的模块。如果您使用了 superfish 菜单模块，那么您可以在那里看到它们允许我们选择应该提供多少块可用的选项。这样对于每个块我们可以使用不同的菜单来显示。我说的是那个功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:47:36.633

创建配置页面：

```
function my_module_admin_settings($form, &$form_state) {
  $form['my_module_number_of_blocks'] = array(
    '#title' => t('Post to Blog by default'),
    '#description' => t('Should content post to blog by default or only when selected?'),
    '#type' => 'select',
    '#options' => drupal_map_assoc(array(2, 3, 4, 5, 6, 7, 8, 9, 10)),
    '#default_value' => 2,
  );

  return system_settings_form($form);
} 
```

[您使用hook_block_info](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_info/7)在模块中创建块，您定义了一个数组，例如：

```
hook_block_info() {
  number_blocks = variable_get('my_module_number_of_blocks', 0);
  $x=0
  while ($x < number_of_blocks) {
    $blocks['myblock-' . $x] = array(
      'info' => t('Block ' . $x), 
      'cache' => DRUPAL_NO_CACHE,
    );
  }
  return $blocks
} 
```

您将在[hook_block_configure](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_configure/7)中配置值：

```
function hook_block_configure($delta = '') {
  // This example comes from node.module.
  $form = array();
  $parts = explode($delta, '-');

  if ($parts[0] == 'my_block') {
    $form['my_block_' . $parts[1] . '_option1'] = array(
      '#type' => 'select', 
      '#title' => t('Some option'), 
      '#default_value' => variable_get('my_block_' . $parts[1] . '_option1', 'first_option'), 
      '#options' => drupal_map_assoc(array('first option', 'second option')),
    );
  }
  return $form;
} 
```

一旦你定义了你的块，你需要告诉他们如何用[hook_block_view](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7)显示。就像是：

```
function hook_block_view($delta = '') {
  $block = array();
  $parts = explode($delta, '-');

  if ($parts[0] == 'myblock') {
    $block['subject'] = t('Block' . $parts[1]);
    $block['content'] = my_module_block_b_generate($parts[1]);
  }

  return $block;
} 
```

然后，您将使用块编号和配置来确定输出：

```
my_module_block_b_generate($block_number) {
  $option1 = variable_get('my_block_' . $block_number . '_option1', 'first_option');

  return t('this is block ' . $block_number . '. It has chosen option ' . $option1 . ' for option1');
} 
```

# excel - VBA 宏运行时错误“9”：下标超出范围 - 数组

> ID：12585914
> 
> 赞同：4
> 
> 时间：2012-09-25T15:10:50.657
> 
> 标签：excel, vba

当我尝试为 GA 生成人口时，我遇到了错误。我使用二维数组来帮助生成人口。首先，用户将在用户表单中输入种群大小，然后是染色体长度。

我的变量：

```
Dim Generation As Integer
Dim Chromolength As Integer
Dim varchromolength As Integer
Dim Poparr() As Integer 
```

然后我从用户窗体中获取值：

```
PopSize = PopulationSize.value
aVariables = AOV.value          'assign userform value entered to this variable
varchromolength = Chromolengthentered.value    'assign userform value entered to this   variable
Chromolength = varchromolength * aVariables   'Chromosome length equals the length of     each varaible chromosome combined 
```

然后是发生错误的编码：

```
For i = 1 To PopSize           
   For j = 1 To Chromolength       
    If Rnd < 0.5 Then           
        Poparr(i, j) = 0   'assign o to gene
    Else
        Poparr(i, j) = 1   'assign 1 to gene     
    End If
   Next j
Next i 
```

抱歉，我对 VBA 还很陌生。任何有关此错误的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:15:51.800

根据您的代码，您永远不会分配数组的维度。为此，请在设置 和 的值之后，在 for 循环之前插入这一`PopSize`行`ChromoLength`。

```
Redim Poparr(1 to PopSize, 1 to ChromoLength) 
```

**不必要的细节：**您可以只运行`Redim Poparr(PopSize, ChromoLength)`，但这会导致数组`0 to Popsize`等...除非您添加`Option Base 1`到模块的顶部。数组的默认基数是 0。我觉得最好明确指出数组的下限和上限，因为默认值可以是 0 或 1，具体取决于上下文。

# html - link_to 助手中的自定义标签

> ID：12585916
> 
> 赞同：1
> 
> 时间：2012-09-25T15:11:02.623
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我正在尝试在使用 link_to 助手创建的链接中插入一些标签我想要`<a href = "#">Somename <sometag></sometag></a>` 我尝试使用的东西

```
<%= link_to 'Somename',  {:action => 'somepath' }, :class => 'btn' do %>
<i class="icon-file icon-white"></i>
<%end%> 
```

但它给了我一些奇怪的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:16:00.293

当使用带有 的块时`link_to`，第一个参数应该是 url/path。块内的任何内容都将插入`<a>`标签内。

```
<%= link_to {:action => 'somepath' }, :class => 'btn' do %>
  <i class="icon-file icon-white"></i> Somename
<% end %> 
```

可能更接近你想要的。

# validation - 验证输入模糊/焦点丢失

> ID：12585919
> 
> 赞同：1
> 
> 时间：2012-09-25T15:11:15.270
> 
> 标签：validation, jsf-2, primefaces

我正在使用正则表达式对输入进行电子邮件验证，如下所示：

```
<h:inputText id="email" value="#{settingsBean.aFriendEmail}" required="true" label="Email" validatorMessage="#{settingsBean.aFriendEmail} is not valid">
    <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
</h:inputText>
<p:message for="email" /> 
```

我想知道如何使这个验证**onblur/on focus 失去**该输入。请告知如何做到这一点，谢谢。

另外，我想将有效域限制为 .com、.net、.org 对此有何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:14:23.150

添加一个`<f:ajax>`挂钩`blur`事件并在完成时更新消息。

```
<h:inputText id="email" ...>
    ...
    <f:ajax event="blur" render="emailMessage" />
</h:inputText>
<p:message id="emailMessage" for="email" /> 
```

通过正则表达式限制电子邮件域是一个与 JSF 完全无关的单独问题。

* * *

**与具体问题无关**，您`validatorMessage`是不对的。

```
validatorMessage="#{settingsBean.aFriendEmail} is not valid" 
```

当验证失败时，模型值永远不会更新，因此这将**始终**打印初始值，该值可能为空/空。您应该改为显示[组件的提交值](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29)。

```
validatorMessage="#{component.submittedValue} is not valid" 
```

# objective-c - 与 DCRoundSwitch 一起使用时 UIView 动画不起作用

> ID：12585923
> 
> 赞同：0
> 
> 时间：2012-09-25T15:11:31.037
> 
> 标签：objective-c, ios, custom-controls, uiswitch

我在自定义 UISwitch DCRoundSwitch 的选择器方法中完成了以下动画代码。

```
if ([[[App.remindersArray objectAtIndex:0] objectAtIndex:3]isEqualToString:@"YES"]){

    [firstReminderOnOffButton setSelected:YES];
    [swtchDailyReminder setOn:YES];

    imgviewDailyReminder.image=[UIImage imageNamed:@"nDailyReminder_On_1.png"];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.35];
    [UIView setAnimationDidStopSelector:@selector(animateFadingIn)];
    [UIView setAnimationDelegate:self];
     imgviewDailyReminderAnimation.alpha = 1.0;
    [UIView commitAnimations];

}
else
{

    [firstReminderOnOffButton setSelected:NO];
    [swtchDailyReminder setOn:NO];

    imgviewDailyReminder.image=[UIImage imageNamed:@"xDailyReminder_OFF.png"];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.35];
    [UIView setAnimationDidStopSelector:@selector(animateFadingIn)];
    [UIView setAnimationDelegate:self];
    imgviewDailyReminderAnimation.alpha = 0.0;
    [UIView commitAnimations];

 } 
```

问题是从普通 UISwitch 调用上述代码时动画可以正常工作，但从 DCRoundSwitch 调用时无法正常工作。

还尝试通过使用 UIView 块动画来解决....但仍然面临问题。

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:45:13.667

问题出在`DCRoundSwitch's`动画块中。否`CATransaction`在完成块中创建，`setOn:animated:ignoreControlEvents:`导致`[UIView animateWithDuration...]`方法在响应开关值更改时无法正常工作。

要解决问题，只需更改：

```
if (previousOn != on && !ignoreControlEvents)
[self sendActionsForControlEvents:UIControlEventValueChanged]; 
```

至：

```
if (previousOn != on && !ignoreControlEvents)
{
[CATransaction begin];
[CATransaction setDisableActions:NO];
[self sendActionsForControlEvents:UIControlEventValueChanged];
[CATransaction commit];
} 
```

应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:45:56.210

我在下面的代码中使用了这个。哪个工作正常。

请关注这个话题

[https://github.com/domesticcatsoftware/DCRoundSwitch/issues/12](https://github.com/domesticcatsoftware/DCRoundSwitch/issues/12)

你可以去使用这个 DCRoundSwitch 的类，在那个类的 dealloc 方法上放这条线。

```
 - (void)dealloc
 {
      [self.MyDCRoundSwitch removeTarget:nil
                         action:NULL
                         forControlEvents:UIControlEventAllEvents];
      [super dealloc];
 } 
```

# iphone - 为什么我的 Xcode4.5 没有 4 英寸的 iphoneretinasimulator？

> ID：12585925
> 
> 赞同：-1
> 
> 时间：2012-09-25T15:11:35.413
> 
> 标签：iphone, ios

我已经从 ios 开发中心下载了 xcode 4.5。（不知道是不是这样）。我有一个 dmg 文件。当我点击它进行安装时，它只有一个 xcode 设置（没有像示例，通常有的模拟器文件夹).i inatalled 它运行我的应用程序。但是当我得到模拟器时，它具有 ipad、ipad 视网膜、iphone、iphone 视网膜 3.5、iphone 视网膜 4 英寸等硬件选项。只有正常的 iphone 模拟器具有与 320,480 相同的屏幕分辨率.所以视网膜显示器只有改变的分辨率屏幕。它是否正确。任何使用这个的身体可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:25:31.783

如果您的意思是没有低分辨率模拟器，那就对了。如果你想要一个更小的模拟器，你可以输入 CMD-3。

# rpm - 如何检测 RPM 是源 rpm 还是二进制 rpm？

> ID：12585927
> 
> 赞同：4
> 
> 时间：2012-09-25T15:11:46.550
> 
> 标签：rpm, rpm-spec

如何检测 RPM 是源 rpm 还是二进制 rpm？

显然我不想依赖文件名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-14T06:03:22.860

源 rpm 由标头中存在的 SOURCERPM 标记定义。如果一个 rpm 有一个 SOURCERPM 标签，这意味着该 rpm 是一个二进制 rpm（SOURCERPM 标签说明了用于构建二进制 rpm 的 srpm）。如果没有 SOURCERPM 标签，则 rpm 是 srpm。

我不确定这是否是 srpm 的任何“官方”定义，但它是`rpmbuild`当前和其他实用程序用于确定给定 rpm 是否是参考 rpm 实现中的 srpm 的逻辑（参见[headerIsSource( ) 在 lib/headerutil.c 中](http://rpm.org/gitweb?p=rpm.git;a=blob;f=lib/headerutil.c;h=a9f1221eb19e493056eb32491e94397e55b5e0ee;hb=4c621e97776a47c2b4e7f17c1cd2a7961453babf#l67))。所以看起来很合理。

这是一种使用`rpm`命令行实用程序检查 rpm 中是否存在 SOURCERPM 标记的方法：

```
$ rpm --query --package foo-1.2.3-1.src.rpm \
      --queryformat "%|SOURCERPM?{binary-rpm}:{source-rpm}|\n"
source-rpm
$ rpm --query --package foo-1.2.3-1.el7.x86_64.rpm \
      --queryformat "%|SOURCERPM?{binary-rpm}:{source-rpm}|\n"
binary-rpm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:14:51.310

源 rpm 包含 Linux 应用程序的实际源代码和补丁文件。所有源 rpm 文件都有 src.rpm 扩展名

如果您在基于 Intel 的计算机上使用 RPM，您通常会期望在那里找到 i386。如果您使用 x86_64 位计算机，您将在 RPM 文件名中看到 x86_64。普通的 rpm 文件只有二进制文件，根本没有源代码。

以下链接帮助我了解源与二进制 RPM

*   [http://nixcraft.com/linux-software/3067-source-src-rpm-vs-binary-rpm-files.html](http://nixcraft.com/linux-software/3067-source-src-rpm-vs-binary-rpm-files.html)

**编辑：**

*   检查 RPM 签名包

> rpm --checksig 文件

*   显示包裹信息

> rpm -qi 文件

我认为没有为此目的的内置工具。利用 RPM 相关命令，或者您可以创建一个 shell 脚本作为随时检查的工具（它可以节省您的时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:02:38.453

我不相信有任何*明确*的方法可以做你想做的事，尽管你可以应用一些启发式方法来做出合理的猜测。

1.  使用`rpm -qi -p` *rpmfilename*并查看是否有“Source RPM:”值。

2.  `rpmls`从`rpmdevtools`包装中使用。仅根据检查输出，SRPMS 似乎包含一个 .tar.gz 或 .tar.bz2 和一个 .spec 文件。

我认为这会让你*接近*答案，但它不会是确定的。这是否足够取决于在您的情况下完全正确的重要性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T02:15:00.303

`rpm -qlp rpmfilename | grep -c /usr/src/redhat`将计算它包含多少源文件（通常是源存档、一个规范文件和一些补丁）。如果您以编程方式执行此操作，`grep -q`将返回匹配或不匹配。

# c# - 覆盖 ComboBox 的 Add 方法

> ID：12585931
> 
> 赞同：2
> 
> 时间：2012-09-25T15:12:02.287
> 
> 标签：c#, windows

有没有办法覆盖 Comboxx 的 Add() 方法？

我问这个的原因是我想将类对象添加到我的组合框中，但为了显示我希望它显示我的对象的名称。

例如： `combbox.Items.Add(myClassObject)`

但是我们在combboxx中实际看到的用户将显示为`myClassObject.Name`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T15:14:25.343

如果我正确理解了您的请求，您可以使用绑定来做到这一点：

伪代码：

```
comboBox.DataSource = collectionOfData;
comboBox.DisplayMember = "Name"; 
```

数据将被添加到组合中，但*可视化*将是`Name`“数据”的属性。

这一切都是使用[DisplayMember Property](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)完成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T15:15:34.593

因为`ComboBox`使用`ToString()`添加到 Items 集合中的对象的方法显示在 UI 上，所以覆盖`ToString`返回`myClassObject`任何你想要的，它很简单：

```
class myClassObject
{
    public override string ToString()
    {
        return "whatever you want";
    }
} 
```

通过这种方式，您不会触摸 ComboBox 控件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T15:16:08.263

你可以开发`extension Method`

```
public static class Extension
{
    public static void Add(this ComboBox, myClassObject value)
    {
       ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:14:05.813

创建一个扩展组合框控件的新控件。
然后覆盖`Add`方法。

# android - 获取活动过渡的翻转“背靠背”动画

> ID：12585934
> 
> 赞同：0
> 
> 时间：2012-09-25T15:12:12.037
> 
> 标签：android

我有两个活动，我希望用户认为他们是背靠背的，就像一些老电影中的经典秘密旋转墙：当用户切换到第二个活动时，第一个活动从右到左旋转，显示第二个活动的背面。

我真的不擅长动画，这是我尝试的第一个..我在 res/anim 中制作了这个 xml 文件：

旋转1：

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
        android:toDegrees="-90"
        android:toYScale="0.0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:duration="1000"/> 
```

旋转 2：

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="-90"
        android:toDegrees="-180"
        android:toYScale="0.0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:duration="1000"/> 
```

在代码中，简单地说：

```
startActivity(matchIntent);
overridePendingTransition( R.anim.first_rotate, R.anim.second_rotate ); 
```

但我只是获得了一个快速闪光作为过渡......我也将持续时间设置为 1000！

**编辑：我在这里找到了答案：[如何在 android 中的两个活动之间应用 3d 过渡？](https://stackoverflow.com/questions/11069250/how-to-apply-3d-transition-between-two-activities-in-android) 现在剩下的唯一问题是在动画期间背景默认为白色..有没有办法将其设置为另一种颜色，例如红色？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:26:55.603

您看到的白色背景可能是： 1\. 第一个 Activity 的背景。尝试为活动的父布局更改/添加背景。2\. 它可能是第一个活动下方的内容 - 即打开第一个活动的另一个活动。

希望这可以帮助。

# msbuild - 如何在 SYSTEM 帐户下配置 nUnit，以便 Jenkins/MSBuild 可以使用它？

> ID：12585935
> 
> 赞同：1
> 
> 时间：2012-09-25T15:12:20.993
> 
> 标签：msbuild, nunit, jenkins

我在 Windows XP 机器上使用 Jenkins 和 MSBuild，并试图构建我的 nUnit 测试。目前我收到以下错误：

```
warning MSB3245: Could not resolve this reference. Could not locate the assembly "nunit.framework, Version=2.6.0.12051, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77, processorArchitecture=MSIL" 
```

如果我打开命令提示符并以我自己的用户帐户运行 MSBuild，一切正常。我知道 Jenkins 使用的是 SYSTEM 帐户而不是我的帐户，因此为了模仿这一点，我已经使用`PSTools\PsExec.exe -i -s cmd.exe`并从中运行了 MSBuild，通过这样做，我可以重现错误，这让我相信它是 nUnit 的配置问题。

那么，如何配置 nUnit 以便它可以从 SYSTEM 帐户运行？如果我能摆脱它，我宁愿不将它安装到 GAC 中，而且我也热衷于继续使用 Jenkins 的 SYSTEM 帐户

谢谢！

# java - 如何使用 ews 查找附件电子邮件的发件人

> ID：12585937
> 
> 赞同：1
> 
> 时间：2012-09-25T15:12:31.303
> 
> 标签：java, exchangewebservices, ewsjavaapi, mail-sender

在 EWS 中，`EmailMessage`有一个发件人 ( `emailMessage.getSender()`) 并且可能有附件 ( `emailMessage.getAttachments()`)。

这些附件可以是`FileAttachment`（用于文件）或`ItemAttachment`（用于附加电子邮件）。

这个项目附件有很多信息，例如：

*   To : ((ItemAttachment) 附件).getItem().getDisplayTo();
*   主题 : ((ItemAttachment) 附件).getItem().getSubject();
*   请参阅[http://msdn.microsoft.com/en-us/library/exchange/aa580790(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa580790(v=exchg.140).aspx)

但是如何找到这封附加电子邮件的发件人？

**编辑：** 使用 EWS Java API 1.1.5 [http://archive.msdn.microsoft.com/ewsjavaapi/Release/ProjectReleases.aspx?ReleaseId=5754](http://archive.msdn.microsoft.com/ewsjavaapi/Release/ProjectReleases.aspx?ReleaseId=5754)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:23:15.213

在 c# - 你可以访问[`ItemAttachment.Message`](http://msdn.microsoft.com/en-us/library/exchange/aa562997%28v=exchg.140%29.aspx)然后[`Message.Sender`](http://msdn.microsoft.com/en-us/library/exchange/aa494306%28v=exchg.140%29.aspx). 获得发件人后，您可以检索[`Sender.Mailbox`](http://msdn.microsoft.com/en-us/library/exchange/aa579529%28v=exchg.140%29.aspx)以访问[`Mailbox.EmailAddress`](http://msdn.microsoft.com/en-us/library/exchange/aa565036%28v=exchg.140%29.aspx). 也许您可以将其转换为类似的 java 。

```
ItemAttachment itemAttachment = attachment as ItemAttachment;
itemAttachment.Load();
Sender sender = itemAttachment.Message.Sender;
Mailbox mailbox = sender.Mailbox;
string email = mailbox.EmailAddress; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:00:32.140

在 SliverNinja 响应之后，我尝试将该项目作为电子邮件检索。将 EWS 与 Java 一起使用，您必须`ItemAttachment`像`EmailMessage`这样转换项目：

```
Item item = ((ItemAttachment) attachment).getItem();
if (item instanceof EmailMessage) {
    String sender = ((EmailMessage)item).getSender().getAddress();
} 
```

该项目也可以转换为约会或联系人或任务或联系人组。

**编辑：** 获取发件人的另一种方法是

```
((EmailMessage) item).getFrom().getAddress(); 
```

这看起来像做同样的事情

# c# - GUID 未传递到 SP_DEVICE_INTERFACE_DATA 结构

> ID：12585939
> 
> 赞同：0
> 
> 时间：2012-09-25T15:12:43.387
> 
> 标签：c#

我正在使用该`SetupDiEnumDeviceInterfaces`函数来获取设备信息集中包含的设备接口。但是 GUID 没有通过“ `SP_DEVICE_INTERFACE_DATA`”结构。这是我的代码片段。

我试图通过使用来查看问题所在。`GetLastError`它总是返回零。

```
//GUID.
GetHidGuid(Myguid)

[DllImport("hid.dll", SetLastError = true)]
    static extern unsafe void GetHidGuid(
         ref GUID lpHidGuid);

 [StructLayout(LayoutKind.Sequential)]
    public unsafe struct GUID
    {
        public int Data1;
        public System.UInt16 Data2;
        public System.UInt16 Data3;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]
        public byte[] data4;
    }

// SetupDiEnumDeviceInterfaces function.

public unsafe int CT_SetupDiEnumDeviceInterfaces(int memberIndex)
    {
        int ErrorStatus;
        mySP_DEVICE_INTERFACE_DATA = new SP_DEVICE_INTERFACE_DATA();--> here is where i Have problem.GUID is zero.

        mySP_DEVICE_INTERFACE_DATA.cbSize = Marshal.SizeOf(mySP_DEVICE_INTERFACE_DATA);
        int result = SetupDiEnumDeviceInterfaces(
            hDevInfo,
            0,
            ref  MYguid,
            memberIndex,
            ref mySP_DEVICE_INTERFACE_DATA);
        return result;
        ErrorStatus = System.Runtime.InteropServices.Marshal.GetLastWin32Error();
    }

    public unsafe struct SP_DEVICE_INTERFACE_DATA
    {
        public int cbSize;
        public GUID InterfaceClassGuid;
        public int Flags;
        public int Reserved;
    } 
```

任何帮助表示赞赏。谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:56:28.213

从[pInvoke](http://www.pinvoke.net/default.aspx/hid/HidD_GetHidGuid.html)看来，您`GetHidGuid`应该声明为

```
[DllImport("hid.dll", EntryPoint="HidD_GetHidGuid", SetLastError=true)]
static extern void HidD_GetHidGuid(out Guid hidGuid); 
```

另一个完整的例子是[here](http://www.pinvoke.net/default.aspx/setupapi.setupdienumdeviceinterfaces)

# c++ - C++ 中的模式识别

> ID：12585941
> 
> 赞同：2
> 
> 时间：2012-09-25T15:12:49.837
> 
> 标签：c++, image-processing, pattern-recognition

我有一个简单的模板灰度图像，上面有白色背景和黑色形状，我有几个相似的测试图像，我想比较这两个图像，看看模板是否与任何测试图像匹配。您能否推荐一个简单（易于使用）的 C++ 模式识别库，它获取两张图像并比较它们并显示结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:21:04.557

只需对所有像素执行 image1-image2 即可。然后总结所有的差异。结果越低，图像越接近。

如果您的图案可能有多种尺寸，那么您必须调整它的大小并检查每个位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T15:28:46.363

在图像上实现神经网络。输入应该是图像的灰度。你应该将你的网络训练成一个训练集，使用交叉验证集选择适当的正则化参数，最后在测试集上测试你的网络。

[http://www.codeproject.com/Articles/13582/Back-propagation-Neural-Net](http://www.codeproject.com/Articles/13582/Back-propagation-Neural-Net)

（我自己这样做是为了训练一个网络来识别手写数字——效果很好。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:56:52.663

您需要的库有多简单取决于您的问题的具体参数。 [OpenCV](http://opencv.willowgarage.com/wiki/)是一个很棒的图像处理库，应该能够完成您需要的工作。 [这](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html#template-matching)是OpenCV中模板匹配的教程。它使在匹配指标之间切换并为您的问题选择最佳指标变得非常容易。

# ios - 'invokeString' 已弃用 Phonegap/Cordova 2.1.0 Xcode 4.5

> ID：12585943
> 
> 赞同：1
> 
> 时间：2012-09-25T15:13:00.777
> 
> 标签：ios, xcode, cordova, childbrowser

> **可能重复：**
> [cordova/phonegap 2.0 iOS](https://stackoverflow.com/questions/11616614/cordova-phonegap-2-0-ios)

我刚刚升级到 Phonegap 2.1.0 和 Xcode 4.5，我收到警告消息，指出 MainViewController.m 中不推荐使用“invokeString”。我知道我需要使用 window.handleOpenURL(url) 函数。但是，我不确定我需要更改什么以及需要在哪里更改？我正在使用儿童浏览器，我相信这会导致它无法打开。

```
 - (void) webViewDidFinishLoad:(UIWebView*) theWebView 
 {
 // only valid if ___PROJECTNAME__-Info.plist specifies a protocol to handle
if (self.invokeString)
 {
    // this is passed before the deviceready event is fired, so you can access it in js when you receive deviceready
    NSLog(@"DEPRECATED: window.invokeString - use the window.handleOpenURL(url) function instead, which is always called when the app is launched through a custom scheme url.");
   NSString* jsString = [NSString stringWithFormat:@"var **invokeString = \"%@\";", self.invokeString];**
  [theWebView stringByEvaluatingJavaScriptFromString:jsString];
 }

 // Black base color for background matches the native apps
 theWebView.backgroundColor = [UIColor blackColor];

return [super webViewDidFinishLoad:theWebView]; 
```

}

# cakephp - CakePHP 2 基本身份验证

> ID：12585947
> 
> 赞同：5
> 
> 时间：2012-09-25T15:13:17.647
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, http-authentication, cakephp-2.2

我正在从 CakePHP 1.3 迁移到 CakePHP 2.2.2，并希望将基本 Http 身份验证用于简单的管理区域。我只是无法让它工作，我认为我在文档中理解了一些错误。

从我了解到的文档中，我必须做类似的事情

```
public $components = array(
    'Auth' => array(
      'authenticate' => array(
        'Basic'
      ),
      'authError' => 'You may not access this area.',
      'authorize' => array('Controller')
    )
  ); 
```

我知道我需要进一步扩展 BaseAuthenticate 组件以返回有效的用户日期，但即使使用上述配置，我也希望浏览器的 Http 访问对话框会在弹出窗口中打开。但是不会发生这种情况，而是将我重定向到不存在的 /users/login 。为什么我需要 Http Access 的登录视图？我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T18:00:38.283

将`Auth`组件添加到您的控制器（或添加到`AppController`）

```
class ThingsController extends AppController {  
    var $components = array('Auth');
} 
```

CakePHP 需要一个**登录动作**，所以即使你使用 Basic 身份验证，其中 HTTP 代理负责 UI 收集身份验证详细信息，你也需要在一些控制器中指定一个动作来处理登录（在 Basic 情况下，它将`WWW-Authenticate: Basic`如果用户尚未通过身份验证，则发送标头）。

您可以设置`AuthCompoment`'s `$loginAction`，但这默认（建议不要打破约定）`login`为`UsersController`. 因此，首先在 处创建一个空模板`View/Users/login.ctp`，然后将以下内容添加到您的`UsersController`

```
class UsersController extends AppController {

    public $components = array(
        'Session',
        'Auth' => array(
            'authenticate' => array('Basic')
        )
    );

    public function login() {
        if ($this->Auth->login()) {
            return $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Not able to login');
        }
    }

    public function logout() {
        $this->redirect($this->Auth->logout());
    }

} 
```

# mysql - SQL查找不是其他成员朋友的成员

> ID：12585949
> 
> 赞同：0
> 
> 时间：2012-09-25T15:13:18.200
> 
> 标签：mysql, sql

我正在努力寻找一个查询，该查询将返回不是某个成员的朋友的成员。这是我的桌子的布局：

会员登录：

```
MemberID, email, password 
```

会员信息：

```
memberID, first_name, last_name 
```

会员朋友：

```
friendID, req_member, req_date, app_member, app_date, date_deactivated 
```

我尝试使用 NOT IN 来运行会返回与朋友相反的查询，但我尝试的任何操作似乎都不起作用。这是我认为可行的方法：

```
SELECT Mi.First_Name, Mi.Last_Name
  FROM Member_Info Mi
 WHERE Mi.Memberid NOT IN(
                           SELECT Mi.Memberid, Mi.First_Name, Mi.Last_Name
                             FROM Member_Info Mi, Member_Login Ml, Member_Friends Mf
                            WHERE Mi.Memberid = Ml.Memberid
                               AND (Mi.Memberid = Mf.Req_Member
                                   AND Mf.App_Member = 1
                                   OR Mi.Memberid = Mf.App_Member
                                   AND Mf.Req_Member =1)
                               AND Ml.Date_Deactivated <= 0
                               AND Mf.App_Date > 0
                          ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:26:07.103

@Thedirktastik，请检查`IN`子句的正确使用。在[MSDN](http://msdn.microsoft.com/en-gb/library/ms174128%28v=sql.105%29.aspx)中你可以看一下。

在 you`WHERE`子句中，您使用的是 IN 因此返回值的子查询应该只返回`Mi.Memberid`列值。您的查询返回几个不同的列。应该是这样的：

```
....
WHERE Mi.Memberid NOT IN(
                           SELECT Mi.Memberid
                             FROM.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:21:49.660

这是一个非常糟糕的设计，可能也是投票失败的原因。我会考虑将 member_friends 表设为[相交](http://en.wikipedia.org/wiki/Junction_table)表（联结表）。它将使您的设计和查询更易于使用和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:25:31.233

如果你尝试怎么办

```
SELECT Mi.First_Name, Mi.Last_Name
  FROM Member_Info Mi
 WHERE Mi.Memberid NOT IN(
                           SELECT Mi.Memberid
                              FROM Member_Info Mi, Member_Login Ml, Member_Friends 
                            WHERE Mi.Memberid = Ml.Memberid
                               AND (Mi.Memberid = Mf.Req_Member
                                   AND Mf.App_Member = 1
                                   OR Mi.Memberid = Mf.App_Member
                                   AND Mf.Req_Member =1)
                               AND Ml.Date_Deactivated <= 0
                               AND Mf.App_Date > 0
                          ); 
```

因为您在 NOT IN ( ... ) 中返回三个值，而它应该是一个

```
SELECT Mi.Memberid, Mi.First_Name, Mi.Last_Name 
```

应该

```
SELECT Mi.Memberid 
```

您可能会收到有关 FROM 语句的另一个错误，因为您需要将表连接在一起以比较值，但您的朋友表没有任何匹配值，因此这可能是一个问题（设计不佳）

**编辑：数据库设计**

很多这些都归结为真正的经验，但是有一些好书可以查看，例如[Head First SQL](https://rads.stackoverflow.com/amzn/click/com/0596526849)和[关系数据库设计清晰解释（数据管理系统中的摩根考夫曼系列）（平装本）](https://rads.stackoverflow.com/amzn/click/com/1558608206)，这些都是很棒的书学习基础知识和基本设计，我建议你去看看

# dojo - Dojo DropDownButton，我可以区分单击按钮和向下箭头吗？

> ID：12585951
> 
> 赞同：0
> 
> 时间：2012-09-25T15:13:22.213
> 
> 标签：dojo, dijit.form

我正在使用 Dojo 在工具栏中创建一个 DropDownButton。工具栏和按钮是动态创建的，如下所示：

```
this.widget = new Toolbar({ style: "background:black;" }, "toolbar");
this.dropMenu = new DropDownMenu({tooltip : "ToolTip", style: "display: none;"});
this.button = new DropDownButton({dropDown: this.dropMenu});
this.button.set('label', '<img src="data:image/png;base64,'+ this.icon + '"/>');
this.widget.addChild(this.button); 
```

请注意，上面的代码通过为按钮的 label 属性设置 img src 从 base64 编码的字符串动态创建一个图标作为按钮的一部分。

我想区分单击 DropDownButton 的“标签”元素和单击按钮的向下箭头，但不确定这是否可行。即，当单击标签时，我捕获了 onClick，但不会导致显示下拉菜单。但是，如果单击向下箭头或单击按钮上的任何其他位置，则会显示下拉菜单。

一种替代方法是将其拆分为标准按钮，然后将其拆分为与其相邻的下拉按钮，但我想知道是否有任何方法可以从单个标准 DropDownButton 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:03:57.967

检查它是否是单击元素中的向下箭头或按钮文本类。要正确挂钩事件的“流程”，您应该覆盖类函数**_onDropDownMouseDown**

```
var customDropDownButton = declare("customDropDownButton", [ DropDownButton ], {

    toggleDropDown: function() {
        console.log('toggling'); 
        this.inherited(arguments); 
    },
    _onDropDownMouseDown: function(evt) {
        console.log(arguments, evt.srcElement.className);

        if (/dijitButtonText/.test(evt.srcElement.className)) {
            // negate popup functionality 
            console.log('negating');
            return false;
        }
        this.inherited(arguments);
        return true;
    }

});
var b = new customDropDownButton({
    label: "hello!",
    name: "programmatic1",
    dropDown: someMenu
}); 
```

或者，如果您可以忍受弹出窗口显示然后立即再次关闭 - 简单的方法是：

```
var b = new DropDownButton({
    label: 'hello!',
    name: "programmatic2",
    dropDown: someMenu,

    onClick: function(evt) {
        if(/dijitButtonText/.test(evt.srcElement.className)) {
             // negate popup
             popup.close(this.dropDown);
        }
    }
}, 'button'); 
```

# javascript - Ext.util.Format.number - 添加千位分隔符时如何保留小数位？

> ID：12585954
> 
> 赞同：0
> 
> 时间：2012-09-25T15:13:56.957
> 
> 标签：javascript, extjs, extjs4

我有一堆不同计量单位的数字，需要不同的十进制精度。它们都在同一个组件中呈现。在这个组件中 - 我需要格式化数字以包含千位分隔符。

这就是我目前正在做的事情

```
Ext.util.Format.number(floatValue.toFixed(this.euStore.getById(euId).get('DecimalPrecision')), '0,000.00'); 
```

Where`this.euStore.getById(euId).get('DecimalPrecision')`返回 0 - 4 之间的任何地方。

`Ext.util.Format.number`当调用添加千位分隔符时，我需要保留这些小数位，因为它总是使用当前格式获得 2 个小数位，`'0,000.00'`

有没有办法使用内置的数字格式化程序来做到这一点，还是我需要编写自己的函数？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:43:52.663

所以我在发布后不久就弄清楚了。我将小数精度保存在 var

`var decimalPrecision = this.euStore.getById(euId).get('DecimalPrecision')`

然后构建格式字符串，`Ext.String.repeat`用于根据精度值重复小数位。

`var format = '0,000.' + Ext.String.repeat('0', decimalPrecision);`

然后将其传递给

`Ext.util.Format.number(myNumber, format)`

得到我需要的结果。感谢您的建议！

# spring - 无法在 Spring 装饰器控制器中使用 Shiro 的主题

> ID：12585956
> 
> 赞同：0
> 
> 时间：2012-09-25T15:14:17.253
> 
> 标签：spring, shiro, sitemesh

我将 Spring 与 Shiro 一起使用，在我的 Spring 项目中，我有一个装饰器控制器，它通过 sitemesh 显示一个装饰器页面。装饰器页面添加到每个页面的导航链接，例如登录和注销。

我希望根据某人是否实际登录来显示登录和注销，所以我想办法做到这一点：

```
@Controller
public class DecoratorController extends AbstractController{

 @Override
 @RequestMapping(value = "/decorator.htm")
 protected ModelAndView handleRequestInternal(HttpServletRequest request,
    HttpServletResponse response) throws Exception {

    ModelAndView model = new ModelAndView("DecoratorPage");

    Subject currentUser = SecurityUtils.getSubject();

    if (currentUser.isAuthenticated())
        model.addObject("login", "display: none;");
    else
        model.addObject("logout", "display: none;");

    return model;
 }
} 
```

站点网格.xml：

```
<sitemesh>
  <mapping path="/*.htm" decorator="/decorator.htm"/>
</sitemesh> 
```

但是，这会导致错误：

`No SecurityManager accessible to the calling code, either bound to the org.apache.shiro.util.ThreadContext or as a vm static singleton. This is an invalid application configuration.`

为什么我不能在这里使用 Shiro 但我可以在其他控制器中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:11:32.393

同事发现问题在于创建 bean 的顺序。Shiro 过滤器的定义应该出现在定义 Sitemesh 之前。

# python - 如何构建当年的日历

> ID：12585967
> 
> 赞同：-3
> 
> 时间：2012-09-25T15:15:03.617
> 
> 标签：python

我需要构建一个当年的日历，但我不需要显示它。我唯一想做的事情是，告诉我随机的一天是一周中的哪一天，如果是圣诞节，在三月或十二月，如果是三月或十二月的星期二。随机数由用户输入。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:24:24.317

```
>>> datetime.date(2012, 12, 25).weekday()
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:54:51.320

您需要非常熟悉 datetime 模块：[http ://docs.python.org/library/datetime.html](http://docs.python.org/library/datetime.html)

您可以使用`datetime.today()`获取包含年份的当前日期。datetime 对象的属性使获取年、月和日变得容易。timedelta 类可用于在年初添加天数。

datetime 模块无法直接解决的问题中唯一的一部分是找出假期。您需要以自己的方式检查每个假期，以查看日期是否匹配。

# json - 如何在 JSONPath 中按字符串过滤？

> ID：12585968
> 
> 赞同：66
> 
> 时间：2012-09-25T15:15:04.927
> 
> 标签：json, jsonpath

我有一个来自 Facebook API 的 JSON 响应，如下所示：

```
{
  "data": [
     {
       "name": "Barack Obama", 
       "category": "Politician", 
       "id": "6815841748"
     }, 
     {
       "name": "Barack Obama's Dead Fly", 
       "category": "Public figure", 
       "id": "92943557739"
     }]
 } 
```

我想将 JSONPath 应用于它以仅返回具有“政治家”类别的结果。从我读过的内容来看，我似乎需要做：

```
$.data[?(@.category=='Politician')] 
```

但根据我找到的[测试工具](http://jsonpath.curiousconcept.com/)，这不起作用。我发现[另一个问题](https://stackoverflow.com/questions/5560455/using-jsonpath-looking-for-a-string)表明我应该使用“eq”而不是“==”，但这也不起作用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-25T16:28:57.073

您的查询看起来不错，并且您的数据和查询使用[此 JsonPath](https://github.com/json-path/JsonPath)解析器为我工作。另请参阅该页面上的示例查询以获取更多谓词示例。

您使用的测试工具似乎有问题。甚至来自[JsonPath 站点](http://goessner.net/articles/JsonPath/)的示例也返回了不正确的结果：

例如，给定：

```
{
    "store":
    {
        "book":
        [ 
            { "category": "reference",
              "author": "Nigel Rees",
              "title": "Sayings of the Century",
              "price": 8.95
            },
            { "category": "fiction",
              "author": "Evelyn Waugh",
              "title": "Sword of Honour",
              "price": 12.99
            },
            { "category": "fiction",
              "author": "Herman Melville",
              "title": "Moby Dick",
              "isbn": "0-553-21311-3",
              "price": 8.99
            },
            { "category": "fiction",
              "author": "J. R. R. Tolkien",
              "title": "The Lord of the Rings",
              "isbn": "0-395-19395-8",
              "price": 22.99
            }
        ],
        "bicycle":
        {
            "color": "red",
            "price": 19.95
        }
    }
} 
```

而表达式: `$.store.book[?(@.length-1)].title`，该工具返回*所有*标题的列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-01T13:46:32.213

我没有找到正确的 jsonpath 过滤器语法来从 json 中的名称-值对中提取值。

这是下面的语法和缩写的示例 twitter 文档。

[该站点](http://jsonpath.curiousconcept.com/)对测试很有用：

jsonpath 过滤器表达式：

```
.events[0].attributes[?(@.name=='screen_name')].value 
```

测试文件：

```
{
  "title" : "test twitter",
  "priority" : 5,
  "events" : [ {
    "eventId" : "150d3939-1bc4-4bcb-8f88-6153053a2c3e",
    "eventDate" : "2015-03-27T09:07:48-0500",
    "publisher" : "twitter",
    "type" : "tweet",
    "attributes" : [ {
      "name" : "filter_level",
      "value" : "low"
    }, {
      "name" : "screen_name",
      "value" : "_ziadin"
    }, {
      "name" : "followers_count",
      "value" : "406"
    } ]
  } ]
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-09T02:26:04.157

去掉引号：

```
List<Object> bugs = JsonPath.read(githubIssues, "$..labels[?(@.name==bug)]"); 
```

另请参阅此[Json 路径示例页面](http://www.leveluplunch.com/java/examples/parse-json-elements-with-jsonpath/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-11T15:11:50.493

浏览器测试工具虽然方便，但可能有点欺骗性。考虑：

```
{
  "resourceType": "Encounter",
  "id": "EMR56788",
  "text": {
    "status": "generated",
    "div": "Patient admitted with chest pains</div>"
  },
  "status": "in-progress",
  "class": "inpatient",
  "patient": {
    "reference": "Patient/P12345",
    "display": "Roy Batty"
  }
} 
```

大多数工具将其返回为 false：

```
$[?(@.class==inpatient)] 
```

但是当我执行反对

```
<dependency>
    <groupId>com.jayway.jsonpath</groupId>
    <artifactId>json-path</artifactId>
    <version>1.2.0</version>
</dependency> 
```

它返回真实。我建议编写一个简单的单元测试来验证而不是依赖浏览器测试工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-04T13:27:20.213

''Alastair，你可以使用这个库和工具；反抗JS。它启用对 JSON 结构的 XPath 查询，您可以测试和验证此 XPath：

```
//data[category="Politician"] 
```

DefiantJS 使用“search”方法扩展全局对象，该方法又返回一个包含匹配项的数组。在 Javascript 中，它看起来像这样：

```
var person = JSON.search(json_data, "//people[category='Politician']");
console.log( person[0].name );
// Barack Obama 
```

# javascript - 不能将字符串传递给另一个函数

> ID：12585972
> 
> 赞同：0
> 
> 时间：2012-09-25T15:15:23.617
> 
> 标签：javascript, jquery

我试图用这一行调用一个函数 find(\'' + news_text + '\') 但它给了我

SyntaxError：未终止的字符串文字

字符串可能如下所示：“Barnes & Noble to launch video service for Nook\r [http://t.co/NTnycGYD](http://t.co/NTnycGYD) ”

这是解决问题的代码：

```
 function show(news_user, news_date, news_profile_img, news_text, news_url, user_tweets) {
                $('#news-tweets')
                    .css({
                    'overflow-y': 'scroll',
                    'overflow-x': 'hidden'
                });

                $('#news-tweets')
                    .append('<div class="tweets"><div class="user">' + news_user + '</div><div class="date">' + news_date + '</div>\
          <span class="clear">\
          </span><div class="img"><a href="' + news_profile_img + '" target="_blank"><img src="' + news_profile_img + '" width="55" height="50"/>\
          </a></div>\
          <div class="text">' + news_title + '<br /><a onclick="find(\'' + news_text + '\')">Show user tweets..</a></div></div>');
            }

            function find(news_text) {
                $('#user-news-tweets')
                    .html("");
                for (var x = 0; x < user_tweets.length; x++) {
                    var user = user_tweets[x].user;
                    var date = user_tweets[x].date;
                    var profile_img = user_tweets[x].user_profile_img;
                    var url = user_tweets[x].url;
                    var text = user_tweets[x].text;
                    var text3 = text.replace(/\r"\/:\.`'/g, "");
                    if (text3.indexOf(news_text.substr(0, 10)) > -1) {
                        $('#user-news-tweets')
                            .css({
                            'overflow-y': 'scroll',
                            'overflow-x': 'hidden'
                        });
                        $('#user-news-tweets')
                            .append('<div class="tweets"><div class="user">' + user + '</div><div class="date">' + date + '</div>\
                        <span class="clear"></span><div class="img"><a href="' + profile_img + '" target="_blank">\
                        <img src="' + profile_img + '" width="55" height="50"/></a></div>\
                        <div class="text">' + text + '<br /></div>');
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:18:03.313

尝试终止字符串，就像错误所说的那样。

```
find('\' + news_text + '\') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:26:39.887

尝试以下操作（您还缺少一个`div`标签来关闭您的`div.tweets`开始）。我一直更喜欢这种转义元素的方式而不是撇号，尽管它看起来不那么优雅。为了便于阅读，我已包含回车以删除它们。

```
$("#news-tweets").append("
    <div class=\"tweets\">
        <div class=\"user\">" + news_user + "</div>
        <div class=\"date\">" + news_date + "</div>
        <span class=\"clear\"></span>
        <div class=\"img\">
            <a href=\"" + news_profile_img + "\" target=\"_blank\">
                <img src=\"" + news_profile_img + "\" width=\"55\" height=\"50\" />
            </a>
        </div>
        <div class=\"text\">" + news_text + "<br />
            <a onclick=\"find(\"" + news_text + "\");\">Show user tweets..</a>
        </div>
    </div>
");​​​​​​​​​​ 
```

# xslt - XSLT将同名兄弟节点的值合并/连接到单个节点中

> ID：12585974
> 
> 赞同：5
> 
> 时间：2012-09-25T15:15:29.483
> 
> 标签：xslt, merge, siblings

输入xml

```
<catalog>
    <product id="1">
        <name>abc</name>
        <category>aaa</category>
        <category>bbb</category>
        <category>ccc</category>
    </product>
    <product id="2">
        <name>cde</name>
        <category>aaa</category>
        <category>bbb</category>
    </product>
</catalog> 
```

预期输出 xml

```
<products>
    <product>
        <id>1</id>
        <name>abc</name>
        <category>aaa,bbb,ccc</category>
    </product>
    <product>
        <id>2</id>
        <name>cde</name>
        <category>aaa,bbb</category>
    </product>
</products> 
```

用于转换的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/catalog">
        <products>
            <xsl:for-each select="product">
                <product>
                    <id><xsl:value-of select="@id"/></id>
                    <name><xsl:value-of select="name"/></name>
                    <category><xsl:value-of select="category" /></category>
                </product>
            </xsl:for-each>
        </products>
    </xsl:template>
</xsl:stylesheet> 
```

实际输出 xml :(

```
<products>
    <product>
        <id>1</id>
        <name>abc</name>
        <category>aaa</category>
    </product>
    <product>
        <id>2</id>
        <name>cde</name>
        <category>aaa</category>
    </product>
</products> 
```

在每个“产品”下按名称“类别”循环遍历所有兄弟节点并合并/连接到以逗号分隔的单个节点时所需的代码。“类别”的数量因每种产品而异，因此数量未知。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T15:25:56.300

[使用这里](https://stackoverflow.com/questions/798269/xslt-concat-string-remove-last-comma#798572)定义的这个方便的加入调用模板，这变得很简单：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/catalog">
        <products>
            <xsl:for-each select="product">
                <product>
                    <id>
                        <xsl:value-of select="@id"/>
                    </id>
                    <name>
                        <xsl:value-of select="name"/>
                    </name>
                    <category>
                        <xsl:call-template name="join">
                            <xsl:with-param name="list" select="category" />
                            <xsl:with-param name="separator" select="','" />
                        </xsl:call-template>
                    </category>
                </product>
            </xsl:for-each>
        </products>
    </xsl:template>

    <xsl:template name="join">
        <xsl:param name="list" />
        <xsl:param name="separator"/>

        <xsl:for-each select="$list">
            <xsl:value-of select="." />
            <xsl:if test="position() != last()">
                <xsl:value-of select="$separator" />
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<products>
  <product>
    <id>1</id>
    <name>abc</name>
    <category>aaa,bbb,ccc</category>
  </product>
  <product>
    <id>2</id>
    <name>cde</name>
    <category>aaa,bbb</category>
  </product>
</products> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T16:38:10.603

在 XSLT 2.0 中，您只需要对代码进行一点小改动：

```
<category><xsl:value-of select="category" separator=","/></category> 
```

请注意，如果您需要 XSLT 1.0 解决方案，最好这样说。在某些环境中，有些人卡在 1.0 上，但很多人没有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T22:04:57.287

这是另一个 XSLT 1.0 解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="product">
    <xsl:copy>
      <xsl:apply-templates select="*[not(self::category)]" />
      <category>
        <xsl:apply-templates select="category/text()" />
      </category>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="category/text()">
    <xsl:if test="position() &gt; 1">,</xsl:if>
    <xsl:value-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于 OP 的原始 XML：**

```
<catalog>
  <product id="1">
    <name>abc</name>
    <category>aaa</category>
    <category>bbb</category>
    <category>ccc</category>
  </product>
  <product id="2">
    <name>cde</name>
    <category>aaa</category>
    <category>bbb</category>
  </product>
</catalog> 
```

**...产生了预期的结果：**

```
<?xml version="1.0"?>
<catalog>
  <product>
    <name>abc</name>
    <category>aaa,bbb,ccc</category>
  </product>
  <product>
    <name>cde</name>
    <category>aaa,bbb</category>
  </product>
</catalog> 
```

**解释：**

*   第一个模板 -- the [`Identity Template`](http://www.dpawson.co.uk/xsl/sect2/identity.html)-- 匹配所有节点和属性并将它们原样复制到结果文档中。
*   第二个模板通过创建一个新元素并处理文档当前位置中`<category>`每个元素的文本子元素来覆盖标识模板。`<category>`
*   最终模板根据需要输出文本值和逗号。

# css - 如何在级联类和 id 中定位特定类

> ID：12585976
> 
> 赞同：0
> 
> 时间：2012-09-25T15:15:33.950
> 
> 标签：css, class

我正在尝试找出有关如何在级联 id 和类中定位类的规则，以便在需要修改内容时能够设置页面特定区域的样式。特别是 wordpress 儿童主题。

我已经搜索了一段时间，到目前为止，结果为我提供了特定情况的详细信息。我喜欢一些通用的东西，它可以帮助我阅读 html 并将特定的类定位为样式。

例如在这个 HTML 中。

```
<div class="one-third">
    <div id="nav_menu-4" class="widget widget_nav_menu">
    <h1 class="title">
        <cufon class="cufon cufon-canvas" alt="About " style="width: 72px; height: 24.05px;">
        <canvas width="91" height="27" style="width: 91px; height: 27px; top: -2px; left: -1px;"></canvas>
        <cufontext>About </cufontext>
        </cufon>
        <cufon class="cufon cufon-canvas" alt="us" style="width: 27px; height: 24.05px;">
    </h1>
    <div class="menu-about-us-container">
    </div>
</div> 
```

当 H1 Title 在侧边栏中时，我正在尝试更改它的字体。我试过这个但没有用。

```
.one-third .title {
  font-family: Impact;
} 
```

获取特定选择器以针对特定类的规则/公式是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:34:30.037

你需要添加h1标签`.one-third h1.title {font-family: Impact;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:22:28.267

尝试在伪类之前使用**选择器，请参阅：**

[http://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)

关于 CSS 语法

# sql-server - Sql Server 错误 [SQLState 42000]（错误 325）

> ID：12585986
> 
> 赞同：3
> 
> 时间：2012-09-25T15:16:00.577
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个使用新的合并输出子句的脚本。我已经在 3 个不同的实例（所有非生产环境）中运行它并且效果很好。当我尝试在我们的生产环境中运行它时，我得到了错误：

> 以用户身份执行：xxx\xxx。“合并”附近的语法不正确。您可能需要将当前数据库的兼容级别设置为更高的值才能启用此功能。请参阅 ALTER DATABASE 的 SET COMPATIBILITY_LEVEL 选项的帮助。[SQLSTATE 42000]（错误 325）“合并”附近的语法不正确。您可能需要将当前数据库的兼容级别设置为更高的值才能启用此功能。请参阅 ALTER DATABASE 的 SET COMPATIBILITY_LEVEL 选项的帮助。[SQLSTATE 42000]（错误 325）。步骤失败。

我检查了每个实例的版本，它们都是 10.0.4000.0。所有非系统数据库都设置为兼容级别 90 (2005)，系统数据库设置为 100 (2008)。我还需要检查什么以查看我的生产实例与其他非生产实例的不同之处？

这是查询：

```
Declare @user varchar(20),
        @message varchar(max)
Set     @user = 'ISS20120917-144'

Create Table #data
(
    CustomerEventID_Surrogate Int Identity (1,1) Not Null Primary Key,
    CustomerNumber Int Not Null,
    ConvictionEventID Int Not Null,
    CustomerEventHierarchyID Int Not Null,
    SanctionEventID Int Not Null,
    ReferenceNumber varchar(40) Null,
    ConvictionACDID Int Null,
    State_Code varchar(2) Not Null,
    County_ID Int Null,
    CitationCDLHolderValueID Int Null,
    Hazmat Bit Null,
    CMV Bit Null,
    PassengerEndorsement Bit Null,
    OccurrenceDate DateTime Not Null,
    ConvictionDate DateTime Not Null,
    CourtOrder Bit Null
)

Create Table #surrogatemap
(
    CustomerEventID_Surrogate Int Not Null,
    NewCustomerEventID Int Not Null
)

Create Table #surrogateHIDmap
(
    NewCustomerEventID Int Not Null,
    NewHistoryEventDetailID Int Not Null
)

Begin Tran

Begin Try
    Insert Into #data
    Select  ce.Cust_No,
            ce.CustomerEventID,
            ceh.CustomerEventHierarchyID,
            ceSAN.CustomerEventID,
            ce.ReferenceNumber,
            hed.ACDID,
            hed.State_Code,
            hed.County_ID,
            hed.CitationCDLHolderValueID,
            hed.Hazmat,
            hed.CMV,
            hed.PassengerEndorsement,
            hed.OccurrenceDate,
            Case    When cd.ConvictionDate IS NOT NULL Then cd.ConvictionDate
                    Else hed.OccurrenceDate
            End As [ConvictionDate],
            hed.CourtOrder
    From IADS..CustomerEvent ce
    Inner Join IADS..HistoryEventDetail hed On hed.CustomerEventID = ce.CustomerEventID
        And hed.EndDate IS NULL
    Inner Join IADS..CustomerEventCode cec On cec.CustomerEventCodeID = hed.CustomerEventCodeID
        And cec.CustomerEventCodeID <> -51
    Left Outer Join IADS..ConvictionDetail cd On cd.HistoryEventDetailID = hed.HistoryEventDetailID
    Inner Join IADS..CustomerEventHierarchy ceh On ceh.CustomerEventID = ce.CustomerEventID
        And ceh.EndDate IS NULL
    Inner Join IADS..CustomerEvent ceSAN On ceSAN.CustomerEventID = ceh.RelatedCustomerEventID
        And ceSAN.CustomerEventDispositionID IS NULL
    Inner Join IADS..CustomerSanctionDetail csd On csd.CustomerEventID = ceSAN.CustomerEventID
        And csd.SanctionDiscardedReasonID IS NULL
    Inner Join IADS..SanctionReasonCode src On src.SanctionReasonCodeID = csd.SanctionReasonCodeID
        And src.SanctionReasonCodeID = -320
    Where ce.CustomerEventDispositionID IS NULL

    Merge Into IADS..CustomerEvent
        Using #data As src On 1 = 0
    When Not Matched Then
    Insert
    (
        CustomerEventCategoryID,
        Cust_No,
        ReferenceNumber,
        CreatedBy,
        CreatedDate,
        UpdatedBy,
        UpdatedDate
    )
    Values
    (
        -2,
        src.CustomerNumber,
        src.ReferenceNumber,
        @user,
        GetDate(),
        @user,
        GetDate()
    )
    Output
        src.CustomerEventID_Surrogate,
        inserted.CustomerEventID
    Into #surrogatemap;

    Select  sm.NewCustomerEventID,
        -8 As [HistoryEventTypeID],
        -51 As [CustomerEventCodeID],
        131 As [ACDID],
        d.State_Code,
        d.County_ID,
        d.CitationCDLHolderValueID,
        d.OccurrenceDate,
        d.ConvictionDate,
        d.Hazmat,
        d.CMV,
        d.CourtOrder,
        GETDATE() As [EffectiveDate],
        @user As [UpdatedBy],
        GETDATE() As [UpdatedDate],
        d.ConvictionACDID,
        d.PassengerEndorsement
    Into    #hiddata
    From    #data d
    Inner Join #surrogatemap sm On sm.CustomerEventID_Surrogate = d.CustomerEventID_Surrogate

    Merge Into IADS..HistoryEventDetail
        Using #hiddata As src On 1 = 0
    When Not Matched Then
    Insert
    (
        CustomerEventID,
        HistoryEventTypeID,
        CustomerEventCodeID,
        ACDID,
        State_Code,
        County_ID,
        CitationCDLHolderValueID,
        OccurrenceDate,
        Hazmat,
        CMV,
        CourtOrder,
        EffectiveDate,
        UpdatedBy,
        UpdatedDate,
        UnderlyingACDID,
        PassengerEndorsement
    )
    Values
    (
        src.NewCustomerEventID,
        src.HistoryEventTypeID,
        src.CustomerEventCodeID,
        src.ACDID,
        src.State_Code,
        src.County_ID,
        src.CitationCDLHolderValueID,
        src.OccurrenceDate,
        src.Hazmat,
        src.CMV,
        src.CourtOrder,
        src.EffectiveDate,
        src.UpdatedBy,
        src.UpdatedDate,
        src.ConvictionACDID,
        src.PassengerEndorsement
    )
    Output
        src.NewCustomerEventID,
        inserted.HistoryEventDetailID
    Into #surrogateHIDmap;

    Insert Into IADS..CustomerEventHierarchy
    (
        CustomerEventID,
        RelatedCustomerEventID,
        EffectiveDate,
        UpdatedBy,
        UpdatedDate
    )
    Select  sm.NewCustomerEventID,
            d.SanctionEventID,
            GETDATE(),
            @user,
            GETDATE()
    From    #data d
    Inner Join #surrogatemap sm On sm.CustomerEventID_Surrogate = d.CustomerEventID_Surrogate

    Insert Into IADS..CourtFineDetail
    (
        HistoryEventDetailID,
        ConvictionDate
    )
    Select  s.NewHistoryEventDetailID,
            d.ConvictionDate
    From  #hiddata d
    Inner Join #surrogateHIDmap s On s.NewCustomerEventID = d.NewCustomerEventID

    -- Remove the tie to the SUS077
    Update IADS..CustomerEventHierarchy
    Set     EndDate = GETDATE(),
            UpdatedBy = @user,
            UpdatedDate = GETDATE()
    Where   CustomerEventHierarchyID In (Select CustomerEventHierarchyID From #data)

    -- Build temp table containing the records that have already purged
    Select  ce.Cust_No,
            ce.CustomerEventID,
            ceh.CustomerEventHierarchyID
    Into    #disposedRecords
    From    IADS..CustomerEvent ce
    Inner Join IADS..HistoryEventDetail hed On hed.CustomerEventID = ce.CustomerEventID
        And hed.EndDate IS NULL
    Inner Join IADS..CustomerEventCode cec On cec.CustomerEventCodeID = hed.CustomerEventCodeID
        And hed.CustomerEventCodeID <> -51
    Inner Join IADS..CustomerEventHierarchy ceh On ceh.CustomerEventID = ce.CustomerEventID
        And ceh.EndDate IS NULL
    Inner Join IADS..CustomerEvent ceSAN On ceSAN.CustomerEventID = ceh.RelatedCustomerEventID
        And ceSAN.CustomerEventDispositionID IS NOT NULL
    Inner Join IADS..CustomerSanctionDetail csd On csd.CustomerEventID = ceSAN.CustomerEventID
        And csd.SanctionReasonCodeID = -320
    Where   ce.CustomerEventDispositionID IS NOT NULL
    Order By ce.CustomerEventDispositionDate Desc

    -- Un-purge all of the records that were previously tied to a SUS077
    Update  IADS..CustomerEvent
    Set     CustomerEventDispositionID = Null,
            CustomerEventDispositionComment = Null,
            CustomerEventDispositionDate = Null,
            UpdatedBy = @user,
            UpdatedDate = GETDATE()
    Where   CustomerEventID In (Select CustomerEventID From #disposedRecords)

    -- Remove the records from the PURGEEventsReadyForPurge table
    Delete
    From IADS..PURGEEventsReadyForPurge
    Where CustomerEventID In (Select CustomerEventID From #disposedRecords)

    -- Remove tie of purged records
    Update  IADS..CustomerEventHierarchy
            Set EndDate = GETDATE(),
            UpdatedBy = @user,
            UpdatedDate = GETDATE()
    Where   CustomerEventHierarchyID In (Select CustomerEventHierarchyID From #disposedRecords)

    Delete From IADS..PURGEEventsReadyForPurge Where PURGEEventsReadyForPurgeID In
    (
        Select  PURGEEventsReadyForPurgeID
        From    IADS..PURGEEventsReadyForPurge p
        Inner Join IADS..CustomerEvent ce On ce.CustomerEventID = p.CustomerEventID
            And ce.CustomerEventDispositionID IS NULL
        Inner Join IADS..CustomerEventCategory ceg On ceg.CustomerEventCategoryID = ce.CustomerEventCategoryID
        Left Outer Join IADS..CustomerEventHierarchy ceh On ceh.CustomerEventID = ce.CustomerEventID
        Left Outer Join IADS..CustomerEventHierarchy ceh2 On ceh2.RelatedCustomerEventID = ce.CustomerEventID
        Where   p.PurgeDate IS NOT NULL
    )

    Drop Table #disposedRecords
    Drop Table #hiddata
    Drop Table #surrogateHIDmap
    Drop Table #surrogatemap
    Drop Table #data

    Commit
End Try
Begin Catch
    Drop Table #disposedRecords
    Drop Table #hiddata
    Drop Table #surrogateHIDmap
    Drop Table #surrogatemap
    Drop Table #data

    Rollback
End Catch 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T18:56:39.500

您可以尝试这两种方法中的任何一种。
1\. 将兼容性级别更新为 100。

```
ALTER DATABASE [dbname] SET COMPATIBILITY_LEVEL = 100 
```

2\. MERGE 语句和 MERGE 之前的语句以分号 (;) 结束

希望它有效。

# c - 简单的有线协议，一个人要做什么？

> ID：12585987
> 
> 赞同：7
> 
> 时间：2012-09-25T15:16:01.597
> 
> 标签：c, linux, ipc, zeromq

我有一个用 C 编写的简单服务器。它的主要目的是通过专有协议与一些业务伙伴进行通信。由于这个原因和其他一些原因，它必须用 C 编写。但是，我还有许多其他进程，它们是用其他语言（例如 Python）编写的，它们必须与服务器（本地，在同一 Linux 服务器上）通信。

在这种情况下，跨语言 IPC 的最佳选择是什么？具体来说，我认为我掌握了传输技术：Unix 域套接字、命名管道、共享内存、ZeroMQ（Crossroads）。我对实现协议的最佳方式更感兴趣，以保持 C 代码小且可维护，同时仍允许与其他语言进行通信。

**编辑**：似乎有些混乱。我对讨论域套接字、共享内存等的优缺点**不感兴趣。**人。我对**msgpack**（感谢 unwind）以及实现有线协议的其他技术/方法感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:18:55.057

当需求未知时，很难优化（=选择“最佳”）。您确实声明您的目标是保持 C 代码“小巧且可维护”，这似乎意味着您应该寻找一个库。也许[msgpack](http://msgpack.org/)通过本地套接字？

此外，您的基本前提是服务器必须用 C 编写，因为您有一个专有协议，这似乎......至少很奇怪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T15:23:17.357

编辑：您需要的是“序列化框架”，即可以将内存结构转换为字节流的东西。最佳候选人是：

*   [协议缓冲区](http://code.google.com/p/protobuf/)
*   [消息包](http://msgpack.org/)
*   [JSON](http://www.json.org/)

优点缺点：

**协议缓冲区**

*   `+`快速地
*   `+`易于版本化（当您第一次需要更改消息格式时，您会开始非常喜欢它，并且在此之前您会诅咒它）
*   `-`解决了很多你还不知道的问题。这使得 API 有点“奇怪”。我向你保证，他们有很好的理由来说明他们这样做的方式和方式，但有时你会感到困惑。

我对 MessagePack 了解不多。

最后：

**JSON**

*   `+`任何语言都可以读取和写入 JSON 数据。
*   `+`无需工具即可人类阅读
*   `-`有点慢
*   `-`格式非常灵活，但是如果您需要进行较大的更改，则需要找到一种策略来确定阅读消息时的格式（= 哪些字段）。

至于传输层：

优点缺点：

**共享内存**

*   `+`最快的选择
*   `-`您需要第二个通道（如信号量）来告诉其他进程数据现已准备就绪
*   `-`当您尝试连接两个以上的进程时变得非常丑陋
*   `-`操作系统特定

**命名管道**

*   `+`非常容易设置
*   `+`相当快
*   `-`只允许两个进程交谈……或者更确切地说，一个进程在一个方向上与另一个进程交谈。如果需要双向通信，则需要多个管道

**插座**

*   `+`很容易设置
*   `+`适用于所有和任何语言
*   `+`允许远程访问（并非所有进程都需要在同一台机器上）
*   `+`一台服务器多进程双向通信
*   `-`比 shmem 和管道慢

**零MQ**

*   `+`喜欢插座，但更好
*   `+`现代 API（不是旧的 IPC/socket 垃圾）
*   `+`支持多种语言...
*   `-`...但不是所有的

如果可以，我建议您尝试 ZeroMQ，因为它是一个现代框架，可以解决您在使用旧技术时会遇到的许多问题。

如果失败了，我接下来会尝试使用套接字。他们很容易，得到很好的支持和温顺。

# php - GoogleDrive 服务 listFiles() 共享（关闭）

> ID：12585988
> 
> 赞同：0
> 
> 时间：2012-09-25T15:16:02.520
> 
> 标签：php, google-drive-api, google-docs-api

我有一个问题，我目前正在使用来自 Google 自己的 API 的 apiDriveService。我得到一个文件列表，使用它可以正常工作

```
$result = $drive->files->listFiles(); 
```

有没有办法知道文件与谁共享.. 让我更好地解释一下自己.. 我在 Google Drive 上创建了一个文档并与我的老板共享，例如，我想查看与谁共享该文件。

这可能吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:33:11.357

[您可以使用文件的权限集合](https://developers.google.com/drive/v2/reference/permissions/list)检查这些文件的权限。但是，该文件将仅包含每个用户的 ID，而不包含电子邮件地址。这样一来，具有读取权限的其他人将无法嗅探其他查看者的电子邮件地址，从而规避隐私措施。

# python - 从另一个 sikuli 项目运行 Sikuli 文件

> ID：12585990
> 
> 赞同：2
> 
> 时间：2012-09-25T15:16:08.660
> 
> 标签：python, jython, sikuli

我想做的是在不同的文件中用 sikuli 编写几个 UnitTest，然后生成报告。

我想做这样的事情：

项目Tests_Thing1.sikuli：

```
import unittest

class Tests_Thing1(unittest.TestCase):
    def setUp(self):
        #do some stuff     
    def tearDown(self):
        #do some stuff  
    def test_Created(self):
        #do some sikuli stuff 
```

并且有类似的Tests_Thing2和Tests_Thing3项目

项目 Run_Tests.sikuli：

```
import unittest
## import siluli projects?

suite = unittest.TestSuite()
suite.addTests(Tests_Thing1)
suite.addTests(Tests_Thing2)
suite.addTests(Tests_Thing3)

suite.run(result)
#generate report from all tests 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:25:59.283

我认为您可以使用标准单元测试[http://www.jython.org/jythonbook/en/1.0/TestingIntegration.html](http://www.jython.org/jythonbook/en/1.0/TestingIntegration.html)并将 Sikuli 导入您的课程。您需要 Jython 来运行它，如下所示

[如何在python中导入sikuli模块？](https://stackoverflow.com/questions/10583682/how-to-import-the-sikuli-module-in-python)

[https://answers.launchpad.net/sikuli/+question/136170](https://answers.launchpad.net/sikuli/+question/136170)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T09:01:06.823

就我而言，我想拥有同样的东西。我想运行几个测试并创建一个报告。我所做的是创建了一个简单的应用程序，它在命令行上一个一个地运行选定的 sikuli 脚本。我将它们的输出（通过、失败、错误消息）收集在一个文本文件中，并在应用程序中再次显示。一个人实际上可以写一个 Html 什么的。

例如 runikulix.cmd -r TableSelectCells.sikuli >> report.txt

在这里，您可以从命令行查看更多操作方法。 [http://doc.sikuli.org/faq/010-command-line.html](http://doc.sikuli.org/faq/010-command-line.html)

# php - 获取 xpath 子节点值

> ID：12585991
> 
> 赞同：1
> 
> 时间：2012-09-25T15:16:10.760
> 
> 标签：php, xml, xpath, simplexml

我无法从下面的 XML 获取文本“TestTwo”，其中父级具有 Name=SN 的属性。我能够获得 SimpleXMLElement，但无法弄清楚如何获得孩子。

返回文本“TestTwo”的最佳方式是什么？

谢谢！

```
$xml = simplexml_load_string($XMLBELOW);
$xml->registerXPathNamespace('s','urn:oasis:names:tc:SAML:2.0:assertion');
$result = $xml->xpath("//s:Attribute[@Name='sn']");
var_dump( $result);

$XMLBELOW = <<<XML
<?xml version="1.0" ?>
<saml2:Assertion ID="SAML-4324423" IssueInstant="2012-09-24T17:49:39Z" Version="2.0" xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">
  <saml2:Issuer>
    Test
  </saml2:Issuer>
  <saml2:Subject>
    <saml2:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified" NameQualifier="Test">
      Tester
    </saml2:NameID>
    <saml2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
      <saml2:SubjectConfirmationData NotBefore="2012-09-24T17:48:39Z" NotOnOrAfter="2012-09-24T17:51:39Z"/>
    </saml2:SubjectConfirmation>
  </saml2:Subject>
  <saml2:Conditions NotBefore="2012-09-24T17:48:39Z" NotOnOrAfter="2012-09-24T17:51:39Z"/>
  <saml2:AuthnStatement AuthnInstant="2012-09-24T17:49:39Z" SessionNotOnOrAfter="2012-09-24T17:51:39Z">
    <saml2:SubjectLocality Address="105.57.487.48"/>
    <saml2:AuthnContext>
      <saml2:AuthnContextClassRef>
        urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified
      </saml2:AuthnContextClassRef>
    </saml2:AuthnContext>
  </saml2:AuthnStatement>
  <saml2:AttributeStatement>
    <saml2:Attribute Name="sn" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified">
      <saml2:AttributeValue>
        TestTwo
      </saml2:AttributeValue>
    </saml2:Attribute>
    <saml2:Attribute Name="departmentNumber" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified">
      <saml2:AttributeValue>
        OPERS
      </saml2:AttributeValue>
    </saml2:Attribute>
  </saml2:AttributeStatement>
</saml2:Assertion>
XML; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:32:10.657

这个怎么样？

```
$result = $xml->xpath("//s:Attribute[@Name='sn']/*");
var_dump( $result[0]->__toString() ); // or just `echo $result[0];` 
```

更新后的表达式将为您提供目标元素的所有子元素（如果您愿意，可以进一步缩小结果集）。

当`xpath()`方法返回一个数组时，您需要获取它的一些元素，然后在这些对象上调用“toString”来获取它的文本。在这里，我完成了第一个。

# android - 如何获取在第一堂课中使用的xml id以在android的第二堂课中使用

> ID：12585992
> 
> 赞同：0
> 
> 时间：2012-09-25T15:16:14.210
> 
> 标签：android

我在第一个活动中获得了 android xml id

（例如）

```
setContentView(R.layout.sample);
button1=(Button)findViewById(R.id.b_one);
button2=(Button)findViewById(R.id.b_two); 
```

现在的问题是如何在第二个 Activity 中使用相同的按钮而不使用 `findViewById()`.

（即）我不想在第二个 Activity 中访问 xml，而不是我必须从第一个 Activity 本身访问那些按钮 ID。

我正在尝试创建一个通用标题。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:22:55.980

你不能，因为来自两个不同活动的按钮**不会**共享同一个实例。

相反，如果您想为您的标头提供一些通用代码，您可以做的是将此代码委托给第三类的静态方法。例如 ：

```
public class MyHeader {

    private Button button1,button2;

    public MyHeader(Activity source) {
       this.button1 = (Button)source.findViewById(R.id.b_one);
       this.button2 = (Button)source.findViewById(R.id.b_two); 
       // ...
       }

    public Button getHeaderButtonOne() { return button1; }
    // And so on...
    } 
```

并在您的活动中，保留此类的一个实例（初始化为：

```
 private MyHeader header;

  // ... in onCreate() method
  header = new MyHeader(this); 
```

# django - ImportError：无法导入名称 MPTTModel

> ID：12585993
> 
> 赞同：4
> 
> 时间：2012-09-25T15:16:20.647
> 
> 标签：django, django-admin, django-mptt

我在教程“ [http://django-mptt.github.com/django-mptt/tutorial.html](http://django-mptt.github.com/django-mptt/tutorial.html) ”中做了步骤

但它仍然给我导入错误，我仔细检查了 mptt 的代码，发现 mptt>model 文件中存在 MPTTMODEL 类

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1ec4710>>
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 67, in _populate
    self.load_app(app_name)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/kareemhashem/espace/sharek/core/models.py", line 12, in <module>
    from mptt.models import MPTTModel, TreeForeignKey
ImportError: cannot import name MPTTModel 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T16:51:27.617

您可以尝试一件事：转到控制台并输入：（`python`获取 python 控制台）然后输入：`from mptt.models import MPTTModel`

如果这给您一个错误，则说明 mptt 没有正确安装。

如果您正在使用[pip](http://www.pip-installer.org/en/latest/)，您可以轻松地执行以下操作：`pip install django-mptt`或者您可能会尝试`pip install django-mptt --upgrade`更新您的安装。可能是您的安装没有成功。

如果您不使用 pip 或 virtualenv，我强烈推荐它。开始有点困难，但安装起来更糟。请参阅以下资源以开始[使用](http://rubayeet.com/2011/03/04/getting-started-with-pipvirtualenv/)：[1、2](http://jontourage.com/2011/02/09/virtualenv-pip-basics/)

如果你已经成功安装了mptt，但仍然无法导入，那么你放置mptt的文件夹可能是python无法访问的。因此，将 mptt 所在的路径添加到您的 PYTHONPATH 中。请参阅此[线程](https://stackoverflow.com/questions/3402168/permanently-add-a-directory-to-pythonpath)如何做到这一点。

# c# - FoxPro 到 C#：ODBC、OLE DB 或其他方法之间的最佳方法是什么？

> ID：12585995
> 
> 赞同：4
> 
> 时间：2012-09-25T15:16:24.140
> 
> 标签：c#, .net, foxpro, visual-foxpro

我们需要使用 C# 从 FoxPro 8 中读取数据。我要做一些操作，并将其中一些数据推送到 SQL Server 数据库。我们不确定读取这些数据的最佳方法是什么。

我看到了 OLE DB 和 ODBC；什么是最好的？

要求：

1.  导出程序将每晚运行，但我的公司每天 24 小时运行。
2.  DBF 有时可能很大。
3.  我们不需要修改数据。
4.  我们使用 FoxPro 的系统非常不稳定：我需要找到一种绝对不会损坏数据的方法，并且最好不要在读取时锁定 DBF 文件。
5.  速度是次要要求：它必须快，但要求 4 是最重要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T15:32:35.060

我会使用 OLEDB 连接器——它最近更新了很多，速度更快并且处理内存更好。

如果您只是通过 OLEDB 驱动程序从 DBF 读取数据，我不会担心在记录或文件级别锁定或损坏数据。您需要做的就是处理 C# 代码中的异常，例如，当 FoxPro 应用程序中的某些进程以独占方式打开 DBF 并且您无法读取它时。

您还需要注意优化任何查询以使用 DBF 文件上的可用索引，特别是因为您提到它很大。

我假设这都在同一个局域网上？如果它必须在 Internet 上运行，那么您需要调查通过 Web 服务公开 FoxPro 数据。

最后，还有其他访问 DBF 文件的选项。

Sybase 还提供可以访问 DBF 文件的[ODBC](http://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=15&Product=15)和[OLEDB](http://devzone.advantagedatabase.com/dz/content.aspx?Key=20&Release=15&Product=14)驱动程序——但是它们不能使用 FoxPro 触发器、存储过程等。不过，在你的情况下，这几乎肯定无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:36:05.720

根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa977092%28v=vs.71%29.aspx)，它建议使用 Visual FoxPro OLE DB Provider。查看文章，它提供了有关如何使用 OLE DB 提供程序以及如何从 DBF 数据源查询数据的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T23:48:03.570

在 VFP 中编写一些将数据转储为 CSV 或 XML 的代码也很容易——考虑将此代码添加到您的 FoxPro 应用程序中。处理这些文件可能比尝试连接到不稳定的 FoxPro 数据库要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T03:09:21.393

Codeplex 上有一个 LinqToVfp 工具。见： http: [//linqtovfp.codeplex.com](http://linqtovfp.codeplex.com)

它有一些很好的示例可以帮助您入门。

# jquery - 添加类并动态更改css（jquery）

> ID：12585996
> 
> 赞同：0
> 
> 时间：2012-09-25T15:16:26.070
> 
> 标签：jquery, css, json

我正在做一个项目，我正在解析一个 json 文件以获取内容，然后使用 php 执行 $.post 来更新更改。我可以毫无问题地阅读和写作。

但是，在我从 json 解析数据后，如果我进行任何更改，例如通过单击添加新类，它会添加类但不应用 css。

前任：

```
 <div id="someID">lorem ipsum</div> <!-- (assuming I am "appending" this div via jquery and if I clicked on this div)

    <!-- it will become -->
    <div id="someID" class="red">lorem ipsum</div> <!-- the text and/or background should be red --> 
```

我想我可以应用 style="color: red" 而不是应用类，但我不希望这样。

关于如何使这种动态/实时的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:21:34.930

使用`.addClass`.

看这里：http: [//jsfiddle.net/TeHtz/](http://jsfiddle.net/TeHtz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:21:45.177

```
$("#someID").addClass("class_name_you_want_to_add"); 
```

如需进一步参考，您可能需要查看[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T15:21:33.887

```
$('#someID').addClass("red") 
```

试试看

# jquery - 图像（区域）地图悬停 - 如何使用 jquery？

> ID：12585997
> 
> 赞同：0
> 
> 时间：2012-09-25T15:16:40.847
> 
> 标签：jquery, image, map, hover, area

抱歉，但我对 jquery 了解不多，我认为对于有知识的人来说这是非常简单的解决方案。我一整天都试图实现这个[Fiddle](http://jsfiddle.net/QW2xd/)，但我就是无法让它工作。

我的网站在[这里](http://www.beawareof.info/supernova/pritlicje.php)，我的问题在左侧类别菜单中 - 对不起斯洛文尼亚命名 - 在“TRGOVINE”下 - （moda，šport，obutev，..等）我希望这个链接突出显示区域地图上的特定商店，悬停已经实现。因此，我希望将鼠标悬停在“Moda”上，以突出显示“Moda”类别下的所有商店。

你推荐哪个脚本？我应该为链接和图像分配什么 ID 和类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:59:35.527

如果您想要一些滞后，我建议您查看[hoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)。您可能还想查看[此地图高亮插件](http://davidlynch.org/blog/2008/03/maphilight-image-map-mouseover-highlighting/) [（此处为演示）](http://davidlynch.org/projects/maphilight/docs/demo_usa.html)。

# sql-server - 提供程序：SQL 网络接口，错误 26 - 错误定位服务器/指定的实例

> ID：12585998
> 
> 赞同：2
> 
> 时间：2012-09-25T15:16:41.783
> 
> 标签：sql-server

```
try
        {
            //Create our connection strings
            string sSqlConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=" + Path.GetDirectoryName(Path.GetDirectoryName(Application.StartupPath)) + "\\ClaimFiles.mdf;Integrated Security=True;User Instance=True";
            MessageBox.Show(sSqlConnectionString);

            //Execute a query to erase any previous data from our destination table
            string sClearSQL = "DELETE FROM PA";
            SqlConnection SqlConn = new SqlConnection(sSqlConnectionString);
            SqlCommand SqlCmd = new SqlCommand(sClearSQL, SqlConn);
            SqlConn.Open();
            MessageBox.Show(SqlCmd.ExecuteNonQuery().ToString());
            SqlConn.Close();
        }
        catch (SqlException ex)
        {
            //handle exception
            StringBuilder errorMessages = new StringBuilder();

            for (int i = 0; i < ex.Errors.Count; i++)
            {
                errorMessages.Append("Index #: " + i + "\n" +
                    "Message: " + ex.Errors[i].Message + "\n" +
                    "ErrorNumber: " + ex.Errors[i].Number + "\n" +
                    "Source: " + ex.Errors[i].Source + "\n" +
                    "Severity Level: " + ex.Errors[i].Class + "\n" +
                    "Server:" + ex.Errors[i].Server + "\n");
                MessageBox.Show(errorMessages.ToString());
            }
        } 
```

以上是我在 C# 中的代码，我使用的是 Microsoft SQL express。上面的代码在点击时被激活。当我在 Visual Studio 中运行代码时，一切正常。但是当我将项目的文件夹复制到另一台计算机（操作系统：Windows XP）并运行 .exe 文件时，程序会捕获 SqlException：

> 建立与服务器的连接时发生错误。连接到 SQL Server 2005 时，此故障可能是由于在默认设置下 SQL Server 不允许远程连接造成的。（提供者：SQL 网络接口，错误 26 - 错误定位服务器/指定实例）

有人可以帮我解决这个问题，这对解决这个问题会有很大帮助，因为程序必须在不同的计算机上运行。顺便说一下程序的目标框架是.NET 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:34:16.933

> *   确保您的服务器名称正确，例如，名称没有拼写错误。
> *   确保您的实例名称正确，并且您的目标机器上实际上存在这样的实例。[更新：某些应用程序将 \ 转换为 . 如果您不确定您的应用程序，请在连接字符串中同时尝试 Server\Instance 和 Server\Instance]
> *   确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
> *   确保 SQL Browser 服务正在服务器上运行。如果服务器上启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

这似乎是一个很好的参考：http: [//blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified。 aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)