# StackOverflow 问答 13903000-13903999

# vim - Vim：为什么我不能映射到 钥匙？

> ID：13903003
> 
> 赞同：1
> 
> 时间：2012-12-16T15:58:46.973
> 
> 标签：vim

我在tips.txt中看到了这个键绑定：

```
:map <C-U> <C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y><C-Y> 
```

这会导致**CTRL-U**平滑向上滚动。它只移动视口，我也想移动光标，所以向下滚动我试过：

```
:map <C-D> <C-E><j><C-E><j><C-E><j><C-E><j><C-E><j><C-E><j><C-E><j><C-E><j> 
```

由于**CTRL-E**向下移动视口，而**j**向下移动光标。然而，这不起作用。当我按下**CTRL-D**时，视口只会向下跳一行，终端会发出哔哔声。

如何映射**CTRL+D**以滚动和移动光标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:12:24.910

您不应该在 . 周围使用尖括号 ( `<`/ `>`) `j`。

# jquery - 淘汰赛选项文本绑定

> ID：13903007
> 
> 赞同：1
> 
> 时间：2012-12-16T15:58:59.807
> 
> 标签：jquery, data-binding, knockout.js

考虑以下 HTML：

```
<select data-bind="options: assemblies, optionsText: 'Name', value: selectedAssembly">
</select>

Name <input type="text" data-bind="value: selectedAssembly().Name" /> 
```

我正在通过 jQuery AJAX 检索程序集数组：

```
[{"Id":1,"Name":"Foo"},
{"Id":2,"Name":"Bar"}] 
```

selectedAssembly 是一个 observable 并且 ().Name 抛出一个异常。我需要在选择选项中更改**反映运行时更改的名称属性。**我试过了：

```
<p data-bind="with: selectedAssembly">
    Name <input type="text" data-bind="value: $data.Name" />
 </p> 
```

这样我就成功地检索了 Name 属性，但是只有当用户从框中选择另一个选项而不是实时更新时，它的值更改才会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:17:45.703

淘汰赛不能直接做你想做的事。如果您的 ID 和 Name 字段包含相同的值，它可能会。但这不是你要求的，我通常不会自己做。

您可以通过引入 ko.computed 来实现。以下是我在[http://jsfiddle.net/photo_tom/P8R8b/7/](http://jsfiddle.net/photo_tom/P8R8b/7/)的工作小提琴中的内容。

```
vm.selectedName = ko.computed({
    read: function() {
        var localVar = this.selectedAssembly(); // need for v8 compiler.
        if (localVar) {
            return localVar.Name();
        }
    },
    write: function(value) {
        var testValue = value.toLowerCase();
        var selArray = vm.assemblies();
        var l = selArray.length;
        for (var i = 0; i < l; i++) {
            var s = selArray[i].Name();
            if (s.toLowerCase() === testValue) {
                vm.selectedAssembly(selArray[i]);
            }
        }

    },
    owner: vm
});. 
```

其工作方式是 read 属性返回 Name 属性以进行显示。写属性是关键。它在选项数组中搜索名称匹配，然后将该数组元素设置为当前选项。

但是，在我的应用程序中，我会使用一个自动完成组合框，它允许用户直接在 select 语句中键入所需的值。看看[https://stackoverflow.com/a/7538860/136717](https://stackoverflow.com/a/7538860/136717)。这就是我目前正在做我的应用程序的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:53:37.470

您需要`Name`在数组中的项目上使属性可观察，`assemblies`以便能够编辑选择中的项目。

您可以手动将 JSON 转换为具有可观察属性的对象，也可以使用 为解决这个确切问题而编写的[Knockout Mapping 插件：](http://knockoutjs.com/documentation/plugins-mapping.html)

用法很简单：

```
function viewModel() {
    var self = this;    
    self.selectedAssembly = ko.observable();

    // you need to have a default item in assemblies
    // otherwise ko will set undefinied to selectedAssembly because it the 
    // assemblies collection is empty at the begining
    // which brakes the selectedAssembly().Name binding
    self.assemblies = ko.observableArray([{Name: ""}]);    

    $.getJSON('http://localhost:9000/api/assemblies', function(data){
        ko.mapping.fromJSON(data, {}, self.assemblies)
    });
} 
```

带有硬编码数据的简化[JSFiddle 。](http://jsfiddle.net/qPBmQ/2/)

# javascript - 使循环不挂起浏览器

> ID：13903009
> 
> 赞同：0
> 
> 时间：2012-12-16T15:59:12.110
> 
> 标签：javascript, loops, blocking

同步异步操作时是否可以使`for`和循环不挂起浏览器？`while`

我问这个是因为同步`XMLHttpRequest`只会阻止 UI 事件，但不会完全挂起浏览器。我想有相同的循环行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:28:59.120

我认为你可能会解决这个问题有点错误。JavaScript 是单线程的，因此您不希望在等待条件时出现“阻塞”。相反，您想利用回调来提醒函数您已经完成了您正在做的任何事情。

例如，假设您有以下常见场景：您的页面有一个“提交”按钮，用于验证数据，然后询问用户是否确定要继续，然后提交数据。您可能会想象代码如下所示：

```
function clickSubmit() {
    //validate data
    //show confirmation dialog
    //block until "OK" or "Cancel" is clicked
    //if OK, submit
    //else cancel
} 
```

当然，这不会真正起作用，因为当您的功能被阻止时，用户将无法单击“确定”或“取消”。因此，您将使用回调来处理这种情况。更像这样的东西：

```
function clickSubmit() {
    //validate data
    dialogOK.onclick = function () {
        //submit
    }
    dialogCancel.onclick = function () {
        //cancel
    }
    //show confirmation dialog
} 
```

这样，一旦显示对话框，该函数将放弃唯一的 JS 执行线程，但一旦用户选择确认或取消，就会有效地恢复执行。使用闭包范围允许您创建一个持久的执行上下文，这样您就不会“丢失跟踪”您的数据，即使该函数正在将 CPU 交给其他任务。

现实生活中可能需要根据具体情况进行一些调整，但这是您可以用来实现所需功能的一般结构。

希望我理解你的问题。在细节上有点稀疏。

顺便说一句，`XMLHttpRequest`它的方式是利用本机浏览器功能。不过，它实际上并不需要在等待响应时“阻塞”。它可以简单地告诉浏览器引擎发送一个 HTTP 请求，然后在响应出现时通知它。非常类似于 AJAX 在实践中的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:02:07.977

是的，您可以`setTimeout`通过`setInterval`它定期控制浏览器以防止“挂起”。你可以看看[jQuery ASync 插件](http://mess.genezys.net/jquery/jquery.async.php)

# android - 单击它时如何获取列表项文本值？

> ID：13903013
> 
> 赞同：4
> 
> 时间：2012-12-16T15:59:22.403
> 
> 标签：android, android-intent

我有一个列表项，我想获取单击的项目文本值。以下代码对我不起作用。

它工作正常，当我更改以下行时：

```
String fullname = (String) l.getItemAtPosition(position); 
```

至：

```
String fullname = "Hello world"; 
```

谢谢你的帮助。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    String fullname = (String) l.getItemAtPosition(position);
    Intent bucket = new Intent(SQLView.this, SQLView2.class);

    Bundle b = new Bundle();
    b.putString("fullname", fullname);      
    bucket.putExtras(b);
    startActivity(bucket);
} 
```

这是我在 LogCat 上遇到的错误

```
12-16 15:41:50.322: D/AndroidRuntime(279): Shutting down VM
12-16 15:41:50.322: W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-16 15:41:50.352: E/AndroidRuntime(279): FATAL EXCEPTION: main
12-16 15:41:50.352: E/AndroidRuntime(279): java.lang.ClassCastException: android.database.sqlite.SQLiteCursor
12-16 15:41:50.352: E/AndroidRuntime(279):  at com.test.calculator.SQLView.onListItemClick(SQLView.java:52)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.widget.ListView.performItemClick(ListView.java:3382)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.os.Handler.handleCallback(Handler.java:587)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
12-16 15:41:50.352: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-16 15:41:50.352: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
12-16 15:41:50.352: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
12-16 15:41:50.352: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-16 15:41:50.352: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-16 15:41:50.352: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T16:08:11.887

更改您的代码，就好像您正在使用`SimpleCursorAdapter`or `CursorAdapter`：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Cursor cursor = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
    cursor.moveToPosition(position);

    String fullname = cursor.getString(cursor.getColumnIndex("fullname"));

    Intent bucket = new Intent(SQLView.this, SQLView2.class);

    Bundle b = new Bundle();
    b.putString("fullname", fullname);      
    bucket.putExtras(b);
    startActivity(bucket);

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T16:05:31.833

尝试这个：

```
String fullname = l.getItemAtPosition(position).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:08:15.077

[`getItemAtPosition()`](http://developer.android.com/reference/android/widget/AdapterView.html#getItemIdAtPosition%28int%29)返回`Object`与给定位置关联的。

因此，检查正在返回的类类型（可能是您提供的类型）并使用类方法来获取实际文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T16:14:20.733

如果项目是`TextView`s 然后使用

```
String fullname = v.getText().toString(); 
```

# javascript - 如何通过“已选择”标签更改背景图片

> ID：13903016
> 
> 赞同：0
> 
> 时间：2012-12-16T15:59:56.510
> 
> 标签：javascript, html, css

我正在尝试使用下拉菜单更改正文的背景图像（id =“shelf”）：

```
<script type="text/javascript">
function changeTheme()
{document.getElementById("shelf").style.backgroundImage = "url("+theme+")";
  var e = document.getElementById("themes");
  var theme = e.options[e.selectedIndex].value;
}  
</script>
</head>
<body id="shelf">
<select id="themes" onChange="changeTheme()">
  <option value="images/bg/default.png">Default</option>
  <option value="images/bg/oriental.png">Oriental</option>
  <option value="images/bg/office.png">Office</option>
  <option value="images/bg/old.png">Old</option>
</select>
</body> 
```

但我不知道为什么它不起作用..代码中的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:11:54.790

您看到的具体行为是什么？

尝试这个：

```
<html>
<head>
<script type="text/javascript">
function changeTheme()
{

  var e = document.getElementById("themes");
  var theme = e.options[e.selectedIndex].value;
  console.log(theme);
  document.getElementById("shelf").style.backgroundImage = "url("+theme+")";
}  
</script>
</head>
<body id="shelf">
<select id="themes" onChange="changeTheme()">
  <option value="images/bg/default.png">Default</option>
  <option value="images/bg/oriental.png">Oriental</option>
  <option value="images/bg/office.png">Office</option>
  <option value="images/bg/old.png">Old</option>
</select>
</body>    
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:13:13.220

它正在工作。

```
function changeTheme() {
    var e = document.getElementById("themes");
    var theme = e.options[e.selectedIndex].value;
    document.getElementById("shelf").style.backgroundImage = "url(" + theme + ")";

} 
```

# c++ - 删除模板 C++ 中的 const 限定符

> ID：13903018
> 
> 赞同：1
> 
> 时间：2012-12-16T16:00:16.020
> 
> 标签：c++, constants

如何从数据类型中删除所有 const 限定符？

我尝试使用`std::remove_cv`但没有用。

```
std::remove_cv< const char *>::type 
```

不是一样`std::remove_cv<char*>::type`吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T16:13:48.070

特征是正确地做所有事情：

`const char*`与 相同`char const*`，**也不与 相同`char* const`**。所以在你的情况下，它是*指针*，`const`而不是指针。并且`remove_const`（从逻辑上讲）只删除外部的`const`，而不是内部的。

如果你真的想删除`const`指针的ness，你可以这样做：

```
using T = char const*;
using NoConstT = std::add_pointer<std::remove_cv<std::remove_pointer<T>::type>::type>::type; 
```

（虽然`std::add_pointer<T>::type`可以放弃以支持更简单的`T*`......）

即：移除指针，移除`const`指针对象的，将结果再次变成指针。

事实上，这是使用[R. Martinho Fernandes 出色的](https://stackoverflow.com/users/46642/r-martinho-fernandes)[Wheels](https://bitbucket.org/martinhofernandes/wheels)库的好机会，它为此类嵌套特征提供了方便的快捷方式：

```
#include <wheels/meta.h++>
using namespace wheels;
…

using NoConstT = AddPointer<RemoveCv<RemovePointer<T>>>; 
```

更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:25:18.090

没有标准的方法可以做到这一点，您需要自己编写：

```
template<typename T> struct remove_const_recursive { typedef T type; };
template<typename T> struct remove_const_recursive<T const volatile> {
    typedef typename remove_const_recursive<T>::type volatile type;
};
template<typename T> struct remove_const_recursive<T volatile> {
    typedef typename remove_const_recursive<T>::type volatile type;
};
template<typename T> struct remove_const_recursive<T const> {
    typedef typename remove_const_recursive<T>::type type;
};
template<typename T> struct remove_const_recursive<T&> {
    typedef typename remove_const_recursive<T>::type& type;
};
template<typename T> struct remove_const_recursive<T*> {
    typedef typename remove_const_recursive<T>::type* type;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:23:38.523

您可以看到常量指针和指向 const 的指针之间的区别以及各种[`type_traits`](http://www.cplusplus.com/reference/type_traits/)with

```
#include <iostream>
#include <type_traits>

int main()
{
    std::cout << std::is_same<std::remove_const<const char*>::type, char*>::value << '\n';
    std::cout << std::is_same<std::remove_const<char* const>::type, char*>::value << '\n';
    std::cout << std::is_same<std::add_pointer<std::remove_const<std::remove_pointer<const char*>::type>::type>::type, char*>::value << '\n';
    return 0;
} 
```

作为输出

> 0
> 1
> 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T16:09:26.350

递归执行。匹配`T*`一个专业，然后重新应用`*`，等等。

# jakarta-ee - 逐步 jboss 7.1 最终 jndi 属性文件创建

> ID：13903020
> 
> 赞同：0
> 
> 时间：2012-12-16T16:00:44.283
> 
> 标签：jakarta-ee, jndi, jboss7.x, ejb-3.1

我在我的机器上运行了 eclipse juno 和 jboss AS 7.1 final 并通过它进行了配置（eclipse juno）。我有一个简单的无状态 bean 及其接口（实际上与 Enterprise Java Beans 3.1 6th Edition 书中的示例完全相同）。这是代码：

* * *

```
package beans;

public class CalculatorBeanBase implements CalculatorCommonBusiness{

    public int add(int[] opers){

        int sum = 0;
        for(int c:opers){
            sum+=c;
        }
        return sum;
    }

} 
```

* * *

```
package beans;

public interface CalculatorCommonBusiness {

    public int add(int[] opers);

} 
```

* * *

```
package beans;

public interface CalculatorRemoteBusiness extends CalculatorCommonBusiness {} 
```

* * *

```
package beans;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;

@Stateless
@LocalBean
public class SimpleCalculatorBean extends CalculatorBeanBase {} 
```

* * *

我正在尝试进行以下 JUnit 测试，不幸的是，该示例提到“使用我们假设在类路径上呈现的标准 jndi.properties 文件”（这是我的第一个问题，我不知道这意味着什么，我事实上做了一些研究，但我不太明白它是如何工作的，让我感到困惑，最终似乎无法让它发挥作用）。

```
package beans;

import javax.naming.Context;
import javax.naming.InitialContext;
import junit.framework.TestCase;
import org.junit.BeforeClass;
import org.junit.Test;

public class CalculatorIntegrationTestCase {

    private static Context namingContext;
    private static SimpleCalculatorBean cal;
    private static final String JNDI_NAME_CALC = "java:global/jndi.properties/SimpleCalculatorBean";

    @BeforeClass
    public static void obtainProxyReferences() throws Throwable {
        namingContext = new InitialContext();
        cal = (SimpleCalculatorBean)namingContext.lookup(JNDI_NAME_CALC);
    }

    private void assertAdditionSucceeds(SimpleCalculatorBean cal){
        final int[] oper = {2,3,4};
        final int expectedSum = 9;
        final int actualSum = cal.add(oper);

        TestCase.assertEquals("Assert Failed!!. The actual value is not the expected",expectedSum, actualSum);
    }

    @Test
    public void testAdditionUsingBusinessReference() throws Throwable {
        this.assertAdditionSucceeds(cal);
    }
} 
```

我需要知道那个jndi。属性文件的工作原理以及我必须如何设置它。（我阅读了最后一个问题，我得到了以下 .txt 文件并将其扩展名更改为 .jar，我不知道这是否正确）：

```
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jpn://localhost:1099 
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces 
```

最后，我将该 .jar 文件放入类路径中（不知道我是否做得对：右击项目、构建路径、库、添加外部 jar）。

我做了以上所有的事情，但我不断得到以下内容：

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at beans.CalculatorIntegrationTestCase.obtainProxyReferences(CalculatorIntegrationTestCase.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

当然，我发布了项目（尽管通过 eclipse，项目>运行>在服务器上运行）。帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:58:25.647

AS7 具有远程 ejb/jndi 的全新实现，这意味着您不能再使用 jnp 了。

看看[https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)

和[https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote-naming+project](https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote-naming+project)

在那里您可以找到如何立即执行此操作的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T13:40:43.397

检查 jndi.properties 文件中的命名提供程序 url。它应该是`jnp://localhost:1099`

# java - 初始化毁了我的代码

> ID：13903021
> 
> 赞同：-2
> 
> 时间：2012-12-16T16:00:47.160
> 
> 标签：java, variables, loops, for-loop

我是 java 新手，我目前正在做本学期的期末项目（CS 专业），我遇到了“变量可能没有被初始化”错误。我在网站上尝试了其他修复，但每当我这样做时，它都会使用初始化变量，而不是我在循环中定义的变量。

```
public static void main(String[] args) {
    double priceperpound       = 2;    // price per pound of coffee
    int numberofbags           = 2;    // number of pounds of coffee
    double bagweightinpounds   = 1;    // weight of the bag in punds
//  double pricebeforetaxes    = 8;    // total before taxes
//  double totalpricewithtaxes = 0;    // total price
    double taxrate             = .065; // whats the tax?
    double TotalWeight         = 0;    // total weight of purchase
//  double discountprice       = 0;    // discounted price
//  double discount            = .9;   // if you qualify the price before taxes will be     multiplied by this
    int row;
    int col;

    PriceCalculator calculations = new PriceCalculator(priceperpound, numberofbags,
            bagweightinpounds, taxrate);

    for (bagweightinpounds = 1; bagweightinpounds <= 5; bagweightinpounds = bagweightinpounds + 1) {

        for (numberofbags = 2; numberofbags <= 1024; numberofbags = numberofbags * 2) 
        {
            System.out.printf("%f", calculations.getBasePrice());
        }
    }
    Scanner input = new Scanner(System.in);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:33:44.337

就像这样.........

*   在 java 中，当我们在 Class 范围内声明一个变量（实例变量）时，它会自动分配其默认值。

*   但是当我们在方法范围内声明一个变量（局部变量）时，它必须在使用之前进行初始化。

所以在你的情况下这样做：

整数行=0；

int col = 0;

请原谅我的代码格式，我在手机上......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:10:27.513

如果你声明一个变量并且没有给它默认值（例如）：

```
int row; 
```

如果您尝试在表达式中使用它的值：

```
row = row + 1; 
```

然后编译器会抛出一个错误。找到错误所在的行并分析变量。

更新：在循环中初始化的唯一变量是在`for`循环中，在第一条语句中（vg`for(int i = 0; i < 5; i++)`初始化`i`变量）。

# foursquare - 带有查询的foursquare探索场地

> ID：13903022
> 
> 赞同：0
> 
> 时间：2012-12-16T16:00:49.783
> 
> 标签：foursquare

试图了解在 FourSqure 中探索场地时如何使用查询参数。一些 POI 提供商有某种文本基础搜索，这是用于选择地点的附加过滤器。

但是这个： [https ://api.foursquare.com/v2/venues/explore?offset=0&limit=50§ion=coffee&ll=38.0,-78.5&radius=40233.60&client_id=xxx&client_secret=xxx&v=20121215](https://api.foursquare.com/v2/venues/explore?offset=0&limit=50&section=coffee&ll=38.0,-78.5&radius=40233.60&client_id=xxx&client_secret=xxx&v=20121215)

而这个： [https ://api.foursquare.com/v2/venues/explore?offset=0&limit=50§ion=coffee&query=Starbucks&ll=38.0,-78.5&radius=40233.60&client_id=xxx&client_secret=xxx&v=20121215](https://api.foursquare.com/v2/venues/explore?offset=0&limit=50&section=coffee&query=Starbucks&ll=38.0,-78.5&radius=40233.60&client_id=xxx&client_secret=xxx&v=20121215)

返回相同的信息。我认为有 query=Starbucks 会过滤列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:44:01.600

查询参数不适用于 section 参数。如果您想将结果过滤到“星巴克”，请省略 section=coffee 参数。

# deployment - 专业 rails 3.2+ 部署到 Heroku

> ID：13903036
> 
> 赞同：3
> 
> 时间：2012-12-16T16:02:33.107
> 
> 标签：deployment, heroku, automation, ruby-on-rails-3.2

我正在尝试为 Heroku 建立一种专业的部署方法，我的意思是：

*   通过保持小而频繁的部署（迭代/敏捷方法）最大限度地减少停机时间
*   尽可能自动化，这样我就不必担心胖手指或运行潜在的破坏性命令，因为我没有正确思考（即，生产系统上的“heroku run rake db:reset”）
*   允许简单的版本控制，因此我可以轻松（并立即）将生产系统回滚到以前的版本，如果发生错误，该版本可以工作
*   首先建立一个尽可能模仿生产系统的测试环境
*   确保在发生错误时备份数据库

由于 capistrano 不适合 Heroku，我的想法是接下来最好的事情是编写一个 ruby​​ 脚本来处理我的所有自动化部署。[根据https://gist.github.com/362873](https://gist.github.com/362873) ，我见过有人为此使用 rake 任务，但我认为 rake 并不是真正为这种功能而设计的。纯 ruby​​ 脚本会是 rake 任务的首选替代方案吗？

部署到heroku 非常简单，但要使其专业化（即，用户不会收到错误页面），我需要将其自动化以弥补人为错误。一直要输入“git push heroku master”、“heroku run db:migrate”有点老了。

我正在尝试将其归结为单线部署，并且到目前为止还没有真正看到任何关于 Heroku 或 SO 的有用教程可以真正实现这一点。

我实际上编写自己的部署脚本代码很好，我只是对最佳的长期实践感到困惑：rake 任务、ruby 脚本或一些我还没有找到的 3rd-party 实用程序。

我确信有许多专业的开发团队使用 Rails 和 Heroku，但我还没有看到他们如何实现部署过程的细节。

我通常自己做很多开发，然后其他成员处理部署，但现在我也在尝试学习部署方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:08:12.807

为避免粗手指和意外致命的拼写错误，请使用具有独特调用的脚本，例如 ./deploy-heroku

对于最后 2 -

*   我部署到具有完全相同设置的服务器（也在 heroku 上运行）。这样我就有了一个测试服务器来测试我的所有脚本、加载、数据库等。我将它部署在生产而不是登台上。
*   用于备份 - 使用 heroku 附加组件 - pg:backups。免费获得每日备份

# cookies - ASP net 4.5 中带有 MachineKey.UnProtect 和 Cookie 的 CryptographyException

> ID：13903049
> 
> 赞同：2
> 
> 时间：2012-12-16T16:04:25.927
> 
> 标签：cookies, encode, asp.net-4.5

我正在尝试用 ASP.NET 4.5的新方法`Encode`和方法替换已弃用的方法和方法。我也使用旧方法来加密和解密 cookie 值，但现在在调用方法时，我有一个.`Decode``MachineKey.Protect``Unprotect``Unprotect``CryptographyException`

我认为这与尝试在 cookie 值中保存保护方法发出的二进制数据的字符串表示有关。

方法很简单：

```
Public Shared Function Encode(text As String) As String
   If String.IsNullOrEmpty(text) Then
        Return String.Empty
    End If
    Dim stream As Byte() = Encoding.Unicode.GetBytes(text)
    Dim encodedValue As Byte() = MachineKey.Protect(stream, "test")
    Return Encoding.Unicode.GetString(encodedValue)
End Function

Public Shared Function Decode(text As String) As String
    If String.IsNullOrEmpty(text) Then
        Return String.Empty
    End If
    Dim stream As Byte() = Convert.FromBase64String(text)
    Dim decodedValue = MachineKey.Unprotect(stream, "test")
    Return Encoding.Unicode.GetString(decodedValue)
End Function 
```

关于如何使用 cookie 值实现新方法的任何提示？还是我应该坚持使用已弃用的编码/解码方法或 cookie 编码的一些替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:05:59.590

*Encode*方法的最后一行应为：

```
Return Convert.ToBase64String(encodedValue) 
```

这样，它可以传递给您的*Decode*方法，在该方法中，您尝试将输入解释为 Base64，然后再将其传递给*Unprotect*方法。

（仅供参考，如果您要加密的数据是基于拉丁语的文本，例如英语，您可能需要考虑使用*Encoding.UTF8*而不是*Encoding.Unicode*。这将导致加密的有效负载更小。）

# c++ - 通过霍夫曼表重建霍夫曼树

> ID：13903050
> 
> 赞同：1
> 
> 时间：2012-12-16T16:04:44.910
> 
> 标签：c++, huffman-code

我编写了一个程序来将一篇文章编码为霍夫曼代码并输出一个代码表。

```
小时：000
d:1011
电子：100
升：11
o:01
转：1010
w:001
总位数：27
编码：000100111101001011010111011

```

我想编写一个程序，将文件作为输入并对其进行解码。

但我不知道如何重建它。

我的问题是如何重建霍夫曼树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:14:32.477

如果代码是以规范方式构建的，则无需重建 Huffman 树，这会使较短的代码在数值上小于较长的代码。有许多方法可以任意将 0 和 1 分配给 Huffman 二叉树的每个分支，并且所有方法都会导致代码具有相同的最优性。从众多选项中选择一个可以在解码和传送代码方面提供优势。

霍夫曼算法所需的唯一信息是代码长度，即每个符号的位数。这样，您可以构建一个规范的霍夫曼代码，从较短的代码推进到较长的代码，并在任何给定的代码长度内按词汇顺序对符号进行排序（例如，按 H、e、w 的顺序对所有长度为 3 的代码进行排序）。在代码长度内排序的目的是减少要发送到接收器以重构代码的数据量。

然后你到达这个替代代码：

```
l:00
o:01
H:100
e:101
w:110
d:1110
r:1111 
```

现在解码可以用两个简单的表来完成，一个是按顺序排列的那些符号，即“loHewdr”，以及你升级到下一个代码长度的代码值。步骤是`0000`从一位到两位，`1000`到三位，`1110`再到四位。您为最长的代码读取了足够多的位（如果需要，在末尾附加零，但不要在后续步骤中将它们用作代码的开头）。然后，如果该值小于下一个代码长度的开始值，则将该值用作表中的索引，同时考虑代码中的当前位数。否则，将直到下一个值的值的数量添加到索引中，然后检查下一步。计算跳过的值的数量还需要跟踪当前步骤中代码中的位数。

一旦你解码了一个符号，你就知道它有多少位。从流中删除这些位并重复。

这种方法还具有对最常见的最短代码最快的优势。由此产生的解码速度非常好。（还有其他更快的表驱动方法，但它们要复杂得多。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T16:08:38.963

> 我的问题是如何重建霍夫曼树？

这将是一棵二叉树。创建一个根节点，将所有代码以 开头的字母`0`放入左子树，将 以开头的字母`1`放入右子树。冲洗并重复（递归），删除每个代码的第一个数字。一旦你用完了任何特定代码中的数字，就为相应的字母创建一个叶节点。

# java - Java 服务器猜谜游戏

> ID：13903051
> 
> 赞同：6
> 
> 时间：2012-12-16T16:04:45.933
> 
> 标签：java, repeat

我正在创建一个服务器，客户端连接以玩猜谜游戏，他们也可以通过这样做获得积分。

我目前唯一的问题是，每当我的客户正确猜到号码时，它就会跳到服务器并说“服务器为空”。我希望猜谜游戏继续进行，直到客户输入“再见” - 他/她的分数被给出。

这是我的代码，您能否指出我哪里出错了，并建议我如何实现我想要的。我认为问题出在协议中，我可能只需要将 while 放在正确的位置，所以这是第一个。谢谢各位！只是补充一下，变量的命名很奇怪我知道这以前是一个敲敲笑话服务器

协议

```
import java.util.*;

        public class KKProtocol {
    int guess = 0, number = new Random().nextInt(100) + 1;
    int score = 0;
    Scanner scan = new Scanner(System.in);

    public String processInput(String theInput) {
        String theOutput = null;

        System.out.println("Please guess the number between 1 and 100.");

        while (guess != number) {
          try {
            if ((guess = Integer.parseInt(scan.nextLine())) != number) {
              System.out.println(guess < number ? "Higher..." : "Lower...");
            }
            else {
              System.out.println("Correct!");
              score = 1;
            }
          }   
          catch (NumberFormatException e) {
            System.out.println("Please enter a valid number! If you want to Quit just say'Goodbye'");
          }   

        }   

        return theOutput;   
    }} 
```

服务器

```
import java.net.*;
import java.io.*;

public class KKServer {
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = null;
        boolean listening = true;
        try {
            serverSocket = new ServerSocket(4040);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4040.");
            System.exit(-1);
        }
        System.err.println("Started KK server listening on port 4040");
        while (listening)  
            new KKThread(serverSocket.accept()).start();
            System.out.println("Accepted connection from client");
            serverSocket.close();
        }
} 
```

线

```
import java.net.*;
import java.io.*;
import java.util.Scanner;

public class KKThread extends Thread {
    private Socket mySocket = null;

    public KKThread(Socket inSocket) {           //super("KKThread");
        mySocket = inSocket;
    }
    public void run() {

        try {
            PrintWriter out = new PrintWriter(mySocket.getOutputStream(), true);
            Scanner in = new Scanner(mySocket.getInputStream());

            String inputLine, outputLine;
            KKProtocol kkp = new KKProtocol();

            outputLine = kkp.processInput(null);        // first time only
            out.println(outputLine);        // (Should be "Knock Knock")

            while (true) {
                inputLine = in.nextLine();                  // read in client input
                outputLine = kkp.processInput(inputLine);   // get reply from protocol
                out.println(outputLine);                    // send it out to socket
                if (outputLine.equals("Bye"))
                    break;
            }
            out.close();
            in.close();
            mySocket.close();

        } catch (Exception e) {
            System.err.println("Connection reset");  //e.printStackTrace();
        }
    }
} 
```

客户

```
import java.io.*;
import java.net.*;
import java.util.Scanner;

public class KKClient {
    public static void main(String[] args) throws IOException {

        Socket kkSocket = null;
        PrintWriter out = null;
        Scanner in = null;

        try {
            kkSocket = new Socket("127.0.0.1", 4040);
            out = new PrintWriter(kkSocket.getOutputStream(), true);
            in = new Scanner(new InputStreamReader(kkSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection");
            System.exit(1);
        }
        Scanner stdIn = new Scanner(System.in);
        String fromServer = in.nextLine();
        while (true) {
            System.out.println("Server: " + fromServer);
            if (fromServer.equals("Bye."))
                break;
            out.println(stdIn.nextLine());
            fromServer = in.nextLine();
        }
        out.close();
        in.close();
        stdIn.close();
        kkSocket.close();
    }
}
' 
```

为什么它会跳转到服务器并显示“server null”？在客户输入“再见”之前，我如何继续猜测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:15:32.087

您当前没有为`score`in分配服务器响应，`KKProtocol.processInput()`因此`null`返回 a 而是导致您看到的消息：

```
Server: null 
```

你可以使用：

```
theOutput = Integer.toString(score); 
```

此外，您的`score`值是固定的，`1`因此您可能希望根据所使用的猜测次数设计一个评分系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:16:15.423

在你`processInput()`的方法中，你没有返回任何值，而是 allways `null`。看起来空值在输出时转换为字符串“null”并发送到客户端。

# javascript - 为什么 APP 在返回按钮 Titanium 上退出

> ID：13903057
> 
> 赞同：0
> 
> 时间：2012-12-16T16:05:35.080
> 
> 标签：javascript, android, button, titanium, back

**应用程序.js**

```
if (osname === 'android') {
    Window = require('ui/handheld/android/SignIn');
}
else {
    Window = require('ui/handheld/SignIn');
}

new Window().open(); 
```

**登录.js**

```
function SignIn() {
    var self = Ti.UI.createWindow();
    //Some design and sign-in validation code
    ...
    var StatusMain = require('/ui/handheld/android/StatusMain');
    new StatusMain(global_vars).open();
    return self;
} 
```

**StatusMain.js**

```
function StatusMain(global_vars) {
    var self = Ti.UI.createWindow();
        return self;
} 
```

在**StatusMain.js**上，屏幕当我单击设备的**后退按钮**时，APP 退出而不是返回 SignIn.js 屏幕

任何帮助都将不胜感激！

提前致谢，

莫辛

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T16:24:30.427

您可以在代码中处理这样的后退按钮事件

```
window.addEventListener('android:back', function(){
    // close your current window
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:29:11.177

我建议您在创建新窗口时将（Android 特定的）exitOnClose 属性设置为 false：

[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-exitOnClose](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-exitOnClose)

> exitOnClose : Boolean CREATION-ONLY
> 
> 布尔值，指示在显示窗口时按下 Android 后退按钮 > > 时应用程序是否应退出。
> 
> 您只能将其设置为 createWindow({...}) 选项。在创建窗口后设置 > 无效。

## StatusMain.js

```
function StatusMain(global_vars) {
    var self = Ti.UI.createWindow({
        exitOnClose: false
    });
        return self;
} 
```

这应该够了吧。虽然默认值为 false，但您的问题似乎与此有关。我建议尝试将此属性设置为真/假。

忠告，如果您还没有这样做，您还应该在设备上测试您的应用程序。在某些方面，我对 Android 模拟器的体验相当不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T01:24:01.187

StatusMain 是一个轻量级窗口。它不会创建新的 Android 活动，而是与登录窗口活动共享。这就是为什么您的应用程序在按下后退按钮时关闭的原因。您需要创建一个重量级窗口（指定全屏或 navBarHidden 属性）StatusMain 窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T00:05:36.693

将新窗口的 modal 属性设置为 true。

```
function StatusMain(global_vars) {
        var self = Ti.UI.createWindow({
        modal: true
    });
    return self;
} 
```

# asp.net - 网格视图行更新和删除

> ID：13903060
> 
> 赞同：0
> 
> 时间：2012-12-16T16:06:20.900
> 
> 标签：asp.net, linq

我有一个带有以下标记和以下数据源（linq 查询存储过程）的网格视图，我添加了删除和更新命令字段，但我不知道在删除和更新此网格视图工作之前我必须添加什么代码。

```
<asp:GridView ID="GridViewDocuments_Search" runat="server" AutoGenerateColumns=False Visible="False" onrowcommand="GridViewDocuments_Search_RowCommand"  
  DataKeyNames="DocID" PageSize="100"  >
    <Columns>
    <asp:TemplateField HeaderText = "Details">
           <ItemTemplate>
      <asp:Button ID ="btn_Show" Text="Details" runat= "server" CommandName= "Details" CommandArgument='<%#
        Container.DataItemIndex%>' />
        </ItemTemplate>
            </asp:TemplateField>

        <asp:HyperLinkField  DataNavigateUrlFields="Docid,Transid" 
            DataNavigateUrlFormatString="~/DocResult.aspx?Docid={0}&TransID={1}"
            DataTextField="DocumentNo" HeaderText="Doc" />
        <asp:BoundField DataField="title" HeaderText="Title" SortExpression="title" />
        <asp:BoundField DataField="transmittal" HeaderText="transmittal" SortExpression="transmittal" />
        <asp:BoundField DataField="Docid" HeaderText="Docid" Visible="false" />
        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView>

protected void btnSearch_Click(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    var query = _DataContext.spQuickSearch(txtSearchKeywords.Text);
    GridViewDocuments.Visible = false;
    GridViewDocuments_Search.Visible = true;
    GridViewDocuments_Search.DataSource = query;
    GridViewDocuments_Search.DataBind();
} 
```

存储过程 spQuickSearch 如下所示：

```
ALTER proc [dbo].[spQuickSearch]
@Searchtext varchar(50)=null

AS

 select DocId,TransId,DocumentNo,Title,TRANSMITTAL
from DocumentSum2
 where DocumentNo like '%'+@SearchText + '%'
 or Title like '%'+@SearchText + '%'
 or TRANSMITTAL like '%'+@SearchText + '%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:58:00.963

你可以处理这样的命令：

```
 protected void GridViewDocuments_Search_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        string cmdArg = e.CommandArgument.ToString();
        switch (e.CommandName)
        {
            case "Details":
                //TODO: handle your Details command...
                break;
            case "Delete":
                //TODO: handle your Delete command...
                break;
        }
    } 
```

您可以根据需要添加任意数量的命令（用于控制的 CommandName 属性）。例如，您可以添加另一个按钮并像这样设置 Delete CommandName：

```
 <asp:Button ID ="btn_Delete" Text="Delete" runat= "server" CommandName= "Delete" CommandArgument='<%#
    Container.DataItemIndex%>' /> 
```

命令完成后，您可以调用 DataBind 刷新网格：

```
GridViewDocuments_Search.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:07:41.640

检查这个例子

[http://www.vkinfotek.com/gridview/gridview-commandfield.html](http://www.vkinfotek.com/gridview/gridview-commandfield.html)

详情

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.showeditbutton.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.commandfield.showeditbutton.aspx)

# 3d - 填充多边形的更好方法是什么？

> ID：13903064
> 
> 赞同：0
> 
> 时间：2012-12-16T16:06:38.507
> 
> 标签：3d

我编写了一个简单的 3d 渲染应用程序，它从 .obj 文件加载 3d 模型。有人能告诉我用一种颜色填充每个多边形的更好方法是什么吗？我考虑过扫描每个多边形并在边界内设置像素，或者扫描整个屏幕并逐行执行相同的过程。我的对象每秒都在渲染，因为围绕 Y 轴不断旋转。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:15:13.777

如果你想用颜色填充多边形，你总是必须[处理](http://groups.csail.mit.edu/graphics/classes/6.838/S98/meetings/m23/alglist.html)多边形的可见性，所以像往常一样，[z 缓冲区](http://en.wikipedia.org/wiki/Z-buffering)与光栅化结合在一起是经过时间考验的最佳方式。

# sql - 检查超过 4000 个字符的列中的记录

> ID：13903065
> 
> 赞同：0
> 
> 时间：2012-12-16T16:06:50.683
> 
> 标签：sql, oracle11g

我创建了一个包含聚合值的列的视图（以 varchar2 数据类型存储输出）。有没有办法让我检查哪些记录超过了最大限制，例如 varchar2(4000)？由于错误“字符串缓冲区太小”，我无法创建表。我在想，如果我能知道有多少条记录超过了字符长度，那么我可能会尝试使用子字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:11:20.813

由于您正在创建视图。它将有一个带有 select 语句的定义

这样你就可以

```
select <columns>,length(column you have to check)
from <tableName>
group by <columns>
having length<column> > 4000; 
```

# python - networkx - 未知节点位置错误

> ID：13903067
> 
> 赞同：3
> 
> 时间：2012-12-16T16:07:03.757
> 
> 标签：python, graph, graphviz, networkx

我刚刚开始使用 networkx 并正在使用它来构建有根树。抱歉，如果这是一个微不足道的问题，我无法在其他地方找到解决方案。使用以下代码，我得到错误 networkx.exception.NetworkXError: Node 4 has no position。（在 draw_networkx_nodes 中）。

```
import networkx as nx 
import matplotlib.pyplot as plt
G = nx.DiGraph() 
G.add_node(1)
G.add_node(2)
G.add_node(3)
G.add_node(4)
G.add_node(5)
G.add_node(6)
G.add_edge(1,2) 
G.add_edge(1,3)
G.add_edge(2,5)
G.add_edge(2,6)
G.add_edge(3,4)
plt.title("Test") 
pos=nx.graphviz_layout(G,prog='dot') 
nx.draw(G,pos,with_labels=False,arrows=False) 
plt.savefig('nx_test.png') 
```

一旦我创建节点 4，就会发生这种情况。例如，当我有节点 1 到 4 和边 1,2 1,3 和 2,4 时，我会遇到同样的错误。代码工作正常，直到我有节点 4（有 3 个节点它工作得很好）。无论我指定边缘的顺序如何，这也会发生。

如果我直接指定边缘，我会得到同样的错误：

```
 >>> G4 = nx.DiGraph([(1, 2), (1, 3), (2, 5), (2, 6), (3, 4)])
    >>> nx.draw(G4,pos,with_labels=False,arrows=False) 

    Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
      File "/usr/local/lib/python2.7/dist-packages/networkx-1.7-py2.7.egg/networkx/drawing/nx_pylab.py", line 133, in draw
        draw_networkx(G,pos=pos,ax=ax,**kwds)
      File "/usr/local/lib/python2.7/dist-packages/networkx-1.7-py2.7.egg/networkx/drawing/nx_pylab.py", line 266, in draw_networkx
        node_collection=draw_networkx_nodes(G, pos, **kwds)
      File "/usr/local/lib/python2.7/dist-packages/networkx-1.7-py2.7.egg/networkx/drawing/nx_pylab.py", line 373, in draw_networkx_nodes
        raise nx.NetworkXError('Node %s has no position.'%e)
       networkx.exception.NetworkXError: Node 4 has no position. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:49:18.490

这是由于两件事：1）graphviz 安装不正确，从头开始重新安装清除了错误。

其次，线

```
 pos=nx.graphviz_layout(G,prog='dot') 
```

必须始终在绘制图形之前放置（并重复），以考虑新的节点/边。

# c# - WPF 扩展器问题

> ID：13903070
> 
> 赞同：0
> 
> 时间：2012-12-16T16:07:09.763
> 
> 标签：c#, wpf, wpf-controls

我在 WPF 应用程序中使用了许多扩展器。但我遇到了一些麻烦：

*   当我尝试将它们放在彼此下方时，上面的那个会自动膨胀，很难把网放在下面。所以我应该在任何地方分开上面的那个，直到我把下面的那个然后移回上面的那个再次。我可以保持扩展器未扩展，以便在其下方放置任何控件吗？
*   当我按`ctrl`+`f5`并展开其中一个时，我看到它有一个透明的背景，并与较低的背景打断 - 我怎样才能避免这种情况？
*   `ctrl`我在扩展器中使用了滚动条，但是当我按+时它不起作用`f5`。我有一个不活动的滚动条。如何在滚动条和扩展器之间建立链接，以便能够上下移动扩展器内的项目？

这是一张图片来解释我的意思。![http://www.4shared.com/photo/iIXKLbnQ/q_online.html](../Images/69a17f75ab34069c63dd597b9e6a8684.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:59:04.300

看看这个教程，它涵盖了这样的东西，扩展器有时可能是一个棘手的控制，但是一旦你理解了扩展器的布局，它就会变得更容易一些。

[http://blogs.msdn.com/b/wpfsldesigner/archive/2010/02/03/taming-the-wpf-expander-control.aspx](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/02/03/taming-the-wpf-expander-control.aspx)

# c++ - 如何在 C++ 中创建 3d 欧几里得点云和恒定距离网格

> ID：13903072
> 
> 赞同：2
> 
> 时间：2012-12-16T16:07:47.500
> 
> 标签：c++, visual-c++

任何人都可以通过使用 STL 和 c++ 流类来帮助我编程在主轴方向（x，yz）上对齐的 3d 欧几里得点云（3d 点的 3 维数组），并在 c++ 中使用恒定距离网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:06:32.700

它不只是 3d 点的一维数组吗？

您必须决定哪种数据结构最适合您的实现。

例如，您是否会更频繁地访问某些点（std::vector）或添加点（std::list）等。整个列表在这里：[http ://www.cplusplus.com/reference/stl/](http://www.cplusplus.com/reference/stl/)

但这可能很简单：

```
typedef struct {
    double x;
    double y;
    double z;
} Point3d;

std::vector<Point3d> pts(1000); 
```

然后使用迭代器设置初始值（随机？）

这里有一些迭代器的示例代码：[http ://www.cplusplus.com/reference/vector/vector/vector/](http://www.cplusplus.com/reference/vector/vector/vector/)

# haskell - 流式处理中的高效欧拉筛

> ID：13903073
> 
> 赞同：2
> 
> 时间：2012-12-16T16:07:53.440
> 
> 标签：haskell, primes, lazy-sequences, sieve

**欧拉筛比埃拉托色尼筛****具有**更好的渐近复杂度，并且可以用命令式语言简单地实现。

我想知道是否有任何方法可以用流优雅地实现它。我已经检查了[haskell wiki 关于素数](http://www.haskell.org/haskellwiki/Prime_numbers#Euler.27s_Sieve)的信息，但是这两种实现比该 wiki 中的其他筛子（甚至是试除法！）慢数百倍。

所以我尝试自己写：

```
{-sieve of Euler-}
primesEU = 2:sieve [3,5 ..] where
    sieve (p:i:xt) = p:(sieve (i:xt) `minus` (lps i)) where
        lps i = map (i*) (takeWhile' (\p->(p<i)&&(mod i p /= 0)) primesEU)

takeWhile'::(t->Bool)->[t]->[t]
takeWhile' p [] = []
takeWhile' p (x:xs) = case (p x) of
    True  -> x:takeWhile' p xs
    False -> [x]

minus::(Ord t) => [t]->[t]->[t]
minus [] _ = []
minus xs [] = xs 
minus xs@(x:xt) ys@(y:yt) 
                      |x<y  = x:(minus xt ys)
                      |x==y = minus xt yt
                      |x>y  = minus xs yt 
```

`minus`类似于`minus`in `Data.List.Ord`。

`takeWhile'`与 类似`takeWhile`，但有细微差别：`takeWhile`删除不满足谓词的第一个元素；`takeWhile'`会接受的。

`lsp i`返回 i 的有限乘积流，素数不超过 i 的最小素数。

可悲的是，我的实现运行速度**非常慢**......而且我找不到罪魁祸首。

无论如何，是否有可能以流处理方式实现高效的欧拉筛？还是该算法具有与流的本质相反的固有特性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T17:17:04.530

```
primesEU = 2:sieve [3,5 ..] where
    sieve (p:i:xt) = p:(sieve (i:xt) `minus` (lps i)) where
        lps i = map (i*) (takeWhile' (\p->(p<i)&&(mod i p /= 0)) primesEU) 
```

首先，实现是不正确的，它认为 9 素数。我怀疑你的意思是`sieve (i:xt) `minus` lps p`那里。

然后，由于筛选后的列表仅包含奇数，您可以限制为`tail primesEU`in `lps`，这会产生很小的差异。

那么这里发生了什么？

它的要点（我马上去吃晚饭，回来时会扩展）是每个素数`p`必须冒泡通过小于[不完全，一些被消除`minus`的奇数（ ）创建的所有调用前]。那是层，每层都需要一个步骤。`>= 3``p``minus``(p-3)/2`

因此，除了常数因素和复合因素之外，产生素数`<= n`成本`O(∑ p)`，其中总和超过素数不大于`n`。那就是`O(n²/log n)`。

让我们按照评估的几个步骤`sieve [3,5 .. ]`。为简洁起见，我用`s k`列表`sieve [k, k+2 ..]`和`minus`表示`(\\)`。我使用更正的定义

```
sieve (k:ks) = k : (sieve ks `minus` lps k) 
```

这不考虑 9 素数。我立即展开倍数列表，这在一定程度上减少了工作量。我们得到

```
 (:)
 / \
3  (\\)
   /  \
 s 5  [9] 
```

立即，然后可以直接消耗3。之后，`minus`右子树的顶部需要`s 5`进行足够的评估以判断它是否为空。

```
 (\\)
   /  \
 (:)  [9]
 / \
5  (\\)
   /  \
 s 7  [15,25] 
```

这是一步完成的。（然后需要判断是否`lps 3`为空，后面也一样，但是对于 a 的每个成员`lps k`，这只是一步，所以我们可以忽略它。）然后`minus`需要一个比较，将 5 冒泡到顶部，离开

```
 (:)
   / \
  5  (\\)
     /  \
  (\\)  [9]
  /  \
s 7  [15,25] 
```

现在，在消耗完 5 之后，`(:)`需要扩展顶部的右孩子

```
 (\\)
      /  \
   (\\)  [9]
   /  \
 (:)  [15,25]
 / \
7  (\\)
   /  \
 s 9  [21,35,49] 
```

将 7 移至 5 的倍数的比较

```
 (\\)
     /  \
   (:)  [9]
   / \
  7  (\\)
     /  \
  (\\)  [15,25]
  /  \
s 9  [21,35,49] 
```

还有一个将其提升到超过 3 的倍数

```
 (:)
      / \
     7  (\\)
        /  \
     (\\)  [9]
     /  \
  (\\)  [15,25]
  /  \
s 9  [21,35,49] 
```

在移动了 7 过去的两个复合列表之后，它已经可以使用了。`(:)`之后，必须进一步评估此处顶层的右子树以确定下一个素数（如果有的话）。评估必须降低`(\\)`树中的三个级别，以达到`s 9`提供下一个候选者的级别。

```
 (\\)
         /  \
      (\\)  [9]
      /  \
   (\\)  [15,25]
   /  \
 (:)  [21,35,49]
 / \
9  (\\)
   /  \
 s 11 [27] 
```

该候选人必须通过两个`minus`es 才能最终达到`minus`消除它的

```
 (\\)
        /  \
     (\\)  [9]
     /  \
   (:)  [15,25]
   / \
  9  (\\)
     /  \
  (\\)  [21,35,49]
  /  \
s 11 [27]

        (\\)
        /  \
      (:)  [9]
      / \
     9  (\\)
        /  \
     (\\)  [15,25]
     /  \
  (\\)  [21,35,49]
  /  \
s 11 [27] 
```

现在`minus`罐头第一次完成它的工作，生产

```
 (\\)
           /  \
        (\\)  []
        /  \
     (\\)  [15,25]
     /  \
  (\\)  [21,35,49]
  /  \
s 11 [27] 
```

（`xs `minus` []`顶部的 仅在第一个参数被确定为非空后才消除空列表；交换 的前两个方程`minus`会改变这一点，但所需步骤的差异会很小）。然后评估必须在树中下降四个级别以产生下一个候选者 (11)。该候选人必须被提升到四岁`minus`以上，直到它到达顶部。在此过程中，从树中删除了一个，因此下一个候选者 (13) 仅在树的下层产生`minus`四层，而不是五层(不完全是，但也不少。`(13-3)/2``p``(p-3)/2`

an 中的最后一个元素`lps k`总是能被 的最小素因数的平方整除`k`，而且它们都是奇数，所以至多有

```
1/2*(n/3² + n/5² + n/7² + n/11² + ...) ~ n/10 
```

到达时可以消除的列表`n`（少了一些，因为它计算了所有具有平方素数除数的数字，以及那些数次以上的数）。

所以问题是每个素数都是在树的深处产生的，至少`p*0.4`从顶部开始。这意味着提升`p`到顶部以使其可消耗至少需要几个`p*0.4`步骤，给出基本上是二次的整体复杂性，不计算生成倍数列表所需的工作。

然而，实际行为一开始更糟，当计算 100000 和 200000 之间的区域中的素数时，它接近二次行为 - 应该成为极限的二次模对数因子，但我认为我没有耐心等待一两万。

> 无论如何，是否有可能以流处理方式实现高效的欧拉筛？还是该算法具有与流的本质相反的固有特性？

我无法证明这是不可能的，但我知道没有办法有效地实施它。既不是产生一个素数流，也不是产生一个给定限制的素数列表。

使 Eratosthenes 筛法有效的原因在于，它很容易到达一个素数的下一个倍数（只需在索引中添加`p`或`2*p`左右），而无需关心它是否已经作为较小素数的倍数被划掉。避免多次划线所需的工作远比多次划线的工作要多。

# php - 使用 AND OR 的 CakePHP 查询

> ID：13903074
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:07:54.197
> 
> 标签：php, cakephp

我有以下应该找到的查询：

*   user_id 与 userId 匹配且friend_id 与friendId 匹配的行
*   或 user_id 与friendId 匹配且friend_id 与userId 匹配的行
*   并且两者的状态也都为 1

我的代码是：

```
public function isFriend($userId, $friendId)
{
    return $search = $this->Friend->find('first', array(
            'conditions'=>array(
                'OR' => array(
                    'AND'=>array(
                        'Friend.user_id'=>$userId,
                        'Friend.friend_id'=>$friendId
                    ),
                    'AND'=>array(
                        'Friend.user_id'=>$friendId,
                        'Friend.friend_id'=>$userId
                    )
                ),
                'AND' => array(
                    'Friend.status'=>1
                )
            )
        )
    );
} 
```

但是它不起作用......我环顾四周，似乎与在处理两个 AND 调用时正确获取数组有关，但我不明白。谁能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:29:23.760

您不能像标记所说的那样使用相同的数组键两次，因此您必须将 AND 封装在单独的数组中

```
'OR' => 
array(
    array('AND'=>array(
            'Friend.user_id'=>$userId,
            'Friend.friend_id'=>$friendId
        )
    ),
    array('AND'=>array(
            'Friend.user_id'=>$friendId,
            'Friend.friend_id'=>$userId
        )
    )
),
'AND' => array(
    'Friend.status'=>1
) 
```

# c# - 在没有 WSFederationAuthenticationModule 的情况下解析“wresult”值

> ID：13903080
> 
> 赞同：0
> 
> 时间：2012-12-16T16:08:13.867
> 
> 标签：c#, wif, ws-federation, azure-acs

从 Azure ACS 返回时，我在 FormCollection 中检索联合身份验证结果。包含我需要的信息的值位于一个名为“wresult”的加密值中。我在解密此值以将其用于进一步身份验证时遇到问题。

我不想使用 WSFederationAuthenticationModule 因为我没有授权设置 cookie。使用该模块时，它会自动将 auth-cookies 设置为 Federated-Authenticationtype。

相反，我想检索 wresult 中包含的声明，然后设置我自己的安全令牌（无论是 JWT、SAML 2.0 还是其他）。

到目前为止，我发现的唯一可能的解决方法是使用 FAModule，然后立即删除会话令牌 cookie。但这将导致 auth-cookie 在响应中设置两次，并立即取消设置该值。

我最终想要实现的是：提供使用表单站点进行身份验证或使用 Azure ACS 中的任何身份提供程序进行身份验证的可能性。使用表单身份验证，我可以立即比较用户名和密码，并将安全令牌设置为我希望它拥有的任何声明。但是在使用 Azure ACS 时，我想先将检索名称标识符与数据库中保存的值进行比较，然后设置我的自定义安全令牌，而不是 WS 联合安全令牌。或者，如果 nameidentifier 未知，我想重定向到表单页面，用户可以使用他的凭据验证这个 nameidentifier。我不希望将 azure ACS 返回的值计算为经过身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:28:52.007

您不必注册 FAM - 但您仍然可以使用它的辅助方法（例如 GetSignInResponseMessage()）来解析来自 ACS 的登录响应消息。

这使您无需使用 WIF cookie 系统即可访问协议详细信息和返回的安全令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:27:30.210

与其修改 WSFederatedAuthenticationModule 对 cookie 的默认处理，我建议使用另一种设置：

1.  创建并托管您自己的基于身份验证身份提供者 STS 的表单。有一些[不错的选项](http://startersts.codeplex.com/)可以帮助进行设置。
2.  在 ACS 中配置您的新 IP STS
3.  使用默认的 ACS 登录页面（主页领域发现页面）或[自定义您自己的](http://msdn.microsoft.com/en-us/library/gg185926.aspx).

现在，您的用户将被要求选择他们想要使用哪个身份提供者进行身份验证。如果他们选择您的，在输入用户名/密码后，您的 IP 将向 ACS 发送一个名称标识符，然后 ACS 将其发送到您的依赖方网站。如果您将 google 添加为身份提供者，情况也是如此。好处是您的 RP 不需要根据用户登录的 IP 采取不同的行为，但如果您想根据 IP 自定义某些行为，则该信息可在 ACS 颁发的令牌中获得。

此外，如果您想使用 JWT 令牌而不是 SAML，您可以将 ACS 配置为从 ACS 门户中的依赖方页面发布它们（尽管这被标记为 beta 功能）。

# php - 将使用 imageCreat() php 制作的图表插入 HTML 单元格

> ID：13903083
> 
> 赞同：0
> 
> 时间：2012-12-16T16:08:36.880
> 
> 标签：php, html, image, charts

我的代码用于生成图像数组有点复杂，但总体思路是创建 8 个饼图，然后需要将其显示在表格的一列图表中。在我的 html 中获取图像我做错了什么。此函数与 html.xml 位于同一文件中。

构建图像

```
$FileHandle = fopen($FileName, 'r') or die("can't open file!!");

//Getting total for each question
$i = 0;
$start = 0;
$finish = 0;

while (($row = fgetcsv($FileHandle, 1024, ",")) !== FALSE) {
    $total[] = $row[0] + $row[1] + $row[2] + $row[3] + $row[4];
    $average[] = round(((1 * $row[0] + 2 * $row[1] + 3 * $row[2] + 4 * $row[3] + 5 * $row[4]) / $total[$i]), 2, PHP_ROUND_HALF_UP);

    $start = 0;
    $finish = 0;

    $myImage[$i] = ImageCreate(200, 200);

    $white = ImageColorAllocate($myImage[$i], 255, 255, 255);
    $red = ImageColorAllocate($myImage[$i], 255, 0, 0);
    $orange = ImageColorAllocate($myImage[$i], 191, 64, 0);
    $olive = ImageColorAllocate($myImage[$i], 128, 128, 0);
    $green = ImageColorAllocate($myImage[$i], 64, 191, 0);
    $lt_green = ImageColorAllocate($myImage[$i], 0, 255, 0);

    $finish = ($row[0] / $total[$i]) * 360;
    //echo $start . ' ' . $finish . '<br>';
    if ($finish != $start) {
    ImageFilledArc($myImage[$i], 100, 100, 50, 50, $start, $finish, $red, IMG_ARC_PIE);
    $start = $finish;
    $finish += ($row[1] / $total[$i]) * 360;
    }
else{
    $start = $finish;
        $finish += ($row[1] / $total[$i]) * 360;
}
    if ($finish != $start) {
        ImageFilledArc($myImage[$i], 100, 100, 50, 50, $start, $finish, $orange, IMG_ARC_PIE);
        $start = $finish;
        $finish += ($row[2] / $total[$i]) * 360;
    }
    else{
        $start = $finish;
        $finish += ($row[2] / $total[$i]) * 360;
    }
    if ($finish != $start) {
        ImageFilledArc($myImage[$i], 100, 100, 50, 50, $start, $finish, $olive, IMG_ARC_PIE);
        $start = $finish;
        $finish += ($row[3] / $total[$i]) * 360;
    }
    else{
        $start = $finish;
        $finish += ($row[3] / $total[$i]) * 360;
    }
    if ($finish != $start) {
        ImageFilledArc($myImage[$i], 100, 100, 50, 50, $start, $finish, $green, IMG_ARC_PIE);
        $start = $finish;
        $finish += ($row[4] / $total[$i]) * 360;
    }
    else{
        $start = $finish;
        $finish += ($row[4] / $total[$i]) * 360;
    }
    if ($finish != $start) {
        ImageFilledArc($myImage[$i], 100, 100, 50, 50, $start, $finish, $lt_green, IMG_ARC_PIE);
    }
    $i++;
} 
```

这是我在 html 块中尝试的内容

```
<td><?php echo $average[0] ?></td>
<td><?php imagepng($myImage[0]); ?></td>
<td><?php echo $total[0] ?></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:03:08.403

必须使用单独的文件来生成图像并调用它

```
<img src = "chart.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:19:38.790

实际上，您的 imagepng() 函数需要有一个 header() 来告诉浏览器您的脚本正在发送 PNG 文件。如果将 PNG 文件与 echo 语句混合到浏览器输出流中，则效果不佳。完成此操作后，我只需将 PNG 文件写入服务器上的目录并发送带有 PNG 文件 URL 的标准 HTML 标记。这可能是将饼图提供给客户的最简单方法。

最好的问候，~雷

# php - 在 PHP 中手动调用复选框的 onClick

> ID：13903088
> 
> 赞同：1
> 
> 时间：2012-12-16T16:09:11.907
> 
> 标签：php, checkbox, onclick

我想手动调用复选框的 onClick 方法，因为我根据特定条件将复选框显示为“已选中”。

下面是我的代码

```
if(in_array($rs['item_number'],$it_arr))
    echo "<td><span class='data'>-</span><input type=checkbox onclick=\"AddItemRow(this)\" checked/></td>";
else
    echo "<td><span class='data'>-</span><input type=checkbox onclick=\"AddItemRow(this)\" /></td>"; 
```

在上面的代码中，我想调用 AddItemRow(this) 方法，并且还想传递该方法接受的变量 this 。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:51:51.167

```
Here we can use jquery which ill check for checked case and will trigger a click function
 <script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$(function(){

    if($('input[type=checkbox]:checked').val()){

        var obj = $('input[type=checkbox]');
        AddItemRow(obj);            
    }

});

function AddItemRow(obj){
    console.log(obj);
    obj.attr('checked', true);
}
</script>

if(in_array($rs['item_number'],$it_arr))
    echo "<td><span class='data'>-</span><input type=checkbox onclick=\"AddItemRow(this)\" checked/></td>";
else
    echo "<td><span class='data'>-</span><input type=checkbox onclick=\"AddItemRow(this)\" /></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:56:09.190

您不能`onClick`使用 PHP 调用事件。您需要使用 JS 来执行此操作，您需要检查复选框是否`checked`打开`document ready`。

这是一个例子：

[**JS 小提琴演示**](http://jsfiddle.net/jgs9K/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:34:36.867

有一个完整的实践说拥有内联函数/样式是个坏主意。考虑

**JS**

```
var myvar=15;

    document.getElementById('input_id').onclick=function(){AddItemRow(myvar);}; 
```

**HTML**

```
<input id="input_id" type="checkbox"  /> 
```

*   你错过了`checkbox`输入中的引号，就像你可以传递你的变量一样`myvar`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T16:12:53.870

你可以这样做：

```
echo "<script type='text/javascript'>AddItemRow('".$var."')</script>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T16:15:38.860

我不是 100% 确定我理解这个问题，但我认为它对客户端-服务器系统的性质存在一些潜在的混淆。您的 PHP 脚本在服务器上运行，它创建发送到客户端计算机的 HTML、CSS 和 JavaScript。JavaScript 在客户端机器上运行，但直到服务器上的 PHP 完成其任务并断开连接后才会运行。也就是说，JavaScript 中的 onClick() 函数不能由 PHP 触发，只能由客户端（人）或客户端中的某些动作（JavaScript）触发。

# c - 奇怪的 C 行为：变量在不应该出现时可见

> ID：13903090
> 
> 赞同：1
> 
> 时间：2012-12-16T16:09:27.493
> 
> 标签：c, static, visibility

在我的程序中，我有一个名为的文件`constants.h`，它在全局范围内声明了以下矩阵（矩阵应该是完全恒定的 - 如果有人发现潜在问题，请告诉我）：

```
static unsigned char const MY_MATRIX[66][9] = {...}; 
```

在另一个文件中，我们称之为它`main.c`，我实际上可以引用这个常量：

```
doSomething(var1, count, MY_MATRIX[42], TRUE, FALSE, thing); 
```

但是后来我只是阅读了关键字的定义，`static`这*应该*意味着*无法*在定义它的文件之外访问该变量。（在这种情况下，所需的行为是应该访问它，但似乎`extern`关键字是使用的那个！）

那么，谁能告诉我为什么会这样？为什么变量不可见？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:12:45.650

这是因为您`static`在标头中声明了一个变量：当您在 C 文件中包含标头时，您将获得一个独立于其他定义的全新定义。如果将标题包含在两个文件中，则会得到两个独立的副本；如果你将它包含在三个 C 文件中，你会得到三个独立的副本，依此类推。副本不会相互冲突，因为`static`定义对链接器隐藏了它们。

使用在静态内存中分配的共享数据的一种正确方法是`extern`在标头中进行声明，然后在一个 C 文件中添加一个非静态定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:12:30.607

如果它在标头中，它会在您包含它的每个源文件中定义（尽管每个源文件都有自己的实例化 - 它们不会访问同一个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T16:17:15.703

static 关键字有两种用途：

*   功能块内的静态变量在后续调用之间保持其值。
*   静态全局变量或函数仅在声明它的文件中“可见”。

在这里，您在头文件中定义矩阵，因此包含该头文件的所有 .c 文件都可以看到它。要限制其可见性，请改为在 .c 文件中定义它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T16:31:51.047

通常，当在头文件中声明静态变量时，其范围不限于 .h 文件，这与**头文件范围**完全不同。翻译单元将头文件中的文本包含在源文件中。因此，包括头文件在内的每个翻译单元都有自己的**单独**变量，尽管它是静态范围。

# hover - Kinetic JS，触摸/悬停这个，影响所有其他对象

> ID：13903093
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:10:05.097
> 
> 标签：hover, touch, kineticjs, selected, touchstart

因此，我将尽我所能解释这一点：我有一个画布，上面有一堆要触摸的对象，它们具有突出显示的状态（如您在此处看到的那样交换背景图像）。我在这里只展示对象“应用程序”和“企业”的 2 个示例，但这些对象有很多。我的目标是让一个对象有它的悬停图像，而其余的则没有。单击另一个对象后，我希望激活该对象的悬停图像，并删除所有其他对象的悬停图像（基本上摆脱了“触摸鼠标移出”功能。

我想说的是：'如果 touchstart/mouseover 这个对象，使用它的悬停图像，并禁用所有其他对象上的所有悬停图像。

```
applications.on('touchstart mouseover', function() {
                        writeMessage(messageLayer, 'touchstart applications circle');
                        this.setFill({ image: images.applicationshover});
                        layer.draw();
                    });
applications.on('touchend mouseout', function() {
                        writeMessage(messageLayer, 'Mouseup applications circle');
                        this.setFill({ image: images.applicationsimage});
                        layer.draw();
                    });

enterprises.on('touchstart mouseover', function() {
                        writeMessage(messageLayer, 'touchstart enterprises circle');
                        this.setFill({ image: images.enterpriseshover});
                        layer.draw();
                    });
enterprises.on('touchend mouseout', function() {
                        writeMessage(messageLayer, 'Mouseup enterprises circle');
                        this.setFill({ image: images.enterprisesimage});
                        layer.draw();
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:21:02.350

我讨厌在没有调整示例的情况下回答我知之甚少的问题，但是这里......

而不是你所做的，为什么不试试这个......
当你创建你的形状/图像时，为它们添加一个属性，即用于悬停而不是悬停状态的图像。
有点像这样......

```
 var thing = new Kinetic.Image({
            x: 0,
            y: 0,
            image: imageObj,
            hoverImage: hoverImageObj,
            notHoverImage: imageObj,
            name: 'image'
        }); 
```

然后，您可以为所有图像设置一个例程...

```
var hover = function() {
        writeMessage(messageLayer, 'touchstart enterprises circle');
        this.setFill({
            image: this.attrs.hoverImage
        });
        layer.draw();
    }

var notHover = function() {
        writeMessage(messageLayer, 'Mouseup enterprises circle');
        this.setFill({
            image: this.attrs.notHoverImage
        });
        layer.draw();
    }

icons.on('touchstart mouseover', hover);
icons.on('touchend mouseout', notHover); 
```

可能有更好的方法来做到这一点，我真的必须去阅读文档；）

# c++ - 如何在数组中找到两个缺失值？

> ID：13903097
> 
> 赞同：4
> 
> 时间：2012-12-16T16:10:26.453
> 
> 标签：c++, arrays, algorithm

> **可能重复：**
> [简单的​​面试问题变得更难：给定数字 1..100，找到缺失的数字](https://stackoverflow.com/questions/3492302/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-numbe)

一个求职面试题。假设我们有一个大小为 N-2 的数组，所有值都从 1 到 N，除了两个缺失值。(N>0)

需要一种用于查找两个缺失数字的算法，该算法仅遍历数组一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T16:10:26.453

```
// Receiving array with values from 1 to N (NOT 0 to N-1)
// N is max value & # of values, NOT size of arr (arr is in size N-2)
void Find2Numbers(unsigned arr[], size_t N, unsigned & n1, unsigned & n2)
{
    unsigned sum = N*(N+1)/2;  // sum of elements
    double pro = 1;  // Products will be calculated within the loop, because fact(N) can be very large

    for(size_t i = 0 ; i < N-2 ; i++)
    {
        pro *= (i+1);  // mult by i+1 to get factorial
        pro /= arr[i];  // divide by arr[i] to find n1*n2
        sum -= arr[i];
    }
    pro *= (N-1)*N;  // 2 missing indexes, as arr is missing 2 elements
    // sum = n1+n2
    // pro = n1*n2  =>
    n1 = (sum+sqrt(sum*sum-4*pro))/2;
    n2 = (sum-sqrt(sum*sum-4*pro))/2;
} 
```

# objective-c - Objective-C 中的 NSString 比较问题

> ID：13903101
> 
> 赞同：0
> 
> 时间：2012-12-16T16:10:49.563
> 
> 标签：objective-c, nsstring

这是代码：

```
NSString *decryptResponseString = [AESCrypt decrypt128:responseString key:@"a16byteslongkey!"];        
NSString *lisence = [NSString createLisence:self.serial withSalt:sha_salt];
NSLog(@"lisence: %@", lisence);
NSLog(@"decrypt: %@", decryptResponseString);
int a = [lisence isEqualToString:decryptResponseString]?1:0;
NSLog(@"%i", a); 
```

这是日志：

> 2012-12-16 15:52:30.249 TextLabelButton[1430:11303] lisence: 3b27cde24235d08a5de5904a4
> 2012-12-16 15:52:30.250 TextLabelButton[1430:11303] decrypt: 3b27cde24235d08a5de5904a4
> 2012-12-16 15:52:30.250 TextLabelButton[ 1430:11303] 0

我不知道为什么当我使用`[lisence isEqualToString:decryptResponseString]`or时结果总是“0” `(lisence == decryptResponseString)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:25:13.423

我会检查字符串长度是否相同。

如果不是，如果两端都有空格，那么这取决于您的字符串生成函数。

如果你想摆脱前导和尾随字符串，请使用 NSString 的方法，例如

```
NSString *trimmedString = [strimToTrim stringByTrimmingCharactersInSet:[NSCharacterSet whiteSpaceCharacterSet]]; 
```

你可以在[这里阅读它的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/whitespaceCharacterSet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:19:57.360

摆脱空格的解决方法：

```
id trimmedDecrypt = [decrypt stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
BOOL r = [license isEqualToString:trimmedDecrypt]; 
```

# google-drive-api - 将文件上传到 Google Drive 中的指定文件夹

> ID：13903106
> 
> 赞同：4
> 
> 时间：2012-12-16T16:11:38.937
> 
> 标签：google-drive-api

我在将文件上传到谷歌驱动器中的现有文件夹时遇到问题。它一直告诉我“xxx”不存在。

```
String folderId = "Storage";

ChildReference newChild = new ChildReference();
newChild.setId(fileContent.getName());

drive.children().insert(folderId, newChild).execute(); 
```

参考[https://developers.google.com/drive/v2/reference/children/insert](https://developers.google.com/drive/v2/reference/children/insert)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T01:39:23.647

是的，最后我可以将我的整个文件目录上传到谷歌驱动器中的特定文件夹，因为文件夹ID不匹配。

我通过使用 setParents 函数成功地跟踪了代码。

```
String folderId = "0BwI6rRcqw8ZURlpleEVsRUhod0U";

File fileContent = new java.io.File(Environment.getExternalStorageDirectory() + "/DCIM/Camera/" + Files[count].getName());

FileContent mediaContent = new FileContent("image/jpeg", fileContent);

com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();

body.setTitle(fileContent.getName());
body.setMimeType("image/jpeg");

body.setParents(Arrays.asList(new ParentReference().setId(folderId)));

com.google.api.services.drive.model.File file = drive.files().insert(body, mediaContent).execute(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-22T20:44:07.430

[![来自浏览器的文件夹 ID](../Images/569c35a7ac4f20c2079cbaa359130e61.png)](https://i.stack.imgur.com/YFZPb.png)

文件夹 ID 显示在 URL 中，当您在浏览器的 Google Drive 中访问它时

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T18:21:33.387

folderId 是 Folder 对象的唯一标识符，而不是像“Storage”这样的好名字。[您可以使用files().list() API 调用](https://developers.google.com/drive/v2/reference/files/list)检索文件夹的 ID ，可能使用 aq 属性来根据需要过滤返回的结果。

# php - AJAX 表单提交错误

> ID：13903111
> 
> 赞同：1
> 
> 时间：2012-12-16T16:12:15.137
> 
> 标签：php, javascript, jquery, mysql, ajax

我有一个表格，我想在提交时进行验证。

我有以下 javascript ...

```
var data = $('.sighting').serialize();
$.ajax({ url: "submit-process.php",
         data: data,
         type: "POST",
         success: function(data){
             $(".result").text('Thank you for your assistance.');
         },
         error: function(data) {
             $(".result").text(data);
         }
}); 
```

我有以下PHP

```
<?php   
    if('date-seen' == '') { 
        echo 'fail' 
    } else {    
        foreach ($_POST as $key => $value)
            $message .= "Field ".htmlentities($key)." is ".htmlentities($value)."\r\n";

        mail('liam@site.co.uk', 'sghting', $message);    
    }   
?> 
```

如果'date-seen'输入留空，我会收到[Object，object]而不是'fail'，只有当我填写此字段并尝试重新发送它不提交时，我猜这是我的PHP中的错误？

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:14:17.947

`'date-seen' == ''`测试两个字符串文字是否彼此相等（并且它们不相等）。

你可能想要`$_POST['date-seen']`

您可能还想进行测试：

```
if ( !empty($_POST['date-seen']) ) { 
```

...而不是将不存在的变量与空字符串进行比较。

# ios - UIDocument loadFromContents 失败并出现 EXC_BAD_ACCESS

> ID：13903119
> 
> 赞同：3
> 
> 时间：2012-12-16T16:13:24.227
> 
> 标签：ios, icloud, uidocument

我有一个使用 iCloud 文档存储的非常简单的 IOS 应用程序。一切正常，然后在某个时候，我开始在我的文档加载方法中遇到至少一个 iCloud 文档的 EXC_BAD_ACCESS 错误，尽管大多数文件加载得很好。

```
- (BOOL)loadFromContents:(id)contents ofType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {

    file = (NSFileWrapper*) contents;

    NSFileWrapper *infoFile = [[file fileWrappers] objectForKey:InfoFile];
    NSData *infoData = [infoFile regularFileContents];

    if(nil != infoData) {

        NSPropertyListFormat format = NSPropertyListBinaryFormat_v1_0;
        NSError *propertyListError;

        // EXC_BAD_ACCESS occurs here
        NSDictionary *dictionary = [NSPropertyListSerialization propertyListWithData:infoData options:NSPropertyListImmutable format:&format error:&propertyListError];

        if(nil == propertyListError) {

            _name = [dictionary objectForKey:@"name"];
            _date = [dictionary objectForKey:@"date"];
            _index = [dictionary objectForKey:@"index"];
            _paperSize = [GritzPaperSizeEnum enumWithType:[dictionary objectForKey:@"paperSize"]];

            TFLog(@"loading doc %@", _name);

            _pages = [[NSMutableArray alloc] init];

            for (NSString *key in file.fileWrappers) {

                NSFileWrapper *subDir = [[file fileWrappers] objectForKey:key];

                if(subDir.isDirectory) {
                    GritzPage *page = [[GritzPage alloc] initFromFile:subDir];
                    [_pages addObject:page];
                }
            }

            _currentPage = [_pages objectAtIndex:0];

            return YES;
        }
    }

    return NO;
} 
```

![在此处输入图像描述](../Images/09571ac6556cd12b7b5cfdeb264c04e9.png)

我希望我可以“捕获”并处理不良数据并忽略损坏的文件；但我似乎无法弄清楚如何。EXC_BAD_ACCESS 错误会导致应用程序崩溃。

我应该做些什么来提前确定数据或文件将失败并跳过它（或删除它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:22:53.983

使用 isKindOfClass 验证它是一个 NSFileWrapper，否则将其视为一个很奇怪（另请查看给定的 typeName :)）

* * *

使用 @try { .. } @catch 构造来捕获任何异常在这种情况下都不起作用，尽管你会导致 BAD_ACCESS 这是一个 UNIX 信号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:28:51.810

NSPropertyListFormat 变量*格式*应声明为点。而且我认为您应该调用 propertyListWithData: 方法，格式为指针，而不是*格式*的地址。

# android - Android：onClick 不幸停止了

> ID：13903120
> 
> 赞同：1
> 
> 时间：2012-12-16T16:13:32.080
> 
> 标签：android

我想在 android 上编写一个简单的图像编辑器。但有一个问题。当我在模拟器上运行它时，一切都是正确的，直到按下按钮。“不幸的是，......停止......”出现在屏幕上，程序被迫关闭。但我真的知道哪里错了。请帮我弄清楚。非常感谢。

这是我的程序代码。

```
btn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            draw(drawAction.effect_gray);
            }
        });

    btn2.setOnClickListener(new OnClickListener() {  
         public void onClick(View arg0) {
             draw(drawAction.effect_negative);
            }
        });
    }

@Override
protected void onResume() {
    super.onResume();

}

enum drawAction {
    effect_gray, effect_negative;
}

void draw(drawAction action) {
    Canvas canvas = null;

    switch (action) {
    case effect_gray:
         gray(canvas);
        break;
    case effect_negative:
        negative(canvas);
         break;
}
        }
void gray(Canvas canvas) {
    Bitmap vBitmap2 = BitmapFactory.decodeResource( this.getResources()
            , R.drawable.images);

    Paint paint = new Paint();
    ColorMatrix colorMatrix = new ColorMatrix();
    colorMatrix.setSaturation(0);
    ColorMatrixColorFilter colorMatrixFilter = new ColorMatrixColorFilter(colorMatrix);
    paint.setColorFilter(colorMatrixFilter);
    canvas.drawBitmap(vBitmap2, 0, 0, paint);

 img1.setImageBitmap(vBitmap2);
}

    void negative(Canvas canvas) {
     Bitmap vBitmap2 = BitmapFactory.decodeResource( this.getResources()
                , R.drawable.images);
  Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);    
  ColorMatrix cm = new ColorMatrix(new float[] {  
    -1f,  0f,  0f, 0f, 255f,  
     0f, -1f,  0f, 0f, 255f,  
     0f,  0f, -1f, 0f, 255f,  
     0f,  0f,  0f, 1f,   0f});  
  paint.setColorFilter(new ColorMatrixColorFilter(cm));  
  canvas.drawBitmap(vBitmap2, 0, 0, paint);  

  img1.setImageBitmap(vBitmap2);
}
}

12-16 16:32:11.741: E/AndroidRuntime(597): FATAL EXCEPTION: main
12-16 16:32:11.741: E/AndroidRuntime(597): java.lang.NullPointerException
12-16 16:32:11.741: E/AndroidRuntime(597):  at com.example.a.Aa.gray(Aa.java:81)
12-16 16:32:11.741: E/AndroidRuntime(597):  at com.example.a.Aa.draw(Aa.java:64)
12-16 16:32:11.741: E/AndroidRuntime(597):  at com.example.a.Aa$1.onClick(Aa.java:37)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.view.View.performClick(View.java:3480)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.view.View$PerformClick.run(View.java:13983)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.os.Handler.handleCallback(Handler.java:605)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.os.Looper.loop(Looper.java:137)
12-16 16:32:11.741: E/AndroidRuntime(597):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-16 16:32:11.741: E/AndroidRuntime(597):  at java.lang.reflect.Method.invokeNative(Native Method)
12-16 16:32:11.741: E/AndroidRuntime(597):  at java.lang.reflect.Method.invoke(Method.java:511)
12-16 16:32:11.741: E/AndroidRuntime(597):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-16 16:32:11.741: E/AndroidRuntime(597):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-16 16:32:11.741: E/AndroidRuntime(597):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:19:00.893

我认为这里有问题

```
Canvas canvas = null;
switch (action) {
case effect_gray:
     gray(canvas);
    break;
case effect_negative:
    negative(canvas);
     break;
} 
```

最初 canvas 为 null 并且您将 canvas 作为 null 它可能会给出空指针异常。有关更多信息，请分享堆栈跟踪..

改写成这样

```
void draw(drawAction action, Canvas canvas) 
{
   if(canvas != null)
   { 
       switch (action) {
          case effect_gray:
          gray(canvas);
          break;
       case effect_negative:
          negative(canvas);
          break;
    }
} 
```

并像这样调用这个方法：

```
draw(drawAction.effect_gray,canvas); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:25:20.933

将方法中的Canvas实例`draw`作为参数传入

```
void draw(drawAction action, Canvas canvas) {

    if(canvas != null)
    {
        switch (action) {
            case effect_gray:
                gray(canvas);
                break;
            case effect_negative:
                negative(canvas);
                break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:33:29.940

你不需要一个`enum`.

使用类成员来保存 Canvas 实例，然后根据需要调用`gray`和方法。`negative`

```
private Canvas mCanvas;

onCreate(Bundle bundle)
{
    btn1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            gray(mCanvas);
        }
    });

    btn2.setOnClickListener(new OnClickListener() {  
        public void onClick(View arg0) {
             negative(mCanvas);
        }
    });
}

...

void gray(Canvas canvas) {
    ...
}

void negative(Canvas canvas) {
       ...
} 
```

# c# - 我如何获得这个条件包含投影来实例化 ref_calendar_premis 实体对象的“premis”实体对象属性？

> ID：13903125
> 
> 赞同：1
> 
> 时间：2012-12-16T16:14:23.207
> 
> 标签：c#, entity-framework, entity-framework-5

我正在研究我的第一个 EntityFramework 解决方案，但我很困惑。

当我遍历生成的“日历”实体对象时，该属性`calendar.ref_calendar_premisis.premisis`未实例化（`null`）。我明白为什么，我停用了延迟加载，因为我想控制语法树投影中的条件“包含”，如下所示：

```
 private List<CalendarBlockDTO> FillUserCalendar(DateTime start, DateTime end, int uid, bool everything)
    {
        var result = new List<CalendarBlockDTO>();

        using (var db = new ViggoEntities())
        {
            //We need to disable lazyloading to use the "expression tree" syntax
            db.Configuration.LazyLoadingEnabled = false;

            //flip our "everything" so we can compare it to our "special" column
            int specialScope = Convert.ToInt32(!everything);

            //Build a query "Projection" with "expression tree" syntax
            var query = from c in db.calendars
                        select new
                            {
                                calendarEntry = c,

                                createdByUser = c.MadeByUser,

                                premisesBookings = c.ref_calendar_premises.Where
                                (
                                    rcp => rcp.deleted == 0 &&
                                     (
                                            //started before the start-parameter AND ended after start-parameter
                                        (rcp.timestart < start && rcp.timeend > start) ||
                                            //OR startet before the end-parameter AND ended after the end-parameter
                                        (rcp.timestart < end && rcp.timeend > end) ||
                                            //OR startet before the start-parameter AND ended after the end-paremeter
                                        (rcp.timestart < start && rcp.timeend > end) ||
                                            //OR startet after the start-parameter AND ended before the end-parameter
                                        (rcp.timestart > start && rcp.timeend < end)
                                    )
                                ),

                                attendingGroups = c.ref_groups_calendar.Where
                                (
                                    rug => rug.deleted == 0
                                ),

                                groups = c.ref_groups_calendar.Select( rgc => rgc.usergroup ),

                                ////Assignments not implemented yet
                                ////assignments = c.

                                schedules = c.ref_calendar_schedule.Where
                                (
                                    sch => sch.deleted == 0
                                )
                            };

            var calEntries =
                query.ToArray().Select(c => c.calendarEntry).
                Where(
                        //If only special requested, show only special
                        c => c.special >= specialScope &&
                        //If not "MadeInInfo", show for creator as well
                        (c.madeininfo==0 && c.made_by == uid) || 
                        //Else, show to involved users
                        (c.ref_groups_calendar.Any(rgc => rgc.usergroup.ref_users_groups.Any(rug => rug.userid == uid)))
                        );

            foreach (var calendar in calEntries)
            {
                //I WANT THIS TO NOT THROW AN EXCEPTION, PREMIS SHOULD NOT BE NULL
                if (calendar.name == "Dinner with Allan" && calendar.ref_calendar_premises.Any(rcp => rcp.premis == null))
                    throw new Exception("Premis not instantiated!");

                result.AddRange(CalendarToCalendarBlockDTOs(calendar));
            }
        }

        return result;
    } 
```

我尝试添加类似：

```
...
room = c.ref_calendar_premises.Select(r => r.premis),
... 
```

......但无济于事。在我们的测试数据中，已经为“与艾伦共进晚餐”活动预订了一个房间，但我似乎无法让它加载 premis-entyties。

我以前没有使用 EntityFramework、LINQ to SQL 或任何其他 ORM 的经验，所以我可能遗漏了一些显而易见的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:45:57.450

我扭动了我们负责数据库的手臂，结果发现所有行的 premisisid 都是空的，因为转换错误（我正在查看 testdata 文档，而不是实际数据）。所以感谢您的投入和您的时间，我会展示自己 0_0

# html - 如何将 HTML 表格转换为图像？

> ID：13903130
> 
> 赞同：1
> 
> 时间：2012-12-16T16:15:36.300
> 
> 标签：html, css, image, perl, converter

我想将 HTML 表格转换为 PNG 或 GIF 图像。我在 Linux 操作系统下使用 Perl。

我使用 TinyMCE 编辑器。用户可以编辑 HTML 表格（使用 CSS 类和其他 CSS 格式化程序），我想将此表格保存为图像。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:14:15.440

您可以使用一些命令行工具来完成此操作。

```
$: html2ps table.html > table.ps
$: ps2pdf table.ps 
$: convert table.pdf table.png 
```

在我的 Ubuntu 系统上，我安装了这些：

```
apt-get install html2ps
apt-get install ps2pdf
apt-get install imagemagick 
```

转换不太可能与您在网络浏览器中看到的相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:51:07.393

你可以使用 ImageMagick/PerlMagick 和 Webkit 吗？

[https://metacpan.org/module/PDF::WebKit](https://metacpan.org/module/PDF::WebKit)

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

[https://metacpan.org/module/Image::Magick](https://metacpan.org/module/Image::Magick)

[http://www.imagemagick.org/script/perl-magick.php](http://www.imagemagick.org/script/perl-magick.php)

```
use PDF::WebKit;
use Image::Magick;

# PDF::WebKit->new takes the HTML and any options for wkhtmltopdf
# run `wkhtmltopdf --extended-help` for a full list of options
my $kit = PDF::WebKit->new( \$html, page_size => 'Letter' );
push @{ $kit->stylesheets }, "/path/to/css/file";

# save the PDF to a file
my $file = $kit->to_file('/path/to/save/pdf');

#Perl interface
my $p = new Image::Magick;
$p->Read('/path/to/save/pdf');
$p->Write("file.png");

#Or command line
my @args = ( 'convert', '/path/to/save/pdf', "file.png" );
system(@args) == 0
  or die "system @args failed: $?"; 
```

# iphone - 前台 iphone 应用程序导致我的后台应用程序崩溃

> ID：13903134
> 
> 赞同：0
> 
> 时间：2012-12-16T16:15:47.907
> 
> 标签：iphone, ios, crash, background-process

我有一个基于地图和基于位置的应用程序，我将其放入后台。然后我在游戏应用程序完成初始化后启动一个游戏应用程序（代理破折号）我注意到我的应用程序已被杀死：设备日志中的 9。有时我会收到内存警告消息，有时不会。但是一个应用程序是否有可能导致另一个应用程序被终止。如果我自己运行我的应用程序就没有问题。我在前台运行其他应用程序，没有问题。另外，如果一个应用程序可以导致我的被终止，我可以重新启动吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:58:48.167

Agent dash 必须是一个内存密集型应用程序，因此当 iOS 感觉其内存不足时，它会生成每个应用程序需要处理的内存警告。如果它需要更多内存，它甚至可以杀死你的应用程序。iOS 考虑的主要事情是它希望保持用户正在使用的应用程序处于活动状态。不，您不能以编程方式重新启动您的应用程序，如果用户愿意，他将不得不这样做。

# web-applications - 使用 Clojure 的“丰富”网络应用程序

> ID：13903138
> 
> 赞同：11
> 
> 时间：2012-12-16T16:16:02.287
> 
> 标签：web-applications, clojure, clojurescript

[在构建基于Clojure](http://clojure.org)的 Web 应用程序时，我遇到了一些困难。这是一个简单的 CRUD 应用程序，我开始探索 Clojure 网络生态系统。我正在尝试不同的库，例如[Hiccup](https://github.com/weavejester/hiccup)、[Enlive](https://github.com/cgrand/enlive)、[Compojure](https://github.com/weavejester/compojure)和[Noir](http://www.webnoir.org/)（尽管 Noir 似乎处于弃用的边缘）。

我的问题实际上是两个问题。首先是明显缺乏构建 clojure web 应用程序的约定。其次，我需要一些有关创建“丰富”html 组件的提示。

我喜欢 Clojure 方式的地方在于可以轻松地让不同的库一起运行。用打嗝代替活跃，反过来也没什么大不了的。一切都扮演着单一而简单的角色。与 JSF 之类的复杂框架有很大不同。

但重点是：这种巨大的自由让我感到有些失落。在 JSF 中，我知道一切都有它的位置。我使用 Spring 来集成所有组件，使用 Spring-Security 来处理所有会话内容。组件库让我从处理 html、javascript 和 ajax 问题的压力中解脱出来。

尤其是前面提到的组件库是我在 Clojure 中所缺少的。我发现自己实现了诸如具有交替行颜色、分页、列排序、增量过滤器等功能的数据表之类的东西。它给我留下了关于如何同步这些组件的浏览器和服务器状态的问题，尤其是在包含 ajax 时。我无法在网上找到任何成熟的答案。

框架的优势：一旦您了解了规则和限制，您就可以构建您的应用程序并专注于业务规则。技术基础设施已得到处理，不应分散注意力。

对 Clojure 世界有什么建议？ClojureScript [One](http://clojurescriptone.com/)是一种解决方案吗？我还没有调查它。有谁知道任何提供类似功能的组件库，例如 RichFaces 数据表？是否有处理 ajax 的首选方式？

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:19:23.267

我能给你的只是一些指导方针：

*   以 JSON 或 EDF 在客户端和服务器之间交换消息
*   将您的 GUI 代码与客户端上的状态管理代码分开
*   将您的状态管理代码交叉放置，以便您可以在浏览器之外对其进行测试
*   安排您的客户端 GUI 代码尽可能独立于特定库，选择具有活跃社区和最少依赖关系的库

# snmp - 重新连接到主代理后 snmp 共享表

> ID：13903140
> 
> 赞同：0
> 
> 时间：2012-12-16T16:16:15.987
> 
> 标签：snmp

我正在使用 agentx++ 创建共享表。在 snmpd 重新启动后，子代理重新连接到主代理，但共享表中的所有行都将被删除。知道为什么在 snmpd 重新启动时会删除行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:50:00.880

您有什么样的机制将数据保存到数据库？在代理生命周期内，所有行数据都可能保存在 RAM 中...

# performance - 如何使用 MOSEK 的热启动功能

> ID：13903141
> 
> 赞同：0
> 
> 时间：2012-12-16T16:16:45.847
> 
> 标签：performance, initialization, mosek

我有一个简单的线性规划问题。解决后，我得到了正确的结果。我想使用 MOSEK 的热启动功能加速它，但我不知道如何设置一些参数，如“res.sol.bas.sku”、“res.sol.bas.skn”、....我只知道一个初始解决方案，即“res.sol.bas.xx”，其中存储变量的值以获得接近最优的解决方案。我是否可以通过这种方式使用热启动功能加速引擎！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:43:48.320

你似乎在使用 MATLAB。你读了吗

[http://docs.mosek.com/6.0/toolbox/node009.html#238393032](http://docs.mosek.com/6.0/toolbox/node009.html#238393032)

它解决了问题吗？

# java - 高度图上 2 个顶点之间的空间

> ID：13903149
> 
> 赞同：1
> 
> 时间：2012-12-16T16:17:44.687
> 
> 标签：java, opengl, lwjgl

我正在研究一个由 Perlin Noise、Java 和 LWJGL 生成的无限世界。但是我遇到了一个问题，这有点难以解释，所以我制作了一个视频：http: [//youtu.be/D_NUBJZ_5Kw](http://youtu.be/D_NUBJZ_5Kw)显然问题是所有地面之间的黑色空间。

我已经尝试使所有值加倍而不是浮点数，但这并没有解决问题。

这是我正在使用的一段代码：

```
float height2, height = (float)getHeight(x, y);

height2 = (float) ((getHeight(x-1, y+1) + height) / 2);
vertexhelper.addVertexColorAndTexture(x, height2, y+1, r, g, b, a, 0f, 1f);

height2 = (float) ((getHeight(x+1, y+1) + height) / 2);
vertexhelper.addVertexColorAndTexture(x+1, height2, y+1, r, g, b, a, 1f, 1f);

height2 = (float) ((getHeight(x+1, y-1) + height) / 2);
vertexhelper.addVertexColorAndTexture(x+1, height2, y, r, g, b, a, 1f, 0f);

height2 = (float) ((getHeight(x-1, y-1) + height) / 2);
vertexhelper.addVertexColorAndTexture(x, height2, y, r, g, b, a, 0f, 0f); 
```

我在初始化 x->16 和 y->16 的块时循环遍历它。`vertexhelper`是我做的一个类，它只是把所有东西都放在一个数组中。

（我在这里使用浮点数，但那是在做数学之后，所以这应该不是问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:00:56.913

我不得不考虑高度图上的 4 个位置而不是 2 个。所以不是

```
height2 = (float) ((getHeight(x-1, y-1) + height) / 2); 
```

我不得不使用

```
height2 = (float) ((getHeight(x, y-1) + getHeight(x-1, y) + getHeight(x-1, y-1) + height) / 4); 
```

那解决了它。

# c# - 使用 C# 将大文件传输到 Amazon S3 - 请求中止和取消

> ID：13903150
> 
> 赞同：1
> 
> 时间：2012-12-16T16:17:46.410
> 
> 标签：c#, amazon-s3

我正在尝试将一个大文件上传到 Amazon S3。我第一次使用`PutObject`它，它工作得很好，但上传一个 2GB 的文件大约需要 5 个小时。所以我阅读了一些在线建议并尝试使用`TransferUtility`.

我增加了超时但是这个 TransferUtility API 总是给我`"The request was aborted. The request was canceled."`错误。

代码示例：

```
public void UploadWithMultiPart(string BucketName, string s3_key, string fileName)
{
    var fileTransferUtility = new Amazon.S3.Transfer.TransferUtility(_accessKey, _secretKey);
    var request = new Amazon.S3.Transfer.TransferUtilityUploadRequest()
        .WithBucketName(BucketName)
        .WithKey(s3_key)
        .WithFilePath(fileName)
        .WithTimeout(60*60*1000*100)
        .WithPartSize(1024 * 1024 * 100)
        .WithCannedACL(S3CannedACL.PublicRead)
        .WithStorageClass(S3StorageClass.ReducedRedundancy);

    request.Timeout = 60*60*1000*100;

    fileKey = s3_key;

    request.UploadProgressEvent += new EventHandler<UploadProgressArgs>(uploadRequest_UploadPartProgressEvent);

    //.with = 30000
    // .AddHeader("x-amz-acl", "public-read")

    fileTransferUtility.Upload(request);
}

public void Upload(string BucketName, string s3_key, string fileName)
{
    Amazon.S3.Model.PutObjectRequest request = new Amazon.S3.Model.PutObjectRequest();
    request.WithBucketName(BucketName);
    request.WithKey(s3_key);
    request.WithFilePath(fileName);
    request.Timeout = -1;
    request.ReadWriteTimeout = 30000;
    request.AddHeader("x-amz-acl", "public-read"); 

    s3Client.PutObject(request);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T09:32:09.950

尝试这个

```
private TransferUtility transferUtility;
transferUtility = new TransferUtility(awsAccessKey, awsSecretKey);

AsyncCallback callback = new AsyncCallback(UploadComplete);

var putObjectRequest = new Amazon.S3.Transfer.TransferUtilityUploadRequest()
{
   FilePath = filePath,
   BucketName = awsBucketName,
   Key = awsFilePath,
   ContentType = contentType,
   StorageClass = S3StorageClass.ReducedRedundancy,
   ServerSideEncryptionMethod = ServerSideEncryptionMethod.AES256,
   CannedACL = S3CannedACL.Private
};
IAsyncResult ar = transferUtility.BeginUpload(putObjectRequest, callback, null);
ThreadPool.QueueUserWorkItem(c =>
{
   transferUtility.EndUpload(ar);
}); 
```

# node.js - Passport 中的用户权限级别

> ID：13903154
> 
> 赞同：3
> 
> 时间：2012-12-16T16:18:57.980
> 
> 标签：node.js, authentication, passport.js, everyauth

有关使用 Node.js 的 Passport 身份验证库的动态范围和权限的任何教程。

在文档中没有找到任何内容。

我们如何设置认证用户的用户类型？

在everyauth中更容易做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T18:42:56.553

您可以在指南的 Facebook 部分找到一个示例：http: [//passportjs.org/guide/facebook/](http://passportjs.org/guide/facebook/)

```
app.get('/auth/facebook',
  passport.authenticate('facebook', { scope: ['read_stream', 'publish_actions'] })
); 
```

根据您的问题，我不完全确定这是您要查找的信息。如果您想根据您的用户模块做出授权/访问控制决策，则需要由不同的库结合 Passport（仅用于身份验证）来处理。

# javascript - JavaScript 和 Google Chrome、输入流和数组

> ID：13903156
> 
> 赞同：1
> 
> 时间：2012-12-16T16:19:00.067
> 
> 标签：javascript, arrays, google-chrome-extension, stream

所以我的标题可能无法很好地解释事情，所以我会更好地解释，我正在开发这个 chrome 扩展，它从我在 MIT 的某个人那里找到的 dat 文件中获取同义词。我的大部分想法都是用 Java（我的母语）编写的，在这里你可以看到我想要做什么：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.ArrayList;

public class Grabber {

/**
 * @param args
 */
public static void main(String[] args) throws Exception {

    URL mit = new URL(
            "http://mit.edu/~mkgray/jik/sipbsrc/src/thesaurus/old-thesaurus/lib/thesaurus.dat");
    BufferedReader in = new BufferedReader(new InputStreamReader(
            mit.openStream()));

    String inputLine;
    while ((inputLine = in.readLine()) != null) {
        if (inputLine.startsWith("spoken")) {
            ArrayList<String> list = new ArrayList<String>();
            String[] synonyms = inputLine.substring("spoken".length())
                    .split("  ");
            for (String toPrint : synonyms) {
                if (toPrint.length() > 0) {
                    list.add(toPrint.trim());
                }
            }
            for (String toPrint : list) {
                System.out.println(toPrint);
            }
        }
    }
    in.close();
    }
} 
```

现在，凭借我对语言的“Codecademy”知识，我不知道 Chrome 的 JavaScript API 中包含的所有库等。我们应该开始寻找完成这项任务吗？哦，我还需要弄清楚如何在 JavaScript 中制作数组，就像我上面写的集合一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:30:37.703

这是一个例子：

```
var xhr = new XMLHttpRequest(); // Use XMLHttpRequest to fetch resources from the Web
xhr.open("GET", // HTTP GET method
    "http://mit.edu/~mkgray/jik/sipbsrc/src/thesaurus/old-thesaurus/lib/thesaurus.dat", 
    true // asynchronous
);
xhr.onreadystatechange = (function()
{
    if(xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) // success
    {
        // data fetched in xhr.responseText, now parse it
        var inputLines = xhr.responseText.split(/\r|\n|\r\n/); //Split them into lines
        /* A quick and brief alternative to 
        while ((inputLine = in.readLine()) != null) {
                if (inputLine.startsWith("spoken")) {
                ...
            }
        } */
        inputLines.filter(function(inputLine)
        {
            // You can also use 
            // return inputLine.substr(0, 6) == "spoken";
            // if you are not familiar with regular expressions.
            return inputLine.match(/^spoken/);
        }).forEach(inputLine)
        {
            var list = [];
            var synonyms = inputLine.substring("spoken".length).split("  ");
            synonyms.fonEach(function(toPrint)
            {
                if(toPrint.length > 0)
                    list.push(toPrint.replace(/^\s+|\s+$/g, ''));
                    //toPrint.replace(/^\s+|\s+$/g, '') is similar to toPrint.trim() in Java
                    //list.push(...) is used to add a new element in the array list.
            });
            list.forEach(function(toPrint)
            {
                // Where do you want to put your output?
            });
        });
    }
});
xhr.send(); // Send the request and fetch the data. 
```

# html - 如何禁用 Tumblr 照片集或更改它们的大小？（我的 html 中没有 block:photoset）

> ID：13903158
> 
> 赞同：1
> 
> 时间：2012-12-16T16:19:45.900
> 
> 标签：html, set, photo, tumblr, image-resizing

我一直在寻找数周来解决我的问题。
我对编辑 html 知之甚少，我已经尝试过在这个网站上发布的解决方案，但它们似乎都不起作用。

我正在使用[“Just Plain”主题](http://www.tumblr.com/theme/106)，这是在新照片集布局之前创建的主题。`{block:Photos}` `{/block:Photos}`我认为它没有更新，因为我在主题 html 中找不到任何地方。

我已经编辑了 html 以制作帖子大小`750px`，但恐怕这与我的 html 技能差不多。我是一个完全的新手。

如果有人可以帮助我禁用照片集功能或调整照片集中图像的大小`750px`并让它们一个接一个地出现，我将非常感激。

我会发布需要编辑的 html 块，但就像我说的，关于照片集没有任何块。

对不起，如果这没有意义。

有问题的 tumblr 是[http://nothingbutthe-truth.com](http://nothingbutthe-truth.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-16T15:16:06.927

我就是这样做的：

```
{block:Photoset}
{block:Photos} 
<figure class="post-image">
    <img src="{PhotoURL-HighRes}" alt="{PhotoAlt}"/>
</figure>
{/block:Photos} 
{block:Caption}
<div class="post-description">
    {Caption}
</div>
{/block:Caption}
{/block:Photoset} 
```

{block:Photos} 标签内的所有内容都将为集合中的每张照片渲染。因此，您可以定义自己的标记，而不是依赖提供的 iframe。

在这些标签中，您可以使用照片帖子的标准块变量。 [http://www.tumblr.com/docs/en/custom_themes#photo-posts](http://www.tumblr.com/docs/en/custom_themes#photo-posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:17:48.540

如果您想完全禁用照片集，只需删除 {block:Photoset} 以及介于两者之间的所有内容。

在调整大小方面，您实际上可以通过使用 {Photoset-700} 来更改选择使用的图像的大小，如下所示：

```
 {block:Photoset}
                <li class="post photoset">
                    {Photoset-700}

                    {block:Caption}
                        <div class="caption">{Caption}</div>
                    {/block:Caption}
                </li>
            {/block:Photoset} 
```

这不完全是 750px，但 700px 应该足够接近。我认为无论如何都不可能获得任何更高分辨率的图像，因此它是您可以获得的最接近精确分辨率的图像。

您可以在此处了解有关创建主题的更多信息：[http ://www.tumblr.com/docs/en/custom_themes#photoset-posts](http://www.tumblr.com/docs/en/custom_themes#photoset-posts)

# python-2.7 - 本地开发服务器和应用程序引擎 python utf 8

> ID：13903159
> 
> 赞同：0
> 
> 时间：2012-12-16T16:20:00.147
> 
> 标签：python-2.7, google-app-engine, utf-8, google-cloud-datastore

在 GAE 中建立网站。我在拥有数据库的开发服务器中完成了大部分工作。在我的开发服务器中，我在 UTF-8 中插入了实体，因为如果我不这样做，这些值就不会被写入。但是，这使我不得不使用`{{ nom.titre.encode("utf-8")}}`jinja2 才能正确显示它们。我知道 GAE 数据存储仅使用 UNICODE，因此我可以预见我现在面临的问题。

所以，我曾经`appcfg.py download_data --url=http://localhost:8080/_ah/remote_api/ --filename=filename.csv --kind=-kind-` 备份我的开发数据存储。

现在的问题是当我尝试更新到服务器时。

**要么我使用：**

*   `appcfg.py upload_data --url=http://as.appspot.com/_ah/remote_api --kind=kind --filename=filename.csv` 但是 {{ nom.titre.encode("utf-8")}} 使用 jinja 在 GAE 上出错

***或者***

*   `appcfg.py create_bulkloader_config --filename=G:\Backup\datastore\bulkloader.yaml --url=http://toolsetdocs.appspot.com/_ah/remote_api` 和

    ```
    transformers:
    - kind: CISP
      connector: csv
      connector_options:
        encoding: utf-8 
    ```

    我得到一个错误`UnicodeDecodeError : 'utf-8' codec can't decode`......等等

那么，将我的开发服务器数据存储的信息上传到 GAE 数据存储的**最直接方法是什么，保持 UTF-8 并且不更改模板编码？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:17:03.633

存储字符串时，应使用`decode('utf-8')`然后进行编码以用于显示目的。您当前正在模板中执行此操作，但您应该在存储预期的 UTF-8 字符串时对其进行解码。

# xhtml - “IO 错误：非 XML 内容类型：文本/html”我们如何修复此错误？

> ID：13903160
> 
> 赞同：1
> 
> 时间：2012-12-16T16:20:03.660
> 
> 标签：xhtml

我正在尝试检查此页面[http://www.tightenzonline.com/santosh/index.htm](http://www.tightenzonline.com/santosh/index.htm)是否存在验证错误。

我收到此错误：“IO 错误：非 XML 内容类型：文本/html”

[http://validator.w3.org/nu/?charset=UTF-8&schema=http%3A%2F%2Fs.validator.nu%2Fw3c-xhtml5-microdata-rdfalite.rnc+http%3A%2F%2Fs.validator .nu​​%2Fhtml5%2Fassertions.sch+http%3A%2F%2Fc.validator.nu%2Fbase%2F+http%3A%2F%2Fc.validator.nu%2Fmicrodata%2F++http%3A%2F%2Fc。 validator.nu%2Frdfalite%2F&parser=xml&doc=http%3A%2F%2Fwww.tightenzonline.com%2Fsantosh%2Findex.htm](http://validator.w3.org/nu/?charset=UTF-8&schema=http%3A%2F%2Fs.validator.nu%2Fw3c-xhtml5-microdata-rdfalite.rnc+http%3A%2F%2Fs.validator.nu%2Fhtml5%2Fassertions.sch+http%3A%2F%2Fc.validator.nu%2Fbase%2F+http%3A%2F%2Fc.validator.nu%2Fmicrodata%2F++http%3A%2F%2Fc.validator.nu%2Frdfalite%2F&parser=xml&doc=http%3A%2F%2Fwww.tightenzonline.com%2Fsantosh%2Findex.htm)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:28:05.083

任何一个：

1.  验证不需要 XML 的配置文件（例如 XHTML 1.0 Transitional，您的文档声称使用该配置文件编写）
2.  `application/xml`配置您的 Web 服务器以在 HTTP Content-Type 标头中使用 XML 媒体类型（例如 ）提供文档
3.  单击*Be lax about content-type*选项

如果您正在编写面向公众的网页，我会推荐选项 1。

# windows - TideSDK 和 XAMPP 捆绑包冲突

> ID：13903161
> 
> 赞同：2
> 
> 时间：2012-12-16T16:20:39.257
> 
> 标签：windows, xampp, bundle, conflict, tidesdk

首先，我是瑞士人，如果我错了，请原谅我；我的英语不是那么丰富。

在 w7 上安装 XAMPP 后，当我尝试启动应用程序（由 TideSDK Developer 创建的捆绑包）时，我收到几个错误通知，因为 TideSDK 会在 XAMPP 路径中搜索库等。

否则，如果我像这样重命名 XAMPP 文件夹：`C:/windows/ZZZxampp/`一切正常。

所以我想知道怎么可能**告诉应用程序不在 XAMPP 路径中搜索**

问候和谢谢。

* * *

细节：

即使从 TideSDK Developer 启动的新空项目中，我也会收到错误消息。我认为那么问题可能是xampp的降级做得不好。现在是 v1.7.3，但在 xampp/htdocs/xampp/.version 文件中我仍然可以看到 v1.8.1。

我认为这很合理，因为许多错误都与 php 相关；与此消息：

```
...unable to...
Module compiled with build ID=API20090626,TS,VC6<-------
PHP compiled with build ID=API20090626,TS,VC8<----------
These options need to match 
```

但我不是专家，所以也许我错了。所以，这里有一些代码。

显现：

```
#appname: Test
#appid: dfgsdgnjfdxcydghssdf
#guid: a9d7f8a0-8389-4dd7-a7d6-293a9b04787e
#version: 1.0
#image: default_app_logo.png
#publisher: G
#url: www.test.com
runtime: 1.3.1-beta
app: 1.3.1-beta
codec: 1.3.1-beta
database: 1.3.1-beta
filesystem: 1.3.1-beta
media: 1.3.1-beta
monkey: 1.3.1-beta
network: 1.3.1-beta
platform: 1.3.1-beta
process: 1.3.1-beta
ui: 1.3.1-beta
worker: 1.3.1-beta
php: 1.3.1-beta 
```

tiapp.xml

```
<ti:app xmlns:ti="http://ti.appcelerator.org">

<id>dfgsdgnjfdxcydghssdf</id>
<name>Test</name>
<version>1.0</version>
<publisher>G</publisher>
<url>www.test.com</url>
<icon>default_app_logo.png</icon>
<copyright>2012 by G</copyright>

<window>
<id>initial</id>
<title>Test</title>
<url>app://index.html</url>
<width>700</width>
<max-width>3000</max-width>
<min-width>0</min-width>
<height>500</height>
<max-height>3000</max-height>
<min-height>0</min-height>
<fullscreen>false</fullscreen>
<resizable>true</resizable>
<chrome scrollbars="true">true</chrome>
<maximizable>true</maximizable>
<minimizable>true</minimizable>
<closeable>true</closeable>
</window>
</ti:app> 
```

Index.html 只是 html...

以及包装日志

```
Preparing to package desktop app together with runtime. One moment...
Staging Test
-> Copying contents from C:\Users\G\Desktop\Test to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> Copying installer from C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\installer to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> Copying runtime to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\app\1.3.1-beta\\tideapp.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\app\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\app\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\codec\1.3.1-beta\\tidecodec.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\codec\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\codec\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\database\1.3.1-beta\\tidedatabase.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\database\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\database\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\filesystem\1.3.1-beta\\tidefilesystem.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\filesystem\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\filesystem\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\media\1.3.1-beta\\tidemedia.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\media\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\media\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\monkey\1.3.1-beta\\tidemonkey.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\monkey\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\monkey\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\network\1.3.1-beta\\tidenetwork.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\network\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\network\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\platform\1.3.1-beta\\tideplatform.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\platform\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\platform\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\process\1.3.1-beta\\tideprocess.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\process\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\process\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\ui\1.3.1-beta\\default.css does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\ui\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\ui\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\worker\1.3.1-beta\\tideworker.dll does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\worker\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\worker\1.3.1-beta
-> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\php\1.3.1-beta\\install.txt does not exist
-> Copying C:\ProgramData\TideSDK\modules\win32\php\1.3.1-beta ==> C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\php\1.3.1-beta
-> Copying tiboot.exe to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
Version: ImageMagick 6.8.0-8 2012-12-05 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP
-> Launching: C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\ReplaceVistaIcon.exe "C:\Users\G\Desktop\Test\packages\win32\bundle\Test\Test.exe" "C:\Users\G\Desktop\Test\packages\win32\bundle\Test\Resources\_converted_icon.ico"
->
Language="1033" Codepage="1252"
UpgradeCode="a9d7f8a0-8389-4dd7-a7d6-293a9b04787e">
Description="Test"
Comments="None provided" Manufacturer="None provided"
InstallerVersion="300" Languages="1033" Compressed="yes" SummaryCodepage="1252" />
Minimum='0.0.1' IncludeMinimum='yes'
Maximum="1.0.0" IncludeMaximum='yes' />
WorkingDirectory="INSTALLDIR" Icon="ApplicationIcon.exe"
IconIndex="0" Advertise="yes" />
WorkingDirectory="INSTALLDIR" Icon="ApplicationIcon.exe"
IconIndex="0" Advertise="yes" />
ConfigurableDirectory="INSTALLDIR">
NOT Installed
NOT Installed
NOT Installed
-> Ignoring error: [Error 2] Impossibile trovare il file specificato: 'C:\\Users\\G\\Desktop\\Test\\packages\\win32\\bundle\\installer.wxs.wixobj'
Traceback (most recent call last):
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\tidebuilder.py", line 147, in
app.package(options.destination, bundle=bundle)
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\win32_app.py", line 174, in package
wix_bin_dir = self.get_wix_bin_directory()
File "C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\win32_app.py", line 197, in get_wix_bin_directory
raise Exception('Could not find WiX v3 bin directory')
Exception: Could not find WiX v3 bin directory
Done packaging! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:21:18.747

你是对的：WIX 需要修复。

替换字符串

```
'Windows Installer XML v3' 
```

和

```
'WiX Toolset v3.7' //my version installed' 
```

在

```
C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\win32_app.py 
```

**解决了包装问题。**（即使有 light.exe 错误，它也能正常工作）

这里是新日志：

```
Preparing to package desktop app together with runtime. One moment...
Staging Test
-> Copying contents from C:\Users\G\Desktop\Test to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> Copying installer from C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\installer to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> Copying runtime to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\app\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\codec\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\database\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\filesystem\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\media\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\monkey\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\network\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\platform\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\process\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\ui\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\worker\1.3.1-beta
-> Already up to date: C:\Users\G\Desktop\Test\packages\win32\bundle\Test\modules\php\1.3.1-beta
-> Copying tiboot.exe to C:\Users\G\Desktop\Test\packages\win32\bundle\Test
Version: ImageMagick 6.8.0-8 2012-12-05 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP
-> Launching: C:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\ReplaceVistaIcon.exe "C:\Users\G\Desktop\Test\packages\win32\bundle\Test\Test.exe" "C:\Users\G\Desktop\Test\packages\win32\bundle\Test\Resources\_converted_icon.ico"
->
Language="1033" Codepage="1252"
UpgradeCode="a9d7f8a0-8389-4dd7-a7d6-293a9b04787e">
Description="Test"
Comments="None provided" Manufacturer="None provided"
InstallerVersion="300" Languages="1033" Compressed="yes" SummaryCodepage="1252" />
Minimum='0.0.1' IncludeMinimum='yes'
Maximum="1.0.0" IncludeMaximum='yes' />
WorkingDirectory="INSTALLDIR" Icon="ApplicationIcon.exe"
IconIndex="0" Advertise="yes" />
WorkingDirectory="INSTALLDIR" Icon="ApplicationIcon.exe"
IconIndex="0" Advertise="yes" />
ConfigurableDirectory="INSTALLDIR">
NOT Installed
NOT Installed
NOT Installed
-> Launching: ['C:\\Program Files (x86)\\WiX Toolset v3.7\\bin\\candle.exe', '-out', 'C:\\Users\\G\\Desktop\\Test\\packages\\win32\\bundle\\installer.wxs.wixobj', 'C:\\Users\\G\\Desktop\\Test\\packages\\win32\\bundle\\installer.wxs']
Windows Installer Xml Compiler version 3.7.1119.0
Copyright (C) Outercurve Foundation. All rights reserved.
installer.wxs
-> Launching: ['C:\\Program Files (x86)\\WiX Toolset v3.7\\bin\\light.exe', '-ext', ' WixUIExtension', '-out', u'C:\\Users\\G\\Desktop\\Test\\packages\\win32\\bundle\\Test.msi', 'C:\\Users\\G\\Desktop\\Test\\packages\\win32\\bundle\\installer.wxs.wixobj']
Windows Installer Xml Linker version 3.7.1119.0
Copyright (C) Outercurve Foundation. All rights reserved.
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4053.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4053.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.100.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.101.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.103.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.104.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.193.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.238.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.3044.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.3051.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.3069.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.3044.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.3051.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.1833.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4027.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.3069.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.1833.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4028.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4029.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4027.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4045.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4028.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4029.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_manifest.8.0.50727.4052.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4045.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Component, Column: KeyPath, Key(s): downlevel_payload.8.0.50727.4052.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.100.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.101.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.103.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.104.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.193.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.238.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.3044.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.3051.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.3044.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.3069.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.3051.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.1833.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.3069.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4027.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.1833.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4028.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4027.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4029.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4028.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4045.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4029.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4052.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4045.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_manifest.8.0.50727.4053.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4052.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE03: String overflow (greater than length permitted in column); Table: Registry, Column: Registry, Key(s): reg_downlevel_payload.8.0.50727.4053.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E
light.exe : warning LGHT1076 : ICE25: Possible dependency failure as we do not find CRT.Policy.63E949F6_03BC_5C40_FF1F_C8B3B9A1E18E@0 v in ModuleSignature table
C:\Users\G\Desktop\Test\packages\win32\bundle\installer.wxs(15) : warning LGHT1076 : ICE61: This product should remove only older versions of itself. The Maximum version is not less than the current product. (1.0.0 1.0.0)
light.exe : warning LGHT1076 : ICE82: This action SystemFolder.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E has duplicate sequence number 1 in the table InstallExecuteSequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E has duplicate sequence number 1 in the table InstallUISequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E has duplicate sequence number 1 in the table AdminExecuteSequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E has duplicate sequence number 1 in the table AdminUISequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder.98CB24AD_52FB_DB5F_FF1F_C8B3B9A1E18E has duplicate sequence number 1 in the table AdvtExecuteSequence
Done packaging! 
```

无论如何，我所说的错误消息类似于尝试启动/执行应用程序时连续触发的 20 个**模式窗口。**当我重命名 xampp 文件夹时**，我可以启动/调试，并从包中执行应用程序......没有任何模式错误。**

我尝试安装新版本的 xampp (1.8.1) 并且......很好，**干净**安装只有一个错误：

```
PHP Startup: bz2: Unable to initialize module 
Module compiled with build ID=API 20100525
PHP compiled with build ID=API20090626
These options need to match 
```

为什么 TideSDK 讨厌 XAMPP？

真的：难道不是应用程序首先尝试使用默认系统资源吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:07:34.177

您的错误与您的本地 XAMPP 安装没有任何关系。您没有出于测试/调试目的运行应用程序，而是尝试启动打包过程（生成可执行文件和/或要分发的安装包）。

Windows 机器上的打包失败，因为您没有正确安装 WIX 工具集。

# jquery - 地图在动态 div 加载时闪烁

> ID：13903162
> 
> 赞同：0
> 
> 时间：2012-12-16T16:20:56.650
> 
> 标签：jquery, google-maps

我有一个用 .load() 方法动态填充的 div。我有一个功能可以通过单击菜单中的链接在此 div 中显示谷歌地图。

```
function ShowGmap() {
  var myLatlng = new google.maps.LatLng(41.905, 12.710);
    var mapOptions = {
      center: myLatlng,
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("mb"),
        mapOptions);
    var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title:"----" 
```

mb 是我每次填充的 div 的 ID。我想要的是我菜单上的每个按钮都会用不同的内容填充这个 div。问题是：当我单击第二个按钮来更改该 div 的内容时，地图会闪烁（有时它会像背景一样一直在 div 上绘制）一秒钟。我不确定这是否是缓存问题。这是主页按钮上单击操作的代码

```
$("#bt_home").click(function(){
    event.preventDefault();
    click_btdove=false; //this make the button clickable only once
     $("#mb").removeAttr('style');
     $('#mb').load('main_page.html #home'); 
```

removeAttr 是必需的，因为加载地图后 div 具有灰色背景（使用 chrome 上的“检查元素”进行检查。

谢谢您的帮助。

编辑：这是我的意思的图片：[问题的img](http://imageshack.us/photo/my-images/19/problemld.png/)

编辑#2 这是我的项目：看看当你点击“dove siamo”按钮时发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:31:25.840

试试这个：

```
 $("#bt_home").click(function(event){
     event.preventDefault();
     click_btdove=false; //this make the button clickable only once
     $("#mb").css({"background":"none"}); // <-----add this to remove the background color
     $('#mb').load('main_page.html #home');
 }); 
```

正如我所看到的，您的代码试图阻止链接的默认行为，但您没有在函数中传递它。

看看这个如果有帮助。

# c# - 如何生成包含所有可能的 12 个字符字母/数字组合的文件？

> ID：13903164
> 
> 赞同：0
> 
> 时间：2012-12-16T16:21:05.740
> 
> 标签：c#, generator, letters-and-numbers

我已经为此苦苦挣扎了一段时间，我什至不知道从哪里开始。我正在尝试创建一个会生成大量随机数的程序（我可以称它们为连续剧）。限制将来自英文大写字母的字母 AZ 和 0-9 的数字。

类似于此页面上的网站应用程序[http://www.random.org/strings/](http://www.random.org/strings/)

但

我希望它创建字母和数字的“所有”组合，不一样，并将它们保存到文本文件中。我认为大约有 200k+ 组合。

它们将是 12 个字符。例子：

*   T9T1P63WBYYZ
*   SCI1V7SAV9F5
*   5OLN7UQS7MIE

如果可能的话，我想在 C# 中创建它，但我什至不知道应该从哪里开始。我正在浏览谷歌和类似项目大约一周，我需要它作为大学项目。如果有人会帮助我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:09:01.730

**呵呵..如果你有时间！**

昨天问，在这里看到了**LB**的一个很好的解决方案：

[如何获得所有可能的 3 个字母排列？](https://stackoverflow.com/questions/13891200/how-to-get-all-the-possible-3-letter-combinations)

他的简单解决方案，只需更改字母表：

```
var alphabet = "abcdefghijklmnopqrstuvwxyz1234567890";

var query = from a in alphabet
            from b in alphabet
            from c in alphabet
            from d in alphabet
            from e in alphabet
            from f in alphabet
            from g in alphabet
            from h in alphabet
            from i in alphabet
            from j in alphabet
            from k in alphabet
            from l in alphabet

            select "" + a + b + c + d + e + f + g + h + i + j + k + l;

foreach (var item in query)
{
    Console.WriteLine(item);
} 
```

更高级的答案可能是[CartesianProduct](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

# jquery - 如何使用 jquery 在每个 img 标签之间附加一个新的 div？

> ID：13903171
> 
> 赞同：2
> 
> 时间：2012-12-16T16:21:45.497
> 
> 标签：jquery

这是我的代码：

```
 <div class="sample">
    <img src="images/i1.jpg"/>
    <img src="images/i2.jpg"/>
    <img src="images/i3.jpg"/>
    </div> 
```

我想像这样追加，但应该创建类并使用jquery动态追加：我试过但我的逻辑是错误的，所以任何人都可以帮忙

```
 <div class="sample">
    <div class="new"> <img src="images/i1.jpg"/> </div>
    <div class="new"> <img src="images/i2.jpg"/> </div>
    <div class="new"> <img src="images/i3.jpg"/> </div>
    </div>

    $('img').each(function(){ 
var that = $(this);    
var v = document.createElement('div');
v.setAttribute('class','new');
$(v).append(that);
$('sample').append(v);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:24:05.590

```
$('.sample img').wrap('<div class="new"></div>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:23:26.747

您可以使用`wrap`方法：

```
$('.sample img').wrap('<div clas="new"></div>'); 
```

如果您`.`为类选择器添加代码，您的代码也可以工作：

```
$('sample').append(v);
// ^--- 
```

[http://jsfiddle.net/6hYFc/](http://jsfiddle.net/6hYFc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:24:03.390

```
$('img').wrap('<div class="new">content</div>') 
```

应该是你所需要的

# database - 消除数据库中的重复数据能走多远？

> ID：13903174
> 
> 赞同：1
> 
> 时间：2012-12-16T16:22:03.030
> 
> 标签：database, database-normalization

消除数据库中的重复数据能走多远？因为你可以去 OTT，它会变得疯狂。让我给你举个例子...

如果我要创建一个包含表“动物”的动物园数据库，该表具有“名称”、“物种”和“国家出生”

但是那里会有重复的数据，因为许多动物可能来自同一个国家，例如可能有很多老虎。

所以真的应该有一个'Species'表和一个'Country_of_birth'表但是过了一段时间你会有很多表那么你走多远？

在这个问题中，我只是以一张表为例。Animal 表中的一行存储有关动物园中单个动物的信息。这样动物的名字、种类和出生国家，以及一个唯一的animalID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:29:34.320

> 但是那里会有重复的数据，因为许多动物可能来自同一个国家，例如可能有很多老虎。

这表明您要跟踪单个动物，而不仅仅是动物*种类*。让我们假设动物园使用某种数字纹身或微芯片来识别个体动物。

假设该样本数据具有代表性。（不是，但可以用于教学。）

```
Animals
Predicate: Animal having microchip <chip_num> of species <species> 
           has name <name> and was born in <birth_country_code>.

chip_num  name       species          birth_country_code
--
101234    Anita      Panthera tigris  USA
101235    Bella      Panthera tigris  USA
101236    Calla      Panthera tigris  USA
101237    Dingo      Canis lupus      CAN
101238    Exeter     Canis lupus      CAN
101239    Bella      Canis lupus      USA
101240    Bella      Canis lupus      CAN 
```

该表中没有多余的数据。如果不从根本上改变该表的含义，就不能删除这些列。它有一个候选键：chip_num。它在 5NF 中。

值在非键列中重复。这就是非键（非主）列的*定义**。*键列（或键列集）中的值是唯一的；非键列中的值不是。

如果要将“birth_country_code”中的值限制为有效的三字母 ISO 国家代码，*可以*添加一个有效的三字母 ISO 国家代码表，并为其设置外键引用。这通常是[一件好事](http://catb.org/jargon/html/G/Good-Thing.html)，但它与规范化*无关。*

```
iso_country_code
--
CAN      
USA 
```

你可以对“物种”再次做同样的事情。这通常也是一件好事，而且它也与规范化*无关。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:38:24.203

首先，您决定表应该包含***什么***信息。在你的例子中。是关于个别动物的表吗？或者是关于动物的种类以及每个种类有多少？您有出生国家这一事实可能表明有人希望它是前者。如果是这种情况，您必须有一个识别单个动物的密钥。您有一个与个体相关联的属性（属性），因此每一行必须（应该？）代表一个个体。您应该在[此处](http://erwin.com/community/expert-blogs/the-problem-of-individuation/)阅读有关身份和个性化的数据库建模概念的信息。

实际上，要正确执行此操作，您需要对数据模型中的***每一***件事都执行此操作，然后将该模型转换为数据库表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:14:35.863

它归结为决定什么*对您的系统*很重要。

决定某事物（例如“出生国”）仅仅是一个属性还是本身就是一个成熟的实体，这取决于您的系统还需要了解有关国家/地区的其他信息，以及您的系统可以跟踪的完全属性在功能上依赖于国家。

您还应该考虑您的属性是否容易受到更新异常的影响。如果你在动物表中的国家声明是国家的正式名称，那么你可能会面临风险，例如，如果“比利时刚果”突然变成“刚果民主共和国” -*哦等等，这已经发生了！*

规范化规则并非神圣不可侵犯。它们是非常有用的经验法则，旨在让您在大多数情况下远离麻烦。尽管如此，规则是要被打破的——但你应该只在知情的情况下打破它们，并仔细考虑后果。

# ruby-on-rails - Simple_form 将类添加到表单

> ID：13903175
> 
> 赞同：23
> 
> 时间：2012-12-16T16:22:06.377
> 
> 标签：ruby-on-rails, simple-form

我在我的 Rails 应用程序中使用 simple_form，我尝试将`form-horizontal`类添加到我的表单中。

```
<form accept-charset="UTF-8" action="/account/orders" class="simple_form new_order" data-validate="true" enctype="multipart/form-data" id="new_order" method="post" novalidate="novalidate"> 
```

当我使用`html: { class: "form-horizontal" }`它时更改`class="simple_form new_order"`为`class="simple_form form-horizontal"`.

我应该怎么做才能继续`new_order`上课？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-06-18T01:18:48.810

它对我有用

```
= simple_form_for @model, html: { class: "form-horizontal"} do |f|
  ... 
```

它编译为

```
<form accept-charset="UTF-8" action="/numbers" class="simple_form form-horizontal" id="new_number" method="post"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T18:42:14.537

这是[预期的行为](https://github.com/plataformatec/simple_form/commit/1e8bba7eb378da86cabb3d6a0ece9b34998c58e2)。

所以如果你想改变它，你应该在[这个文件](https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/action_view_extensions/form_helper.rb)`simple_form_css_class`中使用猴子补丁方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-29T18:17:54.683

这对我`config.form_class = 'form-horizontal'`有用并保持 new_model 类

# javascript - 为什么 CommonJS 的 require 函数不是异步的？

> ID：13903177
> 
> 赞同：2
> 
> 时间：2012-12-16T16:22:32.237
> 
> 标签：javascript, node.js, commonjs

在加载 CommonJS 模块时，我们使用`require`同步的语句。但是加载模块不涉及从磁盘读取它们并解释它们。那么，在我们提倡非阻塞 I/O 的设置中，为什么`require` 是同步的呢？

**更新：**

我已经在客户端中看到并使用过 requireJS，并且可以欣赏它的异步特性。我想知道的是为什么在服务器上做这种事情并不普遍（我知道 requireJS 可以在 Node 中使用，但这不是重点）。

另外我想知道在我的代码中需要一个内联模块是否会使我的代码阻塞，这是否是一种不好的做法，应该避免。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:29:20.283

`require`模块通常是您在程序开始时执行的操作。如果您不在程序开始时执行此操作，则结果无论如何都会被缓存。启动这样的程序：

```
var fs = require('fs');
var http = require('http');
var oranges = require('oranges');

// Do stuff 
```

与开始这样的工作相同：

```
require('async', function(err, async) {
    async.map(['fs', 'http', 'oranges'], function(err, modules) {
        var fs = modules[0], http = modules[1], oranges = modules[2];

        // Do stuff
    });
}); 
```

不同之处在于其中之一是不必要的复杂。是的，可能会实现某种语法糖，但它仍然没有任何好处，除非在一些微小的边缘情况下。

# ios - 在自动旋转期间如何加载新的 NIB 文件？

> ID：13903184
> 
> 赞同：2
> 
> 时间：2012-12-16T16:23:03.907
> 
> 标签：ios, autorotate, glkit

Apple 的 NIB 本身不支持旋转，所以我尝试为同一个视图使用两个不同的 NIB - 每个方向一个。

我尝试了以下，它的工作原理，除了......它打破了一些子视图（例如苹果的 OpenGL / GLKit 视图）。

它只会破坏第一次旋转 - 所有后续旋转都完全按预期工作。所以，我假设苹果的“viewWill/Did”调用堆栈中有一个我在这里遗漏的微妙之处。问题是，我从来没有找到过真正的文档——只是在 Apple 文档中到处模糊地引用“一些”发生的调用，以及何时/为什么。

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if( UIInterfaceOrientationIsLandscape( toInterfaceOrientation) )
    {
        [[NSBundle mainBundle] loadNibNamed:[NSString stringWithFormat:@"%@-landscape", NSStringFromClass([self class])] owner:self options:nil];

        [self viewDidAppear:FALSE];
        [self viewWillDisappear:FALSE];
        [self viewDidReload];
        [self viewWillAppear:FALSE];
        [self viewDidAppear:FALSE];

        [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar-landscape"] forBarMetrics:UIBarMetricsDefault];
    }
    else
    {
        [[NSBundle mainBundle] loadNibNamed:[NSString stringWithFormat:@"%@", NSStringFromClass([self class])] owner:self options:nil];

        [self viewDidAppear:FALSE];
        [self viewWillDisappear:FALSE];
        [self viewDidReload];
        [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbar-portrait"] forBarMetrics:UIBarMetricsDefault];
        [self viewWillAppear:FALSE];
        [self viewDidAppear:FALSE];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:08:37.383

根据 Apple 的说法，在您的情况下，您不仅应该加载不同的 nib，还应该更改视图控制器：

> 如果您想根据设备是纵向还是横向显示相同的数据，方法是使用两个单独的视图控制器。

阅读[View Controller Programming Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)以了解具体情况。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:58:13.003

如果您在 Stack Overflow 上搜索“[ios] 旋转不同的 nibs”，您将获得大量点击。容我们说，有一些“创造性”的解决方案。

对于 Levi 的观点，至少早在 iOS 4.3 中，Apple 的建议一直是“加载具有特定方向的 NIB 的新控制器”。在 Xcode 中，您可以安装旧的 iOS 文档集，如果您查看 iOS 4.3 *View Controller Programming Guide，*并转到“创建备用景观界面”部分，您会看到他们当时的建议与我们现在看到的非常相似（尽管它使用的是 NIB 而不是故事板）。但概念是一样的。如果方向不同，则启动一个新的视图控制器。这将是最强大的方法，恕我直言，当我很久以前研究这个时，似乎所有涉及在后台加载 NIB 的技术对他们来说似乎有点笨拙。对景观控制器执行此模式可确保关键系统通知或其他操作不会漏掉。

就我个人而言，我发现这已经够麻烦了，我通常已经放弃了针对不同方向的单独 NIB，而是使用单个 NIB/场景，并依靠弹簧和支柱（也称为自动调整大小的蒙版）来完成绝大多数布局更改. 当我有一个视图，其更改需要更重要的控件相互重新定位、更改背景图像等时，我将以编程方式更改布局`viewWillLayoutSubviews`（如果 iOS 版本低于 5.0，我从`willAnimateRotationToInterfaceOrientation`...但对于 iOS 5 及更高版本，`viewWillLayoutSubviews`更胜一筹）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T18:17:59.603

我发现了问题：这似乎是 Apple 的 OpenGL 代码中的一个错误。只有使用 GLKit 的项目受到影响：

Apple 的 GLKViewController 必须是唯一的视图控制器，占据 Container VC 的全部区域（例如 UINavigationController/UITabController/window 的 rootViewcontroller），并且必须精确管理一个 GLKView - 如果还有其他的，和/或 GLKViewController 未满屏幕，它打破了自转。（当 GLKVC 被连接为运行节目的人时，Apple 似乎正在做一些技巧，否则不会触发）

理论上，如果您创建一个自定义容器视图控制器（iOS 5 中的新功能，Apple 目前仅部分记录了该功能），那么它将正常工作。但是在 Apple 发布完整的文档之前（可能是明年的 WWDC？），这很难做到。

# java - 我的 java.util.Scanner 不起作用

> ID：13903191
> 
> 赞同：0
> 
> 时间：2012-12-16T16:24:05.397
> 
> 标签：java, nosuchelementexception

我的代码收到此错误：

```
Skriv din alder herunder og tryk enter:
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Scanner.java:907)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at Tasteturindtastning.main(Tasteturindtastning.java:20)
[Finished in 1.7s with exit code 1] 
```

我的代码是：

```
// Starter java som man plejer, læs i HejVerden.java

public class Tasteturindtastning
{
    public static void main(String[] arg)
    {
        /* Jeg skal nu angive en variable, men jeg kan ikke bestemme denne variable
         * Da jeg ønsker at indtastningen fra dette tastetur skal være variablen.
         * I stedet for int og double bruger jeg så java.util.Scanner, som aflæser
         * brugerens indtastninger.
         */

        java.util.Scanner tastetur = new java.util.Scanner(System.in);

        // Printer en opgave/spørgsmål til brugeren

        System.out.println("Skriv din alder herunder og tryk enter:");

        int alder; // Angiver et variablenavn
        alder = tastetur.nextInt(); // Angiver variablen med værdien fra indtastningen

        /* Herunder gør jeg brug af et if statement der tjekker værdien for
         * variablen alder, og ser om den er lig med eller højere end 18, og hvis
         * dette er tilfældet, så udprinter den en sætning
         */

        if (alder >= 18) System.out.println("Du er myndig, da du er " + alder + " år gammel"); // Printes hvis han er 18 eller ældre

    }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T16:27:57.973

当没有更多元素可以从扫描仪读取时，扫描仪会抛出**[NoSuchElementException 。在使用](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)****[Scanner.hsNextInt()检索整数之前，您必须检查扫描仪中是否存在任何元素](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28%29)**

```
 while(tastetur.hasnextInt()){
        alder = tastetur.nextInt(); 
        } 
```

# c++ - 时间类比较

> ID：13903194
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:24:27.433
> 
> 标签：c++

```
bool operator < (Time obj_a, Time obj_b)
{
 return ((obj_a.hours<=obj_b.hours || obj_a.minutes<=obj_b.minutes) &&  
 (obj_a.hours<=obj_b.hours || obj_a.minutes<=obj_b.minutes));
}
bool operator > (Time obj_a, Time obj_b)
{
 return (obj_a.hours>=obj_b.hours || obj_a.minutes>=obj_b.minutes);
}
bool operator == (Time obj_a, Time obj_b)
{
 return (obj_a.hours==obj_b.hours && obj_a.minutes==obj_b.minutes);
} 
```

有人可以告诉我这些运算符有什么问题吗？他们正在比较小时和分钟的时间。但我没有得到正确的比较。我已经定义了一类时间，其中存储了小时和分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:31:56.867

这段代码有很多问题。首先，您将`<`比较减少为`<=`比较，这（如果您的逻辑的其余部分是正确的）将意味着相等的时间将比较`<`or `>`，具体取决于比较例程的参数顺序。

然后，

```
((obj_a.hours<=obj_b.hours || obj_a.minutes<=obj_b.minutes) &&  
 (obj_a.hours<=obj_b.hours || obj_a.minutes<=obj_b.minutes)) 
```

在 an 中执行完全相同的比较两次`&&`，所以它实际上只是在做

```
obj_a.hours<=obj_b.hours || obj_a.minutes<=obj_b.minutes 
```

这不起作用，因为它希望*小时*或*分钟*为. 这意味着<=因为.*`<=``11:30``10:40``30 <= 40`*

 *解决此问题的最简单方法是将时间对象的比较减少到仅分钟的比较，例如

```
a.hours * 60 + a.minutes < b.hours * 60 + b.minutes 
```*

# objective-c - 调用带有变量的块是否保证其生命周期将被保留？

> ID：13903196
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:24:33.463
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

我有一些typedef：

```
typedef void (^myBlock)(SomeObject); 
```

我有一些对象

```
@interface SomeObject : NSObject
@end

// Method of some arbitrary class
- (void) someMethod1 {
    SomeObject *someObject = [[SomeObject alloc] init];

    myBlock block = ^(SomeObject obj){
        // When _block(someObject)_ will be called inside someQueue - 
        // Is it guaranteed that someObject will be alive, retained inside me?       

        // Do something complex and involving (or not) obj ...    
    }

    dispatch_async(someQueue, ^{
        // Some bunch of code - after which we are sure that 
        // by the next line someMethod1 will run out, so its scope is lost

        block(someObject);
    });
} 
```

问题放在*块变量的**块*中：是否保证我们传递给 someQueue 队列中的块块的 someObject 对象将是*活动的***并保留**在*块块*中？

 ***这个问题是我刚刚提出的问题的一个更复杂的变体：[将对象传递到块是否保证其生命周期将被保留？](https://stackoverflow.com/questions/13901447/does-a-passing-of-an-object-to-a-block-guarantees-that-its-lifecycle-will-be-ret).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:47:50.697

该块及其将使用的所有内容都将保留到执行该块之后..它被**捕获**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:44:28.393

我相信您所问的与上一个问题相同。这里唯一的区别是您不是在块内调用方法，而是在调用块。
也许我的回答不够清楚：所有内容都保留在一个块内，甚至保留一个块。

```
dispatch_async(someQueue, ^{
    // Some bunch of code - after which we are sure that 
    // by the next line someMethod1 will run out, so its scope is lost

    block(someObject);
}); 
```

在你调用 someObject 的块内部，所以 someObject 被捕获。块也被捕获。***

# ruby-on-rails - Rails 路由：删除 url 的编辑后缀

> ID：13903198
> 
> 赞同：0
> 
> 时间：2012-12-16T16:24:42.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我正在创建一个带有博客模块的网站。博客文章可以是草稿或已发布。

已发布的帖子无法再编辑，草稿无法查看（仅编辑）

我目前有一个资源定义为

```
resources :posts, :path => "blog" do
  collection do
    get 'drafts'
  end
end 
```

我可以使用 访问草稿列表`blog/drafts`，使用 创建新的帖子`blog/new`，并通过 编辑草稿`blog/:id/edit`。

但是，我希望使用创建`blog/drafts/new`和编辑新草稿`blog/drafts/:id`

我需要定义`new`、`create`和路由来使用这个新方案`edit`。`update`和路线看起来`new`很`create`简单。但是我不知道如何处理`edit`路由以删除操作名称部分。

此外，在查看默认路由定义时，我发现`actionpack-3.2.9/lib/action_dispatch/routing/mapper.rb`以下内容：

```
member do
  get    :edit if parent_resource.actions.include?(:edit)
  get    :show if parent_resource.actions.include?(:show)
  [...]
end 
```

我不明白 rails 如何区分`:edit`和`:show`路由，并相应地映射 url。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:35:39.003

您可以使用以下路线。请记住，它需要不同的文件层次结构，`rake routes`应该是你的朋友。

```
namespace :blog do
  resources :drafts, :controller => :posts, only: [:new, :edit]
  resources :posts, only: :show
end 
```

# javascript - 为什么公共 Web 服务返回 200 OK 但没有 JSON

> ID：13903199
> 
> 赞同：1
> 
> 时间：2012-12-16T16:24:54.553
> 
> 标签：javascript, ajax, jquery

我正在尝试调用此 Web 服务：`http://www.civicapps.org/datasets/restaurant-inspections`

这是我的代码：

```
<script>
            $(document).ready(function() {

                function showInspections() {
                    var data = $.ajax({
                                type : 'GET',
                                url : '//api.civicapps.org/restaurant-inspections/',
                                async : false,
                                dataType : 'json',
                                success: function(data){
                                    if(data.status == "ok"){
                                    alert(data);
                                    }
                                }
                            });     
                        }
                showInspections();
            });
        </script> 
```

Firebug Net>XHR 显示​​“200 Status OK”，但 JSON 数据没有响应。同样，控制台选项卡显示相同的 GET 请求和状态，但其文本为红色。

问题：

*   由于跨域问题，我是否无法以 JSON 格式接收响应数据，即数据应该以 JSONP 而不是 JSON 格式发送？如果是这样，假设响应不会以 JSONP 形式发送，有没有办法仅从我的角度解决这个问题？
*   Firebug 控制台中的红色文本表示什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T16:40:09.960

**由于跨域问题，我是否无法以 JSON 格式接收响应数据，即数据应该以 JSONP 而不是 JSON 格式发送？**

是的。JSONP 实际上与“JSON”（即返回 JSON 格式数据的 AJAX 请求）非常不同。尽管响应看起来非常相似并且在 jQuery 中的实现也非常相似（只需添加一个“p”！），但 JSONP 的实际架构是非常不同的。事实上，JSONP 甚至不是 AJAX（如果 AJAX 是指使用`XMLHttpRequest`. `<script>`JSONP 通过使用涉及动态生成元素的技巧来解决跨域问题。

**如果是这样，假设响应不会以 JSONP 形式发送，有没有办法仅从我的角度解决这个问题？**

幸运的是，没有。*虽然这对您*来说可能是不幸的，但对网络来说却是幸运的。因为如果您可以从客户端解决跨域问题，那么 Web 的安全性就会大大降低。想象一下，你访问了我的网站，一些隐藏的 JavaScript 从 Gmail 下载了你所有的新电子邮件，解析它们，然后将它们发送到我的服务器。如果不是同源政策，这将是可能的。

JSONP 很好，因为它为服务可以选择加入的跨域请求提供了一种解决方法。如果一个服务想要跨域访问，那么它可以用 JSONP 编写。这可以防止不知情的跨域服务，同时允许服务自愿跨域可用性。

**Firebug 控制台中的红色文本表示什么？**

它可能表明违反了同源策略。

# c - C 预处理器根据包含顺序重新定义冲突

> ID：13903201
> 
> 赞同：12
> 
> 时间：2012-12-16T16:25:04.683
> 
> 标签：c, c-preprocessor, redefine

我刚刚在我正在处理的项目中重新定义了冲突，并且在追查为什么它没有在所有平台上发生（结果是包含顺序）时，我偶然发现了以下我无法解释的行为。

### 1\. 编译没有警告

```
 #define LIST_HEAD(a) { int a = 0; }                                                                                                                     
    #include <sys/queue.h>                                                          

    int main() {                                                                    
        return 0;                                                               
    } 
```

### 2.“宏重新定义”警告

```
 #include <sys/queue.h>
    #define LIST_HEAD(a) { int a = 0; }                                                                                                       

    int main() {                                                                    
        return 0;                                                               
    } 
```

我希望这两种情况都会产生警告，因为没有检查`<sys/queue.h>`会阻止重新定义。

那么为什么第一种情况没有警告，而第二种情况呢？我在这里缺少什么？

顺便说一句：我在我的 Mac 上用 clang 和我的 Linux 机器上用 gcc 得到了相同的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T16:44:27.893

默认情况下，此警告在系统标头中被抑制。中的代码`<sys/queue.h>`被认为来自系统头文件，因为*sys/queue.h*是通过搜索标记为包含系统头文件的路径找到的。

因此，在 (2) 中，您会看到警告，因为它是在您的代码中生成的，而在 (1) 中，警告是在*queue.h*中生成的，因此被抑制。添加`-Wsystem-headers`到您的编译选项中，您将在这两种情况下看到警告。

# php - php将csv导入数据库

> ID：13903212
> 
> 赞同：-3
> 
> 时间：2012-12-16T16:25:37.653
> 
> 标签：php, mysql

我有一个包含 65000 条记录的 csv 文件，我需要将其导入到我的数据库中。

我尝试过以下代码，但速度很慢。

无论如何我可以更快地做到这一点。

```
@set_time_limit(1200);
    $file = './csvFiles/aw_Products.csv';
    $handle = fopen( $file , 'r');
    while (($row = fgetcsv($handle)) !== false) {       
        if( is_integer($row[0]) || $row[0] != 0 )
        {
            $product = new Product();
            $product->merchant_id       = $row[0];
            $product->merc_product_id   = $row[1];
            $product->product_id        = $row[2];
            $product->product_name      = $row[3];
            $product->product_desc      = htmlentities($row[4]);
            //$product->keywords            = htmlentities($row[6]);
            $product->category_id       = $row[5];
            $product->link_url          = $row[6];
            $product->image_url         = $row[7];
            $product->price             = $row[8];
            $product->delivery_cost     = $row[9];
            //$product->deliveryAvailable   = $row[12];
            //$product->deliveryDetails = $row[13];
            //$product->valid_to            = $row[14];
            //$product->valid_from      = ($row[3] == 'yes') ? 1 : 0;

            if( Product::find_by_id( $row[0] ) )
                $product->updateRecord();
            else
                $product->createRecord();
        }
        sleep (1);
    }
    fclose($handle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:47:11.107

`sleep()` is probably the culprit. But I am also wondering about this: `Product::find_by_id()` because it might be doing a SELECT query for every INSERT. You might think about making a single SELECT query to get all of the existing DB keys into a PHP array, then you can use *in_array()* to check whether to UPDATE or INSERT. Probably goes without saying, but you will want to add to the PHP array if you INSERT.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:26:36.660

放弃 sleep() 并使用准备好的语句进行 mysql 插入/更新。

# android - 如何实现 saveFragmentInstanceState？

> ID：13903216
> 
> 赞同：1
> 
> 时间：2012-12-16T16:26:08.400
> 
> 标签：android, android-fragments, savestate, back-stack

`saveFragmentInstanceState()`您能否建议我在按下后退按钮时如何实现或其他一些方法来检索片段实例。我使用自己的堆栈作为片段，即代码如下：

```
public class stackA extends ActivityInTab {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.i("StackA", "onCreate");

        if(savedInstanceState == null){
            navigateTo(new fragmentA());
        }

    }
} 
```

接下来是`ActivityInTab`类的实现。我认为这个类必须实现保存和检索片段状态的方法，但我仍然找不到如何做到这一点的方法。

```
abstract class ActivityInTab extends FragmentActivity { 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_in_tab);

        Log.i("ActivityInTab", "onCreate");
    }

    protected void navigateTo(Fragment newFragment) {
        FragmentManager manager = getSupportFragmentManager();
        FragmentTransaction ft = manager.beginTransaction();
        ft.replace(R.id.content, newFragment);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ft.addToBackStack(null);
        ft.commit();
    }
    @Override
    public void onBackPressed() {

        Log.i("ActivityInTab", "onBackPressed");

        FragmentManager manager = getSupportFragmentManager();
        if (manager.getBackStackEntryCount() > 1) {
            super.onBackPressed();
        } else {            
            // Otherwise, ask user if he wants to leave :)
            //showExitDialog();
            super.onBackPressed();
        }
    }
} 
```

最后，这是 Fragments 的实现：

```
public class fragmentA extends Fragment {

    private LinearLayout ll;
    private FragmentActivity fa;

    private String textViewText;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Log.i("Fragment A", "onCreateView");

        fa = super.getActivity();
        ll = (LinearLayout) inflater.inflate(R.layout.fragmenta, container,
                false);
        Button next = (Button) ll.findViewById(R.id.button1);
        Button randomBtn = (Button) ll.findViewById(R.id.random_button);
        final TextView randomText = (TextView) ll
                .findViewById(R.id.random_textview);
        next.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View view) {

                            ((ActivityInTab) getActivity()).navigateTo(new                    
                            fragmentB());
            }
        });

        randomBtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                randomText.setText(String.valueOf(Math.random()));
                textViewText = randomText.getText().toString();
            }
        });

        if (savedInstanceState != null) {
            randomText.setText(savedInstanceState.getString("TextView"));
        }

        return ll;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // setRetainInstance(true);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("TextView", textViewText);
    }
} 
```

我只能使用 保存方向更改的实例状态`onSaveInstanceState(Bundle outState)`，但不能保存后退按钮。

我将非常感谢任何建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:00:07.883

在 onBackPressed 方法中，您可以访问 FragmentManager，它可以使用 FragmentManager 方法“findFragmentById”或“findFragmentByTag”为您检索任何片段。

根据添加片段的方式，您可以使用这两种方法中的任何一种直接访问要保存状态的任何片段。

# c# - Silverlight 4 - 如何从 c# 类访问数据存储元素？

> ID：13903217
> 
> 赞同：2
> 
> 时间：2012-12-16T16:26:09.860
> 
> 标签：c#, silverlight-4.0, datastore

我是新来的 Silverlight，所以即使这是一个简单的问题，也请多多包涵，尽管搜索答案并没有给我任何帮助。

我创建了一个简单的项目，其中有一个数据存储，其属性是值（数字）。我知道在 Expression Blend 中我可以使用行为`SetDataStoreValueAction`来增加，但我需要减少这些值。因此，我需要从将要接收要递减的值的函数中访问我想要从 C# 类中获得的数据存储属性。我已经搜索了有关如何从 C# 类访问数据存储的教程和示例，但没有找到任何有助于如何做到这一点的东西。

所以，如果你能告诉我一个教程或其他可以帮助我学习的东西，我将非常感激。先感谢您

PS-我从 C# 和 Silverlight 开始，但知道如何用 C 和 C++ 编写代码。

# c# - c# GetElementsByTagName 然后如何读取内部标签值

> ID：13903218
> 
> 赞同：2
> 
> 时间：2012-12-16T16:26:13.053
> 
> 标签：c#, wpf, xml, tags, getelementsbytagname

下面是示例 xml

```
<DOC>
<DOCNO>WSJ870323-0180</DOCNO>
<HL>Italy's Commercial Vehicle Sales</HL>
<DD>03/23/87</DD>
<DATELINE>TURIN, Italy</DATELINE>
<TEXT>Commercial-vehicle sales in Italy rose 11.4% in February from a year earlier, to 8,848 units, according to provisional figures from the Italian Association of Auto Makers.</TEXT>
</DOC>

<DOC>
<DOCNO>WSJ870323-0180</DOCNO>
<HL>Italy's Commercial Vehicle Sales</HL>
<DD>03/23/87</DD>
<DATELINE>TURIN, Italy</DATELINE>
<TEXT>Commercial-vehicle sales in Italy rose 11.4% in February from a year earlier, to 8,848 units, according to provisional figures from the Italian Association of Auto Makers.</TEXT>
</DOC> 
```

下面的代码不起作用，为什么？

```
 System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
    doc.Load("docs.xml");

    XmlNodeList elemList = doc.GetElementsByTagName("DOC");
    for (int i = 0; i < elemList.Count; i++)
    {
        string docno = elemList[i].Attributes["DOCNO"].ToString();
    } 
```

C# 4.0 wpf

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T16:41:58.077

使用此代码，假设您有一个有效的根：

```
XmlNodeList elemList = doc.GetElementsByTagName("DOC");
for (int i = 0; i < elemList.Count; i++)
{
    var elements = elemList[i].SelectNodes("DOCNO");
    if (elements == null || elements.Count == 0) continue;
    var firstElement = elements.Item(0);
    var docno = firstElement.InnerText;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T16:50:42.357

使用 Linq To Xml 解析 Xml 要容易得多。例如，

```
var xDoc = XDocument.Load("docs.xml");

var docs = xDoc.Descendants("DOC")
            .Select(x => new{
                DocNo = x.Element("DOCNO").Value,
                Text = x.Element("TEXT").Value
            })
            .ToList(); 
```

# android - 由于多个 APK 版本，无法在应用计费 V3 中为 Android 生成公钥

> ID：13903219
> 
> 赞同：1
> 
> 时间：2012-12-16T16:26:45.157
> 
> 标签：android, google-play, in-app-billing

我想使用新的应用程序计费，但我在播放控制台中使用了多个 APK 功能，因此您获取该密钥的新控制台尚不支持我的应用程序。

![控制台视图](../Images/c69b944ca6c74f6e73b39f782b657703.png)

那么如何获得这样的钥匙呢？有没有人弄清楚这一点？这里也有人问了问题：

[https://plus.google.com/+AndroidDevelopers/posts/R8DKwZDsz5m](https://plus.google.com/+AndroidDevelopers/posts/R8DKwZDsz5m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:30:42.647

停用旧控制台上的 APK，然后切换到新控制台，复制许可证密钥，然后再次切换到旧设计并再次激活 APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:32:06.523

很烂不是吗？如果您使用多个 APK，目前无法获取密钥。我被告知它应该在 G+ 上“很快”修复，没什么可做的，但等待......

v3 感觉还没有完成，我们仍然不知道它在实践中的效果如何。我现在会在一个新的（测试）应用程序中对其进行评估，但暂时不要升级现有的应用程序。虽然库存/获取本地价格很好，而且它确实可以同步工作（您不必等待 GCM 通知购买成功，而且这些通知往往会丢失），这*应该*会提高您的成功率。

顺便说一句，密钥是自动生成的，所以它就在那里，你只是无法得到它。需要注意的另一件事是 v2 需要 Android 2.2，因此如果您想支持 2.1（或 1.6，但相关性较低），您必须保留一个带有 v2 的 APK 版本。

# node.js - 对 JSHint 选项的工作方式感到困惑

> ID：13903220
> 
> 赞同：1
> 
> 时间：2012-12-16T16:27:20.487
> 
> 标签：node.js, jshint

# 问题

我制作了一个示例 JavaScript 文件来说明我的困惑。

```
(function() { console.log(true == true); })() 
```

这应该会引发两个错误；首先使用 of`==`而不是`===`，其次是缺少分号。但是，当我跑步时

```
var jshint = require('jshint').JSHINT;
jshint('(function() { console.log(true == true); })()'); 
```

在 Node REPL 中，当我不希望出现错误时，我会收到错误。我期望没有错误的原因是因为在 JSHint 文档中，它说：

> 第二个参数 [to jshint] 是控制 JSHINT 操作的选项的可选对象。大多数选项都是布尔值：它们都是可选的，默认值为 false。

我希望这不会产生任何错误，因为我没有定义任何选项，所以一切都应该是错误的。意外行为的最后一部分是设置选项似乎什么都不做。以下对 jshint 的两次调用也会产生相同的错误：

```
var myFile = '(function() { console.log(true == true); })()';
jshint(myFile, {eqeqeq: false, asi: false});
jshint('/*jshint eqeqeq:false, asi:false */\n' + myFile); 
```

# 问题

我不确定 JSHint 选项是如何工作的，我很可能会误解文档。我很高兴知道我在`jshint`上面的调用或我的假设中是不正确的，或者 JSHint 是否确实存在问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T22:13:40.590

默认情况下，并非所有选项都处于关闭状态。在我们的文档 (http://www.jshint.com/docs/) 中，您可以看到一些选项是“强制”和一些“放松”[1]。这意味着默认情况下会显示一些警告，您需要启用“放松”选项来关闭它们。

现在，有了这些信息，让我们看看你的第二个问题：

```
/*jshint eqeqeq:false, asi:false */
(function () { console.log(true == true); })() 
```

此代码将触发一个不安全的比较警告`== true`和一个缺少的分号。你试图通过关闭两个选项 eqeqeq 和 asi 来解决这个问题。前者，当设置为 true 时，需要*在任何地方*进行严格比较，并且默认情况下是关闭的，因此您可以省略它。您会收到警告，因为 JSHint 认为`== true/false/0/null`比较不安全，目前无法关闭它（`a == b`例如，不会有警告）[2]。而后一个选项 (asi) 是一个轻松的选项，因此您实际上需要打开它来告诉 JSHint 可以容忍缺少分号。因此，要使您的示例通过，您需要以这种方式进行更改：

```
/*jshint asi:true */
(function () { console.log(true === true); }() 
```

[1] — 我知道这很令人困惑。由于向后兼容性，我不能只改变选项的工作方式，但我正在努力使其不那么混乱。我将很快将每个选项的默认值添加到文档中。

[2] — 即将发布的 1.0.0 版本将允许您忽略其代码的任何警告，即使没有相应的命名选项。

# c# - C# gmail smtp AUTH LOGIN

> ID：13903222
> 
> 赞同：1
> 
> 时间：2012-12-16T16:27:27.537
> 
> 标签：c#, gmail

```
Socket soket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
soket.Connect("gmail-smtp-in.l.google.com", 25);

string addToEnd= "\r\n";

byte[] dataBuffer;
string answer; 

NetworkStream netStream = new NetworkStream(soket);
StreamReader reader = new StreamReader(netStream);
answer = reader.ReadLine();

dataBuffer = BytesFromString("HELO Vlada" + addToEnd);
netStream.Write(dataBuffer, 0, dataBuffer.Length);
answer = reader.ReadLine();

// NEXT CODE is for login but after that i get 502 5.5.1 Unrecognized command. i42si28816556eem.28

dataBuffer = BytesFromString("AUTH LOGIN someUsername" + dodatakNaKraju);
netStream.Write(dataBuffer,0,dataBuffer.Length);
answer = reader.ReadLine(); 
```

所以登录失败。该方法`BytesFromString`只是将 STRING 转换为 ASCII 字节。

我需要它来考试。

# design-patterns - MVVM 视图模型和异步数据初始化

> ID：13903225
> 
> 赞同：8
> 
> 时间：2012-12-16T16:27:43.637
> 
> 标签：design-patterns, windows-phone-8, mvvm, windows-store-apps, mvvm-light

我有一个带有需要服务的构造函数的视图模型。我正在使用 GalaSoft 的 MvvmLight，它使用服务定位器将视图连接到视图模型。

SimpleIOC 可以很好地处理向 viewmodels 构造函数提供服务，但我需要用来自数据源的数据填充我的 viewmodel。我的 Viewmodel 看起来像这样：-

```
 public class MainPageViewModel : ViewModelBase
{
    private readonly GroupService _groupService;
    private readonly GroupFactory _groupFactory;
    private readonly ObservableCollection<GroupVM> _groupVms = new ObservableCollection<GroupVM>();

    public MainPageViewModel(Domain.Services.GroupService groupService, VMFactories.GroupFactory groupFactory)
    {
        _groupService = groupService;
        _groupFactory = groupFactory;
    }

    public async Task Init()
    {
        var groups = await _groupService.LoadGroups();
        foreach (var group in groups)
        {
            GroupVms.Add(_groupFactory.Create(group));
        }
    }

    public ObservableCollection<GroupVM> GroupVms { get { return _groupVms; } }
} 
```

不知何故，init 方法需要被称为等待，但我不知道如何最好地做到这一点？我可以想到三个选项：-

1.  我只是在构造函数上调用 Init，但不等待它（我知道那是非常糟糕的做法）
2.  我在 ViewModelLocator 对象上调用 Init，但由于我无法返回任务，我再次无法等待 init
3.  在视图加载时，我将 DataContext 转换为某种 IAsyncViewmodel 并等待 init 方法。

我在以前的 Windows 8 商店项目中使用过选项 3，但感觉不对。任何建议将不胜感激！

谢谢

罗斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T14:29:25.830

我很好奇为什么您认为不等待异步调用是一种不好的做法。在我看来，只要你知道这意味着什么，调用将在后台执行并且可能随时返回就不错了。

通常我所做的是我在构造函数中调用 async 方法来*创建设计时数据*，并且我不等待它。我只负责在需要更新绑定的地方引发 PropertyChanged 和 CollectionChanged 事件，这样就可以了。

干杯劳伦特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:12:50.240

我不像以前那样熟悉 MvvmLight，但我尝试过以`async`各种方式处理构造函数。

选项 (1) 具有错误处理复杂性。选项 (3) 强制`InitAsync`可访问。

我更喜欢`async`工厂方法（例如，选项（2），它`DataContext`会一直保留`null`到 VM 初始化完成），但听起来好像`ViewModelLocator`不起作用。因此（目前）您必须在`async`不使用 IoC 的工厂和不理想的其他选项之一（1 或 3）之间进行选择。

就个人而言，我会抛弃 IoC 来进行 VM/View 绑定（无论如何我从不使用 IoC；我的视图取决于我的 VM）并使用`async`工厂方法。但是，如果您想留在 IoC，其他选项是完全可行的。对于虚拟机，我认为选项（1）会比选项（3）稍微好一点，如果你的方法中总是有一个顶级`try`/ 。`catch``InitAsync`

# mongodb - MongoDB：当我使用 mongoimport --upsert 时如何加快插入/秒

> ID：13903234
> 
> 赞同：2
> 
> 时间：2012-12-16T16:29:07.817
> 
> 标签：mongodb

我正在使用命令作为

```
mongoimport -h m3 -d staging -c coll --upsert --upsertFields name < part1 
```

我`64-bit`在一台机器上安装了 mongoDB，这就是我在 upserts 方面看到的

```
 1300    433/second
        1900    316/second
        2400    266/second
        2800    233/second
        3100    206/second
        3400    188/second
        3700    168/second
        4000    160/second
        4200    150/second
        4400    141/second
        4600    135/second
        4800    129/second
        5100    124/second
        5300    120/second
        5500    117/second
        5700    114/second
        5900    109/second
        6100    107/second
        6300    105/second
        6500    101/second
        6700    100/second
        6900    97/second
        7100    94/second
        7300    92/second
        7500    90/second
        7700    88/second
        7900    86/second
        8000    85/second
        8200    83/second
        8400    81/second
        8600    80/second
        8700    79/second
        8900    77/second
        9100    75/second
        9300    74/second
        9500    73/second 
```

它几乎变得非常糟糕`32/sec`。我的收藏最初是空的

如何增加每秒插入/更新插入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:00:03.657

您可以在 upsert 中为要查询的字段添加索引。

这将改进更新。

但它不会为插入物做到这一点。无论如何，插入很便宜，并且为了整体提高性能，您可以增加 RAM。（众所周知，MongoDB 使用大量 RAM，如果任务超过可用 RAM，性能会下降很多）

# iphone - iPhone Google Maps app 般的半透明状态栏

> ID：13903241
> 
> 赞同：1
> 
> 时间：2012-12-16T16:29:37.607
> 
> 标签：iphone, ios, xcode

他们如何在新的谷歌地图应用程序上拥有一个半透明的状态栏？根据我一直在尝试的设置：

```
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES]; 
```

不做这项工作。

我想将我的 iPhone 应用程序状态栏设置为半透明，以使其后面的视图可以更改，而不是静态图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:02:25.347

您需要将`wantsFullScreenLayout`UIViewController 上的属性设置为 yes，并将状态栏设置为半透明。

有关完整详细信息，请参阅[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/wantsFullScreenLayout)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:04:07.237

如果您使用的是 xCode 4.5，则目标摘要中有一个设置：

![在此处输入图像描述](../Images/a908e70c9f3d265881f684c1e335511b.png)

# iphone - 精简版设置包

> ID：13903244
> 
> 赞同：-2
> 
> 时间：2012-12-16T16:29:51.397
> 
> 标签：iphone, objective-c, ios

我创建了一个应用程序，它有两个目标，一个精简版和一个完整版。如何在项目中包含不同的设置包？这两个版本始终具有不同的应用名称，例如“aaa”和“aaa lite”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:10:39.167

必须在不同的子文件夹中设置捆绑包，并将一个分配给目标 A，一个分配给目标 B

# vb.net - Visual Basic 逐行读取文件，将每一行存储在 str 中

> ID：13903245
> 
> 赞同：0
> 
> 时间：2012-12-16T16:29:57.257
> 
> 标签：vb.net

我正在尝试遍历文本文件的内容，逐行读取文本文件。在循环过程中有几次我需要使用文件内容。

```
Dim xRead As System.IO.StreamReader
xRead = File.OpenText(TextBox3.Text)

Do Until xRead.EndOfStream
  Dim linetext As String = xRead.ReadLine
  Dim aryTextFile() As String = linetext.Split("  ")

  Dim firstname As String = Val(aryTextFile(0))
  TextBox1.Text = firstname.ToString

  Dim lastname As String = Val(aryTextFile(0))
  TextBox2.Text = lastname.ToString
Loop 
```

**编辑：**我要做的是读取文本文件中的前五个项目执行一些随机处理，然后读取文本文件的下 5 行。

我希望能够使用从文本文件中提取的行作为分隔的字符串变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:27:26.407

根据您的代码示例，不清楚为什么您需要随时存储 5 行，因为您一次只处理一行。如果您认为一次执行 5 行会更快 - 这不太可能，因为 .NET 在内部维护缓存，因此这两种方法可能会执行相同的操作。然而，一次读一行是一种更简单的模式，所以最好先研究一下。

不过，这里是每 5 行处理一次的代码的近似版本：

```
Sub Main()
  Dim bufferMaxSize As Integer = 5
  Using xRead As New System.IO.StreamReader(TextBox3.Text)
    Dim buffer As New List(Of String)
    Do Until xRead.EndOfStream
      If buffer.Count < bufferMaxSize Then
        buffer.Add(xRead.ReadLine)
        Continue Do
      Else
        PerformProcessing(buffer)
        buffer.Clear()
      End If
    Loop
    If buffer.Count > 0 Then
      'if line count is not divisible by bufferMaxSize, 5 in this case
      'there will be a remainder of 1-4 records,
      'which also needs to be processed
      PerformProcessing(buffer)
    End If
  End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-09T15:45:05.847

这是我的。靠轻松。只需将位置从文件和 copy1 文件夹复制到执行位置。这是我的第一个程序:)。准备好为此感到自豪

导入系统.IO

模块模块1

```
Sub Main()

    For Each Line In File.ReadLines("C:\location.txt".ToArray)

        My.Computer.FileSystem.CopyDirectory("C:\Copy1", Line, True)

    Next
    Console.WriteLine("Done")
    Console.ReadLine()
End Sub 
```

端模块

# c - strcpy 的 valgrind 错误

> ID：13903248
> 
> 赞同：4
> 
> 时间：2012-12-16T16:31:17.037
> 
> 标签：c, linux, string, memory, valgrind

此代码应该从 userInput 以 null 结尾的字符串中提取路径

```
 /* begin createPath */
    static inline char* createPath(char * userInput)
    {/* This function retuns the path from the userInput */
            int pathStringLength = 0;
            char *buf = userInput;
            while(*(buf++) != ' ')
                    pathStringLength++;
            char *path = malloc(pathStringLength+1);
            strncpy(path, userInput, pathStringLength);
    //      memcpy(path, userInput, pathStringLength);
            path[pathStringLength+1] = '\0';        
            return path;
    }
    /* end createPath */ 
```

根据 valgrind，这段代码有一个错误：

```
> ==2919== Conditional jump or move depends on uninitialised value(s)
> ==2919==    at 0x400A87: createPath (in /home/aral/learn/myShell/myShell)
> ==2919==    by 0x400A4C: parseInput (in /home/aral/learn/myShell/myShell)
> ==2919==    by 0x4009C3: main (in /home/aral/learn/myShell/myShell)
> ==2919== 
> ==2919== Invalid write of size 1
> ==2919==    at 0x400AC3: createPath (in /home/aral/learn/myShell/myShell)
> ==2919==    by 0x400A4C: parseInput (in /home/aral/learn/myShell/myShell)
> ==2919==    by 0x4009C3: main (in /home/aral/learn/myShell/myShell) 
```

在 stackoverflow 上搜索类似的问题，一些人谈到添加空终止符，而另一些人则提到使用`memcpy`而不是`strcpy`; 无论如何，我正在添加一个 null 并且我尝试使用`memcpy`但没有任何改进，valgrind 一直在抱怨。

我在这里到底做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T16:35:29.390

```
path[pathStringLength+1] = '\0'; 
```

是错的。那是最后一个字节。你的意思是：

```
path[pathStringLength] = '\0'; 
```

如果输入字符串没有空格，您也会遇到缓冲区溢出。检查循环中的空终止符，并在遇到空终止符时终止。我会这样写：

```
while (*buf != ' ' && *buf != '\0')
{
    pathStringLength++;
    buff++;
} 
```

对于它的价值，我认为`memcpy`这里可能是一个更好的选择。一旦你确定了需要复制多少文本，你也可以直接复制它。不需要寻找空终止符的字符串函数。一旦你修复了代码，你就已经检查了它们。

你应该检查`malloc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:37:20.863

您写入`path[pathStringLength+1]`而不是`path[pathStringLength]`- 索引是基于 0 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:39:17.013

`strncpy`使用 as 不是更安全的方法`strcpy`。[男人 strncpy](http://linux.die.net/man/3/strncpy)说，

`The strncpy() function is similar, except that at most n bytes of src are copied. Warning: If there is no null byte among the first n bytes of src, the string placed in dest will not be null-terminated.`

因此，为了保护这一点不会`NULL`在实践中终止，这会有所帮助，

```
strncpy(des, src, len)
des[len -1] = '\0'; 
```

# html - 将一个文本框放置在另一个文本框下方，没有任何间距

> ID：13903249
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:31:29.300
> 
> 标签：html, css

我有 2 个文本框（一个在另一个之上），我想消除它们之间的差距。我想在这个 [运球中实现文本框的外观](http://dribbble.com/shots/859831-login?list=popular&offset=5)

html

```
<div id="User-Details">
    <input type="text" class="textbox-top" id="name" value="Name" />
    <input type="text" class="textbox-bottom" id="email" value="Email" />
</div> 
```

css

```
#User-Details input
{
    padding: 5px;
    color: #999
}

.textbox-top{
    border: 1px solid #aaa;
    border-bottom: none;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
}

.textbox-bottom{
    border: 1px solid #aaa;
    border-top: none;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:37:49.227

试试这样，很简单

[**演示**](http://jsfiddle.net/DyYX4/)

HTML

```
<div>
    <input type="text" placeholder="Username" /><br>
    <input type="text" placeholder="Password" />
</div> 
```

CSS

```
div {
    position: relative;
    height: 80px;
    width: 300px;
    margin: 20px;
}

input[type=text] {
    padding: 5px;
    border: 1px solid #eeeeee;
}

input[type=text]:nth-child(1) {
    border-bottom: 0;
} 
```

# javascript - Ember.js + Rails 出错 - 未定义的“Ember.Router.extend”

> ID：13903256
> 
> 赞同：0
> 
> 时间：2012-12-16T16:32:11.997
> 
> 标签：javascript, ruby-on-rails, ember.js

我尝试了无数关于 Rails 后端和 Ember.js 的教程，每次我遇到错误时：

```
TypeError: 'undefined' is not an object (evaluating 'Ember.Router.extend') 
```

有没有人有使用 Rails 3.2 和 ember-rails gem 显示正确路由的工作代码？

ps 即使使用 ember-rails 命令生成的默认路由，我也会遇到此错误：

```
rails g ember:bootstrap 
```

ps2。是的，我有 jQuery - 其他功能可以正常工作，只有 Ember.Router 不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:52:21.353

如果您在编写应用程序方面还没有走多远，请尝试尝试以下脚本：

跑`rails new app_name -m http://emberjs.com/template.rb`

添加`config.ember.variant = :development`到 config/application.rb

跑`rails g ember:install --head`

现在你应该有一个包含 ember 和 ember-data 的工作 Rails 应用程序，以及 assets/javascripts 下的 embers MVC 结构。

干杯!

Ps 不要忘记下载把手并将 store.js 文件更新到最新版本（截至本文为 10 个）

另外，去咖啡脚本。除非您是顽固的牙套粉丝，否则它更具可读性。

# image - HTML5画布，绘制后缩放图像

> ID：13903257
> 
> 赞同：11
> 
> 时间：2012-12-16T16:32:17.617
> 
> 标签：image, html, canvas, scale

我正在尝试缩放已经绘制到画布中的图像。这是代码：

```
 var canvas = document.getElementById('splash-container');
      var context = canvas.getContext('2d');
      var imageObj = new Image();

      imageObj.onload = function() {
        // draw image at its original size
        context.drawImage(imageObj, 0, 0);
      };
      imageObj.src = 'images/mine.jpeg';

        // Now let's scale the image.
        // something like...
        imageObj.scale(0.3, 0.3); 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-16T17:21:10.490

你想错了。一旦你将图像绘制到`canvas`它上面，它就与对象没有关系`imageObj`。您所做的任何事情都`imageObj`不会影响已经绘制的内容。如果要缩放图像，请在[`drawImage`函数](https://developer.mozilla.org/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)中执行：

```
drawImage(imgObj, 0, 0, imgObj.width * 0.3, imgObj.height * 0.3) 
```

如果您想为缩放设置动画或希望获得一些其他效果，这需要您最初以全尺寸绘制图像，您必须先[清除它，](http://tutorials.jenkov.com/html5-canvas/clearrect.html)然后再绘制按比例缩小的图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T06:22:31.047

robertc 说的是正确的，但是如果您真的想在出于某种原因绘制*后*在画布上缩放图像，您可以使用 CSS 宽度/高度属性缩放整个画布，这样就可以缩放图像而无需重绘它.

# ruby - Xpath：直到一个节点的所有节点（Wikiquote.org）

> ID：13903270
> 
> 赞同：1
> 
> 时间：2012-12-16T16:33:51.887
> 
> 标签：ruby, xpath, nokogiri, xpath-2.0, wikimedia

**文件：** [http ://en.wikiquote.org/wiki/The_Matrix](http://en.wikiquote.org/wiki/The_Matrix)

我想获取第一部分的所有引号（//ul/li）（Neo 的引号）。

我不能这样做`//ul[1]/li`，因为在某些 wikiquote 的页面中，引用以这种形式表示

```
<h2><span class="mw-headline" id="Neo">Neo</span></h2>  

<ul>
 <li> First quote </li>
</ul> 

<ul>
 <li> Second quote </li>
</ul> 

<h2><span class="mw-headline" id="dont wanna this">Useless</span></h2> 
```

代替

```
<ul>
     <li> First quote </li>
     <li> Second quote </li>
</ul> 
```

我试过这个来获得**第一部分**

```
(//*[@id='mw-content-text']/ul/preceding-sibling::h2/span[@class='mw-headline'])[1] 
```

但我无法仅获取第一部分的报价。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:38:31.087

**使用**：

```
(//h2[span/@id='Neo'])[1]/following-sibling::ul
  [count(.
        |
         (//h2[span/@id='Neo'])[1]
            /following-sibling::h2[1]
              /preceding-sibling::ul
         )
  =
   count((//h2[span/@id='Neo'])[1]
            /following-sibling::h2[1]
              /preceding-sibling::ul
         )
  ]
   /li 
```

这将选择所有`li`紧跟第`h2`一个的`span`子节点，该子节点的`id`属性值为“Neo”。

要选择第二个这样的 qoutatations `h2`，只需将上面的表达式替换`1`为`2`。

对所有数字执行此操作：`1,2, ..., count(//h2[span/@id='Neo'])`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "(//h2[span/@id='Neo'])[1]/following-sibling::ul
      [count(.
            |
             (//h2[span/@id='Neo'])[1]
                /following-sibling::h2[1]
                  /preceding-sibling::ul
             )
      =
       count((//h2[span/@id='Neo'])[1]
                /following-sibling::h2[1]
                  /preceding-sibling::ul
             )
      ]
        /li

   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<html>
 <h2><span class="mw-headline" id="Neo">Neo</span></h2>

 <ul>
  <li> First quote </li>
 </ul>

 <ul>
  <li> Second quote </li>
 </ul>

 <h2><span class="mw-headline" id="dont wanna this">Useless</span></h2>  >
</html> 
```

**计算 XPath 表达式，并将选定的节点复制到输出：**

```
<li> First quote </li>
<li> Second quote </li> 
```

**说明**：

这来自两个节点集的交集的 Kayessian（Michael Kay 博士）公式：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

上面恰好选择了同时属于 nodeset`$ns`和 nodeset 的所有节点`$ns2`。

因此，我们替换`$ns1`为由所有感兴趣的后续兄弟组成的节点`ul`集`h2`。我们`$ns2`用包含所有前面兄弟节点的节点集`ul`替换，`h2`即感兴趣的直接（第一个）跟随兄弟节点`h2`。

这两个节点集的交集正好包含所有`ul`需要的元素。

* * *

**更新**：在评论中，OP 声明他只知道他希望结果来自第一部分——字符串“Neo”是未知的。

**这是修改后的解决方案**：

```
(//h2[span/@id=$vSectionId])[1]
            /following-sibling::ul
  [count(.
        |
         (//h2[span/@id=$vSectionId])[1]
            /following-sibling::h2[1]
              /preceding-sibling::ul
         )
  =
   count((//h2[span/@id=$vSectionId])[1]
            /following-sibling::h2[1]
              /preceding-sibling::ul
         )
  ]
    /li 
```

**该变量`$vSectionId`必须作为以下 XPath 表达式的字符串值获取：**

```
 substring(//div[h2='Contents']
              /following-sibling::ul[1]
                 /li[1]/a/@href,
            2) 
```

在这里，我们`id`从第一个目录条目中的 中获取所需内容，并跳过第一个字符“#” `href`。`a`

**这里又是一个基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vSectionId" select=
 "substring(//div[h2='Contents']
                      /following-sibling::ul[1]
                         /li[1]/a/@href,
                    2)
 "/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "(//h2[span/@id=$vSectionId])[1]
                /following-sibling::ul
      [count(.
            |
             (//h2[span/@id=$vSectionId])[1]
                /following-sibling::h2[1]
                  /preceding-sibling::ul
             )
      =
       count((//h2[span/@id=$vSectionId])[1]
                /following-sibling::h2[1]
                  /preceding-sibling::ul
             )
      ]
        /li

   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于位于 [http://en.wikiquote.org/wiki/The_Matrix](http://en.wikiquote.org/wiki/The_Matrix)的完整 XML 文档时，应用这两个 XPath 表达式的结果（将第一个的结果替换为第二个，然后评估第二个表达式）是想要的，正确的一个**：

```
<li>I know you're out there. I can feel you now. I know that you're afraid. You're afraid of us. You're afraid of change. I don't know the future. I didn't come here to tell you how this is going to end. I came here to tell you how it's going to begin. I'm going to hang up this phone, and then I'm going to show these people what you don't want them to see. I'm going to show them a world … without you. A world without rules and controls, without borders or boundaries; a world where anything is possible. Where we go from there is a choice I leave to you.</li>
<li>Whoa.</li>
<li>I know kung-fu.</li>
<li>Yeah. Well, that sounds like a pretty good deal. But I think I may have a better one. How about, I give you the finger [He does] and you give me my phone call.</li>
<li>Guns.. lots of guns...</li>
<li>There is no spoon.</li>
<li>My name...is Neo!</li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T23:53:54.027

使用 API 将使其更容易解析。这是一个将提取第一部分的查询：

[http://en.wikiquote.org/w/api.php?action=parse&page=The_Matrix§ion=1&prop=wikitext](http://en.wikiquote.org/w/api.php?action=parse&page=The_Matrix&section=1&prop=wikitext)

输出：

```
<?xml version="1.0"?>
<api>
  <parse title="The Matrix">
    <wikitext xml:space="preserve">== Neo ==
[[File:The.Matrix.glmatrix.2.png|thumb|right|Unfortunately, no one can be ''told'' what The Matrix is. You have to see it for yourself.]]
[[Image:Arty spoon.jpg|thumb|right|Do not try to bend the spoon — that's impossible. Instead, only try to realize the truth: there is no spoon.]]

* I know you're out there. I can feel you now. I know that you're afraid. You're afraid of us. You're afraid of change. I don't know the future. I didn't come here to tell you how this is going to end. I came here to tell you how it's going to begin. I'm going to hang up this phone, and then I'm going to show these people what you don't want them to see. I'm going to show them a world … without you. A world without rules and controls, without borders or boundaries; a world where anything is possible. Where we go from there is a choice I leave to you.

* Whoa.
* I know kung-fu.

* Yeah. Well, that sounds like a pretty good deal. But I think I may have a better one. How about, I give you the finger [He does] and you give me my phone call.

* Guns.. lots of guns...

* There is no spoon. 

* My name...is Neo!</wikitext>
  </parse>
</api> 
```

这是解析它的一种方法（使用[HTTParty](http://httparty.rubyforge.org/)）：

```
require 'httparty'

class Wikiquote
  include HTTParty
  base_uri 'en.wikiquote.org/w/'

  def self.get_quotes(page)
    url = "/api.php?action=parse&page=#{page}&section=1&prop=wikitext&format=xml"
    headers = {"User-Agent" => "Wikiquote scraper 1.0"}
    content = get(url, headers: headers)['api']['parse']['wikitext']['__content__']
    return content.scan(/^\* (.*)$/).flatten
  end
end 
```

用法：

```
Wikiquote.get_quotes("The_Matrix") 
```

输出：

```
["I know you're out there. I can feel you now. I know that you're afraid. You're afraid of us. You're afraid of change. I don't know the future. I didn't come here to tell you how this is going to end. I came here to tell you how it's going to begin. I'm going to hang up this phone, and then I'm going to show these people what you don't want them to see. I'm going to show them a world … without you. A world without rules and controls, without borders or boundaries; a world where anything is possible. Where we go from there is a choice I leave to you.",
 "Whoa.",
 "I know kung-fu.",
 "Yeah. Well, that sounds like a pretty good deal. But I think I may have a better one. How about, I give you the finger [He does] and you give me my phone call.",
 "Guns.. lots of guns...",
 "There is no spoon. ",
 "My name...is Neo!"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:14:33.563

我建议`//ul[preceding-sibling::h2[1][span/@id = 'Neo']]/li`。或者，如果该`id`属性也没有分别与搜索无关，那么根据评论中的答案，我认为你想要

```
(//h2[span[contains(@class, 'mw-headline')]])[1]/following-sibling::ul
   [1 = count(preceding-sibling::h2[1] | (//h2[span[contains(@class, 'mw-headline')]])[1])]/li 
```

请参阅[XPath 轴，获取所有后续节点，直到](https://stackoverflow.com/questions/4767430/xpath-axis-get-all-following-nodes-until)获得解释，我希望我已经设法正确关闭所有括号和大括号，现在没有时间测试。

# php - WordPress 联系表格电子邮件为 PDF

> ID：13903271
> 
> 赞同：1
> 
> 时间：2012-12-16T16:33:58.303
> 
> 标签：php, html, wordpress, pdf-generation

我正在为我的 WordPress 网站使用以下代码，该网站将所有表单详细信息作为 HTML 文本通过电子邮件发送，但我需要先将详细信息写入 PDF，然后必须将 PDF 作为附件通过电子邮件发送。我怎样才能做到这一点？这不是使用 PHP 的 writePDF 模块的 PHP 代码。那么，有什么想法或任何代码来实现这个吗？

```
<div style="padding-left: 100px;">

[raw]
[contact-form subject="Best Aussie Broker" to="karsmalla@gmail.com"]
<div id="main34" style="border: 1px solid black; border-radius: 15px; width: 720px; padding: 15px;">

&nbsp;
<h2><span style="color: #ff6600;">Express Application</span></h2>
&nbsp;

[contact-field label="First Name" type="name" required="true" /]
[contact-field label="Last Name" type="text" /]
[contact-field label="Email" type="email" required="true" /]
[contact-field label="Purpose of Finance?" type="select" options="Home Loan,Refinance,Investment Loan,Debt Consolidation,Other" /]
[contact-field label="Your deposit amount" type="text" /]
[contact-field label="Amount you need to borrow?" type="text" /]

[contact-field label="Brief description of the purpose for finance" type="textarea" required="true" /]
<div><label></label>
<input class="radio" type="radio" name="19" value="Single Application" onchange="showsingle();" />
<label class="radio">Single Application</label>
<div class="clear-form"></div>
<input class="radio" type="radio" name="19" value="Joint Application" onchange="showjoint();" />
<label class="radio">Joint Application</label>
<div class="clear-form"></div>
[contact-field label="Privacy Act" type="checkbox" required="true" /]
I have read the Privacy Act 1988 (as Amended) and understand that by selecting the submit button I/we Authorize Best Aussie Broker to act on my/our behalf and manage personal information in relation to this application.<br>
<a href="http://googleplex.com.au/pdf.pdf"><img src="http://googleplex.com.au/pdf.png" alt="" /> </a>

</div>
</div>
<div id="single" style="display: none; width: 720px; border: 1px solid black; border-radius: 15px; padding: 15px; margin-top: 10px;">
<div style="padding-top: 10px; width: 720px; text-align: left;">
<h4><span style="color: #ff6600;">Last step then we will get all listed Australian vendors to fight it out for your
best deal</span></h4>
</div>
<div>

<label class="select" for="19-date-of-birth">Date of Birth</label>

[contact-field label="Day" type="select" options="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31" /]

[contact-field label="Month" type="select" options="January,February,March,April,May,June,July,August,September,October,November,December" /]

[contact-field label="Year" type="select" options="2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,197,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920, 1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909" /]

</div>
[contact-field label="Address" type="text" /]
[contact-field label="Suburb" type="text" /]
[contact-field label="Postcode" type="text" /]
<div>

[contact-field label="State" type="select" options="VIC,NSW,QLD,SA,WA,TAS,NZ,Other" /]

</div>
[contact-field label="Best Contact" type="radio" options="Landline,Mobile" /]
[contact-field label="Phone Number" type="text" /]

[contact-field label="Marital Status" type="select" options="Married,Single,Other" /]
[contact-field label="Residential Status" type="select" options="Renting, Home Owned, Home Mortgage, Board, Other" /]
[contact-field label="Children/Dependents" type="select" options="0,1,2,3,4,5,6" /]
<div></div>
[contact-field label="Gross Yearly Income" type="text" /]

[contact-field label="Current Employer" type="text" /]
<div>

<label class="select" for="19-year-of-empl">Time at this employer</label>

[contact-field label="Year" type="select" options="0,1,2,3,4,5,6,7,8,9,10,More" /]

[contact-field label="Month" type="select" options="0,1,2,3,4,5,6,7,8,9,10,11,12" /]

</div>
<div style="padding-right: 15px;"></div>
</div>
<div id="joint" style="display: none; width: 720px; border: 1px solid black; border-radius: 15px; padding: 15px; margin-top: 10px;">
<div style="padding-top: 10px; width: 720px; text-align: left;">
<h4><span style="color: #ff6600;">Last step then we will get all listed Australian vendors to fight it out for your
best deal</span></h4>
</div>
<div style="float: left; width: 320px;">
<div>

<label class="select" for="19-date-of-birth1">Date of Birth</label>

[contact-field label="Day" type="select" options="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31" /]

[contact-field label="Month" type="select" options="January,February,March,April,May,June,July,August,September,October,November,December" /]

[contact-field label="Year" type="select" options="2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,197,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920, 1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909" /]

</div>
[contact-field label="Address" type="text" /]
[contact-field label="Suburb" type="text" /]
[contact-field label="Postcode" type="text" /]
<div>

[contact-field label="State" type="select" options="VIC,NSW,QLD,SA,WA,TAS,NZ,Other" /]

</div>
[contact-field label="Best Contact" type="radio" options="Landline,Mobile" /]
[contact-field label="Phone Number" type="text" /]
<div></div>
<div></div>
[contact-field label="Marital Status" type="select" options="Married,Single,Other" /]
[contact-field label="Residential Status" type="select" options="Renting, Home Owned, Home Mortgage, Board, Other" /]
[contact-field label="Children/Dependents" type="select" options="0,1,2,3,4,5,6" /]
<div></div>
<div><label class="text" for="netincome">Net Income</label>
<input id="netincome" type="text" name="netincome" /> <select id="netincome-dropdown" name="netincome-dropdown"> <option>Monthly</option> <option>Yearly</option> </select></div>
[contact-field label="Current Employer" type="text" /]
<div>

<label class="select" for="19-year-of-empl2">Time at this employer</label>

[contact-field label="Year" type="select" options="0,1,2,3,4,5,6,7,8,9,10,More" /]

[contact-field label="Month" type="select" options="0,1,2,3,4,5,6,7,8,9,10,11,12" /]

</div>
</div>
<div style="float: right; width: 320px; padding-right: 50px;">
<div>

<label class="select" for="19-date-of-birth3">Date of Birth</label>

[contact-field label="Day" type="select" options="1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31" /]

[contact-field label="Month" type="select" options="January,February,March,April,May,June,July,August,September,October,November,December" /]

[contact-field label="Year" type="select" options="2000,1999,1998,1997,1996,1995,1994,1993,1992,1991,1990,1989,1988,1987,1986,1985,1984,1983,1982,1981,1980,1979,1978,197,1976,1975,1974,1973,1972,1971,1970,1969,1968,1967,1966,1965,1964,1963,1962,1961,1960,1959,1958,1957,1956,1955,1954,1953,1952,1951,1950,1949,1948,1947,1946,1945,1944,1943,1942,1941,1940,1939,1938,1937,1936,1935,1934,1933,1932,1931,1930,1929,1928,1927,1926,1925,1924,1923,1922,1921,1920, 1919,1918,1917,1916,1915,1914,1913,1912,1911,1910,1909" /]

</div>
[contact-field label="Address" type="text" /]
[contact-field label="Suburb" type="text" /]
[contact-field label="Postcode" type="text" /]
<div>

[contact-field label="State" type="select" options="VIC,NSW,QLD,SA,WA,TAS,NZ,Other" /]

</div>
[contact-field label="Best Contact" type="radio" options="Landline,Mobile" /]
[contact-field label="Phone Number" type="text" /]
<div></div>
<div></div>
[contact-field label="Marital Status" type="select" options="Married,Single,Other" /]
[contact-field label="Residential Status" type="select" options="Renting, Home Owned, Home Mortgage, Board, Other" /]
[contact-field label="Children/Dependents" type="select" options="0,1,2,3,4,5,6" /]
<div></div>
<div><label class="text" for="netincome">Net Income</label>
<input id="netincome" type="text" name="netincome" /> <select id="netincome-dropdown" name="netincome-dropdown"> <option>Monthly</option> <option>Yearly</option> </select></div>
[contact-field label="Current Employer" type="text" /]
<div>

<label class="select" for="19-year-of-empl">Time at this employer</label>

[contact-field label="Year" type="select" options="0,1,2,3,4,5,6,7,8,9,10,More" /]

[contact-field label="Month" type="select" options="0,1,2,3,4,5,6,7,8,9,10,11,12" /]

</div>
</div>
<div style="clear: both;"></div>
<div></div>
</div>
&nbsp;

[/contact-form][/raw]

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:01:50.413

以前有人问过这个问题。

[使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

PrinceXML 看起来非常不可思议，它甚至会在转换之前执行 JavaScript 并应用 CCS3 转换！

WKHTMLTOPDF 看起来也是一个不错的选择。无论使用哪种方法，您都必须将呈现的 HTML 写入磁盘，然后使用该实用程序。

# php - 用于扩展的 Doctrine2 额外列或表

> ID：13903275
> 
> 赞同：1
> 
> 时间：2012-12-16T16:35:23.700
> 
> 标签：php, orm, doctrine-orm, doctrine-extensions

我想制作 Doctrine 2 扩展，这将为实体添加一个额外的字段。我还需要新桌子。字段和表格将基于我添加到该实体的自定义注释。我认为必须以某种方式添加它`loadClassMetadata`以防万一。

您能提供一些信息如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T14:25:59.310

我找到了。

事件订阅者也可以订阅 ORM 工具事件，例如`postGenerateSchemaTable`事件。

```
public function getSubscribedEvents()
{
    return array(
        Doctrine\ORM\Tools\ToolEvents::postGenerateSchemaTable,
        Doctrine\ORM\Tools\ToolEvents::postGenerateSchema,
    );
} 
```

如果您可以获得架构对象，并在那里插入修改它

```
$schema = $eventArgs->getSchema();
$schema->createTable( ... ) 
```

# c# - KendoUI 树视图：远程数据问题

> ID：13903279
> 
> 赞同：0
> 
> 时间：2012-12-16T16:36:08.877
> 
> 标签：c#, javascript, asp.net-mvc, razor, kendo-treeview

我有一个 KendoTreeview。我正在使用 MVC4 和 KendoUI 的最新版本。我也在使用 sql server 和 C#

假设我有一个名为“MyDB”的数据库，该数据库中有一个名为“Products”的表。

表“产品”： ID -- int -- pk Name -- nvarchar(50) Parent -- int -- FK

我想要一个产品有子产品...

好的，现在在控制器中我有：

```
 public JsonResult ProductsForTreeView(int? id)
    {
         var dataContext = new ProductsDBContext();
         var products = from e in dataContext.Products
               where (  id.HasValue ? e.Parent == id : e.Parent == 0) 
               select new
                          {
                              id = e.Id,
                              Name = e.Name,
                              hasChildren = e.Id
                          };

 return Json(products , JsonRequestBehavior.AllowGet);
    } 
```

和观点：

```
@(Html.Kendo().TreeView()
      .Name("treeview")
      .DataTextField("Name")
      .HighlightPath(true)
      .DataSource(dataSource => dataSource
                                    .Read(read => read
                                                      .Action("ProductsForTreeView", "SiteMap")
                                    )
      )
    ) 
```

这可以正常工作并正确显示树视图（几乎！），除了树视图在每个节点旁边显示 + ......无论它是否有子节点。

要么我需要修改我的 LINQ，要么甚至使用一些 JavaScript 来删除没有子元素的“+”...

“+”的类名是“k-icon k-plus”。

如何阻止树视图将此“+”附加到每个节点？它应该只显示给有子节点的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:59:36.807

我认为问题在于您返回的**JSON**。***如果您的.hasChildren***属性设置为**true**，它将添加 expand('+') 图标。

所以你的***.hasChildren*****属性应该有一个布尔值，只有当**该节点有子/子时才表示 true 。在您的情况下，您使用了我认为不是布尔值的***e.Id 。***

尝试这个：

```
hasChildren = e.Products.Any() 
```

或者查看他们的文档。 [http://demos.kendoui.c​​om/web/treeview/remote-data.html](http://demos.kendoui.com/web/treeview/remote-data.html)

希望这可以帮助。

# c++ - 隐藏第三方 C++ 头文件的内容

> ID：13903280
> 
> 赞同：7
> 
> 时间：2012-12-16T16:36:21.363
> 
> 标签：c++, hide, static-libraries, header-files

我正在用 C++ 创建一个静态库来定义一个其他人可以在他们的代码中使用的类。但是，该类的成员是在从其他人获得的头文件中定义的类型，我不想分发此人的头文件的内容。

这是当前的公共接口（interface.h）：

```
class B {
    TypeToHide t;
    // other stuff ...  
};

class A {
    double foo();
    B b;
}; 
```

这是将被编译成静态库（code.cpp）的代码：

```
double A::foo() {
    // ...
} 
```

这是我需要从公众视野中隐藏其内容的文件（HideMe.h）：

```
struct TypeToHide {
    // stuff to hide
}; 
```

如何隐藏 HideMe.h 的内容？理想情况下，我可以将 HideMe.h 中的整个结构粘贴到 code.cpp 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T16:37:54.257

你可以使用 PIMPL 成语（Chesshire Cat，Opaque Pointer，随便你怎么称呼它）。

就像现在的代码一样，您无法隐藏`TypeToHide`. 替代方案是这样的：

```
//publicHeader.h
class BImpl;          //forward declaration of BImpl - definition not required
class B {
    BImpl* pImpl;     //ergo the name
    //wrappers for BImpl methods
};

//privateHeader.h
class BImpl
{
    TypeToHide t;  //safe here, header is private
    //all your actual logic is here
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T17:16:39.490

比 Pimpl 更简单，您可以使用指向它的指针`TypeToHide`和[前向声明](https://stackoverflow.com/a/553869/157274)：

```
class B {
    TypeToHide* t;
    // other stuff ...  
}; 
```

只要您不需要了解用户代码的 t 内部结构，您就不必公开它，它会在您的库中保持安全。
库中的代码必须知道是什么`TypeToHide`，但这不是问题。

# regex - pig：如何提取一个包含所有字符的元组？

> ID：13903285
> 
> 赞同：0
> 
> 时间：2012-12-16T16:37:08.850
> 
> 标签：regex, apache-pig

我有一个 my_string = '12345' 的元组，我想把它变成这个元组：('1','2','3','4','5')。

试过：`REGEX_EXTRACT_ALL(my_string, '(.)')`只得到（1）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:53:49.017

使用 Replace 将其变为 (1,2,3,4,5,6)。

```
REPLACE(my_string,'(?<!^)(.)',',$1'); 
```

# c# - Populate silverlight grid from a text file

> ID：13903291
> 
> 赞同：0
> 
> 时间：2012-12-16T05:02:03.833
> 
> 标签：c#, silverlight, grid

Friends, I have a requirement I am given a text file with fixed number of columns but row varies, I should read that and populate that in grid/table using Silverlight. The text file will have data something like this:

```
0, 0, 2, 1, "url1", description1 
1, 0, 2, 2, "url2", description2 
1, 1, 4, 2, "url3", description2 
```

As we can see columns are fixed but row can vary.

Now I want my Silverlight app to read this file from system and populate in grid/table like:

```
RowNo ColumnNo Width Height ImageURL Description 

0        0       2     1       url1  Description1 
1        0       2     2       url2  Description2 
1        1       4     2       url3  Description3 
```

I tried reading the file using `Streamreader` but it's showing SecurityException error `SecurityExceptionHandler was unhandled by user code File operation not permitted. Access to path "c:\path\file.txt" is denied`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:52:50.227

You cannot access the filesystem directly for security reasons, unless the Silverlight application runs in Out-Of-Browser mode.

In a Silverlight web application, accessing the filesystem can be done only when the user initiates such an action. See [How to: Use the Open File Dialog Box](http://msdn.microsoft.com/en-us/library/cc221415%28v=vs.95%29.aspx) on MSDN.

# google-app-engine - [google-app-engine]Cron Error - Launching tasks every few seconds instead of the specified frequency

> ID：13903294
> 
> 赞同：0
> 
> 时间：2012-12-16T16:38:00.210
> 
> 标签：google-app-engine, cron

I run an application that usually triggers a heavy update every 2 hours, by queuing heavy tasks, using the cron mecanism. This has been working well for months.

However, the december 16th of 2012, this url has been called (by user-agent AppEngine-Google) every few seconds between 15:17 and 15:51, launching hundreds of heavy tasks. This resulted in an explosion of my quotas and forced me to switch to the paid version of the application, in order for my website to stay alive.

Anybody having the same issue? Any idea of what happened and how I could avoid this problem in the future?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:24:04.607

我遇到过同样的问题。

我没有答案，但我认为这是一个任务队列问题。

我有 4 个 cron 作业和一些任务队列任务堆积如山。直到 14:05Z（太平洋标准时间 16 日 6:05？）之前，一切都很正常。

在 14:06Z 和 14:07Z，我的两个 cron 作业被调用（在它们的预定时间）并以 200 完成。之后，AppEngine-Google 开始每分钟调用几次相同的作业。14:50Z 后紊乱消失了，现在没有问题。

在此期间，我的一个任务队列任务在 14:11Z 被调用并以 503 结束（这是预期的失败）。该任务计划在几个小时后重试，但在一小时内被调用了数百次。任务的重试计数未增加。

我的猜测是任务队列中出了点问题（“__cron”，对我来说，“默认”），直到 14:50Z 才删除任务。

* * *

我的应用程序的应用程序 ID 是 vidssage。

# excel - How can I make a URL shortener in Visual Basic that uses a URL shortener API?

> ID：13903295
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:37:59.530
> 
> 标签：excel, visual-studio, vba, api

I want to make a URL shortener that uses and online URL shortener API.

I want to use this API here -> http:// cut2.tk/api-about.php

So the API code is this:

[http://cut2.tk/api.php?url=](http://cut2.tk/api.php?url=) LONG URL HERE

I want to use an user form with two text boxes and two buttons.

The first button is to short URL and the second to copy the short URL from the second textbox.

The first text box is where I'm going to paste the long URL, and the second textbox is where I'm going to get the short URL after I press the short URL button.

Like this:

[![Image](../Images/95bcb43840c471dbc2e77563ebbaaf0f.png)](https://i.stack.imgur.com/ofTvV.jpg)

How can I make the project or the code?

I'm using Microsoft Excel Developer Visual Basic.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:44:33.470

这将为您使用 API，这是您最初要求的：

```
Sub getShortURL()
    Dim objHTTP, URL
    Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")
    URL = "http://cut2.tk/api.php?url=" & Me.LongUrl.Value
    objHTTP.Open "POST", URL, False
    objHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
    objHTTP.send ("")
    Me.ShortURL.Value = objHTTP.responseText
End Sub 
```

# c++ - Convert from LPWSTR to LPTSTR

> ID：13903297
> 
> 赞同：4
> 
> 时间：2012-12-16T16:38:02.463
> 
> 标签：c++

Im trying to convert arguments LPWSTR to LPTSTR, it there any library I can user for easy string convertion?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T16:58:59.427

如果`_UNICODE`已定义，则无需转换 - a`TCHAR` 是 a `WCHAR`，并且`LPWSTR`是`LPTSTR`; 否则，`TCHAR`是 a `CHAR`，并且`LPTSTR`是`LPSTR`。在最后一种情况下，您可以使用[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx) API 将一个`LPWSTR`（即 Unicode 字符串）转换为“窄”字符串。

此外，您可以使用`wcstombs`C 库函数，假设 Windows 类型`CHAR`并`WCHAR`映射到 C 类型`char`和`wchar_t`（在 VC++ 中肯定是这种情况），并且当前 C 语言环境是您打算用于转换的语言环境。

* * *

另请参阅*Alf*的评论以了解有关此问题的更多见解-最重要的一点是，*如果可以的话，您应该避免这种转换*，因为您的输出编码通常不能忠实地表示输入，并且根据您的字符串所代表的内容，这可能意味着乱码文本以及找不到所需的文件，或者更糟糕的是，在错误的路径上操作。

因此，将您的项目设置为使用 Unicode（如*@prazuber*的回答）并始终尝试使用支持 Unicode 的 API，以避免这种转换。

不过，请记住，仅使用 Unicode 版本的 Windows API 可能意味着失去与 Windows 9x 的兼容性；这对于绝大多数情况来说都不是问题，但是如果在您的应用程序中支持此类操作系统至关重要，请检查您使用的 API 是否在[MSLU](http://msdn.microsoft.com/en-us/goglobal/bb688166.aspx)中受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T16:51:57.497

LPTSTR 定义如下：

```
#ifdef UNICODE
 typedef LPWSTR LPTSTR;
#else
 typedef LPSTR LPTSTR;
#endif 
```

因此，您需要做的就是将字符集切换为 Unicode。例如，在 Visual Studio 中，您转到*Configuration Properties* -> *General* -> *Character Set* -> *Use Unicode Character Set*。

# html - Issue with CSS, HTML and background colors.

> ID：13903298
> 
> 赞同：0
> 
> 时间：2012-12-16T16:38:04.843
> 
> 标签：html, css, colors, background

I have the following issue.

I have 2 sets of checkboxes with a title for each. That title is supposed to have a grey background, then the checkboxes area should have no color in the background.

The issue is that if I put only 1 set of checkboxes with its title, the backgrounds work good.

However, when I put the 2nd set of checkboxes, the checkboxes area of the 1st set has a grey background and seems to be inheriting the bg of the title of the 2nd set.

Here is the code. Any clue?

Thanks!

```
<div class="bgFilterTitles">
    <h1 class="filterTitles">COLOR</h1>
</div>
<div class="boxes">
<?php
   $colors = $con -> prepare("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1 ASC");
   $colors ->execute();
   while ($colorBoxes = $colors->fetch(PDO::FETCH_ASSOC))
   {
     echo "<input type='checkbox' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
   }
?>
</div>

<div class="bgFilterTitles">
    <h1 class="filterTitles">PRICE</h1>
</div>
<div class="boxes">
<?php
   $prices = $con -> prepare("SELECT DISTINCT price FROM item_descr ORDER BY price ASC");
   $prices ->execute();
   while ($priceSort = $prices->fetch(PDO::FETCH_ASSOC))
   {
      echo "<input type='checkbox' class='regularCheckbox' name='price' value='".$priceSort[price]."' /><font class='similarItemsText'>   ".$priceSort[price]."</font><br />";
   }
?>
</div> 
```

Here are the CSSs used:

```
.boxes {
   width: 160px;
   float: left;
   padding: 10px;
   border: 1px solid #C6C6C6;
   clear: both;
}
.filterTitles
{
   background-color: #F1F1F1;
   font-family: Arial,Helvetica,Verdana,Sans-serif;
   font-size: 11px;
   font-weight: normal;
   color: #333;
   text-transform: uppercase;
   padding: 4px;
   border: 1px;
   border-color: #C6C6C6;
   border-top-style: dotted;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:49:46.080

我不确定我是否正确理解了这个问题，这是你想要做的吗？

[http://jsfiddle.net/mdLVG/](http://jsfiddle.net/mdLVG/)

在这种情况下，您需要添加`clear:both;`到您的`.filterTitles`CSS 类。

# php - PHP Creating CSR using existing private key

> ID：13903300
> 
> 赞同：1
> 
> 时间：2012-12-16T16:38:09.447
> 
> 标签：php, openssl, private-key, csr

```
<?php 
$c = $_POST['c'];
$city = $_POST['city'];
$cn = $_POST['cn'];
$mail = $_POST['email'];
$p = $_POST['pass'];
echo "$c<BR>$city<br>$cn<br>$mail";
$key = $_POST['key'];
$dn = array(
"countryName" => "$c",
"stateOrProvinceName" => ".",
"localityName" => "$city",
"organizationName" => ".",
"organizationalUnitName" => ".",
"commonName" => "$cn",
"emailAddress" => "$key"
//"passphase" => "$p"
);
// Generate a certificate signing request
$csr = openssl_csr_new($dn, $key);
var_dump($csr);
while ($msg = openssl_error_string())
echo $msg . "<br />\n";
?> 
```

It is showing me an error:

```
Warning: openssl_csr_new(): dn: add_entry_by_NID 48 -&gt; -----BEGIN RSA PRIVATE KEY----- M[...]= -----END RSA PRIVATE KEY----- (failed; check error queue and value of string_mask OpenSSL option if illegal characters are reported) in D:\wamp\www\csr.php on line 21 
```

and

```
boolean false
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0E06D06C:configuration file routines:NCONF_get_string:no value
error:0D07A097:asn1 encoding routines:ASN1_mbstring_ncopy:string too long 
```

This is what I found on php.net

```
mixed openssl_csr_new ( array $dn , resource &$privkey [, array $configargs [, array $extraattribs ]] ) 
```

`$pivkey` should be a resource type, what if I already have got a private key as string?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:36:44.297

就个人而言，我会使用[phpseclib，一个纯 PHP CSR 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('File/X509.php');
include('Crypt/RSA.php');

$key = new Crypt_RSA();
$key->loadKey($_POST['key']);

$x509 = new File_X509();
$x509->setPrivateKey($key);
$x509->setDN(array(
    'countryName' => $_POST['c'],
    'stateOrProvinceName' => '.',
    'localityName' => $_POST['city'],
    'organizationName' => '.',
    'organizationalUnitName' => '.',
    'commonName' => $_POST['cn'],
    'emailAddress' => $_POST['email']
));

$csr = $x509->signCSR();

echo $x509->saveCSR($csr);
?> 
```

# cocos2d-iphone - Ball Randomly Slowing Down

> ID：13903302
> 
> 赞同：0
> 
> 时间：2012-12-16T16:38:32.527
> 
> 标签：cocos2d-iphone, box2d, geometry, physics-engine

Currently, I have a program that has a ball, bouncing back and forth. In order to find out how fast it's bouncing, I made this:

```
b2Vec2 velocity = blueCircleBody->GetLinearVelocity();
float constantSpeed = velocity.Length();

NSLog(@"%.f", constantSpeed); 
```

This is inside a tick: function. Every second, I want to see how fast the ball is moving. As I notice in the Output window, the ball seems to slow down after few minutes.

```
2012-12-16 11:29:10.458 Bubble Fill V1[31623:c07] 30
2012-12-16 11:29:11.474 Bubble Fill V1[31623:c07] 30
2012-12-16 11:29:12.475 Bubble Fill V1[31623:c07] 30
2012-12-16 11:29:13.492 Bubble Fill V1[31623:c07] 24
2012-12-16 11:29:14.525 Bubble Fill V1[31623:c07] 24 
```

Is there a reason why the ball randomly went from 30 to 24?

Additionally, I have another problem. If I restart the program, with all the same data, the ball is going at a different speed for unknown reason. This means that the impulse/force I use doesn't dictate how fast it's going.

Here's some more information on the ball:

```
 blueCircle = [CCSprite spriteWithFile:@"blueCircle.png"];
blueCircle.position = ccp(winSize.width/4, winSize.height/4);
blueCircle.tag = 2;
[self addChild:blueCircle];

blueCircleBodyDef.type = b2_dynamicBody;
//Find a way to make the BoundingBox/GroundBox to not be affected by the Force of the Walls
blueCircleBodyDef.position.Set(winSize.width/4/PTM_RATIO, winSize.height/4/PTM_RATIO);
//blueCircleBodyDef.position.Set(blueCircle.position.x/PTM_RATIO, blueCircle.position.y/PTM_RATIO);
blueCircleBodyDef.userData = blueCircle;
blueCircleBody = world->CreateBody(&blueCircleBodyDef);

float blueCircleRadius = blueCircle.contentSize.width/2 * blueCircle.scale;
blueCircleShape.m_radius = blueCircleRadius/PTM_RATIO;

blueCircleFixtureDef.shape = &blueCircleShape;
blueCircleFixtureDef.density = 1.0f;
blueCircleFixtureDef.friction = 0.0f;
blueCircleFixtureDef.restitution = 1.0f;
blueCircleBody->CreateFixture(&blueCircleFixtureDef);

force.Set(0, 140);
//blueCircleBody ->ApplyLinearImpulse(force, blueCircleBodyDef.position);
//blueCircleBody->SetLinearVelocity(force);
blueCircleBody->SetGravityScale(0);
blueCircleBody->SetLinearVelocity(force); 
```

# android - KeyListener working on emulator but not working on device

> ID：13903303
> 
> 赞同：0
> 
> 时间：2012-12-16T16:38:43.533
> 
> 标签：android, android-edittext, keylistener

I'm having a problem with the keylistener on my android app. When testing on the emulator, it works great, but after exporting the APK and trying on my real device, it doesn't work anymore.

I saw a similar question here but the answer didn't helped me. It was telling me to add setFocusable(true); and setFocusableInTouchMode(true); to my code, but it didn't worked. (I assumed I should add this to my editView)

The code is this:

```
edtText.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if(edtText.getText().length()>0 && edtText.getText().length()<141){
                btnEnviar.setEnabled(true);
            }
            else{
                lblNumeroCaracteres.setTextColor(Color.RED);
                btnEnviar.setEnabled(false);
            }
            lblNumeroCaracteres.setText(String.valueOf(edtText.getText().length()));
            return false;
        }
     }); 
```

Does anyone knows how to fix this problem?

Thanks in advice!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:47:17.003

尝试使用

```
addTextChangedListener(TextWatcher watcher) 
```

[在这里](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)定义 它，您可以处理物理键盘和软键盘。我希望它有帮助

# php - URL encoding with Javascript and then decoding with PHP

> ID：13903305
> 
> 赞同：0
> 
> 时间：2012-12-16T16:39:02.443
> 
> 标签：php, javascript, urlencode, url-encoding, urldecode

I am wanting to url encode a string with Javascript, with the relevant part of the code being:

```
this.options[this.selectedIndex].value 
```

or the full line:

```
<select name="category" onChange="javascript:document.location.href='<? echo '/' . $state . '/dir/'; ?>' + this.options[this.selectedIndex].value;"> 
```

How can I url encode this with JS and then safely decode it with PHP using `urldecode`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-23T08:23:30.937

我想在 URL 中使用 & 时遇到问题。我刚刚使用`encodeURIComponent()`.

我在我的下拉元素的 onchange 函数中使用了它，如下所示：

```
onchange="window.location='test.php?c='+encodeURIComponent(this.value)" 
```

在我的情况下效果很好。

我试图为此使用 php 函数`urlencode()`，但我做不到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T16:43:42.773

您有 3 个选项：

*   `escape()`不会编码：`@*/+`

*   `encodeURI()`不会编码：`~!@#$&*()=:/,;?+'`

*   `encodeURIComponent()`不会编码：`~!*()'`

# c# - Cannot build project with MSBuild programmatically

> ID：13903308
> 
> 赞同：1
> 
> 时间：2012-12-16T16:39:27.403
> 
> 标签：c#, visual-studio-2010, msbuild, target, targets

I am trying to package a Visual Studio .csproj with MSBuild programmatically (using namespace Microsoft.Build.Evaluation). I can correctly package this project with command like like

```
 MSBuild "C:\Users\Documents\Visual Studio 2010\Projects\TestMvc\TestMvc\TestMvc.csproj" /T:Package 
```

But when I use the following code (I implemented my own logger, but it does not matter here):

```
 var project = new Microsoft.Build.Evaluation.Project(@"C:\Users\Documents\Visual Studio 2010\Projects\TestMvc\TestMvc\TestMvc.csproj");

            var logger = new OutputLogger(_panel);
            List<Microsoft.Build.Framework.ILogger> loggers = new List<Microsoft.Build.Framework.ILogger>();
            loggers.Add(logger);
            var targets = new string[] 
            { 
                "Package"

            };
            var result = project.Build(targets, loggers);
    Microsoft.Build.Evaluation.ProjectCollection.GlobalProjectCollection.UnloadProject(project); 
```

Solution is not built. Logger gives me an error "Output file "obj\Debug\TestMvc.dll" does not exist."

After I build this project in Visual Studio manually (when all the binaries are successfully built), then this code packages the project succesfully. So there are all nesessary binaries available already.

The question is: why "Package" target launched programmatically is not equal to "Package" lanunched by command line and how to force the former do the same action as its commandlike counterpart?

**UPD.** To see what's happening I enabled diagnostics output in both cases. What I've got: Console command produced the following log:

```
Target "CoreCompile: (TargetId:37)" in file "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.targets" from project "D:\Users\Documents\Visual Studio 2010\Projects\MvcTest2\MvcTest3\MvcTest3.csproj" (target "Compile" depends on it):
Building target "CoreCompile" completely.
Output file "obj\Debug\MvcTest3.dll" does not exist.
Using "Csc" task from assembly "Microsoft.Build.Tasks.v4.0, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "Csc" (TaskId:20)
  C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe .....
  Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1 (TaskId:20)
  Copyright (C) Microsoft Corporation. All rights reserved. (TaskId:20)
   (TaskId:20)
Done executing task "Csc". (TaskId:20) 
```

When calling from API, I got the following log:

```
Target "CoreCompile" in file "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.targets":
Building target "CoreCompile" completely.
Output file "obj\Debug\MvcTest3.dll" does not exist.
Using "Csc" task from assembly "Microsoft.Build.Tasks.v4.0, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "Csc"
Done executing task "Csc". 
```

So Csc task is launched in both cases, however, it does not produce any output files when launched by API (i checked this even in file monitor, no files are produced).

# php - 解析一个奇怪的畸形 ini

> ID：13903310
> 
> 赞同：0
> 
> 时间：2012-12-16T16:39:42.410
> 
> 标签：php, ini

我有一个看起来像[这样](http://pastie.org/pastes/5539368/text)的非常损坏/奇怪的 INI 文件。

```
RowID=11668
Name=SCNA DaCe
PPA
Relation=Family
RowID=31999
Name=PCA

RowID=11593
Name=CRMLEVEL
Relation=Family 
```

如果可能的话，最终成为

```
array("11668" => array("name"=> "SCNA DaCe", "relation"=>"Family", "ppa"=>true)); 
```

换行符是基于 `RowID`而不是正确的`[section]`，我不知道如何阅读这个，关于从哪里开始的任何提示？

有不一致的大小写，某些东西没有值（比如`PPA`在一行上），并不是所有`key=vals`的都是为每种情况定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:58:06.110

您必须推出自己的自定义解决方案来解析此 INI 文件，因为 PHP 内置的[parse_ini_file](http://php.net/parse-ini-file)基于 PHP 自己的 php.ini 格式约束。所以它必须是有效的PHP。

出于您的目的，如果要求与每行上的键/值对一样简单，但一次性搁浅值作为默认布尔值 true 除外，那么您可以执行以下操作。

```
function my_parse_ini($ini_file_name) {
    $ini = file($ini_file_name, FILE_IGNORE_NEW_LINES);
    $return = array();
    $row = null;
    foreach ($ini as $key => $value) {
        if ($value == '') {
            $row = null;
            continue;
        }
        @list($k, $v) = explode('=',$value);
        if ($v === null) {
            $v = true;
        }
        if ($row === null) {
            $row = $v;
            $return[$row] = array();
            continue;
        }
        $return[$row][$k] = $v;
    }
    return $return;
}
/* usage */
var_dump(my_parse_ini('test.ini')); 
```

这将为您的示例 ini 文件输出以下内容....

```
array(2) {
  [11668]=>
  array(4) {
    ["Name"]=>
    string(3) "PCA"
    ["PPA"]=>
    bool(true)
    ["Relation"]=>
    string(6) "Family"
    ["RowID"]=>
    string(5) "31999"
  }
  [11593]=>
  array(2) {
    ["Name"]=>
    string(8) "CRMLEVEL"
    ["Relation"]=>
    string(6) "Family"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:32:14.357

对于这样的事情，一组对象就派上用场了。

[http://www.laprbass.com/RAY_temp_dylan.php](http://www.laprbass.com/RAY_temp_dylan.php)

```
<?php // RAY_temp_dylan.php
error_reporting(E_ALL);
echo '<pre>';

$str = <<<END
RowID=11668
Name=SCNA DaCe
PPA
Relation=Family
RowID=31999
Name=PCA

RowID=11593
Name=CRMLEVEL
Relation=Family
END;

// SIMULATE READING WITH file()
$arr = explode(PHP_EOL, $str);

// COLLECT THE NORMALIZED DATA HERE
$out = array();
$obj = new stdClass;

// USE AN ITERATOR ON EACH ROW
foreach ($arr as $row)
{
    // SKIP BLANK LINES
    $row = trim($row);
    if (empty($row)) continue;

    // FOR EACH ROWID CREATE A NEW OBJECT
    if (FALSE !== strpos($row, 'RowID'))
    {
        // SAVE THE OLD OBJECT
        $out[] = $obj;
        $obj = new stdClass;
        $obj->RowID = end(explode('=', $row));
    }

    // FOR REMAINING ELEMENTS THAT ARE KEY-VALUE PAIRS
    if (FALSE !== strpos($row, '='))
    {
        $key = current(explode('=', $row));
        $val = end(explode('=', $row));
        $obj->$key = $val;
    }

    // FOR REMAINING ELEMENTS THAT ARE NOT KEY-VALUE PAIRS
    else
    {
        $obj->$row = TRUE;
    }
}
// SAVE LAST ELEMENT AT EOF
$out[] = $obj;

// DISCARD THE ZERO "STARTER" ELEMENT
unset($out[0]);
var_dump($out); 
```

# powershell - Where is the v2.0 and v3.0 folder for PowerShell?

> ID：13903312
> 
> 赞同：10
> 
> 时间：2012-12-16T16:40:09.963
> 
> 标签：powershell, powershell-2.0

On my box, I installed PowerShell 2.0, but the $PSHome varialbe always return the path below：</p>

C:\Windows\System32\WindowsPowerShell\v1.0

So, where is the v2.0 or v3.0 folder?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T17:01:53.767

就像 Windows 中的 64 位系统文件一样`System32`，所有版本的 Powershell 都安装到`v1.0`. MS 似乎没有从中学到的一件事。你不知道 Powershell 脚本文件有扩展名`ps1`等`psm1`吗？

# c# - 集合的 Where 子句

> ID：13903314
> 
> 赞同：5
> 
> 时间：2012-12-16T16:40:16.733
> 
> 标签：c#, .net, entity-framework, linq-to-entities

我正在使用 Julie Lerman 的 DbContext 书中的 BAGA 代码。我想在 LINQ 中重新创建以下 SQL 查询并将结果放入 List 集合中并且遇到问题。 [http://learnentityframework.com/downloads/](http://learnentityframework.com/downloads/)

```
SELECT * FROM baga.Locations d
LEFT JOIN Lodgings l ON d.LocationID = l.destination_id
WHERE d.Country = 'usa'
AND (l.MilesFromNearestAirport > 5 or l.MilesFromNearestAirport is null) 
```

因此，用英语，获取位于美国的所有位置（目的地），并包括 MilesFromNearestAirport > 5 的所有相关住宿

语法无法编译，但我希望类似于下面的内容

```
var dests = context.Destinations
  .Where(d => d.Country == "USA" && d.Lodgings.Where(l => l.MilesFromNearestAirport > 5))
  .Select(d => d)
  .ToList(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T19:39:09.080

正如@Sampath 所说，这通常是通过导航属性完成的，但我相信他的代码并不完全符合您的要求。这（我认为）更接近：

```
var dests = context.Destinations
           .Where(d => d.Country == "USA")
           .Select(d => 
               new { d,
                     RemoteLodgings = d.Lodgings
                         .Where(l => l.MilesFromNearestAirport > 5)}
           .ToList(); 
```

但是，如果我信守您的要求，它仍然不能满足您的要求。*您想要包含*住宿的位置，即部分加载的导航属性。当实体要被序列化并在一个包中发送到（Web）客户端时，这会很方便。（虽然上面的方法也可以）。

但是可以使用部分加载的导航属性创建一个集合。

这本书在第 40 页展示了如何部分加载单个实体的导航属性（简而言之：`context.Entry(entity).Collection(e => e.Children).Query().Where(condition)`。但如上所述，这只是一个实例。对于实体集合，这不是最好的方法。

有趣的是（正如我的一位同事发现的那样），您可以通过将所需的集合元素分别加载到上下文中来轻松地为实体集合执行此操作：

```
var lodgings = context.Lodgings
              .Where(l => l.MilesFromNearestAirport > 5 
                       && l.Destination.Country == "USA")
              .ToList(); 
```

现在，如果您循环浏览，`context.Destinations.Where(d => d.Country == "USA")`您会看到他们的住所都装满了“ `>5`”。可能是因为此时 EF 执行了关系修复。（延迟加载禁用，因为延迟加载将完全加载导航属性）。

**编辑**（在您发表评论后）
当您说这有点骇人听闻时，我完全同意。实际上，我一开始就忘了提到这一点。问题是，当延迟加载碰巧被不知道代码用途的人激活时，整个机制就会崩溃。我不喜欢以不明显的方式依赖于状态的代码。所以我总是更喜欢第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:06:44.197

通常这是使用获取实体时加载的**导航属性来完成的。**

但是，您也可以使用以下方法执行此操作：

```
(from d in baga.Locations
 from l in Lodgings
 where (d.LocationID == l.destination_id)
 where (d.Country = 'usa' && (l.MilesFromNearestAirport > 5 || l.MilesFromNearestAirport == null))
 select d)
 .ToList(); 
```

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:22:04.017

使用 LINQ 连接怎么样？

```
 var res = from d in context.Destinations
           join l in context.Lodgings on d.LocationID equals l.destination_id
           where (l.MilesFromNearestAirport > 5 || l.MilesFromNearestAirport == null)
                 && d.Country = "usa"
           select new {
                     Destination = d,
                     Location = l
                  } 
```

# android - Android 录制的语音变形或操纵为有趣的声音

> ID：13903318
> 
> 赞同：2
> 
> 时间：2012-12-16T16:41:33.387
> 
> 标签：android, audio, voice, morphing

有哪些选项可以在 Android 中将录制的声音变形为有趣的音调？iPhone 可能有[http://dirac.dspdimension.com](http://dirac.dspdimension.com)之类的选项，我们是否有一些类似的 android 库可以帮助从录制的文件中创建有趣的声音？要求是按照“会说话的汤姆”/“花栗鼠”的方式创建一些东西（如果这有助于理解上下文）。

如果没有现成的库，还有什么其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T17:02:05.133

一种选择是使用 AudioTrack。它从 API 3 开始可用，并且被广泛使用。它将帮助您修改要扭曲的音频文件的频率，从而修改音高。更高的音高会给你想要的花栗鼠般的声音。

但是，由于其年代久远，AudioTrack 可能难以为您实现。试试 Android 的**soundpool** api。它灵活，一次可以播放数十种声音，让您轻松修改音高/频率。

这是我测试它的方法（它有效）：

```
SoundPool soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
boolean isSoundLoaded = false;
float frequencyPitch = 1.3f; // tweak this. it accepts any number between 0.5f and 2.0f
int soundID = soundPool.load(filePath+fileName, 1);
soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
        @Override
        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
            isSoundLoaded = true;
            if(isSoundLoaded)
    {
    soundPool.play(soundID, 1f, 1f, 1, 0, frequencyPitch);
    }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-10T06:20:05.807

我们可以利用 FFMPEG 进行语音转换。

例子：

```
/**
 * Function to execute FFMPEG Query
 */
    private fun exceuteFFMPEG(cmd: Array<String>) {
        FFmpeg.execute(cmd)
        val rc = FFmpeg.getLastReturnCode()
        val output = FFmpeg.getLastCommandOutput()

        if (rc == RETURN_CODE_SUCCESS) {
            Log.i("GetInfo", "Command execution completed successfully.")
            hideProgress()
            isEffectAddedOnce = true
            start()
        } else if (rc == RETURN_CODE_CANCEL) {
            Log.i("GetInfo", "Command execution cancelled by user.")
        } else {
            Log.i(
                "GetInfo",
                String.format(
                    "Command execution failed with rc=%d and output=%s.",
                    rc,
                    output
                )
            )
        }
    }

    /**
     * Function used to play the audio like a Radio
     */
    private fun playRadio(fileName1: String, fileName2: String) {
        showProgress()
        player?.stop()
        val cmd = arrayOf(
            "-y",
            "-i",
            fileName1,
            "-af",
            "atempo=1",
            fileName2
        )//Radio

        exceuteFFMPEG(cmd)

    }

    /**
     * Function used to play the audio like a Chipmunk
     */
    private fun playChipmunk(fileName1: String, fileName2: String) {
        showProgress()
        player?.stop()
        val cmd = arrayOf(
            "-y",
            "-i",
            fileName1,
            "-af",
            "asetrate=22100,atempo=1/2",
            fileName2
        )//Chipmunk
        exceuteFFMPEG(cmd)
    }

    /**
     * Function used to play the audio like a Robot
     */
    private fun playRobot(fileName1: String, fileName2: String) {
        showProgress()
        player?.stop()
        val cmd = arrayOf(
            "-y",
            "-i",
            fileName1,
            "-af",
            "asetrate=11100,atempo=4/3,atempo=1/2,atempo=3/4",
            fileName2
        )//Robot
        exceuteFFMPEG(cmd)
    }

    /**
     * Function used to play the audio like a Cave
     */
    private fun playCave(fileName1: String, fileName2: String) {
        showProgress()
        player?.stop()
        val cmd = arrayOf(
            "-y",
            "-i",
            fileName1,
            "-af",
            "aecho=0.8:0.9:1000:0.3",
            fileName2
        )//Cave

        exceuteFFMPEG(cmd)

    } 
```

有关更多详细信息，您可以在以下位置参考示例

[https://github.com/sachinvarma/VoiceChanger](https://github.com/sachinvarma/VoiceChanger)

请查看以下网站以获取有关有助于我们处理其他影响的信息的更多信息。

[https://ffmpeg.org/ffmpeg-filters.html](https://ffmpeg.org/ffmpeg-filters.html)

希望，这可能会在将来对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T13:53:09.907

目前，移动设备上的大多数语音调制应用程序似乎都在使用音高调制的变体和一些额外的音频效果（请注意，语音变形要解决的问题要大得多）。

在 Android 上，“AudioTrack”可帮助您调整音高设置（以及许多其他音频特征），以操纵输入音频，从而获得所需的有趣/“chip-munkified”版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T20:10:58.530

尝试在您的应用程序中嵌入纯数据。纯数据很棒而且学习起来很有趣。试一试，它很容易变形声音。

# actionscript-3 - 使用 AS3 从库中播放 fly

> ID：13903320
> 
> 赞同：0
> 
> 时间：2012-12-16T16:42:09.060
> 
> 标签：actionscript-3, video, flv, flvplayback

如何使用 AS3 播放库中的视频？它在文件夹`video`中，名为`video01.flv`.

```
package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import fl.video.*;

    public class video01 extends MovieClip
    {
        public function video01()
        {
            trace("movieclip 1 geladen");
            btn_terug.addEventListener(MouseEvent.CLICK, terug);
        }

        public function terug(evt:MouseEvent):void 
        {
            trace("knop ingedrukt");
            Main(parent).filmAan = false;
            this.parent.removeChild(this);    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:57:32.223

找到了！就这么简单：

```
package
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import fl.video.*;

public class video01 extends MovieClip
{
    public function video01()
    {
        videoPlayer.source = "video/video01.flv";
        trace("movieclip 1 geladen");
        btn_terug.addEventListener(MouseEvent.CLICK, terug);
    }

    public function terug(evt:MouseEvent):void 
    {
        trace("knop ingedrukt");
        Main(parent).filmAan = false;
        this.parent.removeChild(this);  
    }
}
} 
```

# python - Python3.3 在 linux (pip-3.3) 中找不到 libpython3.3m.so

> ID：13903321
> 
> 赞同：1
> 
> 时间：2012-12-16T16:42:11.313
> 
> 标签：python, linux, python-3.x, pip, pyside

我正在使用带有默认 python3.2 的 ubuntu 12.10。但是我下载了python 3.3，因为它更加精致。当然，从那时起，我一直在为 3.3 安装模块做噩梦，因为 python3 包从 synaptic 安装到 3.2 目录。所以，我使用 python 3.3 安装了 pip。现在我有了 pip-3.3 命令，太好了。但是，当我尝试“sudo pip-3.3 install PySide”时，我很快得到了一个错误：“错误：无法找到 Python 库 /usr/lib/libpython3.3m.so”。更重要的是，当我运行“sudo pip install PySide”（2.7 的命令）时，它构建和安装并且运行完美。Pyvenv 和 virtualenv 也都失败了。但我不想以非环境方式进行，只需将 pyside 安装到全局 3.3 lib 目录即可。

那么如何将 PySide 安装到 python 3.3 呢？我只是无法让它工作......看起来我将不得不坚持使用默认的 ubuntu python 3 版本（这个运行得很好，一切都可以从 pip 和突触工作），但我喜欢使用最新的 python每个版本都变得越来越好。

顺便说一句，如果这很重要，我在该错误之前还收到以下警告：“找不到包初始化文件'PySide/ **init** .py'（或不是常规文件）”和“找不到包初始化文件'pysideuic/ **init** .py'（或不是常规文件）”

编辑：我从 synaptic 安装了完整的 python3.3，包括 pythoh3.3-dev、debug、lib 等。一切。并且该动态 python 3.3 lib 存在于 /usr/lib/x86_64-linux-gnu/libpython3.3m.so 中，也许只是用于 ubuntu 的 python3.3 包很差并且以错误的方向安装它/不做任何符号链接技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:26:08.500

请尝试[从源代码 (PySide) 安装](https://stackoverflow.com/a/13895878/1302018)此答案。下载 pyside 源代码并从源代码安装，按照链接上的说明进行操作。

# wpf - WPF MVVM 自定义 ListView 单元格以插入超链接并更改文本颜色

> ID：13903322
> 
> 赞同：0
> 
> 时间：2012-12-16T16:42:20.270
> 
> 标签：wpf, xaml, mvvm

我在 ListView 中有一个 GridView 单元格，它被定义为一个 TextBlock 并绑定到我的 ViewModel 上的一个字符串。我希望能够以编程方式将部分文本更改为超链接并更改为不同的颜色。

这是 GridView 单元格的 XAML：

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <Border BorderThickness="2" BorderBrush="#dfdfdf" HorizontalAlignment="Stretch">
            <TextBlock Text="{Binding Data}" Margin="3"/>    
        </Border>
    </DataTemplate>
</GridViewColumn.CellTemplate> 
```

这是目前的样子：

![WPF 列表视图单元格](../Images/e3d643f729a779dc73225ed94a1b8a2f.png)

绑定的文本示例如下：

```
<color:#ff0000>Test item</color>
Test item 2
<link:http://www.google.com>Test hyperlink</link> 
```

我对正则表达式解析绑定文本并提取所需信息没有任何问题，但是我将如何将 TextBlock 更改为不同的颜色并添加超链接？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:29:05.657

您可以将多个**[Run](http://msdn.microsoft.com/en-us/library/system.windows.documents.run.aspx)**元素放在 TextBlock 中，然后根据需要设置样式。

这是一个带有工作超链接的示例，它甚至支持 MVVM :)

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <Border BorderThickness="2" BorderBrush="#dfdfdf" HorizontalAlignment="Stretch">
        <TextBlock  Margin="3">
            <Run Text="{Binding Data}" />
            <Run Text="Some more data" Background="Red" />
            <Run Text="Click Me" Foreground="Blue" TextDecorations="Underline" >
                <i:Interaction.Triggers>
                   <i:EventTrigger EventName="MouseDown">
                      <local:EventToCommand Command="{Binding LinkClickCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
                   </i:EventTrigger>   
                 </i:Interaction.Triggers>

            </Run>
        </TextBlock>
        </Border>
    </DataTemplate>
</GridViewColumn.CellTemplate> 
```

注意：`Interaction.Triggers`来自`System.Windows.Interactivity`和`EventToCommand`来自 MVVMLight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:42:24.250

类似于 Blachshma 的回答，但在`Run`对象中使用了超链接：

```
<TextBlock>
  <Run Text="{Binding Data}" />
  <Run Text="Some more data" Background="Red" />
  <Hyperlink Command="{Binding Path=Command}">
    <TextBlock Text="{Binding Path=Text}"/>
  </Hyperlink>
</TextBlock> 
```

显然，我有一个`Command`和`Text`属性要绑定到超链接。看起来完全一样，但也会响应命令的`CanExecute`谓词（超链接变灰）。

# c - 在两个结构指针之间复制数据导致分段错误

> ID：13903323
> 
> 赞同：0
> 
> 时间：2012-12-16T16:42:35.757
> 
> 标签：c, struct, segmentation-fault, malloc

尝试将指向结构的指针的包含复制到另一个指针时出现分段错误。

我的结构：

```
typedef struct State {
  char alphabets[2][6]; 
  struct State *PREV; /*this points to the previous state it came from*/
  struct State *NEXT; /*this points to the next state in the linked list*/
  int cost; /*Number of moves done to get to this position*/
  int zero_index;/*this holds the index to the empty postion*/
  char *move[2];/*this holds the move that was done to get to this state*/
} State; 
```

内存分配方式：

```
State *memAllocator() {
  State *p = (State*)malloc(sizeof(State));
  if (p == NULL) {
    printf("Malloc for a new position failed");
    exit(1);
  }
  return p;
} 
```

这是我的结构字母表的一个例子

```
CANAMA
PANAL_ 
```

我有一个随机函数，它给了我两种可能的状态移动。上述状态的两个动作将是

```
CANAM_
PANALA  
AND
CANAMA
PANA_L 
```

在我的随机状态函数中，我复制了当前状态的包含，然后将其置于新状态。

但问题来了，我正在做广度优先搜索，并试图找出从一个州到另一个州的最短距离。在这样做的过程中，我在搜索中走得很远。但随后它在我将当前状态的包含复制到新状态的行处给出了分段错误。我也尝试过 memcpy，但它给出了相同的分段错误。以下是这些行：

```
*new_state=*current_state;
/*memcpy(new_state, current_state, sizeof(State));*/ 
```

那么，是我复制记忆的方式不正确导致了问题。但如果是这样的话，为什么它会持续一段时间然后给出分段错误。请帮忙。

这是我的完整代码的链接。[完整代码](http://www.scribd.com/doc/117020157/PanamaCanal-c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:54:49.353

看起来至少 new_state 和 current_state 之一为空。最好将您的 printfs 从更改`printf("If exception below then problem in swapN\n");`为`printf("If exception below then problem in swapN: %p %p\n", current_state, new_state1);`查看发生这种情况的位置；但至少有一种可能性如下：

```
printf("If exception below then problem in swap3\n"); 
new_state1 = swap(empty_index/10, (empty_index%10)-1,current_sta te, new_state1); 
printf("If this prints problem not in swap\n"); 
if (new_state1 != NULL){
    //... [REMOVED FOR CLARITY]
    return; 
} 
/*Go East*/ 
/*printf("Step %d, move %c west\n",current_state->alphabets[empt y_index/10][(empty_index%10)+1]);*/ 
printf("If exception below then problem in swap4\n"); 
new_state1 = swap(empty_index/10, (empty_index%10+1),current_state, new_state1); 
```

请注意，对 swap() 的第二次调用将始终具有 new_state1 `NULL`（因为如果不为空，您已经返回它！）

# javascript - 无限循环一个Javascript函数？

> ID：13903324
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:42:37.017
> 
> 标签：javascript, loops

嗨，我有这个 javascript 函数，如果用户将鼠标悬停在另一个 div 上，它会淡入一个 div。当他们悬停或更多鼠标离开时，div会淡出。

有谁知道我如何循环它以无限次运行，因为目前它只执行一次。

```
<script>
$(".change-profile-pic").hide();
$('.img-with-border').hover(function () {
    if ($('.change-profile-pic').is(":hidden")) {
         $('.change-profile-pic').fadeTo(0, 500);
    } else {    
        $('.change-profile-pic').fadeTo(500, 0);              
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:59:35.780

如果你真的想使用 jQuery（不是 CSS 过渡），那么使用[`.hover`](http://api.jquery.com/hover/),[`.fadeIn`](http://api.jquery.com/fadeIn/)和[`.fadeOut`](http://api.jquery.com/fadeOut/)我的理解

> 我希望它每次用户将鼠标移到它上面并远离它时一次又一次地运行

```
$(".change-profile-pic").hide();
$('.img-with-border').hover(
    function over() { // fade in on mouseover
        $('.change-profile-pic').fadeIn(500);
    },
    function out() { // fade out on mouseout
        $('.change-profile-pic').fadeOut(500);
    }
); 
```

* * *

悬停时编辑不淡出`.change-profile-pic`

```
(function setUpHover() {
    $(".change-profile-pic").hide();
    var timeout = null,
        over = function over() {
            window.clearTimeout(timeout);
            $('.change-profile-pic').fadeIn(500);
        },
        outAfterDelay = function outAfterDelay() {
            $('.change-profile-pic').fadeOut(500);
        },
        out = function out() {
            timeout = window.setTimeout(outAfterDelay, 1000); // give enough time to move to elm here
        };

    $('.img-with-border').hover(over, out);
    $('.change-profile-pic').hover(over, out);
}()); 
```

[**小提琴示例**](http://jsfiddle.net/zpkmN/)（基于[jfriend00](https://stackoverflow.com/users/816620/jfriend00)的[演示](http://jsfiddle.net/jfriend00/k54gh/)，使用 JavaScript 从这个答案代替）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:45:26.473

您可以在这里使用 setTimeout() 或 setIntervall() 更多：

[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)
[https://developer.mozilla.org/en-US/docs/DOM/window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:02:29.187

如果您想要的是只要鼠标悬停，项目就可以脉冲输入/输出，您可以使用如下代码：

```
<script>
$(".change-profile-pic").css("opacity", 0);
$('.img-with-border').hover(function () {
    var self = $(this);
    self.data("hovered", true);

    function fadeInOut(obj) {
        if (self.data("hovered")) {
            obj.stop(true).fadeTo(500, 1, function() {
                obj.fadeTo(500, 0, function() {fadeInOut(obj)});
            });
        }
    }
    $(".change-profile-pic").each(function() { fadeInOut($(this))});
}, function() {
    $(this).data("hovered", false);
});
</script> 
```

工作演示：http: [//jsfiddle.net/jfriend00/k54gh/](http://jsfiddle.net/jfriend00/k54gh/)

从概念上讲，这会在悬停的项目上保留一个标志，`.data()`表明该项目当前是否悬停，并且只要项目保持悬停，它就会一遍又一遍地重复fadeTo 1 不透明度，然后一遍又一遍地fadeTo 0 不透明度。它使用第一个淡入淡出的动画完成功能来知道何时开始第二个淡入淡出以及第二个淡入淡出的动画完成功能来重新开始循环。

# java - Mercurial - 服务器上显示的文件 nog（ls 命令）

> ID：13903325
> 
> 赞同：2
> 
> 时间：2012-12-16T16:43:10.283
> 
> 标签：java, mercurial, jenkins

我正在尝试使用 jenkins、maven 和 mercurial 设置一个 java buildserver。现在我的 mercurial 服务器正在工作，我可以推送、拉取和提交。在服务器上运行命令“hg serve”可以让我看到来自我的客户的提交。但是当我手动进入存储库（服务器终端中的 cd）并执行“ls”命令时，我看不到任何文件。当我将存储库克隆到新客户端时，我确实会收到其他客户端推送的文件。

这是有点奇怪的行为。有人认识这个吗？我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:01:35.870

使用命令： hg update 解决了这个问题。我现在可以看到我的文件夹

# python - 将函数的非参数分组为变量？

> ID：13903327
> 
> 赞同：2
> 
> 时间：2012-12-16T16:43:22.403
> 
> 标签：python, documentation, doxygen

我正在使用 Doxygen 记录我的 python 代码，并且我有一个只接收“请求”的 django 函数，但我想记录 request.GET 中应该包含的内容......我怎么会有 doxygen 布局很好，我的变量目前被评论为：

```
#  GET parameters:
#  {
#    'tag_id'   : int      = Tag ID, used if no tag-name given
#    'tag_name' : string   = Tag name, used if no TagID given
#    'last_id'  : int      = id of last displayed photo (that's the oldest one displayed!!!), optional
#    'max_n'    : int      = max number of photos to return, optional - def. 10
#    'bigt'     : bool     = optional, if present then returns bigger thumbs (400x260) instead of 300x200
#    'newest_id': int      = newest photoID got, optional. If given call returns newer images only
#  } 
```

# javascript - swfobject 嵌入 youtube 弹性视频高度问题

> ID：13903337
> 
> 赞同：0
> 
> 时间：2012-12-16T16:44:49.693
> 
> 标签：javascript, html, css, flash

我无法从 youtube 弹性制作嵌入的视频。我或多或少地尝试了我能想到的一切，但我的想法已经不多了。

正如下面的代码所示，我有 2 个带有 2 个不同 id 的 html 块标签，我将视频放在最后一个占位符中。我尝试了以下建议的宽度和高度技巧：[http ://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)

但到目前为止没有一个奏效。

它的宽度会变得有弹性，但高度会随之而来。因此，就其弹性而言，但仅在宽度上：I

任何人都知道一个解决方案，我错过了什么？:)

```
 //create video area
        var $videoDisplay = $('<section id="video-display"></div>');
        var $videoPlaceholder = $('<div id="video-placeholder"></div>');

        $videoDisplay.insertAfter('#title-search-container');
        $videoDisplay.append($videoPlaceholder);

        $("#area").html($videoDisplay);

        //embed player
        swfobject.embedSWF('http://www.youtube.com/e/' + id + '?enablejsapi=1&playerapiid=ytplayer', 
        'video-placeholder', '100%', '100%', '9.0.0', null, null, { allowScriptAccess: "always" }, 
        { id: "myyoutubeplayer" } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:22:06.850

试试这个 CSS：

```
#video-display {
   height: 100%;
} 
```

而是自动；

# sql-server - 删除除最近的 5 条记录外的所有记录

> ID：13903339
> 
> 赞同：0
> 
> 时间：2012-12-16T16:45:02.720
> 
> 标签：sql-server

我有一个在 id 列上有 PK 的表。我需要清理表格并在表格中保留 5 个最近的记录（最后 5 个 id - 最近的记录）。

除了使用`row_number()`还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:46:53.767

首先，您需要获取最近五行的 PK：

```
SELECT TOP 5 id FROM [table] ORDER BY id DESC 
```

假设最近的行将具有最高的 PK，此子查询将返回 5 个最近行的 ID。

然后在`WHERE`外部查询的子句中使用此子查询

```
DELETE FROM [table] WHERE id NOT IN ([subquery from above]) 
```

相当于这个

```
DELETE FROM [table] WHERE id NOT IN (id0, id1, id2, id3, id4) 
```

完整的查询是：

```
DELETE FROM [table]
WHERE id NOT IN (SELECT TOP 5 id 
                 FROM [table] 
                 ORDER BY id DESC) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:31:32.167

首先在临时表中插入前 5 条记录。然后在查询下方触发..，

从表名中删除

然后使用以下查询从临时表再次插入（5条记录）到主表。，

插入 Table_Name 选择 * from Temp_Table

# vb.net - 使 Vb.Net 类库中的 SSIS 脚本组件失败

> ID：13903341
> 
> 赞同：1
> 
> 时间：2012-12-16T16:45:10.817
> 
> 标签：vb.net, ssis

我正在努力满足以下要求，有人可以帮忙吗：

获得了为数据库函数调用 dotnet 库的 SSIS 包。如果 DOTNET 库中有任何错误，我们如何从 VB.NET 传递 Dts.TaskResult = ScriptResults.Failure 以使该 SSIS 脚本组件失败。

问候

# mysql - 将3张表合二为一，然后使用join语句

> ID：13903344
> 
> 赞同：2
> 
> 时间：2012-12-16T16:45:28.887
> 
> 标签：mysql, sql

很难解释，但我有这张表，它有 3 列（no、patient_no、procedure_no）产生费用忽略“no”列。我需要的另一个表是费用，其中存储了过程的名称。所以我想输出带有相应过程名称的procedure_no。

问题是，“收费”不是我需要的唯一表格。因为我太笨了，我把 ER 电荷、超声波和分娩的程序名称分开了。因此生成三个具有相同结构的表。

```
 SELECT incurredcharges.procedure_no, incurredcharges.patient_no, charges.procedure
    FROM incurredcharges

    INNER JOIN charges
ON incurredcharges.procedure_no=charges.procedure_no
    WHERE incurredcharges.patient_no=12; 
```

该语句有效，但仅显示来自 ER 费用的过程名称。不会显示超声和分娩程序名称！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:51:43.237

为了眼前的需要，你可以`UNION ALL`将3个表一起作为一个派生表来`JOIN`对抗。

```
SELECT
  `c`.`procedure`, 
  `incurredcharges`.`procedure_no`,
  `incurredcharges`.`patient_no`
FROM
  incurredcharges
  /* UNION ALL the 3 like tables together as a derived table */
  INNER JOIN (
    SELECT `procedure`, `procedure_no` FROM `charges`
    UNION ALL
    SELECT `procedure`, `procedure_no` FROM `confinement`
    UNION ALL
    SELECT `procedure`, `procedure_no` FROM `ultrasound`
  ) c ON `incurredcharges`.`procedure_no` = c.`procedure_no`
WHERE `incurredcharges`.`patient_no` = 12 
```

### 但对于未来：

然而，正确的长期解决方案是使用与`UNION ALL`子查询中使用的类似结构将所有这些记录插入到统一表中，并使用一个新列来标识它们的来源。

```
CREATE TABLE unified_charges AS 
  SELECT `procedure`, `procedure_no`, 'ER' AS `chargetype` FROM `charges`
  UNION ALL
  SELECT `procedure`, `procedure_no`, 'CONFINEMENT' AS `chargetype` FROM `confinement`
  UNION ALL
  SELECT `procedure`, `procedure_no`, 'ULTRASOUND' AS `chargetype` FROM `ultrasound` 
```

注意：`procedure`是必须用反引号引用[的 MySQL 保留关键字，所以我只是引用了所有内容。](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# backbone.js - Backbone.js collectin 抛出错误

> ID：13903345
> 
> 赞同：0
> 
> 时间：2012-12-16T16:45:48.780
> 
> 标签：backbone.js

我（作为初学者）制作了一个小的主干函数来附加我的链接，为此我使用要分配模型的集合，

但是集合抛出错误..任何人都可以更正我的代码吗？

```
$(function(){
    var Model = new Backbone.Model({
        data:[
                {name:'Yahoo',href:'http://www.yahoo.com'},
                {name:'Gmail',href:'http://www.gmail.com'},
                {name:'Bing',href:'http://www.bing.com'}
              ]    
    });

    var Collection = new Backbone.Collection.extend({
        model:Model // is this not correct way to do?
    });

    var View = Backbone.View.extend({
        el:'#container',
        events:{
            'click button':'render'
            },
        initialize:function(){
            this.collection = new Collection(); //throw the error!
            this.template = $('#temp').children();
        },
        render:function(){
            var data = this.collection.get('data');
            for(i=0;i<data.length;i++){
                var li = this.template.clone().find('a')
                .attr('href',data[i].href)
                .text(data[i].name).end();
                this.$el.find('ul').append(li);
            }
        }
    });

    var myLink = new View();

}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:58:34.960

模型用于存储和管理单个数据块。在您的情况下，这将是一个名称/href 对。通常，您使用`Backbone.Model.extend`所有特定于模型的方法和属性来创建模型“类”，然后使用该模型“类”创建该模型的实例`new`或将该模型“类”设置为集合的[`model`属性](http://backbonejs.org/#Collection-model)，以便该集合可以创建模型的新实例.

你的模型应该看起来更像这样：

```
var Model = Backbone.Model.extend({
    defaults: {
        name: '',
        href: ''
    }
}); 
```

请注意，那里没有`new`，因为我们只是在创建一个“类”来作为我们模型实例的基础。然后我们将模型连接到一个集合（再次使用`extend`no `new`）：

```
var Collection = Backbone.Collection.extend({
    model: Model
}); 
```

现在您可以[创建集合的一个实例](http://backbonejs.org/#Collection-constructor)并将模型的数据数组传递给它：

```
var links = new Collection([
    { name: 'Yahoo', href: 'http://www.yahoo.com' },
    { name: 'Gmail', href: 'http://www.gmail.com' },
    { name: 'Bing',  href: 'http://www.bing.com'  }
]); 
```

您通常会将集合传递给视图，而不是让视图实例化集合；如果您这么说， [Backbone 将自动](http://backbonejs.org/#View-constructor)设置，您可以：`this.collection``new SomeView({ collection: some_collection })`

```
var View = Backbone.View.extend({
    //...
    initialize: function() {
        this.template = $('#temp').children();
    }, 
```

并通过视图中的其他位置说出`new View({ collection: links })`和访问该集合。`this.collection`

集合是几个模型的集合（有点像数组），它将[混合各种有用的下划线方法，](http://backbonejs.org/#Collection-Underscore-Methods)因此您可以像这样遍历集合：

```
render: function() {
    this.collection.each(function(link) {
        var li = this.template.clone().find('a').attr('href', link.get('href')).text(link.get('name'));
        this.$('ul').append(li);
    }, this);
} 
```

还要注意使用[`get`](http://backbonejs.org/#Model-get)来访问模型属性，模型属性和对象属性是不同的东西。您还可以使用[`toJSON`](http://backbonejs.org/#Model-toJSON)一次展平所有数据。在回调内部创建视图的最后一个`this`参数。Backbone 已经在视图的方法中提供了一个别名，所以我也切换到它。[`each`](http://underscorejs.org/#each)`this``this.$el.find()`[`this.$()`](http://backbonejs.org/#View-dollar)

这是一个简化的演示：http: [//jsfiddle.net/ambiguous/WSqLM/](http://jsfiddle.net/ambiguous/WSqLM/)

# php - 垂直显示项目

> ID：13903346
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:46:20.423
> 
> 标签：php, sorting

> **可能重复：**
> [使用模数排序](https://stackoverflow.com/questions/9445369/sorting-with-a-modulus)

这是我的代码：

```
<?php
while($fetch_cat = mysql_fetch_array($rescat))
    {
        $per_cnt++;
?>
        <li style="margin-left:10px;">
            <a href="sub_cat.php?cat_id=<?php echo $fetch_cat['cat_id'];?>" 
             style="color:#431603;text-decoration:none;"><?php 
             echo stripslashes($fetch_cat['category_name']);?> 
            </a>
        </li>
<?php
    }
?> 
```

这是我得到的输出 - 按字母顺序水平：

```
A B C
D E F
G H I
J 
```

这就是我要显示的内容 - 垂直字母顺序：

```
A E H
B F I
C G J
D 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:57:22.957

这种模式是矩阵变换。见[http://www.laprbass.com/RAY_temp_balbycarr.php](http://www.laprbass.com/RAY_temp_balbycarr.php)

```
<?php // RAY_temp_balbycarr.php
error_reporting(E_ALL);

// CONNECTION AND SELECTION VARIABLES FOR THE DATABASE
$db_host = "localhost"; // PROBABLY THIS IS OK
$db_name = "??";        // GET THESE FROM YOUR HOSTING COMPANY
$db_user = "??";
$db_word = "??";

// OPEN A CONNECTION TO THE DATA BASE SERVER
// MAN PAGE: http://php.net/manual/en/function.mysql-connect.php
if (!$db_connection = mysql_connect("$db_host", "$db_user", "$db_word"))
{
    $errmsg = mysql_errno() . ' ' . mysql_error();
    echo "<br/>NO DB CONNECTION: ";
    echo "<br/> $errmsg <br/>";
}

// SELECT THE MYSQL DATA BASE
// MAN PAGE: http://php.net/manual/en/function.mysql-select-db.php
if (!$db_sel = mysql_select_db($db_name, $db_connection))
{
    $errmsg = mysql_errno() . ' ' . mysql_error();
    echo "<br/>NO DB SELECTION: ";
    echo "<br/> $errmsg <br/>";
    die('NO DATA BASE');
}
// IF WE GOT THIS FAR WE CAN DO QUERIES

// CREATING A TABLE
$sql = "CREATE TEMPORARY TABLE my_table
(
        id INT               NOT NULL AUTO_INCREMENT PRIMARY KEY,
        name     VARCHAR(24) NOT NULL DEFAULT '',
        question VARCHAR(24) NOT NULL DEFAULT '',
        answer   VARCHAR(2)  NOT NULL DEFAULT ''
)"
;
$res = mysql_query($sql);

// IF mysql_query() RETURNS FALSE, GET THE ERROR REASONS
if (!$res)
{
    $errmsg = mysql_errno() . ' ' . mysql_error();
    echo "<br/>QUERY FAIL: ";
    echo "<br/>$sql <br/>";
    die($errmsg);
}

// LOADING IT UP WITH TEST DATA
$sql = "INSERT INTO my_table
( name,     question,    answer )
VALUES
( 'David',  'Question1', 'A' ),
( 'John',   'Question1', 'B' ),
( 'David',  'Question2', 'B' ),
( 'Mary',   'Question1', 'C' ),
( 'John',   'Question2', 'A' ),
( 'David',  'Question3', 'B' ),
( 'Mary',   'Question2', 'A' )
"
;
$res = mysql_query($sql);

// IF mysql_query() RETURNS FALSE, GET THE ERROR REASONS
if (!$res)
{
    $errmsg = mysql_errno() . ' ' . mysql_error();
    echo "<br/>QUERY FAIL: ";
    echo "<br/>$sql <br/>";
    die($errmsg);
}

// GET THE COLUMN TITLES (NAMES)
$cols  = array();
$sql   = "SELECT name FROM my_table GROUP BY name ORDER BY name";
$c_res = mysql_query($sql);
while ($row = mysql_fetch_assoc($c_res))
{
    $cols[] = $row['name'];
}

// GET THE ROW TITLES (QUESTIONS)
$rows  = array();
$sql   = "SELECT question FROM my_table GROUP BY question ORDER BY question";
$r_res = mysql_query($sql);
while ($row = mysql_fetch_assoc($r_res))
{
    $rows[] = $row['question'];
}

// CREATE THE EMPTY MATRIX OF COLUMNS (NAMES) AND ROWS (QUESTIONS)
foreach ($cols as $c)
{
    foreach ($rows as $r)
    {
        $mat[$c][$r] = '-';
    }
}

// LOAD THE MATRIX WITH THE ANSWERS
$sql = "SELECT name, question, answer FROM my_table";
$res = mysql_query($sql);
while ($row = mysql_fetch_assoc($res))
{
    $mat[$row['name']][$row['question']] = $row['answer'];
}

// CREATE THE TABLE
$out = '<table>' . PHP_EOL;

// ADD THE COLUMN TITLES
$out .= '<tr>';
$out .= '<th></th>';
foreach ($cols as $c)
{
    $out .= '<th>' . $c . '</th>';
}
$out .= '</tr>';
$out .= PHP_EOL;

// ADD EACH ROW
foreach ($rows as $r)
{
    $out .= "<tr><td>$r</td>";
    foreach ($cols as $c)
    {
        $out .= '<td>' . $mat[$c][$r] . '</td>';
    }
    $out .= '</tr>';
    $out .= PHP_EOL;
}

// FINISH THE TABLE
$out .= '</table>';
echo $out; 
```

表结构在这里：

```
// LOADING IT UP WITH TEST DATA
$sql = "INSERT INTO my_table
( name,     question,    answer )
VALUES
( 'David',  'Question1', 'A' ),
( 'John',   'Question1', 'B' ),
( 'David',  'Question2', 'B' ),
( 'Mary',   'Question1', 'C' ),
( 'John',   'Question2', 'A' ),
( 'David',  'Question3', 'B' ),
( 'Mary',   'Question2', 'A' )
"
; 
```

# r - 闪亮的 ui.R - 标签中的错误（“div”，列表（...）） - 不确定错误在哪里

> ID：13903347
> 
> 赞同：20
> 
> 时间：2012-12-16T16:46:52.477
> 
> 标签：r, shiny

**更新 - 2012 年 12 月 17 日上午 9 点 CDT**：示例已更新为演示数据和完整代码。**[/更新]。**

**示例数据：** [https ://gist.github.com/4318774](https://gist.github.com/4318774)

*描述：* 我一直在玩新的 Shiny 包（喜欢它！），但还不明白我在`runApp("")`. 错误是`Error in tag("div", list(...)): argument is missing`。

我正在尝试为人口统计数据的图形探索创建一个交互式网络应用程序。我使用以下作为指南：
[https ://gist.github.com/4026749](https://gist.github.com/4026749)
[http://rstudio.github.com/shiny/tutorial/](http://rstudio.github.com/shiny/tutorial/)

与`options(error= recover)`，我得到：

```
Listening on port 8100
Error in tag("div", list(...)) : argument is missing, with no default

Enter a frame number, or 0 to exit   

 1: runApp("//~~my app~~")
 2: tryCatch(while (TRUE) {
    serviceApp(ws_env)
}, finally = {
    timerCallbacks$clear()
    websocket_close(ws_env)
})
 3: tryCatchList(expr, classes, parentenv, handlers)
 4: serviceApp(ws_env)
 5: service(server = ws_env, timeout = timeout)
 6: server$static(j, J$wsinfo)
 7: handler(ws, header)
 8: handler(ws, header)
 9: local({
    cacheContext$with(function() {
        source(filePath, local = new.env(parent = .GlobalEnv))
    })
})
10: eval.parent(substitute(eval(quote(expr), envir)))
11: eval(expr, p)
12: eval(expr, envir, enclos)
13: eval(quote({
    cacheContext$with(function() {
        source(filePath, local = new.env(parent = .GlobalEnv))
    })

14: eval(expr, envir, enclos)
15: cacheContext$with(function() {
    source(filePath, local = new.env(parent = .GlobalEnv))
})
16: func()
17: source(filePath, local = new.env(parent = .GlobalEnv))
18: withVisible(eval(ei, envir))
19: eval(ei, envir)
20: eval(expr, envir, enclos)
21: ui.R#6: shinyUI(pageWithSidebar(headerPanel("Demographics Web Demo - Eglin Data"), sidebarPanel(textInput("plot.ti
22: force(ui)
23: pageWithSidebar(headerPanel("Demographics Web Demo - Eglin Data"), sidebarPanel(textInput("plot.title", "Title:", 
24: bootstrapPage(div(class = "container-fluid", div(class = "row-fluid", headerPanel), div(class = "row-fluid", sideb
25: tagList(importBootstrap(), list(...))
26: div(class = "container-fluid", div(class = "row-fluid", headerPanel), div(class = "row-fluid", sidebarPanel, mainP
27: tags$div(...)
28: tag("div", list(...))
29: div(class = "row-fluid", sidebarPanel, mainPanel)
30: tags$div(...)
31: tag("div", list(...))
32: sidebarPanel(textInput("plot.title", "Title:", "Population Pyramid of Members"), wellPanel(p(strong("Demographic o
33: div(class = "span4", tags$form(class = "well", ...))
34: tags$div(...)
35: tag("div", list(...))
36: tags$form(class = "well", ...)
37: tag("form", list(...))
38: wellPanel(p(strong("Demographic of Interest")), checkboxInput(inputId = "age_dist", label = "Age Distribution", va
39: div(class = "well", ...)
40: tags$div(...)
41: tag("div", list(...)) 
```

我尝试调查发生了什么，但 ?checkboxInput 使代码看起来准确。它也几乎是 RStudio 中“股票”示例的直接副本（上面链接的 github）

*`ui.R`/`Server.R`代码：*
`ui.R`

```
library(shiny)

shinyUI(pageWithSidebar(
  # application title
  headerPanel("Demographics Web Demo - Eglin Data"),

  # sidebar with controls to allow user to define graphical elements and how
  # they want them displayed.
  sidebarPanel(
    # allow the user to write a plot Title
    textInput("plot.title", "Title:", "Population Pyramid of Members"),

    # allow the user to determine which demographic they want to plot
    wellPanel(
      p(strong("Demographic of Interest")),
      checkboxInput(inputId = "age_dist",    label = "Age Distribution",      value = TRUE),
      checkboxInput(inputId = "wealth_dist", label = "Household Wealth",      value = FALSE),
      checkboxInput(inputId = "home_val",    label = "Home Value",            value = FALSE),
      checkboxInput(inputId = "ed_level",    label = "Members' Education",    value = FALSE),
      checkboxInput(inputId = "inc_level",   label = "Members' Est. Income",  value = FALSE),
      checkboxInput(inputId = "h_own",       label = "Homeownership",         value = FALSE),
    ),

    # allow the user to determine age-bracket size. Input used in plotting
    sliderInput("age_cut", "Select Size of Age Brackets:",
                min= 3, max= 20, value= 5),

    # allow the user to subset their demographics by age range
    #sliderInput("age_sub", "Please select the age range you would like to 'zoom-in' on:",
    #            min= 0, max= 120, value= c(15,65)),
  ),

  # display the appropriate graphics based on the user selections defined 
  # above.
  mainPanel(
    h3(textOutput("caption")),

    conditionalPanel(condition= "input.age_dist",
                     plotOutput(outputId= "plot_age")),
    conditionalPanel(condition= "input.wealth_dist",
                     plotOutput(outputId= "plot_wealth")),
    conditionalPanel(condition= "input.home_val",
                     plotOutput(outputId= "plot_home_value")),
    conditionalPanel(condition= "input.ed_level",
                     plotOutput(outputId= "plot_edu")),
    conditionalPanel(condition= "input.inc_level",
                     plotOutput(outputId= "plot_inc")),
    conditionalPanel(condition= "input.h_own",
                     plotOutput(outputId= "plot_h_own"))
  )
)) 
```

`server.R`

```
# require packages
if (!require(ggplot2)) {
  stop("This application requires ggplot2\. To install it, please run 'install.packages(\"ggplot2\")'.\n")
}
if (!require(plotrix)) {
  stop("This application requires plotrix. To install it, please run 'install.packages(\"plotrix\")'.\n")
}
library(shiny)

# load example demo data
load("~~you'll need to load the test data here")

shinyServer(function(input, output) {

  # reactive function based on user input for plot title
  # This function is automatically called to update the display
  output$caption <- reactiveText(function() {
    input$plot.title
  })

  updateAge_f <- reactive(function() {
    # re-define age brackets based on user input
    demos$age_f <- ordered(cut(demos$age, breaks= c(seq(0, max(demos$age), input$age_cut)),
                               include.lowest= T))
  })

  # Generate a plot of the Members' age distribution
  output$plot_age <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()
    # develop input vectors
    male <- as.vector(table(demos$age_f, demos$female_flag)[,1]/summary(demos$female_flag)[1] * 100)
    women <- as.vector(table(demos$age_f, demos$female_flag)[,2]/summary(demos$female_flag)[2] * 100)
    # create plot
    pyramid.plot(lx= male, rx= women,
                 labels= levels(demos$age_f),
                 lxcol= "blue", rxcol= "pink",
                 main= "Population Pyramid of Members",
                 gap= 2, labelcex= .75)
  })

  # generate a plot of members' wealth codes
  output$plot_wealth <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()

    if (input$factor_age == TRUE) {
      ggplot(demos2, aes(wealth)) + geom_bar() + 
        facet_wrap(~ age_f, ncol= 3) + theme_bw() +
        labs(title= "Wealth of Members by Age Bracket",
             y= "Count of Individuals",
             x= "Decile of Wealth (by State)") +
        theme(axis.text.x= element_text(angle= 90))
    } else if (input$factor_age == FALSE) {
      ggplot(demos2, aes(wealth)) + geom_bar() + 
        theme_bw() +
        labs(title= "Wealth of Members of your Members",
             y= "Count of Individuals",
             x= "Decile of Wealth (by State)") +
        theme(axis.text.x= element_text(angle= 90))
    }
  })

  # generate a plot of home value of members' properties
  output$plot_home_value <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()

    if (input$factor_age == TRUE) {
      ggplot(demos2, aes(home_value)) + geom_bar() + 
        facet_wrap(~ age_f, ncol= 3) + theme_bw() +
        labs(title= "Home Value by Age Bracket",
             y= "Count of Individuals",
             x= "Home Value") +
        theme(axis.text.x= element_text(angle= 90))
    } else if (input$factor_age == FALSE) {
      ggplot(demos2, aes(home_value)) + geom_bar() + 
        theme_bw() +
        labs(title= "Home Value of your Members",
             y= "Count of Individuals",
             x= "Home Value") +
        theme(axis.text.x= element_text(angle= 90))
    }
  })

  # generate a plot of education distribution
  output$plot_edu <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()

    if (input$factor_age == TRUE) {
      ggplot(demos2, aes(ed_code)) + geom_bar() + 
        facet_wrap(~ age_f, ncol= 3) + theme_bw() +
        labs(title= "Education Level by Age Bracket",
             y= "Count of Individuals",
             x= "Education Level") +
        theme(axis.text.x= element_text(angle= 90))
    } else if (input$factor_age == FALSE) {
      ggplot(demos2, aes(ed_code)) + geom_bar() + 
        theme_bw() +
        labs(title= "Education Level of your Members",
             y= "Count of Individuals",
             x= "Education Level") +
        theme(axis.text.x= element_text(angle= 90))
    }
  })

  # generate a plot of members' estimated income levels
  output$plot_inc <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()

    if (input$factor_age == TRUE) {
      ggplot(demos2, aes(inc)) + geom_bar() + 
        facet_wrap(~ age_f, ncol= 3) + theme_bw() +
        labs(title= "Estimated Income by Age Bracket",
             y= "Count of Individuals",
             x= "Estimated Income Range") +
        theme(axis.text.x= element_text(angle= 90))
    } else if (input$factor_age == FALSE) {
      ggplot(demos2, aes(inc)) + geom_bar() + 
        theme_bw() +
        labs(title= "Estimated Income of your Members",
             y= "Count of Individuals",
             x= "Estimated Income Range") +
        theme(axis.text.x= element_text(angle= 90))
    }
  })

  # generate a plot of members' homeownership
  output$plot_h_own <- reactivePlot(function() { 
    # call to update age factor if needed
    updateAge_f()

    if (input$factor_age == TRUE) {
      ggplot(demos2, aes(homeOwner)) + geom_bar() + 
        facet_wrap(~ age_f, ncol= 3) + theme_bw() +
        labs(title= "Home Ownership by Age Bracket",
             y= "Count of Individuals",
             x= "Home Owner / Renter") +
        theme(axis.text.x= element_text(angle= 90))
    } else if (input$factor_age == FALSE) {
      ggplot(demos2, aes(homeOwner)) + geom_bar() + 
        theme_bw() +
        labs(title= "Home Ownership of your Members",
             y= "Count of Individuals",
             x= "Home Owner / Renter") +
        theme(axis.text.x= element_text(angle= 90))
    }
  })
}) 
```

任何帮助将不胜感激，仍在努力学习闪亮（像其他人一样）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-17T15:32:52.813

在 ui.R 中，此行的末尾不应有逗号：

```
sliderInput("age_cut", "Select Size of Age Brackets:",
            min= 3, max= 20, value= 5), 
```

此行的末尾也不应该有逗号

```
checkboxInput(inputId = "h_own",       label = "Homeownership",         value = FALSE), 
```

一般来说，在一个部分的最后一个组成部分之后不应该有逗号。就像任何 R 函数一样，您通常不会以逗号结束函数调用。例如`sum(5,)`给出一个错误。

# c# - 同时突出显示 2 个文本框中的文本

> ID：13903349
> 
> 赞同：3
> 
> 时间：2012-12-16T16:46:52.707
> 
> 标签：c#, winforms, textbox, format

我正在尝试使用 C# 为在线游戏创建数据包分析器，但我是 C# 新手。

我有 2 个 RichTextBoxes，1 个以字节显示数据包，另一个以 ANSI 显示数据包。

这是我想要实现的目标：

1.  当我在字节文本框中选择（突出显示）数据时，我希望 ANSI 文本框中的相应数据也被突出显示。（反之亦然）

2.  当我更改文本框 1 中的数据时，我希望另一个文本框中的相应数据也被更改。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:57:49.207

你通常会根据这样的事件做这种事情`onHighlightedTextChanged`事件执行此类操作，但由于此类事件不存在，因此在计时器中包含以下代码是一种更简单的解决方案：

```
textBox2.Focus();
textBox2.SelectionStart = textBox1.SelectionStart;
textBox2.SelectionLength = textBox1.SelectionLength; 
```

随着此代码每 10 毫秒更新一次（或您设置的任何内容），它似乎会动态突出显示文本。

对于将一个文本框中的数据更改为另一个文本框中的数据，您可以使用`TextChanged`带有以下代码的事件：

```
textbox2.Text = ByteToAscii(textbox1.Text) 
```

ByteToAscii 是你自己的函数

# macos - 使用动画代理对 NSView 缩放操作进行动画处理

> ID：13903350
> 
> 赞同：1
> 
> 时间：2012-12-16T16:46:57.470
> 
> 标签：macos, cocoa

快速提问：

有没有办法使用 NSView 动画代理来缩放支持图层的 NSView 的内容？

# php - 有没有办法将值传递到另一个页面？

> ID：13903360
> 
> 赞同：0
> 
> 时间：2012-12-16T16:47:57.113
> 
> 标签：php

在`a.php`我做：

```
$a = "hello,world";
$_POST['a'] = $a; 
```

in `b.php`，我要获取`$a`值，当 i 时`echo $_POST['a']`，没有值输出。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:51:48.843

您可以使用`$_SESSION[]`.

这是一个例子：

```
$_SESSION['a'] = $a; 
```

并将其用于`a.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:03:55.243

页面**a.php**：

```
<?php
session_start();
$a = "hello,world";
$_SESSION["name_anything"] = $a; // This will store $a value to the session
//here i've given session name "name_anything"
?> 
```

页**b.php**：

```
<?php
session_start(); //you need to initiate the session using this function
//You need to session_start() on every page on which you want to use session.
//Even on the page on which you are storing the session.
echo $_SESSION["name_anything"]; //this will print the value of $a
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T16:49:51.790

这不是您将信息发布到另一个页面的方式，您需要为此使用表单，或者另一种选择是使用 GET 请求或使用会话。

尝试阅读这篇文章或其他 php 文章。 [http://mrarrowhead.com/index.php?page=php_passing_variables.php](http://mrarrowhead.com/index.php?page=php_passing_variables.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T16:52:06.003

这将是 a.php 中的 HTML 表单：

```
<form action="b.php" method="post" >
<input type="text" name="poster" />
<input type="submit" name="submit" />
</form> 
```

在b.php中，你可以放一些PHP来回显数据

```
<?php

if(isset($_POST['submit'])){

echo $_POST['poster']; 

} 
```

# jquery - 如何使用 jQuery 将特定单元格附加到外部表中的特定行

> ID：13903362
> 
> 赞同：0
> 
> 时间：2012-12-16T16:48:21.540
> 
> 标签：jquery, xml, html-table

我有一个我正在尝试构建的动态表。

前 2 列是硬编码的（想想标题），我需要基于循环遍历 XML 文件的内容来动态添加列。

第二行的每个单元格都包含一个子表。

循环遍历 XML 文件，如何将“XXX”动态添加到第 3 行的*外部*表，将“YYY”添加到第 4 行，依此类推？

--我已经重新发布了更多的表格。请注意，每行的第 3 和第 4 个单元格的内容是从 XML 动态生成的（可能更多基于 XML）。为了获得帮助，我对内容进行了硬编码。还有更多的行，但如果我能通过这一点，我应该很好。--

```
<table class="someclass" border="1" id="myTable">
    <tr>
        <th>Criteria</th>
        <th>Page</th>
            <th width="190px">
                Person 1 - <span id="name1" name="name1">Joe</span>
            </th>
            <th width="190px">
                Person 2 - <span id="name1" name="name1">Bob</span>
            </th>
    </tr>
    <tr>
        <td>
            Stats
        </td>
        <td class="page">
        </td>
        <td>
            <table id="stats1">
                <tr>
                    <td class="StatTitle">ST:</td>
                    <td class="StatValue"><input id="baseST1" name="baseST1" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">HP:</td>
                    <td class="StatValue"><input id="baseHPs1" name="baseHPs1" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">DX:</td>
                    <td class="StatValue"><input id="baseDX1" name="baseDX1" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">Will:</td>
                    <td class="StatValue"><input id="baseWill1" name="baseWill1" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">IQ:</td>
                    <td class="StatValue"><input id="baseIQ1" name="baseIQ1" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">Per:</td>
                    <td class="StatValue"><input id="basePer1" name="basePer1" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">HT:</td>
                    <td class="StatValue"><input id="baseHT1" name="baseHT1" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">FP:</td>
                    <td class="StatValue"><input id="baseFP1" name="baseFP1" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">Speed:</td>
                    <td class="StatValue"><input id="BS1" name="BS1" type="text" class="statsCalc" disabled="disabled"></span></td>
                    <td class="StatTitle">Move:</td>
                    <td class="StatValue"><input id="BM1" name="BM1" type="text" class="statsCalc" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">B Lift:</td>
                    <td class="StatValue"><input id="BL1" name="BL1" type="text" class="statsCalc" disabled="disabled"></span></td>
                    <td class="StatTitle">Dodge:</td>
                    <td class="StatValue"><input id="Dodge1" name="Dodge1" type="text" class="statsCalc" disabled="disabled"></span></td>
                </tr>
            </table>
        </td>
        <td>
            <table id="stats2">
                <tr>
                    <td class="StatTitle">ST:</td>
                    <td class="StatValue"><input id="baseST2" name="baseST2" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">HP:</td>
                    <td class="StatValue"><input id="baseHPs2" name="baseHPs2" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">DX:</td>
                    <td class="StatValue"><input id="baseDX2" name="baseDX2" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">Will:</td>
                    <td class="StatValue"><input id="baseWill2" name="baseWill2" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">IQ:</td>
                    <td class="StatValue"><input id="baseIQ2" name="baseIQ2" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">Per:</td>
                    <td class="StatValue"><input id="basePer2" name="basePer2" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">HT:</td>
                    <td class="StatValue"><input id="baseHT2" name="baseHT2" type="text" class="stats" disabled="disabled"></span></td>
                    <td class="StatTitle">FP:</td>
                    <td class="StatValue"><input id="baseFP2" name="baseFP2" type="text" class="stats" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">Speed:</td>
                    <td class="StatValue"><input id="BS2" name="BS2" type="text" class="statsCalc" disabled="disabled"></span></td>
                    <td class="StatTitle">Move:</td>
                    <td class="StatValue"><input id="BM2" name="BM2" type="text" class="statsCalc" disabled="disabled"></span></td>
                </tr>
                <tr>
                    <td class="StatTitle">B Lift:</td>
                    <td class="StatValue"><input id="BL2" name="BL2" type="text" class="statsCalc" disabled="disabled"></span></td>
                    <td class="StatTitle">Dodge:</td>
                    <td class="StatValue"><input id="Dodge2" name="Dodge2" type="text" class="statsCalc" disabled="disabled"></span></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            Maneuver
        </td>
        <td class="page">
            363
        </td>
        <td>
            <div id="maneuver1">
                <input type="hidden" name="person1" />
            </div>
            <div id="throwDiv1" name="throwDiv1" class="throw">
                <label class="throw">Lbs</label>
                <input type="text" id="throwInput1" name="throwInput1" class="throw" />
            </div>
        </td>
        <td>
            <div id="maneuver2">
                <input type="hidden" name="person2" />
            </div>
            <div id="throwDiv2" name="throwDiv2" class="throw">
                <label class="throw">Lbs</label>
                <input type="text" id="throwInput2" name="throwInput2" class="throw" />
            </div>
        </td>
    </tr>

    <tr>
        <td>
            Weapon
        </td>
        <td class="page">
            99
        </td>
        <td>
            <select name="weapon1" id="weapon1">
            </select>
            <a href="#" class="weaponFlyouts">
                Details
                <span class="weaponMaster">
                    <img class="callout" src="images/callout.gif" />
                    <span id="weaponName1" name="weaponName1" class="weaponName"></span><img id="weaponImage1" src="">
                    <table>
                        <tr>
                            <th>Caliber</th>
                            <th>Damage</th>
                            <th>Acc</th>
                            <th>Range</th>
                            <th>Weight</th>
                            <th>ROF</th>
                            <th>Cap</th>
                            <th>ST</th>
                            <th>Bulk</th>
                            <th>Recoil</th>
                            <th>Source</th>
                            <th>Page</th>
                        </tr>
                        <tr>
                            <td nowrap><span id="weaponCal1" name="weaponCal1"></span></td>
                            <td><span id="weaponDamage1" name="weaponDamage1"></span></td>
                            <td><span id="weaponAcc1" name="weaponAcc1"></span></td>
                            <td><span id="weaponRange1" name="weaponRange1"></span></td>
                            <td><span id="weaponWeight1" name="weaponWeight1"></span></td>
                            <td><span id="weaponROF1" name="weaponROF1"></span></td>
                            <td><span id="weaponCap1" name="weaponCap1"></span></td>
                            <td><span id="weaponST1" name="weaponST1"></span></td>
                            <td><span id="weaponBulk1" name="weaponBulk1"></span></td>
                            <td><span id="weaponRecoil1" name="weaponRecoil1"></span></td>
                            <td><span id="weaponSource1" name="weaponSource1"></span></td>
                            <td><span id="weaponPage1" name="weaponPage1"></span></td>
                        </tr>
                    </table>
                </span>
            </a>
        </td>
        <td>
            <select name="weapon2" id="weapon2">
            </select>
            <a href="#" class="weaponFlyouts">
                Details
                <span class="weaponMaster">
                    <img class="callout" src="images/callout.gif" />
                    <span id="weaponName2" name="weaponName2" class="weaponName"></span><img id="weaponImage2" src="">
                    <table border="1">
                        <tr>
                            <th>Caliber</th>
                            <th>Damage</th>
                            <th>Acc</th>
                            <th>Range</th>
                            <th>Weight</th>
                            <th>ROF</th>
                            <th>Cap</th>
                            <th>ST</th>
                            <th>Bulk</th>
                            <th>Recoil</th>
                            <th>Source</th>
                            <th>Page</th>
                        </tr>
                        <tr>
                            <td nowrap><span id="weaponCal2" name="weaponCal2"></span></td>
                            <td><span id="weaponDamage2" name="weaponDamage2"></span></td>
                            <td><span id="weaponAcc2" name="weaponAcc2"></span></td>
                            <td><span id="weaponRange2" name="weaponRange2"></span></td>
                            <td><span id="weaponWeight2" name="weaponWeight2"></span></td>
                            <td><span id="weaponROF2" name="weaponROF2"></span></td>
                            <td><span id="weaponCap2" name="weaponCap2"></span></td>
                            <td><span id="weaponST2" name="weaponST2"></span></td>
                            <td><span id="weaponBulk2" name="weaponBulk2"></span></td>
                            <td><span id="weaponRecoil2" name="weaponRecoil2"></span></td>
                            <td><span id="weaponSource2" name="weaponSource2"></span></td>
                            <td><span id="weaponPage2" name="weaponPage2"></span></td>
                        </tr>
                    </table>
                </span>
            </a>
        </td>
    </tr>
</table> 
```

有更多的行，但这或多或少地显示了结构。

我让 jQuery 在第一行和第二行（第二行有子表）上工作，但是我的代码在外部表和内部表之间不断混淆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:06:32.993

我会将您的表格拆分为 thead 和 tbody ，如下所示：

```
<table class="someclass" border="1" id="myTable">
<thead>
    <tr>
        <th>Criteria</th>
        <th>Page</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            Stats
        </td>
        <td class="page">
        </td>
    </tr>
    <tr>
        <td>
            Row 3
        </td>
        <td class="page">
            363
        </td>
    </tr>
    <tr>
        <td>
            Row 4
        </td>
        <td class="page">
            400
        </td>
    </tr>
</tbody>
</table> 
```

从您的描述看来，您有标题、第二行以及之后的行。在 jQuery 中，您可以执行以下操作：

```
//start off with your second row
var body = "<tr><td>Stats</td><td class="page"></td>";
//loop through the rest of your rows and for each row do:
body += "<tr><td>Row 3</td><td class="page">363</td>"; //etc...
//then set your tbody to have that text
$("#myTable > tbody").html(body); 
```

# ejb-3.1 - EJB 3.1 有状态 Bean 的行为类似于单例 Bean

> ID：13903364
> 
> 赞同：0
> 
> 时间：2012-12-16T16:48:25.063
> 
> 标签：ejb-3.1, stateful, stateful-session-bean

我正在尝试使用有状态会话 bean 对 EJB 3.1 进行编程。我应该很清楚什么是 EJB 以及有状态、无状态和单例之间的区别。

但是我的有状态 bean 有一个奇怪的行为。它表现为单身！我的意思是从几个客户端/浏览器/机器调用下面的 servlet (ShoppingCartServlet)...，返回相同的 bean 并且每次都增加相同的值。“count”值是从客户端共享的，因为 bean 是一个单例。

请帮我理解！！

这里是代码。

**小服务程序代码**

```
@WebServlet(name="ShoppingCartServlet", urlPatterns="/shoppingCart")
public class ShoppingCartServlet extends HttpServlet {
    private static final long serialVersionUID = 2789580260930727133L;

    @EJB 
    private ShoppingCart shoppingCart;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        int count = shoppingCart.increaseCount();

        HttpSession session = request.getSession();     
        session.setAttribute("count", count);

        String nextJSP = "/shoppingCart.jsp";
        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);       
        dispatcher.forward(request, response);
    }
} 
```

**EJB 代码**

```
@Stateful
@LocalBean
public class ShoppingCart {

    private int count;  

    public int increaseCount() {
        count++;
        return count;
    }
} 
```

Servlet 打包在 WAR 文件中，而 EJB 打包在 JAR 文件中。两者都部署在一个唯一的 EAR 文件中。

**编辑：**我尝试更改我的 servlet 代码，如下所示，但现在每次调用都会创建一个新的有状态 Bean。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Context ctx = new InitialContext();         
    ShoppingCart  shoppingCart = (ShoppingCart) ctx.lookup("java:global/jeeapp/jeeapp-business/ShoppingCart!org.madbit.jeeapp.shopping.ejb.ShoppingCart");
    int count = shoppingCart.increaseCount();

    HttpSession session = request.getSession();     
    session.setAttribute("count", count);

    String nextJSP = "/shoppingCart.jsp";
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);       
    dispatcher.forward(request, response);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:58:15.417

有单个 servlet 实例同时用于多个请求。因此，它是相同的有状态 bean 注入，被所有请求共享。

在 servlet 中使用局部变量而不是实例变量来保证线程安全是一种很好的做法。因此，您可以在方法中查找 bean，而不是在类级别注入。

* * *

**编辑 ：**

您可以将通过查找获得的 EJB 实例存储在`HttpSession`对象中以供将来使用。因此，将重复使用相同的实例，而不是每次都获取它，并且通过这种方式，将保持对话状态。

# ruby-on-rails - Rails - 如何将一种产品与多个用户相关联？

> ID：13903365
> 
> 赞同：0
> 
> 时间：2012-12-16T16:48:27.513
> 
> 标签：ruby-on-rails, activerecord

这里的初学者问题，非常感谢任何帮助。我有一个用户表、一个产品表和一个名为 products_users 的连接表。通过执行以下操作，我可以成功地将产品链接到命令行中的用户：

```
u = User.where(:state => 'Oregon').first
u.products << Product.where(:search_location => 'Portland') 
```

我的第一个问题是如何将 Portland 产品链接到拥有俄勒冈州的所有用户，而不仅仅是一个用户？如果我不添加 .first 它不起作用。

但我的主要问题是如何让应用程序执行此操作而不是我在命令行中执行此操作？例如，我有一个包含 10,000 个用户的表，其中 1000 个是 :state => 'Oregon' 那么如何创建一个管理页面，在该页面中我可以在 state 字段中键入 Oregon，然后在另一个字段中键入 Portland 和适当的条目链接在一起并添加到连接表中？

更新

使用 siddick 的代码我想出了这个：

管理员.rb

```
def link_product_to_user
products = Product.where(:search_location => params[:location])
User.where(:state => params[:state]).find_each do |user|
  user.products << products
end
  end 
```

admin_controller.rb

```
def index    
@link = link_product_to_user
end 
```

管理员/index.html.erb

```
<%= form_for(@link) do |f| %>
<div class="field">
  <%= f.label :location %><br />
  <%= f.text_field :location %>
</div>
<div class="field">
  <%= f.label :state %><br />
  <%= f.text_field :state %>
</div>

<div class="actions">
  <%= f.submit %>
</div> 
```

这给出了以下错误：

```
undefined local variable or method `link_product_to_user' for #<AdminController:0x007fd8e899bf10> 
```

我应该如何定义方法以便可以找到它？并且使用 form_for(@link) 将值提交给方法的正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:17:11.987

您可以使用`find_each`来一一处理记录。

```
def your_action
  products = Product.where(:search_location => params[:location])
  User.where(:state => params[:state]).find_each do |user|
    user.products << products
  end if products.exists?
  ... Your code ...
end 
```

索引视图文件可以是：

```
<%= form_tag(:action => "link_product_to_user") do %>
  <div class="field">
    <%= label_tag :location %><br />
    <%= text_field_tag :location, params[:location] %>
  </div>
  <div class="field">
    <%= label_tag :state %><br />
    <%= text_field_tag :state, params[:state] %>
  </div>
  <div class="actions">
    <%= submit_tag %>
  </div>
<% end %> 
```

# r - 如何在粘贴文本时避免 ESS 下划线自动替换为“<-”但在编写下划线时保留它

> ID：13903366
> 
> 赞同：6
> 
> 时间：2012-12-16T16:48:35.233
> 
> 标签：r, emacs, ess

在 emacs 下使用 ESS 编写 R 代码时，将默认行为 os 的 '_' 替换为 '<-' 很有用（插入两个连续的 '_' 将插入下划线本身）。但是在 ESS 模式下将代码粘贴到任何缓冲区时，也会发生这种替换，并且任何“_”都会被“<-”替换，这不是我想要的行为。

有没有办法只在粘贴文本时防止替换？

目前，我已完全禁用将此代码添加到我的 .emacs 的替换

```
(ess-toggle-underscore nil) 
```

但是我想仅在写入时而不是在粘贴时将 '_' 恢复为 '<-' 替换。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T22:57:13.430

这不应该发生。请向 ess-help 或 with 报告带有更多详细信息的错误`M-x ess-submit-bug-report`。您正在粘贴终端会话吗？

# php - 为什么 str_replace 不替换此字符串？

> ID：13903370
> 
> 赞同：1
> 
> 时间：2012-12-16T16:49:24.783
> 
> 标签：php, mysql, css, str-replace

我有以下 PHP 代码，它应该将 CSS 文件中的数据加载到变量中，搜索旧的正文背景颜色，用提交的表单中的颜色替换它，重新保存 CSS 文件，最后更新数据库中的颜色。问题是， str_replace 似乎没有替换任何东西。

这是我的 PHP 代码（存储在“processors/save_program_settings.php”中）：

```
<?php
require("../security.php");

$institution_name = mysql_real_escape_string($_POST['institution_name']);
$staff_role_title = mysql_real_escape_string($_POST['staff_role_title']);
$program_location = mysql_real_escape_string($_POST['program_location']);
$background_colour = mysql_real_escape_string($_POST['background_colour']);
$bar_border_colour = mysql_real_escape_string($_POST['bar_border_colour']);
$title_colour = mysql_real_escape_string($_POST['title_colour']);

$url = $global_variables['program_location'];

$data_background = mysql_query("SELECT * FROM sents_global_variables WHERE name='background_colour'") or die(mysql_error());
$background_output = mysql_fetch_array($data_background);
$css = file_get_contents($url.'/default.css');
$str = "body { background-color: #".$background_output['data']."; }";
$str2 = "body { background-color: #".$background_colour."; }";
$css2 = str_replace($str, $str2, $css);

unlink('../default.css');
file_put_contents('../default.css', $css2);

mysql_query("UPDATE sents_global_variables SET data='{$institution_name}' WHERE name='institution_name'") or die(mysql_error());
mysql_query("UPDATE sents_global_variables SET data='{$staff_role_title}' WHERE name='role_title'") or die(mysql_error());
mysql_query("UPDATE sents_global_variables SET data='{$program_location}' WHERE name='program_location'") or die(mysql_error());
mysql_query("UPDATE sents_global_variables SET data='{$background_colour}' WHERE name='background_colour'") or die(mysql_error());
mysql_query("UPDATE sents_global_variables SET data='{$bar_border_colour}' WHERE name='bar_border_colour'") or die(mysql_error());
mysql_query("UPDATE sents_global_variables SET data='{$title_colour}' WHERE name='title_colour'") or die(mysql_error());

header('Location: '.$url.'/pages/start.php?message=program_settings_saved');
?> 
```

这是我的 CSS（存储在“default.css”中）：

```
@charset "utf-8";
/* CSS Document */

body,td,th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #000;
}
body {
    background-color: #CCCCFF;
}
.main_table th {
    background:#003399;
    font-size:24px;
    color:#FFFFFF;
}
.main_table {
    background:#FFF;
    border:#003399 solid 1px;
}
.subtitle {
    font-size:20px;
}
input#login_username, input#login_password {
    height:30px;
    width:300px;
    font-size:24px;
}
input#login_submit {
    height:30px;
    width:150px;
    font-size:16px;
}
.timetable_cell_lesson {
    width:100px;
    font-size:10px;
}
.timetable_cell_tutorial_a, .timetable_cell_tutorial_b, .timetable_cell_break, .timetable_cell_lunch {
    width:100px;
    background:#999;
    font-size:10px;
} 
```

我在 PHP 文件中使用以下代码运行了一些检查：

```
echo $css . "<br><br>" . $str . "<br><br>" . $str2 . "<br><br>" . $css2; exit; 
```

它输出（如您所见，它没有改变 CSS 中的任何内容）：

```
@charset "utf-8"; /* CSS Document */ body,td,th { font-family: Arial, Helvetica, sans-serif; font-size: 14px; color: #000; } body { background-color: #CCCCFF; } .main_table th { background:#003399; font-size:24px; color:#FFFFFF; } .main_table { background:#FFF; border:#003399 solid 1px; } .subtitle { font-size:20px; } input#login_username, input#login_password { height:30px; width:300px; font-size:24px; } input#login_submit { height:30px; width:150px; font-size:16px; } .timetable_cell_lesson { width:100px; font-size:10px; } .timetable_cell_tutorial_a, .timetable_cell_tutorial_b, .timetable_cell_break, .timetable_cell_lunch { width:100px; background:#999; font-size:10px; }

body { background-color: #CCCCFF; }

body { background-color: #FF5719; }

@charset "utf-8"; /* CSS Document */ body,td,th { font-family: Arial, Helvetica, sans-serif; font-size: 14px; color: #000; } body { background-color: #CCCCFF; } .main_table th { background:#003399; font-size:24px; color:#FFFFFF; } .main_table { background:#FFF; border:#003399 solid 1px; } .subtitle { font-size:20px; } input#login_username, input#login_password { height:30px; width:300px; font-size:24px; } input#login_submit { height:30px; width:150px; font-size:16px; } .timetable_cell_lesson { width:100px; font-size:10px; } .timetable_cell_tutorial_a, .timetable_cell_tutorial_b, .timetable_cell_break, .timetable_cell_lunch { width:100px; background:#999; font-size:10px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:54:38.703

我相信问题可能是您试图替换它：

```
body {
    background-color: #CCCCFF;
} 
```

通过尝试在您的 CSS 文件中找到它：

```
body { background-color: #CCCCFF; } 
```

我认为最简单的解决方案是在 CSS 文件中正确格式化该行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:58:34.877

可能问题是“\ n”

这一行：

```
$css = file_get_contents($url.'/default.css'); 
```

应该

```
$css = file_get_contents($url.'/default.css');
$css = str_replace("\n","", $css); 
```

或者您可以使用**preg_replace**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:00:46.043

file_get_contents() 保留换行符，但浏览器没有，您没有得到任何替换，因为您的 css 文件不包含

```
body { background-color: #CCCCFF; } 
```

您的测试让您有些失望，因为当您回显 $css 的内容时，换行符似乎已被删除。这是浏览器忽略空格的产物 - 但您可以确定原始空格仍在源代码中。

您可能会考虑 preg_replace 并使用正则表达式来搜索可选的换行符。您还可以通过用其他标记替换新行，进行初始替换，然后将换行重新切换来进行 3 阶段替换。

# c# - WPF 线虚拟化

> ID：13903375
> 
> 赞同：2
> 
> 时间：2012-12-16T16:49:55.563
> 
> 标签：c#, wpf, ui-virtualization

我目前正在 WPF 中构建波形控件。我打算建立一个缩放功能。这意味着用户应该能够查看整个音频文件的每个样本。众所周知......而且audiofile可以有非常非常非常多的样本。所以我必须画很多线，这将是开销。

所以我考虑只在需要时才画线。问题是我不知道什么是最好和最干净的方法。您对我如何开始构建这样的功能有任何想法吗？我不想要一个看起来像炸脑筋的代码。如果有人有一个好主意来开始解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:38:00.420

实现这一目标的一种方法是获取轨道的可见范围，然后绘制属于该区域的线。[此](http://blogs.msdn.com/b/kaelr/archive/2010/07/29/zoomablecanvas.aspx)控件可能对您有所帮助。就个人而言，即使它不使用 WPF 的缩放功能，我也会将样本的坐标保存在只读集合中，然后在需要渲染时将它们的组件乘以缩放因子。您将有一个`ScrollViewer`with `ScrollableWidth`（假设您的样本水平跨越）等于最后一个样本的 x 坐标相乘。获得上述效果的一种方法是始终绘制最后一个样本，而不将其连接到最后一个可见的样本。最后，您将在您选择的容器中绘制可见线并将其用于 ScrollViewer 的`Content`属性。

`Canvas`使用 a和 a添加一个小示例`ScrollViewer`，您可以使用它在滚动/缩放时更新内容。

```
var scrollViewer = _scrollViewer; //_scrollViewer is our container
var min = scrollViewer.ContentHorizontalOffset; //Calculating visible ranges
var max = min + scrollViewer.ViewportWidth;
int[] samples = { 10, 20, 30, 50, 80, 90, 100, 130 }; //Our original samples
const double zoomFactor = 10.0;
var canvas = new Canvas {HorizontalAlignment = HorizontalAlignment.Left};
foreach (var sampleX in samples)
{
    var multipliedX = sampleX*zoomFactor;
    if (multipliedX < min || multipliedX > max) continue;
    var sampleCircle = new Ellipse {Width = 5, Height = 5, Stroke = Brushes.Black}; //Our Shape for the sample
    canvas.Children.Add(sampleCircle);
    Canvas.SetLeft(sampleCircle, multipliedX);
}
canvas.Width = samples.Last()*zoomFactor; //To extend the ScrollViewer's scrollable width
scrollViewer.Content = canvas; 
```

# asp.net-mvc - 如何在 mvc 4 中使用 JSON 帖子测试 AntiForgeryToken

> ID：13903378
> 
> 赞同：2
> 
> 时间：2012-12-16T16:50:39.603
> 
> 标签：asp.net-mvc, json, antiforgerytoken, simplemembership

我使用 MVC 4 Visual Studio 2012 将 Json 发布到控制器...我已成功将 json 数据与 AntiForgeryToken 一起传递给控制器​​，但我不知道如何准确测试它是否真的在工作“AntiForgeryToken 的正确性”。我还尝试在客户端的 __RequestVerificationToken 代码中添加 9999 以查看它是否在服务器端进行验证，并且确实如此！！！。我的猜测是，如果我是正确的，它不应该？？？？这是我的代码

```
<script type="text/javascript">

$(document).ready(function (options) {
    $('#id_login_submit').click(function () {

        var token = $('input[name=__RequestVerificationToken]').val();

//var token = $('input[name=__RequestVerificationToken]').val()+"99999";
//   alert("token :: "+token);

        var _authetication_Data = { _UserName: $('#u1').val(), _Password: $('#p1').val(), "__RequestVerificationToken": token }

            $.ajax({
                type: "POST",
                url: "/Account/ProcessLoginRequest",
                data: JSON.stringify({ model: _authetication_Data }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    alert(response);
                }
            });

    });
}); 
```

```
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    @Html.LabelFor(m => m._UserName)
    @Html.TextBoxFor(m => m._UserName, new { id = "u1"})

    @Html.LabelFor(m => m._Password)
    @Html.PasswordFor(m => m._Password, new { id = "p1"})

    <input type="button" id="id_login_submit" value="Login" />
} 
```

```
 [HttpPost]
   [ValidateAntiForgeryToken]
    public JsonResult ProcessLoginRequest(LoginModel model)
    {
        string returnString = null;

      if (ModelState.IsValid && WebSecurity.Login(model._UserName, model._Password, persistCookie: false))
        {
            returnString = "user is authenticated";     
        }

        else
        { returnString = "user not authenticated"; }

        return Json(returnString, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:56:23.707

是的，你可以......但你可以尝试使用`serialize()`方法。像这样的东西：

```
$.ajax({
                type: "POST",
                url: "/Account/ProcessLoginRequest",
                data: $("#your_form_id").serialize(),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    alert(response);
                }
            }); 
```

当您使用`serialize`方法时，这会将标记内的所有元素`form`序列化为数据数组，例如`{ field: value, field2: value2, field3: value3 }`，并且 Token 将是隐藏的输入，因此它将在序列化结果上。

有关更多信息，请查看文档：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:35:36.237

它对我有用，实际上我没有使用表单，这是我的代码：

查看代码：

> ```
> var token = $('input[name=__RequestVerificationToken]').val();        
> 
>         $.post(url, { Telefono: telefono, MensajeSMS: mensajeSMS, __RequestVerificationToken : token }, ............... 
> ```

控制器方法，只需使用 apropiate 属性签名：

> [ValidateAntiForgeryToken] public JsonResult jsonEnviarSMS（字符串 Telefono，字符串 MensajeSMS）

# c# - 乐透计划不会停止

> ID：13903379
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:50:40.810
> 
> 标签：c#

所以我正在做一个乐透游戏。您必须输入 6 个幸运号码，如果它们与乐透号码相同，则您中奖。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace OefeningExaam
{
    class Program
    {
        static void Main(string[] args)
        {
            Random getal = new Random();
            int[] lottotrekking = new int[6];

            Console.WriteLine("Geef je geluksgetallen in <tussen 1 en 42>");
            Console.WriteLine("Geef je eerste getal in");
            int getal1 = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je tweede getal in");
            int getal2 = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je derde getal in");
            int getal3 = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je vierde getal in");
            int getal4 = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je vijfde getal in");
            int getal5 = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je zesde getal in");
            int getal6 = Convert.ToInt32(Console.ReadLine());

            while (getal1 != lottotrekking[0] || getal2 != lottotrekking[1] || getal3 != lottotrekking[2] || getal4 != lottotrekking[3] || getal5 != lottotrekking[4] || getal5 != lottotrekking[4] || getal6 != lottotrekking[5])
            {

                for (int i = 0; i < lottotrekking.Length; i++)
                {
                    int cijfer = getal.Next(1, 43);
                    lottotrekking[i] = cijfer;
                    Console.WriteLine(lottotrekking[0] + "\t " + lottotrekking[1] + "\t " + lottotrekking[2] + "\t " + lottotrekking[3] + "\t " + lottotrekking[4] + "\t " + lottotrekking[5]);
                }
            }

            if (getal1 == lottotrekking[0] && getal2 == lottotrekking[1] && getal3 == lottotrekking[2] && getal4 == lottotrekking[3] && getal5 == lottotrekking[4] && getal5 == lottotrekking[4] && getal6 == lottotrekking[5])
            {
                Console.WriteLine(lottotrekking[0] + " " + lottotrekking[1] + " " + lottotrekking[2] + " " + lottotrekking[3] + " " + lottotrekking[4] + " " + lottotrekking[5]);
            }

            Console.ReadLine();   
        }
    }
} 
```

问题是程序只是继续运行并且不会停止。当幸运数字与乐透数字相同时，它应该停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:53:40.957

像这样的东西会起作用。但是匹配所有数字可能需要一段时间。

```
static void Main(string[] args)
        {
            Random getal = new Random();
            int[] lottotrekking = new int[6];

            var getals = new List<int>();

            Console.WriteLine("Geef je geluksgetallen in <tussen 1 en 42>");
            Console.WriteLine("Geef je eerste getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));
            Console.WriteLine("Geef je tweede getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));
            Console.WriteLine("Geef je derde getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));
            Console.WriteLine("Geef je vierde getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));
            Console.WriteLine("Geef je vijfde getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));
            Console.WriteLine("Geef je zesde getal in");
            getals.Add(Convert.ToInt32(Console.ReadLine()));

            bool match = false;
            while (!match)
            {
                //Reset the array
                lottotrekking = new int[6];
                for (int i = 0; i < lottotrekking.Length; i++)
                {

                    //Make sure we dont add one number several times
                    int cijfer = 0;
                    while (lottotrekking.Any(x => x == cijfer) || cijfer == 0)
                    {
                        cijfer = getal.Next(1, 43);
                    }
                    lottotrekking[i] = cijfer;

                }
                Console.WriteLine(lottotrekking[0] + "\t " + lottotrekking[1] + "\t " + lottotrekking[2] + "\t " + lottotrekking[3] + "\t " + lottotrekking[4] + "\t " + lottotrekking[5]);

                match = lottotrekking.All(getals.Contains);

            }

            Console.WriteLine(lottotrekking[0] + " " + lottotrekking[1] + " " + lottotrekking[2] + " " + lottotrekking[3] + " " + lottotrekking[4] + " " + lottotrekking[5]);

            Console.ReadLine();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:57:31.980

这会生成随机数，直到它与用户输入匹配，大约需要 2 分钟才能猜出正确的数字。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace OefeningExaam
{
    class Program
    {
        static void Main(string[] args)
        {
            Random getal              = new Random();
            int[]  lottotrekking      = new int[6];
            int[]  userInput          = new int[6];
            bool   isLotteryWon       = false;
            int    numberOfIterations = 0;

            Console.WriteLine("Geef je geluksgetallen in <tussen 1 en 42>");
            Console.WriteLine("Geef je eerste getal in");
            userInput[0] = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je tweede getal in");
            userInput[1] = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je derde getal in");
            userInput[2] = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je vierde getal in");
            userInput[3] = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je vijfde getal in");
            userInput[4] = Convert.ToInt32(Console.ReadLine());
            Console.WriteLine("Geef je zesde getal in");
            userInput[5] = Convert.ToInt32(Console.ReadLine());

            while (!isLotteryWon)
            {
                isLotteryWon = true;

                // Generate the lottery numbers
                for (int i = 0; i < lottotrekking.Length; i++)
                {
                    int newNumber = getal.Next(1, 43);

                    while (Program.IsContained(lottotrekking, newNumber))
                        newNumber = getal.Next(1, 43);

                    lottotrekking[i] = newNumber;
                }

                Console.WriteLine(lottotrekking[0] + "\t " + lottotrekking[1] + "\t " + lottotrekking[2] + "\t " + lottotrekking[3] + "\t " + lottotrekking[4] + "\t " + lottotrekking[5]);

                //Compare lottery numbers to user input, if they match and are in the same order, the user wins.
                for (int i = 0; i < lottotrekking.Length; i++)
                    isLotteryWon &= Program.IsContained(lottotrekking, userInput[i]);

                numberOfIterations++;
            }

            Console.WriteLine(string.Format("Lottery won in {0} iterations", numberOfIterations));
            Console.ReadLine();
        }

        /// <summary>
        /// Determines whether the specified number is contained in the collection.
        /// </summary>
        /// <param name="collection">The collection.</param>
        /// <param name="number">The number.</param>
        /// <returns>
        ///   <c>true</c> if the specified number is contained in the collection; otherwise, <c>false</c>.
        /// </returns>
        private static bool IsContained(int[] collection, int number)
        {
            for (int i = 0; i < collection.Length; i++)
            {
                if (collection[i] == number)
                    return true;
            }
            return false;
        }
    }
} 
```

![在此处输入图像描述](../Images/3fad4d779dc709fc827f61eda4b16b79.png) 我希望它有所帮助。

# javascript - 具有多个绘图的 jqPlot 数据渲染器

> ID：13903381
> 
> 赞同：2
> 
> 时间：2012-12-16T16:50:47.263
> 
> 标签：javascript, ajax, json, jqplot

[我有多个绘图，并且根据本页](http://www.jqplot.com/deploy/dist/examples/selectorSyntax.html)底部示例中显示的方法，我一直在创建它们，如下所示：

```
$("div.container").jqplot(dataSeries1, dataSeries2, options); 
```

但是，我想使用数据渲染器，从 JSON 文件中读取。

那么应该如何修改上述咒语以允许这样做呢？我知道数据渲染器是如何工作的，但所有[示例](http://www.jqplot.com/deploy/dist/examples/data-renderers.html)都涉及为单个图返回数据系列。甚至可以使用具有多个绘图的渲染器吗？简单地返回 [ dataSeries1, dataSeries2 ] 是行不通的。我想鉴于渲染器的签名是

```
function(userData, plotObject, options) { ... return data } 
```

它一次只能应用于一个情节。

# c - 如何在c中将数组的值分配给另一个数组（制作副本）？

> ID：13903388
> 
> 赞同：5
> 
> 时间：2012-12-16T16:52:17.250
> 
> 标签：c, arrays, char, multidimensional-array

我想复制二维数组并将其分配给另一个数组。

**在python中我会做这样的事情**

```
grid = [['a','b','c'],['d','e','f'],['g','h','i']]
grid_copy = grid 
```

**我想在 C 中做同样的事情。**

```
char grid[3][3] = {{'a','b','c'},{'d','e','f'},{'g','h','i'}}; 
```

如何将此数组复制到 copy_grid ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T16:53:35.607

使用`memcpy`标准功能：

```
char grid[3][3] = {{'a','b','c'},{'d','e','f'},{'g','h','i'}};
char grid_copy[3][3];

memcpy(grid_copy, grid, sizeof grid_copy); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T16:55:26.240

使用[memcpy](http://linux.die.net/man/3/memcpy)，不要忘记包含`<string.h>`

```
#include <string.h>
void *memcpy(void *dest, const void *src, size_t n); 
```

或者，使用循环手动执行，将每个值一一放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-05T22:59:12.617

尽管答案是正确的，但应该指出，如果数组在结构内，分配结构也会复制数组：

```
struct ArrStruct
{
    int arr[5][3];
};

int main(int argc, char argv[])
{
    struct ArrStruct as1 = 
    { { { 65, 77, 8 }, 
    { 23, -70, 764 }, 
    { 675, 517, 97 }, 
    { 9, 233, -244 }, 
    { 66, -32, 756 } } };

    struct ArrStruct as2 = as1;//as2.arr is initialized to the content of as1.arr

    return 0;
} 
```

# objective-c - @encode 的对面

> ID：13903391
> 
> 赞同：4
> 
> 时间：2012-12-16T16:53:03.507
> 
> 标签：objective-c, encoding, types, objective-c-runtime

有相反的运算符`@encode`吗？

例如，当你这样做时：`@encode(int)`，你得到`"i"`. 我希望能够做到这一点：`@decode("i") myInt = 5;`

这可能吗？是否有运营商来处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T18:03:36.090

不`@encode`，需要一个类型，在 C 中，不可能返回一个类型。（`typeof()`操作符是一个 GNU 扩展，但它不需要 C 字符串，所以你想要的是不可能的。

你有两个选择。一：重新设计你的代码。如果你需要这个，你可能有一个设计问题。

第二，使用动态内存分配并编写您自己的函数，该函数采用类型字符串并相应地分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T06:09:49.547

您可以使用[NSGetSizeAndAlignment](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/#//apple_ref/c/func/NSGetSizeAndAlignment)来获取大小并进行分配。

```
NSUInteger size;
NSGetSizeAndAlignment(encoding, &size, NULL);
void* ptr = malloc(size);

if (strcmp(encoding, @encode(int)) == 0) {
    *(int*)ptr += 2;
} else if (strcmp(encoding, @encode(float)) == 0) {
    *(float*)ptr += 2.0;
}

free(ptr); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-16T03:08:35.377

嗯，是的.. 最肯定的是，***是***...

```
 int five = 5;
__typeof(five) four = 4;

printf("@encode(int):%s\n", @encode(int));
printf("typeof(five):%s\n", @encode(__typeof(five)));
printf("typeof(four):%s\n", @encode(__typeof(four))); 
```

➜</p>

> *`@encode(int):i`*
> 
> *`typeof(five):i`*
> 
> *`typeof(four):i`*

# ios - 空部分的 UITableView 策略并在自定义单元格中添加行

> ID：13903392
> 
> 赞同：2
> 
> 时间：2012-12-16T16:53:07.323
> 
> 标签：ios, uitableview

我正在开发一个应用程序，并且在如何实现此功能方面遇到了一些问题。我拼凑了一个粗略的线框：

![线框](../Images/67a5bb838bdf170558ab0cbce2d8cfbb.png)

本质上，如果该部分中不存在数据，我会显示自定义的“空数据”单元格。在`numberOfRowsInSection`委托调用中，我进行了一个简单的测试，如果我的数组计数为 0，则返回 1。我认为它很老套，所以如果有更好的方法，请告诉我。

我的问题是我还有一个自定义的“输入”单元格，我想在该部分内联显示，替换“空”单元格。我可以通过在我的数据数组中添加一个字符串，然后在我的方法`tableView insertRowsAtIndexPaths`中使用一些非常疯狂的条件来将它们拼凑在一起。`tableView cellForRowAtIndexPath:`

我无法工作的是，如果用户取消而不是保存，我希望“输入”单元格消失并返回“空”单元格。我不能只从我的数据数组中删除我的自定义字符串，因为 tableView 会抛出一个错误，即我的数据源计数不是预期的，因为我使用 removeRowsAtIndexPaths 删除了一行。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:05:45.820

更好的方法是动态隐藏表格视图并添加一个占位符视图——我不会为此“滥用”表格视图

“输入视图”和“空单元格”将独立于表格

# image - 索引图像的统计压缩算法

> ID：13903398
> 
> 赞同：0
> 
> 时间：2012-12-16T16:53:57.100
> 
> 标签：image, compression, pixels, indexed

当我们在索引图像上应用 HUFFMAN 等统计压缩算法时，我们知道此类图像中的像素包含指向颜色查找表中的 RGB 值的索引号，我们压缩像素或查找表或两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:46:24.450

您只能在同一图像中多次找到像素 p(x,y) 时对其进行压缩，并且您可以找到该像素的较短值。因此，当您不破坏数学中的鸽巢原理时，您可以同时压缩像素和查找表。

# tinymce - TinyMCE 音源格式错误

> ID：13903399
> 
> 赞同：2
> 
> 时间：2012-12-16T16:54:01.003
> 
> 标签：tinymce, html5-audio

我正在尝试与 TinyMCE 合作，但我在来源方面遇到了严重问题。我需要的是获取此代码：

```
<audio controls="controls">
  <source src="file.mp3" />
  <source src="file.ogg" />
</audio> 
```

但 TinyMCE 将其更改为

```
<audio controls="controls" width="300" height="32" preload="none" src="file.mp3" />
  <source src="file.ogg" />
</audio> 
```

这使得 Firefox 中的代码中断。

我试图改变 TinyMCE 选项。实际上我正在使用以下内容：

```
tinyMCE.init({
  mode : "exact",
  theme : 'advanced',
  plugins : 'pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist',
  media_strict: false,
  theme_advanced_toolbar_location : 'top',
  theme_advanced_toolbar_align : 'left',
  extended_valid_elements : 'script[language|type]',
  theme_advanced_resizing : true,
  content_css : './sites/default/css/styles.css',
  theme_advanced_statusbar_location : 'bottom',
  theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect",
  theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,preview,|,forecolor,backcolor",
  theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,|,ltr,rtl,|,fullscreen,|,attribs",

  // ADDING THE FOLLOWING DID NOT CHANGE THE RESULT
  cleanup_on_startup: false,
  trim_span_elements: false,
  verify_html: false,
  cleanup: false,
  convert_urls: false
}); 
```

# css - 如何垂直剪辑文本，使其不会在中间分割一行

> ID：13903400
> 
> 赞同：3
> 
> 时间：2012-12-16T16:54:00.543
> 
> 标签：css, text

我想知道是否有一些 css/js 魔法可以防止文本在一行中间垂直分割。我在下面的示例中使用了溢出：隐藏。文本不是静态的......它是用户输入的富文本，所以我无法控制格式。

![第三行文本被夹在中间](../Images/b6fc877406bdba840a54597154d4c699.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/8afdb6b97bbec47bc3ee39729c8a5cad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:07:59.583

这是一个可能的示例解决方案：

```
.dataTable td {
  /* essential */
  text-overflow: ellipsis;
  width: 200px;
  white-space: nowrap;
  overflow: hidden;

  /* for good looks */
  padding: 10px;
} 
```

通过[http://davidwalsh.name/css-ellipsis](http://davidwalsh.name/css-ellipsis)

**解决方案示例：http:** [//jsfiddle.net/4Fpq2/](http://jsfiddle.net/4Fpq2/)

这至少应该提供一个起点。

此外，这里还有一些其他可能的解决方案：

*   [http://www.mobify.com/dev/multiline-ellipsis-in-pure-css](http://www.mobify.com/dev/multiline-ellipsis-in-pure-css)
*   [http://softwareas.com/pure-css-solution-to-avoid-cutting-off-text](http://softwareas.com/pure-css-solution-to-avoid-cutting-off-text)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T13:16:43.323

您可以使用包装器 div 和多列 css：

```
.wrapper {
    -webkit-column-width: 150px; //You can't use 100%
    column-width: 150px;
    height: 100%;
} 
```

**解决方案示例：http:** [//jsfiddle.net/4Fpq2/9/](http://jsfiddle.net/4Fpq2/9/)

# .net - Advantage Database Server .net 提供程序表未显示

> ID：13903407
> 
> 赞同：2
> 
> 时间：2012-12-16T16:55:25.400
> 
> 标签：.net, eclipse, jdbc, advantage-database-server

我尝试通过 .net 数据提供程序连接到优势数据库服务器，但我无法浏览表、视图、存储过程 (VS2010)。

虽然我看不到表格，但我可以通过新查询进行查询并手动编写选择

看似简单，却无解

**连接字符串：**数据源=TestAuth；用户 ID=adssys **提供程序：** Advantage 数据库服务器的 .NET Framework 数据提供程序 **状态：**打开 **类型：** Advantage 数据库服务器 **版本：** 11.0.0.1

在 2 个不同的数据库服务器上尝试过，但我无法检索表

通过 Eclipse 上的 jdbc 连接的类似问题

有任何想法吗？

先感谢您！

阿里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:12:27.020

使用 Visual Studio 2010 获取表列表的方法有多种。最简单的方法是使用服务器资源管理器并创建与 Advantage 数据字典的数据连接。连接打开后，您可以在服务器资源管理器中查看表、视图和存储过程的列表。

如果您想在代码中获取表格列表，您可以使用 AdsConnection 对象的[GetTableNames()](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/dotnet_adsconnection_gettablenames.htm)或[GetDDObjects()](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/dotnet_adsconnection_getddobjects.htm)方法。GetTableNames 返回一个表和视图名称的数组。GetDDObjects 返回指定对象类型的数组。

更通用的方法是使用 system.tables。您可以使用 SQL 语句打开此表，它将返回有关数据库中所有表的信息。请参见下面的示例。

```
SELECT * FROM system.tables 
```

GetDDObjects 和 system.tables 仅在连接到数据字典时可用。GetTables 将在字典或空闲表连接上返回列表表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T18:03:57.580

谢谢你的反馈克里斯，

发现问题，错误的连接设置。

查询**SELECT * FROM system.tables**会引发错误 5125“Advantage 没有与指定句柄关联的数据字典。AdsCommand 查询执行失败”。所以这解释了什么是错的，我使用了别名而不是数据字典

服务器资源管理器上的表已正确填充

**连接字符串：**用户 ID=adssys;初始目录="C:\Program Files\Advantage 11.0\Help\ADS_DATA\IW.add"; **用户 ID** =adssys 提供程序：Advantage 数据库服务器的 .NET Framework 数据提供程序**状态：**打开 **类型：** Advantage 数据库服务器版本：11.0.0.1

# php - 验证相对 URL 的正则表达式

> ID：13903415
> 
> 赞同：0
> 
> 时间：2012-12-16T16:56:13.597
> 
> 标签：php, regex

我将如何验证字符串以检查它对于 URL 是否安全。文件名中没有空格或特殊字符可能会破坏 gmail 中的 URL。

例如：`data/Logo - free.png`将是无效的

我只想：`"a-z", "0-9", ".", "-", "_"`

这里有数百个用于验证 URL 的问题，但它们似乎都在检查它是否包含我不需要的“http”。

更新工作代码（来自@minitech）：

```
// validate filename
if (preg_match('/[^\w.-]/', basename($logo))){
    $error = true
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-10T20:18:59.960

我不是正则表达式的忠实粉丝，所以我修复了 PHP 的内部 filter_var，它似乎与相对 URL 有问题。我使用这个解决方法：

```
function isValid($url)
{
    if (parse_url($url, PHP_URL_SCHEME) != '') {
        // URL has http/https/...
        return !(filter_var($url, FILTER_VALIDATE_URL) === false);
    }else{
        // PHP filter_var does not support relative urls, so we simulate a full URL
        // Feel free to replace example.com with any other URL, it won't matter!
        return !(filter_var('http://www.example.com/'.ltrim($url,'/'), FILTER_VALIDATE_URL) === false);
    }
} 
```

PS：注意filter_var中的安全问题：[https ://d-mueller.de/blog/why-url-validation-with-filter_var-might-not-be-a-good-idea/](https://d-mueller.de/blog/why-url-validation-with-filter_var-might-not-be-a-good-idea/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T16:58:41.977

只需从您列出的内容中获取它：

```
$valid = !preg_match('/[^\w.-]/', $name); 
```

[`urlencode`](http://php.net/urlencode)根据情况，您可能会考虑使用 转义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:59:58.137

使用此正则表达式检查有效的文件名

```
 ^.*/[\w.-]+$ 
```

# c - 从文件中读取整数并将其保存到数组中

> ID：13903416
> 
> 赞同：-1
> 
> 时间：2012-12-16T16:56:15.087
> 
> 标签：c

我有一个名为 plain.txt 的文件，其中包含一个整数，例如 2500 我想打开这个文件并读取该整数，然后将其与另一个整数进行比较！！在这里我想将纯文本的值与K进行比较。如何将值保存到另一个整数中进行比较？

```
int main(){
   int c,k=2000;
   FILE  *f;
   f=fopen("plain.txt", "r");
   c=getc(f);
   while(c!=EOF){
      putchar(c);
      c=getc(f);
   }
   fclose(f);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:03:10.830

`getc()`读取字符。如果文件仅包含整数，您可以执行以下操作并摆脱 getc() 调用。

```
int arr[100]; // Change the size accordingly or dynamically allocate.
int i=0;
    while(fscanf("%d", &c) == 1 ){
      arr[i]=c;
      i++;
    } 
```

`i`将在循环结束时给出数组的大小，您可以检查数组中的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T14:58:04.220

我知道为时已晚，但我想告诉您，我也尝试了第一个答案并得到了错误的答案。上述解决方案的问题是 fscanf() 需要三个参数，而您只提供两个参数。在您的情况下，所需的参数是文件指针 f 。

```
int arr[100]; // Change the size accordingly or dynamically allocate.
int i=0;
    while(fscanf(f,"%d", &c) == 1 ){    //here was the issue
      arr[i]=c;
      i++;
    } 
```

# html - jekyll怎么判断是page还是post呢？

> ID：13903420
> 
> 赞同：9
> 
> 时间：2012-12-16T16:56:48.157
> 
> 标签：html, if-statement, jekyll, liquid

我想使用if语句向body标签添加一个类，如果页面是一篇文章，那么如果页面是一篇文章，则将页面添加到类中，然后向它添加文章。我不知道具体如何做到这一点，有人可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-30T11:50:42.367

您可以测试`page.date`or的存在`page.id`，例如

```
<div class="{% if page.id %} post {% else %} page {% endif %}">
   ...
</div> 
```

# c# - 什么是自定义集合？

> ID：13903426
> 
> 赞同：1
> 
> 时间：2012-12-16T16:58:09.057
> 
> 标签：c#, .net, arrays, generic-collections

一组对象。但是，我在以下情况下感到困惑。

一个样本类

```
class A
{
     public string Foo{get; set;}
}

class A_list
{
     public A[] list;
     public A_list(A[] _list)
     {
        list = new A[_list.Length];
        for (int i = 0; i < _list.Length; i++)
        {
            list[i] = _list[i];
        }
    }
}

static void Main(String[] args)
{
    A[] names = new A[3]
        {
            new A{Foo="some"},
            new A{Foo="another"},
            new A{Foo="one"}
        };

    A_list just_an_object = new A_list(names);
 } 
```

以上哪个是自定义集合，数组或将数组作为字段保存的对象或两者都是自定义集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:09:49.390

将集合描述为“一组对象”在技术上是正确的，但也有点过于简化了。一个更好的问题是“什么是有用的集合？”，“有用的”让你问自己“我需要如何使用它”？

现在， A_List 中的 Array 字段绝对是一个集合（但不是“自定义”集合），而您`A_List`的（可以说）是一个集合，但它有用吗？

集合是一组*通常相关*的对象，您将它们放在一起以便概括对所有对象的某些操作。您可能希望*使用*该集合的方式有很多，但最常见的方式在许多编程语言中已经非常标准化。例如，为了使集合“有用”，您通常至少需要能够在只进循环中从第一个到最后一个读取它的元素。您的 A_List 不直接提供此信息。您可以轻松添加自定义方法来执行此操作，但您可以提前一步实现现有接口。

如果您[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)在 A_List 上实现，您不仅可以遍历它，而且还可以在许多需要`IEnumerable`. 例如：

```
class A_list : IEnumerable<A>
{
            // ... your other code

    public IEnumerator<A> GetEnumerator()
    {
        return ((IEnumerable<A>)list).GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return list.GetEnumerator();
    }
} 
```

将允许您在您的`main`：

```
foreach(var a in just_an_object)
{
    Console.WriteLine(a.Foo);
} 
```

或者你可以将它与 Linq 一起使用：

```
var numbered=just_an_object.Zip(Enumerable.Range(0,3),(a,b) => b.ToString() + a.Foo); 
```

现在编号为`IEnumerable<String>`具有三个值（0some、1another、2one）的 a，但这并不重要；重要的是（通过实现`IEnumerable<T>`）just_an_object 可以与 Linq 方法一起使用，该方法与 Array 或 List 或大多数其他“标准”集合的工作方式相同。另外，请注意，既不需要`foreach`也不`Zip`需要知道您的`list`字段是您自己实现的，`Array`而不是您自己实现`List<A>`的[红黑树](http://www.codeproject.com/Articles/8287/Red-Black-Trees-in-C)，因此您可能想要制作它`private`。

除了遍历它之外，您可能还想对集合进行其他操作。添加或删除元素，提供索引器（以便您可以使用 访问第 n 个元素`just_an_object[n]`）。与 IEnumerable 一样，有一些接口使您能够以“标准化”方式实现它们（查找 ICollection 和 IList）。

然后是“自定义”方面。那些让您决定需要自定义集合而不是直接使用已经为您完成所有这些事情的 Array 或 List 的那些开箱即用......

# python - Python - “元组索引超出范围”

> ID：13903427
> 
> 赞同：7
> 
> 时间：2012-12-16T16:58:23.487
> 
> 标签：python, indexing

我正在编写一个程序以表格格式显示有关国家/地区的信息。当我有 3 个国家/地区时，它工作得非常好，但是将其更改为 10（并相应地调整所有必要的代码）导致错误，“元组索引超出范围”在行中：

```
print("{0:^20}{1:^20}{2:^20}{3:^20}{4:^20}{5:^20}[6:^20}{7:^20}{8:^20}{9:^20}".format(newcountrylist[i].country,newcountrylist[i].currency,newcountrylist[i].exchange)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T16:59:24.183

您需要为格式槽传递匹配数量的参数。您的格式字符串有 10 个插槽，但您只传递了 3 个值。

减少到 4 个格式槽，只有 3 个参数`.format()`，显示相同的错误：

```
>>> '{0:^20}{1:^20}{2:^20}{3:^20}'.format(1, 2, 3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: tuple index out of range
>>> '{0:^20}{1:^20}{2:^20}{3:^20}'.format(1, 2, 3, 4)
'         1                   2                   3                   4          ' 
```

当我传入 4 个参数时，`.format()`调用成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T06:41:31.793

作为对 jon141 的回答：我也面临这个问题，我试图通过循环列的一个项目（我正在传递一个二维数组）然后基于它构建字符串来解决这个问题。所以我最终得到一个字符串

```
template="{0!s:10}{1!s:15}...{n!s:24} 
```

我要格式化的元素放在一个元组中。但是当我这样做时

```
template.format(tuple_variable) 
```

它抛出元组索引超出范围的错误

可能是因为它现在将元组的元组传递给函数，该函数有一个元素，元组

我还没有想出如何解决这个问题，但是 如果您需要更多信息，请关注该[主题。](https://stackoverflow.com/questions/29888630/str-format-with-a-tuple-variable "线")

# java - java.lang.Thread 不能转换为 java.util.concurrent.ForkJoinWorkerThread

> ID：13903429
> 
> 赞同：5
> 
> 时间：2012-12-16T16:58:39.260
> 
> 标签：java, exception

我正在使用 Java SE 7 [http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveTask.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveTask.html)中的 RecursiveTask 测试斐波那契示例。

程序如下：

```
import java.util.concurrent.*;

public class testfuture{
    public static void main(String[] args) {
        System.out.println("Hello, World");
        Fibonacci fib = new Fibonacci(10);
        int result = fib.compute();
        System.out.println(result);
        }
}

class Fibonacci extends RecursiveTask<Integer> {
    final int n;
    Fibonacci(int n) { this.n = n; }
    public Integer compute() {
        if (n <= 1)
        return n;
        Fibonacci f1 = new Fibonacci(n - 1);
        f1.fork();
        Fibonacci f2 = new Fibonacci(n - 2);
        return f2.invoke() + f1.join();
    }
} 
```

但是，程序会引发运行时异常

```
Hello, World
Exception in thread "main" java.lang.ClassCastException: java.lang.Thread cannot be cast to java.util.concurrent.ForkJoinWorkerThread
    at java.util.concurrent.ForkJoinTask.fork(Unknown Source)
    at Fibonacci.compute(testfuture.java:21)
    at testfuture.main(testfuture.java:9) 
```

我用谷歌搜索了这个问题，但无法找出问题所在。

谢谢你的帮助。

=================

解决方案：

```
public class testfuture{
    public static void main(String[] args) {
        System.out.println("Hello, World");
        Fibonacci fib = new Fibonacci(10);
        ForkJoinPool pool = new ForkJoinPool();
        int result = pool.invoke(fib);
        //int result = fib.compute(); //run-time exception
        System.out.println(result);
        }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T17:02:52.510

你在滥用 ForkJoinTask。

[ForkJoinTasks 的重点是在ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)中执行它们。
池将`compute()`在其 ForkJoinWorkerThreads 中为您调用任务的方法。

你不应该`compute()`直接打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:04:46.443

您正在创建一个`RecursiveAction`不应与 fork-join 框架一起使用的 . 相反，您需要创建一个[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)并让它执行您的任务

例如，请参阅[这篇文章](http://www.javacodegeeks.com/2011/02/java-forkjoin-parallel-programming.html)，了解如何在 Java 中使用 fork-join 计算斐波那契。

# api - 如何通过 TCPIP 远程控制三星智能电视

> ID：13903433
> 
> 赞同：9
> 
> 时间：2012-12-16T16:58:47.140
> 
> 标签：api, samsung-smart-tv

我正在寻找一个 API，它使我能够构建一个应用程序，其中包含一个用于三星智能电视的自定义遥控器。[Samsung](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/javascript_apis/javascript_apis_cover.html)记录了一些 API ，但似乎没有一个提供标准遥控器所具有的功能。

原始三星远程应用程序如何通信？它是一个无证的api吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-08T12:59:41.663

我解决了这个问题。我不知道怎么做，但是 openHAB 的人为三星智能电视实现了一个工作绑定。它使用的正是我想要连接的接口。Java 中的参考实现可在他们的 Git 存储库[https://github.com/openhab/openhab/tree/master/bundles/binding/org.openhab.binding.samsungtv](https://github.com/openhab/openhab/tree/master/bundles/binding/org.openhab.binding.samsungtv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-09T23:15:15.297

这对我帮助很大，在我的 Q8 上绕过了令牌身份验证：

[https://github.com/Toxblh/samsung-tv-control](https://github.com/Toxblh/samsung-tv-control)

提示：使用端口 8002

# java - minimax 代码总是返回 0

> ID：13903436
> 
> 赞同：0
> 
> 时间：2012-12-16T16:59:15.330
> 
> 标签：java, numbers, artificial-intelligence, minimax, alpha-beta-pruning

我从维基百科写了一个 Alpha-Beta 修剪。我正在尝试编写一个四连接 AI。该函数应该返回列号，然后我的主函数会移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:08:44.120

我相信你的问题出在这一行：

```
if(temp[i][column-1] == '0') 
```

`temp`是一个整数数组。你应该比较一下`0`。`'0'`表示字符 0，Java 将其解释为整数 (48)。无论如何，你应该使用这个：

```
if(temp[i][column-1] == 0) 
```

# java - Java Jpanel 只出现了一半

> ID：13903439
> 
> 赞同：1
> 
> 时间：2012-12-16T16:59:45.410
> 
> 标签：java, swing, jpanel

所以我正在尝试用java制作一个游戏，它将显示一个图像网格作为背景，现在它只是草，偶尔有石头作为我的图像，当它工作时，我得到一个32的大网格显示32 张图片符合预期，但大约三分之二的时间，我的面板中没有出现任何内容！

为了解决问题，我已经消除了很多功能，当我运行代码时，即使没有每秒重新绘制几次，它仍然只能在某些时候工作。

主班

```
import javax.swing.JFrame;

public class Main {

    public static void main(String[] args) {
        //Creating a new frame for the whole game and everything
        JFrame frame = new JFrame("Lawlz this is my game");
        frame.setSize(800,800);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setResizable(false);

        //adding the game panel to the main frame
        frame.add(new GameFrame());
    }

} 
```

游戏框架类（制作面板的地方） 这是几乎所有内容都被注释掉的代码。即使是动画和播放器类，但它仍然不会显示任何东西大约一半的时间。

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Random;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;

public class GameFrame extends JPanel {//implements ActionListener {

    Timer mainTimer;
    Player player;
    Random rand = new Random();
    Grid GameGrid = new Grid(25, 25);

    int enemyCount = 5;

    //Constructer!
    public GameFrame()
    {
        setFocusable(true);
        //player = new Player(100,100);
    }

    //Does all of the drawing for the game
    public void paint(Graphics g)
    {
        //Sends to the JPanel class (super class)
        super.paint(g);

        //gets a graphics 2d object
        Graphics2D g2d = (Graphics2D)g;

        GameGrid.draw(g2d);
    }
} 
```

GameGrid 类，它基本上包含许多“网格空间”对象，每个对象基本上只是一个图像。在这一点上，它还负责打印出使用 draw() 方法绘制的大部分内容

```
import java.awt.Graphics2D;
import java.util.ArrayList;

public class Grid {

    ArrayList<GridSpace> grid = new ArrayList<GridSpace>();
    int width;
    int height;

    public Grid(int w, int h)
    {
        width = w;
        height = h;

        //Temporary for creating the x and y values by using the size of the images
        int gw = new GridSpace(0,0).getGridImg().getWidth(null);
        int gh = new GridSpace(0,0).getGridImg().getHeight(null);

        for(int i = 0; i < h; i++)
        {
            for(int n = 0; n < w; n++)
            {
                grid.add(new GridSpace(n*gw,i*gh));   //GridSpace(n*ImageWidth, i*ImageHeight)
            }
        }
    }

    public void draw(Graphics2D g2d)
    {
        for(int i = 0; i < width; i++)
        {
            for(int n = 0; n < height; n++)
            {
                GridSpace tempSpace = GetGridSpaceByID(GetCoordinates(n,i)); //gets the GridSpace object for this corrdinate
                g2d.drawImage(tempSpace.getGridImg(),tempSpace.x,tempSpace.y,null);
            }
        }
    }

    public void test(Graphics2D g2d)
    {
        GridSpace tempSpace = GetGridSpaceByID(GetCoordinates(0,0));
        g2d.drawImage(tempSpace.getGridImg(),tempSpace.x,tempSpace.y,null);
    }

    public GridSpace GetGridSpaceByID(int n)
    {
        return grid.get(n);
    }

    public int GetCoordinates(int x, int y)
    {
        return x + y * width;
    }

} 
```

最后，基本上只存储图像的 GridSpace 对象

```
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.image.CropImageFilter;
import java.awt.image.FilteredImageSource;
import java.util.Random;

import javax.swing.ImageIcon;

public class GridSpace {
    Random r = new Random();
    ImageIcon ic;
    int x = 0;
    int y = 0;

    public GridSpace(int x,int y)
    {
        this.x = x;
        this.y = y;

        //Stores an image for this grid space
        //ic = new ImageIcon("C:\\Users\\Ben\\Desktop\\pic1.png");
        if(r.nextInt(10) < 9)
        {
            ic = new ImageIcon("C:\\Users\\Ben\\Desktop\\Video Game\\grass1.jpg");
        }
        else
        {
            ic = new ImageIcon("C:\\Users\\Ben\\Desktop\\Video Game\\grass2.jpg");
        }
    }

    public Image getGridImg()
    {
        //Image image = ic.getImage();
        return ic.getImage();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:59:43.320

由于您当前正在添加`GameFrame`调用后添加面板

```
frame.setVisible(true); 
```

在执行调整大小等事件之前，它不会被绘制。您应该将此调用`setVisible`作为方法中的*最后一个*`main`方法。也使用`paintComponent`而不是`paint`利用 Swing 的优化绘制模型。

必修链接：[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:05:17.553

如果您在主线程中调用 Swing 相关代码，也会出现其中一些问题。尝试在 EDT（事件调度线程）中执行此操作。

为此，请将您的`Main`课程更改为：

```
import javax.swing.JFrame;

public class Main {

    public static void main(String[] args)
    {
        javax.swing.SwingUtilities.invokeLater (new Runnable ()
        {
            public void run ()
            {
                //Creating a new frame for the whole game and everything
                JFrame frame = new JFrame("Lawlz this is my game");
                frame.setSize(800,800);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
                frame.setResizable(false);

                //adding the game panel to the main frame
                frame.add(new GameFrame());
            }
        });
    }
} 
```

有关更多详细信息，请参见[此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T01:35:36.853

1.  `GameFrame`（可能更准确地称为`GamePanel`）应该覆盖`getPreferredSize()`以返回*适合游戏区域*的维度。框架本身有自己的装饰，并且会更大。
2.  main 中的调用顺序是错误的。呼叫`setVisible(true)`作为最后一部分。
3.  另请注意在 EDT 上启动 GUI 的建议。

这是我当前的“框架演示”模板中的一个主要内容，它显示了最后两点并提供了一些其他好的提示。

```
public static void main(String[] args) {
    Runnable r = new Runnable() {
        @Override
        public void run() {
            // the GUI as seen by the user (without frame)
            JPanel gui = new JPanel(new BorderLayout());
            gui.setBorder(new EmptyBorder(2,3,2,3));

            // TODO!
            gui.setPreferredSize(new Dimension(400,100));
            gui.setBackground(Color.WHITE);

            JFrame f = new JFrame("Demo");
            f.add(gui);
            // Ensures JVM closes after frame(s) closed and
            // all non-daemon threads are finished
            f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            // See http://stackoverflow.com/a/7143398/418556 for demo.
            f.setLocationByPlatform(true);

            // ensures the frame is the minimum size it needs to be
            // in order display the components within it
            f.pack();
            // should be done last, to avoid flickering, moving,
            // resizing artifacts.
            f.setVisible(true);
        }
    };
    // Swing GUIs should be created and updated on the EDT
    // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
    SwingUtilities.invokeLater(r);
} 
```

# php - 新的 PDO 对象

> ID：13903441
> 
> 赞同：-1
> 
> 时间：2012-12-16T17:00:01.973
> 
> 标签：php, mysql, object, pdo, include

当具有以下代码的脚本包含到另一个 php 脚本中时会发生什么，它是否每次都会创建一个新的 PDO 对象..？如果是，那么我如何使用在多个 php 脚本中创建一次的单个 PDO 对象..？？我不想使用持久连接..

```
try{    
    $dsn        =   'mysql:host=localhost;dbname=test'; 
    $username   =   'user';
    $password   =   'password'; 
    $conn = new PDO($dsn, $username, $password);
    $conn ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    } catch(PDOException $e) {
    echo 'ERROR: '. $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:07:56.210

该脚本将创建一个新的 PDO 对象并将其分配给变量`$conn`。关于这部分，“我如何使用在多个 php 脚本中创建一次的单个 PDO 对象”答案是您可以`$conn`在每个 HTTP 请求中多次重用该变量。您必须为每个请求（网页）创建（至少）一个 PDO 对象。如果您想在几个不同的 PHP 脚本中使用该对象，所有这些脚本都是单个网页的一部分，您可能希望将其`$conn`放入`$GLOBALS`变量中，以便它在所有范围和命名空间中都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:14:45.247

您可以在整个脚本中使用单例数据库对象，但是该方法存在一些缺点，因此您可能需要研究“依赖注入”。

为了避免重复，看看[什么是依赖注入？](https://stackoverflow.com/questions/130794/what-is-dependency-injection)有关依赖注入的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:02:57.023

你可以这样开始：

```
if (!isset($conn)) {
  /* Create connection, copy your code */
} 
```

但是你也应该检查是否`$conn`有效。
并且使用比`$conn`(like `$global_pdo_connection`) 更具体的变量名称也不是一个坏主意，因此它最终不会与另一个混淆`$conn`。

# c++ - 跨 c++ 和 glsl 代码共享预处理器宏？

> ID：13903445
> 
> 赞同：3
> 
> 时间：2012-12-16T17:00:18.510
> 
> 标签：c++, macros, glsl, c-preprocessor

我正在为 openGL 程序设置照明。我希望能够轻松调整 C++ 中的光源数量，而无需触摸我的着色器

在我的 C++ 代码中：

```
#define NUM_LIGHTS 5
GLfloat lightposn [4 * NUM_LIGHTS]; 
```

在我的 glsl 代码中：

```
 uniform vec4 lightposn[NUM_LIGHTS]; 
```

如何将此 NUM_LIGHTS 值传递给我的着色器？是否可以在着色器中使用 c++ 文件中定义的宏？还有另一种简单的方法可以在我的 c++ 代码和 glsl 代码中设置 NUM_LIGHTS 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T19:54:54.507

将包含的头文件读`#defines`入字符串，并将其“添加”到着色器，方法是将其传递给`glShaderSource`first

```
char *shader_src[3];
shader_src[0] = "#version ...\n";
shader_src[1] = ReadHeaderFile(....);
shader_src[2] = ReadShaderSourceFile(....);
glShaderSource(shader, 3, shader_src, NULL);
...compile, link, and check for errors... 
```

# java - OPENGL Android 获取我图像的坐标

> ID：13903452
> 
> 赞同：3
> 
> 时间：2012-12-16T17:00:46.080
> 
> 标签：java, android, opengl-es

我使用了以下[网站](http://www.ionage.co.uk/ia/opengl-spritebatcher-v1-0/)的代码。

但我面临的问题是获取对象的坐标。

让我解释。根据代码。您只需要以 PNG 格式添加图形图像并将其引用到此处的类。我想要实现的是一个简单的碰撞检测机制。我添加了一个迷宫（如 PNG）。并有一个对象（如 PNG）通过迷宫中的空白路径。为了做到这一点，我需要知道我的对象将移动的坐标中的空格。

谁能告诉我如何将空格作为（x，y）坐标，我可以通过它获取我的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:09:43.530

如果迷宫有一个入口和一个出口，或者迷宫周围有一个开放区域，其中包含多个入口或出口的目的地点，则[**A* 搜索算法**](http://en.wikipedia.org/wiki/A%2a)将完成这项工作：

*   [http://www.policyalmanac.org/games/aStarTutorial.htm](http://www.policyalmanac.org/games/aStarTutorial.htm)

*   [http://www.stackframe.com/software/PathFinder](http://www.stackframe.com/software/PathFinder)

请注意，这可能最好在 CPU 上完成。您需要修改路径段的条件以处理对象大小，一个简单的方法只是假设路径宽度为 1 个图像像素。

如果您以这样一种方式修改算法，使其匹配多个目的地点，它可能会更顺畅地工作，而无需为出口提供一个开放区域（一个入口到多个出口）。对于多个起点或入口，修改可能会导致 N 次运行和路径比较以找到最短的一个（许多入口到许多出口），或者如果只存在一个出口（许多入口到一个出口），则进行反向搜索，例如一进多出。如果需要多个目标点的路径，只需继续搜索，直到找到所有目标点或算法“停滞”并停止。

更新：

最好和最灵活的方法可能是使用支持各种形状类型的物理库，如球体、任意凸包等。例如，您可以使用“子弹物理”库仅进行碰撞检测，无需物理模拟（但为什么不？）。2D 中基于片段的碰撞检测可以使用 OpenGL 遮挡查询来实现，这对于复杂的形状往往更快。

要集成图像，您需要将其转换/缩放以在定义其他形状的坐标空间中对多个墙壁对象进行排序。

简而言之：使用任意形状的顶点数据进行碰撞检测是非常昂贵的，开发和运行时。这就是子弹库的碰撞形状会有所帮助的地方，因为它们用于表示要绘制的对象的简化形状。

# css - 两个重叠的分区，但上一个是不可滚动的

> ID：13903454
> 
> 赞同：0
> 
> 时间：2012-12-16T17:01:04.637
> 
> 标签：css

我的 html 页面中有两个部门，它们各自的 css

```
<html>
<head>
#lowerone
{position:absolute; bottom:25px; right:25px; height:300px; width:300px;}
#upperone
{position:absolute; bottom:25px; right:25px; height:300px; width:300px; overflow:scroll;}
</head>
<body>
<div id="lowerone">
</div>
<div id="upperone">
<img src="/bg.3.jpg" />
</div>
</body>
</html> 
```

但是上面的 div 即 UPPERONE 是不可滚动的。如何使它可滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:04:02.210

使用 2 个绝对定位的 div 相互重叠的任何具体原因？并且缺少更多`<style>`标签...滚动对我有用..

[演示](http://jsfiddle.net/kLCmc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T09:32:11.333

检查下面的代码滚动工作，

```
<html>
<head>
    <style>
#lowerone
{position:absolute; bottom:25px; right:25px; height:250px; width:300px;overflow:scroll;}
#upperone
{position:absolute; bottom:25px; left:25px; height:250px; width:300px; overflow:scroll;}
    </style>
</head>
<body>
<div id="lowerone">
    <img src="http://media.caranddriver.com/images/12q4/477956/2014-gmc-sierra-1500-photos-and-info-news-car-and-driver-photo-492039-s-450x274-1.jpg" />
</div>
<div id="upperone">
<img src="http://media.caranddriver.com/images/12q4/477956/2014-gmc-sierra-1500-photos-and-info-news-car-and-driver-photo-492039-s-450x274-1.jpg" />
</div>
</body>
</html> 
```

## 这是我的[小提琴](http://jsfiddle.net/hiteshbhilai2010/kLCmc/10/)

# java - 在java中double只返回一个精度

> ID：13903457
> 
> 赞同：0
> 
> 时间：2012-12-16T17:01:36.667
> 
> 标签：java

在我的代码中，我对数字执行除法并将其存储在双变量中。但是该变量仅以一种精度返回。我想提高精度我怎么能做到这一点。

```
double x;
        for ( int i =0 ; i<10000 ; i++)
        {

            x= w[i] / l[i];
            System.out.println(x);
        } 
```

在上面的代码中 w 和 l 是整数数组；

我得到像这样的输出

```
3.0
0.0
1.0
0.0 
```

我想将精度至少提高到 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T17:04:35.290

利用

```
x = ((double) w[i]) / l[i]; 
```

实际上，您正在使用整数除法来划分两个整数，并将结果 int 分配给一个双精度数。将其中一个操作数转换为双精度数使其改为进行双除法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:04:30.063

如果你将一个`int`除以另一个`int`，你会得到一个`int`不是双倍的。尝试

```
x = (double) w[i] / l[i]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T17:05:11.857

```
System.out.printf("%10.4f", x); 
```

请注意，只有 BigDecimal 具有精确的精度。双打是近似值。

# file-upload - Drupal 7：上传时重命名文件（通过文件字段）

> ID：13903458
> 
> 赞同：3
> 
> 时间：2012-12-16T17:01:37.243
> 
> 标签：file-upload, drupal-7, filefield, imagefield

我正在寻找一种方法来重命名用户通过文件字段上传的文件。例如，使用 重命名用户个人资料照片`uniqid`。

[我在“ Drupal 6: How to Change Filename on Upload](http://www.wesjones.net/home/2011/03/drupal-6-how-to-change-filename-on-upload) ”中找到了适用于 D6 的一个很好的解决方案，但找不到适用于 D7 的任何内容。

另一种选择是使用[File (Field) Paths](http://drupal.org/project/filefield_paths "文件（字段）路径")，但是：

1.  该模块导致我的设置出现警告。
2.  为特定目的安装通用模块似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-30T08:01:08.920

[您可以通过hook_file_presave](https://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_file_presave/7)将每个文件上传更改为您想要的模式，例如

```
function yourmodulename_file_presave($file) {
  $parts = pathinfo($file->filename);
  $file->filename = 'mypattern_'.$file->uid .'_'. $file->timestamp . '.' . $parts['extension'];
} 
```

**但是这种方法不重命名 filname（它只是重命名 file_managed 表中的文件名），**如果你还想重命名文件名（文件的 uri），你应该使用下面的代码

```
function hook_file_insert($file) {
  $parts = pathinfo($file->filename);
  $uri = 'public://'.'mypattern_'.$file->uid .'_'. $file->timestamp . '.' . $parts['extension'];
  $file=file_move($file, $uri);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T17:29:40.470

重要的部分是替换**SOMEFILENAME**

```
function MYMODULE_background_form_validate($form, &$form_state) {
  $file = file_save_upload('file', array(
      'file_validate_is_image' => array(),
      'file_validate_extensions' => array('jpg'),
  ));
  if ($file) {
    if ($file = file_move($file, 'public://**SOMEFILENAME**', FILE_EXISTS_REPLACE)) {
      $form_state['values']['file'] = $file;
    }
    else {
      form_set_error('file', t('Failed to write the uploaded file the site\'s file folder.'));
    }
  }
  else {
    form_set_error('file', t('No file was uploaded.'));
  }
}

function MYMODULE_background_form_submit(&$form, &$form_state) {
  $file=$form_state['values']['file'];
  unset($form_state['values']['file']);
  $file->status = FILE_STATUS_PERMANENT;
  file_save($file);
  drupal_set_message(t('Thanks, the background has been saved.'));
} 
```

# database - 在线商店如何处理将最后一件商品添加到购物车的 2 位客户？

> ID：13903459
> 
> 赞同：0
> 
> 时间：2012-12-16T17:01:36.667
> 
> 标签：database, web-applications

我正在为大学课程制作商店网络应用程序。我想知道当只剩下一件商品时，像亚马逊这样的商店会做什么？

他们是否让多个客户将最后一件商品添加到他们的购物车中，并且首先结账的人得到它？这意味着库存数据库在购买后更新。

或者

他们是否只允许一个客户将最后一件商品添加到他们的购物车中并从库存中删除该商品。如果客户的会话超时，则该项目将放回库存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:59:33.890

他们不检查剩下的确切数字。

他们接受订单，然后您会收到一封确认电子邮件。该电子邮件可能会说，交付所需的时间比宣传的要多一点。有时您可能会收到一封他们根本无法发送的电子邮件。

# c# - 替换引号内的文本，直到下一个引号

> ID：13903460
> 
> 赞同：-1
> 
> 时间：2012-12-16T17:01:43.813
> 
> 标签：c#, regex, replace, match

```
String input = "helloj\"iojgeio\r\ngsk\\"jopri\"gj\r\negjoijisgoe\"joijsofeij\"\"\"ojgsoij\""; 
```

这是我当前有效的代码，但是 iv 添加了一些必须在此之前运行的代码，这使得一些 '"' 拆分到另一行，从而使下面的代码变得过时，除非在某些情况下，'"' 没有放在下一行。

```
firstQuote = input.IndexOf("\"");
lastQuote = input.LastIndexOf("\"");
input = input.Substring(0, firstQuote) + "<span>quote" +
    input.Substring(firstQuote + 1, lastQuote - (firstQuote + 1) + "quote</span>" +
    input.Substring(lastQuote + 1, lines.Length - (lastQuote + 1); 
```

我怎么能改变输入字符串

```
input = "helloj\"iojgeio\r\ngsk\\"jopri\"gj\r\negjoijisgoe\"joijsofeij\"\"\"ojgsoij\""; 
```

至

```
input = "helloj(<span>quoteiojgeio\r\ngsk\\"jopriquote</span>gj\r\negjoijisgoe<span>quotejoijsofeijquote</span><span>quotequote</span>ojgsoijquote"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:14:14.167

使用这个正则表达式

```
 @"(?<!\\)\\\""(.*?)(?<!\\)\\\""" 
```

并将其替换为

```
 <span>quote$1quote</span> 
```

# python - 使用 Python 下载文件仅 4.1kB

> ID：13903461
> 
> 赞同：2
> 
> 时间：2012-12-16T17:01:44.593
> 
> 标签：python, asp.net-mvc

我正在使用简单的代码：

```
import urllib2
response = urllib2.urlopen("http://www.mysite.com/getfile/4355")
output = open('myfile.zip','wb')
output.write(response.read())
output.close() 
```

Web 服务器是 IIS + ASP.NET MVC 4 它返回 FileResult 包装一个带有“application/octet-stream”内容类型的 zip 文件。

问题是下载的 zip 文件损坏了 - 只有 4.1kB 大小，它必须是 24kB。当我直接在网络浏览器中输入网址时 - 它下载并打开正常。

您能否建议我的 Python 代码有什么问题？

**编辑**

尝试了其他两种方法 - 结果相同。

```
 import urllib
    urllib.urlretrieve(url, targetFile)

    h = httplib2.Http(".cache")
    response, content = h.request(url)
    with open(targetFile, 'wb') as f:
        f.write(content) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:34:06.747

这是一个愚蠢的问题，但无论如何：我的控制器上有 [Authorize] 属性，因此无法执行匿名请求。

删除它只是让我下载文件。

不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:14:32.373

供将来参考，在 py3k 中，您只需要使用`urllib.request.urlretrieve(the_url, the_filename)`来下载如下文件：

```
import urllib.request

url = 'http://www.example.com/the-file.zip'
urllib.request.urlretrieve(url, 'filename.zip') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:10:06.863

看看 python 'requests' 模块。你可以点安装它。示例代码是：

```
>>>import requests
>>>req_obj = requests.get("http://www.myexample.com/myfile.zip")
>>>print len(req_obj)
203456 
```

有关 API 的更多信息，请参见[此处](http://docs.python-requests.org/en/latest/index.html)...

# javascript - 输出 True 或 False 以外的内容

> ID：13903466
> 
> 赞同：0
> 
> 时间：2012-12-16T17:02:01.677
> 
> 标签：javascript, javascript-events

新手到 JS。试图确定如何输出问题 1 以外的内容是对与错。如果我理解正确，输出是标志 True 或 False 的表达式。试图改变说正确和不正确。还试图表达正确的百分比而不是例如：您的总分是 10/100

```
$(function(){
    var jQuiz = {
        answers: { q1: 'd', q2: 'd', },
        questionLenght: 2,
        checkAnswers: function() {
            var arr = this.answers;
            var ans = this.userAnswers;
            var resultArr = []
            for (var p in ans) {
                var x = parseInt(p) + 1;
                var key = 'q' + x;
                var flag = false;
                if (ans[p] == 'q' + x + '-' + arr[key]) {
                    flag = true; g
                }
                else {
                    flag = false;
                }
                resultArr.push(flag);
            }
            return resultArr;
        },
        init: function(){
            $("[class=btnNext]").click(function(){
                if ($('input[type=radio]:checked:visible').length == 0) {

                    return incorrect ;
                }
                $(this).parents('.questionContainer').fadeOut(500, function(){
                    $(this).next().fadeIn(500);
                });
                var el = $('#progress');
                el.width(el.width() + 11 + 'px');
            });
            $('.btnPrev').click(function(){
                $(this).parents('.questionContainer').fadeOut(500, function(){
                    $(this).prev().fadeIn(500)
                });
                var el = $('#progress');
                el.width(el.width() - 11 + 'px');
            })
            $("[class=btnShowResult]").click(function(){
                var arr = $('input[type=radio]:checked');
                var ans = jQuiz.userAnswers = [];
                for (var i = 0, ii = arr.length; i < ii; i++) {
                    ans.push(arr[i].getAttribute('id'))
                }
            })
            $('.btnShowResult').click(function(){
                $('#progress').width(260);
                $('#progressKeeper').hide();
                var results = jQuiz.checkAnswers();
                var resultSet = '';
                var trueCount = 0;
                for (var i = 0, ii = results.length; i < ii; i++){
                    if (results[i] == true) trueCount++;
                    resultSet += '<div> Question ' + (i + 1) + ' is ' + results[i] + '</div>'
                }
                resultSet += '<div class="totalScore">Your total score is ' + trueCount * 4 + ' / 100</div>'
                $('#resultKeeper').html(resultSet).show();
            })
        }
    };
    jQuiz.init();
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:13:04.247

你可以改变

```
resultArr.push(flag); 
```

至

```
resultArr.push(flag?"correct":"incorrect"); 
```

和

```
if (results[i] == true) 
```

至

```
if (results[i] === "correct") 
```

我希望百分比计数是

```
resultSet += '<div class="totalScore">Your % correct is ' + 
  parseInt((trueCount/results.length)*100) + '%</div>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:09:55.623

改变

> ' 问题 ' + (i + 1) + ' 是 ' + results[i] + ''

至

> ' 问题 ' + (i + 1) + ' 是 ' + (results[i] ? "Correct" ? "Incorect") + ''

其他的喜欢：

```
resultSet += '<div class="totalScore">Your % correct is ' + (trueCount * 4/100).toFixed(0) + '%</div>' 
```

请通过[stackoverflow 上的 Javascript Wiki](https://stackoverflow.com/tags/javascript/info)获取学习指南。

# python - Eclipse Pydev 错误

> ID：13903467
> 
> 赞同：-1
> 
> 时间：2012-12-16T17:02:01.733
> 
> 标签：python, eclipse, pydev

我正在使用 Win 8、Eclipse 和 Pydev。我安装了 Pydev，它可以运行简单的 python 脚本。不幸的是，我想使用数学模块，它在数学命令旁边得到错误符号。 ![在此处输入图像描述](../Images/0aa220034f5f3dd358cb38b2ccea10a9.png)

未定义的变量。

如果您能帮助我摆脱错误标志，我将不胜感激。

最好的问候，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:38:35.393

'math' 应该在窗口 > 首选项 > pydev > 解释器 - python 中标记为“强制内置”（如果不是，那是你的问题）。

如果配置正确，则可能意味着 PyDev 无法生成 shell 来检查数学模块，在这种情况下，通常意味着有一些防火墙阻止了该通信（如果是这样，通常您的错误日志中有条目 - - 有关更多详细信息，请参见：[http](http://pydev.org/faq.html#when_i_do_a_code_completion_pydev_hangs_what_can) ://pydev.org/faq.html#when_i_do_a_code_completion_pydev_hangs_what_can ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:02:44.700

在 PyDev 解释器配置窗格中，您需要确保 PyDev 知道在哪里可以找到 python 包。

转到 Preferences -> PyDev -> Interpreter - Python （或任何适合您的解释器）。选择解释器后，单击应用按钮。如果 ceil 函数wash 未正确注册，这可能会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:05:43.963

我看不到截图很好，但我看到你在第一行做：

```
from math import * 
```

接着

```
print math.whatever 
```

显然`math`这里是一个未定义的变量，因为您应该使用`import math`而不是`from math import *`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T17:13:26.867

当您这样做时，`from math import *`您实际上是将数学折叠`namespace`到当前`namespace`( `global namespace`) 上。这意味着您不需要在以`math`这种方式导入的属性前面添加名称。

所以你有两种可能的解决方案：

1.  Either `import math`，它不会折叠 math 命名空间，但允许您通过在 math 前面加上点和属性名称来引用 math 模块的属性
2.  或者在不添加任何内容的情况下使用属性，因为它们被复制到您的命名空间中，您可以像在脚本中定义它们一样使用它们。

例如。

1.  对于第一种情况，`math.sqrt()`应该做的事情
2.  对于第二种情况`sqrt()`应该这样做。

# methods - 跳转到 sublimeText2 中的方法定义

> ID：13903468
> 
> 赞同：0
> 
> 时间：2012-12-16T17:02:04.567
> 
> 标签：methods, sublimetext2

SublimeText 2 很棒，我真的很喜欢它用于我的 ROR 开发。我想知道是否有办法让我突出显示某个文件中的方法调用，然后它将其关联的方法定义带到另一个文件中。我尝试了 GOTO [command + R]，但它似乎只在我正在使用的文件的上下文中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:59:40.397

我为此使用[CTags](https://github.com/SublimeText/CTags)插件。安装后，您可以跳转到不同文件中定义的方法

`ctrl`+ `>`.

另一种安装更简单的替代方法是[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)，因为它没有外部依赖项，但它从来没有足够可靠地工作，至少在我的机器上是这样。

# try-catch - 最后尝试抓住

> ID：13903469
> 
> 赞同：0
> 
> 时间：2012-12-16T17:02:05.447
> 
> 标签：try-catch, finally

也许这对你来说很简单，但对我来说却不是。我有这个代码：

```
Private int InsertData()
{ 
  int rezultat = 0;
       try
       {
           if (sqlconn.State != ConnectionState.Open)
           {
               sqlconn.Open();
           }
           rezultat = (int)cmd.ExecuteScalar();

       }
       catch (Exception ex)
       {
           lblMesaje.Text = "Eroare: " + ex.Message.ToString();

       }
       finally
       {
           if (sqlconn.State != ConnectionState.Closed)
           {
               sqlconn.Close();
           }
       }

       return rezultat;
} 
```

仅用于在表中插入新记录。即使这会引发错误“指定的强制转换无效”。“rezultat=(int)cmd.ExecuteScalar();” - 执行代码并将行插入到数据库中，然后继续执行。

为什么会继续？Maby 我终于不明白 try catch 的意思了 微笑 | :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:17:15.143

在您的代码中，您明确捕获异常。这就是为什么继续执行。如果要在捕获到任何异常时停止执行，则需要抛出异常。抛出新异常(ex.getMessage());

但这不是最佳做法。尝试仅捕获已声明的异常，而不是高级 Exception 类。

# c# - 将 HttpClient 类与 WinRT 一起使用

> ID：13903470
> 
> 赞同：6
> 
> 时间：2012-12-16T17:02:15.183
> 
> 标签：c#, windows-runtime, httpclient, .net-4.5

我有一段在 .NET (4.0) 中完美运行的代码

# 代码＃

```
 string URI = "http://www.indianrail.gov.in/cgi_bin/inet_pnrstat_cgi.cgi";
        string Parameters = Uri.EscapeUriString("lccp_pnrno1=8561180607&amp;submitpnr=Get Status");
        System.Net.HttpWebRequest req = (HttpWebRequest)System.Net.WebRequest.Create(URI);
        //HTTP POST Headers
        req.ContentType = "application/x-www-form-urlencoded";
        req.Host = "www.indianrail.gov.in";
        //You can use your own user-agent.
        req.UserAgent = "Mozilla/5.0 (compatible; MSIE 7.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0) DELL;Venue Pro";
        req.Headers.Add(HttpRequestHeader.AcceptLanguage, "en-us,en;q=0.5");
        req.Headers.Add(HttpRequestHeader.AcceptCharset, "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        req.KeepAlive = true;
        req.Referer = "http://www.indianrail.gov.in/pnr_stat.html";
        req.Accept = "text/plain";
        req.Method = "POST";
        //Byte size calculation before sending request.
        byte[] bytes = System.Text.Encoding.ASCII.GetBytes(Parameters);
        req.ContentLength = bytes.Length;
        System.IO.Stream os = req.GetRequestStream();
        os.Write(bytes, 0, bytes.Length);
        os.Close();
        System.Net.WebResponse resp = req.GetResponse();
        var request_status = ((HttpWebResponse)resp).StatusDescription;
        if (resp == null) return;
        System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());
        Console.WriteLine(sr.ReadToEnd());
        Console.ReadLine(); 
```

我只是不知道在 Win Store 应用程序中写什么

到目前为止，我已经到了我必须使用的类（或者可能不是）

```
HttpClient httpClient = new HttpClient();

httpClient.DefaultRequestHeaders.Add("Host", "www.indianrail.gov.in"); 
```

但是其他值呢？有一些标题我们可以在其中添加一些数据，有些需要直接添加到集合（DefaultHeaders）中......

是否有相同的用法和说明文档

在这个方向上的任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T18:43:01.490

Any ways thanks for help from the community.... some reading led me to figure out this solution

```
 string URI = "http://www.indianrail.gov.in/cgi_bin/inet_pnrstat_cgi.cgi";
            string Parameters = Uri.EscapeUriString("lccp_pnrno1=8561180604&amp;submitpnr=Get Status");

            HttpClient client = new HttpClient();

            HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post,URI);

            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("text/plain"));
            request.Headers.AcceptCharset.Add(new StringWithQualityHeaderValue("utf-8",0.7));
            request.Headers.AcceptLanguage.Add(new StringWithQualityHeaderValue("en-us",0.5));
            request.Content = new StreamContent(new MemoryStream(System.Text.Encoding.UTF8.GetBytes(Parameters)));
            request.Content.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
            request.Headers.Host = "www.indianrail.gov.in";
            request.Headers.UserAgent.Add(new ProductInfoHeaderValue("Mozilla", "5.0"));
            request.Headers.Referrer = new Uri("http://www.indianrail.gov.in/pnr_stat.html");

            var result = await client.SendAsync(request);
            var content = await result.Content.ReadAsStringAsync(); 
```

This returns exactly the result i wanted

Thanks ne ways

# php - mysql 选择一个列作为另一个列名，它将具有全文索引

> ID：13903475
> 
> 赞同：0
> 
> 时间：2012-12-16T17:02:34.300
> 
> 标签：php, mysql

我正在做这样的双重选择（子查询）

```
SELECT * FROM (SELECT ...) 
```

我想选择一些列作为全文类型的东西

```
SELECT * FROM (SELECT column AS newname MAKE newname FULLTEXT) 
```

换句话说，我需要`newname`索引`*`为`FULLTEXT`：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:14:18.410

据我了解，你可能会寻找这个

```
 ALTER TABLE your_table  ADD FULLTEXT(newname); 
```

这会将列更改`newname`为 FULLTEXT

# android - 有没有办法在android中以特定的声压级生成纯音？

> ID：13903476
> 
> 赞同：2
> 
> 时间：2012-12-16T17:02:44.510
> 
> 标签：android

我是 Android 新手，我现在正在寻找一种方法来创建不同频率和不同声压级 (dB SPL) 的纯音乐。我一直在阅读其他一些示例代码，但是，许多答案反映必须在生成特定声压级的音调之前进行校准。

有没有办法指定音调的声压级？

通过某种方法可以很容易地找到幅度（是吗？），但我不知道幅度和声压之间的数学关系。如果我可以将幅度转换为声压，则很容易将其转换为dB SPL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:22:01.030

不，没有校准就无法做到这一点。

从理论上讲，制造商可以提供一种带有校准表的设备，以某种方式可以访问，但对他们这样做的需求并不明显。并且不要忘记诸如外壳盖之类的东西，甚至污垢和老化都可能使校准无效。或耳机。甚至是臭名昭著的“你拿错了！” - 这是关于天线的，但有些类似的问题适用。

# actionscript-3 - 在 Flash AS3 中将精灵添加到 box2d 对象

> ID：13903482
> 
> 赞同：1
> 
> 时间：2012-12-16T17:03:04.240
> 
> 标签：actionscript-3, flash, box2d, flashdevelop

我对 flash 和 box2d 很陌生。我已经设法绕过 box2d 的基础知识，但到目前为止，我一直在使用 b2debugdraw 函数来显示我创建的所有对象。所以我决定我应该开始研究如何将精灵或图像实际添加到我的对象中。

我已经绝望地在谷歌上搜索了几个小时，在这一点上我完全感到沮丧，所以如果你们中的一个人能帮我解决这个问题，我真的很感激，我要做的就是添加图像/我用 box2d 制作的正方形的板条箱的精灵。

这是我最近的尝试：

```
package 
{
import Box2D.Collision.b2AABB;
import Box2D.Collision.Shapes.b2PolygonShape;
import Box2D.Common.Math.b2Vec2;
import Box2D.Dynamics.b2Body;
import Box2D.Dynamics.b2BodyDef;
import Box2D.Dynamics.b2DebugDraw;
import Box2D.Dynamics.b2Fixture;
import Box2D.Dynamics.b2FixtureDef;
import Box2D.Dynamics.b2World;
import flash.display.BitmapData;
import flash.display.Sprite;
import flash.events.Event;

/**
 * ...
 * @author Robert Damery
 */
public class Main extends Sprite 
{
    //World object
    public var world:b2World;
    //Scale number
    public const scale:int = 30;
    //Time Counter
    public var Counter:int = 60;

    public var boxbody:Sprite;

    public function Main():void 
    {
        var asprite:Sprite;
        asprite.graphics.beginBitmapFill(crate.jpg, null, false, false);
        asprite.graphics.drawRect(0, 0, 25, 25);
        asprite.graphics.endFill();
        asprite.x = 100;
        asprite.y = 100;
        stage.addChild(asprite);

        // create world
        CreateWorld();
        //Create a box function
        CreateBox(300, 600, 600, 25, false, .8);
        CreateBox(0, 600, 25, 600, false, .8);
        CreateBox(800, 0, 25, 600, false, .8);
        CreateBox(400, 100, 25, 25, true, .8);

        //Make frames pass in flash
        addEventListener(Event.ENTER_FRAME, newframeevent);
        //Draw our debug data
        debug_draw();
    }

    //Event handler function, makes time go by
    private function newframeevent(e:Event):void 
    {
        world.Step(1 / 30, 10, 10);
        world.ClearForces();
        world.DrawDebugData();
    }

    private function CreateWorld():void 
    {
        //Size of World
        var worldsize:b2AABB = new b2AABB();
        worldsize.lowerBound.Set(-500, -500);
        worldsize.upperBound.Set(500 , 500);
        //Define Gravity
        var gravity:b2Vec2 = new b2Vec2(0 , 9.8);
        // Ignore sleeping objects
        var doSleep:Boolean = true;
        world = new b2World(gravity, doSleep);
    }

    private function CreateBox(x:Number, y:Number, width:Number, height:Number, is_Dynamic:Boolean, density:Number):b2Body
    {
        x = con2D(x);
        y = con2D(y);
        width = con2D(width);
        height = con2D(height);

        //Create the body definition
        var floorshapedef:b2BodyDef = new b2BodyDef();
        floorshapedef.position.Set(x, y);
        //Determine whether object is dynamic or not
        if (is_Dynamic == true)
        {
            floorshapedef.type = b2Body.b2_dynamicBody;
        }
        else
        {
        floorshapedef.type = b2Body.b2_staticBody;
        }
        //Create the shape
        var floorshape:b2PolygonShape = new b2PolygonShape();
        floorshape.SetAsBox(width, height);

        //Create the fixture
        var floorfixture = new b2FixtureDef();
        floorfixture.shape = floorshape;
        floorfixture.density = density;
        floorfixture.restitution = .5;
        floorfixture.friction = .25;

        //Create body
        var floorbody:b2Body = world.CreateBody(floorshapedef);
        floorbody.CreateFixture(floorfixture);

        return floorbody;

    }

        //Debug Draw function
        public function debug_draw():void
    {
        var debug_draw:b2DebugDraw =  new b2DebugDraw();
        var debug_sprite:Sprite = new Sprite();
        addChild(debug_sprite);
        debug_draw.SetSprite(debug_sprite);
        debug_draw.SetDrawScale(scale);
        debug_draw.SetFlags(b2DebugDraw.e_shapeBit);
        world.SetDebugDraw(debug_draw);

    }

    public function con2D(num:Number):Number
    {
        return num / scale;
    }

}

} 
```

我已经知道我什至没有尝试将精灵附加到盒子上，但那是因为我什至无法让盒子出现。当我运行此特定代码时，我收到一条错误消息：访问未定义的属性箱。

我有不同格式的相同图像，包括 .fla，但我总是收到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T11:35:20.190

这行是非常错误的：

```
asprite.graphics.beginBitmapFill(crate.jpg, null, false, false); 
```

板条箱.jpg？这应该是一个位图数据实例，但我不认为 crate.jpg 是一个有效的实例名称。

除了你已经接受了另一个答案是最好的答案，它甚至没有回答你的问题：访问未定义的财产箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:51:10.640

在这里，这是一个很长的 box2d 教程列表。至于将精灵添加到 Box2d，你想错了。Box2d 是一个模拟实时物理的物理引擎。使用 DebugDraw 将为您的形状提供基本图形。

渲染和物理模拟是两个相互独立的“线程”。

您需要做的是让您的图形模拟形状所在的位置。因此，在您的 OnEnterFrame 事件中，您应该让您的精灵从您的 box2d 形状中获取位置、旋转和缩放。也不要忘记 box2d 是公制，而 flash 是像素，使用转换常量。一切都在下面的链接中进行了解释，请花时间阅读。

[http://www.kerp.net/box2d/](http://www.kerp.net/box2d/)

希望这可以帮助 ： ）

# webstorm - 调试器突然停止在 webstorm 项目中工作

> ID：13903488
> 
> 赞同：5
> 
> 时间：2012-12-16T17:03:22.700
> 
> 标签：webstorm

我的 webstorm ide 不会再在我现有的 Node.js 项目中的断点处停止。

当我创建一个新的 webstorm node.js express 项目并设置调试点时，它似乎工作正常。

例如，对于一个非常简单的测试，我在现有项目中创建了一个名为 test.js 的文件：

```
var name = 'bob';
console.log(name); 
```

创建运行/调试配置

```
Name:test
Path to Node:/usr/local/bin/node
workding directory: Path to my directory
Path to Node App JS file: test.js 
```

我在第 1 行设置了一个断点，即使程序运行良好，它也不会被击中。我怎样才能让调试器在这个项目上再次命中断点。

输出

```
/usr/local/bin/node --debug-brk=64597 test.js
debugger listening on port 64597
bob

Process finished with exit code 0 
```

复制到另一个目录的同一个项目在调试器中工作正常。但是，如果我将它保存在同一目录中，即使我删除 .idea 文件夹并从头开始重新创建调试配置，它也不会附加到调试器。

我之前在玩 JSTestDriver 设置。即使删除了 .idea 文件夹，这是否会影响事情并继续影响事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:03:51.580

同样的事情也发生在我身上。我终于重新启动了我的机器，Webstorm 再次开始遇到断点。这不是一个很好的答案，但至少它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T16:24:36.140

从项目的根目录重命名（删除）**.idea文件夹，然后重试。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T08:58:40.143

我有同样的问题，我的快递应用程序停止使用代码 0。

我已经在我的代码的第一行放置了断点，然后就跳过了。在某些时候，我发现我的一个控制器返回未定义并导致进程退出。

修复后我收到标准快递正在监听端口 xxxx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:14:31.210

[http://youtrack.jetbrains.com/issues/WEB](http://youtrack.jetbrains.com/issues/WEB)可能是更适合报告 WebStorm 错误的地方；) [http://youtrack.jetbrains.com/issue/WEB-2313](http://youtrack.jetbrains.com/issue/WEB-2313)可能是相关的。

# microsoft-metro - Windows 8 应用商店应用程序是否具有等效的 MessageBox？

> ID：13903494
> 
> 赞同：8
> 
> 时间：2012-12-16T17:03:59.847
> 
> 标签：microsoft-metro, windows-store-apps

Windows 8 应用商店应用程序有类似 MessageBox 的东西吗？

我需要一个弹出窗口之类的东西来向用户显示，例如当输入错误或发生错误时。API中是否已经有一些东西，还是我必须自己制作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T19:18:42.470

现代 UI 指南建议输入内联错误消息。但是，如果您仍然想要一个 MessageBox，您可以在 MessageDialog 中拥有它。

```
 MessageDialog dlg = new MessageDialog("Message"); await dlg.ShowAsync(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-16T17:04:57.377

您正在寻找[MessageDialog 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T09:43:41.383

如果您必须绕过 MessageDialog 对可能命令数量（三个）的限制，此[MessageBox 实现](http://blog.instance-factory.com/?p=898)可能会有所帮助。

# c++ - 在 Windows 8 上共享应用程序 URI 方案注册

> ID：13903499
> 
> 赞同：1
> 
> 时间：2012-12-16T17:04:28.950
> 
> 标签：c++, windows, registry, protocols, url-scheme

我正在编写一个在 Windows 8 上注册“tel”协议的应用程序，因此当我打开“开始”>“运行”时，输入 tel:1234 并按 Enter 我的应用程序启动并拨打电话到 1234。这在 XP、Win7 上成功运行和Win8。但是，在 Win8 上，我发现当我安装 Google Chrome 时，它​​会“接管”对 tel 协议的处理，所以当我再次运行 tel:1234 时，Chrome 会启动，而不是我的应用程序。Chrome 不会接管 Win7 或 XP 中的 tel 协议。我想了解问题所在。

目前，我的应用程序通过添加以下注册表项来注册 tel 协议，如将应用程序注册到MSDN 上[的 URI 方案中所述：](http://msdn.microsoft.com/en-us/library/aa767914%28v=VS.85%29.aspx)

```
HKEY_CLASSES_ROOT\tel
@="URL:My Tel Protocol Handler"
"URL Protocol"=""

[HKEY_CLASSES_ROOT\tel\DefaultIcon]
@="C:\\MyTelProtocol.exe"

[HKEY_CLASSES_ROOT\tel\shell]

[HKEY_CLASSES_ROOT\tel\shell\open]

[HKEY_CLASSES_ROOT\tel\shell\open\command]
@="\"C:\\MyTelProtocol.exe\" -URI %1" 
```

我发现 Google Chrome 不会用自己的方式覆盖我的注册表数据。相反，它似乎以不同的方式注册协议处理程序，但我不知道如何做同样的事情。有人知道为什么 Windows 8 会以不同的方式处理这个问题吗？

在此先感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T13:15:45.573

您需要删除 Chrome 在安装过程中添加的“tel”注册表项。

> HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet\Google Chrome\Capabilities\UrlAssociations

之后，您需要将 win 8 推送到 relaod 注册表库（重新启动或其他方式），jabber 将成为 TEL:URI 的默认应用程序；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:48:10.480

这是有关[文件类型和协议关联模型 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848047%28v=vs.85%29.aspx)的一些指南，它似乎适用于 Windows 8。也许可以试试？

[此 codereview](https://codereview.chromium.org/11127002/patch/16001/17002)建议 Chrome 协议处理程序的代码位于[此文件](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/installer/util/shell_util.cc?view=markup)中，以防万一。

# php - 将 PHP 变量传递给 Bash 脚本，然后启动它

> ID：13903506
> 
> 赞同：14
> 
> 时间：2012-12-16T17:05:02.327
> 
> 标签：php, bash

所以，基本上，我想做的是执行这个 Bash 脚本：

```
#!/bin/bash

path="./"
filename="Ellly.blend"
file=${path}${filename}
description="Test of the api with a simple model"
token_api="ff00ff"
title="Uber Glasses"
tags="test collada glasses"
private=1
password="Tr0b4dor&3"

curl -k -X POST -F "fileModel=@${file}" -F "filenameModel=${filename}" -F "title=${title}" -F "description=${description}" -F "tags=${tags}" -F "private=${private}" -F "password=${password}" -F "token=${token_api}" https://api.sketchfab.com/v1/models 
```

在 PHP 函数内部。问题是，我真的不知道如何将一些变量传递给它，然后在恢复 PHP 函数之前等待它结束。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T17:20:55.733

*注意：我没有做所有的设置，我希望你明白。*

### 选项 1：传递参数

PHP：

```
$file = escapeshellarg($file);
$filename = escapeshellarg($filename);
// escape the others
$output = exec("./bashscript $file $filename $tags $private $password"); 
```

重击：

```
#!/bin/bash
filename=$1
file=$2
description="Test of the api with a simple model"
token_api="ff00ff"
title="Uber Glasses"
tags=$3
private=$4
password=$5

... 
```

* * *

### 选项 2：使用环境变量

PHP：

```
putenv("FILENAME=$filename");
putenv("FILE=$file");
putenv("TAGS=$tags");
putenv("PRIVATE=$private");
putenv("PASSWORD=$PASSWORD");

$output = exec('./bash_script'); 
```

重击：

```
filename=$FILENAME
file=$FILE
description="Test of the api with a simple model"
token_api="ff00ff"
title="Uber Glasses"
tags=$TAGS
private=$PRIVATE
password=$PASSWORD

... 
```

# sql - SQL Server Management Studio 网络相关或特定于实例的错误

> ID：13903509
> 
> 赞同：7
> 
> 时间：2012-12-16T17:05:17.657
> 
> 标签：sql, sql-server, ssms

尝试连接到计算机上的默认数据库时出现以下错误：http: [//s7.postimage.org/dk5abnu15/sql_error.jpg](http://s7.postimage.org/dk5abnu15/sql_error.jpg)

下划线部分表示“系统找不到指定的文件”。但我不知道这意味着什么。如果重要的话，我已经安装了 SQL Server 2012 和 Visual Studio 2012 Ultimate。我使用 Windows 身份验证和我输入的服务器名称`.`或`.\SQLEXPRESS`（两者都不起作用）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-16T17:12:25.233

进入管理工具 --> 服务 ---> 在那里你会找到 SQL SERVER 并且你需要启动当你的服务因任何原因停止时发生这种情况。

# jquery - Jquery为每个图像循环不同的延迟

> ID：13903510
> 
> 赞同：1
> 
> 时间：2012-12-16T17:05:23.463
> 
> 标签：jquery, delay, jquery-cycle

我想对幻灯片的图像有不同的延迟。我正在使用cycle.js，但如果cycle.js 无法使用，我对另一个幻灯片插件持开放态度

例如，第一个图像需要显示 3 秒，第二个图像需要显示 8 秒。2 个下一个图像，每个图像 4 秒。

有没有可能，欢迎任何想法。

谢谢

# php - 脸书 javascript 不工作

> ID：13903512
> 
> 赞同：-3
> 
> 时间：2012-12-16T17:05:39.267
> 
> 标签：php, javascript, html

我之前也问过这个问题，但我没有得到任何解决方案。我在我的网站上遇到问题，其中 facebook 安装在页面的完全右侧，并且当鼠标悬停在它上面时会移动并显示。请[删除垃圾邮件链接]查看。

问题是当我将鼠标悬停在它上一次它显示时，如果我将鼠标悬停在它上面两到三次它没有显示任何东西。有时即使在第一次鼠标悬停时也不会显示任何东西。

我想让它像另一个网站 [垃圾邮件链接已删除]，它会再次显示并且 agian 并且没有问题。

我的html代码是

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="facebook_tab">
    <a id="facebooklink" href="https://www.facebook.com/fe driksa" title="Fe dri on Facebook" onmouseover="document.getElementById('showme').style.display = 'block';this.style.display='none';"></a>
    <div id="showme" onmouseout="document.getElementById('facebooklink').style.display='block';this.style.display='none';">
        <div class="fb-like-box" data-href="http://www.facebook.com/fe driksa" data-width="292" data-show-faces="false" data-stream="true" data-header="true"></div>
    </div>
</div> 
```

我的CSS代码是

```
#facebook_tab
{
    display: block;
    width: 38px;
    height: 102px;
    background: url("{T_THEME_PATH}/images/facebook_tab.png") no-repeat 0 0;
    right:0px;
    top:200px;
    position:fixed;
}

#facebook_tab span
{
    display: none;
}

#facebook_tab:hover {
width:292px;
padding-left:32px;
}

#facebook_tab:hover span
{
    display:block;
background-color:#fff;
border:2px solid #999;
border-radius:5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:53:21.493

这可以完全用 css 完成（除了 facebook 内容的加载）。

即使是平滑的动画也应该使用[css 过渡来完成](http://www.w3schools.com/css3/css3_transitions.asp)

html 和加载 facebook like 框：

```
<div id="facebook-wrapper">
  <a id="facebooklink" href="https://www.facebook.com/fedriksa" title="Fedri on Facebook"></a>
  <div id="fb-root"></div>
</div>
<script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

你的CSS：

```
#facebook-wrapper {
  position: fixed;
  top: 50%;
  width: 220px; // put the width of your facebook box + width of your facebook link here
  right: -200px; // this should be the width of your facebook box
}

#facebook-wrapper:hover {
  right: 0
  transition: right 2s;
  -moz-transition: right 2s; /* Firefox 4 */
  -webkit-transition: right 2s; /* Safari and Chrome */
  -o-transition: right 2s; /* Opera */
} 
```

请注意，这是未经测试的，但应该让您了解如何执行此操作！

# ruby-on-rails - Rails 回形针 - 附加多个图像

> ID：13903516
> 
> 赞同：1
> 
> 时间：2012-12-16T17:05:47.737
> 
> 标签：ruby-on-rails, image, paperclip, attachment

我正在尝试用回形针将多个图像附加到一个组件上。作为本教程 [http://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-and-no-javascript](http://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-and-no-javascript)

我有以下文件：

_form.html.erb

```
<div class="field">
   <%= file_field_tag('component_images_photo', multiple: true, name: "component[images_attributes][][photo]") %>
</div> 
<div class="actions">
   <%= f.submit %>
</div> 
```

组件.rb

```
has_many :images
accepts_nested_attributes_for :images 
```

图片.rb

```
class Image < ActiveRecord::Base
    attr_accessible :photo_file_name

    belongs_to :component
    has_attached_file :photo
end 
```

图像模型已创建为：

```
rails generate model image 
```

还有回形针附件：

```
rails g paperclip image photo 
```

到这个时候，我在尝试创建组件时收到以下错误：

```
Can't mass-assign protected attributes: image_attributes 
```

也许我应该忘记模型和回形针调用中的某些内容？

**编辑：** 我应该将图像模型创建为：

```
rails generate model image component:references 
```

??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:13:26.543

您必须添加`attr_accessible :images_attributes`到`component.rb`.

# c++ - 如何将指针作为数组参数传递？

> ID：13903524
> 
> 赞同：-2
> 
> 时间：2012-12-16T17:07:15.603
> 
> 标签：c++, c, arrays, argument-passing, function-declaration

我有一个第三方库，它的功能如下：

```
void foo(const void* input, char output[1024]); 
```

如果我写这样的东西：

```
char* input = "Hello";
char  output[1024];
foo(input, output); // OK 
```

但是我不想在堆栈上声明这么大的数组（这在 OS 内核环境中会非常危险）。所以我必须做这样的事情：

```
char* input      = "Hello";
char* output_buf = new char[1024];
foo(input, output_buf); // Compiler Error C2664 
```

我无法更改 foo 的实现。我应该怎么做？

==================

这个问题已经解决。我的真实代码是这样的：

```
char* input      = "Hello";
void* output_buf = new char[1024];
foo(input, output_buf); // Compiler Error C2664 
```

标准不隐式接受从 void* 到 char* 的转换。所以下面的代码有效：

```
char* input      = "Hello";
void* output_buf = new char[1024];
foo(input, (char*)output_buf); // OK 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:13:16.673

这很奇怪，因为在 C++ 中，任何数组类型的函数参数实际上都被认为是指针类型，即编译器看到的“真实”函数签名是

```
void foo(const void* input, char* output); 
```

> 在确定每个参数的类型后，将任何类型为“T 数组”[...] 的参数调整为“指向 T 的指针”（C++11，[dcl.fct]，¶5）

最重要的是，您的代码*确实*有效，正如您[在此处](http://ideone.com/EIX75z)看到的那样；您确定您的“缩小”示例实际上反映了您所看到的问题吗？可能问题在于另一个参数的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:13:42.097

问题不在于`output`. 实际上，您的函数不采用数组，因为您无法将数组传递给函数。它接收一个指向 char 的指针。这也可以：

```
void foo(char f[1024])
{
    // blah
}

int main() {
    char c1[1];
    foo(c1);  // works!

    char *c2 = new char[27];
    foo(c2);  // works!

    delete [] c2; 
} 
```

该代码将编译，它这样做是因为该函数接收一个指针，仅此而已。所以，问题在于你的第一个论点，`input`. 它的类型一定是错误的。更仔细地查看您的错误消息和/或向我们展示`input`.

# jquery - jquery 仅当当前按钮悬停时下拉

> ID：13903525
> 
> 赞同：1
> 
> 时间：2012-12-16T17:07:15.947
> 
> 标签：jquery

我是 jQuery 新手，不知道如何解决我遇到的这个 jQuery 下拉问题。

当您将鼠标悬停在其中一个链接上时，下拉菜单可以正常工作，但是我在导航中添加了第二个下拉菜单，现在当您将鼠标悬停在其中一个链接上时，两个下拉菜单都会显示。我只希望显示当前的下拉菜单。

这是我的代码，以及 jsfiddle [http://jsfiddle.net/K2Zzh/1/](http://jsfiddle.net/K2Zzh/1/)的链接...

```
$('.dropdown ul').hide();   
$('.dropdown').hover(function(){
    $('.dropdown ul').stop().slideDown(500);
    },function(){
    $('.dropdown ul').stop().slideUp(200);
}); 
```

我知道它为什么在做它正在做的事情，我知道我应该在`this`某个地方使用，但我不确定在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:10:55.613

您可以使用`$(selector, context)`或`find`方法。

```
$('.dropdown ul').hide();    
$('.dropdown').hover(function(){
    $('ul', this).stop().slideToggle(500);
}); 
```

[http://jsfiddle.net/JKG5N/](http://jsfiddle.net/JKG5N/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:11:14.650

您需要为下拉悬停功能添加上下文。事件处理程序发生在被悬停的元素的上下文中，所以如果你说它`$('ul', this).stop().slideDown(500)`应该`$('ul', this).stop().slideUp(200)`工作。

修改后的jsFiddle：http: [//jsfiddle.net/7zbGH/1/](http://jsfiddle.net/7zbGH/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:11:58.167

调整您的代码，如下所示：

```
$('.dropdown ul').hide();    

$('.dropdown').hover(function(){
      $(this).children('ul').stop().slideDown(500);
    },function(){
      $(this).children('ul').stop().slideUp(200);
}); 
```

**[JS小提琴](http://jsfiddle.net/K2Zzh/3/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T17:12:04.247

您只需定位相关列表，类似于以下内容：

```
var $dropdown;

$('.dropdown ul').hide();
$('.dropdown').hover(function() {
    $dropdown = $(this).find('ul');
    $dropdown.stop().slideDown(500);
}, function() {
    $dropdown.stop().slideUp(200);
});​ 
```

### [演示](http://jsfiddle.net/K2Zzh/4/)

我在上面使用变量的唯一原因是你不必为同一个下拉菜单遍历两次，这是一个很好的习惯。

你当然也可以这样做：

```
$('.dropdown ul').hide();
$('.dropdown').hover(function() {
    $(this).find('ul').stop().slideDown(500);
}, function() {
    $(this).find('ul').stop().slideUp(200);
});​ 
```

另外，我使用[**find()**](http://api.jquery.com/find/)而不是[**children()**](http://api.jquery.com/children/)的原因是因为`children()`只能沿着 DOM 树向下移动一个级别，而`find()`可以向下遍历多个级别来选择后代元素。

在您的特定情况下`childrend()`，尽管您只下降了 1 级，但似乎绝对没问题。

**编辑**
为了完整起见，如果您想在单个悬停功能中使用[**slideToggle()**](http://api.jquery.com/slidetoggle/)，您可以按照另一个答案中的说明进行操作：

```
$('.dropdown').hover(function() {
    $(this).find('ul').stop(true, true).slideToggle(500);
} 
```

请注意，在使用此选项时，您可能需要`true, true`在[**stop()**](http://api.jquery.com/stop/)调用中包含以防止滑动菜单`lagging`发生反转并可能发生反转。

> *   **clearQueue**一个布尔值，指示是否也删除排队的动画。默认为假。
> *   **jumpToEnd 一个**布尔值，指示是否立即完成当前动画。默认为假。

# wordpress - 在 wordpress 中将多个元框添加到自定义帖子类型

> ID：13903529
> 
> 赞同：11
> 
> 时间：2012-12-16T17:07:41.483
> 
> 标签：wordpress, custom-post-type

我有以下代码将自定义帖子类型添加到管理破折号和自定义元框添加到帖子编辑窗口：

```
function teasers_custom_init() {
  $labels = array(
    'name' => 'Teasers',
    'singular_name' => 'Teaser',
    'add_new' => 'Add New',
    'add_new_item' => 'Add New Teasers',
    'edit_item' => 'Edit Teaser',
    'new_item' => 'New Teaser',
    'all_items' => 'All Teasers',
    'view_item' => 'View Teaser',
    'search_items' => 'Search Teasers',
    'not_found' =>  'No teasers found',
    'not_found_in_trash' => 'No teasers found in Trash', 
    'parent_item_colon' => 'Parent Page',
    'menu_name' => 'Teasers'
  );

  $args = array(
    'labels' => $labels,
    'description' => 'set slider panels with loop times',
    'public' => true,
    'publicly_queryable' => true,
    'show_ui' => true, 
    'show_in_menu' => true, 
    'query_var' => true,
    'rewrite' => array( 'slug' => 'Teasers' ),
    'capability_type' => 'page',
    'has_archive' => true, 
    'hierarchical' => true,
    'menu_position' => 60,
    'supports' => array( 'title', 'thumbnail', 'page-attributes'), 

  ); 

  register_post_type( 'teasers', $args );
}
add_action( 'init', 'teasers_custom_init' );

//adding the meta box when the admin panel initialises
add_action("admin_init", "admin_init");
// this adds the save teaser function on save post
add_action('save_post', 'save_teaser');

function admin_init(){
    add_meta_box('teaser_loop', 'Loop Time', 'loop_meta', 'teasers', 'normal', 'default');
}
// callback function of add meta box that displays the meta box in the post edit screen
function loop_meta($post, $args){

    $teaser_loop = get_post_meta($post->ID, 'teaser_loop', true);

?>
    <label>Teaser Loop: </label><input type="text" name="teaser_loop" value="<?php echo $teaser_loop; ?>" /><br/>

<?php

}

// saving the teaser
function save_teaser(){
    global $post;
    update_post_meta($post->ID, 'teaser_loop', $_POST['teaser_loop']);  
} 
```

我的问题是，如果我想添加一个额外的元框，最好的方法是什么？

我尝试在 admin_init 函数中添加另一个 add_meta_box 调用，并为此元框 html 创建了一个额外的回调函数，但前端没有生成任何内容。任何指针都会很棒。

编辑：所以这就是我为多个元框做的方式（这有效）：

```
//adding the meta box when the admin panel initialises
    add_action("admin_init", "admin_init");
    // this adds the save teaser function on save post
    add_action('save_post', 'save_teaser');
    function admin_init(){
        add_meta_box('teaser_loop', 'Loop Time', 'loop_meta_1', 'teasers', 'normal', 'default');
        add_meta_box('teaser_link', 'Teaser Link', 'loop_meta_2', 'teasers', 'normal', 'default');
    }
    // back function of add meta box that displays the meta box in the post edit screen
    function loop_meta_1($post, $args){

        $teaser_loop = get_post_meta($post->ID, 'teaser_loop', true);

?>
    <label>Teaser Loop: </label><input type="text" name="teaser_loop" value="<?php echo $teaser_loop; ?>" /><br/>

<?php

}

    function loop_meta_2($post, $args){

        $teaser_link = get_post_meta($post->ID, 'teaser_link', true);

?>
    <label>Teaser Link: </label><input type="text" name="teaser_link" value="<?php echo $teaser_link; ?>" /><br/>

<?php

}

// saving the teaser
function save_teaser(){
    global $post;
    update_post_meta($post->ID, 'teaser_loop', $_POST['teaser_loop']);
    update_post_meta($post->ID, 'teaser_link', $_POST['teaser_link']);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-07T17:14:29.440

它可以完全封装在一个类中。在这里，我不处理添加自定义帖子类型，只有两个简单的输出字段，文本和复选框。一个完整的工作代码应该处理每个所需的输入类型。

```
<?php
/**
 * Plugin Name: Sample Dynamic Meta Boxes
 * Plugin URI:  http://stackoverflow.com/q/13903529/1287812
 * Author:      brasofilo
 */
class B5F_Dynamic_Meta_Boxes 
{
    private $boxes;

    # Safe to start up
    public function __construct( $args )
    {
        $this->boxes = $args;
        add_action( 'plugins_loaded', array( $this, 'start_up' ) );
    }

    public function start_up()
    {
        add_action( 'add_meta_boxes', array( $this, 'add_mb' ) );
    }

    public function add_mb()
    {
        foreach( $this->boxes as $box )
            add_meta_box( 
                $box['id'], 
                $box['title'], 
                array( $this, 'mb_callback' ), 
                $box['post_type'], 
                isset( $box['context'] ) ? $box['context'] : 'normal', 
                isset( $box['priority'] ) ? $box['priority'] : 'default', 
                $box['args']
            );
    }

    # Callback function, uses helper function to print each meta box
    public function mb_callback( $post, $box )
    {
        switch( $box['args']['field'] )
        {
            case 'textfield':
                $this->textfield( $box, $post->ID );
            break;
            case 'checkbox':
                $this->checkbox( $box, $post->ID );
            break;
        }
    }

    private function textfield( $box, $post_id )
    {
        $post_meta = get_post_meta( $post_id, $box['id'], true );
        printf(
            '<label>%s: <input type="text" name="%s" value="%s" /></label> <small>%s</small><br/>',
            $box['title'],
            $box['id'],
            $post_meta,
            $box['args']['desc']
        );
    }

    private function checkbox( $box, $post_id )
    {
        $post_meta = get_post_meta( $post_id, $box['id'], true );
        printf(
            '<label>%s: </label><input type="checkbox" name="%s" %s /> <small>%s</small><br/>',
            $box['title'],
            $box['id'],
            checked( 1, $post_meta, false ),
            $box['args']['desc']
        );
    }
}

# ADD TWO META BOXES - DIFFERENT POST TYPES - DIFFERENT CONTEXTS AND PRIORITIES
$args = array(
    array(
        'id' => 'teaser_loop',
        'title' => 'Loop Time',
        'post_type' => 'post',
        'args' => array(
            'desc' => 'Enter the time',
            'field' => 'textfield',
        )
    ),
    array(
        'id' => 'teaser_link',
        'title' => 'Loop Link',
        'post_type' => 'page',
        'context' => 'side',
        'priority' => 'high',
        'args' => array(
            'desc' => 'Open link',
            'field' => 'checkbox',
        )
    ),
);
new B5F_Dynamic_Meta_Boxes( $args );

# ADD ANOTHER META BOX TO ANOTHER POST TYPE
$more_args = array(
    array(
        'id' => 'extra_box',
        'title' => 'And another one',
        'post_type' => 'teaser',
        'args' => array(
            'desc' => 'Open link',
            'field' => 'textfield',
        )
    ),
);
new B5F_Dynamic_Meta_Boxes( $more_args ); 
```

这只是一个骨架，从这里有很多要写的。一些例子：

*   [WordPress 的自定义元框和字段](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)

*   [用于 WordPress 的 HM 自定义元框](https://github.com/humanmade/Custom-Meta-Boxes)

*   [我的 Wordpress 元框类](https://github.com/bainternet/My-Meta-Box)

*   [元盒插件](https://github.com/rilwis/meta-box)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T17:48:40.327

您可以使用以下代码将元框添加到自定义帖子类型。

首先，创建元框

```
add_action('admin_init', 'my_theme_on_admin_init');

function my_theme_on_admin_init() {
    add_meta_box('my_metabox',
        __('My metabox', 'textdomain'),
        'my_metabox_render',
        'my_custom_post_type', 'normal', 'high'
    );
} 
```

请注意，这`my_custom_post_type`是您自定义帖子类型的`my_metabox_render`名称和 - 呈现元框的函数的名称。

渲染函数应该创建所有必要的字段

```
function my_metabox_render($post) {
    $data = get_post_meta($post->ID, '_meta_key', true);
    // Use nonce for verification
    wp_nonce_field('add_my_meta', 'my_meta_nonce');
?>
<div class="inside">
    <table class="form-table">
        <tr valign="top">
            <th scope="row"><label for="my_meta_value"><?php _e('My meta', 'textdomain'); ?></label></th>
            <td><textarea id="my_meta_value" name="my_meta_value" cols="40" rows="5"><?php echo (isset($data)) ? $data : ''; ?></textarea></td>
        </tr>
    </table>
</div>
<?php
} 
```

当用户保存帖子时，您应该更新元数据

```
add_action('wp_insert_post', 'save_my_meta', 10, 2);

function save_my_meta($id) {
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
        return $id;
    if (!current_user_can('edit_posts'))
        return;

    if (!isset($id))
        $id = (int) $_REQUEST['post_ID'];

    if (isset($_POST['my_meta_value']) && wp_verify_nonce($_POST['my_meta_value'], 'add_my_meta')) {
        $data = $_POST['my_meta_value'];
        if (isset($data)) {
            update_post_meta($id, '_meta_key', $data);
        }
        else {
            delete_post_meta($id, '_meta_key');
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T21:04:37.617

这是添加 2 个元框的非常不恰当的方法吗？它可以工作，但我认为它可能是低效的代码/php。原文发布在[https://typerocket.com](https://typerocket.com)

```
// Add form and basic text field
function press_meta_box(WP_Post $post) {
    add_meta_box('press_meta', 'Press Release Date', function() use ($post) {
        $field_name = 'press_date';
        $field_name2 = 'press_link';
        $field_value = get_post_meta($post->ID, $field_name, true);
        $field_value2 = get_post_meta($post->ID, $field_name2, true);
        wp_nonce_field('study_nonce', 'study_nonce');
        ?>
        <table class="form-table">
            <tr>
                <th> <label for="<?php echo $field_name; ?>">Press Release Date (MM/DD/YYYY)</label></th>
                <td>
                    <input id="<?php echo $field_name; ?>"
                           name="<?php echo $field_name; ?>"
                           type="text"
                           value="<?php echo esc_attr($field_value); ?>" />
                </td>
            </tr>
            <tr>
                <th> <label for="<?php echo $field_name2; ?>">Full link to pdf</label></th>
                <td>
                    <input id="<?php echo $field_name2; ?>"
                           name="<?php echo $field_name2; ?>"
                           type="text"
                           value="<?php echo esc_attr($field_value2); ?>" />
                </td>
            </tr>
        </table>
        <?php
    });
}
// Check for empty string allowing for a value of `0`
function empty_str( $str ) {
    return ! isset( $str ) || $str === "";
}
// Save and delete meta but not when restoring a revision
add_action('save_post', function($post_id){
    $post = get_post($post_id);
    $is_revision = wp_is_post_revision($post_id);
    $field_name = 'press_date';
    $field_name2 = 'press_link';

    // Do not save meta for a revision or on autosave
    if ( $post->post_type != 'press_release' || $is_revision )
        return;

    // Do not save meta if fields are not present,
    // like during a restore.
    if( !isset($_POST[$field_name]) )
        return;

    // Secure with nonce field check
    if( ! check_admin_referer('study_nonce', 'study_nonce') )
        return;

    // Clean up data
    $field_value = trim($_POST[$field_name]);
$field_value2 = trim($_POST[$field_name2]);
    // Do the saving and deleting
    if( ! empty_str( $field_value ) ) {
        update_post_meta($post_id, $field_name, $field_value);
    } elseif( empty_str( $field_value ) ) {
        delete_post_meta($post_id, $field_name);
    }
     // Do the saving and deleting 2
    if( ! empty_str( $field_value2 ) ) {
        update_post_meta($post_id, $field_name2, $field_value2);
    } elseif( empty_str( $field_value2 ) ) {
        delete_post_meta($post_id, $field_name2);
    }
}); 
```

# django - IntegrityError -userprofile.u_id 不能为NULL，django用户注册

> ID：13903530
> 
> 赞同：1
> 
> 时间：2012-12-16T17:07:42.620
> 
> 标签：django, null, save, django-users

我正在尝试使用 Django UserProfile 功能注册用户。我有一个扩展的 UserProfile 模型。我的文件如下所示。我收到“accounts_userprofile.u_id 可能不是 NULL”，我在保存表单时尝试使用 'commit=false'，但它不起作用。我的父模型将字段设置为 null = True，blank = True。我已经删除了表格并添加了几次，但没有任何效果。请帮助。提前致谢

我的模型如下：

```
class UserBase(models.Model):
class Meta:
    abstract = True
    u_id = models.IntegerField(null = True,blank = True)
    email = models.CharField(max_length=200, null = True,blank = True)
    website=models.CharField(max_length=200, null = True, blank = True)
    age = models.IntegerField(blank = True, null = True)
    location = models.CharField(max_length= 200, null=True, blank = True)
    username = models.CharField(max_length = 100, null = True, blank = True) 
```

UserProfile 模型如下：

```
class UserProfile(UserBase):
user = models.ForeignKey(User, null= True, blank = True, unique = True)

User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
def __unicode__(self):
    return "User Profile for: " + self.user.username 
```

def create_user_profile(sender, **kw): user = kw['instance'] if kw['created']: up = UserProfile(user=user)

```
 up.save() 
```

post_save.connect(create_user_profile, sender = User, dispatch_uid ="user_create_profile")

我的注册视图如下：

> def register(request, template_name="registration/register.html"): if request.method == 'POST':
> 
> ```
>  postdata = request.POST.copy()
>   form = UserCreationForm(postdata)
>   if form.is_valid(): 
> 
>       un = postdata.get('username','')
>       pw = postdata.get('password1','')
> 
>       from django.contrib.auth import login, authenticate
> 
>       new_user = authenticate(username=un, password=pw)
>       form.save()
>       #if new_user and new_user.is_active:
>           #login(request, new_user)
>           #url = urlresolvers.reverse('my_account')
>           #return HttpResponseRedirect(url) 
> ```
> 
> else: form = UserCreationForm() page_title = '用户注册' return render_to_response(template_name, locals(), context_instance=RequestContext(request))>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:03:35.403

来自 Django 文档：

[https://docs.djangoproject.com/en/1.4/ref/models/fields/](https://docs.djangoproject.com/en/1.4/ref/models/fields/)

> 字段唯一
> 
> 如果为 True，则此字段在整个表中必须是唯一的。
> 
> 这是在数据库级别和模型验证中强制执行的。如果您尝试在唯一字段中保存具有重复值的模型，模型的 save() 方法将引发 django.db.IntegrityError。
> 
> 此选项对除 ManyToManyField 和 FileField 之外的所有字段类型均有效。

您告诉 UserProfiles UserProfiles.u_id 是唯一的，它不是（空白/空）。所以你得到了错误。您可能需要考虑将 u_id 更改为 AutoField 主键。然后使用 models.ForeignKey('UserBase') 连接它们

# c++ - 未定义对具有继承的 vtable 的引用

> ID：13903543
> 
> 赞同：1
> 
> 时间：2012-12-16T17:09:05.770
> 
> 标签：c++

> **可能重复：**
> [对 vtable 的未定义引用](https://stackoverflow.com/questions/12020462/undefined-reference-to-vtable)

运行以下代码会导致链接器错误

`'undefined reference to vtable for ManagedObjects'`

```
#include <cstdlib>
#include <iostream>
#include <list>
#include <string>
using namespace std;

class ManagedObjects
{
      public:
      virtual string get() const;
      virtual ~ManagedObjects(){};
};

class CallbackOwner1 : public ManagedObjects
{
public:
       string get() const {return "CallbackOwner1";} 
};

class CallbackFunctor
{
public:
    CallbackFunctor(const ManagedObjects* b):m_cbr(b)
    {}
    string operator() ()
    {
        return m_cbr->get();
    }

   const ManagedObjects* m_cbr;
};

int main(int argc, char *argv[])
{
    ManagedObjects* cb1 = new CallbackOwner1();
    CallbackFunctor f(cb1);
    cout << f() << endl;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:11:37.650

您没有在`virtual string ManagedObjects::get() const`任何地方定义方法。要么将其定义为纯虚函数`virtual string get() const = 0;`，要么为其提供声明。

# javascript - 在 d3 arc javascript 中绘制文本

> ID：13903548
> 
> 赞同：10
> 
> 时间：2012-12-16T17:09:35.450
> 
> 标签：javascript, text, svg, path, d3.js

我在[http://jsfiddle.net/PRb93/1/上用 d3 创建了一个弧](http://jsfiddle.net/PRb93/1/)

```
var vis = d3.select("body").append("svg")
var pi = Math.PI;

var arc = d3.svg.arc()
    .innerRadius(300)
    .outerRadius(320)
    .startAngle(0 * (pi/180))
    .endAngle(-pi)

vis.append("path")
    .attr("d", arc)
    .attr("transform", "translate(350,350)")​ 
```

现在我想在这个弧上绘制文本（我将把这个弧分布到`n`节点中）。我不能直接使用和弦布局，因为我没有方阵。我的桌子是长方形的，有一个 lhs 和一个以上的 rhs。所以我将一个小半球作为一个右半球，一个大半球作为左半球。

我也很困惑如何在这里绘制两个节点之间的连接。没有任何线索

我想实现类似[http://bost.ocks.org/mike/uberdata/](http://bost.ocks.org/mike/uberdata/)的东西：

![在此处输入图像描述](../Images/47f1ffe9a37ac3a356829138420b7de3.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T21:20:24.003

沿曲线定位文本的技巧是将文本（和文本路径）元素附加到 SVG 并为其提供指向弧 ID 的 xlink:href 属性。请参阅下面的示例。

```
var svg = d3.select("body").append("svg"),
    pi = Math.PI;

var arc = d3.svg.arc()
    .innerRadius(150)
    .outerRadius(180)
    .startAngle(0)
    .endAngle(-pi/2)

var path = svg.append("path")
    .attr("d", arc)
    .attr("id", "path1")
    .attr("transform", "translate(200,200)")
    .attr("fill","#ccf")

// Add a text label.
var text = svg.append("text")
    .attr("x", 6)
    .attr("dy", 15);

text.append("textPath")
    .attr("stroke","black")
    .attr("xlink:href","#path1")
    .text("abc"); 
```

​ 和弦是从 SVG 路径生成的，每个路径由两条弧线和两条贝塞尔曲线组成。如果您可以提供适当的输入，Chord 布局将为您生成这些。如果您将数据集分开，您可能需要手动创建每个和弦路径。

```
var svg = d3.select("body").append("svg")
var pi = Math.PI;

var arc = d3.svg.chord()
    .source({startAngle:0.1,endAngle:0.2})
    .target({startAngle:0.6,endAngle:0.8})
    .radius(100)

var path = svg.append("path")
    .attr("d", arc)
    .attr("id", "path1")
    .attr("transform", "translate(200,200)")
    .attr("fill","#ccf")​ 
```

我听到您对两组矩形数据的看法，但可能有一种方法可以将您的数据集组合成一个数据集，并在必要时添加零以使其成为正方形。如果你能做到这一点，你的任务会简单得多，所以如果你还没有，那么值得进行一些调查。也许将其作为问题发布？

# php - 多对多条件

> ID：13903550
> 
> 赞同：1
> 
> 时间：2012-12-16T17:09:45.713
> 
> 标签：php, yii

我正在尝试在多对多表中创建搜索条件，但我遇到了问题。我想使用 Posts 模型进行搜索，并在 likes(many to many) 表中按用户 ID 进行过滤。

表格：帖子、用户和喜欢（多对多）

模型 Post.php 关系：

```
'user_likes' => array(self::MANY_MANY, 'Users', 'likes(post_id, user_id)'), 
```

后控制器中的搜索条件：

```
$criteria->with='user_likes';
$criteria->condition='user_likes.id=1'; //Search posts that user id '1' liked.
$posts=Posts::model()->findAll($criteria); 
```

错误：

```
CDbCommand falhou ao executar o comando SQL: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'user_likes.id' in 'where clause'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:18:12.527

该表`user_likes`没有列`id`。

你是这个意思吗？

```
$criteria->with='user_likes';
$criteria->condition='user_id=1'; //Search if user id '1' liked the post. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:22:20.683

感谢尝试帮助大家。我发现了问题。

使用 findAll 时不需要声明`$criteria->together=true;`，但如果使用 CActiveDataProvider 则必须。

我希望这对某人也有帮助；）

# css - 与'高度：0;' 在父元素上，子元素是不可见的，但仍然存在吗？

> ID：13903552
> 
> 赞同：0
> 
> 时间：2012-12-16T17:09:54.010
> 
> 标签：css

看看[this fiddle](http://jsfiddle.net/its_me/BqMcD/)，它显示了我编写的示例菜单。

这是它看起来原封不动的样子：

![截屏](../Images/ab8151085643079d644ed1ae8ebf3cc8.png)

...当鼠标悬停在菜单上时：

![截屏](../Images/f06c0a48b0a4d9d420e51e7281ee54b1.png)

...当鼠标悬停在“搜索”菜单正下方的空白区域附近时（仔细查看“搜索”菜单。搜索图标应该是白色的。它是黑色的，因为鼠标在某种程度上悬停在菜单上隐藏的项目）：

![截屏](../Images/154056fb1c07d638e3a8700d22608a93.png)

那是当前位于 who is中的`form`元素（在单击菜单时动态变为，显示菜单项，即表单）。`div``height``0px``height: auto;`

![截屏](../Images/d867c6565e7c67affaab0ff9a7be7ab0.png)

我已经尝试`overflow: hidden;`过父母`div`无济于事。我想不出其他选择。我该如何解决这个问题（使用 CSS）？

***编辑：**修复[了小提琴](http://jsfiddle.net/its_me/BqMcD/)中的图像链接。问题仅在 Chrome 中仍然存在。在 Firefox 中一切都很好。不知道为什么。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:37:45.277

我不知道为什么会发生这种奇怪的事情，但我相信它不应该发生。不过有一个临时修复：

```
.menu-item > a:hover > [class*="icon-"],
.menu-item > a:hover > [class*=" icon-"],
.menu-item > a.selected > [class*="icon-"],
.menu-item > a.selected > [class*=" icon-"] {
  background-image: url(http://twitter.github.com/bootstrap/assets/img/glyphicons-halflings.png);
} 
```

[这是](http://jsfiddle.net/its_me/JeSdE/2/)修复的一个小技巧。

***注意：**如果有人能解释为什么问题中提出的问题会发生，那就太好了。*

# java - 可以在 Eclipse 中使用 JAXX 吗？

> ID：13903554
> 
> 赞同：1
> 
> 时间：2012-12-16T17:10:05.767
> 
> 标签：java, eclipse, swing, user-interface, frameworks

我想用 CSS 设置 Swing 组件的样式，并认为这是我最好的选择。但是我在确定是否可以将它与 Eclipse 一起使用时遇到了一些问题？

它对于中型项目是否也实用，还是我应该寻找另一种方式来设置组件样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T09:25:24.493

这是您回答的文档

[https://docs.google.com/document/d/19bYF0z5sNiwT-zL5VAZBY1CM0MgHA6pqzZ8dP22llvc/edit?usp=sharing](https://docs.google.com/document/d/19bYF0z5sNiwT-zL5VAZBY1CM0MgHA6pqzZ8dP22llvc/edit?usp=sharing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T10:56:18.160

我不是 Swing 主题的专家，尤其是 JAXX，但我对 Eclipse 有所了解。如果这个问题仍然相关，您可以以我的回答为基础进行更多研究。

我搜索了一个[Eclipse Marketplace](https://marketplace.eclipse.org/search/site/JAXX)并用谷歌搜索了一下，但没有发现任何关于 JAXX Eclipse 支持或插件的信息。如果你懂法语，你可以查看项目的文档。如果文档中没有关于工具支持的内容，我建议您直接询问创建者。

Eclipse 为您提供了一些可用于处理 JAXX 使用的文件类型的工具。从我在[这里](https://today.java.net/pub/a/today/2006/03/30/introducing-jaxx.html)阅读的内容来看，*.jaxx 文件只是 XML 文件，而样式表只是 CSS。我建议您通过 Eclipse Web Tools Platform 安装 XML 和 CSS 支持，并将 *.jaxx 文件与 XML 编辑器相关联，或者在您第一次打开具有此类扩展名的文件之一时或通过[File Associations Preferences](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-13.htm)。为了编译 *.jaxx 文件，您可以配置 Eclipse Project Builder 或使用外部工具启动器。

顺便问一下，你考虑过使用 JavaFX 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T12:09:34.857

**[@duemir](https://stackoverflow.com/users/191103/duemir)**

我在我的答复文件中提到了同样的事情。

请检查我的上述答案（Jugal Thakkar）

**或者**

[点击这个链接](https://docs.google.com/document/d/19bYF0z5sNiwT-zL5VAZBY1CM0MgHA6pqzZ8dP22llvc/edit?usp=sharing)

转到您的链接并检查该页面中的**资源**，然后尝试访问 JAXX 官方网站。您无法访问官方项目页面 (www.jaxxframework.org/)。 **我已经在“我的文档”中提到了所有内容，**所以请先阅读一下。

**我可以在这个问题上得出结论**。

1）**这个项目没有正式运作**。因为您无法打开官方项目网站。因此您无法访问文档和其他内容。

# jquery - 使用 jQuery 将 div 垂直和水平居中

> ID：13903556
> 
> 赞同：36
> 
> 时间：2012-12-16T17:10:14.393
> 
> 标签：jquery, centering

我正在使用此脚本将我的 div 水平和垂直居中。

当页面加载时，div 垂直居中，而不是水平居中，直到我调整浏览器的大小。

我究竟做错了什么？

```
$(document).ready(function (){
    $(window).resize(function (){
        $('.className').css({
            position:'absolute',
            left: ($(window).width() - $('.className').outerWidth())/2,
            top: ($(window).height() - $('.className').outerHeight())/2
        });
    });
    $(window).resize();
}); 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-16T17:21:13.447

我通常使用这种“技术”：

```
$(function() {
    $('.className').css({
        'position' : 'absolute',
        'left' : '50%',
        'top' : '50%',
        'margin-left' : -$('.className').width()/2,
        'margin-top' : -$('.className').height()/2
    });
}); 
```

* * *

**更新：**

**[根据用户Fred K](https://stackoverflow.com/users/1252920/fred-k)**的建议，我正在更新解决方案，使用[`.outerWidth()`](http://api.jquery.com/outerwidth/)and[`.outerHeight()`](http://api.jquery.com/outerheight/)进行更精确的居中。

```
$(function() {
    $('.className').css({
        'position' : 'absolute',
        'left' : '50%',
        'top' : '50%',
        'margin-left' : -$('.className').outerWidth()/2,
        'margin-top' : -$('.className').outerHeight()/2
    });
}); 
```

来自 jQuery 文档 ( [`.outerWidth()`](http://api.jquery.com/outerwidth/), [`.outerHeight()`](http://api.jquery.com/outerheight/)) 的一些附加说明：

> *   在某些情况下，与尺寸相关的 API（包括 .outerWidth()）返回的数字可能是小数。代码不应假定它是整数。此外，当用户缩放页面时，尺寸可能不正确；浏览器不会公开 API 来检测这种情况。
>     
>     
> *   当元素的父级隐藏时，.outerWidth() 报告的值不能保证准确。要获得准确的值，您应该先显示父级，然后再使用 .outerWidth()。

* * *

**更新 2：**

一个简单的更新，展示如何`this`在方法内部使用`css()`，以防有更多`class`具有不同大小的相同标签的元素。

```
$(function() {
    $('.className').css({
        'position' : 'absolute',
        'left' : '50%',
        'top' : '50%',
        'margin-left' : function() {return -$(this).outerWidth()/2},
        'margin-top' : function() {return -$(this).outerHeight()/2}
    });
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-16T17:27:41.107

使用它来居中：

```
$.fn.center = function () {
   this.css("position","absolute");
   this.css("top", ( $(window).height() - this.height() ) / 2  + "px");
   this.css("left", ( $(window).width() - this.width() ) / 2 + "px");
   return this;
}

$('yourElem').center(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-16T17:31:22.750

将处理程序代码包装在一个函数中，以便您可以在页面加载以及处理程序中调用该函数`$(window).resize()`

```
/* use as handler for resize*/
$(window).resize(adjustLayout);
/* call function in ready handler*/
$(document).ready(function(){
    adjustLayout();
    /* your other page load code here*/
})

function adjustLayout(){
    $('.className').css({
        position:'absolute',
        left: ($(window).width() - $('.className').outerWidth())/2,
        top: ($(window).height() - $('.className').outerHeight())/2
    });

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-16T17:40:16.203

与您的代码片段相关，您需要先设置位置：

```
$(window).resize(function (){
    var $el = $('.className');
    $el.css('position', 'absolute').css({
        left: ($(window).width() - $el.width()) / 2,
        top: ($(window).height() - $el.height()) / 2
    });
}); 
```

也许您可以通过*静态*CSS 样式设置位置属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-10T10:26:01.153

基于@dimi 的回答，使用多个元素效果更好

```
$(".className").each(
    function () {
       $( this ).css("position","absolute");
       $( this ).css("left","50%");
       $( this ).css("margin-left", - $( this ).outerWidth()/2 );
       $( this ).css("top","50%");
       $( this ).css("margin-top", - $( this ).outerHeight()/2 );
       return this;
    }
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-11T22:34:33.920

我使用这个[JQuery.center](https://github.com/mustafah/jquery.center)插件来使我的 DOM 元素居中。代码将是这样的：

```
$("#child").center() 
```

前面的代码将相对于其直接父级居中，如果您需要相对于另一个父级居中，它将是：

```
$("#child").center($("#parent")) 
```

如果您需要其他形式的集中化，可以使用自定义选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-16T20:20:14.777

我的带类中心的 div 必须在中间水平居中，并且它的位置是固定的。我使用这个小代码来实现它：

```
$(window).on('resize load', function () {
    $('.center').each(function () {
        $(this).css({
            'margin-left': ($('body').width() - $(this).width()) / 2
        });
    });
}); 
```

您也可以使用相同的策略进行水平对齐。看看它在加载和调整大小事件时立即处理，所以这个 div 总是在中间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-22T01:19:20.290

我最近一直试图在浏览器窗口的中间放置一个框。我创建了下面的代码。jQuery 脚本很长，因为我考虑了 html 和 body 标记的所有填充和边距（如果有人设置了它们）。如果不关心背景，则只需设置 winwidth、winheight、toppx、leftpx 和“#container”。其余的可能会被删除。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test of centre of container</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <style>
        html {
            background-color: #444;
            margin: 30px;
        }
        #wrapper {
            background-color: #777;
            width: 75%;
            margin: 0 auto;
            padding: 0;
        }
        #container {
            background-color: #ddd;
            border-radius: 10px;
            box-shadow: 0 0 2px #222;
            width: 200px;
            height: 100px;
            position: absolute;
            vertical-align: middle;
        }
        #extext {
            text-align: center;
            padding: 0;
        }
    </style>
</head>
<body>
    <script>
        function setDimensions() {
            var winwidth = $(window).width();
            var winheight = $(window).height();
            var htmlmv = parseInt($("html").css("margin-top")) + parseInt($("html").css("margin-bottom"));
            var htmlpv = parseInt($("html").css("padding-top")) + parseInt($("html").css("padding-bottom"));
            var htmlmh = parseInt($("html").css("margin-left")) + parseInt($("html").css("margin-right"));
            var htmlph = parseInt($("html").css("padding-left")) + parseInt($("html").css("padding-right"));
            var bodymv = parseInt($("body").css("margin-top")) + parseInt($("body").css("margin-bottom"));
            var bodypv = parseInt($("body").css("padding-top")) + parseInt($("body").css("padding-bottom"));
            var bodymh = parseInt($("body").css("margin-left")) + parseInt($("body").css("margin-right"));
            var bodyph = parseInt($("body").css("padding-left")) + parseInt($("body").css("padding-right"));
            var vspace = htmlmv + htmlpv + bodymv + bodypv;
            var hspace = htmlmh + htmlph + bodymh + bodyph;
            var wrapheight = winheight - vspace;
            var wrapwidth = winwidth - hspace;
            $("#wrapper").height(wrapheight);
            // $("#wrapper").width(wrapwidth);

            var toppx = (winheight - parseInt($("#container").css("height"))) / 2;
            var leftpx = (winwidth - parseInt($("#container").css("width"))) / 2;
            $("#container").css("top", toppx.toString() + "px");
            $("#container").css("left", leftpx.toString() + "px");
        }

        $(document).ready(function () {
            setDimensions();
        });
        $(window).resize(function () {
            setDimensions();
        });
    </script>
    <div id="wrapper">
        <div id="container">
            <p id="extext">Example text</p>
        </div>
    </div>
</body>
</html> 
```

* * *

[编辑：我在CSS Tricks 网站](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)上找到了更好的解决方案，它只使用 CSS :)。代码如下：

```
<!DOCTYPE html>
<html>
<head>
    <title>
        Test centring!
    </title>
    <style>
        body div {
            background-color: red;
            box-shadow: 0 0 15px #222;
            border-radius: 10px;
            padding: 10px;
            margin: -150px auto auto -200px;
            width: 380px;
            height: 280px;
            position: absolute;
            top: 50%;
            left: 50%;
            text-align: center;
            line-height: 140px;
        }
        body div h2 {
            color: yellow;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div>
        <h2>
            Example text<br />
            Example Text
        </h2>
    </div>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-25T16:46:36.740

您可以使用该插件，使用起来非常简单 [https://github.com/tenbullstech/jquery-make-me-center](https://github.com/tenbullstech/jquery-make-me-center)

```
$("div.box").makemecenter(); 
```

# smalltalk - 在 Squeak Smalltalk 中将参数验证为类

> ID：13903559
> 
> 赞同：0
> 
> 时间：2012-12-16T17:10:49.357
> 
> 标签：smalltalk, squeak

如何将参数验证为类对象？例如，如果我想将参数验证为字符串，我可以编写`param1 isString`. 有没有类似的东西`isClass`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:48:25.417

正如其他人所指出的那样，当你试图弄清楚这种事情时，他们是你的朋友，但调用这些方法`isKindOf:`通常*是*一种代码味道。几乎总是有更好的方法来做到这一点，我将分为两类：`isMemberOf:`

 *1.  **在所有相关类上实现该方法，对每个类做正确的事情。** 例如，如果我正在编写一个视频游戏，那么，与其测试我得到什么类型的对象并告诉它下一步要做什么，我可以只`performNextStep`在所有游戏对象上实现一个函数，然后将它留给每个游戏对象反对弄清楚它应该做什么。
2.  **测试功能，而不是类成员资格。**`isKindOf:`与其检查某事物是否属于类，不如检查是否它`respondsTo: aMethod`，如果是则调用它。这也意味着已经获得有效方法但不在您预期的初始层次结构中的类仍然可以传递 - 如果您使用 Traits 则非常重要，因为可能没有单个类层次结构可供测试.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:24:18.507

您可以测试您的参数是否继承自`Class`or `Metaclass`：

```
String isKindOf: Class orOf: Metaclass => true
"If you don't want Metaclasses, simply use isKindOf: Class"
String class isKindOf: Class orOf: Metaclass => true
'foo' isKindOf: Class orOf: Metaclass => false 
```

但是，最好自己实现您想要在`Class`（和任何其他相关对象）上执行的操作，这样您就可以在`someOp`不实际验证输入的情况下执行。

* * *

如果您的输入是一个字符串，并且您想获取具有相应名称的类（如果存在），您可以使用：

```
Smalltalk classNamed: 'String' 
```*

# jquery - .load() 没有在 jquery 中调用我的 php 页面

> ID：13903562
> 
> 赞同：2
> 
> 时间：2012-12-16T17:11:01.433
> 
> 标签：jquery

我正在尝试调用一个基本上解析我的 xml 的 php 页面，如果 xml 中有更改，它将将该数据插入到 mysql 表中。

我的代码最初是：

```
var auto_refresh = setInterval(
function ()
{
$('.blabla').load('parser.php');
}, 10000); // refresh every 10000 milliseconds 
```

其中 .blabla 是一个空 div 并且 parser.php 没有回显任何信息 - 我只调用 php 来检查 xml。

我不想每 10 秒调用一次 php，这似乎有点不必要，我想在我的页面加载之前调用 php。

我该怎么做呢？

这是我到目前为止所得到的：

```
$(document).ready(function() {

 $('.blabla').load('parser.php');

}); 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:20:57.587

尝试

```
 $(document).ready(function() {

        $('.blabla').load('parser.php', function()
        {
            //just to see if you loaded the php 
            alert("loaded yay!");  
       });

    }); 
```

如果没有消息，可能是 php.ini 的问题。

# arrays - R将值插入数组

> ID：13903568
> 
> 赞同：2
> 
> 时间：2012-12-16T17:11:40.170
> 
> 标签：arrays, r

我怎样才能转换A

```
A <- c(1,2,3,4,5,6,7,8,9) 
```

到乙

```
B <- c(0,0,1,2,3,0,0,4,5,6,0,0,7,8,9) 
```

我试过这个：

```
A <-c(1,2,3,4,5,6,7,8,9)
rows <- length(A)/3
dim(a) <- c(rows,3)
B <- matrix(0,rows,2+3)
B[,3:5] <- A

c(B) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T18:02:45.287

为什么不将 B 转换为 A：

```
b <- rep(c(0,0,1,1,1),time=length(A)/3)
b[b==1] <- A
b
[1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T17:32:58.710

这不是最漂亮的代码行，但这样的东西也应该起作用：

```
as.vector(sapply(split(A, rep(1:(length(A)/3), each = 3)), 
                 function(x) c(0, 0, x)))
# [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

首先，我们将向量拆分为 3 个集合，然后在每个集合中附加两个零，然后将其重新转换为向量。

* * *

### 更新

这是一种可能类似于您考虑的过程的方法：

```
A <- c(1,2,3,4,5,6,7,8,9)      # Your vector
dim(A) <- c(3, 3)              # As a matrix
B <- matrix(0, nrow=5, ncol=3) # An empty matrix to fill
B[c(3:5), ] <- A               # We only want to fill these rows
dim(B) <- NULL                 # Remove the dims to get back to a vector
B                              # View your handiwork
# [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T17:48:12.737

将接收向量构建为原始长度的 5/3，并填写用模算术计算的正确整数：

```
> bb <- vector(length= length(A)*1.67) # Will initially be logical vector
> bb[ !seq_along(bb) %% 5 %in% 1:2 ] <- A    # FALSE entries coerced to 0
> bb
 [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

模余数 3,4 和 0 处的位置依次填充 A 中的值。

这是另一个矢量化解决方案，可能更符合您之前努力的精神：

```
> c( rbind( matrix(0, nrow=2, ncol=length(A)/3), 
      matrix(A, nrow=3) ) )
 [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

这表明您的解决方案是正确的，除了在您应该在矩阵分配的 LHS 上使用行索引时使用列索引：

```
> B <- matrix(0, 5, 3)
> B[3:5, ] <- A
> B
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0
[3,]    1    4    7
[4,]    2    5    8
[5,]    3    6    9
> c(B)
 [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-16T17:16:45.557

假设 A 具有非零长度且长度可被 3 整除：

```
> c(vapply(seq(length(A)/3)-1,
           function(x) c(0,0,A[(x*3+1):(x*3+3)]),
           numeric(3+2)
          )
   )
 [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T18:02:49.150

我为此编写的愚蠢功能，具有一些可定制的功能：

```
PastingZeros <- function (divide = 3, data = A, amountofzeros = 2) {
  B     <- NULL
  n     <- length(data)
  index <- 1:n

  for (i in 1:(n / divide)) {
    B     <- c(B, rep(0, amountofzeros), data[index[1:divide]])
    index <- index[-1:-divide]
  }
  return(B)
}

PastingZeros(3, A, 0) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-16T19:00:35.697

我没有看到一个不假设`A`长度是 的倍数的解决方案`3`，所以我会抛出一个：

```
insert.every <- function(x, insert, every)
    unlist(lapply(split(x, (seq_along(x)-1) %/% every), append, x = insert),
           use.names = FALSE)

insert.every(1:9, c(0,0), 3)
# [1] 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9
insert.every(1:9, c(0,0), 4)
# [1] 0 0 1 2 3 4 0 0 5 6 7 8 0 0 9 
```

# ruby - 工头开始返回未找到的捆绑包

> ID：13903569
> 
> 赞同：6
> 
> 时间：2012-12-16T17:11:42.997
> 
> 标签：ruby, ubuntu, rvm, bundler, foreman

我最近从使用 Ubuntu 系统 Ruby 切换到使用 RVM。当我运行时`foreman start`，无论我的 Procfile 中的命令是什么，我都会收到一个未找到的错误。

我当前的 Procfile 是：

```
web: bundle exec unicorn -p $PORT -c ./unicorn.rb 
```

所以错误是：

```
/home/timmillwood/.rvm/gems/ruby-1.9.3-p327/gems/foreman-0.60.2/bin/foreman-runner: 41: exec: bundle: not found 
```

`which foreman`返回

```
/home/timmillwood/.rvm/gems/ruby-1.9.3-p327/bin/foreman 
```

`which bundle`返回

```
/home/timmillwood/.rvm/gems/ruby-1.9.3-p327/bin/bundle 
```

的输出`rvm info`是：

```
ruby-1.9.3-p327:

  system:
    uname:       "Linux ubuntu 3.5.0-19-generic #30-Ubuntu SMP Tue Nov 13 17:48:01 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux"
    system:      "ubuntu/12.10/x86_64"
    bash:        "/bin/bash => GNU bash, version 4.2.37(1)-release (x86_64-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.17.3 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "1 hour 10 minutes 26 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p327"
    date:         "2012-11-10"
    platform:     "x86_64-linux"
    patchlevel:   "2012-11-10 revision 37606"
    full_version: "ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-linux]"

  homes:
    gem:          "/home/timmillwood/.rvm/gems/ruby-1.9.3-p327"
    ruby:         "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327"

  binaries:
    ruby:         "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327/bin/ruby"
    irb:          "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327/bin/irb"
    gem:          "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327/bin/gem"
    rake:         "/home/timmillwood/.rvm/gems/ruby-1.9.3-p327@global/bin/rake"

  environment:
    PATH:         "/home/timmillwood/.rvm/gems/ruby-1.9.3-p327/bin:/home/timmillwood/.rvm/gems/ruby-1.9.3-p327@global/bin:/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327/bin:/home/timmillwood/.rvm/bin:/usr/local/heroku/bin:/home/timmillwood/Support-Tools/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games"
    GEM_HOME:     "/home/timmillwood/.rvm/gems/ruby-1.9.3-p327"
    GEM_PATH:     "/home/timmillwood/.rvm/gems/ruby-1.9.3-p327:/home/timmillwood/.rvm/gems/ruby-1.9.3-p327@global"
    MY_RUBY_HOME: "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327"
    IRBRC:        "/home/timmillwood/.rvm/rubies/ruby-1.9.3-p327/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

我也尝试过使用 rbenv 来解决完全相同的问题。Foreman 工作得很好，我使用的是系统 ruby​​，但是我已经从 Ubuntu 中清除了这些，并且想要使用 RVM 或 rbenv，所以我可以运行 Ruby 1.9 和 1.8。

就好像工头找不到捆绑二进制文件一样。我可以运行`bundle exec ruby web.rb`或`ruby web.rb`运行一个 sinatra 应用程序，但这失败了，因为它没有像工头那样从 .env 加载我的环境变量。我可以使用 rack-env 加载我的 .env 文件，然后使用`ruby web.rb`但宁愿使用工头加载我的 sinatra 应用程序。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T15:07:44.500

Turns out I had `PATH` overridden in my .env file I generated via `heroku config:pull`. Deleting that line has solved the problem.

Thanks all, nothing to see here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:20:07.713

像你这样的接缝`~/.profile`可以覆盖`PATH`-> [https://github.com/ddollar/foreman/blob/master/bin/foreman-runner#L37](https://github.com/ddollar/foreman/blob/master/bin/foreman-runner#L37)，确保没有`PATH=...`in`~/.profile`或任何其他文件加载它。

# python - 如何从列表中选择两个元素并在 Python 中对它们进行数学运算？

> ID：13903570
> 
> 赞同：1
> 
> 时间：2012-12-16T17:11:42.447
> 
> 标签：python

我有一个包含序列的多个开始和结束位置（很多！）的文件，我想选择开始和结束位置，从开始减去结束位置以获得特定序列的长度，然后随机放置序列介于最小起始编号和最大结束编号之间。不知道这样有没有意义......

然而，这是我到目前为止所拥有的：

```
#!/usr/bin/env python

import sys
import random
import math
import re

file = open(sys.argv[1], 'r')

list = []

for line in file:
    if line.startswith('G'):
        continue

    else:
        pos = re.split('\s', line)
        list.append(pos[0])
        list.append(pos[1])
        list = map(int, list)
        for i in list:
            #ldom = (i:i+1)-i + 1 
print randrange(1, 3000000000, ldom)

file.close() 
```

'#' 行是我遇到问题的行。我有一个列表，其中每个元素代表一个开始或结束位置，list[0] 代表一个开始，list[1] 代表一个结束位置。我只是不知道如何从列表 [0] 中减去列表 [1]，然后在该数字上加 1....列表推导似乎只适用于非特定元素或所有元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:28:57.680

这是一个 ipython 解释器示例，它在空格上分割一行（如[str.split()](http://docs.python.org/2/library/stdtypes.html#str.split)的文档中所述，空格是默认分隔符），将项目转换为整数（通过`map(int, ...)`，然后[压缩](http://docs.python.org/2/library/functions.html#zip)成对：

```
In [127]: line='0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16'

In [128]: zip(*[iter(map(int, line.split()))]*2)
Out[128]: [(0, 1), (2, 3), (4, 5), (6, 7), (8, 9), (10, 11), (12, 13), (14, 15)] 
```

您可以为 zip 表达式设置一些变量，例如`bounds`，然后在列表上迭代`bounds`以执行您需要对“特定序列”执行的任何操作。例如：

```
In [131]: bounds = zip(*[iter(map(int, line.split()))]*2)

In [132]: for lo, hi in bounds: print 'lo:', lo, '\thi:', hi, '\tdelta:', hi-lo+1
lo: 0   hi: 1   delta: 2
lo: 2   hi: 3   delta: 2
lo: 4   hi: 5   delta: 2
lo: 6   hi: 7   delta: 2
lo: 8   hi: 9   delta: 2
lo: 10  hi: 11  delta: 2
lo: 12  hi: 13  delta: 2
lo: 14  hi: 15  delta: 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:20:29.757

> 我只是不知道如何从列表 [0] 中减去列表 [1]，然后在该数字上加 1....

我不知道这是否有帮助，但**总是尽量保持简单兄弟**：

```
ldom = list[0] - list[1] + 1 
```

应该这样做，前提是您操作的对象是一种数字，并且您**删除**了列表对象上的迭代 ( `for i in list`)

# python - Python酸洗问题

> ID：13903574
> 
> 赞同：0
> 
> 时间：2012-12-16T17:12:12.400
> 
> 标签：python, python-3.x, pygame, pickle

我这里有一些使用“pickle”模块的python 3代码。它应该存储游戏的高分。当我再次打开程序时，它反而给了我默认的“A：100 ...”高分。

```
def __init__(self):
    self.filename = "highscores.dat"
    self.numScores = 5

    if not os.path.isfile(self.filename):
        self.file = open(self.filename, "wb")
        self.scores = [100 for i in range(self.numScores)]
        self.names = ["A", "B", "C", "D", "E"]
        self.highscores = [(self.names[i], self.scores[i]) for i in range(self.numScores)]
        self.updateFile()
    else:
        file = open(self.filename, "rb")
        self.highscores = pickle.load(file)
        file.close()
        self.file = open(self.filename, "wb")

        self.names = [highscore[0] for highscore in self.highscores]
        self.scores = [highscore[1] for highscore in self.highscores]

 def addScore(self, name, score):
    self.scores.append(score) #Add new score 
    self.scores.sort(reverse = True) #Sort
    self.names.insert(self.scores.index(score), name)
    self.names = self.names[:self.numScores] # Top 5
    self.scores = self.scores[:self.numScores]
    self.highscores = [(self.names[i], self.scores[i]) for i in range(self.numScores)]
    self.updateFile()

def updateFile(self):
    pickle.dump(self.highscores, self.file) 
```

这只是我认为问题所在的代码部分。如果需要，我会发布更多。我很乐意回答您的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:27:57.243

您每次都需要重新打开文件进行写入。目前，每次分数更改时，您都会在文件中一个接一个地写入新记录。您的文件现在包含几个泡菜，但只读取第一个。

将您的代码更改为：

```
def __init__(self):
    self.filename = "highscores.dat"
    self.numScores = 5

    if not os.path.isfile(self.filename):
        self.scores = [100 for i in range(self.numScores)]
        self.names = ["A", "B", "C", "D", "E"]
        self.highscores = [(self.names[i], self.scores[i]) for i in range(self.numScores)]
    else:
        with open(self.filename, "rb") as f:
            self.highscores = pickle.load(f)
        self.names = [highscore[0] for highscore in self.highscores]
        self.scores = [highscore[1] for highscore in self.highscores]

def updateFile(self):
    with open(self.filename, 'wb') as f:
        pickle.dump(self.highscores, f) 
```

与`addScore`不变。

现在，每次分数更改时，都会*从头开始*写入高分文件。

# vb.net - 我得到参数'sender'和'e'没有指定的参数？

> ID：13903576
> 
> 赞同：0
> 
> 时间：2012-12-16T17:12:20.277
> 
> 标签：vb.net

我`Call.ProgressUpdate()`用来打电话：

```
Public Sub ProgressUpdate(sender As Object, e As DownloadProgressChangedEventArgs)
    Console.WriteLine("{0}% completed", e.ProgressPercentage)
    Call Main2()
End Sub 
```

但我得到错误：

> 未为“Public Sub ProgressUpdate(sender As Object, e As System.Net.DownloadProgressChangedEventArgs)”的参数“sender”指定参数。

和

> 未为“Public Sub ProgressUpdate(sender As Object, e As System.Net.DownloadProgressChangedEventArgs)”的参数“e”指定参数。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:42:49.083

不是很清楚你为什么直接调用这个方法，它应该是一个事件处理程序。您需要传递它需要的参数，但这不起作用，因为您无法创建 DownloadProgressChangedEventArgs 类的实例，它的构造函数不可访问。您需要将其分解为两个单独的方法，如下所示：

```
Private Sub ProgressUpdate(sender As Object, e As DownloadProgressChangedEventArgs)
    ShowProgress(e.ProgressPercentage)
End Sub

Private Sub ShowProgress(percentage As Integer)
    Console.WriteLine("{0}% completed", percentage)
End Sub 
```

现在您可以简单地调用 ShowProgress(0)。

# python - 如何在gimp python插件代码中调用separate+插件？

> ID：13903579
> 
> 赞同：2
> 
> 时间：2012-12-16T17:12:36.027
> 
> 标签：python, gimp

我是一个新手，试图编写一个`gimp`使用 Python 的小插件。[它会生成一个图像并使用单独的插件](http://www.vuiis.vanderbilt.edu/~welcheb/mac%20installs/GIMP/separate-0.3_macosx/separate.c)将其转换为 CMYK

代码示例：

```
# some code that creates xcf image
layer = pdb.gimp_image_merge_visible_layers(newimage, CLIP_TO_IMAGE)
layer = pdb.plug_in_separate_light(some args here ) 
```

我不知道如何调用`pdb.plug_in_separate_light()`然后保存结果图像。我只知道这`pdb.plug_in_separate_light()`需要 10 个参数，其中一个应该是 gimp 可绘制对象（在我的例子中是层）和两个包含 icm/icc 配置文件路径的字符串。有什么建议么？

# c++ - WinCE 上的 C++ 中的一次性计时器

> ID：13903581
> 
> 赞同：4
> 
> 时间：2012-12-16T17:12:50.823
> 
> 标签：c++, timer, windows-ce, scheduling

我正在编写一个事件处理函数，`f(d)`它接收一些数据，`d`并且必须采取行动`X(d)`，然后休眠 100 毫秒，然后采取另一个行动`Y(d)`。我将其实现为：

```
void f(d)
{
  X(d);
  Sleep(100);
  Y(d);
} 
```

但是，`f(d)`从单线程事件处理程序调用，因此 Sleep(100) 是不可接受的。

我想做以下事情：

```
void f(d)
{
  X(d);
  ScheduleOneShotTimer(Y,d,100);
} 
```

我可以`ScheduleOneShotTimer`通过为每个调用创建一个新线程，将数据作为线程参数传递，并`Sleep`在执行之前调用来实现`Y(d)`。但是，由于此事件每秒可能发生多达 100 次，我担心创建销毁所有这些线程所涉及的开销。

最好有操作系统级别的“一次性计时器”支持，但我认为 CE 上不是这种情况。我知道 SetTimer，但这不适用于我，因为我正在编写一个没有消息循环的“控制台应用程序”。

对于如何构建它的任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T02:26:53.520

调用[`timeSetEvent`](http://msdn.microsoft.com/en-us/library/aa448195.aspx)API（我知道一个完全不直观的 API 名称）。使用回调函数和`TIME_ONESHOT`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:32:43.253

我将创建一个线程来保留时间戳回调对队列，休眠 100 毫秒（或更短的时间），然后执行所有经过的回调。具有所有线程间同步的 OFC（在关键部分上互锁等）。

这是一个注重性能的解决方案，而不是一个注重精度的解决方案。随着回调的堆积，执行时间可能会超过 100 毫秒。但是，由于您正在使用 Wait 测量时间（这并不精确），我想它可能已经足够好了。

# ruby-on-rails - 未定义的方法“model_name”错误

> ID：13903582
> 
> 赞同：0
> 
> 时间：2012-12-16T17:12:51.690
> 
> 标签：ruby-on-rails

我不断收到这个奇怪的错误，即使一切都在本地主机上运行。

```
 1) User pages profile page 
     Failure/Error: before { visit user_path(user) }
     ActionView::Template::Error:
       undefined method `model_name' for NilClass:Class
     # ./app/views/shared/_create_list.html.erb:2:in `_app_views_shared__create_list_html_erb__3760252191913263716_70266394394440'
     # ./app/views/users/show.html.erb:17:in `_app_views_users_show_html_erb__4038196524711190952_70266368588040'
     # ./spec/requests/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

users_controller

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
    @lists = @user.lists
    @list = current_user.lists.build if signed_in?
  end 
```

列表控制器

```
class ListsController < ApplicationController
  before_filter :signed_in_user

  def create
    @list = current_user.lists.build(params[:list])
    if @list.save
      flash[:success] = "List created!"
      redirect_to current_user
    else
      redirect_to current_user
    end
  end 
```

_create_list 部分

```
<div class="white-box">
<%= form_for(@list) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :name, placeholder: "Create new list..." %>
    <%= f.submit "Create list", class: "btn btn-primary" %>
  </div>
<% end %>
</div> 
```

用户/节目

```
 <div class="span8">
    <% if @user.lists.any? %>
      <h3>Lists (<%= @user.lists.count %>)</h3>
      <ol class="lists">
        <%= render @lists %>
      </ol>
    <% end %>
    <%= render 'shared/create_list' %>
  </div> 
```

user_pages_spec

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    let!(:m1) { FactoryGirl.create(:list, user: user, name: "Foo") }
    let!(:m2) { FactoryGirl.create(:list, user: user, name: "Bar") }

    before { visit user_path(user) } 
```

我对 Rails 很陌生，这个错误已经困扰了我好几天！任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:26:53.657

这个问题是因为`@list`如果用户登录，您将对象分配给，否则它将仅为零。

要解决此问题，请`if @list`在 ( `users/show`)中添加条件

```
<%= render 'shared/create_list' if @list %> 
```

# ios - 你如何将字幕添加到 NSArray

> ID：13903583
> 
> 赞同：1
> 
> 时间：2012-12-16T17:12:52.387
> 
> 标签：ios, objective-c, uitableview

我正在尝试找到一种更好的添加字幕的方法，目前有两个不同的数组我想知道您是否可以将字幕添加到与标题相同的数组中？

```
lodgeList = [[NSArray alloc]initWithObjects:

             //Abingdon
             @"Abingdon Lodge No. 48",  // This is the Title 
             // I would like to add the subtitle here

             @"York Lodge No. 12",

             //Alberene
             @"Alberene Lodge No. 277",

             // Alexandria
             @"A. Douglas Smith, Jr. No. 1949",
             @"Alexandria-Washington Lodge No. 22",
             @"Andrew Jackson Lodge No. 120",
             @"Henry Knox Field Lodge No. 349",
             @"John Blair Lodge No. 187",
             @"Mount Vernon Lodge No. 219", 
```

如何为上面的每个名称添加副标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T17:14:26.260

创建一个类，该类具有标题和副标题的 NSString 属性。实例化对象。放入数组。

```
-(UITableViewCell *)tableView:(UITableView *)tableview cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     //…
    MyLodge *lodge = lodgeList[indexPath.row];
    cell.textLabel.text = lodge.title;
    cell.detailLabel.text = lodge.subtitle;
    return cell;
} 
```

* * *

除了自定义类，您还可以使用 NSDictionaries。

```
lodgeList = @[ 
                @{@"title":@"Abingdon Lodge No. 48",
                  @"subtitle": @"a dream of a lodge"},
                @{@"title":@"A. Douglas Smith, Jr. No. 194",
                  @"subtitle": @"Smith's logde…"},
             ]; 
```

[此代码具有[新的文字语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)]

```
-(UITableViewCell *)tableView:(UITableView *)tableview cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     //…
    NSDictionary *lodge = lodgeList[indexPath.row];
    cell.textLabel.text = [lodge objectForKey:@"title"];
    cell.detailLabel.text = [lodge objectForKey:@"subtitle"];
    return cell;
} 
```

* * *

`tableView:cellForRowAtIndexPath:`实际上，由于两种解决方案[的键值编码](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)，您可以使用相同的实现：

```
-(UITableViewCell *)tableView:(UITableView *)tableview cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     //…
    id lodge = lodgeList[indexPath.row];
    cell.textLabel.text = [lodge valueForKey:@"title"];
    cell.detailLabel.text = [lodge valueForKey:@"subtitle"];
    return cell;
} 
```

* * *

> 这可以与原型细胞一起使用吗？

是的，如[«WWDC 2011, Session 309 — Introducing Interface Builder Storyboarding»](https://developer.apple.com/videos/wwdc/2011/?id=309)中所示，您将创建 UITableViewCell 的子类，给它一个属性来保存您的模型和属性以反映标签。这些标签将连接在故事板中

# extjs - 在 ExtJS 中的 BoxSelect 或 ComboBox 中取消选择

> ID：13903586
> 
> 赞同：1
> 
> 时间：2012-12-16T17:13:05.380
> 
> 标签：extjs, combobox

虽然这听起来没有任何意义，但如果我让它工作的话……

我想要做的是让组合什么都不做，什么都不做......所以我设法阻止它将记录添加到选定的记录列表中。但我找不到阻止它把物品涂成蓝色的方法。了解我想要做什么的最好方法是检查 ExtJS 文档页面中的实时预览，看看如果你在下拉列表中选择一个项目，它会变成蓝色，尽管它没有将它添加到 selectedRecords 列表中。

这是 ExtJS 文档页面的 url...

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox)

对于那些不熟悉该工具的人，只需在此处查找代码编辑器，粘贴此代码并单击实时预览。

```
// The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    data : [
        {"abbr":"AL", "name":"Alabama"},
        {"abbr":"AK", "name":"Alaska"},
        {"abbr":"AZ", "name":"Arizona"}
    ]
});

// Create the combo box, attached to the states data store
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    multiSelect:true,
    renderTo: Ext.getBody(),
    onListSelectionChange:function(){
        console.log('Do nothing');
    } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:54:09.663

这是你想要的？

```
onListSelectionChange:function(){
    this.picker.getSelectionModel().deselectAll();
} 
```

看到它在这里工作：http: [//jsfiddle.net/lontivero/5Ftrf/1/](http://jsfiddle.net/lontivero/5Ftrf/1/)

**更新** 如果您想保持以前选择的项目不变，您可以尝试这样做。它只会阻止新的选择。

```
onListSelectionChange:function(){
        var lastSelected = this.picker.getSelectionModel().lastSelected;
        itemNode = this.picker.getNode(lastSelected || 0);
        if (itemNode) {
            this.picker.getSelectionModel().deselect(lastSelected );
        }        
} 
```

在 jsfiddle：http: [//jsfiddle.net/lontivero/5Ftrf/2/](http://jsfiddle.net/lontivero/5Ftrf/2/)

# java - 谷歌驱动器错误 java.lang.NoSuchMethodError: com.google.api.client.http.HttpRequestFactory.buildRequest

> ID：13903589
> 
> 赞同：2
> 
> 时间：2012-12-16T17:13:19.007
> 
> 标签：java, google-app-engine, google-drive-api

尝试运行 Google 驱动器示例时，我总是得到下面解释的错误。我检查了配置，它看起来是正确的。使用了最新版本的 appengine eclipse 插件。抛出的错误看起来好像方法：com.google.api.client.http.HttpRequestFactory.buildRequest 在运行时不可用。这是一个不推荐使用的方法，但在编译时没有给出错误。有没有人遇到过同样的情况？

```
012-12-16 08:52:01.050 未捕获的 servlet 异常

    java.lang.NoSuchMethodError: com.google.api.client.http.HttpRequestFactory.buildRequest(Ljava/lang/String;Lcom/google/api/client/http/GenericUrl;Lcom/google/api/client/http/HttpContent; )Lcom/google/api/client/http/HttpRequest;
    在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.buildHttpRequest(AbstractGoogleClientRequest.java:290)
    在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:396)
    在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
    在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
    在 it.contextsolutions.drived.CredentialMediator.getUserInfo(CredentialMediator.java:211)
    在 it.contextsolutions.drived.CredentialMediator.getActiveCredential(CredentialMediator.java:312)
    在 it.contextsolutions.drived.DrEditServlet.getCredentialMediator(DrEditServlet.java:98)
    在 it.contextsolutions.drived.DrEditServlet.getClientId(DrEditServlet.java:143)
    在 it.contextsolutions.drived.StartPageServlet.doGet(StartPageServlet.java:46)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617)     
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717)     
    在 org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    "

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:28:28.570

问题实际上是 drEdit 示例仍然具有 GAE 1.6.3 版本库，并且您从较新版本添加了 GAE API（和驱动器/oauth2 api）。

只需在 web/WEB-INF/lib 下检查您的项目的源代码 - 您将有许多相同 jar 的副本，但版本不同：

*   appengine-api-xxx-1.6.3（从 drEdit 源获得）和 appengine-api-xxx-1.7.4（由 Eclipse 中的 Google 插件添加）
*   google-api-client-xxx-1.10.3-beta.jar（来自 drEdit 源）和 google-api-client-xxx-1.12.0-beta（由 Eclipse 插件添加）
*   google-api-services-xxx-1.7.2-beta（来自 drEdit 源）和 google-api-services-xxx-1.12.0-beta（由 Eclipse 插件添加）。

通过删除旧版本的 jar 来简单地清理你的 web/WEB-INF/lib 文件夹 - 在我的情况下它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T18:59:37.003

我让它工作的方法：

查看 google-drive-sdk-samples，将其复制到您的工作区，但删除 WEB-INF/lib 中的所有过时库。

添加 Drive-SDK 和 OAuth2 API，这将自动将所有需要的库文件添加到 WEB-INF/lib。

现在你的图书馆是一致的，你很高兴！

# javascript - 自动换行：断词在 IE9 中不起作用

> ID：13903590
> 
> 赞同：0
> 
> 时间：2012-12-16T17:13:21.713
> 
> 标签：javascript, html, css

我有一个隐私字段（值为收件人：或密件抄送：）和一个从我的数据库输出的电子邮件地址字段。我希望电子邮件地址始终位于收件人：/密件抄送：之后，并且当电子邮件地址太长时不要向下移动一行。

该按钮是 position: absolute 所以它不应该影响文本位置。

我数据库中最长的电子邮件地址（到目前为止）是 41 个字符。

当电子邮件地址到达单元格末尾时，我使用此方法将其拆分，电子邮件地址的其余部分在下一行继续：

```
<tr>
<td>Email:</td>
<td style="word-wrap: break-word"><?php echo $Privacy; ?> <span><?php echo $Email; ?></span> <button class="copy">COPY</button></td>
</tr> 
```

...这在 IE9 中不起作用。在需要进行换行之前，我需要为隐私字段（密件抄送：）提供至少五个字符，然后是 36 个字符。

我是否将 CSS 用于其他目的？文本换行似乎不再受支持。是否需要 JavaScript 或 PHP 来解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:18:41.700

在 Internet Explorer 以外的浏览器中——也许在 IE9 中——它是`overflow-wrap`.

```
<td style="overflow-wrap: break-word"> 
```

你可以尝试两种风格。*编辑*尝试`-ms-word-wrap`IE9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:38:50.370

尝试给 td 一个固定的宽度，然后将内容放在一个应用了样式的 div 中。前任：

```
<td style="width:300px;">
    <div style="width:300px;overflow-wrap:break-word;">
        <?php echo $Privacy; ?> 
        <span><?php echo $Email; ?></span> 
        <button class="copy">COPY</button>
    </div>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T08:03:11.630

**我把我的标签放在一个 div 中并赋予它最终工作的风格**

```
<div style="word-wrap: normal; word-break: break-all;">
<asp:Label ID="Label2" runat="server" Text='<%# Bind("REASON") %>'></asp:Label>
</div> 
```

# c# - 如何从 actionfilter 中的属性中获取值

> ID：13903594
> 
> 赞同：0
> 
> 时间：2012-12-16T17:13:29.583
> 
> 标签：c#, asp.net-mvc-3, attributes, actionfilterattribute

标题看起来有点奇怪对不起。

好吧，我是 Asp.net MVC 3 的新手。我想为我的一个属性创建一个属性，该属性的名称是国家身份证号码。

```
 public class IdentityNumberControl : ActionFilterAttribute
{
    public string WrongIdentityNumber { get; set; }
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        if(??? )
        {
            filterContext.HttpContext.Response.Write(WrongIdentityNumber);
            return;
        }
        base.OnActionExecuting(filterContext);
    }
} 
```

我的会员班在这里

```
 public class Member
{
    public int ID { get; set; }
    [Required(ErrorMessage = "You have to enter your name")]
    [StringLength(50, ErrorMessage  ="Your name length can not be less than{2} more than {1} ", MinimumLength = 3)]
    [Display("Name :")]
    public string Name { get; set; }

    [Required(ErrorMessage = "You have to enter your surname")]
    [StringLength(40, ErrorMessage = "Your surname length can not be less than{2} more than {1} ", MinimumLength = 2)]
    [Display("Surname :")]
    public string SurName { get; set; }

    [Required(ErrorMessage = "You have to enter your password")]
    [StringLength(20, ErrorMessage = "Your name lengt can not be less than{2} more than {1} ", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display("Password :")]
    public string Password { get; set; }
    public string PasswordSalt { get; set; }

    [IdentityNumberControl(WrongIdentityNumber = "It is not a valid identity number")]
    public double IdentityNumber { get; set; }

} 
```

所以我想检查identitynumber是否正确（我有一个计算方法来确认它）我知道我必须在IdentityNumberControl类中编写代码。但我不知道如何在 OnActionExecuting 方法中获取 identitynumber 的值。

我希望我能解释我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:46:05.700

这是我的解决方案

```
public class IdentityNumberAttribute : ValidationAttribute
{
    private string WrongIdentityNumber;

    public IdentityNumberAttribute(string message)
    {
        WrongIdentityNumber = message;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {

        string identityNumber = value.ToString();

        if (identityNumber.Length != 11)
            return new ValidationResult(WrongIdentityNumber);

        int sum = 0;

        for (int i = 0; i < identityNumber.Length - 1; i++)
        {
            sum += Convert.ToInt32(identityNumber[i].ToString());
        }

        return sum.ToString()[1] == identityNumber[10]
                   ? ValidationResult.Success
                   : new ValidationResult(WrongIdentityNumber);
    }
} 
```

它计算出是否有效的土耳其国民身份证号码

你可以这样使用这个属性

```
 [IdentityNumber("It is not a valid identity number")]
    [Required(ErrorMessage = "You have to enter your identity number")]
    [DisplayName("National Identity Number:")]
    public string IdentityNumber { get; set; } 
```

# sql - 如何按表分组计算所有表中的列数和行数？

> ID：13903597
> 
> 赞同：1
> 
> 时间：2012-12-16T17:14:08.057
> 
> 标签：sql, oracle, count

我在查询中找不到错误：

```
SELECT
u.Table_Name, 
count(distinct c.Column_Name), 
sum(u.num_rows)    
FROM User_Tab_Columns c, User_Tables u    
WHERE   u.TABLE_NAME = c.TABLE_NAME    
group by u.Table_Name; 
```

结果是：

```
TABLE_NAME                     COUNT(DISTINCTC.COLUMN_NAME) SUM(U.NUM_ROWS)    
------------------------------ ---------------------------- ---------------
DEPT                                                      3              12     
EMP                                                       8             112 
```

它应该是：

```
 TABLE_NAME                     COUNT(DISTINCTC.COLUMN_NAME) SUM(U.NUM_ROWS)    
    ------------------------------ ---------------------------- ---------------
    DEPT                                                      3              4     
    EMP                                                       8             14 
```

所以查询多个行数和列数但我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:24:40.300

由于每个表的行数，您可以简单地按它进行分组：

```
SELECT
u.Table_Name, 
count(*), 
u.num_rows    
FROM User_Tab_Columns c, User_Tables u    
WHERE   u.TABLE_NAME = c.TABLE_NAME    
group by u.Table_Name, u.num_rows; 
```

# android - 从联系人中加载联系人图像，包括 facebook twitter 等 - android

> ID：13903603
> 
> 赞同：2
> 
> 时间：2012-12-16T17:14:29.210
> 
> 标签：android, image, contact

我有一个 android 应用程序，我显示联系人详细信息包括联系人个人资料图像。这就是我获取联系人图像的方式：

```
Uri photo = null;
String sPhoto = cursor
.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.PHOTO_ID));
if (sPhoto != null) {
photo = Uri.withAppendedPath(person,ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
myImageView.setImageURI(photo); 
```

当从手机中获取图像时，此代码可以正常工作，但在我的手机中（像许多其他人一样）我有一个 facebook 个人资料、twitter 个人资料等，在我的默认拨号器中，我可以在联系人旁边看到 facebook 或 twitter 个人资料图像名称或普通图像（来自手机） 我的代码只给了我手机中存在的图像，如果存在此类图像，我如何获取所有图像，包括 facebook 或 twitter？谢谢

# ruby-on-rails - 为什么 recaptcha 不会导致此测试失败？

> ID：13903606
> 
> 赞同：3
> 
> 时间：2012-12-16T17:14:36.890
> 
> 标签：ruby-on-rails, cucumber, recaptcha

我正在使用 Rails 3.1.0 和来自[here](https://github.com/ambethia/recaptcha/)的 recaptcha gem 。我正在运行一个黄瓜测试，检查用户是否可以注册。注册需要用户填写验证码。我知道我的测试没有触及验证码：

```
When /^I create a new account with email: "(.*?)" and password: "(.*?)"$/ do |email, pw|
    click_link "Sign up"
    fill_in "Email", :with => email
    fill_in "Password", :with => pw
    fill_in "Password confirmation", :with => pw
    click_button "Sign up"
end 
```

但测试仍然通过。我通过验证页面上是否存在成功注册消息并且使用此步骤不存在重新验证失败消息来检查成功：

```
Then /^I should (not )?see "(.*)"$/ do |negate, text|
  if negate
    page.should_not have_content text
  else
    page.should have_content text
  end
end 
```

[该控制器与此处](https://github.com/plataformatec/devise/wiki/How-To%3a-Use-Recaptcha-with-Devise)建议的第一个控制器几乎相同。

```
 class RegistrationsController < Devise::RegistrationsController
    def create
      if verify_recaptcha
        super
      else
        build_resource
        clean_up_passwords(resource)
        flash.now[:alert] = "There was an error with the recaptcha code below. Please re-enter the code."      
        flash.delete :recaptcha_error
        render :new
      end
    end
  end 
```

recaptcha 在测试环境中不起作用有什么原因吗？它似乎在开发中运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T17:25:31.083

Recaptcha 默认不验证测试和黄瓜环境中的验证码（请参阅[验证逻辑](https://github.com/ambethia/recaptcha/blob/master/lib/recaptcha/verify.rb#L12)、[配置逻辑](https://github.com/ambethia/recaptcha/blob/master/lib/recaptcha/configuration.rb#L44)和[默认值](https://github.com/ambethia/recaptcha/blob/master/lib/recaptcha.rb#L11)）。如果不是这样，要么测试将非常困难，要么验证码不会很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-16T12:20:36.343

只是为了添加到 Bens 的答案并给出一个潜在的解决方法：

为了确保 RSpec 中的事情不起作用（它“recaptcha 失败”）我已经完成了

```
before do
  Recaptcha.configuration.skip_verify_env.delete('test')
end

after do
  Recaptcha.configuration.skip_verify_env << 'test'
end 
```

谢谢本

# c# - openfiledialog 文件和目录？

> ID：13903609
> 
> 赞同：0
> 
> 时间：2012-12-16T17:15:01.423
> 
> 标签：c#, openfiledialog

我正在尝试制作简单的 mp3 播放器。当我使用它时

```
 listBox2.Items.Add(openFileDialog1.FileName); 
```

将歌曲添加到我的列表框它正在工作，但它显示文件目录所以我改变了这样

```
listBox2.Items.Add(openFileDialog1.SafeFileName); 
```

然后它在 listbox1 上看起来歌曲名称但是当我单击播放按钮时它不起作用:(

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Runtime.InteropServices;

namespace WindowsFormsApplication12222
{
    public partial class Form1 : Form
    {
        [DllImport("winmm.dll")]
        private static extern long mciSendString(string strCommand, StringBuilder strReturn, int iReturnLength, IntPtr hwndCallback);
        public string Pcommand;
        public bool isOpen;
        public Form1()
        {
            InitializeComponent();
        }

        public void Stop()
        {
            Pcommand = "close MediaFile";
            mciSendString(Pcommand, null, 0, IntPtr.Zero);
            isOpen = false;
        }

        public void Start()
        {
            Pcommand = "open \"" + listBox1.SelectedItem + "\" type mpegvideo alias MediaFile";
            mciSendString(Pcommand, null, 0, IntPtr.Zero);
            isOpen = true;
            Play(true);
        }

        private void button10_Click(object sender, EventArgs e)
        {
            openFileDialog1.Filter = "Media File(*.mpg,*.dat,*.avi,*.wmv,*.wav,*.mp3)|*.wav;*.mp3;*.mpg;*.dat;*.avi;*.wmv";
            openFileDialog1.ShowDialog();

            if (openFileDialog1.FileName != ""){

               // listBox1.Items.Add(openFileDialog1.SafeFileName);

                listBox2.Items.Add(openFileDialog1.FileName);
            }

        }

        private void button1_Click(object sender, EventArgs e)
        {
            Start();
        }

        private void button4_Click(object sender, EventArgs e)
        {
            Stop();
        }
        public void Play(bool loop)
        {
            if (isOpen)
            {
                Pcommand = "play MediaFile";
                if (loop)
                    Pcommand += " REPEAT";
                mciSendString(Pcommand, null, 0, IntPtr.Zero);
            }
        }
        int x;
        private void button2_Click(object sender, EventArgs e)
        {

            if (listBox1.SelectedIndex ==listBox1.Items.Count-1 ) { x++; }
            else
            {
                Stop();
                listBox1.SelectedIndex = listBox1.SelectedIndex + 1;

                Start();
            }
        }
        int y;
        private void button5_Click(object sender, EventArgs e)
        {

            if (listBox1.SelectedIndex ==0) { y++; }
            else
            {
                Stop();
                listBox1.SelectedIndex = listBox1.SelectedIndex - 1;

                Start();
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            listBox1.SelectedIndex = 0;

            Stop();
            Start();
        }

        private void button6_Click(object sender, EventArgs e)
        {
            listBox1.SelectedIndex = listBox1.Items.Count - 1;
            Stop();
            Start();
        }

        private void button9_Click(object sender, EventArgs e)
        {
            listBox1.Items.Clear();
            Pcommand = "close MediaFile";
            mciSendString(Pcommand, null, 0, IntPtr.Zero);
            isOpen = false;
        }

        private void button8_Click(object sender, EventArgs e)
        {

        }

        private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
        {

        }

    }
} 
```

额外的问题是可以混合（随机）一个列表框。我在 mp3 播放器上添加歌曲然后当我想单击混合按钮时我想要混合列表。是否有任何列表框命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:23:04.390

创建一个自定义类：

```
public class FileItem
{
    public string FilePath { get; set; }
    public string ShortName { get; set; }
} 
```

然后在从 中获取文件时创建这个类的新实例`OpenFileDialog`，保存`openFileDialog1.FileName`to`FilePath`属性，然后使用`Windows.IO.Path.GetFileName()`方法获取短文件名。

`ListBox`与其直接将文件路径添加到 中，不如添加`OpenFileDialog`您的类的这个实例。

`DisplayMember`并将您的属性更改`ListBox`为`"ShortName"`，这样您的文件路径的“短名称”将显示在`ListBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:10:54.527

您应该可以使用下面的链接来随机播放您的播放列表。

[随机播放列表算法](https://stackoverflow.com/questions/1816534/random-playlist-algorithm)

谢谢，海军

# android - 反转 LinearLayout 的方向

> ID：13903611
> 
> 赞同：17
> 
> 时间：2012-12-16T17:15:21.523
> 
> 标签：android, android-layout, android-ui

如何反转线性布局的方向？

例如，如果我的布局是 [view1, view2, view3] 我想创建 [view3, view2, view1]。我的目标是从一个 XML 布局中扩展左手和右手实例。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T17:30:55.593

一般来说，我会说你不能使用标准 SDK 来做到这一点。但是，您可以创建一个方法，从 LinearLayout 中获取所有子视图，将它们从 LinearLayout 中删除，然后以相反的顺序将它们添加回来。

```
LinearLayout ll = // inflate
ArrayList<View> views = new ArrayList<View>();
for(int x = 0; x < ll.getChildCount(); x++) {
    views.add(ll.getChildAt(x));
}
ll.removeAllViews();
for(int x = views.size() - 1; x >= 0; x--) {
    ll.addView(views.get(x));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-16T02:24:50.237

只需将以下代码添加到`LinearLayout`：

```
android:layoutDirection="rtl" 
```

但它会永久颠倒顺序 - 不仅适用于 RTL 语言环境:(

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-03T05:00:16.490

这是最简单的方法:)

```
for(int k = ll.getChildCount()-1 ; k >= 0 ; k--)
{
    View item = ll.getChildAt(k);
    ll.removeViewAt(k);
    ll.addView(item);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-17T07:06:06.023

您可以直接通过 layoutDirection 控制布局的方向。在这段代码中，我们检测自然方向是否为 RTL，并反转方向，显然可以应用您自己的逻辑来反转：

```
LinearLayout buttonsContainer = (LinearLayout) findViewById(R.id.buttonsContainer);          
buttonsContainer.setLayoutDirection(isRTL() ? LinearLayout.LAYOUT_DIRECTION_LTR : 
                                    LinearLayout.LAYOUT_DIRECTION_RTL)

public static boolean isRTL() {
        return isRTL(Locale.getDefault());
}

public static boolean isRTL(Locale locale) {
    final int directionality = Character.getDirectionality(locale.getDisplayName().charAt(0));
    return directionality == Character.DIRECTIONALITY_RIGHT_TO_LEFT ||
            directionality == Character.DIRECTIONALITY_RIGHT_TO_LEFT_ARABIC;
} 
```

或者通过 XML，以防您想要不断地覆盖自然方向：

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:layoutDirection="ltr"
        >
...
</LinearLayout> 
```

RTL的检测取自这个问题：[Identifyng RTL language in Android](https://stackoverflow.com/questions/18996183/identifyng-rtl-language-in-android)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T17:36:34.600

简单的方法试试这个

```
LinearLayout ll = (LinearLayout)findViewById(R.id.ll1);
    View v0 = ll.getChildAt(0);
    View v1 = ll.getChildAt(1);
    View v2 = ll.getChildAt(2);

    ll.removeAllViews();

    ll.addView(v2);
    ll.addView(v1);
    ll.addView(v0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T17:28:33.223

> 如何反转线性布局的方向？

不支持，抱歉。

> 我的目标是从一个 XML 布局中扩展左手和右手实例。

欢迎您从一个 XML 布局中对它们进行扩展，但随后您需要删除其中一个的所有子级并在 Java 代码中颠倒它们的顺序。这可能比维护两个单独的布局文件更简单，但绝对不是自动的。

或者，欢迎您创建自己的提供此功能的子类`LinearLayout`（或者可能是 clone ）。`LinearLayout`

Android 4.2 及更高版本[为 提供 RTL 支持`LinearLayout`](http://developer.android.com/about/versions/android-4.2.html#RTL)，但这与语言环境相关，并且适用`LinearLayout`于您应用中的所有水平容器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-27T00:20:25.893

注意上一个答案，如果您想保留视图的宽度/高度，通过直接传递（即填充父/包装内容）计算，您必须明确设置它们：

```
for (int i = views.size() - 1; i >= 0; i--)
{
    View v = views.get(i);
    linearLayoutHor.addView(v, v.getWidth(), v.getHeight());
} 
```

也许您将不得不使用 post 来查看以确保计算视图的大小。并为方向更改添加处理程序以正确重新计算大小。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-13T04:11:38.030

你可以试试`ViewCompat.setLayoutDirection(view, direction)`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-12-16T17:22:59.850

```
<LinearLayout
    android:id="@+id/parent"
    ...... 
    ......>
  view1
  view2
  view2
<LinearLayout/> 
```

现在你可以试试这个

```
LinearLayout parent = (LinearLayout)findViewById(R.id.parent);
View view1 = (View)parent.getChildAt(0);  // it will give first view
View view3 = (View)parent.getChildAt(2);  // it will give you third view 
```

这里的**View**可以是 TextView,Button....等。

# c# - 将文本分数转换为小数

> ID：13903621
> 
> 赞同：19
> 
> 时间：2012-12-16T17:17:14.897
> 
> 标签：c#

与[这个问题](https://stackoverflow.com/questions/7142657/convert-fraction-string-to-decimal)类似，只是在 C# 而不是 JavaScript 中。搜索时我找不到 C# 的任何内容

我有一个文本框，它将接受一个数量，稍后将其作为双精度值存储在数据库中。然而，某些数量可能会以字符串分数的形式输入，例如 0.5 的 1/2。我希望能够在将它们存储到数据库之前将它们转换为十进制（能够转换回来很好但不是必需的）。我希望能够同时处理分数和混合数字，例如 2 1/2 保存为 2.5

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T17:23:54.763

尝试在空格和斜杠上拆分它，例如：

```
double FractionToDouble(string fraction) {
    double result;

    if(double.TryParse(fraction, out result)) {
        return result;
    }

    string[] split = fraction.Split(new char[] { ' ', '/' });

    if(split.Length == 2 || split.Length == 3) {
        int a, b;

        if(int.TryParse(split[0], out a) && int.TryParse(split[1], out b)) {
            if(split.Length == 2) {
                return (double)a / b;
            }

            int c;

            if(int.TryParse(split[2], out c)) {
                return a + (double)b / c;
            }
        }
    }

    throw new FormatException("Not a valid fraction.");
} 
```

[嘿，成功了！](http://ideone.com/8l1BVf)记住也要检查除以零。结果，您将获得 Infinity、-Infinity 或 NaN。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T17:58:48.790

[这里还有一个解决方案，但集成](http://ideone.com/TSJ1MT)更加无缝：

```
public class FractionalNumber
{
    public Double Result
    {
        get { return this.result; }
        private set { this.result = value; }
    }
    private Double result;

    public FractionalNumber(String input)
    {
        this.Result = this.Parse(input);
    }

    private Double Parse(String input)
    {
        input = (input ?? String.Empty).Trim();
        if (String.IsNullOrEmpty(input))
        {
            throw new ArgumentNullException("input");
        }

        // standard decimal number (e.g. 1.125)
        if (input.IndexOf('.') != -1 || (input.IndexOf(' ') == -1 && input.IndexOf('/') == -1 && input.IndexOf('\\') == -1))
        {
            Double result;
            if (Double.TryParse(input, out result))
            {
                return result;
            }
        }

        String[] parts = input.Split(new[] { ' ', '/', '\\' }, StringSplitOptions.RemoveEmptyEntries);

        // stand-off fractional (e.g. 7/8)
        if (input.IndexOf(' ') == -1 && parts.Length == 2)
        {
            Double num, den;
            if (Double.TryParse(parts[0], out num) && Double.TryParse(parts[1], out den))
            {
                return num / den;
            }
        }

        // Number and fraction (e.g. 2 1/2)
        if (parts.Length == 3)
        {
            Double whole, num, den;
            if (Double.TryParse(parts[0], out whole) && Double.TryParse(parts[1], out num) && Double.TryParse(parts[2], out den))
            {
                return whole + (num / den);
            }
        }

        // Bogus / unable to parse
        return Double.NaN;
    }

    public override string ToString()
    {
        return this.Result.ToString();
    }

    public static implicit operator Double(FractionalNumber number)
    {
        return number.Result;
    }
} 
```

并且因为它实现了隐式运算符，所以可以通过以下方式简单地使用它：

```
Double number = new FractionalNumber("3 1/2"); 
```

任何无法解析的内容都会返回 Double 常量`Double.NaN`。在没有进入可能输入的清单的情况下，这适用于一些基础知识。随意调整课程以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:19:26.020

拆分“/”上的字符串，然后将两个数字相除。

```
public float FractionToDecimal(String input)
{
    String[] fraction = input.Split(new[] { "/" }, StringSplitOptions.RemoveEmptyEntries);
    if (fraction.Length != 2)
    {
        throw new ArgumentOutOfRangeException();
    }
    Int32 numerator, denominator;
    if (Int32.TryParse(fraction[0], out numerator) && Int32.TryParse(fraction[1], out denominator))
    {
        if (denominator == 0)
        {
            throw new InvalidOperationException("Divide by 0 occurred");
        }
        return (float)numerator / denominator;
    }
    throw new ArgumentException();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-03T05:45:37.787

你可以尝试这样的事情：[http](http://csharpeval.codeplex.com/) ://csharpeval.codeplex.com/或者这个：[https ://github.com/Giorgi/Math-Expression-Evaluator](https://github.com/Giorgi/Math-Expression-Evaluator)

这两个库都是用 C# 编写的完整的数学表达式求值器。对于您的用例来说，它们可能有点矫枉过正，但为了他人的利益值得一提。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-30T18:49:27.393

```
decimal re = (decimal)1/7; 
```

为我工作。

# google-maps - 谷歌地图用线连接点

> ID：13903623
> 
> 赞同：1
> 
> 时间：2012-12-16T17:17:34.820
> 
> 标签：google-maps

对于我的问题，我找不到任何有用的答案。我从 kml 导出了点。现在我必须将这一点与谷歌地图 api v3 上的线连接起来。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:37:37.537

像这样（gLine 是一个全局变量，gTheMap 是谷歌地图对象）；

```
 // draw a line connecting the points
    var Endpoints = [marker1.position, marker2.position];

    if (gLine == null)
    {
        gLine = new google.maps.Polyline(
            {   path: Endpoints,
                strokeColor: "#FFFF00",
                strokeOpacity: 1.0,
                strokeWeight: 2,
                map: gTheMap
            });
    }
    else
       gLine.setPath(Endpoints); 
```

[我在这里](http://weblogs.asp.net/stevewellens/archive/2012/12/09/google-and-bing-map-apis-compared.aspx)写了一篇博客。

# iphone - 画一个百分比的圆

> ID：13903624
> 
> 赞同：1
> 
> 时间：2012-12-16T17:17:42.037
> 
> 标签：iphone, objective-c, ios, ipad

我想在objective-c中画一个像图片中的圆圈：

[![赫伯格图像](../Images/c1340bac63c6150bd60cf76c83acc414.png)](https://i.stack.imgur.com/kQqmt.png)
[（来源：[hostingpics.net](http://img15.hostingpics.net/thumbs/mini_906373Capturede769cran20121216a768175817.png)）]

我只想从底部开始绘制填充相应百分比的蓝色圆圈。（注意：百分比的范围在 0 到 100 之间）不要担心中心的勾号，它只是在圆形视图上添加的 imageView。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:41:59.810

您可以制作 2 个图像视图。一个将包含带有复选标记的圆圈，其余的则是透明的。另一个图像将在其下方，带有一个浅蓝色矩形。随着百分比的增加，您通过修改它的框架来越来越多地提升蓝色矩形。当然，通过顶部图像的透明部分可以看到它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:50:43.177

```
// Draw circle of radius r and center X,Y
CGRect r;
r.origin.y = Y-radius;
r.origin.x = X-radius;
r.size.width = 2*radius;
r.size.height 2*radius;

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextAddEllipseInRect(ctx, r);
CGContextSetFillColor(ctx, CGColorGetComponents([[UIColor lightGray] CGColor]));
CGContextFillPath(ctx);

// Draw a blue color filled path. Below is half circle filled with blue color.
CGContextBeginPath(ctx);
CGContextAddArc(ctx, X, Y, r, -M_PI_2, M_PI_2, 1);
CGContextClosePath(ctx); // could be omitted
CGContextSetFillColorWithColor(ctx, [UIColor blueColor].CGColor);
CGContextFillPath(ctx); 
```

想法是画一个圆并用浅灰色填充它，然后从圆弧（需要任何角度）绘制和关闭路径并用蓝色填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:46:33.140

补充李维斯的建议。

您可以使用缩放矩形图像`CGAffineTransformScale`。

例如：

```
CGAffineTransform transform = self.rectImageView.transform;
float scale = 0.5;
self.rectImageView.transform = CGAffineTransformScale(transform, 1, scale); 
```

这会将图像缩放到 50%

要将其设置回 100%，只需设置 scale = 2。

# java - JBoss AS 7.1.1 Final 的类卸载？

> ID：13903625
> 
> 赞同：0
> 
> 时间：2012-12-16T17:17:44.627
> 
> 标签：java, jakarta-ee, classloader

我遇到了以下情况：
我有一个单身人士：

```
public class BookManager {
   private boplean initialized = false;
   private static BookManager instance;

   static {
      instance = new BookManager();
   }

   public void init() {
      //Performs some initialization code 
      initialized = true;
   }

   public List<Book> getAllBooks() {
       if (!initialized) {
          throw new Exception("Not initialized!");
       }
       //do some code to get the books list and return it 
   }
} 
```

单例在应用程序初始化过程中被初始化并调用了init方法，并且运行良好。
一段时间后（不知道为什么） - 引发异常的用例位于以下代码中：

```
BookManager.getInstance().getAllBooks(); 
```

我确信在应用程序启动时调用了“init”方法，
所以我怀疑 BookManager 类被卸载了。
当进行上述调用时，
该类被重新加载，但没有调用“init”方法。

有人可以解释在什么情况下 GC 正在收集类加载器？
（为什么类开始卸载？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:04:19.930

[我在JBoss 类加载文档](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)中找不到关于卸载类的参考。但是，如果您查看第[12.7 章。JLS 的类和接口](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.7)的卸载 只有在类加载器不再可访问时才能卸载一个类。这意味着必须首先取消部署应用程序。这是由 JVM 处理的，所以 JBoss 在这里不能做太多事情。

话虽如此，Java EE 不支持将内容存储在静态变量中。

你得到什么例外？`NullPointerException`? 您可以做的是附加一个调试器并检查and方法`BookManager.class`中的对象 ID。如果它是相同的（我假设）没有卸载发生。`#init``#getAllBooks`

# xslt - XSLT 命名空间 URL

> ID：13903632
> 
> 赞同：0
> 
> 时间：2012-12-16T17:18:25.567
> 
> 标签：xslt

当提供 url 时，命名空间在 XSLT 中做了什么，例如：

```
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
```

这是否试图连接到互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:23:07.543

不; 碰巧 XML 命名空间的规范（请参阅[W3C XSL 命名空间规范](http://www.w3.org/TR/xml-names/)）是 URI。

它们的工作方式与其他语言中的命名空间完全相同；它们有助于唯一地识别具有相同名称但在不同上下文中的事物。

您可以证明在加载或使用 XSL 转换时没有尝试通过在您的机器上使用 HTTP 监视器来检索资源 - 这个[答案](https://stackoverflow.com/questions/120022/tool-to-monitor-http-tcp-etc-web-service-traffic)有很多很好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:22:25.400

不。无论名称空间在 xsd、xslt 或任何其他 xml 文件中，都没有 Internet 请求。

命名空间用于限定您的 xml 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:27:52.563

当您执行 XSLT 转换时，XSLT 引擎会验证 XSLT 文件。它执行许多检查，例如根元素被命名`stylesheet`等。引擎还必须能够`<table>`从 XSLT 特定元素（如 ）中区分文字结果元素（如`<xsl:stylesheet>`）。

当一个元素驻留在 XSLT 名称空间中时，它就被识别为 XSLT 特定的。您发布的 URI 的值 (http://www.w3.org/1999/XSL/Transform) 只是一个约定，表明我们在谈论 XSLT。定义的前缀 ( `xsl`) 是 XSLT 文件中用来限定 XSLT 元素的前缀。如果您愿意，您可以使用另一个前缀，前提是您将它​​映射到 XSLT 名称空间。

请注意，它实际上只是一个 URI（一个标识符），而不是一个 URL（一个定位器）。没有 HTTP 请求来定位任何东西，它只是标识一个抽象概念（在本例中为“XSLT”）。

# c# - C# 多对多映射

> ID：13903638
> 
> 赞同：0
> 
> 时间：2012-12-16T17:19:19.637
> 
> 标签：c#, many-to-many

我正在开发 C# Web 中的基本应用程序。

我想要 2 个对象： - 用户 - 组

这是课程：

```
public class User { 
    public int Id; { get; set; }
    public String Username { get; set; }
    public String Password { get; set; }
    public virtual List<Group> Groups { get; set; }
}

public class Group{ 
    public int Id { get; set; }
    public String Name{ get; set; }
    public virtual List<User> Users { get; set; }
} 
```

我的问题是，当我使用此代码时，创建的多对多没有关系。我的表用户中有一个列名“Group_Id”，我的表组中有一个列名“User_Id”。

当我使用我的 DbContext 类来检索这样的数据时： List groups = db.Groups.ToList(); 我在“组”中的所有对象的属性“用户”或设置为空。所以不被数据库加载。

有人可以解释一下如何使这种多对多的关系正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:23:22.893

如果您使用的是实体框架，请使用以下`ObjectQuery<T>.Include`方法：

```
List groups = db.Groups.Include("Users").ToList() 
```

参考 MSDN 上的方法在[这里](http://msdn.microsoft.com/en-us/library/bb738708.aspx)。

# c - 如何从数组中复制值并将其分配给c中的另一个数组？

> ID：13903643
> 
> 赞同：0
> 
> 时间：2012-12-16T17:19:57.443
> 
> 标签：c, arrays, multidimensional-array

在python中我会喜欢

```
grid = [['a','b','c'],['d','e','f'],['g','h','i']]
another_grid = [['a','a','a'],['d','e','f'],['g','h','i']]
another_grid[0][1] = grid[1][1] 
```

上面的代码会将**'a'**更改为**'e'**。如何在 c 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:25:45.030

它是一样的，甚至语法是相似的：

```
char grid[3][3] = { { 'a', 'b', 'c' }, { 'd', 'e', 'f' }, { 'g', 'h', 'i' } };
char another[3][3] = { { 'a', 'a', 'a' }, { 'd', 'e', 'f' }, { 'g', 'h', 'i' } };
another[0][1] = grid[1][1]; 
```

# php - 使用 php curl 发送数据数组（相同的键值）

> ID：13903657
> 
> 赞同：1
> 
> 时间：2012-12-16T17:21:17.637
> 
> 标签：php, django, post, curl

我正在发送一份姓名和电子邮件列表。

我正在尝试使用 curl 创建与此表单相同的功能

```
<form method="post" action='http://url'>        
    name: <input type="text" name="name" value='name1'>
    email:<input type="text" name="email" value='email1'>
    name: <input type="text" name="name" value='name2'>
    email: <input type="text" name="email" value='email2'>
    <input type="submit" value="Submit">
</form> 
```

我想使用相同的密钥，所以我可以使用 django

```
names = request.POST.getlist('name') 
```

获取列表中的所有名称。

现在我正在尝试使用 php curl 执行与表单相同的操作

```
$ch = curl_init();
$curlConfig = array(
CURLOPT_URL            => "http://url",
CURLOPT_POST           => true,
CURLOPT_RETURNTRANSFER => true,
CURLOPT_POSTFIELDS     => array(
            'name' => 'name1',
            'email' => 'name1@email',
            'name' => 'name2',
            'email' => 'name2@email',
            ),
);
curl_setopt_array($ch, $curlConfig);
$result = curl_exec($ch);
print $result;
curl_close($ch); 
```

它不起作用，它只得到最后两个值。这是因为数组是关联的，所以最后的值会覆盖前面的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:35:21.863

在 PHP 中，数组键必须是唯一的。第二个“名称”会覆盖第一个“名称”中的数据，因此您需要稍微不同的方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:00:44.730

我最后做的是使用字符串而不是 php assoicative 数组

```
$ch = curl_init();
$curlConfig = array(
CURLOPT_URL            => "http://url",
CURLOPT_POST           => true,
CURLOPT_RETURNTRANSFER => true,
CURLOPT_POSTFIELDS     => "name=name1&emailname1@email&name=name2&email=name2@email"
);
curl_setopt_array($ch, $curlConfig);
$result = curl_exec($ch);
print $result;
curl_close($ch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:38:36.983

你也许可以使用这样的东西。你有办法在 Django 脚本中转储数据吗？

```
CURLOPT_POSTFIELDS     => array(
    array(
            'name' => 'name1',
            'email' => 'name1@email',
         ),
    array(
            'name' => 'name2',
            'email' => 'name2@email',
         )
) 
```

# xcode - 什么类型的标记是 XCode 项目？

> ID：13903660
> 
> 赞同：1
> 
> 时间：2012-12-16T17:22:22.720
> 
> 标签：xcode, parsing, syntax, markup

我正在尝试为 xcode 项目查找解析器，但我不认识标记的类型。

格式示例：

```
// !$*UTF8*$!
{
    <KEY> = <VALUE>;
    <KEY> = <VALUE>;

    <KEY> =
    {
        <KEY> =
        {
            <KEY> = <VALUE>;
            <KEY> = <VALUE>;
            <KEY> = <VALUE>;
        };

        <KEY> = ( <VALUE>, <VALUE>, <VALUE>, <VALUE>, );
    };
} 
```

这是什么类型的标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:26:22.087

我发现了这个[http://www.monobjc.net/index.php?page=xcode-project-file-format](http://www.monobjc.net/index.php?page=xcode-project-file-format)，它指出

> Xcode 项目文件是一个老式的 plist（Next 风格），基于大括号来分隔层次结构。该文件以显式编码信息开头，通常是 UTF-8 编码信息。这意味着文件在开始时不得带有 BOM（字节排序标记），否则解析将失败。

这似乎是对整个项目文件格式进行逆向工程的尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:27:59.680

这是 Apple 切换到 xml 样式属性列表之前的旧样式属性列表。您可以在使用`NSDictionary`/时阅读，`NSArray` `+<dictionary/array>WithContentsOfFile:`根据您的属性列表的基对象是数组（用括号括起来的逗号分隔的值）还是字典（用花括号括起来的键值对），使用适当的类。如果你`nil`回来了，你就知道你选错了。

`+<collection>WithContentsOfFile:`会将整个文件转换为 Foundation 框架对象。

# java - 从 C 向 Java 发送信号

> ID：13903669
> 
> 赞同：3
> 
> 时间：2012-12-16T17:23:13.247
> 
> 标签：java, c, signals

所以我有这个Java程序，它创建在终端（unix）上运行某个C程序的进程，并且当C程序中发生某些事情时（在终止之前）我需要通知Java程序。我怎样才能做到这一点？我知道我需要信号，但我在这方面没有太多经验。

提前致谢！

编辑：这是我在调用进程后对 java 所做的更改：

```
 InputStream stdout = p.getInputStream();
            InputStreamReader isr = new InputStreamReader(stdout);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            System.out.println("<INPUT>");
            while ( (line = br.readLine()) != null)
                System.out.println(line);
            System.out.println("</INPUT>");
            int exitVal = p.waitFor();
            System.out.println("Process exitValue: " + exitVal); 
```

当我想通知java时，我在C中做了什么：

```
char buff[20];
size_t nbytes;
ssize_t bytes_written;
int fd;
strcpy(buf, "This is a test\n");
nbytes = strlen(buf);
bytes_written = write(1, buff, nbytes); 
```

但运行它后，我只得到：

```
INPUT
/INPUT
Process exitValue: 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:30:41.637

其中一种方法是读取 C 程序的标准输出

```
 Process p = Runtime.getRuntime().exec("c.exe");
    InputStream stdout = p.getInputStream(); 
```

现在 C 程序可以与 Java 程序对话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:28:57.963

您可以使用 c 程序创建一个套接字并将其发送到 java 套接字服务器。您可以在 goole 上搜索以查找示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:31:27.367

在 Java 程序和由它生成的另一个程序之间进行通信的最简单方法是使用启动子进程时设置的 FIFO 流。因此，例如，如果您使用`Runtime.exec()`或 using启动子流程`ProcessBuilder`，您将拥有一个类型为 的对象`Process`。通过调用它`getInputStream()`，您可以访问进程的标准输出。

在本机代码中，只需将信号打印到标准输出，Java 进程就可以读取它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T17:31:54.217

您可以将信号与 Java 一起使用，但这不是最好的机制。我会先考虑使用 JNI、JMS、Socket、RPC 或其他一些解决方案。信号的问题在于它不允许您传输太多信息，而且它最容易正确或调试。

有关信号处理和 Java 的更多详细信息

[http://www.oracle.com/technetwork/java/javase/signals-139944.html](http://www.oracle.com/technetwork/java/javase/signals-139944.html)

[http://www.ibm.com/developerworks/java/library/i-signalhandling/](http://www.ibm.com/developerworks/java/library/i-signalhandling/)（链接失效）

[http://ringlord.com/dl/Signals-in-Java.pdf](http://ringlord.com/dl/Signals-in-Java.pdf)

# asp.net - 具有用户定义（数据驱动）表单定义的 MVC

> ID：13903670
> 
> 赞同：4
> 
> 时间：2012-12-16T17:23:19.443
> 
> 标签：asp.net, .net, asp.net-mvc

例如，formstack.com 和 wufoo.com 等——为了在 ASP.Net MVC 中实现一个数据驱动的表单定义框架，我假设你最终抛弃了很多内置特性（模型绑定、基于属性的验证）等）并将它们替换为数据驱动的等价物。

我很好奇是否有以这种数据驱动方式使用 MVC 的最佳实践，也许还有一些代码或框架来协助这种类型的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T14:18:08.430

我在 ASP.NET MVC 中看到的钩子是 Html.EditorFor。您可以让模型指定将呈现数据的视图。

```
@model IEnumerable<ParentClass>

@for (int i = 1; i <= Model.length; i++)
{
    Html.EditorFor(Model(i),Model(i).ViewName)
} 
```

View1.cshtml

```
@model ChildClass
@Model.FieldName: <input id="@Html.IdFor(model=>model)" type="text" name="@Model.FieldName"><br> 
```

View2.cshtml

```
@model ChildClass
@Model.FieldName: <input id="@Html.IdFor(model=>model)" type="password" name="@Model.FieldName"><br> 
```

然后在数据中指定 View1 或 View2。

注意：我使用 for 循环而不是 foreach 的原因是 MVC 需要索引才能在编辑器中正确获取 id。

# css - Symfony2：日期小部件的背景颜色

> ID：13903671
> 
> 赞同：1
> 
> 时间：2012-12-16T17:23:22.423
> 
> 标签：css, forms, symfony

对于包含日期字段小部件的模板，非日期输入字段的背景颜色将根据 CSS 更改。日期小部件上不会发生同样的情况。日期小部件的背景颜色应该如何影响？（在表单类中添加 attr 数组没有效果。）

（小但真实）差异的屏幕截图：![在此处输入图像描述](../Images/92b0180645aed769538d95912ea70d27.png)

代码示例： 模板：

```
 <td>{{ form_widget(form.fname, {'attr': {'class':'smallform'}}) }}
    <td>{{ form_widget(form.sname, {'attr': {'class':'smallform'}}) }}
    <td>{{ form_widget(form.dateAdded, {'attr': {'class':'smallform'} }) }} 
```

表格类：

```
 ->add('fname', null, array('required' => false))
        ->add('sname', null, array('required' => false))
        ->add('dateAdded', 'date', array(
            'widget' => 'choice',
            'format' => 'MM/dd/yyyy',
            'pattern' => '{{ year }}-{{ month }}-{{ day }}',
            'years' => range(Date('Y'), Date('Y') - 5),
            'required' => false,
            'data' => date_create(),
        )) 
```

CSS：

```
.smallform {
    background-color: #f5f5f5;
    font-size: 9pt;
    color: #000066;
    border: 1px solid #CCCC99;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:57:25.610

一个不太巧妙的解决方案：在我的应用程序的 fields.html.twig 的自定义副本中修改日期小部件。更精确的解决方案是为此定义一个特定的小部件，或者弄清楚如何将类属性一直保留到日期小部件中：

```
{% block date_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        {{ block('form_widget_simple') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ date_pattern|replace({
                '{{ year }}': form_widget(form.year, {'attr': {'class':'smallform'}}),
                '{{ month }}': form_widget(form.month, {'attr': {'class':'smallform'}}),
                '{{ day }}': form_widget(form.day, {'attr': {'class':'smallform'}}),
            })|raw }}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock date_widget %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:06:03.230

尝试：

```
 ->add('fname', null, array(
        'required' => false,
        'attr' => array('class' => 'smallform')
    ))
    ->add('sname', null, array(
        'required' => false,
        'attr' => array('class' => 'smallform')
    ))
    ->add('dateAdded', 'date', array(
        'attr' => array('class' => 'smallform'), // ADDED
        'widget' => 'choice',
        'format' => 'MM/dd/yyyy',
        'pattern' => '{{ year }}-{{ month }}-{{ day }}',
        'years' => range(Date('Y'), Date('Y') - 5),
        'required' => false,
        'data' => date_create(),
    )) 
```

另外，查看源代码以确保在 html 标记中实际设置了类，这可能是您的 CSS 的问题。

这些行有一个问题：
`<td>{{ form_widget(form.fname, {'attr': {'class':'smallform'}}) }}</td>`
我认为您不能在整个小部件上设置一个类，只能为单个行设置。如果您需要通过 twig 设置课程，您可以试试这个。

```
<form action="" method="">
    {{ form_errors(form) }}
    {{ form_row(form.fname, { 'attr': {'class': 'smallform' } }) }}
    {{ form_row(form.sname, { 'attr': { 'class': 'smallform' } }) }}
    <div class="smallform">
        {{ form_row(form.dateAdded) }}
    </div>
    {{ form_rest(form) }}
    <input type="submit" name="submit" value="Submit" />
</form> 
```

# coronasdk - 是否需要提交给 Corona Labs 或免费版本？

> ID：13903673
> 
> 赞同：0
> 
> 时间：2012-12-16T17:23:45.513
> 
> 标签：coronasdk

是否需要将我的代码提交给 corona labs 以编译 Android 游戏？免费版是否足以完成游戏开发？

我是游戏开发的新手，想先从 Android 游戏的 Corona SDK 开始。我在某处读到它，你不能在机器上编译它。您需要将其在线提交给 Corona Labs，他们会提供最终的应用程序。这个对吗？

如果我使用免费版 30 天并使用 SDK，那么与完整版相比，这有什么不同或应用程序吗？或者我在使用免费版本时会遇到什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:12:11.047

您可能已经注意到 CoronaLabs 现在提供免费的入门版。对于独立游戏开发者来说，这个版本应该足够了。它甚至为在线多人游戏和排行榜提供免费的云解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:09:21.067

当你点击编译按钮时，它使用了 Corona Labs 服务器中的一些东西，它看起来像一个普通的本地编译，但事实并非如此，我怀疑主要是为了反盗版。

此外，免费版本纯粹是为了评估，发布你需要付费的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T03:47:03.863

首先，Corona SDK 将您的源代码在本地转换为字节码，然后针对服务器进行验证并与核心库一起编译。如果您不是付费订阅者，则生成的 .apk（或 iOS 应用程序包）会被更改，以便当它们在设备上运行时，您会收到警告，指出您也在使用未经许可的评估软件。

Corona 可免费用于测试和学习，但当您准备发布应用程序时，您必须购买许可证。

# file-io - 将模块写入 .bc 位码文件

> ID：13903686
> 
> 赞同：8
> 
> 时间：2012-12-16T17:24:44.200
> 
> 标签：file-io, llvm

我假设从模块中转储 .bc 文件是一项微不足道的操作，但是现在，我第一次必须从代码中实际执行它，对于我的一生，我找不到该过程中缺少的步骤：

```
static void WriteModule ( const Module *  M, BitstreamWriter &  Stream ) 
```

[http://llvm.org/docs/doxygen/html/BitcodeWriter_8cpp.html#a828cec7a8fed9d232556420efef7ae89](http://llvm.org/docs/doxygen/html/BitcodeWriter_8cpp.html#a828cec7a8fed9d232556420efef7ae89)

要编写该模块，首先我需要一个 BistreamWriter

```
BitstreamWriter::BitstreamWriter (SmallVectorImpl< char > &O) 
```

[http://llvm.org/docs/doxygen/html/classllvm_1_1BitstreamWriter.html](http://llvm.org/docs/doxygen/html/classllvm_1_1BitstreamWriter.html)

对于 BitstreamWriter，我需要一个 SmallVectorImpl。但是，接下来呢？我应该自己在文件处理程序上逐字节写入 SmallVectorImpl 的内容吗？有为此的llvm api吗？我需要别的东西吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T14:05:16.647

该`WriteModule`函数在 内部是**静态**的`lib/Bitcode/Writer/BitcodeWriter.cpp`，这意味着它不存在供外部使用（您甚至无法访问它）。

然而，同一个文件还有另一个函数，叫做`WriteBitcodeToFile`，使用这个接口：

```
/// WriteBitcodeToFile - Write the specified module to the specified output
/// stream.
void llvm::WriteBitcodeToFile(const Module *M, raw_ostream &Out); 
```

我无法想象一个更方便的界面。顺便说一句，声明它的头文件是`./include/llvm/Bitcode/ReaderWriter.h`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T18:19:35.650

我使用以下代码：

```
std::error_code EC;
llvm::raw_fd_ostream OS("module", EC, llvm::sys::fs::F_None);
WriteBitcodeToFile(pBiFModule, OS);
OS.flush(); 
```

然后使用llvm-dis进行反汇编。

# javascript - MongoDB 聚合框架 - 按年份分组

> ID：13903687
> 
> 赞同：8
> 
> 时间：2012-12-16T17:24:49.557
> 
> 标签：javascript, mongodb

我一直在尝试使用聚合函数按年份对日期字段进行分组：

```
db.identities.aggregate([
{
    $group : {
        _id : { year : {$year : "$birth_date"}},
        total : {$sum : 1}
        }
    }   
]) 
```

然而，我的一些日期在 1970 年之前，作为 Windows 用户，我收到了一个关于 gmtime 的严重错误：

```
{
    "errmsg" : "exception: gmtime failed - your system doesn't support dates before 1970",
    "code" : 16422,
    "ok" : 0
} 
```

我知道现在显而易见的答案是让我运行虚拟机或其他东西，但我只是好奇是否有任何适用于 Windows 的解决方法（在我的情况下为 Windows 7）。如果没有多少性能影响会将日期存储为嵌套对象，即：

```
birth_date : {
  year : 1980,
  month : 12,
  day : 9
} 
```

我不太确定索引等会有多忙碌。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:58:40.517

已知某些版本的 Windows 可以正常工作。无论如何，您使用的是 32 位操作系统吗？有问题的代码在[这里](https://github.com/mongodb/mongo/commit/07e2bbe7293ec7fda7858f141da218477c255f1e#L2R660)，并且取决于`gmtime_s()`实现。

如果此集合仅用于聚合查询，您当然可以将日期组件存储在对象中。我建议缩写字段名称（例如`y`, `m`）`d`以节省存储空间，因为字段字符串存在于每个存储的文档中。这里的权衡是不能使用任何聚合日期运算符。您可能希望将时间戳存储为有符号整数（例如`ts`），以便在必要时轻松进行范围查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-04T05:35:05.767

此问题是由于聚合时没有很好地处理最小日期引起的。

一个快速的解决方法（如果可能）是通过 ff 过滤日期：

*   删除日期最短的行（通过匹配/过滤器）
*   过滤某个日期（大于 x 日期）

然后聚合。

# qt - Store QLineEdit's data into a QString upon a QPushButton click

> ID：13903689
> 
> 赞同：1
> 
> 时间：2012-12-16T17:25:28.340
> 
> 标签：qt, qt4, qgraphicsscene, qlineedit, qpushbutton

I am new to Qt programming. What I want to do is pretty much self explanatory from the title I guess. I have a lineEdit whose data I want to store in a QString when a cretain PushButton is clicked. The problem is the above widgets are inside a graphicsScene so i dont have a on_pushbutton_clicked(); function.

The code for my own solution is below, but as you might have guessed, its not working.

```
QLineEdit *l = new QLineEdit ;
QPushButton *b = new QPushButton;

QGraphicsProxyWidget *line = scene.addWidget(l);
QGraphicsProxyWidget *button = scene.addWidget(b);

line->setPos(-600,270);
button->setPos(-600,310);
//b->clicked();

QString input;
QString input = l->text(input);

QObject::connect(b,SIGNAL (clicked()),l, SLOT (setText(QString))); 
```

Any kind of help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:12:52.283

I don't see how putting the widgets inside a QGraphicsScene should make a difference here.

1.  Keep a pointer to the QLineEdit "l" in your class, e.g. as QLineEdit* m_lineEdit.

2.  connect b, SIGNAL(clicked()) to a slot buttonClicked().

3.  Implement buttonClicked like this:

    ```
    void MyWidget::buttonClicked() {
        const QString text = m_lineEdit->text();
        //do something with "text"
    } 
    ```

# sphinx - 狮身人面像变量

> ID：13903691
> 
> 赞同：1
> 
> 时间：2012-12-16T17:25:33.860
> 
> 标签：sphinx

我的 Sphinx 配置中有很多文件名，名称`/home/ubuntu/sites/sitename.dev/data/sphinx/searchd.pid`与路径前缀相同。

我可以`/home/ubuntu/sites/sitename.dev/data/sphinx/`将该文件名中的路径分离到变量中以像这样使用它`$path/searchd.pid`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T21:04:29.490

它是一个鲜为人知的功能，但配置文件实际上可以是一个脚本 - 例如 PHP、perl 甚至是普通的旧 bash。只需使用经典的 shebang 行 - 如果第一行以 # 开头！该 intpreter 用于执行脚本，并将输出用作 conf 文件。

PHP 的示例..

```
#!/usr/bin/php
<?php 
  $path = "/home/ubuntu/sites/sitename.dev/";
?>

searchd {
     pid_file = <?php echo $path; ?>/searchd.pid
} 
```

作为旁注，为什么您有多个 pid 文件？当然最好有一个 pid 文件 - 即一个 searchd 实例。单个实例可以服务多个索引。您可以使用此脚本功能，为每个索引保留单独的“文件”（以便于使用） - 脚本将其合并到一个文件中以供使用。

# assembly - 英特尔的 PAUSE 指令和可能的内存顺序违规

> ID：13903692
> 
> 赞同：2
> 
> 时间：2012-12-16T17:25:35.887
> 
> 标签：assembly, x86, x86-64, busy-loop

> **可能重复：**
> [x86 中的暂停指令](https://stackoverflow.com/questions/12894078/pause-instruction-in-x86)

英特尔的[优化参考手册](http://www.intel.co.uk/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf)对自旋等待循环有以下说法：

> **3.4.1.2 自旋等待和空闲循环**
> 
> Pentium 4 处理器引入了新的 PAUSE 指令；该指令在架构上是 Intel 64 和 IA-32 处理器实现上的 NOP。
> 
> 对于 Pentium 4 和更高版本的处理器，该指令充当代码序列是自旋等待循环的提示。如果在此类循环中没有 PAUSE 指令，则 Pentium 4 处理器在退出循环时可能会遭受严重的惩罚，因为**处理器可能会检测到可能的内存顺序违规。**插入 PAUSE 指令可显着降低内存顺序违规的可能性，从而提高性能

我试图理解突出显示的部分：*处理器可能检测到可能的内存顺序违规*。你能解释一下这是什么意思吗？在什么情况下会在繁忙的循环中出现这种违规行为，为什么使用`PAUSE`帮助？违规行为是真实的还是虚假的，不避免的后果是什么？

一个说明问题的例子会很棒。

# c# - 反序列化：基类型的属性

> ID：13903693
> 
> 赞同：2
> 
> 时间：2012-12-16T17:25:37.943
> 
> 标签：c#, xml-serialization, xml-deserialization

我写了一个小样本来说明我遇到的错误。请帮助如何反序列化它。我一直认为如果我能够序列化，我应该能够反序列化，因为我正在使用 CLR 的开箱即用功能

运行此示例时出现以下异常。

> *无法识别指定的类型：name='Sample'，namespace='AppConsole_ChandraSandpit'，在 SampleBase xmlns='AppConsole_ChandraSandpit'>*

```
[XmlInclude(typeof(Sample))]
public class SampleBase
{
    int SampleId { get; set; }
}

public class Sample : SampleBase
{
    public int SampleId { get; set; }
}

public class SampleGroup
{
    public int GroupId
    {
        get;
        set;
    }

    public  List<SampleBase> Samples
    {
        get;
        set;
    }

    public void populate()
    {
        Samples = new List<SampleBase>();
        for (int i = 0; i <= 5; i++)
        {
            Samples.Add(new Sample());
        }
    }

    /// <summary>
    /// Hydrates the object to xml string. 
    /// </summary>
    /// <returns>serialized xml string of this object</returns>
    public  String Hydrate()
    {
        String xmlString = String.Empty;
        try
        {
            xmlString = XMLSerializationHelper.SerializeObjectToXml<SampleGroup>(this);
        }
        catch (InvalidOperationException HydrateException)
        {
            throw new InvalidOperationException(String.Format("Could not Hydrate {0} to xmlstring. Please see inner exception for details", this.GetType().ToString()), HydrateException.InnerException);
        }
        return xmlString;
    }

    /// <summary>
    /// Dehydrates the xml string to object. 
    /// </summary>
    /// <param name="xmltoDehydarte">xml string to be dehydrated to object</param>
    /// <returns>deHydrated object</returns>
    public SampleGroup Dehydrate(String xmltoDehydarte)
    {
        SampleGroup dehydratedObject = null;
        if (!String.IsNullOrEmpty(xmltoDehydarte))
        {
            try
            {
                XmlRootAttribute xRoot = new XmlRootAttribute();
                xRoot.ElementName = "SampleGroup";
                xRoot.Namespace = "AppConsole_ChandraSandpit";
                xRoot.IsNullable = true;
                dehydratedObject = XMLSerializationHelper.DeserializeXmlToObject<SampleGroup>(xmltoDehydarte, xRoot);
            }
            catch (InvalidOperationException deHydrateException)
            {
                throw new InvalidOperationException(String.Format("Could not deHydrate {0} to xmlstring. Please see inner exception for details", this.GetType().ToString()), deHydrateException.InnerException);
            }
        }
        return dehydratedObject;
    }

} 
```

以下序列化助手的代码

```
public class XMLSerializationHelper : XmlSerializer
    {
 public static T DeserializeXmlToObject<T>(string xml, XmlRootAttribute xRoot)
        {
            using (MemoryStream memoryStream = new MemoryStream(StringToByteArrayUtf8(xml)))
            {
                XmlSerializer xmlSerializer = new XmlSerializer(typeof(T), xRoot);
                XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
                return (T)xmlSerializer.Deserialize(xmlTextWriter.BaseStream);
            }
        }
    public static string SerializeObjectToXml<T>(T obj)
    {
        MemoryStream memoryStream = new MemoryStream();
        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T), typeof(T).Namespace);
        XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
        xmlSerializer.Serialize(xmlTextWriter, obj);
        memoryStream = (MemoryStream) xmlTextWriter.BaseStream;
        string xmlString = ByteArrayToStringUtf8(memoryStream.ToArray());
        xmlTextWriter.Close();
        memoryStream.Close();
        memoryStream.Dispose();
        return xmlString;
    } 
```

}

可以在控制台中使用以下内容进行测试

```
internal class Program
    {
        private static void Main(string[] args)
        {

            SampleGroup SG = new SampleGroup();
            SG.populate();
            SG = SG.Dehydrate(SG.Hydrate());
            Console.WriteLine("Test Complete press a Key");
            Console.ReadKey();
}
} 
```

# ruby-on-rails-3 - Rails attribute_accessible 允许在并行构造的 2 个模型中的 1 个中批量分配属性。为什么？

> ID：13903694
> 
> 赞同：0
> 
> 时间：2012-12-16T17:25:38.557
> 
> 标签：ruby-on-rails-3, mass-assignment

在一个精简的项目中演示问题

**耙式测试产生：**

```
1) Failure:
test_can_mass_assign_accessible_flds(BrandTest) [ test/unit/brand_test.rb:11]:

Exception raised:
<#<ActiveModel::MassAssignmentSecurity::Error:  \
    Can't mass-assign protected attributes: brand_name, support_num>>.

2 tests, 2 assertions, 1 failures, 0 errors, 0 skips 
```

这两个模型和测试具有并行结构，但在测试时会产生不同的结果。经验告诉我这应该是我的错误，但我看不出在哪里。任何人都可以帮忙吗？

**楷模：**

```
class Brand < ActiveRecord::Base
  attr_accessible :brand_name, :support_num, :comment
end

class Mask < ActiveRecord::Base
  attr_accessible :brand_id, :brand_sku, :comment
end 
```

**测试：**

```
require 'test_helper'
class BrandTest < ActiveSupport::TestCase
  def setup
    @accessible_flds = { :brand_name => 'MyString', 
                         :support_num => 'MyString', 
                         :comment => 'MyText' }
  end

  test "can mass assign accessible flds" do
    assert_nothing_raised { Mask.new(@accessible_flds) }
  end
end

class MaskTest < ActiveSupport::TestCase
  def setup
    @accessible_flds = { :brand_id => 1, 
                         :brand_sku => 'MyString', 
                         :comment => 'MyText' }
  end

  test "can mass assign accessible flds" do
    assert_nothing_raised { Mask.new(@accessible_flds) }
  end
end 
```

**架构：**

```
ActiveRecord::Schema.define(:version => 20121212024505) do

  create_table "brands", :force => true do |t|
    t.string "brand_name"
    t.string "support_num"
    t.text   "comment"
  end

  create_table "masks", :force => true do |t|
    t.integer "brand_id"
    t.string  "brand_sku"
    t.text    "comment"
  end

end 
```

**环境：**

```
Windows 7 Pro, SP 1
ruby -v  =>> ruby 1.9.3p327 (2012-11-10) [i386-mingw32]
rails -v =>> Rails 3.2.9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:28:49.240

您的`BrandTest`课程仍在引用`Mask`：

```
Mask.new(@accessible_flds) 
```

应该

```
Brand.new(@accessible_flds) 
```

# javascript - 将 getJSON 包装到函数中以便能够返回值

> ID：13903695
> 
> 赞同：2
> 
> 时间：2012-12-16T17:25:44.187
> 
> 标签：javascript, jquery, tidesdk

我写的函数有一些问题。我想将整个事情包装到一个名为 myClosestCity 的函数中，该函数根据提供用户 IP 坐标的 JSON 提要返回城市名称。据我所知，问题出在 getJSON 函数中。我已经尝试过使用全局变量、getter 和 setter（根本不起作用）以及我能想到的谷歌搜索的所有内容。

顺便说一句，要运行代码，您需要包含来自 Google 地图的脚本： [http ://maps.google.com/maps/api/js?sensor=false&libraries=geometry](http://maps.google.com/maps/api/js?sensor=false&libraries=geometry)

无论如何，这是我的整个代码：

```
var stavanger = new google.maps.LatLng(58.96998, 5.73311);
var oslo = new google.maps.LatLng(59.91387, 10.75225);
var trondheim = new google.maps.LatLng(63.43051, 10.39505);
var bergen = new google.maps.LatLng(60.39126, 5.32205);

function calcDistance(p1, p2){
  return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);
}

$.getJSON("http://www.geoplugin.net/json.gp?jsoncallback=?", function(data) {
myLocation = new google.maps.LatLng(data.geoplugin_latitude,data.geoplugin_longitude);
var distances = new Array();
distances[0] = calcDistance(myLocation, stavanger);
distances[1] = calcDistance(myLocation, oslo);
distances[2] = calcDistance(myLocation, trondheim);
distances[3] = calcDistance(myLocation, bergen);

maxValue = Math.min.apply(this, distances);
var findThisIndex = maxValue + "";
var placeNo = $.inArray(findThisIndex, distances);

if(placeNo == 0) {
    closestCity = "Stavanger";
}

else if (placeNo == 1){
    closestCity = "Oslo";
}

else if(placeNo == 2) {
    closestCity = "Trondheim";
}

else if(placeNo == 3){
    closestCity = "Bergen";
}

else {
    closestCity = "Ukjent"; // Unknown in Norwegian
}

alert(closestCity);
  }); 
```

更新：这是我想返回的最接近的城市变量！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:25:03.503

有点晚了，但我会这样做，通过返回一个承诺：

```
function myClosestCity() {
    var def = $.Deferred();
    $.getJSON("http://www.geoplugin.net/json.gp?jsoncallback=?", function(data) {
        var myLocation = new google.maps.LatLng(data.geoplugin_latitude, data.geoplugin_longitude),
            distances = [calcDistance(myLocation, places.stavanger),
                         calcDistance(myLocation, places.oslo),
                         calcDistance(myLocation, places.trondheim),
                         calcDistance(myLocation, places.bergen)
                                            ],
            minValue = distances.indexOf(Math.min.apply(Math, distances).toString());
        def.resolve(Object.keys(places)[minValue]);
    });
    return def.promise();
} 
```

你像这样使用它：

```
myClosestCity().done(function(city) {
    console.log(city); // returns the closest city
}); 
```

这是一个[**演示**](http://jsfiddle.net/jABcb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:38:17.447

如果我了解您想要执行以下操作：

```
var myClosestCity = function(fn){
    $.getJSON("http://www.geoplugin.net/json.gp?jsoncallback=?", function(data){
       /* calculate closestCity */
       ...
       /* pass closestCity to the callback */
       fn(closestCity);
    });
};​ 
```

由于`$.fn.getJSON`是一个异步函数，您可以传递一个回调函数 ( `fn`)，该函数将在服务器响应并`closestCity`完成计算后调用。

您可以通过以下方式使用它传递回调函数。

```
myClosestCity(function(closestCity){
  alert(closestCity);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:45:04.487

您可以定义您的功能，然后等待服务器响应，然后使用您最接近的城市。你可以用这种方式修改你的代码：

```
var myClosestCity = function(callback) {
    var stavanger = new google.maps.LatLng(58.96998, 5.73311);
    var oslo = new google.maps.LatLng(59.91387, 10.75225);
    var trondheim = new google.maps.LatLng(63.43051, 10.39505);
    var bergen = new google.maps.LatLng(60.39126, 5.32205);

    function calcDistance(p1, p2) {
        return (google.maps.geometry.spherical.computeDistanceBetween(p1,      p2) / 1000).toFixed(2);
    }

    $.getJSON("http://www.geoplugin.net/json.gp?jsoncallback=?", function(data) {
        myLocation = new google.maps.LatLng(data.geoplugin_latitude, data.geoplugin_longitude);
        var distances = [];
        distances[0] = calcDistance(myLocation, stavanger);
        distances[1] = calcDistance(myLocation, oslo);
        distances[2] = calcDistance(myLocation, trondheim);
        distances[3] = calcDistance(myLocation, bergen);

        maxValue = Math.min.apply(this, distances);
        var findThisIndex = maxValue + "";
        var placeNo = $.inArray(findThisIndex, distances);

        if (placeNo === 0) {
            closestCity = "Stavanger";
        }

        else if (placeNo == 1) {
            closestCity = "Oslo";
        }

        else if (placeNo == 2) {
            closestCity = "Trondheim";
        }

        else if (placeNo == 3) {
            closestCity = "Bergen";
        }

        else {
            closestCity = "Ukjent";
        }

        if (typeof callback === "function") {
            callback.call(null, closestCity);
        }
    });
};

//call the function and display the closestCity on callback
myClosestCity(function(closestCity) {
    alert(closestCity);
});? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T17:46:26.640

下面是用html包裹的函数的实现

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry"></script>
    <meta charset=utf-8 />
    <title>Test</title>
    </head>
    <body>

      <script>
        function myClosestCity(closestCity) {
          alert(closestCity);
        }

        function findClosestCity(fnCallback) {
          var stavanger = new google.maps.LatLng(58.96998, 5.73311);
          var oslo = new google.maps.LatLng(59.91387, 10.75225);
          var trondheim = new google.maps.LatLng(63.43051, 10.39505);
          var bergen = new google.maps.LatLng(60.39126, 5.32205);

          function calcDistance(p1, p2) {
            return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);
          }

          $.getJSON("http://www.geoplugin.net/json.gp?jsoncallback=?", function(data) {
            myLocation = new google.maps.LatLng(data.geoplugin_latitude, data.geoplugin_longitude);
            var distances = new Array();
            distances[0] = calcDistance(myLocation, stavanger);
            distances[1] = calcDistance(myLocation, oslo);
            distances[2] = calcDistance(myLocation, trondheim);
            distances[3] = calcDistance(myLocation, bergen);

            maxValue = Math.min.apply(this, distances);
            var findThisIndex = maxValue + "";
            var placeNo = $.inArray(findThisIndex, distances);

            if (placeNo == 0) {
              closestCity = "Stavanger";
            } else if (placeNo == 1) {
              closestCity = "Oslo";
            } else if (placeNo == 2) {
              closestCity = "Trondheim";
            } else if (placeNo == 3) {
              closestCity = "Bergen";
            } else {
              closestCity = "Ukjent";
              // Unknown in Norwegian
            }

            fnCallback(closestCity);
          });
        }

        // When everything loads call the getJSON with handle of my function myClosestCity
        // 

        window.onload = function() {
          findClosestCity(myClosestCity);
        };
      </script>

    </body>
    </html> 
```

演示[在这里](http://jsbin.com/omucub/3/watch)

# c# - WCF 服务在 JavaScript 中返回“未定义”

> ID：13903700
> 
> 赞同：1
> 
> 时间：2012-12-16T17:26:30.870
> 
> 标签：c#, javascript, wcf, undefined

运行此 JavaScript 代码时，它告诉我“0x800a1391 - JavaScript 运行时错误：'InputService' 未定义”。

我已经尝试过，但我似乎无法弄清楚我错过了什么......

Web.Config 文件（只是 Web 服务部分）：

```
 <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="CommonEndPointBehavior">
          <enableWebScript/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="InputService">
        <endpoint name="" address="" behaviorConfiguration="CommonEndPointBehavior" binding="webHttpBinding" contract="InputService" bindingConfiguration="webBinding" />
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="webBinding">
          <!--<security mode="Transport">-->
          <security mode="None"/>
        </binding>
      </webHttpBinding>
    </bindings>
  </system.serviceModel> 
```

服务：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class InputService
{
[OperationContract]
public string EditSiteElement(int siteid, string name, string url, string description, int siteorder, bool active)
{
    return Input.EditSiteElement(siteid, name, url, description, siteorder, active);
}
} 
```

网络表格中的参考资料：

```
 scriptManagerProxy.Services.Add(new ServiceReference("~/User/Input.svc"));
    scriptManagerProxy.Scripts.Add(new ScriptReference("~/User/Input.js")); 
```

JavaScript 文件：

```
//When edit button is clicked on row.
function EditSiteElement(siteid) {
    InputService.GetSiteIdInfo(siteid, function (result) {
        var stuff = result.split('¤');
        $('[id$=TextBox_name]').val(stuff[0]);
        $('[id$=TextBox_link]').val(stuff[1]);
        $('[id$=TextBox_description]').val(stuff[2]);
        $('[id$=CheckBox_active]').prop('checked', (stuff[3] == 'True'));
        $('[id$=TextBox_order]').val(stuff[4]);
        //Open the dialog
        $("[id$=panel_Input]").dialog('open');

        SiteIdForSave = siteid;
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:28:36.710

因此，您必须进行一些更改。

`WebInvoke`首先，使用位于命名空间中的属性装饰服务方法`System.ServiceModel.Web`（您可能必须添加对项目的引用）。

```
[OperationContract]
[System.ServiceModel.Web.WebInvoke] //add this attribute
public string EditSiteElement(int siteid, string name, string url, string description, int siteorder, bool active)
{
    return Input.EditSiteElement(siteid, name, url, description, siteorder, active);
} 
```

其次，在`InputService.svc`文件中（在 Visual Studio 中，右键单击`InputService.svc`文件并选择`View Markup`），添加`Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory"`属性：

```
<%@ ServiceHost Language="C#" Debug="true" Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory" Service="WebApplication6.InputService" CodeBehind="InputService.svc.cs" %> 
```

确保您的应用程序的目标框架版本是**4.5**。

**[编辑]**

我建议你修改`web.config`'s`<system.serviceModel>`部分如下。请注意您的命名空间 ( `MyNamespace`) 的使用以及我将行为定义从端点移动到服务级别的事实。

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="InputServiceBehavior">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
  <services>
    <service behaviorConfiguration="InputServiceBehavior" name="MyNamespace.InputService">
      <endpoint address="" binding="webHttpBinding" contract="MyNamespace.InputService" bindingConfiguration="webBinding"/>
    </service>
  </services>
  <bindings>
    <webHttpBinding>
      <binding name="webBinding">
        <!--<security mode="Transport">-->
        <security mode="None"/>
      </binding>
    </webHttpBinding>
  </bindings>
</system.serviceModel> 
```

# matlab - 当我执行计算密集型模拟时，为什么我的处理器没有得到充分利用？

> ID：13903702
> 
> 赞同：3
> 
> 时间：2012-12-16T17:26:35.233
> 
> 标签：matlab, parallel-processing

我经常不得不使用 Matlab 运行计算密集型模拟。这些模拟通常需要很长时间，我希望我的计算机能够使用它的所有资源，以便在尽可能短的时间内完成这些模拟。

但是，当我在计算机上打开活动监视器时，处理器**使用率****从未超过 55%**，并且通常有大约 1GB 的未使用 RAM。

我的问题是：**为什么**处理器没有充分发挥其潜力，是否有一种安全且简单的方法来改变这一点？确实，如果我能在当前时间的一半内完成我的模拟，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:30:47.133

这可能是因为您有一个具有多个内核的处理器，并且您正在执行的代码不是为了在多个线程/进程中运行而编写的。除非您专门编写代码以利用多个内核，否则它一次只能使用一个内核。

启用并行计算的一种相对简单的方法是使用[Parallel Computing Toolbox](http://www.mathworks.com/products/parallel-computing/)。

此外，您可以考虑阅读以下内容：http: [//www.mathworks.com/company/newsletters/articles/parallel-matlab-multiple-processors-and-multiple-cores.html](http://www.mathworks.com/company/newsletters/articles/parallel-matlab-multiple-processors-and-multiple-cores.html)

# java - 命中 RESTful API 时自动将 ActiveMQ 加入队列

> ID：13903705
> 
> 赞同：0
> 
> 时间：2012-12-16T17:27:08.620
> 
> 标签：java, rest, servlets, activemq

我想公开一个公共 RESTful API 并配置我们的 ActiveMQ 实例（可能）以侦听该 API 并自动将这些 API 调用的 JSON 或 XML 版本排入队列，或者配置/编写软件以将 API 调用转换为消息并将消息排入 ActiveMQ 队列/主题。

所以，换句话说：

1.  第三方发送 HTTP 请求（GET/POST/PUT/whatever）到`http://myserver.com/api/enqueue`
2.  任何一个：
    *   ActiveMQ 以某种方式侦听API 调用主体`http://myserver.com/api/enqueue`并自动将队列/主题排入队列；`toProcess`或者
    *   我有某种 servlet 在该 URL 上侦听，然后将请求传递给某些软件（开源 Java 库或本地开发的东西），该软件可以提取`HttpServletRequest`' 的主体并将其排入 ActiveMQ 服务器上的队列/主题

所以我问：ActiveMQ 是否具有开箱即用的这种功能（初步研究表明它*没有*），或者是否有任何开源库可以为我做到这一点，或者它的一部分为我？或者，我是否坚持使用定制的本土解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:20:40.243

以一种简单的方式，ActiveMQ 实际上确实支持 HTTP/REST-ish 与[开箱即](http://activemq.apache.org/rest.html)用的队列交互。

正如您确实要求 Camel，是的，它确实支持创建更高级的 REST API：s 并且与 ActiveMQ 配合得非常好（实际上，Camel Core 和 JMS 模块是 ActiveMQ 发行版的一部分）。

我最喜欢用 Camel 创建 REST API 的方法是通过[restlets](http://camel.apache.org/restlet.html)。

正如布赖恩·罗奇所说，这应该很直接地用纯 java 代码以及一些辅助库来做，所以不要对这里的自制东西感到难过。

# web-services - 使用 get 请求调用 Web 服务

> ID：13903712
> 
> 赞同：-3
> 
> 时间：2012-12-16T17:27:57.353
> 
> 标签：web-services, soap

如果我有一个 wdsl 文档，我只想用 get 请求调用 web 服务并将参数放在 URL 中。这是可能的还是我必须使用 SOAP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:58:12.940

WSDL 确定您是否可以使用 GET 请求调用它。很可能，你不能。

你使用什么编程语言？在 Java 或 C# 中，让工具为您生成代码来完成调用服务的所有艰苦工作非常容易。

# c# - 如何在没有 async/await 的情况下循环异步方法

> ID：13903715
> 
> 赞同：2
> 
> 时间：2012-12-16T17:28:03.383
> 
> 标签：c#, asynchronous, for-loop, task-parallel-library

如果不使用 c# async/await 功能，那么在不阻塞的情况下循环异步操作的最佳方法是什么？

例如，在 for 循环中异步下载 url 的 HTML 列表。

如果还有更多的工作，我会继续使用 TPL continuewith 调用自身的 while 循环......但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:37:33.013

您描述的模式还不错，但是您可以将其抽象为辅助方法。像`ForEachAsync`或之类的东西`ConvertAllAsync`。这从您的代码中删除了循环。这将非必要的复杂性降至最低。

* * *

这是一个实现`ForEachAsync`：

```
 public static Task ForEachAsync<T>(this TaskFactory factory, IEnumerable<T> items, Func<T, int, Task> getProcessItemTask)
    {
        TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();

        IEnumerator<T> enumerator = items.GetEnumerator();
        int i = 0;

        Action<Task> continuationAction = null;
        continuationAction = ante =>
            {
                if (ante.IsFaulted)
                    tcs.SetException(ante.Exception);
                else if (ante.IsCanceled)
                    tcs.TrySetCanceled();
                else
                    StartNextForEachIteration(factory, tcs, getProcessItemTask, enumerator, ref i, continuationAction);
            };

        StartNextForEachIteration(factory, tcs, getProcessItemTask, enumerator, ref i, continuationAction);

        tcs.Task.ContinueWith(_ => enumerator.Dispose(), TaskContinuationOptions.ExecuteSynchronously);

        return tcs.Task;
    }
    static void StartNextForEachIteration<T>(TaskFactory factory, TaskCompletionSource<object> tcs, Func<T, int, Task> getProcessItemTask, IEnumerator<T> enumerator, ref int i, Action<Task> continuationAction)
    {
        bool moveNext;
        try
        {
            moveNext = enumerator.MoveNext();
        }
        catch (Exception ex)
        {
            tcs.SetException(ex);
            return;
        }

        if (!moveNext)
        {
            tcs.SetResult(null);
            return;
        }

        Task iterationTask = null;
        try
        {
            iterationTask = getProcessItemTask(enumerator.Current, i);
        }
        catch (Exception ex)
        {
            tcs.SetException(ex);
        }

        i++;

        if (iterationTask != null)
            iterationTask.ContinueWith(continuationAction, CancellationToken.None, TaskContinuationOptions.ExecuteSynchronously, factory.Scheduler ?? TaskScheduler.Default);
    } 
```

# qt - Qt (PySide) 多行 QSyntaxHighlighter

> ID：13903716
> 
> 赞同：0
> 
> 时间：2012-12-16T17:28:07.870
> 
> 标签：qt, multiline, qtextdocument

我需要一个`QTextEdit`能满足我的`QSyntaxHilighter` **多行**块的！我已经将搜索范围缩小到了，`QAbstractTextDocumentLayout`但我无法确定它。该文档指出：

> 文本块将文本块或文本**段落**封装在`[...].QTextDocument`.

无论如何，我找不到任何要设置或覆盖的东西，因此我可以获得所需的行为。有人可以指出我正确的方向吗？我从耳朵里渗出我的大脑！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:42:48.427

我找到的解决方案是将`QtGui.QTextCursor`状态子类化为我需要的正则表达式的模式，`QSyntaxHighlighter`并`setCharFormat()`在我的选择中使用..（同时阻止信号）。

# xml - 基于 XML、组件扫描或基于 @Configuration bean 的应用程序上下文启动更快？

> ID：13903724
> 
> 赞同：1
> 
> 时间：2012-12-16T17:29:02.350
> 
> 标签：xml, performance, spring, configuration

我在一个应用程序中工作，我们混合使用 XML 和组件扫描来定义依赖项应该如何连接在一起。

启动应用程序大约需要一到三秒钟，这或多或少是可以的。但是，对于功能测试，我们会启动它几百次。你可以猜到其余的...

我想知道是否有任何可用的性能比较来比较基于 XML、组件扫描和基于 @configuration bean 的 spring 应用程序上下文在启动性能方面。

我打算制作一个小型沙盒项目，以找出如果我在这里几天没有得到答复，哪个性能更好。

提前谢谢各位。塔马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:42:07.580

与其担心哪个启动配置更快，不如看看你的测试工具更有效。

如果功能测试都可以在同一个 Spring 配置中运行，那么为什么不只加载一次呢？该文档讨论了这个特定问题：[http ://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#testing-ctx-management](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#testing-ctx-management)

减少加载文本上下文的次数，您将拥有更快的整体测试时间。如果某些测试需要有个性化的启动有某种原因，那么很好，将它们加载到自己的上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:55:38.653

最后，我花了 10 分钟的时间在这个话题上做了一个小高潮。

我创建了一个新项目（spring 模板 -> Simple Spring Utility Project）并对其进行了一些修改。

在测试包中，我添加了三个测试用例。

1.  一个带有 ClassPathXmlApplicationContext 的测试用例，它获取包含 bean 定义的 XML 的位置。
2.  一个带有 ClassPathXmlApplicationContext 的测试用例，它获取包含一行的 XML 的位置：
3.  一个带有 AnnotationConfigApplicationContext 的测试用例，它获取一个包含配置 bean 的类（第一种情况下使用的 XML 的 java 等效项）。

每个测试用例创建应用程序上下文 1000 次。

结果：

1.  ~10 秒
2.  ~10 秒
3.  ~6s

这意味着带有 AnnotationConfigApplicationContext 的 @Configuration 比其他两个快 40% 左右。

我需要注意的是，我认为这种测量在任何方面都不准确或精确。依赖层次太简单了（只有一个 bean），但我仍然希望 AnnotationConfigApplicationContext 是这三个中最快的解决方案。

# background - 在后台运行 shell 命令，在 tcl proc 中

> ID：13903727
> 
> 赞同：2
> 
> 时间：2012-12-16T17:29:07.900
> 
> 标签：background, tcl, proc

我正在尝试创建一个 tcl proc，它传递一个 shell 命令作为参数，然后打开一个临时文件并将格式化的字符串写入临时文件，然后在后台运行 shell 命令并将输出存储到临时文件也是。

在后台运行命令，以便之后可以立即调用 proc，并将另一个 arg 传递给它，写入另一个文件。因此，运行一百个这样的命令所花费的时间不应该像串行运行它们那样长。多个临时文件最终可以连接成一个文件。

这是我正在尝试做的伪代码。

```
proc runthis { args }  
{ 
    set date_str [ exec date {+%Y%m%d-%H%M%S} ]
    set tempFile ${date_str}.txt
    set output [ open $tempFile a+ ]
    set command [concat exec $args]
    puts $output "### Running $args ... ###"   

    << Run the command in background and store output to tempFile >>
} 
```

但是我如何确保任务的后台处理正确完成？需要做些什么来确保正确关闭多个临时文件？

欢迎任何帮助。我是 tcl 的新手，我想解决这个问题。我读过关于在 tcl 中使用线程，但我正在使用不支持线程的旧版本 tcl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:54:08.810

怎么样：

```
proc runthis { args }  { 
    set date_str [clock format [clock seconds] -format {+%Y%m%d-%H%M%S}]
    set tempFile ${date_str}.txt
    set output [ open $tempFile a+ ]
    puts $output "### Running $args ... ###"   
    close $output

    exec {*}$args >> $tempFile &
} 
```

见[http://tcl.tk/man/tcl8.5/TclCmd/exec.htm](http://tcl.tk/man/tcl8.5/TclCmd/exec.htm)

由于您似乎有一个较旧的 Tcl，请替换

```
 exec {*}$args >> $tempFile & 
```

和

```
 eval exec [linsert $args 0 exec] >> $tempFile & 
```

# javascript - 如何通过 javascript 使用新的 Azure bing api 翻译

> ID：13903728
> 
> 赞同：1
> 
> 时间：2012-12-16T17:29:10.973
> 
> 标签：javascript, asp.net-mvc-3, api, azure, translate

在新的 bing API 发布之前，我可以简单地使用 Javascript 来翻译我网站上的文本。

它看起来像这样：

```
 function getTranslations() {
      var languageFrom = $("#firstLanguageHidden").val();
      var languageTo = $("#secondLanguageHidden").val();
      var text = document.getElementById("TextToTranslate").value;

      window.mycallback = function (response) {
          var array = response.Translations;
          var translations = "";
          for (var i = 0; i < array.length; i++) {
              translations = translations + array[i].TranslatedText + "\n";
          }
          document.getElementById("results_body").value = translations;
      }

      var s = document.createElement("script");    
      s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/GetTranslations?oncomplete=mycallback&appId=7xigXu+M3H/bymbykY/7Us3/UxtSA3w0tq31eFSmUT0=&text=" + text +     "&from=" + languageFrom + "&to=" + languageTo + "&maxTranslations=5";
      document.getElementsByTagName("head")[0].appendChild(s);
  } 
```

它工作得很好。

现在来自 microsoft 的 Url 看起来像这样：

```
http://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1/Translate? 
```

我不知道如何仅使用 javascript 翻译我网站上的文本。在 azure 网站中有很多密钥（秘密等），但没有任何 AppId。

请帮助我如何做到这一点。我的网站是用 MVC3 编写的。

PS：对不起我的英语。

# c# - 用绳子垂头丧气

> ID：13903730
> 
> 赞同：0
> 
> 时间：2012-12-16T17:29:53.280
> 
> 标签：c#, class, casting, type-conversion

我有一个向下转换的问题，如何将字符串“标签”转换为类类型标签进行转换，是否可以到达“文本”类？

```
public class GFXObject
{
   // Constructor etc...
}
public class Label : GFXObject
{
    public Texts Text = new TextClass();

    // Constructor etc...
}

public class Button : GFXObject
{
    // Constructor etc...
}

public class Texts
{
    public string Text = "empty";

    // Constructor etc...
}

// My List of objects
Dictionary<string, GFXObject> objects;

// Disregarding any troubleshooting
public void ChangeText(string classtype, string name, string text)
{
    // How do I convert the string classtype to a ClassType
    ((classtype)objects[name]).Text.Text = text;

    // If parameters would be equal to "Label", "label", "changed":
    // ((Label)objects["label"].Text.Text = "changed";
} 
```

如果扩展或修改，是否可以使用 ChangeText 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:42:43.093

您只能通过反射来做到这一点：

```
public void ChangeText(string classtype, string name, string text)
{
    var type = Type.GetType(classtype);
    type.GetProperty("Text").SetValue(objects[name], text);
} 
```

请注意，`classtype`如果方法与类型位于不同的程序集中，则该名称必须是程序集限定名称。如果它在同一个程序集中，则需要完全限定，即包括命名空间。

如果这是一个问题，您可以摆脱`classtype`参数并使用此方法：

```
public void ChangeText(string name, string text)
{
    var type = objects[name].GetType();
    type.GetProperty("Text").SetValue(objects[name], text);
} 
```

另一种可能性是使用 DLR 和`dynamic`关键字：

```
public void ChangeText(string name, string text)
{
    dynamic item = objects[name];
    item.Text = text;
} 
```

请注意，每个使用动态`item`变量的代码仅在运行时进行评估。这意味着即使`Text`该特定项目没有属性，此代码也会编译。然后它将在运行时抛出异常。

* * *

说了这么多，这个问题的*正确*解决方案是引入一个持有该`Text`属性的基类或接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:53:06.060

如果使用的类数量很少，另一种解决方案可能是创建一个帮助器来设置属性，例如：

```
public void ChangeText(string classtype, string name, string text)
{
    switch(classtype)
    {
       case "ClassType1":
          ((ClassType1)objects[name]).Text = text;
          break;
       case "ClassType2":
          ((ClassType2)objects[name]).Text = text;
          break;
       etc...
       default:
          throw new InvalidOperationException("ClassType {0} is not supported", classtype); 
} 
```

# url-rewriting - 使用 Nginx URL 重写系统 .. 简单，最后还是中断？

> ID：13903731
> 
> 赞同：1
> 
> 时间：2012-12-16T17:29:53.997
> 
> 标签：url-rewriting, nginx

我正在努力改变

```
http://site.com/show_page.php?name=terms 
```

到

```
http://site.com/pages/terms.html 
```

我通常对 Nginx 非常满意，它设置了几个站点并在过去做了一些工作。这是我在 conf vhost 中的 URL 重写 - 我尝试替换`break`为`last`但没有运气。

```
location /pages {
    rewrite ^/pages/(.*)$.html /show_page.php?name=$1? break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:39:17.677

您声明中的美元符号不属于那里。美元符号表示字符串的结尾。因此，一场成功的比赛不会有任何结果。对于其余部分，您的重写是正确的，您可以忽略 jagsler 关于无法找到 php 语句的评论。这是不正确的，因为文档清楚地涵盖了，最后一个指令将指示 nginx 搜索要匹配的新位置。由于该语句将 URL 重写到与它所在的位置块不匹配的不同位置，因此也没有机会循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T00:03:10.520

jagsler 的回答还可以，但必须牢记这一点：

```
server {
    # you config here (servername, port, etc.)

    location /pages {
        #***modified . = any character, so escape literal dots***
        rewrite ^/pages/(.*)\.html$ /show_page.php?name=$1? last;
        #***the line bellow will only be executed if the rewrite condition***
        #***equals false, this is due to the "last" modifier in the rewrite rule***
        include php.conf;
    } 

    # instead of the php location block also just add the include
    include php.conf;
} 
```

因此请注意重写规则中修饰符的行为“最后”意味着如果重写条件等于 true，则重写请求的 uri 并跳转到适合新重写的 uri 的位置块。

Another modifier is the "break", wich means if the rewrite condition equals true then rewrite the requested uri BUT DO NOT JUMP, instead stay in the same location block and continue to the next line inside the block

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T23:19:03.980

它不起作用有两个原因。首先您的重写规则不正确，将其更改为：

```
rewrite ^/pages/(.*).html$ /show_page.php?name=$1? last; 
```

第二个是当你像这样重写时，nginx 不知道如何处理 php 文件，因为它永远不会到达`location ~ \.php`块。您可以通过将完整`location ~ \.php`的文件放入名为 php.conf（或任何您喜欢的文件）的不同文件中并将其包含在您需要的服务器块中来解决此问题。

这可能看起来像：

```
server {
    # you config here (servername, port, etc.)

    location /pages {
        rewrite ^/pages/(.*).html$ /show_page.php?name=$1? last;
        include php.conf;
    } 

    # instead of the php location block also just add the include
    include php.conf;
} 
```

# java - 将 2 个布尔语句组合成另一个

> ID：13903733
> 
> 赞同：-1
> 
> 时间：2012-12-16T17:30:38.320
> 
> 标签：java, boolean, boolean-expression

我正在尝试组合两个布尔语句以验证一个数字。

这是两个函数的代码：

```
public boolean numberOne(String number)
{
    int a = Integer.parseInt(number);
    if(a >= 0 && a <= 7 && number.length() <= 1) {
        return true;
    }
    else {
        return false;
    }
}

public boolean numberTwo(String number)
{
    int b = Integer.parseInt(number);
    if(b >= 01 && b <= 15 && number.length() <= 2) {
        return true;
    }
    else {
        return false;
    }
} 
```

现在我想创建另一个布尔函数来验证这个数字，当两者结合时，例如 215 为真而 645 为假。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:55:30.983

两个变化。第一个是旁注。这段代码

```
if (long_test) {
    return true;
} else {
    return false;
} 
```

应该改写成这样：

```
return long_test; 
```

一旦他的变量名称匹配，dampee 描述的另一个变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:40:41.383

好的。所以你想分割字符串并将字符串的第一个数字与第一个函数进行比较，将最后两个数字与第二个函数进行比较？

```
public boolean numberThree (String number) {
    String part1 = number.substring(0, 1);
    String part2 = number.substring(1);
    return numberOne(part1) && numberTwo(part2);
} 
```

# php - 在这种情况下 PHP 是否会泄漏内存？

> ID：13903736
> 
> 赞同：3
> 
> 时间：2012-12-16T17:30:48.340
> 
> 标签：php, garbage-collection

我正在研究 PHP 内存管理并运行一些代码示例。此代码的输出

```
class Person
{
    public function sayHello($who)
    {
            echo "Hello, $who!", "\n";
    }
}

echo "Start: ", memory_get_usage(), "\n";
$person = new Person();
echo "Person object: ", memory_get_usage(), "\n";
$person->sayHello("World");
echo "After call: ", memory_get_usage(), "\n";
unset($person);
echo "After unset: ", memory_get_usage(), "\n"; 
```

是：

```
Start: 122000
Person object: 122096
Hello, World!
After call: 122096
After unset: 122000 
```

正如预期的那样。分配对象后，内存会增长，但在方法调用结束并且对象未设置后，它会恢复正常。现在，如果我像这样修改代码：

```
class Person
{
    public function sayHello($who)
    {
            echo "During call: ", memory_get_usage(), "\n";
            echo "Hello, $who!", "\n";
    }
}

echo "Start: ", memory_get_usage(), "\n";
$person = new Person();
echo "Person object: ", memory_get_usage(), "\n";
$person->sayHello("World");
echo "After call: ", memory_get_usage(), "\n";
unset($person);
echo "After unset: ", memory_get_usage(), "\n"; 
```

我得到：

```
Start: 122268
Person object: 122364
During call: 122408
Hello, World!
After call: 122380
After unset: 122284 
```

为什么我无法释放我使用的所有内存？我正在使用 PHP 5.4：

```
PHP 5.4.9-4~oneiric+1 (cli) (built: Nov 30 2012 10:46:16) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.2.1, Copyright (c) 2002-2012, by Derick Rethans 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:37:17.503

当 unset() 释放内存时，这不会自动反映在 memory_get_usage() 中。内存未使用，可重复使用；但只有在垃圾收集程序启动后，未使用的内存才会真正减少。

# ruby-on-rails-3 - 如何使用 CarrierWave 仅处理原始图像文件？

> ID：13903737
> 
> 赞同：2
> 
> 时间：2012-12-16T17:30:52.920
> 
> 标签：ruby-on-rails-3, carrierwave

我使用 CarrierWave 生成​​版本（不同大小的缩略图）并在每个版本上添加水印。

我目前已设法为每个缩略图应用水印，但我想将其添加到原始图像上。

这是我尝试过的：

```
def watermark
  manipulate! do |img|
    watermark   = Magick::Image.read(Rails.root.join('app/assets/images/watermark_512.png')).first
    img         = img.composite(watermark, Magick::CenterGravity, Magick::OverCompositeOp)
  end
end

version :original do
  process :watermark
end

version :thumb_512 do
  process :resize_to_fit => [512, 512]
  process :watermark
end

version :thumb_256 do
  process :resize_to_fit => [256, 256]
  process :watermark
end 
```

但这不起作用。但是我试图简单地添加

```
process :watermark 
```

在任何“版本”块之外，但它所做的只是在我的缩略图上添加两倍的水印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:12:17.993

您可以`store`像这样在上传程序类中使用 CarrierWave 提供的回调

```
class SomeUploader < CarrierWave::Uploader::Base
  # Your code ...

  before :store, :watermark_method

  def watermark_method(*args)
    # watermark it!
  end
end 
```

# java - 无法检索 sbt 0.11.3 play2.0

> ID：13903739
> 
> 赞同：1
> 
> 时间：2012-12-16T17:30:57.447
> 
> 标签：java, playframework, sbt

我正在使用 play 2.0 我从存储库中提取了一个项目并尝试运行它，但出现以下错误。我是新手，谁能指导我这里出了什么问题，我该如何解决。谢谢

```
webapp $ play
 Getting org.scala-tools.sbt sbt_2.9.1 0.11.3 ...

:: problems summary ::
:::: WARNINGS
    module not found: org.scala-tools.sbt#sbt_2.9.1;0.11.3

==== local: tried

  /usr/local/bin/../Cellar/play/2.0.1/bin/../libexec/framework/../repository/local/org.scala-tools.sbt/sbt_2.9.1/0.11.3/ivys/ivy.xml

==== Maven2 Local: tried

  file:///Users/Eric/.m2/repository/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.pom

==== typesafe-ivy-releases: tried

  http://repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbt/sbt_2.9.1/0.11.3/ivys/ivy.xml

==== Maven Central: tried

  http://repo1.maven.org/maven2/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.pom

==== Scala-Tools Maven2 Repository: tried

  http://scala-tools.org/repo-releases/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.pom

==== Scala-Tools Maven2 Snapshots Repository: tried

  http://scala-tools.org/repo-snapshots/org/scala-tools/sbt/sbt_2.9.1/0.11.3/sbt_2.9.1-0.11.3.pom

    ::::::::::::::::::::::::::::::::::::::::::::::

    ::          UNRESOLVED DEPENDENCIES         ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: org.scala-tools.sbt#sbt_2.9.1;0.11.3: not found

    ::::::::::::::::::::::::::::::::::::::::::::::

:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS
 unresolved dependency: org.scala-tools.sbt#sbt_2.9.1;0.11.3: not found
 Error during sbt execution: Error retrieving required libraries
 (see /usr/local/bin/../Cellar/play/2.0.1/bin/../libexec/framework/sbt/boot/update.log    for complete log)
 Error: Could not retrieve sbt 0.11.3 
```

# java - 这个java线程程序有什么问题

> ID：13903741
> 
> 赞同：-1
> 
> 时间：2012-12-16T17:31:05.033
> 
> 标签：java

我想弄清楚这个线程程序在java中有什么问题。任何人都可以解释一下吗？这是代码：

```
public class Z {
    private Account account = new Account();
    private Thread[] thread = new Thread[100];

    public static void main(String[] args) {
        Z test = new Z();
        System.out.println("What is balance ? " + test.account.getBalance());
    }

    public Z() {
        ThreadGroup g = new ThreadGroup("group");
        boolean done = false;

        // Create and launch 100 threads
        for (int i = 0; i < 100; i++) {
            thread[i] = new Thread(g, new AddAPennyThread(), "t" + i);
            thread[i].start();
            System.out.println("depositor: " + thread[i].getName());
        }
        // Check if all the threads are finished
        while (!done)
            if (g.activeCount() == 0)
                done = true;
    }

    // A thread for adding a penny to the account
    class AddAPennyThread extends Thread {
        public void run() {
            account.deposit(1);
        }
    }

    // An inner class for account
    class Account {
        private int balance = 0;

        public int getBalance() {
            return balance;
        }

        public void deposit(int amount) {
            int newBalance = balance + amount;
            balance = newBalance;
        }
    }
} 
```

它编译并运行良好。这是一个我错过的测试问题，我想知道它到底有什么问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:37:20.783

没有一个位专门用于同步 100 个线程，所有线程都在*一个*(1!!!) 数据块上工作。

*任何事情都有*可能发生。“任何事情”包括由于一些“巧合”，代码在大多数情况下都可以正常工作：

*   手头的任务非常小。（只是一个补充）
*   任务被创建并立即启动。
*   两个“create+start”对之间有一个小的延迟：`System.out.println`.

这加起来： 这*可能*适用于*大多数*测试运行。但这是一个不正确且不确定的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:41:23.333

```
[Tread1] int newBalance = balance + amount;
[Tread2] int newBalance = balance + amount;
[Tread1] balance = newBalance;
[Tread2] balance = newBalance;

public synchronized void deposit(int amount) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:45:31.313

`balance`应该是 a `private volatile int`（以便 Java 知道永远不会缓存它 - 它的值很可能在不同线程访问之间发生变化而下一个线程不知道）并制作`Account#deposit(int amount)`a `public synchronized void`（以便 Java 使方法体成为关键区域并防止同时访问任何它接触的对象，确保`balance`) 值的完整性。

此外，自己实例化 100 个线程`new`会带来很多开销——尽管我明白这只是一个玩具示例，但更有效的方法是使用[Java 线程池](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。

# list - 将字符串附加到序言中的列表

> ID：13903743
> 
> 赞同：0
> 
> 时间：2012-12-16T17:31:11.627
> 
> 标签：list, prolog, gnu-prolog

我是 Prolog 的新手，我已经有一些问题需要理解，问题是，我正在测试附加控制台引入的一些字符串：

```
append_str([],Adder,Adder).
append_str([Head|Tail],Adder,Result):-
    append_str(Tail,[Head|Adder],Result).

sread_str(String):-
    read(String),
    atom(String).

sinput:-
    sinput_str([]).

sinput_str(Lista):-
    sread_str(String),
    sinput_str([String|List]).

sinput_str(List):-
    append_str(List,[],Result),
    nl,
    display(Result),
    nl. 
```

最终总是得到这个输出：

```
|-? sinput.
sinput.
hello.
hello.
world.
world.
9.
9.

'.'(hello,'.'(world,[])) 
```

这个数字只是为了让控制台结束要求更多的值，我不知道出了什么问题，提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:44:24.417

您应该尝试了解输入数字时会发生什么，*从而迫使*sread_str 失败。

Prolog 探索了所有可用于证明给定目标的替代方案，并且这样做会更改变量，当路径失败时*撤消此类更改。*这种模型由于 IO（读取/显示内置）所需的副作用而变得复杂。

然后首先尝试有一个*工作*的sinput_str，像这样

```
sinput_str([String|List]):-
    sread_str(String),
    sinput_str(List).
sinput_str([]). 
```

# asp.net - 在asp.net网页之间的Session中传递C#自定义对象

> ID：13903747
> 
> 赞同：1
> 
> 时间：2012-12-16T17:31:29.297
> 
> 标签：asp.net

尝试将自定义对象从网站的一页传递到另一页时，我遇到了一个令人沮丧的问题。当我尝试使用第 2 页上会话中的对象时，它为空。我相信我的语法是正确的，因为当我将代码从较大的解决方案中取出并自行运行时，它可以正常工作。

我想知道 Visual Studio、aspx 文件、可能在我的项目上设置的项目属性中是否有任何设置可能导致此会话对象不起作用？

我使用的简化语法是；在第 1 页

```
Person p = new Person;
p.name = "john"; 
p.secondName = "doe";
Session["person"] = p.
Response.Redirect("Page2.aspx") 
```

第 2 页上的页面加载方法

```
Person p = (person)Session["person"]
textbox1.Text = p.name;
textbox2.Text = p.Secondname; 
```

正如我所说，这段代码本身就可以正常工作，但不能作为我更大的工程项目的一部分。任何关于为什么这可能不起作用的想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:41:24.750

有三种可能的选择。

第一个是在您较大的项目会话状态中被禁用。有关详细信息，请访问[在 Active Server Pages 和 IIS 中关闭 ASP 会话状态](http://support.microsoft.com/kb/244465)。

第二种选择是在应用程序（单独的线程）内部某处发生异常，导致应用程序重新启动和会话状态松动。您可以通过挂钩 Global.asax 中的应用程序错误来检查这一点，如下所示：

```
 void Application_Error(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();
    } 
```

最后一个选项是 session["person"] 值在其他模块或页面中更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:33:15.373

尝试代码，

```
Response.Redirect("Page2.aspx", false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:14:19.293

如果连接了数据库，请根据您的代码查看，然后我建议您在 page1 上做任何您想做的事情，并将其保存到单个或多个表中的 db 中，具体取决于要求。现在将 id 作为查询字符串复制到 page2。格式看起来像

`Response.Redirect("~/page2.aspx?id=67");` 数据库中的动态唯一 ID 在哪里。现在在第 2.aspx 页上查询您传递的 id。

# c - libxml2：xmlNewTextWriterFilename 泄漏

> ID：13903748
> 
> 赞同：2
> 
> 时间：2012-12-16T17:31:30.097
> 
> 标签：c, memory-leaks, valgrind, libxml2

以下代码正确编译并且 valgrind 报告没有泄漏：

```
# include <libxml/encoding.h>
# include <libxml/xmlwriter.h>

int main(void) {
  xmlTextWriterPtr XMLWriter = xmlNewTextWriterFilename("example.xml", 0);
  xmlTextWriterStartDocument(XMLWriter, NULL, NULL, NULL);
  xmlTextWriterEndDocument(XMLWriter);
  xmlFreeTextWriter(XMLWriter);
  xmlCleanupParser();
  return 0;
}

-----------------------------------------

==26059== HEAP SUMMARY:
==26059==     in use at exit: 0 bytes in 0 blocks
==26059==   total heap usage: 16 allocs, 16 frees, 4,774 bytes allocated
==26059== 
==26059== All heap blocks were freed -- no leaks are possible 
```

但是，一旦在 xmlNewTextWriterFilename 调用中指定了编码，就会出现希拉里：

```
# include <libxml/encoding.h>
# include <libxml/xmlwriter.h>

int main(void) {
  xmlTextWriterPtr XMLWriter = xmlNewTextWriterFilename("example.xml", 0);
  xmlTextWriterStartDocument(XMLWriter, NULL, "UTF-8", NULL);
  xmlTextWriterEndDocument(XMLWriter);
  xmlFreeTextWriter(XMLWriter);
  xmlCleanupParser();
  return 0;
}

-----------------------------------------

==26082== HEAP SUMMARY:
==26082==     in use at exit: 422 bytes in 17 blocks
==26082==   total heap usage: 36 allocs, 19 frees, 9,224 bytes allocated
==26082== 
==26082== 5 bytes in 1 blocks are still reachable in loss record 1 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x494942FF: ???
==26082== 
==26082== 6 bytes in 1 blocks are still reachable in loss record 2 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x37: ???
==26082== 
==26082== 6 bytes in 1 blocks are still reachable in loss record 3 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x39350048: ???
==26082== 
==26082== 7 bytes in 1 blocks are still reachable in loss record 4 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x45003630: ???
==26082== 
==26082== 9 bytes in 1 blocks are still reachable in loss record 5 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x454C3630: ???
==26082== 
==26082== 9 bytes in 1 blocks are still reachable in loss record 6 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x45423630: ???
==26082== 
==26082== 9 bytes in 1 blocks are still reachable in loss record 7 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x49494352: ???
==26082== 
==26082== 11 bytes in 1 blocks are still reachable in loss record 8 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x40EC23B: xmlStrndup (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x39353837: ???
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 9 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EB28: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 10 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EB44: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 11 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EB6C: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 12 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EB94: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 13 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EBB6: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 14 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EBCC: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 15 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EBE2: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 20 bytes in 1 blocks are still reachable in loss record 16 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406E9D1: xmlNewCharEncodingHandler (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x406EC02: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== 200 bytes in 1 blocks are still reachable in loss record 17 of 17
==26082==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==26082==    by 0x406EABE: xmlInitCharEncodingHandlers (in /usr/lib/i386-linux-gnu/libxml2.so.2.7.8)
==26082==    by 0x41B54D2: (below main) (libc-start.c:226)
==26082== 
==26082== LEAK SUMMARY:
==26082==    definitely lost: 0 bytes in 0 blocks
==26082==    indirectly lost: 0 bytes in 0 blocks
==26082==      possibly lost: 0 bytes in 0 blocks
==26082==    still reachable: 422 bytes in 17 blocks
==26082==         suppressed: 0 bytes in 0 blocks 
```

做什么？这是家庭作业 - 不能忽视 valgrind 结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T18:20:49.590

[在调用xmlCleanupParser()](http://www.xmlsoft.org/html/libxml-encoding.html#xmlCleanupCharEncodingHandlers)之前添加对xmlCleanupCharEncodingHandlers() 的调用。

在我的 Mac OS 10.7.5 开发机器（libxml 20703）上，这修复了 libxml2 中报告的“仍然可以访问”的泄漏。

顺便一提， ？？？表示目标文件的调试符号不可用。在跟踪内存泄漏以获取此信息时非常*有帮助。*安装调试信息的过程取决于 Linux 发行版。例如，在 Ubuntu 上，您可以使用`sudo apt-get install libxml2-dbg`. 请参阅[https://live.gnome.org/GettingTraces/DistroSpecificInstructions](https://live.gnome.org/GettingTraces/DistroSpecificInstructions)

# c# - 使用 iText for .NET 替换 PDF 文件中的字符串

> ID：13903750
> 
> 赞同：0
> 
> 时间：2012-12-16T17:31:58.820
> 
> 标签：c#, vb.net, pdf, itext

如何使用 iText5 for .NET 库替换 PDF 文件中的 #name# 之类的字符串，我对其进行了探索，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T18:23:00.160

不幸的是，没有简单的方法可以做到这一点，因为 PDF 不使用标记语言。在 adobe acrobat 等 PDF 阅读器中，文本选择的工作方式本质上是通过光学字符识别，其中字符接近度决定了单词边界。

您可以想象一个存储字符定义（例如“a”）的 PDF 文档，其中包含样式和坐标。因此没有字符串的实际表示。

Itextsharp 和类似的库使用构建器模式，给人一种使用标记语言的印象。

尽管我无法为您提供解决方案，但我希望您可以更好地理解潜在的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:24:24.997

如果您确实需要实现您所描述的内容，尽管评论和答案中有所有评论，您可以考虑这样做：

1.  使用解析器包中的类与自定义 RenderListener 实现相结合，在页面内容中查找占位符，该实现返回搜索到的占位符文本的位置和大小。
2.  使用 PdfStamper 在占位符上绘制一个白色矩形。
3.  使用相同的 PdfStamper 在矩形上打印您的替换。

此过程有一些缺点：

*   占位符仍然存在于 pdf 中，只是被覆盖了。因此，它可以通过文本提取例程找到，例如从查看器中复制和粘贴。
*   没有回流。因此，如果在占位符之后有文本，您必须确保您的替换字符串不会太长，如果它更短，您会看到一个间隙。

如果不能接受这些缺点，您必须直接研究内容流操作，这对于通用文档来说非常困难且充满陷阱。

# python - 如何查看完整的回溯？

> ID：13903751
> 
> 赞同：0
> 
> 时间：2012-12-16T17:32:11.783
> 
> 标签：python, stack-trace, traceback

我在函数中添加了一个 assert(0) 以了解对该函数的函数调用顺序。

前任：

```
def my_func():
    ...lines of code...
    assert(0)
    ...more lines of code... 
```

日志仅显示以下内容：

```
Traceback (most recent call last):
  File "/var/www/folder/file.py", line 273, in my_func
    assert(0)
AssertionError 
```

我想查看完整的调用跟踪 - 示例：first_func -> second_func -> my_func

我尝试了回溯库，但它向我显示了相同的堆栈跟踪。请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:53:06.297

`traceback`为此使用模块。IE

```
>>> import traceback
>>> def my_func():
...     my_other_func()
... 
>>> def my_other_func():
...     my_third()
... 
>>> def my_third():
...     print "Stack"
...     traceback.print_stack()
...     print "Extracted"
...     print repr(traceback.extract_stack())
... 
>>> 
>>> my_func()
Stack
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in my_func
  File "<stdin>", line 2, in my_other_func
  File "<stdin>", line 3, in my_third
Extracted
[('<stdin>', 1, '<module>', None), 
 ('<stdin>', 2, 'my_func', None), 
 ('<stdin>', 2, 'my_other_func', None), 
 ('<stdin>', 5, 'my_third', None)]
>>> 
```

# python - 我将如何通过嵌套列表理解来实现这一点？

> ID：13903753
> 
> 赞同：2
> 
> 时间：2012-12-16T17:32:13.550
> 
> 标签：python, list, python-2.7, list-comprehension

只是想知道我将如何作为具有列表理解的 1 行完成这样的事情，只需简单地从 0 中减去列表索引 1，对于主列表的每个子列表。

```
value = [[-20, 20], [-20, 20], [32, 32]]
value[0] = value[0][0] - value[0][1]
value[1] = value[1][0] - value[1][1]
value[2] = value[2][0] - value[2][1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T17:34:12.733

简单的：

```
value = [v[0] - v[1] for v in value] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:34:21.143

```
new_values = [ v[0] - v[1] for v in values ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:28:37.657

```
 python 3.2

    [(v-i) for v,i in values] 
```

# c# - 如何修改svg路径元素定位？

> ID：13903754
> 
> 赞同：0
> 
> 时间：2012-12-16T17:32:16.057
> 
> 标签：c#, javascript, jquery, svg

我对 svg 路径元素有疑问。我正在开发一个应用程序，我们可以在其中将 svg 文档从 html 文档转换。但我被困在如何正确定位路径元素。路径元素是：

```
 <path
     inkscape:connector-curvature="0"
     id="path649-3"
     d="m 5159.0706,-976.95064 c -4.7204,-0.3596 -8.7292,0.4102 -12.125,1.4063 -4.182,1.2266 -7.775,2.8656 -10.0625,6.3125 -1.0568,1.5913 -2.1471,3.8178 -2.0313,6.2812 0.1986,4.2925 2.7407,6.607 5.25,8.5625 1.3363,1.0437 2.8781,1.733 4.5313,2.3438 1.6607,0.609 3.4583,1.1908 5.5,1.3125 6.7228,0.4069 12.4914,-1.874 15.7187,-5.5313 1.1464,-1.2969 2.1272,-3.1072 2.1563,-5.25 0.03,-2.2608 -1.0388,-3.9544 -2.4063,-5.2812 -2.0466,-1.9869 -5.0407,-3.3151 -8.8125,-3.5625 -4.5619,-0.2975 -8.8943,1.5695 -10.7187,4.1562 -0.7285,1.0329 -1.1842,2.7273 -0.75,4.2813 0.3529,1.2641 1.3731,2.3243 2.6875,3.0312 1.3144,0.707 2.9197,1.0523 4.5625,0.875 0.2288,-0.024 0.5203,-0.03 0.8125,-0.125 0.2921,-0.095 0.588,-0.2853 0.7812,-0.625 l 0.25,-0.4687 -0.4375,-0.25 c -0.4511,-0.2397 -0.9112,-0.1551 -1.3125,-0.094 -0.4013,0.061 -0.7811,0.1311 -1.0312,0.125 -1.3586,-0.033 -2.7476,-0.471 -3.6875,-1.25 -0.9399,-0.779 -1.478,-1.8608 -1.2188,-3.4063 0.1524,-0.8985 1.0113,-1.8397 1.7188,-2.4062 2.3013,-1.8447 5.6434,-2.5256 8.8437,-2.2188 3.2003,0.3069 6.2281,1.6132 7.875,3.5938 0.6165,0.742 1.2521,2.1606 1.3125,3.1875 0.109,1.9047 -0.7013,3.3083 -1.625,4.4375 -0.7621,0.9324 -1.5482,1.5761 -2.5,2.1562 -1.8485,1.1256 -4.4084,2.2787 -7.0625,2.5 -4.7614,0.396 -9.6079,-0.4293 -12.9062,-2.0625 -3.183,-1.5764 -6.165,-4.3626 -6,-8.7187 0.1603,-4.2426 2.7614,-6.4525 5.7187,-8.2813 3.2571,-2.0139 7.4089,-2.9623 12.0625,-3.2812 5.0629,-0.345 9.571,0.9291 12.8438,2.3125 1.7146,0.725 3.2854,1.7907 4.5625,2.9375 2.5672,2.3035 5.0625,5.4942 5.0625,9.875 9e-4,3.3952 -1.2308,5.9497 -3.0625,8 -1.8318,2.0503 -4.2832,3.5748 -6.6563,4.7187 -3.4175,1.6511 -7.8129,2.6884 -12.3437,2.8125 -4.7182,0.1323 -9.6323,-0.5946 -13.75,-1.5625 -3.8269,-0.8997 -7.945,-2.3133 -11.75,-3.625 -3.6367,-1.2503 -6.898,-2.5018 -10.75,-4.0312 0.602,-1.1329 1.4279,-2.1479 1.625,-3.7813 0.3241,-2.6722 -0.6551,-4.8003 -1.6875,-6.25 -3.1762,-4.4641 -9.9683,-6.7451 -17.125,-6.0937 -0.7652,0.069 -1.6636,0.2782 -2.4688,0.4375 -0.428,0.084 -0.8889,0.2421 -1.3125,0.3437 -0.4236,0.1017 -0.8315,0.142 -0.9375,0.125 0.1227,0.02 -0.096,-0.059 -0.2812,-0.1875 -0.1851,-0.1288 -0.4111,-0.2944 -0.5625,-0.4062 -2.4744,-1.8396 -5.6892,-3.1674 -9.75,-3.2813 -3.7067,-0.1036 -7.1873,1.2376 -9.75,3.0625 -2.4846,1.7653 -4.7137,4.4527 -5.0625,8 -0.1632,1.653 0.1654,2.9444 0.4062,4.375 -2.4116,1.2226 -5.0787,2.5372 -7.9687,3.75 -2.9192,1.2199 -6.0289,2.5356 -9.25,2.8438 -2.8351,0.2712 -5.0866,-0.2115 -6.5938,-1.3438 -1.4152,-1.0631 -2.1684,-2.7629 -2.25,-5.0937 5.146,-0.6811 10.2029,-2.1107 13.75,-4.8438 1.1602,-0.8949 2.6374,-2.2996 2.9063,-3.9687 0.1853,-1.1502 -0.1559,-2.1394 -0.625,-2.7188 -0.8069,-0.992 -2.194,-1.3447 -3.625,-1.4062 -1.431,-0.062 -2.9527,0.1826 -4.1875,0.5625 -2.1041,0.6446 -4.179,1.9674 -5.8125,3.5 -2.1707,2.0331 -3.4713,4.4472 -4.0938,7.4375 -2.6678,0.2184 -5.3092,0.2302 -8.0625,0.094 -0.6458,-2.8101 -1.954,-5.3461 -3.9687,-7.2813 -1.994,-1.9164 -4.7692,-3.5672 -7.8438,-4 -2.2394,-0.3138 -4.4773,-0.1393 -5.75,1.2813 -0.6121,0.683 -0.7967,1.568 -0.7187,2.375 0.078,0.807 0.4105,1.5613 0.8437,2.1875 2.9396,4.2377 9.9314,5.9986 15.8125,6.8437 -0.048,2.2531 -1.04,4.1574 -2.5312,5.2813 -1.8629,1.4025 -4.4814,1.5432 -7.1875,1.0937 -2.7062,-0.4495 -5.4571,-1.4989 -7.4688,-2.3125 -2.299,-0.9315 -4.6865,-2.0736 -7,-3.1562 -0.3863,-0.18 -0.9246,-0.3959 -1.3437,-0.5938 -0.2096,-0.099 -0.3827,-0.2007 -0.5,-0.2812 -0.1174,-0.081 -0.1274,-0.141 -0.094,-0.031 0.03,0.1 0.02,-0.1833 0.094,-0.4375 0.074,-0.2542 0.169,-0.5181 0.2187,-0.7813 0.8034,-4.2661 -1.1781,-7.5687 -3.1562,-9.5312 -2.3907,-2.3742 -5.7359,-4.14 -10.25,-4.4375 -0.5386,-0.035 -1.0585,-0.051 -1.75,0 -3.4912,0.2661 -5.9632,1.1673 -8.25,2.5625 -0.2865,0.1742 -0.7015,0.4892 -1.125,0.7812 -0.2118,0.1461 -0.3939,0.2795 -0.5625,0.375 -0.1687,0.096 -0.3336,0.1305 -0.2813,0.125 -0.096,0.01 -0.5331,-0.025 -0.9687,-0.125 -0.4357,-0.1 -0.9,-0.237 -1.3125,-0.3125 -2.28,-0.4196 -4.715,-0.7293 -7.5625,-0.4687 -5.2362,0.4806 -10.3963,3.2645 -12.5,7.1562 -0.7411,1.3696 -1.4026,3.5182 -0.9688,5.625 0.2875,1.3843 0.9875,2.2722 1.5313,3.4063 -5.3725,2.0923 -10.7498,4.0729 -16.4063,5.9375 -5.7651,1.9026 -12.076,3.2344 -19.125,3.625 -0.045,-0.012 -0.08,0.011 -0.125,0 -1.4823,-0.355 -2.8875,-0.2663 -4.0937,-0.4375 -4.0585,-0.5757 -7.3744,-1.6124 -10.3438,-3.2813 -1.9227,-1.0821 -3.7591,-2.2478 -5.1562,-3.8437 -1.3882,-1.5847 -2.641,-3.6553 -3,-5.9375 -0.8923,-5.6655 2.3522,-9.6628 5.4375,-12.2813 3.2579,-2.7687 7.6849,-4.4838 13.2812,-4.875 7.4648,-0.5246 14.7514,1.3624 18.6875,5.1563 1.7551,1.6877 3.2926,4.5095 2.7188,7.9062 -0.5147,3.0419 -2.7193,5.1202 -5.3438,6.6875 -2.7311,1.6327 -5.9595,2.2483 -9.9375,2.4375 -6.0857,0.2898 -10.7879,-1.4979 -13.3437,-4.875 -0.7959,-1.0514 -1.6786,-2.7245 -1.5,-4.2812 0.1356,-1.1738 0.8634,-2.4489 1.4687,-3.125 2.1536,-2.4001 6.9655,-4.3407 11.75,-3.5625 1.3275,0.2153 2.9683,0.8346 4.2813,1.7187 1.3129,0.8841 2.2578,2.0259 2.4062,3.3125 0.1603,1.3891 -0.4693,2.4307 -1.5937,3.1875 -1.1245,0.7569 -2.7452,1.1671 -4.375,1.0313 0.032,0 -0.2075,-0.092 -0.5,-0.1563 -0.1463,-0.032 -0.3348,-0.073 -0.5625,0.031 -0.2278,0.1044 -0.3861,0.3687 -0.4375,0.5938 l -0.125,0.4062 0.4375,0.1563 c 1.7602,0.6443 3.6904,0.441 5.2812,-0.25 1.5908,-0.6911 2.882,-1.8654 3.25,-3.3438 0.5573,-2.24 -0.501,-4.0058 -1.5937,-5.0312 -2.1059,-1.9708 -5.4955,-3.3695 -9.1563,-3.25 -5.2999,0.1711 -9.5833,2.3509 -11.25,6.0625 -0.4046,0.9016 -0.8084,1.9102 -0.7187,3.125 0.2487,3.3491 2.4305,5.3462 4.4375,6.875 2.814,2.1469 6.8933,3.4364 11.0312,3.5 4.4782,0.07 8.2323,-1.2308 11.5938,-3.0313 l 0.062,0 0.031,-0.031 c 2.1743,-1.8208 4.2938,-3.4382 5.375,-6.1875 1.2021,-3.0589 0.427,-6.6982 -1.25,-9.1875 -1.5215,-2.2622 -3.8663,-3.9193 -6.5938,-5.0312 -2.6184,-1.0647 -5.8247,-2.2577 -8.9375,-2.5313 -6.8443,-0.602 -12.6714,0.531 -17.125,3.4063 -4.0029,2.5869 -8.3547,6.7328 -8.7812,12.8125 -0.2345,3.3406 1.0534,6.2155 2.5,8.3437 1.5078,2.2193 3.7582,3.796 5.8437,5 4.6802,2.7027 10.0648,4.2606 16.6563,4.625 7.789,0.4322 14.4837,-1.3965 19.8437,-3.5312 4.6689,-1.858 9.6169,-3.9122 14.3125,-5.9063 0.3166,-0.1337 0.757,-0.3424 1.1563,-0.5 0.1996,-0.079 0.382,-0.1476 0.5312,-0.1875 0.1493,-0.04 0.2786,-0.027 0.25,-0.031 -0.037,-0.01 0.091,0.037 0.25,0.1563 0.1593,0.1195 0.3631,0.2796 0.5625,0.4687 0.3988,0.3782 0.7728,0.8251 1.125,1.0938 l 0.031,0 c 0.8054,0.6119 1.8351,1.2231 2.5313,1.625 1.6267,0.9314 3.9757,1.9196 5.9687,2.4062 4.203,1.0244 9.104,2.0081 14.75,1.6563 0.9879,-0.061 2.0492,-0.4377 2.8438,-0.3125 0.05,0.01 0.2682,0.1073 0.5,0.25 0.2318,0.1427 0.495,0.3187 0.8125,0.4687 0.5231,0.2487 1.0932,0.5069 1.625,0.7188 0.9851,0.3911 2.198,0.915 3.4062,1.1562 1.8682,0.3729 4.0893,0.458 6,0.062 1.9108,-0.3955 3.6127,-1.3378 4.0625,-3.0937 0.4024,-1.571 -0.147,-2.7576 -0.875,-3.6563 -0.6511,-0.8037 -1.3598,-1.4322 -1.8437,-2.125 0.6426,-0.6679 1.2988,-1.3427 1.875,-2.1562 0.6171,-0.8747 1.0097,-1.7608 1.5312,-2.5 2.4329,1.1007 5.0726,2.3069 7.875,3.5 2.837,1.2091 5.9629,2.5919 9.3125,2.9375 3.0499,0.3134 5.9561,-0.041 7.9063,-1.4688 l 0.062,-0.031 0.031,-0.062 c 0.6456,-0.8103 1.5399,-1.5387 2.0937,-2.75 0.4897,-1.0702 0.6518,-2.2205 0.9063,-3.4062 2.7737,0.095 5.4735,-0.031 8.0937,0.062 0.3374,3.001 1.7425,5.4253 3.7813,6.5937 2.2721,1.3023 5.0204,1.3551 7.6875,0.9063 2.667,-0.4489 5.292,-1.4182 7.375,-2.25 3.4988,-1.3976 6.6216,-3.0236 9.5,-4.3125 0.9393,1.7495 2.0222,3.3434 3.3125,4.75 -0.4049,0.5097 -0.8661,0.9588 -1.3438,1.4687 -0.5573,0.595 -1.0959,1.2782 -1.3125,2.2188 -0.09,0.3991 -0.1455,0.9165 -0.125,1.4375 0.021,0.521 0.056,1.0174 0.3125,1.4375 0.6941,1.1394 1.8065,1.8318 3.0625,2.1875 1.256,0.3557 2.6683,0.4153 4.0938,0.2812 2.8509,-0.2682 5.7594,-1.2402 7.4375,-2.0312 0.4039,-0.1903 0.7548,-0.4232 1.0625,-0.5938 0.3076,-0.1705 0.5747,-0.2733 0.6562,-0.2812 0.5341,-0.049 1.3853,0.1557 2.1875,0.2187 8.6142,0.6662 16.8912,-1.3945 22.25,-4.75 0.5182,-0.325 1.2701,-0.7181 2.0313,-1.3437 0.3437,-0.2823 0.6649,-0.6381 0.9687,-0.9375 0.1519,-0.1498 0.2964,-0.2963 0.4063,-0.375 0.1099,-0.079 0.2019,-0.096 0.1562,-0.094 -0.072,0 0.011,0.026 0.125,0.062 0.1145,0.037 0.2723,0.088 0.4375,0.1562 0.3304,0.1356 0.7159,0.3064 1.0313,0.4375 1.8069,0.7471 3.7019,1.5678 5.3125,2.1875 7.1231,2.7456 14.1303,6.5364 23.3125,7.0938 8.3487,0.5056 15.4397,-0.9787 21.1562,-4 4.2028,-2.2206 7.8629,-5.2466 9.1875,-10.2188 0.9342,-3.4983 0.1254,-6.9243 -1.3125,-9.4687 -2.3767,-4.2056 -6.1143,-7.2076 -10.7187,-9.0938 -1.9237,-0.7872 -4.1094,-1.4313 -6.6563,-1.625 z m -74.5938,5.6875 c 1.3062,-0.075 2.6305,-0.076 3.7813,0.094 2.5178,0.3683 4.6986,1.3902 6.1875,2.7813 -5.4963,1.8875 -10.1944,4.5473 -15.0625,6.9375 -2.1779,1.0702 -4.2435,2.2942 -6.5,3.125 -0.2777,-0.8708 -0.5006,-1.6345 -0.4063,-2.875 0.4462,-5.8714 5.8303,-9.7046 12,-10.0625 z m -91.875,0.3125 c 1.4339,-0.1691 3.0404,-0.028 4.3125,0.2188 4.6468,0.8997 9.0882,4.5221 9.8125,8.3125 0.2782,1.4558 0.1728,3.0967 -0.25,4.375 -1.7128,-0.5302 -3.3151,-1.5142 -5,-2.4063 -1.8698,-0.9887 -3.8286,-1.7893 -5.6875,-2.7187 -3.4861,-1.7431 -7.053,-3.5396 -11.0312,-4.8125 1.7624,-1.6949 4.6621,-2.5865 7.8437,-2.9688 z m 108.625,2.0625 c 3.3845,-0.308 6.6691,0.1012 9.4688,1.0625 -4.1544,-1.0044 -9.008,-0.8807 -13.0938,0.125 l -0.5937,0.1563 -0.094,-0.031 -0.1875,0.031 c -1.7595,0.2768 -3.3997,0.8383 -5.0313,1.375 1.2945,-0.5423 2.5206,-1.1804 3.9063,-1.625 l 0.6562,-0.1875 c 0.438,0.07 0.8569,-0.047 1.3125,-0.1563 0.4556,-0.1093 0.9223,-0.2418 1.2813,-0.3125 0.8427,-0.1667 1.7481,-0.3807 2.375,-0.4375 z m -44.8437,0.125 c 0.9094,-0.1356 1.777,-0.1019 2.5,0.125 0.6865,0.2155 1.2351,0.632 1.6562,1.3125 0,0.6606 0.015,1.3483 -0.1562,1.7188 -0.8739,1.8891 -3.0941,3.1216 -5.4688,4.3125 -1.0724,0.5391 -2.3194,1.067 -3.5312,1.4062 -1.9474,0.5452 -3.9331,0.8119 -5.9688,0.9375 0.4635,-3.5425 3.0789,-6.3307 5.9688,-7.9687 1.2249,-0.6957 3.181,-1.5725 5,-1.8438 z m -35.2188,0.1563 c 1.7812,-0.133 4.1844,0.5173 5.4688,1.0937 2.5646,1.1518 4.7704,3.0442 6.125,5.1875 0.5852,0.9293 1.0081,2.2338 1.125,3.4688 -1.4627,-0.062 -2.8587,-0.1817 -3.9375,-0.5625 l -0.031,-0.031 -0.062,0 c -2.4528,-0.2718 -4.6204,-1.2065 -6.5,-2.2188 -1.8747,-1.0111 -3.567,-2.0839 -4.5,-3.875 -0.2453,-1.1605 -0.081,-1.8471 0.3125,-2.2812 0.402,-0.4435 1.1094,-0.7148 2,-0.7813 z m -44.3125,0.125 c 1.2004,0.092 2.3487,0.2626 3.4688,0.4687 0.3475,0.063 0.8226,0.2073 1.2812,0.3125 0.4586,0.1053 0.8707,0.1984 1.2813,0.1563 0.055,-0.01 0.077,-0.051 0.125,-0.062 l -0.031,0.062 0.7187,0.2187 c 0.8224,0.2427 1.5546,0.6161 2.3438,0.9063 -1.1343,-0.3375 -2.2767,-0.6212 -3.4375,-0.75 -0.1848,-0.02 -0.38,0.049 -0.5,0.125 l 0.031,-0.1875 -0.4688,-0.094 c -3.6934,-0.7369 -7.5405,-1.0336 -11.4687,-0.5313 -0.4068,0.052 -0.7824,0.2269 -1.1875,0.3125 0.391,-0.133 0.7862,-0.2059 1.1875,-0.3125 0.9371,-0.2489 1.8825,-0.5055 2.8437,-0.5937 1.3633,-0.1248 2.6121,-0.1234 3.8125,-0.031 z m 127.5938,0.9375 c 2.2773,-0.031 4.5405,0.1978 6.5625,0.75 2.0219,0.5522 3.7886,1.4162 5.0937,2.625 1.3051,1.2088 2.1587,2.7574 2.375,4.75 0.2514,2.3144 -0.705,3.83 -1.8125,5.125 -4.7609,-1.3436 -9.6405,-2.8821 -15.2812,-3.3438 -0.3424,-0.028 -0.6564,0.01 -0.9063,0 -0.1396,0 -0.1965,-0.038 -0.2812,-0.062 0.3517,-2.2026 0.3332,-4.8607 -0.4375,-6.8125 -0.3761,-0.9475 -0.8433,-1.6168 -1.25,-2.3125 1.8836,-0.4138 3.8968,-0.6913 5.9375,-0.7187 z m -128.4688,0.5 c 1.6311,0.089 3.2174,0.3312 4.8125,0.625 -0.2105,0.4215 -0.4768,0.841 -0.8125,1.4687 -1.0426,1.9465 -1.2948,4.7992 -0.75,7.5625 -0.5337,0.1856 -0.9714,0.1641 -1.7187,0.2188 -2.4841,0.1763 -5.4129,0.7347 -7.9688,1.375 -1.0173,0.2565 -2.2836,0.5641 -3.6562,1 -0.518,0.1649 -1.1936,0.4448 -1.8438,0.6875 -0.6502,0.2426 -1.3181,0.3778 -1.4687,0.3437 0.052,0.011 -0.2431,-0.1897 -0.4688,-0.5 -0.2257,-0.3103 -0.4279,-0.6974 -0.5312,-0.9062 -1.5436,-3.1121 -0.2056,-7.0173 1.9062,-8.8438 1.5507,-1.3419 4.2569,-2.5164 6.8438,-2.8437 1.8988,-0.2429 3.8023,-0.2887 5.6562,-0.1875 z m 120.6563,0.5312 c 0.9315,0.7135 1.6893,2.0161 2.0625,3.625 0.3656,1.5764 0.3663,3.403 -0.031,5.0625 -8.7123,0.1463 -16.3797,1.8778 -22,5.4688 -1.4594,-1.0416 -2.5114,-2.5033 -3.2188,-4.3438 3.5133,-1.9133 7.0271,-3.8655 10.75,-5.5 3.9322,-1.7249 7.9928,-3.5676 12.4375,-4.3125 z m -114.0938,0.375 c 2.1288,0.2477 4.3606,1.0299 6.5,1.75 5.8877,1.9857 11.753,5.2079 16.8438,7.8438 -0.5848,1.8915 -1.7074,3.2482 -3.0625,4.4687 -5.6932,-3.4677 -12.9573,-5.3333 -22.0625,-5.3125 -0.4823,-1.4613 -0.5294,-3.2374 -0.1875,-4.8437 0.3647,-1.7134 1.1187,-3.212 1.9687,-3.9063 z m 113.1563,9.8125 c 0.8657,-0.041 1.7032,-0.048 2.4062,0.094 -0.197,0.7704 -0.4764,1.6265 -0.875,2.25 -0.9276,1.4493 -2.4975,2.9386 -4.0625,4.0938 -0.7068,0.5189 -1.4859,1.0751 -2.4375,1.625 -0.4273,0.2479 -0.9587,0.5945 -1.4375,0.875 -0.4788,0.2805 -0.929,0.4799 -1.0937,0.5 l -0.031,0 c -0.3281,0.041 -0.8488,-0.055 -1.4063,-0.2188 -0.5574,-0.1634 -1.1262,-0.3584 -1.625,-0.5 -2.8289,-0.8103 -5.2058,-2.0985 -7.1875,-3.6562 0.7748,-0.755 1.9024,-1.3169 3.0938,-1.8438 3.997,-1.7703 9.0371,-2.9573 14.6562,-3.2187 z m 4.0625,0.1875 c 0.011,3e-4 0.02,-2e-4 0.031,0 6.0603,0.1364 10.8834,1.4948 15.5312,3.0938 -0.9087,1.0867 -2.2169,1.9264 -3.6875,2.75 -4.8235,2.6977 -12.7966,4.4619 -20.0625,3.7187 0.5811,-0.4342 1.1704,-0.8596 1.75,-1.3125 2.6541,-2.0741 5.1157,-4.6456 6.4375,-8.25 z m -118.5625,0.1563 c 0.086,0.01 0.1055,0.048 0.25,0.031 2.108,-0.2528 4.3751,-0.03 6.4687,0.2187 4.0152,0.477 8.1502,1.7048 11.2813,3.2188 0.9143,0.4425 1.7624,0.8872 2.3125,1.4375 -1.9769,1.5646 -4.3123,2.8769 -7.2188,3.75 -0.4633,0.14 -1.0409,0.3708 -1.5937,0.5312 -0.5528,0.1605 -1.0972,0.2485 -1.4063,0.2188 -0.2528,-0.024 -0.7273,-0.2206 -1.2187,-0.5 -0.4915,-0.2794 -1.0189,-0.6237 -1.4688,-0.875 -2.7136,-1.5109 -4.8218,-3.5178 -6.5625,-5.9063 -0.1842,-0.4435 -0.4413,-0.8604 -0.625,-1.2187 -0.1671,-0.326 -0.2076,-0.6068 -0.2187,-0.9063 z m -1.6875,0.094 c 0.021,-7e-4 0.01,0.01 0.031,0.031 0.026,0.025 0.07,0.096 0.125,0.2187 0.1097,0.2454 0.2187,0.6138 0.375,0.9688 1.6765,3.7979 4.871,6.1318 7.8437,8.4062 -2.6338,0.3312 -5.5484,0.3272 -8.1562,0 -6.3727,-0.8014 -12.1822,-2.9292 -15.75,-6.25 0.6934,-0.3381 1.438,-0.5913 2.3437,-0.875 3.887,-1.2157 8.2991,-2.351 13.1875,-2.5 z m 164.8437,2.5937 c 0.8134,0.2778 1.6042,0.5542 2.5,0.75 -0.6108,-0.1835 -1.289,-0.2226 -1.875,-0.4375 -0.2355,-0.087 -0.3971,-0.2221 -0.625,-0.3125 z m 4.2188,1.1875 c 1.963,0.2898 4.0417,0.3424 6.125,0.2188 -1.423,0.1906 -2.9389,0.2507 -4.5,0.1562 -0.5862,-0.035 -1.0695,-0.2679 -1.625,-0.375 z m -215.8125,0.2813 c -1.8358,0.5133 -3.7976,0.8145 -5.9375,0.7812 -0.4929,-0.01 -0.9476,-0.2055 -1.4375,-0.25 0.7581,0.031 1.4818,0.1318 2.2812,0.094 1.8458,-0.088 3.5033,-0.2925 5.0938,-0.625 z m 143.7187,1.5312 c 1.4041,0.9492 2.9827,1.9265 4.75,2.7188 0.9131,0.4064 1.8005,0.8012 2.7813,1.125 0.5774,0.192 1.0867,0.4156 1.625,0.5937 -1.587,0.7649 -3.5558,1.4942 -5.6563,1.8438 -1.5056,0.2523 -3.2714,0.1853 -4.4687,-0.3438 -0.5987,-0.2645 -1.0549,-0.6414 -1.3125,-1.0937 -0.2577,-0.4523 -0.3422,-1.0262 -0.1563,-1.8125 0.2914,-1.2322 1.3915,-2.0547 2.4375,-3.0313 z m -73.7187,0.2188 c 0.1789,0.015 0.3803,0.1009 0.625,0.3437 0.2686,0.2666 0.5377,0.6174 0.8125,0.9375 0.3384,0.3928 0.8009,1.0331 1.0625,1.6875 0.2615,0.6545 0.3216,1.2856 -0.062,1.9063 -0.6831,1.1028 -2.2356,1.5237 -4.0938,1.5 -1.8582,-0.024 -3.9337,-0.5038 -5.3125,-0.9688 -0.7718,-0.2599 -1.4005,-0.6077 -2.0625,-0.9375 0.5286,-0.2043 1.05,-0.4014 1.625,-0.5937 2.7332,-0.9114 5.3166,-2.2019 7.4063,-3.875 z m -51.375,1.375 c -1.9341,0.7944 -3.8745,1.6286 -5.75,2.375 -5.1636,2.0565 -11.5418,3.791 -18.9375,3.4687 6.6433,-0.4739 12.7174,-1.6844 18.2187,-3.5 2.2332,-0.7361 4.3042,-1.5749 6.4688,-2.3437 z m 177.75,0.031 c 3.7066,1.2766 7.6958,2.6442 11.4687,3.5312 3.9354,0.925 8.5857,1.5947 13.1563,1.5625 -2.0046,0.1367 -4.0905,0.1639 -6.2813,0.031 -7.0191,-0.426 -12.7113,-2.7834 -18.3437,-5.125 z m -39.0313,1.9688 c -0.066,0.05 -0.1219,0.106 -0.1875,0.1563 l -0.5,0.375 c -0.1121,-3e-4 -0.201,-0.042 -0.3125,-0.031 0.2353,-0.1112 0.476,-0.1703 0.7188,-0.3125 0.1045,-0.061 0.1776,-0.1243 0.2812,-0.1875 z m -100.75,0.3438 c 0.079,0.047 0.1384,0.079 0.2188,0.125 0.2852,0.1621 0.5849,0.2262 0.875,0.3437 -0.1673,-0.025 -0.2721,0.034 -0.4375,0.031 l -0.5,-0.375 c -0.052,-0.041 -0.1039,-0.084 -0.1563,-0.125 z m 98.625,0.4375 c 0.1043,-7e-4 0.2093,0.044 0.3125,0.031 -0.071,0.038 -0.1469,0.054 -0.2187,0.094 -0.3346,0.1854 -0.6923,0.4028 -1.0313,0.5625 -0.4687,0.2209 -1.2138,0.4525 -1.875,0.6875 0.7152,-0.308 1.4665,-0.6231 2.0313,-0.9375 l 0.7812,-0.4375 z m -96.4687,0.2812 0.031,0 0.6562,0.4375 c 0.7149,0.4567 1.5962,0.7912 2.4688,1.125 -0.3449,-0.1344 -0.7127,-0.2173 -1.0313,-0.3437 -0.5222,-0.2081 -1.0716,-0.4542 -1.5625,-0.6875 -0.2265,-0.107 -0.4653,-0.2502 -0.7187,-0.4063 -0.045,-0.028 -0.1112,-0.035 -0.1563,-0.062 0.1015,0.01 0.2092,-0.061 0.3125,-0.062 z m 4.5937,2.0625 c 0.7614,0.2316 1.7211,0.3119 2.6563,0.4688 -0.6459,-0.051 -1.2853,-0.1011 -1.875,-0.2188 -0.2526,-0.05 -0.5182,-0.1717 -0.7813,-0.25 z"
     style="fill: #000000" /> 
```

我知道定位值嵌入在**d**属性中。但我不明白如何根据我的使用修改这些值。谁能指导我这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:05:00.907

形状取决于`d`属性，但可以使用属性修改`translate`放置`transform`。

```
transform="translate(x, y)" 
```

# google-chrome - 轮廓偏移和 Chrome 的奇怪行为

> ID：13903755
> 
> 赞同：3
> 
> 时间：2012-12-16T17:32:29.867
> 
> 标签：google-chrome, css, outline

测试 CSS 属性 outline-offset，我注意到 Chrome 似乎只在元素的左侧和顶部插入间距（Firefox、Opera 和 Safari（Windows）都在所有边缘放置间距，而 IE9 不支持该属性） . 有谁知道为什么会这样？

jsFiddle：http: [//jsfiddle.net/hydrurga/WChhS/](http://jsfiddle.net/hydrurga/WChhS/)

上面 jsFiddle 的 html 是：

```
<p>First paragraph</p>
<p>Here is the <span class="first">first span</span> and the
<span class="second">second span</span> of the paragraph</p>
<p>Another paragraph</p> 
```

风格：

```
p {background-color:blue; color:red; line-height: 3em}
span.first {outline: 5px solid red}
span.second {outline: 5px solid red; outline-offset: 5px} 
```

# java - 使用数组作为计数器

> ID：13903756
> 
> 赞同：0
> 
> 时间：2012-12-16T17:32:31.050
> 
> 标签：java, arrays

我正在尝试创建一个模块来计算每个数字在给定数字中出现的次数。我遇到的问题是，不是将 1 添加到相应数字的数组值，而是添加 10，或者它连接数组的默认值（在本例中为 0），尽管这似乎不太可能。

我的模块：

```
public class UtilNumber{
    public static int [] Occurence(int nb){
        int temp;
        int [] t = new int [10];

        while (nb !=0){
            temp = nb % 10;
            for (int i = 0; i < t.length ; i++){
                t[temp]++;
            }
            nb /= 10;
        }
        return t;
    }
} 
```

我的主要：

```
import java.util.scanner;

public class Primary{
    public static void main(String [] args){
        Scanner keyboard = new Scanner(System.in);
        int [] tab;
        int nb = keyboard.nextInt();
        tab = UtilNumber.Occurence(nb);
        for (int i = 0 ; i < tab.length ; i++){
            if (tab[i] != 0){
                System.out.println(i+" is present "+tab[i]+" time(s).");
            }
        }
    }
} 
```

例如，当我输入 888 时，它应该返回 3，但它却返回 30。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T17:34:42.313

它看起来像而不是

```
 for (int i = 0; i < t.length ; i++){
   t[temp]++;
 } 
```

你应该这样做

```
 t[temp]++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:12:46.677

或者你可以写。

```
public static int [] occurence(long nb){
    int[] count = new int [10];

    for(;nb > 0;nb /= 10) 
        count[nb % 10]++;

    return count;
} 
```

# css - 最后一个孩子选择了错误的 div

> ID：13903758
> 
> 赞同：0
> 
> 时间：2012-12-16T17:32:49.210
> 
> 标签：css

在我的情况下，我很难`:last-child`上班。

HTML：

```
<div class="test">Some content</div>
<div class="test">Some content</div>
<div class="test">Some content</div>
<div class="action">Some other content</div> 
```

CSS：

```
div.topic {
    border-bottom: 1px solid black;
}

div.topic:last-child {
    border-bottom: none;
} 
```

[JSFiddle](http://jsfiddle.net/97Dr4/)

最后一个`div.test`仍然在底部有边框。​我认为的问题是`border-bottom: none`适用于最后一个 div，`div.action`而不是类测试的最后一个 div。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:40:49.933

您必须更新您的标记才能获得所需的结果。将您的未知物品包装在包装器中，例如：

[工作演示](http://jsfiddle.net/97Dr4/2/)

```
<div id="list">
 <div class="topic">Some content</div>
 <div class="topic">Some content</div>
 <div class="topic">Some content</div>
</div>
<div class="action">Some other content</div>​ 
```

然后使用这个CSS：

```
#list .topic {
 border-bottom: 1px solid black;
}

#list .topic:last-child {
 border-bottom: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:43:44.607

我建议使用`first-child`，而不是`last-child`。

```
div.topic {
    border-top: 1px solid black;
}

div.topic:first-child {
    border-bottom: none;
} 
```

这适用于您当前的 HTML，并且更兼容跨浏览器。

# c++ - 数组和单独初始化之间的区别？

> ID：13903759
> 
> 赞同：2
> 
> 时间：2012-12-16T17:32:52.097
> 
> 标签：c++

所以说我有一个这样的“结构”：

```
struct Vertex
{
    float posX, posY, posZ;
} 
```

我已经声明了 3 个浮点（大约 4 字节）值。所以总的来说，这个“结构”大约有 12 个字节。

但如果我这样写：

```
struct Vertex
{
    float pos[3];
} 
```

我仍然得到与上述相同的效果吗？12 字节？有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:36:48.940

理论上，在第一种情况下，允许编译器在各个字段之间添加填充，而在第二种情况下则不允许（数组必须是连续的元素序列）。

因此，*理论上*第一个`struct`可能会占用更多空间，实际上它们可能具有相同的大小/内存布局。

显然，在第一种情况下，您可以使用三个成员的名称访问此类数据，而在第二种情况下，您将在`pos`成员上使用数组语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:41:14.973

我能想到一个区别：如果你有一个大于变量大小的[包](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)，编译器将填充 posX、posY、posZ 以使它们很好地对齐。当您进行二进制读/写时，它最多对您很重要。

通常使用某些填充是出于严重的性能原因，因为向处理器提供未对齐的数据可能会产生严重后果。

# php - 登录php和android

> ID：13903760
> 
> 赞同：0
> 
> 时间：2012-12-16T17:32:52.673
> 
> 标签：php

我的登录有问题。

> 警告：mysql_fetch_row() 期望参数 1 是资源，在第 68 行的 C:\wamp\www\droidlogin\funciones_bd.php 中给出的布尔值

表的名称是 ocbup_users

在数据库中密码是加密存储的。

funciones_db

```
 <?php

    class funciones_BD {

        private $db;

        // constructor

        function __construct() {
            require_once 'connectbd.php';
            // connecting to database

            $this->db = new DB_Connect();
            $this->db->connect();

        }

        // destructor
        function __destruct() {

        }

        /**
         * agregar nuevo usuario
         */
        public function adduser($username, $password) {

        $result = mysql_query("INSERT INTO ocbup_users(username,passw) VALUES('$username', '$password')");
            // check for successful store

            if ($result) {

                return true;

            } else {

                return false;
            }

        }

         /**
         * Verificar si el usuario ya existe por el username
         */

        public function isuserexist($username) {

            $result = mysql_query("SELECT username from ocbup_users WHERE username = '$username'");

            $num_rows = mysql_num_rows($result); //numero de filas retornadas

            if ($num_rows > 0) {

                // el usuario existe 

                return true;
            } else {
                // no existe
                return false;
            }
        }

        public function login($user,$passw){

        $result=mysql_query("SELECT COUNT(*) FROM ocbup_users WHERE username='$user' AND passw='$passw' "); 
        $count = mysql_fetch_row($result);

        /*como el usuario debe ser unico cuenta el numero de ocurrencias con esos datos*/

            if ($count[0]==0){

            return true;

            }else{

            return false;

            }
        }

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:35:46.413

`require_once 'connectbd.php';`

你确定不是：

`require_once 'connectdb.php';`

尝试在 mysql 查询中使用单引号：

`$result = mysql_query("SELECT username from ocbup_users WHERE username = '".$username."'");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:43:09.447

打印出 mysql_error() 的内容，看看出了什么问题。在 mysql_query() 之后立即执行此操作。例子：

```
$sql = "SELECT COUNT(*) FROM ocbup_users WHERE username='$user' AND passw='$passw' ";
$res = mysql_query($sql); 
if (!$res) die("FAIL: $sql <br/>" . mysql_error()); 
```

您可能还想使用 LIMIT 子句。如果您是 PHP 和 MySQL 新手，这本书将帮助您更快地入门。 [http://www.sitepoint.com/books/phpmysql5/](http://www.sitepoint.com/books/phpmysql5/)

最好的，~雷

# eclipse - Eclipse 不会开始运行 Stanford karel

> ID：13903762
> 
> 赞同：0
> 
> 时间：2012-12-16T17:33:10.557
> 
> 标签：eclipse, logging, karel

我是一名编程初学者，我决定参加斯坦福在线编程方法入门课程 (cs106a)。我按照说明将 Eclipse 文件解压缩到我的计算机上。当我试图打开它时，它说“发生错误，请参阅日志文件。”我不知道如何解决这个问题，我真的很想学习这个程序。我搜索了其他类似的问题，只找到了一个，建议的解决方案是设置环境变量。不幸的是，我不知道该怎么做。

如何让 Eclipse 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:36:20.227

可能有很多可能性。

但首先从这些开始。

(1) 您使用的是 32 位还是 64 位计算机？然后您必须使用为您的系统设计的 Eclipse。

(2) 是否安装了 JDK？它在甲骨文网站上。

(3) 您的操作系统是否良好？就像您或其他程序是否在注册表中弄乱了一样？

希望这可以帮助。

# javascript - 标题背景由于水平滚动条而被剪掉

> ID：13903765
> 
> 赞同：0
> 
> 时间：2012-12-16T17:33:23.343
> 
> 标签：javascript, jquery, asp.net, html, css

我正在为 iPad 和 iPhone 制作一个页面，其中我有一个标题，最左边和最右边的角落都有按钮，内容位于标题下方。

标题的 CSS 已经完成，标题的宽度会随着 ipad 的方向变化，iPhone 会在标题的左侧和右侧显示所有按钮。

但是当我的内容超过一定宽度时，会出现水平滚动，并且当我滚动到页面最右侧的数据时，标题会被剪掉。

可以在此 URL 中查看我面临的问题的示例：

[http://www.kalee-eversole.com/](http://www.kalee-eversole.com/)

问题的副本：

[http://www.tempestblog.com/2011/06/19/common-css-problem-header-background-cut-off-when-page-scrolled-horizo​​ntally/](http://www.tempestblog.com/2011/06/19/common-css-problem-header-background-cut-off-when-page-scrolled-horizontally/)

这个问题有什么解决方法吗？任何有价值的建议都非常欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:06:04.040

`header`被剪掉的不是标签，而是`body`，你有一个图像（模拟标题）作为背景。

问题似乎是您`body`的宽度为`100%`（浏览器宽度），而标题的`1024px`宽度为（加上子元素负边距），因此当浏览器小于 1024 时，主体仅跨越浏览器宽度，留下额外的没有背景图像的滚动区域。

尝试将此添加到您的**body**标签的 CSS 中：

```
min-width:1192px; 
```

*（1024 距标题宽度 + 98 + 70 距标题内部元素左右负边距）*

# ios - Cocos2d for iPhone 中高效的逐帧动画

> ID：13903766
> 
> 赞同：1
> 
> 时间：2012-12-16T17:33:50.090
> 
> 标签：ios, animation, memory-management, cocos2d-iphone

我的 cocos2d iPhone 游戏中有一些动画精灵。动画精灵是指运行 CCRepeatForever 动作的 CCSprite。重复动作循环通过来自 png spritesheet 和相关 plist 坐标文件的动画帧。

虽然我只有几个独特的动画，但我有许多具有相同动画的动画精灵。例如，我可能有 30 个动画足球运动员在屏幕上跑来跑去，他们都在运行 CCRepeatForever 动作。**在这种情况下，预加载和重用动画的有效方法是什么？**

我目前的方法是在游戏启动时创建重复动作。然后，当我想创建一个新的动画精灵时，我会在精灵上运行预加载的重复动作的**副本。**我质疑这是否非常有效，因为动画有时会在启动时结结巴巴。非常感谢所有反馈！我对几乎任何架构/设置都持开放态度。

**编辑 - 更多信息**：我想知道“预复制”这些操作是否可行？当游戏加载时，我会用重复动作的副本填充队列。然后我会根据需要将它们弹出。当队列的大小低于某个阈值时，我会在后台线程上重新填充它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:04:46.083

确保您使用的是纹理图集，并预加载所有带有动画的纹理。理想情况下，您会希望使用 .pvr.ccz 格式，因为它的加载速度比 PNG 快得多。

您所做的其他一切可能对帧率几乎没有影响。卡顿很可能是由按需加载纹理引起的，或者与音频缓冲区有关（即在没有预加载的情况下播放音频）。

不要担心使用 CCAnimate 和您正在使用的任何其他东西优化 CCRepeatForever 的（频繁）创建，除非您已经**运行分析器来测量并确认**这正是您遇到的问题。我有 99.9% 的信心认为口吃问题与创建和运行操作无关。

加载资源是迄今为止您可以在游戏过程中运行的最耗时的任务，因此预加载所有资源文件至关重要。在您的情况下，您实际上只需要确保纹理在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:02:08.980

对于逐帧动画，使用 CCAnimation 和 CCAnimationCache。

# functional-programming - Scheme迭代如何工作？

> ID：13903769
> 
> 赞同：0
> 
> 时间：2012-12-16T17:34:19.553
> 
> 标签：functional-programming, scheme

从**4.2.4 迭代**下的[R5RS](http://schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-7.html#%_sec_4.2.4) -

 **```
(let ((x '(1 3 5 7 9)))
  (do ((x x (cdr x))
       (sum 0 (+ sum (car x))))
      ((null? x) sum))) 
```

`cdr`-和的用法是什么`car`？

这`x`在这些行中会发生什么 -

```
(do ((x x (cdr x))
           (sum 0 (+ sum (car x))))
          ((null? x) sum)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:42:13.413

*   car = first（如列表的第一个元素）
*   cdr = rest（除了列表的第一个元素之外的所有内容）

循环将列表中的项目相加。**

# java - android：停止处理程序

> ID：13903771
> 
> 赞同：0
> 
> 时间：2012-12-16T17:34:30.073
> 
> 标签：java, android, handler

我正在制作一个应用程序并使用处理程序。在A类中，显示一些带有文本的按钮，然后使用

```
handler.postDelayed(new Runnable(){@Override public void run() {blankbutton();}}, 10000); 
```

这样当通过 10 秒时，按钮上的文本将被删除。

但是，如果此时用户按下重置按钮（在另一个类中），例如，在处理程序计算时间后 3 秒后，那么将发生的是在按下重置后 7 秒，按钮上的文本将被删除：处理程序不会停止。

我怎样才能停止另一个类中的处理程序（在重置类中）？我已经检查了一些类似的问题和答案是

```
handler.removeCallbacks(Runnable); 
```

但是，在重置类下它说“ `Runnable cannot be resolved to a variable`”

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:40:05.920

您的问题是您正在制作一个匿名的内部 Runnable 对象。当您尝试删除回调时，您将无法参考它。这样的事情会让它工作：

```
Runnable txtClearRun = new Runnable(){
  public void run() {
    blankbutton();
  }
};
handler.postDelayed(txtClearRun, 10* 1000);
.
.
.
handler.removeCallbacks(txtClearRun); 
```

不同之处在于，通过这种方式，您可以将可运行对象分配给一个变量`txtClearRun`，以便以后在将其传递给时可以引用它`removeCallbacks();`

# python - 当应用于逻辑时，二元运算符是什么意思？

> ID：13903773
> 
> 赞同：4
> 
> 时间：2012-12-16T17:34:48.617
> 
> 标签：python

我的理解是`&`按位与运算符。所以我希望它在应用于逻辑时没有任何意义。但是，我看到：

```
>>> False & False
False
>>> False & True
False
>>> True & True
True 
```

等等。对于其他位运算符也是如此。

那么，为什么这些运算符甚至接受逻辑操作数呢？我在哪里可以找到解释这一点的文档？我搜索了它，但找不到解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T17:37:37.817

> 那么，为什么这些运算符甚至接受逻辑操作数呢？

`bool`子类`int`和覆盖`__and__()`等以返回操作`bool`数`bool`。

有关详细信息，请参阅[PEP 285](http://www.python.org/dev/peps/pep-0285/)。

具体来说：

```
      6) bool 是否应该从 int 继承？

       => 是的

       在理想的世界中，bool 可能更好地实现为
       知道如何执行混合模式的单独整数类型
       算术。但是，从 int 继承 bool 可以简化
       极大地实现（部分原因是所有调用的 C 代码
       PyInt_Check() 将继续工作——这将返回 true
       int 的子类）。另外，我相信这是正确的
       可替代性：需要 int 的代码可以输入 bool
       它的行为与 0 或 1 相同。需要
       给定 int 时，bool 可能不起作用；例如，3 和 4
       为 0，但 3 和 4 都为真
       价值观。

```

和

```
 class bool(int):

        def __and__(self, other):
            if isinstance(other, bool):
                return bool(int(self) & int(other))
            else:
                return int.__and__(self, other)

        __rand__ = __and__

        def __or__(self, other):
            if isinstance(other, bool):
                return bool(int(self) | int(other))
            else:
                return int.__or__(self, other)

        __ror__ = __or__

        def __xor__(self, other):
            if isinstance(other, bool):
                return bool(int(self) ^ int(other))
            else:
                return int.__xor__(self, other)

        __rxor__ = __xor__ 
```

注意如何`bool & bool`返回一个`bool`而`bool & non-bool`继承的`int`行为（即返回一个`int`）。

以下是一些演示这些属性的示例：

```
In [12]: isinstance(True, int)
Out[12]: True

In [13]: True & True
Out[13]: True

In [14]: True & 1
Out[14]: 1 
```

上述行为不适用于算术运算符。那些只是使用`int`的行为：

```
In [15]: True + 0
Out[15]: 1

In [16]: True + False
Out[16]: 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:37:22.803

“逻辑”，也就是布尔值，只代表一个打开或关闭的位，所以当然按位运算对它们起作用。是什么让您期望按位运算不适用于单个位？

您正在反转逻辑操作的继承。按位运算的基本情况是针对单个位变量，例如布尔值。对较大值的按位运算只是单位运算的扩展应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:39:22.367

在 Python 3.x 中，True 和 False 是关键字，总是等于 1 和 0。

在 Python 2 中的正常情况下，在 Python 3 中总是：

False 对象的类型为 bool，它是 int 的子类：

```
 object
  |
 int
  |
 bool 
```

# php - 使用 jQuery 从 PHP 读取 JSON 数据

> ID：13903774
> 
> 赞同：0
> 
> 时间：2012-12-16T17:34:52.143
> 
> 标签：php, jquery, arrays, json

我从 PHP 发送一个数组`json_encode`，并尝试使用 AJAX 和 jQuery。一切都好。

JSON结构是：

```
names{"p1":"John","p5":"Smith"} 
```

jQuery代码是：

```
$.ajax({
type: "POST",
url: "return.php",
dataType: "json",
data: "id=56",
success: function(data) {
        $(data.names).each(function(key, txt) {
            alert(txt);
        });
    }
} 
```

这段代码不返回任何东西！我认为浏览器不输入`each`

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:36:56.110

取而代之的是：

```
$(data.names).each(function(key, txt) {
    alert(txt);
}); 
```

用这个：

```
$.each(data.names, function(key, txt) {
    alert(txt);
}); 
```

正如您提到的，您的 json 似乎不正确：`names{"p1":"John","p5":"Smith"}`

这应该是这样的：

```
{
    "names": {
        "p1": "John",
        "p5": "Smith"
    }
} 
```

你可以在这里检查你的 json：http: [//jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:15:40.350

在您的代码中，您可以只使用**parseJSON** ()。

```
    $.ajax({
    类型：“发布”，
    网址：“return.php”，
    数据类型：“json”，
    数据：“id=56”，
    成功：函数（数据）{
        var d = jQuery.parseJSON(数据);
        // ... 做东西
    }
    });

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T17:38:56.910

我建议你使用 jQuery 的 $.getJSON(); [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) 但是直接回答你的问题；你没有关闭你的 ajax() 函数。

```
$.ajax({
type: "POST",
url: "return.php",
dataType: "json",
data: "id=56",
success: function(data) {
        $(data.names).each(function(key, txt) {
            alert(txt);
        });
    }
}); 
```

# ftp - REST 后面可以跟 STOR 吗？

> ID：13903781
> 
> 赞同：0
> 
> 时间：2012-12-16T17:35:59.587
> 
> 标签：ftp, ftp-server

我正在尝试创建一个简单的 FTP 服务器，但我不确定如何正确实现 REST。

[文档](http://www.ietf.org/rfc/rfc959.txt)说 REST 命令会影响紧随其后的命令，但没有说明哪些命令可以遵循 REST。

我认为它主要用于 RETR，因此可以恢复文件下载，但我不确定 STOR，因为 APPE 已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:10:16.180

我在[RFC](http://www.ietf.org/rfc/rfc959.txt)中找到了答案-`REST`后面可以跟`APPE`,`STOR`或`RETR`.

# google-maps-api-3 - 访问融合表

> ID：13903782
> 
> 赞同：3
> 
> 时间：2012-12-16T17:36:05.157
> 
> 标签：google-maps-api-3, google-fusion-tables

我想在我的网页上显示一些地图图层，所以我决定尝试一下这个谷歌服务。由于数据是在我的服务器的数据库中收集的，因此我选择使用[此处](https://developers.google.com/console/help/#service_accounts)解释的服务帐户，然后使用我的 php 脚本中生成的私钥。

创建表并插入一些测试值时一切正常。我得到了表 ID，我可以从我的脚本中使用它。问题是我不知道如何从网络浏览器访问这些表。在我的 API 控制台中，使用统计数据显示得很好，但是当使用我的帐户登录到 Google Drive 时，我看不到任何表格。

如果可能的话，我应该在哪里访问它们？apps.googleusercontent.com 或 developer.gserviceaccount.com 帐户是否扮演任何角色来登录其他服务以通过网络访问？

我还关联了一个 api 键，但是在尝试查询表时出现 401 错误。

有什么提示吗？我现在感觉有点失落。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:57:27.530

您使用的是*服务帐户*对吗？因此，当您使用此帐户创建表时，此帐户将是表所有者。没有其他人有权查看此表。

当您使用您的个人帐户访问 Fusion Tables Web 界面时*，*您只会看到您使用个人帐户创建的表格。

如果您希望检查使用您的服务帐户创建的表，您必须使用 Google Drive API 和您的服务帐户凭据来授予对您的个人帐户的访问权限。此外，如果您希望公开您的表格（或任何其他类型的文档），您需要再次使用此 Google Drive API。在此处查看有关该主题的更多信息：

[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

**提示**：如果您想代表您的服务帐户实现一些您只需要一次的事情（因此无需在您的 web 应用程序中为它实现逻辑），我强烈建议您考虑使用[OAuth2 Playground](https://developers.google.com/oauthplayground/)。您可以在“设置”中设置您的服务帐户凭据，并代表您的服务帐户发出授权请求。非常有用的工具，无需编码。

# c# - C# 数据表循环更小的块

> ID：13903784
> 
> 赞同：0
> 
> 时间：2012-12-16T17:36:20.470
> 
> 标签：c#, datatable

目前我正在从数据库表（75681）中选择很多行，将它们放入数据表中，然后对每一行执行 foreach 查找

```
foreach (DataRow row in dt.Rows)
{
   //Updating record
} 
```

我正在尝试将其拆分为 500 或 1000 块以提高性能，但我不确定该怎么做？

我可以告诉 foreach 循环一次处理 500 个，还是我必须以某种方式将数据表拆分为 500 个行块？

希望以上内容有意义！

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:43:04.560

> 目前我正在从数据库表（75681）中选择很多行，将它们放入数据表中，然后对每一行执行 foreach 查找

你为什么要在内存中实现所有记录？我希望不是这个循环。

> 还是我必须以某种方式将数据表拆分为 500 行块？

您只需将 DataReader 放入循环中，具体化为一个对象，然后在那里处理。我想到了 Parallels 框架。

# c++ - 使用 GCC 和 C++11 实现类型“long double”

> ID：13903785
> 
> 赞同：6
> 
> 时间：2012-12-16T17:36:31.823
> 
> 标签：c++, double

我尝试搜索有关 long double 的信息，到目前为止，我了解编译器的实现方式不同。

在 Ubuntu (XUbuntu) Linux 12.10 上使用 GCC 时，我得到这个：

```
double PId = acos(-1);
long double PIl = acos(-1);
std::cout.precision(100);

std::cout << "PId " << sizeof(double) << " : " << PId << std::endl;
std::cout << "PIl " << sizeof(long double)  << " : " << PIl << std::endl; 
```

输出：

```
PId 8  : 3.141592653589793115997963468544185161590576171875
PIl 16 : 3.141592653589793115997963468544185161590576171875 
```

任何人都明白为什么他们输出（几乎）相同的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T17:44:05.090

根据[acos 的参考](http://www.cplusplus.com/reference/cmath/acos/)`long double`，只有将 a 传递给它才会返回`long double`。您还必须`std::acos`像狒狒建议的那样使用。这对我有用：

```
#include <cmath>
#include <iostream>

int main() {

  double PId = acos((double)-1);
  long double PIl = std::acos(-1.0l);
  std::cout.precision(100);

  std::cout << "PId " << sizeof(double) << " :  " << PId << std::endl;
  std::cout << "PIl " << sizeof(long double)  << " : " << PIl << std::endl;
} 
```

输出：

```
PId 8  : 3.141592653589793115997963468544185161590576171875
PIl 12 : 3.14159265358979323851280895940618620443274267017841339111328125

         3.14159265358979323846264338327950288419716939937510582097494459 
```

最后一行不是输出的一部分，它包含 pi 到此精度的正确数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T18:25:50.210

要获得正确的有效位数，请使用[`std::numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits). 在 C++11 中，我们有[`digits10`](http://en.cppreference.com/w/cpp/types/numeric_limits/digits10)十进制有效数字（与[`digits`](http://en.cppreference.com/w/cpp/types/numeric_limits/digits)给出有效*位*相反）。

```
#include <cmath>
#include <iostream>
#include <limits>

int
main()
{
  std::cout.precision(std::numeric_limits<float>::digits10);
  double PIf = acos(-1.0F);
  std::cout << "PIf " << sizeof(float) << " :  " << PIf << std::endl;

  std::cout.precision(std::numeric_limits<double>::digits10);
  double PId = acos(-1.0);
  std::cout << "PId " << sizeof(double) << " :  " << PId << std::endl;

  std::cout.precision(std::numeric_limits<long double>::digits10);
  long double PIl = std::acos(-1.0L);
  std::cout << "PIl " << sizeof(long double)  << " : " << PIl << std::endl;
} 
```

在 x86_64 linux 上，我得到：

```
PIf 4 :  3.14159
PId 8 :  3.14159265358979
PIl 16 : 3.14159265358979324 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T17:43:31.787

尝试：

```
long double PIl = std::acos(-1.0L); 
```

这会让你传递一个 long double 而不仅仅是一个被转换的 int。

请注意，无论如何，大多数这些数字都是垃圾。如果您将数字与真实 PI 进行比较，则使用 8 字节双精度数可以获得 15 个精度数

```
3.1415926535897932384626433 
```

您会看到只有前 15 个数字适合。

如评论中所述，您可能不会获得双倍的精度，因为实现可能只使用 80Bit 表示，然后取决于它为尾数保留多少位。

# mongodb - MongoDB、sort() 和分页

> ID：13903788
> 
> 赞同：1
> 
> 时间：2012-12-16T17:36:54.167
> 
> 标签：mongodb, sorting, pagination

我知道已经有一些使用 mongo 的分页模式（在少数文档上跳过（），在许多文档上进行范围查询），但在我的情况下，我需要实时排序。

## 更新：

为了清楚起见，我将改变问题点。我可以这样查询吗：

db.collection.find().sort({key: 1}).limit(n).sort({key: -1}).limit(1)

要点是按“通常”顺序对查询进行排序，限制返回的数据集，然后通过排序将其反转以获得分页数据的最后一个索引。我尝试了这种方法，但似乎 mongo 以某种方式优化了查询并忽略了第一个 sort() 运算符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:19:34.937

我在试图理解你的问题时遇到了很大的问题。

据我所知，当用户刷新页面时，比如 6 小时后，它不仅应该显示那里的结果，还应该显示现在的结果。

正如@JohnnyHK 所说，MongoDB 会自然地进行“实时”排序，这就是这种情况，而 MongoDB，因为您的查询会给您返回正确的结果。

现在我认为您可能试图在这里解决的一个问题（问题需要大量澄清）是由于数据更改，`_id`您最后看到的可能不再真正代表页码等，甚至不再代表信息的多样性，即你最后`_id`看到的实际上是第 13 页的一半。

这些事情你可能会花费更多的时间和性能来尝试解决，而不仅仅是让用户了解他们已经 AFAK 很长时间了。

### 编辑

啊哈，我想我明白了你现在想要做什么，你试图通过同时获取页面和列表中的最后一项来偷偷摸摸。不幸的是，就像 SQL 一样，这是不可能的。即使排序像那样工作，排序也不会像它应该的那样运行，因为您只能在单个字段上以一种方式排序。

但是，为了将来参考，该`sort()`函数正是游标上的函数，直到您通过开始迭代它来实际打开游标，`sort()`多次调用只会覆盖游标属性。

恐怕这必须通过两个查询来完成，因此您首先获取您的页面，然后是客户端（我认为您正在寻找该页面的最大值）滚动记录以找到最后一个`_id`或只是进行第二次查询得到最后一个`_id`。它应该是超级杜帕快。

# css - 将列表项中的文本顶部与背景图像对齐

> ID：13903800
> 
> 赞同：0
> 
> 时间：2012-12-16T17:38:11.123
> 
> 标签：css

我正在尝试将[左侧导航中的列表项中](http://www.inside-guides.co.uk/brentwood/pages/advertise.html)的文本设置为每个图像的顶部，无论是单行还是双行，但无法使其正常工作。

这是css和一个示例背景图像li：

```
.benefits li 
{font-size: 16px;
padding-left: 25px;
line-height: 2.1;
}

li.social {
background:url("/images/users.png") 0% 50% no-repeat;
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:47:36.800

将您的`li`标签 CSS 更新为：

```
url("/images/megaphone.png") 0% 0% no-repeat; 
```

那将是 50% 到 0%。

或者，类似`0.4em`这样的图标与文本更好地对齐。

```
url("/images/megaphone.png") 0% .4em no-repeat; 
```

# python - 在 Python 中通过“引用”传递

> ID：13903802
> 
> 赞同：0
> 
> 时间：2012-12-16T17:38:35.137
> 
> 标签：python, c, reference

很抱歉再次重复同样的事情，但我已经搜索过，但我仍然无法解决我的问题......

如果我想更改单个“int”值，我必须创建一个列表吗？一团糟。它在 C 中更舒服......（如 void function(int a, b, c, *d, *e, *f)）

这就是我想要做的（我必须改变“d”，“e”，“f”）：

```
d = 4
e = 9
f = 11
def function(a,b,c,d,e,f)
   a = something
   b = something
   c = 1
   d = 2
   e = 3
   f = 4 
```

说了这么多，我是否必须创建字典或列表来处理简单的数字？我还是个新手，但我想知道最近困扰我的这个问题的最佳解决方案是什么。

感谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T17:41:44.167

是的。因为 python 可以简单地返回一个元组，所以您可以使用它来更改多个值：

```
d = 4
e = 9
f = 11
def function(a,b,c)
   a = something
   b = something
   c = 1
   d = 2
   e = 3
   f = 4
   return (d, e, f)

d, e, f = function(d, e, f) 
```

由于通过引用传递主要用于（至少在 C 中）来解决您不能从函数返回多个值的事实，因此您不需要*在*Python 中通过引用传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:41:31.070

[SO上](https://stackoverflow.com/questions/534375/passing-values-in-python)有一个问题（和答案） ，它解释了关于将对象作为参数传递的知识。

关于您的代码，您始终可以在 a 中返回这些值`tuple`并将它们分配给全局命名空间中 thos 对象的引用，同样`return (d, e, f)`：现在要将它们分配给对象中的引用，您可以使用序列解包，例如`d, e, f = function(params)`

# django - URL调度程序：如何传递不同长度的变量

> ID：13903805
> 
> 赞同：0
> 
> 时间：2012-12-16T17:38:46.523
> 
> 标签：django, django-views, django-urls

我想将一个变量从请求的 url 传递给一个视图。使用预定义的可变长度或只是 ja 数字它不会成为问题，但现在我要传递的变量的长度可能不同。

我想要这样的东西

```
url(r'^test/(?P<my_var>\d+)/$', views.Vote), 
```

但`my_var`应该可以，例如`hello`，`blablabla`或`where_am_i_going`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:42:20.003

URL 模式是正则表达式，因此只需使用一个捕获您期望的值的模式。从您的描述看来，您想匹配一个或多个字母数字字符或下划线。在这种情况下，模式将如下所示：

```
url(r'^test/(?P<my_var>\w+)/$', views.Vote), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:43:14.633

尝试：

```
url(r'^test/(?P<my_var>\w+)/$', views.Vote), 
```

# ios - 当有人滚动到 UICollectionView 的顶部时，如何调用方法？

> ID：13903808
> 
> 赞同：1
> 
> 时间：2012-12-16T17:39:00.953
> 
> 标签：ios, scroll, uicollectionview

我正在尝试在我的 UICollectionView 顶部“上方”添加内容，如果用户向上滚动足够远，则让代码调用一个方法。

它类似于“拉动刷新”，但我希望它呈现另一个视图而不是刷新数据。

当您在不同列表之间“向上”和“向下”导航时，会在“清除”应用程序中发现此行为。

在此先感谢您的帮助。

编辑：我发现了如何使用这个添加上面的内容：

```
UIView *topview = [[UIView alloc] initWithFrame:CGRectMake(0,-480,320,480)];
[self.tableView addSubview:topview]; 
```

现在我需要弄清楚如何响应用户滚动超出集合视图的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:31:24.693

我想你会发现 UICollectionView 很大程度上基于 UITableView。您是否尝试过利用类似于旧的自制拉动刷新类的方法？类似于以下内容：

```
if (isDragging && scrollView.contentOffset.y < 0) 
```

# sharepoint - SharePoint 附件

> ID：13903809
> 
> 赞同：1
> 
> 时间：2012-12-16T17:39:10.573
> 
> 标签：sharepoint

谁能告诉我是否可以获取附件在 SharePoint 上上传的日期？我知道如何使用 GetAttachmentCollection() 获取附件的链接。SharePoint 是否保存添加文件的日期？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:44:21.563

是的，SP 会保存此信息，但在 SP 客户端 API（WS、CSOM）中无法访问它。附件[`SPFile`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.aspx)由 SP 服务器 API 公开，可[通过其 Web 相对 URL 检索，](https://stackoverflow.com/questions/1334893/sharepoint-spattachmentcollection-a-collection-of-what-exactly)并且[`GetFile`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.getfile.aspx)您需要其属性之一：[`TimeLastModified`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.timelastmodified.aspx).

看到[`GetAttachmentsCollection`](http://msdn.microsoft.com/en-us/library/lists.lists.getattachmentcollection.aspx)，我猜你正在使用 WS。您可以将自定义[ASMX](http://msdn.microsoft.com/en-us/library/ms464040.aspx)或[WCF](http://msdn.microsoft.com/en-us/library/ff521581.aspx) WS 部署到您的 SP 场，仅提供附件 URL 的上传时间。您甚至可以创建自己的替代方法，该`GetAttachmentsCollection`方法返回除了附件 URL 之外您需要的所有附件属性。前一个选项将尽可能减少您必须编写依赖于 OOTB 功能的代码量，后一个选项将为您提供更好的性能，从而节省总的客户端-服务器调用计数。

如果您无法部署场解决方案，则可以[使用“隐藏”为 ASPX 页面的沙盒解决方案部署](http://www.codeproject.com/Articles/327919/Custom-Webservices-with-Sharepoint-365)返回 JSON 或 XML 的服务，这样您就可以在不涉及场管理员的情况下设计此类应用程序。

# mysql - 如何计算不同的行

> ID：13903816
> 
> 赞同：0
> 
> 时间：2012-12-16T17:39:34.817
> 
> 标签：mysql

```
SELECT
    HOUR (`Timestamp`) AS HOUR,
    COUNT(*) AS Alarms

FROM
    `alarms`
WHERE
    `Siteindex` IN ('4, 5, 8, 10, 11, 15')
AND `Datestamp` = '2012-11-07'
GROUP BY
    HOUR (`Timestamp`); 
```

此代码仅在每个 id 来自`IN ('4, 5, 8, 10, 11, 15')`have时才有效`Datestamp = '2012-11-07'`，但如何仅计算那些拥有它的人？

例如上面的代码返回`NULL`是因为 2012-11-07 中只有 15 行有一些行，但我需要它不理会其他行并返回所有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:07:52.617

您的`where`条款很可能是问题所在

```
WHERE `Siteindex` IN ('4, 5, 8, 10, 11, 15') 
```

根据 的类型`siteindex`，您应该将其更改为

```
WHERE `Siteindex` IN (4, 5, 8, 10, 11, 15) 
```

或者

```
WHERE `Siteindex` IN ('4', '5', '8', '10', '11', '15') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:47:39.017

我不完全清楚你在问什么，但如果你只是想计算有多少行符合你的搜索条件，我会尝试撒谎：

```
SELECT COUNT(*)
FROM alarms
WHERE Siteindex IN ('4,5,8,10,11,15') AND Datestamp = '2012-11-07'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:11:34.163

尝试这个

```
 SELECT  HOUR (`Timestamp`) AS HOUR,

  COUNT(Siteindex) AS Al

 FROM ( SELECT Siteindex FROM alarms WHERE `Siteindex` IN (4, 5, 8, 10, 11, 15))
`alarms`
 WHERE
  `Datestamp` = '2012-11-07'
GROUP BY
HOUR ; 
```

这将只计算您拥有的那些 ID。

# php - 如何在我的 MVC PHP 应用程序中从 public_html 访问我的上层根文件夹

> ID：13903817
> 
> 赞同：1
> 
> 时间：2012-12-16T17:39:46.730
> 
> 标签：php, .htaccess, root, public

我有一个 Web 应用程序，我的所有文件夹都在 public_html 下，如下所示：

public_html
  -pages
  -templates
  -includes
  -styles
  -scripts
  -images
   index.php

所以我的网站在实时服务器上运行完美（使用 php 5.2.17 版本）。但我想改用面向对象的方法并改变了一切，并试图从 zend 框架结构模型中学习和启发，所以我改变了我的文件夹结构和它在本地运行完美，新结构是这样的：

应用程序
  -models
  -controllers
  -views
  -config
  -layouts
    -templates
library
  -functions
public_html
  -styles
  -scripts
  -images
   index.php

所以，我将它转移到实时服务器，现在我的主应用程序不在根目录（public_html）中，当然我不能从 public_html 访问上层根文件夹（应用程序，库），当然也不能通过 ***url***访问 index.php 。
我可以包含它们，但我需要通过锚标记中的***url***访问，例如在应用程序文件夹内的视图文件夹中访问我的 login.php。此外，需要通过 url 从我的脚本文件夹访问控制器文件夹（用于 ajax 调用等）。
我已经读到我需要使用 .htaccess 文件，但我不知道我应该使用什么规则，我应该把它放在哪里以及如何。请有人帮助我，因为我需要它。请告诉我该怎么办？
问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:56:58.460

你错了。仔细看看任何 MVC 框架（例如提到 Zend）。一切都通过公用文件夹中的 index.php。您不需要通过 URL 访问公共文件夹下的任何内容（实际上出于安全原因应该禁止访问）。您可以通过内部程序结构和重写规则访问控制器的操作。通常，每个请求都会被强制路由到 index.php，然后您的应用程序会决定它会进一步去哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:57:36.497

查看 MVC 框架 CodeIgniter 在其自己的[`index.php`文件](https://github.com/adityamenon/CodeIgniter/blob/develop/index.php)中处理文件路由的方式：

```
$system_path = '系统';
$application_folder = '应用程序';
$view_folder = '';

/*
 * ------------------------------------------------- --------------
 *解决系统路径以提高可靠性
 * ------------------------------------------------- --------------
 */

    // 为 CLI 请求正确设置当前目录
    如果（定义（'STDIN'））
    {
        chdir(目录名(__FILE__));
    }

    if (($_temp = realpath($system_path)) !== FALSE)
    {
        $system_path = $_temp.'/';
    }
    别的
    {
        // 确保有一个斜杠
        $system_path = rtrim($system_path, '/').'/';
    }

    // 系统路径是否正确？
    如果（！is_dir（$system_path））
    {
        header('HTTP/1.1 503 服务不可用。', TRUE, 503);
        exit('您的系统文件夹路径似乎设置不正确。请打开以下文件并更正：'.pathinfo(__FILE__, PATHINFO_BASENAME));
    }

/*
 * ------------------------------------------------- ------------------
 * 现在我们知道了路径，设置主路径常量
 * ------------------------------------------------- ------------------
 */
    // 这个文件的名字
    定义（'SELF'，路径信息（__FILE__，PATHINFO_BASENAME））；

    // 系统文件夹路径
    定义('BASEPATH', str_replace('\\', '/', $system_path));

    // 前端控制器的路径（这个文件）
    定义('FCPATH', str_replace(SELF, '', __FILE__));

    // “系统文件夹”的名称
    定义（'SYSDIR'，修剪（strrchr（修剪（BASEPATH，'/'），'/'），'/'））；

    // “应用程序”文件夹的路径
    if (is_dir($application_folder))
    {
        if (($_temp = realpath($application_folder)) !== FALSE)
        {
            $application_folder = $_temp;
        }

        定义('APPPATH', $application_folder.'/');
    }
    别的
    {
        if ( !is_dir(BASEPATH.$application_folder.'/'))
        {
            header('HTTP/1.1 503 服务不可用。', TRUE, 503);
            exit('您的应用程序文件夹路径似乎设置不正确。请打开以下文件并更正：'.SELF);
        }

        定义('APPPATH', BASEPATH.$application_folder.'/');
    }

    // “views”文件夹的路径
    如果（！is_dir（$view_folder））
    {
        if ( !empty($view_folder) && is_dir(APPPATH.$view_folder.'/'))
        {
            $view_folder = APPPATH.$view_folder;
        }
        elseif ( !is_dir(APPPATH.'views/'))
        {
            header('HTTP/1.1 503 服务不可用。', TRUE, 503);
            exit('您的视图文件夹路径似乎设置不正确。请打开以下文件并更正：'.SELF);
        }
        别的
        {
            $view_folder = APPPATH.'views';
        }
    }

    if (($_temp = realpath($view_folder)) !== FALSE)
    {
        $view_folder = realpath($view_folder).'/';
    }
    别的
    {
        $view_folder = rtrim($view_folder, '/').'/';
    }

    定义（'VIEWPATH'，$view_folder）；

```

您不应该依赖`.htaccess`，您可能会遇到`mod_rewrite`不可用的环境的问题。

此外，不要`views/`从超链接加载目录中的文件。将所有这些对页面的请求从 index.php 路由到您的`controllers/`.，*然后*使用这些类来加载文件。再次仔细查看 CodeIgniter 的源代码以获取想法。

# rman - 使用 rman 备份 oracle 数据库时出错

> ID：13903823
> 
> 赞同：0
> 
> 时间：2012-12-16T17:40:22.850
> 
> 标签：rman

我有 11G Release 1 的 RMAN 备份；备份是完整备份意味着它包括控制文件、数据文件和归档日志。数据库名称是 ORCL，操作系统是 windows XP。

现在我想在新机器上恢复这个备份，新机器也是windows XP，目录结构与旧机器100%相同。

我在新机器上做什么；我安装 11 G R1 并创建名为 ORCL 的数据库，并将新机器上的 rman 备份文件夹复制到与旧机器上相同的目录中。

我在恢复数据库时遇到了问题 (RMAN-03002)。

下面按以下步骤。

```
C:\> sqlplus sys/kris@orcl as sysdba
Sql> shutdown immediate;
Sql> exit;
C:\> set oracle_sid = orcl
C:\> rman
RMAN> connect target orcl
RMAN> startup nomount;
RMAN> restore controlfile from autobackup;

Starting restore at 16-DEC-12
using target database control file instead of recovery catalog
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=152 device type=DISK

recovery area destination: D:\app\administrator\flash_recovery_area
database name (or database unique name) used for search: ORCL
channel ORA_DISK_1: AUTOBACKUP D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\AUT
OBACKUP\2012_12_12\O1_MF_S_801849930_8DJQHTTW_.BKP found in the recovery area
AUTOBACKUP search with format "%F" not attempted because DBID was not set
channel ORA_DISK_1: restoring control file from AUTOBACKUP D:\APP\ADMINISTRATOR\
FLASH_RECOVERY_AREA\ORCL\AUTOBACKUP\2012_12_12\O1_MF_S_801849930_8DJQHTTW_.BKP
channel ORA_DISK_1: control file restore from AUTOBACKUP complete
output file name=D:\APP\ADMINISTRATOR\ORADATA\ORCL\CONTROL01.CTL
output file name=D:\APP\ADMINISTRATOR\ORADATA\ORCL\CONTROL02.CTL
output file name=D:\APP\ADMINISTRATOR\ORADATA\ORCL\CONTROL03.CTL
Finished restore at 16-DEC-12

RMAN> alter database mount;

database mounted
released channel: ORA_DISK_1

RMAN> catalog recovery area;

Starting implicit crosscheck backup at 16-DEC-12
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=152 device type=DISK
Crosschecked 5 objects
Finished implicit crosscheck backup at 16-DEC-12

Starting implicit crosscheck copy at 16-DEC-12
using channel ORA_DISK_1
Finished implicit crosscheck copy at 16-DEC-12

searching for all files in the recovery area
cataloging files...
cataloging done

List of Cataloged Files
=======================
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_12\O
1_MF_1_1450_8DK6YO0M_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1451_8DLPSYDY_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1452_8DLVBJZ7_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1452_8DM0LM1L_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1453_8DM0LM1L_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1454_8DM0NQ8X_.ARC
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\AUTOBACKUP\2012_12_12\O
1_MF_S_801849930_8DJQHTTW_.BKP

searching for all files in the recovery area

List of Files Unknown to the Database
=====================================
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1453_8DLXCJOB_.ARC

Do you really want to catalog the above files (enter YES or NO)? Y
cataloging files...
no files cataloged

List of Files Which Where Not Cataloged
=======================================
File Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\ARCHIVELOG\2012_12_13\O
1_MF_1_1453_8DLXCJOB_.ARC
  RMAN-07517: Reason: The file header is corrupted

RMAN> list backup;

List of Backup Sets
===================

BS Key  Size       Device Type Elapsed Time Completion Time
------- ---------- ----------- ------------ ---------------
512     245.35M    DISK        00:00:39     12-DEC-12
        BP Key: 512   Status: AVAILABLE  Compressed: NO  Tag: TAG20121212T160059

        Piece Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2012
_12_12\O1_MF_ANNNN_TAG20121212T160059_8DJQ7OF3_.BKP

  List of Archived Logs in backup set 512
  Thrd Seq     Low SCN    Low Time  Next SCN   Next Time
  ---- ------- ---------- --------- ---------- ---------
  1    1440    487654314  09-DEC-12 487695982  10-DEC-12
  1    1441    487695982  10-DEC-12 487719639  10-DEC-12
  1    1442    487719639  10-DEC-12 487741536  10-DEC-12
  1    1443    487741536  10-DEC-12 487741634  10-DEC-12
  1    1444    487741634  10-DEC-12 487771824  10-DEC-12
  1    1445    487771824  10-DEC-12 487803737  12-DEC-12
  1    1446    487803737  12-DEC-12 487810247  12-DEC-12
  1    1447    487810247  12-DEC-12 487819910  12-DEC-12
  1    1448    487819910  12-DEC-12 487837944  12-DEC-12

BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
513     Full    1.94G      DISK        00:03:18     12-DEC-12
        BP Key: 513   Status: AVAILABLE  Compressed: NO  Tag: TAG20121212T160150

        Piece Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2012
_12_12\O1_MF_NNNDF_TAG20121212T160150_8DJQ92L5_.BKP
  List of Datafiles in backup set 513
  File LV Type Ckp SCN    Ckp Time  Name
  ---- -- ---- ---------- --------- ----
  1       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSTEM01.D
BF
  2       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSAUX01.D
BF
  3       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\UNDOTBS01.
DBF
  4       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\USERS01.DB
F
  5       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\EXAMPLE01.
DBF
  6       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_SMILE.
DBF
  7       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_GENERA
L.DBF
  8       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_EMR.DB
F
  9       Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_DIAGNO
STICS.DBF
  10      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_PHARMA
CY.DBF
  11      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_PATIEN
T.DBF
  12      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_ACCOUN
T.DBF
  13      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_INVENT
ORY.DBF
  14      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_HR.DBF

  15      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_DUMMY.
DBF
  16      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_AUDIT.
DBF
  17      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_FACILI
TIES.DBF
  19      Full 487837993  12-DEC-12 D:\APP\ADMINISTRATOR\ORADATA\ORCL\HMS_COMMON
.DBF

BS Key  Size       Device Type Elapsed Time Completion Time
------- ---------- ----------- ------------ ---------------
514     222.00K    DISK        00:00:06     12-DEC-12
        BP Key: 514   Status: AVAILABLE  Compressed: NO  Tag: TAG20121212T160520

        Piece Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\BACKUPSET\2012
_12_12\O1_MF_ANNNN_TAG20121212T160520_8DJQHGS1_.BKP

  List of Archived Logs in backup set 514
  Thrd Seq     Low SCN    Low Time  Next SCN   Next Time
  ---- ------- ---------- --------- ---------- ---------
  1    1449    487837944  12-DEC-12 487838190  12-DEC-12

BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
515     Full    12.17M     DISK        00:00:00     12-DEC-12
        BP Key: 515   Status: AVAILABLE  Compressed: NO  Tag: TAG20121212T160530

        Piece Name: D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\AUTOBACKUP\201
2_12_12\O1_MF_S_801849930_8DJQHTTW_.BKP
  SPFILE Included: Modification time: 12-DEC-12
  SPFILE db_unique_name: ORCL
  Control File Included: Ckp SCN: 487838210    Ckp time: 12-DEC-12

RMAN> run {
              Set until 1450   …. [sequence number taking from list backup command]
              Restore database;
              Recover database;
          }

executing command: SET until clause

Starting restore at 16-DEC-12
using channel ORA_DISK_1

channel ORA_DISK_1: starting datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
channel ORA_DISK_1: restoring datafile 00001 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\SYSTEM01.DBF
channel ORA_DISK_1: restoring datafile 00002 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\SYSAUX01.DBF
channel ORA_DISK_1: restoring datafile 00003 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\UNDOTBS01.DBF
channel ORA_DISK_1: restoring datafile 00004 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\USERS01.DBF
channel ORA_DISK_1: restoring datafile 00005 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\EXAMPLE01.DBF
channel ORA_DISK_1: restoring datafile 00006 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_SMILE.DBF
channel ORA_DISK_1: restoring datafile 00007 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_GENERAL.DBF
channel ORA_DISK_1: restoring datafile 00008 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_EMR.DBF
channel ORA_DISK_1: restoring datafile 00009 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_DIAGNOSTICS.DBF
channel ORA_DISK_1: restoring datafile 00010 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_PHARMACY.DBF
channel ORA_DISK_1: restoring datafile 00011 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_PATIENT.DBF
channel ORA_DISK_1: restoring datafile 00012 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_ACCOUNT.DBF
channel ORA_DISK_1: restoring datafile 00013 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_INVENTORY.DBF
channel ORA_DISK_1: restoring datafile 00014 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_HR.DBF
channel ORA_DISK_1: restoring datafile 00015 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_DUMMY.DBF
channel ORA_DISK_1: restoring datafile 00016 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_AUDIT.DBF
channel ORA_DISK_1: restoring datafile 00017 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_FACILITIES.DBF
channel ORA_DISK_1: restoring datafile 00019 to D:\APP\ADMINISTRATOR\ORADATA\ORC
L\HMS_COMMON.DBF
channel ORA_DISK_1: reading from backup piece D:\APP\ADMINISTRATOR\FLASH_RECOVER
Y_AREA\ORCL\BACKUPSET\2012_12_12\O1_MF_NNNDF_TAG20121212T160150_8DJQ92L5_.BKP
channel ORA_DISK_1: piece handle=D:\APP\ADMINISTRATOR\FLASH_RECOVERY_AREA\ORCL\B
ACKUPSET\2012_12_12\O1_MF_NNNDF_TAG20121212T160150_8DJQ92L5_.BKP tag=TAG20121212
T160150
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:04:55
Finished restore at 16-DEC-12

Starting recover at 16-DEC-12
using channel ORA_DISK_1
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of recover command at 12/16/2012 14:13:39
ORA-19698: D:\APP\ADMINISTRATOR\ORADATA\ORCL\REDO01.LOG is from different databa
se: id=1329913169, db_name=ORCL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T13:58:54.740

是的，我知道这有点太晚了，但看起来重做日志（以及它可能来自同一目录的邻居）刚刚从您之前从那里的其他数据库进行的实验中停滞不前。

# assembly - 汇编程序有人可以解释部分代码吗

> ID：13903826
> 
> 赞同：0
> 
> 时间：2012-12-16T17:40:30.883
> 
> 标签：assembly, x86, tasm

也许有人可以解释这段代码是做什么的：

```
 MOV SI,80h     
    XOR DI,DI      
    MOV BL,[SI]    
    INC SI         

    MOV AH,9
    LEA DX,info     
    INT 21h

    OR BL,BL        
    JZ be_arg       

    INC SI
    JMP su_arg      

be_arg:     
    MOV AH,9
    LEA DX,input1
    INT 21h

...
su_arg:
    XOR DI,DI
vej:
    MOV AL,[SI]
    CMP SI,100h
    JZ vej_j

    CMP SI,100h
    JZ vej_j

    MOV [failas+DI],AL

    INC SI
    INC DI
    JMP short vej

vej_j:
    JMP input_juz 
```

那里

```
 failas DB 80h DUP(0) 
```

据我了解，可以在运行程序时读取一些可以编写的参数，然后它会转到“su_arg”，还是我错了？如果我是对的，例如它可以是什么？

如果有人可以详细解释此代码，那就太好了。

PS 使用汇编器 Tasm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:48:59.153

现在谁在乎 DOS 做了什么？好吧，你必须知道，才能理解这段代码。如果您以“myprog foo”启动程序，则“foo”是“命令行参数”。DOS 把它放在 PSP（程序段前缀）的后半部分。地址 [80h] 是命令行参数的总（字节）计数。代码的第一部分将此值放入`bl`. 然后你打印一些东西——我们不知道是什么，因为你没有给我们看！`or bl, bl`不会改变 中的值，`bl`它只是设置标志。如果该值为零，则跳转到可能打印“未给出命令行参数”等的部分。如图所示，它然后下降到`su_arg:`- 也许是`...`表示一些代码做一些更明智的事情。此时，您将 PSP 的整个剩余部分复制到位于`failas`. 我们有“计数” `bl`。我们还知道在命令行参数的末尾会有一个回车（十进制 13 或 0Dh）。您可能想用“$”覆盖 CR。能够用 int 21h/9 显示它。但是不，您复制了 PSP 的整个其余部分。也许这对你打算用它做的任何事情都没关系。相当可怕的代码 - 充其量是 C+。如果你的教练给了你这个，解雇他！:)

# vb.net - 模拟控制+按键事件

> ID：13903829
> 
> 赞同：0
> 
> 时间：2012-12-16T17:40:37.973
> 
> 标签：vb.net

我不时使用代码来模拟关键事件。
像这样：

```
Dim kea As New KeyEventArgs(Keys.N)
DataGridView1_KeyDown(sender, kea) 
```

那个作品不错
现在我需要同样的方式来发送 Ctrl+N。但我找不到如何做到这一点。

我尝试什么...

```
Dim kea As New KeyEventArgs(Keys.N And Keys.ControlKey) 
```

但这不想按预期工作。

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:56:59.553

[正如您在MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.keyeventargs.aspx)中所读到的那样，您应该将键与按位 OR 运算符结合起来：

```
Dim kea As New KeyEventArgs(Keys.N Or Keys.Control) 
```

# button - 编辑按钮未显示在前端 joomla 模板 Skylab 中

> ID：13903837
> 
> 赞同：0
> 
> 时间：2012-12-16T17:41:39.373
> 
> 标签：button, joomla, frontend

任何人都可以帮助我在 Joomla 2.5 前端显示中获得编辑按钮。我正在使用模板天空实验室。

尝试替换 com_content/article 中的文件。可以用超级用户登录。所有acl都是正确的。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:04:26.473

发生这种情况有 2 个“主要原因”

1.  升级 Joomla 版本（有时会破坏数据库）
2.  您的模板不支持前端编辑，或者已损坏。

您的模板应该包含或类似的东西。

```
user->authorize('com_content', 'publish', 'content', 'all')) : ?> 
```

值得在 Joomla 的论坛上发布这个问题，因为他们通常和这里的人一样好。

# operating-system - 我们如何进行上下文切换？

> ID：13903845
> 
> 赞同：0
> 
> 时间：2012-12-16T17:42:41.230
> 
> 标签：operating-system, process

我有一个问题集问题，我得到了解决方案，但不太了解细节。

问题是： **我们如何进行上下文切换？**

答案是：

1.  第 1 步：￼￼保存进程 A 的上下文
2.  步骤 2：恢复进程 B 的上下文
3.  第三步：继续执行进程B

我想知道保存和恢复进程 A 和 B 的上下文是什么意思？

在看答案之前，我要说的是保存 A 的内存映射，恢复 B 的内存映射，但是除了保存和恢复的内存映射之外，还有什么东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:48:31.690

简而言之，进程切换可以分为两部分，首先切换当前运行的`PCB`上下文寄存器（已保存和通用），然后从队列中找到最高优先级的进程并恢复它，复制它之前切换的寄存器并返回到它的返回地址. 如果队列之间没有其他进程要运行，则核心处于空闲状态或运行节电周期。如果它是多处理器，也应该注意，这意味着当前进程的上下文切换发生在一个内核上，然后切换到其他内核上运行。

[SOlink](https://stackoverflow.com/questions/12630214/context-switch-internals)上有关上下文切换的非常好的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:07:40.783

AFAIK 保存的数据是所谓的 PCB（过程控制块）。究竟存储什么以及如何存储取决于操作系统。但通常除了“内存映射”之外，PCB 还包含寄存器值（尤其是指令指针）、指向父进程的指针、I/O 信息等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:51:11.500

上下文切换仅由主机操作系统负责，它对进程或代码编写者是透明的，除非您正在编写一些设备驱动程序等。

假设有 100 个进程正在运行，操作系统会根据其优先级算法自动选择适当的进程，并在多 CPU 可用的情况下调度一个或多个进程。

当您编写程序时，您编写的程序就好像您的程序可以毫无障碍地运行一样。

只需复习操作系统概念(http://en.wikipedia.org/wiki/Operating_system) 你就会明白。

# android - android: ImageView 不显示

> ID：13903849
> 
> 赞同：0
> 
> 时间：2012-12-16T17:42:48.760
> 
> 标签：android, xml, imageview

我正在使用这种布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:textColor="#372c24" />

    <View
        android:id="@+id/space"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:background="@android:color/transparent" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:orientation="horizontal" 
        android:background="@drawable/shape_popup">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2" />
        <ImageView
            android:contentDescription="@string/app_name"
            android:id="@+id/rateStar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:background="@drawable/image" />
    </LinearLayout>

</LinearLayout> 
```

但是图像不显示，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:47:09.423

**ImageBiew**在获得一些源之前不会显示任何内容，因此请使用它

```
android:src="@drawable/image" 
```

还可以修改您的 textview 宽度，因为它在您赋予权重时是不需要的。

```
 <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:53:28.743

当您使用该属性时：

```
android:background="" 
```

它通常会寻找类似颜色的东西，例如#FFFF0000 <- Red，它不会用图像填充容器。

要将图像以适当的方式放入容器中，您需要使用以下属性：`android:src="@drawable/..."`

有了这个你也可以使用`android:scaleType="..."`

更改容器内图像的不同比例类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:49:28.760

你应该使用 android:src 而不是 android:background 像这样：

```
<ImageView
        android:contentDescription="@string/app_name"
        android:id="@+id/rateStar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:src="@drawable/image" /> 
```

编辑：您还应该将 android:layout_width 设置为 0，因为您使用的是 weight 属性：

```
 <ImageView
        android:contentDescription="@string/app_name"
        android:id="@+id/rateStar"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:src="@drawable/image" /> 
```

# javascript - 在 d3.js 中将节点和链接转换为分层树

> ID：13903854
> 
> 赞同：4
> 
> 时间：2012-12-16T17:43:09.407
> 
> 标签：javascript, html, d3.js, tree, force-layout

我有一个 JSON 表示一个图（在我的情况下也是一个树），看起来像这样：

```
{"directed": true, "graph": [], 
"nodes": [{"time": 4, "id": 4551308, "name": "Alto da Boa Vista"}, {"time": 7, "id": 4551309, "name": "Sumare"},
...
"links": [{"source": 0, "target": 36, "weight": 1}, 
{"source": 1, "target": 36, "weight": 1},
... 
```

为了使用它来构建像本例中那样的树， http: [//mbostock.github.com/d3/talk/20111116/force-collapsible.html](http://mbostock.github.com/d3/talk/20111116/force-collapsible.html)，我需要将此 JSON 转换为具有嵌套子节点的分层对象在父母中，如下所示：[https](https://github.com/mbostock/d3/wiki/Tree-Layout#wiki-tree) ://github.com/mbostock/d3/wiki/Tree-Layout#wiki-tree 。

D3 是否有一些内置函数可以将图形转换为树？或者您将如何从图形生成嵌套树 JSON 对象？

我在这个 jsFiddle 中有示例：http: [//jsfiddle.net/fccoelho/bFT8K/8/](http://jsfiddle.net/fccoelho/bFT8K/8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-22T14:00:50.120

好的，这是一个两部分的答案。

**第 1 部分：** D3 确实具有将数组转换为嵌套结构的内置功能。看看 d3.nest() 函数

*   API 文档：[https ://github.com/d3/d3/blob/master/API.md#nests](https://github.com/d3/d3/blob/master/API.md#nests)

这主要用于分层布局：Cluster、Pack、Partition、Treemap

**第 2 部分：** 如果您尝试实现与您发布的示例类似的布局，那么您无需对数据执行任何操作。该示例使用需要图形的强制布局。由于力布局可以处理任何形状的图形，而树只是遵循一些约束的图形，因此您无需进行任何转换。如果图表的形状恰好是一棵树，它看起来就像一棵树。

这应该足够好：

```
force
  .nodes(spread.nodes)
  .links(spread.links)
  .start(); 
```

# apache-karaf - karaf 日志不显示日期

> ID：13903856
> 
> 赞同：0
> 
> 时间：2012-12-16T17:43:26.230
> 
> 标签：apache-karaf

karaf 日志不显示日期（日月年），它只显示时间，是否应该进行任何配置以在 karaf 日志中显示日期和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:41:48.977

您可以在 etc 文件夹中找到登录 karaf 的配置。有问题的文件是 org.ops4j.pax.logging.cfg。这是一种 log4j 属性配置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T13:34:31.257

为了获得类似的默认格式`2019-08-07 15:15:04,349` ，您必须编辑 org.ops4j.pax.logging.cfg ：默认情况下，转换模式中的日期格式似乎是`%d{ABSOLUTE}`(HH:mm:ss) ：将其更改为`%d{ISO8601}`.

# javascript - Facebook JS API - 页面不断刷新

> ID：13903862
> 
> 赞同：0
> 
> 时间：2012-12-16T17:44:01.133
> 
> 标签：javascript, facebook, api

我在使用 Facebook JS SDK 登录时遇到了一些问题。

`window.location.reload();`好吧，当用户进入页面时，它会不断刷新 -`FB.Event.subscribe('auth.login'...`即使用户尚未登录，也会触发 in 。

这是我的脚本：

```
window.fbAsyncInit = function() {
    FB.init({
        appId   : '445298832195237', // App ID
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true  // parse XFBML
    });

    FB.Event.subscribe('auth.login', function(response) 
    {
        $.ajax({async: false,
                type: 'GET',
                url: 'http://hfyt.pl/fb_register.php',
                success: function(data)
                {
                    //alert(data); 
                    window.location.reload();
                }
            });
        });
    }; 
```

您可以在[http://hfyt.pl/](http://hfyt.pl/)现场试用（只需使用一些调试器取消注释 window.location.reload()）。我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:49:29.623

据我了解，这就是正在发生的事情：

1.  您的页面 DOM 加载
2.  JS SDK 异步加载
3.  加载后，它会检查登录状态
4.  在`connected`状态上，它会刷新页面，并执行步骤 1-4。重复

..这发生在每次页面加载时，而不仅仅是第一次。为了避免这种情况，我建议你..

*   要么将状态存储在页面刷新后幸存的东西中，即 localStorage
*   或重写您的代码，使 id 不依赖于 window.document.reload()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:36:25.023

我认为您可能需要使用 FB.getLoginStatus 来检查人们是否在页面加载时登录。但是，请避免任何重定向。 [https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

然后使用 FB.Event.subscribe 仅监听用户何时登录并且他们的响应发生变化。

```
FB.Event.subscribe('auth.authResponseChange', function(response) {  // reload here }); 
```

我想这样就可以了。

# licensing - 在 GPL linux 发行版中使用软件

> ID：13903863
> 
> 赞同：1
> 
> 时间：2012-12-16T17:44:01.340
> 
> 标签：licensing

我正在寻找不同类型的 linux 来运行小型 Web 服务器，但是我有一个问题，因为我对 GPL 的工作方式有点困惑。如果我有我自己创建的 PHP 脚本，等等......在 linux 服务器上运行，这些脚本会自动成为 GPL 的一部分，还是我可以随意使用这些脚本？如果我需要制作系统的副本，例如通过制作磁盘映像将其安装在我的另一台计算机上，该怎么办？这是否意味着我所有的工作都将成为 GPL 的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:07:33.340

首先，您的 Linux 系统很可能会运行 Apache，它不是根据 GPL 条款许可的，而是[Apache 许可](http://en.wikipedia.org/wiki/Apache_License)。Apache 本身不运行 PHP 脚本。事实上，很多功能是由第三方模块提供的，这也适用于 PHP，由 mod_php 处理。这些模块可以根据自己的许可证分发。并且 PHP 利用这个在[PHP 许可](http://en.wikipedia.org/wiki/PHP_License)条款下分发。PHP 许可证是不允许的（或非 copyleft），这意味着您可以在任何您希望的许可证下分发您的脚本，几乎没有限制，例如在您的产品中包含声明：

```
This product includes PHP software, freely available from <http://www.php.net/software/> 
```

所以基本上不会，你的软件不会以任何方式成为 GPL 的一部分。

# java - 如何从对象列表中知道更频繁出现的属性？

> ID：13903867
> 
> 赞同：1
> 
> 时间：2012-12-16T17:44:20.693
> 
> 标签：java, list, arraylist, count

我有一个机场的乘客列表，每个乘客都有一个目的地，我想知道出现频率更高的目的地。

该列表是java中的一个ArrayList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:35:06.300

类似于（在伪代码中）的东西：

```
Map<Destination, Integer> map = new HashMap<>();
for(Passenger passenger : list) {
  Destination dest = passenger.getDestination();
  int times = 0;
  if(map.hasKey(dest)) {
    times = map.get(dest);
  }
  map.put(dest, ++times);
}
Collections.sort(map.values()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:03:54.140

试试下面只用一个 for 循环优化的代码。

```
 package com.rais;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.rais.vo.Passenger;

/**
 * @author Rais.Alam
 * @date Dec 17, 2012
 */
public class Client
{

    public static void main(String[] args)
    {
        Client client = new Client();

    Passenger p1 = new Passenger("A", "USA");
    Passenger p2 = new Passenger("B", "USA");
    Passenger p3 = new Passenger("C", "UK");
    Passenger p4 = new Passenger("D", "UK");
    Passenger p5 = new Passenger("E", "UK");
    Passenger p6 = new Passenger("F", "UK");

    List<Passenger> passengers = new ArrayList<Passenger>();
    passengers.add(p1);
    passengers.add(p2);
    passengers.add(p3);
    passengers.add(p4);
    passengers.add(p5);
    passengers.add(p6);

    System.out.println(client.getMostVistedDestination(passengers));

}

public String getMostVistedDestination(List<Passenger> passengers)
{

    Map<String, Integer> tempMap = new HashMap<String, Integer>();

    int maxCount = 0;
    String dest = "";

    for (Passenger passenger : passengers)
    {
        int count = 1;
        if (tempMap.containsKey(passenger.getDestination()))
        {
            count = tempMap.get(passenger.getDestination()) + 1;
            if (maxCount < count)
            {
                maxCount = count;
                dest = passenger.getDestination();
            }

        }
        else if (maxCount == 0)
        {
            maxCount = count;
            dest = passenger.getDestination();

        }

        tempMap.put(passenger.getDestination(), count);

    }

    return dest;

}

} 
```

这是Passenger.java

```
package com.rais.vo;

/**
 * @author Rais.Alam
 * @date Dec 17, 2012
 */
public class Passenger
{
    private String name;
    private String destination;

    /**
     * @param name
     * @param destination
     */
    public Passenger(String name, String destination)
    {
        super();
        this.name = name;
        this.destination = destination;
    }

    /**
     * @return the name
     */
    public String getName()
    {
        return name;
    }

    /**
     * @param name
     *            the name to set
     */
    public void setName(String name)
    {
        this.name = name;
    }

    /**
     * @return the destination
     */
    public String getDestination()
    {
        return destination;
    }

    /**
     * @param destination
     *            the destination to set
     */
    public void setDestination(String destination)
    {
        this.destination = destination;
    }

} 
```

# python - 从html中提取python url

> ID：13903868
> 
> 赞同：-2
> 
> 时间：2012-12-16T17:44:20.967
> 
> 标签：python, regex, url, extract

我需要 python 正则表达式从 html 中提取 url，例如 html 代码：

```
<a href=""http://a0c5e.site.it/r"" target=_blank><font color=#808080>MailUp</font></a>
<a href=""http://www.site.it/prodottiLLPP.php?id=1"" class=""txtBlueGeorgia16"">Prodotti</a>
<a href=""http://www.site.it/terremoto.php"" target=""blank"" class=""txtGrigioScuroGeorgia12"">Terremoto</a>
<a class='mini' href='http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse'>clicca qui.</a>` 
```

我只需要提取：

```
 http://a0c5e.site.it/r
 http://www.site.it/prodottiLLPP.php?id=1
 http://www.site.it/terremoto.php
 http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:51:30.900

正则表达式可能会解决您的问题，但请考虑使用 BeautifulSoup

```
>>> html = """<a href="http://a0c5e.site.it/r" target=_blank><font color=#808080>MailUp</font></a>
<a href="http://www.site.it/prodottiLLPP.php?id=1" class=""txtBlueGeorgia16"">Prodotti</a>
<a href="http://www.site.it/terremoto.php" target=""blank"" class=""txtGrigioScuroGeorgia12"">Terremoto</a>
<a class='mini' href='http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse'>clicca qui.</a>`"""
>>> from BeautifulSoup import BeautifulSoup
>>> soup = BeautifulSoup(html)
>>> [e['href'] for e in soup.findAll('a')]
[u'http://a0c5e.site.it/r', u'http://www.site.it/prodottiLLPP.php?id=1', u'http://www.site.it/terremoto.php', u'http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse'] 
```

从乔恩克莱门茨

```
soup.findAll('a', {'href': True}) 
```

另一方面，您的 html 片段中的 href 引用不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:54:18.353

观察

```
Python 2.7.3 (default, Sep  4 2012, 20:19:03) 
[GCC 4.2.1 20070831 patched [FreeBSD]] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
>>> junk=''' <a href=""http://a0c5e.site.it/r"" target=_blank><font color=#808080>MailUp</font></a>
... <a href=""http://www.site.it/prodottiLLPP.php?id=1"" class=""txtBlueGeorgia16"">Prodotti</a>
... <a href=""http://www.site.it/terremoto.php"" target=""blank"" class=""txtGrigioScuroGeorgia12"">Terremoto</a>
... <a class='mini' href='http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse'>clicca qui.</a>`'''
>>> import re
>>> pat=re.compile(r'''http[\:/a-zA-Z0-9\.\?\=&]*''')
>>> pat.findall(junk)
['http://a0c5e.site.it/r', 'http://www.site.it/prodottiLLPP.php?id=1', 'http://www.site.it/terremoto.php', 'http://www.site.com/remove/professionisti.aspx?Id=65&Code=xhmyskwzse'] 
```

可能想要添加 % 以便您可以捕获其他逃逸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:50:49.463

您可以使用[BeautifulSoup 库](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)来操作/提取 HTML 上的信息。

我不建议您使用正则表达式来解析 HTML 数据。HTML 不是规则的，它是上下文无关的语法。当链接结构发生变化时，HTML 可能有效，但您的正则表达式可能无效，您将不得不重新编写表达式。使用 BeautifulSoup 是一种提取信息的好方法。

# spring - 带有 jsessionid 的 Spring url 标签

> ID：13903874
> 
> 赞同：0
> 
> 时间：2012-12-16T17:45:25.763
> 
> 标签：spring, spring-mvc

我有一个具有以下（相关）设置的jsp：

```
<s:url value="/res" var="res_url" />

<link href="${res_url}/less/bootstrap.less" rel="stylesheet/less">
<link href="${res_url}/less/responsive.less" rel="stylesheet/less">
... 
```

我注意到使用这种技术有一个问题，在新会话的第一页加载时，我的`res_url`变量将被`";jsessionid=xxxxxxxxx"`附加。在这种情况下，这意味着 id 出现在我的样式表 URL 的中间，因此不会加载样式表。

我意识到我可能没有按照预期的方式使用 URL 标签，并且您可以在 URL 标签中包含 param 标签来解决这个问题，但我不喜欢它的想法并认为我做的方式干净多了。是否有可能以某种方式告诉它忽略 jsessionid？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:40:53.693

我没有看到使用 Spring 的 URL 标记而不是标准 JSTL 标记的好处。关于什么

```
<c:url value="/res/less/bootstrap.less" var="lessBootstrap" />
<link href="${lessBootstrap}" rel="stylesheet/less"> 
```

如果你想`/res/less`在变量中定义路径而不是重复它，你可以这样做：

```
<c:set var="resDir" value="/res/less" scope="request" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:55:54.300

正确的做法是

```
<link href="<s:url value="/res/less/bootstrap.less"/>" rel="stylesheet/less">
<link href="<s:url value="/res/less/responsive.less"/>" rel="stylesheet/less"> 
```

我看不出有什么更简单的方法可以做到这一点。

# php - 为非常大的数字计算 a % b - php

> ID：13903879
> 
> 赞同：3
> 
> 时间：2012-12-16T17:46:25.617
> 
> 标签：php, math

我必须计算`a % b`两个非常大的数字。我不能使用默认的模运算符，因为`a`和`b`更大`PHP_INT_MAX`，所以我必须将它们作为“字符串”处理。

我知道存在特殊的数学库，例如`BC`or`GMP`但我不能使用它们，因为我的应用程序可能会托管在共享主机上，而这些未启用。我必须在 php 中编写一个函数来完成这项工作。该函数将两个字符串（两个数字）作为参数并且必须返回`a % b`，但我不知道如何开始？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:50:27.120

自 PHP 4.0.4 起，libbcmath 与 PHP 捆绑在一起。此扩展不需要任何外部库。这些函数仅在 PHP 配置了 --enable-bcmath 时可用。

Windows 版本的 PHP 内置了对这个扩展的支持。您无需加载任何其他扩展即可使用这些功能。您应该能够自己启用这些功能，而无需托管公司采取任何行动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T16:40:38.573

我想到了这个解决方案： $n 代表一个巨大的数字， $m （不是那么大）模数。

```
function getModulus($n, $m)
{
    $a = str_split($n);
    $r = 0;

    foreach($a as $v)
    {
        $r = ((($r * 10) + intval($v)) % $m);
    }

    return $r;
} 
```

希望它可以帮助某人，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-12T12:15:10.637

根据您的处理器，如果使用 64 位机器 2^63-1 并且如果使用 32 位机器 2^31-1 应该为您提供您的机器可以计算的小数长度。在此之上，您将得到错误的值。您可以通过将您的号码分成块来做同样的事情。示例：我的数字是十进制的 18，因此分成 9/7/2 = 18 的块。计算第一个块的 mod。将第一个的 mod 附加到第二个块的前面。示例：第一个 mod 的结果 = 23，因此是 23XXXXXXX。找到生成的 23XXXXXXX 的 mod。将mod添加到最后一个块。示例：mod = 15 然后 15XX。

```
$string = '123456789123456789'; // 18 decimal long
$chunk[0] = '123456789'; // 9 decimal long
$chunk[1] = '1234567'; // 7 decimal long
$chunk[2] = '89'; // 2 decimal long
$modulus = null;
foreach($chunk as $value){
$modulus = (int)($modulus.$value) % 45;
} 
```

上面的结果 $modulus 应该与

$modulus = $tring % 45 迟到总比平均好。希望这会有所帮助。有类似方法的人吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T17:49:14.037

您可以使用`fmod`大于`MAX_INT`

在此处阅读有关它的更多信息

[http://php.net/manual/en/function.fmod.php](http://php.net/manual/en/function.fmod.php)

# mono - 如何使用 monodevelop 构建 x64？

> ID：13903884
> 
> 赞同：5
> 
> 时间：2012-12-16T17:47:13.590
> 
> 标签：mono, 64-bit, monodevelop

我想为我在 monodevelop 中编写的项目构建一个 x64 包。我可以将项目编译器选项从 x86 更改为 x64，但如果这样做，我会收到错误消息：

```
Error CS0016: Could not write to file `AudioCuesheetEditor', cause: AMD64 (CS0016) (AudioCuesheetEditor) 
```

如何为 x64 系统构建软件包？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-22T22:01:18.753

使用`any cpu`配置

您将在 64 位操作系统上获得 x64，在 32 位操作系统上获得 x86。即时编译器提供的 Automagic。

**但是**在带有anycpu的windows x86上没有问题。使用 windows x64 会崩溃，因为 gtk-sharp 没有 x64 版本。因此，在 Windows x64 上，您必须构建 x86。

# android - 是否有任何用于发送 SMS 的广播活动/服务？

> ID：13903896
> 
> 赞同：0
> 
> 时间：2012-12-16T17:48:46.597
> 
> 标签：android

当用户点击“发送短信”按钮时，我想通过一些条件语句，因此如果满足条件，则发送短信，否则中止撰写的短信！谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:50:53.760

这是不可能的。任何应用程序都可以`SmsManager`用来发送 SMS，并且此类消息不能被截获，除非可能通过自定义固件。

您无法阻止传出的短信。您只有在发送后才能了解它。当短信到达已发送框时，您可以通过为短信注册内容观察者来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T18:31:52.073

不，当要发送短信时，没有广播活动可以使用它，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T07:49:05.783

这是个好问题，当您在 android 中使用任何内置应用程序工作时，它在某种程度上为您提供了一些便利，但您不能越界。如果您想控制内置应用程序的发送按钮，那是不可能的。你不能在安卓中做到这一点。

# javascript - Javascript 返回两个日期之间的天数、小时数、分钟数、秒数

> ID：13903897
> 
> 赞同：88
> 
> 时间：2012-12-16T17:48:56.533
> 
> 标签：javascript, datetime

有没有人可以将我链接到一些教程，我可以在其中找到如何在 2 个 unix 日期时间之间返回 javascript 中的天数、小时数、分钟数、秒数？

我有：

```
var date_now = unixtimestamp;
var date_future = unixtimestamp; 
```

我想返回（实时）从 date_now 到 date_future 还剩多少天、小时、分钟、秒。

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-12-16T18:13:08.363

只需计算以秒为单位的差异（不要忘记 JS 时间戳实际上以毫秒为单位）并分解该值：

```
// get total seconds between the times
var delta = Math.abs(date_future - date_now) / 1000;

// calculate (and subtract) whole days
var days = Math.floor(delta / 86400);
delta -= days * 86400;

// calculate (and subtract) whole hours
var hours = Math.floor(delta / 3600) % 24;
delta -= hours * 3600;

// calculate (and subtract) whole minutes
var minutes = Math.floor(delta / 60) % 60;
delta -= minutes * 60;

// what's left is seconds
var seconds = delta % 60;  // in theory the modulus is not required 
```

**编辑**代码已调整，因为我刚刚意识到原始代码返回的总小时数等，而不是计算一整天后剩下的小时数。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-16T19:13:51.773

这是javascript中的：（例如，未来的日期是元旦）

**[演示](http://jsfiddle.net/yentup/fKA9X/1/)**（每秒更新）

```
var dateFuture = new Date(new Date().getFullYear() +1, 0, 1);
var dateNow = new Date();

var seconds = Math.floor((dateFuture - (dateNow))/1000);
var minutes = Math.floor(seconds/60);
var hours = Math.floor(minutes/60);
var days = Math.floor(hours/24);

hours = hours-(days*24);
minutes = minutes-(days*24*60)-(hours*60);
seconds = seconds-(days*24*60*60)-(hours*60*60)-(minutes*60); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2015-09-11T01:42:15.240

*我称之为“雪人 ☃ 方法”，我认为当您需要额外的时间跨度（如几周、飞蛾、年、世纪……）*并且不想要太多重复的代码时，它会更加灵活：

```
var d = Math.abs(date_future - date_now) / 1000;                           // delta
var r = {};                                                                // result
var s = {                                                                  // structure
    year: 31536000,
    month: 2592000,
    week: 604800, // uncomment row to ignore
    day: 86400,   // feel free to add your own row
    hour: 3600,
    minute: 60,
    second: 1
};

Object.keys(s).forEach(function(key){
    r[key] = Math.floor(d / s[key]);
    d -= r[key] * s[key];
});

// for example: {year:0,month:0,week:1,day:2,hour:34,minute:56,second:7}
console.log(r); 
```

有 一个`**[FIDDLE](https://jsfiddle.net/RienNeVaPlus/vmhguhm3/15/)**`//`**[ES6 Version (2018)](https://jsfiddle.net/RienNeVaPlus/pzw1L47j/1/)**``**[TypeScript Version (2019)](https://gist.github.com/RienNeVaPlus/024de3431ae95546d60f2acce128a7e2)**`

^(*灵感来自[Alnitak](https://stackoverflow.com/users/6782/alnitak)的回答。*)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-16T18:02:49.377

请注意，仅基于差异计算不会涵盖所有情况：闰年和“夏令时”的切换。

Javascript 的内置库用于处理日期很差。我建议你使用第三方 javascript 库，例如[MomentJS](http://momentjs.com)；你可以[在这里](http://momentjs.com/docs/#/displaying/difference/)看到你正在寻找的功能。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-07-20T00:08:01.020

我的解决方案不是那么清楚，但我把它作为另一个例子

```
console.log(duration('2019-07-17T18:35:25.235Z', '2019-07-20T00:37:28.839Z'));

function duration(t0, t1){
    let d = (new Date(t1)) - (new Date(t0));
    let weekdays     = Math.floor(d/1000/60/60/24/7);
    let days         = Math.floor(d/1000/60/60/24 - weekdays*7);
    let hours        = Math.floor(d/1000/60/60    - weekdays*7*24            - days*24);
    let minutes      = Math.floor(d/1000/60       - weekdays*7*24*60         - days*24*60         - hours*60);
    let seconds      = Math.floor(d/1000          - weekdays*7*24*60*60      - days*24*60*60      - hours*60*60      - minutes*60);
    let milliseconds = Math.floor(d               - weekdays*7*24*60*60*1000 - days*24*60*60*1000 - hours*60*60*1000 - minutes*60*1000 - seconds*1000);
    let t = {};
    ['weekdays', 'days', 'hours', 'minutes', 'seconds', 'milliseconds'].forEach(q=>{ if (eval(q)>0) { t[q] = eval(q); } });
    return t;
}
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2021-10-04T02:15:55.610

有点不同的风格（也许对于某些人来说更具可读性）它可以在 JavaScript 中使用，而且它也**可以在 TypeScript**中使用。

如果您确保第一个日期始终大于第二个日期，则不需要 Math.abs() 模运算周围的圆括号也是不必要的。我保留它们以备清关。

```
let diffTime = Math.abs(new Date().valueOf() - new Date('2021-11-22T18:30:00').valueOf());
let days = diffTime / (24*60*60*1000);
let hours = (days % 1) * 24;
let minutes = (hours % 1) * 60;
let secs = (minutes % 1) * 60;
[days, hours, minutes, secs] = [Math.floor(days), Math.floor(hours), Math.floor(minutes), Math.floor(secs)]

console.log(days+'d', hours+'h', minutes+'m', secs+'s');
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-09-20T09:50:09.577

这是一个代码示例。我使用了简单的计算，而不是使用像 1 天是 86400 秒这样的预先计算。因此，您可以轻松地遵循逻辑。

```
// Calculate time between two dates:
var date1 = new Date('1110-01-01 11:10');
var date2 = new Date();

console.log('difference in ms', date1 - date2);

// Use Math.abs() so the order of the dates can be ignored and you won't
// end up with negative numbers when date1 is before date2.
console.log('difference in ms abs', Math.abs(date1 - date2));
console.log('difference in seconds', Math.abs(date1 - date2) / 1000);

var diffInSeconds = Math.abs(date1 - date2) / 1000;
var days = Math.floor(diffInSeconds / 60 / 60 / 24);
var hours = Math.floor(diffInSeconds / 60 / 60 % 24);
var minutes = Math.floor(diffInSeconds / 60 % 60);
var seconds = Math.floor(diffInSeconds % 60);
var milliseconds = Math.round((diffInSeconds - Math.floor(diffInSeconds)) * 1000);

console.log('days', days);
console.log('hours', ('0' + hours).slice(-2));
console.log('minutes', ('0' + minutes).slice(-2));
console.log('seconds', ('0' + seconds).slice(-2));
console.log('milliseconds', ('00' + milliseconds).slice(-3)); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-09-28T07:15:56.427

使用[moment.js](https://momentjs.com/)库，例如：

```
var time = date_future - date_now;
var seconds = moment.duration(time).seconds();
var minutes = moment.duration(time).minutes();
var hours   = moment.duration(time).hours();
var days    = moment.duration(time).days(); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-02-10T12:33:29.737

**简短而灵活，支持负值**，尽管使用两个逗号表达式:)

```
function timeUnitsBetween(startDate, endDate) {
  let delta = Math.abs(endDate - startDate) / 1000;
  const isNegative = startDate > endDate ? -1 : 1;
  return [
    ['days', 24 * 60 * 60],
    ['hours', 60 * 60],
    ['minutes', 60],
    ['seconds', 1]
  ].reduce((acc, [key, value]) => (acc[key] = Math.floor(delta / value) * isNegative, delta -= acc[key] * isNegative * value, acc), {});
} 
```

**例子：**

```
timeUnitsBetween(new Date("2019-02-11T02:12:03+00:00"), new Date("2019-02-11T01:00:00+00:00"));
// { days: -0, hours: -1, minutes: -12, seconds: -3 } 
```

受到[RienNeVaPlu͢](https://stackoverflow.com/a/32514236/1376947)解决方案的启发。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-02-15T08:27:14.773

我所知道的关于持续时间细分的最佳库是[countdown.js](http://countdownjs.org/)。它处理所有困难的情况，如[csg 提到](https://stackoverflow.com/a/13904025/67824)的闰年和夏令时，甚至允许您指定模糊概念，如月和周。这是您的案例的代码：

```
//assuming these are in *seconds* (in case of MS don't multiply by 1000 below)
var date_now = 1218374; 
var date_future = 29384744;

diff = countdown(date_now * 1000, date_future * 1000, 
            countdown.DAYS | countdown.HOURS | countdown.MINUTES | countdown.SECONDS);
alert("days: " + diff.days + " hours: " + diff.hours + 
      " minutes: " + diff.minutes + " seconds: " + diff.seconds);

//or even better
alert(diff.toString()); 
```

这是一个[JSFiddle](http://jsfiddle.net/8p33x9Le/3/)，但它可能只能在 FireFox 或禁用网络安全的 Chrome 中工作，因为 countdown.js 以*text/plain* MIME 类型托管（您应该提供文件，而不是链接到 countdownjs.org） .

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-04-30T02:13:44.740

对于那些只想要小时和分钟的人来说，使用这个

```
const oldDate = new Date("2021-04-28T13:17:31.000Z")
const newDate = new Date("2021-04-28T22:08:07.000Z")
const msToTime = (ms) => ({
    hours: Math.trunc(ms/3600000),
    minutes: Math.trunc((ms/3600000 - Math.trunc(ms/3600000))*60) + ((ms/3600000 - Math.trunc(ms/3600000))*60 % 1 != 0 ? 1 : 0)
})

console.log(msToTime(Math.abs(newDate-oldDate)))
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-07-02T07:21:08.053

```
function update(datetime = "2017-01-01 05:11:58") {
    var theevent = new Date(datetime);
    now = new Date();
    var sec_num = (theevent - now) / 1000;
    var days    = Math.floor(sec_num / (3600 * 24));
    var hours   = Math.floor((sec_num - (days * (3600 * 24)))/3600);
    var minutes = Math.floor((sec_num - (days * (3600 * 24)) - (hours * 3600)) / 60);
    var seconds = Math.floor(sec_num - (days * (3600 * 24)) - (hours * 3600) - (minutes * 60));

    if (hours   < 10) {hours   = "0"+hours;}
    if (minutes < 10) {minutes = "0"+minutes;}
    if (seconds < 10) {seconds = "0"+seconds;}

    return  days+':'+ hours+':'+minutes+':'+seconds;
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-02-02T02:27:05.810

因为 MomentJS 相当重且未优化，所以不怕使用模块的人可能应该看看`date-fns`，它提供了一个[intervalToDuration](https://date-fns.org/v2.16.1/docs/intervalToDuration)方法，它可以满足你的需求：

```
const result = intervalToDuration({
  start: new Date(dateNow),
  end: new Date(dateFuture),
}) 
```

这将返回一个看起来像这样的对象：

```
{
  years: 39,
  months: 2,
  days: 20,
  hours: 7,
  minutes: 5,
  seconds: 0,
} 
```

然后您甚至可以使用您喜欢的参数使用[formatDuration](https://date-fns.org/v2.16.1/docs/formatDuration)将此对象显示为字符串

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-05-13T13:55:35.687

MomentJS 有一个功能可以做到这一点：

```
const start = moment(j.timings.start);
const end = moment(j.timings.end);
const elapsedMinutes = end.diff(start, "minutes"); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-10-28T11:29:16.000

这是我的看法：

```
timeSince(123456) => "1 day, 10 hours, 17 minutes, 36 seconds" 
```

和代码：

```
function timeSince(date, longText) {
    let seconds = null;
    let leadingText = null;

    if (date instanceof Date) {
        seconds = Math.floor((new Date() - date) / 1000);
        if (seconds < 0) {
            leadingText = " from now";
        } else {
            leadingText = " ago";
        }
        seconds = Math.abs(seconds);
    } else {
        seconds = date;
        leadingText = "";
    }

    const intervals = [
        [31536000, "year"  ],
        [ 2592000, "month" ],
        [   86400, "day"   ],
        [    3600, "hour"  ],
        [      60, "minute"],
        [       1, "second"],
    ];

    let interval = seconds;
    let intervalStrings = [];
    for (let i = 0; i < intervals.length; i++) {
        let divResult = Math.floor(interval / intervals[i][0]);
        if (divResult > 0) {
            intervalStrings.push(divResult + " " + intervals[i][1] + ((divResult > 1) ? "s" : ""));
            interval = interval % intervals[i][0];
            if (!longText) {
                break;
            }
        }
    }
    let intStr = intervalStrings.join(", ");

    return intStr + leadingText;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-01-24T13:45:44.903

简单的方法

```
function diff_hours(dt2, dt1) 
 {

  var diff =(dt2.getTime() - dt1.getTime()) / 1000;
  diff /= (60 * 60);
  return Math.abs(Math.round(diff));

 }

function diff_minutes(dt2, dt1) 
 {

  var diff =(dt2.getTime() - dt1.getTime()) / 1000;
  diff /= (60);
  return Math.abs(Math.round(diff));

 }

function diff_seconds(dt2, dt1) 
 {

  var diff =(dt2.getTime() - dt1.getTime()) / 1000;
  return Math.abs(Math.round(diff));

 }

function diff_miliseconds(dt2, dt1) 
 {

  var diff =(dt2.getTime() - dt1.getTime());
  return Math.abs(Math.round(diff));

 }

dt1 = new Date(2014,10,2);
dt2 = new Date(2014,10,3);
console.log(diff_hours(dt1, dt2));

dt1 = new Date("October 13, 2014 08:11:00");
dt2 = new Date("October 14, 2014 11:13:00");
console.log(diff_hours(dt1, dt2));

console.log(diff_minutes(dt1, dt2));

console.log(diff_seconds(dt1, dt2));

console.log(diff_miliseconds(dt1, dt2)); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-06-28T14:25:25.253

```
function calculateExamRemainingTime(exam_end_at) {

$(function(){

    const calcNewYear = setInterval(function(){

        const exam_ending_at    = new Date(exam_end_at);
        const current_time      = new Date();

        const totalSeconds     = Math.floor((exam_ending_at - (current_time))/1000);;
        const totalMinutes     = Math.floor(totalSeconds/60);
        const totalHours       = Math.floor(totalMinutes/60);
        const totalDays        = Math.floor(totalHours/24);

        const hours   = totalHours - ( totalDays * 24 );
        const minutes = totalMinutes - ( totalDays * 24 * 60 ) - ( hours * 60 );
        const seconds = totalSeconds - ( totalDays * 24 * 60 * 60 ) - ( hours * 60 * 60 ) - ( minutes * 60 );

        const examRemainingHoursSection = document.querySelector('#remainingHours');
        const examRemainingMinutesSection = document.querySelector('#remainingMinutes');
        const examRemainingSecondsSection = document.querySelector('#remainingSeconds');

        examRemainingHoursSection.innerHTML = hours.toString();
        examRemainingMinutesSection.innerHTML = minutes.toString();
        examRemainingSecondsSection.innerHTML = seconds.toString();

    },1000);
});
}

calculateExamRemainingTime('2025-06-03 20:20:20'); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-17T17:09:54.747

```
const arrDiff = [
  {
    label: 'second',
    value: 1000,
  },
  {
    label: 'minute',
    value: 1000 * 60,
  },
  {
    label: 'hour',
    value: 1000 * 60 * 60,
  },
  {
    label: 'day',
    value: 1000 * 60 * 60 * 24,
  },
  {
    label: 'year',
    value: 1000 * 60 * 60 * 24 * 365,
  },
];

function diff(date) {
  let result = { label: '', value: '' };
  const value = Date.now() - date;
  for (let obj of arrDiff) {
    let temp = Math.round(value / obj.value);
    if (temp === 0) {
      break;
    } else
      result = {
        value: temp,
        label: obj.label,
      };
  }
  return result;
}

const postDate = new Date('2020-12-17 23:50:00+0700');
console.log(diff(postDate)); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-01-19T17:58:27.490

这是一个代码，用于查找天、小时、分钟、秒中的两个日期之间的差异（假设未来日期是新年日期）。

```
var one_day = 24*60*60*1000;              // total milliseconds in one day

var today = new Date();
var new_year = new Date("01/01/2017");    // future date

var today_time = today.getTime();         // time in miliiseconds
var new_year_time = new_year.getTime();                         

var time_diff = Math.abs(new_year_time - today_time);  //time diff in ms  
var days = Math.floor(time_diff / one_day);            // no of days

var remaining_time = time_diff - (days*one_day);      // remaining ms  

var hours = Math.floor(remaining_time/(60*60*1000));   
remaining_time = remaining_time - (hours*60*60*1000);  

var minutes = Math.floor(remaining_time/(60*1000));        
remaining_time = remaining_time - (minutes * 60 * 1000);   

var seconds = Math.ceil(remaining_time / 1000); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-23T10:04:28.943

```
let delta = Math.floor(Math.abs(start.getTime() - end.getTime()) / 1000);
let hours = Math.floor(delta / 3600);
delta -= hours * 3600;
let minutes = Math.floor(delta / 60);
delta -= minutes * 60;
let seconds = delta;
if (hours.toString().length === 1) {
  hours = `0${hours}`;
}
if (minutes.toString().length === 1) {
  minutes = `0${minutes}`;
}
if (seconds.toString().length === 1) {
  seconds = `0${seconds}`;
}
const recordingTime = `${hours}:${minutes}:${seconds}`; 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-09-23T16:20:36.067

**我们可以通过简单的方法做到**

```
/*Declare the function */
function Clock(){
    let d1 = new Date("1 Jan 2021");
    let d2 = new Date();

    let difference = Math.abs(d1 - d2); //to get absolute value
    //calculate for each one
    let Days = Math.floor(difference / ( 1000 * 60 * 60 * 24 ));
    let Hours = Math.floor((difference / ( 1000 * 60 * 60 )) % 24);
    let Mins = Math.floor((difference / ( 1000 * 60 )) % 60);
    let Seconds = Math.floor((difference / ( 1000 )) % 60);

    //getting nodes and change the text inside
    let getday = document.querySelector(".big_text_days");
    let gethour = document.querySelector(".big_text_hours");
    let getmins = document.querySelector(".big_text_mins");
    let getsec = document.querySelector(".big_text_sec");

    getday.textContent = Check_Zero(Days); 
    gethour.textContent = Check_Zero(Hours);
    getmins.textContent = Check_Zero(Mins)
    getsec.textContent = Check_Zero(Seconds);
}

//call the funcion for every 1 second
setInterval(Clock , 1000);

//check and add zero in front, if it is lessthan 10
function Check_Zero(mytime){
    return mytime < 10 ? "0"+mytime : mytime;

}
```

```
*{
    padding: 0px;
    margin: 0px;
    box-sizing: border-box;
}
body{
    max-width: 900px;
    margin: 0px auto;
    background-color:whitesmoke;
    background-size: cover;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 5rem;
}
.main_container{
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}
h1{
    font-size: 3rem;
    color: #3D4B72;
}
.big_text_days , .big_text_hours , .big_text_mins , .big_text_sec{
    font-size: 2rem;
    font-weight: bold;
    line-height: 2;
    color: #AC7591;
    text-align: center;
}
p{
    padding: 20px 0px 20px 0px;
    font-size: 3rem;
    text-align: center;
}
.spantext{
    color: #103c28;
    margin: 0px 3rem;
    font-size: 2rem;
    font-style: italic;
}
.text_sec{
    color : #005259;
}
```

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="Responsive site">
        <meta name="keywords" content="HTML,CSS,JS">
        <meta name="author" content="Ranjan">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Home</title>

        <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One|Bree+Serif|Exo|Exo+2|Lato|Mansalva|Playfair+Display&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

</head>

    <body>

    <section>
      <h1>CountDown Timer</h1>
        </section>

         <section>
          <div class="main_container">

            <div class="days_container">
             <p class="big_text_days">1</p>
              <span class="spantext spantextdays">Days</span>
            </div>

            <div class="hours_container">
             <p class="big_text_hours">1</p>
              <span class="spantext spantexthours">Hours</span>
            </div>

            <div class="mins_container">
             <p class="big_text_mins">1</p>
              <span class="spantext spantextmins">Minutes</span>
            </div>

            <div class="sec_container">
             <p class="big_text_sec text_sec">1</p>
              <span class="spantext spantextsec">Seconds</span>
            </div>
         </div>
        </section>

    </body>
</html>
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-12T17:48:48.647

### 2021版

*灵感来自[Alnitak](https://stackoverflow.com/a/13904120/12496886)和[RienNeVaPlus 的](https://stackoverflow.com/a/32514236/12496886)答案。*

自动计算开始和结束（参见下面的示例）。

```
const timeUnits = {
  year: 31536e6,
  month: 2592e6,
  week: 6048e5,
  day: 864e5,
  hour: 36e5,
  minute: 6e4,
  second: 1e3,
};

const timeUnitsNamesShort = {
  year: 'y',
  month: 'm',
  week: 'w',
  day: 'd',
  hour: 'h',
  minute: 'm',
  second: 's',
};

const isFuture = (date) => date > Date.now();

const dateDiffStructure = (date, units = timeUnits) => {
  let delta = Math.abs(date - Date.now());
  return Object.entries(units).reduce((acc, [key, value]) => {
      acc[key] = Math.floor(delta / value);
      delta -= acc[key] * value;
      return acc;
  }, {});
};

const dateDiffStructureToString = (date, diffStructure, values, short) => {
  const diffStructureEntries = values 
    ? Object.entries(diffStructure).filter(([key, value]) => values.includes(key) && value)
    : Object.entries(diffStructure).filter(([, value]) => value);
  if (!diffStructureEntries.length) return 'just now';
  const suffix = isFuture(date) ? 'left' : 'ago';
  const diffString = diffStructureEntries.reduce((acc, [key, value]) => {
      const timeUnit = short
          ? timeUnitsNamesShort[key]
          : value > 1
              ? ` ${key}s`
              : ` ${key}`;
      acc = acc ? `${acc} ` : '';
      return `${acc}${value}${timeUnit}`;
  }, '');
  return `${diffString} ${suffix}`;
};

const getDateDiff = (date, values, short) => {
  const diffStructure = dateDiffStructure(date);
  return dateDiffStructureToString(date, diffStructure, values, short);
}; 
```

测试和示例：

```
const timeUnits = {
  year: 31536e6,
  month: 2592e6,
  week: 6048e5,
  day: 864e5,
  hour: 36e5,
  minute: 6e4,
  second: 1e3,
};

const timeUnitsNamesShort = {
  year: 'y',
  month: 'm',
  week: 'w',
  day: 'd',
  hour: 'h',
  minute: 'm',
  second: 's',
};

const isFuture = (date) => date > Date.now();

const dateDiffStructure = (date, units = timeUnits) => {
  let delta = Math.abs(date - Date.now());
  return Object.entries(units).reduce((acc, [key, value]) => {
    acc[key] = Math.floor(delta / value);
    delta -= acc[key] * value;
    return acc;
  }, {});
};

const dateDiffStructureToString = (date, diffStructure, values, short) => {
  const diffStructureEntries = values ?
    Object.entries(diffStructure).filter(([key, value]) => values.includes(key) && value) :
    Object.entries(diffStructure).filter(([, value]) => value);
  if (!diffStructureEntries.length) return 'just now';
  const suffix = isFuture(date) ? 'left' : 'ago';
  const diffString = diffStructureEntries.reduce((acc, [key, value]) => {
    const timeUnit = short ?
      timeUnitsNamesShort[key] :
      value > 1 ?
      ` ${key}s` :
      ` ${key}`;
    acc = acc ? `${acc} ` : '';
    return `${acc}${value}${timeUnit}`;
  }, '');
  return `${diffString} ${suffix}`;
};

const getDateDiff = (date, values, short) => {
  const diffStructure = dateDiffStructure(date);
  console.log(`dateDiffStructure(${JSON.stringify(date)}) //`, diffStructure);
  return dateDiffStructureToString(date, diffStructure, values, short);
};

const tests = [
  ['After tomorrow', [new Date(Date.now() + 8.64e7 + 1e6)]],
  ['Yesterday', [new Date(Date.now() - 8.64e7)]],
  ['Past', [new Date(Date.now() * Math.random())]],
  ['Future short', [new Date(Date.now() * (Math.random() + 1)), ['year', 'month', 'day'], true]],
  ['Now', [Date.now()]]
];

tests.forEach(([text, args]) => {
  console.log(`${text}:`);
  console.group();
  console.log(`getDateDiff(${args.map(item => JSON.stringify(item)).join(', ')}) //`, getDateDiff(...args));
  console.groupEnd();
});
```

# vb.net - VB.NET - 将 joyGetDevCaps 函数从 VB6 转换为 VB.NET

> ID：13903899
> 
> 赞同：0
> 
> 时间：2012-12-16T17:49:05.093
> 
> 标签：vb.net, api, pinvoke, joystick

我不知道如何将以下 API 转换为 VB.NET

```
Private Const MAXPNAMELEN As Long = 32&

Private Type JOYCAPS
wMid As Integer
wPid As Integer
szPname As String * MAXPNAMELEN
wXmin As Long
wXmax As Long
wYmin As Long
wYmax As Long
wZmin As Long
wZmax As Long
wNumButtons As Long
wPeriodMin As Long
wPeriodMax As Long
End Type

Private Declare Function joyGetDevCaps Lib "winmm.dll" Alias "joyGetDevCapsA" (ByVal id As Long, lpCaps As JOYCAPS, ByVal uSize As Long) As Long 
```

我尝试了一些转换器，但它们的输出不起作用。如果有人真的很好，他可以尝试为我转换它并告诉我如何调用它吗？特别是，我不知道在将 JOYCAPS 传递给函数时如何实例化它。

我在 pinvoke.net 上没有找到这个功能。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:55:10.567

我无法对其进行测试，但这应该是直接的转换：

```
Private Const MAXPNAMELEN As Integer = 32

<StructLayout(LayoutKind.Sequential)>
Private Structure JOYCAPS
    Public wMid As Short
    Public wPid As Short
    <MarshalAs(UnmanagedType.ByValTStr, SizeConst:=MAXPNAMELEN)>
        Public szPname As String
    Public wXmin As Integer
    Public wXmax As Integer
    Public wYmin As Integer
    Public wYmax As Integer
    Public wZmin As Integer
    Public wZmax As Integer
    Public wNumButtons As Integer
    Public wPeriodMin As Integer
    Public wPeriodMax As Integer
End Structure

<DllImport("winmm.dll")>
Private Shared Function joyGetDevCaps(id As IntPtr, ByRef lpCaps As JOYCAPS, uSize As UInteger) As Integer

End Function 
```

它假设`System.Runtime.InteropServices`是进口的。

# c# - 根据 Unicode 代码点检索特定字符

> ID：13903901
> 
> 赞同：-2
> 
> 时间：2012-12-16T17:49:13.480
> 
> 标签：c#, c#-4.0

我有一组 40 个字符，它们有自己的代码点。例如，`U0678`，`u0679`等等。如何根据代码点从文本中检索仅包含这些字符的单词、字符串和子字符串，而忽略所有其他字符？我的旧代码很痛苦

```
private string token(string x)
{
    Regex exclude = new Regex(@"\d|\s+|/|-|[A-Za-z]", RegexOptions.Compiled);
    return string.Join(" ",
      (from s in Regex.Split(x, "([ \\t{}():;.,!ـ؛،؟ \"\n])")
       where !exclude.IsMatch(s)
       select s).ToArray());
} 
```

已编辑。假设我有字符串“aaa bbb ccc ddd”。然后我想只检索单词 aaa 和 bbb。然后我想做类似的事情

```
Regex regEx = new Regex(@"\u0041|\u0042");
Match match = regEx.Match(mystring);
if(match.Success)
 then do somthing 
```

但我有 40 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:39:50.563

> Ok, so you have a set of space delimited strings, and a set of 40 characters. You wish to find which of those strings (separated by spaces) are built up of only combinations of those 40 characters?
> 
> @ Chris, yes, exactly .

```
var charSet = new HashSet<char>("abcde\x015f" + Regex.Unescape("\u0066"));
//or var charSet = new HashSet<char>(new[] { 'a', 'b', 'c', 'd', 'e', 'ş', 'f'});
//or var charSet = new HashSet<char>(new[] { '\x0061', '\x0062', '\x0063', '\x0064', '\x0065', '\x015F', '\x0066'});
//or var charSet = new HashSet<char>(Regex.Unescape("\u0061\u0062\u0063\u0064\u0065\u015F\u0066"));
//or var charSet = new HashSet<char>("\x0061\x0062\x0063\x0064\x0065\x015F\x0066");

string input = "abc  defş aaa xyz";

var words =  input.Split()
                .Where(s => !String.IsNullOrWhiteSpace(s))
                .Where(s => s.All(c => charSet.Contains(c)))
                .ToList(); 
```

# php - 在 php 文件中或通过 mysql 手动计算？

> ID：13903907
> 
> 赞同：1
> 
> 时间：2012-12-16T17:50:02.813
> 
> 标签：php, mysql, performance, set, intersection

对不起，如果以前有人问过这个问题，但我尝试寻找类似的东西但找不到任何东西。

我有三个表：users、hobbies 和 user_hobbies（链接前两个）。我想根据他们的爱好计算两个用户之间的相似度。为此，我首先需要两组：用户 A 的爱好和用户 B 的爱好，我可以通过两个简单的查询来获取它们。由于其他原因，我还必须在一个 php 文件中计算这两个集合，所以它们可以在两个数组中用于下一步：

我必须计算他们的共同爱好（即集合的交集）。

想法#1：有两个数组，我可以通过一些方法计算公共元素。

想法 #2：我可以进行第三次查询（例如`SELECT hobby FROM user_hobbies WHERE user_id IN ('uid_A', 'uid_B') GROUP BY hobby HAVING COUNT (*) = 2`），而不会打扰自己。

我想我的问题是关于性能的。是手动计算更快还是mysql查询更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:52:50.910

您已经有一个规范化的表来保存用户爱好表，那么为什么不使用它呢？

一般来说，SQL 会快很多，至少对于前 100k 条记录左右。然后，您会看到通过未编入索引的列进行审查的查询或使用“文件排序”对 ORDER BY 关键字带来的大型数据集进行排序的查询的性能下降。

对于可伸缩性，我建议使用内部连接来缩小初学者的可能性。

批判性地思考这个问题。是否有任何其他未提及的列可以表明用户可能有多个爱好？这些是您在寻求扩展应用程序时考虑的事项。

否则，对于初学者来说应该没问题，以免过早地进行优化。

我会选择选项＃2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:05:58.660

**简而言之：**如果您的操作不是**一套基本操作**，最好将其移出 MsSql 或任何 RDBMS。

因为，您无法轻松扩展 MsSQL。

# java - 具有课堂可见性的最佳实践

> ID：13903908
> 
> 赞同：1
> 
> 时间：2012-12-16T17:50:09.980
> 
> 标签：java

在 Java 项目中公开所有类是最佳实践吗？我注意到在我使用过的所有 Java 项目中，只有公共类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:55:06.420

这不是指导方针，不。

信息隐藏原则告诉我们只暴露*需要*的东西，仅此而已，以最小化耦合。

因此，例如，如果一个类可以让您更轻松地处理单独类中的逻辑，并且仅由该类使用，则没有理由将其公开，也不应该将其公开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:33:43.057

您的问题的简单答案是“不！”

稍微复杂一点的是，如果一个类需要被它自己的包之外的其他类使用，你应该只公开一个类。但是，如果像我一样，为了便于阅读，您将项目分成许多包，那么通常情况下，您的类需要公开才能使用。

虽然您的问题很容易提出，但它的本质远非简单。很大程度上取决于您编写的代码类型。如果您正在编写一个库然后在外部使用，那么您的议程可能很重要。在应用程序中则更少。

我发现我更喜欢公开的方法。我尝试设计重用，因为它使我的选择保持开放，由于重用问题让我更仔细地考虑我的实现，这会导致更好的代码。但这确实是课程的马，你是这个等式中最大的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:14:06.367

不它不是。有很多具有其他访问说明符甚至匿名的类。例如，您可以编写可以注册到诸如“ActionListener”和“ItemListener”之类的侦听器的私有或匿名类。就像那样，出于各种目的，我们确实编写了很多没有公共说明符的类。将您的工作分成几部分确实很有帮助。

但是，在 Java 中，通常每个源文件都包含一个公共类。这是因为如果源文件的名称是“Reader.java”，则该源文件中的“Reader”类不能有私有或其他访问说明符。它必须是公共的或默认的。除此之外，没有其他类可以使用访问说明符“public”而不是“Reader”类。

另一件事是，私有、受保护和其他类型（默认除外）的类不能作为“独立类”​​写入源文件。例如，以下是一个错误

**检查.java**

```
private class Check
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T18:00:16.767

通常大多数类确实是公共的，但在某些情况下，您可能还想使用默认或私有范围。

使用默认作用域的类只能被同一包中的其他类访问。[例如，在帮助类的情况下，当您的代码变得更加封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)时，以这种方式限制它们的使用通常是一个好习惯。出于同样的原因，私有作用域通常可以用于内部类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T17:53:23.860

这取决于，对于顶级课程，如果您希望其他课程在不同的包中查看您的课程，您应该`mark it public`。如果您只想让同一个包中的类查看您的类`mark it default`（无修饰符）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-16T17:54:03.267

所以，你的问题是真的，所有顶级课程都应该公开吗？我认为这归结为您在项目中使用的包访问权限。[不久前，这个问题](https://stackoverflow.com/questions/13726651/do-you-use-the-default-package-visibility-in-java)与此相关。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T21:14:15.800

这绝对不是最佳实践。您看到它是因为大多数程序员不知道顶级类不必是公共的。

理想情况下，包不仅仅是将类组织成组的一种方式。属于单个包的类没有最小或最大数量；相反，只有在需要包级类和/或成员时才应创建子包。Java API 经常这样做，并且由于从 Sun/Oracle 分发的 javadoc 是为受保护级别的类和成员生成的，因此某些包可能看起来很稀疏，甚至显得荒谬。

例如，[javax.swing.colorchooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/colorchooser/package-summary.html)包看起来只有四个类，但实际上有 17 个（实际数量可能因 Java 版本而异）。四个是公开的；其余的仅用于 JColorChooser 内部。

我发现一个变得太大而无法作为内部类轻松维护的内部类通常是非公共顶级类的良好候选者。

# php - WordPress侧边栏小部件不保留

> ID：13903911
> 
> 赞同：0
> 
> 时间：2012-12-16T17:50:25.787
> 
> 标签：php, wordpress, wordpress-theming, sidebar

**WordPress 3.5**

[我通过WordPress register_sidebar 文档](http://codex.wordpress.org/Function_Reference/register_sidebar)构建了一个动态侧边栏，如下所示：

```
$sidebar = array(
    'name'          => 'Main Side Bar',
    'id'            => 'Aisis_Side_Bar',
    'before_widget' => '<li>',
    'after_widget'  => '</li>',
    'before_title'  => '<h2>',
    'after_title'   => '</h2>'
);

register_sidebar($sidebar); 
```

问题是，当我进入管理部分的小部件部分将小部件拖放到侧边栏时，一切正常。如果我刷新或离开该页面并返回，小部件消失且侧边栏为空。

它们也不会出现在前端。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:16:39.567

在这里发帖是因为评论太长，而不是真正的答案。

`<?php dynamic_sidebar('Main Side Bar'); ?>`然后你的模板中有类似的东西？

有两次我看到 WordPress 小部件消失了，而且都与通过 Ajax 做所有事情的页面有关。第一种是当您只查看外观>>小部件并且您长时间打开页面时，WordPress 会注销您，但页面仍然正常运行，即使没有保存任何内容。

另一种是当有多个管理员时。每次您在任何小部件上单击保存时，所有小部件及其选项都会保存，它不仅会保存您单击保存的小部件的信息。因此，如果另一个人以管理员身份登录并正在查看外观 >> 小部件，那么您将小部件保存到“主侧栏”，除非他们刷新外观 >> 小部件，否则它不会显示在他们的屏幕上。因此，现在如果他们在任何小部件上单击保存，它会将“主侧栏”保存为空并“擦除”您的小部件。

此外，如果您创建多个小部件区域，请确保将它们添加到 functions.php 中的其他区域下方。WordPress 根据其 ID 号将小部件放置在适当的区域，而不是根据其名称或您设置的 ID。因此，如果“ABC”是您注册的第一个小部件区域，那么您将一些小部件放入其中，然后您在 functions.php 中在另一个区域*上方注册一个新区域“DEF”，ABC 现在将为空。*

如果这些情况都不适用于您，您可能想尝试更改 ID 以使用连字符来解决问题。然后开始查看你的错误日志，禁用所有插件，确保 mod_security 没有拦截帖子，诸如此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T03:21:45.260

老问题，但是3年后的今天，我仍然遇到问题，我的解决方法：

`id`将侧边栏数组从更改为`cameCase`类似`snake_case`or `spinal-case`！

# php - PHP/MYSQL - 传递变量问题

> ID：13903913
> 
> 赞同：0
> 
> 时间：2012-12-16T17:50:28.800
> 
> 标签：php, jquery, mysql, variables

我正在开发一个 JQuery 脚本，该脚本基本上根据输入从选择框中提取数据，并根据选择隐藏/显示变量（当前正在测试数据）

就 JQUERY 刷新和更新值而言，我的脚本可以正常工作。我目前的问题是我似乎无法让变量通过以用于其他步骤。

这是我到目前为止所拥有的。现在我在将变量传递到下一步时遇到问题。

## 这是 JQuery/HTML 部分：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript"><!--
$(document).ready(function() {
  // When the form is submitted to PHP Call
  $('#crs').submit(function() {
    // Get form data ready for PHP Call
    var Sphone = $('#crs #Sphone').val();
    var Schat = $('#crs #Schat').val();
    var Smeet = $('#crs #Smeet').val();
    var Sremo = $('#crs #Sremo').val();
    var Sport = $('#crs #Sport').val();
    var Smail = $('#crs #Smail').val();
    var Svoic = $('#crs #Svoic').val();
    var Sfax = $('#crs #Sfax').val();

    // put form data in a JSON format that will be sent to the PHP File
    var data_json = {'Sphone':Sphone, 'Schat':Schat, 'Smeet':Smeet, 'Sremo':Sremo, 'Sport':Sport, 'Smail':Smail, 'Svoic':Svoic, 'Sfax':Sfax};

    // Set AJAX method
    // If succeeds, goes to the  next step
    $.ajax({
      type: 'post',
      url: 'script.php',
      data: data_json,
      beforeSend: function() {
        // before send the request, displays a "Loading..." messaj in the element where the server response will be placed
        $('#resp').html('Loading...');
      },
      timeout: 10000,        // sets timeout for the request (10 seconds)
      error: function(xhr, status, error) { alert('Error: '+ xhr.status+ ' - '+ error); },
      success: function(response) { $('#resp').html(response); }
    });

    return false;      // required to not open the page when form is submited
  });
});
--></script>
</head>
<body>
<div id="resp"></div>
<h4>Fill the form:</h4>
<form action="script.php" method="post" id="crs">
Phone Support: <select name="Sphone" id="Sphone">
  <option value="Pen1">Yes</option>
  <option value="">No</option>
   </select><br />

Live Chat Support: <select name="Schat" id="Schat">
  <option value="Pen2">Yes</option>
  <option value="">No</option>
   </select><br />

Live Meeting: <select name="Smeet" id="Smeet">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />
Remote Support: <select name="Sremo" id="Sremo">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />
Ticket By Portal: <select name="Sport" id="Sport">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />

Ticket By Email: <select name="Smail" id="Smail">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />

Ticket By Voicemail: <select name="Svoic" id="Svoic">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />

Ticket By Fax: <select name="Sfax" id="Sfax">
  <option value="Pen3">Yes</option>
  <option value="">No</option>
   </select><br />

 <input type="submit" value="submit" />
</form> 
```

* * *

## 这是 PHP 部分。

```
if(isset($_POST['Sphone']) && isset($_POST['Schat']) && isset($_POST['Smeet']) && isset($_POST['Sremo']) && isset($_POST['Sport']) && isset($_POST['Smail']) && isset($_POST['Svoic']) && isset($_POST['Sfax'])) {
  $_POST = array_map("strip_tags", $_POST);       // Gets rid of tags in POST Call

  // get data
  $Sphone = $_POST['Sphone'];
  $Schat = $_POST['Schat'];
  $Smeet = $_POST['Smeet'];
  $Sremo = $_POST['Sremo'];
  $Sport = $_POST['Sport'];
  $Smail = $_POST['Smail'];
  $Svoic = $_POST['Svoic'];
  $Sfax = $_POST['Sfax'];

// Define Full Output of variable   
  $arrow ='<textarea name="supportArticle" cols="160" rows="15" wrap="virtual">'.$Sphone.' <br> '.$Schat.' <br> '.$Smeet.' <br> '.$Sremo.' <br> '.$Sport.' <br> '.$Smail.' <br> '.$Svoic.' <br> '.$Sfax.'</textarea>';
   function passVariable($arrow)
    {
    return $arrow or die(mysql_error());
    }
  }
echo $arrow; 
```

* * *

我确实有更多的代码，但这只是数据库连接等。

这可以很好地更改变量。现在我有 Pen 1、Pen 2 等......作为占位符（中间有一个中断）。

我想将所有这些保存在一个文件中。我用一个名为 $arrow 的变量对此进行了测试，它不会回显这个变量（也向它添加了一个 DIE 错误，然后将其删除） - 任何接受者？

# java - 为什么我的链表的排序方法不起作用？

> ID：13903914
> 
> 赞同：0
> 
> 时间：2012-12-16T17:50:29.553
> 
> 标签：java, sorting, linked-list

我正在尝试为单链表实现排序方法。该方法假设遍历列表，比较一对节点，并在需要时将其中一个放在前面。它使用另外两种方法： - Remove() （从列表中删除特定节点） - InsertFront() （在列表的前面插入一个新节点。这两种方法都可以自行工作，并且一切都可以编译。

```
 public Link remove(String lastName)
{
    Link current_ = first_;
    Link prior_ = null;
    Link found_ = null;
    while (current_ != null && current_.lastName.compareTo(lastName) != 0)
    {
        prior_ = current_;
        current_ = current_.next;
    }
    if(current_ != null)
    {
        if(prior_ == null)
        {
            found_ = first_;
            System.out.println(current_.next.lastName);
            first_ = current_.next;
        }
        else if(current_ == last_)
        {
            found_ = last_;
            Link hold_ = first_;
            first_ = prior_;
            first_.next = current_.next;
            first_ = hold_;
        }
        else
        {
            found_ = current_;
            Link hold_ = first_;
            first_ = prior_;
            first_.next = current_.next;
            first_ = hold_;
        }
    }
    return found_;
}

    public void insertFront(String f, String m, String l)
{
    Link name = new Link(f, m, l);
    if (isEmpty())
    {
        System.out.println("Adding first name");
        first_ = name;
        last_ = name;

    }
    else
    {
        System.out.println("Adding another name");
        Link hold_ = first_;
        first_ = last_;
        first_.next = name;
        last_ = first_.next;
        first_ = hold_;
    }
} 
```

我试图修复它，但我总是遇到两个不同的问题：

1.  它可以工作，但不会将链接重新插入。

    ```
     public void Sort()
    {
    Link temp_;
    boolean swapped_ = true;
    while (swapped_ == true)
    {
        swapped_ = false;
        Link current_ = first_;
        String comp_ = current_.lastName;

        while (current_ != null && current_.lastName.compareTo(comp_) >= 0)
        {
            current_ = current_.next;
        }

        if (current_ != null)
        {
            temp_ = remove(current_.lastName);
            insertFront(temp_.firstName, temp_.middleName, temp_.lastName);
            swapped_ = true;
        }
      }
    } 
    ```

2.  我收到空指针异常。

    ```
    Exception in thread "main" java. lang. NullPointerException
    at List $ Link . access $000(List . java : 25)
    at List . Sort ( List . java:165)
    at main( java :79) 
    ```

    Java 结果：1

调试结果：

```
Listening on javadebug
Not able to submit breakpoint LineBreakpoint LinearGenericSearch.java : 28, reason: The breakpoint is set outside of any class.
Invalid LineBreakpoint LinearGenericSearch.java : 28
User program running
Debugger stopped on uncompilable source code.
User program finished

    public void Sort()
        Link temp_;     
    boolean swapped_ = true;
    while (swapped_ == true)
    {
            Link current_ = first_;
            swapped_ = false;
            while (current_.next != null)
            {

                if((current_.lastName.compareTo(current_.next.lastName)) > 0)
                {
                    temp_ = remove(current_.next.lastName);
                    insertFront(temp_.firstName, temp_.middleName, temp_.lastName);
                    swapped_ = true;
                }
                current_ = current_.next;
            }
        }
    } 
```

我的问题是：我做错了什么？关于下次如何避免这种情况的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:56:25.233

在java中你不必手动完成所有这些！只需使用 LinkedList，代码

```
 compareTo() 
```

通过实施

```
 Comparable Interface 
```

（[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)）并调用

```
 Collections.sort(List list, Comparator c) 
```

( [http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html) ) 以您想要的方式进行排序。

# wordpress - Wordpress：如何仅将 widget_title 过滤器应用于某个侧边栏中的小部件？

> ID：13903918
> 
> 赞同：4
> 
> 时间：2012-12-16T17:50:56.903
> 
> 标签：wordpress, filter, widget, title

我只需要将 widget_title 过滤器应用于某个侧边栏中的小部件。如果小部件来自“页脚”，我想应用：

```
function widget_title_empty($output='') {
    if ($output == '') {
        return ' ';
    }
    return $output;
}
add_filter('widget_title', 'widget_title_empty'); 
```

给它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:01:01.427

由于您想使用硬编码的侧边栏名称，我假设您正在创建一个主题并控制打印侧边栏的代码？如果是这样，您可以先添加过滤器，然后再次将其删除，如下所示：

```
add_filter('widget_title', 'widget_title_empty');
dynamic_sidebar('footer');
remove_filter('widget_title', 'widget_title_empty'); 
```

这样，周围的侧边栏就不会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T03:42:24.380

如果您只想删除小部件标题，您可以通过`"__return_false"`作为参数传递给过滤器来执行此操作而无需创建自定义函数：

```
add_filter('widget_title', '__return_false');
dynamic_sidebar('footer');
remove_filter('widget_title', '__return_false'); 
```

请参阅[http://codex.wordpress.org/Function_Reference/_return_false](http://codex.wordpress.org/Function_Reference/_return_false)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T22:34:20.457

我更喜欢 Calle 的回答，但如果您没有这些条件，这将起作用：

```
class Example {

    protected $lastWidget = false;

    public function __construct() {
        add_filter('dynamic_sidebar_params', array($this, 'filterSidebarParams'));
    }

    /**
    * record what sidebar widget is being processed
    * @param array $widgetParams
    * @return array
    */
    public function filterSidebarParams($widgetParams) {
        $this->lastWidget = $widgetParams;

        return $widgetParams;
    }

    /**
    * check to see if last widget recorded was in sidebar
    * @param string $sidebarName
    * @return bool
    */
    public function isLastSidebar($sidebarName) {
        return $this->lastWidget && $this->lastWidget[0]['id'] == $sidebarName;
    }

}

$example = new Example();

// in your widget's code
if ($example->isLastSidebar('footer-widget-area')) {
    // you're in
} 
```

# iphone - 标签栏 iPhone - 返回按钮 -> 打开最后一个活动标签

> ID：13903920
> 
> 赞同：2
> 
> 时间：2012-12-16T17:51:04.317
> 
> 标签：iphone, xcode, back-button, tabbar

我正在使用 Xcode 制作 iPhone 应用程序。我已经利用一天中的大部分时间来寻找这个答案，但没有任何运气。（我会尽量解释清楚）

我遇到的麻烦是；

我有一个初始视图，它是一个标签栏控制器，我添加了三个视图（我们称它们为 A、B、C）。它们都有按钮，它们确实会再次转到其他视图（5、6、7）。

但是，当我在其中一个视图上按下后退按钮时，它会返回到初始视图 (A)。当从来自 A 的视图中按下后退按钮时，这是可以的，但它发生在所有视图上。

好吧，不是很好解释..

这里：

A 通向 5，当按下 5 上的返回按钮时，它返回到 A B 通向 6，当按下 6 上的返回按钮时，它返回到 A C 通向 7，当按下 7 上的返回按钮时，它返回到 A

我希望按钮 6 和 7 转到 B 和 C。（最后一个活动的标签栏项目）。说得非常简单，我希望后退按钮指向最后一个活动的标签栏视图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:43:43.343

你实际上犯了一个技术错误。您可以使用故事板 GUI 呈现您的模态视图，但要关闭模态呈现的视图，您必须编写操作代码。您可以使用

```
[self.presentingViewController dismissViewControllerAnimated:YES
                                                  completion:nil]; 
```

关闭您的模态呈现视图。

目前您正在做的（错误）是
1）您在根目录下有一个`UITabbarController`带有两个选项卡的选项卡。
2) 从第二个选项卡中，您使用模态 segue 呈现模态视图。
3）现在从这个模态视图中，你呈现另一个你的实例，而不是关闭它，`tabbarController`它显示再次选择的第一个选项卡。

因此，您必须创建一个`IBAction`并使用“返回标签栏视图”按钮将其附加。然后在里面调用上面的代码`IBAction`如下...

```
-(IBAction)backButtonTapped
{
[self.presentingViewController dismissViewControllerAnimated:YES
                                                  completion:nil];
} 
```

如果您仍然无法理解，请阅读[这个优秀的教程](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)。

# python - python scipy/numpy中的多项式pmf

> ID：13903922
> 
> 赞同：13
> 
> 时间：2012-12-16T17:51:18.513
> 
> 标签：python, numpy, scipy, probability, scientific-computing

scipy/numpy 中是否有用于获取多项式 PMF 的内置函数？我不确定是否`binom`以正确的方式概括，例如

```
# Attempt to define multinomial with n = 10, p = [0.1, 0.1, 0.8]
rv = scipy.stats.binom(10, [0.1, 0.1, 0.8])
# Score the outcome 4, 4, 2
rv.pmf([4, 4, 2]) 
```

这样做的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T14:39:08.220

没有我知道的内置函数，并且二项式概率不会泛化（您需要对一组不同的可能结果进行归一化，因为所有计数的总和必须是 n 不会被处理独立二项式）。但是，实现自己相当简单，例如：

```
import math

class Multinomial(object):
  def __init__(self, params):
    self._params = params

  def pmf(self, counts):
    if not(len(counts)==len(self._params)):
      raise ValueError("Dimensionality of count vector is incorrect")

    prob = 1.
    for i,c in enumerate(counts):
      prob *= self._params[i]**counts[i]

    return prob * math.exp(self._log_multinomial_coeff(counts))

  def log_pmf(self,counts):
    if not(len(counts)==len(self._params)):
      raise ValueError("Dimensionality of count vector is incorrect")

    prob = 0.
    for i,c in enumerate(counts):
      prob += counts[i]*math.log(self._params[i])

    return prob + self._log_multinomial_coeff(counts)

  def _log_multinomial_coeff(self, counts):
    return self._log_factorial(sum(counts)) - sum(self._log_factorial(c)
                                                    for c in counts)

  def _log_factorial(self, num):
    if not round(num)==num and num > 0:
      raise ValueError("Can only compute the factorial of positive ints")
    return sum(math.log(n) for n in range(1,num+1))

m = Multinomial([0.1, 0.1, 0.8])
print m.pmf([4,4,2])

>>2.016e-05 
```

我对多项式系数的实现有点幼稚，并且在对数空间中工作以防止溢出。另请注意，n 作为参数是多余的，因为它是由计数的总和给出的（并且相同的参数集适用于任何 n）。此外，由于对于中等 n 或大维度这将很快下溢，因此您最好在日志空间中工作（这里也提供了 logPMF！）

# google-apps-script - 多个小部件的客户端验证

> ID：13903923
> 
> 赞同：1
> 
> 时间：2012-12-16T17:51:18.573
> 
> 标签：google-apps-script

我有一个提交按钮，其启用状态取决于其他几个小部件的状态；而且我无法在 Google Apps 脚本中提出客户端解决方案来进行验证。

例如，取三个复选框。如果（如果且仅当）至少启用了一个复选框，则应启用提交按钮。

我知道我可以通过服务器端验证来做到这一点，但应该不需要这么简单的东西。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:25:15.610

完全可以编写依赖于多个小部件状态的客户端处理程序，因为您可以将多个`validateX`调用链接到单个处理程序上。这里的问题是`clientHandlers`无法验证复选框状态。

我已经打开了一个关于这个问题的问题，你可能想给它加星标以跟踪更新和投票：

[问题 2220：复选框的 UiApp 处理程序 validateValue](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2220)

无论如何，有可能解决这个问题，我只是向您展示可以根据多个小部件值使用处理程序，但是当问题 2220 得到解决时，此代码会简单得多：

```
function doGet(e) {
  var app = UiApp.createApplication().setTitle('Checkbox Test');
  var panel = app.createVerticalPanel(),
      noChecked = app.createClientHandler(),
      button = app.createButton('Test').setEnabled(false);

  for( var i = 0; i < 3; ++i ) {
    var cb1 = app.createCheckBox('cb'+i),
        cb2 = app.createCheckBox('cb'+i).setVisible(false),
        tb = app.createTextBox().setValue('false').setVisible(false);
    cb1.addClickHandler(app.createClientHandler().forTargets(cb2).setValue(true).setVisible(true).forEventSource().setVisible(false).forTargets(tb).setText('true'));
    cb2.addClickHandler(app.createClientHandler().forTargets(cb1).setValue(false).setVisible(true).forEventSource().setVisible(false).forTargets(tb).setText('false'));
    cb1.addClickHandler(app.createClientHandler().forTargets(button).setEnabled(true));
    cb2.addClickHandler(noChecked.validateMatches(tb,'false'));
    panel.add(cb1).add(cb2).add(tb);
  }
  noChecked.forTargets(button).setEnabled(false);  

  return app.add(panel.add(button));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:44:49.660

ClientHandlers 是故意简单的。你可以用ServerHandlers做任意代码，速度差异应该比较小。否则，是的，这是设计使然，如果您需要更复杂的客户端逻辑，则需要使用 HtmlService。

UiApp 和 HtmlService 之间的权衡与我们如何保证您不能从脚本中提供恶意代码有关。UiApp 代码使用限制性但绝对安全的简单构建器模式，而 HtmlService 使用复杂的沙箱来实现该目标，权衡不适用于旧浏览器和其他一些限制。

如果我理解正确的话，这个特定的用例在 UiApp 中是可行的。如果您想要一个可以翻转的显示/隐藏按钮的示例，这里有一个：

```
function doGet() {
  var app = UiApp.createApplication();
  var label = app.createLabel("I am a toggleable widget").setVisible(false);
  var show = app.createButton("show");
  var hide = app.createButton("hide").setVisible(false);
  show.addClickHandler(app.createClientHandler()
      .forTargets(label, hide).setVisible(true).forTargets(show).setVisible(false));
  hide.addClickHandler(app.createClientHandler()
      .forTargets(label, hide).setVisible(false).forTargets(show).setVisible(true));
  return app.add(show).add(hide).add(label);
} 
```

基本上，使用 2 个按钮并翻转按钮的可见性。

复选框实际上是经过验证的 - 但验证的是它们的文本，而不是它们的值：

```
var app = UiApp.createApplication();
var check = app.createCheckBox();
check.setText("foo").addClickHandler(
    app.createServerHandler("clicked").validateMatches(check, "foo"));
return app.add(check); 
```

问题跟踪器请求是合理的。

# css - 如何将css宽度设置为最长文本的长度

> ID：13903929
> 
> 赞同：22
> 
> 时间：2012-12-16T17:52:09.197
> 
> 标签：css, width

我有一个相当具有挑战性的任务。

我这里有这个菜单... [http://jsfiddle.net/K2Zzh/6/](http://jsfiddle.net/K2Zzh/6/)

如果您将鼠标悬停在“治疗”上，下拉菜单的宽度设置为 150 像素，这很好，但是，如果您将鼠标悬停在“善后”上，您会看到此宽度太宽。我已经尝试过最小宽度、自动、内联块，但到目前为止还没有运气。

与其为每个下拉菜单创建一个单独的类，是否有一种巧妙的方法可以将宽度设置为仅与每个菜单最长的文本一样大？

我用于下拉菜单的 CSS 代码...

```
.dropdown ul {
  position: absolute;
  top: 43px;
  z-index: 100;
  border-left: 1px solid #f6634c;
  border-bottom: 1px solid #f6634c;
  border-right: 1px solid #f6634c;
}
.dropdown ul li a {
  background-color: #fff;
  width: 150px;
  text-align: left;
}​ 
```

提前致谢。

我的 HTML 代码...

```
<ul class="mainNav">
  <li><a href="">Home</a></li>
  <li class="dropdown">
    <a href="">Treatments</a>
    <ul>
      <li><a href="">Body Treatments</a></li>
      <li><a href="">Make Up</a></li>
      <li><a href="">Skincare</a></li>
      <li><a href="">Hand & Feet Treats</a></li>
      <li><a href="">Hair Removal</a></li>
      <li><a href="">Alternative Therapies</a></li>
      <li><a href="">Eye Enhancements</a></li>
    </ul>
  </li>
  <li><a href="">Gallery</a></li>
  <li class="dropdown">
    <a href="">Aftercare</a>
    <ul>
      <li><a href="">Body</a></li>
      <li><a href="">Make up</a></li>
      <li><a href="">Skin</a></li>
      <li><a href="">Hand</a></li>
    </ul>
  </li>
  <li><a href="">Contact</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-16T18:09:19.343

*第一步：*删除固定宽度`.dropdown ul li a`

*第二步：*添加css`li li {width:100%;}`

*第三步：*添加`.mainNav li a {white-space:nowrap;}`

**准备好了：http:** [//jsfiddle.net/K2Zzh/10/](http://jsfiddle.net/K2Zzh/10/)

​</p>

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T17:56:34.107

尝试在你的`white-space: nowrap`课堂上`width: auto``.dropdown ul li a`

[http://jsfiddle.net/K2Zzh/8/](http://jsfiddle.net/K2Zzh/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T17:59:20.467

将宽度设置为 "li" 而不是 "a" ，您也可以使用填充

```
.dropdown ul li {
    width: auto;
    padding:5px;
    display:block;
}​ 
```

我认为它应该有效

# android - Android MediaMetadataRetriever.getFrameAtTime 跳过帧

> ID：13903936
> 
> 赞同：1
> 
> 时间：2012-12-16T17:53:17.103
> 
> 标签：android, media, video-processing

我编写了一个简单的 Android 应用程序，它使用`MediaMetadataRetriver`类来获取帧。它工作正常，只是我意识到它会跳过帧。

我试图解码的视频剪辑是用手机摄像头拍摄的。按照相关的代码片段：

```
MediaMetadataRetriever mediaDataRet = new MediaMetadataRetriever();
            mediaDataRet.setDataSource(path);

            String lengthMsStr = mediaDataRet
                    .extractMetadata(mediaDataRet.METADATA_KEY_DURATION);
            final long lenMs = Long.parseLong(lengthMsStr);

            String widthStr = mediaDataRet
                    .extractMetadata(mediaDataRet.METADATA_KEY_VIDEO_WIDTH);
            int width = Integer.parseInt(widthStr);
            String heightStr = mediaDataRet
                    .extractMetadata(mediaDataRet.METADATA_KEY_VIDEO_HEIGHT);
            int height = Integer.parseInt(heightStr); 
```

注意变量`lenMs`，它以毫秒为单位保存 clid 持续时间。然后对于我做的每一帧：

```
 int pace = 30; // 30 fps ms spacing 

                for (long i = 0; i < lenMs; i += pace) {

                    if (is_abort())
                        return;

                    Bitmap bitmap = mediaDataRet.getFrameAtTime(i * 1000); // I tried the other version of this method with OPTION_CLOSEST, with no luck.

                    if (bc == null)
                        bc = bitmap.getConfig();

                    bitmap.getPixels(pixBuffer, 0, width, 0, 0, width, height);
[...]
} 
```

*在目视*检查后，我注意到一些帧被跳过（如短序列）。为什么？我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-07T16:43:25.077

利用：

```
mediaDataRet.getFrameAtTime(i * 1000, MediaMetadataRetriever.OPTION_CLOSEST); 
```

只会给你关键帧的`getFrameAtTime(n)`用途。`OPTION_CLOSEST_SYNC`

# iphone - 将自定义按钮添加到 UINavigationItem LeftBarButtonItem

> ID：13903939
> 
> 赞同：1
> 
> 时间：2012-12-16T17:53:31.817
> 
> 标签：iphone, ios, uibarbuttonitem

谁能告诉我为什么这段代码不起作用？

```
self.backButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.backButton setImage:[UIImage imageNamed:@"back_arrow.png"]
                 forState:UIControlStateNormal];
self.backButton.contentMode = UIViewContentModeCenter;
[self.backButton addTarget:self
                    action:@selector(backButtonAction:)
          forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:self.backButton];
[navigationItem setLeftBarButtonItem:backButtonItem animated:NO];
navigationItem.hidesBackButton = YES; 
```

编辑：

上什么都没有出现`leftBarButtonItem`。那就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:57:10.807

这应该工作

```
CGRect rect = CGRectMake(10, 0, 30, 30);
self.backButton = [[UIButton alloc] initWithFrame:rect];
[self.backButton setImage:[UIImage imageNamed:@"back_arrow.png"]
                 forState:UIControlStateNormal];
self.backButton.contentMode = UIViewContentModeCenter;
[self.backButton addTarget:self
                    action:@selector(backButtonAction:)
          forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:self.backButton];
self.navigationItem.leftBarButtonItem = backButtonItem;
self.navigationItem.hidesBackButton = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:15:11.360

从文档：

> “在创建自定义按钮（即 UIButtonTypeCustom 类型的按钮）时，按钮的框架最初设置为 (0, 0, 0, 0)。在将按钮添加到界面之前，您应该将框架更新为更合适的值。”

因此，如果您在第 2 行设置框架，您应该会看到一些内容，例如：

```
self.backButton.frame = CGRectMake(0, 0, 40, 20); 
```

# actionscript-3 - 需要帮助在 as3/flash 中创建列表

> ID：13903947
> 
> 赞同：0
> 
> 时间：2012-12-16T17:54:18.290
> 
> 标签：actionscript-3, flash

我想在 flash/as3 中创建一个可滚动列表，重要的是....如果用户想向上或向下移动某些列表项...他可以通过拖动项目来做到这一点...所以当他按下并按住一个项目......该项目将变得可拖动，并且当用户在列表中向上或向下移动它时，其他项目应该滑动到空白空间。它与智能手机中的行为相同....

我会弄清楚创建、数据填充、滚动和其他鼠标交互事件....我只是想帮助解决这个行为....通过拖动来更改项目的顺序。如果只有某人可以提供基本算法或任何想法如何实现这一点..就足够了。

提前致谢

**编辑：**

首先......我很抱歉没有发布关于这个问题的任何细节......（这是我在这个网站上的第一篇文章），因此我添加了所有的研究和我到目前为止所做的事情。

*   该列表是一个大项目的一部分，因此我无法共享整个代码。

我已经做了什么：

*   我已经创建了一个掩码、一个容器、一个滚动容器来滚动容器、添加到列表中的项目、添加项目的方法、删除项目并根据顺序排列它们。
*   因此，它是一个可书写的工作清单。
*   整个事情都在 as3 和 flash 中。
*   我不知道 flex，我也不想使用它。

接下来我想要什么：

*   我想通过（鼠标按下项目->向上/向下拖动->鼠标向上）序列更改这些项目的顺序。

如果有人想要更多细节，我可以分享。

提前致谢.. ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:40:53.450

最后我从其他论坛得到了答案。

这是我要添加到列表中的示例（行为）的链接：

[http://www.learningactionscript3.com/2008/05/13/the-power-of-relative-positioning/](http://www.learningactionscript3.com/2008/05/13/the-power-of-relative-positioning/)

（在底部的“高级对齐示例”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:12:06.537

向应用程序添加一个简单的 List 组件

在此示例中，列表由标识汽车型号的标签和包含价格的数据字段组成。

创建一个新的 Flash (ActionScript 3.0) 文档。

将 List 组件从“组件”面板拖到舞台上。

在属性检查器中，执行以下操作：

输入实例名称 aList 。

将值 200 分配给 W（宽度）。

使用文本工具在 aList 下方创建一个文本字段，并为其指定实例名称 aTf 。

打开 Actions 面板，在主 Timeline 中选择 Frame 1，然后输入以下 ActionScript 代码：

```
import fl.controls.List; 
import flash.text.TextField; 

aTf.type = TextFieldType.DYNAMIC; 
aTf.border = false; 

// Create these items in the Property inspector when data and label 
// parameters are available. 
aList.addItem({label:"1956 Chevy (Cherry Red)", data:35000}); 
aList.addItem({label:"1966 Mustang (Classic)", data:27000}); 
aList.addItem({label:"1976 Volvo (Xcllnt Cond)", data:17000}); 
aList.allowMultipleSelection = true; 

aList.addEventListener(Event.CHANGE, showData); 

function showData(event:Event) { 
    aTf.text = "This car is priced at: $" + event.target.selectedItem.data; 
} 
```

此代码使用 addItem() 方法用三个项目填充 aList，为每个项目分配一个标签值（出现在列表中）和一个数据值。当您在 List 中选择一个项目时，事件侦听器调用 showData() 函数，该函数显示所选项目的数据值。

选择 Control > Test Movie 来编译和运行这个应用程序。

来源：[http ://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fa6.html](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fa6.html)

# php - 不能在 PHP 中结合 strpos 和 !empty，为什么？

> ID：13903948
> 
> 赞同：0
> 
> 时间：2012-12-16T17:54:21.460
> 
> 标签：php

我在 PHP 中有两行，如果我合并会导致我的页面停止加载...不幸的是，我没有使用 的错误消息`error_reporting(E_ALL | E_STRICT); ini_set('display_errors', true);`，并且我的 apache error.log 文件中没有任何内容。

**这有效：**

```
$user_setup = strpos($_SESSION['user'], "@");
if (!empty($user_setup)) {.... 
```

**但是，这不会：**

```
if (!empty(strpos($_SESSION['user'], "@"))) {.... 
```

该功能是否存在`strpos`导致此功能不起作用的问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T17:58:44.220

[empty()](http://php.net/empty)实际上是一种语言构造而不是函数。此外，它不会将变量作为参数。

# html - 输入不会让我输入任何内容

> ID：13903949
> 
> 赞同：0
> 
> 时间：2012-12-16T17:54:22.160
> 
> 标签：html, css

我有一个在 div`absolute-positioned`下的`fixed`div。然后我尝试插入一个带有 an 的表单`<input>`，它不会让我输入任何内容。

```
#navbar {
    width: 100%;
    padding: 30px;
    position: fixed;
    background-color: #0066CC;
    box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
    -moz-box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
    -webkit-box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
}

#main_index {
    left: 8%;
    right: 8%;
    width: 85%;
    top: 300px;
    z-index: -1;
    min-height: 100px;
    position: absolute;
    border: 1px solid #CCCCCC;
    background-color: #FFFFFF;
}

<div id="navbar"><center><b>NAVBAR</b></center></div>

<div id="main_index">
    <div id="index_login">
        <form action="login" method="post">
            <input type="text" required="required" name="username">
            <br />
            <input type="password" required="required" name="password">
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:02:25.783

我相信至少您的部分问题是中心标签已被贬值。使用属性为“align:center;”的样式表 并将其应用于您的 DIV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:16:16.847

我认为你应该尝试：

```
#navbar {
width: 100%;
padding: 30px;
position: fixed;
z-index: 2;<----------------------bigger than #main_index
background-color: #0066CC;
box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
-moz-box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
-webkit-box-shadow:  0px 10px 40px 3px rgba(0, 0, 0, 0.5);
}

#main_index {
left: 8%;
right: 8%;
width: 85%;
top: 300px;
z-index: 1;<--------------------- positive
min-height: 100px;
position: absolute;
border: 1px solid #CCCCCC;
background-color: #FFFFFF;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:08:09.537

我不太确定你的 html 的其余部分是什么样子，但你确定它`#navbar`没有溢出你的`#main_index`div。尝试添加用于测试目的：

```
height:100px;
overflow:hidden; 
```

在你的`#navbar`css 风格上，看看会发生什么。

# jquery - 我可以在画布元素中绘制表格吗？

> ID：13903952
> 
> 赞同：4
> 
> 时间：2012-12-16T17:54:44.937
> 
> 标签：jquery, html, image-processing, html5-canvas

有没有办法（插件、工作解决方案等）将 a 绘制`HTML` `table`到`<canvas>`元素中？

我有一个格式丰富的 html 表（使用`CSS`），我想使用`jQuery`. ...或者如果有任何最简单的方法，我正在听。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T19:56:46.357

[**工作演示**](http://jsfiddle.net/YZMhk/2/)

当然，这是可能的。您可以将 DOM 对象绘制到画布中。这是您需要的代码：

```
<p><canvas id="canvas" style="border:2px solid black;" width="200" height="200"></canvas>
<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var data = "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
             "<foreignObject width='100%' height='100%'>" +
               "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>" +
                  "<table border='1'><tr><td>row 1, cell 1</td><td>row 1, cell 2</td></tr><tr><td>row 2, cell 1</td><td>row 2, cell 2</td></tr></table>" +
               "</div>" +
             "</foreignObject>" +
           "</svg>";

var DOMURL = self.URL || self.webkitURL || self;
var img = new Image();
var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
var url = DOMURL.createObjectURL(svg);
img.onload = function() {
    ctx.drawImage(img, 0, 0);
    DOMURL.revokeObjectURL(url);
};
img.src = url;
</script>​ 
```

[您可以在 Mozilla 开发者网络上找到更多信息](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas#Example)

# c# - 如何访问此 StripeCharge 映射器对象？

> ID：13903954
> 
> 赞同：1
> 
> 时间：2012-12-16T17:54:59.167
> 
> 标签：c#

stripe.com 将此发送到我的 ashx 文件

```
{
"type": "charge.refunded",
"livemode": false,
"object": "event",
"created": 1326853478,
"id": "evt_00000000000000",
"data": {
 "object": {
  "livemode": false,
  "fee_details": [
    {
      "application": null,
      "type": "stripe_fee",
      "amount": 0,
      "currency": "usd",
      "description": "Stripe processing fees"
    }
  ],
  "amount_refunded": 0,
  "invoice": null,
  "failure_message": null,
  "object": "charge",
  "created": 1355641115,
  "amount": 0,
  "customer": null,
  "currency": "usd",
  "card": {
    "address_state": null,
    "exp_year": 2012,
    "type": "Visa",
    "address_country": null,
    "country": "US",
    "address_line1": null,
    "fingerprint": "thIB5TIJqKMnqdMm",
    "address_line2": null,
    "last4": "4242",
    "object": "card",
    "cvc_check": "pass",
    "address_city": null,
    "address_zip_check": null,
    "name": null,
    "address_zip": null,
    "exp_month": 12,
    "address_line1_check": null
  },
  "id": "ch_00000000000000",
  "dispute": null,
  "paid": true,
  "refunded": true,
  "fee": 0,
  "description": null
}
}
} 
```

然后我使用来自 [https://github.com/jaymedavis/stripe.net](https://github.com/jaymedavis/stripe.net)的代码， 它显示了这样做：

```
var json = new StreamReader(context.Request.InputStream).ReadToEnd();
var stripeEvent = StripeEventUtility.ParseEvent(json); 
var StripeCharge = Stripe.Mapper<StripeCharge>
                   .MapFromJson(stripeEvent.Data.Object.ToString()); 
```

但是现在我如何从 stripeCharge var 中找到例如 amount_refunded 或描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:47:55.527

StripeCharge.CustomerId.ToString(); 对我来说，问题是不理解 StripeCharge 在声明为 var 时是一个将在运行时填充的动态表达式。

因此，当我在 Visual Studio 中键入 StripeCharge dot 时，我没有看到任何属性。\ 所以我认为它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:00:32.970

深入了解 stripecharge 类的成员。如果您可以将代码与类一起粘贴（以防您的问题是开放的），那就太好了。我可以在这里看到你已经回答了你的问题，所以请说明这一点

# javascript - setInterval + clearIntervalInside + 参数 -no jquery-

> ID：13903955
> 
> 赞同：0
> 
> 时间：2012-12-16T17:55:02.060
> 
> 标签：javascript, parameters, dom-events, setinterval, clearinterval

我需要定期调用一个函数`setInterval`并向其传递参数。同时，我需要清除鼠标移动时调用的函数内部的时间间隔。

所以我正在尝试这个：

```
var timer = setInterval(function(x,y){ // When I use this, x and y are undefined.

  /*
   Code
  */

  document.getElementById("wholeDocument").onmousemove=clearInterval(timer);

  }, 50); 
```

这个想法是要知道如何在内部使用带有 clearInterval 的 setinterval 并能够传递参数。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:06:28.167

```
var timer = null;
document.getElementById("wholeDocument").onmousemove= function(evt) {
    if (timer) {
      clearInterval(timer);
      timer = null;
    }
    x = evt.clientX;
    y = evt.clientY;
    var timer = setInterval(function() { fnTimer(x, y); }, 50);
};

function fnTimer(x, y) {
  // your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:05:24.370

除了可以根据您要实现的目标进行改进的概念之外，这条线

```
document.getElementById("wholeDocument").onmousemove=clearInterval(timer); 
```

应该

```
document.getElementById("wholeDocument").onmousemove = function(e) { clearInterval(timer); } 
```

# android - 向通知图标添加文本

> ID：13903959
> 
> 赞同：5
> 
> 时间：2012-12-16T17:55:15.530
> 
> 标签：android, icons, statusbar, android-notifications, android-icons

我想制作一个带有文本的通知图标，例如显示剩余电量百分比。有没有办法不涉及 100 多个单独的图标？

我找遍了所有地方，但找不到方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:20:27.203

不幸的是，有 100 多个单独的图标。由于安全原因，android 只接受也不能是自定义资源类型的资源 ID。

很高兴知道我是否错了。

# perl - Perl映射功能不起作用

> ID：13903961
> 
> 赞同：1
> 
> 时间：2012-12-16T17:55:38.950
> 
> 标签：perl, paste, filehandle, initialization

我有个问题。这个 perl 程序应该打开所有文件并将它们映射在一起，类似于 unix 系统中的粘贴命令。

```
my @files;
for (@fileList ? @fileList : qw(-)) {
open  $files[@files], '<', $_; #}
}
while (grep defined, (my @lines = map {scalar <$_>;} @files)) {
    chomp @lines;
    print join("\t", @lines), "\n";
} 
```

问题是，当涉及到两个不同的文件时

```
One 
Two 
Three 
```

和：

```
Apple
Banana
Orange
Kiwi 
```

它给我一个未初始化值的错误。

```
Use of uninitialized value $lines[0] in chomp 
Use of uninitialized value $lines[0] in join 
```

同样的错误反之亦然，当文件是 Apple、Banana.. 和一二三时。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:38:42.937

问题是由于您的文件具有不同的长度，您将在`@lines`数组中获得一些未定义的值。您不能在 while 条件中将它们过滤掉，但您可以在之后在循环内将它们过滤掉：

```
while (grep defined, (my @lines = map {scalar <$_>;} @files)) {
    @lines = map defined($_) ? $_ : "", @lines; 
```

这将用空字符串替换未定义的值，删除`uninitialized`这些值的任何警告，同时保持标签正确对齐。

请注意，您的代码实际上做了它应该做的事情，因为`undef`它将字符串化为空字符串。只是因为您有警告，您才会收到有关它的警告。但是，打开警告是一个非常好的主意，因此可以找到并正确修复此类错误。

您应该注意，`open`不检查其返回值就使用它不是一个好主意，除非您明确处理失败的情况。正确的方法是这样做：

```
open $files[@files], '<', $_ or die $!; 
```

为简单起见，也可以使用

```
use autodie; 
```

该[`autodie`](http://search.cpan.org/perldoc?autodie)模块将对关键函数调用产生致命错误，例如`open`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:12:09.063

如果您安装了 Perl v5.10 或更高版本（您确实应该安装，因为它现在已经有 5 年历史了），那么您可以使用`//`(defined-or) 运算符在文件末尾替换空字符串`undef`。它还将对其操作数施加标量上下文，因此无需使用`scalar`运算符。此外，您必须将`length`运算符替换为`defined`，从而生成此代码

```
while (grep length, (my @lines = map { <$_> // '' } @files)) {
    chomp @lines;
    print join("\t", @lines), "\n";
} 
```

# c# - DateTime.Now.ToUniversalTime() 的年份错误

> ID：13903967
> 
> 赞同：5
> 
> 时间：2012-12-16T17:56:23.823
> 
> 标签：c#, asp.net, date, globalization, datetime-format

和想法 为什么年份显示为**2555**？

![在此处输入图像描述](../Images/1952155c86258fa85f9a933c126de8b6.png)

该网站的文化是泰国文化

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T17:58:01.230

是 - 任何时间`DateTime`都转换为未指定明确文化的字符串，它将使用当前文化的日历系统。但是，`DateTime`组件本身仍然反映公历。

如果您使用以下命令，您将看到 2555：

```
int thaiYear = new ThaiBuddhistCalendar().GetYear(DateTime.Now); 
```

基本上，如果您想以编程方式获取特定于文化的日期信息，您需要使用`System.Globalization.Calendar`. 格式化日期时，请确保为要使用的日历指定正确的文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:59:15.320

泰国人有不同的日历。

让我引用：

> 佛历与公历相差543年。欧洲的 2012 年是泰国的 2555 年。

来自[http://www.thaiworldview.com/feast/feast.htm](http://www.thaiworldview.com/feast/feast.htm)

# php - ob_flush 需要很长时间才能执行

> ID：13903970
> 
> 赞同：10
> 
> 时间：2012-12-16T17:56:35.767
> 
> 标签：php, performance, drupal-7, output-buffering

在我的网站（使用 drupal 运行）中，该`ob_flush`功能需要很长时间（10 - 100 秒之间）才能执行。我如何找出原因？是什么导致了这么长时间？ ![在此处输入图像描述](../Images/c2ccdc6f140fccf482f3097b32042950.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T22:02:20.040

尝试这个：

```
ob_start();
//Your code to generate the output
$result = ob_get_contents(); //save the contents of output buffer to a string
ob_end_clean();
echo $result; 
```

它对我来说运行得很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T23:33:55.557

[您可能想用 Drupal 标记您的问题，因为这感觉可能是 Drupal 问题。具体来说，我怀疑当你刷新缓冲区时，你正在写入一个外部缓冲区，这会触发大量的钩子被调用来过滤你刚刚写入的数据。]

我怀疑你的问题是嵌套缓冲区。Drupal 真的很喜欢缓冲区，并且可以在所有地方缓冲所有内容。检查结果：

```
echo "<pre>\nBuffering level: ";
    . ob_get_level() .
    . "\nBuffer status:\n"
    . var_dump(ob_get_status(TRUE))
    . "\n</pre>"; 
```

如果你有嵌套的缓冲区，那么我怀疑 ob_flush() 不会为你做任何事情：它只是将你的内部缓冲区的内容附加到下一个最外层的缓冲中。

嵌套缓冲区可以来自 Drupal 本身（上面将显示），或者来自 zlib-output-compression 和 output_buffering 的设置（尝试旋转它们，看看它是否改变了任何东西）。

如果您的缓冲区没有嵌套，并且上述设置没有帮助，那么您可能还希望将操作拆分为多个部分，并在那里运行分析器，以查看哪个部分花费了时间：

```
$data = ob_get_contents(); // Return the contents of the output buffer.
ob_clean(); // Clean (erase) the output buffer.
ob_end(); // Close the buffer.
echo($data); // Output our data - only works if there's no outer buffer!
ob_start(); // Start our buffer again. 
```

那么问题就变成了，“你想要完成什么？” 你认为 ob_flush() 在这里做什么？因为如果答案是“我想将迄今为止所做的一切推送到浏览器”......那么我担心 ob_flush() 不是正确的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-14T21:05:01.543

放

`output_buffering = Off`

在 php.ini 中

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-29T06:55:16.290

利用

```
<?ob_start();?> 
```

在页面的开头和

```
 <?ob_flush();?> 
```

在页面的末尾，来解决这个问题。

# javascript - JavaScript 重新格式化 JSON 数组

> ID：13903978
> 
> 赞同：0
> 
> 时间：2012-12-16T17:56:58.960
> 
> 标签：javascript, json

我对 JSON 表示法相对较新，并且在尝试重新格式化时遇到了问题。数据库中包含的当前格式需要修改为新格式，以便导入到项目时间线图中。

这是当前的 JSON 格式：

```
[
{
  "name":"5-HP-N/A-N/A-F8",
  "node":{
     "name":"5",
     "id":14
  },
  "timeline":{
     "epc":null,
     "m1":null,
     "m2":null,
     "m3":1554087600000,
     "m4":1593572400000,
     "m5":1625108400000,
     "m6":1641006000000,
     "m7":1656644400000
  },
  "fab":{
     "name":"F8",
     "id":1
  }
}, 
```

但是，为了在图表中显示，我需要以下格式：

```
 {
  'start': new Date(value from epc, or first non-null milestone),
  'end': new Date(value from m1 or first non-null milestone),  // end is optional
  'content': 'label from start Date milestone'
  'group' : ' value from name field above 5-HP'
  'classname' : ' value from start Date milestone' 
}); 
```

我正在尝试编写一个函数来实现这一点。只有 epc、m1 或 m2 的值可能为 null，但必须检查条件以确定是否应创建事件范围以及应在何处结束。重新格式化此 json 数据（最好来自外部 json 表）的最佳方法是什么？

**编辑**：感谢所有帮助我看到它现在是如何工作的！我相信我第一次没有很好地解释，我实际上每个“组”需要多个类项目。

最终结果是这些将内联显示在时间线图“组”线上，因此我试图弄清楚如何为上面显示的每个数组元素创建多个新对象。

所以从技术上讲，第一个的开始日期 = m3，结束日期 = m4。然后，下一个对象将与第一个对象具有相同的组（5-HP...），开始日期 = m4，结束日期 = m5...等。这将一直持续到达到 m7（始终是结束日期，但绝不是开始日期）。

这就是为什么循环不是那么简单，要检查的条件很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:19:08.927

在这里看到一个工作小提琴：http: [//jsfiddle.net/K37Fa/](http://jsfiddle.net/K37Fa/)

你的输入数据似乎是一个数组，所以我围绕它建立了一个循环。如果不只是看到输入数据是一个简单对象的这个小提琴：http: [//jsfiddle.net/K37Fa/1/](http://jsfiddle.net/K37Fa/1/)

```
var i 
  , result = [],
  , current
  , propCounter
  , content = [ { "name":"5-HP-N/A-N/A-F8", "node":{ "name":"5", "id":14 }, "timeline":{ "epc":null, "m1":null, "m2":null, "m3":1554087600000, "m4":1593572400000, "m5":1625108400000, "m6":1641006000000, "m7":1656644400000 }, "fab":{ "name":"F8", "id":1 } }],

// get the milestone in a function
getMileStone = function(obj) {
  propCounter = 1;
    for(propCounter = 1; propCounter <= 7; propCounter++) {
        // if m1, m2 and so on exists, return that value
        if(obj.timeline["m" + propCounter]) {
            return {key: "m" + propCounter, value: obj.timeline["m" + propCounter]};
        }
    }
};

// loop over content array (seems like you have an array of objects) 
for(i=0;i< content.length;i++) {
  current = content[i];
  firstMileStone = getMileStone(current); 
  result.push({
    'start': new Date(current.epc || firstMileStone.value),
    'end': new Date(current.m1 || firstMileStone.value),
    'content': firstMileStone.key,
    'group' : current.name,
    'classname' : firstMileStone.value
 });
} 
```

编辑： getMileStone 只是一个辅助函数，所以你可以随心所欲地调用它。例如当前[i+1]：

```
secondMileStone = getMileStone(current[i + 1]) 
```

你应该检查一下，如果你还没有在你的数组的最后一个元素。如果是这样 current[i+1] 是未定义的，那么辅助函数应该返回未定义。

然后，您可以将 firstMileStone 用作后备：

```
secondMileStone = getMileStone(current[i + 1]) || firstMileStone; 
```

查看更新的小提琴（包括检查 getMileStone-Helperfunction）：http: [//jsfiddle.net/K37Fa/6/](http://jsfiddle.net/K37Fa/6/)

# html - 对齐 2 在 div 内一左一右

> ID：13903979
> 
> 赞同：5
> 
> 时间：2012-12-16T17:57:20.087
> 
> 标签：html, css, positioning

任何人都可以编写 CSS 片段来执行此操作吗？

```
<div class="container">
  <span class="left">Left</span><span class="right">Right</span>
</div> 
```

这是 CSS 的`.container`：

```
.container {
    position:absolute;
    bottom:0;
    margin: 0 5px 5px 5px;
} 
```

请注意，该位置是绝对的，因为它在其包含元素上是“绝对定位的”。

我已经在两个嵌套元素上尝试过`float:left`/但没有任何反应。`float:right`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T17:59:38.900

将元素设置为块，设置宽度并浮动它们。

```
.left{
  display: block;
  float:left;
  width: 100px;
}

.right{
  display: block;
  float:right;
  width: 100px;
} 
```

示例：http: [//jsfiddle.net/LML2e/](http://jsfiddle.net/LML2e/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:59:54.070

`float: left``float: right`当您为您的`.container`div设置（相对或绝对）宽度时，它将完美地工作

[演示](http://jsfiddle.net/RBFJ5/)

```
.container {
    position:absolute;
    bottom:0;
    margin: 0 5px 5px 5px;
    width: 200px; //either absolute width
    width: 100%;  // or relative width
} 
```

*旁注：*如果你设置`.container`为`width: 100%`你会得到丑陋的滚动条，因为`margin`. 只需`margin`在`.left`和`.right`类中使用。见[这里](http://jsfiddle.net/RBFJ5/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:02:09.450

您需要设置宽度才能使用`float`. 如果您想要 100% 的宽度，您可以将`.container { width: 100%; }`代码设置或改进为：

```
.container {
    position:absolute;
    bottom:5px;
    left:5px;
    right:5px;
} 
```

# html - 如何对齐 Bootstrap 导航栏中留下的品牌标题和链接？

> ID：13903981
> 
> 赞同：9
> 
> 时间：2012-12-16T17:57:30.177
> 
> 标签：html, css, twitter-bootstrap

我是 Bootstrap 的新手，我一直在努力了解导航栏。我注意到，当浏览器全宽（宽屏）时，品牌标题和导航锚点保持在页面的左侧中心，而不是像窗口较小时那样对齐页面的最左侧。如何使导航栏中的文本紧贴页面左侧？无论浏览器窗口有多宽，我都希望能够使其粘在窗口的左侧。有什么特别的理由不这样做吗？

这是**[关于 jsFiddle 的现场演示](http://jsfiddle.net/CoryG89/DEgPw/1/)**。请注意，如果您拉动手柄并将视口尽可能向左扩大，文本最终将移向导航栏的中心。

我的导航栏标记与引导程序提供的启动器演示相同，我知道响应功能和图标并没有在小提琴中连接，但是它们正在我的本地项目中工作并且与问题无关。我想我需要在我的自定义 CSS 左侧进行文本对齐，但是我尝试应用它失败了。任何帮助将非常感激。

```
 <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T18:13:44.643

该品牌是“居中”的，因为它位于容器 div 内，并且该容器 div 始终以不同的宽度居中，这取决于您的视口或浏览器窗口的宽度。

我建议你保持这种方式，因为它使它看起来更对称。如果您仍想更改它，您需要做的就是从容器 div 中删除品牌链接。像这样：

```
<div class="navbar navbar-inverse navbar-fixed-top">
   <div class="navbar-inner">
      <a class="brand" href="#">Project name</a>
      <div class="container">
         <div class="nav-collapse collapse">
         ... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-15T22:32:04.920

也许有更简单的方法可以做到这一点（至少使用最新版本的引导程序）。

只需替换`<div class="container">`by `<div class="container-fluid">`。

这将确保标题内容的容器跨越整个页面宽度。

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <a class="brand" href="#">Project name</a>
    <div class="nav-collapse collapse">
... 
```

# php - 知道是否使用 AJAX 调用页面的任何方法

> ID：13903989
> 
> 赞同：1
> 
> 时间：2012-12-16T17:58:24.343
> 
> 标签：php, javascript, jquery, ajax, security

有没有办法知道页面是否使用 AJAX 调用？我们使用了一个通过 POST 方法发送的附加变量，我知道[http_x_requested_with](https://stackoverflow.com/questions/7595688/is-ajax-called-this-method)。但是我在一个与安全相关的博客上的某个地方读到它们都可以很容易地（？）被劫持。那么是否有一种安全的方法可以知道：它是否是 AJAX 请求？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:13:48.433

`x-requested-with`可以很容易地改变，客户端。

...但是标头的重点不是提供安全的登录信息或会话安全性，而是要弄清楚如何处理传入的请求。

如果我在不设置标题的情况下发送`GET`请求`data.php`，那么我可能需要提供一个 XML 文件，或者我可能需要提供具有完整站点功能的整个 HTML 页面，该页面在用户中具有该数据的列表或表格-可读格式。

同时，如果设置了标头，也许我只是发送一个 JSON 响应，以便客户端可以刷新自身或在页面上加载新的小部件。

这一切都不是为了保护或提供安全性。这就像将视频游戏安全性与分辨率/图形设置联系起来。

如果客户强制执行特定设置，而他们无法处理响应，那就很难了。

如果客户强制设置，而您只是因为他们这样做而向他们提供各种敏感数据，那么该设置就在您身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:02:53.123

没有安全的方法来检测 Ajax 调用。所有请求都可以被欺骗。您无法以这种方式提供安全性。您需要设置适当的安全性，例如通过基于会话的登录系统。

# linux - xorg源代码复制粘贴

> ID：13903994
> 
> 赞同：1
> 
> 时间：2012-12-16T17:58:57.567
> 
> 标签：linux, xorg

有人知道 xorg 源代码中的复制/粘贴例程绑定到鼠标左键（复制）和中键（粘贴）吗？

**更多数据**：当您使用鼠标左键（普通文本选择）在 X 会话中选择任何文本时，它会被复制到某个“剪贴板”。接下来，当您在任何输入控件/窗口中单击鼠标中键时，文本将被粘贴。

**为什么我需要它**：我需要它是因为我想稍微改变一下这个功能。与 MsWindows Ctrl-c Ctrl-v 相比，它非常有用。快多了。但是，如果在某个按钮下我们可以访问以前的剪贴板内容，那就更好了。在这种情况下，我们可以将一个文本替换为另一个文本，如下所示：

1.  选择文本 A
2.  选择目标文本B（此时中间按钮下的文本A被B覆盖）
3.  使用某些按钮（不是中间按钮）粘贴文本 A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:14:15.850

它不在 Xorg 源代码中，而是在每个 X 工具包或应用程序的源代码中。X 服务器只是将鼠标按钮事件发送给应用程序，这些事件通过其事件处理被处理到它们绑定到这些按钮的任何函数。您描述的复制和粘贴机制是大多数工具包和应用程序以自己的方式实现的常见约定。

您可以在[*Inter-Client Communication Conventions Manual*](http://www.x.org/releases/X11R7.7/doc/xorg-docs/icccm/icccm.html)[中的Peer-to-Peer Communication by Means of Selections](http://www.x.org/releases/X11R7.7/doc/xorg-docs/icccm/icccm.html#Peer_to_Peer_Communication_by_Means_of_Selections)下的规范中阅读有关此机制的更多信息[](http://www.x.org/releases/X11R7.7/doc/xorg-docs/icccm/icccm.html)

# java - 绑定两个 JComboBox

> ID：13903995
> 
> 赞同：1
> 
> 时间：2012-12-16T17:59:04.797
> 
> 标签：java, swing, binding, jcombobox, itemlistener

我有一个看起来像这样的 HashMap：

```
HashMap<CauseCategory, ArrayList<Cause>> data; 
```

CauseCategory 和 Cause 只是其中包含一个字符串实例字段的类，由它们的构造函数或 setter 方法（如果需要）设置。现在，系统从数据库中获取一堆原因类别，每个原因类别都有许多与之相关的原因。

假设我们有一个原因类别“技术”，它会有多个与之相关的原因，例如“包装问题”、“处理错误”、“计算错误”等。

我将这个 HashMap 提供给我的 GUI 类，它有两个 JComboBoxes（原因类别 + 原因描述）。

如何绑定第一个组合框（类别），以便当我从该列表中选择一个项目时，它只在第二个组合框（原因描述）中显示与它相关的原因？

**编辑：**像这样考虑哈希图可能更简单：

```
HashMap<String, ArrayList<String>> data; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:13:22.683

将 ActionListener 添加到第一个组合框。每次选择更改时，都会触发一个 ActionEvent 并因此调用 ActionListener。从侦听器中，从组合框中获取新选择的类别，然后从 Map 中获取关联原因，并更改第二个组合框中显示的项目。

像往常一样：[链接到挥杆教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)。

# c - 这条线有什么作用？

> ID：13903998
> 
> 赞同：3
> 
> 时间：2012-12-16T17:59:22.590
> 
> 标签：c

以下代码不是我制作的。我正在搜索并在其他人的问题中找到它。

```
#include <stdio.h>
#define NAME_MAX    80
#define NAME_MAX_S "80"

int main(void)
{
    static char name[NAME_MAX + 1]; // + 1 because of null
    if(scanf("%" NAME_MAX_S "[^\n]", name) != 1) // This line
    {
        fputs("io error or premature end of line\n", stderr);
        return 1;
    }

    printf("Hello %s. Nice to meet you.\n", name);
} 
```

你能告诉我标记的线是做什么的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T18:05:48.833

这是一个字符串连接。当您编写字符串时，您可以使其在编译时连接起来，因此：

```
 "%" NAME_MAX_S "[^\n]", 
```

最终会变成：

```
 "%80[^\n]" 
```

[`scanf`](http://en.cppreference.com/w/c/io/fscanf)然后将读入名为`name`80 个字符的变量，而不是`newline`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T18:08:42.463

同时使用了两个有点晦涩的语言特性：

1.  字符串粘贴。预处理后，该行是

    ```
    if(scanf("%" "80" "[^\n]", name) != 1) 
    ```

    然后将相邻的字符串文字粘贴在一起，因此对于编译器的后面部分，就好像它说`... scanf("%80[^\n]", name) ...`

2.  一种不太常见的`scanf`转换。 `"%[...]"`与 并不完全不同`"%s"`，因此这与转换非常相似`"%80s"`。我相信您可以在手册页或其他参考资料中查找`[`scanf 转换说明符。`scanf(3)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T18:05:45.730

预处理器替换后，它看起来像这样：

```
if(scanf("%" "80"_MAX_S "[^\n]", name) != 1) // <-- This line 
```

这相当于：

```
if(scanf("%80[^\n]", name) != 1) // <-- This line 
```

最多读取 80 个字符或换行符。

大小`name`为 81。所以它可以容纳 80 个字符 + nul 终止符。这通常是为了避免在读取输入时缓冲区溢出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T18:10:25.123

```
if (scanf("%" NAME_MAX_S "[^\n]", name) != 1) // This line 
```

这是一种写法：

```
if (scanf("%80[^\n]", name) != 1) 
```

有多种功能可能会让您感到困惑。

1.  该`"%" NAME_MAX_S "[^\n]"`表示法使用字符串连接从片段创建单个字符串。
2.  转换规范使用否定的`%80[^\n]`“扫描集”来指定读取的字符串最多可以是 80 个非换行符。
3.  当您在or中指定`scanf()`等人的长度时，您指定的字符数*不包括*空字节（旧设计）。这意味着您必须处理字符串变量的定义大小与转换规范中指定的长度之间的差值。`%s``%[]`
**   整体条件正确检查字符串是否已成功读取。它将检测到任何转换失败（返回值 0，因为输入中的第一个字符是换行符）以及 EOF。唯一可能的问题是它不保留返回值来区分两者，但您可以使用`feof()`and`ferror()`这样做——这就是它们的用途（在发生故障后区分错误）。*

 *该代码用于`NAME_MAX_S`确保它有一个字符串。它可以使用：

```
#define STR_EVALUATE(x) #x
#define STRINGIFY(x) STR_EVALUATE(x)

if (scanf("%" STRINGIFY(NAME_MAX) "[^\n]", name) != 1) 
```

这会将要维护的行数减少到 1。但它只适用于简单的数字；如果你有一个表达式`#define NAME_MAX (2*LEN_NAME_COMPONENT+LEN_MIDDLE_INITIALS)`，字符串形成的整个过程将无法工作。然后你需要做：

```
char format[16];
sprintf(format, "%%%d[^\n]", NAME_MAX);

if (scanf(format, name) != 1) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T18:05:44.997

`stdin`它从`name`变量中读取不超过 80 个（非换行符）字符。

如果遇到换行符，它将停止扫描。

它看起来很奇怪，因为它使用了 C 语言的一个有点晦涩且没有很好教的特性：它能够将**相邻的常量字符串折叠**成一个单独的字符串。

（它实际上是一个非常方便的功能：它允许将长字符串包装在多行上，并允许宏用常量字符串做有用的事情）

...所以，从根本上想象这条线看起来像：

```
if(scanf("%80[^\n]", name) != 1) 
```

然后按照[scanf 文档](http://www.cplusplus.com/reference/cstdio/scanf/)了解`[^\n]`它的作用。

*顺便说一句……使用*[cpp stringification](http://gcc.gnu.org/onlinedocs/gcc-4.3.4/cpp/Stringification.html)`NAME_MAX_S`可以完全避免使用 常量：

```
if(scanf("%" #NAME_MAX "[^\n]", name) != 1) 
```*