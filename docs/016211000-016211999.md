# StackOverflow 问答 16211000-16211999

# msbuild - MSBuild 说 XML doc 文件（从 C# 注释创建）不存在，但它在构建之前存在

> ID：16211000
> 
> 赞同：2
> 
> 时间：2013-04-25T09:22:03.383
> 
> 标签：msbuild, file-not-found

当我`<DocumentationFile>`在 MSBuild 项目上设置属性时，`CoreCompile`始终执行任务，即使所有文件都存在且是最新的。

MSBuild 说它运行`CoreCompile`任务是因为该文件`"C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\bin\Debug\Test.XML"`不存在，但它存在并且是最新的。

详情如下。

# 我的 MsBuild 文件

我在 Visual Studio 2010 中创建了一个全新的控制台应用程序项目，并将以下几行添加到`.csproj`（就在文件末尾附近的 of 之前）`import`：`$(MSBuildToolsPath)\Microsoft.CSharp.targets`

```
 <PropertyGroup>
    <TargetsTriggeredByCompilation>
      $(TargetsTriggeredByCompilation);MyTarget
    </TargetsTriggeredByCompilation>
    <UseHostCompilerIfAvailable>false</UseHostCompilerIfAvailable>
    <DocumentationFile>$(MSBuildProjectDirectory)\$(OutputPath)$(MSBuildProjectName).XML</DocumentationFile>
  </PropertyGroup>
  <Target Name="MyTarget">
    <Message Text="MyTarget was executed." />
  </Target> 
```

[这里](http://xheo.com/blog/troubleshooting-projects-rebuilding-every-time)`UseHostCompilerIfAvailable`解释了使用的原因。

目的是`MyTarget`仅在目标运行时`CoreCompile`运行。

# MSBuild 输出

使用 进行编译`F6`并将 MSBuild 详细程度设置为`Diagnostic`in 时`Tools->Options->Projects and solutions->Build and run`，我得到以下输出：

## 没有`<DocumentationFile>`

如果我删除线

```
<DocumentationFile>$(MSBuildProjectDirectory)\$(OutputPath)$(MSBuildProjectName).XML</DocumentationFile> 
```

然后忽略CoreCompile目标，这是正确的：

```
Cible "CoreCompile : (IdCible:35)" dans le fichier "c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.targets" du projet "C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\Test.csproj" (la cible "Compile" en dépend) :
La cible est ignorée "CoreCompile", car tous les fichiers de sortie sont à jour par rapport aux fichiers d'entrée.
Fichiers d'entrée : Program.cs;Properties\AssemblyInfo.cs;C:\Users\Georges\AppData\Local\Temp\.NETFramework,Version=v4.0,Profile=Client.AssemblyAttributes.cs;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\Microsoft.CSharp.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\mscorlib.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Core.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Data.DataSetExtensions.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Data.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Xml.dll;C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Xml.Linq.dll;c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.targets;c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.NETFramework.props;C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\Test.csproj;c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets;c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.NETFramework.targets;c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Xaml.targets
Fichiers de sortie : obj\x86\Debug\Test.exe;obj\x86\Debug\Test.pdb
Génération de la cible "CoreCompile" terminée dans le projet "Test.csproj". : (IdCible:35) 
```

## 和`<DocumentationFile>`

如果我保持线路

```
<DocumentationFile>$(MSBuildProjectDirectory)\$(OutputPath)$(MSBuildProjectName).XML</DocumentationFile> 
```

然后`CoreCompile`运行目标，这是不正确的。

MSBuild 说它运行是因为输出文件`"C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\bin\Debug\Test.XML"`不存在，但我 100% 肯定它确实存在（将路径逐字复制粘贴到 Notepad++ 的`open`对话框中确实会打开文件）。

我尝试将`<DocumentationFile>`属性设置为：

*   `$(MSBuildProjectDirectory)\$(OutputPath)$(MSBuildProjectName).XML`
*   `$(MSBuildProjectDirectory)\$(OutputPath)\$(MSBuildProjectName).XML`
*   `$(OutputPath)\$(MSBuildProjectName).XML`
*   `$(OutputPath)$(MSBuildProjectName).XML`
*   `bin\Debug\Test.XML`
*   `bin\Debug\Test.XML`通过选项卡中的项目属性设置默认值 ( ) `Build`。

但这并没有改变任何东西，`CoreCompile`目标仍在运行。

```
Cible "CoreCompile : (IdCible:35)" dans le fichier "c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.CSharp.targets" du projet "C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\Test.csproj" (la cible "Compile" en dépend) :
Génération complète de la cible "CoreCompile".
Le fichier de sortie "C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\bin\Debug\Test.XML" n'existe pas.
Tâche "Csc" (IDTâche:13)
  C:\Windows\Microsoft.NET\Framework\v4.0.30319\Csc.exe /noconfig /nowarn:1701,1702 /nostdlib+ /platform:x86 /errorreport:prompt /warn:4 /doc:"C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\bin\Debug\Test.XML" /define:DEBUG;TRACE /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\Microsoft.CSharp.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\mscorlib.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Core.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Data.DataSetExtensions.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Data.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Xml.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Xml.Linq.dll" /debug+ /debug:full /filealign:512 /optimize- /out:obj\x86\Debug\Test.exe /target:exe /utf8output Program.cs Properties\AssemblyInfo.cs "C:\Users\Georges\AppData\Local\Temp\.NETFramework,Version=v4.0,Profile=Client.AssemblyAttributes.cs" (IDTâche:13)
  Compilateur Microsoft (R) Visual C# 2010 version 4.0.30319.1 (IDTâche:13)
  Copyright (C) Microsoft Corporation. Tous droits réservés. (IDTâche:13)
   (IDTâche:13)
Exécution de la tâche "Csc" terminée. (IDTâche:13)
Tâche "CallTarget" (IDTâche:14)
Cible "MyTarget : (IdCible:36)" du projet "C:\Users\Georges\Documents\Visual Studio 2010\Projects\Test\Test\Test.csproj" (la cible "CoreCompile" en dépend) :
Tâche "Message" (IDTâche:15)
  MyTarget was executed. (IDTâche:15)
Exécution de la tâche "Message" terminée. (IDTâche:15)
Génération de la cible "MyTarget" terminée dans le projet "Test.csproj". : (IdCible:36)
Exécution de la tâche "CallTarget" terminée. (IDTâche:14)
Génération de la cible "CoreCompile" terminée dans le projet "Test.csproj". : (IdCible:35) 
```

# entity-framework - 如何为 ComplexType 指定数组元素

> ID：16211001
> 
> 赞同：0
> 
> 时间：2013-04-25T09:22:09.597
> 
> 标签：entity-framework

所以我有以下 ComplexType：

```
[ComplexType]
public class TransactionSettings
{
    [Display(Name = "Minimum Order Amount"), Column(TypeName = "MONEY")]
    public decimal MinimumOrder { get; set; }
    [Display(Name = "Payment Provider")]
    public PaymentProvider PaymentProvider { get; set; }
    [Display(Name = "Provider Settings")]
    public ProviderSettings ProviderSettings { get; set; }
    [Display(Name = "Accepted Credit Cards")]
    public CreditCards[] AcceptedCreditCards { get; set; }
    [Display(Name = "Taxable States")]
    public States[] SalesTaxStates { get; set; }
}

public enum CreditCards
{
    MasterCard,
    Visa,
    [Description("American Express")]
    AmericanExpress,
    Discover
}

public enum States
{
    [Description("Alabama")]
    AL,
    [Description("Alaska")]
    AK,
    [Description("Arizona")]
    AZ,
    //.
    //.
    //.
    [Description("Wisconsin")]
    WI,
    [Description("Wyoming")]
    WY
} 
```

该数组表示特定字段将有多项选择。但如您所知，复杂类型只能包含原始属性。那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T20:32:00.110

我通过将所有枚举标记为`Flags`. 从那里开始很容易......

# regex - Jmeter中动态URL的正则表达式

> ID：16211003
> 
> 赞同：2
> 
> 时间：2013-04-25T09:22:12.067
> 
> 标签：regex, jmeter

我对 Jmeter 和正则表达式很陌生。
每次为用户生成新链接时，以下粗体字符都会更改。所以我想为下面添加一个正则表达式。
有人可以帮助我吗？

> /SummitHealthIVV/Common/ElectronicSignatureAcceptance.aspx?strQueryString= **+ettnTn2YqkmqZJBlj3UMa1UMQv8J4seVZco7UV8tiR0GaDccb3Xbqfdrx7FXSwwHSqyBTQ7kK4FeQXFvgtnpiWKJ7rLsM1UKzGAtnkQGfPBIjh7LjlN7JKnyhXGn7**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:43:53.323

尝试这个：

```
/strQueryString\=([a-z0-9\+]{1,})/i 
```

或者

```
/strQueryString\=(\S{1,})/i 
```

# sharepoint - SharePoint 2013 标准与企业搜索

> ID：16211004
> 
> 赞同：10
> 
> 时间：2013-04-25T09:22:17.553
> 
> 标签：sharepoint, sharepoint-2013

在 SharePoint 2013 中，标准搜索与企业搜索之间有什么区别？

购买 SharePoint 2013 企业版时是否附带不同的许可？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T10:40:57.250

看看下面的对比图：

*   [SharePoint 2013 功能比较图表所有版本](http://blog.blksthl.com/2013/01/14/sharepoint-2013-feature-comparison-chart-all-editions/#SER)
*   [官方 SharePoint 2013 功能对比图所有版本](http://technet.microsoft.com/en-us/library/jj819267.aspx#bkmk_FeaturesOnPremise)

归结为：

*   没有 Enterprise，新的内容搜索 WebPart 不可用
*   内容处理管道不如标准可扩展
*   高级查询规则不适用于标准

很多公司都不使用的高级搜索工具——内容搜索 WebPart 很有趣。许可是通过每个用户的 CAL（客户端访问许可证）完成的。这意味着每个使用企业功能的用户都需要一个标准/企业许可证。如果您谈论的是搜索，那么很可能是您的所有用户。标准版和企业版 CAL 之间存在价格差异。

# mysql - Mysql 查询删除一个零。得到（例如）75.5 英镑而不是 75.50 英镑？

> ID：16211006
> 
> 赞同：0
> 
> 时间：2013-04-25T09:22:23.527
> 
> 标签：mysql

自从我的第一个问题以来，我一直在研究/试图解决这个问题......查询正在删除总列中的尾随“0”。我试过`AS DECIMAL`但`FORMAT`没有成功 - 我猜我把括号放在错误的地方？？

```
SELECT start_date AS 
START , end_date AS 
STOP , Activity, TIME_FORMAT( TIMEDIFF( end_date, start_date ) ,  '%h %i' ) AS Hours, CONCAT(  '£', rate ) AS Rate, CONCAT(  '£', FORMAT( TIMESTAMPDIFF( 
MINUTE , start_date, end_date ) * ( rate /60 ) , 2 ) ) AS Amount, 
COMMENT , CONCAT(  '£', expenses ) AS Expenses, CONCAT(  '£', FORMAT( TIMESTAMPDIFF( 
MINUTE , start_date, end_date ) * ( rate /60 ) , 2 ) + expenses ) AS total
FROM hours
JOIN activities ON hours.Activity = activities.description
WHERE Activity !=  "Caravan Park"
ORDER BY  `hours`.`end_date` DESC 
```

以上是代码 - 除了正确显示总列之外，我想要做的一切。这并不完全正确 - 我如何使用`SUM()`来获取计算列“总计”的列总计。那个解决方案让我望而却步！

非常感谢所有回复......

# php - 在 PHP 和 MySQL 中计算值的分布

> ID：16211009
> 
> 赞同：0
> 
> 时间：2013-04-25T09:22:33.340
> 
> 标签：php, mysql

我正在尝试从大型数据集中计算值的分布。这些值是 1 到 7 之间的 FLOAT，我想将它们聚合到一定的粒度。现在我正在汇总到一半值（1.0、1.5、2.0 等），但我希望能够更动态地设置粒度（例如到小数点后一位）。有这样做的聪明方法吗？现在我这样做

```
 //create distribution table
$distribution_table="CREATE TABLE distribution_table(Collective_ability FLOAT Primary Key, Number INT)";

// Execute query
if (mysql_query($distribution_table))
  {
  echo "Table distribution_table created successfully";
  }
else
  {
  echo "Error creating distribution table: " . mysql_error();
  die;
  }

//Calculate distribution of Collective Ability
$distribution = "INSERT INTO distribution_table (Collective_ability) Values (1.0),(1.5),(2.0),(2.5),(3.0),(3.5),(4.0),(4.5),(5.0),(5.5),(6.0),(6.5),(7.0)";

// Execute query
if (mysql_query($distribution))
  {
  }
else
  {
  echo "Error Selecting Inserting values into distribution table: " . mysql_error();
  die;
  }

$number_of_1 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 0.75 AND CollectiveAbility < 1.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 1.0";
$number_of_1_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 1.25 AND CollectiveAbility < 1.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 1.5";
$number_of_2 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 1.75 AND CollectiveAbility < 2.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 2.0";
$number_of_2_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 2.25 AND CollectiveAbility < 2.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 2.5";
$number_of_3 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 2.75 AND CollectiveAbility < 3.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 3.0";
$number_of_3_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 3.25 AND CollectiveAbility < 3.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 3.5";
$number_of_4 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 3.75 AND CollectiveAbility < 4.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 4.0";
$number_of_4_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 4.25 AND CollectiveAbility < 4.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 4.5";
$number_of_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 4.75 AND CollectiveAbility < 5.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 5.0";
$number_of_5_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 5.25 AND CollectiveAbility < 5.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 5.5";
$number_of_6 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 5.75 AND CollectiveAbility < 6.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 6.0";
$number_of_6_5 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 6.25 AND CollectiveAbility < 6.75 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 6.5";
$number_of_7 = "UPDATE distribution_table SET Number = (SELECT SUM(CASE WHEN CollectiveAbility > 6.75 AND CollectiveAbility < 7.25 THEN 1 ELSE 0 END) FROM collective_ability) WHERE Collective_ability = 7.0";

// Execute query
if (mysql_query($number_of_1))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }

// Execute query
if (mysql_query($number_of_1_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }

  // Execute query
if (mysql_query($number_of_2))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }

  // Execute query
if (mysql_query($number_of_2_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }

  // Execute query
if (mysql_query($number_of_3))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_3_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_4))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_4_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_5_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_6))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_6_5))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  }
  // Execute query
if (mysql_query($number_of_7))
  {
  }
else
  {
  echo "Error entering number count: " . mysql_error();
  die;
  } 
```

# android - Android 中未使用的字符串和图像资源

> ID：16211011
> 
> 赞同：45
> 
> 时间：2013-04-25T09:22:44.573
> 
> 标签：android

我的项目有大量的 String 和 ImageResources，我觉得其中很多都没有使用。有什么办法可以找出我的代码中当前没有引用哪些资源？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2014-10-09T15:38:16.057

在 Android Studio（尝试到版本 2.1.3）中，您可以简单地转到*Main Menu -> Analyze -> Run Inspection by Name...*，然后选择*Unused resources*

![在此处输入图像描述](https://i.stack.imgur.com/RcjzR.png)

（它为您运行 Android Lint。）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-04-13T09:41:04.477

在 Android Studio 中有一个可用的快捷方式。

按**Ctlr + Alt + Shift + i**（或**Cmd + Option + Shift + i**在 Mac 上）

这将打开一个对话框，您可以在其中键入**“未使用”**以查看许多选项。

我通常键入**“未使用的资源”**并获得一个列表，其中包括布局、字符串、可绘制对象等。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-28T05:50:14.030

在 Android Studio 2.0 及更高版本中

在菜单中选择 Refactor-->点击**Remove Unused Resources...**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-24T12:16:28.813

改进@Ramesh R 答案，最好的方法是**右键单击**您的 res**文件夹**，选择**Refactor**和**Remove Unused Resources**。

这个工具太棒了，我为他的开发者 xD 鼓掌；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T09:25:27.550

你可以使用[皮棉](http://tools.android.com/tips/lint)

```
Android Lint is a new tool for ADT 16 (and Tools 16) which scans Android project sources for potential bugs. 

Here are some examples of the types of errors that it looks for:
Missing translations (and unused translations)
Layout performance problems (all the issues the old layoutopt tool used to find, and more)
Unused resources
Inconsistent array sizes (when arrays are defined in multiple configurations)
Accessibility and internationalization problems (hardcoded strings, missing contentDescription, etc)
Icon problems (like missing densities, duplicate icons, wrong sizes, etc)
Usability problems (like not specifying an input type on a text field)
Manifest errors and many more. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T09:26:06.707

是的，eclipse中的ADT包括`android lint`

参考[android lint](http://tools.android.com/tips/lint)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-25T09:35:44.903

您可以使用[此库](http://code.google.com/p/android-unused-resources/)
将其放置到项目文件夹并从命令行运行 jar。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-15T14:22:44.783

如果要删除可绘制文件中未使用的资源：单击可绘制文件〜然后单击重构〜然后单击删除未使用的资源..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-12T08:38:00.197

关于您要删除的图像资源，您还应该考虑将所有 drawable-xxxx 文件夹从您的项目中移出到一个临时文件夹中，然后全部重建，并查看构建消息列表，它会告诉您哪个那些不见了。

如果您想大致了解您正在有效使用的资源，并可能在[Android Iconics](https://github.com/mikepenz/Android-Iconics)库的帮助下将它们替换为图标字体或 svg 资源，这将特别有用。

# bitmap - 考虑到反馈输入，是否有位图压缩停止的阈值？

> ID：16211012
> 
> 赞同：1
> 
> 时间：2013-04-25T09:22:44.443
> 
> 标签：bitmap, compression, jpeg

我使用质量因子将图像压缩为 JPEG 格式。我再次使用新压缩的图像并再次使用相同的质量因子对其进行压缩。

每次结果都不一样。

是否有任何阈值可以停止压缩？还是会继续压缩之前压缩的图像？（始终保持相同的品质因数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:44:39.137

我建议阅读[有损压缩](http://en.wikipedia.org/wiki/Lossy_data_compression)。具体来说：

> 原件包含一定的信息量；可以承载所有信息的文件大小有一个下限。举个直观的例子，大多数人都知道压缩后的 ZIP 文件比原始文件小，但反复压缩文件不会将大小缩小到零，实际上通常会增加大小。

~~此外，据我了解，结果不可重复是有道理的。如果压缩是可重复的（也就是确定性的），那就意味着它是可逆的，这将使它成为无损压缩，而 JPEG 不是。~~

# c - 如何将客户端重新连接到服务器？

> ID：16211018
> 
> 赞同：6
> 
> 时间：2013-04-25T09:23:00.070
> 
> 标签：c, sockets, unix, network-programming

我的服务器程序（套接字流）正在运行并且它接受客户端。由于某些异常情况，服务器正在终止。另一端客户端正在等待服务器回复。如何将正在运行的客户端重新连接到新服务器？套接字中的任何功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T12:13:23.953

`connect()`曾经被编辑过的套接字***不能***被另一个调用*重用*`connect()`。

连接到 TCP 服务器并读取/写入一些数据的步骤如下（伪代码）：

```
sd = socket(...) // create socket descriptor (allocate socket resource)
connect(sd, server-address, ...) // connect to server
read/write(sd, data)  // read from server 
close(sd) // close /socket descriptor (free socket resource) 
```

如果服务器在`connect`所有客户端可以并且应该做的事情之后关闭

```
close(sd) // close socket descriptor (free socket resource) 
```

然后从头开始：

```
sd = socket(...) // create socket descriptor (allocate socket resource)
... 
```

从头开始：

```
connect(sd, server-address, ...) // connect to server
... 
```

可能会导致未定义的行为，但至少会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:46:18.970

首先让我说一切皆有可能。有一个功能可以为您做到这一点。它与[`connect`](http://pubs.opengroup.org/onlinepubs/009695399/functions/connect.html)您可能用于 TCP 客户端的相同。您只需要考虑*何时*需要再次调用此连接。

## 那么我现在什么时候使用该`connect`功能呢？

让我提出一种可能的解决方案。

您需要有某种监视软件（可能是[守护程序](http://en.wikipedia.org/wiki/Daemon_(computing))）来跟踪服务器进程的状态。比如说，它可以定期戳服务器进程以查看它是否还活着。

考虑单个客户端和服务器的情况。客户端在系统 A 上运行；服务器，在系统 B 上。

`recv`假设服务器在它编辑任何东西之前已经运行并崩溃了。这意味着客户端将成功连接到服务器并且`send`它将失败。当`send`失败时，您可以联系系统 B 上的监控软件以查看发生了什么。

如果监控软件报告它没有发现服务器有任何问题，那么就会出现其他问题（可能是中断，你的 NIC 坏了，等等）。这些原因不在本文讨论范围之内。

如果你的监控软件回复说它发现服务器程序死了，那么你可以：

*   回复监控软件要求重新启动服务器
*   或者告诉它自己关闭
*   或者做一些你认为合适的事情。

现在，在系统 A 的客户端中，再次开始`socket`, `connect`, `send`,`recv`等的过程。

本质上，您正在创建另一个服务器 X，它负责您当前的服务器 Y。当服务器 Y 死机时，您会寻找服务器 X 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:43:35.550

```
int
connect_retry(int sockfd, const struct sockaddr *addr, socklen_t alen)
{
    int nsec;

    /*
     * Try to connect with exponential backoff.
     */

    for (nsec = 1; nsec <= MAXSLEEP; nsec <<= 1) {
        if (connect(sockfd, addr, alen) == 0) {

            /*
             * Connection accepted.
             */

            return(0);
        }

        /*
         * Delay before trying again.
         */

        if (nsec <= MAXSLEEP/2)
            sleep(nsec);
    }
    return(-1);
} 
```

由 unix Env​​ironment 书中的 Advanced Programming 引用。

您还可以使用：

`SO_REUSEADDR`在`setsockopt()`. 它允许重用本地地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:44:00.493

您连接到新服务器的方式与连接到原始服务器的方式相同。对此没有不同的 API。我不明白你为什么会有其他想法..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:55:51.703

您无法在服务器中处理此问题，但您可以为您的客户端创建一个会话，然后当您的客户端重新连接时恢复其设置并继续发送和接收消息，并在您的客户端应用程序中创建一个具有特定间隔的线程以检查服务器是否可用与否，如果是这样，请尝试重新连接程序，但是，我建议您检查您的服务器端程序，您的程序出现故障会发生什么？

# cakephp - 具有 i18n 国际化功能的 cakephp 2.x 路由器

> ID：16211024
> 
> 赞同：0
> 
> 时间：2013-04-25T09:23:19.607
> 
> 标签：cakephp, cakephp-2.0

我正在使用 cakephp 2

我很难在 routes.php 中自定义我的路线。

所以就我而言，我有一个 Post 模型和一个 PostsController。索引操作列出了我的所有帖子，每个列出的帖子都是一个可点击的链接，可以转到我的显示操作。所以我的帖子>索引的“标准”路线是：“localhost/cakesite/posts/index”，对于翻译版本，它就像：“localhost/cakesite/eng/posts/index”。对应的修改路由为：“localhost/cakesite/news”和“localhost/cakesite/eng/news”。

现在对于 show 动作，它略有不同，因为我需要传递一些参数，例如 slug 和 id，所以它看起来像这样，无需修改其路由：“localhost/cake/posts/show/75/language:eng”。但我想得到类似：“localhost/cakesite/news/slug-id”和翻译版本：“localhost/cakesite/eng/news/slug-id”。这些都是我无法完成的路线。这个：“localhost/cakesite/news/slug-id”正在工作，但是当我将指针放在链接上时，我得到：“localhost/cake/posts/show/75”但是一旦我点击它，它就会重定向我出现在我的浏览器中的正确网址，例如：“localhost/cake/news/slug-75”。奇怪的是，在鼠标悬停时，重定向的 url 有不同的结果。

**所以这是我到目前为止的路线：**

```
// News index
Router::connect('/news',
    array('controller' => 'posts', 'action' => 'index')
    );
Router::connect('/:language/news',
    array('controller' => 'posts', 'action' => 'index'),
    array('language' => '[a-z]{3}','persist'=>array('language'))
    );

// News show
Router::connect('/news/:slug-:id',
    array('controller' => 'posts', 'action' => 'show'),
    array('pass' => array('id', 'slug'),
        'id' => '[0-9]+',
        'slug' => '[a-z0-9\-]+')
    );
Router::connect('/:language/news/:slug-:id',
    array('controller' => 'posts', 'action' => 'show'),
    array('pass' => array('slug','id'), 'language' => '[a-z]{3}', 'slug' => '[a-z0-9\-]+', 'id' => '[0-9]+')
    ); 
```

**应用助手**

```
class AppHelper extends Helper {

    public function url($url = null, $full = false) {
        if(!isset($url['language']) && isset($this->params['language'])) {
            $url['language'] = $this->params['language'];
        }
        return parent::url($url, $full);
    }
} 
```

**从索引到显示的实际链接**

```
$lang=Configure::read('Config.language');
        echo $this->Html->link(
            $this->Html->tag('h1', $v['name_'.$lang], array('class' => 'news_titre')).' '.
            $this->Html->tag('span', $v['created'], array('class' => 'news_date')).' '.
            $this->Html->tag('div', '', array('class' => 'clear_float')).' '.
            $this->Html->tag('span', $this->Html->image("news/".$v['photo'], array( "alt" => $v['name_'.$lang])), array('class' => 'news_thumb')).' '.
            $this->Html->tag('p', $this->Text->truncate(strip_tags($v['content_'.$lang]), 297, array('ellipsis' => '...', 'exact' => false)), array('class' => 'news_contenu')),
            array('action' => 'show',$v['id']), array('class' => 'news_box', 'escape' => false)); 
```

我已经放置了 aboce 代码以显示与什么相关的内容，但如果您需要任何其他内容，请告诉我，我将编辑该帖子。那么，有人知道我做错了什么吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:01:20.607

我认为你的路线大多是正确的。困扰您的是网址的显示。

根据您的最后一段代码，您对 url 进行封装的方式是使用类似的数组

```
$this->Html->tag( /* etc */, 
                  /*here's the redirection*/ array('action'=>'show', $id), /*etc*/) 
```

尝试将该数组更改为此

```
$this->Html->tag( /* etc */, 
                  /*here's the redirection*/ array('action'=>'show', 
                                                   'id' => $id,
                                                   'slug' => $slug,
                                                   'language' => $language), /*etc*/) 
```

# android - 使用锁定应用程序重新启动 Android froyo 后，触摸输入不起作用

> ID：16211025
> 
> 赞同：4
> 
> 时间：2013-04-25T09:23:20.433
> 
> 标签：android

我为 Android 开发了一个锁定应用程序（kiosk 模式）。它在 Android 蜂窝和冰淇淋三明治上正常工作。如果我`category android:name="android.intent.category.DEFAULT"`在`AndroidManifest.xml`文件中设置，则在重新启动 froyo 2.2 平板电脑后触摸输入不起作用。

# ms-access - 使用 ZK MDB Microsoft Access 数据库文件插入/删除/更新不起作用

> ID：16211027
> 
> 赞同：0
> 
> 时间：2013-04-25T09:23:22.097
> 
> 标签：ms-access, crud, vb.net-2010

我无法插入/更新/删除文件 mdb 上的访问 mdb 文件，我看到它只读，这是我不能使用命令的原因吗？

注意：mdb 文件是只读文件 注意：该软件附带 ZK 指纹产品代码：'B3-C/USB' “考勤管理系统”可以与 database.mdb 一起使用，所以我想我也可以。

我试试这个：

```
 Try
        cn.Open()

        commandText = "INSERT INTO USERINFO(USERID,Name) VALUES(2,'Madaraz')"
        SqlDataAdapter = New OleDbDataAdapter(commandText, cn)
        SqlComBuilder = New OleDbCommand(commandText, cn)
        SqlComBuilder.ExecuteNonQuery()

    Catch er As MySqlException
        MessageBox.Show("Error Connecting to Database: " & er.Message)
    Finally
        cn.Dispose()
    End Try 
```

当我尝试运行上面的代码时，它甚至没有出现错误，但它没有任何反应，我不知道它发生了什么。

我希望专家能提前帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:25:34.060

如果数据库文件是只读的，它将不起作用。从 mdb 文件中删除只读属性。

# xhtml - w3c 验证器报错

> ID：16211029
> 
> 赞同：0
> 
> 时间：2013-04-25T09:23:36.167
> 
> 标签：xhtml, validation, w3c

W3C 说我有一个未封闭的标签。顺便说一句，它必须是 XHTML

验证输出：1 错误

第 31 行第 9 列：省略了“div”的结束标记，但指定了 OMITTAG NO >" 而不是 >"。

第 19 行，第 4 列：开始标签在这里

这是我的xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

```
<head>
    <title>phpFormTemplate</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <script type="text/javascript" src="phpFormTempate/checkform.js"></script>
    <link rel="stylesheet" type="text/css" href="phpFormTempate/css/default.css" />
</head>

<body>
    <div id="errorContainer">
    </div>
    <div id="phpformtemplate">
        <form action="/index.php" method="post"  accept-charset="utf-8" enctype="application/x-www-form-urlencoded">
            <div id="textrequired">*: Pflichtfelder</div>
<!-- begin input set n° 1 -->
            <div class="form-input-set-1">
                <span class="required-char">*</span>
                <div class="form-input-label-1">
                    <label for="Bemerkung">Bemerkung</label>
                </div>
                <div class="form-input-1">
                    <textarea id="Bemerkung" tabindex="1" accesskey="B" name="Bemerkung" class="required" rows="10" cols="50">Default</textarea>
                <div class="form-input-error-1">
                    <span id="error_Bemerkung"></span>
                </div>
            </div><!-- ISN'T IT THAT ONE? -->
<!-- iT CLOSES THE <div class="form-input-set-1"> -->
<!-- or am I wrong? pleas help!! -->
    <!-- end input set n° 1 -->
            </form>
        </div>
        <div id="errorContainer">
            <ul class="error-list">
                Es wurde keine E-Mail an den Besucher geschickt.
            </ul>
            <ul class="error-list">
                Diese E-Mail wurde an daenuboehmle@gmail.com geschickt.
            </ul>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:25:19.833

你需要有这个 div 的结束标签，你错过了

```
<div class="form-input-set-1"> 
```

使用一些不错的代码编辑器，比如记事本++，会让你免于头痛

尝试这个

```
<head>
    <title>phpFormTemplate</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <script type="text/javascript" src="phpFormTempate/checkform.js"></script>
    <link rel="stylesheet" type="text/css" href="phpFormTempate/css/default.css" />
</head>

<body>
   <div id="errorContainer">
        <ul class="error-list">
            Ihre Daten wurden bereits verschickt.
        </ul>
    </div> 
    <div id="errorContainer">
    </div>
    <div id="phpformtemplate">
        <form action="/index.php" method="post"  accept-charset="utf-8" enctype="application/x-www-form-urlencoded">
            <div id="textrequired">*: Pflichtfelder</div>
<!-- begin input set n° 1 -->
            <div class="form-input-set-1">
                <span class="required-char">*</span>
                <div class="form-input-label-1">
                    <label for="Bemerkung">Bemerkung</label>
                </div>
                <div class="form-input-1">
                    <textarea id="Bemerkung" tabindex="1" accesskey="B" name="Bemerkung" class="required" rows="10" cols="50"></textarea>
                    <div class="form-input-error-1">
                        <span id="error_Bemerkung"></span>
                    </div>
                </div>
            </div> <!-- You were missing close tag here -->
<!-- end input set n° 1 -->
        </form>
    </div>
</body>
</html> 
```

# php - 递归 Chmod 不工作 PHP

> ID：16211033
> 
> 赞同：0
> 
> 时间：2013-04-25T09:23:50.410
> 
> 标签：php, function, chmod

我有下面的 PHP 函数，它应该递归地 chmod 我服务器上的一个目录。

由于某种原因它不起作用 - 我知道该目录的路径是正确的，因为我已经使用一个快速脚本对其进行了测试，该脚本只打印出该目录中的文件。

```
$root_tmp = '/tmp/mixtape2'; 
chmod_r($root_tmp);

function chmod_r($Path) {
$dp = opendir($Path);
while($File = readdir($dp)) {
  if($File != "." AND $File != "..") {
     if(is_dir($File)){
        chmod($File, 0777);
        chmod_r($Path."/".$File);
     }else{
         chmod($Path."/".$File, 0777);
     }
  }
closedir($dp);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:30:44.053

```
chmod($Path.'/'.$File, 0777); 
```

您必须输入 chmod 的完整路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:00:01.140

您的 PHP 脚本由网络服务器执行，它很可能在您的系统上有自己的用户。由于您尝试 chmod() 的文件归 root 所有，因此您无权对它们进行 chmod。您需要先进入您的文件系统，然后将这些文件分配给正确的用户和组。

# java - 静态和非静态的麻烦

> ID：16211034
> 
> 赞同：1
> 
> 时间：2013-04-25T09:23:55.603
> 
> 标签：java, static-methods, non-static

我是 Java 新手，现在正在学习初学者课程。非常好，我正在尝试各种东西，但现在我被卡住了。这段代码不起作用。它应该以相反的顺序（按字）输出输入。

翻转它的代码在我编写的一段没有 GUI 的代码中工作，现在我正试图让它在带有固定按钮、标签等的 GUI 中工作。为此，我从互联网上复制了一个示例并尝试以这样的方式改变它会起作用。但它似乎没有找到我在 actionPerformed 中使用的变量并且在 AddComponentsToPane 中设置。它必须与静态和非静态有关，我似乎不太清楚

任何帮助将不胜感激。

这是代码。

```
package flipit;

import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.*; //ArrayList;
import javax.swing.*;

public class FlipIt extends JFrame implements ActionListener {

public static void addComponentsToPane(Container pane) {

  pane.setLayout(null);

  JLabel     greetingLabel   = new JLabel("Enter your array ");
  JTextField inField         = new JTextField();
  JTextField commentaryField = new JTextField();
  JTextField strLen          = new JTextField();
  JButton    button          = new JButton("FlipIt");

  pane.add(greetingLabel);
  pane.add(inField);
  pane.add(commentaryField);
  pane.add(button);        

  Insets insets  = pane.getInsets();
  Dimension size = button.getPreferredSize();

  greetingLabel.setBounds (   5 + insets.left, 35 + insets.top,size.width + 40, size.height);
  inField.setBounds        (120 + insets.left, 33 + insets.top,size.width + 200, size.height);
  //size = commentaryField.getPreferredSize();
  commentaryField.setBounds(120 + insets.left, 80 + insets.top,size.width + 200, size.height);
  size = button.getPreferredSize();
  button.setBounds         (  5 + insets.left, 80 + insets.top,size.width + 40, size.height);

}

private static void createAndShowGUI() {
    //Create and set up the window.

    JFrame frame = new JFrame("Reverse the input string.");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.
    addComponentsToPane(frame.getContentPane());

    //Size and display the window.
    Insets insets = frame.getInsets();
    frame.setSize(500 + insets.left + insets.right,
                  425 + insets.top + insets.bottom);
    frame.setVisible(true);
}

    public static void main(String[] args) {
     Scanner input = new Scanner(System.in);

    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}

public void actionPerformed(ActionEvent event) {

    String InputStr = inField.getText();
    int length = InputStr.length(); 

    if (InputStr.compareTo("") == 0 || InputStr == null) {
        commentaryField.setText("Please enter some data, this array is empty");
    }
    else {

        // Convert string variable to an ArrayList.
        List<String> list = new ArrayList<String>(Arrays.asList(InputStr.split(" ")));            
        // Converting ArrayList to a String Array
        String [] InputList = list.toArray(new String[list.size()]);

        int i = 0 ;
        String ReverseOrder = "" ;

        // starting for loop to print the array in reversed order.
        for (i=InputList.length-1;i>=0; i--)
            {ReverseOrder = ReverseOrder + " " + InputList[i] ;
           }
        // print result.
          commentaryField.setText(ReverseOrder);   
          strLen.setText("Lengte string : "+ length);  
     }
   }  
} 
```

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:37:21.410

主要问题是范围界定问题。由于您在方法内部声明小部件，*因此*`addComponentsToPane`它们在方法外部不可见。

尝试将您的小部件声明移动到`addComponentstoPane`方法之外：

```
JLabel     greetingLabel   = new JLabel("Enter your array ");
JTextField inField         = new JTextField();
JTextField commentaryField = new JTextField();
JTextField strLen          = new JTextField();
JButton    button          = new JButton("FlipIt");

public static void addComponentsToPane(Container pane) {

  pane.setLayout(null);

  pane.add(greetingLabel);
  pane.add(inField);
  pane.add(commentaryField);
  pane.add(button);     
  // etc
} 
```

正如您所指出的那样（对不起，我的错！）您的静态方法将不再有权访问小部件（因为它们现在是类*实例*的一部分）。

考虑静态与非静态的简单方法是，如果将某些内容声明为静态，*则不需要*类实例即可访问它。因此，在您的代码中，您为什么可以这样做：

```
public void run() {
    createAndShowGUI();
} 
```

实际上，这与执行此操作相同：

```
public void run() {
    FlipIt.createAndShowGUI();
} 
```

请注意，您尚未创建 FlipIt 类的*实例*；你不需要，因为`createAndShowGUI`方法是`static`. 但是，如果它*不是*静态的，那么您将不得不创建一个新的类实例，如下所示：

```
public void createAndShowGUI() {
    // do your thing - note NO LONGER STATIC
}

public void run() {
    // Create instance
    FlipIt flipper = new FlipIt();

    // Invoke method against class instance
    flipper.createAndShowGUI();
} 
```

所以 - 为了让你的代码正常工作，最好的解决方案是让所有东西都不是静态的（当然`main`方法除外，它**必须**是静态的）。

这是整个代码示例放在一起 - 请注意，您可能需要制作该`createAndShowGUI`方法`public`- 但我不这么认为。自从我用java编码以来已经有一段时间了，所以我不能确定。

```
package flipit;

import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.List;
import java.util.*; //ArrayList;
import javax.swing.*;

public class FlipIt extends JFrame implements ActionListener {
  JLabel     greetingLabel   = new JLabel("Enter your array ");
  JTextField inField         = new JTextField();
  JTextField commentaryField = new JTextField();
  JTextField strLen          = new JTextField();
  JButton    button          = new JButton("FlipIt");

  public void addComponentsToPane(Container pane) {
    pane.setLayout(null);

    pane.add(greetingLabel);
    pane.add(inField);
    pane.add(commentaryField);
    pane.add(button);        

    Insets insets  = pane.getInsets();
    Dimension size = button.getPreferredSize();

    greetingLabel.setBounds (   5 + insets.left, 35 + insets.top,size.width + 40, size.height);
    inField.setBounds        (120 + insets.left, 33 + insets.top,size.width + 200, size.height);
    //size = commentaryField.getPreferredSize();
    commentaryField.setBounds(120 + insets.left, 80 + insets.top,size.width + 200, size.height);
    size = button.getPreferredSize();
    button.setBounds         (  5 + insets.left, 80 + insets.top,size.width + 40, size.height);
  }

  private void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("Reverse the input string.");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.
    addComponentsToPane(frame.getContentPane());

    //Size and display the window.
    Insets insets = frame.getInsets();
    frame.setSize(500 + insets.left + insets.right,
                  425 + insets.top + insets.bottom);
    frame.setVisible(true);
  }

  public void actionPerformed(ActionEvent event) {
    String InputStr = inField.getText();
    int length = InputStr.length(); 

    if (InputStr.compareTo("") == 0 || InputStr == null) {
      commentaryField.setText("Please enter some data, this array is empty");

    } else {

      // Convert string variable to an ArrayList.
      List<String> list = new ArrayList<String>(Arrays.asList(InputStr.split(" ")));            
      // Converting ArrayList to a String Array
      String [] InputList = list.toArray(new String[list.size()]);

      int i = 0 ;
      String ReverseOrder = "" ;

      // starting for loop to print the array in reversed order.
      for (i=InputList.length-1;i>=0; i--) {
        ReverseOrder = ReverseOrder + " " + InputList[i] ;
      }

      // print result.
      commentaryField.setText(ReverseOrder);   
      strLen.setText("Lengte string : "+ length);  
    }
  }  

  public static void main(String[] args) {
      Scanner input = new Scanner(System.in);

      //Schedule a job for the event-dispatching thread:
      //creating and showing this application's GUI.
      javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
          FlipIt flipper = new FlipIt();
          flipper.createAndShowGUI();
        }
      });
    }
  }
} 
```

希望有帮助！

# java - 无法初始化类 com.mysql.jdbc.driver 原因：java.security.AccessControlException：访问被拒绝

> ID：16211036
> 
> 赞同：0
> 
> 时间：2013-04-25T09:23:57.777
> 
> 标签：java, mysql, eclipse, hibernate-mapping

我是休眠新手，我在 eclips 的帮助下创建了项目（Google Web 应用程序项目），这是我的休眠配置文件..

```
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="">
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/test</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.hbm2ddl.auto">create</property>
  <property name="hibernate.show_sql">true</property>

  <mapping class="com.model.UserDetails" />
 </session-factory>
</hibernate-configuration> 
```

这是我访问数据的休眠代码

```
 System.out.print("servlet class");
    SessionFactory sessionFactory=new AnnotationConfiguration().configure().buildSessionFactory();
    System.out.println("session FActory");
    Session hibernate_session = sessionFactory.openSession();
    System.out.println("Session");
    hibernate_session.beginTransaction();
    System.out.println("Transation begin");

                UserDetails user=new UserDetails();
                user.setUserName("ramesh@stellentsoft.com");
                user.setUserEmail("ramesh@stellentsoft.com");

                user.setUserPassword("password");
                hibernate_session.save(user);

                hibernate_session.getTransaction().commit();
                System.out.println("User is saved"); 
```

运行此代码时，我在控制台中遇到这样的错误..

```
com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error for /Home
java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.hibernate.connection.DriverManagerConnectionProvider.configure(DriverManagerConnectionProvider.java:57)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:124)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:56)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:397)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:62)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2006)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1289)
    at com.controller.Trackerlogin.service(Trackerlogin.java:55)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:63)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectRequest(DevAppServerServersFilter.java:369)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectServerRequest(DevAppServerServersFilter.java:352)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:115)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkAccess(DevAppServerFactory.java:314)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:288)
    at java.lang.Thread.init(Thread.java:332)
    at java.lang.Thread.<init>(Thread.java:419)
    at com.mysql.jdbc.AbandonedConnectionCleanupThread.<init>(AbandonedConnectionCleanupThread.java:33)
    at com.mysql.jdbc.NonRegisteringDriver.<clinit>(NonRegisteringDriver.java:88)
    ... 46 more
Apr 25, 2013 2:41:22 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Nested in java.lang.ExceptionInInitializerError:
java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkAccess(DevAppServerFactory.java:314)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:288)
    at java.lang.Thread.init(Thread.java:332)
    at java.lang.Thread.<init>(Thread.java:419)
    at com.mysql.jdbc.AbandonedConnectionCleanupThread.<init>(AbandonedConnectionCleanupThread.java:33)
    at com.mysql.jdbc.NonRegisteringDriver.<clinit>(NonRegisteringDriver.java:88)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.hibernate.connection.DriverManagerConnectionProvider.configure(DriverManagerConnectionProvider.java:57)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:124)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:56)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:397)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:62)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2006)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1289)
    at com.controller.Trackerlogin.service(Trackerlogin.java:55)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:63)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectRequest(DevAppServerServersFilter.java:369)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectServerRequest(DevAppServerServersFilter.java:352)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:115)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:421)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我该如何解决这个问题，以下是添加到库中的 jar 文件列表...

![在此处输入图像描述](https://i.stack.imgur.com/BrFAv.png)

伙计们请让我离开这个断点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:36:49.140

似乎在您的网络项目属性中选中了“使用 Google App Engine”。取消选中并重试（Project -> Properties -> Google -> App Engine）（如果您不打算在 Eclipse 中使用 GAE）

由于 GAE 不允许使用线程，因此其安全设置会限制此类操作，从而产生 AccessControlException。

[此外，您可以查看 GAE willItPlayInJava](https://code.google.com/p/googleappengine/wiki/WillItPlayInJava)可以使用的所有内容的完整列表。据它说：

> 您目前不能直接使用 Hibernate。

但是通过 Cloud SQL 这是可能的，请查看[https://developers.google.com/appengine/articles/using_hibernate](https://developers.google.com/appengine/articles/using_hibernate)

# android - Android OnTouchEvent：调试 InputEventConsistencyVerifier 消息

> ID：16211038
> 
> 赞同：0
> 
> 时间：2013-04-25T09:24:04.750
> 
> 标签：android, listview, touch-event, gestures

我有一个配置了手势监听器的布局`OnTouchEvent()`。布局包含一个列表视图，我正在使用手势来捕获列表视图的行 ID。我有以下代码 -

```
 itemsList.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent evt) {
            // TODO Auto-generated method stub
            //
            int action = evt.getAction();
            final String DEBUG_TAG = "DEBUG";
            detector.onTouchEvent(evt);
            switch(action) {
                case (MotionEvent.ACTION_DOWN) :
                    Log.d(DEBUG_TAG,"Action was DOWN");
                    return true;
                case (MotionEvent.ACTION_MOVE) :
                    Log.d(DEBUG_TAG,"Action was MOVE");
                    return true;
                case (MotionEvent.ACTION_UP) :
                    Log.d(DEBUG_TAG,"Action was UP");
                    return true;
                case (MotionEvent.ACTION_CANCEL) :
                    Log.d(DEBUG_TAG,"Action was CANCEL");
                    return true;
                case (MotionEvent.ACTION_OUTSIDE) :
                    Log.d(DEBUG_TAG,"Movement occurred outside bounds " +
                            "of current screen element");
                    return true;    
            } 

            return false;
        }

    }); 
```

检测器是 GestureDetector 实例。我基本上只是在列表视图的一行上使用向左滑动或向右滑动动作。

每当我向左/向右滑动时，我都会在 Logcat 中收到 3 条调试消息（信息或要查看的东西？？）。

```
D/InputEventConsistencyVerifier(24700): TouchEvent: ACTION_MOVE contained 1 pointers 
but there are currently 0 pointers down.

D/InputEventConsistencyVerifier(24700):   in android.view.GestureDetector@b50cf9b0

D/InputEventConsistencyVerifier(23596):   0: sent at 37751425150760, 
MotionEvent { action=ACTION_MOVE, id[0]=0, x[0]=39.00721, y[0]=28.526703, toolType[0]=TOOL_TYPE_FINGER, 
buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=1, eventTime=37751425, 
downTime=37751133, deviceId=0, source=0x1002 } 
```

还有来自 OnTouchListener 的 4 条调试消息 -

```
Action was ACTION MOVE
Action was ACTION MOVE
Action was ACTION MOVE
Action was ACTION UP 
```

这对应于我相信的滑动动作。

因此，主要活动类扩展`OnGestureListener`了其未实现的方法，例如 onFling.. 等。

问题是仅在`ACTION UP`事件之后调用 onFling 方法，并且当发生这种情况时，传递给方法 mevt1 的参数为空，而 mevt2 不为空。（默认行为？）

onFling（MotionEvent mevt1，MotionEvent mevt2，浮动 velX，浮动 velY）

该方法使用 mevt1，因此会导致 nullpointexception。

我想知道来自的调试消息`InputEventConsistencyVerifier`是否有任何问题，是否有人知道这是否有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:58:58.940

你必须打电话

```
detector.onTouchEvent(evt) 
```

对于每一个动作，而不仅仅是 ACTION_MOVE

# build - FFMPEG - 构建 ubuntu 32 位 - 缺少共享库：libspeex

> ID：16211040
> 
> 赞同：0
> 
> 时间：2013-04-25T09:24:04.950
> 
> 标签：build, ffmpeg, cross-platform, static-libraries

我目前正在做一个在 C++ 中调用 ffmpeg 的跨平台软件，我需要一个在 ubuntu 32 位和 64 位上工作的 ffmpeg 构建程序。我还需要这个 ffmpeg 构建来包含 librtmp、libh264、x11-grab、alsa 和 mp3。

我尝试在 32 位虚拟机上编译 ffmpeg，以使 ffmpeg 构建在 ubuntu 32 位和 62 位上工作。

我使用本指南构建 ffmpeg： [https ://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

在自己编译了所有库和 ffmpeg 之后，在使用 deb 文件安装之后，ffmpeg 在 32 位虚拟机上完美运行，其中包含我所有必需的组件，但在我的 62 位 ubuntu 上却没有。

在 ubuntu 64 位上执行 ffmpeg 时，我收到一条消息：不可能找到共享库 libspeex。

你知道为什么我只有在 linux 64bits 上保存 deb 文件时才会出现这个问题吗？你知道一个网站，我可以找到一个包含我需要的所有组件的 ffmpeg 32bits 构建（如果可能的话是静态的）？我试过这个网站[http://ffmpeg.gusari.org/static/](http://ffmpeg.gusari.org/static/)但构建不包括 alsa ...

我有一个完美运行的 Windows 构建，我在这个网站上下载了 32 位静态构建：zeranoe builds website for windows。

提前感谢您的任何回答。问候。

贝努瓦·布雷耶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:05:03.967

我终于通过编译 2 个特定版本（一个用于 linux 32 位，一个用于 liux 64 位）来解决我的“问题”。

这现在工作得很好，但我需要创建一个自定义安装脚本来选择系统功能的良好 ffmpeg 版本......

贝努瓦·布雷耶

# slider - 使用 URL 开始幻灯片

> ID：16211045
> 
> 赞同：1
> 
> 时间：2013-04-25T09:24:14.010
> 
> 标签：slider, url-routing

我需要通过 URL 转到幻灯片 5。因此，当我键入 url.com/#slide5 或 /?start=slide5 之类的内容时，需要触发代码“startSlide: 5”。

```
$(document).ready(function(){
  $('.slider').bxSlider({
    slideWidth: 300,
    minSlides: 2,
    maxSlides: 3,
    startSlide: 5,
    slideMargin: 10
  });
}); 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:29:34.423

您可以使用[window.location.hash](http://www.w3schools.com/jsref/prop_loc_hash.asp)

```
$(document).ready(function(){
  var hash = window.location.hash;

  $('.slider').bxSlider({
    slideWidth: 300,
    minSlides: 2,
    maxSlides: 3,
    startSlide: hash,
    slideMargin: 10
  });
}); 
```

但为此，您必须仅将幻灯片编号添加到哈希中，例如 url.com/#5 或应用一些逻辑从哈希中删除幻灯片编号。

# string - 如何在 bash 脚本中连接字符串？

> ID：16211047
> 
> 赞同：0
> 
> 时间：2013-04-25T09:24:23.710
> 
> 标签：string, bash

如何在 bash 脚本中连接两个字符串？

示例：我想连接`"foo"`and `"bar"`，但不为“bar”创建新变量。

`VAR="foo"`

`echo "$VARbar"`

这不起作用，因为它被视为变量名`VARbar`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:25:45.650

这可以工作：

```
echo "${VAR}bar" 
```

如果你把括号括`"`起来，你可以根据需要连接它。有了它，bash 就可以理解变量的名称只是“VAR”，其余的只是文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:26:08.947

使用{}区分变量名即

```
echo "${VAR}bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:30:13.933

```
bash_prompt$ l="aaa"
bash_prompt$ m="bbb"
bash_prompt$ n=$l$m
bash_prompt$ echo $n
bash_prompt$ aaabbb
bash_prompt$ n=$l"bbb"
bash_prompt$ echo $n
bash_prompt$ aaabbb 
```

Bash 默认进行字符串连接

# google-apps-script - HTML 服务模板中的 CSS

> ID：16211054
> 
> 赞同：1
> 
> 时间：2013-04-25T09:24:47.473
> 
> 标签：google-apps-script

我刚刚开始使用 GAS HTML 服务。我在弄清楚将 CSS 放在哪里时遇到了一些问题（我相信这很简单）。下面是一个简单的代码示例。在其中我只是想设置背景颜色。设置和组织它的正确方法是什么？

```
//Code.gs
function doGet() {
  return HtmlService.createTemplateFromFile("index").evaluate();
}

//index.html

<style>
body
{
background-color:#e5e6e8;
}
</style>

<html>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-    ui.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js">    </script>
  <body>  
    <a href = "#" id = "index1" class = "Anchor">I am index1</a>
    <a href = "#" id = "index2" class = "Anchor">I am index2a</a>
<div id="div">1</div>

<script>$(document).ready(function() {
    $("#index1").click(function() {
       $("#div").append("2");
      $("#index1").hide();
    });
});</script>

 </body>  
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:30:03.857

样式标签应该放在 HTML 标签内。

```
//index.html

<html>

<style>
body
{
background-color:#e5e6e8;
}
</style>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-    ui.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js">    </script>
  <body>  
    <a href = "#" id = "index1" class = "Anchor">I am index1</a>
    <a href = "#" id = "index2" class = "Anchor">I am index2a</a>
<div id="div">1</div>

<script>$(document).ready(function() {
    $("#index1").click(function() {
       $("#div").append("2");
      $("#index1").hide();
    });
});</script>

 </body>  
</html> 
```

[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T13:43:10.817

我在某处找到了这种方法（当然不在谷歌文档中）：我有非常标准的 .gs 和 index.html 。然后我将我的 css 分离到同一个项目中的 style.html 中，并将这段代码放在 index.html 中以引用样式表：`<?!= include('style'); ?>`.

然后在 .gs 我添加了这个：

```
function include(filename) {
  return HtmlService.createHtmlOutputFromFile(filename)
  .setSandboxMode(HtmlService.SandboxMode.NATIVE)
  .getContent();
} 
```

# android - 使用图像视图翻译动画没有正确获得位置

> ID：16211059
> 
> 赞同：3
> 
> 时间：2013-04-25T09:25:02.550
> 
> 标签：android, imageview, position, translate-animation

我的代码中有几个问题：

1.我使用 getX(), getY() 来获取 imageview 在相对布局中的位置。获得职位的方法是否正确？

2.Translate Animate 不会以确切的位置停止。（即）它穿过图像视图（目的地）

3.如果动画结束到特定位置，我想将背景图像设置到该位置，我该如何实现？

1.  连续动画中的逻辑错误吗？我在动画结束方法中使用..请提供您的建议。我只是一个初学者。这是我正在开发的一个小游戏。

这是我的 xml 和 java 代码

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:gravity="center_vertical" >

<ImageView
    android:id="@+id/player4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginRight="20dp"
    android:layout_toLeftOf="@+id/player5"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="14dp"
    android:layout_marginRight="89dp"
    android:layout_toLeftOf="@+id/player4"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/player5"
    android:layout_marginRight="26dp"
    android:layout_toLeftOf="@+id/player2"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"        
    android:visibility="invisible"
    android:layout_marginRight="16dp"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/player2"
    android:layout_alignParentTop="true"       
     android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/player7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/player1"
    android:layout_alignLeft="@+id/player6"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/dealer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/player4"
    android:layout_alignParentTop="true"
    android:visibility="invisible"
    android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

我的.java 文件

```
 //getting the imageviews from layout
    player1=(ImageView)findViewById(R.id.player1);
    player2=(ImageView)findViewById(R.id.player2);
    player3=(ImageView)findViewById(R.id.player3);
    player4=(ImageView)findViewById(R.id.player4);
    player5=(ImageView)findViewById(R.id.player5);
    player6=(ImageView)findViewById(R.id.player6);
    player7=(ImageView)findViewById(R.id.player7);
    dealer=(ImageView)findViewById(R.id.dealer);

     private void Logic() {
// TODO Auto-generated method stub

   if(players ==1)animation = new TranslateAnimation(0,addX.get(0),0,addY.get(0));
   if(players ==2)animation = new TranslateAnimation(0,addX.get(1),0, addY.get(1));
   if(players ==3)animation = new TranslateAnimation(0,addX.get(2),0, addY.get(2));
   if(players ==4)animation = new TranslateAnimation(0,addX.get(3),0, addY.get(3));
   if(players ==5)animation = new TranslateAnimation(0,addX.get(4),0, addY.get(4));
   if(players ==6)animation = new TranslateAnimation(0,addX.get(5),0, addY.get(5));
   if(players ==7)animation = new TranslateAnimation(0,addX.get(6),0, addY.get(6)); 
   }

  //Method for Start Animation

    private void doAnimation() {
// TODO Auto-generated method stub

animation.setDuration(1000);
animation.setFillAfter( true );
animation.setAnimationListener(this);
dealer.startAnimation(animation);
    }
//IN Animation END
   public void onAnimationEnd(Animation animation) {
// TODO Auto-generated method stub

   dealer.clearAnimation();
   dealer.setImageResource(R.drawable.singlecard);
   players=players+1;
   dealer.clearAnimation();
    if(players<=count){
Logic();
    doAnimation();

    }
    } 
```

# mysql - COUNT ifnull mysql 查询

> ID：16211064
> 
> 赞同：0
> 
> 时间：2013-04-25T09:25:16.213
> 
> 标签：mysql, sql, count

我的数据库中有 2 个表，fleets 和personal_onboard_fleets。我正在尝试获取所有舰队的列表（有效）并计算每个舰队上有多少人员（无效）。但是，如果船上没有任何人员，则不会显示结果。

```
SELECT f.*, count(pof.ID) AS onboard 
FROM fleets f, personnel_onboard_fleets pof 
WHERE f.fleet_ID = pof.fleet_ID ORDER BY f.status 
```

我期待 2 个结果，一个有 2 人的机队，一个有 0 人的机队。但是我只得到一个结果。我尝试使用以下

```
SELECT f.*,  IFNULL(COUNT(pof.ID), 0) AS onboard 
FROM fleets f, personnel_onboard_fleets pof 
WHERE f.fleet_ID = pof.fleet_ID ORDER BY f.status 
```

我真的看不出查询有什么问题，是否需要添加其他任何内容来显示船上有 0 人的车队。

我在计数之前的原始查询显示所有舰队都很好，所以我知道这与计数有关。

这真让我抓狂！任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:31:07.893

尝试：

```
SELECT f.fleet_id,
       Count(pof.id) AS onboard
FROM   fleets f
       LEFT JOIN personnel_onboard_fleets pof
              ON f.fleet_id = pof.fleet_id
GROUP  BY f.fleet_id
ORDER  BY f.status; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:32:19.237

`COUNT()`是一个聚合函数，它返回总行数。如果您指定字段名称（如您所做的那样），`NULL`则返回非值的数量。

您需要使用 GROUP BY。这会基于字段聚合行。然后，`COUNT()`返回每个组的总数。

```
SELECT f.fleet_ID, count(pof.ID) AS onboard
    FROM fleets f LEFT JOIN personnel_onboard_fleets pof
    ON f.fleet_ID = pof.fleet_ID
    GROUP BY f.fleet_ID
    ORDER BY f.status; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:36:39.360

`pof`您的内部联接将消除不满足操作员的任何行`=`。

您需要左连接，例如：

```
SELECT f.*, COUNT(pof.fleet_ID) AS onboard 
FROM fleets f
LEFT JOIN personnel_onboard_fleets pof ON f.fleet_ID = pof.fleet_ID
GROUP BY f.fleet_ID ORDER BY f.status 
```

# iphone - 为什么我的 UIScrollView 不起作用？

> ID：16211075
> 
> 赞同：1
> 
> 时间：2013-04-25T09:25:44.473
> 
> 标签：iphone, objective-c, xcode, uiscrollview, scroll

我已经将 a 放在了`UIScrollView`一个`ViewController`in 中，`IB`并给出了`tag:1`. 在`viewDidLoad:`，我有这个代码：

```
UIScrollView *scrollView = (id)[self.view viewWithTag:1];

scrollView.backgroundColor = [UIColor clearColor];
scrollView.opaque = NO;

[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320, 800)]; 
```

我有一个滑块和一个标签，`ScrollView`只是为了查看它是否滚动，但它根本不滚动。例如，我可以将其更改`backgroundColor`为`yellowColor`，但它不会滚动。有我必须添加的方法或操作吗？请帮忙！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:29:08.280

不久前我遇到了同样的问题，但这成功了。

使用 -(void)viewDidAppear:(BOOL)animated { ... }

```
-(void)viewDidAppear:(BOOL)animated  {

    [super viewDidAppear:YES];

    scrollView.backgroundColor = [UIColor clearColor];

    scrollView.opaque = NO;

    [scrollView setScrollEnabled:YES];

    [scrollView setContentSize:CGSizeMake(320, 800)];

    [super viewDidLoad];
} 
```

还要在标题中声明 UIScrollView

```
@property (retain, nonatomic) IBOutlet UIScrollView *scrollView; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:42:04.050

像这样试试

```
UIScrollView *scrollView = (id)[self.view viewWithTag:1];
scrollView.frame=CGRectMake(0, 0, 320, 460);
[self.view addSubview:scrollView];
scrollView.backgroundColor = [UIColor clearColor];
scrollView.opaque = NO;
[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320, 800)]; 
```

因为当滚动视图高度越过当前视图高度时，只有它可以滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:30:56.197

尝试将此代码添加到`viewWillAppear`

```
UIScrollView *scrollView = (UIScrollView *)[self.view viewWithTag:1];
scrollView.frame=CGRectMake(0, 0, 320, 400);
scrollView.backgroundColor = [UIColor clearColor];
[scrollView setScrollEnabled:YES];
[scrollView setContentSize:CGSizeMake(320, 800)]; 
[scrollView setUserInteractionEnabled:YES]; 
```

希望能帮到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:06:44.790

这可能是它的问题，设置 TopBar 的`UIView`with `UINavigationBar`from xib 和 BottomBar 的...这里从 XIB 首先选择 main ，然后在 Simulated metrics set NavigationBar as a TopBar 和 set frame of in`UIView`之后单击。`Attribute Inspector``UIScrollView``XIB`

尝试使用下面的代码它将起作用..

```
[scrollView setContentSize:CGSizeMake(320, 844)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:34:01.450

```
scrollView.backgroundColor = [UIColor clearColor]; 
```

将其更改为红色或绿色等明亮的颜色以进行测试。

```
UIScrollView *scrollView = (id)[self.view viewWithTag:1];
scrollView.backgroundColor = [UIColor clearColor]; 
```

还要确保你的滚动视图不是 nil （在从`[self.view viewWithtag:1]`. 获取之后，否则代码看起来没问题

**编辑**

在界面生成器中选择滚动视图 > 转到属性编辑器 > 勾选滚动启用

![启用滚动](https://i.stack.imgur.com/SQ3VI.png)

# android - 如何使用低于 API 级别 11 的 webView.saveWebArchive() 保存 HTML 页面？

> ID：16211084
> 
> 赞同：3
> 
> 时间：2013-04-25T09:26:07.237
> 
> 标签：android, html, api, android-webview, android-sdcard

我想将 HTML 页面本地保存在 SD 卡上，稍后再使用。

我可以使用

```
webView.saveWebArchive(filename); 
```

但是此方法在 API 级别 11 以下不存在。如何使用 API 级别以下 11 执行相同的功能？

# python - 使用 Paramiko、Python 时不支持 Errno -8 Servname

> ID：16211087
> 
> 赞同：3
> 
> 时间：2013-04-25T09:26:11.227
> 
> 标签：python, python-2.7, paramiko

我正在尝试通过 Python 脚本通过 SSH 连接到服务器。目前我正在尝试 paramiko。我在客户端和服务器之间设置了一个公钥，所以我不需要密码。我目前正在使用以下代码：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

ssh.connect('192.168.56.102', 'oracle', None, '~/.ssh/id_rsa')
stdin, stdout, stderr = ssh.exec_command('ls') 
```

但是当运行这个时，我得到了错误

> [Errno -8] ai_socktype 不支持服务名

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T15:07:20.257

您只需指定参数即可。不需要添加端口号（如果可以使用默认端口号）。

根据[connect](http://docs.paramiko.org/en/1.13/api/client.html#paramiko.client.SSHClient.connect)的定义，您的示例将如下所示：

```
ssh.connect('192.168.56.102', username='oracle', password=None, key_filename='~/.ssh/id_rsa') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:56:16.123

这是通过添加端口号作为参数解决的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T22:18:26.723

基本上这会抱怨 ai_socktype 如果您跳过任何参数但没有在您跳过的参数之后明确命名参数。在这种情况下，问题在于参数“用户名”是第二个参数，但不是“用户名='oracle”。这也是添加端口号修复它的原因（然后没有参数被跳过）

# php - 从php中表的两个主键生成唯一的12个字母字母数字字符串

> ID：16211088
> 
> 赞同：4
> 
> 时间：2013-04-25T09:26:17.007
> 
> 标签：php, algorithm

我有两张桌子：`category(cat_id type int,cat_name)`和`books(book_id type int,cat_id)`。当我将一本书分配给用户时，他将获得一个`book code`. 我想形成包含 12 个字母数字字符的本书代码，它必须源自`cat_id`and `book_id`。此外，我应该能够解码代码以获得`cat_id`and `book_id`。任何想法？。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:48:32.550

使用 HEX 有一种更简单的方法，但您需要决定书籍使用多少位数以及类别使用多少位数。

例如，我建议将 8 用于书籍，将 4 用于类似的类别。通过使用十六进制一，最大记录为 FFFFFFFF FFFF，您可以在其中用完所有无符号整数的书籍（最多 4294967295 本书）和 65535 个类别。

实际上，`LPAD(HEX(book_id), 8, '0')`对于前 8 位数字和`LPAD(HEX(cat_id), 4, '0')`后 4 位数字。

所以你想要的书代码可以通过`SELECT CONCAT(LPAD(HEX(book_id), 8, '0'),LPAD(HEX(cat_id), 4, '0')) FROM books`

要取回： `SELECT UNHEX(substr(code,1,8)) as book_id, UNHEX(substr(code,9,4)) as cat_id FROM bookcode WHERE id=1`

如果您想在书籍代码中包含更大的数据集，您可以尝试对这两个项目使用 base36 甚至 base62（区分大小写）编码。这种编码需要您自己的用户程序代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:59:51.997

好的，给你...

这可以处理最大有符号整数类型。并且产生不超过 12 个字符。

```
$firstId = "2147483646";
$secondId = "2147483646";
$firstBinary  = str_pad(base_convert($firstId, 10, 2), 31, "0", STR_PAD_LEFT);
$secondBinary  = str_pad(base_convert($secondId, 10, 2), 31, "0", STR_PAD_LEFT);
$finalBase36 = str_pad(base_convert($firstBinary.$secondBinary, 2, 36), 12, "0", STR_PAD_LEFT);
var_dump($finalBase36); 
```

**更新：**对不起，我犯了一个错误..这应该用更新的代码来解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:49:52.783

假设`int`类型是 32 位无符号整数。2`int`组合将有 2^64 个唯一值，大约为 1.844e19。

如果我们只使用小写或大写英文字母加数字，则有 36^12 = 4.738e18 个不同的值，这不足以创建从 2 个键到书码的一对一映射。

如果您在图书代码的字符集中再添加 5 个字符，则将有 41^12 = 2.256e19 个不同的值，这足以创建一对一映射。

但是，转换将涉及除法和乘法，当您从书本代码转换回键时，可能会发生整数溢出。

如果可能，您可能希望将字符集扩展到 64 个字符：26 * 2 小写/大写英文字母、10 个数字和 2 个特殊字符（可能是`_`或`-`），您可以在其中玩位移位 - 这是安全的整数溢出。对于未使用的位，您可能希望用随机数据填充它，这些数据由 2 个密钥播种；反向构造将忽略具有随机位的（固定）位置。

# python - FeinCMS 每个页面对象只允许一个内容类型

> ID：16211089
> 
> 赞同：4
> 
> 时间：2013-04-25T09:26:22.363
> 
> 标签：python, django, feincms

是否有任何默认操作允许每页只允许一次内容类型，然后覆盖管理表单？文档对此不清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T15:10:38.267

我认为没有开箱即用的实现，你可以在[Github](https://github.com/feincms/feincms)上推荐一个。由于 FeinCMS 内容类型是一个抽象的 Django 模型类，你可以使用它的 clean 方法，例如

```
class FooContent(models.Model):
    content = models.Bar('...')

    class Meta:
        abstract = True

    def clean(self):
        if self.parent.foocontent_set.count() >= 1:
            raise ValidationError('FooContent is only allowed once per Page.')

    def render(self, **kwargs):
        return render_to_string('content/foo.html', {
            'content': self.content
        }) 
```

这将在管理表单上引发[非字段错误。](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

# javascript - 如果元素存在于文档中

> ID：16211090
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:24.617
> 
> 标签：javascript, jquery

我的函数可能使用过时的 jquery 元素。例如，当我使用 close 和回调时：

```
 $("input").each(function () {
       var input = $(this);

       //here for example we remove input from DOM
       //and insert the new one input

       $.ajax(url, function(){
          fun(input)
       }
    });

function fun(input){
//do something
input.val('newValue')
} 
```

问题是：我如何确定对变量的引用仍然正确。如果元素已被重新创建，我如何获得新输入的新参考（输入没有 id 和类）？

**UPDATE1：**我做了小更新。我们在函数*fun*中使用旧的*输入*引用。并且*newValue*将不适用于新输入，因为当前*输入*是旧值。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:33:01.240

您可以通过检查 jQuery 对象的长度来检查元素是否存在。例如：

```
if($(this).length < 1)
{
    // the element no longer exists in the DOM
} 
```

但是，您可以使用 jQuery 的[`on()`](http://api.jquery.com/on/)函数将事件绑定到现在或将来存在的元素，这可能是一种比您当前使用的方法更好的方法。例如：

```
$('body').on('click', 'input', function(e) {  
    // Place your click handler here.
}); 
```

[**这篇文章**](http://www.andismith.com/blog/2011/11/on-and-off/)可能对你来说是值得一读的。***

# arm - 二进制/ELF 在不同的 ARM 系统上静默退出

> ID：16211091
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:24.523
> 
> 标签：arm, elf, armv7, cortex-a8

我有一个在 armv7a Cortex-A9 CPU 上编译的 ELF。它在那里运行良好，没有任何问题，但是当它移到 armv7a Cortex-A8 CPU 上时，文件会静默退出，如下所示：

casey@arm:~/Unreal/System$ ./UCCLinux.bin.orig casey@arm:~/Unreal/System$

我构建了自己的 UCCLinux.bin，它使用了Cortex A9 CPU未*更改的共享对象，并且执行工作正常。*这让我相信共享对象没有问题，但 ELF 本身有问题。但是，区分 ld --verbose/readelf 只显示了一个很小的差异。在我构建的版本上，它需要不同的依赖项。ld-linux-armhf.so.3，因为它不存在并替换为 libm.so.6；我有。

工作系统上还有一个让我困惑的搜索路径：SEARCH_DIR("/usr/armv7hl-suse-linux-gnueabi/lib") armv7* *h* *l, with no hf on gnueabi。我不确定这是否意味着 SuSE 在 Ubuntu 上构建的任何内容，因为它们都是硬浮动的，它可能只是语义。

两个系统上的 ldd 输出都与原始文件匹配。除了对该依赖项的更改和一些相对较小的评论（可能来自不同发行版上的不同编译器）之外，我完全不知所措。

我有我构建的文件和给我的文件的 strace 输出。

好： http: [//pastebin.com/ef8Svn1Q](http://pastebin.com/ef8Svn1Q)

不好： http: [//pastebin.com/04fyP5xt](http://pastebin.com/04fyP5xt)

我完全不知道为什么会发生这种情况，因为我尝试的所有其他小型测试程序都可以完美运行。出于某种原因，这只是一个文件。使用 mtune=cortex-a8 进行的编译并没有改变任何东西，如果我们必须分发带有“哦顺便说一句，你必须编译自己的二进制文件才能运行它”的构建，那将是一个彻底的失败。另外，我怀疑这可能会出现一些潜在的问题。

相关的{据我所知}编译器选项：

-march=armv7-a -mtune=cortex-a9 -mfloat-abi=hard -mfpu=vfpv3-d16

FPU 匹配两个 cpu，并且都是 hardfloat armv7a。

有任何想法吗？

编辑：发现了一些关于 Valgrind 的新信息。

-1929-- 从 /home/casey/Unreal/System/UCCLinux.bin.orig (0x8000) 读取 syms --1929-- 从 /lib/arm-linux-gnueabi/ld-2.15.so (0x4000000) 读取 syms - -1929-- 考虑 /lib/arm-linux-gnueabi/ld-2.15.so .. --1929-- .. CRC 不匹配（计算的 c6793f6a 需要 66aab705）--1929-- 对象没有符号表

valgrind：启动时出现致命错误：函数重定向 valgrind：对于此平台工具组合是必需的 valgrind：无法设置。重定向的详细信息是： valgrind：必须重定向的函数 valgrind：其名称与模式匹配：memcpy valgrind：在具有 soname 匹配的对象中：ld-linux.so.3 valgrind：在处理时未找到 valgrind：符号来自带有 soname 的对象：ld-linux.so.3

我的发行版同时具有 hardfloat 和 softfloat 库，尽管我认为它们是互斥的。

# android - android facebook sdk 3.0 登录并获取用户信息

> ID：16211093
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:27.863
> 
> 标签：android, facebook, facebook-login

我正在开发一个应用程序，它使用需要很少的 facebook 信息来注册我自己的网站。

起初我使用的是 facebook SDK 1.5，一切正常。直到 facebook 表示自 2013 年 6 月起他们将停止支持旧的（v2.0 及以下）SDK。

所以我必须将它升级到 3.0，并重新编写我的代码。

以下是我在阅读了 facebook 的官方教程后所做的：

清单文件

```
<!-- some stuff -->
<uses-permission android:name="android.permission.INTERNET" />
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/fbAppId"/>
<activity android:name="com.facebook.LoginActivity" android:label="@string/app_name" /> 
```

字符串.xml

```
<!-- some stuff -->
<string name="fbAppId">1234567890</string> <!-- You do know this ID is fake, right ? --> 
```

代码

```
public class LoginFragment extends SherlockFragment
{
  private UiLifecycleHelper uiHelper;

  private Session.StatusCallback callback=new Session.StatusCallback()
  {
    @Override
    public void call(final Session session, final SessionState state, final Exception exception)
    {
      onSessionStateChange(session, state, exception);
    }
  };

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
  {
    View view=inflater.inflate(R.layout.login_fragment, container, false);

    LoginButton authButton=(LoginButton)view.findViewById(R.id.btnLogin);
    authButton.setFragment(this);
    authButton.setReadPermissions(Arrays.asList("basic_info", "user_status", "email"));

    return view;
  }

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    uiHelper=new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);
  }

  @Override
  public void onResume()
  {
    super.onResume();

    // For scenarios where the main activity is launched and user
    // session is not null, the session state change notification
    // may not be triggered. Trigger it if it's open/closed.
    Session session=Session.getActiveSession();
    if(session!=null&&(session.isOpened()||session.isClosed()))
    {
      onSessionStateChange(session, session.getState(), null);
    }

    uiHelper.onResume();
  }

  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data)
  {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
  }

  @Override
  public void onPause()
  {
    super.onPause();
    uiHelper.onPause();
  }

  @Override
  public void onDestroy()
  {
    super.onDestroy();
    uiHelper.onDestroy();
  }

  @Override
  public void onSaveInstanceState(Bundle outState)
  {
    try
    {
      super.onSaveInstanceState(outState);
      setUserVisibleHint(true);
      uiHelper.onSaveInstanceState(outState);
    }
    catch(Exception e)
    {
      e.printStackTrace();
      Log.w(Constants.TAG, "Error on save instance state, "+e.toString());
    }
  }

  private void onSessionStateChange(Session session, SessionState state, Exception exception)
  {
    if(state.isOpened()) //I don't know why state is always not opened......?
    {
      Request request=Request.newMeRequest(session, new Request.GraphUserCallback()
      {
        @Override
        public void onCompleted(GraphUser user, Response response)
        {
          if(user!=null)
          {
            Log.i(Constants.TAG, "Logged in...");
            Log.d("user fname", user.getFirstName());
            Log.d("user lname", user.getLastName());
            Log.d("user username", user.getUsername());
            Log.d("user email", (String) response.getGraphObject().getProperty("email"));
          }
          else
          {
            Log.i(Constants.TAG, "Logged out...");
          }

        }
      });

      Request.executeBatchAsync(request);
    }
  }
} 
```

当我运行我的应用程序时，我可以看到一个 facebook 登录按钮。

按下它，会出现一个对话框，要求我允许我的 APP 访问 facebook 信息、电子邮件...等。

在我按下是之后，什么也没有发生，甚至在 LogCat 中也没有任何结果......

我如何知道用户实际上已登录 facebook 并访问他们的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:36:25.197

你应该重写 onActivityResult 方法并调用

```
authButton.onActivityResult(params); 
```

# ruby-on-rails - 如何在 Ruby On Rails 中获取数组值

> ID：16211094
> 
> 赞同：4
> 
> 时间：2013-04-25T09:26:30.307
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3

我正在研究 Rails 中的本地化概念，需要在 HTML 页面中获取一些本地化值。所以我在控制器中生成了如下格式的数组。，

```
#array use to store all localization values 
@alertMessages = []

#array values...
{:index=>"wakeUp", :value=>"Wake Up"}
{:index=>"tokenExpired", :value=>"Token Expired"}
{:index=>"timeZone", :value=>"Time Zone"}
{:index=>"updating", :value=>"Updating"}
{:index=>"loadMore", :value=>"Load More"} 
#....more 
```

在**HTML**页面中，我想获得如下的本地化值或其他类型，

```
<%= @alertMessages['wakeUp'] %> 
```

所以，它会显示值为' **Wake Up** '，

但它不起作用..任何人都可以请...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:38:11.633

为此使用散列（[http://api.rubyonrails.org/classes/Hash.html](http://api.rubyonrails.org/classes/Hash.html)）更容易，它就像一个带有命名索引（或键）的数组。

所以这样做：

```
@alert_messages = {
   wake_up: "Wake Up",
   token_expired: "Token Expired",
   .
   .
   .
} 
```

你也可以通过这种方式扩展你的哈希：

```
@alertMessages[:loadMore] = "Load More" 
```

使用以下方式访问它：

```
@alert_messages[:loadMore] 
```

你也应该检查 i18n 来做国际化，这是一种更健壮和灵活的方式： http: [//guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:43:29.283

```
# Hash to store values
@alertMessages = {}

#hashvalues...
alertMessages[:wakeUp] = "Wake Up"
alertMessages[:tokenExpired] = "Token Expired"
alertMessages[:timeZone] = "Time Zone"
alertMessages[:updating] = "Updating"
alertMessages[:loadMore] = "Load More"

#....more
In HTML pages i want to get localization values like below or some other type,

<%= @alertMessages[:wakeUp] %>
so, it will display value is 'Wake Up', 
```

并尝试使用 always 符号，因为[查找会很快](http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:36:20.123

数组在这里似乎不太合适，但如果您仍想使用它，请按以下方式进行：

```
array.find{|el| el[:index] == "wakeUp"}[:value] 
```

你应该抽象这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:40:59.100

尝试这个：

```
<% 
    @alertMessages.each_with_index do |alertMessage, index|
    alertMessage[:value] if index == "wakeUp"
    end 
%> 
```

谢谢。

# svg - 如何在 D3 轴刻度中获取数值而不是对数值？

> ID：16211095
> 
> 赞同：10
> 
> 时间：2013-04-25T09:26:30.730
> 
> 标签：svg, angularjs, d3.js, nvd3.js

我尝试了以下代码，

```
d3.scale.log().domain([1,4]).range([h, 0]); 
```

在轴上，我在轴值中得到的值为**1e+0, 2e+0, 3e+0, 4e+0**。但我需要对数值，例如 10、100、1000、10000 ..等等。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T11:11:05.313

将`log.scale`'s`tickFormat`与轴`tickFormat`函数结合使用。

例如。设置 1 -> 10000 对数刻度：

```
var s = d3.scale.log().domain([1, 10000]).range([1000, 0]) 
```

然后，设置轴：

```
var axis = d3.svg.axis().scale(s).tickFormat(function (d) {
        return s.tickFormat(4,d3.format(",d"))(d)
}) 
```

例子

[http://jsfiddle.net/2hvxc/](http://jsfiddle.net/2hvxc/)

我们想要 4 个刻度 - 每个 10 的幂一个 - 并用逗号格式化为数字。

在此处了解有关格式化的更多信息：
[https ://github.com/mbostock/d3/wiki/Formatting](https://github.com/mbostock/d3/wiki/Formatting)

在此处了解有关对数刻度的更多信息：
[https ://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-log](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-log)

和轴：
[https ://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickSize](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickSize)

# java - Axis2 2-way ssl 握手 URL 过滤器

> ID：16211096
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:31.973
> 
> 标签：java, web-services, websphere, axis2

这是我的设置

```
 Axis 2

    Java 6

    Websphere 7 
```

在 Websphere 7 中有很多问题使轴 2 工作现在我需要实现两种方式 SSL 握手似乎我需要为 apache httpclient 实现我自己的 SSLProtocol 工厂。

但这里的问题是。我只需要对部署在其中的服务进行 ssl 证书检查。总共有两种服务。我只需要对一项服务进行 SSL 检查。

```
 Is there some url filter I can implement so That I can make sure the ssl 
    works for only the service I intend to not for the whole Project 
```

有谁能够帮我。几周来一直在为这个问题苦苦挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:59:44.877

您可能必须编写自己的 SSL 套接字工厂来实现所需的过滤。作为起点，Axis2 包括两个禁用证书检查的 SSL 套接字工厂实现。[这个](http://www.jarvana.com/jarvana/view/com/ning/metrics.collector/1.0.1/metrics.collector-1.0.1-jar-with-dependencies-sources.jar!/org/apache/axis/components/net/SunFakeTrustSocketFactory.java?format=ok)是针对 Sun java 的，而[这个](http://www.jarvana.com/jarvana/view/axis/axis/1.2/axis-1.2-sources.jar!/org/apache/axis/components/net/IBMFakeTrustSocketFactory.java?format=ok)是针对 IBM 的 JDK 的。[这个问题](https://stackoverflow.com/questions/10913185/ignore-certification-authentication-on-axis-client-for-wcf-service)有一个将 Axis2 设置为使用自定义 SSL 套接字工厂的示例。

# php - 过滤 src attribute

> ID：16211100
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:44.963
> 
> 标签：php, iframe, html-entities

I have a website that allows the user to embed their videos using `<iframe>` tags such as .

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/se2P7hjPanE" frameborder="0" allowfullscreen></iframe> 
```

However, this is not a good idea since they can also input a website on src attribute and not a video. such as `<iframe src="http://www.google.com"/>`

Is there anyway to handle this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:29:00.563

解析提交的 URL 并通过白名单过滤它们。任何不在列表中的都将被丢弃或放入队列等待管理员批准。

# jquery - 在 Hover jQuery Cycle 上启动脚本

> ID：16211102
> 
> 赞同：0
> 
> 时间：2013-04-25T09:26:51.823
> 
> 标签：jquery, jquery-hover

我已经在我的实践网页设计中完成了 jQuery 循环。我的问题是，我希望脚本在鼠标悬停时启动，但是当我刷新页面时，它已经启动了。在我的第一个鼠标悬停时，它停止了。然后第二个鼠标悬停，它开始播放幻灯片并在鼠标移出时停止。这是代码：

```
jQuery(function($){

    // Cycle plugin
    $('.slides').cycle();

    // Pause & play on hover
    $('.slideshow-block').hover(function(){
        $(this).find('.slides').addClass('active').cycle('resume');
    }, function(){
        $(this).find('.slides').removeClass('active').cycle('pause');
    });

}); 
```

我尝试输入“暂停”或“暂停”，`$('.slides').cycle();`但它实际上破坏了插件并且没有更多效果。谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:48:04.963

您可以使用`.mouseover`、`.mouseout`或`.mouseenter`来`.mouseleave`更好地控制鼠标操作。

例子：

```
$(".slideshow-block").mouseover(function() {
  $(this).find(".slides").addClass('active').cycle('resume');
}).mouseout(function(){
  $(this).find(".slides").removeClass('active').cycle('pause');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:52:39.333

我已经找到了答案，我只是这样做了：

```
$('.slides').cycle().cycle('pause'); 
```

# sql-server-2008 - 如何在sql server的另一个存储过程中执行存储过程

> ID：16211107
> 
> 赞同：11
> 
> 时间：2013-04-25T09:27:04.307
> 
> 标签：sql-server-2008

我正在使用 sql server 2008。

而且我有一个存储过程，我正在其中执行另一个usp。

在这里，我想获取第二个 usp 的输出并相应地返回主要的 usp 输出参数。

但是我的主 usp 总是返回带有主 usp 值的第二个 usp 值。

但我只想返回主要的 usp 值。

以下是我的程序：

```
ALTER Proc [dbo].[usp_ChangeStatus](@id int,@Status int,@Name varchar(300),@Success int output  )
as
set @Success=0
begin try   

if exists(Select * from tbl_abc where id= @id)
Begin               

    if(@Status =1)
    begin
        ----Try-Catch block----
        begin try               
            declare @AddHostStatus as int
            set @AddHostStatus=0                
                            exec @AddHostStatus =usp_xyz @Name,0,@Address       
            if(@AddHostStatus=-3)               
            begin
            set @Success=1
            end             
        end try
        begin catch
            set @Success=0
        end catch
        ----End-Try-Catch block----     
    end     
    if(@Success=1)
    begin               
    --do something here         
    end                 
 End 
        end try 
        begin catch 
    set @Success=0  
     end catch
        select  @Success 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T11:06:30.790

尝试这个

假设你有一个这样的存储过程

**第一个存储过程：**

```
Create  PROCEDURE LoginId
     @UserName nvarchar(200),
     @Password nvarchar(200)
AS
BEGIN
    DECLARE  @loginID  int

    SELECT @loginID = LoginId 
    FROM UserLogin 
    WHERE UserName = @UserName AND Password = @Password

    return @loginID
END 
```

现在你想从另一个存储过程中调用这个过程，如下所示

**第二个存储过程**

```
Create  PROCEDURE Emprecord
         @UserName nvarchar(200),
         @Password nvarchar(200),
         @Email nvarchar(200),
         @IsAdmin bit,
         @EmpName nvarchar(200),
         @EmpLastName nvarchar(200),
         @EmpAddress nvarchar(200),
         @EmpContactNo nvarchar(150),
         @EmpCompanyName nvarchar(200)

    AS
    BEGIN
        INSERT INTO UserLogin VALUES(@UserName,@Password,@Email,@IsAdmin)

        DECLARE @EmpLoginid int

        exec @EmpLoginid= LoginId @UserName,@Password

        INSERT INTO tblEmployee VALUES(@EmpName,@EmpLastName,@EmpAddress,@EmpContactNo,@EmpCompanyName,@EmpLoginid)
    END 
```

正如您在上面看到的，我们可以从另一个存储过程中调用一个存储过程

# r - 字符串，R中数据框中一行中的列表对

> ID：16211109
> 
> 赞同：2
> 
> 时间：2013-04-25T09:27:06.433
> 
> 标签：r, list, map, dataframe

我有一个数据框如下：

```
date = "2000"
values = c("a","b","d")
df <- data.frame(date=date,values= values)
df
  date values
1 2000      a
2 2000      b
3 2000      d 
```

`values`实际上我在字段中有数千个值。因此，我不想作为单独的行打印，而是让一个数据框包含一行包含所有信息。即，类似于：

```
1 2000    a,b,d 
```

这在 R 中是否可能，就像`map<String,arrayList(String)>`在 java 中一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T09:34:53.460

目前尚不清楚您想要什么，但这里有一些代码`aggregate`可以帮助您入门：

```
> df$values <- as.character(df$values)
> # A `list` of the values
> (da1 <- aggregate(values ~ date, df, I, simplify=FALSE))
  date  values
1 2000 a, b, d
> str(da1)
'data.frame':   1 obs. of  2 variables:
 $ date  : Factor w/ 1 level "2000": 1
 $ values:List of 1
  ..$ 0:Class 'AsIs'  chr [1:3] "a" "b" "d"

> # All the values collapsed into one string
> (da2 <- aggregate(values ~ date, df, paste, collapse = ", ", simplify=FALSE))
  date  values
1 2000 a, b, d
> str(da2)
'data.frame':   1 obs. of  2 variables:
 $ date  : Factor w/ 1 level "2000": 1
 $ values:List of 1
  ..$ 0: chr "a, b, d" 
```

我已经展示了`str`结构，因此您可以在这里看到两个示例之间的区别。

* * *

如果我正确理解您在下面的评论，您可能也对此感兴趣：

```
> date = "2000"
> values = c("a", "b", "d")
> (temp <- data.frame(date, values = I(list(values))))
  date  values
1 2000 a, b, d
> str(temp)
'data.frame':   1 obs. of  2 variables:
 $ date  : Factor w/ 1 level "2000": 1
 $ values:List of 1
  ..$ : chr  "a" "b" "d"
  ..- attr(*, "class")= chr "AsIs" 
```

换句话说，如果您想`list`在创建 a 时将 a 作为列项，则`data.frame`必须使用该`I`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T09:34:00.350

像这样的东西？

```
df <- structure(list(date = c(2000L, 2000L, 2000L), values = structure(1:3, .Label = c("a", 
"b", "d"), class = "factor")), .Names = c("date", "values"), class = "data.frame", row.names = c(NA, 
-3L)) 
```

这为您提供了您建议的输出以在一行中获取所有信息，但所有值都在一个单元格中：

```
library(plyr)

df2 <- ddply(df,.(date),summarize,values=as.list(paste(values,collapse=","))) 
```

您还可以将数据转换为宽格式，因此每个值都是一个新变量：

```
library(reshape2)

df$id <- seq_along(df)
dfwide <- reshape(df, idvar = c("date"),timevar = "id", direction = "wide") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:36:38.893

这将为您提供每年的值列表：

```
tapply(df$values,df$date,I) 
```

那是你要的吗？

# xml - Magento XML configuration

> ID：16211111
> 
> 赞同：0
> 
> 时间：2013-04-25T09:27:08.450
> 
> 标签：xml, magento

I have follow instruction as per magento U, configuration XML. but XML configuration is not working from my side.

Here is code which i have done.

**app/etc/First_Module.xml**

```
<?xml version="1.0"?>

    <config>
        <modules>
            <First_Module>
                <active>true</active>
                <codePool>local</codePool>
            </First_Module>
        </modules>
    </config> 
```

in local codePool

**First/Module/etc/config.xml**

```
<?xml version="1.0"?>
<config>
    <default>
        <some>
            <ranadom>
                <xpath>Here is value</xpath>
            </ranadom>
        </some>
    </default>
</config> 
```

Now, I want to call xpath value in cmsController indexAction()

For that I have put code in **cms/contollers/indexAction()**

```
 echo "test";
 echo Mage::getStoreConfig('some/random/xpath');
 die; 
```

With help of echo Mage::getStoreConfig('some/random/xpath'); i am call value of xpath Tag.

when my cms indexAction() will call at that time. I can see Here is value.

Can any one tell where i am wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:49:25.140

*   您的`config.xml`代码只是保存`some/ranadom/path`xpath 的默认值，而不是在数据库中插入该值。`core_config_data`如果您有带有 path 的行，请检查您的数据库表`some/ranadom/path`。如果没有，请创建一个`system.xml`文件并将`some/ranadom/path`xpath 的声明放在那里，它将插入到您的`core_config_data`表中。

*   将您的模块声明放入您的`config.xml`文件中。

*   你得到的价值`Mage::getStoreConfig('some/RANDOM/xpath');`，而在你`config.xml`的`RANADOM`

*   您是否清除了缓存以反映这些更改？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:51:47.137

在您的 config.xml 中，您有一个错字。你写`<ranadom>`而不是`<random>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:56:30.867

转到系统-> 缓存管理并检查所有项目并禁用它们。然后，您无需每次都刷新缓存，只需刷新网页即可动态获取输出。

# javascript - Does element.childNodes[] behave as a link list in javascript?

> ID：16211115
> 
> 赞同：0
> 
> 时间：2013-04-25T09:27:24.763
> 
> 标签：javascript, arrays, linked-list

I have an element object and it has some children appended to it via the `appendChild(Node)` method,I know I can access them with `element.childNodes[index]`.

Now if I remove some element from it by selecting them by their id will the element at index `i+1` be at index `i` if I removed the one at index `i`?

Secondly is there a way to remove the object from the array only by specifying the indices via some built in method to achieve a linked list like behaviour(i mean without having to copy the elements from their index to a prior index when i remove one that was prior to them)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:10:14.403

1) 是的

2）尝试[`Array.splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)：

```
> a = [0,1,2,3,4,5]
[0, 1, 2, 3, 4, 5]
> a.splice(3, 1)
[3]
> a
[0, 1, 2, 4, 5] 
```

不知道是否`Arrays`或`NodeLists`用链表或其他东西实现。取决于我猜的引擎。

# ipad - iPad 的 Web 开发 - 你需要 Mac

> ID：16211118
> 
> 赞同：0
> 
> 时间：2013-04-25T09:27:30.937
> 
> 标签：ipad, web-applications, web

我有一个项目即将推出，专注于使大量遗留代码（经典 asp 和 .NET webforms）与 iPad 兼容，我想知道我是否需要在 Mac 上执行此操作，因为我无法充分利用Windows 机器上的最新 Safari 浏览器。有问题的代码可以在 Chrome、Firefox 和 IE (6-10) 中运行，因此不需要太多的调整就可以在 iPad 上运行。

仅供参考，我可以使用 iPad 进行测试。我也在网上做了一些研究，根据我的经验，我认为你可以开发成网络标准，它应该可以在 iPad 上正常工作。

基本上，我想知道是否值得我让 Mac 来执行此操作，或者我的预感是否会有点腰围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:40:06.437

您几乎需要使用 Xcode 来构建应用程序，这是一个仅限 Mac 的软件。所以是的，你需要一个mac。

# c# - Windows Azure 云服务 - 拒绝访问已部署的 xml 文件

> ID：16211119
> 
> 赞同：1
> 
> 时间：2013-04-25T09:27:31.010
> 
> 标签：c#, .net, azure, azure-web-roles, access-denied

我有一个 MVC 应用程序，它在本地运行良好，它在 azure 网站上运行良好。但是，当部署为云服务时，访问某些 xml 文件时出现访问被拒绝的问题。

这些 xml 文件只是应用程序所需的一些数据，有助于确定应用程序中的某些设置。

在分层文件夹结构下有大量这些，因为想法是处理每个这些以允许在应用程序中继承我需要的这些设置。但无论如何，这在很大程度上是无关紧要的，因为归根结底，这些只是存储在 Web 根目录下的文件夹中的 xml 文件。

xml 文件的构建操作属性设置为内容，以便它们可以通过发布进行部署。事实上，我已经在云服务 VM 上进行了 RDP，只是为了检查 xml 文件是否已部署并可以确认它们是否已部署。

但是，每当应用程序尝试读取其中一个文件时，我都会收到以下拒绝访问错误。

拒绝访问路径“E:\sitesroot\0\Templates\Applications\ControlProperties.xml”。

（注意：这不是下面的答案所假设的硬编码路径，我使用 HttpContext.Current.Server.MapPath 来确定文件相对于 Web 根目录的物理路径）

这只是标准访问被拒绝错误，表明应用程序无权读取文件。

现在，如果我再次 RDP 到机器并授予每个人对此特定文件的完全访问权限（仅用于诊断目的！），那么应用程序可以正常工作而不会引发错误。所以这证明它确实是一个访问问题。

问题是，这些只是随项目部署的简单 xml 文件，我真的不想在每次部署时都设置文件权限。这是错误的。

因此，我试图了解为什么作为标准部署的一部分，云服务将无权读取这些已部署的 xml 文件，然后对适当的解决方案感兴趣。即，一些权限设置可能与解决方案一起部署，或者可能有更好的替代方法来解决这个问题。

就我用来读取 xml 文件的代码而言，我只是使用 XmlSerializer 将文件的内容反序列化回一个对象。（如下）

```
 public static T Deserialise(string settingsFile)
    {
        using (var fs = new FileStream(settingsFile, FileMode.Open))
        {
            var sr = new XmlSerializer(typeof (T));
            var obj = (T) sr.Deserialize(fs);
            fs.Close();
            return obj;
        }
    } 
```

我知道有用于 Web 角色的本地存储，如果我希望能够在我的应用程序中读取和写入存储，那么我可以使用它。但本质上，这些是需要与应用程序一起部署的配置设置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T07:16:12.427

最后问题出在文件访问方法上。我最初使用 Filestream 来打开文件的内容，即使在提升的角色权限下运行时，我也会收到此访问被拒绝错误。

但是，首先将代码更改为将文件内容读入字符串，我能够避免此错误。

```
 public static T Deserialise(string settingsFile)
    {
        var fileContents = File.ReadAllText(settingsFile);
        using (var fs = new MemoryStream(Encoding.ASCII.GetBytes(fileContents)))
        {
            var sr = new XmlSerializer(typeof (T));
            var obj = (T) sr.Deserialize(fs);
            fs.Close();
            return obj;
        }
    } 
```

不确定为什么 Filestream 方法需要这些额外的权限，但上述解决方案在这种情况下适用于我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:59:21.910

项目本身，您可以在 web.config 而不是`E:\sitesroot\0\Templates\Applications\ControlProperties.xml`. 因此，当您托管到云服务时，将自动避免访问权限问题。

我已经完成了如下操作，

**在 web.config 中：**

```
<configuration>
        <appSettings>
             <add key="DocsPath" value="http://somesitename.cloudapp.net/Files/"/>
        </appSettings>
  <connectionStrings> 
```

**在后面的代码中：**

```
string Location = ConfigurationManager.AppSettings["DocsPath"] + "ChildFolderName" + "\\" + Filename.XML; 
```

在 Cloud URL 中，这不会给出任何访问权限错误。通过这种 web.config 方式，您也可以进行调试。只需要像上面提到的那样指向路径`web.config`。在 web.config 中也更改连接字符串和其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T17:06:02.063

不同之处在于文件访问方法。事实证明，您无法在 Azure Web/Worker 角色中打开文件进行写入。即使您只是从文件中读取文件 File.Open 也会以读/写访问权限打开它们。所以这也应该有效：

```
using (var stream = File.Open(settingsFile, FileMode.Open, FileAccess.Read))
{
...
} 
```

我想这背后的全部原因是，如果出现某些问题，Azure 会使用最初上传的包自动重新部署您的角色。在这种情况下，之前对文件所做的任何修改都将丢失并替换为包中的原始文件。

# validation - PrimeFaces - Don't close dialog when messages appears

> ID：16211120
> 
> 赞同：1
> 
> 时间：2013-04-25T09:27:33.080
> 
> 标签：validation, primefaces

How can I set up a Primefaces Dialog to not hide, when there are "required-messages" open? At this moment, the dialog will closing by clicking on the "Speichern" Button, and when reopened, the messages appears... I would like to let the dialog open, when there are unfilled required fields:

```
<h:panelGrid id="createNewPat" columns="3" cellpadding="1" style="margin:0 auto;">  
    <h:outputText for="versNr" value="Versicherten-Nr.:" />  
    <p:inputMask id="versNr" value="#{patientenBean.versNr}" required="true"/>  
    <p:message for="versNr" />
    <p:commandButton id="saveBtn" value="Speichern" 
         action="#{patientenBean.createPatient}" 
         oncomplete="if (!args.messageOccured) createNewPat.hide();" 
         update="patForm" />
    <p:commandButton id="resetBtn" value="Reset" type="reset" /> 
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T07:41:31.383

昨天解决了这个问题（经过 3 小时的谷歌搜索和测试），如下所示：

```
<p:dialog header="Patient erfassen" widgetVar="createNewPat" 
        resizable="true" id="createPatDlg" >  
        <h:form id="dlgErf">

            <h:panelGrid id="createNewPat" columns="3" cellpadding="1" 
                style="margin:0 auto;">  

                <h:outputText for="versNr" value="Versicherten-Nr.:" />  
                <p:inputMask id="versNr" value="#{patientenBean.versNr}"
                  required="true" >
                    <!--    <f:validateLength minimum="2" /> -->
                </p:inputMask>
                <p:message for="versNr" /> 
```

这里是按钮：

```
 <p:commandButton id="saveBtn" value="Speichern" 
   action="#{patientenBean.createPatient}" 
   oncomplete="if (!args.validationFailed){createNewPat.hide()}"
       update="createNewPat"/>

<p:commandButton id="resetBtn" value="Reset" process="@this" update="createNewPat" 
        action="#{patientenBean.reset}">
      <p:resetInput target="createNewPat" />
</p:commandButton> 

  </h:panelGrid> 
```

并且重置按钮现在也可以使用 - Bean 中的方法只是用于将所有属性设置为 NULL：

```
public void reset() {
    logger.info("Reset-Methode: Leeren der Felder!");
    versNr=null;
    name=null;
    vorname=null;
    strasseNr=null;
    plz=null;
    ort=null;
    geschlecht=null;
    geburtsdatum=null;

    versNrEdit=null;
    nameEdit=null;
    vornameEdit=null;
    strasseNrEdit=null;
    plzEdit=null;
    ortEdit=null;
    geschlechtEdit=null;
    geburtsdatumEdit=null;

} 
```

感谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:41:48.160

如果您希望对话框不关闭，您的`commandButton`（或任何更新对话框容器的组件）必须在对话框内更新。不要更新对话框的容器，例如：

```
<p:dialog id="dlg">
    <p:panel id="pntest">
        // content here
        <p:commandButton update=":#{p:component('pntest')}"/>
    </p:panel>
</p:dialog> 
```

如果没有，您必须再次打开对话框`oncomplete`：

```
oncomplete="(args.messageOccured)? createNewPat.show(): createNewPat.hide(); " 
```

# sql - A little help to better understand JOINS

> ID：16211122
> 
> 赞同：0
> 
> 时间：2013-04-25T09:27:38.043
> 
> 标签：sql, sql-server, database, sql-server-2008

I have 3 tables from where I substract data, and to get most of the data I have a query that works pretty good, but I can't get a specific row and that's where I need some help.

Table 1:

```
EquipmentID  | EquipmentName | EquipmentTypeID
15           | Tesla         | 68
16           | Colombus      | 93 
```

Table 2:

```
EquipmentTypeID | DisplayName      | 
68              | Electrical Device|
93              | GPS Device       | 
```

Table 3:

```
EquipmentID  | IPAddress  |
15           | 192.168.1.1|  
16           | 192.168.0.1| 
```

So far the data I get is the following using the folowing SQL Syntax:

```
SELECT DISTINCT t1.IPAddress,
t2.EquipmentID
FROM Table3 t1
JOIN Table1 t2 ON t1.EquipmentID = t2.EquipmentID
WHERE IPAddress LIKE '%192%' 
```

The result I get looks like

```
IPAddress  | EquipmentID |
192.168.1.1| 15          |
192.168.0.1| 16          | 
```

However when I do a JOIN like the followiing then the result is just messed up

```
SELECT DISTINCT t1.IPAddress,
t2.EquipmentID,
t3.EquipmentTypeID,
t4.DisplayName
FROM Table3 t1
JOIN Table1 t2 ON t2.EquipmentID = t1.EquipmentID
JOIN Table2 t3 ON t3.EquipmentTypeID = t1.EquipmentTypeID
JOIN Table2 t4 ON t3.EquipmentTypeID = t1.EquipmentTypeID
WHERE IPAddress LIKE '%192' 
```

But now the result I get is the following:

```
IPAddress  | EquipmentID |EquipmentTypeID| DisplayName     |
192.168.1.1| 15          |68             | ElectricalDevice|
192.168.1.1| 15          |93             | GPS Device      |
192.168.0.1| 16          |68             | ElectricalDevice|
192.168.0.1| 16          |93             | GPS Device      | 
```

Any ideas on how to get the right display name for the corresponding IPAddress and EquipmentID?

If you need more clarification please let me know. Thank you for any help in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:48:47.013

您两次加入 Table2 并且使用了错误的 ID：

我认为你应该`JOIN` **T3**到**T1**然后 JOIN **T1**到**T2**。

**像这样 ：**

```
select * from T3
Join T1 on T3.EquipmentID = T1.EquipmentID
Join T2 on T2.EquipmentTypeID = T1.EquipmentTypeID 
WHERE T3.IPAddress LIKE '%192' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:42:17.707

您两次加入 Table2 并且使用了错误的 ID：

```
JOIN Table2 t3 ON t3.EquipmentTypeID = t1.EquipmentTypeID
JOIN Table2 t4 ON t3.EquipmentTypeID = t1.EquipmentTypeID 
```

试试这种方式：

```
SELECT DISTINCT t3.IPAddress,
t2.EquipmentID,
t3.EquipmentTypeID,
t2.DisplayName
FROM Table3 t3
JOIN Table1 t1 ON t1.EquipmentID = t3.EquipmentID
JOIN Table2 t2 ON t2.EquipmentTypeID = t3.EquipmentTypeID
WHERE IPAddress LIKE '%192' 
```

注意：我更改了连接表的名称，因为它有点令人困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:42:47.027

```
SELECT 
t3.IPAddress,
t3.EquipmentID,
t2.EquipmentTypeID,
t2.DisplayName
FROM Table3 t3
JOIN Table1 t1 ON t3.EquipmentID = t1.EquipmentID
JOIN Table2 t2 ON t2.EquipmentTypeID = t1.EquipmentTypeID
WHERE IPAddress LIKE '%192.%'
GROUP BY
t3.IPAddress,
t3.EquipmentID,
t2.EquipmentTypeID,
t2.DisplayName 
```

# php - jQuery验证表单问题

> ID：16211125
> 
> 赞同：0
> 
> 时间：2013-04-25T09:27:40.697
> 
> 标签：php, jquery, jquery-validate

我使用以下代码来了解我的数据库中是否已经存在某些用户名。我正在使用 jquery 验证器，并以这种方式配置脚本：

```
$(document).ready(function(){

    // Validate
    // http://bassistance.de/jquery-plugins/jquery-plugin-validation/
    // http://docs.jquery.com/Plugins/Validation/
    // http://docs.jquery.com/Plugins/Validation/validate#toptions

        $('#profile').validate({
        rules: {
          name: {
            minlength: 2,
            required: true
          },
          username: {
            minlength: 2,
            required: true,
            remote: "../check-username.php"
          }
        },
            highlight: function(element) {
                $(element).closest('.control-group').removeClass('success').addClass('error');
            },
            success: function(element) {
                element
                .text('OK!').addClass('valid')
                .closest('.control-group').removeClass('error').addClass('success');
            }
      });

}); 
```

其中 check-username.php 定义为：

```
<?php 

require_once('connection.php');

$check = "true"; 
$request = trim(strtolower($_REQUEST['username'])); 

mysql_select_db($dbname, $temp);
  $query_username=sprintf("SELECT * FROM users WHERE username = '$request'");

  $resultUsers = mysql_query($query_username, $temp) or die(mysql_error());

   $usernameFound= mysql_num_rows($resultUsers);

   if ($usernameFound> 0) { 
    $check = "false"; 
} 

header("Content-type: application/json; charset=windows-1251");
$result = $_REQUEST['username'].'('.$check.')';
echo $result;

?> 
```

一切正常，除了识别已经存在的用户名。也许有问题：

```
remote: "../check-username.php" 
```

或在 php 文件本身中。

有人可以帮助我吗？

编辑1：

尝试@MHR 代码我得到这个：

![在此处输入图像描述](https://i.stack.imgur.com/SfXJf.jpg)

在这种情况下，“user1”已经存在于我的数据库中。所以这很好，但我不希望输出写在我的输入下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:43:46.623

[http://docs.jquery.com/Plugins/Validation/Methods/remote](http://docs.jquery.com/Plugins/Validation/Methods/remote)

该文档有一个关于响应必须是什么的闪亮示例，但它暗示了 JSON：

> 响应被评估为 JSON 并且对于有效元素必须为 true，并且对于无效元素可以是任何 false、未定义或 null，使用默认消息；或字符串，例如。“该名称已被占用，请尝试 peter123”以显示为错误消息。有关更多示例，请查看 marketo 演示和牛奶演示。

我的猜测是，如果有效，则应返回“true”，否则应返回“false”；t：

```
$check = true; 
$request = trim(strtolower($_REQUEST['username'])); 
mysql_select_db($dbname, $temp);
  $query_username=sprintf("SELECT * FROM users WHERE username = '$request'");
  $resultUsers = mysql_query($query_username, $temp) or die(mysql_error());
   $usernameFound= mysql_num_rows($resultUsers);
   if ($usernameFound> 0) { 
    $check = false; 
} 
header("Content-type: application/json; charset=windows-1251");
if($check){
  $check = "true";
}else{
  $check = "User: ".$request." already exist, please choose another user name.";
}
$result = "\"".$check."\"";
echo $result; 
```

# bash - how to stop shell script from getting confused by ack PATTERN escapes

> ID：16211126
> 
> 赞同：2
> 
> 时间：2013-04-25T09:27:45.007
> 
> 标签：bash, ack

I am trying to use ack to search (in Haskell files) for +|+

I looked at [ack-grep: chars escaping](https://stackoverflow.com/questions/3074122/ack-grep-chars-escaping) but this doesn't help

On Mac OS X 10.6 I get the following responses:

```
$ ack -Q +|+
-bash: +: command not found
Missing option after +
ack: See ack --help, ack --help-types or ack --man for options

$ ack \+\|\+
Unknown option: |
ack: See ack --help, ack --help-types or ack --man for options

$ ack [+][|][+]
-bash: ][+]: command not found
ack: Invalid regex '[+][':
  Unmatched [ in regex; marked by <-- HERE in m/[+][ <-- HERE /

$ ack \Q+|+\E
-bash: +E: command not found 
```

That's basically all the suggestions in the Q&A listed above

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:35:04.800

这应该按预期工作：

```
$ ack "\+\|\+" 
```

（根据您的评论编辑为正确。未引用的管道是“或”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T17:20:09.680

将`-Q`引用搜索字符串中的所有内容。

```
ack --haskell -Q '+|+' 
```

这比

```
ack --haskell "\+\|\+" 
```

# ruby - 撬开显示 [äöüßÄÖÜß] （utf-8 编码）之类的字符？（可能是特定于 Windows 的问题？）

> ID：16211133
> 
> 赞同：4
> 
> 时间：2013-04-25T09:28:25.250
> 
> 标签：ruby, windows, utf-8, character-encoding, pry

[*我使用这些德语字符的所有脚本本身都是 UTF-8 格式，`#encoding: utf-8`在顶部（而且`Encoding.external_default = 'utf-8'`，我认为这并不是真正相关的，因为脚本中定义的字符串中的德语字符*不会*显示对。）* ]

所有这些东西在 Windows 命令提示符下和使用 irb 等都可以正常显示。

不过，我什至不能在 pry 提示符下*输入*这些字符。试图粘贴`puts "äöüÄÖÜß"`得到`puts "`。尝试实际键入它们会以某种方式*冻结*撬动，我必须 ^D 出来。

使用 pry，我在其中运行了一个脚本`GC = "äöüÄÖÜß"`，这就是我得到的那种 garbledeegook：

```
[1] pry(main)> GC                               
=> "├ñ├Â├╝├ä├û├£├ƒ"                             
[2] pry(main)> GC.split('').each{ |c| puts c }  
├ñ                                              
├Â                                              
├╝                                              
├ä                                              
├û                                              
├£                                              
├ƒ                                              
=> ["├ñ", "├Â", "├╝", "├ä", "├û", "├£", "├ƒ"]
[3] pry(main)> File.open("output.txt", 'w'){|f| GC.split('').each{ |c| f.puts c } } 
```

`output.txt`然而，最后一行创建的测试文件*是*utf-8 格式，内容如下：

```
ä
ö
ü
Ä
Ö
Ü
ß 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T19:14:59.040

我知道如果您在支持下安装`Ruby`，`readline`那么您就不会有这个问题。为此，如果您正在使用`rbenv`（使用 ruby​​-build），您将需要这样的东西：

```
RUBY_CONFIGURE_OPTS="--with-readline-dir=`brew --prefix readline`" rbenv install 1.9.3 
```

我不知道是否还有其他解决方案。

# tomcat - 如何在 cPanel 服务器上安装 tomcat 和 javabridge

> ID：16211137
> 
> 赞同：1
> 
> 时间：2013-04-25T09:28:52.690
> 
> 标签：tomcat, cpanel, php-java-bridge

是否有人在 cPanel 服务器上安装了 tomcat 和 javabridge。如果是这样，请指导我我正在努力进行一些设置

皮肤

# java - 可直接访问的数据结构 Java

> ID：16211139
> 
> 赞同：43
> 
> 时间：2013-04-25T09:28:56.710
> 
> 标签：java, data-structures, concurrency

我有以下情况：

1.  一个只能扩展的数据结构（我只在尾部添加东西）
2.  我需要能够跟踪我已经看到的元素（我有一个索引，理想情况下我希望能够从这个特定元素开始再次遍历列表）
3.  我希望读取永远不会阻塞，并且添加新元素只锁定队列的尾部而不是整个队列

这是一个被多个线程大量修改的结构。

最好的数据结构是什么？

**数组列表**。如果能够直接访问使用索引看到的最后一个元素，这将是理想的，但它会导致并发修改异常。我可以使其同步，但希望避免锁定（或除最后一个元素之外的任何锁定，因为它是唯一可能存在并发写入以添加新元素的锁定）

**并发链接队列**。这将解决我的并发问题，但问题是我必须存储迭代的当前位置而不是整数索引。这有一个问题，它返回一个弱一致的迭代器，它不能保证返回自创建迭代器以来已添加到列表中的新对象（来源：javadoc）

**以索引为键的**ConcurrentHashMap 。**这样做的好处是我可以直接访问与正确索引相对应的数据，但问题是没有“getNext”运算符可以让我有效地遍历从索引到索引 + 1 等的元素**

 ****向量**这将解决我的大部分问题，即允许不会引发并发修改异常并允许直接访问的东西。但是，鉴于所有方法都是同步的，与数组列表相比，性能较差。鉴于我只想扩展结构，而不是在中间插入记录，我不愿意采用这种重量级的解决方案，其中读取也会受到性能影响（鉴于我的用例，元素的索引从来没有真正改变过，所以不需要同步不是尾部的读取）

**自定义数据结构**：保留我要存储的对象的数组和指向该数组尾部（最后一个元素集）的指针，插入新对象时，锁定尾部和尾部指向的对象。当对象超过其当前大小时，进行锁定调整大小操作。

什么是最好的策略/任何其他更有效的实施？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T09:35:08.813

[CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)结构可以解决您的问题（java.util.concurrent）。

*   `CopyOnWriteArrayList`s 是线程安全的，因为所有可变操作都是通过创建列表的副本来实现的。

*   避免了这个问题，`ConcurrentModificationException`因为数组在迭代时不会改变。所谓`snapshot style iterator`的在迭代器创建时使用对数组状态的引用。

*   如果您的读取次数多于写入次数，请使用`CopyOnWriteArrayList`，否则使用`Vector`。

*   `Vector`为每个操作引入了一个小的同步延迟，当`CopyOnWriteArrayList`写入延迟较长（由于复制）但读取没有延迟时。

*   `Vector`迭代时需要显式同步（因此不能同时执行写操作），`CopyOnWriteArrayList`不需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:40:46.420

这听起来很像您需要一个干扰器，或者简单地说是无锁队列。我希望我可以在这里添加一个示例，但我昨天才开始研究它。我还可以告诉你它是如何工作的，或者你可以在这里阅读更好的解释：

一般的想法是这是完全无锁的，它只使用 CAS 寄存器（在 java AtomicXXX 中）。我只是爱上了这个想法。

[最大](http://blog.codeaholics.org/2011/the-disruptor-lock-free-publishing/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T15:34:37.043

对此进行调查，我得出了与@MissingNumber 相同的解决方案。

使用 ConcurrentHashMap 作为支持数据结构：

*   非阻塞读取
*   线程安全附加

要通过索引添加随机访问，请使用 AtomicInteger 来维护索引并将其作为检索映射值的键。

```
public class ConcurrentListMap {

  private final ConcurrentHashMap<Integer, Object> backingMap;
  private final AtomicInteger index;

  public ConcurrentListMap() {
    backingMap = new ConcurrentHashMap();
    index = new AtomicInteger(0);
  }

  public int append(final Object value) {
    final int newIndex = index.incrementAndGet();
    backingMap.put(newIndex, value);
    return newIndex;
  }

  public Object get(final int entry) {
    return backingMap.get(entry);
  }

  public int getTailIndex() {
    return index.get();
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T09:40:12.343

正如[sk2212](https://stackoverflow.com/questions/16211139/directly-accessible-data-structure-java/16211368#comment23182380_16211139)所说，我认为`java.util.Vector`符合你的三点。

1.  可以使用 方法扩展向量，该方法`add`在列表末尾添加元素。
2.  向量具有`get(index)`在特定索引处检索具体元素的方法。
3.  向量是线程安全的：[java 向量和线程安全](https://stackoverflow.com/questions/1658697/java-vector-and-thread-safety) [http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T11:08:41.037

**以索引为键的ConcurrentHashMap**可以解决您的问题，但您需要做更多的工作才能做到这一点..

就像遵循伪代码一样。

```
Map<Integer , ConfiguredObject > myMap = new ConcurrentHashMap<Integer,ConfiguredObject >();

class ConfiguredObject 
{
   YourObject Object;// the object which you want to map for map[key];
   ConfiguredObject Next;//the object which you want to map for map[key+1];
   ConfiguredObject Previous;//the object which you want to map for map[key-1];
   YourObject NextObject;
   YourObject PrevObject;
} 
```

所以这应该可以解决你所有的问题。

**并发**框架负责。

**索引**键是您的索引。

**迭代** ，如果您有索引，则可以使用此代码

```
myMap.get(key).Next ;
myMap.get(key).Previous ; 
```

您需要做的就是定义可配置对象并相应地编写构造函数。

希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T09:36:45.533

> 数组列表。如果能够直接访问使用索引看到的最后一个元素，这将是理想的，但它会导致并发修改异常。我可以使其同步，但希望避免锁定（或除最后一个元素之外的任何锁定，因为它是唯一可能存在并发写入以添加新元素的锁定）

您可以使用临时列表来放置要添加的对象，当读取的内容解除阻塞时，您可以将 tmpList 的内容添加到 ArrayList。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T14:11:50.037

我将提供 up [`ConcurrentSkipListSet`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)，因为：

1）它是并发的。

2) 它是一个`Set`.

3) 它也是`NavigableSet`，因此也是`SortedSet`。

这为您提供了很大的灵活性，其中大部分您可能不需要。但除了“你不能添加已经存在的项目”（我不知道这是一个问题还是一个恩惠）之外，它似乎满足了你的所有要求。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-01T15:45:32.497

你必须使用单一的数据结构吗？如果您使用两个 - 一个用于列表的“活动”部分，一个用于“您已看到的项目”列表，该怎么办？您可以将 Vector 用于“活动”部分，并使用某种管理器定期将项目移动到“您已经看到的项目”列表中。**

# html - 隐藏元素时的页面大小

> ID：16211144
> 
> 赞同：0
> 
> 时间：2013-04-25T09:29:08.143
> 
> 标签：html, hidden

如果一个元素被隐藏，那么它会在加载时影响页面大小。

例如一个图像是隐藏的。现在当页面加载的时候它会计算那个图像的大小吗？

可以有 50 个隐藏图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:30:59.730

不，如果你用 CSS 隐藏它，HTML 仍然会从服务器请求这些图像，如果你真的希望页面加载速度比你需要注释掉`img`页面上的标签快，这不仅会隐藏图像，而且会'也不要从服务器请求图像，从而导致更快的页面加载。

如果您的网站上有大量小图标，您也可以使用 CSS sprites，如果您正在谈论文字图像，如果您想以更快的页面加载速度渲染图像，则可以查看延迟加载技术

# continuous-integration - Cdash 是一个持续集成系统吗？

> ID：16211147
> 
> 赞同：3
> 
> 时间：2013-04-25T09:29:16.593
> 
> 标签：continuous-integration, cdash

前几天我在一次关于持续集成的对话中提到了[CDash](https://github.com/Kitware/CDash)。一位同事说，CDash 不是 CI 系统，它是一个测试系统。我们没有机会详细说明。

CDash 不是 CI 系统是真的吗？

那么有什么区别呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:22:56.517

根据您对“持续集成系统”的定义，这有点主观。

对我来说，“系统”包括开发人员经常提交和退出工作分支的实践。鉴于该定义，CDash 不是 CI 系统。

但是，Cdash*可以*用作 CI 服务器。换句话说，它可以持续检查对工作分支的提交，并在检测到提交后，运行项目的测试套件。这将构成整个 CI 系统的关键部分。

Cdash 不仅如此 - 它可以接收开发人员临时提交的测试结果，或者它可以运行“夜间”测试，每天在给定时间检查代码库并运行测试套件。

# c# - 星计数器日志源

> ID：16211149
> 
> 赞同：1
> 
> 时间：2013-04-25T09:29:18.127
> 
> 标签：c#, .net, starcounter, database

我正在试用 Starcounter Beta，我想创建 LogSources。

我确实找到了`Starcounter.LogSources`具有 Hosting 类型的属性的类`Starcounter.Logging.LogSource`。

但我不明白如何定义我自己的日志源，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:40:37.450

抱歉，在这种情况下文档还不够；这是我们真正正在努力改进的事情之一。

该类`Starcounter.LogSources`只是我们保存一些知名日志源的一个地方，例如 SQL 和 Hosting（您提到的）。这些通常只由数据库引擎使用。

要使用您自己的源创建并开始记录，很简单：

```
var log = new LogSource("Foo");
log.LogWarning("I've break loose!"); 
```

只要确保你已经引用了`Starcounter.Logging`程序集。

# c# - 如何在 gridview 行中捕获值。MVC

> ID：16211153
> 
> 赞同：0
> 
> 时间：2013-04-25T09:29:39.640
> 
> 标签：c#, asp.net-mvc, gridview

我正在做一个 MVC 项目。如何从 gridview 行中捕获值并将其保存为变量？

我想要做的是，单击行，捕获其值并通过单击按钮将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:40:12.743

你见过[GetStarted吗](http://www.asp.net/mvc)

你可以制作删除按钮RAZOR

```
 @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.ActionLink("Delete", "Delete", new { id=item.ID })
            </td>
        </tr>
    } 
```

ASPX

```
 <% foreach (var item in Model) { %>
        <tr>
            <td>
                <%: Html.DisplayFor(modelItem => item.Title) %>
            </td>
            <td>
                <%: Html.ActionLink("Delete", "Delete", new { id=item.ID }) %>
            </td>
        </tr>
    <% } %> 
```

和你的控制器

```
public ActionResult Delete(FormCollection fcNotUsed, int id = 0)
{
    var item = db.Source.Find(id);
    if (item == null)
    {
        return HttpNotFound();
    }
    db.Source.Remove(item);
    db.SaveChanges();
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:41:32.147

据我了解，您想使用 jQuery 对适当的网格行执行一些操作？

在创建网格行时，您可以为每个网格行分配一些特定属性，如 rowId 等。然后创建将在行单击时调用的函数，获取此 attr 值并从控制器调用（使用或不使用 ajax）函数以删除此行。

?

或者只是在每行旁边创建提交按钮，该按钮将有一个 id 并调用适当的函数。

# android - 根据所选配置文件更改图标操作栏

> ID：16211154
> 
> 赞同：4
> 
> 时间：2013-04-25T09:29:40.253
> 
> 标签：android, icons, android-actionbar, profiles

我正在尝试在我的应用程序中实现 ProfilesActivity。所以，想象一下，我们在 home 活动/布局中：UsersActivity，我们已经完成了 addActions 来初始化操作栏，例如：

```
Intent addProfilesIntent = new Intent(this, ProfilesActivity.class);
    Action profilesAction = (Action) new IntentAction(this, addProfilesIntent,
            R.drawable.go_profiles);
    actionBar.addAction(profilesAction); 
```

我们单击操作栏上的配置文件图标，它会打开一个新布局（profiles_menu.xml），其中我有一个带有可检查项目的 listView 和每个配置文件的图像（不同的配置文件：工作、家庭、辅助......）。

```
ListView list = (ListView) findViewById(R.id.list); 
ArrayList<HashMap<String, Object>> listData=new ArrayList<HashMap<String,Object>>();  
String []name={"    Company number","   Home number","   Handy number","   Auxiliary number"};  
for(int i=0;i<4;i++){  
    HashMap<String, Object> map=new HashMap<String, Object>();  
    map.put("number_image", R.drawable.icon+(i+1));  
    map.put("number_name", name[i]);  
    listData.add(map);  
}  
listItemAdapter = new CheckboxAdapter(this, listData);
list.setAdapter(listItemAdapter);  
list.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

现在，我想做的是：当我们选择一个配置文件时，它必须将主页操作栏上的配置文件图标（代码中的这个 go_profiles ）更改为选定的配置文件图标。你知道怎么做吗？

![在此处输入图像描述](https://i.stack.imgur.com/t4UEJ.jpg)

# c++ - 从二进制文件中读取 ublas 向量或使用 array[] 初始化它

> ID：16211155
> 
> 赞同：0
> 
> 时间：2013-04-25T09:29:45.850
> 
> 标签：c++, boost, ublas

为什么我不能以如下方式从二进制文件中读取 ublas 向量（而不是一次读取一个元素）：

```
boost::numeric::ublas::vector<double> floatVector(10);
myFile.read( (char *)&vector, 10 * sizeof(double)); 
```

有没有办法从数组中初始化 ublas 向量？

```
double d[10]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:18:49.707

你可以使用这样的东西

```
 double array[] = {1., 2., 3.};
   boost::numeric::ublas::vector<double> v(sizeof(array) / sizeof(*array));
   std::copy(array, array + sizeof(array) / sizeof(*array), v.data().begin()); 
```

# regex - How do I mod_rewrite this URL?

> ID：16211156
> 
> 赞同：1
> 
> 时间：2013-04-25T09:29:47.350
> 
> 标签：regex, apache, mod-rewrite, url-rewriting

I have a URL

`www.domain.com/catalog.php?category_title=widgets`

I want to mod_rewrite it to

`www.domain.com/widgets/`

I've tried

```
RewriteEngine On
RewriteRule /([^/.]+)/[?]*[^\/\.]*$ /catalog.php?category_title=$1 
```

So I'm searching for `/([^/.]+)/`

The `[?]*[^\/\.]*` part is so that the page can work with Google Adwords which appends a query string to the flat URL.

This regex worked on a a previous implementation using Zeus's Request Rewrite Module which is their proprietary version of mod_rewrite.

This is my first go at Apache mod_rewrite, and I can't get this to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:41:15.420

尝试使用：

```
RewriteEngine On
RewriteRule ^([^/]*)/$ /catalog.php?category_title=$1 [L] 
```

# perl - perl 中的 PAR 安装无法完成

> ID：16211157
> 
> 赞同：2
> 
> 时间：2013-04-25T09:29:48.583
> 
> 标签：perl, par

我迫切需要你的帮助！我需要将 perl 脚本编译为可执行文件，以便它可以在 windows 中运行而无需安装 perl。我知道这样做不是一个好主意，但我的脚本用户绝对需要它。

我已经搜索（很多！）并决定最好的解决方案是使用 PAR::Packer。然而，我已经尝试安装了 10 天，但没有成功……</p>

我已经尝试了 perl 安装（activestate、strawberry、5.10、5.14、5.16）和 PAR 版本的所有可能组合，但我还没有找到真正有效的组合……。

我试过这个链接：[http ://www.nicholassolutions.com/tutorials/perl-PAR.htm](http://www.nicholassolutions.com/tutorials/perl-PAR.htm)

而这个：[http ://www.rabbibob.com/index.php/PAR_Compiling_Perl_scripts_into_executables#Can.27t_find_par_loader](http://www.rabbibob.com/index.php/PAR_Compiling_Perl_scripts_into_executables#Can.27t_find_par_loader)

和这个网站的各种..

无论如何，现在，我已经安装（使用上述说明）：

*   草莓 perl 5.16.3001
*   PAR-1.007

我现在尝试运行时遇到的错误

```
pp –o script.exe script.pl 
```

就是它：

pp 不是外部或内部命令、可运行程序或批处理文件

确实我在垃圾箱中找不到相关的 pp.bat 。对于 par 的早期版本，创建了这个 bat，尽管在运行 pp... 时出现了其他丢失的文件。

我的路径变量包含：

C:\草莓\c\bin;C:\草莓\perl\site\bin;C:\草莓\perl\bin

我也使用了 PAR::Packer 1.0.14 但安装时出现错误，例如

```
dmake.EXE: Error code 255, while making 'subdirs' 
```

所以，我的问题是：有没有人知道这可以肯定的方式？我真的很沮丧也很压力，每一次帮助都将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T21:05:55.383

我已经使用 PAR 为其他用户打包了一些脚本。这非常有效。

我的旧设置是很久以前完成的。我有一台新笔记本电脑，我试图重现您的错误 - 但它似乎可以正常工作。

我的步骤：

*   下载并安装了草莓-perl-5.18.1.1-64bit.msi
*   使用 cpan 客户端安装 PAR::Packer
*   创建一个测试脚本并输入

    > pp -c -o test.exe test.pl

这会产生文件 test.exe - 它工作正常。

可执行文件*pp*位于*C:\strawberry\perl\site\bin\pp*并在我安装 PAR::Packer 时安装。

如果您在系统上找不到*pp*，您可能需要检查 PAR::Packer 的安装。

我希望这有帮助 ：）

# mysql - 从外键查询主键

> ID：16211160
> 
> 赞同：1
> 
> 时间：2013-04-25T09:30:04.507
> 
> 标签：mysql, sql

我对 MySQL 还很陌生，我正在努力通过表中指定的外键查询或引用主键。有人可以用相当简单的术语解释如何做到这一点，因为考虑到大多数其他人比我拥有更多的 MySQL 知识，我搜索的所有内容都有点难以理解。

让我们假设这些是表格：

```
CREATE TABLE IF NOT EXISTS customer(
    custID int AUTO_INCREMENT,
    custLname varchar(30),
    custAdd varchar(100),
    custSuburb varchar(30),
    custPcode varchar(4),
    custState varChar(20),
    custPhone varchar(10),
    PRIMARY KEY (custID)
)ENGINE = INNODB;

CREATE TABLE IF NOT EXISTS tour(
    DailyTourID int,
    tourDate DATE,
    tourTime TIME,
    tourName varchar(30),
    tourDriverID int,
    tourBusID varchar(2),
    PRIMARY KEY (DailyTourID, tourDate),
) ENGINE = INNODB;

CREATE TABLE IF NOT EXISTS TourCustLink(
    TourCustLinkID int AUTO_INCREMENT,
    TourID int,
    TourDate DATE,
    customerID int,
    PRIMARY KEY (TourCustLinkID),
    FOREIGN KEY (TourID, TourDate) REFERENCES tour(DailyTourID, tourDate),
    FOREIGN KEY (customerID) REFERENCES customer(custID)
) ENGINE = INNODB; 
```

我知道这是一个非常糟糕的示例，但假设我想为每个客户显示 custLname、custAdd、custPhone 和 tourDates。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:32:23.470

[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)他们：

```
SELECT 
  c.custLname,
  c.custAdd,
  c.custPhone,
  t.TourDate,
  t.TourName,
  ...
FROM TourCustLink   AS tl 
INNER JOIN Customer AS c  ON tl.customerId = c.custID
INNER JOIN Tour     AS t  ON tl.tourID     = t.DailyTourID 
                         AND tl.tourDate   = t.tourDate; 
```

如果您想包含那些不匹配的行，您可能还需要使用`OUTER JOIN`s (`LEFT JOIN`或`RIGHT JOIN`) 而不是。`INNER JOIN`

有关`JOIN`类型的更多信息，请参阅本文：

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - Trying to use two inside a , which are supposed to run a script. [Not sure if it's possible] 问问题 问问题 2013-04-25T09:30:13.427 437 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Not sure if what i am trying to do is going to work, but i want to insert inside a li two div that will run some script for some links that are inside them. A bit confusing, i know, i cant explain it in a better way. Take a look at my code: Inside the body of HTML <ul> <li> TEST </li> <li> TEST 2 <ul> <li> <div id="dock2" class="dock"> <div class="dock-container2" style="left: 760px; width: 400px;"> <ul> <li><a class="dock-item2" href="#" style="width: 40px; left: 0px;"><span style="display: none;">Home</span><img alt="home" src="Inc/Images/dock/home.png"/></a> </li> <li><a class="dock-item2" href="#" style="width: 40px; left: 40px;"><span style="display: none;">Contact</span><img alt="contact" src="Inc/Images/dock/email.png"/></a></li> <li><a class="dock-item2" href="#" style="width: 40px; left: 80px;"><span style="display: none;">Portfolio</span><img alt="portfolio" src="Inc/Images/dock/portfolio.png"/></a></li> <li><a class="dock-item2" href="#" style="width: 40px; left: 120px;"><span style="display: none;">Music</span><img alt="music" src="Inc/Images/dock/music.png"/></a></li> <li><a class="dock-item2" href="#" style="width: 40px; left: 160px;"><span style="display: none;">Video</span><img alt="video" src="Inc/Images/dock/video.png"/></a></li> </ul> </div> </div> </li> </ul> </li> <li> TEST 3 </li> </ul> The script that is running inside the div, also in the body of HTML <script type="text/javascript"> $(document).ready(function(){ $('#dock2').Fisheye({ maxWidth: 60, items: 'a', itemsText: 'span', container: '.dock-container2', itemWidth: 40, proximity: 80, alignment : 'left', valign: 'bottom', halign : 'center' } ) } ); </script> And finally the CSS .dock { position: relative; height: 50px; text-align: center; } .dock-container { position: absolute; height: 50px; background:url(Inc/Images/dock/dock-bg2.gif); padding-left: 20px; } a.dock-item { display: block; width: 40px; color: #000; position: absolute; top: 0px; text-align: center; text-decoration: none; font: bold 12px Arial, Helvetica, sans-serif; } .dock-item img { border: none; margin: 5px 10px 0px; width: 100%; } .dock-item span { display: none; padding-left: 20px; } /* dock2 - bottom */ #dock2 { width: 100%; bottom: 0px; position: absolute; left: 0px; } .dock-container2 { position: absolute; height: 50px; background:url(Inc/Images/dock/dock-bg.gif); padding-left: 20px; } a.dock-item2 { display: block; font: bold 12px Arial, Helvetica, sans-serif; width: 40px; color: #000; bottom: 0px; position: absolute; text-align: center; text-decoration: none; } .dock-item2 span { display: none; padding-left: 20px; } .dock-item2 img { border: none; margin: 5px 10px 0px; width: 100%; } So what i am actually trying to do, is put inside a list a dock that acts like OS X, moving the mouse over the icons making them to zoom, though with the above code the zoom doesn't work. If i move the part of the dock outside the list and put it somewhere in the body, everything works as it should, but inside the list no animation. I am not sure at all if this is possible, having an animation running inside a li, any help is really appreciated. P.S I also have an another CSS that is about the li style, but i thing its irrelevant to the question so i didn't include it. Edit: Added it on jsfiddle. Link: http://jsfiddle.net/UTw84/3/ The dock i am trying to make is this one: http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html Note: on jsfiddle it doesn't show the icons, probably because there is no path for them. Edit 2: The problem was/is with CSS. i made some changes and its working better now. http://jsfiddle.net/UTw84/7/ javascriptjqueryhtmlcss 4 1 回答 1 This answer is useful 1 http://jsfiddle.net/UTw84/4/ 这是你想要的吗 ？ 我刚刚在您的 CSS 选择器中添加了一些内容： #main-list ul li > ul { display: none; position: absolute; text-align: center; } 最后一个 CSS 选择器覆盖了 :hover 选择器。 编辑 ： 我懂了。 http://jsfiddle.net/UTw84/5/ 它在这里工作，但是当你想把一个“左”属性放到主坞时，它会破坏一切。 于 2013-04-25T10:41:24.403 回答 Related 1 syntax - Lazarus Pascal 程序“单位”的语法规则 0 c# - ModalPopup 扩展器内的中继器 1 angularjs - 从角度获取可编辑的数据行并将其发送到WEB api 2 c++ - c++: 公私错误 1 algorithm - 最大化矩阵中的特殊元素 1 facebook - 将 Facebook 登录与原生登录系统集成 1 ruby-on-rails - 这是与工厂女孩实现belongs_to关系的正确方法吗？ 2 csv - VBScript - 在 .csv 中的逗号之间查找特定术语并根据找到的值附加列 1 php - PHP 包括仅用于管理员的文件 2 php - 计算字符串长度并根据字符数收费的 PHP 函数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16211161
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery, html, css

Not sure if what i am trying to do is going to work, but i want to insert inside a li two div that will run some script for some links that are inside them. A bit confusing, i know, i cant explain it in a better way.

Take a look at my code:

***Inside the body of HTML***

```
<ul>

   <li> TEST </li>
   <li> TEST 2
     <ul>
       <li>  
           <div id="dock2" class="dock">
             <div class="dock-container2" style="left: 760px; width: 400px;">
                <ul>
                  <li><a class="dock-item2" href="#" style="width: 40px; left: 0px;"><span style="display: none;">Home</span><img alt="home" src="Inc/Images/dock/home.png"/></a> </li>
                  <li><a class="dock-item2" href="#" style="width: 40px; left: 40px;"><span style="display: none;">Contact</span><img alt="contact" src="Inc/Images/dock/email.png"/></a></li>
                  <li><a class="dock-item2" href="#" style="width: 40px; left: 80px;"><span style="display: none;">Portfolio</span><img alt="portfolio" src="Inc/Images/dock/portfolio.png"/></a></li>
                  <li><a class="dock-item2" href="#" style="width: 40px; left: 120px;"><span style="display: none;">Music</span><img alt="music" src="Inc/Images/dock/music.png"/></a></li>
                  <li><a class="dock-item2" href="#" style="width: 40px; left: 160px;"><span style="display: none;">Video</span><img alt="video" src="Inc/Images/dock/video.png"/></a></li>
                </ul>
             </div>
          </div>
       </li>
     </ul>
   </li>
       <li> TEST 3 </li>
</ul> 
```

***The script that is running inside the div, also in the body of HTML***

```
<script type="text/javascript">
   $(document).ready(function(){
        $('#dock2').Fisheye({
   maxWidth: 60,
   items: 'a',
   itemsText: 'span',
   container: '.dock-container2',
   itemWidth: 40,
   proximity: 80,
   alignment : 'left',
   valign: 'bottom',
   halign : 'center'
   }
   )
   }
   );
</script> 
```

***And finally the CSS***

```
.dock {

    position: relative; 

    height: 50px; 

    text-align: center;

}

.dock-container {

    position: absolute;

    height: 50px;

    background:url(Inc/Images/dock/dock-bg2.gif);

    padding-left: 20px;

}

a.dock-item {

    display: block;

    width: 40px;

    color: #000;

    position: absolute;

    top: 0px;

    text-align: center;

    text-decoration: none;

    font: bold 12px Arial, Helvetica, sans-serif;

}

.dock-item img {

    border: none; 

    margin: 5px 10px 0px; 

    width: 100%; 

}

.dock-item span {

    display: none; 

    padding-left: 20px;

}

/* dock2 - bottom */

#dock2 {

    width: 100%;

    bottom: 0px;

    position: absolute;

    left: 0px;

}

.dock-container2 {

    position: absolute;

    height: 50px;

    background:url(Inc/Images/dock/dock-bg.gif);

    padding-left: 20px;

}

a.dock-item2 {

    display: block; 

    font: bold 12px Arial, Helvetica, sans-serif;

    width: 40px; 

    color: #000; 

    bottom: 0px; 

    position: absolute;

    text-align: center;

    text-decoration: none;

}

.dock-item2 span {

    display: none;

    padding-left: 20px;

}

.dock-item2 img {

    border: none; 

    margin: 5px 10px 0px; 

    width: 100%; 

} 
```

So what i am actually trying to do, is put inside a list a dock that acts like OS X, moving the mouse over the icons making them to zoom, though with the above code the zoom doesn't work.

If i move the part of the dock outside the list and put it somewhere in the body, everything works as it should, but inside the list no animation.

I am not sure at all if this is possible, having an animation running inside a li, any help is really appreciated.

P.S I also have an another CSS that is about the li style, but i thing its irrelevant to the question so i didn't include it.

Edit: Added it on **jsfiddle**. Link: **[http://jsfiddle.net/UTw84/3/](http://jsfiddle.net/UTw84/3/)**

The dock i am trying to make is this one: **[http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html](http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html)**

**Note:** on jsfiddle it doesn't show the icons, probably because there is no path for them.

**Edit 2:** The problem was/is with CSS. i made some changes and its working better now. [http://jsfiddle.net/UTw84/7/](http://jsfiddle.net/UTw84/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:41:24.403

[http://jsfiddle.net/UTw84/4/](http://jsfiddle.net/UTw84/4/)

这是你想要的吗 ？

我刚刚在您的 CSS 选择器中添加了一些内容：

```
#main-list ul li > ul {
    display: none;
    position: absolute;
    text-align: center;
} 
```

最后一个 CSS 选择器覆盖了 :hover 选择器。

编辑 ：

我懂了。

[http://jsfiddle.net/UTw84/5/](http://jsfiddle.net/UTw84/5/)

它在这里工作，但是当你想把一个“左”属性放到主坞时，它会破坏一切。

# sql - 开始 SQL 如何对同一行中的列进行求和和选择？

> ID：16211166
> 
> 赞同：1
> 
> 时间：2013-04-25T09:30:25.157
> 
> 标签：sql

我今天刚开始在 w3schools.com 上学习 SQL，并希望确保我走在正确的轨道上。

我正在尝试解决这个问题：

编写一条 SQL 语句，查找美国和墨西哥的总人口（在此数据库中）。

由于缺乏声誉，我无法在此处发布表格，但这很简单。给定墨西哥的国家 ID 为 2，美国 ID 为 5。

该表有 4 列，CITY_ID、NAME、COUNTRY_ID 和 POPULATION。你不知道有多少行。所以基本上我需要添加具有相应“2”或“5”国家 ID 的 POPULATION 列。

这是我到目前为止所拥有的：

```
//this statement gives result-set with all the cities in Mexico and the U.S.
SELECT * FROM City
WHERE country_id=’5’
OR country_id=’2’

//here, I don't know how to reference the result-set
SELECT SUM(population) FROM result-set 
```

问题还说要在一个声明中做到这一点，有没有更简单的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:32:18.043

您将`SUM(population)`表达式放入查询中..

```
SELECT SUM(population) AS TotalPopulation
  FROM City
 WHERE country_id='5'
    OR country_id='2' 
```

请注意，您也可以编写`x=a or x=b`as `x in (a,b)`，即

```
 WHERE country_id in (5,2) 
```

（如果 country_id 是整数，您也可以删除引号，尽管它们不会失败）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:33:50.350

你快到了。

```
SELECT Sum(population) FROM City
WHERE country_id=2
OR country_id=5 
```

我假设国家 ID 是整数，所以不需要语音标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:33:30.020

```
SELECT SUM(population)
FROM City
WHERE country_id=’5’
OR country_id=’2’ 
```

# asp.net-mvc-4 - Kendo ui - 如何将验证与 mvc 模型属性联系起来

> ID：16211169
> 
> 赞同：2
> 
> 时间：2013-04-25T09:30:28.397
> 
> 标签：asp.net-mvc-4, telerik, kendo-ui, kendo-asp.net-mvc

通过阅读该[线程](http://www.kendoui.com/forums/framework/validation/using-kendo-validator-with-mvc-model-properties.aspx)中的帖子 -由于某些奇怪的原因而无法在此处发布问题:(我会在这里问它以希望获得解决方案

我是不是在说我必须像下面这样进行验证..

1.  我将 html5 属性（data-required-msg/validationMessage）添加到文本框和 required 属性。
2.  我为无效的 msg 创建了一个跨度，并将其绑定到具有“data-for”属性的字段。然后，“请输入姓名”消息应出现在此跨度中。

**问题**

1.  这是解决这个问题的唯一方法吗？
2.  有没有办法让我显示正确的错误消息（“我想显示的错误消息”），以任何方式与 ViewModel 上的 mvc 属性相关联。正如另一位海报所说，这是一个更具可扩展性/可重用性和更好的设计。

使用 data-for="Name" 是非常脆弱的，因为模型字段名称的更改不会反映在那里，并且可能会被遗忘，从而交付有缺陷的软件。您正在失去类似的类型安全性

```
@Html.ValidationMessageFor(m=> m.Name) 
```

**代码**

```
public class AViewModel
{
       [Required(ErrorMessage="Error Message I want to show")]
        public string Name { get; set; }
}

<div class="validation-wrapper">
                <div class="input-wrapper">
                    @Html.TextBoxFor(m => m.Name, new { placeholder = "eg. John Smith", data_required_msg="PleaseEnter name", required="required" } )                           
                </div>
                <span class="k-invalid-msg" data-for="Name"></span>
            </div> 
```

干杯，J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T17:50:08.293

为了能够执行您所说的操作，您需要使用 Kendo UI for ASP.NET MVC。有了它，您可以像以前一样继续使用您的 DataAnnotations 属性和 Html.ValidationMessageFor() 助手。您需要做的就是`$('[your_form_selector]').kendoValidator()`在您的表单之后（或在 document.ready() 上）调用。

# html - 根据选定的下拉选项打开弹出窗口

> ID：16211172
> 
> 赞同：0
> 
> 时间：2013-04-25T09:30:49.540
> 
> 标签：html, forms, popup

我要做的是创建一个带有下拉列表和提交按钮的简单表单。从下拉列表中选择一个选项后，用户单击提交按钮并打开一个弹出窗口，允许他们查看有关他们选择的选项的更多信息。

现在我只有：

```
<form action="example.php" method="post" target="_blank">
    <select size="7" name="identifier" style="width: 100%;">
        <option>
            Options....
        </option>
    </select>
</form> 
```

现在这确实“起作用”，因为当用户选择一个选项并按下提交时，它会打开一个新窗口，其中包含传递的所选选项发布数据。但是，我希望它专门打开一个较小的弹出窗口，其大小我可以定义，而不是一个全新的窗口。我也知道 target=_blank 已被弃用，所以我想知道现在实现这一目标的首选方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:10:53.433

`onsubmit`调用一个javascript函数。
在该函数中获取您需要传递的所有值，
例如`var myelementval = document.getElementById('myelement')`
然后使用

```
window.open('mywindow.php?myelement='+myelementval,"mypopupname","width=500,height=400,resizable=yes,top=100,left=200,scrollbars=yes" 
......... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:35:55.297

这是可能解决您的问题的链接（stackoverflow链接）：[如果使用javascript在“选择”下拉列表中选择“选项”，如何显示弹出窗口？](https://stackoverflow.com/questions/7649072/how-to-show-popup-if-select-option-in-select-dropdown-using-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:37:53.977

尝试这个

```
<form action="example.php" method="post" target='popup' onsubmit="window.open('','popup','width=700,height=400,left=200,top=200,scrollbars=1')"> 
```

或者将此代码添加到您的提交按钮： onclick="window.open('','popup','width=700,height=400,left=200,top=200,scrollbars=1')"

# javascript - 如果最后 li 然后在其上设置点击事件

> ID：16211177
> 
> 赞同：0
> 
> 时间：2013-04-25T09:31:08.557
> 
> 标签：javascript, xslt

这是我的 xslt 文件：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <li onclick="final()">
      <xsl:value-of select="@value" />
      <xsl:apply-templates select="current()[*]" />
    </li>
  </xsl:template>

  <xsl:template match="*/*/*">
    <ul>
       <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[3]]" 
                            mode="item" />
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

这是我的 xml 文件：-

```
<?xml-stylesheet type="text/xsl" href="a.xsl"?> 
<root>
  <child_1 entity_id = "1" value="Game" parent_id="0">
    <child_2 entity_id="2" value="Activities" parent_id="1">
      <child_3 entity_id="3" value="Physical1" parent_id="2">
        <child_6 entity_id="6" value="Cricket" parent_id="3">
          <child_7 entity_id="7" value="One Day" parent_id="6"/>
        </child_6>
      </child_3>
      <child_4 entity_id="4" value="Test1" parent_id="1">
        <child_8 entity_id="8" value="Test At Abc" parent_id="4"/>
      </child_4>
      <child_5 entity_id="5" value="Test2" parent_id="1">
        <child_9 entity_id="9" value="Test At Xyz" parent_id="5"/>
      </child_5>
    </child_2>
   <child_10 entity_id="10" value="Region" parent_id="1">
      <child_11 entity_id="11" value="ABC" parent_id="10">
        <child_12 entity_id="12" value="XYZ" parent_id="11">
          <child_13 entity_id="13" value="ABC123" parent_id="12"/>
        </child_12>
      </child_11>
  </child_10>
</child_1>
</root> 
```

我正在尝试从 xml 文件创建 ul li。
在这里，我使用函数设置每个`li`点击事件。 但现在我只想最后一次点击事件而不是每一个。 就像是：-`onclick`
`li``li`

*   活动
    *   身体的
        *   蟋蟀
            *   一天

现在我想最后`Li`

```
<li onclick ="final()">OneDay</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:24:05.473

我用所需的 XSLT 更改了您的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <xsl:choose>
      <xsl:when test="self::node()/child::*">
        <li>
          <xsl:value-of select="@value"/>
          <xsl:apply-templates select="current()[*]"/>
        </li>
      </xsl:when>
      <xsl:otherwise>
        <li onclick="final()">
          <xsl:value-of select="@value"/>
          <xsl:apply-templates select="current()[*]"/>
        </li>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="*/*/*">
    <ul>
      <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[3]]" mode="item"/>
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

要获得输出：

```
<ul>
   <li>Physical1
      <ul>

         <li>Cricket
            <ul>

               <li onclick="final()">One Day</li>

            </ul>
         </li>

      </ul>
   </li>
</ul>

<ul>
   <li>ABC
      <ul>

         <li>XYZ
            <ul>

               <li onclick="final()">ABC123</li>

            </ul>
         </li>

      </ul>
   </li>
</ul> 
```

# asp.net-mvc - 会话变量在两个不同的控制器之间仍然保持为空

> ID：16211182
> 
> 赞同：0
> 
> 时间：2013-04-25T09:31:21.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session-variables

我的 MVC 项目有问题！目标是设置一个会话变量，以便将其传递给所有控制器：在我的 xUserController 中，

```
 Session["UserId"] = 52;
            Session.Timeout = 30;

            string SessionUserId = ((Session != null) && (Session["UserId"] != null)) ? Session["UserId"].ToString() : ""; 
```

//SessionUserId =“52”

但在 ChatMessageController

```
[HttpPost]
public ActionResult AddMessageToConference(int? id,ChatMessageModels _model){

        var response = new NzilameetingResponse();
        string SessionUserId = ((Session != null) && (Session["UserId"] != null)) ? Session["UserId"].ToString() : "";
//...

        }
        return Json(response, "text/json", JsonRequestBehavior.AllowGet);
} 
```

会话用户 ID = ""

那么，为什么会这样？如何在我的所有控制器中将会话变量设置为全局变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:04:52.613

这种行为只有两个原因：第一个是您的会话结束，第二个是您从应用程序的另一个位置重写了会话变量。没有任何额外的代码，没有什么可说的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:05:38.403

这是我解决问题的方法

我知道这不是最好的方法，但它帮助了我：

首先，我创建了一个基本控制器，如下所示

```
public class BaseController : Controller
{
    private static HttpSessionStateBase _mysession;
    internal protected static HttpSessionStateBase MySession {
        get { return _mysession; }
        set { _mysession = value; } 
    }
} 
```

然后我更改了所有控制器的代码，让它们从基本控制器类继承。

然后我覆盖了“OnActionExecuting”方法，如下所示：

```
public class xUserController : BaseController
{
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        BaseController.MySession = Session;
        base.OnActionExecuting(filterContext);
    }
    [HttpPost]
    public ActionResult LogIn(FormCollection form)
    {
        //---KillFormerSession();
        var response = new NzilameetingResponse();
        Session["UserId"] = /*entity.Id_User*/_model.Id_User;
        return Json(response, "text/json", JsonRequestBehavior.AllowGet);
    }
} 
```

最后，我改变了调用会话变量的方式。

```
string SessionUserId = ((BaseController.MySession != null) && (BaseController.MySession["UserId"] != null)) ? BaseController.MySession["UserId"].ToString() : ""; 
```

代替

```
 string SessionUserId = ((Session != null) && (Session["UserId"] != null)) ? Session["UserId"].ToString() : ""; 
```

现在它可以工作了，我的会话变量可以遍历所有控制器。

# sql - 多行插入两个表避免循环

> ID：16211183
> 
> 赞同：1
> 
> 时间：2013-04-25T09:31:22.230
> 
> 标签：sql, sybase

我有一组值必须插入到两个表中。输入有 5 行，我必须先将这 5 行插入表 A。表 A 有一个标识列。接下来我必须将这 5 行插入表中B 有一个额外的列，它是表 A 中的标识。如何在不使用任何循环的情况下做到这一点？任何帮助都会非常有帮助。

```
INSERT INTO TABLE_A(COL2,COL3)
SELECT COL2,COL3 FROM #TEMP_TAB

set @identityval=@@identity 
INSERT INTO TABLE_B(COLA,COLB,COLC)
 SELECT @identityval,COL2,COL3,COL4 FROM #TEMP_TAB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:12:45.220

这是一种解决方案。

从表 TABLE_A 中获取最大标识列在表 TABLE_A 中
插入新记录，
然后从 TABLE_A 在 TABLE_B 上插入标识大于最后最大标识的记录。

谢谢，戈帕尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:37:10.753

您不能使用单个语句插入多个表。

您可以做的是在表 A 上创建一个插入触发器，以便在插入发生后执行新的插入，并使用插入到表 A 中的值的标识并将其插入到表 B 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T10:32:02.677

你想做的事情是不可能的。您只能使用`@@identity`变量从最后一次插入中获取值。这样就可以添加到多个表中设置正确的外键，而无需使用游标再次选择刚刚插入的行。这种方法在一次插入多行时没有用。

从[文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/X39476.htm)中：使用 @@identity 全局变量检索插入 IDENTITY 列的最后一个值。每次 insert 或 select into 尝试将行插入表中时，@@identity 的值都会更改。

这是一个插入单行的过程，您可以使用返回值创建对另一个表中插入数据的引用：

```
create procedure reset_id as
    set identity_insert sales_daily on
    insert into sales_daily (syb_identity, stor_id) 
         values (102, "1349")
    select @@identity
select @@identity

execute reset_id 
```

# c# - iTextSharp DataMatrix 条码容量

> ID：16211186
> 
> 赞同：2
> 
> 时间：2013-04-25T09:31:44.560
> 
> 标签：c#, character-encoding, itextsharp, barcode

我有一个使用 16x36 大小实现 DataMatrix 条码的规范。我将 C# 与具有 BarcodeDatamatrix 类的 iTextSharp 库一起使用。

鉴于这些条形码尺寸，指定的容量为：

*   数字：64
*   字母数字：46
*   字节：30

这是取自网站：

> [http://www.barcodephp.com/en/2d/datamatrix/technical](http://www.barcodephp.com/en/2d/datamatrix/technical)

要求是在 16x36 符号中存储 46 个字符的字符串。

我很难理解如何以适合 30 字节的方式对 46 字节字符串进行编码。

# gwt - GWT：如何使用（JSNI）提取 javascript 函数的内容

> ID：16211188
> 
> 赞同：0
> 
> 时间：2013-04-25T09:31:55.883
> 
> 标签：gwt, jsni

我正在使用 JSNI 从 gwt 客户端调用 javascript 函数，如下所示：

```
anchor.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
               execute(notification.getActionCode(), notification.getParams());
            }
});

private static native String execute(String functionName, String params)/*-{
        try{
           $wnd[functionName](params);
        }catch(e){
            alert(e.message);
        }
}-*/; 
```

我的问题是我的 javascript 函数包含 window.open("ServletName?....")。单击锚点时，打开的窗口显示以下错误： **请求的资源 (/es/ *gwt/core* /ServletName) 不可用。**

如果我将 window.open("ServletName?....") 替换为 window.open("../../ServletName?....")，则窗口打开成功，但这些 javascript 函数也在外部使用gwt 所以我不能修改它。

我不知道为什么将 /gwt/core 部分添加到导致问题的 url 中。在执行 javascript 函数之前，gwt 中是否有办法提取其内容并在 url 之前添加“../..”？***我的意思是提升 javascript 函数名称，我们可以在调用执行函数之前获取它的内容吗？在我的情况下，我的 javascript 函数如下：***

```
function everlinked_AddSpace(spaceId){
        window.open('ELUtilities?Service=Space&action=homePage&SpaceId='+spaceId+'&Template=apps/everlinked/templates/spaces/space_main.htm','_blank');;
    } 
```

***我需要在 gwt 客户端修改它并用新的修改调用它。***

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:19:06.703

我认为您正在尝试使用不好的方法来解决您的问题。

更简单的方法是使用 url [re-writer](http://tuckey.org/urlrewrite/)或修改 web.xml`url-pattern`以将 gwt 应用程序发送的相对路径路由到同一个 servlet。

可能您的 web.xml 中有这样的内容：

```
<servlet>
    <servlet-name>myservlet</servlet-name>
    <servlet-class>maynamespace.ServletName</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>/ServletName</url-pattern>
</servlet-mapping> 
```

因此，您可以将此块添加到您的 web.xml。

```
<servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>/es/gwt/core/ServletName</url-pattern>
</servlet-mapping> 
```

请注意，`url-pattern`它的正则表达式集非常有限（/path/* 和 *.ext），因此在您的情况下，您必须编写完整路径。

# hibernate - How to update columns value with new value

> ID：16211189
> 
> 赞同：1
> 
> 时间：2013-04-25T09:31:57.840
> 
> 标签：hibernate

I would like to update column value with a new entity value incrementally, for example:

support I have a table USER with COLUMN name BALANCE

for specific user, his balance is 3000.

Now, I would like to set his value to 3500.

I have hibernate "User" Entity that has a 'balance' value of 500.

How can I make the update??

If I would like to make it using pure sql query, I would simple do:

"UPDATE USER set balance = balance+500 where user_id=3"

I would like to avoid calling sql and use hibernate.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:00:44.427

你试过下面的代码吗？在提问之前，请务必记住提及您尝试过的所有可能的解决方案。

```
User user=session.get(User.class, 3); // 3 is ID of user. 
user.setBalance((user.getBalance()+500));
session.saveOrUpdate(user);
session.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:41:28.457

这应该适合你：

```
Query query = session.createQuery("UPDATE User u SET u.balance = :balance WHERE u.id = :userId");
query.setParameter("balance", balance + 500);
query.setParameter("userId", 3);
query.executeUpdate(); 
```

请不要说您是`User`通过 HQL 更新实体，而不是`USER`像使用 SQL 那样更新表。我还假设`balance`和`id`列映射到实体中的`balance`和`id`属性。`User`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-16T10:11:57.287

您可以通过以下方式使用 JPA 来实现它：

```
CriteriaUpdate<User> criteria = builder.createCriteriaUpdate(User.class);
Root<User> user = criteria.from(User.class);
criteria.set(user.<Integer>get("balance"), builder.sum(user.<Integer>get("balance"), 500));
criteria.where(builder.equal(user.get("user_id"), 3));
entityManager.createQuery(criteria).executeUpdate(); 
```

它将在数据库上执行以下查询：

```
UPDATE user SET balance = balance + 500 WHERE user_id = 3 
```

如果您想使用 Hibernate 执行此操作，那么我建议您使用锁定，因为使用 Hibernate 您将首先选择行，更新应用程序中的余额，然后更新行。在选择和更新语句之间，如果行以不同的余额更新，那么您最终会将不正确的数据写入数据库。因此，您可以使用以下代码来避免它：

```
User user = session.get(User.class, 3, LockMode.PESSIMISTIC_WRITE);
user.setBalance(user.getBalance() + 500);
session.saveOrUpdate(user); 
```

它将在数据库上执行以下查询：

```
SELECT * FROM user WHERE user_id = 3 FOR UPDATE #Let's assume current balance is 3000
UPDATE user SET balance = 3500 WHERE user_id=3 
```

# mongodb - 如何使用 mongodb 查询进行空间搜索？

> ID：16211190
> 
> 赞同：0
> 
> 时间：2013-04-25T09:31:59.890
> 
> 标签：mongodb

我正在尝试在我的 android 应用程序中使用空间搜索。我是 mongodb 和空间搜索的新手。我正在尝试在命令提示符下实现此查询，但它什么也不显示

```
db.places.find( { loc: { $geoWithin : { $center : [ [x, y], 10 ] } } } ) 
```

代替 x 和 yi 写经度和纬度。我想围绕特定的经度和纬度进行空间搜索。我应该在 loc, x, y 中写什么？

请帮忙！！！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T17:40:48.840

看看这个： [http ://docs.mongodb.org/manual/reference/operator/center/](http://docs.mongodb.org/manual/reference/operator/center/)

检查[http://docs.mongodb.org/manual](http://docs.mongodb.org/manual)手册，它有很大帮助。

# php - Magento PHP：没有父母的产品

> ID：16211191
> 
> 赞同：0
> 
> 时间：2013-04-25T09:32:04.877
> 
> 标签：php, magento, product, parents

在 Magento 中，我想在脚本上过滤没有任何父产品的产品。目前我做类似的事情：

```
$products = $this->_productModel->getCollection()
    ->addAttributeToSelect('*')
    ->addStoreFilter($this->_storeId)
    ->addAttributeToFilter('type_id',array('in'=>$_types))
    ->addAttributeToFilter('status',array('in'=>$_status))
    ->joinTable('cataloginventory/stock_item', 'product_id=entity_id', array('qty'=>'qty','is_in_stock' => 'is_in_stock'), $this->_getStockSQL(), 'inner'); 
```

我得到了所有的产品，但我可以使用 getCollection() 说“只给我没有父母的产品”吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:57:38.387

完美的 ：）

```
->joinTable('catalog_product_relation', "parent_id=entity_id",array('child_id'=>'child_id'), null, "inner") 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:01:47.260

父产品和子产品仅在分组、可配置和捆绑产品中可用。如果您不想要父产品

检查 id 是否在 catalog_product_relation 和 catlog_product_super_link 的 parent_id 中，然后它是父产品

# android - 哪个运动传感器会消耗更少的电池

> ID：16211199
> 
> 赞同：2
> 
> 时间：2013-04-25T09:32:19.970
> 
> 标签：android, performance, accelerometer, android-sensors, motion-detection

只要我的应用程序处于活动状态，我就需要检测移动，即设备何时开始移动。我要求以固定频率进行更新，并且当设备屏幕关闭并拔下电源时，传感器的跟踪正在工作（实现这一点非常痛苦..）

在某些情况下，应用程序可能会被激活数小时，因此节省电池电量是一个重要问题。

经典的实现是使用加速度传感器。但我发现为了跟踪倾斜，我还可以使用以下所有传感器：

`TYPE_ACCELEROMETER`
`TYPE_GYROSCOPE`
`TYPE_LINEAR_ACCELERATION`
`TYPE_ORIENTATION`
`TYPE_ROTATION_VECTOR`

（[请参阅此处的信息](http://developer.android.com/guide/topics/sensors/sensors_overview.html#sensors-intro)）

某些传感器在功耗方面是否优于其他传感器？

另外：也许使用网络使用位置更新会更好？我猜测使用位置更新我可以使用更高频率的更新请求，但与传感器监听相比，它需要多少功率？

谢谢

# c# - C#串口数据接收事件处理程序被触发两次

> ID：16211203
> 
> 赞同：0
> 
> 时间：2013-04-25T09:32:24.437
> 
> 标签：c#, events, event-handling

我正在`C#`使用数据接收事件处理程序在 Visual Studio 2010 Windows 窗体应用程序中接收 6 字节数组数据。

但是当我尝试在我的表单标签上显示这些数据时，当我只需要 6 个字节时，它会显示 6 个字节数据的重复。

你能告诉我串口接收事件是如何工作的吗？

# sql-server - SQL Server 身份相关错误

> ID：16211205
> 
> 赞同：0
> 
> 时间：2013-04-25T09:32:27.603
> 
> 标签：sql-server, sql-server-2008, identity-column

我在 SQL SERVER 2008 中使用这个查询..

```
SET IDENTITY_INSERT ABC ON

BULK 
INSERT ABC
FROM 'F:\test.csv'
WITH
(
    FIELDTERMINATOR = ',',
    ROWTERMINATOR = '\n'
)
GO 
```

并得到一个错误：

> 当 IDENTITY_INSERT 设置为 ON 或复制用户插入 NOT FOR REPLICATION 标识列时，必须为表“ABC”中的标识列指定显式值。

'ABC' 的表结构是：

```
ID [int] IDENTITY(1,1) NOT NULL,  -- primary key
aa [varchar](50) NULL,
bb [varchar](50) NULL,
cc [datetime] NULL,
dd [varchar](50) NULL,
ee [varchar](50) NULL,
ff [int] NULL,
gg [varchar](50) NULL,
ii [int] NULL,
jj [int] NULL 
```

来自 CSV 文件的样本数据

```
84,0b0dbe1d,192.168.10.221,2012-07-27 16:15:41.503,0b0dbe1d_16-15-18,1.0.0,2,pra,2,NULL
85,111de4b6,192.168.10.221,2012-07-27 16:27:06.060,111de4b6_16-27-05,1.0.0,8,Diane,5,NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:03:27.580

詹姆斯，您收到错误是因为您的 csv 文件包含 9 个列值，但您的表结构包含 10 个列。这就是您收到该错误的原因。如果您 SET Identity_Insert ABC 关闭，那么您将不会收到任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:49:36.207

错误清楚地表明，您需要在插入时指定列名。

我认为我们没有在批量插入期间指定列名的选项。您可以使用以下替代方法。

```
 select * into dbo.Stagingtable from ABC where 1=2
    go

    BULK 
    INSERT Stagingtable
    FROM 'F:\test.csv'
    WITH
    (
        FIELDTERMINATOR = ',',
        ROWTERMINATOR = '\n'
    )
    GO
    SET IDENTITY_INSERT ABC ON
GO
    INSERT INto ABC (column1,column2,etc) 
    select * from Stagingtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:56:47.827

从[批量导入数据时保留标识值（SQL Server）](http://msdn.microsoft.com/en-us/library/ms186335.aspx)：

> 若要防止 SQL Server 在将数据行大容量导入表时分配标识值，请使用适当的 keep-identity 命令限定符。当您指定 keep-identity 限定符时，SQL Server 使用数据文件中的标识值。这些限定符如下：

```
bcp                                          | -E             |  Switch
BULK INSERT                                  | KEEPIDENTITY   |  Argument
INSERT ... SELECT * FROM OPENROWSET(BULK...) | KEEPIDENTITY   |  Table hint 
```

该示例显示了如何在您的情况下应用此药水：

```
BULK 
INSERT ABC
FROM 'F:\test.csv'
WITH
(
    KEEPIDENTITY,  
    FIELDTERMINATOR = ',',
    ROWTERMINATOR = '\n'
)
GO 
```

# jquery - Jquery UI 对话框按钮无需单击即可执行

> ID：16211206
> 
> 赞同：1
> 
> 时间：2013-04-25T09:32:28.523
> 
> 标签：jquery, jquery-ui

我从 ajax 调用的成功函数调用 Jquery UI 对话框。对话框的代码是这样的 -

```
 $.ajax({
          'url': "../../controller/myclass.cfc",
          'data':{
              method: "generateQuote",
              'quoteItems':quoteItems,
              returnFormat: "json"
          },
          success: function(data){
             $("#place_of_loading_image").hide();
             newQuoteId = data.toString();

               //New Quote Confirmation popup
                 $( "#newQuoteAddedAlert" ).dialog({
                    autoOpen: false,
                    resize: 'auto',
                    width: 'auto',
                    modal: true,
                    closeOnEscape: false,
                    closeText: "Close" ,
                    position: "center top",
                    buttons: [{
                        text:"Continue", click: function(){
                            $("#newQuoteAddedAlert").dialog("close");
                        }},
                        {text:"Finish",click: function(){   
                            $("#newQuoteAddedAlert").dialog("close");
                            //alert("shutup");
                            location.reload(); 
                        }
                    }]

                });

             //showConfirmationAlert(newQuoteId);

          },error: function( objRequest, strError ){
        }
     }); 
```

我的问题是，`location.reload()`一旦对话框加载，完成按钮函数内部就会被调用。我希望它仅在用户单击完成按钮后才执行。

我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:31:55.800

为什么不尝试在 $(document).ready 块中而不是在成功方法中定义对话框？在这种情况下，您只需要以这样的成功方法打开对话框：

```
$( "#newQuoteAddedAlert" ).dialog('open'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T17:24:31.953

我有同样奇怪的问题。我没有调查太多，但是当我改变时它开始发生

```
<input type="button" value="Submit" onclick="submitForm()" /> 
```

到：

```
<button onclick="submitForm()">Submit</button> 
```

所以我只是把它换回来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-12T07:46:10.387

我遇到了类似的问题。原因是：对话框代码是从具有 jQuery v-1.7 和较旧 jQuery-ui.js 的旧页面复制的，而新页面具有 jQuery-3.3.1 但较旧的 jQuery-ui.js。

因此，将上述两个脚本与**最新版本**一起使用。

# doxygen - 删除 PDF 中的“由 doxygen 生成”和时间戳

> ID：16211207
> 
> 赞同：3
> 
> 时间：2013-04-25T09:32:30.383
> 
> 标签：doxygen

作为标题。我刚刚开始使用 doxygen，在第一次测试运行时，我注意到创建的 PDF 是“由 doxygen 1.8.3.1 创建的”，然后是日期和时间，位于首页。

可以删除这个吗？甚至只是移动它，说到文件的末尾？

我已经注意到其他类似的问题，但仅针对 HTML（或我未生成的 RTF）而不是 PDF

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T18:59:38.587

您可以通过使用自定义 LaTeX 标头来做到这一点。

首先使用生成一个默认值

```
doxygen -w latex header.tex footer.tex doxygen.sty 
```

现在编辑 header.tex 并查找“Generated on ...”部分并用您喜欢的东西替换它。

然后在doxygen的配置文件中提到自定义的header

```
LATEX_HEADER           = header.tex 
```

并正常运行 doxygen。

**注意**：当您升级到新版本的 doxygen 时，您可能还需要更新您的自定义标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:46:14.030

我相信你应该使用[`HTML_FOOTER`](http://www.doxygen.nl/manual/config.html#cfg_html_footer)配置标签。

我没有对此进行测试，但听起来不错：

> HTML_FOOTER 标记可用于为每个生成的 HTML 页面指定用户定义的 HTML 页脚。如果标签留空，doxygen 将生成一个标准页脚。

# jquery - 滚动离开时使用jQuery回到锚点顶部

> ID：16211211
> 
> 赞同：0
> 
> 时间：2013-04-25T09:32:36.593
> 
> 标签：jquery, html, css

基本上我有一个全屏网站，您可以通过指向锚点的链接滚动浏览内容。

我想要做的是当用户使用鼠标滚轮或滚动条滚动离开页面时，页面自动滚动到锚点的顶部，这样网站的查看者将永远不会有一个框的一半显示的内容和其他的一半。

例子：

[http://nationallgbtmuseum.org/#/home/](http://nationallgbtmuseum.org/#/home/)

当他们滚动离开某一位内容时，页面将自动将其滚动回该部分的顶部。

我希望这是有道理的，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:53:48.700

我找到了一个非常明显的解决方案，一个名为“windows”的 jquery 插件在使用整页 div 时会自动滚动到最常见的 DIV 顶部：

[http://nick-jonas.github.io/windows/](http://nick-jonas.github.io/windows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:45:11.063

您正在寻找的声音就像您所追求的是这个问题中描述的内容：[Snap To Top of Div/Element on Scroll](https://stackoverflow.com/questions/11679361/snap-to-top-of-div-element-on-scroll)

你也可以看看这些问题：

*   [动画 div 以捕捉到最常见的元素](https://stackoverflow.com/questions/11352546/animate-div-to-snap-to-element-most-in-view)

# php - 在 CodeIgniter 下的函数中使用 die()

> ID：16211213
> 
> 赞同：0
> 
> 时间：2013-04-25T09:32:50.627
> 
> 标签：php, codeigniter, codeigniter-2

我正在 CodeIgniter 中编写一个 Web 应用程序，并且我正在尝试应用用户激活。

```
 function is_active() {
        $active_state = $this->my_model->check_active();
        if ($active_state == 'no') {
            $this->load->view('activation_page');
            die();
        }
    } 
```

上面的代码将产生一个空白页，如果我删除 die(); 如果将在activation_page旁边打印出members_area

那么如何强制它加载请求的视图并退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:37:22.083

尝试

```
 if ($active_state == 'no') {
    $this->load->view('activation_page');
    return false;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:41:11.833

显然，您不会进入 if 语句，这意味着如果用户不活跃，您将加载激活页面。

您仍然没有 else，如果用户处于活动状态，它将加载视图。

尝试：

```
 if ($active_state == 'no') {
    $this->load->view('activation_page');
 } 
 $this->load->view('members_area'); 
```

注意：您可能想要恢复 if 条件。检查用户是否处于活动状态看起来更合乎逻辑，否则回退到激活页面。

**编辑：**

请参考此代码： http: [//paste.laravel.com/pfO](http://paste.laravel.com/pfO)

注2：许多可能的解决方案之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:48:49.240

如果条件正确，您应该玩过

```
if ($active_state == 'no') {
    $this->load->view('activation_page');
}else{
    $this->load->view('members_area');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:44:41.050

我会将您的 if 语句放入模块的控制器而不是模型中。您应该在那里进行检查，然后您可以围绕其他视图调用进行 if 语句。这样它就不会加载您不希望未激活用户看到的其他视图。

# ios-ui-automation - UIAutomation 功能测试的 iOS 代码覆盖率

> ID：16211218
> 
> 赞同：2
> 
> 时间：2013-04-25T09:33:05.333
> 
> 标签：ios-ui-automation

我想为我们的 iOS 应用程序生成代码覆盖率文件。

问题是，当我使用它构建的测试覆盖设置构建代码时，模拟器会启动应用程序。现在我想运行我的 UIAutomation 功能测试，但是一旦我使用 Instruments 命令开始我的测试，模拟器就会重新启动！

对于要生成的代码覆盖率文件，应用程序不得重新启动。

有没有人找到一种方法来使用已经运行的模拟器来执行 UIAutomation 测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T15:52:23.800

您也许可以从上一个问题中找到一些想法

[有什么方法可以测试 UIAutomation 测试的代码覆盖率吗？](https://stackoverflow.com/questions/15013854/is-there-any-way-to-test-the-code-coverage-of-uiautomation-tests/)

# asp.net-mvc - MVC 图 - 一个控制器的两个视图

> ID：16211220
> 
> 赞同：1
> 
> 时间：2013-04-25T09:33:15.460
> 
> 标签：asp.net-mvc

基本上，我被要求为一个应用程序绘制一个 MVC 图，该应用程序很快就会启动到一个项目中，我已经有点困惑了。

我需要绘制一个基本的 MVC 图（没问题），但是应用程序可以显示它的数据的两个视图；但一次只能查看一个视图。

我很难在网上找到任何这样的例子，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:39:38.830

所以基本上，您可以拥有一个**显示**数据的视图和一个**允许您对其进行编辑**的视图。这是同一数据的两个视图。为此，您需要执行两个操作。

假设它是一个用户配置文件，你会有类似的东西：

```
public class UserProfileController
{
    public ActionResult View(int userID) 
    {
        //populate model
        return View(model);
    }

    public ActionResult Edit(int userID)
    {
        //populate model
        return View(model);
    }
} 
```

然后你会有 2 个不同的视图，视图可能看起来像：

```
@model UserModel

@Html.LabelFor(m => m.UserName)
@Html.DisplayFor(m => m.UserName)

@Html.LabelFor(m => m.FirstName)
@Html.DisplayFor(m => m.FirstName) 
```

然后编辑将是这样的：

```
@model UserModel

@using (Html.BeginForm())
{
    @Html.LabelFor(m => m.UserName)
    @Html.EditorFor(m => m.UserName)

    @Html.LabelFor(m => m.FirstName)
    @Html.EditorFor(m => m.FirstName)

    <input type="submit" value="Save" />
} 
```

# javascript - Jvectormap 突出显示多个国家

> ID：16211226
> 
> 赞同：4
> 
> 时间：2013-04-25T09:33:32.530
> 
> 标签：javascript, jquery, each, jvectormap

我目前正在使用[JvectorMap](http://jvectormap.com/)并尝试在将鼠标悬停在文本上时突出显示多个国家，我已经达到了一个点，如果我将鼠标悬停在非洲这个词上，它将突出显示整个地图，我将如何过滤它以仅突出显示非洲我悬停在非洲的内容名称上。

目前我正在使用 a 创建一个大陆列表，`jQuery.each`并且我正在返回`continentCodes`，其中包含所有国家代码（ZA，US）并分配了颜色......我尝试执行以下操作：

```
jQuery('.continentLink').hover(function() {
 jQuery.each(mapObject.mapData.paths, function(i, val) {
  if (val.continent == "africa"){
   continentCodes[i] = "#3e9d01";
   mapObject.series.regions[0].setValues(continentCodes);
  }
 });
}); 
```

但后来我重复了每个声明，我无法获得动态大陆。

这是一个[JSFIDDLE](http://jsfiddle.net/dawidvdh/EpGep/8/)

所以继承人的JS：

```
jQuery(function(){
//JSON MARKERS
var markers = [{latLng: [-34.033333300000000000, 23.066666700000040000], name: 'Knysna', info:'its got a lake...'},
    {latLng: [-33.924868500000000000, 18.424055299999963000], name: 'Cape Town', info:'its nice...'}];
//JSON MARKERS  

//JSON STYLING
var markerStyle = {initial: {fill: '#F8E23B',stroke: '#383f47'}};
var regionStyling = {initial: {fill: '#128da7'},hover: {fill: "#A0D1DC"}};
//JSON STYLING

//GLOBAL VARIABLES
var countryList = "", continentList = "";
var continentCodes = {};
//GLOBAL VARIABLES

//INIT MAP PLUGIN
jQuery('#world-map').vectorMap({
    map: 'world_mill_en',
    normalizeFunction: 'polynomial',
    markerStyle:markerStyle,
    regionStyle:regionStyling,
    backgroundColor: '#383f47',
    series: {regions: [{values: {},attribute: 'fill'}]},
    markers: markers,
    onRegionClick:function (event, code){
        jQuery('#world-map').vectorMap('set', 'focus', code);
    },
    onMarkerClick: function(events, index){
        jQuery('#infobox').html(markers[index].name);
    }
});
//INIT MAP PLUGIN

var mapObject  = jQuery('#world-map').vectorMap('get', 'mapObject');

//LIST COUNTRIES & CONTINENTS
function createList() {

    //Get list
    jQuery.each(mapObject.mapData.paths, function(i, val) {
        countryList += '<li><a id='+i+' class="countryLink">'+val.name+'</a></li>';
        continentList += '<li><a id='+val.continent+' class="continentLink">'+val.continent+'</a></li>';

        continentCodes[i] = "#3e9d01";
        return continentCodes;
    });
    //display continents
    jQuery('#continentList').html(continentList);

    //display countries
    jQuery('#countryList').html(countryList);

    //Create Hover Function
    jQuery('.continentLink').hover(function() {
        mapObject.series.regions[0].setValues(continentCodes);
        console.log(continentCodes);
    });

    //Create ZOOM Function
    jQuery('.countryLink').click(function(e) {
        jQuery('#world-map').vectorMap('set', 'focus', this.id);
    });
}

createList();
}); 
```

和 HTML：

```
 <div id="world-map" style="width: 960px; height: 400px"></div>
    <div id="infobox"></div>
        <ul id="continentList"></ul>
        <ul id="countryList"></ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:19:29.303

我已经重组了您的代码，请参阅[JSFIDDLE](http://jsfiddle.net/dawidvdh/EpGep/10/)，这是更正后的 javascript：

```
jQuery(function(){
//JSON MARKERS
var markers = [{latLng: [-34.033333300000000000, 23.066666700000040000], name: 'Knysna', info:'its got a lake...'},
    {latLng: [-33.924868500000000000, 18.424055299999963000], name: 'Cape Town', info:'its nice...'}];
//JSON MARKERS  

//JSON STYLING
var markerStyle = {initial: {fill: '#F8E23B',stroke: '#383f47'}};
var regionStyling = {initial: {fill: '#128da7'},hover: {fill: "#A0D1DC"}};
//JSON STYLING

//GLOBAL VARIABLES
var countryList = "", continentList = "";
var resultsDup = {};
var continentCodes = {};
//GLOBAL VARIABLES

//INIT MAP PLUGIN
jQuery('#world-map').vectorMap({
    map: 'world_mill_en',
    normalizeFunction: 'polynomial',
    markerStyle:markerStyle,
    regionStyle:regionStyling,
    backgroundColor: '#383f47',
    series: {regions: [{values: {},attribute: 'fill'}]},
    markers: markers,
    onRegionClick:function (event, code){
        jQuery('#world-map').vectorMap('set', 'focus', code);
    },
    onMarkerClick: function(events, index){
        jQuery('#infobox').html(markers[index].name);
    }
});
//INIT MAP PLUGIN

var mapObject  = jQuery('#world-map').vectorMap('get', 'mapObject');

//LIST COUNTRIES & CONTINENTS
jQuery.each(mapObject.mapData.paths, function(i, val) {

    countryList += '<li><a id='+i+' class="countryLink">'+val.name+'</a></li>';

    //remove duplicate continents
    var resultsList = val.continent;
    if (resultsDup[resultsList]) {
        jQuery(this).remove();
    }else{
        resultsDup[resultsList] = true;
        continentList += '<li><a id='+val.continent+' class="continentLink">'+val.continent+'</a></li>';
    }
    //remove duplicate continents

});
//display countries
jQuery('#countryList').html(countryList);

//display continents
jQuery('#continentList').html(continentList);

var continentId =""
function getID(continentId){
    jQuery.each(mapObject.mapData.paths, function(i, val) {
            if (val.continent == continentId){
                continentCodes[i] = "#3e9d01";
                mapObject.series.regions[0].setValues(continentCodes);
            }
    });
}

function removeGetID(continentId){
    jQuery.each(mapObject.mapData.paths, function(i, val) {
            if (val.continent == continentId){
                continentCodes[i] = "#128da7";
                mapObject.series.regions[0].setValues(continentCodes);
            }
    });
}

//LIST COUNTRIES & CONTINENTS TEMP
jQuery('.continentLink').hover(function(e) {
    continentId = this.id;
    getID(continentId);
}, function(){
    removeGetID(continentId);
});

//Zoom to Country Function
jQuery('.countryLink').click(function(e) {
    jQuery('#world-map').vectorMap('set', 'focus', this.id);
});

//Continent Hover function

}); 
```

享受 :D

# iphone - 如何将滑块图像结移到外面

> ID：16211227
> 
> 赞同：1
> 
> 时间：2013-04-25T09:33:42.810
> 
> 标签：iphone, ios, xcode, core-graphics

我很难理解如何计算结的圆周到圆心的数学。我希望你们能给我一些指导。

当前计算将结 img 设置在饼图的中间，希望将其移到更靠近外圈的位置，如 img 2

感谢您的观看和评论，任何意见表示赞赏。

![在此处输入图像描述](https://i.stack.imgur.com/B8oHv.png)

我想怎么样。 ![在此处输入图像描述](https://i.stack.imgur.com/JTqTa.png)

```
/** Draw a white knob over the circle **/
-(void) drawTheHandle:(CGContextRef)ctx{

    CGContextSaveGState(ctx);
    NSLog(@"handleCenterA.x %f",handleCenterA.x);
    NSLog(@" handleCenterA.y %f", handleCenterA.y);
    [[UIColor colorWithWhite:1.0 alpha:1.0]set];
    UIImage *myImage = [UIImage imageNamed:@"clock-marker.png"];

    //this will give me the result of image 1
    [myImage drawInRect:CGRectMake(handleCenterA.x-35, handleCenterA.y-40, TB_BUTTON_WIDTH, TB_BUTTON_WIDTH)];

    //this will give me the result of image 2
    [myImage drawInRect:CGRectMake(handleCenterA.x-35, handleCenterA.y-40, TB_BUTTON_WIDTH, TB_BUTTON_WIDTH)];

    CGContextRestoreGState(ctx);
}

#pragma mark - Math -

/** Move the Handle **/
-(void)movehandle:(CGPoint)lastPoint{

    //Get the center
    CGPoint centerPoint = CGPointMake(self.frame.size.width/2, self.frame.size.height/2);

    //Calculate the direction from a center point and a arbitrary position.
    //float currentAngle = AngleFromNorth(centerPoint, lastPoint, NO);
    //int angleInt = floor(currentAngle);

    //Calculate the direction from the center point to an arbitrary position.
    float currentAngle = AngleFromNorth(centerPoint, lastPoint, NO);
    int angleInt = 360 - floor(currentAngle);

    if (sliderLock == SliderLockedStart) {
        self.startAngle = angleInt;
    }
    //Redraw
    [self setNeedsDisplay];
}

- (CGPoint)centerPointFromAngel:(int)angleInt {
    CGPoint point = [self pointFromAngle:angleInt];
    point.x += TB_BUTTON_WIDTH/2;
    point.y += TB_BUTTON_WIDTH/2;
    return point;
}

- (CGFloat)distanceBetween:(CGPoint)p1 and:(CGPoint)p2 {
    CGFloat xDist = (p2.x - p1.x);
    CGFloat yDist = (p2.y - p1.y);
    return sqrt((xDist * xDist) + (yDist * yDist));
}

/** Given the angle, get the point position on circumference **/
-(CGPoint)pointFromAngle:(int)angleInt{

    //Circle center
    CGPoint centerPoint = CGPointMake(self.frame.size.width/2 - (TB_BUTTON_WIDTH/2), self.frame.size.height/2 - (TB_BUTTON_WIDTH/2));

    //The point position on the circumference
    CGPoint result;
    result.y = round(centerPoint.y + radius * sin(ToRad(-angleInt))) ;
    result.x = round(centerPoint.x + radius * cos(ToRad(-angleInt)));    
    return result;
}

//Sourcecode from Apple example clockControl 
//Calculate the direction in degrees from a center point to an arbitrary position.
static inline float AngleFromNorth(CGPoint p1, CGPoint p2, BOOL flipped) {
    CGPoint v = CGPointMake(p2.x-p1.x,p2.y-p1.y);
    float vmag = sqrt(SQR(v.x) + SQR(v.y)), result = 0;
    v.x /= vmag;
    v.y /= vmag;
    double radians = atan2(v.y,v.x);
    result = ToDeg(radians);
    return (result >=0  ? result : result + 360.0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:27:29.980

终于解决了。

/** 给定角度，得到圆周上的点位置 **/

```
-(CGPoint)pointFromAngle:(int)angleInt{

    //Circle center//TB_BUTTON_WIDTH
    CGPoint centerPoint = CGPointMake(self.frame.size.width/2 - (TB_BUTTON_WIDTH/2), self.frame.size.height/2 - (TB_BUTTON_WIDTH/2));

    //The point position on the circumference radius
    CGPoint result;
    result.y = round(centerPoint.y + 120 * sin(ToRad(-angleInt))) ;
    result.x = round(centerPoint.x + 120 * cos(ToRad(-angleInt)));

        NSLog(@"centerPoint %@",NSStringFromCGPoint(centerPoint));
        NSLog(@"result %@",NSStringFromCGPoint(result));
    return result;
} 
```

# java - 检测用户何时关闭浮动工具栏框架

> ID：16211228
> 
> 赞同：1
> 
> 时间：2013-04-25T09:33:49.973
> 
> 标签：java, swing, user-interface, toolbar

当用户尝试在摇摆中关闭浮动工具栏窗口时是否可以捕获事件？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:49:02.067

可能有一些非常简单的解决方案，但你为什么要使用它？

我能想到的最好的方法（不扩展我自己的工具栏）是在工具栏中添加一个`AncestorListener`并监视它的事件。

但是，我采用这种方法的问题是您需要知道最初连接到的主机，这可能不方便。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.ContainerEvent;
import java.awt.event.ContainerListener;
import java.awt.event.HierarchyEvent;
import java.awt.event.HierarchyListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JToolBar;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.AncestorEvent;
import javax.swing.event.AncestorListener;

public class TestFloatingToolBar {

    public static void main(String[] args) {
        new TestFloatingToolBar();
    }

    public TestFloatingToolBar() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JFrame frame = new JFrame("Test");

                final JToolBar tb = new JToolBar();
                tb.add(new JButton("Pop"));
                tb.setFloatable(true);

                tb.addAncestorListener(new AncestorListener() {
                    @Override
                    public void ancestorAdded(AncestorEvent event) {
                        tell();
                        if (SwingUtilities.getWindowAncestor(tb).equals(frame)) {
                            System.out.println("...In Main Frame");
                        } else {
                            System.out.println("...Maybe floating");
                        }
                    }

                    @Override
                    public void ancestorRemoved(AncestorEvent event) {
                        tell();
                        if (SwingUtilities.getWindowAncestor(tb).equals(frame)) {
                            System.out.println("...In Main Frame");
                        } else {
                            System.out.println("...Maybe floating");
                        }
                    }

                    @Override
                    public void ancestorMoved(AncestorEvent event) {
                    }
                });

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(tb, BorderLayout.NORTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public void tell() {
        Exception exp = new Exception();
        StackTraceElement[] stackTrace = exp.getStackTrace();
        System.out.println(stackTrace[1].getMethodName());
    }

} 
```

# c++ - 使用 MySQL 的 C++ 生成文件

> ID：16211230
> 
> 赞同：1
> 
> 时间：2013-04-25T09:33:57.447
> 
> 标签：c++, mysql, makefile

我正在尝试在 Linux 下构建 C++ 代码。这是我的第一次尝试（否则，我只使用 Windows）。我的代码正在使用 MySQL C API 库，但我在构建它时遇到了问题。我在尝试构建 MainProgram 时得到了这个输出

```
g++ -lstdc++ -c  MainProgram.cpp `mysql_config -–libs` -O2 -o MainProgram.obj `mysql_config –-cflags`

   g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-54)
   Copyright (C) 2006 Free Software Foundation, Inc.
   This is free software; see the source for copying conditions.  There is NO
   warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

然后链接没有完成，因为缺少 MainProgram.obj

我的makefile是这样的：

```
CC = g++ CFLAGS = -lm -lstdc++  -Wall -O2  

MYSQLCFLAGS = `mysql_config –-cflags` 
MYSQLLIBS   = `mysql_config -–libs`

BIN = my_program

OBJ = BlockingSocket.obj FTPClient.obj FTPDataTypes.obj FTPFileStatus.obj FTPListParse.obj MyStringAnsi.obj MainProgram.obj 

.PHONY: sestav .PHONY: clean

#-----------------------------------------

clean:  rm -f *.obj

#----------------------------------------- 

sestav: ${BIN}

#-----------------------------------------

$(BIN): $(OBJ) $(OBJ)   $(CC) $(CFLAGS) $^ -o $@

#-----------------------------------------

BlockingSocket.obj: ./FtpClient/BlockingSocket.cpp  $(CC) -c ./FtpClient/BlockingSocket.cpp -O2 -o BlockingSocket.obj

#-------

FTPClient.obj: ./FtpClient/FTPClient.cpp    
  $(CC) -c ./FtpClient/FTPClient.cpp -O2 -o FTPClient.obj

FTPDataTypes.obj: ./FtpClient/FTPDataTypes.cpp  
  $(CC) -c ./FtpClient/FTPDataTypes.cpp -O2 -o FTPDataTypes.obj

FTPFileStatus.obj: ./FtpClient/FTPFileStatus.cpp    
  $(CC) -c ./FtpClient/FTPFileStatus.cpp -O2 -o FTPFileStatus.obj    

FTPListParse.obj: ./FtpClient/FTPListParse.cpp  
  $(CC) -c ./FtpClient/FTPListParse.cpp -O2 -o FTPListParse.obj

MyStringAnsi.obj: MyStringAnsi.cpp  
  $(CC) -c MyStringAnsi.cpp -O2 -o MyStringAnsi.obj

MainProgram.obj: MainProgram.cpp   
  $(CC) -lstdc++ -c  MainProgram.cpp $(MYSQLLIBS) -O2 -o MainProgram.obj $(MYSQLCFLAGS) 
```

从头开始构建时的完整输出：

```
g++ -c ./FtpClient/BlockingSocket.cpp -O2 -o BlockingSocket.obj
g++ -c ./FtpClient/FTPClient.cpp -O2 -o FTPClient.obj
g++ -c ./FtpClient/FTPDataTypes.cpp -O2 -o FTPDataTypes.obj
g++ -c ./FtpClient/FTPFileStatus.cpp -O2 -o FTPFileStatus.obj
./FtpClient/FTPFileStatus.cpp:136:2: warning: no newline at end of file
g++ -c ./FtpClient/FTPListParse.cpp -O2 -o FTPListParse.obj
g++ -c MyStringAnsi.cpp -O2 -o MyStringAnsi.obj
In file included from MyStringAnsi.cpp:1:
MyString.h:257:7: warning: no newline at end of file
In file included from MyStringAnsi.cpp:3:
./Macros.h:22:7: warning: no newline at end of file
MyStringAnsi.cpp:1350:2: warning: no newline at end of file
MyStringAnsi.cpp: In member function â€void MyStringAnsi::operator+=(char)â€™:
MyStringAnsi.cpp:1102: warning: NULL used in arithmetic
g++ -lstdc++ -c  MainProgram.cpp `mysql_config -–libs` -O2 -o MainProgram.obj `mysql_config –-cflags`       
g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-54)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

g++ -lm -lstdc++  -Wall -O2   BlockingSocket.obj FTPClient.obj FTPDataTypes.obj FTPFileStatus.obj FTPListParse.obj MyStringAnsi.obj MainProgram.obj -o my_program
g++: MainProgram.obj: No such file or directory
make: *** [MainProgram] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:07:35.333

好的..我解决了这个问题。首先，正如 Joachim 在评论中建议的那样，我从构建中删除了库到对象其次，我没有使用 mysql_config --libs，而是手动放置了路径

现在makefile编辑如下：

```
CFLAGS = -lm -lstdc++  -Wall -O2 -L/usr/lib/mysql/ -lmysqlclient

$(CC) -c  MainProgram.cpp -O2 -o MainProgram.obj -I/usr/include/mysql/ 
```

# ruby-on-rails - 如何让 Rails 应用程序在两个域上工作，反向代理

> ID：16211232
> 
> 赞同：0
> 
> 时间：2013-04-25T09:34:01.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, cross-domain, reverse-proxy

我有两个单独的应用程序在`www.a.com`和`www.b.com`. 第二个是 rails-3 应用程序。为了通过共享 cookie 在两者之间获得一些通用登录，我将所有请求重定向`www.a.com/b`到`www.b.com`. 我正在使用 apache 反向代理来实现这一点：

```
ProxyPass /b/ http://www.b.com/ 
```

`www.a.com`除了所有资产/javascript链接都是通过假设为根来形成的这一事实之外，这很好用。例如：

```
<%= javascript_include_tag 'js/bootstrap-datepicker'%> 
```

正在导致链接`http://a.com/assets/js/bootstrap-datepicker.js`，而我希望这是`http://a.com/b/assets/js/bootstrap-datepicker.js`

我正在解决这个问题：

```
config.action_controller.asset_host = "http://a.com/analytics" 
```

即使我发现解决方案有点hacky，这也可以正常工作。当我在我的应用程序中放置指向其他页面的链接时，真正的问题就开始了。因此，为了放置一个指向名为 的页面的链接`page`，我需要放入`b/page`我的 href。当我使用 a.com 访问应用程序时，这可以正常工作。但这不允许我使用 b.com 访问应用程序，因为链接开始指向`www.b.com/b/page`显然不存在的链接。

我怎样才能让整个事情正常工作，以便我可以使用 a.com 或 b.com 访问我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:41:34.593

您的问题的替代解决方案，使用子域和 CNAME/ALIAS 代替反向代理。

而不是将 a.com/b 反向代理到 b.com。您使用 DNS 中的 CNAME/ALIAS 将 new.a.com 指向在 b.com 上运行的应用程序。

将 cookie 域设置为 a.com 而不是 www.a.com，以便跨子域共享 cookie。

配置/初始化程序/session_store.rb

```
YouApplicationName::Application.config.session_store :cookie_store, key: 'some_key', :domain => ".a.com" 
```

# javascript - 我可以使用 javascript/jquery 绑定 asp.net 下拉列表吗？

> ID：16211238
> 
> 赞同：0
> 
> 时间：2013-04-25T09:34:14.710
> 
> 标签：javascript, asp.net, jquery, drop-down-menu

我可以使用 javascript/jquery 绑定 asp.net 下拉列表吗？我从 web 方法从 jquery ajax 获取数据，所以我想在这一点上避免回发。`dropdownlist1.selecteditem.text`但是我仍然想在使用客户端脚本绑定它之后使用服务器端代码进行回发并保存所有数据（即我仍然可以这样做）。

有可能吗，有人可以解释一下如何做到吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T07:28:37.840

使用 Json ajax

句法：

```
$.ajax({
dataType: "json",
url: url,
data: data,
success: success
}); 
```

请参阅 json 的简单示例：

```
<script type="text/javascript">
        $(document).ready(function () {
            var msgbox = $("#status");
            $("#Button1").click(function () {
                $.ajax({
                    type: "POST",

                    //Page Name (in which the method should be called) and method name
                    url: "BeginJson.aspx/CheckDateTime",
                    // If you want to pass parameter or data to server side function you can try line
                   // data: "{}",
                    //else If you don't want to pass any value to server side function leave the data to blank line below
                    data: "{'args':'Somnath'}",

                    contentType: "application/json; charset=utf-8",

                    dataType: "json",

                    success: function (msg) {
                        //Got the response from server and render to the client
                        msgbox.html(msg.d);
                    }
                });
            });
        }); 
```

# angularjs - Angular 新手：$scope 变量需要使用两次才能刷新文本区域

> ID：16211239
> 
> 赞同：0
> 
> 时间：2013-04-25T09:34:16.663
> 
> 标签：angularjs

我第一次尝试 AngularJS，但我遇到了一个问题。

在调试器中，我看到范围变量“$scope.xml”已正确更新，但显示需要第二次通过（第二次单击）才能刷新。

这是一个 Plunker 来查看我的问题：[http ://plnkr.co/edit/9PJsGeDqwjC6nmZHcEJV](http://plnkr.co/edit/9PJsGeDqwjC6nmZHcEJV)

我正在查看文档，但找不到了解我做得不好的地方

非常感谢你的帮助 ！

```
<!doctype html>
<html ng-app="testAngularJS">
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
</head>
<body>
<div ng-controller="testXML">
<div>XML<br/><textarea cols="60" rows="15" ng-model="xml" name="xml">{{xml}}</textarea></div>

<div><button ng-click="listTypDoc()">List !</button><br/>

<br/><button ng-click="clearXML()">Clear</button></div>
</div>

<script type="text/javascript">

var app = angular.module('testAngularJS', []);

 app.controller('testXML', function($scope){

  $scope.url = 'listeTypDoc.txt';

    $scope.listTypDoc = function() {

        $.ajax({
                type:"GET",
                url: $scope.url,
                xhrFields: {
                   withCredentials: false
                },
                crossDomain: false
            }).done(function ( data ) {
               $scope.xml = data;
               debugger;
          });

        };

        $scope.clearXML = function() {
        $scope.xml = ''; 
        };

    })  
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:07:03.953

因为你在使用 angularjs 之外的请求，所以需要在将数据设置到 $scope.xml 之后调用 $apply()。看一下apply方法：

[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.%24rootScope.Scope)

但最好使用 angularjs 提供的服务而不是使用 jquery。

# javascript - 旋转谷歌地图标记图像

> ID：16211242
> 
> 赞同：8
> 
> 时间：2013-04-25T09:34:19.630
> 
> 标签：javascript, google-maps

```
marker1 = new google.maps.Marker( 
{
    position: myLatlng,
            map: map,
            icon: { 
                    path: google.maps.SymbolPath.FORWARD_OPEN_ARROW,
                    scale: 2,
                    rotation: degree   
                    }

        }); 
```

我正在尝试在某种程度上旋转谷歌地图上的标记图像。

我使用上面的代码很好，但它通过 **路径代码显示 FORWARD_OPEN_ARROW：google.maps.SymbolPath.FORWARD_OPEN_ARROW，** 但我想在此处添加图像而不是箭头

例如汽车图像，因此当车辆向某个方向移动时它可以旋转。我有一定程度的旋转，所以有什么方法可以放置图像而不是箭头

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:02:11.750

在该示例中，您为您的图标使用了[Symbol](https://developers.google.com/maps/documentation/javascript/reference#Symbol)对象。相反，您可以使用[Icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)对象。

```
icon: { 
     url: "/path/to/your/image.jpg"
} 
```

但是，它不包括旋转属性。相反，我假设您有多个精灵，因此您可以根据需要更新该 URL 以使用特定图像来表示不同程度的旋转。例如，您可以将它们命名为“image0.jpg”、“image45.jpg”和“image90.jpg”等。

或者，您可以继续使用 Symbol 对象，但您可以使用[SVG path notation](http://www.w3.org/TR/SVG/paths.html#PathData)指定路径。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2014-01-02T12:25:33.910

尝试这个

```
marker1 = new google.maps.Marker( 
{
    position: myLatlng,
            map: map,
            icon: { 
                    url: "/path/to/your/image.jpg",
                    scale: 2,
                    rotation: degree   
                    }

        }); 
```

# c# - 在没有表访问权限的情况下编写 SQL 查询

> ID：16211243
> 
> 赞同：1
> 
> 时间：2013-04-25T09:34:20.170
> 
> 标签：c#, .net, sql, oracle, entity-framework

**TL;DR**我正在使用`EntityFramework 5.0`with`Oracle`并且需要仅使用两列的索引来查询两列`NVL`的表。

经过数小时的尝试后的细节......我会尽量组织它。

所需的**SQL 查询**应该是：

```
SELECT t.Code, NVL(t.Local, t.Global) Description
FROM   Shows t
Where  t.Code = 123 
```

那么问题是什么？如果我想使用，`Context.Shows.Parts.SqlQuery(query)`我必须返回整行（`*`），然后我得到***Table Access Full***，所以我必须只返回所需的列。

我尝试过的下一件事（实际上在以下之前有很多尝试......）给出了非常接近的结果是使用***空合并运算符***（`??`）：

```
Context.Shows.Where(x => x.Code == 123)
             .Select(x => new { x.Code, Description = x.Local ?? x.Global); 
```

但是它使用的 SQL 使用起来很复杂`case & when`，而不是使用我 `Code, Nvl(Local, Global)`的关键索引！

我的下一步是使用***Database.SqlQuery***

```
context.Database.SqlQuery<Tuple<int, string>>("the Raw-SQLQuery above"); 
```

`Tuple`但是我得到一个不能是抽象的错误，并且**必须有默认的ctor**（它没有）。

我不喜欢的最后一步是**创建一个**只有这两个属性（`Code, Description`）的类，现在......它工作得很好，但我不想为这样的每个查询编写一个类。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:06:21.867

这是一个无解的答案。

我认为无论你尝试什么，你都做不到。即使您定义了自己的可变泛型元组，它也会失败，因为属性的名称必须[与列的名称匹配](http://msdn.microsoft.com/en-us/library/system.data.entity.database.sqlquery%28v=vs.103%29.aspx)：

> SqlQuery(String, Object[])：创建一个原始 SQL 查询，该查询将返回给定泛型类型的元素。该类型可以是任何具有与查询返回的列的名称相匹配的属性的类型，也可以是简单的原始类型。

我认为您能做的最好的事情就是创建自己的通用方法来通过经典`Command`和`ExecuteReader`模式查询数据库。未经测试，但你明白了：

```
public static IEnumerable<Tuple<T>> SqlQuery<T>(this DbContext context, string sql)
{
    using(var connection = new SqlConnection(context.Database.Connection.ConnectionString))
    using (var command = new SqlCommand(sql, connection))
    {
        var reader = command.ExecuteReader();
        while (reader.NextResult())
        {
            yield return new Tuple<T>((T)reader[0]);
        }
    }
}
public static IEnumerable<Tuple<T1, T2>> SqlQuery<T1, T2>(this DbContext context, string sql)
{
    using (var connection = new SqlConnection(context.Database.Connection.ConnectionString))
    using (var command = new SqlCommand(sql, connection))
    {
        var reader = command.ExecuteReader();
        while (reader.NextResult())
        {
            yield return new Tuple<T1, T2>((T1)reader[0], (T2)reader[1]);
        }
    }
} 
```

# azure - 我如何知道什么在使用大型 VHD？

> ID：16211244
> 
> 赞同：0
> 
> 时间：2013-04-25T09:34:22.907
> 
> 标签：azure

我在 Windows Azure 中运行一个虚拟机。它附有两个磁盘（OS 40GB 和 DATA 60GB）。

除了我的两个 VHD 之外，存储还有一个名为 dmzvyyq2.jja20130312104458.vhd 的 40GB VHD。

我想知道这个 VHD 是从哪里来的以及它在使用什么。令人惊讶的是，“最后修改”日期是昨天，所以一定有什么更新了它。我浏览了门户中的所有选项，但似乎没有附加此 VHD。

最终我想删除这个 VHD 以节省存储空间和成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:00:23.017

找出这一点的一种可能性是使用[`Storage Analytics`](http://msdn.microsoft.com/en-us/library/windowsazure/hh343270.aspx). 如果启用了存储分析，则可以查看`$logs`blob 容器的内容，下载相关数据的数据并检查此特定 blob 上的所有活动。您可以使用[`Azure Management Studio`](http://www.cerebrata.com)Cerebrata 之类的工具来查看存储分析数据。但是，如果您尚未对存储帐户启用分析，则很难找到该信息。

# yii - 双连接选择

> ID：16211257
> 
> 赞同：3
> 
> 时间：2013-04-25T09:35:13.437
> 
> 标签：yii

三张表**项目**、**用户**、**问题**。

*   项目表列：p_id,name,...
*   用户表列：u_id 用户名...
*   问题表列：i_id i_name...

关系：

*   项目有很多用户 - 1..*
*   项目有很多用户 - 1..*
*   项目有很多问题 - 1..*
*   用户有很多问题 - 1..*

我想做的事：

在 Yii 框架逻辑中：选择所有用户的项目，这些用户必须只有所选项目的问题。

在表逻辑中：选择某个项目**和**用户的问题。

我想模仿什么sql代码：

> SELECT Issue.i_name FROM Issue.i_id 上的加入项目 = Project.p_id 在 Issue.i_id 上加入用户 User.u_id

我想在 Yii 中做的事情：

```
//get Project
$model = Project::model()->findByPk( $p_id );
//get Project's users
$users = $model->users;
//get each of users issues of selected project
foreach( $users as $user ) 
    $issues = $user->issues; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T09:03:29.753

要解决这个问题，您必须在您的 ralations 方法中使用[through 。](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)

项目模型关系方法应如下所示：

```
public function relations()
    {
            return array(
                'users' => array(self::MANY_MANY, 'User', 'tbl_project_user_assignment(project_id, user_id)'),
                //'issues' => array(self::HAS_MANY, 'Issue', 'project_id'),
                'issues' => array(self::HAS_MANY,'Issue',array('id'=>'owner_id'),'through'=>'users'),

                'columns' => array(self::MANY_MANY, 'Column', 'tbl_project_rel_column(p_id,c_id)'),
            );
    } 
```

现在在行动中选择项目，它是所选项目的用户和用户的帖子（或在我的情况下为问题）：

```
 $project = Project::model()->with('users','issues')->findByPk(1);

            $users = $project->users;

            foreach($users as $user) {
                echo $user->username."<br/>";
            }

            $issues = $project->issues;

            foreach($issues as $issue) {
                echo $issue->name."<br/>";
            } 
```

# php - 我可以连接到 mysql db 但我的表没有更新

> ID：16211259
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:35:20.503
> 
> 标签：php, phpmyadmin

我能够连接到 mysql db，我在其中创建了一个名为 actuator_users 的表。我想知道我错过了什么或做错了什么？我在下面发布了我的功能代码。当我注册用户时，它确认成功，但表格没有更新。

```
<?php
  require_once('appvars.php');
  require_once('connectvars.php');

  // Connect to the database
  $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

  if (isset($_POST['submit'])) {
    // Grab the profile data from the POST
    $username = mysqli_real_escape_string($dbc, trim($_POST['username']));
    $firstname = mysqli_real_escape_string($dbc, trim($_POST['firstname']));
    $lastname = mysqli_real_escape_string($dbc, trim($_POST['lastname']));
    $firmname = mysqli_real_escape_string($dbc, trim($_POST['firmname']));
    $email = mysqli_real_escape_string($dbc, trim($_POST['email']));
    $password = mysqli_real_escape_string($dbc, trim($_POST['password']));
    $password2 = mysqli_real_escape_string($dbc, trim($_POST['password2']));

    if (!empty($username) && !empty($password) && !empty($password2) && ($password == $password2)) {
      // Make sure someone isn't already registered using this username
      $query = "SELECT * FROM attorney_users WHERE username = '$username'";
      $data = mysqli_query($dbc, $query);
      if (mysqli_num_rows($data) == 0) {
        // The username is unique, so insert the data into the database
        $query = "INSERT INTO attorney_users (username, firstname, lastname, firmname, email, password, date) VALUES ('$username', '$firstname', '$lastname', $firmname, $email, SHA('$password'), NOW())";
        mysqli_query($dbc, $query);

        // Confirm success with the user
        echo '<p>Your new account has been successfully created. You\'re now ready to <a href="index.php">log in</a>.</p>';

        mysqli_close($dbc);
        exit();
      }
      else {
        // An account already exists for this username, so display an error message
        echo '<p class="error">An account already exists for this username. Please use a different username.</p>';
        $username = "";
      }
    }
    else {
      echo '<p class="error">You must enter all of the sign-up data, including the desired password twice.</p>';
    }
  }

  mysqli_close($dbc);
?>
<div id="main-wrapper">
            <div id="register-wrapper">
                <form method="post" action = "<?php echo $_SERVER['PHP_SELF'];?>">
                <fieldset>
                    <ul>
                         <label for="username">Username : </label>
                         <input type="text" id="username" name = "username" value = "<?php if (!empty($username)) echo $username; ?>"  />

                         <label for="firstname">First Name : </label>
                         <input type="text" id="firstname"  name = "firstname"  />

                         <label for="lastname">Last Name : </label>
                         <input type="text" id="lastname"  name = "lastname" />

                         <label for="firmn">Firm Name : </label>
                         <input type="text" id="firmname"  name = "firmname" />

                         <label for="email">Email : </label>
                         <input type="text" id="email"  name = "email"  />

                         <label for="password">Password : </label>
                         <input type="password" id="password"  name="password" />

                         <label for="password2">Verify Password : </label>
                         <input type="password" id="password2"  name="password2" />

                        </li>
                        <li class="buttons">
                         <input type="submit" value="Register" name="submit"  />
                            <input type="button" name="cancel" value="Cancel" onclick="location.href='index.php'" />
                     </li>
                    </ul>
                </fieldset>
                </form>
            </div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:41:48.320

更改您的 $query 从

```
$query = "INSERT INTO attorney_users (username, firstname, lastname, firmname, email, password, date) VALUES ('$username', '$firstname', '$lastname', $firmname, $email, SHA('$password'), NOW())"; 
```

至

```
$password = SHA1($password);  
$query = "INSERT INTO attorney_users (`username`, `firstname`, `lastname`, `firmname`, `email`, `password`, `date`) VALUES ('{$username}', '{$firstname}', '{$lastname}', '{$firmname}', '{$email}', '{$password}', NOW())"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:36:55.390

`date`在 中保留`mysql`，在列名周围使用 `

```
$query = "INSERT INTO attorney_users (`username`, `firstname`, 
`lastname`, `firmname`, `email`, `password`, `date`) 
VALUES ('$username', '$firstname', '$lastname', $firmname, 
$email, SHA('$password'), NOW())"; 
```

以及为什么要使用`mysqli_real_escape_string`转义，您可以在此处使用准备好的语句。

**编辑**

使用它来检查查询中的错误

```
$data = mysqli_query($dbc, $query) or die(mysqli_error()); 
```

# embed - 更改嵌入 Spotify 播放列表中的曲目顺序

> ID：16211263
> 
> 赞同：0
> 
> 时间：2013-04-25T09:35:38.340
> 
> 标签：embed, spotify, playlist

在我的 Facebook 上，我有一个 spotify 的嵌入播放器，它工作正常，但播放列表的顺序不正确，最旧的曲目在顶部，最新的在底部。有没有办法反过来改变这个？

我希望能收到你的答复。提前致谢。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:50:02.627

播放按钮小部件以播放列表的规范顺序显示曲目，并且不*遵守*您在桌面客户端中应用的任何自定义排序。要在桌面客户端中查看此规范顺序，请单击已排序的列标题，直到它不再以白色突出显示。

# c# - 检查 SELECT 语句条件是否为真

> ID：16211264
> 
> 赞同：3
> 
> 时间：2013-04-25T09:35:39.290
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

```
string  test = "SELECT count(*) FROM table where email=@email AND active=@active"; 
```

您好，是否可以使用 C# 来检查两个条件是否为真或只有一个条件为真？

```
int count = testCMD.ExecuteNonQuery(); 
```

我已经尝试使用上面的代码，但我不确定我是否理解它是如何工作的。只有当两个条件都为真时才会计数为 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:37:31.433

Count 将返回两个条件都为真的结果数。如果要检查其中一个，请使用 OR 而不是 AND。

[数数](http://msdn.microsoft.com/en-us/library/ms175997.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:37:55.570

> 只有当两个条件都为真时才会计数为 1？

**是**的。您在查询中使用`AND`运算符。

> 是否可以使用 C# 检查两个条件是否为真，或者其中一个条件是否为真？

通过上述查询，**否**。你不能。您需要为每个参数创建两个不同的查询，或者使用`OR`operator inplace of`AND`来查看其中一个条件是否为真。但是`OR`你不能确定哪一个是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:39:48.407

尝试：

```
string test = "
    select COUNT(*) from(
        select case when (SELECT count(*) FROM table where email=@email AND active=@active)>0 then 1 else null end Num
        union all
        select case when (SELECT count(*) FROM table where email=@email OR active=@active)>0 then 1 else null end Num
    )x where Num is not null" 
```

如果两个条件都为真，则返回 2，如果其中任何一个条件为真，则返回 1，如果两个条件都为假，则返回 0。

并使用`ExecuteScalar()` 代替`ExecuteNonQuery()`（返回影响的行数）。

```
i.e. int count  = (Int32)testCMD.ExecuteScalar(); 
```

# jquery - 使用行跨度对表进行排序

> ID：16211265
> 
> 赞同：1
> 
> 时间：2013-04-25T09:35:40.490
> 
> 标签：jquery, datatables, tablesorter

我是法国人，所以请不要害怕我的句子错误。

我正在尝试对包含带有 rowspan 的单元格的选项卡进行排序：

但是对于数据表或表排序器，我不知道是否可能。你知道我怎么能用tablesorter ou datatables做到这一点吗？你知道另一个可以做到这一点的插件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:32:27.810

你可以使用这个插件： 1\. [http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T20:15:43.657

我最终修改了这个实现：

[https://github.com/Mottie/tablesorter/issues/806](https://github.com/Mottie/tablesorter/issues/806)

```
 $('#results-table').bind("sortEnd updateComplete",function(e, table) {
    $(table).find("[data-row]").each(function(idx, parent){
        var $parent = $(parent);
        var $rows = $(table).find('[data-parent="'+$parent.data('row')+'"]');

        $rows.after($parent);
        $rows.show();
    });
}); 
```

我将`data-parent`属性设为父 tr 的数据属性。然后是我给`data-row`attr 的子行。

这保留了组内的顺序，并且仅按组中的第一行进行分组。

例如看这个小提琴：http: [//jsfiddle.net/djhqmt92/](http://jsfiddle.net/djhqmt92/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T08:22:25.300

要添加到 Aju M T 的答案，我必须做一个表，其中行跨度位于第一个 TD 上，因此此修复程序不适用于这样的表：

[http://jsfiddle.net/S4872/](http://jsfiddle.net/S4872/)

它有助于在表格前面添加一个虚拟 TD 并添加 CSS

```
dummy-tab {
   display: none;
} 
```

像这样：

[http://jsfiddle.net/S4872/2/](http://jsfiddle.net/S4872/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T17:51:49.383

> **“jQuery tablesorter - 标题中的行跨度导致奇怪的行为”**

当我用 tablesorter 面对它时，我自己发现了这个问题，当然是通过谷歌搜索。现在它运行良好。

```
 var headers = {};
headers[0]={ sorter: false };
var tds={}
  $('table').tablesorter({
    headers: headers
  });
    $("table").bind("sortStart",function() { 
        $('table tbody tr:first td').each(function(i,h){
            if (this.rowSpan>1) { 
                $(this).css('background','#CCC');
                headers[i] = { sorter: false }; 
                tds[i]=h;
                h.remove()
            }
          });
    }).bind("sortEnd",function() { 
        $.each(tds,function(i,td){
            $('table tbody tr:first td:eq('+(i-1)+')').after(td);
        });
        $('table tbody tr').each(function(i,tr){
            $('td:first',tr).html(i+1);
        });
    }); 
```

[jsfiddle 示例](http://jsfiddle.net/ajumt/8Ynnq/)

# windows - 有没有办法阻止 SQL*Plus 在 Control-C 上退出？

> ID：16211267
> 
> 赞同：1
> 
> 时间：2013-04-25T09:35:50.690
> 
> 标签：windows, oracle, sqlplus

我在 Windows 上使用 SQL*Plus，并且不小心按了 Ctrl-C，这会导致 SQL*Plus 退出。有什么办法可以防止这种情况发生吗？

到目前为止，我发现的最佳解决方法是按照[此处](http://yong321.freeshell.org/oranotes/SqlplusSetup.html)`cmd.exe /k`的建议在命令前添加，这至少使提示保持打开状态，以便您仍然可以看到以前的命令和结果。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-25T10:02:14.553

```
start /b sqlplus.exe scott/tiger @script.sql 
```

# javascript - localStorage 问题 - 未显示的项目 (JSON/JQUERY)

> ID：16211276
> 
> 赞同：0
> 
> 时间：2013-04-25T09:36:30.003
> 
> 标签：javascript, jquery, json, html, local-storage

我正在尝试获取和排序 localStorage 中的所有项目并将其输出到 HTML 页面。

这就是我正在做的事情：

```
 <script>

    function ShoppingCart() {

        var totalPrice = 0;
        var output;
        var productName;
        var productAlbum;
        var productQuantity;
        var productPrice;
        var productSubTotal = 0;
        var totalPrice;

        for (var i = 0; i < localStorage.length-1; i++){

            var keyName = localStorage.key(i);
            if(keyName.indexOf('Product_')==0) // check if key startwith 'Product_'
            {
                var product =  localStorage.getItem('Product_'+i);

                var result = JSON.parse(product);

                var productName;
                var productAlbum;
                var productQuantity;
                var productPrice;
                var productSubTotal = 0;
                var totalPrice;

                productName = result.name
                productAlbum = result.album;
                productQuantity = result.quantity;
                productPrice = parseFloat(result.price).toFixed(2);
                productSubTotal = parseFloat(productQuantity * productPrice).toFixed(2);

                outputName = "<div id='cart-table'><table><tr><td><b>NAME: </b>" + productName + "</td></tr></div>" ;
                outputAlbum = "<tr><td><b>ALBUM: </b>" + productAlbum + "</td></tr>" ;
                outputQuantity = "<tr><td><b>QUANTITY: </b>" + productQuantity + "</td></tr>";
                outputPrice = "<tr><td><b>PRICE: </b> EUR " + productPrice + "</td></tr>";
                outputSubTotal = "<tr><td><b>SUB-TOTAL: </b> EUR " + productSubTotal + "</td></tr></table><br><br>";

                var outputTotal = "<table><tr><td><b>TOTAL:</b> EUR " + totalPrice + "</td></tr></table>";
                var TotalOutput = outputName + outputAlbum + outputQuantity + outputPrice + outputSubTotal + outputTotal;
                document.getElementById("Cart-Contents").innerHTML=TotalOutput;

            }
            }

            alert(TotalOutput);

    }

    window.onload = ShoppingCart;

</script> 
```

唯一正在输出的项目是 localStorage 中名为“Proudct_0”的项目。其他不显示！

这就是我在 localStorage 中所拥有的：http: [//i.imgur.com/sHxXLOL.png](http://i.imgur.com/sHxXLOL.png)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:51:36.743

你的代码有问题。如果 Product_0 不在 localStorage 中，你怎么看？

```
var product =  localStorage.getItem('Product_'+i);
var result = JSON.parse(product); 
```

可能为 null 并引发错误。

尝试这个：

```
for (var i = 0; i < localStorage.length-1; i++){
     var keyName = localStorage.key(i);
     if(keyName.indexOf('Product_')==0) // check if key startwith 'Product_'
     {
        var product = localStorage.getItem(keyName);
        //do your code here
     }
} 
```

# 更新

```
document.getElementById("Cart-Contents").innerHTML=TotalOutput; 
```

它是替换，而不是附加

希望这有帮助！

# java - 调用目标异常

> ID：16211277
> 
> 赞同：1
> 
> 时间：2013-04-25T09:36:33.860
> 
> 标签：java, swing, applet, japplet

这是我的程序的代码

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class JAdapterOkno extends WindowAdapter {

    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
}

class CalcButton extends JButton implements ActionListener {

    Kontroler k;

    CalcButton(Kontroler k, String nazwa, int s) {
        super(nazwa);
        this.k = k;
        setFocusable(false);
        this.setFont(new Font("Tahoma", Font.BOLD, s));
        addActionListener(this);
    }

    public void actionPerformed(ActionEvent er) {
        k.dopisz(this);
    }
}

class InfoButton extends JButton implements ActionListener {

    Kontroler k;

    InfoButton(Kontroler k, int s) {
        super("Info");
        this.k = k;
        setFocusable(false);
        addActionListener(this);
        this.setFont(new Font("Tahoma", Font.BOLD, s));
    }

    public void actionPerformed(ActionEvent err) {
        k.info();
    }
}

class ClearButton extends JButton implements ActionListener {

    Kontroler k;

    ClearButton(Kontroler k, int s) {
        super("C");
        this.k = k;
        setFocusable(false);
        addActionListener(this);
        this.setFont(new Font("Tahoma", Font.BOLD, s));
    }

    public void actionPerformed(ActionEvent errr) {
        k.clear();
    }
}

class Wyswietlacz extends JTextPane implements KeyListener {

    Kontroler z;

    Wyswietlacz(Kontroler zz, int k) {
        super();
        z = zz;
        setFocusable(true);
        setEditable(false);
        this.setFont(new Font("Tahoma", Font.PLAIN, k));
        addKeyListener(this);
    }

    public void keyPressed(KeyEvent evt) {
        char c = evt.getKeyChar();
        if (c == '0' || c == '1') {
            if (z.LorP) {
                if (z.Lwyr.length() < 16) {
                    z.Lwyr.append(c);
                }
            } else {
                if (z.Pwyr.length() < 16) {
                    z.Pwyr.append(c);
                }
            }
        } else {
            if (z.sign == '2' && c != '=' && z.Lwyr.length() != 0) {
                z.LorP = false;
                z.sign = c;
            }
            if (z.sign != '2' && c == '=') {
                z.eval(true);
            }
        }
        z.eval(false);
        StringBuilder fin = new StringBuilder(z.Lwyr);
        if (z.sign != '2') {
            fin.append(z.sign);
            fin.append(z.Pwyr);
        }
        setText(fin.toString());
    }

    public void keyReleased(KeyEvent evt) {
        ;
    }

    public void keyTyped(KeyEvent evt) {
        ;
    }
}

public class Kontroler extends JApplet {

    JMenuBar menuBar;
    /**
     * < Zmienna menubar
     */
    JMenu menu;
    /**
     * < zmienna menu
     */
    JMenuItem menuItem;
    /**
     * < zmienna element menu
     */
    StringBuilder Lwyr;
    /**
     * < zmienna lewe wyrazenie obliczenia
     */
    StringBuilder Pwyr;
    /**
     * < zmienna prawe wyrazenie obliczenia
     */
    final int modulo = (int) Math.pow(2.0, 15.0);
    /**
     * < stala
     */
    char sign;
    /**
     * < dzialanie
     */
    Boolean LorP;
    int x;
    int y;
    CalcButton inf;
    /**
     * < przycisk gui
     */
    CalcButton zero;
    /**
     * < przycisk gui
     */
    CalcButton one;
    /**
     * < przycisk gui
     */
    CalcButton add;
    /**
     * < przycisk gui
     */
    CalcButton sub;
    /**
     * < przycisk gui
     */
    CalcButton div;
    /**
     * < przycisk gui
     */
    CalcButton mlt;
    /**
     * < przycisk gui
     */
    CalcButton modu;
    /**
     * < przycisk gui
     */
    ClearButton blank;
    /**
     * < przycisk gui
     */
    Wyswietlacz wys;
    /**
     * < wyswietlacz
     */
    JPanel przyciski;
    /**
     * < panel guzikow
     */
    JPanel calosc;

    /**
     * < panel
     */
    /**
     * metoda inicjalizujaca applet
     */
    public void st() {
        menuBar = new JMenuBar();
        menu = new JMenu("informacje");
        menuItem = new JMenuItem("Info");
        menuItem.addActionListener(
            new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                info();
            }
        });
        menuBar.add(menu);
        menu.add(menuItem);
        setJMenuBar(menuBar);
        float xx = x / 240;
        float yy = y / 320;
        int avg = (int) ((xx + yy) / 2);
        System.out.println(modulo);
        setPreferredSize(new Dimension(x, y));
        inf = new CalcButton(this, "=", 15 * avg);
        zero = new CalcButton(this, "0", 15 * avg);
        one = new CalcButton(this, "1", 15 * avg);
        add = new CalcButton(this, "+", 15 * avg);
        sub = new CalcButton(this, "-", 15 * avg);
        div = new CalcButton(this, "/", 15 * avg);
        mlt = new CalcButton(this, "*", 15 * avg);
        modu = new CalcButton(this, "%", 15 * avg);
        blank = new ClearButton(this, 20 * avg);
        wys = new Wyswietlacz(this, 15 * avg);
        wys.setPreferredSize(new Dimension(x, (int) (y / 4)));
        przyciski = new JPanel();
        przyciski.setPreferredSize(new Dimension(x, x));
        przyciski.setLayout(new GridLayout(3, 3));
        przyciski.add(zero);
        przyciski.add(one);
        przyciski.add(add);
        przyciski.add(sub);
        przyciski.add(mlt);
        przyciski.add(div);
        przyciski.add(modu);
        przyciski.add(inf);
        przyciski.add(blank);
        przyciski.setFocusable(false);
        calosc = new JPanel();
        calosc.setLayout(new BoxLayout(calosc, BoxLayout.Y_AXIS));
        calosc.add(wys);
        calosc.add(przyciski);
        calosc.setPreferredSize(new Dimension(x, y));
        calosc.setFocusable(false);
        add(calosc);
        setFocusable(false);
    }

    public void init() {
        st();
    }

    public void destroy() {
        ;
    }

    public void stop() {
        ;
    }

    Kontroler() {
        this.Lwyr = new StringBuilder();
        this.Pwyr = new StringBuilder();
        this.sign = '2';
        this.LorP = true;
        this.x = 240;
        this.y = 320;

    }

    Kontroler(int x, int y) {
        if (x < 240 || y < 320) {
            JOptionPane.showMessageDialog(null,
                "Program nie dziala przy tak malej wielkosci okna");
            System.exit(0);
        }
        this.Lwyr = new StringBuilder();
        this.Pwyr = new StringBuilder();
        this.sign = '2';
        this.LorP = true;
        this.x = x;
        this.y = y;
    }

    void info() {
        JOptionPane.showMessageDialog(null, "Calc v1.1");
    }

    void dopisz(CalcButton c) {
        String actual = c.getText();
        char ac = actual.charAt(0);
        if (ac == '0' || ac == '1') {
            if (LorP) {
                if (Lwyr.length() < 16) {
                    Lwyr.append(ac);
                }
            } else {
                if (Pwyr.length() < 16) {
                    Pwyr.append(ac);
                }
            }
        } else {
            if (sign == '2' && ac != '=' && Lwyr.length() != 0) {
                LorP = false;
                sign = ac;
            }
            if (sign != '2' && ac == '=') {
                eval(true);
            }
        }
        eval(false);
        StringBuilder fin = new StringBuilder(Lwyr);
        if (sign != '2') {
            fin.append(sign);
            fin.append(Pwyr);
        }
        c.k.wys.setText(fin.toString());
    }

    void clear() {
        this.Lwyr = new StringBuilder();
        this.Pwyr = new StringBuilder();
        this.wys.setText("");
    }

    void eval(Boolean t) {
        int l;
        int p;
        if (Lwyr.length() == 0) {
            return;
        }
        if (t || (Lwyr.length() == 16 && Pwyr.length() == 16 && sign != '2')) {
            if (Pwyr.length() == 0) {
                Pwyr = Lwyr;
            }
            l = Integer.parseInt(Integer.valueOf(this.Lwyr.toString(), 2).toString());
            p = Integer.parseInt(Integer.valueOf(this.Pwyr.toString(), 2).toString());
            if (l == 0 && p == 0) {
                Lwyr = new StringBuilder();
                Pwyr = new StringBuilder();
                sign = '2';
                this.LorP = true;
            }
            switch (this.sign) {
                case '+':
                    this.Lwyr = new StringBuilder(Integer.toString((l + p) % modulo, 2));
                    break;
                case '-':
                    this.Lwyr = new StringBuilder(Integer.toString((l - p) % modulo, 2));
                    break;
                case '*':
                    this.Lwyr = new StringBuilder(Integer.toString((l * p) % modulo, 2));
                    break;
                case '/':
                    this.Lwyr = new StringBuilder(Integer.toString((l / p) % modulo, 2));
                    break;
                case '%':
                    this.Lwyr = new StringBuilder(Integer.toString((l % p) % modulo, 2));
                    break;
            }
            Pwyr = new StringBuilder();
            sign = '2';
            this.LorP = true;
        }

    }

    /**
     * Metoda main
     */
    public static void main(String[] args) {
        JFrame f = new JFrame();
        Kontroler k;
        if (args.length == 0) {
            k = new Kontroler();
            f.add(k);
            k.init();
        } else {
            k = new Kontroler(Integer.parseInt(args[0]), Integer.parseInt(args[1]));
            f.add(k);
            k.init();
        }
        f.pack();
        f.setVisible(true);
        f.setResizable(false);
    }
} 
```

这是完整的例外

```
basic: exception: java.lang.reflect.InvocationTargetException.
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.runOnEDTAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.instantiateApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
    at com.sun.deploy.uitoolkit.impl.awt.OldPluginAWTUtil.invokeAndWait(Unknown Source)
    ... 5 more
Caused by: java.lang.RuntimeException: java.lang.IllegalAccessException:
    Class com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter$1 can not
        access a member of class Kontroler with modifiers ""
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter$1.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.IllegalAccessException:
    Class com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter$1 can not
        access a member of class Kontroler with modifiers ""
    at sun.reflect.Reflection.ensureMemberAccess(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    ... 20 more 
```

当我“正常”运行时，它可以工作；但是当我尝试在 Web 浏览器中将它作为小程序运行时，我收到调用目标异常？我的错误在哪里？我实际上看不到异常从哪里开始，因为我在 Java 控制台中没有任何详细信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:13:13.363

异常的根本原因`IllegalAccessException`，提示快速查看[*小程序可以做什么和不能做什么*](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)，但您的小程序似乎没有*违反*沙箱。

运行 with `appletviewer`，如此处所示，显示[以下](https://stackoverflow.com/a/7455066/230513)错误，通过`Kontroler`构造构造函数解决`public`。

```
load：Kontroler 不是公共的或没有公共构造函数。
java.lang.IllegalAccessException: 类 sun.applet.AppletPanel 不能
    使用修饰符“”访问类 Kontroler 的成员
...

```

此外，

*   使用[*Key Bindings*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)和[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，如图[所示](https://sites.google.com/site/drjohnbmatthews/keypad-panel)。

*   考虑*构建*混合小程序/应用程序的替代方法，如下[所示](https://stackoverflow.com/a/12449949/230513)。

*   考虑*部署*混合小程序/应用程序的替代方法，如下[所示](https://stackoverflow.com/tags/java-web-start/info)。

*   不要使用[`setPreferredSize()`](https://stackoverflow.com/q/7229226/230513).

# android - android中的最大BackStack大小

> ID：16211279
> 
> 赞同：2
> 
> 时间：2013-04-25T09:36:37.263
> 
> 标签：android, back-stack, java-memory-model

我是android开发的新手。我需要知道*android*中**BackStack**的**最大内存大小** 我想知道有多少**Android 应用程序**的**活动**可以**存储在 BackStack 中**

 *******谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:44:07.450

后台堆栈的最大内存大小与设备上的可用内存量相同。您可以继续在活动堆栈上扔东西，直到收到 OutOfMemoryException。
检查[这个](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/MvQ_rctYq2I)*******

# zend-framework2 - 如何在表单提交时将错误消息从控制器操作传递到表单。

> ID：16211280
> 
> 赞同：0
> 
> 时间：2013-04-25T09:36:38.763
> 
> 标签：zend-framework2

创建表单时，表单验证很容易。但是如何验证提交的数据并将错误消息传递回表单。

例如我有一个密码更改表单，所以我需要验证旧密码并检查新密码和确认密码是否相同，并且在失败阶段，在密码编辑表单上显示消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:41:12.850

您的意思是在您的视图脚本中？

```
<?php if ($form->getMessages()){
    // alert
    ?>
    <div class="alert alert-error">
        <button class="close" data-dismiss="alert" type="button">×</button>
        <strong><?php echo $this->translate("Are you awake ?"); ?></strong>
        <?php echo $this->translate("Some data are not filled out correctly."); ?>
    </div>       
    <?php
}?> 
```

**在从$form->getMessages()**打印错误之后

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:42:00.693

如果设置正确，表单将为您执行此操作。表单将运行验证检查，然后您可以使用 formElementErrors 视图助手来消除错误。你能粘贴一些你的表单是如何设置的代码吗？

表单视图中显示验证错误的示例：

```
<?php $form->prepare() ?>
<?php echo $this->form()->openTag($form); ?>
    <?php foreach($form->getElements() as $element): ?>
        <div class="control-group">
        <?php /* @var $element \Zend\From\Element */ ?>
        <?php if($element->getLabel()): ?>
             <?php echo $this->formLabel($element) ?>
        <?php endif ?>
        <?php // Show any validation errors for this element ?>
        <?php echo $this->formElementErrors($element); ?>
        <?php echo $this->formElement($element) ?>
        </div>
    <?php endforeach ?>
<?php echo $this->form()->closeTag() ?> 
```**

# java - 子模块中使用的文件路径不正确

> ID：16211290
> 
> 赞同：0
> 
> 时间：2013-04-25T09:37:00.133
> 
> 标签：java, spring, maven

一个为我的同事工作的多模块项目对我来说失败了。在引用文件的任何测试期间以及在引用文件时在弹簧配置文件中都会出现问题。引用从不包含子模块文件夹名称，或者完整文件路径无法正确解析。

例如`ParentProject`是父模块，`ChildProject`是子模块。

```
ParentProject
    - ChildProject
        - src/test/java/my/package/MyTest.java
        - src/test/resources
            - xml/myfile.xml
            - myProperties.properties
            - mySpringConfig.xml 
```

如果我有以下内容`MyTest.java`：

```
File file = new File("src/test/resources/xml/myfile.xml");
String absolutePath = file.getAbsolutePath(); 
```

然后`absolutePath`是`C:\ParentProject\src\test\resources\xml\myfile.xml`不正确的，因为它缺少`ChildProject`文件夹，所以它抛出一个`FileNotFoundException`.

在 spring 配置文件中提到任何属性文件都会遇到同样的问题，例如在 `mySpringConfig.xml`我有以下行：

```
<context:property-placeholder location="classpath:myProperties.properties" system-properties-mode="OVERRIDE"/> 
```

但是在尝试构建项目时，我得到：

```
IllegalStateException: Failed to load ApplicationContext
Caused by: org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: src\test\resources\myProperties.properties (The system cannot find the path specified) 
```

我觉得这是一个类路径问题。我已经设置了 maven 3.0.3 并使用已安装的 java 版本（用 验证`mvn -version`）。从命令行来看，java 和 javac 版本都是正确的。

有任何想法吗？

为调试添加了完整的 -X 输出：

```
[25/04/13 13:45:21:812 BST] [main] ERROR org.springframework.test.context.TestContextManager: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@a166bd] to prepare test instance [my.package.MyTest@60029d]
java.lang.IllegalStateException: Failed to load ApplicationContext
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
        at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
        at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
        at $Proxy0.invoke(Unknown Source)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)
Caused by: org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: src\test\resources\myProperties.properties (The system cannot find the path specified)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
        at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
        ... 32 more
Caused by: java.io.FileNotFoundException: src\test\resources\myProperties.properties (The system cannot find the path specified)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at java.io.FileInputStream.<init>(FileInputStream.java:66)
        at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70)
        at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
        at org.springframework.core.io.UrlResource.getInputStream(UrlResource.java:124)
        at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
        at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
        at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:69)
        ... 39 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:48:44.083

您示例中的代码是正确的；Maven 在构建项目时通常会更改为子目录，因此问题肯定出在其他地方。

当您查看 时`absolutePath`，您会发现这不会发生。就好像“某人”正在尝试`ChildProject`从`ParentProject`.

要了解发生了什么，您可以尝试运行 Maven`-X`以打开调试。还要确保`ChildProject`使用`module`元素在父 POM 中正确引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:45:20.470

您正在阅读这样的文件的原因是什么？

我相信该文件捆绑在项目 jar 中。

在这种情况下，您可以将其作为类路径资源阅读 -`Thread.currentThread().getContextClassLoader().getResourceAsStream("xml/myfile.xml")`

# javascript - 选择框中的 Javascript for 循环

> ID：16211294
> 
> 赞同：0
> 
> 时间：2013-04-25T09:37:10.927
> 
> 标签：javascript, html

我有一个包含一些输入字段的表单的网页，其中一个是列表框。在这个列表框中，我必须添加（按新月顺序）从 40000 到 99999 的数字，并且每次增加 1000。

示例：40000 - 41000 - 42000 - 43000 ... 97000 - 98000 - 99000 - 99999

我写了一个 Javascript 函数，但它不起作用。在这里你可以看到 HTML 代码：

```
<fieldset style="width:500px;">
<legend><font color="#D8D8D8"><b>Required Fields</b></font></legend>
<font color="#FFFFFF"><b>Player's Name</b>:</font> <input type="text" name="nome" />
<font color="#FFFFFF"><b>VRs</b>:</font> <select name="cognome">
</select> <br />
</fieldset> 
```

这是javascript函数

```
<script>
var i=40000

for(i;i<42000;i=i+1000)
{var select = document.getElementById("cognome");
select.options[select.options.length] = new Option(i, i)}
}
</script> 
```

我的问题是任何数据都出现在列表框中。你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:41:58.287

你正在使用`getElementById`，所以你需要一个 id：

```
<select id="cognome" name="cognome"> 
```

还有括号需要匹配的语法错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:42:29.213

查看您的javascript错误控制台，您放错了 a`}`而不是 a `)`，请参阅：

```
select.options[select.options.length] = new Option(i, i}
                              THIS SHOULD BE A ')'-----^ 
```

还在其他答案中添加`id`as louisbros 评论..

查看[**工作演示**](http://tinker.io/94512)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:44:55.673

使用上面的评论：

*   添加一个`id="cognome"`

*   纠正括号。

有一个 JFiddle 在这里工作：

[http://jsfiddle.net/WEd84/](http://jsfiddle.net/WEd84/)

# ruby-on-rails - 在 Heroku 中应该选择哪个数据库？

> ID：16211299
> 
> 赞同：0
> 
> 时间：2013-04-25T09:37:25.800
> 
> 标签：ruby-on-rails, database, heroku

我想将数据库迁移到[Heroku](http://en.wikipedia.org/wiki/Heroku)。旧数据库导出到一些[JSON](http://en.wikipedia.org/wiki/JSON)文件，但是现在不知道如何在Heroku中选择数据库。

我的问题是：

*   数据一直在增加，所以未来会有很多数据。哪个数据库可用于此？
*   我只能从旧数据库中获取 JSON 文件。可以导入 Heroku 数据库吗？
*   我的用户主要在美国。Heroku中的数据库是否会导致用户访问速度变慢？
*   我的项目正在使用[Ruby on Rails](http://en.wikipedia.org/wiki/Ruby_on_Rails)。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:52:20.387

最好指定当前用于应用程序的数据库。如果您提供更多信息，我将更新我的答案。

但首先，阅读*[将 Rails 应用程序迁移到 Heroku](http://webandy.com/articles/26-moving-a-rails-app-to-heroku)*文章将对您将应用程序迁移到 Heroku 有很大帮助。

1.  Heroku 有来自其他提供商的插件。他们提供的唯一数据库是[PostgreSQL](http://en.wikipedia.org/wiki/PostgreSQL)，它非常好，适用于多种应用程序。这真是太棒了。
2.  阅读上面提到的文章。
3.  如果您在 Heroku 中创建应用程序，默认情况下它将位于美国。我不知道 Heroku 是否针对您的应用程序和插件的位置进行了优化，但通常如果您的应用程序出现缓慢的问题，那是您的错，而不是 Heroku 的。
4.  是的！Heroku 喜欢 Ruby on Rails

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:07:30.850

首先，Heroku 提供[PostgreSQL](http://en.wikipedia.org/wiki/PostgreSQL)作为默认数据库。使用它可能是以下原因。

1.  PostgreSQL 是一个功能强大的开源对象关系数据库系统。

2.  Heroku Postgres 是由 Heroku 运行的 SQL 数据库服务，以`add-on`.

3.  Heroku Postgres 可以从任何具有 PostgreSQL 驱动程序的语言访问，包括 Heroku 支持的所有语言和框架：Java、Ruby、Python、[Scala](http://en.wikipedia.org/wiki/Scala_%28programming_language%29)、Play、[Node.js](http://en.wikipedia.org/wiki/Node.js)和[Clojure](http://en.wikipedia.org/wiki/Clojure)。

有关更多信息，您可以参考此[http://www.postgresql.org/about/advantages/](http://www.postgresql.org/about/advantages/)。

# git - 使用 git flow，我将如何恢复到以前的版本？

> ID：16211304
> 
> 赞同：11
> 
> 时间：2013-04-25T09:37:36.473
> 
> 标签：git, version-control, git-flow

我正在为我的项目使用 git flow。当一个发布被合并到主分支时，它被标记为发布版本（例如 1.2.0）并部署到我的生产服务器上。

现在我想**快速恢复到以前的发布标签**（例如 1.1.0），因为部署不应该发生。

阐述：

*   我将 1.2.0 发布分支合并到主分支。
*   我用 1.2.0 标记主分支。
*   我将本地仓库推送到原点。
*   我的结论是我发布得太早了。
*   我想恢复到它被标记为 1.1.0 的 master 状态。
*   我也希望 master @ origin 恢复到 1.1.0 状态。

![在此处输入图像描述](https://i.stack.imgur.com/HMERh.png)

**我该怎么做？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T12:15:38.513

假设您想保留历史记录，但撤消 1.2.0 版本所做的更改。使用[git-revert](https://www.kernel.org/pub/software/scm/git/docs/git-revert.html)创建一个新的提交来恢复 1.2.0 所做的一切：

```
git checkout master
git revert HEAD 
```

# dojo - 如何从旧的 dojo 迁移到新的 dojo AMD 加载程序？

> ID：16211307
> 
> 赞同：1
> 
> 时间：2013-04-25T09:37:42.760
> 
> 标签：dojo, require, amd, migrate

我想从旧的 dojo.require 加载程序迁移到新的 AMD 加载程序，所以我改变了这个：

```
 dojo.require("dojo._base.xhr");
        dojo.require("dojox.mobile.parser");
        dojo.require("dojox.mobile");
        dojo.require("dojox.mobile.ScrollableView");
        dojo.require("dojox.mobile.TabBar");
        dojo.require("dojox.mobile.TextBox");
        dojo.require("dojox.mobile.compat");
        dojo.require("dojox.mobile.deviceTheme");
        dojo.require("dojox.mobile.TabBarButton");
        dojo.require("dojox.mobile.View");
        dojo.require("dojox.mobile.Button");
        dojo.require("dojox.mobile.Switch");
        dojo.require("dojo.on");
        dojo.require("dijit.registry");
        dojo.require("dojo.aspect");
        dojo.require("dojo.ready");
        dojo.require("dojox.mobile.ListItem");
        dojo.require("dojo.dom");
        dojo.require("dojo.request");
        dojo.require("dojo.dom-construct");
        dojo.require("dojo.domReady!");
CODE 
```

对此：

```
require(["dojo/_base/xhr","dojox/mobile/parser","dojox/mobile","dojox/mobile/ScrollableView","dojox/mobile/TabBar","dojox/mobile/TextBox","dojox/mobile/compat","dojox/mobile/deviceTheme","dojox/mobile/TabBarButton","dojox/mobile/View","dojox/mobile/Button","dojox/mobile/Switch","dojo/on","dijit/registry","dojo/aspect","dojo/ready","dojox/mobile.ListItem","dojo/dom","dojo/request","dojo/dom-construct","dojo/domReady!"],
    function(xhr,parser,mobile,ScrollableView,TabBar,TextBox,compat,deviceTheme,TabBarButton,View,Button,Switch,on,registry,aspect,ready,ListItem,dom,request){CODE}) 
```

这是正确的方法吗？我有一些其他脚本文件，我简单地加载了如何使用新的 AMD 加载程序处理它们？

我对所有编程的东西都很陌生，所以请对我温柔:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:17:12.870

尝试使用 sitepen 的全新转换器。在这里阅读：[http ://www.sitepen.com/blog/2013/04/03/introducing-dojo-amd-converter/](http://www.sitepen.com/blog/2013/04/03/introducing-dojo-amd-converter/)

# c# - 如何使用 dropnet 上传到 Dropbox？

> ID：16211310
> 
> 赞同：0
> 
> 时间：2013-04-25T09:37:52.023
> 
> 标签：c#, dropnet

我正在使用 DropNet。我在将文件上传到 DropBox 时遇到问题。我确信与保管箱的连接很好。当我更改上传方法以创建文件和删除文件方法时效果很好。我真的看不出有什么问题，为什么不上传？我使用与 DropNet 完全相同的 API。

```
protected void Btn_upload_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            if (Session["DropNetUserLogin"] != null)
            {
                try
                {
                    _client.UseSandbox = true;
                    _client.UploadFile("/", FileUpload1.FileName, FileUpload1.FileBytes);
                }
                catch (Exception ex)
                {
                    litOutput.Text = "Error in upload user login in session " + ex.Message;
                }
            }
            else
            {
                litOutput.Text = "Session expired...";
            }
        }
        else 
        {
            litOutput.Text = "You did not specify a file to upload.";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T15:35:54.537

这是对我有用的代码，希望对您有所帮助：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    var dlg = new OpenFileDialog();

    dlg.Filter = "Text documents (.txt)|*.txt";

    Nullable<bool> result = dlg.ShowDialog();

    if (result == true)
    {
        string filename = dlg.FileName;
        FileNameTextBox.Text = filename;
    }

    var x = @"/" + Path.GetFileName(FileNameTextBox.Text);

    _client.UploadFile("/", Path.GetFileName(FileNameTextBox.Text), File.ReadAllBytes(@"" + FileNameTextBox.Text));
} 
```

# javascript - MVC 3 Razor 将 javascript 中的字符串视为 html

> ID：16211316
> 
> 赞同：1
> 
> 时间：2013-04-25T09:38:02.037
> 
> 标签：javascript, html, asp.net-mvc, asp.net-mvc-3, razor

我的cshtml文件中有一个javascript函数，它构建一个表，并使用JQuery将它添加到页面上的一个div中。

我最近做了一些更改，现在似乎 Visual Studio 将以下内容视为需要解析的 html。（错误：未终止的字符串文字）

```
footer = footer + "</td></tr></tfoot>"; 
```

我希望了解为什么会发生这种情况 - 因为这以前有效，并且我的函数中还有其他标签不显示错误，如下所示。

```
var footer = "<tfoot><tr><td colspan='7'>"; 
```

我可以通过使用下面的代码来解决它，但我宁愿找到原因，以便我可以正确解决这个问题。

```
footer = footer + '@Html.Raw("</td></tr></tfoot>")'; 
```

# php - 如何在 Symfony2 中将表单保存到数据库而不是实体

> ID：16211317
> 
> 赞同：-2
> 
> 时间：2013-04-25T09:38:03.383
> 
> 标签：php, database, forms, symfony

我目前正在使用 Symfony2 重建一个网络应用程序。我希望用户更新他们在我们的 MySQL 数据库中的特定记录。但是，用户不是自信的计算机用户，也不喜欢 Web 应用程序（以其当前形式）的工作方式。因此，从 UI/UX 的角度来看，我决定使用 2 个表单来编辑特定数据，而不是当前用户不喜欢的 1 个表单。

有问题的 MySQL 数据库表包含许多信息字段，例如他们的个人详细信息和与他们相关的其他信息。表单被拆分以反映这一点，一个表单更新个人详细信息，一个表单更新其余的，因此用户不必处理一个长表单。

不过，目前，当我使用一种形式时，出现错误：

> 在表单提交期间，在链配置的命名空间中找不到类“Symfony\Component\Form\Form”

这个错误在这个[问题](https://stackoverflow.com/questions/16173451/the-class-symfony-component-form-form-was-not-found-in-the-chain-configured-na)中得到了解决。然而，它给我留下了一个问题。目前，因为我已将表单一分为二，我无法将这些数据保存到数据库中。我可以通过只使用一种形式来克服这个问题，但这违背了数据库用户的意愿。此外，我知道完全可以使用两个或多个表单将特定数据添加到单个数据库，就像我以前做过的那样，只是在 Symfony 中没有。

有谁知道或有一个建议，我可以如何克服这个问题？由于那里存在大量当前数据，因此更改数据库是不可能的。

**更新**

这是缺少的视图、控制器和表单文件。

**view.html.twig**

```
<!-- Modal Windows: Edit Instructor Personal Details -->
<div id="editPersonal" style="display:none;">
    <div class="modal-head">
        <h2>Edit Personal Details For: <font-color="red !important">{{instructor.firstName}} {{instructor.surname}}</font></h2>
    </div>
    <div class="modal-body">
        <form action="#" method="post" {{ form_enctype(ipde) }} id="editPersonalDetails" class="modaledit">
        <table class="modalform-col1">
            <tbody>
                <tr class="hidden">
                    <th>{{ form_label(ipde.id, 'ID*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.id) }}
                        {{ form_widget(ipde.id, { 'attr': {'class': 'textfield'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.firstName, 'First Name*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.firstName) }}
                        {{ form_widget(ipde.firstName, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.surname, 'Surname*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.surname) }}
                        {{ form_widget(ipde.surname, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.address1, 'Address Line 1*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.address1) }}
                        {{ form_widget(ipde.address1, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.address2, 'Address Line 2', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.address2) }}
                        {{ form_widget(ipde.address2, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.town, 'Town*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.town) }}
                        {{ form_widget(ipde.town, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.county, 'County*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.county) }}
                        {{ form_widget(ipde.county, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.postcode, 'Postcode*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.postcode) }}
                        {{ form_widget(ipde.postcode, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(ipde.email, 'Email*', { 'attr': {'class': 'title'} }) }}</th>
                    <td>
                        {{ form_errors(ipde.email) }}
                        {{ form_widget(ipde.email, { 'attr': {'class': 'text'}}) }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <div class="modal-placeright">
            <a href="#close" rel="modal:close" class="closebutton">Close Without Saving</a>
            <input type="submit" value="Save Changes" id="savebuttonpr" class="savebutton" />
            {{ form_rest(ipde) }} 
        </div>
    </div>
</div> 
```

**DefaultController.php**

```
<?php

namespace PCUK\InstructorBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use PCUK\InstructorBundle\Form\IpdeType;
use PCUK\InstructorBundle\Form\IrType;
use PCUK\InstructorBundle\Form\BaType;
use Symfony\Component\HttpFoundation\Request;

class DefaultController extends Controller
{

    public function viewAction($instructor, Request $request)
    {
        // Database connection
        $insrep = $this->getDoctrine()->getManager();

        // Get Instructor from Entity for Form use
        $instructorQ = $insrep->getRepository('InstructorBundle:MapInstructors')->find($instructor);

        // Get Shared Branches from Entity for Form use
        $instructorS = $insrep->getRepository('InstructorBundle:MapInstructorShared')->find($instructor);

        // Generate Form to edit Instructor Personal Details
        $ipde = $this->createForm( new IpdeType(), $instructorQ);

        // Handle Form submission to edit Instructor Personal Details
        if ($request->getMethod() == 'POST') {
            $ipde->bind($request);

            if ($ipde->isValid()) {
                // perform some action, such as saving the task to the database

                //if ($this->request->isXmlHttpRequest()){
                       //return data ajax requires.
                //}
                $em = $this->getDoctrine()->getManager();
                $em->persist($ipde);
                $em->flush();

                return $this->redirect($this->generateUrl('task_success'));
            }
        }

        // Generate Form to edit Instructor Records
        $ir = $this->createForm( new IrType(), $instructorQ);

        // Generate Form to edit Instructor Records
        $ba = $this->createForm( new BaType(), $instructorS);

        // Return data to view
        return $this->render('InstructorBundle:Default:view.html.twig', array(
            'ipde' => $ipde->createView(),
            'ir' => $ir->createView(),
            'ba' => $ba->createView()
        ));
    }
} 
```

**IpdeType.php - 个人资料表格**

```
<?php
// src/PCUK/InstructorBundle/Form/Type/IpdeType.php
// This is to handle forms for the Instructor Personal Details Form
namespace PCUK\InstructorBundle\Form;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\Form;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FileField;

class IpdeType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('id', 'integer', array('required'=>false));
        //Personal Details
        $builder->add('firstName', 'text', array('required'=>false));
        $builder->add('surname', 'text', array('required'=>false));
        $builder->add('address1', 'text', array('required'=>false));
        $builder->add('address2', 'text', array('required'=>false));
        $builder->add('town', 'text', array('required'=>false));
        $builder->add('county', 'text', array('required'=>false));
        $builder->add('postcode', 'text', array('required'=>false));
        $builder->add('email', 'text', array('required'=>false));
        $builder->add('phone', 'text', array('required'=>false));
        $builder->add('mobile', 'text', array('required'=>false));
        $builder->add('notes', 'text', array('required'=>false));
    }

    public function getName()
    {
        return 'ipde';
    }
} 
```

**IrType.php - 其他信息表**

```
<?php
// src/PCUK/InstructorBundle/Form/Type/IrType.php
// This is to handle forms for the Instructor Records Form
namespace PCUK\InstructorBundle\Form;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\Form;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FileField;

class IrType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('id', 'integer', array('required'=>false));
        $builder->add('primaryArea', 'integer', array('required'=>false));
        $builder->add('primaryBranch','entity', array('class'=>'PCUK\InstructorBundle\Entity\MapBranches', 'property'=>'branchname' ));
        $builder->add('begin', 'date', array('required'=>false));
        $builder->add('lastCrb', 'date', array('required'=>false));
        $builder->add('latestCpd', 'date', array('required'=>false));
        $builder->add('preferredLevel','entity', array('class'=>'PCUK\InstructorBundle\Entity\MapInstructorLevels', 'property'=>'name' ));
        $builder->add('preferredDiscipline','entity', array('class'=>'PCUK\InstructorBundle\Entity\MapInstructorLevels', 'property'=>'name' ));
        $builder->add('currentLevel','entity', array('class'=>'PCUK\InstructorBundle\Entity\MapInstructorLevels', 'property'=>'name' ));
        $builder->add('bhs', 'checkbox', array('required'=>false));
        $builder->add('visiting','entity', array('class'=>'PCUK\InstructorBundle\Entity\MapInstructorVis', 'property'=>'name' ));
    }

    public function getName()
    {
        return 'ir';
    }
} 
```

**更新：29/04/13** 按照 james_t 的建议，我将实体一分为二，每个表格各一个。但是，原始错误仍然存​​在。

我还在控制器中创建了一个新操作，并且由于拆分实体没有解决问题，我恢复使用单个实体。我的控制器现在如下所示：

**viewAction** public function viewAction($instructor, Request $request) { // 数据库连接 $insrep = $this->getDoctrine()->getManager();

```
// Get IPDE from Entity for Form use
$instructorIpde = $insrep->getRepository('InstructorBundle:MapInstructors')->find($instructor);

// Generate Form to edit Instructor Personal Details
$ipde = $this->createForm( new IpdeType(), $instructorIpde);

// Get IR from Entity for Form use
$instructorIr = $insrep->getRepository('InstructorBundle:MapInstructors')->find($instructor);

// Generate Form to edit Instructor Records
$ir = $this->createForm( new IrType(), $instructorIr);

// Get Shared Branches from Entity for Form use
$instructorBa = $insrep->getRepository('InstructorBundle:MapInstructorShared')->find($instructor);

// Generate Form to edit Instructor Records
$ba = $this->createForm( new BaType(), $instructorBa);

// Return data to view
return $this->render('InstructorBundle:Default:view.html.twig', array(
    'pagename' => $iname . ' - Instructors', 
    'ipde' => $ipde->createView(),
    'ir' => $ir->createView(),
    'ba' => $ba->createView(),
        'iid' => $instructor
)); 
```

}

**ipdeAction**

public function ipdeAction($instructor, Request $request) { // 数据库连接 $insrep = $this->getDoctrine()->getManager();

```
// Get IPDE from Entity for Form use
$instructorIpde = $insrep->getRepository('InstructorBundle:MapInstructors')->find($instructor);

// Generate Form to edit Instructor Personal Details
$ipde = $this->createForm( new IpdeType(), $instructorIpde);

// Handle Form submission to edit Instructor Personal Details
if ($request->getMethod() == 'POST') {
    $ipde->bind($request);

    if ($ipde->isValid()) {
        // perform some action, such as saving the task to the database

        //if ($this->request->isXmlHttpRequest()){
               //return data ajax requires.
        //}
        $em = $this->getDoctrine()->getManager();
        $em->persist($ipde);
        $em->flush();

        $params = array(
            'instructor'  => $instructor,
        );

        return $this->redirect($this->generateUrl('instructor_viewinstructor', $params));
    }
} 
```

}

我还从这里修复了更新我的**view.html.twig**文件：

```
<form action="#" method="post" {{ form_enctype(ipde) }} id="editPersonalDetails" class="modaledit"> 
```

对此：

```
<form action="{{ path('instructor_viewinstructor_ipde', {'instructor' :iid}) }}" method="post" {{ form_enctype(ipde) }} id="editPersonalDetails" class="modaledit"> 
```

我的 routing.yml 文件现在也看起来像这样：

```
instructor_viewinstructor:
    pattern:  /instructors/view/{instructor}
    defaults: { _controller: InstructorBundle:Default:view }

instructor_viewinstructor_ipde:
    pattern:  /instructors/view/{instructor}/ipde
    defaults: { _controller: InstructorBundle:Default:ipde }
    requirements:
        _method:  POST 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:31:36.680

对我来说，您正在生成 3 个表单（其中 1 个使用相同的实体**$ir**和**$ipde**两次）这一事实似乎有点奇怪。您遇到的错误可能与此有关。

我以前做过，我可以为你分享一些指导方针：

*   您不需要为每个表单使用单独的实体，您需要为您的实体使用单独的表单。不要误会我的意思，这两种方法都可以，但实际上并没有什么不同。在您的代码中，您使用的连接数是所需的两倍。

*   您将 3 个表单传递给您的视图，但只呈现一个，为什么？除非您使用 AJAX，否则它没有意义。

让我描述一下要走的路：

1.  **创建您的应用程序需要的实体**（通常每个表一个），您可以拆分它们，但这通常仅在使用更复杂的逻辑时才需要（即不同用户对同一行的不同类型的权限/所有权，尽管这有点[臭](http://www.codinghorror.com/blog/2006/05/code-smells.html)）。

2.  如果您想使用验证组件来确保您获得良好的数据，请使用**[验证组](http://symfony.com/doc/2.0/book/validation.html#validation-groups)**，一个组用于您要构建的每个表单）。

3.  **为您要构建的每个表单**创建一个表单类型。**听起来有点明显。您可以根据需要为任何实体拥有任意数量的表单类型。在每个表单上，仅包含您感兴趣的字段。**

***   **为每个表单**创建一个视图。**非常直截了当。**

    ***   这是事情变化最大的地方。你真正需要的是，**每个表单都有一个控制器动作**，不要混合它们，你什么都没有。每个控制器动作应该：

    *   加载您感兴趣的实体
    *   建立一个正确类型的表格。
    *   如果 GET，则只渲染**一个**表单并返回。
    *   如果是 POST，绑定请求，保存并做一些事情。****

 ****基本上，工作流程将类似于：

*   用户想要编辑实体id=X，
*   您调用处理要编辑的数据的控制器并返回表单。
*   用户提交表单，您保存数据。您可以使用**重定向**来链接过程的两个部分，只需重定向到处理扩展信息的第二个控制器的 url。如果您正在链接，您可能会发现使用[Flash 消息](http://symfony.com/doc/2.0/book/controller.html#flash-messages)让用户知道信息已保存很有用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:50:48.697

经过大量搜索，我在 Symfony2 [Cookbook](http://symfony.com/doc/current/cookbook/doctrine/registration_form.html)中发现了这个条目。

老实说，我跳过了构建表单等的整个部分，因为我觉得我没有做错（我知道这有待辩论）。我觉得这个问题与将这些数据保存到数据库有关，所以我跳到说明书的这一部分[，](http://symfony.com/doc/current/cookbook/doctrine/registration_form.html#handling-the-form-submission)其中谈到了将数据保存到数据库的代码。

我的代码是这样的：

```
// Database connection
$insrep = $this->getDoctrine()->getManager();

if ($ipde->isValid()) {
    // perform some action, such as saving the task to the database

    //if ($this->request->isXmlHttpRequest()){
           //return data ajax requires.
    //}
    $em = $this->getDoctrine()->getManager();
    $em->persist($ipde);
    $em->flush();

    $params = array(
        'instructor'  => $instructor,
    );

    return $this->redirect($this->generateUrl('instructor_viewinstructor', $params));
} 
```

在文档中，它是这样的：

```
if ($form->isValid()) {
    $registration = $form->getData();

    $em->persist($registration->getUser());
    $em->flush();

    return $this->redirect(...);
}

return $this->render(
    'AcmeAccountBundle:Account:register.html.twig',
    array('form' => $form->createView())
); 
```

我发现的不同之处在于我一直在使用`$em = $this->getDoctrine()->getManager();`，而文档建议您使用`$registration = $form->getData();`. 我更改了代码以使用该`->getData()`代码，并且它可以工作。没有更多错误，数据保存到数据库中！！！！****

# knockout.js - 淘汰赛计算的布尔值不更新

> ID：16211321
> 
> 赞同：2
> 
> 时间：2013-04-25T09:38:15.093
> 
> 标签：knockout.js, computed-observable

这是一个简单的视图模型：

```
var vm = {
        isValid1: ko.observable(false),
        isValid2: ko.observable(false),
        isValid3: ko.observable(false),
        isValid4: ko.observable(false),

        isAllValid: ko.computed(function() {
            return isValid1() && isValid2() && isValid3() && isValid4();
        });
} 
```

当更新 isValid 并将它们全部设置为 true 时，如下所示：

```
vm.isValid1(true);
vm.isValid2(true);
vm.isValid3(true);
vm.isValid4(true); 
```

isAllValid 似乎永远不会更新。我在这里做错了什么？

谢谢

尼古拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:42:48.340

如果您使用对象文字作为视图模型，则需要`computed`在初始声明之后定义：

```
var vm = {
        isValid1: ko.observable(false),
        isValid2: ko.observable(false),
        isValid3: ko.observable(false),
        isValid4: ko.observable(false)
}

vm.isAllValid = ko.computed(function() {
   return vm.isValid1() && vm.isValid2() && vm.isValid3() && vm.isValid4();
}); 
```

这是必需的，因为对象文字和作用域在 javascript 中的工作方式。无论如何，如果您的视图模型变得复杂（例如具有累积属性等），最好使用构造函数作为您的视图模型

进一步阅读：[声明为对象文字与函数的淘汰视图模型之间的区别](https://stackoverflow.com/questions/9589419/difference-between-knockout-view-models-declared-as-object-literals-vs-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:45:27.257

你不能使用这样的文字，你必须创建一个构造函数并像这样启动它

```
var VM = function() {
        this.isValid1 = ko.observable(false);
        this.isValid2 = ko.observable(false);
        this.isValid3 = ko.observable(false);
        this.isValid4 = ko.observable(false);

        this.isAllValid = ko.computed(function() {
            return this.isValid1() && this.isValid2() && this.isValid3() && this.isValid4();
        }, this);
}; 
```

[http://jsfiddle.net/FuuQf/](http://jsfiddle.net/FuuQf/)

或者在创建文字后设置 isAllValid 函数，但我认为文字不应该用于虚拟机

# active-directory - 数据访问管理 - AD 环境中的最佳实践

> ID：16211322
> 
> 赞同：0
> 
> 时间：2013-04-25T09:38:19.647
> 
> 标签：active-directory

我正在尝试收集一些关于大型组织中数据管理访问主题的信息，最好以白皮书或“最佳实践手册”的形式。

我在其中工作，文件结构非常复杂，管理对某些文件夹的访问请求变得越来越具有挑战性。数据所有者、ACL 继承、文件夹结构等。

请问您有什么建议，您知道的在线资源或书籍吗？

谢谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:07:58.307

我会回答我自己的问题，找到我正在寻找的大部分内容：

Windows 管理资源工具包：IT 专业人员的生产力解决方案

其中一些在数据管理下的 Technet 数据库中。

如果任何人有任何其他来源，请分享。

# sql-server - SQL Server 上的回滚转表和解锁表

> ID：16211325
> 
> 赞同：4
> 
> 时间：2013-04-25T09:38:26.093
> 
> 标签：sql-server, tsql, transactions

嗨，有时我会`SQL Server`因为未打开的未知事务或锁定表而遇到问题，我阅读了许多建议以避免重新启动服务器
，直到我发现这一点，而且似乎有效
你有其他建议释放锁和回滚传输吗？
因为我保留在生产服务器上运行它

```
USE master;
GO
ALTER DATABASE [db_dev]
SET SINGLE_USER
WITH ROLLBACK IMMEDIATE;
ALTER DATABASE [db_dev]
SET MULTI_USER;
GO 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-30T06:02:00.093

您可以通过使用检查是什么阻止了您的进程

```
sp_who2 
```

然后

```
kill spid 
```

将其设置为 single_user 然后恢复将删除与该数据库的所有连接。在生产服务器上可能非常危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T20:38:13.763

如果您锁定了一张桌子，您可以使用以下代码将其杀死：

```
 SELECT OBJECT_NAME(P.object_id) AS TableName,
           Resource_type,
           request_session_id
    FROM sys.dm_tran_locks AS L
         JOIN sys.partitions AS P ON L.resource_associated_entity_id = p.hobt_id
    WHERE OBJECT_NAME(P.object_id) = '<Table_Name>';

    GO
    Kill session_ID 
```

# html - 我可以用在 大约

> ID：16211326
> 
> 赞同：9
> 
> 时间：2013-04-25T09:38:27.743
> 
> 标签：html, validation

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T09:39:52.507

使用 CSS 使链接占据整个列表项，例如。`display: block`（以及您可能想要的任何其他样式）。

环绕列表项的链接是无效的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:39:45.937

简短的回答是**NO**，它不会被验证，只能`li`在里面`ul`和`ol`元素。

所以这是不正确的

```
<ul>
  <a><li></li></a>
</ul> 
```

这可以

```
<ul>
  <li><a></a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:41:30.550

锚标签是内联元素，所以使用**display:'block'**使其阻塞，这样它将占据其父标签的全宽，即 li 标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:40:58.143

第二种方法是正确的方法，你只是有一些小的样式问题。

如果您将`<li>`'s 设置为没有填充，并且将`<a>`'s 设置为没有边距，则链接将填充列表项的整个区域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:44:09.733

你必须使用有效的方式。

并设置“a”标签：

```
display: block 
```

[http://jsfiddle.net/TYVV6/1/](http://jsfiddle.net/TYVV6/1/)

如果您不想在列表元素的开头显示点。

你必须使用：

```
list-style: none; 
```

# c# - 选择图形对象

> ID：16211329
> 
> 赞同：3
> 
> 时间：2013-04-25T09:38:42.180
> 
> 标签：c#, wpf

嗨，我想让我的图形对象在单击它们后“被选中”。

我尝试了类似的方法来制作选定的行：

```
else if (e.OriginalSource is Line)
        {
            LineFocus = true;
            MojaLinia = (Line)e.OriginalSource;

            Rectangle rect_1 = new Rectangle
            {
                Stroke = Brushes.Black,
                StrokeThickness = 1,
                Fill = new SolidColorBrush(Color.FromRgb(255, 255, 255))
            };
            rect_1.Width = 6;
            rect_1.Height = 6;

            Canvas.SetLeft(rect_1, MojaLinia.X1);
            Canvas.SetTop(rect_1, MojaLinia.Y1);
            canvas.Children.Add(rect_1);
            Rectangle rect_2 = new Rectangle
            {
                Stroke = Brushes.Black,
                StrokeThickness = 1,
                Fill = new SolidColorBrush(Color.FromRgb(255, 255, 255))
            };
            rect_2.Width = 6;
            rect_2.Height = 6;

            Canvas.SetLeft(rect_2, MojaLinia.X2);
            Canvas.SetTop(rect_2, MojaLinia.Y2);
            canvas.Children.Add(rect_2);
        } 
```

它有点愚蠢，并且很难制作与线有距离的白色矩形。没有大量的 if() 有什么好的方法吗？

我正在使用 VS2012，WPF/C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:46:52.900

您可以使用[Adorner](http://msdn.microsoft.com/en-us/library/ms743737.aspx)将您的形状显示为“已选中”，这样您还可以在 XAML 中制作“已选中”状态的视觉提示。

您可以使用[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)将属性（例如布尔值）“添加”`IsSelected`到您的对象，并在每次点击事件发生时切换该值。

# html - MySQL和Form with equation

> ID：16211335
> 
> 赞同：0
> 
> 时间：2013-04-25T09:39:02.033
> 
> 标签：html, mysql, equation

我有一个看起来像这样的表格：

```
Section              | Length   | Number 

Dropdown of sections | Integer  | Integer 
```

然后我有一个看起来像这样的 SQL

```
Section (List of sections) | Weight (Weight of section) | Cost (Cost of section) 
```

用户将从下拉列表中选择部分，输入所需部分的编号和部分的长度。然后，用户将单击一个按钮将数据添加到表单下方的表格中。

单击时，我需要将所选部分的长度乘以数字，然后乘以重量，然后将所选部分的长度乘以数字，然后再乘以成本。然后将显示在这样的表格中

```
Section    | Total Length | Weight | Cost 

152x152x25 | 5000         | 25     | 600 
```

它必须能够向表中添加相当多的条目。

可悲的是，我是一名设计师而不是程序员，所以如果我能得到一些帮助，我将不胜感激。

*编辑*

1.  我使用的答案 (152x152x25|5000|25|600) 只是一个例子。
2.  我将使用普通的 Linux 服务器来提供包含表单和表格的 HTML 页面。然后将有一个“打印”来打印表格和“发送”以通过电子邮件发送表格。我计划自己填充 SQL 数据库。

# c# - Windows 8 Web 身份验证代理无法连接到服务

> ID：16211336
> 
> 赞同：0
> 
> 时间：2013-04-25T09:39:05.480
> 
> 标签：c#, windows-8, windows-runtime, single-sign-on, windows-store-apps

Web 身份验证代理可以与非 oAuth 身份验证一起使用吗？

我创建了一个带有登录页面的 Asp.Net MVC2 网站，我想通过 Web 身份验证代理使用它来检索和保存身份验证 cookie。

这是代码：

```
WebAuthenticationResult WebAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
WebAuthenticationOptions.None,
new Uri("https://localhost:44301/Account/LogOn"),
new Uri("https://localhost:44301/")); 
```

加载时，WAB 返回以下消息“无法连接到服务”，并且在查看事件查看器时会出现导航错误事件。

我的代码有问题还是无法连接到基于 cookie 的登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:20:51.807

Web 身份验证代理适用于 WinRT 应用程序。

在您的情况下，您有多种选择。

1.  直接使用[DotNetOpenAuth](http://www.dotnetopenauth.net)

2.  升级到 MVC4 并使用通过 ASP.NET 4.5 添加的默认模板中包含的 oAuth 功能提供的支持。请参阅[将 oAuth 提供程序与 MVC 结合使用](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc) 它非常容易集成到您的 MVC 应用程序中。

# excel - VBA 宏关闭自动计算

> ID：16211339
> 
> 赞同：1
> 
> 时间：2013-04-25T09:39:14.230
> 
> 标签：excel, vba, optimization, solver

我有以下代码，它在一个更大的宏中重复了几次。我发现如果我指定*搜索方法*（通过包含“Engine:=..”），宏会关闭*自动计算*（在*Formulas>Calculation Options*中找到）并将其切换为手动。这基本上将优化固定在一个点上，即使下面的优化是循环的，因为它优化到不同的值。由于这个问题，相互链接的单元格不会更新，这使得优化变得无用。

我可以在不指定搜索方法的情况下运行宏，但理想情况下我希望能够选择它。有任何想法吗？

```
SolverReset
    SolverOK SetCell:="$K$21", MaxMinVal:=1, ValueOf:="0", ByChange:="$D$41:$H$41", Engine:=2
    SolverAdd CellRef:="$K$25", Relation:=2, FormulaText:="1"
    SolverAdd CellRef:="$D$41:$H$41", Relation:=3, FormulaText:="0"
    SolverAdd CellRef:="$D$41:$H$41", Relation:=3, FormulaText:="$D$12:$H$12"
    SolverAdd CellRef:="$D$41:$H$41", Relation:=1, FormulaText:="$D$13:$H$13"
                        SolverSolve UserFinish:=True
                        SolverFinish KeepFinal:=1
                        Range("K23").Value = Range("K21").Value 
```

# c++-cli - C++ CLI 包装器

> ID：16211341
> 
> 赞同：3
> 
> 时间：2013-04-25T09:39:19.607
> 
> 标签：c++-cli

我有一个关于为要在 C# 中使用的本机 C++ 类创建 C++ CLI 包装器的问题。

这是一个示例代码：

```
#include "stdafx.h"

#pragma once

using namespace System;

namespace Wrapper {

    class NativeClass
    {
    public:
        NativeClass() {}
        int Add(int a, int b)
        {
            return a+b;
        }
    };

    public ref class Wrapper
    {
    public:
        Wrapper() {pNative = new NativeClass();}
        int Add(int a, int b)
        {
            return(pNative->Add(a,b));
        }
        ~Wrapper()
        {
            delete pNative;
            pNative = 0;
        }
        !Wrapper()
        {
            this->~Wrapper();
        }
        //My problem is here.
        NativeClass* GetNative()
        {
            return pNative;
        }
    private:
        NativeClass* pNative;
    };
} 
```

这段代码工作正常。我需要检索引用本机类的指针以在其他包装类中使用它。但是，当我使用这个包装类时，我不希望函数“GetNative”在 C# 中可见。我该如何隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T09:23:18.657

> 如果其他包装类在同一个程序集中，则将访​​问设置为[内部](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)而不是公共的。– 罗杰罗兰 2013 年 4 月 25 日在 9:47

.

> 如果他们不在同一个程序集中？...
> 
> 查看[朋友集会](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)– Sebastian Cabot 2 月 1 日 15:43

# .net - SQL 存储调用未传递参数

> ID：16211344
> 
> 赞同：3
> 
> 时间：2013-04-25T09:39:25.580
> 
> 标签：.net, vb.net, stored-procedures, .net-4.0

我有一个 SQL Server 2008 存储过程，当通过下面显示的代码调用它时，会返回参数的缺失参数异常`@BatchID`。

如您所见，我正在传递参数

```
cmd.Parameters.AddWithValue("@BatchID", batchID) 
```

但由于某种原因，它在调用服务器时没有接听它。

可能在这里遗漏了一些简单的东西，这是漫长的一天。

**存储过程**

```
ALTER PROCEDURE [dbo].[spIsEngineSixCylinderByBatchID]
    @BatchID as int
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @IsSixCylinder as bit
    SET @IsSixCylinder = 0

    SELECT @IsSixCylinder = tblBatches.SixCylinder
        FROM tblBatches
        WHERE IdBatch = @BatchID

    SELECT @IsSixCylinder
END 
```

**代码**

```
Private Function IsBatchSixCylinder(batchID As Int32) As Boolean
    Dim isSixCylinder As Boolean = False

    Try
        Using cmd As New SqlClient.SqlCommand("[dbo].[spIsEngineSixCylinderByBatchID]", _conn)
            cmd.Parameters.AddWithValue("@BatchID", batchID)
            isSixCylinder = cmd.ExecuteScalar
        End Using

    Catch ex As SqlClient.SqlException
        LogError(ex.Message)
    End Try

    Return isSixCylinder

End Function 
```

**例外**

> 过程或函数“spIsEngineSixCylinderByBatchID”需要未提供的参数“@BatchID”。

**调用堆栈**

```
 at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at ClassLib_SAPtoEPMS.clsSAPtoEPMS.IsBatchSixCylinder(Int32 batchID) in C:\Users\phil.murray\Desktop\EPMS_05022012\EPMS_05022012\Power Systems EPMS\ClassLib_SAPtoEPMS\ClassLib_SAPtoEPMS\clsSAPtoEPMS.vb:line 229 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:56:26.803

您可以尝试以下代码段中的代码是否有效？

```
Using cmd As New SqlClient.SqlCommand("spIsEngineSixCylinderByBatchID", _conn)
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@BatchID", batchID)
            isSixCylinder = cmd.ExecuteScalar
End Using 
```

或者

```
Using cmd As New SqlClient.SqlCommand("spIsEngineSixCylinderByBatchID", _conn)
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.Add("@BatchID ", SqlDbType.Int)
            cmd.Parameters("@BatchID ").Value = batchID
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:57:45.957

用这个

```
Private Function IsBatchSixCylinder(batchID As Int32) As Boolean

Dim isSixCylinder As Boolean = False

Try
    Using cmd As New SqlClient.SqlCommand("[dbo].[spIsEngineSixCylinderByBatchID]", _conn)

    cmd.CommandType = CommandType.StoredProcedure
        cmd.Parameters.AddWithValue("@BatchID", batchID)
        isSixCylinder = cmd.ExecuteScalar
    End Using

Catch ex As SqlClient.SqlException
    LogError(ex.Message)
End Try

Return isSixCylinder

End Function 
```

# c# - Windows 服务中的线程

> ID：16211346
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:39:33.647
> 
> 标签：c#, multithreading, service, thread-safety

我创建了一个使用可观察列表的应用程序。我已经使 ObservableList 类线程安全（我认为），它现在在我的应用程序中运行良好。

现在我正在尝试将我的应用程序安装为服务。这也很好，直到某些东西被添加到列表中。我认为那里的线程只是死了。我有以下代码：

```
/// <summary>
/// Creates a new empty ObservableList of the provided type. 
/// </summary>
public ObservableList()
{
    //Assign the current Dispatcher (owner of the collection) 
    _currentDispatcher = Dispatcher.CurrentDispatcher;
}

/// <summary>
/// Executes this action in the right thread
/// </summary>
///<param name="action">The action which should be executed</param>
private void DoDispatchedAction(Action action)
{
    if (_currentDispatcher.CheckAccess())
        action.Invoke();
    else
        _currentDispatcher.Invoke(DispatcherPriority.DataBind, action);
}

/// <summary>
/// Handles the event when a collection has changed.
/// </summary>
/// <param name="e"></param>
protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
{
    DoDispatchedAction(() => base.OnCollectionChanged(e));
} 
```

在调试时，我已经看到`Collection.Add(object)`被调用了。它启动`DoDispatchedAction`函数，调试器命中的最后一件事是`_currentDispatcher.Invoke(DispatcherPriority.DataBind, action);`. 在此之后，应用程序继续，但之后的代码`Collection.Add(object)`不再执行。最初将项目添加到 ObservableList 的代码也不会继续。这就是为什么我认为线程死了或类似的东西。

在调试器中检查操作时，我发现有以下消息：

> ApartmentState = '_currentDispatcher.Thread.ApartmentState' 引发了“System.Threading.ThreadStateException”类型的异常

我怎么解决这个问题？我什至在思考正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:24:30.137

据我了解，您有一个应该作为 Windows 服务运行的核心代码，以及一个使用相同核心代码的 WPF 应用程序。

所以基本上你的解决方案中应该有 3 个项目：

*   完成一些硬件相关工作的核心组件
*   将作为 Windows 服务安装的可执行文件。此可执行文件引用核心程序集
*   还引用核心程序集的 WPF 应用程序

调度程序有助于将操作编组回 UI 线程。这基本上用于在 WPF 应用程序的 UI 线程中执行一些代码。例如，当您将集合绑定到 a时，必须在 UI 线程上触发`DataGrid`该事件，因为由于绑定，它会导致 UI 被更新。`CollectionChanged`并且 UI**必须**从 UI 线程更新。

您的核心程序集不必处理调度程序，因为没有要更新的 UI。您可以在此处使用 simple `Collection`，因为您不会将其绑定到任何 UI 组件。您的 Windows 服务可执行文件也是如此。

另一方面，对于您的 WPF 应用程序，您可以`ObservableCollection`在 UI 组件上使用绑定（`DataGrid`例如）。只有在这个程序集中，您必须确保 UI 组件始终从 UI 线程更新（这意味着您需要这样做`Dispatcher`）。

所以，一个代码示例：

核心组件：

```
public IEnumerable<SomeClass> GetHardwareInfo()
{
    return new List<SomeClass> { ... };
} 
```

Windows 服务可执行文件：

```
internal static void Main(string[] args)
{
    ...
    var objs = new MyCoreInstance().GetHardwareInfo();
    ...
} 
```

WPF 应用程序（假设它是 ViewModel）：

```
// Some UI component is binded to this collection that is obersvable
public ObservableCollection<SomeClass> MyCol
{
    get
    {
        return this.myCol;
    }

    set
    {
        if (this.myCol != value)
        {
            this.myCol = value;
            this.RaisePropertyChanged("MyCol");
        }
    }
}

public void UpdateList()
{
    var info = new MyCoreInstance().GetHardwareInfo();

    // Now, marshall back to the UI thread to update the collection
    Application.Current.Dispatcher.Invoke(() =>
        {
            this.MyCol = new ObservableCollection(info);
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T09:07:04.543

由于这是一个依赖于硬件的服务，这与通常的 LOB 样式应用程序有点不同。不同之处在于：应该触发事件的更改来自应用程序的后端，而整个 UI 框架和服务架构旨在让前端请求后端提供的数据。

您可以通过在它们相遇的地方创建某种“中立地”来将两者结合在一起。

在硬件处理组件中，我将有一个持续运行或由硬件中断触发运行的后台线程，并使用从硬件收集的任何数据更新其数据结构。然后，我将有一个同步方法，它可以在调用它的时间点创建硬件数据的一致快照。

在 WPF 客户端中，将有一个调度程序计时器，它以设定的时间间隔调用此方法并使用数据快照更新 ObservableCollections。这是可能的，因为它会发生在 UI 线程上。实际上，如果可能的话，您应该尝试在 ObservableCollections 中添加和删除项目，而不是创建新的集合实例，除非集合中的数据从一次调用到下一次调用完全改变。

WCF 客户端只是创建数据快照的方法的包装器：它只会在调用时发回这样的快照。

WCF 服务的 WPF 客户端将作为本地 WPF 客户端工作，只是它会直接调用服务而不是硬件库，并且可能我会为 DispatcherTimer 选择更长的间隔，以避免过多的网络流量。您可以通过返回一个表示“没有任何变化”的特殊代码来进一步优化这一点，以避免多次发送相同的数据，或者使用单独的方法来询问数据是否已更改并检索已更改的数据。

# jquery - 使用 css3 动画加载网站

> ID：16211351
> 
> 赞同：1
> 
> 时间：2013-04-25T09:39:40.267
> 
> 标签：jquery, css, animation

前几天我遇到了这个网站，想知道如何创建相同的页面加载效果。是 jQuery 吗？还是使用精灵的 CSS3 动画？

[http://www.adhamdannaway.com/](http://www.adhamdannaway.com/)

在检查了该站点后，我发现他的加载徽标是由一个精灵图像组成的（灰色徽标旁边的黑色徽标）。他创建的效果就像徽标在页面加载时被“填充”（线性效果上升）使用 jQuery 和 CSS3，或两者兼而有之。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:50:13.340

然后你需要使用 aJax 来调用内容，在内容加载的同时，你可以显示动画。

加载内容后，您可以让[aJax](http://api.jquery.com/jQuery.ajax/)制作动画以将其显示在屏幕上。

将页面导入站点的动画也可以使用 jQuery 完成。

[我自己对aJax](http://api.jquery.com/jQuery.ajax/)做了类似的事情。试试看。

# c# - SQL 简单方程（2 列）

> ID：16211366
> 
> 赞同：0
> 
> 时间：2013-04-25T09:40:08.437
> 
> 标签：c#, asp.net, sql, linq

我是 Linq 的新手，在将 SQL 查询的一部分转换为 Linq 时遇到了困难......

我的查询中的部分是我从另一列中减去一列并将其设置为新列名......你如何在 Linq 中做到这一点？

SQL部分如下： -

'[ColumnA] - [ColumnB] 实际'

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:42:34.480

在您的 LINQ 查询中，您可以将查询[结果投影](http://msdn.microsoft.com/en-us/library/bb387028.aspx)到现有类（不是由实体框架或 LINQ to SQL 生成的类）或[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)，例如：

```
var query = from t in yourList
            select new 
             {
               Actual = t.ColumnA - t.ColumnB
             }; 
```

# ios - GMSGroundOverlay 动画 - 我应该使用 CATiledLayer 吗？

> ID：16211367
> 
> 赞同：99
> 
> 时间：2013-04-25T09:40:09.873
> 
> 标签：ios, crash, overlay, google-maps-sdk-ios, catiledlayer

我正在尝试使用 Google Maps for iOS SDK 最新版本 1.2.1.2944 来为`GMSGroundOverlay`. 用户可以控制图像序列，因此`UIImage`遗憾的是不可能使用动画，所以我正在即时加载`UIImage`。`GMSGroundOverlay.icon`设置`UIImage`为正在更新的。

除了高内存使用之外，我似乎遇到了一个限制，即每当我尝试覆盖超过 1000 像素 x 1000 像素的`UIImage`使用时，它就会崩溃。`GMSGroundOverlay.icon`引用`UIImage`1000 像素 x 1000 像素的 a 可以避免崩溃。

让我感到震惊的是，也许我应该利用`CATiledLayer`处理图像仅加载到内存中，然后加载到图标属性中`GMSGroundOverlay`，但是有没有人有使用`CATiledLayer`Google Maps for iOS SDK 并将图像作为动画排序的经验`GMSGroundOverlay`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T07:38:56.847

我从 pressanswer.com 得到了这个答案，我想它可能会对你有所帮助。

由于目前我无法使用“位置”键路径进行动画制作，因此我最终分别使用“纬度”和“经度”键路径对其进行了动画处理。

首先计算点并将它们添加到 2 个单独的数组中，一个用于纬度值 (y)，一个用于经度 (x)，然后使用 CAKeyFrameAnimation 中的 values 属性进行动画处理。创建 2 个 CAKeyFrameAnimation 对象（每个轴 1 个）并使用 CAAnimationGroup 将它们组合在一起，并将它们动画在一起形成一个圆圈。

在我的等式中，我改变了每个轴上的半径长度，这样我也可以生成椭圆路径。

```
NSMutableArray *latitudes = [NSMutableArray arrayWithCapacity:21];
    NSMutableArray *longitudes = [NSMutableArray arrayWithCapacity:21];
    for (int i = 0; i <= 20; i++) {
        CGFloat radians = (float)i * ((2.0f * M_PI) / 20.0f);

        // Calculate the x,y coordinate using the angle
        CGFloat x = hDist * cosf(radians);
        CGFloat y = vDist * sinf(radians);

        // Calculate the real lat and lon using the
        // current lat and lon as center points.
        y = marker.position.latitude + y;
        x = marker.position.longitude + x;

        [longitudes addObject:[NSNumber numberWithFloat:x]];
        [latitudes addObject:[NSNumber numberWithFloat:y]];
    }

    CAKeyframeAnimation *horizontalAnimation = [CAKeyframeAnimation animationWithKeyPath:@"longitude"];
    horizontalAnimation.values = longitudes;
    horizontalAnimation.duration = duration;

    CAKeyframeAnimation *verticleAnimation = [CAKeyframeAnimation animationWithKeyPath:@"latitude"];
    verticleAnimation.values = latitudes;
    verticleAnimation.duration = duration;

    CAAnimationGroup *group = [[CAAnimationGroup alloc] init];
    group.animations = @[horizontalAnimation, verticleAnimation];
    group.duration = duration;
    group.repeatCount = HUGE_VALF;
    [marker.layer addAnimation:group forKey:[NSString stringWithFormat:@"circular-%@",marker.description]]; 
```

# android - 创建选项卡的问题 - android

> ID：16211370
> 
> 赞同：1
> 
> 时间：2013-04-25T09:40:14.863
> 
> 标签：android, tabs

我需要一个带有 3 个选项卡的菜单。

我有以下 android 代码，它可以工作：

```
 tabHost = getTabHost();

        TabSpec newActivity = tabHost.newTabSpec("A");
        Intent intent = new Intent(this,A.class);
        intent.putExtra("name", name);
        intent.putExtra("age", String.valueOf(age));

        newActivity.setIndicator("A", getResources().getDrawable(R.drawable.a))
                    .setContent(intent);

        tabHost.addTab(createTab(B.class, HOME_TAB_ID, "B", R.drawable.h));

        tabHost.addTab(newActivity);

        tabHost.addTab(createTab(C, MORE_TAB_ID, "C", R.drawable.c)); 
```

B类和C类：

```
import android.app.Activity;

public class B extends Activity{

} 
```

为什么中间选项卡与第一个和最后一个选项卡相比颜色不同？

我需要所有 3 个选项卡看起来都一样。我需要中间选项卡与第一个和第三个选项卡具有相同的颜色 - 形状吗？

# java - 使用 mongoDB java Driver 的复合 ID

> ID：16211377
> 
> 赞同：0
> 
> 时间：2013-04-25T09:40:32.673
> 
> 标签：java, mongodb, casbah

我有一个需要保存在 mongoDB 中的 java 对象，而 mongoDB 中的标识符通常是一个复杂的，有两个字段： _id.valueA 和 _id.valueB 。

但是，我的数据结构相对于 valueA 和 valueB 是平坦的（即，这是我的 java 类的两个属性，它们没有嵌套在 ID 中），映射它们的自然方法是在 BasicDBObject 中创建两个属性。

当我尝试保存此 basicDBObject 时，出现异常：

存储在数据库中的字段不能有 . 在他们中。（坏键：'_id.ticker'） java.lang.IllegalArgumentException：存储在数据库中的字段不能有 . 在他们中。（坏键：'_id.ticker'）

为什么会出现这种情况？我在mongoDB中做的不是合法操作吗？

# javascript - 使用来自文本字段的输入来创建 URL

> ID：16211378
> 
> 赞同：0
> 
> 时间：2013-04-25T09:40:34.363
> 
> 标签：javascript, html, twitter

由于不再支持@anywhere，我正在寻找一种很好的方法来让人们直接从没有 Twitter 小部件的页面发送推文。

可以创建一个 URL 来填充推文的文本：

[https://twitter.com/intent/tweet?text=hello+this+is+a+test+message](https://twitter.com/intent/tweet?text=hello+this+is+a+test+message)

有没有办法制作一个输入字段，让填写的文本转换为文本+文本+文本格式。通过提交此填充文本，它将链接到上述 URL 类型。

因此，如果我输入：“我爱你们！” 提交将导致链接到： [https](https://twitter.com/intent/tweet?text=I+love+you+guys) ://twitter.com/intent/tweet?text=I+love+you+guys ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:46:32.070

当然！

```
<input type="text" name="msg" /><button>Tweet!</button>

<script>
    document.querySelector('button').addEventListener('click', function() {
        var msg = document.querySelector('input[name=msg]').value.replace(/ /g, '+');
        location.href = 'https://twitter.com/tweet.php?text=' + msg;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:45:57.477

split("match").join("replace") - 这似乎违反直觉，但它设法在大多数现代浏览器中以这种方式工作。

在您的情况下，我认为您可以`string =split(" ").join('+')`.to 以 text+text+text 形式输入字符串

# sql - SQL 数据库、ERD、乌鸦脚表示法、

> ID：16211379
> 
> 赞同：2
> 
> 时间：2013-04-25T09:40:34.517
> 
> 标签：sql, oracle, database-design

我有一个 ERD 图，其中我让客户的乌鸦脚进入虚线，然后直线进入会员资格。这是否意味着会员必须是客户，而客户可以持有会员资格？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:28:29.123

我不确定我是否理解正确。你有类似的东西吗

客户 >- - - - - ----会员

正确的？

如果是这种情况，则意味着会员可以由多个客户拥有，客户必须拥有会员（强制性关系 - 如果它是可选的，您将在会员表行中有一个 0），并且虚线行它意味着它是一个不可识别的（即：外键不是成员主键的一部分 - 或者类似地，客户不是由其成员身份识别的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:28:45.207

有些人使用虚线表示关系是纯粹的*关联*关系，而不是实线表示正在*识别*的关系。

ERD 有许多不同的图形约定。有关几个示例，请参见[Wikipedia 。](http://en.wikipedia.org/wiki/Crow%27s_foot_notation#Crow.27s_Foot)这意味着如果不询问创建图表的人，您将无法绝对确定其意图。但是，您可以根据约定以及合乎逻辑的情况做出很好的猜测。

客户和会员之间的关系是关联的而不是识别的，这是有道理的。

# extjs4 - 覆盖 initComponent() 方法

> ID：16211380
> 
> 赞同：2
> 
> 时间：2013-04-25T09:40:35.860
> 
> 标签：extjs4, extjs-mvc

我想覆盖 Ext.grid.column.Column 类的 initComponent() 方法。但是它是如何执行所有这些行的。基本上我想从元素中删除侦听器并将其分配给其他元素。

```
Ext.override(Ext.grid.column.Column, 
{     
    initComponent: function(){
         .
         .  //All lines are as it is till me.callParents(); 
         .
         .
         .
         .
         .
         .
         .
         // Initialize as a HeaderContainer
         me.callParent(arguments);

        me.on({      <<<------------------------------Do not need these.
            element:  'el',
            click:    me.onElClick,
            dblclick: me.onElDblClick,
            scope:    me
        });
        me.on({      <<<------------------------------Do not need these.
            element:    'titleEl',
            mouseenter: me.onTitleMouseOver,
            mouseleave: me.onTitleMouseOut,
            scope:      me
        });

    }

} 
```

我不想将听众附加到“el”和“titleEl”，所以我删除了这些行。但是一些它仍然如何添加侦听器。我还在 AfterRender 函数中写了 me.un() 。即使它为“El”和“titleEl”添加了监听器

谁能指导我哪里错了？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:27:59.493

而不是使用`Ext.override`，使用`Ext.define`创建一个子类。重新定义`initComponent`方法时，可以使用`this.superclass.superclass.initComponent.call`跳过`Ext.grid.column.Column#initComponent`。

```
Ext.define('MyApp.grid.column.Column', {
    extend: 'Ext.grid.column.Column',
    alias:  'widget.mycolumn',

    initComponent: function(){
        // Pre-initComponent from column class here

        // Ext.grid.header.Container#initComponent
        this.superclass.superclass.initComponent.call(this);

        // Do optional stuff here
    }
}); 
```

然后，当您创建新列时，`xtype: 'mycolumn'`使用您自己的实现，同时仍然能够根据需要使用常规列。

# c# - 解析用逗号分隔的文本文件

> ID：16211382
> 
> 赞同：0
> 
> 时间：2013-04-25T09:40:43.923
> 
> 标签：c#, fileparsing

我正在开发一个应用程序来读取文本文件并绘制图表。文本文件将类似于

```
#Pattern Name Item1, Item2, Item3, gx1, gy1, gz1 
115, 80, 64, 30.752, 27.587, 15.806 
195, 151, 130, 108.983, 102.517, 66.353 
94, 123, 156, 43.217, 50.874, 93.700 
88, 108, 65, 26.158, 37.980, 17.288 
130, 129, 177, 68.096, 66.289, 127.182 
100, 190, 171, 71.604, 119.764, 122.349 
.........................................
........................................
#Pattern Name2 Item1, Item2, Item3, gx1, gy1, gz1 
115, 80, 64, 30.752, 27.587, 15.806 
195, 151, 130, 108.983, 102.517, 66.353 
94, 123, 156, 43.217, 50.874, 93.700 
88, 108, 65, 26.158, 37.980, 17.288 
130, 129, 177, 68.096, 66.289, 127.182 
100, 190, 171, 71.604, 119.764, 122.349 
```

等等

我需要值 gx1,gy1 。我计划通过计算空格和逗号（每个 3 个）来阅读它们。但这听起来合适吗？是否有任何优化或更好的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:43:25.180

使用 Linq 怎么样？

```
var allparts = File.ReadLines(filename)
                .Where(line => !line.StartsWith("#"))
                .Select(line => line.Split(','))
                .Select(parts => new {gx1=parts[3], gy1=parts[4]} ) 
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:44:51.473

您拥有的是一个简单的 CSV 文件。我会推荐：

1）使用 CSV 解析库（例如[http://www.filehelpers.com/](http://www.filehelpers.com/)）
2）自己逐行解析：

```
String[] lines = File.ReadAllLines(...);
foreach(String line in lines)
{
   String parts[] = line.Split(",", StringSplitOptions.IgnoreEmpty);
   double gx1 = Double.Parse(parts[5]);
   double gx2 = Double.Parse(parts[6]);
} 
```

但是，您需要为您的特殊行添加一些验证/跳行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:09:10.630

[您应该像这样](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)使用现有的 csv 解析器。

但是，假设模式的名称是唯一的并且您想稍后访问它：

```
var gxDict = new Dictionary<string, List<Tuple<double, double>>>();
List<Tuple<double, double>> currentGxList = null;
foreach (string line in File.ReadLines(filePath))
{
    if (line.StartsWith("#Pattern"))
    {
        string[] headers = line.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
        string patternField = headers.First();
        string patterName = string.Join(" ", patternField.Split().Skip(1).Take(2));
        List<Tuple<double, double>> gxList = null;
        if (gxDict.TryGetValue(patterName, out gxList))
            currentGxList = gxList;
        else
        {
            currentGxList = new List<Tuple<double, double>>();
            gxDict.Add(patterName, currentGxList);
        }
    }
    else
    {
        if (currentGxList != null)
        {
            string[] values = line.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
            double gx1;
            double gy1;
            string gx1Str = values.ElementAtOrDefault(3);
            string gy1Str = values.ElementAtOrDefault(4);
            if (double.TryParse(gx1Str, out gx1) && double.TryParse(gx1Str, out gy1))
            {
                currentGxList.Add(Tuple.Create(gx1, gy1));
            }
        }
    }
} 
```

// 现在您可以通过这种方式访问​​它：

```
List<Tuple<double, double>> nameItem1Vals = gxDict["Name Item1"];
foreach (var xy in nameItem1Vals)
    Console.WriteLine("gx1: {0} gy1: {1}", xy.Item1, xy.Item2); 
```

// 或者在循环中：

```
foreach (var kv in gxDict)
{
    string pattern = kv.Key;
    Console.WriteLine("pattern: {0}", pattern);
    foreach (var xy in nameItem1Vals)
        Console.WriteLine("gx1: {0} gy1: {1}", xy.Item1, xy.Item2);
} 
```

请注意，当`IO`您需要在文件级别进行事件处理以及尝试解析也可能导致异常的输入时，我会避免使用 Linq。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:45:15.383

读取每一行然后 line.Split(", ") 怎么样？你可以拥有：

```
var items = line.Split(", ");
var gx1 = items[3];
var gy1 = items[4];
var gz1 = items[5]; 
```

# php - css javascript php div 显示/隐藏

> ID：16211383
> 
> 赞同：2
> 
> 时间：2013-04-25T09:40:46.267
> 
> 标签：php, javascript, css, html

这是我的代码：

```
<?
    while ($row1 = mysql_fetch_object($result1)) {
       echo '<a href="#" onclick="showhide("'.$row1->id.'");">Name</a>';
       while ($row2 = mysql_fetch_object($result2)) {
          echo '<div id="'.$row1->id.'">';
          echo 'blabla';
          echo '</div>';
       }
    }
?>
    <script> 
    var state = 'none';
    function showhide(layer_ref){
    if(state == 'block'){
    state = 'none';
    }else{
    state = 'block';
    }
    if(document.all){ //IS IE 4 or 5 (or 6 beta)
    eval("document.all." +layer_ref+ ".style.display = state");
    }
    if (document.layers) { //IS NETSCAPE 4 or below
    document.layers[layer_ref].display = state;
    }
    if (document.getElementById &&!document.all) {
    hza = document.getElementById(layer_ref);
    hza.style.display = state;
    }
    }
    </script> 
```

这输出类似：

```
Name
  blabla
Name
  blabla
... 
```

并且当单击头部（名称）时，它应该切换它的内容（显示/隐藏），但它没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:48:53.637

这可能对您有用：

```
<script language="JavaScript">
    function toggle(id) {
        var state = document.getElementById(id).style.display;
            if (state == 'block') {
                document.getElementById(id).style.display = 'none';
            } else {
                document.getElementById(id).style.display = 'block';
            }
        }
</script> 
```

[现场演示在这里>>](http://codepad.viper-7.com/kefpTo)

# jquery - addClass、removeClass、css jquery 函数不起作用

> ID：16211388
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:40:59.783
> 
> 标签：jquery, html

我找到[了这个页面](http://www.windsorbrokers.biz/prices/live_ticker_en.php)，我需要将字体颜色从黑色更改为白色。

我尝试了这些方法，但没有奏效：

1.  jquery添加类功能（将类添加到SPAN标签）
2.  jquery删除类函数（从MARQUEE标签中删除类scrollingNews）
3.  jquery css 函数（将 css 添加到 SPAN 标签）

代码：

```
$(document).ready(function() {  

  $('#tickerV span').addClass('test');
  $('marquee').removeClass('scrollingNews')  
  $('#tickerV span').css({color: white});

}); 
```

请问你能帮忙吗？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:42:49.450

尝试这个

```
 $('span').css({ 'color': 'red'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:05:48.083

如果 iframe 的内容在同一个域中，运行相同的协议和相同的端口，您只能这样做。我非常怀疑它是，那么你不会将它加载到 iframe 中。

[https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript?redirectlocale=en-US&redirectslug=Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript?redirectlocale=en-US&redirectslug=Same_origin_policy_for_JavaScript)

# asp.net - Oracle Dual 与 Sys.Dual

> ID：16211391
> 
> 赞同：1
> 
> 时间：2013-04-25T09:41:09.863
> 
> 标签：asp.net, oracle

我使用 Oracle 作为我的 asp.net 项目的后端。我有一个名为 Test 的用户。所有序列都运行良好`(select seq_name.nextval from dual;)`，但现在我无法直接访问 dual（序列仅在我说时才有效`select seq_name.nextval from sys.dual`。所以现在我必须使用 sys.dual。这也导致函数`ORA_ASPNET_CREATEUSER`功能（asp.net 成员资格）变得无效，因为我猜它也使用双重而不是 sys.dual。

有什么线索吗？

# java - 客户端代码可以访问或设置http请求属性吗？

> ID：16211392
> 
> 赞同：2
> 
> 时间：2013-04-25T09:41:10.863
> 
> 标签：java, httprequest

我有理由相信我知道这个问题的答案，但我正在努力寻找任何具体的信息。我知道客户端向 http 服务器提交请求，可选择提供请求​​参数。服务器具有通过对象将信息存储在请求属性中的附加功能。我的问题是，客户端是否可以访问 http 请求对象中的属性？我们有很多写得不好的代码，看起来像这样：

```
if (request.getAttribute("name") != null)
    name = request.getAttribute("name);
else if (request.getParameter("name") != null)
    name = request.getParameter("name"); 
```

我猜这是因为最初的开发者并没有完全理解客户端 http 请求如何向服务器提交数据。无论如何，我目前正在对请求数据实施额外的验证和编码，以防止 XSS 漏洞，并想知道客户端是否有可能破坏/破解/利用请求属性（假设它们从未填充过来自客户端的数据）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:44:10.563

不。属性是 servlet 规范添加的内容，可用于在对请求进行操作的不同实体之间进行通信。它们不通过网络传输，因此它们不存在客户端。

客户端可以设置正文、参数（即 url）和标题，仅此而已。

看：

*   [http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5)
*   [HttpServletRequest 的属性字段如何映射到原始 HTTP 请求？](https://stackoverflow.com/questions/911529/how-the-attribute-field-of-a-httpservletrequest-maps-to-a-raw-http-request)

# php - htaccess 重定向未完成的任务

> ID：16211396
> 
> 赞同：1
> 
> 时间：2013-04-25T09:41:14.690
> 
> 标签：php, mysql, .htaccess

几天前我问了一个无法回答的问题，我几乎有了它但不完全，我确定这是我想念的东西，你们可以帮助我......

这是代码：

```
 RewriteEngine on
    RewriteCond %{HTTP_HOST} ^monitorbc\.info$ [OR]
    RewriteCond %{HTTP_HOST} ^www\.monitorbc\.info$
    RewriteRule ^notas\.php?(.*) "https://monitorbc.info/monitor3/notas.php?" [R=301,L]

    # one of the links from the old site = https://monitorbc.info/notas.php?id=699&sec=economia
    # It should end up like this = https://monitorbc.info/monitor3/notas.php?id=699&sec=economia 
```

问题是它确实重定向但由于某种原因重定向停止在 ? 签名所以它没有完成任务。

希望这次我说得通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:47:41.313

您无法匹配重写规则中的查询字符串，您只能匹配`%{QUERY_STRING}`重写条件内的变量。`?`您在表达式中的值被评估为“php”中的最后一个“p”是可选的。但是因为你似乎并没有使用查询字符串。删除所有`?`标记。默认情况下，查询字符串附加到规则的目标：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^monitorbc\.info$ [OR]
RewriteCond %{HTTP_HOST} ^www\.monitorbc\.info$
RewriteRule ^notas\.php$ https://monitorbc.info/monitor3/notas.php [R=301,L] 
```

# ubuntu - 在 Ubuntu 中，如何从 PHP 执行多个同时终端？

> ID：16211401
> 
> 赞同：1
> 
> 时间：2013-04-25T09:41:31.280
> 
> 标签：ubuntu, php

我有一个从 CLI 运行的 PHP 脚本。

在脚本中，我有以下循环：

```
foreach($array as $key => $value){

    exec("gnome-terminal -e php myscript.php $key $value > /dev/null");

} 
```

我期望发生的是一个新的终端将弹出并在单独的终端窗口中同时运行我的脚本和相关参数。

能够可视化数据只是为了调试。在我确认脚本正常工作后，我想使用以下命令在后台运行它：

```
exec("php myscript.php $key $value" > /dev/null &); 
```

但是，两者都没有按预期工作。第二个命令，即使它运行，它仍然等待第一个脚本完成，然后再进入循环的下一次迭代。

我正在使用 Ubuntu 12.04。我怎样才能让它们同时运行以进行调试，然后在不同时在后台静默运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T00:00:52.633

由于您正在运行另一个 PHP 进程，您是否考虑过使用 fork？

[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:51:45.420

问题可能是：网络服务器在与您不同的用户下运行。它不知道 X-Server 在哪里，而且 X-Server 通常不允许来自不同用户的连接。所以你必须做两件事：

当您从 PHP 运行 gnome 终端时，您必须确保设置了 DISPLAY 变量。这应该这样做：

```
exec("DISPLAY=":0" gnome-terminal -e php myscript.php $key $value > /dev/null &"); 
```

您必须允许远程连接。您可以`xhost +`在 X-Session 中运行的终端中执行此操作，但这将允许所有连接，因此请小心。

# .net - 与智能卡的 TLS 握手随机失败

> ID：16211403
> 
> 赞同：1
> 
> 时间：2013-04-25T09:41:35.570
> 
> 标签：.net, sockets, ssl, smartcard

我有一个 Windows 服务，它定期使用 .NET Socket 类连接到主机。它是使用 SMTP 协议的标准 TCP/IP 连接。

连接由存储在智能卡上的证书保护。我正在使用 SslStream 类来处理 SSL 内容。

这在大多数情况下都有效。但是在随机时间点，身份验证失败。我收到此错误：

```
A call to SSPI failed, see inner exception.
Error type:
System.Security.Authentication.AuthenticationException
Server stack trace: 
at System.Net.Security.SslState.EndProcessAuthentication(IAsyncResult result)
at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization) 
```

内部异常：

```
System.ComponentModel.Win32Exception
The Local Security Authority cannot be contacted 
```

尝试失败后，AuthenticationExcpetion 仍然存在，但内部异常发生了变化：

```
A signature operation must be performed before the user can authenticate 
```

此时我必须重新启动服务，它现在将完美连接。SSL 握手会在错误再次发生之前工作一段时间（有时是几天）。

# php - 无法从表中检索所有行

> ID：16211404
> 
> 赞同：0
> 
> 时间：2013-04-25T09:41:37.703
> 
> 标签：php, mysql, web, fetch

在过去的一个小时里，我尝试想办法让服务器识别用户是否已经在我的 MySQL 数据库中拥有类似的行

你们有谁可以帮帮我吗...

这是我现在完成的代码

```
$nummer = $_GET['a'];
$klasse = strtoupper ( $_GET['b'] );

$kid = $nummer . '.' . $klasse;

$result = $db->query("SELECT kid FROM Kcode WHERE sid='".$_SESSION['id']."'");
$resa = $result->fetch();

$b = strtoupper ( $resa['kid'] );
$a = $kid
$c = $_SESSION['id'];

if ($a !== $b){
echo "insert";
} else {
echo "already exists";
} 
```

可以更深入地解释不同的 get 命令是什么：

*   `$_GET['a']`=从上一页检索到的一封信
*   `$_GET['b']`=从上一页检索到的数字

我想选择的“孩子”是我的 Kcode 表中的一行，问题是我想比较几个孩子`$a`......但是当我尝试这种方式时，它只会检索最后创建的。

谢谢你的时间

编辑：如评论中所说，我想`$kid`与名为 Kid 的 mysql 行进行比较`WHEN sid=$_SESSION['id']`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:01:17.487

如果你想检索多行，你需要把你`fetch`放在一个循环中：

```
$exists = false;

while($resa = $result->fetch()) {

    $b = strtoupper ( $resa['kid'] );
    $a = $kid
    $c = $_SESSION['id'];

    if ($a !== $b){
        //echo "insert";
    } else {
        $exists = true;
        //echo "already exists";
    }
}

if($exists){
{
    echo "already exists";
} else {
    echo "insert";
} 
```

这是你想做的吗？

现在，如果您要做的只是查看一行是否存在，您应该修改您的查询：

```
$result = $db->query("SELECT kid FROM Kcode WHERE sid='".$_SESSION['id']."' 
                      AND kid='$kid'"); 
```

由于您是`$kid`从您的`GET`参数中获取的，因此您需要先清理它，以防止 SQL 注入。

# php - 如何在一个链接表中插入多个 ID？

> ID：16211405
> 
> 赞同：0
> 
> 时间：2013-04-25T09:41:38.710
> 
> 标签：php, jquery, mysql

我想在 Knowledgedetail 中插入 de EmployeeID 和 KnowledgeID。他创建了员工，但在 Knowledgedetail 中什么也不做。我现在没有代码，我尝试了很多东西，但我不知道。
在 Addprofile.php 中，您首先创建配置文件，并且至少选择您的知识。我的问题是，如果制作个人资料并选择知识，如何在知识细节中获取我的 ID。

**表 1
员工**：员工 ID、姓名、机构、电子邮件、电话号码、照片、描述
**表 2
知识**：KnowledgeID、知识
**表 3
Knowledgedetail**：KnowledgedetailID、EmployeeID KnowledgeID

EmployeeID out 员工与 EmployeeID out Knowledgedetail 和
KnowledgeID out Knowledge 有关系 KnowledgeID out Knowledegedetail

添加配置文件.php

```
<?php
include("connection.php");
?>
<!DOCTYPE html>
<html>
<head>
    <title>Information System</title> 
    <link rel="stylesheet" type="text/css" href="css/test.css">
    <meta charset ="utf-8">
    <link rel='stylesheet' href='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css' type='text/css' media='screen' />  
    <link rel='stylesheet' href='css/ui.multiselect.css' type='text/css' media='screen' />
    <script src="../Informatiesysteem/js/jquery.min.js"></script>
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js'></script>
    <script type='text/javascript' src='../Informatiesysteem/js/ui.multiselect.js'></script>
    <script type='text/javascript'>
            jQuery(document).ready(function() {
                jQuery("#selectitems").multiselect();
            });
    </script>
</head>

<body>
    <div id="container">
        <div id="logo"></div>
            <div id="header">
            <h1>Add Profile</h1>
            </div>
                    <div id="menu">
                    </div>
                        <div id="content">
                <?php
                $result = mysql_query("select knowledgeid, knowledge from knowledge");
                $items = array(); 
                $selected = array();
                while ($row = mysql_fetch_array($result)){  
                $id [] = $row [ 'knowlegdeid' ];
                $items[] = $row[ 'knowledge' ];  
                }
                //form processing
                if (isset($_POST['selectitems'])) {
                $selected = $_POST['selectitems'];
                }       
                if (!empty($selected)) : print_r($selected); endif;
                ?>
                <form enctype="multipart/form-data" id="my form" method="post" action="Addedprofile.php">
                Name:            <input type="text" name="name" /></br>
                Establishment:   <input type="text" name="establishment"/></br>
                E-Mail:          <input type="email" name="email"/></br>            
                Phonenumber:     <input type="tel" name="phonenumber"/></br>    
                Photo:           <input type="file" name="photo"/></br>
                Description:     <textarea rows="4" cols="50" name="description"></textarea></br>
                Knowledge: <select name="selectitems[]" id="selectitems" multiple="multiple" style="width: 450px; height: 180px;">
                <?php //first we add the list of selected items if any
                foreach ($selected as $sel) { ?>
                <option value="<?php echo $sel; ?>" selected="selected"><?php echo $id[$sel]; $items[$sel];?></option>
                <?php } ?>
                <?php foreach ($items as $i => $v) { //then insert all items, skipping those who were added above
                if (in_array($d, $i, $selected)) : continue; endif; //skip ?>
                <option value="<?php echo $d, $i; ?>"><?php echo $v; ?></option>
                <?php } ?>
                </select>                                    
                </br></br></br></br>
                <input type="submit" name="add_profile" value="Add profile" />                       
                </form>
                </div>
</body>
</html> 
```

添加profile.php

```
<!DOCTYPE html>
<html>
<meta http-equiv="refresh" content=";URL=Addprofile.php" />
</html>
<?php
include ("connection.php");
$Name = $_POST['name'];
$Establishment = $_POST['establishment'];
$Email = $_POST['email'];
$Phonenumber = $_POST['phonenumber'];
$Photo = $_POST['photo'];
$Description = $_POST['description'];

$sql = "INSERT INTO employees  
        (
         name, 
         establishment,
         email,
         phonenumber,
         photo,
         description
         )
         VALUES ('". $Name ."', '". $Establishment ."', '". $Email ."', '". $Phonenumber ."', '". $Photo ."', '". $Description ."')";

$sqldetail = "INSERT INTO knowledgedetail 
        (
        employeeid,
        knowledgeid     
        )
        VALUES ......................."; 

                $add = mysql_query($sql);           

            if ($add === false){
                   echo 'Profile is not created';
             }
            else {               
                 echo "Profile created";
                 }

            echo '</br>';

$knowledge = mysql_query($sqldetail);                                       

        if ($add === false){
               echo 'Knowledge is not added';
         }
        else {               
             echo "Knowledge added";
             }

            echo '</br>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:10:34.320

这是您的代码有问题的一件事：

```
$knowledge = mysql_query($sqldetail);                                       

if ($add === false){
    echo 'Knowledge is not added';
}
else {               
    echo "Knowledge added";
} 
```

在`if`声明中，你应该比较`$knowledge`而不是`$add`。所以，它应该是：

```
$knowledge = mysql_query($sqldetail);                                       

if ($knowledge === false){
    echo 'Knowledge is not added';
}
else {               
    echo "Knowledge added";
} 
```

`mysql_error()`另外，每次`mysql_query()`失败时添加一个调用：

```
echo "MySQL ERROR: SQL = $sql -- Error=".mysql_error()"; 
```

# c++ - 使用 boost::assign::list_of 构造 std::vector 时的歧义

> ID：16211410
> 
> 赞同：6
> 
> 时间：2013-04-25T09:41:55.400
> 
> 标签：c++, boost, c++98

这段代码：

```
std::vector<int>(boost::assign::list_of<int>(1)(2)(3)); 
```

给出错误：

```
main.cpp: In member function 'void <unnamed>::RequestHandler::processRequest(Foo&, Bar, unsigned int, unsigned int*, const char*, boost::shared_ptr<Baz::IOutput>&)':
main.cpp:450: error: call of overloaded 'vector(boost::assign_detail::generic_list<int>&)' is ambiguous
/4.4.2/bits/stl_vector.h:241: note: candidates are: std::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = int, _Alloc = std::allocator<int>]
/4.4.2/bits/stl_vector.h:227: note:                 std::vector<_Tp, _Alloc>::vector(size_t, const _Tp&, const _Alloc&) [with _Tp = int, _Alloc = std::allocator<int>]
/4.4.2/bits/stl_vector.h:215: note:                 std::vector<_Tp, _Alloc>::vector(const _Alloc&) [with _Tp = int, _Alloc = std::allocator<int>] 
```

为 gcc 4.4.2 编译时。

我该如何解决这个问题？最终我试图编译以下内容：

```
using namespace std;
using namespace boost::assign;

typedef boost::variant<vector<bool>, vector<int>, vector<string> > Container;

vector<pair<string, Container > > v =
            list_of(pair<string, Container >("Scotland",Container(vector<int>(list_of<int>(1)(2)(3)))))
            (pair<string, Container >("Sweden",Container())); 
```

出于同样的原因，这失败了。

我的应用程序涉及为单元测试设置数据结构。我希望初始化清楚，而不是必须做很多 push_backs 等。

**更新：**

这是一个修复：

```
std::vector<std::pair<std::string, Container > > v =
    boost::assign::list_of(std::pair<std::string, Container >("Scotland",Container(boost::assign::list_of(1)(2)(3).convert_to_container<std::vector<int> >())))
    (std::pair<std::string, Container >("Sweden",Container())); 
```

这太丑陋了。我该怎么做才能使这一点更清楚。我的单元测试只写在头文件中，所以我不使用`using namespace`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:22:49.037

这是[在 VS2010 中使用 list_of 进行的歧义调用](https://stackoverflow.com/questions/12352692/ambiguous-call-with-list-of-in-vs2010/12362548#12362548)。Boost.Assign 是针对 C++03 标准库编写的。C++11 中的事情发生了变化，而 Boost.Assign 尚未更新。错误报告在[这里](https://svn.boost.org/trac/boost/ticket/7364)。

# php - php switch 语句和 0

> ID：16211411
> 
> 赞同：1
> 
> 时间：2013-04-25T09:41:57.680
> 
> 标签：php, switch-statement, zero

嗨，我今天看到这样的代码

```
$i=0;
switch($i){
    case 'TEST': print "Test";break;
    case 0: print "0";break;
} 
```

正常输出似乎是，`0`但它打印`Test`. 然后我尝试理解它并在[这里](https://stackoverflow.com/questions/10959160/php-is-switch-statement-check-with-0-string-or-00-string)找到解决方案。也就是说，当将数字与字符串进行比较时，字符串将转换为数字并以数字方式进行比较。好的，然后就可以得到输出了`Test`。

但是，如果我设置与它相同怎么办

```
$i=0;
switch($i){
    case ($a === 'Test'): print "Text";break;
    case ($a === 0): print "0";break;
} 
```

这也给出了结果`Test`，所以我在这里很困惑。如果我使用`==`而不是`===`那么它显示为空白。所以请清除我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:47:34.947

您是否必须将 $i 设为数字？让它也成为字符串...

```
$i="0";
switch($i){
    case 'Test': print "Text";break;
    case '0': print "0";break;
} 
```

打印 0...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T20:25:29.467

切换对待`0`，`false`这样你就可以去：

```
$i=0;
switch(true){
    case $i === 'TEST': print "Test";
        break;
    case $i === 0 : print "0";
        break;
} 
```

# deployment - 方便在 Glassfish 服务器上重新部署应用程序

> ID：16211416
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:07.573
> 
> 标签：deployment, admin, glassfish-3

目前，将应用程序重新部署到我们的 glassfish 服务器的最佳方式是：

1.  停止域（所以我们不会遇到很多异常，因为重新部署时会出现查询）
2.  从域文件夹中删除应用程序
3.  起始域
4.  部署完整的应用程序

有没有我想念的东西可以减少这个过程的耗时。

谢谢哈桑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:56:49.250

您应该能够使用 NetBeans 集成的热部署来更快地进行部署。NetBeans 检测到已更改的文件并仅将这些文件复制到部署文件夹。

要显式启用（默认情况下应启用）：

1.  转到项目-> 属性-> 构建-> 运行
2.  启用“保存时部署”

确保您的`web.xml`:

```
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param> 
```

您可以忽略重新部署的异常。

另一种选择是结帐[JRebel](http://zeroturnaround.com/software/jrebel)。

# android - 如何使用 th SUM 函数从 android 中的 sqlite DB 返回值？

> ID：16211417
> 
> 赞同：1
> 
> 时间：2013-04-25T09:42:11.047
> 
> 标签：android, android-sqlite

在我的应用程序中，将公司的金额详细信息存储在我的 sq lite DB 中。例如，我在名称列 - 公司 1 中的第一个 DB 位置，总列 - 400，名称列 - 公司 2 中 DB 的第二个位置，总列 - 800，DB在名称列的第三位-公司1，总列-500。如何对公司1的详细信息求和以返回总金额。

我的主要编码是，

```
String str = db.company_amount("Company 1");
Log.v("Total", ""+str); 
```

我的数据库编码是，

```
String company_amount(String name){

SQLiteDatabase db = this.getReadableDatabase();

String s = "";
Cursor cursor = db.rawQuery("SELECT SUM(KEY_AMOUNT) FROM TABLE_BILL_DETAILS WHERE = ?", new String[] {String.valueOf(name)});

if (cursor != null) {

    if (cursor.moveToNext()) {
        s = cursor.getString(1);
        return cursor.getString(1);
    }
    cursor.close();

}

return s;
} 
```

它显示了一些错误，我不知道如何返回值。有人知道请帮我解决这个问题。

我的 Logcat 错误

```
04-25 14:54:06.701: E/AndroidRuntime(2776): FATAL EXCEPTION: main
04-25 14:54:06.701: E/AndroidRuntime(2776): java.lang.RuntimeException: Unable to start activity 

ComponentInfo{invoicebill.details/invoicebill.details.Total_company_details}:                  android.database.sqlite.SQLiteException: near "=": syntax error: , while compiling: SELECT SUM(KEY_AMOUNT) FROM TABLE_BILL_DETAILS WHERE = ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:44:57.880

```
WHERE = ? 
```

这是不正确的 SQL 语法。您忘记指定要与参数比较的字段。我猜它的*名字*或类似的东西，所以正确的语法是这样的：

```
WHERE name = ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:08:16.217

```
SQLiteDatabase db = getReadableDatabase();    
String sql = "SELECT SUM(KEY_AMOUNT) FROM TABLE_BILL_DETAILS WHERE name = ?";
long sum = android.database.DatabaseUtils.longForQuery(db, sql, new String[]{name}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-31T05:47:43.527

您可以像这样使用 id 获取详细信息。

```
public int getTotalOfAmount(int id) { 

    odb = dbh.getReadableDatabase(); 

    Cursor c = odb.rawQuery("SELECT SUM(" + KEY_AMOUNT + ") FROM " + DATABASE_TABLE + " WHERE " + KEY_ID + " = " + id, null); 

    c.moveToFirst(); 
    int i = c.getInt(0); 
    c.close(); 
    return i;

} 
```

.

# c++ - c++ char比较看一个字符串是否符合我们的需要

> ID：16211418
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:11.683
> 
> 标签：c++, string, comparison, char

`tablolar`如果字符串变量的字符不包含任何字符而是在`a-z`and之间包含小写字母，我想做我的工作`','`。你有什么建议？

如果字符串 tablolar 是；

“tablo”->没关系

"tablo,tablobir,tabloiki,tablouc"->没关系

“ta”->没关系

但如果是的话；

“tablo2”-> 不行

“ta546465”-> 不行

“禁忌”-> 不好

“tablo,234,tablobir”-> 不行

"tablo^%&!)=(,tabluc"-> 不行

我尝试的是wrog；

```
 for(int z=0;z<tablolar.size();z++){
    if ((tablolar[z] == ',') || (tablolar[z] >= 'a' && tablolar[z] <= 'z'))
{//do your work here}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:45:47.983

`tablolar.find_first_not_of("abcdefghijknmopqrstuvwxyz,")`将返回第一个无效字符的位置，或者`std::string::npos`字符串是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:46:56.213

```
bool fitsOurNeeds(const std::string &tablolar) {
    for (int z=0; z < tablolar.size(); z++)
        if (!((tablolar[z] == ',') || (tablolar[z] >= 'a' && tablolar[z] <= 'z')))
            return false;
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:54:00.480

c 函数**islower**测试小写。所以你可能想要这些方面的东西：

```
#include <algorithm>
#include <cctype> // for islower

bool fitsOurNeeds(std::string const& tabular)
{
    return std::all_of(tabular.begin(), tabular.end(),
        [](char ch)
    {
        return islower(ch) || ch == ',';
    });
} 
```

# java - ehcache与tomcat的简单例子

> ID：16211420
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:16.790
> 
> 标签：java, jakarta-ee, tomcat, caching, ehcache

我想在 Tomcat 中托管的 Java Web 应用程序中包含 Ehcache。我想要做的是检查我的缓存中是否存在一个键，如果该键存在则检索它，如果不存在则将其添加到缓存中以供以后检索（就像 memcached 使用场景一样）。

我搜索了文档，但找不到有关如何实现这个简单示例的有用信息。我只发现我需要将 ehcache-core.jar 和 slf4j*.jar 与 ehcache.xml 一起放在我的类路径中。然后呢？我可以在示例中看到一个 Ehcache 缓存对象 - 但是我应该在哪里实例化它以便可以从我的 servlet/JSP 访问？另外，你能推荐一个非常简单的缓存配置来放入 ehcache.xml 吗？是默认的

```
    <默认缓存
           maxEntriesLocalHeap="0"
           永恒=“假”
           timeToIdleSeconds="1200"
           timeToLiveSeconds="1200">
    </defaultCache>

```

好 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:52:52.213

做类似的事情

```
CacheManager.getInstance().addCache("xyz"); // creates a cache called xyz.

Cache xyz = CacheManager.getInstance().getCache("xyz");

xyz.put(new Element("key", new Person()));
Element e = xyz.get("key");
Person p = (Person) e.getObjectValue(); 
```

有更好的优雅方式来玩缓存。请参阅[http://ehcache.org/documentation/code-samples](http://ehcache.org/documentation/code-samples)。还要检查与它的弹簧集成。

# c# - 通过 c# 使用 ACS 管理服务在 IdP 上重新导入元数据

> ID：16211421
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:17.047
> 
> 标签：c#, azure, umbraco, acs

我正在从事一个涉及 ADFS2.0、Azure ACS 和 Umbraco CMS 的项目。

当我们创建一个新网站，并将其添加到依赖方应用程序中，并在 Azure 中添加一个身份提供者时，它应该也将设置推送到 Umbraco CMS。

然而，这种与 Umbraco 的联系似乎不起作用。它无法导入身份提供程序，除非我手动进入 Azure，然后从 WS-Federation 重新导入元数据。然后 IdP 也被推送到 Umbraco。

这个重新导入，我想从我的 C# 项目中做，但似乎无法在 API 中找到可能性

对此是否有某种解释，以及修复/解​​决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:41:03.020

我认为您要问的是是否有办法以编程方式为 ACS 中的身份提供者导入联合元数据。在这种情况下，答案是肯定的，这是支持的。

对以下 URL 进行 HTTP POST：https://[namespace].accesscontrol.windows.net/v2/mgmt/service/importFederationMetadata/ImportIdentityProvider

该请求的内容必须是：

*   Authorization 标头中的管理服务令牌（请参阅[此示例](http://msdn.microsoft.com/en-us/library/gg185905.aspx)）
*   包含元数据来源的 URL 的 HTTP 标头“metadataUrl”
*   包含身份提供者元数据的 POST 正文。

# html - 为什么我的 100% 身高过大？

> ID：16211424
> 
> 赞同：1
> 
> 时间：2013-04-25T09:42:22.667
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:45:16.693

**删除** `margin-top:100%`您的`#footer-content id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:45:32.567

因为您`background-image:`的背景渐变 id 的高度为 2000px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:49:33.737

您的页脚的边距设置为 100%

# c - 不使用 O_NONBLOCK 时避免发送阻塞

> ID：16211428
> 
> 赞同：4
> 
> 时间：2013-04-25T09:42:36.447
> 
> 标签：c, sockets, unix, select

我必须使用 unix 套接字（没有 O_NONBLOCK）为一个类编写一个聊天客户端-服务器，并在它们上选择异步 I/O。目前，在服务器上，我从客户端读取了 1024 个字节，并直接处理它。

例如，在消息的情况下，我将收到一个格式为`MSG <msg>`（代表客户端发送消息）的命令，我将遍历已连接客户端的所有套接字并将消息写入它们。

这种方法实际上有效，但我最近通过阅读 man 发现`send`如果套接字缓冲区已满并且未在套接字上设置标志 O_NONBLOCK ，它会阻塞。

我认为当客户端由于某些原因（崩溃、错误等）未读取时可能会发生此问题，这对我的服务器至关重要，因为它基本上会阻塞，直到该客户端再次读取。

所以这是我的问题：

**如果套接字缓冲区已满，在潜在阻塞套接字上避免发送阻塞的正确方法是什么？**

我目前仅使用 select 来检查套接字上是否有要读取的内容，但也许我也应该使用它来查看是否也可以在特定套接字上写入？而且，我能知道选择返回时可以读/写几个字节吗？例如，如果选择“告诉”我可以在这个套接字上写，我怎么知道在这个套接字上写实际上变成阻塞之前我最多可以写多少字节？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:34:44.860

您可以使用`setsockopt()`with`SO_SNDTIMEO`来设置`send()`将尝试完成其工作的最大时间量。

有关详细信息，请参见`man setsockopt`和`man 7 socket`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T10:14:52.223

> 这种方法确实有效，但我最近通过阅读 man of send 发现，如果套接字缓冲区已满并且未在套接字上设置标志 O_NONBLOCK，它可以阻塞。

这就是您使用 select 的原因，但它仍然不可靠，如下`man select`所述：

> 在 Linux 下，select() 可能会将套接字文件描述符报告为“准备好读取”，但随后会出现读取块。例如，当数据到达但检查时校验和错误并被丢弃时，可能会发生这种情况。可能存在文件描述符被虚假报告为就绪的其他情况。因此，在不应阻塞的套接字上使用 O_NONBLOCK 可能更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:59:33.000

这可能很可怕。如果您不进入非锁定模式并调用 select()，它会在内部将进程置于睡眠状态以获取特定的超时值。这意味着，fd 将在该特定时间段内被阻止。

# c# - 从另一个按钮执行回发网址

> ID：16211434
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:48.593
> 
> 标签：c#, jquery, asp.net, ajax, vb.net

我有两个 Button，buttonA（普通一个）和 ButtonB（有 postbackurl），我需要通过单击 ButtonA 来执行（buttonB）

```
<asp:button ID="ButtonA" runat="server"  text="Button" />
<asp:button ID="ButtonB" PostBackUrl="url" runat="server"  text="Button" />

<script>
  $(document).ready(function() {
      $("#<%= buttonA.ClientID%>").click(function(){
          $("#<%= buttonB.ClientID%>").trigger("click");
      });
  });
</script> 
```

有人可以告诉我，如何使用 Jquery 或代码隐藏来做到这一点，因为我真的不知道这是否可能？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:05:25.763

除非您将表单中的数据发布到 ButtonB's `PostBackUrl`，否则我只会将窗口重定向到 PostBackUrl，如下所示：

```
<asp:button ID="ButtonA" runat="server"  text="Button" />

<script>
  $(document).ready(function() {
      $("#<%= buttonA.ClientID%>").click(function(){
          window.location.href = 'url';
      });
  });
</script> 
```

无需调用另一个按钮的单击事件来重定向到不同的位置。

但是，如果您确实将数据与表单一起发回服务器，则需要执行以下操作：

```
<asp:button ID="ButtonA" runat="server"  text="Button" />
<asp:button ID="ButtonB" PostBackUrl="url" runat="server"  text="Button" />

<script>
  $(document).ready(function() {
      $("#<%= ButtonA.ClientID%>").click(function(){
          $("#<%= ButtonB.ClientID%>").click();
      });
  });
</script> 
```

# magento - 使用 PayPal Payment Advanced 时的 Magento Rest API 问题

> ID：16211437
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:54.713
> 
> 标签：magento

我正在使用 Magento 的 Rest API 从我的基于 Wordpress 的网站上销售商品。我在尝试使用 PayPal Payment Advanced 完成交易时遇到问题。下面是代码：

```
$paymentArray = array(
    "method" => "payflow_advanced",
    'cc_cid' => $_POST['cccvv'],
    'cc_owner' => $_POST['firstName'] . " ". $_POST['lastName'],
    'cc_number' => $_POST['ccnumber'],
    //'cc_type' => "MC",
    'cc_exp_year' => $_POST['ccmonth'],
    'cc_exp_month' => $_POST['ccyear'],
);

$resultPaymentMethod = $client->call($session, 'cart_payment.method', array($shoppingCartIncrementId, $paymentArray)); 
```

当我运行代码时，它返回为“true”，但 api 从未点击 PayPal 并授权交易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:10:43.193

一旦您 var_dump($resultPaymentMethod) 并查看显示输出的内容..

# objective-c - 通过 XML 连接 Web 服务

> ID：16211438
> 
> 赞同：0
> 
> 时间：2013-04-25T09:42:55.477
> 
> 标签：objective-c, xcode

```
NSURL *url = [NSURL URLWithString:@"http://192.168.1.56/AMSP/AMSPWS.asmx"];

NSString *soapMsg=[NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                   "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                   "<soap:Body>"
                   "<PostXMLStr xmlns=\"http://tempuri.org/\">"
                   "<cust>%@</cust>"
                   "<tran>%@</tran>"
                   "<ret>%@</ret>"
                   "<ppay>%@</ppay>"
                   "<recp>%@</recp>"
                   "<sCode>%@</sCode>"
                   "<companyShortName>%@</companyShortName>"
                   "<companyCode>%@</companyCode>"
                   "</PostXMLStr>"
                   "</soap:Body>"
                   "</soap:Envelope>",cust,trans,RETURNS,prepayment,receipt,spcode1,companyShortName,companyCode];

NSMutableURLRequest *requests = [NSMutableURLRequest requestWithURL:url
                                                        cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                    timeoutInterval:5];
NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMsg length]];
[requests setHTTPMethod:@"POST"];
[requests addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[requests addValue:msgLength forHTTPHeaderField:@"Content-Length"];
[requests addValue:@"http://tempuri.org/PostXMLStr" forHTTPHeaderField:@"SOAPAction"];

[requests setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding ]];

NSURLResponse *response;
NSError *error = nil;

NSData   *data =[[NSMutableData alloc]init];
data = [NSURLConnection sendSynchronousRequest:requests returningResponse:&response error:&error];

NSString *stringSoap;

stringSoap = [[NSString alloc] initWithData:data encoding:NSMacOSRomanStringEncoding];
NSDictionary *headers = [(NSHTTPURLResponse *)response allHeaderFields]; 
```

我是通过目标 C 连接 WebService 的新手。我不知道如何检查 XML 是否连接到 WebService。当我打印 stringSoap 时，我没有得到任何价值。我不知道这是调用 XML 的正确方法。如何检查 XML 是否连接到 WebService。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:48:59.287

由于您是新手，这将帮助您将 SOAP 服务转换为 ObjectiveC
[sudzc.com](http://sudzc.com/)
[wsdl2objc](https://code.google.com/p/wsdl2objc/)

# netbeans - Cygwin 中的“时间”命令有效，但在 NetBean 中无效

> ID：16211442
> 
> 赞同：1
> 
> 时间：2013-04-25T09:43:01.780
> 
> 标签：netbeans, time, command, cygwin

我可以在 Cygwin 中执行此操作，添加`time`命令

```
USER@USER_PC ~
$ time ./HelloWorld 
```

显示类似

```
Hello World!!!
real    0m0.270s
user    0m0.270s
sys     0m0.270s 
```

我已经部署了一个类似的 C/C++ 项目@NetBean7.2 @Win 7。

它在运行时显示错误消息，仅当我添加`time`Command 时，例如：

```
time "${OUTPUT_PATH}" 
```

，在文本字段*`Projcet_file-> R_Click -> Properties -> Run -> Run_Command:`*

, 并且只有默认值`${OUTPUT_PATH}`。

错误信息是

```
C:\ProjectFolder\time does not exist or is not an executable 
```

，似乎NetBean认为`time`是一个可执行文件

有没有更好的办法解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T20:41:57.720

如果从 cmd shell 调用，则 bash 的完整命令需要用引号引起来

```
bash -c "time ls" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:54:32.427

*time*是*bash*的内置命令。在我的 cygwin 安装中，正确的命令是：

```
c:\cygwin\bin\bash -c time 
```

您必须调整 bash 的路径。

# twitter-bootstrap - 如何防止 twitter bootstrap 的标签打破新行？

> ID：16211445
> 
> 赞同：4
> 
> 时间：2013-04-25T09:43:12.093
> 
> 标签：twitter-bootstrap

假设我有一个文本输入字段和一个标签。输入出现在标签之后的新行中。我需要他们都在同一行。我怎么能用引导程序做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:01:43.210

这取决于; 你在表格里吗？您可以使用[水平形式](http://twitter.github.io/bootstrap/base-css.html#forms)：

```
<form class="form-horizontal">
  <div class="control-group">
    <label class="control-label" for="inputEmail">Email</label>
    <div class="controls">
      <input type="text" id="inputEmail" placeholder="Email">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="inputPassword">Password</label>
    <div class="controls">
      <input type="password" id="inputPassword" placeholder="Password">
    </div>
  </div>
</form> 
```

或者，仅使用`row`具有不同`span`类的类应该可以达到您所追求的结果：

```
<div class="row">
    <div class="span3">
        <label for="txtName">Name:</label>
    </div>
    <div class="span9">
        <input type="text" id="txtName" name="Name" />
    </div>
</div> 
```

# gnu-make - 野牛中的自动制作，可与手写的makefile一起正常工作

> ID：16211465
> 
> 赞同：0
> 
> 时间：2013-04-25T09:44:13.827
> 
> 标签：gnu-make, bison, automake, gtk3, flex-lexer

朋友们，

我正在尝试通过 gnu-autotools 为 flex+bison+C 代码创建 Makefile（你可以说是玩具代码）。手写的 Makefile 工作正常

```
CC=gcc #-g -Wall
FLEX=flex
BISON=bison
LIBS=lfl
PROG=parse

${PROG}:bib.y scan.l main.c
    ${BISON} -d bib.y
    ${FLEX} -i scan.l
    ${CC} -Wall main.c lex.yy.c bib.tab.c `pkg-config --cflags --libs gtk+-3.0 glib-2.0` -${LIBS} -o $@

clean:
    rm -f lex.yy.c bib.tab.h ${PROG} bib.tab.c 
    touch scan.l bib.y main.c 
```

只对未使用的变量发出警告：

```
$ make -f MAKEFILE 
bison -d bib.y
flex -i scan.l
gcc  -Wall main.c lex.yy.c bib.tab.c `pkg-config --cflags --libs gtk+-3.0 glib-2.0` -lfl -o parse
main.c: In function ‘main’:
main.c:35:8: warning: type defaults to ‘int’ in declaration of ‘yy_create_buffer’ [-Wimplicit-int]
main.c:35:8: warning: unused variable ‘yy_create_buffer’ [-Wunused-variable]
lex.yy.c:1120:17: warning: ‘yyunput’ defined but not used [-Wunused-function]
lex.yy.c:1161:16: warning: ‘input’ defined but not used [-Wunused-function]
bib.y: In function ‘parse_entry’:
bib.y:79:9: warning: unused variable ‘author’ [-Wunused-variable] 
```

但是，当我尝试通过自动工具创建它时，它给出了问题：

```
##Configure.ac (made mostly with autoscan)
AC_PREREQ([2.69])
AC_INIT([Bi-Try],[1.0],[rudra.banerjee@aol.co.uk])
AM_INIT_AUTOMAKE([1.9.6])

# Checks for programs.
AC_PROG_CC
AC_PROG_YACC
AC_PROG_LEX

# Checks for libraries.
#AC_PROG_LIBTOOL
# Checks for header files.

# Checks for library functions.
AM_PATH_GTK_3_0([3.4.0],,AC_MSG_ERROR([Gtk+ 3.0.0 or higher required.]))

AC_CONFIG_FILES([Makefile])
AC_OUTPUT 
```

和makefile.am

```
bin_PROGRAMS = bitry
bitry_SOURCES = bib.y scan.l main.c 
AM_YFLAGS = -d
AM_LFLAGS = -i 
bitry_LDADD = @GTK_LIBS@ @LEXLIB@
AM_CFLAGS = @GTK_CFLAGS@ 
```

该过程的输出是：

> $ autoreconf --install Makefile.am: 安装 './INSTALL' Makefile.am: 安装 './COPYING' 使用 GNU 通用公共许可证 v3 文件 Makefile.am: 考虑将 COPYING 文件添加到版本控制系统 Makefile.am:对于您的代码，以避免有关您的项目使用哪个许可证的问题

```
$ ./configure -q

$ make -s
scan.o: In function `yy_get_previous_state':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1070: multiple definition of `yyin'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1070: first defined here
scan.o: In function `yy_switch_to_buffer':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1254: multiple definition of `yy_switch_to_buffer'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1254: first defined here
scan.o: In function `yy_delete_buffer':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1329: multiple definition of `yy_delete_buffer'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1329: first defined here
scan.o: In function `yy_flush_buffer':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1375: multiple definition of `yy_flush_buffer'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1375: first defined here
scan.o: In function `yy_create_buffer':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1299: multiple definition of `yy_create_buffer'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1299: first defined here
scan.o: In function `yyrestart':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1237: multiple definition of `yyrestart'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1237: first defined here
scan.o: In function `yylex':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:663: multiple definition of `yylex'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:663: first defined here
scan.o: In function `yy_get_previous_state':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1072: multiple definition of `yyout'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1072: first defined here
scan.o: In function `yypush_buffer_state':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1404: multiple definition of `yypush_buffer_state'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1404: first defined here
scan.o: In function `yypop_buffer_state':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1433: multiple definition of `yypop_buffer_state'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1433: first defined here
scan.o: In function `yy_scan_buffer':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1501: multiple definition of `yy_scan_buffer'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1501: first defined here
scan.o: In function `yy_scan_bytes':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1551: multiple definition of `yy_scan_bytes'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1551: first defined here
scan.o: In function `yy_scan_string':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1538: multiple definition of `yy_scan_string'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1538: first defined here
scan.o: In function `yyget_lineno':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1616: multiple definition of `yyget_lineno'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1616: first defined here
scan.o:(.data+0x0): multiple definition of `yylineno'
bib.o:(.data+0x0): first defined here
scan.o: In function `yyget_in':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1624: multiple definition of `yyget_in'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1624: first defined here
scan.o: In function `yyget_out':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1632: multiple definition of `yyget_out'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1632: first defined here
scan.o: In function `yyget_leng':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1640: multiple definition of `yyget_leng'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1640: first defined here
scan.o: In function `yyget_text':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1649: multiple definition of `yyget_text'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1649: first defined here
scan.o: In function `yyset_lineno':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1658: multiple definition of `yyset_lineno'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1658: first defined here
scan.o: In function `yyset_in':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1669: multiple definition of `yyset_in'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1669: first defined here
scan.o: In function `yyset_out':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1674: multiple definition of `yyset_out'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1674: first defined here
scan.o: In function `yyget_debug':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1680: multiple definition of `yyget_debug'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1680: first defined here
scan.o: In function `yy_get_previous_state':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1066: multiple definition of `yy_flex_debug'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1066: first defined here
scan.o: In function `yyset_debug':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1684: multiple definition of `yyset_debug'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1684: first defined here
scan.o: In function `yylex_destroy':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1717: multiple definition of `yylex_destroy'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1717: first defined here
scan.o: In function `yyalloc':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1763: multiple definition of `yyalloc'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1763: first defined here
scan.o: In function `yyrealloc':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1775: multiple definition of `yyrealloc'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1775: first defined here
scan.o: In function `yyfree':
/home/rudra/Programs/lex/Parsing/ruda/scan.c:1780: multiple definition of `yyfree'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.c:1780: first defined here
scan.o: In function `yywrap':
/home/rudra/Programs/lex/Parsing/ruda/scan.l:16: multiple definition of `yywrap'
bib.o:/home/rudra/Programs/lex/Parsing/ruda/bib.l:16: first defined here
main.o: In function `main':
/home/rudra/Programs/lex/Parsing/ruda/main.c:36: undefined reference to `setup_tree'
/home/rudra/Programs/lex/Parsing/ruda/main.c:44: undefined reference to `yyparse'
bib.o: In function `yylex':
bib.c:(.text+0x7c1): undefined reference to `yylval'
bib.c:(.text+0x84b): undefined reference to `yylval'
bib.c:(.text+0x872): undefined reference to `yylval'
scan.o: In function `yylex':
scan.c:(.text+0x7c1): undefined reference to `yylval'
scan.c:(.text+0x84b): undefined reference to `yylval'
scan.o:scan.c:(.text+0x872): more undefined references to `yylval' follow
collect2: error: ld returned 1 exit status
make: *** [bitry] Error 1 
```

我发布了 makefile 的长输出，以便对一些有经验的人有所帮助。期待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:10:32.870

啊……解决了。 `bison -d foo.y`一般使`foo.tab.h`;

对于汽车制造，它的制造`foo.h`。

解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:37:22.633

古代 Automakes 中有几个已知问题，包括您描述的问题。例如，您绝对应该升级到 1.13。

# drools - 如何在 Drools guvnor 的代码中获取逻辑插入的事实或插入事实

> ID：16211467
> 
> 赞同：0
> 
> 时间：2013-04-25T09:44:20.613
> 
> 标签：drools, guvnor

我的 guvnor 规则是这样的：

```
Rule "aa" 
 dialect "mvel" 
  when 
    Fund( amount> 10000 ) 

then 
 Alert fact0 = new Alert(); 
 fact0.setSummary( "hi" ); 
 insert( fact0 ); 
end 
```

并使用无状态知识会话。现在我想`fact0`在代码中得到它。怎么做？
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:39:40.257

最容易流口水的方法是使用查询。另一种选择是使用 ksession.getObjects()。你可以看看这个答案：[Retrieving fact of a specific type from working memory](https://stackoverflow.com/questions/15035209/retrieving-facts-of-a-specific-type-from-working-memory/15042055#15042055)

希望能帮助到你，

# cuda - 如何在cuda c中将“const void *”分配给“const uint64_t *”？

> ID：16211472
> 
> 赞同：0
> 
> 时间：2013-04-25T09:44:32.073
> 
> 标签：cuda, gpgpu

我想在 cuda c 中将“const void*”分配给“const uint64_t*”。

我做过这样的，

```
void func(const void *buffer)
{
  const uint64_t *words = buffer;
} 
```

但我收到这样的错误，

> 错误：“const void *”类型的值不能用于初始化“const uint64_t *”类型的实体

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:06:18.597

正如@sharptooth 所指出的，这为我修复了它：

```
#include <stdio.h>
#include <stdint.h>

void func(const void *buffer)
{
  const uint64_t *words = (const uint64_t *) buffer;
}

int main(){

  void *my_buf=0;
  func(my_buf);
  return 0;
} 
```

# .htaccess - 缩短/压缩 mod_rewrite 规则

> ID：16211474
> 
> 赞同：2
> 
> 时间：2013-04-25T09:44:33.487
> 
> 标签：.htaccess, mod-rewrite

在我的规则中，我有..

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2&info=$3&id=$4 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2&info=$3 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2 [QSA,L] 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$  index.php?page=$1 [QSA,L] 
```

这对我来说似乎有点笨重并且重复了很多东西，关于我如何缩短它的任何想法？

我可以设置“全局”条件吗？我可以有一个这样的规则来捕获它下面的所有规则吗（我不在乎它是否通过空变量发送）

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule **clever stuff here** index.php?page=$1&submenu=$2&info=$3&id=$4 [QSA,L] 
```

所以它会捕获

domain.com/a/b/c/d 和 domain.com/a/b/c 和 domain.com/a/b 和 domain.com/a

答案、想法、沉思和存在论都受到赞赏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:50:48.853

如果您检查逆并让它通过重写引擎，您可以很容易地删除条件。然后你知道的任何东西*都不*是现有的文件或目录：

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2&info=$3&id=$4 [QSA,L]
RewriteRule ^([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2&info=$3 [QSA,L]
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&submenu=$2 [QSA,L] 
RewriteRule ^([^/\.]+)/?$  index.php?page=$1 [QSA,L] 
```

这不是一个花哨的多重前瞻正则表达式，它可以在一行中完成所有操作，但它确实使它更易于阅读。

编辑：

好吧，就像我说的那样，您可以通过多个前瞻来做到这一点，例如：

```
RewriteRule ^(?:([^/.]+)|)(?:/([^/.]+)|)(?:/([^/.]+)|)(?:/([^/.]+)|) index.php?page=$1&submenu=$2&info=$3&id=$4 [QSA,L] 
```

但它更难阅读，如果你改变一些东西，更有可能做一些意想不到的事情。此外，虽然有明确的 4 种不同的映射，但您不会像使用前瞻那样获得空白查询字符串参数。无论最后一个`(?:/([^/.]+)|)`是否存在，您仍然会得到一个`id`参数（只是空白）。

# google-visualization - 如何通过国家代码使用 Google Chart API 突出显示几个国家？

> ID：16211478
> 
> 赞同：1
> 
> 时间：2013-04-25T09:44:43.567
> 
> 标签：google-visualization

我有一个简单的请求，通过 Google 图表中的代码（例如法国的 FR）在地图上选择一个国家：

[http://chart.apis.google.com/chart?&cht=t&chs=440x220&chtm=europe&chco=f5f5f5,edf0d4,6c9642,13390a&chld=FR&chd=s:FR](http://chart.apis.google.com/chart?&cht=t&chs=440x220&chtm=europe&chco=f5f5f5,edf0d4,6c9642,13390a&chld=FR&chd=s:FR)

我知道这可以扩展到选择几个国家，但我无法构建适当的请求。有人可以举例说明如何做到这一点（例如突出 FR 和 IT）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:13:17.563

我想我或多或少地得到了语法：

[http://chart.apis.google.com/chart?&cht=t&chs=440x220&chtm=europe&chco=f5f5f5,edf0d4,6c9642,13390a&chld=FR|IT|CZ|DE&chd=s:afhx](http://chart.apis.google.com/chart?&cht=t&chs=440x220&chtm=europe&chco=f5f5f5,edf0d4,6c9642,13390a&chld=FR|IT|CZ|DE&chd=s:afhx)

所以应该使用“|” 分隔国家，然后使用字母数字编码（每个国家 1 个字符）提供足够的颜色

# php - 如何将字符附加到父窗口的组件

> ID：16211480
> 
> 赞同：1
> 
> 时间：2013-04-25T09:44:47.987
> 
> 标签：php, javascript, append, special-characters, window.opener

我有一个链接，当它点击时，它会打开另一个浏览器窗口（specialChars.php）

```
function popup_specialChars()
    {

        var ht;
        if(window.navigator.appVersion.indexOf("MSIE 5.01") == -1)
            ht = 300;
        else
            ht = 720;
        specialCharsWindow = window.open
        (
            "/TradeScienceJournalSystem/specialChars.php", "special_characters",
            "resizable=yes,scrollbars=yes,height=" + ht + ",width=650,dependent=yes,alwaysRaised=yes"
        );
        specialCharsWindow.focus();
    }

<a href="javascript:popup_specialChars();" class="special">Insert Special Character</a>
<textarea name="docArticleTitle" cols="60" rows="14"></textarea> 
```

**特殊字符.php**

```
function insert_text(str)
        {
                    alert(str);

            opener.append(str); // Not working
            this.window.focus();
        }

<table border="1" id="table1" width="97%">
                <tr>
                    <td align="center" class="specialcharlink"><a href="javascript:insert_text('&#x00E1;')"><span class="specialchar">&#x00E1;</span></a></td>
                </tr>
</table> 
```

现在，当单击特殊字符的链接时会发生什么情况，insert_text() 将被调用。警报显示特殊字符。但我想将该字符附加到打开器窗口的文本区域中。但它不起作用。

如何表示打开器窗口的文本区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:10:58.180

给 textarea 一个 id

```
<textarea name="docArticleTitle" id="id1" cols="60" rows="14"></textarea> 
```

并改变了

```
function insert_text(str)
        {
                    window.opener.document.getElementById('id1').value += str;
                    this.window.focus();
        } 
```

它开始将字符附加到文本区域。

# google-custom-search - Google 自定义搜索引擎热门搜索小部件

> ID：16211488
> 
> 赞同：0
> 
> 时间：2013-04-25T09:45:12.763
> 
> 标签：google-custom-search

我记得几年前曾经有一个小部件，您可以从 Google 自定义搜索引擎中使用它，它允许您在公共网页上嵌入热门搜索的详细信息。我最近一直在寻找文档，所以我可以在一个有自定义搜索引擎但现在找不到它的网站上实现它——即使是谷歌！此功能是否仍然可用，或者是否应该使用 Google Analytics 完成。

对于答案，我正在寻找官方文档的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:08:53.170

有一个自定义搜索帮助页面对此进行了讨论。[自定义搜索帮助：统计](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2717683)

> 统计和日志页面的统计选项卡向您显示自定义搜索引擎的热门查询。您可以按天、周、月或年查看此信息，甚至可以在搜索引擎的整个生命周期内查看。统计页面提供有关搜索使用情况和已完成搜索总数的准确数据。
> 
> 要在您的网站上显示热门查询（例如，帮助搜索者找到热门页面），请复制热门网络查询页面中的代码并将其粘贴到您的页面中。

# file - 使用 For Each 循环下载文件

> ID：16211489
> 
> 赞同：0
> 
> 时间：2013-04-25T09:45:12.930
> 
> 标签：file, for-loop, download, each, loader

请记住，我是个菜鸟。我不是要求任何人为我的整个项目编写代码，但在很多情况下我很容易迷失方向。非常感谢您的帮助和耐心...

我的 AS3 代码如下所示：

```
var totalFeatureImageDownloads:Number = 0;  //total file size of all feature images, in bytes
var totalFeatureImageDownloaded:Number = 0; //total downloaded of all feature images, in bytes

for each(var featureimage:XML in xml.featureimages.imgurl)
  {
  trace(featureimage);
  var featureImageRequest:URLRequest = new URLRequest(featureimage);
  var featureImageLoader:URLLoader = new URLLoader(featureImageRequest);
  totalFeatureImageDownloads = totalFeatureImageDownloads + featureImageLoader.bytesTotal;
  trace(featureImageLoader.bytesTotal);
  } 
```

目前我在 XML 文件中有 3 个图像，并且它们的 URL 被正确跟踪。但是，bytesTotal 总是等于 0。另外，我知道这个循环创建了 3 个同名的 URLRequest 和 3 个同名的 URLLoaders。我可能需要创建 3 个不同名称的。

我希望同时下载所有图像，并且我需要计算所有三个的组合文件大小，以及下载状态作为分数（bytesLoaded / bytesTotal）。

我有多个这样的场景，并且在我完成之前被卡住了。非常感谢您的帮助。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:55:35.393

无法从新创建的 URLLoader 中读取 bytesTotal，因为客户端需要先连接到 Web 服务器以获取要下载的文件的大小。您需要侦听`ProgressEvent.PROGRESS`URLLoader 发送的第一个事件，一旦发送该事件，bytesTotal 属性更有可能是准确的。我说“更有可能”是因为如果数据是在服务器上动态生成的，则无法获得总文件大小，但在一般情况下，您从服务器下载文件时它可以工作。

我承认一般情况。有一些库可以帮助解决这个问题，例如 LoaderMax 或 BulkLoader。我个人使用 BulkLoader：[https ://github.com/arthur-debert/BulkLoader](https://github.com/arthur-debert/BulkLoader)

# ios - 点击 UICollectionViewCell 外部

> ID：16211493
> 
> 赞同：2
> 
> 时间：2013-04-25T09:45:17.303
> 
> 标签：ios, objective-c, uicollectionview

我在 a`UICollectionView`中有一系列`UICollectionViewCell`s `UICollectionViewFlowLayout`。

每个单元格都包含一个`UIImageView`，取决于 indexPath 是否大于单元格本身。单元格不会剪切其内容，因此您始终可以看到整个图像。

但是我不能在单元格框架之外进行触摸，而是在图像内部进行触摸，以充当正常触摸并触发单元格的选择。

我尝试覆盖方法`hitTest:withEvent`，`pointInside:withEvent`但`UICollectionViewCell`它没有改变。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    if (CGRectContainsPoint(self.imageView.frame, point)) {
        NSLog(@"Contains: %d", cellIndex);
        return self;
    }
    NSLog(@"Doesn't contain: %d", cellIndex);

    return [super hitTest:point withEvent:event];
}

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {

    if (CGRectContainsPoint(self.imageView.frame, point)) {
        NSLog(@"Inside: %d", cellIndex);
        return YES;
    }

    NSLog(@"Outside: %d", cellIndex);
    return NO;
} 
```

当我在屏幕上显示集合视图的前 3 个元素并点击第三个元素（在单元格框架之外，但在 UIImageView 内）时，它会跟踪它：

```
2013-05-06 10:53:38.395 Contigo[3351:c07] Doesn't contain: 0
2013-05-06 10:53:38.395 Contigo[3351:c07] Outside: 0
2013-05-06 10:53:38.396 Contigo[3351:c07] Contains: 2
2013-05-06 10:53:38.396 Contigo[3351:c07] Doesn't contain: 0
2013-05-06 10:53:38.396 Contigo[3351:c07] Outside: 0
2013-05-06 10:53:38.396 Contigo[3351:c07] Contains: 2
2013-05-06 10:53:38.396 Contigo[3351:c07] Doesn't contain: 0
2013-05-06 10:53:38.396 Contigo[3351:c07] Outside: 0
2013-05-06 10:53:38.397 Contigo[3351:c07] Contains: 2 
```

# java - PreferenceCategory 主题未应用于 PreferenceScreen

> ID：16211500
> 
> 赞同：2
> 
> 时间：2013-04-25T09:45:47.663
> 
> 标签：java, android, google-maps, android-layout

我在如何创建自定义 PreferenceCategory 的教程中看到了很多关于这个问题的答案和线程。没有什么对我有用。我的主题只是没有应用。

PreferenceActivity 类：

```
public class PreferencesActivity extends PreferenceActivity{

private MyPreferenceFragment preferences;

@Override   
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);
    preferences = new MyPreferenceFragment();
    getFragmentManager().beginTransaction().replace(android.R.id.content, preferences).commit();
}

public static class MyPreferenceFragment extends PreferenceFragment
{
    @Override
    public void onCreate(final Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.mypreferences);            
    }      
}   
} 
```

安卓清单：

```
<activity android:name="com.gpsy.preferences.PreferencesActivity"
            android:screenOrientation="portrait" android:configChanges="keyboardHidden|orientation"             
            android:theme="@style/Custom">
</activity> 
```

样式.xml：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="PreferenceListHeader" >
    <item name="android:textColor">#000000</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">12sp</item>
    <item name="android:background">@color/Gray</item>
    <item name="android:paddingTop">6dp</item>
    <item name="android:paddingBottom">6dp</item>
    <item name="android:paddingLeft">12dp</item>
</style>

<style name="Custom" parent="@android:Theme.Light.NoTitleBar">
    <item name="android:listSeparatorTextViewStyle">@style/PreferenceListHeader</item>               
</style>
</resources> 
```

mypreferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<PreferenceCategory
        android:title="@string/gps_settings">

    <ListPreference
            android:key="nav_systems_preference"
            android:title="@string/my_nav_app"
            android:summary="summary_checkbox_preference"/>

</PreferenceCategory>
</PreferenceScreen> 
```

另外，我尝试通过以下方式应用主题但没有成功：

```
setTheme(R.style.Custom); 
```

尝试将 PreferenceCategory 标记更改为

```
<PreferenceCategory android:widgetLayout="@style/Custom"
        android:title="@string/gps_settings"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T02:06:24.790

您的主题不起作用，因为您没有设置`android:layout_width`，`android:layout_weight`也不能从父级继承（未给出）。

对于`<style name="PreferenceListHeader" >`，只需添加以下内容：

```
<item name="android:layout_width">fill_parent</item>
<item name="android:layout_height">wrap_content</item> 
```

你不需要`setTheme(R.style.Custom);`或者`android:widgetLayout="@style/Custom"`然后。`android:widgetLayout`无论如何，您无法为 提供样式。您必须提供仅包含 TextView 的布局资源。但是如果选择使用样式（见上），则不需要设置布局。

# db2 - 在 DB2 数据库中，如何找出 varchar 列中数据的实际存储大小？

> ID：16211504
> 
> 赞同：0
> 
> 时间：2013-04-25T09:46:07.247
> 
> 标签：db2

我是 DB2 的新手，我正在寻找一个类似 memory_size(COLUMN_NAME) 的函数来返回特定行的该列占用的字节数。

**示例：**我有一个名为**'Address'**的**VARCHAR(50)**数据类型的列，数据存储为**'Fountain Street, ZIP-12345'**，该函数应返回这 26 个字符占用的内存，**而不是**总列大小**或**数据长度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:11:14.337

您可以通过目录找到列的精度（长度将查询数据库目录）。但是，实际存储大小会有所不同。

你不能推断出类似的东西

```
cardinality * (leght(column1) + lenght(column2) + ...) = occupied storage 
```

还有许多其他因素会影响存储。

此外，问题的标题是存储大小（似乎是表空间-> 容器），但在正文中，您正在谈论内存（缓冲池），而这些东西在数据库中是不同的。

“内存占用”是什么意思？列精度或存储使用情况？

# jquery - Bootstrap chevron 图标在点击时不会改变，为什么？

> ID：16211506
> 
> 赞同：3
> 
> 时间：2013-04-25T09:46:09.710
> 
> 标签：jquery, twitter-bootstrap

我有这个部分：

```
<div id="weather">
<h4><i class="icon-chevron-down"></i> Weather</h4> 
```

和代码：

```
$('#weather h4').click(function (){
    $('#weather .entries').toggle();
    $('#weather .icon-chevron-down').toggleClass('icon-chevron-right');
}); 
```

[jsbin1](http://jsbin.com/acufaw/1/edit)

它不起作用，但如果我改变图标雪佛龙的位置，它会起作用：

[jsbin2](http://jsbin.com/exucew/1/edit)

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:00:22.700

这个正在工作：

[http://jsbin.com/omerep/1/edit](http://jsbin.com/omerep/1/edit)

```
$('#weather h4').click(function (){
    $('#weather .entries').toggle();
    $(this).find('i').toggleClass('icon-chevron-right icon-chevron-down', 200);
}); 
```

# html - 如何为文本和图像图标创建具有 2 列的 div？

> ID：16211509
> 
> 赞同：0
> 
> 时间：2013-04-25T09:46:14.977
> 
> 标签：html, css

有以下代码：

```
<?php foreach ($data as $vacancy) { ?>
    <div class="vacancy">
        <img src="<?php echo Yii::app()->request->baseUrl; ?>/images/vacancy_icon.jpg" />
        <div class="name">
            <?php echo CHtml::link($vacancy['name'], array('vacancy/show', 'id'=>$vacancy->vacancy_id)); ?>
        </div>
        <div class="info">
            <div class="public_date">Public date: <?php echo $vacancy['date']; ?></div>
        </div>
        <hr />
    </div>
<?php } ?> 
```

如您所见，每个“空缺”包含 2 列文本和一个图像。有几种风格：

```
.vacancy img {
    float:left;
    width: 50px
}

.vacancy .name {
    margin: 0;
    width: 50px;
}

.vacancy .info {
    float: right;
    width: 50px;
} 
```

我需要按以下顺序显示每个空缺：图标、“名称”、“信息”，但现在看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/2JGa5.png)

我该如何解决？

更新：

现在代码是：

```
<?php foreach ($data as $vacancy) { ?>
    <div class="vacancy">
        <div class="img">
            <img src="<?php echo Yii::app()->request->baseUrl; ?>/images/vacancy_icon.jpg" />
        </div>
        <div class="name">
            <?php echo CHtml::link($vacancy['name'], array('vacancy/show', 'id'=>$vacancy->vacancy_id)); ?>
        </div>
        <div class="info">
            <div class="public_date">Public date: <?php echo $vacancy['date']; ?></div>
        </div>
    </div>
<?php } ?> 
```

CSS：

```
.vacancy {
    width: 100%;
}

.vacancy .img {
    float : left; 
    margin-left:10px; 
    display-inline:block;
}

.vacancy .name {
    float : left; 
    margin-left:10px; 
    display-inline:block;
}

.vacancy .info {
    float : left; 
    margin-left:10px; 
    display-inline:block;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/vEu4v.png)

答案：正确的样式：

```
.vacancy {
    width: 100%;
    float:left;
    display:block;
}
  .icon {
        float : left; 
        margin-left:10px; 
        }    

  .name {
        float : left; 
        margin-left:10px; 
        }

  .info {
        float : left; 
        margin-left:10px; 
        } 
```

但现在有下一个麻烦 - 我如何垂直对齐 .name 和 .info 中的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:50:19.187

```
<?php foreach ($data as $vacancy) { ?>
<ul><li>
<div class="vacancy">
    <div class="img">
        <img src="<?php echo Yii::app()->request->baseUrl; ?>/images/vacancy_icon.jpg" />
    </div>
    <div class="name">
        <?php echo CHtml::link($vacancy['name'], array('vacancy/show', 'id'=>$vacancy->vacancy_id)); ?>
    </div>
    <div class="info">
        <div class="public_date">Public date: <?php echo $vacancy['date']; ?></div>
    </div>
</div></li></ul>
<?php } ?> 
```

像这样更改您的CSS：

```
.vacancy .info {
float : left; 
margin-left:10px; 
display:inline;}

.vacancy .name {
float : left; 
margin-left:10px; 
display:inline;}

.vacancy .img {
float : left; 
margin-left:10px; 
display:inline;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:52:33.960

如果你想全部在同一行。

```
 .vacancy { 
    width: 100%;
    float: left;
    display: block;
    }

 .img {
        float : left; 
        margin-left:10px; 
        display:inline;}

  .name {
        float : left; 
        margin-left:10px; 
        display:inline;}

  .info {
        float : left; 
        margin-left:10px; 
        display:inline;} 
```

# html - CSS跨度溢出自动或滚动不适用于子元素

> ID：16211516
> 
> 赞同：1
> 
> 时间：2013-04-25T09:46:37.963
> 
> 标签：html, css

我有以下设置： -

[http://jsfiddle.net/YKXUb/1/](http://jsfiddle.net/YKXUb/1/)

而css是这样的： -

```
.two { 
 height: 100%;
 width: 100%;
 border:1px solid green; 
 }

.hold 
{  
    float: left;
    height: 100%;
    width: 35%;
    border:1px solid green; 
}

.right {  height: 100%; border:1px solid green;}

.hold > img{width: 100%;height:100%;}

#one{ height: 300px; width: 600px; margin: 0 auto;}

.center{text-align:center;margin:0 auto;}
.rights{text-align:right;}

.main{width:100%;display:block;border:1px solid green;} 

.five{width:20%; border:1px solid green;float: left;}
.six{border:1px solid green;display:block;} 
```

如您所见，超出跨度宽度的内容仍在继续，我已经尝试过`overflow:scroll`，`overflow:auto`但似乎没有任何效果

任何帮助将不胜感激：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:48:44.393

`overflow:auto`为我工作

```
.six{border:1px solid green;display:block; overflow:auto} 
```

**[演示](http://jsfiddle.net/YKXUb/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T13:25:44.437

`overflow:auto`有效，但您还需要添加高度：

`.six{ border:1px solid green; display:block; height:100px; overflow:auto }`

> 您需要根据您的要求添加高度

# java - 调用远程 ESB 客户端错误

> ID：16211518
> 
> 赞同：3
> 
> 时间：2013-04-25T09:46:45.397
> 
> 标签：java, jboss, esb, jboss6.x, jboss-esb

我正在尝试从远程客户端发送和 esb 消息，但我不断收到此错误：

```
org.jboss.soa.esb.listeners.message.MessageDeliverException: org.apache.ws.scout.transport.TransportException: java.lang.reflect.InvocationTargetException
    at org.jboss.soa.esb.client.ServiceInvoker.loadServiceClusterInfo(ServiceInvoker.java:545)
    at org.jboss.soa.esb.client.ServiceInvoker.<init>(ServiceInvoker.java:174)
    at org.jboss.soa.esb.client.ServiceInvoker.<init>(ServiceInvoker.java:155)
    at org.jboss.soa.esb.client.ServiceInvoker.<init>(ServiceInvoker.java:197)
    at cz.certicon.esb.test.SenderESB.sendAMessage(SenderESB.java:24)
    at cz.certicon.esb.test.Manager.sendESBMessage(Manager.java:94)
    at cz.certicon.esb.test.MyFrame.actionPerformed(MyFrame.java:122)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$400(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: org.jboss.soa.esb.services.registry.RegistryException: org.apache.ws.scout.transport.TransportException: java.lang.reflect.InvocationTargetException
    at org.jboss.internal.soa.esb.services.registry.JAXRRegistryImpl.findEPRs(JAXRRegistryImpl.java:358)
    at org.jboss.internal.soa.esb.services.registry.InVMRegistryInterceptor.findEPRs(InVMRegistryInterceptor.java:85)
    at org.jboss.soa.esb.services.registry.RegistryFactory$HeadRegistryInterceptor.findEPRs(RegistryFactory.java:229)
    at org.jboss.soa.esb.listeners.RegistryUtil.getEprs(RegistryUtil.java:228)
    at org.jboss.soa.esb.client.ServiceInvoker.loadServiceClusterInfo(ServiceInvoker.java:532)
    ... 42 more
Caused by: javax.xml.registry.JAXRException: org.apache.ws.scout.transport.TransportException: java.lang.reflect.InvocationTargetException
    at org.apache.ws.scout.registry.BusinessQueryManagerV3Impl.findConcepts(BusinessQueryManagerV3Impl.java:535)
    at org.jboss.internal.soa.esb.services.registry.JAXRRegistryImpl.getJBossESBTModel(JAXRRegistryImpl.java:795)
    at org.jboss.internal.soa.esb.services.registry.JAXRRegistryImpl.findEPRs(JAXRRegistryImpl.java:327)
    ... 46 more 
```

我找到了很多关于设置远程客户端的教程，但没有一个对我有帮助。

我正在使用带有 ESB 4.11 的 JBoss AS 6，并从 Eclipse（使用 JBoss 工具）运行我的应用程序。发送 JMS 消息工作正常，但我无法完成这项工作。

这是我发送 esb 消息的示例代码：

```
public void sendAMessage(String message) throws Exception {

         System.setProperty("javax.xml.registry.ConnectionFactoryClass",

                    "org.apache.ws.scout.registry.ConnectionFactoryImpl");

           Message esbMessage = MessageFactory.getInstance().getMessage();

            esbMessage.getBody().add(message);

            new ServiceInvoker("FirstServiceESB", "SimpleListener").deliverAsync(esbMessage);

    } 
```

1) 我导入了 JBossESB 运行时和 JBoss 6.0 运行时（包括它们提供的所有库）。

2) 我包括了 jbossts-common.jar

3) 我在 META-INF 目录中有 jboss-esb.xml、uddi.xml 和 jbossesb-properties.xml（我将这些文件作为附件包含在内，最后两个是从 helloworld quickstart 复制的...）

老实说，我不知道该怎么做才能使它起作用……感谢您提供任何帮助！

编辑：我已经阅读了一些关于[这个](https://community.jboss.org/thread/144658)的主题，现在我得到了上面提到的错误。我已经包含了他们建议的所有 .jar 库和 .xml 文件，但我仍然卡住了。问题可能出在其他地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T10:41:17.260

**首先你需要下载**

[http://www.redhat.com/products/jbossenterprisemiddleware/soa/download.html(jboss-soa-p-5](http://www.redhat.com/products/jbossenterprisemiddleware/soa/download.html(jboss-soa-p-5)平台)

并在eclipse**项目中设置-->首选项--esb运行时--jboss-soa-p-5**。它将解决所有异常。

# java - 如何在有序列表中返回 Arrays.asList() ?

> ID：16211520
> 
> 赞同：0
> 
> 时间：2013-04-25T09:46:58.007
> 
> 标签：java, arrays, list, arraylist

我不知道这是否重复。如果是这样，请分享链接，因为我还没有找到任何人。在我的 Java 程序中，我有一个类似以下的字符串（字符串是动态创建的）。

```
String header="Requirements ID,Requirements Number,Requirements Desc,Requirements Text,Requirements Date"; 
```

现在我正在创建一个列表

```
List<String> csv = new ArrayList<String>(); 
csv=Arrays.asList(header.split("\\s*,\\s*")); //splittng each phrase separated by comma 
```

但我没有以无序的方式获得 List 值。我的意思是我得到这样的列表值

```
[Requirements Number,Requirements Date,Requirements Desc,Requirements ID,Requirements Text] 
```

我知道列表是无序的。但我希望列表*csv*是这样的

```
[Requirements ID,Requirements Number,Requirements Desc,Requirements Text,Requirements Date] 
```

所以我的问题是如何以有序的方式得到这个？任何可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:52:39.813

最好的方法是使用 StringTokenizer

1.) 使用**StringTokenizer**，用分隔符 "," 分割字符串

2.) 迭代 StringTokenizer 并填充列表

3.）现在在填充时，它会按顺序发生

**伪代码类似于**

```
String header="Requirements ID,Requirements Number,Requirements Desc,Requirements Text,Requirements Date";
StringTokenizer st = new StringTokenizer(header,",") ;
List<String> strList = new ArrayList<String>() ;
while (st.hasNextToken()) {
  strList.add(st.nextToken()) ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:11:19.433

使用 apache string utils 和 collections api：

[http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html)

```
 String header="Requirements ID,Requirements Number,Requirements Desc,Requirements Text,Requirements Date";
    List<String> list = Arrays.asList(StringUtils.split(header,","));
    Collections.sort(list); 
```

# button - 按钮单击操作以使用 extjs 4 关闭视图

> ID：16211521
> 
> 赞同：1
> 
> 时间：2013-04-25T09:47:01.473
> 
> 标签：button, view, extjs4

当我单击连接按钮时，我有一个登录表单，我想转到另一个视图并关闭登录视图。

它是我的源代码：

登录视图

```
Ext.define('Ext4Example.view.login.LoginForm' ,{
 extend: 'Ext.form.FormPanel',
alias : 'widget.login',

bodyStyle: "background-image:url('resources/images/logo.png')",
margin: '100 50 10 450',
width:500,
height:320,
frame: true,
initComponent: function() {
this.items= [{
    xtype: 'textfield',
    name : 'id',
    fieldLabel: 'id',
    hidden:true
},
{
        xtype: 'textfield',
        x:100,
        y:100,
        cls:'user',
        emptyText : "votre nom d'utilisateur...",
        fieldLabel:"Nom d'utilisateur",
        name:'j_username',

    },{
        xtype: 'textfield',
        x:100,
        y:100,
        emptyText : "votre mot de passe...",
         name:'j_password',
        fieldLabel:'Mot de passe'

    },

     {
             xtype: 'checkbox',
            boxLabel: 'Rester connecte',
            x:100,
            y:110,
            allowBlank: false},
            {xtype: 'button',
                text:'Connexion',
                action: 'connect',

                margin:'120 0 0 170',
                name:'connect'
            },

                {xtype: 'button',
                    margin:'120 20 0 20',
                    text:' Annuler ',
                    action: 'reset',
                        name:'reset',

                },
            {
                xtype: 'tbtext',
                text: 'Copyright ©  Tous droits réservés',
                margin: '64 0 0 58',

              }
    ],
this.callParent(arguments);
}

}); 
```

家庭视图

```
Ext.define('Ext4Example.view.login.HomePage' ,{
extend: 'Ext.container.Viewport',

alias : 'widget.home',

requires: [
           'Ext4Example.view.login.WestMenu',
           'Ext4Example.view.login.CenterPanel'

       ],
       layout: {
           type: 'border',
           padding: '0 5 5 5'
       },

initComponent: function() {

this.items= [

    {

    xtype: 'westmenu',
    region: 'west'
},{

    xtype: 'portletpanel',
    region: 'center',
}
],

    this.callParent(arguments);
}
}); 
```

我的控制器

```
Ext.define('Ext4Example.controller.Login', {
extend: 'Ext.app.Controller',

stores: ['Login'],

models: ['Login'],

views: ['login.LoginForm','login.HomePage','login.CenterPanel','login.WestMenu'],

init: function() {

    this.control({
        'login button[action=add]': {  

        },

        'login button[action=reset]': {  
            'click' : function(button, event, opt) {  

                var form = button.up('form');
                form.getForm().reset();
            }  
        },

        'login button[action=connect]': {  

            'click' :this.connect
        }
    });
 },
 connect:function(button,record) 
{

var view1 = Ext.widget('home');

} 
```

});

当我单击按钮连接时，我在同一页面上看到了两个视图，但我希望登录视图消失，只有我想显示主视图。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:19:03.613

尝试：

```
var win = button.up('login');
win.close(); 
```

# html - 将图像显示更改为内联

> ID：16211524
> 
> 赞同：1
> 
> 时间：2013-04-25T09:47:06.293
> 
> 标签：html, css

我正在制作图像滑块。我正在尝试内联显示图像。我也应用了 css，但它不起作用:(图像未内联显示。需要更改什么属性请帮忙。

```
<div id="f1_container">
    <div id="f1_card1" class="shadow">
        <div class="front face">
            <img src="thumb1.jpg" style="height: 281px; width: 450px;" />
        </div>
        <div class="back face center">
            Some text inside here
        </div>
    </div>
    <br/>
    <br/>

    <div id="f1_card2" class="shadow">
        <div class="front face">
            <img src="thumb2.jpg" style="height: 281px; width: 450px;" />
        </div>
        <div class="back face center">
            text2
        </div>
    </div>
</div> 
```

这是我的 CSS 文件，

```
 #f1_container {
    position: relative;
    margin: 10px auto;
    width: 450px;
    height: 281px;
    z-index: 1;
}
#f1_container {
    -webkit-perspective: 1000;
    perspective: 1000;
}
#f1_card {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 1.0s linear;
    transform-style: preserve-3d;
    transition: all 1.0s linear;
}
#f1_container:hover #f1_card {
    -webkit-transform: rotateY(180deg);
    transform: rotateY(180deg);
    box-shadow: -5px 5px 5px #aaa;
}
.face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}
.face.back {
    display: block;
    -webkit-transform: rotateY(180deg);
    transform: rotateY(180deg);
    box-sizing: border-box;
    color: white;
    text-align: center;
    background-color: #aaa;
} 
```

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T06:13:15.353

我通过增加 CSS 中的正文宽度解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:52:48.937

你想把图像和文本放在一个 div 中，然后浮动 div，使其与 float:left 一致；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:53:28.440

为阴影定义样式 .. position:relative & float:left 还删除带有阴影类的 div 之间的 br 元素

# google-maps-api-3 - 在 RequireJS 中模拟谷歌地图以离线运行测试

> ID：16211525
> 
> 赞同：1
> 
> 时间：2013-04-25T09:47:06.323
> 
> 标签：google-maps-api-3, requirejs, qunit

我正在使用[https://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)中的异步插件来加载 Google Maps API：

```
define(['async!//maps.google.com/maps/api/js?libraries=places&sensor=false'], function () {
    // ...
}); 
```

这会导致在运行单元测试时需要 Internet 连接。有没有办法模拟或以其他方式允许加载此代码的代码脱机运行而不会引发“加载资源失败”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:24:20.903

`google_maps`我的解决方案是在运行 QUnit 测试时使用空模块代替我的模块。

`google_maps.js`：

```
define(['async!//maps.google.com/maps/api/js?libraries=places&sensor=false'], function () {
    return window.google;
}); 
```

`google_maps_stub.js`：

```
define(function () {
    window.google = {};
    return window.google;
}); 
```

`requirejs_config_qunit.js`：

```
define(['./requirejs_config_development.js'], function () {
    requirejs.config({
        paths: {
            'google_maps': 'js/lib/google_maps_stub'
        }
    });
}); 
```

# liferay - 服务构建器不会为添加的新实体构建服务 Liferay

> ID：16211531
> 
> 赞同：0
> 
> 时间：2013-04-25T09:47:29.187
> 
> 标签：liferay, liferay-6

我有一个服务构建器，但实体很少。现在，当我尝试向服务构建器添加更多实体并尝试构建服务时，并没有为这个新实体创建服务。

可能是什么问题以及如何解决？

我面临的另一个问题是新创建的 portlet 没有显示在控制面板中。早些时候我从来没有遇到过这样的问题。

不知道发生了什么。我尝试重新启动服务器，刷新工作区但没有用。

编辑：

控制台输出

```
[Console output redirected to file:D:\test\MIS\.metadata\.plugins\com.liferay.ide.eclipse.sdk\sdk.log]
Buildfile: D:\MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISPortal-portlet\build.xml
build-service:
     [echo] Loading jar:file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/system.properties
     [echo] Apr 25, 2013 10:34:16 AM com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Global shared lib directory /D:/TEST_MIS_Portal/liferay-plugins-sdk-6.1.1/lib/
     [echo] Apr 25, 2013 10:34:16 AM com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Global lib directory /D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/lib/ext/
     [echo] Apr 25, 2013 10:34:16 AM com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Portal lib directory /D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/
     [echo] Apr 25, 2013 10:34:17 AM com.liferay.portal.kernel.log.Jdk14LogImpl info
     [echo] INFO: Properties for portal loaded from [file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/classes/portal-ext.properties, jar:file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/com/liferay/portal/tools/dependencies/portal-tools.properties, jar:file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/portal.properties]
     [echo] Loading jar:file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/portal.properties
     [echo] Loading jar:file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/lib/portal-impl.jar!/com/liferay/portal/tools/dependencies/portal-tools.properties
     [echo] Loading file:/D:/TEST_MIS_Portal/liferay-portal-6.1.1-ce-ga2/totestt-7.0.27/webapps/ROOT/WEB-INF/classes/portal-ext.properties
     [echo] java.lang.RuntimeException: Column employerCity not found
     [echo]     at com.liferay.portal.tools.servicebuilder.Entity.getColumn(Entity.java:62)
     [echo]     at com.liferay.portal.tools.servicebuilder.ServiceBuilder._parseEntity(ServiceBuilder.java:4783)
     [echo]     at com.liferay.portal.tools.servicebuilder.ServiceBuilder.<init>(ServiceBuilder.java:636)
     [echo]     at com.liferay.portal.tools.servicebuilder.ServiceBuilder.main(ServiceBuilder.java:151)
    [mkdir] Created dir: D:\TEST_MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISMISPortal-portlet\docroot\WEB-INF\service-classes
compile-java:
     [copy] Copied 9 empty directories to 9 empty directories under D:\TEST_MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISMISPortal-portlet\docroot\WEB-INF\service-classes
    [javac] Compiling 86 source files to D:\TEST_MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISMISPortal-portlet\docroot\WEB-INF\service-classes
      [zip] Building zip: D:\TEST_MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISMISPortal-portlet\docroot\WEB-INF\lib\MISMISPortal-portlet-service.jar
   [delete] Deleting directory D:\TEST_MIS_Portal\liferay-plugins-sdk-6.1.1\portlets\MISMISPortal-portlet\docroot\WEB-INF\service-classes
BUILD SUCCESSFUL
Total time: 7 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:42:28.563

我会说检查你在哪里声明`employerCity`in `service.xml`，这可能是问题，因为你得到：

```
java.lang.RuntimeException: Column employerCity not found, 
```

可能是您在某些实体中错误地引用了该列，或者我建议检查该列的拼写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T11:53:46.447

在lib里面你有--->/HelloPortlet-portlet/docroot/WEB-INF/lib/HelloPortlet-portlet-service.jar 在你的项目中删除上面的jar 在你
的service.xml中完成更改后再次构建服务并刷新Goto数据库根据修改后的 service.xml，检查您的表是否不存在刷新。

# image - 显示图像

> ID：16211532
> 
> 赞同：0
> 
> 时间：2013-04-25T09:47:31.933
> 
> 标签：image, matlab, show

我来到一个`matlab`代码，它首先读取图像并将其转换`double`为如下：

```
I = double(imread(img)); 
```

之后，它显示如下图像：

```
imshow(I/max(I(:))) 
```

这意味着什么？尤其是当我移除`max`零件时，我只得到一张白色背景的图像。这种划分的目标是什么？而且，为什么它在完成后正确显示图像，如果您直接显示读取的图像而不用最大除法，为什么不能正确显示图像？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:52:31.293

表达方式：

```
I/max(I(:)) 
```

只是将像素值标准化为范围 0..1.0。它通过将所有像素值除以最大值来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:53:38.327

`max(I(:))`似乎是一个规范化步骤

从[文档](http://www.mathworks.nl/help/images/ref/imshow.html%20%22documentation)中可以看出，imshow 需要一个值介于 0 和 1.0 之间的输入矩阵

> imshow(I) 在 Handle Graphics® 图形中显示图像 I，其中 I 是灰度、RGB（真彩色）或二值图像。对于二值图像，imshow 将值为 0（零）的像素显示为黑色，值为 1 为白色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:34:55.557

`I`是 2D 或 3D 矩阵（取决于灰度或颜色）。`I(:)`是矩阵的所有值都写在一列中的向量，就像它们在内存中排列一样；你也可以这样做[`reshape`](http://www.mathworks.de/de/help/matlab/ref/reshape.html)。[请阅读Matlab 文档](http://www.mathworks.de/de/help/matlab/ref/colon.html)中有关冒号运算符的更多信息，它是 Matlab 的绝对基本概念。

`max`给你一个向量的最大值，即`max(I(:))`给你整个图像的最大值。

图像的范围从 0 开始是不成文的规律。因此，您可以通过将图像`[0,1]`除以来映射图像的值`max(I(:))`。在 Matlab 中是这样完成的：`myMatrix/myScalar`.

因此`I/max(I(:))`，为您提供具有 中值的图像`[0,1]`，这是您想要显示的双图像所需的`imshow`。

请注意：

(1) 您可以改写`imshow(I,[])`它，它将向您显示值拉伸到的图像`[0,1]`（与您的版本不同，最小值也映射到 0）。

(2) 在我看来，您应该像您一样仅在特殊情况下映射图像的值以进行可视化。它会给您图像的错误印象（例如，非常暗的图像将被视为全对比度图像）。尝试除以原始值范围的最大值（通常为 255、4095 或 65535）。例子：

```
img = imread('some12bit.png');
img = double(img);
img = img / 4095; % [0,4095] -> [0,1]
imshow(img); 
```

(3) 如果不将图像映射到`[0,1]`所有值`> 1`，将被解释为`1`。这就是为什么您的图像显示为白色图像而不将其映射到`[0,1]`之前的原因。

# excel - 如何计算通过 excel 2007 中的宏分配的单元格颜色？

> ID：16211536
> 
> 赞同：1
> 
> 时间：2013-04-25T09:47:36.327
> 
> 标签：excel, vba, colors, cell, counting

我在 excel 2007 中创建了一个电子表格，供教师根据各种参数监控进度和成绩。

为了创建参数规则，我使用了一组运行良好的宏，并且包含学生分数的单元格会根据他们的进度是否达到预期水平、低于或高于预期水平（黄色、红色和绿色-原始 I知道！！）。

我现在正在尝试创建一个“插入式”电子表格，允许员工从主工作表（包含年级组中的所有学生）复制和粘贴，并专门针对他们自己的班级获得反馈。一切都很顺利，直到我想到了我认为最简单的部分——用 excel 计算每列中不同颜色单元格的数量。我知道这不能通过公式来完成，除非你有 xCELLcolor 插件（我们没有），所以我使用 VBA 编写了一个非常简单的 CountColor 脚本。

**我现在可以应用一个公式来计算基于现有单元格颜色的任何彩色单元格，但我无法计算从主电子表格复制的彩色单元格。我不断得到答案“0”或“29”，这是列中单元格的总数！**

这是否与主电子表格通过宏分配单元格颜色的方式有关，当将单元格复制并粘贴到“插入式”电子表格时，excel 是否无法识别单元格具有颜色？

*我完全被难住了，因为它适用于我手动用颜色格式化的列！有什么建议么？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:27:50.890

我会使用 VBA 来做这类事情。键入将这段代码弹出到主电子表格中的模块中：

```
Public Function CountColouredCells(rge As Range, colour As Integer) As Long

Dim rge2 As Range
Dim count As Long

For Each rge2 In rge
    If rge2.Interior.Color = colour Then
        count = count + 1
    End If
Next

CountColouredCells = count

End Function 
```

然后，您可以像使用工作簿中的任何其他 Excel 函数一样使用它：=CountColouredCells(A4:D12,255)

第二个参数是您感兴趣的颜色。255是红色的。您可以通过录制宏、更改单元格颜色然后查看 VBA 来找出其他人。

# angularjs - angularjs：防止路线更改

> ID：16211545
> 
> 赞同：5
> 
> 时间：2013-04-25T09:48:31.747
> 
> 标签：angularjs, angularjs-controller

我尝试在我的控制器中执行以下操作：

```
 $scope.$on("$routeChangeStart", function (event, next, current) {
       if (!confirm('are you sure ?')) {
         event.preventDefault();           
       }
  }); 
```

但它不起作用。这不应该是这样做的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:17:14.470

我会在你的链接上放一个指令，在改变路线之前应该确认。我只是在 JSFiddle 中对其进行了原型设计，我没有对其进行测试。但我认为，这应该是正确的方法。

```
(function (angular) {
  module = angular.module('confirm', []);
  ConfirmDirective = function () {
      return {
        restrict: 'A',
        link: function (scope, elm, attrs, ctrls) {
            angular.element(elm).bind('click', function (event) {
                alert("Sure?");
                event.preventDefault();
                return false; //or true, depends on you
            });
        }
    };
  };
  module.directive("confirm", ConfirmDirective);
}(angular)); 
```

[http://jsfiddle.net/L6xBF/3/](http://jsfiddle.net/L6xBF/3/)

检查并尝试。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T18:31:21.543

我最终使用了`ui-router`，所以我这样做的方式是：

```
$scope.$on('$stateChangeStart', function (event) {
     if (!confirm('are you sure ?')) {
         event.preventDefault();
     }
}); 
```

它有效。

# c# - 数字证书问题

> ID：16211549
> 
> 赞同：0
> 
> 时间：2013-04-25T09:48:35.533
> 
> 标签：c#, security, internet-explorer, iis, certificate

好吧，让我解释一下我的情况。我想模拟客户端和服务器之间的通信。

我创建了一个名为“TestCA”的自签名证书，并将其安装在 Trusted Certification Root Authorities 部分。

使用这个自签名证书，我创建了另外两个证书，一个名称为“ServerCert”，主题为“CN=localhost:2001”，另一个名称为“ClientCert”，主题名称为“CN=www.client.com”并安装都在证书文件夹的个人部分。

我使用主题名称为 ["CN=localhost:2001"] 的证书在 IIS 中将 Web 服务部署为 HTTPS。Web 服务部署在 [localhost] 和端口 2001 上。现在，当我尝试浏览到 Web 服务时，Internet Explorer 给了我这个错误：

> 本网站提供的安全证书是针对不同网站的地址签发的。
> 
> 安全证书问题可能表明试图欺骗您或拦截您发送到服务器的任何数据。

我不知道为什么它会给我这个错误，因为证书的主题名称是 ["CN=localhost:2001"] 并且正在浏览的网站的网址是 [https://localhost:2001/]。

如何解决这个问题，让 IE 不显示这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:42:55.360

创建证书时，端口号不相关。`localhost`请使用主题名称（不是`CN=localhost`，但是`localhost`）为 localhost 创建证书。您将能够在没有警告的情况下访问 localhost。此外，对于 www.client.com，请使用主题名称`client.com`（不是`CN=www.client.com`）创建证书

# asp.net - URL 重写，IIS 6，.aspx

> ID：16211560
> 
> 赞同：1
> 
> 时间：2013-04-25T09:48:56.950
> 
> 标签：asp.net, url-rewriting, web-config, iis-6

我在 VS2012 中开发了一个小型网站，它利用以下重写`web.config`：

```
 <system.webServer>
    <rewrite>
      <rules>
        <rule name="DynamicRewrite" stopProcessing="true">
          <match url="(.*)"/>
          <action type="Rewrite" url="Default.aspx/{R:1}"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

这在我的开发机器上的 IIS Express 中运行良好，但服务器运行的是 IIS 6，并且重写失败（我在应该可以工作的 URL 上得到 404）。

我找到[了这篇文章](https://stackoverflow.com/questions/2714974/asp-net-iis-6-and-url-rewriting)，但它谈论的是`.asax`文件，即一个 Web 应用程序。我只有一个简单的网站`Default.aspx`和一些自定义类。

我有什么办法可以完成这项工作吗？基本上，我希望能够在`web.config`我的 aspx 文件中执行此操作，但我可以完全访问 IIS，因此我也可以在那里进行配置，如果需要的话（虽然我不知道如何——IIS 6 是真的很吓人）。

目前，我使用的是 .NET 4.0，但如果需要，我总是可以降低到 3.5（听说 4.0 的无扩展 URL 存在一些重写问题，但我从来没有真正了解它的要点）。

# php - 仅在几页中显示错误 Fatal Error: mysql_real_escape_string()

> ID：16211565
> 
> 赞同：-2
> 
> 时间：2013-04-25T09:49:03.797
> 
> 标签：php, mysql

我在某些页面中收到此错误，无法确定原因，！请帮忙。谢谢，

> 致命错误：mysql_real_escape_string()：拒绝访问用户'flatsloo'@'localhost'（使用密码：否） 致命错误：mysql_real_escape_string()：无法建立到服务器的链接

我的连接代码

```
public function openConnection()
    {
        try
        {
            $this->_objMySql = mysql_connect($this->getDbConfig()->getHostName(), $this->getDbConfig()->getUsername(), $this->getDbConfig()->getPassword());

            if (mysql_errno())   // check if error occurred
            {
                return mysql_error();
            }

            mysql_select_db($this->getDbConfig()->getDatabase());

            if (mysql_errno())   // check if error occurred
            {
                return mysql_error();
            }

            return true;
        }
        catch (Exception $e)
        {
            return $e->getMessage();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:59:28.513

您的数据库连接出现了一些错误。它无法连接到您的数据库。检查您的连接语句`mysql_connect`及其参数。

# javascript - 为什么我收到错误'无法设置未定义的属性'0''

> ID：16211567
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:49:09.853
> 
> 标签：javascript, object

我不明白为什么我不能创建一个新对象

错误：`Uncaught TypeError: Cannot set property '0' of undefined`

我在线路代码上遇到错误。 `this.gameAnimals[i] = {};`

```
this = Game;
gameAnimals[0] = 'frog'; 
```

那为什么我有错误？非常感谢。

```
var Game = {
    init: function(){
        this.property1 = 1;
        this.property2 = 2;
        this.property3 = 3;
        this.property1000 = 1000;
    },

     cons: function(gameAnimals){

        for(var i = 0; i < gameAnimals.length; i++){
             this.gameAnimals[i] = {};
        }
     },    
};

var gameAnimals = ['frog', 'lion', 'cat'];
Game.cons(gameAnimals); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:51:50.190

您正在尝试设置 的第零个元素`this.gameAnimals`。

但是，`this.gameAnimals`不存在，因为该`Game`对象没有私有成员`gameAnimals`。因此它是`undefined`，然后您尝试在其上设置属性。

我想你可能只是说`gameAnimals`，不加前缀`this`。`this.gameAnimals`（或者，如果这是您真正的意思，您需要先创建。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:51:47.793

该变量`gameAnimals`是在您尝试在 for 循环中为其赋值后声明的。尝试先定义数组。

# c# - 如何使 EndInvoke 通用？

> ID：16211570
> 
> 赞同：1
> 
> 时间：2013-04-25T09:49:18.827
> 
> 标签：c#, events, generics, asynchronous, event-handling

在我的代码中，我使用 引发事件`BeginInvoke`，但是因为每个事件都有不同`EventArgs`的 ，所以我的代码充满了重复的函数，例如：

```
private void EndAsyncConnect(IAsyncResult iar)
{
    var ar = (System.Runtime.Remoting.Messaging.AsyncResult)iar;
    var invokedMethod = (EventHandler<InfoArgs>)ar.AsyncDelegate;

    invokedMethod.EndInvoke(iar);
}

private void EndAsyncReceived(IAsyncResult iar)
{
    var ar = (System.Runtime.Remoting.Messaging.AsyncResult)iar;
    var invokedMethod = (EventHandler<ReceivedArgs>)ar.AsyncDelegate;

    invokedMethod.EndInvoke(iar);
} 
```

有没有办法让 EndAsync 函数对所有事件都通用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:03:28.730

如果您的所有事件委托类型都是`EventHandler<T>`，这应该有效：

```
void CompletionCallback<T>(IAsyncResult iar)
    where T : EventArgs
{
    var ar = (System.Runtime.Remoting.Messaging.AsyncResult)iar;
    var invokedMethod = (EventHandler<T>)ar.AsyncDelegate;
    invokedMethod.EndInvoke(iar);
} 
```

# r - log10 尺度上的段注释在段的结尾和开头的工作方式不同？

> ID：16211572
> 
> 赞同：7
> 
> 时间：2013-04-25T09:49:27.850
> 
> 标签：r, plot, ggplot2, logarithm

我在 ggplot 中发现了一个相当令人困惑的功能，同时尝试在 log10 尺度上注释段。以下代码生成以下图：

```
library(ggplot2)
dat <- data.frame(x = x <- 1:1000, y = log(x)) 
ggplot(dat, aes(x = x, y = y)) +
geom_line(size = 2) + scale_x_log10() +
annotate("segment", x = 0, xend = log10(100), y = log(100), yend = log(100), linetype = 2) +
annotate("segment", x = log10(100), xend = log10(100), y = 0, yend = log(100), linetype = 2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/PFv09.png)

而这就是我所追求的：

```
ggplot(dat, aes(x = x, y = y)) +
geom_line(size = 2) + scale_x_log10() +
annotate("segment", x = 0, xend = log10(100), y = log(100), yend = log(100), linetype = 2) +
annotate("segment", x = 100, xend = log10(100), y = 0, yend = log(100), linetype = 2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/5FFFI.png)

换句话说，我必须在 x 轴上对线段的端点进行 log10 转换，而不是开始。这种行为有合乎逻辑的解释吗？我知道[`aes()`转换是否](https://stackoverflow.com/questions/14984110/transformation-doesnt-transorm-line-segments-in-ggplot2)......但在这种情况下，x 轴上的转换应该是统一的（嗯，log10），对吧？

我正在研究：

```
R version 3.0.0 (2013-04-03)
Platform: x86_64-w64-mingw32/x64 (64-bit)
ggplot2_0.9.3.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:43:06.500

发现这是一个错误`scales()`（不仅适用于`scale_x_log10()`），当它与它一起使用`annotate()`并`xend`提供值时（它已经被 W.Chang[填充为问题）。](http://osdir.com/ml/ggplot2/2012-10/msg00281.html)在这种情况下，`xend`仅在一个方向上进行转换 - 不采用 log10 的值，但会计算功率。

`scale_x_log10()`例如，如果`"rect"`在`annotate()`和中使用，则可以正常工作`xmin`，`xmax`提供值。

```
ggplot(dat,aes(x,y))+geom_line()+
  scale_x_log10()+
  annotate("rect",xmin=100,xmax=1000,ymin=log(10),ymax=log(200)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/jpHeB.png)

此问题的解决方法是使用`geom_segment()`with`data=NULL`和放在`aes()`.

```
ggplot(dat, aes(x = x, y = y)) +
  geom_line(size = 2) + scale_x_log10() +
  geom_segment(data=NULL,aes(x = 100, xend = 100, y = 0, yend = log(100)), 
                                                             linetype = 2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/U5ifw.png)

# api - SoundCloud：我需要一个函数来从任何 permalink_url 中提取 artifact_url 的 var 以插入数据库

> ID：16211575
> 
> 赞同：0
> 
> 时间：2013-04-25T09:49:30.503
> 
> 标签：api, soundcloud

我的 permalink_url 示例是“ [https://soundcloud.com/rac/sets/rac-chapter-one](https://soundcloud.com/rac/sets/rac-chapter-one) ”。我需要一个函数来从永久链接 url 生成 artifact_url 变量。类似于从 Soundcloud 文档中提取的这段代码，但表示为一个函数：

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
SC.initialize({
  client_id: 'YOUR_CLIENT_ID'
});

// permalink to a track
var track_url = 'https://soundcloud.com/rac/sets/rac-chapter-one';

SC.get('/resolve', { url: track_url }, function(track) {
  SC.get('/tracks/' + track.id + '/comments', function(comments) {
    for (var i = 0; i < comments.length; i++) {
      console.log('Someone said: ' + comments[i].body);
    }
  });
});
</script> 
```

对于这种类型的编码，我是一个勉强能干的玩家，如果有任何实际帮助，我将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:07:15.827

您拥有`artwork_url`声音表示的属性：

```
<script src="http://connect.soundcloud.com/sdk.js"></script>
SC.initialize({
  client_id: 'YOUR_CLIENT_ID'
});

// permalink to a track
var track_url = 'https://soundcloud.com/rac/sets/rac-chapter-one';

SC.get('/resolve', { url: track_url }, function(track) {
  console.log(track.artwork_url);
});
</script> 
```

# bash - 删除shell中的部分路径

> ID：16211578
> 
> 赞同：0
> 
> 时间：2013-04-25T09:49:36.100
> 
> 标签：bash, shell, unix, scripting, sed

```
echo "/dir1/dir2/filename.txt" | sed ???? 
```

获得输出的 Sed 表达式应该是什么

```
 /dir1/filename.txt 
```

如果有任何其他更简单的方法来实现这一点，那也是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:54:27.507

你可以这样做`cut`：

```
$ echo "/dir1/dir2/filename.txt" | cut -d/ -f1,2,4
/dir1/filename.txt 
```

有了`sed`它有点混乱：

```
$ echo "/dir1/dir2/filename.txt" | sed 's/^\(\/.*\)\(\/.*\)\(\/.*\)/\1\3/'
/dir1/filename.txt 
```

这个想法是获取部分`/text`with`\(\/.*\)`然后打印我们想要的部分，1 和 3，with `\1\3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:10:42.747

这应该可以很好地解决问题`awk '{$(NF-1)=$NF;NF--}1' FS='/' OFS='/'`：

```
$ echo "/dir1/dir2/filename.txt" | awk '{$(NF-1)=$NF;NF--}1' FS='/' OFS='/' 
/dir1/filename.txt 
```

这里的优点是脚本与字段的数量无关，因此给定任意数量的文件夹，文件总是移动到父目录中。

```
$ echo "/a/b/c/d/e/f/filename.txt" | awk '{$(NF-1)=$NF;NF--}1' FS='/' OFS='/' 
/a/b/c/d/e/filename.txt 
```

它通过将倒数第二个字段设置`$(NF-)`为最后一个字段`$NF`并减少字段数来工作`NF--`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:04:31.547

这可能对您有用：

```
echo "/dir1/dir2/filename.txt" | sed 's/\(.*\)\/.*\(\/.*\)/\1\2/' 
```

或者

```
echo "/dir1/dir2/filename.txt" | sed 's/\(.*\)\/[^/]*\//\1\//' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:02:15.900

使用 sed：

```
echo "/dir1/dir2/filename.txt" | sed 's:^\(.*\)/[^/]\+\(/[^/]\+\)$:\1\2:' 
```

这将删除最后一个目录的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T10:06:17.650

```
 echo "/dir1/dir2/filename.txt" | sed 's/\/\w*//2' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T20:39:25.807

Sidharth C Nadhan 说这个 echo "/dir1/dir2/filename.txt" | sed 's//\w*//2' 但为了使其更具可读性，请使用 '!' （或者是其他东西）。

```
$ echo "/dir1/dir2/filename.txt" | sed 's!/\w*/!/!'
/dir2/filename.txt 
```

's!/\w*/!/!' 含义 将 /\w*/ 替换为 / \w 是一个单词字符，* 表示任何数字。'！' 是分隔符。即使解决方案已经被接受，我也添加了这个，但我认为这不那么难看，值得一看。

此外，如果这是用于 bash 脚本，那么 bash 也很擅长这些东西，而且因为它内置在 bash 中，所以它在同一个过程中并且效率更高。

```
$ f="/dir1/dir2/filename.txt";  echo $f; echo ${f/dir2\//}
/dir1/dir2/filename.txt
/dir1/filename.txt 
```

不幸的是，您不能使用除 / 以外的东西作为分隔符，而且我不知道如何制作 \w，或 [^/]* 或 [a-z0-9]* 或其他任何工作。在这方面，Bash 不如 sed 好，而且我对 bash 的了解也不如我应该的那样。

# jquery - 对大表进行分页的最简单方法 - 大约 3000 行

> ID：16211580
> 
> 赞同：0
> 
> 时间：2013-04-25T09:49:42.443
> 
> 标签：jquery, html, tabs, datatables

我正在做一个网络应用程序项目，在我的一个页面上我有一个非常大的表格，大约 2000 行。

我正在寻找最简单的方法来为该表提供分页功能，以允许一次查看 50 或 100 行。我看过 [http://www.datatables.net/](http://www.datatables.net/)但它似乎对我不起作用，

还有其他简单的选择吗？

干杯

# sql - 选择不匹配查询的数据

> ID：16211584
> 
> 赞同：0
> 
> 时间：2013-04-25T09:49:44.153
> 
> 标签：sql, date, select, sql-server-2012

我只想选择与查询不匹配的数据。

假设我有两张桌子：

*汽车：*

```
id         int          PRIMARY KEY IDENTITY
make       varchar(255) NOT NULL
model      varchar(255) NOT NULL
pricegroup varchar(1)   NOT NULL 
```

* * *

*租金：*

```
id         int          PRIMARY KEY IDENTITY
sdate      date         NOT NULL
edate      date         NOT NULL
car_id     int          NOT NULL 
```

* * *

**Rentals 中的sdate**是租赁的开始日期 - **edate**是结束日期。

我想在指定的时间段内找到所有可用的汽车。

这个查询几乎可以工作：

```
SELECT * FROM cars WHERE id NOT IN 
  (SELECT car_id FROM rentals WHERE sdate <='2013-04-28' AND edate >='2013-04-30') 
```

但是，它仅适用于特定日期。如果您输入 2013 年 4 月 25 日和 2013 年 5 月 30 日之间的时间段，**所有**汽车**都会**出现，即使其中一些在该时间段之间已被预订。

我使用 MS SQL 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:08:17.380

将所有日期转换为日期时间格式，时间为 0（即 2013-04-28 00:00:00.000 ）。

```
SELECT * FROM cars WHERE id NOT IN
(SELECT car_id FROM rentals WHERE 
    Convert(datetime, Convert(varchar(12),sdate,106)) as sdate >= Convert(datetime, Convert(varchar(12),'2013-04-28',106)) AND 
    Convert(datetime, Convert(varchar(12),edate,106)) as edate <= Convert(datetime, Convert(varchar(12),'2013-04-30',106))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:01:50.847

您需要反过来比较日期：

```
SELECT * FROM cars WHERE id NOT IN 
  (SELECT car_id FROM rentals WHERE sdate <='2013-04-30' AND edate >='2013-04-28') 
```

此外， using`NOT EXISTS`可能会给您比以下更好的性能`NOT IN`：

```
SELECT * FROM cars WHERE NOT EXISTS
  (SELECT 1 FROM rentals WHERE car_id=cars.id AND edate>=start_date AND sdate<=end_date) 
```

# php - 如何从 PHP 打印按钮调用 JavaScript 函数

> ID：16211586
> 
> 赞同：1
> 
> 时间：2013-04-25T09:49:48.303
> 
> 标签：php, javascript

多么奇怪的问题。如果有人对此有更好的标题，请继续编辑它；我想不出还能叫什么。我正在使用 PHP 从 PHP 打印一个按钮`echo`。按钮的目的是通过调用 JavaScript 函数来显示表单，该函数用于`document.getElementById()`将表单标签的样式属性更改为可见，以便用户可以看到表单。我遇到的问题是回显的字符串必须有引号，`onclick`事件必须有引号，并且传递给 JavaScript 函数的参数必须有引号。我尝试用反斜杠转义参数的引号，但这没有用。谁能帮我？

这是我的代码：

```
echo "<input type = 'button' onclick = 'showform(\'psswdform\')' value = 'Change password'>";//this shows the form and needs quotes 
```

JavaScript 函数：

```
function showform(id)
{
document.getElementById(id).style.visibility = "visible";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:00:15.543

这对我有用吗？[（工作示例）](http://ideone.com/S9wayn)

```
<?php

echo "<input type = 'button' onclick = 'showform(\"psswdform\")' value = 'Change password'>";//this shows the form and needs quotes 
```

生成：

```
<input type = 'button' onclick = 'showform("psswdform")' value = 'Change password'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:03:01.950

尝试这个：

```
echo "<input type = 'button' onclick = 'showform('psswdform')' value = 'Change password'>"; 
```

此外，您可以尝试使用 jQuery，这是一个超级流行的 JS 库，它让生活更轻松。

我会制作以下 CSS 类。

```
.hide {
   display:none;
} 
```

比我要添加以下jQuery：

```
$("#show-password-reset").click(function(event){
 event.preventDefault();
 $("#passwdform").show();
}); 
```

最后包括你的显示按钮：

```
<input id="show-password-reset" type = 'button' value = 'Change password'> 
```

确保`class="hide"`在`passwdform`元素上使用，以便在页面加载时隐藏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:54:50.867

尝试使用单引号和双引号的组合连接字符串，如下所示：

`echo '<input type="button" onclick="showform(' . "'psswdform'" . ')" value="Change password">';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:54:13.860

PHP 内部的 \ 已经是一个转义字符。如果要输出“\”，则需要回显“\\”。

# google-analytics - 如何公开 Google Analytics（分析）数据？

> ID：16211589
> 
> 赞同：10
> 
> 时间：2013-04-25T09:49:58.940
> 
> 标签：google-analytics

目前有没有任何方法可以在我的网站上显示来自我的 GA 帐户的 Google Analytics 数据而无需任何用户身份验证？我想显示最流行的页面，也许是最流行的搜索等等。我正在寻找一种方法来做到这一点，它不需要我在 API 上构建代理服务并受制于配额和限制等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:26:24.047

GA 目前不提供无需用户身份验证即可访问数据的方法，即使通过 API 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:10:09.393

尝试使用[Google Apps 脚本](http://script.google.com)，然后您可以将其输出嵌入到页面中。它们提供 GA 连接器，在发布 Web 应用程序时，您可以选择允许匿名访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T12:30:02.743

我觉得对这个问题的回答已经过时了。

具体来说，我能够从我的服务器获取数据（我得到一个 XML 响应），我仍在试图弄清楚如何轻松地将这个 XML 解析为可供 javascript 用于可视化的数据。

我知道 ga easy 仪表板库 (gadash) 做得很好，但是它依赖于从库本身（通过身份验证）进行的查询，而这正是我们试图避免的。

任何人都知道如何使用我们收到的 XML 数据来显示图表？

如果我们得到一个完整的解决方案，我很乐意展示我如何获取 xml

宜兰

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:52:46.420

我有一个这样的想法：

1.  创建一个按钮，您可以在其中获取 OAuth2 访问令牌（可能在管理员端）
2.  将令牌存储到某处（数据库、文件等）
3.  每小时（3600 秒）做一个 cron 作业来更新令牌

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T20:31:02.123

Google Analytics Demos & Tools 是供用户和开发人员探索 Google Analytics Platform 可能性的资源。了解如何实施 GA 和可构建以利用 Google Analytics 的灵活性和强大功能的应用程序。

整个网站的代码是开源的，可以在 GitHub 上找到。如果您想了解任何事情是如何完成的，我们鼓励您查看一下。

[谷歌分析工具](https://ga-dev-tools.appspot.com/)

[Github 上的 Google Analytics 演示和工具](https://github.com/googleanalytics/ga-dev-tools)

# wpf - wpf 列表框和数据模板，里面有网格

> ID：16211595
> 
> 赞同：2
> 
> 时间：2013-04-25T09:50:10.980
> 
> 标签：wpf, listbox, grid, datatemplate

我有以下问题。我想`ListBox`拥有`DataTemplate`as `Grid`。该网格有 2 个两列。我想将第一列宽度设置为`3*`，将另一列宽度设置为`*`. 这个怎么做？我将复制我的代码。

```
<ListBox x:Name="commandListbox" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding}"/>
                <TextBlock Grid.Column="1" Text="icon" />
           </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>                
</ListBox> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T11:18:00.770

最好将模板存储在资源中：

```
<Window.Resources>
  <DataTemplate x:Key="DefaultTemplate">
    <Grid x:Name="GridItem" Width="200">
       <Grid.ColumnDefinitions>
           <ColumnDefinition Width="Auto" />
           <ColumnDefinition Width="Auto" />
       </Grid.ColumnDefinitions>

       <TextBlock x:Name="Parameter" Grid.Column="1" Text="{Binding Path=Name}" Margin="5,1,0,0" />
       <TextBlock x:Name="Value" Grid.Column="2" Text="{Binding Path=Age}" Margin="85,1,0,0" />

       <Line x:Name="Separator" X1="0" X2="0" Y1="0" Y2="20" SnapsToDevicePixels="True" Grid.Column="1" Stroke="Black" StrokeThickness="2" Margin="50,0,0,0" HorizontalAlignment="Left" />
   </Grid>
 </DataTemplate>
</Window.Resources> 
```

列表框定义：

```
<ListBox Name="MyListBox" ItemTemplate="{StaticResource DefaultTemplate}" /> 
```

在代码 C# 中：

```
public class Person
{
  public string Name
  {
    get;
    set;
  }

 public int Age
 {
   get;
   set;
 }
} 
```

定义 ObservableCollection：

```
private ObservableCollection<Person> MyListBoxData = new ObservableCollection<Person>(); 
```

并在集合中添加项目：

```
MyListBoxData.Add(new Person()
{
  Name = "Nick",
  Age = 21,
});

MyListBoxData.Add(new Person()
{
  Name = "Adam",
  Age = 11,
});

MyListBox.ItemsSource = MyListBoxData; 
```

**编辑：**

然后设置第一个TextBlock的Width="3*"、Width="*"和Margin="-WidthGrid"：

```
<Grid x:Name="GridItem" Width="300">
 <Grid.ColumnDefinitions>
  <ColumnDefinition Width="3*" />
  <ColumnDefinition Width="*" />
 </Grid.ColumnDefinitions>

 <TextBlock x:Name="Parameter" Grid.Column="1" Text="{Binding Path=Name}" Margin="-220,0,0,0" />
 <TextBlock x:Name="Value" Grid.Column="2" Text="{Binding Path=Age}" Margin="0,0,0,0" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-24T09:35:05.067

使用 IsSharedSizeScope 在生成的网格中共享列大小，用于自动宽度（不能为 * 大小调整）：

通过[http://wpftutorial.net/DataTemplates.html](http://wpftutorial.net/DataTemplates.html)

```
<ListBox ItemsSource="{Binding}" BorderBrush="Transparent" 
     Grid.IsSharedSizeScope="True"
     HorizontalContentAlignment="Stretch">
<ListBox.ItemTemplate>
    <DataTemplate>
        <Grid Margin="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="Key" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Name}" FontWeight="Bold"  />
            <TextBox Grid.Column="1" Text="{Binding Value }" />
        </Grid>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

[见 MSDN 备注](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.issharedsizescope%28v=vs.110%29.aspx)

> 参与大小共享的列和行不遵守星号大小。在这种情况下，星号大小被视为自动。如果在资源模板中将 IsSharedSizeScope 设置为 true，并且在该模板之外定义了 SharedSizeGroup，则网格大小共享不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T10:46:55.063

```
<ListBox x:Name="commandListbox" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.75*" />
                    <ColumnDefinition Width="0.25*" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding}"/>
                <TextBlock Grid.Column="1" Text="icon" />
           </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>                
</ListBox> 
```

如果我理解正确，您正在寻找第一列的 3/4 空间和第二列的 1/4 空间。以上述格式设置宽度一定可以解决问题。

希望它解决。

# stocktwits - 区分小部件中的用户名和用户 ID

> ID：16211600
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:17.727
> 
> 标签：stocktwits

我注意到小部件为用户名以数字开头的用户显示错误数据的问题。小部件看起来像是将它们视为用户 ID。

在用户 ID 上使用用户名时，有没有办法区分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:38:25.493

**用户**参数可以是用户名或 id 。至少它应该。您是正确的，用户名的数字变得混乱。我们将解决问题并报告回来。感谢您指出了这一点。

# php - SPHINX enable_star 不工作

> ID：16211602
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:19.277
> 
> 标签：php, yii, sphinx

我希望使用 sphinx 返回的结果来搜索子字符串。

我的设置好吗？

我需要重新启动该`searchd`过程吗？

```
index dev_jobs
{
    source      = dev_jobs_src
    path        = /home/sphinx/jobs/dev_jobs
    docinfo     = extern
    charset_type    = utf-8
    enable_star = 1
    min_infix_len = 3   
}

searchd
{
    port        = 9312
    log     = /var/log/sphinx/searchd.log
    query_log   = /var/log/sphinx/query.log
    read_timeout    = 5
    max_children    = 30
    pid_file    = /var/run/sphinx/searchd.pid
    max_matches = 100000
    seamless_rotate = 1
    preopen_indexes = 0
    unlink_old  = 1
} 
```

和代码的php部分：

```
$sphinx_search = Yii::app()->search;
        $sphinx_search->setSelect('*');

        $sphinx_search_final = '';

        $sphinx_search_query = trim($this->q);
        if (strlen($sphinx_search_query) > 0) {
            $sphinx_search_query = str_replace('-', ' ', $sphinx_search_query);
            $keys = explode(' ', $sphinx_search_query);
            foreach ($keys as $k => $key) {
                if ($key) {
                    $keys[$k] = $key;
                } else {
                    unset($keys[$k]);
                }
            }
            if (count($keys) > 0) {
                $sphinx_search_final = ' @(position_name,employer_name,employer_first_name,employer_last_name,employer_position) ' . $sphinx_search_query .
                        ' @(position_name,employer_name,employer_first_name,employer_last_name,employer_position) ' . implode('|', $keys);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:05:32.267

> 我需要重新启动 searchd 进程吗？

更重要的是您需要重建索引。如果你使用 --rotate，它会告诉 searchd 重新加载你的索引。

# ruby-on-rails - 配置 Ruby 安装时出错

> ID：16211603
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:20.310
> 
> 标签：ruby-on-rails, ruby, rvm

我一直在通过 StackOverflow 寻找答案，但在失败三天后我放弃了安装 Ruby。

目前我已经安装：

1.  红宝石（股票）
2.  虚拟机
3.  来自[http://railsinstaller.org/的 Ruby 安装程序](http://railsinstaller.org/)

我在配置过程中遇到错误。我已经尝试从 SMF 切换到 Homebrew，但这并不好。

这是我得到的错误：

```
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/Unwired/.rvm/rubies/ruby-1.9.3-p392 --with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libxml2:/usr/local/opt/libxslt:/usr/local/opt/libksba:/usr/local/opt/openssl:/usr/local/opt/sqlite --disable-install-doc --without-tcl --without-tk --enable-shared',
please read /Users/Unwired/.rvm/log/ruby-1.9.3-p392/1366883126_configure.log
There has been an error while running configure. Halting the installation. 
```

我很高兴开始学习 RoR，但安装它很痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:04:50.983

按着这些次序：

1.  [从http://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)下载 Rails 安装程序以及 DevKit。
2.  安装红宝石。
3.  创建一个目录并在 上解压 DevKit `C:`，即`C:\DevKit`.
4.  将 Devkit 的路径复制到你的`Environment Variables > Path`ie, `C:\DevKit\bin;`.
5.  打开`cmd`并输入以下内容：

```
红宝石dk.rb
ruby dk.rb 初始化
ruby dk.rb 安装
```

1.  打开另一个`cmd`并键入`gem install rails`.
2.  通过键入以下命令安装 MySQL：`gem install mysql`。

注意：确保将 Ruby 的路径复制到`Environment Variables > Path`. 那里有一个关于在 Rails 上安装 Ruby 的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:09:22.520

你用的是Linux环境吗？如果是这样，请按照“[此处](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)”中的说明进行操作。

# php - PHP：关于 OOP 中“公共”可见性的最佳实践

> ID：16211604
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:20.317
> 
> 标签：php, oop, visibility, public

您是否总是在类中的方法和属性旁边添加**公共？**还是你把它排除在外？

**1\. 选项 1，不公开：**

```
<?php
class SimpleClass {
    // property declaration
    $var = 'a default value';

    // method declaration
    function displayVar() {
        echo $this->var;
    }
}
?> 
```

**2\. 选项 2，公开：**

```
<?php
class SimpleClass {
    // property declaration
    public $var = 'a default value';

    // method declaration
    public function displayVar() {
        echo $this->var;
    }
}
?> 
```

我个人认为添加**public**可以使代码更加清晰，尽管什么被认为是最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:52:58.847

最佳实践是选择一个编码标准并遵循它（并将有关它的信息放在代码中的某个位置）。

我猜 PSR 在 PHP 中最常用：

[https://github.com/php-fig/fig-standards/tree/master/accepted](https://github.com/php-fig/fig-standards/tree/master/accepted)

并根据 PSR-2：

“必须在所有属性上声明可见性。”

所以第二种选择是一种方法。

你也可以检查这个：

[http://www.phptherightway.com/](http://www.phptherightway.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:52:12.190

第二种方法被认为是最佳实践，因为它为任何用户创造了可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:12:28.677

即使它是默认值，也几乎总是指定值。

# java - Java string.replaceAll() 中货币的正则表达式（不是 php，不是 javascript）

> ID：16211607
> 
> 赞同：1
> 
> 时间：2013-04-25T09:50:30.900
> 
> 标签：java, regex

我正在尝试从**Java 中的文本中**获取价格，我正在使用这个正则表达式，但**我无法摆脱 113**：

```
String str="jañlskd f añlksdj fñlaks: 19,05€ | jfañlskdjf: 22€ jañlsdkf dkjfls 113: 15€ jñalkdf dk añldf: añlkdsj fdlkf dlkfajs 19,05€ buy";
str.replaceAll("[^0-9+€|^0-9+,0-9+€|^ ]",""); 
```

结果是：

19,05€ | 22€ **113** 15€ 19,05€

**我也想取消最后没有€的数字。**

我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:44:29.617

这个问题的完整答案是：

1.  不要使用 replaceAll （在这种情况下更复杂）。
2.  使用匹配器查找正匹配。

例子：

```
Pattern p = Pattern.compile("[0-9]+(?:,[0-9]+)?(?=€)");
Matcher m=p.matcher(nodeValue);
String res=new String();
while (m.find()) {
    res+=m.group()+" ";
}
String prices=res.split(" "); 
```

感谢所有人（特别是 HamZa）。

# java - Java - 循环通过 LinkedhashMap 并获取值

> ID：16211608
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:35.097
> 
> 标签：java, hashmap, linkedhashmap

我有以下 LinkedHashMap 我以下列方式将值放入其中：

```
if (preAuthorizeAnnotation != null) {
    requestMappingValues = requestMappingAnnotation.value(); // to get the url value
    RequestMethod[] methods = requestMappingAnnotation.method(); // to get the request method type
    System.out.println(+i + ":Method  : " + method2.getName() + " is secured   ");
    //System.out.println("Requestion method type : "+methods[0].name());
    Class[] parameterTypes = method2.getParameterTypes();
    for (Class class1: parameterTypes) {
        userDefinedParams = new UserDefinedParams();
        strClassNameToFix = class1.getName();
        strClassname = strClassNameToFix.replaceAll("\\[L", "").replaceAll("\\;", "");
        if (class1.isArray()) {

            //classObj = strClassnames.substring(strClassnames.lastIndexOf('.')+1, strClassnames.length()-1);
            userDefinedParams.setDataType(strClassname);
            userDefinedParams.setIsArray("Y");
            paramsList.add(userDefinedParams);
        } else if (class1.isPrimitive() && class1.isArray()) {
            userDefinedParams.setDataType(strClassname);
            userDefinedParams.setIsArray("Y");
            paramsList.add(userDefinedParams);
        } else {
            userDefinedParams.setDataType(strClassname);
            userDefinedParams.setIsArray("N");
            paramsList.add(userDefinedParams);
        }
        System.out.println("strClassname : " + strClassname);
    }
    paramsMap.put("url_" + i, requestMappingValues[0]);
    paramsMap.put("params_" + i, paramsList); 
```

我尝试循环遍历地图，如下所示：

```
for (Object key: paramsMap.keySet()) {
    uri = "http://localhost:8080/api" + paramsMap.get(key);
    statusCode = httpRequest.handleHTTPRequest(client, uri);
    System.out.println("Statuscode : " + statusCode);
} 
```

我得到以下异常：

```
java.lang.IllegalArgumentException 
```

因为它第一次得到`url`正确但错过了`params`.

我想要 url 和`paramList`单独的，以便我可以处理它。

我正在尝试获取 url 和对应的参数列表，并将 paramList 转换回用户定义和进一步处理的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:56:06.027

最好的解决方案可能是拥有 2 个单独的映射：一个用于 url，另一个用于参数。

* * *

但是，您似乎不需要地图，因为您只将它们用作存储 url 和参数的列表。因此，您应该考虑为 url 使用一个列表，为参数使用一个列表，`i`您当前附加到作为地图中键的 String 将是列表中的索引：

```
 urls.add(requestMappingValues[0]);
 params.add(paramsList); 
```

稍后您只需遍历这些列表以检索插入的值。

# java - liferay portlet soap 客户端，代理身份验证

> ID：16211609
> 
> 赞同：1
> 
> 时间：2013-04-25T09:50:41.390
> 
> 标签：java, soap, liferay, liferay-6

我在我的 Liferay 门户（Windows）中部署了一个 portlet，它在某处调用 SOAP 服务，例如：

```
URL url = new URL("https://walter.dia.fi.upm.es:8443/integrate_collaborative_tools/services/SemanticInteroperabilityLayer?wsdl");
String namespace = "http://QueryEngine";
String serviceName = "SemanticInteroperabilityLayer";
QName serviceQN = new QName(namespace, serviceName);

Service service = Service.create(url,serviceQN);

QName QN = new QName(namespace,"SemanticInteroperabilityLayerHttpsSoap11Endpoint");
SemanticInteroperabilityLayerPortType portType=service.getPort(QN,SemanticInteroperabilityLayerPortType.class); 
```

现在，我们需要在代理后面部署一个测试服务器。

我将如何更改我的 liferay、操作系统或代码配置以向代理进行身份验证？

# php - PHP $POST If 语句

> ID：16211612
> 
> 赞同：0
> 
> 时间：2013-04-25T09:50:50.897
> 
> 标签：php, facebook, post

好的，所以我遇到的问题是我有一个简单的文本区域，应该将输入的内容发送到另一个页面，提交时应该说“谢谢”，如果没有输入，应该提示输入，但是，当我什么都不输入时它仍然说“谢谢”

我相信它会很简单。这是我的 index.php 中的代码

```
<form method="POST" action="translate.php">
<name="status" cols="50" rows="5">
What's on your mind?
</textarea><br>
<input type="submit" value="Translate my Status" /> 
```

和我的 translate.php

```
<?php

$status = $_POST['status'];
if($status == ""){
echo "Please enter a status.";
}
else {
echo "Thanks";
}

?> 
```

我曾尝试在我的 index.php 中使用上述代码，但“状态”变量出现错误。

当我问时，我将如何在主页上出现弹出错误而不是重定向到 translate.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:55:29.213

1.你忘记写了`textarea`。

```
<textarea name="status" cols="50" rows="5">
What's on your mind?
</textarea><br> 
```

2.Textarea 将`What's on your mind?`默认设置。所以你应该检查..

```
if(($status == "") || ($status == "What's on your mind?")) 
```

3.试着`echo $status`看看它实际上包含什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:59:01.493

```
 <form name="frm" method="POST" action="translate.php">
 <script language="javascript">
 function submitData()
 {
       if(document.frm.status.value == "")
          alert("Please enter a status.");
       else
          frm.submit();
 }
 </script>
 What's on your mind?
 <textarea name="status" cols="50" rows="5"></textarea><br>
 <input type="button" value="Translate my Status" onclick="submitData()"/>
 </form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:00:15.327

if 语句不合适，它实际上并没有达到您的预期。这是您更新的代码：

```
<form method="POST" action="translate.php">
<textarea name="status" cols="50" rows="5">
What's on your mind?
</textarea><br>
<input type="submit" value="Translate my Status" />
</form> 
```

和你的 translate.php

```
<?php
$status = $_POST['status'];
if(isset($status) && strlen($status)>0){
echo "Thanks";
}
else {
echo "Please enter a status.";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:56:06.657

带上岂不是更好`<textarea name="status" cols="50" rows="5">`。

您还为 textarea 设置了一个值，因此如果您不删除“What's on your mind？”，这意味着您正在通过状态发送该值，因此它不为空。

如果在您删除该值时它仍然显示“谢谢”，则可能存在其他问题。

# android - 密钥与任何允许的密钥不匹配

> ID：16211613
> 
> 赞同：2
> 
> 时间：2013-04-25T09:51:18.933
> 
> 标签：android, facebook, login

我收到无效的 android_key 参数。密钥 cDg3* ***** ***** *ETg 不匹配任何允许的密钥。[在https://developers.facebook.com/apps/2487](https://developers.facebook.com/apps/2487)* **2958*配置您的应用程序密钥哈希。*

我在我的窗口系统中完成的步骤 1\. keytool -export -alias myAlias -keystore C:\Users\Mayank.android\myKeyStore | C:\openssl-0.9.8k_X64\bin\openssl sha1 -binary | C:\openssl-0.9.8k_X64\bin\openssl enc -a -e

1.  得到哈希键 wjPx* ***** +Dd+77dtPh8Sm8k=
2.  Facebook 应用程序配置

    1.  填写姓名
    2.  包裹名字
    3.  班级名称
    4.  哈希键 wjPx* ***** +Dd+77dtPh8Sm8k=
    5.  获得应用程序 ID 2487***2958

还有什么需要做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-25T07:28:26.333

在模拟器或 Android 设备上运行时，您是否遇到问题？如果在 Android 设备上，您可以从下面的代码中获取 HashKey，该代码是从 [https://developers.facebook.com/docs/android/getting-started](https://developers.facebook.com/docs/android/getting-started)学习的。

在您的 windows 机器上执行的 keytool 仅适用于您在机器上运行的模拟器。

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

// Add code to print out the key hash
try {
    PackageInfo info = getPackageManager().getPackageInfo(
            "com.facebook.samples.hellofacebook", 
            PackageManager.GET_SIGNATURES);
    for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
        }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

}

... 
```

你会在 Logcat 中找到你的 hashkey，例如

```
12-20 10:47:37.747: D/KeyHash:(936): 478uEnKQV+fMQT8Dy4AKvHkYibo= 
```

# node.js - 在 Socket.io 中，如何获取存储的 cookie 信息？

> ID：16211622
> 
> 赞同：2
> 
> 时间：2013-04-25T09:51:42.723
> 
> 标签：node.js, cookies, express

在使用 express 的节点应用程序中，我存储了 cookie 信息。现在我需要在 socket.io 中获取存储的 cookie 信息。我怎样才能得到这个？

```
 app.use(function (req, res, next) {

        res.cookie('cookieName','1', { maxAge: 50000, httpOnly: true });
    });

    io.sockets.on('connection', function (socket) {

     //here i need to access the cookie.how can i do this

    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:42:28.870

最后我找到了答案。下面的代码将获取cookie信息。

```
 io.sockets.on('connection', function (socket) {

          var cookie=socket.handshake.headers['cookie'];

     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T08:25:47.027

查看连接事件后提供的 socket.request 对象。

引用文档 =“一个 getter 代理，它返回对源自底层 engine.io 客户端的请求的引用。对于访问请求标头（如 Cookie 或 User-Agent）很有用。”

我认为这个功能不在版本 0.* 中，它仅在 1 及更高版本中提供。

详细文档的此链接是一种隐藏= [https://github.com/socketio/socket.io/blob/master/docs/API.md#socketrequest](https://github.com/socketio/socket.io/blob/master/docs/API.md#socketrequest)

# javascript - validateLogin 是一个未定义的函数。（javascript 异常）

> ID：16211629
> 
> 赞同：0
> 
> 时间：2013-04-25T09:51:49.050
> 
> 标签：javascript, ajax

嗨，我收到错误，因为未定义函数我认为我的代码没问题，在这种情况下有人可以帮忙吗？请帮助并建议我一个很好的教程，通过 ajax 方法通过 web 服务获取数据。

```
<script type="text/javascript" language="javascript" src="Scripts/jquery-1.4.1.js">

  function validatelogin() {

        $('input[type=button]').attr('disabled', true);
        $("#login").html('');
        var loginId = $('#txt_id').attr('value'); // get username
        var password = $('#txt_pwd').attr('value'); // get password

        $.ajax({

            type: "POST",
            url: "WebService.asmx/validateLogin",
            data: "lognId=" + loginId + "&password=" + password,
            contentType: "application/json; charset=utf-8",

             success: function (result) {
                    returnVal = result.d;
                    alert(returnVal);
                },

                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    returnVal = '';
                    },
        });
     }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:55:31.193

您不能链接 JavaScript 源文件并在同一标记中定义代码。只需将它们分成两个单独的标签，如下所示：

```
<script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
<script type="text/javascript">
  function validatelogin() {

        $('input[type=button]').attr('disabled', true);
        $("#login").html('');
        var loginId = $('#txt_id').attr('value'); // get username
        var password = $('#txt_pwd').attr('value'); // get password

        $.ajax({

            type: "POST",
            url: "WebService.asmx/validateLogin",
            data: "lognId=" + loginId + "&password=" + password,
            contentType: "application/json; charset=utf-8",

             success: function (result) {
                    returnVal = result.d;
                    alert(returnVal);
                },

                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    returnVal = '';
                    },
        });
     }

</script> 
```

在这个问题上引用[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/script)：

> **源代码**
> 
> 该属性指定外部脚本的 URI；这可以用作直接在文档中嵌入脚本的替代方法。*指定了 src 属性的脚本元素不应在其标签中嵌入脚本。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:55:14.077

您的要求`content-type`是`JSON`，但您实际上是在传递一个`name-value-pairs`. 尝试这个：

```
data: JSON.stringify({loginId: loginId, password: password}), 
```

另外，不需要使用`attr('value')`来获取输入值，您可以使用`val()`。

# ios - 静态框架问题：+entityForName：在此模型中找不到名为“APIContent”的实体

> ID：16211635
> 
> 赞同：2
> 
> 时间：2013-04-25T09:52:13.663
> 
> 标签：ios, core-data, frameworks, magicalrecord

你能帮我理解如何解决这个问题吗？我正在尝试在我可以跨多个项目使用的静态框架中添加 Magical Record 以及我的 CoreData 数据库。

我得到的例外如下：

**+entityForName：在此模型中找不到名为“APIContent”的实体。**

请在下面的我的模型中运行代码：

```
(void) insertOrUpdate:(NSDictionary *) objectDictionary {
@try {
NSManagedObjectContext *localContext = [NSManagedObjectContext MR_contextForCurrentThread];

APIContent *product;

//  Check if Object Exists
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %@", [objectDictionary objectForKey:@"id"]];
product = [APIContent MR_findFirstWithPredicate:predicate inContext:localContext];

BOOL objectIdNotFound = product == nil ? TRUE: FALSE;

if (objectIdNotFound) {
    product = [APIContent MR_createInContext:localContext];
}

// Import Values from the NSDictionary object
[product MR_importValuesForKeysWithObject:objectDictionary];

[localContext saveToPersistentStoreWithCompletion:^(BOOL success, NSError *error) {
    if (success) {
        DDLogCInfo(@"Object saved successfully.");
    } else {
        DDLogError(@"Object NOT saved successfully");
    }
}];
}
@catch (NSException *exception) {
DDLogError(@"Class: %@ Function: %s at Line: %d \n Exception: %@", [self class], func, LINE, exception);
}

} 
```

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T11:53:36.830

可能这里是捆绑的问题？尝试`NSManagedObjectModel`使用此方法加载您的：

```
[MagicalRecord setDefaultModelFromClass:[self class]]; 
```

我在为 CoreData 实施单元测试时遇到了同样的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:04:00.200

我在我的一个项目中遇到了同样的问题，原因是我没有将实体添加到`.xcdatamodeld`文件中。

所以确保你有一个实体`APIContent`在你的`.xcdatamodeld`

还要确保在向您添加实体时`.xcdatamodeld`，您的实体名称和类是相同的（您可以在*Data Mode Inspector*选项卡中进行检查）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-12T00:25:16.347

除了确保您的核心数据实体被正确命名/存在之外，还要确保您的 .xcdatamodeld 文件被正确命名

当我的 .xcdatamodeld 标题为“Model.xcdatamodeld”而不是“NameOfProject.xcdatamodeld”时，我遇到了同样的问题。

我在我的 coredata 实现 (CoreData.m) 文件中将我的模型名称设置为我的项目名称，所以当我编译并运行项目时，它正在寻找一个“NameOfProject.xcdatamodeld”文件，但该文件名为“Model.xcdatamodeld” .

如果您犯了同样的错误，请在更正 .xcdatamodeld 后确保从您的测试设备上卸载该应用程序，因为之前的设置不会更新，并且您的更正只会在您在测试设备上重新安装该应用程序时实施.

（您只需在 xcode 中运行项目即可重新安装应用程序）

# php - Rails 和 PHP encode64 不一致

> ID：16211638
> 
> 赞同：0
> 
> 时间：2013-04-25T09:52:18.873
> 
> 标签：php, ruby-on-rails, sha1, hmac

我正在尝试在 Rails 中创建一个 HMAC 并在 PHP 中验证它。
导轨外壳：

```
 pry(main)>appsecret = '00916893840fe0a29dfdc261efd3a26a&'           
       pry(main)>OpenSSL::HMAC.hexdigest('sha1', appsecret, 'GET&http%3A%2F%2Fopen.tianya.cn%2Foauth%2Frequest_token.php&oauth_consumer_key%3Dfc69b18eb12bab1e9b35d1093c4de9290516cfdc4%26oauth_nonce%3Dc09e4bf167fbc7eb374b1abb02b5268d%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366882036%26oauth_version%3D1.0')
       => "8494f6237ee6042a3da8848db21284be17bf6ade" 
```

PHP：

```
 $appsecret = '00916893840fe0a29dfdc261efd3a26a&';
      $signature = base64_encode(hash_hmac('sha1', $appsecret, 'GET&http%3A%2F%2Fopen.tianya.cn%2Foauth%2Frequest_token.php&oauth_consumer_key%3Dfc69b18eb12bab1e9b35d1093c4de9290516cfdc4%26oauth_nonce%3Dc09e4bf167fbc7eb374b1abb02b5268d%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366882036%26oauth_version%3D1.0',true));
      var_dump($signature); 
```

导轨结果：8494f6237ee6042a3da8848db21284be17bf6ade

PHP 结果：ayw4/L22fCtXPvPPGaY/Ud8yhMU=
任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:18:23.657

你有2个问题：

1.  您的 ruby​​ 输出作为 ascii hex 返回，而不是原始的，并且您没有对其进行 base64 编码
2.  您的 PHP[`hash_hmac()`](http://php.net/manual/en/function.hash-hmac.php)函数的参数顺序错误。

红宝石：

```
appsecret = '00916893840fe0a29dfdc261efd3a26a&'
data = 'GET&http%3A%2F%2Fopen.tianya.cn%2Foauth%2Frequest_token.php&oauth_consumer_key%3Dfc69b18eb12bab1e9b35d1093c4de9290516cfdc4%26oauth_nonce%3Dc09e4bf167fbc7eb374b1abb02b5268d%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366882036%26oauth_version%3D1.0'

digest = OpenSSL::HMAC.digest('sha1', appsecret, data)
Base64.encode64(digest) 
```

PHP：

```
$appsecret = '00916893840fe0a29dfdc261efd3a26a&';
$data = 'GET&http%3A%2F%2Fopen.tianya.cn%2Foauth%2Frequest_token.php&oauth_consumer_key%3Dfc69b18eb12bab1e9b35d1093c4de9290516cfdc4%26oauth_nonce%3Dc09e4bf167fbc7eb374b1abb02b5268d%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366882036%26oauth_version%3D1.0';

$digest = hash_hmac('sha1', $data, $appsecret, true);
echo base64_encode($digest); 
```

两者都产生`hJT2I37mBCo9qISNshKEvhe/at4=`。但是请注意，ruby 输出也有一个尾随换行符，因此如果您想直接比较它们，则需要对其进行规范化（在 ruby​​ 中将其删除或在 PHP 中添加一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:35:32.883

在尝试了不同的试验和错误之后，我发现这两个功能是如何相似的......这将为您提供与 ruby​​ 相同的所需结果：

```
$appsecret = '00916893840fe0a29dfdc261efd3a26a&';
$signature = hash_hmac('sha1', 'GET&http%3A%2F%2Fopen.tianya.cn%2Foauth%2Frequest_token.php&oauth_consumer_key%3Dfc69b18eb12bab1e9b35d1093c4de9290516cfdc4%26oauth_nonce%3Dc09e4bf167fbc7eb374b1abb02b5268d%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1366882036%26oauth_version%3D1.0',$appsecret);
var_dump($signature); 
```

结果：

```
string(40) "8494f6237ee6042a3da8848db21284be17bf6ade" 
```

在 PHP 中 hash_hmac 的参数顺序在 php 中倒置，首先是数据，然后是键。ruby 输出不是 base64 编码的，因此您不必在 PHP 中进行 base64 编码。

# javascript - 逐字突出显示文本（jquery）（关闭）

> ID：16211641
> 
> 赞同：0
> 
> 时间：2013-04-25T09:52:20.733
> 
> 标签：javascript, jquery, arrays

我想创建一个突出显示的效果来阅读文本。例如，我想突出显示此文本：

```
<div>
    <p>Lorem Ipsum  <i>is simply dummy</i> text of the printing and typesetting industry</p>
    <p>Lorem Ipsum is simply dummy text of <u><b>the printing and</b></u> typesetting industry</p>
    <p>Lorem Ipsum is <b>simply dummy</b> text of the printing and typesetting industry</p>
</div> 
```

目前我找到了这个功能，但它不保留标签：

```
var text = $('div').text();
var regex = text.split(' ');
$('div').html('');
for (i = 0, len = regex.length; i < len; i++) {
    $('div').append('<span>' + regex[i] + ' </span>');
}
$('#click').click(function() {
j = 0;
var t = setInterval(
    function() {
        $('span').eq(j).addClass('highlight');
        j++;
    }, 500
 );
}); 
```

我认为可以使用正则表达式，例如：`/(<[^>]+>)?([^<]*)/g`

捕获标签并将它们放在一个表中以读取此表，但我不知道如何做到这一点。目前我的结果可以在这里看到：[jsfiddle](http://jsfiddle.net/rzWMe/11/)

我的 while 循环不会停止。所以停止脚本。谢谢！

* * *

我找到了我想要的：[jsfiddle](http://jsfiddle.net/rzWMe/39/)

```
var pattern = /(<[^>]+>)?([^<]*)?/g
var text = $('div').html();
array = new Array();
while ((result = pattern.exec(text)) && (result[0].length) > 0) {
    array.push(result[1]);
    if (typeof result[2] !== 'undefined' && result[2].trim().length > 0) {
        var textSplit = result[2].split(' ');
        for (i = 0, len = textSplit.length; i < len; i++) {
            if (textSplit[i].length > 0) {
                array.push('<span>' + textSplit[i] + '</span>')
            }
        }
    }
    var i = 0;
};
var x = document.getElementById("demo");
x.innerHTML = array.join(" ");
$('#click').click(function () {
    j = 0;
    var t = setInterval(
    function () {
        $('span').removeClass('highlight');
        $('span').eq(j).addClass('highlight');
        j++;
        if (j >= $('span').length) {
            clearInterval(t);
        } 
    }, 500);
}); 
```

谢谢你的帮助尼尔森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:57:26.197

当达到 span 的总数时取消间隔，如下所示：

```
var t = setInterval(
    function() {
        $('span').eq(j).addClass('highlight');
        j++;
        if (j >= $('span').length ) {
           clearInterval(t);
        }
    }, 500
 ); 
```

见[工作小提琴](http://jsfiddle.net/gnel/ZPRNV/)

# java - 为什么 IO 的 20 倍线程甜蜜点？[以前：在 playframework 中使用哪个 ExecutionContext？]

> ID：16211649
> 
> 赞同：5
> 
> 时间：2013-04-25T09:52:38.403
> 
> 标签：java, scala, playframework, jvm, playframework-2.1

我确实知道如何创建自己的 ExecutionContext 或导入全局播放框架。但我必须承认，我远不是关于多重上下文/执行服务如何在后面工作的专家。

所以我的问题是，为了更好的服务性能/行为，我应该使用哪个 ExecutionContext？

我测试了两个选项：

```
import play.api.libs.concurrent.Execution.defaultContext 
```

和

```
implicit val executionContext = ExecutionContext.fromExecutorService(Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors())) 
```

两者都产生了可比的性能。

我使用的动作在 playframework 2.1.x 中是这样实现的。SedisPool 是我自己的对象，带有一个普通的 sedis/jedis 客户端池的额外 Future 包装。

```
def testaction(application: String, platform: String) = Action {
    Async(
      SedisPool.withAsyncClient[Result] { client =>
        client.get(StringBuilder.newBuilder.append(application).append('-').append(platform).toString) match {
          case Some(x) => Ok(x)
          case None => Results.NoContent
        }
      })
  } 
```

这种性能方面的表现与 Node.js 和 Go 中完全相同的函数一样好或稍慢。但仍然比 Pypy 慢。但是比 Java 中的同样事情要快得多（在这种情况下，使用 jedis 对 redis 进行阻塞调用）。我们使用 gatling 进行负载测试。我们在 redis 之上进行简单服务的技术“竞争”，标准是“与编码人员一样多的努力”。我已经使用 fyrie 测试了它（除了我不喜欢 API 的事实）它的行为几乎与这个 Sedis 实现相同。

但这不是我的问题。我只是想了解更多关于 playframework/scala 的这一部分。

有建议的行为吗？或者有人可以为我指出一个更好的方向吗？我现在开始使用 scala，我远不是专家，但我可以自己完成代码答案。

谢谢你的帮助。

## 更新 - 更多问题！

篡改池中的线程数后发现：Runtime.getRuntime().availableProcessors() * 20

为我的服务提供了大约 15% 到 20% 的性能提升（以每秒请求数和平均响应时间来衡量），这实际上使它比 node.js 和 go 稍微好一点（尽管几乎没有）。所以我现在有更多问题： - 我测试了 15 倍和 25 倍，而 20 似乎是一个最佳点。为什么？有任何想法吗？- 会有其他更好的设置吗？其他“甜蜜点”？- 20x 是最佳点还是取决于我正在运行的机器/jvm 的其他参数？

## 更新 - 有关该主题的更多文档

找到有关播放框架文档的更多信息。 [http://www.playframework.com/documentation/2.1.0/ThreadPools](http://www.playframework.com/documentation/2.1.0/ThreadPools)

对于 IO，他们确实对我所做的事情提出了一些建议，但提供了一种通过 Akka.dispatchers 进行操作的方法，该方法可通过 *.conf 文件进行配置（这应该让我的操作很高兴）。

所以现在我正在使用

```
implicit val redis_lookup_context: ExecutionContext = Akka.system.dispatchers.lookup("simple-redis-lookup") 
```

调度程序由

```
akka{
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
    loglevel = WARNING
    actor {
        simple-redis-lookup = {
            fork-join-executor {
                parallelism-factor = 20.0   
                #parallelism-min = 40
                #parallelism-max = 400
            }
        }
    }
} 
```

它给了我大约 5% 的提升（现在正在关注它），并且一旦 JVM “热”，性能就会更加稳定。我的管理员很乐意在不重建服务的情况下使用这些设置。

我的问题仍然存在。**为什么会有这个数字？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-14T10:57:57.333

我对优化的看法是：

1.  看看单线程性能，然后
2.  看看事情是如何并行的，然后
3.  冲洗并重复，直到获得所需的性能或放弃。

**单线程优化**

单个线程的性能通常取决于代码的单个组件或部分，它可能是：

*   一个**受 CPU 限制的**部分，实际上可能在从**RAM**读取时受到限制（这不是分页）。JVM 和更高级别的工具通常无法区分 CPU 和 RAM。性能分析器（例如 JProfiler）对于定位代码热点 *非常有用）*
    *   您可以通过优化代码以降低 CPU 使用率或 RAM 读/写率来提高性能
*   **分页**问题，​​应用程序内存不足，正在向磁盘或从磁盘进行 分页
    *   您可以通过添加 RAM、减少内存使用、为进程分配更多物理 RAM 或减少操作系统上的内存负载来提高性能
*   **延迟**问题，线程正在等待从套接字、磁盘或类似设备中读取数据，或者在将数据提交到磁盘时等待。
    *   您可以通过使用更快的磁盘（例如 spin rust -> SSD）、使用更快的网络（1GE -> 10GE）或通过提高您正在使用的网络应用程序的响应能力（调整数据库）来提高单线程性能

但是，如果您可以运行多个线程，那么单线程中的**延迟就不会那么令人担忧了。**当一个线程被阻塞时，另一个线程可以使用 CPU（用于交换上下文和替换 CPU 缓存中大部分项目的开销）。那么你应该运行多少个线程呢？

**多线程**

假设线程大约 50% 的时间花在 CPU 上，50% 的时间在等待 IO。在这种情况下，每个 CPU 可以被 2 个线程充分利用，您会看到 2 倍的吞吐量提升。如果线程花费大约 1% 的时间使用 CPU，那么您应该（在所有条件相同的情况下）能够同时运行 100 个线程。

但是，这可能会发生很多奇怪的效果：

1.  **上下文切换**有（一些）成本，因此理想情况下您需要将它们最小化。如果您的延迟时间很少且较大，而不是频繁且较小，您将获得更好的整体系统性能。这种效果意味着将线程增加`n`x 倍，您将永远无法获得`n`x 倍的吞吐量提升。而过了一个临界点，随着你的增加`n`，你的表现也会随之*下降*。
2.  **同步、信号量和互斥量**。代码的小部分通常会获取信号量或互斥锁，以确保任何时候只有一个（或有限数量）线程可以进入。虽然只有几个线程，但这很少影响性能。但是，如果此代码块花费任何可观的时间，并且有很多线程，这将成为系统性能的门控因素。例如，假设一个受保护的单线程块需要 10 毫秒才能执行，例如通过查询数据库。因为一次只能进入一个线程，所以实际执行的最大线程数为 1000 毫秒/10 毫秒，即 100 个。所有其他线程最终将在此块的队列中彼此落后。
3.  **资源**：当您增加并行度时，您正在加载各种以前轻负载的组件。随着这些变得越来越重，其他线程最终会阻塞等待来自它们的数据。最终，额外的并行性最终会在计算机上的所有线程中产生延迟。这些组件包括：
    1.  内存
    2.  磁盘通道
    3.  网络
    4.  网络服务（例如您的数据库）。我无法告诉您我已经优化了多少次 Java，以至于数据库限制了吞吐量。

如果发生这种情况，那么您需要重新考虑您的算法，更改服务器、网络或网络服务，或者降低并行度。

**影响您可以运行多少线程的因素**

从上面，您可以看到涉及大量因素。因此，线程/内核的最佳点是多种原因的意外，包括：

*   您使用的 CPU 的性能，尤其是：
    *   核心数
    *   SMT 与否 SMT
    *   缓存量
    *   速度
*   你有多少 RAM 和内存总线的速度
*   操作系统和环境：
    *   处理器上正在执行多少其他工作
    *   Windows/Linux/BSD/等都有不同的多任务特性
    *   JVM 版本（每个版本都有不同的特性，有些不同）
    *   网络上的流量和拥塞以及对相关交换机和路由器的影响
*   你的代码
    *   你的算法
    *   您使用的库

根据经验，没有什么神奇的公式可以*先验地计算出*最佳线程数。就像您所做的那样，最好通过经验来解决这个问题（正如我上面所展示的）。如果您需要概括，您将需要在您选择的操作系统上对不同 CPU 架构、内存和网络的性能进行采样。

几个容易观察到的指标在这里很有用：

*   每个核心的 CPU 利用率 - 帮助检测进程是否受 CPU 限制
*   平均负载 - 这报告进程（或线程，如果使用 LWP）等待 CPU 的情况。如果这个数字比 CPU 内核的数量大，那么你的 CPU 内核肯定是 CPU 受限的。

如果您需要优化，请获得最好的分析工具。您将需要一个特定的工具来监控操作系统（例如 DTrace 用于 Solaris），以及一个用于 JVM（我个人喜欢 JProfiler）。这些工具将允许您精确放大我上面描述的区域。

**结论**

碰巧您的特定代码在特定的 Scala 库版本、JVM 版本、操作系统、服务器和 Redis 服务器上运行，因此每个线程大约 95% 的时间都在等待 I/O。（如果运行单线程，您会发现 CPU 负载约为 5%）。

这允许大约 20 个线程在此配置中以最佳方式共享每个 CPU。

这是最佳位置，因为：

*   如果您运行的线程较少，您将浪费 CPU 周期等待数据
*   如果您运行更多线程：
    *   您的架构的一个组件饱和（例如磁盘或您的 CPU<->RAM 总线）阻塞了额外的吞吐量（在这种情况下，您会看到 CPU 利用率低于或远低于 ~90%），或者
    *   线程上下文切换成本开始超过添加线程的增量增益（您会看到 CPU 利用率达到 > ~95%）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:09:09.123

您是否尝试过更改线程池：

*   使用 CachedThreadPool 而不是 FixedThreadPool，这样您就可以了解 ThreadPool 可能会增长多少，然后再对其进行加盖
*   每个内核使用超过 1 个线程，也许是 2 个？

# css - MVC 4 数据验证消息增加了我的表单的宽度

> ID：16211650
> 
> 赞同：2
> 
> 时间：2013-04-25T09:52:38.227
> 
> 标签：css, validation, asp.net-mvc-4

我正在为我的模型创建非常简单的表格。我已经通过验证为它生成了脚手架的“编辑”视图。一种验证是针对“URL”类型的，它给我带来了问题。

我有这样的看法：

```
<div class="editor-label">
        @Html.LabelFor(model => model.Server)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Server)
        @Html.ValidationMessageFor(model => model.Server)
</div> 
```

这是 #content 部分的 css，其中包含 View 呈现的所有内容：

```
#content
{
    border:solid;
    border-width:thin;
    position:relative;
    margin-left: auto ;
    margin-right: auto ;
    text-align:center;
    margin-top: 50px;
    min-width:480px;
    max-width:800px;
    display:table;
    padding: 30px;
} 
```

加载页面时，#content 为 480px 宽，内部元素占用尽可能多的空间（编辑器字段元素和带有提交按钮的元素设置为 100%，css 中没有其他设置宽度）。

当字段上显示“必需”验证消息时，一切正常（宽度不变）。

当我输入无效的 URL 时，消息会更长（默认消息的本地化版本显示“Pole Server neobsahuje plně kvalifikovanou adresu URL protokolu http，https nebo ftp。”）并且整个 #content 宽度更改为 657px；

有没有一种方法可以使宽度保持在显示验证消息之前的状态，并在验证消息太长时将其包装成多行的 CSS 设置？

我想避免固定宽度设置（在主要部分和所有元素上，包括验证消息 div），并且仍然保持布局模板及其 css 通用，这样我就可以继续重复使用它，而无需针对使用它的特定场景进行定制。

提前致谢

我已经包含了显示它的外观的屏幕截图

![看截图它的样子](https://i.stack.imgur.com/EglaL.png)

# java - 如何取消对oracle存储过程的调用？

> ID：16211653
> 
> 赞同：0
> 
> 时间：2013-04-25T09:52:43.143
> 
> 标签：java, oracle

我有一个 java 应用程序，它通过单击搜索按钮在 oracle 中搜索一些记录。它调用存储过程来搜索 oracle 表中的数据。有时搜索输出很大，处理时间也很长，我想实现一个取消按钮，这样可以随时取消操作。我想在java中实现单独的线程，但它不会解决问题，因为存储过程已经被调用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:06:22.017

您应该创建另一个包含**kill**命令的存储过程来取消正在运行的存储过程并从您的取消按钮调用这个新的 SP。

要杀死正在运行的 SP，请参阅：

[如何终止正在运行的 Oracle 程序](https://stackoverflow.com/questions/12422113/how-to-terminate-oracle-procedures-which-is-running)

# titanium - Titanium iOS：基于 sqlite db 数据显示 gragh

> ID：16211656
> 
> 赞同：1
> 
> 时间：2013-04-25T09:52:43.907
> 
> 标签：titanium, titanium-mobile, titanium-modules

在 Titanium 中，我需要一些指导来根据 sqlite db 值绘制图形。我尝试***使用 Rgraph***绘制图形，但是在导入时，在 Rgraph 框架的 .css 和 .html 文件中出现错误。

我需要做什么才能根据数据库中的数据显示图表？

任何人都可以帮助我吗？提前致谢！

# c# - 通过单击用户控件上的按钮来删除用户控件

> ID：16211657
> 
> 赞同：1
> 
> 时间：2013-04-25T09:52:45.233
> 
> 标签：c#, xaml, user-controls, winrt-xaml

我有一个 GridView 显示其中的某些项目。每个项目都有一个编辑按钮，按下编辑按钮会在项目旁边加载一个用户控件。这个用户控件有一个关闭按钮，按下关闭按钮会删除用户控件。![带有项目的 GridView（蓝色矩形）](https://i.stack.imgur.com/A5HHq.png)

![单击项目（蓝色矩形）上的编辑按钮并在其旁边加载用户控件（红色矩形）后的 GridView](https://i.stack.imgur.com/Us3Yk.png)

蓝色矩形表示网格视图中的项目。单击粉红色的添加按钮时，红色的用户控件会加载。现在点击红色矩形上的关闭按钮，它应该删除红色项目并恢复到原始状态。我已经使用模板选择器添加了用户控件，它工作正常。但是关闭按钮不会将其删除。我尝试了以下方法来删除：

`(GridView)this.Parent).Items.Remove(this);`

在添加断点然后检查时，我发现 this.Parent 为空。我被卡住了。我该如何进行？我正在使用 c#、xaml、winrt、visual studio 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T02:04:44.237

如果您需要处理可视化树，请尝试以下操作：

```
var _Parent = VisualTreeHelper.GetParent(sender as UserControl) as GridView;
_Parent.Items.Remove(sender as UserControl); 
```

但是从 GridView 中删除项目应该通过操作绑定到 ViewModel 中 GridView 的 ItemsSource 的 ObservableCollection 来完成。不是这样的，大概...

# c - 从 bsearch 和 lfind 确定索引？

> ID：16211667
> 
> 赞同：1
> 
> 时间：2013-04-25T09:53:21.320
> 
> 标签：c, casting, void-pointers, bsearch

我试图在 lfind 和 bsearch 返回指向它找到的元素的指针之后获取数组中元素的索引。到目前为止我有这个：

```
(char *) (found - cv->baseAddress); 
```

where found 是函数找到的地址，基地址是元素 0 的地址。但是，编译器给了我这个错误：

cvector.c:150:28: 警告: 'void *' 类型的指针用于减法 cvector.c:150:4: 警告: return 从指针中生成整数而不进行强制转换

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:57:05.113

您必须将返回的指针类型转换为正确的类型。然后你还需要将你得到的偏移量除以数组中对象的大小来得到索引。

# php - 基于作曲家的项目中是否存在资源不可用的风险？

> ID：16211671
> 
> 赞同：2
> 
> 时间：2013-04-25T09:53:33.990
> 
> 标签：php, deployment, dependencies, dependency-management, composer-php

当将 PHP 项目与 composer 放在一起时，在安装/部署时，composer 通常会从其原始源中获取依赖项。

当源（可能只是暂时的）不可用时，这可能会导致部署时出现问题。

是否有任何包含的机制来至少保留当前稳定版本的依赖项，以便始终能够将当前版本部署到其他实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:16:48.437

目前还没有一键式解决方案，但我计划尽快开展一些工作，以提高您的可靠性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:36:53.547

Broker 看起来像一个可以充当代理来保存文件的工具，现在已集成到 Satis 中（请参阅[https://github.com/researchgate/broker](https://github.com/researchgate/broker)）

> broker 是 composer 的完整存储库代理。它需要一个 composer 文件，下载所有需求和所有依赖项，然后发布一个包含所有这些包的新存储库。所有包（包括 dist 和源文件）都将 > 由代理直接提供，而不是 packagist 或 satis。
> 
> 注意：此项目不再积极维护。由于 satis 现在支持类似的功能，因此您应该改用 satis。

# jquery - Wordpress 验证错误显示

> ID：16211675
> 
> 赞同：0
> 
> 时间：2013-04-25T09:53:47.387
> 
> 标签：jquery, validation, wordpress

在 wordpress 表单中，没有内联验证来通知用户。验证是基于服务器的，表单刷新，然后错误消息将显示在表单顶部。

是否有任何插件可以将其更改为基于 jquery 的验证。我正在寻找它，但找不到这样的插件。请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:08:53.267

您可以使用非常流行的[Contact Form 7 插件](http://wordpress.org/extend/plugins/contact-form-7/)，然后安装[Jquery Validation For Contact Form 7](http://wordpress.org/extend/plugins/jquery-validation-for-contact-form-7/)插件，该插件在 Contact Form 7 表单中添加 jquery 验证。

**更新：**

为了验证自定义表单，我找到[了这个](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)Javascript 表单验证脚本。

# css - CSS3 rotate3d 有两个角度

> ID：16211676
> 
> 赞同：2
> 
> 时间：2013-04-25T09:53:48.363
> 
> 标签：css

我正在根据鼠标位置旋转一个立方体。

鼠标在屏幕上随时都有一个X坐标和一个Y坐标。

我正在使用 jquery .mousemove() 来确定像素坐标，然后在 mousemove 函数中，我正在调整 css rotate3d 角度来移动对象。

这一切都很好，但我想根据 x 和 y 位置移动对象。理想是这样。。

```
'-webkit-transform': 'rotate3d(1,0,0,'+angleX+'deg)',
'-webkit-transform': 'rotate3d(0,1,0,'+angleY+'deg)', 
```

但这当然行不通。

如何让两个轴同时旋转不同的量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T21:33:53.143

您可以组合变换。总和将表示为 matrix3d 函数。不太确定您想要实现什么，在您的情况下，第二个转换会覆盖第一个转换。你可以试试：

```
'-webkit-transform': 'rotate3d(1,0,0,'+angleX+'deg)' + 'rotate3d(0,1,0,'+angleY+'deg)' 
```

如果您调整 [1,0,0] 向量/轴，这也可能仅表示为一个变换

# tomcat - 如何在 sun 一台网络服务器上使用 http -only 标志设置 jsession id

> ID：16211677
> 
> 赞同：0
> 
> 时间：2013-04-25T09:53:50.150
> 
> 标签：tomcat, jsessionid

可能这是一个重复的问题，但据我搜索，上述问题与 Tomcat 有关。我尝试使用的那些在 web.xml 中设置 http-only 标志的方法中很少有适用于 sun one webserver 的。因此，请建议我如何将 http-only 添加到 JSESSIONID 以用于在 sun 一台网络服务器上运行的 Web 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:27:35.270

该配置与 web-app 的版本有关，与 Tomcat 或 webserver 6.0 无关。以下配置仅适用于 version="3.0"：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee web-app_3_0.xsd"
      version="3.0">

      <!-- The configuration below is possible only in the version="3.0" -->
      <session-config>
        <cookie-config>
           <http-only>true</http-only>
        </cookie-config>
      </session-config>

</web-app> 
```

# android - 在 Android 中启动 Activity 清除顶部

> ID：16211678
> 
> 赞同：1
> 
> 时间：2013-04-25T09:53:54.013
> 
> 标签：android, android-intent, android-activity

我的堆栈中有以下活动：

```
A , B , C, D 
```

我想重新启动 B 以获得这个堆栈：

```
A , B' 
```

其中 B' 是一个新的 B 实例（不是旧的接收 onNewIntent 回调，我该怎么做？

顺便说一句，我正在使用

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

启动 B 活动时，但通过这种方式调用 onNewIntent 而不是启动新实例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:01:58.330

在清单文件中使用 android:noHistory=true 清除特定活动。希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:05:19.823

在这里，当您使用此代码时，它会带您进行活动 B。在 B 中，您按下后退按钮，它将带您进行 A。

```
Intent fromDtoB = new Intent(this,B.class);
fromDtoB.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(fromDtoB); 
```

FLAG_ACTIVITY_CLEAR_TASK：如果在传递给 Context.startActivity() 的 Intent 中设置，此标志将导致在活动启动之前清除与活动相关联的任何现有任务。

FLAG_ACTIVITY_CLEAR_TOP：如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在在顶部）作为新意图的旧活动。

# xml - XSL - 如果节点有孩子，如何做一件事，否则做另一件事

> ID：16211680
> 
> 赞同：0
> 
> 时间：2013-04-25T09:54:00.987
> 
> 标签：xml, xslt

我对 xslt 很陌生，并且尝试了各种方法来检查节点是否有子节点。我有以下内容：

```
<xsl:if test="child::list"> 
```

上面的部分有效，但问题是我尝试`when`在这种方法中使用`otherwise`，但它不起作用。看起来像这样：

```
<xsl:when test="child::list"> 
```

我猜这是错误的，因为它不起作用。

*代码如下：*

```
<xsl:for-each select="td">
<td>
    <xsl:when test="child::list">
        <table cellpadding='0' cellspacing='0'>
            <thead>
                <tr>
                    <xsl:for-each select="list/item/table/thead/tr/th">
                        <th><xsl:value-of select="self::node()[text()]"/></th>
                    </xsl:for-each>
                </tr>
                <xsl:for-each select="list/item/table/tbody/tr">
                    <tr>
                        <xsl:for-each select="td">
                            <td><xsl:value-of select="self::node()[text()]"/></td>
                        </xsl:for-each>
                    </tr>
                </xsl:for-each>
            </thead>
        </table>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="self::node()[text()]"/>
    </xsl:otherwise>
</td>
</xsl:for-each> 
```

**任何帮助将不胜感激...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:07:35.263

`xsl:when`并且`xsl:otherwise`必须在`xsl:choose`：

```
<xsl:choose>
  <xsl:when test="...">
    <!-- Do one thing -->
  </xsl:when>
  <xsl:otherwise>
    <!-- Do something else -->
  </xsl:otherwise>
 </xsl:choose> 
```

但是您应该在这里做的是正确使用模板：

```
 <xsl:template match="something">
    ....
    <xsl:apply-templates select="td" mode="list" />
    ....
  </xsl:template>

  <xsl:template match="td" mode="list">
    <xsl:value-of select="."/>
  </xsl:template>

  <xsl:template match="td[list]" mode="list">
    <table cellpadding='0' cellspacing='0'>
      <thead>
        <xsl:apply-templates select='list/item/table/thead/tr' />
        <xsl:apply-templates select="list/item/table/tbody/tr" />
      </thead>
    </table>
  </xsl:template>

  <xsl:template match="th | td">
    <xsl:copy>
      <xsl:value-of select="." />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="tr">
    <xsl:copy>
      <xsl:apply-templates select="th | td" />
    </xsl:copy>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:07:19.107

您创建的 XSLT 不好。xsl:when 是 XSLT 中缺少的 xsl:choose 的子元素。请先更正它，然后让我们知道您的结果。

# objective-c - 以十进制形式验证价格的正则表达式

> ID：16211681
> 
> 赞同：1
> 
> 时间：2013-04-25T09:54:06.260
> 
> 标签：objective-c, regex

我真的找不到任何正则表达式以十进制输入价格的解决方法。这就是我想要的：-

12345

12345.1

12345.12

12345.123

.123

0.123

我也想限制数字。

我真的创建了一个，但没有像假设的那样验证

**^([0-9]{1,5}|([0-9]{1,5}\.([0-9]{1,3})))$**

也想知道上面的表达与那个有什么不同

**^([0-9]{1,5}|([0-9].([0-9]{1,3})))$**工作正常。

谁有好的解释。

**“我正在使用 NSRegularExpression - 目标 C”如果这有助于更准确地回答**

```
- (IBAction)btnTapped {

      NSRegularExpression * regex = [NSRegularExpression regularExpressionWithPattern:
         @"^\\d{1,5}([.]\\d{1,3})?|[.]\\d{1,3}$" options:NSRegularExpressionCaseInsensitive error:&error];

     if ([regex numberOfMatchesInString:txtInput.text options:0 range:NSMakeRange(0, [txtInput.text length])]) 
         NSLog(@"Matched : %@",txtInput.text);
     else
        NSLog(@"Not Matched : %@",txtInput.text);
} 
```

**“我正在使用 buttonTap 方法进行操作”。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T10:04:09.260

这个简单的应该适合您的需求：

```
\d*[.]?\d+ 
```

*“数字 ( `\d+`) 前面可以有一个点 ( `[.]?`)，它本身可以前面有数字 ( `\d*`)。”*

由于您在谈论价格，因此既不需要科学记数法也不需要负数。

* * *

作为一个兴趣点，这是我经常使用的一个，包括科学记数法和负数：

```
[-+]?\d*[.]?\d+(?:[eE][-+]?\d+)? 
```

* * *

对于新要求（参见注释），您无法在我给出的第一个正则表达式上指定您想要多少位数，因为它不是*构建*的方式。

这应该更适合您的需求：

```
\d{1,5}([.]\d{1,3})?|[.]\d{1,3} 
```

*“最多 5 位数字 ( `\d{1,5}`) 可能后跟 ( `(...)?`) 一个点本身，后跟最多 3 位数字 ( `[.]\d{1,3}`)，或 ( `|`) 只是一个点，后跟最多 3 位数字 ( `[.]\d{1,3}`)”*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:02:50.383

让我们*按部分*执行此操作：

*   签到开头：`[+-]?`
*   分数号：`\.\d+`
*   可能的组合（符号后）：
    *   数字：`\d+`
    *   没有零的分数`\.\d+`
    *   和带分数的数字：`\d+\.\d+`

因此，将它们结合在一起`<sign>(number|fraction without zero|number with fraction)`：

```
^[+-]?(\d+|\.\d+|\d+\.\d+)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:55:43.997

这个怎么样：`^([+-])?(\d+)?([.,])?(\d+)?$`

```
 string input = "bla";
            if (!string.IsNullOrWhiteSpace(input))
            {
                string pattern = @"^(\s+)?([-])?(\s+)?(\d+)?([,.])?(\d+)(\s+)?$";

                input = input.Replace("\'", ""); // Remove thousand's separator
                System.Text.RegularExpressions.Regex.IsMatch(input, pattern);
                // if server culture = de then reverse the below replace
                input = input.Replace(',', '.');
            } 
```

**编辑：**
哦哦 - 刚刚意识到如果 en-us 用户使用“，”作为千位分隔符，我们会遇到一些问题......

所以这里有一个更好的：

```
 string input = "+123,456";
        if (!string.IsNullOrWhiteSpace(input))
        {
            string pattern = @"^(\s+)?([+-])?(\s+)?(\d+)?([.,])?(\d+)(\s+)?$";

            input = input.Replace(',', '.'); // Ensure no en-us thousand's separator
            input = input.Replace("\'", ""); // Remove thousand's separator
            input = System.Text.RegularExpressions.Regex.Replace(input, @"\s", ""); // Remove whitespaces

            bool foo = System.Text.RegularExpressions.Regex.IsMatch(input, pattern);
            if (foo)
            {
                bool de = false;
                if (de) // if server-culture = de
                    input = input.Replace('.', ',');

                double d = 0;
                bool bar = double.TryParse(input, out d);
                System.Diagnostics.Debug.Assert(foo == bar);

                Console.WriteLine(foo);
                Console.WriteLine(input);
            }
            else
                throw new ArgumentException("input");
        }
        else
            throw new NullReferenceException("input"); 
```

**编辑 2：**
无需经历获取服务器文化的麻烦，只需将 tryparse 重载与文化一起使用，不要重新替换小数分隔符。

```
double.TryParse(input 
               , System.Globalization.NumberStyles.Any
               , new System.Globalization.CultureInfo("en-US")
               , out d
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:07:10.660

如果您没有将长度限制为小数点前 5 位和小数点后 3 位，则可以使用以下命令：

```
^[+-]?(?:[0-9]*\.[0-9]|[0-9]+)$ 
```

如果您将其限制为 5 之前和 3 之后 max 那么您需要这样的东西：

```
^[+-]?(?:[0-9]{0,5}\.[0-9]{1,3}|[0-9]{1,5})$ 
```

就您的正则表达式之间的差异而言，第一个将小数点标记之前的位数长度限制为 1-5，有和没有小数。第二个只允许小数点指针前面有一个数字，如果没有小数点，则允许 1-5 位数字。

# java - Android 创建网格

> ID：16211682
> 
> 赞同：2
> 
> 时间：2013-04-25T09:54:11.083
> 
> 标签：java, android

是否有用于创建类似于[此应用程序中的网格视图的 Android 库](https://play.google.com/store/apps/details?id=com.alarex.gred)

我做了一些谷歌搜索，但似乎无法找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:57:23.130

您正在寻找的不是网格，而是图形视图。图表视图让您创建节点，通过线/箭头链接。

不久前，我使用了一个名为 JGraph 的 java Graph 库，但它可能与 android 视图不兼容。

此类问题的大多数答案是使用自定义视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:58:26.803

不太确定您到底在寻找什么，但您检查过[Google Charts Visualization](https://developers.google.com/chart/interactive/docs/examples)吗？

# unit-testing - 单元测试模式

> ID：16211692
> 
> 赞同：5
> 
> 时间：2013-04-25T09:54:33.760
> 
> 标签：unit-testing, design-patterns

我正在为以下单元测试用例寻找解决方案/模式。

**案子：**

假设我们有三个类，A、B、C，每个类都有一个方法。A的方法调用B的方法，B的方法调用C的方法。所以，A->B->C。每种方法都有一个输入（方法 A 的输入 A，输入 B，输入 C）。调用方法 A 的结果输出将是一个树结构，例如：

根（从方法 A 创建） -- 节点 B（从方法 B 创建） -- 节点 C1 -- 节点 C2（都从方法 C 创建）

对我来说，单元测试是关于孤立地测试方法输入的输出。因此，我们将为上述每种方法编写单元测试。因为测试是独立编写的，所以我们在为方法 A 编写单元测试时模拟方法 B，在为方法 B 编写单元测试用例时模拟方法 C。

到目前为止，一切都很好，我们可以在每个方法的输出上写入期望值，以确保结果树结构得到尊重。

**问题：**

现在让我们添加另一个调用方法 B 的类，这样我们也有以下调用链：D->B->C。生成的根树如下所示：

*   根 D
    *   节点 B
        *   节点 C1
        *   节点 C2

在开发过程中，有人意识到方法 A 的需求被误解了，树的结果应该是这样的：

*   根 A
    *   节点 B
        *   节点 C

令人高兴的是，开发人员会更改方法 C，以便输出仅返回一个节点而不是两个。他将更改单元测试，以使其反映这些更改。但是，方法 D 的要求不应该改变，并且该方法的输出应该仍然有节点 C1 和节点 C2。

**问题：**

您将如何编写您的单元测试，以便第二个开发人员会被提醒他将为方法 D 引入的重大更改？我宁愿避免看起来最适合这里的集成测试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:42:06.180

您应该混合使用“纯¹”单元测试、不纯单元测试、集成（外部资源命中）测试和全栈测试（UI 关闭）。“纯”单元测试并不是测试的结束。

因此，您最终将针对您开发的每个功能进行以下一些类型的测试：

*   单元测试 - 单独命中 A - 如果较低级别很复杂或命中外部资源。
*   还有单元测试（但有时也称为集成或组件测试） - 在外部资源（例如数据库）之前将 A 降低到（大约）级别 - 如果较低级别很复杂，但经过测试或者较低级别并不复杂.
*   集成测试 - 命中 A 和数据库。
*   全栈测试——点击碰巧在某个时候调用 A 的 UI——我的目标是在这个级别（如 Cukes 等）或以下级别至少有几个。

只要您有一些更高级别的测试，即使达到 A 隔离的测试没有，它们也应该失败。

¹ 只是使用“纯单元测试”这个短语，因为有些人认为单元测试的定义是孤立的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:04:21.140

理想情况下，您的单元测试应该一直渗透到 C 类。**单元测试**并不一定意味着*ONE METHOD* on *ONE CLASS*。这只是意味着您可以在不需要其他依赖项（如库或数据库等）的情况下运行它。然后您需要进行集成测试。

你的单元测试应该一直渗透到 C，当 A 的需求发生变化时，单元测试就会中断，D 的开发人员会知道有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:53:49.217

如果您想坚持使用孤立的单元测试（我对大多数中心对象都这样做，因为我发现几乎不可能编写具有正确深度并保持快速的正确数量的集成测试），一个有趣的方法是 Joe Rainsberger 的[合同和协作测试](http://b-speaking.blogspot.be/search/label/integration%20tests)。他提出了一个观点，即你不应该模拟一个依赖项以在测试中以某种方式表现，除非你有相应的契约测试确保该依赖项的具体实现在现实世界中表现得那样。

在您的示例中，说“方法 C 现在只返回一个节点而不是两个”意味着相应地**更改 C 的合同**及其合同测试。这引入了模拟 C 与新合同不同步的可能性，因此您应该在 C 被模拟的任何地方查看测试，并在需要时调整模拟。

在仔细检查现有测试之后，您会意识到您并不是真的想更改方法 C 的合同，而是**引入**适合 A 需求的新方法 C2。

[Rainsberger 在这里](http://blog.thecodewhisperer.com/2009/10/08/who-tests-the-contract-tests/)描述了他用来确保他在测试中获得互惠的过程。您还可以在[此视频](http://www.jbrains.ca/permalink/the-worlds-best-intro-to-tdd-demo-video)中观看实际操作中的技术。

# javascript - 未定义对象方法

> ID：16211694
> 
> 赞同：0
> 
> 时间：2013-04-25T09:54:47.623
> 
> 标签：javascript

我有这段代码，当我使用`display`它不断给我的方法时：

**网址未定义**

**名称未定义**

**描述未定义**

我不知道为什么我会收到错误，即使我提供了所有的礼仪。有人可以帮我找出问题吗？

```
function website(name,url,description)
{
    //Proparties
    this.name=name;
    this.url=url;
    this.description=description;

    // Methods
    this.getName=getName;
    this.getUrl=getUrl;
    this.getDescription=getDescription;
    this.display=display;

    // GetName Method
    function getName(name)
    {
        this.getName=name;
    }

    // GetUrl Method
    function getUrl(url){
        this.getUrl=url;
    }

    // getDescription
    function getDescription(description){
        this.getDescription=description;
    }

    function display(name,url,description){
        alert("URL is :" +url +" Name Is :"+name+" description is: "+description);
    }
}

// Set Object Proparites
web=new website("mywebsite","http://www.mywebsite.com","my nice website");

// Call Methods
var name = web.getName("mywebsite");
var url = web.getUrl("http://www.mywebsite.com");
var description = web.getDescription("my nice website");
web.display(name,url,description); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:00:23.507

我认为您对函数的工作方式感到非常困惑。在您的代码中，您有：

```
this.getName=getName; // this sets a "getName" method on the "this" object
// to be some function that will be implemented below

function getName(name) // i believe this function shouldn't have any parameter...
{
this.getName=name; //now, you're overriding the "getName" that you set above,
// to be something completely different: the parameter you sent when calling this function!
// instead, you should do:
return name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:57:19.863

你想写这个？：

```
function setName(name)
{
    this.name=name;
} 
```

据我了解，您正在设置，而不是获取属性。所以：

```
var name = web.setName("mywebsite"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:00:09.127

我应该将其声明为

```
function () {
  //property
  this.name

  //method
  this.setName = function ( name ) {
  this.name = name
  }
} 
```

他们以您的方式实施它，询问上下文问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:00:37.167

您的 getter 函数是覆盖自己的设置器（？）。将它们更改为

```
function getName(){
    return this.name;
}
function getUrl(){
    return this.url;
}
function getDescription(){
    return this.description;
} 
```

和

```
function setName(name){
    this.name = name;
}
function setUrl(url){
    this.url = url;
}
function setDescription(description){
    this.description = description;
} 
```

如果您希望您的设置器返回设置值，`return`请在分配之前添加关键字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T10:00:55.770

您的 getter 应该返回一个值，而不是重新分配 getter 本身，例如

```
function getName() {
  return this.name;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T10:20:00.177

您应该在每个方法上返回如下值：

```
// GetName Method
function getName() {
    return this.getName = name;
}

// GetUrl Method
function getUrl() {
    return this.getUrl = url;
}

// GetDescription Method
function getDescription() {
    return this.getDescription = description;
} 
```

# angularjs - Angularjs e2e 测试过去/未来的比较

> ID：16211696
> 
> 赞同：2
> 
> 时间：2013-04-25T09:54:58.443
> 
> 标签：angularjs, karma-runner, angular-scenario

我目前正在尝试弄清楚是否有办法进行简单的未来/过去比较。

1) 通过获取列表长度来检查列表的状态 2) 执行如果成功增加列表的操作 3) 将当前列表长度与过去进行比较。

但期货的概念似乎妨碍了我。人们会认为这是一个非常正常的用例。

问：您将如何处理 Angularjs 场景中的过去/未来比较？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-29T20:20:40.677

这有点冗长，但您可以定义了解期货的自定义匹配器。例如：

```
angular.scenario.matcher('toBeGreaterThanFuture', function(future) {
  return +this.actual > +future.value;
}); 
```

像这样使用：

```
listLengthBefore = repeater('.td').count();
// Do some stuff.
listLengthAfter = repeater('.td').count();
expect(listLengthAfter).toBeGreaterThanFuture(listLengthBefore); 
```

# selenium - 将 Selenium 代码导出到没有 selenium 的人可以使用的文件

> ID：16211697
> 
> 赞同：0
> 
> 时间：2013-04-25T09:54:59.853
> 
> 标签：selenium, export

有没有办法将 Selenium 代码导出到某种文件中，我可以发送给其他人在没有 selenium 的情况下使用？最好将其插入一些 html 文件或他们不必在计算机上安装的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:57:21.503

种类，取决于你目前使用什么。

如果您使用 IDE，则可以。IDE 记录的步骤本质上是放入它读取的 HTML 文件中。您可以将该 HTML 文件提供给其他人，让他们将其导入 IDE，然后它会从那里获取。这具有用户**必须**具有 IDE 支持的 FF 版本的依赖性。

如果您使用 WebDriver，则不会。至少不是没有太多工作——即使只是由于依赖关系。例如，您有各种驱动程序，用户需要拥有一个副本才能进行测试。您拥有编写测试代码的语言，例如 Java - 您必须确保用户拥有 Java。

您可以将它们打包到一个不错的安装程序中 - 安装程序可以为用户获取依赖项，但这会很慢、不可靠并且完全不值得您投入时间和精力。当您安装大型程序时请考虑一下 - 它也会为该应用程序下载大量依赖项。Visual Studio/Eclipse 是最好的例子，它们依赖于数百个东西。因此，当您安装它们时，它们不仅在安装核心文件，而且还安装了它们所依赖的东西。你可以复制同样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:00:00.980

为了运行 Selenium 测试，您也需要一个这样的东西：

*   Selenium IDE 在 Firefox 上运行，在这种情况下，您只需导出为 html 并在另一台计算机中导入
*   您用于导出的特定语言的运行时（即用于 jre、用于 C# 等的 .net）以及正在运行的 selenium-server

至于您的问题，我想说没有办法将测试用例导出到单个文件中以自行执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:56:59.103

您可以以不同的语言导出您的测试用例或测试套件。

如果您使用的是**Selenium IDE** ，请按照下列步骤操作：

1.  记录您的测试用例后，单击文件菜单。

2.  单击将测试套件导出为。 ![在此处输入图像描述](https://i.stack.imgur.com/HUd20.png)

3.  保存此文件。

4.  现在你可以发送这个文件了。

# jquery - Jquery 复选框 .prop 单击 preventDefault 行为

> ID：16211700
> 
> 赞同：5
> 
> 时间：2013-04-25T09:55:10.710
> 
> 标签：jquery, html, checkbox, onclick, onchange

我最近一直在使用许多复选框。我在点击事件中遇到了这个“问题”，`.prevenDefault()`我试图找到解决方案。就我而言，我希望能够决定是否可以根据其他字段选中/取消选中复选框。有时我什至不得不在事件触发之前打开一个对话框。这听起来比原来更容易......

在[这个 jsFiddle 中](http://jsfiddle.net/HPUyv/2/)，您可以看到问题所在以及我如何尝试解决它（也请参见下面的代码）。大多数答案暗示使用更改而不是点击。但是你不能使用`.preventdefault()`.

```
$('div').off('change','.wtf').on('change', '.wtf', function(e) {
    //e.preventDefault();
    //return false;
    if($(this).prop('checked') == true) {
        alert('I am true now, but I must stay false');
        $(this).prop('checked', false);
    }
    else {
        alert('I am false now, but I must stay true');
        $(this).prop('checked', true);
    }
}); 
```

这是最好的解决方案吗？或者有没有其他方法可以让复选框等到它被允许改变它的状态？

例如：只有当用户通过点击“确定”同意对话框中的消息时，我才希望取消选中该复选框。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T11:21:17.547

复选框是一种特殊情况，其中`change`事件和`click`可以相互替换，因为`change event`也可以通过单击复选框来触发。

`click`也就是说和之间唯一的大区别`change`是`.preventDefault()`. 在使用除单击之外的任何其他方法更改复选框的值的情况下，更改事件会更好。

在这种情况下，您可以选择您喜欢的任何一个。一个例子是：[*Fiddle here*](http://jsfiddle.net/Spokey/HPUyv/9/)

```
$('input[type="checkbox"]').on('change', function () {
    var ch = $(this), c;
    if (ch.is(':checked')) {
        ch.prop('checked', false);
        c = confirm('Do you?');
        if (c) {
            ch.prop('checked', true);
        }
    } else {
        ch.prop('checked', true);
        c = confirm('Are you sure?');
        if (c) {
            ch.prop('checked', false);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-26T21:17:44.977

我已经实现[**了 Spokey**](https://stackoverflow.com/a/16213398/1592845)解决方案，并基于使用`return`if return 停止函数进行了一些修改`confirm()``true`

```
$("input[name='status']").change(function(e){
       if ($(this).is(':checked')){
           msg = "{{__('The set status will be Active again! Are you sure?')}}"
           a = confirm(msg);
           if (a){
               return true;
           }
           $(this).prop('checked',false)
       }
       else{
           msg = "{{__('The set will be Inactive! Are you sure?')}}"
           a = confirm(msg);
            if (a){
               return true;
           }
           $(this).prop('checked',true);
       }
   }) 
```

# arrays - 读取数组中的问题和答案并显示

> ID：16211702
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:55:14.920
> 
> 标签：arrays, comparison

比较数组元素，如果数组相同或不同，则加 1 或 0。但他们没有加起来，我哪里做错了？因为数组似乎没有进行比较。

```
<html>
<head>
<title>Chosen answers</title>
</head>
<body>
<pre>
<?php

//Posting of the chosen answers

$answers = $_POST['selected_answers'];
echo '<b><u>THE ANSWERS YOU HAVE CHOSEN ARE:</u></b><br /><br />';
print_r($answers);

//Opening of the answers file, reading and printing it

$openFile = fopen("answers.txt", "r") or exit ("unable to open the answers file");
$fileContents = fread($openFile, filesize("answers.txt"));
fclose($openFile);
$delimiter = "  ";
$myArray = explode($delimiter, $fileContents);

$score = $score1 = $score2 = $score3 = $score4 = $score5 = $score6 = $score7 = $score8 = 0;

//Computation of marks scored for the answered questions

if ($answers[0] == $myArray[0])
{
$score = 1;
}
elseif ($answers[0] !=$myArray[0])
{
$score = 0;
}echo '<br />';

if ($answers[1] == $myArray[1])
{
$score1 = 1;
}
elseif ($answers[1] !=$myArray[1])
{
$score1 = 0;
}echo '<br />';

if ($answers[2] == $myArray[2])
{
$score2 = 1;
}
elseif ($answers[2] !=$myArray[2])
{
$score2 = 0;
}echo '<br />';

if ($answers[3] == $myArray[3])
{
$score3 = 1;
}
elseif ($answers[3] !=$myArray[3])
{
$score3 = 0;
}echo '<br />';
if ($answers[4] == $myArray[4])
{
$score4 = 1;
}
elseif ($answers[4] !=$myArray[4])
{
$score4 = 0;
}echo '<br />';

if ($answers[5] == $myArray[5])
{
$score5 = 1;
}
elseif ($answers[5] !=$myArray[5])
{
$score5 = 0;
}echo '<br />';

if ($answers[6] == $myArray[6])
{
$score6 = 1;
}
elseif ($answers[6] !=$myArray[6])
{
$score6 = 0;
}echo '<br />';

if ($answers[7] == $myArray[7])
{
$score7 = 1;
}
elseif ($answers[7] !=$myArray[7])
{
$score7 = 0;
}echo '<br />';

if ($answers[8] == $myArray[8])
{
$score8 = 1;
}
elseif ($answers[8] !=$myArray[8])
{
$score8 = 0;
}

$Total = $score + $score1 + $score2 + $score3 + $score4 + $score5 + $score6 + $score7 +   $score8 ;

echo "<b><u>$Total</u></b>";
?>
</pre>
</body>
</html> 
```

我怎样才能比较两个数组并计算总分。第一个数组 $answers 来自提交的表单。第二个是从另一个名为 answers.txt 的文本文件中读取的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:02:11.287

你的代码太多余了，你应该优化它。尝试一下

```
<?php 

$total=0;
if ($answers[1]=="Data coupling")
{
$total++;
}
else
{
print_r($answers[1]);
}

//third question
if ($answers[2]=="Unit testing")
{
$total++;
}
else
{
print_r($answers[2]);
}

//fourth question

if ($answers[3]=="Mutation testing")
{
$total++;
}
else
{
print_r($answers[3]);
}
//fifth question

if ($answers[4]=="white box testing")
{
$total++;
}
else
{
print_r($answers[4]);
}

//sixth question

if ($answers[5]=="Ad hoc")
{
$total++;
}
else
{
print_r($answers[5]);
}

//seventh question
if ($answers[6]=="information domain values")
{
$total++;
}
else
{
print_r($answers[6]);
}

//eigth question

if ($answers[7]=="Functional and behavioral")
{
$total++;
}
else
{
print_r($answers[7]);
}

//nineth question

if ($answers[8]=="Efficiency")
{
$total++;
}
else
{
print_r($answers[8]);
}

//code to generate the total score 

    echo $total;
?> 
```

# python - 如何在python中创建一个文件夹？-mkdir/makedirs 不这样做

> ID：16211703
> 
> 赞同：10
> 
> 时间：2013-04-25T09:55:19.277
> 
> 标签：python, python-2.7, directory, mkdir

我有一个小问题。我对python有点陌生，所以我需要帮助。

我正在尝试创建一个文件夹，但它应该独立于位置。

用户可以在桌面上，它将在桌面上制作，如果在那里的目录中等等。

我是说：

```
os.mkdir('C:\\Program Files\\....') 
```

不好

这是不可能的：

```
os.mkdir('\\just a dir') ? 
```

为什么我要一直提到那里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T10:04:28.450

是的，您只能将文件夹名称传递给，`os.mkdir`但随后它将在当前工作目录中创建该文件夹。因此，您可能必须与用户一次又一次地更改当前工作目录，或者`os.mkdir`如果您不想这样做，则只需将整个路径传递给。

```
In [13]: import os

In [14]: os.getcwd()
Out[14]: '/home/monty'

In [15]: os.mkdir("foo")  #creates foo in /home/monty

In [17]: os.chdir("foo") #change the current working diirectory to `foo`

In [19]: os.getcwd()
Out[19]: '/home/monty/foo'

In [18]: os.mkdir("bar")  #now `bar` is created in `/home/monty/foo` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T03:34:09.707

os.mkdir(filepath+directory_name) 此命令在 mkdir filepath="C:\Users" 中提到的路径中创建目录“directory_name” os.mkdir(filepath+"\"+

# ios - UIBarButtonItem 和界面旋转的自定义

> ID：16211706
> 
> 赞同：1
> 
> 时间：2013-04-25T09:55:27.037
> 
> 标签：ios, uibutton, uibarbuttonitem

有很多关于将自`UIBarButtonItem`定义视图自定义为 UIButton 的讨论。这很清楚。到目前为止，我还没有发现，令我惊讶的是，没有提到处理界面旋转的自定义 UIBarButtonItems - 当您旋转 iPhone 时，这是一种常见的行为，条形按钮会被垂直挤压。但是，如果您以普通方式（通过调用`initWithCustomView:`方法）自定义 UIBarButtonItem，它会在旋转到横向后保持非挤压状态。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T03:39:40.453

好吧，我发现`UIApplicationDidChangeStatusBarOrientationNotification`在自定义`UIBarButtonItem`类中处理的解决方案相当不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:04:50.240

我认为您应该使用新的方向图像和文本重建 UIBarButtonItem（您的自定义 UIButton），或者重置自定义视图的框架。

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    UIButton *rightItemButton = (UIButton *)self.navigationItem.rightBarButtonItem.customView;
    //resize the frame
    if (isLandscape) {

    } else if (isPortrait) {
        ....
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:48:39.610

如果您可以从 IB 添加 UIBarButtonItem（您不必以编程方式创建它），您可以设置弹簧和支柱以获得默认行为。这个解决方案对我有用。

# ms-access - 访问 VBA - TreeView 控件 - AfterLabelEdit 事件

> ID：16211712
> 
> 赞同：1
> 
> 时间：2013-04-25T09:55:46.930
> 
> 标签：ms-access, vba, treeview

我的表单中有一个树视图控件。我希望能够编辑树中的节点并将更改推送到 Access DB。但是，我很难找到合适的活动。[MSDN treeview 事件参考页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview_methods.aspx)建议*AfterLabelEdit*，但我无法让它工作。有人知道任何解决方法/解决方案吗？我使用的代码片段（我添加了*onClick*和*onDblClick*进行比较，因为它们有效）：

```
Private Sub xMyTreeview_Click() 'OK
 testit
End Sub
Private Sub xMyTreeview_DblClick() 'OK
 EditLabel
End Sub

Private Sub xMyTreeview_AfterLabelEdit() 'Problem
 AfterLabel
End Sub

Sub EditLabel()
 Me.xMyTreeview.StartLabelEdit
End Sub

Sub AfterLabel()
 MsgBox prompt, vbOKOnly, "afterlabel"
End Sub

Sub testit()
 Dim nodSelected As MSComctlLib.Node ' a variable for the currently selected node

 Set nodSelected = Me.xMyTreeview.SelectedItem ' get the currently selected node

 NodesStrLength = Len(nodSelected.Key)
 Dim NodeStr As String
 Dim StrToChange As String
 StrToChange = nodSelected.Key
 NodeStr = Mid(StrToChange, 2, NodesStrLength - 1)

 Me.txtNodeID = NodeStr
 Me.sfrmDOCNODE.Visible = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:30:05.510

您的链接是 .net Windows 窗体树视图，但`MSComctlLib`它是较旧的 Visual Basic 通用控件： http: [//msdn.microsoft.com/en-us/library/aa443023 (v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa443023(v=vs.60).aspx)

注意事件原型不同；如果您不使用正确的参数声明它，它将永远不会被提出；

```
Private Sub object_AfterLabelEdit(cancel As Integer, newstring As String) 
```

# sql - 重新分配游标 SELECT 语句。SQL Server 2008

> ID：16211715
> 
> 赞同：0
> 
> 时间：2013-04-25T09:55:57.837
> 
> 标签：sql, sql-server-2008, cursor

一段时间以来，我一直在寻找我的资源以寻找重新分配 Cursors SELECT 语句的方法，但没有成功。

首先让我向您展示我到目前为止的代码：

*@KeyString - 存储由逗号分隔的 ID 列表。
@Individual - 一旦 @KeyString 被分解，就存储个人 ID。*

```
DECLARE @Keystring VarChar(100) = '4, 6'
DECLARE @Individual VarChar(10)

WHILE LEN(@KeyString) > 1
BEGIN

  IF PATINDEX('%, %', @KeyString) > 1
  BEGIN
    SET @Individual = SUBSTRING(@KeyString, 0, (PATINDEX('%, %', @KeyString)))
  END
  ELSE 
  BEGIN
    SET @Individual = @KeyString
  END

  IF NOT CURSOR_STATUS('global', 'ID_Cursor')>= -1
  BEGIN
    DECLARE ID_Cursor Cursor
    FOR
    SELECT Blah FROM tbl_Blah WHERE ID = @Individual
    OPEN ID_Cursor
  END
  ELSE
  BEGIN
    /*RESET ID_Cursor = SELECT Blah FROM tbl_Blah WHERE Keyword = @Individual 
    (The Next @Individual after first loop)*/
  END

  FETCH NEXT FROM ID_Cursor INTO @blah
  WHILE @@FETCH_STATUS = 0
  BEGIN

      ......
      FETCH NEXT FROM ID_Cursor INTO @blah
  END
/*Loops Back to 'While LEN(@KeyString) > 1*/
END 
```

不知何故，我需要为 ID_Cursor 分配一个新的 SELECT 语句。ID_Cursor 需要使用循环后返回的下一个 @Individual。

有几种方法我认为这是可能的：

1.  它在代码中的显示方式：

    ```
     IF NOT ID_Cursor already exist Then
                Create ID_Cursor
                Else
                Change ID Cursor
                End 
    ```

2.  在循环外声明 ID_Cursor 并将整个 IF 语句 ('IF NOT CURSOR_STATUS('global, 'ID_Cursor')>= -1) 替换为：

    ```
     SET CURSOR FOR SELECT Blah FROM tbl_Blah WHERE Keyword = @Individual 
    ```

3.  或者以某种方式删除 ID_Cursor 当它“循环回 'While LEN(@KeyString) > 1' 并每次都声明它？

问题是我还没有找到关于重新分配游标并再次执行它们的文档/语法。重新分配之前是否必须先清除光标数据？

* * *

表结构：

Tbl_Main（ID int、Error_Title varchar、Error_Description varchar、K_ID varchar）

示例行：1 | 电子邮件未发送 | 请联系您的管理员 | 4、6

Tbl_Keyword(ID int, Keyword varchar) 示例行：

4 | 电子邮件

6 | 外表

Temp_Table(Main_ID int, Keyword_Count int)*本地临时表只存在于那个连接*

示例行：1 | 2

我的项目是一个错误日志系统，就像在 Stack Overflow 上使用标签时一样，用户分配一个与他们的问题相关的错误关键字，以便将来快速轻松地搜索相关问题。

这种对数据库的特定调用是基于这些关键字的搜索。例如：用户将在 VB 中选择“电子邮件”和“Outlook”，然后@keystring 将填充“4、6”。

在此示例中，@keywords 中有 2 个关键字，第一阶段是将它们分解为单独的 Keyword_ID。这就是@Individual 的用途。对于此示例，@individual = 4（对于第一个循环）。获得个人 ID 后，我需要运行 'SELECT ID FROM tbl_Main WHERE Keyword_ID Like '%' + @Individual + '%';' 对于此 SELECT 语句返回的每个 ID，我需要检查该 ID 是否已存在于我的 temtable 中。如果它不存在，我将需要 INSERT INTO temp_table (@individual *(因为这是来自 tbl_main) 的 ID*，1 *（因为这是 temp_table 中此 ID 的第一个实例）*）。例如：@individual = 4 并且 tbl_main 中 ID = 1 的错误在 Keyword_ID 中包含“4”，因此在 temp_table 中，ID 为 1，计数为 1。

在第二个循环中，@individual 将等于 6（用户正在搜索的第二个 ID），因此因为 ID = 1 的错误已经存在于我的 temp_table 中并且它的 Keyword_ID 中包含“6”，所以 temp_table 需要更新而不是插入到（UPDATE Keyword_Count WHERE ID = @Individual）一旦完成，这个特定的行将看起来像（1 | 2）（1因为它是ID | 2因为它包含用户选择的2个ID）最后一次所有个人错误已被搜索我将返回由 Keyword_Count DESC 排序的 temp_table 到 VB 并使用此数据填充列表视图。这意味着您正在搜索的最有可能的错误将出现在列表中的第一个，因为它计算了大多数搜索的关键字。

所以这就是我的总体目标：返回 tbl_main 中包含搜索最多的关键字 ID 的行，按最大的第一个排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:12:47.713

谢谢回复。所以。忘记你的SP。如果我理解了问题，这就是您所需要的：

```
 DECLARE @keystrings varchar(max)

SET @keystrings='4, 6' --your example
SET @keystrings=REPLACE(@keystrings, ' ', '') --remove spaces, we don't need them
SET @keystrings=CONCAT('SELECT ', REPLACE(@keystrings, ',', ' UNION ALL SELECT '))

SELECT TBM.ID, count(TBM.ID) AS 'HitCount'
FROM Tbl_Main AS TBM
WHERE TBM.K_ID IN (@keystrings)
GROUP BY TBM.ID 
```

*您可以在即时窗口（SSMS“新查询”窗口）中尝试此操作。让我知道它是否不正确并解释为什么/您需要什么其他结果*

# sql-server - 创建具有只读权限的 SQL 用户的最佳方法？

> ID：16211717
> 
> 赞同：1
> 
> 时间：2013-04-25T09:55:59.573
> 
> 标签：sql-server, sql-server-2008

为特定数据库创建只读用户的最佳实践是什么？

我创建了一个新用户并授予了 db_datareader 角色，但是，该用户仍然可以访问主数据库和其他系统数据库。那样行吗？还是我应该拒绝访问某些系统表/数据库以使其更安全？

谢谢。

* * *

好的，所以如果我创建一个新用户，他是否还有更多我必须拒绝的默认权限？如果我这样做了 ~create login ~create user for login.. ~grant EXECUTE for user

用户将只有 EXECUTE 权限还是对活动数据库也有额外的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:41:43.190

那么您可以使用拒绝写入作为角色选项。用户必须“看到”主服务器，因为主服务器包含他最终将连接到的数据库列表，但他在那里只有来宾权限。然后，您可以拒绝访问其他特定数据库。AFAIK 他不需要将 tempdb 或 msdb 视为访问这些的 SQL 引擎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:00:04.393

嗨，我相信用户也可以在对象资源管理器中查看其他数据库。

```
CREATE LOGIN me with password = 'me', check_policy = off

sp_changedbowner 'me'
GO

USE MASTER
GO

DENY VIEW ANY DATABASE TO me
GO 
```

# c# - 如何使用矩形

> ID：16211723
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:56:28.233
> 
> 标签：c#, windows-phone-7

我想用 Rectangle 在 VS 2010 window phone 中显示两种颜色，如果 Rectangle 不能，请告诉怎么做。

```
<Rectangle Height="20" Width="400" Stroke="White" Fill="Green" StrokeThickness="1"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:59:41.467

也许它可能通过渐变。但否则我会建议做两个矩形，所以两者都只有一半的高度/宽度（取决于你想要的颜色）

# java - AsyncTask 中的 java.lang.NullPointerException

> ID：16211733
> 
> 赞同：0
> 
> 时间：2013-04-25T09:57:12.393
> 
> 标签：java, android, eclipse, android-asynctask, nullpointerexception

我正在尝试使用 AsycTask “优化”我的应用程序代码，但我收到 java.lang.NullPointerException 错误。

你能帮我弄清楚我做错了什么吗？

```
package it.vscreazioni.farmachimica;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ListView;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;

public class MostraTutti extends SherlockActivity {
    final ListView lv = (ListView) findViewById(R.id.listView);
    final List<ListViewItem> items = new ArrayList<MostraTutti.ListViewItem>();
    final ArrayList<String> nome = new ArrayList<String>();
    final ArrayList<String> immagine = new ArrayList<String>();
    ...
    ...

    final   int array_image2[] ={R.drawable.iodocloroidrossichinolina,R.drawable.acidoacetilsalicilico,
                    R.drawable.acidoascorbico,R.drawable.acidobarbiturico,R.drawable.acidobenzoico,...};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.mostra_tutti);
            getSupportActionBar().setDisplayShowHomeEnabled(false);

            RssFeedTask rssTask = new RssFeedTask();
           rssTask.execute();            
    }

    private class RssFeedTask extends AsyncTask<String, Void, String> {
            private ProgressDialog Dialog;
            String response = "";

            @Override
            protected void onPreExecute() {
                    Dialog = new ProgressDialog(MostraTutti.this);
                    Dialog.setMessage("Leggo...");
                    Dialog.show();
            }

                    @Override
                    protected String doInBackground(String... urls) {
                            InputStream xmlFile = getResources().openRawResource(R.raw.sostanze);
                            try {

                            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
                            DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
                            final Document document = documentBuilder.parse(xmlFile);
                            document.getDocumentElement().normalize();
                            NodeList nodeList = document.getElementsByTagName("sostanza");

                            for (int i = 0; i < nodeList.getLength(); i++) {
                            final int       indice = i;

                            nome.add(document.getElementsByTagName("nome").item(indice).getTextContent());
                            iupac.add(document.getElementsByTagName("iupac").item(indice).getTextContent());
                            aspetto.add(document.getElementsByTagName("aspetto").item(indice).getTextContent());
                            formula.add(document.getElementsByTagName("formula").item(indice).getTextContent());
                            immagine.add(document.getElementsByTagName("immagine").item(indice).getTextContent());
                            appartenenza.add(document.getElementsByTagName("appartenenza").item(indice).getTextContent());
                            spiegazione.add(document.getElementsByTagName("spiegazione").item(indice).getTextContent());
                            tempFus.add(document.getElementsByTagName("temperaturaFusione").item(indice).getTextContent());
                            tempEboll.add(document.getElementsByTagName("temperaturaEbollizione").item(indice).getTextContent());
                            solubilita.add(document.getElementsByTagName("solubilita").item(indice).getTextContent());
                            note.add(document.getElementsByTagName("eccezioni").item(indice).getTextContent());

                            String str = document.getElementsByTagName("formula").item(indice).getTextContent();

                            str = str.replaceAll("0", "\u2080");
                        str = str.replaceAll("1", "\u2081");
                        str = str.replaceAll("2", "\u2082");
                        str = str.replaceAll("3", "\u2083");
                        str = str.replaceAll("4", "\u2084");
                        str = str.replaceAll("5", "\u2085");
                        str = str.replaceAll("6", "\u2086");
                        str = str.replaceAll("7", "\u2087");
                        str = str.replaceAll("8", "\u2088");
                        str = str.replaceAll("9", "\u2089");

                        final String stringa = str;
                            formulaConvertita.add(stringa);

                                    items.add(new ListViewItem()
                                    {{
                                            ThumbnailResource = array_image2[indice];
                                            Title = document.getElementsByTagName("nome").item(indice).getTextContent();
                                            SubTitle = stringa;
                                    }});
                };

                    } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    } catch (ParserConfigurationException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    } catch (SAXException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }       

                    return response;
    }
                @Override
                    protected void onPostExecute(String result) {
                    CustomListViewAdapter adapter = new CustomListViewAdapter(MostraTutti.this,items);
                            lv.setAdapter(adapter);
                    /*
                    _adapter = new CustomListViewAdapter(News.this,Rssparser.items);
                    lv=(ListView)findViewById(R.id.list);
                    lv.setAdapter(_adapter);
                            Dialog.dismiss();
                            lv.setOnItemClickListener(new OnItemClickListener()
                            {
                                    public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
                                    {                       
                                            Context context = getBaseContext();
                                   Intent myIntent = new Intent(context, LeggiArticolo.class);

                                   myIntent.putExtra("testo",Rssparser.testo.get(position));
                                   myIntent.putExtra("titolo",Rssparser.titolo.get(position));
                                   myIntent.putExtra("immagine",Rssparser.immagini.get(position));
                                   myIntent.putExtra("link",Rssparser.indirizzo.get(position));

                                   startActivityForResult(myIntent, 0);
                                    }
                             }
                         );
                         */
                    }
                    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getSupportMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
    }

class ListViewItem {
    public int ThumbnailResource;
    public String Title;
    public String SubTitle;
}
} 
```

我得到这个错误：

```
04-25 11:43:57.872: W/dalvikvm(1663): threadid=1: thread exiting with uncaught exception 
(group=0x40a13300)
04-25 11:43:57.902: E/AndroidRuntime(1663): FATAL EXCEPTION: main
04-25 11:43:57.902: E/AndroidRuntime(1663): java.lang.RuntimeException: Unable to 
instantiate activity   
ComponentInfo{it.vscreazioni.farmachimica/it.vscreazioni.farmachimica.MostraTutti}:   
java.lang.NullPointerException
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread.access$600(ActivityThread.java:130)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.os.Handler.dispatchMessage(Handler.java:99)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at android.os.Looper.loop(Looper.java:137)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread.main(ActivityThread.java:4745)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
java.lang.reflect.Method.invokeNative(Native Method)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
java.lang.reflect.Method.invoke(Method.java:511)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at dalvik.system.NativeStart.main(Native 
Method)
04-25 11:43:57.902: E/AndroidRuntime(1663): Caused by: java.lang.NullPointerException
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.Activity.findViewById(Activity.java:1825)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
it.vscreazioni.farmachimica.MostraTutti.<init>(MostraTutti.java:25)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at java.lang.Class.newInstanceImpl(Native 
Method)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
java.lang.Class.newInstance(Class.java:1319)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.Instrumentation.newActivity(Instrumentation.java:1053)
04-25 11:43:57.902: E/AndroidRuntime(1663):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
04-25 11:43:57.902: E/AndroidRuntime(1663):     ... 11 more 
```

你能帮我么？

回答后编辑：

```
public class MostraTutti extends SherlockActivity {
    ListView lv;
    final List<ListViewItem> items = new ArrayList<MostraTutti.ListViewItem>();
    final ArrayList<String> nome = new ArrayList<String>();
    ...

    final   int array_image2[] ={R.drawable.iodocloroidrossichinolina,R.drawable.acidoacetilsalicilico,
                    R.drawable.acidoascorbico,R.drawable.acidobarbiturico,R.drawable.acidobenzoico,
                    ... };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.mostra_tutti);
            lv = (ListView) findViewById(R.id.listView);
            getSupportActionBar().setDisplayShowHomeEnabled(false);

            RssFeedTask rssTask = new RssFeedTask();
           rssTask.execute();

    }

    private class RssFeedTask extends AsyncTask<String, Void, String> {
            private ProgressDialog Dialog;
            String response = "";

            @Override
            protected void onPreExecute() {
                    Dialog = new ProgressDialog(MostraTutti.this);
                    Dialog.setMessage("Leggo le sostanze...");
                    Dialog.show();
            }

                    @Override
                    protected String doInBackground(String... urls) {
                            InputStream xmlFile = getResources().openRawResource(R.raw.sostanze);
                            try {

                            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
                            DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
                            final Document document = documentBuilder.parse(xmlFile);
                            document.getDocumentElement().normalize();
                            //tagHandler.handleChannelTag(document);
                            NodeList nodeList = document.getElementsByTagName("sostanza");

                            for (int i = 0; i < nodeList.getLength(); i++) {
                            final int       indice = i;

                            nome.add(document.getElementsByTagName("nome").item(indice).getTextContent());
                            iupac.add(document.getElementsByTagName("iupac").item(indice).getTextContent());
                            aspetto.add(document.getElementsByTagName("aspetto").item(indice).getTextContent());
                            formula.add(document.getElementsByTagName("formula").item(indice).getTextContent());
                            immagine.add(document.getElementsByTagName("immagine").item(indice).getTextContent());
                            appartenenza.add(document.getElementsByTagName("appartenenza").item(indice).getTextContent());
                            spiegazione.add(document.getElementsByTagName("spiegazione").item(indice).getTextContent());
                            tempFus.add(document.getElementsByTagName("temperaturaFusione").item(indice).getTextContent());
                            tempEboll.add(document.getElementsByTagName("temperaturaEbollizione").item(indice).getTextContent());
                            solubilita.add(document.getElementsByTagName("solubilita").item(indice).getTextContent());
                            note.add(document.getElementsByTagName("eccezioni").item(indice).getTextContent());

                            String str = document.getElementsByTagName("formula").item(indice).getTextContent();

                            str = str.replaceAll("0", "\u2080");
                        str = str.replaceAll("1", "\u2081");
                        str = str.replaceAll("2", "\u2082");
                        str = str.replaceAll("3", "\u2083");
                        str = str.replaceAll("4", "\u2084");
                        str = str.replaceAll("5", "\u2085");
                        str = str.replaceAll("6", "\u2086");
                        str = str.replaceAll("7", "\u2087");
                        str = str.replaceAll("8", "\u2088");
                        str = str.replaceAll("9", "\u2089");

                        final String stringa = str;
                            formulaConvertita.add(stringa);

                                    items.add(new ListViewItem()
                                    {{
                                            ThumbnailResource = array_image2[indice];
                                            Title = document.getElementsByTagName("nome").item(indice).getTextContent();
                                            SubTitle = stringa;
                                    }});   
                };

                    } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    } catch (ParserConfigurationException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    } catch (SAXException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }       

                    return response;
    }
                @Override
                    protected void onPostExecute(String result) {
                    Dialog.dismiss();
                    CustomListViewAdapter adapter = new CustomListViewAdapter(MostraTutti.this,items);
                            lv.setAdapter(adapter);

                            lv.setOnItemClickListener(
                                    new OnItemClickListener()
                                    {
                                            public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
                                            {                                               
                                                    Context context = getBaseContext();
                                           Intent myIntent = new Intent(context, Dettagli.class);

                                           myIntent.putExtra("nome_sostanza",nome.get(position));
                                         //  myIntent.putExtra("formula",formula.get(position));
                                           myIntent.putExtra("iupac",iupac.get(position));                      
                                           myIntent.putExtra("aspetto",aspetto.get(position));                     
                                           myIntent.putExtra("appartenenza",appartenenza.get(position));
                                           myIntent.putExtra("solubilita",solubilita.get(position));
                                           myIntent.putExtra("tempFus",tempFus.get(position));
                                           myIntent.putExtra("tempEboll",tempEboll.get(position));
                                           myIntent.putExtra("spiegazione",spiegazione.get(position));
                                           myIntent.putExtra("immagine", array_image2[position]);
                                           myIntent.putExtra("formulaConvertita", formulaConvertita.get(position));
                                           myIntent.putExtra("note", note.get(position));
                                           startActivityForResult(myIntent, 0);
                                            }

                                        }
                                 );
                    }
                    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getSupportMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
    }

class ListViewItem {
    public int ThumbnailResource;
    public String Title;
    public String SubTitle;
}
} 
```

错误消失了！但是有一个奇怪的行为：现在在模拟器中它需要比“正常”方式更长的时间：

非异步 16 秒和异步 1 分钟...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:01:42.680

您正在尝试在活动创建之前获取视图：

```
final ListView lv = (ListView) findViewById(R.id.listView); 
```

将此行放在 setContentView 之后的 onCreate 函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:01:47.240

您不能以这种方式简单地声明一个字段：

```
final ListView lv = (ListView) findViewById(R.id.listView); 
```

`findViewById()`必须在调用后`setContentView()`调用，否则你会一直得到`NullPointerExceptions`。如果您想尽量减少与 相关的代码行数`findViewById()`，我建议使用名为[roboguice](https://github.com/roboguice/roboguice)的依赖注入框架。

# ruby - 如何使用 Nokogiri 解析此 HTML？

> ID：16211737
> 
> 赞同：0
> 
> 时间：2013-04-25T09:57:24.727
> 
> 标签：ruby, html-parsing, nokogiri

基于此 HTML：

```
<li><strong><a href="http://www.ukasta.org.uk/">United Kingdom Agricultural Supply Trade Association</a> (UKASTA)</strong></li> 
```

我想得到`United Kingdom Agricultural Supply TradeAssociation`和`(UKASTA)`字符串。

使用 Nokogiri，我写道：

```
linklist=link.parent.parent.css('li strong a')
linklist.each do |f|
  puts f.text
end 
```

`f.text`是“英国农业供应贸易协会”，但我如何获得“（UKASTA）”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T00:48:16.687

你潜得太深了。我会使用：

```
require 'nokogiri'

html = '<li><strong><a href="http://www.ukasta.org.uk/">United Kingdom Agricultural Supply Trade Association</a> (UKASTA)</strong></li>'
doc = Nokogiri::HTML(html)
doc.at('strong').text 
```

返回：

```
"United Kingdom Agricultural Supply Trade Association (UKASTA)" 
```

如果您必须找到该`<a>`节点，您可以使用以下命令访问“(UKASTA)”：

```
a_node = doc.at('a')
a_node.text
=> "United Kingdom Agricultural Supply Trade Association"
a_node.next_sibling.text
=> " (UKASTA)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T17:37:27.670

您可以使用该`children`方法，然后按位置识别数据：

```
require 'nokogiri'

html_doc = Nokogiri::HTML("<html><li><strong><a href="">United Kingdom Agricultural Supply Trade Association</a>(UKASTA)</strong></li></html>")

html_doc.css('li strong').children[0].text
=> United Kingdom Agricultural Supply Trade Association
html_doc.css('li strong').children[1]
=> (UKASTA) 
```

# c++ - 计算 GFlops

> ID：16211746
> 
> 赞同：1
> 
> 时间：2013-04-25T09:57:47.217
> 
> 标签：c++, cuda, flops

我想知道如何为我的程序计算 GFlops，比如 CUDA 应用程序。

我需要测量代码中的执行时间和浮点运算的数量吗？如果我有一个像“logf”这样的操作，它会只算一次失败吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:40:06.810

ACTUAL 浮点运算的数量将取决于代码的编写方式（编译器可以在两个方向上进行优化——也就是说，合并常见的`c = (a * 4.0 + b * 4.0);`操作可以变成`c = (a + b) * 4.0`，这比你写的少一个。但是编译器也可以将一些东西转换为更多操作：

```
 c = a / b; 
```

可能变成：

```
 temp = 1 / b;
 c = temp * a; 
```

（这是因为 1/x 比 y/x 更“简单”，并且乘法比除法更快）。

正如评论中提到的，一些浮点运算（log、sin、cos 等）将需要不止一个，通常是十多个运算来获得结果。

另一个需要考虑的因素是“负载”和“存储”。这些可能很难预测，因为它高度依赖于编译器代码生成、编译器在给定点可用的寄存器数量等。加载和存储是否实际计数取决于您如何看待事物，但它们肯定会计入总执行时间。如果有很多数据需要处理，但每一步都非常简单（例如`c = a + b`where`a`和是向量） `b`，`c`那么从内存中获取数据的时间要比 的执行时间长得多`add`。另一方面，`c = log(a) + log(b);`几乎肯定会“隐藏”加载和存储结果的时间，因为`log`它本身比加载或存储操作花费的时间要长得多。

# python - copy.deepcopy 还是创建一个新对象？

> ID：16211751
> 
> 赞同：6
> 
> 时间：2013-04-25T09:58:00.253
> 
> 标签：python, real-time

我正在开发一个实时应用程序，有时我需要为始终使用相同数据的新对象创建实例。

首先，我只是将它们实例化，但后来我意识到使用`copy.deepcopy`它可能会更快。现在，我发现有人说`deepcopy`速度非常慢。

我不能仅仅`copy.copy`因为我的对象有列表。

我的问题是，您知道更快的方法还是我只需要放弃并再次实例化它们？感谢您的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:13:49.790

我相信`copy.deepcopy()`仍然是纯 Python，所以它不太可能给你任何速度提升。

这听起来有点像早期优化的经典案例。我建议您编写直观的代码，在我看来，这只是实例化每个对象。然后，您可以对其进行分析，并查看需要在哪里节省开支（如果有的话）。很可能在您的实际用例中，一些完全不同的代码将成为瓶颈。

**编辑：** *我在原始答案中忘记提到的一件事 - 如果您要复制列表，请确保使用切片符号 ( `new_list = old_list[:]`) 而不是在 Python 中迭代它，这会更慢。但是，这不会进行深层复制，因此如果您的列表有其他列表或字典，您将需要使用`deepcopy()`. 对于`dict`对象，使用`copy()`方法。*

如果您仍然发现构建对象需要花费时间，那么您可以考虑如何加快速度。您可以尝试使用[`__slots__`](http://docs.python.org/2/reference/datamodel.html#__slots__)，尽管它们通常是关于节省内存而不是 CPU 时间，所以我怀疑他们会为您购买很多东西。在极端情况下，您可以将对象推送到 C 扩展模块，这可能会更快，但会增加复杂性。这一直是我过去采用的方法，我在底层使用原生 C 数据结构，并使用 Python 的特殊方法在顶部包装“类似列表”或“类似字典”的接口。当然，这确实取决于您是否对 C 中的编码感到满意。

（顺便说一句，除非你有令人信服的理由，否则我会避免使用 C++，C++ Python 扩展比普通 C 更容易构建——但是，如果你有一个好的动机，这是完全可能的）

例如，如果您的对象有很长的列表，那么您*可能会*从一种写时复制方法中获得一些好处，其中对象的克隆只保留相同的引用而不是复制列表。每次访问它们时，您都可以[`sys.getrefcount()`](http://docs.python.org/2/library/sys.html#sys.getrefcount)查看就地更新是否安全或是否需要复制。这种方法可能容易出错且过于复杂，但我想我会出于兴趣而提及它。

您还可以查看您的对象层次结构，看看您是否可以分解对象，以便可以在其他对象之间共享不需要复制的部分。同样，您在修改此类共享对象时需要小心。

然而，重要的一点是，您*首先*要使您的代码*正确*，*然后*一旦您从实际使用中了解了最佳方法，就可以使您的代码*快速运行。*

# javascript - 按类别对 JSON 内容进行排序

> ID：16211755
> 
> 赞同：0
> 
> 时间：2013-04-25T09:58:19.210
> 
> 标签：javascript, jquery, html, json, sorting

我有一个这样的 JSON 文件设置：

```
{
    "Products": [
        {   "Name": "Pink Floyd",
            "Album": "The Best Of Pink Floyd: A Foot In The Door",
            "Label": "EMI UK",
            "Tracks":"Hey You, See Emily Play, The Happiest Days Of Our Lives, Another Brick in The Wall (Part 2), Have a cigar, Wish You Where Here, Time, The Great Gig in the Sky, Money, Comfortably Numb, High Hopes, Learning to Fly, The Fletcher Memorial Home, Shine On You Crazy Diamond, Brain Damage, Eclipse" ,
            "Price": "16.40",
            "Genre": "Rock"   ,
            "Source": "http://upload.wikimedia.org/wikipedia/en/thumb/3/38/AFootInTheDoorPinkFloyd.jpg/220px-AFootInTheDoorPinkFloyd.jpg",
            "Quantity": 10

        },
        {
            "Name": "Depeche Mode",
            "Album": "A Question Of Time",
            "Label": "Mute",
            "Tracks":"A Question Of Time, Black Celebration, Something To Do, Stripped, More Than A Party, A Question Of Time(extended), Black Celebration" ,
            "Price": "4.68" ,
            "Genre": "Rock",
            "Source": "http://dmremix.be/images/AQuestionOfTime.jpg",
            "Quantity": 10
        }, 

..........

        }
    ]
} 
```

我正在尝试按“流派”对类别进行排序，即每次单击“流派”链接时，都会从表中清除所有产品，并且只会显示流派为“x”的项目。

这是我尝试过的：

```
<script>

        function Categories(Genre)
        {
            $.getJSON('products.json', function(data) {
                $(".products").empty();
                $(data.Products.Genre).each(function(index, item){
                if(Genre == this.Genre){

                    $('<div/>', {'class':'productname',text:item.Name}).append(
                            $('<div/>', {'class':'productdetails', text:'Album: '+item.Album}),
                            $('<div/>', {'class':'productdetails'}).append($('<img>').attr({src:item.Source,title:item.Name,alt:item.Name,class:'productimage'})),
                            $('<div/>', {'class':'productdetails', text:'Genre: '+item.Genre}),
                            $('<div/>', {'class':'productdetails', text:'Price: '+item.Price}),
                            $('<div/>', {'class':'productdetails', text:'Quantity: '+item.Quantity}),
                            $('<div/>', {'class':'productdetails', text:'Tracks: '+item.Tracks}),
                            $('<div/>').append(
                                    $('<button />', {'class':'productbutton'})
                                            .text('Add To Cart.')
                                            .click(function(){
                                                $.fn.SaveToCart(i,item.Name, item.Album, item.Price);
                                            })
                            )
                    ).appendTo("#products");
                }
            });

        });

        }
    </script> 
```

HTML：

```
<div class="categories">

        <h2>Categories</h2>
        <ul>

            <li><a class=""  onclick="Categories('Rock')"><span>Rock</span></a></li>
            <li><a class=""  onclick="Categories('Electro')"><span>Electro</span></a></li>
            <li><a class=""  onclick="Categories('Hip Hop')"><span>Hip Hop</span></a></li>
            <li><a class=""  onclick="Categories('Ambient')"><span>Ambient</span></a></li>
            <li><a class=""  onclick="Categories('Electronica')"><span>Electronica</span></a></li>
            <li><a class=""  onclick="Categories('Future Garage')"><span>Future Garage</span></a></li>

        </ul>
    </div>            <br><br><hr><hr>
<div class="products"></div> 
```

当我点击一个链接时，什么都没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:04:34.527

修复了您的 javascript 代码中的一些错误：

1）您正在遍历每个产品，因此`$(data.Products).each(function..`

2）`if(Genre == item.Genre){`正确检查流派

试试看：

```
<script>

        function Categories(Genre)
        {
            $.getJSON('products.json', function(data) {
                $(".products").empty();
                $(data.Products).each(function(index, item){
                if(Genre == item.Genre){

                    $('<div/>', {'class':'productname',text:item.Name}).append(
                            $('<div/>', {'class':'productdetails', text:'Album: '+item.Album}),
                            $('<div/>', {'class':'productdetails'}).append($('<img>').attr({src:item.Source,title:item.Name,alt:item.Name,class:'productimage'})),
                            $('<div/>', {'class':'productdetails', text:'Genre: '+item.Genre}),
                            $('<div/>', {'class':'productdetails', text:'Price: '+item.Price}),
                            $('<div/>', {'class':'productdetails', text:'Quantity: '+item.Quantity}),
                            $('<div/>', {'class':'productdetails', text:'Tracks: '+item.Tracks}),
                            $('<div/>').append(
                                    $('<button />', {'class':'productbutton'})
                                            .text('Add To Cart.')
                                            .click(function(){
                                                $.fn.SaveToCart(i,item.Name, item.Album, item.Price);
                                            })
                            )
                    ).appendTo("#products");
                }
            });

        });

        }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:07:52.840

那里纠正了一些错误：

*   循环 data.Products 而不是 data.Products.Genre

*   比较项目而不是这个

*   根据您的 HTML，附加到 .products 而不是不存在的 #products ！

不要忘记用你的东西中的数据替换 JSON，以及我不能在 JSFiddle 中使用的 $.getJSON 调用！并删除 window.Categories，只需将 Categories 放在全局范围内。

小提琴：

[http://jsfiddle.net/NA5tt/2/](http://jsfiddle.net/NA5tt/2/)

HTML：

```
<div class="categories">
    <h2>Categories</h2>
    <ul>
        <li><a class=""  onclick="Categories('Rock')"><span>Rock</span></a></li>
        <li><a class=""  onclick="Categories('Electro')"><span>Electro</span></a></li>
        <li><a class=""  onclick="Categories('Hip Hop')"><span>Hip Hop</span></a></li>
        <li><a class=""  onclick="Categories('Ambient')"><span>Ambient</span></a></li>
        <li><a class=""  onclick="Categories('Electronica')"><span>Electronica</span></a></li>
        <li><a class=""  onclick="Categories('Future Garage')"><span>Future Garage</span></a></li>
    </ul>
</div>
<br />
<br />
<hr />
<hr />
<div class="products"></div> 
```

我当然使用的是静态 JSON var...

JS：

```
var JSON = {
    "Products": [
        {   "Name": "Pink Floyd",
         "Album": "The Best Of Pink Floyd: A Foot In The Door",
         "Label": "EMI UK",
         "Tracks":"Hey You, See Emily Play, The Happiest Days Of Our Lives, Another Brick in The Wall (Part 2), Have a cigar, Wish You Where Here, Time, The Great Gig in the Sky, Money, Comfortably Numb, High Hopes, Learning to Fly, The Fletcher Memorial Home, Shine On You Crazy Diamond, Brain Damage, Eclipse" ,
         "Price": "16.40",
         "Genre": "Rock"   ,
         "Source": "http://upload.wikimedia.org/wikipedia/en/thumb/3/38/AFootInTheDoorPinkFloyd.jpg/220px-AFootInTheDoorPinkFloyd.jpg",
         "Quantity": 10

        },
        {
            "Name": "Depeche Mode",
            "Album": "A Question Of Time",
            "Label": "Mute",
            "Tracks":"A Question Of Time, Black Celebration, Something To Do, Stripped, More Than A Party, A Question Of Time(extended), Black Celebration" ,
            "Price": "4.68" ,
            "Genre": "Rock",
            "Source": "http://dmremix.be/images/AQuestionOfTime.jpg",
            "Quantity": 10
        }
    ]
}

// window is JUST for the JSFiddle cause I'm in a jQuery scope.
window.Categories = function (Genre) {
    $(".products").empty();
    // Loop on JSON.Products
    $(JSON.Products).each(function(index, item) {
        // Compare to item instead of this
        if(Genre == item.Genre) {
            $('<div/>', {'class':'productname'}).text(item.Name).append(
                $('<div/>', {'class':'productdetails', text:'Album: '+item.Album}),
                $('<div/>', {'class':'productdetails'}).append($('<img>').attr({src:item.Source,title:item.Name,alt:item.Name,class:'productimage'})),
                $('<div/>', {'class':'productdetails', text:'Genre: '+item.Genre}),
                $('<div/>', {'class':'productdetails', text:'Price: '+item.Price}),
                $('<div/>', {'class':'productdetails', text:'Quantity: '+item.Quantity}),
                $('<div/>', {'class':'productdetails', text:'Tracks: '+item.Tracks}),
                $('<div/>').append(
                    $('<button />', {'class':'productbutton'})
                    .text('Add To Cart.')
                    .click(function(){
                        $.fn.SaveToCart(i,item.Name, item.Album, item.Price);
                    })
                )
            ).appendTo(".products"); // .products instead of #products cause you're using a class
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:09:01.400

以下是对数据对象进行排序的方法，只需对对象进行排序并重新创建表：

```
var obj={
    "Products": [
        {   "Name": "Pink Floyd",
            "Album": "The Best Of Pink Floyd: A Foot In The Door",
            "Label": "EMI UK",
            "Tracks":"Hey You, See Emily Play, The Happiest Days Of Our Lives, Another Brick in The Wall (Part 2), Have a cigar, Wish You Where Here, Time, The Great Gig in the Sky, Money, Comfortably Numb, High Hopes, Learning to Fly, The Fletcher Memorial Home, Shine On You Crazy Diamond, Brain Damage, Eclipse" ,
            "Price": "16.40",
            "Genre": "Rock"   ,
            "Source": "http://upload.wikimedia.org/wikipedia/en/thumb/3/38/AFootInTheDoorPinkFloyd.jpg/220px-AFootInTheDoorPinkFloyd.jpg",
            "Quantity": 10

        },
        {
            "Name": "Depeche Mode",
            "Album": "A Question Of Time",
            "Label": "Mute",
            "Tracks":"A Question Of Time, Black Celebration, Something To Do, Stripped, More Than A Party, A Question Of Time(extended), Black Celebration" ,
            "Price": "4.68" ,
            "Genre": "Rock",
            "Source": "http://dmremix.be/images/AQuestionOfTime.jpg",
            "Quantity": 10
        }
    ]
}

keys=["Genre","Name"];//Sorts by Genre then Name
obj.Products.sort(function(a,b){
  var ret=0,i=0;
  while(ret==0&&i<keys.length){
      ret=(a[keys[i]]>b[keys[i]])?1
        :(a[keys[i]]<b[keys[i]])?-1:0;
      i++;
   }
   return ret;
});
console.log(obj.Products) 
```

# ios - OS X / iOS 崩溃报告中的不同异常代码是什么意思？

> ID：16211757
> 
> 赞同：4
> 
> 时间：2013-04-25T09:58:20.197
> 
> 标签：ios, macos, crash-reports

在 Apple 崩溃报告中，有两行提供`Exception Type`和`Exception Codes`用于崩溃报告。有人知道所有这些代码的实际含义吗？

有一些不言自明的，例如`KERN_INVALID_ADDRESS`：

例如，这是一个**NULL 指针解引用**：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000 
```

如果你在指针算术上出错了，你最终会得到非常相似的结果：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00007fff50399000 
```

但是有很多这样的异常代码！例如，这是我最近遇到的一个，我不知道它是什么意思（地址指向一个大的内存映射文件）：

```
Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: 0x000000000000000a, 0x0000000137676004 
```

我发现的有关崩溃报告的只是[这个技术](https://developer.apple.com/library/mac/technotes/tn2004/tn2123.html)说明，但没有详细参考如何解释异常代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:46:37.887

可以在[xnu 源](http://www.opensource.apple.com/source/xnu/xnu-2050.22.13/osfmk/mach/kern_return.h)代码中找到异常代码列表。0x000000000000000a 是 KERN_MEM0RY_ERROR：

```
#define KERN_MEMORY_ERROR       10
    /* During a page fault, the memory object indicated
     * that the data could not be returned.  This failure
     * may be temporary; future attempts to access this
     * same data may succeed, as defined by the memory
     * object.
     */ 
```

# ajax - CGridView 在 IE<10 上禁用 ajax 更新

> ID：16211760
> 
> 赞同：0
> 
> 时间：2013-04-25T09:58:29.550
> 
> 标签：ajax, internet-explorer, yii

我可以仅在 Internet Explorer < 10 上禁用 CGridView 中的 ajax 更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:09:57.203

您可以手动获取 IE 版本并在小部件中添加使用：

```
$isIE10 = !preg_match('/(?i)msie [1-9]/',$_SERVER['HTTP_USER_AGENT']);

$this->widget('zii.widgets.grid.CGridView', array(
        .................
        'ajaxUpdate' => ($isIE10?'id':false),
        .................
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:40:24.397

您也可以使用 jQuery[`$.browser`](http://api.jquery.com/jQuery.browser/)来检测它。

```
var ua = $.browser;
if ( ua.msie && parseInt(ua.version, 10) < 10 ) {
  alert( "Disable AJAX!" );
} 
```

*注意：未经测试的示例，从链接站点上的示例构建*。

# c# - 将任何有效的 DateTime 格式解析为 SQL Server 兼容格式？

> ID：16211765
> 
> 赞同：0
> 
> 时间：2013-04-25T09:58:37.407
> 
> 标签：c#, .net, visual-studio-2010, c#-4.0, datetime

我来自印度，在这里我们遵循`dd-mm-yyyy`日期格式。

我的问题是，我们的各种客户需要他们的日期时间以上述格式显示。但是我们用作后端的 SQL Server 不将 dd-mm-yyyy 识别为有效的日期时间格式。我们通常做的是将给定的日期转换为 mm-dd-yyyy`CultureInfo`使用`Convert.ToDateTime() or DateTime.Parse or DateTime.TryParse()`

另外，我遇​​到了另一种情况，当我的输入日期格式正确`MM-dd-yyyy or MM/dd/yyyy or yyyy-MM-dd`，但我的本地系统日期不是上面的，那么`it throws exception, input string in not in correct format`。我无法弄清楚如何自动解决它。

现有的自定义方法：但这在大多数情况下都会失败。

```
 /// <summary>
    /// Parses string value from a supplied value to DateTime.
    /// Usage: var i = Common.ParseDate(yourDateString);
    /// </summary>
    /// <param name="value"></param>
    /// <returns></returns>
    private static DateTime ParseDate(string value)
    {
        DateTime i;
        if (!DateTime.TryParse(value, out i))
            return Convert.ToDateTime("01/01/1700",CultureInfo.InvariantCulture); 
// Assuming 01/01/1700 as default value instead of null.
        return i;
    } 
```

请建议在上面进行更改，以便我的方法会自动将任何日期时间转换为 SQL Server 兼容格式，如 yyyy-mm-dd。

用法应该是这样的：

```
Input:
DateTime dt = DateTimeParser("29-12-2013"); // in case or double figure months and dates

Output of dt: either 2013-12-29 or 12/29/2013

DateTime dt = DateTimeParser("9-2-2013"); // in case or single figure months and dates

Output of dt: either 2013-2-9 or 2/9/2013 (sql-server compatible) 
```

**请注意：日期时间转换应该与系统时钟无关。**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T02:58:23.870

我曾经想要这个确切的东西，尽管我们可以*假设*用户的意思，因为正确性并不重要（对于像 MS Excel 这样的东西，当你输入文本日期时间时）。

实际上，您可以从内置文化中收集所有可能的日期时间格式，以及您可以自己定义的许多自定义格式。我曾经想要一个非常全面的日期时间格式匹配。

我做了一些与nawfal 的回答非常相似的事情。这是一个将他的答案与我的大量格式相结合的解决方案：

```
static string[] GetDateTimeFormats()
{
    var defaultFormats = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                    .SelectMany(x => x.DateTimeFormat.GetAllDateTimePatterns())
                                    .Distinct(); //to speed up things

    //discard some formats that're not worthy of consideration
    var goodDefaultFormats = defaultFormats.Where(x => !IsPoorFormat(x) && !IsConflictingFormat(x));

    var customFormats = GetCustomDateTimeFormats();

    var allFormats = goodDefaultFormats.Concat(customFormats).ToArray();

    //a technique to get comma separated time formats, 
    //for eg, from dd-MM-yyyy h:mm:ss tt we get -> dd-MM-yyyy, h:mm:ss tt
    var moreCustomFormats = allFormats.Select(f => new 
                                      { 
                                          f, 
                                          i = f.IndexOf(" h", StringComparison.OrdinalIgnoreCase) 
                                      })
                                      .Where(x => x.i >= 0)
                                      .Select(x => new { x.f, c = x.f[x.i - 1], x.i })
                                      .Where(x => !char.IsPunctuation(x.c) && x.c != 't')
                                      .Select(x => x.f.Insert(x.i, ","));

    allFormats = allFormats.Union(moreCustomFormats).ToArray(); //Union removes duplicates

    return allFormats;
}

static bool IsPoorFormat(string format)
{
    //all discardable formats in case any
    string[] ignorables = { "HH", "MMMM yyyy", "MMMM, yyyy", "yyyy MMMM", "yyyy.M", "yyyy-MM", 
                            "MMMM,yy", "MMMM, yy", "MMMM,yyyy", "MMMM, yyyy", "yyyy. MMMM" };

    return ignorables.Contains(format);
}

//to remove conflicting date formats, for example, 
//formats like MM-dd-yy, yy-MM-dd, dd-MM-yy etc can be conflicting
static bool IsConflictingFormat(string format)
{
    //in this example we discard formats like M-d-yy, yy-MM-dd etc, but keep dd-MM-yy
    //in case you want to keep MM-dd-yy, the placeholders array should be { 'd', 'y' },
    //and similarly if the preferred format is yy-MM-dd, array should be { 'M', 'd' }
    var placeholders = new[] { 'M', 'y' };

    var separators = new[] { ' ', '.', '-', '/' };

    var patterns = placeholders.Select(x => x.ToString())
                               .SelectMany(x => new[] { x, x + x })
                               .SelectMany(x => separators, (x, y) => x + y);

    return patterns.Any(format.StartsWith);
}

static string[] GetCustomDateTimeFormats()
{
    return new[] 
    {
        "dddd, MMMM d, yyyy h:mm:ss tt",
        "dddd, MMMM d, yyyy H:mm:ss",
        "dddd, MMMM d, yyyy h:mm tt",
        "dddd, MMMM d, yyyy H:mm",

        "dddd, MMM d, yyyy h:mm:ss tt",
        "dddd, MMM d, yyyy H:mm:ss",
        "dddd, MMM d, yyyy h:mm tt",
        "dddd, MMM d, yyyy H:mm",

        "ddd, MMMM d, yyyy h:mm:ss tt",
        "ddd, MMMM d, yyyy H:mm:ss",
        "ddd, MMMM d, yyyy h:mm tt",
        "ddd, MMMM d, yyyy H:mm",

        "ddd, MMM d, yyyy h:mm:ss tt",
        "ddd, MMM d, yyyy H:mm:ss",
        "ddd, MMM d, yyyy h:mm tt",
        "ddd, MMM d, yyyy H:mm",

        "dddd, MMMM d yyyy h:mm:ss tt",
        "dddd, MMMM d yyyy H:mm:ss",
        "dddd, MMMM d yyyy h:mm tt",
        "dddd, MMMM d yyyy H:mm",

        "dddd, MMM d yyyy h:mm:ss tt",
        "dddd, MMM d yyyy H:mm:ss",
        "dddd, MMM d yyyy h:mm tt",
        "dddd, MMM d yyyy H:mm",

        "ddd, MMMM d yyyy h:mm:ss tt",
        "ddd, MMMM d yyyy H:mm:ss",
        "ddd, MMMM d yyyy h:mm tt",
        "ddd, MMMM d yyyy H:mm",

        "ddd, MMM d yyyy h:mm:ss tt",
        "ddd, MMM d yyyy H:mm:ss",
        "ddd, MMM d yyyy h:mm tt",
        "ddd, MMM d yyyy H:mm", 

        ///////////////////////////

        "dddd, d MMMM, yyyy h:mm:ss tt", 
        "dddd, d MMMM, yyyy H:mm:ss", 
        "dddd, d MMMM, yyyy h:mm tt", 
        "dddd, d MMMM, yyyy H:mm", 

        "dddd, d MMM, yyyy h:mm:ss tt", 
        "dddd, d MMM, yyyy H:mm:ss", 
        "dddd, d MMM, yyyy h:mm tt", 
        "dddd, d MMM, yyyy H:mm", 

        "ddd, d MMMM, yyyy h:mm:ss tt", 
        "ddd, d MMMM, yyyy H:mm:ss", 
        "ddd, d MMMM, yyyy h:mm tt", 
        "ddd, d MMMM, yyyy H:mm", 

        "ddd, d MMM, yyyy h:mm:ss tt", 
        "ddd, d MMM, yyyy H:mm:ss", 
        "ddd, d MMM, yyyy h:mm tt", 
        "ddd, d MMM, yyyy H:mm", 

        "dddd, d MMMM yyyy h:mm:ss tt", 
        "dddd, d MMMM yyyy H:mm:ss", 
        "dddd, d MMMM yyyy h:mm tt", 
        "dddd, d MMMM yyyy H:mm", 

        "dddd, d MMM yyyy h:mm:ss tt", 
        "dddd, d MMM yyyy H:mm:ss", 
        "dddd, d MMM yyyy h:mm tt", 
        "dddd, d MMM yyyy H:mm", 

        "ddd, d MMMM yyyy h:mm:ss tt", 
        "ddd, d MMMM yyyy H:mm:ss", 
        "ddd, d MMMM yyyy h:mm tt", 
        "ddd, d MMMM yyyy H:mm", 

        "ddd, d MMM yyyy h:mm:ss tt", 
        "ddd, d MMM yyyy H:mm:ss", 
        "ddd, d MMM yyyy h:mm tt", 
        "ddd, d MMM yyyy H:mm", 

        /////////////////////////////////

        "yyyy, MMMM d h:mm:ss tt", 
        "yyyy, MMMM d H:mm:ss", 
        "yyyy, MMMM d h:mm tt", 
        "yyyy, MMMM d H:mm", 

        "yyyy, MMM d h:mm:ss tt", 
        "yyyy, MMM d H:mm:ss", 
        "yyyy, MMM d h:mm tt", 
        "yyyy, MMM d H:mm", 

        "yyyy, MM d h:mm:ss tt", 
        "yyyy, MM d H:mm:ss", 
        "yyyy, MM d h:mm tt", 
        "yyyy, MM d H:mm", 

        "yyyy MMMM d h:mm:ss tt", 
        "yyyy MMMM d H:mm:ss", 
        "yyyy MMMM d h:mm tt", 
        "yyyy MMMM d H:mm", 

        "yyyy MMM d h:mm:ss tt", 
        "yyyy MMM d H:mm:ss", 
        "yyyy MMM d h:mm tt", 
        "yyyy MMM d H:mm", 

        "yyyy MM d h:mm:ss tt", 
        "yyyy MM d H:mm:ss", 
        "yyyy MM d h:mm tt", 
        "yyyy MM d H:mm", 

        ///////////////////////

        "yyyy, d MMMM h:mm:ss tt", 
        "yyyy, d MMMM H:mm:ss", 
        "yyyy, d MMMM h:mm tt", 
        "yyyy, d MMMM H:mm", 

        "yyyy, d MMM h:mm:ss tt", 
        "yyyy, d MMM H:mm:ss", 
        "yyyy, d MMM h:mm tt", 
        "yyyy, d MMM H:mm", 

        "yyyy, d MM h:mm:ss tt", 
        "yyyy, d MM H:mm:ss", 
        "yyyy, d MM h:mm tt", 
        "yyyy, d MM H:mm", 

        "yyyy d MMMM h:mm:ss tt", 
        "yyyy d MMMM H:mm:ss", 
        "yyyy d MMMM h:mm tt", 
        "yyyy d MMMM H:mm", 

        "yyyy d MMM h:mm:ss tt", 
        "yyyy d MMM H:mm:ss", 
        "yyyy d MMM h:mm tt", 
        "yyyy d MMM H:mm", 

        "yyyy d MM h:mm:ss tt", 
        "yyyy d MM H:mm:ss", 
        "yyyy d MM h:mm tt", 
        "yyyy d MM H:mm",

        ////////////////////////////////

        "MMMM d, yyyy h:mm:ss tt",
        "MMMM d, yyyy H:mm:ss",
        "MMMM d, yyyy h:mm tt",
        "MMMM d, yyyy H:mm",

        "MMM d, yyyy h:mm:ss tt",
        "MMM d, yyyy H:mm:ss",
        "MMM d, yyyy h:mm tt",
        "MMM d, yyyy H:mm",

        "MMMM d yyyy h:mm:ss tt",
        "MMMM d yyyy H:mm:ss",
        "MMMM d yyyy h:mm tt",
        "MMMM d yyyy H:mm",

        "MMM d yyyy h:mm:ss tt",
        "MMM d yyyy H:mm:ss",
        "MMM d yyyy h:mm tt",
        "MMM d yyyy H:mm",

        ////////////////////////////////////

        "d MMMM, yyyy h:mm:ss tt", 
        "d MMMM, yyyy H:mm:ss", 
        "d MMMM, yyyy h:mm tt",
        "d MMMM, yyyy H:mm",  

        "d MMM, yyyy h:mm:ss tt", 
        "d MMM, yyyy H:mm:ss", 
        "d MMM, yyyy h:mm tt",
        "d MMM, yyyy H:mm",  

        "d MMMM yyyy h:mm:ss tt", 
        "d MMMM yyyy H:mm:ss", 
        "d MMMM yyyy h:mm tt",
        "d MMMM yyyy H:mm",  

        "d MMM yyyy h:mm:ss tt", 
        "d MMM yyyy H:mm:ss", 
        "d MMM yyyy h:mm tt",
        "d MMM yyyy H:mm",  

        /////////////////////////

        "dddd, MMMM d, yyyy",
        "dddd, MMM d, yyyy",

        "ddd, MMMM d, yyyy",
        "ddd, MMM d, yyyy",

        "dddd, MMMM d yyyy", 
        "dddd, MMM d yyyy",

        "ddd, MMMM d yyyy",
        "ddd, MMM d yyyy",

        //////////////////////////

        "dddd, d MMMM, yyyy", 
        "dddd, d MMM, yyyy", 

        "ddd, d MMMM, yyyy", 
        "ddd, d MMM, yyyy",  

        "dddd, d MMMM yyyy",
        "dddd, d MMM yyyy",

        "ddd, d MMMM yyyy", 
        "ddd, d MMM yyyy", 

        ///////////////////////////

        "MMMM d, yyyy",
        "MMM d, yyyy",

        "MMMM d yyyy",
        "MMM d yyyy",

        //////////////////////////

        "d MMMM, yyyy", 
        "d MMM, yyyy",

        "d MMMM yyyy", 
        "d MMM yyyy",

        //////////////////////////

        "yyyy, MMMM d", 
        "yyyy, MMM d", 

        "yyyy MMMM d", 
        "yyyy MMM d", 

        //////////////////////////

        "yyyy d MMMM", 
        "yyyy d MMM", 

        "yyyy, d MMMM", 
        "yyyy, d MMM", 

        ///////////////////////////

        "d MMMM",
        "d MMM",

        /////////////////////////////

        "MMMM d", 
        "MMM d",

        ////////////////////////////

        "dd",
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:02:25.427

我个人使用参数。否则，您可以[在 SQL Server 中强制使用特定的 DateTime 格式](http://msdn.microsoft.com/en-us/library/ms187928.aspx#languageReferenceRemarksToggle)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T13:03:11.887

试试这个代码如果你的输入日期是“dd/mm/yyyy”，那么它会转换 Sql 兼容格式，否则它会给你消息日期格式不是预期的格式。

```
 var dd = string.Empty;
    var mm = string.Empty;
    var yy = string.Empty;
    string actualDate = "18/07/2012";
    string finalDate = string.Empty;
    if (actualDate.ToString().Contains('/'))
    {
        dd = string.Format("{0:00}", Convert.ToInt32(actualDate.ToString().Split('/')[0]));
        mm = string.Format("{0:00}", Convert.ToInt32(actualDate.ToString().Split('/')[1]));
        yy = string.Format("{0:0000}", Convert.ToInt32(actualDate.ToString().Split('/')[2]));
        finalDate = dd + "/" + mm + "/" + yy;
    }

    string dateString = finalDate; // <-- Valid
    string format = "dd/MM/yyyy";
    DateTime dateTime;
    if (!DateTime.TryParseExact(dateString, format, CultureInfo.InvariantCulture,
        DateTimeStyles.None, out dateTime))
    {
       lblDate.Text= "Excel Date is not correct format.it should be in dd/mm/yyyy";
    }
    else
    {
        actualDate =
            DateTime.ParseExact(dateString, format,
                                   CultureInfo.InvariantCulture,
                                   DateTimeStyles.None).ToString();
    }

    Label1.Text = actualDate; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:00:52.020

您不需要将日期解析为格式。使用`DateTime`SQL Server 中的数据类型作为字段，与格式无关。还要确保在通过 C# 与 SQL Server 交互时使用[SqlParameter 。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)`DateTime`格式只能用于显示日期。喜欢：

```
using(SqlConnection conn = new SqlConnection("connectionstring"))
using (SqlCommand cmd = new SqlCommand())
{
    cmd.CommandText = "Insert into yourtable(datecolumn) VALUES (@pDate);";
    cmd.Parameters.AddWithValue("@pDate", DateTime.Now);
    cmd.Connection = conn;
    //.....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-23T05:30:03.080

正如 Habib 所说，要将其保存在数据库中，您不需要知道任何格式，只需保存`DateTime`对象，您的 ado.net 连接器就会知道如何处理它。

您的问题应该在于将用户的输入字符串解析为 .NET`DateTime`对象。现在不知道用户的文化特定设置，你注定要失败。你不能有一个通用的方法来处理它。考虑 date `12/12/12`，它可能意味着`dd/MM/yy`或`MM/dd/yy`任何其他组合。

* * *

您最好的选择是获取有关用户、他的文化的信息并进行相应的解析。或者要求他以您特别指定的格式输入。

* * *

好吧，你可以依靠一些启发式来匹配常见的格式，假设格式**但它完全脆弱。仅当准确性不成问题时，这才可以派上用场**。

```
private static DateTime ParseOrDefault(string value)
{
    DateTime result;
    var sett = DateTimeStyles.AllowWhiteSpaces; //and whatever that is
    var formats = GetDateTimeFormats //whatever cultures that you want to consider.
    (
        new CultureInfo("en-GB"), //prioritize your order
        new CultureInfo("en-IN"), 
        CultureInfo.CurrentCulture, 
        CultureInfo.InvariantCulture
    );

    if (!DateTime.TryParseExact(value, formats, CultureInfo.InvariantCulture, sett, out result))
        return Convert.ToDateTime("01/01/1700", CultureInfo.InvariantCulture);

    return result;
}

string[] GetDateTimeFormats(params CultureInfo[] cultures)
{
    return cultures.SelectMany(x => x.DateTimeFormat.GetAllDateTimePatterns())
                   .Distinct()
                   .ToArray();
} 
```

`DateTime.ParseExact`并`DateTime.TryParseExact`具有重载以实现对多种格式的匹配。上述方法*假设*来自用户的输入字符串首先是在`en-GB`等`en-IN`文化中，即如果`12/12/12`它把它当作`dd/MM/yy`。这是一些假设，但在不知道输入的情况下您可以得到尽可能接近的结果，而您唯一的选择就是假设。**谨慎。**

像这样称呼它：

```
Common.ParseOrDefault(yourDateString); 
```

* * *

另一种选择可能是您匹配您知道的所有可能的格式，不包括冲突的格式。例如，如果您只想考虑`dd/MM/yy`可以过滤掉的格式`MM/dd/yy`和`yy/MM/dd`格式。现在您可以获得大量格式并避免冲突。可以稍微好一点。

```
static string[] formats; //made static for performance reasons

private static DateTime ParseOrDefault(string value)
{
    formats = formats ?? GetDateTimeFormats();

    DateTime result;
    var sett = DateTimeStyles.AllowWhiteSpaces; //and whatever that is

    if (!DateTime.TryParseExact(value, formats, CultureInfo.InvariantCulture, sett, out result))
        return Convert.ToDateTime("01/01/1700", CultureInfo.InvariantCulture);

    return result;
}

static string[] GetDateTimeFormats()
{
    var allFormats = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                .SelectMany(x => x.DateTimeFormat.GetAllDateTimePatterns())
                                .Distinct(); //to speed up things

    //discard some formats that're not worthy of consideration
    var goodFormats = allFormats.Where(x => !IsConflictingFormat(x));

    return goodFormats.ToArray();
}

//to remove conflicting date formats, for example, 
//formats like MM-dd-yy, yy-MM-dd, dd-MM-yy etc can be conflicting
static bool IsConflictingFormat(string format)
{
    //in this example we discard formats like M-d-yy, yy-MM-dd etc, but keep dd-MM-yy
    //in case you want to keep MM-dd-yy, the placeholders array should be { 'd', 'y' },
    //and similarly if the preferred format is yy-MM-dd, array should be { 'M', 'd' }
    var placeholders = new[] { 'M', 'y' };

    var separators = new[] { ' ', '.', '-', '/' };

    var patterns = placeholders.Select(x => x.ToString())
                               .SelectMany(x => new[] { x, x + x })
                               .SelectMany(x => separators, (x, y) => x + y);

    return patterns.Any(format.StartsWith);
} 
```

# regex - 正则表达式与数字字符串完全匹配

> ID：16211766
> 
> 赞同：0
> 
> 时间：2013-04-25T09:58:40.753
> 
> 标签：regex

我有一个看起来像这样的字符串`600/-4.412/11`和一个看起来像这样的字符串`600/11`

```
[optional sign][float or integer]/[optional sign][float or integer]/[optional sign][float or integer]
[optional sign][float or integer]/[optional sign][float or integer] 
```

例子：

```
1) 600/-4.412/11
2) 600/11 
```

我需要找到一个匹配 1 的正则表达式和一个匹配 2 的正则表达式。但是两个表达式都不能选择/匹配另一个。凭借我卑微的正则表达式知识，我设法构建了这个表达式：

```
([-+]?[0-9]+(\.?[0-9]+)?\/?){3} 
```

这个表达式的问题在于它根据[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)匹配 1) 和 2) 。希望有人可以解决这个问题，或者至少告诉我为什么会这样，因为我希望我只需将 {3} 更改为 {2} 即可获得不同的匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:08:45.510

发生这种情况是因为您表达式中的几乎所有内容都已设为可选。唯一*必须*出现的是单个数字，因此您的表达式也将匹配`007`.

因此，解决方案是使表达式的某些部分成为强制性的。有很多方法可以解决这个问题。不完全符合您的描述但恕我直言您应该考虑的一个是

```
([-+]?[0-9]+(\.[0-9]+)?(?=/|$)) 
```

此表达式将匹配两种类型的输入，但您可以通过查看匹配数（2 或 3）来区分它们——这相当于在进行分支之前测试两个不同的表达式。

**更新：**

上面的表达式太自由了，因为它没有锚定在输入的开头和结尾。这是一个锚定的，因此如果输入包含任何虚假字符，则将不匹配：

```
^([-+]?[0-9]+(\.[0-9]+)?(/(?!$)|$)){2,3}$ 
```

分解它：

```
^                   start matching at the beginning
(                   match the following:
[-+]?                   optional sign
[0-9]+(\.[0-9]+)?       integer or float
(                       either
/(?!$)                      a slash that's not trailing
|                       or
$                           end of input
)                   
){2,3}              do this exactly two or three times
$                   and make sure there is no other input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:12:14.280

# 问题

问题是您的正则表达式允许重复的子模式，即`[-+]?[0-9]+(\.?[0-9]+)?\/?`匹配而不将其限制为由 . 分隔的每个数字部分`/`。

对于您问题中的此示例：`600/11`，第一个重复将匹配`600/`，第二个将匹配，`1`第三个将是最后一个`1`。

# 解决方案 1

### 错误的尝试

~~对于**验证**，您可以稍微更改它以使其按您想要的方式工作：~~

 ~~```
^([-+]?[0-9]+(\.[0-9]+)?(?:/|$)){3}$ 
```~~  ~~`(?:/|$)`强制数字（浮点数或整数）以 a 结尾`/`，或者它是字符串的结尾。这将有效地确保每次重复不会在相同的数字内匹配。

`^`在前面和`$`后面添加以确保字符串正好有 3 个数字。

***未划掉的文本仍然适用于正确的解决方案。***

### 正确的解决方案

但是，上面的正则表达式是**错误**的。它仍然允许无效输入，例如`1/2/3/`匹配（以 结尾`/`）。我们需要在最后添加一个额外的断言来防止上面的情况匹配：

```
^([-+]?[0-9]+(\.[0-9]+)?(?:/|$)){3}(?<!/)$ 
```

`(?<!/)`是一个*零宽度的负向后*查看，它检查字符串末尾之前的字符是否不是`/`.

# 解决方案 2

在这种情况下，在表单中编写正则表达式的错误更少`[number]([delimiter][number]){repeat}`，而不是摆弄表单`([number][delimiter/ending]){repeat}`。

下面的答案将严格**验证**输入：

```
^[-+]?[0-9]+(\.[0-9]+)?(?:/[-+]?[0-9]+(\.[0-9]+)?){2}$ 
```

以上是为了匹配恰好 3 个数字的情况。更改`2`为`1`（或删除`{2}`）以完全匹配 2 个数字。~~

# ios - 一个非常简单的应用程序的本地化.. 如何连接按钮？

> ID：16211768
> 
> 赞同：1
> 
> 时间：2013-04-25T09:58:47.913
> 
> 标签：ios, objective-c, xcode, cocoa-touch, localization

我有一个非常简单的应用程序，它只包含一个`PickerView`、、`UILocalNotification`和`UIAlertview`少于 8 个视图。我想要的是：

我有一个主视图，其中包含两个按钮，一个说**English**，另一个说**French**。

我的想法是：

当用户点击`English`它时，它会将他带到我现在拥有的项目，

但是，当用户点击时，`French`它会将他带到一个重复的视图，我只需手动更改并将其标签翻译成法语。

** 现在我的问题是 ** 如何翻译`PickerView`,`LocalNotification`和`AlertView`? 以及如何将法语按钮连接到这些翻译？

从我在 SO 中搜索和阅读的内容来看，我可以取出字符串并将它们列出到 Localizable.strings 但我仍然不知道如何让我的法语按钮询问这些字符串？另外，有没有更简单的方法？任何的想法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:14:15.683

请尝试这个进行本地化

[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

对于按钮使用这样的东西

```
 [self.yourButton setTitle:NSLocalizedString(@"YOUR_KEY", @"Comment") forState:UIControlStateNormal]; 
```

不要仅仅为了本地化而复制您的视图和视图控制器，考虑到两种语言具有相同的布局，并且唯一会改变的就是语言。因此，将英语字符串和法语字符串添加到您的项目中，并使用 NSLocalizedString 来获取这些值。

注意：NSLocalizedString 仅适用于设备语言，因此如果您想手动更改应用程序的语言，请尝试[此](http://aggressive-mediocrity.blogspot.in/2010/03/custom-localization-system-for-your.html)操作。我在我的许多项目中都使用了 AMLocalizedString，它们运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:53:23.110

嗨，因为您想让它仅在应用程序基础而不是设备基础上本地化，因此 NSLocalisedString 将无法工作，您必须对其进行管理，因此您必须获取两个不同的文件，并且您必须根据所选语言获取字符串值。与 LocalisedString 在本地化中的工作方式类似，为语言创建了多个 .strings 文件，它的工作方式是选择设备的默认语言并显示本地化文件中的文本。

# php - Javascript Yii：会话脚本

> ID：16211773
> 
> 赞同：0
> 
> 时间：2013-04-25T09:59:04.227
> 
> 标签：php, image, session, frameworks, yii

好的，所以基本上每当有人进入网站时，图标都是相同的颜色（白色）我希望这段代码执行以下操作：每当有人转到另一个页面（通过单击其他图标之一）时他要去的页面应该有不同的颜色（蓝色，这是通过加载另一个图像来完成的）但只有那个页面，这也应该在他刷新页面时保持不变？这是我为单个图标提供的当前代码，它还没有工作，我不确定出了什么问题..

```
<?php Yii::app()->session['/home'] = '1';
  $home = Yii::app()->session['/home'];
  //echo Yii::app()->session['home']; // Prints "value"
  if (!empty($home)){ ?>
        <a href="<?php echo $this->createUrl("/admin/survey/sa/index")."/home"; ?>">
        <img src='<?php echo $sImageURL;?>home.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/></a>
    <?php
    } 
    else{?>
        <a href="<?php echo $this->createUrl("/admin/survey/sa/index")."/home1"  ?>">
        <img src='<?php echo $sImageURL;?>home1.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/></a>
    <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:20:01.700

我同意伊沃的观点；我认为最好使用 CSS 类来做到这一点。您将让默认 CSS 类具有 home1.png 的背景图像，而蓝色类具有 home.png 的背景图像。如果我这样做，我也会使用 CSS 精灵。

但是，使用你所拥有的。这是在 Yii 中执行此操作的一种方法：

```
<?php
  // Get the current URI
  $currentUri = Yii::app()->request->requestUri;

  if($currentUri == '/admin/survey/sa/index'){

?>
  <a href="<?php echo $this->createUrl("/admin/survey/sa/index")."/home1"  ?>">
    <img src='<?php echo $sImageURL;?>home1.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/>
  </a>

<?php

  }else{

?>
  <a href="<?php echo $this->createUrl("/admin/survey/sa/index")."/home1"  ?>">
    <img src='<?php echo $sImageURL;?>home1.png' alt='<?php $clang->eT("Default administration page");?>' width='<?php echo $iconsize;?>' height='<?php echo $iconsize;?>'/>
  </a>

<?php

  }
?> 
```

对于其他图标，您可以重用该`$currentUri`变量。您无需设置任何会话。当您刷新页面时，图标仍将保持彩色。

# sql - SQL 约束，一个列值不能大于另一个表中的另一个值

> ID：16211774
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:04.380
> 
> 标签：sql, db2, constraints, check-constraint

这可能不是一个很好的问题，因为它将业务逻辑与数据库结构混合在一起，但这不是我的决定：

是否可以定义一个约束来推断一列（表 A，列 X）的值不能大于通过外键引用的另一列（表 B，列 Y）的值：

```
TABLE_A
    ID (Primary Key)
    X (int value)
TABLE_B
    A_ID (Foreign Key to TABLE_A)
    Y (int value) 
```

即我想对 Y, Y < L 的所有值强制执行，其中 L 是来自 X 的值，其中 TABLE_B.A_ID == TABLE_A.ID

我正在使用 DB2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:29:51.840

> 是否可以定义一个约束来推断一列（表 A，列 X）的值不能大于通过外键引用的另一列（表 B，列 Y）的值：

不，这需要在 CHECK 约束中使用 SELECT 语句，而 DB2 不支持。如果它*确实*支持以这种方式使用 SELECT 语句，它看起来像这样。

```
ALTER TABLE_B
ADD CONSTRAINT TABLE_B_Y_LT_L
CHECK (Y < (SELECT X FROM TABLE_A WHERE TABLE_A.ID = TABLE_B.A_ID)); 
```

SELECT 语句将返回单个值，因为 TABLE_A.ID 是唯一的。但是，就像我说的，DB2 不支持检查约束中的 SELECT 语句。我认为当前的任何 dbms 都没有。

**解决方法**

有几种解决方法。首先，您可以编写一个触发器。其次，您可以在两个表中存储列“X”，并使用外键约束和检查约束来实现您的要求。

```
-- Since "id" is unique, the combination of "id" and "x" is also unique. 
-- Declaring "unique (id, x)" lets these two columns be the target of a 
-- foreign key reference.
--
create table table_a (
    id integer primary key,
    x integer not null,
    unique (id, x)
);

-- The foreign key references both columns in "table_a". The check constraint
-- indirectly guarantees that y < table_a.x.
--
create table table_b (
    a_id integer not null,
    a_x integer not null,
    y integer not null,
    primary key (a_id, a_x, y),
    foreign key (a_id, a_x) references table_a (id, x),
    check (y < a_x)
); 
```

这是标准 SQL。它应该可以在任何当前的 SQL dbms 中工作。

# android - Android：在 Google Keep 中显示类似布局的卡片

> ID：16211777
> 
> 赞同：16
> 
> 时间：2013-04-25T09:59:26.810
> 
> 标签：android, android-layout, gridview

我想知道如何在网格视图中显示我的笔记、清单、图像的快照。创建网格视图没有问题，但创建它的预览是我现在面临的挑战，因为我需要根据创建时间向网格添加不同类型的视图（文本、清单、图像视图）。仅适用于图像或文本等单一类型的视图。

或者换句话说。如何将不同的视图动态添加到 GridView 适配器？

感谢所有或任何帮助。

谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/80BHe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:12:38.050

他们肯定不会将 GridView 用于 google Keep - 但可能仍然是[适配器](https://developer.android.com/reference/android/widget/Adapter.html)。

要在适配器中使用不同的视图，您可以使用不同的视图类型：

1.  覆盖[`getViewTypeCount()`](https://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)以返回您支持的视图类型的数量。
2.  [`getItemViewType(int position)`](https://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)为此特定项目返回适当的类型。
3.  在 中创建正确的视图[`getView(int position, View convertView, ViewGroup parent)`](https://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)。

请记住，回收规则、ViewHolder 等仍然适用。对于多种类型，回收只发生在正确的类型上。

[Marcus Körner](https://plus.google.com/115465922685935745669/posts/RUTycHWdppG) [最近在 G+ 上分享了 Jake Wharton 的一个要点，](https://gist.github.com/JakeWharton/5423616)这可能很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T17:06:58.863

谷歌很可能正在使用类似于[GridLayout](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)的东西，如果不是实际使用 GridLayout 的话。

很有可能布局也是以编程方式创建的，以允许小部件根据它们各自显示的内容具有不同的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T08:16:39.960

```
recyclerView= (RecyclerView) findViewById(R.id.recycler);
recyclerView.setLayoutManager(new                  
StaggeredGridLayoutManager(2,StaggeredGridLayoutManager.VERTICAL));

        initData();
        MasonryAdapter adapter=new MasonryAdapter(productList);
        recyclerView.setAdapter(adapter);

        SpacesItemDecoration decoration=new SpacesItemDecoration(16);
        recyclerView.addItemDecoration(decoration); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-11T08:03:36.720

看看这个[带有 stagged 的​​回收视图](https://github.com/codepath/android_guides/wiki/Using-the-RecyclerView)

这个管理使你需要的所有东西 StaggeredGridLayoutManager 或查看[RecyclerView 中的这个 sorce Heterogenous Layouts](https://github.com/codepath/android_guides/wiki/Heterogenous-Layouts-inside-RecyclerView)

# java - 如何从 java 程序重命名 jar 文件？或从命令提示符中的任何其他方式？

> ID：16211778
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:27.650
> 
> 标签：java

我正在开发从 Web 服务器下载某些 jar 的应用程序，例如 RMTcmark.jar、RMProduct.jar、RMLatency.jar，所有 RM 命名的 jar。这些 jar 存储在某个目录中。但是这些 RM 命名的文件对我不适用，

我只想要文件名，即 RM 应该从该文件的名称中删除，例如，如果文件名是 RMTcmark.jar ---->Tcmark.jar RMProduct.jar---->Product.jar，以这种方式

java有没有办法重命名这样的jar文件？

另外，我的第二个问题是，有类似的文件名为 RTPostMark.jar，RTLatency 正在从 Web 服务器下载，大小均为 1 kb，

我希望所有这些 RT 命名的 jar 都应该从它们存储的目录中删除。

如果不能从 java,cn 我们从命令提示符来做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:06:58.900

您可以使用 java 重命名文件

参考下面的链接

[http://www.mkyong.com/java/how-to-rename-file-in-java/](http://www.mkyong.com/java/how-to-rename-file-in-java/)

[使用 Java 重命名文件](https://stackoverflow.com/questions/1158777/renaming-a-file-using-java)

您应该使用的逻辑是解析文件，如果文件以名称“RM”开头，那么对于新文件名，您必须排除名称 RM，然后按照链接中的建议创建文件对象

# delphi - Delphi无法识别俄语字符

> ID：16211782
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:34.060
> 
> 标签：delphi, delphi-7, cyrillic

我的电脑上安装了英文版的 Windows XP 操作系统。例如，如果我尝试使用俄语输入语言为表格提供用俄语编写的标题，那么我看到的唯一内容就是那些在正确的字符编码出现问题时经常看到的难以理解的符号。有没有办法让 Delphi 识别俄语字符？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T17:15:20.010

您可以将用于不提供区域设置信息（控制面板 > 区域设置 > 高级）的程序的默认代码页更改为您的区域设置（俄语）。

至于 SQL，这是一个单独的问题，可能由 SQL DB 设置解决。

PS 我建议你也迁移到 Unicode 版本的 Delphi (XE) 和 SQL。

# android - 如何将基本网格添加到 GoogleMap Api v2

> ID：16211783
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:37.263
> 
> 标签：android, android-maps-v2

我想将以前在地图上的基本网**格**添加到我的 GoogleMap 中。我阅读了文档但没有找到任何可以帮助的东西，也许**TileOverlay**或**GroundOverlay**可以解决问题，但我没有找到任何示例或教程，甚至在官方示例中也没有。

有人可以建议我一些可行的方法吗？

**编辑 ：**

是的，我想要这样的网格线：

![在此处输入图像描述](https://i.stack.imgur.com/3opOA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:18:27.093

好像我有一个完全可以做到这一点的代码。我只将它用于调试，但这里是：[DebugHelper.java](http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions/src/pl/mg6/android/maps/extensions/impl/DebugHelper.java)。

![演示](https://i.stack.imgur.com/G0nRs.jpg)

一些注意事项：

*   您还必须复制[SphericalMercator.java](http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions/src/pl/mg6/android/maps/extensions/utils/SphericalMercator.java)
*   更改为`IGoogleMap`原始`GoogleMap`和`IProjection``Projection`
*   `clusterSize`参数以度为单位，因此您必须根据缩放进行更改
*   最后：打电话`drawDebugGrid`。`onCameraChange`

如果你想看到它的实际效果，你可以运行[Android Maps Extensions](http://code.google.com/p/android-maps-extensions/)的演示。要查看网格，您需要进行的唯一更改是在 GridClusteringStrategy.java 的第一行之一[上将 DEBUG_GRID](http://code.google.com/p/android-maps-extensions/source/browse/android-maps-extensions/src/pl/mg6/android/maps/extensions/impl/GridClusteringStrategy.java)设置为 true 。

# c# - 只显示图片的一小部分

> ID：16211784
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:37.637
> 
> 标签：c#, wpf

我编写了一个由服务器和客户端组成的程序。服务器制作截图桌面，客户端接收截图并显示在表单上。数据传输有问题，我只看到一个小条。我在服务器上发送图像之前检查过。但是，客户端收到错误的图像。怎么了？XAML：

```
<Window x:Class="TestTCP.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TestTCP" Height="350" Width="525">
<Grid>
    <Image x:Name="img1" Margin="0"/>

</Grid>
</Window> 
```

代码 C#：

```
 public partial class MainWindow : Window
  {
    public MainWindow()
    {
        InitializeComponent();

        Task rec = new Task(WaitClientQuery);
        rec.Start();

        Task tk = new Task(Send);
        tk.Start();
    }

    private void Send()//server part. take screen and send image
    {
        Bitmap temp = CaptureScreen(true);
        MemoryStream ms3 = new MemoryStream();
        BitmapImage image = new BitmapImage();
        byte[] img_byte;
        try
        {
            ((System.Drawing.Bitmap)temp).Save(ms3, System.Drawing.Imaging.ImageFormat.Bmp);
            image.BeginInit();
            ms3.Seek(0, SeekOrigin.Begin);
            image.StreamSource = ms3;
            image.EndInit();

            JpegBitmapEncoder encoder = new JpegBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(image));
            using (MemoryStream ms = new MemoryStream())
            {
                encoder.Save(ms);
                img_byte = ms.ToArray();
            }

            try
            {

                TcpClient client = new TcpClient("192.168.1.64", 4444);
                NetworkStream netstream = client.GetStream();
                netstream.Write(img_byte, 0, img_byte.Length);
                netstream.Close();
                client.Close();
            }
            catch (Exception)
            {

            }
        }
        catch (Exception ee)
        {

        }
    }

    [StructLayout(LayoutKind.Sequential)]
    struct CURSORINFO
    {
        public Int32 cbSize;
        public Int32 flags;
        public IntPtr hCursor;
        public POINTAPI ptScreenPos;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct POINTAPI
    {
        public int x;
        public int y;
    }

    [DllImport("user32.dll")]
    static extern bool GetCursorInfo(out CURSORINFO pci);

    [DllImport("user32.dll")]
    static extern bool DrawIcon(IntPtr hDC, int X, int Y, IntPtr hIcon);

    const Int32 CURSOR_SHOWING = 0x00000001;

    public static Bitmap CaptureScreen(bool CaptureMouse)
    {
        Bitmap result = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
       try
        {
            using (Graphics g = Graphics.FromImage(result))
            {
                g.CopyFromScreen(0, 0, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);

                if (CaptureMouse)
                {
                    CURSORINFO pci;
                    pci.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(typeof(CURSORINFO));

                    if (GetCursorInfo(out pci))
                    {
                        if (pci.flags == CURSOR_SHOWING)
                        {
                            DrawIcon(g.GetHdc(), pci.ptScreenPos.x, pci.ptScreenPos.y, pci.hCursor);
                            g.ReleaseHdc();
                        }
                    }
                }
            }
        }
        catch
        {
            result = null;
        }

        return result;
    }

    void WaitClientQuery()//receive data(client)
    {
        try
        {
            IPAddress ip ;
            IPAddress.TryParse("192.168.1.64", out ip);
            TcpListener listener = new TcpListener(ip, 4444);
            listener.Start(); 
            while (true)
            {
                TcpClient client = listener.AcceptTcpClient();
                Thread thread = new Thread(new ParameterizedThreadStart(ReadMessage));
                thread.IsBackground = true;
                thread.Start(client);
            }
        }
        catch (Exception ex)
        {
        }
    }

    void ReadMessage(object obj)
    {
        try
        {
            TcpClient client = (TcpClient)obj;
            NetworkStream netstream = client.GetStream();
            byte[] arr = new byte[client.ReceiveBufferSize ];
            int len = netstream.Read(arr, 0, client.ReceiveBufferSize);
            if (len > 0)
            {
                try
                {

                    Action act = delegate
                                     {
                                            MemoryStream strmImg = new MemoryStream(arr);
                                            BitmapImage myBitmapImage = new BitmapImage();
                                            myBitmapImage.BeginInit();
                                            myBitmapImage.StreamSource = strmImg;
                                            myBitmapImage.EndInit();
                                            img1.Source = myBitmapImage;
                                     };
                    this.Dispatcher.BeginInvoke(act);

                }
                catch (Exception ex)
                {
                    string message = ex.Message;
                }

            }
            netstream.Close();
            client.Close(); 
        }
        catch (Exception ex)
        {
        }
    }

} 
```

PS Result，编译后的屏幕程序： [点击查看](http://s24.postimg.org/qj2y8lsph/222.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:09:55.997

I expect `client.ReceiveBufferSize` on client side has wrong information I would recomend to read data in loop.

```
if(netstream.CanRead)
{
                byte[] myReadBuffer = new byte[1024];
                int numberOfBytesRead = 0;

                do
        {
                     numberOfBytesRead = netstream.Read(myReadBuffer, 0, myReadBuffer.Length);                              
                }
                while(netstream.DataAvailable);
} 
```

and save data into the List or memorystream Or may be easier way, before your server send all data, send the size

```
netstream.Write(img_byte.Length); //does not work with NetworkStream
netstream.Write(img_byte, 0, img_byte.Length); 
```

and client can read it first to allocate appropriate buffer. To send and receive particular data type I would recomend build `BinaryWriter` from your `NetworkStream`

```
using (BinaryWriter writer = new BinaryWriter(netstream)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:13:08.437

使用默认值的主要原因`client.ReceiveBufferSize`是 8192 字节，因此客户端将无法接收到足够的从服务器传输的图像。在我的代码中，我想在客户端看到正确接收图像的大小，所以我`BinaryWriter`用来传输图像的长度。从客户端我习惯于`BinaryReader`准确读取图像的字节数和大小以节省带宽。希望这有帮助

在`Send`方法：

```
TcpClient client = new TcpClient("192.168.1.64", 4444);
 using (NetworkStream netstream = client.GetStream())
 {
     using (BinaryWriter bw = new BinaryWriter(netstream))
     {
        bw.Write(img_byte.Length);
        bw.Write(img_byte, 0, img_byte.Length);
     }

     client.Close();
 } 
```

在`ReadMessage(object obj)`

```
private void ReadMessage(object obj)
    {
        try
        {
            byte[] arr = null;
            TcpClient client = (TcpClient) obj;
            using (NetworkStream netstream = client.GetStream())
            {
                using (BinaryReader br = new BinaryReader(netstream))
                {
                    var arrLen = new byte[4];
                    br.Read(arrLen, 0, 4);
                    int len = BitConverter.ToInt32(arrLen, 0);
                    if (len > 0)
                    {
                        arr = new byte[len];

                        int read = 0;
                        while (read != len)
                        {
                            read += br.Read(arr, read, arr.Length - read);
                        }
                    }
                }
            }

            if (arr != null && arr.Length > 0)
            {
                try
                {

                    Action act = delegate
                        {
                            MemoryStream strmImg = new MemoryStream(arr);
                            BitmapImage myBitmapImage = new BitmapImage();
                            myBitmapImage.BeginInit();
                            myBitmapImage.StreamSource = strmImg;
                            myBitmapImage.EndInit();
                            img1.Source = myBitmapImage;
                        };
                    this.Dispatcher.BeginInvoke(act);

                }
                catch (Exception ex)
                {
                    string message = ex.Message;
                }

            }

            client.Close();
        }
        catch (Exception ex)
        {
        }
    } 
```

# sql - 无法在变量中获取存储过程的结果？

> ID：16211786
> 
> 赞同：1
> 
> 时间：2013-04-25T09:59:51.153
> 
> 标签：sql, sql-server, sql-server-2008, variables

我有一个存储过程的层次结构，如下所示：

```
1
 2
  3 
```

现在我正在做的是：首先我展示的是最低级别的第 3 级 sp。

```
CREATE proc [dbo].[proc_tblUserScheduleNewUpdateOnly] 
(      
@Scheduleid bigint=258,                            
@Contactid uniqueidentifier='EDE3E474-02CA-49C7-86DD-AA97794ECF8A',                                     
@ScheduleDate datetime= '2012-07-16 00:00:00.000',                                    
@StartTime varchar(20)='12:03:00.0000000',                                    
@EndTime varchar(20)='15:00:00.0000000',                                    
@Location bigint=8,                                    
@Area bigint=7,                                    
@Room bigint=9,                        
@Enddate datetime='2012-07-16 00:00:00.000',                    
@CurrentTime Datetime='2012-07-16 12:00:35.900',      
@ModifiedBy uniqueidentifier='0BF84A77-FAC2-44E5-AF9B-39740415DBD2',                  
@schedulefileidNew bigint=''         
)      
as      
Declare @schedulefileid bigint      
if @schedulefileidNew=0                
 begin                
   set @schedulefileid=null                
 end                
else                
 begin                
set @schedulefileid=@schedulefileidNew                
end       
update tblUserScheduleNew   set Contactid=@Contactid,      
ScheduleDate =@ScheduleDate,      
StartTime = @StartTime,      
EndTime =@EndTime,      
Location =@Location,      
Area=@Area,      
Room =@Room,      
LastModifiedDate=@CurrentTime ,EndDate=@Enddate,      
ModifiedBy=@ModifiedBy,      
ScheduleFileId=@schedulefileid      
where ScheduleId=@Scheduleid and IsDeleted=0 and isActive=1      
select 1 
```

现在是第二级：

```
CREATE Proc [dbo].[proc_tblUserScheduleNewFutureUpdate]
(          
@StartDatePassed datetime='8/2/2012 12:00:00 AM',       
@EndDatePassed datetime='8/2/2012 12:00:00 AM', --='2012-07-11 00:00:00.000',          
@StartTimePassed varchar(20)='13:00:00',--='02:00:00.0000000',          
@EndTimePassed varchar(20)='21:00:00',--='03:00:00.0000000',          
@CurrentDateTime Datetime ='8/1/2012 5:50:31 AM', --='2012-07-11 02:07:35.900'          
@Scheduleid bigint=0x0000000000000166,          
@Contactid uniqueidentifier='77680636-bc4b-4489-9cec-3bc000ffe773',          
@Location bigint=11,          
@Area bigint=10,          
@Room bigint=11,          
@ModifiedBy uniqueidentifier='acf7961c-4111-49ad-a66a-ce7f9ce131bd',          
@schedulefileidNew bigint=null         
)          
as  
declare @ResultForInsertUpdate varchar(200);  
if CONVERT(date,@StartDatePassed,101)>CONVERT(date,@CurrentDateTime,101) and     
CONVERT(date,@EndDatePassed,101)>CONVERT(date,@CurrentDateTime,101) and
 CONVERT(date,@EndDatePassed,101)>CONVERT(date,@StartDatePassed,101)           
  begin -- it will run when the Start date and end date passed are greater than Current date and EndDate is greater than Start date.          
Print 'Update'          
exec @ResultForInsertUpdate =  dbo.proc_tblUserScheduleNewUpdateOnly @Scheduleid,@Contactid,@StartDatePassed,@StartTimePassed,@EndTimePassed,@Location,@Area,@Room,@EndDatePassed,@CurrentDateTime,@ModifiedBy,@schedulefileidNew          
select @ResultForInsertUpdate;  
  end          
else
begin
select 2
end 
```

现在是第三级和最后一级

```
Alter Proc proc_tblUserScheduleNewUpdateWithAllRoomsOption
(
@StartDatePassed datetime='2013-04-29 00:00:00.000',
@EndDatePassed datetime='2013-04-29 00:00:00.000',
@StartTimePassed varchar(20)='15:00:00',
@EndTimePassed varchar(20)='20:00:00',
@CurrentDateTime Datetime ='2013-04-25 00:00:00.000',
@Scheduleid bigint=1,
@Contactid uniqueidentifier='FD3E0DDF-8B91-493F-94DF-B8280AC33BC0',
@Location bigint=17,
@Area bigint=0,
@Room bigint=0,
@ModifiedBy uniqueidentifier='ACF7961C-4111-49AD-A66A-CE7F9CE131BD',
@schedulefileidNew bigint=null,
@OldStartDate Datetime='2013-04-26 00:00:00.000',
@OldEndDate DateTime='2013-04-26 00:00:00.000',
@OldStartTime varchar(20)='11:11:11.0000000',
@OldEndTime varchar(20)='22:22:22.0000000',
@OldContactid uniqueidentifier='DA101C1D-45A1-4F9A-B19B-4E88DDE01B10',
@OldLocation bigint=18,
@OldArea bigint=17,
@OldRoom bigint=22
)
as
-- declare variables Starts here       
declare @row_count int;        
DECLARE @intFlag INT=0;      
declare @locationIdForLoop bigint  ;      
declare @AreaIdForLoop bigint  ;      
declare @RoomIdForLoop bigint  ;   
DECLARE @ResultForInsertUpdate INT      
set @ResultForInsertUpdate=1;
-- declare tempraroy table to store location, Area and rooms Starts here      
CREATE TABLE  #tempTable (      
RowNum int,        
LocationId bigint,
AreaId bigint,
RoomId bigint
)
-- declare tempraroy table to store location, Area and rooms Ends here
if @Area=0 and @Room=0
begin
insert into #tempTable (RowNum,LocationId,AreaId,RoomId) (select ROW_NUMBER() OVER 
(ORDER BY LocationId desc) RowNum, LocationId,AreaId,RoomId from
tblroomnew where areaid in(select Areaid from tblareanew where locationid=@Location))
set @row_count=(select count(*) from #tempTable)
SET @intFlag = 1
WHILE (@intFlag <=@row_count)
BEGIN
-- Do what ever you want to do here
set @locationIdForLoop=(select locationid from #tempTable where RowNum=@intFlag)
set @AreaIdForLoop=(select areaid from #tempTable where RowNum=@intFlag)
set @RoomIdForLoop=(select roomid from #tempTable where RowNum=@intFlag)
if @ResultForInsertUpdate=1
begin
if exists(select 1 from tbluserschedulenew where 
convert(datetime,ScheduleDate,101)=convert(datetime,@OldStartDate,101) and
Convert(datetime,EndDate,101)=convert(datetime,@OldEndDate,101) and 
convert(Time,StartTime,108)=convert(Time,@OldStartTime,108) and
convert(Time,EndTime,108) =convert(Time,@OldEndTime,108) and contactid=@OldContactid 
and
Location=@OldLocation and Area=@OldArea and Room=@OldRoom )
begin
Print 'Update First record'
exec @ResultForInsertUpdate = proc_tblUserScheduleNewFutureUpdate @StartDatePassed,@EndDatePassed,@StartTimePassed,@EndTimePassed,@CurrentDateTime,@Scheduleid,@Contactid,
@locationIdForLoop,@AreaIdForLoop,@RoomIdForLoop,@ModifiedBy,@schedulefileidNew
--set @ResultForInsertUpdate=1
print @ResultForInsertUpdate
--select @ResultForInsertUpdate
end
else
begin
print 'insert karna hai record'
exec  proc_tblUserScheduleNewLatestInsert @Contactid,@StartDatePassed,@StartTimePassed,@EndTimePassed,
@locationIdForLoop,@AreaIdForLoop,@RoomIdForLoop, @EndDatePassed,@ModifiedBy,0,@CurrentDateTime
--print @ResultForInsertUpdate
end
end
else
begin
select @ResultForInsertUpdate
end
SET @intFlag = @intFlag + 1
END
end
else
begin
if @Area!=0 and @Room=0
begin
insert into #tempTable (RowNum,LocationId,AreaId,RoomId) (select ROW_NUMBER() OVER (ORDER BY LocationId desc) RowNum, LocationId,AreaId,RoomId from
tblroomnew where areaid =@Area)
set @row_count=(select count(*) from #tempTable)
end
else
begin
print 'chalan do jo chal reha'
exec proc_tblUserScheduleNewFutureUpdate @StartDatePassed,@EndDatePassed,@StartTimePassed,@EndTimePassed,@CurrentDateTime,@Scheduleid,@Contactid,
 @location,@Area,@Room,@ModifiedBy,@schedulefileidNew
--print 'simple update'
end
end 
```

现在我的问题是什么：

我选择 1 作为第三级的结果，它将存储在第二级和第三级的“ **@ResultForInsertUpdate ”中。**

我在@ResultForInsertUpdate 中得到 0 我不知道为什么，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:57:41.587

可能这对您有帮助-

**1.**

```
CREATE PROCEDURE [dbo].[proc_tblUserScheduleNewUpdateOnly]
(
      @Scheduleid BIGINT
    , @Contactid UNIQUEIDENTIFIER
    , @ScheduleDate DATETIME
    , @StartTime VARCHAR(20)
    , @EndTime VARCHAR(20)
    , @Location BIGINT
    , @Area BIGINT
    , @Room BIGINT
    , @Enddate DATETIME
    , @CurrentTime DATETIME
    , @ModifiedBy UNIQUEIDENTIFIER
    , @schedulefileidNew BIGINT
)
AS BEGIN

    UPDATE dbo.tblUserScheduleNew
    SET     
          Contactid = @Contactid 
        , ScheduleDate = @ScheduleDate 
        , StartTime = @StartTime 
        , EndTime = @EndTime 
        , location = @Location 
        , Area = @Area 
        , Room = @Room 
        , LastModifiedDate = @CurrentTime 
        , EndDate = @Enddate 
        , ModifiedBy = @ModifiedBy 
        , ScheduleFileId = NULLIF(@schedulefileidNew, 0)
    WHERE ScheduleID = @Scheduleid 
        AND IsDeleted = 0
        AND isActive = 1

    RETURN 1

END 
```

**2.**

```
CREATE PROCEDURE [dbo].[proc_tblUserScheduleNewFutureUpdate] 
(
      @StartDatePassed DATETIME
    , @EndDatePassed DATETIME
    , @StartTimePassed VARCHAR(20)
    , @EndTimePassed VARCHAR(20)
    , @CurrentDateTime DATETIME
    , @Scheduleid BIGINT
    , @Contactid UNIQUEIDENTIFIER
    , @Location BIGINT
    , @Area BIGINT
    , @Room BIGINT
    , @ModifiedBy UNIQUEIDENTIFIER
    , @schedulefileidNew BIGINT
)
AS BEGIN

    IF 
          CONVERT(DATE, @StartDatePassed, 101) > CONVERT(DATE, @CurrentDateTime, 101) 
        AND
          CONVERT(DATE, @EndDatePassed, 101) > CONVERT(DATE, @CurrentDateTime, 101) 
        AND
          CONVERT(DATE, @EndDatePassed, 101) > CONVERT(DATE, @StartDatePassed, 101)

    BEGIN    

        DECLARE @ResultForInsertUpdate VARCHAR(200)

        EXEC @ResultForInsertUpdate = dbo.proc_tblUserScheduleNewUpdateOnly 
                @Scheduleid
            ,   @Contactid
            ,   @StartDatePassed
            ,   @StartTimePassed
            ,   @EndTimePassed
            ,   @Location
            ,   @Area
            ,   @Room
            ,   @EndDatePassed
            ,   @CurrentDateTime
            ,   @ModifiedBy
            ,   @schedulefileidNew

        RETURN @ResultForInsertUpdate

    END
    ELSE BEGIN

        RETURN 2

    END

END 
```

**3.**

```
CREATE PROCEDURE proc_tblUserScheduleNewUpdateWithAllRoomsOption 
(
    @StartDatePassed DATETIME,
    @EndDatePassed DATETIME,
    @StartTimePassed VARCHAR(20),
    @EndTimePassed VARCHAR(20),
    @CurrentDateTime DATETIME,
    @Scheduleid BIGINT,
    @Contactid UNIQUEIDENTIFIER,
    @Location BIGINT,
    @Area BIGINT,
    @Room BIGINT,
    @ModifiedBy UNIQUEIDENTIFIER,
    @schedulefileidNew BIGINT,
    @OldStartDate DATETIME,
    @OldEndDate DATETIME,
    @OldStartTime VARCHAR(20),
    @OldEndTime VARCHAR(20),
    @OldContactid UNIQUEIDENTIFIER,
    @OldLocation BIGINT,
    @OldArea BIGINT,
    @OldRoom BIGINT
)
AS BEGIN

    DECLARE 
          @row_count INT
        , @intFlag INT = 0
        , @locationIdForLoop BIGINT
        , @AreaIdForLoop BIGINT
        , @RoomIdForLoop BIGINT
        , @ResultForInsertUpdate INT = 1

    CREATE TABLE #tempTable (RowNum INT, LocationId BIGINT, AreaId BIGINT, RoomId BIGINT)

    IF @Area = 0 AND @Room = 0 BEGIN

        INSERT INTO #tempTable (RowNum, LocationId, AreaId, RoomId)
        SELECT
                ROW_NUMBER() OVER (ORDER BY LocationId DESC) RowNum
            ,   LocationId
            ,   AreaId
            ,   RoomId
        FROM dbo.tblroomnew a
        WHERE a.AreaId IN (
            SELECT b.AreaId
            FROM dbo.tblareanew b
            WHERE b.LocationId = @Location
        )

        SELECT 
              @row_count = COUNT(1) 
            , @intFlag = 1
        FROM #tempTable

        WHILE (@intFlag <= @row_count) BEGIN

            SELECT 
                  @locationIdForLoop = LocationId
                , @AreaIdForLoop = AreaId
                , @RoomIdForLoop = RoomId
            FROM #tempTable
            WHERE RowNum=@intFlag

            IF @ResultForInsertUpdate = 1 BEGIN
                IF EXISTS (
                    SELECT 1
                    FROM dbo.tbluserschedulenew
                    WHERE 
                        CONVERT(DATETIME,ScheduleDate,101)=CONVERT(DATETIME,@OldStartDate,101) AND
                        CONVERT(DATETIME,EndDate,101)=CONVERT(DATETIME,@OldEndDate,101) AND
                        CONVERT(TIME,StartTime,108)=CONVERT(TIME,@OldStartTime,108) AND
                        CONVERT(TIME,EndTime,108)=CONVERT(TIME,@OldEndTime,108) AND contactid=@OldContactid
                        AND location=@OldLocation 
                        AND Area=@OldArea 
                        AND Room=@OldRoom
                )
                BEGIN

                    PRINT 'Update First record'
                    EXEC @ResultForInsertUpdate=proc_tblUserScheduleNewFutureUpdate 
                            @StartDatePassed
                        ,   @EndDatePassed
                        ,   @StartTimePassed
                        ,   @EndTimePassed
                        ,   @CurrentDateTime
                        ,   @Scheduleid
                        ,   @Contactid
                        ,   @locationIdForLoop
                        ,   @AreaIdForLoop
                        ,   @RoomIdForLoop
                        ,   @ModifiedBy
                        ,   @schedulefileidNew

                    RETURN @ResultForInsertUpdate

                END
                ELSE
                BEGIN

                    EXEC proc_tblUserScheduleNewLatestInsert    
                            @Contactid
                        ,   @StartDatePassed
                        ,   @StartTimePassed
                        ,   @EndTimePassed
                        ,   @locationIdForLoop
                        ,   @AreaIdForLoop
                        ,   @RoomIdForLoop
                        ,   @EndDatePassed
                        ,   @ModifiedBy
                        ,   0
                        ,   @CurrentDateTime

                END
            END
            ELSE BEGIN

                RETURN @ResultForInsertUpdate

            END
            SELECT @intFlag = @intFlag + 1
        END
    END
    ELSE
    BEGIN
        IF @Area != 0 AND @Room = 0 BEGIN

            INSERT INTO #tempTable (RowNum, LocationId, AreaId, RoomId)
            SELECT
                    ROW_NUMBER() OVER (ORDER BY LocationId DESC) RowNum
                ,   LocationId
                ,   AreaId
                ,   RoomId
            FROM dbo.tblroomnew a

            SELECT @row_count = COUNT(1)
            FROM #tempTable

        END
        ELSE BEGIN

            EXEC dbo.proc_tblUserScheduleNewFutureUpdate 
                        @StartDatePassed
                    ,   @EndDatePassed
                    ,   @StartTimePassed
                    ,   @EndTimePassed
                    ,   @CurrentDateTime
                    ,   @Scheduleid
                    ,   @Contactid
                    ,   @location
                    ,   @Area
                    ,   @Room
                    ,   @ModifiedBy
                    ,   @schedulefileidNew
        END

    END

END 
```

# mysql - 通过单个表中的单个列获取三列的最小值

> ID：16211789
> 
> 赞同：2
> 
> 时间：2013-04-25T09:59:56.290
> 
> 标签：mysql

我有一个表，我的表结构是这样的：

```
unique_id     vendor_name      price1     price2     price3    code 

1             Vendor 1         0.0012     0.0014     0.0054     125
2             Vendor 2         0.0015     0.0016     0.0050     125
3             Vendor 3         0.0011     0.0019     0.0088     125
4             Vendor 1         0.0025     0.0024     0.0034     126
5             Vendor 2         0.0043     0.0019     0.0065     126
6             Vendor 3         0.0019     0.0085     0.0082     126 
```

我必须按代码获取每个价格列组的最低价格。我的预期输出如下：

```
Code          price1          price2      price3     vendor for price1      vendor for price 2      vendor for price 3

125           0.0011          0.0014      0.0050     Vendor3                Vendor1                 Vendor 2 
126           0.0019          0.0019      0.0034     Vendor3                Vendor2                 Vendor 1 
```

那么获取这样的记录的 MySQL 查询是什么？而且我还必须进行查询以从表中获取最大值和第二高值，并且可能有任意数量的带有单个代码的行。

我的数据在这个[SQL Fiddle](http://sqlfiddle.com/#!2/176c29/1)中。

在第二高值的情况下，输出应为：

```
Code          price1          price2      price3     vendor for price1      vendor for price 2      vendor for price 3
125           0.0012          0.0016      0.0054     Vendor1                Vendor2                 Vendor 1 
126           0.0025          0.0024      0.0065     Vendor1                Vendor1                 Vendor 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:23:54.660

这是你如何做到的

```
SELECT
  vender_prices.code,
  l.price1,
  r.price2,
  m.price3,
  l.vendor_name `Vender1`,
  r.vendor_name `Vender2`,
  m.vendor_name `Vender3`
FROM vender_prices
  LEFT JOIN (SELECT
               code, vendor_name, vender_prices.price1
             FROM vender_prices
               INNER JOIN (SELECT MIN(price1) AS price1 FROM vender_prices GROUP BY vender_prices.code) AS l
                 ON l.price1 = vender_prices.price1
             GROUP BY vender_prices.code
             ) as l ON vender_prices.code = l.code
  LEFT JOIN (SELECT
               code, vendor_name, vender_prices.price2
             FROM vender_prices
               INNER JOIN (SELECT MIN(price2) AS price2 FROM vender_prices GROUP BY vender_prices.code) AS l
                 ON l.price2 = vender_prices.price2
             GROUP BY vender_prices.code
             ) as r ON vender_prices.code = r.code
  LEFT JOIN (SELECT
               code, vendor_name, vender_prices.price3
             FROM vender_prices
               INNER JOIN (SELECT MIN(price3) AS price3 FROM vender_prices GROUP BY vender_prices.code) AS l
                 ON l.price3 = vender_prices.price3
             GROUP BY vender_prices.code
             ) as m ON vender_prices.code = m.code
GROUP BY vender_prices.code 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/176c29/8)

输出

```
| CODE | PRICE1 | PRICE2 | PRICE3 |  VENDER1 |  VENDER2 |  VENDER3 |
--------------------------------------------------------------------
|  125 | 0.0011 | 0.0014 | 0.0050 | Vendor 3 | Vendor 1 | Vendor 2 |
|  126 | 0.0019 | 0.0019 | 0.0034 | Vendor 3 | Vendor 2 | Vendor 1 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:17:07.693

```
SELECT
    data.*,
    v1.vendor_name 'vendor for price1',
    v2.vendor_name 'vendor for price2',
    v3.vendor_name 'vendor for price3'
FROM
    (
        SELECT
            Code,
            MIN(price1) price1,
            MIN(price2) price2,
            MIN(price3) price3
        FROM
            tbl
        GROUP BY Code
    ) data
    LEFT JOIN
    (
        SELECT 
            MIN(vendor_name) vendor_name,
            Code
        FROM
            tbl
        WHERE
            price1 = 
            (
                SELECT
                    MIN(price1)
                FROM
                    tbl t
                WHERE
                    t.Code = tbl.Code
            )
        GROUP BY Code
    ) v1 ON data.Code = v1.Code
    LEFT JOIN
    (
        SELECT 
            MIN(vendor_name) vendor_name
            Code
        FROM
            tbl
        WHERE
            price2 = 
            (
                SELECT
                    MIN(price2)
                FROM
                    tbl t
                WHERE
                    t.Code = tbl.Code
            )
        GROUP BY Code
    ) v2 ON data.Code = v2.Code
    LEFT JOIN
    (
        SELECT 
            MIN(vendor_name) vendor_name
            Code
        FROM
            tbl
        WHERE
            price3 = 
            (
                SELECT
                    MIN(price3)
                FROM
                    tbl t
                WHERE
                    t.Code = tbl.Code
            )
        GROUP BY Code
    ) v3 ON data.Code = v3.Code 
```

尽管查询本身看起来很大，但连接重复了 3 次。

**更新**我更新了查询删除`LIMIT`和添加`MIN(vendor_name) vendor_name`而不是`vendor_name`.

演示

# [这里](http://sqlfiddle.com/#!2/176c29/11)

输出

```
| CODE | PRICE1 | PRICE2 | PRICE3 | VENDOR FOR PRICE1 | VENDOR FOR PRICE2 | VENDOR FOR PRICE3 |
-----------------------------------------------------------------------------------------------
|  125 | 0.0011 | 0.0014 | 0.0050 |          Vendor 3 |          Vendor 1 |          Vendor 2 |
|  126 | 0.0019 | 0.0019 | 0.0034 |          Vendor 3 |          Vendor 2 |          Vendor 1 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T07:51:17.693

这是一个很好的做法，我先尝试一种蛮力方法@。

```
select 1 as wh,code,min(price1) as price,vendor_name
from(
  select code,price1,vendor_name
  from ForgeRock
  order by code,price1
  )t1
group by code
union all
select 2 as wh,code,min(price2) as price,vendor_name
from(
  select code,price2,vendor_name
  from ForgeRock
  order by code,price2
  )t1
group by code
union all
select 3 as wh,code,min(price3) as price,vendor_name
from(
  select code,price3,vendor_name
  from ForgeRock
  order by code,price3
  )t1
group by code 
```

这是一个非常简单易行的方法，不用join，我觉得用起来就够了。我添加了一个列 wh，如果需要，您可以旋转结果。但是，您不能使用上面的代码获得第二低的结果。有几种方法可以达到这个目标，我建议你尝试制作这样的分区：

```
CREATE TABLE ForgeRock
    (`unique_id` tinyint, `vendor_name` varchar(8), `price1` float(5,4)
    , `price2` float(5,4), `price3` float(5,4),`code` tinyint)
PARTITION BY KEY(code)
PARTITIONS 2;

INSERT INTO ForgeRock
    (`unique_id`, `vendor_name`, `price1`, `price2`, `price3`, `code`)
VALUES
(1,'Vendor 1',0.0012,0.0014,0.0054,125),
(2,'Vendor 2',0.0015,0.0016,0.0050,125),
(3,'Vendor 3',0.0011,0.0019,0.0088,125),
(4,'Vendor 1',0.0025,0.0024,0.0034,126),
(5,'Vendor 2',0.0043,0.0019,0.0065,126),
(6,'Vendor 3',0.0019,0.0085,0.0082,126); 
```

嗯，这有点棘手，但是当你没有这么多不同的值时非常有用`code`。你可以得到这样的结果：

```
select * from
(select code,price1 as price,vendor_name
from ForgeRock partition (p0)
order by price1
Limit 1,1
)t1
union all
select * from
(select code,price1 as price,vendor_name
from ForgeRock partition (p1)
order by price1
Limit 1,1
)t1
union all
select * from
(select code,price2 as price,vendor_name
from ForgeRock partition (p0)
order by price2
Limit 1,1
)t1
union all
select * from
(select code,price2 as price,vendor_name
from ForgeRock partition (p1)
order by price2
Limit 1,1
)t1
union all
select * from
(select code,price3 as price,vendor_name
from ForgeRock partition (p0)
order by price3
Limit 1,1
)t1
union all
select * from
(select code,price3 as price,vendor_name
from ForgeRock partition (p1)
order by price3
Limit 1,1
)t1 
```

虽然我认为您可以明显改善我的答案，但我会将这份工作留给您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T22:04:28.303

尝试这个 ：

```
select table1.vendor_name as vendor_name_for_price1,table2.vendor_name as vendor_name_for_price2, table3.vendor_name as vendor_name_for_price3

from 
table table1, table table2, table table3,
(Select code, min(price1),min(price2),min(price3) from table group by code ) TMP1

where
table1.price1=min(price1) and table1.code=TMP1.code
and
table2.price2=min(price2) and table2.code=TMP2.code
and
table3.price3=min(price3) and table3.code=TMP2.code ; 
```

# asp.net-mvc - StringLength/Minlength 验证不会阻止用户发布没有价值的表单

> ID：16211800
> 
> 赞同：4
> 
> 时间：2013-04-25T10:00:33.803
> 
> 标签：asp.net-mvc, validation, web

我的 ViewModel 上有以下属性

```
[StringLength(20, MinimumLength = 1, ErrorMessageResourceName = "Error_StringLength", ErrorMessageResourceType = typeof(Global))]
public string LeagueName { get; set; } 
```

如果字符串最终大于 20 个字符，则验证将触发并且不允许用户发布表单。但是，如果该字段为空白，这意味着 LeagueName 属性的长度小于 1，它将允许用户发布表单。

我知道这很容易通过使用 Required 属性来解决，但是为什么在这种情况下验证没有按预期工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:06:45.557

这是设计使然。

这是 StringLength 的验证逻辑：

```
public override bool IsValid(object value)
{
  this.EnsureLegalLengths();
  int num = value == null ? 0 : ((string) value).Length;
  if (value == null)
    return true;
  if (num >= this.MinimumLength)
    return num <= this.MaximumLength;
  else
    return false;
} 
```

如您所见，当字符串为 null`StringLength`时返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:03:59.917

因为该`StringLength`属性只验证字符串长度。它仅在字符串不为空时进行验证。

这是来自的验证方法`System.ComponentModel.DataAnnotations.dll`：

```
public override bool IsValid(object value)
    {
      this.EnsureLegalLengths();
      int num = value == null ? 0 : ((string) value).Length;
      if (value == null)
        return true;
      if (num >= this.MinimumLength)
        return num <= this.MaximumLength;
      else
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T03:44:54.820

使用最新版本的 MVC（5.1 和 jquery 验证包）并改用`MinLength`属性。有关详细信息，请参阅此内容[mvc51-release-notes#Unobtrusive](http://www.asp.net/mvc/overview/releases/mvc51-release-notes#Unobtrusive)

# javascript - 使用 jquery 在选项中添加选择

> ID：16211802
> 
> 赞同：0
> 
> 时间：2013-04-25T10:00:47.523
> 
> 标签：javascript, jquery

我正在尝试选择列表中的值之一。我还有一个隐藏字段，我必须匹配选择选项中的值。如果找到，则必须选择它。

这是我拥有的代码。隐藏字段 html 代码。

```
 <input type="hidden" id="supp" name="supp" value="<?php echo $_POST['suppliers'];?>" /> 
```

我的js：

```
<script type="text/javascript">
$(document).ready(function() {
var addSelected = $('#supp').val();
$("#suppliers option[value='" + addSelected + "']").attr("selected","selected");

console.log(addSelected);
});

</script> 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:08:35.520

这是一个 jsFiddle，它显示了一种更好的方法：http: [//jsfiddle.net/ATJvv/](http://jsfiddle.net/ATJvv/)

你可以只调用`.val`它`<select>`本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:03:36.990

尝试这个：

```
$("#suppliers option").each(function(index, element){
     element.selected = element.value === addSelected;
}); 
```

# actionscript-3 - FLASH/AS3：移除孩子时出错。参数 child 必须为非 null

> ID：16211805
> 
> 赞同：0
> 
> 时间：2013-04-25T10:00:51.987
> 
> 标签：actionscript-3, flash-cs5, flash-cs6

我正在尝试删除 MovieClip，但它说 Parameter child must be non-null。

这是我的脚本：

为了在舞台上进行，我使用：

```
function sayam (e:MouseEvent):void{
    nilai = 8;
    if(nilai == temp) {
    var ssAyam:ayam_mc = new ayam_mc
    stage.addChild(ssAyam);
    ssAyam.x = 350.0;
    ssAyam.y = 330.0;
    ssAyam.width = 170.0;
    ssAyam.height = 170.0;
    ssAyam.instanceName = "Ayam";
    arnam.push("Ayam");
    trace("arnam" +arnam);
    trace(ssAyam.instanceName);
    jual = jual + 4000;
    temp = val[len-(len-len2)]
    len2 = len2 + 1;
    } else {
            money = money - 4000;

        }

    } 
```

因此，我制作了 8 个函数来制作 8 个动画片段以在舞台上显示并将它们推送到数组中。数组是“arnam”。

这是我的删除代码：

```
function deleteBurger() {
                for(var i:Number=arnam.length; i >= 0; i--){
                        removeChild(arnam[i]);
                        arnam.splice(i,1);
                }
            } 
```

我跟踪了我的数组，它不为空。

有谁能够帮我？谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:56:37.697

我喜欢这样做以清零数组并在我这样做时操纵成员：

```
while( arnam.length )
{
    removeChild( arnam.pop() );
} 
```

现在，我将使用 MovieClips 的[向量](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html)来进行强类型，而不是数组。并且在尝试删除之前使用 contains() 检查 MovieClip 是否仍在舞台上 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:10:29.253

您不应该根据该数组的长度在循环中修改数组，其行为将是不可预测的。

```
for each(var child:Sprite in arnam){
    stage.removeChild(child);
}
arnam = []; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:26:43.603

尝试这个

```
for(var i:int=arnam.length-1; i >= 0; i--){
                        removeChild(arnam[i]);
                        arnam.splice(i,1);

                } 
```

# .net - 给定简单类型 T，得到数组类型 T[]

> ID：16211809
> 
> 赞同：1
> 
> 时间：2013-04-25T10:00:58.330
> 
> 标签：.net, arrays, reflection, types

我怎样才能得到`Array of type T`given的类型`T`？

下面的 LinqPad 友好代码段：

```
void Main()
{
    Type t = typeof(string);
    Type tArray = GetArrayType(t);
    tArray.Dump(); // System.String[]
}
Type GetArrayType(Type t)
{
    ////this is cheating !!
    //return typeof(string[]); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:11:51.090

这可以解决问题：

```
type.MakeArrayType() 
```

例如：

```
int a = 123;
Type aType = a.GetType();
Type aArrayType = aType.MakeArrayType();

// aArrayType.FullName = "System.Int32[]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:02:09.950

## 更新

我*知道*有[更好的方法](http://msdn.microsoft.com/en-us/library/hc2e4ft8%28v=vs.100%29.aspx):)

```
Type GetArrayType(Type t){
    return t.MakeArrayType();
} 
```

## 原答案：

这行得通，但我希望有一些不那么老套的东西

```
Type GetArrayType(Type t){
    return Type.GetType(t + "[]");
} 
```

# java - {} 在任何方法之外的用途是什么？

> ID：16211815
> 
> 赞同：2
> 
> 时间：2013-04-25T10:01:21.450
> 
> 标签：java, initialization

我不小心在所有方法之外制作了一对 {} 并且工作了。

```
public static void main(String[] args) {
    System.out.println("ddd");
}

{
    System.out.println("ttt");
} 
```

当然，如果您运行此代码，结果是“ddd”，并且仅当我创建它的新实例时它才会写入“ttt”。

如果我让它`static {System.out.println("ttt");}`按设计工作，结果是“ttt”然后是“ddd”

**这有什么实际用途吗？为什么有人会在没有构造函数或没有书面构造函数的情况下使用它？**

我的印象是：它似乎有效，但闻起来像是糟糕而奇怪的做法。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:05:19.910

`{}`定义模块或代码块的范围（如方法、静态块、类等）

每个模块都应该有一个名称，以从其他模块中识别它。

在您的情况下，简单地放置`{}`意味着您正在创建一个代码块而不是命名，因此它会给出错误。但是放入`{}`一个方法会很好。

但是当你把`static`关键字放在它前面时，你正在制作一个在 java 中具有特殊含义的静态块。这意味着`static`当您的类第一次加载时，块内的所有内容都将被执行。

[请参阅此链接以获取 Java 教程网站中的初始化程序块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T10:06:52.020

> 这有什么实际用途吗？

有一个使用实例初始化程序块的“习惯用法”：

```
 Map mymap = new HashMap() {{put("a", 1); put("b", 2);}}; 
```

这是创建使用给定条目集初始化的映射的简洁方法。当你分解它时，它是在声明和实例化一个匿名子类，`HashMap`它使用实例初始化块来填充新映射。

* * *

> 我的印象是：它似乎有效，但闻起来像是糟糕而奇怪的做法。

这是一个主观的说法。对于初始化程序块不好/奇怪，我能想到的唯一合理的论点是人们不使用它们。这个论点带有循环逻辑的味道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T10:05:12.783

这都是关于 [**初始化程序块的**](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

实例变量的初始化块看起来就像静态初始化块，但没有 static 关键字：

{

```
// will execute when intialization 
```

}

Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:04:14.263

这些被称为初始化块。它们与所有构造函数一起被调用。所以任何构造函数调用都会调用这段代码。

仅在加载类时才调用静态块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T10:07:22.523

通常，您必须将用于初始化实例变量的代码放入构造函数中。使用构造函数初始化实例变量有两种选择：`initializer blocks`和`final methods`.

实例变量的初始化块看起来就像静态初始化块，但没有 static 关键字：

将`Java compiler`初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

来源：[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T10:07:21.750

这在java中称为**初始化块**

> 初始化块是在创建类的对象之前执行的大括号之间的代码块。由于初始化块的执行依赖于对象的创建，我们可以很容易地猜测它有两种类型的对象。

大多数情况下，这用于初始化类中的某些内容，如果您使用任何构造函数，则每次都需要初始化这些内容。

例如：让我们假设您的班级中有 3 个构造函数。
**第**一个初始化 IO。
**第二**个初始化套接字等。
并且您想为您的类初始化一些实例变量，无论您使用哪个构造函数。所以为此你有2个解决方案：

1.  将初始化代码放入每个构造函数中。
2.  使用初始化块并将这些变量放入其中，每次调用任何构造函数时都会初始化这些变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T10:08:03.203

它可能不熟悉，但它本身并不坏。它是在构造时执行的初始化程序块。有关更详细的说明，请参见[此处，其中还包括静态初始化块。](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

# database - 仅从数据库中选择一些行

> ID：16211817
> 
> 赞同：2
> 
> 时间：2013-04-25T10:01:35.930
> 
> 标签：database, ms-access, select, select-query

我有以下查询：

```
string Query = String.Format("SELECT ArticleName FROM tblArticles WHERE UserID={0} ORDER BY PostDate DESC", UserID); 
```

我想为“ArticleName”获得不超过 3 个不同的值。
有可能这样做吗？（没有选择所有的 'ArticleName' 只是其中的 3 个？）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:04:19.493

您需要说明您使用的是什么 RDBMS。Mysql 和 sqlite 支持该`LIMIT`指令，而其他系统可能支持也可能不支持`TOP`，`FIRST`或其他类似指令。

更新：看看不同的 RDBMS 引擎如何支持它。请参阅`getLoadSomeRowsSql()`infinispan 中的方法[`TableManipulation.java`](http://grepcode.com/file/repo1.maven.org/maven2/org.infinispan/infinispan-cachestore-jdbc/5.2.1.Final/org/infinispan/loaders/jdbc/TableManipulation.java?av=f)。

在这里，如果链接停止工作：

```
 switch (getDatabaseType()) {
    case ORACLE:
       loadSomeRowsSql = String.format("SELECT %s, %s FROM (SELECT %s, %s FROM %s) WHERE ROWNUM <= ?", dataColumnName, idColumnName, dataColumnName, idColumnName, getTableName());
       break;
    case DB2:
    case DB2_390:
    case DERBY:
       loadSomeRowsSql = String.format("SELECT %s, %s FROM %s FETCH FIRST ? ROWS ONLY", dataColumnName, idColumnName, getTableName());
       break;
    case INFORMIX:
    case INTERBASE:
    case FIREBIRD:
       loadSomeRowsSql = String.format("SELECT FIRST ? %s, %s FROM %s", dataColumnName, idColumnName, getTableName());
       break;
    case SQL_SERVER:
       loadSomeRowsSql = String.format("SELECT TOP (?) %s, %s FROM %s", dataColumnName, idColumnName, getTableName());
       break;
    case ACCESS:
    case HSQL:
    case SYBASE:
       loadSomeRowsSql = String.format("SELECT TOP ? %s, %s FROM %s", dataColumnName, idColumnName, getTableName());
       break;
    default:
       // the MySQL-style LIMIT clause (works for PostgreSQL too)
       loadSomeRowsSql = String.format("SELECT %s, %s FROM %s LIMIT ?", dataColumnName, idColumnName, getTableName());
       break;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:03:13.280

通常，您可以`LIMIT 3`在查询结束时使用来实现此目的

```
string Query = String.Format(
    "SELECT ArticleName FROM tblArticleas WHERE UserID={0} ORDER BY PostDate DESC LIMIT 3",
    UserID
); 
```

或者对于 Microsoft Access DB，显然您需要`TOP 3`在开始时使用，例如：

```
string Query = String.Format(
    "SELECT TOP 3 ArticleName FROM tblArticleas WHERE UserID={0} ORDER BY PostDate DESC",
    UserID
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:05:05.500

也许

```
SELECT DISTINCT TOP 3 ArticleName, PostDate FROM tblArticleas WHERE UserID={0} ORDER BY PostDate DESC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:19:20.733

用这个：

```
string Query = String.Format("SELECT DISTINCT TOP 3 ArticleName FROM tblArticles WHERE UserID={0} ORDER BY PostDate DESC", UserID); 
```

# kendo-ui - Kendo 工具提示在控制台中显示错误

> ID：16211828
> 
> 赞同：2
> 
> 时间：2013-04-25T10:02:01.300
> 
> 标签：kendo-ui

我已经为剑道工具提示编写了代码，它显示了这样的错误 -

> 未捕获的类型错误：对象 [object Object] 没有方法“kendoTooltip”

它是 kendowindow 中的可编辑列表视图。

这是代码

```
<span style="float: right; margin-top: 4px;">
        <a id="mortgage_add_row" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon7.png" alt="" height="36" width="37"></a>
        <a id="mortgage_delete_row" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon8.png" alt="" height="36" width="37"></a>
        <a id="mortgage_edit_row" class="k-edit" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon9.png" alt="" height="36" width="37"></a>
        <a id="mortgage_save_row" class="k-insert" href="#"><img src="<?php echo STATIC_DIR; ?>images/icon10.png" alt="" height="36" width="37"></a>
    </span><div class="clear"></div> 
```

这些所有链接都是 CRUD 按钮，它们绑定到相应的操作。

```
$(document).ready(function() {

// Other code.

// Add Row
        $("#mortgage_add_row").on("click", function(event) {
            event.preventDefault();
            mortage_listview.add();
        });

        // Delete Row
        $("#mortgage_delete_row").on("click", function(event) {
            event.preventDefault();
            mortage_listview.remove(mortage_listview.element.children().first());
            if (dataSource.total() < 1) {
                mortage_listview.add();
            } else {
                dataSource.read();
            }
        });

        // edit row
        $("#mortgage_edit_row").on("click", function(event) {
            event.preventDefault();
            mortage_listview.edit(mortage_listview.element.children().first());
        });

        // save row
        $("#mortgage_save_row").on("click", function(event) {
            event.preventDefault();
            mortage_listview.save();
        });

        if (!kendoWindow_mortgage.data("kendoWindow")) {
            kendoWindow_mortgage.kendoWindow({
                width: "520px",
                title: ""
            });
        }

        $("#mortgage_add_row").kendoTooltip({
            content: "Hello!"
        });

}); 
```

任何帮助是极大的赞赏。

谢谢。

# c# - 实体框架 IDENTITY_INSERT ON 不起作用

> ID：16211838
> 
> 赞同：4
> 
> 时间：2013-04-25T10:02:31.177
> 
> 标签：c#, entity-framework

我有这段代码应该插入带有身份插入的记录

```
using (MCT_DB_ArchiveEntities ent = new MCT_DB_ArchiveEntities())
{
  ent.ExecuteStoreCommand("SET IDENTITY_INSERT [clicks] ON");
  ent.clicks.Attach(ck);
  ent.clicks.Context.ObjectStateManager.ChangeObjectState(ck, System.Data.EntityState.Added);
  ent.SaveChanges();
} 
```

我得到这个错误。

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“clicks”中插入标识列的显式值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:50:21.937

它不应该工作。仅当身份插入在与真实插入相同的连接上打开时才有效。在您的情况下，可以使用两种不同的连接。要使其工作，您必须维护自己的数据库连接并将其传递给 ObjectContext 的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-02T08:04:23.747

根据这个先前的[问题](https://stackoverflow.com/questions/13086006/how-can-i-force-entity-framework-to-insert-identity-columns)，您需要开始您的上下文事务。保存更改后，您还必须重新声明 Identity Insert 列，最后您必须提交事务。

```
using (MCT_DB_ArchiveEntities ent = new MCT_DB_ArchiveEntities())
using (var transaction = ent.Database.BeginTransaction())
{
    var item = new User {Id = 418, Name = "Abrahadabra" };
    ent.IdentityItems.Add(item);
    ent.Database.ExecuteSqlCommand("SET IDENTITY_INSERT Test.Items ON;");
    ent.SaveChanges();
    ent.Database.ExecuteSqlCommand("SET IDENTITY_INSERT [dbo].[User] OFF");
    transaction.Commit();
} 
```

# android - 在具有相同测试帐户的多台设备上进行 Android In-App Billing v3 测试

> ID：16211841
> 
> 赞同：0
> 
> 时间：2013-04-25T10:02:48.700
> 
> 标签：android, testing, in-app-billing

我正在尝试在我的应用程序中测试实际购买，然后再发布它并使用 Billing Library v3。我在购买之前在其他设备上购买的商品时遇到了问题。

以下是我的行动：

1.  我签署并上传.apk 到开发者控制台；
2.  我在上传的 .apk 中添加了真实的购买项目；
3.  我将我的非开发者 gmail 帐户添加到开发者控制台中的测试帐户。此帐户在两个测试设备上都用作主帐户；
4.  我将签名的 .apk 上传到两个测试设备；
5.  我在第一台设备上运行应用程序并购买了该项目 - 一切正常；
6.  现在我正在尝试在其他设备上运行该应用程序。启动时，应用程序检查已进行的购买。它说以前购买的物品是空的！但是，如果我尝试在第二台设备上再次购买它，它会返回“您已经拥有此购买”作为响应；

这是未发布的应用程序或测试帐户的问题吗？我确定在两个设备上发送的“开发人员有效负载”字符串是相同的，但我认为情况并非如此，因为在第二台设备上它不会检查有效负载，它只是在 inventory.getPurchase(SKU_OF_THE_ITEM) 上返回 null 作为响应对于 queryInventoryAsync()。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:34:20.930

好像问题解决了。我的第二台设备上有 2 个帐户，我在没有启动 Google Play 应用程序的情况下从辅助帐户切换到主帐户。它必须至少启动一次 - 它显示某种“接受协议”框，接受它后，应用程序中的购买将得到正确处理。希望这对某人有所帮助。

# json - JSON 在第一个索引处获取值

> ID：16211847
> 
> 赞同：0
> 
> 时间：2013-04-25T10:02:55.153
> 
> 标签：json

我被困在这一点上，不知道要弄清楚脚本。请参阅此 PHP 代码：

```
<?php

$arr = array();

$i = 0;

while($i < 10) {
   $arr[] = $i;
   $i = $i + 1;
}

echo json_encode($arr);

?> 
```

它将像这样返回给 AJAX 函数：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

假设它存储在`d`javascript 变量中，那么我怎么能只指向第一个值，所以它存储`0`到任何变量。

如果我这样做：

```
success: function(d) {
    var a = d[0];
} 
```

它返回空值。

我不知道如何解释我的问题，因为我不擅长英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:42:02.497

尝试这个：

```
success: function(d){
    $.each(d, function(x,y){
       var a = y['field'];
    });
} 
```

# android - listview layoutparams android里面的gridview

> ID：16211848
> 
> 赞同：0
> 
> 时间：2013-04-25T10:02:57.277
> 
> 标签：android, listview, gridview, layoutparams

利用：

```
public View getView(int position, View convertView, ViewGroup parent) {
final int type = getItemViewType(position);

if(position == 1){
    GridView gridView = new GridView(context);
    gridView.setNumColumns(3);
    AbsListView.LayoutParams params = new AbsListView.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT);
    gridView.setLayoutParams(params);
    ArrayAdapter<String>  adapter = new ArrayAdapter<String>(context, R.layout.item, R.id.tvText, new String[]{"as","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah","ah"});
    gridView.setAdapter(adapter);
    return gridView;
} 
```

但是gridview没有完整显示。为什么？

截屏：
![在此处输入图像描述](https://i.stack.imgur.com/Srx9j.png)

我应该喜欢这样：
![在此处输入图像描述](https://i.stack.imgur.com/iyS6N.png)

[项目.xml](http://pastebin.com/LwancVY1)

# squid - 我需要从默认的 squid.conf 中修改什么以使其作为透明代理服务器工作？

> ID：16211849
> 
> 赞同：0
> 
> 时间：2013-04-25T10:02:57.780
> 
> 标签：squid

我有一个带有 DD-WRT 的路由器，并且从路由器转发似乎可以使用以下脚本：

```
#!/bin/sh
PROXY_IP=192.168.77.77
PROXY_PORT=3128
LAN_IP=`nvram get lan_ipaddr`
LAN_NET=$LAN_IP/`nvram get lan_netmask`

iptables -t nat -A PREROUTING -i br0 -s $LAN_NET -d $LAN_NET -p tcp --dport 80 -j ACCEPT
iptables -t nat -A PREROUTING -i br0 -s ! $PROXY_IP -p tcp --dport 80 -j DNAT --to $PROXY_IP:$PROXY_PORT
iptables -t nat -I POSTROUTING -o br0 -s $LAN_NET -d $PROXY_IP -p tcp -j SNAT --to $LAN_IP
iptables -I FORWARD -i br0 -o br0 -s $LAN_NET -d $PROXY_IP -p tcp --dport $PROXY_PORT -j ACCEPT 
```

现在，如果我只运行默认`squid.conf`文件，我会在我的网络浏览器上看到以下页面：

```
ERROR
The requested URL could not be retrieved
The following error was encountered while trying to retrieve the URL: /questions/ask

Invalid URL 
```

如您所见，“stackoverflow.com”从 URL 截断：stackoverflow.com/questions/ask

现在，如果我更改附加`transparent`到以下行：

```
http_port 3128 -> http_port 3128 transparent 
```

Web 浏览器中没有显示任何页面，并且在“/var/log/squid/cache.log”中出现以下错误：

```
 NF getsockopt(SO_ORIGINAL_DST) failed on local=192.168.77.77:3128 remote=192.168.77.1:5268 FD 9 flags=33: (92) Protocol not available 
```

无论如何我可以让鱿鱼工作吗？google.com 上没有参考似乎有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-20T04:55:06.720

默认情况下 Squid 将拒绝所有访问。您必须指定允许的人员。

将此添加到您的 acl 列表

```
acl mycomputer src <yourip> 
```

然后在deny all之前添加这个权利

```
http_access allow mycomputer

# And finally deny all other access to this proxy
http_access deny all 
```

在将其添加到 squid.conf 之前，我也遇到了相同或类似的错误。

# android - mailto：在android中不支持带有空格的正文链接

> ID：16211850
> 
> 赞同：2
> 
> 时间：2013-04-25T10:03:01.170
> 
> 标签：android, html, email, mailto

我们需要在我们的 HTML5（移动）网页中发送链接，因此我们使用 mailto: 来提供用于发起电子邮件的链接。邮件内容有网页链接，并包含**空格**， 例如 [http://maps.google.com/maps?q=chennai Tamil Nadu](http://maps.google.com/maps?q=chennai%20Tamil%20Nadu)

因此，我们使用了 URL 端编码，以便将内容正确地传递给电子邮件客户端。所以例如链接变成了[http://maps.google.com/maps?q=chennai%20Tamil%20Nadu](http://maps.google.com/maps?q=chennai%20Tamil%20Nadu)

但问题是 gmail 应用程序在解码后加载内容，即链接断开：

[http://maps.google.com/maps?q=chennai](http://maps.google.com/maps?q=chennai)泰米尔纳德邦

我们甚至尝试过双重编码，但仍然失败。有什么办法可以防止在android浏览器中出现这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T00:25:47.940

Are you including the correct parameters such as `?subject` to the protocol? Technically it should work without encoding.

```
<a href="mailto:?subject=http://maps.google.com/maps?q=chennai Tamil Nadu">Mail it</a> 
```

Check out [http://msdn.microsoft.com/en-us/library/aa767737(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa767737%28v=vs.85%29.aspx)

# web-services - 在多层架构中，是否可以跳过业务层进行 crud 操作？

> ID：16211858
> 
> 赞同：9
> 
> 时间：2013-04-25T10:03:19.030
> 
> 标签：web-services, jakarta-ee, architecture

我们有 3 层应用程序，其中来自服务层的每个调用都转到业务层并由数据层持久化。每层的组件只能调用下面的层；

然而，因为我们有数百个实体，并且我们有很多与 crud 操作相关的服务，所以我们的团队引发了很多争议。

有些人认为，为了维护和开发的方便，最好从 crud 服务中调用数据访问，这些服务只是做 crud 操作，绕过业务层。

相反，有人说我们必须为业务层中每个实体的数据访问创建包装器，并从服务中调用这些包装器，并且永远不允许服务调用数据访问层。

您认为我们应该采取哪种方式？crud 服务调用数据访问绕过业务层可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:40:14.560

如果没有要执行的业务逻辑，则没有理由强制执行业务层。3 层架构不是一个神秘的协议，只是假设业务处理形成的最佳实践。

在当前的应用程序中，当不涉及业务流程时，我们经常直接从 JSF 控制器访问 DAO。这个想法是由一位 [java 冠军](http://en.wikipedia.org/wiki/Java_Champions)提出的，他强调简单性是最重要的。

如果您担心将来可能需要添加业务逻辑的修改。我是这样考虑问题的：反正额外的业务逻辑会加到业务层，包括数据访问，所以这里没有区别。

CRUD 代码大多非常简单。因此，服务中的更改相当于将 DAO 中的单个调用或几个调用重新路由到 EJB - 一个简单的重构。CRUD 代码本身仍将保留，但将被推入 EJB - 另一个简单的重构。

这并不完美，但 IMO 比替代方案更好：有一个空的间接层。这增加了无用的复杂性。业务对象只会将调用转发给 DAO。

我认为 有两种 [代码味道适用于这种情况：人为的复杂性和](http://en.wikipedia.org/wiki/Code_smell)[功能嫉妒](http://c2.com/cgi/wiki?FeatureEnvySmell)。

我并不是说业务层中的 DA 在某种程度上是一种代码味道。我的意思是，拥有一个除了代理 DAO**之外什么都不做的业务对象是一种气味。**复杂性也是如此 - 添加的数据结构/架构层没有任何用途 - 您的应用程序中似乎已经存在 DAL。

您需要考虑的另一个方面是 - 开发人员看到直接使用 DAO 的服务有多令人惊讶？拥有 5 个服务，其中 2 个直接访问 DAO，不同于拥有 100 个服务，其中只有一个服务直接访问 DAO。

在第一种情况下，代码的简单性将超过增加的概念复杂性（单个事物有两个概念），在第二种情况下，我宁愿坚持业务层 - 这样做的惊喜（也称为 WTF 效应；）只是一次不同会太大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T22:16:39.827

在我看来，绕过业务层调用 CRUD 服务将在您增加功能时开始将当前服务层转换为业务层。因此，如果您对它没问题，您的服务层也将充当业务层。

在大多数情况下，您处理一个实体，并且可能涉及许多数据层 crud 调用，例如一次更新。为此建议使用业务层。业务层是执行任何业务规则、缓存或在需要时调用其他业务服务的地方。这将保持上层简单并通过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T04:38:22.750

我不会绕过业务层。尽管看起来您只是将 DAL 的调用代理到 ​​BL 中，并且即使这可能是非常简单的 CRUD 操作的情况，但 BL 可以封装操作所需的验证逻辑。验证逻辑可以在 BL 上执行，并且只有在满足验证条件时才会执行到 DAL 的代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:47:51.430

如果您只有 CRUD 操作，则可以使用数据服务将数据集发布为 Web 服务。一个很好的例子是 WSO2 数据服务[http://wso2.com/products/data-services-server/](http://wso2.com/products/data-services-server/)

# php - .val 使表单停止工作

> ID：16211860
> 
> 赞同：0
> 
> 时间：2013-04-25T10:03:24.813
> 
> 标签：php, javascript, jquery, forms

我有[这个结帐页面](http://camography.org/checkout)（您必须添加一个项目），它使用在[这个 jsFiddle](http://jsfiddle.net/8GL2m/1/)中看到的 JavaScript / jQuery来显示/隐藏一些字段以获取单独的送货地址。显示时，我将所有字段的值设置为`''`，隐藏时我将字段的值设置为与计费表单中它们各自的字段相同。

当您提交表单时，您应该被带到贝宝登录屏幕（尝试填写表单而不切换不同的送货地址并提交），但如果您切换送货地址，它只会返回到同一页面。

我已经调试到足以知道它正在修改字段，`.val()`这会破坏表单。如果我注释掉这些位并使用开发工具手动切换可见性，或者如果我填写账单表格并且从不显示/隐藏运输（所以`.val()`从不调用），一切正常。

如果您要查看该页面并尝试一下，如果您进入贝宝屏幕，您就知道它成功了，否则它只是回到同一页面（表单的操作是同一页面，但我可以'找不到任何处理数据的东西 - 完整的 php 页面可以在[这里](http://pastebin.com/7yDpFBU3)找到- 它是[WPEC 购物车页面的修改版本](https://code.google.com/p/wp-e-commerce/source/browse/branches/3.8/wpsc-theme/wpsc-shopping_cart_page.php?r=32)

这是（大部分）相关的JavaScript：

```
$('#reveal-shipping').click(function(){
        if ( $('.wpsc_checkout_table.table-2').is(':animated') ) return; 
        if( $('.wpsc_checkout_table.table-2').css('display') == 'none' ){
            $('.wpsc_checkout_table.table-2').slideToggle();
            $('.wpsc_checkout_table.table-2').find('input, select, textarea').val(''); 
            document.getElementById('reveal-shipping').innerHTML = 'Ship to my billing address &larr;';
        } else {
            for ( i=0; i < fields.length; i++ ){
                thisval = $(fields[i][0]).val();
                $(fields[i][1]).val( thisval );
            }
            $('.wpsc_checkout_table.table-2').slideToggle();
            document.getElementById('reveal-shipping').innerHTML = 'Ship to a different address &rarr;';
        }
    }); 
```

[您可以在 jsFiddle](http://jsfiddle.net/8GL2m/1/)和[页面本身](http://camography.org/checkout/)上找到其余部分

非常感谢任何帮助我真的坚持这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:23:11.323

我认为问题在于您正在使用 display: none 来隐藏“不同的送货地址”。当输入字段显示无时，它不会与您的公式一起发送。因此，它会将您重定向回结帐页面。

您可以使用可见性：隐藏，但它仍然会占用空间。

但我强烈建议您不要这样做，因为如果用户关闭了 javascript，它将无法工作。您应该发送所有字段并在 php 中检查是否已提交不同的地址字段，如果已提交，请使用它们。

**编辑：**您可以使用位置将它们放在窗口之外，例如：

```
position:absolute;
top: -9999px;
visibility:hidden; 
```

# c# - 将对象列表添加到列表 > 如果不包含

> ID：16211866
> 
> 赞同：1
> 
> 时间：2013-04-25T10:03:36.207
> 
> 标签：c#

我有`List<List<Vertex>>`，`Vertex`有财产`id`。我需要添加`List<Vertex>>`到这个列表中，但不是重复的列表。

```
 public void AddComponent(List<Vertex> list)
{
    List<List<Vertex>> components = new List<List<Vertex>>;

    //I need something like
      if (!components.Contain(list)) components.Add(list);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:13:24.663

您可以使用 SequenceEqual -（这意味着顺序也必须相同）：

```
if (!components.Any(l => l.SequenceEqual(list))) 
    components.Add(list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:10:45.093

您可以执行以下操作：

```
public void AddComponent(List<Vertex> list)
{
    var isInList = components.Any(componentList =>
    {
        // Check for equality
        if (componentList.Count != list.Count)
            return false;

        for (var i = 0; i < componentList.Count; i++) {
            if (componentList[i] != list[i])
                return false;
        }

        return true;
    });

    if (!isInList)
        components.Add(list);
} 
```

# typeahead - 无法提前输入

> ID：16211869
> 
> 赞同：0
> 
> 时间：2013-04-25T10:03:42.637
> 
> 标签：typeahead, typeahead.js

我使用了以下脚本：

```
<input class="typeahead" type="text" id = "input">
$('#input').typeahead([{name: 'name',remote: 'planets.json',}]); 
```

## JSON文件

```
{"name" : {"value" : ["4729", "Siva", "Prakash"]},"planets" : {"value" : ["Mercury", "Venus", "Pluto"]}} 
```

在输入框上输入时，显示两个Json数组名称值[名称，植物]。无论如何，在我的代码中，我只提到名称作为“名称”。所以它必须只从'name' JSON 数组中返回该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:24:07.483

其中`planets.json`是名称-> 值，或行星-> 值。像这样初始化预先输入：

```
<input type="text" id="input" data-provide="typeahead">

$.getJSON("planets.json", function(json) {
   $('#input').typeahead({ 
     source : json.name.value
   });
}); 
```

或者`json.planets.value`，如果你想要行星

# redirect - 在页面重定向上传递动态值

> ID：16211870
> 
> 赞同：0
> 
> 时间：2013-04-25T10:03:42.793
> 
> 标签：redirect, dynamic, coldfusion, cfml

我有一个带有各种字段的 GUI，用户可以在其中输入数据。我有一个按钮。我想传递用户在 GUI 上输入的值，然后单击按钮，我想将这些值传递到可以使用它们的另一个页面。

**注意：**没有表单/没有提交/没有表单操作，它只是一个页面使用按钮重定向到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:32:00.663

基于一些标记：

```
<div id="x">Some data</div>
<div id="y">Some more data</div> 
```

用于检索所需数据的 jQuery 脚本：

```
$("my button/link/whatever").click(function(e) {
    e.preventDefault();
    var data = {
        x: $("#x").text(),
        y: $("#y").text()
    };
    var req = $.ajax({
        url: "the page to send data to",
        type: "post",
        data: data
    });
    req.done(function(response) {
        // Do something here once the request is complete
    });
}); 
```

或者使用第二种形式。

# jquery - 如何使用jQuery检查所有输入是否不为空

> ID：16211871
> 
> 赞同：42
> 
> 时间：2013-04-25T10:03:42.943
> 
> 标签：jquery, input

我需要使用 jQuery 验证表单。我可以一一检查我的所有输入，但这不是一个非常实用的解决方案。

如何更有效地检查我的所有输入是否为非空？在我的表单中，我可以有`input`不同类型的元素：文本、几组收音机、选择等。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-25T10:12:01.487

只需使用：

```
$("input:empty").length == 0; 
```

如果它为零，则没有一个是空的。

为了更聪明一点，并且过滤掉只有空格的项目，你可以这样做：

```
$("input").filter(function () {
    return $.trim($(this).val()).length == 0
}).length == 0; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-25T10:05:30.337

使用`each`：

```
var isValid;
$("input").each(function() {
   var element = $(this);
   if (element.val() == "") {
       isValid = false;
   }
}); 
```

`jQuery validate`但是，使用IMO 更清洁的东西可能会更好。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-25T10:15:28.923

```
$('#form_submit_btn').click(function(){
    $('input').each(function() {
        if(!$(this).val()){
            alert('Some fields are empty');
           return false;
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-09T14:43:09.270

我只是想指出我的答案，因为我知道`for`循环比循环更快`$.each`，它是：

只需添加`class="required"`到您想要的输入，然后在 jquery 中执行：

```
$('#signup_form').submit(function(){
    var fields = $('input.required');
    for(var i=0;i<fields.length;i++){
        if($(fields[i]).val() != ''){
            //whatever
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-22T08:08:04.823

```
$('input').each(function() {
    if ($(this).val() != '') {
        console.log('all inputs filled');
    }
    else{
        console.log('theres an empty input');
        return false
    }
}); 
```

你可能想把它包装在一个 keyup 函数中

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-30T04:44:57.857

你可以做到。这是代码

```
<!DOCTYPE html>
<html lang="en">
 <head>
 <meta charset="UTF-8">
 <title></title>
 <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<style>
select,textarea,input[type="text"],input[type="password"],input[type="datetime"],input[type="datetime-local"],input[type="date"],input[type="month"],input[type="time"],input[type="week"],input[type="number"],input[type="email"],input[type="url"],input[type="search"],input[type="tel"],input[type="color"],.uneditable-input{display:inline-block;height:20px;padding:4px;margin-bottom:9px;font-size:13px;line-height:18px;color:#555555;}
textarea{height:auto;}
select,textarea,input[type="text"],input[type="password"],input[type="datetime"],input[type="datetime-local"],input[type="date"],input[type="month"],input[type="time"],input[type="week"],input[type="number"],input[type="email"],input[type="url"],input[type="search"],input[type="tel"],input[type="color"],.uneditable-input{background-color:#ffffff;border:1px solid #cccccc;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.075);-moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.075);box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.075);-webkit-transition:border linear 0.2s,box-shadow linear 0.2s;-moz-transition:border linear 0.2s,box-shadow linear 0.2s;-ms-transition:border linear 0.2s,box-shadow linear 0.2s;-o-transition:border linear 0.2s,box-shadow linear 0.2s;transition:border linear 0.2s,box-shadow linear 0.2s;}textarea:focus,input[type="text"]:focus,input[type="password"]:focus,input[type="datetime"]:focus,input[type="datetime-local"]:focus,input[type="date"]:focus,input[type="month"]:focus,input[type="time"]:focus,input[type="week"]:focus,input[type="number"]:focus,input[type="email"]:focus,input[type="url"]:focus,input[type="search"]:focus,input[type="tel"]:focus,input[type="color"]:focus,.uneditable-input:focus{border-color:rgba(82, 168, 236, 0.8);outline:0;outline:thin dotted \9;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);box-shadow:inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);height: 20px;}
select,input[type="radio"],input[type="checkbox"]{margin:3px 0;*margin-top:0;line-height:normal;cursor:pointer;}
select,input[type="submit"],input[type="reset"],input[type="button"],input[type="radio"],input[type="checkbox"]{width:auto;}
.uneditable-textarea{width:auto;height:auto;}
#country{height: 30px;}
.highlight
{
    border: 1px solid red !important;
}
</style>
<script>
function test()
{
var isFormValid = true;

$(".bs-example input").each(function(){
    if ($.trim($(this).val()).length == 0){
        $(this).addClass("highlight");
        isFormValid = false;
        $(this).focus();
    }
    else{
        $(this).removeClass("highlight");
    }
});

if (!isFormValid) { 
    alert("Please fill in all the required fields (indicated by *)");
}

  return isFormValid;
 }  
 </script>
</head>
 <body>
 <div class="bs-example">
<form onsubmit="return test()">
    <div class="form-group">
        <label for="inputEmail">Email</label>
        <input type="text" class="form-control" id="inputEmail" placeholder="Email">
    </div>
    <div class="form-group">
        <label for="inputPassword">Password</label>
        <input type="password" class="form-control" id="inputPassword" placeholder="Password">
    </div>
    <button type="submit" class="btn btn-primary">Login</button>
   </form>
  </div>
 </body>
 </html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-25T03:20:23.553

```
var isValid = true;
$("#tabledata").find("#tablebody").find("input").each(function() {
var element = $(this);
if (element.val() == "") {
isValid = false;
}
else{
isValid = true;
}
}); 
console.log(isValid); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-11T06:58:11.003

像这样：

```
if ($('input[value=""]').length > 0) {
   console.log('some fields are empty!')
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-23T11:00:01.193

您可以使用 Regex 和 Replace 或仅修剪来实现此目的。

> **正则表达式示例：**

```
if ($('input').val().replace(/[\s]/, '') == '') {
    alert('Input is not filled!');
} 
```

使用此`replace()`功能，您可以用任何内容替换空格（*删除空格*）。

> **修剪示例：**

```
if ($('input').val().trim() == '') {
    alert('Input is not filled!');
} 
```

`trim()`函数从字符串中删除前导和尾随空格和行终止符。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2022-01-15T19:15:07.580

let timer $('input').on('input change', function () { $('input').each(function () { clearTimeout(timer) timer = setTimeout(() => { if ($( this).val() != '') { console.log('所有输入已填充'); } else { console.log('theres an empty input'); return false } }, 0) }) })

# asp.net-mvc-4 - 文本框的 mvc 中的 Textchanged 事件

> ID：16211873
> 
> 赞同：4
> 
> 时间：2013-04-25T10:03:48.860
> 
> 标签：asp.net-mvc-4

我是 mvc 的初学者。我正在开发一个应用程序，我在其中输入值并按 TAB 后需要更改文本框的值。例如，当我在文本框中输入**1**并按 Tab 时，它应该显示**+1**即，我需要在我输入的文本上加上一个**+**号。为此，我正在尝试为文本框引发一个 textchanged 事件。我该怎么做。当我用谷歌搜索它时，我发现它可以使用 javascript 来完成。但我不知道该怎么做，请给我一些建议。

代码：

```
 @Html.TextBoxFor(m => m.text)--textbox 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:07:44.177

您可以使用 jQuery 并订阅[`blur`](http://api.jquery.com/blur/)将在输入字段失去焦点时触发的事件：

```
$(function() {
    $('#id_of_your_textbox').blur(function() {
        var value = $(this).val();
        var newValue = value + '1';
        $(this).val(newValue);
    });
}); 
```

如果您不想使用诸如 jQuery 之类的 javascript 框架，您可以使用纯 javascript 实现相同的效果：

```
window.onload = function() {
    document.getElementById('id_of_your_textbox').onblur = function() {
        var value = this.value;
        var newValue = value + '1';
        this.value = newValue;
    };
}; 
```

注意：这会将字符串值添加`1`到现有文本中。如果要执行整数加法，则需要先解析当前值。您可以为此使用[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)or[`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)方法（取决于数据类型）：

```
var value = parseInt($(this).val());
if (!isNaN(value)) {
    var newValue = value + 1;
    $(this).val(newValue);
} else {
    alert('You have entered an invalid integer value');
} 
```

以下是如何为您的文本字段分配确定性 id，您可以在 javascript 选择器中使用它：

```
@Html.TextBoxFor(m => m.text, new { id = "id_of_your_textbox" }) 
```

# spring-mvc - CloudFoundry 上使用 HTTPS 的 Spring Security

> ID：16211878
> 
> 赞同：3
> 
> 时间：2013-04-25T10:04:05.623
> 
> 标签：spring-mvc, spring-security, cloud-foundry

我尝试使用 spring security xml 中的以下配置访问 CloudFoundry 上的应用程序

```
<intercept-url pattern="/signup*" access="permitAll" requires-channel="https" /> 
```

但它给了我错误**这个网页有一个重定向循环**

但是，当我将其更改为时，`requires-channel="http"`我可以正常看到我的页面。在这两种情况下，我都`https`在我的应用程序中使用了。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-21T15:36:28.507

首先，退后一步，这（[https://johnpfield.wordpress.com/2014/09/10/configuring-ssltls-for-cloud-foundry/](https://johnpfield.wordpress.com/2014/09/10/configuring-ssltls-for-cloud-foundry/)）为问题的性质提供了极好的上下文。

关键段落是

> “这里的威胁模型是云的入口点是高可用性、安全的代理服务器。一旦流量穿过该边界，它就位于受信任的子网上。事实上，运行 Tomcat 应用程序服务器的实际 IP 地址和端口号在云之外是不可见的。获得对该端口的 HTTP 请求的唯一方法是通过安全代理。这种模式是安全架构从业者中公认的最佳实践。”</p>

因此，我们可能不希望或不需要 SSL，但请继续阅读以了解在使用 Cloud Foundry 上部署的 Spring Security 时如何避免 https 重定向问题。

您将在 Cloud Foundry 安装的边界处拥有负载均衡器、HAProxy 或某种终止 SSL 的代理。作为惯例，无论您使用什么，都应配置为设置 X-Forwarded-For 和 X-Forwarded-Proto 标头。请求标头“X-Forwarded-Proto”包含值 http 或 https，具体取决于原始请求，您需要使用此标头参数在堆栈中进一步做出安全决策。

最干净的方法是在容器级别，因此 Spring Security 的行为与部署容器无关。一些典型的配置选项如下

## 1) 雄猫

Tomcat 应配置为 RemoteIPValve，如此[处所述](https://stackoverflow.com/a/30129124/752167)

好消息是 Cloud Foundry 的 Java buildpack 已经为您完成了这项工作，如此[处所示](https://github.com/cloudfoundry/java-buildpack/blob/master/resources/tomcat/conf/server.xml#L25)

## 2）Spring Boot（嵌入式Tomcat）

由于 Tomcat 是嵌入的，Java buildpack 中的 Tomcat 配置不会被激活（参见 buildpack[检测标准](https://github.com/cloudfoundry/java-buildpack/blob/master/docs/container-tomcat.md)），因此需要一些内部 Spring Boot 配置。[幸运的是，按照您对 Spring Boot 的期望进行配置非常简单，您可以按照此处](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-security.html#howto-enable-https)的说明打开 Tomcat 的 RemoteIPValve ，只需定义

> server.tomcat.remote_ip_header=x-forwarded-for
> 
> server.tomcat.protocol_header=x-forwarded-proto

这两种方法都会导致 Tomcat 阀覆盖 ServletRequest.isSecure() 行为的相同结果，因此应用程序不知道任何代理的使用。请注意，阀门仅在设置了“X-Forwarded-Proto”标题时使用。

或者，如果你真的想进入低级别，你可以深入研究 Spring Security 的核心，如此[处所示](https://github.com/BroadleafCommerce/BroadleafCommerce/commit/a4b7e300e957fcb0ec22653a0144b806c51b049a)。作为这项工作的一部分，关于如何通过 Servlet API 为其他容器（WebLogic、JBoss、Jetty、Glassfish）提供“X-Forwarded-Proto”标头，在[https://的评论中分享了一些有用的发现github.com/BroadleafCommerce/BroadleafCommerce/issues/424](https://github.com/BroadleafCommerce/BroadleafCommerce/issues/424)

作为附加说明，CloudFlare 还可以充当终止 SSL 的反向代理（这是通过[此处](http://docs.run.pivotal.io/marketplace/integrations/cloudflare/)讨论的 PWS 推荐的方法），它[确实](https://support.cloudflare.com/hc/en-us/articles/200170946-Does-CloudFlare-include-an-X-Forwarded-For-or-X-Forwarded-Proto-header-)转发了相关的标头。

## 参考

[https://stackoverflow.com/a/28300485/752167](https://stackoverflow.com/a/28300485/752167)

[http://experts.hybris.com/answers/33612/view.html](http://experts.hybris.com/answers/33612/view.html)

[https://github.com/cloudfoundry/java-buildpack/commit/540633bc932299ef4335fde16d4069349c66062e](https://github.com/cloudfoundry/java-buildpack/commit/540633bc932299ef4335fde16d4069349c66062e)

[https://support.run.pivotal.io/entries/24898367-Spring-security-with-https](https://support.run.pivotal.io/entries/24898367-Spring-security-with-https)

[http://docs.spring.io/spring-boot/docs/current/reference/html/howto-embedded-servlet-containers.html#howto-use-tomcat-behind-a-proxy-server](http://docs.spring.io/spring-boot/docs/current/reference/html/howto-embedded-servlet-containers.html#howto-use-tomcat-behind-a-proxy-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T17:05:04.020

当我尝试使用 Spring Security 使用 HTTPS 保护我的页面时，我遇到了同样的问题。

从 CloudFoundry Support 的讨论来看，他们似乎“在路由器上终止 SSL 连接”。请参阅“[是否可以通过 SSL (HTTPS) 访问我的应用程序？](http://support.cloudfoundry.com/entries/20153602-Is-it-possible-to-visit-my-application-via-SSL-HTTPS-) ”。

一年多之后，我找不到关于这个问题的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T22:30:57.783

万一它仍然有用......我发现[这篇文章](https://www.openshift.com/forums/openshift/spring-security-and-https-redirect)提供了解决类似问题的线索。

问题是 org.springframework.security.web.access.channel.SecureChannelProcessor bean 使用 ServletRequest.isSecure() 来决定是接受连接还是重定向，这在云内部变得混乱。

对该 bean 的以下覆盖似乎在 BlueMix 下完成了这项工作 - 不确定 $WSSC 请求标头是否适用于所有环境。

```
@Component
public class ChannelProcessorsPostProcessor implements BeanPostProcessor {

    @Override
    public Object postProcessAfterInitialization(final Object bean, final String beanName) throws BeansException {
        if (bean instanceof SecureChannelProcessor) {
            final SecureChannelProcessor scp = (SecureChannelProcessor) bean;
            return new ChannelProcessor() {
                @Override
                public void decide(FilterInvocation invocation,
                        Collection<ConfigAttribute> config) throws IOException,
                        ServletException {
                    HttpServletRequest httpRequest = invocation.getHttpRequest();
                    // Running under BlueMix (CloudFoundry in general?), the
                    //   invocation.getHttpRequest().isSecure() in SecureChannelProcessor
                    //   was always returning false
                    if ("https".equals(httpRequest.getHeader("$WSSC"))) {
                        return;
                    }
                    scp.decide(invocation, config);
                }

                @Override
                public boolean supports(ConfigAttribute attribute) {
                    return scp.supports(attribute);
                }
            };
        }

        return bean;
    }

    @Override
    public Object postProcessBeforeInitialization(final Object bean, final String beanName) throws BeansException {

        return bean;
    }
} 
```

# c++ - 在 C++ 中使用临界区/信号量

> ID：16211879
> 
> 赞同：0
> 
> 时间：2013-04-25T10:04:06.327
> 
> 标签：c++, initialization, semaphore, critical-section

我最近开始使用 C++ 而不是 Delphi。有些事情似乎完全不同。例如，我不知道如何初始化 Semaphores 和 CriticalSections 等变量。到目前为止，我只知道 2 种可能的方法： 1\. 在构造函数中初始化临界区是愚蠢的，因为每个实例都将使用自己的临界区而不同步任何东西，对吗？2\. 使用全局变量并在创建表单时对其进行初始化似乎也不是完美的解决方案。谁能告诉我如何实现这一目标？

对我需要的关键部分做一个简短的解释：我想从不同的线程中填充一个 ListBox。信号量：不同的线程正在移动鼠标，这不应该被打断。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:51:08.823

与 Delphi 不同，C++ 没有单元初始化/终结的概念（但您已经发现了这一点）。

我们剩下的很少。你需要区分两件事：

*   在哪里声明变量（全局、静态类成员、类成员、函数本地、函数中的静态——我想这涵盖了所有内容）
*   初始化变量的位置（因为您关心 C API，您必须自己调用初始化函数）

事实是，在您的情况下，只要您的程序中需要它的所有其他部分都可以访问它，您在哪里*声明*变量几乎无关紧要，并且关于您应该在哪里初始化它的唯一要求是：在您实际开始使用之前它（这意味着，在您启动其他线程之前）。

在您的情况下，我可能会使用[单例模式](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)。但是 C++ 就是这样，单例在初始化期间会遇到竞争条件，没有干净的方法可以解决这个问题。因此，除了您的单例之外，您还应该确保*在开始在多线程上下文中使用它之前*正确创建它。`getInstance()`在你的开头一个简单的调用就`main()`可以了（或任何你认为合适的地方）。如您所见，这只关心您*声明*变量的位置，而不是*初始化*变量的位置，但不幸的是，C++ 在多线程方面存在重要限制（未指定），因此无法解决。

总结一下：做你想做的（只要它有效），不要担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:18:52.717

在我看来，您只需要一个关键部分来同步来自各个线程的列表框的更新。鼠标将继续移动。信号量不适合解决方案。您在类构造函数中初始化临界区。列表框在哪里。编写一个更新列表框的方法。

```
//psudo code
UpdateListBox()
{
 //enter critical section
 //update
 //leave critical section
} 
```

所有线程都会调用这个方法来更新列表框。

有关关键部分的信息在这里 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms683472%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683472%28v=vs.85%29.aspx)

# collections - Remove item from groovy list

> ID：16211880
> 
> 赞同：7
> 
> 时间：2013-04-25T10:04:08.360
> 
> 标签：collections, groovy

I am trying to remove an item from groovy list. I've tried following:

```
 List<User>  availableUsers = []

    availableUsers = workers

    for (int i = 0; i < availableUsers.size(); i++) {
        if (availableUsers[i].equals(user)){
            availableUsers.drop(i)
            break
        }
    } 
```

I've also tried:

```
availableUsers.remove(user) 
```

In both cases the list gets emptied. Does anyone have any idea what's going on?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T10:08:47.340

你有没有尝试过

```
availableUsers - user 
```

?

文档：http ://groovy.codehaus.org/groovy-jdk/java/util/List.html#minus(java.lang.Object [)](http://groovy.codehaus.org/groovy-jdk/java/util/List.html#minus(java.lang.Object)) 我自己对 groovy 没有太多经验，但这就是我会尝试的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-16T15:14:20.420

如上所述，答案取决于您是否希望删除所有出现的项目......

```
myList = ['a','b','c', 'c']
myList -= 'c'
assert myList == ['a','b'] 
```

...或者只是第一个实例。

```
myList = ['a','b','c', 'c']
myList.remove(myList.indexOf('c'))
assert myList == ['a','b','c'] 
```

我自己还是 Groovy 的新手，但其中一个基本原则是它几乎总是有一种方法可以让普通任务变得微不足道。从集合中添加或删除项目当然是合格的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T10:23:39.913

Fildor 是对的，但如果您只想删除`user`列表中第一次出现的 （减号将删除所有出现的），您可能需要以下内容：

```
list = list.indexOf( user ).with { idx ->
  if( idx > -1 ) {
    new ArrayList( list ).with { a ->
      a.remove( idx )
      a
    }
  }
  else list
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-05T13:16:30.560

我有一个相关的要求，但想删除多个知道它们的索引位置的项目。在循环中做到这一点**并不容易，**因为删除第一个项目后，其余项目的索引位置会发生变化。首先创建一个包含要删除的项目的列表，然后使用集合减去操作将它们从目标列表中删除似乎很容易。这是一个例子：

```
myList=['a','b','c','d']
remove=[0,1,2] //index list of list elements  to remove
removeList=myList[remove]
println removeList
assert ['d']== myList.minus(removeList) 
```

限制：如果索引处的值在目标列表中多次出现，则删除所有实例。

因此，如果

```
myList=['a','b','c','d','a','e']
remove=[0,1,2]
removeList=myList[remove]
assert myList.minus(removeList)== ['d','e'] 
```

结果将是 d,e

# python - 单个事务中有许多不同的分片计数器

> ID：16211891
> 
> 赞同：1
> 
> 时间：2013-04-25T10:04:34.313
> 
> 标签：python, google-app-engine, google-cloud-datastore

我必须在单个事务中增加三个不同的计数器。除此之外，我还必须操纵其他三个实体。我明白了

```
too many entity groups in a single transaction 
```

我使用来自[https://developers.google.com/appengine/articles/sharding_counters](https://developers.google.com/appengine/articles/sharding_counters)的食谱来实现我的计数器。我根据业务逻辑在一些模型（类）方法中增加我的计数器。

作为一种解决方法，我实现了一个使用任务来更新计数器的延迟增量方法。但是，如果计数器的数量进一步增加，则无法很好地扩展，因为单个事务中的任务也有限制（我认为是 5），我想这不是最有效的方式。

我还发现[https://github.com/DocSavage/sharded_counter/blob/master/counter.py](https://github.com/DocSavage/sharded_counter/blob/master/counter.py)即使在通过 memcache 出现 db 错误的情况下，它似乎也能确保更新计数器。但如果交易失败，我不想增加我的计数器。

另一个想法是记住我必须在 Web 请求期间增加的计数器，并在单个延迟任务中增加它们。我不知道如何在不将请求中创建的对象传递给模型方法的情况下以干净且线程安全的方式实现这一点。我认为这段代码会很丑陋，而且不在同一个交易中：

```
def my_request_handler():
    counter_session = model.counter_session()
    model.mylogic(counter_session, other_params)
    counter_session.write() 
```

有什么经验或想法吗？

顺便说一句：我正在使用 python、ndb 和 flask 如果计数器不是 100% 准确，那也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T13:43:09.903

如[交易和实体组](https://developers.google.com/appengine/docs/python/datastore/entities#Python_Transactions_and_entity_groups)中所述：

> 最简单的方法是确定您需要能够在同一事务中处理哪些实体。然后，当您创建这些实体时，将它们放置在同一个实体组中，方法是用一个共同的祖先声明它们。然后它们都将位于同一个实体组中，您将始终能够以事务方式更新和读取它们。

# java - 来自 java 应用程序的移动应用程序身份验证和会话管理

> ID：16211893
> 
> 赞同：1
> 
> 时间：2013-04-25T10:04:34.380
> 
> 标签：java, authentication, mobile-application, session-management

我正在寻找以下列出的问题的建议

我有一个基于 java 开发的 Web 应用程序和具有以下功能的当前 Web 应用程序

1.  身份验证（登录/注销）
2.  会话管理
3.  带有订阅和配置文件编辑的仪表板
4.  一些 CRUD 功能。

现在，我正在计划具有相同未来的移动应用程序。由于我当前的应用程序能够提供 RESTFul 服务来执行 CRUD 操作。让我知道在移动应用程序中实现身份验证和会话管理的最佳方法？

提前感谢您的建议。

祝你有美好的一天。

# c++ - 如何使用 qwtplot3D 从 Mat 类型的 OpenCV 绘制 3D 图（surfaceplot）？

> ID：16211896
> 
> 赞同：2
> 
> 时间：2013-04-25T10:04:44.197
> 
> 标签：c++, opencv, graph, 3d, qt4

我有一个使用 OpenCV 的 2D Mat 数据/图像。我想从中绘制一个 3D 图，行作为 x 轴，列作为 y 轴，每个坐标（行，列）上的像素值作为 z 轴。我想绘制类似于 Matlab 中的 surf 函数的图形。我尝试使用 bool loadFromData (double **data, unsigned int columns, unsigned int rows, double minx, double maxx, double miny, double maxy) 函数，但是当我调试到这一行时我的程序崩溃了。我实际上在使用这个 qwtplot3d 和 qt4 方面非常新，所以请帮我看看我哪里出错了。

我所做的是将所有像素值复制到一个数组中，然后尝试将其制成一个由行和列组成的二维数组，并将其传递给 loadFromData，如下所示：

```
//abs_outcorr is Mat type of opencv
int rows= abs_outcorr.rows;
int columns= abs_outcorr.cols * abs_outcorr.channels();

double fromMat[columns*rows];

for (int j=0; j<rows; j++)
{
double* data= abs_outcorr.ptr<double>(j); //access the pixel value from Mat
for (int i=0; i<columns; i++)
{
fromMat[i] = data[i];
}
}

double** x = new double * [rows];
for(int i=0; i<columns; i++)
x[i] = new double[rows];

for(int i=0; i<rows; i++)
for(int j=0; j<columns; j++)
x[j][i] = fromMat[columns*i + j];

for( int i=0; i<columns; i++)
delete x[i];
delete []x;

/* My main project is based on mainwindow with some buttons.
All these codes I implemented in a button clicked & I would like to pop out the graph,
but not sure the codes below work, please help me */

QWidget window;
window.setWindowTitle("plot 3d");
QHBoxLayout layout;
Qwt3D::SurfacePlot qsp(&window);

qsp.loadFromData(x, columns, rows, 0, columns, 0, rows);
qsp.setRotation(30,0,15);
qsp.setScale(1,1,1);
qsp.setShift(0.15,0,0);
qsp.setZoom(0.9);
for (unsigned i=0; i!=qsp.coordinates()->axes.size(); ++i)
{
qsp.coordinates()->axes[i].setMajors(7);
qsp.coordinates()->axes[i].setMinors(4);
}

qsp.coordinates()->axes[Qwt3D::X1].setLabelString("x");
qsp.coordinates()->axes[Qwt3D::Y1].setLabelString("y");
qsp.coordinates()->axes[Qwt3D::Z1].setLabelString("z");
qsp.setCoordinateStyle(Qwt3D::BOX);
qsp.updateData();
qsp.updateGL();

qsp.show();
layout.addWidget(&qsp);
window.setLayout(&layout);
window.resize(1000,800);
window.show();

//////////////////////////////////////////////////////////////
//These are some of my pixel value of my Mat (32x32)
//////////////////////////////////////////////////////////////

Row 0 Column 0 9.61749e-08
Row 0 Column 1 2.16608e-09
Row 0 Column 2 3.25873e-08
Row 0 Column 3 2.65754e-08
Row 0 Column 4 2.93116e-08
Row 0 Column 5 6.55923e-08
Row 0 Column 6 4.56592e-08
Row 0 Column 7 4.91113e-08
Row 0 Column 8 1.73816e-08
Row 0 Column 9 2.27045e-10
Row 0 Column 10 7.36088e-08
.
.
.
Row 16 Column 16 1
.
.
.
Row 31 Column 23 5.1846e-08
Row 31 Column 24 1.01708e-07
Row 31 Column 25 4.25331e-09
Row 31 Column 26 2.77903e-08
Row 31 Column 27 1.14044e-08
Row 31 Column 28 6.03817e-08
Row 31 Column 29 2.65248e-08
Row 31 Column 30 1.46648e-08
Row 31 Column 31 8.05808e-08 
```

基本上这个 Mat/image 是中心的一个亮点，值为 1，而其余的全是黑色，几乎为 0。预期的结果应该看起来像图中间的一个尖锐的直峰。谢谢。

# excel - Excel 图形自动调整轴原点的大小

> ID：16211902
> 
> 赞同：2
> 
> 时间：2013-04-25T10:05:07.250
> 
> 标签：excel, vba, graph, resize, autoresize

我有以下代码绘制散点图。有没有一种优雅的方法来调整绘图区域的大小，使得 x 和 y 轴并不总是自动从零​​开始，而是刚好低于最低值？目前，我所有的数据点最终都聚集在一个角落。非常感谢！

```
Set cht = ActiveChart
'GRAPH 1
    Set rng1 = ActiveSheet.Range(Range("AC13").Offset(jump * 50, 0), Range("AG23").Offset(jump * 50, 0))

With ActiveSheet.ChartObjects.Add(Left:=rng1.Left, Width:=rng1.Width, Top:=rng1.Top, Height:=rng1.Height)
 '(Left:=100, Width:=375, Top:=75, Height:=225)
    .Chart.ChartType = xlXYScatterLines
    .Chart.HasLegend = False
    .Chart.Axes(xlCategory).TickLabels.Font.Size = 18
    .Chart.Axes(xlValue).TickLabels.Font.Size = 18
    '.Chart.SetSourceData Source:=Range("U13:O40,T13:N40")
    Set srs = .Chart.SeriesCollection.NewSeries
            srs.XValues = Range(Range("U13").Offset(jump * 50, 0), Range("U13").Offset(jump * 50, 0).End(xlDown))
    srs.Values = Range(Range("T13").Offset(jump * 50, 0), Range("T13").Offset(jump * 50, 0).End(xlDown))

End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:09:32.583

如果您的 y 范围数据在 的单元格`B1:B10`中，`ActiveSheet`那么您可以使用这样的代码将范围从最小值的 90% 开始（即正下方）

```
Set cht = ActiveChart
cht.Axes(xlValue).MinimumScale = 0.9 * Application.Min([b1:b10]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:08:48.420

看看这个教程： [Calculate Nice Axis Scales in Excel VBA](http://peltiertech.com/WordPress/calculate-nice-axis-scales-in-excel-vba/)

# c - 杀死负责将标准输出重定向到文件的进程使其成为僵尸

> ID：16211908
> 
> 赞同：0
> 
> 时间：2013-04-25T10:05:19.900
> 
> 标签：c, linux, signals, fork

我正在使用处理从管道读取和写入文件的分叉进程（“pipe2file”）重定向程序（程序“exec'ed”）的输出。

如果程序“exec'ed”被杀死，并且它的等待状态被恢复，那么“pipe2file”进程也需要做同样的事情。
所以，我正在做的是这样的：

1.  关闭它使用的管道末端
2.  通过发送终止信号`kill(pipe2file, SIGKILL)`
3.  像这样使用 waitpid 来获取其退出状态`waitpid(pipe2file, &status, 1)`
4.  检查状态`if (WIFEXITED(status) || WIFSIGNALED(status))`

尽管如此，在上述步骤之后，pipe2file 进程最终还是一个僵尸。
怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:22:44.717

你在这里有一个竞争条件。打电话`kill`可能不会立即杀死您的孩子。这需要一点时间。您没有等待足够长的时间让您的孩子退出。

```
waitpid(pipe2file, &status, 1) 
```

如果你的孩子还没有退出，就会放弃。`1`in options 是选项（例如，`WNOHANG`不要等到它实际退出）。将其更改为

```
waitpid(pipe2file, &status, 0) 
```

# c# - .Distinct() 子句不起作用 c# MVC

> ID：16211909
> 
> 赞同：0
> 
> 时间：2013-04-25T10:05:27.447
> 
> 标签：c#, asp.net-mvc, linq, distinct

我需要为多个视图填充下拉列表。相同的下拉菜单将用于我编写了一个 Html Helper 方法来生成下拉菜单的内容。

```
 public static List<SelectListItem> GetBatchNumbers(this HtmlHelper html)
    {
        List<SelectListItem> items = new List<SelectListItem>();
        ModelContainer ctn = new ModelContainer();

        var batchNumbers = ctn.SearchResults.OrderBy(x => x.BatchID).ToList();

        foreach (var batch in batchNumbers.Distinct())
        {
            items.Add(new SelectListItem()
            {
                Text = batch.BatchID + "-" + batch.WebsiteName + "-" + batch.SourceName,
                Value = batch.BatchID
            });
        }

        return items;
    } 
```

所以在我的测试数据中，我执行了3批次的搜索结果。所以我想在下拉列表中看到 3 个批号。但是，我看到 SearchResults 表中的每个条目都重复了一个批号，因此 Distinct() 子句似乎没有以所需的方式工作。

我读过 Distinct() 对对象很棘手，有谁知道我如何以另一种方式实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T10:14:28.397

有一些实现，例如`IEnumerable<obj>.DistinctBy(o => o.Prop)`通过特殊属性支持 distinct。

以下也有效

```
list.GroupBy(l => l.Property).Select(group => group.First()) 
```

# javascript - How to show just the first matched selector on click when there may be multiple identical selectors

> ID：16211912
> 
> 赞同：0
> 
> 时间：2013-04-25T10:05:31.570
> 
> 标签：javascript, jquery

I have a series of read more buttons with accompanying div content, unfortunately these read more and content divs cant be wrapped together so I was wondering what is the best way to display the correct content when a read more link is clicked, I've tried .closest and .next with no success.

**Fiddle:** [http://jsfiddle.net/QJcFf/1/](http://jsfiddle.net/QJcFf/1/)

**JS**

```
var readMore = $('.readmore');

readMore.on('click', function(e) {

   e.preventDefault();

   var el = $(this);
    console.log(el);

   el.next('.more-ctn').show();
    console.log( el.closest('.more-ctn') );

}); 
```

**HTML**

```
<div class="main-content">
    <p>lorem ipsum <a href="#" class="readmore">Read more</a></p>

    <div class="more-ctn">
        <p>Content for first readmore</p>
    </div>

    <p>lorem ipsum <a href="#" class="readmore">Read more</a></p>

    <div class="more-ctn">
        <p>Content for first readmore</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:07:02.310

只需替换以下代码：

```
el.next('.more-ctn').show(); 
```

对于这个：

```
el.parent().next('.more-ctn').show(); 
```

见[**工作小提琴**](http://jsfiddle.net/gnel/QJcFf/2/)

# node.js - FATAL ERROR: JS Allocation failed

> ID：16211914
> 
> 赞同：0
> 
> 时间：2013-04-25T10:05:36.417
> 
> 标签：node.js, nodemailer

My script is failing when attempting to load the template, with the following error:

```
FATAL ERROR: JS Allocation failed - process out of memory exited with code 5 
```

The code that I'm calling looks like this:

```
emailTemplates(templatesDir, function(err, template) {
    winston.info("Setting up templates.", templatesDir);
    if(err) {
        winston.error(err);
    }else{
        var today = new Date().getDay();
        winston.info("Found that today is ", aDays[today]);

        template("notify", {
            reports: [{
                item: "merged",
                desc: "Blah blah"
            },{
                item: "searched",
                desc: "Blah blah"
            }],
            vars: Operators.BBT.mail,
            day: aDays[today],
            fusionAPIRan: canRunFAPI
        }, function(err, html, text) {
            if(err) {
                winston.error(err);
            }else{
                winston.info("Attempting to send an email!");
                smtpTransport.sendMail({
                    from: "Webmaster <webmaster@example.co.uk>",
                    to: "james@example.co.uk",
                    subject: "Worker - Notification Email",
                    html: html
                }, function(error, response){
                    if(error){
                        winston.error(error);
                        cb(false);
                    }else{ 
                        winston.info("Message sent: " + response.message + ", message id: " + response.messageId);
                        cb(true);
                    }
                });
            }
        });
    }
}); 
```

It gets as far as `Found that today is xxx` and the `winston.error` inside doesn't get called. What's causing that? A dodgy template perhaps?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:35:10.863

经过大量的挖掘和调试，我设法找到了这个问题的原因。我正在使用[node-email-templates](https://github.com/niftylettuce/node-email-templates)，它使用[EJS](https://github.com/visionmedia/ejs)处理 HTML 模板中的 JavaScript 代码，然后使用[Nodemailer](https://github.com/andris9/Nodemailer)发送电子邮件。

**该问题发生在 EJS 模块中，特别是在**尝试处理注释中的变量时。

```
<!-- The entire job took <%= time => to complete. --> 
```

注释中的代码`<%= time %>`会导致沿线某处崩溃。我已经 在 EJS 的 GitHub 问题页面上[报告了这个错误。](https://github.com/visionmedia/ejs/issues/110)当我有时间工作时，我会尝试修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T07:30:16.317

我遇到了同样的错误，但我的问题是 html2text 将我的一个变量分成两行，比如

```
<%= var
%> 
```

在更正这一点后，变量都在一行上，我不再得到分配错误。

# cocoa - 停止一个 NSRunLoop

> ID：16211915
> 
> 赞同：10
> 
> 时间：2013-04-25T10:05:37.163
> 
> 标签：cocoa, cocoa-touch, nsurlconnection, nsrunloop, cfrunloop

我在一个线程中有一个连接，所以我将它添加到运行循环以获取所有数据：

```
 [[NSRunLoop currentRunLoop] run];
  [connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

但我找不到任何方法来阻止它

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection{
    if([NSRunLoop currentRunLoop]){
        [[NSRunLoop currentRunLoop] cancelPerformSelectorsWithTarget:self];
    }
    [connection cancel];
} 
```

我怎样才能停止这个循环？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-28T15:29:23.420

您可以通过 Core Fundation API 停止运行循环：

```
CFRunLoopStop(CFRunLoopGetCurrent()); 
```

# java - Size of buttons inside GridBagLayout

> ID：16211917
> 
> 赞同：2
> 
> 时间：2013-04-25T10:05:40.927
> 
> 标签：java, swing, jbutton, gridbaglayout, preferredsize

I have an 3 * 6 array of `JButtons` inside a `GridBagLayout`. But since the text length of each button may vary, each column of buttons has slightly different width. How do I make them have the same width?

Here is the code:

```
for (int i = 0; i < 3; i++)
{
    for (int j = 0; j < 6; j++)
    {
        buttonConstraints.fill = GridBagConstraints.BOTH;
        buttonConstraints.weightx = 1;
        buttonConstraints.weighty = 1;
        buttonConstraints.gridx = j;
        buttonConstraints.gridy = i;
        buttonPanel.add(buttons[i * 6 + j], buttonConstraints);
    }
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:27:31.037

> 但是由于每个按钮的文本长度可能会有所不同，因此每列按钮的宽度都会略有不同。如何使它们具有相同的宽度？

*   简单的解决方案是使用`GridLayout`

*   `GridBagLayout`要创建一个列，每一列的维度是从第一行`PrefferedSize`的每一行计算出来的`JButtons`，这些坐标用于当前容器中的其余行

编辑

*   但[gbc.weightx 和 gbc.weighty 可用于百分比除法](https://stackoverflow.com/a/11261110/714968)

*   模拟 GridLayout （重要的问题是为什么要为此烦恼）

![在此处输入图像描述](https://i.stack.imgur.com/7Zxjj.jpg)

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class GridFromGridBagLayout {

    private JFrame frame = new JFrame();
    private JPanel panel = new JPanel();

    public GridFromGridBagLayout() {
        panel.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        for (int row = 0; row < 6; row++) {
            for (int col = 0; col < 3; col++) {
                JButton b = new JButton("(" + row + ", " + col + ")");
                b.putClientProperty("column", col);
                b.putClientProperty("row", row);
                b.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JButton btn = (JButton) e.getSource();
                        System.out.println("clicked column "
                                + btn.getClientProperty("column")
                                + ", row " + btn.getClientProperty("row"));
                    }
                });
                gbc.gridx = col;
                gbc.gridy = row;
                gbc.gridwidth = gbc.gridheight = 1;
                gbc.fill = GridBagConstraints.BOTH;
                gbc.anchor = GridBagConstraints.NORTHWEST;
                gbc.weightx = 33;
                gbc.weighty = 20;
                panel.add(b, gbc);
            }
        }
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GridFromGridBagLayout borderPanels = new GridFromGridBagLayout();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:09:42.697

在使用 GridBagConstraints 的帮助下，您可以将宽度设置为相等或根据需要。请点击此链接寻求帮助：

[GridBagConstraints](http://www.java2s.com/Tutorial/Java/0240__Swing/1480__GridBagConstraints.htm)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-15T05:23:46.330

尝试这个：

```
buttonConstraints.fill = GridBagConstraints.HORIZONTAL; 
```

# webpage - Prestashop - 在家庭特色产品上显示数量和功能

> ID：16211918
> 
> 赞同：0
> 
> 时间：2013-04-25T10:05:45.567
> 
> 标签：webpage, prestashop

我想在家庭特色产品上展示功能。

在 homefeatured.tpl 上，我添加了：

```
<!-- features -->
{foreach from=$products->features item=feature}
    <!-- wine -->
    {if $feature.id_feature eq 7}
        <p class="feature-wine"><a href="{$products->product_link}" title="{$products->name|escape:html:'UTF-8'}">{$feature.value|escape:'htmlall':'UTF-8'}</a></p>
    {/if}
{/foreach} 
```

但它不起作用......你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:11:52.300

homefeatured 模块不会将这些变量发送到模板。

我的建议是复制这个模块来创建你的模块并添加这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T18:04:46.680

您需要修改 homefeatured.php 以从模型中获取此变量并通过 Smarty->assign() 将其传递给 Smarty

# java - JavaFX WebView / WebEngine Cache external JavaScript

> ID：16211920
> 
> 赞同：5
> 
> 时间：2013-04-25T10:05:48.600
> 
> 标签：java, caching, webview, javafx, browser-cache

**Situation**: I have a Simple HTML page which have a normal script tag like this

```
<script src="main.js"></script> 
```

After i load the html , i update the main.js , and make a reload (throught UI Button).

**The Problem** My new JS is not taken , i must close the Application and open it again.

What i did try: -not using webEngine.reload() , but webEngine.load() -making a new broswer every time a reload occurs. -making a new stage with a new broswer -setting all nodes caching off -in HTML following code

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

-InetAddressCachePolicy:

```
InetAddressCachePolicy.setNegativeIfNotSet(InetAddressCachePolicy.NEVER); 
```

-VM Options: -Dnetworkaddress.cache.ttl=0.

**The Question** Is there any way to delete the cache or enforce the WebView to reload all resources other than appending a number to JS filename every time i update it?

Note:I use NetBeans 7.3 With last Java (update 22)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-23T15:45:22.413

几个小时后，我找到了一种非常方便的方式来分享：

```
webEngine.setJavaScriptEnabled(true);
webEngine.executeScript("location.reload(true);"); 
```

显然，JavaFX WebView 的 JavaScript 引擎完全支持 JavaScript 方法 location.reload(true)。“true”强制从服务器（或本地文件系统）重新加载资源。我用 and 试过了。如果我更改文件的内容并在 WebEngine 中执行上述 js 代码，图像将被替换并且 js 代码按照 bar.js 中的更改执行。

不幸的是，没有 Java 方法可以方便地访问此功能。

我承认，它并没有真正清除缓存，但它会重新加载源，这对于大多数情况来说应该足够了。

在 JRE 1.8.0_91 中测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T00:04:28.527

如此处所述：http: [//docs.oracle.com/javafx/8/webview/overview.htm](http://docs.oracle.com/javafx/8/webview/overview.htm)

> 使用 WebView 组件时，您应该记住它具有默认的内存缓存。这意味着一旦包含 WebView 组件的应用程序关闭，所有缓存的内容都会丢失。

因此，如果我们在 Webview 中“即时”更改脚本或 css 文件，则不会重新加载/刷新该文件 :-(
我找到了另一种解决方法，与此不同（而且看起来更简单）从@Rany 找到。我会解释它，希望它可以帮助某人......

只需**在对脚本或样式表的调用结束时添加自定义参数**。
例如，改为这样写：

```
<script type="text/javascript" src="javascript.js"></script> 
```

写这个：

```
<script type="text/javascript" src="javascript.js?c=r_963"></script> 
```

其中“r_963”是一个“r_”字符串，后跟一个随机的 0-999 int 数。 **每次我们需要刷新时，最终数字都必须更改其值。**
样式表也是如此。
这个对我有用 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T20:04:00.203

当我使用用户编辑的 css 文件时，我遇到了类似的问题。UI 的目标是允许用户编辑从给定的外部 .html 文件加载的外部 .css 文件，并在 WebEngine 中实时查看更改。

我也找不到任何对缓存的引用以清除或以任何方式强制 WebEngine 重新加载其所有资源。但我确实想出了一个效果很好的解决方案。

我最终做的是将外部 html 文件的内容加载到内存中，并将引用相关外部 .css 文件的 <link> 标记替换为包含 .css 内容的 <style> 内联 css 标记文件。然后我用

```
WebEngine.loadContent(EditedHTML); 
```

传递新编辑的HTML。这种技术可以很容易地修改为将外部 JS 文件加载到内联的 < Script > 标签中。

这种技术对我来说非常有效，因为我正在加载和编辑的所有文件都是本地的。我将它们的内容加载到内存中，并在应用程序启动时保存对它们的引用。如果您尝试将 JS 文件添加到从服务器 http 请求中检索到的网页中，那么将这种技术包含到您的应用程序中可能会更困难，但我认为这不是不可能的。

具体实现将取决于您的应用程序的整体结构，但 sudo 代码将是这样的：

1.  加载 html 文件的内容。
2.  将内容解析为 HTML 文档。*
3.  对于每个 css <link> 标签
    1.  加载关联的 css 文件的内容
    2.  将链接标签替换为 <style> 标签，其内容是加载的 css 文件的内容
4.  调用 WebEngine.loadContent(editedHTML)

*为了将内容解析为 HTML 文档，可以使用许多有用且易于使用的库。[这个](https://stackoverflow.com/questions/2168610/which-html-parser-is-best)SO Question 是寻找一些最常用的问题的好地方。我使用 jSoup 并发现它非常简单、强大且有效，并且建议您至少先看看/尝试一下，然后再选择其他的。

这可能需要对您的应用程序进行一些重组，但这种技术是迄今为止我想出的最佳解决方案。如果您有任何问题/疑虑，请告诉我，我将尝试根据我对这项技术的经验来回答/解决这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T10:47:48.967

**我是如何解决这个问题的：**

*   将包含 HTML 文件和所有 JS 文件的目标目录复制到随机生成的文件夹中。
*   在每次重新加载时生成一个新文件夹，复制内容，删除旧文件夹，从新文件夹加载。

“mcdonasm”的答案是我尝试过的事情之一，如果在“main.js”中只有 JavaScript，它会起作用，但如果它引用其他 JS 文件（如我的情况），其他的将被缓存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-26T14:33:29.030

我有类似的要求，但想要一个固定的目录位置。这对我有用：

```
first = true;
final WebView view = new WebView();
view.getEngine().getLoadWorker().stateProperty().addListener(new ChangeListener<Worker.State>() {

    @Override
    public void changed(ObservableValue<? extends Worker.State> ov, Worker.State t, Worker.State t1) {
        System.out.println(t1);
        if(t1.equals(State.SUCCEEDED) && first) {
            first = false;
            view.getEngine().reload();
        }
    }
}); 
```

基本上强制重新加载一次，它也会刷新外部数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-21T18:41:49.797

我有一个类似的问题，但与样式表。我正在开发一个 Web 创作工具，并希望在显示的 HTML 文件中反映样式表的更改，而无需重新启动应用程序。

我发现唯一可行的方法是创建一个新的 WebView 对象（从不显示）并在其中显式加载样式表。完成后，刷新引用该样式表的任何 html 文件将自动反映更改。

```
/** Forces an update to the internally-cached stylesheet.
 * @param file The CSS file.
 */
private void updateInternalCache(File file) {
    WebView cssLoader = new WebView();
    String fileLocation = file.toURI().toString();
    cssLoader.getEngine().load(fileLocation);
} 
```

# sql-server - 当列不是日期格式时如何按日期排序？

> ID：16211930
> 
> 赞同：1
> 
> 时间：2013-04-25T10:06:33.757
> 
> 标签：sql-server

我正在查询的数据库有一个用户表，其中有一列包含用户注册网站的日期。

将日期输入到 varchar 列中，但没有正确的日期格式，如下所示：

```
Apr 18 2013 12:27PM 
```

当我`SELECT MAX (dateColumn)`在日期范围内获得大约一半的值时。我考虑过使用子字符串来获取年份，然后是月份，然后是日期并按顺序排列它们。问题是日期以 0 开头的日期将*缩短*一个字符，如下所示：

```
May 1 2013 12:27PM 
```

**有没有一种简单的方法可以在不改变数据库结构的情况下找到最高日期？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:25:42.447

尝试`select max(convert(datetime, dateColumn, 109))`

有关在 SQLServer 中的数据类型（包括日期格式）之间进行转换的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:10:58.327

将列转换为“YYYYMMDD”格式的值，然后对该列进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:12:22.217

尝试将 varchar 转换为日期时间格式并执行。您应该以相同的格式保存日期。它只是将 varchar 转换为日期时间的示例。

```
Select * from tblName 
    where Convert(datetime, Convert(varchar(12),DOJ,106)) as DOJ >=
          Convert(datetime, Convert(varchar(12),'2013-04-28',106)) 
```

# html - 可以让 div 像 select 一样无限溢出吗？

> ID：16211935
> 
> 赞同：0
> 
> 时间：2013-04-25T10:06:46.860
> 
> 标签：html, css

下拉选择字段将溢出它的任何容器，甚至是浏览器窗口，但除此之外，是否可以使 div 以相同的方式运行，即它的容器的任何属性都不会阻止它溢出它们？

# java - UIMA for parsing emails

> ID：16211938
> 
> 赞同：1
> 
> 时间：2013-04-25T10:06:52.790
> 
> 标签：java, apache, uima

I am new to UIMA.

I want to develop an app using UIMA and uimaFIT that can parse any email related to air tickets, such as Confirmation Email, Cancellation Email etc. and extract the valuable information from it like Ticket Number, Flight Number, Departure Time, Arrival Time, Passenger Name etc. How can I achieve this using uimaFIT. Currently I tried to use uimaFIT to just read a String and with Regular Expression tried to extract the information, but it seems too complicated as Email is not structured. Any suggestions of how to connect with the emails and perform parsing without using RegEx.

*Any suggestions.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:51:59.580

Is your set of types of emails (Confirmation Email, Cancellation Email etc) small enough? If yes, in a first step, try to do a simple classification into types of email. Then in the next steps, you can apply different tools based on the type of email.

For the rest, I think it's best to use regexes, even if it is tedious. You might want to look at [UIMA TextMarker](http://uima.apache.org/textmarker.html) to quickly implement your regexes/rules.

*   Ticket Number: regex
*   Flight Number: regex
*   Departure Time, Arrival Time: regex
*   Passenger Name: Person NER ([here](http://www.florianlaws.de/software/) a uima example) (or match with email To: field?)

# java - How to make a subString from another string by searching for certain characters

> ID：16211947
> 
> 赞同：1
> 
> 时间：2013-04-25T10:07:18.673
> 
> 标签：java, string, substring

```
String x = "ID:12 Patient Name:...";    
String z = = x.substring(3, x.indexOf(' P')); 
```

I want to get the ID number

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:09:51.343

您快到了。只需使用这样的东西： -

```
String z = x.substring(x.indexOf("ID:")+3, x.indexOf("Patient")-1); 
```

`+3`- 因为你不需要`ID:`

`-1`- 因为你不需要病人前面的空间

这是考虑到之前有一个**SINGLE**空格`Patient`，如果没有，因为**@BuhakeSindi**建议使用这样的`trim()`方法：-

```
String z = x.substring(x.indexOf("ID:")+3, x.indexOf("Patient"));
z = z.trim(); 
```

# visual-studio-2012 - 我在 VS 中找不到更改源代码控制

> ID：16211949
> 
> 赞同：0
> 
> 时间：2013-04-25T10:07:19.273
> 
> 标签：visual-studio-2012

它应该在 File -> Source control 下。我想通过断开项目，以另一个用户身份登录并上传，将项目从一个 tfs 移动到另一个。

但我找不到在哪里注销：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T18:12:46.370

确保您已签出解决方案。一次，解决方案已签出，再次转到 File->Source Control

# objective-c - 具有重复次数的 NSString 格式字符串

> ID：16211950
> 
> 赞同：0
> 
> 时间：2013-04-25T10:07:20.323
> 
> 标签：objective-c, cocoa

**代码：**

```
[mutableExpectedContent appendFormat:@"%@%@%@",
 expectedSuffix ?: @"",
 PILLoremIpsum,
 PILParagraphBreak]; 
```

**问题：**

是否可以用相同类型的重复参数代替`%@%@%@`更简单的参数？我喜欢使用描述重复次数的量词；喜欢`%3@`或类似的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:12:09.973

不，这里有[一篇文章](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)总结了字符串格式化方法和函数支持的格式说明符。

# xml - 无法为连接 url 'null' postgresql 创建类 '' 的 jdbc 驱动程序

> ID：16211953
> 
> 赞同：0
> 
> 时间：2013-04-25T10:07:24.017
> 
> 标签：xml, jakarta-ee, jdbc, tomcat6, postgresql-8.4

当我尝试部署我的 WAR 应用程序时出现此错误。

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of cla
ss '' for connect URL 'null'
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(B
asicDataSource.java:1452)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDat
aSource.java:1371)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSo
urce.java:1044)
        at kimet.ConexionSQL.getConexion(ConexionSQL.java:20)
        at kimet.Global.cargarHashtablesAux(Global.java:2360)
        at kimet.Inicio.init(Inicio.java:33)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.
java:1206)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:10
26)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContex
t.java:4421)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4
734)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77
9)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)

        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)

        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778
)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504
)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java
:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
eSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)

        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)

        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463
)
        at org.apache.catalina.core.StandardService.start(StandardService.java:5
25)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754
)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NullPointerException
        at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)
        at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)
        at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)
        at java.sql.DriverManager.getDriver(DriverManager.java:253)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(B
asicDataSource.java:1437)
        ... 31 more
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of cla
ss '' for connect URL 'null'
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(B
asicDataSource.java:1452)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDat
aSource.java:1371)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSo
urce.java:1044)
        at kimet.ConexionSQL.getConexion(ConexionSQL.java:20)
        at kimet.Global.cargarHashtablesAux(Global.java:2360)
        at kimet.Inicio.init(Inicio.java:33)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.
java:1206)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:10
26)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContex
t.java:4421)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4
734)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:77
9)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)

        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)

        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778
)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504
)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java
:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
eSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)

        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)

        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463
)
        at org.apache.catalina.core.StandardService.start(StandardService.java:5
25)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754
)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NullPointerException
        at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)
        at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)
        at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)
        at java.sql.DriverManager.getDriver(DriverManager.java:253)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(B
asicDataSource.java:1437)
        ... 31 more
--- Inicializado KimetSport  --- Thu Apr 25 11:16:13 CEST 2013
25-abr-2013 11:16:13 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio docs de la aplicaci¾n web
25-abr-2013 11:16:13 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio examples de la aplicaci¾n web
25-abr-2013 11:16:14 org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio ROOT de la aplicaci¾n web
25-abr-2013 11:16:14 org.apache.coyote.http11.Http11AprProtocol start
INFO: Arrancando Coyote HTTP/1.1 en puerto http-8080
25-abr-2013 11:16:14 org.apache.coyote.ajp.AjpAprProtocol start
INFO: Arrancando Coyote AJP/1.3 en ajp-8009
25-abr-2013 11:16:14 org.apache.catalina.startup.Catalina start
INFO: Server startup in 4540 ms 
```

我给你看我修改过的文件：

一开始，在Tomcat的context.xml文件中：

```
<Context reloadable="true" privileged="true">
    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

在 web.xml 文件中：

```
<resource-ref>
    <!-- <description>DB Kimet</description> -->
    <res-ref-name>modulo/KIMET</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    <!-- <res-sharing-scope>Shareable</res-sharing-scope> -->
</resource-ref> 
```

最后，我在“conf\Catalina\localhost”目录中创建了自己的 xml 文件“aKS.xml”

```
<?xml version='1.0' encoding='utf-8'?>
    <Context crossContext="true" displayName="Kimet Sport" docBase="C:/Workarea/kimetsportweb/WebContent" path="/aKS" reloadable="true">
    <Resource name="modulo/KIMET"
    auth="Container"
    type="javax.sql.DataSource"
    factory="org.apache.commons.dbcp.BasicDataSourceFactory"
    defaultAutoCommit="false"
    removeAbandoned="false"
    removeAbandonedTimeout="30"
    maxActive="50"
    maxIdle="20"
    maxWait="10000"
    username="usukimet"
    password="usukimet"
    driverClassName="org.postgresql.Driver"
    url="jdbc:postgresql://192.168.1.169:5432/kimet_desarrollo"/>       
</Context> 
```

有人知道为什么不工作吗？任何建议都将受到欢迎！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:15:44.960

What is that `aKS.xml` file of yours?

If you want to specify a datasource for your WAR in Tomcat outside of your application, you have to configure that in `context.xml`, for example:

```
 <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="javauser" password="javadude" driverClassName="com.mysql.jdbc.Driver"
               url="jdbc:mysql://localhost:3306/javatest"/> 
```

(Taken from Tomcat's [JNDI Datasource HOW-TO](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html).)

# lua - Awesome WM 3.5 seperate config files

> ID：16211954
> 
> 赞同：0
> 
> 时间：2013-04-25T10:07:25.940
> 
> 标签：lua, awesome-wm, xrandr

I'm not sure if it is ok to ask about this things here so tell me if it is not :) . I have no idea where else to ask.

I have problem with Awesome WM. I try to separate rc.lua into different files (because is starts to be long) and just load them in rc.lua.

I have function for changing xrandr layout. This code works fine, when is inserted directly to rc.lua.

```
-- Xrandr settings switcher -- 
-- Get active outputs
local function outputs()
   local outputs = {}
   local xrandr = io.popen("xrandr -q")
   if xrandr then
      for line in xrandr:lines() do
     output = line:match("^([%w-]+) connected ")
     if output then
        outputs[#outputs + 1] = output
     end
      end
      xrandr:close()
   end

   return outputs
end

local function arrange(out)
   -- We need to enumerate all the way to combinate output. We assume
   -- we want only an horizontal layout.
   local choices  = {}
   local previous = { {} }
   for i = 1, #out do
      -- Find all permutation of length `i`: we take the permutation
      -- of length `i-1` and for each of them, we create new
      -- permutations by adding each output at the end of it if it is
      -- not already present.
      local new = {}
      for _, p in pairs(previous) do
     for _, o in pairs(out) do
        if not awful.util.table.hasitem(p, o) then
           new[#new + 1] = awful.util.table.join(p, {o})
        end
     end
      end
      choices = awful.util.table.join(choices, new)
      previous = new
   end

   return choices
end

-- Build available choices
local function menu()
   local menu = {}
   local out = outputs()
   local choices = arrange(out)

   for _, choice in pairs(choices) do
      local cmd = "xrandr"
      -- Enabled outputs
      for i, o in pairs(choice) do
     cmd = cmd .. " --output " .. o .. " --auto"
     if i > 1 then
        cmd = cmd .. " --right-of " .. choice[i-1]
     end
      end
      -- Disabled outputs
      for _, o in pairs(out) do
     if not awful.util.table.hasitem(choice, o) then
        cmd = cmd .. " --output " .. o .. " --off"
     end
      end

      local label = ""
      if #choice == 1 then
     label = 'Only <span weight="bold">' .. choice[1] .. '</span>'
      else
     for i, o in pairs(choice) do
        if i > 1 then label = label .. " + " end
        label = label .. '<span weight="bold">' .. o .. '</span>'
     end
      end

      menu[#menu + 1] = { label,
              cmd,
                          "/usr/share/icons/Tango/32x32/devices/display.png"}
   end
   return menu
end

-- Display xrandr notifications from choices
local state = { iterator = nil,
        timer = nil,
        cid = nil }
local function xrandr()
   -- Stop any previous timer
   if state.timer then
      state.timer:stop()
      state.timer = nil
   end

   -- Build the list of choices
   if not state.iterator then
      state.iterator = awful.util.table.iterate(menu(),
                    function() return true end)
   end

   -- Select one and display the appropriate notification
   local next  = state.iterator()
   local label, action, icon
   if not next then
      label, icon = "Keep the current configuration", "/usr/share/icons/Tango/32x32/devices/display.png"
      state.iterator = nil
   else
      label, action, icon = unpack(next)
   end
   state.cid = naughty.notify({ text = label,
                icon = icon,
                timeout = 4,
                screen = mouse.screen, -- Important, not all screens may be visible
                font = "Free Sans 18",
                replaces_id = state.cid }).id

   -- Setup the timer
   state.timer = timer { timeout = 4 }
   state.timer:connect_signal("timeout",
              function()
                 state.timer:stop()
                 state.timer = nil
                 state.iterator = nil
                 if action then
                awful.util.spawn(action, false)
                 end
              end)
   state.timer:start()
end 
```

I save it as xrandr.lua and paste it into folder awesome/rc.

Then I have function in rc.lua for loading files from "rc" folder ([from here](https://github.com/vincentbernat/awesome-configuration/blob/master/rc.lua#L8)):

```
function loadrc(name, mod)
   local success
   local result

   -- Which file? In rc/ or in lib/?
   local path = awful.util.getdir("config") .. "/" ..
      (mod and "lib" or "rc") ..
      "/" .. name .. ".lua"

   -- If the module is already loaded, don't load it again
  if mod and package.loaded[mod] then return package.loaded[mod] end

   -- Execute the RC/module file
   success, result = pcall(function() return dofile(path) end)
   if not success then
      naughty.notify({ title = "Error while loading an RC file",
               text = "When loading `" .. name ..
              "`, got the following error:\n" .. result,
               preset = naughty.config.presets.critical
             })
      return print("E: error loading RC file '" .. name .. "': " .. result)
   end

   -- Is it a module?
   if mod then
      return package.loaded[mod]
   end

   return result
end 
```

Then I pasted ' loadrc("xrandr") ' into my rc.lua, but nothing happens. I tried different files (for example simple widget and then loadrc this widget file), but all I get is just pack of errors and it doesnt work.

I also tried just: "require("xrandr")" but still the same.

I tried to google, but everything is for awesome 3.4 and I'm not very experienced in Lua code. Thanks for help

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-29T21:08:10.810

基本上，`require("xrandr")`in`~/.config/awesome/rc.lua`告诉 lua`xrandr.lua`在`~/.config/awesome/`你将它存储在`~/.config/awesome/rc/`. 这就是为什么它找不到任何东西。这应该够了吧：

`require("rc.xrandr")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T12:20:56.780

你可以通过其他人的配置来启发自己： [rc.lua](https://github.com/tpruzina/awesomerc/blob/master/rc.lua)

基本上，就像 envolyse 所说，require(something) 将查看 rootdir/something.lua，而 require(somedir.something) 将查看 rootdir/somedir/something。

不过，您仍然需要从 something.rc 进行附加调用（包括库）：

```
myrc.lua:

local naughty = require("naughty");
naughty.somecall(); 
```

从 lua 5.2 开始，您将需要使用局部变量来存储指向包含库的指针，在旧版本的 lua 普通 'require("naughty");' 就足够了。

快乐的黑客。

# asp.net - ASP.NET UpdateProgress not disappearing after redirect to another page

> ID：16211973
> 
> 赞同：0
> 
> 时间：2013-04-25T10:08:27.260
> 
> 标签：asp.net, asp.net-ajax, updatepanel

I have page with UpdataPanel and UpdateProgress on it. in this page I redirect to a download page that is responsible for downloading a generated file. Redirecting to download page occurs in UpdatePanel via one of controls click event. The problem is after downloading the file UpdateProgress does not disappear. (I set ContentType of my download page to proper mime type)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:15:52.223

我在更新面板的一个事件中找到了另一种下载文件的方法。我用 i 框架来做到这一点。`onClick`事件我`iframe`用我的文件地址将内联添加到页面中。

```
var script = @"
var iframe = document.createElement(""iframe"");
iframe.src = '{0}';
iframe.style.display = ""none"";
document.body.appendChild(iframe);";
ScriptManager.RegisterStartupScript(string.Format(script, url)); 
```

这解决了我的问题。

# c# - Check if (partial) view exists from HtmlHelperMethod

> ID：16211975
> 
> 赞同：29
> 
> 时间：2013-04-25T10:08:31.473
> 
> 标签：c#, asp.net-mvc

Does anyone know if it's possible to check if a partial view exists from within an HtmlHelperExtension?

I know it's possible from a controller using the following:

```
 private bool ViewExists(string name)
 {
     ViewEngineResult result = ViewEngines.Engines.FindView(ControllerContext, name, null);
     return (result.View != null);
 } 
```

Source: [Does a View Exist in Asp.Net MVC?](https://stackoverflow.com/questions/946990/does-a-view-exist-in-asp-net-mvc)

But you can't do the above in a helper, as you don't have access to the controller context. Any thoughts on how to do this?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-25T10:17:00.413

> 但是您不能在帮助程序中执行上述操作，因为您无权访问控制器上下文。

哦，是的，您确实可以访问：

```
public static HtmlString MyHelper(this HtmlHelper html)
{
    var controllerContext = html.ViewContext.Controller.ControllerContext;
    var result = ViewEngines.Engines.FindView(controllerContext, name, null);
    ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T15:19:48.697

为了完整起见，找到局部视图的方法实际上如下。

```
public static HtmlString MyHelper(this HtmlHelper html)
{
     var controllerContext = html.ViewContext.Controller.ControllerContext;
     ViewEngineResult result = ViewEngines.Engines.FindPartialView(controllerContext, name);
     ...
} 
```

并确保包括视图的扩展；剃须刀的 cshtml 或 webforms 视图引擎的 aspx。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-16T12:11:06.013

如果您使用的是 Asp.Net Core (Mvc)，您可以检查 HtmlHelper 扩展中是否存在“视图”，如下所示：

```
 public static IHtmlContent PartialOzz<TModel>(IHtmlHelper<TModel> htmlHelper, partialViewName)
    {
        var requestServices = htmlHelper.ViewContext.HttpContext.RequestServices;
        var viewEngine = requestServices.GetService<ICompositeViewEngine>();

        var viewEngineResult = viewEngine.GetView(htmlHelper.ViewContext.ExecutingFilePath, partialViewName, isMainPage: false);
        if (viewEngineResult.Success)
            return htmlHelper.PartialAsync(partialViewName, me.Model).Result;

        viewEngineResult = viewEngine.FindView(htmlHelper.ViewContext, partialViewName, isMainPage: false);
        if (viewEngineResult.Success)
            return htmlHelper.PartialAsync(partialViewName, me.Model).Result;

        return new HtmlString($"### {partialViewName} Not Found ###");
     } 
```

# model-view-controller - 如何使用 MVP 将 AngularJS 日历绑定到 REST 资源

> ID：16211976
> 
> 赞同：2
> 
> 时间：2013-04-25T10:08:32.007
> 
> 标签：model-view-controller, data-binding, angularjs, fullcalendar, angularjs-directive

我未能实现我的 REST 资源和 AngluarJS 日历控件之间的绑定。似乎我遗漏了一些东西，或者只是没有从逻辑上理解它，因为只要有单独的组件，所有组件都在工作。我用这个 Plunker 作为日历实现的例子：[http ://plnkr.co/edit/VbYDNK?p=preview](http://plnkr.co/edit/VbYDNK?p=preview)

视图内部：

```
...
<div ng-controller="CalendarCtrl" dev-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources" style="padding-top: 30px;"></div>
... 
```

控制器内部：

```
 xyz.controller('MainController', function($scope, $location, $rootScope, MainModel) {
        ...
        // REST call - getPendingObjectsByUser
            $scope.pendingobjects = MainModel.pendingObjectsByUser.get(
                    {userId : $rootScope.currentUser.userId}, 
                        function(response) {                    

                            // do something                                         

                    }, function(response) {

                        if(response.status == 404) {
                            $location.path('/notFound');
                        } else if (response.status == 500) {
                            $location.path('/error');
                        }       

                    });
    // this works fine              
    ...
    function CalendarCtrl($scope) {

            var date = new Date();var d = date.getDate();var m = date.getMonth();var y = date.getFullYear();

                $scope.events = [{type:'birthday', title: 'Brian',start: new Date(y, m, 1)}];

                $scope.eventSources = [$scope.events];

                $scope.uiConfig = {
                  calendar:{
                    height: 450, editable: false, defaultView: 'month'
                  }
                };
        }
// this also works fine 
```

现在我正在尝试做一个简单的绑定，例如：

```
 $scope.events = [{title: $scope.pendingobjects.objectsData[0].title , type:'birthday', start: new Date(y, m, 1)}] 
```

但由于异步行为，它的“未定义”。如果我将整个 $scope.events 放入可用的响应函数中（如下所示），则日历不再起作用。

```
 // getPendingObjectsByUser
            $scope.pendingobjects = MainModel.pendingObjectsByUser.get(
                    {userId : $rootScope.currentUser.userId}, 
                        function(response) {                    

                            // do something
                            $scope.events = [{type:'birthday', title:'$scope.pendingobjects.objectsData[0].title',start: new Date(y, m, 1)}]                                                                                        

 }, function(response) {

                        if(response.status == 404) {
                            $location.path('/notFound');
                        } else if (response.status == 500) {
                            $location.path('/error');
                        }       

                    }) 
```

我是否需要与承诺一起工作，或者我只是对自己的错误感到困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T11:09:50.637

为什么不立即将事件绑定到资源？像这样：

```
$scope.events = function (start, end, callback) {
  var events = MainModel.pendingObjectsByUser.get({
    userId : $rootScope.currentUser.userId
  });

  // Promise 
  events.$promise.then(function (val) {
          $scope.events = events;
          callback($scope.events);
      }
  );
};
      $scope.eventSources = [$scope.events]; 
```

# c# - Selecting multiple columns from a DataTable

> ID：16211988
> 
> 赞同：1
> 
> 时间：2013-04-25T10:09:12.443
> 
> 标签：c#

My code :

```
 ProductRangesForNewRowsDt = ProductRangesDt.Select("PRODUCT_NAME, MIN_QUANTITY, MAX_QUANTITY, COMISSION_TEMPLATE where PROVIDER_ID = " + PROVIDER_ID).CopyToDataTable(); 
```

where `ProductRangesForNewRowsDt` is a `DataTable` and `ProductRangesDt` is another `DataTable` that contains these columns:

```
PRODUCT_ID
PRODUCT_NAME
PROVIDER_ID.PROVIDER_NAME
MIN_QUANTITY
MAX_QUANTITY
COMISSION_TEMPLATE 
```

I am getting this error :

> Syntax error in the expression.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:13:27.133

`DataTable.Select`返回一个数组，因此如果`DataRow`您的列存在于您`DataTable`的列中，那么无论如何您都将返回该行中的所有列。`.Select`is 与子句一起使用，因此`WHERE`您可以执行以下操作：

```
DataRow[] rows = ProductRangesDt.Select("PROVIDER_ID = " + PROVIDER_ID); 
```

然后使用您喜欢的任何方法将这些行放入目标数据表中。

要仅获取所需的列，则应`DataView`从数据表中派生 a，将其复制到另一个数据表并查询此新集合。

```
DataView view = new DataView(ProductRangesDt);
DataTable dtQueryTable = view.ToTable(false, new string[] { "PROVIDER_ID", "PRODUCT_NAME", "MIN_QUANTITY", "MAX_QUANTITY", "COMISSION_TEMPLATE" });

DataRow[] rows = dtQueryTable.Select("PROVIDER_ID = " + PROVIDER_ID); 
```

刚刚重新阅读了这篇文章，你也可以用另一种方式来做。查询你有什么，为你的新过滤集制作一个数据表，然后使用 a`DataView`提取你想要的列。

**编辑**

要*仅*获取所需的列，请尝试其他方式

```
DataTable dtFiltered = ProductRangesDt.Select("PROVIDER_ID = " + PROVIDER_ID).CopyToDataTable();

DataView view = new DataView(dtFiltered);
DataTable dtSpecificCols = view.ToTable(false, new string[] { "PRODUCT_NAME", "MIN_QUANTITY", "MAX_QUANTITY", "COMISSION_TEMPLATE" }); 
```

*以上未经测试，只是一个快速的回复。*

# sql-server-2008 - SQL Server Row_number in odd/even number?

> ID：16211990
> 
> 赞同：0
> 
> 时间：2013-04-25T10:09:31.357
> 
> 标签：sql-server-2008, tsql, union

I have a question about querying accounting data.

For example, the sample data is show like below

Table: **Table_Test**

```
Date        Amount  
2013-01-01  12.00
2013-01-02  13.00 
```

The output should be like this:

```
Date        Account        Debit    Credit
2013-01-01  Abccompany     12.00
2013-01-01  Vendorcompany           12.00
2013-01-02  Abccompany     13.00
2013-01-02  Vendorcompany           13.00 
```

Initially, I was think about using a union statement because may be the output sequece is not very important and the sample sql show like below

```
Select 
    Date as 'Date', 
    'Abccompany' as 'Account', 
    Amount as 'Debit', 
    '0' as credit
from Table_Test

union

select
    Date as 'Date', 
    'VendorCompany' as 'Account', 
    '0' as 'Debit', 
    Amount  as credit
from Table_Test 
```

Output:

```
Date        Account        Debit    Credit
2013-01-01  Abccompany     12.00
2013-01-02  Abccompany     13.00
2013-01-01  Vendorcompany           12.00
2013-01-02  Vendorcompany           13.00 
```

but it seem after I show the output to my PIC, he mention it was wrong that the sequence is quite important to them.(used to export into their system)

What came out from my mind is using T-Sql to manipulate this that may be provide a flag like IsDebit and possible row_number(odd number in first sql, even number on second sql then union and made some logic on it? Possible?)

Is someone are able to provide me some idea how to deal with this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:18:43.610

像这样的东西应该工作：

```
Select 
Date as 'Date', 'Abccompany' as 'Account', Amount as 'Debit', '0' as credit,
ROW_NUMBER() OVER (ORDER BY Date) * 2 as rn
from Table_Test
union all
Date as 'Date', 'VendorCompany' as 'Account', '0' as 'Debit', Amount  as credit,
ROW_NUMBER() OVER (ORDER BY Date) * 2 + 1
from Table_Test
ORDER BY rn 
```

尽管子句中可能需要更多列`ORDER BY`以使事情明确（用您给出的有限示例来判断有点棘手）

我也切换到使用，`UNION ALL`因为产生的结果集已经不同了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:16:18.347

尝试在您的选择中使用它：

```
(ROW_NUMBER() OVER (ORDER BY Abccompany ASC)) 
```

# ruby - 乘客 (nginx) 上的 Redmine 无法启动

> ID：16211993
> 
> 赞同：0
> 
> 时间：2013-04-25T10:09:43.353
> 
> 标签：ruby, nginx, passenger, redmine

我遵循以下教程： [http ://redminecrm.com/boards/4/topics/448-installing-redmine-2-2-passenger-nginx-rvm-on-ubuntu-12-04](http://redminecrm.com/boards/4/topics/448-installing-redmine-2-2-passenger-nginx-rvm-on-ubuntu-12-04)

起初，我遇到了 mysql2 的问题，但通过编辑 Gemfile 并运行包更新来修复它。之后，我遇到了一个新问题。下面附上回溯。我希望有人可以帮助我解决这个问题。

我正在使用 Ruby 2.0.0p0、passenger-4.0.0.rc6、nginx 1.2.7。

```
No such file to load -- iconv (LoadError)
  /var/data/redmine/bundle/ruby/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:317:in `rescue in depend_on'
  /var/data/redmine/bundle/ruby/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:312:in `depend_on'
  /var/data/redmine/bundle/ruby/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:438:in `block in eager_load!'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
  /var/data/redmine/bundle/ruby/2.0.0/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
  /var/data/redmine/config/environment.rb:14:in `<top (required)>'
  config.ru:3:in `require'
  config.ru:3:in `block in <main>'
  /var/data/redmine/bundle/ruby/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
  /var/data/redmine/bundle/ruby/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
  config.ru:1:in `new'
  config.ru:1:in `<main>'
  /usr/local/rvm/gems/ruby-2.0.0-p0/gems/passenger-4.0.0.rc6/helper-scripts/rack-preloader.rb:82:in `eval'
  /usr/local/rvm/gems/ruby-2.0.0-p0/gems/passenger-4.0.0.rc6/helper-scripts/rack-preloader.rb:82:in `preload_app'
  /usr/local/rvm/gems/ruby-2.0.0-p0/gems/passenger-4.0.0.rc6/helper-scripts/rack-preloader.rb:127:in `<module:App>'
  /usr/local/rvm/gems/ruby-2.0.0-p0/gems/passenger-4.0.0.rc6/helper-scripts/rack-preloader.rb:6:in `<module:PhusionPassenger>'
  /usr/local/rvm/gems/ruby-2.0.0-p0/gems/passenger-4.0.0.rc6/helper-scripts/rack-preloader.rb:5:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:04:57.590

阅读日志！

> 没有要加载的文件 -- iconv (LoadError)

在你的系统上安装 iconv，然后安装 iconv gem

```
gem install iconv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T10:03:36.893

[在 `require' 中：没有要加载的文件 -- iconv (LoadError)](https://stackoverflow.com/questions/7829886/in-require-no-such-file-to-load-iconv-loaderror/19332909#19332909)

我已经解决了：

> 它显示 iconv 不存在，但 iconv 已安装在我的生产环境中。

root@AY130/current# iconv --version

iconv (Ubuntu EGLIBC 2.15-0ubuntu10.4) 2.15

版权所有 (C) 2012 Free Software Foundation, Inc.

这是免费软件；查看复制条件的来源。没有

保修单; 甚至不考虑适销性或特定用途的适用性。

由乌尔里希·德雷珀撰写。

如何解决：

安装

> gem "iconv", "~> 1.0.3" #add this in your Gemfile

iconv 已被弃用一段时间。它被（内置）String#encode 替换

> 见这里：[https ://bbs.archlinux.org/viewtopic.php?id=160369](https://bbs.archlinux.org/viewtopic.php?id=160369)

其他：

> [在 `require' 中：没有要加载的文件 -- iconv (LoadError)](https://stackoverflow.com/questions/7829886/in-require-no-such-file-to-load-iconv-loaderror)

# c# - 用word打开文档，没有路径

> ID：16211998
> 
> 赞同：0
> 
> 时间：2013-04-25T10:09:59.603
> 
> 标签：c#, file, memorystream

我正在搜索如何用 word 打开一个文档，而不是它的路径。

我得到这样的文件：

```
byte[] text = item.Doc; 
```

该文件直接来自数据库。

我只找到了用路径打开的方法......所以用我的文档，我必须打开它，然后运行 ​​word 应用程序的 saveAs（在 pdf、doc 等之间进行选择......）。

我可以将它存储在 a 中`MemoryStream`，但是，接下来我能用它做什么？

找到了这个[How to open a file from Memory Stream](https://stackoverflow.com/questions/6236602/how-to-open-a-file-from-memory-stream)，但对我没有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T10:27:03.120

尝试这个

```
 Response.Clear();
    Response.Buffer = true;
    Response.ContentType = "application/ms-word";
    string fileName = "Test.doc";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + fileName);
    StreamReader reader = new StreamReader(memoryStream, System.Text.Encoding.UTF8, true);
    string  strContents = reader.ReadToEnd();
    Reader.Close();
    Response.Write(strContents);
    Response.End(); 
```

--SJ

# c++ - 模板参数的差异 C 和 C

> ID：16211999
> 
> 赞同：1
> 
> 时间：2013-04-25T10:10:03.397
> 
> 标签：c++, c++03

我不明白模板参数之间的区别

```
template <class T>
class C
{
   T t;
};

void foo()
{
   C<void ()> c1; //isn't compiled
   C<void (*)()> c2;
} 
```

void() 是什么类型？这种类型用于 boost::function..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:15:46.730

`void()`是一个函数类型。`void(*)()`是指针类型。在 C++ 中，你不能有函数类型的变量，所以当is`T t;`时不编译。`T``void()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:13:21.207

经过

```
C<void ()> c1;
C<void (*)()> c2; 
```

编译器期望您将指针传递给函数签名。第一个不是指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:14:24.763

第一个 void() 是一个函数，而第二个 void(*)() 是一个指向函数的指针。