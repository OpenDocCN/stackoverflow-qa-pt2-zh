# StackOverflow 问答 14549000-14549999

# c# - 在服务器上绘制 PNG 图像

> ID：14549000
> 
> 赞同：0
> 
> 时间：2013-01-27T15:42:38.990
> 
> 标签：c#, asp.net-mvc-4

我需要在运行时创建一个图像并将其保存在服务器上。例如，假设我正在创建一个基本矩形。此矩形图像将是一个 .png 文件。我将如何在 ASP.NET MVC 4 应用程序中使用 C# 代码执行此操作？

我正在尝试学习如何在 C# 中绘制基本图像，但是我不确定从哪里开始。有人可以指出我绘制矩形的基本示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:48:51.763

这是您开始的示例。

**资料来源：** [如何使用 C# 生成 PNG 文件？](https://stackoverflow.com/questions/4585016/generate-a-png-file-with-c-sharp)

**MSDN：** [位图类](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)，[图形类](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)

```
using (Bitmap b = new Bitmap(50, 50)) {
  using (Graphics g = Graphics.FromImage(b)) {
    g.Clear(Color.Green);
 }
  b.Save(@"C:\green.png", ImageFormat.Png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:49:01.857

希望这有帮助：

```
Bitmap img = new Bitmap(300, 50);
Graphics g = Graphics.FromImage(img);
g.FillRectangle(Brushes.White, 1, 1, 298, 48);
// render the image to output stream
img.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);
//clean up
g.Dispose();
img.Dispose(); 
```

# playframework-1.x - 如何在模板中获取 cookie 值？

> ID：14549002
> 
> 赞同：2
> 
> 时间：2013-01-27T15:42:52.197
> 
> 标签：playframework-1.x

在 Play 1.x 的模板中检索 cookie 及其值的方法是什么？

我尝试了以下方法：

```
request.cookies.get('comment.name') 
```

但它给了我`play.mvc.Http$Cookie@53ea9981`而不是`Fabien`

我检查了我的浏览器并且 cookie 存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:00:50.403

您会看到`request.cookies.get('comment.name')`返回一个[`Http.Cookie`](http://www.playframework.org/documentation/api/1.2.5/index.html).

根据API，有一个`value`字段，这肯定是你想要的。

```
request.cookies.get('comment.name').value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:01:56.290

`request.cookies`是一个`Map`包含`Http.Cookie`值。

您可以通过

```
request.cookies.get('comment.name').value 
```

# delphi - 如何将 TColor 编辑对话框（例如 TColorDlg）添加到 JvInspector TColor 属性？

> ID：14549005
> 
> 赞同：2
> 
> 时间：2013-01-27T15:43:09.577
> 
> 标签：delphi, jvcl, tcolor

我正在使用 JvInspector 来允许编辑我的类的属性。TColor 属性在 JvInspector 编辑器中显示为“clRed”等，并且很乐意接受类似输入的颜色名称。我真的想要与 TFont 旁边出现的相同功能，其中有一个省略号按钮可以打开 TFontDialog - 对于 TColor 属性，我想要一个 TColorDialog （或我自己的一个）。我看到 JvInspector 如何通过特定编辑声明 TJvInspectorFontItem 但我不知道如何告诉检查员来找我进行 TColor 编辑 - 我希望看到一个可以添加我的 TColor 类型和我的新编辑功能的寄存器.

从[这个 SO 问题](https://stackoverflow.com/questions/14182460/jedi-inspector-not-firing-event)中采取的解决方法如下给我“点击”功能，我可以用它来打开 TColorDlg，但它对用户来说并不直观，而且不如省略号按钮解决方案好。

```
procedure TSimpleMainForm.ItemClick(ASender: TObject);
begin
 ShowMessage(JvInspector1.Selected.Name);  // << my edit would go here
  Abort; // don't change the value by the default double click handler
end;

procedure TSimpleMainForm.JvInspector1BeforeEdit(Sender: TObject;
  Item: TJvCustomInspectorItem; Edit: TCustomEdit);
begin
  TEdit(Edit).OnClick := ItemClick;

end; 
```

任何人都可以帮助或指出合适的文件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:18:26.613

这篇文章有一些很好的例子[http://www.neugls.info/the-tjvinspector-component-of-jvcl/](http://www.neugls.info/the-tjvinspector-component-of-jvcl/)

在子标题**如何制作自己的项目**下，有一个颜色对话框的代码示例。

# f# - 是存储在堆上的 System.Enum 类型的实例

> ID：14549009
> 
> 赞同：2
> 
> 时间：2013-01-27T15:43:33.817
> 
> 标签：f#, enums

考虑一个 F# 枚举声明：

```
type MyEnum =
  | A = 1
  | B = 2 
```

我现在可以创建一个 MyEnum 类型的值：

```
let enumValue1 = MyEnum.A 
```

值 enumValue1 被推断为 MyEnum 类型。

但是，我也可以创建我的 Enum 类型的实例：

```
let enumValue2 = new MyEnum() 
```

值 enumValue2 也是 MyEnum 类型。

我读到 Enum 类型是整数类型的包装器，并且 Enums 存储在堆栈中。

但是在上面的代码片段中，我实例化了我的 Enum 类型。这个实例存储在堆上？

从本质上讲，我很困惑枚举是存储在堆栈还是堆上（或者两者都取决于情况）？

这个技巧不起作用：

```
typeof<MyEnum>.BaseType = typeof<System.ValueType> 
```

...因为枚举是 System.Enum 类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:59:18.653

首先，我认为您的困惑`new`来自 C++。在那里，您可以编写类似`MyEnum e = MyEnum();`或的内容`MyEnum* e = new MyEnum();`，其中每个都表示不同的含义。在 C# 中没有这样的区别，无论您是否使用创建值都`new`没有关系。

> 我读到 [...] 枚举存储在堆栈中。

那是过于简单化了，当这样说时，我会说这是错误的。`Enum`s 可以存储在堆栈中，是的，但它们也可以存储在堆或寄存器中。在大多数情况下，它们的确切存储位置对您来说并不重要。

> 但是在上面的代码片段中，我实例化了我的 Enum 类型。这个实例是存储在堆上的吗？

就像我上面说的，你使用`new`. 值的具体存储位置取决于具体情况。

如果变量实际上是一个简单的局部变量：

```
let a = MyEnum.A
printfn "%A" a 
```

然后它将存储在堆栈或寄存器中。

但是你也可以使用相同的语法来定义一个类型的字段：

```
type Test() =
    let a = MyEnum.A

    member this.A
        with get() = a

printfn "%A" (Test().A) 
```

在这种情况下，`Test`是一个 .Net 类，它是一个引用类型，因此`a`将存储在为某些`Test`对象分配的内存中的堆内。

但也有不太明显的情况。例如：

```
let a = MyEnum.A

let getA() = a  

printfn "%A" (getA()) 
```

在这种情况下，本地`a`不会存储*在任何地方*，因为代码`getA()`将被优化为`MyEnum.A`直接返回。

```
let a = (fun() -> MyEnum.A)()

let getA() = a  

printfn "%A" (getA()) 
```

使初始化`a`更复杂意味着不会使用先前的优化，`a`现在存储在静态字段中（这些通常存储在堆的特殊部分中）。

* * *

因此，如您所见，该值的确切存储位置可能非常复杂且特定于编译器。而且你不应该关心它，除非你正在执行微优化。此外，它肯定与`new`.

> 这个技巧不起作用：
> 
> ```
> typeof<MyEnum>.BaseType = typeof<System.ValueType> 
> ```
> 
> ...因为枚举是 System.Enum 类型

但`Enum`它本身是从 派生的`ValueType`，所以返回`true`：

```
typeof<MyEnum>.BaseType.BaseType = typeof<System.ValueType> 
```

尽管`System.Enum`和`System.ValueType`它们本身是引用类型这一事实使情况更加混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:56:26.163

.NET 中的`new`关键字不同于 C++ 的`new`关键字（从堆中分配内存）。在 .NET 中，`new`只需创建一个对象的新实例并调用其构造函数（如果有的话）。新对象是在堆上还是在栈上，通常取决于它是值类型还是引用类型，而不是你是否使用过`new`。

可以注意到`int`s 和其他原语也有 0 参数的构造函数：

```
new Int16() 
```

`new`在一个或一个原始类型上使用`Enum`只会创建一个具有默认值（通常为 0）的该类型的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:56:32.983

您可以像实例化它们一样`new MyEnum()`，因为在 .NET 中，所有值类型都需要有一个无参数的公共构造函数。对于枚举，这就像将 0 转换为您的枚举类型：

```
> LanguagePrimitives.EnumOfValue<_,MyEnum> 0;;
val it : MyEnum = 0 
```

您还可以检查枚举是否实际上是值类型：

```
> typeof<MyEnum>.IsSubclassOf typeof<System.ValueType>;;
val it : bool = true 
```

# c# - 调用存储过程时未检索到数据

> ID：14549013
> 
> 赞同：0
> 
> 时间：2013-01-27T15:44:10.070
> 
> 标签：c#, c++

我正在尝试从 VC++ 调用存储过程。

这是存储过程的样子：

```
public static void SqlStoredProcedure2(string name, out byte[] backup)
{
    using (SqlConnection conn = new SqlConnection("context connection=true"))
    {
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = conn;
        conn.Open();
        cmd.CommandText = "SELECT EmployeePhoto FROM [dbo].[DimEmployee] where FirstName like '%@name%'";
        SqlDataReader reader = null;
        reader = cmd.ExecuteReader();
        backup = null;
        while (reader.Read())
        {
            backup = (byte[])reader["EmployeePhoto"];
        }
        conn.Close();
    }
} 
```

C++ 代码如下所示：

```
RETCODE retcode = SQLAllocHandle(SQL_HANDLE_STMT,hdbc,&hstmt);
retcode = SQLBindParameter(hstmt, 1, SQL_PARAM_INPUT, SQL_C_CHAR, SQL_VARCHAR, 5, 0, "Alan", 0, &cbParm1);
unsigned char ptr[8000] = "";
cbParm2 = 8000;
retcode = SQLBindParameter(hstmt, 2, SQL_PARAM_OUTPUT, SQL_C_BINARY, SQL_VARBINARY, 0, 0, ptr, 0, &cbParm2);
retcode = SQLExecDirectA(hstmt, (UCHAR*)"{call SqlStoredProcedure2(?, ?)}", SQL_NTS); 
```

当我检查返回的代码时没有错误但没有任何内容`ptr`？这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:49:24.507

我建议您在集成之前对 C# 代码进行单元测试。你的 C# 代码有很多问题。第一个是您没有在 C# 代码中传递参数。

在执行阅读器之前添加以下内容。

```
cmd.Parameters.AddWithValue( "@name", name ); 
```

此外，您的 while 循环没有任何意义（您忽略了除最后一张以外的所有图片），您应该使用`using`cmd。

作为旁注请注意 - 像这样在开头和结尾使用通配符的搜索将非常非常慢。

SQL Server 具有可作为单独功能使用的全文搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T15:21:05.347

好的，我解决了这个问题，这是正确的调用方式。

```
 SQLRETURN retcode = SQLAllocHandle(SQL_HANDLE_STMT, hdbc, &hstmt);
    if ( (retcode != SQL_SUCCESS) && (retcode != SQL_SUCCESS_WITH_INFO) )
    {
        printf("SQLAllocHandle(hstmt1) Failed\n\n");
        return;
    }

    retcode = SQLPrepareA(hstmt,(SQLCHAR*)"{call StoreProcedure2(?)}",SQL_NTS);

    SQLSMALLINT NumParams1, DataType1, DecimalDigits1, Nullable1;
    SQLULEN ParamSize1;
    unsigned char input1[50000] = "";
    SQLLEN inputlen1 = sizeof(input1);
    SQLINTEGER cbValue1 = sizeof(input1);//actual size of data in or out

    retcode = SQLDescribeParam(hstmt, 1, &DataType1, &ParamSize1, &DecimalDigits1, &Nullable1);
    retcode = SQLBindParameter(hstmt, 1, SQL_PARAM_OUTPUT, SQL_C_BINARY, DataType1, ParamSize1, DecimalDigits1, &input1, inputlen1 ,&cbValue1);

    retcode = SQLExecDirectA(hstmt, (UCHAR*)"{call StoreProcedure2(?)}", SQL_NTS);
    if ( (retcode != SQL_SUCCESS) && (retcode != SQL_SUCCESS_WITH_INFO) ) 
    {
        printf("SQLExecDirect Failed\n\n");
        extract_error(hstmt,SQL_HANDLE_STMT);
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:43:03.053

好的，我已经解决了尺寸问题，我需要使用

```
SqlFacet(MaxSize = -1) 
```

参数，所以 sql 存储过程看起来像

C＃

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void SqlStoredProcedure2(string name, 
[SqlFacet(MaxSize = -1)]out byte[] backup) 
```

并生成查询

```
CREATE PROCEDURE [dbo].[SqlStoredProcedure2] @name [nvarchar](4000),
@backup [varbinary](MAX)     OUTPUT
AS EXTERNAL NAME [Database1].[StoredProcedures].[SqlStoredProcedure2]; 
```

我仍然运气不好，在 C++ 中的输出 ptr 中没有任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:59:36.150

“ 8000 对我来说似乎是一个死的赠品。” 对不起，为什么我把 8000 放在那里，因为这就是生成的查询的样子，

```
CREATE PROCEDURE [dbo].[SqlStoredProcedure2] @name [nvarchar](4000),
@backup [varbinary](8000)    OUTPUT
AS EXTERNAL NAME [Database1].[StoredProcedures].[SqlStoredProcedure2]; 
```

我认为一旦我改变尺寸它就会改变，但这并没有发生。

现在我正在尝试更改缓冲区的大小。

# c# - 是否可以在不安装 Excel 的情况下使其自动化？

> ID：14549019
> 
> 赞同：0
> 
> 时间：2013-01-27T15:44:41.983
> 
> 标签：c#, excel, windows-8, windows-store-apps, openoffice-calc

我没有安装 Excel；没有许可证，也不想支付$$$。我使用开放式办公室。

但是，我需要自动化 xls 文件。是否可以以编程方式将这些转换为 Open Office 电子表格文件 (Calc)、自动化它们，然后将它们转换回 xls（无需安装 Excel）？

如果是这样，怎么做？

我想要做的是：1）如有必要，以编程方式打开现有的 xls 文件（无 GUI 表示，仅在内存中）2）将 xls 文件转换为 Open Office 文件类型 3）以编程方式更改电子表格的内容 4）保存回 xls 文件类型，以便使用 Excel 的用户可以打开它

或者我可以完全将 Open Office 排除在外（正式/以编程方式，仅使用它来检查我的结果）。

而且，顺便说一句，这在 Windows 8/Store 应用程序中（将在平板电脑或台式机上运行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T15:49:52.730

以编程方式处理任务会更好。看看[OpenXML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)和[NPOI](http://npoi.codeplex.com/) - Apache POI 到 .NET 的端口。它们将在您的台式机/笔记本电脑上运行，但是我不确定它们是否会在您的应用程序所针对的移动设备上完美运行。

# c++ - Direct3D 11 创建像素着色器 (E_INVLIDARGS)

> ID：14549020
> 
> 赞同：3
> 
> 时间：2013-01-27T15:44:45.063
> 
> 标签：c++, directx, shader, hlsl, directx-11

我正在使用来自 directx sdk 的 fxc.exe 实用程序来编译我的着色器，然后将它们作为字节数组加载到我的应用程序中（使用此代码）：

```
inline std::vector<char> ReadToByteArray(char* filename)
    {
        std::ifstream file;
        file.open(filename);
        file.seekg(0, std::ios::end);
        size_t file_size = file.tellg();
        file.seekg(0, std::ios::beg);
        std::vector<char> data(file_size, 0);
        file.read(&data[0], file_size);

        return data;
    } 
```

然后创建它：

```
std::vector<char> pixelShaderBytecode = ReadToByteArray("myps.pso");
ID3D11PixelShader* shader;
device->CreatePixelShader(pixelShaderBytecode.data(), pixelShaderBytecode.size(), nullptr, &shader); 
```

一切都很好。直到我的着色器增长到大约 980 字节。这是我在 HLSL 中的代码：

```
struct PInput
{
    float4 position: SV_POSITION;
    float3 normal : NORMAL;
};

cbuffer CBuffer
{
    float4 color;
    float4 dirs[8];
};

float4 main(PInput input) : SV_TARGET
{
    // Example code...

    int directionLightsCount = 2;

    float intensity = 0.0f;

    // Line 1
    intensity += saturate(dot(input.normal, -dirs[0].xyz));

    // Line 2
    //intensity += saturate(dot(input.normal, -dirs[1].xyz));

    float ambient = 0.1f;

    return color * saturate(ambient + intensity);
} 
```

问题是，如果我取消注释第 2 行，那么我`E_INVALIDARG HRESULT`将从`ID3D11Device::CreatePixelShader`方法中获取。还有来自 D3D11 调试层的警告：

```
D3D11 ERROR: ID3D11Device::CreatePixelShader: Pixel Shader is corrupt or in an unrecognized format. [ STATE_CREATION ERROR #192: CREATEPIXELSHADER_INVALIDSHADERBYTECODE] 
```

如果我再次评论这一行，那么一切都会奏效。如果我将更改它们（0 索引和 1），那么一切都会起作用。我看到的唯一区别 - 编译文件的大小（两行都是 980，只有第一行是 916）

这是我编译 hlsl 代码的命令：

```
C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Utilities\bin\x64>fxc /
T ps_5_0 /E "main" /Fo "ps.pso" ps.ps 
```

这种行为的原因是什么？我错过了什么重要的事情吗？

感谢任何帮助。

编辑：忘了说，这两个版本都编译没有任何错误。此外，创建的顶点着色器没有任何问题（1400 字节）。我正在使用 11_0 功能级别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:32:11.780

一个简单的错误：错误的文件读取...

```
inline std::vector<char> ReadToByteArray(char* filename)
{
    std::vector<char> data;
    std::ifstream file(filename, std::ios::in | std::ios::binary | std::ios::ate);
    data.resize(file.tellg());
    file.seekg(0, std::ios::beg);
    file.read(&data[0], data.size());
    return data;
} 
```

# php - Jwplayer 视频播放器不工作

> ID：14549034
> 
> 赞同：1
> 
> 时间：2013-01-27T15:46:06.310
> 
> 标签：php, javascript, jquery, html, jwplayer

我正在尝试设置 Jwplayer 视频播放器，但没有出现任何内容，根本没有显示视频播放器。我按照说明在设置中做错了什么，但是视频文件来自数据库并且 mysqli 绝对正确：

```
 <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Preview Video</title>
        <script type="text/javascript" src="jquery/jwplayer.js"></script>

    </head>

    <body>

    <?php

    $getvideo = 'VideoFiles/' . $_GET['filename'];

    $videoquery = "SELECT VideoFile FROM Video WHERE (VideoFile = ?)";

            if (!$videostmt = $mysqli->prepare($videoquery)) {
            // Handle errors with prepare operation here
    }

    // Bind parameter for statement
    $videostmt->bind_param("s", $getvideo);

    // Execute the statement
    $videostmt->execute();

                if ($videostmt->errno) 
                {
                    // Handle query error here
                }

    $videostmt->fetch(); 

    $videostmt->close(); 

    ?>

    <div id="myElement">Loading the player...</div>

    <script type="text/javascript">
        jwplayer("myElement").setup({
            file: "<php echo $getvideo ?>",
            image: "/uploads/example.jpg",
        });
    </script>

**UPDATE:**

Current code:

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Preview Video</title>
    <script type="text/javascript" src="jquery/jquery-1.7.min.js"></script>   
    <script type="text/javascript" src="jquery/jwplayer.js"></script>

</head>

<body>

<?php

$getvideo = 'VideoFiles/' . $_GET['filename'];

$videoquery = "SELECT VideoFile FROM Video WHERE (VideoFile = ?)";

        if (!$videostmt = $mysqli->prepare($videoquery)) {
        // Handle errors with prepare operation here
}

// Bind parameter for statement
$videostmt->bind_param("s", $getvideo);

// Execute the statement
$videostmt->execute();

            if ($videostmt->errno) 
            {
                // Handle query error here
            }

 $videostmt->bind_result($dbVideoFile); 

$videostmt->fetch(); 

$videoPath='http://domain.com/videos/'.$dbVideoFile;

$videostmt->close(); 

?>

<div id="myElement">Loading the player...</div>

<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<php echo $videoPath ?>",
        image: "example.jpg",
    });
</script>

</body> 
```

好的，发生的事情是，当我使用 $GET 方法从前一页（使用超链接）获取视频的文件名时，它会打开一个新页面，并且 url 是这样的：

`http://helios.hud.ac.uk/u05454444/Mobile_app/previewvideo.php?filename=sample_mpeg4_5.mp4`

在数据库中，当我尝试检索视频文件时，它以`VideoFiles/sample_mpeg4_5.mp4`.

这是因为视频存储在`VideoFiles`文件夹中

现在它显示一个黑色方块，视频播放器应该在其中说明：

```
Error loading player:
No playable sources found 
```

我是否需要包含 的 js 文件`jwplayer.html5.js`，我是否缺少任何其他可能需要的文件，或者是其他什么问题？

**萤火虫：**

使用 Firebug，我在下面有以下 HTML，其中包含显示视频播放器的 html：

```
<div style="position: absolute;">
    <object id="_GPL_swf" width="1" height="1" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"
    classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
        <param value="http://shoppingside-a.akamaihd.net/items/it/swf/f.swf" name="movie">
        <param value="high" name="quality">
        <param value="transparent" name="wmode">
        <param value="always" name="allowScriptAccess">
        <param value="keywordsURL=http%3A//i.trkjmp.com/kwd%3Fc%3DOjo6aGVsaW9zLmh1ZC5hYy51azp6LTEyMjItMTIwODcw%26cb%3D_GPL.items.a652c.displayKeywords&keywords=error%20loading%20player%7Cno%20playable%20sources%20found"
        name="flashVars">
        <object id="_GPL_swf" width="1" height="1" type="application/x-shockwave-flash"
        data="http://shoppingside-a.akamaihd.net/items/it/swf/f.swf">
            <param value="high" name="quality">
            <param value="transparent" name="wmode">
            <param value="always" name="allowScriptAccess">
            <param value="keywordsURL=http%3A//i.trkjmp.com/kwd%3Fc%3DOjo6aGVsaW9zLmh1ZC5hYy51azp6LTEyMjItMTIwODcw%26cb%3D_GPL.items.a652c.displayKeywords&keywords=error%20loading%20player%7Cno%20playable%20sources%20found"
            name="flashVars">
        </object>
    </object>
</div>
<div id="_GPL_e6a00_parent_div" style="position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; z-index: 2147483647;">
    <object id="_GPL_e6a00_swf" width="1" height="1" type="application/x-shockwave-flash"
    data="http://shoppingside-a.akamaihd.net/items/e6a00/storage.swf">
        <param name="wmode" value="transparent">
        <param name="allowscriptaccess" value="always">
        <param name="flashvars" value="logfn=_GPL.items.e6a00.log&onload=_GPL.items.e6a00.onload&onerror=_GPL.items.e6a00.onerror&LSOName=gpl">
    </object>
</div>
<div id="myElement" style="width: 480px; height: 270px; background-color: rgb(0, 0, 0); color: rgb(255, 255, 255); display: table; opacity: 1;">
    <p style="vertical-align: middle; text-align: center; display: table-cell; font: 15px/20px Arial,Helvetica,sans-serif;">Error loading player:
        <br>No playable sources found</p>
</div>
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<php echo $videoPath ?>",
        image: "example.jpg",
    }); 
```

**图片：**

下面是显示图像代码：

如果我选择一个称为 的超链接`Tulips_3.png`，则 url 显示在 url 中是这样的：

`http://helios.hud.ac.uk/u05545444/Mobile_app/previewimage.php?filename=Tulips_3.jpg`

然而，我所做的只是使用 get 方法检索文件名，在数据库中找到图像及其目录在前面`ImageFiles/`，因为数据库中的图像保存为`ImageFiles/Tulips_3.png`，然后使用源显示图像，代码如下：

```
 <body>

    <?php

    $getimage = 'ImageFiles/' . $_GET['filename'];

    $imagequery = "SELECT ImageFile FROM Image WHERE (ImageFile = ?)";

            if (!$imagestmt = $mysqli->prepare($imagequery)) {
            // Handle errors with prepare operation here
    }

    // Bind parameter for statement
    $imagestmt->bind_param("s", $getimage);

    // Execute the statement
    $imagestmt->execute();

                if ($imagestmt->errno) 
                {
                    // Handle query error here
                }

$imagestmt->bind_result($dbImageFile);

$imagestmt->fetch(); 

$imagestmt->close(); 

?>

<p><img alt="<?php echo $dbImageFile; ?>" height="200" width="200" src="<?php echo $dbImageFile; ?>"></p>

    </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:50:46.680

**更新 2**：

```
<script type="text/javascript">

jwplayer("myElement").setup({
    file: "<?php echo $dbVideoFile; ?>",
    image: "example.jpg",
});
</script> 
```

`echo 'this is $dbVideoFile: '.$dbVideoFile;`

输出：这是 $dbVideoFile: VideoFile‌​s/sample_mpeg4_5.mp4`

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T05:31:03.277

您的脚本中有错字：

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<php echo $videoPath ?>",
        image: "example.jpg",
    });
</script> 
```

应该：

```
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "<?php echo $videoPath ?>",
        image: "example.jpg",
    });
</script> 
```

**注意额外的问号“？” 在起始 php-tag 中。**

# android - 带有 gps 的离线谷歌地图 for android

> ID：14549036
> 
> 赞同：0
> 
> 时间：2013-01-27T15:46:20.810
> 
> 标签：android, google-maps, gps

我制作了一张完整的地图，当我连接到互联网时它可以正常工作，但即使没有互联网连接，我也想使用地图，而且它必须向我显示最适合在线地图的地理位置。现在我的问题是我是否必须再次为具有新实现的离线地图创建一个新项目，或者我可以离线使用我自己的地图并对其进行一些更改。请在我接下来要做的这两种情况下指导我。

```
 map=(MapView) findViewById(R.id.mvmain);
    map.setBuiltInZoomControls(true);
    touchy t=new touchy();
    overlayList=map.getOverlays();
    overlayList.add(t);
    compass= new MyLocationOverlay(Main.this, map);
    overlayList.add(compass);
    controller= map.getController();

    mapSearchBox = (EditText) findViewById(R.id.map);

    mapSearchBox.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
             if (actionId == EditorInfo.IME_ACTION_SEARCH ||
                    actionId == EditorInfo.IME_ACTION_DONE ||
                    actionId == EditorInfo.IME_ACTION_GO ||
                    event.getAction() == KeyEvent.ACTION_DOWN &&
                    event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {

                // hide virtual keyboard
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(mapSearchBox.getWindowToken(), 0);

                new SearchClicked(mapSearchBox.getText().toString()).execute();
                mapSearchBox.setText("", TextView.BufferType.EDITABLE);
                return true;
            }
            return false;
        }
    });

    d =getResources().getDrawable(R.drawable.aa);       
    controller.setZoom(6);

    //Placing pinpoint at location
    lm=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit=new Criteria();
    towers=lm.getBestProvider(crit, false);
    Location location=lm.getLastKnownLocation(towers);
    if(location !=null)
    {
        lat=(int) (location.getLatitude() *1E6);
        longi=(int) (location.getLongitude() *1E6);         
        GeoPoint ourLocation= new GeoPoint(lat,longi);
        OverlayItem overlayItem= new OverlayItem(ourLocation,"","");
        CustomPinpoint custom=new CustomPinpoint(d,Main.this);
        custom.insertPinPoint(overlayItem);
        overlayList.add(custom);

    }
    else
    {
        Toast.makeText(Main.this,"Couldn't get provider",                     Toast.LENGTH_SHORT).show();

    }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:01:39.567

你不能在没有互联网的情况下显示谷歌地图。你可以试试[OSMDroid](http://www.haakseth.com/?p=30)，它可以显示离线标题。

# php - 在使用 mysql_real_escape_string 之后，我是否需要对加密字符串进行转义？

> ID：14549037
> 
> 赞同：-1
> 
> 时间：2013-01-27T15:46:30.130
> 
> 标签：php, .net, mysql, mysql-real-escape-string

在 PHP 中，我有一个`action.php`页面，我有一个存储在变量中的字符串

```
$myString = "Foo Bar"; 
```

我使用 AES256 使用以下函数加密这个字符串：

```
function aes256Encrypt($key, $data) {

if(32 !== strlen($key)) $key = hash('SHA256', $key, true);

$padding = 16 - (strlen($data) % 16);

$data .= str_repeat(chr($padding), $padding);

return mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC,    str_repeat("\0", 16));

} 
```

在将数据插入 MySQL 数据库之前，我`mysql_real_escape_string()`在将其插入数据库之前使用加密字符串

据我所知，该`mysql_real_escape_string()`函数`\`在需要转义的字符之前添加！

另一方面，我需要从 MySQL 取回数据并使用此函数对其进行解密：

```
 function aes256Decrypt($key, $data) {

  if(32 !== strlen($key)) $key = hash('SHA256', $key, true);

  $data = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC,   str_repeat("\0", 16));

  $padding = ord($data[strlen($data) - 1]);

  return substr($data, 0, -$padding);

  } 
```

一切都很好，当我解密从 db 获得的字符串时，我得到了正确的字符串，但我真的很困惑，如果在从 DB 获得字符串后不取消转义字符串，这怎么能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T15:51:13.220

首先，您应该真正从 using 切换`mysql_*`到 PDO 或 mysqli 并使用正确的参数化语句。然后，您完全避免调用`mysql_real_escape_string`。

转义概念在编程中非常广泛，在这里也适用。假设您想将某人的姓名存储到数据库中：`Coryn O'Driscoll`. 这甚至不是恶意的，但是这个查询会失败：

```
INSERT INTO Names VALUES ('Coryn O'Driscoll') 
```

你有一个未闭合的字符串。

`mysql_real_escape_string`将其转换为`('Coryn O\'Driscoll'`)。向`\'`mysql 发出信号，表明撇号不是查询语法的一部分，而是要插入的标量值的实际部分。它实际上插入为`Coryn O'Driscoll`. 这就是为什么当您再次选择它时不必从中删除任何反斜杠的原因。

# asp.net - ASP.NET 站点以递归方式 HTTP 请求其自己的 URL

> ID：14549039
> 
> 赞同：0
> 
> 时间：2013-01-27T15:46:52.887
> 
> 标签：asp.net, iis, reentrancy

**背景**：我有一个 ASP.NET MVC Web 应用程序。我想定期捕获其用户可见的 HTML 内容并将其保存在某个地方，以便我可以跟踪内容如何随着时间的推移而演变。例如，我希望能够提取一年前存在的主页 HTML。这可以使用某种爬虫来完成，该爬虫会定期遍历 URL 列表。

**我的问题：让网站***本身*发布`HttpWebRequest`到自己的 URL是否是个好主意？我可以`Timer`在 Web 应用程序内部启动一个每小时下载和存储一个 URL 的应用程序。

另一种架构是将爬虫放在外部应用程序（如 Windows 服务）中。不过，这将是一个复杂得多的架构。在这个问题中，我不想探索这个选项，因为我试图摆脱一个更简单的架构。

**如果 ASP.NET 应用程序使用 请求自己的 URL，会出现什么问题`HttpWebRequest`？**

在伪代码中：

```
StartTimer(TimeSpan.FromHours(1), () => {
 var url = "http://localhost/SomePageInTheCurrentW3wpProcess.aspx";
 var data = new WebClient().DownloadString(url); //calling current application
 Persist(data);
}); 
```

我不确定会发生什么坏事。我正在考虑处理重入问题。我必须小心分布式死锁等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:49:16.103

> 让网站本身向自己的 URL 发出 HttpWebRequests 是个好主意吗？

一点都不。跑步[`periodic background tasks in an ASP.NET application`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)是一项危险的任务。如果你走这条路，很多你无法控制的事情可能会出错。Phil Haack 在他的博客文章中介绍了其中的大部分内容。最好在朝那个方向前进之前得到建议。

顺便说一句，如果托管的 Windows 服务对您来说架构过于复杂，那么一个简单的控制台应用程序计划使用定期运行的时间间隔就[`Windows Scheduler`](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)可以很好地满足要求，并且比您尝试使用 ASP.NET 来完成工作要好得多它不是为（例如执行定期后台任务）而设计的。

# php - Cron 作业更改 PHP 电子邮件脚本输出

> ID：14549049
> 
> 赞同：0
> 
> 时间：2013-01-27T15:47:55.030
> 
> 标签：php, mysql, email, cron

我昨天设置的 cron 作业有一个奇怪的问题。我正在运行以下 CronJob 脚本：

0 7 * * * php -q /wocs/email.php

这指向我放在下面的电子邮件脚本。目标是让它运行调用我的 MySQL 数据库的脚本并向用户发送一封电子邮件，说明他们必须签署多少票。当我在 phpmyadmin 中运行查询时，我得到了正确的结果，当我在页面上回显结果时，它给了我正确的结果。但是今天早上 7 点，Cron Job 给数据库中的每个用户发送了电子邮件（即使是没有任何未完成票证的用户 - 所以他们根本不应该收到任何东西，当我测试查询时他们不会出现我自己运行脚本）。他们每个人都收到了十几次电子邮件，他们收到的号码不准确，我无法复制自己。

这是代码，当我在浏览器中运行它时它工作得很好，我唯一得到这个错误的时候是运行 Cron Job 时。

```
$query="
SELECT *, COUNT(*)
FROM job, user
WHERE job.jobs_osuper=user.users_id
AND job.jobs_approverid2 = 0
GROUP BY user.users_id
";              

$result=mysql_query($query);

mysql_close();

$num=mysql_num_rows($result);
                    $conditional1=mysql_result($result,$i,"users_id");
                    $conditional2=mysql_result($result,$i,"jobs_osuper");

$i = 0;
while($i<$num && $conditional1 == $conditional2)
{
                            $name=mysql_result($result,$i,"user_fullname");
                            $email=mysql_result($result,$i,"user_email");
                            $count=mysql_result($result,$i,"COUNT(*)");

$mailfrom = "from@email.com";
$mailbcc = "bcc@email.com";
$message = "<b>$name,</b><p>You have $count ticket(s) waiting on your approval.  <a href='http://url.com'>Click here to review the tickets assigned to you.</a></p>";

mail($email, "Tickets for Approval", $message, "From: $mailfrom\r\nCC: $mailbcc\r\nContent-type: text/html\r\n");
$i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:44:42.197

Your script is likely being run by a different user through the cron job. I'm not sure whether this will affect your result, but it has caused me grief in the past.

Your cron command should look something like this:

```
sudo su www-data -c "php -q /wocs/email.php" 
```

Make sure that www-data is the correct user - you can check by running `echo get_current_user();` from the browser.

# c# - C# - 如何允许一个用户控件在 Windows 窗体中更改其他用户控件中的标签？

> ID：14549050
> 
> 赞同：1
> 
> 时间：2013-01-27T15:48:06.820
> 
> 标签：c#, winforms, user-controls

**我有一个名为MainForm.cs**的 Windows 窗体和两个用户控件，分别是**UserControlRed.cs**和**UserControlBlue.cs**。使用 MainForm 的默认构造函数创建UserControlRed 对象**ucr**，并将其添加到 MainForm 的 panel1 中。`panel1.Controls.Add(ucr);`

然后我有这样的用户界面：[MainForm](https://i.stack.imgur.com/ZE2R8.png)

![在此处输入图像描述](../Images/0a078769e926e3113f251676d7f98243.png)

**注意：**作为 ucb 的 UserControlBlue 实例是使用 UserControlRed 中的单击按钮事件创建的。代码如下：

```
private void CreateUCBbtn_Click(object sender, EventArgs e)
{
     MainForm f1 = new MainForm();
     f1 = (MainForm)this.Parent.Parent;
     f1.AddUCBlueIntoPanel2();
} 
```

现在，我要做的是在用户单击“更改 UCB 标签”按钮后，UserControlBlue 中的标签将相应地更改为 UserControlRed 文本框中输入的内容。所以，我在这里有两个问题：

1.  关于我上面的**注释**，这样做是否安全？
2.  我将文本框中的值从 UserControlRed 传递到 UserControlBlue 中的标签的最佳方法是什么？

另一个注意事项：我还是 OOP 的新手，尤其是 C# 和 winforms。也许任何人都可以向我推荐一个熟悉的好网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:57:03.917

您可以在 UserControlBlue 中添加一个公共方法（函数），该方法接受一个字符串作为参数并将其分配给标签的文本。然后您可以从“更改 UCB 标签”按钮单击处理程序中调用该方法。

这样做应该是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:01:53.397

为了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，这将是臭代码。两者的父级都应该知道如何填充其面板的逻辑。红色和蓝色面板应该只知道如何在其父级上触发某些动作，但实际的实现存储在父级的逻辑中。

就像现在一样，红色面板实现了不依赖于红色面板本身的逻辑。

```
private void CreateUCBbtn_Click(object sender, EventArgs e)
{
     var textBoxContent = this.MyTextBox.Text;
     var parent = this.Parent as MainForm;
     parent.AddBlueIntoPanel2(textBoxContent);
} 
```

# indexeddb - Safari 6.0 是否支持 indexedDB？

> ID：14549051
> 
> 赞同：2
> 
> 时间：2013-01-27T15:48:22.200
> 
> 标签：indexeddb

Safari6.0 没有IndexedDB？

我的 Safari 版本在 mac 上是 6.0.2 (7536.26.17)

我使用 MDN 的教程，但它不起作用

那是代码：

```
var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB; 
```

indexDB 未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:50:11.713

根据[caniuse.com](http://caniuse.com/#feat=indexeddb)的说法，没有 Safari 版本支持 IndexedDB。

甚至 MDN 在他们的[“浏览器兼容性”](https://developer.mozilla.org/en-US/docs/IndexedDB#Browser_compatibility)表中也声明了相同的内容。

* * *

在这里也包括@acarlon 的评论：

从 7.1 版开始，Safari 似乎**支持 IndexedDB**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T18:27:13.357

试试[indexeddb 垫片](http://nparashuram.com/IndexedDBShim/)。这允许您在 Safari 中使用 indexeddb API，因为 safari 支持构建 shim 的 WebSQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T05:52:48.730

您可以使用来自 facebook 的 IndexedDB polyfill。

[https://github.com/facebook/IndexedDB-polyfill](https://github.com/facebook/IndexedDB-polyfill)

# php - jQueryUI 自动完成映射响应数据

> ID：14549058
> 
> 赞同：1
> 
> 时间：2013-01-27T15:48:57.083
> 
> 标签：php, jquery-ui, jquery-ui-autocomplete

另一个关于 jQuery 自动完成的问题，尽管这个论坛或 jQuery 文档上有大量资源，但我遇到了问题。

我很难使用 jQuery UI 映射来自 PHP 脚本的响应数据。这是代码：

```
$("#shared-with").autocomplete({
  source: function(request, response) {

    $.ajax({
      type: 'get',
      url: 'ajax/search.php',
      data: { term: request.term },
      success: function(data){

           // alert(data);
           response($.map(data, function(c) {
             return {
                 label: c.name,
                 value: c.nametag
             }
           }));

     }
   });
 }
}); 
```

我的问题是 jQuery 自动完成没有正确理解 response/map 函数，尽管从 search.php 发回的数据看起来像：

```
echo json_encode(
     array('name' => 'Bill', 'nametag' => 'Big Bill'),
     array('name' => 'Fred', 'nametag' => 'Small Fred'),
); 
```

PS：当我在 javascript 弹出窗口中提醒“数据”时，向我显示一个有效的 javascript 数组/对象... PS：“#shared-with”只是文本区域

任何想法 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:05:21.980

我发现数据实际上是以字符串形式从我的 PHP 搜索页面返回的。

我需要做的就是将字符串重新转换为 JS 数组：

```
data = $.parseJSON(data);

response($.map(data, function(c) {
             return {
                 label: c.name,
                 value: c.nametag
             }
})); 
```

# jquery - 计算多输入（jQuery）

> ID：14549061
> 
> 赞同：1
> 
> 时间：2013-01-27T15:49:12.953
> 
> 标签：jquery

在我的网站中，我可以选择使用此代码添加（多次）带有按钮的输入，

```
$("#add_new_detail").click(function() { 
    $("#det_add_area").append('
        <div id="no_'+i+'"><table><tr><td> '+i+' </td><td> 
            <input type="text" name="det['+i+'][details]" /> </td><td> 
            <input type="text" name="det['+i+'][amount]" value="0" /> </td><td> 
            <input type="text" name="det['+i+'][price_real]" value="0" /> </td><td> 
            <input type="text" name="det['+i+'][price_user]" value="0" /> </td><td> 
            <input type="text" name="det['+i+'][total_price]" value="0" DISABLED  /> 
            </td><td> <input type="text" name="det['+i+'][total_price_for_user]" value="0" DISABLED  /> </td><td>
            <div class="delete_line" onClick="re(\'no_'+i+'\')"> delete </div></td></tr></table></div>
  '); 
  i++; 
}); 
```

现在，每次我单击按钮时，它都会创建一个新的输入行。这是完美的工作。现在我正在尝试在输入之间进行计算，我正在尝试在其中输入一个数字

> det['+i+'][数量]

并用（数学）加倍

> det['+i+'][price_real]

并将结果发布到

> det['+i+'][total_price]

现在我不知道如何与这些特定字段进行交互（通过单击按钮创建） - 每行都有自己的金额，price_real，total_price ...如何使用 onKeyUp 进行计算？如果有人能给我一个想法，我将如何从这一点继续前进，我将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:08:36.163

我建议您为要使用的每个输入添加一个唯一的 id，因为按 id 选择非常简单（而不是按名称选择）。然后您就可以使用 $("#theId").val() 来获取文本框的输入值，并使用 $("#theId").val(new_Value) 来设置它。

此外，从代码中猜测，您将使用方括号作为您的 id。在这种情况下，您应该在 jquery 选择器中对其进行转义，如下所示： $("det\[1\]\[total_price\]")

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:18:59.137

给你...我已将`name`属性修改为`id`. 也用来`_`代替`[`.

**[现场演示](http://jsfiddle.net/6rM42/)**

每当你改变`amount`或`price_real`时，相应的`total_price`就会改变`(total_price = amount * price_real)`。

**jQuery**

```
$("#add_new_detail").on("click", function() { 
    $("#det_add_area").append('<div id="no_'+i+'"><table><tr><td> '+i+' </td><td> \
            <input type="text" id="det_'+i+'_details" /> </td><td> \
            <input type="text" id="det_'+i+'_amount" value="0" /> </td><td> \
            <input type="text" id="det_'+i+'_price_real" value="0" /> </td><td> \
            <input type="text" id="det_'+i+'_price_user" value="0" /> </td><td> \
            <input type="text" id="det_'+i+'_total_price" value="0" DISABLED  /> \
            </td><td> <input type="text" id="det_'+i+'_total_price_for_user" value="0" DISABLED  /> </td><td>\
            <div class="delete_line" onClick="re(\'no_'+i+'\')"> delete </div></td></tr></table></div>\
    '); 

    $("#det_" + i + "_amount").on("change", function() { 
        calculate(this); 
    });

    $("#det_" + i + "_price_real").on("change", function() { 
        calculate(this); 
    });

    i++;
});

function calculate(e) {
    j = $(e).attr('id').split("_")[1]
    total = $("#det_" + j + "_amount").val() * $("#det_" + j + "_price_real").val();
    $("#det_" + j + "_total_price").val(total);
} 
```

# javascript - 将从 csv 读取的总字节数放入变量的 Javascript 函数

> ID：14549063
> 
> 赞同：0
> 
> 时间：2013-01-27T15:49:16.863
> 
> 标签：javascript, ajax, html

我有一个 CSV 文件本地存储在 Web 服务器上，该文件会定期添加长度不等的数字和字符串数据。我需要一种方法来将每次读取的所有行字节值相加，由于从服务器读取文件的无状态性质，因此需要字节计数。我需要维护下一个读取起点！到目前为止，我可以获得为每一行计算的字节值，

```
 function renderData( data )
            {
                var dataRows = data.split( "\n" );
                var numrows = dataRows.length;
                var table = document.createElement("Table");
                table.border = 1;
                var nextindex = 0;
                for( i = 0; i < numrows; i++ )
                {
                    var rowlength = dataRows[i].length;
                    var totalBytes = numrows += rowlength;
                    currentindex = nextindex;
                    nextindex = totalBytes;
                    document.write(" Row "+i+" is " + rowlength + " bytes long ");
                    document.write(" next index starts " + totalBytes + " bytes in ");
                    var tableRow = table.insertRow(i);
                    var dataCells = dataRows[i].split(",");
                    for( j = 0; j <dataCells.length; j++ )
                    {
                        var tableCell= tableRow.insertCell(j);      
                        tableCell.innerHTML = dataCells[j];
                    }
                    executeSql( "INSERT INTO CAN ("", "", "", etc) values(?,?,?,)", dataCells );

                }
                document.body.appendChild( table );
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:25:50.243

不如不做`var totalbytes = numrows*nextindex`，让 totalbytes 成为一个全局变量并做 `totalbytes += rowlength;`每次迭代？

# ios - UILocalNotification 中的声音在最大音量下比 AVAudioPlayer 响亮

> ID：14549067
> 
> 赞同：1
> 
> 时间：2013-01-27T15:49:36.243
> 
> 标签：ios, cocoa, avaudioplayer, uilocalnotification, avaudiosession

出于这个问题的目的，假设我的应用每 10 秒播放一次音频剪辑。此音频使用 AVAudioPlayer 与设备上的 iPod 音乐播放器（使用闪避）播放/混合。当应用程序被发送到后台时，我安排 UILocalNotification 对象与引用的音频文件（并且没有文本），所以声音继续以 10 秒的间隔播放。

困扰我的是，在 iOS 6 上作为通知的一部分播放的音频剪辑的音量似乎是我在应用程序中播放时音频的两倍（我将音量设置为 1.0f，这是文档说是最大的）。因此，应用程序每 10 秒播放一次声音，当您发送到后台时，与应用程序中的声音相比，它现在非常响亮。

相关片段...应用程序启动，这是我设置 AVAudioSession 以启用闪避的方式：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];

UInt32 doChangeDefaultRoute = 1;
AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof (doChangeDefaultRoute), &doChangeDefaultRoute);

OSStatus propertySetError = 0;
UInt32 allowMixing = true;
propertySetError = AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryMixWithOthers,sizeof (allowMixing),&allowMixing); 
```

...我如何创建我的播放器：

```
- (AVAudioPlayer *)playerWithCAFFileNamed:(NSString *)fname {
    NSURL *u = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:fname ofType:@"caf"]];
    NSData *d = [NSData dataWithContentsOfURL:u];
    AVAudioPlayer *p = [[AVAudioPlayer alloc] initWithData:d error:nil];
    p.delegate = self;
    p.volume = 1.0; 
    [p prepareToPlay];
    return p;
} 
```

...然后播放：

```
- (void)playAudio:(AVAudioPlayer *)player {
    [self setSessionActiveWithMixing:YES];
    [player setVolume:1.0]; // should already be set, but just to be sure
    [player play];
} 
```

...这就是我创建超级响亮通知的方式：

```
- (UILocalNotification *)notificationWithSoundNamed:(NSString *)sound atTimeInterval:(NSTimeInterval)ti {
    UILocalNotification *n = [[UILocalNotification alloc] init];
    n.soundName = sound;
    n.fireDate = [NSDate dateWithTimeIntervalSinceReferenceDate:ti];
    return n;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:17:59.020

我用 Apple 打开的错误被关闭为“按设计的功能”。他们的简要说明：

> 通知声音跟随铃声音量；AVAudioPlayer 跟随媒体音量。

...我想您可以假设允许铃声音量大于最大的媒体音量，以确保您听到铃声。我猜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:37:01.593

我在 AVAudioPlayer 音量上遇到了类似的问题。所以我将我想要分配的价值除以我想要得到的因素。值得寻找原因。

# javascript - 对象本身的 Javascript 原型

> ID：14549068
> 
> 赞同：1
> 
> 时间：2013-01-27T15:49:36.750
> 
> 标签：javascript, prototype

我正在构建函数来帮助处理 url：

```
var ap = { /* lots of things removed */ }

ap.url = function(base) {
    this.base  = base
    this.data  = "cb_=" + parseInt(Math.random()*99999999);
}

ap.url.prototype = {
    nv: function (n,v) {this.data=this.data+"&"+ n+"="+encodeURIComponent(v)},
    get: function () { return this.base + "?" + this.data; }
};

var u = new ap.url("site.com");
u.nv("p1", "123");
u.nv("p2", "456");

alert( u.get() ) 
```

这似乎工作正常。

是否可以为对象本身创建原型？像：

```
alert( u() ) 
```

我希望 u() 做与 u.get() 相同的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:52:51.307

不，因为“u”不是 Function 实例。但是，您可以为“ap.url”原型提供“toString()”和/或“valueOf()”函数来提供字符串和数字表示。这些在各种情况下都隐含使用。然后您可以（例如）在字符串连接表达式中使用对这些对象之一的引用，并且运行时将隐式调用您的“toString”函数。

```
function C(v) {
  this.internal = v;
}

C.prototype = {
  toString: function() { return this.internal; }
};

var c = new C("hello world");

alert("The value is: " + c); 
```

# php - 创建占位符图像的教程

> ID：14549073
> 
> 赞同：-3
> 
> 时间：2013-01-27T15:50:16.120
> 
> 标签：php, image, placeholder

我想知道如何在 PHP 中创建占位符图像服务，例如 lorempixel.com 或 dummyimage.com，特别是如何从文件夹中获取图像并根据 GET 参数对其进行裁剪。有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:52:15.333

您应该使用 GD 库

只需使用参数的宽度和高度创建一个新图像

[http://nl1.php.net/manual/en/function.imagecreate.php](http://nl1.php.net/manual/en/function.imagecreate.php)

script.php?width=200&height=300

```
$width = (int)$_GET["width"];
$height = (int)$_GET["height"];
header("Content-Type: image/png");
$im = @imagecreate($width, $height) or die("Cannot Initialize new GD image stream");
$background_color = imagecolorallocate($im, 0, 0, 0);
imagepng($im);
imagedestroy($im); 
```

# r - 优化 data.table 中的 for 循环

> ID：14549076
> 
> 赞同：1
> 
> 时间：2013-01-27T15:50:50.087
> 
> 标签：r, for-loop, data.table

我正在使用此处找到的 data.table 解决方案： [重复条目池，同时平均相邻列中的值](https://stackoverflow.com/questions/14477365/duplicate-entry-pooling-while-averaging-values-in-neighbouring-columns)

```
dt.out <- dt[, lapply(.SD, function(x) paste(x, collapse=",")), 
          by=c("ID2", "chrom", "strand", "txStart", "txEnd")]

dt.out <- dt.out[ ,list(ID=paste(ID, collapse=","), ID2=paste(ID2, collapse=","), 
                       txStart=min(txStart), txEnd=max(txEnd)), 
                       by=c("probe", "chrom", "strand", "newCol")] 
```

数据集：

```
ID      ID2         probe       chrom   strand txStart  txEnd  newCol
Rest_3  uc001aah.4  8044649     chr1    0      14361    29370  1.02
Rest_4  uc001aah.4  7911309     chr1    0      14361    29370  1.30  
Rest_5  uc001aah.4  8171066     chr1    0      14361    29370  2.80         
Rest_6  uc001aah.4  8159790     chr1    0      14361    29370  4.12 

Rest_17 uc001abw.1  7896761     chr1    0      861120   879961 1.11
Rest_18 uc001abx.1  7896761     chr1    0      871151   879961 3.12 
```

我添加了这个`for`循环，以便`newCol`平均单个单元格中的折叠值（从第一个`dt.out`）。然而，通过这个循环需要很长时间。有没有更快的方法来做到这一点？

```
for(i in 1:NROW(dt.out)){
  con <- textConnection(dt.out[i,grep("newCol", colnames(dt.out))])
  data <- read.csv(con, sep=",", header=FALSE)
  close(con)
  dt.out[i,grep("newCol", colnames(dt.out))]<- as.numeric(rowMeans(data)) 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:17:44.590

`newCol`与另一个问题中的数据相比，这似乎是一个额外的列。我想在获得第一个之后`dt.out`，你想取 ? 的折叠值的平均值`newCol`？

您可以通过`newCol`直接替换为`sapply(strsplit(.))`. 基本上，在获得第一个之后`dt.out`这样做：

```
dt.out[ , newCol := sapply(strsplit(newCol, ","), function(x) mean(as.numeric(x)))] 
```

# android - Eclipse DDMS 中的空文件资源管理器

> ID：14549077
> 
> 赞同：7
> 
> 时间：2013-01-27T15:50:51.447
> 
> 标签：android, eclipse, file, explorer, ddms

我正在尝试通过 Eclipse 的 DDMS 访问我的 Android 手机上的 db 文件。但是，文件资源管理器是空的。我试过重启adb server，重启eclipse，还是不行。我的手机可以在“我的设备”下看到并显示为在线。

知道为什么会发生这种情况以及解决方案是什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:42:28.530

DDMS 不会显示设备文件系统。您只能查看模拟器的文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T04:41:27.717

您要做的是首先**启动模拟器**，`then go the Window->show view -> other -> Android -> devices`然后您将能够选择在线设备，现在进入文件资源管理器，其中将显示与该**特定设备**相关的所有文件。需要注意的另一点这是，文件资源管理器中的文件因**设备而异**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T12:00:27.587

选择 Windows 设备。然后单击菜单重置 Adb。尝试此方法后，我的文件资源管理器看起来很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T18:42:54.833

如果其他建议不起作用。你可以试试重启eclipse。它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-12T18:44:47.117

使用 CMD 注意：如果你的手机有 root 访问权限，或者你使用 GenyMotion 或者你使用 eclipse 模拟器 1\. D:>cd android-sdks\tools（例如我的 SDK 在 D: 驱动器中）2\. D:> cd android-sdks\tools> ddms.bat 3\. 选择你的设备名称 4\. 然后从 d 菜单中选择 Device 5\. 这里..........是文件资源管理器 6\. 浏览 d 文件 7\. 可以这个文件使用名为“DB Browser for SQLite”的“OPEN SOURCE”应用程序调用打开 8\. 现在在此处打开您的 .db 文件

# mysql - 查询可能不存在的数据

> ID：14549086
> 
> 赞同：0
> 
> 时间：2013-01-27T15:52:07.417
> 
> 标签：mysql, sql, select, join

我有 2 张桌子

桌子`Customer`

*   cus_id
*   cus_name

表购买

*   购买ID，
*   cus_id（FK 到客户），
*   价格

我想要的结果

```
cus_id, cus_name, buy_id, price 
```

但万一有些客户没有buy_id。我怎么能这样查询。

```
cus_id, cus_name, null, null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:53:29.617

`LEFT JOIN`如果您想显示所有客户，即使他还没有购买任何东西，也可以使用。

```
SELECT  a.*, b.buy_id, b.price
FROM    customer a
        LEFT JOIN buying b
            ON a.cus_id = b.cus_id 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:54:35.887

通过使用`LEFT JOIN`：

```
Select 
c.cus_id, 
cus_name, 
buy_id, 
price
from 
Customers c
LEFT JOIN Buying b on (c.cus_id=b.cus_id) 
```

# android - 以编程方式添加多个片段

> ID：14549092
> 
> 赞同：8
> 
> 时间：2013-01-27T15:52:44.577
> 
> 标签：android, android-layout

我正在使用片段事务将两个片段添加到一个活动中。但是碰巧在启动应用程序时只显示第一个 Fragment。这是代码：

主要活动

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragOne firstButton = new FragOne();
    FragmentTwo secButton = new FragmentTwo();

    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

    transaction.add(R.id.frag_container, firstButton);
    transaction.add(R.id.frag_container, secButton);

    transaction.commit();
} 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/frag_container"
    android:layout_height="fill_parent" 
    android:orientation="horizontal">

</LinearLayout> 
```

frag_one.xml 和 frag_two.xml 类似

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
   <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button One" />
</LinearLayout> 
```

所以我不确定可能是什么问题......我看到了很多添加一个片段的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-21T01:30:10.790

我知道现在回答为时已晚，但我已经找到了问题所在。您的 frag_one.xml 和 frag_two.xml 看起来像：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
   <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button One" />
</LinearLayout> 
```

观察将`LinearLayout`layout_height 设置为`match_parent`. 它不会占据整个屏幕吗？

只要做到这一点`wrap_content`，它就会起作用。刚刚解决了我的情况，这与你的情况相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:48:47.450

我不确定，但有可能实际上添加了两个片段，但是因为它们完全相同并且位于 LinearLayout 中 - 一个隐藏了另一个。

如果我是你，我会将主要活动中的布局更改为**相对布局**，并将片段添加到**两个不同的占位符**以检查这是否是问题所在。

我实际上并没有运行该程序，所以它可能完全是另外一回事......祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T20:45:14.773

因为两个片段 xml 文件的高度参数都是“match_parent”

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    *android:layout_height="match_parent"  WRONG!!! need to be "wrap_content"*
    android:orientation="vertical" >
   <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button One" />
</LinearLayout> 
```

因此，您的第一个片段在他父母的整个高度上膨胀，当其他片段添加时，它们没有位置。

因此在 onCreateView 方法中将容器参数设置为 null 并不是解决问题的正确方法。

你只需要设置 android:layout_height="wrap_content"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-19T05:16:55.923

我的问题是通过确保 LinearLayout 将其方向设置为垂直而不是默认水平来解决的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T09:59:19.827

是的，你是对的，片段都被添加了，但问题是片段布局被一个接一个地添加......问题出在片段代码中

```
View view = inflater.inflate(R.layout.frag_one, container, false); 
```

变成

```
View view = inflater.inflate(R.layout.frag_one, null); 
```

# javascript - Javascript：创建一个类似缓冲区的对象，该对象收集输入击键，然后按时间间隔将它们一一释放到函数

> ID：14549096
> 
> 赞同：2
> 
> 时间：2013-01-27T15:53:15.193
> 
> 标签：javascript, input, buffer, delay, timing

我正在尝试创建一个类似缓冲区的对象，该对象从输入字段中收集所有击键，然后将它们一个接一个地传递给一个函数，每个函数之间设置一个定时延迟。

例如，使用 时`Google Maps/Places Autocomplete Service API`，在输入字段中的每次击键都会触发自动完成的请求功能，我发现如果在很短的时间内击键太多，自动完成请求无法返回结果。因此，我想创建某种缓冲区来收集所有击键，然后一个接一个地，例如 a `200ms interval`，将它们释放到自动完成功能。

因此输入 123 Fake St 需要 700 毫秒，然后以 200 毫秒的间隔将字符串的每个字符传递给函数 - 1（200 毫秒）2（200 毫秒）3（200 毫秒）F（200 毫秒）A ... 等。

我目前对如何编写这样的东西没有可靠的想法，所以无法发布代码，但我原以为这会是类似的东西

```
On key press:

    if( (lastRequestTime - 200) > curTime )
        send input to function 
```

然而，这显然远未完成。有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:09:30.363

您将需要在输入上使用 onkeydown 事件（如您所示）。或者在某些浏览器中，您可能需要将事件放在主体上，然后等待元素上的焦点事件。我可以给出的一个主要智慧是关于时间模式。您应该设置一个接收密钥并处理发送它们的队列对象。基本上，它应该在创建时将一个名为“ready”的布尔值设置为 true，然后每当它获得一个新密钥时，如果它准备好了，它就会立即发送它。但如果不是，它会将它添加到队列中，（通常是一个数组）。每当你让它发送一个键时，只要它设置一个超时，如果有一个或只是设置为 true，它将触发另一个发送（在队列中的下一个键上）。

警告：在技术上不是有效的 javascript。主要是一个例子。

```
takeKey( key )
{
  if ( this.ready )
    this.sendIt( key );
  else
    this.queue.push( key );
}

sendIt ( key )
{
  this.ready = false;
  send( key );
  timeout(function () {
    this.readyUp();    
  }, time);
}

readyUp ()
{
  ready = true;
  if (this.queue.length > 0)
    this.sendIt( this.queue.shift() );
} 
```

那应该处理你的时间。其余的只是基本的 dom 编码。

PS 检查称为节流的东西是您的自动完成小部件的文档。解决方案可能会立即生效。

# php - 将另一个条件添加到 foreach 循环 (PHP)

> ID：14549097
> 
> 赞同：1
> 
> 时间：2013-01-27T15:53:16.873
> 
> 标签：php, loops, foreach

我有两个数据数组可以使用，我正在尝试创建一个循环来像这样利用它们。

数组 A 是关键字列表。数组 B 是城市名称列表。

我希望以下 foreach 循环获取每个关键字并将其与城市名称组合。当每个关键字成功匹配到数组 B 中的每个城市时，我希望循环继续遍历数组 A 值和继续匹配。

看起来很简单，但是使用下面的代码，我无法让它正常工作。该循环成功地从关键字列表中获取一个值，但随后它只是将数组 B 中的每个值添加到该关键字并以这种方式循环。

我的代码如下所示：

```
<?php
foreach ($keyword_list as $key => $value) {
$keyword = strtolower($value);
//REMOVE COMMAS
$keyword = str_replace(',', '', $keyword);
//ADD HYPHENS
$keyword = str_replace(' ', '-', $keyword);

for ($i = 0; $i < count($content); $i++) {
$content[$i] = trim($content[$i]);
//RE-REPLACE SINGLE QUOTES TO ESCAPED VERSIONS FOR INCLUSION IN HTML DOC (PHP ARRAY)
$content[$i] = str_replace("'", "\'", $content[$i]);
}

$file = strtolower(str_replace(' ', '-', $businessName . '-' . $businessPhone));
$file .= '-' . $keyword;

foreach ($city_list as $key2=>$value2) {
$file .='-' . $cityword; 
}

$filename = $file . '.php';
}
?> 
```

因此，使用上面的代码，将生成以下示例...

```
Google-5555555555-Keyword Here-CityNameOne-CityNameTwo-CityNameThree.php 
```

相反，我希望它像这样工作......

```
Google-5555555555-Keyword Here-CityNameOne.php
Google-5555555555-Keyword Here-CityNameTwo.php
Google-5555555555-Keyword Here-CityNameThree.php 
```

我认为这很容易，但我边走边学，我对可能导致此问题的原因感到困惑。如果有什么可以帮助解决的，请指教！我确实希望学习如何正确地做到这一点，所以我只是在寻找任何指导。

非常感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:30:10.760

这更像是一个概念答案，而不是我调整您的代码。如果您试图获得两个列表的所有组合可能性，则 foreach 循环内的 foreach 循环对此非常有用。

```
$keywords = array('keyword0', 'keyword1', 'keyword2', 'keyword3', 'keyword4', 'keyword5', 'keyword6', 'keyword7', 'keyword8', 'keyword9');

$cities = array('austin', 'houston', 'dallas', 'san antonio', 'amarillo', 'katy', 'kyle', 'round rock', 'buda', 'paris');

$all_possible_combinations = array();

//if you would like to get all of the possible combinations of these two lists you may try something similiar to this

foreach($cities as $citykey => $cityname){

    foreach($keywords as $keywordskey => $keyword){
        $all_possible_combinations[] = 'Google-5555555555-'.$keyword.'-'.$cities[$citykey].'.php';
    }
}

echo '<pre>';
print_r($all_possible_combinations);
echo '</pre>'; 
```

您可以在此处编辑并查看输出：http: [//sandbox.onlinephpfunctions.com/code/57522c0bb18e5c04dd6ba3c046f1f9593ce2ceec](http://sandbox.onlinephpfunctions.com/code/57522c0bb18e5c04dd6ba3c046f1f9593ce2ceec)

我认为这正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:11:16.253

最后一次`foreach`添加`$cityname`到 string `$file`，您可以在结果数组中收集“文件名”：

```
$filenames = array();
foreach($keyword_list as $keyword)

    // ... snip/snap ...

    foreach($city_list as $city) {
        $filnames []= $file.'-'.$city;
    }
}

print_r($filenames); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:07:09.863

你的问题是这个循环：

```
foreach ($city_list as $key2=>$value2) {
    $file .= '-' . $cityword;
} 
```

一个快速的解决方法是：

```
<?php
foreach ($keyword_list as $key => $value) {
    $keyword = strtolower($value);
    //REMOVE COMMAS
    $keyword = str_replace(',', '', $keyword);
    //ADD HYPHENS
    $keyword = str_replace(' ', '-', $keyword);

    for ($i = 0; $i < count($content); $i++) {
        $content[$i] = trim($content[$i]);
        //RE-REPLACE SINGLE QUOTES TO ESCAPED VERSIONS FOR INCLUSION IN HTML DOC (PHP ARRAY)
        $content[$i] = str_replace("'", "\'", $content[$i]);
    }

    $start_of_line = strtolower(str_replace(' ', '-', $businessName . '-' . $businessPhone));
    $start_of_line .= '-' . $keyword;

    foreach ($city_list as $key2=>$value2) {
        $file .= $start_of_line . '-' . $cityword . '.php'."\n";
    }

    $filename = $file;
}
?> 
```

（我还没有运行上面的代码片段来测试它。）

# css - JQM 布局不适用于 IE9

> ID：14549098
> 
> 赞同：-2
> 
> 时间：2013-01-27T15:53:20.480
> 
> 标签：css, internet-explorer, jquery-mobile, html5shiv

我正在使用 JQM 开发一个移动网站，但我似乎无法使用 IE9。布局与其他浏览器非常不同，所有元素都搞砸了。我正在使用 html5shiv，但我认为这里不是这种情况。

这是我正在使用的：

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script> 
```

然后只是 HTML 标记中的基本 div。

网址： http: [//paaluttaja.elasticbeanstalk.com](http://paaluttaja.elasticbeanstalk.com)

我希望有人能指出我正确的方向......我不需要一个完整的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:29:20.397

我失踪了

```
<!DOCTYPE html> 
```

从文件的开头，它解决了我的问题。IE 似乎只是要求它存在的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:38:10.523

您的页面缺少所需的布局。您有`<div data-role="page">`块但缺少所需的内容块；

```
<div data-role="page">
    <div data-role="header">
     </div>

    <div data-role="content">
        my content here
    </div>
</div> 
```

# java - LoginTask(AsyncTask) 空指针

> ID：14549102
> 
> 赞同：1
> 
> 时间：2013-01-27T15:53:32.150
> 
> 标签：java, android, json, android-asynctask

我尝试修复此错误，但我知道为什么某些**nullpointer**可以返回`json`成功。

```
public class Login extends Activity {
public TextView loginErrorMsg;
private ProgressDialog progressDialog;
private JSONObject jsonResult;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bus_login);
            //findViewById
}

public void btnLogin_OnClick(View v) {

    new LoginTask().execute();
}

class LoginTask extends AsyncTask<String, String, JSONObject> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(Login.this);
        progressDialog.setMessage("Logging in...");
        progressDialog.setIndeterminate(false);
        progressDialog.setCancelable(true);
        progressDialog.show();
    }

    protected JSONObject doInBackground(String... args) {
        // TODO Auto-generated method stub
        String uname = inputUserId.getText().toString();
        String password =inputPassword.getText().toString();
        UserFunctions vehicleFunction = new UserFunctions();
        jsonResult = vehicleFunction.loginVehicle(uname, password);

        return jsonResult;
    }

    protected void onPostExecute(JSONObject jsonResult) {
        // dismiss the dialog once done
        progressDialog.dismiss();

        try {

            int success = jsonResult.getInt("success");
            if (success == 1) {
                loginErrorMsg.setText("success");

            } else{
                loginErrorMsg.setText("Fail");
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

}

```
public JSONObject loginVehicle(String vehicleId, String password){
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("vehicleId", vehicleId));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginVehicleURL, params);
    return json;
}

01-27 23:44:12.438: W/System.err(2121): java.lang.NullPointerException
01-27 23:44:12.438: W/System.err(2121):     at com.ptms.Bus_Login$LoginTask.onPostExecute(Bus_Login.java:79)
01-27 23:44:12.448: W/System.err(2121):     at com.ptms.Bus_Login$LoginTask.onPostExecute(Bus_Login.java:1)
01-27 23:44:12.448: W/System.err(2121):     at android.os.AsyncTask.finish(AsyncTask.java:602)
01-27 23:44:12.458: W/System.err(2121):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
01-27 23:44:12.458: W/System.err(2121):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
01-27 23:44:12.458: W/System.err(2121):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 23:44:12.458: W/System.err(2121):     at android.os.Looper.loop(Looper.java:137)
01-27 23:44:12.458: W/System.err(2121):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-27 23:44:12.458: W/System.err(2121):     at java.lang.reflect.Method.invokeNative(Native Method)
01-27 23:44:12.458: W/System.err(2121):     at java.lang.reflect.Method.invoke(Method.java:511)
01-27 23:44:12.458: W/System.err(2121):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-27 23:44:12.458: W/System.err(2121):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-27 23:44:12.458: W/System.err(2121):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:14:47.377

请在 Eclipse 中**调试您的应用程序。**

签入此方法。我猜它在json中返回null。

```
public JSONObject loginVehicle(String vehicleId, String password){
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("vehicleId", vehicleId));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginVehicleURL, params);
    return json;
} 
```

**签入此行**

```
JSONObject json = jsonParser.getJSONFromUrl(loginVehicleURL, params); 
```

并且您正在访问包含 null 的 jsonResult。

```
int success = jsonResult.getInt("success"); 
```

# tortoisesvn - TortoiseSVN - 如何在不删除所有当前版本的情况下更新以前的版本？

> ID：14549103
> 
> 赞同：1
> 
> 时间：2013-01-27T15:53:39.733
> 
> 标签：tortoisesvn

我是 SVN 新手，所以如果我不知道正确的术语或者这是一个简单的问题，我深表歉意。

我有一个运行修订版 231 的生产服务器和一个运行修订版 238 的登台服务器。我目前正在对修订版 238 进行各种更改，这些更改尚未准备好上线。

但是，客户端需要尽快对生产服务器进行快速更改（运行修订版 231）。我想我可以将我的本地副本更新到修订版 231，进行更改，提交它，在我的生产服务器上启动新修订版，然后返回对修订版 238 进行更改。

不过，好像不太喜欢。Tortoise 一直在提交失败，告诉我事情有冲突。我曾尝试将我的头部修订为 231，但也无法坚持下去。

通读所有的帮助文件，所有说“恢复”和“撤消”的东西都吓到我了，因为我不想丢失最新的修订版本。我只需要触摸那个旧文件一秒钟，然后再继续处理我的最新文件。

如何实现？或者甚至只是帮助我做我想做的事情的正确术语是什么，所以我知道要搜索 TortoiseSVN 帮助的内容是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:26:08.813

好吧，以前的所有答案*都不完美*

*   保存您当前的更改（与修补程序**无关**）并在主干中提交为 239
*   将 WC 更新为 rev。231`svn up -r 231`
*   进行修补程序更改，保存在 WC
*   在 WC-root 中的 TSVN 中选择“分支/标签”并在存储库中定义新分支。不要选择“切换到”复选框
*   将更改提交到分支到 rev.240
*   导出此修订以替换 LIVE
*   在主干返回 239，将你的分支合并到主干
*   继续你的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:58:12.570

您不必害怕“还原”，您在本地副本中工作！您的代码在 svn 服务器中是安全的。在您还原之前尝试“清洁”功能。然后尝试还原，然后更新到最新版本。如果您仍然害怕，我建议您制作一个新的“工作副本”并看到这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:05:05.233

从修订版 231 创建一个分支（称之为紧急产品错误修复）。将您的修复提交到此分支。该提交将获得修订版 239，但不要担心。SVN 版本是绝对的，您当前分支中包含 231 和 238 的代码（我假设它是主干）不受您的新产品错误修复分支和版本 239 的提交的影响。

从 prod bug fix 分支发布你的修复。

然后将 prod fix 分支合并到主干。您的紧急错误修复代码现在将在您的主分支中。提交合并，这将获得一个颠覆修订版 240。

# php - 未能删除缓冲区。没有要删除的缓冲区

> ID：14549110
> 
> 赞同：41
> 
> 时间：2013-01-27T15:54:12.253
> 
> 标签：php, codeigniter, phpexcel

我正在尝试从下面的代码生成扩展名为 .xlsx 的 excel 文件。我可以很好地下载文件，但是当我用 Excel 表打开它时，我收到以下警告错误。Excel 无法打开文件“dindi.xlsx”，因为文件格式或文件扩展名无效。确保文件未损坏并且文件扩展名与文件格式匹配。当我用记事本打开它时，该文件出现以下错误：

> 注意：ob_end_clean() [ref.outcontrol]：删除缓冲区失败。没有要删除的缓冲区

下面是我正在尝试做的代码。

```
public function exportResults() {

        $this -> load -> database();
        $query = $this -> db -> query("
        SELECT * FROM farm LIMIT 10");
        $results = $query -> result_array();
        $objPHPExcel = new Excel();

        $objReader = PHPExcel_IOFactory::createReader('Excel2007');
        $objPHPExcel = $objReader->load('./files/farmdetails.xlsx');

        $objPHPExcel ->getActiveSheet()->setTitle('farmreport');

        $objPHPExcel -> setActiveSheetIndex(0);
        $i = 1;
        foreach ($results as $result) {

            $objPHPExcel -> getActiveSheet() -> SetCellValue('A' . $i, $result["name"]);
            $objPHPExcel -> getActiveSheet() -> SetCellValue('B' . $i, $result["dateofcontract"]);
            $objPHPExcel -> getActiveSheet() -> SetCellValue('C' . $i, $result["leasorname"]);
            $objPHPExcel -> getActiveSheet() -> SetCellValue('D' . $i, $result["acre"]);
            $objPHPExcel -> getActiveSheet() -> SetCellValue('E' . $i, $result["zone"]);

            $i++;
            echo $result["name"];
            }

        ob_end_clean();
        $filename = "dindi.xlsx";
        header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
        header("Cache-Control: no-store, no-cache, must-revalidate");
        header("Cache-Control: post-check=0, pre-check=0", false);
        header("Pragma: no-cache");
        header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
        header('Content-Disposition: attachment;filename=' . $filename);

        $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');

        ob_end_clean();

        $objWriter -> save('php://output');

        $objPHPExcel -> disconnectWorksheets();
        unset($objPHPExcel);

    } 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-27T16:00:24.543

该错误只是告诉您没有要删除的缓冲区。为了避免它，只需使用：

```
if (ob_get_contents()) ob_end_clean(); 
```

（检查是否有活动的输出缓冲区）或：

```
if (ob_get_length()) ob_end_clean(); 
```

（检查缓冲区中是否有非空字符串）正如@Venu 所建议的那样。

你也在`ob_end_clean();`那里打电话两次。这仅适用于可堆叠缓冲区。来自 PHP 手册：

> 此函数丢弃最顶层输出缓冲区的内容并 **关闭**此输出缓冲。

你确定你不想只使用[ob_clean()](http://php.net/manual/en/function.ob-clean.php)吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-10-10T08:41:33.300

添加这段代码。当 minifyhtml 处于活动状态时，会在实时站点上发生。可以连接到 advagg 和 httprl 请求。

建议的修复是`ob_clean()`用`ob_get_length()`条件包装。

```
if(ob_get_length() > 0) {
    ob_clean();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-31T14:09:00.780

从[PHP 文档评论部分](http://php.net/manual/en/function.ob-clean.php#110905)，归功于 scoalaweb dot com 的cornel：

不要使用`ob_clean()`或`ob_end_clean()`清除包含文件“意外”生成的空白或其他不需要的内容。

包含的文件首先不应生成不需要的内容。

如果是这样，则说明您做错了，例如在 " " 之后插入空格（ PHP 文件末尾`?>`不应有 " "），或者其他不符合[PHP 基本语法规则的](http://php.net/manual/en/language.basic-syntax.phptags.php)错误。`?>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-30T11:05:13.750

改变

```
ob_end_clean(); 
```

有了这个

```
if (ob_get_contents()) ob_end_clean(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-27T09:20:16.243

您的代码没有**ob_start**，当然没有要删除的缓冲区。

请检查[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

# php - 自定义 Form_validation 库不起作用

> ID：14549113
> 
> 赞同：1
> 
> 时间：2013-01-27T15:54:28.430
> 
> 标签：php, regex, codeigniter, validation

我制作了一个`custom_form_validation.php`文件，`application\libraries`其中包含：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
  class Custom_form_validation extends CI_Form_validation {
    function Custom_form_validation()
    {
      parent::__construct();  
    }

    /* at_least_one_letter() by Ben Swinburne
     * http://stackoverflow.com/a/9218114/1685185
     -----------------------------------------------*/
    public function has_at_least_one_letter( $string ) 
    {
      $result = preg_match('#[a-zA-Z]#', $string);
      if ( $result == FALSE ) $this->set_message('has_at_least_one_letter', 'The %s field must have at least one letter.');
    return $result;
    }
  } 
```

然后我将它加载到特定的控制器中：

```
$this->load->library('form_validation');
$this->load->library('custom_form_validation'); 
```

最后，我将该函数`has_at_least_one_letter`用作：

```
$this->form_validation->set_rules('FieldName', 'field name', 'has_at_least_one_letter'); 
```

我不知道出了什么问题，因为我按照 SO 中给出的示例构建了我自己的库，特别是关于“扩展`form_validation`”的库。我错过了一个步骤或一些特殊的部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:11:09.013

自定义库扩展 CI_Form_Validation：

> 库\MY_Form_validation.php

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Form_validation extends CI_Form_validation {

    protected $CI;

    function __construct()
    {
        parent::__construct();
        $this->CI =& get_instance();
    }

function has_at_least_one_letter($string) {
    $this->CI->form_validation->set_message('has_at_least_one_letter', 'The %s field must have at least one letter.');
    return preg_match('#[a-zA-Z]#', $string);
} 
```

然后使用

```
$this->form_validation->set_rules('FieldName', 'field name', 'has_at_least_one_letter'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:34:01.727

您无需创建单独的函数即可在 CodeIgniter 中运行正则表达式验证。它允许您像这样指定正则表达式：

```
$this->form_validation->set_rules('FieldName', 'field name', 'regex_match[#[a-zA-Z]#]'); 
```

# php - php preg_replace(): 未知修饰符 ','

> ID：14549115
> 
> 赞同：-2
> 
> 时间：2013-01-27T15:54:52.430
> 
> 标签：php, preg-replace, modifier

我有一个很长的 `$partner`列表，写在一个通用文件中。

删除.inc

```
$partner =<<<EOT
"#<h1 class=\"logo\"(.*?)</h1>#s","#<h2 class=\"hidden\"(.*?)</h2>#s"
EOT;
//more $partner rules... 
```

索引.php

```
include(remove.inc);
$str = preg_replace(array($partner), '', $str); 
```

这个回报：

警告：preg_replace(): Unknown modifier ',' in d:\www\indoor\index.php 第 12 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:58:20.240

`$partner`应该是一个字符串数组，但它不是：您使用 HEREDOC 语法将其定义为字符串。

字符串的第一个字符是双引号，正则表达式引擎将其视为分隔符。因此，当遇到下一个未转义的双引号时：

```
"#<h1 class=\"logo\"(.*?)</h1>#s",
                                ^ 
```

引擎假定后面的内容必须是正则表达式修饰符。由于`,`不是有效的修饰符，因此结果是错误的。

正确的做法是

```
$partner = array(
    "#<h1 class=\"logo\"(.*?)</h1>#s",
    "#<h2 class=\"hidden\"(.*?)</h2>#s",
); 
```

并用作

```
$str = preg_replace($partner, '', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:59:18.587

您的[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)字符串将在您的示例中定义时*包含引号和逗号。*这将使您的常规异常实际上由引号而不是哈希标记分隔，因此第一个常规异常在之后结束`#s"`，接下来是逗号，正如您的错误消息所述，它不是有效的常规异常标志. 也没有什么可以将您的 heredoc 表达式拆分为数组中的单独元素 -`array($partner)`会导致一个数组中包含一个包含整个 heredoc 字符串的元素。

# sql - MS Access 2007 根据多个字段识别表/表单中记录的唯一性

> ID：14549116
> 
> 赞同：0
> 
> 时间：2013-01-27T15:55:02.203
> 
> 标签：sql, forms, events, ms-access, combobox

嗨，我正在使用 Microsoft Access v2007，而且我是初学者，所以在执行以下操作时遇到了麻烦。我有一个表，其中包含三个字段（加上附加的关联字段），它们的组合唯一地定义了一条记录。例如，字段 1：“章节编号”，字段 2：“章节编号”，字段 3：“章节版本”。因此，有许多章节将具有相同的“节号”，而这又将有几个修订的节版本。我想做以下事情：在字段 1 中创建一个下拉列表或组合框，用于选择用户想要的章节，然后在字段 2 中，它应该自动仅列出该章节中已经存在的“章节编号”（这已在 Access 的表格中输入）。同样对于字段 3，然后，字段 3 中的下拉框仅显示与该特定“章节编号”的特定“章节编号”相关的选项。一个例子如下：假设用户选择第 1 章作为字段 1 中的记录。这一章有 10 个节号，但他只对第 2 节感兴趣。所以他使用了字段 2 中的下拉框，现在应该只显示 10 个部分。然后字段 3 应该有一个下拉框，显示这个节号的版本，也就是说已经修改了 4 次，总共有四个版本号。如何使 Access 执行上述操作。组合框似乎列出了所有字段 1、2 和 3 中的所有记录，无论在字段 1 中选择了哪些记录应该限制字段 2 中的下拉列表，依此类推。

# mysql - MySQL计数，左连接，分组返回零行

> ID：14549120
> 
> 赞同：4
> 
> 时间：2013-01-27T15:55:51.507
> 
> 标签：mysql, sql, count, group-by

在下面的 sql 语句中：

```
 SELECT `keywords`.keyID, count(`keywords-occurencies`.keyID) as countOccurencies 
                    FROM `keywords-occurencies`  
                    LEFT JOIN `keywords` 
                    ON `keywords-occurencies`.keyID = `keywords`.keyID 
                    WHERE `keywords-occurencies`.`keyID` IN (1,2,3) AND date BETWEEN '2013/01/25' AND '2013/01/27'
                    GROUP BY `keywords`.`keyID` 
```

如果 keyID 3 没有返回值，则不计为 0，也不包含在结果集中，并显示类似这样的结果

```
keyID countOccurencies
1       3
3       5 
```

我想显示零结果，例如

```
keyID countOccurencies
1       3
2       0
3       5 
```

用于测试的样本数据：

```
--
-- Table structure for table `keywords`
--

CREATE TABLE IF NOT EXISTS `keywords` (
  `keyID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `keyName` varchar(40) NOT NULL,
  PRIMARY KEY (`keyID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `keywords`
--

INSERT INTO `keywords` (`keyID`, `keyName`) VALUES
(1, 'testKey1'),
(2, 'testKey2');

-- --------------------------------------------------------

--
-- Table structure for table `keywords-occurencies`
--

CREATE TABLE IF NOT EXISTS `keywords-occurencies` (
  `occurencyID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `keyID` int(10) unsigned NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`occurencyID`),
  KEY `keyID` (`keyID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `keywords-occurencies`
--

INSERT INTO `keywords-occurencies` (`occurencyID`, `keyID`, `date`) VALUES
(1, 1, '2013-01-27'),
(2, 1, '2013-01-26');

--
-- Constraints for table `keywords-occurencies`
--
ALTER TABLE `keywords-occurencies`
  ADD CONSTRAINT `keywords@002doccurencies_ibfk_1` FOREIGN KEY (`keyID`) REFERENCES `keywords` (`keyID`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:00:25.187

 ~~要做的事情

*   你应该把它分组 `GROUP BY keywords-occurencies.keyID`
*   并且您必须显示`keywords-occurencies.keyID`不是`keywords.keyID`
*   数数`keywords.keyID`
*   （*可选*）使用`ALIAS`，这样您就可以摆脱除 tableNames 之外的反引号

询问，

```
SELECT  a.keyID,
        count(b.keyID) AS countOccurencies
FROM    `keywords - occurencies` a
        LEFT JOIN `keywords` b
            ON a.keyID = b.keyID
WHERE   a.keyID IN ( 1, 2, 3 ) AND 
        DATE BETWEEN '2013/01/25' AND '2013/01/27'
GROUP   BY a.keyID 
```

 ~~**更新 1**

根据示例记录，您需要执行以下操作，

*   交换表名
*   把这个条件`DATE BETWEEN '2013-01-25' AND '2013-01-27'`放在`ON`join子句上。
*   （*可选*）使用`ALIAS`，这样您就可以摆脱除 tableNames 之外的反引号

询问，

```
SELECT  a.keyID,
        count(b.keyID) AS countOccurencies
FROM    `keywords` a
        LEFT JOIN `keywords-occurencies` b
            ON a.keyID = b.keyID AND
               b.DATE BETWEEN '2013-01-25' AND '2013-01-27'
WHERE   a.keyID IN ( 1, 2, 3 ) 
GROUP   BY a.keyID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c7fbc/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:57:58.173

`date`在::上打一个反勾号

```
SELECT 
`keywords`.keyID, 
count(`keywords-occurencies`.keyID) as countOccurencies 
FROM `keywords-occurencies`  
LEFT JOIN `keywords`  ON `keywords-occurencies`.keyID = `keywords`.keyID 
WHERE `keywords-occurencies`.`keyID` IN (1,2,3) AND `date` BETWEEN '2013/01/25' AND '2013/01/27'
GROUP BY `keywords-occurencies`.`keyID` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:05:50.663

有两件事。您需要按左外连接*第一*部分的 id 进行分组。然后你需要计算*第二*面是什么。对于右外连接，顺序相反：

```
SELECT k.keyID, count(ko.keyID) as countOccurencies 
FROM `keywords-occurencies` ko
      RIGHT JOIN `keywords` k
      ON ko.keyID = k.keyID 
WHERE k.`keyID` IN (1,2,3) AND date BETWEEN '2013/01/25' AND '2013/01/27'
GROUP BY k.`keyID` 
```

其原因与左外连接有关。即使没有匹配项，它也会将所有内容保留在第一个表中。所以，这就是你获得完整列表的地方。至于计数，你想计算匹配。如果你计算第一个表中的 id，你总是会得到至少 1。计算第二个表中的 id 可以得到 0。

请注意，我还在您的表中添加了别名，以使查询更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T07:38:31.753

将其更改为`LEFT JOIN`对我有用：

```
SELECT k.keyID, count(ko.keyID) as countOccurencies 
FROM `keywords-occurencies` ko
      LEFT JOIN `keywords` k
      ON ko.keyID = k.keyID 
WHERE k.`keyID` IN (1,2,3) AND date BETWEEN '2013/01/25' AND '2013/01/27'
GROUP BY k.`keyID` 
```~~~~

# c++ - 来自位的 HBITMAP

> ID：14549123
> 
> 赞同：1
> 
> 时间：2013-01-27T15:56:29.133
> 
> 标签：c++, windows, winapi

在大捷径中，我正在尝试编写从另一个应用程序通过 NamedPipe 位图接收到的位图的程序。

我分别发送从 GetBitmapBits 函数获得的 BITMAPINFO 结构和位图位。在接收端，我有一个线程，它使用 HeapAlloc 覆盖两个全局指针：pbmi_paint（指向 BITMAPINFO）和 lpBitmapBits_paint（用于位图位）。pbmi_paint 中的数据似乎总是合法的。然后我尝试在 WndProc 中用这段代码绘制它：

```
case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);
    if(pbmi_paint != NULL && lpBitmapBits_paint != NULL) {
        hBitmap = CreateDIBitmap( hdc,&(pbmi_paint->bmiHeader), CBM_INIT,(LPVOID) lpBitmapBits_paint,pbmi_paint,DIB_RGB_COLORS);
        GetObject(hBitmap, sizeof(bitmap), &bitmap);

        hdcMem = CreateCompatibleDC(hdc);
        oldBitmap = (HBITMAP)SelectObject(hdcMem, hBitmap);
        BitBlt(hdc, 0, 0, bitmap.bmWidth, bitmap.bmHeight, hdcMem, 0, 0, SRCCOPY);

        SelectObject(hdcMem, oldBitmap);
        DeleteDC(hdcMem);
        DeleteObject(hBitmap);
    }       
    EndPaint(hWnd, &ps); 
```

然后我什么也没得到（黑色矩形）。我检查了 bitmap.bmBits，它等于 0x00000000（NULL，位图结构的另一个成员设置正确）。我还尝试以这种方式手动设置 bitmap.bmBits：

```
case WM_PAINT:
 hdc = BeginPaint(hWnd, &ps);
    if(pbmi_paint != NULL && lpBitmapBits_paint != NULL) {
        hBitmap = CreateDIBitmap( hdc,&(pbmi_paint->bmiHeader), CBM_INIT,(LPVOID) lpBitmapBits_paint,pbmi_paint,DIB_RGB_COLORS);
        GetObject(hBitmap, sizeof(bitmap), &bitmap);
        bitmap.bmBits = lpBitmapBits_paint;
        hBitmap1 =  CreateBitmapIndirect(&bitmap);
        hdcMem = CreateCompatibleDC(hdc);
        oldBitmap = (HBITMAP)SelectObject(hdcMem, hBitmap1);
        BitBlt(hdc, 0, 0, bitmap.bmWidth, bitmap.bmHeight, hdcMem, 0, 0, SRCCOPY);

        SelectObject(hdcMem, oldBitmap);
        DeleteDC(hdcMem);
        DeleteObject(hBitmap);
        DeleteObject(hBitmap1);
    } 
```

在此之后 hBitmap1 为 NULL。所以我的问题是为什么我不能在 CreateDIBitmap 或 CreateBitmapIndirect 中使用指向数据的指针？这些函数是否检查数据是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T19:45:58.207

Windows 中的位图是一团糟，尤其是 DDB（设备相关位图）。如果可能的话，我总是更喜欢使用 DIB（与设备无关的位图）。它们更容易使用，并且在现代硬件中不应该有任何明显的性能差异。

一个DIB是用函数创建的[`CreateDIBSection()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183494%28v=vs.85%29.aspx)，像素数据是独立完成的。像这样的东西：

```
void *pixels;
HBITMAP hBmp = CreateDIBSection(NULL, pbmi_paint, DIB_RGB_COLORS, &pixels, NULL, 0);
memcpy(pixels, lpBitmapBits_paint, NumBytesInBitmapBits_paint); 
```

# javascript - 如何使用 JS 或 jquery 在另一个元素之后移动一个元素？

> ID：14549125
> 
> 赞同：34
> 
> 时间：2013-01-27T15:56:44.240
> 
> 标签：javascript, jquery, html

我想将一个元素移到另一个`DIV`元素旁边，通常是这样的：

```
<div class="box-content-top">
 <div class="box-related-product-top">
  <div>  

    <div class="price">
      ...   
    </div>              
    <div class="image">
     ...
    </div>
    <div class="name">
     ...
    </div>
    <div class="cart">
     ...
    </div>

   <div>  

    <div class="price">
      ...   
    </div>            
    <div class="image">
     ...
    </div>
    <div class="name">
     ...
    </div>
    <div class="cart">
     ...
    </div>

  </div>
</div> 
```

我想将班级的位置更改为`div`班级`.price`之后`.name`，如下所示：

```
<div class="box-content-top">
 <div class="box-related-product-top">
  <div>  

    <div class="image">
     ...
    </div>
    <div class="name">
     ...
    </div>
     <div class="price"> // HERE
      ...   
    </div> 
    <div class="cart">
     ...
    </div>

   <div>  

    <div class="image">
     ...
    </div>
    <div class="name">
     ...
    </div>
    <div class="price"> // HERE
      ...   
    </div> 
    <div class="cart">
     ...
    </div>

  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-27T15:59:22.553

您可以使用`insertAfter`来移动元素。[文档](http://api.jquery.com/insertAfter/)

```
$('.price').each(function() {
    $(this).insertAfter($(this).parent().find('.name'));
}); 
```

在这里你有[更新的小提琴](http://jsfiddle.net/m6djm/101/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T16:16:31.760

```
$('.box-related-product-top > div').each(function(){
    $(this).find('.image').appendTo(this);
    $(this).find('.name').appendTo($(this));
    $(this).find('.price').appendTo($(this));
    $(this).find('.cart').appendTo($(this));
}); 
```

试试看：http: [//jsfiddle.net/m6djm/1/](http://jsfiddle.net/m6djm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:02:34.350

`<div>`'s 是块级元素，因此这是它们的自然行为。您可以浮动 div 然后清除它们，或者使用`display: inline`.

我认为此链接将帮助您了解更多信息：

[CSS 块和内联](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)

# android - 将图像文件存储到服务器

> ID：14549128
> 
> 赞同：0
> 
> 时间：2013-01-27T15:56:54.920
> 
> 标签：android, image-processing, webserver, storage

我正在开发一个旅行应用程序。它有有图像的地方。

我在自己的服务器上有一个数据库。我的应用程序从该服务器数据库读取图像。

我对存储图像的两种选择感到困惑：

1.  将图像的链接存储在数据库中。应用阅读时，下载该图像然后显示它

2.  将编码图像存储在数据库中。应用阅读时，解码图像并显示。

哪个选择更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:02:29.363

这取决于不同的因素，例如图像大小和存储在服务器的 web-app 文件夹中的可能性。例如：如果您的服务器有一个公用文件夹`http://server/public`并且您有大图像，您可以将图像存储在那里，并将 URL 路径存储在数据库中。该应用程序读取图像的 uri 并显示它。这是更快的解决方案。但是，如果您没有公用文件夹并且图像很少，则可以将 base64 图像存储为`Blob object`数据库内部，然后在您的应用程序上获取、解码和显示图像。这一切都取决于不同的因素。

# django - Django 上的 Sphinx 搜索在 /search/ 处引发异常 TypeError

> ID：14549130
> 
> 赞同：0
> 
> 时间：2013-01-27T15:57:08.430
> 
> 标签：django, postgresql, sphinx, django-sphinx

我正在尝试根据本教程使用 sphinx 搜索、postgresql 和 django 来构建全文搜索：http: [//pkarl.com/articles/guide-django-full-text-search-sphinx-and-django-sp /](http://pkarl.com/articles/guide-django-full-text-search-sphinx-and-django-sp/)。为 sphinx 和 postgresql 完成了所有设置，它可以工作，但是在到达**示例 Django 代码**部分时遇到了麻烦。

在 django views & urlconf 中，我只用自己的模型将 *search_results* 的功能更改为*search*和*Story*模型。对于 URLConf，我只将 *search_results* 更改为*搜索*，就像在视图上一样，*搜索*模板上没有任何更改。

因此，当我尝试从 Django 中的表单中搜索时，出现异常：

```
TypeError at /search/
list() takes exactly 1 argument (0 given) 
```

我还尝试通过更改 urlpattern 和视图定义来根据 steyblind 的评论进行更改，如下所示：

```
(r'^search/(.*)?', search),

def search(request, query=''): 
```

但仍然保持获取 TypeError 异常。我在这里做错了吗？提前致谢。

这是我的片段：

**网址.py**

```
(r'^search/(.*)', search), 
```

**视图.py**

```
def search(request, query):
    try:
        if(query == ''):
            query = request.GET['query']
        results = Flow.search.query(query)
        context = { 'flows': list(results),'query': query, 'search_meta':results._sphinx }
    except:
        context = { 'flows': list() }

    return render_to_response('search.html', context, context_instance=RequestContext(request)) 
```

**搜索.html**

```
{% extends "base.html" %}

{% block main %}

<div>
    <form action="/search/" method="GET">
        <input type="text" name="query"/>
        <input type="submit">
    </form>

    {% if flows %}
        <p>Your search for &ldquo;<strong>{{ query }}</strong>&rdquo; had <strong>{{ search_meta.total_found }}</strong> results.</p>
        <p>search_meta object dump: {{ search_meta }}</p>
    {% endif %}
    <hr/>
    {% for s in flows %}
            <h3><a href="{{ s.get_absolute_url }}">{{ s.title }}</a></h3>
            <p>(weight: {{ s.sphinx.weight }})</p>
            <p>story.sphinx object dump: {{ s.sphinx }}</p>
    {% empty %}
        <p>YOU HAVEN'T SEARCHED YET.</p>
    {% endfor %}
</div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:41:45.313

如果我错了，请纠正我，但 Django-Sphinx 似乎是一个废弃的项目。它的最后一次更新是一年前，大多数更新是 3-5 年前。另外，我当时不能代表 Django，但它现在可以做，开箱即用，你试图用 Sphinx 做的事情。

您使用的是哪个版本的 Django 和 Python？你得到的错误很奇怪，因为`list()`不能接受任何参数。在 python shell 中试试这个：

```
>> list()
[] 
```

无论如何，我对代码进行了一些修改，可能有助于解决问题。**但是**，如果没有`results`，您将`'flows'`在此行中传递为空：

`context = { 'flows': list() }`

如果你看一下模板，这真的什么都做不了。

网址.py：

`(r'^search/', search),`

视图.py：

```
def search(request):
        query = request.GET.get('query')
        if query:
            results = Flow.search.query(query)
        if results:
            context = { 'flows': list(results),'query': query, 'search_meta':results._sphinx }
        else:
            context = { 'flows': list() }
    return render_to_response('search.html', context, context_instance=RequestContext(request)) 
```

综上所述，我强烈建议，因为这个项目已经过时了，你可以使用自己的搜索。或者，如果您需要更多功能，您可以使用`Haystack`经常更新的搜索应用程序。使用与`urls.py`上面相同的方法，您可以将以下内容实现为一个简单的搜索，它将返回空白搜索的所有结果，即查询的实际过滤结果。

视图.py：

```
def search(request):
    query = request.GET.get('q')
    results = Flow.objects.all()
    if query:
        results = results.query(query)
    return render_to_response('search.html', {"flows": results,}, context_instance=RequestContext(request)) 
```

# android - 碰撞时只播放一次声音

> ID：14549132
> 
> 赞同：0
> 
> 时间：2013-01-27T15:57:21.837
> 
> 标签：android, andengine

所以最近我想我想出了一个解决方案，只是发现当我在关卡中添加了多个相同的对象类型时它不起作用。

我正在做的是遍历我的不同对象列表并检查它们中的任何一个是否与玩家发生碰撞，如果它们是我播放与玩家碰撞的声音，然后我将声音的布尔值设置为真，表示现在已经播放了声音。

当它们没有发生碰撞或当前迭代的对象没有与玩家碰撞时，我将声音布尔值设置为 false。因此，正如您可能看到的那样，当添加多个相同对象时会出现问题，因为其中一个会将布尔值设置为 false，并且只要玩家与其中一个碰撞，声音就会一遍又一遍地播放的对象。

所以我已经没有解决方案来解决这个问题，所以我正在寻求帮助。

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:13:35.110

像声音管理器类这样的东西怎么样？不要告诉声音播放，而是告诉声音管理器播放那个声音。然后，管理器播放声音并忽略其他播放该声音的请求，直到完成。根据 jmr 的建议，这里的关键是不要在他没有碰撞时将布尔值设置为 false，当经理识别出声音播放完毕时，它将设置为 false。

顺便说一句，这样做的好处是允许在管理器中添加额外的逻辑。如果第二个请求在第一个请求的一半之后，您可以允许管理器两次播放相同的声音，而不是将其限制为一次只播放一个声音。或者，对于某些声音，您可能希望他们排队等待轮到他们播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:02:35.993

在检测到碰撞时将其设置`true`为，仅`false`在声音播放完毕后将其设置为。

# android - Android对话框设置取消在触摸侧

> ID：14549133
> 
> 赞同：1
> 
> 时间：2013-01-27T15:57:24.430
> 
> 标签：android, android-dialog, activitygroup

我有这个`custom dialog`里面一个`Activty`里面`ActivityGroup`。

我希望在外部单击时关闭对话框，并尝试了我在网上找到的所有内容以使其正常工作..

我试过了`setCanceledOnTouchOutside(true)`- 没用

我试过了：

```
public boolean onTouchEvent ( MotionEvent event ) {
  // I only care if the event is an UP action
  if ( event.getAction () == MotionEvent.ACTION_UP ) {
    // create a rect for storing the window rect
    Rect r = new Rect ( 0, 0, 0, 0 );
    // retrieve the windows rect

    this.getWindow ().getDecorView ().getHitRect ( r );
    Log.i(r.toShortString(),r.toShortString());
    // check if the event position is inside the window rect
    boolean intersects = r.contains ( (int) event.getX (), (int) event.getY () );
    // if the event is not inside then we can close the activity
    if ( !intersects ) {
      // close the activity
      this.dismiss ();
      // notify that we consumed this event
      return true;
    }
  } 
```

它也没有用..

正如我在 LogCat 中看到的那样——我认为由于某种原因**，对话框窗口大小是全屏显示的，这就是为什么我没有“外部”可以触摸的原因。**

我认为这可能与活动组有关。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:47:17.977

好的，经过大量思考，我找到了最简单的解决方案：

**问题：**

由于某种原因 - 尽管我使用的主题是一个对话框而不是全屏显示 -`getWindow().getDecorView()`返回一个覆盖整个屏幕的视图。

**解决方案：**

在我的 XML 文件中，我为根元素提供了一个 id，并将上面的函数更改如下：

```
private View rootView;

public BaseDialog(Context context, int theme) {
    super(context, theme);  
    //I don't think the next 2 lines are really important - but I've added them for safety  
    setCancelable(true); 
    setCanceledOnTouchOutside(true);    
}

public void setRootView(int resourceId)
{
    this.rootView = findViewById(resourceId);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    Rect rect = new Rect();
    rootView.getHitRect(rect);
    if (!rect.contains((int)event.getX(), (int)event.getY()))
    {
        this.dismiss();
        return true;
    }
    return false;       
} 
```

**希望它会帮助某人...... :)**

# python - matplotlib，图的边缘上的点对应于图中的点

> ID：14549135
> 
> 赞同：1
> 
> 时间：2013-01-27T15:57:32.127
> 
> 标签：python, matplotlib, wxpython

![1](../Images/1248622ea417b14d240af689dfcb61e7.png)
这是一个例子，我想知道这是否可以在 matplotlib 中使用 wxpython

基本上，在图表的一侧有与图表上的点相对应的彩色部分，当您单击蓝色或红色部分时，它会突出显示图表上与之相关的点

如果无论如何这样做，是否有任何在线示例，或者如果有人做过类似的事情，他们可以帮助我走上正确的轨道

我想使用 wxpthon 和 matplotlib 来创建这个提前谢谢

戴夫

# image - AS3 嵌入图像类，然后将这些图像放入另一个类？

> ID：14549136
> 
> 赞同：5
> 
> 时间：2013-01-27T15:57:33.697
> 
> 标签：image, actionscript-3, air, embed

例如，现在我有一个名为“Balls.as”的类。在这里，我加载了 10 个不同的球图像。你知道，像这样：

```
[Embed(source = "/ball1.png")]
[Embed(source = "/ball2.png")] 
```

问题是，如果我生成 5 个球，这些球图像会被嵌入 5 * 5 次，对吗？如我错了请纠正我！所以我，我不能有一个ballimageloading类吗？加载这些图像一次，然后在 Balls.as 中加载我想要的任何球？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T16:43:18.960

您不需要“加载”它们，它们是嵌入的。您只需要实例化图像。拥有一个管理共享资源的类是个好主意，例如：

```
public class TextureAssets 
{
    [Embed(source = "../lib/ball1.png")]
    private static var Ball1:Class;

    [Embed(source = "../lib/ball2.png")]
    private static var Ball2:Class;

    public static var ball1Texture:BitmapData;
    public static var ball2Texture:BitmapData;

    public static function init():void
    {
        ball1Texture = (new Ball1() as Bitmap).bitmapData;
        ball2Texture = (new Ball2() as Bitmap).bitmapData;
    } 
```

然后你会调用`TextureAssets.init()`一次（例如在 Main.as 中），当你需要 bitmapData 时：使用`new Bitmap(TextureAssets.ball1Texture)`
这种方式你的程序只需要使用一个 bitmapData 所需的内存，而不是有很多最终是相同的。
如果您需要在保留原始数据的同时对 bitmapData 执行操作，您可以使用：

```
var modified:bitmapData = TextureAssets.ballTexture.clone(); 
```

此外，如果您要从一个类中实例化所有球图像，最好放弃静态访问，而是在构造函数中初始化 bitmapDatas，创建一个新的 TextureAssets() 并通过变量调用纹理
（静态字段访问比直接（。）访问：http: [//jacksondunstan.com/articles/1690](http://jacksondunstan.com/articles/1690)）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-27T16:32:23.513

最佳实践是有一个`Assets`包含静态嵌入图像的类，如下所示：

```
[Embed(source="ball1.png")]
public static var BallImage1:Class; 
```

然后你所要做的就是为你的加载声明一个变量`Bitmap`并使用它，就像这样：

```
protected var mBall1:Bitmap = new Assets.BallImage1() as Bitmap; 
```

这将创建一个`Bitmap`已加载图像的实例，然后您可以将其添加到显示列表中。每张图片只加载一次，所有图片都触手可及，可以从您拥有的每个班级访问。

# c - 为什么 evbuffer_add_printf 只接受静态变量而不接受“动态”变量？

> ID：14549138
> 
> 赞同：0
> 
> 时间：2013-01-27T15:57:40.240
> 
> 标签：c, libevent, libev

到目前为止，我已经让我的*libev*代码成功返回了一个静态字符串，上面写着“OMP OMP”，但是当我编写一个返回“静态”字符串的函数时，它似乎永远不会工作。（旁注：这个想法是将相同的功能变成动态响应，但仅出于敏捷测试的目的，我需要首先使用它）。我的*libev*读取回调代码如下...

```
void p2pserver_network_buf_read_callback(struct bufferevent *incoming, void *arg){
    //Define function local variables
    struct evbuffer *evreturn;
    char *req;

    //Begin function local logic
    req = evbuffer_readline(incoming->input);
    if (req == NULL){
        return;    
    }

    char *response;
    parse_json_command(req, response);
    //response = "OMP OMP";
    g_print("PARSED");
    evreturn = evbuffer_new();
    evbuffer_add_printf(evreturn, "%s", response);

    bufferevent_write_buffer(incoming,evreturn);
    evbuffer_free(evreturn);
    free(req);

    g_print("%s", response);
} 
```

parse_json_command**函数**如下...

```
void parse_json_command(char json_command, char *response){

    //Define Local Variables
    g_print("PARSING");

    response = "YOU KNOW";

    //Print out the recieved message....
    //g_message("%s", json_command);

    /** 
     * TODO: check if the JSON is valid before parsing 
     *          to prevent "Segmentation Defaults" 
     *          and its good sanity checks.
     **/

    //Parse JSON incomming
    /*json_object * jobj = json_tokener_parse(json_command);

    enum json_type type;
    json_object_object_foreach(jobj, key, val){
        g_print("%s\n", key);

        if(g_utf8_collate(key, "cmd") >= 0){
            //Looks like the user has sent a "cmd" (command), lets analyze the "val" (value) of that command to see what the caller/client needs to be attending to...

            //Is the client requesting an "Identity Update" (Pings server: if this is the first time ping, the server and client will exachange keys if the relationship exists the server just accepts the encrypted "ping" packet update)
            type = json_object_get_type(val);
            if(type == json_type_string){
                char* cmd_value;
                cmd_value = json_object_get_string(val);
                //g_print("VALUE:%d\n", g_utf8_collate(cmd_value, "identupdate"));
                if(g_utf8_collate(cmd_value, "identupdate") == 0){
                    //Call "Identity Update Response"
                        //char return_response = p2pserver_json_identupdate_response(json_command);

                }
            }
        }
    }
    */
    return;
} 
```

如果您想查看完整的代码（在撰写本文时只有几页大），您可以通过以下链接访问源代码：[https ://github.com/Xenland/P2PCrypt-Server](https://github.com/Xenland/P2PCrypt-Server)

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:11:03.107

c 按值传递参数，而不是按引用传递。你的问题在这里：

```
void parse_json_command(char json_command, char *response){
    [...]
    response = "YOU KNOW";
    [...]
}

char *response;
parse_json_command(req, response); 
```

`response`是一个未初始化的指向字符串的指针。您正在将指向静态字符串的`response`指针分配给函数中的指针，但这不会`response`在函数外部修改，它只是`response`在函数内部更改。有不同的方法来解决这个问题。可能最简单的快速修复方法是将函数的原型更改为返回 a`char *`而不是`void`：

```
char * parse_json_command(char json_command){
    char *response;
    [...]
    response = "YOU KNOW";
    [...]
    return response;
}

char *response;
response = parse_json_command(req); 
```

此外，如果您想在那里传递多个字节，则`json_command`参数可能应该是 a `char *`or `const char *`，而不仅仅是单个。`char`

# linux - Unix 命令 | ps

> ID：14549139
> 
> 赞同：-6
> 
> 时间：2013-01-27T15:57:40.167
> 
> 标签：linux, shell, unix

我在 Shell Prompt 上给出以下命令：$ps -u 0

我无法理解相同的输出是什么。任何人都可以详细说明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:02:10.020

复制自 man ps：

```
 -u userlist     Select by effective user ID (EUID) or name.
                   This selects the processes whose effective user name or ID is in userlist. The
                   effective user ID describes the user whose file access permissions are used by the
                   process (see geteuid(2)). Identical to U and --user. 
```

含义：它打印以用户 0（root）启动的所有进程
有关更多信息，请参见 man ps

编辑：要查看所有正在运行的进程，而不仅仅是来自一个用户，您可以使用“ps ax”

# android - 检索联系人时出现非法状态异常

> ID：14549145
> 
> 赞同：0
> 
> 时间：2013-01-27T15:58:09.013
> 
> 标签：android, android-contentresolver

当我检索联系人时，它会给出非法状态异常..

这是我的代码..

```
private ArrayList<HashMap<String, String>> getContacts() {
    // TODO Auto-generated method stub
    Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
    String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                    ContactsContract.CommonDataKinds.Phone.NUMBER};

    Cursor people = getContentResolver().query(uri, projection, null, null, null);

    int indexName = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
    int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
    int numberType = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE);
    if(people.getCount()>0){
    while (people.moveToNext())
     {
        // For Number Type
        String nameType="";
        int type = people.getInt(numberType);
        switch (type) {
            case Phone.TYPE_HOME:
                    nameType= "_Home";
                break;
            case Phone.TYPE_MOBILE:
                nameType= "_Mobile";
                break;
            case Phone.TYPE_WORK:
                nameType= "_Work";
                break;
            case Phone.TYPE_OTHER:
                nameType= "_Other";
                break;
            }

        String name   = people.getString(indexName)+""+nameType;
        String number = people.getString(indexNumber);
        System.out.println("name: "+name+" number: "+number);
        // Do work...
        HashMap<String, String> namePhoneType = new HashMap<String, String>();

        namePhoneType.put(name, number);
        System.out.println("Hash map: "+namePhoneType);
        //namePhoneType.put("Name", name);
        //namePhoneType.put("Phone", number);
        // adding to array list
        contactList.add(namePhoneType);
        System.out.println("Array list: "+contactList);
    } 
    }
    return contactList;
} 
```

这是我的日志...

```
01-27 21:10:29.290: E/AndroidRuntime(333): FATAL EXCEPTION: main
01-27 21:10:29.290: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activityComponentInfo{com.first/com.first.SecondActivity}: java.lang.IllegalStateException: get fieldslot from row 0 col -1 failed
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread.access$1500(ActivityThread.java:117)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.os.Handler.dispatchMessage(Handler.java:99)
01-27 21:10:29.290: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread.main(ActivityThread.java:3683)
01-27 21:10:29.290: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
01-27 21:10:29.290: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
01-27 21:10:29.290: E/AndroidRuntime(333):  atcom.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-27 21:10:29.290: E/AndroidRuntime(333):  atcom.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-27 21:10:29.290: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
01-27 21:10:29.290: E/AndroidRuntime(333): Caused by: java.lang.IllegalStateException: get fieldslot from row 0 col -1 failed
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.database.CursorWindow.getLong_native(Native Method)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.database.CursorWindow.getInt(CursorWindow.java:434)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:93)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.database.CursorWrapper.getInt(CursorWrapper.java:123)
01-27 21:10:29.290: E/AndroidRuntime(333):  atcom.first.SecondActivity.getContacts(SecondActivity.java:78)
01-27 21:10:29.290: E/AndroidRuntime(333):  atcom.first.SecondActivity.onCreate(SecondActivity.java:59)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-27 21:10:29.290: E/AndroidRuntime(333):  atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:41:44.687

看看这里的错误代码：

```
String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER};

Cursor people = getContentResolver().query(uri, projection, null, null, null);

int indexName = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
int indexNumber = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
int numberType = people.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE); 
```

在前 2 行中，您得到一个`Cursor`: `people`，其中包含 2 个字段：`DISPLAY_NAME`和`NUMBER`. 查询后，您尝试获取`TYPE`并且我返回 -1，因为您`cursor`仅包含 2 个字段（不是 TYPE），所以这是您的错误。

P/s: `query`ing 后，应该使用`cursor.moveToFirst()`函数。为什么？查看 [Android光标链接](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)

# php - 有没有办法保护我的 PHP 脚本不被编辑？

> ID：14549154
> 
> 赞同：0
> 
> 时间：2013-01-27T15:58:53.357
> 
> 标签：php, source-code-protection

我一直在研究一个 PHP 类来构建一个可再发行的 API。我正在尝试确定一种有效进行许可检查的方法。此时，我让脚本检查运行代码的 URL，在我的服务器上进行握手以查看该 URL 是否存在密钥，然后根据配置文件中的本地密钥检查该密钥。

我的问题是，有没有办法让未来的用户无法编辑这个特定的 PHP 文件？我的困境是，当我现在进行此检查时，代码的任何未来用户都可以轻松地进入我的核心类并将我从 auth check 方法返回的结果交换为 true，而不管服务器响应是什么。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:03:23.957

[例如，您可以通过使用IonCube](http://www.ioncube.com/sa_encoder.php)对脚本进行编码来做到这一点。每个编码文件有一小笔费用（我认为它是由 LOC 计算的）。但是您必须随软件分发许可证文件，并且 IonCube 解码器（免费）将成为您的软件需求列表的一部分。

# c# - 异常是： InvalidOperationException - 当前类型，是一个接口，无法构造。您是否缺少类型映射？

> ID：14549156
> 
> 赞同：40
> 
> 时间：2013-01-27T15:59:07.220
> 
> 标签：c#, asp.net-mvc, inversion-of-control, unity-container

在我的引导程序中：

```
namespace Conduit.Mam.ClientServices.Common.Initizliaer
{
    public static class Initializer
    {
        private static bool isInitialize;
        private static readonly object LockObj = new object();
        private static IUnityContainer defaultContainer = new UnityContainer();

        static Initializer()
        {
            Initialize();
        }

        public static void Initialize()
        {
            if (isInitialize)
                return;

            lock (LockObj)
            {
                IUnityContainer container = defaultContainer;

                //registering Unity for MVC
                DependencyResolver.SetResolver(new UnityDependencyResolver(container));

                //registering Unity for web API
                //  GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);

                #region managers
                container.RegisterType<ISettingsManager, SettingsManager>();

                container.RegisterType<IMamDataManager, MamDataManager>();

                container.RegisterType<IAppsDataManager, AppsDataManager>();
                #endregion

                if (!isInitialize)
                {
                    isInitialize = true;
                }
            }
        }
    }
} 
```

在我的控制器代码中：

```
ISettingsManager sm = mUnityContainer.Resolve<ISettingsManager>(); 
```

悬停在我看到的 mUnityContainer 上`ISettingsManager`被映射到`SettingsManager`

但后来我得到了错误：

> 异常是： InvalidOperationException - 当前类型，是一个接口，无法构造。您是否缺少类型映射？

我也试过

```
ISettingsManager sm = (ISettingsManager)mUnityContainer.Resolve<>(typeof(ISettingsManager)); 
```

但没用

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-07-08T02:04:59.977

仅适用于可能遇到上述错误的其他人（例如我）。简单的解决方案。

您可能错过了在代码中注册您的接口和类（实现该接口）注册。

例如，如果错误是
“*当前类型 xyznamespace.Imyinterfacename**是**一个接口，无法构造。您是否缺少类型映射？*****"****

 **然后你必须在***Register***方法的**UnityConfig**类中注册实现***Imyinterfacename的类。***使用如下代码

 ***```
 container.RegisterType<Imyinterfacename, myinterfaceimplclassname>(); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-27T16:31:21.683

您错误地使用了依赖注入。正确的方法是让你的控制器获取他们需要的依赖项，然后让依赖注入框架注入具体实例：

```
public class HomeController: Controller
{
    private readonly ISettingsManager settingsManager;
    public HomeController(ISettingsManager settingsManager)
    {
        this.settingsManager = settingsManager;
    }

    public ActionResult Index()
    {
        // you could use the this.settingsManager here
    }
} 
```

正如您在此示例中看到的，控制器对容器一无所知。这就是它应该的样子。

所有的 DI 接线都应该在您的 Bootstraper 中进行。你永远不应该`container.Resolve<>`在你的代码中使用调用。

就您的错误而言，`mUnityContainer`您在控制器中使用的可能与在 Bootstraper 中构造的实例不同。但是由于您不应该在控制器中使用任何容器代码，这应该不再是问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-05-15T20:28:48.010

就我而言，尽管为相关接口注册了一个现有实例，但我还是收到了这个错误。

原来，这是因为我通过[Unity.WebForms](https://www.nuget.org/packages/Unity.WebForms) Nuget 包在 WebForms 中使用 Unity，并且我为我提供实例的依赖项指定了一个层次生命周期管理器，但为后续类型指定了一个瞬态生命周期管理器取决于以前的类型 - 通常不是问题 - 但使用 Unity.WebForms，生命周期管理器的工作方式略有不同......您注入的类型似乎需要分层生命周期管理器，但仍然为每个 Web 请求创建一个新容器（因为我猜是网络表单的架构），正如[这篇文章](https://stackoverflow.com/questions/28448212/using-unity-webforms-in-asp-net/28450936#28450936)中所解释的那样。

无论如何，我通过在注册类型/实例时没有为类型/实例指定生命周期管理器来解决它。

IE

```
container.RegisterInstance<IMapper>(MappingConfig.GetMapper(), new HierarchicalLifetimeManager());    
container.RegisterType<IUserContext, UserContext>(new TransientLifetimeManager()); 
```

变成

```
container.RegisterInstance<IMapper>(MappingConfig.GetMapper());
container.RegisterType<IUserContext, UserContext>(); 
```

这样IMapper就可以在这里成功解析：

```
public class UserContext : BaseContext, IUserContext
{
    public UserContext(IMapper _mapper) : base(_mapper)
    {

    }
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T14:01:21.243

可能是您没有注册控制器。试试下面的代码：

步骤 1\. 通过在模型文件夹中实现 defaultcontrollerfactory 编写您自己的控制器工厂类 ControllerFactory :DefaultControllerFactory

```
 public class ControllerFactory :DefaultControllerFactory
    {
    protected override IController GetControllerInstance(RequestContext         requestContext, Type controllerType)
        {
            try
            {
                if (controllerType == null)
                    throw new ArgumentNullException("controllerType");

                if (!typeof(IController).IsAssignableFrom(controllerType))
                    throw new ArgumentException(string.Format(
                        "Type requested is not a controller: {0}",
                        controllerType.Name),
                        "controllerType");

                return MvcUnityContainer.Container.Resolve(controllerType) as IController;
            }
            catch
            {
                return null;
            }

        }
        public static class MvcUnityContainer
        {
            public static UnityContainer Container { get; set; }
        }
    } 
```

第二步：在 BootStrap 中注册：inBuildUnityContainer 方法

```
private static IUnityContainer BuildUnityContainer()
    {
      var container = new UnityContainer();

      // register all your components with the container here
      // it is NOT necessary to register your controllers

      // e.g. container.RegisterType<ITestService, TestService>();    
      //RegisterTypes(container);
      container = new UnityContainer();
      container.RegisterType<IProductRepository, ProductRepository>();

      MvcUnityContainer.Container = container;
      return container;
    } 
```

第 3 步：在全球 Asax 中。

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
            Bootstrapper.Initialise();
            ControllerBuilder.Current.SetControllerFactory(typeof(ControllerFactory));

        } 
```

你完成了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-26T07:13:59.237

在我的例子中，我使用了 Unitofwork 和 Ioc 容器的 2 个不同的上下文，所以当服务层尝试向 DI 注入第二个存储库时，我看到这个问题一直存在。原因是存在的模块包含其他模块实例和容器应该从未构建的新存储库中获取调用.. 我写在这里是为了谁在我的鞋子里

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-17T12:52:28.080

我遇到了这个问题，原因是我没有将 Microsoft.Owin.Host.SystemWeb NuGet 包添加到我的项目中。尽管我的启动类中的代码是正确的，但它并没有被执行。

因此，如果您尝试解决此问题，请在执行 Unity 注册的代码中放置一个断点。如果你不点击它，你的依赖注入将无法工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-06T12:57:43.863

以下代码将对您有所帮助

```
public static IUnityContainer Initialise(IUnityContainer container = null)
{
    if (container == null)
    {
        container = new UnityContainer();
    }
    container.RegisterType<ISettingsManager, SettingsManager>();
    container.Resolve<SettingsManager>();
    container.RegisterType<SettingsManagerController>(new InjectionProperty("_SettingManagerProvider", new ResolvedParameter<ISettingManager>()));
    return container;
} 
```*****

# php - 无法从表单中获取值

> ID：14549157
> 
> 赞同：0
> 
> 时间：2013-01-27T15:59:12.883
> 
> 标签：php, codeigniter

由于昨天的帖子，当我试图在控制器和视图之间传输一些变量时，今天我试图从表单中获取数据并更新数据库，但在获取这些值时遇到了麻烦。

这是来自控制器的函数，它是从视图的形式调用的

```
 function updateRecords(){

    $data2=array('name'=>$this->input->post('first_name'),
    'surname'=>$this->input->post('last_name'),
    'contact'=>$this->input->post('contact'),
    'email'=>$this->input->post('email_address'));
            print_r($data2);
     } 
```

当我尝试打印 data2 数组时，我得到： Array ( [name] => [surname] => [contact] => [email] => )

这是视图中的代码：

```
 <fieldset style="text-align:left">
  <legend><h2>Edit Clients Details</h2></legend>
  <?php
  $this->load->helper('form');
  echo form_open('site/updateRecords');
  echo form_input('first_name', $records['0']->name);
  echo form_input('last_name', $records['0']->surname);
  echo form_input('contact', $records['0']->contact);
  echo form_input('email_address', $records['0']->email);
  echo validation_errors('<p class="error">');
  echo anchor('site/updateRecords','Save');
  echo form_close();
  ?>
  </fieldset>

  <p>
  <?php echo anchor('site/add','Add clients');?>&nbsp;
  <?php echo anchor('site/members_area','Go Home')?>&nbsp;
  <?php echo anchor('login/logout', 'Logout'); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:25:16.920

代替

```
echo anchor('site/updateRecords','Save'); 
```

尝试使用

```
echo form_submit('mysubmitname', 'Save!'); 
```

anchor 默认不能提交表单数据。如果您使用 ajax，请创建将表单数据序列化并发布到服务器的 javascript 函数。我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T00:39:36.077

有几种方法可以访问 id。一种是构建编辑页面调用，使其包含 id。通常，我通过将我的 url 设置为类似于：[http](http://site.com/client/client_id/edit) ://site.com/client/client_id/edit的编辑页面来做到这一点。或者，您可以在调用表单时将记录的 ID 隐藏在隐藏的表单字段中，然后将其作为帖子的一部分传回。

# node.js - 为 Node.js 项目配置自定义模块

> ID：14549165
> 
> 赞同：0
> 
> 时间：2013-01-27T15:59:38.133
> 
> 标签：node.js

我创建了我的 Node 项目（npm init）。在这个项目中，我想使用来自 git hub [https://github.com/dchester/node-rest-client](https://github.com/dchester/node-rest-client)的 Node REST Client 。

1.  使用依赖更新 package.json：

    ...“依赖”：{“rest-client”：“*”}，...

2.  在我的项目中创建目录 node_modules

3.  将其余客户端复制到目录“node_modules”中
4.  运行“npm install”来安装这个依赖项，但它没有。我究竟做错了什么？如何正确安装不是来自 npm 中央仓库的依赖项？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:46:07.587

看起来您必须为每个模块手动执行此操作。但是，作为如何在没有我自己的注册表的情况下安装私有 NPM 模块中的公认答案[？](https://stackoverflow.com/questions/10386310/how-to-install-a-private-npm-module-without-my-own-registry)由 Mihai 指出，npm 了解 git：

```
npm install git://github.com/visionmedia/express.git 
```

此外，除了进入目录并在那里输入之外，还`npm install`可以将路径指定为参数：

```
npm install path/to/somedir 
```

[How to install a private NPM module without my own registry](https://stackoverflow.com/questions/10386310/how-to-install-a-private-npm-module-without-my-own-registry)中有另一个有用的答案？您可以在其中看到您还可以指定一个指向 tarball 的 url。我建议你看看那个线程。

# javascript - 在 jQuery 动画 div 的结束位置更改 element.style

> ID：14549166
> 
> 赞同：2
> 
> 时间：2013-01-27T15:59:59.170
> 
> 标签：javascript, jquery, css, styles

我正在使用相册 jQuery 插件（超大）。它包括一个缩略图托盘，只需按一下按钮，它就会从屏幕底部向上滑动，从而在 div 属性和 firebug css 'element.style 中创建以下 HTML。财产：

```
style="display: block; bottom: -150px;" 
```

当来电者点击时：

```
style="display: block; bottom: 0px;" 
```

我试图在页面底部放置一个页脚 div，所以想将完成位置移动到“底部：0px”。我已经看到可以将额外的 element.style 添加到本地 CSS 但没有“之前”和“之后”类型的选择我不明白这是否可以帮助我。此外，我在 JS 文件中找不到该功能，据我所知，无论如何都无法访问它。我需要将这些更改为：

```
style="display: block; bottom: -150px;" 
```

当来电者点击时：

```
style="display: block; bottom: 42px;" 
```

任何建议都将受到欢迎。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:15:23.277

可能你找不到的函数是 jquery函数，你可以[在这里](http://api.jquery.com/css/)`.css()`阅读它是如何工作的。

此外，如果您想为一些潜水制作动画，您可以使用 jquery`.animate()`函数（[文档](http://api.jquery.com/animate/)）。

在您的情况下，它应该如下所示：

```
$('#button').click(function() {
    $('#element').animate({
        $('#element').css('bottom', '42px');
    }, 5000, function() {
    });
}); 
```

你的动画时间在哪里`5000`，以毫秒为单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:04:41.550

```
$('#clickedElement').on('click', function() {    
    $('#element').css('bottom', '42px')
}); 
```

如果我没有误会你？

# jquery - jquery .on() 在注入 .load() 时不绑定自定义事件

> ID：14549170
> 
> 赞同：2
> 
> 时间：2013-01-27T16:00:14.537
> 
> 标签：jquery

假设我在同一个文档中有一些带有一些代码的 div：

```
<div id="trigger">Click Me!</div>
<div id="handler">Handler</div>

<script type="text/javascript">
    $("#handler").on('check', function() {alert('Handler is working!');})
    $("#trigger").on('click', function()
       {$("#handler").trigger('check');alert('Trigger is working!')
    })
</script> 
```

它按预期工作。

但是，如果我使用`.load()`将*所有*这些注入到页面中，那么只有（本机）触发事件，而不是（自定义）处理程序事件正在工作。

我想这与时间有关，但我认为`.on()`应该处理时间问题？

编辑：解决方案

* * *

我全都错了。我不知道与上述同时加载的文档有自己对 Jquery 源的引用。因此，在 DOM 中已经存在的 Jquery 之上加载了不同版本的 Jquery。现在它可以在没有`.ready()`甚至使用原始语法的情况下工作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:02:48.273

您要做的是在元素`#handler`存在之前访问它（.load 需要一些时间才能将其拉入页面）。

相反，.on 还支持侦听尚不存在的元素的能力。

```
$("body").on("click", "#handler", function() { alert("Clicked on #handler"); }); 
```

这将在 body 元素（应该存在）上侦听 ID 为 #handler 的元素的任何点击，即使它后来被注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:03:40.583

因为您需要指定父选择器以考虑动态创建的元素。

例子：

```
$("body").on('check', '#handler', function() {alert('Handler is working!');}) 
```

这是一个很好的相关问题：[jQuery 1.7 on() and off() methods for dynamic elements](https://stackoverflow.com/questions/8029589/jquery-1-7-on-and-off-methods-for-dynamic-elements)

# java - Eclipse Java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常

> ID：14549176
> 
> 赞同：0
> 
> 时间：2013-01-27T16:00:53.817
> 
> 标签：java, eclipse, main

我刚启动java，我在这个应该可以工作的代码上得到这个错误..

错误 ：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at Distance2.main(Distance2.java:8) 
```

编码：

```
import java.io.*;

public class Distance2 {

    public static void main(String args[]){
        int v1 = Integer.parseInt( args[0] );
        int v2 = Integer.parseInt( args[1] );

        System.out.println(Math.abs(v1 - v2));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:17:40.503

你需要传递至少两个参数，你应该是整数，否则它会抛出解析异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:08:45.580

您可以使用命令提示符作为 java Distance2 2 5 运行程序；或者对于 Eclipse，你跳到这个 url 的第 6 步 - > [eclipse-arguments](http://theopentutorials.com/tutorials/java/cmd-line-args/how-to-pass-command-line-arguments-in-eclipse-ide/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:03:17.840

您需要将参数传递给程序。在使用这些值之前，强烈建议检查 args 数组的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T16:18:44.887

您一定没有通过任何参数。

为了安全起见，您可以将代码放在 try/catch 块中。

干杯

# r - 强制“dist”对角线为 1

> ID：14549177
> 
> 赞同：4
> 
> 时间：2013-01-27T16:01:06.603
> 
> 标签：r

是否可以从 stats 包中强制距离对象为 0 以外的值？

在这里，我尝试将其强制为其他内容，我可以更改上部或下部，但不能更改对角线：

```
set.seed(10)
x <- matrix(rnorm(25), ncol = 5)
y <- dist(x, diag =TRUE)
z <- 1 - as.matrix(y)
as.dist(z, diag =TRUE) 
```

给出：

```
 1          2          3          4          5
1  0.0000000                                            
2 -0.9030066  0.0000000                                 
3 -0.9803571 -1.9319785  0.0000000                      
4 -1.5249747 -2.3673155 -1.5928891  0.0000000           
5 -2.7903980 -2.8020380 -2.2491893 -1.5839067  0.0000000 
```

而不是预期的：

```
 1          2          3          4          5
1  1.0000000                                            
2 -0.9030066  1.0000000                                 
3 -0.9803571 -1.9319785  1.0000000                      
4 -1.5249747 -2.3673155 -1.5928891  1.0000000           
5 -2.7903980 -2.8020380 -2.2491893 -1.5839067  1.0000000 
```

也许我必须将其作为矩阵对象输出，因为有些东西会强制对角线不为 0，这会导致它不符合处理“dist”对象的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:08:32.380

不与`dist()`; 它不存储对角线，只是一个标志，指示它是否应该通过该`print()`方法打印。

这并不意外。`dist()`是一种存储距离矩阵的紧凑方式，通常不是对称矩阵。在距离矩阵中，根据定义，观察值与自身之间的距离为 0。因此`dist()`，对角线视为微不足道的事物，而不是存储它。

如果我想做你想做的事，我会使用胆量`dist()`并将数据存储`dist()`在一个函数中，比如`mydist()`使用 class `"mydist"`，然后编写`print.mydist()`从`print.dist()`方法中获取代码，但对对角线使用另一个值，然后编写`as.matrix.mydist()`转换为矩阵。您的类可以存储对角线的值（如果它们不同），也可以只存储您希望对角线的单个值。

基本上，您需要做的就是将您想要的对角线值存储为一个额外的属性，然后提供从该属性中提取`print()`的`as.matrix()`方法来打印或填充矩阵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:11:55.957

dist 对象不是矩阵，尽管有一个强制函数可以制作一个，（你已经知道了。）如果你想要一个像 dist 对象这样的矩阵对象，你可以这样做：

```
> z <- as.matrix(y)
> diag(z) <- 1
> z[upper.tri(z)] <- NA
> z
         1        2        3        4  5
1 1.000000       NA       NA       NA NA
2 2.515850 1.000000       NA       NA NA
3 2.093508 2.443131 1.000000       NA NA
4 2.734773 1.985341 2.652412 1.000000 NA
5 1.107235 2.012257 2.134162 1.913537  1 
```

# magento - Magento 站点地图应该包含空类别吗？

> ID：14549178
> 
> 赞同：0
> 
> 时间：2013-01-27T16:01:22.767
> 
> 标签：magento, seo

从 SEO 的角度来看，给出一个没有任何实用价值的页面是不是很危险？如果您为特定类别的内容做广告，但实际上没有，那会不会让点击链接的人继续前进？更重要的是，空类别不会让在 Google 工作的人将您的网站标记为垃圾邮件吗？因为您的站点地图中有 100 个类别，而实际上只有 10 个包含产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:33:54.437

如果您不将它们用于内容或其他演示文稿，您应该隐藏/禁用空的类别，直到您拥有产品。

# delphi - 自定义列表组件，类似于 TListBox

> ID：14549181
> 
> 赞同：3
> 
> 时间：2013-01-27T16:01:39.507
> 
> 标签：delphi, listbox, custom-component

我目前正在寻找一个类似于`TListBox`将显示其他对象列表的对象。我发现很难解释，所以这是我正在寻找的那种东西的图片：![](../Images/5adb87198c31bf98674bc46e62f351bb.png)

每个项目都需要能够显示多行可变文本、显示图像、可*点击*、能够在其上托管按钮。

已经有这样的对象了吗？如果没有，我将如何创建一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T18:52:15.283

假设您想在 Windows 中执行此操作，那么任何 XE 版本的 Delphi 都具有 TCategoryPanelGroup 控件，这几乎就是您所要求的。

# php - 加号（“+”）消失

> ID：14549183
> 
> 赞同：6
> 
> 时间：2013-01-27T16:01:42.470
> 
> 标签：php, html

我正在使用 PHP 和我的短信服务提供商提供的 API 密钥向手机发送短信。

我发送的短信完美地到达了目标手机，但问题是当我`"+"`在我的消息中有签名时`"+"`，手机中没有出现。这可能是因为该`"+"`标志主要用于指示空格。

当我运行 api 时，我的代码如下所示：

```
$msg="A+";
$x= file_get_contents("http://someurl...&msg=$msg"); 
```

你能告诉我怎么做才能让`"+"`手机出现。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T16:03:32.097

您需要考虑使用函数[urlencode](http://php.net/manual/en/function.urlencode.php)。

```
$x = file_get_contents("http://someurl...&msg=" . urlencode($msg)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:04:16.650

使用[urlencode](http://php.net/manual/en/function.urlencode.php) ...

```
$msg="A+";
$msg = urlencode($msg);
$x= file_get_contents("http://someurl...&msg=$msg"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:04:29.350

尝试使用 urlencode

```
$msg = urlencode("A+"); 
```

正如php手册所说：

> 当对要在 URL 的查询部分中使用的字符串进行编码时，此函数很方便，作为将变量传递到下一页的便捷方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T16:07:11.427

试试这个：

```
$msg=urlencode("A+");

$x= file_get_contents("http://someurl...&msg=".$msg); 
```

urlencode 函数在对要在 URL 的查询部分中使用的字符串进行编码时很方便，作为将变量传递到下一页的便捷方式。

# java - 如何使用 NetBeans 构建 ant 的 build.xml？

> ID：14549184
> 
> 赞同：2
> 
> 时间：2013-01-27T16:01:50.167
> 
> 标签：java, apache, netbeans, ant

我已经使用 Subversion 存储库下载了一个应用程序的源代码，但事实证明，这些源代码并不是由 NetBeans 项目组成的。手册中说，我可以使用 Apache Ant 构建它。我知道，NetBeans 默认支持 Ant。所以这里有一个问题 - 我如何告诉 NetBeans 在指定的位置上运行它的 Ant `build.xml`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:28:08.820

`File`->`New Project`

然后在`Categories`pick中`Java`，然后在`Projects`select`Java Free-Form Project`和 hit 中`Next`。之后，您将通过选择项目的位置和 build.xml 来配置项目，然后将 build.xml 中的目标与 IDE 中的操作相关联。

# java - GAE Web 应用程序的运行时依赖项

> ID：14549193
> 
> 赞同：1
> 
> 时间：2013-01-27T16:02:35.470
> 
> 标签：java, google-app-engine, ivy, dependency-management

下载 GAE SDK (1.7.1) 后，我的目录下有*大量*JAR `${GAE_HOME}/lib/`：

![在此处输入图像描述](../Images/b9490f4cd1196ecbe303128c6a90e89b.png)

我正在本地机器上为我的 GAE Web 应用程序设置构建，但还计划设置 QA 机器。我还使用托管在第三台服务器上的 Ivy 存储库来解决我的所有 Web 应用程序的依赖项。

我需要知道我需要将哪些 GAE JAR 打包在我的 Web 应用程序的`WEB-INF/lib`目录下，以及我的 Web 应用程序在运行时在开发应用程序服务器以及我的实时/生产 GAE 服务器上都可以使用哪些 GAE JAR。

所以我问：GAE的生产环境是否让所有这些JAR在运行时可用，还是我需要将它们打包在我的WAR中？生产 GAE 服务器是否提供与开发应用服务器相同的依赖项，或者我是否需要为开发和生产环境提供不同的依赖项配置？提前致谢！

**请注意：**我将 Google-Eclipse 插件用于一些功能，但没有构建或上传/部署。我正在设置一个外部 Ant 构建，它调用 Ivy 和我从终端运行的其他任务。所以我对插件的任何与构建相关的功能都不感兴趣！

# axapta - 在 Ax 2012 中导出 csv 文件

> ID：14549199
> 
> 赞同：0
> 
> 时间：2013-01-27T16:03:13.003
> 
> 标签：axapta, x++, dynamics-ax-2012, ax

我正在从 Ax 2012 导出一个 csv 文件。

存储 Eg:"D:\Local\folder" 的路径来自 Ax 2012 中的一个字段。

现在我创建了一个新文件。例如：Cust.csv，并将我的值从容器写入文件。

问题是如何将系统中的文件存储到上面指定的文件夹路径中。

我正在使用 Runbasebatch，在服务器端执行时是否相同。

谢谢，

维维克奇鲁马米拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T07:58:49.293

在过去（在 AX 2012 之前），您可以`WinAPI::moveFile()`用来移动文件，但在运行 CIL 时它不起作用（它只是客户端）。

.Net 来拯救：

```
new InteropPermission(InteropKind::ClrInterop).assert(); // get dll interop permission
System.IO.File::Move(fileName, newFileName); 
```

您必须`newFileName`事先从您的领域构建。

但是为什么不首先在那里创建文件呢？

# django - 如何更新可排序数据的新顺序？

> ID：14549207
> 
> 赞同：2
> 
> 时间：2013-01-27T16:03:41.973
> 
> 标签：django

我使用这个轻型可排序插件通过拖放 [http://farhadi.ir/projects/html5sortable/对我的数据进行排序](http://farhadi.ir/projects/html5sortable/)

现在，如何更新我的排序顺序

```
 $('.sortable').sortable().bind('sortupdate', function() {
    //Triggered when the user stopped sorting and the DOM position has changed.

 }); 
```

视图.py

```
 def filter_order(request):
    if request.method == 'POST':
        order = request.POST.getlist('filter[]')
        count = 0
        for id in order:
            count += 1
            filter = FilterModel().objects.get(pk=id)
            filter.sort_order = count
            filter.save()
        return HttpResponse('Successfully updating rules order.')
    else:
        return HttpResponse("Error updating rules order.") 
```

网址.py

```
 urlpatterns = patterns('transactions.views',
      ............

      url(r'^filter-order/$', 'filter_order', 
            name='filter_order'),
 ) 
```

规则.html

```
 <ul class="sortable" id="filter-items">
    {% for filter in filters %}
    <li id="{{ filter.id }}">{{filter.rules}}</li>
    {% endfor %}
 </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:06:25.843

```
<script>
$('.sortable').sortable().bind('sortupdate', function() {
    datas = new Array();
    var i = 0;

    $('#filter-items li').each(function() {
        datas[i] = $(this).attr('id');
        i++;
    });

    $.ajax({
        type: "POST",
        data: { 
            'filter[]': datas, 
            'csrfmiddlewaretoken': '{{csrf_token}}'
        }, 
        url:"/transactions/filter-order/",
        contentType: "application/json;charset=utf-8",
        dataType: "json",
        success: function(data) { 
            notify('', 'Successfully updating rules order.', { autoClose: true, delay: 1000 });
        },
        error: function(ts) { 
            notify('', ts.responseText, { autoClose: true, delay: 1000 });
        }
    });
});
</script> 
```

# php - 解析错误：语法错误，第 36 行出现意外的“<”

> ID：14549216
> 
> 赞同：0
> 
> 时间：2013-01-27T16:04:58.580
> 
> 标签：php, parse-error

这是完整的代码：

```
<?php
$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password="pass07"; // Mysql password 
$db_name="test_db"; // Database name 
$tbl_name="test_tbl"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Retrieve data from database 
$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>

<table width="400" border="1" cellspacing="0" cellpadding="3">

<?php
// Start looping rows in mysql database.
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td width="10%"><? echo $rows['one']; ?></td>
<td width="30%"><? echo $rows['two']; ?></td>
<td width="30%"><? echo $rows['three']; ?></td>
<td width="30%"><? echo $rows['four']; ?></td>
</tr>

<?php
// close while loop 
}
?>

</table>

<?php
// close MySQL connection 
mysql_close();
?> 
```

我正在尝试显示我的数据库中的信息。当我运行代码时，它说：解析错误：语法错误，第 36 行上的意外 '<' 我错过了什么？我哪里错了？非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:05:43.467

你有

```
</table> 
```

在您的 PHP 标记中。

改变：

```
<?php
// close while loop 
}
</table>
?> 
```

至：

```
<?php
// close while loop 
}
?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:17:45.593

除非你在你的 中`short_open_tag`设置了，否则你应该替换`on``php.ini`

```
<td width="10%"><? echo $rows['one']; ?></td>
<td width="30%"><? echo $rows['two']; ?></td>
<td width="30%"><? echo $rows['three']; ?></td>
<td width="30%"><? echo $rows['four']; ?></td> 
```

和

```
<td width="10%"><?php echo $rows['one']; ?></td>
<td width="30%"><?php echo $rows['two']; ?></td>
<td width="30%"><?php echo $rows['three']; ?></td>
<td width="30%"><?php echo $rows['four']; ?></td> 
```

# python - 如果是分号，则匹配除最后一个字符之外的所有字符

> ID：14549217
> 
> 赞同：1
> 
> 时间：2013-01-27T16:05:03.433
> 
> 标签：python, regex

我想在 python 中执行正则表达式搜索操作以匹配所有内容，但只有一个字符（在此示例中位于末尾）：

```
expression = re.compile(r'http:\/\/.*') 
```

上面的正则表达式将匹配整个 url:`http://stackoverflow.com/questions/ask;`而我想要做的是得到一个没有最终`;`字符的匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:08:05.640

您可以使用否定字符类而不是`dot (.)`最后：-

```
expression = re.compile(r'http:\/\/[^;]*') 
```

# java - 重新渲染到周围面板后未分配 facelets 皮肤

> ID：14549221
> 
> 赞同：0
> 
> 时间：2013-01-27T16:05:29.517
> 
> 标签：java, jsf, jakarta-ee, richfaces

我有一个表格，`<a:commandLink>`其中打开`<rich:modalPanel>`了有关所选项目的附加信息。它使用 reRendering modalPanel 的内部`<a:outputPanel>`单击 commandLink 来工作。现在的问题是我所有的 facelets 在重新渲染后都变成了常用的输入项（即简单的选择而不是组合框）。有没有办法让服务器将 ui 信息添加到重新渲染的结果中？

**UPD**我在日志中看到以下消息

10:55:30,483 INFO [facelet] Facelet[/account/registration.xhtml] 在上午 10:55:30 被修改，在上午 10:54:36 应用了刷新组件

**UPD2**该问题仅发生在替换通常选择的组件上，例如 selectOneMenu 或 selectonelistbox。

代码示例：

```
<rich:modalPanel id="fieldPropertiesPanel" >
        <f:facet name="header">
            <h:outputText value="Customize Field" />
        </f:facet>
        <f:facet name="controls">
            <h:outputLink value="#"
                onclick="#{rich:component('fieldPropertiesPanel')}.hide(); return false;">
            X
        </h:outputLink>
        </f:facet>
        <rich:panel id="fieldPropertiesContent">

            <s:decorate styleClass="itemType" template="/layout/edit.xhtml">

                <h:selectOneMenu value="#{accountHome.currFieldType}">
                    <s:selectItems itemLabel="#{fieldType}" itemValue="#{fieldType}"
                        label="#{messages['ProjectFieldType_enum.'.concat(fieldType)]}"
                        value="#{accountHome.projectFieldTypes}" var="fieldType" />
                </h:selectOneMenu>
            </s:decorate>

        </rich:panel>
    </rich:modalPanel> 
```

和调用 commandLink

```
<a:commandLink value="Edit" oncomplete="Richfaces.showModalPanel('fieldPropertiesPanel');"
                        reRender="fieldPropertiesContent" /> 
```

# php - 订购 mysql 结果与喜欢

> ID：14549227
> 
> 赞同：-2
> 
> 时间：2013-01-27T16:05:59.160
> 
> 标签：php, mysql

```
$query = "SELECT * FROM  `tele`.`pedidos` 
          WHERE  `data` LIKE '".date('d/m/Y')."';"; 
```

我怎样才能按任何列排序？我尝试：

```
$query = "SELECT * FROM  `tele`.`pedidos` 
          WHERE  `data` LIKE '".date('d/m/Y')." 
          ORDER BY numero DESC';"; 
```

但不起作用...

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:07:49.697

我敢打赌你得到语法错误异常吧？这是因为您在日期值之后缺少单引号。试试这个以获得更清晰的视图，

```
$dateHere = date('d/m/Y');
$query = "SELECT * FROM  `tele`.`pedidos` WHERE  `data` LIKE '$dateHere' ORDER BY numero DESC';"; 
```

如果您正在搜索特定日期，请使用`=`not`LIKE`因为它用于模式匹配

```
$dateHere = date('d/m/Y');
$query = "SELECT * FROM  `tele`.`pedidos` WHERE  `data` = '$dateHere' ORDER BY numero DESC';"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:07:51.943

第二个查询中的单引号放错了位置。无法工作可能与此有关。

```
$query = "SELECT * FROM  `tele`.`pedidos` WHERE  `data` LIKE '".date('d/m/Y')."' ORDER BY numero DESC"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:07:58.960

查询语法基本正确，但单引号错误：

```
$query = "SELECT * FROM  `tele`.`pedidos` WHERE  `data` = '".date('d/m/Y')."' ORDER BY numero DESC;"; 
```

实际上，这个查询没有意义。最初，我阅读了第一个查询有效但第二个查询无效的问题（因此关注引号）。你是想说日期是今天吗？什么是数据？字符串数据类型还是日期数据类型？

如果你想找到今天的匹配并且数据是一个字符串，它更像是：

```
$query = "SELECT * FROM  `tele`.`pedidos`
          WHERE date( `data`) = date(now())
          ORDER BY numero DESC;"; 
```

# .net - 绑定到 VB.NET 中的结构属性

> ID：14549228
> 
> 赞同：1
> 
> 时间：2013-01-27T16:06:00.103
> 
> 标签：.net, vb.net, data-binding

我正在尝试将结构成员绑定到[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)`Label`中的 s 。但是，我不能这样做，因为这个结构是一个类的成员，我需要将几个成员绑定到标签。

假设这个结构是 a `System.Drawing.Point`，我想将`X`和`Y`属性绑定到 a `Label`。

```
Imports System.ComponentModel
Public Class Form1
    Implements INotifyPropertyChanged

    Private _pt As Point
    Public Property Pt As Point
        Get
            Return _pt
        End Get
        Set(value As Point)
            _pt = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("Pt"))
        End Set
    End Property

    Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Label1.DataBindings.Add("Text", Me, "Pt")
        Label2.DataBindings.Add("Text", Me.Pt, "X")
        Label3.DataBindings.Add("Text", Me, "Pt.Y")
    End Sub

    Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

End Class 
```

如果我设置`bindingsource`to`Me`和`datamember`to 结构，那么`Label1`将显示`ToString()`方法的结果、属性的`Label2`值并且不会改变。`X``Label3`

`Point`但是如果我为属性分配一个新的`Pt`，那么只会`Label1`更新它的值。`Label2`不会因为`datasource`不再一样。此外，`Label3.DataBindings.Add("Text", Me, "Pt.Y")`也不起作用，因为它不可能`datamember`是“子成员”。

我还尝试制作一个实现`INotifyPropertyChanged`其所有属性的新结构，但没有运气。

即使我为它分配了新的结构，有没有办法进行绑定`Label2`或可能？`Label3`

我的目标是通过数据绑定`Point`为属性分配新值并`Me.Pt`观察其值。`Pt.X``Pt.Y``Label2``Label3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:39:14.680

你几乎做对了。`Label1`并将`Label3`按原样工作。改变

```
Label2.DataBindings.Add("Text", Me.Pt, "X") 
```

到

```
Label2.DataBindings.Add("Text", Me, "Pt.X") 
```

并且`Label2`也将开始工作。

只需确保您通过属性而不是通过您的`_pt`字段分配新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:51:03.220

我建议使用仅返回 and 值的方法将属性`Pt_X`和添加`Pt_Y`到您的表单中。此外，您应该让您的属性设置器检查是否或将要更改，如果是，则引发适当的事件。`Get``_pt.X``_pt.Y``Pt``_pt.X``_pt.Y`

或者，您可以定义一个类作为`Point`类和标签之间的接口。任何更改`pt`都会通知此类，然后该类将计算标签中应该包含的内容并将其转发给相关标签。

# git - 正在删除忽略的文件

> ID：14549231
> 
> 赞同：0
> 
> 时间：2013-01-27T16:06:24.963
> 
> 标签：git, gitignore

几天前，我注意到不知何故有一个提交的文件在 .gitignore 中也被忽略了。这是网站的主要配置文件，我的开发副本不知何故被提交了。

为了删除该文件，我创建了一个提交，从 .gitignore 中删除了该行并删除了有问题的文件。然后我创建了另一个提交，重新添加了 .gitignore 行。

但是现在，只要将这些提交应用于某人的环境，他们忽略的配置文件就会被删除！我怎样才能修复我的回购，这样就不会再发生这种情况了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:15:25.333

你真的不能。如果您当前的 HEAD 提交跟踪该文件并因此包含该文件，而后续提交没有，Git 将通过删除该文件来应用此差异，因为这就是历史记录中发生的事情。如果你想保存文件，你可以在签出新版本之前临时重命名它以防止 Git 删除它，或者你可以使用`git checkout oldcommit -- config.file`.

该`.gitignore`文件的作用不是防止在您的存储库中添加或删除任何内容。它只会影响 Git 检测未跟踪文件的机制，例如通过从`git status`. 但是，它不会阻止您从存储库中显式添加或删除文件。

话虽如此，您不必删除该行`.gitignore`即可从存储库中删除文件。您本来可以`git rm --cached config.file`取消跟踪它；无需物理删除文件，也无需触摸 gitignore。

# php - 排序数组：倒数第二

> ID：14549233
> 
> 赞同：1
> 
> 时间：2013-01-27T16:06:25.290
> 
> 标签：php

```
ksort ($votes);
        foreach ($votes as $total => $contestant){
        $ordervotes[]= $contestant;
        } 

        echo "<li> And the winner is: {$ordervotes[4]}</li>";
        echo "<li> And the loser is: {$ordervotes[0]}</li>";
        echo "<li> {$ordervotes[1]} came second last</li>"; 
```

当'$total'都不相同时，这可以正常工作，如果它们相同，我会收到错误代码。我意识到我可以使用'max/min'来获取数组的第一个和最后一个元素，但是我该如何找到倒数第二个？

谢谢

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:14:12.000

你为什么不试试：

```
echo $votes[count($votes)-2]; 
```

您也不需要使用相同的值填充另一个数组 - 您可以将它们保存在`$votes`. 您可能还想研究[按值](http://php.net/manual/en/function.sort.php)而不是[按键](http://php.net/manual/en/function.ksort.php)对数组进行排序（我假设您正在尝试这样做）。

* * *

如果您期望有重复的键，则需要重塑存储数据的方式。考虑使用多维数组：

```
$votes = array(
   array('name'=>'John','vote'=>10),
   array('name'=>'James','vote'=>11),
   array('name'=>'Jimmy','vote'=>13),
); 
```

您将能够使用此函数和代码对该数组进行排序：

```
// This function will sort your array
function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}

// Sort the array by the 'vote' key
aasort($votes,"vote");

// Echo out the name of the second-last person
echo $votes[count($votes)-2]['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:12:02.407

用这个：

```
function secondMax($arr) {
    $max = $second = 0;
    $maxKey = $secondKey = null;

    foreach($arr as $key => $value) {
        if($value > $max) {
            $second = $max;
            $secondKey = $maxKey;
            $max = $value;
            $maxKey = $key;
        } elseif($value > $secondMax) {
            $second = $value;
            $secondKey = $key;
        }
    }

    return array($secondKey, $second);
} 
```

用法：

$second = secondMax($votes);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:13:52.540

您可以使用函数计数来检索它：

```
$ordervotes[ (count($ordervotes)-2) ]
// the array starts with index 0, so (count($ordervotes)-1) is the last element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T16:15:52.090

我不明白你的`$votes`变量中有什么......你怎么会有多个参赛者获得相同的选票（因此，使用相同的密钥）。

我认为这里有一个错误。

你 $votes 应该是这样的：

```
$votes = array(
    'contestant 1' => 8,
    'contestant 2' => 12,
    'contestant 3' => 3
); 
```

然后订购数组：`sort($votes)`

最后，获得倒数第二个：`$votes[count($votes) - 2];`

# linq - 具有动态 where 条件和 from 条件的动态 linq 查询

> ID：14549234
> 
> 赞同：0
> 
> 时间：2013-01-27T16:06:30.883
> 
> 标签：linq, entity-framework, ef-code-first

```
public GetApplicants(string Office,
                         int Id,
                         List<int> cfrparts,
                         List<int> expertiseAreaIds,
                         List<int> authIds,
                         List<int> specIds)
    {
        bool isAuthIdsNull = authIds == null;
        authIds = authIds ?? new List<int>();
        bool isSpecIdNull = specIds == null;

enter code here
     var query =
            from application in Apps
            from cfr in application.cfr
            from exp in cfr.Aoe
           from auth in exp.Auth
            from spec in exp.Special

            where application.Design.Id == 14
            where  (iscfrpart || cfrPartIds.Contains(cfr.CfrP.Id))
            where (isexp || expertiseAreaIds.Contains(exp.Aoe.Id))
            where (isAuthIdsNull || authIds.Contains(auth.Auth.Id))
            where  (isSpecIdNull || specIds.Contains(spec.Special.Id))
            where application.Office.Text.Contains(Office)
            where application.D.Id == Id

            select application.Id; 
```

我怎样才能使这个查询动态。如果我只有 Id 和 Office 值，它仍然应该根据可用值给我结果集。Cureently 它没有给我结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:23:05.117

不要多次调用`where`，而是使用`&&`

```
 var query =
        from Apps
        where (iscfrpart || cfrPartIds.Contains(Apps.cfr.CfrP.Id))
        && (isexp || expertiseAreaIds.Contains(Apps.cfr.Aoe.Id))
        && (isAuthIdsNull || authIds.Contains(Apps.cfr.Aoe.Auth.Id))
        && (isSpecIdNull || specIds.Contains(Apps.cfr.Aoe.Special.Id))
        && Apps.Office.Text.Contains(Office)
        && Apps.D.Id == Id

        select application.Id; 
```

此外，此子句`application.D.Id == 14`与此子句组合时将导致 0 结果：`application.D.Id == Id`如果传入的 Id 不等于 14。您可能希望删除第一个子句。

编辑：更新了您的 from 子句，但我仍然认为这不会起作用，因为您的表结构似乎关闭了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:32:25.603

不需要动态查询来解决这个问题。您可以编写构造查询的代码。

制作一个基于您拥有的信息构建过滤器的方法。

```
public Expression<Func<Application, bool>> GetFilterForCFR(List<int> cfrParts)
{
  if (cfrParts == null || !cfrParts.Any())
  {
    return app => true;
  }
  else
  {
    return app => app.cfr.Any(cfr => cfrParts.Contains(cfr.cfrPId));
  }
} 
```

然后，您可以使用表达式构造查询。

```
var query = Apps;
var cfrFilter = GetFilterForCFR(cfrParts);
query = query.Where(cfrFilter);

//TODO apply the other filters

var finalquery = query.Select(app => app.Id); 
```

# java - 类型转换布尔值

> ID：14549242
> 
> 赞同：2
> 
> 时间：2013-01-27T16:07:16.103
> 
> 标签：java, casting, boolean

为什么不能将 boolean 类型转换为 int 或 byte，反之亦然。例如：直觉上似乎`(int)true`应该是1。但它给出了一个例外。相反，在某些情况下，我们将“类型转换”（不是真正意义上的术语）字符串转换为布尔值，例如`boolean b=Boolean.valueOf("HI");` Peace。浮士德

# reflection - 如何在 F# 运行时创建新类型？

> ID：14549244
> 
> 赞同：-4
> 
> 时间：2013-01-27T16:07:45.413
> 
> 标签：reflection, f#, runtime

请举例说明如何在运行时通过反射在 F# 中创建新类型（例如，两种类型的笛卡尔积）？

**更新**

我正在寻找一种具有一流类型的语言。有人告诉我 F# 可以。我什么都没试过，因为还没有学过 F#。我只是想看看它是如何制作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T21:10:58.680

以下 F# 代码采用 2 个值序列（示例中的等级和花色），并使用在运行时使用反射动态生成的对类型将笛卡尔积作为对（卡片）序列返回：

```
open System
open System.Reflection
open System.Reflection.Emit
open Microsoft.FSharp.Reflection

/// Creates a dynamic module via reflection
let createModule () =
    let name = Guid.NewGuid().ToString()
    let d = AppDomain.CurrentDomain
    let a = d.DefineDynamicAssembly(AssemblyName(name), AssemblyBuilderAccess.Run)
    a.DefineDynamicModule(name)
/// Creates a dynamic pair type using the specified x and y types
let createPairType (x:Type, y:Type) =
    let m = createModule()
    let t = m.DefineType("Pair", TypeAttributes.Public ||| TypeAttributes.Class)
    let x = t.DefineField(x.Name, x, FieldAttributes.Public)
    let y = t.DefineField(y.Name, y, FieldAttributes.Public)
    t.CreateType()
/// Creates a pair value using the specified pair type
let createPairValue (pairType:Type) (x:'X, y:'Y) =
    let instance = Activator.CreateInstance(pairType)
    pairType.GetField(typeof<'X>.Name).SetValue(instance, x)
    pairType.GetField(typeof<'Y>.Name).SetValue(instance, y)
    instance
/// Creates a cartesian product 
let createCartesianProduct (xs:'X seq, ys:'Y seq) =
    let pairType = createPairType (typeof<'X>,typeof<'Y>) 
    seq { for x in xs do for y in ys -> createPairValue pairType (x, y) }
/// Defines dynamic lookup operator for accessing a named field
let inline (?) (x:obj) name = x.GetType().GetField(name).GetValue(x)
/// Card suit discriminated union type
type Suit = Club | Diamond | Heart | Spade
/// Card rank discriminated union type 
type Rank = | One | Two | Three | Four | Five | Six | Seven | Eight | Nine | Ten
            | Jack | Queen | King | Ace
/// Gets union case values
let getUnionValues<'T>() = 
    FSharpType.GetUnionCases(typeof<'T>) 
    |> Seq.map (fun x -> FSharpValue.MakeUnion(x,[||]) :?> 'T)
let ranks, suits = getUnionValues<Rank>(), getUnionValues<Suit>()
/// Sequence of dynamically generated pairs
let cards = createCartesianProduct (ranks, suits)
// Paste this into F# interactive to print the generated cards
for card in cards do printfn "%A %A" card?Rank card?Suit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T20:30:42.140

Taken from my (non-free) article [Structural Typing](http://fsharpnews.blogspot.co.uk/2012/09/structural-typing.html) in the [F#.NET Journal](http://www.ffconsultancy.com/products/fsharp_journal/):

The following createType function creates a new .NET assembly, new module and new public class type of the given name:

```
> let createType typeName =
    let name = System.Reflection.AssemblyName(Name="tmpAssembly")
    let run = System.Reflection.Emit.AssemblyBuilderAccess.Run
    let builder = System.Threading.Thread.GetDomain().DefineDynamicAssembly(name, run)
    let mdl = builder.DefineDynamicModule "tmpModule"
    let attrs = TypeAttributes.Public ||| TypeAttributes.Class
    mdl.DefineType(typeName, attrs);;
val createType : string -> TypeBuilder 
```

# jquery - 使用backbone.js 创建扩展模型时，验证不起作用

> ID：14549249
> 
> 赞同：1
> 
> 时间：2013-01-27T16:07:56.183
> 
> 标签：jquery, backbone.js

我一直在尝试了解backbone.js，我只是尝试在[https://tutsplus.com/lesson/validating-models/](https://tutsplus.com/lesson/validating-models/)上学习如何验证模型的教程，但由于某种原因，我的代码只是不'验证

知道为什么会这样吗？

```
var Person = Backbone.Model.extend({
  defaults: {
    name: 'John Doe',
    age: 30,
    occupation: 'worker'
  },

  validate: function (attrs) {
    if (attrs.age <= 0) {
        return "age must be positive";
    }

    if (!attrs.name) {
        return "every person must have a name";
    }
  },

  work: function () {
    return this.get('name') + ' is working.';
  }
}); 
```

有人可以帮忙吗？代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:56:03.543

Backbone 最近改变了验证发生的情况。它过去默认发生在 on`model.set()`但现在只发生（默认） on `model.save()`。您需要显式调用`model.validate()`，或者正如另一位评论者指出的那样，将`{validate: true}`选项传递给`model.set()`.

我猜你引用的教程是在改变`model.set()`行为之前编写的。

# hadoop - 添加代码“System.out.println("test string");”时在哪里可以看到打印字符串 在 NameNode.java 文件中？

> ID：14549254
> 
> 赞同：0
> 
> 时间：2013-01-27T16:08:22.063
> 
> 标签：hadoop, hdfs

NameNode.java 文件下

尝试在 main() 函数中添加打印字符串的测试代码，代码如下：

System.out.println("测试字符串");

我在哪里可以看到打印字符串？

*代码编译成功并使用新一代文件（hadoop-core-1.0.4.jar）替换到每个节点。*所有守护程序已重新启动。但在终端上找不到打印字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:56:51.133

如果您重新启动了名称节点服务，这些系统输出可能会进入名称节点日志文件（根据您的 hadoop disto/安装，该文件可能位于多个位置）。hadoop-daemon.sh 文件对文件的定义如下：

```
$HADOOP_LOG_DIR/hadoop-$HADOOP_IDENT_STRING-$command-$HOSTNAME.out 
```

所以你会在 HADOOP_LOG_DIR 中找到它，在名称下`hadoop-$HADOOP_IDENT_STRING-nanmenode-$HOSTNAME.out`- 根据运行时用户和你的 namenode 服务的主机名，其他变量将被替换。

我建议您使用预定义的记录器，而不是 System.err / System.out：

```
LOG.info("log message"); 
```

# c++ - 错误 LNK2019：未解析的外部符号 _luaJIT_setmode

> ID：14549256
> 
> 赞同：3
> 
> 时间：2013-01-27T16:08:32.293
> 
> 标签：c++, visual-studio-2010, visual-c++, lnk2019

我有这段代码（文件 luascript.cpp）：

```
bool LuaInterface::initState()
{
    m_luaState = luaL_newstate();
    if(!m_luaState)
        return false;

    luaL_openlibs(m_luaState);
#ifdef __LUAJIT__
    luaJIT_setmode(m_luaState, 0, LUAJIT_MODE_ENGINE | LUAJIT_MODE_ON);
#endif

    registerFunctions();
    if(!loadDirectory(getFilePath(FILE_TYPE_OTHER, "lib/"), false, true))
        std::clog << "[Warning - LuaInterface::initState] Cannot load " << getFilePath(FILE_TYPE_OTHER, "lib/") << std::endl;

    lua_newtable(m_luaState);
    lua_setfield(m_luaState, LUA_REGISTRYINDEX, "EVENTS");
    m_runningEvent = EVENT_ID_USER;
    return true;
} 
```

声明（文件 luajit.h）：

```
LUA_API int luaJIT_setmode(lua_State *L, int idx, int mode); 
```

错误是：

```
1>luascript.obj : error LNK2019: unresolved external symbol _luaJIT_setmode referenced in function "public: virtual bool __thiscall LuaInterface::initState(void)" (?initState@LuaInterface@@UAE_NXZ)
1>C:\Users\GUIAKI\Documents\trunk.r5918\vc10\Debug\tfs.exe : fatal error LNK1120: 1 unresolved externals 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T09:44:40.070

只需删除该行。

如果你保留它，你不能链接到普通的 Lua。如果你链接到 LuaJIT，JIT 编译器默认是启用的，无论如何。那行代码完全没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:13:47.663

似乎您忘记将库链接为“luaJIT”的一部分（从未听说过或使用过它）。

应该有一个 lib 文件，您必须将其作为附加依赖项（链接器设置）添加到您的项目中。

还要记住包含正确的标头（C++ 为“lua.hpp”，C 为“luajit.h”）。

# windows - 如何将 plink 的输出批量分配给变量？

> ID：14549258
> 
> 赞同：1
> 
> 时间：2013-01-27T16:08:42.760
> 
> 标签：windows, batch-file

如何分配以下命令的输出，结果类似于 */export/home/xyz*

```
var=(plink -pw "mukesh" "mukesh@192.168.79.128" echo $HOME) 
```

并在这里使用它

```
pscp "C:\Documents and Settings\mukesh\putty\pub.ppk" "mukesh@192.168.79.128:$var/.ssh/puttykey.ppk" 
```

我试过了，但没有用。

```
for /f %%i in ('plink -pw "mukesh" "mukesh@192.168.79.128" echo $HOME') do set VAR=%%i
%%i was unexpected at this time. 
```

# excel - 将数据从 100x100 行列传输到 10000x1 行列

> ID：14549260
> 
> 赞同：0
> 
> 时间：2013-01-27T16:08:53.753
> 
> 标签：excel, vba

我有 100 行和 100 列 100x100 的数据。我需要将所有数据传输到 10000 行和 1 列 10000X1。这意味着所有数据都将在一个列中，例如：A1:A10000

这是在 microsoft excel 表上完成的

谁能教我怎么做 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:22:30.557

这个 EXCEL 公式效果很好：

`=OFFSET($A$1,MOD(ROW()-ROW($F$1),ROWS($A$1:$A$5)),TRUNC((ROW()-ROW($F$1))/ROWS($A$1:$A$5)),1,1)`

取自此回复：[http ://www.mrexcel.com/forum/excel-questions/444343-multiple-columns-into-one-column.html](http://www.mrexcel.com/forum/excel-questions/444343-multiple-columns-into-one-column.html)

请注意，如果您正在寻找它，那么在 VB 中有很多方法可以做到这一点。此外，您需要将范围调整为 100x100（当前为 4x5）。

# javascript - 使用jQuery向指定元素添加属性的任何更短的方法？

> ID：14549261
> 
> 赞同：3
> 
> 时间：2013-01-27T16:08:55.673
> 
> 标签：javascript, jquery

假设我有一个包含许多列的宽表，并且我想添加`colspan=2`：

~~`td#2, td#10, td#15`~~

`td#3, td#11, td#16`

我是否必须专门这样做：

```
$("table td").eq(2).attr('colspan','2')
$("table td").eq(10).attr('colspan','2')
$("table td").eq(15).attr('colspan','2') 
```

还是我应该使用`filter()`？

有没有更短的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:12:35.167

你可以做：

```
$("td:eq(2), td:eq(10), td:eq(15)", "table").prop('colspan',2); 
```

是我认为最短的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T16:11:48.513

你可以做

```
$('table').find('td:eq(2), td:eq(10), td:eq(15)').prop('colspan', 2); 
```

（我会使用`.prop()`而不是`.attr()`我想，但我需要确保:-)（*编辑*是的，它是一个真实的财产）

请注意，上述方法可行，但那些 jQuery 扩展搜索限定符之类`:eq()`的可能会减慢选择过程。仅选择单元格后使用单独的过滤步骤可能会更快。

另请注意，该选择（如您的原始代码）会*在整个 table 中*找到第 2、第 10 和第 15 个单元格。如果您想设置每行第 2、10 和 15 个单元格的属性，您可能需要一些不同的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T16:13:20.737

```
$("table td").filter(':eq(2), :eq(10), :eq(15)').attr('colspan',2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T16:17:02.263

作为多个选择器的替代方案，您可以调用带有函数的[attr()形式并编写：](http://api.jquery.com/attr/)

```
$("table td").attr("colspan", function(index) {
    return index == 2 || index == 10 || index == 15 ? "2" : undefined;
}); 
```

（在这里也可以很好地使用[prop()](http://api.jquery.com/prop/)，因为它的 setter 形式也支持获取函数，并且`colspan`属性直接映射到同名的 DOM 属性。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T16:13:58.553

您可以如下优化您的代码。与其跳入 DOM 并搜索`$("table td")`3 次，不如将它缓存到一个变量中并使用它。

```
var td = $("table td");

td.eq(2).attr('colspan',2);
td.eq(10).attr('colspan',2);
td.eq(15).attr('colspan',2); 
```

否则你可以做类似的事情

```
$("td:eq(2), td:eq(10), td:eq(15)", "table").attr('colspan',2); 
```

别的

```
$("table").filter('td:eq(2), td:eq(10), td:eq(15)').attr('colspan',2); 
```

# android - 在android中阅读阿拉伯语文本

> ID：14549264
> 
> 赞同：0
> 
> 时间：2013-01-27T16:09:19.900
> 
> 标签：android

> **可能重复：**
> [Android 的阿拉伯语 TTS（文本转语音）库](https://stackoverflow.com/questions/8851384/arabic-tts-text-to-speach-library-for-android)

我有从我的服务器检索到的阿拉伯语文本。问题是它无法阅读阿拉伯语文本。它只能阅读英文。是否可以将阿拉伯语文本转换为语音？有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:13:36.400

Android 2.1 没有阿拉伯字体。

Android 2.2 有阿拉伯字体，但不能正确显示您的单词。

Android 3.x 完全支持阿拉伯语。

对于 Android 2.1，您必须设置字体 Farsi.GetFarsiFont(this)，然后使用 Farsi.Convert("سلام")

对于 Android 2.2，您不需要设置字体，但必须使用 Farsi.Convert("سلام")

而对于 Android 3.x，请忘记上述所有解决方案；）。但如果您不喜欢 3.x 阿拉伯字体，您可以更改字体。

所以请执行以下步骤：

1）首先在资产文件夹中添加“TAHOMA.TTF”

2) 使用以下类获取字体并将您的阿拉伯语或波斯语文本转换为在您的活动中显示的良好形式。

```
import android.content.Context;
import android.graphics.Typeface;

public final class Farsi {

    public static boolean isFarsiConversionNeeded = true;

    private final static String szLamAndAlef = Character
            .toString((char) 0xfedf)
            + Character.toString((char) 0xfe8e); // Lam + Alef

    private final static String szLamStickAndAlef = Character
            .toString((char) 0xfee0)
            + Character.toString((char) 0xfe8e); // Lam (Sticky !!!)+
                                                    // Alef

    private final static String szLa = Character.toString((char) 0xfefb); // La
    private final static String szLaStick = Character.toString((char) 0xfefc); // La
                                                                                // (Sticky!!!)

    private final static String szLamAndAlefWoosim = Character
            .toString((char) 0xe1)
            + Character.toString((char) 0xbb); // Lam + Alef

    private final static String szLamStickAndAlefWoosim = Character
            .toString((char) 0x90)
            + Character.toString((char) 0xbb); // Lam (Sticky !!!)+
                                                // Alef

    private final static String szLaWoosim = Character.toString((char) 0xd9); // La
    private final static String szLaStickWoosim = Character
            .toString((char) 0xd9); // La

    // (Sticky!!!)

    private static final class struc {
        public char character;
        public char endGlyph;
        public char iniGlyph;
        public char midGlyph;
        public char isoGlyph;

        public struc(char Character, char EndGlyph, char IniGlyph,
                char MidGlyph, char IsoGlyph) {
            character = Character;
            endGlyph = EndGlyph;
            iniGlyph = IniGlyph;
            midGlyph = MidGlyph;
            isoGlyph = IsoGlyph;
        }
    }

    static struc[] arrStruc = {
            new struc((char) 0x630, (char) 0xfeac, (char) 0xfeab,
                    (char) 0xfeac, (char) 0xfeab),
            new struc((char) 0x62f, (char) 0xfeaa, (char) 0xfea9,
                    (char) 0xfeaa, (char) 0xfea9),
            new struc((char) 0x62c, (char) 0xfe9e, (char) 0xfe9f,
                    (char) 0xfea0, (char) 0xfe9d),
            new struc((char) 0x62d, (char) 0xfea2, (char) 0xfea3,
                    (char) 0xfea4, (char) 0xfea1),
            new struc((char) 0x62e, (char) 0xfea6, (char) 0xfea7,
                    (char) 0xfea8, (char) 0xfea5),
            new struc((char) 0x647, (char) 0xfeea, (char) 0xfeeb,
                    (char) 0xfeec, (char) 0xfee9),
            new struc((char) 0x639, (char) 0xfeca, (char) 0xfecb,
                    (char) 0xfecc, (char) 0xfec9),
            new struc((char) 0x63a, (char) 0xfece, (char) 0xfecf,
                    (char) 0xfed0, (char) 0xfecd),
            new struc((char) 0x641, (char) 0xfed2, (char) 0xfed3,
                    (char) 0xfed4, (char) 0xfed1),
            new struc((char) 0x642, (char) 0xfed6, (char) 0xfed7,
                    (char) 0xfed8, (char) 0xfed5),
            new struc((char) 0x62b, (char) 0xfe9a, (char) 0xfe9b,
                    (char) 0xfe9c, (char) 0xfe99),
            new struc((char) 0x635, (char) 0xfeba, (char) 0xfebb,
                    (char) 0xfebc, (char) 0xfeb9),
            new struc((char) 0x636, (char) 0xfebe, (char) 0xfebf,
                    (char) 0xfec0, (char) 0xfebd),
            new struc((char) 0x637, (char) 0xfec2, (char) 0xfec3,
                    (char) 0xfec4, (char) 0xfec1),
            new struc((char) 0x643, (char) 0xfeda, (char) 0xfedb,
                    (char) 0xfedc, (char) 0xfed9),
            new struc((char) 0x645, (char) 0xfee2, (char) 0xfee3,
                    (char) 0xfee4, (char) 0xfee1),
            new struc((char) 0x646, (char) 0xfee6, (char) 0xfee7,
                    (char) 0xfee8, (char) 0xfee5),
            new struc((char) 0x62a, (char) 0xfe96, (char) 0xfe97,
                    (char) 0xfe98, (char) 0xfe95),
            new struc((char) 0x627, (char) 0xfe8e, (char) 0xfe8d,
                    (char) 0xfe8e, (char) 0xfe8d),
            new struc((char) 0x644, (char) 0xfede, (char) 0xfedf,
                    (char) 0xfee0, (char) 0xfedd),
            new struc((char) 0x628, (char) 0xfe90, (char) 0xfe91,
                    (char) 0xfe92, (char) 0xfe8f),
            new struc((char) 0x64a, (char) 0xfef2, (char) 0xfef3,
                    (char) 0xfef4, (char) 0xfef1),
            new struc((char) 0x633, (char) 0xfeb2, (char) 0xfeb3,
                    (char) 0xfeb4, (char) 0xfeb1),
            new struc((char) 0x634, (char) 0xfeb6, (char) 0xfeb7,
                    (char) 0xfeb8, (char) 0xfeb5),
            new struc((char) 0x638, (char) 0xfec6, (char) 0xfec7,
                    (char) 0xfec8, (char) 0xfec5),
            new struc((char) 0x632, (char) 0xfeb0, (char) 0xfeaf,
                    (char) 0xfeb0, (char) 0xfeaf),
            new struc((char) 0x648, (char) 0xfeee, (char) 0xfeed,
                    (char) 0xfeee, (char) 0xfeed),
            new struc((char) 0x629, (char) 0xfe94, (char) 0xfe93,
                    (char) 0xfe93, (char) 0xfe93),
            new struc((char) 0x649, (char) 0xfef0, (char) 0xfeef,
                    (char) 0xfef0, (char) 0xfeef),
            new struc((char) 0x631, (char) 0xfeae, (char) 0xfead,
                    (char) 0xfeae, (char) 0xfead),
            new struc((char) 0x624, (char) 0xfe86, (char) 0xfe85,
                    (char) 0xfe86, (char) 0xfe85),
            new struc((char) 0x621, (char) 0xfe80, (char) 0xfe80,
                    (char) 0xfe80, (char) 0xfe80),
            new struc((char) 0x626, (char) 0xfe8a, (char) 0xfe8b,
                    (char) 0xfe8c, (char) 0xfe89),
            new struc((char) 0x623, (char) 0xfe84, (char) 0xfe83,
                    (char) 0xfe84, (char) 0xfe83),
            new struc((char) 0x622, (char) 0xfe82, (char) 0xfe81,
                    (char) 0xfe82, (char) 0xfe81),
            new struc((char) 0x625, (char) 0xfe88, (char) 0xfe87,
                    (char) 0xfe88, (char) 0xfe87),
            new struc((char) 0x67e, (char) 0xfb57, (char) 0xfb58,
                    (char) 0xfb59, (char) 0xfb56), // peh
            new struc((char) 0x686, (char) 0xfb7b, (char) 0xfb7c,
                    (char) 0xfb7d, (char) 0xfb7a), // cheh
            new struc((char) 0x698, (char) 0xfb8b, (char) 0xfb8a,
                    (char) 0xfb8b, (char) 0xfb8a), // jeh
            new struc((char) 0x6a9, (char) 0xfb8f, (char) 0xfb90,
                    (char) 0xfb91, (char) 0xfb8e), // keheh
            new struc((char) 0x6af, (char) 0xfb93, (char) 0xfb94,
                    (char) 0xfb95, (char) 0xfb92), // gaf
            // new struc((char) 0x6cc, (char) 0xfbfd, (char) 0xfbfe,
            // (char) 0xfbff, (char) 0xfbfc), // Farsi yeh
            new struc((char) 0x6cc, (char) 0xfbfd, (char) 0xfef3,
                    (char) 0xfef4, (char) 0xfbfc), // Arabic yeh
            new struc((char) 0x6c0, (char) 0xfba5, (char) 0xfba4,
                    (char) 0xfba5, (char) 0xfba4) // heh with yeh
    };

    static struc[] arrStrucWoosim = {
            new struc((char) 0x630, (char) 0xb5, (char) 0x82, (char) 0xb5,
                    (char) 0x82),
            new struc((char) 0x62f, (char) 0xb4, (char) 0x81, (char) 0xb4,
                    (char) 0x81),
            new struc((char) 0x62c, (char) 0x9b, (char) 0xb1, (char) 0xf9,
                    (char) 0xbf),
            new struc((char) 0x62d, (char) 0x9c, (char) 0xb2, (char) 0xfa,
                    (char) 0xc0),
            new struc((char) 0x62e, (char) 0x9d, (char) 0xb3, (char) 0xfe,
                    (char) 0xc1),
            new struc((char) 0x647, (char) 0xac, (char) 0xe4, (char) 0x93,
                    (char) 0xd5),
            new struc((char) 0x639, (char) 0xc9, (char) 0xd3, (char) 0x8b,
                    (char) 0xa4),
            new struc((char) 0x63a, (char) 0xca, (char) 0xdd, (char) 0x8c,
                    (char) 0xa5),
            new struc((char) 0x641, (char) 0xa6, (char) 0xde, (char) 0x8d,
                    (char) 0xcc),
            new struc((char) 0x642, (char) 0xa7, (char) 0xdf, (char) 0x8e,
                    (char) 0xce),
            new struc((char) 0x62b, (char) 0xbd, (char) 0xaf, (char) 0xea,
                    (char) 0x99),
            new struc((char) 0x635, (char) 0xc4, (char) 0xc8, (char) 0x87,
                    (char) 0xa0),
            new struc((char) 0x636, (char) 0xc5, (char) 0xcb, (char) 0x88,
                    (char) 0xa1),
            new struc((char) 0x637, (char) 0xc6, (char) 0xcd, (char) 0xcd,
                    (char) 0xa2),
            new struc((char) 0x643, (char) 0xcf, (char) 0xe0, (char) 0x8f,
                    (char) 0xa8),
            new struc((char) 0x645, (char) 0xd2, (char) 0xe2, (char) 0x91,
                    (char) 0xaa),
            new struc((char) 0x646, (char) 0xd4, (char) 0xe3, (char) 0x92,
                    (char) 0xab),
            new struc((char) 0x62a, (char) 0xbd, (char) 0xaf, (char) 0xea,
                    (char) 0x99),
            new struc((char) 0x627, (char) 0xbb, (char) 0x80, (char) 0xbb,
                    (char) 0x80),
            new struc((char) 0x644, (char) 0xd1, (char) 0xe1, (char) 0x90,
                    (char) 0xa9),
            new struc((char) 0x628, (char) 0xbc, (char) 0xae, (char) 0xe9,
                    (char) 0x98),
            new struc((char) 0x64a, (char) 0xdc, (char) 0xe6, (char) 0x95,
                    (char) 0xdc),
            new struc((char) 0x633, (char) 0xc2, (char) 0xb8, (char) 0xb8,
                    (char) 0x9e),
            new struc((char) 0x634, (char) 0xc3, (char) 0xb9, (char) 0xb9,
                    (char) 0x9f),
            new struc((char) 0x638, (char) 0xc7, (char) 0xcd, (char) 0xcd,
                    (char) 0xc7),
            new struc((char) 0x632, (char) 0xb7, (char) 0xb7, (char) 0xb7,
                    (char) 0xb7),
            new struc((char) 0x648, (char) 0x94, (char) 0x94, (char) 0x94,
                    (char) 0x94),
            new struc((char) 0x629, (char) 0xda, (char) 0xda, (char) 0xda,
                    (char) 0xda),
            new struc((char) 0x649, (char) 0xdc, (char) 0xe6, (char) 0x95,
                    (char) 0xdc),
            new struc((char) 0x631, (char) 0xb6, (char) 0xb6, (char) 0xb6,
                    (char) 0xb6),
            new struc((char) 0x624, (char) 0xe7, (char) 0xe7, (char) 0xe7,
                    (char) 0xe7),
            new struc((char) 0x621, (char) 0xba, (char) 0xba, (char) 0xba,
                    (char) 0xba),
            new struc((char) 0x626, (char) 0xd7, (char) 0xe8, (char) 0x97,
                    (char) 0xd7),
            new struc((char) 0x623, (char) 0x80, (char) 0x80, (char) 0x80,
                    (char) 0x80),
            new struc((char) 0x622, (char) 0x80, (char) 0x80, (char) 0x80,
                    (char) 0x80),
            new struc((char) 0x625, (char) 0x80, (char) 0x80, (char) 0x80,
                    (char) 0x80),
            new struc((char) 0x67e, (char) 0xbc, (char) 0xae, (char) 0xe9,
                    (char) 0x98), // peh
            new struc((char) 0x686, (char) 0x9b, (char) 0xb1, (char) 0xf9,
                    (char) 0xbf), // cheh
            new struc((char) 0x698, (char) 0xb7, (char) 0xb7, (char) 0xb7,
                    (char) 0xb7), // jeh
            new struc((char) 0x6a9, (char) 0xcf, (char) 0xe0, (char) 0x8f,
                    (char) 0xa8), // keheh
            new struc((char) 0x6af, (char) 0xcf, (char) 0xe0, (char) 0x8f,
                    (char) 0xa8), // gaf
            new struc((char) 0x6cc, (char) 0xdc, (char) 0xe6, (char) 0x95,
                    (char) 0xdc), // yeh
            new struc((char) 0x6c0, (char) 0xac, (char) 0xe4, (char) 0x93,
                    (char) 0xd5) // heh with yeh
    };

    private static final int N_DISTINCT_CHARACTERS = 43;

    private static final String ArabicReverse(String s) {
        try {
            String Out = "", rev;
            s = MakeReverse(s);
            char[] chs = new char[s.length()];
            chs = s.toCharArray();
            int i = 0;
            while (i < s.length()) {
                if ((chs[i] >= '0' && chs[i] <= '9')) // isDigit(s[i]) ?
                {
                    rev = "";
                    while (i < s.length()
                            && ((chs[i] >= '0' && chs[i] <= '9') || chs[i] == '/')) // isDigit(s[i])
                                                                                    // ?
                    {
                        rev = rev + chs[i];
                        ++i;
                    }
                    rev = MakeReverse(rev);
                    Out = Out + rev;
                } else {
                    Out = Out + chs[i];
                    ++i;
                }
            }
            s = Out;
        } catch (Exception ex) {
            // throw new Exception(
            // "An exception has occurred in ArabicReverse function.\\n"
            // + ex.getMessage());
        }
        return s;
    }

    private static final boolean isFromTheSet1(/* WCHAR */char ch) {
        char[] theSet1 = new char[] { (char) 0x62c, (char) 0x62d, (char) 0x62e,
                (char) 0x647, (char) 0x639, (char) 0x63a, (char) 0x641,
                (char) 0x642, (char) 0x62b, (char) 0x635, (char) 0x636,
                (char) 0x637, (char) 0x643, (char) 0x645, (char) 0x646,
                (char) 0x62a, (char) 0x644, (char) 0x628, (char) 0x64a,
                (char) 0x633, (char) 0x634, (char) 0x638, (char) 0x67e,
                (char) 0x686, (char) 0x6a9, (char) 0x6af, (char) 0x6cc,
                (char) 0x626 };
        int i = 0;
        while (i < 28) {
            if (ch == theSet1[i])
                return true;
            ++i;
        }
        return false;
    }

    private static final boolean isFromTheSet2(/* WCHAR */char ch) {
        char[] theSet2 = new char[] { (char) 0x627, (char) 0x623, (char) 0x625,
                (char) 0x622, (char) 0x62f, (char) 0x630, (char) 0x631,
                (char) 0x632, (char) 0x648, (char) 0x624, (char) 0x629,
                (char) 0x649, (char) 0x698, (char) 0x6c0 };
        int i = 0;
        while (i < 14) {
            if (ch == theSet2[i])
                return true;
            ++i;
        }
        return false;
    }

    private static final String MakeReverse(String text) {
        String Result = "";
        char[] Ctext = new char[text.length()];
        Ctext = text.toCharArray();
        for (int i = (text.length()) - 1; i >= 0; i--) {
            Result += Ctext[i];
        }
        return Result;
    }

    public static final String ConvertBackToRealFarsi(String In) {

        if (!isFarsiConversionNeeded) {
            return In;
        }

        String strOut = "";
        StringBuilder strBuilder = new StringBuilder("");
        int i = 0;
        int j = 0;
        char[] chIn = new char[In.length()];
        chIn = In.toCharArray();

        for (i = 0; i < In.length(); i++) {
            boolean found = false;
            for (j = 0; j < arrStruc.length; j++) {
                if (chIn[i] == arrStruc[j].midGlyph ||
                        chIn[i] == arrStruc[j].iniGlyph ||
                        chIn[i] == arrStruc[j].endGlyph ||
                        chIn[i] == arrStruc[j].isoGlyph) {
                    strBuilder.append(arrStruc[j].character);
                    found = true;
                    break;
                }
            }
            if (!found)
                strBuilder.append(chIn[i]);
        }

        strOut = strBuilder.toString();
    strOut = strOut.replace(szLa, "لا");
    strOut = strOut.replace(szLaStick, "لا");

        return strOut;
    }

    public static final String Convert(String In) {

        if (!isFarsiConversionNeeded) {
            return In;
        }

        if (In == null) {
            return "";
        }

        boolean linkBefore, linkAfter;
        String Out = In;
        char[] chOut = new char[Out.length()];
        chOut = Out.toCharArray();
        char[] chIn = new char[In.length()];
        chIn = In.toCharArray();

        for (int i = 0; i < In.length(); i++) {
            /* WCHAR */
            char ch = chIn[i];
            if ((ch >= (char) 0x0621 && ch <= (char) 0x064a)
                    || (ch == (char) 0x067e) || (ch == (char) 0x0686)
                    || (ch == (char) 0x0698) || (ch == (char) 0x06a9)
                    || (ch == (char) 0x06af) || (ch == (char) 0x06cc)
                    || (ch == (char) 0x06c0)) // is a Farsi character?
            {
                int idx = 0;
                while (idx < N_DISTINCT_CHARACTERS) {
                    if (arrStruc[idx].character == chIn[i])
                        break;
                    ++idx;
                }

                if (i == In.length() - 1)
                    linkAfter = false;
                else
                    linkAfter = (isFromTheSet1(chIn[i + 1]) || isFromTheSet2(chIn[i + 1]));
                if (i == 0)
                    linkBefore = false;
                else
                    linkBefore = isFromTheSet1(chIn[i - 1]);
                if (idx < N_DISTINCT_CHARACTERS) {
                    if (linkBefore && linkAfter)
                        chOut[i] = arrStruc[idx].midGlyph;
                    if (linkBefore && !linkAfter)
                        chOut[i] = arrStruc[idx].endGlyph;
                    if (!linkBefore && linkAfter)
                        chOut[i] = arrStruc[idx].iniGlyph;
                    if (!linkBefore && !linkAfter)
                        chOut[i] = arrStruc[idx].isoGlyph;
                } else {
                    chOut[i] = chIn[i];
                }
            } else {
                chOut[i] = chIn[i];
            }
        }
        Out = "";
        for (int j = 0; j < chOut.length; j++)
            Out += chOut[j];
        // Out = ArabicReverse(Out);

        Out = Out.replace((char) 0x200c, ' '); // Change NO SPACE to SPACE

        Out = Out.replace(szLamAndAlef, szLa); // Join 'Lam' and 'Alef' and
                                                // make 'La'
        Out = Out.replace(szLamStickAndAlef, szLaStick); // Join 'Lam Stick'
                                                            // and 'Alef'
                                                            // and make 'La
                                                            // Stick'

        return reorderWords(Out);

    }

    private final static String reorderWords(String strIn)
    {

        final int ST_RTL = 0;
        final int ST_LTR = 1;

        String strOut = "";
        String prevWord = "";
        int state = ST_RTL;
        char[] arr = strIn.toCharArray();
        int i = 0;
        while (i < arr.length) {
            if (charIsLTR(arr[i]) && state != ST_LTR)
            {
                // state changed to LTR
                state = ST_LTR;
                strOut = prevWord + strOut;
                prevWord = "";
                prevWord += arr[i];
            }
            else if (charIsRTL(arr[i]) && state != ST_RTL)
            {
                // state changed to RTL
                state = ST_RTL;
                strOut = prevWord + strOut;
                prevWord = "";
                prevWord += arr[i];
            }
            else
            {
                // state is not changed
                prevWord += arr[i];
            }
            i++;
        }

        strOut = prevWord + strOut;

        return strOut;

    }

    private final static boolean charIsLTR(char ch)
    {
        return (ch >= (char) 65 & ch <= (char) 122)
                |
                Character.isDigit(ch);
    }

    private final static boolean charIsRTL(char ch)
    {
        return ch >= (char) 0x0621;
    }   

    private static Typeface typeface;

    public static final Typeface GetFarsiFont(Context context) {
        if (typeface == null) {
            typeface = Typeface.createFromAsset(context.getAssets(),
                    // "DroidSansFallback.ttf");
                    "TAHOMA.TTF");
        }
        return typeface;
    }
} 
```

3）在你的活动中：

```
TypeFace tf = Farsi.GetFarsiFont(this);
MyTextView.setTypeface(tf);
MyTextView.setText(Farsi.Convert("سلام")); 
```

有关更多详细信息，请访问此处 [http://www.codeproject.com/KB/windows/arabicsupport.aspx](http://www.codeproject.com/KB/windows/arabicsupport.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:36:31.483

1.你可以在xml文件中这样写

```
 MyProject/
        res/
           values/
               strings.xml
           values-es/        //eg .for englis
               strings.xml
           values-fr/         //eg. for frech       
               strings.xml 
```

2.并从这里获取您的字符串 [参考以获取更多文档](http://developer.android.com/training/basics/supporting-devices/languages.html)

```
 Spanish, /values-es/strings.xml:

<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="title">Mi Aplicación</string>
    <string name="hello_world">Hola Mundo!</string>
</resources> 
```

因为它是阿拉伯语，所以您可以在这里输入并使用您自己的语言

# javascript - Onmousedown 不会涓涓细流

> ID：14549266
> 
> 赞同：1
> 
> 时间：2013-01-27T16:09:21.947
> 
> 标签：javascript, onmousedown

在我的 html 中，我有

```
<div id="map"></div>

#map {
    width: 100%;
    height: 100%;
    background-color: #CCC;
} 
```

动态填充几个 div，如下所示

```
<div class="basicTiles1" style="left: 8128px; top: 8128px;"></div>

.basictiles1 {
    position: absolute;
    width: 64px;
    height: 64px;
    background-image: url(<snip urlToPng>);
    background-position: 0px 0px;
} 
```

然后像这样将 onmousedown 事件添加到#map

```
$('#map').on('mousedown', function(){console.log("mousedown");}); 
```

该事件永远不会被触发。如果我不将图块添加到地图中，它会起作用。

我试着用jquery的'on'，'onmousedown'，javascripts'addEventListener'来做。该脚本没有任何编译错误。该事件似乎并没有逐渐减少。

是因为瓷砖是绝对位置吗？是因为它们是动态添加的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:12:36.993

我知道当你绑定事件时，DIV 还没有。尝试`delegate`改用，如下所示：

```
$("#map").delegate("div", "mousedown", function() {
    console.log("mousedown");
}); 
```

编辑：详细说明 jQuery`.on()`参考声明：“将一个或多个事件的事件处理函数附加到所选元素。”

此外，当您将事件直接绑定到您的事件时`#map`，只要您不使用其他东西覆盖它（您必须在实际的 #map 元素上鼠标按下），它就会起作用。

jQuery`.delegate()`参考声明改为：“基于一组特定的根元素，为现在或将来匹配选择器的所有元素附加一个或多个事件的处理程序。”

由于您将在绑定事件之后添加内部 div，因此这完全符合您想要做的事情。指定“div”选择器实际上将 mousedown 绑定到 #map 内的任何（当前或未来）div。`div.basictiles1`如果那里有其他不可点击的 div，则可以实际使用。

# asp.net - 更改 ASP.Net 菜单控件中的样式

> ID：14549269
> 
> 赞同：0
> 
> 时间：2013-01-27T16:09:48.187
> 
> 标签：asp.net, menu

当我希望它为黄色时，我的菜单控件出现问题，下拉菜单的背景颜色保持白色。我已经尝试更改一些属性选项，以便 BackColor 为“黄色”，但它仍然是白色的。我注意到没有悬停在任何链接上的菜单颜色是黄色的，但下拉菜单是白色的。这是我在控件中的内容：

```
<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1" 
    BackColor="Yellow" EnableTheming="True" Orientation="Horizontal">
    <StaticMenuStyle BackColor="Yellow" />
    <StaticSelectedStyle BackColor="Yellow" />
    <StaticMenuItemStyle BackColor="Yellow" />
    <StaticHoverStyle BackColor="Yellow" />
</asp:Menu> 
```

该控件使用静态视图，但更改这些 BackColors 也没有多大帮助。

此外，是否可以删除具有下拉列表的每个链接旁边的那些“箭头”图像？我认为它与样式属性有关，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T08:32:48.270

问题已经很久了，我希望提问者现在已经得到了答案。但我正在添加一个以帮助那里的另一个人。

查看在 Firebug 中呈现的 html，我假设页面缺少 CSS 样式，既不是内部的也不是内联的。因此，最好为菜单添加自己的样式。

您可以试试这个（添加到与您的 aspx 页面链接的内部或外部样式表）：

```
/* #ctl00_Menu1 is the ID of my menu when rendered*/

#ctl00_Menu1 span
{
    margin: 0 !important;
    padding: 0 !important;
}
#ctl00_Menu1 span a
{
    background: #1383dd;
    color: #fff;
    padding: 5px;
}
#ctl00_Menu1 span a:hover
{
    background: #0065b6;
    color: #fff;
} 
```

希望能帮助到你。

# postgresql - 使用 shell 检查 PostgreSQL 中是否存在数据库

> ID：14549270
> 
> 赞同：157
> 
> 时间：2013-01-27T16:10:18.530
> 
> 标签：postgresql, shell

我想知道是否有人能告诉我是否可以使用 shell 来检查 PostgreSQL 数据库是否存在？

我正在制作一个 shell 脚本，我只希望它创建数据库，如果它不存在但到目前为止还没有看到如何实现它。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-05-28T03:04:49.530

注意/更新（2021）：虽然这个答案*有效*，但从哲学上讲，我同意其他评论，即正确的方法是*询问 Postgres*。

检查其他答案是否`psql -c`更`--command`适合您的用例（例如[Nicholas Grilly's](https://stackoverflow.com/a/34174754/81804)、[Nathan Osman's](https://stackoverflow.com/a/17757560/81804)、[bruce's](https://stackoverflow.com/a/15538220/81804)或[Pedro's 变体](https://stackoverflow.com/questions/14549270/check-if-database-exists-in-postgresql-using-shell/16783253#comment32849621_15538220)

* * *

我使用 Arturo 解决方案的以下修改：

`psql -lqt | cut -d \| -f 1 | grep -qw <db_name>`

* * *

## 它能做什么

`psql -l`输出如下内容：

```
 List of databases
     Name  |   Owner   | Encoding |  Collate   |   Ctype    |   Access privileges   
-----------+-----------+----------+------------+------------+-----------------------
 my_db     | my_user   | UTF8     | en_US.UTF8 | en_US.UTF8 | 
 postgres  | postgres  | LATIN1   | en_US      | en_US      | 
 template0 | postgres  | LATIN1   | en_US      | en_US      | =c/postgres          +
           |           |          |            |            | postgres=CTc/postgres
 template1 | postgres  | LATIN1   | en_US      | en_US      | =c/postgres          +
           |           |          |            |            | postgres=CTc/postgres
(4 rows) 
```

使用朴素的方法意味着搜索名为“List”、“Access”或“rows”的数据库会成功。所以我们通过一系列内置命令行工具将这个输出传递给仅在第一列中搜索。

* * *

该`-t`标志删除页眉和页脚：

```
 my_db     | my_user   | UTF8     | en_US.UTF8 | en_US.UTF8 | 
 postgres  | postgres  | LATIN1   | en_US      | en_US      | 
 template0 | postgres  | LATIN1   | en_US      | en_US      | =c/postgres          +
           |           |          |            |            | postgres=CTc/postgres
 template1 | postgres  | LATIN1   | en_US      | en_US      | =c/postgres          +
           |           |          |            |            | postgres=CTc/postgres 
```

* * *

下一位，通过垂直管道字符（用反斜杠从 shell 中转义）`cut -d \| -f 1`拆分输出，并选择字段 1。这留下：`|`

```
 my_db             
 postgres          
 template0         

 template1 
```

* * *

`grep -w``temp`匹配整个单词，因此如果您在这种情况下进行搜索，则不会匹配。该`-q`选项会禁止写入屏幕的任何输出，因此如果您想在命令提示符下交互式地运行它，您可以排除它，`-q`以便立即显示某些内容。

请注意，`grep -w`匹配字母数字、数字和下划线，这正是 postgresql 中不带引号的数据库名称中允许的字符集（连字符在不带引号的标识符中是不合法的）。如果您正在使用其他字符，`grep -w`则不会为您工作。

* * *

`0`如果数据库存在，则整个管道的退出状态将为（成功），如果不存在，`1`则为（失败）。您的 shell 会将特殊变量设置`$?`为最后一个命令的退出状态。您还可以直接在条件中测试状态：

```
if psql -lqt | cut -d \| -f 1 | grep -qw <db_name>; then
    # database exists
    # $? is 0
else
    # ruh-roh
    # $? is 1
fi 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2013-07-20T00:53:24.297

以下 shell 代码似乎对我有用：

```
if [ "$( psql -tAc "SELECT 1 FROM pg_database WHERE datname='DB_NAME'" )" = '1' ]
then
    echo "Database already exists"
else
    echo "Database does not exist"
fi 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-27T16:15:24.137

```
postgres@desktop:~$ psql -l | grep <exact_dbname> | wc -l 
```

如果指定的数据库存在，则返回 1，否则返回 0。

此外，如果您尝试创建一个已经存在的数据库，postgresql 将返回如下错误消息：

```
postgres@desktop:~$ createdb template1
createdb: database creation failed: ERROR:  database "template1" already exists 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-03-21T02:05:19.303

我是 postgresql 的新手，但以下命令是我用来检查数据库是否存在的命令

```
if psql ${DB_NAME} -c '\q' 2>&1; then
   echo "database ${DB_NAME} exists"
fi 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-12-09T09:12:30.163

如果数据库尚不存在，您可以使用以下方法创建数据库：

```
if [[ -z `psql -Atqc '\list mydatabase' postgres` ]]; then createdb mydatabase; fi 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-08-18T23:15:01.340

我将其他答案组合成简洁且 POSIX 兼容的形式：

```
psql -lqtA | grep -q "^$DB_NAME|" 
```

`true`( )的返回`0`意味着它存在。

如果您怀疑您的数据库名称可能包含非标准字符，例如`$`，则需要稍长一点的方法：

```
psql -lqtA | cut -d\| -f1 | grep -qxF "$DB_NAME" 
```

`-t`and`-A`选项确保输出是原始的，而不是“表格”或空格填充的输出。列由竖线字符分隔`|`，因此 the`cut`或 the`grep`必须识别这一点。第一列包含数据库名称。

编辑： grep 与 -x 以防止部分名称匹配。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-27T16:18:14.003

```
#!/bin/sh
DB_NAME=hahahahahahaha
psql -U postgres ${DB_NAME} --command="SELECT version();" >/dev/null 2>&1
RESULT=$?
echo DATABASE=${DB_NAME} RESULT=${RESULT}
# 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-13T12:18:45.823

为了完整起见，使用正则表达式而不是字符串切割的另一个版本：

```
psql -l | grep '^ exact_dbname\b' 
```

例如：

```
if psql -l | grep '^ mydatabase\b' > /dev/null ; then
  echo "Database exists already."
  exit
fi 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-06-27T05:10:53.133

其他解决方案（非常棒）忽略了这样一个事实，即如果 psql 无法连接到主机，它可以等待一分钟或更长时间才能超时。所以，我喜欢这个解决方案，它将超时设置为 3 秒：

```
PGCONNECT_TIMEOUT=3 psql development -h db -U postgres -c "" 
```

这是为了连接到官方[postgres](https://hub.docker.com/_/postgres/) Alpine Docker 镜像上的开发数据库。

另外，如果您正在使用 Rails 并且想要设置一个不存在的数据库（例如在启动 Docker 容器时），这很有效，因为迁移是幂等的：

```
bundle exec rake db:migrate 2>/dev/null || bundle exec rake db:setup 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-10T22:53:23.073

kibibu[接受的答案](https://stackoverflow.com/a/16783253)存在缺陷，因为`grep -w`它将匹配包含指定模式的*任何*名称作为单词组件。

即，如果您查找“foo”，则“foo-backup”是匹配项。

[Otheus 的答案](https://stackoverflow.com/a/32084118)提供了一些很好的改进，并且简短版本在大多数情况下都可以正常工作，但是所提供的两个变体中较长的版本在匹配子字符串方面表现出类似的问题。

要解决此问题，我们可以使用 POSIX`-x`参数仅匹配*整*行文本。

基于 Otheus 的回答，新版本如下所示：

```
psql -U "$USER" -lqtA | cut -d\| -f1 | grep -qFx "$DBNAME" 
```

综上所述，我倾向于说[Nicolas Grilly 的回答](https://stackoverflow.com/a/34174754)——你实际上向 postgres 询问特定数据库的地方——是最好的方法。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-11-08T10:18:13.887

`psql -l|awk '{print $1}'|grep -w <database>`

较短的版本

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-10-16T09:30:12.247

我对 shell 编程仍然很缺乏经验，所以如果由于某种原因这确实是错误的，请投我反对票，但不要太惊慌。

根据 kibibu 的回答构建：

```
# If resulting string is not zero-length (not empty) then...
if [[ ! -z `psql -lqt | cut -d \| -f 1 | grep -w $DB_NAME` ]]; then
  echo "Database $DB_NAME exists."
else
  echo "No existing databases are named $DB_NAME."
fi 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-09T15:57:23.103

*   在一行中：

`PGPASSWORD=mypassword psql -U postgres@hostname -h postgres.hostname.com -tAc 'select 1' -d dbnae || echo 0`

如果 db 存在则返回 1 如果不存在则返回 0

*   或更具可读性：

```
if [ "$(PGPASSWORD=mypassword psql -U postgres@hostname -h postgres.hostname.com -tAc 'select 1' -d dbnae || echo 0 )" = '1' ]
then
    echo "Database already exists"
else
    echo "Database does not exist"
fi 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-22T08:56:06.667

如果不存在则触发除以零，然后检查返回代码，如下所示：

```
sql="SELECT 1/count(*) FROM pg_database WHERE datname='db_name'";
error=$(psql -h host -U user -c "$sql" postgres);
if $error
then
  echo "doesn't exist";
else
  echo "exists";
fi 
```

# android - 在按钮单击时将视图添加到 android 布局

> ID：14549272
> 
> 赞同：0
> 
> 时间：2013-01-27T16:10:45.740
> 
> 标签：android, dynamic, view

我想根据用户说明将视图（textview 或 EditText）动态添加到我的布局中。我正在开发这个只是为了弄清楚事情并了解它们是如何工作的。我的 XML 文件如下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <LinearLayout 
    android:id="@+id/email"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
        <TextView 
        android:id="@+id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="email1"
        />
        <EditText 
        android:id="@+id/edit1" 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="enter mail "
        />

     </LinearLayout>    

<LinearLayout 
    android:id="@+id/phones"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
        <TextView 
        android:id="@+id/text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="phone number"
        />
        <EditText 
        android:id="@+id/edit2" 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="enter phone "
        />

</LinearLayout>   

<LinearLayout
    android:id="@+id/myButtons"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="add mail"
        android:onClick="addmail"
                    />
     <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="add phone"

                    />
</LinearLayout>
</LinearLayout> 
```

现在在这里，我有两个按钮。当用户单击 addmail 时，我希望将编辑文本添加到我的布局中（在 LinearLayout 中我的第一封电子邮件 EditText 下方，ID 为“email”。我已将 android:onClick 设置为按钮的 addmail，我的 addmail 功能如下：

```
public void addmail(){
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams((LayoutParams. WRAP_CONTENT)   ,    (LayoutParams.WRAP_CONTENT));

    EditText edittv = new EditText(getApplicationContext());
    edittv.setLayoutParams(lp);

    LinearLayout ll1=(LinearLayout)findViewById(R.id.email);

    ll1.addView(edittv);

} 
```

但代码不起作用。需要进行哪些修改？我哪里错了。我的概念有问题吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:26:59.793

不要`Application Context`在这里使用: `EditText edittv = new EditText(getApplicationContext());`，只需使用 specific 即可`Activity Context`解决您的问题。我希望如此：D！

# php - 使用 PHP 和 ONE 表创建动态层次结构 - 面包屑/显示子类别

> ID：14549273
> 
> 赞同：0
> 
> 时间：2013-01-27T16:10:51.160
> 
> 标签：php, mysql, hierarchy

我有一个包含有关类别信息的数据库。该表包含以下列：

```
ID
Name
Parent_ID 
```

现在，我希望能够将其显示为 HTML 分层列表，例如。

```
Home
Sports
 -- Football
 -- Rugby
Technology
 -- Phones
 -- Computers 
```

我还需要能够在单独的场合显示与父类别相关的任何 CHILD 类别。

例如，体育类别中没有文章，因此显示足球/橄榄球类别作为替代。

我曾尝试这样做，但惨遭失败！

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:15:08.987

您应该考虑改用[Modified Preorder Tree Traversal](http://www.sitepoint.com/hierarchical-data-database-2/)。它比邻接表模型灵活得多。[这是一个](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)包含许多示例的链接。

# android - 检查移动网络是否已断开通话

> ID：14549278
> 
> 赞同：0
> 
> 时间：2013-01-27T16:11:11.303
> 
> 标签：android, telephony

我想知道是否可以检查移动网络是否已断开呼叫，从而表明接收器正忙。

我已经疯狂地用谷歌搜索，但没有找到任何关于此的东西，所以任何示例或帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:14:14.303

您可以使用 API 电话，请查看提供示例的此[链接。](http://androidapps.org.ua/i_sect18_d1e18123.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:19:19.920

查看 ServiceState 类：http: [//developer.android.com/reference/android/telephony/ServiceState.html](http://developer.android.com/reference/android/telephony/ServiceState.html)

# content-management-system - Silverstripe FulltextSearchable 添加自定义字段

> ID：14549279
> 
> 赞同：2
> 
> 时间：2013-01-27T16:11:12.833
> 
> 标签：content-management-system, silverstripe

我需要一个自定义字段才能全文搜索。因此，我按照 FulltextSearchable 类中的描述尝试了这段代码：

```
Object::add_extension('Page', "FulltextSearchable('SearchableContent')"); 
```

然后运行开发/构建。基本上全文搜索似乎工作。但是自定义字段“SearchableContent”的内容似乎从未被检查过。

当然，我首先通过以下方式启用了全文搜索：

```
FulltextSearchable::enable(); 
```

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:03:58.740

所有`SiteTree`类的搜索列定义`FulltextSearchable`如下：

```
$defaultColumns = array(
  'SiteTree' => '"Title","MenuTitle","Content","MetaTitle","MetaDescription","MetaKeywords"',
  'File' => '"Title","Filename","Content"'
); 
```

所以我不认为 SilverStripe 会在你的额外专栏上有所收获。除非你编辑，`FulltextSearchable`但这可能是一个坏主意......或者只是创建一个自定义搜索功能，如平原`DataObject`，这样你就可以准确指定要搜索的列： [silverstripe dataobject searchable](https://stackoverflow.com/questions/14483880/silverstripe-dataobject-searchable/14489700#14489700)

# windows - 如何更新 Tkinter 窗口中的信息？

> ID：14549281
> 
> 赞同：0
> 
> 时间：2013-01-27T16:11:47.197
> 
> 标签：windows, python-2.7, position, tkinter, updates

（Python初学者，如果问题太幼稚，请原谅）在写着“Hello”的标签下方，创建一个标签或条形或其他任何东西来显示我的两只海龟的更新位置（我的意思是随着海龟移动其位置的两个坐标同时变化) import Tkinter import turtle

```
def run_turtles(*args):
    for t, d in args:
        t.circle(250, d)
    root.after_idle(run_turtles, *args)

root = Tkinter.Tk()
root.withdraw()

frame = Tkinter.Frame(bg='black')
Tkinter.Label(frame, text=u'Hello', bg='grey', fg='white').pack(fill='x')
canvas = Tkinter.Canvas(frame, width=750, height=750)
canvas.pack()
frame.pack(fill='both', expand=True)

turtle1 = turtle.RawTurtle(canvas)
turtle2 = turtle.RawTurtle(canvas)

turtle1.ht(); turtle1.pu()
turtle1.left(90); turtle1.fd(250); turtle1.lt(90)
turtle1.st(); turtle1.pd()

turtle2.ht(); turtle2.pu()
turtle2.fd(250); turtle2.lt(90)
turtle2.st(); turtle2.pd()

root.deiconify()

run_turtles((turtle1, 3), (turtle2, 4))

root.mainloop() 
```

非常非常感谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:23:27.767

保存对标签的引用：`turtleLabel = Tkinter.Label(frame, text=u'Hello', bg='grey', fg='white')`

然后在您的`run_turtles`-function 中，您可以通过设置其文本来更新标签：

```
turtleLabel['text'] = "Here be coordinates" 
```

您还可以使用以下`configure`方法更改文本：

```
turtleLabel.configure(text="Here be coordinates") 
```

请注意，您不能`pack`在创建小部件的同一语句中调用；`pack`返回`None`这将否定尝试保存对小部件的引用。

# python - 为什么切片 ndarray 会重塑它？

> ID：14549286
> 
> 赞同：1
> 
> 时间：2013-01-27T16:11:56.103
> 
> 标签：python, numpy, matplotlib

我有一个 nx1 数组，一个：

```
array([[0],
       [0],
       [0]]) 
```

当我用它切片时

```
a[:-1,0] 
```

它成为了：

```
a([0,0]) 
```

而且我无法在情节中使用它（现在尺寸是错误的，即使长度是正确的）。我试过了

```
a[:-1,0].T 
```

和

```
transpose(a[:-1,0]) 
```

无济于事。

如何在不改变形状的情况下切片？（我想以列形式保存）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:21:48.420

`a = numpy.zeros((3,1))`那么 说

```
 b = a[:-1,:] 
```

会给你一个列向量。

```
 array([[ 0.],
           [ 0.]]) 
```

在对 numpy 数组进行切片时，您必须区分寻址列的内容，例如`a[:,0]`和寻址列本身，例如`a[:,0:1]`或 - 在这种情况下 - `a[:,:]`。

# ios - 我可以在房间之间使用地理围栏吗？

> ID：14549289
> 
> 赞同：0
> 
> 时间：2013-01-27T16:12:17.083
> 
> 标签：ios, geo

我可以在房子内的一个房间到另一个房间使用 iOS 地理围栏方法吗？或者只是为了更远的距离（例如100米？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:45:11.917

不，你不能！

房屋内的 GPS 非常糟糕，它可以向您显示房屋内部或周围 50m 的任何位置。
对于你的无线路由器，苹果没有这个位置，而且只有你在那所房子里有多个无线路由器，它才能工作，并为自己实现。

所以它根本行不通。

屋外 GPS 将有大约 3-6m。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:18:59.997

根据所使用的方法（GPS / 无线局域网 / 移动网络单元），精度会有所不同。

GPS有10米（你不能在里面正常使用），无线局域网只是你家/网络路由器的位置，小区（GSM）的精度约为250米。

因此，在内部使用它并非不可能，但您不会得到它的任何确切位置。

# asp.net - 当链接按钮位于嵌套中继器内时查找隐藏字段值

> ID：14549291
> 
> 赞同：0
> 
> 时间：2013-01-27T16:12:26.100
> 
> 标签：asp.net, repeater, asplinkbutton, nested-controls

```
<asp:Repeater ID="rptHotels" runat="server" OnItemDataBound="rptHotels_ItemDataBound">
                    <ItemTemplate>
                        <div class="hotel-box">
                            <div class="hotel-img">
                                <asp:HiddenField ID="hdnHotelCode" runat="server" Value='<%#Eval("HotelCode")%>' />
                                <a class="preview" href='<%#Eval("ImageURL_Text") %>' title='<%#Eval("HotelName")%>' target="_blank">
                                    <img src='<%#Eval("ImageURL_Text") %>' alt='<%#Eval("HotelName")%>' height="75px"
                                        width="100px" />
                                </a>
                            </div>
                            <div class="hotel_heeading_content">
                                <div class="hotel_heading">
                                    <h2>
                                        <asp:LinkButton ID="lnkHotelDetail" runat="server" OnClick="lnkHotelDetail_Click">                                      
                                            <%#Eval("HotelName")%>
                                            (
                                            <%#Eval("boardType")%>)
                                        </asp:LinkButton>
                                    </h2>
                                </div>
                                <div class="stars">
                                    <span class="stars">
                                        <%#Eval("StarRating")%></span>
                                </div>
                                <div class="hotel_text">
                                    <%#Eval("HotelAddress")%>,
                                    <%#Eval("Destination")%>
                                    ,<%#Eval("Country")%>
                                    <img src="images/ico_point2.png" alt="" id="mapicon" class="mapicon" />
                                    <input type="hidden" id="hdnLatitude" class="hdnLatitude" runat="server" value='<%#Eval("Latitude")%>' />
                                    <input type="hidden" id="hdnLongitude" class="hdnLongitude" runat="server" value='<%#Eval("Longitude")%>' />
                                    <input type="hidden" id="hdnInfoWindow" class="hdnInfoWindow" runat="server" />
                                </div>
                            </div>
                            <p>
                                <asp:Literal ID="ltDes" runat="server"></asp:Literal>
                            </p>
                            <p>
                                <a href="#">more info</a>
                            </p>
                            <div class="btn">

                                <asp:LinkButton ID="lnkPrice" runat="server"  Text=' <%#Eval("totalPrice")%>'  OnClick="lnkHotelDetail_Click" ></asp:LinkButton>

                            </div>
                            <div class="roominfo">
                                <asp:Repeater ID="rptRooms" runat="server">
                                    <HeaderTemplate>
                                        <div class="rooms">
                                            <div class="roominfoheader">
                                                <div class="roomheaderlbl">
                                                    Room Name</div>
                                                <div class="roomheaderlbl">
                                                    Total Room Rate</div>
                                                <div class="roomheaderlbl">
                                                    Book Now</div>
                                            </div>
                                        </div>
                                    </HeaderTemplate>
                                    <ItemTemplate>
                                        <div class="rooms">
                                            <div class="roominforow">
                                                <div class="roominforowlbl">
                                                    <asp:Label ID="lblRoomName" runat="server" Text='<%#Eval("roomCategory") %>'></asp:Label></div>
                                                <div class="roominforowlbl">
                                                    $
                                                    <asp:Label ID="Label1" runat="server" Text='<%#Eval("totalRoomRate") %>'></asp:Label></div>
                                                <div class="roominforowlbl">
                                                   <asp:LinkButton ID="lnkBookNow" runat="server"  Text="Book Now" OnClick="lnkBookNow_Click"></asp:LinkButton></div>
                                            </div>
                                        </div>
                                    </ItemTemplate>
                                </asp:Repeater>
                            </div>
                        </div>
                    </ItemTemplate>
                </asp:Repeater> 
```

我有上面嵌套中继器的 HTML。我可以通过以下方法找到包含酒店代码的隐藏字段值

```
protected void lnkHotelDetail_Click(object sender, EventArgs e)
    {
        LinkButton btn = (LinkButton)sender;
        var item = (RepeaterItem)btn.NamingContainer;
        HiddenField hdnHotelCode = (HiddenField)item.FindControl("hdnHotelCode");

    } 
```

但问题是现在我必须在单击嵌套中继器项目模板链接按钮时找到隐藏字段值。您可以检查 lnkBookNow 是`rptRooms`中继器内部的链接按钮。

```
protected void lnkBookNow_Click(object sender, EventArgs e)
    {
        LinkButton btn = (LinkButton)sender;
        var item = (RepeaterItem)btn.NamingContainer;
        HiddenField hdnHotelCode = (HiddenField)item.FindControl("hdnHotelCode");

    } 
```

我尝试了类似的方法，但没有找到隐藏字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:40:39.727

这里的问题`lnkBookNow.NamingContainer`是`rptRooms`。这个控件显然不包含`hdnHotelCode`。

我认为你应该能够做到这一点：

```
protected void lnkBookNow_Click(object sender, EventArgs e)
{
    LinkButton btn = (LinkButton)sender;
    var item = (RepeaterItem)btn.NamingContainer.NamingContainer.NamingContainer;
    HiddenField hdnHotelCode = item.FindControl("hdnHotelCode") as HiddenField;
} 
```

`btn.NamingContainer`是一个`RepeaterItem`在`rptRooms`. 那`NamingContainer`就是它`Repeater`本身。最后，`NamingContainer`of`rptRooms`是您要在其中找到您`RepeaterItem`的.`rptHotels``HiddenField`

Note my use of the `as` keyword instead of an explicit cast - this will protect you from NullReferenceExceptions if `FindControl` returns null. Of course, you should explicitly check that `hdnHotelCode` isn't null before you try to access it.

# android - 数据库创建失败

> ID：14549292
> 
> 赞同：0
> 
> 时间：2013-01-27T16:12:31.080
> 
> 标签：android, android-sqlite

以下代码不会在 /data/data/ 中创建数据库文件。应用程序在模拟器中成功运行。如何使用该创建的数据库文件使用第三方应用程序升级该数据库？

**Tapdb.java**

```
package com.android.tap;

// entry has not been cre

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class tapdb {

public static final String KEY_ROWID="_id";
public static final String KEY_CODE="key_code";
public static final String KEY_WORD="word";

public static final String DATABASE_NAME="tapdatabase";
public static final String DATABASE_TABLE="tapData";
public static final int DATABASE_VERSION=1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper
    {

    public DbHelper(Context context) {
        super(context,DATABASE_NAME, null, DATABASE_VERSION);           
    }

    @Override
    public void onCreate(SQLiteDatabase db)
           {

        db.execSQL("CREATE TABLE" + DATABASE_TABLE + "(" +KEY_WORD + "TEXT NOT NULL" KEY_CODE + "LONG);");      
        db.execSQL("INSERT INTO tapdatabase VALUES('hello',23334);");
        db.execSQL("INSERT INTO tapdatabase VALUES('how',242);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
            {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE );
        onCreate(db);

    }

}   
  public tapdb (Context c) 
  {
    ourContext = c;
  }
public tapdb open()
    {
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();  
}
public long createEntry(String word,String keycode){
     ContentValues cv = new ContentValues();
     cv.put(KEY_WORD, word);
     cv.put(KEY_CODE, keycode);
     return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getWord(long l) {
String[] columns = new String[] {KEY_ROWID, KEY_WORD, KEY_CODE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null,     null);

    if (c != null) {
            c.moveToFirst();
            String hotness = c.getString(1);       
            return hotness;
    }
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:42:55.817

Android 通过使用不同的用户 ID 运行应用程序来将应用程序彼此分开。存储在 /data/data/<my.package.name> 下的数据（数据库也存储在此路径下）是应用程序私有的，通常不能被其他应用程序访问（除非它们共享相同的用户 ID）。

只有 root 可以访问所有文件。

# opengl - 计算两个图形之间的角度openGL

> ID：14549297
> 
> 赞同：0
> 
> 时间：2013-01-27T16:12:54.917
> 
> 标签：opengl, angle

![结果](../Images/99da34f928d06ade5d9d24910a30947c.png) 这就是结果最终的样子。问题是，我如何计算我必须旋转每个棱镜的角度（我有绘制单个棱镜的功能 - 棱镜和梯形的高度是已知的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:28:03.610

在此示例中，您有 6 个棱镜，因此您可以将棱镜旋转 60 度，但情况并非始终相同。所以尝试使用数学公式来计算角度。让我们举个例子。你有一个`line (x1,y1,z1) to (x2,y2,z2)`如果你想围绕 z 轴旋转它然后计算这样的角度。

```
inverse of tan (p/b) where p = y2-y1 and b = x2 -x1 
```

它给出了围绕 z 轴的旋转角度。

现在，绕 y 轴旋转：

```
p=z2-z1 and b=x2-x1 
```

同样，绕 x 轴旋转：

```
p=y2-y1 and b=z2-z1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:17:40.230

您想将一个完整的旋转细分为 6 个部分。所以你的角度是 360/6 = 60 度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:18:23.707

好吧，你有 6 个棱镜来完成一个 360 度的循环，所以从它的对称性来看，你应该将每个棱镜旋转 60 度（即 pi/3）

# html - JSF 2 - 在 jsf 模板中显示纯 html

> ID：14549298
> 
> 赞同：1
> 
> 时间：2013-01-27T16:13:10.577
> 
> 标签：html, jsf-2, facelets

我将我的网站内容保存为我的数据库中的纯 html。它只是简单的数据，用户无法输入。我喜欢按如下方式显示内容：如果 content.jsf?Sitename 被调用，我想显示站点“Sitename”的内容。我已经将内容保存在我的 ApplicationScoped Bean 中。内容.xhtml：

```
<ui:composition template="template/common/commonLayout.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:define name="content">
//show content here
</ui:define>
</ui:composition> 
```

我想这样做是因为，我想在不重新部署整个应用程序的情况下添加新页面/子页面。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:50:59.700

您可以使用[`<h:outputText escape="false">`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputText.html)bean 属性显示纯 HTML。

```
<h:outputText value="#{yourApplicationScopedBean.html}" escape="false" /> 
```

如果要对其进行参数化，请使用传递方法参数的 EL 2.2 特性，或使用`Map`.

如果这涉及用户控制的数据，请注意潜在的[XSS 攻击漏洞。](https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf/7725675#7725675)

# javascript - 为什么javascript ln被称为日志？

> ID：14549302
> 
> 赞同：18
> 
> 时间：2013-01-27T16:13:26.913
> 
> 标签：javascript, math

我只是为了实现一些物理计算而奋斗了几个小时。

然后，我发现一切都错了，因为 Math.log 不是关于 log10 而是关于 ln。

我会期待`Math.ln() = ln`和`Math.log() = log10`。但绝对不是`Math.log() = ln`！！！

他们为什么把事情弄得如此混乱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:16:04.910

为方便起见，数学家通常使用以 为底的对数`e`。他们没有考虑自然原木和普通原木之间的区别；他们使用单个对数函数`log`，因为在高等数学中欧拉常数的使用非常普遍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T16:15:02.307

这是学术数学的惯例。

# r - 搜索推特时间戳

> ID：14549305
> 
> 赞同：1
> 
> 时间：2013-01-27T16:13:44.177
> 
> 标签：r, twitter

我正在使用`twitteR`R 中的库，想知道是否可以获得与搜索或时间线相关的时间戳。例如，如果使用 searchTwitter 搜索#rstats，我想知道推文是何时发布的……是否需要解析其他参数才能获取该信息？

这是一些示例代码...

```
library(twitteR)
searchTwitter("#rstats",n=10) 
```

给出以下结果

```
[[1]]
[1] "MinneAnalytics: @thomaswdinsmore RT @erikriverson: Some thoughts from an observer on the #Rstats track at #BigDataMN. http://t.co/i42PEQHz #R at #CSOM"

[[2]]
[1] "pentalibra: My package ggdendro to draw dendrograms with ggplot2 is back on CRAN. http://t.co/gMviOSnQ Wait a day or so for Windows binary/ #rstats"

[[3]]
[1] "Lachamadice: RT @freakonometrics: \"Regression tree using Gini's index\" http://t.co/tUplMqQj with #rstats"

[[4]]
[1] "Rbloggers: Tracking Number of Historical Clusters: \n(This article was first published on   Systematic Investor » R,... http://t.co/jRnWUQ2Y #rstats"

[[5]]
[1] "Rbloggers: ggplot2 multiple boxplots with metadata: \n(This article was first published on   mintgene » R, and kindl... http://t.co/re2gghTx #rstats"

[[6]]
[1] "Rbloggers: Learning R using a Chemical Reaction Engineering Book: Part 3: \n(This article was first published on   N... http://t.co/agCJi9Rr #rstats"

[[7]]
[1] "Rbloggers: Learning R using a Chemical Reaction Engineering Book: Part 2: \n(This article was first published on   N... http://t.co/2qqpgQrq #rstats"

[[8]]
[1] "Rbloggers: Waiting for an API request to complete: \n(This article was first published on   Recology - R, and kindly... http://t.co/MZzxHVdw #rstats"

[[9]]
[1] "heidelqekhse3: RT @geospacedman: Just got an openlayers map working on an #rstats #shiny app at #nhshd but... meh."

[[10]]
[1] "jveik: Slides and replay of “Using R with Hadoop” webinar now available #rstats #hadoop | @scoopit http://t.co/Ar2F7We3" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:27:46.193

谷歌后：

```
 mytweet <- searchTwitter("#chocolate",n=10)
 str(mytweet[[1]])

Reference class 'status' [package "twitteR"] with 10 fields
 $ text        : chr "The #chocolate part of the #croquette. #dumplings #truffles http://t.co/Imwt3tTP"
 $ favorited   : logi FALSE
 $ replyToSN   : chr(0) 
 $ created     : POSIXct[1:1], format: "2013-01-27 16:26:03"
 $ truncated   : logi FALSE
 $ replyToSID  : chr(0) 
 $ id          : chr "295568362526896128"
 $ replyToUID  : chr(0) 
 $ statusSource: chr "&lt;a href=&quot;http://instagr.am&quot;&gt;Instagram&lt;/a&gt;"
 $ screenName  : chr "tahiatmahboob"
 and 33 methods, of which 22 are possibly relevant:
   getCreated, getFavorited, getId, getReplyToSID, getReplyToSN, getReplyToUID, getScreenName, getStatusSource, getText, getTruncated,
   initialize, setCreated, setFavorited, setId, setReplyToSID, setReplyToSN, setReplyToUID, setScreenName, setStatusSource, setText,
   setTruncated, toDataFrame 
```

所以时间戳是：

```
mytweet[[1]]$created
[1] "2013-01-27 16:26:03 UTC" 
```

`twitteR`在我阅读您的问题之前从未使用过。无聊的时候可以做一些有趣的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:37:01.623

解析结果的一种替代方法（如上面的答案）是使用参数**since**和**until**。

例如，您可以这样做：

```
 res <- searchTwitter("#rstats",n=1000,since='2013-01-24',
                                       until='2013-01-28') 
```

这`searchTwitter`是 twitter 的 JSON API 的包装器。[在此处](https://dev.twitter.com/docs/api/1/get/search)查看参数的更多详细信息和 JSON 结果的示例。

# c# - Linq 群 + 加入

> ID：14549308
> 
> 赞同：-3
> 
> 时间：2013-01-27T16:13:53.000
> 
> 标签：c#, linq, join, linq-group

我已经阅读了其他一些问题，但无法从他们那里得到答案。

我是Linq的新手。我有 3 张桌子。

城市（ID，名称）

专业（身份证、姓名）

配额（id、cityId、specialityId、qty）

所以，你有一个城市的专业配额。我正在尝试按城市分组列出。像这样的东西：

城市：纽约

*   专业A：15
*   专业B：12
*   专业C：10

城市：巴黎

*   专业A：10
*   专长 B：8

等等。

有人可以帮我吗？

**加起来**

我并不是真的要求准备好的代码。我想我应该更清楚。

我可以加入表格，但我很困惑如何按城市对其进行分组。

例如，这将加入一切

```
from cota in Cotas
join cidade in Cidades on cota.CidadeId equals cidade.Id
join especialidade in EspecialidadeMedicas on cota.EspecialidadeId equals especialidade.Id
select new { Qty = cota.Quantidade, City = cidade.Nome, Specialty = especialidade.Nome} 
```

Obs：语言是葡萄牙语，我翻译了对象的创作，但 Quantidade 是 Quantity，EspecialidadeMedica 是医学专业，Cidade 是 City。

这个查询的结果是：

```
Qty | City       | Specialty 

10    Campinas     Pediatria     

15    Campinas     Cardiologia

5     Campinas     Ortopedia     

10    Sumaré       Pediatria                                                                                                                                                                                                                                                       

15    Sumaré       Cardiologia                                                                                                                                                                                                                                                     

14    Hortolândia  Cardiologia                                                                                                                                                                                                                                                     

5     Hortolândia  Ortopedia 
```

我想按城市对其进行分组，并能够返回一个具有城市名称的对象和一个带有专业和数量的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:34:04.860

所以，我通过做更多的研究得到了我需要的东西。

实现我正在寻找的代码是：

```
from cidade in Cidades
join lista in 
        (
            from cota in Cotas 
             join especialidade in EspecialidadeMedicas on cota.EspecialidadeId equals especialidade.Id
            select new {
                CidadeId = cota.CidadeId, CotaId=cota.Id, Quantidade=cota.Quantidade,
                EspecialidadeId=especialidade.Id, Especialidade=especialidade.Nome
            }
        ) on cidade.Id equals lista.CidadeId into listaCota
select new {CityId=cidade.Id, cityName=cidade.Nome, quotaList=listaCota} 
```

这样我就有以下内容：

![LinqPad 4 的结果](../Images/eacaa3d8bada3d125ea808a9da9f5d34.png)

# ios - 使用消息 UIActivity 发送图像

> ID：14549309
> 
> 赞同：2
> 
> 时间：2013-01-27T16:13:55.090
> 
> 标签：ios

我正在使用 UIActivityViewController 和一些自定义活动来成功地将图像发送到 DropBox 和 Instagram。有没有办法使用默认的 UIActivity 在 n MMS 消息中发送相同的图像（和文本）？

文档中没有关于此的内容。

更多信息：当我从`UIActiviViewController`弹出窗口中选择消息时，仅发送文本 - 所以有些东西有效 - 但不是图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:51:06.193

UIActivity 目前不允许此功能用于消息，仅允许使用文本。

[http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40011974-CH1-DontLinkElementID_4](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40011974-CH1-DontLinkElementID_4)

在常量 UIActivityType Message 下，仅支持 NSString 和 Attributed String，没有 UIImage

# database - 双语网站的良好数据库设计：布尔值与元表？

> ID：14549325
> 
> 赞同：1
> 
> 时间：2013-01-27T16:15:00.440
> 
> 标签：database, database-design, multilingual

我正在制作一个包含游戏音乐会列表的网站。它将是英文和日文的。

音乐会在场地举行。我想用英语和日语存储有关场地名称和地址的数据。我还希望允许为它们存储替代名称，例如“Konserthuset”和“Stockholm Concert Hall”。前者是瑞典语的名字。语言是瑞典语这一事实对于存储在数据库中并不重要。但如果是日本人，我想把它储存起来。

所以一个场地可以有多个地址和名称。城市和国家只需要两个字段（和 id），英文名称和日文名称。

选项1：

```
table Venue
  id (pk)
  cityId
  description

table VenueName
  venueID (fk)
  name
  IsJapanese (boolean)

table VenueAddress
  venueID (fk)
  address
  IsJapanese (boolean)

table City
  id (pk)
  name
  japaneseName
  countryId (fk)

table Country
  id (pk)
  name
  JapaneseName 
```

* * *

选项 2：

```
 Venue
   id (pk)

 Information
   venueID (fk)
   infoTypeID (fk)
   text

 InfoType
   id (pk)
   name 
```

这就是我所说的元表（正确的术语？）。相当灵活，但我想知道查询将如何。InfoType 的示例可以是 EngName、JpnName、EngAddress、JpnAddress、EngCity、JpnCity 等。

* * *

我知道还有很多其他方法可以构建数据库。这些都是好的数据库设计吗？你有什么更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:27:00.367

选项 1 很好，如果您将此作为练习。但从长远来看，选项 2 更加灵活——例如，当您决定要用德语、俄语或普通话表示场地名称时。

# windows-phone-7 - 在 windows phone 中发送对服务消息的回复

> ID：14549328
> 
> 赞同：0
> 
> 时间：2013-01-27T16:15:12.790
> 
> 标签：windows-phone-7, windows-phone-8

我如何在 Windows Phone 中发送服务回复。例如，如果我们使用 *414# 之类的 windows phone 服务请求并按下呼叫按钮，服务响应会在消息框中弹出，内容如下：

1.  按 1 激活 4G 服务
2.  按 2 关闭 4G 服务
3.  按 3 进行 4G 设置

但是，该消息框中没有可用的输入选项，如果我们对消息框按确定，则消息框会消失，并且操作会在没有任何确认的情况下取消。windows phone 中是否有任何设置可以使其正常工作。如果这是操作系统的限制，请给我一个替代解决方案来解决这个问题。

提前致谢

斯特兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:06:25.750

您不能捎带电话拨号器应用程序在 WP7/WP8 中启动您的应用程序。

你必须编写一个正常的端到端应用程序来做你想做的事情。

# php - 我想正确使用 ajax 获取数据

> ID：14549333
> 
> 赞同：0
> 
> 时间：2013-01-27T16:15:32.907
> 
> 标签：php, html, mysql, ajax

我想使用 ajax 从数据库中检索数据，数据检索成功，但页面上显示不正确。也许这是 if else 条件的问题。

这是我的代码：

```
<?php

        $query = mysql_query("SELECT * FROM cart_polling WHERE country = '".$_REQUEST['id']."' ORDER BY sort_order ASC") or die(mysql_error());
        $record = mysql_num_rows($query);

        while($getcontry = mysql_fetch_array($query)){
        ?>    
    <div class="Question_Table">  
      <div class="Question_Title">Q<?php echo $getcontry['sort_order']; ?>-<?php echo $getcontry['question']; ?></div>

<!-- ****** Box1 START ****** -->

    <?php 
    if($getcontry['img1']!=""){ 

    ?>
    <div class="bg">
    <?php
    if(isset($_SESSION['id'])){

    ?>
    <div class="img"><center>
      <a href="javascript:void(0)" class="op">
<img src="images/pollimg/<?php echo $getcontry['img1']; ?>" width="104" height="102" class="middleimg2" onclick="getValue('<?php echo $_REQUEST['id']; ?>','<?php echo $getcontry['option1']; ?>','<?php echo $getcontry['id']; ?>','1','<?php echo $getcontry['img1'] ?>','<?php echo $getcontry['categoryname'] ?>','<?php echo $getcontry['question']; ?>')"  /></a>
</center></div>

<?php } ?>

<div class="Vote_button">
<img src="images/vote_button.png" onclick="sendvar();" align="middle">

    <img src="images/view_results.png" onClick="showresult(<?php echo $getcontry['id']; ?>)" align="middle">
</div>
<?php
}

</div>
<?php } ?> // here the while loops end. 
```

`(<div id="txtHint<?php echo $getcontry['id']; ?>"></div>)`当我单击图像 viewresult.png 时，我希望在 else 条件下使用上述代码，并在 if 条件下使用从数据库中检索数据的函数调用。我希望数据将在 else 条件下显示，并且上面的代码（包括循环）在 if 条件下显示。

`txtHint($getcontray['id'])`是每条记录的 id，其值在 while 循环的帮助下动态变化。而txthint也是保存了ajax的响应。

如果我使用 if 条件而不是 while 循环未在 else 条件下运行，并且 id 无法传递给 AJAX 响应并且不会显示正确的数据，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:38:34.633

排队：`<img src="images/pollimg/`

```
'<?php echo $getcontry['img1'] ?>','<?php echo $getcontry['categoryname'] ?>' 
```

缺少 2 个分号。

```
'<?php echo $getcontry['img1']; ?>','<?php echo $getcontry['categoryname']; ?>' 
```

更新：文件底部缺少 ?> php end 语法：

```
<?php
}
//here is the missing tag:
?>

</div>
<?php } ?> // here the while loops end. 
```

# android - 如何创建“类似锁屏”的音乐播放控件

> ID：14549337
> 
> 赞同：0
> 
> 时间：2013-01-27T16:15:50.643
> 
> 标签：android, button, android-intent, widget

我正在尝试创建可以控制音乐播放的小部件。基本上与播放音乐时出现在锁屏上的小部件相同。（当我在某处读到时，它已连接到[远程控制客户端](http://developer.android.com/reference/android/media/RemoteControlClient.html)- 这是真的吗？）我的问题：我能够使用以下代码创建媒体按钮

```
Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
    synchronized (this) {
        i.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MEDIA_NEXT));
        sendOrderedBroadcast(i, null);
        i.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_MEDIA_NEXT));
        sendOrderedBroadcast(i, null); 
```

首先，我认为这也是锁屏小部件中使用的解决方案。但后来我注意到这个解决方案只适用于某些音乐播放器，但肯定不适用于默认锁屏小部件可以控制的所有内容（fe DoubleTwist 响应锁屏小部件，但不响应我的媒体按钮）。所以我花了几天时间在 Android 资源、Logcat 输出和各种论坛中进行挖掘，但我无法找到我的按钮调用的意图和锁屏小部件上的按钮调用的意图之间的任何区别。

锁屏小部件到底在做什么来控制不听我的媒体按钮意图的应用程序？

或者，至少有人可以帮我找到这个小部件的源代码吗？我尝试了默认的音乐应用程序、音频服务、远程控制客户端、小部件，但我在任何地方都找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:34:35.427

> 锁屏小部件到底在做什么来控制不听我的媒体按钮意图的应用程序？

根据文档，它正在做那些应用程序要求它做的事情——执行`PendingIntent`由`RemoteControlClient`. 尤其：

*   它不会是有序广播，因为`PendingIntent`不支持它
*   它可能是针对特定媒体客户端的，通过`setComponent()`
*   它可能有也可能没有您尝试（错误地）使用的附加功能

（“错误”部分是因为您有时会发送两个`ACTION_UP`操作，因为`sendOrderedBroadcast()`与调用线程是异步的，因此您可能会在发送第一个有序广播之前替换您`ACTION_DOWN`的`ACTION_UP`。您最好使用每个广播的单独`Intent`对象。）

然而，虽然文档声称`PendingIntent`需要为 设置`ACTION_MEDIA_BUTTON`，但如果这是一个文档错误，我不会感到惊讶，并且不需要任何特定操作，因为`setComponent()`足以将广播传送到正确的接收器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T13:57:26.737

在开发我的应用程序时，我实际上发现了如何实现自己的 RemoteControlDisplay，它可以像锁屏一样控制音乐播放器。

基本上，您扩展了 IRemoteControlDisplay$Stub，它将消息发送到特殊处理程序，此处理程序更新元数据和事物。然后，通过调用 AudioManager#registerRemoteControlDisplay() 注册您自己的从 IRemoteControlDisplay$Stub 扩展的类。

然后通过调用 AudioManager#unregisterRemoteControlDisplay() 取消注册。

It's fairly complex, but I've wrote an article on how to this. I've published it on XDA, check it here: [http://forum.xda-developers.com/showthread.php?p=44513199](http://forum.xda-developers.com/showthread.php?p=44513199)

# sqlite - 使用 gui 的 sqlite 设置

> ID：14549342
> 
> 赞同：0
> 
> 时间：2013-01-27T16:16:16.967
> 
> 标签：sqlite

我有一个 sqlite 命令行并且工作正常，但是当涉及到 gui 时，就出现了问题。我安装了 Database Master 和 Expert Professional。当我创建一个随机数据库并导入一个现成的 .sql 脚本时，我得到一个“语法”错误。尽管 .read 有效并且数据库是在命令行中执行的。

Error Expert Professional（类似于 Database Manager）：**数据传输错误：“.”附近：语法错误**

任何指针？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:51:38.350

找到了解决方案。我不得不删除一些在 gui 中不起作用但在命令行中起作用的命令。

# jquery - jQuery 在每个函数中正确访问插件对象

> ID：14549343
> 
> 赞同：0
> 
> 时间：2013-01-27T16:16:26.070
> 
> 标签：jquery, object, jquery-plugins, chaining

是否可以在`each`-function 中访问 jQuery 的插件对象？

```
var pluginName = 'pluginName',
    Plugin = function(elem){
        elem.add = function () {
            console.log('foo');
            return this;
        };
    };

$.fn[pluginName] = function () {

    // this works
    new Plugin(this);
    return this;

    // this doesn't!
    // return this.each(function(){
    //     new Plugin($(this));
    // });
};

var plugin = $('.foo').pluginName();
plugin.add(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:18:46.897

当您进入 a 时`.each()`的上下文与外部的上下文不同。您可以使用如下变量维护上下文：

```
var _this = this;
return this.each(function(){
     new Plugin($(_this));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:43:56.823

Mash 几乎是正确的，但正确的代码是，

```
var _this = this;
return _this.each(function(){
     console.log($(this));
     new Plugin($(this));
}); 
```

虽然我不明白这一点，但这个添加应该做什么？

# php - 会话不返回变量

> ID：14549345
> 
> 赞同：0
> 
> 时间：2013-01-27T16:16:35.013
> 
> 标签：php, mysql, session, login

我对 php 相当陌生，并试图重新熟悉这些信息。我目前有一个登录脚本工作正常，直到我设置变量 - 它检查用户/密码很好，但是当它重定向到 echosession.php 时 $_SESSION['username']; 变量不回显。另外 - 检查用户是否登录以及注销。

```
include 'db_connect.php';
include 'functions.php';
session_start();
//user tabls
 $tbl_name="users";

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = md5($mypassword);
$myusername = $mysqli->real_escape_string($myusername);
$log_sql="SELECT * FROM $tbl_name WHERE email='$myusername' and password='$mypassword'";
$log_result=$mysqli->query($log_sql);

  // Mysql_num_row is counting table row
  $log_count=$log_result->num_rows;

// If result matched $myusername and $mypassword, table row must be 1 row
if($log_count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"

// Set username session variable
$_SESSION['username'] = $myusername;

header("location:echosession.php");
}
else {
echo "Wrong Username or Password";
} 
```

如果我尝试像这样加载 echosession.php：

```
session_start();
print("hi");
echo $_SESSION["username"];
var_dump($_SESSION); 
```

页面只是空的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T16:30:31.600

第一的

```
session_start(); //always in first line.  Before include/require functions. 
```

第二。您可以为非 cookie 用户添加会话 ID

```
if (session cookie exists == true)
   header('location:echosession.php');
else
   header('location:echosession.php?'.session_name().'='.session_id()); 
```

您 100% 确定 $myusername 不为空？

检查它

```
var_dump($myusername); die(); //in first script before add to session 
```

我想知道为什么您在第二个脚本中没有输出。看起来您关闭了会话问题和错误报告。

在脚本开始处插入

```
<?PHP 
ini_set( 'display_errors', 'On' ); 
error_reporting( E_ALL ); 
?> 
```

# mysql - 依靠大于的列过滤器

> ID：14549356
> 
> 赞同：0
> 
> 时间：2013-01-27T16:17:57.830
> 
> 标签：mysql, join, inner-join

任何人都可以让我知道下面的正确 MySQL 语法吗

```
SELECT ta.id, 
       ta.raw,
       ta.title, 
       ta.hits as tag_hits, 
       it.hits as image_tag_hits,

       (SELECT count(*) 
        FROM image_tag 
        WHERE image_tag.tag_title_id = ta.id) as tag_count
FROM tag_title ta
INNER JOIN image_tag it ON ta.id = it.tag_title_id
INNER JOIN image im ON it.image_id = im.id
WHERE im.id = '12975' AND tag_count >0; 
```

非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T16:20:11.960

尝试`having`：

```
SELECT ta.id, ta.raw,ta.title, ta.hits as tag_hits, it.hits as image_tag_hits,
(SELECT count(*) from image_tag where image_tag.tag_title_id = ta.id) as tag_count
FROM tag_title ta
INNER JOIN image_tag it ON ta.id = it.tag_title_id
INNER JOIN image im ON it.image_id = im.id
WHERE im.id = '12975' 
group by ta.id, ta.raw, ta.title, ta.hits, it.hits
having tag_count >0; 
```

如果你想保留，你也可以这样做`where`：

```
 SELECT * FROM (
    SELECT ta.id, ta.raw,ta.title, ta.hits as tag_hits, it.hits as image_tag_hits,
    (SELECT count(*) from image_tag where image_tag.tag_title_id = ta.id) as tag_count
    FROM tag_title ta
    INNER JOIN image_tag it ON ta.id = it.tag_title_id
    INNER JOIN image im ON it.image_id = im.id
    WHERE im.id = '12975' )X
   WHERE X.tag_count >0; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T16:20:28.063

尝试这个：：

```
SELECT 
ta.id, 
ta.raw,
ta.title, 
ta.hits as tag_hits, 
it.hits as image_tag_hits, 
count(ta.id) as tag_count 
FROM tag_title ta 
INNER JOIN image_tag it ON ta.id = it.tag_title_id 
INNER JOIN image im ON it.image_id = im.id 
INNER JOIN image_tag ON image_tag.tag_title_id = ta.id
WHERE im.id = '12975'
GROUP BY ta.id having tag_count >0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T16:36:13.013

**我不知道您的数据库是什么样的，但我相信您正在寻找该解决方案：**

```
SELECT
    ta.id, 
    ta.raw,
    ta.title, 
    ta.hits as tag_hits, 
    it.hits as image_tag_hits,
    COUNT(*) as tag_count
FROM
    image_tag it
LEFT JOIN
    tag_title ta ON
    ta.id = it.tag_title_ID
LEFT JOIN
    image im ON it.image_id = im.id
WHERE
    im.id = 12975
    # not need for tag_count=0, because if there is no image_count there will be no row :)
GROUP BY
    it.tag_title_id 
```

* * *

还有你的查询（固定）

```
SELECT
    ta.id, 
    ta.raw,
    ta.title, 
    ta.hits as tag_hits, 
    it.hits as image_tag_hits,
    tcount.tag_count
FROM
    tag_title ta
LEFT JOIN
    ( 
    SELECT 
        tag_title_id,
        count(*) as tag_count
    FROM 
        image_tag 
    GROUP BY
        tag_title_id
    ) tcount ON tcount.tag_title_id = ta.id
INNER JOIN image_tag it ON ta.id = it.tag_title_id
INNER JOIN image im ON it.image_id = im.id
WHERE im.id = '12975' AND tcount.tag_count >0; 
```

# string - JSP out.println 不呈现 html 标签

> ID：14549359
> 
> 赞同：1
> 
> 时间：2013-01-27T16:18:23.257
> 
> 标签：string, jsp

在jsp的文本区域中，我试图以粗体显示一些文本，但它没有呈现标签并按原样显示：

例如

> ```
>  <% out.println("<b>"+Pattern+"</b>");%> 
> ```

其中字符串模式 =ERROR

这显示为

> ```
>  <b>ERROR</b>  .....in the veiw source it shows like  &lt;b&gt;ERROR&lt;/b&gt; 
> ```

它不应该以这种方式工作吗？还有什么其他方法可以使它变得大胆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:32:52.550

试试看`<b><% out.println("+Pattern+");%></b>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:38:35.083

将其更改为：

```
<%= Pattern %> 
```

就像直接将其打印到 html 页面中一样

# android - 如何避免重复 PendingIntents

> ID：14549360
> 
> 赞同：4
> 
> 时间：2013-01-27T16:18:39.913
> 
> 标签：android, android-intent, android-pendingintent

你好！

我在复制 PendingIntents 时遇到了麻烦。我的应用程序具有从应用程序的 onCreate 开始的服务，执行一些异步任务并自行停止。问题是，在每次应用程序启动时，我在 AlarmManager 中都有一组来自 DB 的新 PendingIntents（完全相同），但它们不会取消以前的，即使使用 FLAG_CANCEL_CURRENT。我通过“adb shell dumpsys alarm”确定这一点，
这是异步任务的 onPostExecute：protected void onPostExecute (Cursor c) {

```
 while (c.moveToNext())
        {
            int _id = c.getInt(c.getColumnIndex(Maindb._ID));
            long remind_timestamp = c.getLong(c
                    .getColumnIndex(Maindb.REMIND_TIMESTAMP));
            String remind_name = c.getString(c.getColumnIndex(Maindb.NAME));
            String remind_description = c.getString(c
                    .getColumnIndex(Maindb.DESCRIPTION));

            Log.i("Service reminders : id = " + _id + "; REMIND_TIMESTAMP="
                    + remind_timestamp + "; NAME = " + remind_name
                    + "; DESCRIPTION=" + remind_description);

            Intent myIntent = new Intent(ReminderService.this,
                    AlarmReceiver.class);

            myIntent.putExtra(RemindDialog.REMIND_DIALOG_ID, _id);
            myIntent.putExtra(RemindDialog.REMIND_DIALOG_NAME, remind_name);
            myIntent.putExtra(RemindDialog.REMIND_DIALOG_DESCRIPTION,
                    remind_description);
            myIntent.putExtra(RemindDialog.REMIND_DIALOG_TIMESTAMP,
                    remind_timestamp);

            pendingIntent = PendingIntent.getService(ReminderService.this,
                    _id, myIntent, PendingIntent.FLAG_CANCEL_CURRENT | PendingIntent.FLAG_ONE_SHOT);

            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

            alarmManager.set(AlarmManager.RTC_WAKEUP, remind_timestamp,
                    pendingIntent);
            Log.i("Successfully setted alarm for ID:TIMESTAMP = " + _id
                    + ":" + remind_timestamp);

        }

        Log.d("Closing cursor");
        c.close();

        Log.d("Nothing else to do, Stoping the services by himself");
        stopSelf();

    } 
```

第二次应用程序启动后“adb shell dumpsys alarm”的输出如下所示：

> RTC_WAKEUP #26: Alarm{42096e70 type 0 com.} type=0 when=+93d9h0m54s107ms repeatInterval=0 count=0 operation=PendingIntent{4283e8b8: PendingIntentRecord{426ab530 com.startService}}
> 
> RTC_WAKEUP #25: Alarm{41dff7f8 type 0 com.} type=0 when=+93d9h0m54s107ms repeatInterval=0 count=0 operation=PendingIntent{41f1e730: PendingIntentRecord{41e7e1b0 com.startService}}
> 
> RTC_WAKEUP #24: Alarm{42161b60 type 0 com.} type=0 when=+76d19h50m54s107ms repeatInterval=0 count=0 operation=PendingIntent{428494d8: PendingIntentRecord{42705b90 com.startService}}
> 
> RTC_WAKEUP #23: Alarm{41ef50a8 type 0 com.} type=0 when=+76d19h50m54s107ms repeatInterval=0 count=0 operation=PendingIntent{41f1de18: PendingIntentRecord{41efdcd0 com.startService}}
> 
> RTC_WAKEUP #22: Alarm{42549b40 type 0 com.} type=0 when=+51d5h30m54s107ms repeatInterval=0 count=0 operation=PendingIntent{428697e8: PendingIntentRecord{427c9890 com.startService}}
> 
> RTC_WAKEUP #21: Alarm{41f2fe20 type 0 com.} type=0 when=+51d5h30m54s107ms repeatInterval=0 count=0 operation=PendingIntent{41fb31a0: PendingIntentRecord{41f3d018 com.startService}}
> 
> RTC_WAKEUP #20: Alarm{4269f008 type 0 com.} type=0 when=+21d10h30m54s107ms repeatInterval=0 count=0 operation=PendingIntent{428706f0: PendingIntentRecord{427fd1f0 com.startService}}
> 
> RTC_WAKEUP #19: Alarm{41fb1428 type 0 com.} type=0 when=+21d10h30m54s107ms repeatInterval=0 count=0 operation=PendingIntent{41f3c958: PendingIntentRecord{4212d098 com.startService}}
> 
> RTC_WAKEUP #18: Alarm{426aa948 type 0 com.} type=0 when=+16d14h16m54s107ms repeatInterval=0 count=0 operation=PendingIntent{42875fb8: PendingIntentRecord{4282bf98 com.startService}}
> 
> RTC_WAKEUP #17: Alarm{42554a70 type 0 com.} type=0 when=+16d14h16m54s107ms repeatInterval=0 count=0 operation=PendingIntent{41ec39e8: PendingIntentRecord{426a0620 com.startService}}

所以，主要问题是为什么我的 PendingIntents 重复，因为在第一次看时，第一次和第二次启动应该完全一样（输入 Cursor 肯定是一样的）。

谢谢！对不起我的英语不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:42:02.473

~~您可能已经更换了，`PendingIntent`因此您没有重复。但是，您尚未取消之前使用`AlarmManager`. 为此，您需要致电：~~

 ~~```
alarmManager.cancel(pendingIntent); 
```~~ 

在做之前：

```
alarmManager.set(AlarmManager.RTC_WAKEUP, remind_timestamp, pendingIntent); 
```

~~这将取消任何与传递的 匹配的警报`PendingIntent`。~~

**编辑：以上答案对 OP 没有帮助，可能是错误的（参见 A--C 的评论）**

更换时需要使用`PendingIntent.FLAG_UPDATE_CURRENT`而不是。这应该只产生 1 个预定的警报。`PendingIntent.FLAG_CANCEL_CURRENT``PendingIntent`

问题是，通过`PendingIntent`在创建新警报时取消现有警报，您无法`AlarmManager`确定您正在安排的警报正在替换另一个警报（因为它无法比较，`PendingIntent`因为旧警报不再存在）。

# javascript - window.setInterval 不工作

> ID：14549371
> 
> 赞同：0
> 
> 时间：2013-01-27T16:19:46.150
> 
> 标签：javascript

> **可能重复：**
> [setInterval() 只运行一次函数](https://stackoverflow.com/questions/8732191/setinterval-only-running-function-once)

我正在使用以下脚本来理解函数上下文的概念。我排除了从 20 开始并重复的警报。但是在显示 20 之后就很正常了。当使用 call 方法并提供 o2 时，它应该得到值 20 并从那里重复。

```
<script type="text/javascript">

    var o2 = {
        local: 20
    }
    var local=0;
    function someFuncObject(){
        alert('Thats method object again ' + this.local++);
    }
 // window.setInterval(someFuncObject, 2000); //This works perfect!!!
    window.setInterval(someFuncObject.call(o2), 2000); // This does not, why?
</script> 
```

另一方面，如果我使用`window.setInterval(someFuncObject, 2000);`它可以正常工作并一次又一次地重复。有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T16:20:38.737

`someFuncObject.call(o2)`实际调用函数。这意味着，传入`setInterval`的是从`someFuncObject()`. `setInterval`期望作为参数的是函数本身，而不是函数返回的内容。

如果要控制`this`inside的值`someFuncObject`，可以使用匿名函数，例如：

```
window.setInterval(function() {
    someFuncObject.call(o2);
}, 2000); 
```

# c++ - 重新安装这样的一对引用是否合法？

> ID：14549377
> 
> 赞同：4
> 
> 时间：2013-01-27T16:20:30.880
> 
> 标签：c++, reference

我想重新安排一对参考`refPair`

```
int a, b, c, d;
pair<int&, int&> refPair(a, b); 
```

这样做似乎会导致 c 和 d 的值被复制到 a 和 b，这是我不想要的

```
refPair = pair<int&, int&>(c, d); 
```

然而，这样做并没有

```
new(&refPair) pair<int&, int&>(c, d); 
```

我想知道这是否合法并且不会导致任何未定义的行为。它适用于我的编译器，但我不确定它是否可移植。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T16:28:52.517

我相当肯定这是未定义的行为，因为在这样的非平凡类上构造是非法的（std::pair 可以是非平凡的 AFAIK）。

无论如何，看看`std::reference_wrapper`哪个是可重新安装的。

```
refPair = pair<std::reference_wrapper<int>, std::reference_wrapper<int> >(std::ref(c), std::ref(d)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:39:16.363

你写，

> “想要重新安置一对参考文献 refPair”

不，不能重新安装引用。

从技术上讲，您可以改用指针。

但是您的原始代码所做的没有意义。您修改后的“工作”代码所做的事情毫无意义，而且形式上也不好。因此，这很可能是一个 XY 问题，即您要问的是想象的解决方案 Y 的缺点，而不是真正的问题 X——这是什么？

# java - 没有在Java中调用paintComponent方法

> ID：14549383
> 
> 赞同：3
> 
> 时间：2013-01-27T16:21:10.523
> 
> 标签：java, swing

作为我的软件工程课程的第一个作业，我正在做这个非常基本和简单的 Swing 教程，并且由于一些非常奇怪的原因，我的 JPanel 中没有调用paintComponent 方法。现在我过去曾使用过 Java Swing，但从未遇到过这样的问题。

我正在使用的教程可以在 Oracle 站点上找到（更容易访问该站点并查看代码，因为它与我的代码相同）。

[教程链接](http://docs.oracle.com/javase/tutorial/uiswing/painting/step2.html)

谁能向我解释为什么它对我不起作用？

我的代码：

```
import javax.swing.SwingUtilities;
import javax.swing.JFrame;
import javax.swing.JPanel    
import javax.swing.BorderFactory;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

public class PaintDemo {

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createGUI();
        }
    });
}

private static void createGUI() {
    System.out.println("Created GUI on EDT? "+
            SwingUtilities.isEventDispatchThread());
    JFrame frame = new JFrame("Yay, first 2102 lab!!");
    frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);        // allows to close the program
    DemoPanel panel = new DemoPanel();
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);
}
}

class DemoPanel extends JPanel {

public DemoPanel() {
    setBorder(BorderFactory.createLineBorder(Color.BLACK));
}

public Dimension getPreferredSize() {
    return new Dimension(250,200);
}

public void paintComponenet(Graphics g) {
    super.paintComponent(g);
    g.drawString("This is my custom panel!",10,20);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T16:24:42.240

它是`paintComponent(Graphics g)`，不是`paintComponenet(Graphics g)`。

至少你`super.paintComponent(g)`正确地调用了。

如果你`paint*`用注解来注解你的方法`@Override`，你会得到一个编译错误，这将帮助你理解发生了什么。

# c# - 在 datagridview 上搜索和过滤

> ID：14549392
> 
> 赞同：0
> 
> 时间：2013-01-27T16:22:27.873
> 
> 标签：c#, datagridview

我正在使用以下函数加载gridview以形成

```
private DataClasses1DataContext db_cooperations = new DataClasses1DataContext();
private int numberOfObjectsPerPage = 20;
private int CurrentPageIndex = 1;

Func<IEnumerable<cooperations>, IEnumerable<cooperations>> ordering = t => t.OrderBy(i => i.name);

private void daftarKoperasi_Load(object sender, EventArgs e)
{
    GetData(CurrentPageIndex);
    dataGridProperty();
}

 private void GetData(int page)
{
    page = page - 1;
    db_cooperations.Log = Console.Out;  

    var query = (from c in ordering(db_cooperations.cooperations)
                select new { c.id, c.name, c.phone, c.email, c.city })
                .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage).ToList();

    dataGridView1.DataSource = query ;
} 
```

然后我想根据**name**搜索数据，同时过滤**city**。任何线索我应该进一步做什么？

**更新**

所以我更新我的代码如下

```
private void GetData(int page)
{
    page = page - 1;
    db_cooperations.Log = Console.Out;  

    var query = (from c in ordering(db_cooperations.cooperations)
                select new { c.id, c.name, c.phone, c.email, c.city })
                .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage).ToList();

    if (String.IsNullOrEmpty(searchTxt.Text) == false)
    {
        query.Where(c => c.name.ToLower().Contains(searchTxt.Text.ToLower()));
    }

    if (cityCB.SelectedIndex > -1)
        {
        query.Where(c => c.city.ToLower().Equals(cityCB.Text.ToLower()));
    }

    dataGridView1.DataSource = query ;
} 
```

但它仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:28:29.653

在 linq 语句中添加 where 子句。

顺便说一句：您所有的排序、过滤和预测都在内存中完成。在应用任何这些之前，您正在将整个记录集加载到内存中，因为您使用`IEnumerable<Corproations>`的是`IQueryable<Corporations>`.

```
(from c in db_cooperations.cooperations 
where c.Name == name && c.City == city
order by c.Name)
.Skip(pagesize * page).Take(pagesize).AsEnumerable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:13:11.447

为了过滤（搜索）数据*`name`*，同时过滤*Linq to Sql**`city`*中的数据。

 *您有使用`or` [运算符](http://msdn.microsoft.com/en-us/library/ms174986.aspx)，其在 C#`SQL`中表示为`||` *或，* [.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)表示为。这是一个关于使用 LINQ 过滤的一个很好的例子，[包含不区分大小写](https://stackoverflow.com/questions/3360772/linq-contains-case-insensitive)`|``LIKE``SQL``.Contains`

```
 var query = (from c in ordering(db_cooperations.cooperations)
                     select new { c.id, c.name, c.phone, c.email, c.city })
                     .where(c => c.name.ToLower().Contains(searchTxt.Text.ToLower()) || 
                            c => c.city.ToLower().Contains(searchTxt.Text.ToLower()))
            .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage).ToList(); 
```

PS：可能我会想念你的问题，但你会这样，

```
.where(c => c.name.ToLower().Contains(searchTxt.Text.ToLower()) && 
                                c => c.city == cityCB.Text) 
```

**编辑：**

根据您的更新，

```
 if (String.IsNullOrEmpty(searchTxt.Text) == false)
    {
      query = query.Where(c => c.name.ToLower().Contains(searchTxt.Text.ToLower())).ToList();
    }

    if (cityCB.SelectedIndex > -1)
    {
       query =  query.Where(c => c.city.ToLower().Equals(cityCB.Text.ToLower())).ToList();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:18:40.440

所以我用下面的代码解决了这个问题

```
var query = (from c in ordering(db_cooperations.cooperations)
                         select new { c.id, c.name, c.phone, c.email, c.city })
                         .Skip(numberOfObjectsPerPage * page).Take(numberOfObjectsPerPage);

if (String.IsNullOrEmpty(searchTxt.Text) == false && searchTxt.Text.Trim() != "Search....")
    {
        query = from c in query
        where c.name.ToLower().Contains(searchTxt.Text.ToLower())
        select new { c.id, c.name, c.phone, c.email, c.city })
    }

if (kotaCB.SelectedIndex > -1)
    {
        query = from c in query
                where c.kota.ToLower().Equals(kotaCB.Text.ToLower())
                select new { c.id, c.name, c.phone, c.email, c.city });
        }

dataGridView1.DataSource = query.ToList(); 
```

谢谢大家帮助我@spajce，@Jason*

# jquery - 更新 MVC3 局部视图

> ID：14549393
> 
> 赞同：0
> 
> 时间：2013-01-27T16:22:29.137
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, partial-views

我正在使用 MVC C# 和 Jquery。我有一个局部视图，每次用户从视图中修改某些数据时都需要更新它。问题是部分视图没有更新。如何更新局部视图？

部分视图中的 jquery 代码 (WorkReport)

```
 $("#modify").click(function () {
    var duration = $("#newDuration").val();
    var date_param = $("#dateParam").val();
    $.ajax({
        url: '@Url.Action("ModifyDuration", "ViewWork")',
        type: 'post',
        data: { newDuration: duration, id: psm_id, date: date_param },
        dataType: 'text',
        traditional: true,
        beforeSend: function (jqXHR, settings) {
            $.mobile.showPageLoadingMsg();
        },
        success: function (data) {
            $("#workList").html(data).trigger('create');
            $.mobile.hidePageLoadingMsg();
        },
        error: function (jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            }
        }
    });
}); 
```

控制器代码：

```
[HttpGet]
    public PartialViewResult GetWorkList(string date)
    {
        model.workList = workList;
        return PartialView("WorkReport", model);

    }

 [HttpPost]
    public ActionResult ModifyDuration(string newDuration, string id, string date)
    {
        DataOperation dataOperation = new DataOperation();
        dataOperation.UpdateWorkDuration(newDuration, id);
        return RedirectToAction("GetWorkList", new
        {
            date = date
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:20:26.963

您可以使用[它](http://msprogrammer.serviciipeweb.ro/2011/12/05/jquery-ajax-request-and-mvcdetailed/)，但请确保选择正确的页面。或使用加载

```
$("#modify").load('@Url.Action("ModifyDuration", "ViewWork")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:26:10.430

我使用以下方法在 JQuery 中加载 Partials 取得了更大的成功：

```
$("#modify").click(function () {
    $("#workList").load('/ViewWork/ModifyDuration');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:36:09.997

硬编码路径（链接）是一个坏主意，所以总是使用`@Url.Action()`方法。你的代码应该是

```
$("#modify").click(function () {
    $("#workList").load('@Url.Action("ModifyDuration", "ViewWork")');
} 
```

# python - 如何杀死 python matplotlib 脚本？

> ID：14549404
> 
> 赞同：2
> 
> 时间：2013-01-27T16:23:50.137
> 
> 标签：python, matplotlib

所以我开始在linux中使用python进行图像处理。所以我运行代码

```
from PIL import Image
from pylab import *

im = array(Image.open('sample.jpg').convert('L'))

im2 = 255 - im
imshow(im)

figure()
imshow(im2)
figure()
im3 = (100.0/255)*im + 100
imshow(im3)
figure()
im4 = 255.0 * (im/255.0)**2
imshow(im4)
show() 
```

我创建了 4 个数字。当我关闭这些数字并想要运行另一个代码时，我收到消息：

```
Already Executing:
The Python Shell window is already
executing a command; please wait unit it is finished. 
```

我必须关闭 python shell 窗口才能执行另一个命令。无论如何可以正确终止执行，所以我不必每次都关闭 python shell 来运行另一个脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:14:16.217

您使用的是哪个 Python shell？这种行为似乎很不寻常。如果您使用`ipython`，您可以尝试使用`-pylab`-option 运行 ipython 以避免线程问题。

如果您不使用 ipython，请告诉我们您使用的是哪个变体。`python`? _ 一些IDE，比如Spyder？这真的取决于。

老实说，我建议使用 ipython。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:39:14.720

如果您`exit()`在脚本末尾添加（在调用之后`show`），您是否有同样的问题？

**在 Unix 上编辑**，您应该能够使用 ctrl+c 中断程序/脚本的执行

# python - Python 检查类的实例

> ID：14549405
> 
> 赞同：109
> 
> 时间：2013-01-27T16:23:54.733
> 
> 标签：python, object, instance

有什么方法可以检查对象是否是类的实例？不是具体类的实例，而是任何类的实例。

我可以检查一个对象不是类、不是模块、不是回溯等，但我对一个简单的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-01-27T20:21:32.207

`isinstance()`是你的朋友吗？它返回一个布尔值，可以通过以下方式检查类型。

```
if isinstance(obj, (int, long, float, complex)):
    print obj, "is a built-in number type"

if isinstance(obj, MyClass):
    print obj, "is of type MyClass" 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-27T16:27:58.443

您是否尝试过[`isinstance()`](http://docs.python.org/2/library/functions.html#isinstance)内置功能？

您还可以`hasattr(obj, '__class__')`查看该对象是否是从某个类类型实例化的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-10-03T10:10:37.087

如果要检查用户定义类的对象而不是具体内置类型的实例，可以检查它是否具有`__dict__`属性。

```
>>> class A:
...     pass
... 
>>> obj = A()
>>> hasattr(obj, '__dict__')
True
>>> hasattr((1,2), '__dict__')
False
>>> hasattr(['a', 'b', 1], '__dict__')
False
>>> hasattr({'a':1, 'b':2}, '__dict__')
False
>>> hasattr({'a', 'b'}, '__dict__')
False
>>> hasattr(2, '__dict__')
False
>>> hasattr('hello', '__dict__')
False
>>> hasattr(2.5, '__dict__')
False
>>> 
```

如果您有兴趣检查一个实例是否是任何类的对象，无论是用户定义的还是具体的，您可以简单地检查它是否是`object`Python 中最终基类的实例。

```
class A:
    pass
a = A()
isinstance(a, object)
True
isinstance(4, object)
True
isinstance("hello", object)
True
isinstance((1,), object)
True 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-19T11:39:02.190

我有一个类似的问题，结果证明对我有用：

```
def isclass(obj):
    return isinstance(obj, type) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-17T10:12:05.397

我迟到了。无论如何认为这应该工作。

```
is_class = hasattr(obj, '__name__') 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-30T16:24:27.280

```
class test(object): pass
type(test) 
```

返回

```
<type 'type'>

instance = test()
type(instance) 
```

返回

```
<class '__main__.test'> 
```

所以这是区分它们的一种方法。

```
def is_instance(obj):
    import inspect, types
    if not hasattr(obj, '__dict__'):
        return False
    if inspect.isroutine(obj): 
        return False
    if type(obj) == types.TypeType: # alternatively inspect.isclass(obj)
        # class type
        return False
    else:
        return True 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-19T09:32:15.963

或者

```
import inspect
inspect.isclass(myclass) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-27T17:15:19.380

很难说出你想要什么，但也许`inspect.isclass(val)`是你正在寻找的？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-09T04:07:07.960

这是一个肮脏的把戏。

```
if str(type(this_object)) == "<type 'instance'>":
    print "yes it is"
else:
    print "no it isn't" 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-21T12:38:51.700

是的。因此，您可以使用`hasattr(obj, '__dict__')`或`obj is not callable(obj)`。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-17T06:10:36.847

> 有什么方法可以检查对象是否是类的实例？不是具体类的实例，而是任何类的实例。
> 
> 我可以检查一个对象不是类、不是模块、不是回溯等，但我对一个简单的解决方案感兴趣。

一种方法，就像您在问题中描述的那样，是一个排除过程，检查它是否不是您想要的。我们检查它是类、模块、回溯、异常还是函数。如果是，那么它不是类实例。否则，我们会返回 True，这在某些情况下可能很有用，而且我们会在此过程中建立一个小助手库。

这是一些代码，它定义了一组类型检查器，然后将它们全部组合起来以排除我们不关心这个问题的各种事情。

```
from types import (
    BuiltinFunctionType,
    BuiltinMethodType,
    FunctionType,
    MethodType,
    LambdaType,
    ModuleType,
    TracebackType,
)
from functools import partial
from toolz import curry
import inspect

def isfunction(variable: any) -> bool:
    return isinstance(
        variable,
        (
            BuiltinFunctionType,
            BuiltinMethodType,
            FunctionType,
            MethodType,
            LambdaType,
            partial,
            curry
        ),
    )

isclass = inspect.isclass

def ismodule(variable: any) -> bool:
   return isinstance(variable, ModuleType)

def isexception(variable: any) -> bool:
    return isinstance(variable, Exception)

def istraceback(variable: any) -> bool:
    return isinstance(variable, TracebackType)

def isclassinstance(x: any) -> bool:
    if isfunction(x) or isclass(x) or ismodule(x) or istraceback(x) or isexception(x):
        return False
    return True 
```

请记住，从抽象的角度来看，一切都是事物，甚至是事物或功能的类别......但从实际的角度来看，这有助于避免将 MyClass 误认为 my_class_instance （python 社区也使用 PascalCase 和蛇形案例非正式地做到这一点)

我们可以改进这一点

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-25T04:00:23.037

最近不得不处理类似的事情。

```
import inspect

class A:
    pass

def func():
    pass

instance_a = A()

def is_object(obj):
     return inspect.isclass(type(obj)) and not type(obj) == type

is_object(A)          # False
is_object(func)       # False
is_object(instance_a) # True 
```

# ios - UIButton 仅在触摸时选择内容

> ID：14549406
> 
> 赞同：0
> 
> 时间：2013-01-27T16:24:22.043
> 
> 标签：ios

只有当我触摸它时，是否可以看到 UIButton 的选定状态内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:32:31.183

当您触摸一个按钮时，该按钮会*突出显示*。调用`setTitle:forState:`给按钮正常标题（UIControlStateNormal），调用`setTitle:forState:`给它突出显示的标题（UIControlStateHighlighted）。现在，当您触摸按钮时，您将正常看到一个标题和另一个标题。其他按钮功能也是如此，例如`setImage:forState:`.

# xml - 从文件生成类似 XML 的代码

> ID：14549414
> 
> 赞同：0
> 
> 时间：2013-01-27T16:26:07.437
> 
> 标签：xml, perl, csv

目标已经为我设定了，但我不知道如何到达那里。提前道歉。

使用 Perl - 我将收到一个以字符分隔的文件（我可以指定其结构），我需要将其转换为类似 XML*的*文件

```
<MyConfig>
   Active = yes
   Refresh = 10 min
 <Includes>
 <Include_Rule_1>
 Active = yes
 Match = /Foo [Bb]ar/
 </Include_Rule_1>
 <Include_Rule_2>
 Active = yes
 Match = /Baz.*/
<Include_Rule_2>
</Include>
<Exclude>
<Exclude_Rule_1>
Exclude = /Bim Bam/
</Exclude_Rule_1>
 </Exclude>
</MyConfig> 
```

所以简而言之，它将*类似于*XML （各个值不被尖括号包围），具有 3 个不变的部分，但它们的深度总是未知的。

我可以使用 CPAN 库，但不喜欢，因为这个脚本需要在我无法访问或控制的单个服务器上运行。

有任何想法吗 ？首发指针 ? 提示或技巧？

对不起，我在这里迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:59:10.367

您可以像在这个入门示例中一样使用[Template::Toolkit](https://metacpan.org/module/ABW/Template-Toolkit-2.24/lib/Template/Toolkit.pod)模块（您需要先解析输入文件以提供 HASH）：

```
#!/usr/bin/env perl

use strict; use warnings;
use Template;
my $tt = Template->new;
my $input = {
    MyConfig_Active => "yes",
    MyConfig_refresh => "10 min",
    MyConfig_Include_Rule_1_Active => "yes",
    MyConfig_Include_Rule_1_Match => "/Foo [Bb]ar/"
};
$tt->process('template.tpl', $input)
    || die $tt->error; 
```

`template.tpl`文件 ：

```
<MyConfig>
   Active = [% MyConfig_Active %]
   Refresh =  [% MyConfig_refresh %]
 <Includes>
 <Include_Rule_1>
 Active = [% MyConfig_Include_Rule_1_Active %]
 Match = "[% MyConfig_Include_Rule_1_Match %]"
 </Include_Rule_1>
(...)
</MyConfig> 
```

样本输出：

```
<MyConfig>
   Active = yes
   Refresh =  10 min
 <Includes>
 <Include_Rule_1>
 Active = yes
 Match = "/Foo [Bb]ar/"
 </Include_Rule_1>
(...)
</MyConfig> 
```

请参阅[http://template-toolkit.org/docs/tutorial/Datafile.html](http://template-toolkit.org/docs/tutorial/Datafile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:21:56.753

一种选择是使用[Config::General](http://search.cpan.org/dist/Config-General/General.pm)从您从解析的字符分隔文件的结果中填充的哈希生成这样的文件。可以使用 Config::General 轻松读取此文件以重新填充散列：

```
use strict;
use warnings;
use Config::General;

my %config = (
    Active   => 'yes',
    Refresh  => '10 min',
    Includes => {
        Include_Rule_1 => {
            Active => 'yes',
            Match  => '/Foo [Bb]ar/'
        },
        Include_Rule_2 => {
            Active => 'yes',
            Match  => '/Baz.*/'
        }
    },
    Excludes => { 
        Exclude_Rule_1 => { 
            Exclude => '/Bim Bam/'
        }
    }

);

my $conf = new Config::General();

# Save structure to file
$conf->save_file('myConfig.conf', \%config); 
```

内容`myConfig.conf`：

```
<Excludes Exclude_Rule_1>
    Exclude   /Bim Bam/
</Excludes>
Refresh   10 min
<Includes>
    <Include_Rule_1>
        Match   /Foo [Bb]ar/
        Active   yes
    </Include_Rule_1>
    <Include_Rule_2>
        Match   /Baz.*/
        Active   yes
    </Include_Rule_2>
</Includes>
Active   yes 
```

# git - git clean 和 system rm 的区别

> ID：14549415
> 
> 赞同：10
> 
> 时间：2013-01-27T16:26:18.543
> 
> 标签：git

有什么区别：

```
git clean -f temp1.txt 
```

和

```
rm temp1.txt 
```

Git文档说：

`git-clean`- 从工作树中删除未跟踪的文件

那么这样做的真正意义是什么，而不仅仅是系统命令呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T16:28:33.377

`rm`无论如何都会删除文件。`git-clean`只有当它实际上未被跟踪时才会删除它。当然`git-clean`也接受以回购感知方式定制其行为的参数（例如`-x`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T16:27:55.560

以你为例？完全没有区别。 `git clean`当您有很多未跟踪的文件要删除而不必自己弄清楚它们都在哪里时，这很方便。它内置递归，了解哪些文件被跟踪，哪些文件不被跟踪，甚至可以正确处理被忽略的文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-27T16:29:01.847

[`git clean`](http://git-scm.com/docs/git-clean)不指定路径或适用于多个文件的路径时，最大的优势就出现了。如果您只是运行`git clean -xdf`，则基本上将工作目录恢复到原始状态，而没有任何未跟踪的文件。例如，当您生成忽略的二进制文件时，您可以使用它一次将它们全部删除，而无需手动指定每个文件夹。

# c# - NUnit 断言事件。有什么建议吗？

> ID：14549418
> 
> 赞同：3
> 
> 时间：2013-01-27T16:26:42.020
> 
> 标签：c#, unit-testing, nunit

想知道这是否是测试事件结果的正确方法。

我正在开发一个应用程序，当保存正在进行/完成时它会触发事件。

为了测试它，我想出了以下（虚构的场景）。我想知道这是否是你这样做的方式：

```
[Test]
public void Save_WhenCalled_IsSuccessfull()
{
    //Arrange
    var customerService= new CustomerService();

    customerService.OnSaved += (sender, args) =>
        {                                             
            Assert.IsTrue(args.HasSaved);
        };

    customerService.Save(new Customer {Id=1,Name="Jo"});
} 
```

我不喜欢的是，如果您明白我的意思，我之前就在断言。

我希望断言在视觉上是最后的。顺便说一句，上面的工作很好，但不是很开心。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T16:39:45.753

看起来不错，但您应该将接收到的参数（或任何其他检查）存储在变量中，以保持排列/动作/断言顺序。这样，您还可以断言该事件已实际触发，您的示例未验证这一点。

```
[Test]
public void Save_WhenCalled_IsSuccessfull()
{
    //Arrange
    YourArgsType actualArgs;
    var customerService= new CustomerService();  
    customerService.OnSaved+= (sender, args) =>
                                  {                                           
                                      actualArgs = args;
                                  };

    //Act
    customerService.Save(new Customer{Id=1, Name="Jo"});

    //Assert
    Assert.IsTrue(actualArgs.HasSaved);
} 
```

**编辑：**添加了亚历山大的建议。

# mysql - mysql在加入3个表时获取空值

> ID：14549426
> 
> 赞同：0
> 
> 时间：2013-01-27T16:28:06.847
> 
> 标签：mysql, phpmyadmin

当我尝试从 3 个表中获取结果时，我只从 2 个表中获取信息，第三个表只返回 NULL 值。这是我的查询，我在 phpmyAdmin 中运行它以在将其放在服务器上之前对其进行测试：

```
SELECT uk2.*,u.*,COALESCE(SUM(n.cost),'not found') as cost 
    FROM std13_k2_users AS uk2  
    JOIN std13_users AS u   
       ON uk2.userID=u.id   
    JOIN std13_k2_naklady AS n   
       ON uk2.userID=n.userID WHERE uk2.userID=986 
```

当 SUM 不为 NULL 时，我从所有表中获取值（该表中没有要求和的东西）。当它为 NULL 时，我只从 std13_users 表中获取值。std13_k2_users 的值为 NULL。

我的问题是：我应该如何修复我的查询？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:33:08.507

请试试这个，假设你`joins`正确地完成了你的表模式。

```
SELECT uk2.*,u.*, case when SUM(COALESCE(n.cost,0)) = 0 then 'not found' 
else SUM(COALESCE(n.cost,0)) end as cost 
    FROM std13_k2_users AS uk2  
    JOIN std13_users AS u   
       ON uk2.userID=u.id   
    JOIN std13_k2_naklady AS n   
       ON uk2.userID=n.userID WHERE uk2.userID=986 
```

# javascript - 未使用来自服务器的加载值设置组合框 - IE (ASP.net)

> ID：14549432
> 
> 赞同：0
> 
> 时间：2013-01-27T16:28:34.777
> 
> 标签：javascript, jquery, html, asp.net-mvc-3, internet-explorer

我一直在寻找我的问题的答案，但这里的帖子都没有帮助我解决问题。我有一个 ASP.net 剃须刀应用程序。我的视图包含几个组合框，它们必须是由服务器加载的对象设置的值。使用 Chrome 时一切正常。但是，当我尝试在 IE 中执行此操作时，嗯...没有将值设置为组合框（请注意，它们的内部列表已填充。尽管 js 并没有真正设置要设置的值代码处理它）。我尝试了几件事，例如元标记，但没有任何效果。

有人可以帮助解决这个问题吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:05:13.033

如果您尝试更改`select`元素中的选定值，则需要`change`在设置其值后触发事件。否则，可见选中的项目不会改变。

```
$('#myCombo').val(myValue).change(); 
```

# r - 按日期计算行数

> ID：14549433
> 
> 赞同：2
> 
> 时间：2013-01-27T16:28:37.517
> 
> 标签：r

这是我的数据框的样子；

```
 Zaman Operasyon             Paket
1 2013-01-18 21:39:00 installed linux-api-headers
2 2013-01-18 21:39:00 installed            tzdata
3 2013-01-18 21:39:00 installed             glibc
4 2013-01-18 21:39:00 installed           ncurses
5 2013-01-18 21:39:00 installed          readline
6 2013-01-18 21:39:00 installed              bash 
```

Zaman 是一个 POSIXct，其他 2 个列是因子。我想计算每天分组的行数。我试过了，

```
> aggregate(data,by=list(data$Zaman),FUN=sum)
Error occured: Summary.POSIXct(c(1358537940, 1358537940, 1358537940, 1358537940,  : 
  'sum' not defined for "POSIXt" objects
> aggregate(data,by=list(data$Zaman),FUN=count)
Error occured: match.fun(FUN) : Couldn't find 'count' object 
```

我怎样才能做到这一点？

的输出`dput(data)`

```
dput(data)
structure(list(Zaman = structure(c(1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 1358537940, 
1358537940, 1358537940, 1358537940, 1358538000, 1358538000, 1358538000, 
1358538000, 1358538000, 1358538000, 1358538000, 1358538000, 1358538000, 
1358538000, 1358538000, 1358538000, 1358538000, 1358538000, 1358538000, 
1358538000, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 1358538060, 
1358538720, 1358549220, 1358549580, 1358549580, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 1358550240, 
1358550300, 1358550300, 1358550300, 1358550300, 1358550300, 1358550300, 
1358550300, 1358550300, 1358550300, 1358550360, 1358550360, 1358550360, 
1358550360, 1358550480, 1358550480, 1358550480, 1358550660, 1358550660, 
1358550660, 1358550660, 1358550660, 1358550660, 1358550660, 1358550660, 
1358550660, 1358550840, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 1358551140, 
1358551140, 1358551200, 1358551200, 1358551200, 1358551200, 1358551200, 
1358551200, 1358551200, 1358551200, 1358551200, 1358551320, 1358551320, 
1358551320, 1358551320, 1358551320, 1358551320, 1358551800, 1358552580, 
1358552580, 1358553300, 1358553300, 1358553300, 1358553300, 1358553300, 
1358553720, 1358553720, 1358554320, 1358554320, 1358554320, 1358554320, 
1358554320, 1358554380, 1358554380, 1358555100, 1358555100, 1358555100, 
1358555280, 1358555280, 1358555280, 1358555460, 1358555460, 1358555460, 
1358555460, 1358555460, 1358555460, 1358555460, 1358555460, 1358555460, 
1358555520, 1358555520, 1358555520, 1358555520, 1358555520, 1358555520, 
1358555520, 1358555520, 1358555520, 1358555520, 1358555520, 1358555520, 
1358555520, 1358555520, 1358555640, 1358556240, 1358556240, 1358556240, 
1358556240, 1358556300, 1358556300, 1358556300, 1358557020, 1358557860, 
1358558280, 1358558280, 1358558280, 1358558280, 1358558280, 1358558280, 
1358558280, 1358558280, 1358558280, 1358558280, 1358558280, 1358558280, 
1358558280, 1358558280, 1358559660, 1358559660, 1358559900, 1358559900, 
1358559900, 1358559900, 1358560140, 1358613600, 1358614140, 1358614140, 
1358614140, 1358614140, 1358614140, 1358614140, 1358614140, 1358614140, 
1358614140, 1358614140, 1358614140, 1358614140, 1358614140, 1358614140, 
1358614140, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 1358614200, 
1358614200, 1358614260, 1358614260, 1358614260, 1358614260, 1358614260, 
1358614260, 1358614260, 1358614320, 1358614320, 1358614320, 1358614320, 
1358614320, 1358614500, 1358614500, 1358614500, 1358614500, 1358616120, 
1358616120, 1358616120, 1358616120, 1358618280, 1358618280, 1358618280, 
1358618280, 1358618280, 1358618280, 1358618280, 1358618280, 1358618280, 
1358618280, 1358618280, 1358618280, 1358618280, 1358618280, 1358618280, 
1358618280, 1358618280, 1358618280, 1358620500, 1358620500, 1358620500, 
1358620500, 1358620500, 1358620500, 1358620500, 1358620500, 1358689500, 
1358689500, 1358689500, 1358689560, 1358691060, 1358708700, 1358708700, 
1358708700, 1358708700, 1358708700, 1358708700, 1358708700, 1358708700, 
1358708700, 1358708700, 1358708700, 1358708700, 1358708700, 1358708760, 
1358709600, 1358726940, 1358726940, 1358726940, 1358726940, 1358727000, 
1358727000, 1358768340, 1358768340, 1358856660, 1358856660, 1358856660, 
1358856660, 1358856660, 1358856660, 1358856720, 1358856720, 1358856720, 
1358857080, 1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 
1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 
1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 
1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 
1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 1358857260, 
1358857260, 1358857260, 1358857260, 1358857260, 1358857380, 1358857380, 
1358857500, 1358858160, 1358858160, 1358858160, 1358858160, 1358858160, 
1358858160, 1358858160, 1358858160, 1358858160, 1358858160, 1358858160, 
1358858160, 1358858160, 1358858160, 1358858160, 1358858160, 1358858160, 
1358858460, 1358858520, 1358859780, 1358859840, 1358859840, 1358862600, 
1358862660, 1358863440, 1358863500, 1358896140, 1358896140, 1358896200, 
1358896200, 1358943900, 1358943900, 1358943900, 1358944020, 1358944020, 
1358944080, 1358949840, 1358949840, 1358949840, 1358949840, 1358949840, 
1358949900, 1358949900, 1358949900, 1358949900, 1358949960, 1358949960, 
1358949960, 1358949960, 1358949960, 1358949960, 1358949960, 1358949960, 
1358949960, 1358949960, 1358949960, 1358949960, 1358950020, 1358950020, 
1358950020, 1358950020, 1358966040, 1358966040, 1358966040, 1358966040, 
1358966040, 1358966100, 1358966520, 1358966520, 1358966640, 1358966640, 
1358967000, 1358967000, 1358967000, 1358967000, 1358967000, 1358967000, 
1358967000, 1358970720, 1358970720, 1358970720, 1358970720, 1358970720, 
1358970720, 1358970720, 1358970720, 1359120240, 1359120240, 1359120240, 
1359120240, 1359120240, 1359120240, 1359120240, 1359120240, 1359120240, 
1359120420, 1359194820, 1359194820, 1359194820, 1359194820, 1359223080, 
1359223080, 1359223080, 1359223080, 1359223080, 1359223080, 1359223080, 
1359224100), class = c("POSIXct", "POSIXt"), tzone = ""), Operasyon = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 1L, 
1L, 1L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
3L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = c("installed", 
"removed", "upgraded"), class = "factor"), Paket = structure(c(381L, 
563L, 126L, 406L, 506L, 23L, 31L, 108L, 56L, 654L, 50L, 257L, 
330L, 429L, 428L, 17L, 3L, 130L, 227L, 49L, 517L, 51L, 256L, 
250L, 530L, 573L, 77L, 179L, 86L, 57L, 437L, 247L, 125L, 204L, 
209L, 177L, 652L, 547L, 61L, 466L, 52L, 62L, 64L, 70L, 84L, 87L, 
104L, 116L, 143L, 170L, 111L, 438L, 420L, 315L, 271L, 207L, 210L, 
172L, 185L, 190L, 189L, 545L, 191L, 198L, 217L, 379L, 382L, 400L, 
218L, 399L, 380L, 383L, 388L, 554L, 144L, 291L, 391L, 392L, 394L, 
405L, 409L, 528L, 32L, 324L, 53L, 472L, 270L, 220L, 455L, 65L, 
135L, 139L, 427L, 8L, 426L, 435L, 436L, 285L, 336L, 288L, 469L, 
470L, 471L, 511L, 549L, 548L, 551L, 572L, 575L, 586L, 612L, 389L, 
20L, 21L, 24L, 25L, 80L, 91L, 402L, 282L, 193L, 40L, 468L, 106L, 
273L, 331L, 390L, 433L, 457L, 546L, 192L, 588L, 587L, 649L, 354L, 
97L, 248L, 94L, 359L, 289L, 237L, 456L, 348L, 592L, 350L, 205L, 
347L, 363L, 642L, 616L, 632L, 622L, 621L, 618L, 627L, 626L, 619L, 
620L, 93L, 623L, 629L, 404L, 599L, 628L, 598L, 355L, 261L, 320L, 
373L, 366L, 634L, 640L, 624L, 631L, 637L, 593L, 635L, 602L, 377L, 
638L, 639L, 512L, 369L, 503L, 368L, 644L, 187L, 361L, 615L, 362L, 
641L, 643L, 393L, 645L, 646L, 647L, 88L, 358L, 352L, 648L, 630L, 
55L, 353L, 253L, 251L, 188L, 576L, 375L, 376L, 601L, 397L, 508L, 
374L, 600L, 578L, 140L, 577L, 633L, 367L, 349L, 360L, 636L, 625L, 
591L, 337L, 650L, 561L, 14L, 293L, 34L, 234L, 326L, 181L, 142L, 
171L, 430L, 48L, 351L, 365L, 533L, 325L, 410L, 424L, 136L, 268L, 
328L, 233L, 22L, 232L, 112L, 159L, 160L, 173L, 357L, 58L, 610L, 
542L, 356L, 76L, 103L, 161L, 214L, 260L, 412L, 201L, 460L, 531L, 
541L, 47L, 13L, 59L, 12L, 162L, 163L, 60L, 246L, 286L, 555L, 
556L, 562L, 603L, 370L, 343L, 605L, 155L, 423L, 156L, 4L, 36L, 
340L, 287L, 341L, 327L, 157L, 333L, 604L, 458L, 459L, 482L, 292L, 
571L, 266L, 570L, 529L, 432L, 222L, 385L, 564L, 606L, 607L, 194L, 
364L, 450L, 451L, 180L, 133L, 132L, 158L, 608L, 582L, 581L, 609L, 
611L, 613L, 614L, 413L, 597L, 245L, 520L, 372L, 39L, 544L, 443L, 
120L, 63L, 89L, 321L, 314L, 6L, 401L, 90L, 577L, 378L, 516L, 
386L, 169L, 552L, 557L, 166L, 145L, 122L, 122L, 145L, 166L, 278L, 
500L, 501L, 534L, 496L, 480L, 485L, 478L, 495L, 371L, 67L, 68L, 
10L, 513L, 452L, 448L, 617L, 486L, 492L, 490L, 494L, 487L, 497L, 
121L, 203L, 85L, 568L, 653L, 425L, 9L, 566L, 408L, 590L, 102L, 
228L, 229L, 230L, 294L, 145L, 124L, 322L, 255L, 323L, 565L, 316L, 
168L, 544L, 479L, 481L, 243L, 66L, 215L, 419L, 596L, 95L, 311L, 
176L, 407L, 504L, 505L, 509L, 178L, 30L, 41L, 263L, 422L, 302L, 
175L, 300L, 384L, 301L, 303L, 304L, 305L, 75L, 543L, 16L, 567L, 
510L, 267L, 579L, 536L, 141L, 532L, 499L, 235L, 462L, 11L, 174L, 
72L, 119L, 96L, 128L, 196L, 182L, 416L, 1L, 239L, 236L, 521L, 
523L, 241L, 240L, 269L, 329L, 387L, 242L, 275L, 656L, 550L, 283L, 
221L, 202L, 295L, 147L, 211L, 249L, 208L, 244L, 338L, 342L, 415L, 
417L, 515L, 519L, 540L, 574L, 589L, 651L, 82L, 79L, 334L, 317L, 
274L, 284L, 279L, 507L, 71L, 98L, 219L, 594L, 580L, 454L, 298L, 
453L, 395L, 206L, 306L, 307L, 467L, 308L, 33L, 200L, 199L, 197L, 
309L, 310L, 345L, 346L, 312L, 262L, 184L, 118L, 81L, 280L, 259L, 
19L, 18L, 476L, 489L, 252L, 484L, 477L, 493L, 28L, 335L, 418L, 
272L, 183L, 414L, 461L, 553L, 537L, 225L, 411L, 27L, 166L, 483L, 
491L, 138L, 290L, 475L, 488L, 113L, 115L, 114L, 332L, 29L, 498L, 
105L, 146L, 319L, 127L, 35L, 431L, 15L, 164L, 167L, 213L, 464L, 
463L, 465L, 186L, 117L, 344L, 258L, 165L, 231L, 313L, 134L, 137L, 
516L, 131L, 74L, 73L, 34L, 204L, 380L, 501L, 601L, 595L, 110L, 
154L, 151L, 150L, 195L, 583L, 2L, 238L, 224L, 299L, 223L, 265L, 
152L, 129L, 297L, 296L, 559L, 46L, 42L, 43L, 44L, 398L, 38L, 
277L, 403L, 281L, 78L, 37L, 538L, 539L, 254L, 421L, 149L, 558L, 
318L, 153L, 148L, 441L, 444L, 440L, 439L, 449L, 525L, 527L, 535L, 
276L, 524L, 522L, 526L, 447L, 446L, 442L, 445L, 101L, 92L, 69L, 
123L, 100L, 99L, 396L, 92L, 655L, 54L, 26L, 212L, 502L, 107L, 
45L, 7L, 569L, 264L, 585L, 32L, 560L, 181L, 30L, 29L, 34L, 39L, 
171L, 183L, 186L, 302L, 300L, 301L, 303L, 304L, 305L, 306L, 307L, 
308L, 309L, 310L, 312L, 380L, 414L, 500L, 504L, 514L, 83L, 584L, 
518L, 473L, 109L, 5L, 474L, 226L, 434L, 474L, 473L, 5L, 83L, 
514L, 518L, 584L, 216L, 253L, 251L, 188L, 208L, 249L, 244L, 397L, 
32L, 135L, 139L, 332L, 443L, 452L, 629L, 628L, 648L, 502L, 43L, 
44L, 47L, 544L, 514L, 83L, 584L, 518L, 473L, 5L, 474L, 339L), .Label = c("a52dec", 
"aalib", "acl", "alsa-lib", "alsa-plugins", "alsa-utils", "apache-ant", 
"archlinux-keyring", "arj", "asciidoc", "aspell", "at-spi2-atk", 
"at-spi2-core", "atk", "atkmm", "attica", "attr", "audacious", 
"audacious-plugins", "autoconf", "automake", "avahi", "bash", 
"binutils", "bison", "blas", "blueman", "bluez", "boost", "boost-libs", 
"bzip2", "ca-certificates", "ca-certificates-java", "cairo", 
"cairomm", "cdparanoia", "celt", "chromaprint", "chromium", "cloog", 
"clucene", "clutter", "clutter-gst", "clutter-gtk", "cmake", 
"cogl", "colord", "compositeproto", "coreutils", "cracklib", 
"cronie", "cryptsetup", "curl", "curlpaste", "damageproto", "db", 
"dbus", "dbus-glib", "dconf", "desktop-file-utils", "device-mapper", 
"dhcpcd", "dialog", "diffutils", "dirmngr", "dnssec-anchors", 
"docbook-xml", "docbook-xsl", "doukutsu", "e2fsprogs", "enca", 
"enchant", "eog", "exempi", "exiv2", "exo", "expat", "faac", 
"faad2", "fakeroot", "feh", "ffmpeg", "fftw", "file", "file-roller", 
"filesystem", "findutils", "fixesproto", "flac", "flashplugin", 
"flex", "fltk", "fontconfig", "fontsproto", "foxitreader", "freeglut", 
"freetype2", "fribidi", "frogatto", "frogatto-data", "frozen-bubble", 
"fuse", "garcon", "gawk", "gc", "gcc", "gcc-fortran", "gcc-libs", 
"gconf", "gdb", "gdbm", "gdk-pixbuf2", "gedit", "geoip", "geoip-database", 
"gettext", "ghex", "giblib", "giflib", "git", "git-cola", "gitg", 
"glew", "glib-networking", "glib2", "glibc", "glibmm", "glu", 
"gmime", "gmp", "gnome-desktop", "gnome-icon-theme", "gnome-icon-theme-symbolic", 
"gnome-system-monitor", "gnupg", "gnutls", "go", "gobject-introspection", 
"gpgme", "gpm", "grantlee", "graphite", "grep", "groff", "gsettings-desktop-schemas", 
"gsl", "gsm", "gst-libav", "gst-plugins-bad", "gst-plugins-base", 
"gst-plugins-base-libs", "gst-plugins-good", "gst-plugins-ugly", 
"gstreamer", "gstreamer0.10", "gstreamer0.10-base", "gstreamer0.10-base-plugins", 
"gtk-engines", "gtk-update-icon-cache", "gtk2", "gtk2-xfce-engine", 
"gtk3", "gtk3-xfce-engine", "gtkmm", "gtkmm3", "gtksourceview3", 
"gtkspell", "gvfs", "gvim", "gzip", "harfbuzz", "heirloom-mailx", 
"hicolor-icon-theme", "hspell", "hsqldb-java", "hunspell", "hwids", 
"hyphen", "iana-etc", "icon-naming-utils", "icu", "ilmbase", 
"imagemagick", "imlib2", "inetutils", "inkscape", "inputproto", 
"intel-dri", "iproute2", "iptables", "iputils", "ipw2200-fw", 
"isl", "iso-codes", "jack", "jasper", "jdk7-openjdk", "jfsutils", 
"jre7-openjdk", "jre7-openjdk-headless", "js", "json-c", "json-glib", 
"kbd", "kbproto", "kdelibs", "keyutils", "khrplatform-devel", 
"kmod", "krb5", "lame", "lapack", "lcms", "lcms2", "ldns", "leafpad", 
"less", "libarchive", "libass", "libassuan", "libasyncns", "libatasmart", 
"libavc1394", "libcaca", "libcanberra", "libcanberra-pulse", 
"libcap", "libcddb", "libcdio", "libcdio-paranoia", "libcroco", 
"libcups", "libdaemon", "libdatrie", "libdbusmenu-qt", "libdca", 
"libdrm", "libdv", "libdvbpsi", "libdvdnav", "libdvdread", "libebml", 
"libedit", "libegl", "libevent", "libexif", "libffi", "libfontenc", 
"libgbm", "libgcrypt", "libgl", "libglade", "libglapi", "libgme", 
"libgnome-keyring", "libgpg-error", "libgssglue", "libgtop", 
"libguess", "libgusb", "libice", "libid3tag", "libidl2", "libidn", 
"libiec61883", "libimobiledevice", "libiodbc", "libjpeg-turbo", 
"libkate", "libksba", "libldap", "liblqr", "libltdl", "libmad", 
"libmatroska", "libmikmod", "libmms", "libmng", "libmodplug", 
"libmowgli", "libmp4v2", "libmpc", "libmpcdec", "libmpeg2", "libnl", 
"libnotify", "libogg", "libpcap", "libpciaccess", "libpeas", 
"libpipeline", "libplist", "libpng", "libproxy", "libpulse", 
"libquvi", "libquvi-scripts", "libqzeitgeist", "libraw1394", 
"libreoffice-base", "libreoffice-calc", "libreoffice-common", 
"libreoffice-draw", "libreoffice-gnome", "libreoffice-impress", 
"libreoffice-kde4", "libreoffice-math", "libreoffice-postgresql-connector", 
"libreoffice-sdk", "libreoffice-sdk-doc", "libreoffice-tr", "libreoffice-writer", 
"librsvg", "libsamplerate", "libsasl", "libsecret", "libshout", 
"libsidplay", "libsigc++", "libsm", "libsndfile", "libsoup", 
"libsoup-gnome", "libssh2", "libtasn1", "libthai", "libtheora", 
"libtiff", "libtiger", "libtirpc", "libtool", "libtorrent-rasterbar", 
"libunique", "libupnp", "libusb-compat", "libusbx", "libutempter", 
"libva", "libva-driver-intel-g45-h264", "libvisual", "libvorbis", 
"libvpx", "libwnck", "libwnck3", "libwpd", "libwps", "libx11", 
"libxau", "libxaw", "libxcb", "libxcomposite", "libxcursor", 
"libxdamage", "libxdmcp", "libxext", "libxfce4ui", "libxfce4util", 
"libxfixes", "libxfont", "libxft", "libxi", "libxinerama", "libxkbfile", 
"libxklavier", "libxml2", "libxmu", "libxpm", "libxrandr", "libxrender", 
"libxres", "libxslt", "libxss", "libxt", "libxtst", "libxv", 
"libxvmc", "libxxf86vm", "libyaml", "licenses", "linux", "linux-api-headers", 
"linux-firmware", "logrotate", "lpsolve", "lsof", "lua", "lua51", 
"lvm2", "m4", "make", "man-db", "man-pages", "mcpp", "mdadm", 
"media-player-info", "mercurial", "mesa", "mjpegtools", "mkinitcpio", 
"mkinitcpio-busybox", "mozilla-common", "mpfr", "mpg123", "mtdev", 
"nano", "ncurses", "neon", "net-tools", "netcfg", "nettle", "notification-daemon", 
"nspr", "nss", "obex-data-server", "opencore-amr", "openexr", 
"openjpeg", "openobex", "openssh", "openssl", "opus", "orbit2", 
"orc", "p11-kit", "p7zip", "pacman", "pacman-mirrorlist", "pam", 
"pambase", "pango", "pangomm", "parted", "patch", "pavucontrol", 
"pciutils", "pcmciautils", "pcre", "perl", "perl-alien-sdl", 
"perl-capture-tiny", "perl-class-inspector", "perl-compress-bzip2", 
"perl-error", "perl-file-sharedir", "perl-file-which", "perl-ipc-system-simple", 
"perl-sdl", "perl-test-pod", "perl-tie-simple", "perl-xml-parser", 
"perl-xml-simple", "perl-yaml-syck", "phonon", "phonon-vlc", 
"pinentry", "pixman", "pkg-config", "pm-quirks", "pm-utils", 
"polkit", "polkit-gnome", "polkit-qt", "poppler", "poppler-data", 
"poppler-glib", "popt", "postgresql-libs", "ppl", "ppp", "procps-ng", 
"psmisc", "pth", "pulseaudio", "pulseaudio-alsa", "pygobject-devel", 
"pygobject2-devel", "pygtk", "pyqt-common", "python", "python-dbus-common", 
"python-pyinotify", "python2", "python2-beaker", "python2-cairo", 
"python2-dbus", "python2-distribute", "python2-docutils", "python2-gobject", 
"python2-gobject2", "python2-jinja", "python2-mako", "python2-markupsafe", 
"python2-notify", "python2-pygments", "python2-pyqt", "python2-sip", 
"python2-sphinx", "qbittorrent", "qca", "qt", "qtwebkit", "r", 
"randrproto", "raptor", "rasqal", "readline", "recode", "recordproto", 
"redland", "redland-storage-virtuoso", "reiserfsprogs", "renderproto", 
"rsync", "rtkit", "rtmpdump", "ruby", "run-parts", "sbc", "schroedinger", 
"scrnsaverproto", "sdl", "sdl_gfx", "sdl_image", "sdl_mixer", 
"sdl_net", "sdl_pango", "sdl_ttf", "sed", "sg3_utils", "shadow", 
"shared-color-profiles", "shared-desktop-ontologies", "shared-mime-info", 
"sip", "smpeg", "soprano", "sound-theme-freedesktop", "soundtouch", 
"spandsp", "speex", "sqlite", "startup-notification", "strigi", 
"sudo", "sysfsutils", "syslinux", "systemd", "systemd-sysvcompat", 
"sysvinit-tools", "taglib", "tar", "tcl", "tdb", "texinfo", "thunar", 
"thunar-volman", "tk", "totem", "totem-plparser", "traceroute", 
"ttf-dejavu", "tumbler", "tzdata", "udisks", "udisks2", "unace", 
"unixodbc", "unrar", "unzip", "upower", "usbmuxd", "usbutils", 
"util-linux", "v4l-utils", "vi", "videoproto", "vim", "vim-runtime", 
"virtuoso-base", "vlc", "vte", "vte-common", "wavpack", "webrtc-audio-processing", 
"wget", "which", "wpa_actiond", "wpa_supplicant", "x264", "xampp", 
"xbitmaps", "xcb-proto", "xcb-util", "xcb-util-keysyms", "xchat", 
"xclip", "xdg-utils", "xextproto", "xf86-input-evdev", "xf86-input-synaptics", 
"xf86-video-intel", "xf86vidmodeproto", "xfce4-appfinder", "xfce4-mixer", 
"xfce4-panel", "xfce4-power-manager", "xfce4-session", "xfce4-settings", 
"xfce4-terminal", "xfconf", "xfdesktop", "xfsprogs", "xfwm4", 
"xfwm4-themes", "xineramaproto", "xkeyboard-config", "xmlto", 
"xorg-bdftopcf", "xorg-font-util", "xorg-font-utils", "xorg-fonts-alias", 
"xorg-fonts-encodings", "xorg-fonts-misc", "xorg-iceauth", "xorg-luit", 
"xorg-mkfontdir", "xorg-mkfontscale", "xorg-server", "xorg-server-common", 
"xorg-server-utils", "xorg-sessreg", "xorg-setxkbmap", "xorg-twm", 
"xorg-xauth", "xorg-xbacklight", "xorg-xclock", "xorg-xcmsdb", 
"xorg-xgamma", "xorg-xhost", "xorg-xinit", "xorg-xinput", "xorg-xkbcomp", 
"xorg-xmodmap", "xorg-xrandr", "xorg-xrdb", "xorg-xrefresh", 
"xorg-xset", "xorg-xsetroot", "xproto", "xterm", "xvidcore", 
"xz", "zip", "zlib", "zsh", "zvbi"), class = "factor")), .Names = c("Zaman", 
"Operasyon", "Paket"), row.names = c(NA, -730L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T16:39:45.477

你必须表达你想要的*日子*；这应该可以解决问题：

```
table(factor(format(data$Zaman,"%D"))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:50:42.013

Use `cut`，它具有对使用日期的内置支持：

```
attributes(data$Zaman)$tzone <- "GMT"
table(cut(data$Zaman, "1 day"))
#
# 2013-01-18 2013-01-19 2013-01-20 2013-01-21 2013-01-22 2013-01-23 2013-01-24 2013-01-25 2013-01-26 
#        339        209         20          8         76         56          0         10         12 

table(cut(data$Zaman, "2 days"))
#
# 2013-01-18 2013-01-20 2013-01-22 2013-01-24 2013-01-26 
#        548         28        132         10         12 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T16:51:17.810

对于这些任务，我偏爱 data.table：

```
library(data.table)
dt <- as.data.table(df)
dt[,days:=format(Zaman,"%d.%m.%Y")]
dt[,.N,by=days]

         days   N
1: 18.01.2013 133
2: 19.01.2013 415
3: 20.01.2013  20
<snip> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T16:44:48.987

由于没有名为 的函数，您会收到 count 错误`count`。

但是你可以使用`count`package `plyr`：

```
 count(dat, vars = 'Zaman')
                 Zaman freq
1  2013-01-18 20:39:00   66
2  2013-01-18 20:40:00   16
3  2013-01-18 20:41:00   47
4  2013-01-18 20:52:00    1
5  2013-01-18 23:47:00    1
6  2013-01-18 23:53:00    2
7  2013-01-19 00:04:00   68
8  2013-01-19 00:05:00    9
9  2013-01-19 00:06:00    4
10 2013-01-19 00:08:00    3
11 2013-01-19 00:11:00    9
12 2013-01-19 00:14:00    1
13 2013-01-19 00:19:00   89
14 2013-01-19 00:20:00    9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T16:45:13.603

也许您只是在寻找`length`功能？

```
> aggregate(data,by=list(data$zaman),FUN=length)
              Group.1 zaman oper paket
1 2013-01-18 21:39:00     6    6     6 
```

# perl - Windows 上 Perl 中的 SVN 预提交挂钩

> ID：14549439
> 
> 赞同：2
> 
> 时间：2013-01-27T16:29:33.107
> 
> 标签：perl, svn, visualsvn-server, pre-commit-hook, pre-commit

**我正在编写 Perl 脚本来在Windows**机器上进行 SVN 预提交检查，并且我使用 VisualSVN Server。

这是代码：

**预提交.bat**

```
C:\Perl\bin\perl.exe D:\Repositories\iCP\hooks\pre-commit.pl %1 %2
exit %ERRORLEVEL% 
```

**预提交.pl**

```
#!/usr/bin/perl

use strict;
use warnings;

my $repos = $ARGV[0];
my $txn = $ARGV[1];

my $svnlook = "D:\\svnlook.exe";
my $hooks = "D:\\Repositories\\iCP\\hooks";

if(system("$svnlook log -t $txn $repos >$hooks\\res.txt"))
{
  die "Unable to finish system(): $!\n";
}

.... 
```

* * *

基本上，我希望将“svnlook log”结果重定向到 res.txt，然后我可以从这个文件中读取。

但是当我从 TortoiseSVN 提交时，perl 脚本因“**无法完成 System()：不适当的 IO 控制操作**”而死，我不知道出了什么问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:48:37.627

很可能这是一个 qoute 问题。Perl 使用 \ 作为转义序列，所以当你包含一个带有双 \ 的变量时，它将被转换为简单的 \。

尝试这个：

```
my $svnlook = "D:\\\\svnlook.exe";
my $hooks = "D:\\\\Repositories\\\\iCP\\\\hooks";

if(system("$svnlook log -t $txn $repos >$hooks\\res.txt"))
{
  die "Unable to finish system(): $!\n";
} 
```

# c - Gdb 函数入口点未知

> ID：14549440
> 
> 赞同：4
> 
> 时间：2013-01-27T16:29:33.903
> 
> 标签：c, linux, debugging, gdb

我正在使用我拥有的供应商 API，我可以设置断点并且它们运行良好，但是如果我尝试在 gdb 中调用一个函数（按其名称），它会显示“入口点地址未知。”，什么是这意味着并且有任何解决方法吗？我试过谷歌搜索，但没有发现任何有用的东西。非常感谢您的帮助。下一步我正在考虑使用 objdump 获取函数的地址，然后尝试直接使用地址调用，如果它有效的话。但我不知道该怎么做，请在这里指导我，供应商库与我自己的程序动态链接

编辑1：在执行“信息地址“函数””之后，我尝试像“调用（*“地址”）（参数）”一样调用，仍然显示相同的错误，请注意它确实知道函数地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T19:10:19.350

这是一个晦涩难懂的！

当进行低级调用时，gdb 有几个选项可以将它创建的虚拟堆栈帧放在哪里。在您的情况下，它选择“入口点” - 基本上（我认为）_start 处的内存，它执行一次，然后再也不会使用。这种选择似乎是特定于架构的。

在您的情况下， gdb 找不到入口点。如果您从未使用过“文件”命令，或者您正在调试 .o 文件而不是真正的可执行文件，则可能会发生这种情况，但它似乎也可能发生在其他一些更模糊的场景中。

# php - 如何将所有图像转换为 jpg？

> ID：14549446
> 
> 赞同：13
> 
> 时间：2013-01-27T16:30:15.010
> 
> 标签：php, image-processing

我有脚本：

```
<?php

include('db.php');
session_start();
$session_id = '1'; // User session id
$path = "uploads/";

$valid_formats = array("jpg", "png", "gif", "bmp", "jpeg");
if (isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
    $name = $_FILES['photoimg']['name'];
    $size = $_FILES['photoimg']['size'];
    if (strlen($name)) {
        list($txt, $ext) = explode(".", $name);
        if (in_array($ext, $valid_formats)) {
            if ($size < (1024 * 1024)) { // Image size max 1 MB
                $actual_image_name = time() . $session_id . "." . $ext;
                $tmp = $_FILES['photoimg']['tmp_name'];
                if (move_uploaded_file($tmp, $path . $actual_image_name)) {
                    mysql_query("UPDATE users SET profile_image='$actual_image_name' WHERE uid='$session_id'");
                    echo "<img src='uploads/" . $actual_image_name . "' class='preview'>";
                } else {
                    echo "failed";
                }
            } else {
                echo "Image file size max 1 MB";
            }
        } else {
            echo "Invalid file format..";
        }
    } else {
        echo "Please select image..!";
    }
    exit;
}

?> 
```

是否可以将所有图像（png、gif 等）转换为 100% 质量的 jpg？如果是，如何？我想允许上传 png 和 gif，但这个脚本应该将此文件转换为 jpg。用PHP可以吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-27T16:49:39.290

试试这个代码：`originalImage`是......原始图像的路径......`outputImage`足够自我解释。`Quality`是一个从 0 到 100 的数字，设置输出 jpg 质量（0 - 最差，100 - 最好）

```
function convertImage($originalImage, $outputImage, $quality)
{
    // jpg, png, gif or bmp?
    $exploded = explode('.',$originalImage);
    $ext = $exploded[count($exploded) - 1]; 

    if (preg_match('/jpg|jpeg/i',$ext))
        $imageTmp=imagecreatefromjpeg($originalImage);
    else if (preg_match('/png/i',$ext))
        $imageTmp=imagecreatefrompng($originalImage);
    else if (preg_match('/gif/i',$ext))
        $imageTmp=imagecreatefromgif($originalImage);
    else if (preg_match('/bmp/i',$ext))
        $imageTmp=imagecreatefrombmp($originalImage);
    else
        return 0;

    // quality is a value from 0 (worst) to 100 (best)
    imagejpeg($imageTmp, $outputImage, $quality);
    imagedestroy($imageTmp);

    return 1;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T16:37:30.470

尝试使用`Imagick` `setImageFormat`，对我来说它提供了最好的图像质量
[http://php.net/manual/en/imagick.setimageformat.php](http://php.net/manual/en/imagick.setimageformat.php)

```
$im = new imagick($image);

// convert to png
$im->setImageFormat('png');

//write image on server
$im->writeImage($image .".png");
$im->clear();
$im->destroy(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-23T16:45:41.110

Davide Berra 的回答很棒，所以我稍微改进了文件类型检测，使用**exif_imagetype()**而不是依赖文件扩展名：

```
/**
*   Auxiliar function to convert images to JPG
*/
function convertImage($originalImage, $outputImage, $quality) {

    switch (exif_imagetype($originalImage)) {
        case IMAGETYPE_PNG:
            $imageTmp=imagecreatefrompng($originalImage);
            break;
        case IMAGETYPE_JPEG:
            $imageTmp=imagecreatefromjpeg($originalImage);
            break;
        case IMAGETYPE_GIF:
            $imageTmp=imagecreatefromgif($originalImage);
            break;
        case IMAGETYPE_BMP:
            $imageTmp=imagecreatefrombmp($originalImage);
            break;
        // Defaults to JPG
        default:
            $imageTmp=imagecreatefromjpeg($originalImage);
            break;
    }

    // quality is a value from 0 (worst) to 100 (best)
    imagejpeg($imageTmp, $outputImage, $quality);
    imagedestroy($imageTmp);

    return 1;
} 
```

您必须启用**php_exif**扩展才能使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-11T06:45:50.550

转换`image.png`为`image.jpg`所需图像质量的小代码：

```
<?php
$image = imagecreatefrompng('image.png');
imagejpeg($image, 'image.jpg', 70); // 0 = worst / smaller file, 100 = better / bigger file 
imagedestroy($image);
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-07T13:11:52.690

对大卫的回答的一个小修复，从 BMP 转换的正确函数是“imagecreatefrom **w** bmp”而不是 imagecreatefrombmp（缺少“w”）你应该考虑到 png 可能是透明的，[这是](https://stackoverflow.com/questions/21105802/convert-image-format-png-to-jpeg-without-saving-to-disk-php)一种用白色 BG 填充它的方法（ jpeg 不能应用 alpha 数据）。

```
function convertImage($originalImage, $outputImage, $quality){
// jpg, png, gif or bmp?
$exploded = explode('.',$originalImage);
$ext = $exploded[count($exploded) - 1]; 
if (preg_match('/jpg|jpeg/i',$ext)){$imageTmp=imagecreatefromjpeg($originalImage);}
else if (preg_match('/png/i',$ext)){$imageTmp=imagecreatefrompng($originalImage);}
else if (preg_match('/gif/i',$ext)){$imageTmp=imagecreatefromgif($originalImage);}
else if (preg_match('/bmp/i',$ext)){$imageTmp=imagecreatefromwbmp($originalImage);}
else    {    return false;}
// quality is a value from 0 (worst) to 100 (best)
imagejpeg($imageTmp, $outputImage, $quality);
imagedestroy($imageTmp);
return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-26T16:43:56.370

来自 PhpTools：

```
/**
 * @param string $source (accepted jpg, gif & png filenames)
 * @param string $destination
 * @param int $quality [0-100]
 * @throws \Exception
 */
public function convertToJpeg($source, $destination, $quality = 100) {

    if ($quality < 0 || $quality > 100) {
        throw new \Exception("Param 'quality' out of range.");
    }

    if (!file_exists($source)) {
        throw new \Exception("Image file not found.");
    }

    $ext = pathinfo($source, PATHINFO_EXTENSION);

    if (preg_match('/jpg|jpeg/i', $ext)) {
        $image = imagecreatefromjpeg($source);
    } else if (preg_match('/png/i', $ext)) {
        $image = imagecreatefrompng($source);
    } else if (preg_match('/gif/i', $ext)) {
        $image = imagecreatefromgif($source);
    } else {
        throw new \Exception("Image isn't recognized.");
    }

    $result = imagejpeg($image, $destination, $quality);

    if (!$result) {
        throw new \Exception("Saving to file exception.");
    }

    imagedestroy($image);
} 
```

# javascript - 如何打印 keyup 元素值？

> ID：14549450
> 
> 赞同：0
> 
> 时间：2013-01-27T16:30:38.560
> 
> 标签：javascript, jquery, closures

我正在使用以下 keyup 事件处理程序。

```
<script type="text/javascript">
  $('.someClass').on('keyup', function(e){
    console.log($(this).val());
  });
</script> 
```

在编写 keyup 事件并输入“qwe”时。
实际结果：“qwe” 期望结果：
“q”
“qw”
“qwe”

我在这里简化了它，但我也尝试过关闭，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:42:32.893

我发现了一个棘手的（丑陋的？）解决方案，即使您快速键入也可以：

```
var prevVal = '';
$('.someClass').on('keypress', function (e) {
    prevVal += String.fromCharCode(e.which);
    console.log(prevVal);
}).on('keyup', function() { prevVal = $(this).val() }); 
```

见这里：http: [//jsfiddle.net/FZHZJ/1/](http://jsfiddle.net/FZHZJ/1/)

请注意，它不会在修饰键事件（即退格键、移位、箭头）上打印 - 如果您也想要，请回复，我会尝试修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:55:58.660

这是我最后使用的solotion。
它在按键时将值推送到数组，并在按键时弹出它。
（堆栈与反向使用..）

```
var stackValues = new Array();
$('.someClass').on('keypress', function (e) {
   prevVal = $(this).val();
   prevVal += String.fromCharCode(e.which);
   stackValues.push(prevVal);
}).on('keyup', function() { 
   var value = (stackValues.reverse()).pop();
   stackValues.reverse();
   console.log('value:', value);
}); 
```

# python - Django-social 身份验证 KeyError

> ID：14549451
> 
> 赞同：3
> 
> 时间：2013-01-27T16:30:39.907
> 
> 标签：python, django, google-app-engine, django-socialauth

当我尝试注册 twitter 帐户而 facebook 帐户工作正常时，我的部分管道中出现 KeyError。这很奇怪，因为同样的功能在 facebook 用户中运行良好。

错误信息如下：

/myapp/ 'partial_pipeline' 处的 KeyError

在'myapp_auth_form'，我的代码是：

设置.py

```
SOCIAL_AUTH_ENABLED_BACKENDS=('facebook','twitter',)
SOCIAL_AUTH_DEFAULT_USERNAME='new_social_auth_user'

...

TWITTER_CONSUMER_KEY = 'mytwitterconsumerkey'
TWITTER_CONSUMER_SECRET = 'mytwitterconsumersecret'

LOGIN_URL = '/login/'
LOGIN_REDIRECT_URL = '/'
LOGIN_ERROR_URL = '/login-error/'

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'myapp.pipeline.has_email',
    'myapp.pipeline.check_by_email',
    'myapp.pipeline.redirect_to_form',
    'myapp.pipeline.get_username',
    'myapp.pipeline.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details'
) 
```

myapp.pipeline

```
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse

from social_auth.models import UserSocialAuth
from registration.models import UserProfile

def has_email(details, user=None, *args, **kwargs):
    """Check if email is provided and ask for it otherwise
    """
    if user:
        return None

    email = details.get('email')
    if email:
        kwargs['request'].session['saved_email'] = email
    else:
        session = kwargs['request'].session
        email = session.get('saved_email')

    if not email:
        return HttpResponseRedirect(reverse('myapp_email_form'))

def check_by_email(details, user=None, user_exists=UserSocialAuth.simple_user_exists, *args, **kwargs):
    """Check if there's user with same email address and ask for its password to associate
    """
    if user:
        return None

    session = kwargs['request'].session

    email = session.get('saved_email')

    if email:
        if user_exists(username=email):
            return HttpResponseRedirect(reverse('myapp_auth_form'))

def redirect_to_form(*args, **kwargs):
    """Redirect to get password if user is None
    """
    session = kwargs['request'].session
    if not session.get('saved_password') and not session.get('saved_nickname') and not session.get('saved_sex') and kwargs.get('user') is None:
        return HttpResponseRedirect(reverse('social_auth_form'))

def get_username(details, user=None, *args, **kwargs):
    """Return an username for new user. Return current user username
    if user was given.
    Returns email address since myapp uses email for username
    """
    if user:
        return {'username': user.username}

    username = details.get('email') or ''

    return {'username': username}

def create_user(backend, details, response, uid, username, user=None, *args, **kwargs):
    """Create user and user profile. Depends on get_username pipeline."""
    if user:
        return {'user': user}
    if not username:
        return None

    request = kwargs['request']

    password = request.session.get('saved_password') or ''
    user = UserSocialAuth.create_user(username=username, email=username, password=password)

    nickname = request.session.get('saved_nickname') or ''
    sex = request.session.get('saved_sex') or 'F'
    profile = UserProfile.objects.create(user = user, nickname = nickname, sex = sex)

    referee_nickname = request.session.get('saved_referee') or False
    # if there was a recommender
    if referee_nickname:
        try:
            referee_profile = UserProfile.objects.get(nickname=referee_nickname)
            profile.referee = referee_profile.user
            profile.save()
        except UserProfile.DoesNotExist:
            pass

    return {
        'user': user,
        'is_new': True
    } 
```

视图.py

```
from social_auth.utils import setting
from django.contrib.auth import authenticate, login

def myapp_email_form(request):
    # if user is logged in already, redirect the user to home
    if request.user.is_authenticated():
        if request.GET.get('mobile', False):
            return HttpResponseRedirect(reverse('m_home'))
        return HttpResponseRedirect(reverse('home'))
    """ If email is unprovided, ask for it
    """
    if request.method == 'POST':
        form = EmailForm(request.POST)

        if form.is_valid():
            email = form.cleaned_data['email']

            name = setting('SOCIAL_AUTH_PARTIAL_PIPELINE_KEY', 'partial_pipeline')
            request.session['saved_email'] = email
            backend = request.session[name]['backend']
            return redirect('socialauth_complete', backend=backend)
    else:
        form = EmailForm()
        email = request.session.get('saved_email') or ''

    variables = RequestContext(request, {
        'form': form,
        'email': email,
    })

    if request.is_mobile or request.GET.get('mobile', False):
        return render_to_response('mobile/registration/social/email_form.html', variables, context_instance=RequestContext(request))

    return render_to_response('.../email_form.html', variables, context_instance=RequestContext(request))

def myapp_auth_form(request):
    # if user is logged in already, redirect the user to home
    if request.user.is_authenticated():
        if request.GET.get('mobile', False):
            return HttpResponseRedirect(reverse('m_home'))
        return HttpResponseRedirect(reverse('home'))
    """ If user's email is already registered to myapp, ask user for its password
    """
    if request.method == 'POST':
        form = LoginForm(request.POST)

        if form.is_valid():
            email = form.cleaned_data['username']
            user = authenticate(username=email, password=form.cleaned_data['password'])

            if user is not None:
                if user.is_active:
                    login(request, user)

                    name = setting('SOCIAL_AUTH_PARTIAL_PIPELINE_KEY', 'partial_pipeline')
                    request.session['saved_user'] = user
                    ############################################
                    backend = request.session[name]['backend'] #<- I'm getting the KeyError at this point
                    ############################################
                    return redirect('socialauth_complete', backend=backend)
                else:
                    return HttpResponseRedirect(reverse('inactive_user'))
            else:
                form.non_field_errors = _('A user with such email and password does not exist.')
    else:
        form = LoginForm()
        email = request.session.get('saved_email') or ''

    variables = RequestContext(request, {
        'form': form,
        'email': email,
    })

    if request.is_mobile or request.GET.get('mobile', False):
        return render_to_response('mobile/registration/social/auth_form.html', variables, context_instance=RequestContext(request))

    return render_to_response('.../auth_form.html', variables, context_instance=RequestContext(request))

def social_auth_form(request):
    # if user is logged in already, redirect the user to home
    if request.user.is_authenticated():
        if request.GET.get('mobile', False):
            return HttpResponseRedirect(reverse('m_home'))
        return HttpResponseRedirect(reverse('home'))
    """ Remedy form taking missing information during social authentication
    """
    nickname = ''
    sex = 'F'

    if request.method == 'POST':
        form = SocialRegistrationForm(request.POST)

        if form.is_valid():
            nickname = form.cleaned_data['nickname']
            sex = form.cleaned_data['sex']

            name = setting('SOCIAL_AUTH_PARTIAL_PIPELINE_KEY', 'partial_pipeline')
            request.session['saved_nickname'] = nickname
            request.session['saved_sex'] = sex
            request.session['saved_password'] = form.cleaned_data['password1']
            backend = request.session[name]['backend']
            return redirect('socialauth_complete', backend=backend)
    else:
        form = SocialRegistrationForm()

        nickname = request.session.get('saved_username') or ''
        sex = request.session.get('saved_gender') or 'F'

        if sex == 'male':
            sex = 'M'
        elif sex == 'female':
            sex = 'F'

    variables = RequestContext(request, {
        'form': form,
        'nickname': nickname,
        'sex': sex,
    })

    if request.is_mobile or request.GET.get('mobile', False):
        return render_to_response('mobile/registration/social/social_form.html', variables, context_instance=RequestContext(request))

    return render_to_response('.../auth_form.html', variables, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T20:41:47.717

您需要`'social_auth.backends.pipeline.misc.save_status_to_session'`在每个发出重定向并停止进程的方法之前添加。它适用于 Facebook，因为 Facebook 会公开电子邮件地址，但 Twitter 不会。因此，在执行重定向的任何条目之前添加该方法，或者在执行重定向之前在管道代码中调用它。

（只需发布评论作为答案，以便可以选择）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:22:00.963

您收到以下错误，因为您尝试使用 this 访问会话名称`request.session[name]`。假设该格式用于存储会话。为了解决这个问题，

```
name = setting('SOCIAL_AUTH_PARTIAL_PIPELINE_KEY', 'partial_pipeline')
request.session['saved_user'] = user
############################################
request.session['name'] = name 
backend = request.session.get('name') // this is the session format in getting the data
############################################
return redirect('socialauth_complete', backend=backend) 
```

# mysql - 多连接中的 SQL 限制

> ID：14549452
> 
> 赞同：0
> 
> 时间：2013-01-27T16:31:03.820
> 
> 标签：mysql, sql, join, left-join

我有一个很大的查询，在我网站的一个页面中有很多内部连接。我想申请一些左外连接限制 1 但如果我把它放到 sql 中会给我错误。

这是我的查询的一小部分不是全部，这个查询只是一部分并且ISN'T FINISH：

```
SELECT * FROM products 
               LEFT OUTER JOIN  (origins 
                        LEFT OUTER JOIN  origin_aliases ON origin_aliases.origin_id = origins.id 
                        AND origin_aliases.language = '$lang'
                        LEFT OUTER JOIN  (diets LEFT OUTER JOIN  diet_aliases ON diet_aliases.diet_id = diets.id AND diet_aliases.language = '$lang') 
                        ON origins.diet_id = diets.id) 
                ON products.origin_id = origins.id
                LEFT OUTER JOIN  (product_aliases 
                        LEFT OUTER JOIN  (users as users1
                            LEFT OUTER JOIN  profiles as profiles1 ON profiles1.user_id = users1.id
                            LEFT OUTER JOIN  user_options as user_options1 ON user_options1.user_id = users1.id 
                            LEFT OUTER JOIN  avatars as avatars1 ON avatars1.user_id = users1.id
                        ) 
                        ON  product_aliases.user_id =users1.id
                        LEFT OUTER JOIN  (users as users2
                            LEFT OUTER JOIN  profiles as profiles2 ON profiles2.user_id = users2.id
                            LEFT OUTER JOIN  user_options as user_options2 ON user_options2.user_id = users2.id
                            LEFT OUTER JOIN  avatars as avatars2 ON avatars2.user_id = users2.id 
                        )  
                        ON  product_aliases.edit_user_id = users2.id)
                ON product_aliases.product_id = products.id 
```

......

例如，我想在原点的左外连接中应用限制 1 `ON 'products.origin_id'='origins.id'`是可能的吗？我怎样才能做到这一点？我试图在条件限制 1 之后放置，但给我一个错误

> 语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:35:39.500

您可以通过使用子查询`LIMIT`在 a中使用：`JOIN`

```
... LEFT JOIN (SELECT column1, column2 FROM table LIMIT 2) ON ... 
```

此外，如评论中所述，请勿在包含表的列名周围使用单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T18:40:45.220

如所写，您的示例已满或有错误。您的派生表没有`SELECT`子句，您引用了表和列引用，并且不清楚**origins**和**origin_aliases**等名称是表还是别名。这些是您的语法错误。

更正这些后，您可以将`LIMIT`表达式添加到整个查询或任何派生表。这是我最好的猜测：

```
SELECT * 
FROM products 
LEFT OUTER JOIN ( 
   select *
   from   origins 
   LEFT OUTER JOIN origin_aliases 
   ON     origin_aliases.origin_id = origins.id 
      AND origin_aliases.language = '$lang' 
   LEFT OUTER JOIN ( 
      select *
      from   diets 
      LEFT OUTER JOIN  diet_aliases 
      ON     diet_aliases.diet_id = diets.id 
         AND diet_aliases.language = '$lang'
      ) d
   ON origins.diet_id=d.id

   LIMIT 1
   ) a
ON products.origin_id=a.id 
```

我选择使用两个表别名（**a**和**b**）。我假设**origins**、**origin_aliases**和**diets**是表格。请注意，您不应该使用`SELECT *`; 从每个派生表以及主子`SELECT`句中提供您想要的列名。

# python - Django 1.3 及更高版本中已弃用的 redirect_to 的基于类的视图替代方案

> ID：14549453
> 
> 赞同：1
> 
> 时间：2013-01-27T16:31:11.327
> 
> 标签：python, django, django-views

当我尝试使用时，`django.views.generic.simple.redirect_to`我会收到弃用通知。`redirect_to`从 Django 1.3 开始，它似乎已被弃用（请参阅文档中的第一个注释： [https](https://docs.djangoproject.com/en/1.4/ref/generic-views/) ://docs.djangoproject.com/en/1.4/ref/generic-views/ ）。

以前我可以这样做（在本例中，我将 userena 的注册页面重定向到主页）：

```
from django.views.generic.simple import redirect_to

url(r'^accounts/signup/$',
    redirect_to, {'url':'/', 'permanent':False},
    name='userena_signup'), 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T16:31:11.327

您将使用`django.views.generic.RedirectView`基于类的视图作为替代方案。

```
from django.views.generic import RedirectView

url(r'^accounts/signup/$',
    RedirectView.as_view(url='/', permanent=False),
    name='userena_signup'), 
```

大多数基于通用方法的视图可以替换为[基于通用类的视图](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#generic-views)。

# java - 基准测试硬盘

> ID：14549456
> 
> 赞同：1
> 
> 时间：2013-01-27T15:34:58.597
> 
> 标签：java, io, benchmarking

我正在尝试对我的硬盘进行基准测试，并找到以 Mb/s 为单位的吞吐量和以毫秒为单位的延迟。这是我的代码。

```
public class OneMB implements Timer {
public static void main(String a[]) throws IOException {
    OneMB oneMB = new OneMB();
    oneMB.process();

}
public void process() throws IOException{
    RandomAccessFile randomAccessFile=null;
    try{            
        File file=new File("oneMByte.txt");
        byte[] b=new byte[1024];
        randomAccessFile=new RandomAccessFile(file, "rw");
        randomAccessFile.setLength(1024*1024*10);
        long endLatency=0;
        int i=0;
        long startWrite = this.getTimer();
        randomAccessFile.writeBoolean(true);
        endLatency=this.getTimer();                 
        for (i = 0; i < 1024*10*1024-1; i++) {
            randomAccessFile.writeBoolean(true); //Writes a boolean to the file as a one-byte value.
        }
        long endWrite = this.getTimer();
        randomAccessFile.seek(0);
        randomAccessFile.readFully(b);
        long endRead=this.getTimer();
        double timeTaken=(endRead-startWrite)/1000000000.0;
        double data=10.0;
        double throughput=data/timeTaken;
        double latency=(endLatency-startWrite)/1000000.0;//time for the reception of 1 byte
        System.out.println(timeTaken);
        System.out.println(data);
        System.out.println("Throughput="+throughput+" Mb/s");
        System.out.println("Latency="+latency+" ms");
        randomAccessFile.close();
    }
    catch (Exception e) {
        e.printStackTrace();
        randomAccessFile.close();
    }
}

@Override
public long getTimer() {
    // TODO Auto-generated method stub
    return System.nanoTime();
}
} 
```

我得到的输出为

```
56.065550577
10.0
Throughput=0.17836264688538242 Mb/s
Latency=0.057668 ms 
```

我有一台速度相当快的电脑，1TB 硬盘 @ 5400 Rpm，Intel i7 四核 @2.1Ghz，8GB ddr 3 Ram。有人可以告诉我吞吐量是否会那么低，还是我使用了错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:56:50.450

这个数字对我来说似乎是正确的。您正在进行大量的系统调用。178K 系统调用/秒对于 2.1 GB i7 来说是正确的。在 3.5 GHz I7 上，您每秒可以获得大约 300K 的系统调用。

第一次运行一个方法时，它必须被加载，这会减慢它的速度。尽管在这个阶段它没有编译为本机代码，但还是需要做一些工作，而且 57 微秒的延迟对于第一次调用来说似乎是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:56:58.343

我敢肯定那里有*很多*磁盘基准测试......谷歌提供了很多链接。查看面向基准测试的网站，他们可能会发布他们的工具以使结果可重复。使用它们，以便您可以与其他地方获得的结果进行比较。除非您有兴趣对一些非常具体的特殊情况进行基准测试，否则就是这样。在这种情况下，您最好测量您的案例的性能，包括整个堆栈：程序、编译器、操作系统和硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T22:19:47.013

只要您在您正在测试的所有 HD 或平台上使用相同的代码，对我来说似乎是合理的。我确实认为，对于较大的顺序写入测试，您可能想尝试一次写入几个字节而不是标志，这样可以更清楚地解释正在写入的数据量。

这是我在 java 中编写的用于对磁盘 IO 进行基准测试的实用程序： [https](https://sourceforge.net/projects/jdiskmark/) : //sourceforge.net/projects/jdiskmark/ 如果我可以像您的代码一样添加延迟检查会很好，但它在带宽方面做得很好。您可以在[gitlab](https://gitlab.com/jamesmarkchan/jDiskMark/)上查看代码。

# android - 以编程方式 HTTP 请求 Android

> ID：14549460
> 
> 赞同：0
> 
> 时间：2013-01-27T16:31:48.670
> 
> 标签：android, http, request

我想用这种格式发出http post请求

```
{
  "Request":{
     "Data":{
      "RMID":"0910403545",
      "QID":"151",
      "RC":"5010",
      "Alg":"IMEI",
      "AlgID":"987654321",
      "IPD":"1223331",
      "Now":"27-01-2013"
  },
     "Signature":"5a185c480d11ebd39675977e40af34fe4a0121aa"
  }
} 
```

我已经在我的android应用程序中尝试过，这里的代码..

```
AsyncHttpClient client = new AsyncHttpClient();
RequestParams params = new RequestParams();
JSONObject object = new JSONObject();
object.put("RMID", "0910403545");
object.put("QID", "151");
object.put("RC", "5010");
object.put("Alg", "IMEI");
object.put("AlgID", "987654321");
object.put("IPD", "1223331");
object.put("Now", "27-01-2013");
params.put("Data", object.toString());
params.put("Signature", "5a185c480d11ebd39675977e40af34fe4a0121aa");
client.post(link, params, new AsyncHttpResponseHandler(){
    @Override
    public void onSuccess(String response) {
    // TODO Auto-generated method stub
        Log.d("XXX", response);
    }

    @Override
    public void onFailure(Throwable error, String response) {
        // TODO Auto-generated method stub
        Log.d("XXX", response);
    }
}); 
```

反应不是我所期望的。如果我尝试使用 javascript，情况会有所不同。

# html - Adobe Dreamweaver - 如何“移动”图像

> ID：14549461
> 
> 赞同：0
> 
> 时间：2013-01-27T16:31:50.420
> 
> 标签：html, move, image, dreamweaver

Adobe Dreamweaver - 如何“移动”图像

我正在使用 HTML，并且要移动三张图片，现在看起来像这样：http: [//jonathangurebo.tumblr.com/post/41614799078](http://jonathangurebo.tumblr.com/post/41614799078)

如何让它变得更好。我希望它看起来像这样：http: [//jonathangurebo.tumblr.com/post/41614824708](http://jonathangurebo.tumblr.com/post/41614824708)

我是怎么做的？我是 Dreamweaver 的初学者。

我的 HTML 代码如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Jonathan Gurebo</title>
<style type="text/css">
<!--
body {
    background-color: #191919;
}
-->
</style></head>

<body>
<center>
  <p><img src="Pictures/Jonathan Gurebo.png" width="405" height="76" />
  </p>
  <p><img src="Pictures/Apps.png" width="128" height="86" />f<img     src="Pictures/Contact.png" width="194" height="72" /></p>
  <p>&nbsp;</p>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T17:06:57.507

正如 hunzaboy 所提到的，为这些图像添加一个类和浮动可能是实现所需效果的最快方法。

但是，我真正推荐的可能是购买一本书，例如[HTML & CSS: Design and Build Web Sites](http://www.amazon.co.uk/dp/1118008189/ref=cm_sw_r_tw_dp_N5vbrb0V1R8K7)

尤其是那本很棒的书，它将帮助您真正了解 HTML 和 CSS 的基础知识以及在构建网站时使用的良好实践。尽管 Dreamweaver 作为编辑器很不错，但当您只是初学者时，您可能想了解更多关于如何编码而不是使用可视化编辑器的信息。

除了学习如何为自己的利益编写代码外，Dreamweaver 的视觉视图并不总是使用最佳标准 - 例如，它`<center>`在图像中添加标签并添加宽度和高度，而这应该使用 CSS 来实现 -这是在视觉上设计您的网站的方式。

如果您宁愿在线学习而不是通过书本学习，您也可以尝试[Treehouse](http://www.teamtreehouse.com)或[在 Tuts+ 上学习 CSS](http://learncss.tutsplus.com/) - 两者都是非常棒的、负担得起（或免费）的在线课程，它们应该可以帮助您更好地了解自己是什么'正在尝试做。

希望有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:36:28.710

简单的方法是添加一个类。并左右浮动图像

.classname {浮动：左；显示：块；}

或者另一种简单的方法是创建 3 个 div（如果您想在两个图像之间保留任何文本）并相应地浮动它们。

如果您需要更多说明，请告诉我。

另外，由于您是 html 新手，所以我建议您通过框架开始学习。[http://getbootstrap.com](http://getbootstrap.com)是一个很好的框架，可以在坚实的基础上启动您的网站。

# c# - 当两者都需要特定模型时使用带有布局的视图

> ID：14549462
> 
> 赞同：0
> 
> 时间：2013-01-27T16:32:16.217
> 
> 标签：c#, asp.net-mvc, razor, model

我正在用 Razor 编写一个 ASP.Net MVC 应用程序。

假设我有 HomeController 和一些视图。

```
 1\. View1
 2\. View2
 3\. View3 
```

所有这些视图都使用公共`_MyLayout`文件，它应该如下所示： ![](../Images/dc1ae4526f1f1f1d753e45cfc587a757.png)

单击链接时，将按方法呈现视图`RenderBody()`。每个视图都是强类型的：它需要自己的模型。

一切都很好，直到我决定将特殊模型添加到 _MyLayout 视图。

但现在我得到错误

```
The model item passed into the dictionary is of type 'TestUp.Models.UserModels.PendingTestsModel', but this dictionary requires a model item of type 'TestUp.Models.UserModels.UserNavigationModel'. 
```

这是控制器代码

```
public ActionResult View1()
    {
        ModelForView1 model = new ModelForView1();
        return View(model);
    }
public ActionResult View2()
    {
        ModelForView2 model = new ModelForView2();
        return View(model);
    }
public ActionResult View3()
    {
        ModelForView3 model = new ModelForView3();
        return View(model);
    } 
```

简而言之，如果布局视图不需要模型，则调用视图的特定方法，创建模型，传递给视图，一切正常。但是现在布局也需要模型，所以它崩溃了。

问题是：我如何优雅地解决这个问题？

所需的工作流程是：

1.  请求 View1
2.  调用此视图的控制器中的方法，创建模型实例，传递给视图
3.  调用一些布局方法，创建布局模型，传递给布局。

有没有可能让事情像这样工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:38:01.340

创建一个基本模型类型并让您的特定视图模型扩展它。此基本模型可以具有类型的属性`UserNavigationModel`。布局可以接受基本模型并将新属性用作导航菜单的模型。

```
public abstract class ModelBase
{
    public UserNavigationModel NavigationModel { get; set; }
}

public class ModelForView1 : ModelBase { ... }
public class ModelForView2 : ModelBase { ... }
public class ModelForView3 : ModelBase { ... } 
```

视图1：

```
@model ModelForView1 
```

布局：

`@model ModelBase`
`@* use Model.NavigationModel for nav bar *@`

# c# - Unity C#空引用异常

> ID：14549465
> 
> 赞同：2
> 
> 时间：2013-01-27T16:32:25.490
> 
> 标签：c#, unity3d

我正在尝试使用 C# 代码从`int`变量中获取数据。`Unity`下面是`C#`我用来获取`int`.

```
using UnityEngine;
using System.Collections;

public class endGameMessage : MonoBehaviour {
public static int score2;

void Start () {
    GameObject thePlayer = GameObject.FindWithTag("Player");
    gameScript game = thePlayer.GetComponent<gameScript>();
    score2 = game.score;
}

// Update is called once per frame
void Update () {

    Debug.Log (score2);

}
} 
```

下面是我试图从中提取数据的另一个脚本的代码。

```
using UnityEngine;
using System.Collections;

public class gameScript : MonoBehaviour {
//score
public int score = 0;
void OnTriggerEnter(Collider other) {
    if(other.gameObject.tag =="hammer"){
        GameObject.FindGameObjectWithTag("pickUpMessage").guiText.text = ("Picked Up A Hammer");    

        Destroy(other.gameObject);
        Debug.Log("collision detected hammer");
        audio.PlayOneShot(gotHit);
        score = score+10;
    }
     }
} 
```

我可以得到`int`另一个脚本的值，但它总是 0，即使它`int`本来是 10。

我的问题是如何在脚本中保持价值？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:42:06.247

尝试这个

```
public static int score2
{
    get
    {
        return GameObject.FindWithTag("Player").GetComponent<gameScript>().score;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T14:21:51.057

你有很多可能性。

**第一个是将您的 Score 设置为 gameScript 的静态参数**。

*   所以你可以像这样在任何地方访问它：

    ```
    int myScore = gameScript.Score ; 
    ```

*   声明应该是：

    ```
    public static int score; 
    ```

**如果你想从不同的脚本中保存很多不同的值，第二种可能性要好得多。在这种情况下，您需要定义一个 gameContext 单例。**

如果你不知道这是什么，你应该看看 C# 中的单例：[ [https://msdn.microsoft.com/en-us/library/ff650316.aspx]](https://msdn.microsoft.com/en-us/library/ff650316.aspx])

Singleton 将允许您拥有 gameContext 的单个实例。在您的情况下，您的单例将具有 Score 属性。您将能够从任何场景和任何脚本中获得价值。

这是迄今为止最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:30:42.470

`score2`在开始时读取一次，然后再也不读取。`int`是 C# 中的整数类型，因此[按值](http://msdn.microsoft.com/en-us/library/vstudio/bfft1t3c.aspx)传递，即它接收副本。有几种方法可以解决这个问题。

最简单的解决方案是`gameScript.score`直接访问 - 它为每个人提供读/写访问权限。要封装它，您可以选择定义一个[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)。

更好的方法可能是定义一个`GameStatus`包含所有相关事物的新类。例如，这可以实现为[单](http://msdn.microsoft.com/en-us/library/ff650316.aspx)例。

# c# - Listbox.SelectionChange 没有为项目触发

> ID：14549467
> 
> 赞同：0
> 
> 时间：2013-01-27T16:32:31.097
> 
> 标签：c#, wpf, listbox

我有一个列表框，其中填充了使用 Linq 的 SQLCE 数据库中的 3 个项目。出于某种原因，当我选择位于索引 1 的项目时，它会在列表框中突出显示，但不会触发选择更改。如果我选择任何其他项目（索引 0 或 2），则选择会正常触发。

有任何想法吗？

我已经检查了数据库中的项目，我看不出它有什么问题。

编辑：请求的代码

Xaml

```
 <ListBox x:Name="lbxPlans" Grid.Row="5" Grid.ColumnSpan="2" Margin="12" ItemsSource="{Binding}" ItemTemplate="{DynamicResource PlanTemplate}" SelectionChanged="lbxPlans_SelectionChanged">

  <DataTemplate x:Key="PlanTemplate">
        <Grid Margin="0,3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="Run No." VerticalAlignment="Top"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="{Binding RunNumber}" VerticalAlignment="Top" Grid.Column="1" Margin="6,0"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="Week Day:" VerticalAlignment="Top" Grid.Column="2"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="{Binding DayOfWeek}" VerticalAlignment="Top" Grid.Column="3" Margin="6,0"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="Week Number:" VerticalAlignment="Top" Grid.Column="4"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="{Binding WeekNumber}" VerticalAlignment="Top" Grid.Column="5" Margin="6,0"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="Desc:" VerticalAlignment="Top" Grid.Column="6"/>
            <TextBlock HorizontalAlignment="Left" Height="Auto" TextWrapping="Wrap" Text="{Binding Description}" VerticalAlignment="Top" Grid.Column="7" Margin="6,0"/>
        </Grid>
    </DataTemplate> 
```

和

```
 private void GetProgrammes()
    {
        var pro = from p in Globals.Instance.Database.Programme
                  select p;

        lbxPlans.DataContext = null;
        lbxPlans.DataContext = pro;
    }

private void lbxPlans_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {
        // TODO: Add event handler implementation here.

        if (lbxPlans.SelectedIndex != 1)
        {
            MessageBox.Show("Selection Changed!");
        }
    } 
```

编辑 2：根据请求，我不是`pro`从数据库项目创建并将其分配给 Listbox DataContext，而是手动创建它们以消除数据库问题，但问题仍然存在。然后我通过创建一个`List<string>`具有 3 个值的值并将其分配给列表框来运行一个实验。问题还在！那么这现在是列表框本身的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:48:53.973

lbxPlans.SelectedIndex != 1

你没有在调试器中跟踪这个？

# maven - 通过 hudson 将声纳参数传递给 maven

> ID：14549469
> 
> 赞同：0
> 
> 时间：2013-01-27T16:32:40.777
> 
> 标签：maven, hudson, sonarqube

已经使用 sonar hudson 和 maven 设置了代码分析我的计划是每天运行分析，所以我试图将 Hudson 中的参数传递为：

```
clean install sonar:sonar -Dsonar.dynamicAnalysis=reuseReports **-Dsonar.projectDate=yyyy-     MM-dd** 
```

而不是每天手动输入/更改日期 - 有没有办法让它成为每天自动更改的参数？谢谢萨蒂什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:36:17.597

您在寻找执行日期/时间吗？您可以尝试使用 -Dsonar.projectDate=${BUILD_ID} 作为参数吗？查看 localhost:8080/env-vars.html 以获取可以传递给声纳插件的可用参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:37:15.123

您不需要使用“-Dsonar.projectDate”：它仅在您想重播过去的某些分析时使用。因此，您可以删除此参数，Sonar 将采用当前日期为您的分析添加时间戳。

此外，考虑使用 Sonar Hudson/Jenkins 插件而不是直接调用 Maven，这将对您有所帮助：[http ://docs.codehaus.org/pages/viewpage.action?pageId=116359341](http://docs.codehaus.org/pages/viewpage.action?pageId=116359341)

# ios - UILabel 自动调整大小并在必要时添加滚动条？

> ID：14549470
> 
> 赞同：1
> 
> 时间：2013-01-27T16:32:44.573
> 
> 标签：ios, uilabel

我在这里四处寻找答案，但没有找到真正帮助我的答案。将我引导到我可能错过的正确答案也非常感谢。

我有一个以最简单的方式定义的标签：

```
 IBOutlet UILabel *eventIDLabel;
    IBOutlet UILabel *eventTitleLabel;
    IBOutlet UILabel *eventDescriptionLabel; 
```

现在描述标签的内容可能会有所不同。可能有 1 行或多行。我希望标签自动调整大小。现在我还希望如果比当前屏幕显示的行多，用户可以向下滚动并查看标签的全部内容。

可能是非常微不足道的问题，但我真的很新，希望你们能提供帮助。

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:36:19.123

您可以使用 UITextView。当输入的文本太长时，UITextView 会自动滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:34:47.990

您可以使用`[myLabel sizeToFit]`

[您还可以在此处](https://stackoverflow.com/questions/1054558/vertically-align-text-within-a-uilabel)阅读有关它的更多信息

此外，如果您知道它会相对较长，您可以考虑使用 TextView 它将提供文本滚动

希望我有所帮助

# symfony - Symfony2 依赖注入

> ID：14549471
> 
> 赞同：0
> 
> 时间：2013-01-27T16:32:50.090
> 
> 标签：symfony, propel

我想做以下事情：

通过依赖注入在包内添加推进连接。所以每个包都可以有一个连接，在加载时将被合并在一起。

这可能吗？

我已经通过

```
- { resource: @XXXX/Resources/config/databases.yml }
- { resource: @XXXXX/Resources/config/databases.yml } 
```

但想通过依赖注入来做到这一点，因为我认为这将是最佳实践。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:29:18.400

你的问题对我来说并不完全清楚。我只理解在你的包中加载额外的配置文件的部分。

捆绑配置可以通过 DIC 扩展自动加载。这就是`Resources/config/services.xml`文件发生的情况。

阅读有关[加载外部配置资源](http://symfony.com/doc/current/cookbook/bundles/extension.html#loading-external-configuration-resources)的更多信息。

# javascript - RegExp javascript替换所有不起作用

> ID：14549473
> 
> 赞同：1
> 
> 时间：2013-01-27T16:32:52.397
> 
> 标签：javascript, regex, replace

我对这段代码感到困惑

```
<!DOCTYPE html>
<html>

    <body>
        <p>Click the button to replace "Microsoft" with "W3Schools" in the paragraph
            below:</p>
        <p id="demo">Microsoft Visit Microsoft! Microsoft visit visit microsoft Visit Visit
            Visit Visit</p>
        <button onclick="myFunction()">Try it</button>
        <script>
            function myFunction() {
                document.getElementById("demo").innerHTML = document.getElementById("demo").innerHTML.replace(/ Visit |Microsoft/gi, ' test ');
            }
        </script>
    </body>

</html> 
```

当点击按钮时有些文字没有改变，如果再次点击会改变

第一次点击后

```
test test test ! test test visit test test Visit test Visit 
```

第二次点击后

```
test test test ! test test test test test test test test 
```

为什么有些词第一次没有改变？真挚地

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:39:19.300

发生这种情况是因为在您的`#demo`内容中，两个未替换的`Visit`单词后面没有空格（第一个有新行，第二个有行尾）。

为了修复它，您可以使用`\b`as [word boundary](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-word-boundary) : `/\bVisit\b|Microsoft/gi`。

**演示：http:** [//jsfiddle.net/dyz5w/](http://jsfiddle.net/dyz5w/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:46:23.620

发生这种情况是因为您的正则表达式中的空格`Visit`：

```
 / Visit / 
```

这需要在“访问”一词的两侧留一个空格。正则表达式匹配不重叠，所以如果你有一个像

```
 Visit Visit Visit Visit 
```

....那么每个“访问”实例之间的两个空格只能属于一个匹配项。因此，您的正则表达式匹配将如下所示（`{`用于显示匹配的开始`}`位置和结束位置）：

```
 { Visit }Visit{ Visit }Visit 
```

尝试在“访问”之间使用两个空格。你会看到它得到了他们所有。

编辑：Vision 打败了我；`\b`如果您只想匹配单词，他的使用建议是完美的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:47:21.357

`/ Visit |Microsoft/gi`只是意味着

*   找到“访问”（周围有空格）
*   `|`（或者）
*   找到“微软”
*   `g`标志 - 找到所有匹配项
*   `i`标志 - 进行不区分大小写的搜索

# iphone - 创建一个 csv 文件并读取它

> ID：14549478
> 
> 赞同：0
> 
> 时间：2013-01-27T16:33:19.043
> 
> 标签：iphone, ios, objective-c, csv

因此，在我的应用程序的第一个视图控制器中，我试图创建一个包含字符串的 csv 文件，但由于某种原因它不起作用。我使用以下代码：

```
-(IBAction)initialButton:(id)sender {
    NSLog(@"initialButton clicked");

    if([securityCode.text length] == 8){

        NSString *securtityCodeData = [NSString stringWithFormat:@"%@",
                                       self.securityCode.text];
        NSString *docPath =[NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES)objectAtIndex:0];
        NSString *securityCodes=[docPath stringByAppendingPathComponent:@"securityCodes.txt"];

        if (![[NSFileManager defaultManager] fileExistsAtPath:securityCodes]){
            [[NSFileManager defaultManager]createFileAtPath:securityCodes contents:nil attributes:nil];
        }

        NSFileHandle *fileHandel = [NSFileHandle fileHandleForUpdatingAtPath:securityCodes];
        [fileHandel seekToEndOfFile];
        [fileHandel writeData:[securtityCodeData dataUsingEncoding:NSUTF8StringEncoding]];
        [fileHandel closeFile];

        NSLog(@"security code has been saved\nSecurity code:%@",securtityCodeData);

        NewTrackTraceViewController *newTrackTraceViewController = [[NewTrackTraceViewController alloc]init];

        AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
        [appDelegate.transitionController transitionToViewController:newTrackTraceViewController withOptions:UIViewAnimationOptionTransitionCrossDissolve];

        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
        [[NSUserDefaults standardUserDefaults] synchronize];

} else {
    [WCAlertView showAlertWithTitle:@"Security code is not valid"
                            message:@"Please enter a valid securitycode to continue."
                 customizationBlock:^(WCAlertView *alertView) {

                     alertView.style = WCAlertViewStyleVioletHatched;

                 } completionBlock:^(NSUInteger buttonIndex, WCAlertView *alertView) {

                 } cancelButtonTitle:@"Cancel" otherButtonTitles:@"Okay",nil];
}

} 
```

然后我们推送到我的第二个视图控制器，在那里我想读取 csv 文件并将其内容放在标签中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *docPath =[NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSString *securityCodes=[docPath stringByAppendingPathComponent:@"securityCodes.csv"];

    if([[NSFileManager defaultManager] fileExistsAtPath:securityCodes]){

        securityCodeLabel.text = securityCodes;
        NSFileHandle *fileHandel = [NSFileHandle fileHandleForReadingAtPath:securityCodes];
        NSString *securityCodeData=[[NSString alloc]initWithData:[fileHandel availableData] encoding:NSUTF8StringEncoding];
        [fileHandel closeFile];

        self.securityCodeLabel.text=securityCodeData;
        NSLog(@"%@",securityCodeData);
    }else{
        NSLog(@"File does not exist");
        self.securityCodeLabel.text=@"No security code found!";

    }
} 
```

我做错了什么？由于某种原因，该文件未保存..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:51:50.683

NSDocumentationDirectory 应该是 NSDocumentDirectory。

# magento - 在 x 个项目后停止将产品插入 Magento

> ID：14549479
> 
> 赞同：1
> 
> 时间：2013-01-27T16:33:20.097
> 
> 标签：magento, magento-1.7

我正在尝试使用以下代码将产品插入 Magento 网上商店：

```
public static function addProduct($product, $categorieId) {
    $productModel = Mage::getModel('catalog/product');

    $productModel->setTypeId(Mage_Catalog_Model_Product_Type::TYPE_SIMPLE)
            ->setWebsiteIDs(array(1))
            ->setStatus(Mage_Catalog_Model_Product_Status::STATUS_ENABLED)
            ->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)
            ->setCreatedAt(strtotime('now'))
            ->setName($product->PRODUCT_DETAILS[0]->DESCRIPTION_SHORT)
            ->setCategoryIds(array($categorieId))
            ->setDescription($product->PRODUCT_DETAILS[0]->DESCRIPTION_LONG ? $product->PRODUCT_DETAILS[0]->DESCRIPTION_LONG : $product->PRODUCT_DETAILS[0]->DESCRIPTION_SHORT)
            ->setShortDescription($product->PRODUCT_DETAILS[0]->DESCRIPTION_SHORT)
            ->setPrice($product->PRODUCT_PRICE_DETAILS->PRODUCT_PRICE->PRICE_AMOUNT)
            ->setAttributeSetId($productModel->getResource()->getEntityType()->getDefaultAttributeSetId());

    $productModel->setStockData(array(
        'is_in_stock' => 1,
        'qty' => 99999
    ));

    try {
        $productModel->save();
        return $productModel->getId();
    } catch (Exception $ex) {
        Mage::log($ex->getMessage());
    }
} 
```

然而，代码将项目插入到正确的类别中。大约 38 个项目后它停止，没有错误，什么也没有。Ajax 调用不返回任何错误，什么也没有。任何想法这可能是由什么引起的？

欢呼沃尔夫冈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:39:47.773

我猜你正在达到脚本执行时间限制（php.ini max_execution_time）

假设您没有在 PHP 的“安全模式”下运行，请尝试在方法顶部插入以下内容。（我假设这个方法被一遍又一遍地调用。它每次都会重置时间限制）

```
set_time_limit(30); 
```

# python - Python zipfile 在 Windows 上部分工作？

> ID：14549480
> 
> 赞同：0
> 
> 时间：2013-01-27T16:33:26.453
> 
> 标签：python, windows

我`zipfile`在我的脚本中使用解压缩 .zip 文件。这是我的代码：

```
def unzip(src, dst):
    zf = zipfile.ZipFile(src)
    for member in zf.infolist():
        words = filter(None, member.filename.split('/'))
        path = dst
        for word in words[:-1]:
            drive, word = os.path.splitdrive(word)
            head, word = os.path.split(word)
            if word in (os.curdir, os.pardir): continue
            path = os.path.join(path, word)
        zf.extract(member, path)
    dirMacosx = "%s/__MACOSX" % (dst)
    if os.path.exists(dirMacosx):
        shutil.rmtree(dirMacosx) 
```

当我在 Linux 或 OS X 上解压缩文件时，它可以正常工作，但是当我在 Windows 上运行它时，它会创建一个目录和其中的所有目录，但没有任何文件。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:14:53.687

为了与类 Unix 和 Windows 兼容，请替换

```
words = filter(None, member.filename.split('/')) 
```

和

```
words = filter(None, member.filename.split(os.sep)) 
```

这将`/`在类 Unix 上使用 a，`\`在 Windows 上使用 a。

# c++ - 在单独的.cpp文件和makefile链接中定义的c ++函数

> ID：14549486
> 
> 赞同：0
> 
> 时间：2013-01-27T16:33:43.783
> 
> 标签：c++, class, function, header, makefile

我有一个项目使用 CRandomMersenne 类中的函数，在标头*randomc.h中**声明*；这些函数在不同的文件*mersenne.cpp*中定义。在我的 makefile 中，我有一个使用类函数的对象 *MC_funcs2.o*。源 *MC_funcs2.cpp* 包括标头*randomc.h*。但是编译器抱怨：

MC_funcs2.o:MC_funcs2.cpp:(.text+0x20): 未定义对“CRandomMersenne::Random()”的引用

我知道在类定义之外声明函数时我做错了一些事情，包括使用提到的函数的头文件，并且可能在 makefile 中的链接。以下是一些文件的精简版：

生成文件：

```
SpMC3: SpMC3.cpp SpMC.h mersenne.o MC_funcs2.o
     g++ SpMC3.cpp MC_funcs2.o mersenne.o -o SpMC3

MC_funcs2.o: MC_funcs2.cpp SpMC.h randomc.h
     g++ -c MC_funcs2.cpp mersenne.cpp

mersenne.o: mersenne.cpp randomc.h userintf.cpp
     g++ -c mersenne.cpp userintf.cpp 
```

SpMC3.cpp（主程序）：

```
#include "SpMC.h"

int main() {
     cout << "boing" << endl;
     return 0;
} 
```

MCfuncs2.cpp（不编译的那个）：

```
#include "SpMC.h"
#include "randomc.h"

CRandomMersenne RanGen(time(0));

void outrandom() {
     ofstream out;
     out << RanGen.Random() << endl;
     return;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:52:47.880

我强烈建议将每个单独的源文件编译`*.c`为目标文件`*.o`，即 i.ex。`mersenne.cpp -> mersenne.o`. 这可以在不必手动指定每个目标文件的情况下实现。

```
CC = gcc
CFLAGS = -g -O2
OBJECTS = main.o foo.o

main : $(OBJECTS)
    $(CC) $(CFLAGS) $(OBJECTS) -o main

%.o : %.c
    $(CC) $(CFLAGS) -c $< 
```

有关 makefile 的更多信息，请查看[本教程或](http://www.delorie.com/djgpp/doc/ug/larger/makefiles.html)[如何制作简单的 C++ Makefile](https://stackoverflow.com/questions/2481269/how-to-make-simple-c-makefile)中的优秀 SO 答案？.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:12:58.643

这个错误只是意味着 mersenne.cpp 没有被编译......确保它被编译和链接......

# php - 如何使我的网页图像在 PHP 中无法下载？

> ID：14549488
> 
> 赞同：0
> 
> 时间：2013-01-27T16:34:05.033
> 
> 标签：php, security, download

> **可能重复：**
> [如何使我的网页中的图像无法下载](https://stackoverflow.com/questions/8649680/how-to-make-images-in-my-webpages-not-downloadable)

我正在开发一个 PHP 项目，该项目有我的客户的照片库。我的客户要求我限制访问者不要从网页下载他的照片库图像/视频，即没有人可以保存他的摄影作品（图像，多媒体，视频）通过右键单击并使用“另存为”选项。无论如何我可以限制我的网站的访问者从我的 PHP 网站下载内容吗？我可以采取哪些步骤来防止下载多媒体内容？我如果有人可以在这方面帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:41:19.870

您不能阻止用户从您的服务器下载图像。有一些技巧可以使它变得更难，但如果有人想从网站窃取媒体，他们肯定会这样做。

对于愚蠢的用户，您可以禁用右键单击（[已在此处回答](https://stackoverflow.com/questions/737022/how-do-i-disable-right-click-on-my-web-page)）。但是，如果用户禁用 Javascript 或进行简单的屏幕截图，这种方法和其他方法将毫无用处。

# c++ - 如何修复称为运行时错误的纯虚函数？

> ID：14549489
> 
> 赞同：4
> 
> 时间：2013-01-27T16:34:08.490
> 
> 标签：c++, pure-virtual

我明白为什么我得到我得到的错误（调用纯虚函数）。我试图从我的基类的析构函数中调用纯虚函数，如下所示。但是，我不知道如何修改我的代码以防止这种情况发生。以下是基类和派生类（无论如何都是相关部分）：

基类：

```
TailFileManager::TailFileManager(const std::string &filename, const int fileOpenPeriod_ms)
: m_Stop(false)
{
    m_WorkerThread.reset(new boost::thread(boost::bind(&TailFileManager::TailFile, this, filename, fileOpenPeriod_ms)));
}

TailFileManager::~TailFileManager()
{
    m_Stop = true;
    m_WorkerThread->join();
}

void TailFileManager::TailFile(const std::string &filename, const int fileOpenPeriod_ms)
{
    std::ifstream ifs(filename.c_str());

    while (! ifs.is_open())
    {
        boost::this_thread::sleep(boost::posix_time::milliseconds(fileOpenPeriod_ms));
    ifs.open(filename.c_str());
    }

    ifs.seekg(0, std::ios::end);

    while (! m_Stop)
    {
        ifs.clear();

        std::string line;

        while (std::getline(ifs, line))
        {
            OnLineAdded(line);
        }

        OnEndOfFile();
    }

    ifs.close();
} 
```

派生类：

```
ETSLogTailFileManager::ETSLogTailFileManager(const std::string &filename, const int heartbeatPeriod_ms)
: TailFileManager(filename, heartbeatPeriod_ms),
  m_HeartbeatPeriod_ms(heartbeatPeriod_ms),
  m_FoundInboundMessage(false),
  m_TimeOfLastActivity(0)
{
}

ETSLogTailFileManager::~ETSLogTailFileManager()
{
}

void ETSLogTailFileManager::OnLineAdded(const std::string &line)
{
    // do stuff...
}

void ETSLogTailFileManager::OnEndOfFile()
{
    // do stuff...
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T16:53:42.427

您不应该在构造或销毁期间调用虚函数，因为调用不会按照您的想法进行，如果他们这样做了，您仍然会不高兴。如果你是一个正在恢复的 Java 或 C# 程序员，请密切关注这个 Item，因为这是那些语言曲折而 C++ 曲折的地方。

重新设计你的设计，即你可以在对象被破坏之前调用一些清理函数，如果你正在使用 C++，想法只是在 const/dest 期间避免虚函数（如果有的话！）......

虚拟调用的规则不同。C++ 2003，第 12.7 节“构造和破坏”，说：

让我们刷新一些旧的记忆......

成员函数，包括虚函数 (10.3)，可以在构造或销毁 (12.6.2) 期间调用。当从构造函数（包括从数据成员的 mem-initializer）或从析构函数直接或间接调用虚函数时，调用应用的对象是正在构造或销毁的对象，调用的函数是在构造函数或析构函数自己的类或其基类之一中定义的函数，但不是在派生自构造函数或析构函数类的类中覆盖它的函数，或在最派生对象的其他基类之一中覆盖它的函数（1.8 ）。如果虚函数调用使用显式类成员访问（5.2.

**由于这种行为差异，建议您在构造或销毁对象时不要调用对象的虚函数。**

**在构造或破坏期间切勿调用虚函数 摘自 Effective C++，第三版，Scott Meyers** 2005 年 6 月 6 日

[http://www.artima.com/cppsource/nevercall.html](http://www.artima.com/cppsource/nevercall.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T18:47:38.907

就 C++ 标准而言：

*   如果您在构造函数或析构函数中调用虚函数，则该函数被动态调度，就好像它的动态类型是当前正在执行的构造函数/析构函数的动态类型（§12.7/4）
*   如果该函数发生在纯虚拟上，则这是*未定义的行为*（第 10.4/6 节）；[Itanium ABI](http://www.swag.uwaterloo.ca/acd/docs/ItaniumC++ABI.htm#pure-virtual)定义了行为：`__cxa_pure_virtual`被调用。

所以，你有一个棘手的问题......

* * *

该问题的一个可能解决方案是将其分为两部分，以便将破坏分为两部分。这可以通过以下`Strategy`模式来实现：

*   提供可定制的*界面*，您的策略
*   提供一个管理器类来封装功能并遵循可定制部分的策略

让我们更清楚一点：

```
class Interface {
public:
    friend class Manager;

private:
    virtual void finalize() = 0;
}; // class Interface

class Manager {
public:
    explicit Manager(std::unique_ptr<Interface>&&);

    ~Manager();

private:
    std::unique_ptr<Interface> _interface;
}; // class Manager

Manager::~Manager() {
    _interface->finalize();
} 
```

诀窍？`finalize()`所谓的破坏`_interface`还没有开始的地步！对析构函数的调用将在稍后发生；因此，您不会遭受半死不活的对象的命运。

我将通过一个关于`join`-ing a thread in a destructor now的警告来结束这个答案。请注意，在*堆栈展开的情况下会自动调用析构函数，因此在**失败*时无限期等待可能是危险的；特别是如果线程正在等待应该由当前*正在解开*的线程提供的数据......死锁的典型案例。

* * *

**参考文献**(n3337)：

> **§12.7/4**成员函数，包括虚函数 (10.3)，可以在构造或销毁 (12.6.2) 期间调用。当从构造函数或从析构函数直接或间接调用虚函数时，包括在类的非静态数据成员的构造或销毁期间，并且调用适用的对象是正在构造的对象（称为 x）或破坏，*调用的函数是构造函数或析构函数类中的最终覆盖者，而不是在派生更多的类中覆盖它*。
> 
> **§10.4/6**可以从抽象类的构造函数（或析构函数）调用成员函数；*对于从这样的构造函数（或析构函数）创建（或销毁）的对象，直接或间接地对纯虚函数进行虚调用（10.3）的效​​果是未定义的。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-27T17:26:40.213

你写，

> “我正在尝试从我的基类的析构函数中调用纯虚函数，如下所示。”

有问题的代码是

```
TailFileManager::~TailFileManager()
{
    m_Stop = true;
    m_WorkerThread->join();
} 
```

令人高兴的是，在单线程执行中，这不可能调用纯虚函数。但是您正在调用的线程`join`可能会在此对象上调用纯虚函数，可能是通过非虚成员函数。如果是这样，那么问题在于线程，特别是该对象的生命周期管理。

不幸的是，您没有显示相关代码。尝试将事情简化为一个小而完整的工作示例。在“工作”的地方，它重现了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T10:45:28.417

根据您使用的系统，这可能会起作用：

在纯函数调用处理程序上设置断点：`__cxa_pure_virtual`.

这对我使用 gdb 有用：`break __cxa_pure_virtual`然后，当断点被命中时，`up`显示我的代码被破坏了。（在我的例子中，我正在引入第二个线程，并且在使用对象时，当前正在另一个线程上发生破坏。）

文档`__cxa_pure_virtual`：[https ://www.swag.uwaterloo.ca/acd/docs/ItaniumC++ABI.htm#pure-virtual](https://www.swag.uwaterloo.ca/acd/docs/ItaniumC++ABI.htm#pure-virtual)

# android - Android 仅使用支持库中的 ViewPager

> ID：14549490
> 
> 赞同：12
> 
> 时间：2013-01-27T16:34:21.733
> 
> 标签：android, android-viewpager

我的应用程序的新版本至少有 14 个 SDK，所以我认为我可以摆脱旧版本一直使用的 support.v4 库。但是，现在看起来我可能不得不使用 ViewPager，因此我又回到了包含该库的位置。

那么我是否可以只使用库中与 ViewPager 相关的类，而不必使用 V14 中现在原生的其他类，例如 Fragment（也不必将 Activity 更改为 FragmentActivity）？

我会假设我可以做到这一点（仅使用库中的 ViewPager）但想检查以确保。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:05:44.560

对于某些事情，您可能必须使用 v13 支持库。如果您要使用的内容同时存在于 v4 和 v13 中，请使用 v13。v13 适用于高级 API 的原生片段，而 v4 仅适用于 v4 片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:41:53.083

我刚刚创建了一个只有 ViewPager 和它最接近的依赖项的项目 - 没有 Fragments 和没有 actionbar，从 api 级别 14 开始，这些都是本机支持的。

[https://github.com/kilaka/ViewPager-Independent](https://github.com/kilaka/ViewPager-Independent)

享受 ：）

# google-app-engine - 为什么我达到了数据存储读取操作配额？

> ID：14549491
> 
> 赞同：0
> 
> 时间：2013-01-27T16:34:21.843
> 
> 标签：google-app-engine, google-cloud-datastore, gae-quotas

我在一个无法访问 Internet 的地方 3 周，刚回来发现我的一个应用程序自 1 月 18 日开始在大约 18 小时后达到配额限制（数据存储读取操作）。我没有看到来自用户或爬虫的流量有任何增加。这是日志中的错误：“API 调用 datastore_v3.RunQuery() 需要的配额超过了可用配额。”

这似乎很奇怪，因为这个应用程序已经运行了几年，而且我正在缓存大多数数据存储请求。

请帮忙 - 这影响了我的底线！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:39:43.290

我发现站点中的一部分页面突然引起了几个爬虫的兴趣，并且这些页面对数据存储区发出的一些请求没有被 memcached，所以就这样......问题解决了。谢谢。

# javascript - 使用该类的实例时，我的 javascript 类中的变量未定义

> ID：14549496
> 
> 赞同：1
> 
> 时间：2013-01-27T16:35:03.513
> 
> 标签：javascript, object

我已经声明了这个 javascript 类：

```
var TablixColumns = function(){
this.g = 'wtf';
this.tablixColumns = []; //[];
return {
    addTablixColumn: function(tablixColumn){
        alert(this.g);
         //this.tablixColumns.push(tablixColumn.getTablixColumn());
    }
}
}; 
```

我的问题是，当我尝试这个时：`alert(this.g)`警报出来未定义当然我的初始函数定义为：`this.tablixColumns.push(tablixColumn.getTablixColumn());`

但后来我收到类似“没有`push`未定义的方法”的错误

奇怪的是我有这个类声明：

```
 var TablixColumn = function(){
            columnWidth = '<Width>3.135cm</Width>'; //default width value

            return{
                setColumnWidth: function(width){
                    this.columnWidth = '<Width>' + width + 'cm</Width>';
                },
                getTablixColumn: function(){
                    return '<TablixColumn>' + this.columnWidth + '</TablixColumn>';
                }
            }
        }; 
```

TablixColumn 类工作正常，是的，我已经声明了 this.g 和 this.tablixColumns 没有“this”。部分，但它只是拒绝工作！如果今晚这不起作用，我会杀了一个人，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:39:19.373

您需要`this`在嵌套函数表达式之外设置对当前对象 ( ) 的引用。这是您的代码的外观：

```
var TablixColumns = function() {
    ...
    var self = this;

    return {
        addTablixColumn: function(tablixColumn) {
            alert(self.g);
        }
    };
}; 
```

如果需要，您甚至可以为返回的对象文字设置一个属性：

```
// ...
    return {
        g: 'wtf',
        addTablixColumn: function(tablixColumn) {
        alert(this.g); // 'wtf'
        }
    };
// ... 
```

请注意，`TablixColumns`如果您像这样从它返回，则不应将其用作构造函数。您在这里使用了两个成语；原型继承和模块模式。你要实例化构造函数`new`吗？如果是这样，则不要返回对象文字。而是在函数原型上设置方法：

```
var TablixColumns = function() {
    this.g = 'wtf';
    this.tablixColumns = [];
};

TablixColumns.prototype.addTablixColumn = function addTablixColumn() { ... };
TablixColumns.prototype./* ... */

... 
```

否则，不要`this`在构造函数内部使用。只需将属性设为普通变量即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:07:37.150

好的，伙计们，我发现了我的问题：
对当前实例的所有变量的引用都不应该以`this.`关键字开头，所以这就是我的声明现在的样子：

```
 var TablixColumns = function(){
           g = 'wtf';
           tablixColumns = []; //[];
           return {
               addTablixColumn: function(tablixColumn){
                   alert(g);
                   tablixColumns.push(tablixColumn.getTablixColumn());
               }
           }
        }; 
```

感谢@Bergi 指出这一点

# php - 随机图像创建脚本问题

> ID：14549497
> 
> 赞同：0
> 
> 时间：2013-01-27T16:35:04.720
> 
> 标签：php, image, random, forum

我创建了一个脚本，它从数据库中获取随机*图像 ID*，将其转换为有效的文件名，然后我使用它从链接生成随机图像。

这就是这样一个链接的样子（有效 - 试试看）： http://imgit.org/roll.php?image= [3J9N0Y4k8g4l4G7](http://imgit.org/roll.php?image=3J9N0Y4k8g4l4G7)

当您重新加载该链接时，您会注意到图像发生了变化。但是，如果我将此图像添加到它可以工作，那么当我将该链接放在BBCode 标记中`<img src="THAT LINK" />`时，它在 phpBB 或 vBulletin 等留言板上不起作用。`[img][/img]`

我想我的脚本有问题，因为那里有各种服务可以做完全相同的事情（论坛上的链接）并且它可以工作。

这是我的 roll.php 脚本：

```
<?php

$imgit_root_path = '.';
include("{$imgit_root_path}/common.php");

if ($config['disable_roll'])
{
    redirect('index.php');  
}

$roll_key = request_var('image', '');
$roll_key = substr($roll_key, 0, 15);

if (!$roll_key)
{
    redirect('index.php?action=404');   
}

if (!$image->roll_key_exists($roll_key))
{
    redirect('index.php?action=404');   
}

$images = $image->roll_info($roll_key);
$images = explode('|', $images);

$count = sizeof($images);
$index = mt_rand(0, $count - 1);

$extList = array();
$extList['gif']  = 'image/gif';
$extList['jpg']  = 'image/jpeg';
$extList['jpeg'] = 'image/jpeg';
$extList['png']  = 'image/png';

$image_url  = generate_site_url() . IMAGES_PATH . $image->get_name($images[$index]);
$image_inf  = pathinfo($image_url);

header('Content-type: ' . $extList[$image_inf['extension']]);
readfile($image_url);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:08:26.523

我相信问题可能是 phpBB 将禁止未确认为图像的链接。也就是说，没有已知的图像扩展名，例如 .jpg；

[https://www.phpbb.com/community/viewtopic.php?f=46&t=1285255](https://www.phpbb.com/community/viewtopic.php?f=46&t=1285255)

> 出于安全原因，BBCode 不允许使用无法确认扩展名的图像（例如在第一个示例中）。代替图像，某人完全有可能将 JavaScript 脚本嵌入到页面上，甚至更糟的是，这可能对访问该页面的任何人，甚至可能是服务器构成安全风险。

这在 vBulletin 中很可能是相同的。

似乎您可以在论坛设置中覆盖它？

或者，如果您可以更改脚本，以便在末尾附加“.jpg”扩展名，那么这也可能有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:06:10.517

我认为发生的是浏览器缓存图像。尝试添加 header('Cache-Control: max-age=0'); 在读取文件（$image_url）之前；

# java - 快速保存玩家文件？

> ID：14549506
> 
> 赞同：1
> 
> 时间：2013-01-27T16:36:05.733
> 
> 标签：java, save

我正在用 java 制作多人游戏，它有连接到主服务器的客户端。我目前正在以 JSON 格式保存玩家游戏，文件名与玩家姓名相同。我想知道是否有更好的方法可以做到这一点。

我需要存储数组、布尔值、整数和字符串。

每当玩家在游戏中更改某些内容（例如拾取物品）时，该文件都会保存到。

# java - Box2d 带臂旋转关节车

> ID：14549511
> 
> 赞同：0
> 
> 时间：2013-01-27T16:36:19.713
> 
> 标签：java, android, box2d

我正在图像上创建这样的车辆：

![在此处输入图像描述](../Images/0a1b4fd0fcc2ec4dec8f2cbeff654d17.png)

如您所见，有：

1) 车身主体（红色矩形） 2) 车轮 3) 车辆臂（黑色矩形）

手臂在图示的锚点中心点使用旋转接头与车辆主体连接，这个手臂可以上下移动（有以下角度限制），所以你可以看到它只能移动 90 度。

我的问题是，我正在通过施加角脉冲来移动这只手臂，它可以工作，我可以移动手臂，但它会一直下降到默认位置。我正在努力如何“禁用”关节，因此只能使用我的控制器移动手臂，使其不受重力影响，因此玩家可以稍微向上移动手臂，例如手臂应该保持在这个位置，而不是跌倒。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:37:53.113

禁用重力影响的最佳方法是`gravityScale`在 b2BodyDef 处设置为零。但是这个参数只出现在 Box2D 的最后一个版本中，而且，也许你的 java 端口中没有这样的东西

无论如何，我认为你的重力想法不太好。它不是物理的，不现实的，因此您会发现一些相关的麻烦。例如，如果除重力之外的其他力会影响手臂怎么办？这将导致所有相同的问题。

在我看来，制作手臂的更好方法 - 使用旋转关节电机。您可以在“旋转接头电机”部分找到一些[教程](https://www.iforce2d.net/b2dtut/joints-revolute)。您可以启用/禁用电机并更改其速度运行时间以模拟车辆逻辑。此外，还可以更改关节的运行时间上限/下限，以防止手臂在未执行任何操作时移动。实现这一点的另一种方法 - 将电机速度设置为零，这会将电机转换为某种摩擦力。

# xpages - xapges 导航器未显示

> ID：14549512
> 
> 赞同：1
> 
> 时间：2013-01-27T16:36:23.280
> 
> 标签：xpages, xpages-extlib

xpages初学者的另一个希望简单的问题。

我正在尝试使用扩展库中的导航器控件。无论我用它做什么，我都无法让它在我尝试过的任何页面上呈现。代码如下。感谢您的任何帮助。

`<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex" xmlns:xc="http://www.ibm.com/xsp/custom"> <xe:navigator id="outline" expandable="true"> <xe:this.treeNodes> <xe:pageTreeNode page="/bcbsarequirements.xsp" selection="/bcbsarequirements" label="BCBSA Requirements" role="navigation"/> <xe:pageTreeNode page="/compliance.xsp" selection="/compliance" role="navigation" label="Compliance"/> <xe:pageTreeNode page="/finance.xsp" selection="/finance" label="Finance" role="navigation"/> </xe:this.treeNodes> </xe:navigator> </xp:view>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:48:32.800

1.  至少如果您的视图标记缺少扩展库属性，就会发生这种情况。确保视图标签看起来像这样：`<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">`。如果缺少该属性，则源中会显示错误。

2.  确保 XPage 源中没有错误。

3.  确保应用程序已构建（有时需要项目 -> 清理）。

4.  确保在应用程序属性中检查了扩展库（如果没有，你应该得到错误）。

5.  在浏览器上加载 XPage 时检查服务器控制台/日志中的任何错误消息。

6.  其他扩展库控件是否会为您呈现？如果不是，则 ExtLib 安装有问题。

7.  确保您的 Designer 和服务器具有相同的并且最好是最新的 (20121217) ExtLib 版本。

8.  如果您使用的是*升级包*，那么您可以向 IBM 开一个 SPR。

# three.js - 动画不适用于 THREE.JSONLoader 和 THREE.MorphAnimMesh

> ID：14549516
> 
> 赞同：1
> 
> 时间：2013-01-27T16:36:45.607
> 
> 标签：three.js

我使用 Three.js (2013-01-15) 的最新 Blender Exporter 将动画模型从 Blender 2.65 导出为 JSON 格式，包括骨骼和所有内容。

该模型显示良好，但 morphTargets 没有。应该点头。

我尝试了不同的动画方式，手动更改 morphTargetInfluences 或尝试使用不同的选项导出，但没有任何效果。

我还尝试用 Three.js 示例（monster 和 ogro）中的模型替换我的模型，它们运行良好。但是比较json文件，我看不出我有什么问题。

这是演示： http: [//lastgolem.com/stackoverflow/](http://lastgolem.com/stackoverflow/) 和 Blender 文件： http: [//lastgolem.com/stackoverflow/sheppard/sheppard.blend](http://lastgolem.com/stackoverflow/sheppard/sheppard.blend)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:27:53.690

我通过使用 Blender 导出插件再次尝试不同的导出选项来让它工作。这对我有用：

*   在“几何”下，我检查了“顶点”、“面”、“法线”。
*   在“材料”下，我检查了“UVs”、“颜色”、“材料”。
*   在“设置”下，对齐模式设置为“无”，选中“翻转 YZ”，比例为 1.00
*   在“实验”部分的“动画”下，我选中了“变形动画”并将“帧步长”设置为 1.00
*   再次在“实验”部分，在“设置”下，我选中了“所有网格”。

所有其他设置均未选中。

# antlr - antlr无限eof循环

> ID：14549517
> 
> 赞同：0
> 
> 时间：2013-01-27T16:36:51.047
> 
> 标签：antlr, infinite-loop, eof

请看看我的语法：[https ://bitbucket.org/rstoll/tsphp-parser/raw/cdb41531e86ec66416403eb9c29edaf60053e5df/src/main/antlr/TSPHP.g](https://bitbucket.org/rstoll/tsphp-parser/raw/cdb41531e86ec66416403eb9c29edaf60053e5df/src/main/antlr/TSPHP.g)

不知何故，ANTLR 产生了一个无限循环，为以下输入找到无限的 EOF 标记：

```
class a{public function void a(} 
```

虽然，只有 prog 期望 EOF classBody 也能以某种方式接受它。有人知道我该如何解决这个问题，我必须改变 classBody 分别不接受 EOF 令牌吗？

生成的类中的代码：

```
// D:\\TSPHP-parser\\src\\main\\antlr\\TSPHP.g:287:129: ( classBody )*
loop17:
do {
    int alt17=2;
    int LA17_0 = input.LA(1);
    if ( (LA17_0==EOF||LA17_0==Abstract||LA17_0==Const||LA17_0==Final||LA17_0==Function||LA17_0==Private||(LA17_0 >= Protected && LA17_0 <= Public)||LA17_0==Static) ) {
        alt17=1;
    }

    switch (alt17) {
    case 1 :
        // D:\\TSPHP-parser\\src\\main\\antlr\\TSPHP.g:287:129: classBody
        {
        pushFollow(FOLLOW_classBody_in_classDeclaration1603);
        classBody38=classBody();
        state._fsp--;
        if (state.failed) return retval;
        if ( state.backtracking==0 ) stream_classBody.add(classBody38.getTree());
        }
        break;

    default :
        break loop17;
    }
} while (true); 
```

问题出现了，当令牌 = EOF 时，循环永远不会退出，因为 EOF 是一个有效的令牌，即使我没有这样指定。

**编辑**如果我将第 342 行和第 347 行注释掉（分别在规则 accessModifierWithoutPrivateOrPublic、accessModifierOrPublic 中的空例），则不会出现错误

***编辑 2***我可以解决我的问题。我重写了 methodModifier 规则（将所有可能的修饰符集成到一个规则中）。这样ANTLR不相信EOF是/ *empty* /in

```
accessModifierOrPublic
    :   accessModifier 
    |   /* empty */ -> Public["public"]
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:10:47.663

这种类型的错误可能发生在 ANTLR 3 的错误处理中。在 ANTLR 4 中，该[`IntStream.consume()`](http://antlr.org/api/Java/org/antlr/v4/runtime/IntStream.html#consume%28%29) 方法已更新为要求引发以下异常以抢占此问题。

> 抛出： `IllegalStateException`- 如果尝试消费流的末尾（即，如果在调用消费之前）。[`LA(1)`](http://antlr.org/api/Java/org/antlr/v4/runtime/IntStream.html#LA%28int%29)`==`[`EOF`](http://antlr.org/api/Java/org/antlr/v4/runtime/IntStream.html#LA%28int%29)

对于 ANTLR 3 语法，您至少可以通过使用自己的[`TokenStream`](http://antlr3.org/api/Java/org/antlr/runtime/TokenStream.html)实现（可能最容易扩展[`CommonTokenStream`](http://antlr3.org/api/Java/org/antlr/runtime/CommonTokenStream.html)）来防止无限循环，如果违反上面列出的条件，则抛出此异常。请注意，您*可能*需要允许违反此条件一次（原因很复杂），因此`IllegalStateException`如果代码尝试消耗 EOF 超过 2 或 3 次，请保留计数并抛出。请记住，这只是打破无限循环的努力，因此您在实际检查时可能会有点“模糊”。

# php - 从远程目录获取文件列表并将其作为数组返回

> ID：14549518
> 
> 赞同：0
> 
> 时间：2013-01-27T16:36:54.120
> 
> 标签：php, javascript, html

**项目：**我正在尝试从 NOAA 服务器获取图像文件列表（它已打开并允许）。文件名是基于时间戳的半随机的。我需要将该目录列表返回到一个数组。

这篇文章的代码片段有效。 [这里>>](https://stackoverflow.com/questions/7437480/how-can-i-read-the-directory-contents-on-a-remote-server-with-php)

**在我对 $url 进行硬编码后**，它看起来像这样：

 **```
<?php
$url = 'http://radar.weather.gov/ridge/RadarImg/NCR/JAX/';
$html = file_get_contents($url);
$count = preg_match_all('/<td><a href="([^"]+)">[^<]*<\/a><\/td>/i', $html, $files);
for ($i = 0; $i < $count; ++$i) {
    echo "File: " . $files[1][$i] . "<br />\n";
}
?>

call the  function getimages (NCR, JAX) ;
function getimages (ncr_or_nzt, the_site_name) {
    var filelist =new array (); 
    var filelist = 'http://mysite.com/mypath/getimages.php?ncr_or_nzt&the_site_name';
} 
```

然后我只需要目录中**最近的 4 个文件名**

**最后，我需要'function getimages'之外可用的var **filelist []**数组，这样我就可以将它分配给html中其他地方的'img.src'标签。**

希望我能更好地描述它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:43:58.907

**最简单的第一...**

```
var filelist = new Array(); // declare array outside of function first

function getimages(ncr_or_nzt, the_site_name) {
    filelist.push('http://mysite.com/mypath/getimages.php?ncr_or_nzt&the_site_name');
}

// filelist is now available outside of the function 
```

**将参数传递给 PHP...**

`$argv`是一个命令行参数数组。您可能应该测试 nuber 等，但要让您开始......

```
$url = sprintf('http://radar.weather.gov/ridge/RadarImg/%s/%s/', $argv[0], $argv[1]); 
```

此外，如果您使用 PHP 作为 CLI 脚本，请将`#!/usr/bin/php`（或 PHP 在您的操作系统上的位置）放入并使脚本可执行。在 Linux 机器上，你会做一个`sudo chmod +x [filename]`，然后你可以用`.\[filename]`.

**只获取前四张图片...**

最后，要仅获取最近的四个图像，您可以执行以下操作...

```
$count = preg_match_all('/<td><a href="([^"]+)">[^<]*<\/a><\/td>/i', $html, $files);

// turn files array upside down, most recent first and vice versa
$files = array_reverse($files);

if ($count >= 4) {
    $count = 4;
} 
```

或者...

```
$count = preg_match_all('/<td><a href="([^"]+)">[^<]*<\/a><\/td>/i', $html, $files);

// turn files array upside down, most recent first and vice versa
$files = array_reverse($files);

// slice off the files we want
$files = array_slice($files[1], 0, 4); 
```

进而...

```
foreach ($files as $file) {
    printf("File: %s<br/>\n", $file);
} 
```

*你还有什么需要的吗..？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:35:11.703

基本上，这行得通..谢谢大家

在 html 中：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" 
function loadjquery () {
$.ajax({
    "url": "ajaxV6.php",
    "type": "GET",
    "dataType": "json",
    "success": function( data, status, xhr ){
        alert("this is returned from the php ->>" + data[1] );
        noaafilelist = ( data[1] ); //<< assign to global var

    }
}); 
```

}

和..

```
function showResult (){
            alert('this is global ->>' + noaafilelist );
} 
```

和.. 在 PHP 中.. .. 在最后，打印

```
print json_encode($files[1]); 
```

并使其对 html 文件的其余部分具有全局性，添加：

```
var noaafilelist; // out side the function 
```

我敢肯定，几个月后这看起来会很笨拙..但现在它至少可以工作了。

丹尼斯**

# python - eval() 适用于 MacOS 但不适用于 Windows

> ID：14549521
> 
> 赞同：3
> 
> 时间：2013-01-27T16:37:02.003
> 
> 标签：python, python-3.x, pydev, eclipse-juno

我正在研究 John Zelle 的 Python Programming (For Python 3)，直到最近我一直在运行 10.7 的 MacBook Pro 上完成我的所有工作。我在两个平台上都在 Eclipse Juno 中工作。我决定将我所有的项目转移到装有 Windows 7 的 PC 上，并将它们导入 Eclipse Juno。我注意到每个带有 的应用程序`eval(input())`都坏了，但它们都在 Macbook 上运行。我从书中输入的任何代码都是新的。为什么这在一个平台上有效，而在另一个平台上无效？以下是适用于 MacOS 但不适用于 Windows 的代码示例：

```
def main():
    sum = 0.0
    count = 0
    xStr = input("Enter a number (<Enter> to quit) >> ")
    while xStr != "":
        x = eval(xStr)
        sum = sum + x
        count = count + 1
        xStr = input("Enter a number (<Enter> to quit) >> ")
    print("\nThe average of the numbers is", sum / count)

main() 
```

这在 Mac 上运行良好，但在 Windows 中会出现此错误：

```
Enter a number (<Enter> to quit) >> 5

Traceback (most recent call last):
  File "C:\Users\Nostromo\workspace\Chapter 11\average4.py", line 18, in <module>
    main()
  File "C:\Users\Nostromo\workspace\Chapter 11\average4.py", line 12, in main
    x = eval(xStr)
  File "<string>", line 1
    5    
    ^
SyntaxError: unexpected EOF while parsing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:11:36.107

如果将 input() 更改为 raw_input() 会怎样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:12:58.587

`eval(input())`无论如何，这是一种获得你想要的东西的愚蠢方式，本书的作者不应该建议你使用它。将其更改为`int(input())`，您会更快乐。

# htmlunit - HtmlUnit - 获取文本内容（）

> ID：14549524
> 
> 赞同：1
> 
> 时间：2013-01-27T16:37:27.303
> 
> 标签：htmlunit

我正在使用 HTMLUnit，我需要获取 HtmlAnchor 的文本内容，但只有文本没有更多的 HTML 标记。

```
<a class="subjectPrice" href="http://www.terra.es/?ca=28_s&amp;st=a&amp;c=4"  title="Opel Zafira Tourer 2.0 Cdti 165 Cv Excellence 5p. -12">
     <span class="old_price">32.679&euro;</span>
    24.395&euro; 
```

如果我执行 htmlAnchor.getTextContent() 它返回 32.679€ 24.395€，但我只需要 24.395€</p>

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:37:22.373

只需使用 XPath 来获取适当的`DomText`节点。似乎`./text()`以 HtmlAnchor 作为参考就足够了。

# java - 使用 Java 机器人的 Alt+Tab

> ID：14549526
> 
> 赞同：9
> 
> 时间：2013-01-27T16:37:33.687
> 
> 标签：java, tabs, awt, awtrobot, alt

我正在尝试使用 Java Robot调出**`alt`+菜单。`tab`**当我调用 alt_tab() 方法时，我想调出**`alt`+`tab`**菜单并保持菜单处于打开状态。我知道这可以使用**`alt`++来`ctrl`实现`tab`**。

到目前为止，我已经尝试了下面的代码，也只是**`alt`+`tab`**没有控制键。我不知道为什么它没有调出菜单。它所做的只是模拟按下 alt 键。

```
public void alt_tab() {
    Robot robot = new Robot();
    robot.keyPress(KeyEvent.VK_ALT);
    robot.keyPress(KeyEvent.VK_CONTROL);
    robot.keyPress(KeyEvent.VK_TAB);
    robot.delay(100);
    robot.keyRelease(KeyEvent.VK_TAB);
    robot.keyRelease(KeyEvent.VK_CONTROL);
    robot.keyRelease(KeyEvent.VK_ALT);
} 
```

我正在使用 Windows 8 Pro 和 JDK 7。感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T17:01:42.387

有一个[Windows 开发中心线程](http://social.msdn.microsoft.com/Forums/en-US/windowsaccessibilityandautomation/thread/4b6dbc43-a026-4957-9178-91d2001e2d0d/)讨论了这个问题。显然，Windows 8 中的规则发生了变化。

除非应用程序是具有`UiAccess`特权的辅助技术应用程序，否则不能保证可以在 Shell 中触发响应的键盘输入模拟不再起作用。

> “可访问性应用程序可以使用 SendInput 注入与外壳处理的应用程序启动快捷键相对应的击键。不保证此功能适用于其他类型的应用程序。” —*[发送输入功能 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)*

必须满足以下要求：

> *   签署
> *   安装在`%ProgramFiles%`或`%SystemRoot%\system32`
> *   `uiAccess='true'`在清单中指定
> *   在`SYSTEM`或当前登录的用户下运行
> 
> –[谷歌群组](https://groups.google.com/forum/?fromgroups=#!topic/input-director/rpkGCHX9Eoc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:27:30.763

我能够找到解决方法。我按照[此](http://www.eightforums.com/tutorials/10135-window-switcher-shortcut-create-windows-8-a.html)站点上的说明创建了`ALT`+`TAB`菜单的快捷方式，并使用

```
Runtime.getRuntime().exec("cmd \c start " + <path\to\shortcut\>); 
```

在没有任何特殊 UIAccess 权限的情况下启动`ALT`+菜单。`TAB`感谢大家的回复。

# xib - xibs 是否被认为已过时？

> ID：14549527
> 
> 赞同：1
> 
> 时间：2013-01-27T16:37:54.183
> 
> 标签：xib, uistoryboard, deprecated

既然 Apple 已经发布了故事板，那么 xibs 是否已被弃用？我发现我的一些旧技巧（即在 ib 中连接其他视图）不再起作用。但与此同时，将我所有的观点都放在一个文件中是件好事。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:25:46.907

*   *已弃用？*还没有。

*   *过时了吗？*是的。从 iOS 5 开始，许多新的 Interface Builder 功能（如静态表格视图单元格和展开 segues）*仅适用于 storyboards 而不是 xibs*。

*   *Apple 还建议*在他们自己的文档中使用故事板：

    **[查看 iOS 控制器编程指南：](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)**

    > 简而言之，创建用户界面意味着实例化和配置许多对象并建立它们之间的关系，这既费时又容易出错。
    > 
    > 相反，使用 Interface Builder 创建**故事板**。

    **[iOS 表视图编程指南：](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451-CH1-SW1)**

    > 创建和管理表格视图的最简单和推荐的方法是`UITableViewController`在情节提要中使用自定义对象。

# sql - 在表中包含外键列？

> ID：14549531
> 
> 赞同：1
> 
> 时间：2013-01-27T16:38:06.727
> 
> 标签：sql, database, database-design

我有以下情况。我的桌子是：

表：公司员工

*   员工ID
*   出生日期
*   加入日期

我还想存储每个员工的销售信息。我有这个：

表：已完成交易

*   ID
*   员工ID
*   交易名称
*   交易金额

我的问题是——CompanyEmployees 中是否应该有一个名为“DealsCompletedID”的列直接引用 DealsCompleted 中的 ID 列，或者是否可以在两个 Employee ID 列之间创建一个外键？这是否对设计不利或可能扭曲规范化？

我不清楚关于我是否应该在 CompanyEmployees 中包含一个额外的列的规则是什么。

**编辑请假设每个员工在交易表中只有一行。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:41:33.353

A`FOREIGN KEY`应该从一个表指向其在父表中的引用行，这两个表通常不应相互引用（两者都定义了外键）。

最`FOREIGN KEY`适合在`DealsCompleted`表中定义，它指向`CompanyEmployees.EmployeeID`。这样想 - 该`CompanyEmployees`表存储*有关*员工的信息。他们完成的交易并不能真正算作*有关员工*的信息。但是，完成交易的员工是交易信息*的*一部分，因此密钥属于那里。

拥有`DealsCompleted.EmployeeID`将允许员工和交易之间建立适当的一对多关系。也就是说，一名员工可以`DealsCompleted`根据需要拥有尽可能多的相关行。另一方面，在表中包含一`DealsCompleted`列将要求您*复制*有关员工的行，这会破坏规范化，或者*在一个列中包含**多个*值，这也是不正确的。`CompanyEmployees`**`DealCompletedID`**

 ***上面编辑后更新**即使您只计划建立一对一的关系（每个员工一个交易），仍然更适合引用`EmployeeID`in`DealsCompleted`而不是其他方式（或两种方式）。...并且它允许您在需要时*扩展到一对多*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:57:36.670

正如您所说，假设关系始终是一对一的，那么答案取决于领域模型中的*主要实体是什么。*如果这个数据库的核心是一个关于 Deals 的数据库，而员工数据是辅助的，那么我会在 Deal 表中添加一个 EmployeeId FK 列。如果otoh，这是一个关于Employees的数据库，而Deals是辅助的，那么去掉Deal表中的EmployeeId列，在Employeee表中增加一个DealId FK列。*

# ajax - 带有负数的 Ajax 发布数据

> ID：14549539
> 
> 赞同：0
> 
> 时间：2013-01-27T16:39:12.293
> 
> 标签：ajax, post, negative-number

我对带有负数的 Ajax 发布数据有疑问，我正在使用这个

```
 $.ajax({
    type: "POST",  
    url: "?page=invresults",  
    data: "Bound=1",  
  }); 
```

它将数据1发送到php没有任何问题

```
if(isset($_POST['Bound']))
{
echo $_POST['Bound'];
} 
```

但是当我尝试发送带有负数的数据时，没有任何东西发送到 php

```
 $.ajax({
    type: "POST",  
    url: "?page=invresults",  
    data: "Bound=-1",  
  }); 
```

它不向 php 发送数据：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:36:27.967

将值作为“-1”之类的字符串发送，并在 php 端将其转换为 int。

# php - 在 TCPDF 中显示现有 PDF 文件

> ID：14549544
> 
> 赞同：0
> 
> 时间：2013-01-27T16:39:23.993
> 
> 标签：php, tcpdf

我使用 TCPDF 在我的网站中创建 pdf 页面，我已经使用 TCPDF 成功创建了 pdf 文件，但现在的问题是我必须在生成的TCPDF pdf文件..我尝试了代码，但没有成功...示例代码如下..

```
 $journals_page='
    <embed>
    type="application/pdf"
    src="./uploads/publications/hi.pdf"
    width="100%"
    height="100%">
    </embed>
    ';
$html = ''.$journals_page;
$pdf->writeHTML($html, true, false, true, false, ''); 
```

我在 TCPDF 中使用 writeHTML() 类型的 pdf .. 在此之前创建的页面运行良好.. 但我无法显示 pdf 文件.. 请帮助我解决这个问题.. 在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T12:57:27.653

您可以使用 iframe 页面的标签来阻止下载。

标签是现在在 html5 中有效的新媒体元素

在 src 属性上链接 tcpdf.php

```
<html>
<body>
<embed
type="application/pdf"
src="http://yoursite.com/tcpdf/tcpdf.php″
width="100%"
height="100%">
</embed>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:32:01.903

利用：

```
header("Location:path/to/hi.pdf"); 
```

# python - Python tkinter GUI：用于具有可复制文本的小部件

> ID：14549545
> 
> 赞同：0
> 
> 时间：2013-01-27T16:39:30.593
> 
> 标签：python, user-interface, text, python-3.x, tkinter

我是在 python 中设计 GUI 的新手并且有一个查询：

有没有办法让标签或任何其他带有可复制文本的小部件。我想在 GUI 中提供帮助部分，其中将包含一个示例 xml 作为输入，我希望用户能够复制该 xml。

如果用户删除该信息，我不希望该信息消失，因此我没有使用带有预填充数据的条目小部件。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:55:21.293

使用`text`处于禁用状态的小部件。

此状态下没有插入光标，但仍可以选择和复制文本（但不能修改）。

# javascript - FullScreenChange 事件不起作用

> ID：14549547
> 
> 赞同：4
> 
> 时间：2013-01-27T16:39:44.827
> 
> 标签：javascript, jquery, html, fullscreen

我尝试绑定 FullScreenChange 事件，但它不起作用。也许我做错了什么？

```
$(document).bind('webkitfullscreenchange mozfullscreenchange fullscreenchange',function(){
if(document.fullScreen){
    console.log('Go to Full Screen mode');
    }else{
    console.log('Exit Full Screen mode');
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T16:48:03.453

您可能需要为`document.fullScreen`属性使用供应商特定的前缀

```
var isFullScreen = document.fullScreen || 
                   document.mozFullScreen || 
                   document.webkitIsFullScreen; 
```

此处提供更多信息：

[https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-21T00:17:41.780

这对我有用：

```
window.onresize = resize
function resize() {
  //code
} 
```

# jquery - jQuery dataTables - 在动态添加的行中更新 COLUMNS 的类属性

> ID：14549550
> 
> 赞同：1
> 
> 时间：2013-01-27T16:39:46.817
> 
> 标签：jquery, datatables

我正在使用 jQuery dataTables 动态添加新行。我能够修改整行的类属性，但不能修改其中的列。

在下面的代码中，我成功地将 css 值设置为红色，并以红色字体查看整行：

```
 var dataTableRow = ['c1', 'c2', 'c3', 'c4', 'c5', 'c6'];
 var newrow = $('#invoicetable').dataTable().fnAddData(dataTableRow);

 // set class attribute for the newly added row 
 var nTr = $('#invoicetable').dataTable().fnSettings().aoData[newrow[0]].nTr;

 // and parse the row:
 var nTds = $('td', nTr);

 nTds.attr('class', 'TMP');
 $('.TMP').css('color', 'red'); 
```

我认识到 nTds[] 充当包含行列的数组，但与 nTds[0].attr('class', 'TMP'); 一样简单的更改 正如我所料，不只是将第 0 列设置为红色字体。

显然我错过了一些简单的东西。指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:43:57.067

`nTds[0].attr()`不会像`attr`jQuery 方法那样工作，并`nTds[0]`在没有 jQuery 包装器的情况下返回实际的 HTML 元素。

如果要使用 jQuery 语法定位单个元素，可以使用[**eq()**](http://api.jquery.com/eq/)，类似于：

```
nTds.eq(0).attr('class', 'TMP') //or 
nTds.eq(0).addClass('TMP') 
```

# c - 指针地址算术和十六进制/十进制转换

> ID：14549551
> 
> 赞同：1
> 
> 时间：2013-01-27T16:39:52.950
> 
> 标签：c, linux, hex, decimal, pointer-arithmetic

我有一个从 和 获得的`extern char etext`指针`end`地址`edata`。我还使用`&<Variable Name>`. 两者都是十六进制指针地址。

我需要对这些十进制地址进行算术运算。我该怎么做？我需要将地址转换为十进制整数，这样我就可以通过减去地址来找到内存段的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:41:38.403

数学就是数学。你在什么基础上做这件事并不重要。无论如何，计算机只能在base 2中工作。只有在输入或输出期间，基础才重要。如果将指针解释为指针，则可以对指针进行字节算术`char *`：

```
ptrdiff_t segmentSize = (char *)segmentEndAddress - (char *)segmentStartAddress;

printf("Segment size in base 10: %td\n", segmentSize);
printf("Segment size in base 16: %tx\n", segmentSize);
printf("Segment size in base  8: %to\n", segmentSize); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:45:27.533

您可以使用指针进行算术运算。请注意，“单位”不是 1，而是指向对象的大小。因此，如果 p 是指向整数的指针，则 p+1 和 p 之间的地址差异可能是 4 个字节或更多。

如果要对地址进行算术运算，则应使用指向 char 的指针或将它们转换为此类指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:41:47.867

没有“十六进制变量”，而是可以以某种表示形式打印的变量。此外，该标准不保证 an`int`可以保存指针对象。如果您使用 C99 或 C11，则可以使用可选类型`(u)intptr_t`来执行此操作。

```
uintptr_t n = (uintptr_t)(void *)etext; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T16:45:45.220

> 两者都是十六进制指针地址...我需要对这些十进制地址进行算术运算。我该怎么做？

十进制和十六进制只是表示......显示数字的方式。但无论我写的是 10 还是 0xA，它们仍然是相同的数字。指针是一个数字，您可以用十进制或十六进制表示该数字，但它仍然只是一个数字。因此，您可以执行以下操作：

```
char *foo = "A dog and a cat";
int offset = 4;
char fifthChar = *(foo + offset); 
```

基本上，您将 4 添加到指针`foo`并取消引用结果，这样就`fifthChar`可以保存字符“g”。

# jquery - 无法将 jQuery ajax 调用中的字符串参数传递给 ASP.NET webmethod

> ID：14549556
> 
> 赞同：0
> 
> 时间：2013-01-27T16:40:44.170
> 
> 标签：jquery, webmethod

我在对 ASP.NET webmethod 的 jQuery ajax 调用中传递参数时遇到了一些问题，它**整天都在困扰着**我。

我已经看到了它是如何完成的解决方案，但它对我不起作用。

这是一些代码：

```
function GetString() {

    var name = "yan";
    var fam = "key";
    alert(name + " " + fam);

    $.ajax
({
    type: "GET",
    url: "'Services/MyService.asmx/returnString",
    dataType: "json",
    //data: "{ 'fname' : '" + name + "' , 'lname' : '" + fam + "'}",
    //data: "{ 'fname' : 'name' , 'lname' : 'fam'}",
    //data: '{"fname":"Chris","lname":"Brandsma"}',
    data: "{'fname':'Chris','lname':'Brandsma'}",
    contentType: "application/json; charset=utf-8",
    error: function (jqXHR, textStatus, errorThrown)   //what to do if fails
    {
        alert('bad, ' + errorThrown + ", " + jqXHR.responseText + ", " + textStatus);
    },
    success: function (data)           //what to do if succedded
    {
        alert(data.d);
    }
}); 
```

}

```
[WebMethod]
[ScriptMethod(UseHttpGet = true)]
public string returnString(string fname, string lname)
{
    return ("my name is " + fname + " " + lname);
} 
```

这就是我得到的错误： ![错误：响应文本：](../Images/3ee91acd1261dbf559e061f780353283.png)

你可以看到我已经尝试了几种方法来完成它，但都没有奏效。任何人都可以指出错误/建议另一种解决方案吗？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:03:48.067

在过去 24 小时内我一​​直在尝试之后，我终于成功了 :) 事情是这样的：

代码背后：

```
[WebMethod]
[ScriptMethod(UseHttpGet=false)]
public string returnString2(string fname, string lname)
{
    return "{ \"FirstName\" : "\" + fname + "\" , \"LastName\" : "\" + lname + "\"}";
} 
```

**请注意，`(UseHttpGet=false)`**

查询：

```
function GetString2() {

    var name = "yan";
    var fam = "key";
    alert(name + " " + fam);

    $.ajax
({
    type: "POST",
    url: 'Services/MyService.asmx/returnString2',
    dataType: "json",
    data: JSON.stringify({ fname: "yan" , lname: "key" }),
    contentType: "application/json; charset=utf-8",
    error: function (jqXHR, textStatus, errorThrown)   //what to do if fails
    {
        alert('bad, ' + errorThrown + ", " + jqXHR.responseText + ", " + textStatus);
    },
    success: function (data)           //what to do if succedded
    {
        alert(data.d);
        var person = $.parseJSON(data.d);
        alert(person.FirstName);
    }
}); 
```

}

**注意`type:"Post"`那条`data`线是如何改变的**

感谢所有试图提供帮助的人，你们都做出了一点贡献：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:38:57.787

在您的代码更改中

```
 type: "GET", 
```

到

```
 type: "POST", 
```

# python - GAE Python：解析压缩的 XML 超出内存

> ID：14549565
> 
> 赞同：0
> 
> 时间：2013-01-27T16:41:50.320
> 
> 标签：python, xml, google-app-engine, gzip

我正在尝试获取 XML 文件并将其解析到数据库中。XML 在 GZIP 中压缩。GZIP 文件约为 8MB。当我在本地运行代码时，pythonw.exe 上的内存累积到整个系统（Windows 7）停止响应的水平，当我在线运行它时，它超过了 Google App Engine 上的内存限制。不确定文件是否太大或者我做错了什么。任何帮助将不胜感激！

```
from google.appengine.ext import webapp
from google.appengine.api.urlfetch import fetch
from xml.dom.minidom import parseString
import gzip
import base64
import StringIO

class ParseCatalog(webapp.RequestHandler):
user = xxx
password = yyy
catalog = fetch('url',
                    headers={"Authorization": 
                             "Basic %s" % base64.b64encode(user + ':' + password)}, deadline=600)
xmlstring = StringIO.StringIO(catalog.content)
gz = gzip.GzipFile(fileobj=xmlstring)
gzcontent = gz.read()
contentxml = parseString(gzcontent)
items = contentxml.getElementsByTagName("Product")

for item in items:
    item = DatabaseEntry()
    item.name = str(coupon.getElementsByTagName("Manufacturer")[0].firstChild.data)
    item.put() 
```

***更新***

所以我尝试按照 BasicWolf 的建议切换到 LXML，但在导入它时遇到问题。我下载了 LXML 2.3 库并将其放在我的应用程序的文件夹中（我知道这并不理想，但这是我知道如何包含第 3 方库的唯一方法）。此外，我在 app.yaml 中添加了以下内容：

```
libraries:
- name: lxml
  version: "2.3" 
```

然后我写了下面的代码来测试它是否解析：

```
import lxml

class ParseCatalog(webapp.RequestHandler):
    user = xxx
    password = yyy
    catalog = fetch('url',
                    headers={"Authorization": 
                             "Basic %s" % base64.b64encode(user + ':' + password)}, deadline=600)
    items = etree.iterparse(catalog.content)

    def get(self): 
       for elem in items:
           self.response.out.write(str(elem.tag)) 
```

但是，这会导致以下错误：

```
ImportError: cannot import name etree 
```

我已经检查了有关此错误的其他问题，看来我在 Windows 7 上运行的事实可能会起作用。[我还尝试从http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)安装预编译的二进制包，但这也没有改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:23:32.770

你能指望什么？首先，您将一个字符串读入内存，然后 - 将其解压缩到内存中，然后 - 构建一个仍在内存中的 DOM 树。

以下是一些改进：

1.  `del`每个缓冲区变量在您不需要它的那一刻。
2.  摆脱 DOM XML 解析器，使用事件驱动的 LXML 来节省内存。

# jquery - 防止在可放置动画完成之前发生切换

> ID：14549568
> 
> 赞同：0
> 
> 时间：2013-01-27T16:41:59.753
> 
> 标签：jquery, jquery-ui, jquery-animate, jquery-ui-droppable

# 是）我有的：

使用 jQuery UI，我将一个 div 从一个 div 拖放到另一个 div。

掉落事件触发：

1.  一个动画，可以缓和/捕捉放置的 div 到位。
2.  另一个 div 的切换（显示/隐藏）。

# 问题：

切换发生在动画完成之前。我需要在动画完成**后进行切换。**

# 现场示例+代码：

[http://jsfiddle.net/dominornovus/3Hq3q/2/](http://jsfiddle.net/dominornovus/3Hq3q/2/)

# 我试过的：

我没有成功尝试使用动画选择器：

```
$(":animated").promise().done(function() {
//code here
} 
```

# 我的问题：

如何防止在可放置动画之前发生切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:44:01.203

使用回调`animate()`：

```
$('.drop').droppable({
    tolerance: 'intersect',
    drop: function(event, ui) {
        var drop_p = $(this).offset();
        var drag_p = ui.draggable.offset();
        var left_end = drop_p.left - drag_p.left + 1;
        var top_end = drop_p.top - drag_p.top + 1;
        ui.draggable.animate({
            top: '+=' + top_end,
            left: '+=' + left_end
        }, function() {  //callback
            $(".somediv").toggle();
        });
    }
}); 
```

[**小提琴**](http://jsfiddle.net/3Hq3q/3/)

# css - 如何使用 SASS for 循环生成 CSS 内容

> ID：14549569
> 
> 赞同：5
> 
> 时间：2013-01-27T16:42:01.047
> 
> 标签：css, for-loop, sass

我正在尝试创建一个像这样运行的 SASS mixin：

```
@include custom-horiz-sep(7); 
```

这将输出CSS：

```
content: "xxxxxxx"; 
```

（7 个预定义字符）

如何在 SASS 中使用“for”循环来为“content”属性创建值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T14:33:32.110

在 bookcasey 和 cimmanon 的帮助下，这似乎很有效：

```
@mixin custom-horiz-sep($num) {
  $chr: "x";
  $content: $chr;
  @for $i from 0 to $num {
      $content: $content + $chr;
  }
  content: "#{$content}";
}

h1:before {
  @include custom-horiz-sep(25);
} 
```

[http://codepen.io/Protohominid/pen/rgzKF](http://codepen.io/Protohominid/pen/rgzKF)

# javascript - 查询数组 javascript

> ID：14549571
> 
> 赞同：1
> 
> 时间：2013-01-27T16:42:27.940
> 
> 标签：javascript, jquery, arrays, json

如何对数组 javascript 进行查询，例如我想查找所有以 A 开头的名称，然后显示所有信息

姓名":"阿尔伯特","年龄":"14"
姓名":"艾莉森","年龄":"14"

这是我的数组 json：

```
var house = [{"Name":"Jason","age":"43"},
{"Name":"Albert","age":"14"},
{"Name":"Luck","age":"14"},
{"Name":"Alison","age":"14"},
{"Name":"Tom","age":"12"}] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T16:45:02.277

您可以使用[`Array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var result = house.filter(function(o) {
    return o.Name.indexOf("A") === 0;
}); 
```

一些旧的浏览器可能不支持这种方法。在*MDN*检查[兼容性和解决方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:44:59.347

您可以使用[`Array.prototype.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

```
var names_beginning_a = house.filter(
    function (item) {return item["Name"][0].toLowerCase() === 'a';}
); 
```

一旦你有了这个，你可以使用和将你的数据转换为*字符串*[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
var dataAsString = names_beginning_a.map(
    function (item) {return JSON.stringify(item);} // optionally trim off { and }
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T16:52:39.947

您可以过滤数组，以收集具有“A”名称的元素，然后 forEach 或将匹配项映射到新的属性名称和值数组

```
house.filter(function(itm){
    return itm.Name.charAt(0)== 'A';
}).map(function(o){
    var A= [];
    for(var p in o){
        if(o.hasOwnProperty(p)){
            A.push(p+':'+o[p]);
        }
    }
    return A;
}).join('\n'); 
```

/* 返回值：（字符串）*/

```
Name:Albert,age:14
Name:Alison,age:14 
```

如果您需要垫片：

```
(function(){
    var A= Array.prototype;
    if(!A.filter)   A.filter= function(fun, scope){
        var T= this, A= [], i= 0, itm, L= T.length;
        if(typeof fun== 'function'){
            while(i<L){
                if(i in T){
                    itm= T[i];
                    if(fun.call(scope, itm, i, T)) A[A.length]= itm;
                }
                ++i;
            }
        }
        return A;
    }
    if(!A.map) A.map= function(fun, scope){
        var T= this, L= T.length, A= Array(L), i= 0;
        if(typeof fun== 'function'){
            while(i<L){
                if(i in T){
                    A[i]= fun.call(scope, T[i], i, T);
                }
                ++i;
            }
            return A;
        }
    }
}
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T16:49:04.767

你也可以使用[`grep`](http://api.jquery.com/jQuery.grep/)函数

```
arr = jQuery.grep(house, function (a) { return a.Name.indexOf("A") === 0; }); 
```

[http://jsfiddle.net/vYZBb/](http://jsfiddle.net/vYZBb/)*

# xna - 缩放 RenderTarget2D 不会缩放 SourceRectangles

> ID：14549572
> 
> 赞同：0
> 
> 时间：2013-01-27T16:42:29.517
> 
> 标签：xna, scale, xna-4.0, rendertarget

我在 XNA 中开发了一个 2D match3 游戏。核心逻辑和动画就完成了。我使用 RenderTarget2D 绘制整个板。该板有 8 行和 8 列，具有 64x64 纹理（瓷砖），可以单击和移动。为了捕获鼠标交叉点，我对每个图块使用 SourceRectangles。当然，SourceRectangle 与纹理具有相同的大小 - 64x64。

我想使用 RenderTarget2D 缩小整个板，以支持不同的显示器分辨率和方面。首先，我在 RenderTarget2D 中绘制所有图块。然后我用浮点系数缩小 RenderTarget2D。最后我在屏幕上绘制了 RenderTarget2D。结果，整个板子被正确地缩小了（例如，所有纹理都从 64x64 缩小到 50x50），但是 SourceRectagles 没有被缩放，它们仍然是 64x64，并且没有为正确的图块捕获鼠标交叉点。

为什么缩放 RenderTarget2D 不能处理这个问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:00:11.027

你应该以不同的方式处理这个问题。你的纹理源矩形就是这样——不要试图将它们用作按钮矩形，否则你会遇到这样的麻烦。

相反，请使用不同的`Rectangle hitboxRectangle`，它最初与源矩形的大小相同，但会随游戏窗口缩放，并检查交叉点。

# php - 会话不工作的登录表单

> ID：14549575
> 
> 赞同：0
> 
> 时间：2013-01-27T16:42:58.283
> 
> 标签：php, session, login

第一次尝试登录时，$_SESSION['not'] 和 $_SESSION['utente'] 在重定向到 index.php 时迷路了。我正在使用以下表单进行登录：

```
<form id="login" class="text" action="login.php" style="top:8px;" method="post">
<input name="usermail" type="text" class="email" style="text-transform:lowercase;width:130px;color:#9a9a9a" value="Indirizzo e-mail" onfocus="this.style.color='#666';if(this.value=='Indirizzo e-mail')this.value='';" onblur="if(this.value==''){this.style.color='#9a9a9a';this.value='Indirizzo e-mail'}">
<button style="float:right;height:65px;margin:1px 0px 0px 5px;" type="submit" value="Accedi"><i class="icon-login"></i><br><font class="font_mini">Accedi</font></button><br>
<input name="pass" type="password" class="password" autocomplete="off" style="width:130px;color:#9a9a9a" value="Password" onfocus="this.style.color='#666';if(this.value=='Password')this.value='';" onblur="if(this.value==''){this.style.color='#9a9a9a';this.value='Password'}"/>
<br><a href="?page=recupero"><font class="font_mini">Credenziali dimenticate?</font></a></form> 
```

登录.php：

```
<?
session_start();
$ip=$_SERVER[REMOTE_ADDR];
$user=strtolower($_POST['usermail']);
$pw=htmlspecialchars($_POST['pass'], ENT_QUOTES);
$userfile="utenti/email/".$user.".php";
if(file_exists($userfile))
{
    include($userfile);
    if($pw==$p)
    {
        $_SESSION["utente"]=$user;
        $ref="statistiche";
        if(file_exists("utenti/visita/".$user))
        {
            $notifica=6;include "notifiche.php";exit;
        }
        else
        {
            include "media.php";
            include_once "changevar.php";
            changevar("c",$c+$media,$userfile,0);
            $ipfile="utenti/IP/".$user.".php";
            if(file_exists($ipfile))
            {
                include $ipfile;
                if(!in_array($ip,$IParray))
                {
                    $fp=fopen($ipfile,"r");
                    $content=fread($fp,filesize($ipfile));
                    fclose($fp);
                    $content=str_replace(")",",'".$ip."')",$content);
                    $fp=fopen($ipfile,"w");
                    fwrite($fp,$content);
                    fclose($fp);
                }
            }
            else
            {
                $fp=fopen($ipfile,"w");
                fwrite($fp,"<?$"."IParray=array('".$ip."');?>");
                fclose($fp);
            }
            $filename="utenti/statistiche/".$user.".php";
            include $filename;
            changevar("creditiguadagnati",$creditiguadagnati+$media,$filename,1);
            $fp=fopen("utenti/visita/".$user, "w");
            fclose($fp);
            $notifica=7;include "notifiche.php";exit;
        }
    }
    else
    {
        $_SESSION['username']=$user;
        $notifica=12;include "notifiche.php";exit;
    }
}
else
{
    if(isset($_POST['usermail'])&&isset($_GET['a']))
    {
        $notifica=4;include "notifiche.php";exit;
    }
    else
    {
        header("location:index.php?page=errore");
    }
}
?> 
```

通知.php：

```
@session_start();
if(!isset($testo)&&isset($notifica))
{
switch($notifica)
{
case 0:$testo="0§La tua registrazione è avvenuta con successo!§Conferma l'e-mail che ti è stata inviata all'indirizzo di posta elettronica '$email' per poter effettuare il primo accesso.<br>Accertarti che l'email di conferma non sia finita erroneamente nella cartella dello spam/junk";break;
case 1:$testo="1§Attenzione§Questo indirizzo e-mail risulta essere già registrato!";break;
case 2:$testo="0§Congratulazioni!§La tua registrazione è avvenuta con successo!";break;
case 3:$testo="0§Biglietto acquistato!§Congratulazioni, hai appena acquistato il biglietto per poter partecipare all'estrazione numero ".($num+1).". Verifica la tua vincita in data $data sulla presente pagina";break;
case 4:$testo="1§Attenzione§Questo indirizzo e-mail non risulta essere registrato!";break;
case 5:$testo="1§Crediti insufficienti§Non hai abbastanza crediti per effettuare questa operazione";break;
case 6:$testo="0§Login riuscito!§Hai appena effettuato l'accesso con il profilo ".$_SESSION['utente'];break;
case 7:$testo="0§Login riuscito!§Hai appena ricevuto ".$media." crediti per aver effettuato l'accesso giornaliero";break;
//case 8:$testo="§§";break;
case 9:$testo="0§Account eliminato§Il tuo profilo è stato cancellato correttamente, ti ringraziamo per aver utilizzato MEGADV";break;
case 10:$testo="1§Cancellazione fallita§La password immessa non è corretta";break;
//case 11:$testo="§§";break;
case 12:$testo="1§Errore§La password inserita non è valida!";break;
case 13:$testo="0§Recupero password riuscito§La tua password è stata correttamente inviata all'indirizzo da te fornitoci";break;
case 14:$testo="1§Estensione dell'icona non valida§L'icona scelta ha un'estensione diversa da png, gif, jpeg o bmp";break;
case 15:$testo="1§Impossibile caricare l'icona§Si è verificato un errore durante l'upload dell'icona, riprova.<br>Se il problema persiste contatta l'amministratore";break;
//case 16:$testo="§§";break;
case 17:$testo="1§Attenzione§La password indicata non coincide con quella inserita nel campo di conferma password";break;
case 18:$testo="1§Attenzione§Per proseguire è necessario compilare il campo password";break;
case 19:$testo="1§Attenzione§Vecchia password errata, impossibile salvare le modifiche effettuate";break;
case 20:$testo="0§Congratulazioni!§Hai appena confermato la modifica del tuo indirizzo e-mail";break;
case 21:$testo="1§Attenzione§Il tuo indirizzo e-mail è stato modificato o l'account è stato cancellato da un altro computer";break;
case 22:$testo="1§Attenzione§Il titolo non può essere uguale alla descrizione";break;
case 23:$testo="1§Attenzione§La password deve essere almeno di 6 caratteri";break;
}
}
$_SESSION['not']=$testo;
if(isset($ref))
{
    $ref="?page=".$ref;
}
else
{
    $ref='';
}
@header("location: http://www.megadv.it".$ref);
echo "<script>document.location.href='http://www.megadv.it".$ref."';</script>";exit; 
```

我尝试了一切，但没有任何效果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:59:51.107

添加退出（）；后

```
header("location: http://www.megadv.it".$ref); 
```

如果您调试您的代码，则删除 @ char。它隐藏错误。

您不需要通过 JS remove 进行第二次重定向

```
echo "<script>document.location.href='http://www.megadv.it".$ref."';</script>";exit; 
```

# c# - 未能通过温莎城堡的通用参数

> ID：14549577
> 
> 赞同：1
> 
> 时间：2013-01-27T16:43:05.640
> 
> 标签：c#, .net, dependency-injection, castle-windsor, constructor-injection

[尝试使用 Castle Windsor 创建参数化实例时](http://docs.castleproject.org/Windsor.Passing-Arguments.ashx)，传递通用参数似乎存在问题

### 未能通过通用参数的演示

```
 private static void Main(string[] args)
    {
        PassGenericParamAtResolutionTime();
        Console.ReadLine();
    }

    private static void PassGenericParamAtResolutionTime()
    {
        Console.WriteLine("Passing generic argument fails");
        var container = new WindsorContainer();
        container.Register(Component.For<ISandCoordinator<Simpleton>>()
                           .ImplementedBy<SandCoordinator<Simpleton>>());
        var runtimeConstructorParam = new GenericManager<Simpleton>(
                                          "This Id Does Not Get Through");
        var runtimeArguments = new Arguments(
                                   new object[] {runtimeConstructorParam});
        var shouldBeParameterizedCoordinator = container
                   .Resolve<ISandCoordinator<Simpleton>>(runtimeArguments);
        Console.WriteLine(shouldBeParameterizedCoordinator.Log);
    } 
```

### 控制台输出

```
Passing generic argument fails
Birth from parameterless constructor, which should not happen 
```

如果我注释掉下面的无参数构造函数，我会得到以下异常：

```
Castle.MicroKernel.Resolvers.DependencyResolverException was unhandled
Missing dependency.
Component Sand.SandCoordinator`1[[Sand.Simpleton, WindsorSand, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] has a dependency on Sand.IGenericManager`1[Sand.Simpleton], which could not be resolved.
Make sure the dependency is correctly registered in the container as a service, or provided as inline argument. 
```

### 带有两个构造函数的演示类

```
class SandCoordinator<TSimpleton> : ISandCoordinator<TSimpleton>
                                    where TSimpleton : ISimpleton
{
    public SandCoordinator()
    {
        Log = "Birth from parameterless constructor, which should not happen";
    }

    public SandCoordinator(IGenericManager<TSimpleton> manager)
    {
        Log = "Birth from parameterized constructor";
        Log += Environment.NewLine + "Born With Manager: " + manager.Id;
    }        

    public string Log { get; private set; }
} 
```

### 解决方案/解决方法？

*   我知道如果我创建一个非泛型类型`interface ISimpleSandCoordinator : ISandCoordinator<Simpleton>`并注册非泛型接口，那么参数化解析就可以工作，但我不想停止使用泛型类型
*   这应该作为温莎城堡的错误提交吗？

* * *

[[使用 Castle.Core.dll 和 Castle.Windsor.dll 3.1.0 (2012-08-05)](http://www.castleproject.org/download/#windsor3) ]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:03:09.330

你的`SandCoordinator<T>`依赖`IGenericManager<T>`，不是`GenericManager<T>`。

When you're putting a value in `Arguments` that you want Windsor to use as something else than its concrete type you have to be explicit about it.

```
new Arguments { { typeof(IGenericManager<Simpleton>), runtimeConstructorParam } }; 
```

# c# - 如何检查字符串日期是否可以转换为 DateTime？

> ID：14549580
> 
> 赞同：0
> 
> 时间：2013-01-27T16:43:08.813
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, datetime

有一个 SQL Server 2008 数据库，我必须为其创建一个管理软件。该数据库包含一个名为 DateOfCreation 的列。表格设计者将此列设为字符串，并允许用户以他们想要的任何格式添加日期，这确实是他的一个愚蠢的错误。现在一些用户添加了“24 Jan”或“Jan 24”或“1991 1 12”等许多未知格式。我想要的是，当我获取这个字符串日期时，应该调用一个函数来检查格式，如果日期格式不正确则返回 -1，否则返回 DD/MM/YYYY 中的转换日期。那么如何检查字符串日期变量包含的日期格式呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T16:44:14.857

与您的日期格式一起使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)，如果日期格式不同或无效，它将返回 false。

对于多种格式，您可以在字符串数组中指定多种格式，然后在以下内容中使用它`DateTime.TryParseExact`：

[来自 MSDN - DateTime.TryParseExact 方法（String、String[]、IFormatProvider、DateTimeStyles、DateTime%）](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)

```
string[] formats= {"M/d/yyyy h:mm:ss tt", "M/d/yyyy h:mm tt", 
                   "MM/dd/yyyy hh:mm:ss", "M/d/yyyy h:mm:ss", 
                   "M/d/yyyy hh:mm tt", "M/d/yyyy hh tt", 
                   "M/d/yyyy h:mm", "M/d/yyyy h:mm", 
                   "MM/dd/yyyy hh:mm", "M/dd/yyyy hh:mm"};
string[] dateStrings = {"5/1/2009 6:32 PM", "05/01/2009 6:32:05 PM", 
                        "5/1/2009 6:32:00", "05/01/2009 06:32", 
                        "05/01/2009 06:32:00 PM", "05/01/2009 06:32:00"}; 
DateTime dateValue;

foreach (string dateString in dateStrings)
{
   if (DateTime.TryParseExact(dateString, formats, 
                              new CultureInfo("en-US"), 
                              DateTimeStyles.None, 
                              out dateValue))
      Console.WriteLine("Converted '{0}' to {1}.", dateString, dateValue);
   else
      Console.WriteLine("Unable to convert '{0}' to a date.", dateString);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T16:44:36.160

[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)可以在一定程度上有所帮助。但是，您将依赖于您的用户使用适当的日期/时间格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:52:34.727

```
public Tuple<bool, DateTime> GetDateTime(string x)
{
DateTime DT = null;
return Tuple.Create((DateTime.TryParse(x, out DT)), DT)
} 
```

可能工作。不过我不能保证。

# c++ - 警告 LNK4099：如果文件存在，也找不到 PDB 'vc100.pdb'

> ID：14549582
> 
> 赞同：8
> 
> 时间：2013-01-27T16:43:12.417
> 
> 标签：c++, visual-studio, qt, linker

我正在尝试使用 Visual Studio 编译 Qt 4.8.6 项目（我正在使用 Qt4.8.6 的 Visual Studio 插件）。我在调试和发布模式（-debug-and-release）下静态编译了库（-static），没有错误。

我收到这些错误：

> QtGuid.lib(jaricom.obj)：警告 LNK4099：在“QtGuid.lib(jaricom.obj)”或“C:\MyProject\debug\vc100.pdb”中找不到 PDB“vc100.pdb”；链接对象，好像没有调试信息 1>QtGuid.lib(jcapimin.obj)：警告 LNK4099：在 'QtGuid.lib(jcapimin.obj)' 或在 'C:\MyProject\debug 中找不到 PDB 'vc100.pdb' \vc100.pdb'; 链接对象好像没有调试信息

为什么会这样，我该如何解决？我不想忽略它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:04:20.193

首先，这些是警告而不是错误，其次看起来您将 Qt 库的调试版本与 VC 库的发布配置文件链接在一起...... Build Profile 有问题......但这只是警告，如果您不需要 VC 的调试工具您可以忽略此警告的组件...。如果您使用 VS2010 编译器并将使用 win SDK 组件，并且您使用的 VC 之间的依赖关系、Qt 的依赖关系（使用 mingw 编译！？）等没有任何问题......只需下载 Qt 源代码，用您的 VS 编译它们，安装VS插件并在VS中使用Qt...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:48:44.287

链接器找不到库 QTGuid 的调试信息。如果你想调试你的应用程序，你不会从 QTGuid 获得源代码级调试。

要解决此问题，您必须确保已安装 pdb 文件（使用调试信息安装 Qt）并确保文件位于 Visual Studio 正在查找 pdb 文件的路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T09:25:23.773

就我而言，我收到警告是因为我有以下项目设置：项目->链接器->常规->启用增量链接：是（/增量）

解决方案：我更改了项目设置并且它起作用了：

Project->Linker->General->Enable Incremental Linking: Default

# html - 图像未在 HTML 中显示

> ID：14549584
> 
> 赞同：0
> 
> 时间：2013-01-27T16:43:17.540
> 
> 标签：html, image

我正在尝试使用 img 标签在 HTML 页面中显示图像。代码是：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE html 
 PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
  <title>hi!</title>
 </head>
 <body>
  <div>

     <img src="images/a.jpg" alt="MISSING JPG" /> 
     <img src="images/b.jpg" alt="MISSING JPG" /> 
    </div>
  </body>
 </html> 
```

图像 a.jpg 显示正确，但 b.jpg 显示“MISSING JPG”。问题仅出现在 ie 8 上。在 fireforx 上它工作正常。我已经验证了两个图像文件的位置。直接单击时，两个图像都可以正常打开。我曾尝试使用 JPEG 修复工具 irfanviewer 和其他照片编辑器修复 a.jpg，但它不起作用。我尝试使用在线图像修复工具之一修复图像，然后它起作用了。我必须显示大量的 jpeg 文件，而且它们都出现了问题。不知道如何修复 JPEG 文件。

[我已在“ http://s20.postimage.org/s0n2lakq5/image.jpg](http://s20.postimage.org/s0n2lakq5/image.jpg) ”处上传了 a.jpg 。它可以从这个 URL 加载，但不能从磁盘加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:48:50.553

所以你是说b出现了，但没有出现？乍一看，a 没有 .jpg（全小写）。

你有什么 - a.jpg

你*应该*拥有的 - a.jpg

我的猜测是，现代浏览器知道您要在这里实现什么并为您正确解析它，而旧浏览器会感到困惑。

如果这不能解决问题，请在某处上传您的图片并向我们提供其位置的 url。如果不实际查看图像本身，就无法确定它是否以某种方式受到损害。

# cassandra - 使用 Astyanax 创建网络密钥空间

> ID：14549587
> 
> 赞同：1
> 
> 时间：2013-01-27T16:43:25.433
> 
> 标签：cassandra, astyanax

我在使用网络拓扑创建密钥空间时遇到问题。

代码：

```
// The Astyanax context I'm using
AstyanaxContext<Keyspace> context = new AstyanaxContext.Builder()
    .forCluster("Test Cluster")
    .forKeyspace("NetworkKS")
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
    .setDiscoveryType(NodeDiscoveryType.NONE))
    .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
    .setPort(9160)
    .setMaxConnsPerHost(10)
    .setInitConnsPerHost(1)
    .setSeeds("127.0.0.1:9160"))
    .withConnectionPoolMonitor(new Slf4jConnectionPoolMonitorImpl())
    .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();

// A different method takes the above context as a keyspace parameter
keyspace.createKeyspace(ImmutableMap.<String, Object>builder()
            .put("strategy_options", ImmutableMap.<String, Object>builder()
            .put("us-east", "3")
            .put("eu-west", "3")
            .put("replication_factor", "1").build())
            .put("strategy_class", "NetworkTopologyStrategy").build()); 
```

我知道为一个节点创建网络策略键空间似乎毫无意义，但这只是一个测试，一旦我让它工作，我将在种子中添加另一个 Cassandra 实例。

错误是：

```
[AWT-EventQueue-0] WARN com.netflix.astyanax.connectionpool.impl.Slf4jConnectionPoolMonitorImpl - TransportException: [host=127.0.0.1(127.0.0.1):9160, latency=42(42), attempts=1]org.apache.thrift.transport.TTransportException
[AWT-EventQueue-0] INFO com.netflix.astyanax.connectionpool.impl.Slf4jConnectionPoolMonitorImpl - TransportException: [host=127.0.0.1(127.0.0.1):9160, latency=42(42), attempts=1]org.apache.thrift.transport.TTransportException
Jan 27, 2013 4:42:39 PM smail.cli.astyanax.Schema createNetworkKeyspace
SEVERE: null
com.netflix.astyanax.connectionpool.exceptions.TransportException: TransportException: [host=127.0.0.1(127.0.0.1):9160, latency=42(42), attempts=1]org.apache.thrift.transport.TTransportException
    at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:197)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)
    at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:136)
    at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:69)
    at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:248)
    at com.netflix.astyanax.thrift.ThriftKeyspaceImpl.createKeyspace(ThriftKeyspaceImpl.java:545)
    at smail.cli.astyanax.Schema.createNetworkKeyspace(Schema.java:121)
    at smail.cli.test.SchemaCreationTest.createNetKS(SchemaCreationTest.java:21)
    at smail.cli.test.SchemaCreationTest.runTest(SchemaCreationTest.java:50)
    at smail.cli.Main$1.run(Main.java:48) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:47:36.060

如果您首先更新[Cassandra](http://en.wikipedia.org/wiki/Apache_Cassandra)配置，您将能够创建这样的密钥空间。您必须更新`cassandra-topology.properties`您的节点配置，以告知默认设置或描述您的数据中心和机架。该文件的默认内容是不言自明的。

正确设置后，您可以正确创建密钥空间。但最好听从[jbellis](https://stackoverflow.com/users/130168/jbellis)的建议，不要从代码中创建密钥空间。

# vcl - 如何告诉清漆缓存特定的文件类型

> ID：14549593
> 
> 赞同：4
> 
> 时间：2013-01-27T16:43:59.843
> 
> 标签：vcl, varnish

我有一个专门的服务器来托管我自己的网站。我已经使用默认的 VCL 文件安装了清漆。现在我想告诉 varnish 执行以下操作：

1.  仅缓存以下静态文件类型（.js、.css、.jpg、.png、.gif、.jpg）。这些是提供的服务器文件类型，而不是以这些扩展名结尾的 URL。
2.  不要缓存大于 1M 字节的文件
3.  任何文件的缓存都应在 1 天（或任何期限）内到期。
4.  只有当 Apache 发送 200 个 HTTP 代码时才可能发生缓存。

否则，请保持请求不变，以便由 Apache 或任何后端提供服务。

我应该在 VCL 文件中写什么来实现这些要求？或者我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T14:00:20.880

我做了什么 ：

1-将所有静态内容隔离到另一个域（即提供动态页面的域与提供静态内容的域不同。）

2- 为提供静态内容的域分配另一个专用 IP 地址

3- 告诉 varnish 仅在端口 80 上侦听该 IP（即静态内容 IP）

4- 使用 Apache conf 控制每种静态内容类型的缓存周期（varnish 将只服从该标头）

缺点：

1- Varnish 甚至不会倾听或处理它应该保持原样的请求。由于 Apache 侦听原始 IP（性能），因此这些请求（针对动态页面）将直接发送到 Apache。

2-无需更改默认VCL默认文件（仅当您想调试时），这对那些不了解VCL语言原理的人很有帮助。

3-您正在从 Apache conf 控制一切。

优点：

1- 如果您没有备用 IP，则必须购买新的专用 IP。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T22:01:58.260

您可以在 vcl_fetch 子例程中完成所有这些操作。这应该被认为是伪代码。

```
if (beresp.http.content-type ~ "text/javascript|text/css|image/.*") {
    if (std.integer(beresp.http.Content-Length,0) < /* max size in bytes here */ ) {
        if (beresp.status == 200) { /*  backend returned 200 */
            set obj.ttl = 86400; /* cache for one day */
            return (deliver);
        }
    }
} 
set obj.ttl = 120;
return (hit_for_pass); /* won't be cached */ 
```

# actionscript-3 - 更改 MovieClip 内 TextField 的字体颜色

> ID：14549598
> 
> 赞同：3
> 
> 时间：2013-01-27T16:44:29.537
> 
> 标签：actionscript-3, flash

在将 TextField 作为子项添加到 MovieClip 后，我无法更改其字体颜色。

我的代码：

```
var btn:MovieClip = new MovieClip();        
// other code for button

var tf:TextFormat = new TextFormat();
tf.size = 12;
tf.bold = true;
tf.font = "Arial"
tf.color = 0x000000;

var capt:TextField = new TextField();
capt.defaultTextFormat = tf;
capt.width = 200;
capt.height = 50;
capt.text = "Test";
capt.y = 20;
capt.x = 20;
capt.border = false;
capt.selectable = false;    

btn.addChild(capt);

// ..... 
```

如何在最后一行之后更改字体颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:55:22.503

假设在`TextField`最后一行之后超出范围（您没有显示足够的内容来知道它是否存在），您需要遍历按钮以获取 TextField 并从那里执行。

```
var i:uint;
var l:uint = btn.numChildren; //numChildren and length are 'heavy' getters, never use them as restrictors in a loop
for ( i = 0; i < l; i++ ) {
    var cur:DisplayObject = btn.getChildAt( i );
    if ( cur is TextField ) {
        ( cur as TextField ).setTextFormat( /*set new TextFormat in here*/);
        break;
    }
} 
```

当然，这假设只有一个 TextField。如果有多个，我会扩展 MovieClip 并为您要更改的值添加一个公共属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T17:17:23.600

听起来您正在寻找[TextField.setTextFormat()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat%28%29)。您可以调整您的原件`TextFormat`，也可以制作一个全新的。

```
tf.color = 0xFF0000;
capt.setTextFormat(tf); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-04T06:18:01.513

您也可以只使用文本字段的 textColor 属性：

```
capt.textColor = 0xFF0000; 
```

# javascript - 在父 div 中选中的复选框

> ID：14549599
> 
> 赞同：1
> 
> 时间：2013-01-27T16:44:30.253
> 
> 标签：javascript, jquery

我在父 div 中有几个元素复选框、img 和另一个 div。当我单击父 div 时，所有三个元素都将被选择一些背景颜色。这是 html 的外观：

```
<div class="jfmfs-friend" id="812290706"><input class="friend-checkbox" type="checkbox"><img src="//graph.facebook.com/picture"><div class="friend-name">Test user</div></div> 
```

在父 div 选择中，我选中或取消选中复选框

```
elem.delegate(".jfmfs-friend", 'click', function(event) {
$(this).find('input').attr('checked', !$(this).find('input').attr('checked'));
}); 
```

一切正常。但问题是，当我只单击复选框时，它会通过上面的功能并取消选中该复选框。现在复选框未选中，但选择了整个父 div。

我如何确保如果单击复选框我不应该运行此行？

```
 $(this).find('input').attr('checked', !$(this).find('input').attr('checked')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:48:08.577

通过检查事件目标类型或标记名来检查复选框或其他元素是否被单击：

```
elem.on('click', '.jfmfs-friend', function(e) {
    if (e.target.tagName.toLowerCase() != 'input')
        $(this).find('input') 
               .prop('checked', !$(this).find('input').prop('checked'));
}); 
```

# angularjs - 使用 AngularJS 根据选择选项值更新表

> ID：14549607
> 
> 赞同：1
> 
> 时间：2013-01-27T16:45:20.907
> 
> 标签：angularjs

我有一个带有各种 url 查询字符串的下拉（选择选项）菜单。每个选项代表一个发送回 json 数据的服务器端查询。我想要实现的是，当用户选择一个选项时，Angular 会发送一个 $http.get 来获取 json 数据并更新我的应用程序中的一个表。下面是带有一些 Angular 的 html 模型，以（希望）澄清：
...

```
<select>
<option value="http://host:8000/getjsondata.jsp?var=1">option1</option>
<option value="http://host:8000/getjsondata.jsp?var=2">option2</option>

<option value="http://host:8000/getjsondata.jsp?var=N">optionN</option>
</select>

<table>
<tr ng-repeat="result in results">
<td>{{value1}}</td>
<td>{{value2}}</td>

<td>{{valueN}}</td>
</tr>
</table> 
```

在 Angular 中最干净的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T18:51:12.613

```
<select ng-options="obj.val as obj.txt for obj in slctOptions"
        ng-change="update()"
        ng-model="slctItem">

</select>
<table>
  <tr ng-repeat="result in results">
     <td>{{result.value1}}</td>
     <td>{{result.value2}}</td>
     <td>{{result.value3}}</td>
  </tr>
</table>
<script>
function MyCtrl($scope, $http) {
    $scope.slctOptions = [
        {
          val: 'a',
          txt: "option1"
        },
        {
          val: 'b',
          txt: "option2"
        },
        {
          val: 'c',
          txt: "option3"
        },
        {
          val: 'n',
          txt: "optionn"
        },
    ];
    $scope.update = function () {
      $http.get('http://host:8000/getjsondata.jsp?var=' + $scope.slctItem).success(function (data) {
        $scope.results = data;
      });
    };
}
</script> 
```

# objective-c - 移动按钮框后Xcode无法单击按钮

> ID：14549612
> 
> 赞同：0
> 
> 时间：2013-01-27T16:46:08.297
> 
> 标签：objective-c, xcode, uibutton

我在 Interface Builder 中创建了一个带有标签 10 的按钮

在代码中

```
UIButton *btn = (UIButton*)[self.view viewWithTag:10];
btn.frame = CGRectMake(btn.frame.origin.x,btn.frame.origin.y+changeInPos, btn.frame.size.width, btn.frame.size.height); 
```

changeInPos 可以是任何数字，比如说它的 100。所以我的按钮向下移动 100，但它不再在新位置工作，如果我点击它以前的位置，它也不起作用。

移动按钮后我做错了吗？如果知道我已关闭使用自动布局很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:01:42.653

一种可能的解释是按钮移出其包含视图的框架。在这种情况下，它不会收到触摸。

# html - 在父元素底部对齐元素的问题

> ID：14549614
> 
> 赞同：0
> 
> 时间：2013-01-27T16:46:17.857
> 
> 标签：html, css

我正在尝试将 a`<div>`与`<h2>`父 div 底部的 a 对齐。向您展示的最佳方式是通过代码，所以这里是 JSFiddle 示例：http: [//jsfiddle.net/3GGa7/](http://jsfiddle.net/3GGa7/)

如您所见，`project-title`div（及其`<h2>`内部）与 div 的顶部对齐`project-header`。我希望它沉到那个 div 的底部，看起来像这样：

![在此处输入图像描述](../Images/4ac217ebc7e2747ef89d411a558e7ca4.png)

但是，如果我应用 a它会将所有内容都向下推`margin-top`，`project-title`而不仅仅是那个 div，如果我应用填充，黑色背景将覆盖图像。

完成此任务的最优雅方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:58:33.720

由于`.project-title`必须包含在 中`.project-header`，因此给出`.project-header`a`position:relative;`和`.project-title`a`position:absolute;`

```
.project-header {
    height: 100px;
    position:relative;;
}

.project-title {
    background: black;
    opacity: 0.75;
    position:absolute;
    bottom:0px;
    left:0px;
    right:0px;
} 
```

看看[http://jsfiddle.net/gXyEU/](http://jsfiddle.net/gXyEU/)

这样，无论您使用更大的图像，还是更改其位置或边距，您都不必担心标题，它始终会定位在应有的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:00:46.213

如果你不介意`width`设置`.project-header`

```
.project-header {
    width: 335px;
    height: 100px;
    display: table-cell;
    vertical-align: bottom;
} 
```

修改后[的 JSFiddle](http://jsfiddle.net/3GGa7/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:55:13.430

如果你的图片尺寸稳定。你可以试试下面的css：

```
.project {
    width: 335px;
    float: left;
    border: 1px solid #ccc;
    border-radius: 6px;
}

.project-header {
    height: 100px;
}

.project-title {
    background: black;
    opacity: 0.75;
    float:left;
    width:100%;
        margin-top:25%;
}

.project-title h2 {
    color: #fff;
    margin-bottom:0px;
    float:left;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T16:55:29.917

`project-header`只需在div 开始之前关闭你的`project-title`div 就像

```
<div class="project">
    <div class="project-header" style="background-image:url('http://placekitten.com/200/300');" ></div>
        <div class="project-title">
            <h2>Project title</h2>
        </div>

    <div class="project-description">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ornare felis id enim dignissim dapibus. Maecenas dui mi, ullamcorper eget semper non, varius quis orci. Suspendisse lobortis nibh sed nisi luctus dictum. Sed vel arcu eros. Etiam id varius neque. Cras ac sapien in est fringilla tempor vitae et est.</p>
    </div>
</div> 
```

小提琴在[这里](http://jsfiddle.net/3GGa7/10/)

# java - 如何在struts2中以一种形式处理2个提交按钮

> ID：14549618
> 
> 赞同：1
> 
> 时间：2013-01-27T16:47:00.870
> 
> 标签：java, web-applications, struts2

我正在使用struts2 开发一个应用程序。我被困在一个点，我有 2 个按钮，在一个单一的 struts2 形式中。我想要其中一个按钮，而不是调用默认表单操作 bean，尽管基于此按钮 ID 调用它自己的 Jquery 模式对话框。每次我单击按钮时，它都会调用表单操作 bean。如何摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:51:58.050

在表单提交时不要直接调用操作。

单击提交按钮时调用 JavaScript 方法，然后在方法内部控制行为。

```
<script>
  /*
   function doSomething() {
    alert('Form submitted!');
    //perform your expected behavior
  } */
  function fun1(){
     //perform operation
  }
  function fun2(){
     //perform operation
  }
</script>

<form id="formid">
    <input type="submit" value="Submit1" onclick="fun1();">
    <input type="submit" value="Submit2" onclick="fun2();">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:53:02.140

我使用按钮 id 作为参考为 button2 创建了一个 Jquery 函数。单击该函数时会调用此函数。我已将下面的代码行放在该函数的第一行。

```
$('#button2id').click(function(event){
    event.preventDefault();
}); 
```

上面这行代码阻止调用默认的表单动作，即struts2动作bean。

# iphone - 按钮越来越重叠

> ID：14549621
> 
> 赞同：1
> 
> 时间：2013-01-27T16:47:25.453
> 
> 标签：iphone, ios6, uibutton

我是 ios 开发的新手，最近我开始创建简单的计算器，但是当我在模拟器上运行这个应用程序时遇到了一些实际问题。我的按钮越过一圈，在 .xib 中它们彼此相距很远。什么时候解决这个问题，我将按钮移到更远的地方，文本会缩小或隐藏。

图片将解决我的问题![这是我面临的问题，这三个屏幕截图是我重新定位按钮时出现的问题行为：S 请帮助我已经尝试了很多：S](../Images/a5fd95d0d45293235a3c4c37993e9d30.png)

仅供参考：我的模拟器版本是 6.0，xcode 版本是 4.5.2！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:52:21.633

默认情况下，Xcode 4.5.2 中的新项目使用*Autolayout*。要关闭此功能，请选择 .xib 文件，使用文件检查器，然后取消选中“使用自动布局”。这将防止您的子视图在界面中调整超级视图大小时跳动（就像它最初加载时和旋转时一样）。

最终，您需要了解自动布局（以及自动调整大小和一般布局）：

[http://www.aeth.com/iOSBook/ch14.html#_layout](http://www.apeth.com/iOSBook/ch14.html#_layout)

# java - ObjectOutputStream 只读取给它的第一个实例（java）？

> ID：14549625
> 
> 赞同：0
> 
> 时间：2013-01-27T16:47:39.547
> 
> 标签：java, sockets, object, send, objectoutputstream

我已经看过这个问题几次，但老实说我不明白如何让它工作。我有一个客户端和服务器应用程序，服务器有一个 ObjectOutputStream 变量，发送一个包含双整数数组的数组列表（原因是因为它必须发送一个对象，因为普通数组不是对象，我将它包裹在一个数组列表中，以便它能够发送）。客户端通过它的 ObjectInputStream 变量接收它，但它只接收数组列表对象的第一个实例，即使双数组更改了它的编号。我怎样才能让它更新它发送的对象？如何让 ObjectInputStream 每次都接收一个新对象？

-担

服务器：

```
public class Send extends Thread{
     Starter start;
     PlayerArray array;
     Names name;
     public Send(Starter start, PlayerArray array, Names name){
         this.start = start;
         this.array = array;
         this.name = name;
     }
     public void run(){
         while(start.running){
             for(int i = 0; i < start.roomNum; i++){
                 if(start.send[i] != null && start.OOS[i] != null){
                      try{
                          array.setSendingArray(i);
                          start.OOS[i].writeObject(array.get());
                          start.OOS[i].flush();
                      }catch(Exception e){

                      }
                }
             }
         }
    }
} 
```

服务器播放器数组类：（客户端相同）：

```
public class PlayerArray{
Starter start;
int[][] players;
int[][] sending;
public PlayerArray(Starter start){
    this.start = start;
    players = new int[start.roomNum][2];
    defaultArray();
}
public int[][] getArray(){
    return players;
}
public ArrayList<int[][]> get(){
    ArrayList<int[][]> xyWrap = new ArrayList<int[][]>();
    xyWrap.add(sending);
    return xyWrap;
}
public void set(int[][] xy){
    players = xy;
}
public void set(int index, int newX, int newY){
    players[index][0] = newX;
    players[index][1] = newY;
}
public void setSendingArray(int i){
    //take out "i"'s x and y.
    sending = players;
    //sending[i][0] = -1;
    //sending[i][1] = -1;
}
public void defaultArray(){
    for(int i = 0; i < start.roomNum; i++){
        players[i][0] = -1;
        players[i][1] = -1;
    }
    sending = players;
} 
```

客户：

```
public class Recieve extends Thread{
Starter start;
PlayerArray array;
Names name;
public Recieve(Starter start, PlayerArray array, Names name){
    this.start = start;
    this.array = array;
    this.name = name;
}
public void run(){
    while(start.running){
        try{
            ArrayList<int[][]> xy = new ArrayList<int[][]>();
            xy = (ArrayList<int[][]>)start.OIS.readObject();
            array.set(xy.get(0));
            int[][] testXY = array.getArray();
            System.out.println("X:  " + testXY[0][0] + "  Y:  " + testXY[0][1]);
        }catch(Exception e){
            System.err.println("CANNOT READ OBJECT!");
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:39:28.317

当您序列化一个对象时，它会将每个引用替换为一个标记。这意味着如果您两次引用同一个对象或两个对象相互引用，它仍然会正确地（反）序列化对象。

这也意味着

*   两端都有他们发送或接收的每个对象的缓存，这可能是内存泄漏的原因。
*   如果您更新对象并再次发送它，它不会“注意到”更改并且您会获得对原始数据的引用。同样，如果您更改反序列化的对象，即使您更改了它，您仍将获得相同的引用。

这两个问题都有一个解决方案，那就是调用`reset()`ObjectOutputStream。这会清除缓存，防止对象消耗内存并强制它发送任何已发送的对象，以便重新发送。

# ruby-on-rails - 在分页符处截断 CKeditor Rails

> ID：14549626
> 
> 赞同：1
> 
> 时间：2013-01-27T16:47:48.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, truncate

我在 Rails 上有 ruby​​ 的博客，并使用 ckeditor 编辑文本。我需要在分页符处截断我的帖子以便从 ckeditor 打印。

截断前的示例帖子

```
<p style="text-align: justify;">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
<div style="page-break-after: always;">
<span style="display: none;">&nbsp;</span></div>
<p style="text-align: justify;">Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. 
</p> 
```

遇到此元素时如何在保存之前自动截断？

```
<div style="page-break-after: always;">
<span style="display: none;">&nbsp;</span></div> 
```

后截词

```
<p style="text-align: justify;">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p> 
```

在模型上

```
before_save :truncate_post

def truncate_post
  self.aftertruncate = ......
end 
```

感谢帮助..

# java - Apple Extensions 中的 JavaDoc 位置

> ID：14549629
> 
> 赞同：2
> 
> 时间：2013-01-27T16:48:00.150
> 
> 标签：java, macos, osx-lion

我正在 OS X Lion 下开发 Java 应用程序，我想在 Java 7 中使用 Apple 扩展。

我的问题很简单：

我将 Apple Extensiosn 放入我的 Classpath 中，它们位于：/System/Library/Java 但我在该目录中找不到任何 JavaDocs。

这些扩展在哪里解释？有可用的 JavaDoc 吗？

刚刚找到该站点： http: [//developer.apple.com/library/mac/#releasenotes/Java/JavaSnowLeopardUpdate3LeopardUpdate8RN/ResolvedIssues/ResolvedIssues.html#//apple_ref/doc/uid/TP40010380-CH3-DontLinkElementID_12](http://developer.apple.com/library/mac/#releasenotes/Java/JavaSnowLeopardUpdate3LeopardUpdate8RN/ResolvedIssues/ResolvedIssues.html#//apple_ref/doc/uid/TP40010380-CH3-DontLinkElementID_12)但不是真的有帮助。

再说一遍，我不是在 JavaDoc 中搜索 JDK 本身，而是在从这些 Java-Apple-Extensions 中搜索 JavaDoc。

编辑：例如指针类的 JavaDoc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T04:54:46.920

不幸的是，据我所知，Apple Java Extensions 的 javadoc 似乎没有包含在 OpenJDK 7 的下载中。有 3 种方法（AFAIK）可以解决这个问题。

1.  下载 JDK 的源代码，然后自己制作 javadoc：

    这是最难的方法，但也是最彻底的。您必须安装`hg`(mercurial) 才能获取 OpenJDK 的源代码。如果尚未安装，您可以使用 homebrew`brew install hg`或 MacPorts安装它`sudo port install hg`。

    安装后`hg`，可以下载JDK的源代码：

    对于 Java 7：

    ```
    hg clone http://hg.openjdk.java.net/jdk7u/jdk7u/jdk jdk 
    ```

    对于 Java 8：

    ```
    hg clone http://hg.openjdk.java.net/jdk8/jdk8/jdk jdk 
    ```

    现在您已经下载了源代码，您只需要制作 javadoc。

    要为 Apple Java 扩展构建 javadoc：

    ```
    javadoc -d doc $(find jdk/src/macosx/classes/apple jdk/src/macosx/classes/com/apple -name *.java) 
    ```

    为整个 JDK（包括 Apple Java 扩展）构建 javadoc：

    ```
    javadoc -d doc $(find jdk/src/macosx/classes/ -name *.java) 
    ```

    如果您使用 Java 8 构建 javadoc，则必须提供`-Xdoclint:none`一个附加参数才能`javadoc`使其正常工作。

    `doc`其中任何一个都会将所有文档放在当前目录中调用的文件夹中。之后您可以删除该`jdk`文件夹（这是放置 JDK 源的位置）。

2.  使用旧版本（来自 Apple 的 java 6）。

    Apple 下载的 java 6（仅限开发人员 JDK）包括 Apple Java Extensions 的 javadocs。AFAIK 从那时起他们就没有改变过，所以它是否旧并不重要（尽管它会有不同的 javadoc 风格）。目前，Apple 的 java 开发人员包可从[https://developer.apple.com/downloads/index.action?q=java](https://developer.apple.com/downloads/index.action?q=java)获得，但它们`developer.apple.com`经常更换，因此该链接可能很快就会断开。

    下载并安装后，它将在`/Library/Java/JavaVirtualMachines/`名为`1.6.0_something`. 在这个（右键单击 → 显示包内容）中，在`Contents/Home`, is 中`appledocs.jar`，其中包含您要查找的 javadoc。

3.  用我的。

    我使用与第 1 节中描述的完全相同的方法为 Apple Java Extensions 编译了一个 javadoc。我不会让它保持最新状态，但是 AFAIK 他们还没有更新 Apple Java Extensions，所以没关系。

    *   [Java 6](https://www.dropbox.com/s/damqio0j4weoivz/appledocs1.6.jar?dl=1)（取自 Apple Java 6）
    *   [Java 7](https://www.dropbox.com/s/egae1gjocbk4gt8/appledocs1.7.jar?dl=1)（从 OpenJDK 7 构建）
    *   [Java 8](https://www.dropbox.com/s/tap0h0upc3cxrht/appledocs1.8.jar?dl=1)（从 OpenJDK 8 构建）

# android - 离线时webView不显示网站

> ID：14549638
> 
> 赞同：7
> 
> 时间：2013-01-27T16:48:57.090
> 
> 标签：android, caching, webview

我有一个向 GCM 注册推送通知的应用程序。该代码工作正常，不是我的问题的根源。注册后，该应用程序只需在 WebView 中显示一个网站。到目前为止，如果设备的网络适配器已打开，所有这些都可以正常工作。

如果网络适配器被关闭，那么 webview 应该从缓存中加载。这部分不起作用。我已经按照下面的教程进行了一些操作，将网站页面保存在 sdcard 上的缓存中。

如果我运行该应用程序，则会显示该网站。如果我然后关闭网络适配器并访问该站点，它将不会显示。我检查了 sdcard 上的缓存目录，网站的部分内容已写入缓存。

为什么离线时站点不从缓存中加载？

是否可以将网页保留在缓存中，直到应用程序被卸载或 android 另有决定？

[教程](http://www.devahead.com/blog/)

本教程向您展示了如何在 sdcard 上创建一个目录并写入它。目录确实存在，但在离线模式下不会从此缓存中恢复 webview。

下面是我如何调用显示 web 视图的 mainactivity。

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
                //i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                i.putExtra("name", "hardcoded client name");
                i.putExtra("email", "hardcoded email");
                startActivity(i);
                finish(); 
```

.

这是完整的 MainActivity。您可以忽略第一部分，因为这是处理 GCM 推送通知内容的代码，一切正常。我需要知道为什么 webview 不会从缓存中加载。

```
 import static com.bmi.bmitestapp.CommonUtilities.DISPLAY_MESSAGE_ACTION;
import static com.bmi.bmitestapp.CommonUtilities.EXTRA_MESSAGE;
import static com.bmi.bmitestapp.CommonUtilities.SENDER_ID;

import java.io.File;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.TextView;
import android.widget.Toast;
import android.webkit.*;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {
    private static final String TAG = MainActivity.class.getSimpleName();
    // label to display gcm messages
    TextView lblMessage;
    WebView webView;
    // Asyntask
    AsyncTask<Void, Void, Void> mRegisterTask;

    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();

    // Connection detector
    ConnectionDetector cd;

    public static String name;
    public static String email;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.e(TAG, "in onCreate in mainactivity");
        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
//        if (!cd.isConnectingToInternet()) {
//            // Internet Connection is not present
//            alert.showAlertDialog(MainActivity.this,
//                    "Internet Connection Error",
//                    "Please connect to working Internet connection", false);
//            // stop executing code by return
//            return;
//        }

        // Getting name, email from intent
        Intent i = getIntent();

        name = i.getStringExtra("name");
        email = i.getStringExtra("email");     

        // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(this);

        // Make sure the manifest was properly set - comment out this line
        // while developing the app, then uncomment it when it's ready.
        GCMRegistrar.checkManifest(this);

        lblMessage = (TextView) findViewById(R.id.lblMessage);

        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                DISPLAY_MESSAGE_ACTION));

        // Get GCM registration id
        final String regId = GCMRegistrar.getRegistrationId(this);

        // Check if regid already presents
        if (regId.equals("")) {
            // Registration is not present, register now with GCM
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            // Device is already registered on GCM
            if (GCMRegistrar.isRegisteredOnServer(this)) {
                // Skips registration.
                Toast.makeText(getApplicationContext(), "Already registered with GCM", Toast.LENGTH_LONG).show();
            } else {
                // Try to register again, but not in the UI thread.
                // It's also necessary to cancel the thread onDestroy(),
                // hence the use of AsyncTask instead of a raw thread.
                final Context context = this;
                mRegisterTask = new AsyncTask<Void, Void, Void>() {

                    @Override
                    protected Void doInBackground(Void... params) {
                        // Register on our server
                        // On server creates a new user
                        ServerUtilities.register(context, name, email, regId);
                        return null;
                    }

                    @Override
                    protected void onPostExecute(Void result) {
                        mRegisterTask = null;
                    }

                };
                mRegisterTask.execute(null, null, null);
            }
        }

            webView = (WebView)findViewById(R.id.webView1);
            // Initialize the WebView
            webView.getSettings().setSupportZoom(true);
            webView.getSettings().setBuiltInZoomControls(true);
            webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
            webView.setScrollbarFadingEnabled(true);
            webView.getSettings().setLoadsImagesAutomatically(true);

            webView.getSettings().setDomStorageEnabled(true);

            // Set cache size to 8 mb by default. should be more than enough
            webView.getSettings().setAppCacheMaxSize(1024*1024*8);

            // This next one is crazy. It's the DEFAULT location for your app's cache
            // But it didn't work for me without this line.
            // UPDATE: no hardcoded path. Thanks to Kevin Hawkins
            String appCachePath = getApplicationContext().getCacheDir().getAbsolutePath();
            Log.e(TAG, "appCachePath = " + appCachePath);
            webView.getSettings().setAppCachePath(appCachePath);
            webView.getSettings().setAllowFileAccess(true);
            webView.getSettings().setAppCacheEnabled(true);

            // Load the URLs inside the WebView, not in the external web browser
            webView.setWebViewClient(new WebViewClient());   

            if (savedInstanceState == null)
                        {

        if(isNetworkAvailable() == true){
            Log.e(TAG, "we have a network connection");
            webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);

            webView.loadUrl("http://bmi.cubecore.co.uk");

        } else {
            Log.e(TAG, "we don't have a network connection");
            webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ONLY);

            webView.loadUrl("http://bmi.cubecore.co.uk");
        }

                        } 

    }      //end of oncreate

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }

    /**
     * Receiving push messages
     * */
    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

            // Showing received message
            lblMessage.append(newMessage + "\n");
            Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }
    };

    @Override
    protected void onDestroy() {
        super.onDestroy();

        // Clear the cache (this clears the WebViews cache for the entire application)
        //webView.clearCache(false);

        if (mRegisterTask != null) {
            mRegisterTask.cancel(true);
        }
        try {
            unregisterReceiver(mHandleMessageReceiver);
            GCMRegistrar.onDestroy(this);
        } catch (Exception e) {
            Log.e("UnRegister Receiver Error", "> " + e.getMessage());
        }

    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();

    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.e(TAG, "in onResume in mainactivity");

    }

    @Override
    public File getCacheDir()
    {
        // NOTE: this method is used in Android 2.1
Log.e(TAG, "getcachedir");
        return getApplicationContext().getCacheDir();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);

        // Save the state of the WebView
        webView.saveState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState)
    {
        super.onRestoreInstanceState(savedInstanceState);

        // Restore the state of the WebView
        webView.restoreState(savedInstanceState);
    }

} 
```

.

这是上面教程中写入 sdcard 的代码。

```
package com.bmi.bmitestapp;

import java.io.File;

import android.app.Application;
import android.os.Environment;
import android.util.Log;

public class ApplicationExt extends Application
{
    private static final String TAG = ApplicationExt.class.getSimpleName();
    // NOTE: the content of this path will be deleted
    //       when the application is uninstalled (Android 2.2 and higher)
    protected File extStorageAppBasePath;

    protected File extStorageAppCachePath;

    @Override
    public void onCreate()
    {
        super.onCreate();
         Log.e(TAG, "inside appext");
        // Check if the external storage is writeable
        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()))
        {

            // Retrieve the base path for the application in the external storage
            File externalStorageDir = Environment.getExternalStorageDirectory();

            if (externalStorageDir != null)
            {
                // {SD_PATH}/Android/data/com.devahead.androidwebviewcacheonsd
                extStorageAppBasePath = new File(externalStorageDir.getAbsolutePath() +
                    File.separator + "Android" + File.separator + "data" +
                    File.separator + getPackageName());
            }

            if (extStorageAppBasePath != null)
            {
                // {SD_PATH}/Android/data/com.devahead.androidwebviewcacheonsd/cache
                extStorageAppCachePath = new File(extStorageAppBasePath.getAbsolutePath() +
                    File.separator + "cache");

                boolean isCachePathAvailable = true;

                if (!extStorageAppCachePath.exists())
                {
                    // Create the cache path on the external storage
                    isCachePathAvailable = extStorageAppCachePath.mkdirs();
                }

                if (!isCachePathAvailable)
                {
                    // Unable to create the cache path
                    extStorageAppCachePath = null;
                }
            }
        }
    }

    @Override
    public File getCacheDir()
    {
        // NOTE: this method is used in Android 2.2 and higher

        if (extStorageAppCachePath != null)
        {
            // Use the external storage for the cache
            Log.e(TAG, "extStorageAppCachePath = " + extStorageAppCachePath);
            return extStorageAppCachePath;
        }
        else
        {
            // /data/data/com.devahead.androidwebviewcacheonsd/cache
            return super.getCacheDir();
        }
    }
} 
```

我想我会包括一些日志记录。这是网络适配器打开的全新安装的日志记录。

```
01-29 14:13:10.220: D/dalvikvm(16904): Late-enabling CheckJNI
01-29 14:13:10.470: E/ApplicationExt(16904): inside appext
01-29 14:13:10.720: E/RegisterActivity(16904): in onresume in registeractivity
01-29 14:13:10.880: D/libEGL(16904): loaded /system/lib/egl/libEGL_tegra.so
01-29 14:13:11.000: D/libEGL(16904): loaded /system/lib/egl/libGLESv1_CM_tegra.so
01-29 14:13:11.030: D/libEGL(16904): loaded /system/lib/egl/libGLESv2_tegra.so
01-29 14:13:11.070: D/OpenGLRenderer(16904): Enabling debug mode 0
01-29 14:13:18.390: E/ApplicationExt(16904): extStorageAppCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:13:18.390: D/webview(16904): [InitTabEffectPivot] >> nScreenWidth = 720
01-29 14:13:18.390: D/webview(16904): [InitTabEffectPivot] >> nScreenHeight = 1280
01-29 14:13:18.390: D/SqliteDatabaseCpp(16904): Registering sqlite logging func: /data/data/com.bmi.bmitestapp/databases/webview.db
01-29 14:13:18.390: D/SqliteDatabaseCpp(16904): DB info: open db, path = /data/data/com.bmi.bmitestapp/databases , key = sefraes, flag = 6, cannot stat file, errno = 2, message = No such file or directory
01-29 14:13:18.400: E/MainActivity(16904): in onCreate in mainactivity
01-29 14:13:18.400: D/SqliteDatabaseCpp(16904): DB info: path = /data/data/com.bmi.bmitestapp/databases , key = sefraes, handle: 0x1f9a858, type: w, r/w: (0,1), mode: delete, disk free size: 1276 M
01-29 14:13:18.400: D/GCMRegistrar(16904): resetting backoff for com.bmi.bmitestapp
01-29 14:13:18.420: V/GCMRegistrar(16904): Registering app com.bmi.bmitestapp of senders 598080744593
01-29 14:13:18.430: E/ApplicationExt(16904): extStorageAppCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:13:18.430: E/MainActivity(16904): appCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:13:18.430: E/MainActivity(16904): we have a network connection
01-29 14:13:18.430: E/MainActivity(16904): in onResume in mainactivity
01-29 14:13:18.490: W/webcore(16904): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1974)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.WebViewCore$EventHub.access$9100(WebViewCore.java:1008)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.WebViewCore.removeMessages(WebViewCore.java:2215)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.WebView.sendOurVisibleRect(WebView.java:3285)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:772)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.ZoomManager.access$1900(ZoomManager.java:59)
01-29 14:13:18.490: W/webcore(16904):   at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:1345)
01-29 14:13:18.490: W/webcore(16904):   at android.os.Handler.handleCallback(Handler.java:608)
01-29 14:13:18.490: W/webcore(16904):   at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 14:13:18.490: W/webcore(16904):   at android.os.Looper.loop(Looper.java:156)
01-29 14:13:18.490: W/webcore(16904):   at android.app.ActivityThread.main(ActivityThread.java:5045)
01-29 14:13:18.490: W/webcore(16904):   at java.lang.reflect.Method.invokeNative(Native Method)
01-29 14:13:18.490: W/webcore(16904):   at java.lang.reflect.Method.invoke(Method.java:511)
01-29 14:13:18.490: W/webcore(16904):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-29 14:13:18.490: W/webcore(16904):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-29 14:13:18.490: W/webcore(16904):   at dalvik.system.NativeStart.main(Native Method)
01-29 14:13:18.500: W/webcore(16904): java.lang.Throwable: EventHub.removeMessages(int what = 105) is not supported before the WebViewCore is set up.
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1974)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.WebViewCore$EventHub.access$9100(WebViewCore.java:1008)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.WebViewCore.removeMessages(WebViewCore.java:2215)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.WebView.sendViewSizeZoom(WebView.java:3520)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:778)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.ZoomManager.access$1900(ZoomManager.java:59)
01-29 14:13:18.500: W/webcore(16904):   at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:1345)
01-29 14:13:18.500: W/webcore(16904):   at android.os.Handler.handleCallback(Handler.java:608)
01-29 14:13:18.500: W/webcore(16904):   at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 14:13:18.500: W/webcore(16904):   at android.os.Looper.loop(Looper.java:156)
01-29 14:13:18.500: W/webcore(16904):   at android.app.ActivityThread.main(ActivityThread.java:5045)
01-29 14:13:18.500: W/webcore(16904):   at java.lang.reflect.Method.invokeNative(Native Method)
01-29 14:13:18.500: W/webcore(16904):   at java.lang.reflect.Method.invoke(Method.java:511)
01-29 14:13:18.500: W/webcore(16904):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-29 14:13:18.500: W/webcore(16904):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-29 14:13:18.500: W/webcore(16904):   at dalvik.system.NativeStart.main(Native Method)
01-29 14:13:18.530: D/OpenGLRenderer(16904): Flushing caches (mode 0)
01-29 14:13:18.570: I/SqliteDatabaseCpp(16904): sqlite returned: error code = 1, msg = no such table: CacheGroups
01-29 14:13:18.570: I/SqliteDatabaseCpp(16904): sqlite returned: error code = 1, msg = no such table: Caches
01-29 14:13:18.570: I/SqliteDatabaseCpp(16904): sqlite returned: error code = 1, msg = no such table: Origins
01-29 14:13:18.570: I/SqliteDatabaseCpp(16904): sqlite returned: error code = 1, msg = no such table: DeletedCacheResources
01-29 14:13:18.850: E/ApplicationExt(16904): extStorageAppCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:13:19.330: I/PRIME(16904): <CallBackProxy> Send to WebViewClient.
01-29 14:13:19.370: V/GCMBroadcastReceiver(16904): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-29 14:13:19.370: V/GCMBroadcastReceiver(16904): GCM IntentService class: com.bmi.bmitestapp.GCMIntentService
01-29 14:13:19.370: V/GCMBaseIntentService(16904): Acquiring wakelock
01-29 14:13:19.460: V/GCMBaseIntentService(16904): Intent service name: GCMIntentService-598080744593-1
01-29 14:13:19.470: E/GCMRegistrar(16904): internal error: retry receiver class not set yet
01-29 14:13:19.480: V/GCMRegistrar(16904): Registering receiver
01-29 14:13:19.480: D/GCMBaseIntentService(16904): handleRegistration: registrationId = APA91bFytZvnkmsEVHSnw5VRxIwfPRmPsSRVrgRNRa5ww3oqCfnLEZMaBBNtQtlZoK4RD4VQXfAfKDsQUa53PwQBH_rwuI_gEEdHQhxadpBVmJ7L3Dxy90Bzryg_aCWx20-cdZ32cbiiaGR3zUMjpqZizYQbnARN4w, error = null, unregistered = null
01-29 14:13:19.480: D/GCMRegistrar(16904): resetting backoff for com.bmi.bmitestapp
01-29 14:13:19.480: V/GCMRegistrar(16904): Saving regId on app version 1
01-29 14:13:19.490: I/GCMIntentService(16904): Device registered: regId = APA91bFytZvnkmsEVHSnw5VRxIwfPRmPsSRVrgRNRa5ww3oqCfnLEZMaBBNtQtlZoK4RD4VQXfAfKDsQUa53PwQBH_rwuI_gEEdHQhxadpBVmJ7L3Dxy90Bzryg_aCWx20-cdZ32cbiiaGR3zUMjpqZizYQbnARN4w
01-29 14:13:19.490: D/NAME(16904): hardcoded client name
01-29 14:13:19.490: I/bmi GCM(16904): registering device (regId = APA91bFytZvnkmsEVHSnw5VRxIwfPRmPsSRVrgRNRa5ww3oqCfnLEZMaBBNtQtlZoK4RD4VQXfAfKDsQUa53PwQBH_rwuI_gEEdHQhxadpBVmJ7L3Dxy90Bzryg_aCWx20-cdZ32cbiiaGR3zUMjpqZizYQbnARN4w)
01-29 14:13:19.490: D/bmi GCM(16904): Attempt #1 to register
01-29 14:13:19.500: V/bmi GCM(16904): Posting 'email=hardcoded email&regId=APA91bFytZvnkmsEVHSnw5VRxIwfPRmPsSRVrgRNRa5ww3oqCfnLEZMaBBNtQtlZoK4RD4VQXfAfKDsQUa53PwQBH_rwuI_gEEdHQhxadpBVmJ7L3Dxy90Bzryg_aCWx20-cdZ32cbiiaGR3zUMjpqZizYQbnARN4w&name=hardcoded client name' to http://mobilewebexpert.co.uk/pushtest/register.php
01-29 14:13:19.500: E/URL(16904): > http://mobilewebexpert.co.uk/pushtest/register.php
01-29 14:13:20.610: V/GCMRegistrar(16904): Setting registeredOnServer status as true until 2013-02-05 14:13:20.617
01-29 14:13:20.620: V/GCMBaseIntentService(16904): Releasing wakelock
01-29 14:13:21.470: D/skia(16904): notifyPluginsOnFrameLoad not postponed
01-29 14:13:21.570: D/SQLiteDatabase(16904): Create pool connection
01-29 14:13:21.570: D/SqliteDatabaseCpp(16904): DB info: open db, path = /data/data/com.bmi.bmitestapp/databases , key = sefraes, flag = 1, file size = 12288
01-29 14:13:21.570: D/SqliteDatabaseCpp(16904): DB info: path = /data/data/com.bmi.bmitestapp/databases , key = sefraes, handle: 0x2797350, type: r, r/w: (1,1), mode: wal, disk free size: 1276 M 
```

.

这是我关闭网络适配器后的日志记录。

```
01-29 14:16:57.080: E/RegisterActivity(16904): in onresume in registeractivity
01-29 14:17:03.490: D/webview(16904): [InitTabEffectPivot] >> nScreenWidth = 720
01-29 14:17:03.490: D/webview(16904): [InitTabEffectPivot] >> nScreenHeight = 1280
01-29 14:17:03.490: E/MainActivity(16904): in onCreate in mainactivity
01-29 14:17:03.490: V/GCMRegistrar(16904): Is registered on server: true
01-29 14:17:03.500: E/ApplicationExt(16904): extStorageAppCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:17:03.500: E/MainActivity(16904): appCachePath = /mnt/sdcard/Android/data/com.bmi.bmitestapp/cache
01-29 14:17:03.500: E/MainActivity(16904): we don't have a network connection
01-29 14:17:03.500: E/MainActivity(16904): in onResume in mainactivity
01-29 14:17:03.500: D/chromium(16904): Unknown chromium error: -400
01-29 14:17:03.540: D/skia(16904): notifyPluginsOnFrameLoad not postponed
01-29 14:17:03.580: D/OpenGLRenderer(16904): Flushing caches (mode 0) 
```

我注意到一件事，它可能什么都不是，但 registeractivity 是调用 MainActivity 的活动。RegisterActivity 只有一个按钮，可以触发 MainActivity 的 Intent。网络适​​配器关闭后，我必须按下 registerAcivity 上的按钮，该按钮在 MainActivity 中调用 onCreate。就像它是 MainActivity 的一个新实例？？这是否会影响 webview 的缓存。实际上，主要活动的 onDestroy 必须在此过程中被调用。

还有一件事引起了我的注意。

```
01-29 14:17:03.580: D/OpenGLRenderer(16904): Flushing caches (mode 0) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T00:45:36.693

对于该特定 URL `http://bmi.cubecore.co.uk`，该 http 服务器禁止您的 WebView 缓存，请参阅响应标头**Cache-Control**：

```
200 OK
... ...
Pragma: no-cache
Server: Apache/2.2.3 (CentOS)
Content-Type: text/html; charset=utf-8
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Expires: Thu, 19 Nov 1981 08:52:00 GMT 
```

这意味着客户端必须始终从 http 服务器连接和加载 URL，而不是从其本地缓存。这也解释了为什么`Unknown chromium error: -400`在关闭网络适配器后尝试加载页面时发生。`Unknown chromium error: -400`通常意味着由于某种原因无法连接互联网。

如果没有登录和调整 http 服务器设置，您将无能为力。您可以使用以下 URL 检查您的缓存实现：

```
http://stackoverflow.com/questions/14549638/webview-not-displaying-website-when-offline 
```

响应头是：

```
200 OK
... ...
Last-Modified: Wed, 30 Jan 2013 00:28:59 GMT
Vary: *
Content-Type: text/html; charset=utf-8
Cache-Control: public, max-age=60
Expires: Wed, 30 Jan 2013 00:29:59 GMT 
```

如果您的代码中没有其他问题，则您的缓存实现应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T00:51:48.457

这不是 http 缓存的用途。如果你想为 html 页面启用离线访问，你应该使用 AppCache。试试这两个教程：

*   [https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache)
*   [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

如果您正在编写原生 Android 应用程序，我不会使用 AppCache。加载您想为自己服务的文档，然后使用 WebView.loadData(...) 将它们加载到 webview 中，或者创建一个 ContentProvider 并使用带有 content:// 前缀的 WebView.loadUrl。使用 ContentProvider 是最好的方法，但加载数据 url 应该可以快速测试。

我希望这可以帮助您入门，如果您需要帮助从应用程序中的 URL 加载数据，请回复。

# mysql - SQL命令少数记录asc和其余的desc

> ID：14549643
> 
> 赞同：0
> 
> 时间：2013-01-27T16:49:16.533
> 
> 标签：mysql, sql, database

> **可能重复：**
> [MySQL 按数字排序，最后为 Null](https://stackoverflow.com/questions/2051602/mysql-orderby-a-number-nulls-last)

我有一个这样的列的表。

```
NULL
NULL
2012-10-12
NULL
2013-10-17
2012-10-17 
```

我想对 asc 中的日期字段和 NULL 值进行排序以排到最后，以获得类似的结果

```
2012-10-12
2012-10-17
2013-10-17
NULL
NULL
NULL 
```

我做了`select xyz from table order by xyz.abc asc;`它打印了这个的反面。

`case`此外，使用和功能围绕 order_by 玩`IF`，但无法获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:14:33.423

你试过这个吗？

```
SELECT `xyz` FROM `your_table`
ORDER BY (`abc` IS NULL),`abc` 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T16:51:23.587

尝试 ：：

```
 select xyz from table where abc is not null order by abc asc
    UNION 
    select xyz from table where abc is null 
```

# css - MVC4 中的背景图像不起作用

> ID：14549644
> 
> 赞同：1
> 
> 时间：2013-01-27T16:49:28.630
> 
> 标签：css, asp.net-mvc-4, background-image

我正在使用 mvc 4 的基本模板。我想为我的 div 元素设置背景图像。我的样式表位于“~/Content”目录中。这是我的 .cshtml 文件的一部分，我正在尝试直接指定没有 css 的图像：

```
 <div id="add_image" class ="image_bar" style="background-image:url(add.jpg)" ></div> 
```

这是我的CSS：

```
#add_image {
    background-image:url('~/add.jpg');
}

#add_image:hover {
    background-image:url('~/addhover.jpg');
}
.image_bar {
    width:40px;
    height:40px;
} 
```

css 和直接“样式”都不起作用 - 有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:52:54.817

在您的第二个示例中，您使用的是“~/”名字对象，这是一个 .NET 事物，它指示代码查看站点的根目录。由于 .NET 引擎不处理您的 CSS 文件，因此“~/”没有任何效果，并且可能会向服务器发出非常丑陋的 HTTP 请求。

由于您的内容目录中有 CSS，因此一种解决方案是在您的内容中创建一个名为“图像”的子目录。将所有 CSS 图像存储在该文件夹中。然后，从您的 CSS 文件中，您可以调用和引用该文件中的图像，如下所示：

```
#add_image {
    background-image:url('images/add.jpg');
}

#add_image:hover {
    background-image:url('images/addhover.jpg');
} 
```

这是假设一个像这样的目录结构：

*   内容
    *   图片
        *   添加.jpg
        *   addhover.jpg
    *   网站.css

虽然我不是设计师，但我相信 CSS 会查找与 CSS 文件位置相关的图像，而不是像 HTML 这样的 Web 应用程序的根目录。此外，如果您将图像存储在与 CSS 文件相同的目录中，那么您应该能够在没有“images/”前缀的情况下调用这些图像。但是，大多数人喜欢将资源分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T09:23:17.047

尝试

`background-image:url('../add.jpg')`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T19:15:10.173

代替

> 背景图片:url('~/add.jpg');

尝试使用

> 背景图像：url（'./add.jpg'）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-12T09:40:52.987

试试这个**示例 -

```
background-image:url('../img/home_bg.jpg');**

background-image:url('../**ImageFolderName**/add.jpg'); 
```

# ios - MonoTouch：UITableView 中的 RegisterClassForCellReuse 抛出 NSInvalidArgumentException

> ID：14549646
> 
> 赞同：2
> 
> 时间：2013-01-27T16:49:38.027
> 
> 标签：ios, xamarin.ios

我正在尝试在 tableView 中注册我自己的类，以便我可以使用内部单元池，但它在我尝试调用它的第二个崩溃

```
this._cellIdentifier = new NSString(VignetteCell.vignetteIdentifier);
this._photosListTableView.RegisterClassForCellReuse(typeof(UITableViewCell), this._cellIdentifier); 
```

我也尝试使用“typeof（VignetteCell）”，但它也失败了。奇怪的是它不会在模拟器上崩溃。

这就是我得到的：

```
[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[UITableView registerClass:forCellReuseIdentifier:]: unrecognized selector sent to instance 0x1cf3800
at MonoTouch.UIKit.UITableView.RegisterClassForCellReuse (IntPtr cellClass, MonoTouch.Foundation.NSString reuseIdentifier) [0x00027] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UITableView.g.cs:743 
at MonoTouch.UIKit.UITableView.RegisterClassForCellReuse (System.Type cellType, MonoTouch.Foundation.NSString reuseIdentifier) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UITableView.cs:34 
... 
```

我只是在谷歌上发现没有提到它，好像我是这个星球上唯一一个尝试过的人！

无论如何，感谢您的帮助！

[编辑]

解决方案：事实上，它在 iOS 5 上不起作用。我在我的 iPhone 5 上尝试过，它运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:00:27.800

你在什么设备/模拟器上运行它？由于这是 iOS 6 特有的功能，它需要在 iOS 6 上运行，并且在 iOS 5 上运行会导致以下错误消息。

# c - 在C中用空字符分割字符串

> ID：14549649
> 
> 赞同：-5
> 
> 时间：2013-01-27T16:49:41.953
> 
> 标签：c

我正在从文件中读取，需要用空字符分割字符串。

```
 *Buff = "ABC \0 NAME \0 1231 \0 12.32";
    Tok = strtok(Buff,'\0');
    printf("Tok %s \n", Tok); 
```

这不起作用，strtok 不能带空参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:52:33.040

只需用于 `strlen(the_string) + 1`获取令牌：

例子：

```
Tok = Buff;
Tok += strlen(Tok) + 1;    // first token
Tok += strlen(Tok) + 1;    // second token
Tok += strlen(Tok) + 1;    // third token, etc. 
```

终止条件是当`Tok >= Buff + sizeof "ABC \0 NAME \0 1231 \0 12.32"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:52:26.847

你不需要`strtok`。只需继续`strlen`查找令牌的长度并将其添加到您的指针 + 1。

正如 Carl Norum 指出的那样，您需要字符串的完整长度，因为 a`\0`不会告诉您字符串实际停止的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:54:00.050

`strtok`不使用分隔符有一个很好的理由`'\0'`：如果不知道字符串的完整长度，就无法解决这个问题。否则，当您发现 时`'\0'`，您不知道这是分隔符还是字符串已经结束。请注意，这`strlen`无济于事 - 它会在发现第一个嵌入时立即停止`'\0'`。

除了那个“小”问题，您需要做的就是发现标记的开头：它们恰好是`'\0'`您之前发现的字符之后的一个字符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T17:17:57.657

你需要这个：

```
char Buff[] = "ABC \\0 NAME \\0 1231 \\0 12.32";
char delims[] = "\0"  ;
char *result = NULL;  
result = strtok( Buff, delims ); 
```

现在您可以简单地遍历“结果”，直到获得 NULL，即所有字符串都已找到！

干杯

# ios - 拍摄家庭屏幕截图并将其用作应用程序的背景

> ID：14549652
> 
> 赞同：-1
> 
> 时间：2013-01-27T16:50:24.563
> 
> 标签：ios, background, screenshot, transparent, homescreen

我想在我的应用程序中伪造一个透明背景，所以我认为最好的方法是截取房屋的屏幕截图并将其用作背景。

唯一的问题在于，如果不实际启动应用程序，您不可能让应用程序截取屏幕截图，所以我的问题是：

有什么方法可以告诉我的应用程序截取房屋的屏幕截图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:58:40.110

您可能需要重新考虑您的设计。如果不越狱，您就无法做到这一点。它也很难维护以确保它是最新的，并且用户会看到它过去。此外，使用这种方法的应用程序极不可能通过审核过程。

# php - javascript循环中的Codeigniter方法

> ID：14549653
> 
> 赞同：0
> 
> 时间：2013-01-27T16:50:30.293
> 
> 标签：php, javascript, codeigniter

我有以下 javascript 循环，它正确地提醒我需要在 Codeigniter 方法中使用的值。这是js循环：

```
function myInsert(){
    $('input[name=r_maybe].r_box').each(function(){
      if( $(this).prop('checked') ){ 
          // need to replace this alert with codeigniter method below
          alert ($(this).prop('value'));                
       } 
    });
} 
```

我需要以某种方式执行此 Codeigniter 方法，而不是提醒所需的值：

```
//this would never work because it mixes JS with PHP, but I need a workaround
$this->appeal_model->myMethod($(this).prop('value'), 888, 999); 
```

有没有办法可以在 javascript 循环中运行这个 PHP 代码？我知道 PHP 是服务器端，而 JS 是客户端，但我确信我的问题必须有一个我还不知道的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:00:17.877

对此的解决方案是对服务器进行 ajax 调用，您可以在控制器上有一个方法来调用您的 codeigniter 方法。这将您的 php 调用和客户端调用分开。

如果要向数据库中插入某些内容，则应使用 ajax post 方法。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
function myInsert() { 
  $('input[name=r_maybe].r_box').each(function(){ 
    if( $(this).prop('checked') ){ 
      var value = $(this).prop('value');
      $.post("controllername/functionname", { value: value }, function(data) { 
        alert(data); // Returned message from the server
      }); 
     } 
  }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:00:33.833

使用ajax将数据存储到服务器端：代码应该是这样的：

```
 function myInsert(){

        $dataArray=[];

        $('input[name=r_maybe].r_box').each(function(){

          if( $(this).prop('checked') ){ 

              // need to replace this alert with codeigniter method below
              dataArray.push($(this).prop('value'))
              } 
          });

if(dataArray.length>0)
{
    $.ajax({
    url:"your file name",//this file should contain your server side scripting
    type:"POST",
    data:{dataName : dataArray}
    success:function(){
    }

    });       
}
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:16:14.087

你可以[`$.post`](http://api.jquery.com/jQuery.post/)从**jquery使用**

```
function myInsert(){
    $('input[name=r_maybe].r_box').each(function(){
      if( $(this).prop('checked') ){ 

        $.post('<?php echo site_url("controllerName/functionName")?>', 
        {"post1": $(this).prop('value'), "post2":888, "post3": 999 },
         function(data.res == "something"){ 
         //here you can process your returned data. 
         }, "json"); //**             
       } 
    });
} 
```

在您的控制器中，您可以拥有：

```
function functionName()
{
//getting your posted sec token.
   $post1 = $this->input->post('post1'); 
   $post2 = $this->input->post('post2'); 
   $post3 = $this->input->post('post3'); 
   $data['res'] = "something";// return anything you like.
// you should use json_encode here because your post's return specified as json. see **
   echo json_encode($data); //$data is checked in the callback function in jquery.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T00:34:40.490

由于这会将数据直接转储到您的数据库中，因此请确保这也以某种方式得到保护，即谁有权访问该控制器功能以及对传递的数据进行的清理/验证量。

# mysql - MySQL AND 关键字问题

> ID：14549654
> 
> 赞同：0
> 
> 时间：2013-01-27T16:50:29.980
> 
> 标签：mysql

我有一个行为奇怪的查询...

首先，这是一个查询，用于获取所有 PM，无论它们是否已为用户 ID 1 读取或删除：

```
SELECT * FROM `pms` WHERE `toid` = '1' 
```

这将按预期返回`3`行。接下来，让我们看看我是否只能获取该用户的未读消息：

```
SELECT * FROM `pms` WHERE `toid` = '1' AND `read` = '0' 
```

这将按预期返回`2`行。让我们看看我是否可以得到任何已被分箱的已读和未读消息：

```
SELECT * FROM `pms` WHERE `toid` = '1' AND `binned` = '0' 
```

这将按预期返回`2`行。

我需要运行的查询是获取指定用户 ID 的所有未读和未合并的消息。为此，我正在这样做：

```
SELECT * FROM `pms` WHERE `toid` = '1' AND `read` = '0' AND `binned` = '0' 
```

但是，它应该返回`1`行，因为我知道在数据库中有一条带有`toid`as `1`，`read`as`0`和`binned`as的消息，`0`但是由于某种原因，上面的查询正在返回`0`行...

为什么是这样？

* * *

## 更新

这是我在 Sequel Pro 中看到的表格结构的屏幕截图：

![截屏](../Images/304f91fcdb1cb3cf995083285fd1094d.png)

这是在 Sequel Pro 中看到的表格内数据的屏幕截图：

![截图2](../Images/bf16ef839f348c5b6e3b39d6362d67d5.png)

如您所见，肯定有 1 条记录，tid 为 1，读为 0，分箱为 0。

* * *

## 更新 2

这些是 ENUM 的原因是因为我希望在 MySQL 中存储一个布尔值。我通过将列强制为“1”或“0”并使其默认为“0”来做到这一点。如果有人有更好的方法在 MySQL 中存储布尔值，那么我很乐意学习。

其次，这是我`User.class.php`文件中的 PHP 函数，它使用此 SQL 获取未读计数。这个函数`0`在它应该返回的时候返回`1`。`$this->getUserId()`正在返回，因为那`1`是我正在使用的当前用户：

```
public function getUnreadCount()
{
    global $database;
    $sql = "SELECT * FROM `pms` WHERE `toid` = '".$this->getUserID()."' AND `read` = '0' AND 'binned' = '0'";
    $query = $database->query($sql);
    $count = $database->count($query);
    return $count;
} 
```

感谢您到目前为止的帮助，但我仍然无法弄清楚为什么这不起作用。我`read`在查询中使用添加反引号来防止 MySQL 将其用作关键字。

我敢打赌，我错过了一些非常明显的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:32:19.723

詹姆斯，我认为问题可能与表格的填充方式有关。

由于“read”和“binned”列的数据类型是 ENUM，您可能必须设置正确的默认值（'0' 或 '1'），或者在向此表中插入行时始终提供有效值。换句话说，在插入“pms”行时，不能省略“read”或“binned”列的值。

换句话说，如果您的“pms”表设置如下，没有默认值：

```
create table pms (
  toid int,
  `read` ENUM('0','1') ,
  binned ENUM('0','1') 
  ); 
```

那么你必须像这样插入完全指定的行值：

```
insert into pms (toid, `read`, binned) values
  (1, '0', '0'),
  (1, '0', '1'),
  (1, '1', '0'),
  (1, '1', '1')
; 
```

并**避免**像这样插入稀疏数据：

```
insert into pms (toid) values (1);
insert into pms (toid, binned) values (1, '1');
insert into pms (toid, `read`) values (1, '1');
insert into pms (toid, `read`, binned) values (1, '1', '1'); 
```

为这些列提供正确的默认枚举值也可以解决这个问题：

```
create table pms (
  toid int,
  `read` ENUM('0','1') default '0',
  binned ENUM('0','1') default '0' 
  ); 
```

我已经设置了一个[sqlfiddle](http://sqlfiddle.com/#!2/969e9/1)来说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:21:55.520

如果您的列是整数，请尝试这样做

```
 SELECT * FROM `pms` WHERE `toid` = 1 AND `read` = 0 AND `binned` = 0 
```

编辑：在这个演示中，你的列应该是整数。

[**SQLFIDDLE 演示**](http://sqlfiddle.com/#!2/a4568/3)

或将值作为字符串枚举，如这里

```
 SELECT * FROM `pms` 
WHERE `toid` = 1 AND `read` = '0' AND `binned` = '0' 
```

[**sqllfiddle 演示**](http://sqlfiddle.com/#!2/474ff/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:53:59.760

哇哈哈我刚刚发现为什么它没有返回行。

我在 SQL 查询的 PHP 实现中错误地使用了单引号而不是反引号......

所以我的查询实际上是：

```
$sql = "SELECT * FROM `pms` WHERE `toid` = '".$this->getUserID()."' AND `read` = '0' AND 'binned' = '0'"; 
```

什么时候应该是：

```
$sql = "SELECT * FROM `pms` WHERE `toid` = '".$this->getUserID()."' AND `read` = '0' AND `binned` = '0'";` 
```

如您所见，在查询的结尾附近，`binned`我错误地使用了单引号。

你能相信事情就这么简单吗？

只是出于兴趣，您认为我应该如何在 MySQL 中存储布尔值？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T18:20:56.123

尝试测试您是否正确设置了变量。我建议通过测试仅查询一个变量时是否得到正确的结果。：

```
SELECT * FROM `pms` WHERE `toid` = '1'; -- 3;

SELECT * FROM `pms` WHERE `read` = '0'; -- 4;

SELECT * FROM `pms` WHERE `binned` = '0'; -- 4; 
```

经典错误是您使用整数值而不是字符串 (ENUM) 值，或者将零替换为空值。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2c263/6)

# ios - 带有空 UILabel 的 if 语句

> ID：14549659
> 
> 赞同：1
> 
> 时间：2013-01-27T16:51:16.660
> 
> 标签：ios, objective-c, if-statement, uilabel

我有一个从文本文件加载的 UILabel。有时文本文件中有一些东西，有时它是空的。所以有时 UILabel 是空白的，有时它里面有文本。

我想写一个 if 语句，说如果 UILabel 是空白的，如果它有文本做另一件事做另一件事。

我试过了

```
if (self.label.text = NULL) 
```

和

```
if (self.label.text = @"") 
```

但它不能正常工作。

使用`if (self.label.text = @"")`，我得到了 if 语句，但 else 语句不起作用。

这是我的代码

```
NSString *stuff3 = @"/Stuff";
NSString *titleName = [familyDictionary objectForKey:@"identity"];

NSArray *paths3 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                      NSUserDomainMask, YES);
NSString *documentsDirectory3 = [paths3 objectAtIndex:0];
NSString *stuffPath3 = [documentsDirectory3 stringByAppendingPathComponent:stuff3];
NSString *fullPath3 = [stuffPath3 stringByAppendingPathComponent:titleName];

self.title = [NSString stringWithContentsOfFile:fullPath3  encoding:NSUTF8StringEncoding error:NULL];
NSLog(@"full path 3 >>>%@",fullPath3);

NSString *stuff4 = @"/Stuff/Objects";
NSString *textName3 = [familyDictionary objectForKey:@"identity"];
NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                      NSUserDomainMask, YES);
NSString *documentsDirectory2 = [paths2 objectAtIndex:0];
NSString *stuffPath = [documentsDirectory2 stringByAppendingPathComponent:stuff4];
NSString *fullPath2 = [stuffPath stringByAppendingPathComponent:textName3];
self.wordlabel.text = [NSString stringWithContentsOfFile:fullPath2  encoding:NSUTF8StringEncoding error:NULL];

//Now load the image at fullPath and install it into our image view's image property.
 NSLog(@"full path 3 >>>%@",fullPath2);

if(self.wordlabel.text = @"") 
{
    [textView setTitle:[NSString stringWithContentsOfFile:fullPath3  encoding:NSUTF8StringEncoding error:NULL] forState:UIControlStateNormal] ;
    textView.titleLabel.adjustsFontSizeToFitWidth = TRUE;
}
else
{
    [textView setTitle:[NSString stringWithContentsOfFile:fullPath2  encoding:NSUTF8StringEncoding error:NULL] forState:UIControlStateNormal] ;
    textView.titleLabel.adjustsFontSizeToFitWidth = TRUE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:18:04.853

你做错了，错了。

错误1：`=`是赋值运算符，`==`是相等运算符。您在 if 语句中使用赋值运算符，您至少应该得到一个编译器警告。

错误2：即使你有一点正确，它也是比较字符串的错误方法。使用`isEqualToString:`或检查其他答案中的长度。

错误 3：在将字符串分配给标签之前，逻辑可能应该基于字符串，而不是通过回读标签中的内容。这是一个更干净的 MVC 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:10:12.803

理想情况下，您应该使用：

```
if ([self.label.text length] > 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:10:43.953

您正在做的是比较指针，这不适用于字符串。用这个

```
if ([self.wordlabel.text isEqualToString:@"thestring"]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T17:17:44.077

当您说`self.label.text = @""` **您正在更改标签的文本**时。`=`是赋值运算符。**`==`是比较运算符。**

**但是**，要比较字符串，必须使用比较方法`[self.label.text isEqualToString:@""]`，否则只是比较指针。

# html - winformsrichtextbox怎么知道是纯文本还是html

> ID：14549661
> 
> 赞同：1
> 
> 时间：2013-01-27T16:51:20.797
> 
> 标签：html, vb.net, richtextbox

我有一个富文本框，如果我使用了错误的控件，请纠正我，并且他们正在使用其内容更新其网站上的新闻门户。

我允许他们使用 hmtl，或者他们可以输入任何他们想要的内容。

这里有两个例子：

使用 html：

![在此处输入图像描述](../Images/b8269f098f793cbca92bfe0af547dad0.png)

没有html：

![在此处输入图像描述](../Images/12341d8965c1da37d2467ee2b11490b4.png)

我的问题是回车。如果我不替换他们输入的“纯”文本中的回车符，它们都会显示在一行上。

如果他们不使用 html，那么我必须用回车替换`<br />`，如果他们使用它们，我不能，因为他们已经在使用中断。

我如何使它可以在没有 html 的情况下使用“纯”文本，并且当我将其插入网页而不是使用 html 时仍然使它看起来正确，并且不会因为不必要的中断而搞砸它的外观？

这是我开始的，但它只会在使用 html 时添加不必要的中断：

```
 Private Sub ShowBody_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim newbody = (String.Format("<div class=""fulldiv""><fieldset><legend>{0}</legend><div><br/>{1}</div></fieldset></div>", Title, Body)).Replace(vbLf, "<br />")
    WebBrowser1.Navigate("about:blank")
    WebBrowser1.Document.OpenNew(False)
    WebBrowser1.Document.Write(newbody)
    WebBrowser1.Refresh()
  End Sub 
```

=== 更新 ===

我试过了，它很接近，但如果他们多次输入，它不会正确显示文本。

这是一个例子：

![在此处输入图像描述](../Images/d2ee0c81274ab0ffdf06c72a7bb28f52.png)

因此，它没有按照用户的意图显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:48:37.483

这是一个相当普遍的问题。许多应用程序使用复选框（或类似的东西）让用户检查是否正在输入 html。如果未勾选，则`<br>`在提交时在每行末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:02:09.890

尝试这样做：

```
"<pre>" & textbox1.text & "</pre>" 
```

为什么不直接替换回车符？

# java - 防止伪造客户端数据Java？

> ID：14549662
> 
> 赞同：1
> 
> 时间：2013-01-27T16:51:21.090
> 
> 标签：java, client-server, minecraft, bukkit

我正在为流行的 Minecraft 服务器软件 Bukkit 编写一个插件。

我的插件需要将玩家分数发送到我的服务器，以制定全球排行榜。

看到Java可以反编译，有人可以反编译插件，并找出它是如何工作的（无论如何它是开源的）。我正在寻找一种将数据发送到我的服务器（玩家分数）的方法，这样它就不会被欺骗，并且排行榜也不会被操纵。

我正在考虑让插件的用户（服务器所有者）注册到排行榜站点，然后使用他们自己的用户名/密码组合连接到我的排行榜。如果它被滥用，我可以简单地从排行榜中阻止该服务器。然而，这不是最有效的方法，因为我必须管理连接并批准杀死的数量。

我将如何确保客户端（Bukkit 服务器插件）不能欺骗杀戮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:47:17.500

如果您担心*合法*用户受过足够的教育以反编译您的 jar，了解您的代码并弄清楚如何从您的插件发送错误数据，那么身份验证方法没有用（用户已经是合法的），我假设逻辑计算你想要的东西不能驻留在服务器中。在这种情况下，您最好的选择是混淆您的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T21:04:02.390

让它开源是阻止你的原因。如果它是封闭源代码，您可以混淆您的 jar，并且反编译您的代码会更加困难。

如果您仍然希望它是开源的，您可以关注快速增长的服务器或得分非常高的服务器。但是就像你说的那样，这是非常低效的。

在 Bukkit 论坛上发帖，他们可能会为您提供更好的答案。

# regex - matlab - 从（奇数）字符串中提取数字

> ID：14549664
> 
> 赞同：3
> 
> 时间：2013-01-27T16:51:29.687
> 
> 标签：regex, matlab

我在 cvs 文件中有一系列字符串，它们看起来都像下面的两个：

```
7336598,"[4125420656L, 2428145712L, 1820029797L, 1501679119L, 1980837904L, 380501274L]"
7514340,"[507707719L, 901144614L, 854823005L]"
.... 
```

如何提取其中的数字？如......检索7336598、4125420656等......

试过了`textscan`，而且`regexp`，但没有太大的成功...

对不起初学者的问题......感谢您的关注！:)

编辑：每行的大小是可变的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T17:02:51.030

您可以使用[`textread`](http://www.mathworks.com/help/matlab/ref/textread.html)and[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)仅从 CSV 文件中提取数字：

```
C = textread('file.cvs', '%s', 'delimiter', '\n');
C = regexp(C, '\d+', 'match'); 
```

正则表达式非常简单。在 MATLAB 的`regexp`模式中，`\d`表示一个数字，并且`+`表示这个数字必须至少出现一次。该`match`模式告诉`regexp`返回匹配的字符串。

结果是一个字符串[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)。您可以进一步将字符串转换为数值：

```
C = cellfun(@(x)str2num(sprintf('%s ', x{:})), C, 'Uniform', false) 
```

结果仍存储在元胞数组中。如果您可以保证每行中有相同数量的数值，则可以将元胞数组转换为矩阵：

```
A = cell2mat(C); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:57:15.837

我没有要测试的 matlab，但是 '[0-9]+' 可以完成这项工作吗？

它在 matlab 之外对我有用：

```
echo '7336598,"[4125420656L, 2428145712L, 1820029797L, 1501679119L, 1980837904L, 380501274L]"' | grep -o '[0-9]\+'
7336598
4125420656
2428145712
1820029797
1501679119
1980837904
380501274 
```

# python - 在 Python 中使用 OAuth 进行身份验证时出错

> ID：14549666
> 
> 赞同：1
> 
> 时间：2013-01-27T16:51:55.613
> 
> 标签：python, api, oauth, calendar

我正在尝试学习如何将 OAuth 用于我正在开发的应用程序，但我似乎无法理解验证码部分和重定向 URI 的点。这就是我所拥有的......我不明白重定向URI的意义，一旦我得到一个有效的验证码。我什至如何以 JSON 格式为用户从 Google 中提取日历事件？

```
from pyoauth2 import Client

CLIENT_ID = 'XXXXXXXXXXXXXX'
CLIENT_SECRET = 'XXXXXXXXXXXXXX'
REDIRECT_URL = 'XXXXXXXXXXXXXX'
SCOPE = 'https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/userinfo.email'

client = Client(CLIENT_ID, CLIENT_SECRET,
            site='https://www.googleapis.com/oauth2/v1',
            authorize_url='https://accounts.google.com/o/oauth2/auth',
            token_url='https://accounts.google.com/o/oauth2/token')

print '-' * 80
authorize_url = client.auth_code.authorize_url(redirect_uri=REDIRECT_URL, scope=SCOPE)
print 'Go to the following link in your browser:'
print authorize_url

code = raw_input('Enter the verification code and hit ENTER when you re done:')
code = code.strip()
access_token = client.auth_code.get_token(code, redirect_uri=REDIRECT_URL)
print 'token', access_token.headers

print '-' * 80
print 'get user info' 
ret = access_token.get('/userinfo')
print ret.parsed 
```

哎呀..忘记了错误..我什至不确定验证码应该是什么样子。

```
token {'Authorization': 'Bearer '}
--------------------------------------------------------------------------------
get user info
{u'error': {u'code': 401, u'message': u'Invalid Credentials', u'errors': [{u'locationType': u'header', u'domain': u'global', u'message': u'Invalid Credentials', u'reason': u'authError', u'location': u'Authorization'}]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:33:06.023

根据您的要求，您可以考虑尝试一下[rauth](https://github.com/litl/rauth)。Rauth 是 OAuth 1.0/a、2.0 和 Ofly 的简单消费者客户端。虽然我没有立即可用的 Google 示例，但您可以查看 GitHub 上的[示例脚本](https://github.com/litl/rauth/tree/master/examples)以了解如何使用它。特别是，Facebook 示例应该是一个非常相似的流程。如果您需要更详细的帮助，请随时与我联系。

# android - 将 Dialog 转换为 DialogFragments

> ID：14549668
> 
> 赞同：0
> 
> 时间：2013-01-27T16:52:08.707
> 
> 标签：android, dialog, android-dialogfragment

我有一个非常好的对话框，可以满足我的需要。但我需要将其更新为新标准。

这是我当前的对话框：

```
public class MyProgressDialog extends Dialog {

    private MyProgressDialog dialog;

    public MyProgressDialog(Context context) {
        super(context);
    }

    public MyProgressDialog show(Context context) {
        dialog = new MyProgressDialog(context);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.progress);
        dialog.getWindow().setBackgroundDrawableResource(
                android.R.color.transparent);
        dialog.setCanceledOnTouchOutside(false);
        dialog.show();
        return dialog;
    }

    public void dismiss(Context context) {

        dialog.dismiss();

    }

} 
```

我已经将这个 NON-Fragment Dialog 与 Fragments 和 ListFragments（使用支持库 4）一起用作 ProgressDialogs。不幸的是，在具有多个片段的页面上，它们只是堆叠在一起。所以我想将每个对话框与每个片段相关联。

`onPreExecute()`我在每个`Task`'s中以这种方式调用对话框：

```
dialog = new MyProgressDialog(getActivity()); 
```

是否可以调整我当前的设置以根据需要工作，或者我是否需要从头开始完全重做？我查看了来自 Google 的所有样本，但我找不到很多与我正在做的事情相近的东西。我可以在这次过渡中获得一些指导吗？无论是链接、代码示例还是要研究的想法？

**编辑以回应以下评论：**

```
@Override
public Fragment getItem(int position) {
    Fragment f = null;
    switch (position) {
    case 0: {
        f = new RateFragment();
        Bundle args = new Bundle();
        f.setArguments(args);
        break;
    }
    case 1: {
        f = new ReviewFragment();
        Bundle args = new Bundle();

        f.setArguments(args);
        break;
    }
    default:
        throw new IllegalArgumentException("not this many fragments: "
                + position);
    }

    return f;

} 
```

平板电脑布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frags"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/cat_frag"
        android:layout_width="450dp"
        android:layout_height="match_parent"
        class="com.---.---.RateFragmentActivity$RateFragment" />

    <LinearLayout
        android:layout_width="4dp"
        android:layout_height="match_parent"
        android:background="#222" />

    <fragment
        android:id="@+id/featured_frag"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.---.---.RateFragmentActivity$ReviewFragment" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:00:58.133

> 所以我想将每个对话框与每个片段相关联。

如果要在触发工作的相应片段上方显示对话框，则不能使用 a `DialogFragment`，因为这会将对话框放置为普通对话框。

相反，您可以使用与您的自定义`Fragment` *形状*`ProgressDialog`相似的法线并将其附加到容器（应该是 a`RelativeLayout`或`FrameLayout`）上的正常片段/内容之上。

> 是否可以调整我当前的设置以根据需要工作，或者我是否需要从头开始完全重做？

如果那些具有多个片段的页面将这些片段放置在包装器布局中，那么这很容易。如果不是，您将需要根据您构建当前布局的方式进行一些可能容易或很难进行的更改。

# c# - jQuery JSONP 使用的 CrossDomain WCF 返回 undefined

> ID：14549669
> 
> 赞同：0
> 
> 时间：2013-01-27T16:52:11.483
> 
> 标签：c#, jquery, wcf, iis-7, jsonp

此示例归功于 Pranay Rana：http: [//www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java](http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java)

在此处失败并链接到实际 WCF 的问题：http: [//jsfiddle.net/TyrHW/](http://jsfiddle.net/TyrHW/)

标记：

```
<%@ ServiceHost Language="C#" Debug="true" Service="WCF1.Service1" CodeBehind="Service1.svc.cs" Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory"%> 
```

C# WCF 服务

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Text;

namespace WCF1
{
        [DataContract]
        public class Customer
        {
            [DataMember]
            public string Name;

            [DataMember]
        public string Address;

        }

  [ServiceContract(Namespace = "JsonpAjaxService")]
  [AspNetCompatibilityRequirements(RequirementsMode =   AspNetCompatibilityRequirementsMode.Allowed)]

    public class Service1
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public Customer GetCustomer()
        {
            return new Customer() { Name = "Jacob Pines", Address = "999 S William St." };
        }
    }
    } 
```

网络配置

```
<?xml version="1.0"?>
<configuration>

    <system.web>
        <compilation debug="true" targetFramework="4.0"  />

    </system.web>

    <system.serviceModel >
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
            <standardEndpoints>
                <webScriptEndpoint>
                        <standardEndpoint name="" crossDomainScriptAccessEnabled="true"/>
                </webScriptEndpoint>
            </standardEndpoints>

    </system.serviceModel>

    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>

    </system.webServer>

    <system.web>
        <customErrors mode="Off"/>
    </system.web>

</configuration> 
```

我在本地得到与我的 godaddy .net 4.0 主机相同的结果。我检查了 asp.net 级别。goddady 的 IIS 安全设置为匿名。如果我在浏览器中输入服务的 url，我会收到一些明显的身份验证问题，我已经发送给 Godaddy。如果我在本地做同样的事情，我会得到看起来很健康的 Web 服务，尽管仍然从 jsFiddle 中得到未定义。

这对我来说都是新的......所以这是一项使命。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:23:05.143

引用[以下文章](http://dotnetbyexample.blogspot.com/2008/02/calling-wcf-service-from-javascript.html)：

> 这在 Cassini 中运行时一切正常，但是当您想在 IIS 中托管它时，您需要注意两件事。首先，您需要确保正确安装和注册 IIS 和 WCF。如果 IIS 似乎不想输出您的 SVC 文件（您可以通过尝试 http:////AjaxService.svc 来检查），请尝试从 %WINDIR%\Microsoft.NET 运行命令 ServiceModelReg.exe /i /x \Framework\v3.0\Windows 通信基础。运行此命令后重新启动 IIS。其次，如果您创建了一个默认的 ASP.NET 2.0 网站，您可能会遇到以下错误消息：
> 
> `IIS specified authentication schemes 'IntegratedWindowsAuthentication, Anonymous', but the binding only supports specification of exactly one authentication scheme. Valid authentication schemes are Digest, Negotiate, NTLM, Basic, or Anonymous. Change the IIS settings so that only a single authentication scheme is used.`
> 
> 要解决此问题，请在 IIS 管理器中右键单击该网站并选择“属性”。然后单击“目录”选项卡，单击“匿名访问和身份验证控制”区域中的“编辑”按钮。您将看到选择了匿名访问和集成 Windows 身份验证。取消选择其中之一，然后重新启动 IIS。之后，应用程序应该可以顺利运行。

在您的情况下，将集成 Windows 身份验证替换为基本身份验证。

# php - jQuery 在 PHP 完成之前运行

> ID：14549670
> 
> 赞同：-3
> 
> 时间：2013-01-27T16:52:17.750
> 
> 标签：php, jquery, css, css-selectors

我`for`在 PHP 中有一个循环，它创建了四个`div`，每个都包含一个`img`和`p`字符串，如下所示：

```
<div class="guest-tile-holder">             
    <img class="guest-tile" src="<?php echo($tile); ?>">
    <p><span><?php echo($fn.' '.$ln); ?></span></p>
</div> 
```

在 jQuery 中，我想每隔四个`p`黑色着色一次，即只有`p`第四个框创建的字符串，如下所示：

```
$(document).ready(function() {
    $('p:nth-child(4)').css('color', 'black');
}); 
```

我期望的是 PHP 会进行预处理，如上创建四个，然后 jQuery 会将第四个中`div`的字符串涂成黑色。然而，实际发生的事情是 jQuery 似乎忽略了 PHP 并为我的 HTML中另外三个字符串之外的字符串着色。`p``div``p``p`

我总是被引导相信 PHP 会进行预处理，因此我不明白为什么 jQuery 在 PHP 完成之前似乎正在运行。

谁能告诉我在 PHP 完成后如何让 jQuery 运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T16:56:32.443

索引基于同一父元素中的元素，因此您需要定位父`div`元素，如果它们在 DOM 中处于同一级别，并`nth-child`在该元素上使用选择器，然后找到段落并更改它CSS：

```
$('div.guest-tile-holder:nth-child(4)').find('p').css('color', 'black'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:59:25.567

您的 jQuery 在您的 PHP 代码之后正确执行，只是您没有选择正确的`p`.

`p:nth-child(4)`将选择层次结构中的第四个元素的段落。例如，第一个`p`元素是第三个元素，因为它前面是 a`div`和 an `img`。您实际上正在寻找的是类似`p:nth-of-type(4)`甚至`.guest-tile-holder:nth-child(4)`使用 jQuery 的自定义[`:eq()`](http://api.jquery.com/eq-selector/)选择器的东西：

```
$('.guest-tile-holder:eq(3) p').css('color', 'black'); 
```

（由于 JavaScript 数组使用从零开始的索引，因此第 4 个元素的索引为 3。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T16:59:32.987

无需使用 find，您可以简单地执行以下操作：

```
$('div.guest-tile-holder:nth-child(4) p').css('color', 'black'); 
```

# ms-access - 可以使用 VBA/ADO 连接两个记录集吗？

> ID：14549673
> 
> 赞同：4
> 
> 时间：2013-01-27T16:52:23.660
> 
> 标签：ms-access, ado

目标是将 Access 表与 SQL Server 表中的匹配数据连接起来。我会在 Access 中使用链接表来执行此操作，但我遇到了 Access 的 BigInt 问题（我会创建一个视图以将 BigInt 转换为 Int，但现在这不是一个选项）。

所以我一直在尝试创建两个记录集并将它们加入 VBA/ADO。连接的左侧是带有 Season 和 WeekNum 的 Access 表，而连接的右侧是带有 Season 和 Weeknum 以及其他数据的 SQL Server 表。这工作正常，直到我尝试创建作为连接结果的第三个记录集（在此示例中，我没有尝试进行连接，只是通过从 Access 记录集中选择连接的第一部分）。当我执行 Set ObjRecordset3 = "SELECT * FROM " & Access_Recordset ' 时，出现类型不匹配错误。

甚至可以加入两个记录集吗？如果是这样，这是如何完成的？

```
Function Join()

    Dim SQL_Server_Connection As ADODB.Connection
    Set SQL_Server_Connection = New ADODB.Connection
    Dim SQL_Server_Query As String
    Dim SQL_Server_Recordset As New ADODB.Recordset

    Dim Access_Recordset As New ADODB.Recordset

    Dim ObjConnection As ADODB.Connection
    Set ObjConnection = CreateObject("ADODB.Connection")
    Dim ObjRecordset3 As New ADODB.Recordset

    ' Get data from Bump Table 3:
    Access_Recordset.Open "SELECT * FROM [Bump Table 3]", CurrentProject.Connection

    ' Open connection to SQL Server:
    SQL_Server_Connection_String = "DSN=MySQLServer"
    SQL_Server_Connection.Open SQL_Server_Connection_String

    ' Define the SQL Server query:
    SQL_Server_Query = "SELECT Season, WeekNum FROM TE"

    ' Populate the SQL_Server_Recordset:
    SQL_Server_Recordset.Open SQL_Server_Query, SQL_Server_Connection, adOpenDynamic, adLockOptimistic

    'Join Access_Recordset (Table: Bump Table 3) to SQL_Server_Recordset (Table: TE)
    Set ObjRecordset3 = "SELECT * FROM " & Access_Recordset ' Type Mismatch error on this line

    Access_Recordset.Close
    Set Access_Recordset = Nothing

    SQL_Server_Recordset.Close
    Set SQL_Server_Recordset = Nothing

    SQL_Server_Connection.Close

End Function 
```

*** 更新 ***

我想出了如何实现我的最终目标，即根据两个表共有的帐号字段从 SQL Server 获取有关 Access 表中帐号列表的数据。意识到我可以在 SQL Server 上创建一个持久临时表，我结合使用 DAO 和 ADO 从 Access 表中获取值并创建一个临时表。我所要做的就是运行引用临时表的传递查询。唯一奇怪的事情（此时这不是问题）是如果我创建临时表并在 VBA 中运行传递查询，则此设置有效。但是如果我在 VBA 中创建临时表并双击传递查询，Access 会说找不到临时表。无论如何，这是代码：

```
Public Sub Insert_Into_Access_From_ADO_Recordset_Using_PTQ_Simpler()

    Dim dbs As DAO.Database
    Set dbs = CurrentDb()

    Dim cnn As ADODB.Connection
    Set cnn = New ADODB.Connection

    Dim rst As ADODB.Recordset

    'Open SQL Server
    Dim str_cnn As String
    str_cnn = "MYDSN"

    cnn.Open str_cnn

    ' Drop the temp table:

        Dim str_SQL_Drop_Temp_Table As String

        str_SQL_Drop_Temp_Table = "IF OBJECT_ID('tempdb..##BumpData','U') IS NOT NULL "
        str_SQL_Drop_Temp_Table = str_SQL_Drop_Temp_Table & " DROP TABLE ##BumpData "

        cnn.Execute str_SQL_Drop_Temp_Table

    ' Create the temp table:

        Dim str_SQL_Create_Temp_Table As String

        str_SQL_Create_Temp_Table = " CREATE TABLE ##BumpData "
        str_SQL_Create_Temp_Table = str_SQL_Create_Temp_Table & " " & "("
        str_SQL_Create_Temp_Table = str_SQL_Create_Temp_Table & " " & " ID INT "
        str_SQL_Create_Temp_Table = str_SQL_Create_Temp_Table & " " & " ,   AccountNumber VARCHAR(Max)"
        str_SQL_Create_Temp_Table = str_SQL_Create_Temp_Table & " " & ")"

        cnn.Execute str_SQL_Create_Temp_Table

    ' Insert values from the Access table into the temp table
    ' by looping through the Access table as a recordset:

        Dim rst_DAO As DAO.Recordset
        Set rst_DAO = dbs.OpenRecordset("Bump Data")

        Dim str_SQL_Insert As String

        rst_DAO.MoveFirst

        With rst_DAO
            Do While Not rst_DAO.EOF
                'str_Loan_Number_List = str_Loan_Number_List & "'" & Trim(rst![Loan Number]) & "'" & ","
                str_SQL_Insert = " INSERT INTO ##BumpData VALUES (" & rst_DAO![ID] & ",'" & Trim(rst_DAO![Loan Number]) & "') "
                cnn.Execute str_SQL_Insert
                .MoveNext
            Loop
        End With

    ' Run the pass-thru query which joins to the temp table:
    DoCmd.SetWarnings False
    DoCmd.RunSQL "SELECT * INTO [Bump Results] FROM [Bump PTQ]"
    DoCmd.SetWarnings True

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:12:15.960

您报告此行触发错误：

```
Set ObjRecordset3 = "SELECT * FROM " & Access_Recordset 
```

符号的右侧`=`尝试将字符串与`ADODB.Recordset`对象连接起来。这可能是编译错误的直接原因。但是，这不是该行的唯一问题。`Set <recordset object> = "any string value"`不管用。最后，Access SQL 不支持*`FROM <recordset object>`*任何类型的记录集对象（ADO 或 DAO）。

我认为您应该寻找一种更简单的方法。在以下查询中，`dbo_BigIntTable`是指向 SQL Server 表的 ODBC 链接。它包括一个字段 ，`bigint_fld`其 SQL Server 数据类型为 BigInt。但是，Access 将该字段视为文本类型。因此，我可以将它与长整数字段 ( `tblFoo.id`) 的字符串等价物连接起来。

```
SELECT tblFoo.id, dbo_BigIntTable.bigint_fld
FROM
    tblFoo
    INNER JOIN dbo_BigIntTable
    ON CStr(tblFoo.id) = dbo_BigIntTable.bigint_fld; 
```

Access 查询设计器抱怨它无法在设计视图中显示该连接，但我能够从 SQL 视图创建连接并且工作正常。

# android - 在 Android 上创建服务有多贵？

> ID：14549680
> 
> 赞同：2
> 
> 时间：2013-01-27T16:52:46.360
> 
> 标签：android, service

我有一个爱好应用程序（闹钟），其中有很多短期服务。所有这些服务都是`BroadcastReceiver`在内部意图被广播时启动的。其中许多服务对相同的意图做出反应，例如，当警报触发时`VibrationService`，`KlaxonService`和`FlashLightService`全部启动。还有一些其他的服务和接收器也做少量的工作。过去，一切都很好。最近，服务的数量增加了，当广播“流行”意图时，我开始注意到相当大的滞后。

我的所有服务都没有导出并在主线程上运行。

现在我的问题是，服务的创建/销毁有多昂贵？使用一个“HostService”并在那里完成所有工作是否有意义（在我的情况下它将取代 4-5 个服务）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:13:00.553

创建短期服务的最简洁的方法是使用 IntentService 而不是完全成熟的服务。它们在自己的线程上运行，并在处理完所有排队的意图后终止。

从您的服务名称来看，您还应该查看通知管理器。这可以提高您的大部分工作量，而无需单独的服务。

# visual-studio-2010 - 使用 Visual Studio 迁移/移动/升级 SharePoint 2007 项目并将其部署到 SharePoint 2010

> ID：14549684
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:04.520
> 
> 标签：visual-studio-2010, deployment, sharepoint-2010, sharepoint-2007

我**在 SharePoint 2007 中有一个工作项目**，

我需要**使用 Visual Studio 2010 将这个项目部署到 SharePoint 2010 中**。

**实现这一目标的最简单方法是什么，我应该从哪里开始？**.

我主要使用**SharePoint 2010**，所以我不确定如何将在 SharePoint 2007 中运行良好的项目重新部署到 SharePoint 2010。

**我显然想避免重新编写整个项目，因为这并不理想**。

非常感谢您的任何建议或意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:38:17.340

如果您有 wsp 使其可在 Share point 201 中部署，请按照以下步骤操作 [http://blogs.msdn.com/b/jorman/archive/2010/09/09/updating-a-sharepoint-2007-wsp-in -visual-studio-2010.aspx](http://blogs.msdn.com/b/jorman/archive/2010/09/09/updating-a-sharepoint-2007-wsp-in-visual-studio-2010.aspx)

或者

[http://geekswithblogs.net/juanlarios/archive/2011/03/29/upgrading-sharepoint-2007-projects-to-sharepoint-2010.aspx](http://geekswithblogs.net/juanlarios/archive/2011/03/29/upgrading-sharepoint-2007-projects-to-sharepoint-2010.aspx)

让我知道结果。

谢谢

# ruby-on-rails - Rails: pretty_id - 隐藏资源

> ID：14549685
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:09.097
> 
> 标签：ruby-on-rails, routes

我正在尝试设置一个漂亮的 url，它不显示路线上的资源。

例如，而不是：

```
localhost/users/newton 
```

节目

```
localhost/newton 
```

pretty_id gem 有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T01:27:24.977

我想你的意思是friendly_id gem？无论哪种方式，您都可以，但是在路由文件中，您只需要指定要使用用户控制器。

```
get ':slug' => 'users#show', :as => 'user_show' 
```

# java - tomcat7 不读取上下文 xml 文件

> ID：14549686
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:17.443
> 
> 标签：java, web-applications, tomcat7

我想在 xml 文件中为 db 指定上下文。

```
 <Context path="/db3" docBase="C:/my/workspace/db3/">

 <Resource name="jdbc/ksidb" auth="Container" 
        type="javax.sql.DataSource"
        description="Books" 
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost:3306/ksidb"
        username="root"
        password="root"
        maxActive="20" /> 
</Context> 
```

我读过我应该将该文件复制到 /webapps tomcat 目录。我这样做了，但 tomcat7 不读取文件。你知道为什么吗？该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:47:48.313

你读的是错误的。如果它告诉你一些完全错误的东西，我会质疑该来源的其他建议。根据[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)，您放置上下文配置的选项如下：

*   在应用程序文件内 /META-INF/context.xml 的单个文件中。或者（基于主机的 copyXML 属性）可以将其复制到 $CATALINA_BASE/conf/[enginename]/[hostname]/ 并重命名为应用程序的基本文件名加上“.xml”扩展名。
*   在 $CATALINA_BASE/conf/[enginename]/[hostname]/ 目录中的单个文件（带有“.xml”扩展名）中。上下文路径和版本将从文件的基本名称（文件名减去 .xml 扩展名）派生。此文件将始终优先于打包在 Web 应用程序的 META-INF 目录中的任何 context.xml 文件。
*   在主 conf/server.xml 的 Host 元素中。

我强烈建议您访问链接的文档以了解有关配置 Tomcat 的正确方法的更多信息。

# java - 从 JTextArea 中删除 Text 后，堆不为空

> ID：14549687
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:36.943
> 
> 标签：java, swing, heap-memory, jtextarea, profiler

我有一个带有 AWT GUI 的应用程序，`JTextArea`用于记录输出。`setText(null)`如果我用or `removeAll()`or擦除文本`setText("")`然后运行垃圾收集器`System.gc()`，我注意到整个文本仍在内存中。我怎样才能真正删除文本？

我对探查器不是很熟悉，这是我在内存转储中看到的内容`setText(null)`：

![探查器快照](../Images/867a59541e553f80e9583cd30422d9b0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:12:34.910

请阅读：[垃圾收集如何在 Java](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)中工作。

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#gc%28%29) `System.gc()`：

*调用 gc 方法**表明**Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有**丢弃的对象中回收空间***

NB-*建议*。这意味着垃圾收集器只建议进行清理而不是强制它也可能完全忽略您的请求，因此我们无法知道垃圾何时会被收集，只能及时收集。

NB -*废弃对象*：这是指所有其他实例/类/字段/变量等未`static`/或正在使用/引用的所有对象。`final`

这也是我在该主题上发现的一个有趣的问题：

*   [为什么调用 System.gc 是一种不好的做法？](https://stackoverflow.com/questions/2414105/why-is-it-a-bad-practice-to-call-system-gc)

最佳答案如下：

> 每个人总是说要避免的原因`System.gc()`是，它是一个很好的指标，表明代码根本上是有问题的。任何依赖它来保证正确性的代码肯定会被破坏；任何依赖它来实现性能的东西都很可能被破坏

甚至还提交了一个错误的文档措辞错误：

*   [http://bugs.sun.com/view_bug.do?bug_id=6668279](http://bugs.sun.com/view_bug.do?bug_id=6668279)

.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T18:47:55.787

正如@DavidK 指出`System.gc()`的那样，这不是检查这一点的有用方法。使用[此处](https://stackoverflow.com/a/14492574/230513)描述的机制，大多数[分析器](https://stackoverflow.com/q/2064427/230513)可以强制垃圾收集，但受到一些[限制](http://docs.oracle.com/javase/7/docs/platform/jvmti/jvmti.html#ForceGarbageCollection)，是一种有用的调试工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T17:25:40.177

1.  如果您的客户端程序中有任何 String 对象包含此内容，请将它们也设置为 null。

2.  此外，您不需要显式调用 System.gc() 方法。当 JVM 需要更多内存来分配给其他对象时，它会垃圾收集孤立对象。

3.  您只需要担心是否看到内存不足/连续堆内存增加使用等。

# sql - SQL代替触发器和更新

> ID：14549688
> 
> 赞同：2
> 
> 时间：2013-01-27T16:53:38.593
> 
> 标签：sql, sqlite, triggers, sql-update

我有这些表：

*   电影（mID、片名、年份、导演）
*   审稿人（rID，姓名）
*   评级（rID、mID、星数、ratingDate）

和一些观点：

*   视图`LateRating`包含 2011 年 1 月 20 日之后的电影评分。视图包含电影 ID、电影名称、星数和评分日期。

    ```
    create view LateRating as 
      select distinct R.mID, title, stars, ratingDate 
      from Rating R, Movie M 
      where R.mID = M.mID 
      and ratingDate > '2011-01-20' 
    ```

*   视图`HighlyRated`包含至少有 1 个评分高于 3 星的电影。该视图包含电影 ID 和电影标题。

    ```
    create view HighlyRated as 
      select mID, title 
      from Movie 
      where mID in (select mID from Rating where stars > 3) 
    ```

*   View`NoRating`包含数据库中没有评分的电影。该视图包含电影 ID 和电影标题。

    ```
    create view NoRating as 
      select mID, title 
      from Movie 
      where mID not in (select mID from Rating) 
    ```

这是我的数据集：[https ://prod-c2g.s3.amazonaws.com/db/Winter2013/files/viewmovie.sql](https://prod-c2g.s3.amazonaws.com/db/Winter2013/files/viewmovie.sql)

我被要求编写一个代替触发器来更新视图 LateRating 的 stars 属性。这是我的方法。

```
CREATE trigger update_LateRating_title INSTEAD OF 
UPDATE OF stars ON LateRating
BEGIN
  UPDATE Rating SET stars = stars - 2 
  WHERE Rating.mID = old.mID 
  AND Rating.mID IN (SELECT stars FROM Rating WHERE stars > 2);
END; 
```

它给出了几乎正确的答案，但只有一个错误的行是 201 101 4 2011-01-27.4 应该是 2。出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:44:27.157

让我们看看你的`WHERE`情况：

```
...AND Rating.mID IN (SELECT stars FROM Rating WHERE stars > 2) 
```

它指出`Rating.mID`应该在`stars`从评级中选择的值中。我不确定这里的意图是什么。假设您想为任何修改星的尝试将星数减少 2（这很奇怪：您正在将*增加*星数的查询转换为一些不相关的查询），如果该*表*行中的*原始*星数大于2.*`Rating`*

 *```
CREATE trigger update_LateRating_stars INSTEAD OF 
UPDATE OF stars ON LateRating
BEGIN
  UPDATE Rating SET stars = stars - 2 
  WHERE Rating.mID = old.mID 
  AND Rating.stars > 2;
END; 
```

同样，对于您想要的内容有许多可能的解释， 它们都或多或少*有些奇怪*：`mID`字段 in`LateRating`不足以识别原始记录`Rating`（如果您不允许同一个审阅者同时对同一部电影持有不同意见）。`rID``mID`*

# ios - 为什么我们没有 UIBarMetricsLandscapePad？

> ID：14549690
> 
> 赞同：2
> 
> 时间：2013-01-27T16:53:44.947
> 
> 标签：ios, objective-c, ipad

当导航栏处于横向而不是纵向时，如何在详细拆分视图中为导航栏设置不同的背景图像？

这是我使用的代码

```
[self.topNavbar setBackgroundImage:[UIImage imageNamed:@"nav-bar-portrait-ipad"]
                                   forBarMetrics:UIBarMetricsDefault];
[self.topNavbar setBackgroundImage:[UIImage imageNamed:@"nav-bar-landscape-ipad"]
                                   forBarMetrics:UIBarMetricsLandscapePhone]; 
```

当 splitView 旋转为横向时，永远不会调用 UIBarMetricsLandscapePhone。纵向（768 px）模式下 detailView 的宽度与横向模式（704 px）不同，那么我们如何为每个设置不同的图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:20:27.623

导航栏在 iPad 上不会在不同方向改变高度，因此没有单独的栏指标（不需要不同高度的图像）。

在 iPhone 上，横向的导航栏比纵向的要短，因此需要不同的图像（渐变图像不能很好地缩放）。导航背景通常一直是相同的，因此宽度通常不是考虑因素。

如果要更改旋转图像，则必须响应旋转事件。

# javascript - 在 DashCode 中从 JavaScript 调用 Objective-C

> ID：14549692
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:52.663
> 
> 标签：javascript, objective-c, dashcode

我正在用 Dashcode 创建一个网站。我非常了解objective c，但几乎不知道javascript。这是一个示例objective-c类：

```
/* Here is an example .h file, "CircularList.h".
All behavior is inherited from List, which defines a List of objects.
Nowadays we can use NSArray which is more complex than List.
*/

#include <objc/List.h>  /* Superclass interface */

@interface CircularList: List /* List is superclass */
{  
    int currentLocation;
}  

- (NSString *) next; /* Returns next object in List or nil if none.  */ 

@end 

/* Here is the corresponding .m file: */
#include "CircularList.h"

@implementation CircularList

- (NSString *) next
{   
    int numObjects = [self count];  
    if (currentLocation >= numObjects)  
        currentLocation = 0;    
    return [self objectAt:currentLocation++];
}

@end 
```

如何将此类与 DashCode 中的 Safari Web 应用程序项目联系起来？接下来怎么打电话？如何将 NSString 转换为 var，然后将 var 打印到日志中？

### 额外细节

我看过开发库。如何将目标 c 类导入 dashcode 项目？

这是课程：

```
/* Here is an example .h file, "CircularList.h".
All behavior is inherited from List, which defines a List of objects.
Nowadays we can use NSArray which is more complex than List.
*/

#include <objc/List.h> /* Superclass interface */

@interface CircularList: List /* List is superclass */
{ 
    int currentLocation;
} 

- (NSString *) next; /* Returns next object in List or nil if none. */ 

@end 

/* Here is the corresponding .m file: */
#include "CircularList.h"

@implementation CircularList

- (NSString *) next
{ 
int numObjects = [self count]; 
if (currentLocation >= numObjects) 
    currentLocation = 0; 
return [self objectAt:currentLocation++];
}

+ (NSString *) webScriptNameForSelector:(SEL)sel
{

if (sel == @selector(nameAtIndex:))
    name = [self next];

return name;
}

+ (BOOL)isSelectorExcludedFromWebScript:(S…
{
if (sel == @selector(nameAtIndex:)) return NO;
    return YES;
}
@end 
```

如何将目标 c 与 javascript 文件或 dashcode 项目连接起来？目标 c 类在哪里（例如与 js 相同的文件夹）？调用我的函数“下一个”的 javascript 是什么？以下代码做了什么？： + (BOOL)isSelectorExcludedFromWebScript:(S... { if (sel == @selector(nameAtIndex:)) return NO; return YES; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T16:28:55.310

很久以后...

人们（我们，第三方开发者）不能从 Dashcode 调用 obj-c，或者至少这不应该是可能的。Dashcode 是（或曾经是）关于可以用 javascript 编写的非常简单的应用程序。

Dashboard 框架不加载任何objective-c 可执行文件，因此制作objc-js 桥完全取决于您。我认为这是不可能的。至少不只使用 Dashboard javascript 框架。

# vim - VimL：如何确定我是否打开/关闭了 CAPS 锁定

> ID：14549693
> 
> 赞同：0
> 
> 时间：2013-01-27T16:53:56.520
> 
> 标签：vim, vim-plugin

现在我正在为 Vim 创建一个插件，它的目的是简单地将各种实用功能放入您的状态行，这是链接：[https ://github.com/Greduan/vim-usefulstatusline](https://github.com/Greduan/vim-usefulstatusline)

所以这是我的问题，我的下一个添加是一个小输出，它告诉你是否打开或关闭了 CAPS 锁定，如果它打开它会输出`[CAPSLOCK]`，如果它关闭它不会输出。

任何帮助是极大的赞赏。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:24:22.177

您无法独立于系统查询它，至少没有任何默认的 vim 插件或 python 模块（不知道其他解释器）。[您可以使用与此处](https://stackoverflow.com/questions/13129804/python-how-to-get-current-keylock-status)建议的 linux相同的 hack

```
echo and(system('xset q | grep LED')[65], 1) 
```

无论如何，我从未见过有人真正想要大写锁定在 vim 中。

# ios - Objective C Segue 身份

> ID：14549694
> 
> 赞同：1
> 
> 时间：2013-01-27T16:53:58.970
> 
> 标签：ios, objective-c, uistoryboard, uistoryboardsegue

我有一个非常简单的问题。假设您有 2 个视图控制器 A 和 B。A 是带有 STATIC CELLS 的 UITableView。也就是说，A 仅使用情节提要对象构建，而不是以编程方式构建。B 也是一个 UITableView，但使用 DYNAMIC CELLS 以编程方式构建。因此，我将 A 中每个单元格的 Segues（在情节提要中设置了标识符）连接到 B Tableview。

现在我想知道当 A 中的一行被选中时，哪个 segue 被推送了。我知道如果我以编程方式在视图 A 中创建单元格并使用准备/执行 segue 方法，这可以很容易地完成。但由于 A 中的内容永远不会改变，我不想走那条路。当我在 A 中选择给定行时，我试图找出如何检查已推送哪个 segue 的原因。理想情况下，将有一些方法 DIDPERFORMSEGUE：（Segue 标识符）我可以从 B Viewcontroller 调用。

非常感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:14:39.400

在您的“A”表视图中，您应该能够查看戳了哪一行，然后将该信息推送到您的“B”表。例如：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"UITableView_B"]){
        BTableViewController *vc = (BTableViewController *)[segue destinationViewController];
        NSIndexPath *path;
        path = [self.tableView indexPathForSelectedRow];
        [vc setSelectedPath:path];
    }
} 
```

希望有帮助。祝你好运。

*编辑*：可能很明显，但在上面的“self.tableView”是一个指向 UITableView 的出口。

**更新** 就个人而言，我会硬着头皮为“A”创建一个类，但为了黑客攻击 - 应该可以返回并从以前的视图中获取数据。这是“错误代码”（imo）并假设您正在使用导航控制器 - 并且前一个视图是“A”表等......事不宜迟 - 应该可以这样做：

```
NSArray * views = [self.navigationController viewControllers];
NSUInteger prevViewIndex = [views count] - 2;
UIViewController * previousView = [views objectAtIndex:prevViewIndex];
ATableViewController * aTableViewController = (ATableViewController *) previousView;
NSIndexPath *path = [aTableViewController.tableView indexPathForSelectedRow]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:03:45.507

我不能说我自己需要这样做，但是如果您*真的*不想更改源视图控制器，或者如果您经常需要从目标视图控制器中识别 segue，那么一种方法可以做到将是创建自己的 UIStoryboardSegue 子类。segue 已经知道目标视图控制器，因此让目标有机会检查 segue 是一件简单的事情。这样的事情应该可以解决问题：

```
@interface MyStoryboardSegue : UIStoryboardSegue
@end

@implementation MyStoryboardSegue

- (void)perform
{
    [super perform]

    if ([self.destinationViewController respondsToSelector:@selector(didPerformSegue:)]) {
        [self.destinationViewController didPerformSegue:self];
    }
}

@end 
```

如果您出于其他原因已经在使用 UIStoryboardSegue 子类，这不是一个很好的解决方案。事实上，我什至还没有测试过代码，所以也许有一些我还没有想到的障碍。然而，关键是，如果您希望 segue 在执行时通知目的地，您可能可以安排它。

# python - numpy中图像的Mipmap？

> ID：14549696
> 
> 赞同：1
> 
> 时间：2013-01-27T16:54:04.443
> 
> 标签：python, numpy

我正在与您核实是否有一个简洁的 numpy 解决方案来使用双线性过滤来调整 2D numpy 数组（这是一个图像）的大小？

更具体地说，我的数组具有形状（宽度，高度，4）（如在 rgba 图像中）。缩小比例也只在“偶数”步骤上进行：即从 (w, h, 4) 到 (w/2, h/2, 4) 到 (w/4, h/4, 4) 等。

我已经浏览了很长一段时间，但似乎每个人都指的是 imresize 的 scipy/PIL 版本。

我想尽量减少对 python 包的依赖数量，因此只有 numpy 的要求。

我只是想在我用 C++ 实现它之前先检查一下 SO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:31:16.440

我认为 numpy 中没有任何特定的解决方案，但是您应该能够在不离开 python 的舒适性的情况下有效地实现它。如果我错了，请纠正我，但是当图像的大小可以被 2 整除时，双线性滤波器基本上与将原始图像的 4 个像素平均得到新图像的 1 个像素相同，对吧？好吧，如果您的图像大小是 2 的幂，那么下面的代码：

```
from __future__ import division
import numpy as np
from PIL import Image

def halve_image(image) :
    rows, cols, planes = image.shape
    image = image.astype('uint16')
    image = image.reshape(rows // 2, 2, cols // 2, 2, planes)
    image = image.sum(axis=3).sum(axis=1)
    return ((image + 2) >> 2).astype('uint8')

def mipmap(image) :
    img = image.copy()
    rows, cols, planes = image.shape
    mipmap = np.zeros((rows, cols * 3 // 2, planes), dtype='uint8')
    mipmap[:, :cols, :] = img
    row = 0
    while rows > 1:
        img = halve_image(img)
        rows = img.shape[0]
        mipmap[row:row + rows, cols:cols + img.shape[1], :] = img
        row += rows
    return mipmap

img = np.asarray(Image.open('lena.png'))
Image.fromarray(mipmap(img)).save('lena_mipmap.png') 
```

产生这个输出：

![在此处输入图像描述](../Images/a3a8a0161960960866cb9bdd24b10733.png)

使用 512x512 的原始图像，它在我的系统上运行：

```
In [3]: img.shape
Out[3]: (512, 512, 4)

In [4]: %timeit mipmap(img)
10 loops, best of 3: 154 ms per loop 
```

如果出现奇数长度的边，这将不起作用，但取决于您希望如何处理这些情况下的下采样，您应该能够摆脱整行（或列）像素，重塑您的图像到`(rows // 2, 2, cols // 2, 2, planes)`，所以这`img[r, :, c, :, p]`是一个 2x2 的值矩阵，要进行插值以获得新的像素值。

# playframework - 将 Mustache 与 PlayFramework 一起使用

> ID：14549697
> 
> 赞同：1
> 
> 时间：2013-01-27T16:54:09.480
> 
> 标签：playframework, mustache, playframework-1.x

如何使用 play-mustache 模块 ( [http://www.playframework.org/modules/mustache-head/home](http://www.playframework.org/modules/mustache-head/home) ) 作为服务器端的默认模板渲染引擎？

文档的方式似乎每次我需要渲染模板时都必须调用 mustache.print 。这没有多大意义，因为我不想将每个 mustache 模板包装在一个 groovy 模板中，该模板将调用并呈现它。我希望这发生在幕后，即当控制器动作渲染时，渲染器应该使用 Mustache 而不是 groovy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:45:38.457

It looks like you could just call

```
MustacheSession session = MustachePlugin.session();
String html = session.toHtml("yourTemplate.html",data);
renderHtml(html); 
```

[https://github.com/murz/play-mustache/blob/master/app/play/modules/mustache/MustacheTags.java#L35](https://github.com/murz/play-mustache/blob/master/app/play/modules/mustache/MustacheTags.java#L35)

I can't say I understand how the Scope class in Mustache works, but here is a link: where data is Map used by the mustache Scope class [http://grepcode.com/file/repo1.maven.org/maven2/com.github.spullara.mustache.java/core/0.6/com/sampullara/mustache/Scope.java](http://grepcode.com/file/repo1.maven.org/maven2/com.github.spullara.mustache.java/core/0.6/com/sampullara/mustache/Scope.java)

# c++ - 寻找物体浮动状态的优化方法

> ID：14549698
> 
> 赞同：5
> 
> 时间：2013-01-27T16:54:22.903
> 
> 标签：c++, algorithm, math, mathematical-optimization, nonlinear-optimization

要解决的问题是在给定重量和重心的情况下找到浮体的漂浮状态。

我使用的函数计算给定下沉、脚跟和修剪的身体的位移体积和浮力中心。其中下沉是一个长度单位，而后跟/修剪是一个限制在 -90 到 90 之间的角度。

![三个变量的说明](../Images/bb3285b51a55206ec4ea3b57b61f43a9.png)

当位移体积与重量相等且重心与浮心在一条垂直线上时，即为漂浮状态。

我将此实现为具有 3 个变量（下沉、修剪、鞋跟）和 3 个方程的非线性 Newton-Raphson 求根问题。此方法有效，但需要良好的初始猜测。所以我希望找到更好的方法，或者找到初始值的好方法。

下面是用于 Newton-Raphson 迭代的牛顿和雅可比算法的代码。函数volume接受参数sinkage、heel和trim。并返回体积和浮力中心的坐标。

我还包括了 maxabs 和 GSolve2 算法，我相信这些是取自 Numerical Recipies。

```
void jacobian(float x[], float weight, float vcg, float tcg, float lcg, float jac[][3], float f0[]) {
    float h = 0.0001f;
    float temp;
    float j_volume, j_vcb, j_lcb, j_tcb;
    float f1[3];

    volume(x[0], x[1], x[2], j_volume, j_lcb, j_vcb, j_tcb);
    f0[0] = j_volume-weight;
    f0[1] = j_tcb-tcg;
    f0[2] = j_lcb-lcg;

    for (int i=0;i<3;i++) {
        temp = x[i];
        x[i] = temp + h;
        volume(x[0], x[1], x[2], j_volume, j_lcb, j_vcb, j_tcb);

        f1[0] = j_volume-weight;
        f1[1] = j_tcb-tcg;
        f1[2] = j_lcb-lcg;
        x[i] = temp;

        jac[0][i] = (f1[0]-f0[0])/h;
        jac[1][i] = (f1[1]-f0[1])/h;
        jac[2][i] = (f1[2]-f0[2])/h;
    }
}

void newton(float weight, float vcg, float tcg, float lcg, float &sinkage, float &heel, float &trim) {
    float x[3] = {10,1,1};

    float accuracy = 0.000001f;
    int ntryes = 30;
    int i = 0;
    float jac[3][3];
    float max;
    float f0[3];
    float gauss_f0[3];

    while (i < ntryes) {
        jacobian(x, weight, vcg, tcg, lcg, jac, f0);

        if (sqrt((f0[0]*f0[0]+f0[1]*f0[1]+f0[2]*f0[2])/2) < accuracy) {
            break;
        }

        gauss_f0[0] = -f0[0];
        gauss_f0[1] = -f0[1];
        gauss_f0[2] = -f0[2];

        GSolve2(jac, 3, gauss_f0);

        x[0] = x[0]+gauss_f0[0];
        x[1] = x[1]+gauss_f0[1];
        x[2] = x[2]+gauss_f0[2];

        // absmax(x) - Return absolute max value from an array
        max = absmax(x);
        if (max < 1) max = 1;

        if (sqrt((gauss_f0[0]*gauss_f0[0]+gauss_f0[1]*gauss_f0[1]+gauss_f0[2]*gauss_f0[2])) < accuracy*max) {
            x[0]=x2[0];
            x[1]=x2[1];
            x[2]=x2[2];
            break;
        }

        i++;
    }

    sinkage = x[0];
    heel = x[1];
    trim = x[2];
}

int GSolve2(float a[][3],int n,float b[]) {
    float x,sum,max,temp;
    int i,j,k,p,m,pos;

    int nn = n-1; 

    for (k=0;k<=n-1;k++)
    {
        /* pivot*/
        max=fabs(a[k][k]);
        pos=k;

        for (p=k;p<n;p++){
            if (max < fabs(a[p][k])){
                max=fabs(a[p][k]);
                pos=p;
            }
        }

        if (ABS(a[k][pos]) < EPS) {
            writeLog("Matrix is singular");
            break;
        }

        if (pos != k) {
            for(m=k;m<n;m++){
                temp=a[pos][m];
                a[pos][m]=a[k][m];
                a[k][m]=temp;
            }
        }

        /*   convert to upper triangular form */
        if ( fabs(a[k][k])>=1.e-6)
        {
            for (i=k+1;i<n;i++)
            {
            x = a[i][k]/a[k][k];
            for (j=k+1;j<n;j++) a[i][j] = a[i][j] -a[k][j]*x;
            b[i] = b[i] - b[k]*x;
            }
        }
        else
        {
            writeLog("zero pivot found in line:%d",k);
            return 0;
       }
     }

/*   back substitution */
     b[nn] = b[nn] / a[nn][nn];
     for (i=n-2;i>=0;i--)
     {
        sum = b[i];
         for (j=i+1;j<n;j++) 
           sum = sum - a[i][j]*b[j];
        b[i] = sum/a[i][i];
     }
     return 0;
}

float absmax(float x[]) {
    int i = 1;
    int n = sizeof(x);
    float max = x[0];
    while (i < n) {
        if (max < x[i]) {
            max = x[i];
        }
        i++;
    }
    return max;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:01:45.970

您是否考虑过一些随机搜索方法来找到初始值，然后使用 Newton Raphson 进行微调？一种可能性是进化计算，您可以使用 Inspyred 包。对于在许多方面与您描述的物理问题相似的物理问题，请查看以下示例：http: [//inspyred.github.com/tutorial.html#lunar-explorer](http://inspyred.github.com/tutorial.html#lunar-explorer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:05:26.220

使用**牛顿方法的阻尼版本**怎么样？你可以很容易地修改你的实现来实现它。将牛顿的方法视为寻找方向

d_k = f(x_k) / f'(x_k)

并更新变量

x_k+1 = x_k - L_k d_k

在通常的牛顿法中，L_k 始终为 1，但这可能会产生过冲或下冲。所以，让你的方法选择L_k。假设您的方法通常会过冲。一种可能的策略是采用集合 {1,1/2,1/4,1/8,... L_min} 中最大的 L_k，使得条件

|f(x_k+1)| <= (1-L_k/2) |f(x_k)|

满足（如果没有值满足此标准，则为 L_min）。

使用相同的标准，另一种可能的策略是从 L_0=1 开始，如果不满足标准，请尝试使用 L_0/2 直到它起作用（或直到 L_0 = L_min）。然后对于 L_1，从 min(1, 2L_0) 开始并执行相同的操作。然后从 L_2=min(1, 2L_1) 等开始。

顺便说一句：你确定你的问题有一个独特的解决方案吗？我想这个问题的答案取决于你的物体的形状。如果你有一个橄榄球，有一个角度是你无法修复的。因此，如果您的形状接近这样的物体，我不会对这个角度难以解决问题感到惊讶。

# c# - 如何运行 c# 源代码？

> ID：14549699
> 
> 赞同：0
> 
> 时间：2013-01-27T16:54:23.570
> 
> 标签：c#

> **可能重复：**
> [是否可以在没有 Visual Studio 的情况下安装 c# 编译器？](https://stackoverflow.com/questions/861384/is-it-possible-to-install-c-sharp-compiler-w-o-visual-studio)

我刚刚完成了作为艺术家的 Global Game Jam 13。我有游戏的文件，但不知道如何运行它们。它是文件夹中的所有 .cs 文件和文件夹。如何从中制作可执行文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T16:56:04.427

将其加载到 Visual Studio 中。这应该是`.sln`文件，如果一个不存在，就会有一个`.csproj`文件。

[您可以在此处](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)获得免费的快捷版- 您很可能需要 Windows 桌面版。

构建和启动你`F5`是常用的键盘快捷键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:57:49.057

您还可以考虑使用[MONO](http://mono-project.com/)，它是一个免费软件、多平台、C# 实现。

但是，在所有情况下，您至少需要将 C# 源代码编译为 CIL 字节码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:00:25.640

如果您只想构建它，并且有一个 .csproj 或 .sln 文件，您可以从命令行使用 msbuild：

```
msbuild proj_file.csproj
msbuild solution_file.sln 
```

MSBuild 位于 .Net 框架安装文件夹中，即`%WINDIR%/Microsoft .Net/Framework(64)\version\`

如果没有 csproj 或解决方案文件，您将不得不直接使用 C# 编译器 (csc.exe) - 请参见[此处](http://msdn.microsoft.com/en-us/library/vstudio/2fdbz5xd.aspx)。

# php - 让服务器接受具有中止/恢复功能（如 S3）的大文件的分段上传

> ID：14549713
> 
> 赞同：1
> 
> 时间：2013-01-27T16:55:26.340
> 
> 标签：php, python, http, rest, amazon-s3

Amazon S3 有[一个非常棒的功能](http://aws.amazon.com/about-aws/whats-new/2010/11/10/Amazon-S3-Introducing-Multipart-Upload/)，它允许为较大的文件分段上传文件。如果我使用 S3，这对我来说非常有用，但我不是。

这是我的问题：我将让 Android 手机半定期上传相当大的文件（每个二进制数据约 50MB）。因为这些手机是使用移动网络来做这个的，而且在一些使用它们的地方的覆盖范围参差不齐，因此无法保证强信号。因此，在内容正文中用 40MB 的数据做一个简单的 PUT 不会很好用。**我需要以某种方式拆分数据（可能分成 10MB 的块）并在信号允许时上传它们。上传所有块后，需要将它们合并到一个文件中。**

通过阅读亚马逊的 S3 客户端 API，我对客户端需要如何表现来支持这一点有了基本的了解，但不知道服务器正在做什么来允许这样做。我愿意用**Python 或 PHP**编写服务器。**是否有任何一种语言的库允许这种事情？**经过大约一个小时的搜索，我找不到任何东西。

基本上，我正在寻找任何可以帮助我指明正确方向的东西。关于这方面的信息以及使用哪些协议和标头来使其尽可能 RESTful 会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:10:54.873

从[多部分上传](http://aws.amazon.com/about-aws/whats-new/2010/11/10/Amazon-S3-Introducing-Multipart-Upload/)的 REST API 文档来看，亚马逊似乎希望客户端将大文件分成更小的多个部分并单独上传。在上传之前，您需要获取一个[上传 ID](http://docs.aws.amazon.com/AmazonS3/latest/API/mpUploadInitiate.html)，并且在每次上传时，您都包括上传 ID 和正在上传的文件部分的部件号。

您可能必须进行结构化的方式是创建一个客户端，该客户端可以将一个巨大的文件拆分为多个部分，并使用上述指定的约定并行上传它们。

# php - PHP eval() 接受 eval() 之外的解析错误。怎么可能？

> ID：14549725
> 
> 赞同：0
> 
> 时间：2013-01-27T16:57:30.407
> 
> 标签：php, encoding, eval, obfuscation, deobfuscation

我正在使用一些 PHP 混淆/编码工具，该工具无需任何服务器端加载程序即可工作，但我惊讶地发现了我无法解码的解决方案。

我认为自己通常很了解通过编码和混淆来“保护”php代码的不同解决方案，并且我知道两个基本规则：

*   如果 PHP 可以阅读和理解您的代码，无论经过多少混淆和编码，您也可以

*   基于使用 eval() 语言结构的编码解决方案是可破坏的，因为输出代码将作为 eval 结构中的参数传递（用 echo 或 print 替换 eval）

好吧，在我找到这个工具之前，这些原则非常有效，准确地编码了这段代码

```
<?php
echo "Hello World!";
?> 
```

得到了这个：

```
<?php $_F=__FILE__;$_C0='cl92S3IqSnY0aVlwKWFwNTVwYVl8fEtyKkp2NDlZcClhb2EodWFZNDdySnYnOXNpV0xyOCA4fU9yPksgTFY4IHNKSg0gSjo+ck9KNz05dHNpOXNPIHRpU31Pcj5LOCA+T0lLSn1LSjcgYzhyDQAgS0xKICxqLCBrY1ZPNyBXT3JWJiBuSk84ckkNIFZPSiBdViZyNyBfSU8gbyggTEljTzggSQ0mQj0nNEc/aTk/Pkw+MCFKfUxJICJqSiYmSSAySU8mN0UiRzAhP2k5Pz5MPiByX3ZMSlY3Sk84pzhKDUt2NDRKfUxJdnNWOEpGKKc3Sn1JN0p2JyxrWD43cjNtN2omOHFXJQ19a2FtVi1YPnNvKEZRMmhtc286WTdrYHU3byZaN2sARk5kYlR9agB1c2tuKjdkSVkuI2B1N2thVDYrZlR9agB1czK0QnFvJmMKMjomcQ1iRgpXZlkuajMoNnAzTHFrWD5zKn1GNmozKDZwM0xxa1g+cyp9S3Nrbio3ZEklNi0zKDZvaF19KlgmfStJOn1qAAB9b2E4VjJiAGZtWik2V0tyUTJOT3FwaF03MilaNnJOKnErWgA3LWg4Z2tMJTdqQUYKQmFwN3B9Y31rTFRxcG5MfSpiY3MqbiUKcE4rfSomVDcjWgBzKjVLfSpuVHEytCVmZGZvfWoAAE5wMyg2b3Fdcw1iS3EqtEtWMjopNiZxJn0qWExzKk04WG9uY3EtcUwKak5Mcw0uS31vbkJWMlF1cSphYzcjWW1WLT4mNitNQn1qAHVRb2E4c3BmRmZtUW9OKzgNZmthY1FvOj5RbzhhaHBYSVYtLmN9cFgpc2tgY3FrJm19azpMSlclcnMqYWNxU2Z1aG0pYFZrJm1mak4rfSomVDcjM3BRLS4AfWpoXTdrbis3a25aZmpubVYyKQ1malhJcVNBNVFTM0l9Km4qLFM3STdqWFQ2cjVdN3A3cAoNM0l9azdZUS1oWgoqKSY3I30AfXBYKXNrYGFob05dc2thQjZyLlROKi51N2tuKDcjWVpxMk5dfSq0JVYyYWM2DW5jcWtuQnNrJmNxV0sqc28pJQotNyZWMjdJN2Q+cnNvOlpoQjMlUS1oDXEtYmFoWWFyc2u0Y1ZCfWVgTUxiZk03WVEtaFosI2FMLHIzYH0qJkxzIzMycS1obVYyYWMKK1RdcWsmbywAUCc0NEc/aQ=';$_D=strrev('edoced_46esab');eval($_D('JF9DMD1iYXNlNjRfZGVjb2RlKCRfQzApOyRfQzA9c3RydHIoJF9DMCwnKEEuZ1B0TzZyDVF+p1khLHszTHcwOkhxKVpXSjFkbURYbioKOGBoZkktZbQjNENOUzJhNXZbb2lda007X3hianNsY0IAdSY3eXpVVCtwOT4lRy9GCVZLPX1SRTwnLCc0QU1LPS9yT2luWbRfMQpQfkJoOg14Jlo1a1RlKkR6XVJWbUxzVUpJb1grRkMpYE5TVzk4KH0yPnZHRSVmLVFIYlt1eWc3bGRxpyx3ajM8cDA7IzZ7YXQuYwkhACcpOyRfUj1zdHJfcmVwbGFjZSgnX19GSUxFX18nLCInIi4kX0YuIiciLCRfQzApO2V2YWwoJF9SKTskX1I9MDskX0MwPTA7'));?> 
```

除了我无法解释的一件事之外，给定的代码实际上并没有什么特别之处：

**当我输出要在 eval() 中作为参数传递的代码时，该代码会生成解析错误。**

当然，PHP 不会接受这个：

```
$_C0=base64_decode($_C0);$_C0=strtr($_C0,'(A.gPtO6r
Q~§Y!,{3Lw0:Hq)ZWJ1dmDXn*
8`hfI-e´#4CNS2a5v[oi]kM;_xbjslcBu&7yzUT+p9>%G/F VK=}RE<','4AMK=/rOinY´_1
P~Bh:
x&Z5kTe*Dz]RVmLsUJIoX+FC)`NSW98(}2>vGE%f-QHb[uyg7ldq§,wj3 
```

但这就是在上面编码脚本中的 eval() 构造中传递的代码。一切正常。怎么可能？Eval 构造仅此而已 - 据我所知 - 然后将字符串解释为常规 PHP 代码，并且如果该字符串包含在 eval() 中对于 PHP 不正确的内容 - 如果将其直接传递给脚本，它肯定会相同没有评估。

这里的奥秘是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:13:12.720

您正在打印的 base64_decode 的结果包含一些控制字符，这些字符会欺骗控制台隐藏代码的某些部分。实际结果是这样的：

```
$_C0=base64_decode($_C0);$_C0=strtr($_C0,'(A.gPtO6r^MQ~§Y!,{3Lw0:Hq)ZWJ1dmDXn*
8`hfI-e´#4CNS2a5v[oi]kM;_xbjslcB^@u&7yzUT+p9>%G/F   VK=}RE<','4AMK=/rOinY´_1
P~Bh:^Mx&Z5kTe*Dz]RVmLsUJIoX+FC)`NSW98(}2>vGE%f-QHb[uyg7ldq§,wj3<p0;#6{at.c !^@');$_R=str_replace('__FILE__',"'".$_F."'",$_C0);eval($_R);$_R=0;$_C0=0; 
```

解码成这样：

```
if(time()>1359388391||time()<1359294791)die('<b>This script has been expired.</b><br />Scripts protected using the PHP Guard Trial Version are valid for 24 hours only.');?><?php
echo "Hello World!";
?><?php if(headers_sent())echo(base64_decode('PGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NDQwcHg7bGVmdDo1MCU7dG9wOjIwcHg7bWFyZ2luLWxlZnQ6LTI1MHB4O3BhZGRpbmc6OHB4O3BhZGRpbmctbGVmdDo0OXB4O2JvcmRlcjoxcHggc29saWQgIzk5OTtiYWNrZ3JvdW5kOiNmZjkgdXJsKGh0dHA6Ly93d3cucGhwZ3VhcmQubmV0L3NjcmlwdCkgbm8tcmVwZWF0IDI2cHggN3B4O2ZvbnQtZmFtaWx5OlZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEycHg7Y29sb3I6IzY2NjsnIG9uY2xpY2s9J3RoaXMuc3R5bGUuZGlzcGxheT0ibm9uZSI7Jz5UaGlzIHNjcmlwdCB3YXMgcHJvdGVjdGVkIHVzaW5nIHRoZSA8YSBocmVmPSdodHRwOi8vd3d3LnBocGd1YXJkLm5ldCcgc3R5bGU9J2NvbG9yOiMwNmM7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtmb250LXdlaWdodDpib2xkJyB0YXJnZXQ9J19ibGFuayc+UEhQIEd1YXJkPC9hPiBUcmlhbCBWZXJzaW9uLjwvZGl2Pg='));?> 
```

解码成这样：

```
<div style='position:absolute;width:440px;left:50%;top:20px;margin-left:-250px;padding:8px;padding-left:49px;border:1px solid #999;background:#ff9 url(http://www.phpguard.net/script) no-repeat 26px 7px;font-family:Verdana,Geneva,sans-serif;font-size:12px;color:#666;' onclick='this.style.display="none";'>This script was protected using the <a href='http://www.phpguard.net' style='color:#06c;text-decoration:underline;font-weight:bold' target='_blank'>PHP Guard</a> Trial Version.</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:02:17.120

从 PHP 手册...

> eval() 返回 NULL，除非在评估代码中调用 return，在这种情况下，传递给 return 的值被返回。**如果评估代码中存在解析错误，则 eval() 返回 FALSE 并继续正常执行以下代码。**使用 set_error_handler() 无法在 eval() 中捕获解析错误。

[PHP 手册 - eval()](http://php.net/manual/en/function.eval.php)

# c# - Windows 商店应用程序：点对点连接

> ID：14549727
> 
> 赞同：2
> 
> 时间：2013-01-27T16:57:35.810
> 
> 标签：c#, windows-8, p2p

我在使用 Windows 8 商店应用程序时遇到了一点问题。我的问题很简单：

我在 1 台电脑上有一个 Windows 8 商店应用程序，在另一台电脑上有相同的应用程序。PC不在同一个网络中，但有互联网。我想从 PC A 向 PC B 发送一条消息（字符串/字节）。

我怎样才能做到这一点？

**编辑：**

好的，StremSocket 连接有效。我成功地将数据从 PC A 发送到 PC B。我将编写一个简单的演示来演示它。现在是棘手的部分——发现。

我的想法很简单：创建一个 Azure 服务，该服务包含一个数据库，其中包含表单中的对等点（ip、port、**timeout**）。会有一些规则。

1.  当您制作“服务器”时，应用程序将每 1 秒通知一次服务是否存在。
2.  当服务以（ip，端口）形式从应用程序接收数据时，它将检查数据库中是否存在此条目：
    2.1 如果是 - 将条目的超时重置为 0
    2.2 如果不 - 将服务器插入数据库初始超时 0
3.  服务将按照以下规则每秒更新数据库：
    3.1 将每个条目的超时时间增加 1
    3.2 如果条目的超时时间>5（5 秒未重新连接） - 将其删除。

我确信有一个更聪明的解决方案，但是这个似乎没什么工作，我认为它应该可以满足我的需要。你们有什么感想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:04:42.047

我认为这[`StreamSocket`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150599.aspx)就是你想要的。这将允许两个客户端之间的连接和来回通信。如果您希望他们能够找到彼此，您可能必须提供托管在某处服务器上的服务，该服务将列出可用的客户端连接。

# apache2 - 返回 404 错误的 Apache 自定义 404 页面

> ID：14549731
> 
> 赞同：3
> 
> 时间：2013-01-27T16:58:19.283
> 
> 标签：apache2, http-status-code-404, custom-error-pages

我的 apache (404.php) 上有一个自定义的 404 错误页面，它可以正常工作，但是如果有人或任何搜索引擎请求该`/404.php`页面，服务器会返回`200 (OK)`，因为该页面确实存在。

我已经将`Disallow: /404.php`放在我的`robots.txt`文件中以防止 Google 将该页面编入索引，但我想返回 404，包括此页面请求。

当有人直接到达时，有没有办法也返回 404 `404.php`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T18:46:28.800

我很快就把它搞定了：

```
<?
 header("HTTP/1.1 404");
 echo "ERROR"; // Put the contents of your 404 page here.
?> 
```

我在 Chrome 中检查了它，这将在标题中返回一个 404 代码，并让您在页面的其余部分写入您想要的任何内容。只需将`header`功能放在页面的开头即可。

# vim - VimL：从输出文件大小的函数中获取额外的 KB

> ID：14549733
> 
> 赞同：0
> 
> 时间：2013-01-27T16:58:38.283
> 
> 标签：vim, vim-plugin

现在我正在为 Vim 创建一个插件，它意味着简单地将各种实用功能放入您的状态行，这是链接：[https ://github.com/Greduan/vim-usefulstatusline](https://github.com/Greduan/vim-usefulstatusline)

现在我有这个功能：[https ://github.com/Greduan/vim-usefulstatusline/blob/master/autoload/usefulstatusline_filesize.vim](https://github.com/Greduan/vim-usefulstatusline/blob/master/autoload/usefulstatusline_filesize.vim)

它只是将文件大小从字节输出到兆字节。现在，目前如果文件大小达到 1MB，例如它输出`1MB`，这很好，但我也希望它输出它所拥有的字节数或额外的 KB。

例如，不是输出`1MB`而是输出`1MB-367KB`，明白我的意思吗？它会输出最大的尺寸，然后是它后面的剩余尺寸。很难解释。

那么我将如何修改当前函数以这种方式输出大小？

谢谢你的帮助！任何一个都值得赞赏。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T17:15:15.133

谁需要这个？我怀疑这对任何人来说都会很方便（尤其是当有 1MB + 3KB 这样的小余数时），使用 1.367MB​​ 会好得多。我在您的代码中看到您没有 MB (1000*1000 B) 或 MiB (1024*1024 B)，1000*1024 字节*非常*奇怪。另外，不要使用`getfsize`，对于您在插件中经常看到的任何非文件缓冲区都是错误的。使用`line2byte(line('$')+1)-1`.

对于 1.367MB [`humanize_bytes`](https://github.com/ZyX-I/powerline/blob/c7d3e98f2e17a81c7461e7048e37818174997ed6/powerline/lib/humanize_bytes.py)​​，如果您对依赖功能感到满意，您可以在 VimL 中重写函数`+float`。

使用整数算术，你可以得到余数

```
let kbytes_remainder = kbytes % 1000 
```

并更改为`MiB`/ `KiB`（`M`/是. *without*`K`中使用的常用快捷方式）或/ 。`ls` *`B``MB``KB`*

# c# - 带有图像的 asp:menu 上面有填充

> ID：14549738
> 
> 赞同：1
> 
> 时间：2013-01-27T16:59:01.090
> 
> 标签：c#, asp.net, css

我在表中的站点主控中有一个菜单栏。出于某种原因，我无法弄清楚它上面总是有填充。

这是CSS：

```
div.menu
{
    padding: 0px 0px 0px 0px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
}

div.menu ul li 
{
    color: white;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    display: block;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a
{ 
    padding: 4px 20px;
    color: white;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    display: block;
    text-decoration: none;
    white-space: nowrap;
    background-color: #2c4257;
}

div.menu a ul li a:visited
{
    background-color: #25394B;
    color: white;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    display: block;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #25394B;
    color: #ef7c31;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #25394B;
    color: #ef7c31;
    text-decoration: none;
    text-align:left
} 
```

这是在网站主人

```
 <table style="background-color: #2E4459">
     <tr>
         <td>
             <asp:Menu ID="SettingsMenu" runat="server" EnableViewState="True" IncludeStyleBlock="false" Orientation="Horizontal" CssClass="menu">
             <DynamicSelectedStyle ForeColor="#ef7c31" />
                 <Items>
                     <asp:MenuItem ImageUrl="Images/settings.png">
                     <asp:MenuItem NavigateUrl="~/Pages/CRMSettings/Area.aspx" Text="Area" />
                     <asp:MenuItem NavigateUrl="~/Pages/CRMSettings/Post.aspx" Text="Post" /> 
```

我不知道如何修复它，大约 30 px。

![在此处输入图像描述](../Images/1099a67548792ed7b78b3dacff1b1d70.png)

如果我只是输入文字，它也会在没有图像的情况下发生。

![在此处输入图像描述](../Images/5e6f4994723141e700c2afc20b450078.png)这是设置.png

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:41:55.233

```
div.menu
{
    padding: 0px !important;
} 
```

试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:27:04.127

我认为这就是你所需要的。尝试这个。将此添加到您的`CSS`

```
html,body
{
    padding:0px;
    margin:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:49:17.493

我发现有一个`padding` **填充：4px 20px;** 改变的价值`div.menu ul li a`将帮助你。将其更改为**div.menu ul li ul li a**

```
div.menu ul li ul li a
{ 
    padding: 4px 20px;
    color: white;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    display: block;
    text-decoration: none;
    white-space: nowrap;
    background-color: #2c4257;
} 
```

# php - 如何获取 Vine 视频网址

> ID：14549745
> 
> 赞同：8
> 
> 时间：2013-01-27T16:59:11.763
> 
> 标签：php, javascript, jquery, video, vine

我喜欢[vinepeek](http://vinepeek.com)并且想要做得更好。

我有 Vine 链接，例如`http://vine.co/v/bJqWrOHjMmU`，但这是指向页面的链接，而不是视频 URL。

我知道它是新的，但 Vine 是否有 API，或者我还能如何获取视频的 url？我仍然对 Vinepeek 如何获取视频 url 感到困惑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T17:08:50.123

它在页面源中；你可以用 JavaScript 小书签解析它

```
function qry(sr) {
  var qa = [];
  for (var prs of sr.split('&')) {
    var pra = prs.split('=');
    qa[pra[0]] = pra[1];
  }
  return qa;
}

var alpha = document.querySelector('[name=flashvars]').getAttribute('value');
var bravo = qry(alpha);
bravo.src; 
```

结果

```
https://vines.s3.amazonaws.com/videos/08C49094-DFB4-46DF-8110-EEEC7D4D6115-1133-000000B8AD9BE72C_1.0.1.mp4?versionId=TQGtC5O7G7H34TleFA2LF0Er9tI8VZUe
```

[来源](http://github.com/svnpenn/bm/blob/d4a71431beeb94901d68daec508bf6/yt.js#L1-L8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:06:06.147

JSON API 具有以下 URL：http: [//vinepeek.com/video](http://vinepeek.com/video)

您可以使用 Web 检查器/控制台/开发人员工具来检查源代码。

```
<video id="post_html5_api" class="vjs-tech" loop="" preload="auto" src="https://vines.s3.amazonaws.com/videos/08C49094-DFB4-46DF-8110-EEEC7D4D6115-1133-000000B8AD9BE72C_1.0.1.mp4?versionId=TQGtC5O7G7H34TleFA2LF0Er9tI8VZUe"></video> 
```

网址是：

```
https://vines.s3.amazonaws.com/videos/08C49094-DFB4-46DF-8110-EEEC7D4D6115-1133-000000B8AD9BE72C_1.0.1.mp4?versionId=TQGtC5O7G7H34TleFA2LF0Er9tI8VZUe
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T05:10:56.087

这是一个简单的函数，我用来从 curl 结果中获取视频 src。 [http://vine.co/v/bJqWrOHjMmU](http://vine.co/v/bJqWrOHjMmU)

```
function getVineVideoFromUrl($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $res = curl_exec($ch);
    preg_match('/twitter:player:stream.*content="(.*)"/', $res, $output);
    return $output[1];
} 
```

结果

```
https://vines.s3.amazonaws.com/v/videos/08C49094-DFB4-46DF-8110-EEEC7D4D6115-1133-000000B8AD9BE72C_1.0.1.mp4?versionId=ms6ePoPeFm6NQZkeNHegV3k_ZLV4bz9x 
```

# unicode - 是否有任何 UTF-8 代码单元的字节 60 或 62（`<` 和 `>`）不是其二进制表示的第一个字节？

> ID：14549746
> 
> 赞同：1
> 
> 时间：2013-01-27T16:59:15.450
> 
> 标签：unicode, utf-8

我需要调试一个 XML 解析器，我想知道我是否可以构造“恶意”输入，这将导致它无法正确识别开始和结束标签。

此外，一般我在哪里可以找到此类信息？在此之后，我还想确保我正在使用的解析器不会遇到其他特殊字符（如`&`、`=`、`"`等）的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:12:32.660

UTF-8 可以很容易地弄清楚代码单元（即字节）的作用是什么：

*   如果最高位没有设置，即代码单元是`0xxxxxxx`，那么这个字节表示一个完整的代码点，其值为`xxxxxxx`（即7位信息）。

*   如果设置了最高位并且代码单元是`10xxxxxx`，那么它是多字节序列的连续部分，携带六位信息。

*   否则，代码单元是多字节序列的起始字节，如下：

    *   `110xxxxx`：两个字节（一个连续字节），为 5 + 6 = 11 位。
    *   `1110xxxx`：三个字节（两个连续字节），为 4 + 6 + 6 = 16 位。
    *   `11110xxx`：四个字节（三个连续字节），用于 3 + 6 + 6 + 6 = 21 位。

如您所见，值 60，即`00111100`，是 value 的单字节代码点`60`，并且同一字节不能作为任何多字节序列的一部分出现。

该方案实际上可以扩展到七个字节，最多编码 36 位，但由于 Unicode 只需要 21 位，因此四个字节就足够了。该标准要求*必须*用最少数量的代码单元来表示代码点。

*更新：*正如@Mark Tolonen 正确指出的那样，您应该仔细检查每个编码的代码点是否实际上是用最少数量的代码单元编码的。如果浏览器无意中接受了此类输入，则用户可能会从您身边偷偷摸摸一些您在逐字节分析中不会发现的东西。作为起点，您可以查找类似 的字节`10111100`，但您必须检查它所属的整个多字节序列（因为它当然可以作为不同代码点的一部分合法地出现）。最终，如果您不能信任浏览器，您就无法真正绕过解码所有内容并仅检查生成的代码点序列是否出现 U+3C 等，甚至不必费心查看字节流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:05:51.263

在 UTF-8 中，没有。在其他编码中，是的。

在 UTF-8 中，根据设计，多字节字符的所有字节将始终设置最高位。反之亦然，没有设置最高位的字节始终是 ASCII 字符。

但是，这不适用于其他编码，也适用于 XML。

有关 UTF-8 的更多信息，请查看例如[wikipedia](http://en.wikipedia.org/wiki/UTF-8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T19:17:43.403

设计不佳的 UTF-8 解码器*可以*将字节`C0 BC`和解释`C0 BE`为`U+003C`和`U+003E`. 正如@KerrekSB 在他的回答中所说：

> 该标准要求*必须*用最少数量的代码单元来表示代码点。

但是一个糟糕的算法可能仍然会解码一个格式错误的两字节 UTF-8 序列，该序列*不是*最小数量的代码单元：

> C0 BC = **110** 00000 **10** 111100 = 00000111100 = 3C[十六进制]= 60 [dec] = '<'

因此，在您的测试中，请务必包含格式错误的 UTF-8 序列并验证它们是否被拒绝。

# ruby-on-rails - 简单的 Rails 3.2 应用程序 + RefineryCMS + 设计

> ID：14549747
> 
> 赞同：0
> 
> 时间：2013-01-27T16:59:19.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, refinerycms

我有一个简单的 Rails 3.2 应用程序，后来按照官方指南 ( [http://refinerycms.com/guides/with-an-existing-rails-app](http://refinerycms.com/guides/with-an-existing-rails-app) ) 添加了 RefineryCMS。现在我想向 Rails 应用程序添加设计，以限制基于登录用户的公共内容。

我知道有一个官方的 RefineryCMS 指南关于将 RefineryCMS 添加到现有的 Rails 应用程序 + 设计（[http://refinerycms.com/guides/with-an-existing-rails-31-devise-app](http://refinerycms.com/guides/with-an-existing-rails-31-devise-app)），但我的情况是不同的就我而言，现在要添加设计。我需要记住的任何具体步骤。如果有人可以指点我一个教程，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:34:17.183

我按照指南[http://refinerycms.com/guides/with-an-existing-rails-31-devise-app](http://refinerycms.com/guides/with-an-existing-rails-31-devise-app)中的程序进行操作。

有错误

*   未定义的方法“new_refinery_user_registeration_path”和刷新
*   未初始化的常量 Refinery::Role

为此，我必须在用户模型中将 ::Refinery::Role 替换为 ::Role 并覆盖refinery_user_required？刚刚安装？在 lib/refinery/refinery_patch.rb

```
def refinery_user_required?
  false
end

def just_installed?
 false
end 
```

# java - Servlet 图像显示

> ID：14549748
> 
> 赞同：0
> 
> 时间：2013-01-27T16:59:20.943
> 
> 标签：java, servlets, image-processing

也许我不太了解 servlet 生命周期，但这就是我想要的：我想显示一个由 servlet 生成的页面，比如说 servlet：paginaAmd。在此页面上，我想显示存储在 Web 服务器文件夹中的图像列表。图像的 url 地址类似于：/img/80-80-1-1-1-1-1-1-1-1-1 其中 /img/* 是我用于显示图像的 servlet。

如果我想在浏览器中一次显示一张图像，一切都很好。但是当我想一次放置所有列表时，图像无法正确显示。有时根本不显示，有时显示在错误的位置（位置没有及时改变），有时只显示一些图像。

我怀疑不是所有的 doGet() 方法都被捕获了。

有人可以给我一些建议吗？以下是本教程实现的 servlet 代码：http: [//balusc.blogspot.fr/2007/04/imageservlet.html](http://balusc.blogspot.fr/2007/04/imageservlet.html)

```
@WebServlet(name = "ImgDisplay", urlPatterns = {"/img/*"})
public class ImgDisplay extends HttpServlet
{
    private SessionFactory sessionfactory = new AnnotationConfiguration().configure().buildSessionFactory();
    private Query query;
    private String mesajEroare = "";
    private HttpServletRequest _request;
    private HttpServletResponse _response;

    private int width = 0;
    private int height = 0;
    private int idImagine = 0;
    private int format = 0;
    private String titluArticol = "";
    private String numeImagine = "";
    private boolean imgValida = false;

    private int DEFAULT_BUFFER_SIZE = 1024 * 100;

    String fileUploadPath = "";

    @Override
    public void init() throws ServletException {
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException
    {
        this._request = request;
        this._response = response;

        this.SetVariabile();

        if(imgValida)
        {
            String nImagine = this.GetImageFromDisk();
            this.DisplayImage(nImagine);
        }

    }

    private void SetVariabile()
    {
        String reqUrl = _request.getRequestURL().toString();

        String aUrl[] = reqUrl.split("/");
        String urlImg = aUrl[aUrl.length - 1];

        aUrl = urlImg.split("-");
        try
        {
            this.width = Integer.parseInt(aUrl[0]);
            this.height = Integer.parseInt(aUrl[1]);
            this.idImagine = Integer.parseInt(aUrl[2]);
            this.format = Integer.parseInt(aUrl[3]);
            this.numeImagine = aUrl[aUrl.length - 1];
            this.imgValida = true;
        }
        catch(Exception e)
        {
            this.imgValida = false;
        }

    }

    private String GetImageFromDisk()
    {
        String nImagine;
        //preiau imaginea
        PaginiImagini pa = new PaginiImagini();
        Session session;
        try
        {
            session = sessionfactory.openSession();
            session.beginTransaction();

            query = session.getNamedQuery("PaginiImagini.findByImagineID");
            query.setInteger("imagineID", this.idImagine);
            pa = (PaginiImagini) query.uniqueResult();
            session.getTransaction().commit();
            session.close();
        }
        catch( Exception e )
        {
            this.mesajEroare = "Nu pot citi din baza de date!";
        }

        // citesc imagine de pe disk
        ServletContext sctx = getServletContext();
        this.fileUploadPath = sctx.getInitParameter("file-upload-path");
        String pathImagine = this.fileUploadPath + "/" + Setari.pathImaginiMici;
        if(this.width > Setari.wImagineMica || this.height > Setari.hImagineMica)
        {
            pathImagine = this.fileUploadPath + "/" + Setari.pathImaginiMari;
        }

        nImagine =  pathImagine + "/" + pa.getNumeImaginePeDisc();
        return nImagine;
    }

    private void DisplayImage(String imageToRead) throws FileNotFoundException, IOException
    {
        File image = new File(imageToRead);

        String contentType = getServletContext().getMimeType(image.getName());
        _response.setContentType(contentType);
        _response.setHeader("Content-Length", String.valueOf(image.length()));
        _response.setHeader("Content-Disposition", "inline; filename=\"" + image.getName() + "\"");
        _response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        _response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
        _response.setDateHeader("Expires", 0); // Proxies.

        // Prepare streams.
        BufferedInputStream input = null;
        BufferedOutputStream output = null;

        try
        {
            // Open streams.
            input = new BufferedInputStream(new FileInputStream(image), DEFAULT_BUFFER_SIZE);
            output = new BufferedOutputStream(_response.getOutputStream(), DEFAULT_BUFFER_SIZE);

            // Write file contents to response.
            byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
            int length;
            while ((length = input.read(buffer)) > 0)
            {
                output.write(buffer, 0, length);
            }
        }
        finally
        {
            // Gently close streams.
            close(output);
            close(input);
        }

    }

    /**
     *
     * @param resource
     */
    private static void close(Closeable resource)
    {
        if (resource != null)
        {
            try
            {
                resource.close();
            }
            catch (IOException e)
            {
                // Do your thing with the exception. Print it, log it or mail
                // it.
                //e.printStackTrace();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:40:59.260

您的 servlet 中存在严重的并发问题。servlet 的单个实例用于为该 servlet 的所有请求提供服务。所以一个servlet应该是无状态的。但你要做的第一件事是

```
this._request = request;
this._response = response; 
```

这意味着如果对 servlet 发出两个并发请求，您可能让第一个请求设置这两个实例变量，然后第二个请求重置相同的实例变量。因此，第一个图像将作为对第二个请求的响应发送，并且不会发送任何内容作为对第一个请求的响应。这只是可能发生的奇怪事情之一。您还可能有异常和不一致的数据。

不要将请求和响应（以及任何其他状态）存储在实例变量中。将它们从一个方法传递到另一个方法。我没有分析整个代码，但你应该在 servlet 中拥有的唯一实例字段是 sessionFactory 字段。

# windows - powershell windows form browes 对话

> ID：14549750
> 
> 赞同：2
> 
> 时间：2013-01-27T16:59:28.580
> 
> 标签：windows, forms, powershell

我试图创建一个窗口窗体，单击时有一个按钮将显示一个文件夹/文件浏览窗口，然后用户选择文件/文件夹并单击确定，然后我可以将所选路径用作另一个脚本的字符串。

问题是，当我通过 PowerGUI（powershell 脚本应用程序）运行它时，它工作正常，但是当我通过 windows powershell 运行它时，它在加载浏览对话框时挂起，任何人都见过这个，或者看到我做错了什么或得到了替代方案，任何帮助将不胜感激。

```
cls
$button = $browse = $form = 0
[void][reflection.assembly]::LoadWithPartialName("System.Windows.Forms")
$browse = new-object system.windows.Forms.FolderBrowserDialog
$browse.RootFolder = [System.Environment+SpecialFolder]'MyComputer'
$browse.ShowNewFolderButton = $false
$browse.selectedPath = "C:\"
$browse.Description = "Choose a directory"

$button1 = New-Object system.Windows.Forms.Button
$button1.Text = "Choose Directory"
$button1.Add_Click({$browse.ShowDialog()})
$button1.left = 20
$button1.top = 20

$form = New-Object system.windows.forms.Form
$form.controls.add($button1)
$form.ShowDialog()
$form.Dispose()

$browse.SelectedPath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:10:58.483

当我尝试时，您的代码有效。但是我注意到有时（尤其是会话中的第二次）我使用浏览窗口，它隐藏在 PowerShell 控制台后面，看起来好像卡住了。那么，当它“挂起”时，你可以尝试将你的 powershell 控制台移到一边吗？

另外，作为一个建议：如果您只使用表单来选择文件夹位置，我会跳过它。无论如何，在您关闭表单之前，您都不会收到浏览器值，因此请尝试以下操作：

```
function Get-BrowseLocation
{
    [Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms") | Out-Null
    [System.Windows.Forms.Application]::EnableVisualStyles()
    $browse = New-Object System.Windows.Forms.FolderBrowserDialog
    $browse.RootFolder = [System.Environment+SpecialFolder]'MyComputer'
    $browse.ShowNewFolderButton = $false
    $browse.Description = "Choose a directory"

    $loop = $true
    while($loop)
    {
        if ($browse.ShowDialog() -eq "OK")
        {
            $loop = $false
        } else
        {
            $res = [System.Windows.Forms.MessageBox]::Show("You clicked Cancel. Try again or exit script?", "Choose a directory", [System.Windows.Forms.MessageBoxButtons]::RetryCancel)
            if($res -eq "Cancel")
            {
                #End script
                return
            }
        }
    }
    $browse.SelectedPath
    $browse.Dispose()
}

PS > Get-BrowseLocation
D:\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T20:22:15.717

通过 PowerShellPlus（另一个 powershell 编辑器）运行我的脚本时，我遇到了类似的问题。幸运的是，我发现[这篇文章](http://forums.anandtech.com/showthread.php?t=2314443)展示了如何在不使用 FolderBrowserDialog 的情况下提示输入文件夹。这是[我在编写的一组 powershell 函数](http://blog.danskingdom.com/powershell-multi-line-input-box-dialog-open-file-dialog-folder-browser-dialog-input-box-and-message-box/)中使用的代码，用于通过 GUI 提示用户进行多种不同类型的输入。

```
# Show an Open Folder Dialog and return the directory selected by the user.
function Read-FolderBrowserDialog([string]$Message, [string]$InitialDirectory)
{
    $app = New-Object -ComObject Shell.Application
    $folder = $app.BrowseForFolder(0, $Message, 0, $InitialDirectory)
    if ($folder) { return $folder.Self.Path } else { return '' }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-27T06:11:07.493

如果您对Frode提供的功能进行以下更改。F，对话框总是会出现在顶部。

```
$topform = New-Object System.Windows.Forms.Form
$topform.Topmost = $true
$topform.MinimizeBox = $true

$loop = $true
while($loop)
{
    if ($browse.ShowDialog($topform) -eq "OK") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T17:38:34.923

我认为您遇到了我遇到的问题，该问题已在[此问题中解决](https://stackoverflow.com/questions/216710/call-openfiledialog-from-powershell/216769#216769)

答案建议设置`.ShowHelp`为`$true`，如下所示：

```
$openFileDialog = New-Object System.Windows.Forms.openFileDialog
$openFileDialog.ShowHelp = $true
$openFileDialog.ShowDialog() | Out-Null 
```

# oracle - 为什么普通的 oracle 表支持 DML 语句，而外部表不支持？

> ID：14549753
> 
> 赞同：1
> 
> 时间：2013-01-27T16:59:51.357
> 
> 标签：oracle, oracle11g, external-tables

我们知道**Oracle 常规表**支持所有*DML*语句，但**外部表**不支持所有 DML 语句？我在下面试过：

 ****```
SQL> INSERT INTO  xtern_empl_rpt VALUES ('70','Rakshit','Nantu','4587966214','na
tu.rakshit@ge.com','55');
INSERT INTO  xtern_empl_rpt VALUES ('70','Rakshit','Nantu','4587966214','natu.ra
kshit@ge.com','55')
             *
ERROR at line 1:
ORA-30657: operation not supported on external organized table

SQL> update xtern_empl_rpt set FIRST_NAME='Arup' where SSN='896743856';
update xtern_empl_rpt set FIRST_NAME='Arup' where SSN='896743856'
       *
ERROR at line 1:
ORA-30657: operation not supported on external organized table

SQL> 
```

所以看起来**外部表**不支持这个。但我的问题是——这种设计背后的逻辑原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:50:21.897

Oracle 中没有用于锁定外部表中的行的机制，也没有我们通过常规堆表获得的并发控制。所以不允许更新。

使用 Oracle Loader 驱动程序创建的外部表是只读的；Datapump 驱动程序允许我们写入外部表文件，但只能在 CTAS 模式下。

问题是永恒表基本上是操作系统文件上的窗口，没有内部表提供的抽象层和控制。基本上，数据库无法锁定 OS 文件中的记录，因为“记录”的概念是数据库，而不是 OS 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:16:29.537

外部表只为一件事而设计：数据加载和卸载。它们根本不适合与普通 DML 一起使用，它们也不是真正用于 normal `select`s - 这很有效，但是如果您需要在外部表上进行大量选择，那么您“做错了” ：将数据加载到适当的表中，计算统计数据并根据需要添加索引。

让外部表表现得像普通表一样需要为它们实现所有事务机制，这非常复杂，而且不值得，因为这不是它们的目的。

如果您需要普通表并希望将它们从一个 Oracle 数据库移植到另一个数据库，那么您也应该评估是否使用可[传输表空间](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tspaces013.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T16:02:25.227

外部表的限制是它们只读的一个明显结果；它们是参与 SQL 查询的适配器，可以是任意的记录组织文件（ORACLE_LOADER 类型）或另一个数据库中表的导出副本（ORACLE_DATAPUMP 类型）。

如前所述，外部表只适用于全表扫描查询；如果需要在繁重的查询中使用索引或修改从文件中导入的外部数据集，可以使用 SQL Loader 工具填充常规表。****

# java - JSF CompositeComponent：实现选择

> ID：14549756
> 
> 赞同：1
> 
> 时间：2013-01-27T16:59:59.547
> 
> 标签：java, jsf-2, composite-component

您好，我想实现一个 CC 类似的实现*选择*属性。这类似于 Primefaces 的[即时行选择](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionInstant.jsf) `<p:dataTable selection="#{bean.user}" .../>`。

这是复合材料中的相关定义：

```
<composite:interface componentType="my.CcSelection">
  <composite:attribute name="actionListener" required="true"
          method-signature="void listener(javax.faces.event.AjaxBehaviorEvent)"/>
  <composite:attribute name="selection"/>
</composite:interface>

<composite:implementation>
  ...
  <ui:repeat var="item" value="#{cc.attrs.data}">
    <p:commandLink actionListener="#{cc.actionListener(item)}"/>
  </ui:repeat>
  ...
</composite:implementation> 
```

`actionListener`支持 bean 中的 - 方法如下：

```
public void actionListener(MyObject object)
{
  logger.info("ActionListener "+object); //Always the correct object
  FacesContext context = FacesContext.getCurrentInstance();

  Iterator<String> it = this.getAttributes().keySet().iterator();
  while(it.hasNext()) {   //Only for debugging ...
    logger.debug(it.next());
  }

  // I want the set the value here
  ValueExpression veSelection = (ValueExpression)getAttributes().get("selection");
  veSelection.setValue(context.getELContext(), object);

  // And then call a method in a `@ManagedBean` (this works fine)  
  MethodExpression al = (MethodExpression) getAttributes().get("actionListener");
  al.invoke(context.getELContext(), new Object[] {});
} 
```

如果我使用带有值表达式的 CC 进行*选择*（例如`selection="#{testBean.user}"`，`veSelection`是`null`（并且在调试迭代中未打印*选择*）并且我得到 NPE。如果我传递一个字符串（例如`selection="test"`，属性*选择*在调试中可用-迭代，但（当然）我得到一个`ClassCastException`：

```
java.lang.String cannot be cast to javax.el.ValueExpression 
```

如何为我的组件提供*actionListener*和*selection*属性，并在第一步中设置选定的值，然后调用*actionListener*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:55:51.840

至于调试迭代，您不会在 keyset 或 entryset 中看到值表达式`UIComponent#getAttributes()`。这也在[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)中明确提到。换句话说，该映射仅包含具有静态值的条目。只有当你`get()`在地图上显式调用，并且底层属性是一个值表达式时，它才会真正调用它并返回评估值。

为了获得值表达式，请[`UIComponent#getValueExpression()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getValueExpression%28java.lang.String%29)改用。

```
ValueExpression selection = getValueExpression("selection"); 
```

至于方法表达式，好吧，如果您的复合从 扩展，那是最简单的`UICommand`，但在您的特定情况下，这很笨拙。只需将侦听器方法的目标设置为命令链接并用于`<f:setPropertyActionListener>`在 bean 中设置所需的属性。这样就不需要支持组件了。

```
<composite:interface>
  <composite:attribute name="actionListener" required="true" targets="link"
          method-signature="void listener(javax.faces.event.AjaxBehaviorEvent)"/>
  <composite:attribute name="selection"/>
</composite:interface>

<composite:implementation>
  ...
  <ui:repeat var="item" value="#{cc.attrs.data}">
    <p:commandLink id="link">
      <f:setPropertyActionListener target="#{cc.attrs.selection}" value="#{item}" />
    </p:commandLink>
  </ui:repeat>
  ...
</composite:implementation> 
```

# c - 在c中创建一个pwd类型函数

> ID：14549762
> 
> 赞同：0
> 
> 时间：2013-01-27T17:00:40.183
> 
> 标签：c, linux

我在这里拉头发。自从我完成任何 c 编程以来已经有 1.5 年了，所以请耐心等待。

我需要在 c 中创建一个函数来完成 pwd 函数在 linux 中的作用。我有一个代表文件夹的节点结构。每个人都有一个指向其父级的指针，所以它应该很容易，但我要死在这里。我想我可以继续使用 strcat 将节点父节点的名称附加到路径名称。但是，即使我能够让它工作，我也会留下一个相反的列表，我想这很好。我至少可以应付。但是，如果我在目录 c 中，其父级为 b，其父级为 a，其父级为 root，我应该能够使用 pwd 输出字符串“/a/b/c”。我被困住了。有任何想法吗？当我尝试使用 strcat 时，我得到了 ying yang 的分段错误。

```
void pwd( ){  

    char *thePath;
    NODE *nodePtr;
    nodePtr = cwd;

    while( nodePtr != root ){

    }
    printf("%s\n", thePath);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:08:06.803

如果您只想打印出路径，那么递归应该很容易。

```
void pwd_recurse (NODE *nodePtr)
{
    if (nodePtr == root)
    {
         return;
    }
    pwd_recurse(nodePtr->parent);
    printf("/%s",nodePtr->name);
}

void pwd()
{
    ///however you get the nodePtr;
    pwd_recurse(nodePtr);
    printf("\n");
} 
```

This nicely sidesteps having to deal with memory allocations (though it does mean if you have a degenerate filesystem with loops (insert obligatory XKCD cartoon here), you'll have a stackoverflow, which is arguable better than an infinite loop.)

# c# - 如何获取我的项目路径？

> ID：14549766
> 
> 赞同：65
> 
> 时间：2013-01-27T17:01:10.823
> 
> 标签：c#, forms, path

> **可能重复：**
> [使用 c# 获取我的 .exe 的路径](https://stackoverflow.com/questions/3991933/get-path-for-my-exe-using-c-sharp)

你好我有一个问题：我怎样才能得到我的根项目路径？我的意思是解决方案所在的项目中的第一个文件夹。我找到了那个命令：

```
System.IO.Directory.GetCurrentDirectory(); 
```

但是，它为我提供了发布文件夹的特定路径：wanted_Path/bin/Release

那么还有其他代码，我应该手动剪切还是将文件放入Release文件夹中？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-27T17:10:35.110

这为您提供了根文件夹：

[`System.AppDomain.CurrentDomain.BaseDirectory`](https://msdn.microsoft.com/en-us/library/system.appdomain.basedirectory.aspx)

您可以使用 .. 或 ./ 等从此处导航，附加 .. 会将您带到可以找到 .sln 文件的文件夹

对于 .NET 框架（感谢***Adiono***评论）

```
Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.BaseDirectory,"..\\..\\")) 
```

对于 .NET 核心，这是一种方法（感谢***nopara73***评论）

```
Path.GetFullPath(Path.Combine(AppContext.BaseDirectory, "..\\..\\..\\")) ; 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-27T17:04:37.353

您可以使用

```
string wanted_path = Path.GetDirectoryName(Path.GetDirectoryName(System.IO.Directory.GetCurrentDirectory())); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-27T17:09:05.017

```
var requiredPath = Path.GetDirectoryName(Path.GetDirectoryName(
System.IO.Path.GetDirectoryName( 
      System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase ))); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-27T17:11:22.440

您的程序不知道您的 VS 项目在哪里，因此请参阅[获取我的 .exe](https://stackoverflow.com/questions/3991933/get-path-for-my-exe-using-c-sharp)的路径并`../..`获取您的项目的路径。

# objective-c - 为斯坦福 CS193P 的 CalculatorBrain 实现退格

> ID：14549767
> 
> 赞同：0
> 
> 时间：2013-01-27T17:01:13.017
> 
> 标签：objective-c, ios6

我正在寻找为计算器项目实现退格功能。

我可以在视图控制器中添加一个带有以下代码的操作来处理它，但它不应该真的放在 CalcModel 中。

```
[self secureSetDisplayText:([self.display.text substringToIndex:([self.display.text length]-1)])]; 
```

因此，如果要在不同的项目中重用 CalcModel，则已经实现了退格！

有什么想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:19:49.087

不，它应该在 ViewController 中。然后模型必须将更改传达给 ViewController，而不是 Controller 将信息传递给模型。此外，模态仅知道从 ViewController 传递给它的内容，因此 Controller 可以决定不向它传递数字。（按 45，删除 5 按回车。模式不知道 5 曾经存在，因为在激活控件（在控制器中）之前，数字从未超过视图）。

# java - selenium webdriver模态对话框java

> ID：14549770
> 
> 赞同：2
> 
> 时间：2013-01-27T17:01:21.997
> 
> 标签：java, javascript, selenium, webdriver, alert

我正在测试我的表单，当我没有输入需要的数据时，我会在我的网络应用程序中收到 javascript 警报，告诉用户输入丢失的数据。我无法用 selenium 处理这个问题，因为当我部分填写表格并尝试提交时，我得到了异常

```
org.openqa.selenium.UnhandledAlertException: Modal dialog present 
```

如果我捕获异常，则不会显示 webdriver 中的警报。这是解决此问题的任何解决方案吗？我希望能够提交表单并收到警报。我正在使用带有 java 的 Linux Mint、Firefox 18 和 selenium 2.28.0 最好的问候更新我的代码中有以下内容

```
somePage.fillName(sth); //only 1 of 2 required field are filled
somgePage.submit(); //here js alert is shown right after clicking submit
somePage.getCurrentAlert();
//here are code parts
public Alert getCurrentAlert(){
    return driver.switchTo().alert();
}
public AdminHome submit(){
        saveUrl();
        WebElement submit = driver.findElement(By.id("add_quiz_submit_button"));
        try{
            submit.click();
            if(urlChanged()){
                return new AdminHome(driver);
            }
        }
        catch(Exception e){
            e.printStackTrace();// exception 1
            return null;
        }
        return null;
    }
//Exception 1
org.openqa.selenium.UnhandledAlertException: Modal dialog present
//The test fails because of:
org.openqa.selenium.NoAlertPresentException: No alert is present (WARNING: The server did not provide any stacktrace information) 
```

但是，如果我按预期单击手动提交测试工作。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:49:40.207

you should handle the alert as soon as the action is done and there shouldn't be any other action before handling the alert.

for instance your code should be

```
 try{
        submit.click();
        if (alertPresent())
            getCurrentAlert();
        if(urlChanged()){
            return new AdminHome(driver);
        }
    } 
```

This will check alert and then accept the alert. The interaction of webdriver is more similar to the action we interact with manually with browser. So when the click on submit is done we will be able to see alert and no actions can be done until accept or reject it.

Vishal

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:14:11.263

这是因为当抛出 UnhandledAlertException 时，驱动程序本身会接受警报。如果您填写了部分表格，如何提交？

如果可能的话，只需捕获该异常，然后在 catch 块中写入单击提交按钮的行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T08:03:22.870

使用 Robot 类（按回车键）关闭模态对话框

```
 try {
        (new Robot()).keyPress(java.awt.event.KeyEvent.VK_ENTER);

         (new Robot()).keyRelease(java.awt.event.KeyEvent.VK_ENTER);
         } catch (AWTException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# ruby-on-rails - has_many 通过 :class_name

> ID：14549771
> 
> 赞同：1
> 
> 时间：2013-01-27T17:01:35.643
> 
> 标签：ruby-on-rails, has-many-through, relationships

我有以下内容：

```
belongs_to :type, :class_name => :activity_type
belongs_to :activity_type # needed for has_one :through?
has_one :category, :through => :activity_type, :class_name => :activity_category 
```

有没有办法使用“type”而不是“activity_type”来实现这种“has_one through”关系？

**编辑：这不起作用，由于魔术词“类型”，我没有看到。**

我现在拥有的是这样的：

```
 belongs_to :company
  belongs_to :type, :class_name => 'ActivityType', :foreign_key => 'activity_type_id'
  has_one :category, :through => :type, :class_name => 'ActivityCategory', :foreign_key => 'activity_category_id' 
```

但它失败了

```
 no such column: activity_types.category_id 
```

这是正确的，因为预期的列将是“activity_types.activity_category_id”。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:27:28.273

您以错误的方式使用关联。首先当你使用`through:`then时`class_name`，`foreign_key` [会被省略](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_one)。所以这就是它期待的原因`category_id`。另外我认为你不应该通过重写默认选项来超载你的关联，因为当模型上有很多关联时，它开始看起来像一团糟并且难以理解。因此，您可能应该将其编写为`belongs_to :activity_type`并添加最适合您的名称`alias_method :type, :activity_type`。

简而言之，这就是我向您提出的建议：

```
belongs_to :company
belongs_to :activity_type
has_one :activity_category, :through => :activity_type

alias_method :type, :activity_type
alias_method :category, :activity_category 
```

# javascript - 为什么星号金字塔JSPerf测试的测试用例2需要这么长时间？

> ID：14549776
> 
> 赞同：0
> 
> 时间：2013-01-27T17:01:57.277
> 
> 标签：javascript, performance

```
var elemText = document.getElementById("insert");
for (var k = 1; k <= 4; k++) {
  for (var j = 1; j <= k; j++) {
    elemText.innerHTML += ('*');
  };
  elemText.innerHTML += ('<br>');
}; 
```

拆除：

`document.getElementById("insert").innerHTML = "";`

是否存在编码错误？只是效率极低（我认为这不太可能是唯一的原因）？这与测试的设置方式有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:05:47.927

> 是否存在编码错误？

是的。您忘记重新初始化`<div>`测试#2。您需要清空它，就像您`result = []`在测试 #1 中设置的那样。在拆解中这样做是不够的，测试 #2 在清除之前会生成比测试 #1 更长的文本。

此外，您的测试用例的结果也不相同。由于您还想`<br />`在测试#1 中输出元素，因此您也需要在`innerHTML`那里使用。您当前的代码`<br>`确实以文本形式输出。

[改进的测试设置](http://jsperf.com/asterisk-pyramid/3)

> 是不是非常低效？

是的。使用`innerHTML`效率低下 - 每次分配给它时都需要 HTML 解析器，而且您经常这样做。此外，由于您正在使用`+=`它，因此每次都需要序列化 ​​DOM。

# javascript - 这里的逻辑有什么问题？

> ID：14549777
> 
> 赞同：0
> 
> 时间：2013-01-27T17:01:57.247
> 
> 标签：javascript, google-maps, google-maps-api-3

我目前正在使用 Google Maps V3 API，并且正在为标记设置动画以行驶预定路线。路线信息存储在两个单独`lat`的数组中，分别用于纬度坐标和`lon`经度坐标。**在尝试构建按钮以暂停和恢复标记的移动时，我遇到了逻辑问题。**这是代码：

```
 var paused = 0; //paused state
  var interval = 1000; //interval for animation (ms)
  function clickPause() {
      paused = 1;
  }
  function clickPlay() {
      paused = 0;
  }
  function moveToStep(yourmarker,yourroute,c) {
      var LatLon;
      var time;
      var hours;
      var minutes;
      var seconds;
      var finalTime;
      var stopTime;
      if (yourroute.length > c) {
          LatLon = new google.maps.LatLng(lat[c],lon[c]);
          yourmarker.setPosition(LatLon);
          document.getElementById("currlat").innerHTML = lat[c];
          document.getElementById("currlon").innerHTML = lon[c];
          document.getElementById("currtime").innerHTML = c+1;
          hours = 7+Math.floor((c+1)/3600);
          minutes = Math.floor((c+1)/60);
          seconds = (c+1)-minutes*60;
          if(minutes == 60) {
              minutes = 0;
          }
          finalTime = str_pad_left(hours,'0',2)+':'+str_pad_left(minutes,'0',2)+':'+str_pad_left(seconds,'0',2);
          document.getElementById("finaltime").innerHTML = finalTime;
          if(paused == 1) {
              stopTime = c+1;
              window.setInterval(function(){
                  if(paused == 0) {
                      moveToStep(yourmarker,yourroute,stopTime);
                  }
              },interval);
          }
          else {
              window.setTimeout(function(){
                  moveToStep(yourmarker,yourroute,c+1);
              },interval);
          }
      }
  }
  function str_pad_left(string,pad,length) {
      return (new Array(length+1).join(pad)+string).slice(-length); 
  }
  function jumpTo(value) {
      alert(value);
      moveToStep(marker,lat,100);
  }
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(31.26,121.45),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    var marker = new google.maps.Marker({map: map,});
    var newLatLng = new google.maps.LatLng(lat[0],lon[0]);
    marker.setPosition(newLatLng);
    moveToStep(marker,lat,0);
  } 
```

现在，我有两个按钮，一个调用`clickPause()`函数，一个调用`clickPlay()`函数。暂停工作正常，但是当我尝试恢复时，标记表现出一些非常奇怪的行为。

**本质上，似乎标记正在跳回上次暂停的位置，然后再次快速向前跳跃，并且每次标记位置更新时都执行此操作（每 1000 毫秒一次，或每秒一次，由`interval`变量。）**

有没有人见过这种行为？我不明白我在这些方面的逻辑有什么问题，我敢肯定这是罪魁祸首：

```
 if(paused == 1) {
              stopTime = c+1;
              window.setInterval(function(){
                  if(paused == 0) {
                      moveToStep(yourmarker,yourroute,stopTime);
                  }
              },interval);
          }
          else {
              window.setTimeout(function(){
                  moveToStep(yourmarker,yourroute,c+1);
              },interval);
          } 
```

我所做的只是检查模拟是否暂停，如果是，请检查它是否已取消暂停，一旦暂停，恢复标记的移动。按下恢复按钮后，代码应直接转到

```
 window.setTimeout(function(){
                  moveToStep(yourmarker,yourroute,c+1);
              },interval); 
```

因为 的值`paused`已经返回到`1`。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:05:09.850

您需要清除间隔以便在恢复后停止触发。这意味着您需要存储由返回的标识符`setInterval`并在需要时将其传递给`clearInterval`。

```
var pauseInterval; // interval identifier (outside the moveToStep function)

if (paused == 1) {
    stopTime = c+1;
    pauseInterval = setInterval(function() {
        if(paused == 0) {
            moveToStep(yourmarker, yourroute, stopTime);
        }
    }, interval);
} else {
    clearInterval(pauseInterval);
    setTimeout(function() {
        moveToStep(yourmarker, yourroute, c+1);
    }, interval);
} 
```

# php - FuelPHP炼油迁移不起作用

> ID：14549779
> 
> 赞同：1
> 
> 时间：2013-01-27T17:02:05.517
> 
> 标签：php, ubuntu-10.04, fuelphp

我被困在一个新网站的开头。这是我第一次尝试使用石油进行发电/迁移。

我使用石油成功创建了一个模型，现在我想迁移它，但是

```
php oil refine migrate 
```

给我一个错误：

```
Error - invalid data source name in COREPATH/classes/database/pdo/connection.php on line 94 
```

通过一些研究，我发现，至少我并不完全孤单地遇到这个错误，尽管到目前为止我看到的讨论都没有得到解决。

我的数据库配置一切都很好，关于一些提示，我什至用 apache 正在使用的那个覆盖了 php-cli 的 php.ini。

但一点运气都没有。

有大佬知道解决办法吗 任何帮助表示赞赏！

编辑：即使没有油，我也想继续开发，但现在发现我什至无法从 php.ini 运行迁移。这是相同的错误消息，根本没有帮助。拜托各位，任何人都只需要知道一个解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:45:37.343

您是否在文件中设置了数据库连接：fuel/app/config/development/db.php？并且格式正确：

```
return array(
    'default' => array(
        'connection' => array(
            'dsn' => 'mysql:host=localhost;dbname=fuel_intro',
            'username' => 'root',
            'password' => '',
        ),
    ),
); 
```

通过错误听起来您的配置中可能有错误的语法。我希望这会有所帮助，如果没有，请发布您的数据库配置文件源。

# c# - 使用 GraphicsPath 在地图图像上绘制道路

> ID：14549782
> 
> 赞同：1
> 
> 时间：2013-01-27T17:02:27.050
> 
> 标签：c#, .net, map, overlay, graphicspath

我有一个应用程序（WinForms C#），它允许用户绘制一条线（自由绘制）以突出显示从谷歌地图获取的位图上感兴趣的道路。

我正在使用 Mouse Down/Move/Up 事件将点添加到 GraphicsPath 对象。这适用于仅由两点表示的直线路段。但是当鼠标画轮长时间按住按钮时，会产生大量的点数据。

这不仅效率低下，而且绘制曲线的方式也很笨拙（特别是当缩放级别太低时）。

问题：

*   路径完成后，我如何以编程方式减少点数而不损失准确性。
*   有没有更好的方法来使用某种形式的几何构造来捕获点信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T19:01:37.350

减少多边形曲线中点数的常用方法是[Ramer-Douglas-Peucker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)。它非常适合减少地图绘制中的点数，例如路线。

# android - 在 v3 中处理应用内结算退款

> ID：14549786
> 
> 赞同：19
> 
> 时间：2013-01-27T17:03:07.530
> 
> 标签：android, in-app-billing

我正在尝试在我的应用程序中实施应用内计费，我的购买部分工作正常，但我如何处理退款？

在该`Testing In-App Billing`部分下，它说您必须注意，`IN_APP_NOTIFY`但是当您单击它时，它会将您带到`v2`必须注册广播接收器的 api。但是`v3`，它没有提供有关做什么的信息，或者是否`IN_APP_NOTIFY`仍然使用相同或受支持。

示例应用程序也不处理退款，所以我想如何处理退款`v3`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-28T02:03:46.587

您应该以与 v2 相同的方式处理它们：当用户要求退款时，通过 Checkout 控制台取消或退款订单。然后应用程序应在启动时检查购买状态等并做正确的事情（通常允许访问已退款的购买，而拒绝访问已取消的购买）。不幸的是，提供的示例不会打扰这样做，因此您必须自己添加它。更不幸的是，由于服务器端的本地缓存和/或错误，在您取消或退款后很长时间内，购买将保持在购买状态。通过 ATM，您无能为力。

假设您使用的是 Trivial Drive 示例，您可能希望在您的应用中添加如下内容：

```
Purchase purchase = inventory.getPurchase(product);
Log.d(TAG, "Purchase state: " + purchase.getPurchaseState());
// 0 (purchased), 1 (canceled), or 2 (refunded).
if (purchase.getPurchaseState() == 0
     || purchase.getPurchaseState() == 2) {
   showPremiumVersion();
} else {
   showFreeVersion();
} 
```

# relational-algebra - 不同表的自然连接

> ID：14549791
> 
> 赞同：1
> 
> 时间：2013-01-27T17:03:24.953
> 
> 标签：relational-algebra

您能否向我解释一下如何对这两个关系进行 NATURAL JOIN（一个有 5 行，另一个有 3 行？

第一个关系

```
A   C
3   3
6   4
2   3
3   5
7   1 
```

第二关系

```
B   C   D
5   1   6
1   5   8
4   3   9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:26:04.893

在您的问题中，您有两个独立的关系，它们有一个共同的属性（即列）：C。

自然连接将两个关系中的所有元组与该属性共同组合。你最终会得到结果：

```
A B C D    

7 5 1 6  
3 4 3 9
2 4 3 9
3 1 5 8 
```

这可以通过使用@Matthew 发布的代码在 SQL 中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:12:38.090

就像是：

`SELECT * FROM 1stRelation NATURAL JOIN 2ndReleation`

它将使用显式列名执行相同的操作和内部连接。IE：

`SELECT * from 1stRelation as x INNER JOIN 2ndRelation as z ON x.C=z.C`

就个人而言 - 我不喜欢使用它们，除非我事先不知道表结构但知道它们应该能够加入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:26:02.257

基本上你做一个交叉连接，即你将第一个关系的每一行与第二个关系的每一行结合起来。然后你有两个 C 列。现在消除两个 C*不相等*的每一行，并将它们合并为一列 C。

# php - PHP登录/注销系统无法正常工作

> ID：14549794
> 
> 赞同：1
> 
> 时间：2013-01-27T17:03:36.407
> 
> 标签：php, login, error-handling, system, logout

我的登录系统/注销系统有问题。

所以问题是我无法登录。当我输入正确的用户名和密码时，我会被重定向到 index.php，而这实际上只会在我注销后才会发生。我认为错误是在 login_success.php 中的`if (!isset($_SESSION['mittbrukarnamn']))`行，(mittbrukarnamn = myusername)，这将导致上述问题，但是当我删除`!`所以`isset`不再是假的时，我可以登录但 logout.php 没有“工作”。

`if ($_POST['mittbrukarnamn'] && $_POST['mittpassord'])`当我在 IE 9 中输入错误的用户名或密码，或者没有输入任何用户名或密码时，我还会在第 19 行收到一个错误。但是在谷歌浏览器中我没有得到那个错误。有人能告诉我这是否是一个安全的系统吗？稍后我将添加一个代码行，使密码转换为 MD5 和一个管理员用户页面。

这是check.php

```
 <title>Login side</title>

<?php
session_start();

// 'vert' er det same som 'host' på engelsk (ikkje så viktig).
    $vert = "localhost";
    $brukarnamn = "root";
    $passord = "";
    $db_namn = "login";
    $tbl_namn = "members";

// Tilkobling til MySQL databasen.
    mysql_connect("$vert", "$brukarnamn", "$passord") or die ("Kan dessverre ikkje koble til databasen.");
    mysql_select_db("$db_namn") or die ("Kan ikkje finna den ynkjande tabellen 'namn'.");
?>

<?php
    if ($_POST['mittbrukarnamn'] && $_POST['mittpassord']) {

      $mittbrukarnamn = $_POST['mittbrukarnamn'];
      $mittpassord = $_POST['mittpassord'];

      $sql = "SELECT * FROM $tbl_namn WHERE `brukarnamn` = '$mittbrukarnamn' AND `passord` = '$mittpassord'";
// '$res' forkorting for 'resultat'.
      $res = mysql_query($sql);

// '$tell' er skreve på norsk, og er det same som 'count' på engelsk (f.eks. og telja til 10). Slek ein ikkje     trur da er 'tell' på engelsk; (ikkje så viktig).
      $tell = mysql_num_rows($res);

      if ($tell == 1) {
        $_SESSION['mittbrukarnamn'];
        $_SESSION['mittpassord'];
        header ("location: login_success.php");
  } else {
        echo "Brukarnamnet eller passordet er feil.";
        header ("refresh: 2; index.php");
  }

  } else {
        echo "Vennligst tast inn eit brukarnamn og eit passord.";
        header ("refresh: 2; index.php");
  }
?> 
```

和 login_success.php

```
<title>Medlem side</title>

<?php
  session_start();
    if (!isset($_SESSION['mittbrukarnamn'])) {
        header("location: index.php");
}
?>

<html>
<body>
Du er innlogga.<br />
<a href="logout.php"> Logg ut</a>
</body>
</html> 
```

我希望我已经明确了问题所在。谢谢你的任何答案:)

其中一些文本是关于挪威语的。(mittbrukarnamn = 我的用户名) (mittpassord = 我的密码)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:06:09.787

```
<?php
  session_start();
?>

<title>Medlem side</title> 
```

不是

```
<title>Medlem side</title>

<?php
  session_start(); 
```

您必须在任何输出之前开始会话。

在登录站点中相同。

你没有得到任何错误？

第二。您的脚本不能抵抗 Mysql 注入攻击。使用 google 和 PHP Mysql 注入短语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:08:25.717

`php`在文件开头包含代码`login_success.php`。`session`变量应该是该文件中的第一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:08:33.260

考虑到您是 Register & Login 和 PHP 的新手，我建议您观看此内容。它必须消除你所有的疑惑！

[http://www.youtube.com/course?list=ECE134D877783367C7](http://www.youtube.com/course?list=ECE134D877783367C7)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T17:16:04.030

它对诺顿的回答的补充：将 session_start() 放在文件的最开头之后，

替换`$_SESSION['mittbrukarnamn'];`为`$_SESSION['mittbrukarnamn']='';`设置会话变量。你现在所做的并没有设置会话变量，它只是得到`$_SESSION['mittbrukarnamn']`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-03T16:10:42.420

> // 检查数据库以查看用户名和密码是否存在。

```
 $query = "SELECT id, username ";
        $query .= "FROM users ";
        $query .= "WHERE username = '{$username}' ";
        $query .= "AND password= '{$password}' ";
        $query .= "LIMIT 1";
        $result_set = mysql_query($query);
        confirm_query($result_set);
        if (mysql_num_rows($result_set) == 1) {
            // username/password authenticated
            // and only 1 match
            $found_user = mysql_fetch_array($result_set);
            $_SESSION['user_id'] = $found_user['id'];
            $_SESSION['username'] = $found_user['username'];

            redirect_to("whereever.php");
        } else {
            // username/password combo was not found in the database
            $message = "Username/password combination incorrect.<br />
                Please make sure your caps lock key is off and try again.";
        }
    } else {
        if (count($errors) == 1) {
            $message = "There was 1 error in the form.";
        } else {
            $message = "There were " . count($errors) . " errors in the form.";
        } 
```

# jquery - 可调整大小和可拖动的 div 在调整大小时跳转位置

> ID：14549797
> 
> 赞同：0
> 
> 时间：2013-01-27T17:03:46.733
> 
> 标签：jquery, jquery-ui

在撰写本文时，我正在使用最新的 jquery 和 jqueryui。我附上了一个jsfiddle来演示。如果您将 test2 块向下拖动几个槽，然后尝试调整第一个块的大小，则 test2 块会在位置上跳跃。

有想法该怎么解决这个吗？

```
Here's the link to the jsfiddle
http://jsfiddle.net/FjGwk/ 
```

# java - 带有 Selenium WebDriver 的 Browsermob IOException

> ID：14549808
> 
> 赞同：1
> 
> 时间：2013-01-27T17:04:48.803
> 
> 标签：java, selenium-webdriver

我很新使用 Browsermob。我有一个使用 Selenium WebDriver 的项目。由于某些页面有脚本问题，我想为我的 WebDriver 使用 Browsermob ProxyDriver，但我总是得到一个导致 Selenium 无法获取页面 HTML 的异常。

这是我对 WebDriver 和 Browsermob ProxyDriver 的声明：

```
ProxyServer proxy = new ProxyServer(9090);
proxy.start();

final Proxy proxy = proxy.seleniumProxy();

final DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(CapabilityType.PROXY, proxy);

final FirefoxProfile profile = getFirefoxProfile();

this.proxy.setRequestTimeout(10000);
this.driver = new FirefoxDriver(new FirefoxBinary(), profile, capabilities); 
```

这是唯一值得注意的控制台输出：

```
WARN 01/27 16:49:09 o.b.p.BrowserMobPro~ - IOException while trying to report an HTTP
INFO 01/27 16:49:09 o.b.p.h.BrowserMobH~ - EOFException(java.net.SocketException: Software caused connection abort: socket write error) when requesting [...]
WARN 01/27 16:49:10 o.b.p.BrowserMobPro~ - IOException while trying to report an HTTP error
INFO 01/27 16:49:10 o.b.p.h.BrowserMobH~ - EOFException(java.net.SocketException: Software caused connection abort: socket write error) when requesting [...] 
```

有人知道这个问题吗？

**编辑：**无论我尝试打开哪个网页，都会引发错误。

# javascript - Jquery height() 使用 imagesloaded 设置

> ID：14549812
> 
> 赞同：0
> 
> 时间：2013-01-27T17:05:34.047
> 
> 标签：javascript, jquery

我正在尝试在动态生成高度的滑块下方设置菜单的位置，所以我使用[imagesloaded](https://github.com/desandro/imagesloaded)最后加载我的 jquery 并且在每个浏览器中一切都很好，除了 safari 检索滑块集的高度在后端而不是根据页面大小动态生成的图像的高度。这仅在 safari 中发生......这是定位菜单的 javascript：

```
$.browser.safari = ($.browser.webkit && !(/chrome/.test(navigator.userAgent.toLowerCase())));
if ($.browser.safari) {
    $(window).load(function () {
        var $container = $('.ls-wp-fullwidth-container');
        $container.imagesLoaded(function () {
            var height = $(".ls-wp-fullwidth-container").height() - 50;
            $(".menu_wrap").css('top', height);
        });
    });
} else {
    $(window).load(function () {
        var $container = $('.ls-wp-fullwidth-container');
        $container.imagesLoaded(function () {
            var height = $(".ls-wp-fullwidth-helper").height();
            $(".menu_wrap").css('top', height);
        });
    });
}
$(window).resize(function () {
    var height = $(".ls-wp-fullwidth-container").height() + 40;
    $(".menu_wrap").css('top', height);
}); 
```

正在使用的滑块是任何滑块，我正在使用名为 cleanspace 的主题森林主题并运行 wordpress 3.5.1。我尝试使用`$(window).bind("load",function(){`最后加载 jquery 并`$.browser.safari = ($.browser.webkit && !(/chrome/.test(navigator.userAgent.toLowerCase()))); if ($.browser.safari) {` 检测在 pc 上运行良好但在 mac 上失败的浏览器，所以我留下了粘贴在这里的第一个代码，等待任何关于诱饵呼吸的帮助。注意：如果 safari 会在滑块图像之后加载我的 jQuery，则不需要此处的 if 语句...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:12:55.047

我找到了一个解决方法，我猜它不是最好的答案，很高兴听到更好的建议，基本上我已经在函数上放置了一个计时器来加载，如下所示：

```
if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome')     == -1) {
      $(window).load(function() {
           setTimeout(function(){
             var $container = $('.ls-wp-fullwidth-helper');
               $container.imagesLoaded( function() {
                  var height = $(".ls-wp-fullwidth-helper").height() ;
                  $(".menu_wrap").css('top', height);
               });
           }, 2000);
        });
       }
else {
      $(window).load(function() {
       var $container = $('.ls-wp-fullwidth-helper');
       $container.imagesLoaded( function() {
         var height = $(".ls-wp-fullwidth-helper").height();
         $(".menu_wrap").css('top', height);
       });
      });
     }
 $(window).resize(function(){
   var height = $(".ls-wp-fullwidth-helper").height() + 40;
   $(".menu_wrap").css('top', height);
 }); 
```

# java - 使用反射获取私有非原始字段的值

> ID：14549821
> 
> 赞同：0
> 
> 时间：2013-01-27T17:06:22.440
> 
> 标签：java, reflection

假设我们有两个不同的包......一个包无法访问，但我们想知道一个名为 b 的复杂字段的值。

```
public class A {
    private String  whatever;
    private B       b;

    private static class B {
         final ArrayList<Z> c   = new ArrayList<Z>();

         private void addItem(Z z) {
                this.c.add(z);
         }

         private Z getItem(int nr) {
                return this.c.get(nr);
          }
     }
}

public class Reflect extends A {
      public static void main(String[] args) throws NoSuchFieldException, SecurityException {
            Reflect ref = new Reflect();
            Class getA = ref.getClass().getSuperclass();
            Field getB = getDeclaredField("b");
            getB.setAccessible(true);
            Class bInst = getB.getClass();
            Method bMeth = bInst.getMethod("getItem", Integer.TYPE);
            Object zInst = bMeth.invoke(new Integer(123));
      }
} 
```

如果我没有从包中获得复杂类型 B，我如何获得价值？仍然得到**java.lang.NoSuchMethodException: stackOver.A.getItem(int)**即使我设置了字段 gstB 可访问....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:08:27.773

> 如果我没有从包中获得复杂类型 B，我如何获得价值？

您可以将其获取为`Object`，然后使用反射进一步发现它公开的方法。

```
Object bInst = ... // Get b through reflection
Class bClass = bInst.getClass();
Method[] bMeth = bClass.getMethod("getItem", Integer.TYPE);
Object zInst = bMeth.invoke(new Integer(123)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:34:33.240

您唯一缺少的是 getField 只为您提供公共可访问字段。

```
 Field getB = getA.getDeclaredField("b"); 
```

会给你该类的任何领域。

* * *

一个更长的例子

```
class Main {
    public static class A {
        private String whatever;
        private B b = new B();

        private static class B {
            final ArrayList<String> c = new ArrayList<String>();

            private void addItem(String z) {
                this.c.add(z);
            }

            private String getItem(int nr) {
                return this.c.get(nr);
            }
        }
    }

    public static class Reflect extends A {
        public static void main(String... ignored) throws Exception {
            Reflect ref = new Reflect();
            Class getA = ref.getClass().getSuperclass();
            Field getB = getA.getDeclaredField("b");
            getB.setAccessible(true);
            Object b = getB.get(ref);

            Method addItem = b.getClass().getDeclaredMethod("addItem", String.class);
            addItem.setAccessible(true);
            addItem.invoke(b, "Hello");

            Method getItem = b.getClass().getDeclaredMethod("getItem", int.class);
            getItem.setAccessible(true);
            String hi = (String) getItem.invoke(b, 0);
            System.out.println(hi);
        }
    }
} 
```

印刷

```
Hello 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:37:55.153

使用[commons beanutils库](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html)并使用以下方法，比自己做要干净得多

```
PropertyUtils.getNestedProperty(ref, "b.propertyOfClassB"); 
```

用实际的属性名称替换 propertyOfClassB。

# gcc - 为 ARM 编译时出现异常的 LD 警告

> ID：14549824
> 
> 赞同：2
> 
> 时间：2013-01-27T17:06:28.480
> 
> 标签：gcc, arm, macports, ld

我尝试过通过 MacPorts 安装“arm-none-eabi-gcc”和“arm-elf-gcc”，但每次编译时，都会收到此警告。

```
ld: warning: cannot find entry symbol _start; defaulting to 0000000000008000 
```

我正在使用“-T”标志并指定我自己的链接器文件，如下所示。

```
SECTIONS {

    . = 0x00000000;

    .text : { * (vectors);  * (.text); }

    .rodata : { * (.rodata); }

    text_end = .;

    . = 0xA4000000;

    .data : AT (text_end) { * (.data); }

    .bss : { * (.bss); }

} 
```

NM 转储这个。

```
00000000 t reset
00000004 t undefined
00000008 t swi
0000000c t prefetch_abort
00000010 t data_abort
00000014 t reserved
00000018 t interrupt_request
0000001c t fiq
00000020 t irq
00000024 T init
00000038 T main
0000004c A text_end
00008024 t entry
0000804c T __data_start
00010028 A __bss_end__
00010028 A __bss_start
00010028 A __bss_start__
00010028 A __end__
00010028 A _bss_end__
00010028 A _edata
00010028 A _end
00080000 N _stack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:34:46.787

链接器向您发出警告，因为它无法`_start`在编译代码中找到符号。并且您当前的链接器配置期望在代码中的某处定义这样的符号。

因此，您要么拥有通过查阅编译器/链接器用户手册并了解`-e`链接器标志的用法来手动定义入口点（即重置）的解决方案，要么真正定义`_start`在某些代码中命名的符号。

# jquery - Bootstrap 选项卡 + Jquery Masonry

> ID：14549826
> 
> 赞同：0
> 
> 时间：2013-01-27T17:06:52.510
> 
> 标签：jquery, twitter-bootstrap, tabs, jquery-masonry

我最近一直在用头撞很多墙，但找不到任何可行的答案（即使使用我可能不理解的[解决方案）。](https://stackoverflow.com/questions/11749701/jquery-masonry-not-working-with-jquery-tabs)

我在 div(class="box") 上使用砖石，我试图将这些 div 放入引导选项卡中。

问题是：重新加载效果不佳，留下间隙并表现得像最后一个 div 没有被清除。

我试过这个：

```
$('a[data-toggle="tab"]').on('shown', function (e) {
            $('#content').masonry( 'reload' );
        }); 
```

但这当然行不通。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T15:15:59.310

```
$('a[data-toggle=tab]').on('shown.bs.tab', function (e) {
    $(window).trigger("resize");
});
$(window).resize(function(){
    $this = $('#content');
    $coloumn = $this.width() / 4;
    $this.masonry({ columnWidth: $coloumn, gutter: 0, itemSelector: '.content_block_row_wrap' });               
}); 
```

我用类似的代码修复了类似的问题。现场演示：[http](http://shop.theme.firmasite.com/premium-features/) ://shop.theme.firmasite.com/premium-features/ 检查其代码。

# grails - 转发操作时不保存？

> ID：14549828
> 
> 赞同：0
> 
> 时间：2013-01-27T17:07:17.430
> 
> 标签：grails, action, grails-orm, forward

圣杯 2.2.0

我正在探索 grails 和 ajax，也许我是一个狂热的 ajax 适配器，但我真的认为它改变了游戏规则，所以我要先入为主。

数据模型是主要细节 (1:n)。客户端中的表格显示了主属性列表的一部分。单击后，线条折叠打开，显示所有细节（一个属性域）和一个向展开的母版添加新细节的选项。好吧，开通这条线电话

```
def show (Long id) {
    def product = Product.get(id)
    log.info('show ' + (request.xhr ? 'xerhr' : 'normal') + "product is ${product.title}")
    def c = Attribute.createCriteria();
    def attributeTypes = LookupValue.findByType('m_attr') //list of values for dropdown menu.
    def result = c {
        eq("movie", product)
    }
    for (attr in result) {
        log.info('value: ${attr.value}')
    }
    render ([template: "attributes", model:[focus:params.id
        , attributeList: result, attributeTypes: attributeTypes]])
} 
```

属性模板显示所有相关属性（详细信息）和末尾的添加选项，您可以在其中输入新值并从下拉菜单中选择值。客户端确实向控制器的 saveAttribute 方法执行 ajax 回传以保存此新属性：

```
def saveAttribute(Long id, Long luv_id, String value) {
    def attribute = new Attribute(movie : Product.get(id)
        , label : LookupValue.get(luv_id)
        , value : value);
    attribute.save();
    show();
} 
```

并再次调用`show()`以将新创建​​的属性列表呈现回客户端。现在 show() 确实渲染了所有现有的属性，但它无法检索刚刚创建的属性，而它确实最终在数据库中。当我重新加载页面时，它也会出现。我哪里错了？有了hibernate，我想我会做一个`session.flush()`来克服这个问题。

也许我的架构是错误的，我需要定义一个服务并引入一些事务边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:21:45.593

```
def saveAttribute(Long id, Long luv_id, String value) {
    Attribute attribute = new Attribute(movie: Product.get(id)
        , label: LookupValue.get(luv_id)
        , value: value).save(flush: true)
    forward(action: "show", id: id)
} 
```

# php - MCRYPT 函数返回错误结果

> ID：14549829
> 
> 赞同：1
> 
> 时间：2013-01-27T17:07:29.373
> 
> 标签：php, encryption, mcrypt

我正在尝试对使用 MCRYPT 制作的一些随机字符串进行编码和解码，但它们无法正确解码。

这是我用来编码字符串的函数：

```
function m_encrypt($key, $text, $iv) {
    return mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $text, MCRYPT_MODE_CBC, $iv);
} 
```

如您所见，它需要我编写的预定义“密钥”、要编码的文本和在单独文件中创建的 iv。然后它加密数据并返回。

这是将字符串插入数据库的函数：

```
$sth = $dbh->prepare('INSERT INTO randomStrings(random_string, iv) VALUES (:random_string, :iv)');
$iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);

$rows = 50;

for($i = 0; $i < $rows; $i++) {
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $randString = get_random_string($chars, 20);
    $randString = m_encrypt($key, $randString, $iv);
    $sth->bindParam(':random_string', $randString);
    $sth->bindParam(':iv', $iv);
    $sth->execute();    
} 
```

我只是将字符串和 iv 插入数据库。

接下来，我尝试使用以下方法读取编码的字符串：

```
function m_decrypt($key, $text, $iv) {
    return mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $text, MCRYPT_MODE_CBC, $iv);
} 
```

类似于encode函数，但相反。

最后，尝试解密字符串的文件如下所示：

```
$sth = $dbh->prepare('SELECT * FROM randomStrings');
$sth->execute();    

while($result = $sth->fetch(PDO::FETCH_ASSOC)) {
    echo m_decrypt($key, $result['random_string'], $result['iv']);
    echo '<br/>';
} 
```

结果总是一些任意的字符集，例如

```
í,eHGxC•z»@”“§`` 
```

我知道这是不对的，因为我已将随机字符串生成中使用的字符限制为简单的 az 和 0-9，因此这不可能是正确的解码，感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:40:24.677

加密字符串和/或 IV 很可能被您的数据库破坏了。要测试是否是这种情况，您可以将它们保存在数据库中，立即取回它们并将结果与​​原始结果进行比较。

您尚未指定您使用的数据库软件，但如果是 MySQL，则用于存储加密数据的适当列类型是[`VARBINARY`](http://dev.mysql.com/doc/refman/5.6/en/binary-varbinary.html)或[`BLOB`](http://dev.mysql.com/doc/refman/5.6/en/blob.html)。（对于应该具有恒定长度的 IV，也`BINARY`可以工作。但实际上，存储 IV 的*常用*方法是将它们简单地添加到加密字符串的前面。）

# spring - Spring mvc junit 测试服务

> ID：14549831
> 
> 赞同：0
> 
> 时间：2013-01-27T17:07:38.627
> 
> 标签：spring, model-view-controller, testing, junit

我正在使用spring mvc。我想用 Junit 测试我的服务。我想测试包含我编写类测试的新用户：

```
@ContextConfiguration("/dispatcher-servlet.xml")
public class ServizioUtenteTest {

    @Autowired
    private ServizioUtente servizioutente;

    @Test
    public void testAggiungiUtente() {
        //fail("Not yet implemented");
        Utente utente=new Docente();

        utente.setCognome("Professore");
        utente.setPassword("tetxts");
        utente.setUsername("xxxx");

        servizioutente.aggiungiUtente(utente);

    }

    @Test

} 
```

当我运行测试时，我得到：

```
java.lang.NullPointerException
    at org.rol.test.ServizioUtenteTest.testAggiungiUtente(ServizioUtenteTest.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
....) 
```

在线抛出错误，为什么？帮我！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:47:32.977

你失踪了`SpringJUnit4ClassRunner`：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/dispatcher-servlet.xml")
public class ServizioUtenteTest {
  //... 
```

# 也可以看看

*   [在 Spring 3 中创建单一测试](https://stackoverflow.com/questions/5583962)

*   [*11\. 测试*](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html)

# ruby-on-rails - 等价于 Node.js 的 Rails 控制台

> ID：14549846
> 
> 赞同：47
> 
> 时间：2013-01-27T17:09:04.937
> 
> 标签：ruby-on-rails, node.js, console, rails-console

我正在尝试 Node.js Express 框架，并寻找允许我通过控制台与模型交互的插件，类似于 Rails 控制台。NodeJS 世界里有这样的事情吗？

如果没有，我如何与我的 Node.js 模型和数据进行交互，例如手动添加/删除对象、数据测试方法等？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-11-25T08:20:01.760

通过使用以下行/组件制作一个 js 文件（即：console.js）来创建您自己的 REPL：

1.  需要节点的内置repl：`var repl = require("repl");`
2.  加载所有关键变量，如 db、你发誓的任何库等。
3.  使用加载repl`var replServer = repl.start({});`
4.  使用 .将 repl 附加到您的关键变量`replServer.context.<your_variable_names_here> = <your_variable_names_here>`。这使得变量在 REPL（节点控制台）中可用/可用。

例如：如果您的节点应用程序中有以下行：将以下行 `var db = require('./models/db')` 添加到您的 console.js

```
 var db = require('./models/db');
 replServer.context.db = db; 
```

5.  使用命令运行控制台`node console.js`

* * *

您的 console.js 文件应如下所示：

```
var repl = require("repl");

var epa = require("epa");
var db = require("db");

// connect to database
db.connect(epa.mongo, function(err){
  if (err){ throw err; }

  // open the repl session
  var replServer = repl.start({});

  // attach modules to the repl context
  replServer.context.epa = epa;
  replServer.context.db = db;  
}); 
```

* * *

您甚至可以像这样自定义提示：

```
var replServer = repl.start({
  prompt: "Node Console > ",
}); 
```

* * *

有关完整设置和更多详细信息，请查看： [http ://derickbailey.com/2014/07/02/build-your-own-app-specific-repl-for-your-nodejs-app/](http://derickbailey.com/2014/07/02/build-your-own-app-specific-repl-for-your-nodejs-app/)

对于选项的完整列表，您可以传递 repl，如提示、颜色等：[https ://nodejs.org/api/repl.html#repl_repl_start_options](https://nodejs.org/api/repl.html#repl_repl_start_options)

感谢[Derick Bailey](http://derickbailey.com/author/derickbailey/)提供此信息。

* * *

### 更新：

GavinBelson[非常推荐使用 sequelize ORM](https://stackoverflow.com/a/57084621/4099593)（或任何需要在 repl 中处理 promise 的东西）运行。

我现在也在运行 sequelize，对于我的节点控制台，我正在添加`--experimental-repl-await`标志。

每次都要输入很多，所以我**强烈**建议添加：

`"console": "node --experimental-repl-await ./console.js"`

到您的`scripts`部分，`package.json`这样您就可以运行：

`npm run console`

并且不必输入整个内容。

然后你可以处理 Promise 而不会出错，如下所示：

`const product = await Product.findOne({ where: { id: 1 });`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-27T20:47:15.717

我对node的使用不是很熟练，但是你可以`node`在命令行中输入来进入node控制台。然后我曾经手动要求模型

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-17T22:09:42.657

这是使用 SQL 数据库的方法：

安装和使用[Sequelize](http://docs.sequelizejs.com/)，它是 Node 对 Rails 中 Active Record 的 ORM 解决方案。它甚至有一个用于搭建模型和迁移的 CLI。

`node --experimental-repl-await`

```
> models = require('./models'); 
> User = models.User; //however you load the model in your actual app this may vary
> await User.findAll(); //use await, then any sequelize calls here 
```

TLDR

这使您可以像在 Rails 活动记录中一样访问所有模型。Sequelize 需要一些时间来适应，但在许多方面它实际上比 Active Record 更灵活，同时仍然具有相同的功能。

Sequelize 使用 Promise，因此要在 REPL 中正确运行它们，您将需要`--experimental-repl-await`在运行节点时使用该标志。否则，你会得到 bluebird promise 错误

If you don't want to type out the require('./models') step, you can use console.js - a setup file for REPL at the root of your directory - to preload this. However, I find it easier to just type this one line out in REPL

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-28T00:13:35.237

很简单：在你的程序中添加一个[REPL](http://nodejs.org/api/repl.html)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-27T17:45:54.373

这可能无法完全回答您的问题，但需要澄清的是，node.js 比 Rails 低得多，因此没有规定像 Rails 这样的工具和数据模型。它更像是一个平台而不是一个框架。

如果您正在寻找更像 Rails 的体验，您可能希望查看构建在 node.js 之上的更“功能齐全”的框架，例如[Meteor](http://meteor.com/)等。

# extjs - 在渲染器网格单元中存储不加载

> ID：14549850
> 
> 赞同：0
> 
> 时间：2013-01-27T17:09:23.887
> 
> 标签：extjs, grid, store, renderer

我试图在我的列中渲染一个字符串而不是你的 id。我创建了这个解决方案：[网格单元呈现错误](https://stackoverflow.com/questions/13992450/grid-cell-is-rendering-wrong)，但它不适用于动态存储。

在我的网格中，我将商店加载到渲染器中：

```
columns: [
                  {xtype : 'gridcolumn', text: 'Id', dataIndex: 'id'},
                  {xtype : 'gridcolumn', text: 'Validade', dataIndex: 'dataValidade', renderer: function(object){return Ext.Date.format(object, 'd-m-Y');}},
                  {xtype : 'gridcolumn', text: 'Complexo', dataIndex: 'id', renderer: function(value) {
                        storeComplexoPorValidade.getProxy().url = caminhoContexto + "validade/complexoporid/" + value + "/dados.json";
                        storeComplexoPorValidade.load();
                        console.log(storeComplexoPorValidade);
                        var idx = storeComplexoPorValidade.find('id', value);
                        var rec = storeComplexoPorValidade.getAt(idx);
                        return rec.get('descricao');  
                        }
                  }, 
```

但是商店不会将数据加载到 var，尽管执行请求。我发现了错误：无法调用未定义的方法“get”。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:47:21.930

您收到错误是因为存储加载是异步的，因此来自**渲染器**的“返回”将在您的代理请求的响应被接收、处理并可以分配给您尝试的变量之前完成放。

我建议你在这里重新考虑你的方法。几个选项：

1.  在创建网格之前加载您尝试用于自定义渲染的商店
2.  使用执行自定义呈现所需的额外字段扩展网格存储的基础数据模型。您始终可以将这些额外字段标记为非持久性，因此它们不会包含在可能对模型实例执行的任何写入操作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:24:35.900

感谢您的帮助，我有很多工作要让我的脚本正常工作。根据您的提示，我创建了另外两个解决方案，帮助我使我的代码正常工作。[如何等到所有商店都加载到 ExtJs 中？](https://stackoverflow.com/questions/11003605/how-to-wait-until-all-stores-are-loaded-in-extjs)和[http://www.sencha.com/forum/showthread.php?197265-Loading-stores-synchronously](http://www.sencha.com/forum/showthread.php?197265-Loading-stores-synchronously)

这是我的代码工作：

```
Ext.define('validade', {
extend: 'Ext.data.Model',
fields: [{name: 'id', type: 'int'},
         {name: 'dataValidade', type: 'date', dateFormat:'Y-m-d'},
         {name: 'complexo', type: 'string', persist: 'false' }] 
```

});

```
Ext.define('ValidadeStore',{
extend: 'Ext.data.Store',
model: 'validade',
pageSize: itemsPerPage,
remoteSort: true,
    sorters: [{
        property : 'id',
        direction: 'DESC'
    }],
proxy: {
    type: 'ajax',
    url : '/validade/grid/dados.json',
    reader : {
        type : 'json',
        root : 'data'
    },
},
autoLoad: {
    callback: function(records, operation, success){
        var i = 0

        loadComplexo();

        function loadComplexo(){
            if (i < records.length) {
                var rec = records[i];
                i++;
                storeComplexo.getProxy().url = "validade/complexoporid/" + rec.get('id') + "/dados.json";
                storeComplexo.load({
                    callback: function(records, operation, success){
                        var rec_ = records[0];
                        rec.set('complexo',rec_.get('descricao'));
                        loadComplexo();
                    }
                });
            }
        }
    }
} 
```

});

非常感谢！

# php - PHP打开连接&只关闭一次

> ID：14549855
> 
> 赞同：1
> 
> 时间：2013-01-27T17:10:19.750
> 
> 标签：php, mysql

我创建了一个高分脚本（从 Java 游戏中获取数据）。

所以这是我用来为每一行取值的脚本，例如这一行将被称为“玩家名称”：

```
 <td style="padding:3px;" align="center">
                <?php
                    $con = mysql_connect(MYSQL_HOST, MYSQL_USERNAME, MYSQL_PASSWORD);
                    if (!$con)
                      {
                      die('Could not connect: ' . mysql_error());
                      }

                    mysql_select_db(MYSQL_DATABASE, $con);

                    $result = mysql_query("SELECT * FROM high ORDER BY Runecraftlvl DESC LIMIT 20");

                    while($row = mysql_fetch_array($result))
                      {
                      echo $row['playerName'];
                      echo "<br />";
                      }

                    mysql_close($con);
                ?>
                </td> 
```

而且我还有 4 个这样的脚本。如何只打开一个连接而不是每次都打开和关闭连接？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:11:53.737

通常，您不需要关闭连接，因为这将在脚本结束时自动发生。

打开连接的最佳方法是将连接代码放入将包含在每个脚本中的引导文件中。

# javascript - javascript:原型

> ID：14549857
> 
> 赞同：1
> 
> 时间：2013-01-27T17:10:35.033
> 
> 标签：javascript

当新对象被构造时，该对象被设置为将尚未明确设置的任何属性委托给其构造函数的原型。这意味着我们可以稍后更改原型，并且仍然可以看到实例中的更改。

第一的：

```
 function Foo(){}
 foo=new Foo();
 Foo.prototype={};
 foo.constructor==Foo//true.why is this happening since construtor prototype is empty object 
```

所以该声明没有按照定义工作。对还是错？但如果我这样做，结果就会不同

第二：

```
 function Foo(){}
  Foo.prototype={};
 foo=new Foo();

 foo.constructor==Foo//false as aspected 
```

再次第三：

```
 function Foo(){}
  Foo.prototype={};
   Foo.prototype.name="Maizere";
 foo=new Foo();

 foo.name==Maizere//true.The definition at the top is applying here,if so why the definition not working in the first: example 
```

请帮助简单的英语。我真的很头疼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:32:17.687

> 为什么会这样

[`new`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)将实例的继承设置为构造函数的属性当前指向的对象`prototype`。所以当你这样做时

```
function Foo() {}
var foo = new Foo; 
```

如果有人`Foo.prototype`在那之后分配给它是无关紧要的 - 它不会改变`foo`。

*   首先：您获得的继承`constructor`属性来自“旧”原型 - 一个与函数一起初始化并具有隐藏“构造函数”属性的对象
*   第二：您正在`prototype`用一个空对象覆盖该属性，并且您的`foo`（在覆盖后创建）继承自该属性。并且由于空对象继承自`Object.prototype`，因此该`constructor`属性现在指向该`Object`函数。
*   第三：同样，您`foo`在覆盖`prototype`. 由于您将属性分配给继承自`name`的新对象，因此您也可以访问它。`foo``foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:34:10.347

当您编写一个函数时，它带有一个名为的属性`prototype`- 一个其`constructor`属性设置为函数本身的对象。您可能已经知道，JavaScript 的对象模型是基于原型的。这使得您使用该函数创建的对象继承了`prototype`其构造函数（您调用的那个`new`）的所有属性 - 因此您应该注意创建`prototype`对象**的时刻**。

在您的第一种情况下，您只是将`prototype`属性设置`Foo`为一个空对象。但是原始（默认）`prototype`仍然由`foo`. 这就解释了为什么最后一个表达式的计算结果为真。

当您`foo`在第二种情况下创建时，`prototype`of`Foo`已经设置为一个空对象。所以几乎`foo`没有继承任何东西。同样的原则也适用于第三种情况。

# matlab - MATLAB 引擎：如果输入不完整，engEvalString() 将不会返回

> ID：14549858
> 
> 赞同：4
> 
> 时间：2013-01-27T17:10:40.040
> 
> 标签：matlab, matlab-deployment, matlab-engine

我在 OS X 上使用[MATLAB Engine](http://www.mathworks.com/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html) C 接口。我注意到如果[`engEvalString()`](http://www.mathworks.com/help/matlab/apiref/engevalstring.html)给出了不完整的 MATLAB 输入，例如

```
engEvalString(ep, "x=[1 2"); 
```

或者

```
engEvalString(ep, "for i=1:10"); 
```

那么这个函数*就永远不会返回*。最快的测试方法是使用[engdemo.c](http://www.mathworks.com/help/matlab/apiref/rmvd_matlablink__0f518ce282fbd3b9ac1217f26211971d.html)示例，该示例将提示输入一段 MATLAB 代码并对其进行评估（即您可以键入任何内容）。

我的应用程序允许用户输入任意 MATLAB 输入并对其进行评估，因此我无法轻松防止输入不完整。有解决方法吗？有没有办法防止`engEvalString()`在这种情况下挂起，或者有没有办法在我实际将它传递给 MATLAB 之前检查任意一段代码的正确性/完整性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:08:12.120

正如您所指出的，这个错误似乎特定于 Mac 和/或 Linux（我无法在我的 Windows 机器上重现它）。作为一种解决方法，将调用包装在`eval`、`evalc`或中`evalin`：

```
engEvalString(ep, "eval('x = [1,2')") 
```

此外，这些函数的一个未记录的特性是它们接受第二个输入，以防第一个输入发生错误。例如：

```
ERR_FLAG = false;
eval('x = [1,2', 'x=nan; ERR_FLAG=true;') 
```

您可以通过查询全局错误标志的值来捕获错误，并且仍然可以避免上述错误......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:10:18.260

支持确认这是 OS X 上的 MATLAB 引擎界面中的一个错误（它在 Windows 中不存在）。可以使用 MATLAB 函数 、 或类似函数来解决`eval`问题`evalc`。与其直接将代码传递给`engEvalString()`，不如先将其包装在这些中。

# python - 创建列表

> ID：14549860
> 
> 赞同：1
> 
> 时间：2013-01-27T17:10:44.040
> 
> 标签：python, list, split

我遇到了这个问题，我应该编写一个程序来吃几个单词（用逗号分隔）并用这些单词吐出一个干净的列表。我无法解决我的问题。有任何想法吗？

```
def wordlist(word):
    return word.split(',')    

def main ():    
    sentence = input("write a few words and seperate them with , ")
    splitsentence = wordlist(sentence)
    for item in splitsentence:
        print(item)

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:16:53.310

您每次都在打印列表，而不是您正在迭代的特定项目：

而不是`print(splitsetnence)`，你需要`print(item)`

```
def main():
    sentence = input("write a few words and separate them with ,")
    splitsentence = wordlist(sentence)
    for item in splitsentence:
        print (item) 
```

另外，请注意缩进。原始帖子中的代码看起来没有正确缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:16:39.510

用 raw_input() 替换 input()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:18:18.003

您的缩进已关闭，您应该使用它`raw_input`来获取字符串：

```
def wordlist(word):
    return word.split(',')

def main():
         sentence = raw_input("write a few words and seperate them with , ")
         splitsentence = wordlist(sentence)
         for item in splitsentence:
             print(item)
main() 
```

此外，对于这样一个小任务，您可以删除该`wordlist(word)`功能：

```
def main():
         sentence = raw_input("write a few words and seperate them with , ")
         splitsentence = wordlist.split(')
         for item in splitsentence:
             print(item)
main() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T17:48:23.020

使用`raw_input`代替`input`和替换`print(splitsentence)`为`print(item)`。

请记住，缩进是 Python 对语句进行分组的方式，就像 C 或 Java 使用`{`和`}`

这是我的代码版本：

```
sentence = raw_input("write a few words and seperate them with , ")
splitsentence = sentence.split(',')
for item in splitsentence:
    print item 
```

此代码不需要`def main()`或其他行。

# android - 如何使用 Subversion 将现有的 Android Eclipse 项目添加到 Google Code？

> ID：14549863
> 
> 赞同：2
> 
> 时间：2013-01-27T17:10:59.460
> 
> 标签：android, eclipse, svn, subclipse, google-code

因此，我在 Eclipse 中创建了一个 Android 项目，现在我想将它添加到 Google Code 上的 SVN 存储库中。我在这里创建了我的 Google 代码存储库（实际上是 Eclipse Labs 存储库）： [http ://code.google.com/a/eclipselabs.org/p/missilecommand/source/checkout](http://code.google.com/a/eclipselabs.org/p/missilecommand/source/checkout)

现在我想导入我的 Android 项目。我已经安装了 Subclipse 插件并测试了它的工作原理，确实如此。

但是，我不知道如何将项目导入 EclipseLabs 存储库。我无法使用“团队->共享”，因为它试图创建一个我无权执行的新存储库（我假设您只能通过网站创建新存储库？）

我尝试使用 subclipse 检查空白存储库主干：这有效，但随后将源树复制到空白项目中会丢失所有 Android 特定项目属性。

如何将 Android 项目初始导入到我的 SVN 中？？！

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:26:42.317

右键单击您的项目 -> 团队 -> 共享项目![在此处输入图像描述](../Images/922d0a2604d99dbf4e66c65cc50a3bd8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:39:29.670

好的 - 我想我知道我做错了什么：

我需要将我的项目作为主干中的新文件夹导入 SVN 主干。我以为我必须将其作为新文件夹导入：
[https ://svn.codespot.com/a/eclipselabs.org/](https://svn.codespot.com/a/eclipselabs.org/)

这当然已经在 SVN 服务器上创建了。

我现在已经设法通过 Tram->Share 将我的项目导入到 SVN 的主干中： [https ://svn.codespot.com/a/eclipselabs.org/missilecommand/trunk/MissileCommand](https://svn.codespot.com/a/eclipselabs.org/missilecommand/trunk/MissileCommand)

我认为我的误解意味着我现在对存储库的命名很差！

# html - jQuery滑块的CSS定位

> ID：14549864
> 
> 赞同：0
> 
> 时间：2013-01-27T17:11:10.273
> 
> 标签：html, css, positioning

我想制作一个 Jquery 滑块，在图像中带有上一个和下一个按钮。我目前有以下代码，它显示了图像下方的上一个和下一个按钮。滑块现在按预期工作，但按钮位于图像下方而不是图像中。我怎么能改变这个在图像中有上一个和下一个按钮？

HTML 代码：

```
<div id="slider">
       <ul>
         <li id="slide1"></li>
         <li id="slide2"></li>
         <li id="slide3"></li>
       </ul>
       <a href="#" id="slider_prev"></a>
       <a href="#" id="slider_next"></a>
</div> 
```

CSS 代码：

```
#slider {
width:1148px;
    overflow: hidden;
}
#slider ul {
 margin: 0;
 padding: 0;
 list-style-type: none;
 position: relative;
 z-index: 1;
}
#slider ul li {
 float: left;
 width: 1148px;
 height: 195px;
}
#slider_prev, #slider_next {
width:53px;
height:52px;
display:block;
margin-top:69px;
}
#slider_prev {
float:left;
margin-left:42px;
margin-right:92px;
background: url("../images/prev.png") no-repeat 0 0 transparent;
}
#slider_next {
float:right;
margin-right:42px;
margin-left:92px;
background: url("../images/next.png") no-repeat 0 0 transparent;
}
#slide1 {
 background-image: url("../images/slider_1.png");
}
#slide2 {
 background-image: url("../images/slider_2.png");
}
#slide3 {
 background-image: url("../images/slider_3.png");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:27:50.523

您想要做的是将一个元素放在另一个元素上。您需要将 2 个锚标签的位置设置为绝对。然后为这些元素设置 z-index。z-index 确定哪个元素高于其他元素。相对较低的 z-index 会将元素移动到其他元素下方，反之亦然。但是绝对位置需要相对于某个父元素。当您相对于滑块定位元素时，应将具有 id=slider 的元素设置为相对。最后使用“top”“bottom”“left”“right”变量设置按钮的位置。

```
#slider {
    width:1148px;
    overflow: hidden;
    position: relative; //Set parent element to relative
}
#slider_prev, #slider_next {
    width:53px;
    height:52px;
    display:block;
    position: absolute;    // Set the buttons to position absolute
    z-index: 100;  //Set a value for z-index
    top: px;  //Set the amount of pixels from top of "slider" div
}
#slider_prev {
    left: px;  //Set the amount of pixels from left of "slider" div
    background: url("../images/prev.png") no-repeat 0 0 transparent;
}
#slider_next {
    right: px;  //Set the amount of pixels from right of "slider" div
    background: url("../images/next.png") no-repeat 0 0 transparent;
} 
```

希望有帮助。

# c++ - 在堆上创建变量并返回相同的变量

> ID：14549867
> 
> 赞同：1
> 
> 时间：2013-01-27T17:11:48.040
> 
> 标签：c++, heap-memory

嗨，我对堆变量几乎没有疑问......

我想写一个如下的函数->

```
struct test
{
   int x;
   int y;
};

test* fun()
{
    test *ptr = new test;

    return ptr;
} 
```

1.  我的疑问是返回一个堆变量，一旦它超出范围就会失去它的价值。

2.  肯定有内存泄漏。（因为堆变量没有被删除。）

那么我该如何设计这种功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:16:37.360

动态分配的对象（你称之为堆变量）不会在创建它们的范围结束时被销毁。这就是动态分配的重点。虽然`test`对象是动态分配的，但指针`ptr`不是 -当它超出范围时它将被销毁*。*不过没关系！您将指针的值复制到函数之外，并且该副本仍指向`test`对象。`test`物体还在。您编写的函数很好，但它不是很好的风格。

是的，如果没有人`delete`对指向`test`您创建的对象的指针进行操作，则会出现内存泄漏。这是像这样返回原始指针的问题。您必须信任`delete`您正在创建的对象的调用者：

```
void caller()
{
  test* p = fun();
  // Caller must remember to do this:
  delete p;
} 
```

执行此操作的常见 C 风格方式（在 C++ 中绝对不推荐）是拥有一`create_test`对`destroy_test`函数。这仍然使调用者承担同样的责任：

```
void caller()
{
  test* p = create_test();
  // Caller must remember to do this:
  destroy_test(p);
} 
```

解决此问题的最佳方法是不使用动态分配。只需在堆栈上创建一个`test`对象并将其复制（或移动）出函数即可：

```
test fun()
{
    test t;
    return t;
} 
```

如果您*需要*动态分配，那么您应该使用智能指针。具体来说，`unique_ptr`类型是你想要的：

```
std::unique_ptr<test> fun()
{
    return std::unique_ptr<test>(new test());
} 
```

然后调用函数可以处理 ，`unique_ptr`而不必担心`delete`对其进行处理。当`unique_ptr`超出范围时，它将自动创建您创建`delete`的对象。`test`但是，如果调用者希望其他函数拥有该对象，则调用者可以将其传递给其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:16:01.877

1.  您不是返回堆变量，而是返回一个堆栈变量的值，该堆栈变量包含指向堆的指针。堆栈变量超出范围；指针指向的内存在堆中——它永远不会超出范围。

2.  除非您在调用者中释放内存，否则将会发生内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:45:10.927

> 我的疑问是 [that] 返回一个堆变量，一旦它超出范围，它将失去 [se] 它的值。

不用担心，因为您正在按*值*返回指针；因此指针将超出范围，但由于您正在返回它指向的内存，因此没有内存泄漏（只有当我们可以依赖调用者删除它时）。

但是，如果我们通过*引用*返回指针，那么我们就会遇到问题：

```
test*& fun() // note the & (reference)
{
    test *ptr = new test;

    return ptr;
} 
```

在这里，您将返回对临时的引用。当变量超出范围时，您将使用不存在的对象。这就是您不能通过引用返回临时对象的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T18:19:06.707

> > 我的疑问是返回一个堆变量，一旦它超出范围就会失去它的价值。

没有堆变量不会像 go stack 变量那样超出范围......

> > 肯定有内存泄漏。（因为堆变量没有被删除。）

是的，我们必须自己释放在堆上分配的内存，否则会有内存泄漏......

我建议阅读一些与之相关的[教程。](http://www.cprogramming.com/tutorial/dynamic_memory_allocation.html)

# c# - XML 序列化示例，第一步

> ID：14549870
> 
> 赞同：-1
> 
> 时间：2013-01-27T17:12:00.473
> 
> 标签：c#, xml, serialization

我有以下运动要做...

我将得到以下 xml 文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<Mitarbeiterstatistik xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Mitarbeiter>
    <Vorname>Horst</Vorname>
    <Nachname>Schneider</Nachname>
    <Id>1</Id>
  </Mitarbeiter>
  <Mitarbeiter>
    <Vorname>Tanja</Vorname>
    <Nachname>Lindner</Nachname>
    <Id>2</Id>
  </Mitarbeiter>
</Mitarbeiterstatistik> 
```

现在我尝试了以下步骤......

我做了一个类Mitarbeiter！

```
public class Mitarbeiter
{
private string vorname;
private string nachname;
private int id;

public Mitarbeiter()
{

}

public Mitarbeiter(string vorname, string nachname, int id)
{
  this.vorname = vorname;
  this.nachname = nachname;
  this.id = id;
}

public string Vorname
{
  get { return vorname; }
  set { vorname = value; }
}

public string Nachname
{
  get { return nachname; }
  set { nachname = value; }
}

public int Id
{
  get { return id; }
  set { id = value; }
}
} 
```

然后我创建了一个 Mitarbeiterstatistik 类，其中包含 Mitarbeiter 对象的列表......

```
[XmlRoot("Mitarbeiterstatistik")]
public class Mitarbeiterstatistik
{
  private List<Mitarbeiter> list = new List<Mitarbeiter>();

  [XmlArray("List")]
  public List<Mitarbeiter> List
  {
    get { return list; }
    set { list = value; }
  }
} 
```

我的主班看起来像......

```
class Program
{
  static void Main(string[] args)
  {
    Mitarbeiterstatistik maStatistik = new Mitarbeiterstatistik();
    Mitarbeiter ma1 = new Mitarbeiter("Horst", "Schneider", 1);
    Mitarbeiter ma2 = new Mitarbeiter("Tanja", "Lindner", 2);
    maStatistik.List.Add(ma1);
    maStatistik.List.Add(ma2);
    XmlSerializer serializer = new XmlSerializer(typeof(Mitarbeiterstatistik));
    XmlWriter writer = XmlWriter.Create(@"D:\test.xml");
    serializer.Serialize(writer, maStatistik);
    writer.Close();
  }
} 
```

现在我得到以下结果......

```
<?xml version="1.0" encoding="UTF-8"?>
<Mitarbeiterstatistik xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  **<List>**
    <Mitarbeiter>
      <Vorname>Horst</Vorname>
      <Nachname>Schneider</Nachname>
      <Id>1</Id>
    </Mitarbeiter>
    <Mitarbeiter>
      <Vorname>Tanja</Vorname>
      <Nachname>Schneider</Nachname>
      <Id>2</Id>
    </Mitarbeiter>
  **</List>**
</Mitarbeiterstatistik> 
```

不，我的 Xml 文件中有一个元素“列表”... :-)

我能做些什么来解决我的问题......

是否只能定义一个 Mitarbeiter 类而不定义 Mitarbeiterstatistik-Class？

也许如下？

```
 List<Mitarbeiter> list = new List<Mitarbeiter>();

  Mitarbeiter ma1 = new Mitarbeiter("Horst", "Schneider", 1);
  Mitarbeiter ma2 = new Mitarbeiter("Tanja", "Lindner", 2);

  list.Add(ma1);
  list.Add(ma2);

  XmlSerializer serializer = new XmlSerializer(typeof(List<Mitarbeiter>), new XmlRootAttribute("Mitarbeiterstatistik"));

  XmlWriter writer = XmlWriter.Create(@"D:\test.xml");

  serializer.Serialize(writer, list);

  writer.Close(); 
```

**还是有机会保留我的 Mitarbeiterstatistik-Class ？？？并禁用我的列表元素？？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:57:16.860

您可以使用带有您想要获取的元素名称而不是 [XmlArray] 的 [XmlElement] 来退出属性“List”（因为我正确地理解了您的问题）：

```
[XmlRoot("Mitarbeiterstatistik")]
public class Mitarbeiterstatistik
{
  private List<Mitarbeiter> list = new List<Mitarbeiter>();

  [XmlElement("Mitarbeiter")]
  public List<Mitarbeiter> List {get; set;}     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:12:10.320

如果你想尝试 Linq To Xml：

```
XDocument xDoc = new XDocument(new XElement("Mitarbeiterstatistik"));

foreach (var mitarbeiter in list)
{
    xDoc.Root.Add(
            new XElement("Mitarbeiter",
                new XElement("Vorname" ,mitarbeiter.Vorname ),
                new XElement("Nachname" ,mitarbeiter.Nachname ),
                new XElement("Id" ,mitarbeiter.Id )));

}

xDoc.Save(@"d:\test.xml"); 
```

# wordpress - Wordpress 3.5.1 中未加载的主题

> ID：14549872
> 
> 赞同：1
> 
> 时间：2013-01-27T17:12:05.260
> 
> 标签：wordpress, wordpress-theming

我刚刚通过 CPanel 更新将我的网站上传到 Wordpress 3.5.1，从那时起，主题就停止在我的网站上加载。即使我尝试了默认主题或全新安装 3.5.1 WP 版本，它也不会加载。

我去 WP 论坛看看我是否可以找到帮助，但不幸的是没有！

我还尝试了各种浏览器甚至不同的操作系统（Windows 和 Mac——我默认使用 Linux）。

请检查[http://nvcrao.com](http://nvcrao.com) - StyleSheet 加载但主题没有出现。

请帮我解决这个问题。

在此先感谢，西斯特拉阿布舍克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:46:52.380

看起来您的样式表和图像丢失了。例如，`style.css`找不到您的主题的回报：http: [//nvcrao.com/wp-content/themes/panoramica/style.css](http://nvcrao.com/wp-content/themes/panoramica/style.css)

您可以通过 FTP 或 SFTP 连接到您的站点并检查您的`/wp-content/uploads/`和`/wp-content/themes/`目录吗？您可能只需要重新上传您的主题（及其资产）。

# c# - WPF 控件自定义设计

> ID：14549873
> 
> 赞同：3
> 
> 时间：2013-01-27T17:12:16.137
> 
> 标签：c#, .net, user-interface, wpf-controls

我需要创建一些如下图所示的控件，但我不知道要使用哪个控件或如何使它看起来像我想要的那样：

1）一个水平条，这样我就可以在代码中动态改变它的长度。

![在此处输入图像描述](../Images/ab1cd0d19b34bde80df82966a071447c.png)

我尝试过使用“进度条”控件，但我无法摆脱绿色发光效果，也无法摆脱白色边框：

![在此处输入图像描述](../Images/5aa3db72348c3feb36a73527bdcc8ffa.png)

2) 一个看起来像这样的滑块：

![在此处输入图像描述](../Images/2c7e25d1a1250e48e3ff85fea98b02b8.png)

请注意，我分别拥有滑块的所有图像。（带有“加号”和“减号”按钮的背景，拇指等..）

3）动态改变刀片的数量，比如（当我有刀片的图像时）：

![在此处输入图像描述](../Images/a6246931a75f760d8e8e758f2578b72d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:27:59.517

您必须为滑块、进度条创建自定义模板。

在[MSDN](http://msdn.microsoft.com/fr-fr/library/vstudio/aa970773.aspx)上，有标准 WPF 控件的样式和模板。

然后，对于您的“刀片”控件，我认为您将不得不创建一个新的自定义控件，可能基于`RangeBase`.

对于进度条，您可以从以下内容开始：

```
<ProgressBar VerticalAlignment="Top" Value="60" Maximum="100">
    <ProgressBar.Template>
        <ControlTemplate TargetType="{x:Type ProgressBar}" >
            <Grid Height="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="30"/>
                </Grid.ColumnDefinitions>

                <Grid x:Name="PART_Track" ClipToBounds="True">
                    <Rectangle x:Name="PART_Indicator" Margin="-7,0,0,0" HorizontalAlignment="Left" Fill="Green" RadiusX="7" RadiusY="7" Height="14"/>
                </Grid>

                <TextBlock Grid.Column="1" Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, StringFormat={}{0} %}" Foreground="Black" VerticalAlignment="Center"/>
            </Grid>
        </ControlTemplate>
    </ProgressBar.Template>
</ProgressBar> 
```

# networking - 无法使用苹果脚本在远程计算机上显示对话框

> ID：14549874
> 
> 赞同：0
> 
> 时间：2013-01-27T17:12:26.373
> 
> 标签：networking, applescript

我无法使用苹果脚本通过网络显示对话框。我可以连接到计算机，但无法使用 apple-script 显示对话框。任何人都可以建议一个脚本来完成这项工作？？？？？？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:18:24.340

要在远程机器上显示对话框，您必须首先设置在该机器上运行的 AppleScript 应用程序。

**在远程机器上**

```
on displayDialog(d)
    tell application "AppleScript Runner"
        display dialog d
    end tell
end tell 
```

将上述脚本另存为应用程序：将其命名为**DialogHelper**并在保存时标记**保持打开**复选框。您可以将其保存在桌面或任何您喜欢的地方。然后运行应用程序并让它保持打开状态。

然后从本地机器调用 AppleScript 应用程序来显示对话框。

**在本地机器上**

```
tell application "DialogHelper" of machine "eppc://toms-mac.local"
    displayDialog("hello")
end tell 
```

-

请注意，必须在目标（远程）计算机上的“共享首选项**”中启用“远程 Apple 事件”才能使其正常工作。**

当然，机器的名称（示例中*的 toms-mac.local*）必须与您在打开相同首选项时看到的名称匹配。

*我刚刚尝试过，它可以在运行 Mac OS X 10.7 并连接到本地网络的两台 Mac 之间工作*

**边注**

通常，需要用户交互的脚本事件（作为显示对话框）在两台机器之间是不允许的，并且尝试触发它们以 -1713 错误结束。

在**告诉应用程序“AppleScript Runner”**块中包装*显示对话框*是解决该限制的一种方法。

 **也可以看看：

[http://wisevishvesh.wordpress.com/2010/10/14/applescript-execution-error-no-user-interaction-allowed-1713/](http://wisevishvesh.wordpress.com/2010/10/14/applescript-execution-error-no-user-interaction-allowed-1713/)**

# gwt - RequestFactory 和过时的客户端数据

> ID：14549875
> 
> 赞同：2
> 
> 时间：2013-01-27T17:12:28.997
> 
> 标签：gwt, requestfactory

我目前正在做一个项目，在客户端使用 GWT，RequestFactory 作为传输层，在服务器端使用 Apache Tomcat 和 Hibernate。

我遇到的麻烦涉及导致数据库实体发生更改的服务调用，而这并不是同一服务返回的对象。由于客户端在先前的请求中已经获得了相同的实体，因此它的客户端版本已过时。

这实际上应该不是问题，因为客户端不再需要已更改的实体字段。

问题是，当客户端引用这个相同的实体作为后续服务调用的参数时，没有对其执行任何客户端显式更改，负责在服务器端重建实体的 requestfactory 内部装饰器过程似乎正在持久化过时的数据（通过执行对实体的 Set 方法的调用，这些方法由休眠会话检测并在事务提交时安排更新）。

这个问题只是一个设计缺陷吗？服务调用导致的实体（客户端仍在使用）的任何更改都应该以某种方式显式刷新？我不认为这适用于所有情况，因为同一实体可能仍会因服务器站点自动过程甚至另一个客户端调用执行的更改而过时。

在我看来，requestfactory 应该能够检测到传入服务参数的实体何时过时（通过将其客户端版本与实体的 getVersion() 方法返回的版本进行比较），并以以下形式发出警告一个例外或其他东西，或者至少忽略过时的数据（在我的情况下这已经足够了）。

# bash - bash管道 - 从输出中打印某些单元格

> ID：14549880
> 
> 赞同：0
> 
> 时间：2013-01-27T17:12:40.850
> 
> 标签：bash

我不确定这是否是一个非常基本的问题，或者我是否正在取得进展，但我正在尝试（并且失败）做的是比较两个文件与差异，然后从选定的行中打印某一列输出。因此，基本上一个单元格就是我想要的输出。

```
diff fileA fileB | ta=$(awk '{print $2}') | awk 'FNR==2'  $ta 
```

显然不起作用，因为 $ta 不是文件。

最好（最简单或最快）的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:18:37.080

不太确定你想要实现什么，但这应该可以做到

```
diff fileA fileB | awk 'FNR == 2 {print $2}' 
```

# iphone - 在 iPhone 上的多个朋友 Facebook 墙上发帖

> ID：14549881
> 
> 赞同：0
> 
> 时间：2013-01-27T17:12:55.610
> 
> 标签：iphone, objective-c, facebook-ios-sdk

我正在尝试在我所有的朋友墙上发布消息

以下是我找到的代码

```
 [_facebook requestWithGraphPath:@"friend_ID/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

最大的问题是我怎么能得到`friend_id`？是他们的电子邮件吗？或者如何获取我的朋友 ID 的所有列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T19:11:27.673

```
[_facebook requestWithGraphPath:@"me/friends" andDelegate:self]; 
```

将请求您的朋友列表，前提是您已正确验证。

然后实现您的委托方法以提取您需要的 id。

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    items = result[@"data"];
    for (NSDictionary * friend in items) {
        long long friendId = [friend[@"id"] longLongValue];
        // Do something with the Id
    }
} 
```

# opengl - Opengl - 解除绑定帧缓冲区清除附加纹理

> ID：14549889
> 
> 赞同：1
> 
> 时间：2013-01-27T17:13:14.517
> 
> 标签：opengl, framebuffer, fbo, render-to-texture

我在渲染纹理以供以后使用时遇到了一些问题。目前，我正在生成一个帧缓冲区对象，创建两个纹理（一个 RGB 和一个 DEPTH_COMPONENT），附加两个纹理，检查状态是否正常，然后在绑定帧缓冲区时进行绘制。在 gDEBugger 内部，我可以看到所有东西都被贴图绘制得很好。

但是，当我尝试绑定回默认缓冲区（ glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0) ）时，纹理会被清除为零，并且绘制到纹理的所有内容最终都会回到静态缓冲区中。此外，我还尝试将另外两个空纹理绑定到帧缓冲区，并且所有内容都移动到新纹理。

这是[之前](http://imgur.com/yMCucEf)和[之后](http://imgur.com/stKHYeS)

有任何想法吗？

编辑：删除代码。

**TL;DR**：问题在于使用 EXT（例如 glBindFramebufferEXT 而不是 glBindFramebuffer 等）。

# cordova - 在 phonegap 应用程序中在哪里输入 html、css 和 JS？

> ID：14549891
> 
> 赞同：0
> 
> 时间：2013-01-27T17:13:25.640
> 
> 标签：cordova

因此，我遵循了电话差距[入门指南](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)，并在 Eclipse 中有一个正在运行的项目。

但这是java。那么我在哪里输入html等？

在我创建的 eclipse 项目中，我看不到这些东西。

这把我逼到了墙角，因为我知道这不可能，而且我错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:15:17.257

**assets**目录，在您的项目下。

# memory-management - 为什么下面的代码会出现“内存分配错误”？

> ID：14549892
> 
> 赞同：1
> 
> 时间：2013-01-27T16:23:06.397
> 
> 标签：memory-management, erlang, heap-memory

我编写了以下代码来解决舍入错误。如果我用高于 7 的值调用 loopUp，我会收到一个我不知道如何修复的内存分配错误。我已经在 Windows 7 上尝试了 32/64 位 Erlang。任何帮助将不胜感激。

```
-module(roundOff).
-export([main/0]).

main() ->
    loopUp(10).

loopUp(1) -> 1;
loopUp(I) -> 
    io:fwrite("~f ", [math:pow(10.0, I)]),
    sumUp(seq_float(1.0, math:pow(10, I), 1.0)),
    loopUp(I-1).

sumUp(L) ->
    sumUp(L, 0).

sumUp([], Acc) ->
    io:fwrite("~.20f~n", [Acc]),
    Acc;

sumUp([H|T], Acc) ->
    sumUp(T, Acc+1.0/H).

seq_float(Min, Max, Inc, Counter, Acc) when (Counter*Inc + Min) >= Max -> 
    lists:reverse([Max|Acc]);

seq_float(Min, Max, Inc, Counter, Acc) -> 
    seq_float(Min, Max, Inc, Counter+1, [Inc * Counter + Min|Acc]).

seq_float(Min, Max, Inc) -> 
    seq_float(Min, Max, Inc, 0, []). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:24:06.677

您在 seq_float 中生成的列表太长了。与其提前生成所有数字，不如尝试根据需要计算每个数字。

# c++ - 使用 pthread 的多个参数（带结构）错误

> ID：14549896
> 
> 赞同：2
> 
> 时间：2013-01-27T17:14:00.733
> 
> 标签：c++, struct, pthreads, arguments

我正在开发一个多客户端聊天项目。

这是我的代码：

```
struct RecvDataModel
{
    int sockAddr;
    char *inData;
};

void *ProcessData(void *arg);

void Client::Recv(int sockAddr, char *inData)
{
    RecvDataModel outData;
    outData.sockAddr = sockAddr;
    outData.inData = inData;
    pthread_t rThr;
    pthread_create(&rThr, NULL, ProcessData, (void*)&outData);
}

void *ProcessData(void *arg)
{
    RecvDataModel *inData = (RecvDataModel*)arg;
    cout << inData->inData << endl;
    return 0;
} 
```

基本上，如果 sockAddr（在 Client::Recv 中）等于“55”，ProcessData 的 cout 函数写入“31784736”，如果等于“0”，则 cout 的“5120”

那是我的大问题！没有这个我不能继续！（我正在使用eclipse C++）有什么问题？我已经看过一些这样的示例项目：[链接>>>](https://stackoverflow.com/questions/1352749/multiple-arguments-to-function-called-by-pthread-create)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:17:12.247

您正在传递一个指向 a 的指针，`RecvDataModel`它是一个函数局部变量。`Client::Recv`它将在函数结束时超出范围。

尝试使用以下方式分配它`new`：

```
RecvDataModel * outData = new RecvDataModel();
outData->sockAddr = sockAddr;
outData->inData = inData;
pthread_t rThr;
pthread_create(&rThr, NULL, ProcessData, outData); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:16:51.983

不要传递指向超​​出范围的局部变量的指针。一旦你创建了那个线程，`outData`它就不再有效了，所以你给它的指针是没有用的。您需要`outData`使用限定符进行声明，或者为它动态分配空间，以便它在返回`static`时不会消失。`Client::Recv`

# c++ - 使用 OpenCV 程序处理多页 PDF

> ID：14549898
> 
> 赞同：0
> 
> 时间：2013-01-27T17:14:21.997
> 
> 标签：c++, pdf, opencv

我需要使用我使用 OpenCV 库在 C++ 中编写的程序处理扫描到我的多页 PDF。OpenCV 不读取 PDF，因此我目前正在使用`pdftk`分解 PDF，`convert -density 300 page##.pdf page##.png`并将各个页面转换为 PNG，然后再用我的程序读取它们。

问题是`convert`在我的 Raspberry Pi 上进行此转换大约需要 30 秒。有没有一种更简单的方法可以以可以在我的 C++/OpenCV 中阅读的方式转换多页 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:05:02.733

您可以尝试将 PDF 转换为 PNG

[http://www.foolabs.com/xpdf/](http://www.foolabs.com/xpdf/)

[https://github.com/coolwanglu/pdf2htmlEX（PDF](https://github.com/coolwanglu/pdf2htmlEX)转html，但生成png为每页对应的图片，可以使用）

# playframework-2.0 - Japid 布局与 Play 2.0 的不同文件夹

> ID：14549907
> 
> 赞同：0
> 
> 时间：2013-01-27T17:15:00.153
> 
> 标签：playframework-2.0, japid

我遇到了布局和 html 问题的 japid 布局问题。对于 japid，如果我在 Application 文件夹中有带有 loginlayout.html 的布局。我的 login.html 也在 Application 文件夹中。因此我的代码如下：

```
@extends loginLayout("Login")
<h1>Testing</h1> 
```

像这样的东西。如果它们都在同一个文件夹中，则它们不会有任何问题。如果我将 loginlayout.html 放在 _layout 文件夹中，而我的 login.html 在 Applicaiton 文件夹中。如何将 loginLayout 导入 Application 文件夹。

谢谢...我有很多谷歌，但大多数解决方案是支持 Play 版本 1，它对 Play 版本 2 没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:04:08.233

不知道你有没有弄明白。

Japid for Play 2 中的 _layouts 已被弃用。您可以通过在 Global.java 中执行以下操作将任何目录导入任何模板

```
import cn.bran.japid.template.JapidRenderer;

public class Global extends JapidRenderer {
    @Override
    public void onStartJapid() {
        addImport("japidviews._layouts.*");
        addImport("japidviews._tags.*");
    }
} 
```

# oracle - oracle 10g 查询时间戳

> ID：14549908
> 
> 赞同：0
> 
> 时间：2013-01-27T17:15:00.770
> 
> 标签：oracle, oracle10g, date-arithmetic

`act_start timestamp(6)`我在从具有Oracle 10 DB 中的列的表中查询时遇到问题。我想获取所有超过 10 天的行（`act_start`字段值从当天起超过 10 天的行），但我失败了。

我尝试了不同的查询，但它们不起作用

例如：

```
select act_start 
  from wfmactionstates_tab 
 where act_start < (systimestamp -10). 
```

返回所有表格行；

```
select * 
  from wfmactionstates_tab 
 where cast(act_start as date) < (sysdate -10). 
```

返回所有表行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:34:50.950

正如其他人所观察到的，您的查询在 SQL 术语中是正确的。因此，如果他们返回所有行，则只有一个结论是可能的：*您的所有行都包含超过十天的数据*。

如果这不是您所期望的——而您在这里提出的问题表明事实并非如此——那么您的数据一定有问题。它很可能是 Y2K 问题的一个变体：不知何故，您的数据库中的数据缺少日期的世纪元素。因此，您认为 26-JAN-2013 在数据库中保存为 26-JAN-0013（或者可能 - 不太可能 - 26-JAN-1913）。显然那是十多天前的事了。

您可以很容易地检查是否是这种情况：

```
select distinct to_char(your_date, 'CC') from your_table; 
```

如果我是对的，这将不会返回`21`。那么问题就变成了，为什么你的数据库中所有的日期都有错误的世纪？对于编写数据输入子系统的开发人员来说，这是一个问题。

# javascript - 带有可排序的jQuery拖放

> ID：14549910
> 
> 赞同：1
> 
> 时间：2013-01-27T17:15:12.097
> 
> 标签：javascript, jquery, arrays, drag-and-drop, jquery-ui-sortable

我在尝试使用某些拖放元素上的可排序从 JS 中获取数组时遇到问题。可以在以下位置找到工作演示：

[例子](http://genepoolid.com/testbin/imapEditor.php)

我需要达到的目标：

1.  在图像上拖动项目，获取 x,y（完成）
2.  放置完所有项目后，使用 jQuery 可排序？获取具有 x,y 坐标的 id 数组。

数组（23456->{xpos:234,ypos:234},23456->{xpos:234,ypos:234},....等

我不知道如何将可排序绑定到仅放在图像上的项目，然后将这些值放入数组中

这是到目前为止的代码：

```
jQuery(function($){

$('.dragThis').bind('click', function(){
        $(this).css("border","3px solid #fff");

        $(this).draggable({
                            containment: $('body'),
                            drag: function(){
                                    $('#dropHere').droppable({
                                        accept: '.dragThis',
                                        over : function(){
                                        $(this).animate({'border-width' : '3px', 'border-color' : '#0f0'}, 500);

                                        }
                                    });

                                },
                            stop: function(){

                                    var position = $(this).position();
                                    var parentPos = $('#dropHere').offset();
                                    var xPos = position.left - parentPos.left;
                                    var yPos = position.top - parentPos.top;
                                    var finalOffset = $(this).position();
                                    var finalxPos = xPos;
                                    var finalyPos = yPos;
                                    $('#finalX').text('Final X: ' + finalxPos);
                                    $('#finalY').text('Final Y: ' + finalyPos);
                                    //$('.dragThis').sortable();
                                    console.log (finalxPos,finalyPos,$(this).attr("id"));
                                },
                            revert: 'invalid'
                            //connectToSortable: '#dropHere'
        });

    });

}); 
```

非常感谢任何指向正确方向的帮助。澄清一下，我将通过 AJAX 将值写入数据库以便稍后调用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:44:24.583

简单的解决方案：

1.  在他们自己的“drop”事件中为这些元素添加一个类，然后让所有这些元素都有一个选择器的类。

2.  在那之后，一个得心应手的`$.fn.each()`，`$.fn.offset()`会有所帮助的。

3.  `top`然后，您可以使用,`left`而不是您提到的`xpos`,来处理这些坐标`ypos`。

这是一个例子：

```
var coordinates = {};

$(".dropped").each(function(item) {
    coordinates[$(item).attr("id")] = $(item).offset();
}); 
```

# java - java - 当没有接受long的方法时，为什么java将long参数提升为float/double？

> ID：14549916
> 
> 赞同：31
> 
> 时间：2013-01-27T17:15:39.013
> 
> 标签：java, type-conversion, overloading

这是一个[SSCCE](http://sscce.org/)，它演示了所描述的（恕我直言，奇怪的）行为：

```
public class Test {

   public static void print(int param) {
       System.out.println("int");
   }

   public static void print(float param) {
       System.out.println("float");
   }

   public static void print(Long param) { //<--Wrapper type
       System.out.println("Long");
   }
   public static void main(String[] args) {
       long param = 100L;
       print(param);  // output == float
   }
} 
```

为什么java会这样做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-27T17:20:10.773

[*Java语言规范*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)对此非常清楚（强调我的）：

> ### 15.12.2 编译时步骤 2：确定方法签名
> 
> [...]
> 
> 1.  第一阶段（第 15.12.2.2 节）在**不允许装箱或拆箱**转换的情况下执行重载解决方案 [...] 如果在此阶段未找到适用的方法，则处理将继续到第二阶段。[...]
>     
>     
> 2.  第二阶段（第 15.12.2.3 节）执行重载解决方案，同时**允许装箱和拆箱**[...]
>     
>     
> 3.  第三阶段（第 15.12.2.4 节）允许将重载与可变参数方法、装箱和拆箱相结合。

也就是说，只在第一步`print(int)`中`print(float)`就可以适当了。后者匹配，不做进一步调查。

* * *

JLS 中也解释了此类规则的原因：

> 这保证了在 Java SE 5.0 之前在 Java 编程语言中有效的任何调用都不会因为引入可变参数方法、隐式装箱和/或拆箱而被视为模棱两可。

想象一下，您的`Test`类是针对 Java 1.4 编译的（在自动装箱之前）。在那种情况下，很明显：`print(float)`必须选择（假设我们同意为什么`long`to`float`被认为是安全的并且可以是隐式的......）因为它与参数`print(Long)`完全不兼容。`long`

稍后您针对 Java 5+ 编译相同的代码。编译器可以：

*   在这种情况下选择`print(Long)`更“*明显”。*因此，在升级到 Java 5 后，您的程序的行为会有所不同......

*   产生编译错误，因为调用不明确。因此，以前正确的代码不再在 Java 5 下编译（AFAIR 从未如此）

*   ...或保留旧语义并调用与 Java 1.4 下相同的方法

您现在应该明白为什么`print(float)`使用它了——因为它会在 Java 1.4 下被选择。Java 必须向后兼容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-27T17:51:45.250

它选择的原因`float`是`Long`后来添加了自动装箱，并且出于向后兼容性的原因，它必须进行与以往相同的调用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-27T17:35:17.100

Tomasz Nurkiewicz 指出了规范的相关部分（[Java SE 7 JLS 中的 15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)），但为什么要这样做呢？为了向后兼容，面向 1.4 和更早版本的源代码应继续调用相同的重载方法。因此，必须忽略 1.5 的功能，并且只有在代码无法编译时才应考虑自动装箱。

至于为什么从`long`to转换`float`可能是隐含的——这只是一个有问题的设计选择。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-27T17:22:17.643

查看文档

[第 5 章转换和促销](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)

> 5.1.2\. 扩大基元转换
> 
> 原始类型的 19 种特定转换称为扩展原始类型转换：
> 
> *   字节到 short、int、long、float 或 double
> *   短到 int、long、float 或 double
> *   char 到 int、long、float 或 double
> *   int 到 long、float 或 double
> *   长时间浮动或加倍
> *   浮动加倍

所以转换形式`long`是`float`符合规则的。

# php - MySQL：每 x / 每 y 分组表

> ID：14549919
> 
> 赞同：0
> 
> 时间：2013-01-27T17:16:01.900
> 
> 标签：php, mysql, sql, grouping

是否可以执行单个 SQL 查询来对表进行两次分组？

假设我有一张属于不同群体的人的桌子。我想看看：

```
group1  males    14
group1  females  15
group2  males    23
group2  females  25
... 
```

实现这一目标的最佳一般方法是什么？是否可以使用单个查询或我需要使用 UNION 运算符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:17:40.930

是的，在mysql中是可能的......

```
Select * from table GROUP BY column1, column2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:17:43.447

是的，有可能

```
group by your_group_column , gender 
```

# ios - 运行非故事板应用程序的运行时错误

> ID：14549924
> 
> 赞同：1
> 
> 时间：2013-01-27T17:16:15.500
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller, xib

我正在编写一个 iOS 应用程序；没有 ARC，也没有故事板。我在导航控制器中有一个视图控制器。它应该有推到第二个视图的表格视图和导航按钮。这是我得到的错误：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ViewController" nib but the view outlet was not set.'
*** First throw call stack:
(0x1c8d012 0x10cae7e 0x1c8cdeb 0xf2f18 0xf3418 0xf3648 0xf3882 0x42a25 0x42dbf 0x42f55 0x4bf67 0x2a88 0xf7b7 0xfda7 0x10fab 0x22315 0x2324b 0x14cf8 0x1be8df9 0x1be8ad0 0x1c02bf5 0x1c02962 0x1c33bb6 0x1c32f44 0x1c32e1b 0x107da 0x1265c 0x2442 0x2375)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

AppDelegate 中的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.viewCon = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
    self.navCon = [[UINavigationController alloc]initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor= [UIColor greenColor];
    self.viewCon.title= @"First View";

    self.tblView = [[UITableView alloc] init];

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];

    self.navBar = [[UINavigationBar alloc] init];

    self.viewCon.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Second View"  style:UIBarButtonSystemItemAdd target:self action:(nil)];

    [self.window addSubview:self.navBar];
    self.window.rootViewController = self.viewCon;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

在这个阶段，我什至无法运行应用程序。可能是什么问题？最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:18:16.647

> 加载了“ViewController”笔尖，但未设置视图出口。

您似乎忘记将`view`视图控制器的出口连接到 ViewController.xib 文件中的实际视图。

您的 xib 文件有一个文件的所有者。您可能已将其设置为 a `ViewController`（我想它是 的子类`UIViewController`）。现在，如果您转到右侧窗格并显示绑定窗格（最后一个，带有一个小箭头），您将看到视图控制器有一个名为`view`: 从其右侧的小圆圈拖动到您在 xib 中创建的视图。

# php - php不遵循函数结构

> ID：14549925
> 
> 赞同：-1
> 
> 时间：2013-01-27T17:16:19.513
> 
> 标签：php, mysqli

> **可能重复：**
> [遇到函数结构不遵循的问题（PHP）](https://stackoverflow.com/questions/14542821/having-trouble-with-functions-structure-not-following-php)

**问题：**每次我提交按钮时，它都不会在函数`answerSubmit`中显示回声，而是返回到函数。`student answers``StudentAnswers()``pickSession()`

我在这里有一个演示，你可以用它来看看发生了什么：[DEMO](http://helios.hud.ac.uk/u0867587/Mobile_app/Text30.php)

当您打开演示时，从评估（会话）下拉菜单中选择评估。您将看到另外 2 个下拉菜单`students`并`questions`出现下拉菜单。现在，如果您单击`answerSubmit`按钮（`Get Students Answers`按钮），那么它应该显示回声说明`student answers`，但是您可以看到它返回到仅显示评估下拉菜单。为什么是这样？

下面是演示的代码：

```
function PickSession()
    {

//mysqli code retreiving data for options in assessments drop down menu goes here ....  

        ?>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
            <p>
            <strong>Asessments:</strong>
            <select name="session" id="sessionsDrop">
                <option value="">Please Select</option>
                <?php
                    while ( $sessionqrystmt->fetch() ) {
                        $sv = $dbSessionId;
                        if(isset($_POST["session"]) && $sv == $_POST["session"]) 
                            echo "<option selected='selected' value='$sv'>" .
                                  $dbSessionName .
                                  " - " .
                                  date('d-m-Y',strtotime($dbSessionDate)) .
                                  " - " . 
                                  date('H:i',strtotime($dbSessionTime)) .
                                 "</option>" . PHP_EOL;
                        else
                            echo "<option value='$sv'>" .
                                  $dbSessionName . 
                                  " - " . 
                                  date('d-m-Y',strtotime($dbSessionDate)) . 
                                  " - " .
                                  date('H:i',strtotime($dbSessionTime)) .
                                  "</option>" . PHP_EOL;
                    }
                ?>
            </select>
            </p>
            <input id="sessionSubmit" type="submit" value="Submit Assessments" name="sessionSubmit" />
        </form>
    <?php
    }

    function SessionIsSubmitted()
    {
        if(isset($_POST['sessionSubmit'])) // we have subbmited the second form
        {
            if(empty($_POST["session"])) // We picked the "Please select" option
            { ?>
                    Please Select an Assessment

            <?php 
                return false;
            }
            else // All is ok
            {
                return true;
            }
        }
        return false;
    }

    function ShowAssessment()
    {   

//mysqli code retreiving data for options in students drop down menu goes here ....  

    if($studentnum == 0){ ?>

    There are no Students who have currently taken this Assessment

    <?php } else { 

//mysqli code retreiving data for options in questions drop down menu goes here .... 

            ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
    <p>
    <strong>Student:</strong>
    <select name="student" id="studentsDrop">
    <option value="All">All</option>
    <?php
    while ( $currentstudentstmt->fetch() ) {
    $stu = $dbStudentId;
    if(isset($_POST["student"]) && $stu == $_POST["student"]) 
        echo "<option selected='selected' value='$stu'>" .
             $dbStudentAlias . " - " . $dbStudentForename . " " .
             $dbStudentSurname . "</option>" . PHP_EOL;
    else
        echo "<option value='$stu'>" . $dbStudentAlias . " - " . 
              $dbStudentForename . " " . $dbStudentSurname . 
              "</option>" . PHP_EOL;
    }
    ?>
    </select>
    </p>

    <p>
    <strong>Question:</strong>
    <select name="question" id="questionsDrop">
    <option value="All">All</option>
    <?php
    while ( $questionsstmt->fetch() ) {
    $ques = $dbQuestionId;
    if(isset($_POST["question"]) && $ques == $_POST["question"]) 
        echo "<option selected='selected' value='$ques'>" . 
              $dbQuestionNo . "</option>" . PHP_EOL;
    else
        echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
    }
    ?>
    </select>
    </p>

    <input id="answerSubmit" type="submit" value="Get Student's Answers" name="answerSubmit" />
    </form>

    <?php
    }
    }

    function StudentAnswersIsSubmitted()
    {
        if(isset($_POST['answerSubmit'])) // we have subbmited the second form
        {

        return false;

        }
        return false;
    }

    function StudentAnswers()
    {

    echo "student answers";

    }

    ?> 
```

...

```
 <body>

    <?php

            PickSession(); // Show the thing to pick session
            if(SessionIsSubmitted()) // When session is picked
            {
              ShowAssessment(); // Show students and questions information
              if(StudentAnswersIsSubmitted()) // Student Answers button is submitted
                {
                  StudentAnswers();
                }

            }

    ?>

    </body> 
```

**更新：**

```
function PickSession()
    {

//mysqli code retreiving data for options in assessments drop down menu goes here ....  

        ?>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
               <p>
            <strong>Asessments:</strong>
            <select name="session" id="sessionsDrop">
                <option value="">Please Select</option>
                <?php
                    while ( $sessionqrystmt->fetch() ) {
                        $sv = $dbSessionId;
                        if(isset($_POST["session"]) && $sv == $_POST["session"]) 
                            echo "<option selected='selected' value='$sv'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                        else
                            echo "<option value='$sv'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                    }
                ?>
            </select>
            </p>
            <input id="sessionSubmit" type="submit" value="Submit Assessments" name="sessionSubmit" />
        </form>
    <?php
    }

function SessionIsSubmitted()
{
        if(isset($_POST["session"]) && empty($_POST["session"])) // We picked the "Please select" option
        { ?>
            <div class="red">
                Please Select an Assessment
            </div>
        <?php 
            return false;
        }
    else if(!isset($_POST["session"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

    function ShowAssessment()
    {   

//mysqli code retreiving data for options in students drop down menu goes here ....  

    if($studentnum == 0){ ?>

    There are no Students who have currently taken this Assessment

    <?php } else { 

//mysqli code retreiving data for options in questions drop down menu goes here .... 

            ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
    <p>
    <input type="text" name="session" value="<?php echo $_POST['session']; ?>">
    <strong>Student:</strong>
    <select name="student" id="studentsDrop">
    <option value="All">All</option>
    <?php
    while ( $currentstudentstmt->fetch() ) {
    $stu = $dbStudentId;
    if(isset($_POST["student"]) && $stu == $_POST["student"]) 
        echo "<option selected='selected' value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
    else
        echo "<option value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
    }
    ?>
    </select>
    </p>

    <p>
    <strong>Question:</strong>
    <select name="question" id="questionsDrop">
    <option value="All">All</option>
    <?php
    while ( $questionsstmt->fetch() ) {
    $ques = $dbQuestionId;
    if(isset($_POST["question"]) && $ques == $_POST["question"]) 
        echo "<option selected='selected' value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
    else
        echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
    }
    ?>
    </select>
    </p>

    <input id="answerSubmit" type="submit" value="Get Student's Answers" name="answerSubmit" />
    </form>

    <?php
    }
    }

function StudentAnswersIsSubmitted()
{

if(!isset($_POST["answerSubmit"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

    ?> 
```

**更新 2：**

这是以下代码的演示：[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text29.php)

```
function PickModule()
{ ?>
    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
        <?php            
        $moduleactive = 1;

        $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

        //mysqli code for modules drop down menu

        ?>
        <strong>Module:</strong>
        <select name="module" id="modulesDrop">
            <option value="">Please Select</option>
            <?php
            while($sqlstmt->fetch()) { 
                $ov = $dbModuleNo . "_" . $dbModuleName . "_" . $dbModuleId; 
                if(isset($_POST["module"]) && $ov == $_POST["module"]) 
                    echo "<option selected='selected' value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL; 
                else 
                    echo "<option value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
             } 
            ?>
        </select>
        <br>
        <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
    </form>
<?php }
function ModuleIsSubmitted()
{
    if(isset($_POST["module"]) && empty($_POST["module"])) // We picked the "Please select" option
    { ?>
            Please Select a Module
    <?php 
        return false;
    }
    else if(!isset($_POST["module"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;
}
function PickSession()
{

    $dataTransfered = explode( "_" , $_POST["module"] );
    $moduleNo = $dataTransfered[0];
    $moduleName = $dataTransfered[1];
    $moduleId = $dataTransfered[2];

    //Get data from database
    $sessionquery = "
        SELECT s.SessionId, SessionName, SessionDate, SessionTime, ModuleId, SessionActive, Complete
        FROM Session s
        INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
        WHERE
        (ModuleId = ? AND Complete = ?)
        ORDER BY SessionName 
        ";
    $complete = 1;

//mysqli code for assessments drop down menu  

    ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post"> 
        <input type="hidden" name="module" value="<?php echo $_POST['module']; ?>">
        <p>
            <strong>Selected Module: </strong><?php echo $moduleNo ." - ". $moduleName; ?> 
        </p>
    <?php if ($sessionnum == 0 ){ ?>
        <div class="red">
            Sorry, You have No Assessments under this Module
        </div>
    <?php } else { ?>
           <p>
        <strong>Asessments:</strong>
        <select name="session" id="sessionsDrop">
            <option value="">Please Select</option>
            <?php
                while ( $sessionqrystmt->fetch() ) {
                    $sv = $dbSessionId;
                    if($dbSessionActive == 0){
                        $class = 'red';
                    }else{
                        $class = 'green';   
                    }
                    if(isset($_POST["session"]) && $sv == $_POST["session"]) 
                        echo "<option selected='selected' value='$sv' class='$class'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                    else
                        echo "<option value='$sv' class='$class'>" . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "</option>" . PHP_EOL;
                }
            ?>
        </select>
        </p>
        <input id="sessionSubmit" type="submit" value="Submit Assessments" name="sessionSubmit" />
    </form>
<?php
}
}
function SessionIsSubmitted()
{
        if(isset($_POST["session"]) && empty($_POST["session"])) // We picked the "Please select" option
        { ?>
            <div class="red">
                Please Select an Assessment
            </div>
        <?php 
            return false;
        }
    else if(!isset($_POST["session"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

function ShowAssessment()
{   

$studentactive = 1;

$currentstudentqry = "
SELECT
st.StudentId, st.StudentAlias, st.StudentForename, st.StudentSurname
FROM
Student_Session ss 
INNER JOIN
Student st ON ss.StudentId = st.StudentId
WHERE
(ss.SessionId = ? AND st.Active = ?)
ORDER BY st.StudentAlias
";

//mysqli code for students drop down menu

if($studentnum == 0){ ?>

<div class="red">
There are no Students who have currently taken this Assessment
</div>
<?php } else { 

$questionsqry = "
SELECT
QuestionId, QuestionNo
FROM
Question
WHERE
(SessionId = ?)
ORDER BY QuestionNo
";

//mysqli code for questions drop down menu

        ?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">         
<p>
<input type="text" name="session" value="<?php echo $_POST['session']; ?>">
<strong>Student:</strong>
<select name="student" id="studentsDrop">
<option value="All">All</option>
<?php
while ( $currentstudentstmt->fetch() ) {
$stu = $dbStudentId;
if(isset($_POST["student"]) && $stu == $_POST["student"]) 
    echo "<option selected='selected' value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
else
    echo "<option value='$stu'>" . $dbStudentAlias . " - " . $dbStudentForename . " " . $dbStudentSurname . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<p>
<strong>Question:</strong>
<select name="question" id="questionsDrop">
<option value="All">All</option>
<?php
while ( $questionsstmt->fetch() ) {
$ques = $dbQuestionId;
if(isset($_POST["question"]) && $ques == $_POST["question"]) 
    echo "<option selected='selected' value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
else
    echo "<option value='$ques'>" . $dbQuestionNo . "</option>" . PHP_EOL;
}
?>
</select>
</p>

<input id="answerSubmit" type="submit" value="Get Student's Answers" name="answerSubmit" />
</form>

<?php
}
}

function StudentAnswersIsSubmitted()
{

if(!isset($_POST["answerSubmit"]))
    {
        return false;
    }
    else // All is ok
    {
        return true;
    }
    return false;

}

function StudentAnswers()
{

echo "student answers";

}

?> 
```

…………

```
<?php

    PickModule(); // Show the thing to pick module

    if(ModuleIsSubmitted()) // When module is picked
    {
        PickSession(); // Show the thing to pick session
        if(SessionIsSubmitted()) // When session is picked
        {
          ShowAssessment(); // Show students and questions information
          if(StudentAnswersIsSubmitted()) // Student Answers button is submitted
            {
              StudentAnswers();
            }

        }

    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:26:17.963

当您提交第二个表单时，该`SessionIsSubmitted`函数不会通过，因为您页面上的第二个表单不包含所需的信息 (sessionSubmit)。仅在第`sessionSubmit`一个表单内，因此不会被提交。

你需要在你的第二个表格中有一些东西可以让你通过第一个表格测试

# c# - 从 LDAP 获取所有组和子组以及所有成员

> ID：14549929
> 
> 赞同：0
> 
> 时间：2013-01-27T17:16:33.823
> 
> 标签：c#, active-directory, ldap

我正在尝试从活动目录中获取所有组及其子组和每个组的成员，然后将其子组的每个组链接到树结构中，然后将结果存储在数据库中，这样我就可以找出什么是父级和子级每组。

如何转换以下代码`DirectoryServices`来测试性能？

```
public static List<Group>getUsers()
    {

        // create the "context" in which to operate - your domain here, 
        // as the old-style NetBIOS domain, and the container where to operate in
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "lin.proximus.com");

        // define a "prototype" - an example of what you're searching for
        // Here: just a simple GroupPrincipal - you want all groups
        GroupPrincipal prototype = new GroupPrincipal(ctx);

        // define a PrincipalSearcher to find those principals that match your prototype
        PrincipalSearcher searcher = new PrincipalSearcher(prototype);

        // define a list of strings to hold the group names        
        List<Group> groupNames = new List<Group>();
        int counter = 0;
        // iterate over the result of the .FindAll() call
        foreach (var gp in searcher.FindAll())
        {

            // cast result to GroupPrincipal
            GroupPrincipal groupPrincipal = gp as GroupPrincipal;

            // if everything - grab the group's name and put it into the list
            if (groupPrincipal == null) continue;

            Group group = new Group();
            group.Name = groupPrincipal.Name;
            group.Description = groupPrincipal.Description;
            AddSubGroups(groupPrincipal, ref group);
            AddMemebers(groupPrincipal, ref group);
            counter++;
            groupNames.Add(group);
            Console.WriteLine(counter);
            if (counter > 10000)
                return groupNames;
        }
        return groupNames;
    }

    private static void AddSubGroups(GroupPrincipal gp,ref Group gr)
    {
        gr.SubCounts = 0;
        if (gp.GetGroups().Count() <= 0) return;

        gr.SubCounts = gp.GetGroups().Count();
        gr.SubGroups = new List<string>();
        foreach (var principal in gp.GetGroups())
        {
            gr.SubGroups.Add(principal.Name);
        }
    }

    private static void AddMemebers(GroupPrincipal gp, ref Group gr)
    {
        if (gp.GetMembers().Count() <= 0) return;

        gr.Users = new List<string>();

        foreach (Principal principal in gp.GetMembers())
        {
            gr.Users.Add(principal.Name);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:29:11.710

我赞同 Marc 的建议 - 使用分页和适当的 pagesize 属性值来提高性能。AFAIK，如果您想获得可能具有> 999 个值的属性（例如组的成员资格），分页实际上是必不可少的。

# asp.net - 如何避免 ASP.NET 中的 TextChanged 事件

> ID：14549932
> 
> 赞同：0
> 
> 时间：2013-01-27T17:16:40.153
> 
> 标签：asp.net, textbox, viewstate, textchanged

我有一个文本框和一个回发按钮。

```
<asp:TextBox ID="TextBox1" runat="server" OnTextChanged="TextBox1_TextChanged1"     EnableViewState="false"></asp:TextBox><span></span>
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

所以，我只需要在文本更改时触发 TextChanged 事件（多么讽刺），就像在 EnableViewState 为真时触发一样。我无法取消订阅事件或在其他地方订阅它或启用 ViewState。我试图从 HiddenField 的 TextBox 中保存文本，然后检查它是否已更改。这是代码

```
 protected void Page_Load(object sender, EventArgs e) {
    if (HiddenField1.Value != TextBox1.Text) {
        HiddenField1.Value = TextBox1.Text;
        TextBox1.Text = HiddenField1.Value;
    }           
} 
```

但是我不知道当文本没有更改并且不触发事件时该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:01:03.377

问题是在禁用 ViewState 时从 TextBox 保存值。将它保存在 HiddenField 中并不是一个好主意，因为我们可以在 Page_Load 上从 HiddenField 中获取值，但我们需要在 TextBox init 中获取它。但是，如果我们将 TextBox 保存到 Session 变量中，这个问题就会消失。这是代码：

```
protected void TextBox1_TextChanged1(object sender, EventArgs e) {
    Session["text"] = TextBox1.Text;
}
protected void TextBox1_Init(object sender, EventArgs e) {
    if(Session["text"]!=null)TextBox1.Text = Session["text"].ToString();
} 
```

在 textchanged 事件上保存会话变量中的值并在文本框初始化时恢复它。比较在框架级别上运行。

# sql - 标识列与复合主键分开

> ID：14549934
> 
> 赞同：1
> 
> 时间：2013-01-27T17:16:41.793
> 
> 标签：sql, sql-server, database, database-design

我有一张代表足球比赛的表格：

*   日期
*   对手

我觉得 {Date,Opponent} 是主键，因为在这张表中，每个日期永远不会有超过一个对手。问题是当我在其他表中创建外键约束时，我必须在其他表中同时包含 Date 和 Opponent 列：

足球比赛统计表：

*   日期
*   对手
*   事件（进球、黄牌等）

理想情况下，我希望拥有：

足球比赛表：

*   ID
*   日期
*   对手

足球比赛统计表：

*   足球比赛ID
*   事件（进球、黄牌等）

其中 SoccerMatch.ID 是唯一 ID（但不是主键）， {Date,Opponent} 仍然是主键。

问题是 SQL Server 似乎不允许我将 ID 定义为唯一标识，而 {Date,Component} 是主键。当我转到 ID 的属性时，信号唯一标识的部分以“否”显示为灰色。

（我假设每个人都同意我应该尝试实现上述目标，因为它是一个更好的设计？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:20:24.363

我认为大多数人不会使用图形设计器来执行此操作，因为阻止它的是图形设计器，而不是 SQL Server。尝试在查询窗口中运行 DDL：

```
ALTER TABLE dbo.YourTable ADD ID INT IDENTITY(1,1);
GO
CREATE UNIQUE INDEX yt_id ON dbo.YourTable(ID);
GO 
```

现在您可以在其他表中引用此列没有问题：

```
CREATE TABLE dbo.SomeOtherTable
(
  MatchID INT FOREIGN KEY REFERENCES dbo.YourTable(ID)
); 
```

也就是说，我发现列名`ID`完全没用。如果它是 a `MatchID`，为什么不在`MatchID`模式中出现的任何地方调用它呢？是的，它在 PK 表中是多余的，但恕我直言，整个模型的一致性更为重要。

就此而言，为什么你的桌子被称为`SoccerMatch`？你有其他类型的比赛吗？我认为它将`Matches`具有唯一的 ID = `MatchID`。这样，如果您以后有不同类型的比赛，您不必为每项运动创建一个新表 - 只需添加`type`某种类型的列。如果你只踢过足球，那`SoccerMatch`有点多余，不是吗？

另外我建议键和唯一索引是相反的。如果您不打算将多列键用于外部引用，那么至少对我而言，让 PK 成为您在其他表中引用的内容更为*直观*。所以我想说：

```
CREATE TABLE dbo.Matches
(
  MatchID INT IDENTITY(1,1),
  EventDate DATE, -- Date is also a terrible name and it's reserved
  Opponent <? data type ?> / FK reference?
);

ALTER TABLE dbo.Matches ADD CONSTRAINT PK_Matches
  PRIMARY KEY (MatchID);

ALTER TABLE dbo.Matches ADD CONSTRAINT UQ_Date_Opponent
  UNIQUE (EventDate, Opponent); 
```

# linux - ARM的交叉编译Expect

> ID：14549935
> 
> 赞同：2
> 
> 时间：2013-01-27T17:16:43.667
> 
> 标签：linux, arm, cross-compiling, embedded-linux, expect

我已经下载[了 expect5.4](http://sourceforge.net/projects/expect/)。我正在尝试为运行精简版 linux 的 ARM(PandaBoard) 交叉编译它。

在配置的初始设置中，我尝试

```
Shell$ ./configure --host=ARM
configure: WARNING: If you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used.
checking for correct TEA configuration... ok (TEA 3.9)
configure: configuring expect 5.45
checking for Tcl configuration... found /home/user1/scripts/tcl8.6.0/unix/tclConfig.sh
checking for existence of /home/user1/scripts/tcl8.6.0/unix/tclConfig.sh... loading
configure: --prefix defaulting to TCL_PREFIX /usr/local
configure: --exec-prefix defaulting to TCL_EXEC_PREFIX /usr/local
checking for ARM-gcc... /home/user1/toolchain/toolchain/arm-none-linux-gnueabi/bin/arm-none-linux-gnueabi-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether /home/user1/toolchain/toolchain/arm-none-linux-gnueabi/bin/arm-none-linux-gnueabi-gcc accepts -g... yes
checking for /home/user1/toolchain/toolchain/arm-none-linux-gnueabi/bin/arm-none-linux-gnueabi-gcc option to accept ANSI C... none needed
checking how to run the C preprocessor... /home/user1/toolchain/toolchain/arm-none-linux-gnueabi/bin/arm-none-linux-gnueabi-gcc -E
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... yes
checking for ARM-ranlib... no
checking for ranlib... ranlib
checking for egrep... grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
..
.. 
..
..
..
checking for openpty... no
checking for openpty in -lutil... yes
checking if running Sequent running SVR4... no
checking build system type... i686-pc-linux-gnu
checking host system type... Invalid configuration `ARM': machine `ARM' not recognized
configure: error: /bin/bash tclconfig/config.sub ARM failed 
```

**更新：** 在使用 ./configure --host=arm 编译时，我现在得到的错误是

```
checking for sysconf... yes
checking for strftime... yes
checking for strchr... yes
checking for timezone... yes
checking for siglongjmp... yes
checking for memcpy... yes
checking if WNOHANG requires _POSIX_SOURCE... configure: error: Expect can't be cross compiled 
```

它能够选择 arm-gcc 但由于某种原因它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:52:04.800

使用（小写）你会更进一步`--host=arm`，但不多：expect 只是不想被交叉编译。克服这一点需要对`configure.in`. 如果您只想交叉编译，那么对它们进行处理可能是合理`expect`的，但如果还有很多其他东西，您最好设置一些可以运行已编译二进制文件的环境（[scratchbox](http://www.scratchbox.org)或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-20T09:36:31.047

`Expect`（版本 = 5.45.4）在[buildroot 2019.11](https://buildroot.org/)中可用，并且支持 PandaBoard。

你可以

1.  从项目中下载“buildroot 2019.11”。
2.  提取它
3.  `make pandaboard_defconfig`在里面跑`buildroot-folder`
4.  由于依赖关系，运行`make menuconfig`并启用`TCL`（-> 目标包 -> 解释器语言和脚本）然后（-> 目标包 -> 解释器语言和脚本）`expect`

5.  运行`make`以构建整个事物并从 `output/build/expect`文件夹中获取可执行文件

# android - 即使手机被锁定也开始活动

> ID：14549938
> 
> 赞同：0
> 
> 时间：2013-01-27T17:16:57.563
> 
> 标签：android, broadcastreceiver

我想开始一项活动，就像警报开始响起时使用的活动一样，即使手机被锁定并且我可以单击它，也会出现对话框关闭。我有这个站点的代码，但是当我使用广播接收器扩展时我不知道如何调用它。它总是说

> 该方法`getWindow()`是未定义的类型...

每次我编码时，我似乎总是得到这个错误，这是什么意思。

```
public void unlockScreen() {
    Window window = getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
            + WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
            + WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
            + WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:19:49.090

**为SCREEEN_ON intent**注册 boradcast 接收器。随着屏幕进入您的广播接收器 onRecieve(..) 将执行，使用您在 onRecieve 方法中的帖子中所写的标志开始您的活动。

# .net - 寻找一种使用实体框架删除一组行的简单方法

> ID：14549939
> 
> 赞同：0
> 
> 时间：2013-01-27T17:17:05.210
> 
> 标签：.net, entity-framework, entity-framework-4

有没有办法使用实体框架根据谓词规则从数据库中删除一组行？

只是一个不起作用的例子：

```
context.entity.remove(i => i.name == "name"); 
```

我今天的做法并不简单。我将不得不逐项循环和删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:05:42.800

您可以使用 EntityFramework.Extended 库。 [https://github.com/loresoft/EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)

例子：

```
//delete all users where FirstName matches
context.Users.Delete(u => u.FirstName == "firstname"); 
```

这种方法不会从数据库中检索行。

# jquery-ui - Angular 可排序 orderby 对象属性

> ID：14549942
> 
> 赞同：3
> 
> 时间：2013-01-27T17:17:24.570
> 
> 标签：jquery-ui, angularjs, jquery-ui-sortable

我有一个由转发器中对象的属性排序的转发器。

```
<div id='#TodoList' >
    <div ng-repeat="todo in todos | filter:left | orderBy:'priority'">
        {{ todo.text }}
    </div>
</div> 
```

范围如下所示：

```
$scope.todos = [
    {text: 'do 1', priority: 1},
    {text: 'do 2', priority: 2},
] 
```

现在我想`#TodoList`用 jquery ui 进行排序
`jQuery("#TodoList").sortable();`

如何根据任务新的可排序位置更新每个任务的优先级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T22:06:57.913

这是一个工作示例。那里可以改进一些事情......但它确实有效。 [http://jsfiddle.net/QfERt/30/](http://jsfiddle.net/QfERt/30/)

```
$("#TodoList").sortable({
   update: function( event, ui ) {
     var uiArray = $("#TodoList").sortable('toArray');
     for (var i = 0; i < $scope.todos.length; i++) {
       $scope.todos[i].priority = uiArray.indexOf($scope.todos[i].text) + 1;
     }
     $scope.$apply();
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:54:22.503

jsFiddle: [http://jsfiddle.net/AdrianMigraso/BTDdm/](http://jsfiddle.net/AdrianMigraso/BTDdm/)

## your HTML

```
<div id='#TodoList' ng-controller="MyCtrl">
    <ul id="sortable">
        <li class="ui-state-default" ng-repeat="todo in todos | filter:left | orderBy:'priority'">
            <span class="ui-icon ui-icon-arrowthick-2-n-s" ></span>
            {{ todo.text }}
        </li>
    </ul>
</div> 
```

## you AngularJS code

```
function MyCtrl($scope) {
    $scope.todos = [
        {text: 'do 1', priority: 1},
        {text: 'do 2', priority: 2},
        {text: 'do 5', priority: 5},
        {text: 'do 3', priority: 3},
        {text: 'do 4', priority: 4},
    ];
    $scope.$watch('todos', function(newVal,oldVal) {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    });

} 
```

# c - 使用字符数据类型的异常输出

> ID：14549946
> 
> 赞同：2
> 
> 时间：2013-01-27T17:17:45.203
> 
> 标签：c

我在 Turbo c 3.1 中用 C 编写了一个练习代码。我的目标是获得字符输出。我的代码如下：

```
 #include<stdio.h>
    #include<conio.h>

    void main(){

       char a[10],b;
       int i;

       clrscr();

       for(i=0;i<10;i++)
          a[i]='$';

       for(i=0;i<10;i++){
          b=getchar();
          a[i]=b;
       }

           for(i=0;i<10;i++)
      printf("%c",a[i]);

       getch();
   } 
```

在这里，我必须输入 10 个字符，但执行后我只得到 5 个字符。我无法解决问题。你能帮我么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:21:34.880

当您执行 getchar() 时，它会读取一个字符。

因此，当您输入 a 之类的内容，然后输入时，您输入的内容实际上是 2 个字符，即`a`和`'\n'`。因此，您的输出中只有 5 个字符和 5 个 '\n'。

尝试这个

```
#include<stdio.h>
#include<conio.h>

void main(){

   char a[10],b;
   int i;

   clrscr();

   for(i=0;i<10;i++)
      a[i]='$';

   for(i=0;i<10;i++){
      b=getchar();
      if(b=='\n'){i--;continue;}
      a[i]=b;
   }

   for(i=0;i<10;i++)
   printf("%c",a[i]);

   getch();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T17:24:33.183

你可以做一个简单的 scanf 来解决你的问题

```
scanf("%c",&a[i]); 
```

但是，要了解 getchar() 的作用，每次调用它时，它都会读取输入的下一个字符并将其返回给您，而与字符无关。在您的情况下，您在输入数字后键入一个`\n`字符。因此它会`\n`在每个数字之后存储您的第一个数字。

你可以做这个检查你是否沉迷于`getchar()`

```
 if(c=getchar()) == '\n')
         c=getchar(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T17:22:42.713

> 那么如何进行更正，den？

怎么样：

```
int ch;

while (i < 10 && (ch = getchar()) != EOF)
    if (ch != '\n')
        a[i++] = ch; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T17:24:27.903

更简单的解决方案可能使用：

`scanf("%c",&a[i]);`

代替 ：

`b = getchar();`
`a[i] = b;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T17:24:10.933

可能，您可以使用`getch()`or`getche()`代替`getchar()`来读取字符。

# objective-c - 分块加密数据

> ID：14549947
> 
> 赞同：0
> 
> 时间：2013-01-27T17:17:48.247
> 
> 标签：objective-c, encryption

前段时间我在这个论坛上问过如何在不将它们完全加载到内存的情况下加密 iPhone 上的大文件。虽然没有得到答案。我不想将兆字节的数据加载到内存中，只是为了再次加密它们……在内存中。iDevices 的内存非常有限，所以我希望加密引擎加密文件而不是内存中的数据，而不是将整个文件加载到内存中。我不是 Objective-c 方面的专家，所以我没有找到使用 Security.framework 的方法。相反，我编写了一个类，它以指定大小的块读取源文件，加密它们并写入目标文件。这样我就不会将整个文件读入内存，从而解决了我的问题。但是……这会引发另一个完全不同的问题吗？如果我将文件分成 N 部分，加密会受到影响吗？分别加密这些部分，然后将结果加入加密文件？我几乎没有密码学知识，所以我想确定我的方法是否不会损害密码算法（我使用的是 AES 128 位）。

感谢您分享您的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:07:05.400

文件的加密不会因分块完成而受到影响，因为加密总是在小块中完成。AES（您在之前的问题中似乎使用的）的块大小为 128 位。

# php - 在现有 Web 应用程序上实现游戏中心模块的想法

> ID：14549950
> 
> 赞同：0
> 
> 时间：2013-01-27T17:18:04.620
> 
> 标签：php, node.js, codeigniter, websocket, socket.io

我有一个运行良好的 CodeIgniter MVC Web 应用程序。最近，我的客户要求我在这个 Web 应用程序中添加一个游戏中心模块，我们可以在开发它们时添加游戏模块，他们想要添加的第一个游戏是西洋双陆棋。

所以游戏中心本身基本上是现有MVC应用程序中的一个新控制器，因此游戏中心和mvc应用程序可以共享同一个用户会话。

但是对于步步高模块，我应该使用哪种方法？

我的想法：

*   一个 node.js 应用程序，用于实现用户之间的点对点连接。
*   可以与节点服务器通信的基于 Flash 或 Java / Javascript 的双陆棋游戏。
*   Flash 游戏，使用 Adob​​e 的 Cirrus ( [http://labs.adobe.com/technologies/cirrus/](http://labs.adobe.com/technologies/cirrus/) ) 提供 P2P 游戏体验。
*   一个类似 php 的 web 服务模块，用于处理来自游戏客户端的各种请求（在这种方法中，游戏客户端可以写成任何东西）

考虑到所有游戏模块都必须有用户对用户聊天模块，我应该选择哪种方式？这些方法的优点/缺点是什么，或者我想不出的任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:38:53.063

前端的 Flash 应用程序，因为它安装在大多数计算机中，并且在所有浏览器中的行为都是相同的（与 Javascript 相比，您必须使 UI 和逻辑适应每个浏览器的 JS 实现）。

用于点对点的 Node.JS 后端。您甚至可以使用 RTMFP（查看 ArcusNode 或其他 p2p node.js 实现）。

# jquery - 防止图像被拖到桌面，但不是在拖放重新排序时

> ID：14549953
> 
> 赞同：1
> 
> 时间：2013-01-27T17:18:17.397
> 
> 标签：jquery, image, drag-and-drop, draggable

我正在开发 CodeIgniter 中的拖放模块。为了更好地理解，我需要分享图片：

![在此处输入图像描述](../Images/46dbb95cfd3d5652249a1d6998f2d0b5.png)

上图，描述了我按住蓝色区域 li 拖动时的场景。但是现在当我按住图像拖动时，会出现这个问题：

![在此处输入图像描述](../Images/ebb7c945d3b7613391d87fe1b5b50d8a.png)

图像正在从它所在的 li 移动或拖动。它刚刚脱离了它在 li 中的位置，因此 li 在图像移动时保持在原来的位置。

所以我使用了以下代码：

```
$(".img").mousedown(function(){
              return false;
             }); 
```

其中 .img 是每个 li 下的 img src 的类，因此图像不会从 li 中拖出。

但现在的问题是，如果我按住图像拖动，li 也不会被拖动。我想要一些可以拖动图像的方式，并且 li 会被它锁定，这样我就可以通过拖动图像来拖动 li。图像不应单独拖动，li 也应随之移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:57:42.903

相信你的答案就在这里：[jquery drag image](https://stackoverflow.com/questions/1019873/jquery-drag-image)

换句话说，这样做：

```
$(".img").draggable(); 
```

并且不要忘记在您的 HTML 文件中包含 jQuery UI。

# javascript - 加载时 JQuery 搞砸页面

> ID：14549964
> 
> 赞同：0
> 
> 时间：2013-01-27T17:19:44.580
> 
> 标签：javascript, jquery, html, css

不太清楚如何定义这个问题。我刚开始使用 jQuery 和 Javascript，几乎一切都很好，除了页面最初加载的时候。我有页面淡入，但看起来所有的 CSS 都没有被应用，直到 jQuery 加载。

我在我的 Head 标签中尝试了这个脚本，但它不起作用。帮助？

```
<script type="text/javascript">
    $(function(){
       $('#box-container').hide();
    });
    $(window).load(function() {
       $("#box-container").show();
    });
</script> 
```

哎呀：网站：[http ://www.elijahish.com](http://www.elijahish.com)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T17:33:29.793

您应该使用 Javascript 控制台（例如 Chrome 控制台或 Firefox Firebug）来调试您的代码。

首先，在定义 jQuery 之前放置`script`需要 jQuery 的块：

```
<head>
<script type="text/javascript">
$(function(){
    $('#box-container').hide();
});
$(window).load(function() {
    $("#box-container").show();
});
</script>

...

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

... 
```

因此，您会看到以下内容（在 Chrome 控制台中）：

```
ReferenceError: $ is not defined
    $(function(){ 
```

其次，您似乎正在尝试运行一个脚本，该脚本正在访问（在第一个块中）一个元素（`#box-container`），然后才在 DOM 本身中看到它。您可以`jQuery.ready`在第一个块上使用，但这可能会很混乱。相反，我建议您将其放置在`<div id="box-container">`定义之后：

```
<body ...>

<div id="box-container" ...>
...
</div>
<script type="text/javascript">
(function($){
    $('#box-container').hide();
    $(window).load(function() {
        $("#box-container").show();
    });
})(jQuery);
</script> 
```

演示： http: [//jsfiddle.net/5JpVB/4](http://jsfiddle.net/5JpVB/4)（我使用 a`setTimeout`来获得戏剧效果。）

`<div ...>`或者打开后直接放：

```
<div id="box-container">
<script type="text/javascript">
(function($){
    $('#box-container').hide();
    $(window).load(function() {
        setTimeout(function(){
            $("#box-container").show();
        }, 2000);
    });
})(jQuery);
</script>
Box Container shown on window.onload.
</div> 
```

[http://jsfiddle.net/5JpVB/5/](http://jsfiddle.net/5JpVB/5/)

和致命一*击*（`document.write`尽管如此）：

```
<head>
...
<script>
document.write('<style>#box-container{display: none;}</style>');
</script>
...
</head> 
```

[http://jsfiddle.net/5JpVB/2/](http://jsfiddle.net/5JpVB/2/)

是的，这是一个将样式“放入”标题中的脚本`display: none`，它“巧妙地”绕过了一些被抛出的猜想（每种方法或多或少都有缺点）。这种方法有一个优雅的地方（当然，除了 using `document.write`，这很糟糕）。

还有另一种方式，使用 CSS`display: none`方法：

```
<head>
...
<style>
#box-container {
    display: none;
}
</style>
...

<div id="box-container">
    <noscript><style>#box-container{display: block;}</style></noscript>
    Box Container shown on window.onload.
</div> 
```

[http://jsfiddle.net/5JpVB/3/](http://jsfiddle.net/5JpVB/3/)（只是[结果页面](http://fiddle.jshell.net/5JpVB/3/show/)，禁用 Javascript 以查看它的工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:22:01.140

你得到一个 FOUC 的案例：http: [//www.bluerobot.com/web/css/fouc.asp/](http://www.bluerobot.com/web/css/fouc.asp/)

而且，多年后，我们仍然受到困扰！[http://paulirish.com/2009/avoiding-the-fouc-v3/](http://paulirish.com/2009/avoiding-the-fouc-v3/)

此链接中包含各种解决方案。

您还可以在运行显示内容的 javascript 之前将内容的样式设置为隐藏。Jared 向您展示了一个很好的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:38:08.650

我是否可以建议您使用 CSS 和 JavaScript 的组合，而不是其中一种。我在我正在构建的网站上使用 jQueryUI 时遇到了同样的问题，并发现很多这样的解决方案会使没有 JavaScript 的人无法使用联系方式。

所以这就是我所做的：

CSS：

```
.flash #wrapper {
     display: none;
} 
```

`<div id="wrapper">`仅当它是类 flash 的后代时才将其设置为隐藏。因此，为了防止它对那些没有 javascript 的人隐藏，我将 flash 类添加到`<html>`元素中。因此，只有在最终用户启用了 JavaScript 时才能将其物理隐藏，否则他们至少可以通过非样式化内容进行访问。

JavaScript：

```
$('html').addClass('flash');
$(doctument).ready(function() {
     /* Do all your stuff */

     /* When done show the wrapper with the content stylized */
     $(#wrapper).show();
}); 
```

根据您的页面加载时间，您可能会得到一点闪光，但它不会是非风格化内容的闪光，这是相当难看的。在我的情况下，我有一个 jQueryUI 菜单项，它会`<ul>`先闪烁普通元素，然后是 menuUI 项，并且我的`<div>`元素使用 jQuery 调整大小，以便每`<div>`列的高度相等，但它会首先闪烁不同的高度。这修复了它，同时仍然为没有启用脚本的浏览器提供可访问性。

# linux - CentOS：将目录复制到另一个目录

> ID：14549967
> 
> 赞同：54
> 
> 时间：2013-01-27T17:20:10.613
> 
> 标签：linux, centos, copy, cp

我正在使用 CentOS 服务器。我有一个名为的文件夹`test`位于`/home/server/folder/test`. 我需要将目录复制`test`到`/home/server/`. 我该怎么做？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-27T17:21:58.637

```
cp -r /home/server/folder/test /home/server/ 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-09-26T08:41:47.313

要复制所有文件，包括隐藏文件，请使用：

```
cp -r /home/server/folder/test/. /home/server/ 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-14T19:45:50.173

据我了解，您想递归地将测试目录复制到`/home/server/`路径中...

这可以这样做：

```
-cp -rf /home/server/folder/test/* /home/server/ 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-29T15:42:34.777

这对我有用。

```
cp -r /home/server/folder/test/. /home/server 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T17:22:12.860

对于复制目录，请使用以下命令

```
cp -r source    Destination 
```

例如

```
cp -r  /home/hasan   /opt 
```

对于不带 -r 的复制文件使用命令

```
cp   /home/file    /home/hasan/ 
```

# asp.net - 使用带有自定义角色提供程序的 asp.net mvc 4 登录失败时不会出现错误消息？

> ID：14549975
> 
> 赞同：4
> 
> 时间：2013-01-27T17:20:39.417
> 
> 标签：asp.net, asp.net-mvc-4, roleprovider, asp.net-roles

我正在尝试实现一个自定义角色提供程序，我找到了一个教程并遵循了它。这是链接： [http ://techbrij.com/custom-roleprovider-authorization-asp-net-mvc](http://techbrij.com/custom-roleprovider-authorization-asp-net-mvc)

当我尝试使用不存在的用户帐户登录时，不会出现错误消息。这是我当前的代码。

这是登录的代码：

```
[HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                using (SampleDBEntities objContext = new SampleDBEntities())
                {
                    var objUser = objContext.Users.FirstOrDefault(x => x.AppUserName == model.UserName && x.Password == model.Password);
                    if (objUser == null)
                    {
                        ModelState.AddModelError("LogOnError", "The user name or password provided is incorrect.");
                    }
                    else
                    {
                        FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

                        if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                           && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                        {
                            ModelState.AddModelError("LogOnError", "The user name or password provided is incorrect.");
                            return Redirect(returnUrl);
                        }
                        else
                        {
                            //Redirect to default page

                            //return RedirectToAction("RedirectToDefault");
                            return RedirectToAction("Index", "Home");
                        }
                    }
                }
            }
            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

以下是提供程序的实现代码：

```
public class MyRoleProvider : RoleProvider
    {
        public override void AddUsersToRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override string ApplicationName
        {
            get
            {
                throw new NotImplementedException();
            }
            set
            {
                throw new NotImplementedException();
            }
        }

        public override void CreateRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public override bool DeleteRole(string roleName, bool throwOnPopulatedRole)
        {
            throw new NotImplementedException();
        }

        public override string[] FindUsersInRole(string roleName, string usernameToMatch)
        {
            throw new NotImplementedException();
        }

        public override string[] GetAllRoles()
        {
            throw new NotImplementedException();
        }

        public override string[] GetRolesForUser(string username)
        {
            using (SampleDBEntities objContext = new SampleDBEntities())
            {
                var objUser = objContext.Users.FirstOrDefault(x => x.AppUserName == username);
                if (objUser == null)
                {
                    return null;
                }
                else
                {
                    string[] ret = objUser.Roles.Select(x => x.RoleName).ToArray();
                    return ret;
                }
            }
        }

        public override string[] GetUsersInRole(string roleName)
        {
            throw new NotImplementedException();
        }

        public override bool IsUserInRole(string username, string roleName)
        {
            throw new NotImplementedException();
        }

        public override void RemoveUsersFromRoles(string[] usernames, string[] roleNames)
        {
            throw new NotImplementedException();
        }

        public override bool RoleExists(string roleName)
        {
            throw new NotImplementedException();
        }
    }
} 
```

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T17:25:45.050

`ModelState`您已在键下添加了错误`"LogOnError"`：

```
ModelState.AddModelError("LogOnError", "The user name or password provided is incorrect."); 
```

`Html.ValidationMessage`仅当您的视图中有相应的帮助器时才会出现此错误：

```
@Html.ValidationMessage("LogOnError") 
```

如果您希望错误出现在`Html.ValidationSummary()`帮助程序中，请使用空白键：

```
ModelState.AddModelError("", "The user name or password provided is incorrect."); 
```

# ios - 层旋转

> ID：14549977
> 
> 赞同：1
> 
> 时间：2013-01-27T17:21:02.410
> 
> 标签：ios, calayer

我正在尝试在我的回调中旋转我的 calayer 对象以获取旋转手势识别器，如下所示：

```
CGFloat angle = [(NSNumber *)[hitlayer valueForKeyPath:@"transform.rotation.z"] floatValue];

hitlayer.transform = CATransform3DMakeRotation( (angle+90) / 180.0 * M_PI, 0.0, 0.0, 1.0);

[hitlayer setValue:[NSNumber numberWithFloat:(angle+90)] forKey:@"transform.rotation.z"]; 
```

这第一次工作正常。但随后的时间，transform.rotation.z 返回的值仍然是原始值（不是转换后的值），因此图层不会进一步旋转。有什么我想念的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:07:33.663

该`transform`属性不会*更改*视图或图层的边界或中心。它只是在绘制时应用一个转换，所以它看起来完全不同。因此，在您的情况下，您必须跟踪最后一个度数并在每次调用时添加 90。

# java - 返回 2 个不同子类的超类静态方法

> ID：14549980
> 
> 赞同：3
> 
> 时间：2013-01-27T17:21:29.760
> 
> 标签：java

这是不好的编程习惯，但我被要求将其作为更大任务的一部分。

我正在创建一个超类，然后是 2 个子类。超类中有一个静态方法，它应该根据结果返回两个子类中的任何一个。我将如何编写这种方法？

例如我需要做这样的事情

```
public abstract class Superclass{
    public static subclass? createFromFilename(String fileName){
            if(1==1)
               return subclass1;
            else
                   return subclass2;
    }
} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:25:59.373

我不确定这是否是您要查找的内容，但如果您想返回[类类型](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)，您可以通过编写子类名称并附加 a`.class`来获取类类型。正确的返回类型将是`Class`具有[泛型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)将结果限制为超类及其子类的类型。

```
public static Class<? extends Superclass> createFromFileName(String fileName) {
     if (fileName.equals("A")) {
          return SubclassA.class;
     } else {
          return SubclassB.class;
     }
} 
```

但是，如果您想返回相应类的对象，您可以通过简单地返回一个新实例并将返回类型设置为`Superclass`：

```
public static Superclass createFromFileName(String fileName) {
     if (fileName.equals("A")) {
          new SubclassA();
     } else {
          new SubclassB();
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:26:09.607

你可以这样做

```
public abstract superClass
{
     public static superClass getBaseClass(...)
     {
           if(...)
           {
                 return new baseClass1();//baseClass1 should derive from superClass
           }
           else
           {
                 return new baseClass2();//baseClass2 should derive from superClass
           }
     }
} 
```

您现在可以执行此操作

```
superClass sc=superClass.getBaseClass(..);

if(sc instanceof baseClass1)
{
     baseClass1 bc1=(baseClass1)sc;
     //work with bc1...
}

if(sc instanceof baseClass2)
{
     baseClass2 bc2=(baseClass2)sc;
     //work with bc2...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:50:49.513

您正在尝试确定作为方法执行结果的返回类型。这是不可能的。所以你必须忍受有共同的超类返回类型。顺便说一句，如果您在编译时知道正确的返回类型，为什么不更改（有 2 个方法？）方法来反映这一点？

# google-app-engine - 如何获取以“A”开头、以“B”开头等的 GAE 数据存储中的每个实体的最后一个

> ID：14549983
> 
> 赞同：0
> 
> 时间：2013-01-27T17:21:43.813
> 
> 标签：google-app-engine, twitter-bootstrap, google-cloud-datastore, gql

我有一个包含 303 个 Game() 实体的 GAE 数据存储。

```
class Game(db.Model):
    title = db.StringProperty(required = True)
    slug = db.StringProperty(required = True)
    category = db.CategoryProperty()
    description = db.TextProperty(required = True)
    created = db.DateTimeProperty(auto_now_add = True) 
```

'slug' 属性类似于标题，不同之处在于它用连字符替换所有空格并删除所有特殊字符。例如：（“第一场比赛！”变成“第一场比赛”）

在网站上，我列出了所有使用 Bootstrap 折叠手风琴的 303 款游戏。它工作得很好，但是因为有这么多游戏，我试图设置一个列出字母表的侧面导航。用户将单击其中一个字母以跳转到列表的特定位置。例如：（用户点击“N”，页面跳转到以“N”开头的游戏）。

我知道这是可行的，因为如果我将“slug”硬编码到 HTML 中，它将正确跳转到所需位置。但是，“slug”必须在正确的“slug”之前一，否则它不会正确跳跃。例如：（用户点击'N'，HTML中的slug需要'my-last-m-game'才能跳转到正确的位置，并在页面顶部显示'N'个游戏）。

我的问题（对不起，冗长的解释）是，是否可以通过 GQL 查询来获取字母表中每个字母的最后一场比赛？还是将所有游戏放在列表/字典中并以这种方式获得正确的“slug”更好？或者我应该向数据本身添加一个属性，它允许我只搜索“A”游戏或“T”游戏的 GQL 搜索，以获得正确的“slug”。或者是否有我可以在 Bootstrap 中使用的偏移量，这将允许我获得第一个“N”游戏“slug”并使用它跳转到页面上的正确位置？

谢谢你的尽心帮助。这是我第一次在 stackoverflow 上发帖，如果我做得不对，请道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:25:08.970

您可以对字符串使用前缀匹配。u"\ufffd" 是最高可能的 unicode 字符，因此按名称查询 < u"b"+u"\ufffd" 并按名称排序应该可以解决以 "b" 开头的元素。请注意，这种过滤/排序区分大小写，因此您可能需要为此存储一个小写的附加字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:25:05.777

另一种选择是在 Game 上有一个名为 lastGameForLetter 的字段），对于大多数游戏，该字段设置为 null）。插入游戏时，需要进行额外检查以确保不需要更新，但会使查询更容易。对于很少写但经常阅读的东西，我们一直在做这样的事情。

# java - 修剪字符串 - 只得到我想要的

> ID：14549990
> 
> 赞同：0
> 
> 时间：2013-01-27T17:22:17.963
> 
> 标签：java, string, char, trim

我需要在第一个空格之后修剪 Java 中的给定代码。前任。如果我有一个`inputstartString`带有值的字符串（调用它）

```
1 100 2 34 
```

我需要得到第二个数字（在这种情况下为 100）我认为这会进行修剪，但我完全不知道在这种情况下如何做，之后我还需要为以下数字做，但我想一旦我了解了它是如何进行的，我就可以轻松地与其他人一起完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:28:22.460

Trim 用于删除尾随或前导空白字符。String#split() 怎么样？

```
String[] elements = "1 2 3 4".split(" "); 
```

这将创建一个由 4 个元素组成的数组，每个元素包含一个数字。

# javascript - 替换不在任何标签中的文本

> ID：14549993
> 
> 赞同：0
> 
> 时间：2013-01-27T17:22:51.953
> 
> 标签：javascript, replace, html

我使用此代码获取正文中所有节点的文本（浏览器是 IE8 它适用于 FF ...）

谢谢，我开发了一个工具栏来更改页面中的一些文本，所以如果你有任何其他解决方案会让我很高兴，如果我用正则表达式替换所有正文，它会禁用一些网站的未来。例如，在 facebook 中，如果使用替换所有建议未来将在朋友查找部分禁用，所以我想逐步更改单词，它是坏词的过滤器

```
function replaceText(node)
{
 var textPropName = node.textContent === undefined ? 'innerText' : 'textContent';
 var childs = node.childNodes, i = 0;
 while(i < childs.length)    
 {
 alert(childs[i][textPropName]);
   if (childs[i][textPropName] !=null)
    {
      childs[i][textPropName] =childs[i][textPropName].replace(rgx,'new');
    }
    else
    {
      replaceText(document.body.childNodes[i]);} i++; 
    }
 }
} 
```

它可以工作，我可以替换页面上的所有文本，但是如果文本与 belove 相同，我无法访问它并替换它
**问题：** `test5 ww tt xx`测试不在任何标签中，因此它们不会替换任何解决方案? 真挚地

```
ww tt ff xx test5 test
<b>
test old old  yyyl  yyy ppp  
  <h2> ppp gfdsgfds gf dg df   yyy old odld old</h2>
</b>
  <h1 id="myHeader" onClick="replaceText(document.body)"> 
     yyy   yyy  yyy  yyy   old Click me! whatever
 </h1>
ppp  ppp ppp bwhoreface 
<b> 
ppp 
```

最终解决方案

```
function replaceText(node){ 
var textPropName = node.textContent === undefined ? 'innerText' : 'textContent';
   var childs = node.childNodes, i = 0;
var len= node.childNodes.length;
// alert('len='+len);
//var rgx = new RegExp('\\bold\\b', 'gi');
   while(node = childs[i]){
//alert('ee'+node.nodeType);  
if (node.nodeType == 3  ) {
//alert('!!!!!'+node.nodeValue );
//alert('ee'+node.nodeType); 
childs[i].nodeValue = childs[i].nodeValue.replace(rgx, 'newText'); 
} else { 
   replaceText(node); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:44:45.480

给你，这也适用于IE......

[现场演示](http://jsfiddle.net/HhRRB/)

```
function replaceText(node)
{
    var textPropName = node.textContent === undefined ? 'innerText' : 'textContent';
    var childs = node.childNodes, i = 0;
    var rgx = new RegExp('\\bff\\b|\\byyy\\b', 'gi');

    while(i < childs.length)    
    {
        if(childs[i].nodeType == 3) {
            alert(childs[i].nodeValue);

            childs[i].nodeValue = childs[i].nodeValue.replace(rgx,'new');
        } else {
            alert(childs[i][textPropName]);

            if (childs[i][textPropName] !=null)
            {
                childs[i][textPropName] =childs[i][textPropName].replace(rgx,'new');
            }
            else
            {
                replaceText(document.body.childNodes[i]);
            } 
        }

        i++; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:08:55.180

使用**content()**属性：- 它获取匹配元素集中每个元素的子元素，包括文本和注释节点。

试试这个：

```
// in jquery
$("body").contents().filter(function() {
  return this.nodeType == 3;
}).replaceWith("hello");

// in javascript
var nodes = document.getElementsByName('body').childNodes
for (i=0; i < nodes.length; i++)
{
 if(nodes.childNode[i].nodeType == 3)
 {
 //THIS NODE IS A TEXT NODE OF THE BODY ELEMENT
 //DO WHAT YOU NEED WITH IT
 }
} 
```

看这里[链接](http://jsfiddle.net/Q9VsG/)

# java - 第二次创建时线程运行缓慢（Java / Blackberry）

> ID：14549995
> 
> 赞同：0
> 
> 时间：2013-01-27T17:23:08.340
> 
> 标签：java, blackberry

我正在做一个简单的游戏，当它第一次运行时它运行完美，没有问题，如果你完成一个关卡，高分屏幕就会打开（下面的 run() 方法），然后你下次玩游戏时它以大约五分之一的速度运行，然后是第一次。我有另一个线程，它是一个在两种情况下都能完美运行的计时器。我已经查看了代码，但找不到第二次运行速度变慢的任何原因？有任何想法吗？

下面是从菜单屏幕打开关卡的代码。

```
 public void fieldChanged(Field inField, int inContext){
    final int level;

    if(inField == button1)
        level = 1;
    else
        if(inField == button2)
            level = 2;
        else
            if(inField == button3)
                level = 3;
            else
                if(inField == button4)
                    level = 4;
                else
                    level = 0;                  //Ensures variable is initialised

    game = new Game(level);

    UiApplication.getUiApplication().pushScreen(game);

    _invokeID = getApplication().invokeLater(new Runnable(){

    public void run(){
            if (game.getActive() == false){
                getApplication().cancelInvokeLater(_invokeID);
                getUiEngine().popScreen(game);

                Dialog.inform("Final Score: " + String.valueOf(game.getScore()));
                hs = new HighScore(game.getScore(), game.getTime(), level);
                UiApplication.getUiApplication().pushScreen(hs);

                game = null;                
            }
        }
    }, 500,true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:34:25.957

1.  使用 jconsole / visualvm 等检查您的程序 java 进程 JVM 的堆 / CPU 使用情况统计信息。

2.  如果 JVM 频繁进行垃圾回收，则表明您的进程的堆内存不足，需要解决该问题。

让我知道你的发现。

# xml - 如何编写 DTD 来约束字符串中的多个 IDREF 值？

> ID：14549998
> 
> 赞同：1
> 
> 时间：2013-01-27T17:23:29.913
> 
> 标签：xml, dtd

```
<Course Number="CS105A" Prerequisites="CS101A" Instructors="JC XX" Enrollment="610">
  <Title>Programming XXX</Title>
  <Description>Abstraction and its relation to programming.</Description>
</Course>

<Course Number="CS106B" Prerequisites="CS106A" Instructors="JC ER" Enrollment="620">
  <Title>Programming Abstractions</Title>
  <Description>Abstraction and its relation to programming.</Description>
</Course>

<Course Number="CS107" Prerequisites="CS106B CS105A" Instructors="JZ" Enrollment="500">
  <Title>Computer Organization and Systems</Title>
  <Description>Introduction to the fundamental concepts of computer systems.</Description>
</Course> 
```

如何编写可以由多个 ID 值组成`ATTLIST`的属性的规范，例如？下面的工作吗？`Prerequisites``"CS106B CS105A"`

```
<!ATTLIST Course Number ID #REQUIRED>
<!ATTLIST Course Prerequisites IDREF #IMPLIED> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T19:17:55.467

[`IDREFS`](http://www.w3schools.com/dtd/dtd_attributes.asp)如果属性 ( `Prerequisites`) 的`ID`值是写成以空格字符作为分隔符的连接字符串的值列表，则可以使用，即`id1 id2`：

```
<ATTLIST Course Number ID #REQUIRED>
<ATTLIST Course Prerequisites IDREFS #IMPLIED> 
```

可以[根据 XML 在线验证 DTD](http://www.validome.org/grammar/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:09:43.400

就像孟露说的，你应该使用[IDREFS](http://www.w3.org/TR/REC-xml/#sec-attribute-types)（不同的链接）。

您也不需要为`ATTLIST`元素中的每个属性都有单独的属性声明 ( )。

您的声明中还遗漏了一个非常重要的内容`!`。

例子：

```
<!ATTLIST Course 
          Number        ID     #REQUIRED
          Prerequisites IDREFS #IMPLIED> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:13:45.937

这是当前免费在线“数据库简介”课程@斯坦福 ( [http://class2go.stanford.edu/db/Winter2013/interactive_exercises/DTDExercises](http://class2go.stanford.edu/db/Winter2013/interactive_exercises/DTDExercises) ) 的 DTD 练习之一。

正如所指出的，自己运行它很容易。例如，我针对 xmllint 运行它，如果我的 DTD 没有通过，xmllint 会告诉我。我遵循错误线索直到它通过，然后将其作为我对这个问题的答案（引用集中的#3）。