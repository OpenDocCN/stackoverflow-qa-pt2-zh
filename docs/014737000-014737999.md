# StackOverflow 问答 14737000-14737999

# oracle - 如何检查 Oracle PL/SQL 中的参数列表值？

> ID：14737005
> 
> 赞同：0
> 
> 时间：2013-02-06T19:18:58.223
> 
> 标签：oracle, parameters, plsql, oracleforms

我创建了一个参数列表并添加了一些参数，但是当我想检查参数及其值是否已添加时，它无法获取我刚刚添加的值。代码有什么问题：

```
IF NOT ID_NULL(GET_PARAMETER_LIST('RPT')) THEN
  DESTROY_PARAMETER_LIST('RPT');
END IF;
v_param_list := CREATE_PARAMETER_LIST('RPT');

ADD_PARAMETER(v_param_list,'PAR_WHERE',TEXT_PARAMETER,'WHERE ID = 1010');

BEGIN
   GET_PARAMETER_ATTR(v_param_list,'PAR_WHERE',v_param_type,v_temp);
   message('PAR_WHERE:'||v_temp);
EXCEPTION WHEN OTHERS THEN
   message('Couldn''t get the value for : PAR_WHERE');
END; 
```

如何检索参数列表中的所有参数和值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:50:18.040

我没有看到你在哪里定义`v_param_type`和`v_temp`. `v_param_type`需要是数字和`v_temp`varchar2，它们都是`out`参数。

`ParamList`不幸的是，如果事先不知道其中包含的参数名称，就无法从中检索所有参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:23:11.367

正如 GriffeyDog 所说，没有办法检索参数列表项。我有同样的问题并通过使用数据库解决了它。唯一的方法是使用变通方法。我的解决方案是在参数列表中传递一个 ID。这个 ID 代表一个 pl/sql 集合。一旦检索到 ID，就很容易获得所有集合键或值。如果您需要更多详细信息，请告诉我，因为代码已有多年历史......

# javascript - 您可以在three.js 中将加载为纹理的图像作为另一个纹理mipmap 提供吗？

> ID：14737009
> 
> 赞同：1
> 
> 时间：2013-02-06T19:19:11.353
> 
> 标签：javascript, three.js, webgl, textures, mipmaps

这是一个问题，不是问题。

我正在使用地图集纹理的地形。为了减轻颜色渗色，我想用内置在外部工具中的 mipmap 来提供地形纹理。

暂时我用...

```
terrainTexture = THREE.ImageUtils.loadTexture 
```

...加载每个 mipmap 级别并将它们添加到级别 0 纹理...

```
terrainTexture.mipmaps[mipsTexs[tex.sourceFile]] = tex.image; 
```

... mipsTexs 只是一个关联数组，用于知道每个纹理对应的位置。

真正的问题是，当我输入手动 mipmap 并着色时，地形全黑，但使用 webgl 生成的 mipmap 会出现颜色渗色伪影。

手动 mipmap 的唯一示例在示例中，但纹理的 mipmap 馈送是画布。我想知道我看到的全黑问题是否是由于使用 JS 图像而不是画布造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:52:00.740

[这个例子](http://mrdoob.github.com/three.js/examples/webgl_materials_texture_manualmipmap.html)展示了如何构建自己的 mipmap：

```
function mipmap( size, color ) {

    var imageCanvas = document.createElement( "canvas" ),
    context = imageCanvas.getContext( "2d" );

    imageCanvas.width = imageCanvas.height = size;

    context.fillStyle = "#444";
    context.fillRect( 0, 0, size, size );

    context.fillStyle = color;
    context.fillRect( 0, 0, size / 2, size / 2 );
    context.fillRect( size / 2, size / 2, size / 2, size / 2 );
    return imageCanvas;

}

var canvas = mipmap( 128, '#f00' );
var textureCanvas1 = new THREE.Texture( canvas, THREE.UVMapping, THREE.RepeatWrapping, THREE.RepeatWrapping );
textureCanvas1.repeat.set( 1000, 1000 );
textureCanvas1.mipmaps[ 0 ] = canvas;
textureCanvas1.mipmaps[ 1 ] = mipmap( 64, '#0f0' );
textureCanvas1.mipmaps[ 2 ] = mipmap( 32, '#00f' );
textureCanvas1.mipmaps[ 3 ] = mipmap( 16, '#400' );
textureCanvas1.mipmaps[ 4 ] = mipmap( 8,  '#040' );
textureCanvas1.mipmaps[ 5 ] = mipmap( 4,  '#004' );
textureCanvas1.mipmaps[ 6 ] = mipmap( 2,  '#044' );
textureCanvas1.mipmaps[ 7 ] = mipmap( 1,  '#404' );
textureCanvas1.needsUpdate = true; 
```

# javascript - javascript for循环减少

> ID：14737010
> 
> 赞同：0
> 
> 时间：2013-02-06T19:19:11.907
> 
> 标签：javascript, for-loop, operators

我有这个 jQuery for 循环

```
for (; year <= endYear; year++) {
    html += '<option value="' + year + '"' + 
        (year == drawYear ? ' selected="selected"' : '') +
        '>' + year + '</option>';
} 
```

年 = 1950 年和年末 = 2006 年。

我的选项值看起来像这样

```
1950
1951
1952
and so on 
```

我正试图让它逆转

```
2006
2005
2004
and so on 
```

我将如何扭转这种说法`for (; year <= endYear; year++) {`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T19:20:21.327

反转你的 for 循环，让它朝着相反的方向前进！

```
var startYear = 1950;
var endYear = 2006;

for (var year = endYear; year >= startYear; year--) {
     html += '<option value="' + year + '"' + (year == drawYear ? ' selected="selected"' : "") + ">" + year + "</option>"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:21:13.530

```
for(var year = endYear; year >= startYear; year=year-1) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:07:35.970

这解决了我的问题

```
for (year=endYear; year >= 1950 ; year--) { 
```

谢谢dystroy

# c++ - cpp netlib 头文件

> ID：14737011
> 
> 赞同：0
> 
> 时间：2013-02-06T19:19:15.613
> 
> 标签：c++, cpp-netlib

我在理解 cpp netlib 文档时遇到了一些麻烦。

```
member name  type               description
headers      vector<header>     Vector of headers.

A header is a struct of type response_header<http::tags::http_server>. 
An instance always has the members name and value both of which are of type string_type.
string_type is boost::network::string<http::tags::http_server>::type. 
```

在我尝试访问标题时的代码中：

```
http_server::response_header headers[] = request.headers; 
```

以上不编译。我知道这可能看起来很基本，但我是 C++ 新手。谁能指导我如何从请求中遍历标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T02:18:12.447

```
class handler;
typedef http::async_server<handler> server;
for (server::request::vector_type::iterator it = request.headers.begin(); it != request.headers.end(); ++it) {
    printf("%s: %s", it->name.c_str(), it->value.c_str());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:12:27.490

为了其他人在谷歌上搜索，我想出了解决方案。文档似乎是错误的。解析请求而不是响应标头时应使用 Request_header

# libgit2 - libgit2sharp 获取失败

> ID：14737016
> 
> 赞同：1
> 
> 时间：2013-02-06T19:19:28.530
> 
> 标签：libgit2, libgit2sharp

我正在使用 libgit2sharp 来进行概念验证，以自动获取、更改、提交一些文件并推送到远程源。

我知道**push**还没有完成，但是**fetch**在 vnext 但是当我调用它时：

> libgit2 引发错误。类别 = Os（错误）。连接主机失败

这是我的代码：

```
 using (var repo = new Repository(gitPath))
        {
            var allBranches = repo.Branches.ToList(); //works fine

            var creds = new Credentials() {Username = username, Password = password};
            var remote = repo.Remotes.FirstOrDefault(x => x.Name == "origin");
            remote.Fetch(credentials:creds);  //blows up here     

        } 
```

其他一些细节：

1.  我的遥控器是使用 https 托管的私有 bitbucket。（看起来像：[https://myusername@bitbucket.org/myRepoOwner/repoName.git](https://myusername@bitbucket.org/myRepoOwner/repoName.git)）
2.  我能够从命令行获取和推送，所以 repo 正在工作。
3.  当我使用 repo.Fetch("origin"); 时会发生同样的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:53:57.423

这听起来像是[最近修复的问题](https://github.com/libgit2/libgit2/pull/1298)（`libgit2`并且可能尚未集成到`libgit2sharp`.）

同时，您应该能够`myusername@`从远程 URI 中删除 以解决此问题，例如`https://bitbucket.org/myRepoOwner/repoName.git`.

# .htaccess - .htaccess 重定向 - 如何从 /about 转到 /our-story

> ID：14737018
> 
> 赞同：1
> 
> 时间：2013-02-06T19:19:37.460
> 
> 标签：.htaccess

我正在努力让 /about 的任何内容都进入 /our-story。

我认为我的 .htaccess 重定向规则对此是正确的：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这条线在这里：

```
RewriteRule ^about.*$ http://domain.com/our-story/ [R=301,L]

</IfModule> 
```

但是，它似乎不起作用。我怀疑这是由于 Wordpress 处于活动状态。我试图把它放在 Wordpress 块中，但它仍然不起作用。

我需要做什么才能从 to`/about`重定向`/our-story`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:22:38.500

该规则是正确的，但是它们需要在 wordpress 规则*之前*进行，因为您正在重定向，而 wordpress 规则将所有内容都路由到`/index.php`. 任何以开头的请求 URI`/about`最终都会被路由到 wordpress，因此永远不会被重定向。只需切换顺序：

```
RewriteRule ^about.*$ http://domain.com/our-story/ [R=301,L]

# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule> 
```

# php - 如何在php中为对象命名

> ID：14737020
> 
> 赞同：0
> 
> 时间：2013-02-06T19:19:38.387
> 
> 标签：php

我有一个关于 php 中的对象的问题，我该如何给它命名？

当我执行以下操作时：

```
$arUserStuff =  array ('name' => 'username', 'email' => 'test@test.com');

$object = (object) $arUserStuff;

print_r($object); 
```

打印功能返回我以下：

```
stdClass Object ( [name] => username [email] => test@test.com ) 
```

我如何更改标准类对象让我们说用户对象？

实在是查不出来！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:21:09.083

创建该类，然后创建它的一个对象：

```
class User {
    public $name, $email; // public for this example, or set these by constructor

    public function __construct( array $fields) {
        foreach( $fields as $field => $value) 
            $this->$field = $value;
    }
}

$object = new User;
$object->name = 'username';
$object->email = 'test@test.com'; 
```

或者，您可以这样做：

```
$arUserStuff =  array ('name' => 'username', 'email' => 'test@test.com');
$object = new User( $arUserStuff); 
```

现在，从`print_r( $object);`，你会得到这样的东西：

```
User Object ( [name] => username [email] => test@test.com ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:26:16.317

实际上要做你想做的事，你应该让它像：

```
$arUserStuff =  new ArrayObject(
  array (
    'name' => 'username', 'email' => 'test@test.com'
  )
); 
```

要更改类名，您需要创建一个新类。这是一个相当复杂的过程，但您可以在这里了解它：

[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:45:42.863

如果您想动态创建一个类而不将所有数组键添加到新类中，您也可以使用 eval

例子：

```
<?php 
function create_class($name,$properties){

    foreach ($properties as $key=>$value){
        $a[] = 'public $'.$key.';';
        $b[] = '$this->'.$key.' = "'.$value.'";';
    }

    eval("
class $name {
   ".implode('',$a)."
   function __construct() {
   ".implode('',$b)."
   }
};");
    return new $name();
}

print_r( create_class('users',array ('name' => 'username', 'email' => 'test@test.com')) );
?>
users Object
(
    [name] => username
    [email] => test@test.com
) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T19:55:24.217

这是一个通用函数，它将数组转换为任何类型的对象，假设字段是公共的

```
class User { public $name, $email; }

class Dog { public $name, $breed; }

function objFromArray($className, $arr) {
       $obj = new $className;
       foreach(array_keys(get_class_vars($className)) as $key) {
           if (array_key_exists($key, $arr)) {
               $obj->$key = $arr[$key];
           }           
       }
       return $obj;
}

print_r(objFromArray('User', 
    array ('name' => 'username', 'email' => 'test@test.com')));    
echo "<br/>";
print_r(objFromArray('Dog', 
    array ('name' => 'Bailey', 'breed' => 'Poodle'))); 
```

**输出**

```
User Object ( [name] => username [email] => test@test.com )
Dog Object ( [name] => Bailey [breed] => Poodle ) 
```

我想用它做一个特征，但没有安装 PHP 5.4 来测试它。这不需要公开字段

```
trait ConvertibleFromArray {
    public static function fromArray($arr) {
        var $cls = get_called_class();
        var $obj = new $cls;
        foreach($arr as $key=>$value) {
            if (property_exists($obj, $arr)) {
               $obj->$key = $value;
            }
        }        
        return $obj;
    }
}    
class User {
    use ConvertibleFromArray;
    public $name, $email;
}    
class Dog {
    use ConvertibleFromArray;
    public $name, $breed;
}
print_r(User::fromArray(array ('name' => 'username', 'email' => 'test@test.com')));
print_r(Dog::fromArray(array('name' => 'Bailey', 'breed' => 'Poodle'))); 
```

?>

# css - 将一个 div 放在另一个高度未知的 div 下

> ID：14737022
> 
> 赞同：2
> 
> 时间：2013-02-06T19:19:47.407
> 
> 标签：css, html

我有一个居中的 div，其高度取决于用户屏幕分辨率（ div1 ）。我想自动将第二个 div ( div2 ) 准确地定位在它的下方 ( 再次在中心 )，最好不使用计算/javascript 或使用包装表

```
<div id="div1" class="div1"></div>
<div id="div2" class="div2"><input type=image src=bla.jpg></div> 
```

CSS：

```
.div1 {
    position: absolute;
    overflow: hidden;
    top: 10px;
    left: 0px;
    right: 0px;
    width: 50%;
    height: 65%;
    min-width: 100px;
    min-height: 200px;
    max-width: 200px;
    max-height: 300px;
    background-color: red;
    border: 1px solid #000000;
    margin: 0 auto;
}

.div2 {
    position: relative;
    display: table;
    overflow: hidden;
    top: 200px;
    border: 1px solid #000000;
    padding: 0px;
    margin: 0 auto;
    background-color: yellow;
    visibility: visible;
} 
```

不工作 jsfiddle： http: [//jsfiddle.net/Y4kga/](http://jsfiddle.net/Y4kga/) 黄色 div 应该完全（接触）在红色 div 下

ps 我正在使用 display: table 因为我有现场输入类型=图像，我希望宽度与输入类型一样大。

我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:33:54.953

从 div1 中删除绝对定位并将其添加到包装器 div。然后浏览器的布局引擎可以负责将黄色 div 定位在红色 div 下方。

```
<div class="wrapper">
    <div id="div1" class="div1"></div>
    <div id="div2" class="div2">lol</div>
</div> 
```

由于 div1 不再是绝对定位的，您可以使用自动边距水平居中。

```
.div1 {
margin: 0px auto;
    margin-top: 10px;
} 
```

[http://jsfiddle.net/Y4kga/3/](http://jsfiddle.net/Y4kga/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:39:38.203

好吧，不要将你的第一个 div 定位为绝对 --> [http://jsfiddle.net/tPJNg/1/](http://jsfiddle.net/tPJNg/1/)

```
.div1 {
    overflow: hidden;
    width: 50%;
    height: 65%;
    min-width: 100px;
    min-height: 200px;
    max-width: 200px;
    max-height: 300px;
    background-color: red;
    border: 1px solid #000000;
    margin: 10px auto;
    clear:both;
}

.div2 {
    clear:both;
    display: table;
    overflow: hidden;
    border: 1px solid #000000;
    padding: 0px;
    margin: 0 auto;
    background-color: yellow;
    visibility: visible;
} 
```

就是这样。

# ios - Xcode 警告 - 从枚举类型隐式转换

> ID：14737025
> 
> 赞同：0
> 
> 时间：2013-02-06T19:19:56.777
> 
> 标签：ios, objective-c, cocoa-touch

我在 Xcode 中看到警告错误为“从枚举类型 'enum NSUITableViewRowAnimation' 到不同枚举类型 'UITableViewScrollPosition' 的隐式转换”

这是我收到错误的代码：

```
 [detailTableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewRowAnimationTop animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:23:36.727

错误说明了一切。您没有使用正确的枚举类型。

你应该使用`UITableViewScrollPositionTop`.

参考：[表格视图滚动位置](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW7)

# ruby-on-rails - 零的 ActiveRecord 验证

> ID：14737030
> 
> 赞同：0
> 
> 时间：2013-02-06T19:20:10.557
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, activesupport

我正在尝试编写一个允许任何字符串但不允许 nil 的活动记录验证。

validates_presences_of 的问题在于它为我想认为有效的“”或“”返回 false。

我也尝试过 validates_length_of :foo, :minimum => 0 但这不起作用

我也尝试过 validates_length_of :foo, :minimum => 0, :unless => :nil? 这也不起作用。这两个都允许设置 nil 值并且验证仍然返回 true。

我在这里错过了什么吗？我觉得简单地验证元素不为零不应该这么难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:36:00.557

```
validate :blank_but_not_nil

def blank_but_not_nil
   if self.foo.nil?
     errors.add :foo, 'cannot be nil'
   end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:30:50.350

你能试一下吗：

```
validates_length_of :foo, :minimum => 0, :allow_nil => false 
```

例如：

```
User < ActiveRecord::Base
  validates_length_of :name, :minimum => 0, :allow_nil => false
end

> u=User.new
> u.valid?  #=> false  #u.name is nil
> u.name=""
> u.valid?  #=> true 
```

# packet - 数据包和有效载荷有什么区别

> ID：14737032
> 
> 赞同：-1
> 
> 时间：2013-02-06T19:20:18.150
> 
> 标签：packet, payload, ipsec

我在下面得到了这个定义，这是真的吗？数据包和有效负载之间有什么区别？

ESP（封装安全有效负载）协议是 IPSec 套件的成员。其目的是保证有效载荷（消息）的完整性、IP 数据包的数据源认证和有效载荷的机密性。它确实为整个数据包提供保护，而不仅仅是有效载荷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:24:07.637

有效负载是包含实际信息的数据包的一部分（好东西！）数据包的其他部分，即数据包标头，描述了有效负载，例如它有多大。

该描述告诉您，为数据包中的所有内容提供了保护，包括它的标头。希望有帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T04:06:36.470

**答案是：**

在隧道模式下，它不会在传输模式下保护整个数据包。

# asp.net - 从视觉角度进行服务器端验证

> ID：14737037
> 
> 赞同：1
> 
> 时间：2013-02-06T19:20:31.520
> 
> 标签：asp.net

如果我有一个 Intranet 应用程序并且正在执行客户端和服务器端验证 - 我是否应该设计服务器端验证（主要是出于安全原因）以具有与客户端验证类似的外观？

我想我要问的是：服务器端验证是否真的需要在字段级别返回正确的错误消息？或者它可以简单地拒绝页面，因为用户应该在现代浏览器中使用 javascript？（我正在使用 Kendo 进行客户端验证，这将在主要浏览器中运行）。

这是有时执行的策略，还是有理由让服务器端验证在视觉上有用？如果是这样，这是什么原因？如果网站是面向公众的，它会改变吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:45:52.067

我认为在某些情况下，您肯定希望服务器端验证与客户端验证一样用户友好。想象一个常见的场景，您的用户必须输入一些登录详细信息。您可以验证其中的一些客户端 - 例如，电子邮件地址的格式正确 - 但从安全角度来看，您需要检查服务器上的登录信息是否正确，如果密码不正确，那么你需要回一个友好的信息。在这种情况下拒绝整个页面是可以的，但这并不能告诉用户他们哪里出错了。

客户端验证的作用是让您减少需要执行的服务器端验证的数量。检查某些类型的输入 - 必填字段或电话号码 - 是否正确在客户端执行要快得多，这增加了整体用户体验。添加客户端验证在技术上也变得更快；它很好地嵌入到了 HTML 5 中，并且有许多很棒的 jQuery 库。但是友好的服务器端验证总会有一个需要安全性的地方。

# ruby-on-rails - Rails - 在数据库中存储路线数据

> ID：14737038
> 
> 赞同：0
> 
> 时间：2013-02-06T19:20:34.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个模型，它在名为“link_path”的列下存储数据库中的路径 - 例如：

```
Model.first.link_path == /posts/1 
```

（或者，换一种说法，我将控制器/model_id 缓存在数据库表中，这样 Rails 就不必从头开始构建它。）

在我看来，我想使用此路径信息构建一个 URL - 例如，[http://www.mysite.com/posts/1](http://www.mysite.com/posts/1)

我目前在我看来有以下代码：

```
<a href="<%= "#{request.protocol}#{request.domain}#{request.port_string}#{post.link_path}" %>"> 
```

在开发中，使用 POW/Nginx 和 Webrick 时，所有工作都按预期工作 - 例如，链接建立到

```
http://localhost:3000/posts/1). 
```

但是，在生产中，当我将鼠标悬停在链接上时，它会正确显示（例如，mysite.com/posts/1）但是，当我单击链接时，.com 和帖子之间的“/”奇怪地丢失了。该页面链接到[http://mysite.composts/1](http://mysite.composts/1)

关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:55:52.673

感谢 BrMcMullin - 我不知道我可以在不调用模型的情况下使用 URL 助手。由于我不需要link_to的权重，我最终改为

```
url_for(post.link_path) 
```

而不是使用字符串插值手动构建，这似乎按预期工作。

# asp.net - ASP.NET 中的授权是否仅意味着限制对页面和目录的访问

> ID：14737040
> 
> 赞同：0
> 
> 时间：2013-02-06T19:20:44.170
> 
> 标签：asp.net, authorization

在过去的几天里，我一直在阅读很多关于 asp.net 成员资格和角色的内容，并尝试在我的项目中使用基于表单的身份验证来实现它。从使用 WSAT 管理用户/角色到在代码中管理 urser/roles/access 规则，我尝试了我在 Internet 上找到的大多数示例。毫无疑问，它提供了强大的功能，而开发人员几乎不需要付出多少努力，但在我看来，asp.net 中的授权仅提供了一种限制对页面和目录的访问的方法。如果我有一个所有用户都可以访问的页面，并且基于用户角色，该页面会为用户提供不同的功能（常见场景 - 就像 SO 正在使用）。虽然我们可以检查`Roles.IsUserInRole(role)`在我们的代码中并为不同的角色自定义页面，但我们可以再次编写功能以创建更多角色并允许用户（管理员）创建更多角色。一旦应用程序启动并运行，用户（管理员）创建新角色，我们如何在我们的页面中处理这些角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:37:01.983

好。你是对的，Roles.IsUserInRole(role) 可以用来为不同的角色定制页面。因此，这不仅仅是限制对页面和目录的访问。

如果您要问如何适应用户管理员创建的新角色，以及如何让页面适应这些新角色……好吧，我认为您所说的术语是“动态角色”。如果您想要一个用户决定谁可以访问什么并创建具有不同访问权限的新角色的系统，您需要一个支持动态角色的系统。

我已经看到很多尝试手动编写这样一个系统的尝试，但我个人还没有看到一个做得很好的。一些能够做到这一点并且做得很好的系统是商业 CMS（内容管理系统）。如果您确实需要这样的系统，您可能需要查看其中的一些。

ASP.NET 的内置角色管理很简洁，但它确实适用于静态角色情况，其中有（比如）“应付账款文员”、“应收账款文员”和“经理”，虽然人们可能会改变角色，但角色本身以及其中的人需要做什么并没有太大变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T09:11:47.940

RE：Ann L 对她自己的回答的评论（我不能写评论，因为我还没有足够的声望点）。

如果应用程序的管理员能够创建新角色，这仅仅意味着这些角色中经过身份验证的（！）用户有权做更多或其他事情（取决于这些角色）。

我不认为让用户（管理员）动态创建角色会是一个糟糕的安全实践。在我看来，不良的安全做法是那些使恶意用户能够造成损害、窃取数据或劫持应用程序的做法。这些不良做法使人们能够以您不希望他们的方式进行身份验证。

# ios - 从我的应用程序向 Web 服务器发布数据的方法

> ID：14737041
> 
> 赞同：0
> 
> 时间：2013-02-06T19:20:49.260
> 
> 标签：ios, xcode, json

我有一个完全开发的网站，我想为它制作一个应用程序。我在不久前从事的游戏开发工作中对 xcode 有相当多的经验，但我以前从未对远程数据做过任何事情。我希望社区可以为我指明教程、代码库或其他资源的方向，他们发现这些资源有助于将信息从应用程序发布到 Web 服务器。

我在脑海中设计了一个应用程序来设计我的网站，因此我所有的数据库函数都有自己的 php 文件，这些文件用 json 编码数据或插入/更新数据库信息填充我的网站，这样我的应用程序就不必直接连接到数据库. 我是一个快速学习的人，所以一旦我在我的应用程序和服务器之间建立了管道，我应该很高兴。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:23:00.493

[`NSURLRequest`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)为您的网站设置 an并使用 an[`NSURLConnection`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)获取结果并使用[JSONKit解析它](https://github.com/johnezang/JSONKit)

# php - 需要在 magento 中显示子类别的描述

> ID：14737045
> 
> 赞同：0
> 
> 时间：2013-02-06T19:20:54.903
> 
> 标签：php, magento

我在以下代码中获取子类别描述时遇到问题。

```
 $category_model = Mage::getModel('catalog/category');  
    $_category = $category_model->load(3); //loaded one category
    $_subcategories = $_category->getChildrenCategories(); 

     foreach($_subcategories as $_subcategory): 
      echo $_subcategory->getName(); 
      echo $_subcategory->getDescription(); //I can't able to get description of the subcategory
     endforeach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:42:27.493

得到了解决方案，我为我的问题添加了答案。许多优化的答案也将不胜感激。谢谢。

```
$category_model = Mage::getModel('catalog/category');  
    $_category = $category_model->load(3); //loaded one category
    $_subcategories = $_category->getChildrenCategories(); 

     foreach($_subcategories as $_subcategory): 
      echo $_subcategory->getName(); 
     //echo $_subcategory->getDescription(); //I can't able to get description of the subcategory
    //Added to make as current category
      $cur_category=Mage::getModel('catalog/category')->load($_subcategory->getId());
      $layer = Mage::getSingleton('catalog/layer');
      $layer->setCurrentCategory($cur_category);
      echo $this->getCurrentCategory()->getDescription();

 endforeach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:58:05.523

我不是 100% 确定你想做什么，但试试

```
$category_model = Mage::getModel('catalog/category');  
$_category = $category_model->load(3); //loaded one category
$_subcategories = $_category->getChildrenCategories(); 

foreach($_subcategories as $_subcategory): 
    $cur_category=Mage::getModel('catalog/category')->load($_subcategory->getId());
    echo $cur_category->getName();
    echo $cur_category->getDescription();
endforeach; 
```

# gcc - 如何使用gcc编译多个文件

> ID：14737046
> 
> 赞同：1
> 
> 时间：2013-02-06T19:21:00.067
> 
> 标签：gcc

我有几个文件需要编译。这是命令。sample_client.c 依赖于 lsp.o。现在我更改了 lsp.c 和 lsp.h。如何编译以使此更改对 lsp.o 有效？

main函数在sample_client.c中，lsp.c没有main函数。

```
gcc -g -I/usr/include -g sample_client.c lsp.o lspmessage.pb-c.o -o sample_client -L/usr/lib -lprotobuf-c 
```

这是我的makefile，

```
CC = gcc

TARGET = sample_client sample_server

CFLAGS += -g -I/usr/include
LDFLAGS += -g -lprotobuf-c -L/usr/lib

all:    $(TARGET)

$(TARGET):  lsp.o lspmessage.pb-c.o

%.o:    %.c
    $(CC) -c $(CFLAGS) $< -o $@

clean:
    rm -f *.o 
    rm -f $(TARGET) 
```

但是，lprotobuf -c 不能正确链接。

运行 make -f Makefile 我可以得到以下信息，

```
lspmessage.pb-c.o: In function `lspmessage__get_packed_size':
...: undefined reference to `protobuf_c_message_get_packed_size'
lspmessage.pb-c.o: In function `lspmessage__pack':
...: undefined reference to `protobuf_c_message_pack' 
```

我知道我可以运行这个命令，

gcc -g -I/usr/include -g sample_client.c lsp.o lspmessage.pb-co -o sample_client -L/usr/lib -lprotobuf -c

但是如果我改变 lsp.c 和 lsp.h 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:00:16.140

在我看来你`LDFLAGS`的不正确。尝试以下操作：

```
LDFLAGS +=  -L/usr/lib -lprotobuf-c 
```

看起来您的目录`-L`和库出现故障。

另外，我为你删除了额外的电话`-g`。

# database - 如何导出 SQL Server 数据库以将其移动到不同的服务器？

> ID：14737056
> 
> 赞同：0
> 
> 时间：2013-02-06T19:21:15.750
> 
> 标签：database, sql-server-2008, ssis, export

我尝试使用*SQL Server Management Studio*中的向导导出数据库。它导出了所有表，但没有主键或身份键。

我意识到我需要保存 SSIS 包。如何使用 SSIS 准确导出数据库？我实际上是在`Save and Run Package`但我不知道我应该选择*SQL Server*还是*File system*。

有没有关于使用身份密钥和所有导出 SQL Server 数据库的不错的教程？

发生的事情是，我无法在刚刚导出的某个表上插入新记录。我发现这*`Enable identity insert`*与它有关，但我不确定是否应该在导出时启用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:20:11.520

我假设您正在使用*SQL Server Management Studio上提供的**“还原数据库”*对话框用户界面。

 *在*`Restore Database`*对话框中，单击*`Options`*page，然后选中**`Overwrite the existing database (WITH REPLACE)`**。单击`OK`以恢复数据库。

## 警告：

选择*`WITH REPLACE`*选项将覆盖目标服务器上与备份中的数据库文件名使用相同名称的数据库文件。在选择此选项之前，请阅读有关`WITH REPLACE`MSDN**[还原数据库（选项页面）上的选项的更多信息。](http://msdn.microsoft.com/en-us/library/ms188223.aspx)**

![WITH_REPLACE](../Images/1072957d062b39f043b5cb0837cdae96.png)*

# php - 数据表“未找到匹配项”

> ID：14737058
> 
> 赞同：2
> 
> 时间：2013-02-06T19:21:26.543
> 
> 标签：php, json, ajax, datatables

我有一个数据表，我在服务器端模式下使用它来通过 AJAX 检索数据。从表面上看，一切似乎都是正确的，但是，当我加载页面时，显示的是“未找到匹配记录”，而不是显示数据。特殊的部分是它说它正在显示记录“显示 2 个条目的记录 1 到 2”。

表格HTML和JS如下：

```
<div class="container">
        <script type="text/javascript">
$(document).ready(function() {
    $("#freebieslist").dataTable({
        "bServerSide": true,
        "sAjaxSource": "/config/getadvertisers",
        "bPaginate": true,
        "bProcessing": true,
        "bFilter" : true,
        "sPaginationType" : "bootstrap",
        "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
    });

    $.extend( $.fn.dataTableExt.oStdClasses, {
        "sWrapper": "dataTables_wrapper form-inline"
    } );
});

</script>

<div class="row"><h1 class="pull-left">Advertisers</h1><div class="pull-right" style="margin-top:15px;"><a href="/config/addadvertiser" class="btn btn-primary">Add New</a>&nbsp;&nbsp;&nbsp;<a href="/config/delete" class="btn btn-danger">Delete</a></div>    </div>
<div class="row">
<div class="span12">
    <table id="freebieslist" class="table table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th class="span1">&nbsp;</th><th>Advertiser</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
</div>        </div> 
```

正在加载的 JSON 是这样的：

```
{
    "sEcho": "1",
    "iTotalRecords": "2",
    "iTotalDisplayRecords": "2",
    "aaData": [
        [
            "2",
            "Test2"
        ],
        [
            "1",
            "Tester"
        ]
    ]
} 
```

如何解决这个问题，以便它实际显示返回的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:09:27.553

我通过在 Chrome 中使用数据表调试器解决了这个问题。我检查了返回的 AJAX 结果（基于传入的获取参数数据表），发现它得到了一个空结果集。服务器端代码的快速更改和事情开始正常工作。

# php - Nginx Http 上传进度模块：在 URL 中隐藏 X-Progress-ID

> ID：14737059
> 
> 赞同：0
> 
> 时间：2013-02-06T19:21:27.847
> 
> 标签：php, upload, module, nginx, progress

我正在为我的视频上传页面（upload.php）使用 Nginx Http 上传进度模块（[http://wiki.nginx.org/HttpUploadProgressModule](http://wiki.nginx.org/HttpUploadProgressModule)）。一切正常，但视频上传成功后，网址显示：

```
upload-success.php?X-Progress-ID=9040ccc12eb610ecb0362d5312e1b2fa 
```

出于某种原因，我想隐藏：

```
?X-Progress-ID=9040ccc12eb610ecb0362d5312e1b2fa 
```

我尝试通过表单中的隐藏输入传递“X-Progress-ID”，但它仍显示在 URL 中：

```
<input type="hidden" id="X-Progress-ID" name="X-Progress-ID" /> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T21:52:24.353

我的方式

```
<?php
if(isset($_POST['file_name'])) {
    header("Location: /index.php");
    exit();
}
?> 
```

# mysql - Rails 和 mysql - 根据表单值动态地将列添加到表中

> ID：14737061
> 
> 赞同：1
> 
> 时间：2013-02-06T19:21:32.520
> 
> 标签：mysql, ruby-on-rails, schema

我正在开发一个遗留应用程序——现在，我们允许管理员生成带有自定义字段的表单（他们创建字段、选择输入类型、标签等）。

当用户填写此自定义表单时，会检查该表单中的所有字段 - 如果该字段不是 users 表中的列，我们将其作为列添加到 users 表中。

例如，如果管理员添加了一个名为“航班到达时间”的字段，我们将在 users 表中添加一个名为“flight_arrival_time”的列，并且 User 模型将有一个名为 @user.flight_arrival_time 的属性。

目前的行动方案可能有哪些替代方案？有没有更有效的方法来存储这些值？

以下是一些限制：

我们有成千上万的用户（有人告诉我，将这些属性存储在不同的表中并加入它们会大大降低系统速度。我们通常有大约 20 名左右的管理员查询、导入、更新，并且通常使用地狱我们的系统在负载下已经很慢了。我没有能力说“购买更多 {X} 以便我们可以更快。）。我假设一个连接表（称为 user_attributes 之类的东西）将存储 user_id，属性名，属性值，如果每个用户多出15个属性，我们有10万用户，会慢多少？

存储必须易于查询（我们使用动态搜索，允许用户从 User 模型中选择任何列作为搜索字段并找到输入的值）。您是否选择允许简单查询（例如，查找属性名为“Flight Arrival Time”为明天的所有用户）。这也会变得很慢吗？

我将进行一些实验，生成一些建议的模式，为每个用户生成 100,000 个用户和 20 个属性，并运行一些测试查询来检查执行时间，但我想输入一些关于从哪里开始的信息。

感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:29:16.980

不完全是一个答案，但我认为这种应用程序将从像[mongoDB这样](http://www.mongodb.org/)[的面向文档的数据库/NOSQL 系统中](http://en.wikipedia.org/wiki/Document-oriented_database)受益匪浅。

这样的系统在设计上是无模式的。

为了增加我的两分钱，让用户对模式进行动态更改在 RDBMS 环境中似乎是一个非常危险的选择。您最终可能会得到包含数千个*大部分为空*列的表，并且 rails 会实例化具有数千个方法的对象。..当您删除一列时会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:09:57.703

从长远来看，您所遵循的方法会使您的数据库变得非常慢。随着根据用户行为添加列将导致其他元组的空值，您的数据库大小将增加。

最好使用面向文档的数据库。像 mongodb、couchdb、cassandra 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T08:43:17.077

有一个宝石。[https://github.com/Liooo/dynabute](https://github.com/Liooo/dynabute)

另外，这个问题是重复的

[Rails：模型上的动态列/属性？](https://stackoverflow.com/questions/26029700/rails-dynamic-columns-attributes-on-models)

# matlab - 如何将 NaN 更改为最接近的数字，高于或低于

> ID：14737063
> 
> 赞同：0
> 
> 时间：2013-02-06T19:21:44.467
> 
> 标签：matlab, matrix, interpolation, nan

我有一个 4x5 矩阵，但我有一些 NaN 与值混合。我真的很想将 NaN 更改为最接近的数字，在其上方或下方（因为每一列都与下一列断开连接），如下所示：

```
A= NaN 10   35   150   1.5
   4.2 11   NaN  149   1.45
   4.8 NaN  36.1 153   1.3
   5.3 13   40   147   NaN 
```

我想有一个函数可以将矩阵更改为：

```
B= 4.2 10   35   150   1.5
   4.2 11   35   149   1.45
   4.8 11   36.1 153   1.3
   5.3 13   40   147   1.3 
```

我想我可以使用某种插值来做到这一点，但我不完全确定如何。

在这个场景中，我可以手动完成，但我将使用 1000sx1000 的矩阵，所以当时做不到！我已经寻找如何做到这一点的其他示例，但其中很多将 NaN 更改为零。

在此先感谢您的帮助。

约旦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:25:58.490

使用[inpaint_nans](http://www.mathworks.com/matlabcentral/fileexchange/4551-inpaintnans)，这是 John D'Errico 的一个很棒的工具，它使用非 NaN 元素在二维数组中插入 NaN 元素。它也可以推断，因为它不使用数据的三角剖分。它提供了几种插值方法，在精度与速度和所需内存之间进行权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:57:13.597

我不知道这个函数是否完全符合您的预期，但它可能会有所帮助：

```
knnimpute 
```

举个例子

```
A = [1 2 5;4 5 7;NaN -1 8;7 6 0]

A =

     1     2     5
     4     5     7
   NaN    -1     8
     7     6     0 
```

然后你打电话

```
knnimpute(A) 
```

产生

```
ans =

     1     2     5
     4     5     7
    -1    -1     8
     7     6     0 
```

# ios - 删除 UIWebView 选择突出显示？

> ID：14737070
> 
> 赞同：1
> 
> 时间：2013-02-06T19:22:06.857
> 
> 标签：ios, cocoa-touch, uiwebview

所以在 UIWebView 中，每当你按下任何东西时，都会出现一个灰色的选择框。像这样：

![在此处输入图像描述](../Images/7b89d35bb8eb2211aa916277a08c73dc.png)

我知道如果你可以访问网站的源代码，你可以删除它，但显​​然在这个例子中我使用的是 YouTube，我无法访问。我可以删除 Xcode 中的灰色突出显示吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:28:41.350

为什么不使用 JavaScript 注入？

```
[webView stringByEvaluatingJavaScriptFromString:
    @"document.body.style.setProperty(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");"
]; 
```

# android - 在什么 android api 级别添加了 Spinner 下拉列表？

> ID：14737072
> 
> 赞同：2
> 
> 时间：2013-02-06T19:22:16.900
> 
> 标签：android

微调器下拉列表（而不是对话框）添加到 android 平台的确切 Android 版本是什么？好像哪里都找不到这个。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:22:57.877

它是在 API 11 (HoneyComb) 中添加的。但是您仍然可以在旧版本上使用它，例如使用`ActionBarSherlock`IcsSpinner 或`HoloEveryWhere`微调器。

# python - 如何递归地将列表列表（字符串的基本情况列表）转换为python中的字符串列表

> ID：14737073
> 
> 赞同：0
> 
> 时间：2013-02-06T19:22:31.467
> 
> 标签：python, recursion

我有这样的对象：

```
values=[['MLH'], ['MLH', 'PC1_cov']] 
```

我想变成这样的对象：

```
values=['MLH','MLH','PC1_cov'] 
```

我希望能够容纳列表列表等，所以我正在寻找一个递归函数。有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-06T19:40:37.477

您可以通过一个简单的 for 循环来实现：

```
values=[['MLH'], ['MLH', 'PC1_cov']]
flat = []
for val in values:
    flat += val 
```

该列表`flat`包含原始列表的扁平化版本。

# javascript - 更改数据属性时切换类

> ID：14737076
> 
> 赞同：0
> 
> 时间：2013-02-06T19:22:39.130
> 
> 标签：javascript, php, jquery, html, woocommerce

我正在处理一个购物车，我的客户希望它在空的时候有一个背景，而当它有物品时有另一个背景。所以这就是我得到的标记：

```
<a href="#" id="shopping-cart" data-count="0" class="trigger cart">
<span>
</span>
</a> 
```

数据计数的更改正在服务器端处理并通过 php 更新我的问题是我不知道如何让 jquery 读取数据计数并制作 if 语句以便读取

```
if data-count= 0 then add .empty  
else data-count > 0 then add .full 
```

另外，我不确定我是否应该使用`.addClass` 或`.toggleClass`从空到满，对不起，到目前为止，我所有编写 jquery 的尝试都失败了，所有正在度假的处理程序，所以我将不胜感激所有的帮助。

决定更改正在使用的插件，现在我尝试在新插件上复制它，但似乎无法绕开它来实现它，可用的新代码如下所示：

```
<?php global $woocommerce; ?>

<a class="cart-contents" href="<?php echo $woocommerce->cart->get_cart_url(); ?>" 
title="<?php _e('View your shopping cart', 'woothemes'); ?>">
<?php echo sprintf(_n('%d item', '%d items', $woocommerce->cart->cart_contents_count, 'woothemes'), $woocommerce->cart->cart_contents_count);?> - <?php echo $woocommerce->cart->get_cart_total(); ?></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:24:59.423

```
$('a.cart').data('count') 
```

给出计数的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:26:19.760

你为什么不这样做？：

```
$cart = sprintf(_n('%d', cart::$cart_contents_count, 'mini-cart'), cart::$cart_contents_count);

if($cart >= '1')
{
?> 
<a href="#" id="shopping-cart" data-count="$cart" class="trigger cart">
<span>
</span>
</a> <?php
}
else 
{ ?>
<a href="#" id="shopping-cart" data-count="0" class="trigger cart">
<span>
</span>
</a>
<?php
} 
```

这样你就不需要用来`jQuery`隐藏不需要的元素了。

# c++ - 如何复制堆栈？

> ID：14737078
> 
> 赞同：4
> 
> 时间：2013-02-06T19:22:43.493
> 
> 标签：c++

所以我使用一个动态堆栈，我想编写一个复制构造函数，它必须从同一个类的另一个实例中复制堆栈的数据。我正在尝试编写该函数，但似乎很难。有人可以帮帮我吗？

```
template<typename T=int>
class LStack
{
public:

    template<typename U=int>
    struct elem
    {
        U con;
        elem<U>* link;
    }

private:

    elem<T>* el;

    void Copystack(Lstack const& stack)    // HERE
    {
        elem<T>* last = el;
        el->con = stack->con;
        while(stack->link != null)
        {
            var temp = new elem<T>;
            temp->con = stack->con;
            temp->link = stack->link;
            stack = stack->link;
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T19:34:34.850

STL 容器适配器`std::stack`有一个分配`operator=`，允许您完全做到这一点

```
#include <stack>

int main()
{
   std::stack<int> s1;
   std::stack<int> s2;
   s1 = s2;
} 
```

如果您需要手动执行此操作，您可以使用@FredOverflow 的递归解决方案，或者您可以使用两个循环和一个临时堆栈来执行此操作，递归版本将其保留在堆栈框架上（双关语）。

```
void copy_reverse(Stack& source, Stack& dest)
{
    while(!source.empty())
        dest.push(Element(source.top()));
        source.pop();
    }
}

Stack src, tmp, dst;
copy_reverse(src, tmp);
copy_reverse(tmp, dst); 
```

# php - 遍历嵌套数组

> ID：14737083
> 
> 赞同：0
> 
> 时间：2013-02-06T19:23:02.243
> 
> 标签：php, arrays

我有一个如下的输出数组。我想循环遍历数组，以便一次获得一个文件元素。即一次一个图像元素及其细节。

我尝试了很多但做不到。

```
 Array
    (
        [name] => Array
            (
                [0] => stock-photo-cup-icons-tea-and-coffee-raster-version-109119257.jpg
                [1] => tea-cup-icon.png
                [2] => tea.png
                [3] => stock-vector-vector-black-tea-icons-set-all-white-areas-are-cut-away-from-icons-and-black-areas-merged-81392851.jpg
            )

        [type] => Array
            (
                [0] => image/jpeg
                [1] => image/png
                [2] => image/png
                [3] => image/jpeg
            )

        [tmp_name] => Array
            (
                [0] => D:\xampp\tmp\php6BB.tmp
                [1] => D:\xampp\tmp\php6BC.tmp
                [2] => D:\xampp\tmp\php6BD.tmp
                [3] => D:\xampp\tmp\php6BE.tmp
            )

        [error] => Array
            (
                [0] => 0
                [1] => 0
                [2] => 0
                [3] => 0
            )

        [size] => Array
            (
                [0] => 30609
                [1] => 3615
                [2] => 8966
                [3] => 23117
            )

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:28:54.877

你的意思是这样的吗？

```
$images = array();
foreach( $array as $key=>$values ){

    foreach( $values as $no=>$value ){
        $images[$no][$key] = $value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:26:58.030

你可以这样做，虽然它很糟糕！

```
for ($i = 0; $i < count($array["name"]); $i++)
{
    echo $array["name"][$i], $array["type"][$i], $array["size"][$i];
} 
```

***注意：**这仅适用于这种顺序数组。这不适用于具有关联索引的数组。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:27:35.813

您只需像这样循环遍历数组

```
$count = 0;
foreach ($_FILES['fileField']['name'] as $filename) 
{
    $file = $_FILES['fileField']['name'][$count];
    $type = $_FILES['fileField']['type'][$count];
    $size = $_FILES['fileField']['size'][$count];
    $count++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:27:41.627

我会做这样的事情：

```
$fileDetais = array();

foreach($arr["name"] as $id => $fname) {
    $fileDetais["name"] = $fname;
    $fileDetais["type"] = $arr["type"][$id];
    $fileDetais["tmp_name"] = $arr["tmp_name"][$id];
    $fileDetais["error"] = $arr["error"][$id];
    $fileDetais["size"] = $arr["size"][$id]; 
    //now you have all info about one file in  $fileDetais 
} 
```

# sql-server - QSqlDatabase::addDatabase("QODBC") Qt 4.8.4 的问题

> ID：14737086
> 
> 赞同：0
> 
> 时间：2013-02-06T19:23:18.937
> 
> 标签：sql-server, qt, odbc

我正在尝试连接到远程 SQL Server 数据库。尝试将“QODBC”添加为我的 QSqlDatabase 时，我在运行时收到以下错误：

我的代码片段：

```
 QStringList drivers = QSqlDatabase::drivers();
               qDebug()<<"drivers list: "<<drivers;
               QSqlDatabase db = QSqlDatabase::addDatabase("QODBC"); 
```

错误：

```
 drivers list:  ("QODBC3", "QODBC") 
         Cannot mix incompatible Qt library (version 0x40804) with this library (version 0x40803) 
```

如您所见，我的驱动程序列表的输出显示我有可用的驱动程序。.pro 文件有“QT += sql”，我按照 QT 支持博客上的说明构建了 odbc 驱动程序并将它们作为“sqldrivers”子文件夹添加到我的应用程序文件夹中。我似乎找不到如何解决版本不兼容错误。任何解决此问题的帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:08:38.937

已解决：问题是我的应用程序发布文件夹中的 QtCore 和 QtGui dll 是较旧的 qt 4.8.3，将其更改为当前的 qt 4.8.4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:01:17.523

您的 QODBC 库与您的 Qt 库不兼容，也许您应该使用您的 qt 版本构建 QODBC 库。有一个指南：http: [//qt-project.org/doc/qt-4.8/sql-driver.html](http://qt-project.org/doc/qt-4.8/sql-driver.html)

# javascript - 主干视图中的私有事件处理程序

> ID：14737091
> 
> 赞同：2
> 
> 时间：2013-02-06T19:23:36.520
> 
> 标签：javascript, backbone.js, backbone-views

我试图找出一种方法来保持我的私有函数和辅助方法真正私有。每个对象只应公开允许在外部调用的内容（激进，我知道！）。我很难通过以下方式使用 Backbone 视图执行此操作：

1.  不牺牲可读性
2.  不涉及很多样板
3.  不会产生任何意想不到的后果

这是我的一般视图结构：

```
(function(){
    //Private function no other view needs to care about
    var addStuffToMyDom = function(model){
        var newView = new Subview({model: model});

        //Problem: this doesn't refer to the 'view' here
        this.$el.append(newView.render().$el);
    }

    //Another trivial function which should really be private
    var doSomeThingTrivial = function(){
        this.$el.addClass("meh");
    }

    return BaseView.extend({
        events: {
            "click": doSomeThingTrivial
        },

        render: function(){
            var me = this;
            this.collection.each(addStuffToMyDom);
            return this;
        }
    });
 }()); 
```

如您所见，私有函数不能引用“this”来附加自己。

解决方案1：

```
(function(){
    var me;

    ...

    return BaseView.extend({
        initialize: function(){
            me = this;
        }
    });
}()); 
```

这有很多微妙的副作用+每次都必须这样做会很烦人。

解决方案2：

```
(function(){
    var me;

    ...

    return BaseView.extend({
        events{
            "click" : function(){
                doSomeThingTrivial.call(this);
            }
        }
    });
}()); 
```

这行得通，但是对于杂乱的代码来说，这是很多样板。

解决方案3：

```
(function(){
    return BaseView.extend({
            events: {..}
        initialize: function(){
            _.bindAll(this, this.events);
        }
    });
}()); 
```

我最喜欢这个；这很有效，可读性很强，并且可以像宣传的那样工作，但同样，对于每个视图来说，这是一个额外的步骤。我还缺少其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:52:09.927

您可以将要使用的上下文传递给该`each`方法：

`this.collection.each(addStuffToMyDom, this);`

现在`this`将是你的视图里面`addStuffToMyDom`。

我想当你使用 Backbone 事件哈希来连接事件时，它做了类似的事情。你确定`this`不是里面的景色`doSomeThingTrivial`吗？

如果您查看 Backbone `delegateEvents`，它会执行以下操作：

`method = _.bind(method, this);`

`this`你的观点在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T18:43:10.890

发现初始化程序中的 _.bindAll(this) 修复了私有函数中的范围问题。自从我问了这个问题以来，我对这种设计模式的信心越来越低，但它确实解决了它:)

```
(function(){
    //Private function no other view needs to care about
    var addStuffToMyDom = function(model){
        var newView = new Subview({model: model});

        //Problem: this doesn't refer to the 'view' here
        this.$el.append(newView.render().$el);
    }

    //Another trivial function which should really be private
    var doSomeThingTrivial = function(){
        this.$el.addClass("meh");
    }

    return BaseView.extend({
        events: {
            "click": doSomeThingTrivial
        },

        initialize: function(){
            _.bindAll(this);

        }
    });
 }()); 
```

# jsf-2 - JSF2.0 Mojarra 中的下拉选择问题

> ID：14737094
> 
> 赞同：1
> 
> 时间：2013-02-06T19:23:38.787
> 
> 标签：jsf-2

我有一个下拉列表（`SelectItem`s 列表），其中第一项带有`label`=`'Please select'`和`value`= `null`。有了这个，`required=true`当我尝试提交页面而不从下拉列表中选择任何值时，验证 () 工作正常。此外，在值更改时，我正在进行 AJAX 调用，它基本上会刷新另一个组件。我的支持 bean 在`SessionScope`.

现在的问题是，从发生 AJAX 调用的那一刻起，当我尝试`Please select` 从下拉列表中进行选择时，它不允许我这样做并将下拉值自动设置为我在 AJAX 调用之前选择的值。有人可以建议可能的问题在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:40:03.213

只需在选项卡中设置`immediate="true"`属性。**这将在验证阶段**之前的**应用请求值阶段**`f:ajax`处理您的事件。

# webdriver - WebDriver - 如何验证是否存在警报？

> ID：14737095
> 
> 赞同：3
> 
> 时间：2013-02-06T19:23:52.800
> 
> 标签：webdriver, selenium-webdriver, alert

在 selenium2 (Webdriver) 中如何验证是否存在警报？如果它不存在，请继续做某事！！！

我正在这样做：

```
driver.findElement(By.id("btn_may_or_maynot_showalert")).click();
WebDriverWait wait = new WebDriverWait(driver, 2);
try{
    wait.until(ExpectedConditions.alertIsPresent());
    Alert alert = driver.switchTo().alert();
    alert.accept();
}
catch (Exception e){
    System.out.println("No alert");
}
driver.findElement(By.id("Cont_doing_something")).click(); 
```

这很好用但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:11:31.803

不，您正在按照图书馆期望的方式做事。但是，该库的原则之一是您应该始终知道对您的自动化代码有什么期望。这意味着您不应该遇到按钮“可能会或可能不会”引起警报的情况；您应该已经知道按下按钮是否会引起警报。如果它做的事情不是你所期望的，那是一个异常情况，应该抛出一个异常。

# css - CSS, UL 菜单，带有弹出式 LI 元素，显示在上方横幅上

> ID：14737099
> 
> 赞同：2
> 
> 时间：2013-02-06T19:24:09.910
> 
> 标签：css, html, menu, popup

我正在尝试为我正在创建的网站创建一个基于 CSS 的菜单，但运气不佳。您可以在下面看到一张图片，该图片显示了我想要实现的目标（整个菜单和标题都在一个块中）：

![菜单布局示例](../Images/897a0731483dd0b31912d59493045060.png)

屏幕的上半部分在图像中以钢蓝色显示，其中包含一个带有背景图像的 div，以及一个绝对定位的标题，用于将文本放在图像的顶部。

下面的部分，在示例图像中以淡黄色显示，是一个标准的无序列表元素，包含正常的 li 列表标签。

类似于以下内容：

```
<ul>
  <li>Home</li>
  <li>Page 1</li>
  <li>Page 2</li>
  <li>Page 3</li>
</ul> 
```

无序列表父容器中的每个列表元素都将包含一个锚标记，如下所示：

```
<ul>
  <li><a href="home">Home</a></li>
  <li><a href="page1">Page 1</a></li>
  <li><a href="page2">Page 2</a></li>
  <li><a href="page3">Page 3</a></li>
</ul> 
```

当包含锚点的列表项具有与正在查看的实际页面匹配的 href 时，其目的是增加它的高度，以便它在包含它的无序列表父级之外增长。在这样做时，它覆盖了父页面的钢蓝色区域，类似于示例图像中的亮紫色矩形。

未匹配且未悬停的列表项（在示例图像中显示为蓝色矩形）应保留在父无序列表内，并具有其默认背景样式和颜色。

当列表项悬停时，它应该更改为与页面匹配的样式相同的样式，高度明智，并且在父列表之外，但它应该采用不同的颜色来显示它已悬停并且不匹配，它应该在悬停完成后返回到之前的状态（蓝色矩形）。

我有点让事情部分工作，这就是它目前的样子：

![当前工作的菜单](../Images/1f246ed8e5939d306c959bfca25a7be2.png)

如您所见，实际的无序列表元素不会向下流动，并且其中的每个列表项相互重叠，我怀疑这是因为我将每个列表项设置为绝对定位。

如果我更改列表项以使其使用相对定位，则可以解决重叠问题，但这会阻止列表项弹出父列表元素的顶部并覆盖图像的钢蓝色部分。

还有另一种并发症。我对生成的标记几乎没有控制权，因为这是由 CMS（确切地说是 mojoPortal）生成的。目前由 ASP.NET 生成的标记如下：

```
<nav class="span12" id="ctl00_SiteMenu1_ctl00">
  <ul id="ctl00_SiteMenu1_ctl00_UL" class="root-nav">
    <li class="current">
  <a href="/home.aspx">Home</a>
    </li>
<li>
      <a href="/contact-us.aspx">Contact Us</a>
    </li>
<li>
      <a href="/new-page.aspx">Frogs</a>
    </li>
  </ul>
</nav> 
```

我知道这些类`root-nav`和`current`在其他地方定义，并且我确实有能力覆盖我自己的任何现有的任何 CSS 规则。

上面的例子有重叠，这个定义如下：

```
.mainhead
{
  background: url(img/menu-banner.png);
  height: 170px;
}

ul.root-nav
{
  background: #B3A90E;
  border-radius: 0px;
  z-index: 1000;
  position: relative;
  width: 1170px;
}

ul.root-nav li.current > a
{
  background-color: #B30D9E;
  background-image: none;
  height: 100px;
  z-index: 1010;
  position: absolute;
  bottom: -30px;
  border-radius: 25px 25px 0px 0px;
  width: 100px;
  display: block;
}

ul.root-nav li > a
{
  background-color: #1C10B3;
  background-image: none;
  z-index: 1010;
  position: absolute;
  bottom: -30px;
  border-radius: 25px 25px 0px 0px;
  width: 100px;
}

ul.root-nav li > a:hover
{
  background-color: #0BB312;
  background-image: none;
  height: 100px;
  z-index: 1010;
  position: absolute;
  bottom: -30px;
  border-radius: 25px 25px 0px 0px;
  width: 100px;
} 
```

我想让这个与覆盖一起工作，而不是我的替代方案，即使黄色区域成为我期望任何弹出项目的最大高度并将其固定到位，以便在高度变化时不会移动。

我在 HTML5 中执行此操作，因此 HTML5 标记和 CSS 规则非常好。

提前感谢任何人提出的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:24:38.197

大约一个小时后……我回来了。

这绝对应该是堆栈溢出的首要问题......

为什么？当您发布有关堆栈溢出的问题时，您通常最终会在很短的时间内自行解决。

总之，够了。

我得到上面重叠的原因是因为我没有设置 LI 大小。

只需添加以下规则：

```
ul.root-nav li.current
{
  min-width: 100px;
}

ul.root-nav li
{
  min-width: 100px;
} 
```

到我的样式表，就在**ul.root-nav li-current > a**解决了我的问题之前。

由于绝对定位，我对没有为 UL 设置高度的想法是正确的，但是设置一个固定的高度就可以了。

# c - 当前 GCC（尤其是在 Ubuntu 上）的默认 C -std 标准版本是什么？

> ID：14737104
> 
> 赞同：67
> 
> 时间：2013-02-06T19:24:22.930
> 
> 标签：c, ubuntu, gcc, c99, c11

当我要求查看 cc 的当前版本时，我得到了这个。

```
$ cc --version
cc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ 
```

我想知道的是正在使用 c89、c90、c99 或 c11 中的哪一个。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-06T19:57:23.173

这在 gcc 手册中有详细解释，可通过[在此处](http://gcc.gnu.org/onlinedocs/)`info gcc`键入或在线获取（如果已安装） 。4.7.2 手册的相关部分在[这里](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Standards.html)。

默认情况下，gcc 不符合任何 ANSI/ISO C 标准。当前默认值等同于`-std=gnu90`，它是 1989/1990 标准，具有特定于 GNU 的扩展。（未发布语言标准要求的某些诊断。） 2015-04-22 发布的版本 5.1.0 将默认值从 更改`-std=gnu90`为`-std=gnu11`，[如此处](https://gcc.gnu.org/onlinedocs/gcc-5.1.0/gcc/Standards.html)所述。

如果您想要标准一致性，您可以使用以下任何一种：

```
-std=c90 -pedantic
-std=c99 -pedantic
-std=c11 -pedantic 
```

`-std=c90`也可以拼写为`-ansi`, `-std=c89`, 或`-std=iso9899:1990`.

`-std=iso9899:199409`支持 C90 标准加上 1995 年的修订，增加了一些小功能（所有这些也在 C99 中）。

`-std=c99`也可以拼写为`-std=c9x`or `-std=iso9899:1999`（该名称`c9x`在标准发布之前使用）。C99 支持[还不是很完整](http://gcc.gnu.org/c99status.html)，但已经很接近了。

`-std=c11`也可以拼写为`-std=c0x`or `-std=iso9899:2011`（该名称`c0x`在最终标准发布之前使用；错误地认为`x`不会超过 9）。C11 支持也不完整；目前的状态[总结在这里](http://gcc.gnu.org/wiki/C11Status)。

该`-pedantic`选项使 gcc 打印违反约束和语法规则所需的诊断信息。在某些情况下，这些诊断只是警告——并且没有简单的方法来区分这些警告和语言不需要的其他警告。替换`-pedantic`为`-pedantic-errors`使 gcc 将语言冲突视为致命错误。

标准的快速历史：

*   C89 是第一个官方 C 标准，由[ANSI](http://ansi.org/)于 1989 年发布。
*   C90 是标准的[ISO](http://www.iso.org/iso/home.html)版本，描述的语言与 C89 完全相同。ANSI 正式采用了 ISO 版本的标准。有两个技术更正，纠正了一些错误。
*   C95 是对 C90 的修正，增加了一些特性，主要是二合字母和宽字符支持。据我所知，从未发布过合并版本。
*   C99 于 1999 年由 ISO 发布。共有三份技术勘误。
*   C11 由 ISO 于 2011 年发布。有一个技术勘误，修正了`__STDC_VERSION__`和的定义`__STDC_LIB_EXT1__`。

ANSI 没有发布自己的 1999 或 2011 标准版本，而是采用 ISO 标准。

[N1256](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)是 C99 标准的免费草案，其中合并了 3 个技术勘误。

[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)是免费提供的 C11 标准草案。它与已发布的 C11 标准以及一份技术勘误之间存在一些细微差别。有关更多详细信息，请参阅[我](https://stackoverflow.com/a/15737472/827263)对此[问题](https://stackoverflow.com/q/8631228/827263)的回答。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-05-18T20:28:03.873

`info gcc`来自gcc6 和[https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Standards.html#Standards](https://gcc.gnu.org/onlinedocs/gcc-5.4.0/gcc/Standards.html#Standards) for gcc5的有用信息

### gcc 版本`6.3.1`-`10.1.0`

```
2.1 C Language
==============
 The default, if no C language dialect options are given, is
'-std=gnu11'.

2.2 C++ Language
================
 The default, if no C++ language dialect options are given, is
'-std=gnu++14'. 
```

### gcc 版本`5.4.0`

```
2.1 C Language
==============
The default, if no C language dialect options are given, is -std=gnu11

2.2 C++ Language
================
The default, if no C++ language dialect options are given, is -std=gnu++98 
```

对于**C**，默认模式仍然存在`std=gnu11`，但对于**C++**，它已从 跳转`std=gnu++98`到`std=gnu++14`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-10-30T11:48:25.080

**最少的测试程序**

如果您想在不阅读任何手册的情况下凭经验找到它。

抄送

```
#include <stdio.h>

int main(void) {
#ifdef __STDC_VERSION__
    printf("__STDC_VERSION__ = %ld \n", __STDC_VERSION__);
#endif
#ifdef __STRICT_ANSI__
    puts("__STRICT_ANSI__");
#endif
    return 0;
} 
```

测试：

```
#!/usr/bin/env bash
for std in c89 c99 c11 c17 gnu89 gnu99 gnu11 gnu17; do
  echo $std
  gcc -std=$std -o c.out c.c
  ./c.out
  echo
done
echo default
gcc -o c.out c.c
./c.out 
```

结果：

```
c89
__STRICT_ANSI__

c99
__STDC_VERSION__ = 199901
__STRICT_ANSI__

c11
__STDC_VERSION__ = 201112
__STRICT_ANSI__

c17
__STDC_VERSION__ = 201710
__STRICT_ANSI__

gnu89

gnu99
__STDC_VERSION__ = 199901

gnu11
__STDC_VERSION__ = 201112

gnu17
__STDC_VERSION__ = 201710

default
__STDC_VERSION__ = 201710 
```

结论：`gnu17`默认使用：

*   `__STRICT_ANSI__`: 为 GCC 定义`-std=c`但未定义的扩展`-std=gnu`，请参阅：[https ://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html](https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)
*   `__STDC_VERSION__`：为每个版本设置的 C99+ ANSI C 宏。在标准尚未定义的 C89 中不存在。

有关`-std=gnu*`vs的解释，`-std=c*`另请参见：[-std=c++11 和 -std=gnu++11 之间有什么区别？](https://stackoverflow.com/questions/10613126/what-are-the-differences-between-std-c11-and-std-gnu11)

**C++**

主文件

```
#include <iostream>

int main(void) {
#ifdef __cplusplus
    std::cout << __cplusplus << std::endl;
#endif
#ifdef __STRICT_ANSI__
    std::cout << "__STRICT_ANSI__" << std::endl;
#endif
    return 0;
} 
```

测试：

```
#!/usr/bin/env bash
for std in c++98 c++11 c++14 c++17 gnu++98 gnu++11 gnu++14 gnu++17; do
  echo $std
  g++ -std=$std -o cpp.out cpp.cpp
  ./cpp.out
  echo
done
echo default
g++ -o cpp.out cpp.cpp
./cpp.out 
```

结果：

```
c++98
199711
__STRICT_ANSI__

c++11
201103
__STRICT_ANSI__

c++14
201402
__STRICT_ANSI__

c++17
201703
__STRICT_ANSI__

gnu++98
199711

gnu++11
201103

gnu++14
201402

gnu++17
201703

default
201402 
```

结论：`gnu++14`是默认值：

*   `__cplusplus`：由 C++ 标准定义的宏，包括 C++98 及更高版本

在 Ubuntu 18.10、GCC 8.2.0 上测试。[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/tree/f9a63634242de7a27dc84b880e0018f55d5aac8a/gcc-std-default).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T19:27:34.707

第一行将给出您的 GCC 版本（4.7.2）

> (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2

编译代码时，您可以指定要使用的 C/C++ 版本，方法是添加`-std=c99`或`-std=c99` ...

默认情况下使用注释`gnu89`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T10:14:54.290

需要注意的一件事是，gcc 的 -std= 选项不能用于将编译器“沙箱化”为不支持来自标准 C 更高版本的构造。无论有没有，这都是正确的`-pedantic`

如果您尝试使用某些 C99 代码结构进行编译，则不能依赖于`gcc -std=c89 -pedantic`给您错误或警告。在某些情况下会，在其他情况下不会。例如，它会愉快地编译`%zu`在 printf() 调用中使用格式说明符的代码，即使它直到 C99 才被添加。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-03-10T07:03:05.333

默认 gcc 命令是 ISO C90 的 GNU 方言（包括一些 C99 功能）。这是 C 代码的默认设置。

# javascript - 按属性分隔元素数组

> ID：14737106
> 
> 赞同：0
> 
> 时间：2013-02-06T19:24:38.780
> 
> 标签：javascript, jquery, arrays

假设我有一个包含多个输入的表单，我使用一个非常标准的 jQuery 语句来获取所有输入：

```
var inputs = $("#some-form").find("input") 
```

现在，我想对这些输入采取行动，但假设我想将单选按钮和/或复选框组视为一个单一的东西。如何拆分`inputs`为按属性分组的元素，例如`name`. 请注意，我不知道处理开始时的名称。

用人类的术语来说，我需要逻辑做一些事情：

> 让我遍历输入列表。对于每个输入，让我检查它是否已被添加到占位符数组中。如果是这样，请不要理会它。如果没有，请将其及其名称的所有内容添加到所述占位符数组（作为子数组）。

本质上，我想要这样的东西：

```
[[<input type="text" name="name1">], [<input type="radio" name="name2">,<input type="radio" name="name2">]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:27:42.357

尝试在过滤器中使用属性选择器。

```
var $formInput = $('#some-form').find('input');
var inputText = $formInput.filter('[type=text]')
var otherInput = $formInput.filter("[type=radio]")
                          .add($formInput.filter('[type=checkbox]')); 
```

甚至更好

```
var otherInput = $formInput.filter(function () {
                     return this.type == 'radio' || this.type == 'checkbox';
                  }); 
```

**演示：http:** [//jsfiddle.net/utwaf/](http://jsfiddle.net/utwaf/)

> 如何将输入拆分为按属性分组的元素，比如名称

```
var elements = []; //elements by name
var $formInput = $('#some-form').find('input');
elements.push($formInput.filter(function() { 
   return this.name == 'name1';
});
elements.push($formInput.filter(function() { 
   return this.name == 'name2';
}); 
```

**注意：**所有推入数组的元素都是 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:35:35.687

```
function getInputsPartitioned(formEl) {
    var inputEls = formEl.querySelectorAll("input");

    var inputsByName = Object.create(null);
    for (var i = 0; i < inputEls.length; ++i) {
        var inputEl = inputEls[i];
        var name = inputEl.name;

        if (!(name in inputsByName)) {
            inputsByName[name] = [];
        }
        inputsByName[name].push(inputEl);
    }

    // `inputsByName` now looks like this:
    // {
    //     name1: [<input type="text" name="name1">],
    //     name2: [<input type="radio" name="name2">, <input type="radio" name="name2">]
    // }

    // To get it into arrays:

    return Object.keys(inputsByName).map(function (name) {
        return inputsByName[name];
    });
} 
```

奖励：不需要 jQuery。

# vba - Word VBA：获取连续标题之间的范围

> ID：14737107
> 
> 赞同：2
> 
> 时间：2013-02-06T19:24:40.000
> 
> 标签：vba, ms-word

我查了一些例子，但我不太明白 Range 对象是如何工作的。我正在尝试遍历我的每个标题（第 4 级），并有一个嵌套循环查看标题之间的所有表格。我无法弄清楚如何设置该特定范围，因此将不胜感激任何帮助。

```
 Dim myHeadings As Variant
    myHeadings = ActiveDocument.GetCrossReferenceItems(wdRefTypeHeading)

    For iCount = LBound(myHeadings) To UBound(myHeadings)

      level = getLevel(CStr(myHeadings(iCount)))
      If level = 4 Then

         'This is where I want to set a range between myHeadings(iCount) to myHeadings(iCount+1)
         set aRange = ??

      End If

    Next iCount 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:09:45.270

你在这里是正确的。您拥有的 myHeadings 变量只是给出了文档中第 4 级标题的字符串列表。然后，您需要做的是在文档中搜索这些字符串以获取 4 级标题的范围。

获得每个标题的范围后，您可以检查这些标题之间范围内的表格。我已经稍微修改了你的代码来做到这一点。`Option Explicit`另请注意将其放在模块顶部以确保声明所有变量的良好做法。

我的代码将告诉您每个 4 级标题之间有多少个表格。注意：它不会检查文档的最后一个标题和结尾之间，我将把它留给你；）

```
Sub DoMyHeadings()
    Dim iCount As Integer, iL4Count As Integer, Level As Integer, itabCount As Integer
    Dim myHeadings As Variant, tbl As Table
    Dim Level4Heading() As Range, rTableRange As Range

    myHeadings = ActiveDocument.GetCrossReferenceItems(wdRefTypeHeading)

    'We want to move to the start of the document so we can loop through the headings
    Selection.HomeKey Unit:=wdStory

    For iCount = LBound(myHeadings) To UBound(myHeadings)
        Level = getLevel(CStr(myHeadings(iCount)))
        If Level = 4 Then

            'We can now search the document to find the ranges of the level 4 headings
            With Selection.Find
                .ClearFormatting                                'Always clear find formatting
                .Style = ActiveDocument.Styles("Heading 4")     'Set the heading style
                .Text = VBA.Trim$(myHeadings(iCount))           'This is the heading text (trim to remove spaces)
                .Replacement.Text = ""                          'We are not replacing the text
                .Forward = True                                 'Move forward so we can each consecutive heading
                .Wrap = wdFindContinue                          'Continue to the next find
                .Format = True
                .MatchCase = False
                .MatchWholeWord = False
                .MatchWildcards = False
                .MatchSoundsLike = False
                .MatchAllWordForms = False
                .Execute
           End With

           'Just make sure the text matches (it should be I have a habit of double checking
            If Selection.Text = VBA.Trim$(myHeadings(iCount)) Then
                iL4Count = iL4Count + 1                             'Keep a counter for the L4 headings for redim
                ReDim Preserve Level4Heading(1 To iL4Count)         'Redim the array keeping existing values
                Set Level4Heading(iL4Count) = Selection.Range       'Set the range you've just picked up to the array
             End If
         End If
     Next iCount

    'Now we want to loop through all the Level4 Heading Ranges
    For iCount = LBound(Level4Heading) To UBound(Level4Heading) - 1
        'Reset the table counter
        itabCount = 0

        'Use the start of the current heading and next heading to get the range in between which will contain the tables
        Set rTableRange = ActiveDocument.Range(Level4Heading(iCount).Start, Level4Heading(iCount + 1).Start)

        'Now you have set the range in the document between the headings you can loop through
        For Each tbl In rTableRange.Tables
            'This is where you can work your table magic
            itabCount = itabCount + 1
        Next tbl

        'Display the number of tables
        MsgBox "You have " & itabCount & " table(s) between heading " & Level4Heading(iCount).Text & " And " & Level4Heading(iCount + 1).Text
    Next iCount
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-30T00:58:01.713

您可以使用 . 从一个标题跳到下一个标题`Goto`。请参阅下面如何循环遍历 4 级标题。

```
Dim heading As Range
Set heading = ActiveDocument.Range(start:=0, End:=0)
Do   ' Loop through headings
    Dim current As Long
    current = heading.start
    Set heading = heading.GoTo(What:=wdGoToHeading, Which:=wdGoToNext)
    If heading.start = current Then
        ' We haven't moved because there are no more headings
        Exit Do
    End If
    If heading.Paragraphs(1).OutlineLevel = wdOutlineLevel4 Then

        ' Now this is a level 4 heading. Let's do something with it.
        ' heading.Expand Unit:=wdParagraph
        ' Debug.Print heading.Text

    End If
Loop 
```

不要专门寻找“标题 4”，因为，

*   可以使用非内置样式，
*   它不适用于 Word 的国际版本。

`wdOutlineLevel4`改为检查。

现在，要获得整个 4 级的范围，这里有一个鲜为人知的技巧：

```
Dim rTableRange as Range
' rTableRange will encompass the region under the current/preceding heading
Set rTableRange = heading.GoTo(What:=wdGoToBookmark, Name:="\HeadingLevel") 
```

这对于文档中的最后一个标题 4 或标题 3 下方的最后一个标题会更好。

# java - 通过注解的 @ModelAttribute 方法从模型绑定中排除 Spring Controller 方法

> ID：14737116
> 
> 赞同：0
> 
> 时间：2013-02-06T19:24:58.490
> 
> 标签：java, spring, spring-mvc

我收到对方法 getIndex 的无效请求，因为缺少请求参数 id。我可以指定我不希望该请求映射方法的模型绑定吗？

```
@Controller
@RequestMapping ("/admin/admins")
public class AdminUserController {
@RequestMapping (method = RequestMethod.GET)
    public String getIndex(ModelMap model) {
        model.addAttribute("admins",userService.findAllAdmins());
        return "admin/admins/list";
    }

@ModelAttribute("user")
    public AdminUser getAdminUser(@RequestParam("id") Integer id) {
        return userService.findAdminById(id);
    }

    @RequestMapping (method = RequestMethod.POST) 
    public String registerAdmin(@Valid @ModelAttribute("user") AdminUser user, BindingResult bindingResult, ModelMap model)  {

        model.addAttribute("roles", userRoleService.findAll());
        if (bindingResult.hasErrors()) {
            return "admin/admins/form";
        } 
        else if (!user.getPassword().equals(user.getConfirmPassword())) {
            bindingResult.addError(new FieldError("user","confirmPassword", "Passwords don't match"));
            return "admin/admins/form";
        }
        else {
            user.setPassword(passwordEncoder.encodePassword(user.getPassword(), null));
            try {
                userService.save(user);
                return "redirect:/admin/admins";
            } catch(ApplicationException ce) {
                bindingResult.addError(new FieldError("user", "email", "Email already registered"));
                return "admin/admins/form";
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:42:37.567

你可以让你的 id 参数可选

```
@ModelAttribute("user")
public AdminUser getAdminUser(@RequestParam(value="id", required=false) Integer id) {
    if(id==null){
        return new AdminUser();
    }
    return userService.findAdminById(id);
} 
```

编辑：或松开 ModelMap 参数：

```
@RequestMapping (method = RequestMethod.GET)
public ModelAndView getIndex() {
    return new ModelAndView("admin/admins/list", "admins",userService.findAllAdmins());
} 
```

# html - H.264 流式视频在 Chrome 23 中有效，但在 Chrome 24 中无效，不同的请求标头......相同的cherrypy后端

> ID：14737119
> 
> 赞同：3
> 
> 时间：2013-02-06T19:25:04.067
> 
> 标签：html, google-chrome, html5-video

在我目前正在处理的网站上，我们使用带有 h.264 的 html5 视频。如果它不可用，我们使用 Flash 后备。flash 后备在 chrome 23 和 24 中都可以正常工作，但 html5 视频仅适用于 chrome 23。

我在每个版本的 chrome 中打开了它自己的选项卡中的视频文件（然后 chrome 有一个简单的 html 引导片段来播放它）并保存了请求和响应信息。它实际上提出了三个请求，但我发现第一个是最有趣的。这是两者的请求和响应的标头信息。

铬 23：

```
Request:
URL:http://localhost:8040/media/preview/ab0eca40ffee4f/c268a6240b08ff/MP4_360
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Cookie:beaker.session.id=c59137ff184428045f317d6b2385aa384    4c30f
Host:localhost:8040
Pragma:no-cache
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko)     Chrome/23.0.1271.97 Safari/537.11
-------------------------------
Response Headersview source
Accept-Ranges:bytes
Content-Disposition:inline; filename="2af3dc86e4fae33370c268a6240b08ff"
Content-Length:5817287
Content-Type:video/mp4
Date:Wed, 06 Feb 2013 15:51:25 GMT
Last-Modified:Fri, 07 Dec 2012 19:47:51 GMT
Server:CherryPy/3.2.0 
```

铬 24：

```
Request URL:http://localhost:8040/media/preview/ef5a0220219b8e0/a4fe5f21c26f/MP4_360
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:beaker.session.id=5c080dc2b3343dc725ea368dae30cb1bc324
Host:localhost:8040
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.68 Safari/537.17
-----------------------------------
Response Headersview source
Accept-Ranges:bytes
Content-Disposition:inline; filename="e10cce5997514651851aa4fe5f21c26f"
Content-Length:3632612
Content-Type:video/mp4
Date:Wed, 06 Feb 2013 18:45:04 GMT
Last-Modified:Tue, 05 Feb 2013 20:15:20 GMT
Server:CherryPy/3.2.0 
```

有没有其他人经历过这个？我也愿意按照要求做进一步的测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:56:13.527

You may fix this problem by doing the following: There is an option in chrome://flags called "Disable hardware-accelerated video decode" enable it.

[https://productforums.google.com/forum/?fromgroups=#!searchin/chrome/mp4/chrome/ilqhiTTZcaY/hkPGA3GK6BIJ](https://productforums.google.com/forum/?fromgroups=#!searchin/chrome/mp4/chrome/ilqhiTTZcaY/hkPGA3GK6BIJ)

And this is a bug filed three weeks ago: [http://src.chromium.org/viewvc/chrome?view=rev&revision=178906](http://src.chromium.org/viewvc/chrome?view=rev&revision=178906). According to its status it is “Fixed”. However, later on in the comments it is saying the fix might be pushed for version M25 and is fixed with version 26.0.1395.1.

As a test, I have downloaded version 26 of Chrome (the developer version), (re)disabled the “Disable hardware-accelerated video decode”, and everything works fine. If you want to do the same, visit Chrome’s release page and choose “Dev channel for Windows”.

# c++ - 空析构函数有什么作用？

> ID：14737121
> 
> 赞同：5
> 
> 时间：2013-02-06T19:25:15.027
> 
> 标签：c++, destructor

我听说空的析构函数不做任何事情并且调用它不会删除对象。但在代码中：

```
#include <iostream>
#include <set>

class a
{
public:
    ~a() 
    {}
std::set <int> myset;
};

int main()
{
a object;
object.myset.insert(55);
object.~a();
object.myset.insert(20);
std::cout << object.myset.size();
} 
```

我得到：“ *** glibc detected *** /.app: double free or corruption (fasttop):” 然后是“ABORT”。

如果重要的话，我启用了 c++11 标志。那么空构造函数实际上是做什么的呢？它做了一些事情，而我读到它没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T19:28:43.317

您的析构函数可能看起来是空的，但它实际上是在破坏成员变量。在这种情况下，它正在破坏`myset`，因此后续`insert(20)`崩溃。

如果你的类没有非 POD 成员变量，那么空的析构函数将真的什么都不做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T19:34:18.127

您的问题提到了几个不同的问题。

首先，有错误消息。“双重释放”可能是因为析构函数被调用了两次：一次由您调用，一次由 C++ 运行时调用，此时变量不再在范围内（在`main`函数的右大括号处）。

其次，关于空析构函数没有删除对象的问题。实际上，它不会从内存中删除对象，但会破坏其成员变量。因此，在您手动调用析构函数后，内存`object`仍然被分配，但`myset`不再有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:30:16.027

超出范围时调用析构函数。我强烈建议不要调用析构函数，然后尝试访问父类的成员或成员函数。由于您的类具有成员变量`myset`，因此在手动调用时会释放这些成员变量，因此会出现分段错误。

当您完全完成对象时，可以将析构函数视为“清理”。在任何情况下都不应手动调用它。

伪代码：

```
class MyClass {
public:
  MyClass() {
    std::cout << "Constructor" << std::endl;
  }

  ~MyClass() {
     std::cout << "~Destructor" << std::endl;
   }
}

int main(int argc, char** argv) {
   MyClass myClass;
   return 0;
} 
```

你应该看到这个输出：

`Constructor`

`~Destructor`

如您所见，不需要手动调用。

# wpf - 使用 DataBinding 值的 MarkupExtension

> ID：14737126
> 
> 赞同：10
> 
> 时间：2013-02-06T19:25:35.520
> 
> 标签：wpf, data-binding, markup-extensions

我正在尝试创建一个 WPF MarkupExtension 类，该类提供来自我的文本翻译类的翻译文本。翻译的东西很好用，但需要一个带有文本键的静态方法调用来返回翻译后的文本。像这样：

```
ImportLabel.Text = Translator.Translate("import files");
// will be "Dateien importieren" in de or "Import files" in en 
```

它的特点是它接受一个计数值以提供更好的措辞。

```
ImportLabel.Text = Translator.Translate("import n files", FileCount);
// will be "Import 7 files" or "Import 1 file" 
```

另一个例子：如果某件事还需要 4 分钟，那么它与只需要 1 分钟的词是不同的。如果文本键“minutes”被定义为任何数字的“Minuten”和计数为 1 的“Minute”，则以下方法调用将返回要使用的正确单词：

```
Translator.Translate("minutes", numberOfMinutes)
// will be "minute" if it's 1, and "minutes" for anything else 
```

现在在 WPF 应用程序中，有很多 XAML 代码，其中包含大量文字文本。为了能够在不发疯的情况下翻译它们，我需要一个标记扩展，我可以传递我的文本键并在运行时返回翻译后的文本。这部分相当容易。创建一个继承自 MarkupExtension 的类，添加一个接受文本键作为参数的构造函数，将其存储在私有字段中，并让其 ProvideValue 方法返回存储键的翻译文本。

我真正的问题是：如何让我的标记扩展接受一个计数值，使其成为数据绑定并且当计数值更改时翻译文本会相应更新？

它应该像这样使用：

```
<TextBlock Text="{t:Translate 'import files', {Binding FileCount}}"/> 
```

每当 FileCount 的绑定值更改时，TextBlock 必须接收新的文本值以反映更改并仍然提供良好的措辞。

我在那里找到了一个类似的解决方案：http: [//blogs.microsoft.co.il/blogs/tomershamam/archive/2007/10/30/wpf-localization-on-the-fly-language-selection。 aspx](http://blogs.microsoft.co.il/blogs/tomershamam/archive/2007/10/30/wpf-localization-on-the-fly-language-selection.aspx)但是，尽管我尝试遵循它，但我无法理解它的作用或它为什么会起作用。一切似乎都发生在 WPF 内部，提供的代码仅将其推向正确的方向，但尚不清楚如何。我无法适应它来做任何有用的事情。

我不确定让翻译语言在运行时更改是否有用。我想我需要另一个级别的绑定。为了保持较低的复杂性，我不会在基本版本工作之前尝试这样做。

目前没有我可以给你看的代码。它只是处于一种可怕的状态，它唯一做的就是抛出异常，或者不翻译任何东西。任何简单的例子都非常受欢迎（如果这种情况存在的话）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-12T18:41:57.780

没关系，我终于发现了引用的代码是如何工作的，并且可以想出一个解决方案。这里只是对记录的简短解释。

```
<TextBlock Text="{t:Translate 'import files', {Binding FileCount}}"/> 
```

这需要一个类 TranslateExtension，继承自 MarkupExtension，构造函数接受两个参数，一个 String 和一个 Binding。将这两个值都存储在实例中。然后类的 ProvideValue 方法使用它获得的绑定，向其中添加自定义转换器实例，并从 binding.ProvideValue 返回结果，这是一个 BindingExpression 实例 IIRC。

```
public class TranslateExtension : MarkupExtension
{
    public TranslateExtension(string key, Binding countBinding)
    {
        // Save arguments to properties
    }
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        countBinding.Converter = new TranslateConverter(key);
        return countBinding.ProvideValue(serviceProvider);
    }
} 
```

转换器，比如 TranslateConverter 类，有一个构造函数，它接受一个参数，一个字符串。这是我在上面的 TranslateExtension 中的关键论点。它会记住它以备后用。

每当 Count 值更改（它通过绑定）时，WPF 将重新请求其值。它似乎从绑定的源头，通过转换器，到达显示它的表面。通过使用转换器，我们根本不必担心绑定，因为转换器将绑定的当前值作为方法参数获取，并期望返回其他内容。计数值（int）输入，翻译文本（字符串）输出。这是我的代码。

因此，转换器的任务是使数字适应公式化的文本。它为此使用存储的文本密钥。所以发生的事情基本上是一种向后的数据流。与其将文本键作为主要信息并添加计数值，我们需要将计数值视为主要信息，只需将文本键用作辅助参数即可使其完整。这并不完全简单，但绑定需要成为主要触发器。由于密钥不会更改，因此可以将其永久存储在转换器的实例中。翻译文本的每一次出现都会得到它自己的转换器副本，每个都有一个单独的键编程。

这是转换器的样子：

```
class TranslateConverter : IValueConverter
{
    private string key;
    public TranslateConverter(string key)
    {
        this.key = key;
    }
    public object Convert(object value, ...)
    {
        return Translator.Translate(key, (int) value);
    }
} 
```

这就是魔法。添加错误处理和更多功能以获得解决方案。

# java - 如何强制 JTextPane 不转到下一行？

> ID：14737128
> 
> 赞同：0
> 
> 时间：2013-02-06T19:25:44.283
> 
> 标签：java, swing, jtextpane

当文本到达其边界时，我需要使用 a`JTextPane`作为`JTextField.`我`JTextPane`的换行符，但我希望它继续第一行而不是下一行。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:27:49.417

有点脏，但是：

```
JTextPane textPane = new JTextPane ()
{
    @Override
    public Dimension getPreferredSize ()
    {
        Dimension size = super.getPreferredSize ();
        size.width = 1000000;
        return size;
    }

    @Override
    public Dimension getMaximumSize ()
    {
        Dimension size = super.getMaximumSize ();
        size.width = 1000000;
        return size;
    }

    @Override
    public Dimension getPreferredScrollableViewportSize ()
    {
        return super.getPreferredSize ();
    }

    @Override
    public boolean getScrollableTracksViewportWidth ()
    {
        return false;
    }
};

JFrame frame = new JFrame ();
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
frame.getContentPane ().setLayout (new BorderLayout ());
frame.getContentPane ().add (
    new JScrollPane (textPane, JScrollPane.VERTICAL_SCROLLBAR_NEVER, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER), BorderLayout.CENTER);
frame.pack ();
frame.setVisible (true); 
```

您还需要以某种方式阻止用户输入换行符。

# python - Python在特定条件后获取下一行

> ID：14737130
> 
> 赞同：0
> 
> 时间：2013-02-06T19:25:49.287
> 
> 标签：python, url, python-2.7

我正在尝试找到一种在 url 页面中返回值的好方法。

我希望每次列出“span class =”按钮时我都可以抓住下一行

```
“跨度类=”按钮”
0.87

```

我想得到 0.87

我在尝试：

```
 import urllib

 url = 'http://test.com'
 sock = urllib.urlopen(url)
 content = sock.read().splitlines()
 sock.close()

 for i in content:
     i = i.strip() 
```

这是我卡住的地方，我如何获得下一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:36:35.173

如果这是 HTML，你可以使用像[BeautifulSoup这样的 html 解析器](http://www.crummy.com/software/BeautifulSoup/)

```
buttons = soup.findAll('span', {'class': 'button'})
for button in buttons:
  button.nextSibling 
```

这个用法看起来像是在最新版本的美汤中[`nextSibling`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#next-sibling-and-previous-sibling)改成了？`next_sibling`

如果您的数据是，Python 有一个内置的 HTMLParser

```
<span class="button">
0.87
</span> 
```

[您可以像示例](http://docs.python.org/2/library/htmlparser.html#example-html-parser-application)中那样创建一个类

# sql-server-2008 - 使用 sql 显示存储过程

> ID：14737138
> 
> 赞同：-1
> 
> 时间：2013-02-06T19:26:08.573
> 
> 标签：sql-server-2008

当我拥有存储过程的名称和数据库时，我需要使用 SQL 查询在存储过程中显示整个代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:29:20.973

`sp_helptext`似乎它可能对你有用。语法[在这里](http://blog.sqlauthority.com/2007/05/25/sql-server-stored-procedure-to-display-code-text-of-stored-procedure-trigger-view-or-object/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:30:42.653

尝试这个：

```
SELECT [definition]
FROM sys.sql_modules
WHERE object_id = OBJECT_ID('dbo.YourStoredProcNameHere') 
```

适用于 SQL Server 2005 及更高版本。

# ruby-on-rails - 空集合检查返回 false 且没有条目（Ruby on Rails）

> ID：14737148
> 
> 赞同：5
> 
> 时间：2013-02-06T19:26:31.777
> 
> 标签：ruby-on-rails, ruby, collections

我有 Customer 模型和 Device 模型，以及 Customer 模型`has_many :devices`和 Device 模型`belongs_to :customer`。我正在尝试显示在客户主页上添加设备的表单（如果`customer.devices.empty?`是）`true`，或者只是显示客户的设备和随附的详细信息（如果`customer.devices.empty`是）`false`。

我的问题是`customer.devices.empty?`总是返回错误。通过一些测试，我发现它`customer.devices.count`总是会显示正确数量的设备，但是我只能`customer.devices.empty?`在使用 Rails 控制台时获得所需的行为。

我可以简单地检查 的值`customer.devices.count`，但我真的很想按照（我认为）它们的意图使用`empty?`或检查。`any?`

问题本身已被描述，但如果您想查看代码...

```
 <% if customer.devices.count == 0 %>
     Count is 0 <!-- This is displayed on the page -->
   <% end %>
   <% if customer.devices.empty? %>
     Customer has no devices! <!-- This is NOT displayed on the page -->
   <% end %>
   <% if customer.devices.any? %>
     Customer has <%= pluralize(customer.devices.count, "device") %>.
     <!-- The line above prints "Customer has 0 devices." -->
   <% end %> 
```

差点忘了我的礼貌——提前感谢所有答案。

-毫米

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T19:31:28.600

使用`exists?`代替`empty?`：

```
customer.devices.exists? 
```

不同之处在于`exists?`通过查询 API 检查数据库，而`empty?`将关联内容检查为标准 Enumerable（可能是脏的/修改的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:38:42.153

根据您的评论`exists`，`count`将触发`DB`查询以检查相关设备。`DB`当您使用 build 时，它不会保存在`exists`返回`false`和`count`返回`0`中。当你使用`blank`它会返回`false`这意味着它有一些`devices`

```
customer.devices.blank? 
```

# php - php imagick 错误（用于 php 版本 5.3.1.3 和 wamp 服务器的 ImageMagick 6.5.4 库，系统 32 位）

> ID：14737150
> 
> 赞同：0
> 
> 时间：2013-02-06T19:26:35.620
> 
> 标签：php, imagemagick, imagick

我已经为 php 版本 5.3.1.3 和 wamp 服务器安装了 ImageMagick 6.5.4 库，系统 32 位。

我尝试对图像进行模糊处理并绘制圆圈和一些图元，一切都以正确的方式进行。但是当我尝试一些具有 imagick 语句的代码时，我得到了这个结果

> 致命错误：在第 2 行的 C:\wamp\www\t\code.php 中找不到类 'Imagick'

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:22:40.333

Imagick 需要在您的 php.ini 文件中激活，在您的情况下，您需要正确的 imagick.dll 文件来配合它。这可能是一件令人沮丧的事情，因为您需要正确的 .dll 才能与 php 版本一起使用，并且必须使用正确版本的东西进行编译 - 现在不记得到底是什么了。

它也没有得到很好的支持，我发现使用起来非常令人沮丧。我建议你坚持使用 exec() 和命令行。

# c# - 将结构从应用程序传递到类库

> ID：14737151
> 
> 赞同：0
> 
> 时间：2013-02-06T19:26:37.377
> 
> 标签：c#

我有一个类库，其中包含一个 API 函数，该函数将处理所有处理，我的应用程序有一个结构和一些将传递给 API 函数的方法。如何将结构从我的应用程序传递到 .dll？

在我的应用程序中：

```
private void IFaceConn_Load(object sender, EventArgs e)
    {
        Interface.RegisterInterface(iface, ref cfg, ConnectFn, DisconnectFn);
    } 
```

在我的 .dll 中：

```
public void RegisterInterface(Enum iface, "struct goes here"  Func<int> connect, Func<int> disconnect)
    {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:29:07.543

如果你问结构参数声明应该是什么样子：

```
public void RegisterInterface(Enum iface, ref StructType structType, Func<int> connect, Func<int> disconnect)
{
} 
```

# php - setlocale(LC_ALL, 'it_IT'); 已设置，但仍为英文日期

> ID：14737153
> 
> 赞同：7
> 
> 时间：2013-02-06T19:26:48.547
> 
> 标签：php, date, strtotime, setlocale

我有这段代码，它通过 json_decode 检索我最新的推文、它们的日期等。

```
<?php setlocale(LC_ALL, 'it_IT'); ?>
<?php include("twitter_auth.php");
echo "<ul style='color:#6E6E6E'>";
foreach ($twitter_data as $tweet)
{
    if (!empty($tweet)) {
        $text = $tweet->text;
        $text_in_tooltip = str_replace('"', '', $text); // replace " to avoid conflicts with title="" opening tags
        $id = $tweet->id;
        $time = strftime('%d %B', strtotime($tweet->created_at));
        $username = $tweet->user->name;
    }
    echo '<li><span title="'; echo $text_in_tooltip; echo '">'; echo $text . "</span><br>
        <a href=\"http://twitter.com/"; echo $username ; echo '/status/'; echo $id ; echo '"><small>'; echo $time; echo '</small></a> - 
        <a href="http://twitter.com/intent/tweet?in_reply_to='; echo $id; echo '"><small>rispondi</small></a> - 
        <a href="http://twitter.com/intent/retweet?tweet_id='; echo $id; echo '"><small>retweet</small></a> - 
        <a href="http://twitter.com/intent/favorite?tweet_id='; echo $id; echo '"><small>preferito</small></a></li>';
}

echo '</ul>';
?> 
```

问题是即使有 setlocale(LC_ALL, 'it_IT'); ，$time 也会输出类似“03 February”的内容。有什么错误？如何以意大利语输出日期？系统：PHP 5.4.11 和 nginx（在 Ubuntu 服务器上）。

**编辑：**我还运行了 dpkg-reconfigure 语言环境：

```
Generating locales...
  en_US.UTF-8... up-to-date
  it_IT.UTF-8... up-to-date
Generation complete. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T19:40:09.767

听起来很愚蠢，我解决了将行更改为：

```
<?php setlocale(LC_ALL, 'it_IT.UTF-8'); ?> 
```

# python - 具有集成包管理系统的 Python IDE

> ID：14737158
> 
> 赞同：1
> 
> 时间：2013-02-06T19:27:10.257
> 
> 标签：python, ide, package-managers

我的朋友通常会问我哪个 Python IDE 更易于使用，我没有给他们答案，因为根据他们的平台，包管理可能会很头疼。今天我尝试寻找一个带有某种集成包管理系统（例如 PIP）的 Python IDE，它询问用户是否喜欢 IDE 搜索在线存储库以查找丢失的包，然后安装它——就像他们最喜欢的 TeX 编辑器一样.

那么，你知道这样的IDE是否存在吗？如果没有，你知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-17T02:27:17.677

好吧，如果您处理 Django 开发，我认为您绝对应该查看提供与 pip 集成的[sourceLair 。](http://www.sourcelair.com)您只需右键单击您的 requirements.txt 文件，选择安装依赖项即可。

目前，您无法搜索 pip 包，但我想这可能是未来的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:36:05.813

我认为这主要与[python 包装仇恨](http://lucumr.pocoo.org/2012/6/22/hate-hate-hate-everywhere/)有关。二进制包管理对 Windows 用户非常重要（其中 Python 有很多，因为他们不将 Windows 视为第二类平台），并且在 Windows 上使用 distutils 构建许多 C 扩展通常不起作用（尝试 'pip install例如，Windows 上的 numpy'）。python 中的“打包”状态通常令人困惑；我想说这是没有人（据我所知）努力将现有工具集成到他们的 IDE 中的主要原因。

顺便说一句，如果你想要一些免费的东西并且熟悉 eclipse，我推荐 pydev。

# entity-framework - 实体框架建模 - 如何建模这个简单的数据结构？

> ID：14737160
> 
> 赞同：0
> 
> 时间：2013-02-06T19:27:14.030
> 
> 标签：entity-framework, entity-framework-4.1, entity-framework-mapping

![数据结构](../Images/aeca6bd24d2b51ae4014e0b483ffbbb5.png)

这是一个相对简单的数据结构，但我很难找出最佳的 EF 策略来对其进行建模。这显然不是 Table Per Hierarchy。所以我尝试了每个类型的表，它不喜欢客户和个人或客户和个人之间的关系。在阅读了每个具体类型的表之后，它也不遵循该模型。S 如何为这个 ERD 建模？

#

更新

#

它背后的业务用例是我们与几家公司打交道。其中一些公司收购了其他公司。母公司 (Acme) 是长期客户。子公司（Zeta）是长期客户。当 Acme 收购 Zeta 时，他们指定了一名负责处理公司之间关系的人（Adam）。Adam 现在有 2 个不同的电子邮件地址需要收到事件通知。adam@acme.com 接收客户通知。adam@zeta.com 获取客户端通知。这就是我让它像原来那样建模的原因。Adam 有点强迫症，喜欢将他的通知分开到单独的邮箱中。作为一个程序员，我不喜欢 Adam。:D

除了客户和客户之外，系统中还有其他几个分类。我们还有供应商、技术人员和分销商。我最终将它建模为与以下建议非常相似，但将电子邮件表拆分为特定类型的表（CustomerEmail 和 ClientEmail）。不完美，但为了“完成它”，它可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:14:23.763

> 一个人既可以是客户，也可以是顾客。

然后`Client`并且`Customer`不能继承自`Person`. 你必须用合成来建模。**不是**：A`Person` **是一个** `Client`或`Customer`。**相反**： A`Person` **有一个**属性是 a`Client`和/或`Customer`。

对于 EF，这将是两个一对一的关系：

```
public class Person
{
    public int PersonId { get; set; }
    public Client Client { get; set; }
    public Customer Customer { get; set; }
} 
```

`Client`并且`Customer`可以`Person`参考参考`Person`。（他们不需要此引用，但通过此导航属性启用对 FirstName 和 LastName 的访问是有意义的。）

```
public class Client / Customer
{
    public int PersonId { get; set; }
    public Person Person { get; set; }
} 
```

我假设 Person 不需要总是*同时*具有 a`Client`和`Customer`属性，但有时只有一个（甚至为零？）。在这种情况下`Person`is 两个关系中的主体和`Client`/`Customer`是从属：它们**必须**具有对 a 的引用`Person`，但`Person`唯一具有对and的**可选**引用。使用 Fluent API 可以这样建模：`Client``Customer`

```
modelBuilder.Entity<Person>()
    .HasOptional(p => p.Client)
    .WithRequired(c => c.Person);

modelBuilder.Entity<Person>()
    .HasOptional(p => p.Customer)
    .WithRequired(c => c.Person); 
```

`Person`和之间的关系`Note`是两个普通的一对多关系。`Person`可以有两个导航集合...

```
public ICollection<Note> NotesAsNotator { get; set; }
public ICollection<Note> NotesAsNotatee { get; set; } 
```

...并且`Note`可以有两个引用`Person`以及两个外键属性（它们不需要在模型中公开，但通常很有帮助）：

```
public int NotatorIDFK { get; set; }
public Person Notator { get; set; }

public int NotateeIDFK { get; set; }
public Person Notatee { get; set; } 
```

并且使用 Fluent API 定义的关系如下：

```
modelBuilder.Entity<Person>()
    .HasMany(p => p.NotesAsNotator)
    .WithRequired(n => n.Notator)
    .HasForeignKey(n => n.NotatorIDFK)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Person>()
    .HasMany(p => p.NotesAsNotatee)
    .WithRequired(n => n.Notatee)
    .HasForeignKey(n => n.NotateeIDFK)
    .WillCascadeOnDelete(false); 
```

级联删除必须在此处禁用（至少对于两个关系之一），否则`Person`可以`Notes`通过多个级联删除路径进行删除，因为这两个关系 - 至少在 SQL Server 中 - 被禁止。

`Location`and`Client`和 between `Location`and之间的关系又`Customer`是两个一对多的关系（总共四个），其中有四个集合 in`Location`和两个对`Location`in`Client`和的引用`Customer`。它们的建模类似于上述关系。

`Client`和`Email`和`Customer`和之间的关系`Email`是一个问题，因为它们是一对一的，但显然具有`PersonIDFK`EF 不支持的外键（具有唯一键约束？）。`Person`正如 Gert Arnold 在评论中已经问过的那样：为什么和之间的关系不是`Email`？这两种关系是否应该表达一个人可以拥有另一个电子邮件地址作为客户而不是客户？我不明白模型的这一部分。

# c# - 是否可以从一个带壳的进程中截获控制台输出？

> ID：14737161
> 
> 赞同：-3
> 
> 时间：2013-02-06T19:27:18.640
> 
> 标签：c#, console, console-application

我从我的进程中启动了一个控制台应用程序。它执行一项任务，将一堆东西写入控制台，然后终止。

鉴于我已经启动了控制台应用程序，我是否可以拦截正在写入控制台的内容？

请注意，有一个类似的[问题](https://stackoverflow.com/questions/10935745/is-it-possible-to-intercept-calls-to-console-from-another-process)，但它是针对 c++ 的，我不确定如何翻译语义。我过去曾问过类似的[问题](https://stackoverflow.com/questions/6024172/is-it-possible-to-intercept-console-output)，但这仅适用于我自己的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:35:48.803

```
Process process = new Process();
process.OutputDataReceived += LogOutput; 
```

您可以创建一个方法并将其放在 OutputDataReceived 事件中，然后再开始该过程。

```
private static void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    ...
} 
```

# java - 如何在 weka 中添加恶意特征进行分类作为数据集

> ID：14737167
> 
> 赞同：0
> 
> 时间：2013-02-06T19:27:36.400
> 
> 标签：java, classification, weka, webcontent

我正在做一个关于如何使用 weka 数据挖掘工具检测和分类恶意内容的项目。我开发了一种算法，但问题是我不知道如何以及在何处添加 javascript、html 或 URl 的恶意功能。

例如：如果有（///）三斜杠，则归类为恶意 URL。同样，我的算法将在其他特征上执行分类。

所以如果有人知道怎么做，请回复我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:39:32.867

这个问题更多的是关于特征提取或为您的项目查找域特征。通常 weka 使用现成的功能。因此，您的问题不是关于如何为您的项目查找和使用功能的 weka。

对于 html 和 javascript，我无能为力，但对于 URL 分类，以下文章可能会有所帮助。

Kan MY 和 Thi HON (2005)，“使用 URL 特征的快速网页分类”，第 14 届 ACM 信息和知识管理国际会议论文集。美国纽约州纽约市，第 325-326 页。ACM。

Ma J、Saul LK、Savage S 和 Voelker GM（2009 年），“超越黑名单：学习从可疑 URL 中检测恶意网站”，第 15 届 ACM SIGKDD 知识发现和数据挖掘国际会议论文集。美国纽约州纽约市，第 1245-1254 页。ACM。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-24T08:47:09.503

我们创建了变形恶意软件的 Windows API 调用序列。在我们的研究中，我们将每个软件产生的家族翻译成 8 个主要的恶意软件家族：木马、后门、下载器、蠕虫、间谍软件、广告软件、滴管、病毒。 [https://github.com/ocatak/malware_api_class](https://github.com/ocatak/malware_api_class)

# google-apps-script - Google 应用脚本 LDAP 访问控制

> ID：14737168
> 
> 赞同：3
> 
> 时间：2013-02-06T19:27:33.230
> 
> 标签：google-apps-script

有没有办法使用 LDAP 限制对基于 Google App Script 构建的应用程序的访问？Google App Script 可以访问 LDAP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:41:56.293

有几种方法可以查看这个问题。

1.  Apps 脚本无法直接访问您的 LDAP 系统。Apps 脚本能够对 REST/SOAP 服务进行 HTTP 调用，对外部数据库进行 JDBC 调用，但它没有内置对 LDAP 目录的支持。
2.  但是，如果您在 Google Apps 域中使用 Apps 脚本，则可以使用[Google Apps Directory Sync](http://support.google.com/a/bin/answer.py?hl=en&answer=106368)将 Google 用户帐户绑定到 LDAP 。设置完成后，您可以将您的 Apps 脚本部署为仅允许您域中的人使用，Google 会让他们登录，然后他们才能访问 Apps 脚本。

希望这可以帮助。

# ruby-on-rails - 用于 CSV 导入的 UTF 编码

> ID：14737171
> 
> 赞同：1
> 
> 时间：2013-02-06T19:27:49.410
> 
> 标签：ruby-on-rails, ruby

我正在尝试将 csv 文件导入到 rails 应用程序。我按照 RailsCast > [http://railscasts.com/episodes/396-importing-csv-and-excel中给出的指示](http://railscasts.com/episodes/396-importing-csv-and-excel)

不管我做什么，但我仍然收到以下错误：

PropertiesController#import 中的参数错误

UTF-8 产品中的无效字节序列。

我希望有人可以帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:14:09.957

您是否阅读过 CSV 文档？该[`open`](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-open)方法以及`new`动态支持多字节字符转换：

> 除非您的数据在 Encoding::default_external() 中，否则您必须提供带有嵌入式编码指示符的模式。CSV 将检查底层 IO 对象的编码（由您传递的模式设置）以确定如何解析数据。您可以提供第二个编码，以便在读取数据时对其进行转码，就像您可以通过对 IO::open() 的正常调用一样。例如，“rb:UTF-32BE:UTF-8”将从文件中读取 UTF-32BE 数据，但在 CSV 解析之前将其转码为 UTF-8。

# php - 如何在php echo中组合函数和字符串

> ID：14737173
> 
> 赞同：0
> 
> 时间：2013-02-06T19:27:55.730
> 
> 标签：php, string, function, echo

你能在同一个 echo 语句中结合 PHP 函数和字符串吗？目前，我有这段代码可以抓取照片的标题，然后将其缩短到 25 个字符或更少，停在最近的空白处，这样它就可以容纳整个单词。

```
echo substr($caption,0,strpos($caption,' ',25));
echo " ..."; 
```

示例输出：将“This is way too long to fit in this foobar small area preview box”更改为“This is way too long to...”

我希望能够将 'substr' 和 '...' 组合到同一个 echo 语句中。我尝试了以下方法，但没有奏效：

```
echo "{substr($caption,0,strpos($caption,' ',25))} ..."; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:31:52.013

非常适合这一点，并且比具有连接字符串开销的`,`快得多。`.`

```
 echo substr($caption, 0, strpos($caption, ' ', 25)), '...'; 
```

编辑：为了澄清，`,`只是简单地将所有字符串（用逗号分隔）发送到`echo`，因此等于单独的行`echo`语句。`DOT`运算符执行连接。您可以使用任意数量的逗号，即`echo strFunction1(), ' some text ', strFunction2(), '...';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:28:48.537

尝试：

```
echo substr($caption,0,strpos($caption,' ',25)) . '...'; 
```

# c# - LINQ 获取相关实体的数量（多对多）

> ID：14737175
> 
> 赞同：0
> 
> 时间：2013-02-06T19:28:03.940
> 
> 标签：c#, sql, linq

我需要返回以下选民的计数：

`Users`与 有多对多的关系`Voters`。我想返回`Voters`与 相关的计数`Users`。我试过这个：`db.Users.Voters.Count()`但失败得很惨，因为它无法识别`.Voters`.

有没有办法直接做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:35:33.537

我假设`.Voters`是单个`User`对象的属性，而不是`Users` *集合*的属性。在这种情况下，一种方法是：

```
db.Users.Sum(user => user.Voters.Count()); 
```

但这将重复计算用户共享的任何选民。相反，如果您想要*不同的*计数，请使用

```
d.Users.SelectMany(user=>user.Voters).Distinct().Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:30:26.943

这行得通吗？

```
db.Users.Voters != null ? db.Users.Voters.Count() : 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:29:29.800

您需要使用 SelectMany 从多对多中提取匹配项。

Users.SelectMany(x => x.Voters.Where(y => y.Users.Any(z => z.Id == x.Id))).Count()

# php - php关联两个ID

> ID：14737177
> 
> 赞同：0
> 
> 时间：2013-02-06T19:28:04.917
> 
> 标签：php, html, mysql

我正在做一个创建简单留言簿的学校项目。（我是初学者）我被困在如何将两个 id 相互关联起来。我有两个不同的数据库表，一个称为留言簿，用于存储帖子，另一个称为成员，用于存储注册成员。

现在我需要做的是将 PostID 与 UserID 关联起来，这样你就可以看到谁写了哪个帖子。现在，当一个成员登录时，它说所有帖子都是由该用户撰写的，如果我与另一个用户一起登录，它说该用户已经撰写了所有帖子。

这是我的 home.php 文件的代码，其中包含留言簿我还有一个 guestbookuservalidation 文件，如果您需要，我可以发布它？

```
 <?php
session_start();
$username = $_SESSION['username'];
if($_SESSION['login'] == 1)     //om sessionen är 1 så

{
echo "<h1>Välkommen till gästboken $username</h1>";

 // Connect to the database
 mysql_connect("localhost", "root", "");
 mysql_select_db("guestbookdatabase");

//******************************************************************//
//Form and add stuff

echo "<h2>Posta till Gästboken</h2>
<form action='home.php' method='post'>
<table>
<tr>
<td>Titel:</td>
<td><input type='text' name='titel' style='width: 300px;'</td>
</tr>
<tr>
<td>Inlägg:</td>
<td><textarea name='inlägg' style='width: 300px; height: 100px;'></textarea></td>
</tr>
<tr>
<td></td>
<td><input type='submit' name='postknapp' value='Posta'</td>
</tr>
</table>
</form>";

//******************************************************************//
//Display stuff
echo "<h2>Nuvarande Poster</h2>";

if ($_POST['postknapp']) {

$title = strip_tags($_POST['titel']);
$message = strip_tags($_POST['inlägg']);

if ($title && $message) {

    //Lägg till i databasen
    mysql_query("INSERT INTO guestbook (Title,Post) VALUES ('$title','$message')");

    echo "Ditt inlägg har lagts till i gästboken!"; 

}
else

echo "Du har inte fyllt i nödvändig information för att kunna göra ett inlägg.";

}

$query = mysql_query("SELECT * FROM guestbook ORDER BY PostID DESC");
$sql = mysql_query("SELECT * FROM members WHERE Username = $username");
$numrows = mysql_num_rows($query);
if ($numrows > 0){

while ( $row = mysql_fetch_assoc($query) ) {
    $id = $row['PostID'];
    $name = $sql;
    $title = $row['Title'];
    $message = $row['Post'];
    $date = $row['Timestamp'];

    $message = nl2br($message);

    echo "<div> 
    Av <b>$name</b> vid <b>$date</b><br /> 
    <h2>$title</h2> <p>
    $message
    </div> <hr />";

}

}
else
echo "Inga inlägg hittades.";

//*****************************************************************//

mysql_close();

?>

<a href="logga_ut.php">Logga ut</a>

<?php

}
else // om session inte är 1 så 
{
echo "Du har INTE tillåtelse till gästboken! Klicka på länken för att logga in!";
?>
<p>
<br/><a href="index.html">Till login >></a>
<?php   
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:34:04.533

在您的数据库中，该`Members`表应具有以下两列：

1.  ID
2.  姓名（如果您愿意，您可以将其分解为 2 列的名字和姓氏）

然后在`Messages`表格中，您需要：

1.  ID
2.  会员ID
3.  信息

当*成员*发布*消息*时，您需要将该成员的 id 与消息一起存储在 Messages 表中。

然后，您可以通过 memberId(s) 轻松过滤消息。您的查询将如下所示：

`SELECT Members.name, Messages.message FROM Members JOIN Messages WHERE Messages.memberId = Member.id ORDER BY PostID DESC`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:36:39.863

几点。如果你是为学校项目做这个，我绝对不会使用`mysql_*`函数。这些已被弃用，如果我正在评分，你会自动因为使用它们而失败。我建议查看与对应`mysqli_*`功能相似的功能`mysql_*`。

其次，您没有采取任何措施来防止 SQL 注入。同样，如果我给你评分，我会让你失望，因为你刚刚破坏了数据库。

最后，您要做的是在查询中使用 JOIN 条件。我对您的表结构知之甚少，因此您可能需要调整此示例：

```
SELECT *
FROM guestbook
INNER JOIN members ON members.MemberID = guestbook.MemberID <-- use whatever your member id fileds are in the two tables here
WHERE members.Username = ?
ORDER BY guestbook.PostID DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:36:54.830

确定

*   在您生成要添加的消息的查询中，`WHERE id = '$userid'` 以便仅为该用户生成消息。

    *   考虑您是否是新`MYSQL`来更改为`PDO`or `MYSQLI`,

# asp.net-mvc - 将数组绑定到多个 DropDownListFor

> ID：14737180
> 
> 赞同：3
> 
> 时间：2013-02-06T19:28:35.623
> 
> 标签：asp.net-mvc, razor, model-binding, html.dropdownlistfor

我有一个场景，我想从复选框列表中选择 3 个项目。这很好用，但如果复选框列表变长，页面看起来很笨拙。所以我想将其更改为 3 个下拉列表。所以页面要小得多，但没有一个下拉列表尊重所选值。

所以我尝试了这样的代码

```
@Html.DropDownListFor(model => model.CheckedLarcenyTypes, new SelectList(Model.LarcenyTypes, "Key", "Value", Model.CheckedLarcenyTypes.Length > 0 ? Model.CheckedLarcenyTypes[0] : null as Int32?), String.Empty, new { id = "Larceny1" })
@Html.DropDownListFor(model => model.CheckedLarcenyTypes, new SelectList(Model.LarcenyTypes, "Key", "Value", Model.CheckedLarcenyTypes.Length > 1 ? Model.CheckedLarcenyTypes[1] : null as Int32?), String.Empty, new { id = "Larceny2" })
@Html.DropDownListFor(model => model.CheckedLarcenyTypes, new SelectList(Model.LarcenyTypes, "Key", "Value", Model.CheckedLarcenyTypes.Length > 2 ? Model.CheckedLarcenyTypes[2] : null as Int32?), String.Empty, new { id = "Larceny3" }) 
```

现在下拉菜单已正确创建，并且正确的值正在绑定，并且在 POST 上，我看到值在视图模型中被发回。

我只是无法让选择值显示在下拉列表中。重新加载页面后，下拉菜单仍然是空白的。

我在这里做错了什么？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:37:36.607

[您的问题与此处](http://odetocode.com/blogs/scott/archive/2010/01/18/drop-down-lists-and-asp-net-mvc.aspx)描述的内容有关。

> 阅读选择
> 
> 如果您在回发期间使用相同的模型来接受来自编辑视图的输入，您可能会认为默认模型绑定器将使用所有专辑信息重新填充专辑集合并设置选定的专辑。不幸的是 - 网络无法以这种方式工作，并且相册集合将为空。

所以你必须有一个这样的 ViewModel：

```
public class LarcenyViewModel
{
    public int CheckedLarcenyType1 { get; set; }
    public int CheckedLarcenyType2 { get; set; }
    public int CheckedLarcenyType3 { get; set; }             
    public IEnumerable<SelectListItem> LarcenyTypes { get; set; }
} 
```

像这样填充 ViewModel：

```
LarcenyViewModel larcenyViewModel = new LarcenyViewModel();

// Use a database, enum or whatever to get the LarcenyTypes... :)
larcenyViewModel.LarcenyTypes = new SelectList(
               database.FindAllLarcenyTypes(), "LarcenyId", "Name"); 
```

查看代码：

```
@Html.DropDownListFor(model => model.CheckedLarcenyType1, Model.LarcenyTypes, String.Empty, new { id = "Larceny1" })
@Html.DropDownListFor(model => model.CheckedLarcenyType2, Model.LarcenyTypes, String.Empty, new { id = "Larceny2" })
@Html.DropDownListFor(model => model.CheckedLarcenyType3, Model.LarcenyTypes, String.Empty, new { id = "Larceny3" }) 
```

# ios - 从 UICollectionView 获取单元格的屏幕位置

> ID：14737183
> 
> 赞同：55
> 
> 时间：2013-02-06T19:28:45.183
> 
> 标签：ios, uicollectionview, uicollectionviewcell

这与其说是一个问题，不如说是对如何解决这个问题的解释。

首先要意识到的是`UICollectionView`确实继承自`UIScrollView`- 所以使用滚动视图的内容进行标准查找是最好的解决方案。

这是我要解决的问题：

我有一个`UICollectionView`在每个单元格中有不同项目的单元格 - 以及不同类型的单元格。我需要选择一个单元格以使单元格中的图像看起来扩大并占据整个屏幕。我如何进行扩展是另一篇文章。

挑战在于获得单元格在屏幕上的位置，以便动画部分有一个从哪里开始的参考点。

因此，为了便于获取此信息 - 请考虑以下代码：

第一个注意事项：

```
UICollectionView *picturesCollectionView;
DrawingCell cell; // -> instanceof UICollectionViewCell with custom items.

// first, get the list of cells that are visible on the screen - you must do this every time
// since the items can change...  This is a CRITICAL fact.  You do not go through the
// entire list of cells - only those the collectionView indicates are visible.  Note 
// there are some things to watch out for - the visibles array does not match the indexPath.item
// number - they are independent.  The latter is the item number overall the cells, while
// the visibles array may have only 2 entries - so there is NOT a 1-to-1 mapping - keep
// that in mind.

NSArray *visibles = [self.picturesCollectionView visibleCells];

// now, cycle through the times and find the one that matches some criteria.  In my
// case, check that the cell for the indexPath passed matches the cell's imageView...
// The indexPath was passed in for the method call - note that the indexPath will point
// to the number in your datasource for the particular item - this is crucial.

for (int i=0; i<visibles.count; i++) {
    DrawingCell *cell = (DrawingCell *)visibles[i];
    if (cell.imageView.image == (UIImage *)images[indexPath.item]) {

        // at this point, we've found the correct cell - now do the translation to determine
        // what is it's location on the current screen...  You do this by getting the contentOffset
        // from the collectionView subtracted from the cell's origin - and adding in (in my case)
        // the frame offset for the position of the item I wish to animate (in my case the
        // imageView contained within my custom collection cell...

        CGFloat relativeX = cell.frame.origin.x - self.picturesCollectionView.contentOffset.x + cell.imageView.frame.origin.x;
        CGFloat relativeY = cell.frame.origin.y - self.picturesCollectionView.contentOffset.y + cell.imageView.frame.origin.y;

        // I now have the exact screen coordinates of the imageView - so since I need this
        // to perform animations, I save it off in a CGRect - in my case, I set the size
        // exactly to the size of the imageView - so say you were doing a Flicker display
        // where you wanted to grow a selected image, you get the coordinates of the image
        // in the cell and the size from the displayed image...

        UIImageView *image = cell.imageView;

        // selectedCell is a CGRect that's global for the sake of this code...

        selectedCell = cell.frame;
        selectedCell.origin.x = relativeX;
        selectedCell.origin.y = relativeY;
        selectedCell.size.width = cell.imageView.frame.size.width;
        selectedCell.size.height = cell.imageView.frame.size.height;
    }
}

// done.  I have my coordinates and the size of the imageView I wish to animate and grow... 
```

希望这可以帮助其他试图弄清楚如何在单元格上以精确位置覆盖某些东西的人，等等......

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-09-07T13:33:12.613

```
-(void)collectionView:(UICollectionView *)cv didSelectItemAtIndexPath:(NSIndexPath *)indexPath;
{

UICollectionViewLayoutAttributes *attributes = [cv layoutAttributesForItemAtIndexPath:indexPath];

CGRect cellRect = attributes.frame;

CGRect cellFrameInSuperview = [cv convertRect:cellRect toView:[cv superview]];

NSLog(@"%f",cellFrameInSuperview.origin.x);
} 
```

它对我有用。你可以自己试试

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-06T19:42:14.310

好吧，您问题的第一部分非常清楚，第二部分？无论如何，如果您想要获得的是集合中选择单元格的框架，您可以使用它：

```
UICollectionViewLayoutAttributes *attributes = [self.collectionView layoutAttributesForItemAtIndexPath:indexPath];
CGRect cellRect = attributes.frame; 
```

更多信息[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayoutAttributes_class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-12-24T09:39:49.380

@Alivin 解决方案使用`layoutAttributesForItemAtIndexPath`有效，但仅适用于用户看到的呈现/当前滚动视图。

这意味着，如果您选择第**一个**显示的可见单元格，您将获得实际的`frame`，**但**如果您滚动，则`frame`会有偏差，您将无法获得所需的坐标。

这就是您需要使用*convertPoint:toView*的原因：

```
let realCenter = collectionView.convertPoint(cell.center, toView: collectionView.superview) 
```

基本上，这种方法在一个视图中获取一个点（cell.center）并将该点转换为另一个视图（collectionView.superview）坐标系，这正是我们所需要的。

因此，*realCenter*将始终包含实际选定单元格的坐标。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-15T23:19:50.767

我以前也这样做过。花了一段时间，但这是可能的。

你需要使用

```
[currentImageView.superview convertRect:currentImageView.frame toView:translateView] 
```

currentImageView 是用户点击的图像。它的超级视图将是单元格。您想将图像的矩形转换为它在不同视图上的实际位置。该视图在这里称为“translateView”。

那么什么是 translateView？在大多数情况下，它只是`self.view`.

这将为您的图像视图提供一个新框架，该框架将满足您的图像在您的桌子上的位置。一旦你有了它，你可以扩展图像以占据整个屏幕。

~~这是我用来点击图像然后展开图像并显示允许平移图像的新控制器的代码要点。~~

~~[https://gist.github.com/farhanpatel/4964372](https://gist.github.com/farhanpatel/4964372)~~

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-18T00:06:41.917

I needed to know the exact location of the cell's center that a user tapped relative to the UIWindow. In my situation the collectionView was a child of a view that took up 2/3 of the screen and its superview was a child of another view. Long story short using the collectionView.superView wasn't suffice and I needed the window. I used [Ohadman's answer above](https://stackoverflow.com/a/34450585/4833705) and this [answer from TomerBu](https://stackoverflow.com/a/56011410/4833705) to get the tapped location of the screen/window's coordinate system.

Assuming your app has 1 window that it isn't connected across multiple screens, I used both of these and the same exact location printed out.

***It's important to know that this is going to give you the exact middle of the cell (relative to the window). Even if you touch the top, left, bottom or right side of the cell it's going to return the coordinate of the center of the cell itself and not the exact location that you tapped.***

```
func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {

    guard let cell = collectionView.cellForItem(at: indexPath) as? YourCell else { return }
    guard let layoutAttributes = collectionView.layoutAttributesForItem(at: indexPath) else { return }
    guard let window = UIApplication.shared.keyWindow else { return }

    let touchedLocationInWindow = collectionView.convert(cell.center, to: window)
    print("OhadM's version: \(touchedLocationInWindow)")

    let cPoint = layoutAttributes.center
    let tappedLocationInWindow = collectionView.convert(cPoint, to: window)
    print("TomerBu's version: \(tappedLocationInWindow)")
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-03T02:54:51.463

另一种方法是使用这些事件来为您的问题提供大部分（如果不是全部）答案。

我假设一个触摸事件会启动所有这些，所以让我们实现一些有意义的东西；

```
 //First, trap the event in the collectionView controller with;

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

   // lets ensure it's actually visible (yes we got here from a touch event so it must be... just more info)
   if ([self.collectionView.indexPathsForVisibleItems containsObject:indexPath]) {

     // get a ref to the UICollectionViewCell at indexPath
     UICollectionViewCell *cell =(UICollectionViewCell *)[self.collectionView cellForItemAtIndexPath:indexPath];

     //finally get the rect for the cell
     CGRect cellRect = cell.frame

      // do your processing here... a ref to the cell will allow you to drill down to the image without the headache!!

  }
} 
```

哦……在你赶去欢乐时光之前，别忘了继续阅读；

```
 <UICollectionViewDelegate> (hint - it's needed) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-09T09:01:24.210

**快速 (v5) 简短答案**

```
let attributes = collectionView.layoutAttributesForItem(at: indexPath)
let cellRect = attributes?.frame
let cellFrameInSuperview = collectionView.convert(cellRect ?? CGRect.zero, to: collectionView.superview) 
```

您所需要的只是单元格的索引路径。

# spring - 如何将 Mule 表达式传递给 spring 属性

> ID：14737185
> 
> 赞同：2
> 
> 时间：2013-02-06T19:28:52.130
> 
> 标签：spring, mule

我正在寻找一种在运行时在 mule 流（Mule 3.3.0）中将异常消息分配给 spring 属性的方法

这就是我的代码片段的样子：

```
 <catch-exception-strategy>
            <logger message="----->Exception is #[exception.causeException]"
                level="INFO" />
            <custom-transformer
                class="com.company.transformer.VelocityMessageTransformer">
                <spring:property name="velocityEngine" ref="velocityEngine" />
                <spring:property name="templateName" value="soap11Fault.vm" />
                <spring:property name="beanClass">
                    <spring:bean parent="abstractSoap11ClientFault">
                        <spring:property name="faultString" value="Invalid Request" />
                        <spring:property name="detail" value="${exception.causeException}" />
                    </spring:bean>
                </spring:property>
            </custom-transformer>
        </catch-exception-strategy> 
```

我想在`detail`这里为属性分配异常原因：

```
<spring:property name="detail" value="${exception.causeException}" /> 
```

但是 spring 正在属性文件中寻找这个属性。我也试过这样做

```
 <spring:property name="detail" value="${#[exception.causeException]}" /> but doesn't work. 
```

有没有办法在运行时将 Mule 表达式传递给 Spring 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:34:18.423

属性是在应用程序初始化期间设置的：您要传递的值是在运行时评估的，因此无法正常工作。

您需要做的是进行`com.company.transformer.VelocityMessageTransformer`扩展`org.mule.transformer.AbstractMessageTransformer`。然后，您必须覆盖`transformMessage(MuleMessage message, String outputEncoding)`，这将使您能够访问当前消息及其相关的异常有效负载。异常有效负载是您通过`#[exception]`表达式获得的。

# c++ - sqlite3 - 如何与 C++ 一起使用

> ID：14737196
> 
> 赞同：-2
> 
> 时间：2013-02-06T19:29:34.000
> 
> 标签：c++, sqlite

我找到了几个示例代码源（例如在[此处](http://www.sqlite.org/quickstart.html)找到的），它们表明包含将允许使用该库。它似乎对我不起作用。在 C++ 中使用 sqlite 启动项目的正确方法是什么？

以下错误是我要回来的：

```
Undefined symbols for architecture x86_64:
 "_sqlite3_close", referenced from:
  _main in ccjxXmWk.o
 "_sqlite3_errmsg", referenced from:
  _main in ccjxXmWk.o
 "_sqlite3_exec", referenced from:
  _main in ccjxXmWk.o
 "_sqlite3_free", referenced from:
  _main in ccjxXmWk.o
 "_sqlite3_open", referenced from:
  _main in ccjxXmWk.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:44:34.650

在您的项目中包含合并（`sqlite3.c`文件）（并确保它被编译为 C，而不是 C++）。

或者，链接到 SQLite 库。

# php - 从两种不同的url格式中提取数字的单个正则表达式？

> ID：14737201
> 
> 赞同：1
> 
> 时间：2013-02-06T19:29:48.853
> 
> 标签：php, regex

我正在尝试创建一个正则表达式，可用于从 PHP 函数中的两个不同 url 中提取数字。这些网址的格式是：

```
/t/2121/title/ 
```

和

```
/top2121.html 
```

我不擅长正则表达式，并且已经尝试过以下及其许多变体：

```
#^/t/(\d+?)/|/top(\d+?)\.html/#i 
```

这没有做任何事情，在阅读了许多有关正则表达式的网站和教程后，我仍然完全不知所措。是否有我可以创建的正则表达式允许我添加数字而不管输入的 url 格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:33:47.433

如果您只想要后面的第一个数字`t`而不管`/`介于两者之间，这样的事情可能会起作用：`#t/?(\d+)#i`

编辑：

示例：[http ://codepad.viper-7.com/0z3ee0](http://codepad.viper-7.com/0z3ee0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:30:19.860

正则表达式仅提取**数字**，同时检查 url 是否与接受的格式匹配：

`#^\/t(?:\/(\d+)\/[a-z_-]+\/?|op(\d+)\.html)$#i` *编辑：2组捕获*

在这里解释演示：[http ://regex101.com/r/dO5dI4](http://regex101.com/r/dO5dI4)

**变体 #2：** *在同一组中捕获*

`#^\/t(?|\/(\d+)\/[a-z_-]+\/?$|op(\d+)\.html$)#i`

在这里解释演示：[http ://regex101.com/r/cG9vC3](http://regex101.com/r/cG9vC3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:55:24.197

我能够让这个正则表达式匹配两种类型的 url 格式：

```
#^/(?:(?:t/)|(?:top))(\d+)(?:(?:\.html)|(?:/))#i 
```

如果有人有更有效的方式来执行相同的正则表达式，我很想听听。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T20:57:07.910

如果您有这些 URL 中的任何一个，则可以使用此表达式。您的号码应存储在您的第二个位置：

```
#^/t(op|/)(\d+)(\.html|/.*)#i 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T21:03:34.403

网址中是否会有您不关心的数字？如果没有，您可以通过捕获数字并忽略其余部分来保持简单：

```
#(\d+)# 
```

# javascript - javascript onclick 自定义光标

> ID：14737202
> 
> 赞同：1
> 
> 时间：2013-02-06T19:29:51.700
> 
> 标签：javascript, css

我一直在使用：

```
 <script>
function change()
{
document.body.style.cursor="url('xx/xx.cur'),auto";
}
</script>

<div onClick="change()"></div> 
```

它有效，但重要的是在没有点击时光标重置，所以我尝试了 onBlur，但它没有用。

最后我发现了这个：

```
<script type="text/javascript"> 
   function change() { 
   document.body.style.cursor=(document.body.style.cursor=="help") ? "default" : "help"; 
} 
</script> 
</head> 
<body> 
<div onmousedown="change()" onmouseup="change()">  </div> 
```

这就像一个魅力，但它未能用自定义 .curs 替换光标标准样式。

这里：

```
 function change()
{
document.body.style.cursor=(document.body.style.cursor=="url ('xx/xx3.cur')") ? "url ('xx/xx1.cur')" : "url ('xx/xx3.cur')";
}
</script>
</head>
<body>

<div onmousedown="change()" onmouseup="change()" id="container"> 
```

显然双括号很麻烦。我尝试了一切都没有成功。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:40:30.327

我可能会用一些简单的 CSS 魔法来解决这个问题。

我不会使用 javascript 实际为 body.style.cursor 分配一个值，而是在 html-tag 上切换一个类，该类依次显示正确的光标。

CSS：

```
html
{
    cursor: default;
}

html.help
{
    cursor: url('help.cur');
} 
```

Javascript：

```
function change()
{
    $("html").toggleClass("help")
} 
```

工作jsfiddle：http: [//jsfiddle.net/BV3kn/2/](http://jsfiddle.net/BV3kn/2/)

# java - 更改现有项目和新项目的 URI 默认 handle.net 域

> ID：14737204
> 
> 赞同：2
> 
> 时间：2013-02-06T19:30:02.217
> 
> 标签：java, dspace

我希望能够更改文章的永久 URL，这样我们就不必依赖 Handle.net 服务。

到目前为止，我在网上找到了以下内容，并且在对`dspace.cfg`文件进行更改后发现现有项目没有更改。

[如何在所有项目中将 uri 句柄从 http://hdl.handle.net/ 更改为 http://myip](http://dspace.2283337.n4.nabble.com/How-change-uri-handle-from-http-hdl-handle-net-to-http-myip-in-all-items-td3285730.html) (Nabble)

我有两个问题：

1.  您将如何着手并更改所有这些默认的 handle.net 域？
2.  为什么默认 URL 使用此域？这是一个很好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:24:12.807

1.  您将如何着手并更改所有这些默认的 handle.net 域？

    您可以使用 SQL 查询手动更新它。您应该`handle`在“项目”表下获得字段。

2.  为什么默认 URL 使用此域？这是一个很好的选择吗？

    [从句柄系统](http://www.handle.net/)报价

> Handle System 为数字对象的唯一和持久标识符提供高效、可扩展和安全的解析服务，是 CNRI 的组件

当您的存储库处于活动状态并且您已订阅 Handles 时。您将获得数字对象的唯一标识符，并且可以唯一地访问/识别。因此，即使您更改信息或更改位置。您的数字对象可以在不更改其标识符的情况下被识别。

当您允许从其他存储库收集数据或收集数据时，这也很有用。

# php - 使用 PHP 提取多个特定的 XML 属性

> ID：14737205
> 
> 赞同：0
> 
> 时间：2013-02-06T19:30:06.387
> 
> 标签：php, xml

我试图从一个软件生成的 XML 文件中提取几个属性，但我没有运气。

到目前为止我的代码看起来像这样；

```
$xml_feed_url = 'http://localhost/rest/getNowPlaying.view?u=USERNAMEt&p=PASSWORD&v=1.8.0&c=test';  
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL, $xml_feed_url);  
curl_setopt($ch, CURLOPT_HEADER, false);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
$xml = curl_exec($ch);  
curl_close($ch); 
echo $xml; 
```

此代码成功输出以下 XML 文件；

```
<?xml version="1.0" encoding="UTF-8"?>
<subsonic-response xmlns="http://subsonic.org/restapi" status="ok" version="1.8.0">  
  <nowPlaying>  
    <entry id="1805" parent="1798" title="Too Close" album="The Lateness Of The Hour" artist="Alex Clare" isDir="false" coverArt="1798" created="2012-05-22T13:12:29" duration="256" bitRate="320" track="4" discNumber="1" year="2011" genre="Pop" size="10283678" suffix="mp3" contentType="audio/mpeg" isVideo="false" path="Alex Clare/The Lateness Of The Hour/Alex Clare - Too Close.mp3" albumId="50" artistId="14" type="music" username="RestClient" playerId="8" minutesAgo="0"/>  
    <entry id="33664" parent="33642" title="Hot Ride" album="Always Outnumbered, Never Out Gunned" artist="The Prodigy" isDir="false" coverArt="33642" created="2012-05-10T00:31:16" duration="276" bitRate="128" track="5" discNumber="1" year="2004" genre="Other" size="5135448" suffix="mp3" contentType="audio/mpeg" isVideo="false" path="The Prodigy/Always Outnumbered, Never Out Gunned/The Prodigy - Hot Ride.mp3" albumId="2064" artistId="635" type="music" username="Revenant" playerId="6" playerName="test" minutesAgo="3"/>  
  </nowPlaying>  
</subsonic-response> 
```

我能够使用 foreach 循环（如下）成功提取特定属性，但我希望从一个用户而不是全部提取特定的多个属性。

```
foreach($xml->children()->children() as $second_gen){  
echo "User: ".$second_gen['username'];  
echo "Artist: ".$second_gen['artist'];  
echo "Title: ".$second_gen['title'];  
echo "Album: ".$second_gen['album']; 
```

任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:30:09.613

使用 simple_xml 和 XPath 怎么样？

就像是...

```
$username='Revenant';
$xml->registerXPathNamespace("n", "http://subsonic.org/restapi");
$result=$xml->xpath("//n:entry[@username='$username']/@title | //n:entry[@username='$username']/@album | //n:entry[@username='$username']/@artist");

echo "$result[0] by $result[2] on the album $result[1]"; 
```

使用 PHP 5.4.4 测试

道

# android - 为什么我的后退按钮在关闭对话框片段后无法正常工作

> ID：14737206
> 
> 赞同：1
> 
> 时间：2013-02-06T19:30:11.130
> 
> 标签：android, back-button, android-dialogfragment

我创建了一个对话框片段，然后当我按下它时它被关闭。不幸的是，当我再次按下后退按钮时，什么也没有发生（应该发生的是我应该离开这个活动并转到上一个活动）。怎么可能？当我关闭片段（使用dismiss() 或后退按钮）时，它不应再捕获我的后退按钮按下（我不确定它是否确实捕获了该事件）。

谁能说出错误可能是什么？

下面的代码

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

    Fragment prev = getSupportFragmentManager().findFragmentByTag(
            "File Browser Fragmnent");
    if (prev != null) {
        ft.remove(prev);
    }
    ft.addToBackStack(null);
    FileBrowseDialog dialog = FileBrowseDialog.newInstance(currentVideoId);
    if (dialog.getDialog() != null)
        dialog.getDialog().setCanceledOnTouchOutside(true);
    dialog.setCancelable(true);

    if(darkenedOverlay != null && darkenedOverlay.getVisibility() != View.VISIBLE)
        darkenedOverlay.setVisibility(View.VISIBLE);
    ft.add(dialog, "File Browser Fragmnent");
    ft.show(dialog).commit(); 
```

然后当我按下后退按钮时，对话框片段消失（我不确定它是否只是隐藏或什么）而且这只发生在使用 ft.add() 和 ft.show().commit();

如果我使用下面的代码而不是 ft.add().show().commit() 它没有问题。

```
dialog.show(ft, "File Browser Fragment"); 
```

希望这里有人可以提供帮助，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:34:56.517

我找到了为什么会这样。发生这种情况是因为我使用 addToBackstack 基本上撤消了最后一个事务（对话框的创建）。如果我删除 addToBackstack 我不再有后退按钮的问题。

# php - 通过ajax调用从JSON数组中插入空值

> ID：14737208
> 
> 赞同：0
> 
> 时间：2013-02-06T19:30:18.757
> 
> 标签：php, jquery, ajax, json

我使用数组来存储值，然后使用 ajax 调用将数据发送到另一个页面以将它们插入数据库：这是使用 ajax 调用发送页面：

```
$(function () {
    $(".sch_button").click(function () {
        var element = $(this);
        var cou = $("#course2").val();
        var place = $("#place").val();
        var tutor = $("#tutor").val();
        var cost = $("#cost").val();
        var date1 = $("#datetime").val();
        var date2 = $("#endtime").val();
        var notice = $("#notice").val();
        var data = [{
            data: cou
        }, {
            data: place
        }, {
            data: tutor
        }, {
            data: cost
        }, {
            data: date1
        }, {
            data: date2
        }, {
            data: notice
        }];
        if (cou == '.....' || place == '' || tutor == '' || cost == '' || date1 == '' || date2 == '' || notice == '') {
            alert("Please ..Enter the data");

        } else {
            $("#flash").show();
            $("#flash").fadeIn(400).html('<img src="http://tiggin.com/ajax-loader.gif" align="absmiddle">&nbsp;<span class="loading">Loading...</span>');

            $.ajax({
                type: "POST",
                url: "insert.php",
                data: {
                    data: JSON.stringify(data)
                },
                cache: false,
                success: function (response) {
                    if (response.error) return;
                    //fire off other ajax calls
                    $(document).ajaxStop(function () {
                        location.reload(true);
                    });
                }
            });
            alert("done");
        }
        return false;
    });
}); 
```

这是 insert.php 中的接收页面：

```
include("../config.php");

$query_language = mysql_query("SET NAMES 'utf8'");  
$data           = $_POST['data'];
$data2          = json_decode($data, true);
$course         = $data2[0]['data'];
$place          = $data2[1]['data'];
$tutor          = $data2[2]['data'];
$cost           = $data2[3]['data'];
$date1          = $data2[4]['data'];
$start_dates    = date("Y-m-d", strtotime($data2[4]['data']));
$date2          = $data2[5]['data'];
$end_dates      = date("Y-m-d", strtotime($data2[5]['data']));
$notice         = $data2[6]['data'];
$insert_new_shc = mysql_query(
  "insert into scheduling (place, tutor, cost, start_date, end_date, period, notice, course_id ) ".
  "values ('$place', '$tutor', '$cost', '$start_dates', '$end_dates', '$diff', '$notice', '$course')")
  or die($insert_new_shc."<br/><br/>".mysql_error()
); 
```

在萤火控制台显示我的数据，如：

```
data[
    {
        "data": "127"
    },
    {
        "data": "1"
    },
    {
        "data": "2"
    },
    {
        "data": "3"
    },
    {
        "data": "4"
    },
    {
        "data": "5"
    },
    {
        "data": "6"
    }
] 
```

但在数据库中设置空值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:55:06.947

php.ini 文件的问题 但是我使用了第二种方法而不是编辑 php 。ini 文件，所以我必须修改插入页面，添加stripslash ....修改这一行：

```
 $data2 = json_decode($data, true); 
```

至

```
 $data2=json_decode(stripslashes($data), true); 
```

# android - 在两台设备上运行应用程序但其中一台崩溃

> ID：14737210
> 
> 赞同：0
> 
> 时间：2013-02-06T19:30:31.063
> 
> 标签：android, window, memory-leaks

这里真的需要一些帮助。我已经在几台设备上测试了我的应用程序，明天会有一个演示。

我有一个 HTC 欲望 C，与我一直在测试的相同软件版本完全相同。当我在新设备上安装我的应用程序时，它在尝试加载以下行的加载对话框时崩溃：

```
dialog = ProgressDialog.show(LocationSearchForPeople.this,
                    "Loading Results", "Please wait...", true); 
```

下面是我的 logcat 的输出。我完全被难住了，它是如何在两个相同的设备之间无法工作的。我希望这可能是设备的问题？

```
02-06 19:23:05.353: E/WindowManager(3178): Activity com.capgemini.findme.LocationSearchForPeople has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41014cb0 that was originally added here
02-06 19:23:05.353: E/WindowManager(3178): android.view.WindowLeaked: Activity com.capgemini.findme.LocationSearchForPeople has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41014cb0 that was originally added here
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:396)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:372)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:320)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.Window$LocalWindowManager.addView(Window.java:557)
02-06 19:23:05.353: E/WindowManager(3178):  at android.app.Dialog.show(Dialog.java:301)
02-06 19:23:05.353: E/WindowManager(3178):  at android.app.ProgressDialog.show(ProgressDialog.java:116)
02-06 19:23:05.353: E/WindowManager(3178):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
02-06 19:23:05.353: E/WindowManager(3178):  at com.capgemini.findme.LocationSearchForPeople$1.onClick(LocationSearchForPeople.java:81)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.View.performClick(View.java:3538)
02-06 19:23:05.353: E/WindowManager(3178):  at android.view.View$PerformClick.run(View.java:14330)
02-06 19:23:05.353: E/WindowManager(3178):  at android.os.Handler.handleCallback(Handler.java:608)
02-06 19:23:05.353: E/WindowManager(3178):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 19:23:05.353: E/WindowManager(3178):  at android.os.Looper.loop(Looper.java:156)
02-06 19:23:05.353: E/WindowManager(3178):  at android.app.ActivityThread.main(ActivityThread.java:4987)
02-06 19:23:05.353: E/WindowManager(3178):  at java.lang.reflect.Method.invokeNative(Native Method)
02-06 19:23:05.353: E/WindowManager(3178):  at java.lang.reflect.Method.invoke(Method.java:511)
02-06 19:23:05.353: E/WindowManager(3178):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-06 19:23:05.353: E/WindowManager(3178):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-06 19:23:05.353: E/WindowManager(3178):  at dalvik.system.NativeStart.main(Native Method)
02-06 19:23:11.259: D/dalvikvm(3178): GC_CONCURRENT freed 777K, 15% free 5238K/6115K, paused 3ms+6ms
02-06 19:23:14.402: D/AndroidRuntime(3178): Shutting down VM
02-06 19:23:14.402: W/dalvikvm(3178): threadid=1: thread exiting with uncaught exception (group=0x40aa8228)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178): crash in the same process: main
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178): java.lang.IllegalArgumentException: View not attached to window manager
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:752)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:472)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:163)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.app.Dialog.dismissDialog(Dialog.java:348)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.app.Dialog$1.run(Dialog.java:139)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.os.Handler.handleCallback(Handler.java:608)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.os.Looper.loop(Looper.java:156)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at android.app.ActivityThread.main(ActivityThread.java:4987)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at java.lang.reflect.Method.invokeNative(Native Method)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at java.lang.reflect.Method.invoke(Method.java:511)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-06 19:23:14.402: E/AndroidRuntime_2_crash(3178):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:33:37.903

显然，您的`LocationSearchForPeople`活动正在关闭，但`ProgressDialog`仍处于活动状态。这就是Android抱怨窗口泄漏的原因。您需要在离开启动`ProgressDialog`.

您可以覆盖活动中的`onDestroy`方法并在那里`LocationSearchForPeople`调用`dialog.dismiss()`

# knockout.js - 我们是否应该在调用 ko.applyBindings 之前等待 DOM 加载

> ID：14737212
> 
> 赞同：6
> 
> 时间：2013-02-06T19:30:38.397
> 
> 标签：knockout.js

根据标题，是否有必要在调用之前等待 DOM 加载`ko.applyBindings`或 Knockout 会自动处理这个？

即 - 我可以安全地这样做：

```
<script>
(function() {

    var model = new my.Model();
    ko.applyBindings(model);

})();
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T19:39:29.583

No KO 不会自动处理这个问题（所以自调用函数只能在页面底部工作），你必须等待`ko.applyBindings`调用加载的 DOM。

从[文档](http://knockoutjs.com/documentation/observables.html)中：

> 要激活 Knockout，请将以下行添加到`<script>`块中：
> 
> `ko.applyBindings(myViewModel);`
> 
> **您可以将脚本块放在 HTML 文档的底部，也可以将其放在顶部并将内容包装在 DOM 就绪的处理程序中，例如 jQuery 的 $ 函数。**

# python - 我的树莓派上的 Python 没有计数功能

> ID：14737214
> 
> 赞同：1
> 
> 时间：2013-02-06T19:30:43.003
> 
> 标签：python, raspberry-pi, nameerror

当我尝试在我的树莓派上使用“list.count”函数时，它会出现

```
 Name Error: name 'count' is not defined 
```

有什么我可以做的吗？预先感谢您的任何帮助。我正在使用 Python。我刚开始使用 Python，在我的教程中它指出

```
 >>>count(seq,'a') 
```

'seq' 是我之前输入的字母序列。我希望它是为了计算序列中“a”的数量.453

非常感谢大家的快速回复和回答，我现在已经解决了这个问题。这是我问的第一个在线问题，再次感谢您。Markus Unterwaditzer 的第二个答案终于解决了 'seq.count('a')' 的问题

还要感谢 DSM 找到教程并解释了我遇到问题的原因。现在一切正常，我又开始学习我的第一门计算机语言了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:14:37.913

啊。本教程的神奇之处在于

```
from string import * 
```

线，这是不好的做法。它将字符串模块中的所有内容导入范围，包括函数`string.count`：

```
>>> print string.count.__doc__
count(s, sub[, start[,end]]) -> int

    Return the number of occurrences of substring sub in string
    s[start:end].  Optional arguments start and end are
    interpreted as in slice notation. 
```

`count`也是字符串的方法，所以可以写

```
>>> 'aaa'.count('a')
3 
```

这通常是首选。在现代 Python 中，`string`模块甚至*没有*函数`count`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:57:47.853

`I expect it is meant to count the number of 'a's in the sequence`

根据`list`具体情况，这可能不是正确的语法。如果`list`是一个字符串，你可以这样做：

```
>>>a = "hello"
>>>a.count('h')
1
>>>a.count('l')
2 
```

“列表”的工作原理相同：

```
>>>a = ['h','e','l','l','o']
>>>a.count('l')
2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:57:54.543

```
>>> seq = ['a', 'b', 'c', 'a']
>>> seq.count('a')
2
>>> type(seq) is list  # the reason it's mentioned as list.count
True
>>> list.count(seq, 'a')  # the same thing, but nobody does it like that
2 
```

# perl - Dist::Zilla 插件应该如何给用户反馈？

> ID：14737217
> 
> 赞同：0
> 
> 时间：2013-02-06T19:30:53.317
> 
> 标签：perl, logging, user-feedback, dist-zilla

我有几个 Dist::Zilla 插件，当我对 Moose 和 Dist::Zilla 都很陌生时，我编写了这些插件，我目前正在尝试更新它们以使它们更健壮，更不容易出错.

我想做的一件事是，如果我发现他们给了我矛盾或不可能的指令，就给用户反馈。像：

```
[ MyPlugin ]
include = all
exclude = all 
```

Dist::Zilla 似乎有一个（未记录的）内部日志系统，我最初在编写插件时使用了该系统，但它似乎不再工作（可能是由于内部更改）。那么，这些天我应该如何给用户反馈呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:32:33.077

（打算把它放在评论中，但达到长度限制）。

警告：我自己只写了几个小的 dzil 插件，对它的内部结构不是很熟悉。

dzil 使用 Log::Dispatchouli，也是 rjbs 写的。Log::Dispatchouli 被其他几个项目（包括由 rjbs 以外的人启动的项目）使用，因此它不完全是一个内部 dzil 日志系统。

据我了解，Log::Dispatchouli 只有两个日志记录级别，正常和调试。调试日志通常不会在输出中看到；您必须先启用调试。如果启用静音，则可以静音正常（和调试）日志。

要在 dzil 中启用调试，请添加 -v 命令行开关。这似乎没有记录在“dzil help”和“dzil help COMMAND”中。但是 rjbs[在博客上对此](http://rjbs.manxome.org/rubric/entry/1824)进行了介绍。

现在要在 dzil 插件中生成日志，只需调用 $self->log(...) 或 $self->log_debug(...)。只有当用户通过 -v 选项时才会看到第二个。

# java - 如何反转此基本加密？

> ID：14737218
> 
> 赞同：2
> 
> 时间：2013-02-06T19:30:54.043
> 
> 标签：java, string, character

```
public static String basicEncrypt(String s) {
    String toReturn = "";
    for (int j = 0; j < s.length(); j++) {
        toReturn += (int)s.charAt(j);
    }
    //System.out.println("Encrypt: " + toReturn);
    return toReturn;    
} 
```

有没有办法扭转这个找到原始字符串？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:45:00.553

假设您只使用 ASCII 字符（32-255 代码），算法很简单：

1.  取输入的第一个字符

2.  如果是`1`或`2`- 取并切断接下来的两位数字并转换为字符

3.  如果它是任何其他字符 - 取并切断下一个数字并转换为字符

4.  转到 1\. 如果还有一些输入

这是一个快速的 Scala 实现：

```
def decrypt(s: String): String = s.headOption match {
    case None => ""
    case Some('1') | Some('2') => s.substring(0, 3).toInt.toChar + decrypt(s.substring(3))
    case Some(_) => s.substring(0, 2).toInt.toChar + decrypt(s.substring(2))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:45:50.593

只是为了好玩，另外几个版本；Java，仅限 US-ASCII，字符 0x14-0xc7；

```
public static String basicDecrypt(String input)
{
    StringBuffer output = new StringBuffer();
    Matcher matcher = Pattern.compile("(1..|[2-9].)").matcher(input);
    while(matcher.find())
        output.append((char)Integer.parseInt(matcher.group()));
    return output.toString();
} 
```

对于 0x1e-0xff，将正则表达式替换为`"([12]..|[3-9].)"`

...还有一个更简短的 Linq'y C# 版本。

```
private static string BasicDecrypt(string input)
{
    return new string(Regex.Matches(input, "(1..|[2-9].)").Cast<Match>()
                           .Select(x => (char) Int32.Parse(x.Value)).ToArray());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:46:28.613

是的，如果考虑到您的原始字符串由 (32) 和 unicode charcode 299 之间的字符组成，请参阅[http://www.asciitable.com/](http://www.asciitable.com/)

```
Psuedo code
ret=<empty string>
while not end of string
  n=next number from string
  if n<3 charcode= n + next 2 numbers
  else
     charcode=n + next number
  ret=ret + character(charcode)
end while 
```

空格（换行符和回车）和 299 以上的字符代码将阻碍此算法。可以修复此算法以包含最多 charcode 319 的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T19:50:53.717

```
private static String basicDecrypt(String s) {
    String result = "";
    String buffer = "";
    for (int i = 0; i < s.length(); i++) {
        buffer += s.charAt(i);
        if ((buffer.charAt(0) == '1' && buffer.length() == 3) || (buffer.charAt(0) != '1' && buffer.length() == 2)) {
            result += (char) Integer.parseInt(buffer);
            buffer = "";
        }
    }
    return result;
} 
```

这是一种非常基本的解密方法。它仅适用于`[A-Za-z0-9]+`美国 ASCII。

# python - 如何在 Python 中将单词拆分为字母

> ID：14737222
> 
> 赞同：7
> 
> 时间：2013-02-06T19:31:06.450
> 
> 标签：python

我想知道是否有一种简单的方法可以执行以下操作：

输入字符串：

```
input = 'Hello' 
```

输出字符串：

```
output = 'H,e,l,l,o' 
```

我知道你可以这样做`list(input)`，但这会返回一个列表，我想获取字符串而不是列表。

有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T19:32:29.923

```
In [1]: ','.join('Hello')
Out[1]: 'H,e,l,l,o' 
```

这利用了字符串可迭代并在迭代时产生单个字符的事实。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T19:32:33.877

```
outputstr = ','.join(inputstr) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:41:24.847

由于 NPE 已经提供了该`','.join('Hello')`方法，我有一个不同的解决方案（尽管它可能不是更 Pythonic）：

```
inputStr, outputStr = 'hello', ''
for char in inputStr: outputStr += char + ','
print outputStr[:-1] 
```

输出：`'h,e,l,l,o'`。

# java - 如何初始化模拟对象？

> ID：14737240
> 
> 赞同：2
> 
> 时间：2013-02-06T19:32:24.680
> 
> 标签：java, unit-testing, junit, mocking, easymock

假设我有以下代码：
**模拟对象类**

```
public class SomeClass {
    private Foo someField;
    public SomeClass {
        someField = new Foo();
    }
    public Foo getSomeField { return someField; }
    public void getSomething() {}
    public boolean doSomething(Object object) {}
} 
```

**接下来我有测试套件**

```
public class TestSuite {
    private ClassToTest classToTest;
    private SomeClass mock;

    @Before
    public void setUp() {
        classToTest = new ClassToTest();
        mock = EasyMock.createMock(SomeClass.class);
    }

    @Test
    public void testMethod() throws Exception { 
        mock.getSomething();
        EasyMock.replay(mock);

        classToTest.methodToTest(mock); //Where methodToTest accepts SomeClass and int

        EasyMock.verify(mock);
    }
} 
```

**以及正在测试的方法**

```
public void methodToTest(SomeClass a) {
    //Logic here
    Foo b = a.getSomeField();
    b.do(); // <--- null pointer exception here because someField isn't initialized
    a.getSomething(); // <--- thing I want to test if it is being called, but can't due to exception prior to this line
    //Logic after
} 
```

我被卡住了..所以基本上 SomeClass 没有像我想要的那样初始化。有什么解决方法吗？或者也许任何其他可以做类似事情的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:35:33.423

您的`methodToTest`电话`a.getSomeField()`，但您的测试的设置部分并不期望该电话。你想要这样的东西：

```
Foo foo = new Foo();
EasyMock.expect(mock.getSomeField()).andReturn(foo); 
```

或存根呼叫：

```
Foo foo = new Foo();
EasyMock.expect(mock.getSomeField()).andStubReturn(foo); 
```

（在您致电之前`mock.getSomething()`）。

有关 和之间的区别，请参阅[此问题](https://stackoverflow.com/questions/3740376/easymock-andreturn-vs-andstubreturn)。`andReturn``andStubReturn`

# java - 线程“main”中的异常 java.lang.UnsatisfiedLinkError：无法加载库“mediainfo”：找不到指定的模块

> ID：14737243
> 
> 赞同：1
> 
> 时间：2013-02-06T19:32:29.347
> 
> 标签：java, video, java-native-interface, metadata, mediainfo

我正在使用[sub4me上的](http://code.google.com/p/subs4me/source/browse/trunk/Subs4me/src/net/sourceforge/filebot/mediainfo/?r=93)**MediaInfo.java**类 从各种视频文件格式中提取元数据。但是我在运行时收到上述错误。

这是我的代码的摘录，异常被抛出`MediaInfo info = new MediaInfo()`

```
String fileName = "file:///homes/sa303/NetBeansProjects/MoviePlayer1/src/Trailer/IronMan3.mp4";
File file1 = new File(fileName);
System.out.println(file1.getPath());

MediaInfo info = new MediaInfo();
info.open(file1);

String format = info.get(MediaInfo2.StreamKind.Video, 1, "Format", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name);
String bitRate = info.get(MediaInfo2.StreamKind.Video, 1, "BitRate", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name);
String frameRate = info.get(MediaInfo2.StreamKind.Video, 1, "FrameRate", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name);
String width = info.get(MediaInfo2.StreamKind.Video, 1, "Width", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name);

String audioBitrate = info.get(MediaInfo2.StreamKind.Audio, 1, "BitRate", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name);
String audioChannels = info.get(MediaInfo2.StreamKind.Audio, 1, "Channels", MediaInfo2.InfoKind.Text, MediaInfo2.InfoKind.Name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:44:47.370

根据[这个](https://stackoverflow.com/a/7114893/600132)答案，该类`MediaInfo`只是 JNI 包装器，因此您需要将[MediaInfo](http://mediainfo.sourceforge.net/)分发下载到相应的平台并将这些本机库文件添加到项目的类路径中。

# java - 使用Java更改Windows中的文件图标

> ID：14737244
> 
> 赞同：0
> 
> 时间：2013-02-06T19:32:30.460
> 
> 标签：java, windows, attributes, icons, contextmenu

项目名称：文件标记

我个人使用“文件夹标记”来组织我的文件夹。它让我可以选择从上下文菜单（右键菜单）更改文件夹图标。我可以从上下文菜单中选择计划的工作、半完成的工作、已完成的工作，并且我的文件夹图标会相应更改。

现在我想为单个文件实现相同的概念。

我想在 windows 环境中使用 Java 来实现这个解决方案。

第 1 步：要在上下文菜单中添加内容，最简单的方法是启动注册表项。
所以我需要在这里做的是——

添加上下文菜单项：文件标记添加上下文子菜单项：计划的工作，半完成的工作，完成的工作（文件标记的子菜单）

第2步：

添加自定义属性

if(WorkStatus is "planned work") { 为值为 "planned work" 的文件设置一个特定图标我想我需要在这里使用 iconHandler }

我需要你关于如何实施它的建议。

这是该解决方案的正确方法吗？还是有更好的解决方案？

我也很高兴有 step1 和 step2 的示例代码

谢谢@布莱恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T08:28:01.637

好吧，我有一些好消息和一些坏消息......

## 关于您的**第 2 步**（为特定文件设置图标）：

由于您在谈论“注册表项”，因此我假设您在 Windows 下。在那种情况下，恐怕你无法更改特定文件的图标，除非它是快捷方式或 .EXE 或 .DDL 文件（其中可以包含资源，例如图标）。您*可以*更改的是**文件类型**的默认图标，这意味着所有相同类型的文件都会受到影响（这显然不符合您的要求）。

## 关于您的**第 1 步**（修改上下文菜单）：

为了在**Windows 7 或更高版本**中实现您描述的结构（“文件制作器”子菜单，具有各种状态的多个条目（“计划的工作”、“半完成的工作”等）） ，您需要创建一个静态[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/hh127467%28v=vs.85%29.aspx)描述的级联菜单。（在 WindowsXP 和更早的版本中，您需要实现一个 ContextMenuHandler，这是一项复杂得多的任务——我不打算在本文中介绍）。

**示例代码**：
您可以从命令提示符（具有管理权限）运行以下命令，或者将命令复制并粘贴到 .BAT 文件中，然后以管理员身份运行。这些命令的作用是：首先为每个文件注册一个子菜单（参见注册表项中的“*”）和可用的子菜单条目，然后为每个子菜单条目设置显示文本和命令。

*注意*：建议您在进行任何修改之前始终备份注册表。注册表是一个微妙的结构，所以请小心处理，风险自负:)

```
REG ADD "HKEY_CLASSES_ROOT\*\shell\File Marker" ^
/v "MUIVerb" /t REG_SZ /d "File Marker" /f

REG ADD "HKEY_CLASSES_ROOT\*\shell\File Marker" ^
/v "SubCommands" /t REG_EXPAND_SZ /d "WinIconChanger.PLANNED_WORK;WinIconChanger.HALF-DONE_WORK;WinIconChanger.DONE_WORK" /f

REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.PLANNED_WORK" ^
/v "MUIVerb" /t REG_SZ /d "Planned work" /f
REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.PLANNED_WORK\command" ^
/ve /t REG_SZ /d "\"C:\path\to\jre\bin\javaw.exe\" -jar \"C:\path\to\WinIconChanger.jar\" \"PLANNED_WORK\" \"%%1\"" /f

REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.HALF-DONE_WORK" ^
/v "MUIVerb" /t REG_SZ /d "Half-done work" /f
REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.HALF-DONE_WORK\command" ^
/ve /t REG_SZ /d "\"C:\path\to\jre\bin\javaw.exe\" -jar \"C:\path\to\WinIconChanger.jar\" \"HALF-DONE_WORK\" \"%%1\"" /f

REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.DONE_WORK" ^
/v "MUIVerb" /t REG_SZ /d "Done work" /f
REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.DONE_WORK\command" ^
/ve /t REG_SZ /d "\"C:\path\to\jre\bin\javaw.exe\" -jar \"C:\path\to\WinIconChanger.jar\" \"DONE_WORK\" \"%%1\"" /f

PAUSE 
```

不要忘记将“C:\path\to\WinIconChanger.jar”和“C:\path\to\jre\bin\javaw.exe”替换为系统中的实际路径。

为了撤消对注册表所做的修改，您可以使用管理权限执行这些命令（或将它们保存在 .BAT 文件中并运行它）：

```
REG DELETE "HKEY_CLASSES_ROOT\*\shell\File Marker" /f

REG DELETE "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.PLANNED_WORK" /f
REG DELETE "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.HALF-DONE_WORK" /f
REG DELETE "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Explorer\CommandStore\shell\WinIconChanger.DONE_WORK" /f

PAUSE 
```

当然，您将需要一个 .JAR 文件，该文件将采用两个参数，即工作状态（例如 PLANNED_WORK、DONE_WORK 等）和右键单击文件的路径，并对它们进行一些有用的操作（如果您只能更改文件的图标 :D)。
**这是一个示例类**：

```
class WinIconChanger {
    static public void main(String[] args) {
        String filePath = "UNKNOWN";
        String state = "UNKNOWN";
        if (args.length == 2) {
            filePath = args[1];

            switch (args[0]) {
            case "PLANNED_WORK":
            case "HALF-DONE_WORK":
            case "DONE_WORK":
                state = args[0];
                break;
            default:
                break;
            }
        }

        if ("UNKNOWN".equals(state)) {
            javax.swing.JOptionPane.showMessageDialog(
                    null, 
                    "Unknown file or state !", 
                    "WinIconChanger Error", 
                    javax.swing.JOptionPane.ERROR_MESSAGE);
        } else {
            /* 
             * Change the icon of the file specified in args[1]
             * according to the state specified in args[0]
             */
            String msg = String.format(
                    "Let's assume I just changed the icon of '%s' to %s !",
                    filePath, state);
            javax.swing.JOptionPane.showMessageDialog(
                    null, 
                    msg,
                    "WinIconChanger Info",
                    javax.swing.JOptionPane.INFORMATION_MESSAGE);
        }
    }
} 
```

（这只是一个粗略的示例，而不是生产就绪代码。您需要验证第二个参数确实对应于现有文件的路径，微调错误消息，捕获异常等）

# maven - 未指定 Maven 主目录 - Windows 7 和 IntelliJ

> ID：14737248
> 
> 赞同：2
> 
> 时间：2013-02-06T19:32:42.053
> 
> 标签：maven, intellij-idea

Maven 在 Netbeans 上运行得很好。我试图弄清楚为什么它不喜欢 IntelliJ。我做了一些谷歌搜索，无法弄清楚出了什么问题。我已经阅读了有关在环境变量中指定路径的内容，但我不知道我的“maven 安装路径”是什么。

![在此处输入图像描述](../Images/ca7c57d4e72924425c82a854211afa3e.png)

[我已按照Maven 下载页面](http://maven.apache.org/download.cgi)上列出的这些说明进行操作...

**视窗 2000/XP**

1.  将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。通过打开系统属性（WinKey + Pause）添加 M2_HOME 环境变量，选择“高级”选项卡和“环境变量”按钮，然后在用户变量中添加 M2_HOME 变量，值为 C:\Program Files\ Apache 软件基金会\apache-maven-3.0.4。确保省略路径周围的任何引号，即使它包含空格。注意：对于 Maven 2.0.9，还要确保 M2_HOME 没有“\”作为最后一个字符。
2.  在同一个对话框中，在用户变量中添加 M2 环境变量，其值为 %M2_HOME%\bin。可选：在同一对话框中，在用户变量中添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如值 -Xms256m -Xmx512m。此环境变量可用于为 Maven 提供额外的选项。
3.  在同一个对话框中，在用户变量中更新/创建 Path 环境变量，并在前面添加值 %M2% 以添加命令行中可用的 Maven。
4.  在同一个对话框中，确保 JAVA_HOME 存在于您的用户变量或系统变量中，并将其设置为 JDK 的位置，例如 C:\Program Files\Java\jdk1.5.0_02 和 %JAVA_HOME%\bin在您的 Path 环境变量中。
5.  打开一个新的命令提示符（Winkey + R 然后键入 cmd）并运行 mvn --version 以验证它是否已正确安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:14:01.560

原来我下载的是源代码，而不是二进制文件。一旦我下载了二进制文件，它就可以正常工作。

# perl - 从字符串中提取子字符串

> ID：14737251
> 
> 赞同：0
> 
> 时间：2013-02-06T19:32:54.907
> 
> 标签：perl, substring, extract

我仍然是一个 perl 菜鸟。我得到一个字符串，它可以是 man_1、man_2、woman1、woman2 等。（没有逗号，只有一个字符串作为函数的输入）。

我需要在 if 语句中检查 man_ 或 woman 作为子字符串，以确保提取了适当的数字并添加了一些偏移量。

我可以提取的数字如下

```
$num =~ s/\D//g
if (<need the substring extracted> == "man_")
    $offset = 100;
else if (<need the substring extracted> == "woman")
    $offset = 10;

return $num + $offset; 
```

现在我如何提取子字符串。我查看了 substr ，它需要偏移量等等。想不通。感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:44:09.910

解决方案：

```
if ( $num =~ m{^man_(\d+)$} ) {
    return 100 + $1;
} elsif ( $num =~ m{^woman(\d+)$} ) {
    return 10 + $1;
} else {
    die "Bad input: $num\n";
} 
```

在您的示例中存在几个问题：

1.  s/\D//g - 将删除字符，但一个接一个，而不是所有 \D 字符的大块。所以没有变量会是“man_”
2.  要从正则表达式中获取数据，您应该使用分组括号，例如 s/(\D)//
3.  要获取所有字符，您应该使用 * 或 + 运算符，例如：s/(\D+)//
4.  在不修改的情况下进行匹配仍然更好，因为它可以更好地处理格式错误数据的边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:26:32.820

depesz 有一个很好的解决方案。这是另一个：

```
my %offsets = (
   'man_'  => 100,
   'woman' =>  10,
);

my ($prefix, $num) = $str =~ /^(\D+)(\d+)\z/
   or die;
my $offset = $offsets{$prefix}
   or die;
return $num + $offset; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:48:12.840

另外一个选项：

```
return $2 + ( $1 eq 'man_' ? 100 : 10 )
  if $num =~ /^(man_|woman)(\d+)\z/;

die; 
```

# python - TypeError: 'choice_text' is an invalid keyword argument for this function in django tutorial

> ID：14737257
> 
> 赞同：0
> 
> 时间：2013-02-06T19:33:19.267
> 
> 标签：python, django

我正在通过[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)工作。

在本教程的最后是关于 django DB api 的部分，有以下内容：

```
# Display any choices from the related object set -- none so far.
>>> p.choice_set.all()
[]

# Create three choices.
>>> p.choice_set.create(choice_text='Not much', votes=0)
<Choice: Not much> 
```

但是，当我直接从教程中复制： >>> p.choice_set.create(choice_text='Not much', votes=0) 时，我得到：

```
raise TypeError("'%s' is an invalid keyword argument for this function" % kw
args.keys()[0])
TypeError: 'choice_text' is an invalid keyword argument for this function 
```

以前 tut 中的所有内容都按预期工作。

知道问题是什么吗？我对 python 很陌生，来自 php 背景，有一些 OOP 经验。

提前致谢，

账单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:35:46.780

你确定你是直接从教程中复制的。看起来它`choice=`不是`choice_text=`

```
# Create three choices.
>>> p.choice_set.create(choice='Not much', votes=0)
<Choice: Not much>
>>> p.choice_set.create(choice='The sky', votes=0)
<Choice: The sky> 
```

型号为：

```
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

所以这条线正在做的是通过使用`choice_set.create()`（[链接到文档](https://docs.djangoproject.com/en/dev/ref/models/relations/#django.db.models.fields.related.RelatedManager.create)），它正在创建一个`Choice`模型并进行投票 -`p`并将其分配为模型字段`poll`（外键）。然后将`choice=`值分配给模型字段`choice`，并将`votes=`值分配给模型字段`votes`。

# c# - 获取的推文中的可点击链接 C#

> ID：14737260
> 
> 赞同：5
> 
> 时间：2013-02-06T19:33:25.063
> 
> 标签：c#, xaml, twitter, hyperlink

我有一个问题，我不知道如何解决，就像我希望它得到解决一样。我从某些 Twitter 提要中提取推文，例如用户和#（通过 .rss 搜索）。但是，一些推文包含一个链接，当它显示在列表框（数据模板）中时，它是不可点击的。有没有一种简单的方法可以将包含“http://<-link->”的每条推文中的所有内容转换为实际的可点击链接？通过 XAML 或 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:54:39.243

我发现[HtmlTextBlock](https://github.com/sinelaw/HtmlTextBlock)控件很有用。这是：

> 一个 WPF 文本块，可以解析一组有限的 HTML 标记并显示它们（最初是 Leung Yat Chun 在 CodeProject.com 上的一个项目）

在您的情况下，唯一的问题是标签的格式与真正的 HTML 不同，您必须用方括号 ( `[]`) 而不是尖括号 ( ) 来编写它们`<>`。

[CodeProject 上代码](http://www.codeproject.com/Articles/33196/WPF-Html-supported-TextBlock)的原始版本不是最新的，我不得不进行一些搜索并最终将其作为[github 存储库](https://github.com/sinelaw/HtmlTextBlock)，因为它是开源的（并且在所有者的祝福下） - 正如 repo 自述文件提到的那样，代码是不是我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:38:13.467

相对容易，在 C# 中：

1.  使用正则表达式提取 URL（此处的正则表达式示例：[检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)）
2.  将 URL 包装在`<a>`标签中并将 指向`href`URL
3.  将推文中的原始 URL 替换为组合的锚标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:38:41.763

如果您没有预定义的文本（并且您没有），您需要解析推文文本以查找超链接并用超链接替换原始文本`Run`。例如，请参见下面的链接：

[WPF - 使超链接可点击](https://stackoverflow.com/questions/861409/wpf-making-hyperlinks-clickable)

# ios - iOS上的Phonegap应用程序-页面在文本输入焦点上滚动

> ID：14737264
> 
> 赞同：1
> 
> 时间：2013-02-06T19:33:39.483
> 
> 标签：ios, cordova, scroll, focus

今天，当用户选择输入文本时，我在 iOS 上遇到了一个“典型”问题，即页面滚动。关键是我正在使用一个包含很多文本的可滚动页面，我需要这个。所以我不能使用通过防止默认、最小化视图等来禁用 scolling 的解决方案。

**我基本上需要在不滚动页面的情况下打开软件键盘。**

我还需要找到一个适合我的用户的解决方案 - 不闪烁屏幕等......经过一些研究，我终于设法找到了一个可行的解决方案。

请看下面我的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:33:39.483

想法是尽快将页面返回到其原始位置，从而防止 iOS 滚动动画。

您只需在输入文本字段中添加一个`focus`处理程序，在此处理程序中，您首先读取`window.scrollTop`属性，然后以 0 毫秒的延迟将其设置回来。

这是我的代码（使用 jQuery）：

```
$("#myinput").on("focus", function() {
    var scrollTop = $(window).scrollTop();
    setTimeout(function() {
        $(window).scrollTop = scrollTop;
    }, 0);
}); 
```

我希望这没有错误 - 实际上我使用的是 TypeScript，所以如果你想在这里查看我的原始代码，它是：

```
this._inputText.on("focus", () => {
    var jQueryWin:JQuery = <JQuery>$(window);
    var scrollTop:number = jQueryWin.scrollTop();   
    setTimeout(() => {
        jQueryWin.scrollTop(scrollTop);
    }, 0);
}); 
```

好的 - 我希望这可以帮助你们在处理输入元素时更好地控制不需要的页面滚动。

# javascript - 淘汰js if语句根据布尔数据类型显示值

> ID：14737265
> 
> 赞同：7
> 
> 时间：2013-02-06T19:33:39.197
> 
> 标签：javascript, html, knockout.js

我正在尝试显示基于 True 或 False 表值的值。例如，如果值为 True，那么我希望它说支持，如果它是 False，那么我希望它说不支持！这是我的html代码

```
<p><input type="text"  data-bind="value: Support"  /></p> 
```

Java 脚本代码

```
$(function() {
  dm.viewModel = function() {
    var clients = ko.observableArray(),
      selectedClient = ko.observable(),

      clientChanged = function() {
        $.getJSON(dm.WebServices + "/dm/get/clientinfo?client=" + encodeURIComponent(selectedClient()), function(data) {
          if (data != null) {
            dm.viewModel.Name(selectedClient());
            dm.viewModel.Support(data[0]['Support']);
          }
        })
        $('#divClientData').show();
      },

      LoadClients = function() {
        $('#divClientData').hide();
        $.getJSON(dm.WebServices + "/dm/get/clientlist", function(data) {
          $.each(data, function(key, val) {
            clients.push(val);
          });
        });
      },

      Name = ko.observable(),
      Support = ko.observable(),

      return {
        Name: Name,
        Support: Support
      };
  }();

  ko.applyBindings(dm.viewModel);
  dm.viewModel.LoadClients();
}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T20:00:34.093

在这种情况下，您可以评估属性并根据值进行渲染。甚至可以在绑定内部提供一个函数。你可以使用这个：

```
<input type="text"  data-bind="value: Support() ? 'Supported' : 'Not Supported'"  /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:41:42.223

在这种情况下，您正在寻找的是 ko.computed()。

已编辑：（支持似乎正在用作数据集中的值）向您的 ViewModel 添加一个新值，如下所示：

```
IsSupported = ko.computed(function(){
    if(this.Support() == true){
        return "Supported";
    } else {
        return "Not Supported";
    }
}, this) 
```

然后，在您的标记中，您将不得不稍微更改您的数据绑定：

```
<p><input type="text" data-bind="value: IsSupported" /></p> 
```

或者，如果您不想更改“支持”字段，则必须按照其他评论者的建议，在 HTML 中执行以下操作：

```
<p><input type="text"  data-bind="value: (Support() ? 'Supported' : 'Not Supported')"  /></p> 
```

我推荐前者，但实际上，您应该将该逻辑隐藏在您的 ViewModel 中。

（有关计算的更多信息，请参阅 KO 文档：http: [//knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:48:58.153

您可以使用 if 绑定来做到这一点

[在此处](http://knockoutjs.com/documentation/if-binding.html)查看文档

文档中的示例：

```
<label><input type="checkbox" data-bind="checked: displayMessage" /> Display message</label>

<div data-bind="if: displayMessage">Here is a message. Astonishing.</div> 
```

所以对你来说

```
<div data-bind="if: Support">Supported</div>
<div data-bind="ifnot: Support">Not Supported</div> 
```

编辑：建议使用具有三元条件的值绑定的其他答案可能是实现此目的的更好方法。我会保持这个作为参考，但我推荐这个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T13:44:27.360

在我的工作中，我使用这样的 KO 布尔条件：

```
<div id="bla" data-bind="visible: position != value"></div> 
```

KO 对于这些类型的问题非常有用。

# regex - 使用 gsub 删除多个空格和尾随空格

> ID：14737266
> 
> 赞同：6
> 
> 时间：2013-02-06T19:33:39.760
> 
> 标签：regex, r, gsub

如何仅使用 1 gsub 删除多个空格和尾随空格？我已经制作了这个功能`trim <- function(x) gsub(' {2,}',' ',gsub('^ *| *$','',x))`，但我试图只用 1 gsub 重写它。

实际上，我想精益如何根据 gsub 之后/之前的内容来匹配某些内容。在此示例中，我需要匹配前面有一个空格的所有空格，并将它们替换为 ''

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T19:45:28.270

使用正向lookbehind 来查看当前空格前面是否有空格：

```
^ *|(?<= ) | *$ 
```

在此处查看实际操作：[http ://regex101.com/r/bJ1mU0](http://regex101.com/r/bJ1mU0)

# javascript - JavaScript - iPad 应用程序中的警报消息

> ID：14737272
> 
> 赞同：3
> 
> 时间：2013-02-06T19:33:49.687
> 
> 标签：javascript, ios, ipad, alert

为这个基本问题道歉，但问题是我似乎无法找到一个简单的“是”或“否”。

我有一个主干应用程序，它被加载到 iPad 应用程序中的 webIUView（我相信这是正确的术语）中。

我只是试图在应用程序中发出警报，在桌面（safari/chrome/etc）上进行测试按预期工作。但是，一旦我启动 iPad 应用程序，我的警报就不会发生。

调查告诉我 phonegap 有一个通知器（[http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_notification_notification.md.html)）但是我真的不想只为警报消息使用另一个框架。

我想我的第一个问题是为什么简单的警报在 iOS 中不起作用？其次，如果不应该我只做一个简单的对话框来模仿它？

提前致谢。

编辑：代码示例

我在实现网络连接处理程序时注意到了这一点

```
 window.addEventListener("offline", function(e) {
        onNetworkChange(false);
    });
    window.addEventListener("online", function(e) {
        onNetworkChange(true);
    });

    function onNetworkChange(_isConnected){
        var msg;
        (_isConnected == false) ? msg = "Networking Connection Lost" : msg = "Network Connection Established";

        window.alert (msg);

    } 
```

因为我不确定我的代码是否有问题，所以在另一个视图中我决定做一个简单的

```
 window.alert ('test'); 
```

什么都没有，我一定不是发疯了就是忽略了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:42:18.977

我不相信 iOS Safari 会触发`online`和`offline`事件。您可以在此处阅读有关 iPad 连接状态事件问题的更多信息：

[http://ednortonengineeringsociety.blogspot.com/2010/10/detecting-offline-status-in-html-5.html](http://ednortonengineeringsociety.blogspot.com/2010/10/detecting-offline-status-in-html-5.html)

# tcp - tcp 标头模式的行为与 rfc 规范不同

> ID：14737277
> 
> 赞同：-1
> 
> 时间：2013-02-06T19:34:00.780
> 
> 标签：tcp, behavior

在正常情况下，tcp 标头模式的行为是否可能与 rfc 规范不同（我的意思是当它不是任何入侵或异常时）？还是在没有攻击的所有情况下都将始终遵循 rfc 标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:25:58.560

RFC 是要遵循的。不符合 RFC (a) 的主机无法直接连接到 Internet，并且 (b) 将无法正常工作。

# html - 我的选择代码样式在 Firefox 中有效，但在 ie 中无效

> ID：14737286
> 
> 赞同：0
> 
> 时间：2013-02-06T19:34:24.680
> 
> 标签：html, css

链接 [http://ferrenetwork.com/weavechanges/dataentry.html](http://ferrenetwork.com/weavechanges/dataentry.html)

这是我使用的 html 代码

```
<select id="box1View" multiple="multiple">
   <option>2008-2009 "Mini" Baja</option>
   <option>AAPA - Asian American Psychological Association</option>
   <option>Agape</option>
   <option>AGE-Alliance for Graduate Excellence</option>
   <option>AICHE (American Inst of Chemical Engineers)</option>
</select> 
```

这是我在我的 CSS 中使用的样式

```
#box1View{width:350px; height:350px; border:1px solid #CDCDCD; }
#box1View option {background:#E6E6E6; border: 1px solid #fff; padding: 15px 0 15px 5px;cursor:pointer;}
#box1View option:hover {background:#e0f0f5; cursor:pointer;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:51:39.410

表单元素通常由操作系统而不是浏览器呈现。这意味着样式化它们并不总是有效。它可能在某些浏览器中，但它是非标准行为。

`<option>`标签实际上无法设置样式。不幸的是，这是设计使然。

从[MSDN](http://msdn.microsoft.com/en-us/library/ms535877%28v=vs.85%29.aspx)（在*备注*部分下）：

> 除了`background-color`和之外`color`，通过样式对象为选项元素应用的样式设置将被忽略。

# sql - 使用 WHERE 进行部分字段匹配 - 如何

> ID：14737288
> 
> 赞同：1
> 
> 时间：2013-02-06T19:34:27.113
> 
> 标签：sql, field, match, partial

您好，这是我的第一篇文章，我对 SQL 还很陌生。我真正想要找到的是与 MID$ 相当的东西，我可以在其中根据字段的一部分进行更新。

```
 UPDATE OurTable
 SET UpdateField='Text-2008-001-old'
  WHERE '2008' like ('%' || UpdateField) AND KeyField='1' 
```

换句话说，我想更新到“Text-2008-001-old”，该字段当前可能是“Line-2008-000-000”

2008 年的位置在现有数据中没有改变，所以我只需要更新和包含 2008 年 KeyField 为“1”的字段

如果我还没有找到一个很好的 SQL 语法在线资源，请随时指出我那里。

希望我已经解释了这一点，并提前感谢所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:36:54.203

我认为您只需要使用 LIKE：

```
UPDATE OurTable
SET UpdateField='Text-2008-001-old'
WHERE UpdateField LIKE '%2008%' AND KeyField='1' 
```

或者如果它周围总是有破折号，也许`LIKE '%-2008-%'`会更好。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:38:32.850

UPDATE OurTable SET UpdateField='Text-2008-001-old' WHERE UpdateField like 'Line-2008%' AND KeyField='1'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:50:32.387

有许多通配符可与 LIKE 运算符（%、_、[]、[^] 等）一起使用——在此处解释：http: [//msdn.microsoft.com/en-us/library/ms179859。 .aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx) _

还有 substring() 函数——在此处解释：http: [//msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)，这有点像其他语言中的 MID 函数。（在哪里...像子字符串（...））

# ruby-on-rails - Rails 3 ActiveModel：不能直接包含 ActiveModel::Model

> ID：14737289
> 
> 赞同：7
> 
> 时间：2013-02-06T19:34:33.900
> 
> 标签：ruby-on-rails, activemodel, rails-activerecord

在我的 Rails 3.2.11 和“开发”环境中，当我尝试使用活动模型时：

```
class DisponibilityApi
  include ActiveModel::Model

  attr_accessor :start_time, :end_time 
  validates :start_time, :end_time, :presence => true

end 
```

我有一个错误：

NameError: 未初始化的常量 ActiveModel::Model

但是当我手动包含它时：

```
class DisponibilityApi
  extend  ActiveModel::Naming
  extend  ActiveModel::Translation
  include ActiveModel::Validations
  include ActiveModel::Conversion

  attr_accessor :start_time, :end_time 
  validates :start_time, :end_time, :presence => true

end 
```

现在它起作用了！

我错过了什么吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T22:16:33.200

ActiveModel::Model 对于 Rails 4 来说是新的，这就是为什么它出现在 Github master 上，但不在 3.x gems 中。如果你在 Github 上查看 3.x 版本的分支，它也不存在。

[https://github.com/rails/rails/tree/3-2-stable/activemodel/lib/active_model](https://github.com/rails/rails/tree/3-2-stable/activemodel/lib/active_model)

对于 Rails 3.x，您需要手动包含每个模块。

要查看它包含的内容，请查看 master 分支中的文件。

[https://github.com/rails/rails/blob/master/activemodel/lib/active_model/model.rb](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/model.rb)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T19:43:20.183

似乎 ActiveModel::Model 模块不再存在，您必须手动包含模型所需的模块。

即使文档声明该模块仍然存在，快速查看 ~/.rvm 文件夹证明不再有 model.rb 文件：

```
activemodel-3.2.11/lib » pwd                   
/Users/Intrepidd/.rvm/gems/ruby-1.9.3-p327-turbo/gems/activemodel-3.2.11/lib
activemodel-3.2.11/lib » ls
active_model    active_model.rb
activemodel-3.2.11/lib » ls -l active_model
total 280
-rw-r--r--   1 Intrepidd  staff  16574  9 Jan 00:39 attribute_methods.rb
-rw-r--r--   1 Intrepidd  staff   4556  9 Jan 00:39 callbacks.rb
-rw-r--r--   1 Intrepidd  staff   2338  9 Jan 00:39 conversion.rb
-rw-r--r--   1 Intrepidd  staff   4879  9 Jan 00:39 dirty.rb
-rw-r--r--   1 Intrepidd  staff  12087  9 Jan 00:39 errors.rb
-rw-r--r--   1 Intrepidd  staff   5259  9 Jan 00:39 lint.rb
drwxr-xr-x   3 Intrepidd  staff    102  9 Jan 00:39 locale
drwxr-xr-x   4 Intrepidd  staff    136  9 Jan 00:39 mass_assignment_security
-rw-r--r--   1 Intrepidd  staff   8720  9 Jan 00:39 mass_assignment_security.rb
-rw-r--r--   1 Intrepidd  staff   6478  9 Jan 00:39 naming.rb
-rw-r--r--   1 Intrepidd  staff   4257  9 Jan 00:39 observer_array.rb
-rw-r--r--   1 Intrepidd  staff   8163  9 Jan 00:39 observing.rb
-rw-r--r--   1 Intrepidd  staff     38  9 Jan 00:39 railtie.rb
-rw-r--r--   1 Intrepidd  staff   2939  9 Jan 00:39 secure_password.rb
-rw-r--r--   1 Intrepidd  staff   4304  9 Jan 00:39 serialization.rb
drwxr-xr-x   4 Intrepidd  staff    136  9 Jan 00:39 serializers
-rw-r--r--   1 Intrepidd  staff    319  9 Jan 00:39 test_case.rb
-rw-r--r--   1 Intrepidd  staff   2339  9 Jan 00:39 translation.rb
drwxr-xr-x  13 Intrepidd  staff    442  9 Jan 00:39 validations
-rw-r--r--   1 Intrepidd  staff   7961  9 Jan 00:39 validations.rb
-rw-r--r--   1 Intrepidd  staff   6227  9 Jan 00:39 validator.rb
-rw-r--r--   1 Intrepidd  staff    172  9 Jan 00:39 version.rb 
```

这很有趣，因为这个文件仍然存在于 github 上，但不在 .gem 中。

# wpf - wpf 需要 3 行的网格来填充窗口，并且只有中间行拉伸

> ID：14737293
> 
> 赞同：0
> 
> 时间：2013-02-06T19:34:58.840
> 
> 标签：wpf, grid, window, fill, stretch

这是我的代码（顺便说一句，它不起作用）：

```
<DockPanel MinWidth="776" Margin="13" LastChildFill="True" Height="522" VerticalAlignment="Top">
    <Grid DockPanel.Dock="Top" MinWidth="200">
        <Grid.RowDefinitions>
            <RowDefinition Height="70" />
            <RowDefinition Height="*"/>
            <RowDefinition Height="150" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
</Grid>
...
</DockPanel> 
```

当我垂直调整控件大小时，所有东西都粘在顶部（我想要的，除了中间要拉伸）。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:18:51.600

您将不得不从停靠面板`LastChildFill="True", Height="522" VerticalAlignment="Top"`中删除一些值，以阻止网格调整大小。

尝试这个：

```
<DockPanel MinWidth="776" >
        <Grid DockPanel.Dock="Top" MinWidth="200">
            <Grid.RowDefinitions>
                <RowDefinition Height="70" />
                <RowDefinition Height="*"/>
                <RowDefinition Height="150" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Rectangle Fill="Blue" Grid.Row="0" />
            <Rectangle Fill="Green" Grid.Row="1" />
            <Rectangle Fill="Red" Grid.Row="2" />
        </Grid>
    </DockPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:04:44.823

如果您可以坚持使用停靠面板，则可以执行以下操作：

```
<DockPanel LastChildFill="true">
    <DockPanel DockPanel.Dock="Top" Height="70" />
    <DockPanel DockPanel.Dock="Bottom" Height="150" />
    <DockPanel DockPanel.Dock="Top"><!-- Expandable content here--></DockPanel>
</DockPanel> 
```

# templates - 如何在 emberjs v1.0.0-pre.4 中渲染模板的示例？

> ID：14737295
> 
> 赞同：1
> 
> 时间：2013-02-06T19:35:04.117
> 
> 标签：templates, ember.js

我缺少能够在**emberjs**中呈现模板的一些非常基本的东西。我在网上找了几个例子。。

[github.com/elucid/ember-tunes](http://github.com/elucid/ember-tunes)

[github.com/emberjs/examples](http://github.com/emberjs/examples)

我仍然无法让我的东西正常工作。这些也使用了以前版本的 emberjs。

[ember-yii.sk.hj.cx/site/app](http://ember-yii.sk.hj.cx/site/app)似乎也很有希望，但是我*仍然*无法让我的东西正常工作。

有谁知道特定于**v1.0.0-pre.4**的示例？

我正在尝试将页眉、正文和页脚呈现为单独的出口。这是 app.html 的主体：

```
<div id="main">
    <script type="text/x-handlebars" data-template-name="app">
        <header>
            {{outlet header}}
        </header>
        <section>
            {{outlet body}}
        </section>
        <footer>
            {{outlet footer}}
        </footer>
    </script>
</div> 
```

我不明白的是如何在 3 个 {{outlet}} 占位符中呈现模板。

我观看了各种 EmberJS “教程”，阅读了文档。这就是为什么我认为我错过了一些非常基本的东西。

任何帮助、指导或对有用示例的指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:00:01.667

@akshayrawat 提供了一个绝对的金矿：[https](https://gist.github.com/akshayrawat/4701510) : //gist.github.com/akshayrawat/4701510 这实际上是 1.0.0-pre4 EmberJS 资源的列表。

@trek，EmberJS 的核心贡献者之一创建了他自己的 Todos 应用程序版本：[https](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences) ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences 我发现当我试图弄清楚如何使用多个 {{outlet}} 占位符时，这特别有用。

Ps：EmberJS 上的 peepcode 截屏视频需要 12 美元。但它非常好，并且基于 Ember 1.0.0-pre4

# mysql - SQL 如果字段长度小于 10 个符号，则通过 like 搜索而没有 %%

> ID：14737304
> 
> 赞同：3
> 
> 时间：2013-02-06T19:35:51.523
> 
> 标签：mysql, sql, ruby-on-rails, ruby

我该怎么办，如果我在 db 中的字段少于 10 个符号，则通过非强类搜索，但如果超过 10 个，而不是使用 %% 选项？那么如何检查字段长度呢？

我在 ruby​​ 中的代码是这样的：

```
@search = CrossList.find(:all, :conditions => ['cross_value like ? ', oem_condition]) 
```

但是如何做类似的事情：

```
@search = CrossList.find(:all, :conditions => ['length(cross_value) < 10 and cross_value like ? ', oem_condition]) 
```

别的

```
 @search = CrossList.find(:all, :conditions => ['length(cross_value) >= 10 and cross_value like %?% ', oem_condition]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:59:43.530

使用两个条件，并将`OR`它们一起使用：

```
@search = CrossList.find(:all, :conditions => [
   "(length(cross_value) >= 10 AND cross_value like CONCAT('%',?,'%')) OR (length(cross_value) < 10 AND cross_value like ?) ",
    oem_condition,
    oem_condition
]) 
```

该`LENGTH()`条件必须由两个`()`组中的一个满足，并且无论满足哪个都将要求应用`LIKE`它所具有的条件`AND`。

# ubuntu - ettercap过滤不起作用

> ID：14737322
> 
> 赞同：1
> 
> 时间：2013-02-06T19:36:40.297
> 
> 标签：ubuntu, filter, man-in-the-middle

我不能使用 ettercap 过滤器。我什至在写我能想到的最简单的过滤器：

```
if (ip.proto == TCP){
    msg("Ran Filter\n");
} 
```

但即使这样也行不通。当我使用 etterfilter 编译它并运行时：

`sudo ettercap -F /tmp/filter.ef -T -M arp -i wlan1 /192.168.1.6/ //`没有打印味精。通过数据包可视化，我确实看到了 TCP 数据包，但即使 ettercap 说“从 /tmp/filter.ef 加载的内容过滤器”，过滤器似乎也无法正常工作。

为了解决这个问题，我尝试启用 ip_forward，并尝试删除“#”登录，`/etc/etter.conf`因此它将使用 iptables 作为 redir_command（第 168-169 行）

我也试过把它放在 askubuntu.com 上

[https://askubuntu.com/questions/251866/ettercap-filtering-doesnt-work](https://askubuntu.com/questions/251866/ettercap-filtering-doesnt-work)

你知道如何使过滤工作吗？

我正在`ettercap NG-0.7.4.2`使用`Ubuntu 12.10`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:04:35.527

终于找到了答案。问题是因为 ettercap 中的一个错误！从手册页：

```
You can also load a script  without enabling it by appending :0 to the filename 
```

从代码中：

```
/* enable a loaded filter script? */
uint8_t f_enabled = 0;
/* is there a :0 or :1 appended to the filename? */
if ( (opt_end-optarg >=2) && *(opt_end-2) == ':' ) {
        *(opt_end-2) = '\0';
        f_enabled = !( *(opt_end-1) == '0' );
} 
```

正如您从代码中看到的那样，与手册页所说的相反，您必须在过滤器的文件名后附加“：1”才能加载它。否则，不使用过滤器。

那么为什么它只发生在我身上呢？那是因为我使用的是 0.7.4.2 版本，这是我`apt-get install ettercap`在 Ubuntu 上下载的版本。这与 ettercap 网站相反，指出`"The latest Ettercap release is: 0.7.4.1"`

解决该错误的补丁已发送给 ettercap 开发人员。

# smalltalk - SMTPClient 的错误处理

> ID：14737324
> 
> 赞同：1
> 
> 时间：2013-02-06T19:36:47.887
> 
> 标签：smalltalk, pharo

```
[SMTPClient
    deliverMailFrom: sender
    to: recipient
    text: message
    usingServer: 'mail.google.com']
        on: Error
        do:["Transcript show:'Sumthing went wrong'"]. 
```

如果`SMTPClient`提出一个`Error`说法`TelnetProtocolError`或`ConnectionTimedOut`。让成绩单显示我的信息的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:17:05.707

您始终可以在 #do: 块中使用参数来获取有关异常的信息：

```
[SMTPClient
    deliverMailFrom: sender
    to: recipient
    text: message
    usingServer: 'mail.google.com']
        on: Error
        do:[:e | Transcript show: e]. 
```

#do: 块中的 :e 参数是已引发错误的一个实例。

# html - svg中的嵌入位图未显示

> ID：14737336
> 
> 赞同：0
> 
> 时间：2013-02-06T19:38:07.957
> 
> 标签：html, svg, uri, inkscape

我在这个 svg 中嵌入了两个图像，但图像没有显示出来。我做的有什么问题？

[http://dl.dropbox.com/u/5363697/whirl_browserready.svg](http://dl.dropbox.com/u/5363697/whirl_browserready.svg)

更多信息：

我使用以下代码进行图像嵌入，以防有帮助：

```
 xpath_expr = '//*[@{1}="{0}"]'.format(layername, INKSCAPE_XPATH('label') )
    layer_el = svg_doc.xpath( xpath_expr,
                              namespaces = NE_NS_MAP
                              )[0]
    obj_id = layer_el.attrib['id']
    # Keep it safe somewhere, now export that little element as an image
    output_el = tempfile.NamedTemporaryFile( 
        suffix='_temp.svg' )
    cmd_line = [
        'inkscape',
        '--export-id=' + obj_id,
        '--export-id-only',
        '--export-area-drawing',
        '--export-dpi=90', # Change here if required
        '--export-png=' + output_el.name,
        REL_SIMPLIFIED_LOCATION

        ]
    subprocess.check_call( cmd_line )

    # Now load back the file, as a 'buffer'
    whole_file = output_el.read()
    assert len( whole_file ) > 0
    bf = base64.b64encode( whole_file )
    # Change that 'g' element by an 'image' element
    g_element = etree.Element(SVG('image') )
    g_element.attrib[XLINK('href')] = "data:image/png;base64," + bf
    (width, height) = get_object_size( obj_id )
    print(width,height)
    g_element.attrib[SVG('width')] = str( width )
    g_element.attrib[SVG('height')] = str( height )
    svg_doc.replace( layer_el, g_element ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:09:20.547

原来，前缀

```
 g_element.attrib[SVG('width')] = str( width ) 
```

在宽度属性不是必需的（属性本身是）。所述前缀导致 Inkscape 在后处理步骤中从文档中删除属性。

# java - 如何遍历jstl中的列表列表？

> ID：14737337
> 
> 赞同：4
> 
> 时间：2013-02-06T19:38:09.280
> 
> 标签：java, jsp, jstl

我有这种格式的列表：

```
List<List<Obj>> l3 = new ArrayList<List<Obj>>(); 
```

Obj 包含一个名为 getVal 的方法。

如何为每个 Obj 输出 getVal 的值？

我可以使用以下方法遍历列表：

```
<c:forEach var="mylist" items="${mylist}">

    <c:out value="${mylist.val}"></c:out>

    </c:forEach> 
```

但是如何获取列表列表中包含的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T19:40:47.810

就像你在 Java 中做的那样——使用嵌套循环：

```
<c:forEach var="innerList" items="${mylist}">
    <c:forEach var="obj" items="${innerList}">
        <c:out value="${obj.val}"></c:out>
    </c:forEach>
</c:forEach> 
```

# matlab - 如何“清除”或删除 Matlab 结构中的元素

> ID：14737340
> 
> 赞同：1
> 
> 时间：2013-02-06T19:38:23.650
> 
> 标签：matlab

```
clear mice  %drops variable named mice 
```

如果我有

```
x.cat = 9; x.dog = 5 
```

我怎样才能`clear` 元素`dog`？

（`clear x.dog`不删除狗甚至清空内容。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:44:19.347

您可以使用[RMFIELD](http://www.mathworks.com/help/matlab/ref/rmfield.html)：

```
xCleared = rmfield(x,'dog'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:43:41.687

用于[`rmfield`](http://www.mathworks.com/help/matlab/ref/rmfield.html)从结构体数组中删除特定字段，例如：

```
x = rmfield(x, 'dog') 
```

如果您只想清除值使用：

```
x.dog=[]; 
```

# php - 使用 WSDL 的 SOAP 放置请求

> ID：14737341
> 
> 赞同：0
> 
> 时间：2013-02-06T19:38:24.740
> 
> 标签：php, soap, wsdl

一位朋友向我寻求有关他老板网站的帮助。我实际上对 SOAP 一无所知，并且想知道是否有人可以为我指明正确的方向。我一直在寻找教程，但我真的被困住了。

我得到了一个 XML 文件，需要使用 WSDL 将此信息放入 SOAP 服务。我已经获得了用户名和密码，所以我的 PHP 脚本需要使用某种身份验证，对吗？

我已经尝试连接到给我的 WSDL，但我不断收到此错误。

```
Fatal error: SOAP-ERROR: Parsing WSDL: Couldn't load from 'https://compassqa.cengage.com:4502/cdes/services/cdes_ws?wsdl' : Extra content at the end of the document in /home/birdnetw/public_html/zesty-designs.co.uk/misc/soap-test/put.php on line 10 
```

我的代码目前看起来像这样。我有更多，但它完全是一团糟，所以现在把它评论出来。

```
$wdsl = "https://compassqa.cengage.com:4502/cdes/services/cdes_ws?wsdl";
    $client = new SoapClient($wdsl, array(
        "login" => "****",
        "password" => "***",
        "trace" => 1,
        "exceptions" => 0)); 
```

我不是要求有人握住我的手，但如果你能指出我正确的方向，那就太好了。

# php - 如何制作内联可编辑内容？

> ID：14737342
> 
> 赞同：0
> 
> 时间：2013-02-06T19:38:25.667
> 
> 标签：php, jquery, mysql

我有一个我希望可编辑的产品列表。当用户点击编辑按钮时，只需要更改所选产品的内容（例如更改为文本框，以便用户可以即时编辑标题）。但是如何防止 php 向所有产品回显例如一个文本框——我猜它会自动执行此操作？

我还想我应该使用一些 Jquery 的东西来使内容可编辑：P？

列表是这样循环的：

```
$items = $mysqli->query("SELECT product_name, product_id FROM products");
  while($products = $items->fetch_assoc(){
    echo $products['product_name'];
    echo '<a href="editindiv">Edit me</a>';
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:53:36.613

正如您的第一个评论者指出的那样，仅 PHP 是不够的。您将需要可以在浏览器中传达更改的页面 JS 代码，以及可以获取这些更改并将它们返回数据库的 PHP 脚本。您可以自己编写，也可以使用专门为此目的而存在的经过验证的库，例如[http://backbonejs.org/](http://backbonejs.org/)或[http://angularjs.org/](http://angularjs.org/)

这些是模型/视图框架，可让您在页面上显示数据库数据的视图，同时保持它们可编辑，并在您在线更新条目时更新数据库记录。但请注意：如果您从未使用过 MVC 框架，那么您一开始可能会感到非常困惑。该方法与更简单的“使用 PHP 从数据库获取数据，生成页面内容，发送到客户端，结束”方法完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:15:28.277

不一定是最有效的，但如果没有大量产品，如何为每个产品包含一个简单的表单，但在单击“编辑”链接之前将其隐藏？

清单/表格：

```
$items = $mysqli->query("SELECT product_name, product_id FROM products");
while($products = $items->fetch_assoc(){
  echo "<span>" . $products['product_name'] . "</span>";
  echo "<a class='editButton'>Edit</a>";
  echo "<form action='products.php' method='post' style='display: none;'>
        <input type='hidden' name='product' value='" . $products['prodcut_id'] . "' >
        <input type='text' name='title' value='" . $products['product_name'] . "' >
        <input type='submit' value='Update' >
        </form>";
  echo "<br/>";  
} 
```

jQuery：

```
$(".editButton").click(function(){
  //Hide the text entry and the edit link
  $(this).prev().hide();
  $(this).hide();
  //Show the form
  $(this).next().show();
}); 
```

如果您不想重新加载页面来提交更改，您也可以通过 ajax 提交它们以获得更动态的用户体验。

# iphone - 越狱 - 将图标添加到状态栏

> ID：14737344
> 
> 赞同：1
> 
> 时间：2013-02-06T19:38:30.040
> 
> 标签：iphone, ios, jailbreak, theos

我正在为 Cydia 进行调整，我想在状态栏上添加一个图标。我已经通过谷歌搜索了几个小时以来我能想到的每一个可能的短语，但似乎什么都没有出现。

我知道使用 Apple SDK 是不可能的，但我正在寻找越狱设备的方法。如果重要的话，我正在使用 Theos。

很抱歉，我无法提供任何代码或缩小范围的内容，但我真的没有什么可显示的......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:40:15.713

使用[libstatusbar](https://github.com/phoenix3200/libstatusbar)。它是统一的、安全的和持续维护的。

# python - 如何在 CSS 中使用静态配置？

> ID：14737346
> 
> 赞同：0
> 
> 时间：2013-02-06T19:38:32.823
> 
> 标签：python, django

如何在 CSS 中使用静态配置？

```
body {
        background: url('static/img/body.png');
        padding-top: 20px;
        padding-bottom: 40px;
        font-family: Georgia,"Bitstream Charter",serif;
      } 
```

这不起作用。

我的静态配置：

```
STATIC_ROOT = '/home/user/domains/domain/public_html/website/website/static/'
STATIC_URL = '/home/user/domains/domain/public_html/website/website/static/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:48:27.760

CSS 文件中的路径是相对的，因此您根本不需要在 CSS 文件中设置静态。

例如：

您的样式表位于`/home/user/domains/domain/public_html/website/website/static/stylesheet.css`

假设您的文件结构是：

```
-- /static
-- -- stylesheet.css
-- -- -- /img
-- -- -- -- body.png 
```

您可以简单地将您的身体定义为：

```
body {
        background: url('img/body.png');
        padding-top: 20px;
        padding-bottom: 40px;
        font-family: Georgia,"Bitstream Charter",serif;
      } 
```

并通过以下方式在 HTML 中调用样式表：

`<link rel="stylesheet" type="text/css" href="{{ STATIC_ROOT }}stylesheet.css">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:48:44.773

你`STATIC_URL`应该是一个 url（即`static.yourdomain.com/your_application/`或类似的），它看起来像你的文件系统上的路径，所以它不会工作。

通常，您的 css 文件中的相对 url 应该可以正常工作。

不要忘记运行`manage.py collectstatic`：[https ://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic)

# c# - Silverlight 和实体框架解决方案的策略

> ID：14737347
> 
> 赞同：1
> 
> 时间：2013-02-06T19:38:36.560
> 
> 标签：c#, asp.net, silverlight, entity-framework

我是 Silverlight 的新手，正在开发一个 ASP.NET Web 应用程序，该应用程序需要一个 Silverlight 项目来录制网络摄像头音频/视频流。

该解决方案包含一个库项目，其中包含 [User]、[BillingInfo] 等业务实体，以及一个 ASP .NET Web 应用程序。

由于 Silverlight 不支持 EF，我如何使用 Silverlight 中的强类型实体对象？我不需要访问 Context 对象，但需要访问 Entity 类。

我使用 Code First，因此必须使用 Silverlight 无法识别的注释标记实体，因为 DataAnnotations 程序集不可引用。如果需要，切换到模型优先也是一种选择（尽管不太可取）。

有没有人处理过类似的情况？在 Silverlight 中获取强类型实体的最佳方法是什么。任何文章或参考资料也会有所帮助。谢谢你。

技术（如果需要，可以选择升级）： ASP .NET Web 应用程序 (.NET 4) 实体框架 5 Silverlight 5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:10:02.540

我建议尝试一下[WCF RIA 服务](http://msdn.microsoft.com/en-us/library/ee707344%28v=vs.91%29.aspx)。这将简化您的应用程序的数据访问，并在 Silverlight 客户端为您提供强类型实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:44:07.340

Silverlight 与实体框架配合得非常好！

您可以通过 Web 服务直接使用您的实体，如本博客所述：http: [//geekswithblogs.net/berthin/archive/2011/05/29/ado_net_entityframework_from_silverlight.aspx](http://geekswithblogs.net/berthin/archive/2011/05/29/ado_net_entityframework_from_silverlight.aspx)

或者正如 Dave 建议的那样，您可以结合 RIA 服务和实体框架，因此您可以使用注释[http://blogs.msdn.com/b/brada/archive/2010/03/15/silverlight-4-ria-services-ready -for-business-exposing-data-from-entity-framework.aspx](http://blogs.msdn.com/b/brada/archive/2010/03/15/silverlight-4-ria-services-ready-for-business-exposing-data-from-entity-framework.aspx)

Silverlight 和实体框架的结合创建了一个非常强大的即用型业务逻辑。

# google-app-engine - 谷歌应用引擎定价

> ID：14737348
> 
> 赞同：0
> 
> 时间：2013-02-06T19:38:41.013
> 
> 标签：google-app-engine

我无法理解 Google App Engine 的定价。这是价格： [https ://cloud.google.com/pricing/](https://cloud.google.com/pricing/)

正如它所说，对于付费计划，按需前端实例的费用为 0.08 美元/小时。这意味着什么？

1.  这意味着如果您的应用在 10 小时内扩展到 5 个实例，您只需支付 0.08 美元 * 10 = 0.8 美元。（无论您需要多少实例，您都按小时付费）。
2.  这意味着如果您的应用在 10 小时内扩展到 5 个实例，您必须支付 0.08 美元 * 5 * 10 = 4 美元

哪种理解方式是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:02:55.383

第二个是对的。
+您为每个实例启动支付几美分（不记得多少钱）
，您每天有 28 个实例小时免费。

# git - git checkout 远程分支创建本地修改的文件

> ID：14737352
> 
> 赞同：1
> 
> 时间：2013-02-06T19:38:44.650
> 
> 标签：git, version-control

我正在本地处理项目的主干，需要签出远程分支。我的工作副本是完全最新的，我运行

```
git checkout -b RC1 origin/RC1 
```

之后我跑

```
git status 
```

它告诉我我有大约 30 个经过修改和未标记的文件。我打开一个可视化界面来查看文件中的更改，它们是 100% 相同的。当我跑

```
git diff 
```

我得到：

> 该文件将在您的工作目录中具有其原始行结尾。警告：CRLF 将被 src/private/library/arialunicid0-chinese->traditional.php 中的 LF 替换。

我的问题是为什么所有这些文件都被认为被修改了？我的分支不应该是干净的，如果我刚刚检查它就没有任何变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:43:15.033

引用[`git checkout`手册页](http://www.git-scm.com/docs/git-checkout)，

> **`git checkout <branch>`**
> 保留对工作树中文件的本地修改，以便它们可以提交到 <branch>。

所以不，结帐后工作副本并不总是干净的；您的文件可能在结帐之前已被修改，或者您的 autocrlf 设置为您搞砸了。在 Git 中关闭 EOL 转换通常不会那么令人头疼，而是确保所有开发人员都使用可以处理所有 EOL 的编辑器——并就一种行尾达成一致（例如 unix 样式，仅限 LF）。

# jquery - jQuery重置按钮重置完成事件

> ID：14737355
> 
> 赞同：0
> 
> 时间：2013-02-06T19:39:02.333
> 
> 标签：jquery

常规`<input type='reset'>`将表单重置为其初始 document.ready 状态，但不会调用 change() 事件，`<select>`尽管值已更改。

我想通过直接调用来强制更改事件，`$('select').change()`但我需要在重置完成后调用它，我应该听的重置按钮的 complete() 事件是什么？按钮上是否有“resetcomplete”事件？

jQuery 论坛上的一篇 2 年前的帖子建议使用超时功能来延迟`.change()`. 现在有没有新的做事方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T19:41:38.897

我可能读错了，但是您是否正在寻找类似于以下内容的内容：

```
$(document).on("click", "input[type='reset']", function(){
   $("select").trigger("change");
}); 
```

因此，每当用户按下按钮时，您都会为任何`click`s提供一个事件。`reset``trigger``change``select`

**编辑：**

从点击事件中获取请求并阻止默认行为，重置表单然后触发更改：

```
$(document).on("click", "input[type='reset']", function(e){
  e.preventDefault();
  form = e.toElement.form;
  form.reset();  
  $("select",form).trigger("change");
}); 
```

**[例子](http://jsfiddle.net/ChaseWest/JEeWw/2/)**

# c++ - 直接在对话框中绘制位图？

> ID：14737357
> 
> 赞同：1
> 
> 时间：2013-02-06T19:39:08.283
> 
> 标签：c++, mfc, bitmap

我将 BITMAPFILEHEADER、BITMAPINFOHEADER 和位图的图像数据分别存储在名为 bf、bi 和 imageData 的变量中。当我将这些输出到 .bmp 文件时，我可以毫无问题地打开它并查看图像。我还可以编写一些代码来导入这个 bmp 文件并将其显示在我的对话框中。

我的问题是：有没有一种简单的方法可以去掉中间人，把我的 BITMAPFILEHEADER、BITMAPINFOHEADER 和图像数据直接写入对话框中显示的 24 位图图像中，而不需要使用外部文件？

作为参考，这是我现在用来输出到文件的代码，然后将此文件输入到对话框中：

```
 //fileheader
    BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
    bf->bfType = 0x4d42;
    bf->bfSize = 6054400 + 54;
    bf->bfOffBits = 54;

    //infoheader
    BITMAPINFOHEADER* bi = new BITMAPINFOHEADER;
    bi->biSize = 40;
    bi->biWidth = 2752;
    bi->biHeight = -733;
    bi->biPlanes = 1;
    bi->biBitCount = 24;
    bi->biCompression = 0;
    bi->biSizeImage = 6054400;
    bi->biXPelsPerMeter = 2835;
    bi->biYPelsPerMeter = 2835;
    bi->biClrUsed = 0;
    bi->biClrImportant = 0;

    //image data
    unsigned char* imageData = new unsigned char[6054400];
    pFrame->GetImage(imageData);

    //////////////////////////////////////////////////////////////////////////
    //////////  Output to .bmp File   ////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////

    std::ofstream outFile;

    outFile.open("test.bmp", std::ios::binary|std::ios::out);

    outFile.write(reinterpret_cast<char *>(bf), sizeof(BITMAPFILEHEADER));
    outFile.write(reinterpret_cast<char *>(bi), sizeof(BITMAPINFOHEADER));
    outFile.write(reinterpret_cast<char *>(imageData), 6054400);

    outFile.close();

    //////////////////////////////////////////////////////////////////////////
    //////////  input .bmp and print to dialog box   /////////////////////////
    //////////////////////////////////////////////////////////////////////////

    CString szFilename ("C:/dev/NanoDev/TestApps/AVT_Testapp/test.bmp");
    HBITMAP hBmp = (HBITMAP)::LoadImage(NULL, szFilename, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE|LR_CREATEDIBSECTION);
    CBitmap bmp;
    bmp.Attach(hBmp);
    CClientDC dc(this);
    CDC bmDC;
    bmDC.CreateCompatibleDC(&dc);
    CBitmap *pOldbmp = bmDC.SelectObject(&bmp);
    BITMAP  bi;
    bmp.GetBitmap(&bi);
    dc.BitBlt(384,26,bi.bmWidth/3,bi.bmHeight,&bmDC,0,0,SRCCOPY);
    bmDC.SelectObject(pOldbmp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:51:31.797

您可以使用该[`StretchDIBits`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145121%28v=vs.85%29.aspx)直接从内存绘制到 DC。您只需要将数据从 BITMAPINFOHEADER 转换为 BITMAPINFO 结构。

# php - 使用 HTML 表单和 PHP 准备好的语句

> ID：14737359
> 
> 赞同：0
> 
> 时间：2013-02-06T19:39:29.220
> 
> 标签：php, mysqli, sql-injection

到目前为止，在处理来自 HTML 表单的输入时，我一直在使用准备好的语句和 real_escape_string。例子：

```
$var1 = $dbconnection->real_escape_string($_POST['varFromForm']); 

if ($insert = $dbconnection->prepare("INSERT etc.. ")) {
    $insert->bind_param('s', $var1);
    and so on.. 
```

虽然，当在输入的文本区域中使用新的换行符时，通过输出 \r\n 来显示存储的数据时，这会弄乱格式。这是因为它显然两次逃脱了输入。

所以我想确保我没有误解准备好的语句的处理，并且下面的代码可以通过使用准备好的语句而不转义来避免 SQL 注入？

```
$var1 = $_POST['varFromForm'];

if ($insert = $dbconnection->prepare("INSERT etc.. ")) {
    $insert->bind_param('s', $var1);
    and so on.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:46:47.387

一个prepared statement的sql查询执行计划不能被参数改变，只能插入参数。所以你不需要转义变量。

# iframe - 修改 iframe.src 而不进入历史对象

> ID：14737365
> 
> 赞同：10
> 
> 时间：2013-02-06T19:39:51.443
> 
> 标签：iframe, history, back, vimeo

我的网页中有一个 iframe。我通过 javascript 修改 src 属性，如下所示：

```
document.getElementById('myiframe').src = 'http://vimeo.com/videoid1';
document.getElementById('myiframe').src = 'http://vimeo.com/videoid2';
document.getElementById('myiframe').src = 'http://vimeo.com/videoid3'; 
```

但是，每次我这样做时，它都会登录到浏览器的历史记录中。因此，每次我在浏览器窗口中按回时，iframe 内容都会从 videoid3 变为 videoid2 再到 videoid1。如果我再次按下，整个页面都会返回。

我想用 javascript 修改 iframe src 而不将条目记录到浏览器的历史记录中。因此，如果我单击浏览器后退按钮，整个页面将返回而不更新 iframe。

我尝试做类似的事情：

```
document.getElementById('myiframe').contentWindow.location.replace('http://vimeo.com/videoid1');
document.getElementById('myiframe').contentWindow.location.replace('http://vimeo.com/videoid2');
document.getElementById('myiframe').contentWindow.location.replace('http://vimeo.com/videoid3'); 
```

尽管这使浏览器后退按钮的行为符合我的意愿，但它破坏了 vimeo 视频中的某些内容。Vimeo 要求您通过 iframe.src 而不是 contentWindow.location.replace() 更改 url。

因此，如何在不登录历史记录的情况下修改 iframe.src？

**相关** 这实际上是我正在探索解决主要问题的解决方案之一，我在此处发布了 [带有 iframe 的 History object back button](https://stackoverflow.com/questions/14722089/history-object-back-button-with-iframes)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T20:07:16.767

不要更改src，只需用新的iframe替换旧的iframe？

```
const urls = [
  "http://bing.com",
  "http://google.com",
  "http://duckduckgo.com"
];

function next() {
  if(urls.length==0) return;
  const original = document.getElementsByTagName("iframe")[0];
  const newFrame = document.createElement("iframe");
  newFrame.src = urls.pop();
  original.parentNode.replaceChild(newFrame, original);
}

nextbtn.addEventListener("click", () => next());
```

```
iframe {
  width: 300px;
  height:300px;
}
```

```
<p>let's test some iframes</p>
<button id="nextbtn">next</button>
  <iframe />
```

没有历史状态。相同的功能。每个人都赢了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-23T13:06:23.233

你可以这样做：

```
var iframe = $('#iframe')[0];  
iframe.contentWindow.location.replace(newUrl); 
```

# php - 需要 PHP 函数变量的建议

> ID：14737369
> 
> 赞同：0
> 
> 时间：2013-02-06T19:40:07.657
> 
> 标签：php, session

我有一个简单的表单，我使用会话变量将数据传递到 php 页面。我在外部函数页面中有两个函数，但我无法让每个函数中的变量在全局范围内工作，除非我在每个特定函数中命名变量。

这是一个示例，我希望有人可以提供帮助。

```
$dbName = $_SESSION['dataBaseName'];    
$tableName = $_SESSION['tableName'];
$artistName = $_SESSION['artistName'];
$songName = $_SESSION['songName']; 

function table_exists($tableName)
{

if(mysql_num_rows(mysql_query("SHOW TABLES LIKE '".$tableName."'"))==1) 
{
echo "Table exists <br />";
}
else
{
$sql = "CREATE TABLE songList (songId int NOT NULL AUTO_INCREMENT PRIMARY KEY, artistName varchar(60), songName varchar(25))";
$result= mysql_query($sql) or die(mysql_error());
return $result;
}   
} 
```

在我的 OTHER 函数中，我将变量放在函数内部。我使用什么组合似乎并不重要，我的变量必须重新声明我使用的每个函数。我尝试在前面使用 GLOBAL 但这只会导致错误。这是另一个功能：

```
function tableWrite() 

{

$dbName = $_SESSION['dataBaseName'];    
$tableName = $_SESSION['tableName'];
$artist = $_SESSION['artist'];
$song = $_SESSION['song']; 

 if(!empty($_REQUEST['insert']))
 {
  $sql = "INSERT INTO $tableName (artistName, songName) values ('$artist', '$song')";
  $result = mysql_query($sql) or die(mysql_error());
  $showaresult = mysql_query("SELECT * from $tableName where artistName = '$artist' AND songName= '$song' ") or die("Invalid query: " . mysql_error());
  echo ("New entry added"); 

  $row = mysql_fetch_array($showaresult);
  echo ("<br> Catalog Number = ". $row["songId"] . "<br> Artist Name =  " . $row["artistName"] . "<br>");
  echo("Song Name = " . $row["songName"] . "<br>");

  echo ("<h1> Current Catalog </h1>");

  $showresult = mysql_query("SELECT * from $tableName") or die("Invalid query: " . mysql_error());
  while ($row = mysql_fetch_array($showresult))
  {
   echo ("<br> Catalog Number = ". $row["songId"] . "<br> Artist Name =  " .    $row["artistName"] . "<br>");
  echo("Song Name = " . $row["songName"] . "<br>");

  }

  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:43:40.453

您应该将这些数据库访问变量放在不同的 php 文件中（也许`db_config.php`？）。`require`然后，您可以在需要所述变量值的文件中使用指令。

另外，不要使用`mysql_*`函数。它们已被弃用，取而代之的是`PDO`or `MySQLi`。这将帮助您编写更好的代码并防止 SQL 注入漏洞。

# c++ - 如何找出使用 gcc 时实际应用了哪些优化？

> ID：14737371
> 
> 赞同：21
> 
> 时间：2013-02-06T19:40:11.080
> 
> 标签：c++, gcc, compilation, g++, compiler-optimization

使用 IBM 的 XL 编译器系列，可以提供两个选项 (`-qreport`和`-qlist`) 来为每个源文件生成报告，其中包括关于应用了哪些优化的信息，或者代码的哪些部分无法优化（以及为什么）。

是否有可能为 GNU 的 g++ 获得类似的报告 - 如果是，该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T20:23:45.883

看看`-fdump-tree-[switch]`旗帜。您可以使用它`-fdump-tree-all`来获取大量信息。

此外，在主干 gcc`-fopt-info-[options]`中，您可以访问更高级别的优化信息，例如，当应用特定优化、错过等时，例如

```
-fopt-info-inline-optimized-missed 
```

打印所有成功和错过的内联优化（`stderr`在这种情况下）。这显然是相当新的功能，所以我不确定它的支持程度如何。

在较早的版本中，它们`-ftree-vectorizer-verbose=n`现在已被弃用，取而代之的是 opt-info。

所有这些选项都列在这里[https://gcc.gnu.org/onlinedocs/gcc/Developer-Options.html](https://gcc.gnu.org/onlinedocs/gcc/Developer-Options.html)虽然挑选有用的选项可能有点棘手。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T06:21:06.253

用于`-S -fverbose-asm`列出汇编程序输出标头中的每个静默应用选项（包括优化选项）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-09T11:33:53.623

来自[https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/Optimize-Options.html#Optimize-Options](https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/Optimize-Options.html#Optimize-Options)：

您可以调用 GCC`-Q --help=optimizers`以找出在每个级别启用的确切优化集。

示例：（启用优化选项的计数）不需要文件。

```
$ g++ -std=c++17 -O2 -Q --help=optimizers 2>&1 |grep enabled |wc -l
135 
```

请注意，[-O1/2/3 启用的许多优化没有单独的标志](https://gcc.gnu.org/wiki/FAQ#Is_-O1_.28-O2.2C-O3.2C_-Os_or_-Og.29_equivalent_to_individual_-foptimization_options.3F) （另请参见：[c++ - g++ O1 is not equal to O0 with all related optimization flags - 代码日志](https://stackoverflow.com/questions/53175916/g-o1-is-not-equal-to-o0-with-all-related-optimization-flags)）

# vb.net - 24 小时制排序

> ID：14737372
> 
> 赞同：-2
> 
> 时间：2013-02-06T19:40:13.440
> 
> 标签：vb.net, sorting, time

编辑：它实际上是一个字符串数组。我认为如果我在排序之前转换为整数，它应该可以工作......

编辑 2：我已经将数组转换为 Int，所以我可以按 Int 排序，现在我只需要弄清楚如何使它与数组中的一个实际字符串一起工作。

```
Dim test As IList(Of Integer) = etaTimeSorted.ConvertAll(Function(str) Int32.Parse(str)) 
```

如何对包含 24 小时时间的数组进行排序？当我对它们进行排序时，它们实际上只是数字（0945 而不是 09:45）。我正在使用 vb.net sort() 方法：

```
array.sort() 
```

它的排序是这样的：

```
0001
0010
0100
1000
0102
1100
0112
1130 
```

这让我发疯了。我觉得我很久以前就应该在 Google 上找到我的问题的答案。我想也许其中一种排序重载会很有用，但看起来不是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:42:37.713

您需要编写自己的类来实现`IComparer(Of String)`. `Sort()`使用此接口比较字符串对并找到它们所属的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:04:09.663

可以使用 LINQ 做到这一点，但我不知道如何在 VB 中做到这一点，对不起：

```
nums.Select (n => new { Hour = n.Substring(0,2), Minute = n.Substring(2)}).OrderBy (n => n.Hour).ThenBy (n => n.Minute ).Select (n => n.Hour + n.Minute) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:41:55.237

```
etaTimeIntSort = etaTimeSorted.ConvertAll(Function(str) Int32.Parse(str))
etaTimeIntSort.Sort()
etaTimeSorted = etaTimeIntSort.ConvertAll(Function(int) Convert.ToString(int)) 
```

将数组转换为 int，排序，然后转换回字符串，这样我就可以插入我的“空白”项目。

# button - Twitter引导程序突出显示悬停按钮

> ID：14737385
> 
> 赞同：0
> 
> 时间：2013-02-06T19:40:55.857
> 
> 标签：button, twitter-bootstrap, less, styling

默认的 Twitter Bootstrap 2 按钮样式使按钮在悬停时变暗。据我所知，这是通过在按钮上添加浅色渐变叠加层并在悬停时将此叠加层移动到 -15px 来完成的，这会使按钮变暗。

我想知道，如果我可以进行一般更改，使悬停时按钮变亮，将相反的体验作为默认设置？

**注意：**切换`@btnBackgroundHighlight`和`@btnBackground`输入`variables.less`（我使用较少的引导程序）最终使下部的按钮比上部的按钮更轻（当不悬停时）。这给人一种按钮被按下/禁用的感觉。我希望按钮的上部始终是最轻的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:50:14.353

默认按钮具有从@btnBackground（顶部）到（@btnBackgroundHighlight）的渐变，并将悬停颜色设置为@btnBackgroundHighlight。切换颜色将无济于事，因为轻悬停将始终具有从暗到亮的渐变，反之亦然。

**解决方案 1**：

生成一个按钮： http: [//twitterbootstrapbuttons.w3masters.nl/](http://twitterbootstrapbuttons.w3masters.nl/)选择第一个灯光变体。手动切换代码的​​渐变色。不要忘记通过添加将覆盖悬停在您的CSS中：`background-position: 0 15px;`

**解决方案 2**：

通过添加以下内容生成您的代码：

```
.buttonBackgroundReverse(@startColor, @endColor, @textColor: #fff, @textShadow: 0 -1px 0 rgba(0,0,0,.25)) {
  // gradientBar will set the background to a pleasing blend of these, to support IE<=9
  .gradientBar(@startColor, @endColor, @textColor, @textShadow);
  *background-color: @endColor; /* Darken IE7 buttons by default so they stand out more given they won't have borders */
  .reset-filter();

  // in these cases the gradient won't cover the background, so we override
  &:hover, &:focus, &:active, &.active, &.disabled, &[disabled] {
    color: @textColor;
    background-color: @startColor;
    *background-color: darken(@startColor, 5%);
  }
  &:hover, &:focus {background-position: 0 15px;}

  // IE 7 + 8 can't handle box-shadow to show active, so we darken a bit ourselves
  &:active,
  &.active {
    background-color: darken(@startColor, 10%) e("\9");
  }
}

@darkcolor: #46a546;
@lightcolor : lighten(#46a546, 30%);
.btn-light 
{
.buttonBackgroundReverse(@lightcolor,@darkcolor);
} 
```

使用@darkcolor 设置您的按钮颜色，也可以根据您的需要更改@lightcolor 的百分比。有关示例，请参见[http://bootply.com/65731 。](http://bootply.com/65731)

# list - 如何在clojure中按元素组合两个向量向量？

> ID：14737391
> 
> 赞同：8
> 
> 时间：2013-02-06T19:41:30.430
> 
> 标签：list, vector, clojure

假设我有：

```
'[[c c c]
  [y y y]
  [m m m]] 
```

和

```
'[[r g b]
  [r g b]
  [r g b]] 
```

我想拥有：

```
'[[[c,r] [c,g] [c,b]]
  [[y,r] [y,g] [y,b]]
  [[m,r] [m,g] [m,b]]] 
```

在 clojure 中执行此操作的优雅方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T21:25:04.117

```
(def a '[[c c c]
         [y y y]
         [m m m]])
(def b '[[r g b]
         [r g b]
         [r g b]])

(mapv (partial mapv vector) a b) ;; will work with arbitrary number 
                                 ;; of equal sized arguments

;=> [[[c r] [c g] [c b]] [[y r] [y g] [y b]] [[m r] [m g] [m b]]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T01:03:27.687

考虑采用[core.matrix 这样](https://clojars.org/net.mikera/core.matrix)的东西。

它将非常高兴地将嵌套向量作为矩阵来操作，但如果您需要它，它还会做更强大的东西（例如，通过 JBLAS 支持加速的本机矩阵库）。它正在成为 Clojure 中用于矩阵计算的权威库/API。

在这种情况下，您可以简单地使用“emap”将函数元素应用于两个矩阵：

```
(use 'core.matrix)

(def cym '[[c c c]
           [y y y]
           [m m m]])

(def rgb '[[r g b]
           [r g b]
           [r g b]])

(emap vector cym rgb)

=> [[[c r] [c g] [c b]] 
    [[y r] [y g] [y b]] 
    [[m r] [m g] [m b]]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T20:27:17.013

`partition`并`interleave`带您到那里，如下所示：

```
(def a '[[c c c]
         [y y y]
         [m m m]])
(def b '[[r g b]
         [r g b]
         [r g b]])

(map (partial partition 2) (map interleave a b))
;=> (((c r) (c g) (c b)) 
;    ((y r) (y g) (y b))
;    ((m r) (m g) (m b))) 
```

如果由于某种原因您需要将答案转换为嵌套向量，可能值得一看[这个问题](https://stackoverflow.com/questions/12044181/into-or-vec-converting-sequence-back-to-vector-in-clojure)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T20:58:31.273

这是另一个实现：

```
(defn combine-vectors [& vecs]
  (apply map (partial map vector) vecs)) 
```

替换`map`为`mapv`从中获取向量而不是惰性序列。

# c# - GroupBox：根据文本长度调整大小

> ID：14737392
> 
> 赞同：0
> 
> 时间：2013-02-06T19:41:32.623
> 
> 标签：c#, winforms, groupbox

有没有一种简单的方法可以根据属性中字符串的*长度*`GroupBox` *自动调整*其宽度？*`Text`*

 *假设我手动调整宽度（在*设计模式下*），`Text = "Text1"`然后，当程序运行时，我将其更新为`Text = "This is the new text!"`我希望宽度*自动扩展*而不是*换行*到下一行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:49:48.633

我相信您可以将[AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.groupbox.autosize.aspx)属性设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:52:25.890

您需要使用[`Graphics.MeasureString Method`](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)

这里是一个简单的例子，提示，宽度取决于*字体的大小而不是你的`GroupBox`属性*的字体大小。

```
SizeF stringSize = new SizeF();
private void groupBox1_Paint(object sender, PaintEventArgs e)
{
    string measureString = "this is your text";
    Font stringFont = new Font("Arial", 17);

    // Measure string.
    stringSize = e.Graphics.MeasureString(measureString, stringFont);
}

private void button1_Click(object sender, EventArgs e)
{
    groupBox1.Text = "this is your text";
    groupBox1.Width = (int)stringSize.Width;
} 
```

我希望它会帮助你。*

# c# - 如何以 RESTful 方式表示\维护主从关系？

> ID：14737393
> 
> 赞同：6
> 
> 时间：2013-02-06T19:41:34.253
> 
> 标签：c#, entity-framework, rest, asp.net-web-api

在我们的 ASP.net Web API 背后，我们有一个代码优先的实体框架模型。考虑以下（简化的）实体：

```
public class Form
{
    public long Id { get; set; }

    public string Identifier { get; set; }

    public virtual FormGroup Group { get; set; }
}

public class FormGroup
{
    public long Id { get; set; }

    public string Identifier { get; set; }

    public virtual ICollection<Form> Forms { get; set; }
} 
```

如您所见，FormGroups 和 Forms 之间存在一对多的关系。我的问题是，应该如何设计一个允许我们更改表单所属组的 RESTful API？

到目前为止，我提出了两种可能的方法，每种方法各有利弊：

**将关系表示为链接结构：**

```
{
    "Id" : 1,
    "Identifier" : "Form1",
    "link" : {
        "rel": "http://myapi/res/formgroup",
        "href": "http://myapi/formgroups/1"
    }
} 
```

优点：

*   包含指向表单组表示的有意义的链接

缺点：

*   此类链接没有特定的标准
*   服务器端逻辑变得更加复杂

**使用 PUT 将资源链接在一起**

```
data: {
    "Id" : 1,
    "Identifier" : "Form1"
}

PUT data to http://myapi/formgroups/1/forms 
```

优点：

*   表示没有无关的属性

缺点：

*   资源可以由多个 URI 标识，即 /forms/1 和 /formgroups/1/forms/1
*   发送除了形成密钥所需的任何数据之外的任何数据都是无关的或令人困惑的

我对这两种方法都不是特别满意，因为它们似乎都有更多的缺点而不是优点。

我知道一个“正确”的解决方案是实现 DTO 并将我的实体模型与我的资源表示分离，这将允许我添加一个我可以设置的 FormGroupId。

像所有优秀的程序员一样，我很想知道这是如何在 RESTful API 中工作的。我还想要一个可以普遍应用于模型中任何导航属性的解决方案。

明信片上的答案......这些方法中的任何一种都是有效的，还是有另一种我错过的做事方式？

皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:15:58.970

基于数据模型构建 API 只会限制您的整体设计。我倾向于从我的陈述中*恢复过来。*

通过完全控制您的陈述，您可以随心所欲地表达关系。例如，您可能决定在您的陈述中包含`FormGroup`您的`Form`陈述：

```
GET /api/forms/1

    {
      "Id" : 1,
      "Name" : "Form 1",
      "FormGroup" : {
        "Id" : 1,
        "Name" : "Form Group 1"
      }
    } 
```

或在表示中包含表格`FormGroup`：

```
GET /api/formgroups/1

    {
      "Id" : 1,
      "Name" : "Form Group 1",
      "Forms" : [
        {
          "Id" : 1,
          "Name" : "Form 1"
        },
        {
          "Id" : 2,
          "Name" : "Form 2"
        }
      ]
    } 
```

事实上，你可以两者都做。只需确保每个资源只有一个 URI 标识符。

如果您真的想采用 REST 并在您的 API 响应中包含超媒体链接，我建议您查看[超文本应用程序语言](http://stateless.co/hal_specification.html)(HAL)。HAL 提供了一种用于表达资源之间相关链接的约定。例如：

```
{
  "_links" : {
    "self" : { "href" : "/api/forms/1" },
    "related" : { "href" : "/api/formgroups/1" }
  }
  "Id" : 1,
  "Name" : "Form 1",
  "FormGroupId" : 1
} 
```

希望您能看到，您如何表示您的资源并不能决定您如何**管理**它们之间的关系。

你如何做到这一点在很大程度上取决于你的场景中的逻辑，并且通常可以通过决定谁*拥有*关系来帮助。

举个典型的`Blog Post .* Comments`例子。评论本身没有什么意义。如果我要设计一个用于管理博客评论的 API，我可能会这样做：

```
POST   /posts/1/comments  - Add a comment to post 1
DELETE /posts/1/comments/1 - Remove comment 1 from post 1 
```

请注意，评论确实具有身份，但仅在博客文章的上下文中。

在您的情况下（基于我们在推特上的讨论），您说`Forms`确实在`FormGroup`. 您还说您可以拥有孤儿表格 - 那些不属于某个组的表格。

考虑到这一点，您可以通过资源管理`FormGroup`关系。`Form`最简单的方法是在`FormGroupId`对表单资源执行 POST 或 PUT 时设置/更新属性。如果（同样这取决于您的方案），您需要能够在`FormGroup`不更新资源上的任何其他属性的情况下更改`Form`您可能希望发送 PATCH 或创建“子资源”来管理关系：

```
POST /api/forms/1/group -- set the form group for forms/1
{
  "formGroupId" : 10
}

DELETE /api/forms/1/group -- unlink forms/1 from its group 
```

不幸的是，没有“正确的方法”来表示您的资源之间的关系。我的建议是选择最自然的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:31:08.720

你说的对。目前，ASP.NET Web API 上的资源世界是混合的，您在某处定义路由，而您必须在其他地方管理资源关系和链接。您可以通过自行定义具有维护和性能影响的每个路由来进行分层路由。

我正在考虑把这些放在一起。看空间:)

* * *

现在就回答您的问题而言，我会这样做：

```
/api/formgroups/1
/api/formgroups/1/forms/123 
```

维护链接和设置路由仍然或多或少是临时的——目前。

# sitecore - Sitecore 跨文化链接

> ID：14737402
> 
> 赞同：0
> 
> 时间：2013-02-06T19:42:11.583
> 
> 标签：sitecore, sitecore6, cross-language

如果我在 en-US 中有一个项目，并且我想从富文本编辑器中的 en-US 版本链接到 zh-CN 文化中的相同项目，我该如何实现？此外，上下文语言/文化将如何受到影响？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:17:53.627

您可以使用`?sc_lang=cn`querystring 参数来更改当前页面的语言。我不确定 cn 是否是中文的语言代码；）

这是最简单的方法，但如果您将 LinkManager 设置为使用嵌入式语言路径，您也可以使用它。然后您需要设置`urlOptions.LanguageEmbedding = LanguageEmbedding.Always`并且在创建链接时，您可以使用`options.Language`设置为所需的语言。然后，您的网址将类似于所选语言的代码在`http://www.yoursite.com/en/itemname`哪里。`/en/`

# debugging - 在 pgAdmin 中调试 PostgreSQL 功能：安装脚本失败

> ID：14737405
> 
> 赞同：1
> 
> 时间：2013-02-06T19:42:17.200
> 
> 标签：debugging, pgadmin

我安装了 9.2 并想尝试调试器。按照启用它的说明进行操作，包括确保用户是超级用户，但“调试”选项在“工具”菜单上保持为灰色，并且在右键单击某个功能时不会出现在树视图的上下文菜单中。

我注意到它`pldbgapi.sql`不存在，但有一个名为`pldbgapi--1.0.sql`.

在`pldbgapi--1.0.sql`Query 窗口中打开并调用 Execute Script 时，它会失败：

```
 DO $do$ 
```

出现无效字符错误。它不喜欢“做”。`--`我还必须包装以in开头的注释行`/* */`。

为什么执行脚本会崩溃`DO`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:53:37.887

一定要到Tools菜单，Server Configuration，postgresql.conf，打开配置文件的时候，每个配置项旁边都会有一个checkbox。向下滚动到 *shared_preload_libraries*，然后单击复选框以启用它。保存配置。停止并重新启动数据库。

# jquery - pjax 返回 false 以防止滚动？

> ID：14737409
> 
> 赞同：0
> 
> 时间：2013-02-06T19:42:36.590
> 
> 标签：jquery, pjax

当使用带有`duration`变量的 pjax 时，如何设置一个函数来防止页面滚动发生变化？

```
var duration = 400
$('a.pjax').pjax('#main', { duration: duration })
$('#main')
  .on('pjax:start', function() { $(this).fadeOut(duration) })
  .on('pjax:waiting', function() {
      $(this)
        .html('<div style="width: 100%; text-align: center;"><img src="waiting.gif" /></div>')
        .show()
    })
  .on('pjax:end',   function() { $(this).fadeIn(duration) }) 
```

我一直在尝试以下但没有成功：

```
$('a.pjax').pjax('#main', { duration: duration }, function(){
    return false;
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T22:50:16.777

这会阻止 pjax 自动滚动：

```
$.pjax.defaults.scrollTo = false; 
```

# applescript - 在 Applescript 命令中使用双引号 Do Shell Script Echo

> ID：14737414
> 
> 赞同：3
> 
> 时间：2013-02-06T19:43:07.380
> 
> 标签：applescript, echo, quotes, double-quotes

我正在尝试使用 applescript 来运行命令行进程。Applescript 的简化版本如下所示

```
do shell script "echo bwfmetaedit --INAM=\"name\" --IART=\"artist\" --ICRD=\"date\" /desktop/filepath.wav" 
```

预期的结果是

```
bwfmetaedit --INAM="name" --IART="artist" --ICRD="date" /desktop/filepath.wav 
```

如果我只是在终端中运行该命令，我会得到正确的输出。但是使用applescript，我得到以下结果。请注意值周围缺少的双引号。

```
"bwfmetaedit --INAM=name --IART=artist --ICRD=date /desktop/filepath.wav" 
```

我在这里想念什么？我需要在值周围加上双引号，否则命令将无法正常运行。

谢谢，摩根

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:12:13.317

尝试：

```
do shell script "echo bwfmetaedit --INAM=\\\"name\\\" --IART=\\\"artist\\\" --ICRD=\\\"date\\\" /desktop/filepath.wav" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:56:24.367

引号被正确传递，只是 shell 没有回显它们，因为它们是 shell 语法的一部分。

如果您尝试在其自己的行上打印每个参数的 AppleScript：

```
do shell script "sh -c 'for F in \"${@}\"; do echo \"${F}\"; done' \"${0}\" echo bwfmetaedit --INAM=\"name with spaces\" --IART=\"artist with spaces\" --ICRD=\"date with spaces\" /desktop/filepath.wav" 
```

然后你会看到输出是：

```
"echo
bwfmetaedit
--INAM=name with spaces
--IART=artist with spaces
--ICRD=date with spaces
/desktop/filepath.wav" 
```

传递给 echo 的每个参数都被正确解析，就好像它被引用一样。引号位于开头和结尾，因为它是带有嵌入换行符的 AppleScript 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T22:55:58.563

对我来说，我的挑战是

```
osascript -e 'tell application "Simulator" to quit' 
```

所以我的解决方案是

```
do shell script osascript -e 'tell application \"Simulator\" to quit'" 
```

您必须在第一个双引号之前转义，然后再在它之​​前转义。谢谢大家的提示！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-24T22:51:31.683

要调用这个内部代码，试试这个

`set myStr to "/bin/echo Hello here is \\\"Quoted String\\\"`

do 脚本调用将用双引号将其写入。

`do script myStr in front window`

# windows - 利用 cmd 的“for /f”解析和规范化文件

> ID：14737415
> 
> 赞同：0
> 
> 时间：2013-02-06T19:43:08.103
> 
> 标签：windows, batch-file, active-directory, cmd

我正在构建一个查询 AD 的批处理文件，将结果通过管道传输到 .txt 文件中，然后使用 for /f 循环来解析和规范化 .txt 文件。我遇到了一些并发症，想让其他眼睛看看它。

另外，使用 VBS 来解析/规范化而不是笨拙的 /f 会更好吗？

批：

```
@echo off
echo **********************************************
echo * This batch file will query members of a DL *
echo **********************************************
echo.   
set /p gn=Enter DL to get Members:

echo. 
CHOICE /C:12 /M "Choose 1 for DOMAIN1 query, Choose 2 for DOMAIN2 query."
IF ERRORLEVEL 2 GOTO Label2
IF ERRORLEVEL 1 GOTO Label1 

:Label1
dsquery group DC=DOMAIN1,DC=NET -name "%gn%" | dsget group -members -expand >> "%gn%"List.txt
set fn = "%gn%"List.txt"
GOTO End

:Label2
dsquery group DC=DOMAIN2,DC=NET -name "%gn%" | dsget group -members -expand >> "%gn%"List.txt
set fn = "%gn%"List.txt"
GOTO End

:End

for /f "delims=, tokens=1,2" %i in ('more %fn%') do @ echo %i 
```

以下是创建的 .txt 文件中的一些示例行：

```
"CN=LastName1\, FirstName1,OU=OU1,OU=OUSUB1,DC=DOMAIN1,DC=net"
"CN=LongLastName1\, LongFirstName1,OU=OU1,OU=OUSUB1,DC=DOMAIN1,DC=net"
"CN=LastName2, FirstName2,OU=OU1,OU=OUSUB1,DC=DOMAIN1,DC=net" 
```

在 for 循环中，我用逗号分隔。从我的示例行中，我打算将令牌 1 存储为“CN=LastName1\ 并将令牌 2 存储为 FirstName1 并从那里开始，但这就是我被卡住的地方。我的 for 循环出错了”“此时 fni 是意外的” . 这与从单引号中转义 %fn% 变量有关吗

```
('more %fn%') 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:35:46.787

你的分配`fn`是错误的。空间很重要。您正在创建一个名称中带有空格的变量。此外，您的报价是不平衡的，这会导致以后的解析问题。分配发生在两个地方。正确的形式如下所示：

```
set "fn=%gn%List.txt" 
```

请注意，当在变量名前使用引号时，值中不包含封闭引号。

在批处理文件中运行时，您必须将 FOR /F 语句中的百分比加倍。此外，由于我删除了引号，您应该将它们添加到您的 MORE 目标中。最后，不需要@，因为您在脚本顶部关闭了 ECHO。

```
for /f "delims=, tokens=1,2" %%i in ('more "%fn%"') do echo %%i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:38:12.340

工作解决方案（进行一些重构）：

```
set /p gn=Enter DL to get Members:

IF EXIST "%gn%"-List.txt (
     DEL "%gn%"-List.txt
)

echo. 
CHOICE /C:12 /M "Type 1 to query DOMAIN1\. Type 2 to query DOMAIN2."
IF ERRORLEVEL 2 GOTO Label2
IF ERRORLEVEL 1 GOTO Label1 

:Label1
dsquery group DC=DOMAIN1,DC=NET -name "%gn%" | dsget group -members -expand >>
"%gn%".txt
GOTO End

:Label2
dsquery group DC=DOMAIN2,DC=NET -name "%gn%" | dsget group -members -expand >>
"%gn%".txt
GOTO End

:End
REM Cleaning up the output -
SET "fn=%gn%.txt"
FOR /f "delims=, tokens=1,2" %%i in ('type "%fn%"') do ( 
     FOR /f "delims==\, tokens=1,2" %%b in ("%%i%%j") do (echo %%c,%%j) >>
"%gn%"-List.txt)

REM Deleting the Temp file -
DEL "%gn%".txt
echo.
echo %gn%-List.txt created!
PING 1.1.1.1 -n 4 >NUL 
```

# java - Java中的构造函数返回什么？

> ID：14737420
> 
> 赞同：31
> 
> 时间：2013-02-06T19:43:14.840
> 
> 标签：java, constructor

在继续关于这个主题的帖子之后，我发现自己有点困惑。所以我再次问这个：

> “Java 构造函数是否返回任何值？”

我的书说它们不能返回值，但我的教授说它们可以并且他们总是这样做。

由于需要将控制权转移给具有某些价值的人，要么无效？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-06T19:45:21.820

这有点令人困惑：构造函数确实不返回值；它是运营商`new`。但是，构造函数总是与`new`^*一起使用，所以看起来它们*总是*返回一个值。

* * *

^*`new`这是一个轻微的简化：如果你通过*反射*，你可以使用构造函数。然而，同样的机制将发挥作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-06T19:44:57.173

构造函数返回它所属类的新实例，即使它没有显式的返回语句。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T19:46:23.123

我认为这种混淆纯粹是符号化的。当你声明一个构造函数时，你会这样做：

```
public class Foo {
    public Foo() {}
} 
```

在这里，没有明确的返回值。

然而，当你实例化一个对象时，语法如下：

```
Foo foo = new Foo(); 
```

这通过分配内存和调用构造函数来创建一个新对象。在这里，结果显然是 的一个实例`Foo`。

调和明显冲突的符号的一种方法是将构造函数视为返回正在构造的对象，但隐含地这样做。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-29T15:18:08.497

构造函数是特殊的方法。那么构造函数和方法的基本区别在于

**构造函数**

*   与Class同名
*   没有返回类型
*   可以重载但不能覆盖。

然而

**方法**

*   可能与类的名称相同，也可能不同。
*   有返回类型
*   可以重载和覆盖。

**方法的语法：**
AccessModifier ReturnType Class(...)
**例如：** public static void main(String []args)

**构造函数的语法：**
AccessModifier *No ReturnType* Class(...)
**EG：** public static main(String []args)

**请注意：**

Java 是一种强类型语言，因此每个函数都有其返回类型，而构造函数总是返回该类的一个实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-18T01:05:24.020

作为一名 Java 程序员，需要一个心智模型来预测 Java 程序在编译时和运行时的行为。只要一个人的心智模型与现实相比（即与语言规范描述的行为相比，或与实际Java实现的行为相比）做出正确的预测，那么心智模型是*可行*的。两种不同的、不相容的心智模型有时可能都是*可行*的，这就是一个例子。

* * *

以下是语言规范 ( [§15.9.4](https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.9.4) ) 所说的：

> 接下来，调用指定类类型的选定构造函数。...
> 
> 类实例创建表达式的值是对指定类的新创建对象的引用。

所以构造函数被调用，调用构造函数的表达式的结果是对新对象的引用。规范没有说构造函数返回那个引用，也没有说构造函数*不*返回那个引用。

* * *

让我们考虑*“构造函数返回对新对象的引用”的*心理模型。它确实具有直觉意义。当您在表达式中调用构造函数时`new Object()`，表达式具有值，就像您在`foo.bar()`表达式中调用方法时，表达式具有值一样。在后一种情况下，表达式的值是方法的返回值，因此在前一种情况下，表达式的值是构造函数的返回值可能会很直观。

现在，这是一个非常*笨拙*的心智模型，因为你必须想象：

*   构造函数以隐式结尾`return this;`，
*   构造函数中的每个bare`return;`都是隐式的`return this;`，
*   隐式`return this;`仅在可访问时才存在，因为静态检查器（检查隐式代码，例如在默认的无参数构造函数中）禁止无法访问的代码，
*   由于完全任意的原因，当用作表达式时，语句`this();`和是非法的。`super();`

另一种心智模型，即构造函数不返回任何内容，要简单得多，并且在没有任何警告的情况下是*可行的。*作为一名教育工作者，我喜欢教授这种心智模型，因为它很简单。

但只要你小心，两个心智模型都会对 Java 程序的行为做出相同的预测。从哲学上讲，这有点像对量子力学的不同解释；只要他们都做出相同的预测，那么就没有科学依据可以说某个特定的预测是正确的而其他的预测是错误的。相反，*“构造函数不返回任何东西”*模型只是更简单，更容易应用，所以在我看来，学习和教学更有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-16T19:57:40.083

所以，到目前为止，我关心的是构造函数将引用 id 返回到该类的引用变量。举个例子：

```
class demo
{
    demo{}
}
class demo1
{
    public static void main(String as[])
    {
        demo d = new demo();
        System.out.println(d);
    }
} 
```

输出：demo@7d4991ad 它是构造函数返回的类 demo 的对象 'd' 的引用 id。如果你不定义你的构造函数，那么 jvm 将从默认构造函数中获取这个 id。

您可以通过以下行交叉检查： System.out.println(new demo()); 输出：demo@1b6d3586。由于每个对象在内存中都有其单独的堆区域，因此每个对象的引用 id 也会有所不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T20:18:57.393

我同意以上两种解释，并想补充一些陈述以使之更清楚：

问题：什么是构造函数：答案：它是一个名称与类相同的方法。

问题：构造函数是否返回任何内容？答：不，甚至没有。

问题：如何调用构造函数？或者如何调用构造函数？答案：通过使用 NEW 关键字创建对象。

问题：如何创建对象？答案：创建对象的一种方法是使用 NEW 运算符，它返回一个对象实例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-23T13:11:46.130

根据定义，不可能从构造函数返回值。构造函数不支持任何返回类型

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-06T20:55:54.610

构造函数返回引用 id。我做了一个小程序来证明它

```
class Alpha {
    void myMethod() {
        System.out.println(this);// prints same reference ID
    }

    public static void main(String[] args) {
        Alpha alpha = new Alpha();
        System.out.println(alpha);// prints the reference ID
        alpha.myMethod();
    }
} 
```

输出

```
Alpha@16f65612
Alpha@16f6512 
```

您可以清楚地看到两个参考 ID 相同

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-10-31T06:23:53.100

想象一下，你被告知要画一只鹰。

第一个场景：你没有被告知它应该是什么样子。你所知道的就是画一个鹰的简单草图

第二个场景：你被告知要使用什么颜色以及绘制鹰的姿势

现在，第一个场景准确地描述了默认构造函数的作用，而第二个场景是当您获得有关如何创建对象的信息时。但是，除非您拿起铅笔和纸开始素描，否则您将不会得到任何回报。

因此，当您使用 new 关键字调用构造函数时，您会得到一个对象。尽管它没有显式返回某些东西，而是创建或构造了可以用作类的实例的东西。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-04-21T08:52:08.477

是的，它是当前的类实例。（我们不能使用返回类型，但它会返回一个值）。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-04-05T16:15:26.783

构造函数在非常低的级别返回类的详细结构（例如数据和方法将使用多少内存空间）+执行构造函数中编写的代码。而 new 运算符将构造函数的返回作为其操作数并在运行时分配内存并将其处理程序返回给类变量。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-01-16T07:49:44.990

隐式构造函数返回类类型............

# css - HTTPS 破坏 IE 和 chrome 中的字体引用

> ID：14737428
> 
> 赞同：1
> 
> 时间：2013-02-06T19:44:08.900
> 
> 标签：css, https, typekit

在 IE 和 Chrome 中查看[https://www.hyperiontx.cbstage.com/ 。](https://www.hyperiontx.cbstage.com/)标头标签 ( `h1`through `h6`) 都有一个依赖于 javascript fonts.com 规范的字体规范，尽管它在[http://www.hyperiontx.cbstage.com](http://www.hyperiontx.cbstage.com)上的不安全 http 地址呈现，但该规范无法正确呈现。查看标题为“我们的重点：节省......”并进行比较。这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T19:49:17.257

Chrome 的开发者控制台有你的答案。

> [阻止] [https://www.hyperiontx.com/上的页面运行来自](https://www.hyperiontx.com/)[http://fast.fonts.com/jsapi/b3fca0c6-ff69-4fdb-b66b-8c298c1cd396.js](http://fast.fonts.com/jsapi/b3fca0c6-ff69-4fdb-b66b-8c298c1cd396.js)的不安全内容。

Chrome 正在阻止插入相关字体 CSS 的脚本，因为它加载不安全。

尝试将引用更改为：

```
<script type="text/javascript" src="//fast.fonts.com/jsapi/b3fca0c6-ff69-4fdb-b66b-8c298c1cd396.js"></script> 
```

# vim - 如何禁用 vim 领导密钥的超时？

> ID：14737429
> 
> 赞同：15
> 
> 时间：2013-02-06T19:44:09.793
> 
> 标签：vim

当我按下`d`vim 时，我的状态栏说`d`并无限等待进一步的指示。

当我按下我的领导者（`,`为我）时，它会等待输入一段时间然后超时。

如何禁用此功能，并让它无限期地等待进一步的说明？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-30T15:37:40.977

来自`:help ttimeout`：

```
'timeout', 'to', 'notimeout', 'noto'
boolean (default on)
global

'ttimeout', 'nottimeout'                                               
boolean (default off)
global
{not in Vi} 
```

这两个选项共同决定了在接收到部分映射键序列或键盘代码时的行为：

| 暂停 | 超时 | 行动 |
| --- | --- | --- |
| 离开 | 离开 | 不要超时 |
| 上 | 开或关 | 超时：映射和关键代码 |
| 离开 | 上 | 关键代码超时 |

如果这两个选项都关闭，Vim 将等待直到接收到完整的映射或键序列，或者很明显没有接收到的字符的映射或键序列。例如：如果你已经映射了 "vl" 并且 Vim 已经收到了 'v'，需要下一个字符来查看 'v' 后面是否跟着一个 'l'。当其中一个选项打开时，Vim 将等待大约 1 秒以等待下一个字符到达。之后，已经接收到的字符被解释为单个字符。可以使用“timeoutlen”选项更改等待时间。

在慢速终端或非常繁忙的系统上超时可能会导致光标键出现故障。如果两个选项都关闭，如果有以 . 开头的键码，Vim 会在输入后永远等待。您将不得不输入两次。如果您对键码没有问题，但希望 :mapped 键序列不会在 1 秒内超时，请设置 'ttimeout' 选项并重置 'timeout' 选项。

注意：当设置 'compatible' 时，'ttimeout' 会被重置。

从评论：

> 基本上，ESC 是箭头和其他控制序列的“领导者”，因此您可能必须按 ESC 两次而不是一次。——@安东·科瓦连科
> 
> 运行`set notimeout`并`set ttimeout`解决了我的问题。– @nightcracker

# css - 列出 div 外的项目背景图像

> ID：14737432
> 
> 赞同：0
> 
> 时间：2013-02-06T19:44:15.907
> 
> 标签：css, list

我在 div 中有一个无序列表。list-item-images 浮动在 div 之外，我该怎么办？[http://www.brainmove.be/wordpress/recente-cases/](http://www.brainmove.be/wordpress/recente-cases/)上的示例

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:04:36.377

```
li {
    list-style-position: inside;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:05:13.147

首先设置边距：0；填充：0；在 ul 上；然后设置列表样式位置：内部；您可能想要浮动 ul ，这样它也不会跨越图像。

# html - 使用 HttpWebRequest 获取网页的标题

> ID：14737435
> 
> 赞同：0
> 
> 时间：2013-02-06T19:44:35.907
> 
> 标签：html, vb.net, httpwebrequest, title

我正在尝试在使用`HttpWebRequest`VB.Net 的网站上获取标题标签中的文本。

是否可以使用`HttpWebRequest`和/或检索文本`HttpWebResponse`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:46:25.263

这些`HttpWebRequest`类是关于发送 HTTP 请求的。
他们对 HTML 一无所知。

相反，您需要使用 HTML 解析器，例如 HTML Agility Pack。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:48:49.527

看看 webclient.DownloadString。这应该将您的网页作为字符串检索，您可以在其中找到标题标签。

# sed - awk 或 sed 创建新文件？

> ID：14737437
> 
> 赞同：3
> 
> 时间：2013-02-06T19:44:44.240
> 
> 标签：sed, awk

我有一个以竖线分隔的文本文件，其中包含大约 900 行数据。每行包含一组数字，最后有一个用户名。例如

```
2792|5750|125|4.0|0.25|||6|2|user1
2802|6000|126|4.0|0.25|||2|3|user2
2801|6000|125|4.0|0.25|||4|4|user2
2805|5500|125|4.5|0.25|||3|2|user1
2805|6250|122|4.5|0.25|||4|7|user3
2811|4750|125|3.0|0.25|||4|2|user1
2828|5750|121|4.0|0.25|||6|2|user2 
```

我想做的是创建三个新文件：每个用户一个，只包含他们的数据。（例如，user1 的文件将只包含原始文件的第一行、第四行和第六行）。我应该使用 awk 还是 sed 来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T19:47:02.717

单程：

```
awk -F "|" '{ print > $NF }' file 
```

这是结果`grep . user*`：

```
user1:2792|5750|125|4.0|0.25|||6|2|user1
user1:2805|5500|125|4.5|0.25|||3|2|user1
user1:2811|4750|125|3.0|0.25|||4|2|user1
user2:2802|6000|126|4.0|0.25|||2|3|user2
user2:2801|6000|125|4.0|0.25|||4|4|user2
user2:2828|5750|121|4.0|0.25|||6|2|user2
user3:2805|6250|122|4.5|0.25|||4|7|user3 
```

此外，有些人喜欢添加文件扩展名。这可以像这样完成：

```
awk -F "|" '{ print > $NF ".txt" }' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:47:35.270

为什么不`grep`呢？

```
grep user1 bigfile > file_for_user1
grep user2 bigfile > file_for_user2
grep user3 bigfile > file_for_user3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:49:18.553

```
for THEUSER in `cat file | awk -F'|' '{print $10}' | sort | uniq`; do grep $THEUSER file > $THEUSER; done 
```

# internet-explorer - 更改 Internet Explorer .url 文件的 URL 文件

> ID：14737438
> 
> 赞同：0
> 
> 时间：2013-02-06T19:44:45.327
> 
> 标签：internet-explorer, url, bookmarklet, favorites

我正在尝试将 IE 生成的 .url 文件更改为收藏文件。我在 C# 中有以下代码：

```
string[] lines = File.ReadAllLines(filename);
lines[1] = "URL=javascript:{alert('this is a test');void(0);}";
File.WriteAllLines(filename, lines); 
```

在记事本中打开的 .url 文件如下所示（代码是一个会不断变化的小书签）：

```
[InternetShortcut]
URL=javascript:{alert('this is a test');void(0);} 
```

问题是 IE 在关闭并重新打开之前看不到更改。我该如何做，重新加载新的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:52:10.227

现在唯一的解决方案是打开另一个 IE 实例。

# libgit2sharp - 'git pull' 的 LibGit2Sharp 等价物是什么？

> ID：14737441
> 
> 赞同：8
> 
> 时间：2013-02-06T19:44:50.590
> 
> 标签：libgit2sharp

我正在尝试将远程分支中的更改合并到本地存储库中，但是我无法让它正常工作——可能是对实现的误解。获取似乎工作正常，因为我可以在服务器上看到更新，但我认为我在*尝试*拉取时会破坏某些东西。

我试过了：

```
repo.Checkout( branch.TrackedBranch, CheckoutOptions.None, OnCheckoutProgress ); 
```

这似乎符合您对 Clone 调用的期望。我也找不到合并的方法。正如我所读到的，`git pull`就像调用 fetch，然后是合并。

我查看了 repo 中的一些测试，例如 MergeFixture，但它似乎并不是我希望的那样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-22T21:39:59.657

**2014 年 4 月更新**

`Pull`LibGit2Sharp 中添加了一个方便的方法。

```
repo.Network.Pull(signature, pullOptions); 
```

[您可以在测试夹具](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp.Tests/NetworkFixture.cs#L136)中找到更多基本用法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T09:50:33.990

`Pull`确实是`Fetch`和的组合`Merge`。

*   `Fetch`准备好了
*   `Merge`正在进行中（如@EdwardThomson 所述）

> 我查看了 repo 中的一些测试，例如 MergeFixture，但它似乎并不是我希望的那样。

由于尚未提供*完整的合并过程，因此还没有很多测试。*但是，`MergeFixture.cs`包括合并的*某些*方面

*   检测冲突/未合并条目
*   检索正在合并的分支

`CommitFixture.cs`中还有其他相关位

*   在 Commit 上清理潜在的合并元数据
*   发出合并提交时自动包含父母

Libgit2 还包括一些**[较低级别的位](https://github.com/libgit2/libgit2/blob/development/include/git2/index.h#L480-564)**来处理用户已解决的冲突。

## 更新

**合并**功能现在在 LibGit2Sharp 中可用（请参阅**[拉取请求 #608](https://github.com/libgit2/libgit2sharp/pull/608)**）

# javascript - 将特定类别的新闻提要嵌入我的网站？

> ID：14737450
> 
> 赞同：0
> 
> 时间：2013-02-06T19:45:25.633
> 
> 标签：javascript, html, rss, feed

嗨，是否有网站或方法可以将特定类别的新闻提要嵌入到我的网站上。

我正在寻找有关同性恋政治、同性恋文化等方面的新闻。

我在网上找不到任何可以用来在我的网站上获取新闻提要的东西。

请有人能指出我正确的方向吗？

我基本上试图找到嵌入pinknews.co.uk 和其他提供同性恋特定新闻的网站的方法，但我没有得到我需要的帮助。我真的很感激任何人都可以提供的任何帮助。

我考虑使用的一件事是从其他网站提取提要的 javascript 代码，但没有可用于同性恋特定的提要，我可以通过以某种方式输入 pinknews.co.uk 并在我的网站上嵌入新闻内容来创建一个提要吗？

```
<script type="text/javascript">
js_style = 1;
target = "_blank";
if (newsfeed){
    showNews(newsfeed, js_style);
} else {
    document.write("News feeds did not import correctly. Please contact the 24-7 pressrelease administrators");
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:11:31.107

谷歌搜索“RSS”。您可能希望将 RSS/Atom 提要放在您的网站上，因为这是新闻提要的正常工作方式。

# asp.net - 添加 order by 以从 webconfig 中选择命令

> ID：14737454
> 
> 赞同：1
> 
> 时间：2013-02-06T19:45:43.340
> 
> 标签：asp.net, sql, sqldatasource

您好，我有一个 sql 数据源（如下），并且 select 命令在 webconfig 中，它是一个简单的 select...from... 。我多次使用此选择命令，但 ORDER BY 发生了变化。反正有没有写类似`"<%$ AppSettings:SelectCustomer %>"`&的东西`ORDER BY CUST_NAME`。我尝试了几种移动 & 和 " 的方法，但没有运气。有什么建议吗？

```
 <asp:SqlDataSource ID="dataSourceCBCust" runat="server" 
        ConnectionString = "<%$ ConnectionStrings:Customer %>"
        ProviderName = "<%$ ConnectionStrings:Customer.ProviderName %>"
        SelectCommand = "<%$ AppSettings:SelectCustomer %>" >
        </asp:SqlDataSource> 
```

# css - iFrame 100% 高度减去标题

> ID：14737456
> 
> 赞同：5
> 
> 时间：2013-02-06T19:46:03.610
> 
> 标签：css, html, iframe

我有一个高度为 100% 的 iframe 以及一个位于上方的 div（高度为 70px）。iframe 溢出页面，但我希望能够将 100% 高度减去 70px，以便 iframe 的滚动条适合页面。

![在此处输入图像描述](../Images/eb984c2dc023679d966f27792e8ba6ef.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T19:51:41.523

好的，所以我想通了。我刚刚在 iframe 周围添加了一个父 div。

```
<div class="parent">
    <iframe src="http://reddit.com"> </iframe>
</div> 
```

```
.parent{
    margin-top: 70px;
    position: absolute; 
    top: 0px; 
    left: 0px;
    right: 0px; 
    bottom: 0px;
}

iframe{
    position:absolute; 
    width: 100%;
    height: 100%;
    border: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:49:44.000

不要在 iframe 上设置高度，而是使用绝对定位，使其顶部距页面边缘 70px，而其他边距页面边缘 0px。

# c# - 数据库中已经有一个名为“Accounts”的对象（ASP.NET MVC）

> ID：14737460
> 
> 赞同：1
> 
> 时间：2013-02-06T19:46:21.707
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我看过这个标题的其他问题，但他们都说要删除表格。我不想删除它，它有重要数据。

相反，我不能让 MVC 首先停止尝试重新创建它吗？我只想读取它的数据并输出它。我只是想像这样输出它：

```
return View(db.Accounts.ToList()); 
```

这是我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace MvcApplication1.Models
{
    public class Account
    {
        public int ID { get; set; }
    }

    public class MyDbContext : DbContext
    {
        public DbSet<Account> Accounts { get; set; }
    }
} 
```

如何阻止 MVC 尝试重新创建我的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:54:21.430

正在发生的事情是 MVC 正在检查数据库，并发现您在数据库中没有帐户对象，只有一列，在您的情况下为 ID。所以 MVC 正在尝试为您创建该对象。为了使用现有的表结构，您需要做的是使您的对象与数据库中已有的相匹配。

您还可以创建一个临时数据库并仅使用一个属性（列）创建您的对象。这使您可以查看连接字符串是否正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:56:46.940

尝试通过覆盖`OnModelCreating()`上下文类中的方法将您的帐户类映射到现有表

```
public class MyDbContext : DbContext
{
    public DbSet<Account> Accounts { get; set; }

    protected override void OnModelCreating( DbModelBuilder modelBuilder )
    {
        modelBuilder.Entity<Account>( ).ToTable( "dbo.Accounts" );
        //and perhaps the columns as well
        modelBuilder.Entity<Account>( ).Property( p => p.Id )
                                       .HasColumnName( "Id" );
} 
```

这应该告诉 Entity Framework 使用您现有的表，而不是尝试创建一个新表。不必映射每一列。

确保传递给`ToTable()`and`HasColumnName()`方法的字符串与数据库中的字符串完全匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T15:57:59.723

在 Global.asax 中将以下行放入 Application_Start()

Database.SetInitializer(null);

这将阻止创建我希望有帮助的表格

# jasper-reports - 将 iText 的 2.x 和 5.x 版本一起添加到类路径中

> ID：14737464
> 
> 赞同：1
> 
> 时间：2013-02-06T19:46:38.100
> 
> 标签：jasper-reports, itext

我想在类路径中添加 2 个版本的 iText（2.x 和 5.x）。据我所见，它们有不同的软件包，所以我认为它应该可以正常工作。

此设置是否存在任何已知问题？

我想做这个主要是因为我们有使用 iText 5.x 的现有类，但我现在想使用 JasperReports（除了现有的东西），它需要 iText 2.x 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T21:31:36.903

iText 版本可以共存，但某些依赖项可能会导致问题，即 BouncyCastle 1.46 及更早版本（用于 iText 2.x）和 1.47 甚至 1.48（用于 iText 主干）。因此，安全提供商相关的功能可能会受到阻碍。

如果这对您来说是个问题，只需使用依赖于 SpongyCastle 的 iText 的 Android-GAE 端口，而不是 @BrunoLowagie 所示的 BouncyCastle。SpongyCastle 是 BouncyCastle 的衍生产品，具有不同的包装结构，允许同时使用不同的 BC 口味

# c# - 在第一个表单处于活动状态时保持第二个表单可见

> ID：14737465
> 
> 赞同：0
> 
> 时间：2013-02-06T19:46:38.673
> 
> 标签：c#, winforms, forms, visibility

我有一个包含一些东西（按钮、标签、图片......）的表单。当显示第一个表单时，将加载第二个表单，其中包含一个标签。如果我现在将鼠标移到第一个窗体上的控件上，第二个窗体上的标签将显示有关该控件的信息。或者至少这就是我想要发生的事情。但我只是不知道我怎么能做到，当我点击form1中的东西时，第二个表单仍然会显示并且不会最小化。

有什么办法可以在表格 1 中做事时保持第二个表格可见？

编辑：也许我说错了我的意思，我只想显示第二个表格，而我仍然可以在表格 1 上做事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:49:02.370

查找 TopMost 属性并将其设置为 TRUE

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:26:30.700

[您应该使用带参数的Form.Show](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)方法的重载。表单所有者。当您需要在第一个表单 (Form1=this) 调用的代码中显示第二个表单（例如 Form2 的实例）时

```
Form2 f = new Form2();
f.Show(this); 
```

这样，Form2 实例的属性 Owner 被设置为 Form1 的当前实例。这将使 Form2 的实例保持在 Form1 的实例之上

# c# - 如何识别日期Word FormField？

> ID：14737466
> 
> 赞同：0
> 
> 时间：2013-02-06T19:46:40.867
> 
> 标签：c#, office-interop

我正在开发一个加载 Word 文档并尝试提取所有 FormFields（或书签）的 C# 应用程序。

使用以下代码行...

```
wd.FormFields.get_Item(ref index).Type 
```

我可以毫无问题地识别返回 wdFieldFormCheckBox 的复选框或返回 wdFieldFormDropDown 的下拉列表。当涉及到日期字段时，我只需得到 wdFieldFormTextInput。这使得它与也返回 wdFieldFormTextInput 的常规文本输入字段无法区分。我需要能够判断输入字段是日期和时间字段还是日期字段或仅仅是时间字段。是否可以识别日期字段？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:28:55.490

你问：

> 是否可以识别日期字段？

……是的，是的。如果您查看枚举的文档（这是您在示例中使用的属性的类型[）](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdfieldtype%28v=office.14%29.aspx)，您会看到它可以具有类似的值-所以是的，它绝对应该可以识别这样的字段。`WdFieldType`[`FormField.Type`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.formfield.type%28v=office.14%29.aspx)`wdFieldTime``wdFieldDate`

# android - 如何在不使用活动的情况下处理基于结果的 AsyncTask？

> ID：14737472
> 
> 赞同：0
> 
> 时间：2013-02-06T19:47:08.563
> 
> 标签：android, android-asynctask

基本上，我执行和 AsyncTask 从我的服务器获取一些详细信息。如果服务器回复用户未登录，我想执行另一个 AsyncTask 尝试登录，然后再次调用我的初始 AsyncTask。

我有一个任务 X。根据 X 的结果（我将在 X 的 onPostExecute() 中得到），我必须决定是否调用任务 Y。

现在，如果 Y 的结果是肯定的，我想再次调用 X。

现在我正在为每个 AsyncTask 使用活动，以便我可以使用 startActivityForResult 和 onActivityResult 函数处理逻辑。无论如何我可以只使用 AsyncTasks 做同样的事情吗？就像从另一个调用一个 AsyncTask 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:22:23.290

我认为你应该有两个不同的异步任务：

*   1 计算 X 的值；
*   另一个覆盖 X 的否定结果；

所描述的行为可以通过[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的流方法（onPreExecute、doInBackground、onProgressUpdate 和 onPostExecute）轻松实现。此外，您可以使用参数/返回机制在两者之间传递值。

我看到如下异步任务之一：

 **```
private class MyAsyncTask extends AsyncTask<Void, boolean, boolean> {
    @Override
    protected boolean doInBackground() {
        boolean result = [COMPUTE_X];
        return result;
    }
    @Override
    protected boolean onProgressUpdate(boolean result) {
         return result;
    }
    @Override
    protected void onPostExecute(boolean result) {
         if (!result) {
             new ComputeY_AsyncTask().execute();
         } else {
             // just go ahead
         }
    }
} 
```*  *另一个就是这样，但必须在后台计算 Y 并在 Y 计算后调用**MyAsyncTask的另一个实例。**[最后，所有进程都将通过递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)方式退出。如[[wtsang02]](https://stackoverflow.com/users/1336972/wtsang02)所述，请注意不要将 UI 更新放在 doInBackground 中（仅在 onProgressUpdate 或 onPostExecute 中进行更新），因为它甚至会生成**CalledFromWrongThread**异常！**

# c++ - Vector的CStrings的Vectors初始化和使用

> ID：14737474
> 
> 赞同：2
> 
> 时间：2013-02-06T19:47:18.047
> 
> 标签：c++, arrays, c-strings, libharu

我正在尝试创建 CStrings 向量的向量；CStrings 的二维数组。这将表示表格中的数据。（当然，所有数据都是 CString）。

这是我尝试初始化向量的方法>

```
std::vector<std::vector<CString>> tableData;
    for(int r = 0; r < oTA.rows; r++)
        for(int c = 0; c < oTA.cols; c++)
            tableData[r][c] = "Test"; 
```

这是我尝试使用它的方式

```
for(int r = 0; r < tabAtt.rows; r++)
    {
        // TextYpos = bottom of table + 5(padding) + (row height * row we're on)
        HPDF_REAL textYpos = tabAtt.tabY + 5 + (r*tabAtt.rowH);
        for(int c = 0; c < tabAtt.cols; c++)
        {
            // TextXpos = left of table + 5(padding) + (col width * col we're on)
            HPDF_REAL textXpos = tabAtt.tabX + 5 + c*tabAtt.colW;
            HPDF_Page_TextOut (page, textXpos, textYpos, (CT2A)tableData[r][c]); // HERE!
        }
    } 
```

但我认为我没有正确初始化它。我不断得到一个向量超出范围的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:52:56.067

这是因为您需要在访问矢量元素之前分配内存并构造它们。这应该有效：

```
std::vector<std::vector<CString>> tableData;
for(int r = 0; r < oTA.rows; r++)
{
    tableData.push_back(std::vector<CString>());
    for(int c = 0; c < oTA.cols; c++)
       tableData.back().push_back("Test");
} 
```

或者，稍微更有效：

```
std::vector<std::vector<CString>> tableData(oTA.rows,std::vector<CString>(oTA.cols));
for(int r = 0; r < oTA.rows; r++)
    for(int c = 0; c < oTA.cols; c++)
       tableData[r][c]="Test"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:54:47.760

如果您尚未将任何内容推入向量或使用大小和填充（[请参阅](http://www.cplusplus.com/reference/vector/vector/vector/)[的构造函数](http://www.cplusplus.com/reference/vector/vector/vector/)`std::vector`）对其进行初始化，则无法通过索引访问初始化条目。因此，当为空和或为时，这将导致问题。`[]`[`vector`](http://www.cplusplus.com/reference/vector/vector/vector/)`tableData``oTA.rows``oTA.cols``0`

```
for(int r = 0; r < oTA.rows; r++)
    for(int c = 0; c < oTA.cols; c++)
        tableData[r][c] = "Test"; 
```

您应该使用`vector::push_back()`添加数据：

```
for(int r = 0; r < oTA.rows; r++) {
    tableData.push_back(std::vector<CString>());
    for(int c = 0; c < oTA.cols; c++) {
        tableData.back().push_back("Test");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:57:41.200

如果不先添加项目，您将无法简单地访问 std::vector。要么使用 std::vector::push_back() 要么使用构造函数[Cplusplus.com](http://cplusplus.com/reference/vector/vector/vector///)

# ruby-on-rails - Rails 链接 url 路径

> ID：14737475
> 
> 赞同：0
> 
> 时间：2013-02-06T19:47:23.610
> 
> 标签：ruby-on-rails, ruby, url

我没有生成完整的用户模型，也不知道如何链接到用户配置文件。我努力了：

```
<%= link_to u.username, user_show_path(u) %> 
```

但是它只显示一个错误，如果有任何区别我也在使用设计 gem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:53:03.517

有很多方法可以使用 link_to

```
 link_to u.username, user_path(u)
  link_to u.username, u
  link_to u.username, :controller => "users", :action => "show", :id => u 
```

一切都应该工作，问题可能是您正在使用 user_show_path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:00:50.897

排序，使用链接

```
link_to u.username, :controller => "users", :action => "show", :id => u 
```

然后写了一个简单的路线，

```
match "/user/:id" => "users#show" 
```

# vba - 将包含值的行从一张表克隆到另一张表

> ID：14737476
> 
> 赞同：0
> 
> 时间：2013-02-06T19:47:28.287
> 
> 标签：vba, excel, clone

我有一个包含多个标题的“sheet1”，我正在查看是否有一个我可以运行的公式来扫描，只过滤行，而 G 列的状态为“打开”。

见例子：[http ://s18.postimage.org/897u71lnt/excel2.png](http://s18.postimage.org/897u71lnt/excel2.png)

我希望自动将所有“打开”项目复制到“sheet2”上。每次使用新问题更新 sheet1 并在 G 列上具有 Open 时，sheet 2 将获得此值。

没有VBA可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:01:19.983

正如@PeterL 指出的那样，这不是“两行代码”。但是，有一个解决方案...我在[此链接](http://www.floris.us/SO/download/XLexample.xlsm)上发布了带有宏的完整 Excel 工作簿。它不仅解决了您在这个问题中提出的问题，而且解决了您在之前的评论中提出的一些问题，并且具有您甚至不知道要询问的附加功能（例如“如果以前的'开放'问题现在变成'关闭”，它需要从“开放”问题列表中删除）。

# grails - 如何在 grails 域中创建自定义查询

> ID：14737478
> 
> 赞同：0
> 
> 时间：2013-02-06T19:47:44.697
> 
> 标签：grails, grails-orm, grails-domain-class

有没有办法在 grails 域中创建查询，该查询始终返回具有特定条件的记录？

例如：

```
Class Person {

  String firstname
  String lastname
} 
```

现在，我可以在域类中做任何事情，而不是说`Person.findByFirstname("Bart")`整个代码库，这样我就可以简单地说类似`Person``Person.bart`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:57:31.603

Grails/GORM 中的`namedQueries`支持应该可以满足这个需求： http: [//grails.org/doc/latest/ref/Domain%20Classes/namedQueries.html](http://grails.org/doc/latest/ref/Domain%20Classes/namedQueries.html)

```
 static namedQueries = {
       firstNameBart {
           eq 'firstname', 'Bart'
       }
   } 
```

然后这样使用：

```
def barts = Person.firstNameBart.list() 
```

# javascript - 单击链接时使用 jQuery/Javascript 更改下拉选项

> ID：14737479
> 
> 赞同：0
> 
> 时间：2013-02-06T19:47:56.980
> 
> 标签：javascript, jquery, select, drop-down-menu

假设我有以下链接和下拉列表：

```
<a href="#contact">Send a mail to mother!</a>
<a href="#contact">Send a mail to father!</a>
<a href="#contact">Send a mail to sister!</a>
<a href="#contact">Send a mail to brother!</a>

<form id="contact">
    <select id="recipient">
        <option value="mother@mail.com">Mother</option>
        <option value="father@mail.com">Father</option>
        <option value="sister@mail.com">Sister</option>
        <option value="brother@mail.com">Brother</option>
    </select>
</form> 
```

基本上我希望每个链接都更改为相应的选择选项。

给你一个上下文，现在我在页面末尾有一个表格，一开始我有几个电子邮件链接。当有人单击链接时，它会滚动（锚定）到表单。该表单具有此下拉菜单以选择收件人。我希望它不仅可以滚动到表单（已经完成），而且还可以根据单击的链接自动更改选项。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:53:14.897

为这些链接添加一个`data-select`属性：

```
<a href="#contact" data-select="mother@mail.com">Send a mail to mother!</a>
<a href="#contact" data-select="father@mail.com">Send a mail to father!</a>
<a href="#contact" data-select="sister@mail.com">Send a mail to sister!</a>
<a href="#contact" data-select="brother@mail.com">Send a mail to brother!</a> 
```

然后使用点击链接的值来设置`select`元素的值：

```
var $select = $('#recipient');
$('a[href="#contact"]').click(function () {
    $select.val( $(this).data('select') );
}); 
```

这是小提琴：http: [//jsfiddle.net/Dw6Yv/](http://jsfiddle.net/Dw6Yv/)

* * *

如果您不想将这些`data-select`属性添加到标记中，可以使用以下命令：

```
var $select = $('#recipient'),
    $links = $('a[href="#contact"]');

$links.click(function () {
    $select.prop('selectedIndex', $links.index(this) );
}); 
```

这是小提琴：http: [//jsfiddle.net/Bxz24/](http://jsfiddle.net/Bxz24/)

请记住，这将要求您的链接与选项的顺序完全相同`select`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:50:28.417

如果订单始终相同，您可以这样做

```
$("a").click(function(){
    $("#recipient").prop("selectedIndex", $(this).index());
}); 
```

否则，通过在链接上定义索引来做到这一点：

```
<a href="#contact" data-index="0">Send a mail to mother!</a>
<a href="#contact" data-index="1">Send a mail to father!</a>
<a href="#contact" data-index="2">Send a mail to sister!</a>
<a href="#contact" data-index="3">Send a mail to brother!</a>

<form id="contact">
    <select id="recipient">
        <option value="mother@mail.com">Mother</option>
        <option value="father@mail.com">Father</option>
        <option value="sister@mail.com">Sister</option>
        <option value="brother@mail.com">Brother</option>
    </select>
</form>

$("a").click(function(){
    $("#recipient").prop("selectedIndex", $(this).data("index"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:00:53.033

还有[另一种](http://fiddle.jshell.net/FWgan/)使用`label`选项的方法，可以确保在没有 html5 的情况下也可以使用`data`。

# mysql - 从具有重复项的列中获取所有值

> ID：14737484
> 
> 赞同：0
> 
> 时间：2013-02-06T19:48:15.927
> 
> 标签：mysql, sql, group-by, nested-queries

我在预订表（属性：名称、日期、开始、完成）上有一个 SQL 查询，它找到了 days 属性的重复值：

```
SELECT day, COUNT(day) as NumberOfTimes 
FROM reservation group by day HAVING (COUNT(day)>1) 
ORDER BY NumberOfTimes 
```

但它只返回日期，并且当天的次数列在预订表中。我正在尝试返回以列出当天列出的每个名称，但我在查询分组时遇到了问题。我应该如何处理这是我希望返回看起来像：

```
BOB   MONDAY  3
JOHN  MONDAY  3
STEVE MONDAY  3
ALICE WEDNESDAY 2
MARTIN WEDNESDAY 2 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:51:35.437

你不能为名称添加一列吗

```
SELECT
  name,
  day,
  COUNT(day) as NumberOfTimes
FROM reservation
group by name , day
HAVING (COUNT(day) > 1)
ORDER BY NumberOfTimes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:52:14.840

您可以使用子查询，这将允许您添加更多不包括在的列`GROUP BY`：

```
select r1.name,
    r2.day,
    r2.NumberOfTimes
from reservation r1
inner join
(
    SELECT day, COUNT(day) as NumberOfTimes 
    FROM reservation 
    group by day 
    HAVING (COUNT(day)>1) 
) r2
    on r1.day = r2.day
order by NumberOfTimes 
```

如果您只想将名称作为附加列，则可以使用：

```
SELECT name, day, COUNT(day) as NumberOfTimes 
FROM reservation 
group by day, name
HAVING (COUNT(day)>1) 
order by NumberOfTimes 
```

# javascript - 组合动画结束时如何执行动作？

> ID：14737490
> 
> 赞同：2
> 
> 时间：2013-02-06T19:48:48.370
> 
> 标签：javascript, dojo

我是 Dojo 世界的新手，所以这可能是一些愚蠢的事情，让我很难过。

我有以下代码（去掉了不相关的东西）：

```
define(["dojo/_base/declare", "dojo/fx", "dojo/on"],
    function (declare, fx, on) {
        return declare(null, {
            executeTransition: function (continuation) {
                var animation = fx.combine([
                    fx.slideTo({
                        duration: 1200,
                        node: this.node1, // node1 will be a valid node at the moment of execution
                        left: -this.node1.offsetWidth
                    }),
                    fx.slideTo({
                        duration: 1200,
                        node: this.node2, // node2 will be a valid node at the moment of execution
                        left: 0
                    })
                ]);

                on(animation, "End", continuation);

                animation.play();
            }
        });
    }
); 
```

按原样执行我的代码时，该`on`行失败说`Uncaught Error: Target must be an event emitter`. 但是作为一个动画，它应该已经是一个事件发射器了吗？

我试图解决我的问题的一些背景研究：

dojo.fx的[参考指南](http://dojotoolkit.org/reference-guide/1.8/dojo/fx/combine.html#dojo-fx-combine)将其结果`fx.combine`视为任何其他动画。[dojo.fx](http://dojotoolkit.org/api/1.8/dojo/fx)的API 参考仅声明它返回一个实例。

无论如何，[Dojo 1.8 动画教程](http://dojotoolkit.org/documentation/tutorials/1.8/animation/)与我尝试执行的示例完全相同，只是它稍后将 fx.combine 的结果包装在 fx.chain 中（我不需要 - 或者我不需要？）。

所以，我的问题是：**使用 Dojo 1.8，我如何并行运行两个动画并在它们完成后执行一些代码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:07:21.720

看完你的问题，我决定调查一下。我发现*“目标必须是事件发射器”*错误仅在尝试从组合动画中捕获**onEnd事件时发生。**链式动画不会发生这种情况。

经过一番挖掘后，我注意到组合动画似乎有一个 _connects 属性，这表明它使用的是旧的已贬值的[“dojo/_base/connect”](http://dojotoolkit.org/reference-guide/1.7/dojo/connect.html)功能。这可能是 Dojo 中的一个错误（或者更确切地说是最近升级中遗漏的代码）。看了[Dojo Trac](http://bugs.dojotoolkit.org/)但还没有找到任何东西，可能会为此打开一张新票。

我能想到两种解决方法：

1.  使用[“dojo/_base/connect”](http://dojotoolkit.org/reference-guide/1.7/dojo/connect.html)

    ```
    connect.connect(animation, "onEnd", function(){
        // connect == dojo/base/connect
    }) 
    ```

2.  直接连接到 onEnd 事件（或使用["dojo/aspect"](http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html#dojo-aspect)）

    ```
    animation.onEnd(function(){
    }); 
    ```

这两种方式都不是理想的，因为您可能必须在将来的某个日期将代码更改为[dojo/on](http://dojotoolkit.org/reference-guide/1.8/dojo/on.html)版本。

**编辑：**看起来其他人已经将此报告为错误，[请参见此处](http://bugs.dojotoolkit.org/ticket/16305)。

# github - 如何使用存储库文件夹作为 wiki 内容

> ID：14737491
> 
> 赞同：2
> 
> 时间：2013-02-06T19:48:49.133
> 
> 标签：github

我在 github 上有一个公共存储库。其中一个子文件夹包含一个 html 站点。

我可以使用根 html 页面作为存储库 wiki 的根吗？如果是这样，怎么办？

最好，我想将 wiki 指向 html 文件夹，而不必创建文件夹的副本并将其放在某个“特殊”文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:02:45.473

您可以将您的 wiki 存储在 gitHub 存储库中：

```
https://github.com/user/yourProject.wiki.git 
```

它将与[https://github.com/user/yourProject](https://github.com/user/yourProject)

如果你想在`yourProject`repo 中看到它，你可以将它作为一个[submodule](http://git-scm.com/book/en/Git-Tools-Submodules)引用。

但无论如何，您都不会存储 html，如“[让 GitHub 更加开放：Git 支持的 Wikis](https://github.com/blog/699-making-github-more-open-git-backed-wikis) ”中所述。您可以使用 Markdown 语法存储文本页面（[也带有相关链接！](https://github.com/blog/1395-relative-links-in-markup-files)）。

# excel - Excel VB - 使用变量引用工作表索引？

> ID：14737492
> 
> 赞同：1
> 
> 时间：2013-02-06T19:48:54.087
> 
> 标签：excel, vba

我想使用一行代码来引用同一个单元格，但在不同的工作表中（在同一个工作簿中）。例如：

```
Dim SheetRef as Worksheet
SheetRef = Sheet6    
SheetRef.Range("E5").Value = "Please work!" 
```

其中 SheetRef 可以在 VB 中更改以表示不同的工作表索引号（而不是工作表名称）。

我尝试了很多组合，使变量变暗，因为许多不同的东西，谷歌搜索高低并没有取得任何进展，非常感谢任何帮助！

非常感谢，

马丁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:03:30.733

首先，您需要使用 set 来声明您的工作表对象等于工作表。然后，使用索引符号表（i）

```
dim sheetref as worksheet
dim i as long

i = 2 'sheet index number

set sheetref = sheets(i)
sheetref.range("E5").value = "WORKS!" 
```

# actionscript - SkinnablePopUpContainer 错误

> ID：14737497
> 
> 赞同：0
> 
> 时间：2013-02-06T19:49:01.443
> 
> 标签：actionscript, air, popup

我以前使用过这种方法并且一直有效，但今天我似乎在显示 SkinnablePopUpContainer 时遇到了一个主要问题：

我在 MXML 文件中有一个 SkinnablePopUpContainer。（移动应用程序，fb 4.6，air 3.4）

我以这种方式创建和显示弹出窗口：

```
public var su:setupdialog;

private function Showdialog():void{
                su = null;
                su = new setupdialog();
                su.addEventListener(CloseEvent.CLOSE,SetupClose);
                su.open(this,true);
                PopUpManager.centerPopUp(su);

        } 
```

我还尝试了以下方法：

```
private function Showdialog():void{
                su = null;
                su = new setupdialog();
                su.addEventListener(CloseEvent.CLOSE,SetupClose);
                PopUpManager.addPopUp(su, this, true);
                su.open(this,true);
                PopUpManager.centerPopUp(su);

        } 
```

问题似乎出在“this”全局变量上。我不断收到：

“ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。”

我很茫然，因为我以前做过这件事，而且一切都奏效了。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:33:31.890

是的，你是对的`this`，应该是 DisplayObjectContainer，就像 Group、VGroup 类这样的任何容器一样。

第二个功能将不起作用 SkinnablePopUpContainer.open() 在内部添加您的弹出窗口，因此它可能不需要。

这个对我有用。

```
private function Showdialog():void
{
    su = null;
    su = new setupdialog();
    su.addEventListener(CloseEvent.CLOSE,SetupClose);
    su.open(this,true);
    PopUpManager.centerPopUp(su);
} 
```

# python - 使用collections.Iterable在python中展平不规则列表时，列表不会作为最终对象返回

> ID：14737499
> 
> 赞同：1
> 
> 时间：2013-02-06T19:49:07.357
> 
> 标签：python, list

我遵循了使用以下代码在 python 中展平不规则列表列表的最佳解决方案（[展平（不规则）列表列表）：](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

```
def flatten(l):
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flatten(el):
                yield sub
        else:
            yield el

L = [[[1, 2, 3], [4, 5]], 6]

L=flatten(L)
print L 
```

并得到以下输出：

“生成器对象在 0x100494460 处展平”

我不确定我需要导入哪些包或需要更改语法才能让它为我工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:50:21.930

您可以直接迭代生成器对象：

```
for x in L:
    print x 
```

或者如果你真的需要一份清单，你可以从中制作一份：

```
list(L) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T19:50:41.097

带有`yield`关键字返回生成器的函数。例如

```
>>> def func():
...     for x in range(3):
...         yield x
... 
>>> a = func()
>>> print a
<generator object func at 0xef198>
>>> next(a)
0
>>> next(a)
1
>>> next(a)
2
>>> next(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> 
>>>
>>> for x in func():
...     print x
... 
0
1
2 
```

换句话说，它们是懒惰地评估，只在迭代中请求它们时给你值。从生成器构造列表的最佳方法是使用`list`内置函数。

```
print list(L) 
```

# python - 让 pip 使用 git 和 github 存储库

> ID：14737500
> 
> 赞同：8
> 
> 时间：2013-02-06T19:49:07.623
> 
> 标签：python, django, git, github, pip

出于开发原因，我正在编写一个依赖于另一个托管在 github 存储库（从不在 pypi 中）的 python 应用程序。

让我们称呼他们：

*   正在编写的应用程序：`AppA`
*   github中的应用程序：`AppB`

在 App A 中，setup.py 如下：

```
# coding=utf-8
import sys
try:
    from setuptools import setup, find_packages
except ImportError:
    import distribute_setup
    distribute_setup.use_setuptools()
    from setuptools import setup, find_packages

setup(
    ...
    install_requires=[
        # other requirements that install correctly
        'app_b==0.1.1'
    ],
    dependency_links=[
        'git+https://github.com/user/app_b.git@0.1.1#egg=app_b-0.1.1'
    ]
) 
```

现在每次推送`AppA`都在构建，`Jenkins CI`但由于引发了下一个错误，所以我失败了：

```
error: Download error for git+https://github.com/user/app_b.git@0.1.1: unknown url type: git+https 
```

有趣的是，这只发生在 Jenkins 中，它在我的电脑上完美运行。我尝试了 github 提供的其他两个 SSH url，甚至都没有考虑下载。

现在，AppA 包含在同样由 Jenkins 构建的项目的需求文件中，因此手动安装依赖`pip install AppA` `pip install AppB`项不是一种选择，依赖项会通过包含在`requirements.txt`.

有没有办法让 pip 和 git 与 github url 一起工作？

任何帮助将不胜感激:)

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T01:11:47.910

问题不在于`pip`，在于`setuptools`。负责`setup()`调用的是`setuptools`包（setuptools 或分发项目）。

既不也不`setuptools`了解`distribute`这种网址，他们了解 tarballs/zip 文件。

尝试指向 Github 的下载 url - 通常是一个 zip 文件。

您的`dependency_links`条目可能如下所示：

```
dependency_links=[
    'https://github.com/user/app_b/archive/0.1.1.zip#egg=app_b-0.1.1'
] 
```

有关更多信息，请查看[http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi](http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:18:32.227

来自[pip 文档](http://www.pip-installer.org/en/latest/logic.html#git)-

```
pip currently supports cloning over git, git+http and git+ssh:

git+git://git.myproject.org/MyProject#egg=MyProject
git+http://git.myproject.org/MyProject#egg=MyProject
git+ssh://git.myproject.org/MyProject#egg=MyProject 
```

尝试替换`git+https`为`git+git`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-09T23:22:09.417

我在 2019 年遇到了同样的问题，但由于不同的原因。pip 不再支持*依赖链接（使用 pip>=20.0.0 测试）。*对于我的情况，我使用*install_requirements*解决了这个问题并定义了一个直接引用（参见 pip manual *direct reference*）。

```
...
install_requirements = [
    <dependencyname> @ git+<url of dependency repository>@<branchname or tag>
] 
```

我在[https://gitlab.rhrk.uni-kl.de/scheliga/thepackage](https://gitlab.rhrk.uni-kl.de/scheliga/thepackage)创建了一个名为*thepackage*的公共示例存储库以获取更多详细信息。

# java - 预览与实际屏幕不同

> ID：14737504
> 
> 赞同：0
> 
> 时间：2013-02-06T19:49:16.833
> 
> 标签：java, netbeans, windows-xp, screen

我有一个代码，它只是创建一个带有一些复选框和组合框的屏幕。奇怪的是，当我运行应用程序时，我的预览看起来与真实屏幕完全不同。真实屏幕显示较小的文本字段和组合框。如何在真实屏幕上获得预览外观？

如下图所示，第一个日期组合框比下面的要小得多。

![屏幕截图](../Images/7376e8db484e2cd9bd3e647dffe0037d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:39:22.253

Looks like it could be a Look and Feel change. I believe by default Netbeans uses Nimbus. When in the GUI Builder, along the top next to the run button you should see a drop-down menu. From there, you can select the default look and feel. You would probably have to change your look and feel for your program, if it already isn't implemented in the code.

# jquery - 如何调整文本以适应容器而不溢出：自动

> ID：14737506
> 
> 赞同：0
> 
> 时间：2013-02-06T19:49:18.293
> 
> 标签：jquery, html, css

如何调整文本以适应容器而不会溢出：自动...经过多次谷歌搜索后，我发现有很多插件可以处理这个问题，但它们会**减小文本大小**......我不想要那个东西..如果文本宽度是大（例如任何网址）。单词的剩余部分应该放在下一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:51:47.097

尝试使用`word-wrap: break-word;`带有 a 的css 规则`overflow: hidden;`来避免滚动条。

还应设置容器的宽度。

# autohotkey - 在 AutoHotKey 中，当我单击两个位置时，如何自动输入两个连续的撇号？

> ID：14737507
> 
> 赞同：0
> 
> 时间：2013-02-06T19:49:20.320
> 
> 标签：autohotkey

我已经下载了 AutoHotKey，并希望使用它来更轻松地将数据插入数据库。

' _ `'` _`'`

到目前为止，我有这个：

```
#!z::
'
Sleep, 1000  ; 1 second
' 
```

但这给了我一个错误`'`（撇号）

任何帮助感谢，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:14:11.063

' 本身什么都不做；使用[Send](http://www.autohotkey.com/docs/commands/Send.htm)将字符发送到活动窗口。

```
#!z::
    Send, {'}
    Sleep, 1000  ; 1 second
    Send, {'}
return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:23:27.210

这是我使用的另一种方法：

当我需要输入一个以`%`符号开头和结尾的变量时，我会执行以下操作：输入`%``%`两次，然后光标会回到两个百分号之间，这样我就可以输入（或粘贴）变量名。

这是代码：

```
:?*:%%::%%{Left} 
```

你可以对`'`:

```
:?*:''::''{Left} 
```

顺便说一句，我对显示本文中的键的代码做同样的事情。

```
:?*:kb\::<kbd></kbd>{left 6} 
```

当我写`k``b``\`的时候，这会先写两个标签，然后直接跳转到你输入键名的地方。

# jquery - jQuery自动完成不显示文本值但填充元素

> ID：14737509
> 
> 赞同：2
> 
> 时间：2013-02-06T19:49:26.563
> 
> 标签：jquery, coldfusion

我有一个运行正常的 jQuery 自动完成，除了它不正确地显示函数中返回的文本值。我的后端是 ColdFusion。

后端功能（在 CFC 中）：

```
<cffunction name="companyNameList" access="remote" output="false" hint="I return a list of companies with IDs" returnformat="JSON">
    <cfargument name="searchterm" required="false" default="" />

    <cfset var returnArray = arrayNew(1) />

    <cfquery name="companyNameList" datasource="#request.dsn#">
        SELECT companyID, companyName
        FROM tbl_companies
        WHERE companyName LIKE <cfqueryparam cfsqltype="cf_sql_varchar" value="%#arguments.searchterm#%" />
    </cfquery>

    <cfloop query="companyNameList">
        <cfset companyStruct = structNew() />
        <cfset companyStruct['value'] = companyID />
        <cfset companyStruct['label'] = companyName />

        <cfset arrayAppend(returnArray,companyStruct) />
    </cfloop>

    <cfreturn returnArray />
</cffunction> 
```

我的 jQuery javascript（它包含在 cfoutput 标签中，需要第二个哈希标记作为转义值）：

```
 $(function() {             
        $("##defaultcompanyname").autocomplete({
            source: function(request, response){
                $.ajax({
                    url: "secure/cfc/ajax.cfc?method=companyNameList",
                    dataType: "json",
                    data: {
                        searchterm: request.term
                    },
                    success: function(data){
                        response(data);
                    }
                })
            },
            minLength: 3,
            select: function(event, ui) {
                $('##defaultcompanyid').val(ui.item.value);
                $('##defaultcompanyname').val(ui.item.label);
            }
        });
    }); 
```

以及相关的表单块：

```
 <p class="ui-widget">
            <label for="defaultcompanyname">Default Company Association</label>
            <cfinput type="text" size="30em;" name="defaultcompanyname" id="defaultcompanyname" value="" />
            <cfinput type="hidden" name="defaultcompanyid" id="defaultcompanyid" value="0" />
        </p> 
```

当我使用 'test' 中的类型作为我的测试值时，这是返回的 JSON：

```
[{"value":2,"label":"Test Company"},{"value":3,"label":"2nd Test Company"}] 
```

该列表正在填充，但它填充了空字符串。如果我选择一个，隐藏的 defaultcompanyid 值会填充一个数字，但 defaultcompanyname 值会清空我的文本。我错过了什么？

编辑：根据部分解决原始问题的响应，使用新信息更新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:56:59.703

最简单的解决方案可能是调整您的 JSON。jQueryUI 期望数据格式为

```
[
    {
        "id": 2,
        "label": "Test Company"
    },
    {
        "id": 3,
        "label": "2nd Test Company"
    }
] 
```

然后改变你的`select()`方法：

```
select: function (event, ui) {
        $('#defaultcompanyid').val(ui.item.id);
        $('#defaultcompanyname').val(ui.item.label);
    } 
```

如果您无法更改 JSON，请尝试操作该`_renderItem()`方法，查看[文档中的示例源代码](http://jqueryui.com/autocomplete/#custom-data)。

编辑：看看这个[小提琴](http://jsfiddle.net/V4zvZ/1/)

# hibernate - StaleObjectStateException：Grails 中的事务错误

> ID：14737512
> 
> 赞同：2
> 
> 时间：2013-02-06T19:49:40.940
> 
> 标签：hibernate, grails, grails-orm

我有一个包含许多可行任务实体的任务列表实体，并且某些任务可以“关闭”任务列表。

```
class TaskList {
    ...
    static hasMany = [
        tasks: Task
    ]
}

class Task {
    ...
    static belongsTo = [taskList: TaskList]
} 
```

现在，当更新任务并且它**可以**“关闭”任务列表时，我会`TaskListService`调用`closeList()`

```
class TaskListService {
    def closeList(TaskList taskList) {
        taskList.status = "CLOSED"
        taskList.save()
    }
}

// TaskController pseudo-update
def update () {
    Task taskInstance = Task.get(params.id)
    //... do something with the taskInstance
    taskListService.closeList(taskInstance.taskList)
} 
```

我的问题是当用户在更新任务列表实体时`TaskListService`更新它。

```
class TaskListController {
    def update () {
        TaskList taskListInstance = TaskList.get(params.id)
        //... do some stuff
        taskListInstance.properties = params
        taskListInstance.save(flush:true)
    }
} 
```

> org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[com.giotta.TaskList#1]

如何避免此版本冲突？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T21:00:52.927

如果您期望并发编辑，则必须使用显式锁定。您正在使用乐观锁定，之所以如此命名，是因为您希望不会有并发编辑时使用它，并且在发生这种情况的极少数情况下您可以处理问题。

使用`lock()`方法而不是`get()`方法，然后进行更新。请注意，锁定仅在事务中有意义，因此将 id 传递给服务而不是整个实例。

```
class TaskListService {
    def closeList(long taskListId) {
        TaskList taskList = TaskList.lock(taskListId)
        taskList.status = "CLOSED"
        taskList.save()
    }
}

// TaskController pseudo-update
def update () {
    Task taskInstance = Task.get(params.id)
    //... do something with the taskInstance
    taskListService.closeList(taskInstance.taskListId)
} 
```

这里我使用`taskListId`动态属性。您可能需要将其更改为`taskInstance.taskList.id`

# api - 使用 google+ API 从 google plus 社区和活动获取数据

> ID：14737513
> 
> 赞同：11
> 
> 时间：2013-02-06T19:49:42.670
> 
> 标签：api, google-plus, oauth2-playground

谷歌通过 api 提供许多数据。Google plus 提供人员、活动、评论的数据。但它不提供社区、活动等新功能的数据。我如何通过 google plus api 访问这些东西？

我需要我联合的社区数据，并且能够通过 api 发布该数据。我还需要在我的页面上显示 google plus 事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:19:45.817

**已编辑：**此答案已过时，不再有效。

对于公共数据 API 中的某些内容，Google+ 社区可以被视为个人资料和信息页。您只需将 profile_id 替换为 community_id 即可，大多数事情都会奏效。然而，社区可能需要公开。您只能使用`activities.list`和`activities.get`方法从社区获取帖子 - 无法获取有关社区本身的信息（相当于`people.get`）。

事件也可以使用 API 获得，或多或少类似于评论。当然，存在一些差异，并且它并不总是以相同的方式出现在搜索结果中。您可能还想查看 Google Calendar API 并改为通过该接口访问事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T20:07:15.880

API 不支持获取任何类型的 Google+ 社区帖子，即使它们是公开的。在过去，这很有效，但它从未得到支持，并且已经停止工作。

囚犯的答案现在已经过时了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-22T18:43:46.133

有一个访问社区活动的功能请求，虽然它目前不被公共 api 支持，这里是链接：[https ://code.google.com/p/google-plus-platform/issues/detail?id=639](https://code.google.com/p/google-plus-platform/issues/detail?id=639)

# typescript - 有没有办法忽略打字稿中的类型不兼容？

> ID：14737518
> 
> 赞同：16
> 
> 时间：2013-02-06T19:50:08.190
> 
> 标签：typescript

我一直在研究将 typescript 与 mongoose 一起用于 MongoDB。大多数情况下，它一直运行良好，但是对于某些类型的问题，我会从 typescript 编译器收到警告。

如果我这样做或喜欢这样：

```
{"$or": [{done: {"$exists": false}}, {done:false}]} 
```

我收到以下警告：

`Incompatible types in array literal expression: Types of property 'done' of types '{ done: { $exists: bool; }; }' and '{ done: bool; }' are incompatible.`

我明白为什么，但是有没有办法表达这一点，以便编译器接受它？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-06T19:57:09.500

您可以对任何元素进行类型断言`any`以“关闭”类型检查：

```
[<any>{done: {"$exists": false}}, {done:false}] 
```

或者，如果你正在初始化一个变量，你可以这样做：

```
var n: any[] = [{done: {"$exists": false}}, {done:false}] 
```

# android - 如何在 ActionBarSherlock 中实现多选和上下文 ActionMode？

> ID：14737519
> 
> 赞同：27
> 
> 时间：2013-02-06T19:50:08.617
> 
> 标签：android, android-actionbar, actionbarsherlock, contextual-action-bar

我应该如何使用 ActionBarSherlock 在 AdapterView 上实现多选，因为它不提供 MultiChoiceModeListener？

这就是它的样子

![上下文动作模式](../Images/129d6ca6a0d563a5b6af0b758af8eee2.png)

你怎么能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-06T19:50:08.617

所以这就是我所做的。

**编辑：一年多过去了，因为我发现以前的答案有很多无用的代码（呜呜），CAB 的事情可以用更少的努力和更清晰的代码来实现，所以我花了一些时间更新了它**

LibraryFragment ListView 应使用选择模式“无”定义

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:choiceMode="none"/> 
```

列表项应该有一个 ?attr/activatedBackgroundIndicator 前景，以便在 list.setItemChecked(pos, true) 上自动绘制突出显示的半透明覆盖

**list_item_library.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:foreground="?attr/activatedBackgroundIndicator"
    android:paddingBottom="5dp"
    android:paddingTop="5dp" >

.... 
```

**ListFragment**

```
import android.support.v4.app.DialogFragment;
import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.view.ActionMode;
import com.actionbarsherlock.view.Menu;

public final class LibraryFragment
        extends SherlockListFragment
{

    private MyListAdapter adapter;
    private ListView list;

    // if ActoinMode is null - assume we are in normal mode
    private ActionMode actionMode;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        View v = inflater.inflate(R.layout.fragment_library, null);
        this.list = (ListView) v.findViewById(android.R.id.list);
        this.initListView();
        return v;
    }

    @Override
    public void onPause()
    {
        super.onPause();
        if (this.actionMode != null) {
            this.actionMode.finish();
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        updateData();
    }

    // update ListView
    protected void updateData()
    {
        if (adapter == null) {
            return;
        }
        adapter.clear();
        // my kinda stuff :)
        File[] items = scan();
        if (items != null) {
            adapter.updateData(items);
            if (actionMode != null) {
                actionMode.invalidate();
            }
        }
        // if empty - finish action mode.
        if (actionMode != null && (files == null || files.length == 0)) {
            actionMode.finish();
        }
    }

    private void initListView()
    {
        this.adapter = new MyAdapter(getActivity());
        this.list.setAdapter(adapter);
        this.list.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener()
        {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0,
                    View arg1, int arg2, long arg3)
            {
                if (actionMode != null) {
                    // if already in action mode - do nothing
                    return false;
                }
                // set checked selected item and enter multi selection mode
                list.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE);
                list.setItemChecked(arg2, true);

                getSherlockActivity().startActionMode(
                        new ActionModeCallback());
                return true;
            }
        });
        this.list.setOnItemClickListener(new AdapterView.OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3)
            {
                if (actionMode != null) {
                    // the items are auomatically "checked" becaise we've set AbsListView.CHOICE_MODE_MULTIPLE before
                    // starting action mode, so the only thing we have to care about is invalidating the actionmode
                    actionMode.invalidate(); //invalidate title and menus.
                } else {
                    // do whatever you should on item click
                }
            }
        });
    }

    // all our ActionMode stuff here :)
    private final class ActionModeCallback
            implements ActionMode.Callback
    {

        // " selected" string resource to update ActionBar text
        private String selected = getActivity().getString(
                R.string.library_selected);

        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu)
        {
            actionMode = mode;
            return true;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu)
        {
            // remove previous items
            menu.clear();
            final int checked = list.getCheckedItemCount();
            // update title with number of checked items
            mode.setTitle(checked + this.selected);
            switch (checked) {
            case 0:
                // if nothing checked - exit action mode
                mode.finish();
                return true;
            case 1:
                // all items - rename + delete
                getSherlockActivity().getSupportMenuInflater().inflate(
                        R.menu.library_context, menu);
                return true;
            default:
                getSherlockActivity().getSupportMenuInflater().inflate(
                        R.menu.library_context, menu);
                // remove rename option - because we have more than one selected
                menu.removeItem(R.id.library_context_rename);
                return true;
            }
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode,
                com.actionbarsherlock.view.MenuItem item)
        {
            SparseBooleanArray checked;
            switch (item.getItemId()) {
            case R.id.library_context_rename:
                // the rename action is present only when only one item is selected. 
                // so when the first checked item found, show the dialog and break
                checked = list.getCheckedItemPositions();
                for (int i = 0; i < checked.size(); i++) {
                    final int index = checked.keyAt(i);
                    if (checked.get(index)) {
                        final DialogFragment d = RenameDialog.instantiate(adapter.getItem(index).getFile(), LibraryFragment.this);
                        d.show(getActivity().getSupportFragmentManager(), "dialog");
                        break;
                    }
                }
                return true;

            case R.id.library_context_delete:
                // delete every checked item
                checked = list.getCheckedItemPositions();
                for (int i = 0; i < checked.size(); i++) {
                    final int index = checked.keyAt(i);
                    if (checked.get(index)) {
                        adapter.getItem(index).getFile().delete();
                    }
                }
                updateData();
                return true;
            default:
                return false;
            }
        }

        @Override
        public void onDestroyActionMode(ActionMode mode)
        {
            list.clearChoices();

            //workaround for some items not being unchecked.
            //see http://stackoverflow.com/a/10542628/1366471
            for (int i = 0; i < list.getChildCount(); i++) {
                (list.getChildAt(i).getBackground()).setState(new int[] { 0 });
            }

            list.setChoiceMode(AbsListView.CHOICE_MODE_NONE);
            actionMode = null;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T21:59:27.733

您的解决方案是该线程的最佳和最简单的解决方案。但是 getView() 中有一个小问题 - 请参阅我上面的评论。

```
int version = android.os.Build.VERSION.SDK_INT;     
if(version < 11){
    if (checkedItems.contains(Integer.valueOf(position))) {
        convertView.getBackground().setState(
                new int[] { android.R.attr.state_checked });
    } else {
        convertView.getBackground().setState(
                new int[] { -android.R.attr.state_checked });
    }
}else{

    if (checkedItems.contains(Integer.valueOf(position))) {
        convertView.setActivated(true);
    } else {
        convertView.setActivated(false);        
    }
} 
```

这将为您提供从 API8 到 API18 的全面支持

# python - 如何删除所有 Flask 会话？

> ID：14737531
> 
> 赞同：13
> 
> 时间：2013-02-06T19:50:47.200
> 
> 标签：python, session, flask

如何删除我的 Flask/python 应用程序设置的所有会话和 cookie。这样当用户返回时，他们必须重新登录。每次我将新版本的代码推送到生产环境时，我都想这样做。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T19:56:12.033

我发现的最好方法是像这样使密钥无效

```
app.secret_key = os.urandom(32) 
```

密钥足够安全，每次启动系统时，密钥都会更改，使所有会话无效。

# php - 上传文件时“权限被拒绝”

> ID：14737532
> 
> 赞同：1
> 
> 时间：2013-02-06T19:50:50.333
> 
> 标签：php, file-upload

我正在尝试实现一个简单的文件上传脚本。这是代码：

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = strtolower(end(explode(".", $_FILES["fotocarnet"]["name"])));
if ((($_FILES["fotocarnet"]["type"] == "image/gif")
|| ($_FILES["fotocarnet"]["type"] == "image/jpeg")
|| ($_FILES["fotocarnet"]["type"] == "image/png")
|| ($_FILES["fotocarnet"]["type"] == "image/pjpeg"))
&& ($_FILES["fotocarnet"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["fotocarnet"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["fotocarnet"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["fotocarnet"]["name"] . "<br>";
    echo "Type: " . $_FILES["fotocarnet"]["type"] . "<br>";
    echo "Size: " . ($_FILES["fotocarnet"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["fotocarnet"]["tmp_name"] . "<br>";

    if (file_exists("nada/" . $_FILES["fotocarnet"]["name"]))
      {
      echo $_FILES["fotocarnet"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["fotocarnet"]["tmp_name"],
      'nada/' . $_FILES["fotocarnet"]["name"]);
      echo "Stored in: " . "nada/" . $_FILES["fotocarnet"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file: ".$extension;
  }
?> 
```

这是输出

```
Upload: MARTÍNEZGARCÍAGIANCKO.JPG
Type: image/jpeg
Size: 3.6513671875 kB
Temp file: C:\Windows\Temp\phpE21C.tmp

Warning: : failed to open stream: Permission denied in C:\inetpub\wwwroot\Italia\IngSubirFotoCarnetIns_Italia.php on line 29

Warning: move_uploaded_file(): in C:\inetpub\wwwroot\Italia\IngSubirFotoCarnetIns_Italia.php on line 29
Stored in: nada/MARTÍNEZGARCÍAGIANCKO.JPG 
```

在 php.ini 我有这个：

```
upload_tmp_dir=C:\inetpub\wwwroot\upload 
```

问题：我已经将权限设置为`C:\Windows\Temp\`、 to`C:\inetpub\wwwroot\upload`和 to `C:\inetpub\wwwroot\Italia\nada`。不仅如此，我已经尝试过使用`ini_set()`. 最糟糕的是，我什至将 PHP 升级到 5.4，但它仍然无法正常工作（并且在每种情况下，我都会在完全相同的上传文件夹中遇到完全相同的错误，在 中`Windows\Temp`）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:45:30.973

答案很简单：我必须改为设置完全权限`USERS`。

# wpf - 在 WPF4 中替换 DropShadowBitmapEffect

> ID：14737537
> 
> 赞同：2
> 
> 时间：2013-02-06T19:51:12.750
> 
> 标签：wpf, wpf-4.0

我找不到一个规范的答案。我有很多效果，例如

```
<Label Content="SomeLabel">
  <Label.BitmapEffect>
    <DropShadowBitmapEffect/>
  </Label.BitmapEffect>
</Label> 
```

`BitMapEffect`在 WPF4 中已弃用，只是停止工作。标签上的简单投影最简单的迁移路径是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:10:35.067

它只是`Effect`现在

```
<Label Content="StackOverflow" >
    <Label.Effect>
        <DropShadowEffect />
    </Label.Effect>
</Label> 
```

# opencv - 德劳内三角 OpenCV

> ID：14737538
> 
> 赞同：2
> 
> 时间：2013-02-06T19:51:13.753
> 
> 标签：opencv, indexing, triangulation, delaunay

我想知道是否可以`CvSubdiv2D*`使用 OpenCV 检索细分中相邻顶点的索引。

```
CvSubdiv2DPoint* pt = cvSubdiv2DEdgeOrg( CvSubdiv2DEdge edge );
index= pt->id; 
```

因此，如果我有一个坐标列表，我可以发现例如列表中的点 15 通过边连接到列表中的点 300、210、400 和 76。

我知道获取坐标没问题，但我对此不感兴趣。我想确保我不会浪费时间尝试以这种方式检索索引，否则会尝试寻找其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:55:55.257

我设法解决这个问题的方法是修改源文件中的`CvPoint2D32f`结构定义`types_c.h`，以便在将点插入细分后存储点的索引及其坐标。

这是我所做**的分步过程：**

1.  打开`types_c.h`源文件（在我的例子中位于`~/OpenCV-2.4.3/modules/core/include/opencv2/core/types_c.h`）。向结构中添加一个额外的字段，`CvPoint2D32f`用于存储插入到细分中的点的索引。例如：

    ```
    typedef struct CvPoint2D32f
    {
        float x;
        float y;
        int index;
    }
    CvPoint2D32f; 
    ```

2.  再次构建源文件并安装它。

3.  在将点插入细分之前，请确保存储点的索引，如以下代码所示：

    ```
    int i;
    for (i = 0; i < size; i++) {
        fp = cvPoint2D32f(x[i], y[i]);
        fp.index = i;
        cvSubdivDelaunay2DInsert(subdiv, fp);
    } 
    ```

4.  在您的细分内单步执行边缘时，您可以通过引用先前定义的索引字段来访问索引。例如，就我而言，我这样做如下：

    ```
     CvSubdiv2DPoint* ptSub = cvSubdiv2DEdgeOrg(delaunay_edge);
        CvPoint2D32f pt32f = ptSub->pt;
        whatYouWant = pt32f.index; 
    ```

希望能帮助到你。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T15:20:49.767

是的，最好的方法是使用 OpenCV 2。他们已将 id 添加到 CvSubdiv2DPoint。

```
 #define CV_SUBDIV2D_POINT_FIELDS()\
         int            flags;      \
         CvSubdiv2DEdge first;      \
        CvPoint2D32f   pt;         \
         int id; 
```

和

```
typedef struct CvSubdiv2DPoint
{
     CV_SUBDIV2D_POINT_FIELDS()
} 
```

# java - Java - 在 EventListener 中创建线程

> ID：14737541
> 
> 赞同：1
> 
> 时间：2013-02-06T19:51:30.243
> 
> 标签：java, multithreading, jvm, runtime

我得到了这个代码：

```
Thread thread = new Thread(new Runnable() {
                    @Override
                    public void run() {
                        OctopusWSClient.sendPoolSensorReading(poolSensorReading, OctopusClientStart.currentMacAddress);
                    }
                });
                thread.setName("Thread - WS");
                thread.start(); 
```

位于大约每 30 秒执行一次的事件侦听器中（当事件发生时），因此每 30 秒创建一个新线程，通常持续 20 秒才能完成，现在，我的问题是......可以调用 Threads 这个方式？，如果没有，如何？？？...而且，我正在使用以下代码查看线程 ID 和名称：

```
Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
                for(Thread t : threadSet){
                    System.out.println(" Thread #"+t.getId()+" Name: "+t.getName());
                } 
```

它打印当前线程的 ID 和名称，我看到的线程数总是相同，但 ID 总是递增 1（线程 - WS）。

这是一个不好的信号吗？它会在一段时间内填满 JVM 内存吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:54:06.017

您可能会发现通知单个线程恢复，而不是创建多个线程更好。如果需要 20 秒才能完成，最后将其锁定并使其等待，直到它从事件侦听器获得重新启动循环的命令。

# javascript - 使用 Kendo 在拖动时保留 IFRAME 内容

> ID：14737544
> 
> 赞同：0
> 
> 时间：2013-02-06T19:51:36.063
> 
> 标签：javascript, jquery, kendo-ui

以下是我来自[另一个问题](https://stackoverflow.com/questions/14698419/preserve-iframe-content-on-drag)的旧消息：

> 在我当前的项目中，我正在一些 TEXTAREA 上实现 jHtmlArea WYSIWYG 插件，这些 TEXTAREA 位于可拖动和可排序的行中。唯一的问题是，一旦您开始拖动它们，它们就会丢失 IFRAME 中的所有数据，该插件在关联的 TEXTAREA 上屏蔽了这些数据。jQuery 的 .clone 功能正在被使用，但它本身并不会携带所有数据，甚至将其设置为 .clone(true) 或 .clone(true, true) 也不会保留拖动时的数据... .

这个问题完全没有答案。现在我正在尝试使用[Kendo RadEditor](http://www.telerik.com/help/aspnet-ajax/editor-getting-started.html)达到预期的效果（根据项目中其他人的建议，使用 Kendo 可能会使其工作）但它似乎并没有好多少。我无法将此示例放入小提琴、垃圾箱或钢笔中：

[http://www.cmzmedia.com/kendo/examples/web/editor/all-tools.html](http://www.cmzmedia.com/kendo/examples/web/editor/all-tools.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:11:47.760

我尝试在一个简单的[jsbin 演示](http://jsbin.com/abaveh/1/edit)中重现此内容，但无济于事。拖放似乎工作而不会丢失内容。我使用的代码是这样的：

```
 <textarea class="editor" style="width: 400px">Editable Content</textarea>

  <textarea class="editor" style="width: 400px">Editable Content</textarea>

  <textarea class="editor" style="width: 400px">Editable Content</textarea>

  <textarea class="editor" style="width: 400px">Editable Content</textarea>

  <script>
     $(".editor").kendoEditor().closest(".k-widget").draggable();
  </script> 
```

# xaml - 我在 Visual Studio 2012 中没有 XAML 智能感知

> ID：14737546
> 
> 赞同：4
> 
> 时间：2013-02-06T19:51:39.553
> 
> 标签：xaml, visual-studio-2012, intellisense

最近由于某种原因，我在 Visual Studio 2012 的 XAML 代码中没有智能感知。这是错误还是功能。还有其他人有这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T12:38:24.343

我有同样的问题，xaml 没有智能感知，安装“Visual Studio 2012 更新 2”为我修复了它： [Visual Studio 2012 更新 2](http://support.microsoft.com/kb/2797912)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-15T23:58:32.550

我有同样的问题。当我访问 msdn 网站时，我能够下载并安装 Visual Studio 2012 的“更新 4”，它直接解决了问题。

顺便说一句，在安装之前，我有这个版本的 Visual Studio 2012：

VS 2012 11.0.50727.1 RTMREL

这个页面给了我一个提示，我的 VS2012 版本可能是我的问题的原因。 [https://bugzilla.xamarin.com/show_bug.cgi?id=7239](https://bugzilla.xamarin.com/show_bug.cgi?id=7239)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:36:45.767

我想我想通了。我正在使用 Magellan 框架，它试图在演示命名空间 URI 下注册控件。他们这样做是为了让您必须在控件上使用 XML 前缀。这会导致 Visual Studio 2012 XAML 编辑器出现问题。

```
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "Magellan")]
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "Magellan.Abstractions")]
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "Magellan.Controls")]
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation", "Magellan.Views")] 
```

我从`Properties\AssemblyInfo.cs`Magellan 的文件中删除了它，它似乎有效。如果问题没有重新出现，我会检查这个答案。

# javascript - Three.js中线框正方形的无限平面

> ID：14737549
> 
> 赞同：5
> 
> 时间：2013-02-06T19:51:55.163
> 
> 标签：javascript, three.js

我想知道一种有效的方法来实例化一个无限大（或实际上无限大）的纵横交错的线平面，这些线排列成正方形。

three.js 有一个 line 对象，我应该只实例化大量这些对象吗？或者也许实例化一个平面对象，并应用某种重复材料？也许还有其他更有效的方法？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T21:19:38.647

这是另一种方法：

```
var grid = new THREE.GridHelper( 200, 10 );
grid.setColors( 0xffffff, 0xffffff );
scene.add( grid ); 
```

您可以添加雾以使网格融入地平线处的背景。

```
scene.fog = new THREE.FogExp2( 0x000000, 0.0128 );
renderer.setClearColor( scene.fog.color, 1 ); 
```

它应该看起来很不错。

三.js r.71

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T20:21:31.550

此代码将给出一个纵横交错的半无限平面：

```
var geometry = new THREE.Geometry();
geometry.vertices.push(new THREE.Vector3( - 500, 0, 0 ) );
geometry.vertices.push(new THREE.Vector3( 500, 0, 0 ) );

linesMaterial = new THREE.LineBasicMaterial( { color: 0x787878, opacity: .2, linewidth: .1 } );

for ( var i = 0; i <= 20; i ++ ) {

    var line = new THREE.Line( geometry, linesMaterial );
    line.position.z = ( i * 50 ) - 500;
    scene.add( line );

    var line = new THREE.Line( geometry, linesMaterial );
    line.position.x = ( i * 50 ) - 500;
    line.rotation.y = 90 * Math.PI / 180;
    scene.add( line );
} 
```

# java - zipfile 路径中的字符无效 (Windows)

> ID：14737551
> 
> 赞同：0
> 
> 时间：2013-02-06T19:51:57.533
> 
> 标签：java, file, zip, unzip

我必须解压缩一个包含 Windows 操作系统无效路径的文件：

9f96bc3dE8d94fc2B1fd2ff9ed8d2637\html\portlet\facilit\planooperativo\themes\plano-operativo-theme\css\data:image

数据：图像，在 Windows 中，不允许在路径中使用 : 目录，然后我的解压缩代码出现此异常 java.io.IOException：文件名、目录名或卷标语法不正确

如何修复它，将 : 更改为另一个字符（例如下划线）或跳过此目录。

我在下面尝试了这段代码，但它不起作用：

```
while (ze != null) {
    String fileName = ze.getName();
    File newFile = new File(outputFolder + File.separator + fileName);

    String nameFile = newFile.getAbsolutePath();
    if (nameFile.contains(":")){
        nameFile.replaceAll(":", "_");
        newFile = new File(nameFile);
    } 
```

实际上我的路径需要包含：因为完整的路径需要以 C:\ 开头，请给我一个解决方案（详细信息：它在 Mac 中运行良好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:23:39.463

```
 while (ze != null) {
                String fileName = ze.getName();

                if (fileName.contains(":")){
                    fileName = fileName.replaceAll(":", "_");

                } 
```

# java - 给定请求的弹簧缓存

> ID：14737553
> 
> 赞同：10
> 
> 时间：2013-02-06T19:51:58.630
> 
> 标签：java, spring, caching, spring-mvc

我正在使用 Spring MVC 编写一个 Web 应用程序。我有一个看起来像这样的界面：

```
public interface SubscriptionService
{
    public String getSubscriptionIDForUSer(String userID);
} 
```

实际上，`getSubscriptionIDForUser`网络调用另一个服务以获取用户的订阅详细信息。我的业务逻辑在其逻辑中的多个位置调用此方法。因此，对于给定的 HTTP 请求，我可能会多次调用此方法。所以，我想缓存这个结果，这样就不会为同一个请求进行重复的网络调用。我查看了[Spring 文档](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)，但找不到有关如何为同一请求缓存此结果的参考。不用说缓存应该被认为是无效的，如果它是对相同的新请求`userID`。

我的要求如下：

1.  对于一个 HTTP 请求，如果多次调用`getSubscriptionIDForUser`，实际方法应该只执行一次。对于所有其他调用，应返回缓存的结果。

2.  对于不同的 HTTP 请求，我们应该进行新的调用并忽略缓存命中，即使方法参数完全相同。

3.  业务逻辑可能会从不同的线程并行执行其逻辑。因此对于同一个 HTTP 请求，有可能 Thread-1 当前正在进行`getSubscriptionIDForUser`方法调用，并且在方法返回之前，Thread-2 也尝试使用相同的参数调用相同的方法。如果是这样，那么应该让 Thread-2 等待从 Thread-1 发出的调用返回，而不是进行另一个调用。一旦从 Thread-1 调用的方法返回，Thread-2 应该得到相同的返回值。

任何指针？

更新：我的 webapp 将部署到 VIP 后面的多个主机上。我最重要的要求是请求级缓存。由于每个请求都将由单个主机提供服务，因此我只需要在该主机中缓存服务调用的结果。具有相同用户 ID 的新请求不得从缓存中获取值。我浏览了文档，但找不到关于它是如何完成的参考资料。可能是我看错地方了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-01-14T14:26:32.383

我想提出另一种解决方案，它比@Dmitry 提出的解决方案要小一些。`CacheManager`我们可以`ConcurrentMapCacheManager`在“spring-context”工件中使用 Spring 提供的，而不是实现自己的。因此，代码将如下所示（配置）：

```
//add this code to any configuration class
@Bean
@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)
public CacheManager cacheManager() {
    return new ConcurrentMapCacheManager();
} 
```

并可用于：

```
@Cacheable(cacheManager = "cacheManager", cacheNames = "default")
public SomeCachedObject getCachedObject() {
    return new SomeCachedObject();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-05T20:17:20.577

我最终得到了赫尔曼在评论中建议的解决方案：

具有简单 HashMap 的缓存管理器类：

```
public class RequestScopedCacheManager implements CacheManager {

    private final Map<String, Cache> cache = new HashMap<>();

    public RequestScopedCacheManager() {
        System.out.println("Create");
    }

    @Override
    public Cache getCache(String name) {
        return cache.computeIfAbsent(name, this::createCache);
    }

    @SuppressWarnings("WeakerAccess")
    protected Cache createCache(String name) {
        return new ConcurrentMapCache(name);
    }

    @Override
    public Collection<String> getCacheNames() {
        return cache.keySet();
    }

    public void clearCaches() {
        cache.clear();
    }

} 
```

然后将其设为 RequestScoped：

```
@Bean
@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)
public CacheManager requestScopedCacheManager() {
    return new RequestScopedCacheManager();
} 
```

用法：

```
@Cacheable(cacheManager = "requestScopedCacheManager", cacheNames = "default")
public YourCachedObject getCachedObject(Integer id) {
    //Your code
    return yourCachedObject;
} 
```

**更新：**

一段时间后，我发现我之前的解决方案与 Spring-actuator 不兼容。CacheMetricsRegistrarConfiguration 试图在请求范围之外初始化请求范围的缓存，这会导致异常。

这是我的替代实现：

```
public class RequestScopedCacheManager implements CacheManager {

public RequestScopedCacheManager() {
}

@Override
public Cache getCache(String name) {
    Map<String, Cache> cacheMap = getCacheMap();
    return cacheMap.computeIfAbsent(name, this::createCache);
}

protected Map<String, Cache> getCacheMap() {
    RequestAttributes requestAttributes = RequestContextHolder.getRequestAttributes();
    if (requestAttributes == null) {
        return new HashMap<>();
    }
    @SuppressWarnings("unchecked")
    Map<String, Cache> cacheMap = (Map<String, Cache>) requestAttributes.getAttribute(getCacheMapAttributeName(), RequestAttributes.SCOPE_REQUEST);
    if (cacheMap == null) {
        cacheMap = new HashMap<>();
        requestAttributes.setAttribute(getCacheMapAttributeName(), cacheMap, RequestAttributes.SCOPE_REQUEST);
    }
    return cacheMap;
}

protected String getCacheMapAttributeName() {
    return this.getClass().getName();
}

@SuppressWarnings("WeakerAccess")
protected Cache createCache(String name) {
    return new ConcurrentMapCache(name);
}

@Override
public Collection<String> getCacheNames() {
    Map<String, Cache> cacheMap = getCacheMap();
    return cacheMap.keySet();
}

public void clearCaches() {
    for (Cache cache : getCacheMap().values()) {
        cache.clear();
    }
    getCacheMap().clear();
} 
```

}

然后注册一个 not(!) 请求范围的 bean。缓存实现将在内部获取请求范围。

```
@Bean
public CacheManager requestScopedCacheManager() {
    return new RequestScopedCacheManager();
} 
```

用法：

```
 @Cacheable(cacheManager = "requestScopedCacheManager", cacheNames = "default")
public YourCachedObject getCachedObject(Integer id) {
    //Your code
    return yourCachedObject;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:29:48.107

[EHCache](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://ehcache.org/&ei=O8sSUf6NCMXN0AGR-4CoAw&usg=AFQjCNG3eekIkqCShwGjcMl-cbjiR45wdg&sig2=JFt2XFN7HEqx63V9K-M6-g&bvm=bv.41934586,d.dmQ)立即出现在脑海中，或者您甚至可以推出自己的解决方案来将结果缓存在服务层中。这里可能有十亿个缓存选项。选择取决于几个因素，例如您是否需要将值超时，或者您是否要手动清理缓存。您是否需要分布式缓存，例如在您有一个分布在多个应用服务器之间的无状态 REST 应用程序的情况下。您需要能够在崩溃或重新启动时幸存下来的强大功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-03T16:53:44.890

您可以使用 Spring Cache 注释并创建自己的 CacheManager 缓存在请求范围内。或者你可以使用我写的那个：[https ://github.com/rinoto/spring-request-cache](https://github.com/rinoto/spring-request-cache)

# php - MySQLi 更新无法正常工作

> ID：14737555
> 
> 赞同：0
> 
> 时间：2013-02-06T19:52:04.127
> 
> 标签：php, phpmyadmin, mysqli, sql-update

我正在尝试使用 MySQLi 用 PHP 更新我的一行，如果我在更新后不到 1 秒刷新 PHPMyAdmin，它就成功了，但是如果我只在更新后 2 秒以上检查数据，它就不会更新。

举个例子：

```
'UPDATE orders SET MachineID = '.$id.' WHERE OrderID = '.$OrderID.
                   'AND ProductID = '.$ProductID 
```

除非我快速刷新，否则不起作用，但是......

```
'UPDATE orders SET MachineID = 2 WHERE OrderID = 4 AND ProductID = 12' 
```

无论我刷新多久都可以使用。*（这些是我通常用来测试的数据。）*

所以我虽然这将是我的变量，但我在其他查询中的这部分代码之前使用它们几乎 10 次并且它工作得很好。

*   我试图 trim() 变量，但没有帮助。
*   我也尝试使用 mysqli_real_escape_string() 没有成功。
*   mysqli_error() 没有给我任何东西。
*   mysqli_affected_rows() 给了我“1”，这就是它的假设。
*   奇怪的是，如果我执行'SELECT MachineID FROM orders WHERE OrderID = 4 AND ProductID = 12'，即使phpMyAdmin没有更新数据，它也会给我更新的答案。

在此之后没有其他代码，因此没有任何东西可以“逆转”更新。

正常的“测试”输出如下所示：

**编辑：**这是浏览器输出的内容。

```
ID: "2" //$id
OrderID: "4" //$OrderID
ProductID: "12" //$ProductID
UPDATE orders SET MachineID = 2 WHERE OrderID = 4 AND ProductID = 12 //Query
boolean true //Result var_dump
1 //Number of rows affected
2 //Machine ID 
```

注意：引号不是变量的一部分。

**编辑：**这是 PHP 代码

```
$query = 'UPDATE orders SET MachineID = '.$id.' WHERE OrderID = '.$OrderID.' AND ProductID = '.$ProductID;          
echo 'ID: "'.$id.'"<br/>
     OrderID: "'.$OrderID.'"<br/>
     ProductID: "'.$ProductID.'"<br/>'.$query.'<br/>';

$res = $db->query($query);
var_dump($res);

echo mysqli_affected_rows ($db).'<br/>';   
$result = $db->query('SELECT MachineID FROM orders WHERE OrderID = 4 AND ProductID = 12');      
$result = $result->fetch_array();
echo $result[0]; 
```

我真的不明白为什么它会在文件中工作并在快速刷新后工作，但如果检索数据需要很长时间则不会。如果它没有获取，它就像它会在一定时间后重置。

我已经为此工作了将近 2 天，现在我不知道为什么它不起作用。这是一些非常简单的 SQL 查询。

**编辑：**我查看了 MySQL 二进制日志，似乎每次都将其更新回 1。发生这种情况的唯一方法是文件是否运行两次，但如果它运行两次，为什么输出只会出现一次？

**编辑：**好的，所以问题似乎来自谷歌浏览器。我已经在 IE 上测试过了，它可以工作。由于某种原因，Chrome 会运行该文件两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:47:36.447

好的，所以我能够找到问题并解决它。

**问题：** 问题是 Chrome 中著名的“favicon”错误，即使该图标不存在，它也会尝试获取该图标，因此该文件被调用了两次。

**修复：** 由于此文件是通过 Ajax 调用调用的，因此不会触发该错误，因为 Chrome 不会尝试查找“favicon”。我基本上通过测试它应该如何运行来修复错误，而不仅仅是测试文件本身。

# c++ - C ++：实例化包含指向char数组的指针的对象数组

> ID：14737563
> 
> 赞同：1
> 
> 时间：2013-02-06T19:52:32.067
> 
> 标签：c++, char, heap-memory

```
class A
{
    char *name;
public:
    A();
    A(char*);
    ~A();
};

A::A()
{

}
A::A(char* s)
{
    int k=strlen(s);
    name=new char[k+1];
    strcpy_s(name,k+1,s);
}
A::~A()
{
    if(name!=NULL)
        delete[] name;
}

int _tmain(int argc, _TCHAR* argv[])
{
    A *v=new A[20];
    delete[] v;
    system("pause");
    return 0;
} 
```

我在运行时收到以下错误：**test212.exe 中 0x5B987508 (msvcr110d.dll) 的未处理异常：0xC0000005：访问冲突读取位置 0xCDCDCDC1。** 这显然是一个内存问题，但你能告诉我这个代码示例中发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T19:54:18.083

`new A[20]`调用默认构造函数，并且您不在`name`默认构造函数中进行初始化。你不能假设它会`NULL`为你设置。在没有初始化的情况下，`delete[] name`具有未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:54:26.323

`A *v=new A[20];` constructs new `A` objects via the default constructor `A::A()`. Your custom constructor `A::A(char* s)` never gets called and therefore, `name` is never allocated any memory. When the destructor is called, you are trying to `delete[]` memory that just isn't there. That results in the exception you see.

# python - pandas 性能问题 - 需要帮助优化

> ID：14737566
> 
> 赞同：4
> 
> 时间：2013-02-06T19:52:50.757
> 
> 标签：python, pandas

我编写了一些大量使用 pandas 库的 python 代码。代码似乎有点慢，所以我通过 cProfile 运行它以查看瓶颈在哪里。根据 cProfile 结果，瓶颈之一是对 pandas.lib_scalar_compare 的调用：

```
1604  262.301    0.164  262.301    0.164 {pandas.lib.scalar_compare} 
```

我的问题是 - 在什么情况下会调用它？当我选择 DataFrame 的一部分时，我假设它。这是我的代码的样子：

```
if (var=='9999'):
    dataTable=resultTable.ix[(resultTable['col1'] == var1)  
                                             & (resultTable['col2']==var2)].copy() 
else:
    dataTable=resultTable.ix[(resultTable['col1'] == var1)  
                                           & (resultTable['col2']==var2)
                                           & (resultTable['col3']==int(val3))].copy() 
```

我有以下问题：

1.  那是最终调用导致瓶颈的代码的代码片段吗？
2.  如果是这样，有没有优化这个？我目前使用的 pandas 版本是**pandas-0.8**。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-03T22:09:11.203

我的代码在 pandas.lib.scalar_compare 中花费了大量时间，通过将基于字符串的列的数据类型转换为“类别”，我能够将速度提高 10 倍。

例如：

```
 $ df['ResourceName'] = df['ResourceName'].astype('category') 
```

有关更多信息，请参阅[https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html](https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:48:31.620

您可以使用列 col1-col3 设置索引。这是一个玩具示例：

```
In [1]: df = DataFrame(np.arange(20).reshape(5,4))

In [2]: df
Out[2]:
    0   1   2   3
0   0   1   2   3
1   4   5   6   7
2   8   9  10  11
3  12  13  14  15
4  16  17  18  19

In [3]: df2 = df.set_index(keys=[0,1,2])

In [4]: df2
Out[4]:
           3
0  1  2
0  1  2    3
4  5  6    7
8  9  10  11
12 13 14  15
16 17 18  19 
```

**多索引元组：**

```
In [5]: %timeit df2.ix[(4,5,6)]
10000 loops, best of 3: 99.5 us per loop 
```

**原始数据框：**

```
In [6]: %timeit df.ix[(df[0]==4) & (df[1]==5) & (df[2]==6)][3]
1000 loops, best of 3: 515 us per loop 
```

**更新：**解决重复索引

```
In [1]: df = DataFrame(np.arange(20).reshape(5,4))

In [2]: df = concat([df, df])

In [3]: df
Out[3]:
    0   1   2   3
0   0   1   2   3
1   4   5   6   7
2   8   9  10  11
3  12  13  14  15
4  16  17  18  19
0   0   1   2   3
1   4   5   6   7
2   8   9  10  11
3  12  13  14  15
4  16  17  18  19 
```

这失败了：

```
In [4]: df2 = df.set_index(keys=[0,1,2])

In [5]: df2.ix[(0,1,2)]

KeyError: u'no item named 1' 
```

这有效：

```
In [6]: df2 = df.set_index(keys=[0,1,2]).sort()

In [7]: df2.ix[(0,1,2)]
Out[7]:
       3
0 1 2
0 1 2  3
    2  3 
```

# methods - 如何从其他方法中停止一个方法

> ID：14737569
> 
> 赞同：-5
> 
> 时间：2013-02-06T19:52:57.707
> 
> 标签：methods

是否可以调用另一种方法来检查某些内容，例如布尔值，然后从中停止（返回或放弃）？我的意思是：

方法一：代码调用方法二：？代码

方法 2： if(wathever){ 使方法 1 返回 } else{ 继续 }

编辑：是的java对不起，谢谢你的回答！也是的，我知道如何以这种方式使用布尔值，这并没有解决我的问题，不想检查返回的布尔值，我想直接让方法 1 返回，我想这是不可能的，但无论如何谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:10:18.557

哦，为了兑现我对 LOLcode 的承诺，这里有一个小函数，它根据其唯一的布尔参数返回或执行其他操作：

```
HOW DUZ I BREAK_OUTTA_FUNCTION YR FLAG
    IZ FLAG WIN, O RLY?
        YA RLY                                    BTW if flag is `WIN` (true)
           GTFO                                   BTW return
        NO WAY
            BTW do something else if `flag' is LOSE (false)
    OIC
IF U SAY SO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:56:25.497

所以你基本上想要一种方法来强制调用方法退出？

从方法返回一个 out 参数或布尔值，以向调用方法指示它需要退出。

```
public void Method1()
{
    if(!method2())
      return;

    // do stuff
}

public bool Method2()
{
    if(check) {
       return false;
    }

    // do other stuff
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:56:35.777

您可以使用布尔返回值/基于方法二的返回值的布尔条件。但是你不能真正转发一个return语句。我的示例是语言不分青红皂白，因为您没有提供语言。

```
def methodOne(): 
    if (!methodTwo()):
        return
    else:
        <code>

def methodTwo():
    if (whatever):
        return false
    else:
        <code> 
```

# c# - 如何在 C# 的另一个应用程序中将多个字符串传递给命令行参数？

> ID：14737573
> 
> 赞同：1
> 
> 时间：2013-02-06T19:53:25.170
> 
> 标签：c#, .net, visual-studio-2010

用户完成我的 GUI 后，我必须触发另一个应用程序。为了触发另一个应用程序，我必须传递一些命令行参数来启动该应用程序。假设我必须通过以下参数：

*c:\Program File\application.exe -name text -cmdfile c:\text\open.txt*

application.exe 是我想传递给另一个应用程序的参数。

之前，该应用程序在**Visual Studio** -> **Properties** -> **Debug**中将这些参数设置为“ *c:\Program File\application.exe” -name text -cmdfile c:\text\open.txt*

据我了解，上面字符串中的每个空格都被视为一个参数，除了双引号内的那个，所以*“c:\Program File\application.exe”*是第一个参数，*-name*是第二个，*text*是第三个。但是，如果我使用**ProcessStartInfo.Argument**属性，如果我设置*"c:\Program File\application.exe" -name text -cmdfile c:\text\open.txt*，它首先给出一个错误，然后我在字符串末尾添加双引号，另一个应用程序将*c:\Program*作为第一个参数，将*File\application.exe*作为第二个参数。

如何避免空格作为参数的分隔符？如何使用**ProcessStartInfo.Argument在 Visual** **Studio** -> **Properties** -> **Debug** as " *c:\Program File\application.exe" -name text -cmdfile c:\text\open.txt 中将*整个字符串作为相同格式设置传递财产？

 **> ProcessStartInfo startInfo = new ProcessStartInfo(); startInfo.Arguments = "c:\Program File\application.exe" -name text -cmdfile c:\text\open.txt

（错误）

如果

> startInfo.Arguments = "c:\Program File\application.exe -name text -cmdfile c:\text\open.txt"

它以*c:\Program*作为第一个参数，*File\application.exe*作为第二个参数。

我怎么能弄清楚这个？有这方面的经验吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:04:13.120

你的问题有点不清楚。你想开始`application.exe`，还是将它作为参数传递？

如果您正在启动它，您可以使用：

```
var startInfo = new ProcessStartInfo(@"c:\Program File\application.exe");
startInfo.Arguments = @"-name text -cmdfile c:\text\open.txt";
Process.Start(startInfo); 
```

如果您正在尝试启动另一个进程并希望`application.exe`与其他参数一起作为参数传递，您可以尝试：

```
var startInfo = new ProcessStartInfo("application2.exe");
startInfo.Arguments = @"""c:\Program File\application.exe"" -name text -cmdfile c:\text\open.txt";
Process.Start(startInfo); 
```**

# java - 用于将 InDesign 文件转换为图像（jpg、png 等）的 Java 库

> ID：14737574
> 
> 赞同：1
> 
> 时间：2013-02-06T19:53:25.763
> 
> 标签：java, adobe-indesign

我有一个适用于 InDesign 文件的 Java webapp，我需要我的应用程序能够显示文件的预览并将其发送到打印机。是否有一些库可以获取 InDesign 文件并将其转换为图像文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:55:44.457

不知道你有没有运气，但我们使用[imagemagick 来做](http://www.imagemagick.org/script/index.php)这种事情。它不是 java 库，但我们通过命令行在 java 中访问它，它运行得非常好。

# java - Java中的连接向量

> ID：14737578
> 
> 赞同：4
> 
> 时间：2013-02-06T19:53:43.853
> 
> 标签：java, vector, merge

有没有简单快捷的方法将 2 个 java 向量合并为 1 个？

例如，如果我有：

```
 Vector<Object> Va = (Vector<Object>)Return_Vector_with_Objs();
  Vector<Object> Vb = (Vector<Object>)Return_Vector_with_Objs();

  Vector<Object> Vmerge_a_b = function_that_takes_a_b_merges(Va,Vb); 
```

是否有类似 function_that_takes_a_b_merges 的函数或合并这两个向量的简单方法？

我不想用循环和 add() 等来做。我问是否有更快的方法。

编辑：我还希望排除重复的对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:00:07.870

当然！

```
static Vector<Object> function_that_takes_a_b_merges(Vector<Object> Va, Vector<Object> Vb) {
  Vector<Object> merge = new Vector<Object>();
  merge.addAll(Va);
  merge.addAll(Vb);
  return merge;
} 
```

从一个新的向量开始很重要，否则`Va`如果你调用`Va.addAll()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:56:14.467

你可以这样做：

```
Set<String> set = new HashSet<>(va);
set.addAll(vb);
Vector<String> merged = new Vector<>(set); 
```

**注意：**`Vector`现在已经很老`Collection`了，它具有同步方法的开销，这会带来性能成本。`ArrayList`可以代替使用，并且还具有接口合同中的`addAll`方法。`List`如果您*确实*需要同步`Collection`，您可以使用[Collections.synchronizedList](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)来同步您的原始文件`List`。

# c# - C# MVC 与 ASP.NET MVC 的区别？

> ID：14737579
> 
> 赞同：3
> 
> 时间：2013-02-06T19:53:43.827
> 
> 标签：c#, asp.net-mvc, model-view-controller, architecture, asp.net-mvc-4

我是一名中级 C# 开发人员，自学了 C# MVC 的基础知识，但没有自学 ASP.NET MVC。我已经知道经典的 ASP 和 ASP.NET，尽管我已经很多年没有使用它们了，至少 5 年了，因为我的工作主要是做 C# 桌面开发。问题是，我现在想将我们所有现有的 C# 应用程序迁移到网络上。

因此，我将开始寻找新的开发人员，但我的问题是，因为我并不真正了解 ASP.NET MVC，所以只寻找 C# MVC 开发人员是否明智，因为我计划拥有所有我们的内部 C# 应用程序迁移到了网络？我知道 ASP.NET 和 C#.NET 可以一起使用，但我想尝试保持一切统一。此人可能必须了解一些 C# 才能迁移我们的内部应用程序，所以我应该继续只寻找 C# MVC 开发人员还是您认为 ASP.NET 开发人员没有问题？我想那里有很多 ASP.NET MVC 开发人员，但了解 C# 的人并不多……另外，如果他们在迁移到 MVC 时了解不太难的 C# 编写的应用程序，这将有所帮助。

有人可以解释 ASP.NET MVC 和 C# MVC 之间的优缺点或差异，或者我应该会遇到哪些问题？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T20:00:13.587

好吧，没有 C# MVC。

**MVC**（模型、视图、控制器）是一种架构师模式。

**ASP.NET MVC**是微软 ASP.NET 这种模式的实现，你可以使用 C#、VB.Net 等语言在这个平台上进行编程。

您还可以在 Windows 窗体应用程序中使用 MVC 原则（示例）构建您的应用程序，而无需像 ASP.NET MVC 这样的任何默认实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:56:35.343

一般来说，我会尝试测试通用编程和解决问题的能力。如果开发人员不能快速掌握新的库或语言，我可能不想承诺雇用他们。

# php - SQL 导入缺失的表

> ID：14737585
> 
> 赞同：1
> 
> 时间：2013-02-06T19:54:21.060
> 
> 标签：php, sql, magento, phpmyadmin

我正在通过 phpMyAdmin 进行一次安装从 Magento 数据库导出，并且我尝试将其导出到 .sql 和 tar.gz 中。

当我在另一个安装中导入该数据库时，我没有收到任何错误，但缺少表，所以我只有一半的表，我看到在字母 L（log_visitors 表）之后没有表。

很奇怪，谁能告诉我这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:07:34.683

在我的 phpMyAdmin 版本中，导入页面上有一个带有以下文本的复选框：

*如果脚本检测到它接近 PHP 超时限制，则允许中断导入。（这可能是导入大文件的好方法，但它可能会破坏事务。）*

确保未选中该复选框（默认情况下已选中），否则可能会导致您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T12:05:06.353

因此，我们在导出时打开了 phpMyAdmin 上的“包含在事务中”和“禁用外键”检查字段，并在两个 .sql 文件中单独导出。有效。

请注意，问题不是标准 php 超时或标准 phpMyadmin 对上传大文件的限制，因为我们之前也尝试过 bigdumb 和 ssh 命令进行导入，但没有成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:34:25.230

正如@Willem 所说，您可以在导入 sql 文件时选中该选项。

但是，如果取消选中该选项后仍然无法导入，则表示您正在导入的文件太大。在这种情况下，您可以使用`mysql`命令行实用程序，如果您可以通过 SSH 访问您的服务器，或者您可以尝试**[使用 bigdump](http://www.ozerov.de/bigdump/)**，这是一个 php 脚本，可以让您导入数据库，将 SQL 查询分成块！

希望能帮助到你 ：）

# javascript - 检测浏览器是否支持自动扩展选择下拉菜单？

> ID：14737597
> 
> 赞同：3
> 
> 时间：2013-02-06T19:54:53.693
> 
> 标签：javascript

在 IE 6/7/8`<select>`中，如果给定了定义的宽度，则元素在打开后不会自动展开。通过浏览器嗅探（使用 jQuery 示例`$.browser.msie`和`$.browser.version`），我可以在一定程度上检测到当前浏览器，并为相关浏览器添加自定义处理程序以进行选择。

在 jQuery 1.9 中，该`$.browser`对象已被删除。我仍在生产中使用旧版本，并且能够浏览器嗅探并相应地显示自动扩展的选择菜单；但是，如果我们要跟上 jQuery 的最新版本，这不是一个长期的解决方案。

我查看了 select via 的属性，`for(var i in document.createElement('select')) { ... }`但看不到与菜单是否会自动展开有关的任何明显内容。

有这样的事吗？理想情况下，我正在寻找一种不需要浏览器嗅探的普通解决方案。一个`if(!property in document.createElement('select')) { ... }`会很棒的。

[编辑/添加] 我知道 jQuery 迁移并理解它可能会让我们渡过难关。我并不太热衷于为一个（目前）微小的不便加载更多的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:35:58.397

来自[jQuery.browser](http://api.jquery.com/jQuery.browser/)的 jQuery API ：

> 我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

我调查并发现了具有 $.browser 功能的[jQuery Migrate 插件](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)，代码[可在 github 上找到](https://github.com/jquery/jquery-migrate)。

# python - MongoEngine & serverStatus

> ID：14737599
> 
> 赞同：3
> 
> 时间：2013-02-06T19:54:57.360
> 
> 标签：python, mongodb, mongoengine

我正在将我的 python 脚本从使用 pymongo 切换到使用 mongoengine。以前，我有这个电话：

`client_count = db.command("serverStatus")["connections"]['current'] - 1`

但我想使用 mongoengine 的包装器来获取当前连接的数量。我查看了[server-status](http://docs.mongodb.org/manual/reference/server-status/)和 mongoengine[文档](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html)，但找不到用于拉取服务器变量的等效调用。

我想切换到 mongoengine，因为我们正在使用它的 ODM 功能，并且我们想减少冗余。

对此有任何指示吗？如果有的话，正确的语法是什么？谢谢。

与此同时，我们将只使用 pymongo 来获取正确的数据，而使用 mongoengine 来处理其他所有事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T21:22:39.143

没有 Mongoengine 等效项，因此您必须手动调用它。当我们包装 pymongo 时，您可以通过从连接寄存器中获取数据库来进行调用。最简单的方法是使用文档类，例如：

```
db = Document._get_db()
client_count = db.command("serverStatus")["connections"]['current'] - 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:14:48.807

警告：我不太了解这些 API。

但是，如果您查看 mongoengine 的依赖关系，您会发现它依赖于 pymongo，因为它实际上是根据 pymongo 实现的。

现在看看 mongoengines 对其连接逻辑的实现：[https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/connection.py#L113](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/connection.py#L113)：它返回的连接对象实际上是 pymongo 连接。因此，原则上，您应该能够对返回的连接进行 pymongo 调用。所以你实际上可以继续使用上面的调用。当然，此时您违反了 mongoengine 的封装，因为 mongoengine 可以更改其内部连接的实现类型。

但是，通过他们的文档，我看不到任何其他方法可以访问数据库的这方面，所以这也许是最简单的方法。

# jquery - 如何通过jquery ajax制作美女网址发送数据

> ID：14737601
> 
> 赞同：0
> 
> 时间：2013-02-06T19:55:03.267
> 
> 标签：jquery, ajax

我在 url 中有一个 REST 服务：**`http://127.0.0.1:8080/project/api/route/{id}`**

我想使用 JQuery AJAX 调用 URL，例如：

```
function myFunc(id){
$.ajax({
    type: "GET",
    url: "http://127.0.0.1:8080/project/api/route/",
    dataType: "json",
    success: function (data) {
        ...
    }
});
} 
```

我想以这种方式将 id 发送到 URL：**`http://127.0.0.1:8080/project/api/route/10`**

但是如果我使用data属性就不行了，唯一的办法就是把url+id串联起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:37:25.963

是的，以您所做的事情的格式，您确实必须像这样连接 url 和 id：

```
function myFunc(id){
$.ajax({
    type: "GET",
    url: "http://127.0.0.1:8080/project/api/route/"+id,
    dataType: "json",
    success: function (data) {
        ...
    }
});
} 
```

# java - 如何将一个对象的结果转换为字符串对象

> ID：14737602
> 
> 赞同：-4
> 
> 时间：2013-02-06T19:55:03.913
> 
> 标签：java

我是java新手。有一种方法可以返回 xxx 类型的值。

```
 public Cost getTotalCost() {
    return getCost();
} 
```

我想将 getCost() 转换为类型字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:56:37.837

最通用的方法是：

```
 String.valueOf(getCost()); 
```

这将处理空值，或调用`.toString()`对象的方法。

最好为您的类实现该`.toString()`方法。`Cost`

* * *

请注意，以编程方式依赖该`toString()`方法被认为是不好的做法 - 它应该仅用于人眼而不是锁定在特定实现中。

# android - eclipse中LogCat中的Android错误“无法打开文件进行读取”

> ID：14737605
> 
> 赞同：2
> 
> 时间：2013-02-06T19:55:24.550
> 
> 标签：android, eclipse, logcat

我正在编写一个 android 程序，我注意到在 eclipse 中调试时我在 LogCat 中看到错误“无法打开文件进行读取”。我认为这可能与我的清单文件有关，但似乎一切都井井有条。有谁知道这个错误可能意味着什么？

# c# - “参数字典包含不可为空类型'System.Boolean'的参数'blueColor'的空条目” - 如何解决这个问题？

> ID：14737608
> 
> 赞同：2
> 
> 时间：2013-02-06T19:55:39.773
> 
> 标签：c#, asp.net-mvc

我对 MVC 应用程序相当陌生，并且在组合 html 帮助程序和控制器时遇到了问题。我希望我能很好地暴露我的问题，所以这里是：

所以我有这些复选框：

```
<p>
@Html.ActionLink("Create New", "Create")
@using (Html.BeginForm())
{
    <p>
        <label>
        Obj Colors     
        </label>
        Blue : @Html.CheckBox("blueColor", true)
        Red : @Html.CheckBox("redColor", true)
        Green : @Html.CheckBox("greenColor", true) <br/>
        Black : @Html.CheckBox("blackColor", true)
        White : @Html.CheckBox("whiteColor", true)
    </p>
    (...)
} 
```

我的控制器中有这个巨大的方法：

```
public ActionResult SearchIndex(string objName, string objType, string objSymbol, string objValue, string artistName, bool blueColor, bool redColor, bool greenColor, bool blackColor, bool whiteColor, bool colorless)
{
    (...)
        if (blueColor || redColor || greenColor || blackColor || whiteColor || colorless)
                {
                    (...)
                }
    (...)
} 
```

但是当我加载 SearchIndex 所在的页面时，由于我已经引入了这些布尔值，所以我一进入页面就一直在标题中提到崩溃。什么地方出了错？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:09:43.067

错误说明了一切，真的。布尔值不能为空，显然 blueColor 是。

`Nullable<bool>`您可以像这样更改方法签名以接受

```
public ActionResult SearchIndex(string objName, string objType, string objSymbol, string objValue, string artistName, bool? blueColor, bool? redColor, bool? greenColor, bool? blackColor, bool whiteColor, bool colorless)
{ 
```

或者，如果您希望将值从视图传递到方法中，请将您发布的帮助程序包装在一个表单中，并使您的控制器操作接受发布请求

```
@using (Html.BeginForm( ))
{
    Blue : @Html.CheckBox("blueColor", true)
    Red : @Html.CheckBox("redColor", true)
    Green : @Html.CheckBox("greenColor", true) <br/>
    Black : @Html.CheckBox("blackColor", true)
    White : @Html.CheckBox("whiteColor", true)
}

[HttpPost]
public ActionResult SearchIndex(string objName, string objType, string objSymbol, string objValue, string artistName, bool blueColor, bool redColor, bool greenColor, bool blackColor, bool whiteColor, bool colorless)
{ 
```

编辑

或者，如果您尝试将其作为获取，出于某种原因，您必须在表单声明中指定：

```
@using (Html.BeginForm("SearchIndex", "ControllerName", FormMethod.Get ))
{ 
```

但是（如果您不将布尔参数设为 Nullable），您必须将值传递给此方法才能加载页面

您的 ActionLink 必须将一些值传递给不可为空的 bool 的操作，如下所示：

```
@Html.ActionLink("Cards", "SearchIndex", "Card", new {blueColor = true, redColor = false}, null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T19:42:39.490

***使用 true 或 false 初始化 API 签名中的 bool***

```
public ActionResult SearchIndex(string objName, string objType, bool blueColor =false, bool redColor=true )
{

} 
```

# jquery - 为什么这个 jQuery 点击事件不起作用？

> ID：14737609
> 
> 赞同：0
> 
> 时间：2013-02-06T19:55:47.983
> 
> 标签：jquery, ajax, events, event-handling

我有一个带有类名的 div，`profile-activity-box`它作为 AJAX 响应（html 代码）。AJAX 部分完美运行，所以没有问题。使用“作品”，我的意思是 div 显示正确。现在，当我在其上放置点击事件时，它不起作用。我不知道出了什么问题。这是代码：

```
<div class="row-fluid main-div"> 

    <h3 class="offset1">Laatste activiteit</h3>
    <div class="span8 offset1" id="activity-box-wrapper"></div>

</div>
<script type="text/javascript">

    $(document).ready(function() {
        var id = <?php echo $user['User']['id']?>;
        console.log(id);
        $.ajax({

                type: "POST",
                cache: false,
                url: '/users/getCheckins',
                data: "id="+id,
                success: function(resp) {
                    //console.log(resp);
                    $('#activity-box-wrapper').html(resp);
                },

                error: function(e) {
                    console.log("Server said (error):\n '" + e + "'");
                }
        });
            // this works! So the element is defined!
        console.log($('.profile-activity-box')); 
            // but this does not !
        $('.profile-activity-box').on('click',function(){ 
            $(this).next().slideToggle(100);
            console.log("hello!");
        });
    });
</script> 
```

这是有人要求我发布之前的 AJAX 响应：

```
echo "<div class='profile-activity-box'>";
echo "<div class='span6'>";
echo "<img src='/img/gf80x80.jpg' alt='' />";
echo $value['Game']['title'];
echo "</div>";
echo "<div class='span3 offset3' style='padding: 30px;'> ";
echo "<img src='/img/thumbsup.png' alt='likes' />";
echo "<span class='like-count'> 2 </span>";
echo "<img src='/img/messagebubble.png' alt='comments'". 
      "style='padding-left:30px' />"; 
echo "<span class='comment-count'> 4</span>";
echo "</div>";
echo "</div>";
echo "<textarea style='display:none;' class='profile-comment-box' rows='3'".
     "placeholder='plaats een comment :)'></textarea>"; 
```

再一次，整个事情都正确显示了，并且在我使用 click 事件时也被定义了。我在这里做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T19:58:35.840

您只能将处理程序添加到已经可用的元素。

但是在 ajax 响应之前你`.profile-activity-box`不在那里。

为了克服这种情况，我们[在](http://api.jquery.com/on/).

我们将处理程序应用于已经存在的父元素（`#activity-box-wrapper`在这种情况下），当我们点击父元素时，我们检查它是否也打开`.profile-activity-box`了。

```
$('#activity-box-wrapper').on('click','.profile-activity-box',function(){ // but this does not !
    $(this).next().slideToggle(100);
    console.log("hello!");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:59:01.207

尝试这个

```
$('#activity-box-wrapper').on('click', '.profile-activity-box', function(){ 
     $(this).next().slideToggle(100);           
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:59:46.040

改变这个 -

```
 $('.profile-activity-box').on('click',function(){ 
```

对此——

```
 $('body').on('click', '.profile-activity-box', function(){ 
```

使用 on() 的事件延迟模式 - [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T19:59:47.293

执行此代码时，您应该将事件绑定到 dom 中最近的父级：

```
 $('#activity-box-wrapper').on('click','.profile-activity-box',function(){ // but this does not !
            $(this).next().slideToggle(100);
            console.log("hello!");
        }); 
```

# c# - MVC 4 默认参数值

> ID：14737610
> 
> 赞同：2
> 
> 时间：2013-02-06T19:55:49.053
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

在 MVC 4 应用程序中定义路由时，我可以提供默认参数列表。我应该为可选参数提供什么值：`UrlParameter.Optional`或*空字符串*？

例子：

```
routes.MapRoute("simple", "{controller}/{action}/{id}",
  new {controller = "Home", action = "Index", id = UrlParameter.Optional}); 
```

```
routes.MapRoute("simple", "{controller}/{action}/{id}",
  new {controller = "Home", action = "Index", id = ""}); 
```

`id = ""`上面的例子和`id = UrlParameter.Optional`上面的例子有什么区别吗？

请注意，一些控制器操作将使用`id`（类型`string`），而一些控制器操作将是无参数的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:02:18.923

差异是微妙的，但几乎不重要

`UrlParameter.Optional`表示将 null 传递给 Action 方法以代替值。

`id = ""`表示默认值“”（非空）将传递给操作方法。

在这两种情况下，在路由中不包含 id 参数不会阻止 MVC 框架找到正确的方法。

在 的情况下`UrlParameter.Optional`，您应该使所有相关的操作方法都采用可为空的参数

**类型很重要**

您不应该应用于`id=""`使用整数的路由。

# grails-2.0 - Grails 2.2 中的测试标准

> ID：14737615
> 
> 赞同：0
> 
> 时间：2013-02-06T19:56:09.877
> 
> 标签：grails-2.0, grails-domain-class, grails-2.2

我们从 Grails 1.3.7 迁移到 2.2 的原因之一是能够对我们的（许多）标准进行单元测试。

我们在标准测试中遇到的第一件事是：

属性 [nightly.id] 不是 grails.gorm.CriteriaBuilder.validatePropertyName(CriteriaBuilder.java:968) 中类 [com.litle.bldvwr.Result] 的有效属性

我们所拥有的是 result 和 nightly 之间简单的多对一关系。每个结果每晚有 1 个。Nightly 和 Result 之间没有直接关系。

**更新**

具体代码为： Nightly.groovy：

```
package examples

import java.util.Date;

class Nightly {
    String name 
    String status

    static constraints = {
        status nullable:true
        name unique: true, nullable: false, blank: false
    }

    static mapping = {
    }
    String toString () {
        name +' ' + status
    }

} 
```

结果.groovy：

```
package examples

import java.util.Date;

class Result {
String status
String name
String type
Nightly nightly

static mapping = {
}

Result() {
}

static def gimmeCountByNightlyAndStatusAndRerunIsNull(def nightly, def status) {
    def count = Result.createCriteria().count {
        and {
            eq('nightly.id', nightly.id)
            eq('status', status)
            isNull('rerun')
        }
    }
    return count
}

} 
```

ResultTests.groovy

```
package examples

import grails.test.mixin.*
import org.junit.*

@TestFor(Result)
@Mock(Nightly)
class ResultTests {

void testCriteriaMess ()    {

            //this test will fail due to: Property [nightly.id] is not a valid property of class [examples.Result]

            Nightly night = new Nightly( name:'nightly1', status:'Success')
            night.save(validate:false)

            Result res = new Result(status: 'SUCCESS', type: 'INTEGRATION')
            res.nightly = night
            res.save(validate:false, flush:true)

            def count = Result.gimmeCountByNightlyAndStatusAndRerunIsNull(night, 'SUCCESS')
            assertTrue count==0
        }
} 
```

上面的代码来自一个全新的 Grails 2.2 项目，它是用 GGTS 3.1 创建的。除了上面的代码，项目中的其他所有内容都是完整的样板生成的。

我希望，正如它针对实际数据库所做的那样，“nightly.id”将被转换为 Result 表的 nightly_id 列。

这是 GORM 在 2.2 中如何被嘲笑的问题，还是我们遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:48:44.160

您应该将查询更改为

```
def count = Result.createCriteria().count {
        and {
            eq('nightly', nightly)
            eq('status', status)
            isNull('rerun')
        }
    } 
```

# php - 我可以用另一个命令自动更新 generate:doctrine:crud 生成的文件吗？

> ID：14737618
> 
> 赞同：0
> 
> 时间：2013-02-06T19:56:21.457
> 
> 标签：php, symfony, doctrine

我只是想知道我是否可以做到这一点：

我用`generate:doctrine:crud`CRUD 我的实体，我不知道如何简单地重新生成 CRUD 文件而不删除它们。有没有办法做到这一点？

我查看了大互联网，但一无所获。对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:26:41.577

不，这不是 crudgen 的工作原理。

但是，没有太多理由像您所说的那样参与，因为默认的 crud 生成器文件非常小，并且在重新生成之前和之后看起来都一样（除非您对骨架进行了自定义）。

如果您确实需要此行为，请编写一个 bash 脚本（或 windows 等效脚本）以在重新生成之前删除文件，但同样，除非您有自定义骨架，否则您不需要这样做。

（编辑中的注意事项：如果您尝试将不同的格式 - 注释转换为 yml，无论如何您都需要删除文件）。

# ios - ViewController 中的 TableView 不显示单元格

> ID：14737621
> 
> 赞同：2
> 
> 时间：2013-02-06T19:56:26.450
> 
> 标签：ios, uitableview, tableview

我对 iOS 开发还很陌生，我已经为此苦苦挣扎了大约一天，但不知道为什么它不起作用。我正在尝试将视图控制器中的表格视图用作用户使用的小菜单。我已经检查了 NSArray 是否正在被填充，并且确实如此。我还检查了是否正在创建单元格，并且确实如此。我只是想不通为什么它没有用它创建的单元格填充表格视图。以下是我到目前为止的代码。提前感谢任何人都可以提供的任何帮助。

主视图控制器.h

```
#import <UIKit/UIKit.h>

@interface MainViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *menuTableView;
@property (weak, nonatomic) IBOutlet UIButton *menuButton;
@property (strong, nonatomic) NSArray *menuItemsArray;
@property (weak, nonatomic) IBOutlet UILabel *menuLabel;

@end 
```

主视图控制器.m

```
#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController
@synthesize menuItemsArray, menuTableView, menuButton, menuLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];

    //Set TableView Delegate/DataSource to self
    [self.menuTableView setDelegate:self];
    [self.menuTableView setDataSource:self];
    [self.menuTableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
    [self.menuTableView setBounces:NO];
    [self.menuTableView setRowHeight:self.menuLabel.frame.size.height];

    self.menuItemsArray = [[NSArray alloc] initWithObjects:@"Add Category", @"Add Item", @"Settings", nil];

    NSLog(@"array: %@", menuItemsArray);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - UITableViewDelegate

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return ([self.menuItemsArray count]);
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"menuCell"];

    [[cell textLabel]setText:[self.menuItemsArray objectAtIndex:indexPath.row]];

    [[cell textLabel]setFont:[self.menuLabel font]];

    return cell;
}

-(void)tableView:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    [self.menuTableView deselectRowAtIndexPath:indexPath animated:YES];

    NSString *selectedString = [self.menuItemsArray objectAtIndex:indexPath.row];

    self.menuLabel.text = selectedString;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T04:11:50.440

我有同样的问题，我的表格视图没有显示在视图控制器中。我找到了解决方案。您可以创建另一个带有 Container 视图的视图控制器。并将您的表视图放在表视图控制器上。只需将表格视图控制器嵌入到您的邮件视图控制器的容器视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T18:41:20.573

这有点晚了，因为您已经找到了解决方法，但是我遇到了与您相同的问题，发现我需要将 IBOutlet 属性连接到情节提要中的表格视图，然后一切正常。

我希望这对您将来有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T22:33:03.193

确保`initWithNib`正在调用您的方法。如果您正在调用`[[MainController alloc] init]`您的“menuTableView”，则永远不会从 Nib 创建。`backgroundColor`此外，通过将主表视图设置为或其他内容来仔细检查表视图，`[UIColor red]`以确保 tableView 存在并且它具有您期望的框架。它可能位于您的其他视图之一的后面，具有 的框架`(0,0,0,0)`，或者根本不存在于视图中。

还可以尝试`[self.menuTableView reloadData]`在“viewDidLoad”结束时调用或`menuItemsArray`在设置数据源和委托（即在您的`initWithNib`方法中）之前初始化。

当你真的让这一切正常工作（你非常接近）时，你会想要将你的`cellForRow`方法更改为更像这样的东西：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [aTableView dequeueReusableCellWithIdentifier:@"menuCell"];
    if(!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"menuCell"];
    }

    [[cell textLabel]setText:[self.menuItemsArray objectAtIndex:indexPath.row]];

    [[cell textLabel]setFont:[self.menuLabel font]];

    return cell;
} 
```

这将允许您利用使表格视图如此高效的单元重用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T19:26:04.553

所描述的症状的一个原因是，如果您使用情节提要中的容器视图将 UITableView 放置在父视图中，但是在代码中初始化和填充的 UITableView 实例与实际呈现给用户的实例不同。如果您使用容器视图将 UITableView 放置在视图中，则需要执行以下操作：

*   通过从容器视图到 Storyboard 中的 UITableView 的 Control-Dragging，使用 segue 将 UITableView 连接到容器视图。
*   单击segue，并为其命名，例如`tableViewSegue`。
*   通过实施设置表`prepareForSegue:sender:`

    ```
    - (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
    NSString * segueName = segue.identifier;
    if ([segueName isEqualToString: @"tableViewSegue"]) {
        UIViewController * myTableView = [segue destinationViewController];
        // Do any table setup here, such as injecting the data array into a property on the tableView.
        }
    } 
    ```

相反，如果您一直在代码中创建不同的 UITableView，您将看到一个未填充的 UITableView，它遵循故事板中设置的规范（例如，行高间距将是正确的）并且响应用户交互，但它是空的. 空的是情节提要自动为您初始化的，同时您一直在其他地方创建另一个 UITableView：

```
// DON'T DO IT THIS WAY IF YOU'RE USING STORYBOARD.
- (void)viewDidLoad {
    [super viewDidLoad];

    // Incorrectly creating a tableview child table view that won't be the one presented.
    self.myTableView = [MYTableViewClass new];
    // ...further configuration of the table.
} 
```

如果您遵循这条错误的路径，您正在创建的另一个 UITableView 正在内存中构建，并填充了您的数据数组，因此您将看到该进程中的所有 NSLog 语句，并能够在内存中看到具有正确编号的 UITableView当您逐步执行代码时，对象等等，但难以理解的是*您没有看到呈现给用户的*对象。所以追踪起来可能很棘手。:)

只需删除上面的代码，实施`prepareForSegue:sender:`，宇宙将恢复为可预测的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-03T03:30:07.117

如果在 UIViewController 内部添加 UITableView，则需要将 UITableView 的框架大小设置为与 UIViewController 内部视图的框架大小相同，否则 tableview 大小可能为 0，无法显示任何内容。

如果您在案例中通过情节提要创建 UITableView，则可以设置帧大小：

```
- (void)viewDidLoad {
        [super viewDidLoad];
        // Set tableview delegate and datasource here
        menuTableView.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
} 
```

# gwt - GWT 在树中搜索节点

> ID：14737623
> 
> 赞同：0
> 
> 时间：2013-02-06T19:56:30.910
> 
> 标签：gwt, search

我被递归搜索困住了，我正在使用 gwt，基本上我想在 gwt 树中搜索一个节点，这是我的代码。提前谢谢。我不擅长递归:-(

```
public TreeItem search2(String sName, TreeItem node){
    TreeItem treeItem=null;
    String sValue ="";
    boolean bFound=false;

    System.out.println("Father Node:" + node.getText() + " child nodes:" + node.getChildCount());

    for (int i=0;i<node.getChildCount();i++){

        treeItem = node.getChild(i);
        sValue = treeItem.getText();
        System.out.println("searching...."+sValue);
        if (sValue.equalsIgnoreCase(sName)){
            bFound=true;
            System.out.println("!!found!!!!"+sName + " node to return:" + treeItem.getText());
            return treeItem;
        }
        else {
            return search2(sName,treeItem);
        }
    }               

    return treeItem;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:54:58.787

I think the error is in the line `return search2(sName,treeItem);`. Only if a match was found should you return ... if no match was found then you want to continue checking the rest of the child nodes. Try this:

```
public TreeItem search2(String sName, TreeItem node) {
    if (node.getText().equalsIgnoreCase(sName) {
        return node;
    }
    for (int i = 0; i < node.getChildCount(); i++) {
        TreeItem treeItem = search2(sName, node.getChild(i));
        if (treeItem != null) {
            return treeItem;
        }
    }
    return null;
} 
```

Note: I edited my first answer because it would not have worked correctly if there was just one node (and the node text matched sName).

Andy

# .htaccess - 如何将子域链接到 joomla 用户？

> ID：14737635
> 
> 赞同：1
> 
> 时间：2013-02-06T19:56:58.837
> 
> 标签：.htaccess, subdomain, joomla2.5

我们有一个自定义组件，可以为注册用户做各种美妙的事情。其中一项要求是能够使用用户名作为子域来检索和使用其各种设置。例如[http://abc.ourdomain.com](http://abc.ourdomain.com)必须检索用户名为“abc”的 jos_users 记录。从那里我们在会话中使用该信息并继续使用具有这些值的组件函数。

我已经尝试修改 $_SERVER["HTTP_HOST"] 来开始工作，但我希望 htaccess 有一种更简洁的方法，或者可以更好地服务于目的的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:05:20.423

这样的事情可能在一个 .htaccess 文件中起作用：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !www\. [NC]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.ourdomain\.com  [NC]
RewriteCond %{REQUEST_URI}  !getuser\.php  [NC]
RewriteRule .*  http://ourdomain.com/getuser.php?user=%1     [L] 
```

静默地图

`http://abc.ourdomain.com`

到：

`http://ourdomain.com/getuser.php?user=abc`

将子域捕获`abc`到组 %1 并将其作为查询附加到脚本。

`abc`是一个可变字符串。

`getuser.php`可以是任何脚本。键`user`是一个示例，它也可以是任何名称。

对于永久重定向，将 [L] 替换为 [R=301,L]

# .net - 我的 VB 代码会等待 linq-to-sql 存储过程完成吗？

> ID：14737637
> 
> 赞同：0
> 
> 时间：2013-02-06T19:57:04.450
> 
> 标签：.net, tsql, linq-to-sql

我有通过 linq-to-sql 调用复杂存储过程的 VB 代码。VB 代码会等待 SP 完成后再继续吗？还是只是调用服务器来执行 SP（然后不管 SP 执行多长时间都继续执行）？

```
Line 1 Do something
Line 2 myLinqToSQLDb.doStoredProcedure //will the code wait for this to finish before doing line 3?
Line 3 Do something else 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:58:18.070

它将按顺序处理这些行，等待操作完成，除非您使用任何异步 API。

如果您不知道您的 API 是否是异步的，则可能不是。它将被命名为 BeginFoo 并返回 IAsyncResult，或者可能返回一个 Task 并使用最新 VB 版本的 Async / Await）。

# c - 让链接器删除未使用的 avr/gcc 目标文件

> ID：14737641
> 
> 赞同：3
> 
> 时间：2013-02-06T19:57:14.023
> 
> 标签：c, linker, avr-gcc

我将 avr-gcc 用于 atmega-328p 微控制器。代码是用以下方式构建的：

```
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o heap.o heap.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o kerneltimer.o kerneltimer.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o message.o message.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o driver.o driver.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o watchdog.o watchdog.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o mutex.o mutex.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o semaphore.o semaphore.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o kernelswi.o kernelswi.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o task.o task.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o kernelwdt.o kernelwdt.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o myfirstapp.o myfirstapp.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o taskport.o taskport.c
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000   -c -o timer.o timer.c 
```

并与：

```
avr-gcc -g -Wall -Os -mmcu=atmega328p -D__AVR_ATmega3280__ -DARCH_AVR -I/usr/avr/include -DF_CPU=16000000 -Wl,-Map,myfirstapp.map -L/usr/avr/lib -Os -o myfirstapp.elf heap.o kerneltimer.o message.o driver.o watchdog.o mutex.o semaphore.o kernelswi.o task.o kernelwdt.o myfirstapp.o taskport.o timer.o 
```

现在，对于这个特定的程序，heap.o 中没有使用任何内容。然而，代码包含在最终的二进制文件中。无论如何，如果其中没有任何内容在任何地方使用，我是否可以让链接器至少删除完整的 .o 文件？

虽然这只是一个用于学习目的的有趣项目，但我更愿意了解这些工具是否可以解决这个问题，而不是自己追踪这些事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T20:11:50.350

是的，这是可能的。传递`--gc-sections`给链接器将指示它省略未引用的部分。此外，将`-ffunction-sections`and`-fdata-sections`标志传递给编译器将指导它为每个函数和变量生成一个部分，从而允许在单独的基础上省略这些，而不仅仅是在文件级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T23:03:59.573

将 --gc-sections 添加到链接器对我没有帮助。但是添加

-Wl,-gc-sections 确实有效

# zend-framework - Zend Framework - 多个模块，一种布局

> ID：14737651
> 
> 赞同：0
> 
> 时间：2013-02-06T19:57:56.247
> 
> 标签：zend-framework, module, zend-layout

我有一个具有以下结构的 Zend 应用程序：

```
application
    configs
        application.ini
    modules
        api
            controllers
            Bootstrap.php
        default
            controllers
                IndexController.php
            models
            views
                scripts
                    index
                        index.phtml
                layouts
                    layout.phtml
            Bootstrap.php 
```

我的 application/configs/application.ini 看起来像这样：

```
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.db.adapter = "PDO_SQLITE"
resources.db.params.dbname = APPLICATION_PATH "/../data/db/test.sqlite3"

resources.modules = ""

resources.frontController.params.prefixDefaultModule = "1"
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.layout.layoutPath = APPLICATION_PATH "/modules/default/views/layout/" 
```

我的问题是无论我做什么我都无法使用布局。如果我去[http://test.app/index/index](http://test.app/index/index)，我可以看到视图脚本的输出，但看不到布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:43:44.837

我看到您指定了布局路径，但从未指定要使用的实际布局文件。假设布局已命名`layout.phtml`，请将其添加到应用程序的 ini。

```
resources.layout.layout = "layout" 
```

如果您需要使用多个布局，则可以覆盖每个操作/控制器级别。在控制器中，您可以通过`$this->_helper->layout()` Then 您可以使用以下方法到达布局：`setLayoutPath()`, `setLayout()`,`disableLayout()`

参考： http: [//framework.zend.com/manual/1.12/en/learning.layout.usage.html](http://framework.zend.com/manual/1.12/en/learning.layout.usage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:41:10.300

您需要在 Bootstrap.php 或 application.ini 中初始化您的布局文件才能使用它，您还没有声明要使用哪个文件。

> 在 Bootstrap.php 中

```
function _initViewHelpers()
{
    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();
} 
```

你应该很高兴，如果你想有多个布局并且有不同的条件来使用布局，你应该在这里看看[这个答案，](https://stackoverflow.com/questions/4732778/how-to-setup-multiple-layouts-in-zend-framework-eg-public-logged-in-various-co)这很酷。

# spring - 实体对象与值对象 - Hibernate 和 Spring

> ID：14737652
> 
> 赞同：0
> 
> 时间：2013-02-06T19:58:03.290
> 
> 标签：spring, hibernate, validation, model-view-controller, entity

好的。我在这里有点困惑......

可以说我有一个名为`User`.

```
 class User {
     // all variables
     // all getters and setters
   } 
```

现在，我使用 JSR 303 验证并在此处放置`@NotNull`,`@Range`等作为变量。

我将其用作 Form / Command 对象。意思是，当提交表单时，值会被验证并`BindingResult`给我错误。

1.  是否也应该将其用作 Hibernate 的实体对象？（如果是这样，我需要在 Validation 注释之上添加其他 Hibernate 注释，如`@Entity`, `@Id`,等）`@Column`
2.  当我们从数据库加载数据时，这些验证是否也会启动？（如果是，如果数据已经存在，并且不确认验证怎么办？）
3.  我们通常在哪里编写业务验证，例如数据库中是否存在国家/地区，xyz 值是否存在于不同的表中等？

这里也出现了问题： - 用户表单可能没有用户类中存在的所有字段 - 数据库表用户可能比用户类有更多或更少的字段 - 表单也可能有来自不同对象的字段，比如用户和和命令。

我们如何处理这些？

试图围绕它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:12:28.187

1.  不，您不应该混合实体对象和值对象。实体对象用于数据库映射，值对象用于表示层。
2.  要验证注解的对象，您需要使用`Validator`（通常与`DataBinder`.Spring[验证](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html)一起使用）
3.  是数据库约束还是后端验证？

对于您的最后一个问题，这是您的表示层和持久层有 2 个不同对象的原因之一。这样，值对象可以匹配用户（表单）显示或输入的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-10T13:20:10.127

**实体对象**是我们普通的旧java类（POJO）模型/业务类的对象，需要使用Hibernate将其持久化到数据库中，而**值类型**对象是另一个类的对象，但它作为实体对象的一部分存储在数据库表中。

```
@Embeddable
@Data
@AllArgsConstructor
public class Address{
    private  String country;
    private String city;
    private String street1;
    private String street2;
    private postalCode;
}
@Entity
@Data
@AllArgsConstructor
public class Person{
    @Id
    private Long id;
    private String firstName;
    private String lastName;
    private ing age;
    private Address address;
}
} 
```

因此，在 spring 和 hibernate 项目中运行此代码后，您将看到数据库中的 Person 表是使用它的属性和 Address 类属性创建的。有关更多信息，我建议阅读以下内容：[ [https://www.decodejava.com/hibernate-value-type-object.htm][1]](https://www.decodejava.com/hibernate-value-type-object.htm][1])

# c# - 动态的唯一列值 Linq 到实体（表达式树）

> ID：14737660
> 
> 赞同：0
> 
> 时间：2013-02-06T19:58:43.360
> 
> 标签：c#, linq-to-entities, expression-trees

我意识到有很多与此相关的帖子，我已经进行了广泛的研究，但似乎无法弄清楚这一点。它应该非常简单。我只需要生成一个具有动态列名的列域。就像是

```
public IEnumerable<ColumnEntity> GetColumnDomain(string column)
{   List<ColumnEntity> columnEntities = new List<ColumnEntity>();
    var query = db.CITATIONs.Select(m => m."column").Distinct();
    ....
} 
```

其中“列”是动态参数值。我开始构建和表达式树来动态生成查询表达式

```
ParameterExpression pe = Expression.Parameter(typeof(CITATION), "c");
Expression theColumn = Expression.Property(pe, typeof(string).GetProperty(column)); 
```

但仅此而已。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:14:55.487

使用该`Expression.PropertyOrField()`方法生成成员访问权限。您还需要知道列的类型，否则它将不起作用。

这都可以推广到这个通用方法中：

```
public static Expression<Func<TSource, TResult>>
    GenerateSelector<TSource, TResult>(string propertyOrFieldName)
{
    var parameter = Expression.Parameter(typeof(TSource));
    var body = Expression.Convert(
        // generate the appropriate member access
        Expression.PropertyOrField(parameter, propertyOrFieldName),
        typeof(TResult)
    );
    var expr = Expression.Lambda<Func<TSource, TResult>>(body, parameter);
    return expr;
} 
```

然后你可以这样做：

```
public IEnumerable<ColumnEntity> GetColumnDomain<TColumn>(string column)
{
    var query = db.CITATIONs
        .Select(GenerateSelector<CITATION, TColumn>(column))
        .Distinct();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:20:12.493

所以不完全确定你在追求什么。但简单地说：

```
public PropertyInfo GetPropertyInfo<T>(Expression<Func<T, Object>> expression)
{
    MemberExpression memberData = (MemberExpression)expression.Body;
    return (PropertyInfo)memberData.Member;
} 
```

这么多将为您提供有关该成员的财产信息，因此，如果您有：

```
PropertyInfo info = GetPropertyInfo<FileInfo>(file => file.FullName);
Console.WriteLine(info.Name); 
```

它将显示与您在表达式中输入的属性相对应的“全名”。

# jquery - 从到期日和逾期开始倒计时

> ID：14737665
> 
> 赞同：1
> 
> 时间：2013-02-06T19:59:23.217
> 
> 标签：jquery, math

我正在逐步完成每一类 .days-due 以添加一个倒计时数字，直到到期日。EG：2 天内到期 - 到期日期：2/8/2013

我还希望它显示超过截止日期的负数。

[http://jsfiddle.net/infatti/XeqPT/#base](http://jsfiddle.net/infatti/XeqPT/#base)

到期日数错误，我不明白为什么？

```
<ul>
<li>Due in <span class="days-due"></span> days - Due Date is <span class="month">02</span>/<span class="day">08</span>/<span class="year">2013</span></li>
<li>Due in <span class="days-due"></span> days - Due Date is <span class="month">02</span>/<span class="day">10</span>/<span class="year">2013</span></li>
</ul>

function daysUntil(year, month, day) {
  var now = new Date(),
      dateEnd = new Date(year, month - 1, day), // months are zero-based
      days = (dateEnd - now) / 1000/60/60/24;   // convert milliseconds to days

  return Math.round(days);
}

var monthDue = $(this).next('.month').text();
var dayDue = $(this).next('.day').text();
var yearDue = $(this).next('.year').text();

$('.days-due').each(function(){
    $(this).text(daysUntil(yearDue, monthDue, dayDue));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:09:34.093

`$(this)`在您的上下文中是指`window`.

`next`看着兄弟姐妹。您的跨度不是窗口的兄弟姐妹。

更改您的选择器。此外，您的代码只查看一组元素，但您的标记有两个。

试试这个

```
function daysUntil(year, month, day) {
    var now = new Date(),
        dateEnd = new Date(year, month - 1, day); // months are zero-based
    days = (dateEnd - now) / 1000 / 60 / 60 / 24; // convert milliseconds to days
    return Math.round(days);
}

$("li").each(function () {

    var monthDue = $(this).find('.month').text();
    var dayDue = $(this).find('.day').text();
    var yearDue = $(this).find('.year').text();

    $(this).find(".days-due").text(daysUntil(yearDue, monthDue, dayDue));

}); 
```

找到所有`li`元素，然后循环遍历它们进行计算。因为我们选择了更改`li`的上下文。`this`

# c# - GridView中的条件超链接？

> ID：14737669
> 
> 赞同：0
> 
> 时间：2013-02-06T19:59:31.150
> 
> 标签：c#, asp.net

我有一个带有超链接的gridview：

```
<asp:GridView ID="gvEmployees" runat="server" AutoGenerateColumns="False"
 CssClass="table table-hover table-striped" GridLines="None" >
    <Columns>
        <asp:TemplateField HeaderText="Name" SortExpression="EmployeName">
            <ItemTemplate>
                <asp:HyperLink ID="HyperLink1" runat="server"
                    Text='<%# Bind("EmployeName") %>' ></asp:HyperLink>
            </ItemTemplate>

        </asp:TemplateField>
        <asp:TemplateField HeaderText="ID" SortExpression="EmployeID" Visible="False">
            <ItemTemplate>
                <asp:Label ID="lblID" runat="server" Text='<%# Bind("EmployeID") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

但是，如果员工 ID 是已登录员工的 ID，则它应该仅显示为超链接。

我可以做到这一切，但我不知道如何使超链接看起来像一个标签。很容易让它没有链接到任何地方，但我不知道如何让它看起来像一个标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:42:48.823

我相信如果你设置 Enabled="false" 就可以了。如果没有，那么唯一的方法是在单元格中同时放置一个超链接和标签，并在适当的时候显示链接，在适当的时候显示标签，隐藏另一个（可以在 RowDataBound 事件中轻松完成） .

# java - 每当窗口大小增加或减少时放大内容

> ID：14737670
> 
> 赞同：1
> 
> 时间：2013-02-06T19:59:31.420
> 
> 标签：java, swing, layout-manager, absolutelayout

是否有可能**缩放****J 框架**的内容例如：如果我给出初始**setSize(800,1000)**我在其中放置文本字段、标签、按钮等..按照大小 800,1000 应用程序看起来不错，假设我**最大化框架的窗口**，文本字段，标签，按钮自动保持静态方式......按下最大化时如何缩放它整个内容都以良好的方式整齐排列......请给我解决方案解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:00:37.843

> 如果我给出了我放置文本字段、标签、按钮等的初始 setSize(800,1000)。根据大小 800,1000 应用程序看起来不错，假设我最大化框架的窗口，自动文本字段、标签，按钮保持静态...

*   因为`AbsoluteLayout`必须`JComponent`使用`Insets`来自第一个的`container`

> 是否有可能缩放 J Frame 的内容

*   必须使用`ComponentListener`（通知延迟`Swing Timer`，因为这会`Listener`为所有方向上的每个像素触发一个新事件）`JComponents`与容器一起缩放

*   这只是为了工作`LayoutManager`，不要通过使用`AbsoluteLayout`& `Insets`&来提供它`ComponentListener`，确保这段代码可能比使用更长更复杂`GroupLayout`

# c# - WCF REST 部分类/接口 - 找不到端点问题

> ID：14737671
> 
> 赞同：0
> 
> 时间：2013-02-06T19:59:33.903
> 
> 标签：c#, asp.net, wcf, rest, wcf-rest

以下代码导致“未找到服务端点”错误。它使用部分类和部分接口。当我不使用部分类/接口时，它工作正常......有任何错误吗？

```
[ServiceContract]
public partial interface IMySvc
{
    [WebGet(UriTemplate = "...")]
    [OperationContract]
    Stream GetProducts_1();

    [WebGet(UriTemplate = "...")]
    [OperationContract]
    Stream GetProducts_2();
}

public partial interface IMySvc
{
    [WebGet(UriTemplate = "...")]
    [OperationContract]
    Stream GetProducts_3();

    [WebGet(UriTemplate = "...")]
    [OperationContract]
    Stream GetProducts_4();
}

[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public partial class MySvc: IMySvc
{
    //implementations of GetProducts_1, GetProducts_2
}

public partial class MySvc: IMySvc
{
    //implementations of GetProducts_3, GetProducts_4
} 
```

在 Global.asxc 中：

```
RouteTable.Routes.Add(new ServiceRoute("task", new WebServiceHostFactory(), typeof(MySvc))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T13:57:31.703

这里的例子我是如何制作我的

这将是第一组方法

```
[ServiceContract]
public partial interface IDefaultInterface
{
    [OperationContract]
    string getData1();
}

public partial class CDefaultClass : IDefaultInterface
{
    public getData1(){ return "data 1"; }
} 
```

这将是您想要拆分的另一组方法

```
[ServiceContract]
public partial interface IDefaultInterface2
{
    [OperationContract]
    string getData2();
}

public partial class CDefaultClass2 : IDefaultInterface2
{
    public getData2(){ return "data 2"; }
} 
```

以下是我的衍生逻辑与评论

```
namespace wcfMyService
{
    // this list all derivation for the easy to follow service.
    // this service will have LOTS of function so ability
    // to split in multiple classes was necessary
    // on client side we only see 1 set of function all mixed together
    // but at least working on it it's easy to follow for us since we have a structure

    #region Class Derivation

    public class CDerivative : CDefaultClass { }

    public partial class CDefaultClass : CDefaultClass2 { }  

    // NOTE THAT ALL NEW CLASSES MUST :
    // - Be PARTIAL classes
    // - Implement their OWN interface

    // new class would be
    // public partial class CDefaultClass2 : CMyNewClass { }
    // and so on. previous class derive from the new class

    #endregion

    #region Interface Derivation

    [ServiceContract]
    public interface IDerivative : IDefaultInterface { }

    public partial interface IDefaultInterface : IDefaultInterface2 { }

    // NOTE THAT ALL NEW INTERFACE MUST :
    // - Be PARTIAL Interface
    // - Have attribute [ServiceContract]
    // - all methods need [OperationContract] as usual

    // new class interface would be
    // public partial interface IDefaultInterface2 : IMyNewClass { }
    // and so on. previous class interface derive from the new class interface

    #endregion
} 
```

现在您的正常服务接口只需添加派生 AND 接口，以便端点看到所有派生类的所有功能。内部不需要代码，因为 Class 从它们各自的接口实现它们自己的方法。所以每个类中没有数百万个方法的集群

```
[ServiceContract]
public interface IService : IDerivative
{

} 
```

最后，您需要将 SVC/ASMX（无论如何）编码如下，以便为 WSDL 等公开所有内容。同样在这个类中也不需要代码

```
public partial class Service : CDerivative, IService
{       
} 
```

因此，总体而言，当您希望在另一个类中使用新方法以获得更好的结构时，您只需创建部分接口和部分类，就像您通常创建服务合同和操作一样。然后只需进入派生文件并将您的接口和类添加到派生中。因为它们都只实现了自己的接口，所以不应该有任何冲突，而且当您编写代码时，您将永远不会看到其他类的方法。

我非常喜欢这个组织，并使用适当的文件夹制作漂亮的树形视图，我可以快速从那里的数千个方法中找到一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:55:04.220

这可能与它是部分类无关。这可能是许多不同的问题。您需要缩小问题的来源。尝试：

*   首先构建一个简单的基本 http Web 服务。
*   当您获得该工作时，将其更改为休息服务。

# ios - 多个 NSDate 范围的总和间隔

> ID：14737672
> 
> 赞同：0
> 
> 时间：2013-02-06T19:59:38.307
> 
> 标签：ios, nsdate

我可以使用这种方法获得两个日期之间的时间间隔：

```
- (NSString *)calculateTime:(NSDate *)fromDateTime andDate:(NSDate *)toDateTime {
    NSCalendar *calendar = [NSCalendar currentCalendar];

    unsigned int unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSDateComponents *conversionInfo = [calendar components:unitFlags fromDate:fromDateTime toDate:toDateTime options:0];

    int hours = [conversionInfo hour];
    int minutes = [conversionInfo minute];
    int seconds = [conversionInfo second];

    return [NSString stringWithFormat:@"%02dh %02dm %02ds", hours, minutes, seconds];
} 
```

假设我有 3 个`NSDate`范围：

```
2013-02-03 11:20:43  -  2013-02-03 12:42:12 // 01h 21m 29s
2013-02-04 22:11:29  -  2013-02-05 01:56:30 // 03h 45m 01s
2013-02-05 14:02:10  -  2013-02-05 18:32:08 // 04h 29m 58s 
```

如何`%02dh %02dm %02ds`为所有范围的间隔实现相同的格式`NSDate`？换句话说，计算所有区间的总和。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:12:48.573

您的目标是计算持续时间。持续时间与时区或类似情况无关。您可以计算各个持续时间并添加它们。

最简单的方法是以秒为单位计算所有持续时间的总和，然后将其转换为更易读的形式，包括小时、分钟和秒。

# javascript - Fabricjs将部分画布复制到另一个画布

> ID：14737677
> 
> 赞同：4
> 
> 时间：2013-02-06T19:59:58.250
> 
> 标签：javascript, html, html5-canvas, fabricjs

我正在尝试将fabricjs画布的一部分复制到另一个画布。我不确定fabric是否有适合这样做的方法（如果是这种情况，请告诉我），经过一番搜索，我决定不使用fabric。但是画布已经使用fabricjs创建了。 *新面料.Canvas()*。现在，当我尝试使用*context.drawImage()*复制此画布的一部分时，我得到一个 TypeError。我尝试用 img 或不使用织物创建的画布替换画布，这很有效。所以，我猜我可能不得不以不同的方式使用织物画布对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:42:40.647

如果您想从画布复制一个矩形区域以便将其导出为图像，您可以使用以下命令：

```
 canvas.deactivateAll();
      canvas.renderAll();
      var ctx = canvas.getContext("2d");
      var myImageData = ctx.getImageData(box.x, box.y, box.w, box.h);
      var buffer = document.createElement('canvas');
      var bufferCtx = buffer.getContext("2d");
      buffer.width = box.w;
      buffer.height = box.h;
      bufferCtx.putImageData(myImageData, 0, 0);
      window.open(buffer.toDataURL('image/png')); 
```

# c++ - 在 c++ 中的 fn 调用中，args 被复制到相应的参数中。这是初始化还是赋值？

> ID：14737680
> 
> 赞同：4
> 
> 时间：2013-02-06T20:00:02.877
> 
> 标签：c++, function-call

在 c++ 中的函数调用中，参数被复制到相应的参数中。这是初始化还是赋值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:04:13.347

参数传递语义是初始化的语义。这意味着，您的类的复制/移动构造函数将被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:03:17.220

然后参数是*按值*复制构造的（即初始化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:07:00.807

初始化：（请查看[原稿](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)）

> 5.2.2 函数调用
> 
> 调用函数时，每个参数都应使用其对应的参数进行**初始化。**[这样的初始化相对于彼此的顺序是不确定的] 当一个函数被调用时，具有对象类型的参数应该具有完全定义的对象类型。[这仍然允许参数是指向不完整类类型的指针或引用。但是，它可以防止按值传递的参数具有不完整的类类型。]*在参数初始化期间，实现可以通过组合相关参数的转换和/或临时对象的构造来避免构造额外的临时对象随着参数的初始化。*参数的生命周期在定义它的函数返回时结束。*每个参数的初始化和销毁​​发生在调用函数的上下文中。*[在调用函数的调用点检查构造函数、转换函数或析构函数的访问。如果函数参数的构造函数或析构函数抛出异常，则在调用函数的范围内开始搜索处理程序；特别是，如果被调用的函数有一个带有可以处理异常的处理程序的函数尝试块，则不考虑该处理程序。]

# python - 先填充一个matplotlib图例的右栏

> ID：14737681
> 
> 赞同：9
> 
> 时间：2013-02-06T20:00:04.210
> 
> 标签：python, matplotlib, legend

嘿，我正在尝试将图例拟合到图上，这样它就不会掩盖图形。

```
import numpy as np
import matplotlib.pyplot as plt

X = np.linspace(0,100,11)

plt.plot(X,-X, label='plot 1')
plt.plot(X,-2*X, label='plot 2')
plt.plot(X,-3*X, label='plot 3')

leg=plt.legend(ncol=2)
leg.get_frame().set_visible(False)

plt.show() 
```

因此，在上面的最小工作示例中，我希望能够将图例中的“情节 2”标签移动到右列，即直接在“情节 3”下方。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:39:06.847

@cosmosis 答案的不同实现。它可能更灵活。

```
import numpy as np
import matplotlib.pyplot as plt

X = np.linspace(0,100,11)

plt.plot(X,-X, label='plot 1', color='red')
plt.plot(X,-2*X, label='plot 2', color='green')
plt.plot(X,-3*X, label='plot 3', color='blue')

(lines, labels) = plt.gca().get_legend_handles_labels()
#it's safer to use linestyle='none' and marker='none' that setting the color to white
#should be invisible whatever is the background
lines.insert(1, plt.Line2D(X,X, linestyle='none', marker='none'))
labels.insert(1,'')

plt.legend(lines,labels,numpoints=1, loc=4,ncol=1)

plt.show() 
```

另一种选择是在此处创建两个图例[，](http://matplotlib.org/users/legend_guide.html#multiple-legend)然后在此处使用 bbox_to_anchor 关键字替换[它们](http://matplotlib.org/users/legend_guide.html#legend-location)

```
(lines, labels) = plt.gca().get_legend_handles_labels()
leg1 = plt.legend(lines[:1], labels[:1], bbox_to_anchor=(0,0,0.8,1), loc=1)
leg2 = plt.legend(lines[1:], labels[1:], bbox_to_anchor=(0,0,1,1), loc=1)
gca().add_artist(leg1) 
```

这样做我![这个](../Images/8bb173de66d236272e4cb829d046394f.png)不需要在其他对象上添加任何东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T22:09:48.330

图例从左到右填充列。换句话说，如果你欺骗它相信还有另一条线（图例中没有任何文本或线条颜色），那么你可以填充“情节 3”下的空间。

```
import numpy as np
import matplotlib.pyplot as plt
from pylab import *

X = np.linspace(0,100,11)

plt.plot(X,-X, label='plot 1', color='red')
plt.plot(X,-2*X, label='plot 2', color='green')
plt.plot(X,-3*X, label='plot 3', color='blue')

line1 = Line2D(range(10), range(10), marker='', color="red")
line2 = Line2D(range(10), range(10), marker='',color="green")
line3 = Line2D(range(10), range(10), marker='', color="blue")
line4 = Line2D(range(10), range(10), marker='', color="white")
plt.legend((line1,line4, line3,line2),('plot1','','plot3','plot2'),numpoints=1, loc=4,ncol=2)

plt.show() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-03T14:39:46.633

第三种方法，基于 Franesco 的回答。使用 alpha=0（透明）绘制占位符线。

```
#draw your actual lines here
#plt....

lines, labels = plt.gca().get_legend_handles_labels()

lines.insert(1, plt.Line2D([],[], alpha=0))
labels.insert(1,'')

plt.legend(lines,labels,ncol=2)
plt.show() 
```

这具有与他的回答中描述的相同的优点。但是，该解决方案在 matplotlib 1.5.1（在 python3 下）中不起作用说`ValueError: Unrecognized marker style none`

# android - ProGuard 符合 Drive API

> ID：14737682
> 
> 赞同：0
> 
> 时间：2013-02-06T20:00:06.630
> 
> 标签：android, proguard

我的应用程序在没有 ProGuard 的情况下运行得很好，但是在使用它时，我总是得到

> 403 UsageLimits，访问未配置

来自 Google Drive API 的错误。

我正在使用[这个](https://stackoverflow.com/questions/14410520/google-drive-api-doesnt-play-well-with-proguard-npe)ProGuard 配置。没有抛出异常——一切似乎都正常——只是请求失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:34:01.553

我刚刚找到了失败的原因。不是proguard是问题。我生成了一个 SHA-Hash 并将其输入到我的应用程序的 Google API 控制台中。发布版本使用另一个密钥库签名，我必须为此版本生成另一个 SHA-Hash。

# android - ScaleGestureDetector 在 Android 4.2 中未检测到两个手指移动

> ID：14737687
> 
> 赞同：1
> 
> 时间：2013-02-06T20:00:26.257
> 
> 标签：android, multi-touch

我有实现`ScaleGestureDetector.OnScaleGestureListener`. 在运行 Android 4.1 及更早版本的设备上，`(OnScaleBegin, OnScale, and OnScaleEnd)`几乎每两指滑动一次都会调用这些方法。这对我很有用，因为我使用两次手指滑动来实现平移和缩放（缩放）功能。我使用`currentSpan`in`ScaleGestureDetector`来确定用户是否打算平移或缩放。从 Android 4.2 开始，似乎`OnScale`只有在指针之间的跨度变化超过操作系统确定的阈值时才会调用 ... 方法。

其他人看到了吗？有没有办法操纵操作系统确定的阈值？

其他`GestureDetector`选项仅响应单指针事件。是否有以支持 4.2 和 4.2 之前的操作系统版本的方式检测多指针移动事件的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:55:09.917

最后，我决定使用`ScaleGestureDetector`缩放功能和视图中的条件`onTouchEvent()`来处理平移。我在缩放时设置了一个标志以防止平移。代码摘录包括在下面。它不像我可以同时缩放和平移那样流畅，但这是我可以接受的解决方案。

----在视图类中----

```
ScaleListener zoomListener = new ScaleListener();

public override bool OnTouchEvent(MotionEvent motion)
{
    zoomListener.onTouchEvent(motion);

    int actionMasked = motion.getActionMasked();
    if (actionMasked == MotionEvent.ACTION_MOVE && motion.getPointersDown() > 1)
    {
        if (!_zoomMode)
        {
            // If more than one pointer is involved in a move event, 
            // and zoom mode is not set, we assume that the user is panning.
            // A zoom gesture movement should be handled by the ScaleGestureDetector
            doPan();
        }
    }
} 
```

----内部班----

```
class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener
{
     public boolean onScale(ScaleGestureDetector detector)
     {
        setZoomMode(true);
        doZoom();
     } 

     public void onScaleEnd(ScaleGestureDetector detector)
     {
         setZoomMode(false);
     }
} 
```

# version-control - StarTeam 跨多个分支或视图共享更改请求

> ID：14737690
> 
> 赞同：0
> 
> 时间：2013-02-06T20:00:45.103
> 
> 标签：version-control, configuration, configuration-management, starteam

我们目前有一个简单的 Star Team 设置，其中包含几个分支或视图，它们似乎在 Star Team 中被引用：

```
--Production
  --Staging
    --Development
    --Trunk 
```

我们希望“共享”或创建更改请求 (CR) 的“引用视图”，该更改请求 (CR) 在所有这些视图中都是可见的，但我们希望在对其进行更改时在所有分支中对其进行更新.

我已经尝试 Ctrl + 将 CR 拖放到各种视图中，但是当我对其进行更改时，它们不会得到更新。就好像它们被视为 CR 的单独副本。我还尝试检查和取消选中每个项目行为的“更改分支”复选框，但这似乎也没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:49:45.147

您是否尝试过“配置”选项卡上“高级|行为”下的“浮动”单选按钮？

乔治

# session - 从 JUnit 测试中使 Tapestry 中的会话无效

> ID：14737691
> 
> 赞同：1
> 
> 时间：2013-02-06T20:00:47.160
> 
> 标签：session, junit, tapestry

我正在开发一个大型复杂的 Tapestry 服务。它通常可以工作，但有时在运行一段时间时，它所在的会话会失效，并且会发送错误。该服务没有任何内容需要会话，但有时它依赖于依赖于“需要”会话的服务的服务。

我想在我的测试中务实地使会话无效，这样我就可以防止回归。理想情况下，我会在不终止生产代码中的会话的情况下执行此操作，这就是我现在测试它的方式。

具体来说，我们通过运行服务器和进行 http 调用以及扩展 TapestryIoCTestCase 来测试服务。我想不出任何干净的方法来使 http 客户端测试中的会话无效。并且为 TapestryIoCTestCase 创建的 Mock 会话不支持失效。

我已经研究过在测试中设置会话超时，但我希望有更直接的东西。

谢谢

e 例如，有人在某个时候想在我们的依赖项之一中设置语言环境

```
java.lang.IllegalStateException: setAttribute: Session [31943F300613D2105C9AF8602397557D] has already been invalidated
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1437)
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1402)
    at org.apache.catalina.session.StandardSessionFacade.setAttribute(StandardSessionFacade.java:156)
    at org.apache.tapestry5.internal.services.SessionImpl.setAttribute(SessionImpl.java:67)
    at org.apache.tapestry5.internal.services.SessionApplicationStatePersistenceStrategy.set(SessionApplicationStatePersistenceStrategy.java:68)
    at $ApplicationStatePersistenceStrategy_13c1cafe292.set($ApplicationStatePersistenceStrategy_13c1cafe292.java)
    at org.apache.tapestry5.internal.services.ApplicationStateManagerImpl$ApplicationStateAdapter.set(ApplicationStateManagerImpl.java:50)
    at org.apache.tapestry5.internal.services.ApplicationStateManagerImpl.set(ApplicationStateManagerImpl.java:138)
    at $ApplicationStateManager_13c1cafe272.set($ApplicationStateManager_13c1cafe272.java) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:02:38.037

我假设您指的`HttpSession`是可以通过调用`HttpSession.invalidate()`. 尽管老实说，您的问题提供的信息太少，无法正确回答。你的设置是什么？你试过什么？你的代码是什么样的？你在嘲笑你的 Servlet 容器吗？ETC...

没有代码的问题很难回答。

# java - 访问另一个类中的变量返回 null

> ID：14737694
> 
> 赞同：4
> 
> 时间：2013-02-06T20:00:56.257
> 
> 标签：java

好的，基本上我有三个课程：

*   主班
*   苹果（两个构造函数）
*   馅饼

在我做的主要课程中：

```
Apple apple = new Apple(String one, String two); 
```

然后 Apple 类将它们全局设置：

```
public Apple()
{
    //empty constructor
}
public Apple(String one, String two)
{
    this.one = one;
    this.two = two;
} 
```

然后在 Pie 课上我做：

```
Apple apple = new Apple(); 
```

然后，如果我尝试从 Pie 类访问变量“一”或“二”，它们将返回 null。有人能帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T20:02:09.187

您正在创建*两个不同的对象*。如果您希望所有 Apple 对象具有相同的参数，请将它们声明为`static`. 否则行为是正确的。

更具体地说，`apple`您在主类中创建的 将在其参数中具有所需的值。第二个`apple`，即在`Pie`类中创建（它是一个*不同的对象*，即Apple 类的另一个实例），因为它是在没有任何参数的情况下构造的，所以将调用*默认构造函数*（即），并且值将返回null。`public Apple()`

`static`要查看 a和变量之间的区别，`non-static`请执行以下操作：

```
class Apple {
    int var;
}

Apple apple1 = new Apple();
apple1.var = 10;
Apple apple2 = new Apple();
apple2.var = 5;
System.out.println(apple1.var+"\t"+apple2.var); 
```

印刷：

```
10     5 
```

但如果是，`static`你会得到

```
class Apple {
    static int var;
}

Apple apple1 = new Apple();
apple1.var = 10;
Apple apple2 = new Apple();
apple2.var = 5;
System.out.println(apple1.var+"\t"+apple2.var); 
```

输出将是：

```
5     5 
```

有关何时使用*静态*的更多信息，请查看：

[Java：何时使用静态方法](https://stackoverflow.com/questions/2671496/java-when-to-use-static-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:04:41.190

对于默认构造函数，要让一个或两个不为空，您需要使用一些默认的非空值设置苹果实例：

```
class Apple {
    public Apple()
    {
        this("1", "2");
    }
    public Apple(String one, String two)
    {
        this.one = one;
        this.two = two;
    }
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:05:04.037

因此`Apple`，属于`Pie`该类的*Apple*与您在其中创建的Apple 不同`Main`。因此，当您调用空构造函数`one`并且`two`未在 pie 中设置时`Apple`，它们在 main 中`Apple`。如果您真的希望它们相同，请尝试`Apple`从 Pie 中引用 main ，或设为`Apple`静态。

# smalltalk - 是否可以在没有 .changes 和 .sources 文件的情况下部署 pharo 图像

> ID：14737695
> 
> 赞同：10
> 
> 时间：2013-02-06T20:00:56.893
> 
> 标签：smalltalk, pharo

我已经构建了一个我想提供给我的客户的 pharo 应用程序。该应用程序基于海边，将无头运行。为此，我不需要 .source 和 .changes 文件。我想在分发存档中节省一些空间，因此我想跳过这些文件。

目前在我看来，如果这些文件丢失，pharo 无论如何都会抱怨。是否有机会在没有 .sources 和 .changes 文件的情况下启动图像？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T09:08:24.637

来自斯文·范·卡肯伯格：

```
SmalltalkImage
        checkSourcesFileAvailability: false;
        checkChangesFileAvailability: false. 
```

然后保存图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:06:12.320

是的，它应该运行得很好。它应该只在 GUI 中显示一条错误消息，但主线程应该继续运行，并且由于您正在无头运行（我对 btw 有了更好的体验`-nodisplay`），您的客户将无法看到该消息。

# vim - Cx Cs 序列后 Vim 无响应

> ID：14737703
> 
> 赞同：36
> 
> 时间：2013-02-06T20:01:28.637
> 
> 标签：vim, editor

我有时用vim快速编辑一个文本文件，我经常错误地输入Emacs的Cx Cs序列来保存它，之后我的vim`^X mode (^]^D^E^F^I^K^L^N^O^Ps^U^V^Y)`在状态行读取变得无响应。有没有办法让 vim 再次响应，因为它真的很烦人不得不杀死终端然后重新开始？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-06T20:03:45.483

尝试键入`^Q`.

`^S`并且`^Q`是 tty 设置中的默认“停止”和“开始”字符。

（vim*应该*操作 tty 设置，因此 control-S 不会停止输出，但我见过没有停止输出的系统。是的，这很烦人。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T20:10:00.440

这是一个古老的 Unix 主义，它可以让您停止程序的输出`^S`并使用 重新启动它`^Q`，从早在屏幕更新缓慢以至于这样的东西很有用的那一天开始。`less`将其视为or的极其古老的版本`more`。

您可以键入`^Q`以再次启动程序输出，或者通过将其添加到您的以下来关闭这个现在几乎无用的机制`~/.bashrc`：

```
# Are we on a terminal?
if [ -t 0 ];
then
    stty sane
    stty stop ''
    stty start ''
    stty werase ''
fi 
```

# c - 使用管道、scanf、write 转换浮点流的速度低

> ID：14737704
> 
> 赞同：0
> 
> 时间：2013-02-06T20:01:30.823
> 
> 标签：c, stream, binary

我正在尝试将持续的数据流（非常大）保存到二进制文件中。数据流是用生成的

```
find . -name "(pattern)" | xargs -L1 awk '{(smth)}' | ./translater 
```

“转换器”是一个**C**代码，用于从第二个管道恢复数据流。

```
#include <stdio.h>
#include <stdlib.h>

int main() {
    float buffer;
    FILE *stream;

    stream = fopen("output.bin", "wb");
    while (scanf("%f", &buffer)==1) {
        fwrite(&buffer, 1, sizeof(float), stream);
    }
    fclose(stream);
    return (0);
} 
```

这些组合效果很好，但生成 2GB 二进制文件需要很长时间（>3 小时）。为了加速它，我有什么可以改进的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:35:30.330

您正在执行`awk`近 4,000,000 次。在我的机器上执行 1000 次大约需要 5 秒`awk`，即使`awk`什么都不做。你可以在 shell 中这样计时：

```
time for ((i = 0; i < 1000; i++)); do gawk 1 < /dev/null; done 
```

这意味着`awk`仅针对您的问题的初始化时间将花费大约`4000 * 5 / 60 / 60 = 5.5`数小时，甚至不做任何工作。

尝试

```
find . -name "(pattern)" | xargs cat | awk '{print $2}' | ./translater 
```

只执行一个`awk`进程。

如果这仍然很慢，请尝试单独为时间线的每个部分计时——`find`运行需要多长时间？多久`cat`到`/dev/null`？跑多长时间`awk`？

`fwrite`通常是缓冲的，因此您的翻译程序不应该是问题。

# mysql - 两表连接索引优化

> ID：14737705
> 
> 赞同：0
> 
> 时间：2013-02-06T20:01:34.283
> 
> 标签：mysql, optimization

我有以下表格：

```
items (item_id (PRIMARY), item_name)
activity (activity_id (PRIMARY), item_id (INT), user_id (INT), lat (FLOAT), lng (FLOAT), created_at) 
```

我想做以下查询：

```
SELECT
  i.item_id,
  i.item_name,
  count(distint a.user_id) as total_count
FROM activity as a
  INNER JOIN item as i
    on a.item_id = i.item_id
WHERE (a.lat BETWEEN XXXXXXX
       and XXXXXXX
       and a.lng BETWEEN XXXXXXX
       and XXXXXXX)
    and created_at >= DATE_SUB(NOW(), INTERVAL 5 DAY)
GROUP by a.bid
ORDER BY RAND()
LIMIT 5 
```

这是对 3-5 百万记录表的繁重查询，即使我有活动索引：

```
item_index (item_id, lat, lng, created_at) 
```

这不会在 EXPLAIN 中使用，它只是默认为“item_id”。我想我要问的是 - 需要添加哪些索引才能使此查询快速运行，或者我可以进行优化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:09:02.673

尝试这样的派生子查询

```
SELECT
  i.item_id,
  i.item_name,
  count(distint a.user_id) as total_count
FROM activity as a
  INNER JOIN (select
        item_id,
        item_name
          from item
          where a.lat BETWEEN XXXXXXX
          and XXXXXXX
          and a.lng BETWEEN XXXXXXX
          and XXXXXXX) as i
    on a.item_id = i.item_id
WHERE created_at >= DATE_SUB(NOW(), INTERVAL 5 DAY)
GROUP by a.bid
ORDER BY RAND()
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T01:08:35.890

索引可用于`where`子句、`on`子句或两者。

在`where`子句中，列 A、B 和 C（按此顺序）的索引可用于以下情况：

*   A 上的等式 eg ( `A = a`)
*   A 上的有序比较（例如`A < a`或`A > a`）
*   A 和 B 相等（例如`A = a and B = b`）
*   A 上的相等，B 上的有序比较（例如`A = a and B < b`）
*   A 和 B 和 C 上的平等
*   A 和 B 的相等性和 C 的有序比较

您的`where`子句具有相等性，然后是两个有序比较。我建议将`a.lng`a更改`between`为 an`in`并将索引更改为`item_index (item_id, lng, lat, created_at)`.

您还应该删除索引，`item_index(item_id)`因为它不需要。这个新索引可以在任何地方使用。

由于`order by rand()`，此查询必须在返回任何行之前生成整个结果集。真正提高性能的唯一方法是希望`where`条件具有高度选择性，因此它们会减小生成集的大小。

`activity`如果您可以构造查询以从or中获取 5 行`item`然后执行连接，您可能会更好。

# git - 具有服务器和客户端的项目的 Git 存储库设置

> ID：14737706
> 
> 赞同：13
> 
> 时间：2013-02-06T20:01:44.397
> 
> 标签：git, client-server

我是一个正在启动的项目的一部分，该项目将具有一个客户端可执行文件和一个服务器可执行文件。我们正在使用 git 来帮助我们的团队更新代码，这对于我们许多人来说是第一次使用 git（这个项目是针对一个班级的）。我开始为我的项目设置 git 存储库以供使用，但我不确定拥有客户端和服务器代码的最佳设计是什么。

那么问题来了，应该如何设置存储库？两者之间不会有太多的代码共享，除了网络。然而，我们将两者之间的网络视为最重要的方面，并希望保持两者使用相同的网络概念。我已经对顶部进行了一些研究，我看到了可能性，两个独立的存储库，我们必须确保两个代码相互兼容，还是我们使用单个存储库？

对于这种相当新的方法，我感到很抱歉，我已经阅读了“Git Pro”，但还没有太多使用 git 与多人合作的项目的经验。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:15:41.633

如果客户端和服务器彼此相当独立，那么它们很适合放在自己的 git 存储库中。这就是**[组件方法](https://stackoverflow.com/questions/769786/vendor-branches-in-git/769941#769941)**。

你可以有三个回购：

*   客户
*   服务器
*   网络（通用模块）

Git 中的[submobules](http://git-scm.com/book/en/Git-Tools-Submodules)可以很好地记录您在系统中一起使用的确切 SHA1。
所以你可以定义2个父母回购：

*   客户端应用

    *   客户
    *   联网
*   服务器应用

    *   服务器
    *   联网

这个想法是能够说明客户端和服务器是否使用相同或不同版本的网络。

对于一个类项目来说，所有设置可能是一种过度杀伤，但可以说明系统方法（一个巨大的 repo 中的所有内容）和组件方法之间的区别。

在不同的 git repo 中分离允许独立的标记和分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:10:00.993

您应该使用单个存储库，因为它可以包含多个项目/解决方案/构建可执行文件的任何其他内容。

一般来说，我会按照您希望在本地组织它的方式来组织它。没有理由偏离对你有用的方法来适应 git。

我建议建立一个各方都可以访问的[github存储库。](https://github.com/)

# php - 使用 codeigniter 的数据库错误 #1054

> ID：14737708
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:02.490
> 
> 标签：php, mysql, codeigniter

我认为这可能是本地服务器问题，因为代码没有问题。如果有人能看一看，将不胜感激！！

**控制器：**

```
<?php
class Form1 extends CI_Controller {

    function index() {
        $this->load->view('myform1');
    }

    function save(){
        $this->load->model('form1_model');
        if($this->input->post('submit')){
            $this->form1_model->process();                
        }
        redirect('formsuccess1');
    }
}
?> 
```

**模型：**

```
<?php
    class Form1_model extends CI_Model {

        function process(){

             $password = $this->input->post('pass_word');
             $passconf = $this->input->post('password_confirm');
             $email = $this->input->post('e_mail');
             $data = array(
                 'password'=>$password,
                 'passconf'=>$passconf,
                 'email'=>$email 
             );

             $this->db->insert('formdata',$data); 
        }
    }
?> 
```

**看法：**

```
<html>
    <head>
        <title>My Form</title>
    </head>

    <body>
        <?php echo form_open('form1/save', array('name' => 'myform')); ?>
        <h5>Password</h5>
        <?php echo form_error('password'); ?>
        <input type="text" name="password"/>
        <h5>Password Confirm</h5>
        <?php echo form_error('passconf'); ?>
        <input type="text" name="passconf"/>
        <h5>Email Address</h5>
        <?php echo form_error('email'); ?>
        <input type="text" name="email"/>
        <div><input type="submit" name="submit" value="Submittt" /></div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:12:38.190

正如@Joachim 在上面的评论中提到的那样 - 您的帖子变量名称 ( `$this->input->post('variable_name');`) 需要与您的表单输入元素名称属性相同。

而不是`$this->input->post('pass_word');`你应该做的`$this->input->post('password');`。

目前，您正试图将一组空值插入数据库。

此外，可能与问题无关，但您不应该直接在模型中访问发布数据，这应该存储在控制器的变量中并作为模型`process()`函数的参数传递。

这是一个更新的控制器和模型：

```
<?php
class Form1 extends CI_Controller {

    function index() {
        $this->load->view('myform1');
    }

    function save(){

        // Get your post data here
        $password = $this->input->post('password');
        $passconf = $this->input->post('passconf');
        $email = $this->input->post('email');

        $this->load->model('form1_model');
        if($this->input->post('submit')){

            // Pass the data to your model
            $this->form1_model->process($password, $passconf, $email);                
        }
        redirect('formsuccess1');
    }
}
?> 
```

模型：

```
<?php
class Form1_model extends CI_Model {

    function process($password, $passconf, $email){

        $data = array(
            'password'=>$password,
            'passconf'=>$passconf,
            'email'=>$email 
        );

        $this->db->insert('formdata',$data); 
    }
}
?> 
```

# java - 休眠查询到 postgres

> ID：14737710
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:13.347
> 
> 标签：java, hibernate, jsp, tomcat

我的 VPS 主机上有 jsp webapp，tomcat 7 作为服务器。我正在使用 Hibernate 3 和 PostgreSQL。我的类 DBManager 中的所有方法（负责数据库服务、连接、查询）都使用几乎相同的结构：

```
 Session session = sessionFactory.openSession();
    session.beginTransaction();
    =======
    HERE HQL QUERY/session.get/update/save etc are executed
    =======
    session.getTransaction().commit();
    session.close(); 
```

问题是我的 VPS 一段时间后（使用我的 webapp）显示了许多空闲的 postgres 进程，这会导致服务器过载，而前 VPS 会杀死 Java 或拒绝连接到数据库。我能做些什么来消除这个问题？这是由我的代码或其他原因引起的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:25:51.210

您需要放置`session.close()`在`try/finally`块中：

```
try {
  session.beginTransaction();
  =======
  HERE HQL QUERY/session.get/update/save etc are executed
  =======
  session.getTransaction().commit();
} catch (SQLException sqle) {
  // handle the exception, e.g. session.getTransaction().rollback();
} finally {
  session.close(); // this will require another try/catch
} 
```

如果您的代码中某处发生异常，则会话不会关闭并泄漏资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:36:41.470

问题解决了。我做错的是在类的每个实例中创建新工厂。现在我到处都添加了静态引用，它工作得很好。

# php - 使用php变量和css根据事件和sql数据改变背景颜色

> ID：14737712
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:19.003
> 
> 标签：php, html, sql, css

希望这是有道理的，我希望能画出清晰的画面。

```
<?php $rx_event_color = $rx_image_color = '#FF0000';
if ($a['rx_event_exists'] == 1) { $rx_event_color = '#00FF00'; }

if ($a['rx_scanned'] == 1) { $rx_image_color = '#00FF00'; }
else if ($a['rx_scanned'] > 1) { $rx_image_color = '#FFFF00'; }
?> 
```

我不希望整个背景 td 改变颜色，只改变基于事件的 td 内的文本（sql 中的数据）

```
if ($a['rx_event_exists'] == 0)
    {
    echo "<tr><td style='background:$rx_event_color'><a href='" 
                    . matry::here_to('new', array('tfilt'=>'WR', 'pfilt'=>$patient->code))
                    . "'>**Rx Event Not Created**</a></td></tr>";
    } 
```

我试图将背景更改为颜色，并尝试将其添加到 div 中......我认为它应该比原来更容易......这就是我在这里问的原因。提前感谢我的朋友们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:07:24.240

您需要将样式属性移动到锚标记，因为链接的样式控制文本的颜色，而不是`td`. 根据您的目的，颜色和背景颜色可以在这里互换使用。

```
<td><a href='...' style='color:$rx_event_color'>...</a></td> 
```

或者，您可以使用类：

```
.notfound a { color: red }

<td class="notfound"><a href="...">...</a></td> 
```

# php - 如何计算和显示数据库中具有相同日期的行数（PHP）

> ID：14737713
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:19.950
> 
> 标签：php, mysql

我有一个包含三个不同列的数据库：域、日期、长度（按此顺序）。我要做的是在不知道数据库中的结束日期的情况下计算数据库中每个唯一日期的出现次数。开始日期始终是今天的日期。

到目前为止，我只能计算特定日期的出现次数，这需要我输入确切的日期。

我希望 PHP 脚本做的是从今天的日期开始并输出提到该日期的次数（或该日期的行数），然后继续直到它到达一个没有值的日期（你可以称之为结束日期）。

我对我还没有找到解决方案感到惊讶和沮丧。这似乎是一件非常容易的事情。

对于任何提示、提示或解决方案，我都会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:05:30.167

使用`GROUP`and`WHERE`子句的组合。

```
SELECT COUNT(*) AS `occurrences`, `date` FROM `table` WHERE `date` >= CURDATE() GROUP BY `date` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:06:29.200

使用`group by`和`order by`

```
SELECT dateCol, Count(*) FROM myTable 
 WHERE dateCol >= date(now())
 GROUP BY dateCol
 ORDER BY dateCol ASC 
```

编辑：SQLFiddle 与您的示例：[http ://www.sqlfiddle.com/#!2/5e86b/2](http://www.sqlfiddle.com/#!2/5e86b/2)

# parse-platform - 通过 Parse 和 Javascript 登录 Facebook

> ID：14737715
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:21.793
> 
> 标签：parse-platform, facebook-javascript-sdk

我希望在用户单击链接后显示 facebook 登录/注册框，但它不起作用。Parse 应该用它自己的 init 函数加载 FB SDK，并应该用它自己的另一个函数显示登录框。我直接从他们的文档中复制并粘贴了该代码，所以我认为这不是语法问题。我也尝试过在不同的地方初始化 Parse SDK，但这似乎并不重要。我知道 jquery 功能正在工作，因为我已经使用警报功能对其进行了测试，当我单击目标链接时它会触发，但不会显示登录框。
我需要解决什么问题？

>

```
<body>
     <div id="fb-root"></div>
<script>

    // Initialize the Parse SDK!

           Parse.initialize("***********","***********");

window.fbAsyncInit = function() {

  //initialize Facebook SDK via Parse

      Parse.FacebookUtils.init({

      appId      : '***********', // App ID from the App DashboardD
      channelUrl : '//http://spilot.koding.com/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

     // Additional initialization code such as adding Event Listeners goes here
        // use Parse SDK to show Facebook login/registration box after user clicks link

        $("a").click(function(){
                      Parse.FacebookUtils.logIn(null, {
                  success: function(user) {
                    if (!user.existed()) {
                      alert("User signed up and logged in through Facebook!");
                    } else {
                      alert("User logged in through Facebook!");
                    }
                  },
                  error: function(user, error) {
                    alert("User cancelled the Facebook login or did not fully authorize.");
                  }
                });
        });

// Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might
  // contain some type checks that are overly strict.
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script>

       <div id="header"></div>

     <div id="findScene"><a href=""><h1>Find</h1></a></div>
     <div id="startScene"><a href=""><h1>Host</h1></a></div>

     <div id="footer"></div>

    </body>
 > 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-11T10:40:14.063

```
<script type="text/javascript">     
// Initialize the Parse object first.
Parse.initialize("XXXXXXXXXX", "YYYYYYYYYYYYY");

window.fbAsyncInit = function() {
    Parse.FacebookUtils.init({
        appId      : 'ZZZZZZZZZZZZZZZ', 
        status     : true, 
        cookie     : true, 
        xfbml      : true
    });
    Parse.FacebookUtils.logIn(null, {
        success: function(user) {
            if (!user.existed()) {
                alert("User signed up and logged in through Facebook!");
            } else {
                alert("User logged in through Facebook!");
            }
        },
        error: function(user, error) {
            alert("User cancelled the Facebook login or did not fully authorize.");
        }
    });
};

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));  </script> 
```

# javascript - 将 AJAX 调用生成的数据用于 OnClick 事件

> ID：14737716
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:27.370
> 
> 标签：javascript, jquery, ajax

我有一个 Web 应用程序，我想在文档准备好执行 javascript 时从 API 获取一些数据。我想将此数据存储在一个对象中以供以后访问。当用户单击页面上的某个链接时，我将需要访问此对象。

我想知道实现这一目标的最安全/最被接受的模式是什么，因为它涉及要监听的事件（AJAX 请求的成功和以后可能的点击）。如果我不需要的话，我真的不想将我的所有代码都包含在 AJAX 请求中，但我也不想冒用户在 AJAX 请求完成之前点击的风险（这是一个相当小的API 调用，但仍然）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:04:35.120

延迟对象救援！

```
(function($){ // this prevents polluting the global scope
    var request = $.ajax({...});
    //... later on...
    $(someelement).on("click",function(){
        request.done(function(data){
            console.log(data);
        });
    });
})(jQuery); 
```

# ruby-on-rails - 如何让 RSpec 测试子目录中的控制器？

> ID：14737717
> 
> 赞同：3
> 
> 时间：2013-02-06T20:02:35.233
> 
> 标签：ruby-on-rails, rspec

我有一些控制器位于控制器文件夹的子域中。

例如，我有一个控制器`app/controllers/api/v1/offers_controller.rb`，看起来像这样：

```
class Api::V1::OffersController < ApplicationController
  respond_to :json

  def index
   ...some code here
  end
end 
```

我尝试在其中放置一个`spec/controllers/api/v1/offers_controller.rb`如下所示的控制器：

需要'spec_helper'

```
descripe Api::V1::OffersController do
  describe "GET 'index'" do
    it "returns http success" do
      get 'index'
      response.should be_success
    end
  end
end 
```

但是，当我运行时`rspec spec`，这个测试根本不会运行。我也试过把它放在`spec/controllers`名为 api_v1_offers_controller.rb 的目录下，测试仍然没有运行。

如何为这些类型的控制器编写 RSpec 测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:45:41.700

实际上，我如何命名文件似乎是一个错误。似乎所有 RSpec 测试都需要结束它`_spec`

# ios - iOS：自动布局与 autoresizingMask - 调整整个视图的大小以填充？

> ID：14737718
> 
> 赞同：6
> 
> 时间：2013-02-06T20:02:36.277
> 
> 标签：ios, interface-builder, xib, autolayout

我有一个使用自动布局构建的故事板。在该故事板中，我在多个位置嵌入了一个`UIViewController`子类 ( `ButtonGridViewController`)，每个位置的大小都不同。 `ButtonGridViewController`的视图在 xib 中定义。

我需要的是让整个`ButtonGridViewController`视图简单地缩放以填充我嵌入的视图。使用旧的 struts-and-springs 方法，这很简单——只需将所有子视图设置为调整大小在两个方向上，瞧，小菜一碟。

我如何使用约束来完成同样的事情？对于它的价值，xib 只包含一个主视图，它是矩形的，并且有 4 个子视图 - 每个子视图 - 一个按钮 - 排列在 2x2 网格中。我希望包括按钮和间距在内的所有内容都可以缩放和/或拉伸以填充要进入的视图。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T01:09:56.683

要使用约束完成同样的事情，您需要将超级视图的前导、尾随、顶部和底部空间设置为 0。见下文：

```
//load the ButtonGridViewController from a xib
[[NSBundle mainBundle] loadNibNamed:@"..." owner:self options:nil];

//get the view add it
[self.view addSubView:self.myGridView];

//turn off springs and struts
[self.view setTranslatesAutoresizingMaskIntoConstraints:NO];

//add constraints to fill parent view
NSArray *arr;

//horizontal constraints
arr = [NSLayoutConstraint constraintsWithVisualFormat:@"|[vw]|"
                                                options:0
                                                metrics:nil
                                              views:@{@"vw":self.myGridView}];
[self.view addConstraints:arr];

//vertical constraints
arr = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[vw]|"
                                                options:0
                                                metrics:nil
                                                  views:@{@"vw":self.myGridView}];
[self.view addConstraints:arr]; 
```

# xml - 从 SOAPClient 响应解析命名空间

> ID：14737719
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:36.970
> 
> 标签：xml, soap, xml-namespaces, soap-client

好的，所以我让 SOAPClient 打电话。如果我使用 __getLastResponse() 我会在我的 XML 中得到这样的一行：

```
<Discount xsi:type="ProgressivePromotion" from="2013-05-05T00:00:00" to="2013-05-14T00:00:00" type="Percent" value="20" name="Special Deal"/> 
```

但是，我的 SOAPClient 类中的函数返回一个对象。

PHP类中调用的代码是：

```
function SearchHotels($parameters ){
$funcRet = null;
try {
    $funcRet = $this->client->SearchHotels($parameters);
} catch ( Exception $e ) {
    echo "(SearchHotels) SOAP Error:\n-------------------------------------\n" . $e->getMessage () . "\n\n";
    echo "(SearchHotels) Request:\n-------------------------------------\n" . $this->client->__getLastRequest() . "\n\n";
    echo "(SearchHotels) Response:\n-------------------------------------\n" . $this->client->__getLastResponse() . "\n\n";
}
return $funcRet; 
} 
```

当我使用返回的对象时，我可以从 Discount 元素访问以下属性：

类型：ProgressivePromotion
从：2013-05-05T00:00:00
到：2013-05-14T00:00:00
值：20
名称：特价

但我无法访问 type="Percent"

似乎 SOAPClient 忽略了 xsi:type 中的 xsi 命名空间，只是将该属性存储为*type*。

那么如何访问 xsi:type AND type 以便我可以判断我的折扣是百分比还是金额或任何其他类型？

顺便说一句，在我的 SOAP 响应的顶部，我没有看到任何声明 xsi 是什么。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <SearchHotelsResponse xmlns="http://tourico.com/webservices/hotelv3">
            <SearchHotelsResult>
                <Info xmlns="http://schemas.tourico.com/webservices/hotelv3" version="9.71" culture="en-US" serverTime="2013-02-06T14:49:58.3500117-05:00"/>
                   <HotelList xmlns="http://schemas.tourico.com/webservices/hotelv3"> 
```

**编辑**

如果我 var_dump 返回的对象，我得到

```
stdClass Object
(
[SearchHotelsResult] => stdClass Object
    (
        [Info] => stdClass Object
            (
                [version] => 9.71
                [culture] => en-US
                [serverTime] => 2013-02-06T15:17:59.8445748-05:00
            )

        [HotelList] => stdClass Object
            (
                [Hotel] => Array
                    (
                        [0] => stdClass Object
                            [RoomTypes] => stdClass Object
                                    (
                                        [RoomType] => Array
                                            (
                                                [0] => stdClass Object
                                                    (
                                                       [Discount] => stdClass Object
                                                            (
                                                                [from] => 2013-05-05T00:00:00
                                                                [to] => 2013-05-14T00:00:00
                                                                [type] => ProgressivePromotion
                                                                [value] => 20
                                                                [name] => Special Deal
                                                            ) 
```

看看我是如何丢失 type="Amount" 的？

我不能通过这样做来调用折扣

```
echo $result->SearchHotelsResult->HotelList->Hotel[0]->RoomTypes->RoomType[0]->Discounts->type; 
```

因为我得到

```
Undefined property: stdClass::$Discounts  Notice: Trying to get property of non-object 
```

所以我将整个对象转换成一个巨大的多维数组并以这种方式访问​​事物。无论如何，*type="Amount"*没有被提取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:23:11.380

我用这种方式解决了这个问题。

```
<?php
class fixSoapClient extends SoapClient{
    function __doRequest($request, $location, $action, $version, $one_way = 0) {
        $result = parent::__doRequest($request, $location, $action, $version);
        $str = preg_replace('#<Discount xsi:type="ProgressivePromotion"(.+)type="(.+)"(.+)name="(.+)"/>#isU', 
                '<Discount xsi:type="ProgressivePromotion"$1type="wath ever"$3name="$2"/>', $result);
        return $str;
    }   
} 
```

您将在名称属性中找到折扣类型。所以`SoapClient`你必须实例化而不是实例化`fixSoapClient`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T00:36:06.493

似乎您正在使用可识别名称空间的 XML 解析器解析您的响应，但未打开解析器的名称空间支持。这导致了两个规则的冲突。

1.  在解析带有名称空间的 XML 文档时，所有元素和属性都使用其扩展名称来引用。扩展名称由命名空间 URI 和元素/属性的本地名称组成。如果解析器不知道命名空间，则名称的 URI 部分将丢失。因此，如果没有打开命名空间支持，一些支持命名空间的解析器也会删除命名空间前缀。
2.  一个元素不允许包含两个具有相同（扩展）名称的属性。在这种情况下，其他属性之一将丢失。通常，命名空间感知 XML 解析器会将这两个`type`属性视为`{http://www.w3.org/2001/XMLSchema-instance}type`和`type`（使用 James Clark 表示法）。非命名空间感知解析器应返回属性名称`xsi:type`和`type`. 在这些情况下，没有名称冲突，一切都应该正常。

如果您的解析器知道冒号`:`用作命名空间前缀定界符，但解析器没有使用命名空间并因此删除定界符和命名空间前缀，则会出现问题。然后，这两个属性都将获得名称`type`，并且由于属性名称唯一性规则，其中一个会丢失/覆盖。

解决方案：为您的解析器设置命名空间支持或切换到另一个功能更强大的解析器。如果您使用有关如何解析 XML 文件的信息更新您的问题，希望有人可以给出更具体的答案。

# android - 线性布局权重

> ID：14737724
> 
> 赞同：1
> 
> 时间：2013-02-06T20:02:55.403
> 
> 标签：android, android-layout, android-linearlayout

我有两个具有相同宽度的线性布局 - 一个有两个孩子，一个有三个。我试图让最后两个孩子的宽度相同，但我无法理解为什么 Android 会这样。我终于用以下权重让它看起来像我想要的样子：

![重量](../Images/1a073cf628b761206f9c5770ffa6d115.png)

谁能向我解释为什么会这样？

我试着做一些简单的数学来找出原因。我猜这是重量的总和，减去孩子的重量，除以重量的总和，乘以父母的宽度。所以：

```
sum = 1 + 6
((sum - 6) / sum) * W = 14.3% * W 
```

我为第二行尝试了相同的算法，但它完全关闭了：

```
sum = 1 + 1 + 1.5
((sum - 1.5) / sum) * W = 57.1% * W 
```

## 更新

仅当子宽度设置为 match_parent 时，上述情况才成立。将宽度设置为 0 或 0dp，实际上表现如预期 - 更大的权重会导致为孩子分配更多的空间。该算法现在更有意义，并且对两行都按预期工作。

```
sum = 1 + 6
(1 / sum) * W = 14.3% * W 
```

具有子宽度的权重的前一种行为是否按设计设置为 match_parent？如果是这样，计算孩子宽度的近似算法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:18:02.710

第一：根据您的布局外观，您似乎想要使用 GridLayout 而不是两个 LinearLayout。

回到你的问题：在你的情况下，不要将我们的 layout_width 设置为 wrap_content （尤其不是 match_parent！）。将 layout_width 设置为 0dp 并让 layout_weight 属性分配可用的水平空间。

layout_weight 属性分配/添加**额外**的空间到指定的 layout_width（或 layout_height 用于垂直方向的 LinearLayouts）。如果您只希望 layout_weight 对间距做出贡献，请将 layout_width 设置为 0dp（对于垂直方向的 LinearLayout，layout_height 设置为 0dp）。

首先尝试一下，看看这是否更符合您的期望和期望。

试试这个例子（网格比例为 3:3:1）：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FF0000FF" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="6"
        android:background="#FFFFFFFF"
        android:text="TextView" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFFFF"
        android:text="TextView" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="3dp"
    android:background="#FF0000FF" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:background="#FFFFFFFF"
        android:text="TextView" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:background="#FFFFFFFF"
        android:text="TextView" />

<TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFFFF"
        android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:16:32.250

您可以在 XML 中为您的第一个布局指定`weightSum`属性。然后你的前 2 个会得到大约 0.9 和 0.1 的权重（比如 90% 和 10%）`LinearLayout``1``TextViews`

同样的事情需要应用于第二个`LinearLayout`。就像是：

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="1"
        android:background="#FF0000FF" >

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".9"
            android:layout_margin="3dp"
            android:background="#FFFFFFFF"
            android:text="TextView" />

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".1"
            android:layout_margin="3dp"
            android:background="#FFFFFFFF"
            android:text="TextView" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="3dp"
        android:weightSum="1"
        android:background="#FF0000FF" >

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_margin="3dp"
            android:layout_weight=".45"
            android:background="#FFFFFFFF"
            android:text="TextView" />

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".45"
            android:layout_margin="3dp"
            android:background="#FFFFFFFF"
            android:text="TextView" />

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight=".1"
            android:layout_margin="3dp"
            android:background="#FFFFFFFF"
            android:text="TextView" />
    </LinearLayout> 
```

顺便说一句，不要忘记将您的`width`属性设置为`0dip`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T20:22:14.770

根据您的图片 - 重量不正确。例如，第一个“行”：您设置了第一个 TextView 的权重为“1”，第二个权重为“6”——这意味着第二个 TextView 将拥有更多空间——所有布局宽度的 6/7，而第一个 TextView 只有 1/7。为了简化计算，将总宽度想象为 100(%)，并根据您想要给它们的比例在视图之间划分它们。

# python - TypeError：无法连接“str”和“NoneType”对象

> ID：14737725
> 
> 赞同：0
> 
> 时间：2013-02-06T20:02:59.287
> 
> 标签：python, linux

```
save = "/root/foo/"
PERF_PATH="/root/foobar/" 
```

所以，最初我有变量`save`并且`perf_path`在`cmd`. 但是现在，我想用它来代替它以增强可读性。

我想创建一个文件夹，变量`app[a]`最终将被存储到该文件夹​​中。

```
direc = os.mkdir(save + i + "-"+ j +"-" + k + "-" +l) 
```

创建目录似乎没有问题。但是将非字符串值变量加入字符串似乎是一个问题。

```
cmd = "taskset -c %s" + PERF_PATH + "perf2 stat -t %s e r4008387e1 -f -o" +save + direc + "%s.csv &" % (cpus_list[a],fpid[a],apps[a])
pro= subprocess.Popen(cmd,shell=True, stdout=subprocess.PIPE, preexec_fn=os.setsid) 
```

`TypeError: cannot concatenate 'str' and 'NoneType' objects`

```
cmd = "taskset -c %s" + str(PERF_PATH) + "perf2 stat -t %s e r4008387e1 -f -o" +str(save) + str(direc) + "%s.csv &" % (cpus_list[a],fpid[a],apps[a]) 
```

这也没有多大帮助。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:04:46.613

`os.mkdir()`不返回任何内容，因此`direc`设置为 None。

改为这样做：

```
direc = save + i + "-"+ j +"-" + k + "-" +l
os.mkdir(direc) 
```

您确实想使用`os.path.join()`字符串格式来构建路径，但它会更容易阅读：

```
save = "/root/foo"
PERF_PATH="/root/foobar"

direc = os.path.join(save, '-'.join((i, j, k, l)))
os.mkdir(direc) 
```

对于`subprocess.Popen()`，为命令和参数传入一个列表而不是字符串，并保留`shell`的默认值`False`，不需要 shell 句柄：

```
cmd = ['taskset', 
    '-c', cpus_list[a], PERF_PATH, 'perf2', 'stat',
    '-t', fpid[a], 'e', 'r4008387e1',
    '-f', '-o', save, 
    os.path.join(direc, "%s.csv" % apps[a])
]

pro = subprocess.Popen(cmd, stdout=subprocess.PIPE, preexec_fn=os.setsid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:06:56.563

os.mkdir 返回无。

尝试将字符串添加到 None 是不行的。如果您想构建不同类型的字符串，请尝试使用格式：

```
s = 'hi there number {no}'.format(no=81) 
```

无论如何，这种方式更具可读性，因此可调试

# iphone - 为什么有这么多方法可以将视图连接到 UIKit 中的事件？

> ID：14737726
> 
> 赞同：2
> 
> 时间：2013-02-06T20:03:08.250
> 
> 标签：iphone, ios, xcode, cocoa, uikit

好吧，这个问题有点修辞。:-) 我知道答案是“因为他们是这样设计的”但仍然......

我正在学习 iOS 开发，发现自己在使小部件（又名 View/UIView）响应事件的所有各种方法上磕磕绊绊。到目前为止，我发现：

*   IBA动作
*   IBOutlet
*   代表们
*   addTarget:action:forControlEvents:
*   手势识别器
*   通知

（……更不用说 Interface Builder 支持其中一些技术，但不是全部，甚至它支持的技术也并不总是有效，或者需要一些自定义编码才能神奇地出现。）

1.  还有其他我想念的吗？

2.  是否有任何合理*的先验*方法来告诉特定小部件使用什么技术？

3.  是否有哪些小部件支持哪些情况的集中列表？还是我必须通过文档、示例代码和猜测的组合来学习？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:11:52.213

该列表中的每一件事都有不同的目的，只要了解 iOS 开发和研究就会让你熟悉它们。例如，IBAction 正在通过 Interface builder 连接到事件，而 IBOutlet 正在连接到 Interface Builder 中的 UI 元素。您的问题的完整答案确实是一个很长的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:15:00.030

在这个答案中。当我发现它们时，我会尝试列出一些规则。（也许我会把它变成一个社区维基。）

*   [Communicating With Objects](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)指南涵盖了出口、委托、数据源、IBActions（又名“目标-动作机制”）和通知（`NSNotificationCenter` *等*）
*   显然，当您将一个控件拖到它上面时（通常是 Touch Up Inside），每个控件都会决定连接什么用户事件`IBAction`，但是如果您打开 Connections Inspector，您可以从一长串事件中进行选择，并将它们中的任何一个连接到您的`IBAction`方法上.
*   `addTarget:action:forControlEvents:`在 上定义`UIControl`，这意味着它适用于按钮和滑块，但不适用于表格或工具栏。

# wordpress - 我应该如何为 SEO 构建我的 WordPress 类别/标签？

> ID：14737727
> 
> 赞同：1
> 
> 时间：2013-02-06T20:03:10.213
> 
> 标签：wordpress, seo

我有一个位于[http://trancefanatic.com](http://trancefanatic.com)的恍惚音乐网站。目前有两类：Trance DJ 和 Trance 歌手。在每个下面是相应的名称。对于标签，我一直在使用“歌词”、“音乐视频”等内容。但是，我也注意到我一直在使用艺术家的名字作为标签，除了将它们作为子类别。

我读过这对 SEO 不利。我不确定在不损失流量的情况下重新构建类别/标签的最佳方法是什么。我的网站基本上提供了恍惚/声乐恍惚音乐，以及歌词。

任何建议都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:25:43.130

首先，为 Wordpress 安装 SEO 插件`Wordpress SEO by Yoast`（我认为最好的）。

其次，您应该选择`noindex, follow`标签或类别（如您所愿），但选择一个以避免[重复内容](http://support.google.com/webmasters/bin/answer.py?hl=en&hlrm=fr&answer=66359)，这对 SEO 不利。

您无需使用此过程重新构建您的网站。

# c++ - std::integral_constant 的否定

> ID：14737728
> 
> 赞同：5
> 
> 时间：2013-02-06T20:03:11.240
> 
> 标签：c++, c++11, template-meta-programming, typetraits, boost-mpl

很抱歉问了这么简单的问题，但我无法轻易找到答案。谷歌对“C++ negation integral_constant”和类似查询没有任何有趣的说法。

在 C++11 中是否有任何特征，`std::true_type`反之亦然`std::false_type`？换句话说，我想要一些更易读的版本

```
std::is_same<my_static_bool, std::false_type> 
```

我当然知道我可以自己写，但如果有的话，我想使用现有的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:10:34.807

没有，因为它本质上是单线的，`<type_traits>`应该尽可能小。

```
template <typename T> using static_not = std::integral_constant<bool, !T::value>; 
```

用法：

```
static_not<my_static_bool> 
```

这是正确的方法，因为标准总是说“`false_type`或派生自此类”，因此您不能依赖等于`std::false_type`. 我通常将其放松为“拥有一个 constexpr 布尔`::value`属性”，因为我不使用标签调度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T20:15:24.340

还有另一种方法：

```
template <typename T>
using static_not = typename std::conditional<
    T::value,
    std::false_type,
    std::true_type
>::type; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:09:15.747

下面的代码使用模板元函数转发（即它继承自`std::integral_constant`一个否定的布尔值，这当然是受到大量使用这种模式的[**Boost.MPL的启发）**](http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/refmanual/not.html)

```
#include <type_traits>

template<typename T>
struct logical_not
:
    std::integral_constant<bool, !T::value>
{};

int main()
{
   typedef logical_not<std::false_type>::type T;
   typedef logical_not<std::true_type>::type F;

   static_assert((std::is_same<T, std::true_type>::value), "");
   static_assert((std::is_same<F, std::false_type>::value), "");   
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/2Btvxh%240)上的输出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T20:08:50.480

类型`true_type`和`false_type`有一个引用自身的嵌套 typedef，因此您可以编写：

```
std::is_same<my_static_bool::type,std::false_type>::value 
```

根据上下文，它可能会更简单，如果您的类型确实是`!my_static_bool{}`，这是`constexpr`有价值的。`true``std::false_type`

# javascript - 使用回车按钮提交无格式“表单”

> ID：14737729
> 
> 赞同：0
> 
> 时间：2013-02-06T20:03:14.280
> 
> 标签：javascript, html, dojo

我们目前正在使用 Dojo Mobile 构建一个应用程序，并且有几个区域我们有输入字段和提交按钮。这些输入字段和提交按钮不在表单中，我们只是使用 onclick 事件来“提交”要在 javascript 中使用的字段中的值。有没有办法让它在我们按下“enter”时，或者在移动应用程序的情况下，当用户在他们的软键盘上按下“search”或“go”时，它会触发那个特定的按钮？我们可能在同一页面上有多个提交按钮。

```
 ...
<div>
    <input dojoType="dijit.form.TextBox" />
    <button dojoType="dijit.form.Button" type="submit">
        Filter
    </button>
<div>
 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:19:20.660

jQuery中的解决方案：

```
//when you a key on an input
$("input").keyup(function (e) {
    //if it is enter
    if (e.keyCode == 13) {
        //look for the next submit button a trigger a click
        $(this).next("button[type='submit']").click();
    }
}); 
```

我不是道场编码员，但文档似乎相当不错：

[http://dojotoolkit.org/documentation/tutorials/1.6/key_events/](http://dojotoolkit.org/documentation/tutorials/1.6/key_events/)

[http://dojotoolkit.org/api/1.6/dojo/keys/ENTER](http://dojotoolkit.org/api/1.6/dojo/keys/ENTER)

请参阅此处获取相关答案：

[在 JavaScript 中输入按键事件](https://stackoverflow.com/questions/905222/enter-key-press-event-in-javascript)

[http://dojo-toolkit.33424.n3.nabble.com/want-enter-key-in-ValidationTextBox-to-submit-the-form-td977303.html](http://dojo-toolkit.33424.n3.nabble.com/want-enter-key-in-ValidationTextBox-to-submit-the-form-td977303.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:19:39.140

将您的相关字段放在表单中。注册一个“onsubmit”事件处理程序并使其与按钮的“onclick”处理程序相同。当您从事件处理程序返回时，您应该返回 false 或调用`event.preventDefault()`. 这将阻止表单被提交（通过 POST）到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:32:52.847

## 覆盖默认表单提交操作

您可以覆盖表单上的默认提交操作。将表单保留在`<form>`标签中在语义上是明智的，即使您想覆盖默认行为并做您想做的事，作为坚强、独立的黑人女性。

***[jsFiddle](http://jsfiddle.net/ChaseMoskal/pnavJ/)***

**HTML：**

```
<form id="myForm">
    <input type="text" />
    <button type="submit">Submit</button>
</form> 
```

**JavaScript：**

```
var myForm = document.getElementById('myForm');
myForm.addEventListener('submit',function(event){
    alert('submit pressed -- do as you please');
    event.preventDefault(); // cancels form submission
}); 
```

//追赶。

# javascript - 这是一个 JavaScript 计数器吗？

> ID：14737730
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:03:15.187
> 
> 标签：javascript, counter

我到处都看到过这种模式，但我不确定它的作用：

```
x.memb = x.memb ? x.memb + 1 : 1; 
```

我认为这是一个柜台，但我不太确定。有人可以解释这是做什么和逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:04:22.420

如果`x.memb`is 已经定义并且 is not `0`，那么它会增加它。在其他情况下，它将其值设置为`1`。

`x.memb`它基本上只是处理未定义情况的增量。

你也可以把它写成

```
x.memb = (x.memb||0) +1; 
```

这可能更惯用，就像`value||defaultValue`javascript 中的常见构造一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:04:51.623

这是一个三元算子做一些计数。

本质上它正在这样做

```
if(x.memb)
   x.memb = xmemb + 1; //increment it
else
   xmemb = 1; //start it off 
```

这只是简写。如果之前的东西`?`是真的，它会返回之前的东西`:`如果它是假的，它会返回之后的东西`:`

请注意，对于与计数无关的各种分叉，这是一种非常方便的机制。在这种情况下就是这样使用的。

# google-webfonts - WebFont monotype 导致白屏 onLoaded

> ID：14737733
> 
> 赞同：0
> 
> 时间：2013-02-06T20:03:44.007
> 
> 标签：google-webfonts

今天我们通过[www.polypod.net](http://www.polypod.net)上网，我们遇到的问题是，当字体加载后，屏幕会完全变白一段时间（1-2 秒），然后绘制网站。加载字体总是一个问题，所以我们将页面的不透明度设为 0，直到我们真正加载了字体，然后平滑淡入。

在生产过程中起作用的东西现在被打破了，我们有点困惑为什么会这样。当我们注释掉 monotype 字体时，我们没有这种行为。

有没有人有这个问题的经验？

提前致谢！

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:51:56.743

我遇到了一个名为“FOUT”的问题，它是“Flash of unstyled texts”的缩写。一定要喜欢互联网，因为它的首字母缩略词几乎不可能找到常见问题。-.-

这是一个链接，以防止我们使用的字体提供程序 [http://www.fonts.com/support/faq/fout](http://www.fonts.com/support/faq/fout)

在这一切之后，仍然出现了一些白屏。加载的脚本将 html 设置为，`visibility: none;`因此我将 html 的可见性更改为`visibility: visible !important;`.

# android - 如何更改活动层次结构？

> ID：14737735
> 
> 赞同：0
> 
> 时间：2013-02-06T20:03:47.990
> 
> 标签：android, eclipse, android-activity

我建立了一个包含许多活动的项目。每次，当我创建新活动时，我都会设置一个层次结构父级。但我决定用动画制作一个活动，这应该是第一个。我试图更改清单文件中的一些信息并将新的一个活动设置为起始活动，但我做错了，所有项目都崩溃了。Ofc，我将继续尝试更改清单文件，但也许我可以使用 Eclipse 工具以更简单的方式做到这一点？

--EDIT-- 我解决了我的问题，这是一个很小的错误。我只是设置了错误的布局，忘记再改变一件事。我还不是这个主题的专家，但也许对于其他读者，我会在这里提供一些如何使用清单文件更改层次结构的信息。如果我在这里犯了任何错误，请随时编辑。

好的，让我们假设我们的项目有一些活动。在 Manifest 文件中，我们可以找到一些关于活动的信息，这些信息在标记之间：. 所以，它可能看起来像：

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.mastermind.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mastermind.StartGameActivity"
            android:label="@string/title_activity_start_game"
            android:parentActivityName="com.example.mastermind.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.mastermind.MainActivity" />
        </activity>
<activity
            android:name="com.example.mastermind.NewActivity"
            android:label="@string/title_new_activity" >
        </activity> 
```

现在我们要更改 MainActivity，它是第一个，并将 NewActivity 设置为第一个。我们只需要更改包含标记的活动名称：

```
<intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter> 
```

为 NewActivity 的名称并设置它的布局，如下所示：

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.mastermind.NewActivity"
            android:label="@string/title_new_activity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.mastermind.StartGameActivity"
            android:label="@string/title_activity_start_game"
            android:parentActivityName="com.example.mastermind.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.mastermind.MainActivity" />
        </activity>
<activity
            android:name="com.example.mastermind.MainActivity"
            android:label="@string/app_name" >
        </activity> 
```

那应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:07:46.010

在清单文件中找到`category.LAUNCHER`：

```
 <activity
        android:name="com.example.StartActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" /><!-- This -->
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.MainActivity"
        android:label="@string/app_name" >
    </activity> 
```

`category.LAUNCHER`声明你的启动`Activity`。

# awk - awk：在file2中打印字符串与字符串file2不匹配

> ID：14737746
> 
> 赞同：1
> 
> 时间：2013-02-06T20:04:19.517
> 
> 标签：awk

我有两个带有逗号分隔值的文件，我想删除 file1 中与文件 2 中的字符串匹配的所有字符串。

```
file1:
soap,cosmetics,june,hello,good

file2:
june,hello

output:
soap,cosmetics,good 
```

我试过这个，但不工作。我不确定我哪里出错了。任何帮助表示赞赏。

```
BEGIN {
    FS=","
}

NR==FNR {
    a[NR]=$0
    next
}

{
    for (j=1;j<=NF;j++) {
        split($0, d, ",")
        if (d[j] in a == 0) {
            line = (line ? line "," : "") d[j]
        }
    }
print line
line = ""
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:11:54.147

这是使用`awk`. 像这样运行：

```
awk -f script.awk file2 file1 
```

内容`script.awk`：

```
BEGIN {
    FS=","
}

FNR==NR {
    for(i=1;i<=NF;i++) {
        a[$i]
    }
    next
}

{
    for(j=1;j<=NF;j++) {
        if (!($j in a)) {
            r = (r ? r FS : "") $j
        }
    }
}

END {
    print r
} 
```

结果：

```
soap,cosmetics,good 
```

或者，这是单线：

```
awk -F, 'FNR==NR { for(i=1;i<=NF;i++) a[$i]; next } { for(j=1;j<=NF;j++) if (!($j in a)) r = (r ? r FS : "") $j } END { print r }' file2 file1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:38:14.323

```
$ gawk -v RS='[,\n]' 'NR==FNR{a[$0];next} !($0 in a){o=o s $0;s=","} END{print o}' file2 file1
soap,cosmetics,good 
```

# objective-c - 防止 Core Data 创建空对象

> ID：14737749
> 
> 赞同：0
> 
> 时间：2013-02-06T20:04:28.850
> 
> 标签：objective-c, uitableview, core-data, ios6, nsmanagedobjectcontext

这是我用来创建新对象的代码。问题是，如果我选择不保存新对象，它会创建一个空的 tableview 单元格。我怎样才能防止这种情况发生？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Add"]) {
        NSLog(@"Setting PersonsTVC as a delegate of PersonDetailTVC");
        StepDetailView *personDetailTVC = segue.destinationViewController;
        personDetailTVC.delegate = self;
        personDetailTVC.title = @"Add New Step";
        NSLog(@"Creating a new person and passing it to PersonDetailTVC");
        Step *newPerson = [NSEntityDescription insertNewObjectForEntityForName:@"Step"
                                                        inManagedObjectContext:self.managedObjectContext];

        personDetailTVC.person = newPerson;
    }
    else {
        NSLog(@"Unidentified Segue Attempted!");
    }
} 
```

到目前为止，我尝试的是在下面插入代码 `personDetailTVC.person = newPerson;`

```
if (newPerson.name == nil) {
    [self.managedObjectContext deleteObject:newPerson];
    [self.managedObjectContext save:nil];

    [self performFetch];
    [self.tableView reloadData];
} 
```

但这不是一个好的解决方案，因为它会使应用程序崩溃，因为 tableview 单元格没有被删除，只有对象会。我认为我可以做的是，如果对象为空，则自动删除第一个 tableview 单元格，但我还没有找到这样做的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:20:53.700

我正在猜测我认为这里发生了什么。如果我的假设是错误的，请更正我的任何假设。

*   你有一个 UITableView
*   这些单元格填充了来自 CoreData 的数据。
*   你正在通过 NSFetchedResultsController 填充它
*   segue 是 PersonDetailVC，它允许用户为新的托管对象输入数据？

发生的事情是当您“插入NewObjectForEntity：”时，会创建一个新的空白托管对象并将其插入核心数据。NSFetchedResultsController 收到更改通知，新单元格被插入 UITableView。NSFetchedResultsController 接受更改，并添加一个空白单元格。

无论您是否保存上下文，它都已经在您的核心数据存储中。“保存”只是确保更改反映在核心数据的持久存储（sqlite 或 plist）中。Core Data 存在于内存中，sqlite 持久化存储只是为了持久化。

解决方案是在用户输入数据之前不要插入核心数据。您不应该在 segue 中插入核心数据。

解决方案： - 在没有创建新对象的情况下转到 PersonDetailVC。- 用户完成输入数据后，用户按“保存”或“完成” - 当从 PersonDetailVC 弹出时，使用填充字段将新 managedObject 插入核心数据。- NSFetchedResultsController 将接受更改并适当地修改 UITableView。

注意：如果您使用的是 NSFetchedResultsController，则不需要 [self.tableview reloadData]。fetchedresultscontroller 在合并所有更改后为您调用它。

# javascript - CakePHP：调用外部 Javascript 函数

> ID：14737750
> 
> 赞同：1
> 
> 时间：2013-02-06T20:04:31.143
> 
> 标签：javascript, html, cakephp-1.3

我有以下代码，如下所示：`http://jsfiddle.net/rBd53/12/`

一个文件中的 HTML/JS 代码：

```
<script type="text/javascript">
    var textBlocks = new Array(
        'Select from the list to change this box',
        'Text block two',
        'Text block three'); 

    function changeText(form) {
        var ind = form.qwer.selectedIndex;
        document.getElementById("display").innerHTML=textBlocks[ind]; 
    }
</script>

<form>
    <select name="qwer" onChange="changeText(this.form);">
        <option value="0">Select</option>
        <option value="1">One</option>
        <option value="2">Two</option>
    </select>
    <br>
    <div id="display">Select from the list to change this box</div> 
</form> 
```

如何更改此代码以使其在 CakePHP 1.3 中正常工作？我在下面创建了一个`test_js.js`文件`app/webroot/js`并将该`<script>...</script>`部分放在那里。我也有`echo $scripts_for_layout;`在`app/views/layouts/default.ctp`.`<head>`

我猜我的元素（.ctp）文件中的东西不正确。出现下拉菜单和下面的文本，但文本不会根据所选选项动态更改。我做了以下。

```
<?php echo $this->Html->script('test_js', array('inline'=>false)); ?>
<form>
<select name="qwer" onChange="changeText(this.form);">
    <option value="0">Select</option>
    <option value="1">One</option>
    <option value="2">Two</option>
</select>
<br>
<div id="display">Select from the list to change this box</div> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:13:53.083

我相信您调用辅助方法是错误的，它只需要 2 个参数：

```
echo $this->Html->script('test_js', array('inline'=>false)); 
```

此外，如果这不起作用，那么很高兴确切知道您收到的是哪个警告......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:15:43.180

我的问题似乎是兑现问题。它按原样工作，这就是我所拥有的。

`app\webroot\js\test_js.js`：

```
var textBlocks = new Array(
    'Select from the list to change this box',
    'Text block two',
    'Text block three'); 

function changeText(form) {
    var ind = form.qwer.selectedIndex;
    document.getElementById("display").innerHTML=textBlocks[ind]; 
} 
```

在视图元素页面 (.ctp) 中：

```
<?php echo $this->Html->script('test_js', array('inline'=>false)); ?>
<form>
    <select name="qwer" onChange="changeText(this.form);">
        <option value="0">Select</option>
        <option value="1">One</option>
        <option value="2">Two</option>
    </select>
<br>
<div id="display">Select from the list to change this box</div> 
</form> 
```

# xpages - 如何根据我查看的数据设置 rowStyleClass？

> ID：14737759
> 
> 赞同：1
> 
> 时间：2013-02-06T20:04:48.283
> 
> 标签：xpages

是否可以根据行列中的值将 rowStyleClass 添加到视图中？目前我需要在每一列上都有我的代码，我希望能够将它设置为“全局”......我尝试使用 viewEntry 或将“var”分配给 rowData 但没有运气。错误表示缺少 viewEntry 或 rowData。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:25:24.387

这对我来说很好（并将文档的 UNID 添加为 styleClass）：

```
<xp:viewPanel rows="5" id="viewPanel1" var="rowEntry"
    rowClasses="#{javascript:rowEntry.getDocument().getUniversalID()}"> 
```

# ios - 不能移动按钮

> ID：14737761
> 
> 赞同：-1
> 
> 时间：2013-02-06T20:04:59.513
> 
> 标签：ios, objective-c, cocoa-touch, uibutton

我有一个小问题，当我使用应该移动按钮的代码时，我的按钮不会移动。

ViewControlle.h：

```
@property (strong, nonatomic) IBOutlet UIButton *button1;
@property (strong, nonatomic) IBOutlet UIButton *button2; 
```

视图控制器.m：

```
@implementation GameViewController
@synthesize button1,button2; 
```

应该移动按钮的代码：

```
button1.center=CGPointMake(button1.center.x, button1.center.y-10);
button2.center=CGPointMake(button2.center.x, button2.center.y+10); 
```

为什么代码不起作用或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:16:25.977

因为在视图加载之前没有发生自动布局，所以它会重置您的位置。

当`- (void)viewDidLayoutSubviews`被调用时它就完成了，所以把你的代码放在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T11:21:53.707

如果您使用 ViewController 的 AutoLayout 比它不起作用。

取消选中 ViewController 的 AutoLayout。

# ruby-on-rails - 我将数据库约束放在哪里？

> ID：14737762
> 
> 赞同：2
> 
> 时间：2013-02-06T20:05:01.010
> 
> 标签：ruby-on-rails, database, validation, constraints

简单的问题。我正在学习 RoR。我发誓我在这里和谷歌搜索过这个主题。

我的应用程序中需要很多表格。

我正在阅读有关数据库约束的好处。我在每个模型中都使用了验证，例如：

```
class Example < ActiveRecord::Base

  belongs_to :other
  has_one :another...

  attr_accessible :username, :email, :password

  validates :username, e:mail, :password, presence: true
  validades .....
end 
```

我想了解数据库约束，如何在数据库中获得相同的验证？我应该把这个约束（比如`:null => false`）放在 schema.rb 文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:06:54.143

是的，绝对把它放在你的迁移中：

`:null => false`

要求一个非空字段。尽管仍然可以提供一个空字符串并且它通过了非`NULL`测试。您可以通过添加长度验证来解决此问题：

`validates_length_of :username, :minimum => 1, :maximum => 255`

# javascript - 函数调用中的“或”语句

> ID：14737764
> 
> 赞同：1
> 
> 时间：2013-02-06T20:05:09.597
> 
> 标签：javascript, jquery

在我正在查看的文件中，我看到`||`javascript 函数调用中的语句是什么意思？

```
createObject(a_variable || b_variable) 
```

该函数是采用真/假值还是采用其他值？

上面的代码是否等同于

```
createanotherObject(a_variable ? a_variable : b_variable) 
```

我在它旁边看到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:06:20.243

是的。他们都做几乎完全相同的事情（第一个效率更高*一些）。*它将传递第一个真实值（或最后一个 - 如果没有真实值）。

您的代码等效于：

```
var argument = a_variable;

if ( ! argument ) argument = b_variable;

createObject( argument ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:07:27.937

它将传递`a_variable`if的值`a_variable`是 truethy，否则它将传递 的值`b_variable`。

```
var a = false, b = "FOOBAR";
console.log(a || b); // FOOBAR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:07:35.393

是的，它们是一样的。这是一个短路运算符，即如果第一个变量为真，则不评估第二个变量。就像是

```
a = b || c;

if b is truthy
  a = b
else
  a = c 
```

注意：人们忘记了，但 0 也是一个假值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T20:07:30.320

它相当于你的第二个例子。|| （或）一旦其中一项评估为“真实”值，条件就会结束。如果 a_variable 为空，它将使用 b_variable。

# c# - 检测我的 WebBrowser 导航到的特定网站

> ID：14737766
> 
> 赞同：1
> 
> 时间：2013-02-06T20:05:13.190
> 
> 标签：c#, wpf, browser

我正在使用`WebBrowser Control`WPF 应用程序打开一个网站，其中包含一个供用户填写和提交的表单。例如，提交后，它会在 10 秒后重定向到另一个页面`www.google.com`。

有没有办法检测何时`WebBrowser`打开`www.google.com`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:56:59.080

您可以检测 WebBrowser 何时打开您的站点名称`webbrowser_LoadCompleted`，试试这个：

```
void webbrowser_LoadCompleted(object sender, NavigationEventArgs e)
{
    mshtml.HTMLDocument doc =( mshtml.HTMLDocument) s.Document;
    if (doc.parentWindow.window.location.host == "www.google.com")
    {
        MessageBox.Show("you navigated to google");
    }
} 
```

# python - wxpython 从导入的文件绑定

> ID：14737767
> 
> 赞同：0
> 
> 时间：2013-02-06T20:05:14.293
> 
> 标签：python, wxpython

如何将事件绑定到导入的函数？

```
import menuFunctions
import wx
import wx.lib.agw.aui as aui

class MyFrame(wx.Frame):
  def __init__(self, parent, id=-1, title='title', pos=wx.DefaultPosition, size=(800, 600),     style=wx.DEFAULT_FRAME_STYLE):
    wx.Frame.__init__(self, parent, id, title, pos, size, style)
    self._mgr = aui.AuiManager(self)

    self.Bind(wx.EVT_CLOSE, menuFunctions.onClose) 
```

这是给我带来麻烦的最后一行

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:00:33.333

好吧，这是一种方法。这是其中包含菜单代码的文件：

```
# impMenu.py

import wx

#----------------------------------------------------------------------
def menu(self):
    """"""
    menuBar = wx.MenuBar()
    fileMenu = wx.Menu()
    exitMenuItem = fileMenu.Append(wx.NewId(), "Exit",
                                   "Exit the application")
    menuBar.Append(fileMenu, "&File")

    menuItems = [(exitMenuItem, "onExit")]

    return (menuBar, menuItems) 
```

这是主程序代码：

```
import impMenu
import wx

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Menu Test")
        panel = wx.Panel(self)

        menubar, menuItems = impMenu.menu(self)

        for item in menuItems:
            self.Bind(wx.EVT_MENU, getattr(self, item[1]), item[0])

        self.SetMenuBar(menubar)

    #----------------------------------------------------------------------
    def onExit(self, event):
        """"""
        print "in onExit!"

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    frame.Show()
    app.MainLoop() 
```

# android - 具有自定义样式的 Spinner 的 Android 文本颜色

> ID：14737768
> 
> 赞同：1
> 
> 时间：2013-02-06T20:05:19.987
> 
> 标签：android, spinner, customization, textcolor

我正在尝试为下面定义的 Spinner 样式设置文本颜色。但是我收到错误“检索项目的父项时出错：未找到与给定名称'Widget'匹配的资源。” “holoSpinnerTextStyle”的“父母”应该是什么？

```
<!-- SPINNER -->
        <style name="holoSpinner" parent="@android:style/Theme">
          <item name="android:background">@drawable/spinner_holo_sel</item>
          <item name="android:clickable">true</item>
          <item name="android:paddingTop">15dip</item>
          <item name="android:paddingBottom">0dip</item>
          <item name="android:paddingRight">25dip</item>
          <item name="android:paddingLeft">25dip</item>
           <item name="android:textAppearance">@style/holoSpinnerTextStyle</item>
          <item name="android:textStyle">normal</item>
        </style>

        <style name="holoSpinnerTextStyle" parent="android:TextAppearance.Widget.TextView.SpinnerItem">
          <item name="android:textSize">21sp</item>
          <item name="android:textColor">#9e9d9d</item>
          <item name="android:textStyle">normal</item>

        </style> 
```

# mysql - 如果一个细节匹配条件，mysql会获取maser和所有细节

> ID：14737770
> 
> 赞同：0
> 
> 时间：2013-02-06T20:05:20.613
> 
> 标签：mysql

我有两张桌子`product`，`specs`如果至少有一个规格与 WHERE 匹配，我想获得产品和 group_concat（所有规格）。这是我到目前为止所拥有的，但它只返回与 WHERE 匹配的一个规范。

```
select p.ID, p.name, p.manufacturer GROUP_CONCAT(s.specValue order by s.pID,',')
from product as p
JOIN spec AS s ON p.ID = s.pID
WHERE s.specValue = 'micro'
group by p.ID 
```

* * *

```
product table 
| ID | name   | manufacturer |
| 1  | Iphone |   apple      |
| 2  | galaxy |   samsung    |
| 3  | note   |   samsung    |
------------------------------
spec table
| ID | pID | specName | specVlaue |
| 1  |  1  |  charger |   bad     |
| 2  |  2  |  charger |   micro   |
| 3  |  2  |  keypad  |  touch    |
| 4  |  4  |  charger |  micro    |
----------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:09:48.650

您可以使用`IN`在`WHERE`子句中使用 a 的以下内容：

```
select p.ID, 
  p.name, 
  p.manufacturer,
  GROUP_CONCAT(s.specValue order by s.pID,',') AllSpecs
from product as p
JOIN spec AS s 
  ON p.ID = s.pID
WHERE p.ID in (select pID
               from spec s1
               where s1.specValue = 'micro')
group by p.ID 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b7dac/7)。

或者您可以使用`EXISTS`：

```
select p.ID, 
  p.name, 
  p.manufacturer,
  GROUP_CONCAT(s.specValue order by s.pID,',') AllSpecs
from product as p
JOIN spec AS s 
  ON p.ID = s.pID
WHERE exists (select pID
               from spec s1
               where s1.specValue = 'micro'
                 and p.ID = s1.pid)
group by p.ID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b7dac/8)

两者都给出结果：

```
| ID |   NAME | MANUFACTURER |    ALLSPECS |
--------------------------------------------
|  2 | galaxy |      samsung | touch,micro | 
```

如果您不想使用子查询，则可以使用`HAVING`子句过滤具有以下值的记录：

```
select p.ID, 
  p.name, 
  p.manufacturer,
  GROUP_CONCAT(s.specValue order by s.pID,',') AllSpecs
from product as p
JOIN spec AS s 
  ON p.ID = s.pID
group by p.ID
having GROUP_CONCAT(s.specValue order by s.pID,',') like '%micro%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b7dac/16)

# r - 用R中的另一个值替换数据框多列中出现的数字

> ID：14737773
> 
> 赞同：26
> 
> 时间：2013-02-06T20:05:51.933
> 
> 标签：r, replace, indexing

**ETA：**顺便说一下，下面的重点是不必遍历我的整个列向量集，以防万一这是一个建议的解决方案（只做一次已知的工作）。

* * *

有很多用其他值替换 R 中数据框的*单个*向量中的值的示例。

*   [`if`根据R 中的条件 () 语句替换数据框中的值](https://stackoverflow.com/questions/5824173/replace-a-value-in-a-data-frame-based-on-a-conditional-if-statement-in-r)
*   [替换r中数据框列中的数字[重复]](https://stackoverflow.com/questions/11817371/replace-numbers-in-data-frame-column-in-r)

以及如何`NA`用其他东西替换所有值：

*   [如何用另一个（非 0）值替换 data.frame 中的所有值](http://r.789695.n4.nabble.com/How-to-replace-all-lt-NA-gt-values-in-a-data-frame-with-another-not-0-value-td2125458.html)

我正在寻找的类似于最后一个问题，但基本上是试图用另一个值替换一个值。对于多列满足条件的情况，或者只是尝试对多列执行前两个问题的操作，我无法生成映射到我的实际数据框的逻辑值数据框。

一个例子：

```
data <- data.frame(name = rep(letters[1:3], each = 3), var1 = rep(1:9), var2 = rep(3:5, each = 3))

data
  name var1 var2
1    a    1    3
2    a    2    3
3    a    3    3
4    b    4    4
5    b    5    4
6    b    6    4
7    c    7    5
8    c    8    5
9    c    9    5 
```

并说我想要`4`in`var1`和`var2`to be的所有值`10`。

我确定这是基本的，我只是没有正确考虑它。我一直在尝试这样的事情：

```
data[data[, 2:3] == 4, ] 
```

那是行不通的，但是如果我对`data[, 2]`而不是做同样的`data[, 2:3]`事情，事情就很好了。似乎逻辑测试（如`is.na()`）适用于多行/多列，但数值比较的效果不那么好？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-06T20:09:29.490

您想在整个数据框中搜索与您尝试替换的值匹配的任何值。与您可以运行逻辑测试的方式相同，例如将所有缺失值替换为 10..

```
data[ is.na( data ) ] <- 10 
```

您也可以用 10 替换所有 4。

```
data[ data == 4 ] <- 10 
```

至少我认为这就是你所追求的？

假设您想忽略第一行（因为都是字母）

```
# identify which columns contain the values you might want to replace
data[ , 2:3 ]

# subset it with extended bracketing..
data[ , 2:3 ][ data[ , 2:3 ] == 4 ]
# ..those were the values you're going to replace

# now overwrite 'em with tens
data[ , 2:3 ][ data[ , 2:3 ] == 4 ] <- 10

# look at the final data
data 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T20:12:09.603

基本上`data[, 2:3]==4`给了你索引`data[,2:3]`而不是`data`：

```
R > data[, 2:3] ==4
       var1  var2
 [1,] FALSE FALSE
 [2,] FALSE FALSE
 [3,] FALSE FALSE
 [4,]  TRUE  TRUE
 [5,] FALSE  TRUE
 [6,] FALSE  TRUE
 [7,] FALSE FALSE
 [8,] FALSE FALSE
 [9,] FALSE FALSE 
```

所以你可以试试这个：

```
R > data[,2:3][data[, 2:3] ==4]
[1] 4 4 4 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:35:46.203

只是为了提供不同的答案，我想我会写一个向量数学方法：

您可以使用矢量化的“ifelse”语句创建一个转换矩阵（这里实际上是一个数据框，但工作方式相同），并将转换矩阵与您的原始数据相乘，如下所示：

```
df.Rep <- function(.data_Frame, .search_Columns, .search_Value, .sub_Value){
   .data_Frame[, .search_Columns] <- ifelse(.data_Frame[, .search_Columns]==.search_Value,.sub_Value/.search_Value,1) * .data_Frame[, .search_Columns]
    return(.data_Frame)
} 
```

要将第 2 到第 3 列的数据框“数据”中的所有值 4 替换为 10，您可以使用如下函数：

```
# Either of these will work.  I'm just showing options.
df.Rep(data, 2:3, 4, 10)
df.Rep(data, c("var1","var2"), 4, 10)

#   name var1 var2
# 1    a    1    3
# 2    a    2    3
# 3    a    3    3
# 4    b   10   10
# 5    b    5   10
# 6    b    6   10
# 7    c    7    5
# 8    c    8    5
# 9    c    9    5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T20:12:44.107

只为延续

```
 data[,2:3][ data[,2:3] == 4 ] <- 10 
```

但它看起来很丑，所以分两步做会更好。

# html - 之间的线高 标签不一样

> ID：14737775
> 
> 赞同：0
> 
> 时间：2013-02-06T20:05:58.623
> 
> 标签：html, css, height, line

我正在尝试制作一个简单的主页，但我的行高略有不同

标签。这是 HTML `

贾斯汀是首席工程师

```
 <p>and also this &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp and Justin also  </p> 
            <a href="http://brabble.com"><img id="brabble" src="img/brabble.png"></a>

        <p>to make products work </p>` 
```

这是一张图片![行高问题](../Images/f372ed0d3c197b40577914c788585fa5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:16:38.120

您的图像妨碍了文本格式，因为它与您的文本大小不同。你有几个选择，最有效的是将图像放在它自己的跨度中，并给该跨度一个明确的高度 1em，并带有溢出：可见：

```
<P>lalalala <span class='imagewrapper'><img ....></span> more text</p> 
```

风格：

```
.imagewrapper {
  display: inline-block;
  height: 1em;
  overflow: visible;
} 
```

见[http://jsfiddle.net/UG5us/](http://jsfiddle.net/UG5us/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:15:07.607

该图像使行框变得比周围元素的行高指定的高。为避免这种情况，请缩小图像和/或设置其垂直位置。

# android - SimpleCursorAdapter 将所有内容绑定两次

> ID：14737777
> 
> 赞同：2
> 
> 时间：2013-02-06T20:06:11.243
> 
> 标签：android, performance, android-layout

我的应用程序提供了几个由数据库支持的 ListView。每个都使用游标适配器和提供程序在数据库和 UI 之间进行接口。在一种情况下，我使用 SimpleCursorAdapter 开箱即用（使用自定义 ViewBinder）；在另一种情况下，我将 SimpleCursorAdapter 子类化。

在跟踪我的应用程序时，我发现每次加载这些 ListView 时，光标适配器都会对列表中的每个项目调用它们的 getView() 和 bindView() 方法两次。为什么会发生这种情况，有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:07:17.627

如果您将 ListView 的宽度（或高度）设置为 wrap_content，则会导致此问题。将其切换为 Fill_Parent 或 match_parent 将 ListView 的宽度（或高度）设置为 wrap_content 将导致它测量前 3 个项目并将其尺寸基于这些。为了测量前 3 个项目，它必须调用 bindView() 来填充它们。测量完成后，它将完全填充并在前 3 个和任何后续对象上再次调用 bindView()。

看到同样的问题[为什么 Wrap_Content 会多次触发 BindView](https://stackoverflow.com/questions/6565500/why-does-wrap-content-fire-bindview-more-than-once)

# ios - 如何显示倒数计时器

> ID：14737778
> 
> 赞同：0
> 
> 时间：2013-02-06T20:06:11.410
> 
> 标签：ios, grand-central-dispatch

我不知道该怎么做。我有一个按钮，一旦点击它，我想在五秒钟内启动一个进程，当用户等待时，我想显示倒计时 - 5、4、3、2、1

我无法让这个工作我尝试过使用 nstimer 但这不起作用。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:25:21.167

您可以使用`dispatch_after()`并利用块捕获范围的方式来跟踪您还剩多少秒。

```
- (IBAction)buttonHandler:(UIButton *)sender
{
    if (self.countingDown)
        return;

    [self startCountDown];
}

- (void)startCountDown
{
    self.countingDown = YES;
    self.button.enabled = NO;
    int seconds = 5;
    [self countDownFor:seconds];
}

- (void)countDownFor:(int)seconds
{
    self.countDownLabel.text = [NSString stringWithFormat:@"%d",seconds];
    if (seconds == 0) {
        self.countingDown = NO;
        self.button.enabled = YES;
        return; 
    }

    double delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self countDownFor:(seconds - 1)];
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:45:33.520

GCD 和块的优雅解决方案：

```
 __block void (^runBlock)(int) = ^(int i) {
        countdownLabel.text = [NSString stringWithFormat:@"%d", i];
        if(i>0) {
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1*NSEC_PER_SEC);
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                runBlock(i-1);
            });
        } else {
            runBlock = nil; // Breaking retain cycle
            // Time to start your great action!
            // ...
        }
    };

    runBlock(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:16:41.033

尝试类似的东西

```
[NSTimer scheduledTimerWithTimeInterval:1 
                                       target:self
                                     selector:@selector(methodNameUsedToupdateButtonText)
                                     userInfo:nil
                                      repeats:YES]; 
```

如果倒计时达到 0（并且如果视图卸载），则使计时器无效

检查[NSTimer 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

# c++ - 如何从向量中删除第一次出现的值？

> ID：14737780
> 
> 赞同：12
> 
> 时间：2013-02-06T20:06:16.657
> 
> 标签：c++, c++11

我正在尝试从向量中获取单个元素并将其推到向量的后面，然后将其删除，这样我就不会在内存中有一个空白部分。erase-remove 习惯用法可以做到这一点，但它会删除特定值的*所有实例。*我只想删除第一个。

我对标准库算法不太熟悉，也找不到合适的方法（如果有的话）来做到这一点。这是一个例子：

```
int main() {
    std::vector<int> v{1, 2, 3, 3, 4};

    remove_first(v, 3);

    std::cout << v; // 1, 2, 3, 4
} 
```

那么我将如何从这个向量中删除第一次出现的 3 呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T20:09:15.073

先找到它，然后擦除它：

```
auto it = std::find(v.begin(),v.end(),3);
// check that there actually is a 3 in our vector
if (it != v.end()) {
  v.erase(it);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-07T14:37:01.287

如果您不关心保持向量中元素的顺序，则可以避免在擦除时复制剩余元素的“尾部”：

```
auto it = std::find(v.begin(), v.end(), 3);
if (it != v.end()) {
  std::iter_swap(it, v.end() - 1);
  v.erase(v.end() - 1);
} 
```

# php - str_replace 不适用于斜杠

> ID：14737783
> 
> 赞同：1
> 
> 时间：2013-02-06T20:06:23.233
> 
> 标签：php, regex, escaping, anchor, str-replace

由于某种原因`str_replace()`不适用于`/`. 我正在创建一个函数来接受我正在制作的博客 CMS 的输入和文本区域表单中的独特链接样式。例如，通过时`[{http://brannondorsey.com}My Website]`将被翻译为。这是我的代码：`<a href='http://brannondorsey.com'>My Website</a>``make_link($string);`

```
function make_link($input){

 $double = str_replace( '"', '&#34', $input);
 $single = str_replace("'", "&#39", $double);
 $bracket_erase = str_replace('[', "", $single);
 $link_open = str_replace('{', '<a href="', $bracket_erase);
 $link_close = str_replace("}", ">", $link_open);
 $link_value = str_replace(']', "</a>", $link_close);

 echo $link_value;
 } 
```

一切正常，除了`]`不替换为`</a>`. 如果我删除斜杠，它将成功替换`]`为`<a>`，但是，众所周知，这不会正确关闭锚标记，因此会使`{`我网页中的和下一个关闭锚标记之间的所有 html 内容成为链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:11:55.533

您可能想为此走正则表达式路线。

```
function make_link($link){
    return preg_replace('/\[{(.*?)}(.*?)\]/i', '<a href="$1">$2</a>', $link);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:15:24.943

**我个人建议下面的 Marcus Recck 的 preg_replace 答案，而不是我的这里。**

它只是没有看到，因为浏览器不会显示 html，但您可以使用下面的来查看它，和\或使用浏览器查看源选项

```
$link_close ="]";

$link_value = str_replace(']', "</a>", $link_close);

echo htmlspecialchars($link_value);//= &lt;/a&gt;

var_dump ($link_value); //=string(4) "" [invisible due to browser, but the 4 tells you its there] 
```

OP函数的最终版本：

```
function make_link($input){

 $double = str_replace( '"', '&#34', $input);
 $single = str_replace("'", "&#39", $double);
 $bracket_erase = str_replace('[', "", $single);
 $link_open = str_replace('{', '<a href="', $bracket_erase);
 $link_close = str_replace("}", '">', $link_open);
 $link_value = str_replace(']', "</a>", $link_close);

 return $link_value;
 }
echo htmlspecialchars(make_link('[{http://brannondorsey.com}My Website]')); 
```

# android - Android为蜂窝信号设置代理

> ID：14737784
> 
> 赞同：2
> 
> 时间：2013-02-06T20:06:23.063
> 
> 标签：android

我正在使用三星 Galaxy 10.1 平板电脑。我可以为 WiFi 添加代理。我可以为蜂窝连接做同样的事情吗？如果是，如何？

或者我可以打包浏览器以限制访问的网站吗？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T21:06:08.850

代理可能不适用于所有蜂窝运营商。并确保提供正确的接入点名称

设置 > 更多 > 移动网络 > 接入点名称 >（点击以编辑您的 APN 或创建新的 APN）> 代理和端口

这是从我的运行 Android 4.2.1(CyanogenMod10.1) 的 Galaxy 选项卡 10.1 截取的屏幕截图

步骤1 ![步骤1](../Images/d1d9ae9010743a6293453cda4847768b.png)

第2步![选择移动网络](../Images/54793d374ade618bded5b98d33018102.png)

第 3 步：点击以编辑或创建新的 APN ![在此处输入图像描述](../Images/1f327124fe6bd6c30d72411fa484f6c0.png)

步骤 4 输入您的代理 IP 和端口（屏幕截图中的一项无效） ![在此处输入图像描述](../Images/99547f58efb03880e43e4898a181fb57.png)

# mysql - phpmyadmin 中的 SQL 语法错误

> ID：14737792
> 
> 赞同：0
> 
> 时间：2013-02-06T20:07:03.973
> 
> 标签：mysql, sql, phpmyadmin

我正在为学校作业创建一个小型 CMS，并在 phpMyAdmin 中尝试了这段 SQL 代码：

```
INSERT INTO subjects (
                menu_name, position, visible
            ) VALUES (
                '{Test item}', {4}, {1}
            ) 
```

但它不起作用。它告诉我：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '4}, {1} )' 附近使用正确的语法。

有人可以向我解释我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:09:04.997

为什么要加括号？这应该有效：

```
INSERT INTO subjects (
  menu_name, position, visible
) VALUES (
  'Test item', 4, 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:11:20.613

不要使用括号，试试这个

```
 INSERT INTO subjects (
            menu_name, position, visible
        ) VALUES (
            'Test item', 4, 1
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:09:08.200

除非该字段实际上需要大括号，否则您不会包含它们。

```
INSERT INTO `subjects` (`menu_name`,`position`,`visible`) VALUES('Test Item', 4, 1) 
```

# python - 如何在 PyScripter 中更改字体（大小/系列）？

> ID：14737793
> 
> 赞同：1
> 
> 时间：2013-02-06T20:07:06.237
> 
> 标签：python, windows, fonts, python-2.7, pyscripter

我刚开始参加计算机科学学习 Python 的在线课程。我使用 PyScripter，在站点上，示例位于“Source Code Pro”中。我真的很喜欢那种字体，并且已经下载了它并在 Notepad++ 中使用它，但我也想知道如何在 PyScripter 中使用它，但我在编辑面板或上下文菜单中找不到任何允许字体更改的地方。（另外，文字太小了）。

我不知道 Stack Overflow 是否是一个很好的地方，因为我认为 SO 是针对实际的程序问题的，但我到处搜索，这是我最后的手段。

任何帮助将非常感激！

**编辑：**我在 Windows XP Professional 上使用 PyScripter for Python 2.7（目前）。我也不想*使用*皮肤编辑器，因为我只想更改字体系列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:36:16.807

此答案的配置：Windows XP SP3 上的 Pyscripter 2.4.3.0（此时是最新版本），已经安装了许多字体并在 Pyscripter 中可用。已安装 Python26 和 Python27。

**注意：**帮助文件显示“Pyscripter 需要使用等宽字体或非比例字体”。

程序：

1.  搜索并下载 Source Code Pro (v1.017)
2.  按照说明安装
3.  Pyscripter 工具菜单 > 选项 > 编辑器选项
4.  显示选项卡 > 单击字体
5.  从字体列表中选择“Source Code Pro”
6.  如果需要，选择样式和尺寸
7.  按 OK 接受字体选项
8.  按 OK 接受版本选项并将设置应用于当前环境
9.  Source Code Pro 现在是默认字体

在 Pyscripter 中设置字体系列、样式和大小：http://i.stack.imgur.com/qhppd.png [（](http://i.stack.imgur.com/qhppd.png) WTH，显然我太蹩脚了，无法信任嵌入图像或任何超链接...... O_o）

# angularjs - angularjs - 插入 $compile-d html

> ID：14737795
> 
> 赞同：5
> 
> 时间：2013-02-06T20:07:11.067
> 
> 标签：angularjs, datatables

*（请注意，您不需要了解此数据表的相关信息..）*

我正在创建一个指令来处理[DataTables](http://datatables.net/index)。我想做的是有一个带有两个图标的操作列 - 编辑和删除。这些图标应该响应 ng-click。

[数据表允许您通过为给定的列定义 ( mRender](http://www.datatables.net/usage/columns#mRender) )提供回调来做到这一点。此回调为该单元格值返回一个**html 字符串，该字符串插入到 DOM 中，而不是实际的单元格值。**

结帐这个[plunker](http://embed.plnkr.co/oWa2tG2ocokcTSbYVqNG)。突出显示了两个重要功能：

*   `renderActionIcon`- 我上面提到的回调的实现。它会在单元格中生成我想要的 HTML 字符串。
*   `registerNewHtmlWithAngular`- 我表面上让 Angular 知道我需要为该列注册的 ng-click 的功能。

应该进去什么`registerNewHtmlWithAngular`？

如果 $compile html，angular 添加适当的单击事件侦听器并返回一个元素，但由于 Datatables 函数需要 HTML，那些注册的元素将不会添加到 DOM。

有任何想法吗？谢谢各位！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T15:25:34.423

敲了一天的键盘后：

似乎没有办法将 $compile 成*html*并让它在 DOM 中可用。它必须是插入到 DOM 中的*元素*，这样事件侦听器才不会丢失。

我在这个特定场景中解决问题的方法是插入 HTML，然后在新的 HTML 上运行 $compile。

Datatables 通过`fnCreatedRow`回调使这件事变得简单，在呈现一行后，它会传回一行的元素，让你可以用它做任何你想做的事情。在这种情况下，我对该行运行 $compile 并将其返回给 Datatables。请参阅`rowCompiler`更新后的[plunker](http://embed.plnkr.co/esHtaIKoGFqGzQv2vekV)中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:39:49.207

因为 datatables 使用 innerHTML = mRender(...) 来插入一个 html （所以它无论如何都会将任何内容转换为字符串，并且您将丢失 $compile 函数的结果。我想没有黑客可以使用 mRender 来做到这一点 - 因为例如，可以稍微更改数据表，因此它将使用 $.append 而不是 innerHTML。但这不是一个好习惯，因此在我们的项目中，我们使用通常的 jquery 绑定而不是 ng-click。

# c - C : strchr 指针值不变

> ID：14737797
> 
> 赞同：0
> 
> 时间：2013-02-06T20:07:14.100
> 
> 标签：c, string, substring, strchr

我正在尝试使用 C 程序递归搜索字符串中的子字符串。我写了以下一段代码。我面临的问题是`ptr`，虽然它打印了正确的值（`puts`在 while 的开头使用），但使用它的值没有改变！它使用以前的`ptr`值。我使用`gdb`. 我无法弄清楚这是什么原因。请指导我解决这个问题。提前致谢。

```
void main()
{
   char buf[10]="hello",*ptr;
   char findc[10]="lo";
   int len,i,lenf,k,l,flag=0;

   lenf=strlen(findc);
   l=0,k=1;
   ptr=strchr(buf,findc[l]);

   while(ptr!=NULL)
   {
      puts(ptr);
      l++;
      for(i=l;i<(lenf);i++,k++)
      {
        if(ptr[k] != findc[i])
        {   
          flag=1;
          break;
        }
      }

      if(flag==1)
      {
        l=0;k=1;
        ptr=strchr((ptr+1),findc[l]);

        if(ptr==NULL)
        {
           puts("String not found");
           break;
        }

      }
      else
      {   
          puts("String found");
        break;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:54:18.000

这是一个非常简单的错误！

我们必须在循环`flag`开始时重置变量。`while`这将解决问题。

谢谢！

# javascript - Android中的媒体匹配？（Phonegap 方向）

> ID：14737798
> 
> 赞同：0
> 
> 时间：2013-02-06T20:07:15.863
> 
> 标签：javascript, android, cordova

我在Phonegap中改变了方向。我的计划是在方向改变时更改 CSS 文件（无论如何，这可能是一种复杂的方式），但我正在努力让任何依赖于方向的事件发生。我目前正在使用代码：

```
window.onorientationchange = function() {

  navigator.notification.alert(
        'orientation change!',  // message
        'Portrait',            // title
        'buttton');              // buttonName

  if (window.matchMedia("(orientation: portrait)").matches){
      navigator.notification.alert(
        'now in portrait',  // message
        'Portrait',            // title
        'buttton');              // buttonName
  }
  else{
    alert("landscape")
  }
} 
```

第一个警报（每当方向改变时）很好，但第二个警报（当它特别变成横向时）没有发生。我在 Android 版本 2.3.5 上。（这种方法是 Razvan 在[这个](https://stackoverflow.com/questions/14583062/cannot-read-property-content-of-null-psuedo-elements/14603167#comment20464120_14603167)问题上提出的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:52:13.213

您需要在 MediaQueryList 对象上设置一个侦听器。例如，请参见下文。

除了媒体查询之外，还有其他方法可以检索设备方向更改。搜索“mdnorientationchange”以获取示例。

1.  创建 MediaQueryList 对象，“方向”。包含 add/removeListener、媒体和匹配项。
2.  创建侦听器“orientationListener”。测试媒体查询匹配。
3.  获取初始方向值
4.  聆听发生的任何变化

    ```
    var orientation = window.matchMedia("(orientation: portrait)"),
        orientationListener = function(mql) {

            if (mql.matches) {
                // Media query does match orientation portrait
            } else {
                // Media query does not match which should mean orientation is now landscape
            }

        };

    // Gets initial match

    orientationListener(orientation);

    // Listens for change

    orientation.addListener(orientationListener); 
    ```

# c# - 一名持剑的武士和一名持匕首的武士

> ID：14737807
> 
> 赞同：5
> 
> 时间：2013-02-06T20:07:42.550
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

感谢您的关注。我对 Ninject 有点陌生，到目前为止还很喜欢。我得到了在调试模式下绑定一个东西并在发布模式下绑定另一个东西的部分。这些是全局绑定，您必须使用 Ninjects 示例代码声明每个武士都将拥有一把剑或一把匕首。这不是非此即彼的，它是一个或另一个。

我该怎么做才能让一个武士带剑，另一个带匕首，如果他们愿意，他们甚至可以切换武器。除了创建一堆具有不同绑定模块的内核之外，还有其他方法吗？

这是来自 Ninject 的示例代码。如果你将它放在控制台应用程序中，它应该运行：

```
using System;
using Ninject;

namespace NinjectConsole
{
    class Program
    {

        //here is where we have to choose which weapon ever samurai must use...
        public class BindModule : Ninject.Modules.NinjectModule
        {
            public override void Load()
            {
                //Bind<IWeapon>().To<Sword>();
                Bind<IWeapon>().To<Shuriken>();
            }
        }

        class Shuriken : IWeapon
        {
            public void Hit(string target)
            {
                Console.WriteLine("Pierced {0}'s armor", target);
            }
        }

        class Sword : IWeapon
        {
            public void Hit(string target)
            {
                Console.WriteLine("Chopped {0} clean in half", target);
            }
        }

        interface IWeapon
        {
            void Hit(string target);
        }

        class Samurai
        {
            readonly IWeapon weapon;

            [Inject]
            public Samurai(IWeapon weapon)
            {
                if (weapon == null)
                    throw new ArgumentNullException("weapon");

                this.weapon = weapon;
            }

            public void Attack(string target)
            {
                this.weapon.Hit(target);
            }
        }

        static void Main(string[] args)
        {

            //here is where we bind...
            Ninject.IKernel kernel = new StandardKernel(new BindModule());

            var samurai = kernel.Get<Samurai>();
            samurai.Attack("your enemy");

            //here is I would like to do, but with DI and no local newing up...
            var warrior1 = new Samurai(new Shuriken());
            var warrior2 = new Samurai(new Sword());
            warrior1.Attack("the evildoers");
            warrior2.Attack("the evildoers");
            Console.ReadKey();
        }
    }
} 
```

**编辑**

*感谢重播和建议。*

我想出了如何得到我想要的东西。好的，这就是我所做的：

1.  将默认/初始绑定设置为最弱的武器。有点像 new-b 会做的。
2.  添加了另一种武器（匕首）
3.  扩展了 IWeapon 以包括 WeaponHitPoints 值来评估武器值。
4.  扩展了 Samurai 以包括添加和丢弃武器的方法，以便 Samurai 可以获得或丢失武器。
5.  修改了攻击方法以使用最好的武器。
6.  修改了程序以利用添加的功能。
7.  TODO：添加 try/catch 和 null 检查...

创建一个名为 NinjectConsole 的控制台项目，安装 Ninject，您应该能够将其放入并运行它。

这是新代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Ninject;

namespace NinjectConsole
{
    class Program
    {
        public class BindModule : Ninject.Modules.NinjectModule
        {
            // default bind to weakest weapon 
            public override void Load()
            {
                Bind<IWeapon>().To<Dagger>();
            }
        }

        class Dagger : IWeapon
        {
            public int WeaponHitPoints { get { return 5; } }
            public string Hit(string target)
            {
                return String.Format("Stab {0} to death", target);
            }
        }

        class Shuriken : IWeapon
        {
            public int WeaponHitPoints { get { return 9; } }

            public string Hit(string target)
            {
                return String.Format("Pierced {0}'s armor", target);
            }
        }

        class Sword : IWeapon
        {
            public int WeaponHitPoints { get { return 11; } }

            public string Hit(string target)
            {
                return string.Format("Chopped {0} clean in half", target);
            }
        }

        interface IWeapon
        {
            int WeaponHitPoints { get; }
            string Hit(string target);
        }

        private class Samurai
        {
            private IEnumerable<IWeapon> _allWeapons;

            public Samurai(IWeapon[] allWeapons)
            {
                if (!allWeapons.Any())
                    throw new ArgumentException("Samurai");

                _allWeapons = allWeapons;
            }

            public void AddWeapon(IWeapon weapon)
            {  //TODO: check for nulls...
                _allWeapons = _allWeapons.Concat(new[] { weapon });
            }

            public void DropWeapon(IWeapon weapon)
            {  //TODO: check for nulls...
                Console.WriteLine("A Samurai got rid of a " + weapon.WeaponName);

                _allWeapons = _allWeapons.Where(x => x.WeaponName != weapon.WeaponName);
            }

            public void Attack(string target)
            {
                int points = 0;

                try
                {
                    points = _allWeapons.Max(x => x.WeaponHitPoints);
                }
                catch ()
                {
                    Console.WriteLine("You just punched " + target + " on the nose!");
                }

                var attackWeapon = _allWeapons.FirstOrDefault(i => i.WeaponHitPoints == points);

                //TODO: check for nulls... 
                Console.WriteLine(attackWeapon.Hit(target));
            }
        }

        static void Main(string[] args)
        {
            Ninject.IKernel kernel = new StandardKernel(new BindModule());

            var samurai1 = kernel.Get<Samurai>();
            var samurai2 = kernel.Get<Samurai>();

            Console.WriteLine("Samurai #1");
            samurai1.Attack("your enemy");

            samurai2.AddWeapon(new Shuriken());

            Console.WriteLine("\nSamurai #2 selects best weapon for attack");
            samurai2.Attack("your enemy");

            Console.WriteLine("\nSamurai #1 gets new weapon!");
            samurai1.AddWeapon(new Sword());

            Console.WriteLine("Samurai #1 selects best weapon for attack");
            samurai1.Attack("your enemy");

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T22:42:59.157

一般来说，除非您指定某些条件，否则您无法使用 IOC 容器来实现这一点，这些条件应该满足才能选择正确的实现（武器）。容器需要知道在当前情况下选择哪一种实现。

我建议，您正在寻找某种[Contextual binding](https://github.com/ninject/ninject/wiki/Contextual-Binding)。

*Ninject 中有很多条件绑定方法（参见上面的链接）。我选择了命名绑定，因为它是一个非常简单的示例。*

**命名绑定**

*根据配置的名称解析依赖关系。*

```
kernel.Bind<Samurai>().ToSelf().Named("SwordMaster");
kernel.Bind<Samurai>().ToSelf().Named("ShurikenMaster");

kernel.Bind<IWeapon>().To<Sword>().WhenParentNamed("SwordMaster");
kernel.Bind<IWeapon>().To<Shuriken>().WhenParentNamed("ShurikenMaster");

warrior1 = kernel.Get<Samurai>("SwordMaster");
warrior2 = kernel.Get<Samurai>("ShurikenMaster"); 
```

**多次注射**

如果您希望`Samurai`能够处理多种武器，您可以声明多个绑定，并且可以将它们作为集合`IWeapon`注入。`Samurai`

```
public Samurai(IEnumerable<IWeapon> weapons)
{
     this.AllMyWeapons = weapons;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:01:25.820

不幸的是，尽管 Ninject 文档使理解容器的语法变得很容易，但它也可能给人以错误的印象，即何时应该使用 IoC 容器。

这个想法是您的**服务**是从 IoC 容器注册和解析的 - 但 a`Samurai`并不是真正的服务，它是一个**域对象**。这些应该由（例如）a `SamuraiFactory`（现在有一个可怕的想法......）

解析服务时，预计您只需在初始化期间注入一次组件。这是唯一一次使用 IoC 容器 - 理想情况下，您应该只调用 .Resolve() 一次，以启动您的依赖网络。当你有你的[组合 root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)时，你就有了程序的入口点——从那时起，你不再引用 IoC 容器并且你的程序正常执行。

# javascript - javascript函数覆盖

> ID：14737808
> 
> 赞同：0
> 
> 时间：2013-02-06T20:07:50.370
> 
> 标签：javascript

是否可以用另一个不带参数的新函数 callwithargs 完全覆盖接受某些参数的函数 callwithargs？

```
function callwithargs(a, b, c){
       if(arg.length){
        do this
     }else{
        do something else
    }
    }

function callwithargs(){
  do a new thing
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:14:33.203

是的，javascript 不包含参数的数量作为函数的唯一标识符。 `function callwithargs(...)`定义名为 的全局对象的属性`callwithargs`。当您再次定义该属性时，您将覆盖它。

实际上，您也可以通过`callwithargs = 2`例如说来覆盖它，然后它将用数字值覆盖该属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:14:18.607

我做过类似的事情，我希望这能引导你找到答案。本质上，在我的情况下，该函数附加到一个对象，在初始化对象后，我用我的新函数替换了该函数，如下所示：

```
var oldFunction = myObject.theFunction;
myObject.theFunction = function () {
    // my new function
    var result = oldFunction.apply(this, arguments); // Calls the old function using the arguments keyword

    return result;
}; 
```

# java - JLabel - 将较长的文本显示为多行？

> ID：14737810
> 
> 赞同：12
> 
> 时间：2013-02-06T20:07:55.853
> 
> 标签：java, swing, jpanel, jlabel

所以说我有一条很长的线，我想在`JLabel`. 我该怎么做？

目前，更长的行是这样出现的：

![在此处输入图像描述](../Images/cfb4fd26423a5c02fce5535cf39ed53a.png)

我必须调整窗口大小才能看到完整的文本。

我怎样才能使它在文本几乎达到我的宽度时出现换行符`JFrame`？

我不确定这里是否需要任何代码来回答这个问题，但仍然：

我的框架属性：

```
frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(new Dimension(450, 400));
frame.setLocation(new Point(400, 300));
frame.setLayout(new BorderLayout()); 
```

我要修改的标签：

```
question = new JLabel("Question:");
question.setFont(new Font("Serif", Font.BOLD, 15));
question.setHorizontalAlignment(JLabel.CENTER); 
```

编辑：更多细节：

我正在从文件中读取行，然后显示它们。线的大小不是固定的，所以我不知道放在哪里`<br>`。

编辑2：

我最终使用了`JTextArea`.

```
private JTextArea textAreaProperties(JTextArea textArea) {
    textArea.setEditable(false);  
    textArea.setCursor(null);  
    textArea.setOpaque(false);  
    textArea.setFocusable(false);
    textArea.setLineWrap(true);
    textArea.setWrapStyleWord(true);
    return textArea;
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-06T20:29:47.207

再举一个例子，表明使用正确的布局管理器，包含在`HTML`标签中的文本将自动换行到可用空间......

![在此处输入图像描述](../Images/c5e97cc973dbe35b1f34c341ec1f00c1.png)

```
public class TestHTMLLabel {

    public static void main(String[] args) {
        new TestHTMLLabel();
    }

    public TestHTMLLabel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                StringBuilder sb = new StringBuilder(64);
                sb.append("<html>I have something to say, it's beter to burn out then to fade away.").
                                append("  This is a very long String to see if you can wrap with in").
                                append("the available space</html>");

                JLabel label = new JLabel(sb.toString());

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(label);
                frame.setSize(100, 100);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }    
        });
    }        
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-06T20:09:37.150

使用 HTML 显示标签内的文本。

```
JLabel fancyLabel = new JLabel("<html>Punch Taskmaster</html>"); 
```

（添加了 Taskmaster 建议的示例）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T20:16:48.340

用 HTML 格式化。效果很好。

```
import javax.swing.*;
import java.awt.*;

public class Test {

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(450, 400));
        frame.setLocation(new Point(400, 300));
        frame.setLayout(new BorderLayout());

        final JLabel question = new JLabel("<html>Question:<br>What is love?<br>Baby don't hurt me<br>Don't hurt me<br>No more</html>");
        question.setFont(new Font("Serif", Font.BOLD, 15));
        question.setHorizontalAlignment(JLabel.CENTER);

        frame.add(question);

        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-06T20:14:17.523

像这样的东西。rcook给出的答案非常正确。它只是展示如何完成的示例。

```
 b1 = new JLabel("<html>Default Lable I have to resize the
                 <br/> window to see the complete text.</html>"); 
```

# android - Spinner 不应用 dropDownSelector 属性

> ID：14737811
> 
> 赞同：13
> 
> 时间：2013-02-06T20:07:58.310
> 
> 标签：android, spinner, android-spinner

我正在使用微调器并想添加微调器 - 改变行为取决于状态（聚焦，按下）

示例项目在这里[https://github.com/vovs/spinner_issue](https://github.com/vovs/spinner_issue)

我的代码：

**activity_main.xml**

```
<Spinner
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="30dp"
        android:spinnerMode="dropdown"
        android:dropDownSelector="@drawable/spinner_state" /> 
```

**spinner_state.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_enabled="false"
        android:drawable="@color/black" />
    <item
        android:state_pressed="true"
        android:state_enabled="true"
        android:drawable="@color/red" />
    <item
        android:state_focused="true"
        android:state_enabled="true"
        android:drawable="@color/red" />
    <item
        android:state_enabled="true"
        android:drawable="@color/gray" />
</selector> 
```

**安卓清单：**

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

因此，如果我在模拟器 Android 4.0.2 API 14 中运行应用程序并尝试使用鼠标滚轮选择某些项目或滚动没有任何效果，我在选择器中设置（按下或滚动时 - 项目应该是红色的，但它是蓝色 - ICS 颜色的默认值）。

对于 Android 2.2 API 8，当使用滚轮按下或滚动时（在这种情况下，状态为焦点）颜色为黄色 [橙色]（Android 2.2 的默认颜色）

如何启用微调器的选择器？

![在此处输入图像描述](../Images/972d9e2d29327df017f838b1316642c3.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-26T13:43:48.760

也是一个官方错误... [https://code.google.com/p/android/issues/detail?id=24922](https://code.google.com/p/android/issues/detail?id=24922)

有什么帮助：

```
<resources>
    <style name="Theme.MyTheme" parent="@android:style/Theme.Holo.Light">
        <item name="android:dropDownListViewStyle">@style/Theme.MyListView</item>
    </style>

    <style name="Theme.MyListView" parent="@android:style/Widget.Holo.Light.ListView">
        <item name="android:listSelector">@drawable/orange_list</item>
    </style>
</resources> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-03T03:43:24.707

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/lighter_gray_no_transparent" />
    <item android:state_selected="true" android:drawable="@color/lighter_gray_no_transparent" />
    <item android:state_pressed="true" android:drawable="@color/lighter_gray_no_transparent" />
    <item android:drawable="@android:color/transparent"/>
</selector>

<color name="lighter_gray_no_transparent">#FFDDDDDD</color> 
```

为您的项目视图设置背景选择器，仅此而已。为我工作。***颜色的alpha值应该是FF，否则会显示橙色背景***，左边的颜色值是**#FFDDDDDD**，右边的是**#55DDDDDD**

![在此处输入图像描述](../Images/c059a5b390e40284f546557a5c4f00cb.png) ![在此处输入图像描述](../Images/2d506d5123ab3468f5cdaaf0543d0f84.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T17:25:37.307

可能还有其他方法，但这是我从使用其中一个[Generators](http://android-holo-colors.com/ "Android Holo 颜色生成器")中所理解的。

`res/values/styles.xml`在指向您的可绘制对象时为微调器声明您自己的样式。

```
<style name="myCustomSpinner" parent="android:Widget.Holo.Light.Spinner">
    <item name="android:background">@drawable/spinner_state</item>
</style> 
```

创建`res/values/themes.xml`并声明您自己的从当前主题继承的主题。在此主题中，为您正在修改的每个属性添加一个项目，并将其指向上一步中的自定义样式。我认为如果您愿意，这可以放在样式文件中，但是由于生成器将它们分开，我也照做。

```
<style name="myCustomTheme" parent="android:Theme.Light">
    <item name="android:dropDownSpinnerStyle">@style/myCustomSpinner</item>
</style> 
```

在您的`AndroidManifest`中，添加`android:theme="@style/myCustomTheme"`到开始`application`标签。

您的值`parent`将取决于项目的设置方式，我认为这将是您项目中微调器的样式，而不仅仅是一个。试试看，让我知道你得到了什么。

# cygwin - cygwin上的clang llvm非常长的编译时间

> ID：14737813
> 
> 赞同：4
> 
> 时间：2013-02-06T20:08:06.907
> 
> 标签：cygwin, llvm, clang

嗨，我一直在使用 CC=gcc-4 和 CXX=g++-4 标志在我的 cygwin env 上编译 llvm 和 clang，因为 gcc 3.4.x 似乎根本无法编译 llvm clang。但我的问题是关于长时间的编译时间。我从晚上 8 点开始编译，现在是凌晨 1:35。我的构建目录的大小也超过了 8 GB。我仍然看到

```
llvm[5]: Linking Debug+Asserts executable clang-format 
```

这是正常的吗？我能以某种方式让它更快吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T04:26:05.900

以下是一些统计数据

编译器：GCC 4.5.3 Clang，LLVM：3.2

*   一个 Debug+Assert 构建花了我大约 8 个小时来构建，总构建大小超过 11 GB。

*   一个 Release+assert 只用了 1 个小时，构建了 800 兆字节。

同样对于发布版本（使用**--enable-optimized**配置），我使用 make 和**-j 4**。但我高度怀疑编译时间长主要是由于构建过程本身警告的调试构建。

```
Note: Debug build can be 10 times slower than an optimized build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:26:52.550

我怀疑这是因为 Cygwin。您应该能够使用 MS Visual Studio 构建它们，并且有些人已经使用 Mingw 完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:38:19.913

你所看到的几乎是预期的。LLVM / clang 是用 C++ 编写的。因此，那里有大量的调试信息。Linker 很难将所有内容合并在一起。

在 Linux 上，通常的建议是尝试使用 gold 而不是 ld。这通常会使一切速度提高十倍。

# asp-classic - MsRdpClient - 使用查询字符串参数打开

> ID：14737814
> 
> 赞同：0
> 
> 时间：2013-02-06T20:08:11.600
> 
> 标签：asp-classic, rdp, request.querystring

我目前正在尝试通过打开一个新选项卡并传递动态服务器名称来在 Web 浏览器中打开一个 MsRdpClient 连接。但是，以下代码似乎不起作用，我无法动态填充任何必需的值，即服务器名称和可用的屏幕宽度和高度。

```
resWidth = request.querystring("width")
    resHeight = request.querystring("height")

    MsRdpClient.DesktopWidth = resWidth
    MsRdpClient.DesktopHeight = resHeight

    MsRdpClient.Width = resWidth
    MsRdpClient.Height = resHeight
    MsRdpClient.server = request.querystring("fqdn")

    MsRdpClient.username = "username"
    MsRdpClient.AdvancedSettings.ClearTextPassword = "password"

    MsRdpClient.AdvancedSettings2.RDPPort = "3389"
    MsRdpClient.Connect 
```

我真的不知道从这里去哪里。我看到它已经在几个板上被问过了，但似乎没有人想出答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:58:26.733

下面是我最终使用的脚本。通过 scriptlet 放入所需的变量就是诀窍。即“<%=fqdn%>”

```
resWidth = (screen.AvailWidth - 45)
resHeight = (screen.AvailHeight - 150)        

MsRdpClient.DesktopWidth = resWidth
MsRdpClient.DesktopHeight = resHeight

MsRdpClient.Width = resWidth
MsRdpClient.Height = resHeight
MsRdpClient.server = "<%=fqdn%>"

MsRdpClient.AdvancedSettings2.RDPPort = "3389"
MsRdpClient.Connect

sub MsRdpClient_OnDisconnected(disconnectCode)

history.go(-1)

end sub 
```

# android - 需要让蓝牙聊天示例应用程序在我的 Galaxy S3 或 HTC EVO 4G 上运行

> ID：14737816
> 
> 赞同：0
> 
> 时间：2013-02-06T20:08:35.133
> 
> 标签：android, bluetooth, chat, sample

当我在 Eclipse 上创建一个新的 BlueToothChat 项目时，它编译得非常好，然后我可以将它下载到我的 Galaxy S3（运行 Android 4.1.1）中。如果 BT 被禁用，它会要求启用它。当我这样做时，应用程序进入然后崩溃：

```
02-06 13:40:52.959: E/AndroidRuntime(25405): FATAL EXCEPTION: main
02-06 13:40:52.959: E/AndroidRuntime(25405): java.lang.NoSuchMethodError: com.example.android.BluetoothChat.BluetoothChat.getActionBar
02-06 13:40:52.959: E/AndroidRuntime(25405):    at com.example.android.BluetoothChat.BluetoothChat.setStatus(BluetoothChat.java:234)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at com.example.android.BluetoothChat.BluetoothChat.access$4(BluetoothChat.java:233)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at com.example.android.BluetoothChat.BluetoothChat$2.handleMessage(BluetoothChat.java:260)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at android.os.Looper.loop(Looper.java:150)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at android.app.ActivityThread.main(ActivityThread.java:4263)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at java.lang.reflect.Method.invokeNative(Native Method)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at java.lang.reflect.Method.invoke(Method.java:507)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-06 13:40:52.959: E/AndroidRuntime(25405):    at dalvik.system.NativeStart.main(Native Method) 
```

然后我用运行 Android 2.3.5 的 HTC EVO 4G 重复了完全相同的测试。完全相同的问题！

我已经找到了这个问题，但答案不好。解释是显然 getActionBar() 调用会生成 NULL。我尝试了两种建议的解决方案，但都没有解决问题。一个本应完美无瑕的示例应用程序不起作用，这有点烦人！

关于如何使蓝牙聊天应用程序工作的任何其他建议？我需要将串行数据发送到一个应用程序，并找到了一个很好的教程，几乎可以使用这个应用程序，但如果应用程序在不同平台上崩溃，那就没用了。感谢您提供的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:16:49.230

有两种方法可以使示例在您的设备上运行。首先只需注释这些代码行，这样它们就不会编译。第二种方法只是将`ActionBarSherlock`作为库添加到您的项目中，而不是`getActionBar()`使用`getSupportActionBar()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:25:29.523

您可以轻松找到与操作栏相关的所有代码，或者您可以在此链接中追踪问题的根源[getActionBar return null](https://stackoverflow.com/questions/6867076/getactionbar-returns-null)

根据 android 文档，**如果没有操作栏，Activity 将返回 null**

请参阅此链接：[Android getActionBar() Doc](http://developer.android.com/reference/android/app/Activity.html#getActionBar%28%29)

# c# - 从 C# 中父级创建的实例访问嵌套类

> ID：14737820
> 
> 赞同：0
> 
> 时间：2013-02-06T20:08:58.207
> 
> 标签：c#, .net

我在 C# 中的类层次结构方面遇到了一些问题。我环顾四周并尝试了一些事情，但找不到任何不起作用的原因，也许我只是不了解嵌套类的可见性。

```
class Settings
{
    class Graphics
    {
        class Resolution
        {
            public int Width { get; set; }
            public int Height { get; set; }
        }

        public Resolution Resolution = new Resolution();
        public bool VSync { get; set; }
    }

public Graphics Graphics = new Graphics();

    public Settings()
    {
    // Graphics.Resolution is not visible here, nor is Graphics.VSync;
    }
} 
```

我希望图形和分辨率嵌套，因为我不希望通过设置以外的任何地方访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:11:16.880

内部类的[默认可访问性](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)`private`是.

将其更改为`public`或`internal`获取包含类之外的访问权限。

* * *

您的代码中一个不相关的问题是您正在声明具有相同名称的成员 -`Resolution`并且`Graphics`既是类名又是其他成员（分别是属性和字段）。

# ios - 接近传感器是私有api吗？

> ID：14737824
> 
> 赞同：0
> 
> 时间：2013-02-06T20:09:07.110
> 
> 标签：ios, api, proximity

[Apple 在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)记录了接近传感器，所以我想它是一个公共 api。我听说过，并想在提交给商店之前仔细检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:31:37.603

过去，接近传感器是一个私有 API，但经过一番强烈抗议后，Apple 将其设为公共 API。

使用`UIDevice`API，您可以根据您的需要查询接近传感器，如您提供的链接中所述。

# ruby-on-rails - will_paginate 和acts_as_indexed 产生奇怪的分页结果

> ID：14737833
> 
> 赞同：0
> 
> 时间：2013-02-06T20:09:33.500
> 
> 标签：ruby-on-rails, pagination, will-paginate, ruby-on-rails-2

我正在通过使用acts_as_indexed 和will_paginate 来实现搜索功能。我正在使用 Ruby 1.8.7 和 Rails 2.3.11。不，我无法升级 Ruby，因为我使用的是共享主机。

定期使用“分页”方法会产生预期的结果，但是当使用“分页搜索”（acts_as_indexed 分页方法）时，我会得到奇怪的结果：

- 葡萄酒都是从数据库中检索到的（我查看了日志，查询看起来不错）
- 是分页搞砸了，产生了不一致的“每页”结果

假设搜索结果为 3 个对象：

将 per-page 设置为 1，得到 18 页，除了第 4、12 和 18 页之外都没有结果
将 per-page 设置为 2，得到 9 页，除了第 2、6 和 9 页之外，所有页面都没有结果（在这里看到一个模式？）
设置每页到 3，除了第 2、4 和 6 页之外，得到 6 页没有结果
- 以上所有模式每个结果页产生 1 个结果

等等等等......似乎有一些时髦的数学正在发生，但我不知道在哪里或为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:16:10.700

好的，我想出了解决这个问题的方法。本质上，我在搜索功能中设置了一个条件，这只是以某种方式搞砸了。这是一个简单的“stock > 0”字符串，我不知道为什么它会与acts_as_indexed 混淆，但无论如何。解决方法是添加一个名为“stocked”的搜索属性。任何有库存的产品都可以通过“库存”一词进行搜索，而任何没有库存的葡萄酒都不会具有该属性。我没有在搜索方法中加入 :conditions 参数，而是在必要时将“stocked”字符串附加到搜索字符串中。现在可以了。下面的代码片段：

**Wine.rb**

```
# ... = indicates other attributes
acts_as_indexed :fields => [..., :stock_search]

def stock_search
    'stocked' if stock > 0
end 
```

**wines_controller.rb**

```
srch = "#{ safe_tags * " " }#{ ' stocked' if params[:search_all].nil? }"
@wines = Wine.paginate_search(srch, :page => pg, :per_page => 10, :include => [{:awards => [:medal, :competition]}, {:reviews => :reviewer}]) 
```

回顾一下：

这有效：`Wine.paginate_search("cabernet stocked", :page => pg, :per_page => 10)`

这不会：`Wine.paginate_search("cabernet", :conditions => "stock > 0", :page => pg, :per_page => 10)`...从技术上讲，搜索有效，但分页无效。

希望这对遇到同样问题的人有所帮助。

# node.js - 在 heroku 上使用 mongojs 连接到 mongoHQ

> ID：14737840
> 
> 赞同：2
> 
> 时间：2013-02-06T20:09:45.557
> 
> 标签：node.js, mongodb, heroku, mongohq, mongojs

我正在尝试从我的 node.js 应用程序连接到 mongoHQ。这是我正在使用的代码：

```
 var databaseUrl = "mongodb://fishcuss:MyPassword@alex.mongohq.com:10015/app9759558"
 var collections = ["users"]
 var db = require("mongojs").connect(databaseUrl, collections);

 exports.register = function(req, res){
   console.log("Register hit")
   var user = req.body;
   db.users.findOne({username:user.username}, function(err, users) {
     console.log(err)
     console.log(users);
     if( err || users) {
         res.statusCode = 500;
         res.end();
     }
     else {
         console.log("Inserting new user")
         user._id = uuid.v4();
         user.lists = [];
         db.users.insert(user,{},function(){
             req.session.user=user
             res.write(JSON.stringify(user), 'UTF-8');
             res.statusCode = 200;
             res.end();
         })
     } ;
 });
}; 
```

但是我似乎得到了这个错误

```
{ [MongoError: auth fails] name: 'MongoError', errmsg: 'auth fails', ok: 0 } 
```

这让我相信我在我的联系中遗漏了一些东西。任何人都暗示那可能是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:27:31.787

我不确定为什么您的代码不起作用，但我相信您需要在打开连接后进行身份验证。

我也使用 Heroku + MongoLAB，并且使用[mongo-db-native](https://github.com/mongodb/node-mongodb-native)驱动程序。这种组合似乎效果很好。

看看我在下面做什么：

```
var mongodb = require('mongodb');
mongo_client = new mongodb.Db(mongo_db_name, new mongodb.Server(mongo_url, mongo_port), {safe:true});

mongo_client.open(function(err, p_client) {

    if (err)
        console.warn("MONGO ERROR:" + err.message);

    p_client.authenticate(mongo_db_username,mongo_db_password,{},function(err,success){
        if (err) {
            console.warn("MONGO ERROR: unauthorized "+ err.message);

        } else {
            console.log("MONGO Authorized");
            mongo_messages_collection = new mongodb.Collection(p_client, 'messages');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T06:05:02.490

您使用的用户名/密码可能不匹配。如果您不确定，请在 mongohq 控制台上创建一个新用户并使用这些凭据。

# java - 使用 localhost 而不是 gmail 发送邮件

> ID：14737845
> 
> 赞同：5
> 
> 时间：2013-02-06T20:10:00.433
> 
> 标签：java, smtp, gmail, jakarta-mail, glassfish-3

所以，我正在尝试通过 javamail 和 glassfish 发送电子邮件：这是我的代码（我在这里找到它[http://www.javasrilankansupport.com/2012/05/send-email-in-java-mail-api -使用-gmail.html](http://www.javasrilankansupport.com/2012/05/send-email-in-java-mail-api-using-gmail.html)）

```
private Session m_Session;
private Message m_simpleMessage;
private InternetAddress m_fromAddress;
private InternetAddress m_toAddress;
private Properties m_properties;
@Override
public void sendMail(String mail) throws Exception {
    try {

        m_properties     = new Properties();
        m_properties.put("mail.smtp.host", "smtp.gmail.com");
        m_properties.put("mail.smtp.socketFactory.port", "465");
        m_properties.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
        m_properties.put("mail.smtp.auth", "true");
        m_properties.put("mail.smtp.port", "465");
        m_properties.put("mail.debug", "false");
        m_properties.put("mail.smtp.ssl.enable", "true");

        m_Session        =   Session.getDefaultInstance(m_properties,new Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("user@gmail.com","password"); // username and the password
            }

        });

        m_simpleMessage  =   new MimeMessage(m_Session);

        m_fromAddress    =   new InternetAddress("user@gmail.com");
        m_toAddress      =   new InternetAddress(mail);

        m_simpleMessage.setFrom(m_fromAddress);
        m_simpleMessage.setRecipient(RecipientType.TO, m_toAddress);
        m_simpleMessage.setSubject("Test letter");
        m_simpleMessage.setContent("Hi, this is test letter.","text/plain");

        Transport.send(m_simpleMessage);

    } catch (MessagingException ex) {
        ex.printStackTrace();
    }
} 
```

但是在服务器上使用此功能后，我发现了异常：

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
  nested exception is:
    java.net.ConnectException: Connection refused: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at com.kma.summer2012.facade.PasswordRecoveryFacadeImpl.sendMail(PasswordRecoveryFacadeImpl.java:49)
    at com.kma.summer2012.server.CrumbsUserServiceImpl.sendMailRecovery(CrumbsUserServiceImpl.java:83)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:288)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
    ... 42 more 
```

据我了解，该功能想要使用 localhost 和 25 端口而不是 gmail 的主要问题，我不知道为什么。注意 telnet smtp.gmail.com 25，telnet smtp.gmail.com 465 工作良好。任何建议这是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:45:35.700

尝试修复其中一些[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。另请参阅[如何使用 JavaMail 连接到 Gmail](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。

# smtp - 有没有一个简单的例子如何使用 Tornado 发送电子邮件？

> ID：14737854
> 
> 赞同：0
> 
> 时间：2013-02-06T20:10:19.003
> 
> 标签：smtp, tornado

对不起这个问题，

我只需要一个简单的例子来了解 SMTP 如何与 Tornado 一起工作；

我需要什么，如果我有一个简单的应用程序，那么我需要在 Gmail 或 Yahoo 上开设一个新帐户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:43:57.403

Tornado 不提供任何东西来处理 SMTP。

您可以使用[smtplib](http://docs.python.org/2/library/smtplib.html)，尽管它是同步的。[查看给出的示例](http://docs.python.org/2/library/smtplib.html#smtp-example)。

# android - Android Google plus 如何不分享我的位置

> ID：14737855
> 
> 赞同：0
> 
> 时间：2013-02-06T20:10:19.850
> 
> 标签：android, share, google-plus

事情是这样的，当您使用 android Google 共享时，它会执行以下操作：

对于您第一次尝试分享任何内容，当您被要求思考您使用 Google plus 应用程序获得的所有内容（包括您的鞋底）时，您将获得 5 个步骤的过程。

然后您最终将被重定向到分享活动，首先在加载 5 秒时开始，以便将您当前的位置附加到帖子中。

让我们忽略第一次（难忘的）时间。但是对于其他所有时间，当我希望从我的应用程序中分享一些东西时，我怎么能在不附加用户位置的情况下做到这**一点**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:40:10.103

你不能。当您广播 Intent 以共享某些内容（如文本）并且用户选择一个应用程序来完成操作时，它完全不受您的控制。（谢天谢地）没有可以设置的标志来禁止诸如在 Intent 的另一端附加位置之类的事情。

想想允许意图的发送者决定接收者如何处理它的含义。您无法预测用户将如何分享某些内容。如果他们不想分享位置，他们会删除它。如果他们确实想分享位置，您不应该阻止他们。如果他们不喜欢 Google Plus 的速度有多慢，他们就不会使用它。

这不是你的问题，试图让它成为你的问题只会让用户感到沮丧。

# ruby-on-rails - ActiveRecord 自定义属性

> ID：14737856
> 
> 赞同：0
> 
> 时间：2013-02-06T20:10:21.790
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有 3 个简单的模型：

```
class User < ActiveRecord::Base
    has_many    :subscriptions
end

class Game < ActiveRecord::Base
    has_many    :subscriptions
end

class Subscription < ActiveRecord::Base
    belongs_to  :user
    belongs_to  :game
end 
```

我想知道的是，当我查询游戏时是否有可能包含另一个名为“is_subbed”的属性，该属性将包含特定用户是否订阅了游戏？就像是：

```
a_user = User.first

games = Game.scoped
games.conditions blah blah blah 
```

并且游戏将包含一个“虚拟”或内存属性，该属性将为 a_user 自定义，称为 is_subed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:13:31.780

您可以像这样创建一个类方法和一个实例方法（对于单个游戏）：

```
class Game < ActiveRecord::Base
  def self.subscribed?(user)
    joins(:subscriptions).where(subscriptions: { user_id: user.id}).exists?
  end

  def subscribed?(user)
    subscriptions.where(user_id: user.id).exists?
  end
end 
```

要使用查询 API 为每个游戏获取此结果，您可以执行以下操作：

```
scope :with_subscriptions, lambda do |user|
  joins("LEFT JOIN subscriptions ON subscriptions.game_id = games.id AND subscriptions.user_id = #{user.id}")
  select("games.*, CASE WHEN subscriptions.user_id IS NULL THEN true ELSE false END as is_subscribed")
end 
```

这将为您`is_subscribed`返回的每个游戏对象提供一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:41:56.817

如果我没记错的话，您需要获取某些用户订阅的游戏并在这些游戏上应用一些范围？可能这种方式是可以接受的

```
# extend user model with games collection
class User < ActiveRecord::Base
    # your code
    has_many :games, through: :subscriptions
end 
```

然后在控制器（或您需要的任何地方）中调用

```
@user.games.your_games_scope1.your_games_scope2.etc 
```

对不起，如果我误解了你

# ruby-on-rails - ActiveRecords 关联：nil:NilClass 的未定义方法

> ID：14737857
> 
> 赞同：1
> 
> 时间：2013-02-06T20:10:22.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, model-associations

首先，这是我的第一个 Rails 应用程序，所以请放纵...我阅读了[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)中的 Rails 关联指南，然后开始编写我自己的项目。我的问题是我不能做像@project.user.email 这样的事情，因为@project.user 似乎一直都是零。这发生在所有对象上。@user.role.name 还会抛出“nil:NilClass 的未定义方法”；我确定我在模型定义方面做错了，但我不明白它是什么。我感谢您的帮助。谢谢。

```
 class Role < ActiveRecord::Base
      has_many :users
      attr_accessible :name
   end

   class User < ActiveRecord::Base
      belongs_to :role
      has_many :projects
      attr_accessible :email, :password, :password_confirmation, :role_id, :role  
   end

   class Project < ActiveRecord::Base
      belongs_to :user
      belongs_to :project_type
      attr_accessible :id, :project_type_id, :title, :description  
   end

   class Project_Type < ActiveRecord::Base
      has_many :projects
      attr_accessible :name
   end 
```

例如，我所做的项目的索引视图（HAML）：

```
 %td= proyecto.user.email 
```

这是行不通的。然而，

```
 %td= proyecto.user_id 
```

工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:21:25.833

当您创建一个新项目时，所有关联都将默认为零，除非您在迁移中设置了某种类型的默认值。你可以在那里做几件事。

首先，您可以手动设置用户：

```
@user = User.find(5)
@project = Project.new
@project.user = @user 
```

此外，您可以从用户那里构建新项目。该`build`方法是从`has_many`关联中自动添加的。

```
@user = User.find(5)
@project = @user.projects.build 
```

现在`@project`将包含一个与 id 为 5 的用户关联的项目。您还需要确保告诉 Rails 关联是什么，否则关联将不起作用。

# matlab - Matlab将变量添加到堆栈

> ID：14737861
> 
> 赞同：0
> 
> 时间：2013-02-06T20:10:43.093
> 
> 标签：matlab, variables, stack

我是 Matlab 的初学者，我没有时间学习它。所以我有下一个问题。

我使用字符串数据类型，如`x = 2; y = 3; z = x + y;`. 我需要声明一些变量并使用它们。我可以将变量添加到堆栈吗？我可以写像这样的函数吗

```
function addVar(name, value) {
    stack[name] = value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:26:02.557

尝试结构：

```
>> s = struct;
>> s.a = 'a string';
>> s.b = 3;
>> s.c = zeros(5);
>> s

s = 

    a: 'a string'
    b: 3
    c: [5x5 double] 
```

但总的来说，Matlab 不需要变量声明。这里有更多细节： http: [//www.mathworks.com/matlabcentral/answers/31248-variable-declaration-in-matlab](http://www.mathworks.com/matlabcentral/answers/31248-variable-declaration-in-matlab)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:11:40.123

您可以使用元胞数组：

```
data{1} = 'x = 2';
data{2} = 'y = 3';
data{3} = 'z = x+y' 
```

这将产生

```
>> data    
data = 

    'x = 2'    'y = 3'    'z = x+y' 
```

然后你可以使用它，例如，像这样：

```
>> for k = 1:length(data), eval(data{k}), end
x =
     2

y =
     3

z =
     5 
```

# php - mysqli_fetch_assoc 返回重复数据

> ID：14737862
> 
> 赞同：1
> 
> 时间：2013-02-06T20:10:47.480
> 
> 标签：php, mysql, mysqli, fetch

这里有非常[相似的问题](https://stackoverflow.com/questions/11957541/mysql-fetch-array-returns-duplicate-data)，但是经过大量搜索和尝试不同的事情后，我仍然被卡住了。

用于`mysqli_fetch_assoc()`填充数组时，每行添加两次。

```
$query = "SELECT column FROM table WHERE year = 2012";
if ($result = mysqli_query($connect, $query)) {
  while ($row = mysqli_fetch_assoc($result)) {
    $data[] = $row["column"];
  }
echo implode(',', $data);
mysqli_free_result($result);
} 
```

这将返回以下内容： `1,2,3,4,5,6,7,8,9,10,1,2,3,4,5,6,7,8,9,10`

我期待着`1,2,3,4,5,6,7,8,9,10`

我添加了一些额外的行来进行一些调试......

`print_r($data)`产量

```
Array ( 
[0] => 1 
[1] => 2 
[2] => 3 
[3] => 4 
[4] => 5 
[5] => 6 
[6] => 7 
[7] => 8 
[8] => 9 
[9] => 10 
[10] => 1 
[11] => 2 
[12] => 3 
[13] => 4 
[14] => 5 
[15] => 6 
[16] => 7 
[17] => 8 
[18] => 9 
[19] => 10 ) 
```

`print_r($result);`产量

```
mysqli_result Object 
( 
[current_field] => 0 
[field_count] => 1 
[lengths] => 
[num_rows] => 10 
[type] => 0 
) 
```

如果`[num_rows] => 10`，并且我正在使用`mysqli_fetch_assoc()`而不是`mysqli_fetch_array()`，为什么要将值添加到数组中两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:15:25.620

可能您已经为`$data`数组分配了一些数据。尝试在`while`指令前清空它：

```
$query = "SELECT column FROM table WHERE year = 2012";
if ($result = mysqli_query($connect, $query)) {
  $data = array();
  while ($row = mysqli_fetch_assoc($result)) {
    $data[] = $row["column"];
  }
echo implode(',', $data);
mysqli_free_result($result);
} 
```

看看它输出了什么。

我相信`column`这不是一个真正的列名，否则你会得到一个错误。

# css - 使最后一个内联列表项扩展容器的剩余宽度

> ID：14737863
> 
> 赞同：5
> 
> 时间：2013-02-06T20:10:48.583
> 
> 标签：css, list

我正在寻找一种方法来使最后一个内联列表项扩展其容器的其余部分。所以我有这样的东西。

```
<nav>
  <ul>
     <li></li> //width = 50px
     <li></li> //width = 50px
     <li class="last"></li> //width needs to fill the remaining 300px
  </ul>
</nav>

nav {
  width:400px;
  height:50px;
}
nav > ul > li {
  display:inline-block;
  padding:5px;
} 
```

现在列表项的数量会有所不同，因此我无法将最后一个列表项设置为设定的宽度。我需要让它填充导航宽度中剩余的任何内容。如何仅使用 css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:32:32.637

您可以使用`display: table`（并且`table-cell`，至少对于 Firefox，`table-row`）`table-layout: fixed`来获取表格算法，其中作者（您）指示的宽度由浏览器应用，而不是浏览器尽力调整单元格宽度的其他方式到他们的内容。
然后将 50px 的宽度应用于除最后一个以外的所有“单元格”。
我在其父级上使用`table-row`了 on`ul`和`table`on ，`nav`因为在 Fx 18`display: table`上设置`ul`没有达到预期的效果（与浏览器相关的东西必须创建缺失的部分，也就是充当中间行的*阴影元素）。*非常具有描述性（*这个元素必须呈现为表格，这个元素必须呈现为一行，这些元素必须呈现为单元格*) 有帮助。

在这里小提琴：http: [//jsfiddle.net/X6UX9/1/](http://jsfiddle.net/X6UX9/1/)

**HTML：**

```
<nav>
  <ul>
     <li> //width = 50px</li>
     <li>//width = 50px</li>
     <li class="last">//width (...) 300px</li>
  </ul>
</nav> 
```

**CSS：**

```
* {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
}
nav {
    display: table;
    table-layout: fixed;
    width:400px;
    height:50px;
}
nav > ul {
        display: table-row;
}
nav li {
    display: table-cell;
    padding:5px;
    outline: 1px dashed blue;
}
nav li:not(:last-child) {
    width: 50px;
} 
```

PS：`:last-child`用于设置宽度与 IE9+ 兼容，而不是 IE8+，正如我在小提琴中所述...

编辑：哎呀，我上次没有看到你的`.last`课`li`。好吧，你明白了:)
edit2：使用这个类更新小提琴，既不伪`:not()`也不`:last-child`伪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-29T05:21:04.200

2019 年更新：

```
ul { 
    display: flex;
}
ul li:last-child {
    flex: 1; 
} 
```

# c# - C# SQLite 删除不起作用

> ID：14737869
> 
> 赞同：0
> 
> 时间：2013-02-06T20:11:11.393
> 
> 标签：c#, sqlite

我有这个辅助功能：

```
public bool Delete(String tableName, String where)
    {
        Boolean returnCode = true;
        try
        {
            this.ExecuteNonQuery(String.Format("delete from {0} where {1};", tableName, where));                
        }
        catch (Exception fail)
        {
            MessageBox.Show(fail.Message);
            returnCode = false;
        }
        return returnCode;
    } 
```

TableName 包含“[MyTable]”，其中包含“[MyTable ID]='4ffbd580-b17d-4731-b162-ede8d698e026'”，这是表示行 ID 的唯一 guid。

该函数返回true，就像它成功一样，也不例外，但是行没有从DB中删除，这是怎么回事？

这是 ExecuteNonQuery 函数

```
 public int ExecuteNonQuery(string sql)
    {
        SQLiteConnection cnn = new SQLiteConnection(dbConnection);
        cnn.Open();
        SQLiteCommand mycommand = new SQLiteCommand(cnn);
        mycommand.CommandText = sql;
        int rowsUpdated = mycommand.ExecuteNonQuery();
        cnn.Close();
        return rowsUpdated;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T20:14:43.670

首先，你不应该像那样嵌入 SQL。您应该使用*参数化*SQL，以避免 SQL 注入攻击。

接下来，您应该查看 的返回值`ExecuteNonQuery`。假设它遵循 的*正常*模式`ExecuteNonQuery`，它应该返回受影响的行数。我怀疑它返回 0，这意味着没有任何内容与您的`where`子句匹配。

（我也会停止捕捉`Exception`- 可能会停止捕捉*任何东西*，但如果必须的话，至少捕捉一些特定的东西。我也会摆脱局部变量，当你知道你想要返回什么时直接返回...... )

# java - 无论如何做Hibernate逆向工程而不在对象中放置外键

> ID：14737881
> 
> 赞同：0
> 
> 时间：2013-02-06T20:12:00.457
> 
> 标签：java, mysql, hibernate

无论如何要在不将外键放入对象的情况下进行 Hibernate 逆向工程。

我正在尝试对我的 mysql 数据库进行 Hibernate 逆向工程，但我不希望对象显示外键.. 可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T21:45:47.800

这里的问题完全相同，您应该在不允许更改表的情况下使用对该数据库的新访问权限。

所以：创建一个具有 DBA 的新用户，不添加 alter table 权限，并使用此连接参数访问此 DB，这种方式 alter table 是不可能的！（我知道的解决方法）

原因可能是这种解决方法，例如 Liferay 不使用外键，如果休眠把表弄乱了，整个系统就会崩溃......

# javascript - 如何使用字符串调用函数

> ID：14737882
> 
> 赞同：1
> 
> 时间：2013-02-06T20:12:07.530
> 
> 标签：javascript, .net, html

我正在从表格的所有标题中创建一个字符串，为每个标题制作一个复选框，如果未选中它应该隐藏 col 并显示它是否选中。该函数将所有复选框放在一个div中。

我在加载页面时调用该函数（在正文中加载）

这是我的功能：

```
function getFirstRow(table) {
    var table = document.getElementById(table);
    var row = table.getElementsByTagName('tr')[0];
    var cells = row.getElementsByTagName('th');
    var str = "";
    for (var i=0; i < cells.length; i++) {
        str += "<input type='checkbox' onclick='hideOrShowCol('TreesTable', "+i+", this);' checked='checked' />" + cells[i].innerHTML + " ";
    }
    document.getElementById("hideAndShow").innerHTML = str;
} 
```

这是隐藏/显示功能：

```
function hideOrShowCol(table, col, e) {
    alert(e.checked);
    var ifToShow = "";
    if (e.checked)
        ifToShow = "table-cell";
    else
        ifToShow = "none";
    var getTable = document.getElementById(table);
    var tds = getTable.getElementsByTagName("tr");
    for (var i = 0; i < tds.length; i++) {
        tds[i].childNodes[col].style.display = ifToShow;
    }
} 
```

所以问题是当我使用第一个函数创建复选框时它没有调用该函数，但是当我直接在 html 中编写它时它工作正常，如下所示：

```
<input type="checkbox" onclick="hideOrShowCol('TreesTable', 2, this);" checked="checked" /> 
```

有人知道它可能是什么？我尝试了一切...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:15:14.223

`"<input type='checkbox' onclick='hideOrShowCol('TreesTable', "+i+", this);' checked='checked' />"`无效，因为“TreesTable”中的单引号嵌套在 onclick 的单引号内。

尝试更改为`"<input type='checkbox' onclick='hideOrShowCol(\"TreesTable\", "+i+", this);' checked='checked' />"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:19:01.147

尝试关闭“i”并将其传递给匿名自调用函数：

```
for (var i=0; i < cells.length; i++) {
    (function(indx) {
        str += "<input type='checkbox' onclick='hideOrShowCol('TreesTable', "+indx+", this);' checked='checked' />" + cells[indx].innerHTML + " ";
    })(i);
} 
```

# ruby-on-rails - 我无法安装“tu nnel-vmc-plugin”来启用隧道

> ID：14737886
> 
> 赞同：1
> 
> 时间：2013-02-06T20:12:25.590
> 
> 标签：ruby-on-rails, cloud-foundry, tunnel, tunneling, vmc

我在 Cloud Foundry 上部署了一个 Rails 应用程序，每次运行 vmc 隧道时，我都会收到以下错误：

```
Please install 'tunnel-vmc-plugin' to enable tunnelling.
Pardon the extra step; it can't be a direct dependency because it
requires native compilation. 
```

谁能告诉这里发生了什么？谢谢。

这是附加信息：

```
Rails 3.2.8
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-darwin10.8.0]
vmc 0.5.0.beta.10 
```

以下是所有宝石：

```
actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
addressable (2.3.2, 2.2.8)
arel (3.0.2)
async_sinatra (0.5.0)
bootstrap-sass (2.1.0.1)
builder (3.0.4)
bundler (1.2.3)
caldecott-client (0.0.2)
cf-uaa-lib (1.3.7)
cfoundry (0.5.0, 0.4.20, 0.4.19)
chunky_png (1.2.7, 1.2.6)
clouseau (0.0.2)
compass (0.12.2)
compass-rails (1.0.3)
console-vmc-plugin (0.0.4)
daemons (1.1.9)
em-http-request (0.3.0)
em-websocket (0.3.8)
erubis (2.7.0)
escape_utils (0.2.4)
eventmachine (1.0.0)
execjs (1.4.0)
fssm (0.2.10, 0.2.9)
haml (3.1.7)
haml-rails (0.3.5)
hike (1.2.1)
i18n (0.6.1)
interact (0.5.2)
journey (1.0.4)
jquery-rails (2.2.0, 2.1.4)
json (1.7.6, 1.7.5, 1.6.7)
json_pure (1.6.7)
mail (2.4.4)
manifests-vmc-plugin (0.5.0, 0.4.19)
mime-types (1.20.1, 1.19)
mothership (0.5.0, 0.3.5)
multi_json (1.5.0, 1.4.0)
multipart-post (1.1.5)
mysql2 (0.3.11)
open4 (1.3.0)
Platform (0.4.0)
polyglot (0.3.3)
POpen4 (0.1.4)
rack (1.4.4, 1.4.1)
rack-cache (1.2)
rack-protection (1.3.2)
rack-ssl (1.3.3, 1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (10.0.3)
rdoc (3.12)
rest-client (1.6.7)
rubygems-bundler (1.1.0)
rubyzip (0.9.9)
rvm (1.11.3.6)
sass (3.2.5, 3.2.4)
sass-rails (3.2.6, 3.2.5)
sinatra (1.3.4)
sprockets (2.1.3)
sqlite3 (1.3.6)
thin (1.5.0)
thor (0.17.0, 0.16.0)
tilt (1.3.3)
treetop (1.4.12)
tunnel-dummy-vmc-plugin (0.0.2)
tunnel-vmc-plugin (0.2.0, 0.1.11)
tzinfo (0.3.35)
uglifier (1.3.0)
uuidtools (2.1.3)
vmc (0.5.0.beta.10)
yui-compressor (0.9.6) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:27:14.193

```
vmc tunnel 
```

...应该独立于您部署的任何应用程序。您只需要一项或多项服务（“vmc 创建服务” - 完成后，您可以通过隧道访问它）

隧道需要 caldecott，因此请确保您已遵循 [使用 Caldecott 隧道连接到 Cloud Foundry 服务](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

```
gem list tunnel 
```

...应该给你一个你的隧道插件列表

我刚刚将 vmc 更新到 beta.12，它依赖于 tunnel-vmc-plugin (~> 0.2)，所以我删除了所有其他版本。

如果你没有得到隧道插件，

```
gem uninstall vmc 
```

然后

```
gem install vmc --pre 
```

# javascript - Azure 移动服务推送磁贴通知和清除磁贴属性

> ID：14737888
> 
> 赞同：2
> 
> 时间：2013-02-06T20:12:27.337
> 
> 标签：javascript, azure, azure-mobile-services

我正在使用 Azure 移动服务调度程序服务定期访问另一个 api 并发送带有更新信息的实时磁贴推送通知。但是，有时无法从外部 api 获得一条数据，我需要清除其中一个磁贴属性。问题是，当我推出新通知时，我似乎无法从磁贴中清除值。我试过发送 null、空字符串和未定义。但我做什么都不会清除它。这是我的调度程序代码：

```
push.mpns.sendFlipTile(channel.uri, 
{
    title: 'My Title',
    backgroundImage: getTileUrl('front', 'medium', word),
    backBackgroundImage: getTileUrl('back', 'medium', word),
    wideBackgroundImage: getTileUrl('front', 'wide', word),
    wideBackBackgroundImage: getTileUrl('back', 'wide', word),

    backTitle: null,        // Doesn't clear value
    //backTitle: '',        // Doesn't clear value
    //backTitle: undefined, // Doesn't clear value

    count: '0'              // Sending 0 as a string will clear the counter
}, 
{
    success: function(pushResponse) {
        console.log("Sent push:", pushResponse);
    },
    error: function(errorResponse) {
        console.error("Error push:", errorResponse);
    }
}); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:03:34.583

感谢您提出这个问题。目前我们不支持清除值的功能。[此错误](https://github.com/jeffwilcox/mpns/issues/5)正在跟踪该功能的添加。请通过在[我们的 UserVoice 页面](https://mobileservices.uservoice.com)上输入条目来帮助我们优先解决此问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:04:42.513

根据此文档： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206971 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206971(v=vs.105).aspx)

您需要将该 backTitle 的 Action 属性设置为 Clear。不知道如何在 Windows Azure 移动服务 MPNS 上做到这一点。

# c# - ToList() 没有错误但没有结果

> ID：14737892
> 
> 赞同：1
> 
> 时间：2013-02-06T20:12:51.423
> 
> 标签：c#, asp.net-mvc-4

我已经创建了我的连接字符串，它似乎连接没有错误。我只是想输出各种`ID`s，但它的表现就像那里什么都没有！

该表充满了记录......它也没有输出任何错误。我怎么能调试这样的东西？

模型：

```
namespace MvcApplication1.Models
{
    public class Directory
    {
        public int ID { get; set; }
        public bool DELETED { get; set; }
        public Guid CREATED_BY { get; set; }
        public DateTime DATE_ENTERED { get; set; }
        public Guid MODIFIED_USER_ID { get; set; }
        public DateTime DATE_MODIFIED { get; set; }
        public Guid USER_ID { get; set; }
        public Guid BRANCH_ID { get; set; }
    }

    public class MyDbContext : DbContext
    {
        public DbSet<Directory> Directories { get; set; }
    }
} 
```

看法：

```
@model IEnumerable<MvcApplication1.Models.Directory> 

@foreach (var item in Model) {
    <tr>
        <td>
           @item.ID
        </td>
    </tr>
} 
```

控制器：

```
namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        private Models.MyDbContext db = new Models.MyDbContext();

        public ActionResult Index()
        {
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";
            return View(db.Directories.ToList());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:59:29.710

您需要在 DbContext 的构造函数中设置 Directory DbSet。

```
Directories = Set<Directory>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:00:51.967

感谢大家的帮助。我想到了。我一开始就使用了错误的表名，但后来我还需要添加`Database.SetInitializer<Models.MyDbContext>(null);`到我的 global.asax...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T09:52:28.810

刚才遇到了同样的问题，因为我忘记在我的 web.config 文件中添加 connectionString 了。因此，如果上述答案也无助于检查。

# xaml - WinRT XAML ItemsControl 子绑定

> ID：14737893
> 
> 赞同：0
> 
> 时间：2013-02-06T20:12:54.883
> 
> 标签：xaml, microsoft-metro, windows-runtime, itemscontrol

我有以下 XAML：

```
<ItemsControl ItemsSource="{Binding DataContext}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <local:MyControl DataContext="{Binding}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

如何将`DataContext`of设置`MyControl`为 的单个项目`ItemsControl`？

**注意：** `ItemsControl`嵌入在`UserControl`. `UserControl`它的属性`DataContext`设置在它被使用的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:20:43.217

弄清楚了：

```
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <local:MyControl DataContext="{Binding}"/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

**刚刚将 {Binding DataContext} 更改为 {Binding}**

# linux - 服务器套接字的主动关闭

> ID：14737896
> 
> 赞同：0
> 
> 时间：2013-02-06T20:13:00.303
> 
> 标签：linux, sockets, networking, tcp

我有一个小型服务器（TCP 服务器），它在端口 5000 上最多接受 10 个连接。我在侦听模式下创建了一个套接字并接受连接。当接受成功时，我创建一个新线程并处理该线程中的流量。我在同一台机器上有一个客户端，它能够与该服务器连接和通信。

现在要了解 TIME_WAIT，我使用 ctrl+c 杀死我的服务器应用程序。我希望看到处于“已建立”状态的服务器套接字被转移到“TIME_WAIT”。但是，当我在关闭后执行 netstat 时，我没有看到处于“TIME_WAIT”状态的单个套接字。我知道“侦听”模式下的套接字直接转换为 CLOSED 状态。但我很困惑为什么接受返回且当前处于已建立状态的套接字不处于 TIME_WAIT 状态。

（我在一台 linux 机器上，tcp_fin_timeout 值设置为 1 分钟。）

我的 tcpdump 如下所示：

```
localhost.49388 > localhost.5000:
    Flags [S], cksum 0xfe30 (incorrect -> 0xaa93), seq 3264533269, win 32792,
    options [mss 16396,sackOK,TS val 20216234 ecr 0,nop,wscale 3], length 0              
localhost.5000 > localhost.49388:
    Flags [S.], cksum 0xfe30 (incorrect -> 0xc6a0), seq 3352338762, ack 3264533270, win 32768,
    options [mss 16396,sackOK,TS val 20216234 ecr 20216234,nop,wscale 3], length 0
localhost.49388 > localhost.5000:
    Flags [.], cksum 0xfe28 (incorrect -> 0x9fbe), ack 1, win 4099,
    options [nop,nop,TS val 20216234 ecr 20216234], length 0           
localhost.5000 > localhost.49388:
    Flags [P.], cksum 0xfe42 (incorrect -> 0xa300), seq 1:27, ack 1, win 4096,
    options [nop,nop,TS val 20216484 ecr 20216234], length 26           
localhost.49388 > localhost.5000:
    Flags [.], cksum 0xfe28 (incorrect -> 0x9db0), ack 27, win 4099,
    options [nop,nop,TS val 20216484 ecr 20216484], length 0          
localhost.49388 > localhost.5000:
    Flags [P.], cksum 0x0211 (incorrect -> 0x6be1), seq 1:1001, ack 27, win 4099,
    options [nop,nop,TS val 20216484 ecr 20216484], length 1000              
localhost.5000 > localhost.49388:
    Flags [.], cksum 0xfe28 (incorrect -> 0x91cb), ack 1001, win 6144,
    options [nop,nop,TS val 20216484 ecr 20216484], length 0     
localhost.5000 > localhost.49388:
    Flags [R.], cksum 0xfe28 (incorrect -> 0x8eeb), seq 27, ack 1001, win 6144,
    options [nop,nop,TS val 20217216 ecr 20216484], length 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:32:44.953

*但我很困惑为什么接受返回且当前处于已建立状态的套接字不处于 TIME_WAIT 状态。*

因为您杀死了该进程，从而阻止了任何有序的关闭。您只会看到`TIME_WAIT`进程是否在套接字上实际调用`close()`(or `shutdown()`) - 这会将 a 发送`FIN`给对等方 - 然后保持活动足够长的时间以接收发送给对等方和对等`ACK`方自己的送回）。有三种方法可以到达，其中一种必须发生才能建立，但只有当进程仍然存在以转换到 FIN_WAIT1 时才会发生，这是所有三个路径的开始。您的 Ctrl-C 甚至阻止了启动序列的操作。`FIN``FIN``ACK``TIME_WAIT``TIME_WAIT``close()`

要查看`TIME_WAIT`，您必须安排您的进程主动关闭套接字，例如在为 安装的处理程序中`SIGHUP`，或通过某种输入机制。随时终止进程是确保看不到您想要的内容的好方法。

# configuration - 我应该如何配置我的 Solr filterCache、firstSearcher 和 newSearcher？

> ID：14737897
> 
> 赞同：6
> 
> 时间：2013-02-06T20:13:01.810
> 
> 标签：configuration, solr

问题 1：我正在尝试优化我的 solrconfig.xml 中的搜索器，并且有两个不同的搜索器会变热。我的理解是 firstSearcher 只在服务器启动时触发。每当您需要新的搜索器时，都会创建一个 newSearcher。在我看来，我们希望在每个中指定相同的 fq 和方面。什么情况下您希望它们有所不同？

问题 2：有什么方法可以确定添加 fq 或构面对搜索器启动时间的影响？我知道我可以蛮力测量具有 fqs/facets 的搜索器的启动时间与没有的搜索器的启动时间，但这不是很精细。假设对于单个 fq/方面存在成本/收益，我希望能够对其进行衡量，以便我可以决定哪些事情值得加热，哪些不值得。

问题 3：如何有效调整 filterCache 的大小？我有一组特定的 fq，我知道它们可能会被击中，其中大约 500 个，所以似乎我会将其设置为 500。但是，Solr 似乎将 filterCache 用于必须分面的查询结果。由于我 90% 的查询都是分面的，因此我们似乎必须使用预期的查询数量作为缓存大小的基础。听起来对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-11T23:15:42.017

1.  你的理解是正确的。然而，一个 newSearcher 可以从最后一个自动预热，所以这是一个区别。另一个是由于 newSearcher 每次提交都会发生，如果你经常提交，你可能希望做的工作比你刚开始时少得多。

2.  我不知道有什么好方法。查询是串行运行的，至少使用 firstSearcher 会显示在访问日志中，因此您可以从字面上看到它们需要多长时间。不过，给定的查询集是否会导致“足够温暖”的结果几乎是反复试验。

3.  关于 FilterCache 大小要记住的最重要的事情是单个条目大约是（索引中的文档数）/8 字节。因此，如果您将大小设置为 500，并且您的索引中有 100M 文档，那么您将需要 6.25G 的堆来保存它。通常建议您将堆的大小尽可能小，以便为磁盘缓存留出更多内存，但这是一个例外。至于对缓存施加驱逐压力的方面查询，我有同样的问题，我不知道有任何解决方案。请参阅[https://issues.apache.org/jira/browse/SOLR-8171](https://issues.apache.org/jira/browse/SOLR-8171)。

# r - 从局部最小值/最大值计算累积增长/下降

> ID：14737899
> 
> 赞同：4
> 
> 时间：2013-02-06T20:13:05.130
> 
> 标签：r, time-series, xts, quantmod

我正在学习 R（及其通过 quantmod lib 在交易任务中的应用），并定期浏览社区以从这里获得很多新知识和技巧。我对 R 的总体印象，尤其是对 quantmod lib 的印象——太棒了。

在这一点上，我需要经验丰富的 R 用户的帮助。我正在使用通过 getSymbols 下载的时间序列，我需要分别从局部最小值/最大值计算累积增长/下降。

我可以使用 FOR 循环来解决我的任务，也可以在 MS Excel 中进行必要的建模，但我想找出更简单的解决方案，它不需要 FOR 循环并且在 R 中更“原生”。

例子。输入数据：

```
20121121    79810
20121122    79100
20121123    80045
20121126    81020
20121127    80200
20121128    81350
20121129    81010
20121130    80550
20121203    80780
20121204    81700
20121205    83705
20121206    83350
20121207    83800
20121210    85385 
```

结果：

```
 CLOSE   Cumulative gr/dd
20121121    79810   N/A
20121122    79100   0.58%
20121123    80045   1.55%
20121126    81020   2.37%
20121127    80200   -0.10%
20121128    81350   0.06%
20121129    81010   -0.76%
20121130    80550   -0.82%
20121203    80780   0.73%
20121204    81700   3.78%
20121205    83705   5.19%
20121206    83350   -1.50%
20121207    83800   1.67%
20121210    85385   2.22% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:31:41.690

为了补充 Dirk 的回答，[PerformanceAnalytics 包](http://cran.r-project.org/web/packages/PerformanceAnalytics/index.html)有各种回撤选项。这是我的一些代码的摘录，它还显示了增长计算（和锐化比率，作为奖励）：

```
#x is an xts object containing OHLC data
profit=ROC(x$Close)
growth=sum(na.omit(profit)),
equity=exp(sum(na.omit(profit))),
sharpe=as.vector(SharpeRatio.annualized(profit)),
maxDrawdown=maxDrawdown(profit) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:41:36.517

计算已经在[tseries](http://cran.r-project.org/package=tseries)包中作为 function `maxdrawdown`。这是其示例的开头：

```
mxdrwdR> # Toy example
mxdrwdR> x <- c(1:10, 9:7, 8:14, 13:8, 9:20)

mxdrwdR> mdd <- maxdrawdown(x)

mxdrwdR> mdd
$maxdrawdown
[1] 6

$from
[1] 20

$to
[1] 26 
```

将其转换为百分比非常容易——查看函数本身的（短）代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:03:09.343

您可以使用 zig zag 点找到峰值和谷值，然后计算百分比减少/增加。例如

```
 s <- get(getSymbols('goog'))["2012::"]
    z <- ZigZag(s[,2:3],10,percent=TRUE)
    # 10 in this example is the sensitivity to changes. 
    # if you want to use closing prices use s instad of s[,2:3]

    # extract the extreme points
    z <- rbind(z[findPeaks(z)-1],z[findValleys(z)-1])
    # calculate the difference
    names(z) <- c("zig")
    z$PercentChange <- ((z - Lag(z)) / z) * 100 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T13:33:39.230

最后，我设法解决了它。Dirk 和 Darren，非常感谢您的评论——PerformanceAnalytics 包中的“maxdrawdown”功能并不是我所需要的，但这让我开始关注 PerformanceAnalytics，并通过该站点和 Internet 进行了一些搜索。findDrawdowns 函数来自与我的需求接近的同一包，但无论如何并不是我想要的（它需要更新最后一个高点才能开始计算新的回撤，而我什至需要取局部最大值和最小值考虑）。通过进一步的反复试验，我编写了自己的代码，无需 FOR 循环即可解决我的任务。:) 这是代码。作为奖励 - 它返回带有资产不断增长/下降的条数的向量。如果有人可以建议如何改进它，我会很高兴。

```
library(rusquant)
library(quantmod)
library(tseries)

na.zero <- function(x) {
  tmp <- x
  tmp[is.na(tmp)] <- 0

  return(tmp)
}

my.cumulative.grdd <- function(asset) {
  # creating list for temporary data
  tmp <- list()
  # 
  #   tmp$asset.lag <- na.locf(lag(asset), fromLast=TRUE)

  # calculating ROC for the asset + getting ROC shifted by 1 element to the left and to the right
  # to compare ROC[i] and ROC[i+1] and ROC[i-1]
  tmp$asset.roc <- na.zero(ROC(asset))
  tmp$asset.roc.lag <- na.zero(lag(tmp$asset.roc))
  tmp$asset.roc.lag1 <- na.locf(lag(tmp$asset.roc, k=-1))

  # calculating indices of consequent growth/drawdown waves start and end
  tmp$indexfrom <- sapply(index(tmp$asset.roc[sign(tmp$asset.roc) * sign(tmp$asset.roc.lag) <= 0]), function(i) which(index(tmp$asset.roc) == i), simplify=TRUE)
  tmp$indexto <- c(sapply(index(tmp$asset.roc[sign(tmp$asset.roc) * sign(tmp$asset.roc.lag1) <= 0]), function(i) which(index(tmp$asset.roc.lag1) == i), simplify=TRUE), length(index(tmp$asset.roc)))

  # this is necessary to work around ROC[1] = 1
  tmp$indexfrom <- tmp$indexfrom[-2]
  tmp$indexto <- tmp$indexto[-1]

  # calculating dates of waves start/end based on indices
  tmp$datesfrom <- (sapply(tmp$indexfrom, FUN=function(x) format(index(asset)[x])))
  tmp$datesto <- (sapply(tmp$indexto, FUN=function(x) format(index(asset)[x])))
  tmp$dates <- apply(cbind(tmp$indexfrom, tmp$indexto), 2, FUN=function(x) format(index(asset)[x]))

  # merging dates for selection (i.e. "2012-01-02::2012-01-05") and calculation of cumulative product
  tmp$txtdates <- paste(tmp$datesfrom, tmp$datesto, sep="::")
  # extracting consequent growth/drawdowns
  tmp$drawdowns.sequences <- lapply(tmp$txtdates, function(i) tmp$asset.roc[i])
  # calculating cumulative products for extracted sub-series
  tmp$drawdowns.sequences.cumprods <- lapply(tmp$drawdowns.sequences, function(x) cumprod(1+x)-1)

  # generating final result
  result <- list()
  result$len <- tmp$indexto - tmp$indexfrom + 1
  result$cumgrdd <- xts(unlist(tmp$drawdowns.sequences.cumprods), index(tmp$asset.roc))

  return(result)
}

# let's test
getSymbols("SPY", from="2012-01-01")
spy.cl <- Cl(SPY)
spy.grdd <- my.cumulative.grdd(spy.cl)
spy.grdd 
```

# sql - 了解 SQL Server 错误消息 - “表 '会话' 中的标识列”是什么意思？

> ID：14737906
> 
> 赞同：0
> 
> 时间：2013-02-06T20:13:34.327
> 
> 标签：sql, sql-server, sql-server-2008

我很好奇插入这些数据后出现的错误，如下所示：

```
insert into bi_sessions 
values (295377778,  '04dzzzf7-e66c-4e6d-9c42-465a16546e34', 1,  43223810,   48, 1043,   'BELGIUM BEER Survey (QA)', 54, 'Synovate Panel',   -1  , 2.5,  6,  3,  2.5 , 2.5,  '2010-04-01 00:00:00.000',  '2010-04-01 00:00:30.000',  -1  ,3, 1,  '000708c8507696c06f777',    '68.200.93.212',    20, '04dea8f7-e66c-4e6d-9c42-465a16546777'  , -1,   NULL,   55743   ,9  , 'Untargeted', 3,  2,  2016,   'General',  1966,   '2010-04-01 00:00:22.000',  1966,   '2010-04-01 00:00:32.000',  1,  9,  'English - United States',  'Federated Sample', 1) 
```

错误消息如下：

> *只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“会话”中的标识列指定显式值。*

令人困惑 - 什么是*身份列*？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:17:51.697

您的表有一个[标识列](http://msdn.microsoft.com/en-us/library/ms186775%28v=sql.100%29.aspx)，这意味着您有一个在插入行时会自动增加其值的列。由于这是自动的，除非您使用`SET IDENTITY_INSERT ON`. 所以，在你的情况下，你应该这样做：

```
INSERT INTO bi_sessions(<list of all non-identity column>)
VALUES (<your values>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:18:41.600

`IDENTITY`列是 SQL Server 本身确定值的列。它通常用于生成唯一标识值作为表（如您的`sessions`表）的主键 - 其他 RDBMS 将此称为**自动增量**或**自动编号**列。

由于 SQL Server 自己确定这些值，因此不允许您将自己的值插入该列**。**

为此，您需要在语句中**明确**指定列列表：`INSERT`

```
INSERT INTO dbo.bi_sessions(Col1, Col2, ...., ColN)
VALUES (...., ..., .......) 
```

# jquery - 试图居中一个 div --- 缺失：在属性 id 之后

> ID：14737907
> 
> 赞同：0
> 
> 时间：2013-02-06T20:13:34.610
> 
> 标签：jquery

我正在尝试将附加的 div 居中，但是我不断收到此错误：

> 语法错误：缺少：属性 id 之后

特别是在`10)`. 这是我的代码：

```
$("#infobox").css({marginTop:parseInt(($("#content").height() / 2) -("#infobox").height() / 2), 10) + 'px'}); 
```

我试过做`10);`，但还没有摆脱它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:28:50.613

尝试：

```
$("#infobox").css({
    marginTop: (parseInt($("#content").height(), 10) / 2) - (parseInt($("#infobox").height(), 10) / 2) + 'px'
}); 
```

# jquery - 使用 jquery 淡出正文 iframe/对象

> ID：14737908
> 
> 赞同：1
> 
> 时间：2013-02-06T20:13:37.870
> 
> 标签：jquery, object, iframe, fadeout

我想在单击链接时淡出 iframe 内容，但我找不到方法！
这是我的代码不起作用：

```
<object type="text/html" data="page.html" id="framecontent" width="100%" height="100%"></object>

<script type="text/javascript">
$(document).ready(function() {
    $("#mylink a").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("#framecontent").find("body").fadeOut('slow', redirectPage);
    });
    function redirectPage() {
        $("#framecontent").attr("data", linkLocation);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:28:11.600

`fadeOut()`似乎不起作用，`<object>`但如果你使用`<iframe>`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:29:59.513

好吧，我将对象更改为 iFrame 并实现了代码以淡出 iFrame、更改页面并在加载后淡入 iFrame - 这就是您要找的吗？ [http://jsfiddle.net/edapU/2](http://jsfiddle.net/edapU/2)

```
<iframe src="http://www.bing.com" id="framecontent" width="100%" height="500px"></iframe>
<div id="mylink">
    <a href="http://www.bing.com">Bing</a><br/>
    <a href="http://www.car.com">Car.com</a><br/>
    <a href="http://www.microsoft.com">Microsoft</a>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $("#mylink a").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("#framecontent").fadeOut('slow', redirectPage);
    });
    function redirectPage() {
        $("#framecontent").attr("src", linkLocation).load(function(){$(this).fadeIn('slow');});
    }
});
</script> 
```

# unity3d - CG：使用 fmod 重复纹理会导致锯齿

> ID：14737910
> 
> 赞同：1
> 
> 时间：2013-02-06T20:13:43.587
> 
> 标签：unity3d, shader, fragment-shader, cg, pointer-aliasing

我正在`Cg`使用`Unity3D`.

我正在尝试使用[fmod](http://http.developer.nvidia.com/Cg/fmod.html)函数沿轴重复纹理（基本上与通过在`Material`with中设置纹理比例可以达到的效果相同`TextureWrapMode.Repeat`）。

这是`fragment shader`可以重现错误的代码：

```
half4 frag (v2f i) : COLOR
{

  float u_sample_coord = fmod(i.uv.x ,period) /period;
  half4 col =tex2D(myTexture,float2(u_sample_coord, i.uv.y));  
  return col;
} 
```

基本上它似乎可以工作，但它会产生某种与 fmod 函数的 0 相对应的混叠（条形图案）。这是一些屏幕截图：

![在此处输入图像描述](../Images/1b5a0ce063c19eafb220687e8ea54bb5.png)

上图显示了纹理如何正确重复。这是出现的条带混叠模式的放大图：

![在此处输入图像描述](../Images/b60bd6998b02ed3bf42e641f751a7526.png)

我试图调试它，但我无法弄清楚到底发生了什么。任何人都可以告诉我问题是什么以及最终如何解决？

* * *

编辑：我发现禁用 mipmap 生成可以解决这个问题。顺便说一句，我想使用 mipmap 来避免在距离增加时出现缩小锯齿问题。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:09:33.883

您需要在 tex2D() 函数中显式设置 u 和 v 导数。但是：你为什么要使用 fmod？如果采样器的重复模式设置为环绕，那么您可以让 UV​​ 坐标漫游远超出 0-1 范围。它会自己包装。

# oracle - 蒙德里安钻透oracle中的表显示带逗号的整数值

> ID：14737914
> 
> 赞同：0
> 
> 时间：2013-02-06T20:13:59.930
> 
> 标签：oracle, mondrian, drillthrough

**我在使用 mondrian 和 JPivot 时遇到问题**

问题是，当我将我的应用程序与**Oracle**数据库连接并访问**钻取表**时，所有值都以**2.010,00**格式显示，即**2010 年**。只有当我将应用程序与 Postgres 或 SqlServer 数据库连接时，Oracle DB 才会出现此问题，这些值显示为 2010。

更多信息：

我的多维数据集有两个维度：`CREATION_DATE`和`STATUS`，以及一个度量：

（*抱歉，我必须更改此处显示的标签，假设下一个 xml 格式正确*）

```
 -SCHEMA name="AAAA" envId="0"-
  -Cube name="AAAA" envId="0" cache="true" enabled="true"-
   -Table name="MY_FACT_TABLE" alias="MY_FACT_TABLE"-
   -Dimension name="FECHA_CREACION" envId="0"-
    -Hierarchy name="FECHA_CREACION" hasAll="true" allMemberName="All FECHA_CREACION"-
     -Level name="PRO_CREATE_YEAR" column="PRO_CREATE_YEAR" type="Integer" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"-
     -Level name="PRO_CREATE_SEM" column="PRO_CREATE_SEM" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"-
    -Hierarchy-
   -Dimension-
   -Dimension name="ESTADO" envId="0"-
    -Hierarchy name="ESTADO" hasAll="true" allMemberName="All ESTADO"-
     -Level name="PRO_STATUS" column="PRO_STATUS" type="String" uniqueMembers="false" levelType="Regular" hideMemberIf="Never"-
    -Hierarchy-
   -Dimension-
   -Measure name="MEASURE1" column="DW_PRO_ID" aggregator="count" visible="true" formatString="#,###.0" datatype="Numeric" caption="MEASURE1"-
  -Cube-
 -SCHEMA- 
```

在数据库中，表**MY_FACT_TABLE**具有类型为“ **INT ”的****PRO_CREATE_YEAR**列以及插入该列中的所有值，其中 2010 和 2011。

 **MEASURE1 的钻取表：

```
PRO_CREATE_YEAR | PRO_CREATE_SEM | PRO_STATUS | MEASURE1
2.010,00 | SEM1 | A | 1,00
2.010,00 | SEM1 | A | 3,00
2.010,00 | SEM1 | A | 2,00 
```

我已经尝试过：
- 将 PRO_CREATE_YEAR 级别的 levelType 更改为“TimeYears”。
- 将维度类型更改为“TimeDimension”。
- 将列 PRO_CREATE_YEAR 的类型更改为数字 number(9)。
什么都没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:35:34.127

您应该首先将您的维度定义为[“时间”类型](http://mondrian.pentaho.com/documentation/schema.php#Time_dimensions)。那里有很多[例子](http://type-exit.org/adventures-with-open-source-bi/2010/07/a-simple-date-dimension-for-mondrian-cubes/)。这将允许您使用 MDX 时间函数和计算的全部功能。

您还应该考虑使用[级别元素](http://mondrian.pentaho.com/documentation/xml_schema.php#Level)的属性 nameColumn 和 captionColumn 。[您可以在 Mondrian 的模式文档](http://mondrian.pentaho.com/documentation/schema.php)中获得有关这些的更多详细信息。

如果您愿意加倍努力并将您的发现贡献给 Mondrian 社区的成员，请随时[联系邮件列表或在](https://lists.sourceforge.net/lists/listinfo/mondrian-devel)[跟踪系统](http://jira.pentaho.com)中提交错误报告。**

# height - 覆盖视口 100% 高度的部分

> ID：14737921
> 
> 赞同：0
> 
> 时间：2013-02-06T20:14:23.733
> 
> 标签：height, css

我在这个网站（和其他网站）上做了很多研究，但我无法解决我的问题......在这个网站上：http: [//vintagebike.fr/t%C3%A9t%C3%A9/](http://vintagebike.fr/t%C3%A9t%C3%A9/) 我希望每个部分都涵盖视口高度的 100%... 我设置在 min-height : 100% for eachs... 我设置 html, body at height : 100%

一些代码：

```
html{ overflow-y:scroll; font-size:100%; font-family:Arial,Helvetica,sans-serif; line-height:1.5; background:url(...) repeat top left; font-color:#353232; height:100%;}

body{ height:100%; background:#fff; float:left; width:100%; font-size:.8125em; color:#353232;}

#about{background-color: #cde2f3;position:relative;min-height:100%;}
#elements{background-color: #fbe2e4;position:relative;min-height:100%;}
#pourqui{background-color: #ffedc1;position:relative;min-height:100%;}
#contact{background-color: #ddeee4;position:relative;min-height:100%;} 
```

如果我以像素为单位设置高度，它就可以工作了……</p>

我真的不明白……</p>

提前致谢。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:40:37.587

阅读[百分比高度](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)的规范。它与视口无关。既然你有`body {height:100%}`，随着 BODY 的增长，它就变成了用来表示 100% 的元素，而不是视口。

您需要根据浏览器的视口大小使用 JavaScript 设置部分高度。

好机会。

> 指定百分比高度。**百分比是根据生成框的包含块**的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为'auto'。根元素上的百分比高度是相对于初始包含块的。注意：对于包含块基于块级元素的绝对定位元素，百分比是相对于该元素的填充框高度计算的。这是从 CSS1 的一个变化，其中百分比总是相对于父元素的内容框计算。

# java - 在应用程序范围内记录所有出现的异常类型

> ID：14737923
> 
> 赞同：1
> 
> 时间：2013-02-06T20:14:33.893
> 
> 标签：java, logging, exception-handling

我有一个应用程序，其中大约有 100 个不同的类会抛出 FooException 类型。有时这些异常被捕获和处理，有时它们未被捕获并冒泡被记录。

但是，我希望能够将所有出现的 FooException 发送到一个特殊的日志文件，而不管最终如何处理异常。什么是实现这一点的方法？我可以用事件侦听器模式以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:37:33.580

您可以捕获 type 的所有异常，`FooException`对它们进行特殊记录并重新抛出它们。

```
try {
    // throws exception
} catch (AnotherException e) {
   //handle this one
} catch (FooException e) {
   specialLog(e);
   throw e;
} catch (YetAnotherException e) {
   // handle
} 
```

您只对要冒泡的事件执行此操作。

对于您已经处理的那些，只需做同样的事情，但不要重新抛出。

# java - 使用等号获取 NullPointerException

> ID：14737931
> 
> 赞同：1
> 
> 时间：2013-02-06T20:14:56.667
> 
> 标签：java, pointers, null, breakout

我在java中遇到空指针错误的问题，我正在尝试制作一个突破游戏，我知道问题出在哪里。

```
 GObject collider = getElementAt( ballX, ballspeed);

    if(collider.equals(paddle) && collider){
        ballspeed = -ballspeed;
    } 
```

当 if 语句为 null 时，程序会收到错误。

我也试过这个，但没有运气

```
 GObject collider = getElementAt( ballX, ballspeed);

    if(collider.equals(paddle) && collider != null){
        ballspeed = -ballspeed;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:15:47.997

尝试其他方式：

```
if(collider != null && collider.equals(paddle) ){
        ballspeed = -ballspeed;
    } 
```

阅读有关[Java 中运算符的更多信息](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:36:25.953

就像其他人说的：

```
if(collider != null && collider.equals(paddle) ) { 
```

应该做的伎俩。所以这种形式的表达：

```
if (condition1 && condition2) 
```

仅当条件 1 为真时，条件 2 才会被评估。在这种情况下，如果条件 1 为空，则不会计算条件 2，这将防止空指针异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:16:31.753

`null`在尝试调用之前，您必须执行-check `equals(..)`。条件从左到右评估：如果第一个为假，则根本不评估其他条件，因为`&&`不再独立于其他条件为真。

```
 if(collider != null && collider.equals(paddle)){
    ballspeed = -ballspeed;
  } 
```

如果您对评估顺序感到不安全，您还可以执行以下操作：

```
 if(collider != null){
      if(collider.equals(paddle)){
          ballspeed = -ballspeed;
      }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T20:20:25.173

尝试将第二个 if 语句的顺序更改为

`if(collider != null && collider.equals(paddle))`

如果语句从左到右求值，如果 collider 为空，则第一条语句的求值结果为 false，第二条语句将不被执行。或者你可以做类似的事情

```
if(collider == null) {
    //do nothing or attempt to get non null collider
}
else if(collider.equals(paddle))
{
   ballspeed = -ballspeed;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T20:24:35.330

尝试这个

```
if(collider != null  &&  collider.equals(paddle) ) 
```

这应该有效。

# php - PHP: while (time() < time()+2;){ echo "为什么这不起作用？"};

> ID：14737935
> 
> 赞同：2
> 
> 时间：2013-02-06T20:15:09.697
> 
> 标签：php, time, while-loop

```
$zeit = time();
$zeit60 = time()+2;

while ($zeit < $zeit60){
sleep (1);
echo time();
} 
```

为什么这不起作用？

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:20:22.390

您的代码将每秒打印时间......永远。因为条件本质`while x < x+2`上是 ，当然是真的 ∀ x ∈ ℝ</p>

您可能应该更新 的值`$zeit`，以便在时间到期后您的循环将退出。

也就是说，除非您有特别复杂的代码，否则执行以下操作可能就足够了：

```
$seconds = 2;
while($seconds) {
    sleep(1);
    echo time();
    $seconds--;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:21:34.717

此循环将永远运行，因为您将时间设置为变量。

这就像说：

```
$a=1;
$b=$a+1;
while($a<$b){} 
```

的值`$a`永远不会改变，因此你永远被困在无限中。如果您有固定的“等待时间”（`$zeit60`），那么您可以有效地使用`time()`：

```
$zeit60 = time()+2;

while (time() < $zeit60){
    sleep (1);
    echo time();
} 
```

# restkit - Restkit 0.20 基本操作

> ID：14737936
> 
> 赞同：1
> 
> 时间：2013-02-06T20:15:11.553
> 
> 标签：restkit, restkit-0.20

我刚刚开始使用 RestKit，并且在 Rk 0.20 即将上线并且文档和演示落后了一步。网络上的大多数东西都是针对 RK 0.10 的，并且 0.20 版本有很大的变化。

当新版本很快就会启动并运行时，我不想回退到早期版本。

我在 URL“test.myserver.com”上有一个 JSON 资源，它返回一个简单的数据报 - {“id_user”：“4401”、“datalocation”：“4401”、“country”：“Great-Britain”、“data "："testdata"，"登录"："Fred Bloggs"，"密码"："579c0cb0ed2dc25db121283f7a98cc71"，"accessLevel"："2"，"timestamp"："1012"，"datahash"："2749da29f20ce7a85092323f193adee8"}

我很确定我已经对映射等进行了排序，但我的服务需要身份验证，所以我需要在请求中将用户名和密码传递给服务器。

到目前为止我已经得到了这个

```
NSURL *url = [NSURL URLWithString:@"http://test.myserver.com"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
RKObjectRequestOperation *objectRequestOperation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[ responseDescriptor ]];

[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
RKLogInfo(@"Load collection of Articles: %@", mappingResult.array);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
RKLogError(@"Operation failed with error: %@", error);
}];

         [objectRequestOperation start]; 
```

似乎与服务器联系但不可避免地记录以下错误

restkit.network:RKObjectRequestOperation.m:296 对象请求失败：基础 HTTP 请求操作失败并出现错误：错误域 = org.restkit.RestKit.ErrorDomain 代码 = -1011“预期状态代码在 (200-299)，得到 401”用户信息=0x7884030 {NSLocalizedRecoverySuggestion={ "error": { "code": 401, "message": "Unauthorized: Authentication required" } }, AFNetworkingOperationFailingURLRequestErrorKey=http://elancovision.umfundi.com>, NSErrorFailingURLKey= [http://elancovision .umfundi.com](http://elancovision.umfundi.com) , NSLocalizedDescription=（200-299）中的预期状态码，得到 401，AFNetworkingOperationFailingURLResponseErrorKey=}

问题当然是我如何将用户名和密码添加到请求中。

对不起菜鸟问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T19:24:51.993

对于基本的 HTTP 身份验证，用户名和密码应该插入到每个请求的 HTTP 请求授权头字段中。

首先，我建议您使用 RKObjectManager 来集中配置请求和映射。[http://restkit.org/api/latest/Classes/RKObjectManager.html](http://restkit.org/api/latest/Classes/RKObjectManager.html) RKObjectManager 可以存储网络参数（通过 AFNetworking 库），然后根据用户名/密码、路径、对象映射构建适当的 http 查询。

调整你的例子，它会给出类似的东西：

```
NSURL* url = [[NSURL alloc]initWithString:@"http://test.myserver.com"];
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURL:url];
[objectManager.HTTPClient setAuthorizationHeaderWithUsername:@"username" password:@"password"];

//NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSURLRequest *request = [objectManager requestWithObject:nil method:RKRequestMethodGET path:@"/yourAPI/yourmethod" parameters:nil];

RKObjectRequestOperation *objectRequestOperation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[ responseDescriptor ]];

[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        RKLogInfo(@"Load collection of Articles: %@", mappingResult.array);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        RKLogError(@"Operation failed with error: %@", error);
    }];

[objectRequestOperation start]; 
```

如果身份验证有效，查看 RESTKit wiki 应该会为您提供构建正确映射的下一个提示：[https ://github.com/RestKit/RestKit/wiki/Object-mapping](https://github.com/RestKit/RestKit/wiki/Object-mapping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:54:56.407

我的解决方案在这里：

```
// Build a RestKit manager object to look after the restful stuff
RKObjectManager *manager =  [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://test.myserver.com"]];;

// Hash the GUI input password string and pass the username in plain text
NSString *md5PW = [umfundiCommon md5:passwordField.text];           
[manager.HTTPClient setAuthorizationHeaderWithUsername:userField.text password:md5PW];

RKObjectMapping *WebResponse = [RKObjectMapping mappingForClass:[WSObject class]];

        [WebResponse addAttributeMappingsFromDictionary:@{@"id_user":@"id_user", @"datalocation": @"datalocation", @"country":@"country", @"data": @"data", @"login": @"login", @"password": @"password", @"accessLevel": @"accessLevel", @"timestamp": @"timestamp", @"datahash": @"datahash"}];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:WebResponse pathPattern:nil keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
// Add the above response descriptor to the manager
[manager addResponseDescriptor:responseDescriptor];

// the getObject makes the call using the stuff assembled into the manager Object and drops into either the success or the failure routines.
[manager getObject:nil path:@"" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result)
{
NSLog (@"Server WS call success:");

NSArray *theresults = [result array];              
for (WSObject *item in theresults) {
    NSLog(@"datahash=%@",item.datahash);
    NSLog(@"user_id=%@",item.id_user);
    }
}  failure:^(RKObjectRequestOperation * operation, NSError * error)
    {
    NSLog (@"Server WS call failure: operation: %@ \n\nerror: %@", operation, error);
    }];

........ 
```

# msmq - 如何以编程方式检索 msmq 统计计数器？

> ID：14737945
> 
> 赞同：1
> 
> 时间：2013-02-06T20:15:36.163
> 
> 标签：msmq

我安装了一个 Windows servive，它是一个 MSMQ 侦听器。我需要以编程方式为非事务响应 quque 获取 MSMQ 统计计数器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T10:45:57.940

这是您从中获取消息队列计数的代码，您只需要传递您想要 msmq 计数的队列的名称。

```
 //Here QueueName is Pass from Calling Function for which you want count of messages.
    Public MessageCount(string QueueName)
    {           
        int messageCount = 0;
        try
        {
            string fullyQualifiedQueueName = string.Format(@"{0}\{1}", Environment.MachineName, QueueName);
            PerformanceCounterCategory category = new PerformanceCounterCategory("MSMQ Queue");
            PerformanceCounter cntr = new PerformanceCounter("MSMQ Queue", "Messages in Queue");
            if (category.InstanceExists(fullyQualifiedQueueName.ToLower()))
            {
                cntr.InstanceName = fullyQualifiedQueueName.ToLower(CultureInfo.CurrentCulture);
                messageCount = (int)cntr.NextValue();
            }
            ((IDisposable)cntr).Dispose();
            Console.WriteLine("Message Count is {0}", messageCount.Tostring());
        }
        Catch(Exeption Ex)
        {
             Console.WriteLine("Error : {0}",Ex.Message);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:19:18.670

您可能想查看**Performance Counters**。

我还没有使用 MSMQ 的性能计数器，但我确实将它们用于其他事情，例如 CPU 负载。进入并不难。

（来自下面的第一篇链接文章）

> MSMQ 性能计数器从第一天开始就是 MSMQ 的一部分。[...] 性能计数器很容易通过 WMI 接口接近，而且许多监控工具都与它们交互。但是，当使用 perf. 计数器您无法获得最新数据，并且它们并不总是准确的，尤其是在查看远程机器时。

这里有几篇文章可以帮助您入门：

*   [计算队列中的消息数](http://yoelarnon.wordpress.com/2004/12/07/counting-the-number-of-messages-in-a-queue/)
*   [监控消息队列性能](http://technet.microsoft.com/en-us/library/cc736883%28WS.10%29.aspx)
*   [MSMQ 适配器性能计数器](http://technet.microsoft.com/en-us/library/aa577997.aspx)

第一篇文章还提到了我还没有使用过的**MSMQ Admin API 。**所以我个人不能给出任何建议：

> MSMQ Admin API 是随 NT4 SP6a 引入的（因此您可能拥有它们……）但是直到 MSMQ 3.0（WXP 或 W2003）才提供它们的 COM 接口。如果您有 WinNT 或 Win2K，则必须使用 C API。另一方面，来自 MSMQ Admin API 的结果更加最新和可靠。

# ms-access - 值差的总和

> ID：14737946
> 
> 赞同：1
> 
> 时间：2013-02-06T20:15:39.823
> 
> 标签：ms-access, sum, multiple-columns

我需要在 MS Access 中查询列的值与 8 的差异，并且仅当它大于 8 时。

因此，如果我有一列数字 1-10，我想查询所有值与 8 的差的总和。因此，下列的查询结果将是 3\. (9-8)+(10-8 )

```
 SELECT Sum(([time1]-8)+([time2]-8)+([time3]-8)+([time4]-8)+([time5]-8)+([time6]-8)+([time7]-8)+([time8]-8)+([time9]-8)+([time10]-8)+([time11]-8)+([time12]-8)+([time13]-8)+([time14]-8)+([time15]-8)+([time16]-8)+([time17]-8)+([time18]-8)+([time19]-8)+([time20]-8)+([time21]-8)+([time22]-8)) AS Total
FROM tblTimeTracking
WHERE (((Month(([Day])))=Month(Now()))) AND ([time1]>8 AND[time2]>8 AND[time3]>8 AND[time4]>8 AND[time5]>8 AND[time6]>8 AND[time7]>8 AND[time8]>8 AND[time9]>8 AND[time10]>8 AND[time11]>8 AND[time12]>8 AND[time13]>8 AND[time14]>8 AND[time15]>8 AND[time16]>8 AND[time17]>8 AND[time18]>8 AND[time19]>8 AND[time20]>8 AND[time21]>8 AND[time22])  ; 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:18:28.087

怎么样：

```
SELECT Sum([Value]-8) As SumOfVal
FROM table
WHERE [Value]>8 
```

编辑重新完整更改原始问题。

不清楚你想要什么

```
 SELECT Sum(([time1]-8)+([time2]-8) ...
 WHERE [time1]>8 And Time2>8 ... 
```

Time1>8 将排除空值，但如果这不是您正在做的，您将需要考虑：

```
 Nz([time1],0) + ... 
```

编辑重新评论

就像是：

```
 SELECT Sum(times) FROM
 (SELECT IIf(Time1>8,Time1-8,Time1) As times FROM Table
 UNION ALL
 SELECT IIf(Time2>8,Time2-8,Time2)  As times FROM Table) As b 
```

`As b`是别名：[Access SQL](http://office.microsoft.com/en-001/access-help/access-sql-from-clause-HA010276924.aspx#BM2)

UNION / UNION ALL：[使用联合查询查看多个查询的统一结果](http://office.microsoft.com/en-001/access-help/view-a-unified-result-from-multiple-queries-with-a-union-query-HA102749627.aspx?CTT=1)

# javascript - 立即函数和不同的声明性语法

> ID：14737947
> 
> 赞同：1
> 
> 时间：2013-02-06T20:15:40.383
> 
> 标签：javascript

关于 JS 中的即时功能。这个语法有什么区别

```
(function() {}()); 
```

和

```
(function() {})(); 
```

我特别不明白`()`第二个例子中最后一部分的使用。

您能否为我提供一个快速解释以及如何使用具有这种不同语法的即时函数的代码示例？

# python - 尝试创建视图时 XML 体系结构无效

> ID：14737952
> 
> 赞同：0
> 
> 时间：2013-02-06T20:15:50.290
> 
> 标签：python, xml, openerp

`ValidateError`尝试安装自定义模块时遇到问题。

完整的错误如下

```
ERROR openerp3 openerp.tools.convert: Parse error in /openerp/addons/sim/sim_view.xml:39: 
except_osv: ('ValidateError', u'Error occurred while validating the field(s) arch: Invalid XML for View Architecture!') 
```

线是 39，这里是视图

```
<record model="ir.ui.view" id="buildings_form">
    <field name="name">sim.buildings.form</field>
    <field name="model">sim.buildings</field>
    <field name="type">form</field>
    <field name="arch" type="xml">
        <form string="building">
            <field name="name"/>
            <field name="student_name"/>
            <field name="father_name"/>
            <field name="gender"/>
            <field name="contact_no"/>
        </form>
    </field>
</record> 
```

你觉得那个 XML 有什么奇怪的地方吗？我还应该将什么视为错误的可能原因。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:13:24.410

经过数小时的测试和测试，我决定检查我的 postgres 表，看看我的`sim.buildings`表是否存在，而它不存在。

我不明白为什么会这样，所以我开始查看我的非工作代码和我的工作代码之间的差异，我注意到`_description`我的非工作代码上的标签比我的工作代码的平均值长。

删除我的文本后，`_description`它起作用了。

对于遇到这个问题的其他人来说，每次重新安装模块时重新启动服务器也很重要，至少这对我来说效果更好。

# c - 在 C/C++ 中处理命令行标志

> ID：14737957
> 
> 赞同：18
> 
> 时间：2013-02-06T20:16:05.243
> 
> 标签：c, unix, command-line-arguments

我正在寻找关于标志是什么的非常简单的解释/教程。我知道标志工作表明命令要做什么。例如：

```
rm -Rf test 
```

我知道 rm 命令将删除测试文件夹，并且 -Rf 标志将强制命令不仅删除文件夹，而且删除其中的文件。

但是，标志在哪里读取/编译？？？什么处理标志？例如，我可以编写自己的 C/C++ 程序并指定不同的标志，以便程序执行不同的操作吗？我希望我问的是正确的问题。如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T20:34:32.700

在 C 级别，程序的命令行参数出现在`main`函数的参数中。例如，如果你编译这个程序：

```
#include <stdio.h>
int main(int argc, char **argv)
{
    int i;
    for (i = 0; i < argc; i++)
        printf("argv[%d] = %s\n", i, argv[i]);
    return 0;
 } 
```

并使用与示例“rm”命令相同的参数调用它，你会得到：

```
$ ./a.out -Rf test
argv[0] = ./a.out
argv[1] = -Rf
argv[2] = test 
```

如您所见，第一个条目`argv`是程序本身的名称，其余的数组条目是命令行参数。

操作系统根本不关心参数是什么。由您的程序来解释它们。但是，它们的工作方式有一些约定，其中最重要的是：

*   参数分为*选项*和*非选项*。选项以破折号开头，非选项没有。
*   顾名思义，选项应该是*可选*的。如果你的程序需要一些命令行参数来做任何有用的事情，这些参数应该是非选项（即它们不应该*以*破折号开头）。
*   选项可以进一步分为*短*选项，即单个短划线后跟单个字母（`-r`, `-f`）和*长*选项，即两个短划线后跟一个或多个短划线分隔的单词（`--recursive`, `--frobnicate-the-gourds`）。短选项可以组合成一个参数 ( `-rf`)，只要它们都不带参数（见下文）。
*   选项本身可能带有参数。
    *   *短*选项的参数`-x`是条目的其余部分`argv`，或者如果该条目中没有进一步的文本，则为下一个`argv`条目，*无论*它是否以破折号开头。
    *   *long*选项的参数以等号开头：`--output=outputfile.txt`。
*   如果可能的话，不同选项（及其参数）的相对顺序应该没有明显的影响。
*   特殊选项的`--`意思是“不要将命令行上此点之后的任何内容视为选项，即使它看起来像一个选项。” 例如，您可以`-f`通过键入 删除名为 ' '的文件`rm -- -f`。
*   特殊选项`-`表示“读取标准输入”。
*   按照惯例，有许多简短的选项字母：最重要的是
    *   `-v`= 冗长
    *   `-q`= 安静
    *   `-h`= 打印一些帮助文本
    *   `-o` *文件*= 输出到*文件*
    *   `-f`= 强制（不提示确认危险动作，直接执行）

有很多库可以帮助您解析命令行参数。其中最可移植但也是最受限制的是[getopt](http://www.gnu.org/s/libc/manual/html_node/Getopt.html)，它内置于当今大多数系统的 C 库中。我建议您阅读[GNU argp](http://www.gnu.org/s/libc/manual/html_node/Argp.html)的所有文档，即使您不想使用那个特定的文档，因为它会进一步教育您了解约定。

还值得一提的是，通配符扩展 ( `rm -rf *`) 是*在*您的程序被调用之前完成的。`./a.out *`如果您在仅包含二进制文件及其源代码的目录中运行上述示例程序，您将获得

```
argv[0] = ./a.out
argv[1] = a.out
argv[2] = test.c 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-06T20:26:22.767

这个简单的程序应该演示传递给程序的参数（包括程序名称本身。）

解析、解释和使用这些参数取决于程序员（你），尽管有一些[库可以提供帮助](https://stackoverflow.com/questions/28129098/using-getopt-in-c-for-command-line-arguments)：

```
int main(int argc, char* argv[])
{
    int i;
    for(i=0; i<argc; ++i)
    {   printf("Argument %d : %s\n", i, argv[i]);
    }
    return 0;
} 
```

* * *

如果你把这个程序编译成`a.out`，然后运行它：

```
prompt$>  ./a.out ParamOne ParamTwo -rf x.c 
```

你应该看到输出：

```
Argument 0 : a.out
Argument 1 : ParamOne
Argument 2 : ParamTwo
Argument 3 : -rf
Argument 4 : x.c 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-06T20:23:13.517

实际上，您可以编写自己的 C++ 程序，它接受如下命令行参数：

`int main(int argc, char* argv[]){}`

变量 argc 将包含参数的数量，而 char* 将包含参数本身。

您可以像这样调度参数：

```
for (int i = 1; i < argc; i++)
{  
    if (i + 1 != argc)
    {
        if (strcmp(argv[i], "-filename") == 0) // This is your parameter name
        {                 
            char* filename = argv[i + 1];    // The next value in the array is your value
            i++;    // Move to the next flag
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T20:23:49.340

在您自己的 C 程序中，您可以以任何您认为合适的方式处理命令行选项。C 中的命令行参数以字符串形式出现在 main(int argc, char *argv[]) 方法的参数中。

如果您想以类似于大多数 UNIX 命令的方式处理命令行参数，您可能正在寻找的函数是[getopt()](http://en.wikipedia.org/wiki/Getopt#Example_1_.28using_getopt.29)

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T20:22:03.767

最简单的事情是这样写`main()`：

> int main(int argc, char* argv[]) { ...

然后在该 main 中，**您**决定命令行参数或“标志”会发生什么。您在 argv 中找到它们，它们的编号是 argc。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T20:22:18.570

标志是传递到程序主入口点的参数。例如，在 C++ 程序中，您可以拥有

```
int main(int arc, char* argv[]){
return 0;
} 
```

你的弧是传入的参数的#，指针给你实际参数的列表。因此对于

```
rm -Rf test 
```

argc 为 3，而 argv 数组将包含您的参数。注意 argc >= 1 因为程序名称本身很重要 (rm)。-RF 是您的第二个参数，而 test 是您的第三个参数。

因此，每当您在 unix 中键入命令时，您实际上是在执行程序并向它们传递它们操作的参数。

如果你真的对 unix 操作系统很感兴趣，你应该查看 fork 以及它们是如何工作的。不过，这对于新手来说可能会很困惑，所以只有当你真的对操作系统和程序的执行方式感兴趣时。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-20T14:30:39.727

GNU libc 很可能在您的系统上可用，它有一个名为 getopt 的库，可用于以合理的方式解析选项。下面链接的文档中有一些示例可以帮助您入门。

[http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt](http://www.gnu.org/software/libc/manual/html_node/Getopt.html#Getopt)

# c# - Nullable.GetUnderlyingType 工作不正常

> ID：14737958
> 
> 赞同：1
> 
> 时间：2013-02-06T20:16:12.820
> 
> 标签：c#, .net, types, methods, nullable

我有以下代码：

```
Tuple<string, string, Type, ParameterInfo[]> method = (Tuple<string, string, Type, ParameterInfo[]>)(comboBox1.SelectedItem);
if (comboBox2.SelectedIndex - 1 >= 0)
{
    if (method.Item4[comboBox2.SelectedIndex - 1].ParameterType.BaseType == typeof(Enum))
    {
        foreach (object type in Enum.GetValues(method.Item4[comboBox2.SelectedIndex - 1].ParameterType))
        {
            Console.WriteLine(type);
        }
        MessageBox.Show("This looks like an auto-generated type; you shouldn't set it to anything.", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button1);
    }
    else if (Nullable.GetUnderlyingType(method.Item4[comboBox2.SelectedIndex - 1].ParameterType) != null)
    {
        if (Nullable.GetUnderlyingType(method.Item4[comboBox2.SelectedIndex - 1].ParameterType).BaseType == typeof(Enum))
        {
            MessageBox.Show("This looks like an auto-generated type; you shouldn't set it to anything.", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button1);
        }
    }
} 
```

在 else if 语句中，我注意到它总是返回 null，即使在我的情况下，method.Item4[0] 的对象在 comboBox2.SelectedIndex 为 1 时始终是 Nullable 类型，那么为什么它返回 null？说真的，我在那里设置了一个断点，在 Item4 中，我看到索引 0 处的对象为：

> [0] = {System.Nullable`1[CarConditionEnum]& carCondition}

...在索引 1 处为：

> [1] = {Boolean& carConditionSpecified}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:51:31.307

问题是参数是引用类型，即它被声明为`ref CarConditionEnum? paramName`.

您需要获取参数的元素类型，然后使用`Nullable.GetUnderlyingType`：

```
Type paramType = method.Item4[comboBox2.SelectedIndex - 1].ParameterType;
if(paramType.HasElementType)
{
    paramType = paramType.GetElementType();
}

if(Nullable.GetUnderlyingType(paramType) != null)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:41:31.523

问题是参数是`ref`或者`out`我可以从 &`&`字符中看到。起初我不知道如何删除它，但事实证明（[另一个答案](https://stackoverflow.com/a/14738556/1336654)）你使用`GetElementType()`它。

我像这样复制你的发现：

```
var t1 = typeof(int?);
string s1 = t1.ToString();  // "System.Nullable`1[System.Int32]"
bool b1 = Nullable.GetUnderlyingType(t1) != null;  // true

var t2 = t1.MakeByRefType();
string s2 = t2.ToString();  // "System.Nullable`1[System.Int32]&"
bool b2 = Nullable.GetUnderlyingType(t2) != null;  // false

// remove the ByRef wrapping
var t3 = t2.GetElementType();
string s3 = t3.ToString();  // "System.Nullable`1[System.Int32]" 
bool b3 = Nullable.GetUnderlyingType(t3) != null;  // true 
```

在这里，`t1`和`t3`是同一类型，`ReferenceEquals(t1, t3)`。

# html - 如何保护免费增值 HTML5 免受变量修改？

> ID：14737959
> 
> 赞同：4
> 
> 时间：2013-02-06T20:16:15.437
> 
> 标签：html, obfuscation, source-code-protection

有些人就保护 HTML5 应用程序和保护免费增值应用程序提出了类似的问题，但不是两者兼而有之。我单独问这个问题是因为我的印象（无论是对还是错）HTML5 与原生相比特别不安全。

我正在开发一个嵌入式 HTML5 应用程序，我想使用免费增值模式获利，但我担心如何防止其虚拟货币和评分变量被最终用户太容易弄乱，因为我担心这可能会产生负面影响如果某些黑客（该术语无意冒犯）要创建有关漏洞利用的 YouTube 视频或博客文章，则会影响收入。我认为这不太可能在早期发生，但我认为脆弱性会随着受欢迎程度而变得更重要。我也担心有人可以复制应用程序。

我虽然意识到这两者都可以通过设备上安装的应用程序来实现。

我的问题是：

1.  在您看来或经验中，将未混淆的嵌入式（不依赖于浏览器）HTML5 应用程序及其 Javascript 与具有基于 Java 或 Objective-C 数据的核心文件的本机应用程序混淆起来有多容易？/混淆的效果如何？ HTML5 应用程序与本地混淆应用程序在数据保护方面的对比？
2.  混淆 HTML5 应用程序与在常规 Android 应用程序上使用 Proguard 之类的应用程序有多难？
3.  对于普通用户来说，混淆是否会导致 HTML5 明显变慢？
4.  最后，您认为拥有一个具有免费增值功能的 HTML5 应用程序实用吗？还是您个人认为它太脆弱了？

我基本上试图弄清楚 HTML5 是否特别容易受到攻击或难以保护，至少与保护原生应用程序相比是这样。如果混淆的 HTML5 应用程序与常规应用程序一样安全或不安全，那么我想我可以接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:29:38.233

防止作弊的唯一方法（解锁免费增值项目是一种作弊）是将所有相关的游戏逻辑移至服务器。忘记混淆。当它在客户端机器上执行时，它在用户的控制之下。混淆可以减慢用户的速度，但不能阻止决心破解它的人。这不仅适用于 javascript，它适用于每个游戏客户端，无论它是用什么编程语言编写的。

设计防作弊多人游戏的一般规则是永远不要信任客户端，并在服务器上进行与游戏玩法相关的所有计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T00:38:24.553

在我看来，最好混淆并永远不要信任客户。不仅如此，我什至会压缩混淆代码，并在客户端和/或服务器中添加混淆解压缩器。该技术是可行的，并且是专业公司在整个网络上使用的技术。

现在，回答您的问题：

1.  弄乱正确混淆的代码并不容易（这需要您压缩/加密偶数）。专业的黑客不会为了“运动”而弄乱您的代码，除非他们有钱这样做，甚至在那情况下，他们将很难做到（这就是为什么我不相信“忘记混淆”的思维方式）。
2.  混淆在数据保护方面非常有效。您的代码变得不可读，并且在某种程度上，它可以被视为一种压缩算法，因此它可以减少文件大小和加载时间。
3.  如果您依赖可以混淆的专业工具，例如JS，html5，css和php，混淆是很容易的。只有你必须开发这样的工具才更难。但是该领域也存在开源软件。
4.  它肯定会减慢“普通用户”的速度，他们会在你的代码面前感到迷失。
5.  拥有一个具有免费增值功能的 HTML5 应用程序是可行的，但这完全取决于您对这些选项的实施。
6.  如果如上所述正确完成，它就不太容易受到攻击，但就我个人而言，我不喜欢这种商业模式。

# jquery - 在 jQuery 中设置 cookie

> ID：14737960
> 
> 赞同：2
> 
> 时间：2013-02-06T20:16:16.623
> 
> 标签：jquery, html, css, cookies

更改背景颜色时如何设置 cookie？我创建了一个更改主体颜色的基本切换器，但我想将更改后的颜色保存在 cookie 中。

任何的想法？

jQuery代码：

```
 $('.first li').click(function(){
        var src = $(this).find('img').attr('src');
       $('body').css('background','url('+src+')');
     }); 
```

[演示在这里](http://jsfiddle.net/5HV28/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:19:00.720

请将以下插件添加到您的页面：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

现在您可以执行以下操作：

创建cookie：

```
$.cookie('the_cookie', 'the_value'); 
```

读取 cookie：

```
$.cookie('the_cookie'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:21:38.807

您可以使用 HTML5 localStorage 并且可以使用

```
 window.localStorage.setItem("color_fondo",color);
    document.body.style.backgroundColor =  color; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:28:44.657

在函数的末尾插入这一行。

```
document.cookie = 'userColor="' + document.body.style.background + '"'; 
```

# matlab - Matlab 符号工具箱语法错误

> ID：14737970
> 
> 赞同：0
> 
> 时间：2013-02-06T20:16:50.643
> 
> 标签：matlab

我的 Matlab 中安装了符号数学工具箱。但是，当我输入标准 A = sym('A', dim) [也在 mathworks 网站中注明] 代码时，它会给出错误。为什么呢 ？

> > A = sym('A', [2 4])
> > 
> > ？？？错误使用 ==> 错误格式化参数不能是非标量数值矩阵。
> > 
> > ==> sym.sym> 2180 处的假设错误 error('symbolic:sym:sym:errmsg1','第二个参数 %s 无法识别。',a);
> > 
> > ==> sym.sym>tomupad 在 2148 个假设（S，x，a）处出错；
> > 
> > ==> sym.sym>sym.sym 中的错误在 114 Ss = tomupad(x,a);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:34:04.310

我想你有一个旧版本的 Matlab。

该文档适用于 R2012b。

在我的 R2010a 版本中，文档没有显示此功能。

# java - 摆动小程序.. jtogglebutton 大小为 6mb。我怎样才能减小尺寸

> ID：14737972
> 
> 赞同：1
> 
> 时间：2013-02-06T20:16:54.650
> 
> 标签：java, swing, javax.imageio, imageicon, jtogglebutton

我正在开发一个应用程序，该应用程序在文件夹中获取图像并将它们显示为缩略图，以便单独进行进一步选择和操作。下面是将它们添加到 Jtogglebuttons 的代码。

```
toglBtn=new JToggleButton(""+i,new ImageIcon(ImageIO.read(new File(listOfFiles[i].getAbsolutePath())).getScaledInstance(139, 163, BufferedImage.SCALE_SMOOTH))); 
```

我在文件夹中的原始图像小于 100kb，但 Jtogglebutton 大小为 6mb。有没有办法减少这些的大小？目前它占用了我所有的堆空间并在有超过 40 个文件时给我一个内存不足错误。我已经将堆大小增加到 512MB，但是在使用 MAT 分析堆转储后，我想我需要减小缩略图大小来解决这个错误。

有什么办法可以强制缩略图成为 jpeg？或任何其他将缩略图添加到 jtogglebuttons 的方式？

最后更新：我使用缩略图将按钮的大小缩小到几 kb

```
try{
                            BufferedImage originalImage = ImageIO.read(new File(listOfFiles[i].getAbsolutePath()));                             
                            Image image =Thumbnails.of(originalImage).size(138, 163).asBufferedImage();
                            toglBtn=new JToggleButton(""+i,new ImageIcon(image));
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:30:05.797

也许您的一个 Java 行将原始图像、缩放图像和图像图标保存在内存中。

通过这种方式分解代码可确保丢弃原始图像和缩放图像以进行垃圾收集。

```
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JToggleButton;

    String text = "" + i;
    File imageFile = new File(listOfFiles[i].getAbsolutePath());
    BufferedImage image = ImageIO.read(imageFile);
    Image scaledImage = image.getScaledInstance(139, 163, 
            BufferedImage.SCALE_SMOOTH);
    ImageIcon imageIcon = new ImageIcon(scaledImage);
    toglBtn = new JToggleButton(text, imageIcon); 
```

# grid - 为什么在 kendo 版本 2012.3.1315 中隐藏网格内的列无法正常工作？

> ID：14737974
> 
> 赞同：0
> 
> 时间：2013-02-06T20:16:57.633
> 
> 标签：grid, hide, kendo-ui

在 kendo 2012.3.1114 中，我遇到了一个数字文本框问题（请参阅[如何在 kendo 窗口中突出显示时让 kendo NumericTextBox 保持焦点？](https://stackoverflow.com/questions/14656847/how-can-i-have-kendo-numerictextbox-keep-focus-during-highlighting-in-a-kendo-wi)）。

我一直无法找到解决办法，所以在此期间我犹豫地决定（因为我接近项目发布周期的尾声）尝试版本 2012.3.1315。在我的回归测试期间，我发现该问题已得到修复，但网格组件的 hideColumn 被破坏。

这是一个显示问题的jsfiddle

[http://jsfiddle.net/e6shF/42/](http://jsfiddle.net/e6shF/42/)

这是代码：

```
var grid = $("#grid").kendoGrid({
dataSource: {
    data: [
        {"foo": {"bar": 10, "moo": "y", "coo": 4}, "too": "test1"},
         {"foo": {"bar": 20,  "moo": "z", "coo": 3}, "too": "test1"}
    ]

},
columns: [
    {
        field: "foo.bar"
    },        
    {
        field: "foo.moo"
    },
    {
        field: "foo.coo"
    },

    {
        field: "too"
    }
]   
}).data("kendoGrid");

grid.hideColumn("foo.moo");
grid.hideColumn("foo.coo"); 
```

请注意，第二次调用 hideColumn 将隐藏列标题，但不会隐藏列数据。在第二列 hide 之后进行 grid.refresh 调用似乎可以解决问题，但这在以前的版本中不是必需的（文档也没有表明调用是必要的）。我认为这是一个引入的错误，所以我想我正在用一个问题换一个新问题（也许很多问题）。

任何想法

1) 如何在不刷新网格的情况下解决此问题或

2) 为什么 hideColumn 在新版本中不起作用或

3）更好地解决其他线程中的数字文本框问题，所以我不必担心希望在发布之前在这个新版本中发现并修复其他问题

将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:50:27.383

这可能不是您要寻找的答案，但我注意到切换列隐藏的顺序会使问题消失：

```
 grid.hideColumn("foo.coo");
grid.hideColumn("foo.moo"); 
```

这是一个显示它工作的小提琴：http: [//jsfiddle.net/derickbailey/rkmqz/](http://jsfiddle.net/derickbailey/rkmqz/)

我也会让开发团队意识到这一点。

# c# - EF 查询不会强制转换

> ID：14737976
> 
> 赞同：0
> 
> 时间：2013-02-06T20:17:05.123
> 
> 标签：c#, entity-framework, lambda

我正在使用 EF 4.x 填充 ASP.NET 下拉列表。我首先创建一个变量：

```
CPAS_EM.qryxrefVendorWorker wrkrs; 
```

然后，我去填充它：

```
 using (CPASEntities sds = new CPASEntities())
        {
            wrkrs = (qryxrefVendorWorker)
                (from w in sds.qryxrefVendorWorkers 
                 where w.VendorID == currVendorID && 
                 ((w.ExpiryDate == null) | (w.ExpiryDate >= currWorkDate)) 
                 select w);
            ddlWorker.DataSource = wrkrs;
            ddlWorker.DataValueField = wrkrs.WorkerID.ToString();
            ddlWorker.DataTextField = wrkrs.WorkerName;
            ddlWorker.DataBind();
        } 
```

我在“wrkrs = ...”语句中收到一个错误，表明一个转换错误：

> System.InvalidCastException 未被用户代码处理
> Message=Unable to cast object of type 'System.Data.Objects.ObjectQuery`1[CPAS_EM.qryxrefVendorWorker]' 类型为 'CPAS_EM.qryxrefVendorWorker'

谁能在这里指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:23:35.713

你的代码

```
(from w in sds.qryxrefVendorWorkers 
where w.VendorID == currVendorID && ((w.ExpiryDate == null) | (w.ExpiryDate >= currWorkDate)) 
select w) 
```

实际上是一个查询，而不是单个对象。您可能想添加`FirstOrDefault()`以获取单个元素。然后也不需要演员表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:27:02.700

为什么需要在使用范围之外声明的变量？你不能这样做：

```
 using (CPASEntities sds = new CPASEntities())
    {
        var wrkrs = (from w in sds.qryxrefVendorWorkers 
                     where w.VendorID == currVendorID 
                       && ((w.ExpiryDate == null) | (w.ExpiryDate >= currWorkDate)) 
                     select w).FirstOrDefault();
        ddlWorker.DataSource = wrkrs;
        ddlWorker.DataValueField = wrkrs.WorkerID.ToString();
        ddlWorker.DataTextField = wrkrs.WorkerName;
        ddlWorker.DataBind();
    } 
```

并完全取消声明？

此外，正如 user1908061 所说，您还需要 FirstOrDefault() 来获取单个对象而不是集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T03:27:33.903

你可以试试这个：

```
List<sds.qryxrefVendorWorkers > lstWorkers = 
    (from w in sds.qryxrefVendorWorkers 
     where w.VendorID == currVendorID && 
     ((w.ExpiryDate == null) | (w.ExpiryDate >= currWorkDate)) 
     select w).ToList();

ddlWorker.DataSource = lstWorkers;
ddlWorker.DataValueField = "WorkerID";
ddlWorker.DataTextField = "WorkerName";
ddlWorker.DataBind(); 
```

这将返回一组`qryxrefVendorWorkers`. 转换失败是因为（简单来说）当您将查询转换为`qryxrefVendorWorker`

# c# - .xml、.ini 或 .txt 哪个读起来快？

> ID：14737977
> 
> 赞同：4
> 
> 时间：2013-02-06T20:17:05.480
> 
> 标签：c#, .net, xml, io, ini

我的应用程序必须读取存储在文件中的数据并获取变量或数组的值才能对其进行处理。

我的问题是，哪种文件格式可以快速轻松地从文件中检索数据。

我正在考虑使用 .xml、.ini 或只是一个简单的 .txt 文件。但是要读取 .txt 文件，我将不得不编写大量带有许多 if 或 else 条件的代码。

我不知道如何使用 .ini 和 .xml。但是，如果它们会更好更快，那么我会先学习它们，然后再使用它们。请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:50:30.413

我将假设您在这里表示的是原始性能不是系统健壮性的优先级。

对于值与名称配对的简单数据，ini 可能是最简单的解决方案。更复杂的结构化数据将引导您使用 XML。根据[之前提出的问题](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)，如果您使用 C#（因此假定使用 .Net）XML 通常是首选，因为它已内置到 .Net 库中。由于 xml 更灵活并且可以根据程序的需要进行更改，因此我个人也会推荐 xml 而不是 ini 作为文件标准。学习 XML 库需要做更多的工作，但是它很快就会得到回报，并且是一个标准化的系统。

文本可能很快，但您可能会为了速度而牺牲大量强大的解析行为，或者花费更多的工时开发和维护高速专用解析器。

有关读取 xml 文件的参考：（在 .Net 库中本机支持）

*   [MSDN XMLTextReader 文章](http://msdn.microsoft.com/en-us/library/aa287537(v=vs.71).aspx)
*   [MSDN XMLReader 文章](http://msdn.microsoft.com/en-us/library/9d83k261(v=vs.71).aspx)
*   [使用 XMLSerializer 将数据写入 XML](http://msdn.microsoft.com/en-us/library/aa287546(v=vs.71).aspx)

有关读取 ini 文件的参考资料：（.Net 库本身不支持）

*   [相关问题](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T20:20:42.757

如果它是表格数据，那么仅使用 CSV（逗号分隔值）文件可能会更快。

如果它是结构化数据（如树或其他东西），那么您可以使用 C# 中的 XML 解析器，它更快（但您需要付出一些学习努力）

如果数据像字典一样，那么 INI 将是更好的选择。这实际上取决于您的应用程序中的数据类型

或者，如果您不介意 RDBMS，那么这将是一个更好的选择。通常，一个好的 RDBMS 被优化为处理大数据并非常快速地读取它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T20:37:48.650

如果您不介意二进制文件（人们无法读取和修改自己的文件），最快的方法是将一组数字序列化到文件中，然后从文件中反序列化。

该文件会更小，因为数据存储效率更高，需要更少的 I/O 操作来读取它。它还需要最少的解析（实际上是最少的），因此阅读速度会很快。

假设您的号码位于此处：

```
int[] numbers = ..... ; 
```

您可以使用以下代码将它们保存到文件中：

```
using(var file = new FileStream(filename, FileMode.Create))
{
    var formatter = new BinaryFormatter();
    formatter.Serialize(numbers, file);
} 
```

要从文件中读取数据，请打开它，然后使用：

```
numbers = (int[])formatter.Deserialize(file); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T21:42:56.837

我认为@Ian T. Small 很好地解决了文件类型之间的差异。

鉴于@Shaharyar 对@Aniket 的回应，鉴于我们拥有的范围信息有限，我只想将其添加到 DBMS 对话中作为解决方案。

**数据集会增长吗？条目如何构成“许多字段”？**

我同意 r-dbms（关系）是一个潜在的解决方案，远远超过大型数据集。下一个问题是什么是大数据集。

**什么时候（以及哪个）DBMS 是个好主意**
当@Shaharyar 说很多字段时，我说的是 10 个或 100 个字段？
=> 10-20 个字段不需要 r-DBMS 的开销（安装大小、CRUD 代码等）。对象的 XML 序列化要简单得多。

=> 如果存在不确定数量的字段（即：字段数量随着时间的推移而增加），他需要符合[ACID](http://en.wikipedia.org/wiki/ACID)，或者有数百个字段，那么我会说@Aniket 就位。

@Matt 对 NoSQL 的建议也很棒。它将提供高吞吐量（远远超过每隔几秒更新一次所需的）和简化的序列化/反序列化。

我在这里看到的唯一缺点是应用程序大小/配置。（即使是重量轻、易于配置的 MongoDB 也会为 DBMS 设施和驱动程序增加 10 MB。对于旨在快速轻松分发的小于 1MB 的小型应用程序来说并不理想。）哦，@Shaharyar，如果您确实需要 ACID 合规性，请确保首先检查数据库。例如，Mongo 不提供它。并不是说您将永远丢失数据，只是无法保证。

**另一个选项 - 没有 DBMS，但增加了吞吐量**
我想提出的最后一个建议将需要一些代码（特别是一个充当缓冲区的对象）。
如果
1\. 数据集很小（10 不是 100）
2\. 字段数量是固定的
3\. 没有 ACID 合规性要求
4\. 你担心事务负载增加（即：每秒更新很多）

你也可以只缓存数据存储对象中的更改并在程序关闭时刷新，或者每隔“n”秒/分钟/等刷新一次。

根据@Ian T. Small 的帖子，我们将使用内置于 .Net 框架中的原生 XML 类序列化。

以下只是过于简化的伪代码，但应该给您一个想法：

```
public class FieldContainer
{
    bool ChangeMade
    Timer timer = new Timer(5minutes)

    private OnTimerTick(...)
    {
          If (ChangeMade)
             UpdateXMLFlatFile()
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T20:23:20.443

它需要多快？

txt 将是最快的选择。但是您必须自己编写解析器。（速度*确实*是有代价的）

xml 可能是最容易实现的，因为您需要 xmlSerializer（或其他类）来进行艰苦的工作。

对于小型配置文件（约 0.5MB 或更小），您将无法分辨速度上的任何差异。当涉及到非常大的文件时，txt 和自定义文件格式可能是要走的路。然而，你总是可以选择任何一种方式：看看像 OpenStreetMap 这样的项目，它们有巨大的 xml 文件（> 10 GB）并且它仍然可用。

# java - JFace CTabFolder，在选项卡之间切换

> ID：14737978
> 
> 赞同：0
> 
> 时间：2013-02-06T20:17:18.120
> 
> 标签：java, user-interface, swt, jface

我正在开发 JFace 中的应用程序。所以我有一个 CTabFolder，里面有很多 CTabItems。我想要的是能够自动切换以显示任意 CTabItem。

我的想法是这样的：

```
CTabFolder myFolder = FolderFactory.newFolder();
myFolder.showItem(myFolder.getItem((ARBITRARY_INT)));

    /*These don't help!*/
    //myFolder.update();
    //myFolder.pack();
    //myFolder.redraw(); 
```

该文件夹本身就可以正常工作。ie 用户可以通过鼠标来切换。不同之处在于，我希望能够默认以不同的视角显示不同的选项卡。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T20:33:52.060

你需要使用`CTabFolder#setSelection(..)`. 显示项目只显示项目，如果有很多项目并且有些被隐藏，此方法将滚动到它们。

# python - 两个for循环，第二个只在第一次迭代python时执行

> ID：14737980
> 
> 赞同：1
> 
> 时间：2013-02-06T20:17:22.053
> 
> 标签：python, for-loop

我是一个 python 菜鸟，我正在尝试比较两个文件中的行之间的值，如果该行在第二个文件中，则输出“行名”，后跟 1，如果第二个文件中缺少该行，则输出 0。第一次迭代返回 1，因为该行在第二个文件中，但对于剩余 > 1,000 行，无论它们是否在第二个列表中，它们都返回 0。似乎第二个“for循环”只在第一次迭代时执行。关于为什么的任何想法？这是我的代码：

```
 import sys  

    file1 = sys.argv[1] 

    file2 = sys.argv[2]

    name = str(file2)

    f1 = open(file1, 'r') 
    f2 = open(file1, 'r')
    o1 = open((name + '1.txt'), 'w')

    for line in f1:
        name = line.strip('\r\n')
        count = 0
        for line1 in f2:
            if name == line1.strip('\r\n'):
                count += 1
                print (str(name) + '\t' + str(1))
                o1.write(str(name) + '\t' + str(1) + '\r\n')
        if count == 0:
            print (str(name) + '\t' + str(0))
            o1.write(str(name) + '\t' + str(0) + '\r\n')

    f1.close()
    f2.close()
    o1.close()
Any help is very much appreciated! 
```

经过一些更改，这就是我所拥有的，它只返回“1s”

```
f1 = open(file1, 'r') #opens files for reading
f2 = open(file2, 'r')
o1 = open((name + '1.txt'), 'w')

f2s = {line.strip('\n') for line in f2}

for line in f1:
    line = line.strip('\n')
    count = 0
    if line in f2s:
        count += 1
        print (str(line) + '\t' + str(1))
        o1.write(str(line) + '\t' + str(1) + '\n')
    if count == 0:
        print (str(line) + '\t' + str(0))
        o1.write(str(line) + '\t' + str(0) + '\n') 
```

尴尬的是，我打开同一个文件两次。菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T20:22:53.457

`f2`是第二个文件的迭代器，当它被读取时，它已经用尽了。

您*可以* 重置迭代器`f2.seek(0, 0)`，但这并不是最好的方法。

最好将所有值 from`f2`放入 a 中`set`，然后只迭代`f1`一次：

```
f2s = {line.strip('\n') for line in f2}

for line in f1:
    name = line.strip('\n') # No need for \r\n
    if name in f2s:
        # etc. 
```

`f1`如果您需要从in计算每行的出现次数`f2`，则可以使用 a [`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
from collections import Counter
f2c = Counter(line.strip('\n') for line in f2)

for line in f1:
    name = line.strip('\n')
    if name in f2c:
        count = f2c[name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:23:04.637

第一次执行`for line in f2:`时，它会遍历 中的每一行`f2`，将当前文件指针留在文件末尾。所以，第二次，它从文件末尾开始，遍历所有剩余的 0 行……</p>

如果你想重复这一点，有几种方法可以做到。您可以将其`f2 = open(file1, 'r')`移至外循环。或者您可以使用 重置文件`f2.seek(0, 0)`。或者你可以使用`itertools.tee`.

但是，除非您真的没有足够的内存一次保存整个文件，否则您可能希望`list`第一次将这些行读入 a 并对其进行迭代`list`：

```
l2 = list(f2)
# ...
for line in f1:
    # ...
    for line1 in l2:
        # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:51:48.280

标准库[difflib](http://docs.python.org/2/library/difflib.html)有助于比较行，也许您可​​以利用它。

# php - PHP获取选择选项值

> ID：14737981
> 
> 赞同：0
> 
> 时间：2013-02-06T20:17:28.417
> 
> 标签：php, forms, function, get

我有一个 javascript 函数，我必须将它转换为 php。

但是在php中我不知道如何使它工作。

该功能在页面的选择框中获取值，并在按下提交时将其转换为 url 链接。

在javascript中，您无需提交或刷新页面即可轻松获取选择框的值，并将该值直接放入函数中。

但是在 PHP 中，如果不刷新页面，我就无法获得选择值。

例子：

```
<form name="form" method="post" action="<?php getUrlValues('car', '31231h3', quantity='***') ?>"
<select name="quantity">
   <option value="1"></option>
   <option value="2"></option>
</select> 
```

无论我在选择框中选择什么，都会直接显示到函数中。getUrlValues('car', '31231h3', 数量=选项值

有没有办法做到这一点？无需刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:57:11.533

如果客户端不提交表单，PHP 无法获取表单字段的值。但是您可以提交到备用页面，处理值，然后重定向到正确的 url。例如，假设您的目标域/页面是“www.mydomain.com/process.php”：

```
 <?php
    $redirect_url = "http://www.mydomain.com/process.php?car=" . $_GET['car'] . "&31231h3=" . $_GET['31231h3'] . "&quantity=" . $_POST['quantity'];
    header("Location: " . $redirect_url);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:20:26.963

像这样的东西可以完成这项工作

```
<?PHP
$urlStr = "";
foreach($_GET as $k => $v)
$urlStr .= "$k=$v;";
?>

<form name="form" method="post" action="<?PHP echo $urlStr; ?>"> 
```

# php - 无法使用 PHP 解码电子邮件地址

> ID：14737984
> 
> 赞同：1
> 
> 时间：2013-02-06T20:17:39.203
> 
> 标签：php, jquery, mysql

我通过 jquery 向 PHP 页面发送电子邮件，所以当地址到达服务器时，它看起来像这样：

```
emailaddress%40gmail.com 
```

我正在尝试使用 html_entiity_decode 将其转换为：

```
$values['emailaddress'] = 'emailaddress%40gmail.com';
$email_address = html_entity_decode($values['emailaddress']); 
```

html_entity_decode 似乎不起作用

在将其交给服务器之前，我是否需要在客户端做一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:20:37.807

电子邮件是 url 编码的，而不是 html 编码的。

```
$email_address = urldecode($values['emailaddress']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:20:41.100

这不是一个 htmlentity，它是 url 编码。使用[`urldecode`](http://php.net/manual/en/function.urldecode.php).

# c# - 如何在 C# 中手动将连接信息添加到 cystal 报告？

> ID：14737989
> 
> 赞同：0
> 
> 时间：2013-02-06T20:17:53.080
> 
> 标签：c#, crystal-reports

我有一个包含水晶报表查看器的表单，我有一个水晶报表。水晶报表没有数据连接，没有数据源，因为我已经手动连接到我的数据库。（通过为所有内容编写代码）我想在我的报告中显示数据。如何将报告的连接信息设置为表单中的连接信息。IE。myDataset、myCon 等

PS：我对水晶报表非常陌生。我查看了教程，但它使用水晶报表向导进行连接。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:25:24.163

我将连接字符串放在 Configuration.AppSettings 中。

```
CrystalReportSource CrystalReportSource1 = new CrystalReportSource();
CrystalReportViewer CrystalReportViewer1 = new CrystalReportViewer();

CrystalReportViewer1.ReportSource = CrystalReportSource1;
CrystalReportViewer1.EnableParameterPrompt = false;
CrystalReportSource1.Report.FileName = "Report3.rpt";
CrystalReportSource1.EnableCaching = false;

CrystalReportSource1.ReportDocument.SetParameterValue(0, ponumber);
CrystalReportSource1.ReportDocument.SetParameterValue(1, receiptno);

TableLogOnInfo logOnInfo = new TableLogOnInfo();

logOnInfo.ConnectionInfo.ServerName = ConfigurationManager.AppSettings["WarehouseReportServerName"];
logOnInfo.ConnectionInfo.DatabaseName = ConfigurationManager.AppSettings["WarehouseReportDatabaseName"];
logOnInfo.ConnectionInfo.UserID = ConfigurationManager.AppSettings["WarehouseReportUserID"];
logOnInfo.ConnectionInfo.Password = ConfigurationManager.AppSettings["WarehouseReportPassword"];

TableLogOnInfos infos = new TableLogOnInfos();
infos.Add(logOnInfo);
CrystalReportViewer1.LogOnInfo = infos;

maindiv.Controls.Add(CrystalReportSource1);
maindiv.Controls.Add(CrystalReportViewer1);

CrystalReportViewer1.DataBind(); 
```

# f# - F# 高级练习

> ID：14737991
> 
> 赞同：26
> 
> 时间：2013-02-06T20:18:01.003
> 
> 标签：f#, functional-programming

我已经阅读了有关 F# 的书籍，并且完成了书中大部分的基本练习。现在我正在寻找更高级的练习来提高我在语言和函数式编程概念方面的技能。

有没有地方或书可以让我通过专门设计的练习来练习 F# 以学习语言功能？现在我只能找到介绍性的东西或一般的编程问题网站（例如 Project Euler）。

我的目标真的是学习如何以函数式的方式思考，并习惯于模式匹配、部分应用函数、monads/工作流、尾递归等。我想学习如何使用功能构造来解决问题。

我也对为其他函数式编程语言（如 Haskell）设计的任何好的练习感兴趣。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-06T20:32:03.473

如果您相信通过实践经验学习，那么[Project Euler 问题](http://projecteuler.net/problems)可能是您的练习。它们不仅限于函数式编程，而且它们的数学性质非常适合 F# 和其他函数式语言。[Yet Another Project Euler Series](http://diditwith.net/CategoryView,category,Project+Euler.aspx)是在 F# 中开始使用 Project Euler 的一个很好的资源。

我曾经通过[99 个问题](http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html)学习 Prolog，但我看到人们也通过它们学习 Lisp、Haskell、OCaml 等。我认为这些练习是学习 F# 的有用资源。它们是精心设计的问题。前几个教您使用列表（F# 中的基本数据结构）。关于逻辑、树和图的更高级问题是探索高级 F# 功能的好机会。以下是[OCaml](http://ocaml.org/tutorials/99problems.html)和[F#](https://github.com/paks/99-FSharp-Problems)中的解决方案集，以供您参考。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-06T21:03:44.557

我从前 50 个[Project Euler](http://projecteuler.net/)问题开始。那是一次很棒的初步学习经历。

在我开始积极参与 Stackoverflow F# 标签之后不久。看到其他人提供的答案，并且不得不研究我自己的答案是非常有教育意义的（你知道他们所说的通过教学来学习，这是真的）。

然后，我最大的学习经历来自于 F# 中的开源项目。即[FsEye](http://code.google.com/p/fseye/)和[Unquote](http://code.google.com/p/unquote/)。这两个想法都来自对我使用 F# 的经验的反思，并看到了丰富 F# 生态系统的机会。就 FsEye 而言，它正在增强 FSI 的体验。在 Unquote 的情况下，它利用了独特的 F# 功能。这两次在严肃项目中边做边学的经验真正让我对 F# 有了深刻的理解和技能。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-06T20:21:40.463

[tryfsharp.org](http://www.tryfsharp.org/)是一个学习 F# 的好网站。教程按技能水平和问题领域分类。它可能正是您正在寻找的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-30T00:59:47.940

[HackerRank](https://www.hackerrank.com/)为您提供算法挑战。有一整节专门介绍[函数式编程](https://www.hackerrank.com/domains/fp/intro)，当您创建解决方案时，您可以选择 F# 作为您选择的语言。

在函数式编程中，您可以在不同的任务组中进行选择：递归、函数式构造器、解析器等等。

# java - android从内部存储中删除文件

> ID：14737996
> 
> 赞同：21
> 
> 时间：2013-02-06T20:18:23.107
> 
> 标签：java, android

我已经从活动创建了一个存储在内部存储中的文件。如何从另一个活动中删除此文件？

我想我必须获取文件的目录（我不确定如何）并删除它。我尝试使用

```
context.deleteFile(); 
```

但它不起作用，因为我试图从非静态方法调用它。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-06T20:22:25.327

这是你的答案：

```
File dir = getFilesDir();
File file = new File(dir, "my_filename");
boolean deleted = file.delete(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:22:40.503

您可以尝试让实例指向文件并将其删除，就像在 [这个答案](https://stackoverflow.com/questions/5486529/android-delete-file-from-internal-storage) 或[这个](https://stackoverflow.com/questions/5486529/android-delete-file-from-internal-storage)