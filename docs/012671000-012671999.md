# StackOverflow 问答 12671000-12671999

# c++ - 在一个字符串 C++ 中检查多个信号

> ID：12671001
> 
> 赞同：2
> 
> 时间：2012-10-01T09:52:13.070
> 
> 标签：c++, string

我想在一个字符串中搜索一个不等于 "(",")","!","&","|",";" 的位置。如果我使用`if(str[1] != "!" && str[1] != "(" ...)`，它太长了......有什么我可以用它来简化这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T09:54:29.410

我认为您在谈论[find_first_not_of](http://www.cplusplus.com/reference/string/string/find_first_not_of/)。`str.find_first_not_of("!(...")`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T09:54:37.037

```
string badChars = "!()&|;";
if ( badChars.find(str[1]) == string::npos )
{
} 
```

**编辑**：我想我误解了这个问题。正如 Michael Krelin 指出的那样，[`find_first_not_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of)这可能就是您想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T09:56:16.280

任何正则表达式引擎都可以通过以下方式匹配：

```
'([^()!&|;])' 
```

# postgresql - 配置 JDeveloper 以使用 PostgreSQL

> ID：12671002
> 
> 赞同：0
> 
> 时间：2012-10-01T09:52:15.990
> 
> 标签：postgresql, jdeveloper

我有一个使用 Struts 和 Hibernate 的 Java 项目。我使用 PostgreSQL 作为项目的数据库。

我已经在 J​​Developer 中导入了该`.jws`文件。所有`java`和`jsp`文件都导入到项目中。

当我尝试运行该项目时，出现了多个错误。我认为这是由于数据库连接失败。

我需要为项目配置 pgsql 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:43:47.900

You'll need to add the postgreSQL jdbc jar files to your project and to the embedded WebLogic instance. Tell us the specific error you are getting and we'll help you more.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T01:09:57.857

您必须提供有关错误内容的更多信息。

但是在使用捆绑服务器进行测试时，JDeveloper 中的一些常见问题是（如果您使用数据源）您必须将驱动程序 jar 放在服务器 lib 文件夹中，或者通过转到 Tools->Manage Libraries 将其声明为库。

如果您发布您收到的错误以及您如何连接到数据库，我们可能会为您提供更多帮助。

# mysql - WebMatrix 错误“用户帐户‘root’的指定密码无效....”

> ID：12671004
> 
> 赞同：5
> 
> 时间：2012-10-01T09:52:22.757
> 
> 标签：mysql, sql-server, webmatrix

在从“App Gallery”创建新的 Joomla、Drupal 或任何涉及数据库的网站时，我收到以下错误：

**MySQL**

"*为用户帐户 'root' 指定的密码无效，或无法连接到数据库服务器*"

**SQL 服务器**

"*为用户帐户 'sa' 指定的密码无效，或无法连接到数据库服务器*"

可以做些什么来阻止此错误的发生？我不相信它与数据库有关，我责怪 WebMatrix，因为这对两个数据库来说都是同一个问题。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:36:08.397

我遇到了同样的问题，我执行了以下步骤来解决问题：

1.  以管理员身份打开 Sql Server Management Studio

2.  使用 Windows 身份验证登录到 .\SQLEXPRESS

3.  转到安全选项卡->登录->更改“sa”密码，然后按确定

4.  在 WebMatrix 中使用新创建的密码，您应该都已设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:43:01.797

在 SQL Server 的情况下，我认为使用 WebMatrix 安装 Joomla 时默认数据库是 .\SQLExpress，因此“sa”是 .\SQLExpress 的用户。您应该检查密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T01:28:16.970

我按照这里的指示：http: [//www.microsoft.com/web/post/understanding-mysql-errors-when-installing-web-apps-in-webmatrix](http://www.microsoft.com/web/post/understanding-mysql-errors-when-installing-web-apps-in-webmatrix)并解决了这个问题。

您不仅需要卸载 MySQL，还需要删除文件夹 \ProgramData\MySQL

因为密码详细信息缓存在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-13T13:05:40.767

对于 MySQL 问题：按照以下步骤重置 root 密码。

1.  如果 MySQL 服务器正在运行，请停止它。

2.  创建一个包含新密码的文本文件并保存到一个地方。内容是：`ALTER USER 'root'@'localhost' IDENTIFIED BY 'MyNewPass';`

3.  使用 cmd 启动 MySQL 客户端命令行，然后输入

    `C:> cd "C:\Program Files\MySQL\MySQL Server 5.7\bin"`

    `C:> mysqld --init-file=C:\mysql-init.txt`

4.  服务器启动成功后，删除文本文件。

现在您可以使用上面提供的新密码继续安装 Web Platform Installer。

参考资料：[http](http://dev.mysql.com/doc/refman/5.7/en/resetting-permissions.html) ://dev.mysql.com/doc/refman/5.7/en/resetting-permissions.html 。

# javascript - 带有 HTML DOM 的 JavaScript 不起作用

> ID：12671008
> 
> 赞同：1
> 
> 时间：2012-10-01T09:52:32.717
> 
> 标签：javascript, html, dom

我的 JavaScript 函数`date(id)`应该通过访问函数调用中传递的元素来显示当前日期。问题是它不起作用，我不明白为什么。谁能帮我？

这是我的代码：

```
<script type = "text/javascript">
function date(id)
{
document.getElementById(id).innerHTML = Date();
}
</script> 
```

在 HTML 中：

```
<p style = "text-align:center;" id = "datep">
</p>

<input type = "button" onclick = "date(datep)" value = "Display date" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:20:49.727

在您的输入标签中，您将 id 传递给您的函数。您的 id 是一个字符串，因此您需要在其周围加上引号。

它应该看起来像这样......

```
<input type="button" onclick="date('datep')" value="Display date" /> 
```

# ruby-on-rails - 不能让铁轨吃掉我需要的嵌套表格

> ID：12671010
> 
> 赞同：0
> 
> 时间：2012-10-01T09:52:44.853
> 
> 标签：ruby-on-rails, ruby, nested-attributes

完整的相关代码在[这里](https://gist.github.com/4ac6cb3927c1ea0d7915)。

我的问题是，我正在尝试从[Railscast 196](http://railscasts.com/episodes/196-nested-model-form-part-1)重建一些东西，以在我的表单中获取多个嵌套表单 for `Campaign`。每个`Campaign`人都可以通过`CampaignTeam`. 此外，`Campaign`它依赖于客户端，没有它，它就无法存在。

```
# config/routes.rb
resources :clients do
  resources :campaigns
end 
```

现在，使用上面的代码（我不想用它来混淆这个问题），我得到一个错误：`Can't mass-assign protected attributes: campaign_team`. 当我添加时`attr_accessible :campaign_team`，我得到`unknown attribute: campaign_team`.

我怎样才能让rails最终吃掉这个表格，然后只`CampaignTeam`用一个成员嵌套一个数组？我在这里做错了什么？

（很抱歉现在在这个单一的表格上呆了三个小时，非常沮丧）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:05:51.493

如果您只是添加现有团队，则可以使用 collection_select，然后添加

```
attr_accessible :teams_ids 
```

另一方面，如果你需要创建团队，你需要

```
accept_nested_attributes_for :teams 
```

（这一切都取决于你`has_many :teams, :through => :campaign_teams`在`Campaign`课堂上设置的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:06:29.403

我已经解决了这个问题。在控制器中，我在控制器中进行了更改

```
def new
  @client = Client.find params[:client_id]
  @campaign = @client.campaigns.build
  @campaign.campaign_teams.build          # New line
end 
```

然后将第`new.html.haml`15 行更改为

```
=f.fields_for :campaign_teams do |b| 
```

不是它工作正常。

# java - 如何为 XQ 消息中的部分设置内容类型

> ID：12671013
> 
> 赞同：0
> 
> 时间：2012-10-01T09:53:05.350
> 
> 标签：java, jms

我们可以通过调用方法获取内容类型：`XQPart.getContentType()`但是我不知道如何为XQ消息的当前部分设置内容类型

`setContent(this.getContent(), "my_content_type")`不工作

[XQPart 接口文档](http://documentation.progress.com/output/Sonic/8.0.0/Docs8.0/api/esb_api/com/sonicsw/xq/XQPart.html#getContentType%28%29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:00:43.860

> setContent(this.getContentType(), "some_stuff") 不起作用

这应该是`setContent("<your stuff>", "<content-type>");`，即第一个参数是实际内容，第二个参数是它的类型。

例如

```
setContent("this is sample text", "text/plain");
setContent("<html><body>this is sample html</body></html>", "text/html");
setContent(<XQPart whose content is an excel sheet>, "application/vnd.ms-excel"); 
```

# php - 将样式表文件包含在 PHP 中的 MPDF 转换中

> ID：12671021
> 
> 赞同：0
> 
> 时间：2012-10-01T09:53:41.820
> 
> 标签：php, html, mpdf, html-to-pdf

我已经制作了 HTML 以使用 MPDF 将其转换为 PDF，但问题是我无法包含样式表文件。

例子：

```
include("../mpdf.php");
$mpdf=new mPDF('c'); 
$mpdf->SetDisplayMode('fullpage');
// LOAD a stylesheet
$stylesheet = file_get_contents('mpdfstyleA4.css');
$mpdf->WriteHTML($stylesheet,1);
$mpdf->WriteHTML($html);
$mpdf->Output(); 
```

我使用了上面的代码，但我看不到样式的效果。有谁知道包含样式的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T10:27:31.977

您需要在 html 中加载样式表 - 您的代码段中不清楚 $html 的内容来自哪里，但这是加载样式的地方。使用您的代码，您将编写已加载的 CSS，就好像它是 PDF 的文档内容一样，我认为这不是您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T11:52:10.150

```
mPdf works best with inline style sheets which cause no bugs while pdf opens in different browsers. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:49:15.577

在我看来，您正在将新的 PDF 功能设置为“代码”模式。$mpdf=新 mPDF('c');

你试过没有“C”吗？

```
$mpdf=new mPDF(); 
```

另外，您的样式表“mpdfstyleA4.css”是否与 mpdf.php 位于同一路径？

# delphi - 在没有复制/粘贴代码的情况下实现 TObjectList 的排序

> ID：12671022
> 
> 赞同：3
> 
> 时间：2012-10-01T09:53:46.790
> 
> 标签：delphi, sorting, refactoring

我有一个用于对节点树（[VirtualTreeView](http://www.lischke-online.de/index.php/controls/virtual-treeview)）中的节点进行排序的过程 从 FMM4 报告中提取的所有内存泄漏都存储在 TMemoryLeakList 类的对象中（这些是我要排序的列表），它们存储在列表中称为 TGroupedMemoryLeakList，并且 TMLL 和 TGMLL 都扩展了 TObjectList。如果我想保持能够在升序和降序排序之间进行选择以及在四种不同数据类型中的一种排序之间进行选择的功能，我“必须”实现八种不同的比较方法（4 种排序类型 * 2 种排序方向）我继续主排序方法，因为我的 TMLL 列表扩展了 TObjectList。主要的排序方法如下[所示](http://pastebin.com/mcZJNBRi)。

fSortType 和 fSortDirection 字段的值是从 GUI 组合框获取的。这八个通用比较函数之一看起来像[这样](http://pastebin.com/sBnY3Jkd)。剩下的七个是这个的复制/粘贴变体。

有没有什么合理的方法可以重构大量的复制粘贴代码，并且仍然保留选择特定排序类型和方向的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:40:41.990

关于重构的好问题，但我不喜欢你可能正在寻找的答案。几行额外的代码或一些额外的例程没有任何问题。尤其是后者，在这种情况下，命名积极地有助于提高可读性。

我的建议是：保持设计不变，但缩短代码：

```
function CompareSizeAsc(Item1, Item2: Pointer): Integer;
begin
  Result := TMemoryLeak(Item2).Size - TMemoryLeak(Item1).Size;
end;

function CompareSizeDesc(Item1, Item2: Pointer): Integer;
begin
  Result := TMemoryLeak(Item1).Size - TMemoryLeak(Item2).Size;
end;

function CompareClassNameAsc(Item1, Item2: Pointer): Integer;
begin
  Result := CompareStr(TMemoryLeak(Item1).ClassName,
    TMemoryLeak(Item2).ClassName);
end;

procedure TMemoryLeakList.Sort;
begin
  case FSortDirection of
    sdAsc:
      case FSortType of
        stSize: inherited Sort(CompareSizeAsc);
        stClassName: inherited Sort(CompareClassNameAsc);
        stCallStackSize: inherited Sort(CompareCallStackSizeAsc);
        stId: inherited Sort(CompareIdAsc);
      end;
    sdDesc:
      case FSortType of
        stSize: inherited Sort(CompareSizeDesc);
        stClassName: inherited Sort(CompareClassNameDesc);
        stCallStackSize: inherited Sort(CompareCallStackSizeDesc);
        stId: inherited Sort(CompareIdDesc);
      end;
  end;
end; 
```

你不能让它比这个小得多，并保持相同水平的可读性。

当然，您可以按照[Arioch 'The 的](https://stackoverflow.com/a/12671149/757830)`Sort`建议重写例程：

```
procedure TMemoryLeakList.Sort;
const
  Compares: array[TSortDirection, TSortType] of TListSortCompare =
    ((CompareSizeAsc, CompareClassNameAsc, CompareCallStackSizeAsc,
    CompareIdAsc), (CompareSizeDesc, CompareClassNameDesc,
    CompareCallStackSizeDesc, CompareIdDesc));
begin
  inherited Sort(Compares[FSortDirection, FSortType]);
end; 
```

但是，为什么不重写 QuickSort 例程以消除对单独比较例程的需要呢？

或者，您可以将所有权添加到 TMemoryLeak，在这种情况下，您可以引用所有权列表及其排序方向和排序类型，以便在单个比较例程中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:01:05.950

使用函数指针。

```
var comparator1, comparator2: function (Item1, Item2: Pointer): Integer;

function sortComplex (Item1, Item2: Pointer): Integer;
begin
  Result := comparator1(Item1, Item2);
  if 0 = Result then   Result := comparator2(Item1, Item2);
end; 
```

然后你的 GUI 元素应该表现得像

```
 case ListSortType.ItemIndex of
    itemBySzie : comparator1 := sortBySizeProcAsc;
....
 end;

 DoNewSort; 
```

PS：确保在用户第一次单击任何 GUI 元素之前正确指定这些指针；

PPS：您可以进一步重新排列，例如

```
 type t_criteria = (bySize, byName,...);
      t_comparators = array[t_criteria] of array [boolean {Descending?}]
                      of function (Item1, Item2: Pointer): Integer;

 const comparator1table: t_comparators = 
       ( {bySize} ( {false} sortBySizeProcAsc, {true} sortBySizeProcDesc),
         {byName} ( {false} sortByNameProcAsc, ... 
```

然后，您将从该数组常量中填充工作指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:30:10.983

这是我的解决方案。除了完全重写这两个过程之外，我还在我的 TMemoryLeakList 类中添加了两个“静态”变量，并删除了以前的同名实例变量。这样，排序函数就可以全局访问它们。

```
TMemoryLeakList=class(TObjectList)
class var fSortType      :TMlSortType;
class var fSortDirection :TMLSortDirection;
...
end

procedure TMemoryLeakList.Sort;
begin
  inherited sort(sortBySomethingSomething);
end;

function sortBySomethingSomething(Item1, Item2: Pointer): Integer;
var
 a, b : string;
 ret : Integer;
begin
  ret := 1;
  if(TMemoryLeakList.fSortDirection = sdAsc) then
     ret := -1;
  case TMemoryLeakList.fSortType of stSize:
  begin
    a := IntToStr(TMemoryLeak(Item1).Size);
    b := IntToStr(TmemoryLeak(Item2).Size);
  end;
  end;
  case TMemoryLeakList.fSortType of stClassName:
  begin
    a := TMemoryLeak(Item1).ClassName;
    b := TMemoryLeak(Item2).ClassName;
  end;
  end;
  case TMemoryLeakList.fSortType of stID:
  begin
    a := IntToStr(TMemoryLeak(Item1).ID);
    b := IntToStr(TMemoryLeak(Item2).ID);
  end;
  end;
  case TMemoryLeakList.fSortType of stCallStackSize:
  begin
    a := IntToStr(TMemoryLeak(Item1).CallStack.Count);
    b := IntToStr(TMemoryLeak(Item2).CallStack.Count);
  end;
  end;
  //...jos tu
  if a=b then
    Result:=0
  else if a>b then
    Result:=-1*ret
  else if a<b then
    Result:=1*ret;
end; 
```

我想重写此解决方案以便在 中使用实例有界变量`fSortType,fSortDirection`，`TMemoryLeakList`但似乎不可能将成员函数传递给继承的排序函数（来自`TObjectList`），或者是吗？

# mysql - 如何在 MySQL 中解决这个“游标”类型的查询？

> ID：12671024
> 
> 赞同：1
> 
> 时间：2012-10-01T09:53:59.107
> 
> 标签：mysql

我的表中有以下数据。顺便说一句...这是 DD/MM/YYYY 格式：

```
Date
18/09/2012
17/09/2012
13/09/2012
11/09/2012
10/09/2012
09/09/2012
25/08/2012
24/08/2012 
```

我想要的结果是：

```
Date
18/09/2012
13/09/2012
11/09/2012
09/09/2012
25/08/2012 
```

规则：它从最晚的日期（18/09/2012）开始，并检查下一个日期（17/09/2012）。如果有日期，则将其从列表中删除，因为它需要相隔 1 天。然后转到 2012 年 9 月 13 日，然后检查 2012 年 9 月 12 日，没有找到，然后转到下一个，依此类推。基本上你不能让日期彼此接近（至少相隔 1 天）。

现在，如果它在 TSQL 上，我可以在光标上执行此操作，但是由于我正在使用 MySQL，MySQL 中是否有这样的事情？或者也许任何可以解决此查询的子查询方法？

我很感激你的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:15:08.230

```
SELECT
    "MyTable1"."Date"
FROM
    "MyTable" AS "MyTable1"
    LEFT JOIN "MyTable" AS "MyTable2" ON
        ADDDATE("MyTable1"."Date", INTERVAL 1 DAY) = "MyTable2"."Date"
WHERE
    "MyTable2"."Date" IS NULL
ORDER BY
    "MyTable1"."Date" DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:23:49.393

As long as I know about mysql query will be quit tricky and buggy if some how you manage to write the one. I suggest go for cursor, here is the syntax of the cursor, [here is the syntax of the cursor](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T05:41:04.920

Try this solution -

```
SELECT date FROM (
  SELECT
    date, @d := IF(@d IS NULL OR DATEDIFF(@d, date) > 1, date, @d) start_date
  FROM
    dates,
   (SELECT @d:=null) t
  ORDER BY
    date DESC
) t
WHERE start_date = date 
```

The subquery finds out start days (18, 13, 11...), then WHERE condition filters records. Try to run the subquery to understand how it works -

```
 SELECT
    date, @d := IF(@d IS NULL OR DATEDIFF(@d, date) > 1, date, @d) start_date
  FROM
    dates,
   (SELECT @d:=null) t
  ORDER BY
    date DESC 
```

# javascript - Knockout.js：标签元素的更新未反映在 JSON 源中

> ID：12671025
> 
> 赞同：0
> 
> 时间：2012-10-01T09:54:01.133
> 
> 标签：javascript, knockout.js

我是 knockout.JS 的新手。我将一个 JSON 集合绑定到一个表。

```
<tbody data-bind="foreach: Collection">
            <tr>
                <td>
                    <span data-bind="text: FirstName" ></span>
                </td>
                <td>
                    <span data-bind="text: LastName" ></span> 
                </td>
                <td>
                    <input type="button" data-bind="click: function(){ obj.RemoveItem($data) }" value="Del" />
                </td>
                <td>
                    <input type="button" data-bind="click: function(){ obj.SaveItems($data.Id) }" value="Edit/Save" />
                </td>
            </tr>
        </tbody>

function viewModel(collection) {
            var self = this;
            this.Collection = ko.observableArray(collection);
            this.AddItem = function() {
                this.Collection.push({FirstName:"", LastName:""});
            };
            this.RemoveItem = function(data) {
                this.Collection.remove(data);
            };
            this.SaveItems = function(id) {
                alert("New Collection: " + ko.utils.stringifyJson(self.Collection));
            }
        };

        var obj = new viewModel([
            { Id: 1,FirstName: "John", LastName: "Saleth" },
            { Id: 2, FirstName: "John", LastName: "Kennedy" }
        ]);

        ko.applyBindings(obj); 
```

在每一行中，我保留了一个编辑按钮，单击该按钮会在所有 TD 中插入一个文本框，其值为 span。在保存单击时，我正在使用文本框的值更新 span 元素的值。

问题是 span 元素的新值没有反映在 JSON 集合中。如何在单击保存按钮时使用更新的跨度值更新 JSON 源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:22:23.410

您还应该使 Collection 数组的每个属性都可观察。

```
function ItemModel(item) {
    this.Id = ko.observable(item.Id);       
    this.FirstName = ko.observable(item.FirstName);
    this.LastName = ko.observable(item.LastName);     
};

function viewModel(collection) {
    var self = this;
    this.Collection = ko.observableArray();
    ko.utils.arrayForEach(collection, function (i) { self.Collection.push(new ItemModel(i));  });
    this.AddItem = function() {
        this.Collection.push(new ItemModel({
            FirstName: "",
            LastName: ""
        }));
    };
    ...
}; 
```

# iphone - 我是否需要在 dealloc 方法中将释放发送到我的实例变量？(iOS)

> ID：12671028
> 
> 赞同：0
> 
> 时间：2012-10-01T09:54:09.107
> 
> 标签：iphone, objective-c, ios, memory-management

在我的类 dealloc 方法中，我有

```
- (void) dealloc
{
    [searchField release]; 
    [super dealloc];
} 
```

其中 searchField 在类变量中定义。

```
@interface SearchCell : UITableViewCell
{
    UISearchBar *searchField;
    id delegate;
} 
```

该类通过以下方式使用：

```
if (indexPath.section == 0)
    {
        SearchCell *mycell = [[SearchCell alloc] init];
        [cell setDelegate:self];
        return [mycell autorelease];
    } 
```

searchField 在这里创建：

```
- (id) init
{
    self = [super initWithFrame:CGRectZero];

    [self create];

    return self;
}

- (void) create
{
    searchField = [[UISearchBar alloc] initWithFrame:CGRectZero];
    searchField.autocorrectionType = UITextAutocorrectionTypeNo;    
    [self addSubview:searchField];
} 
```

我需要使用[searchField release]；在我的交易中？应用程序崩溃并显示消息：“* *[UISearchBar respondsToSelector:]: message sent to deallocated instance ** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:03:53.667

不，不要在那里释放它。由于您使用“autorelease”返回它，因此下一次运行事件循环将自动减少保留计数。

当您最终点击“dealloc”方法时，保留计数已经为 0，您的应用程序将引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:17:59.140

您需要了解对象所有权规则。在手动保留和释放环境（相对于 ARC）中，Objective-C 对象的规则可以用首字母缩写词**NARC**来记住。

如果您引用了使用**new**或**alloc**创建的新对象，或者您调用了**retain**的任何对象，或者您通过调用另一个对象上的**copy**或**mutableCopy**创建的任何对象，或者由任何以 any 开头的方法创建的任何对象在这些名称中（例如`newInstance`），那么 **您拥有该对象**，并且在您被释放之前您**必须**释放它。

但是，如果您没有做任何这些事情，那么您**不拥有该对象**，并且**不得**释放它。[来源](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

在您的情况下-您没有显示设置 value 的代码`searchField`，但是从崩溃中我想您永远不会拥有该对象的所有权。显示您分配给的代码，`searchField`我们都会确定。 **编辑**：您确实通过使用创建它来获得所有权`alloc`。您需要将其保留`release`在`dealloc`. 它是从其他地方释放的吗？或者细胞本身是否可能被过度释放？

# xcode - 无法在由 cordova 创建的项目上调用 xcodebuild

> ID：12671031
> 
> 赞同：3
> 
> 时间：2012-10-01T09:54:25.690
> 
> 标签：xcode, cordova-2.0.0

刚开始使用Xcode4.5。使用 Apache cordova ios (2.1.0) 创建了一个项目，使用了 cordova 的“create”脚本。我无法在以这种方式生成的项目上调用“xcodebuild”。它给出错误提示文件“Cordova/CDVViewController.h”未找到。

此时，“xcodebuild -list”仅显示 1 个模式“CordovaLib”。接下来我在 Xcode 中打开 myproject.xcodeproj，然后关闭 xcode（不做任何事情）。但是一旦在 Xcode 中打开，“xcodebuild -list”会显示 2 个模式：“CordovaLib”和“myproject”。现在运行“Xcodebuild -schema myproject”工作正常！

我需要能够在不在 Xcode 中打开项目的情况下获得 xcodebuild。任何帮助将不胜感激。

谢谢阿巴斯

# sql-server - SSIS - 脚本+流程任务将值传递给参数

> ID：12671034
> 
> 赞同：1
> 
> 时间：2012-10-01T09:54:35.213
> 
> 标签：sql-server, ssis

我有一个 SSIS 包，它有一个要执行的流程任务，它在内部执行一个 *.bat 文件。

*.bat 文件执行了几个步骤。我想将批处理文件中的一些值作为参数 %1、%2 等输入

我的结构如下：

-用户名 %1 -p%2

我想使用在流程任务之前出现的脚本任务将值动态传递给此流程任务。

![在此处输入图像描述](../Images/cf888dd07f25e7ef82b6f806a4370d43.png)

请告知如何实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:44:33.530

`Execute Process Task`有`Arguments`属性，可以通过动态设置`Expressions`。

1.  将参数值存储在变量中，例如`Param1`和`Param2`
2.  选择`Expressions`属性`Execute Process Task`并创建新表达式：`Property`=`Arguments`和`Expression`类似`"-username " + @[User::Param1] + " -p" + @[User::Param2]`. 如果参数不是字符串，您应该将它们转换为字符串。

# ruby-on-rails-3 - 使用 SOAP Savon gem 和 Rails

> ID：12671036
> 
> 赞同：0
> 
> 时间：2012-10-01T09:54:37.093
> 
> 标签：ruby-on-rails-3, savon

我正在尝试使用名为 Savon 的 SOAP gem 建立连接。我无法从网站上的文档中理解，我有这个 URL：“https://www.example.com/loginWeb/rvu.aspx”，这个凭据用户名：“user”，密码：“pass” .

我的代码是这样的（rails 控制台）：

```
client = Savon::Client.new("https://www.example.com/loginWeb/rvu.aspx")
client.wsse.credentials 'user', 'pass' 
```

我明白了：（尝试使用“摘要”的事件）

```
HTTPI executes HTTP GET using the net_http adapter
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

我下载了 SoapUI，当我尝试连接到 URL 时出现此错误：

```
Error loading [http://www.example.com/loginWeb/rvu.aspx?WSDL]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Unexpected character encountered (lex state 3): '& 
```

那么发生了什么 ？有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:01:47.413

[我想这与这里](https://stackoverflow.com/questions/4325563/ruby-savon-connect-ssl-connect-returned-1-errno-0-state-sslv3-read-server-ce)的问题相同：您正在尝试使用自签名 SSL 证书访问站点。

解决它的一种方法是阻止 Savon 检查它：

```
client = Savon::Client.new("https://www.example.com/loginWeb/rvu.aspx")
client.http.auth.ssl.verify_mode = :none
client.wsse.credentials 'user', 'pass' 
```

# java - 我想在我的申请中提供一些 pdf 文件

> ID：12671038
> 
> 赞同：1
> 
> 时间：2012-10-01T09:54:41.233
> 
> 标签：java, android

经过互联网上的某些研究和查找后，我发现我无法将这些文件放在资产文件夹中，因为这些文件将是我的应用程序私有的，我希望在按下按钮时调用本机 pdf 应用程序，将用户重定向到特定的文档。我感到困惑的是如何将文件与我的应用程序捆绑在一起，以便当用户下载或安装我的应用程序时，这些文件会存储在她的 SD 卡中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:00:29.413

[将您的评估文件复制到 sdcard](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)并单击按钮时打开 sdcard 中的文件，如下所示

```
 File rootDir = Environment.getExternalStorageDirectory();

 File file = new File(rootDir + "/filepath/"+fileName);//give the file path here
 if(file.exists())
   {
    // do action here
   } 
```

# javascript - 如何获取两个div之间的距离

> ID：12671040
> 
> 赞同：7
> 
> 时间：2012-10-01T09:54:49.720
> 
> 标签：javascript, jquery, jquery-mobile

所以我在另一个里面有一个 div - 我怎样才能得到它们之间的距离？

![纽扣](../Images/2532e7cfbac055a712c3bd08096505a6.png)

我试过类似的东西`$('#child').parentsUntil($('#parent')).andSelf()`- 但它返回一个对象，而不是距离。

PS我需要它来按下其他按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T09:57:58.933

[http://api.jquery.com/position/](http://api.jquery.com/position/)

要获得左侧距离，您可以使用：

```
var distLeft = $('#child').position().left; 
```

**这将返回`px`相对于偏移父级的距离**

如果您对元素的页面偏移量感兴趣，则：

```
var offsLeft = $('#child').offset().left; 
```

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T09:59:30.713

您可以使用[偏移量](http://api.jquery.com/offset/)

```
 var childOffset = $('#child').offset(), parentOffset = $('#child').parentsUntil($('#parent')).offset();
    var leftDistance  =childOffset.left - parentOffset.left;
    var topDistance = childOffset.top- parentOffset.top; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T09:59:38.710

有这个很棒的`getBoundingClientRect`功能。其他的都只是`a-b`

[https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T09:58:29.720

你尝试过类似的东西吗？

```
 $('innerDiv').position().left; 
```

# google-closure-compiler - 为什么 Closure Compiler 不重命名具有某些名称的对象？

> ID：12671041
> 
> 赞同：2
> 
> 时间：2012-10-01T09:54:51.970
> 
> 标签：google-closure-compiler

[当我在http://closure-compiler.appspot.com](http://closure-compiler.appspot.com)的闭包编译器中测试以下代码时：

```
// ==ClosureCompiler==
// @output_file_name default.js
// @compilation_level ADVANCED_OPTIMIZATIONS
// @formatting pretty_print
// ==/ClosureCompiler==

// These get renamed
window.foo = {};
window.bar = {};

// These don't
window.uid = {};
window.test = {}; 
```

输出是：

```
window.a = {};
window.b = {};
window.uid = {};
window.test = {}; 
```

为什么要重命名：

```
window.foo = {};
window.bar = {}; 
```

但不是：

```
window.uid = {};
window.test = {}; 
```

这似乎是某些词的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:04:53.533

# 更新

从 Closure-compiler 的 20150315 版本开始，默认启用基于类型的优化。

* * *

`--use_types_for_optimization`除非启用该标志，否则闭包编译器不会重命名与外部对象中定义的任何属性具有相同名称的属性。有关更多详细信息，请参阅[项目常见问题解答](https://github.com/google/closure-compiler/wiki/FAQ#some-of-my-properties-are-getting-renamed-but-some-arent-why)。

# iphone - 将函数移动到目标c中的后台线程

> ID：12671042
> 
> 赞同：35
> 
> 时间：2012-10-01T09:54:59.533
> 
> 标签：iphone, objective-c, ios, multithreading, background

我有一个函数返回一个在 iPhone 上计算需要 15 秒的字符串。

我希望能够在后台线程上运行该函数，以便主线程可以用于用户界面。

我听说`GCD`这是一种对此有好处的新技术，有人可以提供一些关于它如何工作的示例代码吗？

即在后台线程上运行一个通用函数并将结果返回给 UI 文本字段。

**编辑：**

谢谢Alladinian，它很管用。

但是，当我使用 GCD 时，我的函数在 iphone 模拟器上执行的时间要长 1 秒（我猜这在 iphone 上大约需要 5 秒（我必须在今天晚些时候对其进行测试才能确定））

有什么理由吗？也许后台线程较慢或什么？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-01T09:59:11.950

好吧，实际上使用 GCD 很容易。典型的工作流程是这样的：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);
dispatch_async(queue, ^{
    // Perform async operation
    // Call your method/function here
    // Example:
    NSString *result = [anObject calculateSomething];
    dispatch_async(dispatch_get_main_queue(), ^{
        // Update UI
        // Example:
        self.myLabel.text = result;
    });
}); 
```

有关 GCD 的更多信息，您可以在[此处查看 Apple 的文档](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T11:39:15.503

还要补充一点，有时你不需要使用 GCD，这个使用起来非常简单：

```
[self performSelectorInBackground:@selector(someMethod:) withObject:nil]; 
```

# iphone - 检查 MBProgressHUD 状态是否隐藏/显示

> ID：12671044
> 
> 赞同：3
> 
> 时间：2012-10-01T09:55:05.400
> 
> 标签：iphone, objective-c, progress-bar, mbprogresshud

我正在显示一些视图，webVies，当它们加载时，我会显示一个带有等待消息的 ProgressHud。我正在使用该对象的一个​​实例：

```
MBProgressHUD * progrssHUD 
```

使用`show`和`hide`方法来控制加载窗口。在某些视图中，我只想在`hide`方法打开后添加视图 - 这意味着现在不显示任何窗口。

我如何从任何界面检查该状态是什么，`MBProgressHUD`并且只有在状态 X 之后才能执行某些操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:28:54.830

如果你看到`MBProgresshud`then 的实现，你会发现当他们隐藏它时，他们将其设置为`alpha`0，而当他们显示它时，他们将其设置为 alpha 1。

所以你可以使用这个属性来检查它是隐藏还是显示。IE

```
if(progrssHUD.alpha == 0){
  //perform hide operation
}else{
  //Perform show operation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:45:25.777

```
-(IBAction)SHOW{
    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];
     HUD.delegate = self;
    [HUD show:YES];
    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:@selector(showHUD) onTarget:self withObject:nil animated:YES];
      }

- (void)hudWasHidden:(MBProgressHUD *)hud {
    // Remove HUD from screen when the HUD was hidded
    [HUD removeFromSuperview];
    [HUD release];
    HUD = nil;
} 
```

THE METHOD showWhileExecuting CALLING HUD 处于活动状态，而 DELEGATE METHOD 将出现。

# c# - 如何在 Windows 8 上的 web 视图中捕获导航事件？

> ID：12671047
> 
> 赞同：5
> 
> 时间：2012-10-01T09:55:22.843
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我的应用程序中有一个 Webview，我想拦截任何点击并在 IE 中打开链接，而不是在应用程序的 Webview 中打开链接。

我只能看到 NavigationFailed 和 LoadingComplete 事件，没有关于我可以拦截的“即将导航”事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T09:55:22.843

似乎没有任何方法可以捕获任何导航事件。但是，您可以使用 window.external.notify() 拦截在 JavaScript 中调用的脚本事件

假设页面是您自己托管的，您可以替换

```
<a href="http://www.lightwoodgames.com">LINK</a> 
```

和

```
<a href="javascript:window.external.notify('http://www.lightwoodgames.com')">LINK</a> 
```

然后在您的项目中，您将要添加

```
webview.ScriptNotify += webview_ScriptNotify;
webview.AllowedScriptNotifyUris = WebView.AnyScriptNotifyUri;

protected async void webview_ScriptNotify(object sender, NotifyEventArgs e)
{
  await Windows.System.Launcher.LaunchUriAsync(new Uri(e.Value));
} 
```

# regex - Yii 中的 htaccess 重定向

> ID：12671050
> 
> 赞同：1
> 
> 时间：2012-10-01T09:55:26.413
> 
> 标签：regex, .htaccess, redirect, yii, http-status-code-404

我正在使用 Yii 框架，但我遇到了重定向问题。我想从谷歌搜索中出现的旧网址重定向到我的主页。但是重定向没有生效，我收到 404 错误。我可以以某种方式指定 .htm 扩展不会出现 404 错误而是重定向到主页吗？

这是我的 htaccess 文件中的重定向：

```
Redirect /file\s_mostra_milano/mostra_marionette-milano.htm http://marionettecolla.org/ 
```

旧网址是这样的：

```
http://www.marionettecolla.org/file%20_mostra_milano/mostra_marionette-milano.htm 
```

我想将它重定向到主页：

```
http://www.marionettecolla.org/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:34:13.563

试试这个 ：

```
Redirect /file%20_mostra_milano/mostra_marionette-milano.htm http://www.marionettecolla.org/ 
```

如果你想使用正则表达式试试这个：

```
RedirectMatch /file[ ]_mostra_milano/mostra_marionette-milano\.htm$ http://www.marionettecolla.org/ 
```

最后但同样重要的是，这里有一个在线[.htaccess 生成器](http://www.htaccessredirect.net/index.php)，用于创建或更新您的 .htaccess。

# android - 在 Monodroid 中覆盖 ListView 属性

> ID：12671052
> 
> 赞同：0
> 
> 时间：2012-10-01T09:55:28.637
> 
> 标签：android, listview, xamarin.android, extend

我目前正在 Monodroid 中编程，但我遇到了 Listview 扩展的问题。

我目前的 ListView 扩展如下：

```
public class TTListView : ListView
{
    private Context mContext;
    private bool wrapAdapter;

    public TTListView(Context context) :
        base(context)
    {
        Initialize();
        this.mContext = context;
    }

    public TTListView(Context context, IAttributeSet attrs) :
        base(context, attrs)
    {
        Initialize();
        this.mContext = context;
    }

    public TTListView(Context context, IAttributeSet attrs, int defStyle) :
        base(context, attrs, defStyle)
    {
        Initialize();
        this.mContext = context;
    }

    private void Initialize()
    {
        this.CacheColorHint = Color.Transparent;
        //Still some more stuff to be added here
    }

    public void InsertItemAt(int index)
    {
        Animation anim = AnimationUtils.LoadAnimation(
                 mContext, Resource.Animator.slide_top_down);
        anim.Duration = 500;
        this.GetChildAt(index).StartAnimation(anim);
    }

    public void SetDelegate(TTListDelegate _delegate)
    {
        this.OnItemClickListener = (IOnItemClickListener)_delegate;
        this.OnItemLongClickListener = (IOnItemLongClickListener)_delegate;
    }

    public override void AddFooterView(View v)
    {
        base.AddFooterView(v);
        wrapAdapter = true;
    }

    /*public override IListAdapter Adapter
    {
        get
        {
            return base.Adapter;
        }
        set
        {
            //Check if the passed parameter is a TTListAdapter
            TTListAdapter _ttadapter = value as TTListAdapter;
            if (_ttadapter != null)
            {
                _ttadapter.Wrapped = wrapAdapter;
            }
            base.Adapter = value;
        }
    }*/
} 
```

上面的代码工作得很好。问题是当我尝试覆盖 Adapter 属性（现在已被注释掉）时，尝试创建`TTListView`对象时出现以下异常：

```
"Unable to activate instance of type TimeTellApp.TTListView from native handle 40557188\. No constructor found for TTListView::.ctor(System.IntPtr, Android.Runtime.JniHandleOwner)" 
```

通常这与 GC 销毁托管映射对象有关，所以到目前为止，我通过保留对对象的引用来解决这类问题。的问题`TTListView`是调用构造函数进行初始化时已经出现异常。

我像这样创建一个 TTListView 对象：

```
TTListView setting_listview = new TTListView(this); 
```

（这是一个`Activity`）这里可能是什么问题以及解决它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:46:01.153

错误消息表明您的类中缺少特定的构造函数，您应该实现它：

[`protected ListView (IntPtr javaReference, Android.Runtime.JniHandleOwnership transfer)`](http://docs.mono-android.net/?link=C%3aAndroid.Widget.ListView%28System.IntPtr,Android.Runtime.JniHandleOwnership%29)

# wpf - 为什么在父元素成功的情况下将子元素绑定到另一个元素时绑定失败？

> ID：12671053
> 
> 赞同：3
> 
> 时间：2012-10-01T09:55:29.177
> 
> 标签：wpf, xaml, binding, visual-tree, logical-tree

假设我有两个类可以引用第三个 UI 对象（在本例中为按钮）。

此外，父类可以包含子类的元素。

如果它们都绑定到同一个控件，以同样的方式，*孩子会失败，但父母会成功。*

## 这是 WPF 中的错误吗？

* * *

家长：

```
class MyFrameworkElement : FrameworkElement
{
    // A depenedency property that will contain a child element sub-element
    private static readonly DependencyProperty ChildElementProperty =
                    DependencyProperty.Register("ChildElement",
                    typeof(MyChildElement),
                    typeof(MyFrameworkElement),
                    new PropertyMetadata());

    [Category("ChildProperties")]
    public MyChildElement ChildElement
    {
        set { SetValue(ChildElementProperty, value); }
        get { return (MyChildElement)GetValue(ChildElementProperty); }
    }

    // Now, a reference to some other control, in this case we will bind a button to it!
    public UIElement ButtonReferenceInParent
    {
        get { return (UIElement)GetValue(ButtonReferenceInParentProperty); }
        set { SetValue(ButtonReferenceInParentProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ButtonReferenceInParent.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ButtonReferenceInParentProperty =
        DependencyProperty.Register("ButtonReferenceInParent", typeof(UIElement), typeof(MyFrameworkElement), new UIPropertyMetadata(null)); 
```

* * *

然后是孩子：

```
public class MyChildElement : FrameworkElement
{
    public UIElement ButtonReferenceInChild
    {
        get { return (UIElement)GetValue(ButtonReferenceInChildProperty); }
        set { SetValue(ButtonReferenceInChildProperty, value); }
    }

    public static readonly DependencyProperty ButtonReferenceInChildProperty =
        DependencyProperty.Register("ButtonReferenceInChild", typeof(UIElement), typeof(MyChildElement), new UIPropertyMetadata(null));
} 
```

好的 -

现在说我像这样将它们添加到我的 XAML 中：

```
<Grid>
    <my:MyFrameworkElement x:Name="ParentName" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ButtonReferenceInParent="{Binding ElementName=buttonisme}">
        <my:MyFrameworkElement.ChildElement>
            <my:MyChildElement x:Name="ChildName" ButtonReferenceInChild="{Binding ElementName=buttonisme}"/>
        </my:MyFrameworkElement.ChildElement>
    </my:MyFrameworkElement>

    <Button x:Name="buttonisme" Click="buttonisme_Click" />
</Grid> 
```

当我使用完全相同的表示法时，为什么绑定在父级上有效，但在子级上失败？

* * *

这是我的测试代码...

```
 Console.WriteLine("Parent button reference is {0}", ParentName.ButtonReferenceInParent);

        if (ChildName.ButtonReferenceInChild == null)
        {
            Console.WriteLine("Child button reference is null!");
        } 
        else
        {
            Console.WriteLine("Child button is {0}", ChildName.ButtonReferenceInChild);
        } 
```

这是测试结果...

> 父按钮引用是 System.Windows.Controls.Button
> 
> 子按钮引用为空！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T07:42:11.190

对一个长问题的简短回答是，Microsoft 不希望您从 FrameworkElement 派生而无需做一些调查。

只是进行推导，会破坏按元素名称进行绑定时使用的逻辑树。

您可能还必须充实可视化树，并重载框架元素的排列/测量部分。（我们在这里不这样做，因为我们在示例中不可见。）

在这种特定情况下，我们需要将对象的任何子元素添加到逻辑树或破坏绑定子元素的能力。

[解决这个问题的人的一个很好的例子是here](https://web.archive.org/web/20130307042118/https://programmingwithpassion.wordpress.com/2012/07/03/custom-framework-elements/)

[有关覆盖逻辑树的信息在这里](http://msdn.microsoft.com/en-us/library/ms742244.aspx)

无论如何，修复这个简单示例所需的代码仅依赖于逻辑树（因为子对象并不是真正的可视化。）

添加此函数并更改依赖属性使绑定工作。

```
 private static readonly DependencyProperty ChildElementProperty =
                    DependencyProperty.Register("ChildElement",
                    typeof(MyChildElement),
                    typeof(MyFrameworkElement),
                    new PropertyMetadata(OnChildElementChanged));

    private static void OnChildElementChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        MyFrameworkElement control = d as MyFrameworkElement;

        if (e.OldValue != null)
        {
            control.RemoveLogicalChild(e.OldValue);
        }

        control.AddLogicalChild(e.NewValue);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T10:21:52.940

首先，当您像这样设置 xaml 时：

```
<my:MyFrameworkElement x:Name="ParentName" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ButtonReferenceInParent="{Binding ElementName=buttonisme}"/>
<my:MyChildElement x:Name="ChildName" ButtonReferenceInChild="{Binding ElementName=buttonisme}"/> 
```

有用。我这样做是因为我怀疑一个可视化树向上遍历搜索您在绑定中使用的元素名称。

我仍在弄清楚如何在您的嵌套场景中成功绑定。但也许这会给你一些提示......

# python - 泛型方法中的动态方法名称感知

> ID：12671057
> 
> 赞同：0
> 
> 时间：2012-10-01T09:55:46.460
> 
> 标签：python, dynamic

我想在 python 中创建一个对象，其中对它下的任何方法的调用将被路由到单个方法实现。此外，这个单一方法中的代码应该使用调用处理的方法的名称或其返回值。

例如，调用其下的任何方法名称的对象将打印方法名称。

```
>>> the_object.a_made_up_method()
You have called method "a_made_up_method" 
```

（顺便说一句，如果[`Mock`](http://www.voidspace.org.uk/python/mock/index.html)可以帮助，我全力以赴）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:14:30.113

也许像

```
class My():
    def __getattr__(self, name):
        def method():
            print 'You have called method "{}"'.format(name)
        return method

>>> a = My()

>>> a.a_made_up_method()
You have called method "a_made_up_method" 
```

这是另一个，似乎与`*args`and一起使用`**kwargs`：

```
class My():
    def __getattr__(self, name):
        return self.method(name)
    def method(self, name):
        def dostuff(*args, **kwargs):
            print "I'm called as {}!".format(name)
            print args, kwargs
        return dostuff 
```

# grails - Grails：从 g.render 获取 DOM 字符串？

> ID：12671065
> 
> 赞同：1
> 
> 时间：2012-10-01T09:56:19.777
> 
> 标签：grails

我需要获取模板的 DOM 字符串。但是，在加载模板后，会在模板中添加一个 highCharts 图表。当我使用 g.render 时，我没有得到结果字符串中的图表。基本上，javascript 不运行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:16:31.267

如果某种 javascript 必须在客户端上运行，那么在服务器执行其他操作之前，您必须使用 ajax 从客户端进行回调。有关代码示例，请参阅[grails ajax 文档](http://grails.org/doc/latest/guide/theWebLayer.html#ajax)。

# regex - Perl 正则表达式 - 我可以说'如果字符/字符串匹配，删除它并删除它'？

> ID：12671067
> 
> 赞同：2
> 
> 时间：2012-10-01T09:56:20.743
> 
> 标签：regex, perl, replace

我有一个字符串数组，其中一些包含字符'-'。我希望能够搜索它，对于那些包含它的字符串，我希望删除它右侧的所有字符。

例如，如果我有：

```
$string1 = 'home - London';
$string2 = 'office';
$string3 = 'friend-Manchester'; 
```

或类似的东西，那么受影响的字符串将变为：

```
$string1 = 'home';
$string3 = 'friend'; 
```

我不知道'-'之前的空格是否会在之后包含在字符串中（我不想要它，因为我稍后会比较字符串，尽管如果它不影响字符串比较，那么没关系）。

我知道我可以使用以下内容搜索和替换特定的字符串/字符：

```
$string1 =~ s/-//
or 
$string1 =~ tr/-// 
```

但我对 Perl 中的正则表达式不是很熟悉，所以我不是 100% 确定这些。我环顾四周，`'to the right of'`在正则表达式中看不到任何关系。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:01:19.433

`-`您可以使用此替换删除连字符后的任何内容：

```
s/-.*$//s 
```

但是，您将希望删除连字符之前的空格，因此

```
s/\s* - .* $//xs 
```

将`$`正则表达式锚定在字符串的末尾，`/s`标志也允许点匹配换行符。虽然`$`是多余的，但它可能会增加清晰度。

您的替换只会删除第一个`-`，而您的音译会删除字符串中的所有连字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:04:48.243

您的正则表达式只是在搜索破折号，所以这就是它们所替换的全部。你想搜索破折号，以及它后面的任何东西。

```
$string =~ s/-.*//; 
```

. 表示任意字符，* 表示对该字符搜索 0 次或多次，并尽可能多地匹配（即尽可能匹配到字符串末尾）

您还可以在其前面搜索可选空格。

```
$string =~ s/\s?-.*//; 
```

（\s 是一种更清晰的指定空格字符的方法）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T11:15:50.900

使用plain `substr()`and`index()`也是可能的。

```
my @strings = ("we are - so cool",
               "lonely",
               "friend-Manchester",
               "home - london",
               "home-new york",
               "home with-childeren-first episode");
local $/ = " ";
foreach (@strings) {
  $_ = substr($_,0,index($_,'-')) if (index($_,'-') != -1);
  chomp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:25:56.710

`#Using Regex:`

```
my @strings = 
("we are - so cool",
"lonely",
"friend - Manchester",
"home - london",
"home - new york",
"home with-childeren-first episode"
);

foreach (@strings) {
$_ =~ s/-\s*[a-zA-Z ]+\s*//g;
print "NEW: ".$_."\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:36:55.227

其他答案都很好。但是，根据您所说的：

> ...如果它不影响字符串比较，那么没关系

您根本不需要单独的步骤。假设您想`$string`与另一个变量比较`$search_string`。以下表达式将检查是否完全匹配，除了它忽略`$string`破折号后的任何内容：

```
if ($string =~ /^$search_string(\s*-|$)/) { print "Strings matched"; } 
```

# jquery - jQuery UI 可排序动态包含问题

> ID：12671069
> 
> 赞同：1
> 
> 时间：2012-10-01T09:56:25.667
> 
> 标签：jquery, css, jquery-ui

我正在使用可排序的 jQuery UI 构建约会调度程序，其中约会是可拖动、可拖放和可排序的，这几乎是完整的，除了一个我无法理解可排序选项“包含”的问题。

为了尝试给出一个简短的概述，为了创建我想要的行为，我使用两个组合的可排序对象创建了调度程序，一个充当“画布” - 一个我们可以拖动约会的区域和一个可排序的区域，以便我们可以将约会拖动到块中画布内的其他约会。我想结合可拖动和可排序，但这个选项并没有给我非常理想的行为。

现在，调度程序的一部分是能够创建一个新行（天），从而扩展画布区域，这（查看）与我添加的额外逻辑工作正常，新行出现等但包含大小（设置为画布区域）不会“即时”更新，因此画布上有一个区域（底部 - 新一天的大小）我无法拖动。只有当我将约会放到新行上时，包含区域才会更新为新的高度，然后我可以将约会拖到底部区域。

我的问题是，这种默认的可分类收容行为是不是——收容区域大小将/只能在停止/更新时更新，或者有没有办法在拖动时强制更新收容大小。

我已经广泛搜索了这个问题的答案，但找不到关于这个特定主题的任何内容，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:51:00.677

抱歉，我没有解决方案（但是，我在寻找解决方案时发现了您的帖子）...

但是，我确实找到了这个，[http://bugs.jqueryui.com/ticket/4781](http://bugs.jqueryui.com/ticket/4781)

看起来这是一个已知的错误，他们表示不会为其他版本修复它。他们在那里指出了一个补丁，但我还没有尝试过。祝你好运！

编辑：我确实在测试环境中应用了这个补丁，它看起来很有效；在我的特殊情况下，结果证明父母实际上并没有改变大小，所以它对我没有帮助 - 虽然我想我会报告。

# c - 在 ubuntu 11.04 上使用 gcc 4.5.2 声明函数指针时出错

> ID：12671072
> 
> 赞同：0
> 
> 时间：2012-10-01T09:56:28.847
> 
> 标签：c, gcc

```
int (*foo)(epoll_event e, void *data); 
```

如果我用 cc 扩展名命名文件，这将被接受。使用 .c 扩展名

```
error: expected ‘)’ before ‘e’ 
```

我已经用谷歌搜索了，声明似乎对 C 有效。任何人都可以提供有关如何解决此问题的意见吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T10:00:34.337

我猜`epoll_event`不是类型名称，而是结构标签名称。

在这种情况下，您需要添加`struct`：

```
 int (*foo)(struct epoll_event e, void *data); 
```

此[页面](http://linux.die.net/man/2/epoll_ctl)建议：

```
struct epoll_event {
    uint32_t     events;      /* Epoll events */
    epoll_data_t data;        /* User data variable */
}; 
```

# java - 手动创建Resultset / CachedRowSet

> ID：12671074
> 
> 赞同：1
> 
> 时间：2012-10-01T09:56:35.603
> 
> 标签：java

我正在开发一个应用程序，我的应用程序将从其他来源以分隔格式（原始数据）获取数据，然后我需要将原始数据转换为结果集或缓存行集，然后我会将构造的结果集/缓存行集传递给客户端应用程序（它调用我的应用程序来获取数据）。

我之前开发了一个`.Net`应用程序，可以通过使用`DataTable`（无连接构造的数据）来实现这一点。

但是，我不知道如何在 Java 中实现这一点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:10:51.413

我将创建一个`Model(POJO) class`，我将填充数据从`resultset`到`model class object`。将其转换为 json 或 xml。并将其作为响应发送给客户端应用程序。

Java 对象到 xml 的转换请参阅：[使用开源 API 将 Java 对象转换为 xml 的最佳方法是什么](https://stackoverflow.com/questions/736343/what-is-the-best-way-to-convert-a-java-object-to-xml-with-open-source-apis)

Java 对象到 json 转换：按照教程[在这里](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)。

# javascript - 在谷歌地图javascript上计算绘制多边形的面积

> ID：12671077
> 
> 赞同：2
> 
> 时间：2012-10-01T09:56:43.387
> 
> 标签：javascript, google-maps

嗨，我必须计算谷歌地图上绘制的多边形的面积。jsfiddle [http://jsfiddle.net/tvqzd/4/](http://jsfiddle.net/tvqzd/4/)

我计算它使用

```
var area = google.maps.geometry.spherical.computeArea(newShape.getPath()); 
```

但我希望它在按钮点击时计算

和多边形是可编辑的。如果我更改/编辑区域怎么办？我可以在 areachange 事件或其他内容中获得该区域吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T01:41:57.230

您需要侦听多边形路径上的 set_at 和 insert_at 事件，并在其中一个触发时重新计算面积。

[文档中用户可编辑形状事件的描述](https://developers.google.com/maps/documentation/javascript/overlays#user_editable_shapes_events)

示例：http: [//jsfiddle.net/geocodezip/hk82v0zp/2/](http://jsfiddle.net/geocodezip/hk82v0zp/2/)

**代码片段：**

```
var drawingManager;
var selectedShape;
var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
var selectedColor;
var colorButtons = {};

function clearSelection() {
  if (selectedShape) {
    selectedShape.setEditable(false);
    selectedShape = null;
  }
}

function setSelection(shape) {
  clearSelection();
  selectedShape = shape;
  shape.setEditable(true);
  selectColor(shape.get('fillColor') || shape.get('strokeColor'));
  google.maps.event.addListener(shape.getPath(), 'set_at', calcar);
  google.maps.event.addListener(shape.getPath(), 'insert_at', calcar);
}

function calcar() {
    var area = google.maps.geometry.spherical.computeArea(selectedShape.getPath());
    document.getElementById("area").innerHTML = "Area =" + area.toFixed(2);
}

function deleteSelectedShape() {
  if (selectedShape) {
    selectedShape.setMap(null);
  }
}

function selectColor(color) {
  selectedColor = color;
  for (var i = 0; i < colors.length; ++i) {
    var currColor = colors[i];
    colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
  }

  // Retrieves the current options from the drawing manager and replaces the
  // stroke or fill color as appropriate.
  var polylineOptions = drawingManager.get('polylineOptions');
  polylineOptions.strokeColor = color;
  drawingManager.set('polylineOptions', polylineOptions);

  var rectangleOptions = drawingManager.get('rectangleOptions');
  rectangleOptions.fillColor = color;
  drawingManager.set('rectangleOptions', rectangleOptions);

  var circleOptions = drawingManager.get('circleOptions');
  circleOptions.fillColor = color;
  drawingManager.set('circleOptions', circleOptions);

  var polygonOptions = drawingManager.get('polygonOptions');
  polygonOptions.fillColor = color;
  drawingManager.set('polygonOptions', polygonOptions);
}

function setSelectedShapeColor(color) {
  if (selectedShape) {
    if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
      selectedShape.set('strokeColor', color);
    } else {
      selectedShape.set('fillColor', color);
    }
  }
}

function makeColorButton(color) {
  var button = document.createElement('span');
  button.className = 'color-button';
  button.style.backgroundColor = color;
  google.maps.event.addDomListener(button, 'click', function() {
    selectColor(color);
    setSelectedShapeColor(color);
  });

  return button;
}

function buildColorPalette() {
  var colorPalette = document.getElementById('color-palette');
  for (var i = 0; i < colors.length; ++i) {
    var currColor = colors[i];
    var colorButton = makeColorButton(currColor);
    colorPalette.appendChild(colorButton);
    colorButtons[currColor] = colorButton;
  }
  selectColor(colors[0]);
}

function initialize() {
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: new google.maps.LatLng(22.344, 114.048),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    zoomControl: true
  });

  var polyOptions = {
    strokeWeight: 0,
    fillOpacity: 0.45,
    editable: true
  };
  // Creates a drawing manager attached to the map that allows the user to draw
  // markers, lines, and shapes.
  drawingManager = new google.maps.drawing.DrawingManager({
    drawingMode: google.maps.drawing.OverlayType.POLYGON,
    markerOptions: {
      draggable: true
    },
    polylineOptions: {
      editable: true
    },
    rectangleOptions: polyOptions,
    circleOptions: polyOptions,
    polygonOptions: polyOptions,
    map: map
  });

  google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
    if (e.type != google.maps.drawing.OverlayType.MARKER) {
      // Switch back to non-drawing mode after drawing a shape.
      drawingManager.setDrawingMode(null);

      // Add an event listener that selects the newly-drawn shape when the user
      // mouses down on it.
      var newShape = e.overlay;
      newShape.type = e.type;
      google.maps.event.addListener(newShape, 'click', function() {
        setSelection(newShape);
      });
      var area = google.maps.geometry.spherical.computeArea(newShape.getPath());
      document.getElementById("area").innerHTML = "Area =" + area.toFixed(2);
      setSelection(newShape);
    }
  });

  // Clear the current selection when the drawing mode is changed, or when the
  // map is clicked.
  google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
  google.maps.event.addListener(map, 'click', clearSelection);
  google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);

  buildColorPalette();
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map,
html,
body {
  padding: 0;
  margin: 0;
  height: 100%;
}

#panel {
  width: 200px;
  font-family: Arial, sans-serif;
  font-size: 13px;
  float: right;
  margin: 10px;
}

#color-palette {
  clear: both;
}

.color-button {
  width: 14px;
  height: 14px;
  font-size: 0;
  margin: 2px;
  float: left;
  cursor: pointer;
}

#delete-button {
  margin-top: 5px;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry,drawing&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<title>Drawing Tools</title>
<div id="panel">
  <div id="color-palette"></div>
  <div>
    <button id="delete-button">Delete Selected Shape</button>
    <button id="calculate" onClick="calcar()">calculate area</button>
    <div id="area"></div>
  </div>
</div>
<div id="map"></div>
```

# android - 如何在旧版本上测试我的 android 应用程序？

> ID：12671080
> 
> 赞同：1
> 
> 时间：2012-10-01T09:56:55.383
> 
> 标签：android, android-4.0-ice-cream-sandwich, target

我已经使用 targetSDK 15 和 minSDK 3 构建了一个 android 应用程序。我现在如何在旧版本上测试它？当我设置运行配置时，即使我为旧版本创建了 AVD，我也只能看到我的“android 4.0”AVD。

有什么方法可以测试我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:06:17.110

如果您想测试您的应用程序的各种版本。跟着这些步骤

*   创建您要测试的所有版本的 Android 虚拟机（avd）
*   在您通过选择 android 目标创建的所有版本的 avds 中运行您的应用程序

右键**项目**->**属性**-> **Android** -> 设置**目标**

享受测试..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:59:12.270

使用旧版本的模拟器。

项目属性中的 android 级别是构建应用程序的级别。但是在 Manifest 中，您可以指定 minSDKVersion - 这是您的应用程序将在 Play 商店中可用的最小版本。
但是使用 adb 将其安装在与您当前设置不兼容的设备或模拟器上是没有问题的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T09:59:17.143

首先从运行任何您喜欢的 AVD 启动 AVD Manager `Window -> AVD Manager.`，然后运行该应用程序。

# jquery - 我如何将文本从 div 传递到 Noty jQuery 插件

> ID：12671081
> 
> 赞同：0
> 
> 时间：2012-10-01T09:56:56.267
> 
> 标签：jquery

我真的很喜欢[Noty 插件](http://needim.github.com/noty/)，但我不明白如何将一些文本传递给它。

我有以下 Flash 消息标记：

```
<div class="flash-messages">
   <div class="flash-message notice">Signed out successfully.</div>
</div> 
```

要使用 noty，我可以简单地调用：

```
var noty = noty({text: 'noty - a jquery notification library!'}); 
```

但是我怎么能将文本从 .flash-message 传递到 noty 的文本选项？我还希望 .notice .error 类来操作通知样式。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:04:20.963

```
var noty = noty({text: $(".flash-message.notice").text()}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T10:05:12.173

要从中获取文本，`div`您只需执行以下操作：

```
var noticeText = $(".notice").text(); 
```

然后您可以将其插入到`noty`呼叫中：

```
var noty = noty({text: noticeText}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:04:27.780

对于课程`.flash-message`，您可以这样做：

```
var $flashMessage = $('.flash-message'),
    class = $('.flash-message').attr('class').replace('flash-message ', ''),
    noty = noty({text: $flashMessage.text(), type: class}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T10:26:55.653

```
var myFlashMessages = [];
$(".flash-messages > .flash-message.notice").each(function(){
    myFlashMessages[myFlashMessages.length] = $(this).text();
}); 
```

上面的代码将您要查找的所有内部文本存储在一个数组中。

# ruby-on-rails-3 - 模型不同列上的多个不同 aasm 实现

> ID：12671082
> 
> 赞同：1
> 
> 时间：2012-10-01T09:57:04.057
> 
> 标签：ruby-on-rails-3

我有一个模型如下

```
class Inspection < ActiveRecord::Base
  include AASM

  aasm_column :status  #aasm in 'status' field
  aasm_initial_state :new
  aasm_state :new
  aasm_state :inprocess
  aasm_state :complete
  aasm_state :approved

  aasm_event :inprocess do
    transitions :to => :inprocess, :from => :new
  end

  aasm_event :complete do
    transitions :to => :complete, :from => :inprocess
  end

  aasm_event :approve do
    transitions :to => :approved, :from => :complete
  end

  aasm_column :sharing_status  #aasm in 'sharing_status' field
  aasm_initial_state :not_shared
  aasm_state :not_shared
  aasm_state :shared
  aasm_state :revoked

  aasm_event :share do
    transitions :to => :shared, :from => :not_shared
  end

  aasm_event :revoke do
    transitions :to => :revoked, :from => :shared
  end

  .....
end 
```

我想在**Inspection的两个不同模型****字段**上实现不同的 aasm 状态和转换。第一个转换在上面的代码中不起作用（如果存在第二个状态和转换）。如何解决？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T12:29:29.317

我有同样的问题，似乎 AASM 不支持在同一模型上拥有多个状态模型，但是插件“state_machine”确实支持这一点。

[https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)**

# asp.net - ~ 母版页 URL 中的字符

> ID：12671088
> 
> 赞同：1
> 
> 时间：2012-10-01T09:57:20.113
> 
> 标签：asp.net, master-pages, character

我正在`ASP.NET`使用`masterpage`.

默认情况下，`master page`在所有页面的顶部都将其称为

```
masterpagefile="~/mymasterpage.Master". 
```

`IIS 6.0`我的应用程序在or下的测试环境中完美运行`7.0`

当我将它发布到服务器时（在`IIS 6.0`- 我不知道服务器配置的情况下）它给我一个母版页 URL 错误。

当我从所有页面中删除“~/”时，它可以正常工作，但我想知道原因以及如何更改配置以使其即使使用以下 URL 也能正常工作：`"~/mymasterpage.Master"`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:20:16.010

我发现了问题；实际上“~/”指的是应用程序根目录，我的应用程序位于虚拟目录而不是应用程序中。我刚刚将虚拟目录转换为应用程序，它工作正常！

# java - libGDX 中的 java 线程

> ID：12671089
> 
> 赞同：5
> 
> 时间：2012-10-01T09:57:25.583
> 
> 标签：java, multithreading, libgdx

我正在使用 libGDX 制作游戏，我真的很想线程化游戏，所以我在单独的线程上运行一个绘画循环和一个逻辑循环，就像你用绘画组件循环和可运行的运行循环制作一个简单的 java swing 游戏一样.

我对 c 中的线程有经验，但在 java 中没有那么多经验。

我能够创建线程的唯一方法是创建一个扩展线程的类，然后在其中创建运行循环。

但是制作运行循环的目的是允许每个屏幕自由计算逻辑，所以我最终需要某种具有自定义线程类实现的抽象屏幕类。

我在问是否有一种更简单或更标准的方式来实现这种情况下的线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T15:52:54.383

libGDX 库已经为 OpenGL 上下文更新运行了一个单独的渲染线程。请参阅[http://code.google.com/p/libgdx/wiki/TheArchitecture#The_Graphics_Module](http://code.google.com/p/libgdx/wiki/TheArchitecture#The_Graphics_Module)

> 我们已经了解到 UI 线程不是连续执行的，而是仅在需要调度事件时由操作系统安排运行（大致：p）。这就是我们实例化第二个线程的原因，我们通常将其称为渲染线程。此线程由图形模块创建，该模块本身在启动时由应用程序实例化。

每次屏幕刷新时，此渲染线程都会调用主游戏对象上的`ApplicationListener.render()`方法一次（因此它应该约为 60hz），因此只需将渲染循环的主体放入此方法的实现中即可。

您可以在您的方法中创建一个额外的后台线程（例如，用于游戏逻辑）（请务必在`create`方法中对其进行清理）。除了线程之外，我认为任何预先存在的线程都不适合游戏逻辑。`ApplicationListener``dispose``render`

对于线程之间的通信，您可以使用任何现有的 Java 同步方法。我使用 Java`ArrayBlockingQueue<>`将请求发送到后台线程。而且我曾经[`Gdx.app.postRunnable()`](http://code.google.com/p/libgdx/wiki/ApplicationThreading)让我的后台线程将数据推送到渲染线程（这样的 Runnables 在下一帧上运行，在`render()`被调用之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:23:04.257

不知道你的意思，但屏幕上的绘图（反映对显示的更改）是由一个专用的单线程完成的（例如，参见 Swing 框架），这是标准的。这是因为很难让多个线程在屏幕上绘制而不搞砸——只有少数实现这样做。因此，如果您打算自己实现 GUI 框架，建议使用单线程绘图方法。

至于您的业务逻辑，它取决于很多事情。一个非常简单的方法确实可以为每个活动生成一个新线程。然后这些线程可以将结果发布到所述 GUI 线程。这种方法的问题在于，如果同时执行许多活动，您的效率可能会显着下降，因为在 Java 中，每个线程都映射到本机操作系统线程。您可以使用线程池来避免这种情况。Java 标准库提供线程池，`ThreadPoolExecutor`或者如果您想要更高的抽象，`ExecutorService`.

# c# - 如何在枚举中创建逻辑

> ID：12671095
> 
> 赞同：0
> 
> 时间：2012-10-01T09:57:39.867
> 
> 标签：c#, enums

在 C# 中，我知道我们不能将对象分配给枚举。我所追求的功能是在声明 Enum 时，它会触发一个事件。

所以而不是拥有

```
enum MyEnum
{
  string, int, etc
} 
```

我本可以有

```
enum MyEnum
{
    classType1, classType2
} 
```

然后，这也将允许调用类 classType1/classType2 构造函数，这可能（例如）对声明枚举时的日志记录很有用。

提出我的问题的另一种方式可能是

```
enum MyEnum
{
   string1
      {
          //logic
      },
   string2
      {
          //logic
      }
} 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:03:09.833

您可以使用`properties`代替`enum`（然后您可以编写自己的逻辑，在分配变量之后/之前调用）。该`enum`结构应该用于创建类似标志的东西。

```
private string _myVar;
public string MyVar
{
   get { return _myVar; }
   set
   {
      // logic 1 here
      _myVar = value;
      // logic 2 here
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:06:24.187

枚举是基于类型的值`Int##`类型。所以这和问是一样的：我能在分配的过程中得到一些逻辑吗？`int i = 7;`直接的答案是否定的。

你也不能`enum`基于整数类型以外的任何东西。

但是您的要求似乎是跟踪实例。使用属性很容易。但是您只能针对特定属性执行此操作，而不能将其构建到类型中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:05:22.237

我认为，您的期望与语言不符，因此无法解决。例如考虑会发生什么：

```
if (myEnumValue == MyEnum.classType1) 
```

您的问题意味着在右侧将为相等测试实例化一个“classType1”类，然后结果将取决于该类型的相等实现。当左侧的项目是枚举时，这会令人困惑……但是根据您的假设，它是“classType1”类型的对象，这意味着左侧和右侧都是临时对象。

你可以看到这是行不通的。

但是......我认为你真正追求的是一个从枚举创建对象的工厂。引发其他问题的整个其他问题（对不起）。像这样的枚举意味着一个状态......所以如果你有一个状态，为什么那个状态需要一个枚举？本身就是一个大问题，请查看状态模式。

希望我有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T10:10:19.990

枚举几乎不是带有综合标签的整数。据我所知，您要查找的内容无法使用枚举完成。

但是，正如@Grumbler85 所述，可以使用工厂模拟这种行为。工厂是一种特殊类型的对象，用于创建其他对象的实例。

实现工厂的最简单方法是使用 switch 语句，但也存在其他方法（例如反射）。这是您要查找的内容的简单示例：

```
Class A
{
   ...
}

Class B
{
   ... 
}

enum eKnownTypes
{
     A,
     B
}

Class Factory
{
    /* 
         Implement Singleton here
         ....
    */
    public object CreateInstance(eKnownTypes t)
    {
         /*
               Raise any event needed here
               ...
         */
         switch (t):
         {
              case eKnownTypes.A: return new A(); break;
              case eKnownTypes.B: return new B(); break;
         }          
         return null;
    }

}

/* 
         Set Event Handlers here
         Factory.Instance.CustomEvent += new EventHandler ... 
         ....
*/
A objectA = Factory.Instance.CreateInstance(eKnownTypes.A) as A;
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T10:02:08.330

除了`enum`你可以使用`static class`带有静态属性的 a 之外，它可以和 an 一样使用，`enum`但你可以在 getter 和 setter 中编写代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T10:13:02.463

你可以用枚举来做，但你可以做

```
public struct MyType
{
    public const int OneValue = 1;
    public const int TwoValue = 2;

    private static readonly MyType one = new MyType(OneValue);
    private static readonly MyType two = new MyType(TwoValue); 

    private readonly value int;

    private MyType(int value)
    {
        this.value = value;
    }

    public static One
    {
        get { return this.one; }
    }

    public static Two
    {
        get { return this.two; }
    }

    public static implicit operator int(MyType source)
    {
        return source.value;
    }
} 
```

为您提供一个行为类似于枚举但完全可扩展的类。

例如，你可以做

```
var myType = MyType.One;

switch (myType)
{
   case MyType.OneValue:
       ...

   case MyType.TwoValue:
       ...

   default:
       ...
} 
```

这些实例是不可变的，并且可以使用从 继承的实现`object`（即参考质量）准确地测试其是否相等。

# django - 需要 Django 项目的 Whoosh 逐步设置过程

> ID：12671096
> 
> 赞同：0
> 
> 时间：2012-10-01T09:57:45.617
> 
> 标签：django, search, whoosh

我找到了可以与 Django 集成的 Whoosh 搜索引擎应用程序，但我认为它真的让我很困惑。

是否有任何博客或页面通过一个示例进行解释，例如 Django 如何从 poll 应用程序开始。

我不需要 haystack，因为我不在 UI 级别使用搜索。

如果有人提供此信息，那么它将更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:00:14.873

Whoosh的[文档有什么问题？](http://packages.python.org/Whoosh/)

# android - 从另一个活动中获取布局/视图

> ID：12671098
> 
> 赞同：0
> 
> 时间：2012-10-01T09:57:51.930
> 
> 标签：android

我正在创建一个 android 应用程序，我想在其中访问其他应用程序的视图/布局。我知道我需要访问的应用程序的包名称和活动名称。

假设我需要访问的应用程序是“Hello World”——包是“com.hello”，活动是“com.hello.HelloWorldActivity”。现在基于这些信息，我需要在 HelloWorldActivity 中找到布局和视图。

有没有办法做到这一点。有人可以帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:06:29.387

您可能会看到 Android 测试项目 (JUnit) 可以访问**相同的签名应用程序**。例如， [Robotium](http://code.google.com/p/robotium/)可以访问不同活动的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:02:49.343

我认为它应该工作。

```
View view = View.inflate(this, package_name.R.layout.layout_id, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:03:02.877

不，这是不可能的。您在运行时唯一可以访问的是 SharedPreferences 并且只有在其他应用程序的开发人员希望您访问的情况下才能访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:05:11.667

我认为我们无法从一个 APP 访问另一个 APP 的布局。

# perl - Perl AnyEvent::HTTP 请求使用代理失败

> ID：12671099
> 
> 赞同：1
> 
> 时间：2012-10-01T09:57:52.177
> 
> 标签：perl, http, asynchronous, proxy, anyevent

我尝试使用 perl 模块 AnyEvent::HTTP 通过以下帖子发出异步 HTTP 请求：http: [//www.windley.com/archives/2012/03/asynchronous_http_requests_in_perl_using_anyevent.shtml](http://www.windley.com/archives/2012/03/asynchronous_http_requests_in_perl_using_anyevent.shtml)

但是，我无法让它通过代理工作......

```
 my $request;
    my $host = '<userid>:<pswd>@<proxyip>';
    my $port = '<proxyport>';
    my $headers = { ...                        
                    'Accept-Language'=> 'en-us,en;q=0.5',
                    'Accept-Charset'=> 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
                    'Keep-Alive' => 300,
                    };

    $request = http_request(
      GET => $url,
      timeout => 120, # seconds
      headers => $headers,
      proxy => [$host, $port],
      mymethod
   );

$cv->end;
$cv->recv; 
```

我收到上述代码的以下错误（在用代理的身份验证详细信息替换后）

```
 { 
      'Reason' => 'No such device or address',
      'URL' => 'www.google.com',
      'Status' => 595
    }; 
```

如果没有请求的代理参数，它就可以工作。从 CPAN 页面[http://metacpan.org/pod/AnyEvent::HTTP](http://metacpan.org/pod/AnyEvent%3a%3aHTTP)，

595 - 连接建立、代理握手期间出错

请帮助我确定此代码的问题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:47:56.483

你不能把你的用户名和密码放在 $host 本身。您需要先手动将它们编码为 base64，然后将生成的字符串添加到 Proxy-Authorization 标头中。

```
$ echo -n user:pass | openssl enc -a
dXNlcjpwYXNz 
```

然后将此行添加到您的标题中：

```
my $request;
my $host = '<proxyip>'; #EDITED 
my $port = '<proxyport>';
my $headers = { ...                        
                'Accept-Language'=> 'en-us,en;q=0.5',
                'Accept-Charset'=> 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
                'Keep-Alive' => 300,
                'Proxy-Authorization'=>'Basic dXNlcjpwYXNz' #EDITED
                };

$request = http_request(
  GET => $url,
  timeout => 120, # seconds
  headers => $headers,
  proxy => [$host, $port],
  mymethod 
```

它应该工作！

# php - 从 PHP 脚本获取完整输出

> ID：12671100
> 
> 赞同：-1
> 
> 时间：2012-10-01T09:57:53.067
> 
> 标签：php, stdout

我每天晚上都在运行一个脚本，脚本的输出只会发送到一个邮件地址。但问题是我需要在自己的邮箱中接收输出的副本。我在脚本中注册了一个关闭处理程序，并尝试发送一封邮件，其中包含实际显示数据的 ob_get_contents 等函数。但只有我打印到终端的最后一件事。

```
cronMail('Cron', ob_get_contents()); 
```

调用的函数只是一个简单的函数，它添加了默认的接收者和发送者，并调用了 PHP Mail 函数。

邮件中的输出是：

```
array() 
```

虽然终端有以下输出：

```
Starting cron...
Exiting...
array() 
```

谁能告诉我如何接收整个输出？我使用 ob_start 方法启动了输出缓冲区。在每一行之后，我确保调用了一个 ob_flush 方法，因此如果直接调用脚本，输出也将发送到浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:00:11.293

[`ob_flush`](http://php.net/ob_flush)挡住你的路，请参阅手册页上的链接描述，这很清楚：它刷新缓冲区以便输出它。

你不希望出现这种情况。删除对它的调用，你应该没问题。

```
ob_start();

... your script without "ob_flush()" ...

$buffer = ob_get_clean();  # finally get the output buffer as string
echo $buffer;              # pass output along for cron
cronMail('Cron', $buffer); # send your mail 
```

此变体可确保您获得自己的电子邮件，但输出也会传递给 cron。如果您在函数中执行一些错误报告，这可能很有用`cronMail`，因此至少有一些方法可以进一步调试它。

另一种选择是注册一个输出处理函数，该函数在运行时存储输出。但这不那么微不足道，所以我把它排除在外。

# testing - Maven 测试在安装阶段失败，但在测试阶段没问题

> ID：12671101
> 
> 赞同：3
> 
> 时间：2012-10-01T09:57:56.717
> 
> 标签：testing, maven, integration, integration-testing, ebean

我有一个使用 Spring 和 Ebean 的空 java 测试

```
protected static ApplicationContext ctx;
    @BeforeClass
    public static void initSpringContext() {
        ctx = new ClassPathXmlApplicationContext("spring-context.xml");
    }

public class SomeTest extends SpringBase {

    @Test
    public void emptyTest() {}
} 
```

我在加载类时遇到问题：

```
Caused by: javax.persistence.PersistenceException: models.Flat is NOT an Entity Bean registered with this server? 
```

问题已通过 pom 配置修复

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.4</version>
    <configuration>
        <useSystemClassLoader>false</useSystemClassLoader>
    </configuration>
</plugin> 
```

在此修复后，“mvn clean test”运行正常，但“mvn clean install”失败并出现确切异常，我想这是因为集成测试阶段。我尝试在 maven-failsafe-plugin 中配置 useSystemClassLoader，使用参数 -Dskip.integration.test=true 运行，但没有区别，我觉得这个插件根本没有调用。

我还比较了“mvn clean test”和“mvn clean verify”生成的surefire-reports——测试套件中的“properties”部分在这两种情况下都是相同的。

跳过集成测试也是一个可接受的解决方案。

> Maven 2.2.1 OS - 在 Windows 和 Debian 下测试

如果它可以帮助，错误的堆栈跟踪：

```
Caused by: javax.persistence.PersistenceException: models.Flat is NOT an Entity Bean registered with this server?
    at com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(DefaultServer.java:1008)
    at com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(DefaultServer.java:965)
    at com.avaje.ebeaninternal.server.core.DefaultServer.find(DefaultServer.java:1001)
    at com.avaje.ebean.Ebean.find(Ebean.java:1143)
    at flats.crawler.managers.CrawlerManager.initCrawlerHashes(CrawlerManager.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:346)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:299)
    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:132)
    ... 48 more 
```

我运行了两个命令“mvn clean install -X”和“mvn clean test -X”并比较了测试类路径：在第一种情况下

```
[DEBUG]   PATH\MODULE\target\MODULE-1.0.jar 
```

在第二种情况下

```
[DEBUG]   PATH\MODULE\target\classes 
```

这就是 Ebean 找不到课程的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:19:09.390

您是否在故障安全插件文档中看到此[常见问题解答条目？](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/class-loading.html)它为类加载配置提供了一大堆选项。

如果这些建议都不适合您，并且跳过集成测试是可以的（正如您所提到的），那么`-DskipITs=true`应该按照[docs](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#skipITs)进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:46:05.690

对于集成测试，[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)负责，而不是 maven-surefire 插件。所以你忽略集成测试的配置是行不通的。

# f# - 为什么 MergeSort 函数会发生值限制？

> ID：12671112
> 
> 赞同：1
> 
> 时间：2012-10-01T09:58:32.563
> 
> 标签：f#, mergesort, value-restriction

我在 List 上有一个非常简单的[MergeSort](http://en.wikipedia.org/wiki/Merge_sort)实现。

```
/// Divide the list into (almost) equal halves
let rec split = function
    | [] -> [], []
    | [x] -> [x], []
    | x1::x2::xs -> let xs1, xs2 = split xs
                    x1::xs1, x2::xs2

/// Merge two sorted lists
let rec merge xs ys =
    match xs, ys with
    | [], _ -> ys
    | _, [] -> xs
    | x::xs', y::ys' when x <= y -> x::merge xs' ys
    | _, y::ys' -> y::merge xs ys' 

let rec mergeSort = function
    | [] -> []
    | xs -> let xs1, xs2 = split xs
            merge (mergeSort xs1) (mergeSort xs2) 
```

但每当我尝试使用 F# Interactive 中的任何输入进行测试时：

```
let xs = mergeSort [1;4;3;2];; 
```

我遇到了一个值限制错误：

> 错误 FS0030：值限制。值 'xs' 已被推断为具有泛型类型 val xs : '_a list when '_a : compare 将 'xs' 定义为简单的数据项，使其成为具有显式参数的函数，或者，如果您不打算这样做要通用，请添加类型注释。

*为什么会这样？有什么简单的修复方法？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T11:06:29.227

您没有处理 1 元素列表的特殊情况`mergeSort`。一般情况“太笼统”而无法推断出正确的类型。结果，编译器为函数推断出过于通用的类型（'a list -> 'b list），结果始终是通用列表（由于值限制，这是不允许的）。

如果你像这样修复它，类型将被正确推断为 'a list -> 'a list。

```
let rec mergeSort = function
    | [] -> []
    | [x] -> [x]
    | xs -> let xs1, xs2 = split xs
            merge (mergeSort xs1) (mergeSort xs2) 
```

# django - 计算模型字段

> ID：12671113
> 
> 赞同：0
> 
> 时间：2012-10-01T09:58:39.400
> 
> 标签：django

您好我有以下型号

```
class Student(models.Model):
    student_id = models.CharField(max_length=3, unique=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    gender = models.CharField(max_length=1)
    teacher = models.ForeignKey(Teacher)

    def maths_cal_1(self):
        if self.student_model.filter(test__test_name__iexact="maths"):
            return self.student_model.s1- self.student_model.start

class Test(models.Model):
    test_name = models.CharField(max_length=40)
    test_out_of = models.IntegerField(null=True, blank=True)

    CHOICE = ( 
        (u'ENG', u'English'), 
        (u'MTS', u'Maths'),
        )
    KLA = models.CharField(max_length=10, choices=CHOICE)

class Display(models.Model):
    full_name = models.ForeignKey(Student, related_name='student_model')  
    test = models.ForeignKey(Test)
    start = models.CharField(max_length=10, null=True, blank=True)
    s1 = models.CharField(max_length=10, null=True, blank=True) 
```

我不能锻炼的是如何根据在显示模型中的 start 和 s1 字段中输入的数字即时计算简单的数学运算。
我已经尝试使用“maths_cal_1”方法进行此操作，但是当我尝试在模板中呈现结果时，我会得到错误或空白，具体取决于我将方法放入的模型。问题是我相信，每个学生对象都有很多测试. 我似乎无法正确计算所需测试并返回结果。在这种情况下，我想为每个学生的数学测试对象返回计算 s1-start 字段。如何即时为每个学生的每个单独的测试模型进行这些计算？谢谢。

更新：工作代码：

```
 def maths_cal_1(self):
    cal_list = []

    for tname in ['Maths']:
        try:
            maths_test = self.student_model.get(test__test_name__iexact=tname)
            result = int(maths_test.s1) - int(maths_test.start)

            if result:
                cal_list.append(result)
            else:
                cal_list.append("")
        except (Display.DoesNotExist, ValueError):
            cal_list.append("")

    return cal_list 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:15:57.600

你在正确的轨道上，但你实际上需要得到过滤器的结果，而不是仅仅检查它的存在。

```
try:
    maths_test = self.student_model.get(test__test_name__iexact="maths")
    result = maths_test.s1 - maths_test.start
except Display.DoesNotExist:
    result = None

return result 
```

（请注意，还有一个问题，因为`s1`和`start`都是 char 字段：从另一个中减去一个不会给您任何有用的东西。不确定您在这里真正打算做什么。您可能需要将其转换为所需的类型。你能提供样本数据和期望的结果吗？）

# android - images[Position].setImageResource(..) 不是通过单击，而是通过我想要的位置

> ID：12671116
> 
> 赞同：0
> 
> 时间：2012-10-01T09:58:44.157
> 
> 标签：android, drawable, android-imageview

我正在为黑白棋游戏设计一个 8*8 板。对于初始化板，我使用了 ImageAdapter。

我需要在 2 种不同的情况下更改图像资源。

首先： - 这是通常的 - 当我点击图像时。没关系。

第二：当点击一个位置时，我也必须更改板上的一些其他图像。但我不知道如何？？？？

换句话说，我该怎么写：

`images[position].setImageResource(R.drawable.image);`

代替：`imageView.setImageResource(R.drawable.image);`

哪个位置是一个整数，它显示我想要更改它的图像的位置。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:02:38.370

我假设您在`getView`适配器中执行此操作：

```
if(position == 0) imageView.setImageResource(R.drawable.image);
else if(position == 1) imageView.setImageResource(R.drawable.image);
// etc etc.. you can set different images for different positions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:31:27.863

```
images[position]=R.drawable.image;//replace image in list with new image
          gridView.invalidateViews();//

  imageAdapter.notifyDataSetChanged();//imageAdapter is object of adapter 
```

# sql - 使用 SQL 查询的逗号分隔值

> ID：12671117
> 
> 赞同：17
> 
> 时间：2012-10-01T09:58:52.593
> 
> 标签：sql, sql-server, sql-server-2008

我的 SQL 表如下

```
City_Code     Post_Code    Post_Code_Description
100           A1           ABC
100           C8           XYZ
100           Z3           MNO
200           D4           LMN
300           E3           IJK
300           B9           RST 
```

它是 city_code 和 Post_Code 之间的映射。一个 City_Code 有多个邮政编码。现在我想运行一个查询来得到类似下面的东西

```
City_Code     Post_Code    Post_Code_Description
100           A1,C8,Z3     ABC,XYZ,MNO
200           D4           LMN
300           E3,B9        IJK,RST 
```

你能帮我处理一下这个 SQL 表吗，如下所示

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T10:14:44.357

试试这个：

```
SELECT City_Code, 
      Post_Code = 
        STUFF((SELECT ', ' + Post_Code
           FROM your_table b 
           WHERE b.City_Code = a.City_Code 
          FOR XML PATH('')), 1, 2, ''),
      Post_Code_Description=
        STUFF((SELECT ', ' + Post_Code_Description
           FROM your_table b 
           WHERE b.City_Code = a.City_Code 
          FOR XML PATH('')), 1, 2, '')
FROM your_table a
GROUP BY City_Code 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T10:00:04.463

如果您使用的是 MySQL，您可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
select City_Code, 
     GROUP_CONCAT(Post_Code) Post_Code, 
     GROUP_CONCAT(Post_Code_Description) post_code_description
from yourtable
group by City_Code 
```

对于 SQL Server，您可以使用[`STUFF()`](http://msdn.microsoft.com/en-us/library/ms188043.aspx?ppud=4)和[`FOR XML PATH()`](http://msdn.microsoft.com/en-us/library/ms345137%28v=sql.90%29.aspx)

```
select city_code,
    Stuff((SELECT ', ' + post_code 
            FROM yourtable t2
            where t1.city_code = t2.city_code
            FOR XML path('')),1,1,'') Post_Code,
    Stuff((SELECT ', ' + post_code_description
            FROM yourtable t2
            where t1.city_code = t2.city_code
            FOR XML path('')),1,1,'') post_code_description
from yourtable t1
group by city_code 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T10:10:02.177

试试这个：

```
select city_code,substring((select ',' + post_code  
from city b where a.city_code=b.city_code
for xml path('')
),2,100)as post_code,
substring((select ',' + post_code_description 
from city c where a.city_code=c.city_code
for xml path('')
),2,100)as post_code_description
from city a
group by a.city_code 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T09:50:34.897

为此使用递归查询：

```
--Prepare Dummy Data
;WITH CITIES 
     AS (SELECT 100   AS City_Code, 
                'A1'  AS Post_code, 
                'ABC' AS Post_Code_Description 
         UNION 
         SELECT 100   AS City_Code, 
                'C8'  AS Post_code, 
                'XYZ' AS Post_Code_Description 
         UNION 
         SELECT 100   AS City_Code, 
                'Z3'  AS Post_code, 
                'MNO' AS Post_Code_Description 
         UNION 
         SELECT 200   AS City_Code, 
                'D4'  AS Post_code, 
                'LMN' AS Post_Code_Description 
         UNION 
         SELECT 300   AS City_Code, 
                'E3'  AS Post_code, 
                'IJK' AS Post_Code_Description 
         UNION 
         SELECT 300   AS City_Code, 
                'B9'  AS Post_code, 
                'RST' AS Post_Code_Description), 
--Add Row numbers to each row
     PREPARE 
     AS (SELECT *, 
                ROW_NUMBER () 
                  OVER ( 
                    PARTITION BY CITY_CODE 
                    ORDER BY CITY_CODE) RN 
         FROM   CITIES),
--Start Recursive CTE 
     RECURSIVE 
     AS (
--Anchor Query
         SELECT CITY_CODE, 
                CAST(POST_CODE AS VARCHAR(MAX))             Post_code, 
                CAST(POST_CODE_DESCRIPTION AS VARCHAR(MAX)) 
                Post_Code_Description, 
                1                                           AS LEVEL, 
                RN 
         FROM   PREPARE 
         WHERE  RN = 1 
         UNION ALL 
--Recursive Query
         SELECT T1.CITY_CODE, 
                T1.POST_CODE + ',' + T2.POST_CODE, 
                T1.POST_CODE_DESCRIPTION + ',' 
                + T2.POST_CODE_DESCRIPTION, 
                T2.LEVEL + 1, 
                T1.RN 
         FROM   PREPARE AS T1 
                INNER JOIN RECURSIVE AS T2 
                        ON T1.RN = T2.RN + 1 
                           AND T1.CITY_CODE = T2.CITY_CODE) 
--Final Results
SELECT T1.CITY_CODE, 
       T1.POST_CODE, 
       T1.POST_CODE_DESCRIPTION 
FROM   RECURSIVE T1 
       INNER JOIN (SELECT CITY_CODE, 
                          COUNT(*) cnt 
                   FROM   CITIES 
                   GROUP  BY CITY_CODE)T2 
               ON T1.CITY_CODE = T2.CITY_CODE 
WHERE  T1.LEVEL = T2.CNT 
```

# javascript - 为什么在javascript中删除对象不起作用

> ID：12671118
> 
> 赞同：1
> 
> 时间：2012-10-01T09:58:54.263
> 
> 标签：javascript, html

> **可能重复：**
> [在 JavaScript 中删除对象](https://stackoverflow.com/questions/742623/deleting-objects-in-javascript)

我已经开始使用 delete 属性了。它不工作。不知道是不是浏览器兼容性问题？它是没有被删除的参考吗？

我对指针的概念不是很清楚。请让我们知道出了什么问题？

**代码：**

```
 <html>
        <script language="JavaScript">
        MyDate = new Date();
        document.write("MyDate=",MyDate,"<br>");

        delete MyDate;
        document.write("MyDate=",MyDate);   //MyDate=undefined should be output
        </script>
    </html> 
```

但**输出**只是第一个document.write：

```
MyDate=Mon Oct 01 2012 15:27:56 GMT+0530 (India Standard Time) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:00:48.433

IIRC，`delete`在 javascript 中删除属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:03:14.580

这是工作 。由于您正在删除`myDate`，当您尝试`myDate`在第二个`document.write` [jsfiddle中访问时，浏览器会引发异常](http://jsfiddle.net/Hu47f/1/)

```
Uncaught ReferenceError: MyDate is not defined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:04:07.520

首先，这不是应该使用删除的方式。您可以使用它从对象中删除属性，因此在您的情况下，您应该编写`delete window.MyDate`

为什么会这样`undefined`？你删除变量，因此你得到

> 错误：ReferenceError：MyDate 未定义

# android - 如何在单击android中的listview项目时从数据库中获取id

> ID：12671119
> 
> 赞同：5
> 
> 时间：2012-10-01T09:59:01.753
> 
> 标签：android, android-listview, android-sqlite

我在本网站上搜索了与此相关的各种问题，但我无法解决我遇到的问题。

我想在单击列表视图项时从数据库中获取 id

这是我的类别课程：

```
package com.example.reminders;

import java.util.List;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class Categories extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DBAdapter db = new DBAdapter(Categories.this);
        db.open();
        List<String> cs = db.getAllCategoriesList();
        setListAdapter(new ArrayAdapter<String>(this, R.layout.activity_categories,cs));
        ListView listView = getListView();
        listView.setTextFilterEnabled(true);
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text

                 Cursor cur = (Cursor) parent.getItemAtPosition(position);
                Toast.makeText(getApplicationContext(),
                "id:"+id+"position:"+position+"rowid:"+cur.getInt(cur.getColumnIndex("_id")), Toast.LENGTH_LONG).show();
            }
        }); 
        db.close();

    }

} 
```

DBAdapter 类中定义的 getAllCategoriesList 函数是：

```
//---retrieves all the category data---
    public List<String> getAllCategoriesList() 
    {
        String[] columns = new String[] {KEY_NAME2};
        Cursor c = db.query(DATABASE_TABLE2, columns, null, null, null, null,
            KEY_NAME2);     
       // String results = "";
        List<String> results = new ArrayList<String>();
        int iCM = c.getColumnIndex(KEY_NAME2);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results.add(c.getString(iCM));
        }
        return results;

    } 
```

当我运行示例代码时，出现以下错误：

```
10-01 15:05:22.507: E/AndroidRuntime(20846): java.lang.ClassCastException: java.lang.String cannot be cast to android.database.Cursor 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:22:15.830

您没有从数据库中查询 _id（仅 KEY_NAME2 列），因此您无法从适配器中获取它。

这一行：

```
Cursor cur = (Cursor) parent.getItemAtPosition(position); 
```

是完全错误的。您正在尝试强制转换字符串（由`ArrayAdapter<String>`游标返回，该游标永远无法工作。

您需要做的就是为您的 ListView 使用`CursorAdapter`（或`SimpleCursorAdapter`）。游标应至少查询 _id 和 KEY_NAME2。

使用此适配器，`getItem(int position)`将返回一个光标设置到请求的位置。那么你需要做的就是`cursor.getInt(cursor.getColumnIndex("_id"))`，你就在那里。

# winforms - 如何在水晶报表中将多行字符串值显示为单行

> ID：12671120
> 
> 赞同：0
> 
> 时间：2012-10-01T09:59:09.120
> 
> 标签：winforms, c#-4.0, .net-4.0, crystal-reports-2008

我目前在 Windows 应用程序和水晶报表中工作。在水晶报告中，我想在单行中显示多行字符串值，谁能告诉我该怎么做？

例子：

在数据库中，一列包含以下值。

“674，AKR公寓，

钦奈-600001"

当我试图在水晶报表中以单行显示列值时

只显示“674，AKR apparment”，谁能告诉我如何在单行中显示字符串。

我的输出希望像这样显示“674,AKR apparment, Chennai-600001”。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:53:27.147

1.  您已将报表与水晶报表连接起来。
2.  在水晶报告中有[公式字段](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-formula-field.htm)的选项。根据您的要求创建公式字段并添加您的数据库字段。您也可以在公式字段中执行您的业务逻辑。因此，根据您的逻辑，您可以执行任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:32:00.013

有几种方法可以做到这一点。前面的答案很好，特别是如果您对显示器有条件。另一种方法是使用文本框，然后拖放其中的列。

# ruby-on-rails - rspec 1.3.2 的快速失败标志

> ID：12671121
> 
> 赞同：1
> 
> 时间：2012-10-01T09:59:11.280
> 
> 标签：ruby-on-rails, rspec, rspec-rails

据我所知，Rspec2 中有一个 --fail-fast 标志，用于在失败时停止运行测试执行：

```
rspec spec/ --fail-fast 
```

显然这个标志在 Rspec1 中不存在：

```
spec spec/ --fail-fast
invalid option: --fail-fast (OptionParser::InvalidOption) 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:40:10.177

正如我在评论中提到的`fail-fast`，rspec 2.1 版本中添加了选项。最接近您想要实现的行为是[rspec-instafail](https://github.com/grosser/rspec-instafail)或[fuubar 之](https://github.com/jeffkreeftmeijer/fuubar)类的 gem 。

# iphone - 如何在 iPhone 中停止核心定位？

> ID：12671124
> 
> 赞同：0
> 
> 时间：2012-10-01T09:59:13.457
> 
> 标签：iphone, ios, gps, core-location, cllocationmanager

我在 iPhone 应用程序中获取用户的当前位置，但现在不需要获取用户的位置，所以我删除了 CLLocation 框架并删除了有关核心位置的所有相关内容。但是当我打开应用程序时，仍然会出现一个弹出窗口并询问“想要获取您当前的位置”。我不想显示这个消息，所以我可以通过这个消息阻止我的应用程序吗？

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:12:13.530

Did you try cleaning the project? `Product > Clean`

Also, delete the app from your device before building and running it again. That will destroy any saved prefs, etc. that may be left on the device.

# knockout.js - Knockout js 中的 IValueConverter 是否有替代方案？

> ID：12671126
> 
> 赞同：1
> 
> 时间：2012-10-01T09:59:20.287
> 
> 标签：knockout.js

首先，我知道你可以使用 Computed observables。它们非常适合复杂的属性，但 IMO 并不是您在 Silverlight 中拥有的 IValueConverters 的一个值得替代品。在我当前的项目中，我有多个日期选择器。现在，我必须为每个日期创建一个额外的计算 observable，因为我希望格式化工作。因此，如果我有 5 个日期，即 10 个属性，那么在 Silverlight 中，您将有 5 个日期和 1 个通用日期转换器。

它可以工作，但它不是很干净的代码。更不用说在对这些日期应用验证时遇到的问题了。

有没有类似的东西：

```
<input type="text" data-bind="value: TestProperty" data-converter="MyTextConverter" /> 
```

或者有什么替代方法不能让我创建双重属性？

提前致谢，

阿恩·德鲁维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:46:33.310

您正在寻找[custom-binding](http://knockoutjs.com/documentation/custom-bindings.html)的主要用途。在这里查看一个[很好的指南](http://www.knockmeout.net/2011/07/another-look-at-custom-bindings-for.html)

```
ko.bindingHandlers.dateConverter = {
  init: function (element, valueAccessor, allBindingsAccessor) {
    var underlyingObservable = valueAccessor();
    var options = allBindingsAccessor().dateConverterOptions
                    || { /* set defaults here */ };

    var interceptor = ko.computed({
      read: function() {
        return underlyingObservable();
      },

      write: function(newValue) {
        var current = underlyingObservable(),
            convertedDate;

        /* do some kind of conversion here, using the 'options' object passed */

        if (convertedDate !== current) {
          underlyingObservable(convertedDate);
        }
        else if (newValue !== current.toString()) {
          underlyingObservable.valueHasMutated();
        }
      }
    });

      ko.applyBindingsToNode(element, { value: interceptor });
  }
}; 
```

[从这里](https://stackoverflow.com/questions/12643455/knockout-js-extending-value-binding-with-interceptor)修改的拦截器代码

**编辑：**

你的 html 看起来像：

```
<input type="text"
       data-bind="dateConverter: TestProperty,
                  dateConverterOptions: { format: 'dd/mm/yyyy', anotherOption: 'example' } " /> 
```

# javascript - Bootstrap 2.1.1 下拉菜单无法正常工作

> ID：12671127
> 
> 赞同：0
> 
> 时间：2012-10-01T09:59:22.777
> 
> 标签：javascript, css, drop-down-menu, twitter-bootstrap

升级到 Bootstrap 2.1.1 后，我的下拉菜单出现问题。

我页面上的第一个下拉菜单工作正常。单击时正确打开，然后单击项目、下拉标题或页面时关闭。

但是，我页面上的第二个和第三个下拉菜单（我猜除了第一个之外的任何下拉菜单）都无法正常工作。

单击项目、页面或其标题时，它们不会关闭。

我环顾四周，发现了以下片段，这是我以前不需要的：

```
$('.dropdown-toggle').dropdown(); 
```

当我将其包含在我的代码中时，第二个/第三个下拉菜单会在单击页面或项目时关闭。单击标题时，它们仍然不起作用。

这些下拉列表的 HTML 与第一个下拉列表的 HTML 完全相同。我找不到任何差异，也没有解释为什么只有第一个下拉菜单正常工作。

我在 JSfiddle 上放了一些代码：http: [//jsfiddle.net/3CysL/1/](http://jsfiddle.net/3CysL/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:20:51.813

您正在将下拉触发器与其父级下拉容器链接。
这打破了你的触发器，所以改变：

```
href="#media"    -> href="#"
href="#tools"    -> href="#"
href="#language" -> href="#" 
```

# iphone - 确定选择 UIMenuItem 的 TableView 的 Cell

> ID：12671128
> 
> 赞同：0
> 
> 时间：2012-10-01T09:59:23.020
> 
> 标签：iphone, ios5.1, uimenucontroller

我正在使用`UIMenuController`.

```
UIMenuItem *ren = [[UIMenuItem alloc] initWithTitle:@"Rename" action:@selector(onRenameItem:)];
/* .... then set menu visible on long press ...*/ 
```

选择器：

```
-(void) onRenameToken:(id) sender {
        /* ...Identify the selected cell??? ... */ 
    NSLog(@"Cell to be renamed is : %@",cell);
} 
```

我的问题是如何识别需要重命名的单元格。换句话说，识别选择器正在执行的单元格？

PS：IOS编程新手。所以请原谅任何术语错误或愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:40:26.530

我可能会继承`UITableViewCell`并把`onRenameItem:`(or `onRenameToken:`) 方法放在那里。

由于我不确定您所说的“重命名”到底是什么意思，因此单元格可以自行重命名，或者它可以向某个控制器对象发送通知以进行实际重命名。通知可以包括一个对象和/或一个用户信息字典，因此它可以告诉控制器它自己的身份和任何其他关于需要做什么的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:36:01.930

也许下面的讨论可以帮助你一点： [How to show a custom UIMenuItem for a UITableViewCell？](https://stackoverflow.com/questions/12290828/how-to-show-a-custom-uimenuitem-for-a-uitableviewcell) 似乎没有那么简单！

# drupal - 图像小部件中的额外文本输入——Drupal 7

> ID：12671134
> 
> 赞同：0
> 
> 时间：2012-10-01T09:59:49.777
> 
> 标签：drupal, drupal-7, drupal-fapi

我有一个包含图像字段并使用 image_image 小部件的内容类型。编辑节点时，我想为每个图像添加额外的文本输入。该文本不是节点的一部分，我会用它来生成翻译。我知道如何调整表单的其他部分，但在这里我迷失在 hook_form_alter() 和 hook_field_widget_form_alter() 之间。如何做到这一点？

现在，我使用 hook_form_alter 和 after_build 函数将图像的 alt 字段扭曲为我需要在节点编辑表单中看到的内容。然后我将提交的值移动到我想要的位置，并将图像的标题字段值复制到它的 alt 字段值中。我不介意他们是一样的。但我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:17:21.193

您可以使用[Field 集合](http://drupal.org/project/field_collection)将图像字段与附带的额外文本字段捆绑在一起。

# python - 从 FQL 查询中检索数据

> ID：12671140
> 
> 赞同：0
> 
> 时间：2012-10-01T10:00:25.220
> 
> 标签：python, django, facebook-fql, django-facebook

我正在与 django-facebook 进行 facebook 集成，所以我需要从 fql 查询中检索数据。这是代码：

```
a = request.user.get_profile().access_token
aquery = "SELECT uid, rsvp_status, start_time FROM event_member WHERE eid = 229224023873578 AND rsvp_status = 'attending'"
query = "https://api.facebook.com/method/fql.query?query=%s&access_token=%s" % (aquery, a)
return HttpResponseRedirect(query) 
```

就像现在一样，代码从 django-facebook 制作的模型中获取 access_token，并获取特定活动的所有参加成员。最后它重定向到 fql 结果页面。我想检索这些结果并处理它们 - 我该怎么做？我尝试使用 urllib2 并`query`像这样：

```
response = urllib2.urlopen(query)
html = response.read()
return HttpResponse(html) 
```

我收到一个错误 - HTTP 错误 400：错误请求。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:26:19.163

好的，我找到了解决方案 - 这是：

```
query = "YOUR FQL QUERY --- SEE FB API DOCUMENTATION ---" 
b = graph.fql(query) 
```

Django-facebook 有图 - 导入并使用它（有关此图的更多信息，请参阅 django-facebook git 代码）

# serialization - 为什么 Doctrine2 数组类型序列化因某些特殊字符而失败？

> ID：12671146
> 
> 赞同：0
> 
> 时间：2012-10-01T10:00:50.170
> 
> 标签：serialization, encoding, doctrine-orm, issue-tracking

我在教义 2 中发现了数组类型的问题。

在我的应用程序中，我有一些来自斯洛文尼亚的用户。这些家伙有一些奇怪的字符，例如“čćšž”。在此值被序列化并存储到数据库中后，就会出现问题。

之后我得到以下期望：注意：unserialize（）[function.unserialize]：/Applications/MAMP/htdocs/firegames.at/vendor/doctrine-dbal/lib/Doctrine/DBAL/Types 中 645 个字节的偏移量 456 处出错/ArrayType.php 第 46 行

所以我发现序列化的 sting 中的以下内容触发了预期： **s:7:"Urani?"**

但应该是乌拉尼奇。我尝试将字符串转换为 utf8，但它也失败了。字符无法编码！

如果我更换 ? 直接使用 ć 它可以按预期工作。同样奇怪的是 char ž 没有问题。那是唯一有效的。

所以有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:52:32.560

您需要做的是告诉 DBAL 在连接到数据库时执行“SET NAMES utf8”。这是通过将`charset='utf8'`参数传递给配置来完成的。您可能想阅读[文档](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/configuration.html)，您会发现这仅适用于 PDO MySQL 和 OCI (Oracle)，但我假设您使用的是 MySQL。

此外，您是否使用创建表格单元格`CHARACTER SET utf8 COLLATE utf8_slovenian_ci`？

# php - 用ldap编译php

> ID：12671148
> 
> 赞同：5
> 
> 时间：2012-10-01T10:00:59.530
> 
> 标签：php, ldap, linux-mint

我在 Linux Mint 上 - 我无法使用 LDAP 支持编译 php

配置 说：

```
checking for LDAP Cyrus SASL support... yes
configure: error: Cannot find ldap libraries in /usr/lib. 
```

但是每个 -dev 库似乎都已安装：

```
 dpkg -l *ldap* | grep ii
ii  ldap-utils                                    2.4.28-1.1ubuntu4.1                        OpenLDAP utilities
ii  ldaptor-utils                                 0.0.43+debian1-6ubuntu1                    command-line LDAP utilities
ii  libaprutil1-ldap                              1.3.12+dfsg-3                              Apache Portable Runtime Utility Library - LDAP Driver
ii  libkldap4                                     4:4.8.5-0ubuntu0.1                         library for accessing LDAP
ii  libldap-2.4-2                                 2.4.28-1.1ubuntu4.1                        OpenLDAP libraries
ii  libldap2-dev                                  2.4.28-1.1ubuntu4.1                        OpenLDAP development libraries
ii  libnet-ldap-perl                              1:0.4300-2ubuntu1                          client interface to LDAP servers
ii  libsasl2-modules-ldap                         2.1.25.dfsg1-3ubuntu0.1                    Cyrus SASL - pluggable authentication modules (LDAP)
ii  php5-ldap                                     5.3.10-1ubuntu3.4                          LDAP module for php5
ii  python-ldaptor                                0.0.43+debian1-6ubuntu1                    pure-Python library for LDAP operations 
```

这不是它第一次发生故障，每次都有一些新的奇怪位置用于库或一些新的特殊包，或者其他什么......你们中有人发现了吗？这是 php 5.4.7。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:25:57.900

信不信由你，configure 找不到 /usr/lib/i386-linux-gnu 下的 ldap.so

所以我做了这些链接：（liblber 是 libldap 的朋友）

```
cd /usr/lib
ln -s i386-linux-gnu/libldap.so
ln -s i386-linux-gnu/liblber.so 
```

并配置成功。坏事是'make'不起作用，因为：

```
/usr/bin/ld: ext/ldap/.libs/ldap.o: undefined reference to symbol 'ber_strdup@@OPENLDAP_2.4_2'
/usr/bin/ld: note: 'ber_strdup@@OPENLDAP_2.4_2' is defined in DSO /usr/lib/i386-linux-gnu/liblber-2.4.so.2 so try adding it to the linker command line
/usr/lib/i386-linux-gnu/liblber-2.4.so.2: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make: *** [sapi/cli/php] Erreur 1 
```

这似乎是 PHP 中的一个错误——我过去曾见过 PHP 开发人员修复的其他一些错误。

# android - 如何通过名称指向国家/地区？

> ID：12671152
> 
> 赞同：2
> 
> 时间：2012-10-01T10:01:05.797
> 
> 标签：android, google-maps, android-mapview

假设我不知道我当前的位置，如何`MapView`通过它的名字移动到国家？

我想要做的是在语言环境中按国家代码显示用户的国家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:22:37.170

我所知道的android中没有这样的表格，其中包含国家和地理位置之间的联系。

我认为最好的方法是获取所有首都城市的经纬度列表（您可以在此处获取它们：[首都城市](http://en.wikipedia.org/wiki/List_of_cities_by_longitude)列表）或国家列表（您可以从此处获取它们：[国家列表](http://www.google.pt/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=2&cad=rja&ved=0CCwQFjAB&url=http://www.newstrackindia.com/information/worldinfo/Latitude-and-Longitude-of-Countries.html&ei=Mm5pUOvsPMuThgeJlIDQCw&usg=AFQjCNGu4gM2Nx8PUYLTidqNn821QmBGbw)）并将其放入在您的应用程序的表中。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:04:24.233

是的，您可以按国家代码显示用户的国家。

因为我们有能力`CountryCode`通过`Android Telephony Manager Api`所以。

1）您必须使用键值对概念，Key as`CountryCode`和 Value as Country。

像下面的代码：

```
TelephonyManager manager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
manager.getNetworkCountryIso(); 
```

# sql-server - 过滤索引中要包含哪些列？

> ID：12671153
> 
> 赞同：0
> 
> 时间：2012-10-01T10:01:08.053
> 
> 标签：sql-server, sql-server-2008, database-design

假设有一个名为 T1 的表

```
CREATE TABLE T1
(
  GID INT NOT NULL,
  Attrib1 BIT NOT NULL,
  Attrib1Date DATE NOT NULL,
  Attrib2 BIT NOT NULL,
  CONSTRAINT PK_T1 PRIMARY KEY (GID)
) 
```

现在，我正在为查询创建索引，其中只有 Attrib1 等于 1 或 Attrib2 等于 1 的行是有趣的。假设只有 20% 的行是这样的。

*请不要担心 Attrib1 与 Attribe2 的关联——它们仅针对两个单独的示例给出。*

使用过滤索引很明显——我的意思是：带有 WHERE 子句的 INDEX-es。但问题是要包括哪些列？

**示例查询：**

```
SELECT * FROM T1 WHERE Attrib1 = 1 ORDER BY Attrib1Date
SELECT * FROM T1 WHERE Attrib2 = 1 
```

**示例和问题 1)**

哪个索引更正确？

```
CREATE NONCLUSTERED INDEX IX_Attrib1
ON T1 (Attrib1, Attrib1Date)
WHERE Attrib1 = 1 
```

或者

```
CREATE NONCLUSTERED INDEX IX_Attrib1
ON T1 (Attrib1Date, Attrib1)
WHERE Attrib1 = 1 
```

或者

```
CREATE NONCLUSTERED INDEX IX_Attrib1
ON T1 (Attrib1Date)
WHERE Attrib1 = 1 
```

**示例和问题 2)**

构建仅包含过滤列的过滤索引是否正确，例如：

```
CREATE NONCLUSTERED INDEX IX_Attrib2
ON T1 (Attrib2)
WHERE Attrib2 = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:18:50.607

首先，消除误解：

> 假设只有 20% 的行是这样的……使用过滤索引很明显

不，一点也不明显。我认为有时需要考虑该指数的选择性约为 1%。通常，阈值引用为 5%。有一篇关于它的文章，但我不记得在哪里。在谷歌上搜索它。

在您的 3 个变体上

> 在 T1（Attrib1，Attrib1Date）上创建非聚集索引 IX_Attrib1，其中 Attrib1 = 1

由于 SQL Server 实现了筛选索引，因此索引键中需要 Attrib1。但是，将其放在位置 1 并不会使其具有很高的选择性。

> 在 T1 (Attrib1Date, Attrib1) WHERE Attrib1 = 1 上创建非聚集索引 IX_Attrib1

这个比上面的更具选择性，并且会更可取。前置条件用于检查过滤索引的适用性，但之后，**常规**查询引擎将接管，它将执行正常的选择性检查等。

> 在 T1 (Attrib1Date) 上创建非聚集索引 IX_Attrib1，其中 Attrib1 = 1

由于上述原因，这个不太理想，因为处理过程如下：

1.  查询包含`WHERE Attrib1 = 1`-> 可以考虑此索引（具有其他潜力）
2.  Attrib1Date 是否足够有选择性？
3.  索引包含 (Attrib1Date + record-pointer) => 这些可以为请求提供服务，包括`WHERE Attrib1 = 1`条件

它在＃3失败

> 在 T1 (Attrib2) WHERE Attrib2 = 1 上创建非聚集索引 IX_Attrib2

是的，如果只是为了创建索引，您会这样做，并且包含该列是为了接管检查之外的常规查询优化器/引擎`filtered index applicability`。

# c# - 是否有相当于 VB 的 VBC_VER 用于 c# 编译？

> ID：12671155
> 
> 赞同：3
> 
> 时间：2012-10-01T10:01:15.163
> 
> 标签：c#, conditional-compilation

有一段[时间](http://msdn.microsoft.com/en-us/library/swfss70d%28v=vs.80%29.aspx)，`VBC_VER`常量被定义为你可以做如下的事情：

```
#If VBC_VER >= 9.0 Then
Imports System.Net.Mail
#Else
Imports System.Web.Mail
#End If 
```

是否有可以在 C# 代码中使用的等价物，或者自动定义的那些常量的比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:14:59.650

不，我不知道。当然，您可以在项目文件中定义自己的预处理器符号。

请记住，“C# 版本”和“项目所针对的 .NET 版本”也不是一回事。我希望您要使用的*命名空间*更多地取决于您使用的框架版本，而不是语言版本。

# jquery - 使用 jQuery 显示下一个可见的 Option-Element

> ID：12671161
> 
> 赞同：1
> 
> 时间：2012-10-01T10:01:27.033
> 
> 标签：jquery, option, visible, next

我在 HTML 代码中有这个 Select-Element：

```
<select id="pes_uni" name="pes_uni">
    <option value="choose">Bitte auswählen</option>
    <option value="7">HdM Stuttgart</option>
    <option value="3">Hochschule Esslingen</option>
    <option value="4">Hochschule Pforzheim</option>
    <option value="1">Universität Bamberg</option>
    <option value="5">Universität Bayreuth</option>
</select> 
```

现在这些选项标签中的一些将被 jQuerys`.hide()`方法隐藏。如果刚刚选择的选项将被隐藏，我希望 jQuery 选择下一个可见的选项。我因此使用此代码：

```
 if($("#pes_uni option:selected")
   .is(":hidden")) $("#pes_uni option:selected")
   .removeAttr('selected')
   .next('option:visible')
   .attr('selected', 'selected'); 
```

但这不起作用，什么也没有发生。有效的是使用此代码而不使用“下一个参数”：

```
$("option:selected").removeAttr('selected').next().attr('selected', 'selected'); 
```

但是在这里它跳转到下一个选项，它可能也不可见，什么不是我的目标。

所以我的问题：为什么它不起作用`next('option:visible')`？这是错误的 jQuery 语法吗？

# javascript - 我想要做的是输出带有更改文本的报价生成器

> ID：12671163
> 
> 赞同：-1
> 
> 时间：2012-10-01T10:01:42.937
> 
> 标签：javascript, arrays

我想生成一些文本和图片是随机的引用。有人可以验证此代码，因为它不起作用。按提交时没有任何反应。

```
<html>
    <head>
    <title>quote generator Javascript</title>
    </head>
    <body>

    <script type="text/javascript">

    quote = new Array()

    quote[0] = 'img/einstein.jpg';
    quote[1] = 'img/einstein.jpg';
    quote[2] = 'img/einstein.jpg';
    quote[3] = 'img/einstein.jpg';

    text = new Array()

    text[0] = 'hallo1';
    text[1] = 'hallo2';
    text[2] = 'hallo3';
    text[3] = 'hallo4';

    function popup(){
        if(['submit']){

            document.write('<a href="' + text[Math.floor(Math.random() * text.lenght)]; + '" ><img src="' + quote[Math.floor(Math.random() * quote.lenght)]; '" style="border:0px;" >');
        }
    }

    </script>

    <input type="button" value="random quote" id="submit" onclick="popup()">

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:04:33.990

由于您的情况，您的代码不起作用`if`。
自从

```
(['submit'] == true)  // false 
```

您永远不会执行该`document.write`语句，因此只需删除`if`. 还

```
quote.lenght 
```

应该改为

```
quote.length 
```

（*同上*`text`）_

最后，代替 document.write，使用一个`innerHTML`或多个`createElement/appendChild`方法来正确注入你的标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:24:51.360

Fabrizio 的回答指出了您的代码的大部分问题。我认为你不需要

```
if(['submit']) 
```

行，因为除非按下提交按钮，否则弹出功能将永远不会执行。

此外，在生成随机数时，您需要这样做：

```
text[Math.floor(Math.random() * (text.length-1))] 
```

这是因为text.length=4，但是没有text[4]

# php - PHP中的密码和用户名验证

> ID：12671169
> 
> 赞同：-3
> 
> 时间：2012-10-01T10:02:03.253
> 
> 标签：php, passwords

我的数据库中有这些信息...

用户名 - kam, mav, shin

密码 - kam, mav, shin

这是我的代码...

```
<?php

$con=mysql_connect("localhost","root","");
mysql_select_db("nnx",$con);
$tbl2=mysql_query("SELECT * FROM tablename WHERE `username` =   
'".mysql_real_escape_string($_POST['username'])."' and `password` =   
'".mysql_real_escape_string($_POST['password'])."'");

while($row=mysql_fetch_array($tbl2))

    if (($row['username']==$_POST['username'])&&($row['password']==$_POST['password']))
        {   
            echo " ";
    }

    if (($row['username']!=$_POST['username'])&&($row['password']!=$_POST['password']))
        {
            header("location: /login.php?codeError=1");
            die;
        }
?> 
```

问题是，如果我输入用户名“mav”并且密码是“kam”，它仍然会进入下一页。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:07:17.563

您应该只检查查询是否返回具有以下内容的任何行`mysql_num_rows()`：

```
$con=mysql_connect("localhost","root","");
mysql_select_db("nnx",$con);

$tbl2 = mysql_query("SELECT `username`, `password`  FROM `tablename` WHERE 
                    `username` = '".mysql_real_escape_string($_POST['username'])."' AND 
                    `password` = '".mysql_real_escape_string($_POST['password'])."'
                   ");

$rows = mysql_num_rows($tbl2);

if($rows){
    // user and password exists in db
} else {
    // does not exist
    header("location: /login.php?codeError=1");
    die;
} 
```

就像我在上一个问题中告诉你的那样，尝试从`mysql_*`函数中转移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:07:41.190

您正在检查查询中的验证。如果用户正确输入了用户名和密码，并且仅在那时，查询将返回一行，其中包含该数据。

因此，您只需计算查询返回的行数。如果低于 1，则用户未通过身份验证

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:05:34.033

只是一个建议，但为什么不这样尝试：

```
if (($row['username']==$_POST['username'])&&($row['password']==$_POST['password']))
    {   
        echo " ";
    }else{
      header("location: /login.php?codeError=1");
      die;
    } 
```

我不明白为什么在这里需要两个 if 语句，它只是布尔值，结果要么为真，要么为假。

希望这可以帮助 ：）！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:08:20.147

尝试

```
 if (($row['username']==$_POST['username'])&&($row['password']==$_POST['password']))
        {   
            echo " ";
    }

 else 
        {
            header("location: /login.php?codeError=1");
            die();
        } 
```

**无论如何**，解决此类问题的一个好方法是在屏幕上临时打印变量（作为调试）。

```
echo $row['username']." ".$_POST['username']." ".$row['password']." ".$_POST['password'] 
```

如果您的数据库查询或发布数据的表单存在问题，请查看变量是否确实存在。

# iphone - NSUserDefaults 为空

> ID：12671172
> 
> 赞同：0
> 
> 时间：2012-10-01T10:02:18.380
> 
> 标签：iphone, nsuserdefaults

我试图在 UIApplicationDelegate 中的 application:openURL:sourceApplication:annotation: 方法中的 NSUserDefaults 中保存一些数据，然后在我的主视图控制器中的 viewDidLoad: 中读取这些数据。但是，数据总是空的！

如果我在 viewDidLoad: 中保存相同的数据在主视图控制器中，它会立即可见和可恢复，但不是在我将其保存在 UIApplicationDelegate 中时。

对这种行为有任何想法吗？谢谢你。

这是代码：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
    {
        // Save my data
        [[NSUserDefaults standardUserDefaults] setURL:url forKey:@"url"];
        [[NSUserDefaults standardUserDefaults] synchronize];
        return YES;
    }

- (void)viewDidLoad
    {
        [super viewDidLoad];

    // It's always false !! 
        if ([[NSUserDefaults standardUserDefaults] URLforKey:@"url"] != nil){
        // Do something with url
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:30:21.810

最后，问题是 viewDidLoad: 在我的主视图控制器中被调用之前而不是 application:openURL:sourceApplication:annotation:，所以还没有存储任何值。

我必须在其他地方检查 NSUserDefaults。

谢谢你们的帮助！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-01T10:08:30.040

在您的代码中，您在 NSUserDefault 中编写了 NSUrl。尝试使用 NSString。（即 [NSString stringWithFormat:@"%@",url]) 。

所以它会是 `[[NSUserDefaults standardUserDefaults] setValue:[NSString stringWithFormat:@"%@",url] forKey:@"url"];`

# maven - 在打包战争之前在 Maven 构建阶段运行 ant 任务？

> ID：12671174
> 
> 赞同：11
> 
> 时间：2012-10-01T10:02:27.523
> 
> 标签：maven, pom.xml, maven-war-plugin, maven-antrun-plugin

部署 webapp 时，我需要更新 UI 资源中的一些变量，解压缩一些资产并连接一些文件，目前这是通过 ant 任务实现的。我正在尝试使用类似这样的东西在 Maven 构建过程中运行此任务...

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <id>deploy-ui</id>
            <phase>prepare-package</phase>
            <inherited>false</inherited>
            <configuration>
                <target>
                    <property name="buildDir" value="${project.build.directory}/${project.build.finalName}" />
                    <ant antfile="build.xml" target="static-assets" />
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

以上失败，因为文件尚未复制到目标目录。如果我将阶段设置为“打包”，则 ant 任务运行良好并且所有文件都已创建/修改，但这无济于事，因为在运行 ant 目标之前已经构建了 .war。

基本上，我需要在准备包阶段结束时运行我的 ant 目标。

看过[生命周期参考](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)后，我无法锻炼如何将更精细的目标暴露给 antrun 插件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T11:24:35.443

由于我的评论没有得到任何答复，我猜你想继续使用`maven-antrun-plugin`.

根据我的学习和经验，如果两个插件要在同一阶段执行，那么它们将按照它们在`pom.xml`.

为此，您必须`maven-war-plugin`在`<plugins/>`列表中添加`maven-antrun-plugin`.

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <id>deploy-ui</id>
            <phase>package</phase>
            <inherited>false</inherited>
            <configuration>
                <target>
                    <property name="buildDir" value="${project.build.directory}/${project.build.finalName}" />
                    <ant antfile="build.xml" target="static-assets" />
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <executions>
        <execution>
            <!-- First step is to disable the default-war build step. -->
            <id>default-war</id>
            <phase>none</phase>
        </execution>
        <execution>
            <!-- Second step is to create an exploded war. Done in prepare-package -->
            <id>war-exploded</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>exploded</goal>
            </goals>
        </execution>
        <execution>
            <!-- Last step is to make sure that the war is built in the package phase -->
            <id>custom-war</id>
            <phase>package</phase>
            <goals>
                <goal>war</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

添加了更多执行，以便`default-war`首先禁用战争，然后爆炸战争，最后打包战争。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:51:32.087

正如您所观察到的，这是生命周期无法提供所需粒度的地方。我之前为某人回答了[类似的问题。](https://stackoverflow.com/a/10144507/944849)这不是您问题的确切答案，但该技术可能适用。

# gis - 区域边界的 GIS 数据

> ID：12671175
> 
> 赞同：1
> 
> 时间：2012-10-01T10:02:33.273
> 
> 标签：gis

我需要以下 GIS 数据：区域名称编码为 UTF-8 的所有国家/地区的区域边界（多边形）。请帮我在哪里可以得到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:01:07.367

[全球行政区域的 GADM 数据库](http://www.gadm.org/)是一种可能性。此外，您可能想在[gis.stackexchange.com](https://gis.stackexchange.com/)中询问以查找 GIS 数据。

![在此处输入图像描述](../Images/f6cd884c3ec403f657845ebf2053597a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T22:45:53.583

如果有人想下载更多覆盖整个世界的文化、物理和栅格数据 - 您应该查看[**naturalearthdata.com**](http://www.naturalearthdata.com/downloads/)。

# php - 如何使用 PHP Dom 替换数据？

> ID：12671177
> 
> 赞同：1
> 
> 时间：2012-10-01T10:02:38.413
> 
> 标签：php, dom, domdocument

我们正在寻找可以使用 PHP DOM 轻松替换值的脚本。这里我们有一个我需要替换的 HTML 代码

HTML 代码

```
<html>
<head>
<head>
<body>
<div> Explore HISTORY shows, watch videos and full episodes, play games and access articles on historical topics at History.com <p>Miss an episode of your favorite History shows? Go to history.com to catch up on full episodes and video exclusives.</p></div>
<div>Discover what happened today in history. Read about major past events that happened today including special entries on crime, entertainment, and more.</div>
<p>Experience games from your favorite shows, take quizzes, solve puzzles and more!</p>
</body>
</html> 
```

我们必须将“历史”一词（包括粗体/小字符）替换为`<u>history</u>`

最终的代码是

```
<html>
<head>
<head>
<body>
<div> Explore <u>HISTORY</u> shows, watch videos and full episodes, play games and access articles on historical topics at <u>History</u>.com <p>Miss an episode of your favorite <u>History</u> shows? Go to <u>history</u>.com to catch up on full episodes and video exclusives.</p></div>
<div>Discover what happened today in <u>history</u>. Read about major past events that happened today including special entries on crime, entertainment, and more.</div>
<p>Experience games from your favorite shows, take quizzes, solve puzzles and more!</p>
</body>
</html> 
```

这是我尝试过的，但它不起作用：

```
<?php
libxml_use_internal_errors(true);
@$doc = new DOMDocument;
$doc->preserveWhiteSpace = false;
$doc->loadHTMLFile('http://www.history.com');
@$body = $doc->getElementsByTagName('body');
       $i=0;
 while(is_object($finance = $doc->getElementsByTagName("body")->item($i)))
             {
                      foreach($finance->childNodes as $nodename)
                      {
                          $node = $doc->createElement("para", "<u>as fasd fasd fadsf</u>");
                          if(stristr($nodename->nodeValue, 'search')){
                          $nodename->appendChild($node);
                          echo $nodename->getAttribute."<br>" ;
                          echo $nodename->nodeValue."<br>" ;
                          @$us = true;
                          }
                        echo $nodename->nodeValue."<br>" ;
                        }

       $i++;
             }
libxml_clear_errors(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:44:06.673

使用 DOMXPath 查找包含单词“历史”不区分大小写的节点，然后将其拆分为新的文本节点。

出于好奇，我继续写了一个实现。我花费的时间比我计划的要长，但它确实有效。我希望它对你有帮助。

```
<?php

$doc = new DOMDocument();
$doc->preserveWhiteSpace = FALSE;
$doc->resolveExternals = FALSE;
$doc->loadHTML(<<<END
<html>
<head>
</head>
<body>
<div> Explore HISTORY shows, watch videos and full episodes, play games and access articles on historical topics at History.com <p>Miss an episode of your favorite History shows? Go to history.com to catch up on full episodes and video exclusives.</p></div>
<div>Discover what happened today in history. Read about major past events that happened today including special entries on crime, entertainment, and more.</div>
<p>Experience games from your favorite shows, take quizzes, solve puzzles and more!</p>
</body>
</html>
END
);

echo '<p>Input:</p>'."\n";
echo $doc->saveHTML()."\n";

$word    = 'history';
$lcWord  = strtolower($word);
$wordLen = strlen($word);
$xpath   = new DOMXPath($doc);
$nodes   = $xpath->query('/html/body//text()['.
                           'contains('.
                              'translate(.,"'.strtoupper($word).'","'.$lcWord.'"),'.
                              '"'.$lcWord.'")'.
                         ']');
foreach ($nodes as $node)
{
// Split all occurances of "word" into new text nodes.
    $text    = $node->data;
    $textPos = 0;
    while (($wordPos = stripos($text,$word)) !== FALSE)
    {
        $beforeText = substr($text,$textPos,$wordPos - $textPos);
        $wordText   = substr($text,$wordPos,$wordLen);

    // Add the before text to the DOM.
        $node->parentNode->insertBefore($doc->createTextNode($beforeText),$node);

    // Add the word text to the DOM.
    // Underline this word.
        $uNode = $doc->createElement('u');
        $uNode->appendChild($doc->createTextNode($wordText));
        $node->parentNode->insertBefore($uNode,$node);

    // Repeat for the text after the word.
        $text = substr($text,$wordPos + $wordLen);
    }

// Create a text node for text following the word.
    if ($text)
        $node->parentNode->insertBefore($doc->createTextNode($text),$node);

// Remove the original text node.
    $node->parentNode->removeChild($node);
}

echo '<p>Output:</p>'."\n";
echo $doc->saveHTML()."\n";

?> 
```

# 输出

```
<p>Input:</p>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head></head>
<body>
<div> Explore HISTORY shows, watch videos and full episodes, play games and access articles on historical topics at History.com <p>Miss an episode of your favorite History shows? Go to history.com to catch up on full episodes and video exclusives.</p>
</div>
<div>Discover what happened today in history. Read about major past events that happened today including special entries on crime, entertainment, and more.</div>
<p>Experience games from your favorite shows, take quizzes, solve puzzles and more!</p>
</body>
</html>

<p>Output:</p>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head></head>
<body>
<div> Explore <u>HISTORY</u> shows, watch videos and full episodes, play games and access articles on historical topics at <u>History</u>.com <p>Miss an episode of your favorite <u>History</u> shows? Go to <u>history</u>.com to catch up on full episodes and video exclusives.</p>
</div>
<div>Discover what happened today in <u>history</u>. Read about major past events that happened today including special entries on crime, entertainment, and more.</div>
<p>Experience games from your favorite shows, take quizzes, solve puzzles and more!</p>
</body>
</html> 
```

# php - 带有字母数字的日语假名的 preg_match 代码？

> ID：12671191
> 
> 赞同：0
> 
> 时间：2012-10-01T10:03:26.667
> 
> 标签：php, preg-match

日文假名的 preg_match 代码，带有单字节或双字节空间的字母数字。

```
if (!preg_match("[ァ-ヶー ][a-zA-Z0-9 ]+$", $name)) {
return 'display err msg。'; 
```

}

但它不工作。

而不是上面的代码下面的代码正在工作，但想要包含单字节和双字节空格。

```
if (!preg_match('/^(?:\xE3\x82[\xA1-\xBF]|\xE3\x83[\x80-\xB6]|\xE3\x83\xBC)+$/', $this -> data[$this->name]['kana'])) {
         return 'display err msg';} 
```

有机会吗？...帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:08:18.887

我会使用 htmlentities() 并在 preg_match() 中使用结果，使用 simbol 范围... [http://tlt.its.psu.edu/suggestions/international/bylanguage/japanesechartkatakana.html](http://tlt.its.psu.edu/suggestions/international/bylanguage/japanesechartkatakana.html)

# caching - Grails message.properties 更改未在部署的应用程序中生效

> ID：12671192
> 
> 赞同：2
> 
> 时间：2012-10-01T10:03:28.947
> 
> 标签：caching, grails, localization, internationalization

我在 tomcat 7 上部署的 Grails 应用程序有一个非常烦人的问题

我在我的网站中创建了一个工具，基本上允许网站管理员编辑 message.properties 文件，以便他可以根据需要将消息更改为某种语言。

所有更改都成功保存到他编辑的文件中。

在开发中，在从 STS（Soring Source Tools Suite；类似 eclips）运行网站时，我只是在浏览器中刷新网站，我会立即看到更改，对所选语言的 message.properties 文件所做的所有更改都是正确生效。

但是在部署的应用程序中（相同的代码相同的配置没有错误）管理员做同样的事情，以与以前相同的方式编辑资源，message.properties 文件正确保存了新值，但是，我没有看到更改在浏览器中，除非我重新启动了tomcat，或者几个小时后！

我已经禁用了 tomcat 7 缓存，但我仍然面临同样的问题。我用谷歌搜索了4天多，但所有结果都与我的问题无关，而且大部分都与hibernate缓存有关。

*所以，我的问题简单如下：*

**我想在我部署的 grails 应用程序中访问 message.properties 文件，让我们说 message_en.properties，更改让我们说 default.welcome.message=Welcome to default.welcome.message=Hello, World！然后打开任何浏览器，看到 Hello, World！而不是欢迎**

提前感谢您的帮助='）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:25:08.630

正如他们所说，一些大问题有一个非常简单的答案！根据我在资源编辑器工具中找到的帖子，我在操作中添加了此代码，并在 bootstarp 中进行了其他一些更改（请参阅答案末尾的链接）：

```
def messageSource
def saveMessageResources={
    .
    .
    .
    //my action logic
    .
    .
    .    
    messageSource.clearCache()
} 
```

它奏效了:)

参考资料：http: [//jira.grails.org/browse/GPAPPENGINE-44](http://jira.grails.org/browse/GPAPPENGINE-44)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:22:09.067

部署的应用程序在您重新启动之前不会获取更改。为方便起见，仅在开发模式下即时重新加载更改。之所以称为“热部署”，是因为仅应用了更改的部分（在您的情况下为messages.properties）。

如果您想在已部署的应用程序中编辑消息，您可以应用替代解决方案 -将您的消息保存在数据库中的[本地化插件。](http://grails.org/Localizations+Plugin "本地化插件")

# blackberry - 适用于 OS 7.0 及更早版本的黑莓应用程序，支持黑莓 10

> ID：12671193
> 
> 赞同：2
> 
> 时间：2012-10-01T10:03:38.393
> 
> 标签：blackberry, blackberry-webworks, blackberry-10

我必须开发一个 BlackBerry 应用程序，它可以在所有运行 blackberry OS 7.0 及更早版本的设备上运行，并且也可以在 BlackBerry 10 设备上运行。我怎样才能做到这一点？

WebWorks 应用程序是否能够支持上述所有平台？如果是，则没有用于 WebWorks 开发的 IDE .. 我该如何编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:42:39.850

[HTML5 BlackBerry Developer](https://developer.blackberry.com/html5/download/)页面应该包含您开始创建 WebWorks 应用程序所需的所有信息。正如该页面所述，您可以选择将所有 BB10、BB7 和带有 WebWorks 的 Playbook 操作系统作为目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T23:33:39.283

WebWorks 支持 BlackBerry OS 5.0+、BlackBerry PlayBook OS 和 BlackBerry 10。

关于 HTML5 功能，这取决于操作系统版本。例如，BlackBerry OS 5.0 是专有的浏览器实现，不支持 Ajax 请求。BlackBerry OS 6.0 是基于 WebKit 的，但与 BlackBerry 10 设备之类的设备相比，它是引擎的旧版本。因此，您需要注意各种平台支持哪些 HTML(5) 特性和功能。

话虽如此，如果您有一个共享的 HTML5“基础”，则可以（重新）将其与适用于智能手机的 WebWorks SDK (BBOS)、平板电脑操作系统 SDK (PlayBook) 和 BB10 SDK 打包。每个都将创建一个在各自环境中运行的应用程序：Java、AIR、Native。

如果您开始查看 WebWorks API（即与 HTML5 之外的功能绑定到本机层的 JavaScript API；其中之一是 BBM 集成），那么您将需要利用 API 文档来查看哪些 API 可以与哪个 SDK 一起使用。根据您的平台，各种 API 的实现甚至可用性可能会有所不同。

HTML5 为重用提供了最常见的“基础”，但您仍然需要注意每个平台的限制和差异。

没有 WebWorks IDE，您可以使用任何您喜欢的 IDE 来创建您的 HTML、JavaScript 和 CSS 资源。然后利用 SDK 将这些资源“打包”到相应平台的 BlackBerry 应用程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:12:42.320

Webworks 可以针对 OS 7.0、Playbook 和 BB10。您只需下载要部署到的版本的 SDK。请注意，每个平台都有平台特定的 API，如果您使用它们（例如在 BB10 中使用 NFC 等），则需要对其进行管理。这实际上是 SDK 有多个版本的原因。每个 SDK 都将给定平台的原生特性暴露给 HTML5。

至于发展。最简单的入门方法是使用[Phonegap](http://docs.phonegap.com/en/2.1.0/guide_getting-started_blackberry_index.md.html#Getting%20Started%20with%20Blackberry)。他们的文档非常详尽，他们有脚本可以为您部署内容并管理您的目录结构、管理您的引脚和密钥、开发人员令牌等。

# c# - 无法下载 Office 365 SharePoint 库项目

> ID：12671194
> 
> 赞同：2
> 
> 时间：2012-10-01T10:03:40.987
> 
> 标签：c#, .net, office365

我正在尝试使用下载 Office 365 SharePoint 库中存在的项目，`WebcClient.DownloadFile()`但出现此异常：

例外 ：

```
The remote server returned an error: (403) Forbidden. 
```

示例代码：

```
NetworkCredential credential = new NetworkCredential("username", "password", "aaa.onmicrosoft.com");
WebClient webClient = new WebClient();
webClient.Credentials = credential;
webClient.DownloadFile(@"https://aaa.sharepoint.com/testDoc/test.pdf", @"c:/test.pdf"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-28T11:17:12.453

另一种选择是利用[SharePoint Online Client Components SDK](http://www.microsoft.com/en-us/download/details.aspx?id=42038)中的 [SharePointOnlineCredentials 类](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.sharepointonlinecredentials.aspx)。

[SharePointOnlineCredentials 类](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.sharepointonlinecredentials.aspx)表示提供凭据以访问 SharePoint Online 资源的对象

## 先决条件

[SharePoint Online 客户端组件 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=42038)

## 如何从 SharePoint Online 下载文件

```
 public static void DownloadFile(string userName, string password, string fileUrl, string filePath)
 {
        var securePassword = new SecureString();
        foreach (var c in password)
        {
            securePassword.AppendChar(c);
        }
        using (var client = new WebClient())
        {
            client.Credentials = new SharePointOnlineCredentials(userName, securePassword);
            client.Headers.Add("X-FORMS_BASED_AUTH_ACCEPTED", "f");
            client.DownloadFile(fileUrl, filePath);
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:52:34.623

在朋友的帮助下，我设法破解了这个 SharePoint 在线身份验证的东西 :)

我被Wictor Wilén指出了[这篇博文的方向。](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

而我的使用 Wictors 声明库代码的 WebClient 调用......

```
var claimsHelper = new MsOnlineClaimsHelper(sharepointOnlineUrl, username, password);

var client = new WebClient();
client.Headers[ "Accept" ] = "/";
client.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
client.Headers.Add(HttpRequestHeader.Cookie, claimsHelper.CookieContainer.GetCookieHeader(new Uri(sharepointOnlineUrl))  );

var document = client.DownloadString( documentUrl ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T07:43:32.567

您需要添加一些内容来解决您的问题，称为 Headers 和 UserAgent。

```
 public static void method()
        {
         //   NetworkCredential myCredentials = new NetworkCredential("username", "password", "aaa.onmicrosoft.com");
            WebClient w = new WebClient();
            var ua = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
            w.Headers["Accept"] = "/";
            w.Headers.Add(HttpRequestHeader.UserAgent, ua);
            w.Credentials = myCredentials;
          w.DownloadFile(url, @"c:/name.doc"); 
        } 
```

它从 Office 365 中的团队站点库为我下载文件。但它给了我一个下载的文件。我剩下的唯一问题：该文件不包含您要下载的真实信息。我正在尝试解决这个问题几天 - 这是我迄今为止得到的最好结果。也许你可以用这些新信息帮助我。请告诉我:)

# javascript - 检查父 iFrame 是否已加载 jQuery

> ID：12671196
> 
> 赞同：4
> 
> 时间：2012-10-01T10:03:50.977
> 
> 标签：javascript, jquery, iframe, login, widget

我正在尝试在可在客户网站上使用的 iframe 中创建登录小部件。这个 iframe 将使用 jQuery，但我首先无法检查父文档是否加载了 jQuery，如果没有，则加载它。

我尝试了几种不同的技术，但似乎都没有奏效，或者决定两次加载 jQuery 库。

任何帮助将不胜感激。

此代码块位于 iframe 内加载的页面内，该页面拒绝合作。

```
<script>

var jQOutput = false;

function initjQuery() { 

if (typeof(jQuery) == 'undefined'){     
    if (!jQOutput){         
        jQOutput = true;

        var jScript = document.createElement('script');
        jScript.setAttribute("type", "text/javascript");
        jScript.setAttribute("src", "js/libs/jquery/jquery-min.js");
    }
    setTimeout("initjQuery()", 50);
} else {
    $(function() {
        $("#email").css({"background":"red"});
        //visual aid to see if jQuery is loaded.
    });
} 
}
</script> 
```

我只想检查 iframe 的父级是否已加载 jQuery，如果没有，请自行加载，因为我将使用它来执行完成登录过程所需的多项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:15:02.630

小部件的 JavaScript 代码必须分为两部分。其中一个将加载到客户的站点上。它将有权访问站点的 DOM：如果需要，加载 jQuery，创建 iframe 等（请特别注意那里的全局变量！尽量不要使用它们，因为它们可能与站点的代码冲突。 ) 请注意，这部分无法访问 iframe 的 DOM。这就是为什么你需要第二部分，它会被加载到 iframe 中。您可以使用跨域技术使部件相互交换消息。我建议您查看[easyXDM 库](http://easyxdm.net)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:12:28.120

附注评论：

> 由于同源策略（通过 JavaScript 跨域访问），我不认为您想要存档的内容是可能的 - 在 Google 上查看它... [http://google.com/search?q=same+origin+policy](http://google.com/search?q=same+origin+policy)

* * *

另一方面，如果您不违反相同的来源政策，您可以使用以下内容归档您想要的内容：

```
var parent = window.parent; // This refers to parent's window object

if ( parent && parent.jQuery ) { // Check to see if parent and parent.jQuery is truly
    window.jQuery = parent.jQuery;
    window.$ = parent.jQuery;
}
else {
    // load jQuery here
} 
```

# spring-security - 使用 Spring Security 3.1 覆盖会话

> ID：12671198
> 
> 赞同：2
> 
> 时间：2012-10-01T10:03:54.237
> 
> 标签：spring-security, session-management

我正在使用 spring security 3.1，并且我想实现会话覆盖功能。如果用户登录到应用程序并且他尝试再次登录（比如不同的浏览器），那么他应该被重定向到一个页面，该页面询问他是否要终止之前的会话并继续。这应该是因为允许的最大会话数是每个用户 1 个。我不确定如何在 ConcurrentSessionControlStrategy 中挂钩此功能。

# java - 文本解析方法的问题

> ID：12671200
> 
> 赞同：-2
> 
> 时间：2012-10-01T10:04:02.033
> 
> 标签：java, if-statement, while-loop

在执行 infinte while 循环 2 if 语句从不返回 false 期间，我在 java 中运行一个线程。

```
 } catch (NumberFormatException ne) {
            ne.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:13:41.500

`equals`比较字符串时需要使用：

```
if(!jTextField5.getText().equals(s2)) 
```

和

```
if (!s9.equals(jTextField6.getText())) 
```

常规的等式/不等式运算符比较内存中的对象，而不是字符串内容。

# titanium - 从源头制造钛的优点/缺点

> ID：12671206
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:08.997
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我想知道从源头制造钛的优缺点？

在定价许可方面哪个会更好 - 来自 App explorer 的 Titanium 或来自 github 的 Titanium？

如果我使用 Github，我可以利用什么？

因为我很困惑，如果我构建任何商业应用程序或产生收入的应用程序，那么我必须向 Appcelerator 支付版税。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:01:15.887

您无需支付任何版税即可使用 Titanium SDK，或在应用商店分发 Titanium 应用程序，完全没有理由从源代码编译它。如果您想从市场购买特定模块，或者需要 Appcelerator 本身的专门支持，或者想使用大量 ACS，您只需付费。

从 github 编译除了痛苦、痛苦和编译失败之外，您不会获得任何东西（如果您刚刚开始使用 Titanium 的话）。

[这是具体定价的链接。](http://www.appcelerator.com/plans-pricing/)

# android - android如何解析原子提要？

> ID：12671207
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:09.523
> 
> 标签：android, atom-feed

我正在执行一项基于从 picasa 公共相册中检索图像的任务。它以原子提要格式返回响应。这是我从 picasa 获得的响应片段。

```
<item>
<guid isPermaLink="false">https://picasaweb.google.com/data/entry/base/user/112104498664640193446/albumid/5791036084570489841/photoid/5791036081578935442?alt=rss&amp;hl=en_US</guid>
<pubDate>Sat, 22 Sep 2012 16:17:38 +0000</pubDate>
<atom:updated>2012-09-24T19:11:05.625Z</atom:updated>
<category domain="http://schemas.google.com/g/2005#kind">http://schemas.google.com/photos/2007#photo</category>
<title>SACHIN-TENDULKAR-WALLPAPER-51[1].jpg</title>
<description>&lt;table>&lt;tr>&lt;td style="padding: 0 5px">&lt;a href="https://picasaweb.google.com/112104498664640193446/Sachin?authkey=Gv1sRgCMG2v_GY6-iiOg#5791036081578935442">&lt;img style="border:1px solid #5C7FB9" src="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/s288/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" alt="SACHIN-TENDULKAR-WALLPAPER-51[1].jpg"/>&lt;/a>&lt;/td>&lt;td valign="top">&lt;font color="#6B6B6B">Date: &lt;/font>&lt;font color="#333333">Sep 22, 2012 4:17 PM&lt;/font>&lt;br/>&lt;font color=\"#6B6B6B\">Number of Comments on Photo:&lt;/font>&lt;font color=\"#333333\">0&lt;/font>&lt;br/>&lt;p>&lt;a href="https://picasaweb.google.com/112104498664640193446/Sachin?authkey=Gv1sRgCMG2v_GY6-iiOg#5791036081578935442">&lt;font color="#3964C2">View Photo&lt;/font>&lt;/a>&lt;/p>&lt;/td>&lt;/tr>&lt;/table></description>
<enclosure type="image/jpeg" url="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" length="0"/>
<link>https://picasaweb.google.com/112104498664640193446/Sachin?authkey=Gv1sRgCMG2v_GY6-iiOg#5791036081578935442</link>
<media:group>
<media:content url="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" height="384" width="512" type="image/jpeg" medium="image"/>
<media:credit>NW_MAY08</media:credit>
<media:description type="plain"/>
<media:keywords/>
<media:thumbnail url="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/s72/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" height="54" width="72"/>
<media:thumbnail url="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/s144/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" height="108" width="144"/>
<media:thumbnail url="https://lh3.googleusercontent.com/-IQEQp8boLEg/UF3kokv7hJI/AAAAAAAAACk/cr53Fr8fUC4/s288/SACHIN-TENDULKAR-WALLPAPER-51%25255B1%25255D.jpg" height="216" width="288"/>
<media:title type="plain">SACHIN-TENDULKAR-WALLPAPER-51[1].jpg</media:title>
</media:group>
</item> 
```

**编辑：**

```
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        //Only consider elements from allowed third-party namespaces
        if (NAMESPACES.contains(uri)) {
            mSb = new StringBuffer();
            String value = localName.trim();
            //Log.i(TAG, "start");
            if (value.equalsIgnoreCase("rss") ||  value.equalsIgnoreCase("rdf")) {
                isType = true;
            } else if (value.equalsIgnoreCase("feed")) {
                isType = true;
                isFeed = true;
            } else if (value.equalsIgnoreCase("channel")) {
                isFeed = true;
            } else if (value.equalsIgnoreCase("item") || value.equalsIgnoreCase("entry")) {
                mItem = new Item();
                imageLoader = new ImageLoader(context);
                isItem = true;      
            } else if (value.equalsIgnoreCase("title"))
                isTitle = true;
            else if (value.equalsIgnoreCase("link")) {
                // Get attributes from link element for Atom format
                if (attributes != null) {
                    // Enclosure for Atom format
                    if (attributes.getValue("rel") != null && attributes.getValue("rel").equalsIgnoreCase("enclosure")) {
                        mEnclosure = new Enclosure();
                        mMimeAttribute = attributes.getValue("type");
                        isEnclosure = true;
                    }
                    mHrefAttribute = attributes.getValue("href");
                }
                isLink = true;
            } else if (value.equalsIgnoreCase("pubDate") || value.equalsIgnoreCase("published") || value.equalsIgnoreCase("date"))
                isPubdate = true;
            else if (value.equalsIgnoreCase("guid") || value.equalsIgnoreCase("id"))
                isGuid = true;
            else if (value.equalsIgnoreCase("description") || value.equalsIgnoreCase("summary"))
                isDescription = true;
            else if (value.equalsIgnoreCase("encoded") || value.equalsIgnoreCase("content"))
                isContent = true;
            else if (value.equalsIgnoreCase("source"))
                isSource = true;
            else if(value.equalsIgnoreCase("media:group")){
                isMedia = true;
                Log.i("media", "media group");
            }
            else if (value.equalsIgnoreCase("enclosure")) {
                // Enclosure for RSS format
                if (attributes != null) {
                    mEnclosure = new Enclosure();
                    mMimeAttribute = attributes.getValue("type");
                    mHrefAttribute = attributes.getValue("url");
                    if(mMimeAttribute.equalsIgnoreCase("image/jpeg")){
                        mItem.setImageUrl(mHrefAttribute);
                    }
                    Bitmap bmp = imageLoader.getBitmap(mHrefAttribute);
                    mItem.setBitmapImage(bmp);
                    isEnclosure = true;
                }
            }else if(value.equalsIgnoreCase("media:content")){
                if(attributes != null){
                    mMediaContent = new MediaContent();
                    mMimeAttribute_media = attributes.getValue("type");
                    mHrefAttribute_media = attributes.getValue("url");
                }
            }
        }
    } 
```

**编辑 2**

这是我使用 Log.i("RSSHandler", "localName="+localName+", qName="+qName); 时的 logcat

```
10-02 14:04:51.799: I/RSSHandler(3090): localName=item, qName=item
10-02 14:04:51.799: I/RSSHandler(3090): localName=guid, qName=guid
10-02 14:04:51.799: I/RSSHandler(3090): localName=pubDate, qName=pubDate
10-02 14:04:51.799: I/RSSHandler(3090): localName=updated, qName=atom:updated
10-02 14:04:51.799: I/RSSHandler(3090): localName=category, qName=category
10-02 14:04:51.799: I/RSSHandler(3090): localName=title, qName=title
10-02 14:04:51.799: I/RSSHandler(3090): localName=description, qName=description
10-02 14:04:51.819: I/RSSHandler(3090): localName=enclosure, qName=enclosure
10-02 14:04:51.839: I/RSSHandler(3090): localName=link, qName=link
10-02 14:04:51.839: I/RSSHandler(3090): localName=group, qName=media:group
10-02 14:04:51.839: I/RSSHandler(3090): localName=content, qName=media:content
10-02 14:04:51.839: I/RSSHandler(3090): localName=credit, qName=media:credit
10-02 14:04:51.839: I/RSSHandler(3090): localName=description, qName=media:description
10-02 14:04:51.839: I/RSSHandler(3090): localName=keywords, qName=media:keywords
10-02 14:04:51.839: I/RSSHandler(3090): localName=thumbnail, qName=media:thumbnail
10-02 14:04:51.839: I/RSSHandler(3090): localName=thumbnail, qName=media:thumbnail
10-02 14:04:51.839: I/RSSHandler(3090): localName=thumbnail, qName=media:thumbnail
10-02 14:04:51.839: I/RSSHandler(3090): localName=title, qName=media:title 
```

我尝试像这样修改代码：

```
else if(qName.trim().equalsIgnoreCase("media:content") || value.equalsIgnoreCase("content")){

                if (attributes != null) {
                    mMediaContent  = new MediaContent();
                    mHrefAttribute_media = attributes.getValue("url");
                    Log.i("media url", mHrefAttribute_media);
                }
                isMedia = true;
                Log.i("media group", "media content");
            } 
```

但这不起作用。

我无法从此回复中阅读 medai:group。我试过[这个](http://www.javaworld.com/javaworld/jw-02-2012/120214-jtip-rss-for-android.html?page=2)，但我无法得到结果。谁能帮我做这件事。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:43:14.837

`media:group`包含两部分，`media`分别是命名空间前缀和`group`元素名称。

startElement 的 localName 和 qName 参数在[XML SAX 中进行了解释：在一个示例 XML 文件中解释 `qName` 和 `localName` 的结果](https://stackoverflow.com/q/9441593/1321873)

所以你可以修改你的代码如下：

```
 else if(qName.equalsIgnoreCase("media:group")){
            isMedia = true;
            Log.i("media", "media group");
        } 
```

# javascript - 让人们从移动网站恢复到桌面网站

> ID：12671208
> 
> 赞同：8
> 
> 时间：2012-10-01T10:04:11.370
> 
> 标签：javascript, html, mobile

我的网站会将访问者恢复到一个单独的移动网站，这在阅读了一些在线指南后似乎相当简单。

但是，我希望人们能够点击移动网站上的链接，然后将他们带到桌面网站。

我看到的问题是，如果我链接回桌面站点，如果它们在移动设备上，它只会将它们重定向回来？

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T20:58:26.737

你真的想在服务器端做这种事情，而不是在客户端。问题是您强制移动用户（连接可能不好）首先下载整个桌面站点（可能超过 1MB），只是为了让 javascript 重定向生效。

到那时，您的移动访问者可能已经失去耐心并且已经离开了。

我在这里写了关于这个过程的博客：[http ://www.9xb.com/blog-2012-08-6-common-pitfalls-when-deploying-a-mobile-site-and-how-they-can-be-avoided /](http://www.9xb.com/blog-2012-08-6-common-pitfalls-when-deploying-a-mobile-site-and-how-they-can-be-avoided/) - 如果你跳到文章的底部，你会看到一个描绘整个过程的流程图。此特定方法使用 cookie，但可以对其进行调整。这个流程图的美妙之处在于它是独立于语言的——你可以用任何服务器端编程风格来开发它。

为了您的方便，我在下面附上了流程图（尽管我强烈建议您阅读这篇文章）：

[http://www.9xb.com/wordpress/wp-content/uploads/2012/08/mobile-deployment-small.png](http://www.9xb.com/wordpress/wp-content/uploads/2012/08/mobile-deployment-large.png)

所有这些工作的替代方案是开发一个移动优先的响应式网站。不知道你的情况，我会留在那里 - 它并不总是适用于每一个场景。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T10:08:48.760

将重定向到移动设备设为可选（即桌面页面顶部的链接），或仅将移动设备重定向放在初始入口点，即`mydomain.com`. 如果他们去`mydomain.com/index.html`，那么不要重定向。这样一来，您的“返回桌面”链接就可以只是一个普通的链接，指向`index.html`、来自`index_mobile.html`或发送到他们的移动体验的任何地方。

就个人而言，我更希望布局足够流畅以适应任何浏览器，那么一开始就没有问题。请记住，现在有各种尺寸的平板电脑可以搅乱移动浏览领域。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T15:54:59.503

不幸的是，您无法在 window.location 更改后检查引荐来源网址。但是您可以添加一个主题标签，然后检查它。

```
if(window.location.hash == "#stayHereDude"){
    // do nothing, or whatever
} else {
    window.location = "mobile/index.html";
} 
```

然后，您将在移动页面上创建指向 /index.html#stayHereDude 的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T13:10:32.107

您应该结合用户代理方法来检测带有查询字符串的设备以实现此类功能。所以让我们假设你的链接是

```
site/default.aspx 
```

如果有人点击此页面，请检查用户代理并在响应中更好地提供适当的站点或事件如果设备检测到移动设备是否只是重定向到`m.yourdomain.com/site/default.aspx`
但如果有人点击页面 site/default.aspx?type=desktop 然后覆盖检查用户代理并呈现桌面站点的行为。

永远不要先加载桌面站点，然后通过 javascript reditect 加载到移动站点。使用用户代理服务器端执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-04T21:15:48.753

您可以使用 Cookie、会话或本地存储，这样当用户单击“转到桌面站点”时，它会设置一个值。

假设当手机上的用户单击“转到桌面站点”时，您将名称设置为“mobileOff”，并将值设置为“1”或“true”。然后，无论您在哪里进行移动检查，添加一个条件来检查用户的 cookie/session/localStorage 中的 mobileOff，如果它设置为 true，则绕过自动移动重定向，否则，加载主桌面站点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T14:51:16.163

在进行移动重定向的主页上，您需要检查 href 中是否存在将它们标记为来自移动站点的内容。在我的例子中，我使用了从移动网站到主页的链接，其末尾带有 ?m=0。例如：[http ://www.yoursite.com/?m=0](http://www.yoursite.com/?m=0)

然后，您在主页上的重定向之前检查 href 中的 m=0。如果有，请不要重定向，如果没有，请重定向到移动设备。

```
if (window.location.href.match("m=0")) { 
} else {
    window.location = "http://www.yoursite.com/mobilesite";
} 
```

如果您只是从单个页面重定向到您的移动网站，则此方法有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T10:14:02.170

静止的

```
/site/index.html
/site/mobile/index.html 
```

然后你可以使用一系列的东西。

1.  饼干
2.  会话状态
3.  用户登录和首选项设置（甚至保存数据库）

如果您使用的是静态站点，则变得更加困难，因为它会因 JavaScript 重定向和两个许多重复页面而变得混乱。发布您的代码并告诉我们您当前的设置方式，我将更新我的解决方案。

# android - IconLevel 和 startForeground

> ID：12671210
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:21.363
> 
> 标签：android, service, notifications, foreground

我想为应用程序的图标设置动画，**而不必取消通知**并创建一个新通知（因为这样图标不会停留在通知栏的同一位置，但如果有其他图标可以移动到第一位通知运行）。

我可以通过正常通知获得此信息，但是当我在服务中使用 startForeground 时，我希望获得相同的行为。此方法会启动一个无法删除的新通知，除非您使用 stopForeground 从前台删除服务。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:04:44.707

对 startForeground 方法和 Notification 对象使用相同的通知 ID。

# android - 如何让 onClick/onLongClick 事件适用于 VideoView？

> ID：12671214
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:23.957
> 
> 标签：android

我有一个 VideoView，我想在它被短按时调用一个方法`fooMethod(VideoView vv)`，但如果它被长按，则显示/隐藏视频控件。但是，VideoView 似乎没有 OnClick 或 OnLongClick 事件。

我已经实现了 onTouchListener，但我似乎只能从中获取 DOWN 和 UP 事件；似乎不支持检测点击的长度。

在onTouchListener中有区分长短点击的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-11T10:13:09.160

这有点旧，但可以帮助将来遇到同样问题的任何人。

看起来 VideoView 将 onClick/onLongClick 用于其他功能（没有对其进行足够深入的研究），因此另一种方法是使用 GestureDetectorCompat（compat，因此它适用于旧版本）手动完成。

**GestureDetectorCompat**

```
GestureDetectorCompat gestureDetectorCompat =  new GestureDetectorCompat(context, new GestureDetector.OnGestureListener() {
        @Override
        public boolean onDown(MotionEvent motionEvent) {
              /* Always return true, to indicate that the gestureDetectorCompat
               * consumed the touch and can continue to the  
               * next gestures(long, single, etc..)
               */
            return true;
        }

        @Override
        public void onShowPress(MotionEvent motionEvent) {

        }

        @Override
        public boolean onSingleTapUp(MotionEvent motionEvent) {
            return false;
        }

        @Override
        public boolean onScroll(MotionEvent motionEvent, MotionEvent motionEvent1, float v, float v1) {
            return false;
        }

        @Override
        public void onLongPress(MotionEvent motionEvent) {
            Log.i("SOME_TAG", "Longpress detected");
        }

        @Override
        public boolean onFling(MotionEvent motionEvent, MotionEvent motionEvent1, float v, float v1) {
            return false;
        }
    }); 
```

您要实现 onClick/onLongClick 的视图。

**看法**

```
view.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            // Return the result from GestureDetectorCompat so the view
            // knows if the touch was consumes or not
            return gestureDetectorCompat.onTouchEvent(motionEvent);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-04T11:19:26.283

尝试添加

```
<uses-features android:name="multi-touch" /> 
```

在你的 Manifest.xml

# playframework-1.x - 如何在 Play Morphia 中动态组合 OR 查询中的多个条件

> ID：12671220
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:38.327
> 
> 标签：playframework-1.x, morphia

我正在尝试使用一种构建器模式来构建使用多个条件的 OR 查询，具体取决于场景。一个例子是

```
 public class Stylist extends Model {

      public String firstName;

      public String lastName;

      public String status;

      ...

      } 
```

如果名字或姓氏与给定字符串匹配并且状态与另一个字符串匹配，我想搜索 Stylist 集合。我正在编写如下查询：

```
 MorphiaQuery query = Stylist.q();
      if (some condition) {
      query.or(query.criteria("status").equal("PendingApproval"), query.criteria("status").equal(EntityStatus.ACTIVE));    
      }

      if (some other condition as well) {
      query.or(query.criteria("firstName").containsIgnoreCase(name), query.criteria("lastName").containsIgnoreCase(name));
      } 
```

当这两个条件都满足时，我看到该查询仅包含与名字和姓氏相关的条件，即不添加/附加不同的 OR 条件而是覆盖。它与附加所有不同过滤条件的过滤条件完全不同，您可以轻松构建包含多个 AND 条件的查询。

我可以通过以不同的方式放置条件并以不同的方式构建查询来解决问题，但这似乎不是一种优雅的方式。难道我做错了什么 ？

我正在使用播放！框架 1.2.4 和 Play Morphia 模块版本 1.2.5a

**更新**

更清楚地说，我想 AND 多个 OR 查询。具体来说，在上述情况下，我想

我想在哪里搜索造型师：

```
firstName or lastName contains supplied name AND

status equals ACTIVE or PENDING_APPROVAL. 
```

我已经能够通过以下方式直接在 Mongo shell 上构建查询：

db.stylists.find({$and: [{$or : [{status: "PENDING_APPROVAL"}, {status : "ACTIVE"}]},{$or : [{firstName : { "$regex" : "test " , "$options" : "i"}}, {lastName : { "$regex" : "test" , "$options" : "i"}}]}] }).pretty();

但无法通过 Query API 方法实现相同的目的。这是我的尝试：

```
 Query<Stylist> query = MorphiaPlugin.ds().find(Stylist.class);

    CriteriaContainer or3 = query.or(query.criteria("firstName").containsIgnoreCase(name), query.criteria("lastName").containsIgnoreCase(name));

    CriteriaContainer or4 = query.or(query.criteria("status").equal("PENDING_APPROVAL"), query.criteria("status").equal("ACTIVE"));

    query.and(or3, or4); 
```

query.toString() 产生以下输出： { "$or" : [ { "status" : "PENDING_APPROVAL"} , { "status" : "ACTIVE"}]}

不确定，我在哪里失踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:00:37.730

我想可能有两种方法可以处理您的案件：

首先，使用`List<Criteria>`

```
MorphiaQuery query = Stylist.q();
List<Criteria> l = new ArrayList<Criteria>()

if (some condition) {
  l.add(query.criteria("status").equals("PendingApproval");
  l.add(query.criteria("status").equal(EntityStatus.ACTIVE));
}

if (some other conditional as well) {
  l.add(query.criteria("firstName").containsIgnoreCase(name));
  l.add(query.criteria("lastName").containsIgnoreCase(name));
}

query.or(l.toArray()); 
```

二、使用`CritieriaContainer`

```
MorphiaQuery query = Stylist.q();
CriteriaContainer cc = null;

if (some condition) {
  cc = query.or(query.criteria("status").equal("PendingApproval"), query.criteria("status").equal(EntityStatus.ACTIVE));
}

if (some other condition) {
  if (null != cc) query.or(cc, query.criteria("firstName").containsIgnoreCase(name), query.criteria("lastName").containsIgnoreCase(name));
  else query.or(query.criteria("firstName").containsIgnoreCase(name), query.criteria("lastName").containsIgnoreCase(name));
} 
```

# android - java.security.AccessControlException：访问被拒绝（java.net.SocketPermission android.googleapis.com:443 connect,resolve）

> ID：12671222
> 
> 赞同：0
> 
> 时间：2012-10-01T10:04:45.700
> 
> 标签：android, web-services, google-cloud-messaging

```
java.security.AccessControlException: access denied (java.net.SocketPermission android.googleapis.com:443 connect,resolve)
    java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    java.security.AccessController.checkPermission(AccessController.java:546)
    java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    java.lang.SecurityManager.checkConnect(SecurityManager.java:1034)
    sun.net.www.http.HttpClient.openServer(HttpClient.java:527)
    sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:271)
    sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:328)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
    sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:793)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
    sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:896)
    sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    com.google.android.gcm.server.Sender.post(Sender.java:468)
    com.google.android.gcm.server.Sender.post(Sender.java:447)
    com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
    com.google.android.gcm.server.Sender.send(Sender.java:121)
    com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:91)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:244)
    java.security.AccessController.doPrivileged(Native Method)
    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:276)
    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162) 
```

我来自[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/) ...所以除了这个解决方案..请帮我解决这个错误..我也已经在manifiest文件中提供了所有权限..问题是..我在网络上托管我的war文件..当我从android模拟器运行客户端pgm时..服务器注册客户端（即服务器从客户端（模拟器）获得响应但是当我将味精从服务器发送到客户端时，我遇到了上述错误）..我也使用了浏览器 api 密钥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:21:21.097

将权限放入清单文件中：

```
 <permission android:name="com.example.gcm.permission.C2D_MESSAGE"android:protectionLevel="signature"/>
        <uses-permission android:name="com.example.gcm.permission.C2D_MESSAGE" /> 
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:03:33.057

我有完全相同的错误-我已经构建了服务器端 .war 文件并将其部署在免费的 java 托管eatj 上。我的免费主机似乎没有权限

# jquery - 在 url 浏览器中输入部分名称到网站单页？

> ID：12671239
> 
> 赞同：0
> 
> 时间：2012-10-01T10:05:57.160
> 
> 标签：jquery, web

我创建了一个分为网格的网站单页，每个网格都包含一个菜单项......我想一旦你选择网格（一个菜单项）进入旁边的部分（从顶部打开，里面有内容） url 出现在浏览器菜单项中。

例子：

在单击菜单项之前：namesite.com 在单击菜单项之后：namesite.com / about

目前，如果我点击一个菜单项会打开正确的课程部分，但是浏览器的 url 保持不变或 namesite.com

做我上面写的最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:13:50.390

`pushState`是你所追求的。

[http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate?6dde2bc8](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate?6dde2bc8)

# jquery - jQuery - 获得第一次加载

> ID：12671241
> 
> 赞同：1
> 
> 时间：2012-10-01T10:06:03.903
> 
> 标签：jquery, ruby-on-rails, load

我在 Rails 中有注册页面，当用户单击`Next`链接时，我会在其中显示和隐藏 div。在注册的第三步，表单被提交，此时会显示默认的 div。我想跳到另一个div。

如何检查页面是否已加载，如果已加载，则应隐藏默认 div？

这是我的代码

```
$(document).ready(function () {
$("#admin_new").validationEngine();
$("#next_step_personal").click(function (e) {
    if ($('div.field_with_errors').size() > 0) {
        alert("Please correct the errors");
        return false;
    }
    else {
        e.preventDefault();
        $("#personal_info").hide();
        $("#account_info").show();
        $("#subscription").hide();
    }
});
$("#billing_info").click(function (e) {
    if ($('div.field_with_errors').size() > 0) {
        alert("Please correct the errors");
        return false;
    }
    else {
        e.preventDefault();
        $("#personal_info").hide();
        $("#account_info").hide();
        $("#subscription").show();
    }
});
$("#prev_billing").click(function (e) {
    e.preventDefault();
    $("#personal_info").show();
    $("#account_info").hide();
    $("#subscription").hide();
});
$('#subscription_l').click(function () {
    $('#admin_new').submit();
    $("#personal_info").hide();
    $("#account_info").hide();
    $("#subscription").hide();
    $("#purchase_code").show();
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:39:45.643

像这样的东西？

```
if($('#defaultDiv').is(':visible')) {
    // jump to desired div
} 
```

如果您的“defaultDiv”对用户可见，则该函数将被执行。您可能也应该将“defaultDiv”隐藏为该功能的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:34:53.277

你试过这个吗？

```
$(function(){ // -> this happens only when page has finished loading
  $(<selector_for_default_div>).hide();
}) 
```

# scala - 如何向其他 Anorm 支持的类添加惰性关系

> ID：12671245
> 
> 赞同：2
> 
> 时间：2012-10-01T10:06:13.877
> 
> 标签：scala, playframework, anorm

问题：**如何添加从一个 Anorm 支持的类到另一个类的惰性关系？**

我想有一个从 Anorm 支持的类到另一个类/表的惰性关系。因此，当我有一个 Foo 并执行 getBar 时，SQL 查询将立即被触发。我确信这是一个新手问题，但是关于 Anorm 的文档很少，但它似乎是 Play on Scala 的首选持久层。

# wix - WiX：提示用户安装 .NET 先决条件的简单方法

> ID：12671246
> 
> 赞同：2
> 
> 时间：2012-10-01T10:06:14.880
> 
> 标签：wix

我目前有一个使用 WiX 构建的工作 .msi，它有一个我非常满意的用户界面。唯一缺少的是检测是否缺少 .NET 4.5 以及：

*   使用嵌入式 Web 设置安装它，或者
*   将用户引导至 .NET 4.5 下载

我之前使用的安装和部署项目只是将它添加为带有 URL 的 LaunchCondition，并且运行良好。

如何在不借助引导程序的情况下将其添加到 WiX 安装程序。据我所知，使用像burn这样的引导程序需要重新实现一个新的用户界面，同样像dotNetInstaller这样的工具也会引入一个新的用户界面。

如果我可以让引导程序不实现它自己的 UI，而是触发 .NET 安装，那么打开 msi 的当前用户界面，它也适用于我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:42:53.293

这是我最终使用的代码......尚未经过全面测试！

产品.wxs：

```
 ...
    <!-- custom actions -->
    <InstallUISequence> <!-- .NET dialog runs only in UI mode and we skip it on the wrong platform so platform condition test is triggered later -->
      <?if $(var.Platform) = x64 ?>
      <Custom Action="InstallCA" Before="LaunchConditions">(NOT REMOVE~="ALL") AND NOT (Installed OR NETFRAMEWORK45) AND VersionNT64</Custom>
      <?elseif $(var.Platform) = x86 ?>
      <Custom Action="InstallCA" Before="LaunchConditions">(NOT REMOVE~="ALL") AND NOT (Installed OR NETFRAMEWORK45) AND NOT VersionNT64</Custom>
      <?endif?>
    </InstallUISequence>
  </Product> <!-- end product -->

  <Fragment>
    <Binary Id="WiXCustomActions" SourceFile="$(var.WiXCustomActions.TargetDir)$(var.WiXCustomActions.TargetName).CA.dll" />
    <CustomAction Id="InstallCA" BinaryKey="WiXCustomActions" DllEntry="DotNetCheck" Execute="firstSequence" />
  </Fragment> 
```

以及自定义操作（在 C# 类库中）：

```
 [CustomAction]
    public static ActionResult DotNetCheck(Session session)
    {
        try
        {
            MessageBoxResult result = System.Windows.MessageBox.Show(
                "This application requires that .NET Framework 4.5 is installed." + Environment.NewLine
                + "Would you like to open the Microsoft download page for" + Environment.NewLine + ".NET Framework 4.5?",
                ".NET Framework 4.5 is missing",
                MessageBoxButton.YesNo, MessageBoxImage.Information, MessageBoxResult.No, MessageBoxOptions.DefaultDesktopOnly);
            switch (result)
            {
                case MessageBoxResult.Yes:
                    System.Diagnostics.Process.Start("http://go.microsoft.com/fwlink/p/?LinkId=245484");
                    break;
            } //else just finish
        }
        catch (Exception ex)
        {
            session.Log("Error. " + ex.Message);
            System.Windows.MessageBox.Show("Error:" + ex.Message);
        }
        return ActionResult.SkipRemainingActions;
    } 
```

它对我来说足够好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:59:33.830

会给你一个答案，我相信人们会拒绝投票，但我也想保留 MSI 的 UI，所以我添加了这个代码来启动硬件密钥的 exe 安装程序。我知道这违反了 MSI 最佳实践，但这是我唯一打算打破的。希望这可以帮助。

```
<Property Id="WixShellExecTarget" Value="[#myapplication.exe]" />
<CustomAction Id="LaunchApplication" BinaryKey="WixCA" DllEntry="WixShellExec" Impersonate="yes" /> 
```

然后我通过单击按钮运行自定义操作。您可以生成一个带有下载按钮的错误对话框并通过它链接它。一点也不优雅，但它适用于我和我的公司作为一种解决方法..:)

编辑：您还可以通过单击按钮使用此代码来启动下载 URL，该`Value`属性具有完整的超链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T16:14:51.617

还有一件重要的事情，当你将创建这个 DLL 库时

> 以及自定义操作（在 C# 类库中）：

需要添加下一个参考：

```
using WixSharp    
using Microsoft.Deployment.WindowsInstaller
using System.Windows.Forms 
```

还将“MessegeBoxResult”替换为“DialogResult”，并且 MessegeBox 应该从 System.Windows.Forms 类中获取

# php - 在 PHP 中过滤或排序多维数组

> ID：12671247
> 
> 赞同：0
> 
> 时间：2012-10-01T10:06:15.987
> 
> 标签：php, multidimensional-array

如果我有两个数组如下：

```
$array1 = array(array('id'=>11,'name'=>'Name1'),array('id'=>22,'name'=>'Name2'), array('id'=>33,'name'=>'Name3'),array('id'=>44,'name'=>'Name4'),array('id'=>55,'name'=>'Name5'));

$array2 = array(array('id'=>22,'name'=>'Name2'),array('id'=>55,'name'=>'Name5')); 
```

我的预期结果，array2 应该总是在开头：

```
$newarray = array(array('id'=>22,'name'=>'Name2'),array('id'=>55,'name'=>'Name5'), array('id'=>11,'name'=>'Name1'), array('id'=>33,'name'=>'Name3'),array('id'=>44,'name'=>'Name4'));

My current solution is using two for loops:
foreach($array2 as $Key2 => $Value2) {       

    foreach($array1 as $Key1 => $Value1){            

        if($Value1['id'] != $Value2['id']) {
            //push array 

        }    
    }    
} 
```

编辑：结果“$newarray”不应包含来自 array1 的重复 ID。

但我正在寻找更快更简单的解决方案。

**解决方案：**

$a1 = 数组（）；foreach ($array1 as $v) $a1[$v['uuid']] = $v;

$a2 = 数组（）；foreach ($array2 as $v) $a2[$v['uuid']] = $v;

$filtered = array_values(array_diff_key($a1, $a2)); //print_r($filtered);

$newarray = array_merge($array2, $filtered);

感谢你们！！！！

谢谢。

问候杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:09:19.230

你想把`$new_array = array_merge($array2, $array1);`第二个数组放在第一个数组的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:09:00.660

您可以为此使用[**array_merge()**](http://php.net/manual/en/function.array-merge.php)函数，如下所示：

```
$newarray = array_merge($array2, $array1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:12:49.743

我不确定您的要求，但要在某些特定键上对多维数组进行排序您需要使用`usort`函数尝试以下代码：

```
$cmp = function ($a, $b){  
    $a_val = $a['id'];  
    $b_val = $b['id'];

    if ( $a_val == $b_val) {
        return 0;
    }
    return ($a_val < $b_val) ? -1 : 1;
};
usort($array2,$cmp); 
```

$array2 将按 'id' 排序

# iphone - Three20 构建错误

> ID：12671253
> 
> 赞同：0
> 
> 时间：2012-10-01T10:07:02.163
> 
> 标签：iphone, ios, three20

我可以成功执行命令：

```
python Three20/src/scripts/ttmodule.py -p test320/Test320.xcodeproj Three20 
```

并且项目有文件信息。但我不能建造。我不知道为什么。有任何想法吗？

图片：

![](../Images/be69d5ab46fecef59f2260c1bcf84c5f.png) ![](../Images/c82e9ba250840cac6fa046a33c70db67.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:30:27.837

只需将此代码注释掉即可。这是已知问题。

更多信息： [https](https://github.com/facebook/three20/issues/802) ://github.com/facebook/three20/issues/802 和： [https ://github.com/facebook/three20/pull/809](https://github.com/facebook/three20/pull/809)

# extjs - Extjs 4 - 菜单内的 FormPanel - 焦点问题

> ID：12671259
> 
> 赞同：0
> 
> 时间：2012-10-01T10:07:21.400
> 
> 标签：extjs, extjs4

我有表单面板作为菜单项。问题是它不断失去焦点，并且像选项卡这样的标准导航控件不起作用。是否有某种配置可以使这项工作？注意我扩展了 Ext.panel.Panel 而不是 Ext.form.Panel。当我使用第二个时，我得到了`origin.on is not a function`。这是代码：

```
this.tbar = [{
    xtype: 'tbfill'
}, {
    xtype: 'tbseparator'
}, {
    xtype: 'button',
    text: 'Wyszukiwanie',
    iconCls: 'icon-magnifier',
    menu: {
        focusOnToFront: true,
        items: [{
            xtype: 'decision_quicksearch',
            title: 'Panel wyszukiwania',
            iconCls: 'icon-magnifier',
        }]
    },
    listeners: {
        afterrender: function () {
            //register this btn to quicksearch panel so we can hide menu when search button is clicked
            Ext.apply(this.menu.items.items[0], {
                parentComponent: this
            });
        }
    }
}]; 
```

和形式：

```
Ext.define('GSIP.view.decisions.DecisionQuickSearchPanel' ,{
    extend: 'Ext.form.Panel',   
    alias : 'widget.decision_quicksearch',
    layout:'anchor',
    title:'Wyszukiwanie decyzji',
    frame:true,
    width:300,
    defaults: {
        anchor: '100%'
    },
    style: {
        marginLeft: 'auto',
        marginRight: 'auto'
    },
    bodyPadding:20,

    initComponent: function() {

        this.addEvents('quicksearch');

        this.items = this.createForm();

        this.buttons = [{
            text:'Szukaj',
            iconCls:'icon-magnifier',
            scope:this,
            handler:this.processForm
        }],

        this.callParent(arguments);

    },
    createForm:function() {

        var items = [{
            xtype:'textfield',
            fieldLabel:'Znak',
            labelWidth:40,
            name:'sign'
        },{
            xtype:'textfield',
            fieldLabel:'Numer',
            labelWidth:40,
            name:'number'
        },{
            xtype:'textfield',
            fieldLabel:'Rok',
            labelWidth:40,
            name:'suffix',
        }];

        return items;
    },
    processForm:function() {
        var result = this.buildFilter();
        this.fireEvent('quicksearch', result);
        this.parentComponent.hideMenu();
    },
    buildFilter:function() {
        var sign =  this.down('textfield[name=sign]').getValue();
        var number =  this.down('textfield[name=number]').getValue();
        var suffix =  this.down('textfield[name=suffix]').getValue();

        var result = new Array();
        var res = {
                name:'documents.sign',
                valuesType:'string',
                filterType:'like',
                values:[{id:1, value:sign}]
        };
        result.push(res);

        var res = {
                name:'documents.number',
                valuesType:'string',
                filterType:'like',
                values:[{id:1, value:number}]
        };
        result.push(res);

        var res = {
                name:'documents.suffix',
                valuesType:'string',
                filterType:'like',
                values:[{id:1, value:suffix}]
        };
        result.push(res);

        return result;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:54:40.640

我已经完成了类似的功能，但方式不同。我所做的只是让按钮生成一个`Ext.Window`没有标题和有限边框的按钮，并将其放置在打开的按钮下方。然后，您可以使用`MouseOut`事件来关闭窗口，它将像菜单一样运行，或者您可以将标题放在底部并放置一个关闭工具并让窗口“固定”。

```
buttonClick: function (btn, e, opts) {
    var popUpWindow = Ext.create('Ext.window.Window', {
        width: 450,
        maxHeight: 400,
        resizable: false,
        closable: false,
        title: 'Report Filters',
        headerPosition: 'bottom',
        border: false,
        draggable: false,
        bodyStyle: 'background:white;padding:5px;',
        items: [ 
    //...your form
    ]
    });
    popUpWindow.showAt(btn.getBox(false).x - 3, btn.getBox(false).y - 7);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:01:16.653

这就是我的结果。这似乎就像我在使用菜单但使用 ViaoV 提供的方法一样

```
var me = this;

this.popUpWindow = Ext.create('Ext.window.Window', {
    resizable: false,
    closable: false,
    constrainHeader: true,
    title: 'Panel wyszukiwania',
    iconCls: 'icon-magnifier',
    border: false,
    draggable: false,

    items: [{
         xtype: 'decision_quicksearch',
         listeners: {
             afterrender:function(me) {
                 Ext.getDoc().on('mousedown', function(o) {
                     console.log('mousedown');
                     if (!o.within(me.getEl())) {
                         me.parentComponent.toggle(false);
                     }
                 })
//               me.getEl().on('blur', function() {
//                   console.log('blur');
//                   me.parentComponent.toggle(false);                  
//               });
             }
         },
       }]
});

this.tbar = [{
    xtype:'tbfill'
}, {
    xtype:'tbseparator'
}, {
    xtype:'button',
    text:'Wyszukiwanie',
    iconCls:'icon-magnifier',
    enableToggle:true,
    menu: { },
    listeners:{
        afterrender:function() {
        //register this btn to quicksearch panel so we can hide menu when search button is clicked
        Ext.apply(me.popUpWindow, {
                parentComponent:this
        });
        },
        toggle: function(btn, pressed) {
         if (pressed) me.popUpWindow.showAt(btn.getBox(false).x - 3, btn.getBox(false).y + btn.getBox(false).height);
         else me.popUpWindow.hide();
        }
    }
}]; 
```

**编辑：**经过一些测试，我最终得到的解决方案不是一个好的解决方案。我的面板中有组合框，它们由 boundlist 定义为另一个 dom，所以当我从 cbox 中选择项目时 !o.within(me.getEl()) 评估为 true 并隐藏我的面板。当用户单击窗口隐藏的其他位置时，我真的需要该功能。

# zend-form - 在 Zend Framework 2 中使用 Zend Forms 选择多选项

> ID：12671261
> 
> 赞同：0
> 
> 时间：2012-10-01T10:07:30.633
> 
> 标签：zend-form, zend-framework2

是否有一个示例说明我如何使用 Zend Fanework 2 中的 Zend Forms 来使用 select mulitoptions。我有一个要求，我需要用数据库中的数据填充选择框并为用户提供选择多个选项的选项，这样当用户选择他的选项并提交时，我想将它存储在另一个表中。我刚刚描述了我的要求，我知道所有这些东西如何与普通的 PHP、MySQL 和 HTML 一起工作。由于我最近深入研究了 Zend Framework 2，因此搜索了 Zend Framework 2 官方网站并找到了使用“ **Select** ”的示例，但没有选择多选项。如果有人可以指导我如何解决这个问题，他们的努力将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:17:56.007

如果我正确理解了您的问题，我将从查看`Zend\Form\Element\Collection`元素类开始。

有一个很好的教程/资源使用 Collection 元素： [http ://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.collections.html](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.collections.html)

与其使用元素的类名来定义`target_element`，不如创建一个实例`Zend\Form\Element\Select`并使用它填充下拉值`setValueOptions()`，并将其作为 target_element 传递。

本教程使用 JavaScript 将新项目添加到集合中。

# c# - 如何将 Designer.cs 包含到 C# 的主类中

> ID：12671268
> 
> 赞同：0
> 
> 时间：2012-10-01T10:07:48.053
> 
> 标签：c#, visual-studio-2010, designer, resx

当我在 Visual Studio 中创建一个空项目时，有一个 Form1.cs，其中包含子文件 Form1.designer.cs 和 Form1.resx。

当我经常从 CodeProject 下载一些示例代码时，Designer.cs 不存在，而设计器的代码包含在 Form1.cs 中。我试图这样做，但是当我想查看 Form1.cs[Design] 选项卡时，我得到了 Visual Studio 的错误。

如何实现设计器代码位于 Form1.cs 而不是单独的文件中？

另外：Visual Studio 在项目文件夹中创建我的解决方案文件，在子文件夹中创建项目文件。在示例代码中，通常所有文件都在同一个目录中。

我怎样才能做到这一点？

补充：这是一个示例 Main.cs 的链接，其中设计器代码集成到 [Main.cs](http://dl.dropbox.com/u/60191046/Main.cs)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:17:47.503

只需将代码从 Form1.Designer.cs 剪切并粘贴到 Form1.cs

Form1.Designer.cs 和 Form1.cs 都实现了 Form1 类。他们使用关键字`partial`将声明拆分为两个文件。原因是将设计器生成的代码与您手动编写的代码分开。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-06-03T16:25:59.467

添加新的类项并将其命名

```
<<Class Name>Class Name>.designer.cs 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-01T10:17:05.063

当您在表单中包含控件时，您不能包含 Designer 类，因为它是由 Visual Studio 生成的。

如果您下载了没有 Designer.cs 的内容，那么该表单必须是未使用的。

**附加一。**它是 VS 创建的目录结构，因此您可以将项目文件或解决方案文件移动到您想要的任何位置。

# php - 如何使用 xgettext 如何解析目录？

> ID：12671270
> 
> 赞同：4
> 
> 时间：2012-10-01T10:07:58.583
> 
> 标签：php, gettext

在手册中有一个用于解析目录的选项 -D 但是当我执行 `xgettext -D /home/cawa/www/zf2/' 时出现错误输入文件丢失？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:40:34.903

答案是

```
find /home/cawa/www/deploy/module/Nav/ -type f \( -name '*.php' -or -name '*.phtml' \)  -print > list
xgettext --files-from=list --language=PHP -j messages.po 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-08T13:35:59.547

您可以使用此 cmd 递归地获取目录中的所有文件。

```
find . -iname "*.py" | xargs xgettext --from-code utf-8 -o messages.pot 
```

# windows-8 - 在 Window 8 中使用 Popup 控件

> ID：12671271
> 
> 赞同：0
> 
> 时间：2012-10-01T10:08:01.537
> 
> 标签：windows-8, microsoft-metro

> 是否有任何弹出属性，我们可以在其中调暗窗口应用程序。与 Metro 应用程序一样，没有可用的子窗口控件，因此使用弹出窗口代替它，但弹出窗口中的问题是，当它打开时，用户仍然可以与窗口应用程序上的其他控件进行交互。

```
So is there an workaround to make the window app dim when pop is open. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:22:28.997

我不确定你想做什么。您可以将 Border 作为公开 Background 属性的弹出窗口的第一个子项。因此，如果您指定一个非空背景（例如透明），弹出窗口将捕获每个交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:56:55.603

听起来您想要[MessageDialog](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog)类。弹出窗口是非模态的，让用户只需点击离开它即可关闭它。MessageDialog 是一个常规的模式弹出窗口，在显示时不会让用户与应用程序的其余部分进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:18:24.417

如果您真的坚持使用弹出控件，这里有一个简单的解决方法：

使弹出窗口使用整个屏幕（使用网格或边框），然后将该背景设置为黑色，不透明度为 0.1（或您认为合适的任何其他颜色，这是为了提供“暗淡”效果），然后在此弹出窗口中，放置另一个具有您想要充当“真实”弹出窗口的大小和边距的容器。

因为弹出窗口占据了整个屏幕，所以它会阻止用户点击屏幕上的任何地方。

# tsql - 最佳实践内部选择

> ID：12671272
> 
> 赞同：1
> 
> 时间：2012-10-01T10:08:02.127
> 
> 标签：tsql

在此示例中，我将连接两个表。

```
DECLARE @AA TABLE
        (
            A1 INT,
            A2 INT
        )       
DECLARE @BB TABLE
        (
            B1 INT,
            B2 INT
        )

INSERT INTO @AA values (1,1)    
INSERT INTO @AA values (2,2)    
INSERT INTO @AA values (3,3)    

INSERT INTO @BB values (1,1)    
INSERT INTO @BB values (2,2)    
INSERT INTO @BB values (3,3)

SELECT A1, A2, B1, B2 from @AA a
        JOIN @BB b on b.B1 = a.A1
        where 1=1
        and a.A1 in (1,2)
        and b.B1 in (select max(bb.B1) from @BB bb JOIN @AA aa on bb.B1 = aa.A1 where aa.A1 in (1,2)) 
```

上面的代码正在工作，因为我正在寻找结果：“2,2,2,2”

有没有更有效的方法来做到这一点？内部选择与外部选择几乎相同，对我来说它看起来不太好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:11:11.333

你可以使用

```
SELECT TOP 1 WITH TIES A1,
                       A2,
                       B1,
                       B2
FROM   @AA a
       JOIN @BB b
         ON b.B1 = a.A1
WHERE  a.A1 IN ( 1, 2 )
ORDER  BY b.B1 DESC 
```

而不是运行一次查询以获取`max(B1)`然后使用过滤器中针对同一查询的结果。

# http - 使用 RESTful Web 服务隐藏 GET 参数

> ID：12671274
> 
> 赞同：0
> 
> 时间：2012-10-01T10:08:08.917
> 
> 标签：http, rest, jsf-2, get, jersey

前段时间我发布了一个关于隐藏 GET 参数的问题，但从未得到任何回复。 [使用 POST 将用户重定向到 Instagram 登录](https://stackoverflow.com/questions/12454981/redirect-a-user-to-instagram-login-using-post)

关于同样的问题，我认为我可以使用 RESTful Web 服务来隐藏我的 GET 参数来解决它。

我能够向 instagram 发出 RESTful GET 请求，但问题是，instagram 在收到 GET 请求后，假设重定向回我的 Web 应用程序到指定的 URL。

如何使用 RESTful Web 服务实现这一点？因为我确实收到了包含 HTTP 状态代码的响应，但是我如何实现假设从 Instagram 发生的重定向。

谢谢

环境：**Java 1.6，JSF-2，泽西岛**

# jsf - 在循环中为 h:dataTable 生成唯一 id

> ID：12671278
> 
> 赞同：2
> 
> 时间：2012-10-01T10:08:19.073
> 
> 标签：jsf, jsf-2

我正在使用 JSF 2.0。当我尝试在 h:dataTable 的 'id' 属性中使用变量时，它不采用该变量值。

我在 ui:repeat 中有 h:dataTable，其中 id 值作为 ui:repeat 的索引，如下所述。

```
 <ui:repeat var="planMap" value="#{planAccountMap.entrySet().toArray()}" varStatus="planMapStatus">

    <h:dataTable id="planTable#{planMapStatus.index}" value="#{planMap.value}" var="accountList"> 
```

有谁知道我们是否可以在循环中为 h:dataTable 生成动态 id？

我有一个使用表 id 的 Java 脚本，但由于我无法为循环中的每个表拥有唯一的 id，因此它会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:09:32.727

可重复组件内的任何组件都将始终具有动态客户端 ID。你不能做这个。

也许您可以为 dataTable 组件分配一个独特的样式类，并使用 jQuery 选择器返回一个包含`ui:repeat`.

```
jQuery('.SomeClass'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:31:53.403

我做了一些和你很相似的事情。我有一个 UI：在数据表列中重复。tbh，如果您签入 fire bug，您的数据表 ID 将是唯一的，因为您将其放入 ui:repaet 中。

```
planMap:0:yourdatatableID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:34:33.673

这个问题可以通过在datatable里面使用datatable来解决。第二个数据表保存在第一个数据表的列内，如下所示。

```
<h:dataTable id="outerTable" value="#{planAccountMap.entrySet().toArray()}" var="planMap" width="100%">
  <h:column> 
  <h:dataTable id="planTable" value="#{planMap.value}" var="accountList"
  headerClass="tablehead" 
  rowClasses="'',altrowcoloropt1"
  first="0">
    <h:column>
    <f:facet name="header">
        <h:outputText value="Date" />
    </f:facet>
        <h:outputText value="#{accountList.date}"/>
    </h:column>
    <h:column>
      <f:facet name="header" >
        <h:outputText value="Account Name" />
    </f:facet>
    <h:outputText value="#{accountList.accountName}"/>
  </h:column>
</h:dataTable>
</h:column>
</h:dataTable> 
```

这样，您将获得唯一 id `outerTable:0:planTable`。`outerTable:1:planTable`这甚至将唯一 id 扩展到数据表中的每个元素`outerTable:1:planTable:1:columnid`，`outerTable:0:planTable:0:columnid`

# java - 我想通过 ant 输入密码，我尝试使用，

> ID：12671280
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, ant

我想通过 ant 输入密码，我尝试使用，`<input message`但它显示输入的字符/密码。

我不想显示输入的字符，而是想显示“*”字符，任何人都可以告诉我这是怎么可能的。

谢谢， rbhawsar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:32:56.130

`<handler/>`从 Ant 1.8 开始，您可以在标签内指定一个附加标签`<input/>`，类型为“secure”：

```
<target name="test.input">
  <input message="Type password:" addproperty="pwd">
    <handler type="secure" />
  </input>
  <echo message="Password is: ${pwd}" />
</target> 
```

请参阅[文档](http://ant.apache.org/manual/Tasks/input.html)。甚至可以编写自己的输入处理程序类。

我在 Windows DOS 框中对其进行了测试，它工作正常。但它无法在 cygwin xterm 会话中工作（显示字符）。

# ldap - 使用 ldap 身份验证的 MS Access 2010

> ID：12671288
> 
> 赞同：0
> 
> 时间：2012-10-01T10:08:54.467
> 
> 标签：ldap, ms-access-2010

我正在尝试使用用户名和密码在 ms access 2010 中进行 ldap 身份验证。我似乎无法弄清楚这一点，并在网上尝试了不同的代码，但似乎都没有。任何人都可以帮忙吗？

以下是我从[这里获取的内容](http://www.utteraccess.com/forum/LDAP-Authentication-t1844479.html)

```
Function CheckUser(username As String, passwd As String, Level As Integer) As Boolean

    On Error GoTo LDAP_Error

    username = "sharifu"
    passwd = "xxx"

    Const ADS_SCOPE_SUBTREE = 2

    Dim LDAPPath As String
    LDAPPath = "LDAP://172.16.0.12/OU=Sites;DC=domain;DC=com"

    Dim conn As ADODB.Connection
    Dim cmd As ADODB.Command
    Dim rs As ADODB.Recordset

    Set conn = New ADODB.Connection
    Set cmd = New ADODB.Command
    conn.Provider = "ADsDSOObject"

    conn.Properties("User ID") = "domain\" & username
    conn.Properties("Password") = "" & passwd
    conn.Properties("Encrypt Password") = True
    'conn.Properties("ADSI Flag") = 3

    conn.Open "Active Directory Provider"
    Set cmd.ActiveConnection = conn

    cmd.Properties("Page Size") = 1000
    cmd.Properties("Searchscope") = ADS_SCOPE_SUBTREE

    cmd.CommandText = _
    "SELECT Name FROM '" & LDAPPath & "' WHERE " & "objectCategory='user'"

    Set rs = cmd.Execute

    rs.Close
    conn.Close

    CheckUser = True
    Exit Function

LDAP_Error:

    If Err.Number = -2147217911 Then

    MsgBox "Incorrect PeopleSoftID or Password!", vbExclamation, "HILDA"

    Else

    MsgBox "Error : " & Err.Description & " " & Err.Number, vbExclamation, "HILDA"

    End If
    CheckUser = False

    conn.Close

End Function 
```

我收到的错误是

“错误：服务器无法运行。-2147217865”

更改为ip地址现在出现以下错误

`Method 'ActiveConnection' of object '_Command' failed`但它可能来自我代码中的其他地方。我将如何检查 ldap 是否成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T11:45:22.750

我有固定的问题。

```
Function CheckUser(UserName As String, passwd As String, Level As Integer) As Boolean

    On Error GoTo LDAP_Error

    Const ADS_SCOPE_SUBTREE = 2

    Dim LDAPPath As String
    LDAPPath = "LDAP://akutan.country.domain.com/OU=Sites;DC=domain;DC=com"

    Dim conn As ADODB.Connection
    Dim cmd As ADODB.Command
    Dim rs As ADODB.Recordset

    Set conn = New ADODB.Connection
    Set cmd = New ADODB.Command
    conn.Provider = "ADsDSOObject"
    conn.Properties("User ID") = "xxx\" & UserName
    conn.Properties("Password") = "" & passwd
    conn.Properties("Encrypt Password") = True
    'conn.Properties("ADSI Flag") = 3
    conn.Open "Active Directory Provider"

    Set cmd.ActiveConnection = conn
    cmd.Properties("Page Size") = 1000
    cmd.Properties("Searchscope") = ADS_SCOPE_SUBTREE
    cmd.CommandText = "SELECT Name FROM '" & LDAPPath & "' WHERE " & "objectCategory='user'"

    Set rs = cmd.Execute
    rs.Close
    conn.Close

    CheckUser = True
    [TempVars]![CurrentUser] = UserName
    Call LogUser([TempVars]![CurrentUser], "Logon")
    Exit Function

LDAP_Error:

    If Err.Number = -2147217911 Then
        MsgBox "Incorrect PeopleSoftID or Password!", vbExclamation, "LDAP Authentication"
    Else
        MsgBox "Error : " & Err.Description & " " & Err.Number, vbExclamation, "LDAP Authentication"
    End If

    CheckUser = False
    conn.Close

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T17:28:31.570

为理解此代码和正确运行进行一些更改和解释：

1.  添加了检查用户是否存在于数据库中。
2.  将 LDAP 路径中的“OU=Sites”更改为“CN=Users”。

LDAPPath = "LDAP://**替换为 IP 或 DNS 名称**/CN=Users;DC=**替换为不带 .com 的域名**；DC=**替换为 com、net 或根节点名**"

3.  在 IP 或 DNS 名称中，您必须指定服务器 IP 或 DNS 名称。
4.  在第一个“DC”中，您必须指定不带 .com 或 .net 的域名，如“google”。
5.  在第二个“DC”中，你必须为实例“com”指定域类型，[如果你想知道什么意思可以看这篇文章](https://stackoverflow.com/questions/18756688/what-are-cn-ou-dc-in-an-ldap-search)

完整示例：

```
LDAPPath = "LDAP://200.201.1.1/CN=Users;DC=google;DC=com" 
```

或者

```
LDAPPath = "LDAP://ldap.google.com/CN=Users;DC=google;DC=com" 
```

6.  在这一行： conn.Properties("User ID") = " **replace with domain short name** \" & userName

`conn.Properties("User ID") = "ggle\" & userName`

最后这是完整的代码：

```
 Function ldapAuth(userName As String, passwd As String, level As Integer) As Boolean

    On Error GoTo LDAP_Error
    ldapAuth = False

    If Not IsNull(userName) And Not IsNull(passwd) Then

    'Check if the user exist in DB
    Dim db As DAO.Database
    Dim rst As DAO.Recordset
    Dim qdf As QueryDef
    Dim strSQL As String

    Set dbs = CurrentDb

    strSelect = "SELECT *"
    strFrom = " FROM employee"
    strWhere = " WHERE user_name = '" & userName & "';"
    strSQL = strSelect & strFrom & strWhere

    Debug.Print strSQL

    Set rst = dbs.OpenRecordset(strSQL, dbOpenDynaset)
    'If the recordset is empty, exit.
    If rst.EOF Then
        MsgBox "The user not exist in the DataBase!!!"
    Else
        'Check user with LDAP
        Const ADS_SCOPE_SUBTREE = 2

        Dim LDAPPath As String
        LDAPPath = "LDAP://ldap.google.com/CN=Users;DC=google;DC=com"

        Dim conn As ADODB.Connection
        Dim cmd As ADODB.Command
        Dim rs As ADODB.Recordset

        Set conn = New ADODB.Connection
        Set cmd = New ADODB.Command
        conn.Provider = "ADsDSOObject"
        conn.Properties("User ID") = "ggle\" & userName
        conn.Properties("Password") = "" & passwd
        conn.Properties("Encrypt Password") = True
        'conn.Properties("ADSI Flag") = 3
        conn.Open "Active Directory Provider"

        Set cmd.ActiveConnection = conn
        cmd.Properties("Page Size") = 1000
        cmd.Properties("Searchscope") = ADS_SCOPE_SUBTREE
        cmd.CommandText = "SELECT Name FROM '" & LDAPPath & "' WHERE " & "objectCategory='user'"

        Set rs = cmd.Execute
        rs.Close
        conn.Close

        'Set userId and Role Globally
        employeeId = rst![id]
        employeeType = rst![employee_type]
        TempVars.Add "employeeId", employeeId
        TempVars.Add "employeeType", employeeType

        'Log user login and role
        Debug.Print "User login: " & TempVars!employeeId
        Debug.Print "User Role: " & TempVars!employeeType

        ldapAuth = True

        rst.Close

      End If

    End If

    Exit Function

    LDAP_Error:

    If Err.Number = -2147217911 Then
    'MsgBox "Incorrect User or Password!", vbExclamation, "LDAP Authentication"
    Else
    MsgBox "Error : " & Err.Description & " " & Err.Number, vbExclamation, "LDAP Authentication"
    End If

    conn.Close

    End Function 
```

# spring - 让控制器返回对象的糟糕设计？

> ID：12671289
> 
> 赞同：1
> 
> 时间：2012-10-01T10:08:54.970
> 
> 标签：spring, spring-mvc, spring-3

嗨，这是糟糕的设计吗？如果一切按计划进行，我想返回 Profile。如果不是，我想返回我的自定义错误消息。

这个可以吗？

```
@RequestMapping(value = "/{userId}", method = RequestMethod.PUT)
public @ResponseBody
Object saveUser(@PathVariable Long userId, ModelMap data, @Valid Profile profile, BindingResult bindingResult, HttpServletResponse response) {

    if (bindingResult.hasErrors()) {
        response.setStatus(HttpServletResponse.SC_BAD_REQUEST);
        return ValidationUtil.createValidationErrors(bindingResult);
    }
    profileService.save(profile);
    return profile;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:19:38.207

您应该使用 **@ExceptionHandler (Exception.class) 和 @ResponseStatus 注解**

例子

```
@ExceptionHandler (Exception.class) 
@RequestMapping(value = "/{userId}", method = RequestMethod.PUT) 
public @ResponseBody 
Profile saveUser(@PathVariable Long userId, ModelMap data, @Valid Profile profile, BindingResult bindingResult, HttpServletResponse response) { 

    if (bindingResult.hasErrors()) { 
        response.setStatus(HttpServletResponse.SC_BAD_REQUEST); 
        throw new Exception("message");
        if(ValidationUtil.createValidationErrors(bindingResult)) {
            throw new Exception("message");
        }
    } 
    profileService.save(profile); 
    return profile;
} 
```

有关更多详细信息，请参阅

[http://jnb.ociweb.com/jnb/jnbNov2010.html](http://jnb.ociweb.com/jnb/jnbNov2010.html)

[http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-1](http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-1)

[http://blog.cuttleworks.com/2011/12/spring-restful-controllers-and-error-handling/](http://blog.cuttleworks.com/2011/12/spring-restful-controllers-and-error-handling/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:18:06.667

如果您需要访问配置文件对象，我建议您将其添加到会话或请求上下文中。然后，您可以从 saveUser 方法（或 ModelAndView 对象，如果您愿意）返回一个字符串，并且该对象仍可用于以后的请求。

# android - 如何在操作栏选项卡中显示选定的片段

> ID：12671291
> 
> 赞同：6
> 
> 时间：2012-10-01T10:09:01.210
> 
> 标签：android, android-actionbar

我面临一个关于标签滑动的问题。我的项目是基于 Android 3.2 构建的。我正在使用支持库 4.0 (android-support-v4.jar) 实现标签滑动。实现的一切都运行良好，但是当我将我的应用程序部署到 ICS 设备时，在纵向模式下，我会在操作栏中获得一个用于选项卡选择的微调器。在纵向模式下，尽管内容正在发生变化，但滑动完成时选项卡选择不会改变，并且在横向模式下一切正常。

```
final ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
actionBar.setDisplayHomeAsUpEnabled(true);
// Set up the ViewPager with the sections adapter.
ViewPager mViewPager = (ViewPager) findViewById(R.id.pager);

mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {

    @Override
    public void onPageSelected(int position) {
        actionBar.setSelectedNavigationItem(position);
    }

}); 
```

我已经尝试`actionBar.setSelectedNavigationItem(position);`在这条线上放置断点，甚至在纵向模式下它也会被调用，但选择没有改变。

有人可以帮忙吗？

**编辑：** 发现了一个[类似的问题](https://stackoverflow.com/questions/11030744/actionbar-selecttab-doesnt-refresh-spinner-in-compact-mode)，但不知道它是如何解决的以及如何将它集成到我的代码中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-07T12:20:28.157

**问题：** 由于真实状态不足，平台使用折叠导航（即 Spinner）。系统自动确定横向的 NAVIGATION_MODE_TABS 和纵向的 NAVIGATION_MODE_LIST，将方向从横向更改为纵向会更新 UI，但由于某种原因不会将导航模式属性更新为 NAVIGATION_MODE_LIST，因此不会调用 mActionView.setDropdownSelectedPosition(position)。请参阅 ActionBarImpl 的以下代码： setSelectedNavigationItem

> ```
>  public void setSelectedNavigationItem(int position) {
>     switch (mActionView.getNavigationMode()) {
>     case NAVIGATION_MODE_TABS:
>         selectTab(mTabs.get(position));
>         break;
>     case NAVIGATION_MODE_LIST:
>         mActionView.setDropdownSelectedPosition(position);
>         break;
>     default:
>         throw new IllegalStateException(
>                 "setSelectedNavigationIndex not valid for current navigation mode");
>     }
> } 
> ```

**变通方案：** 通过反射我们可以得到tab spinner对象并调用setSelection方法。

```
private Spinner getTabSpinner()
{
    try
    {
        int id = getResources().getIdentifier("action_bar", "id", "android");
        View actionBarView = findViewById(id);

        Class<?> actionBarViewClass = actionBarView.getClass();
        Field mTabScrollViewField = actionBarViewClass.getDeclaredField("mTabScrollView");
        mTabScrollViewField.setAccessible(true);

        Object mTabScrollView = mTabScrollViewField.get(actionBarView);
        if (mTabScrollView == null) {
            return null;
        }

        Field mTabSpinnerField = mTabScrollView.getClass().getDeclaredField("mTabSpinner");
        mTabSpinnerField.setAccessible(true);

        Object mTabSpinner = mTabSpinnerField.get(mTabScrollView);
        if (mTabSpinner != null)
        {
            return (Spinner)mTabSpinner;
        }
    } 
    catch (Exception e) {
        return null;
    }

    return null;
} 
```

然后在 onPageSelected 事件中调用上述方法。

```
 public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
            Spinner spinner = getTabSpinner();
            if (spinner != null) {
                spinner.setSelection(position);
            }
        } 
```

参考了这篇文章[https://gist.github.com/2657485](https://gist.github.com/2657485)

# php - 从数组中获取值

> ID：12671293
> 
> 赞同：0
> 
> 时间：2012-10-01T10:09:03.783
> 
> 标签：php, arrays

我有一个私人消息系统，我有这个函数可以返回对话中所有用户的 ID（发件人除外）：

```
function findOtherUsersInConversation($conversation_id) {
    $sender = findMessageSenderId($conversation_id);
    $query  = mysql_query("SELECT user_id FROM message_partecipant WHERE conversation_id =   '$conversation_id' AND user_id !=$sender");
    while ($row = mysql_fetch_array($query)) {
        $user_id = $row['user_id'];
        print_r($user_id);
    }
} 
```

print_r 像这样返回 ID（例如 id100 和 id 101）：

```
100101//which is not what i'm trying to do 
```

我有另一个函数可以在数据库中查找用户名，因此对于每个用户 ID，我想以这种格式获取他们的用户名：

```
echo usernameFromId($user_id)// this should echo out all the username like this (user a, user b, user c) 
```

我想我必须做一个 foreach 循环，但我想不出怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:12:15.373

尝试这个：

```
function findOtherUsersInConversation($conversation_id){
    $sender = findMessageSenderId($conversation_id);
    $query =  mysql_query("SELECT user_id FROM message_partecipant WHERE conversation_id =   '$conversation_id' AND user_id !=$sender");
    $users = array();
    while ($row = mysql_fetch_array($query)) {
        $users[] = usernameFromId($row['user_id']); // fetch user name and add it to array
    }
    return implode(', ', $users); // return a string separated by commas
}

findOtherUsersInConversation(10); // conversation id 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:37:35.840

像这样试试

```
function findOtherUsersInConversation($conversation_id) {
$sender = findMessageSenderId($conversation_id);
$query  = mysql_query("SELECT user_id FROM message_partecipant WHERE conversation_id =   '$conversation_id' AND user_id !=$sender");
$cnt=0;
while ($row = mysql_fetch_array($query)) {
    $user_id = $row['user_id'];
   if($cnt==0):
       $comma_separated .=$user_id;
   else: 
      $comma_separated .=",".$user_id;
   endif;   
   $cnt++;
}
 return $comma_separated
}

$getID=findOtherUsersInConversation(10); 

$arrayID= explode( ',', $getID);// split string from comma(,)

print_r($arrayID);// print all ID's as you want 
```

愿这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:20:01.377

```
function findOtherUsersInConversation($conversation_id){
  $sender = findMessageSenderId($conversation_id);
  $query =  mysql_query("SELECT user_id FROM message_partecipant WHERE conversation_id ='$conversation_id' AND user_id !=$sender");
  $usernameArr = array();
  while ($row = mysql_fetch_array($query)) {
    $user_id= $row['user_id'];
    array_push($usernameArr, usernameFromId($user_id));
  }

  $comma_separated = implode(",", $usernameArr);

  echo $comma_separated;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:23:05.437

如果您只想查看您的信息数组，请尝试：

```
var_dump($array); 
```

否则在 foreach 中尝试输出您的数组：

```
foreach($array as $var){
    echo $var;
} 
```

# java - 将spring类作为可运行jar执行时无法读取applicationContext.xml

> ID：12671294
> 
> 赞同：6
> 
> 时间：2012-10-01T10:09:12.787
> 
> 标签：java, spring

我有一个带有 main 方法的 spring 类。在课堂内我试图读取值 applicationContext.xml 。我的意图是将这个主类连同它的依赖 jars、属性文件和 applicationContext.xml 一起打包。

但是当我尝试通过 unix 命令提示符运行 jar 文件时，看起来 applicationContext 文件没有被加载。

applicationContext.xml 可以在 jar 文件中看到，并且能够在我的类中看到 sysouts。用于读取 applicationContext.xml 的代码是

```
ApplicationContext context = new ClassPathXmlApplicationContext(
    "classpath*:**/applicationContext.xml"); 
```

当我打印上下文时，它给了我以下消息。

```
org.springframework.context.support.ClassPathXmlApplicationContext@89fbe3: start
up date [Mon Oct 01 15:07:43 IST 2012]; root of context hierarchy 
```

当我尝试打印 context.getBeanDefinitionCount() - 它给了我 0。

但我能够通过 eclipse 成功执行此操作。它能够读取 applicationContext.xml 并将 bean 计数为 13。

不知道为什么当我将它作为 jar 运行时它不起作用。请帮助我发表您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:58:52.750

您是如何获得 .jar 包的？您是否使用了 Eclipse 导出向导？您可能已将“applicationContext.xml”放在“/resources”文件夹中。确保在 Eclipse 中修复“Java Build Path”。删除“/src/main/resources”文件夹中可能存在的所有排除标签。资源文件夹应该被认为是一个类路径，而不仅仅是 .jar 包中包含一些 xml 文件的文件夹。希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:46:46.923

来自[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/resources.html#resources-wildcards-in-path-other-stuff)的引用（重点是我的）：

> 请注意，当与 Ant 样式模式结合使用时，“classpath*:”只能**在模式开始前至少在一个根目录**下可靠地工作，除非实际的目标文件驻留在文件系统中。这意味着像 "classpath*:*.xml" 这样的模式不会从 jar 文件的根目录中检索文件，而只会从扩展目录的根目录中检索文件。这源于 JDK 的 ClassLoader.getResources() 方法的限制，该方法仅返回传入空字符串的文件系统位置（指示要搜索的潜在根）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-18T17:13:11.737

我一直在努力解决同样的问题。我可以在 Eclipse 中正常运行我的应用程序，但是当我将其导出为可执行 jar 时，它会失败。

我通过以下方式解决了这个问题：

1.  转到 Eclipse 中的构建路径屏幕并删除`/resources`文件夹上的过滤器。这会导致导出将`META-INF`文件夹及其下面的内容放入文件`/resources`的顶层`.jar`。
2.  从应用程序上下文路径中删除所有通配符：

    `applicationContext = new ClassPathXmlApplicationContext( "classpath*:META-INF/spring/applicationContext*.xml");`
    变成
    `applicationContext = new ClassPathXmlApplicationContext("classpath:META-INF/spring/applicationContext.xml");`

我确信这是由于 Eclipse 环境和我的 windows java 环境之间的类加载器存在一些差异。弄清楚如何解决这个问题将是下一个任务。

# configuration - 具有多个包配置的单个 SSIS 包

> ID：12671300
> 
> 赞同：1
> 
> 时间：2012-10-01T10:09:32.647
> 
> 标签：configuration, ssis

我有一个 SSIS 包，其中包含 2 个包配置（Configuration1 和 Configuration2），配置位置存储在 2 个不同的环境变量中。必须使用哪种配置取决于`@type`运行时传递的变量 ( ) 的值。

即当使用Configuration1，当`@type ='override'`使用Configuration2 `@type ='overload'`。

我怎样才能在 SSIS 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:44:00.673

您可以使用可选执行的 SQL 执行任务（基于使用优先约束中的表达式的 @type 的值）来更新“SSIS 配置”表中的配置值。在这种情况下，您应该将配置从“环境变量”迁移到 SQL Server 表。

# c# - 在foreach循环中使用字符串变量检索图像资源

> ID：12671302
> 
> 赞同：1
> 
> 时间：2012-10-01T10:09:39.370
> 
> 标签：c#, resources, foreach

我有一个字符串数组“abc”，我把它放在一个 for each 循环中。我想使用 foreach 循环中的值从资源中检索图像并将其放入图片框中。

下面的代码：

```
char[] stringArr = inputted.ToCharArray();
        foreach (char i in stringArr)
        {
            PictureBox pictureBox = new PictureBox(); 
            object obj = ResourceManager.GetObject(i.ToString());
            pictureBox.Image = ((System.Drawing.Bitmap)(obj));
            Controls.Add(pictureBox);
        } 
```

我该怎么做才能让它工作？我想要实现的是有图片，字母表中的每个字符代表一张不同的图片，用户输入一个字符串并单击一个按钮，用户输入被获取，形成 stringArr 并且我希望它输出相关基于他输入的字符串的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:11:42.333

您可以执行以下操作：

```
object obj = ResourceManager.GetObject("MyResourceName", resourceCulture);
return ((System.Drawing.Bitmap)(obj)); 
```

按名称获取资源。

像`ResourceManager`这样：

```
var ResourceManager = 
    new System.Resources.ResourceManager(
        "YourAssembly.Properties.Resources", 
        typeof(Resources).Assembly); 
```

因此，在您的示例中，您可以编写：

```
foreach (char i in stringArr)
{
    PictureBox pictureBox = new PictureBox();

    object obj = ResourceManager.GetObject(i.ToString(), resourceCulture);
    pictureBox.Image = ((System.Drawing.Bitmap)(obj));
} 
```

`resourceCulture`（如果您的图像没有特殊文化，您也可以省略该参数）。

我确实假设您的代码只是一个更大示例的摘录，因为对我来说创建`PictureBox`内部外观*而不*将其分配给表单是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T09:57:41.967

这是您可以使用的简单方法

添加到您的代码中并将 XXXAPPNAMEXXX 替换为您的应用程序的名称。

```
 public Bitmap GetImageResourceByName(string name)
    {
        Bitmap MethodResult = null;
        try
        {
            MethodResult = (Bitmap)XXXAPPNAMEXXX.Properties.Resources.ResourceManager.GetObject(name, XXXAPPNAMEXXX.Properties.Resources.resourceCulture);

        }
        catch //(Exception ex)
        {
            //ex.HandleException();
        }
        return MethodResult;
    } 
```

注意：进入 Resources.Designer.cs 并公开私有属性 resourceCulture。

我已经注释掉了我的错误处理（ex.HandleException），因为你的可能不同。

# javascript - 用户定义的 Html 标签

> ID：12671305
> 
> 赞同：0
> 
> 时间：2012-10-01T10:09:56.670
> 
> 标签：javascript, jquery, html, user-defined

我使用 JavaScript 创建了一个可过滤的下拉列表。我使用输入字段、按钮（向下箭头）和固定大小的选择框设计了这个控件。如果我单击向下箭头按钮，我会将选择框放在输入字段下。但我想将整个控件创建为单个控件。我想为此下拉列表创建一个自己的标签。要显示此下拉列表，我需要简单地调用我自己的标签，例如

```
<dropcombo id="xxx" >
   <op>1</op>
   <op>2</op>
</dropcombo> 
```

这里 Dropcombo 标签是一个用户定义的控件。有没有办法为此下拉组合创建自己的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:19:40.000

自定义 HTML 标记的问题在于，您需要使用 CSS 来告诉浏览器如何呈现它们（因为浏览器不知道它们的外观）。

```
<html>
<body>
    <customTag>This is my custom tag</customTag>
</body> 
```

将呈现为：

```
This is my custom tag 
```

有关解决此问题的进一步方法，请参阅[https://stackoverflow.com/questions/211394/when-to-use-custom-html-tags 。](https://stackoverflow.com/questions/211394/when-to-use-custom-html-tags)

此外，jQuery UI 有[一个`.autocomplete()`ui 扩展器](http://jqueryui.com/demos/autocomplete/)，我建议您检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:15:09.803

创建你的标签

```
dropcombo
{
display:block;
text-align:left;
/* ADD CSS PROPERTY ACCORDING TO YOUR REQUIRDMENT */
}
op
{
/* SAME HERE CSS PROPERTY */
} 
```

# javascript - float 动态定义带有标签的多个数据

> ID：12671308
> 
> 赞同：0
> 
> 时间：2012-10-01T10:10:05.450
> 
> 标签：javascript, flot, dynamically-generated, series

我已经阅读了至少六个关于这样做的其他问题，但我无法弄清楚我的不同之处：http: [//jsfiddle.net/JakobJingleheimer/Z5UFg/1/](http://jsfiddle.net/JakobJingleheimer/Z5UFg/1/)

我添加了一个`LoadGraph.check_data`从控制台运行的函数。运行后输出的数据`load_data(1,"199 Water St",7);`为：

```
#mine
[ { label:"coffee",  data:[ [1659] ] },
  { label:"cocoa",  data:[ [717] ] },
  { label:"tea",  data:[ [206] ] }
] 
```

[在我看来，这与文档中的示例](https://github.com/flot/flot/blob/master/API.md)完全相同（就在*Plot Options*上方）：

```
#doc example
[ { label: "Foo", data: [ [10, 1], [17, -14], [30, 5] ] },
  { label: "Bar", data: [ [11, 13], [19, 11], [30, -7] ] }
] 
```

我还尝试在[SO answer 5661134](https://stackoverflow.com/a/5661134)之后对我的结构进行建模，但这也没有成功（与小提琴中看到的结果完全相同）。

小提琴中的第二张图应该有 3 个相邻的条形图，或者（更好的是）将 3 个条形图堆叠在一起。

**更新**：我添加了一个 x 值来获得以下内容（但它仍然不起作用，小提琴）：

```
#http://jsfiddle.net/JakobJingleheimer/Z5UFg/3/
[ { label:"coffee",  data:[ [7, 1659] ] },
  { label:"cocoa",  data:[ [7, 717] ] },
  { label:"tea",  data:[ [7, 206] ] }
]
#http://jsfiddle.net/JakobJingleheimer/Z5UFg/2/
[ { label:"coffee",  data:[ [0, 1659] ] },
  { label:"cocoa",  data:[ [1, 717] ] },
  { label:"tea",  data:[ [2, 206] ] }
] 
```

如果我去掉对象性（例如，标签），它会起作用（但我需要弄清楚为什么`f_opts.series.stack=true`不起作用 - 我认为，因为所有 3 个条都是蓝色的，所以它将所有三个条视为同一个系列): [v4](http://jsfiddle.net/JakobJingleheimer/Z5UFg/4/)

**更新 2**这些应该在 2 个不同的地方吗？我的意思是标签+数据数组对象是否应该在选项对象中，并且数据也应该在数据数组中？该文档有点难以弄清楚，因为它从未说明父对象是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:35:06.437

不同之处在于您的数据点仅包含一个值，而 Flot 需要 [x, y] 对。查看文档的[数据格式](https://github.com/flot/flot/blob/master/API.md#data-format)部分了解更多信息。

`[f_data]`编辑：即使 f_data 已经是一个系列数组，您对 $.plot 的调用也看起来像。看起来这就是你的问题的当前原因。

如果您遇到更多问题，您真的应该尝试将您的代码缩减为一个更简单的示例并从那里开始工作。这已经从一个问题变成了一个调试会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T06:17:49.557

我相信[这个版本的小提琴](http://jsfiddle.net/Z5UFg/20/)可能是你想要做的。

问题在于您将其`f_data`视为单个对象 {} 而不是对象数组，特别是系列对象。（您可以通过在情节调用中将其强制转换为数组来解决此问题`[f_data]`，但这会将您限制为单个系列。）。您想要做的而不是设置`f_data = tmp`是将完整的系列对象作为其数组推`f_data`入：`tmp``data`

```
f_data.push({label:cat, stack:true, data:tmp}); 
```

正如您在我的示例中看到的那样，每个系列对象（`f_data`数组中的每个元素）都有自己的数据和标签。

您没有看到任何堆叠工作的原因有两个：

1.  您需要包含[jquery.flot.stack.js](http://people.iola.dk/olau/flot/jquery.flot.stack.js)文件才能获得堆叠功能。（我在小提琴中添加了链接资源。）
2.  堆叠只对多个系列有意义。您的“深度”视图将 3 个重叠数据点添加到单个系列，而不是创建 3 个单独的系列，每个系列有 1 个数据点。

我相信我的示例达到了您的目标。让我知道我是否弄错了。我用 //NEW 标记了我添加的新行以突出显示更改。

# asp.net-mvc-3 - MVC 3 - 将十进制数据限制为 2 位小数

> ID：12671314
> 
> 赞同：0
> 
> 时间：2012-10-01T10:10:51.727
> 
> 标签：asp.net-mvc-3, validation

我有一个使用 Razor 视图使用 MVC 3 开发的项目。

我有一个 Decimal 数据类型，用户可以在其中输入金额。数据被提交给第三方，他们坚持该金额最多保留 2 个小数位。金额必须大于零。最大数量取决于从数据库中检索的值。所以我不能硬编码最大范围，比如 9999.99。

示例：- 假设当前交易的最大金额为 123.45。我需要验证用户在文本框中输入的金额在 0.01 到 123.45 之间。如果用户输入 123.46，这将是无效的，因为它超过了最大值。如果用户输入 100.123，这也是无效的，因为它会超过 2 位小数的最大值。

到目前为止的研究......我想我会先尝试解决小数位问题。我想知道将其应用于我的模型是否可行...

```
<DisplayFormat(ApplyFormatInEditMode:=True, DataFormatString:="{0.00}")>
Public Property PaymentAmount As Decimal 
```

看法：-

```
@Html.TextBoxFor(Function(model) model.PaymentAmount) 
```

...但这似乎无济于事。

问题：-

1.  如何为限制为 2 位小数的范围创建验证，该范围接受从 0.01 到 X 的值（其中 X 是在显示视图之前从数据库返回的最大预定值）？

2.  这也可以与不显眼的客户端验证一起使用吗？

我正在考虑创建一个自定义验证属性，并将其用于客户端验证，我认为这会起作用，但对于表面上看起来像是一个非常简单的问题的东西来说似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:59:20.213

我认为您需要从数据库中获取最大数量的交易。那么你需要这样写，

```
<input type="text" pattern="^\d*\.?\d{0,2}$" id="txtAmount"/>
<input type="button" id="btnSubmit" onclick="return ValidateAmount(@Model.MaxAmount)"/>

in script block

function ValidateAmount(amt)
{
  var useramount=$('txtAmount').val();
  if(useramount>amt)
{
alert('max amount exceeded.etc');
return false;
}
else
{
return true;
}
} 
```

如果交易的最大金额是固定的，那么您可以直接在 javascript 代码中使用可能没有问题。希望能帮助到你。

# ssh - EC2：如何将 ssh 私钥捆绑到私有 AMI 中？

> ID：12671320
> 
> 赞同：0
> 
> 时间：2012-10-01T10:11:15.560
> 
> 标签：ssh, amazon-ec2, amazon-cloudformation

我在 cloudformation 模板中使用私有 AMI，该模板还将 Route53 记录分配给新实例。每次我连接到该主机名时，我都会收到“远程主机标识已更改”，并且需要删除有问题的密钥。

启动实例时似乎主机密钥已更改，但由于 AMI 只能由我访问，我想以允许主机密钥保持不变的方式设置实例创建（并摆脱该警告）。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:47:34.670

> 我想以允许主机密钥保持不变（并摆脱该警告）的方式设置实例创建。
> 
> 那可能吗？

您希望主机名保持不变，还是希望消息消失？

简短的回答：主机名在实例之间*不会*保持不变。一个新实例就是一个新实例。但是，如果您通过 SSH 连接（您没有指定），您可以使用类似：

```
ssh -q -o "BatchMode=yes" -o "StrictHostKeyChecking=no" -i ~/.ssh/{keypair}.pem ec2-user@{hostname} 
```

# sql - 根据同一张表的其他字段更新字段

> ID：12671323
> 
> 赞同：0
> 
> 时间：2012-10-01T10:11:40.813
> 
> 标签：sql, sql-server, data-warehouse

我有一张桌子`Datawarehouse`，人口出错了。每一行都有一个`name`和一个`ID`，对于原始系统中的每次更新，都会在`DWH`表中创建一个新行，该行应该保持与受影响对象相同的`ID`和`Name`。

出于某种原因，`IDs`为同一个对象生成了重复项（相同的名称，知道名称也是唯一的对象而不是表，与 ID 相同，它不是表主键，它只是一个对象 ID）。

知道我有以下字段：`ID`, `Name`, `IsLatest`, 我现在需要做的是修复数据。为此，我需要使用的伪代码是：

```
 1\. Select the list of rows with the same Name
 2\. Select the ID where IsLatest = 1
 3\. Update the rest of rows with that ID 
```

我的更新查询有问题，我不能只选择一个`ID`，我也不能循环使用不同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:53:20.327

这可以使用相关的子查询来完成：

```
UPDATE DWH
SET id = (
    SELECT id
    FROM DataWarehouse
    WHERE DWH.name = name
        AND isLatest = 1
    )
FROM DataWarehouse DWH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:44:50.537

在临时表中选择最新的并将其用于更新。

```
UPDATE YourTable
SET YourTable.ID = LatestTable.ID
FROM 
(
    SELECT * FROM YourTable 
    WHERE IsLatest = 1
) AS LatestTable
WHERE YourTable.[Name] = LatestTable.[Name] 
```

# python - 是否有可能知道python进程正在运行哪个脚本？

> ID：12671325
> 
> 赞同：5
> 
> 时间：2012-10-01T10:11:46.857
> 
> 标签：python, linux

> **可能重复：**
> [从 Python 中查找 Linux 中特定 PID 的命令](https://stackoverflow.com/questions/1440941/finding-the-command-for-a-specific-pid-in-linux-from-python)

我目前有一个 python 进程（当然还有它的 pid），我想知道是否有可能找出这个进程正在运行的脚本。（我使用 Ubuntu Linux 10.04.4 LTS）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T10:14:07.990

```
cat /proc/${pid}/cmdline | tr '\0' ' ' 
```

`cmdline`伪文件包含进程的命令行参数，作为 NUL 分隔的字符串列表。该`tr`命令将 NUL 转换为空格。

# xcode - ShareKit 2.0 脸书授权

> ID：12671326
> 
> 赞同：0
> 
> 时间：2012-10-01T10:12:00.350
> 
> 标签：xcode, facebook, sharekit

我正在尝试在我的应用程序中使用 facebook 登录。我试过这个：

```
- (IBAction)connectWithFacebook:(id)sender
{

Facebook *facebook = [[Facebook alloc] initWithAppId:SHKCONFIG(facebookAppId) urlSchemeSuffix:SHKCONFIG(facebookLocalAppId) andDelegate:nil];

[facebook authorize:[NSArray arrayWithObjects:@"publish_stream", @"offline_access", @"email", @"user_hometown", @"user_birthday", @"user_location", @"user_checkins", @"user_likes", @"friends_checkins", nil]];
} 
```

它在模拟器中工作，但不在设备上，尽管它曾经与两者一起工作。现在，在设备上，它只打开 facebook 应用程序和您应该选择是否允许应用程序的对话框，但它是空的，只有可用的取消按钮，它甚至不会将我重定向到我的应用程序，而是保持应用程序打开.

你能提示我做错了什么吗？谢谢

```
EDIT 
```

看来，如果我卸载 facebook 应用程序，它会在 Safari 中运行，它可以工作。只有在设备上安装了 facebook 应用程序时，我才工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:59:05.807

到处搜索后，我意识到 facebook 应用程序配置不正确。捆绑包标识符不是正确的。以前它一直在工作，但似乎 facebook 做了一些修改......我猜他们这样做是为了更好地与新的 iOS 6 集成。

# android - 找不到 com_actionbarsherlock.apk

> ID：12671328
> 
> 赞同：5
> 
> 时间：2012-10-01T10:12:08.727
> 
> 标签：android, eclipse, apk, actionbarsherlock

我刚刚安装了*ActionBarSherlock*。我将我的*actionBar*设置为*getSupportActionBar*以及正确的主题 - 但我在*Eclipse*控制台中收到此错误：

```
[2012-10-01 03:10:11 - com_actionbarsherlock] Could not find com_actionbarsherlock.apk! 
```

该应用程序运行良好，但我不知道这是否是其他设备上未来错误的指标。

任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T20:13:08.847

我也遇到了这个问题。即使一切都安装和工作正常，Eclipse 总是会记录这个关于找不到 ActionBarSherlock.apk 的错误。不需要 .apk，因为 ActionBarSherlock 是一个库，而不是一个应用程序。

我通过从我的应用程序属性（项目-> 属性-> Java 构建路径-> 项目）的构建路径上的所需项目中删除 ActionBarSherlock 项目解决了这个问题。此列表中的项目不是用于库，而是您的项目需要安装的其他应用程序项目。

我最初将 ActionBarSherlock 项目放在此所需项目列表中，以便与我的项目共享代码，导入所需的类等。但是，正确的方法是将 ActionBarSherlock 库添加到库项目列表中（项目->属性->Android->库->添加...）。在我这样做之前，我自己无法访问 ActionBarSherlock 项目中的样式和其他资源。现在一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:33:32.097

请参阅此讨论：[Android Eclipse - 找不到 *.apk](https://stackoverflow.com/questions/4778113/android-eclipse-could-not-find-apk)

# birt - 在 birt 中使用 rtf 文件作为报告布局

> ID：12671332
> 
> 赞同：0
> 
> 时间：2012-10-01T10:12:31.320
> 
> 标签：birt

我有一个包含报告布局的 .rtf 文件。我可以提供这个 rtf 文件作为 birt 的输入以创建报告布局吗？我正在尝试使用 xml 文件作为数据源。但我不想创建新的报告布局，因为我在 rtf 文件中有旧布局。那么是否可以在 birt 中使用 rtf 文件作为设计模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:39:31.037

不，你不能。

然而，在 BIRT 中发现了一些与 RTF 相关的东西（但不起作用；见[bug](https://bugs.eclipse.org/bugs/show_bug.cgi?id=284323)）

如果您使用动态文本文件，您可以设置它的属性以包含 RTF。
在属性编辑器中：属性 - 高级 - 内容类型 - RTF

# reporting-services - 将 rdl 报告链接到 CRM 2011 中的多个父报告

> ID：12671334
> 
> 赞同：1
> 
> 时间：2012-10-01T10:12:40.117
> 
> 标签：reporting-services, dynamics-crm-2011

我创建了一些报告以进入 CRM，其中一个报告将另一个用作子报告，并且我将这两个报告链接在一起，以便一切正常。但现在我有第二份报告，需要同样的子报告。那么有什么方法可以将子报告链接到多个父母，以便双方都能看到它？或者我是否需要为每个我想要使用它的报告准备一份子报告的副本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:20:12.680

根据我的经验，您只能通过动态界面将子报表链接到一个父级。

我目前正在寻找其他选择来解决这个问题，但目前还没有找到任何解决方案。

在这种情况下，我目前正在创建两个子报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T00:39:48.993

迟到总比没有好，以备将来参考：

我通过使用 IF/ELSE 结构解决了这个问题，这样我可以使用父级来选择要进行的选择。当子报表直接运行时，它使用 CRM 自动筛选上下文。当子报告使用来自父级的帐户 ID 进行配置时，它使用它来确定上下文。

```
IF(@AccountId IS NULL OR @AccountId = '')
BEGIN
SELECT TOP(3) ava_campaignparticipationid AS CampaignParticipationId
FROM Filteredava_campaignparticipation AS CRMAF_Filteredava_campaignparticipation
END
ELSE
BEGIN
SELECT ava_campaignparticipationid AS CampaignParticipationId
FROM Filteredava_CampaignParticipation
WHERE ava_accountid = @AccountId
AND ava_participation = 915240002
END 
```

希望这可以帮助那里的人。

问候。

# jquery - 从嵌套的 jquery 函数返回一个值

> ID：12671339
> 
> 赞同：0
> 
> 时间：2012-10-01T10:12:57.590
> 
> 标签：jquery

我正在使用以下代码来检查名称是否存在。但是，我无法获取返回值是真还是假以进行进一步验证。如何从这个函数中获取返回值？

```
function check_availability() //check auction name if exists
        {
        var new_Auction =$('#txtAuction').val();
        $.post('checkAuction.php',{txtAuc:$('#txtAuction').val()},
            function(result){
                if(new_Auction.length==0)
                {
                    $('#message').html('');
                }
                else
                {
                if(result==1)
                {
                    $('#message').html(new_Auction + ' is Available').css('color','#0C3');
                    $('input[id=btnCreate]').removeAttr('Disabled');
                 //$('h4.alert_success').css("display","block");
                 //$('h4.alert_success').html(new_Auction + ' is Available');  
                 //$('h4.alert_success').fadeOut(5000); 
                return true;

                }
                 else
                 {

                    $('#message').html(new_Auction + ' is not Available').css('color','#F00');
                    $('input[id=btnCreate]').attr('Disabled','Disabled');
                    //$('h4.alert_error').css("display","block"); 
                    //$('h4.alert_error').html(new_Auction + ' is not available'); 
                    return false;
                 }
                }
            }
        );
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:14:51.953

AJAX 是*异步*的。您不能从回调返回到异步调用。将依赖于 AJAX 调用结果的代码移动到回调内部，而不是尝试从回调中返回。

```
$.post('checkAuction.php', {txtAuc:$('#txtAuction').val()}, function(result){
    //You cannot return a value from in here!
}); 
```

当您发出异步请求时，将继续执行下一条语句，因此在一段时间后执行异步回调时，控制将无处“返回”。

# c# - 逆变和方法签名？

> ID：12671342
> 
> 赞同：1
> 
> 时间：2012-10-01T10:13:08.293
> 
> 标签：c#, .net, covariance, contravariance

看着这段代码

```
delegate void StringAction (string s);
class Test
{
static void Main()
{
    StringAction sa = new StringAction (ActOnObject);
    sa ("hello");
}
static void ActOnObject (object o)
{

   Console.WriteLine (o); // hello
 }
} 
```

由于逆变性，此代码是否有效？( MoreDerivedRef <== LessDerivedRef )

**或者因为**

（*与逆变无关*） - 在 c# 中，我可以执行类似的`ActOnObject (object o)`方法`ActOnObject ("lalala")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:17:37.783

此代码有效，因为正如 Eric Lippert 在[本文](http://blogs.msdn.com/b/ericlippert/archive/2007/10/19/covariance-and-contravariance-in-c-part-three-member-group-conversion-variance.aspx)中所说：

> 方法组到委托转换的参数类型是逆变的。

以上仅对引用类型有效，但`string`和`object`都是引用类型，所以满足要求。

从 C# 2.0 开始就支持这种差异，您不需要版本 4 中引入的额外支持来依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:32:48.400

是的，这是由于逆变。

> This means that you can assign to delegates not only methods that have matching signatures, but also methods that return more derived types (covariance) or that accept parameters that have less derived types (contravariance) than that specified by the delegate type.

Taken from [http://msdn.microsoft.com/en-us/library/dd233060(VS.100).aspx](http://msdn.microsoft.com/en-us/library/dd233060(VS.100).aspx)

# sql - SQL Server 2008 无法删除约束

> ID：12671345
> 
> 赞同：4
> 
> 时间：2012-10-01T10:13:19.633
> 
> 标签：sql, sql-server-2008

我正在尝试使用以下方法从表中删除主键约束

```
ALTER TABLE SchemaName.LabourGrade DROP CONSTRAINT Labour_Grade_pk 
```

并得到错误`Labour_Grade_pk is not a constraint.`

当我做

`SELECT * FROM sysobjects WHERE name = 'LabourGrade_pk'`

我得到一排回来。它确实有 FK，所以我尝试放弃那些第一个但同样的问题。我只想删除 PK 以更改列的数据类型，有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:23:54.780

如果`SELECT * FROM sysobjects WHERE name = 'LabourGrade_pk'`返回一行，那么您要使用：

```
ALTER TABLE SchemaName.LabourGrade DROP CONSTRAINT LabourGrade_pk 
```

不是

```
ALTER TABLE SchemaName.LabourGrade DROP CONSTRAINT Labour_Grade_pk
                                                       --^-- We don't want this 
```

但是，根据其他评论和@Martin 的回答，这并不能解决您需要放弃此约束的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:21:06.027

> 我只想删除 PK 以更改列的数据类型，有更好的方法吗？

是的，您根本不需要为此删除并重新创建 PK（以及相关的索引）。您可以通过`ALTER TABLE ... ALTER COLUMN`.

```
CREATE TABLE #T
(
P VARCHAR(2) PRIMARY KEY
)      

INSERT INTO #T VALUES ('AA')  

ALTER TABLE #T ALTER COLUMN P VARCHAR(3) NOT NULL

DROP TABLE #T 
```

# android - Android：为 MTP 设备添加/删除/编辑媒体文件时未收到 BroadCastEvent

> ID：12671346
> 
> 赞同：1
> 
> 时间：2012-10-01T10:13:23.160
> 
> 标签：android

当 MediaStore 通过 MTP 更改时，我需要处理事件。我已经有一个 android.intent.action.MEDIA_SCANNER_FINISHED 动作的接收器，但它只对通用大容量存储（UMS）有用。扫描仪不会通过 MTP 启动，因为 MTP 会直接更改 MediaStore 数据库。

这在本机画廊中得到了妥善处理。请你这么好心并帮助我如何检测这个事件。非常感谢您的帮助！

# jquery - 带有链接的 jQuery 图像滑块阻止旋转器更改图像

> ID：12671347
> 
> 赞同：0
> 
> 时间：2012-10-01T10:13:23.393
> 
> 标签：jquery, slider, image-gallery

我用 jQuery 制作了一个图像旋转器/幻灯片，当它只是图像时效果很好，但是如果我将 img 标签包装在 href 中，那么幻灯片将不会移过第一张图像。我对 jQuery 还很陌生，但我猜它与代码的 img:first/img:visible 部分有关，因为它在容器中查找图像，而不是 a 标签。我已经尝试用 span 包装 img 标签并将类分配为代码查找的内容，因此无论是图像还是带有链接的图像都无关紧要，但我似乎无法得到可以工作（尽管我可能只是做错了）。

另一件需要注意的是，图像列表是用 PHP 动态生成的，如果我可以让它工作，那么如果设置了图像周围的 href 将由 PHP 添加 - 所以并不总是保证图像总是链接与否，或者它可能是一个混合物。

无论如何，这是下面的代码片段；这也是它的一个[小提琴](http://jsfiddle.net/MrLuke/QSj4k/)，因为它现在没有链接图像。

**HTML：**

```
<div id="slide_wrapper">

    <p id="slide_controls">
        <span id="prev-but"><img src="http://webbossuk.com/admin/JS/webboss-slider/imgs/but_prev.png" alt="Previous" /></span>
        <span id="next-but"><img src="http://webbossuk.com/admin/JS/webboss-slider/imgs/but_next.png" alt="Next" /></span>
    </p>

<div id="image-container">  

    <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_shop.jpg" alt="Slide 1" title="" />
    <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_podcasts.jpg" alt="Slide 2" title="" />
    <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_page_ed.jpg" alt="Slide 3" title="" />
    <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_members.jpg" alt="Slide 4" title="" />
    <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_more.jpg" alt="Slide 5" title="" />

    <p id="slide_caption"><span></span></p>
</div>

</div>​ 
```

**jQuery：**

```
var Speed = 5000; //Time in Ms

(function imageTransition() {
setTimeout(function() {
    $('#image-container img:visible').fadeOut("slow"); // FADE OUT VISIBLE IMAGE
    if ($('#image-container img:visible').next('img').size("slow") < 1) {
        $('#image-container img:first').fadeIn(); // FADE IN FIRST IMAGE    
        $('#slide_caption').html('<span>' + $('#image-container img:first').attr('title') + '</span>');

        if ($('#slide_caption span').html() == "") {
            $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO ALT TEXT
        } else {
            $('#slide_caption').fadeIn();
        }
    } else {
        $('#image-container img:visible').next('img').fadeIn("slow"); // FADE IN NEXT IMAGE    
        $('#slide_caption').html('<span>' + $('#image-container img:visible').next('img').attr('title') + '</span>'); //SHOW ALT TEXT CAPTION
        if ($('#slide_caption span').html() == "") {
            $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO ALT TEXT
        } else {
            $('#slide_caption').fadeIn();
        }
    }

    imageTransition(); //TRIGGER FUNCTION AGAIN
}, Speed); //Xms INTERVAL BEFORE FUNCTION RUNS AGAIN
})();​ 
```

**- - -编辑 - - -**

由于这个问题的解决方案出现了一个新问题，所以我提出了一个新问题来解决这个问题，而不是全部在下面的评论中：[jQuery 图像滑块标题问题，显示错误](https://stackoverflow.com/questions/12677389/jquery-image-slider-caption-issues-displaying-wrong)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:40:28.730

将每张幻灯片包装在一个 div 中，如下所示：

```
<div class="slide">
    <a href="http://example.com">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_shop.jpg" alt="Slide 1" title="" />
    </a>
</div> 
```

然后淡出并淡入 div 而不是图像本身。

# jquery - 将两个单独的 ajax Post 请求结果加在一起

> ID：12671348
> 
> 赞同：2
> 
> 时间：2012-10-01T10:13:24.680
> 
> 标签：jquery, ajax

我有两个单独的 Ajax Post 请求，我需要将它们加在一起，它们都链接到货币兑换提要，它基本上是从不同货币转换而来的两个值，然后在都转换为一种货币后需要加在一起，我让它们都使用相同的货币不，我只需将两个结果相加即可得到最终总数。

这是两个请求

```
 var dataString = "amount=" + entireTotal + "&from=" + from + "&to=" + to;
        //Lets Get the exchange rates from our total
     $.ajax({
       type: "POST",
       url: "http://fileserver/website/modules/mod_calculation/js/currency.php",
       data: dataString,
       success: function(data){
        $('#inputresult').show();
        //Put received response into result div
         $('#inputresult').html(data);
       }
     });

var dataString = "amount=" + amountGel + "&from=" + fromGel + "&to=" + toGel;
            $.ajax({
       type: "POST",
       url: "http://fileserver/website/modules/mod_calculation/js/currencygel.php",
       data:  dataString,
       success: function(data){
           $('#resultsgel').html(data);
         //Show results div
         $('#resultsgel').show();
        //Put received response into result div
       }
     }); 
```

任何帮助都会非常感激..谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:15:11.833

```
var request1 = $.ajax({ ... }),
    request2 = $.ajax({ ... });

$.when(request1, request2).then(function(response1, response2) { ... }) 
```

进一步阅读：

*   一篇关于如何在 jQuery 中使用 Promise 的好文章：http: [//joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)

*   和[官方文档页面](http://api.jquery.com/category/deferred-object/)。

类似于您需要的小抽象示例（抱歉，没有足够的时间在那里创建 ajax 请求，但它们的行为完全相同）：http: [//jsfiddle.net/Y26zd/](http://jsfiddle.net/Y26zd/)

# erlang - 按照 Erlang 中的结束 URL

> ID：12671352
> 
> 赞同：1
> 
> 时间：2012-10-01T10:13:46.357
> 
> 标签：erlang

我正在尝试按照 RSS 中的 URL 来查找最终 URL！例如，我有这个 URL “http://coder.io/~a27983554a”，遵循这个的结果将是“http://ferd.ca/code-janitor-nobody-s-dream-everyone-s-工作和如何-erlang-can-help.html"

最终 URL 保存在第一个 URL 的标头中，但问题是我需要向该 URL 发送请求以获得包含最终结果的响应！

我正在使用这个命令

> {ok, {{Version, 200, ReasonPhrase}, Headers, Body}} = httpc:request("http://coder.io/~a27983554a")

但这只是给了我文件的标题，但是来自包含我的结果的站点的响应

请帮助我，我是 Erlang 的新手，如果你能提供简单的代码行，那将是完美的

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:57:51.343

`autoredirect`执行请求时需要禁用：

```
Method = get,
Url = "http://coder.io/~a27983554a",
HTTPOptions = [{autoredirect, false}],
{ok, {{_Version, 302, _StatusMsg}, Headers, Body}} =
    httpc:request(Method, {Url, []}, HTTPOptions, []),
Location = proplists:get_value("location", Headers). 
```

# c++ - 当位置 > ULONG_MAX 时，对大文件使用大型 ostream tellp() 函数

> ID：12671354
> 
> 赞同：3
> 
> 时间：2012-10-01T10:13:54.620
> 
> 标签：c++, std, ostream

我正在尝试存储指向不同位置的文件的偏移量。使用tellp()函数，我可以知道文件中的实际位置，也就是一个整数。

当这个数字达到 4.294.967.295 时，问题就来了。出现溢出，然后tellp 没有显示正确的数字。那么，处理大（> 4GB）文件的方式是什么？

# database - 有损分解

> ID：12671362
> 
> 赞同：15
> 
> 时间：2012-10-01T10:14:28.550
> 
> 标签：database, database-normalization

为什么有损分解称为有损？我们在有损分解中究竟损失了什么？

有一个关系R。它被分解为两个关系R1和R2。

如果 R = (R1 JOIN R2) 那么它是无损连接分解。没关系。

如果 R 是 (R1 JOIN R2) 的子集，则有损连接分解。

这是有损连接分解，在连接 R1 和 R2 之后，与 R 相比，我们实际上获得了更多的记录。那么我们失去了什么。?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-08T14:11:43.337

由于我们正在处理某个实例 R，因此该关系包含固定数量的记录。它还隐含地包含有关哪些记录不存在的信息。如果 R1 和 R2 的连接产生额外的记录，我们就会失去信息完整性。

假设您使用以下关系 R = (SSN, Name, Address)：

```
 R
SSN     Name      Address
1111    Joe       1 Pine
2222    Alice     2 Oak
3333    Alice     3 Pine 
```

令 R1 =（SSN，姓名）和 R2 =（姓名，地址）。

```
 R1                     R2
SSN     Name     |     Name    Address
1111    Joe      |     Joe     1 Pine
2222    Alice    |     Alice   2 Oak
3333    Alice    |     Alice   3 Pine 
```

R1 和 R2 的连接将产生下表：

```
 R1 join R2
SSN     Name      Address
1111    Joe       1 Pine
2222    Alice     2 Oak
2222    Alice     3 Pine
3333    Alice     2 Oak
3333    Alice     3 Pine 
```

此示例中丢失的信息是人员 2222 和 3333 的地址。在原始关系 R 中，人员 2222 住在 2 Oak。在 R1 和 R2 的连接处，人 2222 要么住在 2 Oak 或 3 Pine——我们不再拥有此信息。

这就是额外信息如何导致有损分解。*记录*并没有丢失——我们丢失的是关于*哪些*记录在原始关系中的信息。

# c# - 如何清除浏览器历史记录并清除缓存？

> ID：12671371
> 
> 赞同：1
> 
> 时间：2012-10-01T10:14:55.293
> 
> 标签：c#, javascript, asp.net

我有一个登录页面和一个主页。用户可以使用用户名和密码从登录页面登录到主页。我想要实现的是：

**1) 用户从主页注销时，不应通过点击浏览器中的*后退*或*前进*按钮“登录”。**

**2）确定浏览器会存储主页的历史记录。但是当用户点击浏览器主页中的历史链接时，它应该被重定向到登录页面而不是主页。**

我尝试在主页的 page_load 事件中使用以下代码清除缓存：

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore();
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1)); 
```

但它仍然无法正常工作。任何形式的帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:58:57.763

在主页的 OnPrerender() 事件中使用以下代码。它对我有用。

```
 protected override void OnPreRender(EventArgs e)
        {
            base.OnPreRender(e);
            string sb;
            sb = "<script language=javascript>\n";
            sb += "window.history.forward(1);\n";
            sb += "\n</script>";
            ClientScript.RegisterClientScriptBlock(Page.GetType(), "clientScript", sb);
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T10:23:40.783

您如何存储登录信息？如果您正在使用会话变量，您可以在用户注销时清除会话，然后在需要让用户登录以查看的每个页面上检查以确保页面加载中存在会话变量，如果确实如此，则让用户继续，如果没有重定向到登录页面（您可以使用母版页快速完成此操作）

如果您使用 cookie 来存储登录信息，那么您可以在用户注销时使 cookie 过期

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T10:46:31.210

当用户登录时，保留他的用户 ID 或用户拥有的任何唯一 ID。当他单击注销时，取消设置用户 ID 会话。并在页面中添加几行

```
<?php
session_start();
$_SESSION['uid']=$uid;
if($uid=='')
{
header("location:loginpage.php");
}
?> 
```

它会工作的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T10:29:44.933

我有解决方案请在下面找到链接

希望你能得到你的答案

[堆栈溢出](https://stackoverflow.com/questions/12542760/how-to-prvent-visiting-the-page-after-logout/12543044#12543044)

或者

也可以从此[DotnetFundaa 中找到](http://www.dotnetfunda.com/codes/code1651-prevent-back-button-after-logout-in-aspnet.aspx)

在下面的页面加载放置代码

```
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.Now); 
```

# iphone - 用于按钮和文本字段的 iPhone 单 xib

> ID：12671373
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:04.670
> 
> 标签：iphone, xib

我有一个带有一个 .xib 文件的视图控制器

在某些特定的按钮操作上，我需要用按钮加载视图控制器，而在其他一些按钮操作上，我需要用文本字段加载视图。我可以用单个 xib 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:19:25.767

*有两个`UIView`s。添加`UITextField`到一个`UIView`，说**tView**。最初使 tView 隐藏。在另一个`UIView`，比如**mView**中，添加`UIButton`s. 当调用特定按钮操作时，取消隐藏**tView**并隐藏**mView**。希望这是你的要求！！*

# uitableview - 在 UIScrollView 中创建一个水平的、可重用的“单元格”

> ID：12671376
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:09.273
> 
> 标签：uitableview, uiscrollview, pagination

我想要创建类似于 Springboard 的东西，因此是具有多个页面的分页 UIScrollView（取决于通过 XML 查询返回的结果数量）。实际上类似于[这个 Apple 示例](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)。

每个页面将具有相同的布局，但将填充不同的数据（例如图像、标签等）

我对 iOS 开发比较陌生，有没有办法为此设计一个单元格，就像我设计一个自定义 UITableViewCell 一样？我意识到 UITableView 无论如何都继承自 UIScrollView ，但我从未听说过 UIScrollViewCell 或类似的东西。我正处于计划解决问题的早期阶段。理想情况下，它可以重复使用单元格，就像 TableView 可以让它们出列一样。

关于开始思考什么的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:41:13.900

A`UIScrollView`不提供类似于 a 的单元格的东西`UITableView`，它比表格视图更基本。与表格视图相比，您必须自己添加`UIScrollView`并安排它们。

如果你可能只为 iOS 6 开发，你可能想看看`UICollectionView`.

```
Collection views provide the same general function as table views except that a collection view is able to support more than just single-column layouts. 
```

如果您想支持除 iOS 6 之外的其他 iOS 版本，您可能会在[http://www.cocoacontrols.com](http://www.cocoacontrols.com)找到有用的东西。

# android - Android代码：如何在方法之间传递相同活动中的变量

> ID：12671377
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:08.507
> 
> 标签：android

我的布局上有 4 个按钮。一个是“正确答案”，3 个是“错误答案” 我已经为我的错误答案编写了一个常用方法，但是代码要求我按下那段代码中的不同按钮名称。我该如何管理？

这是我的代码

```
/* call method for a answer  */
    final Button rredButton=(Button)findViewById(R.id.RredButton);
    rredButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            LayoutInflater layoutInflater
            = (LayoutInflater)getBaseContext()      
            .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popupright, null);
            final PopupWindow popupWindow = new PopupWindow(               
                    popupView,                
                    LayoutParams.WRAP_CONTENT,                       
                    LayoutParams.WRAP_CONTENT);     
            Button btnNxtScr = (Button)popupView.findViewById(R.id.nextscreen);             
            btnNxtScr.setOnClickListener(new Button.OnClickListener(){     
                @Override     
                public void onClick(View v) {      
                    Intent myintent1 = new Intent(colorActivity.this,LearningTimeMenu.class);
                    startActivity(myintent1);
                }
            });
                    popupWindow.showAsDropDown(rredButton, 50, -300);
        }}); 
```

我试着这样做

```
final Button rblueButton=(Button)findViewById(R.id.RblueButton);
    rblueButton.setOnClickListener(new View.OnClickListener() {
        @Override     
        public void onClick(View arg0) {          
            createWrongPop();      
            }}); 
```

并在 createWrongPop() 方法中定义代码的布局充气器部分；但是这行代码 popupWindow.showAsDropDown(rredButton, 50, -330) 需要 3 个按钮中的每一个的按钮 ID。

如何将每个变量传递给方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:20:53.503

接受方法中的参数`createWrongPop()`并传递方法中接收到的视图`onClick`：

```
private void createWrongPop(View view){
    //Your logic here
    popupWindow.showAsDropDown(view, 50, -300);
}

final Button rblueButton=(Button)findViewById(R.id.RblueButton);
rblueButton.setOnClickListener(new View.OnClickListener() {
    @Override     
    public void onClick(View arg0) {          
        createWrongPop(arg0);      
    }
}); 
```

# http - 为什么用不同的用户代理访问相同的资源会产生不同的响应？

> ID：12671380
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:20.790
> 
> 标签：http

我有一些非常奇怪的事情我无法解释，我有一个主机`thehostexample.com`：

1.  当我通过 Safari 运行良好时，它会自动重定向到`thehostexample.com/fr/`
2.  当我经过时，`telnet`它告诉我 http 301，与`thehostexample.com/fr/`
3.  当我通过`wget`命令 ERREUR 403：禁止
4.  当我从 Perl 脚本（`LWP::UserAgent`或`LWP::Simple`）访问时 ERREUR 403: Forbidden

我不明白。（我将用户代理设置为遵循重定向。）

请一些帮助会非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:11:30.993

我发现它为什么不起作用，一定是 LWP::UserAgent 的错误！

如果我这样声明我的用户代理：

> 我的 $ua = LWP::UserAgent->new('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14');

然后它不起作用，但如果我这样声明：

> 我的 $ua = LWP::UserAgent->new();
> 
> $ua->agent('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14');

然后它起作用了，很奇怪吧？

希望它可以帮助！

# mod-rewrite - 如何重定向网址？

> ID：12671382
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:30.940
> 
> 标签：mod-rewrite, url-rewriting, redirect

我在 ubuntu 10.4 上使用 apache2 + tomcat。我在 Tomcat 服务器上运行，该服务器的 webapps 在 8080 上侦听

试图将**domain.com/category/post-name.html**重定向 到新的 url >

> **domain.com/newcategory/blogs/category/post-name**

实现这一目标的最佳方法是什么？

到目前为止，我...

```
RewriteCond %{REQUEST_URI} ^/[a-zA-z0-9]+/[a-zA-z0-9]+/(.*)?\.html$
RewriteRule ^/[a-zA-z0-9]+/[a-zA-z0-9]+/(.*)?\.html$ http://www.domain.com/newcategory/blogs/$1 [R=301,NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:04:14.277

看起来**post-name**会延续到重定向的 URL，**category**也是如此，但是**newcategory/blogs**部分必须进行硬编码，因为没有任何东西可以从旧 URL 中提取：

```
RewriteCond %{REQUEST_URI} !^/newcategory/blogs
RewriteRule ^/?([^/]+)/([^/]+)\.html$ http://www.domain.com/newcategory/blogs/$1/$2 [L,R=301] 
```

# c++ - 仅头文件库的好处

> ID：12671383
> 
> 赞同：141
> 
> 时间：2012-10-01T10:15:38.987
> 
> 标签：c++, header-only

仅标头库有什么好处，为什么要以这种方式编写它而不是将实现放入单独的文件中？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-01T13:04:41.287

仅标头库的好处：

*   简化构建过程。您不需要构建库，也不需要在构建的链接步骤中指定编译的库。如果您确实有一个已编译的库，您可能希望构建它的多个版本：一个启用调试编译，另一个启用优化，可能还有另一个去除符号。对于多平台系统，甚至可能更多。

仅标头库的缺点：

*   更大的目标文件。在某些源文件中使用的库中的每个内联方法也将在该源文件的编译目标文件中获得一个弱符号、行外定义。这会减慢编译器的速度，也会减慢链接器的速度。编译器必须生成所有这些膨胀，然后链接器必须将其过滤掉。

*   更长的编译。除了上面提到的膨胀问题之外，编译会花费更长的时间，因为头文件本身就比编译库大。需要为使用该库的每个源文件解析这些大标题。另一个因素是，仅头文件库中的那些头文件必须具有`#include`内联定义所需的头文件，以及将库构建为编译库时所需的头文件。

*   比较纠结的编译。`#include`由于仅标头库需要那些额外的 s，因此您会在仅标头库中获得更多依赖项。更改库中某些关键功能的实现，您可能需要重新编译整个项目。在编译库的源文件中进行更改，您所要做的就是重新编译该库源文件，使用新的 .o 文件更新编译库，然后重新链接应用程序。

*   人类更难阅读。即使有最好的文档，图书馆的用户也经常不得不求助于阅读图书馆的标题。仅标头库中的标头充满了妨碍理解接口的实现细节。使用已编译的库，您所看到的只是接口和对实现功能的简短评论，而这通常就是您想要的。这就是你应该想要的。您不必知道实现细节就可以知道如何使用该库。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-01T10:18:44.300

在某些情况下，仅标头库是唯一的选择，例如在处理模板时。

拥有一个只有头文件的库也意味着您不必担心可能使用该库的不同平台。当您分离实现时，您通常这样做是为了隐藏实现细节，并将库作为头文件和库（`lib`、`dll`或`.so`文件）的组合分发。这些当然必须针对您提供支持的所有不同操作系统/版本进行编译。

您也可以分发实现文件，但这对用户来说意味着一个额外的步骤 - 在使用之前编译您的库。

当然，这需要根据*具体情况而定*。例如，仅头文件库有时会增加~~代码大小 &~~编译时间。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-09-29T09:59:29.150

我知道这是一个旧线程，但没有人提到 ABI 接口或特定的编译器问题。所以我想我会的。

这基本上基于您编写带有标题的库以分发给人们或重用自己而不是将所有内容都放在标题中的概念。如果您正在考虑重用头文件和源文件并在每个项目中重新编译它们，那么这并不适用。

基本上，如果您编译您的 C++ 代码并使用一个编译器构建一个库，那么用户尝试将该库与不同的编译器或同一编译器的不同版本一起使用，那么由于二进制不兼容，您可能会遇到链接器错误或奇怪的运行时行为。

例如，编译器供应商经常在版本之间更改他们的 STL 实现。如果您在接受 std::vector 的库中有一个函数，那么它期望该类中的字节按照编译库时的排列方式排列。如果在新的编译器版本中，供应商对 std::vector 进行了效率改进，那么用户的代码会看到可能具有不同结构的新类并将该新结构传递到您的库中。一切都从那里走下坡路……这就是为什么建议不要跨库边界传递 STL 对象的原因。这同样适用于 C 运行时 (CRT) 类型。

在谈论 CRT 时，您的库和用户的源代码通常需要链接到同一个 CRT。使用 Visual Studio，如果您使用多线程 CRT 构建库，但用户链接到多线程调试 CRT，那么您将遇到链接问题，因为您的库可能找不到它需要的符号。我不记得它是哪个函数，但是对于 Visual Studio 2015，Microsoft 内联了一个 CRT 函数。突然，它出现在标头而不是 CRT 库中，因此希望在链接时找到它的库不再能够做到这一点，这会产生链接错误。结果是这些库需要使用 Visual Studio 2015 重新编译。

如果您使用 Windows API，但您使用与库用户不同的 Unicode 设置进行构建，也可能会出现链接错误或奇怪的行为。这是因为 Windows API 具有使用 Unicode 或 ASCII 字符串和宏/定义的函数，它们会根据项目的 Unicode 设置自动使用正确的类型。如果您通过库边界传递一个错误类型的字符串，那么事情会在运行时中断。或者您可能会发现该程序一开始就没有链接。

这些事情也适用于从其他第三方库（例如特征向量或 GSL 矩阵）跨库边界传递对象/类型。如果第 3 方库在您编译库和您的用户编译他们的代码之间更改了它们的标题，那么事情就会中断。

基本上为了安全起见，您可以跨库边界传递的唯一内容是内置类型和普通旧数据 (POD)。理想情况下，任何 POD 都应该在您自己的标头中定义的结构中，并且不依赖任何第三方标头。

如果您提供仅标头库，那么所有代码​​都将使用相同的编译器设置和相同的标头进行编译，因此很多这些问题都会消失（提供您和您的用户使用的第三方库的版本与 API 兼容）。

但是，上面已经提到了一些负面因素，例如增加了编译时间。此外，您可能正在经营一家企业，因此您可能不想将所有源代码实现细节交给所有用户，以防他们中的一个人窃取它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-01T12:27:35.170

主要的“好处”是它要求您提供源代码，因此您最终会收到机器上的错误报告以及您从未听说过的编译器。当库完全是模板时，您没有太多选择，但是当您有选择时，仅标头通常是一个糟糕的工程选择。（另一方面，当然，标题仅意味着您不必记录任何集成过程。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-28T16:53:33.853

**内联可以通过链接时间优化（LTO）来完成**

我想强调这一点，因为它降低了仅标头库的两个主要优点之一的价值：“您需要对标头进行内联定义”。

一个最小的具体示例显示在：[Link-time optimization and inline](https://stackoverflow.com/questions/7046547/link-time-optimization-and-inline/61367211#61367211)

因此，您只需传递一个标志，就可以跨目标文件进行内联，无需任何重构工作，不再需要在标题中保留定义。

然而，LTO 也可能有其自身的缺点：[是否有理由不使用链接时优化 (LTO)？](https://stackoverflow.com/questions/23736507/is-there-a-reason-why-not-to-use-link-time-optimization-lto)

# android - 异步任务的内存泄漏

> ID：12671384
> 
> 赞同：3
> 
> 时间：2012-10-01T10:15:50.087
> 
> 标签：android

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:24:57.187

我认为问题出在 doInBackground 方法中的 BitmapFactory 上。这种解码会消耗大量内存并且还存在一些已知的泄漏。我总是缩放它以减少内存消耗，而不是解码整个图像。有一个例子：

```
 //decodes image and scales it to reduce memory consumption
  private static Bitmap decodeImage(InputStream in, InputStream in2){

          //Decode image size
          BitmapFactory.Options o = new BitmapFactory.Options();
          o.inJustDecodeBounds = true;
          BitmapFactory.decodeStream(in,null,o);

          //The new size we want to scale to
          final int REQUIRED_SIZE=100;

          //Find the correct scale value. It should be the power of 2.
          int scale=1;
          while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
              scale*=2;

          //Decode with inSampleSize
          BitmapFactory.Options o2 = new BitmapFactory.Options();
          o2.inSampleSize=scale;
          o2s.inTempStorage = new byte[16*1024];

          return BitmapFactory.decodeStream(in2, null, o2);

  } 
```

**注意：**您需要打开两个输入流实例。

其他建议是每次图像不再有用时调用 Bitmap 中的 clear() 方法。

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:49:46.900

尝试将您的任务设置为：

```
 DownloadBitmapTask task = new DownloadBitmapTask(context,image, 
                holder.cellProgress); 
```

位图下载完成时为空。您没有关闭/处置在 AsyncTask 中分配的所有资源，并且 GC 无法释放它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:44:59.927

我认为您应该在每次打开时关闭输入流，如下所示。

```
InputStream iStream = null;
try{
     URLConnection conn = (new URL(args[0])).openConnection();
     iStream = conn.getInputStream(); 
     itmap = BitmapFactory.decodeStream(iStream);

     done = true;
   }catch(IOException ex){
      failedTries++;
      try {
           Thread.sleep(100);
          } catch (InterruptedException e) {
          }
   } finally {
      if(iStream != null)
          iStream.close();
   } 
```

**注意：-**建议在使用后**关闭**任何流。

# java - HSQL 有效过滤 NaN

> ID：12671388
> 
> 赞同：0
> 
> 时间：2012-10-01T10:15:58.633
> 
> 标签：java, hsqldb

我有一个由第 3 方代码读取的 HSQL 数据库。此第 3 方代码将某些数值转换为 Double.NaN。我的任务是编写一个可以将这些数值替换为 null 的 sql 查询。

在这个项目[HSQLDB Statement and Java NaN doubles](https://stackoverflow.com/questions/5140371/hsqldb-statement-and-java-nan-doubles)我读到 sqrt(-1) 或 0.0/0.0 将被转换为 NaN。但是，对于这个值，相等性测试有点奇怪。考虑这个查询：

```
select
    casewhen(1=1, 1, 0), -- this one is to make sure that casewhen works as we expect
    casewhen(sqrt(-1)=sqrt(-1), 1, 0), -- this one looks good, we'll see
    casewhen(sqrt(-1)=1, 1, 0) -- this is the odd part, we'll see
from mytable; -- any table with at least 1 row will do 
```

它返回如下行：

```
C1 C2 C3
 1  1  1 
```

看起来 sqrt(-1) 等于每个数字。我可以这样调整它：

```
select
    casewhen(1=1, 1, 0),
    casewhen(
        position(
                 '0E0/0E0' in
                 cast(sqrt(-1) to varchar(40))
                ) = 1,
        'NaN', 'Numeric')
 from mytable; 
```

它返回我需要的东西：

```
C1  C2
 1 NaN 
```

但我不满意：这个解决方案需要从 numeric 转换为 varchar，然后运行 ​​position 函数并检查它的返回值以查看它是否会转换为 NaN。您知道在 SQL 级别上更有效的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:18:17.667

这在 HSQLDB 2.2.9（或更高版本）中可以正常工作。

第一个 SELECT 语句返回 1,1,0

试试这个，它只返回具有 NaN 值的行：

```
create table t (c varchar(40), d double)
insert into t values (cast (sqrt(-1) as varchar(40)), sqrt(-1))
insert into t values (cast (-1 as varchar(40)), -1)
select * from t where d = sqrt(-1) 
```

旧版本的行为类似于您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:00:17.437

我找到了一个更快的解决方法：

```
select
    casewhen(5 = 5 + 1, 1, 0),
    casewhen(sqrt(-1) = sqrt(-1) , 1, 0)
from mytable; 
```

将返回如下行：

```
C1 C2
 0  1 
```

因此， (x = x + 1) 仅适用于 NaN 值。

# objective-c - 手动滚动表格视图时单元格图像消失

> ID：12671391
> 
> 赞同：1
> 
> 时间：2012-10-01T10:16:25.500
> 
> 标签：objective-c, xcode, uitableview

我的班级有一个 tableview 。基于选定的索引，我正在重新加载我的 TableView 行

```
-(void)viewWillAppear:(BOOL)animated{

   [super viewWillAppear:YES];

    [self.stopsTable reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath  

   indexPathForRow:rowNum inSection:0]] withRowAnimation:UITableViewRowAnimationFade];

} 
```

rowNum 将被设置为：rowNum = indexPath.row

基于此，我使特定单元格的隐藏图像可见。这很好用。但

当我手动滚动我的表格视图时（即当我的单元格离开视图或可见性时）我隐藏的单元格图像消失了，因为值

因为 rowNum 将丢失。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:34:21.213

发生这种情况是因为当单元格不可见时，`cellForRowAtIndexPath:`会再次调用该单元格，然后创建一个新单元格或使用现有单元格，具体取决于`cellIndentifier`

因此，如果您使用的单元格数量较少，您可以`cellIdentifier`为不同的单元格分配不同的 s，然后即使单元格不可见，它仍然会保持相同的单元格

您可以按如下方式执行此操作：在`cellForRowAtIndexPath:`

```
 NSString *str = [NSString StringWithFormat:@"cell%d",indexpath.row];

 cell = [UITableView dequeReusableCellWithCellIdentifier:str];

 if(cell == nil)
 {
  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:str];
 }

 return cell ; 
```

这肯定会工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:17:43.907

虽然我不确定为什么你在 viewWillAppear 中有这样的代码，但这是我理解的

*   你改变点击单元格的显示
*   您的问题是，当您滚动时，单元格的状态会丢失

为此，我可以提出以下建议：

在您的视图控制器中，声明一个`NSMutableArray`存储每个单元格状态的属性（例如）。在`cellForRowAtIndexPath`方法中，使用正确的状态初始化您的单元格

为了给你一些背景信息，默认情况下，单元格在 iOS 中被重用以提高性能。因此，您返回的 UITableViewCell 对象会`cellForRowAtIndexPath`在其他行中不断重用。因此，当您滚动时，单元格上的设置状态将不会持续存在（同一对象将用于另一行）。这就是为什么您应该按照我的建议通过外部属性维护该状态信息

# msbuild - 自动慢速 Cheetah 构建方法

> ID：12671392
> 
> 赞同：9
> 
> 时间：2012-10-01T10:16:55.430
> 
> 标签：msbuild, build-process, build-automation, slowcheetah, config-transformation

> 我不想在所有构建服务器上安装 Slow Cheetah。

我们正在使用 Slow Cheetah 进行配置转换，它工作得非常好。它会生成多个 app.config 文件，我们会根据需要对它们进行更改。

我们已经设置了几台服务器。他们都有自己的代码存储库，他们从命令行提取代码并相应地构建包。这些代码中有那些配置文件。但是，当我们从命令行编译应用程序时，如果没有安装慢 cheetah，则不会通过转换生成包。否则它工作正常。

我们永远不知道何时设置了新服务器和新用户，因此不可能在每个人上都安装 Slow cheetah

有可能以某种方式在应用程序中使用慢 cheetah dll 并从中手动调用转换方法吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T11:04:42.737

此处定义的详细分步过程

[http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx](http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx)

谢谢

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T10:49:21.377

作为 SlowCheetah 的替代方案，可以通过手动编辑项目文件来处理此功能。设置起来有点麻烦，但这确实意味着您不需要额外的 DLL。

在文本编辑器中打开您的项目文件。在项目文件的底部，就在结束标记之前，包括以下内容：

```
<UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />
<Target Name="AfterCompile" Condition="exists('app.$(Configuration).config')">
    <!-- Generate transformed app config in the intermediate directory -->
    <TransformXml Source="app.config" Destination="$(IntermediateOutputPath)$(TargetFileName).config" Transform="app.$(Configuration).config" />
    <!-- Force build process to use the transformed configuration file from now on. -->
    <ItemGroup>
        <AppConfigWithTargetPath Remove="app.config" />
        <AppConfigWithTargetPath Include="$(IntermediateOutputPath)$(TargetFileName).config">
            <TargetPath>$(TargetFileName).config</TargetPath>
        </AppConfigWithTargetPath>
    </ItemGroup>
</Target> 
```

然后，在您的项目文件中找到该行并将其替换为以下内容：

```
<ItemGroup>
    <Content Include="App.config" />
    <Content Include="App.Debug.config">
        <DependentUpon>App.config</DependentUpon>
    </Content>
    <Content Include="App.Release.config">
        <DependentUpon>App.config</DependentUpon>
    </Content>
</ItemGroup> 
```

您需要为您添加的每个配置添加一个额外的内容包含 - 不幸的是，使用此方法您无法获得简单的“添加转换”上下文菜单。

之后就是在你的项目目录中创建文件，然后你就可以开始了。它不像 SlowCheetah 那样流畅，但它确实使您的代码具有可移植性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-07T22:42:07.957

最新版本的 SlowCheetah (2.5.14) 在[Nuget](https://www.nuget.org/packages/SlowCheetah/)上可用。通过 nuget 添加时，它存储在`packages`本地解决方案目录中的文件夹中（就像所有 nuget 包一样），这意味着它现在应该可以在任何开箱即用的构建服务器上工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-01T10:35:45.717

我在应用程序中包含如下所示的 SlowCheetah，以避免将其安装在构建解决方案的服务器上：

1.  在我的解决方案根目录中，我有一个文件夹工具，其中包含（除其他外）SlowCheetah
    1.  我的项目/工具/SlowCheetah/SlowCheetah.Tasks.dll
    2.  我的项目/工具/SlowCheetah/SlowCheetah.Transforms.targets
2.  在（web-）应用程序项目的 .csproj 文件中，我有这个：

```
 <PropertyGroup>
          <SlowCheetahTargets Condition=" '$(SlowCheetahTargets)'=='' ">$(MSBuildProjectDirectory)\..\Tools\SlowCheetah\SlowCheetah.Transforms.targets  </SlowCheetahTargets>
   </PropertyGroup> 
```

和这个：

```
<Import Project="$(SlowCheetahTargets)" Condition="Exists('$(SlowCheetahTargets)')" /> 
```

..它似乎可以很好地处理这项工作，即使在从 TeamCity 构建/发布时也是如此。

编辑：

当您将 SlowCheetah 安装到 Visual Studio中后，您将找到`%localappdata%\Microsoft\MSBuild\SlowCheetah\v1`( )中提到的两个文件。`drive:\Users\yourusername\AppData\Local\Microsoft\MSBuild\SlowCheetah\v1`

# android - 视图类上的 OnClickListener

> ID：12671397
> 
> 赞同：-1
> 
> 时间：2012-10-01T10:17:30.693
> 
> 标签：android

谁能告诉我如何在视图类中创建一个 onclicklistenr ..

我创建了一个应用程序，例如通过从相机获取图像在画布上绘图。我在视图类中使用框架布局创建了一些自定义按钮。但我无法在视图类中创建 onclicklistener ....

这是我在画布上绘制的子活动

```
 public class MesureSizeActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.button);
     }
    } 
```

我的视图类是

```
public class MyView extends View {

private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;
private Paint mBitmapPaint;
private Paint mPaint;
boolean calibrate=true;
int calibrate_x;
int calibrate_y;
int calibrate_radius;

//Event listener controller

boolean listener_calibrate= true;

public MyView(Context c) {
    super(c);
    mBitmap = MainActivity.getBitmap();
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFFFF11);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    // mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);
}

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mBitmap = MainActivity.getBitmap();
    mPath = new Path();
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFFFF11);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    // mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);
}

public MyView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    mBitmap = Bitmap.createScaledBitmap(mBitmap, w, h, true);
    mCanvas = new Canvas(mBitmap);
    calibrate_x = w /2;
    calibrate_y = h/2;
    calibrate_radius = 50;

}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(0xFFAAAAAA);

    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

      canvas.drawCircle(calibrate_x,calibrate_y,calibrate_radius,mPaint);
    canvas.drawPath(mPath, mPaint);

}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        // mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();

        invalidate();
        break;
    }
    return true;
  }

 public void onClick(View v) {

  if(v.getId() == R.id.up)
  {
    //Do some thing

  }

 if(v.getId() == R.id.down)
 {
    //Do some thing

  }

 }

 } 
```

我的xml看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
        android:visibility="visible"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android">

<com.example.sizemesurment_1.MyView
    android:id="@+id/DrawViewId"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    </com.example.sizemesurment_1.MyView >

 <RelativeLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:gravity="bottom">

    <ImageButton
        android:id="@+id/up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="80dp"
         android:onClick="ButtonOnClick"          
        android:src="@drawable/up" />

    <ImageButton
        android:id="@+id/down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="120dp"  
        android:onClick="ButtonOnClick"    
        android:src="@drawable/down" />

    </RelativeLayout>
</FrameLayout> 
```

当我按下按钮时，出现如下错误

在 id 为“up”的视图类 android.widget.Button 上的 onClick 处理程序的活动类 com.example.sizemesurment_1.MesureSizeActivity 中找不到方法 ButtonOnClick(View)

我做错什么了吗..我是初学者....请帮忙....

提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:20:38.187

`ButtonOnClick`在您的活动类中添加方法...

```
public class MesureSizeActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.button);
     }

     public void ButtonOnClick(View view){
            //here you can handle click event
     }
    } 
```

# git - 子目录的最新提交哈希

> ID：12671404
> 
> 赞同：3
> 
> 时间：2012-10-01T10:18:21.980
> 
> 标签：git

我需要检查 git repo 子目录中的最新更改。我想在一行中获取最新的提交信息（sha、作者、消息，可能是日期）。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:23:11.537

```
git log -n 1 --format="%h %aN %s %ad" -- $directory 
```

# bash - Bash：提取字符串的一部分

> ID：12671406
> 
> 赞同：44
> 
> 时间：2012-10-01T10:18:35.873
> 
> 标签：bash

假设我有字符串“Memory Used: 19.54M”我将如何从中提取 19.54？19.54 会经常变化，所以我需要将它存储在一个变量中，并将其与下一次迭代的值进行比较。

我想我需要一些 grep 和 regex 的组合，但我从来没有真正理解过 regex..

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-01T10:25:48.883

您可能想要*提取*它而不是*删除*它。您可以使用参数扩展来提取值：

```
var="Memory Used: 19.54M"
var=${var#*: }            # Remove everything up to a colon and space
var=${var%M}              # Remove the M at the end 
```

请注意，bash 只能比较整数，它不支持浮点运算。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-01T15:09:47.287

**其他可能的解决方案：**

与`grep`：

```
var="Memory Used: 19.54M"
var=`echo "$var" | grep -o "[0-9.]\+"` 
```

与`sed`：

```
var="Memory Used: 19.54M"
var=`echo "$var" | sed 's/.*\ \([0-9\.]\+\).*/\1/g'` 
```

与`cut`：

```
var="Memory Used: 19.54M"
var=`echo "$var" | cut -d ' ' -f 3 | cut -d 'M' -f 1` 
```

与`awk`：

```
var="Memory Used: 19.54M"
var=`echo "$var" | awk -F'[M ]' '{print $4}'` 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-11T18:46:12.817

您可以将 bash 正则表达式支持与`=~`运算符一起使用，如下所示：

```
var="Memory Used: 19.54M"
if [[ $var =~ Memory\ Used:\ (.+)M ]]; then
    echo ${BASH_REMATCH[1]}
fi 
```

这将打印`19.54`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T10:43:10.827

```
> echo "Memory Used: 19.54M" | perl -pe 's/\d+\.\d+//g'
Memory Used: M 
```

# c++ - 带有计数器的循环的 CUDA 索引

> ID：12671408
> 
> 赞同：0
> 
> 时间：2012-10-01T10:18:39.857
> 
> 标签：c++, cuda, gpu, gpgpu

我有一个嵌套循环，中间有一个计数器。我已经设法将 CUDA 索引用于外部循环，但我想不出任何方法可以在这种循环中利用更多的并行性。你有过类似的工作经验吗？

```
int i = threadIdx.x + blockIdx.x * blockDim.x;
if (i < Nx) {
    counter = 0;
    for (k = 0; k < Ny; k++) {

        d_V[i*Ny + k] = 0;

        if ( d_X[i*Ny + k] >= 2e2 ) {

             /* do stuff with i and k and counter i.e.*/
                d_example[i*length + counter] = k;
                    ...
             /* increment counter */
             counter++;
        }
    }
} 
```

我看到的问题是如何处理计数器，`k`也可以在 CUDA 中使用`threadIdx.y + blockIdx.y * blockDim.y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:03:39.110

在循环迭代之间使用计数器/循环变量是并行化的自然对立面。理想的并行循环具有可以以任何顺序运行的迭代，彼此不知道。不幸的是，一个共同的变量使它既依赖于顺序又相互感知。

看起来您正在使用计数器`d_example`无间隙地打包阵列。通过浪费一些内存，这种事情很可能在计算时间上更有效；如果您让 d_example 中不会被设置的元素保持为零，通过低效打包`d_example`，您可以稍后在任何昂贵的计算步骤之后对 d_example 执行过滤器。

实际上，您甚至可以在读取数组时将过滤留给修改过的迭代器，它只会跳过任何零值。如果零是数组中的有效值，只需使用特定的 NaN 值或单独的掩码数组。

```
int i = threadIdx.x + blockIdx.x * blockDim.x;
if (i < Nx) {
    for (k = 0; k < Ny; k++) {

        d_V[i*Ny + k] = 0;

        if ( d_X[i*Ny + k] >= 2e2 ) {

             /* do stuff with i and k and counter i.e.*/
                d_example[i*length + i*k] = k;
                d_examask[i*length + i*k] = 1;
                    ...
             /* increment counter */
        } else {
             d_examask[i*length+i*k] = 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:18:34.340

请注意，您可以使用 threadIDx.y 作为数组中的第二个索引。有关更多信息，请参见此处：[http ://www.cs.sunysb.edu/~mueller/teaching/cse591_GPU/threads.pdf](http://www.cs.sunysb.edu/~mueller/teaching/cse591_GPU/threads.pdf)

例如，如果您有二维块，您可以使用 threadix.x 和 threadix.y 作为您的索引，并添加工作组的偏移量 (blockidx.x * blockDim.x) 作为您的偏移量。

由于 GPU 上的分支非常昂贵，并且给定工作组中的所有线程将始终等待组中的所有任务继续执行，因此最好简单地计算所有元素并丢弃不需要的元素，如果可能的话，这可能会完全避免使用计数器。如果没有，最好的解决方案是在 phoad 在他的评论中指定的全局计数器上使用 CUDA api 的原子增量功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:48:13.427

如果可能的话，您可以使用 cudpp 或推力（库，实现并行函数，如 remove_if 或 compact - 东西，你有什么例子）。

[库普](http://code.google.com/p/cudpp/)

[推力](http://code.google.com/p/thrust/)

您可以在这些页面上找到简单的示例以及如何使用它们。我更喜欢cudpp，因为恕我直言比推力更快。

# oracle - JDBC-ODBC 桥中每个连接的唯一一个打开语句限制是什么？

> ID：12671417
> 
> 赞同：0
> 
> 时间：2012-10-01T10:19:23.930
> 
> 标签：oracle, jdbc, concurrency, odbc, jdbc-odbc

[有人可以解释/详细说明JDBC ODBC 常见问题列表](http://www.oracle.com/technetwork/java/index-138427.html#15)中提到的以下限制吗

*   - JDBC-ODBC 桥是否支持每个连接的多个并发打开语句？
    不可以。使用 JDBC-ODBC 桥时，**每个连接只能打开一个 Statement 对象。***

我尝试使用 JDBC/ODBC 桥接驱动器打开多个语句，但没有遇到任何问题。

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
//Class.forName("oracle.jdbc.driver.OracleDriver");
Connection conn =  DriverManager.getConnection ("jdbc:odbc:MyDSN", "user", "pwd");
Statement stmt1 = conn.createStatement ();
Statement stmt2 = conn.createStatement ();
ResultSet rs1 = stmt1.executeQuery("select COL1 from TAB1");
ResultSet rs2 = stmt2.executeQuery("select COL2 from TAB2");
if (rs1.next() )
//print COL1
if (rs2.next() )
//print COL2

//close all resources

-- DatabaseMetaData --
getDriverName() JDBC-ODBC Bridge (msorcl32.dll)
getJDBCMajorVersion() 2
getDriverVersion() 2.0001 (02.575.1132) 
```

# ios - iOS 6 Facebook 发布过程以“remote_app_id 与存储的 id 不匹配”结束

> ID：12671420
> 
> 赞同：46
> 
> 时间：2012-10-01T10:19:38.983
> 
> 标签：ios, iphone, objective-c, facebook

这是我关于在 Facebook 上发帖的第三个问题。

虽然这可能与[Mac OS X Facebook login failed 重复 - 没有为应用存储 remote_app_id](https://stackoverflow.com/questions/12555799/mac-os-x-facebook-login-failed-no-stored-remote-app-id-for-app)但我决定发布单独的问题，因为我们这里有 iOS 但没有 MAC OS。

几天前，我发布了一个问题[iOS 6 Facebook 发布程序最终出现“remote_app_id 与存储的 id 不匹配”错误](https://stackoverflow.com/questions/12644229/ios-6-facebook-posting-procedure-ends-up-with-permissions-alert-view)问题仍然相同我无法执行发布但现在我遇到了错误：

`error is: Error Domain=com.apple.accounts Code=7 "The Facebook server could not fulfill this access request: remote_app_id does not match stored id." UserInfo=0xa260270 {NSLocalizedDescription=The Facebook server could not fulfill this access request: remote_app_id does not match stored id.}`

您可以在我之前的问题中找到的代码。
有谁知道发生了什么？
什么是远程和存储的应用程序 ID？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-10-01T14:50:30.537

使用 iOS6 Accounts API 进行身份验证时会发生这种情况。

要使其正常工作，您所要做的就是：

*   登录 developer.facebook.com
*   将您的应用设置为 iOS 原生应用
*   输入您应用的捆绑包 ID。

![截屏](../Images/446f5cc1de2bf0b5dcdf9753b9f594d1.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-10T10:19:01.233

只需将您在 xcode 中的捆绑包 ID 复制并粘贴到 facebook 想要捆绑包 ID 的位置

示例图片在这里[http://kosovich.org.ua/tmp/facebook_ios6_app_howto.png](http://kosovich.org.ua/tmp/facebook_ios6_app_howto.png)

例如，您的捆绑包 ID 名为 com.parse。（例如 com.parse.myDateApp），但将其放入捆绑 ID。并确保选中 Facebook 登录框

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-07T09:04:49.213

我们遇到了同样的问题，但由于 Facebook 正在改变布局，我再次发布解决了我们的图片问题的方法。该解决方案类似于 Andrew Kosovich 的回答，但新界面有一些变化。

1.  **登录**您的[Facebook 开发人员](https://developers.facebook.com)并选择有问题的应用。

2.  转到应用程序的设置

    ![设置截图](../Images/8ef62b78664df3d0083db1f7d532cc4f.png)

3.  **检查**是否已添加**iOS 。**如果您找到 iOS 部分，**请转到第 4 步**，否则通过单击**添加平台**按钮添加它。

    ![添加平台截图](../Images/7c5336ab4dad476c11614199044a7ebf.png)

4.  在相应的框中输入正确的应用程序**包 ID 。**

    ![iOS平台截图](../Images/de83fa488e064a14d06eb61fe87580c7.png)

输入正确的详细信息后，使用 Facebook SDK 登录应该可以工作。

***警告：不要忘记在特定 iOS 设备的设置应用程序中启用 Facebook 访问您的应用程序。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T11:24:11.267

当您注册developers.facebook.com 时，您会获得一个独特的ID [http://developers.facebook.com/](http://developers.facebook.com/)

在那里注册您的应用程序，您将获得一个唯一的应用程序 ID 和秘密 ID，当您使用 facebook sdk 集成您的应用程序时，您必须使用它

然后将 fbappname 和 fbappid 输入到 plist 中，这将让您创建会话

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-25T16:28:06.533

Facebook 应该知道某个特定应用程序的所有开发者。当应用程序处于沙盒模式时（即只有开发人员可以访问），所有想要使用 Facebook 平台来测试/开发应用程序的用户都必须添加为开发人员。

1.  转到[https://developers.facebook.com](https://developers.facebook.com)
2.  你的应用
3.  角色
4.  添加开发者/管理员的 Facebook ID

要知道您的 Facebook ID：[findmyfacebookid.com](http://findmyfacebookid.com)

# atk4 - atk4 MVCForm 中存储的日期值无效

> ID：12671425
> 
> 赞同：2
> 
> 时间：2012-10-01T10:20:06.830
> 
> 标签：atk4

我使用 MVCForm 创建了一个表单并设置了模型类扩展 Model_Table。在模型类中，我有一个日期字段。我尝试编辑现有记录（在模型中使用 GET 和 loadData()），但是日期字段填充了无效数据，例如，如果我保存 10/01/2012 (M/d/Y) ，它填充了 01/10/2012

我有以下日期配置

```
$config['locale']['time']='H:i:s';
$config['locale']['date']='m/d/Y';
$config['locale']['date_js']='mm/dd/yy';
$config['locale']['datetime']='m/d/Y H:i:s'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:22:11.467

查看这些 Github 链接。也许你可以在那里找到有用的东西。

[https://github.com/atk4/atk4/issues/92](https://github.com/atk4/atk4/issues/92)

[https://github.com/atk4/atk4/issues/89](https://github.com/atk4/atk4/issues/89)

[https://github.com/atk4/atk4/issues/90](https://github.com/atk4/atk4/issues/90)

我正在处理自定义日期，也需要日期时间，但现在已经暂停了这个问题，因为它在我的项目中具有较低的优先级。

# android - Android - 黑色背景变成灰色

> ID：12671430
> 
> 赞同：6
> 
> 时间：2012-10-01T10:20:29.400
> 
> 标签：android, android-layout

我明确地为我的 LinearLayout 的背景定义了黑色（在我的 XML 中使用 @android:color/black），但有时（通常在屏幕旋转之后），黑色变成灰色（或透明黑色）。

这个问题出现在许多设备上：模拟器、Acer Liquid (Android 2.2) 和 Galaxy Nexus (Android 4.1)。

截图：[错误视图](http://pix.keuse.fr/?v=buggy.png)//[不是错误视图](http://pix.keuse.fr/?v=notbuggy.png)

这是我的 XML 和活动代码：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="150dp"
            android:minHeight="150dp">

            <ImageView
                android:id="@+id/projectview_description_image"
                android:layout_width="match_parent"
                android:layout_height="150dp"
                android:contentDescription="@string/projectview_description_image_description"
                android:scaleType="centerCrop"
                android:src="@drawable/project_nophoto" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:orientation="vertical"
                android:id="@+id/projectview_description_overlay"
                android:paddingTop="5dp"
                android:paddingLeft="10dp"
                android:paddingBottom="5dp"
                android:background="@android:color/black"
                android:height="35dp">

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/projectview_description_title"
                    android:textAllCaps="true"
                    android:textColor="@android:color/white"
                    android:textSize="20dp"
                    android:textStyle="bold"/>

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/projectview_description_baseline"
                    android:textColor="@android:color/white"
                    android:textStyle="italic" />

            </LinearLayout>

        </RelativeLayout>

        <!-- This LinearLayout background is buggy -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="40dp"
            android:orientation="horizontal"
            android:background="@android:color/black">

            <ImageView
                android:layout_width="175dp"
                android:layout_height="25dp"
                android:layout_gravity="center_vertical"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:scaleType="fitCenter"
                android:src="@drawable/project_status_finish" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:gravity="right"
                android:paddingRight="10dp"
                android:text="@string/projectview_description_website"
                android:textColor="@color/website_link"
                android:textSize="15dp"
                android:id="@+id/projectview_description_website" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:id="@+id/projectview_description_about_container"
            android:padding="10dp"
            android:paddingBottom="0dp">

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/projectview_description_about"
                android:textAllCaps="true"
                android:textStyle="bold" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:id="@+id/projectview_description_about_text" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:id="@+id/projectview_description_questions_container" />

    </LinearLayout>

</ScrollView> 
```

活动：

```
public class ProjectViewActivity extends Activity implements OnClickListener {
    private boolean displayMenu = false;
    private Intent shareIntent;
    private FavoriteSqlite db;
    private I4pProjectTranslation project;

    @TargetApi(14)
    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        if(displayMenu) {
            // Inflate menu only if it hasn't been done before
            if(menu.size() == 0) {
                // Inflating the menu
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.projectview, menu);

                // Creating share intent
                Intent prepareShareIntent = new Intent(Intent.ACTION_SEND);
                prepareShareIntent.putExtra(Intent.EXTRA_TEXT, UriHelper.getProjectUrl(project));
                prepareShareIntent.putExtra(Intent.EXTRA_SUBJECT, project.getTitle());
                prepareShareIntent.setType("text/plain");
                shareIntent = Intent.createChooser(prepareShareIntent, getResources().getText(R.string.projectview_menu_share_dialog));
            }

            // Defining favorite state
            MenuItem favoriteItem = menu.getItem(0);
            if(db.isFavorite(project))
                favoriteItem.setTitle(R.string.projectview_menu_favorites_remove);
            else
                favoriteItem.setTitle(R.string.projectview_menu_favorites_add);
        }
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
        case android.R.id.home:
            if(getIntent().getData() != null) {
                Intent intent = new Intent(this, HomepageActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent);
            } else 
                finish();
            break;
        case R.id.projectview_favorite:
            Toast t;
            if(db.isFavorite(project)) {
                db.removeFavorite(project);
                t = Toast.makeText(this, getResources().getString(R.string.projectview_toast_favorites_remove, project.getTitle()), Toast.LENGTH_SHORT);
            } else {
                db.addFavorite(project);
                t = Toast.makeText(this, getResources().getString(R.string.projectview_toast_favorites_add, project.getTitle()), Toast.LENGTH_SHORT);
            }
            t.show();
            break;
        case R.id.projectview_share:
            startActivity(shareIntent);
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    @TargetApi(11)
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(Build.VERSION.SDK_INT < 11)
            requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.loading);
        db = new FavoriteSqlite(this);

        if(Build.VERSION.SDK_INT >= 11)
            getActionBar().setDisplayHomeAsUpEnabled(true);

        project = (I4pProjectTranslation) getLastNonConfigurationInstance();
        if(project != null)
            displayProject();
        else {
            String projectLang;
            String projectSlug;

            Uri data = getIntent().getData();
            if(data != null) {
                List<String> path = data.getPathSegments();
                projectLang = path.get(0);
                projectSlug = path.get(2);
            } else {
                Bundle extras = getIntent().getExtras();

                if(extras.containsKey("project_title"))
                    setTitle(extras.getString("project_title"));

                projectLang = extras.getString("project_lang");
                projectSlug = extras.getString("project_slug");
            }

            ProjectViewHandler handler = new ProjectViewHandler(this);
            ProjectViewThread thread = new ProjectViewThread(handler, projectLang, projectSlug);

            thread.start();
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        return project;
    }

    public void setProject(I4pProjectTranslation p) {
        project = p;
    }

    @TargetApi(11)
    public void displayProject() {
        setContentView(R.layout.projectview_description);
        displayMenu = true;
        if(Build.VERSION.SDK_INT >= 11)
            invalidateOptionsMenu(); // Rebuild the menu

        setTitle(project.getTitle());

        LinearLayout overlay = (LinearLayout) findViewById(R.id.projectview_description_overlay);
        overlay.getBackground().setAlpha(127);

        if(project.getProject().getPictures().size() > 0) {
            ImageView image = (ImageView) findViewById(R.id.projectview_description_image);
            image.setImageBitmap(project.getProject().getPictures().get(0).getImageBitmap());
        }

        TextView title = (TextView) findViewById(R.id.projectview_description_title);
        title.setText(project.getTitle());

        TextView baseline = (TextView) findViewById(R.id.projectview_description_baseline);
        baseline.setText(project.getBaseline());

        TextView website = (TextView) findViewById(R.id.projectview_description_website);
        if("".equals(project.getProject().getWebsite()))
            website.setVisibility(View.GONE);
        else
            website.setOnClickListener(this);

        if("".equals(project.getAboutSection())) {
            LinearLayout aboutContainer = (LinearLayout) findViewById(R.id.projectview_description_about_container);
            aboutContainer.setVisibility(View.GONE);
        } else {
            TextView aboutText = (TextView) findViewById(R.id.projectview_description_about_text);
            aboutText.setText(project.getAboutSection());
        }

        LinearLayout questions = (LinearLayout) findViewById(R.id.projectview_description_questions_container);
        for(Question question : project.getProject().getQuestions()) {
            if(question.getAnswer() != null) {
                LinearLayout questionLayout = (LinearLayout) getLayoutInflater().inflate(R.layout.projectview_question, null);

                TextView questionView = (TextView) questionLayout.findViewById(R.id.projectview_question_question);
                TextView answerView = (TextView) questionLayout.findViewById(R.id.projectview_question_answer);

                questionView.setText(question.getQuestion());
                answerView.setText(question.getAnswer().trim());

                questions.addView(questionLayout);
            }
        }
    }

    public void onClick(View arg0) {
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(project.getProject().getWebsite()));
        startActivity(intent);
    }
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T17:40:25.697

这是由于框架的缓存机制中的一个错误。最简单的解决方法是使用几乎是黑色的颜色，例如`#ff010101`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:02:04.703

您是否尝试过使用该属性设置自定义样式，而不是在布局的每个实例上定义黑色属性？一方面，它对维护更好，但另一方面，也许样式引擎更好地处理配置更改，问题就会得到解决。

# php - 尝试通过 PHP 访问数据库时出现 ClearDB / Heroku 500 错误

> ID：12671435
> 
> 赞同：1
> 
> 时间：2012-10-01T10:20:54.407
> 
> 标签：php, mysql, heroku

对于我们自己服务器上的项目，我已经多次使用 PHP 访问 MySQL 数据库，并且总是使用相同的 PHP 脚本来访问（显然更改了登录详细信息）。然而，这是我第一次使用 Heroku 和 ClearDB，我遇到了问题。

该数据库位于我们使用 ClearDB 的 Heroku PHP 应用程序上，我访问了 CLEARDB_DATABASE_URL 以找出用户名、密码、主机名和数据库名称。为了确保我做得正确，我的理解是这是格式：

```
mysql://USER_NAME:PASSWORD@HOST_NAME/DATABASE_NAME?reconnect=true 
```

在 MySQL Workbench 中使用这些详细信息，我设法登录到数据库并添加了一个表，所以我相信它们是正确的详细信息。

但是，当我尝试使用我的 PHP 脚本访问它时，使用从 URL 获取的相同变量，我收到以下错误：

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

起初我认为 Heroku 应用程序可能已经完成，但我仍然可以访问 PHP 脚本中不尝试访问数据库的任何函数。

正如我所说，这个脚本以前一直有效，所以我不确定问题出在哪里。我的数据库连接位于具有以下构造函数的单独类中：

```
function __construct()
{
    $this->DB_HOST     = 'us-cdbr-east-02.cleardb.com';
    $this->DB_USERNAME = 'the_username_from_url';
    $this->DB_PASSWORD = 'the_password_from_url';
    $this->DB_DATABASE = 'the_database_name_from_url';

} 
```

使用其他类根据需要调用的 connect() 函数：

```
function connect()
{       
    self::$instance = new mysqli($this->DB_HOST, $this->DB_USERNAME, $this->DB_PASSWORD, $this->DB_DATABASE);

    if (mysqli_connect_errno()) {
        $this->raise_error(printf("Connect failed: %s\n", mysqli_connect_error()));
    }

    return self::$instance;
} 
```

我 99.9% 确定问题是由尝试连接到数据库引起的。尽管当我在浏览器中测试脚本时它没有返回任何 PHP 错误消息，但只有基于 DB 的函数会导致 500 错误。

我愿意接受任何和所有的建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:46:08.287

对于那些有同样问题的人，我已经解决了这个问题，但我不是 100% 确定如何，这是 2 种可能的事情之一。首先，我使用自定义 buildpack 重建了我的 Heroku 应用程序。起初这不起作用，所以我认为这不是答案。然后我离开 Heroku 应用程序两周......突然它与 mySQLi 兼容！

自定义 buildpack 可以正常工作并且只需要时间来激活，或者 Heroku 在最后进行了更改，从而解决了我的问题。

抱歉，我无法提供更好的答案，但正如我所说，在离开 Heroku 应用程序大约 2 周后，问题奇迹般地解决了。

# macos - Git GUI 未在 iMac 上加载

> ID：12671439
> 
> 赞同：2
> 
> 时间：2012-10-01T10:21:06.590
> 
> 标签：macos, git, user-interface, git-gui

我刚买了一台新的 iMac，我已经将我的 Git 存储库连接到它，但是在启动 Git GUI 时我收到以下错误：

git-gui 死于信号 11

任何人都可以为我建议一个解决方案吗？

我的 Git 版本是：1.7.12.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:56:22.483

我遇到了同样的问题：我的解决方案：改为安装 1.7.11.3

# android - 如何在android中处理不完整的图像下载？

> ID：12671443
> 
> 赞同：2
> 
> 时间：2012-10-01T10:21:48.950
> 
> 标签：android, image, download, android-imageview

我正在我的应用程序中下载图像以将其填充到 UI 中。

这是我用来将该图像下载并保存到设备外部存储器的代码。

```
 File firstDirectory=new File(Environment.getExternalStorageDirectory()+"/Catalog");     
        if (firstDirectory.exists()==false) 
        {
            firstDirectory.mkdir();
        }

        for (int i = 0; i <list.size() && !isCancelled(); i++) {

            Content content= list.get(i);
            try 
                {

            File firstFile =new File(firstDirectory+"/"+content.getId()+".jpeg");
            if (firstFile.exists()==false || firstFile.length()==0) 
            {               
                Boolean status=firstFile.createNewFile();   
                HttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(kSubURL+content.getPublisherID()+"&tid="+content.getId()+"_370&tp=i");
                HttpResponse resp = httpClient.execute(httpGet);
                HttpEntity entity= resp.getEntity();
                InputStream is = entity.getContent();
                    FileOutputStream foutS = new FileOutputStream(firstFile);

                    byte[] buffer = new byte[1024];                 
                    long total = 0;
                    int count;
                    while ((count = is.read(buffer)) != -1) {
                        total += count;
                        foutS.write(buffer, 0, count);
                    }

                    foutS.close();
                    is.close();
            }

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

此代码可以正常工作以将图像下载并保存到设备上。但问题是，有时图像没有完全下载。如何处理此类案件？即使响应代码是 200，图像也没有正确下载。在这种情况下，图像看起来像这样

![在此处输入图像描述](../Images/9d7d71694fc7fbb501580303b81de0b9.png)

谁能告诉我如何正确处理这种情况？如果应用程序在写入数据时意外终止，那么如何处理这种情况？在这种情况下，图像部分写入磁盘并且我的图像没有正确加载到图像视图中。

另外，请告诉我是否可以在将图像填充到 ImageView 时检查图像是否正确加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-11T10:26:22.723

我对此也做了很多研究，最后我通过检查图像长度来克服这个问题

```
URL url = new URL(url);
URLConnection conection = url.openConnection();
conection.connect();
fileLength = conection.getContentLength(); 
```

检查`fileLength`和下载的图像文件长度。如果相等或接近相等，则下载成功。

# upload - Youtube UploadWidget 上的 onUploadStart？

> ID：12671445
> 
> 赞同：2
> 
> 时间：2012-10-01T10:22:06.747
> 
> 标签：upload, youtube, widget

当我们使用 YouTube UploadWidget 添加视频时，在上传过程中有一个加载器。但是当我们添加文件视频时，什么也没有发生！所以用户不知道他的文件正在上传......

有没有像“onUploadStart”这样的事件来自己制作一个加载器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T15:37:17.013

我使用此代码检查上传过程何时结束并开始视频处理

```
var stack = [];

function onStateChange(event) {
    var state = event.data.state;
    switch (state) {
        case YT.UploadWidgetState.RECORDING:
            break;
        case YT.UploadWidgetState.PENDING:
            break;
        case YT.UploadWidgetState.STOPPED:
            if(stack.pop() == "US")
            {
              //video is uploaded and processing has been started, I show loader here
                stack.push("US");
            }
            stack.push("S");
            break;
    }
}

function onUploadSuccess(event) {
    stack.push("US");
}

function onProcessingComplete(event) {
    if(stack.pop() == "S" && stack.pop() == "US")
    {
        stack = [];
    }
//disable spinner
} 
```

# jquery - 将页面内容复制到剪贴板

> ID：12671447
> 
> 赞同：0
> 
> 时间：2012-10-01T10:22:11.070
> 
> 标签：jquery, cross-browser

我正在寻找将网页内容复制到剪贴板的最有效方法。例如，我想在我的页面上有一个按钮，以便用户可以单击它，它将文本中的内容复制到他们的剪贴板。

是否有跨浏览器兼容插件（jquery）或者以前有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:23:49.353

我们在这里，我使用它： http: **[//www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)**

该插件使用**Flash**使其成为可能。

没有 Flash，在大多数浏览器中根本不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:23:47.497

这个 jquery 插件是交叉兼容的并且工作正常

[http://archive.plugins.jquery.com/project/clipboard](http://archive.plugins.jquery.com/project/clipboard)

或者

[http://www.jquery4u.com/plugins/jquery-copy-clipboard-4-options/#.UGlvF6AURNQ](http://www.jquery4u.com/plugins/jquery-copy-clipboard-4-options/#.UGlvF6AURNQ)

两者都很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:25:22.633

现在这将需要闪存，因为到目前为止不存在用于剪贴板处理的跨平台 api（想想像全屏 api 之类的东西，其中一个页面会要求您允许触摸剪贴板 - 存在一个[草案规范](http://dev.w3.org/2006/webapi/clipops/)，但我不这么认为它在任何地方实施）。

# c - 如何计算至少包含 3 个元音的单词的数量

> ID：12671449
> 
> 赞同：0
> 
> 时间：2012-10-01T10:22:14.333
> 
> 标签：c, function, printing, count

我想知道是否可以寻求帮助。我正在用 C 编写一个程序，它写出字符串中的字符、单词和元音的数量（添加了一些打印语句）。我试图弄清楚如何编写一个循环遍历字符串并计算包含至少 3 个元音的单词的数量的代码。我觉得这是一个非常容易编写的代码，但它似乎总是让我难以理解的最简单的事情。有什么帮助吗？

**另外：**作为 C 的新手，如何在使用函数`int vowel_count(char my_sen[])`而不是在我的 main 中使用代码时获得相同的结果？

如果这有点令人困惑，我的意思是因为我的 main 已经包含计算输入中元音数量的代码，我怎样才能将所述代码转移到这个函数中并仍然在 main 中调用它？

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#define SENTENCE 256

int main(void){

char my_sen[SENTENCE], *s; //String that containts at most 256 as well as a pointer
int words = 1, count = 0,vowel_word = 0; //Integer variables being defined
int i,vowel = 0, length;  //More definitions
printf("Enter a sentence: ");//Input sentence
gets(my_sen);//Receives and processes input
length = strlen(my_sen); //Stores the length of the input within length

for(i=0;my_sen[i] != '\0'; i++){
    if(my_sen[i]=='a' || my_sen[i]=='e' || my_sen[i]=='i' || my_sen[i]=='o' || my_sen[i]=='u' || //Loop that states if the input contains any of the following
       my_sen[i]=='A' || my_sen[i]=='E' || my_sen[i]=='I' || my_sen[i]=='O' || my_sen[i]=='U')   //characters(in this case, vowels), then it shall be
       {                                                                                         //stored to be later printed
           vowel++;
       }

    if(my_sen[i]==' ' || my_sen[i]=='!' || my_sen[i]=='.' || my_sen[i]==',' || my_sen[i]==';' || //Similar to the vowel loop, but this time
        my_sen[i]=='?')                                                                          //if the following characters are scanned within the input
        {                                                                                        //then the length of the characters within the input is
            length--;                                                                            //subtracted

                    }

}

for(s = my_sen; *s != '\0'; s++){ //Loop that stores the number of words typed after
    if(*s == ' '){                //each following space
    count++;
}
}

printf("The sentence entered is %u characters long.\n", length); //Simply prints the number of characters within the input
printf("Number of words in the sentence: %d\n", count + 1); // Adding 1 to t[he count to keep track of the last word
printf("Average length of a word in the input: %d\n", length/count);//Prints the average length of words in the input
printf("Total Number of Vowels: %d\n", vowel);//Prints the number of vowels in the input
printf("Average number of vowels: %d\n", vowel/count);//Prints the average number of vowels within the input
printf("Number of words that contain at least 3 vowels: %d\n", vowel_word);//Prints number of words that contain at least 3 vowels
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:50:49.927

这不是什么大问题。

```
#include <ctype.h>
#include <stdio.h>
#include <string.h>

int vowel_count(char my_sen[])
{
  int wcount = 0; // number of words with 3+ vowel chars
  int vcount = 0; // current number of vowel chars in the current word
  int i = 0; // index into the string
  int ch;
  while ((ch = my_sen[i++]) != '\0')
  {
    if (isspace(ch) || !isalpha(ch))
    {
      // ch is not an alphabetical char, which can happen either
      // before a word or after a word.
      // If it's after a word, the running vowel count can be >= 3
      // and we need to count this word in.
      wcount += vcount >= 3; // add 1 to wcount if vcount >= 3
      vcount = 0; // reset the running vowel counter
      continue; // skip spaces and non-alphabetical chars
    }
    if (strchr("aeiouAEIOU", ch) != NULL) // if ch is one of these
    {
      ++vcount; // count vowels
    }
  }
  // If my_sen[] ends with an alphabetical char,
  // which belongs to the last word, we haven't yet
  // had a chance to process its vcount. We only
  // do that in the above code when seeing a non-
  // alphabetical char following a word, but the
  // loop body doesn't execute for the final ch='\0'.
  wcount += vcount >= 3; // add 1 to wcount if vcount >= 3
  return wcount;
}

int main(void)
{
  char sen[] = "CONSTITUTION: We the People of the United States...";
  printf("# of words with 3+ vowels in \"%s\" is %d", sen, vowel_count(sen));
  return 0;
} 
```

输出（[ideone](http://ideone.com/qFB9S)）：

```
# of words with 3+ vowels in "CONSTITUTION: We the People of the United States..." is 3 
```

顺便说一句，你可以改变这个函数来计算你需要的所有东西。它已经找到了单词的开始和结束位置，因此简单的单词计数很容易实现。还有字长。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:29:30.690

1）获取字符串，

2) 使用strtok() 得到每个单词用空格分隔。

3）逐个字符循环遍历每个字符串以检查它是否为元音。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:49:54.993

请检查以下代码

```
 #include<stdio.h>
    #include <string.h>

    int count_vowels(char []);
    int check_vowel(char);

    main()
    {
      char array[100];
      printf("Enter a string\n");
      gets(array);
      char seps[] = " ";
      char* token;
      int input[5];
      int i = 0;
      int c = 0;
      int count = 0;

      token = strtok (array, seps);
      while (token != NULL)
      {
         c = 0;
         c = count_vowels(token);
         if (c >= 3) {
            count++;
         }
         token = strtok (NULL, seps);
       }
       printf("Number of words that contain atleast 3 vowels : %d\n", count);
       return 0;
    }

    int count_vowels(char a[])
    {
       int count = 0, c = 0, flag;
       char d;

       do
       {   
          d = a[c];

          flag = check_vowel(d);

          if ( flag == 1 )
             count++;

          c++;
       }while( d != '\0' );

       return count;
    }

    int check_vowel(char a)
    {
       if ( a >= 'A' && a <= 'Z' )
          a = a + 'a' - 'A';   /* Converting to lower case */

       if ( a == 'a' || a == 'e' || a == 'i' || a == 'o' || a == 'u')
          return 1;

       return 0;
    } 
```

# java - 如何在 jsonparsing 中用 url 中的 %20 替换空格

> ID：12671450
> 
> 赞同：8
> 
> 时间：2012-10-01T10:22:16.873
> 
> 标签：java

在我的应用程序中，我想用字符串中的 %20 替换空格。我尝试过这种方式，

```
String flag1="http://74.208.194.142/admin/upload_image/1342594079_images (2).jpg";
flag1.replaceAll("", "%20"); 
```

但它不起作用请帮助我。我收到空指针异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T10:23:37.807

你应该这样做：

```
flag1 = flag1.replaceAll(" ", "%20"); 
```

首先，您放置的是空字符串而不是空格..其次，您必须将值返回到`flag1`变量中..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T10:38:49.643

```
 String flag1="http://74.208.194.142/admin/upload_image/1342594079_images (2).jpg";
    URI uri = null;
    try {
        uri = new URI(flag1.replaceAll(" ", "%20"));
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(uri); 
```

控制台将显示输出为

`http://74.208.194.142/admin/upload_image/1342594079_images%20(2).jpg`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T12:19:31.120

看看[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)

需要更换的不仅仅是空白。URL 由具有特殊含义的特殊字符组成（例如，开始查询字符串的问号）

```
String flag1 = URLEncoder.encode("This string has spaces", "UTF-8") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-01T10:25:53.247

在`flag1.replaceAll()`中，您的空间丢失。尝试：

```
String flag1="http://74.208.194.142/admin/upload_image/1342594079_images (2).jpg";
flag1 = flag1.replaceAll(" ", "%20"); 
```

并将结果设置为 flag1。

# hadoop - 测试大数据框架需要什么环境？

> ID：12671454
> 
> 赞同：0
> 
> 时间：2012-10-01T10:22:31.063
> 
> 标签：hadoop, cloud, bigdata, distributed-system

作为我论文的一部分，我必须评估和测试一些大数据框架，如 Hadoop 或 Storm。你会推荐什么样的最小设置来获得一些关于性能和可伸缩性的相关信息？什么云平台最适合这个？由于我评估了多个框架，即开箱即用的 PaaS - 解决方案不会是最佳选择。正确的？获得一些相关信息的最少节点/服务器数量是多少？越便宜越好，因为我这样做的公司可能不会给我一个 20 机器集群；）

非常感谢，克罗克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:05:32.583

好吧，您肯定需要至少两台物理机器。像在一台物理机器上放置多个虚拟机这样的任何事情都是不可能的，因为这样你就不会得到分布式系统典型的网络开销。

作为现实场景，三个可能是您可以逃脱的绝对最小值。即便如此，很多时候，Hadoop 的开销也几乎没有被收益所抵消。

我想说五个是最现实的最小值，也是一个非常典型的小集群大小。5 - 8 是一个很好的小范围。

就平台而言，我想说 Amazon EC2/EMR 应该始终是一个很好的首选考虑。这是一项完善的、出色的服务，许多现实世界的集群都在其上运行。好处是它易于使用，相对便宜，并且可以代表现实世界的场景。唯一的缺点是虚拟化可能会导致它的扩展与单个物理机略有不同，但这对您来说可能是也可能不是问题。如果您使用较大的实例类型，我相信它们的虚拟化程度较低。

希望这可以帮助。

# c# - Windows 服务中的事件处理

> ID：12671458
> 
> 赞同：1
> 
> 时间：2012-10-01T10:22:39.793
> 
> 标签：c#, visual-studio-2010, events, windows-services

我是使用 C# 框架 4.0 创建 Windows 服务的新手，我制作了一个使用 DLL 文件连接到指纹考勤终端的 Windows 应用程序。

但我对如何将 Windows 应用程序转换为 Windows 服务感到困惑。

当我按照教程进行操作时，我可以运行和安装一个简单的服务。但是如何在 Windows 服务中添加新事件

所以首先我在项目中添加对我的 DLL 文件的引用。其次，我在 InitializeComponent 方法中添加了这段代码

```
 private void InitializeComponent()
    {  
        this.ServiceName = "MyService";
        AxBioBridgeSDK.AxBioBridgeSDKX MyBio = new AxBioBridgeSDK.AxBioBridgeSDKX();

        MyBio.OnAttTransaction += new AxBioBridgeSDK.IBioBridgeSDKXEvents_OnAttTransactionEventHandler(this.axBioBridgeSDKX1_OnAttTransaction); // this is the event handler function
    }

    #endregion
    private AxBioBridgeSDK.AxBioBridgeSDKX MyBio;
} 
```

并在`OnStart()`我添加代码以打开与终端的连接。在我安装服务并尝试运行它后，我收到此错误：

> Windows 无法在本地计算机上启动“MyServiceName”服务。
> 
> 错误 1053：服务未及时响应启动或控制请求。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:28:17.257

Windows 服务并不意味着处理用户界面事件。它们被设计为在单独的内存空间中运行并使用不同的凭据。通常他们不需要用户登录。

您收到的错误是由于您的服务启动功能行为不正确，并且服务在您启动后立即停止。

调试服务需要一些不同的技术，然后调试 Windows 应用程序。您需要先安装该服务并使用服务管理器启动它，以便您可以对其进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:31:38.827

这可能是任何数量的事情。检查 .net 执行失败的事件日志，它可能会提供有关失败原因的更多信息。

从用户应用程序转到 Windows 服务时需要考虑的一些事项。

1.  运行应用程序的帐户不同，因此安全权限可能是一个因素
2.  Windows 服务可以进行用户交互，而桌面应用程序则可以。
3.  如果服务启动不够快，windows 将自动中止进程，因为它认为出现了故障。

简而言之，桌面！= Windows 服务！= Web 应用程序。每个人都有自己的背景、目的、优势和劣势。

# asp.net - ASP.NET 下拉选定索引未更改事件

> ID：12671466
> 
> 赞同：0
> 
> 时间：2012-10-01T10:23:08.027
> 
> 标签：asp.net, drop-down-menu, eventtrigger

在 ASP.NET 中有一个用于 DropDownList 的 onSelectedIndexChange 事件，该事件在为下拉列表更改选定索引时触发。

我遇到了一种情况，当 DropDown 的 SelectedIndex 在选择时没有改变时，我需要触发类似的事件。

我完全不知道在这种情况下该怎么办？

任何帮助/参考将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:33:04.767

假设您的页面上有另一个导致回发的服务器端控件，您可以在回发事件中为另一个控件编写一个例程，将当前选择与前一个选择进行比较并触发自定义事件（或您想要的例程发生）如果值没有改变。

也就是说，我必须想象有一种更简单的方法可以实现您想要实现的总体目标，但您的问题必须更具体一些。

**更新**

我必须假设您在处理表单时正在使用下拉列表中的值。为什么不从隐藏下拉菜单和显示链接按钮开始呢？只需从下拉列表中选择一个默认值并允许用户根据需要进行更改。

这是一个显示该行为的小提琴：http: [//jsfiddle.net/rjaum/](http://jsfiddle.net/rjaum/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:25:44.607

将事件处理程序分配给选定的索引更改事件并`autopostback`在标记中设置为 true

或后面的代码

```
mydropdownlist.SelctedIndexChanged += NameOfMethod 
```

然后像这样定义处理程序

```
protected void NameOfMethod(object sender, EventArgs e)
{
     //your code here
} 
```

**根据定义**更新**`selectedindexchanged`事件只会在索引更改时触发。如果你想强制回发需要一些 javascript。这是如何使用 jquery 执行此操作的示例**

 **```
$(function() {
    $('select').change();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:34:32.440

我认为这很正常。事件是`SelectedIndexChanged`，您说您选择了之前选择的相同项目。所以索引保持不变，没有改变，事件也不会触发。可能是你看 OnClick。

问题是你第二次点击的时候并没有改变索引，所以下拉菜单还在等你改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:07:51.980

这很容易。您可以使用 javascript/jquery/服务器端代码等来实现这一点。假设用户**确实**单击了控件。pageLoad上的类似内容

```
PageLoad()
{
       YourDropDownList.Attributes.Add("onclick","javascript:CallHelloWorld();return false;");
} 
```

然后在服务器端你可以用 WebMethod 属性装饰一个方法

```
[WebMethod()]
public static string HelloWorld()
{
      return "Hello foo";
} 
```

在您的客户端 aspx 上，您可以使用 jQuery 调用您的 webmethod

```
<script language="text/javascript">
 function CallHelloWorld()
 {
     // Call HelloWorld webmethod using jQuery $.ajax
 }
 </script> 
```

**编辑** 您可以使用单选按钮列表而不是下拉列表。这样，在客户端，您可以在单击单选按钮时检查事件是否被选中（如果选中它会触发您的事件）。 **编辑** 如果您想使用下拉列表，请尝试查看此线程，[每次使用 JQuery 选择下拉列表时都会触发事件](https://stackoverflow.com/questions/898463/fire-event-each-time-a-dropdownlist-item-is-selected-with-jquery)**

# android - 如何在 android textview 的任一端插入文本？

> ID：12671467
> 
> 赞同：2
> 
> 时间：2012-10-01T10:23:08.947
> 
> 标签：android, textview

是否有可能有一个文本视图，它在最左侧包含一些文本，在文本视图的最右侧包含一些文本。
例如：我想要一个文本视图，它应该看起来像这样
///////////////
text a
//////////////

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:32:19.807

不，使用单个 TextView 是不可能的。

您可以尝试`textview.setText("test _____ "+"a");`，但它不会完美地工作。

但是你可以拿**两个** `TextView`然后你就可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:59:36.823

可以使用单个 TextView。只需将文本放入 HTML 格式，例如

```
 <string name="my_string">
<![CDATA[
    <!DOCTYPE html>
    <html>
    <body>

    <h1><span>Sunil bn</span><span style="float:right">Your Text</span></h1>
    </body>
    </html>
]]>
    </string> 
```

在字符串文件中。假设字符串的名称是“my_string”。然后在您的代码中使用 TextView 设置文本

```
myTextView.setText(Html.fromHtml(getResources()
                    .getString(R.string.my_string))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:06:21.413

```
textView.setText("text" + spaces(10) + "a");

String spaces(int numberOfSpaces){

    if (numberOfSpaces < 1){return "";}

    StringBuilder sb = new StringBuilder(" ");

    for (int i=1;i<numberOfSpaces;i++){
       sb.append(" ");
    }

    return sb.toString();

} 
```

# javascript - 在使用 Jquery 加载文档时选择下拉选项

> ID：12671469
> 
> 赞同：0
> 
> 时间：2012-10-01T10:23:30.557
> 
> 标签：javascript, jquery, html

如何在使用 Jquery*加载文档时选择***下拉** 选项？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:25:19.800

利用

```
$(document).ready(function(){

$('#select-Id').val("rightVal");

}); 
```

示例：对于

```
<select id='days'>
<option value="sun">Sunday</option>
<option value="mon">Monday</option>
</select> 
```

使用下面的代码选择星期一

```
$(document).ready(function(){

$('#days').val("mon");

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:30:12.167

**HTML：**

```
<select id="sel">
<option value="1">Option 1</option>
<option value="2">Option 2</option>
<option value="3">Option 3</option>
</select>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**查询：**

​</p>

```
$(document)​.ready(function(){

    $('#sel').val('2');

    })​;​ 
```

**[看演示](http://jsfiddle.net/333EX/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:30:42.950

您可以使用

```
$(document).ready(function(){
   $('#sel').val('myValue'); // to set the current value
   var selectedvalue=$('#selectId').val(); // get the selected value
   alert(selectedvalue); 
}); 
```

[**演示**](http://jsbin.com/ezituh/1/edit)。*

# vba - Microsoft Jet 数据库引擎找不到对象“SELECT * FROM funk”

> ID：12671478
> 
> 赞同：1
> 
> 时间：2012-10-01T10:24:21.127
> 
> 标签：vba, ms-access-2003

我想编写一个非常简单的查询并将其绑定到带有 VBA 代码的列表框，但是运行这段代码会发生错误：

```
Private Sub Command0_Click()
Dim db As DAO.Database
Dim rs As DAO.Recordset
Set db = CurrentDb
Set rs = db.OpenRecordset("SELECT * FROM funk", dbOpenTable)
Me.List9.Recordset = rs
End Sub 
```

数据库的名称是正确的。你能告诉我如何解决这个问题吗？

**编辑**

我已将代码更改为

```
Dim db As DAO.Database
Dim rs As DAO.Recordset
Set db = CurrentDb
Set rs = db.OpenRecordset("SELECT * FROM funk")
Me.List9.Recordset = rs 
```

但它也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:29:19.390

不需要这样的复杂性：

```
Private Sub Command0_Click()
Me.List9.Rowsource = "SELECT * FROM TableName"
End Sub 
```

但是，最好说：

```
Me.List9.Rowsource = "SELECT ID,VisibleField FROM TableName" 
```

您可以隐藏 ID 字段，但简单选择中的任何选择都等于绑定列为 1 时的 ID。

你会需要：

```
Dim db As DAO.Database
Dim rs As DAO.Recordset
Set db = CurrentDb
'dbOpenDynaset is the default here, but it would not be the default for 
'a local table
Set rs = db.OpenRecordset("SELECT * FROM funk",dbOpenDynaset)
Set Me.List9.Recordset = rs 
```

注意设置在最后一行。

# android - 如何在 Android 中并排显示两个图像？

> ID：12671480
> 
> 赞同：4
> 
> 时间：2012-10-01T10:24:23.763
> 
> 标签：android, xml, imageview

我正在尝试让我的 xml 让我的 android 应用程序正常工作，但我遇到了一些问题。我正在尝试以线性布局并排显示相同大小的图像。它们之间必须有一个边距，左右两侧以及顶部。

如何制作这样的 xml 文件，使其通用且可用于任何屏幕尺寸？

更新：这是我的 xml 文件的摘录：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="fill_horizontal"
    android:gravity="center"
    android:orientation="horizontal" >

<ImageView
        android:id="@+id/area"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:contentDescription="@string/app_name"
        android:src="@drawable/area_selector"
        android:layout_gravity="left" 
        android:paddingTop="15dp"/>

    <ImageView
        android:id="@+id/volume"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:contentDescription="@string/app_name"
        android:src="@drawable/volume_selector"
        android:layout_gravity="left" 
        android:paddingTop="15dp" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T10:29:17.697

您需要为两个图像提供相同的权重，如下所示

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:layout_weight="1"
        android:src="@drawable/input_cell" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="20dp"
        android:layout_weight="1"
        android:src="@drawable/input_cell" />

</LinearLayout> 
```

在你的情况下使用这个

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:orientation="horizontal" >

    <ImageView
            android:id="@+id/area"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:contentDescription="@string/app_name"
            android:src="@drawable/area_selector"
            android:layout_weight="1"
            android:layout_gravity="left" 
            android:paddingTop="15dp"/>

        <ImageView
            android:id="@+id/volume"
            android:layout_width="match_parent"
            android:layout_weight="1"
            android:layout_height="wrap_content" 
            android:contentDescription="@string/app_name"
            android:src="@drawable/volume_selector"
            android:layout_gravity="left" 
            android:paddingTop="15dp" />

        </LinearLayout> 
```

# joomla - 在 localhost 上看不到我的第三方 joomla 网站

> ID：12671482
> 
> 赞同：0
> 
> 时间：2012-10-01T10:24:30.660
> 
> 标签：joomla, localhost, config

我在本地主机上看不到我的 Joomla 网站。浏览器给我错误：**Error de HTTP 500 (Internal Server Error)** It's a third party website,所以我修改了.htaccess，我决定把它的名字改成htaccessOLD来尝试解决问题，但是没有...... :( 我修改了 configuration.php 但一切似乎都很好（/tmp 和 /logs 路径）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:29:48.213

您需要查看 /logs 文件夹中的服务器错误日志，以找出服务器引发内部服务器错误的原因。

这很可能与您的 php 配置有关。如果您可以创建一个名为 phpinfo.php 的文件并将其作为内容：

```
<?php
phpinfo();
?> 
```

将其保存到 www 或 htdocs 文件夹并访问`http://localhost/phpinfo.php`您应该会看到一个页面，该页面为您提供了所有 php 配置信息。

如果你得到另一个 HTTP 500 错误，那么你需要找到错误日志，否则它更可能是 Joomla 安装的问题。

# css - 多行 p 元素中文本后面的纯色背景

> ID：12671484
> 
> 赞同：3
> 
> 时间：2012-10-01T10:24:41.910
> 
> 标签：css, inline

在我正在处理的这个滑块上，我希望幻灯片上的描述在文本后面有一个橙色背景，并在行的开头和结尾有一点填充。我将 p 标签的显示更改为内联，这在它只有一行时有效，但是当文本换行到下一行时，CSS 仅将左/右填充应用于第一行的左侧和右侧最后一行。

如何在每行文本的左侧和右侧添加填充，而没有容器全宽大小的实心橙色正方形？

滑块中的文字是“Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis nec purus tellus, quis pulvinar tortor. Sed m​​attis lobortis gravida. Lorem ipsum dolor sit amet。”

[http://www.brainbuzzmedia.com/themes/simplybusiness/](http://www.brainbuzzmedia.com/themes/simplybusiness/)

这是该`p`标签的 CSS：

```
.camera_caption p {
    background: none repeat scroll 0 0 #FFAA3B;
    color: #000000;
    display: inline;
    font-size: 1.7em;
    margin: 0;
    padding: 3px 7px;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-14T00:30:24.100

更新：Chris Coyier 做了一个[技术](http://css-tricks.com/multi-line-padded-text/)综述，在这个答案后 3 个月发布。值得注意的是，[`box-decoration-break`](https://developer.mozilla.org/en-US/docs/Web/CSS/box-decoration-break#Browser_compatibility)Firefox 32（2014 年 2 月 9 日发布）现在支持：

现代解决方案。Webkit、火狐 32+、IE11+：

```
p {
    display: inline;
    background-color: #FFAA3B;
    padding: 0.5em 1em;
    box-decoration-break: clone;
} 
```

演示：http: [//jsfiddle.net/cLh0onv3/](http://jsfiddle.net/cLh0onv3/)

要支持 IE9+、Webkit、Firefox，请使用`box-shadow`：

```
p {
    display: inline;
    background-color: #FFAA3B;
    box-shadow: 1em 0 0 #FFAA3B, -1em 0 0 #FFAA3B;
    padding: 0.5em 0em;
    box-decoration-break: clone;
} 
```

演示：http: [//jsfiddle.net/cLh0onv3/1/](http://jsfiddle.net/cLh0onv3/1/)

下面的旧`box-shadow`方法：

```
p {
    display: inline;
    background-color: #FFAA3B;
    box-shadow: 1em 0 0 0 #FFAA3B, -1em 0 0 0 #FFAA3B;
    position: relative;
    left: 1em;
} 
```

演示在： http: [//jsfiddle.net/5xMkm/2/](http://jsfiddle.net/5xMkm/2/) - 我第一次从@martijndevalk 听说这个，所以对他表示敬意。@gabitzish[在 2012 年](https://stackoverflow.com/a/12709415/1585841)也展示了这一点。

注意：该`box-shadow`技巧在 IE11 和 FF34 中无法正常工作。您可以添加`box-decoration-break: clone;`以使其工作，或查看上面的更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T14:48:47.260

我不建议为此使用 box-shadow，因为它适用于 IE 中的故障：

![https://dl.dropboxusercontent.com/u/1206404/ie-bug.png](../Images/9825cb3b850237599e8d1aa9191d242f.png)

我已经为 webkit/firefox 和 'white-space: pre-wrap' 发布了解决方案：

[https://stackoverflow.com/a/26677158/337549](https://stackoverflow.com/a/26677158/337549)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T01:05:13.100

可能有点晚了，但是。这意味着您不需要`<p>`标签来定义每一行文本

[http://jsfiddle.net/n6UYE/4/](http://jsfiddle.net/n6UYE/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T11:04:40.197

检查这个**[小提琴](http://jsfiddle.net/venkateshwar/8YhU7/2/)**。

这不是唯一的方法，但您可以通过`p`为每行分配不同的标签并给`class name`它们相同的标签来做到这一点。

**HTML**

```
 <div><p>Lorem ipsum dolor sit amet, consectetur</p><br>
 <p>adipiscing elit. Duis nec purus tellus, quis pulvinar</p><br>
 <p>tortor. Sed mattis lobortis gravida. Lorem ipsum</p><br>
 <p>dolor sit amet.</p></div>​ 
```

**CSS**

```
 p
{
  background-color:rgba(255,165,0,0.2);
  padding:0 15px 0 15px;   
  display:inline;
  border-radius:15px;
  text-shadow:0px 0px 0px rgba(255, 210, 82, 1);
}
div{margin:15px;} 
```

# java - 如何迭代2个数组列表

> ID：12671488
> 
> 赞同：0
> 
> 时间：2012-10-01T10:24:57.093
> 
> 标签：java, list

我有一个包含另一个对象的 java 对象。

```
public class ParameterValue {            
        private Property property;            
        private String PropertyValue;            
        public static class Property {               
               private String paramName;        
        }
} 
```

在我的 util 方法中，我获取列表中的所有属性名称

```
 List<ParameterValue.Property> properties=   getAllParameter();    
 List<ParameterValue> paramValues= getAllParameterValues(); 
```

它只返回我只`ParameterValue`设置了对象的值。

现在我想从属性列表中获取属性对象并在 paramvalues 列表中设置创建一个完整的对象。我该怎么做。是否可以迭代 2 个列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:28:21.160

如果列表中索引处的相应条目对应`N`于`properties`列表中的相同索引`N`，则可以使用计数器`paramValues`进行迭代并使用：`int`[`List.get()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29)

```
// assert properties.size() == paramValues.size();
for (int idx = 0, size = properties.size(); idx < size; idx++)
{
    ParameterValue.Property prop = properties.get(idx);
    ParameterValue value = paramValues.get(idx);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:31:43.057

使用标准的forloop：

```
for (int i = 0; i < properties.size(); i++) {
  properties.get(i); //get the ParameterValue.Property
  paramValues.get(i); //get the ParmeterValue
} 
```

# java - 在 db2 数据库中存储 200mb 文件

> ID：12671492
> 
> 赞同：0
> 
> 时间：2012-10-01T10:25:31.760
> 
> 标签：java, db2

我需要从大小的远程服务器中选择一个文件`200mb`并将其存储在`db2`数据库中（列为`Blob`类型，对应的 Java 类型为`byte[]`）。

谁能告诉我什么是好的方法以及如何在Java中使用它？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:59:50.990

我很惊讶为什么你想要这么大的文件数据库。它极大地降低了您的数据库性能。虽然这样做使用 Binary/blob 类型的数据来存储这么大的文件。

使用这些链接了解更多详情

[http://www.ibm.com/developerworks/data/library/techarticle/0303stolze/0303stolze.html](http://www.ibm.com/developerworks/data/library/techarticle/0303stolze/0303stolze.html)

[http://www.dbforums.com/db2/1663961-insert-data-fields-clob-blob.html](http://www.dbforums.com/db2/1663961-insert-data-fields-clob-blob.html)

*在一些沙盒/虚拟位置尝试。*

**当心慢速连接的大文件交易中的数据损坏。**

# php - 用一组对象php中的值更新给定数组

> ID：12671493
> 
> 赞同：0
> 
> 时间：2012-10-01T10:25:39.153
> 
> 标签：php, arrays

我正在尝试使用另一个数组（基于从数据库返回的行）设置一个空数组的值。

我已经尝试了一些类似的东西，`array_merge`但我最终只是添加到第一个数组中。

只是好奇是否有办法做到这一点，还是我需要迭代每个数组并将它们合并？

第二个数组可以有 1 到 3 个数组，而第一个（*“空”*）数组总是有 3 个元素。

```
Empty array

(
    [0] => Array
        (
            [id] => 
            [quote_id] => 
            ...
        )

    [1] => Array
        (
            [id] => 
            [quote_id] => 
            ...
        )

    [2] => Array
        (
            [id] => 
            [quote_id] => 
            ...
        )

) 
```

我想从中复制数据的数组

```
Array
(
    [0] => Array
        (
            [id] => 1
            [quote_id] => 1
            ...
        )

    [1] => Array
        (
            [id] => 2
            [quote_id] => 1
            ...
        )

) 
```

我想要达到的目标

```
Array
(
    [0] => Array
        (
            [id] => 1
            [quote_id] => 1
            ...
        )

    [1] => Array
        (
            [id] => 2
            [quote_id] => 1
            ...
        )

      [2] => Array
        (
            [id] => 
            [quote_id] => 
            ...
        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:34:29.547

您可以使用[数组联合运算符^(*Docs*)](http://php.net/manual/en/language.operators.array.php)：

```
$combined = $rows + $empty; 
```

> **+**运算符返回附加到左侧数组的右侧数组；对于两个数组中都存在的键，将使用左侧数组中的元素，而忽略右侧数组中的匹配元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:30:22.817

您可以使用[`array_replace()`](http://www.php.net/manual/en/function.array-replace.php)，但您必须非常小心键，请参阅[PHP 手册](http://www.php.net/manual/en/function.array-replace.php)中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:31:36.347

你可以试试

```
$empty = array(
"0" => Array("id" => null,"quote_id" => null,"position" => null,"type" => null,"number" => null,"cost" => null,"total" => null),
"1" => Array("id" => null,"quote_id" => null,"position" => null,"type" => null,"number" => null,"cost" => null,"total" => null),
"2" => Array("id" => null,"quote_id" => null,"position" => null,"type" => null,"number" => null,"cost" => null,"total" => null))

;

$content = Array(
"0" => Array("id" => 1,"quote_id" => 1,"position" => 1,"type" => "dwdwdw","number" => 22,"cost" => 33.00,"total" => 726.00),
"1" => Array("id" => 2,"quote_id" => 1,"position" => 2,"type" => "dwdw","number" => 22,"cost" => 22.00,"total" => 484.00));

var_dump(array_merge($content,array_unique($empty))); 
```

输出

```
array
  0 => 
    array
      'id' => int 1
      'quote_id' => int 1
      'position' => int 1
      'type' => string 'dwdwdw' (length=6)
      'number' => int 22
      'cost' => float 33
      'total' => float 726
  1 => 
    array
      'id' => int 2
      'quote_id' => int 1
      'position' => int 2
      'type' => string 'dwdw' (length=4)
      'number' => int 22
      'cost' => float 22
      'total' => float 484
  2 => 
    array
      'id' => null
      'quote_id' => null
      'position' => null
      'type' => null
      'number' => null
      'cost' => null
      'total' => null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:35:53.047

试试这个，

```
<?php
 $result=mysql_query($query);
 $i=0;
 while($row=mysql_fetch_assoc($result)){
 $youArray[$i]['id']=$row['id'];
 $youArray[$i]['quote_id']=$row['quote_id'];
 //remaining values
 $i++;
 }
?> 
```

# gcc - 如何在 MinWG 上与 gcc 链接

> ID：12671505
> 
> 赞同：1
> 
> 时间：2012-10-01T10:26:15.810
> 
> 标签：gcc, mingw

这个语法不正确吗？

```
C:\Users\Brett\Compilers>gcc -I MinGW\include -l MinGW\lib\libgdi32.a -o hello
    world helloworld.c 
```

目录都很好，我想包含和链接错误的顺序还是什么？

这是输出：

```
c:/users/Brett/compilers/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw
2/bin/ld.exe: cannot find -lMinGW\lib\libgdi32.a
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:31:40.923

switch的语法是不带前缀且不带扩展`-l`名的库名称。`lib`如果找不到，它的目录应该带有`-L`选项。所以我会写：

```
gcc -I MinGW\include -L MinGW\lib -lgdi32 -o helloworld helloworld.c 
```

也许`-L`不需要，也许您还需要`-mwindows`告诉链接器您想要 windows 应用程序。要显式指定库文件，请不带任何字母选项，如下所示：

```
gcc -I MinGW\include MinGW\lib\libgdi32.a -o helloworld helloworld.c 
```

这是 gcc 参考：[链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)。

# iphone - facebook uri 方案是否不再适用于 iOS6？

> ID：12671507
> 
> 赞同：4
> 
> 时间：2012-10-01T10:26:29.877
> 
> 标签：iphone, facebook, ios6

我曾经`fb://publish/?text=`从我在 iOS 中的应用程序发布到 Facebook，但这不再适用于 Facebook 应用程序更新到 5.0 版（不是 iOS6 更新）。有谁知道如何使用新应用发布？是否有其他可以使用的 URI 方案？

我不想使用任何本机集成，只是一个链接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:01:25.687

试试这个代码，这将对你有所帮助。

```
 NSMutableDictionary *params = [NSMutableDictionary dictionary];
    [params setObject:str forKey:@"message"];

    [facebook requestWithMethodName:@"stream.publish" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

但为此，您必须分配发布权限。

# javascript - Backbone.Marionette 上下文中的事件绑定

> ID：12671508
> 
> 赞同：0
> 
> 时间：2012-10-01T10:26:31.640
> 
> 标签：javascript, backbone.js, bind, underscore.js, marionette

我想知道为什么`_.bindAll(this, ['onSortRemove']);`在以下代码（1）中会出现以下错误：

> 未捕获的类型错误：对象 [对象窗口] 没有方法“resetItemViewContainer”

为了让事情顺利进行，我需要实现以下代码`_.bindAll(this);`。

我的问题是：应该`_.bindAll(this, ['onSortRemove']);`够吗？如果不是，为什么？

* * *

(1)

```
 initialize: function () {
        _.bindAll(this, ['onSortRemove']); // it does not work
        _.bindAll(this); // it works
     }

    onSortRemove: function () {
        setTimeout(this.render, 0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:30:48.970

语法错误

```
 initialize: function () {
  _.bindAll(this, 'onSortRemove'); // <- no array wrapper
} 
```

文档的语法`[*methodnames]`并不是说“将其包装在一个数组中”。这是老式的文档风格，说“方法名称是可选的，它可以是零个或多个参数，以逗号分隔”。

# c++ - 对存储为 C++ 中的字符串的两个十六进制值进行异或

> ID：12671510
> 
> 赞同：5
> 
> 时间：2012-10-01T10:26:38.437
> 
> 标签：c++, xor

我有两个存储为字符串的十六进制值：

```
string md5OfPath("a77e0a3e517e0a9d44c3a823d96ca83c");
string guidValue("c3b491e559ac4f6a81e527e971b903ed"); 
```

我想对 C++ 中的两个值执行 XOR 操作。您能否建议我如何执行异或操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:41:43.067

我认为直接循环应该可以解决问题：

```
static inline unsigned int value(char c)
{
    if (c >= '0' && c <= '9') { return c - '0';      }
    if (c >= 'a' && c <= 'f') { return c - 'a' + 10; }
    if (c >= 'A' && c <= 'F') { return c - 'A' + 10; }
    return -1;
}

std::string str_xor(std::string const & s1, std::string const & s2)
{
    assert(s1.length() == s2.length());

    static char const alphabet[] = "0123456789abcdef";

    std::string result;
    result.reserve(s1.length());

    for (std::size_t i = 0; i != s1.length(); ++i)
    { 
        unsigned int v = value(s1[i]) ^ value(s2[i]);

        assert(v < sizeof alphabet);

        result.push_back(alphabet[v]);
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T10:31:05.770

并行遍历字符串的`XOR`字符并逐个字符地执行操作，在您遍历它们时将字符附加到结果字符串。

哦，`XOR`运营商是`^`。

您可以将字符映射到十六进制值：

```
`0` -> 0x0
`1` -> 0x1
...
`a` -> 0xa 
```

并将`^`运算符应用于值，而不是字符本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:55:04.957

在 C++ 中将两个范围合并为一个的函数式方法是使用`std::transform`. 在您的情况下，您只需要一个执行 xor 操作的函数对象：

```
#include <functional>

template <typename T>
struct Xor : std::binary_function<T, T, T> {
    T operator() (T a, T b) {
        return a ^ b;
    }
}; 
```

您可以使用它来构造一个对两个字符串中的所有字符进行异或的函数：

```
#include <cassert>
#include <functional>
#include <iterator>
#include <string>

static std::string xorStrings( const std::string &s1,
                               const std::string &s2 )
{
    std::assert( s1.size() == s2.size() );

    std::string result;
    result.reserve( s1.size() );

    std::transform( s1.begin(), s1.end(),
                    s2.begin(),
                    std::back_inserter( result ),
                    Xor<std::string::value_type>() );

    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T00:00:07.517

可以使用以下函数 (xorTwoHexStrings(string str1, string str2))

```
#include<sstream>

int hexCharToInt(char a){
    if(a>='0' && a<='9')
        return(a-48);
    else if(a>='A' && a<='Z')
        return(a-55);
    else
        return(a-87);
}

string xorTwoHexStrings(string str1, string str2){
    std::stringstream XORString;
    for(int i=0;i<str2.length();i++){
        XORString << hex << (hexCharToInt(str1[i])^hexCharToInt(str2[i]));
    }
    return XORString.str();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:46:17.853

将其拆分为较短的字符串，并按照[此答案将](https://stackoverflow.com/a/1070499/36537)每个十六进制字符串转换为整数。然后，您可以对返回的整数数组进行 XOR 或任何您喜欢的操作。

拆分为 4 个字符串应该可以；如果您使用 8 个字符，您将遇到 32 位有符号整数问题（即负数）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-16T21:16:09.990

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>
#include <ctype.h>

const char* quads[] = { "0000", "0001", "0010", "0011", "0100", "0101", "0110", "0111", "1000", "1001", "1010", "1011", "1100", "1101", "1110", "1111" };

const char * chrTObin(unsigned char c) {
  if(c >= '0' && c <= '9') return quads[     c - '0'];
  if(c >= 'A' && c <= 'F') return quads[10 + c - 'A'];
  if(c >= 'a' && c <= 'f') return quads[10 + c - 'a'];
  return NULL;
  //return -1;
}

char* xorHash(char* chrXOR1, char* chrXOR2) {

    int x;
    int xPos;

    int intXOR1 = strlen(chrXOR1);

    char strBin1[4];
    char strBin2[4];
    char strBin[8];
    char strXORED[4];
    char newXOR[128];

    strcpy(newXOR, "");

    for(x = 0; x < intXOR1; x++) {

        strcpy(strBin, "");
        strcat(strBin, chrTObin(chrXOR1[x]));
        strcat(strBin, chrTObin(chrXOR2[x]));

        strcpy(strXORED, "");

        if(strlen(strBin) == 8) {
            for(xPos = 0; xPos < 4; xPos++) {
                if(strBin[xPos] == strBin[xPos+4]) {
                    strcat(strXORED, "0");
                } else {
                    strcat(strXORED, "1");
                }
            }
        }

        if(strcmp(strXORED, "0000") == 0) {
            strcat(newXOR, "0");
        } else if(strcmp(strXORED, "0001") == 0) {
            strcat(newXOR, "1");
        } else if(strcmp(strXORED, "0010") == 0) {
            strcat(newXOR, "2");
        } else if(strcmp(strXORED, "0011") == 0) {
            strcat(newXOR, "3");
        } else if(strcmp(strXORED, "0100") == 0) {
            strcat(newXOR, "4");
        } else if(strcmp(strXORED, "0101") == 0) {
            strcat(newXOR, "5");
        } else if(strcmp(strXORED, "0110") == 0) {
            strcat(newXOR, "6");
        } else if(strcmp(strXORED, "0111") == 0) {
            strcat(newXOR, "7");
        } else if(strcmp(strXORED, "1000") == 0) {
            strcat(newXOR, "8");
        } else if(strcmp(strXORED, "1001") == 0) {
            strcat(newXOR, "9");
        } else if(strcmp(strXORED, "1010") == 0) {
            strcat(newXOR, "A");
        } else if(strcmp(strXORED, "1011") == 0) {
            strcat(newXOR, "B");
        } else if(strcmp(strXORED, "1100") == 0) {
            strcat(newXOR, "C");
        } else if(strcmp(strXORED, "1101") == 0) {
            strcat(newXOR, "D");
        } else if(strcmp(strXORED, "1110") == 0) {
            strcat(newXOR, "E");
        } else if(strcmp(strXORED, "1111") == 0) {
            strcat(newXOR, "F");
        }

    }

    return newXOR;

}

int main(int argc, char* argv[]) {

    if(argc != 3){
        printf("Usage:\n");
        printf("xor HEX1 HEX2\n");
        return 0;
    }

    if(strlen(argv[1]) == strlen(argv[2])) {

        char oneXOR[128];
        char twoXOR[128];
        char newXOR[128];

        strcpy(oneXOR, argv[1]);
        strcpy(twoXOR, argv[2]);
        strcpy(newXOR, "");

        printf("XOR: %s %s\n", oneXOR, twoXOR);
        strcpy(newXOR, xorHash(oneXOR, twoXOR));
        printf("RESULT: %s\n", newXOR);

    }

    return 0;
} 
```

# php - 要求在函数内部不可访问外部函数

> ID：12671514
> 
> 赞同：0
> 
> 时间：2012-10-01T10:26:54.873
> 
> 标签：php, configuration, configuration-files

奇怪的请求，我正在使用配置管理器功能来要求配置文件，以便我们只加载所需的变量而不是数百个设置。

问题是，其中一个文件设置了类和变量，现在它们被包含在内，但无法从主脚本访问它们。

加载文件的函数是：

```
 function load($OPT){
        if (file_exists(ABSPATH. "includes/config/".$OPT.".config.php")){
            require_once(ABSPATH. "includes/config/".$OPT.".config.php");
        } else {
            echo "Missing configuration script ".$OPT.", application has been halted.";
            exit();
        }
    } 
```

我也尝试在课堂上这样做，但遇到了同样的问题

```
class configManager {
    function load($OPT){
        if (file_exists(ABSPATH. "includes/config/".$OPT.".config.php")){
            require_once(ABSPATH. "includes/config/".$OPT.".config.php");
        } else {
            echo "Missing configuration script ".$OPT.", application has been halted.";
            exit();
        }
    }
} 
```

它包含的文件将具有如下代码

```
define('COMPANYNAME', 'NAME');
define("IPADDRESS", $_SERVER['REMOTE_ADDR']);   // IP Address of accessing user
require_once (ABSPATH . 'includes/classes/mysql.class.php'); // class to manage the database
$DB = new sqlClass; 
var_dump($DB); 
```

现在，上面代码中的 var_dump 会按预期输出，但是如果您执行如下所示的 var_dump，它会返回 null！

```
require_once (ABSPATH . 'includes/functions/_configmanager.php'); // Class to manage the configuration of the site.
loadconfig("global");
var_dump($DB); 
```

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:55:21.490

我不喜欢这种配置解决方案。但是，有一个解决方案。正如提到的 hakra，范围在函数内部。您可以使用`global`使变量对外部可见。

例子：

```
global $DB;
require_once('configManager.php');
loadcfg('global'); 
```

全局.cfg.php：

```
global $DB;
$DB = mysql_connect(...); 
```

这将确保将其`$DB`作为全局变量处理，而不是作为本地变量处理。

但！尽量不要制作全局变量。考虑另一种解决方案。例如，仅配置基于环境的参数，而不是对象的整个创建。如果你在其他地方做，你可以避免`globals`并且使你的代码更具可读性和简单性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:28:16.537

变量的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件。

# wif - 如何通过 WIF 和被动身份验证获取 SSO 和匿名用户？

> ID：12671515
> 
> 赞同：0
> 
> 时间：2012-10-01T10:26:54.393
> 
> 标签：wif, anonymous-access

我有一个需要使用 WIF 实现 SSO 的 Web 应用程序。已经设置了一个 STS 进行身份验证，我可以用它来登录就好了。

然而，该应用程序还需要容纳匿名用户。因此，当用户第一次到达网站时，我需要以某种方式检查 STS 是否已经登录。如果他是，STS 将返回他的令牌（简单），但如果他不是，他应该简单地返回到网站而无需任何进一步的身份验证，这样他就可以继续浏览匿名（我该怎么做？）。如果他稍后想要进行身份验证，他会单击登录按钮，然后我们会进行典型的 WIF 身份验证舞蹈，这是我已经准备好的。

那么......如果用户未通过身份验证，我如何告诉 STS 什么也不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:07:14.613

WIF 并没有什么特别之处。您只需在您的应用程序中定义需要身份验证的内容和不需要身份验证的内容。

在 MVC 中，您将`[Authorize]`在控制器上使用该属性。在 ASP.NET 中，您可以使用它：http: [//msdn.microsoft.com/en-us/library/b6x6shw7 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:55:13.720

您不应该在您的网站（中继方）上混合身份验证。

所有与身份验证相关的问题都应由 STS 处理。为了实现您的目标，您应该在您的 STS 上允许匿名用户并将令牌返回到您的网站 (RP)，并声明将用户指示为“匿名”（或您想称呼他的任何名称）。

所以基本上你必须将用户“认证”为未经认证的：D。

这样，您就不会根据用户是否经过身份验证而是根据他是否具有特定角色来决定您的 GUI 外观和可用性（显然用户“匿名”不会有任何角色）。在我看来，这似乎是一种更好的方法。

希望这可以帮助。

# python - 遍历元素嵌套结构中的所有 XML 节点

> ID：12671516
> 
> 赞同：5
> 
> 时间：2012-10-01T10:26:56.917
> 
> 标签：python, xml, python-2.7, minidom

我有这种 XML 结构（从 JSON 转换的 Esprima ASL 的输出），它可以得到比这更多的嵌套（`ASL.xml`）：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <program>
    <type>Program</type>
    <body>
        <type>VariableDeclaration</type>
        <declarations>
            <type>VariableDeclarator</type>
            <id>
                <type>Identifier</type>
                <name>answer</name>
            </id>
            <init>
                <type>BinaryExpression</type>
                <operator>*</operator>
                <left>
                    <type>Literal</type>
                    <value>6</value>
                </left>
                <right>
                    <type>Literal</type>
                    <value>7</value>
                </right>
            </init>
        </declarations>
        <kind>var</kind>
    </body>
    </program> 
```

通常对于 XML，我使用`for node in`root.childNodes` 但这仅适用于直接子节点：

```
import xml.dom.minidom as  md
dom = md.parse("ASL.xml")
root = dom.documentElement
for node in root.childNodes:
    if node.nodeType == node.ELEMENT_NODE:
        print node.tagName,"has value:",  node.nodeValue:, "and is child of:",node.parentNode.tagName 
```

无论嵌套元素有多少，如何遍历 XML 的所有元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T10:37:25.747

这可能最好通过递归函数来实现。像这样的东西应该可以做到，但我没有测试过，所以认为它是伪代码。

```
import xml.dom.minidom as  md

def print_node(root):
    if root.childNodes:
        for node in root.childNodes:
           if node.nodeType == node.ELEMENT_NODE:
               print node.tagName,"has value:",  node.nodeValue, "and is child of:", node.parentNode.tagName
               print_node(node)

dom = md.parse("ASL.xml")
root = dom.documentElement
print_node(root) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:07:32.697

如果使用 xml.dom.minidom 不重要：

```
import xml.etree.ElementTree as ET
tree = ET.fromstring("""...""")
for  elt in tree.iter():
    print "%s: '%s'" % (elt.tag, elt.text.strip()) 
```

输出：

```
program: ''
type: 'Program'
body: ''
type: 'VariableDeclaration'
declarations: ''
type: 'VariableDeclarator'
id: ''
type: 'Identifier'
name: 'answer'
init: ''
type: 'BinaryExpression'
operator: '*'
left: ''
type: 'Literal'
value: '6'
right: ''
type: 'Literal'
value: '7'
kind: 'var' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-08T23:40:58.480

对于 kalgasnik 的 Elementree 代码的 2.6+ 等价物，只需将 iter() 替换为 getiterator()：

```
import xml.etree.ElementTree as ET
tree = ET.fromstring("""...""")
for  elt in tree.getiterator():
    print "%s: '%s'" % (elt.tag, elt.text.strip()) 
```

# javascript - 使用 jQuery 依次淡入 div

> ID：12671519
> 
> 赞同：1
> 
> 时间：2012-10-01T10:27:21.997
> 
> 标签：javascript, jquery, jquery-plugins

我目前正在使用 jquery.inview 来检测某些元素何时在浏览器中完全可见。我有这样的正常工作：

```
$('.exclusive').bind('inview',function(e, isInView, visiblePartX, visiblePartY) {
    var elem = $(this);
    if (elem.data('inviewtimer')) {
        clearTimeout(elem.data('inviewtimer'));
        elem.removeData('inviewtimer');
    }
    if (isInView) {
        elem.data('inviewtimer', setTimeout(function() {
            if (visiblePartY == 'top') {
                elem.data('seenTop', true);
            } else if (visiblePartY == 'bottom') {
                elem.data('seenBottom', true);
            } else {
                elem.data('seenTop', true);
                elem.data('seenBottom', true);
            }
            if (elem.data('seenTop') && elem.data('seenBottom')) {
                elem.animate({ 'opacity' : 1}, 1000)
                elem.unbind('inview');
            }
        }, 1000))
    }
}); 
```

但是，我想稍微修改一下这段代码，这样当视图中有多个匹配的元素时，它们会按顺序淡入，每个元素之间会有轻微的延迟。当然，当用户移动视口以将更多元素带入视图时，它会继续这样做。谁能指出我正确的方向？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:12:07.437

您可以延迟淡入特定元素，如下所示：

```
var divs = $('div'); // replace with your selector

$.each(divs, function(i, item) {

    setTimeout(function() {
        $(item).fadeIn(1000);
    }, 1000 * i);

});​ 
```

检查现场[演示](http://jsfiddle.net/tmmxv/)。

# android - 如何在 Android 中手动旋转 EditText

> ID：12671522
> 
> 赞同：4
> 
> 时间：2012-10-01T10:27:27.040
> 
> 标签：android, android-ui, custom-component

我有一个图像编辑 android 应用程序，我在其中使用自定义`EditTextView`放置在一个`ImageView`.This 图像视图也是一个自定义视图，可以旋转、缩放、拖动等......现在，我想拖动它`EditText`并旋转单击按钮时。这是我的习惯`EditTextView`：

```
public class TemplateTextView extends EditText {
    private static float angle;
    // We can be in one of these 3 states
    private int mode = NONE;
    // Remember some things for zooming
    PointF start = new PointF();
    PointF mid = new PointF();
    PointF startMargins = new PointF();
    float oldDist = 1f;

    /**
     * Constructor for TemplateTextView
     * 
     * @param context
     * @param attrs
     * @param defStyle
     */
    public TemplateTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        // mWindowManager = (WindowManager)
        // context.getSystemService(Context.WINDOW_SERVICE);
    }

    /**
     * Constructor for TemplateTextView
     * 
     * @param context
     * @param attrs
     */
    public TemplateTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);

    }

    /**
     * Constructor for TemplateTextView
     * 
     * @param context
     */
    public TemplateTextView(Context context) {
        this(context, null);
    }
} 
```

长`EdittextView`按时拖动。如何旋转和拖动此视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:18:51.013

对于旋转，您可以在 TemplateTextView 的 onDraw-Method 中简单地执行此操作：

```
@Override
  protected void onDraw(Canvas canvas) {
    canvas.rotate(angle, canvas.getClipBounds().right/2, canvas.getClipBounds().bottom/2);
    super.onDraw(canvas);
  } 
```

干杯，伙计

# mysql - 从 Coldfusion 导入 MySQL 时如何检查 MySQL 中的重复条目？

> ID：12671525
> 
> 赞同：0
> 
> 时间：2012-10-01T10:27:39.060
> 
> 标签：mysql, coldfusion, import, duplicates

我有一个 CSV 导入 MySQL，在收到我的第一个重复输入错误后，我正在寻找一些功能来检查在导入 MySQL 之前是否存在重复项。

我在跑步`Coldfusion8, MySQL5.0.88`。

在实际提交到主数据库之前，我的导入首先进入中间表 (import_pricat_csv)。填充中间表时，我正在执行所有导入验证，如下所示：

```
 <cfquery datasource="db">
    UPDATE import_pricat_csv
    SET error= "true", errorMsg= "invalid EAN"
    WHERE iln = <cfqueryparam value = "#Session.loginID#" cfsqltype="cf_sql_varchar" maxlength="13"> 
    AND error= "no" 
    AND (ean is null OR NOT (ean REGEXP '[0-9]{13}' OR ean REGEXP '[0-9]{12}'))
 </cfquery> 
```

这会在 import_pricat 被提交到数据库之前检查它是否存在错误。我知道我可以`INSERT IGNORE`进入 MySQL，但我需要这样做才能创建导入错误报告。

我需要添加一个规则来检查`ean`要导入的是否已经在实际的数据库表中`products`。

我正在尝试这个，但它不起作用：

```
<cfquery datasource="db">
    UPDATE import_pricat_csv
    SET error= "yes", errorMsg= "duplicate EAN"
    WHERE iln = <cfqueryparam value = "#Session.loginID#" cfsqltype="cf_sql_varchar" maxlength="13"> 
        AND error= "no" 
        AND ean IN (SELECT p.ean FROM products AS p WHERE p.ean = ean )
</cfquery> 
```

知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:27:54.593

我个人会使用`LOAD DATA FROM FILE`将 CSV 数据导入到临时（和相同）表中。然后使用此临时表中的所有新数据，您可以对其进行查询并与“主”进行比较以确定该值是否存在。

```
<cfquery name="qLoadTempData" datasource="xyz">
  LOAD DATA LOCAL INFILE 'abc.csv'
  INTO TABLE 'temp_table_name'
  [rest of the query]
</cfquery>

<cfquery name="qCheckExisting" datasource="xyz">
  SELECT x, y, z
  FROM temp_table AS a 
  WHERE
    a.ean NOT EXISTS (SELECT 1 FROM main_table AS b WHERE b.ean = a.ean)
</cfquery>

<cfloop query="qCheckExisting">
  <!--- All the ean's that are not in the main table --->
  <!--- now insert into the main table --->
</cfloop>

<!--- Empty out the temp table ready for next import ---> 
```

唯一要记住的一点是，如果 CSV 文件的格式不正确，则不会将任何数据导入临时表。然而，这将是一种**更快**的导入 CSV 文件的方法。

# java - 如何将身份验证标头传递给 JAXWS SOAP 客户端

> ID：12671526
> 
> 赞同：4
> 
> 时间：2012-10-01T10:27:39.663
> 
> 标签：java, scala, authentication, soap, jax-ws

我已经使用 wsimport.exe 为肥皂客户端生成了类。

我的请求应该看起来像

```
POST /posaservice/servicemanager.asmx HTTP/1.1
Host: ****
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.pininteract.com/BalanceInquiry"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <AuthenticationHeader xmlns="http://www.pininteract.com">
      <userId>VALUE</userId>
      <password>VALUE</password>
    </AuthenticationHeader>
  </soap:Header>
  <soap:Body>
    <BalanceInquiry xmlns="http://www.pininteract.com" />
  </soap:Body>
</soap:Envelope> 
```

但我不知道如何将参数传递给 Authentication Header 部分。目前我的代码看起来像

```
val client = new ServiceManager().getServiceManagerSoap()
var res = client.balanceInquiry()
println(res) 
```

我生成了其他类 AuthenticationHeader ，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T21:38:51.887

我找不到比使用 JAX-WS 更好的解决方案。

您可以使用这种方法发送任何标头。

wsimport -keep -verbose -XadditionalHeaders https://yourWebService ？WSDL

当您使用“XadditionalHeaders”生成 WebService 客户端时，这将生成带有 Header 作为方法参数之一的 Stub/Port 方法，您可以像设置任何参数一样设置它。

信息 sysInfoOne = siOne.doGetSystemInfo(YourParam); 变成

信息 sysInfoOne = siOne.doGetSystemInfo(YourParam, YourAnyTypeOfHeader); 参考 - JAXWS 规范。

这就是开发人员喜欢做的事情，而不是编辑/发送 XML。

我尝试的其他方法是 - 添加 JAX-WS 客户端处理程序，并使用 SAAJ 客户端，两者都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:04:53.530

实际上，在通过 stackoverflow 进行更多搜索后，我找到了解决问题的方法 [How do I add a SOAP Header using Java JAX-WS](https://stackoverflow.com/questions/830691/how-do-i-add-a-soap-header-using-java-jax-ws?rq=1)

# winapi - MFC 消息泵与 Win32 消息循环

> ID：12671527
> 
> 赞同：1
> 
> 时间：2012-10-01T10:27:43.453
> 
> 标签：winapi, visual-c++, mfc

好吧，我有点困惑。*当我从Programming Windows (Charles Petzold)*学习 Windows 编程中的消息循环时，事情看起来不错。我完成了最初的 3 章（Windows 消息、消息循环和其他内容）并想深入研究 MFC，所以现在开始*学习使用 MFC 编程 Windows (Jeff Prosise)*。

现在的问题是**MFC 中的消息泵是否与 Win32 编程中的消息循环相同**？还是概念不同？如果不同，那是什么意思？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:33:53.987

它们大致相同。

MFC 的消息泵实现了一个消息循环，但在混合中引入了[PreTranslateMessage()](http://msdn.microsoft.com/en-us/library/cw1sb70c.aspx)方法，因此对话消息可以由它们自己的类而不是主循环来翻译。

有关此功能的更多详细信息，请参阅[MFC 消息和命令路由的迷宫。](http://www.microsoft.com/msj/0795/dilascia/dilascia.aspx)

# c++ - 为什么qmap使用skiplist而不是ob rb-tree？

> ID：12671529
> 
> 赞同：7
> 
> 时间：2012-10-01T10:28:01.123
> 
> 标签：c++, qt, red-black-tree, skip-lists, qmap

我很清楚为什么 QMap 是通过 skiplist 数据结构而不是 rb-tree 实现的？有一个非常有趣的[SO 线程](https://stackoverflow.com/questions/256511/skip-list-vs-binary-tree)，关于并发数据结构和跳过列表对 rb-tree 的好处，优点和缺点。它确实是非常有趣的对话，带有有用的链接，但 QMap 不是线程安全的，它不做任何互斥锁来同步访问开箱即用。它需要包装器或子类化。

对我来说，编写“手工制作的”跳过列表而不是 rb-tree 并不简单，所以这也不明显。

在非线程安全的 Qt 容器的上下文中是否有任何终止功能？

提前Tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:52:43.570

我曾经也认为 QMap 被设计为线程安全的，因此实现为基于跳过列表的字典。显然，这似乎不是原因。它更简单：“可执行文件中的代码更少，每个节点的内存更少。”

事实上，QMap 曾经被实现为 RB-tree。

资料来源：[Qt Quarterly 19，“关联容器”部分](http://doc.qt.io/archives/qq/qq19-containers.html#associativecontainers)

# .net - .NET MVC - 在同一个控制器中使用 ActionName() 的多个 GET 方法

> ID：12671530
> 
> 赞同：3
> 
> 时间：2012-10-01T10:28:07.080
> 
> 标签：.net, rest, routing

以下路线在我的 WebApiConfig.cs 中：

```
// routing for /profile/
config.Routes.MapHttpRoute(
    name: "profile",
    routeTemplate: "users/{userid}/profil",
    defaults: new { controller = "User", userid = RouteParameter.Optional }
);

// routing for /messages/
config.Routes.MapHttpRoute(
    name: "messages",
    routeTemplate: "users/{userid}/messages",
    defaults: new { controller = "User", userid = RouteParameter.Optional }
); 
```

这是控制器中的相应代码：

```
public class UserController {

    [HttpGet]
    [ActionName("profile")]
    public HttpResponseMessage GetProfile(int userid) {}

    [HttpGet]
    [ActionName("messages")]
    public HttpResponseMessage GetMessages(int userid) {}

} 
```

所以基本上我想在同一个控制器中有两个方法，它们都采用相同的参数，但映射到不同的 URL。现在我不断收到关于找到多个操作的错误 - 即使我有 ActionName 属性的区别。

我究竟做错了什么？我可以在同一个控制器中有两个 GET 方法，采用相同的输入但在不同的 URL 上调用吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:32:54.850

您是否尝试在路由定义上专门添加操作名称？

IE

```
 config.Routes.MapHttpRoute(
name: "profile",
routeTemplate: "users/{userid}/profil",
defaults: new { controller = "User", action="profil", userid = RouteParameter.Optional } 
```

);

# java - XY坐标约束

> ID：12671535
> 
> 赞同：1
> 
> 时间：2012-10-01T10:28:25.257
> 
> 标签：java, android, collision

我正在创建一个 2d 游戏。Bitmap 创建了很多对象（椭圆、三角形等）。我要检测碰撞。现在我只能用这样的矩形来做到这一点：

```
int x, y;
...
if(x>=bmp.getX() && x<=bmp.getX()+bmp.getWidth()
    && y>=bmp.getY() && y<=bmp.getY()+bmp.getHeight()) {
   //Collision.
} 
```

但是有一个问题：我不知道如何处理另一个图形（椭圆形、三角形等）。任何想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:34:06.067

一个简单的解决方案是使用子矩形来计算碰撞。子矩形将无法覆盖整个对象，但它们可以覆盖其中的大部分。

这张图片应该说明我的意思，它使用几个矩形来检测飞机的碰撞

![在此处输入图像描述](../Images/e435b721ded5cf61a5c6a2764efcea26.png)

另一种选择（尽管不推荐）是使用每像素颜色碰撞，如果三角形中的彩色像素与椭圆的彩色相交，那么就会发生碰撞。请注意，这在计算上是昂贵的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T10:41:51.127

1）对于大多数图形，请尝试边缘相交的公式以找到更多尝试，即：
[您如何检测两条线段相交的位置？](https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect)
2）对于圆而不是圆的交点，尝试从圆心到边缘的距离
[如何判断线段是否与圆相交？](https://math.stackexchange.com/questions/2837/how-to-tell-if-a-line-segment-intersects-with-a-circle)
3）两个圆相交最简单，只需检查两个圆心之间的距离是否小于它们的半径之和

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:32:08.173

对于**椭圆形**，您可以使用：-

```
if((Math.pow(x, 2) / Math.pow(a, 2)) + (Math.pow(y, 2) / Math.pow(b, 2)) < 1) {
     /** Point (x, y) is inside Oval **/
} 
```

对于**Triangle**来说，这是一项微不足道的任务：-

**[访问此链接](https://math.stackexchange.com/questions/51326/determining-if-an-arbitrary-point-lies-inside-a-triangle-defined-by-three-points)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:44:25.483

我遇到了和你一样的问题，但是形状不规则。我如何解决问题：

创建一个`Shape`包含`Rectangles`.

首次创建游戏对象时，应将 Rectangles 添加到列表中，以便形成 Shape。

现在进行碰撞检测；而不是只检查一个矩形，而是遍历列表中的所有矩形。

我希望这有帮助。

# html - HTML5 视频 - 不正确的 Mime 类型

> ID：12671543
> 
> 赞同：3
> 
> 时间：2012-10-01T10:29:05.600
> 
> 标签：html, apache, .htaccess, html5-video

我为我朋友的生日聚会建立了一个小网站，我使用 FlareVideo jQuery 插件来加载/播放包含 Flash 后备的视频。现在它在 Chrome 中似乎可以正常工作，但在 Firefox 中它显示“没有找到支持格式和 MIME 类型的视频”。错误。我用以下内容修改了**.htaccess文件：**

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm
SetEnvIfNoCase Request_URI \.(og[gv]|mp4|m4v|webm)$ no-gzip dont-vary 
```

但这没有帮助。此外，直接输入视频[URL](http://www.justo25.com/promo.mp4)时也可以正常工作。如果有人有任何线索，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:48:24.803

您是否尝试将它们添加到 apache mime.types 文件中？当你这样做时，一定要重新启动 apache。

顺便说一句，典型的位置类似于 /usr/local/apache/conf

我希望这对你有帮助。

小心。

# iphone - 在IOS6的导航控制器上看不到返回按钮

> ID：12671544
> 
> 赞同：0
> 
> 时间：2012-10-01T10:29:06.067
> 
> 标签：iphone, ios, uinavigationbar, ios6, uinavigationitem

我有一个由我以编程方式创建的自定义 UINavigationcontroller。

问题在于 UINavigationBar 中默认的后退按钮在 IOS6 中看不到，但是当我按下它时，可以完成操作。

注意：返回按钮在 IOS5 中可见。

这是我用过的代码

```
- (void)customizeNavigationController:(UINavigationController *)navController
{
    UINavigationBar *navBar = [navController navigationBar];
    [navBar setTintColor:keyNavBarTintColor];

    UIImageView *myImageView = (UIImageView *)[navBar viewWithTag:keyNavBarBackgroundImageTag];
    if (myImageView == nil)
    {
      UIImage *img = [UIImage imageNamed:@"image.png"];
      CGRect rect = CGRectMake(0, 0, navBar.frame.size.width, navBar.frame.size.height);
      myImageView = [[UIImageView alloc] initWithFrame:rect];
      [myImageView setContentMode:UIViewContentModeScaleAspectFill];
      [myImageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
      myImageView.image = img;
      [myImageView setTag:keyNavBarBackgroundImageTag];
      [navBar addSubview:myImageView];
      [myImageView release];
    }
    self.navImageView = myImageView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:08:47.750

尝试这个：

```
UIImage *image = [UIImage imageNamed:kButtonBackInActive];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:image forState:UIControlStateNormal];
[button addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(0, 0, 39.0f, 44.0f)];
button.contentEdgeInsets = (UIEdgeInsets){.left=-8};
button.showsTouchWhenHighlighted = NO;

UIBarButtonItem * backbutton = [[[UIBarButtonItem alloc] initWithCustomView:button] autorelease];
[self.navigationItem setLeftBarButtonItem:backbutton]; 
```

# raphael - 使用 raphael.js 的欧洲地图

> ID：12671545
> 
> 赞同：0
> 
> 时间：2012-10-01T10:29:07.323
> 
> 标签：raphael

我需要用 raphael.js 创建一个欧洲地图。当鼠标悬停在上面时，它应该显示国家名称。我不知道 raphael 本身是否与点形成地图，否则我们是否必须有地图。我真的没有任何想法，请帮我解决这个问题。我尝试查看网站[http://playground.mobily.pl/tutorials/building-an-interactive-map-with-raphael/demo.html](http://playground.mobily.pl/tutorials/building-an-interactive-map-with-raphael/demo.html,it)，它说类似 SVG.Where我应该在javascript中声明吗？

任何人都可以帮我解决这个问题，我该如何开始或一些明确的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:37:49.130

您确实需要 SVG 格式的每个国家的轮廓，当然，所有这些都应该在同一个坐标系中。

如果您检查所引用页面的来源，它会引用包含这些路径的[javascript 文件。](http://playground.mobily.pl/assets/demo/tutorials/rmap/js/paths.js)

# c# - 一个月的所有周日，这个月还没有周日，issue

> ID：12671553
> 
> 赞同：1
> 
> 时间：2012-10-01T10:29:32.547
> 
> 标签：c#, asp.net-mvc-3

我有这个代码，它失败了，因为 thisMonthSundays 是空的：

```
 public ActionResult TradeUKKPISearchesData() //show dropdownlist in the view
{
    var now = DateTime.Now;
    var lastMonth = now.AddMonths(-1);
    var thisMonthSundays = GetDatesOfSundays(now.Year, now.Month).OrderByDescending(x => x.Date);
    var lastMonthSundays = GetDatesOfSundays(lastMonth.Year, lastMonth.Month).OrderByDescending(x => x.Date); //problem here, must add some sort of check here?
    var sundaysToTakeFromLastMonth = 4;
    var sundays = thisMonthSundays.Concat(lastMonthSundays.Skip(Math.Max(0, lastMonthSundays.Count() - sundaysToTakeFromLastMonth)).Take(sundaysToTakeFromLastMonth));

    var allSundaysInThisMonth = new SundaysInMonthViewModel
    {
        AllSundays = sundays.Select(x => new SelectListItem
        {
            Value = x.ToString("dd/MM/yyyy"),
            Text = x.ToString("dd/MM/yyyy"),
        })
    };

    var selectedSunday = new SundaysInMonthViewModel
    {
        SelectedSunday = thisMonthSundays.Where(x => x <= now).Last() //failed here
    };

  return View(allSundaysInThisMonth);
}

private IEnumerable<DateTime> GetDatesOfSundays(int year, int month)
{
  var ci = CultureInfo.InvariantCulture;
  for (int i=1; i <= ci.Calendar.GetDaysInMonth(year, month); i++)
  {
      var date = new DateTime(year, month, i);
      if ((date.DayOfWeek == DayOfWeek.Sunday) && (date <= DateTime.Now))
      {
          yield return date; //skips all for this month
      }
  }
} 
```

我需要解决这个问题，请帮助您的想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:45:27.150

由于 Octobar 月份到目前为止还没有星期天，因此变量`SelectedSunday`为空....

您可以`LastOrDefault()`改用：

```
SelectedSunday = thisMonthSundays.Where(x => x <= now).LastOrDefault() ; 
```

`DateTime`注意：类型的默认值`DateTime.Min`是`1/1/0001 12:00:00 AM`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:58:59.557

您的代码中存在一些错误。

1.  使用`var`不是你想在任何地方都做的事情。
2.  你永远不应该在你的函数中使用任意值。您应该在函数中添加一个限制参数并传递调用，而不是检查日期是否早于今天`DateTime.Now` 。
3.  您的函数已经返回今天之前给定月份的所有星期日。您的 Linq 请求只是代码的复制，每次都会返回整个集合。
4.  由于今天是 10-01 并且我们是星期一，因此在今天之前的 10 月没有星期日。这就是您的收藏为空的原因。

# c# - 从 LINQ To Sql 数据上下文获取插入和更新 SQL 查询

> ID：12671554
> 
> 赞同：1
> 
> 时间：2012-10-01T10:29:34.063
> 
> 标签：c#, linq-to-sql

我有一个 LINQ To Sql 数据上下文，映射到表用户和组。一个用户属于一个组。

因此，我想通过针对特定实体的数据上下文为插入/更新生成相应的 SQL。

例如

```
 using (var context = new TestBedDataContext())
        {
            using (var trans = new TransactionScope())
            {
                context.Users.InsertOnSubmit(new User
                    {
                        Name = "Test",
                        Password = "Password",
                        Username = "test",
                        Group1 = new Group
                        {
                            Name = "Group1"
                        }
                    });

                // Get the query for User entity
            }
        } 
```

在这里，我想获取为插入新用户和 Group 实体而生成的查询。

我知道`context.Log`属性可用于捕获生成的整个 SQL，这种方法的问题是，它会捕获所有不符合我兴趣的 SQL（例如更改某些其他实体的脚本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T05:18:23.560

```
 public void addPatientInformation() {
    using(DbClassesDataContext myDb = new DbClassesDataContext()) {
        myDb.PatientInfos.InsertOnSubmit(new PatientInfo {
            Phy_ID = physcianID,
            Pat_First_Name = txtFirstName.Text,
            Pat_Middle_Init = txtMiddleName.Text,
            Pat_Last_Name = txtLastName.Text,
            Pat_Gender = cmbGender.Text,
            Pat_Marital_Status = cmbMaritalStatus.Text,
            Pat_Date_Of_Birth = dtpDOB.Value,
            Pat_Home_Add = txtHomeAdd.Text,
            Pat_Home_Num = txtPhone.Text,
            Pat_Work_Add = txtWorkAdd.Text,
            Pat_Work_Num = txtWorkPhone.Text,
            Pat_Prim_Physician = txtPrimPhysician.Text,
            Pat_Ref_Physician = txtRefePhysician.Text,
        });
        myDb.SubmitChanges();
    }
} 
```

# asp.net-mvc - ASP.NET MVC 3 自定义异常过滤器 OnException 不触发

> ID：12671559
> 
> 赞同：1
> 
> 时间：2012-10-01T10:29:58.967
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3

我正在开发一个 ASP.NET MVC 3 项目，我想实现我的自定义错误处理逻辑。我试图通过像这样扩展 HandleErrorAttribute 来做到这一点：

```
public class ErrorHandlingAttribute : HandleErrorAttribute
{
    public override void OnException(ExceptionContext filterContext)
    {
        if (!filterContext.ExceptionHandled)
        {
            filterContext.Result = new JsonResult { 
                                                    Data = new { success = false, error = filterContext.Exception.ToString() }, 
                                                    JsonRequestBehavior = JsonRequestBehavior.AllowGet 
                                                  };
            filterContext.ExceptionHandled = true;
        }
    }
} 
```

我需要的是，在一些 AJAX 调用之后，在模式弹出对话框上显示一些错误消息（通过呈现部分视图）。因此，在 OnException 方法中，我将 ExceptionContext 的结果设置为 JsonResult（我现在不将部分视图渲染为字符串，稍后我会这样做）

我的控制器操作如下（我用我的自定义过滤器装饰了它）：

```
 [HttpPost]
 [ErrorHandling]
 public JsonResult Create(StopEditViewModel viewModel)
 {
        Stop stop = Mapper.Map<StopViewModel, Stop>(viewModel.Stop);

        if (ModelState.IsValid)
        {
            Stop addedStop = _testFacade.AddStop(stop);

            return Json(new { success = true, tableContainer = _tableName }, JsonRequestBehavior.DenyGet);
        }

        return Json(new { success = false }, JsonRequestBehavior.DenyGet);
 } 
```

经过一番研究，我发现我需要`filters.Add(new HandleErrorAttribute());`从 Global.asax 中的 RegisterGlobalFilters 方法中删除行。我也这样做了。

我的 web.config 文件有`<customErrors mode="On" />`标签。

但是当我调用 Create POST 操作时，如果发生异常，则不会调用自定义过滤器方法。应用程序崩溃。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:50:59.257

您可以在 ajax 选项中捕获 Exception **OnFailure方法**

```
In View
@using (Ajax.BeginForm("SomeAction", new AjaxOptions { OnFailure = "handleAjaxError" }))
{

}

function handleAjaxError(ajaxContext) {
     alert("Request failed, status code ");
} 
```

当您使用 Ajax 调用操作时，它会在方法内返回。

# android - 如何打开或模拟点击偏好类别中的android ListPreference？

> ID：12671560
> 
> 赞同：6
> 
> 时间：2012-10-01T10:29:59.733
> 
> 标签：android, android-preferences, listpreference

我正在尝试以编程方式打开一个 ListPreference，它存在于 PreferenceCategory 中。XML 结构类似于：

```
<PreferenceScreen 
    android:key="pref_screen" >

    <PreferenceCategory 
        android:title="Category"
        andorid:key="pref_category">
        <ListPreference
            android:key="pref_list"
            android:title="List" />
    </PreferenceCategory>
</PreferenceScreen> 
```

我的目标是以编程方式打开“pref_list”，并将其显示给用户。我研究了[这个](https://stackoverflow.com/questions/4805896/how-to-open-or-simulate-a-click-on-an-android-preference-created-with-xml-prog)话题，提供了这个解决方案：

```
// the preference screen your item is in must be known
PreferenceScreen screen = (PreferenceScreen) findPreference("pref_screen");

// the position of your item inside the preference screen above
int pos = findPreference("pref_list").getOrder();

// simulate a click / call it!!
screen.onItemClick( null, null, pos, 0 ); 
```

这对于没有 PreferenceCategory 的 PreferenceScreen 非常有效，但我无法让它适用于我的情况（当 ListPreference 位于 PreferenceCategory 内时）。

我该如何针对我的情况进行修改？或者有没有其他解决方案？

我在 PreferenceCategory 中找不到类似于 PreferenceScreen 的方法`onItemClick()`。为我的 PreferenceCategory的值更改 'pos'`getOrder()`也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-10T17:15:23.833

我知道这是一个非常古老的线程，但我刚刚遇到了类似的问题，所以在这里我的简短解决方案基于[这个](https://stackoverflow.com/a/17919879/5377293)

```
 ListAdapter listAdapter = getPreferenceScreen().getRootAdapter();

    for (int itemNumber = 0; itemNumber < listAdapter.getCount(); itemNumber++)
        if (listAdapter.getItem(itemNumber).equals(findPreference("pref_list")))
            getPreferenceScreen().onItemClick(null, null, itemNumber, 0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T08:51:13.623

提供不同的解决方案，模拟手指触摸：

使用`View.getLocationOnScreen()`和/或`getLocationInWindow()`获取列表项的位置。所以你可以找到a`width`和a`height`来模拟点击。

```
 MotionEvent me=MotionEvent.obtain(0, 0, MotionEvent.ACTION_DOWN, width, height, 0);
    rootView.dispatchTouchEvent(me);
    me=MotionEvent.obtain(0, 0, MotionEvent.ACTION_UP, width, height, 0);
    rootView.dispatchTouchEvent(me);
    me.recycle(); 
```

# java - 无法设置运行 java 文件的值

> ID：12671563
> 
> 赞同：1
> 
> 时间：2012-10-01T10:30:28.447
> 
> 标签：java, jsp, servlets, google-cloud-messaging

我在 Google gcm 应用程序中工作，在这里我通过正确的 ID 和密码对应用程序用户进行身份验证。身份验证工作正常。

*我正在通过 Run as -> Run on Server(Homeservlet.java) 运行此页面，即使对于正确的员工和密码，它也没有显示书面的 jsp 代码（在 if 条件中编写）并转到 else -部分。*

在 Eclipse 控制台中：我可以看到员工姓名和密码。但我的问题是如何设置这些值，以便当我运行这个页面时它会显示里面的那个 jsp 页面。

我正在使用 set 参数来设置值，但是每当我在 Tomcat 服务器中运行此页面时，它都会显示`IllegalArgumentException`。我发现它很安静，因为当我运行时，没有设置值。

其实我想要的是正确的员工和相应的密码，......它会显示那个jsp页面；否则（我的意思是在其他部分，它不会）

```
public class HomeServlet extends BaseServlet {

      static final String ATTRIBUTE_STATUS = "status";
      private static final int HTTP_STATUS = 200;
    //  private static final String HTTP = "OK";

      protected void doGet(HttpServletRequest req, HttpServletResponse resp)throws IOException {

          PreparedStatement stmt = null;
          String employee=req.getParameter("employeeid"); //getting the value from app User
          String password=req.getParameter("password");  //corresponding password
          req.setAttribute(employee, employee);
          req.setAttribute(password, password);

          try {
              String url="jdbc:mysql://localhost/apps";
              Class.forName("com.mysql.jdbc.Driver");
              Connection con=DriverManager.getConnection(url,"root","root");
              stmt = con.prepareStatement("select * from regid where emp_id=? and password=?");
              stmt.setString(1, employee);
              stmt.setString(2, password);
              ResultSet rs = stmt.executeQuery();

              if(rs.next()) {
                  System.out.println("2> Employee Id : "+employee+" && Password : "+password);
                  System.out.println("3> This employee "+employee+" exsists in the database and will be there");      

                  resp.setContentType("text/html");
                  PrintWriter out = resp.getWriter();
                  out.print("<html>");      //1> want to run this portion from here
                  out.print("<head>");
                  out.print("<title>Policy Page</title>");
                  out.print("<link rel='icon' href='../images/favicon.png'/>");
                  out.print("</head>");
                      out.print("<body>");
                  String status = (String) req.getAttribute(ATTRIBUTE_STATUS);
                  if (status != null)
                  {
                    out.print("Status : "+status);
                  }
                  List<String> devices = Datastore.getDevices();
                  if (devices.isEmpty())
                  {
                    out.print("<h2>No  devices registered!</h2>");
                  } 
                  else
                  {

                   out.print("<h2>" + devices.size() + " device(s) registered!</h2>");
                   out.print("<form name='form' method='POST' action='sendAll'>");
                   out.print("<input type='text' name='policy'>");
                   resp.setStatus(HttpServletResponse.SC_OK);
                   out.print("<input type='submit' value='Apply Policy'>");
                   out.print("</form>");
//                 getServletContext().getRequestDispatcher("/home").forward(req, resp);

                  }
                  out.print("</body></html>");   //2> to here
                  resp.setStatus(HttpServletResponse.SC_OK);

              }

              else {                                      //else-part
                  resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);
                  System.out.println(HttpServletResponse.SC_BAD_REQUEST);
                  System.out.println("4> This employee "+employee+" does not exsist in the database");            
              }
          }
          catch(Exception e) {
              e.printStackTrace();
          }
          finally {
              try {
                  stmt.close();
              } catch(Exception x) {}
          }

      }

      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp)
          throws IOException {
        doGet(req, resp);
      }

    } 
```

当应用程序用户提供 id-password 时，控制台中的输出为：

```
2> Employee Id : P1 && Password : ppp
3> This employee P1 exsists in the database and will be there 
```

但我正在运行页面（运行为->在 server-tomcat-6 上运行），它显示了这个（而不是显示 jsp 页面）

```
HTTP Status 500
java.lang.IllegalArgumentException: Cannot call setAttribute with a null name
    at org.apache.catalina.connector.Request.setAttribute(Request.java:1431)
    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:50 
```

任何想法.......我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:47:03.280

观察到 2 件事。

1) 使用

```
 req.setParameter("employee", employee);
   req.setParameter("password", password); 
```

反而

```
 req.setAttribute(employee, employee);
  req.setAttribute(password, password); 
```

2)

您显示的下一页不是 JSP。它是在 servlet 中创建的纯 html。设置的内容类型为html。

如果你想在 html 中显示员工，你可以写这样的代码，

```
 out.print("<body>");
 out.print("Welcome to this site Mr."+ employee); 
```

如果您仍想将员工用作该 html 上的变量，则必须在此页面中嵌入 Javascript。

# linux - GNU 汇编中的符号

> ID：12671566
> 
> 赞同：0
> 
> 时间：2012-10-01T10:30:44.637
> 
> 标签：linux, gnu

我想知道 GNU 汇编中这些变量有什么区别。谢谢！

```
$variable_name 
variable_name
(variable_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:34:55.957

[`$`,`.`和`_`是符号名称的一部分](http://sourceware.org/binutils/docs/as/Symbol-Intro.html#Symbol-Intro)，所以`a`和`$a`只是两个不同的符号。该`$`字符没有任何特殊含义（如在 shell 中）。

所以前两个只是不同的符号。

括号用于数学运算；它们不是符号名称的一部分，因此`a`和`(a)`是等价的，而`(a*b)+1`不是`a*(b+1)`。

# jquery - 使用 jquery 获取相等的列

> ID：12671571
> 
> 赞同：0
> 
> 时间：2012-10-01T10:31:16.880
> 
> 标签：jquery, css, height

这可以使用以下代码[[Source]](http://www.cssnewbie.com/example/equal-heights/)来完成：

```
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
      thisHeight = $(this).height();
      if(thisHeight > tallest) {
         tallest = thisHeight;
      }
   });
   group.height(tallest);
}
$(document).ready(function() {
   equalHeight($(".group .block"));
}); 
```

但是，我的情况是我有不同的容器，如下所示：

```
<div class="group" id="group1">
<div class="block"></div>
<div class="block"></div>
<div class="block"></div>
</div>

<div class="group" id="group2">
<div class="block"></div>
<div class="block"></div>
</div>

etc. 
```

使用该示例中的解决方案，我得到所有块，而不管高度相同的组。问题是，#group1 的最高块可能不等于#group2 的最高块。我需要根据尊重组的最高块调整块的高度。在我的情况下，我不能对组使用 ID。

有帮助吗？感谢路过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:32:55.770

`equalHeight`只需为每个不同的`.group`元素执行函数

```
$(document).ready(function() {
   $(".group").each(function() {
      equalHeight($(this).find(".block"));
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:35:32.523

你可以试试下面的吗？

```
$(document).ready(function() {
equalHeight($(".block, .group"));
}); 
```

# asterisk - 数码卡无法正常工作

> ID：12671575
> 
> 赞同：0
> 
> 时间：2012-10-01T10:31:26.667
> 
> 标签：asterisk

我在同一台机器上有两张 digium 卡。一张卡有 4 个端口，另一张卡有单端口。我在 system.conf 和 channel_extensions.conf 中做了配置。但是重新启动 dahdi 后，我的 4 端口卡可以工作，而单端口卡不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:05:00.163

尝试使用 dahdi_genconf （不要忘记存档您当前的设置）

如果您想要手动，请记住您已从端口 5（或 9，取决于您的第一张卡）开始设置第二张卡

# php - 通过 JSON 将 base64 的图像发送到 PHP GD 库

> ID：12671577
> 
> 赞同：0
> 
> 时间：2012-10-01T10:31:33.190
> 
> 标签：php, javascript, json, base64, gd

因此，我使用 jquery/javascript 将 base64 图像文本发送到 php 文件，如下所示：

```
//Upload picture
$('#uploadPictureBtnHtml').click(function(){
    OpenLoader();
   var baseEncPicData = $('#chosenPictureData').val();
    $.ajax({
        type:'POST', url:'upload_picture.php',  dataType:"json",  data:{ PicFile: baseEncPicData },
        success:function (upload_pic_data) {
            if (upload_pic_data[0] == 'true') {
                    alert("it worked!");
                    CloseLoader();
            }
            else{
                    //upload_pic_data[1] will return PHP errors
                    alert("Why it didnt work: "+upload_pic_data[1]+" ");
                    CloseLoader();
            }
        }
        });
}); 
```

我知道这很好用，因为如果我获取`baseEncPicData`变量并像这样输出它：

```
$('#some_div').html('<img src="data:image/jpeg;base64,'+baseEncPicData+'" />'); 
```

它工作得很好，图像显示没有问题。

当我将它发送到 PHP 文件时，我像这样解码并“重新组装”它：

```
$dataUno = htmlspecialchars(trim(urldecode($_POST['PicFile'])));
$dataDos = base64_decode($dataUno);
$data = imagecreatefromstring($dataDos);
$the_new_png = imagepng($data, $the_directory); 
```

我收到的错误仅在 PHP 中，即：

```
 imagecreatefromstring() [function.imagecreatefromstring]: Empty string or invalid image
 imagepng() expects parameter 1 to be resource 
```

这让我相信它没有正确解码 JSON，因为有一些字符被剥离，这些字符是 base64 图像的一部分。这只是一个假设。不完全确定我做错了什么。任何帮助都是极好的。感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:55:36.440

删除此字符串：

`htmlspecialchars(trim(urldecode($_POST['PicFile'])))`;

...并只是处理`$_POST['PicFile']`。通过该预处理，您可以将所有`+`字符（在 Base64 中允许）转换为空格 ( `)，从而有效地破坏二进制文件。`

# bash - 从日期中提取分钟值

> ID：12671582
> 
> 赞同：2
> 
> 时间：2012-10-01T10:32:02.683
> 
> 标签：bash

我需要从 Linux“日期”命令中提取分钟值。在线指南确实令人困惑。你能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:33:27.940

听起来你想要：

```
date +%M 
```

这将只打印分钟值，您可以将其分配给一个变量：

```
dat=`date +%M`
echo $dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:36:05.483

你可以试试

```
 date +%M 
```

为了直接得到它。

或这个

```
 date | awk '{print $4}' | cut -d ":" -f 2 
```

间接获得它

# matlab - MATLAB 编译器运行时 (MCR) 编译器

> ID：12671583
> 
> 赞同：3
> 
> 时间：2012-10-01T10:32:05.193
> 
> 标签：matlab, compiler-construction

我将 7.13 MCR 编译器与我的文件打包在一起（通过 desploytool）。

我对假设客户端安装了 MCR 有一些疑问。

**1) 如果客户端没有 MATLAB，而只有 MCR。他将能够通过 MCR 运行我的应用程序吗？**

**2）客户端如何将MCR编译器设为默认？**

我试过了：

```
mbuild -setup

Please choose your compiler for building standalone MATLAB applications:

Would you like mbuild to locate installed compilers [y]/n? y

Select a compiler:
[1] Lcc-win32 C 2.4.1 in C:\PROGRA~1\MATLAB\R2010a\sys\lcc
[2] Microsoft Visual C++ 2008 SP1 in C:\Program Files\Microsoft Visual Studio 9.0

[0] None

Compiler: 
```

但我没有看到MCR。他的位置类似于：*C:\Program Files\MATLAB\MATLAB Compiler Runtime\v713*但我不知道确切的路径是什么。**我应该知道吗？**

**3) 我是否必须制作一个将 MCR 配置为默认编译器的 bat 文件？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T10:42:01.320

MCR 不是编译器。

MCR 是 MATLAB Compiler Runtime 的缩写。当您使用`deploytool` 或`mcc`（可与 MATLAB Compiler 或 MATLAB Builder 产品一起使用）时，它会将您的 MATLAB 程序转换为独立组件（例如可执行文件或库）。然后，您将组件和 MCR 提供给最终用户，组件将针对 MCR 而不是 MATLAB 运行。

您的问题 i) 的答案是肯定的，您的用户只需要 MCR，而不需要 MATLAB。您的用户根本不需要与之交互`mbuild`，（如果他们没有 MATLAB，他们就不能）。`mbuild`由您在准备创建组件时使用，而不是由您的用户在运行它时使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:38:26.580

我认为你混淆了事情。MCR 是[*MATLAB 编译器运行时*](http://www.mathworks.se/products/compiler/mcr/index.html)。它不提供任何编译器，它允许运行使用[mcc](http://www.mathworks.se/help/compiler/mcc.html)编译和部署的 MATLAB 程序。

所以你的第一个问题的答案是：是的，你的客户只需要安装 MCR 就可以运行你使用 mcc 为他编译的程序。

其他问题的答案：没有编译器..

# php - 打开新页面/标签并添加内容

> ID：12671584
> 
> 赞同：0
> 
> 时间：2012-10-01T10:32:06.497
> 
> 标签：php, javascript, html, yii, browser-tab

我阅读了很多帖子，但我找不到我的问题的答案。我在链接到控制器的网页上有一个按钮。该控制器准备一些数据并调用视图。在视图中，我有一个包含此数据的 php 变量。

我想打开一个新页面/标签并添加我的 php 变量的内容。变量的内容是一个所有浏览器都可以读取的 SVG 字符串。

我知道这在 php 中是不可能的。我需要使用 JavaScript，但是如何将 php 变量的内容添加到新选项卡？

**注意：**我的字符串只在 php 变量中，不在文件中，我不想再次单击链接以打开新选项卡。

有什么想法或解决方案吗？

根据第一个答案一个例子（不起作用：（）

```
<html>
<head>
    <title>
        Test file
    </title>
    <script>
        var myWindow = window.open('','_newtab');
        myWindow.document.write($('myString').text());

    </script>
</head>
<body>
    <p style="display:none" id="myString">Das kommt auch auf die neue seite</p>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:33:36.140

PHP 无法做到这一点。你需要Javascript。或者您使用 定义您的按钮`target blank`。

**窗口 open() 方法** [http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

**HTML 目标属性** [http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

JS 示例：

```
$(document).ready(function(){
    myWindow=window.open('', '_blank')
    myWindow.document.write($('#myString').text());
}); 
```

这将打开一个新窗口并将#myString 内容写入其中。您需要使用您的字符串或您想要显示的任何内容来定义#myString。例如

```
<p id="myString">New window</p> 
```

给你[http://jsfiddle.net/qBjVG/13/](http://jsfiddle.net/qBjVG/13/)

# linux - 运行 Web 服务器 (lightttpd) 和 (curl) 客户端的 Linux 服务器上的隔离测试网络

> ID：12671587
> 
> 赞同：1
> 
> 时间：2012-10-01T10:32:14.147
> 
> 标签：linux, testing, networking, virtual, tun

我正在编写一个测试工具，它需要从 NIC 捕获已知流量（使用 libpcap），然后将其输入到我们尝试测试的应用程序中。

我正在尝试设置的是一个 Web 服务器（在本例中为 lighttpd）和一个运行在同一台机器上的客户端（curl），在一个隔离的测试网络上。脚本将驱动整个设置，目标是能够指定多个客户端以及一组文件，以便每个客户端从 Web 服务器下载。

我最初的方法是简单地使用 loopback (lo) 接口...在 127.0.0.1 上运行 Web 服务器，让客户端从 获取他们的文件`http://127.0.0.1`，然后在 lo 接口上运行我的基于 libpcap 的工具。除了环回接口不模拟真正的以太网接口这一事实之外，这可以正常工作。主要问题是数据包的大小都不一致...... 32kbytes 和更大，而且有点随机...... 也无法降低 lo 上的 MTU（嗯，你可以，但它没有效果！）。

我也尝试在我的真实接口（eth0）上运行它，但由于它是一个内部 Web 客户端与内部 Web 服务器通信，流量永远不会离开接口，所以 libpcap 永远不会看到它。

于是我转向 tun/tap。我使用 socat 将两个 tun 接口与一个 tcp 连接绑定在一起，所以实际上，我有：

```
10.0.1.1/24 <-> tun0 <-socat-> tcp connection <-socat-> tun1 <-> 10.0.2.1/24 
```

这似乎是一个非常巧妙的解决方案...... tun/tap 设备模拟真实的以太网设备，所以我可以在 tun0 (10.0.1.1) 上运行我的 web 服务器，在 tun0 上运行我的捕获工具，并将我的客户端绑定到 tun1 (10.0.2.1 )... 我什至可以使用 tc 将整形规则应用于此流量并在我的 linux 机器内创建一个虚拟 WAN...但它只是不起作用...

以下是我使用的 socat 命令：

```
$ socat -d TCP-LISTEN:11443,reuseaddr TUN:10.0.1.1/24,up &
$ socat TCP:127.0.0.1:11443 TUN:10.0.2.1/24,up & 
```

这会产生 2 个 tun 接口 (`tun0`和`tun1`)，以及它们各自的 IP 地址。

如果我运行`ping -I tun1 10.0.1.1`，则没有响应，但是当我运行时`tcpdump -n -i tun0`，我看到 ICMP 回显请求将其发送到另一端，只是没有响应返回的迹象。

```
# tcpdump -i tun0 -n
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on tun0, link-type RAW (Raw IP), capture size 65535 bytes
16:49:16.772718 IP 10.0.2.1 > 10.0.1.1: ICMP echo request, id 4062, seq 5, length 64
<--- insert sound of crickets here (chirp, chirp) 
```

那么我是否遗漏了一些明显的东西，或者这是错误的方法？还有什么我可以尝试的（例如2个物理接口，eth0和eth1？？？）。

最简单的方法就是使用两台机器，但我希望所有这些都是独立的，所以它可以在一台机器上编写脚本和自动化，没有其他依赖项......

**更新：**

不需要 2 个 socat 与 tcp 连接连接，可以（而且对我来说更可取）这样做：

```
socat TUN:10.0.1.1/24,up TUN:10.0.2.1/24,up & 
```

虽然同样的问题仍然存在......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:47:32.383

好的，所以我找到了一个使用 Linux 网络命名空间（netns）的解决方案。这里有一篇关于如何使用它的有用文章：[http ://code.google.com/p/coreemu/wiki/Namespaces](http://code.google.com/p/coreemu/wiki/Namespaces)

这就是我为我的设置所做的......

一、下载安装CORE：[http ://cs.itd.nrl.navy.mil/work/core/index.php](http://cs.itd.nrl.navy.mil/work/core/index.php)

接下来，运行此脚本：

```
#!/bin/sh

core-cleanup.sh > /dev/null 2>&1
ip link set vbridge down > /dev/null 2>&1
brctl delbr vbridge > /dev/null 2>&1

# create a server node namespace container - node 0
vnoded -c /tmp/n0.ctl -l /tmp/n0.log -p /tmp/n0.pid > /dev/null
# create a virtual Ethernet (veth) pair, installing one end into node 0
ip link add name veth0 type veth peer name n0.0
ip link set n0.0 netns `cat /tmp/n0.pid`
vcmd -c /tmp/n0.ctl -- ip link set n0.0 name eth0
vcmd -c /tmp/n0.ctl -- ifconfig eth0 10.0.0.1/24 up

# start web server on node 0
vcmd -I -c /tmp/n0.ctl -- lighttpd -f /etc/lighttpd/lighttpd.conf

# create client node namespace container - node 1
vnoded -c /tmp/n1.ctl -l /tmp/n1.log -p /tmp/n1.pid > /dev/null
# create a virtual Ethernet (veth) pair, installing one end into node 1
ip link add name veth1 type veth peer name n1.0
ip link set n1.0 netns `cat /tmp/n1.pid`
vcmd -c /tmp/n1.ctl -- ip link set n1.0 name eth0
vcmd -c /tmp/n1.ctl -- ifconfig eth0 10.0.0.2/24 up

# bridge together nodes using the other end of each veth pair
brctl addbr vbridge
brctl setfd vbridge 0
brctl addif vbridge veth0
brctl addif vbridge veth1
ip link set veth0 up
ip link set veth1 up
ip link set vbridge up 
```

这基本上在您的 Linux 主机上设置了 2 个虚拟/隔离/名称空间网络，在本例中为节点 0 和节点 1。Web 服务器在节点 0 上启动。

您现在需要做的就是在节点 1 上运行 curl：

```
vcmd -c /tmp/n1.ctl -- curl --output /dev/null http://10.0.0.1 
```

并使用 tcpdump 监控流量：

```
tcpdump -s 1514 -i veth0 -n 
```

这似乎工作得很好......仍在试验，但看起来它会解决我的问题。

# javascript - js字符串嵌套

> ID：12671589
> 
> 赞同：0
> 
> 时间：2012-10-01T10:32:15.327
> 
> 标签：javascript, string, escaping

好的，我有一个字符串。

```
"<div class='down_arrow left_side'></div><div class='holder clearfix'><div class='topimg' style='background-image: url("+topimg+");'></div></div>"; 
```

我需要它是这样的

```
"<div class='down_arrow left_side'></div><div class='holder clearfix'><div class='topimg' style='background-image: url(' "+topimg+" ' );'></div></div>"; 
```

但额外的 ' 将关闭样式标签。

那么你是如何克服这个问题的呢？...我读过一些帖子，比如在引号前使用 \ ，但它并没有真正起作用。

只为某些人

```
var friinfo = document.createElement("DIV");
                friinfo.id = "friendsinfo";
                friinfo.className = "friendsinfo";      
                friinfo.innerHTML = "<div class='down_arrow left_side'></div><div class='holder clearfix'><div class='topimg' style='background-image: url(\"+topimg+\");'></div></div>";
                document.body.appendChild(friinfo); 
```

这是实际的代码

所以只是为了强制执行这个问题，我想在下面的字符串中多加一层引号

```
"<div class='down_arrow left_side'></div><div class='holder clearfix'><div class='topimg' style='background-image: url("+topimg+");'></div></div>"; 
```

所以结果会是这样

```
"<div class='down_arrow left_side'></div><div class='holder clearfix'><div class='topimg' style='background-image: url(' "+topimg+" ' );'></div></div>"; 
```

带引号'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:35:15.187

```
"<div class=\"down_arrow left_side\"></div><div class=\"holder clearfix\"><div class=\"topimg\" style=\"background-image: url('" + topimg + "');\"></div></div>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:39:04.717

修改代码：

```
"<div class='down_arrow left_side'></div>    <div class='holder clearfix'><div class='topimg' style='background-image: url(\'"+topimg+"\' );'></div></div>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:42:24.930

您可以在 JavaScript 中使用 \ 转义引号，但在 HTML 中则不行。纯 HTML 解决方案称为 HTML 实体：

```
<div class='topimg' style='background-image: url(&quot;blah&quot);'> 
```

...尽管通常更容易使用以下事实，即有两种引用样式可供您选择~~JavaScript~~CSS需要：

```
<div class="topimg" style="background-image: url('blah');"> 
```

但是，如果您想将随机文本注入 HTML 属性，引号并不是您唯一的问题。您最好使用[setAttribute()](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)方法并让它负责转义。

# sql - Visual Studio 2012 架构比较：列顺序和约束名称

> ID：12671596
> 
> 赞同：14
> 
> 时间：2012-10-01T10:33:00.723
> 
> 标签：sql, visual-studio, schema, compare

我正在 Visual Studio 2012 Premium 中试验 SQL Schema Compare。

如何忽略比较中的列顺序？

我发现一些帖子指出此选项是在 VS 2010 中引入的，但我只在 VS2012 中看到“忽略列排序规则”选项。（[vs2010的讨论](https://stackoverflow.com/questions/2725269/why-does-schema-compare-in-visual-studio-2010-show-differences-when-there-are-no "关于vs 2010的讨论")）

如何忽略比较中约束名称的任何差异？

约束应该存在，但不需要具有相同的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:27:32.843

根据此[链接删除了 VS2012 的忽略列顺序](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/9613187c-3abb-4fbf-91c4-a927b26f45f1)

至于忽略约束名称，我可以看到它完成的唯一方法是在视觉上比较它。我假设您想要这样做是因为您有系统生成的约束名称。您可以避免系统生成的约束名称来克服该问题。

# java - 对话框中确定按钮上的对象未找到错误

> ID：12671603
> 
> 赞同：1
> 
> 时间：2012-10-01T10:33:44.193
> 
> 标签：java, testing, rft

在我的应用程序中，通过单击保存按钮，对话框会提示带有确定按钮的消息。在录制“确定按钮”时，会录制并显示“text_ok().click(atpoint(11,8));”。但在播放过程中，它向我显示“找不到对象”错误。最近更新了 RFT 版本 8.2.2.1，之后只看到了这个问题。谁能告诉我如何解决这个问题或用java编写任何代码。

因此，我的回归正在等待，您的帮助非常可观。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:10:04.520

你没有提到它是什么类型的对话窗口。但是您可以尝试 RFT 的 IWindow API 来查找活动的顶部窗口并执行如下指定的单击。
例如，以下代码可以通过调用来处理 html 中的警报对话框

```
 handleDialogButton("Message from Webpage", "ok"); 
```

或者，通过调用单击记事本字体对话框（格式>字体）上的canel按钮

```
 handleDialogButton("font","cancel"); 
```

--------示例代码----

```
/*
 * Activates the top window with the given caption and clicks on the child control(window) with the specified text
 * @param caption- Caption of the Dialog window
 * @param btnToClick- Text of the button(any other control) to click 
 */
void handleDialogButton(String caption,String btnToClick)
{
    IWindow[] windows = getTopWindows();
    for(IWindow window: windows)
    {           
        if(window.getText().equalsIgnoreCase(caption))
        {       
            window.activate();
            //window.close(); //we can just close it also n break.              
   IWindow[] children = window.getChildren(); // OR go thru the children to get the child 
            for(IWindow child:children)
            {               
                if(child.getText().equalsIgnoreCase(btnToClick))
                {
                    child.click();                      
                    break;
                }
            }           
        }
    }
    unregisterAll();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T11:54:49.713

从 Selenium Web 驱动程序 API 的角度来看，我建议您执行以下操作：

```
Alert alert = driver.switchTo().alert(); 
   alert.accept(); 
```

希望这对你有用

# php - 将数组复制/修剪到特定大小

> ID：12671606
> 
> 赞同：-1
> 
> 时间：2012-10-01T10:33:57.550
> 
> 标签：php, multidimensional-array

**编辑**：*明确我需要它用于多维数组（在任何深度级别）*

我需要减少数组的大小以仅获取其中的一部分，但这需要递归完成。例如，采取以下情况：

```
$a = array(
  'a',
  'b' => array(
    'x' => array(
      'aleph',
      'bet'
      ),
    'y'), 
  'c', 
  'd', 
  'e'
); 
```

我需要的是，仅复制 4 个元素后，我将得到以下结果数组：

```
$a = array(
  'a',
  'b' => array('x' => array(
      'aleph'
    ),
  ), 
); 
```

并不是...

```
$a = array(
  'a',
  'b' => array('x' => array(
      'aleph',
      'bet'
      ),
    'y'), 
  'c', 
  'd', 
); 
```

我如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:16:17.000

```
function arrayTrim($array, $size,  $finalArray = null){
    global $count;
    foreach ($array AS $key => $val){
        if($size == $count)
            return $finalArray;
        $count++;
        if(is_array($val)){
            $finalArray[$key] = array();
            $finalArray[$key] = arrayTrim ($val, $size,  $finalArray[$key]);
        }
        else
            $finalArray[$key] = $val;
    }
    return $finalArray;
}
$a = array( "a"=> array('xa', 'ya'), "b" => array('x', 'y'),  "c", "d", "e" );

print_r(arrayTrim($a, 4)); 
```

应该可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:43:17.300

你可以试试`**Note : dual-dimensional`

```
 $a = array("a","b" => array('x','y'),"c","d","e");
$new = __cut($a);

function __cut($array, $max = 4) {
    $total = 0;
    $new = array();
    foreach ( $array as $key => $value ) {
        if (is_array($value)) {
            $total ++;
            $diff = $max - $total;
            $slice = array_slice($value, 0, $diff);
            $total += count($slice);
            $new[$key] = $slice;
        } else {
            $total ++;
            $new[$key] = $value;
        }
        if ($total >= $max)
            break;
    }
    return $new;
}

var_dump($new); 
```

输出

```
array
  0 => string 'a' (length=1)
  'b' => 
    array
      0 => string 'x' (length=1)
      1 => string 'y' (length=1) 
```

# android - 上下文操作模式与浮动菜单

> ID：12671608
> 
> 赞同：3
> 
> 时间：2012-10-01T10:34:05.053
> 
> 标签：android, android-actionbar

根据此页面： http: [//developer.android.com/guide/topics/ui/menus.html#context-menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)，在 Honeycomb 或更高版本上工作时首选上下文操作模式。当您可以一次对多个项目应用相同类型的操作（例如：删除）时，这实际上非常有用。但有些操作实际上一次只对一个项目有意义（例如：编辑）。如果您只有其中一项操作，那么您只需单击一下即可。所以：一键 = 编辑并选择多个项目 = 动作模式适用于许多项目

一个例子是 Gmail 应用程序：单击 = 阅读电子邮件并选择许多项目，您可以将它们标记为已读、删除它们等。

好的，但是如果您有多个操作一次只能应用于一个项目怎么办？想象一下下面的情况。

您有一个配置文件列表。您可以对配置文件执行以下操作：

*   删除
*   导出（保存在文件中）
*   分享

这些操作可以一次应用于多个项目，因此您将它们置于操作模式。但其他行动可能是：

*   编辑
*   申请

您一次只能编辑或应用一个配置文件。

那么，在这种情况下，是否可以继续使用这样的浮动菜单：

单击或长按可打开一个浮动菜单，其中仅包含该特定项目的可用选项（编辑、应用、删除、导出、共享）。选择多个项目会激活操作模式，其操作适用于所有选定项目（删除、导出、共享）

还是只继续使用动作模式更好？

When one item is selected, all actions are available (edit, apply, delete, export, share) When more than one item are selected, the actions edit and apply are disabled/removed from the action bar.

当然，这两种方法都可以工作，并且可以由开发人员来选择，但是什么是最佳实践或更易于用户使用的最佳方法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:40:01.173

在 GMail 中，您还可以在单​​击一个项目时加注星标和阅读。这是通过将按钮放入每一行（星形）来实现的。

# c# - 如何在 Windows8 中创建比屏幕大的视图

> ID：12671610
> 
> 赞同：2
> 
> 时间：2012-10-01T10:34:14.250
> 
> 标签：c#, windows, xaml, windows-8, microsoft-metro

我想为 Windows 8 创建一个具有真正大网格的应用程序。
用户应该能够在水平方向上滚动这个网格。

但即使我将屏幕的宽度定义为大于分辨率宽度的数字，网格也会出现在屏幕的中间。

这是一个屏幕截图：

![在此处输入图像描述](../Images/8b4ced33e57506bfc6ffc310332335a9.png)

我在 Aqua 中为主网格的边界上色，这样我可以看得更清楚

我还将动态网格的背景涂成蓝色。

这是 XAML：

```
<Page.Resources>

    <!-- Auflistung von Elementen, die von dieser Seite angezeigt werden -->
    <CollectionViewSource
        x:Name="itemsViewSource"
        Source="{Binding Items}"/>

    <!-- TODO: Diese Zeile löschen, wenn der Schlüssel "AppName" in "App.xaml" deklariert ist -->
    <x:String x:Key="AppName">My Application</x:String>
</Page.Resources>

<!--
    Dieses Raster fungiert als Stammbereich für die Seite, die zwei Zeilen definiert:
    * Zeile 0 enthält die Schaltfläche "Zurück" und den Seitentitel.
    * Zeile 1 enthält den Rest des Seitenlayouts.
-->
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Schaltfläche "Zurück" und Seitentitel -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
        <Button Content="Button" Grid.Column="1" HorizontalAlignment="Left" Margin="705,92,0,0" VerticalAlignment="Top" Click="Button_Click_1"/>
    </Grid>

    <!-- Raster mit horizontalem Bildlauf (wird in den meisten Ansichtsstatus verwendet) -->
    <GridView
        x:Name="itemGridView"
        TabIndex="1"
        Grid.Row="1"
        Grid.Column="0"
        Margin="0,-4,0,0"
        Padding="116,0,116,46" Grid.ColumnSpan="1" SelectionMode="None" BorderThickness="3" BorderBrush="Aqua"/> 
```

这就是 C#：

```
this.InitializeComponent();

this.itemGridView.FlowDirection = Windows.UI.Xaml.FlowDirection.LeftToRight;
this.itemGridView.ItemContainerStyle = null;

pageTitle.Text = startFolder.name;
Windows.UI.Xaml.Thickness th = new Thickness(0, 0, 0, 0);
this.Margin = th;

this.itemGridView.Margin = th;
this.itemGridView.Width = 2000; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:57:12.707

Bart，我在为我的应用程序开发登录网格页面时遇到了同样的问题。不要使用 Grid.Column 是 XAML，因为您没有在主网格中定义任何 ColumnDefinitions。不要与具有 columndefinition 的网格混淆，因为它仅用于页面标题和后退按钮。

您的网格视图 XAML 应该看起来像这样。

```
<!-- Horizontal scrolling grid used in most view states -->
    <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.RowSpan="2"
        Padding="116,136,116,46"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource DefaultGridItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True" 
        ItemClick="ItemView_ItemClick"/> 
```

在 C# 代码中，只需以下行并删除所有内容

```
this.InitializeComponent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:25:30.700

GridView 将随着您向其添加更多内容而增长 - 您还没有向我们展示它绑定的内容以及它如何显示已经存在的框。

如果您的 itemsViewSource 包含更多项目，那么它们应该出现在 GridView 中，并且它将滚动显示它们。

# internet-explorer-9 - 在 Internet Explorer 64 位上运行 QTP 测试

> ID：12671611
> 
> 赞同：1
> 
> 时间：2012-10-01T10:34:23.393
> 
> 标签：internet-explorer-9, 64-bit, qtp

我想在 Internet Explorer 9 64 位版本上执行 QTP 测试。我们在 Windows Server 2008 R2 上使用 QTP 11 我们使用 QTP 的自动化对象模型使用以下语句运行测试

qtApp.Test.Settings.Launchers("Web").Browser = "IE"

我需要知道如何在 64 位 Internet Explorer 9 上运行我的脚本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:52:52.207

SystemUtil.Run "C:\Program Files\Internet Explorer\IEXPLORE.EXE".....

[http://relevantcodes.com/qtp-11-0-patches/](http://relevantcodes.com/qtp-11-0-patches/)

支持 64 位 IE 浏览器 此补丁允许在 64 位 Internet Explorer 浏览器上创建和运行步骤。注意：在安装此补丁之前，您必须安装 QTP_00699 补丁。此补丁不为其他基于 Web 的环境提供 64 位支持，例如 .NET WebForms、ActiveX、Siebel、PeopleSoft、基于 Web 的 SAP 等。 **该补丁不支持在“录制和运行设置”对话框中选择 64 位 Internet Explorer 浏览器。解决方法：使用 SystemUtil.Run 方法打开浏览器或手动打开它。** 此补丁不支持 64 位操作系统上 Internet Explorer 9 中的 ViewLink 测试对象。

# android - Phonegap 共享插件

> ID：12671616
> 
> 赞同：1
> 
> 时间：2012-10-01T10:34:40.110
> 
> 标签：android, cordova, plugins, share

全部。我在使用 PhoneGap 共享插件时遇到问题。我完成了使用它的所有步骤。在程序中添加了插件 java 文件。添加了 JS，包含它。然后我创建了这个并将事件添加到我的按钮。

```
 var share = new Share();
  document.querySelector("#share").addEventListener("touchstart", function() {
  share.show({
        subject: 'I like turtles',
        text: 'http://www.mndaily.com'},
        function() {alert('Share done')}, // Success function
        function() {alert('Share failed')} // Failure function
        );
  }, false); 
```

运行应用程序，它可以工作，但是，它不能正常工作。当我单击共享按钮时，屏幕出现阴影，没有任何反应。当我点击这个阴影时，打开了 Android 对话框进行共享。这个阴影中的问题。我希望在单击共享按钮时出现共享对话框。

发帖画面： ![在此处输入图像描述](../Images/cf8244fbd3264b62a7749c72f2c7b223.png)

# javascript - 网站页面的滑动面板

> ID：12671617
> 
> 赞同：1
> 
> 时间：2012-10-01T10:34:40.343
> 
> 标签：javascript, jquery, html

感谢您查看我的问题，我将尽力解释我需要什么。

这是我的网站[http://hoveralls.design-way.ro/](http://hoveralls.design-way.ro/) - 我想让所有页面都像这里一样向下滑动[http://example.design-way.ro/](http://example.design-way.ro/) - 为了完成这项工作，我使用了 Hoveralls您可以在代码峡谷中找到的 Jquery 插件。

嗯......我有两个问题：

1.  首先也是最重要的是我用于中间动画的 Parallax 插件与 jQuery 1.2.6 和 Hoveralls 与 1.7.1 一起使用。如果我更改 jQuery 版本动画停止工作并且 hoveralls 在 1.2.6 上不起作用

2.  在我之前给出的示例中，您可以看到页面向下滑动，但是当另一个页面打开时我需要它们关闭。

在我发布之前，我搜索了一个答案，我发现了这个[jsfiddle.net/fE8ks/26/](http://jsfiddle.net/fE8ks/26/)。我认为如果我可以在单击 HOME 按钮时以某种方式关闭所有 div 并且默认状态将被隐藏，这将起作用。

问题：

1.  有没有办法用普通的旧javascript（没有jQuery）来做到这一点？我需要控制高度，文本速度效果会很好。

2.  因为这基本上是一页，所以我的网站会加载缓慢吗？页面大多很简单，我只会将 JS 用于一些选项卡和图库。

我通过电子邮件向 hoveralls 的开发人员寻求帮助，他给了我以下代码：

```
// 1\. HTML
   a div with id "portfolio_slider"

// GIVE YOUR PORTFOLIO BUTTON AN ID
<a id="porfolio_button">Slide Open Portfolio</a>

// 2\. CSS
#portfolio_slider {
     display:none;
     position:absolute;
     width:100%;
     height:auto; // may need to play with this 
     border-bottom:3px solid #CCC;
     top:0px;
     left:0px;
     z-index:99999;
}

// 3\. JAVASCRIPT :) 
A. Make sure you load jQuery library
B. Place this after the jQuery library (at the end of the head tag on your index.html)

<script type="text/javascript">
     // WAIT UNTIL ALL IMAGES ARE LOADED (BETTER THAN DOCUMENT.READY)
    $(window).load({   

         // BINDS THE CLICK EVENT TO YOUR PORTFOLIO BUTTON
        $('#portfolio_button').bind('click',function(e){   

                 // GET THE CURRENT CSS TOP POSITION OF THE PANEL AS AN NUMBER
                 var SliderPos=parseInt( $('#portfolio_slider').css('top'),10);      

                // IF THE PANEL IS OPEN (DOWN)
               if ( SliderPos > 0 ){

                       // ANIMATE THE PORTFOLIO SLIDER PANEL DOWN USING THE CSS TOP PROPERTY
                       // NOTE: IF YOU HAVE JQUERY UI OR THE EASING PLUGIN, YOU CAN CHANGE SWING 
                       $('#portfolio_slider').animate({'top' : '0px'},{duration:500,queue:false,specialeasing:{ 'top' :  'swing' }});

              // IF THE PANEL IS CLOSED (UP)
               }else{

                       // ANIMATE THE PORTFOLIO SLIDER PANEL DOWN USING THE CSS TOP PROPERTY
                       // NOTE: THE TOP POSITION WILL BE EQUAL TO THE HEIGHT OF #PORTFOLIO SLIDER
                       $('#portfolio_slider').animate({'top' : '500px'},{duration:500,queue:false,specialeasing:{ 'top' :  'swing' }});
               };         

       // PREVENTS DEFAULT BEHAVIOR OF BROWSER NAVIGATING TO THE LINK
        e.preventDefault();  
        return false;
    });
});
</script>

// ALTERNATIVELY
jQuery makes this stuff easy. Instead of the JS section above, you can alternatively use the following (less control over the animation)
<script type="text/javascript">

     // WAIT UNTIL ALL IMAGES ARE LOADED (BETTER THAN DOCUMENT.READY)
    $(window).load({   
         // BINDS THE CLICK EVENT TO YOUR PORTFOLIO BUTTON
        $('#portfolio_button').bind('click',function(e){   
            // SLIDE TOGGLE THE DIV
             $('#portfolio_slider').slideToggle(500);           
       // PREVENTS DEFAULT BEHAVIOR OF BROWSER NAVIGATING TO THE LINK
        e.preventDefault();  
        return false;
    });
});
</script> 
```

但是它似乎不起作用。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:12:23.970

试试这个，但一定要更改对 jquery.js 文件的引用以满足您的需要......也许使用 Google cdn：

```
<!DOCTYPE HTML>
<html lang="ru-RU">
<head>
<meta charset="UTF-8">
<title></title>
<script src="js/jquery.js"></script>
<style type="text/css">
    #portfolio_slider {
         display:none;
         position:absolute;
         width:100%;
         height:auto; // may need to play with this 
         border-bottom:3px solid #CCC;
         top:0px;
         left:0px;
         z-index:99999;
    }
</style>
</head>
<body>
<div id="portfolio_slider"></div>
<a id="portfolio_button">Slide Open Portfolio</a>
<script type="text/javascript">
    // WAIT UNTIL ALL IMAGES ARE LOADED (BETTER THAN DOCUMENT.READY)
    $(function(){   
        // BINDS THE CLICK EVENT TO YOUR PORTFOLIO BUTTON
        $('#portfolio_button').bind('click',function(e){   
            // SLIDE TOGGLE THE DIV
             $('#portfolio_slider').toggle('slideUp');           
            // PREVENTS DEFAULT BEHAVIOR OF BROWSER NAVIGATING TO THE LINK
            e.preventDefault();  
            return false;
        });
    });
</script>
</body>
</html> 
```

# macos - Mac 的可视化补丁工具

> ID：12671618
> 
> 赞同：7
> 
> 时间：2012-10-01T10:34:40.773
> 
> 标签：macos, user-interface, diff, patch

在 Windows 上，有 TortoiseMerge 工具能够打开补丁文件（由 git patch / diff -u 等生成的文件），然后作为可视化 diff 实用程序来选择/编辑补丁块。

在 linux 上，我听说 kompare 会这样做。

在 Mac 上，我没有找到任何工具，所以你知道吗？

PS：我不是在寻找需要给你 2 或 3 个文件作为输入的 diff 工具（因为我正在编辑的补丁可能无效，我不能将补丁应用于文件的临时子集并手动 diff ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-14T04:36:30.283

您可以在补丁文件中使用 colordiff 和管道。不是 GUI，但绝对比仅仅尝试读取补丁文件要好得多。

`brew install colordiff cat file.patch | colordiff | less -RS`

很好地满足了我的需求。更多信息在这里： http: [//www.markusbe.com/2009/12/how-to-read-a-patch-or-diff-and-understand-its-structure-to-apply-it-manually/](http://www.markusbe.com/2009/12/how-to-read-a-patch-or-diff-and-understand-its-structure-to-apply-it-manually/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:05:33.207

我工作的工具（ECMerge），作为“预览补丁”功能。它允许您在文件上应用（反向）补丁并仅在视觉上生成另一面，或者简单地“告诉”它是否作为一个整体成功应用。在制作另一面时，它可以将被拒绝的内容粘贴到剪贴板。它具有上下文限制和替代应用程序的常用选项。补丁文件有语法着色。

一旦您可以根据需要应用补丁，您将拥有一个 2 向合并视图，因此您可以选择最终想要应用、保存或生成补丁的内容。

这并不完美但可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:37:59.067

Mac OS X ( [http://appledeveloper.com.au/products/patchviewer/](http://appledeveloper.com.au/products/patchviewer/) ) 上的 PatchViewer 可以完成您所追求的部分工作（使用您喜欢的任何 GUI diff 工具直观地显示补丁文件），但它不允许编辑补丁文件。

（免责声明：我是 PatchViewer 的作者。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-09T22:35:30.393

[Mac](https://mac.github.com/)的GitHub 应用程序可以做到这一点，它不一定要与 GitHub 一起使用。

# c# - 在 SSRS 报表表达式中添加两个字段值

> ID：12671620
> 
> 赞同：1
> 
> 时间：2012-10-01T10:34:46.263
> 
> 标签：c#, vb.net, visual-studio-2010, reporting-services

我正在尝试在 SSRS 报告中的占位符表达式中添加两个报告字段：

```
= SUM(Fields!TOTPRICE.Value) + SUM(Fields!TAX.Value) 
```

但是当我运行报告时，占位符值出现错误。

这是我如何为报告创建数据源

```
enter code here     <DataSources>
<DataSource Name="DummyDataSource">
  <ConnectionProperties>
    <DataProvider>SQL</DataProvider>
    <ConnectString />
  </ConnectionProperties>
  <rd:DataSourceID>ef567ff-88fd-ef88f8f2b6b4</rd:DataSourceID>
</DataSource> 
```

以下是我为报告创建数据集的方式：

```
 `enter code here`  <DataSets>
<DataSet Name="CStore_POReport">
  <Fields>
    <Field Name="IDOBJECTNAME">
      <DataField>IDOBJECTNAME</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="CDEACCOU">
      <DataField>CDEACCOU</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NMEREQUE">
      <DataField>NMEREQUE</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="FLDTXTCONTACTPHONE">
      <DataField>FLDTXTCONTACTPHONE</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NMECOMPANY">
      <DataField>NMECOMPANY</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="FLDTXTPOBOX">
      <DataField>FLDTXTPOBOX</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NMESTREET">
      <DataField>NMESTREET</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NMECITY">
      <DataField>NMECITY</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NMESTATE">
      <DataField>NMESTATE</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="FLDTXTZIP">
      <DataField>FLDTXTZIP</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NUMQTYORDER">
      <DataField>NUMQTYORDER</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="DSCITEM">
      <DataField>DSCITEM</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="CURUNITDOLLARS">
      <DataField>CURUNITDOLLARS</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="TXTUNITOFMEASURE">
      <DataField>TXTUNITOFMEASURE</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="TOTPRICE">
      <DataField>TOTPRICE</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NUMTAXT">
      <DataField>NUMTAXT</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="TXTCOMMENTS">
      <DataField>TXTCOMMENTS</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="TAGTAX">
      <DataField>TAGTAX</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="NUMREQ">
      <DataField>NUMREQ</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="DTECREATED">
      <DataField>DTECREATED</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="TAX">
      <DataField>TAX</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="CRNCYID">
      <DataField>CRNCYID</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="CRNCY_SYMB_TXT">
      <DataField>CRNCY_SYMB_TXT</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="ITEM_CLS_CD">
      <DataField>ITEM_CLS_CD</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
    <Field Name="ITEM_CD">
      <DataField>ITEM_CD</DataField>
      <rd:TypeName>System.String</rd:TypeName>
    </Field>
  </Fields>
  <Query>
    <DataSourceName>DummyDataSource</DataSourceName>
    <CommandText />
    <rd:UseGenericDesigner>true</rd:UseGenericDesigner>
  </Query>
  <rd:DataSetInfo>
    <rd:DataSetName>CStore</rd:DataSetName>
    <rd:TableName>POReport</rd:TableName>
  </rd:DataSetInfo>
</DataSet> 
```

[http://i.stack.imgur.com/JYjdG.png](http://i.stack.imgur.com/JYjdG.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:47:02.623

试试这个。

```
= CStr(SUM(CInt(Fields!TOTPRICE.Value)) + SUM(CInt(Fields!TAX.Value))) 
```

好的，我认为您的问题是由于您的两个字段的类型都是字符串，所以在您执行添加操作之前，您需要将它们转换为整数

您需要将结果转换为字符串才能在占位符中显示

我为您创建了一个示例，首先是查询

![在此处输入图像描述](../Images/6a3e59cd13343381a724cd2e745402e3.png)

接下来是编辑模式下的报告 ![在此处输入图像描述](../Images/3865fdc2853fbb3f22a7e173c6d732e1.png)

你能看到我在第一列中显示 TOPPRICE，在第二列中显示 TAX，我为第三列写了一个表达式

```
= CStr(CInt(Fields!TOTPRICE.Value) + CInt(SUM(Fields!TAX.Value))) 
```

这是结果

![在此处输入图像描述](../Images/1948c80ea6cbb2759843908065ce33a8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:11:44.237

如果可行，您可以检查这些选项吗

1.尝试 = SUM(VAL(Fields!TOTPRICE.Value)) + SUM(VAL(Fields!TAX.Value))

2.确保您的查询填充了所有必需的列

3.确保您的查询具有与您在标签下的报告中提到的相同的列标题名称。例如，如果您已定义 TAX，但您的查询将列标题返回为 tax/Tax，则可能会产生问题，因为 RDL 后端是 XML 且区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T11:32:34.837

终于知道了这个问题的解决方案......我很惊讶有多少人有同样的问题，但没有一篇文章可以清楚地解释这个问题的解决方案..

针对这个问题，我找到了两种解决方法：

1) 在项目设置中将目标框架从 4.0 更改为 3.5

2) 在 system.web 部分的 web.config 中添加以下行：

`<trust legacyCasModel="true" level="Full"/>`

# visual-studio-2010 - 不同应用程序域中的 Visual Studio 插件版本控制/加载插件

> ID：12671625
> 
> 赞同：0
> 
> 时间：2012-10-01T10:35:10.630
> 
> 标签：visual-studio-2010, visual-studio, appdomain, visual-studio-addins

我有一个 Visual Studio 2010 的插件供我们内部使用。该插件使用我们常用的 2 个库，但它们会不时更改。工作室启动后，它将库加载到其应用程序域中。

当您需要设计或构建依赖于这两个库的东西时，问题就来了。Visual Studio 中的 msbuild 或设计器引擎使用插件中的库，而不是由构建输出创建的库。

当您需要处理 2 个不同的版本/分支并且每个版本/分支都有自己的库版本时，最大的问题就开始了。

这会导致构建的错误/意外行为。也是构建结果

问题来了：是否可以在不同的应用程序域中加载插件或在插件中有某种版本控制？

感谢您阅读本文并感谢您的所有帮助

米罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:44:40.130

我不知道您是否可以告诉 Visual Studio 在新的 AppDomain 上加载加载项，但您可以做的是从您的加载项创建一个新的 AppDomain，然后在新的 AppDomain 中执行加载项的核心工作. 这意味着您不应引用您在 VS 插件程序集中提到的 2 个库。相反，它们应该从仅在新 AppDomain 中加载的程序集中引用。

加载项的核心对象应派生自[MarshalByRefObject](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)，这将使 VS 加载项能够访问它。

# c++ - 在 C++ 中传递非静态成员函数指针

> ID：12671628
> 
> 赞同：1
> 
> 时间：2012-10-01T10:35:30.163
> 
> 标签：c++

> **可能重复：**
> [成员函数的函数指针](https://stackoverflow.com/questions/12514447/function-pointer-for-a-member-function)

我必须在 C++ 中想出一些类似下面的东西。

我在下面的课程中有一个成员函数。

```
class myClass {
public:
       void myFunc();

}; 
```

我在另一个库中有以下函数，我应该调用它并传递一个回调函数，它是对象的 myFunc()

```
void AnotherFunction((void*)(pCallback)())
{
   // Here I will call back function
} 
```

我怎样才能达到上述要求？我知道一个类的静态函数来传递回调，但在这里我必须确保函数是线程安全的。如果不使用静态，我怎样才能达到这个要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:39:30.417

目前，“最好的”解决方案是抛出异常。

```
void f(void(*fp)()) { fp(); }
void mah_func() { 
    try { 
        throw; 
    } catch(my_class* m) {
        m->func();
    }
}
int main() {
    my_class m;
    try {
        throw &m;
    } catch(my_class* p) {
        f(mah_func);
    }
} 
```

这是一种令人作呕的滥用，但线程安全且最便携。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T10:53:11.110

在内部，成员函数始终将 this 指针作为“不可见”的第一个参数，因此您的函数将具有签名 void(myClass *)。如果您可以将 AnotherFunction 的签名更改为`void AnotherFunction(std::function<void()> callback)`您可以执行以下操作：

```
#include <functional>
#include <iostream>

void AnotherFunction(std::function<void()> callback)
{
  callback();
}

void fun()
{
  std::cout << "fun()" << std::endl;
}

class Foo
{
public:
  Foo(int i) : i_(i) { }

  static void gun()
  {
    std::cout << "Foo::gun()" << std::endl;
  }

  void hun()
  {
    std::cout << "Foo(" << i_ << ")::hun()" << std::endl;
  }

protected:
private:
  int i_;
};

int main()
{
  Foo foo(666);
  AnotherFunction(fun);
  AnotherFunction(Foo::gun);
  AnotherFunction(std::bind(&Foo::hun, foo));
} 
```

打印：

```
fun()
Foo::gun()
Foo(666)::hun() 
```

# sql-server-2008 - 如何在表格的特定位置添加一列？

> ID：12671629
> 
> 赞同：2
> 
> 时间：2012-10-01T10:35:30.467
> 
> 标签：sql-server-2008, sql-server-2008-r2

> **可能重复：**
> [SQL Server 2008：无法在中间位置插入新列并更改数据类型](https://stackoverflow.com/questions/6121884/sql-server-2008-cannot-insert-new-column-in-the-middle-position-and-change-dat)

您好我正在使用 SQL SERVER 2008 和 2008 R2 我想使用 alter 命令在表中的特定位置添加一列。有什么方法可以使用关键字在特定位置添加列吗？谢谢！在高级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:39:47.763

在sql server中不是很容易..

我认为最好的方法是在表的末尾添加列并创建一个具有所需列顺序的视图..

另外一个选项..

将所有数据放在临时表中并以正确的列顺序重新创建实际表，然后将数据从临时表插入回实际表

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T10:51:47.207

在脚本中没有快速的方法可以做到这一点，充其量您可以使用以下脚本自动化它，该脚本基本上采用您的新表模式（新列位于所需位置），将所有数据从**old**插入**new**，删除旧表，然后使用存储过程将新表重命名为旧表。

```
create table [NewTable]
(
    [old_column_1] int
    ,[new_column_1] varchar(max) -- new col at location
    ,[old_column_2] int
);

insert into [NewTable] ( [old_column_1], [old_column_2] ) 
select [old_column_1], [old_column_2] from [OldTable] (nolock);

drop table [OldTable];

sp_rename '[NewTable]', '[OldTable]'; 
```

正如其他人正确指出的那样，列的位置对数据库没有任何影响，但是出于各种个人原因，人类希望实现这一点，因此您有几个选择。您可以：

1.  使用上面的脚本来处理这个过程。
2.  允许将列附加到表的末尾并控制查询中的顺序。
3.  基本上是选项 2 的扩展，使用视图来控制演示文稿中的顺序。
4.  使用 SQL Server Management Studio 中的 GUI - 在将表格显示为网格时，您可以将列拖放到所需位置。

# mysql - MariaDB vs Drizzle vs Percona Server vs MySQL

> ID：12671634
> 
> 赞同：9
> 
> 时间：2012-10-01T10:35:58.843
> 
> 标签：mysql, percona, mariadb, drizzle

我已经是 MySQL 用户很长时间了。我想开始使用最流行的叉子之间的所有不同变体。问题是我找不到它们之间的任何好的比较，我最终只会尝试所有这些。我担心的是生产方面，因为我不会在生产中试验所有这些分叉。

您是否在生产环境中运行过任何 MySQL 分支？

有什么优势？有什么缺点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T01:49:58.637

基本上：

*   Percona Server - MySQL 加上 10% 用于“实际生产”
*   MariaDB - 一个“替代”分支，旨在在添加自己的功能的同时实现兼容性
*   Drizzle - 一种数据库服务器，使用相同的网络协议，并且在很大程度上与 MySQL 兼容 DML，共享一些代码祖先。

免责声明：我曾在 MySQL AB 和 Sun 在 MySQL 上工作，是 Drizzle 的核心开发人员（从一开始），目前是 Percona 的服务器开发总监，我将许多 MariaDB 和 Oracle MySQL 开发人员视为朋友（和长期同事）。

如果您根本不想更改任何应用程序代码：那就是 MariaDB、Percona Server 和 Oracle MySQL 之间的选择。

如果您想要一个专为类似云的环境而设计的数据库服务器，它是模块化的并且完全是一个开源项目：请查看 Drizzle。

# cakephp - 获取所有帖子的最后评论

> ID：12671637
> 
> 赞同：1
> 
> 时间：2012-10-01T10:36:13.790
> 
> 标签：cakephp

所以，我有一个用户系统，用户有帖子，帖子有评论。一切都与模型很好地联系在一起。

我想做的是从一个特定用户的所有帖子中获取所有最后的评论。

我有点卡住了。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:18:47.550

你可以试试这个：

```
$this->User->Behaviors->load('Containable');
$this->User->contain(array(
    'Post' => array(
        'order' => array('Post.created' => 'DESC'),
        'Comment' => array(
            'limit' => 4,
            'order' => array('Comment.created' => 'DESC')
        )
    )
));
$rs = $this->User->read(null, $id_user);
$this->User->Behaviors->unload('Containable'); 
```

您的结果在**$rs**变量上。

参考：

*   [可容纳](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:42:09.630

`UsersController`从（未测试）做这样的事情：

```
$comments = $this->User->Post->Comment->find('all', array(
    'recursive' = 1,
    'limit' => 4,
    'order' => array('Comment.created' => 'DESC'),
    'conditions' => array('Post.user_id' => $id_user)
)); 
```

如果您也需要检索，您可以更改`recursive`为。`2``User`

# jquery - PC浏览器上的性能无限滚动

> ID：12671641
> 
> 赞同：1
> 
> 时间：2012-10-01T10:36:30.857
> 
> 标签：jquery, html, css, performance, infinite-scroll

我会使用无限滚动在页面中显示一个潜在的巨大结果列表。例如，如果 facebook 中的时间线用户有 400 000 个帖子，那么 facebook 中的无限滚动如何在页面中显示所有帖子？如果它在滚动所有帖子时加载浏览器会降低性能或崩溃？

在不破坏浏览器性能的情况下无限滚动显示大量数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:39:56.667

您必须为此使用 AJAX 请求。例子：

您显示大约 20 个帖子或类似的内容，如果用户到达最后一个帖子，您发送 ajax 请求异步并加载接下来的 20 个帖子。

# java - Jenkins + Play 1.2.4：cobertura 锁定文件的问题/报告

> ID：12671642
> 
> 赞同：62
> 
> 时间：2012-10-01T10:36:32.940
> 
> 标签：java, playframework, jenkins, playframework-1.x, cobertura

我们有一个 Play 1.2.4 应用程序，并且我们为该应用程序安装了 Jenkins（在 Ubuntu 上）。我们遇到了 Cobertura 的问题。

运行测试（成功）后，我们时不时地收到以下错误：

```
---------------------------------------
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at net.sourceforge.cobertura.util.FileLocker.lock(FileLocker.java:124)
        at play.modules.cobertura.CoberturaPlugin$CoberturaPluginShutdownThread.run(Unknown Source)
Caused by: java.nio.channels.OverlappingFileLockException
        at sun.nio.ch.FileChannelImpl$SharedFileLockTable.checkList(FileChannelImpl.java:1166)
        at sun.nio.ch.FileChannelImpl$SharedFileLockTable.add(FileChannelImpl.java:1068)
        at sun.nio.ch.FileChannelImpl.lock(FileChannelImpl.java:824)
        at java.nio.channels.FileChannel.lock(FileChannel.java:860)
        ... 6 more
---------------------------------------
Unable to get lock on /var/lib/jenkins/jobs/project/workspace/cobertura.ser.lock: null
This is known to happen on Linux kernel 2.6.20.
Make sure cobertura.jar is in the root classpath of the jvm 
process running the instrumented code.  If the instrumented code 
is running in a web server, this means cobertura.jar should be in 
the web server's lib directory.
Don't put multiple copies of cobertura.jar in different WEB-INF/lib directories.
Only one classloader should load cobertura.  It should be the root classloader.
---------------------------------------
lock file could not be deleted 
```

这似乎并没有“破坏构建”，但进一步向下构建，我们得到以下内容（这导致 cobertura 报告失败）

```
Publishing Cobertura coverage report...
No coverage results were found using the pattern 'test-result/code-coverage/coverage.xml' relative to '/var/lib/jenkins/jobs/project/workspace'.  Did you enter a pattern relative to the correct directory?  Did you generate the XML report(s) for Cobertura?
Build step 'Publish Cobertura Coverage Report' changed build result to FAILURE 
```

手动运行后续构建通常会通过。

根据[cobertura 1.9.2 的零代码覆盖率但测试正常](https://stackoverflow.com/questions/2148886/zero-code-coverage-with-cobertura-1-9-2-but-tests-are-working)，我尝试在播放 auto-test -command 后设置*-Dcobertura.use.java.nio=false 。*

由于这个错误只是偶尔发生，我不完全确定这是否有帮助。但在那之后，我们遇到了播放自动测试挂起的问题：

```
 ...
  Executing /opt/play-1.2.4/play auto-test "/var/lib/jenkins/jobs/project/workspace"  -Dcobertura.use.java.nio=false
  [workspace] $ /opt/play-1.2.4/play auto-test "/var/lib/jenkins/jobs/project/workspace" -Dcobertura.use.java.nio=false
  <build stuck here for a couple of days> 
```

由于没有什么是完全确定的，所以这里很难说因果关系。（这似乎发生在詹金斯/服务器重启后一两次构建之后）

目前我正在考虑在我们的项目中禁用 Cobertura，但如果有人有其他想法，那就太好了 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T15:32:30.877

显然，这是由于您的 JVM 实现中的 JVM 锁定问题，或者更确切地说，是您部署 cobertura JAR 的方式。

Jenkins 可以产生很多 JVM 线程，如果 cobetura 在你的全局类路径上，可能会发生一些奇怪的冲突。

我认为，最终，这应该归因于 cobertura 中的一个小错误（除非复杂的 corbertura 文件锁定正在解决其他一些更重要的问题）。

根据 Cobertura 的 FileLock 的源代码 (cobertura/src/main/java/net/sourceforge/cobertura/util/FileLocker.java)，多个 JVM 加载 Cobertura jar 时存在一些问题。

要解决此问题，请确保只有一个副本和一个应用程序启动和使用 Corbetura。

您的 VM 实现修复它的原因很可能是您减少了加载 cobetrura 方式的可变性。另外，也许您正在以比您的詹金斯服务器更高的频率重新启动您的虚拟机。

在我们的 jenkins corbertura 构建中，我们只使用了 maven 插件，这似乎可以正常工作而没有问题（但话又说回来，我们没有使用 java 1.7，也没有使用 Play）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T18:20:47.590

诀窍是每个模块使用一个数据文件 (cobertura.ser) 以避免并行任务的锁定。

用蚂蚁：

```
<cobertura-instrument todir="${build.dir}" datafile="cobertura.ser.${modulename}">
    ... 
```

最后将许多 cobertura 文件合并为一个 cobertura 文件：

```
<target name="merge-coverage">
    <cobertura-merge datafile="cobertura.ser">
        <fileset dir="${build.dir}">
            <include name="cobertura.ser.*" />
        </fileset>
    </cobertura-merge>
</target> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-29T21:14:49.663

这一直困扰着我们一段时间（玩 1.2.4/Jenkins）。由于 jenkins cobertura 插件（报告发布）和播放框架 cobertura 模块之间的重叠序列，存在一些问题。我相信这纯粹是时间巧合，因此是断断续续的。由于缺乏更好的解决方案，我们进行了以下工作。

从主要构建作业中删除了 jenkins cobertura 报告发布操作。我们创建了一个新的 jenkins 作业，该作业设置为发布 cobertura 覆盖率报告操作。在新作业中，我们有 shell 操作将 coverage.xml 从主构建作业工作区复制到新作业的工作区，以便运行 cobertura 覆盖率报告发布操作。复制（出于显而易见的原因）是为了避免在同一个工作中同时运行 play cobertura 和 jenkins cobertura。

它不是最好的，但很高兴看到覆盖率报告/图表:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-25T12:53:25.033

-Dcobertura.use.java.nio=false 前一个似乎需要更改为 true 才能使用文件锁定，如您的错误消息所述。

此外，应用程序可能需要为 cobertura 添加完整的文件夹类路径。

看来您正在使用类似于 COF(constantly open file) 的东西，错误消息是指存在的文件，但[文件的](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/OverlappingFileLockException.html)**区域**被锁定在驱动器中，而不是简单地锁定文件本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T07:17:17.313

你设置了吗

```
%test.play.tmp=none 
```

在您的 application.conf 文件中？

# c# - 全局样式不适用

> ID：12671645
> 
> 赞同：0
> 
> 时间：2012-10-01T10:37:07.837
> 
> 标签：c#, wpf, xaml, styles

这是我的 C# 代码

```
MainWindow.Content = new UserControl(); 
```

在 MainWindow 导航到新的 UserControl 后，App.xaml 中定义的全局样式

```
<Application.Resources>
   <Style TargetType="{x:Type UserControl}">
      <Setter Property="Background" Value="Red" />
   </Style>
</Application.Resources> 
```

不适用于它，但在 Visual Studio 中，构造函数显示 UserControl 通过更改他的背景应用了该样式我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:12:51.737

您确定在 UserControl 本身上没有设置背景值吗？要查找像 UserControl.Background WPF 这样的依赖属性的实际值，请使用设置顺序。如果您直接设置 Background 属性，则样式不会覆盖它（请参阅[Dependency Property Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx "依赖属性值优先级")）。

# ruby-on-rails-3 - has_many/belongs_to 建立关联 - 为什么参数的插入语句为空白？

> ID：12671646
> 
> 赞同：0
> 
> 时间：2012-10-01T10:37:12.720
> 
> 标签：ruby-on-rails-3, activerecord, associations

我有以下型号

角色.rb

```
class Role < ActiveRecord::Base
  attr_accessible :description, :user_id, :role_ids, :permission_ids, :permissions

  has_many :assignments
  has_many :users, :through => :assignments
  has_many :permissions

  validates :description, presence: true, 
                          uniqueness: true

end 
```

权限.rb

```
class Permission < ActiveRecord::Base
  attr_accessible :action, :role_id, :subject_class, :subject_id, :role

  belongs_to :role, :polymorphic => true
end 
```

我的 roles_controller.rb 如下：

```
 def new
    prepare
    @role = Role.new
    # @permission = @role.permissions.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @role }
    end
  end

  def create
    @role = Role.new(params[:role])
    @permissions = @role.permissions.build(params[:permissions])
    p params

    respond_to do |format|
      if @role.save
        format.html { redirect_to @role, notice: 'Role was successfully created.' }
        format.json { render json: @role, status: :created, location: @role }
      else
        format.html { render action: "new" }
        format.json { render json: @role.errors, status: :unprocessable_entity }
      end
    end
  end 
```

当我提交这个时，我得到以下控制台输出。

```
Started POST "/roles" for 127.0.0.1 at 2012-10-01 11:26:03 +0100
Processing by RolesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3uZ47itmgzUSs83Iq9+2saJn6Y9+Y9tlSDgaRskh9pw=", "role"=>{"description"=>"T1"}, "permission"=>{"subject_class"=>"CancanPermission"}, "commit"=>"Create Role"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'gn668LQGNlLl6HiwPf8DRQ' LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 13
   (0.0ms)  begin transaction
  Role Exists (0.1ms)  SELECT 1 FROM "roles" WHERE "roles"."description" = 'T1' LIMIT 1
  SQL (0.4ms)  INSERT INTO "roles" ("created_at", "description", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 01 Oct 2012 10:26:03 UTC +00:00], ["description", "T1"], ["updated_at", Mon, 01 Oct 2012 10:26:03 UTC +00:00]]
  SQL (0.2ms)  INSERT INTO "permissions" ("action", "created_at", "role_id", "subject_class", "subject_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["action", nil], ["created_at", Mon, 01 Oct 2012 10:26:03 UTC +00:00], ["role_id", 47], ["subject_class", nil], ["subject_id", nil], ["updated_at", Mon, 01 Oct 2012 10:26:03 UTC +00:00]]
   (1.7ms)  commit transaction
Redirected to http://localhost:3005/roles/47
Completed 302 Found in 19ms (ActiveRecord: 3.0ms)

Started GET "/roles/47" for 127.0.0.1 at 2012-10-01 11:26:03 +0100
Processing by RolesController#show as HTML
  Parameters: {"id"=>"47"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'gn668LQGNlLl6HiwPf8DRQ' LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 13
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" WHERE "roles"."id" = ? LIMIT 1  [["id", "47"]]
  Rendered roles/show.html.erb within layouts/application (0.7ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.4ms) 
```

我在权限中的 subject_class 参数有一个值 [ `CancanPermission`]，但它没有插入权限表中。我只从构建关联中获取 role_id。

有人可以指导我做错什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:32:30.153

这是我在进行更多谷歌搜索和 SO 搜索后所做的。

我在 roles_controller.rb 的创建操作中更改了以下行，如下所示：

从：

```
@permissions = @role.permissions.build(params[:permissions]) 
```

至：

```
@permissions = @role.permissions.build(params[:permission]) 
```

嘿，很快，它奏效了！

但是在我的编辑中使用同一行，我在权限表中获得了新条目，但是更新了版本。那么编辑/更新的语法是什么？

# java - 日期格式转换在 Java 中无法按预期工作

> ID：12671647
> 
> 赞同：0
> 
> 时间：2012-10-01T10:37:16.257
> 
> 标签：java, validation, simpledateformat

这是一个众所周知的问题，已经出现在 stackoverflow 上。我被要求解决 Web 应用程序中的错误。我有一个来自网络表单的日期，用户应该以给定格式输入有效日期`dd/MM/yyyy`。

该应用程序使用 Struts 1.3 作为框架，这是我在相应 FormBean 的 validate 方法中发现的。

```
DateFormat dateFormat = new SimpleDateFormat( "dd/MM/yyyy", aLocale ); 
try{
     mydate = dateFormat.parse( formDate );
}
catch( ParseException pe ){
     errors.add( "error", new ActionError( "error.date.invalid" ) );
} 
```

`01/10/12`但是，例如当用户以短格式输入年份时，例如，将转换为日期，查看我找到的数据库时，不会引发错误`01/10/0012`。

作为一个快速修复我尝试使用`setLenient(false)`，但仍然没有引发异常，并且 mydate 仍然导致有效但错误的日期。

在搞乱正则表达式和字符串预解析之前，我想知道我是否遗漏了什么。特别是在日期格式实例化中使用语言环境时。

项目中使用的当前 Jdk 是 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:09:59.550

您可以使用如下格式模式：

```
DateFormat dateFormat = new SimpleDateFormat( "dd/MM/yy", aLocale ); 
```

因此它将“01/11/12”转换为 2012 年 1 月 11 日，“01/11/86”转换为 1986 年 1 月 11 日

如果 Year 采用“yyyy”格式，则无论位数如何，年份都会按字面意思解释。

有关更多详细信息，请阅读： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#year](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#year)

或者，您可以处理“dd/mm/yyyy”格式的 javascript/Java 代码中的用户输入。限制用户仅以“dd/mm/yyyy”格式输入日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:55:32.707

问题是`01/10/12` *确实*满足`dd/MM/yyyy`。只是它（正如您所发现的）指的是公元 12 年。

您的选择是：

1.  进行前端过滤（不允许少于 10 个字符的日期字符串或以其他方式确保年份在合理范围内。）也许让 JavaScript 评估日期，如果在 1900 年之前（或任何看起来不错的截止日期）显示错误用户（或自动修复，如果这看起来更可取，请参阅 2 了解相关问题）
2.  在解析日期并“修复”仅使用两个字符明确输入的任何年份后评估日期对象（这可能很棘手；您如何处理从 19XX 到 20XX 的截止时间？）。
3.  为某个截止日期之前的任何日期返回一个异常（可能由 UI 处理）（可能最好与某些客户端验证结合使用）
4.  仅允许通过网络小部件（日期选择器）输入日期。

我的投票是 1 和 3 的组合。1 用于启用 JavaScript 的情况，3 用于处理 JS 验证失败的罕见情况。

# javascript - 用于过滤项目列表的 Javascript/jquery 可视化插件

> ID：12671648
> 
> 赞同：1
> 
> 时间：2012-10-01T10:37:18.703
> 
> 标签：javascript, jquery, backbone.js, filtering

我有一个显示项目列表的应用程序。 [http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html](http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html)

该应用程序基于[backbone.js](http://backbonejs.org/)

目前，列表项的过滤是使用[visualsearch.js](http://documentcloud.github.com/visualsearch/)完成的，这是一个很棒的插件，不幸的是对于非高级用户来说不是那么直观。

所以我现在应该实现一种不同的方式来过滤项目。

每个项目都有许多键，我想使用其中一些键来过滤列表。

在重新发明轮子之前，我搜索了一些插件，可能已经与主干集成，我能找到的只有这个[http://addyosmani.github.com/backbone.paginator/examples/netflix-client-paging/index.html](http://addyosmani.github.com/backbone.paginator/examples/netflix-client-paging/index.html)它对结果进行分页并允许过滤。它错过了一些功能（即过滤器的预定义值），但它很好。

*在我继续使用这个插件之前，我想问一下是否有人知道一些可以做我正在寻找的过滤工作的好插件（也只有 jquery，不一定与backbone.js 集成）。*

非常感谢。

**- -更新 - -**

我不是在寻找实现功能或逻辑的插件。我正在寻找一个 VISUAL 插件，它已经存在并且非常智能。

Visualsearch 就是其中之一，但我的用户不够聪明，无法使用它……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T23:46:17.137

我自己只是在研究这个（所以我对所有功能还不够熟悉，无法知道它是否正是您正在寻找的东西），但[Filtrify](http://luis-almeida.github.com/filtrify/ "过滤")似乎是最强大且易于使用的插件之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:34:53.593

你不能在模型中实现一个搜索/过滤方法吗？一个插件对我来说似乎有点矫枉过正......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:49:50.307

Backbone 的 Underscore.js 是 Backbone 集合的方法库。假设您的应用程序的所有模型都在一个集合中，您可以使用 Underscore 的 Filter 方法对其进行过滤：

[http://underscorejs.org/#filter](http://underscorejs.org/#filter)

# python - 在 django 中提交表单后重定向到索引页面

> ID：12671649
> 
> 赞同：7
> 
> 时间：2012-10-01T10:37:24.967
> 
> 标签：python, django

除了在添加产品数据后重定向回索引页面之外，一切正常，目前在我的数据保存后，它被重定向到**127.0.0.1:8000/product/add_product/add_product**

目前，当我的索引页面（add_product.html）加载时，我有一个表格可以呈现数据库中的数据，

1.  首先我的网址看起来像 >> **127.0.0.1:8000/product/**
2.  然后，一旦我点击添加按钮 url 更改为**127.0.0.1:8000/product/add_product/**，那里没问题，但是
3.  当我尝试再次添加数据时，我的 url 转到**127.0.0.1:8000/product/add_product/add_product**并且我得到一个 Page not found 错误

我的观点.py

```
from models import Product,Category
from django.shortcuts import render_to_response,get_object_or_404
from django.http import HttpResponseRedirect

def index(request):
    category_list = Category.objects.all()
    product_list = Product.objects.all()
    return render_to_response('product/add_product.html', {'category_list': category_list, 'product_list':product_list})

def add_product(request):
    post = request.POST.copy()

    category = Category.objects.get(name=post['category'])
    product = post['product']
    quantity = post['quantity']
    price = post['price']

    new_product = Product(category = category, product = product, quantity = quantity, price = price )
    new_product.save()
    category_list = Category.objects.all()
    product_list = Product.objects.all()
    return render_to_response('product/add_product.html', {'category_list': category_list, 'product_list':product_list}) 
```

我的网址.py

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('product.views',
    url(r'^$', 'index'),                       
    url(r'^add_product/$', 'add_product'),
) 
```

如何让 URL 指向我的索引页（add_product.html）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T10:45:05.867

在**127.0.0.1:8000/product/add_product/**的视图中 返回这个

```
from django.http import HttpResponseRedirect

def add_product(request)
    ...........................
    ...........................
    return HttpResponseRedirect('/') 
```

它将重定向到索引页面。还尝试提供**url 名称**，以便您可以使用**reverse**而不是 '/'

谢谢

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T10:48:38.540

您可能`action`在模板中错误地设置了表单。

而不是相对网址，

```
<form method="post" action="add_product"> 
```

动作应该有绝对网址：

```
<form method="post" action="/product/add_product"> 
```

作为一项改进，您可以使用[`url`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)模板标签，这样您就不需要在模板中硬编码 url。

```
{% load url from future %}
<form method="post" action="{% url 'add_product' %}"> 
```

上面的代码片段通过加载新的 url 标签来使用新的 url 语法。

# javascript - OpenLayers 按钮触发功能问题

> ID：12671651
> 
> 赞同：1
> 
> 时间：2012-10-01T10:37:29.770
> 
> 标签：javascript, function, button, openlayers

我正在向 OpenLayers 面板添加一些 toggle_type 按钮来打开/关闭矢量图层（每个按钮控制矢量图层的可见性）。该地图也有一个 selectFeature 事件监听器，它在另一个 div 中显示特征属性。

它仅在为一层编码时起作用。但是，如果我将代码更改为使用数组来添加多个图层，问题就开始了。我使用一个数组 (capasVectoriales) 来存储从 JSON 文件创建的矢量图层。这样做，按钮触发的停用功能开始做一些奇怪的事情，不删除图层并将要素“打印”在地图上（平移和缩放时不移动）。当我再次激活按钮时，功能会按预期运行。我可以使用 Firebug 中的 map.removeLayer(map.layers[1]) 删除图层。这是代码，

```
 function init() { .....

            capaRestauracion=capasVectoriales[0];

            var funcionActivarRestauracion= function() {
                map.addLayer(capaRestauracion);
                console.log('turn on' + capaRestauracion.name);
            };
            var funcionDesactivarRestauracion= function() {
                map.removeLayer(capaRestauracion);
                console.log('turno off ' + capaRestauracion.name);
            };

            // create type_toggle button
            var botonRestauracion = new OpenLayers.Control.Button({
                displayClass : 'boton' + capa,
                eventListeners : {
                    'activate' : funcionActivarRestauracion,
                    'deactivate' : funcionDesactivarRestauracion
                },
                title : 'Activar/Desactivar ' + capa,
                type : OpenLayers.Control.TYPE_TOGGLE
            });

            //create an external panel
            panelExterno = new OpenLayers.Control.Panel({
                div : document.getElementById("panel")
            });
            //add buttons to external panel

            panelExterno.addControls([botonRestauracion]);

            // add panel to map
            map.addControl(panelExterno);

            //activate button

            panelExterno.controls[0].activate();

            // create the select feature control
            var selector = new OpenLayers.Control.SelectFeature(capasVectoriales, {
                hover : true,
                autoActivate : true
            });

            map.addControl(selector); 
```

当我尝试用“capaVectorial [0]”数组项替换“capaVectorial”变量时似乎出现问题，但不明白为什么。

# asp.net - GridView 上的 ShowFooterWhenEmpty

> ID：12671652
> 
> 赞同：1
> 
> 时间：2012-10-01T10:37:31.550
> 
> 标签：asp.net, gridview, footer

我在 ASP.Net4.0 中有一个 GridView，我将 ShowHeaderWhenEmpty 属性设置为 true，但我也想对页脚执行相同的操作，但没有选项可以执行此操作？

有没有我没有看到的选项？如果不是，最好的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:02:43.813

您可以像这样使用 EmptyDataTemplate：

```
<asp:GridView ID="EntityGridView" runat="server" DataKeyNames="DocumentId" AutoGenerateColumns="False"
    AllowPaging="True" AllowSorting="False" SkinID="GridViewSmall" OnRowCommand="EntityGridView_RowCommand"
    OnPageIndexChanged="EntityGridView_PageIndexChanged">
    <Columns>
        <asp:BoundField DataField="Title" HeaderText="<% $resources:AppResource,Title %>" />
        <asp:BoundField DataField="Author" HeaderText="<% $resources:AppResource,Author %>" />
        <asp:BoundField DataField="FileName" HeaderText="<% $resources:AppResource,FileName %>" />
        <asp:BoundField DataField="Created" HeaderText="<% $resources:AppResource,Created %>" />
    </Columns>
    <EmptyDataTemplate>
        <asp:Label ID="EmptyLabel" runat="server" Text='<%# Resources.AppResource.NoContentToDisplay %>' CssClass="NoDataLabel"></asp:Label>
    </EmptyDataTemplate>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:54:45.650

我认为在 gridview 中没有特定的属性可以执行此操作，但是有一种解决方法涉及通过`UNION`在 SQL 中使用选择数据访问层上的空白行，但我不会推荐它。

> 如果您在gridview 上放置一些数据输入控件，只需将它们放在gridview 之后的html 标记中。

# javascript - 如何存储从下载的图像文件中获取的图像数据？

> ID：12671653
> 
> 赞同：0
> 
> 时间：2012-10-01T10:37:29.803
> 
> 标签：javascript, jquery, html

如何从下载的图像文件中显示图像，而不是直接从图像查看 url。

当我调用这个 url =" [http://api.example.com/api.php?a=profilepic&auth=tokenhere&file=filename](http://api.example.com/api.php?a=profilepic&auth=tokenhere&file=filename) "

它给出了下载文件。

通过使用 $.get 函数可以获取数据，但是如何转换为图像格式，以便我可以存储在变量中以供进一步使用。

如果我直接使用图像标记它可以工作`<img src="http://api.example.com/api.php? a=profilepic&auth=tokenhere&file=filename" >` ，但我需要将它存储为图像对象。

甚至尝试使用 Image() 对象它不起作用。

甚至尝试过这个[http://www.maxnov.com/getimagedata/#download](http://www.maxnov.com/getimagedata/#download)也没有用。

无法更改服务器端 api 调用。

只需在仅使用 js、jquery 和 html5 脚本的客户端进行更改

需要知道如何获取下载图像文件的base64数据

让它看起来像这样，

```
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgM...."/> 
```

期待你的重播

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:13:05.720

使用这样的代码：

```
var img = new Image(); 
img.onload = function () {
   // Code to execute when the image is completely downloaded.
}
img.src = "http://api.example.com/api.php? a=profilepic&auth=tokenhere&file=filename"; 
```

# parallel-processing - CUDA / OpenCL 中的深度优先搜索

> ID：12671654
> 
> 赞同：5
> 
> 时间：2012-10-01T10:37:33.333
> 
> 标签：parallel-processing, cuda, opencl, gpgpu, depth-first-search

我在 MPI 中实现并行深度优先搜索算法的一半，我正在考虑尝试在 CUDA / OpenCL 中也这样做，只是为了好玩/出于好奇。该算法很简单，但并非微不足道。C 中的单核版本大约有 200 行代码。

GPGPU适合这种问题多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:57:46.813

在 CUDA 中实现树搜索操作并不是那么简单。有一些论文，比如那个

*   “在 GPU 上探索回溯范式的经验教训” [http://dl.acm.org/citation.cfm?id=2033458](http://dl.acm.org/citation.cfm?id=2033458)

还有另一个相当简单的实现（在我看来不是一个大规模并行化的实现）

*   “使用 CUDA 在 GPU 上加速大型图算法”Pawan Harish 和 PJ Narayanan

困难在于，树操作通常涉及决策，并根据决策采取不同的分支。因此，在不重叠和进行冗余操作的情况下大规模并行化操作是相当困难的。

有一些方法使用堆栈和队列实现来遍历树。

您可能会在这里找到类似的问题： [错误：CUDA 同步上的 BFS](https://stackoverflow.com/questions/7806882/error-bfs-on-cuda-synchronization)

# iphone - 如何停止应用程序退出或在后台运行，直到某些进程在 iphone sdk 中完成？

> ID：12671660
> 
> 赞同：0
> 
> 时间：2012-10-01T10:37:44.553
> 
> 标签：iphone, ios, terminate, quit

在我的应用程序中，我正在从服务器同步一些数据。我想停止退出应用程序或在后台运行应用程序，直到此过程完成。即一旦启动此过程，用户无法退出或应用程序不应进入后台，直到此过程完成。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:40:46.727

不，您不能阻止用户退出应用程序。

但是您可以使用例如 ASIHTTPRequest.. 在后台运行同步。

# android - 从自定义应用程序主题设置 android 窗口标题栏图标

> ID：12671661
> 
> 赞同：2
> 
> 时间：2012-10-01T10:37:54.390
> 
> 标签：android, android-layout

是否可以从我自己的自定义主题中设置窗口标题栏标题和图标？当我在 Eclipse 中创建一个新的 Android 项目并让它使用 AppTheme 时，如下所示

```
<style name="AppTheme" parent="android:Theme.Light" /> 
```

窗口标题栏标题和图标显示为我想要的。

当我在 mainfest 文件中选择我自己的主题时，只有标题显示在窗口标题栏中，而不是图标。

我的主题如下

```
style name="GenericWallpaper" parent="android:Theme.Light"
item name="android:windowBackground">@drawable/blackbackground
item name="android:layout_width">fill_parent
item name="android:layout_height">fill_parent 
```

我宁愿使用我的 xml 样式文件来指定所需的图标和标题，也不愿在每个活动的窗口标题栏中以编程方式设置它。

我正在使用`android:minSdkVersion="8"`，`android:targetSdkVersion="15"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:17:59.323

您可以使用[操作栏样式生成器](http://www.androiduipatterns.com/2012/05/android-action-bar-style-generator.html)。它是由 Jeff Gilfelt 制作的免费开源工具。

您还可以查看有关设置 ActionBar 样式的更完整的博客文章：[第 1](http://blog.stylingandroid.com/archives/1240)部分和[第 2 部分](http://blog.stylingandroid.com/archives/1249)

# windows - 重新设置netbeans文本抗锯齿

> ID：12671662
> 
> 赞同：3
> 
> 时间：2012-10-01T10:37:59.927
> 
> 标签：windows, netbeans, fonts

我正在使用 Netbeans 进行 PHP 开发。到目前为止，我一直在编辑器中使用 Consolas 字体。前几天我玩了不同的字体，我似乎失去了编辑器中的抗锯齿功能。无论我现在选择什么字体，它看起来都是锯齿状的——甚至是 Consolas。

我敢肯定，某个设置一定在某个地方被覆盖了。

我试过重置 Windows TrueType 设置（其他应用程序很好）无济于事......

在网上搜索似乎表明 Netbeans 中有隐藏设置来打开或关闭抗锯齿。但是我遇到的文章似乎与我的版本不符。

Windows 7、Netbeans IDE 7.2

非常感谢帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-26T10:25:00.630

版本应该没有关系。但是由于许多人报告默认的抗锯齿行为可能会随着不同（甚至更新的 Java 或 Netbeans 版本）而改变，您应该尝试最适合您的抗锯齿设置：所有可能的选项都在官方[Netbeans 字体渲染中进行了解释常见问题解答](http://wiki.netbeans.org/FaqFontRendering)。

这些选项可以在`netbeans.conf`文件中设置（在 Windows 7 上通常可以在 中找到），或者您可以通过调整（分别设置）环境变量来为**所有**`C:\Program Files\Netbeans 7.2\etc`基于 Java swing 的应用程序设置系统范围的默认字体渲染行为。**`_JAVA_OPTIONS`**

 **为了我

`-J-Dswing.aatext=true -J-Dawt.useSystemAAFontSettings=lcd`

在 Windows 7 上像魅力一样工作，而

`-J-Dswing.aatext=true -J-Dawt.useSystemAAFontSettings=on`

对我来说，在 Manjaro Linux (XFCE) 上似乎工作得更好。**

# iphone - 通过单击 UIAlertView OK 按钮 iphone 应用程序解除 UITextView 键盘？

> ID：12671665
> 
> 赞同：1
> 
> 时间：2012-10-01T10:38:07.323
> 
> 标签：iphone, ios, keyboard, uitextview, uialertview

我在基于消息传递的 iPhone 应用程序中工作。在我的一个 UIViewController 中，我正在显示 UITextView 键盘并从 web 服务中收到一些警报消息。

当我在 UIAlertView 中显示警报消息时，通过单击 UIAlertView 中的确定按钮来关闭 UITextview 键盘。我试图将 becomeFirstResponder 放在 UIAlertView 委托中，但仍然键盘关闭。供你参考，

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   [messageTextView becomeFirstResponder]; // Here again I am giving becomeFirstResponder to my UITextView

   int alertMessageArrayCount = [alertMessageArray count];
    if (messageAlertView) 
    {
        if (messageAlertCount < alertMessageArrayCount)  // These codes to show my all messages in UIAlertView one by one..
        {
            messageAlertCount = messageAlertCount + 1;

            arrayObjectValue = arrayObjectValue + 1;

            NSString *alertMessage = [alertMessageArray objectAtIndex:arrayObjectValue];

            messageAlertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:alertMessage delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
            [messageAlertView show];
            [messageAlertView release];
        }
    }
} 
```

有人可以帮忙解决这个问题吗？

**编辑 ：**

```
messageTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 5, 210, 30)];
messageTextView.delegate = self;
messageTextView.backgroundColor = [UIColor clearColor];
messageTextView.clipsToBounds = NO;
messageTextView.font = [UIFont fontWithName:@"Helvetica" size:14];
[self.view addSubView:messageTextView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:11:29.630

在您的 UIAlertView 委托方法中尝试如下所示的 [messageTextView becomeFirstResponder];

```
if([messageTextView resignFirstResponder]){
    [messageTextView becomeFirstResponder];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:51:18.673

写 alertview 的委托“nil”而不是 self。

```
 messageAlertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:alertMessage delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil]; 
```

# android - WCF 复杂 Web 服务访问 Android

> ID：12671667
> 
> 赞同：3
> 
> 时间：2012-10-01T10:38:21.923
> 
> 标签：android, wcf

我在 Android 中访问复杂的 WCF Web 服务时遇到问题。关于我的问题的详细信息如下：

对 WCF Web 服务的典型请求具有以下 XML：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header><Action s:mustUnderstand="1"xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/manojService/MethodName</Action> 
  </s:Header>
  <s:Body>
    <MethodName xmlns="http://tempuri.org/">
      <name>ABC</name>
      <Collection xmlns:d4p1="http://schemas.datacontract.org/2004/07/YXZ.Model" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <d4p1:location>whatever</d4p1:location>
        <d4p1:OfficeLocation>
          <d4p1:Lattitude>28.5</d4p1:Lattitude>
          <d4p1:LocationID>0</d4p1:LocationID>
        </d4p1:OfficeLocation>
      </Collection>
      <Action>Add</Action>   
    </MethodName> 
  </s:Body>
</s:Envelope> 
```

我正在使用简单的 SOAP 概念使用 KSoap 库进行登录，如下所示：

```
try {   
    StringBuilder sb = null;
    SoapObject request = new SoapObject("http://tempuri.org/",
            "methodName");
    request.addProperty("name", "aaaa");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE( "Service urls");
    androidHttpTransport.call("http://tempuri.org/manojService/MethodName", envelope);
    Object result = (Object) envelope.getResponse();
    String resultData = result.toString();
    System.out.println("result Data :-" + resultData);

} catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
    System.out.println("error is occured :-" + e.getMessage());
} 
```

如果您有任何在soap中发送数组类型数据的解决方案，请告诉我。

# spring - 从 jdk 中排除依赖项/jar

> ID：12671669
> 
> 赞同：1
> 
> 时间：2012-10-01T10:38:29.630
> 
> 标签：spring, email, maven, spring-mvc, dependencies

我正在 Maven 上开发一个 Spring 应用程序，并面临一个看似重复的依赖问题。除了mail.jar，我在activation.jar 中还有javax.activation 以及抛出以下异常的jdk：

```
javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp
    at javax.mail.Session.getProvider(Session.java:229)
    at javax.mail.Session.getTransport(Session.java:338)
    at com.ace.amadeus.service.impl.EmailServiceImpl.send(EmailServiceImpl.java:75)
    at com.ace.amadeus.controller.MasterPricerController.index(MasterPricerController.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:421)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:136)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:326)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:313)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

我通过向 pom.xml 添加排除项成功删除了activation.jar，如下所示，但是，异常似乎并没有消失。

```
<dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
                        <exclusions>
                                <exclusion>
                                        <groupId>javax.activation</groupId>
                                        <artifactId>activation</artifactId>
                                </exclusion>
                        </exclusions>
    </dependency> 
```

现在想知道是否可以排除jdk带来的依赖。这可能吗？![在此处输入图像描述](../Images/25587de6ef5d84a6a90ab940ec04a1e3.png)

感谢帮助。
詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:58:04.533

您可以使用[maven-duplicate-finder 插件](https://github.com/ning/maven-duplicate-finder-plugin)来帮助追踪项目中类冲突的来源。这可以帮助确定您需要在何处添加排除项。如果发现重复的类，还请检查[执行器插件](http://mojo.codehaus.org/extra-enforcer-rules/banDuplicateClasses.html)是否使您的构建失败。

```
mvn com.ning.maven.plugins:maven-duplicate-finder-plugin:1.0.2:check 
```

对于您的特定错误，您似乎确实需要 javax.mail:mail 和类路径上的激活。还有一些[其他](https://stackoverflow.com/search?q=locate%20provider%20smtp)问题可以处理此特定错误，可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:58:07.907

请确保在环境变量中设置了 maven home 和 Java_home。如果您正在运行 Maven 槽 IDE。指定要使用的 Maven。

在日食中：

首选项-> Maven-> 安装。添加您设置为 maven home 的 Maven 路径。

# .net - 读取 png 图像的部分内容

> ID：12671670
> 
> 赞同：1
> 
> 时间：2012-10-01T10:38:36.840
> 
> 标签：.net, compact-framework, libpng, opennetcf

我正在为 Windows Mobile 6.1 开发应用程序。在某些时候显示图像的设备。但是，我在执行此操作时有时会遇到 RAM 的限制。

[我正在使用来自http://blog.opennetcf.com/ctacke/2010/10/13/LoadingPartsOfLargeImagesInTheCompactFramework.aspx](http://blog.opennetcf.com/ctacke/2010/10/13/LoadingPartsOfLargeImagesInTheCompactFramework.aspx)的配方，但最后，它没有为我提供解决方案。更具体地说，在 CreateClip 中读取整个图像

```
 GetFactory().CreateBitmapFromImage(image, info.Width, info.Height,  
            info.PixelFormat, InterpolationHint.InterpolationHintDefault, out original); 
```

这是我收到 OutOfMemoryException 的地方。

问题是，如何只读取特定区域，而将其余图像丢弃而不保存在内存中？我使用的图像格式是png。

最接近我需要的是来自 libpng 的 png_read_row，因为它允许使用单行缓冲区丢弃所有不需要的行并将实际需要的部分行提取到结果缓冲区中。这是使用它的有效方式吗？怎么可能呢？

# firebase - firebase 是否有计划允许来自其他语言（例如 Java）的服务器端套接字连接？

> ID：12671673
> 
> 赞同：1
> 
> 时间：2012-10-01T10:38:45.830
> 
> 标签：firebase

感谢您拥有完整的 REST API，这很棒，但我想知道将来是否有可能从 Java 到 firebase 的套接字连接类似于 node.js 版本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:26:07.903

目前，我们为 JS（Web 和 Node.js）和 REST API 提供客户端。我们的目的是最终为所有类型的客户端和服务器语言提供完整的实时库。我们目前没有正在开发的 Java 库，但我们确实打算在时间允许时构建一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T15:09:53.890

~~如果您对 REST API 不满意，可以使用[Java WebSockets 客户端连接到 Firebase。](https://github.com/TooTallNate/Java-WebSocket)在后台，这就是 node.js（即[faye-websockets-node](https://github.com/faye/faye-websocket-node)库）正在做的事情。~~

# xamarin.ios - 为 IOS 创建 AOT 清单 (ExecutionEngineException)

> ID：12671674
> 
> 赞同：4
> 
> 时间：2012-10-01T10:38:46.833
> 
> 标签：xamarin.ios, aot, executionengineexception

首先，我在 answers.unity.com 上发布了一个类似的问题，在意识到它会影响更广泛的社区之后......所以请不要把它当作交叉发布。

最近将 C# 代码部署到 IOS 对我来说是一场噩梦。当我尝试将我的游戏部署到 IPAD 时，一切都以 ExecutionEngineException 开始，并且我使用了我的成熟且经过单元测试的程序集。

这几天我做了功课，发现了几十个与ExecutionEngineException相关的问题。据我所知，这里没有神奇的解决方案，只能解决特定代码。

现在问题来了：假设您有一个经过良好单元测试的代码。（例如游戏 AI 或任何与 IOS 平台不直接相关的东西）这在 IOS 上运行时会变成雷区。您无法知道，也无法对代码的哪一部分进行单元测试。

**这破坏了我（我们的？）关于软件质量和测试的所有想法......**

我们必须在这里找到解决方案。理想情况下，我们应该在桌面上针对其单元测试运行 AOT ed 代码。我认为目前不可能，如果我错了，请纠正我并分享一步一步的说明如何做到这一点（最好在 Windows 中？）

作为备用计划，我们必须创建一个详细列表，如果针对 AOT-ed 平台，如 IOS，则不使用哪种代码构造

到目前为止我的经验：

1) 将 FirstOrDefault 与值类型一起使用 2) 使用 Sum(customType =(gt) customType.Property)

有人知道如何处理这个问题吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:54:57.400

> 假设您有一个经过良好单元测试的代码。

如果您已经进行了单元测试，那么您很幸运。您只需使用[Touch.Unit](http://docs.xamarin.com/ios/tutorials/Unit_Testing)在 iOS 设备上调整这些单元测试。

> 作为备用计划，我们必须创建一个详细列表，如果针对 AOT-ed 平台，如 IOS，则不使用哪种代码构造

你会得到最接近的是 MonoTouch 的[限制](http://docs.xamarin.com/ios/about/limitations)页面。上下文，而不是 API，通常是最重要的细节。

例如，使用值类型的泛型会产生问题（因为很难检测到需要生成什么）。人们在使用 LINQ 时经常会*遇到*这个问题，但这不是 LINQ 问题——而是 LINQ 查询中使用的类型。

> 1) 将 FirstOrDefault 与值类型一起使用

已在 MonoTouch 中修复了相当长一段时间的 AFAIK（至少有几种变体）。OTOH Unity 引擎可能还没有这些修复。

> 2) 使用 Sum(customType =(gt) customType.Property)

在这种情况下，不知道类型就不可能说它是否有效。如果/当您遇到此类情况时，请将它们报告给[bugzilla](http://bugzilla.xamarin.com)，因为我们将能够将它们包含在我们的测试套件中（用于未来的版本），并且通常能够为大多数情况提供快速的解决方案。

# javascript - 在 javascript 的替换和测试方法中使用 RegEx

> ID：12671684
> 
> 赞同：0
> 
> 时间：2012-10-01T10:39:24.823
> 
> 标签：javascript, regex

我正在使用测试和替换方法来检测和替换文本中的标签，但替换方法返回与标签关联的文本，而应该只返回没有标签的文本！为什么？

我的jQuery插件：

```
jQuery.fn.extend({
insertTag: function(Tag){
    var pattern = new RegExp("\[("+Tag+")\](.*?)\[\/("+Tag+")\]","gi");

    return this.each(function (i) {
        var sel,ptrn;

        if (document.selection) {
            this.focus();
            sel = document.selection.createRange();
            sel.text = '['+Tag+']' + sel.text + '[/'+Tag+']';
        }
        else if (this.selectionStart || this.selectionStart == '0') {
            this.focus();
            var startPos = this.selectionStart, endPos = this.selectionEnd;
            sel = this.value.substring(startPos, endPos);
            alert(sel); // show seleced text for debug ing!

            if(pattern.test(sel)){
              txt = sel.replace(pattern,"$1");
              alert(txt); // show replaced text for debug ing!

              this.value = this.value.substring(0, startPos) + (txt) + this.value.substring(endPos, this.value.length);

            }else{
            this.value = this.value.substring(0, startPos) + ('['+Tag+']' + sel + '[/'+Tag+']') + this.value.substring(endPos, this.value.length);

            }
        }
    })
} 
```

});

此部分用于删除选定文本中的标记（如果存在）：

```
if(pattern.test(sel)){
              txt = sel.replace(pattern,"$1");
              alert(txt); // show replaced text for debug ing!

              this.value = this.value.substring(0, startPos) + (txt) + this.value.substring(endPos, this.value.length);

            } 
```

但它不能正常工作......

例如 ：

```
txt = $("#txt"); 
```

txt.insertTag(b)：

```
[b]some text[/b] 
```

txt.insertTag(b)：

```
[]some text[/b] 
```

而回到“一些文字”

谢谢你的帮助 ：）

# html - div内的HTML表格标题

> ID：12671692
> 
> 赞同：2
> 
> 时间：2012-10-01T10:39:54.187
> 
> 标签：html, css, html-table, caption

我有一个似乎很简单的问题：我有一个表格，我正在制作一个可访问的友好元素，包括使用`<caption>`表格标题的标签。这一切都很好，但是我的元素标题被设计成具有以下结构的功能区：

```
<div class="ribbon"><h2></h2></div> 
```

我已经读过表格的标题**必须**在打开表格标签之后直接出现，所以我的问题是：我可以将我的标题包装在一个 div 中并且它仍然被解释为像这样的表格的有效标题吗？

`<div class="ribbon"><caption>Title Here</caption></div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:00:23.097

不，所以在标题中使用跨度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:40:33.880

不，不会的。该 HTML 无效。

从[HTML 5 规范](http://www.w3.org/TR/html5/the-caption-element.html#the-caption-element)：

> **可以使用此元素的上下文：** 作为表格元素的第一个子元素。

# javascript - AMCharts 类别标题位置

> ID：12671693
> 
> 赞同：0
> 
> 时间：2012-10-01T10:39:55.453
> 
> 标签：javascript, amcharts

我有一个 AMChart，我已经添加了一个类别标题，但我无法让它正确显示，无论我调整什么参数，我都无法让它显示在距离图表区域底部正确的距离.

这是一个显示问题的最小 JSFiddle，任何人都可以使类别标题正确呈现吗？ [http://jsfiddle.net/MW4BU/](http://jsfiddle.net/MW4BU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:25:35.540

您是否尝试过手动更改图表边距？我还没有对此进行测试，但它可能会解决您的问题：

**示例代码：**

```
 // autoMargins should be set to false in order chart to use custom margin values 
    chart.autoMargins = false;
    chart.marginTop = 60;
    chart.marginBottom = 60;
    chart.marginLeft = 30;
    chart.marginRight = 30; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:27:02.967

这可以通过`&nbsp;`从您的 div中删除来解决

# c# - 如何控制播放器的绘画

> ID：12671696
> 
> 赞同：0
> 
> 时间：2012-10-01T10:40:01.087
> 
> 标签：c#, c++, directshow, repaint, wm-paint

我正在尝试在实时视频上画一些东西。在我看来，最好的方法是处理 WM_PIANT 事件。

我的目的是让玩家先绘制，然后再绘制应用程序。这样我就可以在视频上画画了。这意味着我希望每次在我们需要在窗口上绘制新框架然后处理事件之前都得到通知。

我使用 DirectshowNet，所以我使用 C# 编程（我拥有 c++ API 的所有接口）。我了解图形管理器将某些窗口消息转发给视频渲染器，例如 WM_PAINT。

如何使播放器在应用程序之前而不是之后绘制框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:17:12.550

`WM_PAINT`不是最好的方法，而且是错误的方法。

查看`DxText`DirectShow.NET 库中的示例。它的描述是：

> 一个示例应用程序，展示了如何在数据流上叠加文本字符串。流是从 avi 文件中读取的。

这与您想要达到的目标非常接近。另一种方法显示在另一个示例中`BitmapMixer`：

> BitmapMixer 是如何使用 VMR9 在视频上绘制内容的示例。
> 
> 本示例主要围绕 IVMRMixerBitmap9 接口构建。此接口接受位图作为 GDI 设备上下文或 Direct3D 表面。Direct3D Surface 的主要优点是它可以使用真正的 Alpha 透明度。GDI DC 不支持 alpha 位图，透明度是通过使用颜色键控来实现的。
> 
> 此示例使用 GDI+ 动态生成位图。

# haskell - 如何在 Haskell 中使用元组进行模式匹配？

> ID：12671697
> 
> 赞同：1
> 
> 时间：2012-10-01T10:40:02.570
> 
> 标签：haskell, pattern-matching, tuples

尝试使用元组键入匹配时遇到问题。

```
filterSth :: [a]->[b]->([a],[b])
filterSth _ [] = (_, []) 
```

这意味着当第二个参数是一个空列表时，我不在乎我希望返回的元组的第一个元素。我该如何实现呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T10:48:59.633

如果您不关心元组的第一个元素并且您确定不会使用它，您可以返回`undefined`，即

```
filterSth _ [] = (undefined, []) 
```

请记住，尝试评估`undefined`将导致运行时异常。

另一个想法可能是返回`Either ([a], [b]) [b]`。

```
filterSth :: [a] -> [b] -> Either ([a], [b]) [b]
filterSth _ [] = Right []
-- and a case for a non-empty second argument 
```

如果你想原封不动地返回第一个参数，你不能使用`_`. `_`意味着您不在乎参数的值是什么，并且您不会使用它。由于您*要*使用它，因此您必须`_`用命名参数替换并显式返回它

```
filterSth a [] = (a, []) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T10:50:54.600

如果您不关心作为元组的第一个组件返回的内容，我建议您返回一个错误，如果您不小心使用它会爆炸。

```
filterSth _ [] = (error "Don't use this", []) 
```

# javascript - 使用 jquery 拖放

> ID：12671701
> 
> 赞同：4
> 
> 时间：2012-10-01T10:40:14.030
> 
> 标签：javascript, jquery, html, css, drag-and-drop

我有两个基于 jquery 的列表，示例在[这里](http://devheart.org/examples/jquery-customizable-layout-using-drag-and-drop/2-saving-and-loading-items/index.html)我需要完全相同的功能，但有如下细微变化：

根据上面的内容，当我单击时，`Get items`我会得到所有可排序的项目值，但我想要的是从列表 A 中拖动并将它们放到列表 B 中，反之亦然，如果我单击获取项目，我应该只获得列表 B 上的可排序项目而不是来自列表 A。

如何做到这一点，我们可以自定义上面的 jquery 库还是有任何其他的库，即使它们在 java 脚本中对我来说也很好。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:42:14.187

我过去做过类似的事情，这就是我实现它的方式：http: [//jsfiddle.net/dazefs/vGYVX/](http://jsfiddle.net/dazefs/vGYVX/)

```
<div style="background-color:Gray">

<ul id="sortable">
    <li>
      <span style="background-color:yellow">
         Item 1
       </span>

     </li>
    <li>
     <span style="background-color:red">
       Item 2
     </span>

    </li>
    <li>
      <span style="background-color:green">
     Item 3
     </span>

  </li>
    <li>
    <span style="background-color:Blue">
           Item 4
     </span>
     </li>
   </ul>

<ul id="sortable2" style="width:60%">
<li>
    <span style="background-color:yellow">
        Item 5
    </span>
</li>
    <li>
    <span style="background-color:red">
        Item 6
    </span>
</li>
    <li>
    <span style="background-color:green">
        Item 7
    </span>
   </li>
    <li>
       <span style="background-color:Blue">
          Item 8
       </span>
   </li>
</ul>

 </div> 
```

```
$(function () {
    $("#sortable, #sortable2").sortable({
        connectWith: "#sortable2, #sortable",
        receive: function (event, ui) {
             alert('item has been sorted');
         }
    });

    //})
}); 
```

**要实现 3 个瓦片组：**

[http://jsfiddle.net/dazefs/XRdz6/](http://jsfiddle.net/dazefs/XRdz6/)

[http://jsfiddle.net/dazefs/vGYVX/](http://jsfiddle.net/dazefs/vGYVX/)

单击“GetItems”后，您必须稍微修改此实现以合并获取项目。

# javascript - 带有阻尼效果的上滑和下滑

> ID：12671707
> 
> 赞同：3
> 
> 时间：2012-10-01T10:40:29.970
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, visual-effects

是否有一个具有阻尼效果`slideUp`的jQuery插件？`slideDown`也就是说，大小的变化以相当快的速度开始，并在运动结束时减慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:35:55.023

您可以传入缓动作为第二个参数...

```
$("#something").slideDown(500, "linear"); 
```

jQuery 包括`swing`and `linear`，前者是默认的。

要获得您描述的行为，请使用`easeOut`jQuery UI 中提供的 （您已标记问题）。

# php - 什么是 JRequest::setVar('hidemainmenu', 1)

> ID：12671708
> 
> 赞同：1
> 
> 时间：2012-10-01T10:40:31.170
> 
> 标签：php, joomla, joomla1.5, joomla2.5, joomla1.7

我已经使用 joomla 一段时间了。我每天都会遇到，`JRequest::setVar('hidemainmenu', 1)`但我无法弄清楚它是什么。即使我评论那条线，也没有任何变化。我想知道的是我的代码需要`JRequest::setVar('hidemainmenu', 1)`吗？导入那条线是标准吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:59:07.527

这对于视图特别有用，当用户在未遵循正确过程的情况下导航离开时，项目将被锁定。

如果我们将 hidemainmenu 请求值修改为 1，则不会显示子菜单。我们通常在控制器的方法中这样做；一种常用的方法是`edit()`. 此示例演示如何：

```
JRequest::setVar('hidemainmenu', 1); 
```

这样做时还有另一个警告；主菜单将被停用。此屏幕截图描绘了后端顶部的主菜单：

![在此处输入图像描述](../Images/d9aa8b2af2cefd51e401f419b947b44b.png)

此屏幕截图描绘了启用 hidemainmenu 时后端顶部的主菜单；你会注意到所有的菜单项都是灰色的：

![在此处输入图像描述](../Images/b84cedff2eae62f172872ce8af979a4c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:53:08.507

```
JRequest::setVar('hidemainmenu', 1) 
```

当我们想要禁用 Joomla 管理中的主菜单时使用。它通常用于我们组件的编辑部分。它可以防止用户打开未保存的记录。由于当时用户将无法使用 Joomla 菜单选项，因此唯一的选项仍然是组件特定的工具栏。

例如，当您在 Joomla 管理员用户管理器中查看用户列表时，您可以访问他的主管理菜单选项，但是当您编辑特定用户时，joomla 管理菜单被禁用。

这个特性可以通过使用来实现 `JRequest::setVar('hidemainmenu', 1)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T10:09:44.503

`JRequest`将被弃用。在 2.5+ 版本中使用

```
$app = JFactory::getApplication();
$input = $app->input;
$input->set('hidemainmenu', 1); 
```

# java - JavaFX 2.2 与本机捆绑包（exe）的问题

> ID：12671709
> 
> 赞同：1
> 
> 时间：2012-10-01T10:40:32.713
> 
> 标签：java, javafx, javafx-2

我有一个 Javafx 2.2 应用程序，当我从 netbeans 7.2 将它作为 jar 运行时，它运行完美，但是当我创建一个 exe 并安装 exe 时，它​​无法运行并抛出一个 execption。

我没有任何日志知道错误来自哪里，而且这只发生在只有 exe 的情况下。

下面是蚂蚁目标。

```
 <target name="-post-jfx-deploy">
    <fx:deploy width="${javafx.run.width}" height="${javafx.run.height}" 
               nativeBundles="exe"
               outdir="${basedir}/${dist.dir}" outfile="${application.title}">
        <fx:application name="${application.title}" 
                        mainClass="${javafx.main.class}"/>
        <fx:permissions elevated="true"/>
        <fx:resources>
            <fx:fileset dir="${basedir}/${dist.dir}"
                        includes="*.jar"/>
        </fx:resources>
        <fx:info title="${application.title}" 
                 vendor="${application.vendor}"/>
        <fx:platform javafx="2.1+">
            <fx:jvmarg value="-Xmx400m"/>
            <fx:jvmarg value="-verbose:jni"/>
        </fx:platform> 
    </fx:deploy>          
</target> 
```

![在此处输入图像描述](../Images/6493f8150e99abf2fa13ae9a01430496.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:22:59.637

我尝试设置 log4j，以便我可以对应用程序的内部状态进行一些记录，然后错误突然消失了。

显然这是因为当 log4.jar 在类路径上时 log4j 没有正确设置，或者通过将 log4j.xml 添加到路径中，错误消失了。感谢您的帮助。

# javascript - 如何引用 Gmail 的文本框？

> ID：12671711
> 
> 赞同：2
> 
> 时间：2012-10-01T10:40:41.007
> 
> 标签：javascript, jquery, gmail, greasemonkey

我正在为 gmail 编写 Greasemonkey 脚本，我需要找到一种方法来引用 gmail 的文本框（当您撰写和回复电子邮件时）。Gmail 有一个带有新 HTML 的 iframe，文本位于正文中，作为其所见即所得编辑器的一部分。我试过用 jquery 选择这些元素的所有类，但它们不起作用——特别是，`.keypress()`

这是我尝试过的：

```
$(".editable LW-avf").keypress(function(event) {
... // the wysiwyg body
});

$(".Am Al editable").keypress(function(event) {
... // the iframe
}); 
```

有没有办法绑定按键事件处理程序？或者甚至可能因为 gmail 不是传统的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:05:41.813

它不漂亮，但它可以完成工作：

```
document
    .querySelector(".editable")
    .contentDocument
    .querySelector(".editable")
    .onkeypress = function() { alert("jayer!"); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:11:54.960

`(".editable LW-avf")`会选择**不** `<body class="editable LW-avf">`。

它会选择类似的东西：

```
<div class="editable">
    <LW-avf></LW-avf>
</div> 
```

如果存在的话。

你要：

```
$("body.editable.LW-avf") 
```

（两个类，选择器中的两个点。）

还：

1.  确保脚本设置为在 iframe 上运行（默认情况下）。
2.  您想使用`keydown`，而不是`keypress`，用于您的目的。

# xcode - 链接器命令失败，退出代码为 1（使用 -v 查看调用）（armv7）xcode

> ID：12671712
> 
> 赞同：2
> 
> 时间：2012-10-01T10:40:43.457
> 
> 标签：xcode, xcode4, barcode-scanner, armv7

我试图编译我的 xcode 项目（我使用 xcode 4.5）并且我已经在我的项目中安装了 cordova 1,5 和插件 BarecodeScanner。

当我尝试在 iOs 6 ipod 设备上编译时，出现以下错误：

```
Ld "/Users/username/Library/Developer/Xcode/DerivedData/codebarre4-dfyfuljrumiqgvbcbcsmwxzxbnuq/Build/Intermediates/codebarre4.build/Ad Hoc Distribution-iphoneos/codebarre4.build/Objects-normal/armv7s/codebarre4" normal armv7s
    cd /Users/username/Sites/iOS/codebarre4
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk "-L/Users/username/Library/Developer/Xcode/DerivedData/codebarre4-dfyfuljrumiqgvbcbcsmwxzxbnuq/Build/Products/Ad Hoc Distribution-iphoneos" "-F/Users/username/Library/Developer/Xcode/DerivedData/codebarre4-dfyfuljrumiqgvbcbcsmwxzxbnuq/Build/Products/Ad Hoc Distribution-iphoneos" -F/Users/Shared/Cordova/Frameworks -filelist "/Users/username/Library/Developer/Xcode/DerivedData/codebarre4-dfyfuljrumiqgvbcbcsmwxzxbnuq/Build/Intermediates/codebarre4.build/Ad Hoc Distribution-iphoneos/codebarre4.build/Objects-normal/armv7s/codebarre4.LinkFileList" -dead_strip -weak_framework UIKit -weak_framework AVFoundation -weak_framework CoreMedia -weak_library /usr/lib/libSystem.B.dylib -fobjc-link-runtime -miphoneos-version-min=6.0 -weak-liconv -weak_framework CoreVideo -weak_framework AssetsLibrary -weak_framework AVFoundation -framework Foundation -framework UIKit -framework CoreGraphics -framework AddressBook -framework AddressBookUI -framework AudioToolbox -framework CoreLocation -framework MediaPlayer -framework QuartzCore -framework SystemConfiguration -framework MobileCoreServices -framework CoreMedia -framework Cordova -o "/Users/username/Library/Developer/Xcode/DerivedData/codebarre4-dfyfuljrumiqgvbcbcsmwxzxbnuq/Build/Intermediates/codebarre4.build/Ad Hoc Distribution-iphoneos/codebarre4.build/Objects-normal/armv7s/codebarre4"

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/Shared/Cordova/Frameworks/Cordova.framework/Cordova for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这条错误消息很难理解……我在网上搜索过，但发现了什么……你知道这条消息的来源吗？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-13T00:47:57.603

对我有用的是在 Build Settings > Build options 中将“Enable Bitcode”设置为“No”。

使用顶部的搜索： http: [//screencast.com/t/xSCnqHGkhh](http://screencast.com/t/xSCnqHGkhh)

我得到的错误是：

> XXX 不包含位码。您必须在启用位码的情况下重建它（Xcode 设置 ENABLE_BITCODE），从供应商处获取更新的库，或禁用此目标的位码。用于架构 arm64

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:52:11.053

您可能没有在项目中包含任何框架。去

> 项目 > 目标 > 构建阶段 > 将二进制文件与库链接

并添加您缺少的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:58:09.077

我也遇到了同样的错误。

我通过以下步骤解决了我的问题：

1.  前往`Build Settings`项目。
2.  在`Settings`>下`Valid Architecture settings`，我将 Debug 的值设置为`armv7`and `armv7s`。我将 Release 的值设置为`armv7`and `armv7s`。
3.  我意识到这些`armv7s`物品导致了问题。所以我`armv7s`从两个条目中删除。

在那之后，我能够毫无问题地归档我的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T18:29:55.443

另请参阅[此问题](https://stackoverflow.com/questions/12402092/file-is-universal-three-slices-but-it-does-not-contain-an-armv7-s-slice-err)。

1.  确保您的构建设置“架构”设置包括目标架构（处理器芯片） - 适用于 iOS 6 的 armv7、适用于 iOS 7 的 armv7s 等。
2.  如果您有任何链接的第三方库，请确保它们是在适当的架构支持下构建的。否则重建这些库或检查开发人员的更新下载。
3.  最后，使用更新的库、Clean 和 Build 重新打开项目。
4.  您可能还想验证您是否拥有具有正确 iOS 支持环境的最新 XCode。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T14:15:03.657

您的项目可能配置为以阻碍链接器的 armv7 为目标。

1.  选择您的项目
2.  转到信息选项卡
3.  如果存在，则删除所需的设备能力项（可能称为 armv7）

# html - golang：如何用“”替换“\n ”

> ID：12671713
> 
> 赞同：8
> 
> 时间：2012-10-01T10:40:45.260
> 
> 标签：html, replace, go

我尝试使用`strings.Replace(s,"\n","<br>",-1);` 但结果有所不同，可以像`<br>`在网络浏览器中一样显示，但实际上不是`"<br>"`。谁能告诉我该怎么做？

我的主要目标是将行尾字符从 a 更改为html 中`<textarea>`的`<br>`标记。

任何线索都会受到欢迎，在此先感谢。

PS：

问：你想从数据库中获取它吗？

A：是的，我从 GAE 的数据库中获取字符串，然后替换`\n`为`<br>`. 数据库中的字符串有什么不同吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T11:02:36.260

您的代码中的其他地方存在问题 - 将输出放入模板时可能会被转义？您发布的行将用 br 替换换行符并且是正确的 - 请参阅这个简单的测试：

```
package main
import("strings")

func main() {
    s := "I am a string\nContaining new lines"
    s = strings.Replace(s,"\n","<br>",-1)
    println(s)
} 
```

您需要发布比这更多的代码，以便人们找到您出错的地方，例如发布创建/操作字符串的函数，以及将其输出到 html 的模板位。

On Go 游乐场 - [http://play.golang.org/p/KMzxku4UtL](http://play.golang.org/p/KMzxku4UtL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:13:11.363

[https://stackoverflow.com/users/296559/robotamer](https://stackoverflow.com/users/296559/robotamer) 做对了。问题解决了。

问题出在模板文件中。我使用 |html 来转义内容。当我在代码中删除“|html”时，一切都很好。

谢谢大家的帮助。

# c# - Windows Phone 应用程序动态磁贴上的多行文本

> ID：12671716
> 
> 赞同：0
> 
> 时间：2012-10-01T10:40:55.260
> 
> 标签：c#, windows-phone-7, xaml

我正在开发 Windows Phone 的应用程序实时磁贴，我想在我的磁贴中显示 4 5 行，如下所示

线路 1 线路 2 线路 3 线路 4 线路 5

我如何在我的应用程序磁贴上显示它。因为只有一个属性可以设置它 `BackContent`

我如何在 wp7 中实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:01:18.280

试试这些博客文章：

[http://vdcruijsen.net/2011/12/creating-dynamic-windows-phone-7-live-tile-images-client-side/](http://vdcruijsen.net/2011/12/creating-dynamic-windows-phone-7-live-tile-images-client-side/)

和

[http://www.robfe.com/2012/02/building-on-the-fly-images-for-wp7-live-tiles/](http://www.robfe.com/2012/02/building-on-the-fly-images-for-wp7-live-tiles/)

基本上，制作一个 173 x 173 像素的用户控件。使用可写位图函数创建此控件的图像，用作磁贴上的图像（正面或背面）。您可以以任何您需要的格式添加尽可能多的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:46:57.163

仅用 3 行测试：

```
BackContent = Line1 + Environment.NewLine + Line2 ... ; 
```

# c# - 为每个用户获取 HKCU

> ID：12671717
> 
> 赞同：1
> 
> 时间：2012-10-01T10:40:55.703
> 
> 标签：c#, registry, remote-registry

我通过这样的代码获得远程注册表项：

```
RegistryKey reg = RegistryKey.OpenRemoteBaseKey(RegistryHive.Users,
"machineName", RegistryView.Default); 
```

我的问题：

1.  如何从远程机器的注册表中获取用户名列表？
2.  如何从远程机器的 HKEY_USERS 为每个用户获取他的 HKCU 注册表？

PS 许多我的用户都有漫游 Windows 配置文件。

# javascript-events - 在javascript函数中反映选择状态

> ID：12671721
> 
> 赞同：1
> 
> 时间：2012-10-01T10:41:08.493
> 
> 标签：javascript-events, forms, javascript

在 javascript 中，如何使函数随时可以更改？我想这样做，以便当有人从下拉表单中选择不同的选项时，将出现该所选类型的图像。比如这样的：

```
 newTexture(document.worktopForm.worktopColour.value);

    function newTexture() {
            var textureName = '<img src="'document.worktopForm.worktopColour.value'.jpg>';
            document.getElementById("texture").innerHTML += textureName;        
    }

        <form name="worktopForm">

        <label>Choose colour of Worktop (Please select one)</label><br/>
        <select name="worktopColour">
            <option value="none" selected></option>
            <option value="starGalaxy">Star Galaxy (££)</option>
            <option value="tanBrown">Tan Brown (£££)</option>
            <option value="coolColour">Cool Colour (££££)</option>
            <option value="nutYellow">Nut Yellow (£££££)</option>
        </select>

        <div id="texture"></div></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:43:36.713

`onchange`您可以在事件上调用任何函数`select`

```
 <select id="worktopColour" onchange="newTexture();">

 function newTexture() {
        var textureName = document.getElementById("worktopColour");
        var  imagevalue=textureName.options[textureName.selectedIndex].value;        
 } 
```

使用`imagevalue`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:44:15.183

修改功能：[jsfiddle](http://jsfiddle.net/zcr6H/1/)

```
 document.worktopForm.worktopColour.onchange =newTexture;

function newTexture() {

        var textureName = '<img src="' + this.value + '.jpg">';
        document.getElementById("texture").innerHTML += textureName;        
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:04:52.747

像这样的东西？

```
<!DOCTYPE html>
<meta charset=UTF-8><!-- validates as html5 -->
<title>select from list</title>
<script>
function go () {
   var e = document.getElementById('worktopColour');
   document.getElementById('texture').innerHTML += 
   e.options[e.selectedIndex].value+'.jpg <br>';
}
</script>

<form>
<label>Choose colour of Worktop</label><br>
<select id=worktopColour onChange=go()>
   <option value=none selected=selected>
   <option value=starGalaxy>Star Galaxy (££)
   <option value=tanBrown>Tan Brown (£££)
   <option value=coolColour>Cool Colour (££££)
   <option value=nutYellow>Nut Yellow (£££££)
</select></form>
<div id=texture></div> 
```

# winforms - Winforms 应用程序模板

> ID：12671723
> 
> 赞同：3
> 
> 时间：2012-10-01T10:41:18.310
> 
> 标签：winforms, templates

我正在尝试使用通用模板创建一个 Winforms 应用程序，即所有表单都将继承一个预定义的模板，用于新建、保存、编辑、删除按钮和一些通用图像以及我将手动放置的继承表单的其余内容。

任何建议如何实现这一点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:18:30.443

我将创建一个新表单作为类似模板的表单，并强制它实现一个接口，在下面的示例中，我将该接口命名为该接口`IApplicationWindow`，并声明了旨在由子类实现的公共方法。

除了您提到的常用控件之外，我还将在类似模板的表单中放置所有应该在所有窗口中常用的东西，例如日志记录助手类等等。

假设我们已经定义了一个名为 的接口`IApplicationWindow`，类似模板的表单将如下所示：

```
public partial class TemplateForm : Form, IApplicationWindow
{
    // Place here as protected class members all object instances
    // that are common to all your forms, like helper class for logging
    // purposes or security delegates.
    [...]

    public TemplateForm()
    {
        InitializeComponent();
    }

    #region IApplicationWindow interface implementation

    public virtual void Save()
    {
        // Do nothing unless you need common behavior.
        // Leave extenders implement the concrete behavior.
    }

    public virtual void Edit()
    {
        // Do nothing unless you need common behavior.
        // Leave extenders implement the concrete behavior.
    }

    [...]

    #endregion
} 
```

这就是扩展您的类似模板的表单的样子（请注意，您必须重写方法以提供特定的实现）：

```
public partial class AnApplicationWindow : TemplateForm
{
    public AnApplicationWindow()
    {
        InitializeComponent();
    }

    public override void Save()
    {
        base.Save();
        // Implement specific behavior here
    }

    public override void Edit()
    {
        base.Edit();
        // Implement specific behavior here
    }

    [...]

} 
```

最后，我会小心地将常用控件放置在模板表单的 UI 中，这样如果您调整扩展表单的大小，这些控件就会被正确放置（正确使用锚点）。

# c# - 使用通过私有构造函数返回新实例的静态方法是否有优势？

> ID：12671732
> 
> 赞同：2
> 
> 时间：2012-10-01T10:41:51.663
> 
> 标签：c#, static, constructor, private

我偶尔看到的一个模式是这样的：

```
public class JustAnotherClass
{
    private JustAnotherClass()
    {
        // do something
    }

    static JustAnotherClass GetNewClass()
    {
        return new JustAnotherClass();
    }
} 
```

为什么这会比仅仅拥有一个公共构造函数更有优势呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:46:15.743

> 为什么这会比仅仅拥有一个公共构造函数更有优势呢？

这是工厂模式。您有一个创建这些实例的点。

优点是在未来的扩展中您可以添加逻辑，例如返回派生类实例。`null`或在某些条件下返回。构造函数不能返回`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:46:48.600

我没有看到`static`仅仅创建一个新对象的方法有什么好处。直接调用构造函数或多或少是等价的。

它使代码更具可伸缩性，这是公共构造函数无法实现的。检查[Henk holterman](https://stackoverflow.com/users/60761/henk-holterman)的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:48:29.260

1.  **它可以返回派生类。**
    有时你有一个基类的不同内部实现，消费者不应该知道他得到的是哪一个，因为它是一个实现细节。
2.  **它有一个名字。**
    我经常使用它而不是重载构造函数，因此这个新实例的含义变得更加清晰。

我最近的一个项目中的一个例子：我有一个代表非对称密钥对的类。构造函数是受保护的，并且有两个工厂方法： `FromPrivateKey(byte[])`和`GenerateIdentity()`. IMO 这使得使用代码更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T10:48:55.383

好问题。您显示的类是工厂（请参阅工厂模式）。所以'为什么要使用工厂'......正如我所说的一个好问题。

对我来说，当我需要在运行时（很多次）创建实例时，我会使用工厂。为什么？因为它使我的代码更容易使用单元测试进行测试。这是您问题的一个答案，如果您不对代码进行单元测试（也许是 TDD），这无关紧要。这里没有错误或权利，只是一个事实。

要回答您的问题，请询问“为什么要使用工厂”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:49:49.067

除了灵活之外，如果您想同时在构造函数中使用参数（至少是这种行为）和 XML 序列化，则需要这种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T11:30:00.267

正如在您的示例中那样，没有真正的优势。当您想控制何时以及如何创建您的类的实例时，您可以使用*工厂方法。*一些例子：

*   你想实现一个*Singleton*，它总是返回相同的实例；
*   您希望实现*缓存*并确保仅在没有现有实例可用时创建新实例；
*   您需要根据外部信息控制何时创建实例。例如，您可能正在映射文件系统并希望确保您的`File`类的两个实例不存在相同的路径名。

# iframe - 改变 iframe 内容的锚点

> ID：12671733
> 
> 赞同：0
> 
> 时间：2012-10-01T10:42:00.287
> 
> 标签：iframe, anchor

我试图对[这个问题](https://stackoverflow.com/questions/11141950/move-to-top-of-page-when-changing-iframe-content/11142162#11142162)发表评论以澄清我可能需要的内容，但没有足够的代表我不能，所以我们开始......

我想更改 iframe 的内容，同时定位锚标记以滚动到页面下方的某个点。

我试图在另一个页面上实现 js，但是当它滚动正常时，iframe 内容没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:44:12.590

试试这个例子：

```
<html>
  <body>
    The frame:
    <iframe id="theFrame" src="about:blank" width="90%" height="600"></iframe>
    <br />
    The link: <a href="#bottomOfPage" onclick="document.getElementById('theFrame').src='http://www.bing.com/';">change frame and scroll to bottom</a>
    <br />
    <div style="height:600px;background:#8cc">padding...</div>
    Bottom of page.
    <div id="bottomOfPage"><div><!--this is the marker-->
  </body>
</html> 
```

# javascript - 在页面加载时使用 javascript 更改 iframe 的 src

> ID：12671735
> 
> 赞同：2
> 
> 时间：2012-10-01T10:42:05.470
> 
> 标签：javascript, jquery

我在一个 javascript 文件中有这个，以尽可能多地识别源

```
$(document).ready(function () {
    document.getElementById('myframe1').src = "http://www.mysite.com/index.html";

}); 
```

并在 html

```
<iframe id="myframe1" width="900" height="700" src=""></iframe> 
```

抱歉，我有点注意 javascript。任何帮助都很棒！谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T10:46:41.233

使用 jQuery：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#myFrame1").attr("src", "http://www.mysite.com/index.html");
    });
</script> 
```

使用纯 JavaScript：

```
<script type="text/javascript">
    window.onload = init;

    function init() {
        document.getElementById('myframe1').src = "http://www.mysite.com/index.html";
    }
</script> 
```

您可以像上面一样将该函数添加到 onload 事件中。

# javascript - 带有 json 存储的网格有时不显示数据

> ID：12671736
> 
> 赞同：2
> 
> 时间：2012-10-01T10:42:10.960
> 
> 标签：javascript, extjs, grid, store, extjs4.1

我有一个带有远程商店的 extjs 4 网格面板。在列的渲染器上有一个函数，它将 ID 更改为 NAME。大多数时候它工作正常，但有时（~40%）网格显示为空列。我试图调试 - 商店已定义，但它的项目是空的。在我看来，存储尚未加载，或者已经销毁（如果可能的话）。

如何正确显示带有完整数据的网格？

有我的简化代码：

## 加载所需的组件

```
Ext.Loader.setConfig({
    enabled:true
});

Ext.Loader.setPath('Ext.ux', '/js/ux');

Ext.require([
    'Ext.grid.*',
    'Ext.data.*'
]);

Ext.onReady(function () { 
```

## 创建模型

```
 Ext.define('Expense', {
        extend:'Ext.data.Model',
        fields:[
            {name:'id', type:'number'},
            {name:'cost_id', type:'string'},
            {name:'comment', type:'string'}

        ]
    });

    Ext.define('Cost', {
        extend:'Ext.data.Model',
        fields:[
            {name:'id', type:'string'},
            {name:'name', type:'string'},
            {name:'displayname', type:'string'}
        ]
    }); 
```

## 创建商店

```
 store = Ext.create('Ext.data.Store', {
        autoDestroy:true,
        model:'Expense',
        autoLoad:true,
        autoSync:true,
        pageSize:30,
        proxy:{
            type:'ajax',
            url:'/expenses/gettable',
            reader:{
                type:'json',
                root:'data',
                record:'Expense'
            }, writer:{
                type:'json'
            },
            api:{
                create:'/expenses/create',
                update:'/expenses/update',
                destroy:'/expenses/delete'
            }
        }
    });

    costsStore = Ext.create('Ext.data.Store', {
        autoDestroy:true,
        model:'Cost',
        autoLoad:true,
        autoSync:true,
        proxy:{
            type:'ajax',
            url:'/costs/gettable',
            reader:{
                type:'json',
                record:'Cost'
            }, writer:{
                type:'json',

                allowSingle:false
            },
            api:{
                create:'/costs/create',
                update:'/costs/update'
            }
        }
    }); 
```

## 配置网格面板

```
 grid = Ext.create('Ext.grid.Panel', {
        store:store,
        autoSync:true,
        columns:[
            {
                id:'comment',
                header:'Задача',
                dataIndex:'comment',
                flex:5
            },
            {
                id:'cost',
                header:'Cost',
                dataIndex:'cost_id',
                flex:5,
                editor:{
                    xtype:'combobox',
                    store:costsStore,
                    valueField:'id',
                    displayField:'name',
                    name:'cost_id'
                },
                renderer:function (value, meta, record) {
                    if (value != '') {
                        ind = costsStore.find('id', value);
                        elem = costsStore.getAt(ind);
                        if (elem) {

                            return elem.data['name'];
                        }
                    }
                }
            }
        ],
        renderTo:'editor-grid'
    });

}); 
```

我尝试在网格渲染事件上手动加载商店：

```
grid = Ext.create('Ext.grid.Panel', {
    listeners:{
        beforerender:function(){
            store.load();
            costsStore.load();
        }
    }
    ...
}); 
```

它将空表减少到〜10％的情况，但不是0％......

我发现的唯一方法是在加载所有商店后设置延迟，然后显示网格，如下所示：

```
listeners:{
    'load':function(){
        window.setTimeout("getGrid()", 1000);
    }
} 
```

其中 getGrid() 是创建 grid.panel 的函数。

我必须做什么，仅在所有商店加载后显示网格，或者如果数据无法加载则显示错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:00:38.807

正如 sra 建议的那样 - 您的问题似乎源于在渲染器中使用商店，而您不能确定商店是否已加载。

[我已经在这个答案](https://stackoverflow.com/questions/11993003/extjs4-how-to-share-data-between-multiple-stores-or-models/11996148#11996148)中描述了我认为最优雅的解决方案，并附有一些代码示例。

# java - 如何在 JDesktopPane 上添加 JLabel

> ID：12671739
> 
> 赞同：1
> 
> 时间：2012-10-01T10:42:24.843
> 
> 标签：java, swing, jlabel, jdesktoppane

我想在我的 JDesktopePane 上添加一个 JLable..我写了下面给定的代码..但是标签没有显示在窗格上。

```
 {
      frame1.setContentPane(desktop);
      frame1.setSize(900,700);
      frame1.setVisible(true);
      desktop.setBackground(Color.DARK_GRAY );
      JLabel label1 = new JLabel("Main Page", SwingConstants.CENTER);
      label1.setFont(new Font("SansSerif",Font.ITALIC + Font.BOLD,54));
      desktop.add(label1);**
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:45:58.497

这`JDesktop`是为数不多的不使用传统布局管理器的容器之一。

为了将任何组件添加到其中，该组件需要手动设置其位置和大小。

`label1.setBounds(new Rectangle(new Point(10, 10), label1.getPreferredSize()))`在添加之前尝试类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:12:36.097

使用 JPanel，将 JLabel 添加到其中，然后将 JPanel 添加到 JDesktopPane

# forms-authentication - WCF RIA 服务表单身份验证 ServiceContext.User.Identity.Name 空

> ID：12671740
> 
> 赞同：3
> 
> 时间：2012-10-01T10:42:31.380
> 
> 标签：forms-authentication, wcf-ria-services, silverlight-5.0, custom-membershipprovider

我们将 WCF Ria 服务与 silverlight 5 项目一起使用。对于身份验证，我们使用自定义成员提供程序。RIA 服务类库中的 WCF Ria 服务。客户端身份验证正在运行。我们使用 WebContext.Current.User.Name 访问当前用户名。但服务器端 ServiceContext.User 为空。如果我们使用 [RequireAuthentication] attr。在 DomainServices 中总是返回拒绝访问。我们如何将 WebContext.Current.user 推送到 ServiceContext.user。我阅读了几个文档和教程，但每次测试都失败了。

代码示例：

CustomMembershipProvider.cs：

```
 public class CustomMembershipProvider : MembershipProvider    {
    public override bool ValidateUser(string username, string password)
    {
        using (var context = new TimEntities())
        {
            var user = context.User.FirstOrDefault(u => u.Username == username &&
                                                         u.Password == password);
            return user != null;
        }
    } 
```

}

身份验证域服务：

```
 [EnableClientAccess]
      public class AuthenticationDomainService : AuthenticationBase<AuthUser>
      {}
      public class AuthUser : UserBase
      {} 
```

应用程序.Xaml.Cs：

```
 var webContext = new WebContext();
  var formsAuth = new FormsAuthentication();
  var authContext = new AuthenticationDomainContext();
  formsAuth.DomainContext = authContext;
  webContext.Authentication = formsAuth;
  ApplicationLifetimeObjects.Add(webContext); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:48:35.233

我遇到了同样的问题，但我终于找到了答案。我一直在尝试公开 SOAP 端点，所以我可以从手机应用程序访问相同的 RIA 服务。作为其中的一部分，我在 App 构造函数中添加了以下行：

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp); 
```

摆脱它，您应该可以再次使用用户名。SOAP 端点似乎仍然暴露给手机应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T19:06:17.000

首先，无论您是否使用 WCF RIA 服务，您都必须为您的托管网站[配置表单身份验证。](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.90%29.aspx)此外，必须在 IIS 上安装并[启用](http://www.google.com/search?q=enable%20forms%20authentication%20iis)Forms 身份验证。

然后你必须配置[ASP.NET 成员](http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29.aspx)才能使用你的`CustomMembershipProvider`类。

# linux - Linux 和 Windows 下 Signals 的实现？

> ID：12671741
> 
> 赞同：4
> 
> 时间：2012-10-01T10:42:32.170
> 
> 标签：linux, open-source, operating-system, linux-kernel, systems-programming

我对在编程中使用*信号并不陌生。*我主要使用 C/C++ 和 Python 工作。但我很想知道信号是如何在 Linux（或 Windows）中实际实现的。

操作系统是否会在信号描述符表中的每条 CPU 指令之后检查是否有任何已注册的信号需要处理？还是流程经理/调度员对此负责？

由于信号是异步的，CPU指令在完成之前中断是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T10:59:52.810

操作系统绝对不会处理每条指令。没门。太慢了。

当 CPU 遇到问题（如除以 0、访问受限资源或没有物理内存支持的内存位置）时，它会生成一种特殊的中断，称为异常（不要与 C++/Java 混淆/etc 高级语言异常摘要）。

操作系统处理这些异常。如果它是如此需要并且如果可能的话，它可以将异常反映回它起源的过程中。Windows中所谓的[结构化异常处理](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681409%28v=vs.85%29.aspx)（SEH）就是这种反映。C 信号应该使用相同的机制来实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T13:18:03.033

在我熟悉的系统上（尽管我看不出为什么它在其他地方会有很大不同），当进程从内核返回到用户模式时，信号传递就完成了。

让我们首先考虑一个 cpu 的情况。信号源有以下三种：

*   进程向自身发送信号
*   另一个进程发送信号
*   中断处理程序（网络、磁盘、USB 等）导致发送信号

在所有这些情况下，目标进程都不是在用户态运行，而是在内核模式下运行。要么通过系统调用，要么通过上下文切换（因为除非我们的目标进程没有运行，否则其他进程无法发送信号），或者通过中断处理程序。因此，信号传递是一个简单的问题，即在从内核模式返回用户空间之前检查是否有任何信号要传递。

在多 cpu 的情况下，如果目标进程正在另一个 cpu 上运行，则只需向正在运行的 cpu 发送中断即可。中断除了强制另一个 cpu 进入内核模式并返回之外什么都不做，以便可以在返回的路上完成信号处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T11:14:54.427

一个进程可以向另一个进程发送信号。进程可以注册自己的信号处理程序来处理信号。SIGKILL 和 SIGSTOP 是两个无法捕获的信号。

当进程执行信号处理程序时，它会阻塞相同的信号，也就是说，当信号处理程序正在执行时，如果另一个相同的信号到达，它不会调用信号处理程序[称为阻塞信号]，但它会注意该信号已经到达[即：待处理信号]。一旦执行了已经运行的信号处理程序，就会处理挂起的信号。如果您不想运行挂起的信号，则可以忽略该信号。

上述概念中的问题是：

假设如下：进程 A 为 SIGUSR1 注册了信号处理程序。

```
 1) process A gets signal SIGUSR1, and executes signalhandler()
  2) process A gets SIGUSR1,
  3) process A gets SIGUSR1,
  4) process A gets SIGUSR1, 
```

当步骤 (2) 发生时，是否将其设为“未决信号”。IE; 它需要服务。并且当步骤（3）发生时，它只是被忽略，因为对于每个可用信号，只有一个比特可用于指示待处理信号。

为了避免这样的问题，即：如果我们不想丢失信号，那么我们可以使用实时信号。

2) 信号同步执行，

例如。，

```
 1) process is executing in the middle of signal handler for SIGUSR1,

     2) Now, it gets another signal SIGUSR2, 

     3) It stops the SIGUSR1, and continues with SIGUSR2, 
        and once it is done with SIGUSR2, then it continues with SIGUSR1\. 
```

3）恕我直言，我记得检查是否有任何信号到达该过程是：

```
1) When context switch happens. 
```

希望这在一定程度上有所帮助。

# javascript - 如何使用 isDirty 事件或其他事件或方法检查数据是否更新？在 Javascript extjs 中

> ID：12671743
> 
> 赞同：1
> 
> 时间：2012-10-01T10:42:32.330
> 
> 标签：javascript, extjs

我想检查这些字段之一，即“Adet”、“toplam”，当单击按钮时它们是否已更新，但我不知道该怎么做？谢谢

//关于字段

```
{
    header: dil('Adet'),
    width: 30,
    sortable: true,
    dataIndex: 'adet',
    editor: new Ext.form.NumberField({
        enableKeyEvents : true,
        allowBlank: false,
        allowNegative: false,
        style: 'text-align:left'

    })
},{
    header: dil('Toplam'),
    width: 30,
    sortable: true,
    renderer: function(v, params, record){
        return Ext.util.Format.usMoney(record.data.fiyat * record.data.adet);
    },

    dataIndex: 'toplam',
    summaryType: 'totalCost',
    summaryRenderer: Ext.util.Format.usMoney

}

 // check area
   handler: function(){
       //commente alındı
       // fileGrid_yp_is.el.mask(dil('Lütfen Bekleyiniz...'), 'x-mask-loading');

          var il_id = Ext.getCmp('il_global25').getValue();
          var sap_no = Ext.getCmp('ila-sapno-id25').getValue();
           if(il_id == '' || sap_no == '' // this area code will be added) {
                Ext.Msg.alert(dil("Dikkat"),dil("Lütfen zorunlu alanları doldurunuz"));
                return false;
            }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:47:26.223

您可以使用**[dirtychange](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.TextArea-event-dirtychange)**事件将其存档。如果值已更改，则第二个参数为 true，否则为 false。该事件也只会在状态更改后触发。

第二个变体是模型的[isModified(fieldName)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-isModified)方法。如果自上次加载或提交后提交的字段已更改，它将返回 true。

# scala - Scala：基于索引的表单字段的批处理映射

> ID：12671744
> 
> 赞同：0
> 
> 时间：2012-10-01T10:42:40.967
> 
> 标签：scala, binding, indexing, field, numeric

我正在处理的 Web 应用程序的一部分处理需要绑定到模型（案例类）实例集合的表单。看到[这个问题](https://stackoverflow.com/questions/12662653/play-2-idiomatic-approach-to-binding-a-form-to-listmodel)

因此，如果我要一次添加多个用户，表单字段将命名为`email[0]`、`email[1]`、`password[0]`、`password[1]`等。

发布表单会导致`Map[String, Seq[String]]`

现在，我想做的是按索引分批处理 Map，这样每次迭代我都可以绑定一个 User 实例，创建一个`List[User]`作为绑定的最终结果。

我正在考虑的黑客方法是在 Map 键中进行正则表达式匹配`"[\d]"`，然后通过过滤器或计数找到最高索引；有了它，然后`(0..n).toList map{ ?? }`通过表单字段行的数量，相应地调用绑定/验证方法（也需要 a `Map[String, Seq[String]]`）。

实现这一目标的简洁方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:37:28.047

假如说：

1.  所有地图键都在形式`"field[index]"`
2.  每个键只有一个值`Seq`。
3.  如果有条目，`"email[x]"`则有条目，`"password[x]"`反之亦然。

我会做这样的事情：

```
val request = Map(
  "email[0]" -> Seq("alice@example.com"),
  "email[1]" -> Seq("bob@example.com"),
  "password[0]" -> Seq("%vT*n7#4"),
  "password[1]" -> Seq("Bfts7B&^")
)

case class User(email: String, password: String)

val Field = """(.+)\[(\d+)\]""".r

val userList = request.groupBy { case (Field(_, idx), _) => idx.toInt }
                      .mapValues { userMap =>
                          def extractField(name: String) =
                              userMap.collect{case (Field(`name`, _), values) => values.head}.head
                          User(extractField("email"), extractField("password"))}    
                      .toList.sortBy(_._1).map(_._2)

// Exiting paste mode, now interpreting.

request: scala.collection.immutable.Map[String,Seq[String]] = Map(email[0] -> List(alice@example.com), 
email[1] -> List(bob@example.com), password[0] -> List(%vT*n7#4), password[1] -> List(Bfts7B&^))
defined class User
Field: scala.util.matching.Regex = (.+)\[(\d+)\]
userList: List[User] = List(User(alice@example.com,%vT*n7#4), User(bob@example.com,Bfts7B&^)) 
```

# java - “选中一个单选按钮取消选中所有其他单选按钮”不起作用

> ID：12671746
> 
> 赞同：2
> 
> 时间：2012-10-01T10:42:49.860
> 
> 标签：java, android, radio-group

我正在开发一个 Android 3.1 平板电脑应用程序，我需要以编程方式创建一些单选按钮：

```
 RadioGroup radGrp = new RadioGroup(mActivity);
    params.weight = 0.2f;
    radGrp.setLayoutParams(params);
    radGrp.setOrientation(RadioGroup.HORIZONTAL);

    String tag = Long.toString(req.getRequirementId()) + "_" +
            getString(R.string.yes);
    RadioButton radioBtnYES = new RadioButton(mActivity);
    radioBtnYES.setText(getString(R.string.yes));
    radioBtnYES.setTag(tag);
    radioBtnYES.setChecked(confValue);
    radioBtnYES.setOnClickListener(radioListener);
    radGrp.addView(radioBtnYES);

    tag = Long.toString(req.getRequirementId()) + "_" +
            getString(R.string.no);
    RadioButton radioBtnNO = new RadioButton(mActivity);
    radioBtnNO.setText(getString(R.string.no));
    radioBtnNO.setTag(tag);
    radioBtnNO.setChecked(!confValue);
    radioBtnNO.setOnClickListener(radioListener);
    radGrp.addView(radioBtnNO);

    radGrp.setOnCheckedChangeListener(checkedChangedListener);
    requirementLayout.addView(radGrp); 
```

我的问题是，当我点击一个未选中的单选按钮时，同一个 Radio Group 上的另一个按钮仍然处于选中状态。

这是`radioListener`代码：

```
private RadioButton.OnClickListener radioListener = 
        new RadioButton.OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        String tag = v.getTag().toString();
        String[] parts = tag.split("_");

        if ((parts != null) && (parts.length == 2))
        {
            boolean value = (parts[1].equals(getString(R.string.yes)));

            Long id = Long.valueOf(parts[0]);
            requirementsState.put(id, value);
        }
    }
}; 
```

这是`checkedChangedListener`代码：

```
private RadioGroup.OnCheckedChangeListener checkedChangedListener =
        new OnCheckedChangeListener()
{
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId)
            {
                RadioButton rb = (RadioButton)
                        mActivity.findViewById(checkedId);

                group.setOnCheckedChangeListener(null);

                group.clearCheck();
                rb.setChecked(true);

                group.setOnCheckedChangeListener(checkedChangedListener);
            }
}; 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:25:50.267

我找到了答案：**在将所有单选按钮添加到单选组后，我需要设置选中单选按钮。

这是我的工作代码：

```
 RadioGroup radGrp = new RadioGroup(mActivity);
    params.weight = 0.2f;
    radGrp.setLayoutParams(params);
    radGrp.setOrientation(RadioGroup.HORIZONTAL);

    String tag = Long.toString(req.getRequirementId()) + "_" +
            getString(R.string.yes);
    RadioButton radioBtnYES = new RadioButton(mActivity);
    radioBtnYES.setText(getString(R.string.yes));
    radioBtnYES.setTag(tag);
    radioBtnYES.setOnClickListener(radioListener);
    radGrp.addView(radioBtnYES);

    tag = Long.toString(req.getRequirementId()) + "_" +
            getString(R.string.no);
    RadioButton radioBtnNO = new RadioButton(mActivity);
    radioBtnNO.setText(getString(R.string.no));
    radioBtnNO.setTag(tag);
    radioBtnNO.setOnClickListener(radioListener);
    radGrp.addView(radioBtnNO); 
```

我在 Radio Group 中添加了两个单选按钮，然后：

```
 if (confValue)
        radioBtnYES.setChecked(true);
    else
        radioBtnNO.setChecked(true);

    requirementLayout.addView(radGrp); 
```

# asp.net-mvc - MVC4 需要哪些程序集？

> ID：12671751
> 
> 赞同：7
> 
> 时间：2012-10-01T10:43:17.180
> 
> 标签：asp.net-mvc, deployment, asp.net-mvc-4

在 MVC4 模板中，许多许多 ( *...many!* ) 程序集被添加到项目中，即使对于“空”模板也是如此。

哪些是真正必要的，每个实际上是做什么的 - 我在任何地方都找不到列表？我只想引用我需要的那些。

我创建了一个“空”项目并开始将它们一一删除，但由于相关的 web.config 更改等原因，它很快变得乏味（并且中断）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:51:19.877

找不到任何官方信息，但确实设法通过使用[此答案](https://stackoverflow.com/a/12000511/1711500)来运行准系统项目。

仍然想知道各种模板中所有 DLL 的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:55:51.323

如果您使用的是 ReSharper，您可以右键单击 References 文件夹并选择“删除未使用的引用”或更安全的选项“优化引用”。后一个选项为您提供有关哪些程序集已使用和未使用的报告。

在注入依赖项的成熟解决方案中使用它时要小心，因为在编译时您可能没有对程序集的任何直接代码引用。但它们可能在运行时需要。

抱歉，我没有直接回答您的问题，但希望我已经向您展示了如何自己找出答案。

# javascript - jQuery：鼠标悬停在背景div上“通过”前景工具提示？

> ID：12671752
> 
> 赞同：1
> 
> 时间：2012-10-01T10:43:22.020
> 
> 标签：javascript, jquery, html, css

我有一个背景 div 和一个前景 div，当背景被鼠标悬停时淡入淡出，当背景被移出时淡出。

但是当前景淡入时，它会从背景中窃取焦点，并且工具提示最终会“闪烁”：

[http://jsfiddle.net/ts97t/](http://jsfiddle.net/ts97t/)

如何保持工具提示可见并停止闪烁？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:49:13.657

鼠标悬停在我身上。这需要保持可见，而不是闪烁，直到我将鼠标移出绿色方块！

查询

```
$("#background").hover(function(){
 $("#tooltip").fadeIn();
},function(){
    $("#tooltip").fadeOut();
   });​ 
```

如果你想#tooltip 重叠“**鼠标在我身上**”文本。

```
#tooltip {
    display: none;
    width: 130px;
    height: 130px;
    background: red;
    top:0;
} 
```

[演示](http://jsfiddle.net/afshinprofe/ts97t/4/)

第二种方式

```
 var i=0;
$("#background").hover(function(){
     $("#tooltip").fadeIn();
    },function(){
        if (i==1) {
            $("#tooltip").fadeOut();
i=0;
        } 
    });

$('#tooltip').hover('',function(){
  i=1;

}); 
```

HTML

```
<div id="background">Mouse over me.</div>
<div id="tooltip">This needs to stay visible, and not flash, until I mouse out of the green square!</div> 
```

[演示 2](http://jsfiddle.net/ts97t/11/)

# php - 如何在wordpress中阻止长行（没有中断）的评论

> ID：12671753
> 
> 赞同：0
> 
> 时间：2012-10-01T10:43:27.853
> 
> 标签：php, wordpress, comments

我需要用长线阻止评论而不中断，如下所示

![在此处输入图像描述](../Images/4c41997bd420b6b288be3fdff4e9e04c.png)

我检查了 wopress admin 并找到了该选项

> 评论黑名单 当评论在其内容、名称、URL、电子邮件或 IP 中包含任何这些词时，它将被标记为垃圾邮件。每行一个字或 IP。它将匹配内部单词，因此“press”将匹配“WordPress”。

但我不知道在里面写什么

# ios - 在 NSKeyedUnarchiver 对象中找不到密钥

> ID：12671758
> 
> 赞同：0
> 
> 时间：2012-10-01T10:43:46.477
> 
> 标签：ios, nsdata, nskeyedarchiver, nscoding, nsfilewrapper

我通常以这样的方式编码我的数据`NSFileWrapper`（我省略了 NSFileWrapper 位）：

```
-(NSData*)encodeObject:(id<NSCoding>)o {
        @autoreleasepool {            
            NSMutableData *data = [NSMutableData data];
            NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
            [archiver encodeObject:o forKey:@"data"];
            [archiver finishEncoding];
            return data;
        }
    } 
```

我通常会在这样做时取回我的数据：

```
- (id)decodeObjectFromWrapperWithPreferredFilename:(NSString *)p {

    NSFileWrapper *wrapper = [self.fileWrapper.fileWrappers objectForKey:p];
    if (!wrapper) {
        NSLog(@"Unexpected error: Couldn't find %@ in file wrapper!", p);
        return nil;
    }

    NSData *data = [wrapper regularFileContents];
    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];

    NSLog(@"%@", [unarchiver decodeObjectForKey:@"data"]);
    return [unarchiver decodeObjectForKey:@"data"];

} 
```

有时，我会`NSData`返回（不是 nil），但`[unarchiver decodeObjectForKey:@"data"]`会返回 NIL。看起来好像没有键 @"data" 的对象，即使应该有。我想编码时一定出了问题，但我不知道如何解决这个问题。我可以只取其中的任何内容`data`并对其进行编码，而不用担心它是否有正确的密钥吗？我的意思是应该只有一个关键的“数据”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:59:03.297

为什么您的代码如此复杂:)`NSKeyedArchiver`该类具有辅助方法，可以更简单地执行您想要的操作：

```
// to turn an object into NSData
return [NSKeyedArchiver archivedDataWithRootObject:o]; 

// To turn NSData into your object again
return [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

# facebook - Flash ActionScript 3 在单个 SWF 中获取身份验证信息

> ID：12671759
> 
> 赞同：2
> 
> 时间：2012-10-01T10:43:48.410
> 
> 标签：facebook, flash, security, actionscript

我正在将 Flash 应用程序开发为单个`swf`文件，没有 HTML 包装器（但可以肯定我的主机上有这个 swf）。我在开发人员部分创建了应用程序。我面临的问题是：当我将这个 SWF 发布到我在 FaceBook 的墙上时，我无法从这个 SWF`URLloader`或`ExternalItreface`.

例如，我需要执行[签名请求](http://developers.facebook.com/docs/authentication/signed_request/)才能获取用户信息，但我遇到了*安全错误*，表明我的域无法从 apps.facebook.com 获取信息

我正在做的请求很简单：

```
var urlRequest:URLRequest = new URLRequest("http://apps.facebook.com/my_app_name"); 
```

有什么方法可以通知 faceebok 我的托管是一种安全保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:06:41.150

如果你想跨域抓取东西，最简单的方法是在你的服务器上使用脚本。如果您使用的是 php，则可以轻松连接到[http://my.domain/my_script.php](http://my.domain/my_script.php)，然后可以从[http://apps.facebook.com/my_app_name](http://apps.facebook.com/my_app_name)或其他任何地方 CURL 信息。然后，您可以（解析并）将该信息传递给您的 swf。

否则，您将需要目标的许可才能为您添加跨域规则。

# .net - 如何使用控制台应用程序部署文件夹

> ID：12671760
> 
> 赞同：0
> 
> 时间：2012-10-01T10:43:51.300
> 
> 标签：.net

我有一个控制台应用程序，它引用了一个包含内容文件夹的 dll。当我构建应用程序时，我可以正确地看到 bin/debug 中包含内容的文件夹。当我尝试发布相同的应用程序时，该文件夹丢失。

我可以通过将文件夹直接添加到应用程序中并将内容文件添加为链接来解决它，但这非常脆弱，因为它不会拾取添加到 dlls 内容文件夹中的新文件。

有没有办法告诉发布包含构建中的子文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:59:00.927

您的问题确实提出了更多问题。但我假设它与作为控制台应用程序无关，但可能适用于任何“应用程序”。如果是这样 ...

我认为您的问题在于在运行时引用文件夹。您的应用程序可能没有从您认为的文件夹中运行。

所以有两种方法：

*   尝试在运行时解析绝对路径（对我来说感觉很糟糕）
*   使用 Windows 为文件使用“标准”区域。

为“Environment.SpecialFolder”做一个谷歌。在 Windows 的后一版本中，用户可编辑的文件只能位于某些文件夹中，例如“CommonApplicationData”。这可能适合您的应用程序，或者只是提供一个很好的公共区域。

如果您尝试将用户可编辑的文件夹放在程序文件区域中，Windows 可能是“卑鄙的”。不要考虑您的开发环境，而要考虑已部署的环境。

安装程序通常支持这些特殊文件夹。

# php - 选择然后再次选择不同的值

> ID：12671768
> 
> 赞同：5
> 
> 时间：2012-10-01T10:44:35.070
> 
> 标签：php, mysql, sql, arrays

我有 3 列`questionid`,`replyid`和`userid`.

我想全选`questionid's from userid where userid is session[userid]`，然后选择`questionid`与它不同。

现在我把所有那些`questionid`属于`$_SESSION['user_id']`一个数组（并从中删除重复项）然后我再次传递另一个查询

```
foreach($array as $x)
{
$query="select questionid,replyid,userid from table where questionid=$x"
} 
```

但我认为上述步骤可以在查询本身中完成（**并且上述步骤也不起作用**）。我在下面尝试过，但它不起作用。如果我尝试通过此查询，那么仍然会出现重复值：

```
SELECT distinct(questionid),replyid,userid 
from table 
where userid=$_SESSION['user_id'] 
```

那么查询应该是什么？

```
questionid,replyid,userid

8          ,2     ,45

8          ,3      ,45

9           ,8      ,41 
```

但是由于 `8,2`和`8,3`在同一个网页中（一个问题和两个答案），我想避免显示重复的问题......

所以我尝试了错误的方式，因为我正在采取不同的方式`questionid`，然后再次选择`* from table where questionid`之前的方式。

但是正如@Mahmoud Gamal 建议的那样，我做到了

```
 SELECT distinct questionid, `answerid`, `userid`
 FROM `table` 
 WHERE  userid='$user' 
```

但是我又做了同样的重复的事情。所以我加了`limit 0,1`

```
 SELECT distinct questionid, `answerid`, `userid`
 FROM `table`
 WHERE  userid='$user' 
 LIMIT 0,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:49:41.190

这相当于您在帖子中描述的两个查询：

```
SELECT DISTINCT questionid, replyid, userid 
FROM table 
WHERE questionid IN
(
    SELECT DISTINCT questionid
    FROM table 
    WHERE userid = @user_id
) 
```

这会给你`DISTINCT questionid, replyid, userid`。但这不是必需的，包含`DISTINCT(questionid)`.

如果你正在寻找`distinct questionid`，你最终会得到一个`GROUP BY questionid`与其他两个字段的聚合函数`replyid, userid`，比如`SUM`，`MAX`或`MIN`。

# javascript - 在鼠标悬停时显示大图像并在magento中自动定位

> ID：12671771
> 
> 赞同：0
> 
> 时间：2012-10-01T10:44:47.910
> 
> 标签：javascript, jquery, magento, tooltip, qtip

我是magento的新手。

我想在magento中为产品列表页面自动定位鼠标悬停大图像显示效果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:03:46.487

我得到了解决方案。我使用 qtip 在鼠标悬停时显示大图像。

这是链接。

[http://craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/)

# .net - 用于在 .net 中读取大型 excel 数据的 oledb vs excel interop vs open xml vs 数据访问控制

> ID：12671773
> 
> 赞同：2
> 
> 时间：2012-10-01T10:44:51.580
> 
> 标签：.net, excel, vsto, openxml

我需要处理大型 excel 文件（300-500 MB）。我需要将其转换为 XML 文件（大小相似）。

在 excel 中，我只需要以单向前的方式读取数据。需要支持 XLS 和 XLSX。性能至关重要。

我对以下选项感到困惑
1\. [Excel 互操作](http://www.dotnetperls.com/excel)：需要客户端计算机中的办公组件。因此不推荐。
2\. [Ole DB](http://blog.hoegaerden.be/2010/03/29/retrieving-data-from-excel/)：刚刚检查过它将整个文件加载到内存中。所以对我来说听起来不太好。
3\. [Open XML](http://openxmldeveloper.org/) : 不支持 XLS 文件格式

请提出其他更好的替代方案并对上述方法进行比较分析。（以仅转发方式读取大型 excel 文件 xls/xlsx 格式）

# javascript - 谷歌分析事件跟踪未能反馈？

> ID：12671774
> 
> 赞同：1
> 
> 时间：2012-10-01T10:44:54.190
> 
> 标签：javascript, jquery, google-analytics, query-string

在下面的代码中，我试图： -

*   在页面上定义谷歌分析
*   如果页面在域中有特定的查询字符串和字符，则添加jquery点击事件
*   点击事件调用谷歌分析跟踪事件
*   我还对域内的查询字符串和值进行代码检查

什么不起作用： -

*   第三个项目是调用谷歌分析跟踪事件，我似乎正在点击它，但没有任何内容返回到我的 GA 帐户。

我尝试过的：-

*   我已经三次检查信息`_gaq_.push`是否正确链接到正确的帐户。
*   使用 firebug 和 IE9 开发工具跟踪 javascript 并分析发生了什么。这就是我知道当我的场景为真时我正在点击事件跟踪的方式。
*   在像 jsfiddle 这样的孤立环境中尝试过，不会提供指向它的链接，因为我实际上无法提供公司信息。它在 js fiddle 中不起作用。（主要是因为 jsfiddle 无法使用我的 ga 帐户进行身份验证（域不同）。
*   我在我的相关域中尝试了一个孤立的文件，但仍然没有运气。

    ```
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX-X']);
    _gaq.push(['_setDomainName', 'mydomain.co.uk']);
    _gaq.push(['_setAllowLinker', true]);
    _gaq.push(['_setSiteSpeedSampleRate', 100]); // this is a new line, allowing us to see how fast all pages load
    _gaq.push(['_trackPageview']); // we’ve moved this line down, as ‘setdomain’ (etc) should appear before it

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    $(document).ready(function () {
        var querystring = (function (a) {
            if (a == "") return {};
            var b = {};
            for (var i = 0; i < a.length; ++i) {
                var p = a[i].split('=');
                if (p.length != 2) continue;
                b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
            }
            return b;
        })(window.location.search.substr(1).split('&'));
        if (querystring["utm_expid"] != null) {
            $('a').click(function () {
                if ($(this).attr("href") != 'undefined' && $(this).attr("href") != null) {
                    if ($(this).attr("href").toLowerCase().indexOf("keyword") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword2") >= 0) {
                        _gaq.push(['_trackEvent', 'eventCategories', 'eventAction', 'eventLabel']);
                    } else if (($(this).attr("href").toLowerCase().indexOf("keyword") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword2") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword3") >= 0) || ($(this).attr("href").toLowerCase().indexOf("keyword4") >= 0)) {
                        _gaq.push(['_trackEvent', 'eventCategories', 'eventAction', 'eventLabel']);
                    }
                }
            });
        }
    }); 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:01:52.943

Google Analytics `_trackEvent`（和`_trackPageview`，等等）通过从分析服务器发出跟踪像素请求来工作。如果单击导致在跟踪请求完成之前将新页面加载到同一窗口，您可能会丢失数据，或者只跟踪部分数据。

以下代码在链接之前添加了一点延迟：

```
var delayLink = function(e, url) {
  e.preventDefault();
  setTimeout(function(){location.href = url}, 150);
};

if (querystring["utm_expid"] != null) {
    $('a').click(function (e) {
        if ($(this).attr("href") != 'undefined' && $(this).attr("href") != null) {
            if ($(this).attr("href").toLowerCase().indexOf("keyword") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword2") >= 0) {
                _gaq.push(['_trackEvent', 'eventCategories', 'eventAction', 'eventLabel']);
                if (this.target != '_blank') delayLink(e, this.href);
            } else if (($(this).attr("href").toLowerCase().indexOf("keyword") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword2") >= 0 && $(this).attr("href").toLowerCase().indexOf("keyword3") >= 0) || ($(this).attr("href").toLowerCase().indexOf("keyword4") >= 0)) {
                _gaq.push(['_trackEvent', 'eventCategories', 'eventAction', 'eventLabel']);
            if (this.target != '_blank') delayLink(e, this.href);
            }
    }
    });
} 
```

# charts - 如何去除道场折线图中虚线的灰色背景？

> ID：12671780
> 
> 赞同：3
> 
> 时间：2012-10-01T10:45:10.050
> 
> 标签：charts, dojo, linechart

我在 Dojo 中使用虚线和点线创建了一个图表。一切正常，除了虚线的背景是灰色的。

如何去除线条的灰色背景？

```
var xChart = new dojox.charting.Chart2D("test-chart");
xChart.setTheme(dojox.charting.themes.Julie);
xChart.addAxis("x");
xChart.addPlot("default", {type: "Lines"});

xChart.addSeries("xscsd", [2,3,5,5,23,1,6],
   {stroke: {color: "red", width: 1.5, style:"Dot"}});

xChart.render(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T12:13:33.710

默认主题定义灰色轮廓。添加系列时用 null 覆盖大纲。

```
xChart.addSeries("xscsd", [2,3,5,5,23,1,6],
                 {stroke: {color: "red", width: 1.5, style:"Dot"},
                     outline: null }); 
```

[http://jsfiddle.net/cswing/qDL79/](http://jsfiddle.net/cswing/qDL79/)

# javascript - 如何使用递归函数正确确定多维javascript对象中是否存在键

> ID：12671784
> 
> 赞同：1
> 
> 时间：2012-10-01T10:45:37.540
> 
> 标签：javascript, recursion

我正在尝试创建一个递归函数，它将遍历多维对象并测试密钥是否存在于单独的对象中。如果键不存在我想打破循环并返回false，如果所有键都存在我想返回true。

我遇到的问题是该函数似乎总是返回 true。这是我正在使用的代码：

```
var properties = {'global': {'structure' : {'body': {}}}};

var testExists = {'global': {'structure': {'test': 'value'}}};

if( ! this.exists(properties, testExists)) {
   console.log("DOESNT EXIST");
}

exists: function(destination, source) {
    var exists = true;

    check:
    for (var property in source) {

        if(destination[property]) {
            arguments.callee(destination[property], source[property]);
        }
        else
        {
            exists = false;
            break check;
        }
    }

    console.log(exists);

    return exists;
}, 
```

当我查看控制台以查看“存在”的值时，我看到两行第一行是假的，第二行是真的，所以我正在创建的递归一定有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:56:26.867

您的问题似乎是您没有使用递归调用函数的结果。

此外，您不应该使用`arguments.callee`，而是使用函数名称，并可能在枚举其属性之前检查参数是否为对象。您可能还想检查`destination`不在枚举中的属性`source`。

尝试这个：

```
function equal(destination, source) {
    if (Object(destination)!==destination || Object(source)!==source)
        // at least one of them is a primitive value
        return destination == source; // maybe use strict equality === ?
    for (var prop in source)
        if (!(prop in destination) || !equal(source[prop], destination[prop]))
            return false;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:57:46.610

你让它变得比它需要的更复杂：

```
function exists(destination, source) {
    for (var property in source) {
        if(destination.hasOwnProperty(property)) {
            if (!exists(destination[property], source[property])) {
                return false;
            }
        } else {
            return false;
        }
    }

    return true;
}​ 
```

请注意， .hasOwnProperty 意味着这只会比较对象的直接属性，而不是从原型继承的属性。我以为这就是你要找的东西。

另请注意：它实际上使用递归调用的结果，它正确递归，它使用 .hasOwnProperty 而不是仅检查虚假性，并且它不使用中间变量来存储结果（这不会以递归方式工作无论如何，您正在使用它们）。

还有一件事：这只会“单向”，即不会检查目标中不在源中的任何属性。要检查这两种方式，您必须调用它两次或将其扩展为在两者上循环。

# android-fragments - ActionBarSherlock - 在片段上使用 setHasOptionsMenu true 时，在 2.x 设备上首次启动时不会出现溢出菜单

> ID：12671785
> 
> 赞同：2
> 
> 时间：2012-10-01T10:45:38.493
> 
> 标签：android-fragments, actionbarsherlock, android-menu

如果片段的 hasSetOptionsMenu 为 true，则每次在 OS 2.x 上首次启动时都不会显示溢出菜单。旋转装置解决了这个问题。此外，问题在 3.x 或 4.x 上不可重现。

我用的是4.1版本的ActionBarSherlock，持有Fragment的FragmentActivity有forceoverflow主题。

尝试将 hasSetOptionsMenu 设置为 false，这似乎解决了问题，但我必须为每个片段添加不同的菜单项，所以这对我来说不是一个选项。

调试应用程序，似乎应用程序中每个 hasSetOptionsMenu(true) 的菜单都无效，并且重新创建了活动和片段的 onCreateOptionsMenu。此外，一个有趣的事实是，在调试期间，应用程序启动会延迟，因为它会在不同的断点处停止，这会导致溢出菜单出现。这让我相信它可能是Android SDK 中报告的[这个问题](http://code.google.com/p/android/issues/detail?id=29472)，但评论 #8 中提到的解决方法都没有对我有用。

另一个信息：按下硬件选项按钮，出现溢出菜单，所以问题似乎是没有显示溢出图标。

我还发现这个问题也是 ABS 中的一个[报告错误](https://github.com/JakeWharton/ActionBarSherlock/issues/187)，但它似乎已关闭，并且我拥有该库的最新版本。

有没有人遇到过这个？您知道解决方法/解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:54:15.997

解决这个问题！添加了“getSherlock().dispatchInvalidateOptionsMenu();” 在 onResume() 中为 FragmentActivity 强制菜单失效。这似乎解决了这个问题。我知道这是一个 hack，但没有设法找到另一个解决方案。尝试将菜单失效添加到片段（onCreateView 或 onActivityCreated），但这并没有修复它。因此，如果您遇到此问题，这是一种解决方法：

```
 @Override
    protected void onResume() {
        super.onResume();

        .....
        getSherlock().dispatchInvalidateOptionsMenu();
    } 
```

谢谢马可的小费！

# smarty - 我的聪明循环有什么问题

> ID：12671787
> 
> 赞同：0
> 
> 时间：2012-10-01T10:45:46.990
> 
> 标签：smarty, smarty3

```
{section name=i loop=(($data|count)/2) start=0}
<div data-role="controlgroup" data-type="horizontal">
    {section name=ii loop=i start=(i+2)}
    <a href="#" data-role="button" name="buttons" rel="{$page['user'][ii]}">{$user['page'][$page['user'][ii]]}</a>
    {/section}
</div> 
```

问题就在附近`{section name=ii loop=i start=(i+2)}`，因为`<div data-role="controlgroup" data-type="horizontal">`源代码是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:31:46.983

尝试

```
{section name=i loop=(($data|@count)/2) start=0} 
```

代替

```
{section name=i loop=(($data|count)/2) start=0} 
```

# php - 使用屏蔽在域内重定向

> ID：12671790
> 
> 赞同：0
> 
> 时间：2012-10-01T10:46:07.677
> 
> 标签：php, redirect, subdomain

我希望访问者使用屏蔽从一个子域重定向到另一个子域。

我的根 web 根**example.com**中有一个文件夹**演示**。当用户登录时，将通过输入他的输入名称来创建子域，比如**mystore**，他将获得**mystore.example.com**。我希望他重定向到演示文件夹（子域），但他不应该知道这一点。即使在重定向之后，他也应该得到**mystore.example.com**。

 ******是否可以使用域屏蔽？我该怎么做，我应该在哪里写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:50:20.927

实际上这是子域通配符，您的主机必须启用它，您可以使用以下方法动态创建子域`.htaccess`：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
RewriteCond %{HTTP_HOST} !^example\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([^\.]+)\.example\.com$ [NC]
RewriteRule ^$ http://www.example.com/demo/?store_name=%2 [L] 
```

这将意味着`mystore.example.com`实际上会去`http://www.example.com/demo/?store_name=mystore`******

# android - 在 MIPS Android 上编译缺少 machine/_types.h

> ID：12671793
> 
> 赞同：1
> 
> 时间：2012-10-01T10:46:15.607
> 
> 标签：android, gcc, mips

我正在尝试构建一些在 mips 板上运行的小型测试程序。

尝试编译时出现此错误。

```
EXTRALDFLAGS=-Wall -g3 -static -pthread  -Dpthread_yield=sched_yield
TOOL_PREFIX=/crux/shared/mips-android/bin/mipsel-linux-android- make -f gcc-makefile 
clean all
echo "Cleaning...." 
Cleaning....
rm -f dining.o
rm -f test
/crux/shared/mips-android/bin/mipsel-linux-android-gcc -g    -c dining.c -o dining.o
In file included from /crux/mips-android/bin/../sysroot/usr/include/stdint.h:32:0,
             from /crux/mips-android/bin/../lib/gcc/mipsel-linux-android/4.6.x
google/include/stdint.h:3,
             from /crux/mips-android/bin/../lib/gcc/mipsel-linux-android/4.6.x
google/include-fixed/sys/types.h:43,
from /crux/mips-android/bin/../sysroot/usr/include/sys/time.h:32,
enter code herefrom /crux/mips-android/bin/../sysroot/usr/include/time.h:32,
             from /crux/mips-android/bin/../sysroot/usr/include/pthread.h:31,
             from dining.c:1: 
/crux/mips-android/bin/../sysroot/usr/include/sys/_types.h:40:28: fatal error:
machine/_types.h: No such file or directory
compilation terminated.
make: *** [dining.o] Error 1 
```

抱歉格式不好，第一次来这里

# python - django 和模型的属性

> ID：12671799
> 
> 赞同：1
> 
> 时间：2012-10-01T10:46:33.033
> 
> 标签：python, django

我有个问题。这两个属性的工作方式是否不同以及如何，我的意思是 db hits。例如，我们有模型文章，它有一个`ForeignKey`字段`book`

```
from django.db import models

class Article(models.Model):
    book = models.ForeignKey("books.Book") 
```

什么是获得`author`其中一个 prorerties 的最佳方法：

```
@property
def author(self):
    if self.book:
        return self.book.author
    return None 
```

或者

```
@property
def author(self):
    book = self.book
    if book:
        return book.author
    return None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:05:52.733

由于您在 上定义属性`Article`，因此实际的数据库命中取决于`Article`查询集的检索方式。如果您在检索对象时在查询集上使用`select_related([depth=2])`，[那么](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)无论`Article`您如何编写属性，这在数据库命中方面都是最佳的。您列出的两种方式都具有相似的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:03:50.553

你应该打电话

```
article.book.author 
```

此调用将查询书籍对象并将其缓存在文章实例上。因此，如果您在第一次调用之后调用 article.book.id，它将不会运行第二个查询。

Personaly 我认为您应该尽量避免在模型方法中访问数据库。因为，随着您的应用程序变得复杂，开发人员只会调用您文章的作者方法，即使他们手中还有书籍模型。因为两个属性几乎相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:08:28.467

我更喜欢这个选项，因为它只对数据库进行一次查询：

```
@property
def author(self):
    authors = Author.objects.filter(book__article=self.id)[:1]
    return authors[0] if authors else None 
```

# ruby - 使用 MIddleman 3.0 - 如何在动态页面上设置单个页面标题？

> ID：12671804
> 
> 赞同：13
> 
> 时间：2012-10-01T10:46:52.673
> 
> 标签：ruby, middleman

我正在中间人中建立一个简单的投资组合网站。我正在根据本地 YAML 数据动态生成“工作”页面。这是在 config.rb 中：

```
data.work.projects.each do |project|
  page "/work/#{project[0]}.html", :proxy => "project_template.html" do
    @project = project
  end
end 
```

出于 SEO 的目的，我希望这些动态生成的页面中的每一个都具有唯一的页面标题和描述。

标题当前在布局文件中设置为这样

```
 %title
    = current_page.data.title 
```

我知道我可以使用 frontmatter 来设置这样的 current_page 变量

```
---
title: "Recent Work - "
--- 
```

我可以将它粘贴到我的 project_template.haml 中，但是有没有办法让这样的东西起作用？

```
---
title: "Recent Work - " + @project.title
--- 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T23:38:23.753

您可以使用 content_for，而不是在 frontmatter 中设置标题（就像您正在做的那样）。

例如在布局中：

`%title= yield_content(:title)`

并且在动态页面的模板中：

`- content_for(:title, @project.title)`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-06T16:06:07.657

这是最简单的模块化解决方案。

在您的布局中，输入：

```
%title= 'Your Site Title | ' + @title 
```

@title 是一个可用于当前页面的 ruby​​ 实例变量。

在您当前的页面中，输入（不要忘记破折号）：

```
- @title = 'Your Page Title' 
```

那你应该好好去！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-14T15:18:24.770

我找到了另一种解决该限制的方法。从元数据中获取前端数据，而不是获取页面数据：

```
%title = current_page.metadata[:page]['title'] 
```

它不像通过 current_page.data 获取数据那么好和短，但我只设法更改了元数据：

```
proxy newpath, oldpath, :page => { 'title' => newtitle } 
```

我不知道为什么，但如果我没记错的话，我还必须在准备好之后设置元数据资源：

```
resource.add_metadata :page => { 'title' => newtitle } 
```

我仍然认为/希望必须有更好的解决方案。我们不能为代理页面设置前端数据，这有点奇怪。

# java - TFL JSON 数据解析

> ID：12671805
> 
> 赞同：1
> 
> 时间：2012-10-01T10:46:56.477
> 
> 标签：java, android, json

谁能帮我解析从 TFL london 返回的 JSON 数据。

```
 [4,"1.0",1349088458923]
 [1,"Woolwich Ferry","161",1349088648000]
 [1,"Woolwich Ferry","177",1349088912000]
 [1,"Woolwich Ferry","161",1349089159000]
 [1,"Woolwich Ferry","180",1349089207000]
 [1,"Woolwich Ferry","177",1349089408000]
 [1,"Woolwich Ferry","472",1349089175000]
 [1,"Woolwich Ferry","161",1349089771000]
 [1,"Woolwich Ferry","472",1349089594000]
 [1,"Woolwich Ferry","180",1349089860000]
 [1,"Woolwich Ferry","472",1349088522000]
 [1,"Woolwich Ferry","177",1349090001000]
 [1,"Woolwich Ferry","472",1349088841000]
 [1,"Woolwich Ferry","472",1349089942000] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T14:38:30.200

这是 JSON 数组的列表，每行一个。对于每一行，使用 JSON 解析器对其进行解析，然后根据应用程序的要求对其进行处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T11:29:55.880

I think this your showned output is in csv format so you need to convert it to json . So for that you can refer the following [example](https://github.com/darwin/csv2json)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T10:52:13.963

它看起来不像是有效的 json 响应。它是 CSV 格式的响应。

编辑：正如 Shaun 在评论中所建议的，如果它是 JsonArray，请使用 jsonparsers。

# nuget - 让测试运行程序与 Nuget 的 Gallio 一起工作

> ID：12671807
> 
> 赞同：6
> 
> 时间：2012-10-01T10:47:00.850
> 
> 标签：nuget, mbunit, gallio, testdriven.net

我想我在这里遗漏了一些东西。我安装了[Tesdriven](http://www.testdriven.net/)，然后安装了[Gallio](http://gallio.org/downloads.aspx)（从顶部开始的第三个链接 - Gallio 3.5 x64 安装程序）

然后我[从 Nuget 安装了 mbunit dll，](http://www.nuget.org/packages/mbunit)因为我不想从我的硬盘驱动器中包含一个 dll，因为它使项目很难移植到其他机器上。

但是，当我尝试运行示例测试时，testrunner 坚持我从硬盘中引用 dll。实际的错误消息是这样的：

```
It looks like you're trying to execute a Gallio/MbUnit unit test.

For Gallio v3.0.6 build 787 / Gallio v3.1 build 313 or above (recommended):
Please ensure that the directory containing your 'MbUnit.dll' reference also contains Gallio's
test runner files ('MbUnit.dll.tdnet', 'TDNet\Gallio.TDNetRunner.dll', 'Gallio.dll' etc.)

For earlier versions:
You need to install Gallio (after TestDriven.Net) using its MSI installer.

You can find Gallio downloads and support here:
http://www.gallio.org/ 
```

那么，有没有办法让 testrunner 只使用 nuget 包运行测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T11:21:27.863

目前nuget gallery只有3.3.1版本的mbunit包，你安装的是Gallio v3.4。Gallio 和 mbunit 的限制非常烦人。为了使用 nuget 包，您必须将机器上的 Gallio 降级到[v3.3.1](http://mb-unit.googlecode.com/files/GallioBundle-3.3.458.0-Setup-x64.msi)。更好的解决方案是向gallio/mbunit 团队发送邮件，并要求上传最新版本的nuget 包或自己制作。

# java - 设置 OSGi 存储目录 (org.osgi.framework.storage) 在 Maven 触发的 JUnit 测试中不起作用

> ID：12671812
> 
> 赞同：0
> 
> 时间：2012-10-01T10:47:14.840
> 
> 标签：java, maven, junit, osgi, equinox

在我的代码中，我使用`EquinoxFactory`. 通过将属性设置`"org.osgi.framework.storage"`为`"@user.home/osgi-frameworks/framework-x"`，其中`x`每个框架都不同，每个框架使用不同的目录：

```
frameworkProperties.put("osgi.clean", "true");
frameworkProperties.put("osgi.console", "true");
frameworkProperties.put("org.osgi.framework.storage", 
                        "@user.home/osgi-frameworks/osgi-framework-" 
                        + numberOfFramework);       

framework = new EquinoxFactory().newFramework(frameworkProperties) 
```

这在运行实际应用程序时非常有效。此外，IDE 中的 JUnit 测试运行没有任何问题。

但是，当我为我的项目启动 Maven 构建时，JUnit 测试失败，因为所有框架都使用相同的目录 ( `"osgi-frameworks/framework-0"`)。

我向应用程序添加了日志记录，以检查该属性`"org.osgi.framework.storage"`在 OSGi 属性映射中是否确实具有不同的值。日志中的一切看起来都很好，但是在检查文件空间时，只创建了一个目录。

由于我想将应用程序包含在 Jenkins 中，因此我宁愿不跳过测试。

有谁知道可能出了什么问题？我必须为框架设置其他参数吗？IDE 中的 Junit 和 Maven 中的 Junit 有什么区别吗？

# css - 在css中按比例选择图像

> ID：12671814
> 
> 赞同：1
> 
> 时间：2012-10-01T10:47:35.680
> 
> 标签：css, image, css-selectors, less

我想在图像元素上应用一个类，但仅适用于那些获得横向格式的元素。

所以，我想知道是否有办法在我的 html 上选择宽度/高度比大于 1 的图像，就像媒体查询对“设备像素比”过滤器所做的那样。

我实际上是在 Javascript 中执行此操作的，但是在 css 中执行此操作会更好（或使用诸如 less/stylus/sass 等 css 框架）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:07:30.513

媒体查询检查用户的屏幕属性，这就是它可以选择屏幕宽度甚至视网膜显示的原因。在 LESS 或 CSS 中无法读取图像本身的属性。

LESS 及其编译器，无论是客户端还是服务器端都只会编译为 CSS，因此 LESS 中没有任何固有的东西可以读取您的 HTML，更不用说图像了。

CSS 会让您更接近，但会从语义上读取您的 HTML，而不是查看图像或视频等媒体元素的内部属性。

# ruby-on-rails - Ruby on Rails：下拉菜单选项

> ID：12671815
> 
> 赞同：0
> 
> 时间：2012-10-01T10:47:37.320
> 
> 标签：ruby-on-rails, ruby, database, drop-down-menu

我有一个应用程序，用户可以在其中从下拉菜单中选择一种技术。我想编写最常见的选项，并展示数据库中的技术。

是否可以在一个下拉菜单中包含预先确定的选项以及技术列中的选项？像这样的东西？

```
<%= f.select( :tech, [['Tech1'],['Tech2'],['Tech3'], ['Tech4'],  Project.all.map {|p| [p.tech]}.uniq], :prompt => "Select a previous Technology") %> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:57:08.907

选择所有`Project`项目，仅仅为了获得`tech`列而构建它们是非常过分的。

```
db_techs = Project.select("projects.tech").uniq.map {|p| [p.tech]} 
```

（这将生成一个`SELECT DISTINCT projects.tech`查询，而不是`SELECT * FROM projects`）

此外，您不希望 basic_techs 在列表中出现两次，所以

```
all_techs = basic_techs + db_techs
all_techs.uniq! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:50:23.593

您可以简单地添加数组来连接它们：

```
basic_techs = [['Tech1'],['Tech2'],['Tech3'], ['Tech4']]
db_techs = Project.all.map {|p| [p.tech]}.uniq
<%= f.select( :tech, basic_techs + db_techs, :prompt => "Select a previous Technology") %> 
```

# sql - SQL for Classic ASP：如何将记录插入到 tbl_order 同时从 tbl_inventory 中减去 qty 并保存回数据库

> ID：12671816
> 
> 赞同：1
> 
> 时间：2012-10-01T10:47:48.067
> 
> 标签：sql, ms-access, asp-classic

目前我有将记录插入到 tbl_order 的更新代码。现在我实现了库存部分。我需要系统可以在订单完成后从库存中减去数量。

我正在考虑 INSERT (Subtract (od_qty-tbl_inventory.inv_qty)) 但我不知道在这种情况下 SQL 语句将如何。所以请你帮忙。谢谢

下面是我当前将数据插入到 tbl_order 的更新代码。

```
<% 
dim od_total, cal_total, od_qty
cust_id = request.querystring("cust_id")
bill_id = request.querystring("bill_id")
pd_id = request.querystring("pd_id")
od_price = request.querystring("od_price")
od_qty = request.querystring("od_qty")
od_qty_unit = request.querystring("od_qty_unit")

date_current = date

        od_total = od_price * od_qty

Dim conn ' ADO connection
Dim rstSimple ' ADO recordset
Dim strDBPath ' path to our Access database (*.mdb) file
Dim bill_total

set conn=Server.CreateObject("ADODB.Connection")
conn.Provider="Microsoft.Jet.OLEDB.4.0"
conn.Open(Server.Mappath("../database/tkp.mdb"))
set rs=Server.CreateObject("ADODB.recordset")

' Next, the script inserts the form inputs retrieved from the querystring into the database table:
sql="INSERT INTO tbl_order (cust_id,bill_id,pd_id,od_price,od_qty,od_qty_unit,od_total)"
sql=sql & " VALUES "
sql=sql & "(" & cust_id & ","
sql=sql & "'" & bill_id & "',"
sql=sql & "'" & pd_id & "',"
sql=sql & "" & od_price & ","
sql=sql & "" & od_qty & ","
sql=sql & "'" & od_qty_unit & "',"
sql=sql & "" & od_total & ")"

'response.write sql
on error resume next
conn.Execute sql
if err<>0 then
Response.Write("No update permissions!") 'ae_name field is primary key so new record not inserted if name pre-exists in table
else
'Response.Write("<h3> Record added</h3>")
end if

rstSimple.Close
Set rstSimple = Nothing

conn.Close
Set conn = Nothing
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T03:49:29.083

您需要对库存表运行更新查询，从当前库存量中减去订单数量。像这样的东西：

```
sql = "UPDATE tbl_inventory SET inv_qty = inv_qty - " & od_qty & " WHERE pd_id = " & pd_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:56:24.847

您将能够解决您的事务处理问题

```
conn.BeginTrans
'—Run Your Statements Here
conn.Execute sql1
conn.Execute sql2
conn.CommitTrans 
```

请参阅此了解更多信息：[http ://classical-asp.blogspot.com/2010/08/transaction.html](http://classical-asp.blogspot.com/2010/08/transaction.html)

编辑：确保 inv_date 列是日期时间列

```
sql1 = "UPDATE tbl_inventory SET inv_qty_act = inv_qty_act - " & od_qty & ", inv_date = now() WHERE pd_id = '" & pd_id & "'" 
```

# html - 在 html 文件中加载 VBscript

> ID：12671818
> 
> 赞同：0
> 
> 时间：2012-10-01T10:47:59.380
> 
> 标签：html, vbscript

我在 html 中加载我的 VBscript 时遇到问题。我试图测试一个简单的示例，但它不起作用：我的 html：

```
<!DOCTYPE html>
<html>
<body>
<head>
<script src="login_VBS.vbs"> </script> 
</head>
</body>
</html> 
```

login_VBS.vbs：

```
msgbox "this is a message" 
```

我不能让它更容易，但是当我从 IE 检查视图源时，我的源中不存在 vbs。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:39:53.087

使用**有效**的 HTML - 例如：

```
<!DOCTYPE html>
<html>
 <head>
  <script language="VBScript" type="text/vbscript" src="test00.vbs"></script>
 </head>
 <body>
 </body>
</html> 
```

和一个（或两个）脚本语言规范；当然 .vbs 必须存在（如果您不使用完整/绝对路径，则在 .html 文件的父文件夹中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:07:29.160

确保您提供了正确位置的正确文件名，这应该可以

```
<script type="text/vbscript" src="VBScript_file_URL"></script> 
```

[**检查 this**](http://www.herongyang.com/VBScript/IE-Browser-Include-VBScript-Codes-as-External-Files.html)和[**this**](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)，还要确保文件是否存在。

# xpath - 通过 xpath 选择除少数节点之外的所有节点

> ID：12671821
> 
> 赞同：1
> 
> 时间：2012-10-01T10:48:10.960
> 
> 标签：xpath, orbeon, xforms

只是一点帮助。请让我知道正确的 xpath 表达式

我有这样的 xml 文档

```
<parent>
                    <child id='1' show='true' />
                    <child id='2' show='true' />
                    <child id='3' show='true' />
                    <child id='4' show='true' />
                    <child id='5' show='true' />
                    <child id='6' show='true' />
                </parent> 
```

我想选择`show`除第 2 和第 5 个孩子以外的所有属性，以便我可以将它们的值转换为`false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:56:17.953

`and`您可以在 XPath 表达式中使用布尔值：

```
/parent/child[@id != '2' and @id != '5'] 
```

如果你真的想要第二个和第五个元素，你可以使用`position()`函数：

```
/parent/child[position() != 2 and position() != 5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:53:57.117

**使用**：

```
/*/*[not(position() = 2 or position() = 5)]/@show 
```

这将选择`show`xml 文档顶部元素的任何子元素的任何属性，而不是其父元素的第二个或第五个子元素。

# asp.net-ajax - asp.net 使用带有 PageMethod 的 jquery ajax，验证不是 wotkinh

> ID：12671822
> 
> 赞同：1
> 
> 时间：2012-10-01T10:48:14.563
> 
> 标签：asp.net-ajax

好吧，我使用带有 PageMethod 的 jquery ajax 来提交表单，但是我的表单有一个 asp.net 验证器，ajax 并且从 pageMethod 返回值很好，但是验证器不再工作，这是我的代码

```
 <script type="text/javascript">
    $(document).ready(function () {

        // Add the page method call as an onclick handler for the div.
        $("#Label1").click(function () {
            $.ajax({
                type: "POST",
                url: "Default.aspx/GetDate",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    // Replace the div's content with the page method's return.

                    $("#Label2").text(msg.d.b);
                    if (!msg.d.b) {
                        $("#Label1").hide();
                    }
                }
            });
        });
    });

</script> 
```

后面的代码是这样的

```
 [WebMethod]
public static object GetDate()
{

    SqlConnection con = new SqlConnection();
    con.ConnectionString = "Data Source=ad;Initial Catalog=Test;Integrated Security=True";
    string query="insert into test(name,family) values('mehdi','jabbari')";
    con.Open();
    SqlCommand cmd = new SqlCommand(query,con);
    cmd.ExecuteNonQuery();
    con.Close();
    return new{

       b=false
    };
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:56:38.127

当您尝试以常规方式提交时，会调用 asp.net 中的客户端验证。当您执行 ajax 提交验证时不会自动调用，您必须在启动 ajax 调用之前手动执行此操作：

```
 $("#Label1").click(function () {
          if(Page_ClientValidate()) {
               $.ajax({
                   type: "POST",
                   url: "Default.aspx/GetDate",
                   data: "{}",
                   contentType: "application/json; charset=utf-8",
                   dataType: "json",
                   success: function (msg) {
                        // Replace the div's content with the page method's return.

                        $("#Label2").text(msg.d.b);
                        if (!msg.d.b) {
                            $("#Label1").hide();
                        }
                    }
                });
            }
        }); 
```

[Page_ClientValidate](http://weblogs.asp.net/srkirkland/archive/2008/02/13/using-asp-net-validation-from-client-code.aspx)（链接是我首先发现的，在我看来这似乎很有用）是 ASP.NET 的一个功能，它将验证一个页面。您可以将验证组作为参数传递：`Page_ClientValidate('validation_group_name')`仅验证具有指定验证组集的一组控件。

# c# - 在c#中如何使用登录用户启动新进程？

> ID：12671824
> 
> 赞同：0
> 
> 时间：2012-10-01T10:48:21.177
> 
> 标签：c#, .net

下面是场景。

1.  使用用户名“JOHN”登录到 Windows
2.  在 c# 中运行 Windows 应用程序编写器。此工具名称为 BootStrapper.exe。但是我使用名为“ALEX”的不同用户使用运行方式功能执行了这个工具。
3.  引导程序将显示一些名为“启动应用程序”的按钮。单击启动时，使用 c# 的 Process 类执行 Application.exe。请注意，我没有传递任何用户名和密码。所以 Application.exe 也在“ALEX”用户下运行。

即使它是由“ALEX”启动的，如何从 Bootstrapper.exe 在“JOHN”下运行 Application.exe。请注意，Application.exe 将不知道“JOHN”的密码来模拟 JOHN 用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:38:00.337

在由 JOHN 启动的进程中托管 WCF 服务（可能通过将其放在启动文件夹中）。

使用指示启动哪个进程的命令从 ALEX 进程调用 WCF 服务。
从 WCF 服务启动进程，它将作为 JOHN 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:10:00.480

我为我糟糕的英语道歉。也许我理解错了...编译它，并将结果复制到“C：\ test”目录。现在运行它。

```
using System;
using System.Text;
using System.Diagnostics;
using System.Security;
using System.Reflection;
using System.IO;

namespace ConsoleApplication6 {
    class Program {

        unsafe static void Main(string[] args) {

            Process process = new Process();
            String dir = Path.GetDirectoryName(typeof(Program).Assembly.Location);

            String txtFile = Path.Combine(dir, "example.txt");
            if (!File.Exists(txtFile)) {
                StreamWriter sw = File.CreateText(txtFile);
                sw.Close();
                sw.Dispose();
            }

            ProcessStartInfo info = new ProcessStartInfo();

            info.Domain = "myDomainName";
            info.UserName = "userName";
            String pass = "userPassword";

            fixed (char* password = pass) {
                info.Password = new SecureString(password, pass.Length);
            }

            // Will be run notepad.exe
            info.FileName = Environment.ExpandEnvironmentVariables(@"%winDir%\NOTEPAD.EXE");
            // in notepad.exe will be open example.txt file.
            info.Arguments = txtFile;
            info.LoadUserProfile = false;
            info.UseShellExecute = false;
            info.WorkingDirectory = dir;

            process.StartInfo = info;
            process.Start();
        }
    }
} 
```

问候

# mongodb - 如何列出 mongodb 服务器收到的所有命令

> ID：12671826
> 
> 赞同：0
> 
> 时间：2012-10-01T10:48:26.553
> 
> 标签：mongodb

和标题一样，谁能帮帮我？

我想知道 mongodb 服务器执行的所有命令以及每个命令花费的时间。我应该怎么做 ？

服务器运行在windows7 64bit平台上。

我认为还有另一种方法可以完成这项工作，那就是端口监控。但我怀疑我是否可以获得端口 mongodb 服务器使用的所有数据。如何得到它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:09:14.360

所以，我找到了显示这些命令的正确方法！在 InstallationDirectory/bin 中使用 mongosniff，但它仅适用于 Unix 或 Linux。

[mongosniff](http://www.mongodb.org/display/DOCS/mongosniff)

# ios - 从IOS中的国家名称获取国家代码

> ID：12671829
> 
> 赞同：24
> 
> 时间：2012-10-01T10:48:30.207
> 
> 标签：ios, country-codes, nslocale

我正在从服务器中检索一个英文国家名称。例如，“西班牙”

我想做的是，假设国家名称要用英文写，得到国家代码。

我应该怎么办？我发现从国家代码中获取国家名称非常容易，但我不知道如何进行相反的操作。

非常感谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-30T09:39:51.127

杰夫的[回答](https://stackoverflow.com/questions/8097857/converting-country-codes-to-country-names)在这里有所帮助，略有补充。

```
NSArray *countryCodes = [NSLocale ISOCountryCodes];
NSMutableArray *countries = [NSMutableArray arrayWithCapacity:[countryCodes count]];

for (NSString *countryCode in countryCodes)
{
    NSString *identifier = [NSLocale localeIdentifierFromComponents: [NSDictionary dictionaryWithObject: countryCode forKey: NSLocaleCountryCode]];
    NSString *country = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_UK"] displayNameForKey: NSLocaleIdentifier value: identifier];
    [countries addObject: country];
}

NSDictionary *codeForCountryDictionary = [[NSDictionary alloc] initWithObjects:countryCodes forKeys:countries]; 
```

现在使用您需要代码的国家/地区名称浏览“codeForCountryDictionary”，例如，

```
NSLog(@"%@",[codeForCountryDictionary objectForKey:@"Spain"]); 
```

将产生结果为“ES”，这是西班牙的 2 个字母国家代码。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-02-14T15:28:50.860

**@Daxesh Nagar**解决方案的**Swift 4**更新版本：

 **```
private func locale(for fullCountryName : String) -> String {
    var locales : String = ""
    for localeCode in NSLocale.isoCountryCodes {
        let identifier = NSLocale(localeIdentifier: localeCode)
        let countryName = identifier.displayName(forKey: NSLocale.Key.countryCode, value: localeCode)
        if fullCountryName.lowercased() == countryName?.lowercased() {
            return localeCode as! String
        }
    }
    return locales
} 
```

对于此输入作为**fullCountryName**

> “英国”

它将返回国家代码如下

> “国标”

希望对大家有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-19T10:59:15.927

在 Swift 中，您将使用此代码

```
extension NSLocale {
    class func locales1(countryName1 : String) -> String {
        var locales : String = ""
        for localeCode in NSLocale.ISOCountryCodes() {
            let countryName = NSLocale.systemLocale().displayNameForKey(NSLocaleCountryCode, value: localeCode)!
            if countryName1.lowercaseString == countryName.lowercaseString {
                return localeCode as! String
            }
        }
        return locales
    }

} 
```

获取数据：

```
strP2countrycode = NSLocale.locales1("PASS_COUNTRYNAME") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-10T17:02:13.813

使用 swift 3 （上面的一些答案缺少一块）

```
extension NSLocale {
class func locales1(countryName1 : String) -> String {
    let locales : String = ""
    for localeCode in NSLocale.isoCountryCodes {
        let countryName = (Locale.current as NSLocale).displayName(forKey: .countryCode, value: localeCode)
        if countryName1.lowercased() == countryName?.lowercased() {
            return localeCode
        }
    }
    return locales
}
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-21T19:25:36.683

这是一个适用于 Swift 3 或更高版本的简单解决方案。根据您的操作系统版本，这支持大约 256 个国家/地区名称和代码。

```
extension Locale {
    func isoCode(for countryName: String) -> String? {
        return Locale.isoRegionCodes.first(where: { (code) -> Bool in
            localizedString(forRegionCode: code)?.compare(countryName, options: [.caseInsensitive, .diacriticInsensitive]) == .orderedSame
        })
    }
} 
```

正确使用它的诀窍是知道您希望转换为标准 2 字母 ISO 国家代码的国家名称的语言。

如果您知道国家/地区名称是英语，则必须在设置为英语的语言环境中使用它。`en_US_POSIX`在这种情况下，最好使用特殊的语言环境。

```
let locale = Locale(identifier: "en_US_POSIX") 
print(locale.isoCode(for: "Spain")) // result is `ES` 
```

如果您有西班牙语的国家/地区名称，请务必使用西班牙语语言环境：

```
let locale = Locale(identifier: "es") 
print(locale.isoCode(for: "España")) // result is `ES` 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-09T00:11:34.650

我的紧凑版本，包括仅与英文国家名称版本匹配的修复程序。

```
extension NSLocale
{
    class func localeForCountry(countryName : String) -> String?
    {
        return NSLocale.ISOCountryCodes().first{self.countryNameFromLocaleCode($0 as! String) == countryName} as? String
    }

    private class func countryNameFromLocaleCode(localeCode : String) -> String
    {
        return NSLocale(localeIdentifier: "en_UK").displayNameForKey(NSLocaleCountryCode, value: localeCode) ?? ""
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-14T11:24:04.570

**斯威夫特 3.0：**

获取国家代码和国家名称作为 NS 字典-

```
let countryCodes: [AnyObject] = NSLocale.isoCountryCodes as [AnyObject]

        let countries: NSMutableArray = NSMutableArray(capacity: countryCodes.count)

        for countryCode in countryCodes {
            let identifier: String = NSLocale.localeIdentifier(fromComponents: NSDictionary(object: countryCode, forKey: NSLocale.Key.countryCode as NSCopying) as! [String : String])
            let country: String = NSLocale(localeIdentifier: "en_US").displayName(forKey: NSLocale.Key.identifier, value: identifier)!
            countries.add(country)
        }
        let codeForCountryDictionary: [NSObject : AnyObject] = NSDictionary(objects: countryCodes, forKeys: countries as! [NSCopying]) as [NSObject : AnyObject]

        print(codeForCountryDictionary) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-17T08:42:26.510

**斯威夫特 5**

```
extension Locale {
    func countryCode(by countryName: String) -> String? {
        return Locale.isoRegionCodes.first(where: { code -> Bool in
            guard let localizedCountryName = localizedString(forRegionCode: code) else {
                return false
            }
            return localizedCountryName.lowercased() == countryName.lowercased()
        })
    }
} 
```

要使用：

```
let locale = Locale(identifier: "en_US")
let countryCode = locale.countryCode(by: "Russia") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-15T21:32:21.943

所以这个解决方案在 swift 4 中运行良好，取自上述评论......

```
extension NSLocale {
   struct Locale {
    let countryCode: String
    let countryName: String
   }

  class func locales() -> [Locale] {

    var locales = [Locale]()

    for localeCode in NSLocale.isoCountryCodes {
        let identifier = NSLocale(localeIdentifier: localeCode)
        let countryName = identifier.displayName(forKey: NSLocale.Key.countryCode, value: localeCode)!
        let countryCode = localeCode
        let locale = Locale(countryCode: countryCode, countryName: countryName)
        locales.append(locale)
    }

    return locales.sorted{$0.countryName.localizedCaseInsensitiveCompare($1.countryName) == ComparisonResult.orderedAscending}
 }
} 
```

请享用！**

# nagios - NDO2DB 不启动

> ID：12671834
> 
> 赞同：0
> 
> 时间：2012-10-01T10:48:51.063
> 
> 标签：nagios

当我运行 ndo2db 它给我错误：

```
Starting ndo:Error processing config file '/usr/local/nagios/etc/ndo2db.cfg'.
 done. 
```

我的`ndo2db.conf`文件如下所示：

```
lock_file=/usr/local/nagios/var/ndo2db.lock
ndo2db_user=nagios
ndo2db_group=nagios
socket_type=unix
socket_name=/usr/local/nagios/var/ndo.sock
use_ssl=0
db_servertype=MySQL
db_host=localhost
db_port=3306
db_name=ndo
db_prefix=nagios_
db_user=root
db_pass=grit_123
max_timedevents_age=1440
max_systemcommands_age=10080
max_servicechecks_age=10080
max_hostchecks_age=10080
max_eventhandlers_age=44640
max_externalcommands_age=44640 
```

# c++ - 是否有任何 C++ 参考手册作为 C:a 参考手册？

> ID：12671840
> 
> 赞同：2
> 
> 时间：2012-10-01T10:49:13.470
> 
> 标签：c++, c++11

有没有涵盖最新c++标准的书，我想知道很多关于这个标准的知识。我想读一本像这本书一样的书——>哈比森爵士的C参考手册。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T10:51:58.220

Stroustrup 将于 2013 年初发布第四版 C++ 编程语言。您现在可以在亚马逊上预订。连同所有其他内容，它将包含对 C++ 11 功能的全面参考。

编辑：这是[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0321563840)

# ruby-on-rails - 为什么当接受不同时Rails会忽略内容类型？

> ID：12671841
> 
> 赞同：0
> 
> 时间：2012-10-01T10:49:14.467
> 
> 标签：ruby-on-rails, ajax

我有一个 RESTful 控制器：

```
class Api::V1::DevicesController < ApplicationController
  before_filter :require_user

  respond_to :json  
  # PUT /api/v1/devices/1
  def update
    @device = Device.find(params[:id])
    authorize! :update, @device

    @device.update_attributes(params[:device])
    respond_with @device
  end

end 
```

还有一些客户端的JS：

```
$("#click-me").on('click', function() {
   $.ajax({
    type: "PUT",
    url: '/api/v1/devices/' + $(this).data('device-id'),
    dataType: 'json',
    accept: 'application/json',
    data: {device: {user_id: null}, format: 'json'},
    success: function () {
      alert("Booya!"); 
    }
  })
}); 
```

当 AJAX 被触发时，默认情况下，jQuery 会发送一个 JS 对象作为 URL 编码的字符串。一个`Content-Type:application/x-www-form-urlencoded`很好。而且因为我设置`dataType`为`'json'`，所以它设置了`Accept:application/json, text/javascript, */*; q=0.01`，这似乎也很好。

然而，当 Rails 收到请求时，它会将帖子正文视为 JSON，即使内容类型是 URL 编码的。这是一个错误吗？

到目前为止，我的解决方案是将 JS 对象转换为 JSON ( `JSON.stringify({device: {user_id: null}, format: 'json'})`) 并提交它。

但这感觉不是很好，当然 Rails 应该分别处理 Content-Type 和 Accept 。此应用程序在 3.0.17 中。也许这是早期版本的问题？

**更新：**

结果我收到的 422 是验证失败，而 Rack 足够聪明，可以处理不同的 Content-Type 和 Accept 标头。呃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:42:01.800

这可能是由于

```
dataType: 'json', 
```

行，通知服务器您的请求内容是 JSON。

# jquery - 隐藏页面直到全部加载

> ID：12671842
> 
> 赞同：1
> 
> 时间：2012-10-01T10:49:18.397
> 
> 标签：jquery, html

> **可能重复：**
> [如何让浏览器等待显示页面，直到它完全加载？](https://stackoverflow.com/questions/1435015/how-can-i-make-the-browser-wait-to-display-the-page-until-its-fully-loaded)

我有一个简单的网站，我想在确定它全部加载之前将它打开 X 毫秒（例如图像）。有没有办法一次把它变成整个页面？

我已经有一些淡入淡出来打开网站的各种 div，但我希望淡入淡出仅在页面等待“加载”设置的那些 X ms 之后发生。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T10:51:41.870

# jQuery

```
<body>
<div id="msg" style="font-size:largest;">
<!-- you can set whatever style you want on this -->
Loading, please wait...
</div>
<div id="body" style="display:none;">
<!-- everything else -->
</div>
<script type="text/javascript">
$(document).ready(function() {
    $('#body').show();
    $('#msg').hide();
});
</script>
</body> 
```

或者

```
<script type="text/javascript">
$('#container').css('opacity', 0);
$(window).load(function() {
  $('#container').css('opacity', 1);
});
</script> 
```

或者

立即在您的标签之后添加类似这样的内容...

```
 <style> body  {opacity:0;}</style> 
```

对于您添加的第一件事，例如...

```
 <script>
  window.onload = function() {setTimeout(function(){document.body.style.opacity="100";},500);};
 </script> 
```

所有这些答案都来自**[如何让浏览器等待显示页面直到它完全加载？](https://stackoverflow.com/questions/1435015/how-can-i-make-the-browser-wait-to-display-the-page-until-its-fully-loaded)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T10:55:07.783

if you use jQuery, just create a div with "please wait" and an other one with all your content but with style="display:none", su put this code to swap then when its ready.

```
jQuery.ready(function(){jQuery('#pleasewait').fadeOut('slow'); jQuery('#content').fadeIn('slow');}) 
```

# php - PayPal，notify_url 从未执行过

> ID：12671844
> 
> 赞同：0
> 
> 时间：2012-10-01T10:49:35.310
> 
> 标签：php, api, paypal

我在 IPN 遇到了一个问题：在隐藏输入**“notify_url”**中输入的 URL 从未被考虑在内！

当我确认我的付款时，我会被重定向到我的页面（隐藏字段“return”）。

怎么了 ？

谢谢。

PS：为了测试，我在文件 ipn.php 中放了一个简单的邮件功能（隐藏输入**“notify_url”**中输入的URL ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:40:09.873

除了Swiss Master所说的，IPN还需要在你的账户上“开启”或“关闭”，而*不是*“禁用”。
如果 IPN 切换为“开启”，您将需要在您的 PayPal 配置文件中输入一个用于 IPN 数据的 URL（尽管您仍然可以通过在每个交易的基础上发送 notify_url 来覆盖使用的 URL）。

如果 IPN 被关闭，您将不会收到所有活动的 IPN，而只会收到您在交易请求本身中发送 notify_url 的活动。

如果 IPN 设置为“禁用”，则无论您发送什么内容，都不会生成任何 IPN 消息。
如果 PayPal 遇到来自您的 IPN 处理程序的非 HTTP 200 响应代码，IPN 将自动设置为“已禁用”。
（例如，HTTP 404、脚本超时、访问脚本时出现 SSL 错误、HTTP 500 错误等。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:27:01.363

通知 URL 必须可以从外部访问 - 即 localhost 将不起作用。返回 URL 在您的计算机上确实有效，因为您的浏览器可以访问它。

# php - Zend Application Controller Helper 访问 View Helper

> ID：12671846
> 
> 赞同：0
> 
> 时间：2012-10-01T10:49:42.513
> 
> 标签：php, zend-framework

嗨，我有一个控制器助手如下：

```
<?php

class Application_Controller_Helper_GetEventDetail extends Zend_Controller_Action_Helper_Abstract
{

    public function direct($eventDetail)
    {
        return $this->getEventDetail($eventDetail);
    }

    public function getEventDetail($event_id)
    {
        $eventMapper = new Application_Model_Mapper_EventMapper();      
        $eventDetails = $eventMapper->findById($event_id);
        $eventDate = $this->view->getEventTime($eventDetails[0]['date_from'],$eventDetails[0]['date_to']);

        $result = array(
            'event' => $eventDetails,
            'when' => $eventDate
            );

        return $result;

    }

} 
```

我有一个视图助手如下`getEventTime`

```
<?php

class Application_View_Helper_GetEventTime extends Zend_View_Helper_Abstract
{

    public function getEventTime($fromdate,$todate)
    {
        //echo $to; exit;
         return date("j F Y, H:m a",strtotime($fromdate))."-<br/>".date("j F Y, H:m a",strtotime($todate));
    }
}

?> 
```

我无法在应用程序控制器助手中访问应用程序视图助手，我可能错了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:53:08.223

抽象类`Zend_Controller_Action_Helper_Abstract`不提供`$view`反映控制器正在使用的视图对象的属性。

如果您想从您的操作助手访问视图对象，请使用以下代码：

```
$view = $this->getActionController()->view; 
```

一旦你有了它，你应该能够调用你的视图助手，比如：

```
$view->getEventTime(...); 
```

# ruby-on-rails - Ruby 中的 Sleep 语句不接受任何 rails 转换

> ID：12671849
> 
> 赞同：2
> 
> 时间：2012-10-01T10:49:47.447
> 
> 标签：ruby-on-rails, ruby

我觉得这很奇怪。为什么我不能这样做？：

```
puts Time.now
x=2
puts x
puts x.class
sleep x
puts Time.now
x=x.seconds
puts x
puts x.class
sleep (x)
puts Time.now 
```

我得到的输出是：

```
Mon Oct 01 16:14:58 +0530 2012
2
Fixnum
Mon Oct 01 16:15:00 +0530 2012
2
Fixnum
rake aborted!
can't convert ActiveSupport::Duration into time interval
/Users/hariharanganapathiraman/Documents/MigrationScripts/sample/lib/import/boot.rb:23:in `sleep' 
```

同样，它不适用于`.minutes`or `.days`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T11:10:12.480

那是因为`ActiveSupport::Duration`模仿自己作为`Fixnum`类：

```
ActiveSupport::Duration.new(3600, [[:seconds, 3600]]).class #=> Fixnum 
```

使用`sleep(2.seconds.to_i)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:28:51.787

The problem is with `ActiveSupport::Duration` It's inherited from `BasicObject` that have only limited number of methods and does not have `class` method. If you take a look in ActiveSupport::Duration [implementation](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/duration.rb#L104) you'll see that all methods are proxied(via method_missing) to `@value`, that's Fixnum in your case.

Hence, since `ActiveSupport::Duration` has no class method, your class call for a `x.seconds` goes to `Fixnum`.

# javascript - Javascript/Jquery - 加法和减法错误

> ID：12671852
> 
> 赞同：0
> 
> 时间：2012-10-01T10:49:57.167
> 
> 标签：javascript, jquery

我有以下脚本来获取浏览器的高度，然后从浏览器的高度中减去页眉和页脚的高度：

```
var a = $(window).height();
alert (a);
var b = $('#header').css('height').replace(/[^-\d\.]/g, '');
alert (b);
var c = $('#header').css('height').replace(/[^-\d\.]/g, '');
alert (c);
var d = (a-(b+c));
alert (d);
$('#block').height(d); 
```

所以它会发出警报，
1.)699
2.)100
3.)50
然后是错误的部分：
4.)-9351

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:51:59.173

变量 b 和 c 包含字符串，当您在 Javascript 中对字符串使用 + 运算符时，它们会被连接起来。

即表达式“100”+“50”的计算结果为“10050”。

`.height()`我建议使用 jQuery方法获取元素的高度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T10:53:49.473

使用 parseInt ：

```
var a = parseInt($(window).height());
alert (a);
var b = parseInt($('#header').css('height').replace(/[^-\d\.]/g, ''));
alert (b);
var c = parseInt($('#header').css('height').replace(/[^-\d\.]/g, ''));
alert (c);
var d = (a-(b+c));
alert (d);
$('#block').height(d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T10:52:47.700

您可以使用 jquery height(returns integer) 方法。在您的代码中 b 和 c 是字符串。[jsfiddle](http://jsfiddle.net/YX5zb/1/)

```
 var a = $(window).height();
    alert (a);
    var b = $('#header').height();
    alert (b);
    var c = $('#header').height();
    alert (c);
    var d = (a-(b+c));
    alert (d);
    $('#block').height(d); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:01:24.830

试试这个...只需替换固定数字

```
var a = parseInt('600');
var b = parseInt('100');
var c = parseInt('50');
var d = (a-(b+c)); 
```

# javascript - 如何在猫鼬 node.js 中找到数字范围

> ID：12671860
> 
> 赞同：1
> 
> 时间：2012-10-01T10:50:27.897
> 
> 标签：javascript, node.js, mongoose

示例： User.find( id > 0 && id < 10, function (err, docs) {})

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T10:54:47.407

```
User
  .find({})
  .where('id').gt(0).lt(10)
  .exec(callback); 
```

从[文档](http://mongoosejs.com/docs/queries.html)

# c# - 如何从其路径获取文件输入流？

> ID：12671862
> 
> 赞同：10
> 
> 时间：2012-10-01T10:50:40.440
> 
> 标签：c#

我有要上传的文件的路径，但该方法采用文件输入 Stream。

谁能告诉我如何从路径中获取输入流？

我之前在使用打开文件对话框时上传了文件，并将文件作为文件输入流，但是我网页的新部分用户没有选择文件，我必须用代码去抓取它，但我知道它的文件路径。

```
public string uploadfile(string token, string filenameP, DateTime modDate, HttpPostedFileBase file)
{
    //... code to upload file
} 
```

我想要类似 Java 中的 ClassLoader 之类的东西。

在这里看到这个问题。

[https://stackoverflow.com/a/793216/1479146](https://stackoverflow.com/a/793216/1479146)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T10:59:12.943

为此，您可以使用 StreamWrite 或 StreamReader 类：

```
// for reading the file
using (StreamReader sr = new StreamReader(filenameP)) 
{
    //...
}

// for writing the file
using (StreamWriter sw = new StreamWriter(filenameP)) 
{
    //...
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/f2ke0fzy.aspx](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-17T22:01:17.600

在 Microsoft Docs 上使用`File.OpenRead(path)` [FileStream 类](https://docs.microsoft.com/en-in/dotnet/api/system.io.filestream?view=netframework-4.7.1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T10:59:40.073

```
public string uploadfile(string token, string filenameP, DateTime modDate, HttpPostedFileBase file)
        {
              using (StreamReader reader = new StreamReader(filenameP))
            {
                 //read from file here
            }
        } 
```

PS 不要忘记包含 System.IO 命名空间

编辑：System.IO 中的流操作类正在包装 Stream 基类。reader.BaseStream 属性将为您提供该流。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-29T09:51:31.573

在 C# 中，获取 Stream 的方式（无论是输入还是输出）：使用 Stream 的派生类，例如 new FileStream(inputPath, FileMode.Open)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T10:59:53.273

首先在您的文件上打开一个输入流

然后将该输入流传递给您的上传方法

例如：打开文件流

```
// Character stream writing
StreamWriter writer = File.CreateText("c:\\myfile.txt"); 
writer.WriteLine("Out to file."); 
writer.Close();

// Character stream reading
StreamReader reader = File.OpenText("c:\\myfile.txt"); 
string line = reader.ReadLine(); 
while (line != null) {
  Console.WriteLine(line); 
  line = reader.ReadLine(); 
} 
reader.Close(); 
```

# android - 如何在 Android 的日期选择器中显示 7 天回溯

> ID：12671863
> 
> 赞同：2
> 
> 时间：2012-10-01T10:50:46.427
> 
> 标签：android, date

我有两个`datepicker` `From`，`to` 我想要今天的日期和 7 天后的日期，例如今天的日期 `01/10/2012`应该在，`to`而 7 天后的日期，即`23/9/2012`应该在`From`

我所做的是，我能够得到今天的日期，但我怎样才能得到日期 7 天回来我所做的是

```
Calendar ToDateCal=Calendar.getInstance();
    DatePickerDialog.OnDateSetListener td=new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view,int year,int monthOfYear,int dayOfMonth) {
            ToDateCal.set(Calendar.YEAR, year);
            ToDateCal.set(Calendar.MONTH, monthOfYear);
            ToDateCal.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            updateToDate();
        }
    };

private void updateToDate(){
    try{
    int iDay;
    int iMonth;
    int iYear;

    iDay=ToDateCal.get(Calendar.DATE);
    iMonth=ToDateCal.get(Calendar.MONTH);
    iMonth=iMonth+1;
    iYear=ToDateCal.get(Calendar.YEAR);

    String sTDate=iDay+"/"+iMonth+"/"+iYear;
    ToDate.setText(sTDate);
}
    catch(Exception ex){
        sResponse=ex.toString();
    }
} 
```

单击 Edittext 上的事件

```
 ToDate.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v){
                new DatePickerDialog(DRSTClaimPage.this,td,ToDateCal.get(Calendar.YEAR),
                ToDateCal.get(Calendar.MONTH),ToDateCal.get(Calendar.DAY_OF_MONTH)).show();
            }
        }); 
```

并设置日期

```
 FromDate.setText(dt.getStDt());

public String getStDt(){
    return ((dt.getDate())+"/"+(dt.getMonth()+1)+"/"+(dt.getYear()+1900));

} 
```

像这样 ![在此处输入图像描述](../Images/fae88b2c0bac92ec27d191205f75ed6f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:57:11.477

这可能会帮助您：

```
Calendar currDate=Calendar.getInstance();

Calendar weekBackDate=Calendar.getInstance();
weekBackDate.add(Calendar.DAY_OF_MONTH,-7); 
```

**编辑 ：**

仔细查看您的问题，我认为您想在 FromDate 中设置文本，日期在 7 天之前。然后你可以像这样使用上面的代码：

```
 private void updateToDate(){
        try{
        int iDay;
        int iMonth;
        int iYear;

        iDay=ToDateCal.get(Calendar.DATE);
        iMonth=ToDateCal.get(Calendar.MONTH);
        iMonth=iMonth+1;
        iYear=ToDateCal.get(Calendar.YEAR);

        String sTDate=iDay+"/"+iMonth+"/"+iYear;
        ToDate.setText(sTDate);

        setFromDate();
    }
        catch(Exception ex){
            sResponse=ex.toString();
        }
    }

private void setFromDate(){

     FromDate.setText(String.format("%1$td / %1$tm / %1$tY",ToDateCal));
} 
```

# image - 将中心对齐到表格单元格中图像的中间？

> ID：12671864
> 
> 赞同：1
> 
> 时间：2012-10-01T10:50:47.430
> 
> 标签：image, alignment

我有这个 HTML：

```
<td>
    <ol start="4">
        <li>
            <div style="float:left;">some text</div>
            <div style="float:right;">
                <img style="vertical-align:middle;" src="pic.png" />
            </div>
            <div style="clear:both;"></div>
        </li>
    </ol>
</td> 
```

我尝试了很多东西，包括vertical-align:middle 将文本对齐到图像的中间或相反，没有任何改变结果。到目前为止，图像的顶部与文本的顶部对齐。

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:18:04.790

将您的“一些文本” div 放在 pic div 中，将其设置为`display:inline`不会断行，然后添加`vertical-align:middle`，如下所示：

```
<table><tr>
<td>
    <ol start="4">
        <li>

            <div style="float:right;">
                <div style="display:inline;vertical-align:middle;">some text</div>
                <img style="vertical-align:middle;" src="pic.png" />
            </div>
            <div style="clear:both;"></div>
        </li>
    </ol>
</td>
</tr></table> 
```

工作[**小提琴**](http://jsfiddle.net/EALxE/)

**更新**：
为了能够`vertical-align:middle`在几行上做`<br>`，正如OP在评论中指出的那样，将“一些文本”div的显示更改为`inline-table`而不是just `inline`，请参阅工作[**jsFiddle**](http://jsfiddle.net/a4fGa/1/)

# c# - 在 C++ 中使用 C# 作为脚本语言

> ID：12671876
> 
> 赞同：4
> 
> 时间：2012-10-01T10:51:36.933
> 
> 标签：c#, c++, com

我正在尝试将 C# 作为脚本语言嵌入到我的 C++ 库中。我知道这可能不是一项微不足道的任务，所以我首先进行了一个最小的测试项目，看看这是否可能。

我设法创建了一个 C# 程序集，其中包含用于管理简单脚本并在运行时使用`CSharpCodeProvider`. 该程序集使用 C# 控制台应用程序作为测试项目进行了测试（假设 C# 源文件在内存中编译并在必要时执行）。

所以下一步是用一个 C++ 应用程序来连接它。

我以某种方式设法使用 COM 做到了这一点。我将我的 C# dll、类和接口导出为 COM 对象，并使用 Regasm 生成了 tlb 文件。

我能够在 C++ 项目中创建这些类的实例并调用它们的方法，并且`Windows.Forms`在需要执行实际逻辑之前，一切似乎都运行良好（例如显示消息框）。它只是抛出不应抛出的异常，因为它已经与作为库主机的 C# 控制台应用程序一起使用。

因为我不知道我是否可以调试 COM 组件（很好地进入这个 C# dll 的代码是不可能的 AFAIK）所以我添加了过多的消息框和 try-catch 块。

当我尝试从已编译的程序集中检索任何类型时，它似乎中断了。它抛出：`Reflection.ReflectionTypeLoadException`

另一方面，编译不会失败，也不会生成任何错误消息。

使用 C# 触发这些方法可以 100% 工作，只有在从 C++ 执行时它才会以某种方式中断。

这可能是什么原因？或者可能有另一种方式来做我想做的事情？我确实发现在这种情况下使用 COM 是正确的，但是我不知道有哪些方面会导致此类代码中断？

**编辑：** 这是导出为 COM 的托管 C# 程序集：http: [//nopaste.info/9da70dbcbd.html](http://nopaste.info/9da70dbcbd.html)

所以这些对象是从 C++ 应用程序访问的，如下所示：http: [//nopaste.info/50c4c9726a.html](http://nopaste.info/50c4c9726a.html)

并且脚本就像类派生`IScript`和实现`Execute`显示消息框的方法一样简单。

**编辑2：**

有关引发的异常的详细信息如下：“无法加载文件或程序集 'lame2.scripting, Version=1.0.0.0, Culture=neutral, PublicKeyToken=84d0df983ded76a1' 或其依赖项之一。Nie można odnaleźć określonego pliku。”

最后一句表示找不到文件。

但这很奇怪，因为在编译时我有以下行： compilerparams.ReferencedAssemblies.Add("D:\Interop\lame2.scripting\lame2.scripting\bin\Debug" + "\lame2.scripting.dll");

这是“脚本”内容：

```
using System;
using System.Linq;
using System.Windows.Forms;
using System.Reflection;
using lame2.scripting;

namespace Olaboga
{
  public class TestScript : IScript
  {
    public TestScript() { }

    public void Execute(Event ev)
    {
      MessageBox.Show("Script that has been compiled from a source file has been invoked.   TestScript.Execute");
    }
  }
} 
```

编辑3：

最后从内存编译切换到编译到临时文件后，它突然开始正常工作。所以最后一个问题有人可以知道为什么它在内存中编译时无法工作，是否可以这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T11:30:54.660

如果您可以将您的应用程序功能公开为 COM 对象模型，那么应该可以这样做。您应该注意以 .NET 互操作层可以正确处理的方式对接口进行建模。

如果我理解正确，您在调试从 C# 脚本生成的 .NET 程序集时遇到问题，对吧？在这种情况下，您可以在编译程序集时使用以下编译器设置：

```
CompilerParameters cp = new CompilerParameters();

// Generate debug information.
cp.IncludeDebugInformation = true;

// Save the assembly as a physical file.
cp.GenerateInMemory = false;

// Set a temporary files collection. 
// The TempFileCollection stores the temporary files 
// generated during a build in the current directory, 
// and does not delete them after compilation.
cp.TempFiles = new TempFileCollection(".", true); 
```

这将启用生成代码的调试，因为您将拥有源代码、调试符号和程序集。但是，您多次提到“COM 组件”，但我没有看到任何 - 有一个 C++ 应用程序和 .NET 程序集 - 介于两者之间的东西不是真正的 COM 组件，而是“互操作魔法”，或多或少，只是编组这两方之间的东西。

如果您在调试包含您的实现的原始 .NET 程序集时遇到问题，请确保调试设置正确：

*   如果您使用本机应用程序正常开始调试（F5），请转到`Project Settings -> Debugging -> Debugger Type`并将其设置为`Mixed`
*   如果您将调试器附加到正在运行的进程，请在`Attach to Process`表单中单击`Select...`“附加到”文本框附近的按钮并选择您需要的那些（托管和本机）

这假定您确实有程序集的源代码和 .pdb 文件。

# tridion - Tridion RTF 文本选择

> ID：12671888
> 
> 赞同：10
> 
> 时间：2012-10-01T10:52:25.247
> 
> 标签：tridion, tridion-2011

我正在编写一个 GUI 扩展，它基本上将选定的文本包装在特定的 DIV 中。我有用 DIV 封装的文本，但遇到了一些障碍......

当用户没有*选择*特定的文本时，我假设意图是包装最近的 HTML 元素

```
htmlSelectedNode = target.editor.getSelectedHTMLElement() 
```

这一切似乎工作正常，我将 HTML 元素传递到我的扩展中。经过一些操作后，我应用了 HTML，但它在前一个元素中注入了新的 HTML - 而不是替换它......

是否可以“选择” HTML 元素 - 我可以看到 a`.focus()`和 a`.setCapture()`但这些似乎不起作用 - 我想理想的做法是使用从“当前元素”中选择元素时应用的相同功能" 功能区栏上的下拉菜单，但我未能成功找到与此下拉菜单关联的 onclick/select 方法。

只是为了澄清......举个例子......

如果文本是

```
 <div class="notrelevant"><p>test1</p><p>this is an example</p></div> 
```

并且用户在“is”中的 i 和 s 之间插入了光标，我希望 GUI 预先选择最近的 HTML 元素 - 在这种情况下，最终结果将是......

```
 <div class="notrelevant"><p>test1</p><div class="INJECTED_CORRECTLY"><p>this is an example</p></div></div> 
```

***编辑：*** 为了完整起见，我已经包含了提交事件，我用来（重新）将 HTML 注入到 RTF 中（尽管我认为此时操作选择没有意义，并且更愿意“选择”上面的文字使用了更“标准”的现有 Tridion 功能......）

```
 $evt.addEventHandler(popup, "submit",
        function DateHighlighter$execute$onPopupSubmitted(event) {

            var el = event.data.html;
            if (el) {
                if (htmlSelectedNode != null) {
                    var lDocument = htmlSelectedNode.ownerDocument;
                    var lTempContainer = lDocument.createElement("span");

                    try {
                        lTempContainer.innerHTML = el || "";
                    }
                    catch (err) {
                        //assigning a value to innerHTML can be sensitive to browser but the error is fine to be ignored
                    }

                    var parentNode = htmlSelectedNode.parentNode;
                    parentNode.replaceChild(lTempContainer, htmlSelectedNode);

                    //Move to the new element
                    var lTextRange = $dom.createTextRange(lTempContainer);
                    $dom.moveRangeToElement(lTextRange, lTempContainer);
                    //Select and remove the temporary element
                    $dom.selectRange(lTextRange, $dom.getSelection(lDocument));
                    $dom.removeNode(lTempContainer, false);

                }
                else {
                    // Insert new created element (DIV)
                    target.editor.applyHTML(el);
                }

            }
            else {
                //TODO: test this - it's likely not required
                if (htmlSelectedNode.attributes["class"] != null)
                    htmlSelectedNode.removeAttribute("class");

                //TODO: test this - it's likely not required
                if (htmlSelectedNode.attributes["ondblclick"] != null)
                    htmlSelectedNode.removeAttribute("ondblclick");

                //TODO: the node isn't removed - leaves the empty <div>... 
                // - delete the node and then apply the node2.outerHTML? - or follow parentnode pattern above!
                var htmlSelectedNode2 = htmlSelectedNode.innerHTML;
                htmlSelectedNode = htmlSelectedNode2;
            }

            //Refreshes the Design view
            target.editor.setCurrentView("Source");
            target.editor.setCurrentView("RichText");
            target.item.closeActivePopup();
        });
    $evt.addEventHandler(popup, "unload", DateHighlighter$execute$onPopupCanceled); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T17:28:20.887

所以我找到了`CurrentElement`选择并看到了明显的`setSelectedHTMLElement`. 不知道我是如何错过它的，但是唉，下面是...作为评论说明-确保该方法可用（如果用户选择了不直接等同于 HTMLElement 的文本字符串，则该`setSelectedHTMLElement`方法将失败并删除我们用户选择（因此意味着 GUI 扩展 .aspx 不能（重新）注入新的 HTML...

```
//if there's no tagname then the setSelected will fail and remove the (non-element based) select the user has done
if (htmlSelectedNode.nodeName && htmlSelectedNode.nodeName != '#text') { 
    //unlikely to get #text here as it's the htmlSelectedNode.commonAncestorContainer.nodeName
    $log.message(logt + 'selecting the htmlSelectedNode.nodeName:' + htmlSelectedNode.nodeName);
    target.editor.setSelectedHTMLElement(htmlSelectedNode);
}
else {
    $log.message(logt + 'no htmlSelectedNode.nodeName - user probably selected incomplete element:');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:37:14.130

这是一个棘手的问题。您将需要检查所有可能的情况。回到一年前，我们不得不将自定义的“超链接”功能实现为 GUI 扩展。问题是一样的：“我怎么知道选择了什么？”，“如果用户选择一个文本和一个 html 节点的一半怎么办？” “如果选择只是文本怎么办？” 基本上与您面临的问题相同。

如果我理解正确，您想用给定的（自定义）div 包装选定的文本，对吗？您还需要考虑的事情（如果您还没有考虑的话）是：“如果用户选择了一个已经用您的自定义 div 包装的文本会发生什么？”、“如果他选择一个用您的自定义 div 包装的文本会怎样？在 div 之后还是之前的一大段文字？”

好吧，正如我之前提到的，这并不容易，或者至少，不是直截了当的。以下是我们所做的一些提示，在我们的例子中，我们必须使用超链接标签而不是 div 来包装文本，但从“获取/设置选定的 html”的角度来看，它应该会有所帮助：

1st：初始化一个元素节点并获取选中的html：

```
var element = null;
var htmlSelectedNode = target.editor.getSelectedHTMLElement() || {}; 
```

第二：检查到底是什么：

```
 if (htmlSelectedNode != null && htmlSelectedNode.tagName != null && htmlSelectedNode.tagName == "A") { //In your case you might wanna check if it is a div, instead
    ...
    ...

} 
```

注意：在我们的例子中，我们还必须检查图像和跨度标签，因为锚元素会有点不同，因为我们需要从中获取一些信息。

第三：如果所选文本是元素，则设置元素变量（未选择额外文本）

```
element = htmlSelectedNode;

var selectedText = "";
    // Chrome & Firefox
            if (htmlSelectedNode != null && htmlSelectedNode.startContainer != null && htmlSelectedNode.startOffset != null) {

                selectedText = htmlSelectedNode.toString();

            }
            // IE Range
            else if (htmlSelectedNode != null && htmlSelectedNode.htmlText != null && htmlSelectedNode.text != null) {
                selectedText = htmlSelectedNode.text;
            }
            // IE DIV
            else if (htmlSelectedNode != null && (htmlSelectedNode.tagName == "DIV" || htmlSelectedNode.tagName == "P") && htmlSelectedNode.innerText != null) {
                selectedText = htmlSelectedNode.innerText;
            } 
```

第 4 点：如果 htmlSelectedNode 之前或之后包含一个节点和原始文本，我们使用范围（进一步阅读），考虑到不同的浏览器行为：

好吧，这里的例子并不能真正解决你的问题，但我希望它们能给你一些关于如何检查 xhtml 内容的提示。基本上，您需要注意使选择成为有效的 xhtml 元素。

这里有更多关于当元素已经包含链接标签时我们如何处理 xhtml 的示例：

```
// If there is a link, delete it
if (htmlSelectedNode != null) {
    var lDocument = htmlSelectedNode.ownerDocument;
    var lTempContainer = lDocument.createElement("span");

    try {
        lTempContainer.innerHTML = el || "";
    }
    catch (err) {
        //assigning a value to innerHTML might fail -> ignore it then
    }

    var parentNode = htmlSelectedNode.parentNode;
    parentNode.replaceChild(lTempContainer, htmlSelectedNode);

    //move to new element
    var lTextRange = $dom.createTextRange(lTempContainer);
    $dom.moveRangeToElement(lTextRange, lTempContainer);
    //select and remove temp element
    $dom.selectRange(lTextRange, $dom.getSelection(lDocument));
    $dom.removeNode(lTempContainer, false);

} 
```

如何将 HTML 设置回 RTF 并刷新 Source/Design 选项卡：

```
// Insert new created link
target.editor.applyHTML(el); //el == element

//Refreshes the Design view
target.editor.setCurrentView("Source");
target.editor.setCurrentView("RichText"); 
```

同样，我知道这不是您问题的解决方案，但我认为您可以使用一些示例来尝试新方法。如果您需要进一步的帮助，请分享整个 JS 文件，或者至少分享 _execute() 方法（我假设您有代码，对吧？）

问候，

# objective-c - 从 iOS 调用 magento webservice 只会返回 wsdl

> ID：12671889
> 
> 赞同：2
> 
> 时间：2012-10-01T10:52:24.917
> 
> 标签：objective-c, magento, soap, webservice-client

我使用以下代码第一次调用magento webservice，它是一个登录名（我使用[了这个文档](http://www.magentocommerce.com/api/soap/introduction.html%29%3a)）

```
NSString *soapMessage = @" \
<?xml version=\"1.0\" encoding=\"UTF-8\"?> \
<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns1=\"urn:Magento\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"> \
    <SOAP-ENV:Body> \
        <ns1:login> \
            <username xsi:type=\"xsd:string\">user</username> \
            <apiKey xsi:type=\"xsd:string\">password</apiKey> \
        </ns1:login> \
    </SOAP-ENV:Body> \
</SOAP-ENV:Envelope>";

NSURL *url = [NSURL URLWithString:@"http://localhost/magentoPath/api/soap/?wsdl"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMessage length]];
[request addValue:@"application/soap+xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request addValue:@"localhost/magentoPath/" forHTTPHeaderField:@"SOAPAction"];
[request addValue:msgLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if(connection){
    self.webData = [NSMutableData data];
}
else
    NSLog(@"theConnection is null"); 
```

稍后我有以下方法记录我得到的响应。问题是，我总是获得 wsdl 的内容，但我应该从 magento 获得会话 ID。我做错了什么？谢谢！

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Done. received Bytes %d", [self.webData length]);
    NSString *xml = [[NSString alloc] initWithBytes:[self.webData mutableBytes] length:[self.webData length] encoding:NSUTF8StringEncoding];
    NSLog(xml);
} 
```

顺便说一句，请求 xml 来自 PHP 的 SoapClient，登录工作正常。所以它与 Magento 无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:17:47.337

所以我在查看了magento的日志后自己找到了解决方案。它说你不需要每次都声明xml，所以只需删除

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?> 
```

从请求中，它的工作原理！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:01:37.790

尾随`'?wsdl'`使服务返回其 WSDL 定义。如果你忽略它，你实际上会调用该服务。

# direct2d - SharpDX 中的测量字符串

> ID：12671893
> 
> 赞同：4
> 
> 时间：2012-10-01T10:52:37.430
> 
> 标签：direct2d, sharpdx

我们正在使用`SharpDX`. 现在我们必须在 a 中声明一组字符串`Rectangle`。为此，我们尝试使用`SharpDX.DrawingSizeF`. 例如：

```
Windows.Graphics g;
Model.Font font;
DrawingSizeF size = g.MeasureString(quote, font.Font, new DrawingSizeF(font.Width, font.Height)); 
```

我们试图在`MeasureString`不使用的情况下找出答案`Windows.Graphics`。可能吗？或者有没有其他方法可以进入`MeasureString`或`SharpDX`使用`Direct2D`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-07T15:26:53.127

我从[这个留言板帖子](http://ninjatrader.com/support/forum/showthread.php?t=87748)中得到了一些对我很有效的代码。在我自己的一些摆弄之后，我最终得到的是以下内容：

```
public System.Drawing.SizeF MeasureString(string Message, DXFonts.DXFont Font, float Width, ContentAlignment Align)
{
    SharpDX.DirectWrite.TextFormat textFormat = Font.GetFormat(Align);
    SharpDX.DirectWrite.TextLayout layout = 
        new SharpDX.DirectWrite.TextLayout(DXManager.WriteFactory, Message, textFormat, Width, textFormat.FontSize);

    return new System.Drawing.SizeF(layout.Metrics.Width, layout.Metrics.Height);
} 
```

如果插入文本、字体、建议的宽度和对齐方式，它会导出一个矩形的大小来保存文本。当然，您要寻找的是高度，但这包括宽度，因为文本很少填满整个空间。

**注意：**正如评论者所建议的，代码实际上应该是以下资源的 Dispose() ：

```
public System.Drawing.SizeF MeasureString(string Message, DXFonts.DXFont Font, float Width, ContentAlignment Align)
{
    SharpDX.DirectWrite.TextFormat textFormat = Font.GetFormat(Align);
    SharpDX.DirectWrite.TextLayout layout = 
        new SharpDX.DirectWrite.TextLayout(DXManager.WriteFactory, Message, textFormat, Width, textFormat.FontSize);

    textFormat.Dispose(); // IMPORTANT! If you don't dispose your SharpDX resources, your program will crash after a while.

    return new System.Drawing.SizeF(layout.Metrics.Width, layout.Metrics.Height);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-01T13:08:13.933

我修改了第一个答案以解决在 VB.net 中无法访问 DXFont 的限制：

```
Public Function MeasureString(Message As String, textFormat As SharpDX.DirectWrite.TextFormat, Width As Single, Align As ContentAlignment) As System.Drawing.SizeF

        Dim layout As SharpDX.DirectWrite.TextLayout =
        New SharpDX.DirectWrite.TextLayout(New DirectWrite.Factory, Message, textFormat, Width, textFormat.FontSize)

        Return New System.Drawing.SizeF(layout.Metrics.Width, layout.Metrics.Height)

    End Function 
```

# silverlight - 在 UI 之外的另一层中解耦异步 Web 请求

> ID：12671897
> 
> 赞同：1
> 
> 时间：2012-10-01T10:52:54.837
> 
> 标签：silverlight, windows-phone-7, asynchronous

我认为这是新手常见且典型的问题，但我仍然不完全理解给定的解决方案。我正在编写一个 Windows Phone 7 应用程序，我想执行几个`HttpWebRequest`提交 POST 数据并设置一些标题的地方。响应应该被反序列化，然后由逻辑和/或 UI 层处理。

是的，Silverlight 应用程序以异步方式进行 Web 通信。我明白了。它工作正常。

**但是：**我想将通信处理与 UI 分离。xaml.cs 代码。我需要进行通信，`HttpWebRequest`因为我需要修改标题等。

我想要做的是以下内容：

1.  单击一个按钮。提供登录名/用户名来假设我的通信层。例如：`LoginRequest(string username, string pwd)`
2.  通讯。层会异步执行请求并获取应答，即调用回调`LoginResponseCallback(IAsyncResult res)`
3.  好的，现在我可以处理响应，将检索到的 JSON 字符串反序列化为对象
4.  该对象应交回 UI 以更新数据。我知道我应该使用该`Dispatcher.BeginInvoke`方法，因为回调未在 UI 线程上运行。

但我仍然不知道如何将对象从通信层传递到 UI。我认为解决方案非常简单，例如将委托从方法传递`btnLogin_onClick(object sender, RoutedEventArgs e)`给`LoginRequest`方法。或者也许我需要使用 lambdas？

我的通信层中有一个`SendBasicRequest`方法，它设置适当的标头（例如 ClientOS、LoginKey、VersionBuild 等）。我想从多个页面调用此方法，因此我希望它在通信层中解耦。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:28:20.923

使用 MVVM 轻量级工具包。这是将 UI 与后端代码分离的最简单方法。

您可以在 CodePlex 网站上找到 MVVM Light。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:31:15.720

MVVM Light Toolkit 提供了一个可靠的框架，可以轻松地将 MVVM 用于 WP7 应用程序。

但请注意，需要一些预读才能完全理解 MVVM 模式的原理和基于 MVVM 的框架。

一些有用的信息可以指导您完成复杂性。它帮助我将许多逻辑与 XAML 和带有命令的代码隐藏文件解耦。使用 ViewModels 处理逻辑并轻松地与 Async CTP 异步运行任务（在 VS2012 中完全可用）。

[具有 Model-View-ViewModel 设计模式的 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)可帮助您了解 MVVM 和 DataBinding

[Silverlight 应用程序中的 MVVM 模式入门](http://weblogs.asp.net/dwahlin/archive/2009/12/08/getting-started-with-the-mvvm-pattern-in-silverlight-applications.aspx)使用 IoC 注入中间服务代理，该代理异步获取数据

[Windows Phone Mango：10 分钟内开始使用 MVVM](http://windowsphonegeek.com/articles/Windows-Phone-Mango-Getting-Started-with-MVVM-in-10-Minutes)很好，很容易理解如何使用 MVVM 和命令

[MVVM（Apex 框架）](http://www.codeproject.com/Articles/274982/Commands-in-MVVM#hdiw1)中的命令具有异步命令等功能。

**异步/等待**

帮助您在后台执行异步操作并在任务完成时收到通知。您使用 async/await 关键字（VS2012 或 Async CTP 中的新关键字）。

[使用 Async 和 Await 进行异步编程（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

[Async CTP – 用于 Windows Phone 的基于任务的异步编程](http://kevinashley.com/async-ctp-task-based-asynchronous-programming-for-windows-phone/)

[MVVMLight 和异步](http://www.dzone.com/articles/mvvmlight-and-async)

我希望这些信息可以帮助你。MVVM 对我来说并不简单，尤其是因为我不太喜欢 .NET 和 DataBinding。所以一开始的曲线非常陡峭。但是一旦你理解了这些原则，它真的会让你的生活更轻松；）

# html - 仅在一个边框上绘制轮廓

> ID：12671898
> 
> 赞同：100
> 
> 时间：2012-10-01T10:53:07.457
> 
> 标签：html, css

如何将**插入边框**应用到 HTML 元素中，但仅限于它的一侧。到目前为止，我一直在使用图像（GIF/PNG）来做这件事，然后我会将其用作背景并拉伸它（repeat-x）并定位在离我的块顶部稍远的位置。最近发现了**outline** CSS 属性，太棒了！但似乎圈出了整个街区......是否有可能只在一个边框上使用这个轮廓属性？另外，如果没有，您是否有任何可以替换背景图像的 CSS 技巧？（这样我以后可以使用 CSS 等个性化轮廓的颜色）。提前致谢！

这是我想要实现的图像： http: [//exiledesigns.com/stack.jpg](http://exiledesigns.com/stack.jpg)

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-09-17T04:34:58.483

您可以使用`box-shadow`在一侧创建轮廓。像`outline`，`box-shadow`不改变盒子模型的大小。

这在顶部放置了一行：

```
box-shadow: 0 -1px 0 #000; 
```

我制作了一个[jsFiddle](http://jsfiddle.net/B3krz/)，您可以在其中查看它的实际效果。

语法是`box-shadow: offset-x | offset-y | blur-radius | color`

* * *

**插图**

对于**插入**边框，使用*inset*关键字。这会在顶部放置一条插入线：

```
box-shadow: 0 1px 0 #000 inset; 
```

可以使用逗号分隔的语句添加多行。这会在顶部和左侧放置一条插入线：

```
box-shadow: 0 1px 0 #000 inset,
            1px 0 0 #000 inset; 
```

有关如何`box-shadow`工作的更多详细信息，请查看[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow)。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-10-01T10:56:29.950

大纲确实[适用于整个元素](http://www.w3schools.com/cssref/pr_outline.asp)。

现在我看到了您的图像，这是实现它的方法。

```
.element {
  padding: 5px 0;
  background: #CCC;
}
.element:before {
  content: "\a0";
  display: block;
  padding: 2px 0;
  line-height: 1px;
  border-top: 1px dashed #000; 
}
.element p {
  padding: 0 10px;
}
```

```
<div class="element">
  <p>Some content comes here...</p>
</div>
```

*（或查看[外部演示。](http://jsfiddle.net/gionaf/CXhBf/)）*

所有尺寸和颜色都只是占位符，您可以更改它以匹配所需的确切结果。

**重要说明**：.element 必须具有`display:block;`（默认为 div）才能正常工作。如果不是这种情况，请提供您的完整代码，以便我详细说明具体答案。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-07T05:29:54.363

**试试阴影（像边框）+边框**

```
border-bottom: 5px solid #fff;
box-shadow: 0 5px 0 #ffbf0e; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-28T11:38:41.360

我知道这是旧的。但是，是的。我更喜欢更短的解决方案，而不是 Giona 答案

```
[contenteditable] {
    border-bottom: 1px solid transparent;
    &:focus {outline: none; border-bottom: 1px dashed #000;}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-24T05:42:39.557

我喜欢给我的输入字段一个边框，删除焦点的轮廓，然后“勾勒”边框：

```
input {
  border: 1px solid grey;

  &:focus {
    outline: none;
    border-left: 1px solid violet;
  }
 } 
```

您也可以使用透明边框来做到这一点：

```
input {
  border: 1px solid transparent;

  &:focus {
    outline: none;
    border-left: 1px solid violet;
  }
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-16T07:42:53.167

HTML/CSS 的伟大之处在于通常有不止一种方法可以实现相同的效果。这是另一种解决方案，可以满足您的需求：

```
<nav id="menu1">
    <ul>
        <li><a href="#">Menu Link 1</a></li>
        <li><a href="#">Menu Link 2</a></li>
    </ul>
</nav>

nav {
    background:#666;
    margin:1em;
    padding:.5em 0;
}
nav ul {
    border-top:1px dashed #fff;
    list-style:none;
    padding:.5em;
}
nav ul li {
    display:inline-block;
}
nav ul li a {
    color:#fff;
} 
```

[http://jsfiddle.net/10basetom/uCX3G/1/](http://jsfiddle.net/10basetom/uCX3G/1/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-01T10:55:43.477

只有一侧`outline`不起作用，您可以使用`border-left/right/top/bottom`

如果我能正确理解你的评论

![在此处输入图像描述](../Images/74b78a21eccc356f0147b0984fcfba06.png)

# javascript - (Scirra) AJAX 请求数组

> ID：12671903
> 
> 赞同：1
> 
> 时间：2012-10-01T10:53:24.810
> 
> 标签：javascript, jquery, ajax, html, construct-2

我[对 Scirra 的 Construct 2 Editor 有疑问](https://www.scirra.com)。我真的不知道这是否是正确的地方，但是我搜索了很长时间的答案。

我得到一个 AJAX 请求的数据，如下所示：

```
{"data":[ [625],[500] ], [ [400],[500] ], [ [100],[120] ]} 
```

现在，我不想把它当作一个字符串。我想像这样拆分它

变量 a = 625

变量 b = 500

等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:46:41.987

首先，使用 Array 对象生成一些数据并使用`AsJSON`表达式检索其数据。然后，这将向您显示 Construct 2 期望数组数据采用的格式。请注意，JSON 包含其他信息，例如数组的维度，并且始终以 3D 格式保存，因此您提供的示例将不起作用。

一旦你得到了 Construct 2 可以理解的 JSON 格式，只需将它上传到你的服务器并 AJAX 请求该文件。它应该很好地加载到 Array 对象中。

# submit - 表单提交在后端使用 Spring MVC 时无法在 IE 上间歇性工作

> ID：12671905
> 
> 赞同：2
> 
> 时间：2012-10-01T10:53:44.880
> 
> 标签：submit

我在 jsp 文件上有一个简单的表格：

```
<form:form method="POST" class="my-form" id="dummyExtDelSubmitForm" name="dummyExtDELSubmitForm"   action="/my-web/landingPage/showPage">               
 <input type="text" name="viewName" value="userRegistrationPage" >              
 <input type="submit" name="submitDummYForm" value="Submit" ></input>               
</form:form> 
```

在 Spring MVC 控制器上，我有以下方法：

```
@RequestMapping(value = "/showPage", method = RequestMethod.POST)
public ModelAndView redirectToPage(@ModelAttribute("baseUserVO") BaseUserVO baseUserVO, HttpServletRequest request,Model model) throws BrownApplicationException {

 HttpSession session = request.getSession();

 if (baseUserVO != null && baseUserVO.getViewName()!=null) {
       return new ModelAndView("redirect:" + viewName, CommonConstants.MODEL, model);
     else{
       return new ModelAndView("redirect:/landingPage/home.brd", CommonConstants.MODEL, model);
 }
} 
```

问题是当我提交表单时，有时会填充 BaseUserVO 对象，而大多数情况下不会。它在 Firefox 上运行良好，没有失败。我试图在提琴手中查看请求，以表单提交请求到 showPage 的形式，我没有看到参数，如果 viewName 不存在，则按照逻辑，然后重定向到landingPage/home，在以后的重定向中我做请参阅 viewName 参数。

BaseUserVO 的代码，它只是一个 POJO ：

```
public class BaseUserVO {
    private Integer userMasterId;
    private String firstname;
    private String lastname;
    private Integer relationshipCode;
    private String relationshipName;
    private String userName;
    private String userDisplayName;
    private String viewName;
    private String wpoId;
    private String userType;

    public Integer getUserMasterId() {
        return userMasterId;
    }
... getter seetter for other attributes. 
```

不知道是服务器端的问题还是客户端的问题，如有线索请回复。

谢谢，拉利特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:56:53.230

发现了问题，它和 IE 的自动身份验证问题（见下面的链接），虽然到目前为止还没有具体的解决方案，但有一些解决方法。

[http://blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-bytes-in-length-when-authentication-challenges-are-expected。 aspx?CommentPosted=true#commentmessage](http://blogs.msdn.com/b/ieinternals/archive/2010/11/22/internet-explorer-post-bodies-are-zero-bytes-in-length-when-authentication-challenges-are-expected.aspx?CommentPosted=true#commentmessage)

# java - 需要在单个应用程序中同时使用 @soapaction 和 @PayloadRoot

> ID：12671909
> 
> 赞同：0
> 
> 时间：2012-10-01T10:54:19.817
> 
> 标签：java, xml, spring

我们有一个 spring 应用程序，其中我们有 Web 服务，它将使用 PayloadRoot 和 SoapAction。现在我们已经在 webservice-ws-context.xml 中配置了如下代码

```
<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
        <property name="interceptors">
            <list>
                <bean class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor"/>
                <bean id="validatingInterceptor"  class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
                    <property name="schema" value="classpath:/xsd/common.xsd"/>
                    <property name="validateRequest" value="${uiconnect.ws.payload.validate.request}"/>
                    <property name="validateResponse" value="${uiconnect.ws.payload.validate.response}"/>
                </bean>
            </list>
</property>
</bean> 
```

现在，我们想为肥皂动作添加代码，但是如果我们添加以下代码，它就不起作用了。那么，我们如何为这个 bean 赋予**“id”**属性并为特定的 Web 服务配置这个 bin。或者有没有其他方法来配置它？我尝试进行自定义端点映射，但对此没有帮助。

```
<bean class="org.springframework.ws.soap.server.endpoint.mapping.SoapActionAnnotationMethodEndpointMapping">
        <property name="interceptors">
            <list>
                <bean class="org.springframework.ws.soap.server.endpoint.interceptor.SoapEnvelopeLoggingInterceptor"/>
                <bean id="validatingInterceptor"  class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
                    <property name="schema" value="classpath:/xsd/common.xsd"/>
                    <property name="validateRequest" value="${uiconnect.ws.payload.validate.request}"/>
                    <property name="validateResponse" value="${uiconnect.ws.payload.validate.response}"/>
                </bean>
            </list>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:36:51.920

配置它的更简单方法是使用 Spring-WS 提供的自定义命名空间：

首先进行组件扫描以确保找到@Endpoint 注释的bean：

```
<context:component-scan base-package="..." /> 
```

以下将在内部注册`PayloadRootAnnotationMethodEndpointMapping`和`SoapActionAnnotationMethodEndpointMapping`

```
<sws:annotation-driven  /> 
```

并注册拦截器：

```
<sws:interceptors>
    <bean id="validatingInterceptor"  class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
        <property name="schema" value="classpath:/xsd/common.xsd"/>
        <property name="validateRequest" value="${uiconnect.ws.payload.validate.request}"/>
        <property name="validateResponse" value="${uiconnect.ws.payload.validate.response}"/>
    </bean>
    <sws:payloadRoot namespaceUri="....">
        <bean class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor"/>
    </sws:payloadRoot>
    <sws:soapAction value="...">
        <bean class="org.springframework.ws.soap.server.endpoint.interceptor.SoapEnvelopeLoggingInterceptor"/>
    </sws:soapAction>
</sws:interceptors>** 
```

# php - 通过 PHP 运行 CREATE TABLE 查询

> ID：12671916
> 
> 赞同：2
> 
> 时间：2012-10-01T10:54:54.520
> 
> 标签：php, mysql

我正在通过 PHP 脚本运行以下查询

```
DROP TABLE IF EXISTS `address`;CREATE TABLE `address` (  `Id`
int(11) NOT NULL auto_increment,   `EntityId` int(11) NOT NULL,  
`sStreet1` varchar(50),   `sStreet2` varchar(50),   `sCity`
varchar(50),   `sLoc` varchar(50),   `sPv` char(2),   `sState`
varchar(50),   `sZip` varchar(10),   `sType` varchar(50),  
`FiscalAddress` tinyint(1) NOT NULL,   PRIMARY KEY  (`Id`) ); 
```

我可以通过不同的客户端（例如 Navicat）毫无问题地运行此查询，但通过 PHP 运行此查询将输出以下内容

```
$result = mysql_query($query);
if (!$result) {
    $message  = 'Invalid import content: ' . mysql_error() . "\n\n";
    $message .= 'Whole query: ' . $query;
    die($message);
} 
```

这将输出以下内容：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“CREATE TABLE address (Id int(11) NOT NULL AUTO_INCREMENT, EntityId int(11)”附近使用正确的语法整个查询：DROP TABLE IF EXISTS address; CREATE表地址 ( Id int(11) NOT NULL AUTO_INCREMENT, EntityId int(11) NOT NULL, sStreet1 varchar(50), sStreet2 varchar(50), sCity varchar(50), sLoc varchar(50), sPv char(2), sState varchar(50), sZip varchar(10), sType varchar(50), FiscalAddress tinyint(1) NOT NULL, PRIMARY KEY (Id) );

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:57:19.457

问题不在于`CREATE TABLE`语句，而是`mysql_query()`不支持在一次调用中执行多个语句。`DROP TABLE`首先在单独的调用中执行语句`mysql_query()`，然后执行`CREATE TABLE`.

```
$dt = mysql_query("DROP TABLE IF EXISTS `address`");
if ($dt) {
  // Execute CREATE TABLE separately...
  $ct = mysql_query("CREATE TABLE...........");
  if (!$ct) {
     // Proceed with the rest of your code.
    $message  = 'Invalid import content: ' . mysql_error() . "\n\n";
    $message .= 'Whole query: ' . $query;
    die($message);
  }
}
else {} // DROP TABLE call failed. Handle appropriately. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:44:15.647

感谢 Mihai，您为我指明了正确的方向……在这种情况下，正确的方法是 msqli

这是完整的工作代码：

```
function runImportQuery($query = '') {

    $mysqli = new mysqli($this->DATABASE_HOST,$this->DATABASE_USER,$this->DATABASE_PASS,$this->DATABASE_DB );

    if ($mysqli->connect_errno) {
            $message = "Connect failed: ". $mysqli->connect_error;
    }else{

        $result = $mysqli->multi_query($query);
            // Check result
            // This shows the actual query sent to MySQL, and the error. Useful for debugging.
            if (!$result) {
                $message  = "Failed to run query: (" . $mysqli->errno . ") " . $mysqli->error ."\n\n\r";
                $message .= 'Whole query: ' . $query."\n\n\r";
                return $message;
            }else{
                $message  = "Import successfully completed!";

            }

    }
    mysqli_close($link);
    return $message;

} 
```

# active-directory - 毫秒访问中的 SSO 2010

> ID：12671917
> 
> 赞同：0
> 
> 时间：2012-10-01T10:54:57.173
> 
> 标签：active-directory, ldap, single-sign-on, ms-access-2010

是否可以在 ms access 2010 db 应用程序中进行 SSO。如果是这样，我将如何实现这一目标？

到目前为止，我在登录表单上进行了 ldap 身份验证，但我想绕过这个并自动转到下一个屏幕。以下是我到目前为止所拥有的

```
Function CheckUser(username As String, passwd As String, Level As Integer) As Boolean

    On Error GoTo LDAP_Error

    Const ADS_SCOPE_SUBTREE = 2

    Dim LDAPPath As String
    LDAPPath = "LDAP://akutan.usa.domain.com/OU=Sites;DC=domain;DC=com"

    Dim conn As ADODB.Connection
    Dim cmd As ADODB.Command
    Dim rs As ADODB.Recordset

    Set conn = New ADODB.Connection
    Set cmd = New ADODB.Command
    conn.Provider = "ADsDSOObject"
    conn.Properties("User ID") = "domain\" & username
    conn.Properties("Password") = "" & passwd
    conn.Properties("Encrypt Password") = True
    'conn.Properties("ADSI Flag") = 3
    conn.Open "Active Directory Provider"

    Set cmd.ActiveConnection = conn
    cmd.Properties("Page Size") = 1000
    cmd.Properties("Searchscope") = ADS_SCOPE_SUBTREE
    cmd.CommandText = "SELECT Name FROM '" & LDAPPath & "' WHERE " & "objectCategory='user'"

    Set rs = cmd.Execute
    rs.Close
    conn.Close

    CheckUser = True
    [TempVars]![CurrentUser] = username
    Call LogUser([TempVars]![CurrentUser], "Logon")
    Exit Function

LDAP_Error:

    If Err.Number = -2147217911 Then
        MsgBox "Incorrect PeopleSoftID or Password!", vbExclamation, "LDAP Authentication"
    Else
        MsgBox "Error : " & Err.Description & " " & Err.Number, vbExclamation, "LDAP Authentication"
    End If

    CheckUser = False
    conn.Close      
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:00:08.650

我使用“访问数据项目”来为我的所有表/存储过程进行一次登录。

# objective-c - 我对“类”和“对象”的理解正确吗？

> ID：12671918
> 
> 赞同：1
> 
> 时间：2012-10-01T10:54:59.457
> 
> 标签：objective-c

我已经开始学习Objective-C，我只是想验证一下我对“类”和“对象”这两个概念的理解是否正确。如果这是错误的论坛，对于这些基本的问题，请告知我应该去哪里！

无论如何，我正在从一本关于该主题的书中学习 Objective-C，我现在正试图将这些知识变成“我自己的”。

到目前为止，我已经理解“类”是指可以从这个“类”“构造”的“对象”的描述？？？并且基于这个“类”的“对象”是由这个“对象”可以具有的特定“属性”和该对象可以执行的特定“方法”来理解的？？？所以对我来说“属性”类似于对“对象”的物理描述，“方法”是这个对象可以执行的“动作”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:09:09.767

思考或汽车等是可视化面向对象概念的好方法。

你可以有一个“车辆”类，它有“船”、“飞机”、“汽车”、“自行车”等子类。

'Vehicle' 类有方法（你可以告诉它做的事情）'Move'、'Stop'、'Turn' 和 attibutes 'Colour'、'Speed'、'Weight' 等。所有子类都有相同的方法和属性，因为它们从超类“继承”它们。

虽然他们都在移动，但他们可能会以不同的方式（飞行、浮动、滚动、驱动等），通过“覆盖”他们的超类“移动”方法。

您驾驶的实际汽车是“汽车”类的“实例”。您妻子的汽车是汽车类的另一个实例。每个实例都有自己的属性（颜色等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:00:04.143

将`class`其视为对象的蓝图。对象也称为“实例”——类的实际“工作副本”。

属性实际上是您所期望的——在某些语言中，它也称为“属性”。例如颜色或位置之类的东西，可以设置和/或检索的东西。基本上，从开发人员的角度来看，属性主要是绑定到对象的变量，因为它不是“全局变量”。

“方法”就像一个函数，你可以调用一个对象来做某事。

例如，以一个名为`Address`. 它将具有类似`Street`or`ZIP`或的属性`Country`。此外，它可能有一种方法`GetDistance`来计算从您当前位置到地址的距离。然后你可以创建任意数量的对象：我的地址、你的地址、Chuck Norris 的地址等。

*PS：查克·诺里斯（Chuck Norris）的参考资料会得到+1吗？:-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T10:59:23.363

是的，“类”指的是类型，“对象”指的是类的实例。

因此，您可能有一个描述自行车的 Bike 类，以及 3 个对象bike1、bike2 和bike3，它们都是Bike 类的实例。

我希望这能解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:06:57.877

您的类基本上描述了您可以基于对象的属性和方法。

您的理解似乎是正确的，但您描述的有点混乱。让我给你一个简单的例子：

想想一只猫。这将是你的课。它具有以下属性：-名称-颜色-性别-...

还有一些方法： -Scratch -Walk -Meow -...

现在你知道猫是什么以及它能做什么了。有了这些知识，您可以根据您的类创建对象，例如：

一个名为“garfield”的猫对象（“cat”类的一个实例），具有以下属性： 名称：加菲猫 颜色：橙色 性别：男性 ... 可以抓挠、走路、喵喵叫和...使用它的方法。

我希望这是可以理解的。

问候:)

# android - 扩展文件下载错误。找不到 AAC 文件验证/资源

> ID：12671921
> 
> 赞同：6
> 
> 时间：2012-10-01T10:55:18.890
> 
> 标签：android, expansion-files

我遇到了 2 个不同的错误，一个来自平板电脑，另一个来自手机。

我已经将一个带有 4 个音频文件的 ZIP 未压缩文件上传到 Google Play 商店（一天多前），但我遇到了一些问题。

1.  尝试从一台设备下载时，它会下载扩展文件，并在 99% 时出现错误“AAC 文件验证失败”。

    这是由于“SampleDownloaderActivity”->“protected void onPostExecute(Boolean result)”中的“假”参数造成的

    无论如何，执行

    ```
    Helpers.doesFileExist(this, str, 27959282L, false); 
    ```

    返回 TRUE 并且 Zip (obb) 中的 mp3 文件工作/播放正确。

2.  尝试从其他设备下载时，会出现：“下载失败，因为找不到资源”。

    我在控制台中发现了一条消息，我认为该消息将我指向了罪魁祸首。

    > [licensechecker] 无法绑定到服务。

搜索后，我尝试过：

*   对于第 1 期，评论 CRC 检查。它没有帮助。
*   对于第 2 期，请按照[此问题](https://stackoverflow.com/questions/9807048/download-expansion-files-on-tablet)的说明进行操作。它也没有用。

我还没有找到任何解决方案。我在使用“DND-AAC”（从 Google 代码获得）的工作源时遇到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T07:28:14.467

这是解决方案（与问题中的回答/编辑相同）：

第一个问题：SampleDownloaderActivity

```
 private static final XAPKFile[] xAPKS = {
    new XAPKFile(
            true, // true signifies a main file
            2001, // the version of the APK that the file was uploaded
               // against
            27959282L // the length of the file in bytes
    ) /*
     , new XAPKFile(...)
      //*/
    }; 
```

未正确设置硬编码信息。另外，我没有补丁文件，所以我不得不从数组中删除它。

2n 问题：Play 商店应用丢失！！有一个直接访问但没有应用程序（不知道为什么）。我从手机上做了一个 APK 备份并安装在平板电脑中，然后重新启动平板电脑，一切正常。

# jquery - 在生产中从 gem 加载 JQuery 时出错

> ID：12671923
> 
> 赞同：1
> 
> 时间：2012-10-01T10:55:30.877
> 
> 标签：jquery, ruby-on-rails-3, asset-pipeline, production-environment

我正在尝试将我的应用程序切换到生产模式，但每次我启动服务器时，我都会收到内部服务器错误 (500)。

我正在使用的命令：

```
thin start -p 2048 -e production --ssl --ssl-key-file ./mykey.key --ssl-cert-file ./mycert.crt 
```

所以我查看了我的日志：

-> 生产日志

```
ActionView::Template::Error (jquery-1.7.1.min.js isn't precompiled):
3:  <head>
4:  <title>MSDNAA</title>
5:  <%= stylesheet_link_tag    "application" %>
6:  <%= javascript_include_tag "jquery-1.7.1.min.js" %>
7:      <%= javascript_include_tag "application" %>
8:      <%= csrf_meta_tags if false %>
9:  </head> 
```

好吧，我对 Rails 还很陌生，所以我观看了 2 个 Railscasts 处理资产管道（[279](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)和[282](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)）以确保我理解一切。当我正确理解我必须做的事情如下：将以下行添加到我的 application.js：

```
//= require jquery
//= require jquery_ujs
//= require_self
//= require_tree . 
```

这将包括所有需要的 JQuery 文件，它本身和我的资产目录中的所有 JS 文件。然后我必须确保 JQuery-Rails gem 已安装并包含在我的 Gemfile 中。我打了 bundle 以确保它被使用并且一切正常。然后我添加了 Rails Cast 282 中解释的内容。之后我必须使用以下命令预编译我的资产：

```
bundle exec rake assets:precompile 
```

之后我仍然得到那个错误。无需加载 jquery-1.7.1.min.js，它甚至不在我的应用程序目录中。我担心的第二件事是，当我通过这样的浏览器连接到我的应用程序时：

```
https://myapp:2048/assets/application.js 
```

我应该看到所有与 JScript 相关的东西都打包在一起。相反，我收到“404 - 找不到页面”错误，并且日志显示：“没有路由匹配 /[AppDir]/assets/javascripts/application.js”

我究竟做错了什么？我错过了什么？（我猜！）

版本信息：

Rails 3.2.8 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]

# iphone - 升级到 iOS 6 SDK 和 Xcode 4.5 后出现 Xcode 错误

> ID：12671924
> 
> 赞同：1
> 
> 时间：2012-10-01T10:55:31.457
> 
> 标签：iphone, objective-c, ios, xcode, restkit

我有一个应用程序在 Xcode 4.2 iOS 5.1 上成功运行，当我更新到 Xcode 4.5 以使该应用程序与 iOS 6 兼容时，当我运行该应用程序时出现错误

```
"Apple Mach-O linker error: no such file or directory: '/Users/User/Library/Developer/Xcode/DerivedData/Build/Products/Debug-iphonesimulator/RestKit/RestKit'" 
```

对此的任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:04:55.453

如果您已将项目从一个comp移动到另一个comp，您可能没有将restkit框架复制到旧mac上的项目文件夹中。尝试删除restkit并在构建阶段读取它

# java - java中图像的重叠

> ID：12671928
> 
> 赞同：1
> 
> 时间：2012-10-01T10:55:39.020
> 
> 标签：java, image

我想在灰色阴影图像上重叠包含一些白点的黑色图像。我想让这个黑色图像透明。[我使用了这里](https://i.stack.imgur.com/foVZ1.jpg)提到的 Java 代码。

但输出显示红色图像。为什么？

代码在这里提到：

```
 public class OverlayImage{
        public static void main(String[] args) {
            File path = new File("/home/dmdd/Desktop/images"); // base path of the images

            // load source images
            BufferedImage image=null;
            BufferedImage overlay=null;
            try {
                image = ImageIO.read(new File(path, "image.jpg"));
                overlay = ImageIO.read(new File(path, "overlay.jpg"));
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //overlay =(BufferedImage) makeImageTransparent(overlay,50);
            OverlayImage over=new OverlayImage();
            // create the new image, canvas size is the max. of both image sizes
            int w = Math.max(image.getWidth(), overlay.getWidth());
            int h = Math.max(image.getHeight(), overlay.getHeight());
            //BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

            Image overlay1=over.TransformGrayToTransparency(overlay);
            BufferedImage combined=over.ApplyTransparency(image, overlay1);
            try {
                ImageIO.write(over.toBufferedImage(combined, w, h), "JPG", new File(path, "combined.jpg"));
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        private Image TransformGrayToTransparency(BufferedImage image)
        {
            ImageFilter filter = new RGBImageFilter()
            {
                public final int filterRGB(int x, int y, int rgb)
                {
                    return (rgb << 8) & 0xFF000000;
                }
            };

            ImageProducer ip = new FilteredImageSource(image.getSource(), filter);
            return Toolkit.getDefaultToolkit().createImage(ip);
        }

        private BufferedImage ApplyTransparency(BufferedImage image, Image mask)
        {
            BufferedImage dest = new BufferedImage(
                    image.getWidth(), image.getHeight(),
                    BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2 = dest.createGraphics();
            g2.drawImage(image, 0, 0, null);
            AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.DST_IN, 1.0F);
            g2.setComposite(ac);
            g2.drawImage(mask, 0, 0, null);
            g2.dispose();
            return dest;
        }
} 
```

白点图像是： ![在此处输入图像描述](../Images/03ff97e29f5a62c3fb5acb232403f162.png)

黑色图像是： ![在此处输入图像描述](../Images/f845d60fae06deff597210c9d36f5b54.png)

叠加的红色图像是： ![在此处输入图像描述](../Images/772b83e09e12bb7a97f2a4ae295641fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:26:40.923

You are trying to save the resulting image as a jpeg. The resulting image contains the alpha / transparency level, while jpeg images don't support transparency. Save it as a png image.

# css - 在分割中垂直对齐图像

> ID：12671929
> 
> 赞同：0
> 
> 时间：2012-10-01T10:55:39.857
> 
> 标签：css, html, vertical-alignment

我目前正在尝试垂直对齐图像旋转器（SlideDeck）中的图像。当前的图像都与顶部对齐，尽管我需要将它们与中间对齐。图像的高度各不相同。

我尝试了许多方法，例如绝对对齐等，但都没有运气。

请参阅：[http ://bcc1.olivernewth.com/houses/the-lindens/](http://bcc1.olivernewth.com/houses/the-lindens/)

**更新：**我现在找到了一种方法（图像旋转器现在通过使用背景垂直居中图像）。我不确定这是否是最好的方法，因为没有 Alt 文本并且与旧版浏览器不兼容......有什么建议吗？

```
.div {
  background:       url(image.jpg) no-repeat center center; 
  width:            960px; 
  height:           384px; 
  background-size:  100%; 
  background-width: 960px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:03:54.210

下面的代码将垂直和水平对齐您的图像。

```
.container {
    width: 960px;
    height: 384px;
    display: block;
    line-height: 382px;
    overflow: hidden;
    text-align: center;
}
.container img {
    vertical-align: middle;
} 
```

如果您选择将图像插入 HTML 并且不将它们用作背景，那么“容器”类可能是您的 .div

# wifi - 已安装应用检测：如何根据已安装的应用扫描和列出附近的手机（WiFi Direct）？

> ID：12671930
> 
> 赞同：2
> 
> 时间：2012-10-01T06:02:37.443
> 
> 标签：wifi, wifi-direct

我正在构建一个应用程序，该应用程序打算使用 wifi direct 与在手机上安装了此特定应用程序的用户进行连接。我想知道安装在我手机中的这个应用程序如何只能扫描安装了这个特定应用程序的设备。

基本上我想过滤掉附近的手机（wrt wifi范围），只显示那些安装了这个特定应用程序的手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:19:40.467

您将不得不使用预关联服务发现。在 android 上，JB 公开了新的服务发现 API 来实现这一点。

# groovy - 以常规方式获取闭包的内容

> ID：12671935
> 
> 赞同：2
> 
> 时间：2012-10-01T10:56:18.717
> 
> 标签：groovy

我是 Groovy 的新手。我想实现这一点：

```
def a = { assert 1 == 1 }

def method(def a)
{
    println a
}
method(a) 
```

现在`println`打印`ConsoleScript1$_run_closure1@72e9108f`。但我希望它会打印`assert 1 == 1`。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T11:20:48.017

使用[我链接到的答案作为 this 的副本](https://stackoverflow.com/questions/5263008/print-the-closure-definition-source-in-groovy)，如果您保存：

```
import groovy.inspect.swingui.AstNodeToScriptVisitor

def a = { assert 1 == 1 }

def method( def a ) {
  new StringWriter().with { writer ->
    a.metaClass.classNode.getDeclaredMethods("doCall")[0].code.visit new AstNodeToScriptVisitor( writer )
    println "{\n$writer}"
  }
}

method( a ) 
```

到一个文件`test.groovy`然后做：

```
groovy test.groovy 
```

你得到输出：

```
{
assert 1 == 1 : null
return null
} 
```

我认为这与您将要获得的一样接近...不使用 `code`变量中的位置数据（这是一个[Groovy 语句类](http://groovy.codehaus.org/api/org/codehaus/groovy/ast/stmt/Statement.html)）来获取行/列号并将文件解析为文本以提取它.. .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:01:03.533

您正在寻找类似 Javascript 的功能，其中在函数上调用 toString() 将打印其源代码。

Groovy 被编译为 JVM 字节码。groovy 编译器不会将源代码保留在已编译的 JVM 类文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:22:25.690

在 Odersky & Co. 的《Programming in Scala》一书中有一个用 Scala 编写的著名示例。

基本上，您必须：

*   列出文件
*   对于每个匹配 *.groovy 的文件
*   修剪/grep 想要的行

在[Groovy SDK](http://groovy.codehaus.org/groovy-jdk/java/io/File.html#eachFileMatch%28java.lang.Object,%20groovy.lang.Closure%29)中，有一个 Groovy 方法`directory.eachFileMatch`可以让您找到正确的文件，还有一个`File.filterLine()`方法可以让您抓取正确的行。

# java - Android - IntentReceiver Leak / Leaking / Leaked

> ID：12671941
> 
> 赞同：2
> 
> 时间：2012-10-01T10:56:33.457
> 
> 标签：java, android, android-activity, memory-leaks

由于在某些情况下**未调用****onDetachedFromWindow** ， IntentReceiver被**泄露。**

 **```
@Override
 protected void onDetachedFromWindow() {
  super.onDetachedFromWindow();
  mContext.unregisterReceiver(mScreenStateReceiver);
 } 
```

这是在大量测试设备和 Android 4.1.1 之前的 Android 版本中发现的。我使用较旧的以及最新的 Eclipse 4.2.1 进行编译，其中包含高达 20.0.3 的各种 SDK 工具版本。

可以在此处找到 示例**LogCat ：** [https ://developers.google.com/mobile-ads-sdk/community/discussion?place=msg%2Fgoogle-admob-ads-sdk%2FVYSun9iD8tg%2FL3t6oSlrCbYJ](https://developers.google.com/mobile-ads-sdk/community/discussion?place=msg%2Fgoogle-admob-ads-sdk%2FVYSun9iD8tg%2FL3t6oSlrCbYJ)

```
Activity myActivity has leaked IntentReceiver com.adsdk.sdk.banner.AdView that
was originally registered here. Are you missing a call to unregisterReceiver()? 
```

接缝这是一个**已知的错误**： [http ://code.google.com/p/android/issues/detail?id=29399](http://code.google.com/p/android/issues/detail?id=29399)

**有解决方法吗？非常感谢您解决这一挑战！**

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:00:26.427

我建议不要依赖“onAttachedToWindow”和“onDetachedFromWindow”。您可以添加像“init”和“destroy”这样的配对操作来完成像“register”和“unregister”BroadcastReceiver 这样的工作。然后您可以完全控制以避免这种类型的泄漏。或者，您可以显式调用 onDetachedFromWindow。**

# visual-studio-2010 - 如何在不关闭 Visual Studio 2010 的情况下更改 TFS 用户/绑定

> ID：12671943
> 
> 赞同：2
> 
> 时间：2012-10-01T10:56:53.757
> 
> 标签：visual-studio-2010, tfs

我在 TFS 中有我的项目，我正在使用 VS 2010 进行开发。

当我打开解决方案时，它会要求我提供凭据。

连接到 TFS 后，如果不关闭解决方案，我将无法更改用户，我可以断开它，但是当我再次单击连接（团队资源管理器）时，它不会要求我提供凭据，而是使用我最初输入的凭据

这可能不是一个大问题，但我真的不想关闭并打开 Visual Studio 来更改 TFS 用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-26T03:44:58.313

您需要从**Windows Vault**中删除 TFS 凭据以清除并强制在 Visual Studio 中询问新的 TFS 凭据

1.  转到**控制面板**（**开始 -> 控制面板**）。

2.  单击**用户帐户**（或**Windows 7**机器中的**用户帐户和家庭安全->用户帐户）**

***   单击**凭据管理器**（或**管理您的凭据**）

    *   在**凭据管理器**页面中，您可以看到两种类型的凭据

    一世。Windows 凭据 ii。通用凭证

    *   单击两个凭据修改链接，单击链接**从保管库**中删除以删除存储的 TFS 凭据。** 

 **现在，当您登录 Visual Studio 时，系统会要求您提供连接 TFS 的凭据。

**注意**：不要忘记取消选中**记住我的凭据**选项以强制要求每个 TFS 连接的凭据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:37:28.693

[TFS 博客上的一篇文章](http://blogs.msdn.com/b/visualstudioalm/archive/2012/08/29/clearing-the-credentials-for-connecting-to-a-team-foundation-server.aspx)解决了这个问题。基本解决方案是从 Windows 凭据缓存中删除凭据。您可以使用控制面板（如帖子中所述）执行此操作，也可以使用[cmdkey](http://technet.microsoft.com/en-us/library/cc754243%28v=ws.10%29.aspx)命令行工具，如下所示：

```
cmdkey /delete:MyTfsServerName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:34:32.373

**对于 Visual Studio 2010**

[TFS 博客文章](http://blogs.msdn.com/b/visualstudioalm/archive/2012/08/29/clearing-the-credentials-for-connecting-to-a-team-foundation-server.aspx)的链接对我有用，好吧，只是其中的一部分。我使用的是 Visual Studio 2010 (VS2010)，找不到“缓存”，所以我所做的只是清除博客文章中描述的凭据**

# python - 禁用 python 文件的 Apache 缓存

> ID：12671944
> 
> 赞同：3
> 
> 时间：2012-10-01T10:57:09.710
> 
> 标签：python, django, apache, caching

我正在使用 django 并进行 facebook 集成，这需要一个测试服务器。我对 Apache 及其 .pyc 文件的缓存有很多问题，我什[至在 stackoverflow 上问过](https://stackoverflow.com/questions/12578602/django-project-and-svn-loads-older-code-versions/12578673#12578673)。

该解决方案有效，但我想知道是否有禁用此类文件的 Apache 缓存的选项。服务器重启对我来说可能是个问题。

编辑：

这是 django.wsgi 代码：

```
path = '/not/actual/path'
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'notactualproj.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T11:02:33.250

# 如何解决您的“字节码问题”

您可能应该首先弄清楚为什么那些不需要的`.pyc`文件存在（这些在您的存储库中吗？它们应该被忽略）。

正如评论中提到的，如果您有`.pyc`导致问题的悬空文件，您可以`.pyc`在将更新的代码部署到服务器时将删除所有文件作为拉取过程的一部分。运行应用程序将重新创建导入模块时所需的那些。

* * *

现在，如果您真的不想生成字节码，您可以使用[environment `PYTHONDONTWRITEBYTECODE`variable](http://docs.python.org/using/cmdline.html#envvar-PYTHONDONTWRITEBYTECODE)，但我不建议您这样做，因为这似乎是一个非常过分的解决方案。

# 如何解决 Apache 看似拉旧版本的代码。

现在，你必须在这里解决两个问题。

*   由 python 生成的较旧的字节码文件（例如`.pyc`文件），在特定情况下可能会导致问题，例如用模块替换文件，但通常不会引起关注。
*   Mod WSGI 不会重新加载上传的更新代码。这取决于您在哪种模式下运行 Mod WSGi，通常的症状是点击页面似乎会随机拉取更新或旧版本的代码。

**要解决第一个问题**，您只需删除未使用的字节码文件。但是，同样，这可能不是导致您的问题的原因。

**要解决第二个问题**，您有两个解决方案

*   Restarting apache when you upload newer code. Using `apache2ctl -k graceful`, this will be transparent to your users, and I can't see why "Server restart might be a problem", unless you're on shared hosting.
*   Using code reloading, you might want to [have a look at the `mod_wsgi`](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode) documentation.

*I don't think bytecode is your issue, and code reloading probably is.*

# eclipse - Mylyn - 密码存储

> ID：12671946
> 
> 赞同：0
> 
> 时间：2012-10-01T10:57:17.530
> 
> 标签：eclipse, mylyn

Eclipse 如何将密码存储到 Bugzilla（通过 Mylyn）等？我一直在寻找包含密码的 prefs 文件，但我没有找到合适的 antyhing。我还检查了 \.metadata\.mylyn 目录。

有人可以给我小费吗？我会很高兴的。问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:06:51.540

所有与 Eclipse 相关的身份验证凭证都存储在 Eclipse 安全存储中。使用 Windows -> Preferences -> General Security -> Secure Storage -> Contents 查看存储的值。

# xpages - 我的 RTF 字段的蓝色背景

> ID：12671948
> 
> 赞同：0
> 
> 时间：2012-10-01T10:57:25.613
> 
> 标签：xpages

当我的富文本字段在我的 xPage 上呈现时，背景是蓝色的。我认为它与 OneUI 有关。我该如何关闭它。只想要一个白色的背景。

我已经将实际的 RTF 设置为强制背景为白色，但现在它周围有蓝色边缘。

谢谢克莱姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:44:53.317

默认情况下，RTF 没有这样的“蓝色”属性。而且我不知道如果不更改 OneUI 主题，这是一种正常行为。因此，要么 OneUI 主题已直接更改，要么有一个主题扩展了所使用的主题，要么通过 CSS 设置了一个背景属性 !important 参数。

# android - 为什么我的 Android 应用程序中的图像和屏幕顶部之间存在间隙？

> ID：12671949
> 
> 赞同：2
> 
> 时间：2012-10-01T10:57:27.193
> 
> 标签：android, xml, imageview

在我的 xml 文件中，我正在使用它。我的问题是，为什么在较小的屏幕上使用它时，屏幕顶部和图像之间会出现如此巨大的差距。但是在大屏幕上一切都很好。

编辑：我认为问题是因为重量。有任何想法吗？

```
<LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

    <ImageView
        android:id="@+id/area"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="1"
        android:src="@drawable/area_selector" 
        android:contentDescription="@string/app_name"/>

    <ImageView
        android:id="@+id/volume"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="1"
        android:src="@drawable/volume_selector" 
        android:contentDescription="@string/app_name"/>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:29:36.597

On Teovalds behalf, the commented answer as an answer: Try adding `android:adjustViewBounds="true"` to the imageview tags.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:23:41.310

还可以删除添加的 magintop = 10 dp 以最小化差距！

# c - 如何在opencv中获取视频文件的频道数？

> ID：12671951
> 
> 赞同：2
> 
> 时间：2012-10-01T10:57:35.430
> 
> 标签：c, opencv, video-capture

在开始捕获之前，如何获取视频使用的通道数？我以为我可以使用`cvGetCaptureProperty`，但没有可以设置的 property_id 来获取频道数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:14:39.097

是的，你是对的 - 没有`property_id`频道数量。您只能从单帧捕获中获取通道数。

# ios - 如何从 iOS 应用程序为所有系统设置代理？

> ID：12671952
> 
> 赞同：0
> 
> 时间：2012-10-01T10:57:38.180
> 
> 标签：ios, proxy

代理必须影响所有系统，理想情况下我想在没有越狱的设备上执行此操作，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:01:28.260

您无法从 iOS 应用程序内部执行此操作。

对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:08:32.557

这是不可能的......你不能从应用程序中做到这一点......你必须使用一些网络服务......

# javascript - 骨干继承——深拷贝

> ID：12671955
> 
> 赞同：2
> 
> 时间：2012-10-01T10:57:56.343
> 
> 标签：javascript, inheritance, backbone.js

我在 Backbone 中看到了这个关于继承的问题： [Backbone.js 视图继承](https://stackoverflow.com/questions/7735133/backbone-js-view-inheritance)。有用但不回答我的问题。

我遇到的问题是这样的：

假设我有一个类`Panel`（本例中的**模型**）；

```
var Panel = Backbone.Model.extend({
    defaults : {
        name : 'my-panel'
    }
}); 
```

然后一个`AdvancedPanel`;

```
var AdvancedPanel = Panel.extend({
    defaults : {
        label : 'Click to edit'
    }
}); 
```

以下不起作用：

```
var advancedPanel = new AdvancedPanel();
alert(advancedPanel.get('name')); // Undefined :( 
```

JSFiddle在这里：http: [//jsfiddle.net/hWmnb/](http://jsfiddle.net/hWmnb/)

我想我可以看到我可以通过一些自定义*扩展*函数自己实现这一点，该函数创建原型的深层副本，但这似乎是人们可能希望从 Backbone 继承中获得的常见事情，有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:58:30.713

建立原型链的 Backbone`extend`函数是通用的，用于视图、路由器、模型和集合。因此它不知道诸如`defaults` or之类的细节`events`，也无法确定扩展类型是否要**覆盖** 或**合并**父级中的值。

一种前进的方法是在实际定义之外明确地做到这一点：

```
AdvancedPanel.prototype.defaults = _.extend({}, Panel.prototype.defaults, {
  label: 'Click me'
}); 
```

你也会对视图做同样的事情：

```
SomeExtendedView.prototype.events = _.extend({}, SomeBaseView.prototype.events, {
  'click button': 'onClick'
}); 
```

如果您愿意，您实际上也可以在适当的位置列出默认值。您只需在构造函数定义之外进行合并：

```
var Base = Backbone.Model.extend({
  defaults: {
    base: 123
  }
});

var Extended = Base.extend({
  defaults: {
    extended: 456
  }
});

Extended.prototype.defaults = _.extend({}, Base.prototype.defaults, Extended.prototype.defaults); 
```

这将`Extended.defaults`包含两者`base`，`extended`以及传递给实例化的任何属性：

```
console.log(JSON.stringify(new Extended({ test: 'Hey' }).toJSON()));
>> {"base":123,"extended":456,"test":"Hey"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:12:12.480

拿起这个，我写了一个简单的`advancedExtend`方法来替换行（来自[这个继承结构](https://stackoverflow.com/questions/7735133/backbone-js-view-inheritance#answer-7736030)）：

```
Panel.extend = Backbone.Model.extend; 
```

和：

```
Panel.extend = advancedExtend; 
```

我的`advancedExtend`方法如下所示：

```
function advancedExtend(protoProps, classProps) {

    var delegate = this.render ? 
                        Backbone.View : (this.save ? 
                            Backbone.Model : (this.navigate ? 
                                Backbone.Router : Backbone.Collection)); 

    var child = delegate.extend.apply(this, [ protoProps, classProps ]);

    _.defaults(child.prototype.defaults, this.prototype.defaults);
    _.defaults(child.prototype.events, this.prototype.events);
    _.defaults(child.prototype.attributes, this.prototype.attributes);

    return child;
}; 
```

*NB 我意识到 的定义`delegate`是没有意义的，因为所有的 Backbone 原型`extend`方法都是相同的，但认为这对于未来的版本可能会更健壮。*

[请参阅此处](http://jsfiddle.net/edslocombe/AgXdw/)的 JSFiddle 。

我很想听听 Backbone 资深人士对这种方法的看法，因为它是非标准的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:40:52.543

问题是 JavaScript 没有经典继承，所以你需要在这里做一些特别的事情。

当您使用`_.extend`列表中距离您正在扩展的对象“右侧”最远的对象时，将在任何名称冲突中“获胜”。

您需要做的是覆盖扩展的定义以处理这些情况，或者将您的`defaults`哈希命名为类似`local_defaults`并将它们合并到您的`initialization`方法中

```
 initialize: function(options){
        var attrs = _.extend({}, this.defaults, this.local_defaults);
        this.set(attrs, {silent: true});
    }, 
```

类似的东西。您必须将属性散列设置为默认值集；通常这发生在模型的构造函数中，但模型只知道此时的默认值。

当然，如果您在 local_defaults 中重新定义默认值，您仍然会覆盖，因此您会考虑覆盖扩展。（我们已经为工作中的一些特定案例做了这些，如果您需要，我们很乐意为您提供帮助。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:50:27.460

有几种方法可以做到这一点，但在我的应用程序中，首选方法是将模型上的“默认值”定义为函数，因此您可以按照以下方式进行操作：

```
var Panel = Backbone.Model.extend({
    defaults : {
        name : 'my-panel'
    }
}); 
```

刚刚定义了您的扩展模型：

```
var AdvancedPanel = Panel.extend({
    defaults: function() {
        var d = _.result(Panel.prototype, 'defaults'); // doing this as top level might be a function as well
        return _.extend({}, d, {
            label : 'Click to edit' 
        });
    }
}); 
```

然后在控制台中你应该得到正确的 name 值

```
var advancedPanel = new AdvancedPanelModel();
console.log('advancedPanel', advancedPanel.get('name')); 
```

这应该可以解决问题

# jquery - jQuery onclick 这个或那个

> ID：12671957
> 
> 赞同：3
> 
> 时间：2012-10-01T10:58:04.363
> 
> 标签：jquery, onclick

我想检查我是否单击了某个元素或另一个：

```
 ((delete_box) || (man)).click(function(){ 
        overlay.fadeIn('fast',function(){
            box_2.animate({'top':'200px'},500);
            });
        }); 
```

使用此代码，它只会拾取变量 man 而不是删除框。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:02:24.547

尝试

```
$(delete_box).add(man).click(function(){ 
    overlay.fadeIn('fast',function(){
        box_2.animate({'top':'200px'},500);
        });
    }); 
```

或者

```
$([delete_box,man]).click({..});) 
```

# android - 如何以编程方式检测哪些应用程序导致手机唤醒？

> ID：12671959
> 
> 赞同：3
> 
> 时间：2012-10-01T10:58:08.777
> 
> 标签：android

寻找一种收集电话唤醒统计信息的方法。然后卸载我手机上每 10 分钟执行一次的那个愚蠢的应用程序。

**更新**：尝试了电池应用程序，它们是垃圾。他们显示手机每 5-15 分钟唤醒一次，但没有告诉我为什么。他们还显示了每个应用程序消耗了多少，但总是不到 5%。

所以我寻找一种方法来收集这些统计数据并用它做一些分析。

**更新二**：看起来有电池管理器可以完成这项工作（例如 GSam Battery Monitor），并且通过一些逆向工程，我希望我能找到它们如何收集统计数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:56:36.360

此选项不是程序化的，但您可以使用它来找出导致问题的原因。

在命令行中，连接设备，键入：

```
adb shell dumpsys power 
```

您可以在`dumpsys`此处找到有关该命令的更多详细信息：

*   [如何查看哪些唤醒锁处于活动状态](https://stackoverflow.com/questions/5780280/how-can-i-see-which-wakelocks-are-active)
*   [什么是 Android ADB shell“dumpsys”工具，它有什么好处？](https://stackoverflow.com/questions/11201659/android-adb-shell-dumpsys-tool)
*   [在 Android adb shell 中使用 dumpsys 命令](http://wrightrocket.blogspot.com/2010/12/useful-commands-in-adb-shell.html)
*   [Dumpsys - AOSP](http://source.android.com/tech/input/dumpsys.html)

# zend-framework - zend 表单提交按钮值未显示在 zend 表单中

> ID：12671960
> 
> 赞同：2
> 
> 时间：2012-10-01T10:58:12.107
> 
> 标签：zend-framework, zend-form

嗨，我有一个包含此代码的 zend 表单

```
$field = new Zend_Form_Element_Submit('submit');
$field->setAttrib('class', 'btn')->setlabel('Save');        

$this->addElement($field); 
```

但即将到来的html是：

```
<input type="submit" class="btn" helper="formSubmit" value="" id="submit" name="submit"> 
```

无法弄清楚为什么价值没有出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:01:37.113

```
$field->setAttrib('class', 'btn')->setLabel('Save'); 
```

`setLabel()`请注意上面的大写“L”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T09:16:00.590

将类型（默认类型=“按钮”不触发表单提交）更改为“提交”。例如

```
$this->addElement('button', 'my_button', array(
    'label' => 'Click me',
    'class' => 'nice_button',
    'type' => 'submit'
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T12:38:13.317

你想设置值吗？所以使用二传手：`$field->setValue('Save');`

# mysql - mysql获取计数和平均值

> ID：12671961
> 
> 赞同：0
> 
> 时间：2012-10-01T10:58:30.490
> 
> 标签：mysql

我有一个带有问题 ID 和用户提交的值的问卷回复表。

我想获得响应的计数，以及整个问题 ID 的平均值，例如，对于问题 ID 1，选项 1 的计数为 3，选项 2 的计数为 2，但总体平均值将是 7（所有选项的总和）除以 5（提交总数）。

我看不到如何对我的 group by 执行此操作，该 group by 总共按问题 ID 和选项编号分组响应。

任何指点将不胜感激！

样本数据看起来像

```
questionID  ResponseValue
1           5
1           5
1           6
2           7
2           7
2           7
2           3 
```

我的预期输出是

```
questionID responseValue countOfResponses questionAverage
1          5             2                5.3333
1          6             1                5.3333
2          3             1                6
2          7             3                6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:10:38.293

您是否正在寻找类似...在具有总体总数的每个选项中，我会预先查询每个问题的总和（响应值），然后仅对问题进行分组，以便您对所有条目都进行分组...然后再次查询，但针对每个问题/选项...因此，在这种情况下，您将获得给定响应所代表的总数的百分比，而不是“平均值”...为确保您获得小数精度，我已经添加 * 1.0000 所以它进入十进制强制结果列，而不仅仅是整数。

```
select
      YT.QuestionID,
      YT.responseValue,
      count(*) as TotalOptResponses,
      TotalByQ.TotalQAverage
   from
      YourTable  YT
         JOIN ( select QuestionID,
                       avg(ResponseValue * 1.0000 ) as TotalQAverage
                   from
                      YourTable
                   group by
                      QuestionID ) TotalByQ
            ON YT.QuestionID = TotalByQ.QuestionID
   group by
      YT.QuestionID,
      YT.ResponseValue 
```

# c# - 使用 Json.NET 在 windows phone 7 中反序列化 Json

> ID：12671962
> 
> 赞同：0
> 
> 时间：2012-10-01T10:58:50.703
> 
> 标签：c#, windows-phone-7, json.net

我在这样的网络服务器中有一个 JSON：

```
{"My Book List": [{"ID":"5","TYPE":"History","TITLE":"Ekannoborti","PRICE":"200","IMAGE":"Ekannoborti.jpg","DOWNLOAD LINK":"http://www.starhostbd.com/"}],"success":3} 
```

为了反序列化它，我到目前为止已经完成了：

```
 public class Attributes
    {
        public string ID{ get; set; }
        public string TYPE { get; set; }
        public string TITLE { get; set; }
        public string  PRICE { get; set; }
        public string IMAGE { get; set; }
        public string DOWNLOADLINK { get; set; }
    }

    public class DataJsonAttributeContainer
    {
        public List<Attributes> attributes { get; set; }
        //public Attributes attributes { get; set; }
    }

    public static T DeserializeFromJson<T>(string json)
    {
        T deserializedProduct = JsonConvert.DeserializeObject<T>(json);
        return deserializedProduct;
    } 
```

& 在我的代码中：

```
void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        //var deserializedJSON = JsonConvert.DeserializeObject<Attributes>(e.Result);
        var container = DeserializeFromJson<DataJsonAttributeContainer>(e.Result);
        string asd = container.attributes[0].DOWNLOADLINK[0].ToString();
        //string asd = deserializedJSON.DOWNLOADLINK[0].ToString();
    } 
```

**问题是**：从调试窗口中，我可以看到在 e.Result 中分配了数据，但容器仍然为空。如何解决这个问题呢 ？请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:10:01.150

向属性添加一个`JsonProperty`属性`attributes`以匹配 JSON 中的属性名称，如下所示：

```
public class DataJsonAttributeContainer
{
    [JsonProperty("My Book List")]
    public List<Attributes> attributes { get; set; }
} 
```

此外，您应该使用“下载链接”值`JsonProperty`向属性添加一个属性，以`Attributes.DOWNLOADLINK`使其与 JSON 属性名称匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T11:15:42.843

乍一看，我认为问题出在 DOWNLOADLINK 属性上。您的服务器返回“下载链接”，但您的财产名称中没有空格。

您应该像这样在您的属性中定义 json 表示：

```
[JsonProperty(PropertyName = "DOWNLOAD LINK")]
public string DOWNLOADLINK { get; set; } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:41:28.680

实际上，以上两个答案都应该可以解决您的问题，您必须将它们加入俱乐部

```
public class MyBookList
{
    public string ID { get; set; }
    public string TYPE { get; set; }
    public string TITLE { get; set; }
    public string PRICE { get; set; }
    public string IMAGE { get; set; }

    [JsonProperty("DOWNLOAD LINK")]
    public string DOWNLOADLINK { get; set; }
}

public class DataJsonAttributeContainer
{
    [JsonProperty("My Book List")]
    public List<MyBookList> MyBookList { get; set; }

    public int success { get; set; }
} 
```

并且

```
var container = DeserializeFromJson<DataJsonAttributeContainer>(e.Result);
string asd = container.attributes[0].DOWNLOADLINK.ToString(); 
```

试试这些课程。应该管用。

# ios - 使用 GAP Socket 进行通信。编译器说 PGPlugin.h 未找到

> ID：12671969
> 
> 赞同：0
> 
> 时间：2012-10-01T10:59:11.627
> 
> 标签：ios, cordova

我正在尝试建立一个套接字连接`GapSocket`，并将一些数据（字符串）从 PhoneGap 应用程序发送到 tcp 套接字到打开端口 8888 的计算机。

我已经包含了所有依赖项：

*   两者`asyncsocket.m`和`asynsocket.h`从`cocoaasyncsocket`

*   两者`GapSocketCommand.m`和`GapSocketCommand.h`从`GapSocket`

*   包含`GapSocket.js`并引用了文件夹`index.html`下的 js 文件`www`。

当我编译它时，它说`PGPlugin.h`找不到，我真的找不到这个头文件。

我该如何解决？我正在使用最新的 PhoneGap 版本 2.1.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:45:24.957

该文件`PGPlugin.h`用于以前版本的 Phonegap / Cordova。对于较新的版本，他们将其替换为`CDVPlugin.h`.

一个可能对您有用的解决方案（它不是真正的解决方案，但主要是一种“技巧”/“使其工作的潜在方法”......）是`PGPlugin.h`用`CDVPlugin.h`( `<Cordova/CDVPlugin.h>`) 替换任何引用。该解决方案适用于某些人；但是，问题是您可能会遇到链接到旧引用的多个依赖项...

`GapSocket`我建议您在尝试上述操作之前先检查是否有已移植到 Cordova 2.1.1 的已发布版本。

# objective-c - JTRevealSideBar splitview 添加 UISwipeGesture

> ID：12671974
> 
> 赞同：2
> 
> 时间：2012-10-01T10:59:14.513
> 
> 标签：objective-c, ios, ios5, ios4

嗨，我正在尝试使用 JTRevealSideBar 向拆分视图添加滑动手势，类似于 facebook iphone 应用程序。我无法在 SplitView 区域顶部添加 UIView 以添加滑动手势。您对这方面的想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:57:58.737

我建议你试试[PaperFold](https://github.com/honcheng/PaperFold-for-iOS.git "折纸")。您可以在 MultiFoldView 类中设置 numberOfFolds = 0 以禁用折叠效果

# php - 选择查询结构

> ID：12671976
> 
> 赞同：0
> 
> 时间：2012-10-01T10:59:22.810
> 
> 标签：php, mysql, sql

我有一个希望缩短的查询。

```
SELECT date1, date2, date3, date4, date5, date6, date7 FROM dates_db 
WHERE date1 =('$date1') OR date1 =('$date2') OR date1=('$date3') 
OR date1=('$date4') OR date1=('$date5') OR date1=('$date6') 
OR date1=('$date7') OR date2 =('$date1') OR date2 =('$date2') 
OR date2=('$date3') OR date2=('$date4') OR date2=('$date5')
OR date2=('$date6') OR date2=('$date7') OR date3 =('$date1') 
OR date3 =('$date2')OR date3=('$date3') OR date3=('$date4') 
OR date3=('$date5') OR date3=('$date6') OR date3=('$date7') 
```

等等日期 1-7 。

这个查询很大，有什么办法可以缩短它。这适用于日历类型设计，它正在寻找不同日期的数据条目。因此，如果日期匹配，则会将其发布到日历中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:00:51.303

您可以像这样使用`IN`谓词而不是这些`OR`：

```
SELECT date1, date2, date3, date4, date5, date6, date7
FROM dates_db 
WHERE date1 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7')
  OR  date2 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7')
  OR  date3 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7')
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:03:04.487

试试这个，

```
 SELECT date1, date2, date3, date4, date5, date6, date7 FROM dates_db 
 WHERE date1 IN ('$date1','$date2',...) OR date2 IN('$date1','$date2',...).... 
```

或者，

```
$dates = $date1.",".$date2.",".$date3.",".........;
 SELECT date1, date2, date3, date4, date5, date6, date7 FROM dates_db 
 WHERE date1 IN ('$dates') OR date2 IN('$dates')..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:02:13.673

也许你会用`IN`

```
SELECT...
FROM...
WHERE   date1 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7') OR
        date2 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7') OR
        date3 IN ('$date1','$date2','$date3','$date4','$date5','$date6','$date7') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:05:48.493

这是一个仅列出`$date`一次变量的选项。MySQL 语法可能需要一些修改：

```
WITH search_dates (date) as (
     values ('$date1'),('$date2'),...
)
SELECT DISTINCT date1, date2, date3, date4, date5, date6, date7 FROM dates_db 
    INNER JOIN search_dates ON 
        date1 = date OR
        date2 = date OR ...
        date7 = date; 
```

在理想情况下，您的`dates_db`表格的结构也会有所不同，因此每一行仅包含一个日期。

# javascript - Mobiscroll 将日期和时间格式化为 Dayday:hour:minute

> ID：12671978
> 
> 赞同：1
> 
> 时间：2012-10-01T10:59:23.600
> 
> 标签：javascript, mobiscroll

我正在尝试找到一种方法将日期/日期/月份组合成第一个轮子上的一个字符串：

```
 1st         2nd   3rd
+------------+----+----+
| thu 27 sep | 17 | 00 |
| fri 28 sep | 18 | 00 |
+------------+----+----+ 
```

第一个轮子在哪里：日/日期/月，第二个：小时，第三个：分钟有任何线索吗？

一个后续问题是：如何让今天显示为“今天”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:27:59.717

您可以通过生成自己的自定义轮子来实现这一点。我在这里举了一个例子：

[http://jsfiddle.net/Rd5m8/1/](http://jsfiddle.net/Rd5m8/1/)

如果要将今天显示为“今天”，则必须在 parseValue 和 formatResult 中重写一些内容。如果您有任何困难，请告诉我！

# android - 媒体提取器显示“无法实例化提取器”

> ID：12671989
> 
> 赞同：3
> 
> 时间：2012-10-01T11:00:17.397
> 
> 标签：android, android-layout, android-intent

我正在尝试在 android 上开发用于 OGG 文件格式音频流的媒体提取器。我在谷歌文档的帮助下编写了一些代码。但它根本不起作用。可能是我写了错误的代码或语法，因为我是学生。 **它显示我无法实例化提取器**

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

MediaExtractor extractor = new MediaExtractor();
extractor.setDataSource("http://examplelink.com/ogg");// I cant put real link so sorry for that
int numTracks = extractor.getTrackCount();
for (int i = 0; i < numTracks; ++i) {
    MediaFormat format = extractor.getTrackFormat(i);
    String mime = format.getString(MediaFormat.KEY_MIME);
    extractor.selectTrack(i);

    ByteBuffer inputBuffer = ByteBuffer.allocate(1024);
    while (extractor.readSampleData(inputBuffer,0) >= 0) {
            int trackIndex = (int) extractor.getSampleTime();
            long presentationTimeUs = extractor.getSampleTime();
    }

    MediaCodec codec = MediaCodec.createDecoderByType(mime);
    codec.configure(format, null /* surface */, null /* crypto */, 0 /* flags */);
    codec.start();
    ByteBuffer[] inputBuffers = codec.getInputBuffers();
    ByteBuffer[] outputBuffers = codec.getOutputBuffers();
    format = codec.getOutputFormat();
    Long timeoutUs=(long) 1;
    for (;;) {
        int inputBufferIndex = codec.dequeueInputBuffer(timeoutUs);
        if (inputBufferIndex >= 0) {
            // fill inputBuffers[inputBufferIndex] with valid data
            codec.queueInputBuffer(inputBufferIndex, 0, 128, 0,0);
        }
        MediaCodec.BufferInfo info = new BufferInfo();
        int outputBufferIndex = codec.dequeueOutputBuffer(info, timeoutUs);
        if (outputBufferIndex >= 0) {
            // outputBuffer is ready to be processed or rendered.
            codec.releaseOutputBuffer(outputBufferIndex, false);
        } else if (outputBufferIndex == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
            outputBuffers = codec.getOutputBuffers();
        } else if (outputBufferIndex == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
            // Subsequent data will conform to new format.
            format = codec.getOutputFormat();
            AudioTrack mAudioTrack = null;
            mAudioTrack.setPlaybackRate(format.getInteger(MediaFormat.KEY_SAMPLE_RATE));
        }
        codec.stop();
        codec.release();
        codec = null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T04:12:53.617

我假设您的问题是“为什么它根本不起作用？” 通常，这是一个太大的问题，但在这种情况下，在我看来，您似乎根本不了解 MediaExtractor 和 MediaCodec 是如何工作的。

不过，也不全是你的错。说得好听点，文档很神秘。但是我已经成功地以这种方式播放音频文件。

我的方案假设 MediaCodec 实现了一个异步缓冲区队列。这个队列中似乎有大约 4 个缓冲区。

所以我使用了 2 个线程：一个线程将 MediaExtractor 中的数据放入队列，另一个线程从队列中取出解码后的音频并将其写入 AudioTrack。

例如，我需要非常小心地避免在查找期间出现死锁。最后我得到的代码比你的多得多。我不知道如何避免这种情况！

我正在考虑尝试视频。任何有用的参考资料将不胜感激！

大学教师

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:12:43.573

代码将在下面，这对我来说非常适合 JB 平台中的本地音频文件。

```
try{
  Extractor lExt = new MediaExtractor();
  lExt.setDataSource(file path); //I have tried with local file
  lExt.setTrack(0); //For local file only one track will be present
  MediaFormat format = lExt.getTrackFormat(0); //0 is the track ID
  String mime = format.getString(MediaFormat.KEY_MIME);
  MediaCodec codec = MediaCodec.createDecoderByType(mime);
  codec.configure(
       format,//format of input data ::decoder OR desired format of the output data:encoder
       null,//Specify a surface on which to render the output of this decoder
       null,//Specify a crypto object to facilitate secure decryption
       0 //For Decoding, encoding use: CONFIGURE_FLAG_ENCODE 
       );
  codec.start();
  codec.flush();

  //Get Input and Output buffers from codec
  inputBuffers = codec.getInputBuffers();
  outputBuffers = codec.getOutputBuffers(); 

  While(condition)
  {
      //Get Audio data from extractor
      int inputBufIndex = codec.dequeueInputBuffer(50);//Timeout set of 50 microsec
      if (inputBufIndex >= 0) 
      {
           ByteBuffer dstBuf = inputBuffers[inputBufIndex]; 
           int sampleSize = extractor.readSampleData(dstBuf, 0);
           long presentationTimeUs = extractor.getSampleTime();

           codec.queueInputBuffer(inputBufIndex,
                           0, //offset
                           sampleSize,
                           presentationTimeUs,
                           0); //Use appropriate flag value
           extractor.advance();
        }

      //Use codec to decode the data -- handle end of stream properly
        MediaCodec.BufferInfo info = new  MediaCodec.BufferInfo();
        info.set(0,0,0,0);
        final int res = codec.dequeueOutputBuffer(info, 20000);
        if (res >= 0) 
        {
            int outputBufIndex = res;
            ByteBuffer buf = outputBuffers[outputBufIndex];

            byte[] chunk = new byte[info.size];
            buf.get(chunk); // Read the buffer all at once
            buf.clear(); // ** MUST DO!!! OTHERWISE THE NEXT TIME YOU GET THIS SAME BUFFER BAD THINGS WILL HAPPEN

            if (chunk.length > 0) 
               //Use this chunk as it contains decoded audio dat            
            codec.releaseOutputBuffer(outputBufIndex, false /* render */); 
        } 
        else if (res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) 
            outputBuffers = codec.getOutputBuffers();
  }
  codec.stop();
  codec.release();
  lExt.release();
}
catch(Exception ex)... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T01:18:21.607

将数据源设置为远程 URL 需要在 AndroidManifest.xml 中声明**android.permission.INTERNET**权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T16:04:33.127

尝试将已打开文件的文件描述符传递给它，而不是文件路径。当我遇到这个问题时，它对我有用。我不知道为什么。

# ruby - Ruby 哈希到方法参数

> ID：12671991
> 
> 赞同：0
> 
> 时间：2012-10-01T11:00:25.420
> 
> 标签：ruby

我有：

```
hash = {
  key1:12,
  key2:78
} 
```

我想在这种方法中将哈希转换为单独的参数，例如：

```
SomeClass.method(key1:12, key2:78) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:06:50.693

Ruby 没有像 Objective-C 那样的命名参数，但是你可以通过 Hash 来模拟它。在 Ruby 1.9 中，考虑到新的 Hash 语法，这甚至更好。

```
SomeClass.some_method(key1:12, key2:78) 
```

基本上意味着`some_method`接受一个哈希作为参数

```
def SomeClass
  def some_method(args)
    p(args)
  end
end 
```

然后如果你打电话

```
SomeClass.some_method(key1: 12, key2: 78) 
```

它实际上意味着

```
SomeClass.some_method({ key1: 12, key2: 78 }) 
```

所以相当于传递哈希

```
hash = {
  key1: 12,
  key2: 78,
}

SomeClass.some_method(hash) 
```

# c# - 我可以声明自定义类型（枚举除外）的编译时间常数吗？

> ID：12671995
> 
> 赞同：1
> 
> 时间：2012-10-01T11:01:00.147
> 
> 标签：c#, immutability

考虑这种类型，它是否像我能做到的那样不可变？

```
public struct SomeType
{
    public const int OneValue = 1;

    private static readonly one = new SomeType(one);

    private readonly int value;

    private SomeType(int value)
    {
        this.value = value;
    }

    public static One
    {
        get { return this.one; }
    }

    public static implicit operator int(SomeType source)
    {
        return source.value;
    }

    public void SomeSpecialization()
    {
    }
} 
```

这让我可以做到这一点，

```
var one = SomeType.One;

switch (one)
{
    case SomeType.OneValue:
        ...
} 
```

但是，无论如何我可以删除

```
public static implicit operator int(SomeType source)
    {
        return source.value;
    } 
```

从类型定义中并使用这样的类型？

```
var one = SomeType.One;

switch (one)
{
    case SomeType.One:
        ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:21:08.510

语句中的`case`表达式`switch`只能是某些内置类型和`enum`s 的编译时常量。所以答案是否定的：无论你用你的`SomeType`（没有把它变成一个`enum`）做什么，你都不能使用`SomeType`对象作为`case`表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:29:23.630

如果您不使用`Enum`，请尝试静态类：

```
public static class SomeType
{
    public const int OneValue = 1;
    public const int SecondValue = 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:23:20.347

这有帮助吗？

```
public struct SomeType<T> where T : IConvertible
{
    private static readonly T _one = (T)Convert.ChangeType(1, typeof(T));
    public static T One { get { return _one; } }
} 
```

# servicestack - 从 servicestack 中的数据库返回数据

> ID：12671997
> 
> 赞同：1
> 
> 时间：2012-10-01T11:01:07.693
> 
> 标签：servicestack

我已经阅读了很多关于 ServiceStack 的信息并且喜欢它的简单性。使用编译到程序中的固定类很容易，但我有更灵活的需求。

一个简单的 Web 服务，您可以在其中向数据库提问。

```
<NAV>
<message>GET 300</message>
</NAV> 
```

数据库以 xml 响应：

```
<NAV>
<Contacts>

<Contact>
<No>123</No>
<Name>jan</Name>
</Contact>

<Contact>
<No>334</No>
<Name>John</Name>
</Contact>

</Contacts>
</NAV> 
```

这可以由 servicestack 作为 Json 返回吗？

注意：根据数据库可以返回的问题：

```
<Contacts> 
<Customers>
etc. 
```

取决于问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:03:38.420

如果您的数据库使用 XML 响应，则无法应用进一步的转换，并且响应将是未触及的 XML 文字。

为了支持其他 ServiceStack 内置格式，您需要将 XML 反序列化为 C# POCO 并将其返回。

# javascript - 我的 jQuery 弹出插件按钮调用错误的回调

> ID：12671998
> 
> 赞同：0
> 
> 时间：2012-10-01T11:01:13.343
> 
> 标签：javascript, jquery, popup

我创建了一个使用 AJAX 打开内部弹出窗口的 jQuery 插件。

在调用弹出窗口时，我可以在弹出窗口底部设置操作按钮，并带有自定义回调。

这是生成按钮并设置回调的代码：

```
for(i in settings.buttons)
{
var button = settings.buttons[i];

$('<a></a>', {
    text: button.label,
    href: '#',
    click: function(e){
        e.preventDefault();
        button.callback.call();
    },
    'class': (typeof button.color == 'undefined' ? '' : button.color)
}).appendTo(popup.buttons);
} 
```

问题是，代码调用了错误的回调，例如，如果我设置了 2 个按钮，其中一个触发关闭弹出窗口，而另一个复制某些输入的值，任何按钮都会触发第二个回调。

我应该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:10:27.117

由于单击功能将在`for in`循环完成后执行。 `button.callback.call();`将始终调用最后一个按钮回调。

解决方案：保存上下文。

```
 function keepContext(button) {
      $('<a></a>', {
        text : button.label,
        href : '#',
        click : function(e) {
            e.preventDefault();
            button.callback.call();
        },
        'class' : (typeof button.color == 'undefined' ? '' : button.color)
    }).appendTo(popup.buttons);    
}
for (i in settings.buttons) {
    keepContext(settings.buttons[i]);
} 
```