# StackOverflow 问答 14490000-14490999

# java - 在这种方法中使用完整的 Java EE 与仅使用 Web 和持久层是否正确？

> ID：14490001
> 
> 赞同：3
> 
> 时间：2013-01-23T21:46:25.853
> 
> 标签：java, web

我想开发一个管理运动统计数据的网站。让我们说足球数据。我想为公众发布一个带有漂亮演示的前端站点，无需登录。

我正在为足球联赛的后台办公室建立第二个站点。该网站是足球联赛注册他们的比赛注释表的地方，因此每个球员的统计数据将从该比赛中计算出来。联盟将在这里注册教练、类别（年龄范围）和球员。

我认为使用完整的 Java EE 架构。开发一个前端和后端 Web 应用程序通用的 EJB 项目，以及我提到的前端和后端办公室。我计划在两个站点都使用检票口。但我打算用 Glassfish 3 在 1GB RAM VPS 上发布。

另一种选择是制作一个公共项目（eclipse），并使用该公共项目制作 2 个 webapp。该公共项目是一个 JPA 项目，并且有一些公共依赖项（Apache commons lang），我将在所有项目中使用它们。因此，部署到 tomcat 并变得简单。

所以我有点困惑，有一些具体的问题：

1.  我应该使用静态方法（我可以在 tomcat 上部署，我猜 RAM 使用量更少），o 无状态会话 Bean（需要 EE 应用服务器）服务？
2.  我应该将 wicket 用于前端，因为 Wicket 是有状态的并且我在这里是无状态的吗？我在哪里可以找到一些无状态检票口教程？

我问，因为我不清楚何时使用 bean 是不必要的。我应该使用完整的 EE 还是只使用 Web 和持久性层。

-----更新------ 我实际上是唯一的开发人员，我只有网络层检票口的经验。

我不确定是否将 wicket 用于前端，因为它是有状态的，前端只会向所有人显示信息。

Web 层和前端的分离是因为我有不同的设计/站点模板，一个更漂亮 (FE) 风格的 mlb.com 和另一个更基于管理员（漂亮的表单和组件）。是我购买的两个网站模板。

这是一个我想开发和学习的项目。它是一个商业应用程序，我预见到扩展这个应用程序支持其他运动，如网球、篮球等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:14:08.547

每个开发人员都会有自己的偏好和建议。

从我个人的开发经验来看，在从 EJB 2.1 到 EJB 3.0 规范的过渡过程中，EJB 变得不那么“沉重/笨重”了。

此时，EJB 3.0 只是带注释的 POJO。但是，我不一定推荐使用无状态会话 EJB，除非您认为您将需要 EJB 容器提供的特性（例如容器管理的事务/回滚）。

`Tomcat`如果您想要一个无需 Java EE 容器即可运行的完整堆栈，我会推荐[Grails](http://www.grails.org/)。它将包括您的 Web 层（以 GSP 和 Taglibs 的形式），还将提供您的持久层 (GORM)，您可以进行非常快速的开发。

现在，老实说，1 GB RAM 对于 Grails 来说有点轻。我相信它会运行，但如果我运行 Grails 堆栈，我至少需要 2 GB RAM。

您还可以考虑将[Spring Web MVC](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)用于您的 Web 层，将 Spring bean 用于您的服务层，并为您的持久层插入 JPA/Hibernate。

我个人对 Wicket 并不熟悉（我知道，但没有任何实践经验）。但是，一些快速搜索显示了有关将其与 Spring 集成的文章。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T22:14:42.580

如果是我，我会考虑使用 Spring 框架。我将使用 JPA 创建一个持久层，2 个客户端应用程序使用 Spring MVC 和任何您想要的表示技术与该持久层通信（使用 Velocity、Freemarker、JSP 保持简单。通过 Tomcat 部署。我认为没有理由使用EE——根据您的描述，您只需要一个 servlet 容器，没有其他 Java EE 服务器带来的东西。

# android - 使用什么方法从我的数据库中导出特定数据并将其加载到具有相同应用程序的不同手机上的数据库中

> ID：14490003
> 
> 赞同：0
> 
> 时间：2013-01-23T21:46:29.787
> 
> 标签：android, sqlite

所以我希望我的应用程序能够让用户能够从数据库中导出值（在这种情况下是用户创建的条目）并将它们提供给具有相同应用程序的另一部手机，以便他们可以导入这些值并直接插入他们在他们的数据库中，所以两部手机都将拥有相同的数据。数据不是整个数据库，而只是其中的一部分，具体取决于用户想要共享的内容。我不想使用网络服务，因为我想要一个有形的文件来工作。所以说我将我的数据库值导出到一个文件中并通过电子邮件发送它们，但我希望用户能够选择导出文件的文件夹并亲自去标准文本消息应用程序并附加将文件添加到短信中，就像他们将图片一样。在这种情况下我有什么选择？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:29:32.493

我认为最好的方法是生成某种形式的可解析文件来表示您希望共享的数据，然后您可以将其保存到文件中（我个人会使用 JSON，但也可以使用 XML 等）。

要生成所需的 JSON，您可以遵循与下面类似的方法（除了明显的“MyDataClass”之外，下面的所有类都包含在 Android SDK 或 Java 中）

```
 JSONArray export = new JSONArray();
    for(MyDataClass model : exportObjects)
    {
        JSONObject obj = new JSONObject();
        obj.put("attribute1", model.getAttribute1());
        obj.put("attribute2", model.getAttribute2());
        ...

        export.put(obj);
    }

    String jsonString = export.toString(); 
```

这将创建一个有效的 JSON 字符串，您将能够使用标准 Java 文件类和清单中的适当使用权限 (android.permission.WRITE_ETERNAL_STORAGE) 将其写入文件

```
 File outFile = new File("Absolute save path");
    outFile.getParentFile().mkdirs();               //Ensure the parent directory exists
    FileOutputStream outputStream = 
            new FileOutputStream(outFile);          //Create a stream to access the file
    outputStream.write(jsonString.getBytes());      //Write the data
    outputStream.flush();
    outputStream.close();                           //Cleanup 
```

您如何确定“绝对保存路径”的值很大程度上取决于您的个人偏好，并且可以通过多种方式获得，例如

*   在代码中指定/生成路径
*   提示用户将文本保存位置或文件名与代码中提供的绝对目录组合（请注意，UX 不是我的强项：P）

我还假设您可以使用 Intent 启动文件浏览器活动以指定保存位置或外部库，例如[此处](https://stackoverflow.com/questions/7856959/android-file-chooser)

然后，接收应用程序将使用类似于以下内容的内容将此文件加载到字符串中

```
 String loadedJSON = "";
    File inFile = new File("Absolute path");
    FileInputStream fis = new FileInputStream(inFile);
    byte[] buffer = new byte[1024];
    int readBytes;
    while((readBytes = fis.read(buffer, 0, 1024))>=0)
    {
        loadedJSON.concat(new String(buffer, 0, readBytes));
    }
    fis.close(); 
```

然后简单的把第一步创建 JSONArray 的过程倒过来

```
 List<MyDataClass> objectModels = new ArrayList<MyDataClass>();
    JSONArray parsedData = new JSONArray(loadedJSON);
    for(int i = 0; i<parsedData.length(); ++i)
    {
        JSONObject jObj = parsedData.getJSONObject(i);
        MyDataClass newObjectModel = new MyDataClass();
        newObjectModel.setAttribute1(jObj.getString("attribute1"));
        newObjectModel.setAttribute2(jObj.getInt("attribute2"));
        ...

        objectModels.add(newObjectModel);
    } 
```

然后将这些解析的对象模型中的每一个插入到您的数据库中，但最适合您的应用程序。

# php - 如果页面打开，php脚本更改按钮类

> ID：14490011
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:02.307
> 
> 标签：php, html, css, class, button

我试图让这个脚本工作，但不幸的是无事可做......我也认为有更好的方法来做到这一点，但不知道哪个？

所以我希望在打开的页面上按钮保持悬停状态，所以我创建了一个看起来像按钮悬停的类，并说如果当前页面名称对应于“此按钮”链接，则 php 应用此类。

```
$currentpath = basename(__FILE__); 
```

在我包含 header.php 之前在每个页面上设置

谢谢！

PHP 和 HTML：

```
<?h
$o = "/ita/o.h";
$ = "/ita/.h";
$a = "/ita/a.h";
$s = "/ita/s.h";
$st = "/ita/st.h";
$p = "/ita/p";
$t = "/ita/t";
$c = "/ita/c";
?>

<div id="button"> 
  <ul> 
    <li><a href=<?=$o?> class="<?php if($currentpath == basename($o)){echo("buttonon");} ?>">o</a></li>
    <li><a href=<?=$p?> class="<?php if($currentpath == basename($p)){echo("buttonon");} ?>">p</a></li>
    <li><a href=<?=$a?> class="<?php if($currentpath == basename($a)){echo("buttonon");} ?>">a</a></li>
    <li><a href=<?=$s?> class="<?php if($currentpath == basename($s)){echo("buttonon");} ?>">s</a></li>
    <li><a href=<?=$st?> class="<?php if($currentpath == basename($st)){echo("buttonon");} ?>">st</a></li>
    <li><a href=<?=$p?> class="<?php if($currentpath == basename($p)){echo("buttonon");} ?>">p</a></li>
    <li><a href=<?=$t?> class="<?php if($currentpath == basename($t)){echo("buttonon");} ?>">t</a></li>
    <li><a href=<?=$c?> class="<?php if($currentpath == basename($c)){echo("buttonon");} ?>">c</a></li>
  </ul> 
</div> 
```

CSS：

```
#button ul { 
        margin: 0;
        padding: 0; 
        list-style-type: none; 
        text-align: center; 
        background-color: #F00;
} 
#button ul li {  
        display: inline; 
} 
#button ul li a { 
        display:inline-block;
        color:#FFF;
        font-family:Calibri;
        font-size:18px;
        font-weight:bold;
        padding:4px 15px 4px 15px;
        text-decoration:none;
        font-variant:small-caps;
} 
#button ul li a:hover { 
        background-color:#F00;
        color:#02346F;
        padding:4px 15px 4px 15px;
        font-size:18px;
        font-weight:bolder;
}

.buttonon { 
        background-color:#F00;
        display:inline-block;
        font-family:Calibri;
        font-size:18px;
        font-weight:bold;
        text-decoration:none;
        font-variant:small-caps;
        color:#02346F;
        padding:4px 15px 4px 15px;
        font-size:18px;
        font-weight:bolder;
} 
```

编辑：我添加了 $currentpath 的定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:52:37.960

假设`$currentpath`在您的代码中的其他地方定义：

使用 basename() 将不起作用，因为您有子目录，并且 basename() 不返回子目录。

你可以搜索一个子字符串：

```
<?php if(strpos($currentpath, $prezzi) !== false){echo("buttonselected");} ?> 
```

# c# - HttpResponse 和 HttpContext

> ID：14490015
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:31.090
> 
> 标签：c#, asp.net, vb.net

我目前有一个调用`httpResponse.End()`来结束请求的应用程序，但是，按照微软的建议并防止它抛出异常，我试图将其更改为`HttpContext.CompleteRequest`，

然而，我的问题是，`HttpContext`对象是什么？我在哪里可以在控制器中获取它？

编辑：我最初发布了一个类似的问题，为了更改标题，我删除了问题并尝试再次询问（可能有更好的方法）。StackOverflow 阻止我这样做，因为它是“重复的”，尽管我已经删除了它。添加这个，所以它允许我发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:51:00.293

`System.Web.HttpContext`

它是静态的（或者至少*看起来*是这样）并且可以在**MVC Controllers**、**ASP.NET Web 表单**中访问，我假设 ASP.NET 网页（没有使用过）。

该`Current`属性使您可以访问 Session、Cache 以及与**活动 Web 上下文**相关联的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T21:51:37.397

System.Web.HttpContext.Current 将为您带来当前的 httpContext

# javascript - 获取 JQuery 脚本以在字段被选项卡时运行

> ID：14490017
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:31.200
> 
> 标签：javascript, jquery, web, user-experience, contact-form

我有一个在单击时运行 JQuery 脚本的字段。这是表单中的一个字段。

但是，如果该字段被标签到，我需要运行脚本，正如一些用户喜欢做的那样。

这是目前我的脚本

```
Query(function($){
$('span.website input.url').one("click", function() {
$('span.website input.url').val($('span.website input.url').val() + 'http://');})
}); 
```

我怎样才能改变它以使该字段被标记为？

万分感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T21:48:38.847

我认为你需要绑定到`focus`而不是`click`

```
$('span.website input.url').one("click"... 
```

到

```
$('span.website input.url').one("focus"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:51:00.890

你想使用 jQuery 的焦点：

[http://api.jquery.com/focus/](http://api.jquery.com/focus/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:00:54.683

将功能分配给单击和焦点或“选项卡”事件的代码可能像这样

```
Query(function($){
    function aName () {
        $('span.website input.url').val($('span.website input.url').val() + 'http://');
    }
    $('span.website input.url').one("click", aName);
    $('span.website input.url').one("focus", aName);
}); 
```

让我知道它是否适合您。

# cocos2d-iphone - Cocos2d - 有 WiFi 时才启动 App

> ID：14490020
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:39.947
> 
> 标签：cocos2d-iphone

上次我在这里有一个问题[Cocos2d - purgeIdleCellConnections Error: App is crashing](https://stackoverflow.com/questions/14451250/cocos2d-purgeidlecellconnections-error-app-is-crashing#comment20179281_14451250) but didn't get any answer。现在，我正在尝试实现仅在有 WiFi 连接时运行我的应用程序。这是一个Cocos2d游戏项目，有没有例子可以在App启动后检查WiFi连接？或者，任何指导链接？

# java - 扫描代码库以使用已弃用的方法

> ID：14490021
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:40.390
> 
> 标签：java, eclipse, deprecated, eclipse-jdt

我的任务是开发一个工具来扫描大量 Java 项目（约 7000 个`.java`文件）以使用已弃用的方法/属性/API。已指定该工具一次扫描单个文件，执行一些分析，并输出有问题的文件列表，以及不推荐使用的代码出现的行号。我一直在使用 Eclipse JDT Java 解析器来实现这一点，但是我似乎无法弄清楚这一点。

因为每个文件一次扫描一个，编译器不知道哪些方法被弃用，哪些不是，所以我不能只调用某个`isDeprecated()`方法就这样。

我编制了要在代码中查找的所有已弃用方法的列表，并针对代码库中的每个方法调用（有很多）进行检查，但这是一个丑陋的解决方案，并且产生了令人无法接受的大量错误由于解析器的限制或我对解析器知识的限制，积极的一面。

我是否能够构建每个单独的项目并将编译器警告输出到某个`.txt`文件或其他东西？这是我第一次处理这种规模的项目，所以我不太确定这样的事情是如何运作的。这并不完全符合规范，我想这会相当耗时，但如果这就是它所需要的，那么这就是它所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:35:50.160

Eclipse 已经为您做到了。您只需要启用[编译器警告](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/compiler/ref-preferences-errors-warnings.htm&cp=1_4_2_0_3_1) `Java development user guide > Reference > Preferences > Java > Compiler > Deprecated API`

如果您不知道，Eclipse 编译器也可以在 Eclipse IDE 之外使用，说明可以在[Eclipse 帮助](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/tasks/task-ant_javac_adapter.htm?cp=1_3_8_1)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:29:25.410

有趣的问题！您说您编译了要在代码中查找的所有已弃用方法的列表，并针对代码库中的每个方法调用进行检查。

如果您使用 JDT，我认为这是一个很好的方法。可以改进的是在解析目标库/包时获取不推荐使用的方法及其相应的类和包。例如，如果你解析 SDK，你会得到所有不推荐使用的方法及其对应的类和包。使用这些限定的方法名称，您可以通过匹配方法、类和包的名称来搜索大量 Java 项目。这应该会大大减少误报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T09:19:33.000

非常有趣的是，您尝试解决的问题是我在工作中遇到的确切问题（以及与此相关的更多问题）……我想我有一个对您有用的好解决方案。

**第 1 步：使用爬虫之类**的程序构建文件，此爬虫的目的是创建一个文件，例如 csv 文件（在工作场所很常见），其中包含 api 不推荐使用的所有功能，（方法、字段，接口，类，构造函数等）。构建此文件不适合初学者，但如果您有一些经验，可以通过 3-4 小时的工作完成。

第 2 步：在您从第 1 步获得文件后，对于您需要检查扫描的每个 java 文件，您需要做的是将其与第 1 步中的文件进行比较，如果您的第 1 步中的数据集已更新并且编程良好，那么你不会错过任何东西...

第 3 步：输出列表 - 我将把它留给你作为练习。玩得开心 ！

直觉：使用简单的 html 解析器（例如 jsoup 或 json）使用 Java 或您喜欢的任何语言编写数据集，然后编写一个 bash 脚本来比较数据集和您需要扫描的 .java 文件。在脚本中 - 为每个使用已弃用 api 的 .java 创建一个 .txt 文件，其中包含有关此用途的所需信息。祝你好运。

# java - 如何使用 Mp4parser 从 iTunes 视频中获取 avcC atom

> ID：14490022
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:43.530
> 
> 标签：java, mp4, mp4parser

使用 java 的 mp4parser 库读取源自 iTunes 的文件时，有没有办法访问 avcC 原子？我已经在一些自定义代码中使用 pasp atom 手动完成了这项工作，但是在切换到这个库后，我失去了对数据的访问权限。

avcC 原子的已知路径：

*   /moov/trak/mdia/minf/stbl/stsd/avc1/avcC
*   /moov/trak/mdia/minf/stbl/stsd/avc1/pasp/avcC
*   /moov/trak/mdia/minf/stbl/stsd/drmi/avcC

MP4Parser [https://github.com/sannies/mp4parser](https://github.com/sannies/mp4parser)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:57:22.200

一个有效的 quicktime 文件的 avcC atom 永远不能在 pasp atom 内。avcC 原子可以在 pasp 旁边，但它不能在 pasp 中，因为 pasp 框不包含其他框。您可以使用 Path 类来轻松访问（它知道一些正则表达式）：

```
public static void main(String[] args) throws IOException {
    IsoFile isoFile = new IsoFile("video.mp4");
    AvcConfigurationBox avcC = Path.getPath(isoFile, "/moov/trak/mdia/minf/stbl/stsd/.../avcC");
} 
```

所有 AVC 配置框，无论其父框。

# java - 了解 Jetty 的内存使用情况

> ID：14490024
> 
> 赞同：6
> 
> 时间：2013-01-23T21:47:56.400
> 
> 标签：java, memory, jetty

我有一个 Jetty 服务器，用于我正在开发的应用程序的 websocket 连接。唯一的问题是 Jetty 消耗了太多的虚拟内存（！2.5GB 的虚拟内存）和大约 650RES。

我的问题是，如上所述，大部分内存（大约 12gb）不是堆大小，因此分析它并理解正在发生的事情更加困难。

您对如何了解 12gb 消耗的来源以及如何找出内存泄漏或服务器的任何其他问题有任何提示吗？

我想澄清虚拟内存的含义（因为我的理解可能是错误的）。当我运行顶部时，虚拟内存是“VIRT”。这是我得到的：

```
PID USER PR  NI  VIRT  RES  SHR S   %CPU %MEM  TIME+  COMMAND                                        
-------------------------------------------------------------                                        
9442 root 20 0   12.6g 603m  10m S   0    1.3   1:50.06 java 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:44:51.507

请粘贴您在启动时使用的 JVM 选项。如前所述，您可以使用 -Xmx 选项调整 JVM 使用的最大内存。

您的应用程序只使用了 603MB 的保留内存。所以看起来它不应该关心你。您可以通过使用“jmap”、启用 jmx 并通过 jconsole 连接或使用分析器来获取有关内存使用情况的一些详细信息。如果您想留在 *nix 领域，如果您的操作系统支持，您也可以尝试“免费”。

在您的情况下，Jetty 不占用 12,5 gig 的内存。它占用603MB。例如，谷歌搜索“virtual memory linux”，你应该得到大量关于虚拟内存和保留内存之间区别的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:20:04.003

虚拟内存在 64 位环境中几乎没有成本，所以我不确定问题是什么。常驻内存为 650 MB 或仅 MEM 的 1.3%。目前尚不清楚它正在使用大量内存。

对于 64 位 JVM，默认的最大堆大小是主内存的 1/4。如果您有 48 GB 的内存，您可能会发现默认堆大小为 12 GB，并且对于一些共享库、线程等，这可能导致虚拟内存大小为 12.5 GB。这并不意味着您有内存泄漏，或者您甚至有问题，但如果您愿意，您可以减少最大堆大小。

顺便说一句：您可以以不到 200 美元的价格购买 32 GB。如果你的内存不足，我会买更多。

# c# - 双外键生成

> ID：14490025
> 
> 赞同：0
> 
> 时间：2013-01-23T21:47:56.890
> 
> 标签：c#, ef-code-first, entity, entity-framework-5

[这是这个问题](https://stackoverflow.com/questions/14488654/foreign-key-duplicate-in-database)的后续问题，我遇到了类似的问题。但是现在默认外键约定解决了这个问题。

我现在的问题是（简而言之），我的迁移产生

int ReferencedEntityID; int ReferencedEntity_ReferencedEntityID;

其中一个是我模型中的整数属性，另一个是虚拟属性。

我的迁移产生了这个：

```
"dbo.Contracts",
            c => new
                {
                    ContractId = c.Int(nullable: false, identity: true),
                    PricePerUnit = c.Double(nullable: false),
                    Unit = c.Int(nullable: false),
                    Currency = c.Int(nullable: false),
                    ClientId = c.Int(nullable: false),
                    CompanyId = c.Int(nullable: false),
                    ArticleId = c.Int(nullable: false),
                    Client_ClientId = c.Int(),
                    Article_ArticleId = c.Int(),
                }) 
```

如您所见，Client & Article 被引用了两次。

这是我的模型

```
public class Client {
    public Client() { }

    [Key]
    public int ClientId { get; set; }
    public string Number { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string Memo { get; set; }
    public bool isMerchant { get; set; }

    public string Name
    {
        get
        {
            return string.Format("{0} {1}", FirstName, LastName);
        }
    }

    public int? MerchantReferenceId { get; set; }
    public virtual Client MerchantReference { get; set; }
    [Required]
    public int CompanyId { get; set; }
    public virtual Company Company { get; set; }
    public virtual ICollection<Contract> Contracts { get; set; }
    public virtual ICollection<Order> Orders { get; set; }
}

public class Article {

    public Article() { }

    [Key]
    public int ArticleId { get; set; }
    [Required]
    public string Code { get; set; }
    public string Name { get; set; }
    public bool TrackStock { get; set; }
    public int CurrentStock { get; set; }
    public double? Price { get; set; }

    [Required]
    public int CompanyId { get; set; }
    public virtual Company Company { get; set; }
    [Required]
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }

    public virtual ICollection<Contract> Contracts { get; set; }
    public virtual ICollection<Order> Orders { get; set; }
}

public class Contract {

    public Contract() { }

    [Key]
    public int ContractId { get; set; }
    public double PricePerUnit { get; set; }
    public int Unit { get; set; }
    public int Currency { get; set; }

    [Required]
    public int ClientId { get; set; }
  //  [ForeignKey("ClientId")]
    public virtual Client Client { get; set; }

    [Required]
    public int CompanyId { get; set; }
    //[ForeignKey("CompanyID")]
    public virtual Company Company { get; set; }

    [Required]
    public int ArticleId { get; set; }
   // [ForeignKey("ArticleId")]
    public virtual Article Article { get; set; }

} 
```

这是我的 OnModelCreating()

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
           // modelBuilder.Entity<Contract>().HasRequired(bm => bm.Company).WithMany().WillCascadeOnDelete(false);
            modelBuilder.Entity<Contract>().HasRequired(bm => bm.Article).WithMany().HasForeignKey(dl => dl.ArticleId).WillCascadeOnDelete(false);//.Map( dl => dl.MapKey("ArticleId"))
            modelBuilder.Entity<Contract>().HasRequired(bm => bm.Client).WithMany().HasForeignKey(dl => dl.ClientId).WillCascadeOnDelete(false);//.Map(dl => dl.MapKey("ClientId"))
            modelBuilder.Entity<Article>().HasRequired(bm => bm.Company).WithMany().HasForeignKey(dl => dl.CompanyId).WillCascadeOnDelete(false);//.Map(dl => dl.MapKey("CompanyId"))
            modelBuilder.Entity<Measurement>().HasRequired(bm => bm.Company).WithMany().HasForeignKey(dl => dl.CompanyId).WillCascadeOnDelete(false); //.Map(dl => dl.MapKey("CompanyId"))
            modelBuilder.Entity<Order>().HasRequired(bm => bm.Client).WithMany().HasForeignKey(dl => dl.ClientId).WillCascadeOnDelete(false); //.Map(dl => dl.MapKey("ClientId"))
            modelBuilder.Entity<Order>().HasRequired(bm => bm.Article).WithMany().HasForeignKey(dl => dl.ArticleId).WillCascadeOnDelete(false);//.Map(dl => dl.MapKey("ArticleId"))
            modelBuilder.Entity<IncomingMeasurement>().HasRequired(bm => bm.client).WithMany().HasForeignKey(dl => dl.ClientId).WillCascadeOnDelete(false);//.Map(dl => dl.MapKey("ClientId"))
            modelBuilder.Entity<Client>().HasOptional(c => c.MerchantReference).WithMany().HasForeignKey(dl => dl.MerchantReferenceId); //.Map(dl => dl.MapKey("MerchantReferenceId"))

            //Required fields

            base.OnModelCreating(modelBuilder);
        } 
```

我必须做什么才能创建它们：

*   必需的
*   两者都在我的数据库模式中的一个属性中（应该如此）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:58:17.623

可以，甚至建议`ArticleId`在“真实”引用中附带原始 FK 属性（如 ）。在 EF 中，这称为*外键关联*，而不是只有引用（如）的*独立关联*`Article.Company`。

因此，您可以保持模型保持原样。您只需要指定外键。

*我在您之前的问题*的模型中尝试了一些类，这产生了预期的结果：

```
modelBuilder.Entity<Article>().HasMany(a => a.Contracts)
    .WithRequired(c => c.Article)
    .HasForeignKey(c => c.ArticleID).WillCascadeOnDelete(false);
modelBuilder.Entity<Client>().HasMany(c => c.Contracts)
    .WithRequired(c => c.Client)
    .HasForeignKey(c => c.ClientID).WillCascadeOnDelete(false);
modelBuilder.Entity<Company>().HasMany(c => c.Articles)
    .WithRequired(a => a.Company)
    .HasForeignKey(c => c.CompanyID).WillCascadeOnDelete(false); 
```

请注意，我转过定义，因为当我按照您的方式进行操作时，`HasForeignKey`它仍然重复了 FK 字段。我不确定为什么。

# python - python manage.py runserver：AttributeError：“模块”对象没有属性“选择”

> ID：14490026
> 
> 赞同：1
> 
> 时间：2013-01-23T21:47:58.107
> 
> 标签：python, django, pypi

运行命令后，显示如下：

```
Validating models...

0 errors found

Django version 1.4.3, using settings 'app.settings'
Development server is running at localhost:8000/
Quit the server with CTRL-BREAK.
Unhandled exception in thread started by <bound method Command.inner_run of <dja
ngo.contrib.staticfiles.management.commands.runserver.Command object at 0x000000
00033BBD30>>
Traceback (most recent call last):
  File "c:\Python27\lib\site-packages\django-1.4.3-py2.7.egg\django\core\managem
ent\commands\runserver.py", line 111, in inner_run
    ipv6=self.use_ipv6, threading=threading)
  File "c:\Python27\lib\site-packages\django-1.4.3-py2.7.egg\django\core\servers
\basehttp.py", line 253, in run
    httpd.serve_forever()
  File "c:\Python27\Lib\SocketServer.py", line 225, in serve_forever
    r, w, e = select.select([self], [], [], poll_interval)
AttributeError: 'module' object has no attribute 'select' 
```

知道问题是什么吗？

我已经尝试再次卸载和安装（setuptools、pypi、django、requests）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T22:53:12.380

我在使用 Flask 应用程序时遇到了这个问题。

我意识到我创建了一个名为“select.py”的脚本，所以我不得不重命名它并删除“select.pyc”。

# ios - 选择时 UITableVIew 单元格上的图像

> ID：14490027
> 
> 赞同：0
> 
> 时间：2013-01-23T21:48:05.210
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我想在选择时在单元格上显示图像。我已经尝试了无数种方法来做到这一点，但都没有成功。我尝试将其添加到`didSelectRowAtIndexPath`：

```
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
cell.imageView.image = [UIImage imageNamed:@"deselected_image.png"];
cell.imageView.highlightedImage = [UIImage imageNamed:@"selected_image.png"]; 
```

但图像不会在推送时改变。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:52:31.167

您拥有的代码正在创建一个新的表格视图单元格 - 您需要检索当前选定的单元格。请尝试以下操作：

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.imageView.image = [UIImage imageNamed:@"deselected_image.png"];
    cell.imageView.highlightedImage = [UIImage imageNamed:@"selected_image.png"]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:40:38.303

我已根据要求将 UIColor 应用于每个单元格。您可以替换 UIColor 代码并应用图像。这是我的代码

```
- (void)tableView: (UITableView*)tableView willDisplayCell: (UITableViewCell*)cell forRowAtIndexPath: (NSIndexPath*)indexPath
{
    if(tableView==tblLanguage)
    {
           cell.backgroundView = [[UIView alloc] init];

          ((UIView *)cell.backgroundView).backgroundColor = !(indexPath.row % 2)?[UIColor colorWithRed:(float)231/255 green:(float)231/255 blue:(float)231/255 alpha:1.0]:[UIColor colorWithRed:(float)218/255 green:(float)218/255 blue:(float)218/255 alpha:1.0];
          ((UIView *)cell.backgroundView).alpha=1.0;
    //ilangSelectedIndex is set in the didselect row of the tableview delegate function
     if(ilangSelectedIndex==[indexPath row])
      {
            ((UIView *)cell.backgroundView).backgroundColor=[UIColor colorWithRed:(float)171/255 green:(float)177/255 blue:(float)213/255 alpha:1.0];       
       }
            cell.textLabel.backgroundColor = [UIColor clearColor];
            cell.detailTextLabel.backgroundColor = [UIColor clearColor];
     }

} 
```

在表格的选择功能中，您**将 ilangSelectedIndex 设置为**表格的 Indexpath.row并**重新加载表格**以查看效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:43:54.507

在 didSelectRowAtIndexPath 中尝试此代码：

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
cell.selectedBackgroundView=[[UIImageView alloc]init];
cell.backgroundView =[[UIImageView alloc] init];
((UIImageView *)cell.selectedBackgroundView).image=[UIImage imageNamed:@"selected.png"]; 
```

# d3.js - 在不刷新页面的情况下重新加载 TSV 文件

> ID：14490037
> 
> 赞同：4
> 
> 时间：2013-01-23T21:48:34.317
> 
> 标签：d3.js, tsv

我一直在寻找这个问题的答案一两天，但我还没有找到一个。我有一个外部应用程序，它定期修改 TSV 文件（添加数据）。我正在使用[基本折线图示例](http://bl.ocks.org/3883245)来显示数据，它看起来非常好：

![在此处输入图像描述](../Images/1edc9f07fef8405f87ea94dfbe8d6595.png)

现在我希望在更新 TSV 文件时更新数据。我希望能够对从 tsv 文件中提取的数据设置自动刷新，并在**不**刷新整个页面的情况下重新填充图表。

我尝试将当前代码包装在一个函数中并在该函数上调用 setInterval，但数据每次都保持不变（可能是因为它被缓存了？）。

理想情况下，这个问题的解决方案是一个可以随时调用更新的函数（基于用户事件、计时器等）。

任何关于实现相同目标的替代方法的想法、链接或建议将不胜感激！

作为一个额外的问题：我知道 D3 可能不是这种伪实时数据显示的正确选择。还有其他更适合这种事情的软件包吗？生成数据的应用程序是 C# 应用程序（以防万一）。

编辑：作为补充说明，想象一下这个例子，但数据是从文件中读取的：http: [//mbostock.github.com/d3/tutorial/bar-2.html](http://mbostock.github.com/d3/tutorial/bar-2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:29:24.493

If you are executing an Ajax call to fetch the data from the server and you think caching is a problem, you can try busting the cache by setting the `cache` parameter in [jquery's ajaxSetup](http://api.jquery.com/jQuery.ajax/) to `false` anywhere in your code:

```
$.ajaxSetup({cache: false}); 
```

From the docs:

> If set to false, it will force requested pages not to be cached by the browser. Note: Setting cache to false will only work correctly with HEAD and GET requests. It works by appending "_={timestamp}" to the GET parameters. The parameter is not needed for other types of requests, except in IE8 when a POST is made to a URL that has already been requested by a GET.

# node.js - nom 找不到 Redis 客户端

> ID：14490039
> 
> 赞同：1
> 
> 时间：2013-01-23T21:48:41.277
> 
> 标签：node.js, backbone.js, redis

我正在尝试按照 Tomas Davis 的Backbone.js[教程](https://www.youtube.com/watch?v=HsEw2i4wQMM)进行操作，但我无法让服务器运行。

他提供了一个启用了 CORS 的标准 node.js 服务器和一个 Redis 数据库。这是他的 GitHub 的链接：

--> [https://github.com/thomasdavis/video-backbone-beginner-server](https://github.com/thomasdavis/video-backbone-beginner-server)

我还解决了另一个问题，因此您必须更换：

```
nohm.setClient(redis); 
```

经过 ：

```
redis.on("connect", function() {
  nohm.setClient(redis);
  console.log("Nohm Connected to Redis Client");
}) 
```

修复后，Nohm 似乎连接到 Redis，但仍然无法正常工作。这是堆栈跟踪：

```
{ name: 'Nohm Error',
  message: 'Did not find a viable redis client in Nohm or the model: User' }

/node-projects/backbone/node_modules/nohm/lib/properties.js:27
  if (!this.properties[key]) {
                      ^
TypeError: Cannot read property 'firstname' of undefined
    at Nohm.property (/node-projects/backbone/node_modules/nohm/lib/properties.js:27:23)
    at Nohm.property (/node-projects/backbone/node_modules/nohm/lib/properties.js:22:23)
    at Object.<anonymous> (/node-projects/backbone/example_server.js:110:6)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

Redis 服务器进程已启动。有谁知道如何使服务器工作？先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T14:55:17.870

抱歉回复晚了，希望对大家有所帮助。

如果不知道 /node-projects/backbone/example_server.js:110 是什么，我无法 100% 确定这里的问题是什么。

但我最好的猜测是，当您等待连接时，您正在尝试使用 nohm 执行其他操作。然后 Noh 在设置客户端之前尝试访问客户端。

这会导致模型的 init 函数失败，从而无法正确初始化内部变量（以及其他属性）。

您需要等待所有模型交互，直到建立 redis 连接。或者您恢复到旧方法：

```
nohm.setClient(redis); 
```

如果我没记错的话，这应该让 redis 命令排队，直到建立连接。

# java - 字符串池行为

> ID：14490043
> 
> 赞同：8
> 
> 时间：2013-01-23T21:49:26.320
> 
> 标签：java, string, pool

我阅读了这个[关于 Java 的字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool) 并了解了字符串池的基本概念，但仍然不了解其行为。

首先：如果您直接分配值并且 s1 和 s2 都引用池中的同一个对象，则它可以工作

```
String s1 = "a" + "bc";
String s2 = "ab" + "c";
System.out.println("s1 == s2? " + (s1 == s2)); 
```

但是如果我更改字符串 s1+="d"，那么池应该有一个字符串对象“abcd”？那么当我更改 s2+="d" 时，它应该在池中找到字符串对象“abcd”并将该对象分配给 s2？但事实并非如此，它们也没有引用同一个对象。这是为什么？

```
String s1 = "abc";
String s2 = "abc";
System.out.println("s1 == s2? " + (s1 == s2));

s1 += "d";                  
s2 += "d";
System.out.println("s1 == s2? " + (s1 == s2)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T21:51:56.757

当您调用一个字符串时，保证会汇集`String.intern()`字符串。

```
String s1 = "abcd".intern();
String s2 = "abc";
s2 += "d";
s2 = s2.intern();
s1 == s2 // returns true 
```

当编译器看到一个常量时，它足够聪明地优化和汇集字符串文字，即：

```
String s1 = "abcd";
String s2 = "abcd";
s1 == s2 // returns true 
```

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)指出：

> 每个字符串文字都是对 String 类（第 4.3.3 节）实例（第 4.3.1 节、第 12.5 节）的引用（第 4.3 节）。字符串对象有一个常量值。字符串字面量——或者更一般地，作为常量表达式值的字符串（第 15.28 节）——是“内部的”，以便使用 String.intern 方法共享唯一的实例。

所以在 的情况下`s2 += "d"`，编译器没有你那么聪明，只是汇集了`"d"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T21:55:58.547

我不确定这一点，所以这几乎是猜测，但我怀疑第一个示例中可能存在一些编译器技巧（它是内联的并且很明显发生了什么），但它不够聪明在第二个例子中它关闭了（它不是那么明显）。

如果我是对的，编译器要么在编译`"a" + "bc"`时看到并简单地将其压缩到，`"abc"`要么它看到这两行并汇集字符串，因为它意识到它们将被使用。我赌的是前者。。

并非所有字符串都必须合并。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T22:05:08.200

See the documentation for [String#intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29). The last line there states:

> All literal strings and string-valued constant expressions are interned.

Your `+=` example is neither a literal string nor a string-valued constant expression, so it is not put in the String pool.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T22:05:36.277

The compiler can perform constant evaluation but not in the case where you modify the values

Try instead following and see what happens if you drop `final` from either variable.

```
final String s1 = "abc";
final String s2 = "abc";
System.out.println("s1 == s2? " + (s1 == s2));

String s3 = s1 + "d";                  
String s4 = s2 + "d";
System.out.println("s3 == s4? " + (s3 == s4)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T21:55:45.783

这是我的猜测：

字符串 s1 = "a" + "bc"; 字符串 s2 = "ab" + "c";

我认为这是编译时间，它们被确定为生成相同的字符串，因此只为两者制作了一个对象。

但是当你给它们都加上“d”时，这两个字符串是分开完成的（因为它是在实时完成的，可能会有异常中断它等等，所以它不能预先做）等等不会自动让它们引用一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T22:11:59.093

我认为这里发生的是： 1\. for String s1 = "a" + "bc"; 字符串 s2 = "ab" + "c"; Java 编译器足够聪明，知道 s1 和 s2 的字面值相同，因此编译器将它们指向字符串池中的相同字面值

1.  对于 s1 += "d";
    s2 += "d";

编译器无法知道 s1 和 s2 是否最终会成为相同的值，在运行时，除非您调用 String.intern()，否则 jvm 不会检查字符串文字池以查看该值是否已经存在。

# jms - JMS 持久订阅者持久消息不会持久保存到数据库

> ID：14490045
> 
> 赞同：0
> 
> 时间：2013-01-23T21:49:30.110
> 
> 标签：jms, weblogic, persistent

我正在使用 weblogic 10.3 。我正在尝试使用由 jdbc 存储（在 Oracle DB 中）支持的持久消息配置持久订阅。我有一个 MDB 作为持久订阅者正在监听的主题。在方案 1 下：如果我发送消息，它会到达 MDB。

在场景 2 下：我暂停 MDB，希望发送到主题的消息只要不被 MDB（它是唯一注册的持久订阅者）消耗，就会一直存在。但是当我确实将消息发送到主题时，它会短暂显示在那里然后消失（我使用 HermesJMS 看到它）。

我的印象是，在这种情况下，由于消息没有被 MDB 使用，它们将被记录到 JDBC 存储中，但是 oracle db 中的 WLSTORE 表也没有得到任何持久化的消息。

后来我发现消息确实显示在主题 > 持久订阅者 > 在管理控制台中显示消息中。

因此，显然发生的事情是主题不保留消息，但在其下注册的持久订阅会保留它，直到消息被消费。

问题-1）但是消息不去基于Oracle的jdbc存储的事实仍然没有意义吗？我在这里做错了什么？

问题-2）即使我确实恢复MDB以开始侦听消息，该主题仍会在持久订阅者（在管理控制台中）下显示所有消息仍然完好无损-我希望它们在处理后会从那里删除由唯一注册的持久订户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:32:18.573

消息不会出现在主题中，因为主题和队列是不同的通信模型。假设您有一个具有 2 个（持久）订阅者的持久主题：A 和 B。您希望他们都收到消息。为确保这一点，A 和 B 都必须确认他们收到了消息。这也是您重新传递所有消息的原因，重新连接后，您的 MDB 必须在消息上调用 commit()，以告诉服务器它已完成处理。这也解释了为什么主题本身不存储消息，它们是按持久消费者存储的。因为 A 可能会提交消息，但 B 不会（可能“离线”）。因此，您需要为每个消费者提供一份副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:48:24.703

我在进一步的测试中发现了一些有趣的东西——

对于问题 1) _ 即使我没有在 weblogic 10 中为 JMS 服务器配置 jdbc 存储，它也有自己的默认文件存储，无需任何配置即可始终运行。此文件存储用于存储持久订阅的持久消息，并且即使在服务器重新启动时，该存储也会保留消息。

如需更多阅读 - [http://docs.oracle.com/cd/E17904_01/web.1111/e13701/store.htm#i1130575](http://docs.oracle.com/cd/E17904_01/web.1111/e13701/store.htm#i1130575)

对于问题 2)_ 我的 MDB 期待某种格式的 XML 消息，在我的测试过程中为了简单起见，我开始发送小文本消息并且忘记了它们不会在 MDB 中成功处理。所以 MDB 在所有这些消息上都失败了，并且回滚了事务，这就是为什么当我恢复 MDB 时消息永远不会被删除的原因。

这几乎回答了我的两个问题。

# c# - Windows CE 6 中的 JSON 反序列化，使用 C# 到 Dictionary 或 Dictionary-like object

> ID：14490049
> 
> 赞同：0
> 
> 时间：2013-01-23T21:49:36.240
> 
> 标签：c#, .net, json, windows-ce, windows-embedded-compact

我正在尝试从 C# 中 Windows CE 6 上的 CakePHP Web 服务解码 JSON。JSON 的一个示例是：

```
"{
    "response":
    [
        {
            "Asset":
            {
                "name":"La Riviera","assetnumber":"16151","assettype":"Art","assignedlocation":"HOUSTON","currentlocation":"HOUSTON","properties":
                {
                    "Tag ID":"2331221","Last Seen":"","Status":"MISSING","Sold":"0","Layaway":"0","Artist":"Corbiere","Size":"80x80 cm","Calibration Date":""
                }
            }
        },
        {
            "Asset":
            {
                "name":"Port de Centuri-edit","assetnumber":"16150","assettype":"Art","assignedlocation":"HOUSTON","currentlocation":"HOUSTON","properties":
                {
                    "Tag ID":"3741923","Last Seen":"","Status":"MISSING","Sold":"1","Layaway":"0","Artist":"Corbiere","Size":"80x80 cm","Calibration Date":"2013-01-12"
                }
            }
        }
    ]
}" 
```

我想把它变成一个类似字典的对象，也许是字典，这样它就可以像

```
string name = json["response"][0]["Asset"]["name"]; 
```

我可以使用 JSON.net 的 LINQ JObject 类和 JObject.Parse 在 PC 上执行此操作，但是这些似乎不适用于 CE。对可以做到这一点的图书馆有什么建议吗？我宁愿不必为每种情况构建特定的 JSON 类。

# jquery - jQuery fadeIn() 在多个浏览器中出现“故障”或“突然切换”

> ID：14490052
> 
> 赞同：0
> 
> 时间：2013-01-23T21:49:44.467
> 
> 标签：jquery, fonts, opacity, fadein

我在最初隐藏的 div 中的特定元素上调用简单的 fadeIn()。

JavaScript：

```
$("#enclosingdiv").css({visibility: "visible"});
$("#element").fadeIn(1500); 
```

问题是在淡入淡出动画的持续时间内，渲染使文本看起来更粗或以不同的字体显示。动画完成后，它会恢复为原始字体/字体粗细，因此会出现“故障”或“突然切换”。我在 Chrome 和 IE 8 中都遇到过这个问题，并且在实现将不透明度从 0 设置为 100 的 animate(opacity) 方法时也遇到过这个问题（基本上与 fadeIn() 的效果相同）。

我做了很多研究并尝试了多种解决方案：

1.  禁用 IE 的过滤器（即使问题不是 IE 特定的）。
2.  为正在动画的元素添加了背景。
3.  将 -webkit-font-smoothing 设置为抗锯齿（没有明显效果）。
4.  尝试了一个 fadeTo(0.99) ，它只以与原始字体不同的未知或粗体字体暂停文本。

顺便说一句，我正在运行 Windows XP。

jsFiddle：http: [//jsfiddle.net/2Txk7/34/](http://jsfiddle.net/2Txk7/34/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:52:37.240

我发现了一种似乎效果很好的解决方法。然而，它并没有解决导致“故障”的fadeIn() 的潜在问题，但它提供了一个替代方案，我决定实施该替代方案，直到有人可以解决原始问题。

基本上，我在需要使用 z-index 属性淡入的元素顶部应用了与背景匹配的图像叠加层。因此，我没有让文本淡入，而是让具有更高 z-index 的图像实现了 fadeOut() 来显示底层文本。见下文：

```
#background {
position: absolute;
background-image: url(../images/background.jpg);
width: 100%;
height: 100%;
z-index: 1;
}
#text {
position: absolute;
left: 300px;
top: 100px;
z-index: 2;
}

$("#background").fadeOut(1500); 
```

与在文本上执行的相同功能相比，大多数浏览器似乎在处理图形的褪色或不透明度方面做得更好。

同样，我不认为这是理想的解决方案，但可以达到相同的结果。

# android - 带有 setText 的片段中的文本字符串

> ID：14490055
> 
> 赞同：1
> 
> 时间：2013-01-23T21:50:07.203
> 
> 标签：android, string, switch-statement, fragment

预先感谢您的任何帮助。

我想在片段中注入不同的字符串，但我不确定如何。

在这一点上，我借用的代码是：

公共类 MyFragment 扩展片段{

```
int mCurrentPage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Getting the arguments to the Bundle object */
    Bundle data = getArguments();

    /** Getting integer data of the key current_page from the bundle */
    mCurrentPage = data.getInt("current_page", 0);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
    View v = inflater.inflate(R.layout.myfragment_layout, container,false);
    TextView tv = (TextView ) v.findViewById(R.id.tv);
    tv.setMovementMethod(new ScrollingMovementMethod());
    tv.setText("You are viewing the page #" + mCurrentPage + "\n\n" +"\n\n" + "Swipe Horizontally left / right");       
    return tv;

} 
```

这就是我想要它做的，只是我想根据它所在的页面显示不同的文本字符串。我在此示例代码中看到可以更新页码 (mCurrentPage)，但我想将其与不同的文本字符串相关联。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:59:59.900

只需将 setText() 放入开关盒中，例如：

```
switch(mCurrentPage){
case 0:
   tv.setText("string one");
break;
case 1:
   tv.setText("string two");
break;
} 
```

# apache - 如何增加 apache 服务器的超时时间？

> ID：14490059
> 
> 赞同：0
> 
> 时间：2013-01-23T21:50:20.780
> 
> 标签：apache, timeout, wamp

我在我的电脑上运行 WAMP。效果很好。我有 1 个 php 例程，它从 1 个 mysql 数据库读取 5,000 条记录，并将该数字的 12 倍写入另一个 mysql 数据库。我使用来自 5,000 个姓名的数据并将其添加到第二个数据库中创建 12,000 条记录。这在 GoDaddys 服务器上运行良好，但在我测试时在本地机器上运行 30 秒后超时。

我研究了这个问题，发现了 KeepAlive 和 KeepAlive 超时指令。我在 httpd.conf 中将 KeepAlive 设置为 ON。我将 KeepAlive 设置为 60，但插入在 30 秒后仍然超时。

KeepAlive On KeepAliveTimeout 60

如何增加一堆 mysql 插入所允许的时间？

Apache 版本是 2.2.17。mysql是5.1.53，php是5.3.4。我尝试在 IE 9、Google Chrome v24、Firefox v18 和 Safari V5 上运行更新。全部超时。

在插入器完成之前，我怎样才能让它继续运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T10:08:42.547

我认为您应该在 php.ini 中设置变量 max_execution_time = 60 （通常在 somwhere 中找到： C:\wamp\bin\apache\apache2.4.9\bin ），然后重新启动所有 wamp 服务。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-28T14:42:40.433

我可以通过添加到 .htaccess 文件来解决我的类似问题：

```
php_value max_execution_time -1 
```

这会将执行时间设置为无穷大。

当然，这不应该在生产模式下设置。仅适用于您在本地主机上的情况。

# php - TIMEDIFF GROUP BY 涉及的天数

> ID：14490060
> 
> 赞同：1
> 
> 时间：2013-01-23T21:50:21.487
> 
> 标签：php, mysql

我正在寻找一种方法来获取在 MySQL 中按相关天数分组的两个时间戳的 TIMEDIFF。

```
SELECT TIMEDIFF('2012-01-02 10:00:00', '2012-01-01 10:00:00'); 
```

这只是给出 24 小时的差异。

我需要两天（或更多）的差异。IE：

```
2012-01-01: 14:00:00
2012-01-02: 10:00:00
[...] 
```

有没有办法在 TIMEDIFF 函数中进行分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:09:06.807

为了做你想做的事，你需要生成一个数字序列。也许你有一张桌子。如果没有，类似于以下内容：

```
select dstart + interval n.num days
from (select d1*10+d2 as num
      from (select 0 as d union all select 1 union all select 2 union all
            select 3 union all select 4 union all select 5 union all select 6 union all
            select 7 union all select 8 union all select 9
           ) d1 cross join
           (select 0 as d union all select 1 union all select 2 union all
            select 3 union all select 4 union all select 5 union all select 6 union all
            select 7 union all select 8 union all select 9
           ) d2
      ) n join
      (select date('2012-01-02') as dend, date('2012-01-01') dstart
      on dstart + interval n.num days <= dend 
```

（这未经测试，因此可能存在语法错误。）

# c# - 在全局过滤器中使用会话变量

> ID：14490061
> 
> 赞同：0
> 
> 时间：2013-01-23T21:50:22.657
> 
> 标签：c#, asp.net-mvc

我正在使用全局过滤器来确定是否允许用户访问某个页面/控制器。由于无法创建简单的会话变量，因此我无法对此进行很多了解。这是我的简化代码：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext context)
    {

        context.HttpContext.Session.Add("asdfasdf", 1234);
        //Check if user is authorized in db
        //...

        base.OnActionExecuted(context);
    }
} 
```

错误：

```
System.Web.HttpException: Failed to login to session state SQL server for user '<USERNAME>'. 
```

如果我注释掉`Session.Add`应用程序工作正常。这很奇怪，因为给出的错误完全不相关（我认为）。在这种情况下如何让我的会话变量工作？更好的问题，这是进行用户身份验证的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T21:52:14.573

您的应用程序似乎配置为使用 SQL Server[`session state`](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)持久性。而且您的 web.config 中的连接字符串有问题。

如果要使用 SQL Server 会话状态持久性，请确保您拥有[`correctly configured`](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.100%29.aspx)数据库并为其指定正确的连接字符串：

```
<configuration>
  <system.web>
    <sessionState mode="SQLServer"
      sqlConnectionString="Integrated Security=SSPI;data 
        source=SampleSqlServer;" />
  </system.web>
</configuration> 
```

如果您不想使用 SQL Server 来持久化会话，您可以切换回 InProc 模式：

```
 <system.web>
    <sessionState mode="InProc" />
  </system.web>
</configuration> 
```

# android - 使用 cocos2d-x 加载 zip 时崩溃

> ID：14490064
> 
> 赞同：0
> 
> 时间：2013-01-23T21:50:44.740
> 
> 标签：android, cocos2d-x

我在 android 上使用 cocos2d-x 时遇到问题。我正在尝试使用加载 .zip 文件

```
CCFileUtils::sharedFileUtils()->getFileDataFromZip(...) 
```

由于这个项目是为多平台设计的，我们也在 iPad3 上尝试了这段代码，它在那里运行没有问题。问题是应用程序在加载 zip 文件时出现分段错误。

这是带有一些额外注释的整个代码

```
void Map::loadChunk(int index, CCPoint startPoint) {
    chunks[index]->startPoint = startPoint;
    std::stringstream filename;
    filename << (int)startPoint.x << "_" << (int)startPoint.y << ".map";

    unsigned long filesize = 0;
    const char* path = CCFileUtils::sharedFileUtils()->fullPathFromRelativePath("map1.zip");

    CCLog(path);
    CCLog(filename.str().c_str());

    // In the following two lines the error occurs
    const char* buffer =(const char*) CCFileUtils::sharedFileUtils()->getFileDataFromZip(path, filename.str().c_str(), &filesize);    
    std::istringstream fileBuffer(buffer);

    CCLog("filesize %d", (int)filesize);
    std::string line;

    // Here some code follows but this code does not produce the problem so I left it out

} 
```

使用的包括：

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <map>

#include "cocos2d.h" 
```

**路径**和**文件名**的 值为**map1.zip**和**-128_-128.map**

map1.zip 位于 assets 文件夹中，并且 .map 文件存在于 map1.zip 中

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:14:12.553

我已经弄清楚为什么这不起作用。

将另一个 .zip 打包到 .apk 中似乎是个问题。在播放收到的文件夹中的 .zip 时

```
CCFileUtils::sharedFileUtils()->getWriteablePath() 
```

然后打开拉链

```
CCFileUtils::sharedFileUtils()->getFileDataFromZip(...) 
```

zip 正确加载，我可以从 zip 中读取某些文件。

# android - Android：DateUtils.formatDateTime 更改日期和时间顺序

> ID：14490067
> 
> 赞同：3
> 
> 时间：2013-01-23T21:50:54.217
> 
> 标签：android, date

我正在将日期转换为日期和时间字符串。我使用以下代码：

```
String result = DateUtils.formatDateTime(
            getApplicationContext(), 
            millis,
            (DateUtils.FORMAT_SHOW_DATE | 
             DateUtils.FORMAT_SHOW_TIME | 
             DateUtils.FORMAT_NUMERIC_DATE)); 
```

结果我得到`14:17, 20.01.2013`. 但我想得到`20.01.2013, 14:17`. 我没有找到任何标志来设置日期和时间的顺序。

有没有简单的方法将日期转换为格式为“[日期]，[时间]”的本地化字符串？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T21:56:08.670

我不相信 DateUtils 可以做到这一点。考虑[`SimpleDateFormat`](https://developer.android.com/reference/java/text/SimpleDateFormat.html)与用户的 Locale 或您的特定格式一起使用`"dd.MM.yyyy, HH:mm"`。

# r - 在 ggplot2 的 x 轴上添加次要刻度线（没有标签）

> ID：14490071
> 
> 赞同：39
> 
> 时间：2013-01-23T21:51:06.393
> 
> 标签：r, ggplot2

下面是一个情节的示例代码，它几乎完全符合我的要求。我唯一要添加的是根据下面定义的 minor_breaks 在 x 轴上的刻度线（与主要刻度相同的大小）。

```
df <- data.frame(x = c(1900,1950,2000), y = c(50,75,60))

p <- ggplot(df, aes(x=x, y=y))
p + geom_line() + 
  scale_x_continuous(minor_breaks = seq(1900,2000,by=10),
                     breaks = seq(1900,2000,by=50),
                     limits = c(1900,2000),
                     expand = c(0,0)) +
  scale_y_continuous(breaks = c(20,40,60,80),
                     limits = c(0,100)) +
  theme(legend.position="none",
        panel.background = element_blank(), 
        axis.line = element_line(color='black'),
        panel.grid.minor = element_blank()) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T22:33:50.463

这将在精确的情况下做到这一点：

```
scale_x_continuous(breaks= seq(1900,2000,by=10), 
                  labels = c(1900, rep("",4), 1950, rep("",4), 2000), 
                  limits = c(1900,2000), expand = c(0,0)) + 
```

这是一个不是防弹的函数，但可以在开始和结束主要标签与`at`参数的开始和结束值对齐时插入空白标签：

```
insert_minor <- function(major_labs, n_minor) {labs <- 
                              c( sapply( major_labs, function(x) c(x, rep("", 4) ) ) )
                              labs[1:(length(labs)-n_minor)]} 
```

测试：

```
p <- ggplot(df, aes(x=x, y=y))
  p + geom_line() + 
  scale_x_continuous(breaks= seq(1900,2000,by=10), 
                     labels = insert_minor( seq(1900, 2000, by=50), 4 ), 
                     limits = c(1900,2000), expand = c(0,0)) +
  scale_y_continuous(breaks = c(20,40,60,80), limits = c(0,100)) +
  theme(legend.position="none", panel.background = element_blank(), 
        axis.line = element_line(color='black'), panel.grid.minor = element_blank()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-03-20T14:39:42.340

上面很不错的功能。

我发现一个更简单或更容易理解的解决方案是简单地以您想要的主要和次要中断的增量指定主轴中断 - 因此，如果您希望主要以 10 为增量，而次要以 5 为增量，但是，您应该以 5 为步长指定主要增量。

然后，在主题中，您被要求为轴文本指定颜色。您可以给它一个颜色*列表*，而不是选择*一种*颜色 - 指定您希望长轴编号为任何颜色，然后指定短轴颜色为 NA。这将为您提供主要标记上的文本，但“次要”标记上没有任何内容。同样，对于绘图内部的网格，您可以指定线条大小的列表，以便绘图内的主要和次要网格线的粗细仍然存在差异，即使您将次要网格线指定为主要网格线。作为您可以在主题中添加的内容的示例：

 *```
panel.grid.major.x = element_line(colour = c("white"), size = c(0.33, 0.2)),
panel.grid.major.y = element_line(colour = c("white"), size = c(0.33, 0.2)),
axis.text.y = element_text(colour = c("black", NA), family = "Gill Sans"),
axis.text.x = element_text(colour = c("black", NA), family = "Gill Sans"), 
```

我怀疑您可以以完全相同的方式更改外部刻度线的大小，尽管我没有尝试过。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-20T19:33:26.803

尽管上面的响应能够添加中断，但这些实际上并不是minor_breaks，为此您可以使用`annotation_ticks`函数，它的工作原理与 `annotation_logticks`.

代码功能在[这里可用。](https://rdrr.io/github/hrbrmstr/ggalt/src/R/annotation_ticks.r)您可能需要加载`grid`包

```
annotation_ticks <- function(sides = "b",
                             scale = "identity",
                             scaled = TRUE,
                             short = unit(0.1, "cm"),
                             mid = unit(0.2, "cm"),
                             long = unit(0.3, "cm"),
                             colour = "black",
                             size = 0.5,
                             linetype = 1,
                             alpha = 1,
                             color = NULL,
                             ticks_per_base = NULL,
                             ...) {
  if (!is.null(color)) {
    colour <- color
  }

  # check for invalid side
  if (grepl("[^btlr]", sides)) {
    stop(gsub("[btlr]", "", sides), " is not a valid side: b,t,l,r are valid")
  }

  # split sides to character vector
  sides <- strsplit(sides, "")[[1]]

  if (length(sides) != length(scale)) {
    if (length(scale) == 1) {
      scale <- rep(scale, length(sides))
    } else {
      stop("Number of scales does not match the number of sides")
    }
  }

  base <- sapply(scale, function(x) switch(x, "identity" = 10, "log10" = 10, "log" = exp(1)), USE.NAMES = FALSE)

  if (missing(ticks_per_base)) {
    ticks_per_base <- base - 1
  } else {
    if ((length(sides) != length(ticks_per_base))) {
      if (length(ticks_per_base) == 1) {
        ticks_per_base <- rep(ticks_per_base, length(sides))
      } else {
        stop("Number of ticks_per_base does not match the number of sides")
      }
    }
  }

  delog <- scale %in% "identity"

  layer(
    data = data.frame(x = NA),
    mapping = NULL,
    stat = StatIdentity,
    geom = GeomTicks,
    position = PositionIdentity,
    show.legend = FALSE,
    inherit.aes = FALSE,
    params = list(
      base = base,
      sides = sides,
      scaled = scaled,
      short = short,
      mid = mid,
      long = long,
      colour = colour,
      size = size,
      linetype = linetype,
      alpha = alpha,
      ticks_per_base = ticks_per_base,
      delog = delog,
      ...
    )
  )
}

#' Base ggproto classes for ggplot2
#'
#' If you are creating a new geom, stat, position, or scale in another package,
#' you'll need to extend from ggplot2::Geom, ggplot2::Stat, ggplot2::Position, or ggplot2::Scale.
#'
#' @seealso \code{\link[ggplot2]{ggplot2-ggproto}}
#' @usage NULL
#' @format NULL
#' @rdname ggplot2-ggproto
#' @export
GeomTicks <- ggproto(
  "GeomTicks", Geom,
  extra_params = "",
  handle_na = function(data, params) {
    data
  },

  draw_panel = function(data,
                        panel_scales,
                        coord,
                        base = c(10, 10),
                        sides = c("b", "l"),
                        scaled = TRUE,
                        short = unit(0.1, "cm"),
                        mid = unit(0.2, "cm"),
                        long = unit(0.3, "cm"),
                        ticks_per_base = base - 1,
                        delog = c(x = TRUE, y = TRUE)) {
    ticks <- list()

    # Convert these units to numbers so that they can be put in data frames
    short <- convertUnit(short, "cm", valueOnly = TRUE)
    mid <- convertUnit(mid, "cm", valueOnly = TRUE)
    long <- convertUnit(long, "cm", valueOnly = TRUE)

    for (s in 1:length(sides)) {
      if (grepl("[b|t]", sides[s])) {

        # Get positions of x tick marks
        xticks <- calc_ticks(
          base = base[s],
          minpow = floor(panel_scales$x.range[1]),
          maxpow = ceiling(panel_scales$x.range[2]),
          majorTicks = panel_scales$x.major_source,
          start = 0,
          shortend = short,
          midend = mid,
          longend = long,
          ticks_per_base = ticks_per_base[s],
          delog = delog[s]
        )

        if (scaled) {
          if (!delog[s]) {
            xticks$value <- log(xticks$value, base[s])
          }
        }

        names(xticks)[names(xticks) == "value"] <- "x" # Rename to 'x' for coordinates$transform

        xticks <- coord$transform(xticks, panel_scales)

        # Make the grobs
        if (grepl("b", sides[s])) {
          ticks$x_b <- with(
            data,
            segmentsGrob(
              x0 = unit(xticks$x, "native"),
              x1 = unit(xticks$x, "native"),
              y0 = unit(xticks$start, "cm"),
              y1 = unit(xticks$end, "cm"),
              gp = gpar(
                col = alpha(colour, alpha),
                lty = linetype,
                lwd = size * .pt
              )
            )
          )
        }
        if (grepl("t", sides[s])) {
          ticks$x_t <- with(
            data,
            segmentsGrob(
              x0 = unit(xticks$x, "native"),
              x1 = unit(xticks$x, "native"),
              y0 = unit(1, "npc") - unit(xticks$start, "cm"),
              y1 = unit(1, "npc") - unit(xticks$end, "cm"),
              gp = gpar(
                col = alpha(colour, alpha),
                lty = linetype,
                lwd = size * .pt
              )
            )
          )
        }
      }

      if (grepl("[l|r]", sides[s])) {
        yticks <- calc_ticks(
          base = base[s],
          minpow = floor(panel_scales$y.range[1]),
          maxpow = ceiling(panel_scales$y.range[2]),
          majorTicks = panel_scales$y.major_source,
          start = 0,
          shortend = short,
          midend = mid,
          longend = long,
          ticks_per_base = ticks_per_base[s],
          delog = delog[s]
        )

        if (scaled) {
          if (!delog[s]) {
            yticks$value <- log(yticks$value, base[s])
          }
        }

        names(yticks)[names(yticks) == "value"] <- "y" # Rename to 'y' for coordinates$transform
        yticks <- coord$transform(yticks, panel_scales)

        # Make the grobs
        if (grepl("l", sides[s])) {
          ticks$y_l <- with(
            data,
            segmentsGrob(
              y0 = unit(yticks$y, "native"),
              y1 = unit(yticks$y, "native"),
              x0 = unit(yticks$start, "cm"),
              x1 = unit(yticks$end, "cm"),
              gp = gpar(
                col = alpha(colour, alpha),
                lty = linetype, lwd = size * .pt
              )
            )
          )
        }
        if (grepl("r", sides[s])) {
          ticks$y_r <- with(
            data,
            segmentsGrob(
              y0 = unit(yticks$y, "native"),
              y1 = unit(yticks$y, "native"),
              x0 = unit(1, "npc") - unit(yticks$start, "cm"),
              x1 = unit(1, "npc") - unit(yticks$end, "cm"),
              gp = gpar(
                col = alpha(colour, alpha),
                lty = linetype,
                lwd = size * .pt
              )
            )
          )
        }
      }
    }
    gTree(children = do.call("gList", ticks))
  },
  default_aes = aes(colour = "black", size = 0.5, linetype = 1, alpha = 1)
)

# Calculate the position of log tick marks Returns data frame with: - value: the
# position of the log tick on the data axis, for example 1, 2, ..., 9, 10, 20, ...
# - start: on the other axis, start position of the line (usually 0) - end: on the
# other axis, end position of the line (for example, .1, .2, or .3)
calc_ticks <- function(base = 10,
                       ticks_per_base = base - 1,
                       minpow = 0,
                       maxpow = minpow + 1,
                       majorTicks = 0,
                       start = 0,
                       shortend = 0.1,
                       midend = 0.2,
                       longend = 0.3,
                       delog = FALSE) {

  # Number of blocks of tick marks
  reps <- maxpow - minpow

  # For base 10: 1, 2, 3, ..., 7, 8, 9, 1, 2, ...
  ticknums <- rep(seq(1, base - 1, length.out = ticks_per_base), reps)

  # For base 10: 1, 1, 1, ..., 1, 1, 1, 2, 2, ... (for example)
  powers <- rep(seq(minpow, maxpow - 1), each = ticks_per_base)

  ticks <- ticknums * base ^ powers

  ticks <- c(ticks, base ^ maxpow) # Add the last tick mark

  # Set all of the ticks short
  tickend <- rep(shortend, length(ticks))

  # Get the position within each cycle, 0, 1, 2, ..., 8, 0, 1, 2\. ...
  cycleIdx <- ticknums - 1

  # Set the 'major' ticks long
  tickend[cycleIdx == 0] <- longend

  # Where to place the longer tick marks that are between each base For base 10, this
  # will be at each 5
  longtick_after_base <- floor(ticks_per_base / 2)
  tickend[cycleIdx == longtick_after_base] <- midend

  if (delog) {
    ticksCopy <- ticks

    regScale <- log(ticks, base)

    majorTicks <- sort(
      unique(
        c(
          minpow,
          regScale[which(regScale %in% majorTicks)],
          maxpow,
          majorTicks
        )
      )
    )

    expandScale <- c()

    if (length(majorTicks) > 1) {
      for (i in 1:(length(majorTicks) - 1)) {
        expandScale <- c(
          expandScale,
          seq(majorTicks[i], majorTicks[i + 1], length.out = (ticks_per_base + 1))
        )
      }

      ticks <- unique(expandScale)

      # Set all of the ticks short
      tickend <- rep(shortend, length(ticks))

      # Set the 'major' ticks long
      tickend[which(ticks %in% majorTicks)] <- longend
    }
  }

  tickdf <- data.frame(value = ticks, start = start, end = tickend)

  tickdf
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-19T14:28:59.973

现在可以使用 {ggh4x} 包轻松添加不带标签的短轴刻度。只需对原始图进行少量修改（参见代码中的注释）。

```
library(ggh4x)
#> Loading required package: ggplot2
df <- data.frame(x = c(1900, 1950, 2000), y = c(50, 75, 60))

ggplot(df, aes(x, y)) +
  geom_line() +
  scale_x_continuous(
    minor_breaks = seq(1900, 2000, by = 10),
    breaks = seq(1900, 2000, by = 50), limits = c(1900, 2000),
    guide = "axis_minor" # this is added to the original code
  ) +
  theme(ggh4x.axis.ticks.length.minor = rel(1)) # add this to get the same length 
```

![](../Images/3d811510f9f38fa475a2f6d47e5cc5e0.png)

^(由[reprex 包](https://reprex.tidyverse.org)于 2021-04-19 创建 (v2.0.0 ))*

# javascript - JavaScript 模式：函数调用的上下文

> ID：14490073
> 
> 赞同：6
> 
> 时间：2013-01-23T21:51:19.420
> 
> 标签：javascript, function, call

从一开始我就有大量的 JavaScript，函数调用是这样写的：

```
THING.someFunction.call(THING); 
```

在我看来，这应该始终等同于：

```
THING.someFunction(); 
```

**这两个调用总是等价的吗？**旧版本的 JavaScript 呢？

在我看来`THING`，第一行代码中第二个的目的是在`this`里面设置 context() `someFunction`。但是该函数内部的上下文应该已经是`THING`默认的了，对吧？

为了清楚起见，`THING`定义如下：

```
var THING = function () {
    // private vars

    return{
        // code
        someFunction : function () {
            // code
        }
    };
}(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:55:00.590

是的，它们是等价的。而且我不知道任何没有它们的 JavaScript 版本（但是，[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)似乎已在 1.3 中添加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:43:43.870

它们在技术上是相同的。但它们在异步编程中的行为也略有不同。call() 用于通过传递作用域作为参数来调用函数。这提供了一种在回调和延迟执行（setTimeout、setInterval）中调用定义函数的便捷方式。如果您使用过任何 JS 库，您会注意到 $.proxy 或 _.bind，这些是实现 call(scope); 的别名；

有关更多信息，请参阅[此 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

# twitter-bootstrap - 如何将 NavBar 直接放置在轮播上？

> ID：14490074
> 
> 赞同：0
> 
> 时间：2013-01-23T21:51:21.730
> 
> 标签：twitter-bootstrap

当我有一个导航栏和一个轮播并排在一起时，它们之间有 20 像素的垂直间隙。如何消除差距？

谢谢，

每

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:07:49.527

正如 user814628 所说，导航下方有一个间隙，因为`.navbar`底部有一个边距 CSS 属性。这将解决它：

```
.navbar {
    margin-bottom: 0px;
} 
```

[js小提琴](http://jsfiddle.net/hajpoj/kaZcN/6/)

# nginx - 如何为 nginx 中的所有服务器设置默认指令？（Plesk 的问题）

> ID：14490078
> 
> 赞同：3
> 
> 时间：2013-01-23T21:51:35.060
> 
> 标签：nginx, webserver, plesk, mediatemple

我在 media Temple 上有一个 DV 4.0 服务器，它使用 nginx 作为 apache 的反向代理。我想为通过 nginx 运行的（多个）域配置一些远期过期标头（使用`location`块）和其他设置。

通常这不会是一个问题，只需创建一组通用规则并将`include`它们放在一个`server {}`块中。但是，Plesk 会`server {}`在单独的文件中自动创建和更新块，这意味着在这些文件中所做的任何更改都会被清除。

理想情况下，我想要一种方法来设置一个通用`server {}`块，将所有服务器应用为默认值，但如果这不存在，我想知道如何在 Plesk 中添加自定义指令，这样它们就不会在它重写文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:03:58.367

检查此[页面](http://download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-linux-advanced-administration-guide/index.htm?fileName=66758.htm)

Yoг 可以自定义默认的 nginx 虚拟主机模板：

1.  mkdir /usr/local/psa/admin/conf/templates/custom/domain
2.  cp /usr/local/psa/admin/conf/templates/default/domain/nginxDomainVirtualHost.php /usr/local/psa/admin/conf/templates/custom/domain/
3.  在 /usr/local/psa/admin/conf/templates/custom/domain/nginxDomainVirtualHost.php 中添加或更改您需要的内容
4.  /usr/local/psa/admin/bin/httpdmng --reconfigure-all # 为所有域应用新配置

# r - ncdf 缺失值

> ID：14490082
> 
> 赞同：0
> 
> 时间：2013-01-23T21:51:45.107
> 
> 标签：r

我尝试读取一个 ncdf 文件，在标题中写入缺失值是 "Missval:1e+30" 但在数据中我看到 9999 。我检查了 linux 中的 ncdump ，这很好。并由此识别缺失值。我该如何解决这样的问题以消除缺失值？

```
head(get.var.ncdf(nc,4)) 
```

[1] 9999 9999 9999 9999 9999 9999

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:01:27.247

R 使用特殊符号`NA`来编码缺失值。

如果您的数据有 9999 来编码缺失值，那么您的元数据标头是谎言，您将不得不手动替换它们。通常，您会执行以下操作：

```
 > x = c(1,2,3,9999,55,9999)
 > x[x==9999] <- NA
 > x
 [1] 1 2 3 NA 55 NA 
```

矩阵对象的替换是类似的。和基本的 R 东西。

您的数据中可能已经有一些 NA 值以及 9999 值。检查`any(is.na(x))`- 如果为 TRUE，则其中至少有一个 NA（可能来自标头中缺少的数据值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:53:17.370

我找到了答案，问题来自包“ncdf”，但现在我安装了“RNetCDF”

包装和一切运作良好。

```
head(var.get.nc(nc,5)) 
```

[1] NA NA NA NA NA NA

但我发现有时找到好的包装很棘手。

# android - 作物保存位图

> ID：14490083
> 
> 赞同：3
> 
> 时间：2013-01-23T21:51:47.477
> 
> 标签：android, android-camera

我正在尝试拍摄照片，然后对其进行裁剪。所以基本上，我启动相机意图，然后我开始裁剪意图。

由于我无法通过“onActivityResult”数据传递大位图，我创建了一个 URI 将图像直接保存到 SDCard，但由于某种原因，它被保存在模拟器上，而不是真实设备上。（我的意思是，CROP 没有保存在真实设备上。）

这是代码：

```
File resultingFile;
Bitmap fotoCreada;
Uri uriFoto; 
```

相机意图：

```
File folder = new File(Environment.getExternalStorageDirectory().toString()+"/PictureFolder/");
folder.mkdirs();
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
resultingFile=new File(folder.toString() + "/"+currentDateandTime+".jpg");
this.uriFoto=Uri.fromFile(resultingFile);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, this.uriFoto);
startActivityForResult(cameraIntent, 1888); 
```

然后我检索结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //Si venim de la camera
    if( requestCode == 1888 && resultCode == -1) { //-1 = TOT HA ANAT BE.
        Bitmap photo = BitmapFactory.decodeFile(resultingFile.getPath());
        Matrix matrix = new Matrix();
        matrix.postRotate(90);
        matrix.postScale(0.5f,0.5f);
        Bitmap photoRotated = Bitmap.createBitmap(photo, 0, 0, photo.getWidth(), photo.getHeight(), matrix, true);
        //Desem foto rotada.
        this.fotoCreada=photoRotated;
        try {
            FileOutputStream out = new FileOutputStream(this.resultingFile.getPath());
            this.fotoCreada.compress(Bitmap.CompressFormat.PNG, 90, out);
        } catch (Exception e) {
            e.printStackTrace();
        }
        performCrop();
    } 
```

所以我打电话给 performCrop();

```
private void performCrop() {
    try {
        Log.d("debugging","Estic a crop. La foto és:"+this.uriFoto);
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
        cropIntent.setDataAndType(this.uriFoto, "image/*");
        cropIntent.putExtra("crop", "true");
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        cropIntent.putExtra("outputX", 600);
        cropIntent.putExtra("outputY", 600);
        //cropIntent.putExtra("return-data", true);
        cropIntent.putExtra("ouput", this.uriFoto);
        startActivityForResult(cropIntent,1234);
    }
    catch(ActivityNotFoundException anfe){
        //display an error message
        String errorMessage = "Whoops - your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this.cont, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

如你看到的：

```
cropIntent.putExtra("ouput", this.uriFoto); 
```

基本上告诉将作物输出到该 URI。URI 是正确的，因为我已经对其进行了调试（LogCat）：

> Estic 作物。照片：file:///mnt/sdcard/PictureFolder/20130123_223058.jpg

然后，我回到活动结果：

```
[... previous onactivityresult]
if (requestCode == 1234 && resultCode == -1){
        Log.d("debugging","Ha acabat el croop.");
        Uri imageUri = this.uriFoto;
        try {
            Bitmap photo = MediaStore.Images.Media.getBitmap(this.cont.getContentResolver(), imageUri);
            this.fotoCreada=photo;
            ((ImageView) myFragmentView.findViewById(R.id.fotoCapturada)).setImageBitmap(this.fotoCreada);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        //Bitmap photo = BitmapFactory.decodeFile(resultingFile.getPath());     
    } 
```

**但我最终得到的是显示 (setImageBitmap(this.fotoCreada);) 从相机捕获的图像，而不是裁剪后的图片。这发生在真实设备上，但不在模拟器上！**

我试图解释我能做到的最好的方式。随意问。

谢谢。

# php - PHP 即将到来的本月第一个星期五

> ID：14490088
> 
> 赞同：-1
> 
> 时间：2013-01-23T21:52:01.807
> 
> 标签：php, strtotime

（移至代码审查，这属于）。

我有一个事件在每月的第一个星期五（晚上 7 点）重复发生，我需要输出下一个第一个星期五的日期。

这是我写的第一个 PHP，我想知道是否有更好的方法来实现它？服务器正在运行 PHP 5.3

这是我写的：

```
$d = strtotime('today');
$t = strtotime('first friday of this month');

if ($d > $t) {
  $ff = strtotime('first friday of next month');
  $ffn = date('M j', $ff);
  echo 'Friday, '.$ffn.' at 7pm';
} elseif ($d == $t) {
  echo 'Tonight at 7pm';
} else {
  $ff = strtotime('first friday of this month');
  $fft = date('M j', $ff);
  echo 'Friday, '.$fft.' at 7pm';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:55:39.420

[确认工作](http://codepad.viper-7.com/7Z7tB8)

```
$today  = new DateTime();
$this_months_friday = new DateTime('first friday of this month');
$next_months_friday = new DateTime('first friday of next month');
echo ($today < $this_months_friday) ? $this_months_friday->format('M j') : $next_months_friday->format('M j'); 
```

# javascript - 使用 $.ajax 在 phonegap 和 Windows Phone 7 中获取静态 html 文件

> ID：14490093
> 
> 赞同：4
> 
> 时间：2013-01-23T21:52:14.693
> 
> 标签：javascript, windows-phone-7, cordova, requirejs

我们正在使用 Phonegap/Cordova 2.3.0 将应用程序部署到 Windows Phone 7。该应用程序使用 Require.js 动态加载所有模块。一个模块称为“路由器”，负责从本地文件中获取静态 html 并将其内容加载到`<div>`. 这适用于 iPhone、iPad 和 Windows Phone 8。但是在 WP7 中发生了一些奇怪的事情。

示例代码来自`router.js`：

```
//path that works with WP8
var path = "www/views/";
$.ajax({ url: path + "test3.html" })
                .done(function(html) {
                    alert(html); //result from Windows Phone 8
                }).fail(function(error) {
                    alert(error); //result from Windows Phone 7
                }); 
```

在 WP7 上测试时给出的错误是 404 Not Found。

我说“发生了一些奇怪的事情”，因为我可以将上面的确切代码复制到`main.js`（require.js 入口点），或者`index.html`它将运行而不会出错。但是当我将该代码放入我的 中时`router.js`，它会返回错误。

一些观察：

*   `router.js`与 位于同一文件夹 ( `/www/js`) 中`main.js`。
*   `index.html`在`/www`文件夹中。
*   我已经尝试了所有我能想到的路径组合，希望能偶然发现一个可行的路径组合。`/app/www/views`, `app/www/views`, `/www/views`, `www/views`, `/views`, `views`, 甚至`x-wmapp0:/app/www/views`和`x-wmapp1:/app/www/views`。
*   显然，我提供了一个超级简化的例子。如果您需要更多，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:24:27.300

以下内容可以帮助您理解问题

1) 通过 File.cs (\templates\standalone\cordovalib\Commands\File.cs).readAsText 方法访问 Cordova WP7 上的本地文件。因此，您可以附加完整的 cordovalib 而不是编译的 dll，并查看 Cordova 尝试在哪里找到该文件。

2) ajax 请求和本地文件之间的转换是在 XHRPatch (cordova-2.3.0.js) 完成的，所以尝试[在此处](https://github.com/apache/cordova-wp7/blob/master/example/www/cordova-2.4.0.js#L5827)添加 uri 跟踪 (console.log(uri);)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T19:19:42.440

使用我现在使用的 Cordova 2.7.0（在 Windows Phone 8 上 - 在 WP7 上可能会有所不同！）看起来你只需要参考相对于应用程序根目录的路径（而不是你的`www`目录！这意味着你必须从...来`www/path/to/my/file.js`

希望有帮助 - 这让我感到困惑！

# excel - 如何调整代码以获得更好的性能

> ID：14490095
> 
> 赞同：0
> 
> 时间：2013-01-23T21:52:20.963
> 
> 标签：excel, vba

我正在尝试从按行组织的 excel 文件中建立边缘关系，

A,B,C,

D,E

目的是从每一行创建关系：

甲，乙

A,C

公元前

我有以下代码，问题是当行长度相等时代码是有效的，但例如对于上面的行，它也会创建以下边缘（关系）：

D,""

E、“”

这为大型数据集带来了大问题。我想知道是否有人可以帮助我调整代码以创建边缘列表的方式，直到每行中的单元格被填充。如果有任何其他方法可以更有效地做到这一点，将不胜感激。

非常感谢，会很有帮助的。

我的代码：

```
Sub Transform()

Dim targetRowNumber As Long
targetRowNumber = Selection.Rows(Selection.Rows.Count).Row + 2

Dim col1 As Variant
Dim cell As Range
Dim colCounter As Long
Dim colCounter2 As Long

Dim sourceRow As Range: For Each sourceRow In Selection.Rows

    For colCounter = 1 To Selection.Columns.Count - 1

        col1 = sourceRow.Cells(colCounter).Value
        For colCounter2 = colCounter + 1 To Selection.Columns.Count
            Set cell = sourceRow.Cells(, colCounter2)

            If Not cell.Column = Selection.Column Then
                Selection.Worksheet.Cells(targetRowNumber, 1) = col1
                Selection.Worksheet.Cells(targetRowNumber, 2) = cell.Value
                targetRowNumber = targetRowNumber + 1
            End If

        Next colCounter2

    Next colCounter

Next sourceRow

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:56:02.410

我玩过它 - 这应该可以解决问题。如果需要，我们可以通过输出到另一个变量数组来加速它，但这对我来说运行得很快：

```
Sub Transform_New()

Dim rngSource As Range, rngDest As Range
Dim varArray As Variant
Dim i As Integer, j As Integer, k As Integer

Set rngSource = Sheet1.Range("A1", Sheet1.Cells(WorksheetFunction.CountA(Sheet1.Columns(1)), 1)) 'Put all used rows into range
Set rngDest = Sheet1.Cells(WorksheetFunction.CountA(Sheet1.Columns(1)), 1).Offset(2, 0) 'Set target range to start 2 below source range

varArray = Range(rngSource, rngSource.Offset(0, Range("A1").SpecialCells(xlCellTypeLastCell).Column)).Value

For i = LBound(varArray, 1) To UBound(varArray, 1) 'Loop vertically through array
    For j = LBound(varArray, 2) To UBound(varArray, 2)    'Loop horizontally through each line apart from last cell
        k = j
        Do Until varArray(i, k) = ""
                k = k + 1
                If varArray(i, k) <> "" Then
                    rngDest.Value = varArray(i, j)
                    rngDest.Offset(0, 1).Value = varArray(i, k)
                    Set rngDest = rngDest.Offset(1, 0)
                End If
        Loop
    Next
Next

End Sub 
```

# c - 构建过程后如何在cmake中编译附加源文件

> ID：14490096
> 
> 赞同：4
> 
> 时间：2013-01-23T21:52:25.110
> 
> 标签：c, oracle, cmake, oracle-pro-c

我在 cmake for windows 中有一个项目，其中包含一个名为 database.proc 的 Pro*C 源文件，我的目标是从 .proc 文件生成一个 C 源文件并将其添加到项目中以与其他源文件链接，我试图添加一个自定义命令来实现这一点但没有成功

```
add_custom_command(TARGET myproj OUTPUT PRE_LINK
    COMMAND ${PROC} iname=${PROJECT_SOURCE_DIR}/connection.proc SQLCHECK=SYNTAX
        MODE=ANSI IRECLEN=255 ORECLEN=255
        ONAME=${PROJECT_SOURCE_DIR}/connection.c
    COMMAND ${CMAKE_C_COMPILER} ${CMAKE_C_FLAGS}
            ${PROJECT_SOURCE_DIR}/connection.c ) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:40:12.543

我对 Pro*C 不熟悉，但看起来您正在将两个不同版本的[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command).

第一个版本`add_custom_command(OUTPUT ...)`用于生成一个文件，然后将其添加为另一个 CMake 目标的依赖项。构建该目标时，首先执行自定义命令以生成输出文件。

第二个版本`add_custom_command(TARGET ...)`用于定义预构建、预链接或构建后命令；一个不一定创建文件，但与构建关联目标一起执行的文件。

如果你只有一个依赖于 Pro*C 输出的目标，那么第一个版本可能是你最好的选择：

```
add_custom_command(OUTPUT ${PROJECT_SOURCE_DIR}/connection.c
    COMMAND ${PROC} iname=${PROJECT_SOURCE_DIR}/connection.proc SQLCHECK=SYNTAX
        MODE=ANSI IRECLEN=255 ORECLEN=255
        ONAME=${PROJECT_SOURCE_DIR}/connection.c)
add_executable(myproj ${PROJECT_SOURCE_DIR}/connection.c <other sources>) 
```

# ruby-on-rails - 在 Rails 中，当资源创建操作失败并调用 render :new 时，为什么 URL 必须更改为资源的索引 url？

> ID：14490098
> 
> 赞同：60
> 
> 时间：2013-01-23T21:52:32.603
> 
> 标签：ruby-on-rails, forms, view, controller, routes

我有一个名为 Books 的资源。它在我的路线文件中正确列为资源。

我有一个新动作，它为新视图提供了标准：

```
@book = Book.new 
```

在模型上，有一些属性是通过存在来验证的，所以如果保存操作失败，就会产生错误。

在我的控制器中：

```
@book = Book.create
...  # some logic
if @book.save
  redirect_to(@book)
else
  render :new
end 
```

这是相当标准的；并且使用 render:new 的基本原理是将对象传递回视图，并且可以报告错误，重新填写表单条目等。

这有效，除非每次我被发送回表单（通过渲染：new），我的错误都会出现，但我的 URL 是 INDEX URL，即

```
/books 
```

而不是

```
/books/new 
```

这是我最初开始的地方。我看过其他几个关于这个问题的帖子，但没有答案。至少，有人会假设它会将您带到 /books/create，我也有一个视图文件（在这种情况下与 new 相同）。

我可以做这个：

```
# if the book isn't saved then
flash[:error] = "Errors!"
redirect_to new_book_path 
```

但是随后@book 数据以及错误消息都会丢失，这就是拥有表单和操作等的全部意义所在。

为什么 render :new 会在我的索引操作 /books 登陆我，而通常该 URL 会调用列出所有书籍的 INDEX 方法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-23T23:20:24.590

它实际上*是*将您发送到创建路径。它在`create`操作中，其路径为`/books`，使用 HTTP 方法 POST。这看起来与索引路径相同`/books`，但索引路径使用的是 HTTP 方法 GET。rails 路由代码在确定调用哪个操作时会考虑该方法。验证失败后，您仍处于创建操作中，但您正在渲染`new`视图。这有点令人困惑，但是像这样的行`render :new`实际上根本没有调用新的动作；它仍在运行 create 操作，它告诉 Rails 呈现新*视图*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-02T11:27:10.987

我刚开始使用[Rails-Tutorial](http://ruby.railstutorial.org/)并遇到了同样的问题。解决方案很简单：如果您在提交表单（有错误）后想要相同的 URL，只需将 new 和 create 操作组合到一个操作中。

这是我的代码的一部分，它使这成为可能（希望它可以帮助某人^^）

routes.rb（为新动作添加后路由）：

```
...
    resources :books
    post "books/new"
... 
```

控制器：

```
...
def create
    @book = Book.new(book_params)

    if @book.save
        # save was successful
        print "Book saved!"

        else
        # If we have errors render the form again   
        render 'new'
    end
end

def new 
    if book_params
        # If data submitted already by the form we call the create method
        create
        return
    end

    @book = Book.new

    render 'new' # call it explicit
end

private

def book_params
    if params[:book].nil?  || params[:book].empty?
        return false
    else
        return params.require(:book).permit(:title, :isbn, :price)
    end
end 
```

新的.html.erb：

```
<%= form_for @book, :url => {:action => :new} do |f| %>
  <%= f.label :title %>
  <%= f.text_field :title %>

  <%= f.label :isbn %>
  <%= f.text_field :isbn %>

  <%= f.label :price %>
  <%= f.password_field :price %>

  <%= f.submit "Save book" %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T15:32:17.533

刚刚有同样的问题，所以也许有一天这可能会对某人有所帮助。您基本上必须进行 3 次调整才能使这件事起作用，尽管我的解决方案仍然不理想。

1）在创建动作中：

```
if @book.save
  redirect_to(@book)
else
  flash[:book] = @book
  redirect_to new_book_path
end 
```

2) 在新动作中：

```
@book = flash[:book] ? Book.new(flash[:book]): Book.new 
```

3）无论你在哪里解析flash hash，一定要过滤掉flash[:book]。

--> 显示正确的 URL，保留表单数据。尽管如此，我还是不喜欢将用户对象放入闪存哈希中，我认为这不是它的目的。有没有人知道一个更好的地方放它？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T03:43:01.393

它不会让您登陆，`/books/new`因为您通过发布到创建资源`/books/`。当您的创建失败时，它只是呈现新操作，而不是将您重定向到新操作。正如@MrYoshiji 上面所说，您可以尝试将其重定向到新操作，但这确实效率低下，因为您将创建另一个 HTTP 请求并往返于服务器，只是为了更改 url。那时，如果它很重要，您可能可以使用 javascript 更改它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-22T13:21:30.770

它可以通过使用相同的 url 但不同的方法用于新建和创建操作来修复。

在路由文件中可以使用以下代码。

```
resources :books do
  get :common_path_string, on: :collection, action: :new
  post :common_path_string, on: :collection, action: :create
end 
```

现在您的新页面将呈现在 url

**书籍/common_path_string**

如果验证后出现任何错误，url 仍然是相同的。

也在表格中，而不是使用

```
books_path 
```

利用

```
url: common_path_string_books_path, method: :post 
```

选择您喜欢的*common_path_string*。

# jakarta-ee - 代码 commandButton 在 datagrid 中不起作用，但在 dataTab 中起作用

> ID：14490105
> 
> 赞同：0
> 
> 时间：2013-01-23T21:52:43.927
> 
> 标签：jakarta-ee, jsf-2, primefaces

好吧，我正在制作一个网络，并且我使用 primeface，但我试图使用 commandButton 命令从数据网格的展示中做示例，但经过 1 天的尝试我失败了，但我使用 dataTab 和工作，所以我迷路了，如果你们中的任何一个可以帮助我，我就把代码放了。

（使用的技术是 tomcat 7、jsf 2.1 和 primeface 3.2）

这是dataTab的代码

```
<p:dataTable id="juego" var="juego" value="#{juegoBean.files}">  

    <p:column headerText="Model" style="width:24%">  
        <h:outputText value="#{juego.id}" />  
    </p:column>  

    <p:column headerText="Year" style="width:24%">  
        <h:outputText value="#{juego.idUser.mail}" />  
    </p:column>  

    <p:column style="width:4%">  
        <p:commandButton id="selectButton" update=":form:detalle" oncomplete="juegoDialog.show()" icon="ui-icon-search" title="View">  
                <f:setPropertyActionListener value="#{juego}" target="#{juegoBean.seleccionadoFile}" />  
        </p:commandButton>  
    </p:column>  

</p:dataTable> 
```

这是dataGrid的代码

```
<p:dataGrid  var="juego" value="#{juegoBean.files}" columns="3"  
    rows="12" paginator="true"  
    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
    rowsPerPageTemplate="12,24,36">  

    <p:panel header="#{juego.id}" style="text-align:center">  
        <h:panelGrid style="width:100%">  
            <!--
            <p:graphicImage value="/images/cars/.jpg"/>   
             <h:outputText value="#{juego.idUser.user}" />  

           <p:commandButton id="selectButton" update=":form:detalle" oncomplete="juegoDialog.show()" icon="ui-icon-search" title="View">  
                <f:setPropertyActionListener value="#{juego}" target="#{juegoBean.seleccionadoFile}" />  
        </p:commandButton>  
        </h:panelGrid>  
    </p:panel>  

</p:dataGrid> 
```

这是我尝试更新的对话框

```
<p:dialog header="Information del archivo" widgetVar="juegoDialog" modal="true">  
    <p:outputPanel id="detalle" layout="block">  

          <p:tabView  id="tabView">  

                <p:tab id="general" title="General">  
                    <div id="descripcion">
                        <h3>Descripcion del juego</h3><br />

                        <p style="font-size: small;">#{juegoBean.seleccionadoFile.infoFile.description}</p><br />
                    </div>
                    <div id="categoria"> 
                        <h3>Categorias del Juego</h3><br />
                        <p style="font-size: small;">
                          </p><br />
                    </div>
                    <div id="clave"> 
                        <h3>Palabras clave</h3> <br />
                        <p style="font-size: small;">#{juegoBean.seleccionadoFile.infoFile.motCles}</p><br />
                    </div>
                    <div id="subido"> 
                        <h3>Esta archivo fue subido el:</h3> <br />
                        <p style="font-size: small;">#{juegoBean.seleccionadoFile.infoFile.dateUpload}</p>
                    </div>

                </p:tab>  

                <p:tab id="imagen" title="Imagenes del juego"> 
                    <div class="largo">
                        <ui:repeat var="imagen" value="#{juegoBean.seleccionadoFile.imageCollection}">
                   <img title="" alt="" src="#{imagen.root}" />
                    </ui:repeat>

                           </div>
                </p:tab>  

                <p:tab id="estadistica" title="Estadistica">  
                    <div>
                        <h3>Descargado: </h3><br />

                        <p style="font-size: small;">#{juegoBean.seleccionadoFile.telecharge}</p><br /> 
                    </div>
                    <div> 
                        <h3> Reputacion: </h3><br />
                        <p style="font-size: small;"></p><br /> 
                    </div>
                    <div> 
                        <h3> Ultima vez descargado: </h3><br />
                        <p style="font-size: small;">#{juegoBean.seleccionadoFile.infoFile.dateDernierTelechargement}</p><br /> 
                    </div>

                </p:tab>  

                <p:tab id="descargar" title="Descargar">  
                    <h3>  Descargar link </h3> <br/>

                    <br/>
                    <p style="font-size: small;"><a title=""  href="#{juegoBean.seleccionadoFile.adresse}"  onclick="#{juegoBean.actualizarDescarga()}">Descargar</a></p>
                    <br/>

                </p:tab>  

            </p:tabView>  

    </p:outputPanel>  
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:44:52.003

您必须`<p:colum>`在`<p:datagrid>`.

```
<p:dataGrid  var="juego" value="#{juegoBean.files}" columns="3"  
    rows="12" paginator="true"  
    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
    rowsPerPageTemplate="12,24,36">  
<p:colum>
    <p:panel header="#{juego.id}" style="text-align:center">  
        <h:panelGrid style="width:100%">  
            <!-- -->
            <p:graphicImage value="/images/cars/.jpg"/>   
             <h:outputText value="#{juego.idUser.user}" />  

           <p:commandButton id="selectButton" update=":form:detalle" oncomplete="juegoDialog.show()" icon="ui-icon-search" title="View">  
                <f:setPropertyActionListener value="#{juego}" target="#{juegoBean.seleccionadoFile}" />  
        </p:commandButton>  
        </h:panelGrid>  
    </p:panel>  
<p:colum>
</p:dataGrid> 
```

# ruby-on-rails - 我可以在 Ruby on Rails 中将 attr_accessible 用于 PayPal IPN 吗？

> ID：14490106
> 
> 赞同：2
> 
> 时间：2013-01-23T21:52:45.603
> 
> 标签：ruby-on-rails, paypal

我使用这个 RailsCast 来创建购物车系统的一部分，[http: //railscasts.com/episodes/142-paypal-notifications](http://railscasts.com/episodes/142-paypal-notifications)

那里有一段代码被 PayPal 调用以进行通知。

```
def create
  PaymentNotification.create!(:params => params, :cart_id => params[:invoice], :status => params[:payment_status], :transaction_id => params[:txn_id])
  render :nothing => true
end 
```

我在 Heroku 上试了一下，没有警告也没有错误。PaymentNotification 对象已在数据库中成功创建 - 但除了 id 之外，一切都为零！我打开heroku控制台并尝试：

```
irb(main):002:0> PaymentNotification.create!(:cart_id => "2", :status => "Complete", :transaction_id => "XYZXYZXYZXYZXYZ")
< => "2", :status => "Complete", :transaction_id => "XYZXYZXYZXYZXYZ") 
```

这给了我这个，

```
WARNING: Can't mass-assign protected attributes: cart_id, status, transaction_id 
```

为什么 Heroku 日志中没有出现此警告？为什么它仍然成功创建（是因为它只是一个警告，而不是一个错误？）

我可以只使用 attr_accessible 来处理这些事情吗？无论如何都必须验证通知（[https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-info-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-info-outside)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:05:28.137

For app security, you must add `attr_accessible` to your attributes.

On rails 4 is added this gem [https://github.com/rails/strong_parameters](https://github.com/rails/strong_parameters). Also

I recomend to you use adaptive payments. You can take a look to this post:

[Paypal Adaptive Payment for Ruby](https://stackoverflow.com/questions/14451587/paypal-adaptive-payment-for-ruby/14456484#14456484)

# android - 如何在Android中创建一个覆盖视图，在按钮点击时切换

> ID：14490108
> 
> 赞同：2
> 
> 时间：2013-01-23T21:52:58.827
> 
> 标签：android

我想在单击按钮时创建和覆盖视图。就像在 Whatsapp 中单击笑脸按钮一样。

> 我创建了一个默认可见性为 GONE 的框架布局，并在笑脸按钮上添加了一个 onclick 侦听器来切换其可见性。

我的布局 XML：

```
 <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" >

        <ImageView
            android:id="@+id/smileyButton"
            android:layout_width="24dip"
            android:layout_height="48dip"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:contentDescription="@string/contactIconContentDescription"
            android:src="@drawable/emo_im_happy" />

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/smileyButton" >

            <TextView
                android:id="@+id/chat_smiley_list"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@android:color/white" />
        </FrameLayout>
    </RelativeLayout> 
```

我已将 onClickListener 添加到用于切换 chat_smiley_list 可见性的笑脸按钮。

除了一些定位问题，我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:57:59.023

我认为您可以使用上下文菜单：[文档](http://developer.android.com/guide/topics/ui/menus.html#context-menu)

# c# - 按钮开始故事板动画

> ID：14490109
> 
> 赞同：1
> 
> 时间：2013-01-23T21:52:58.600
> 
> 标签：c#, wpf, xaml, storyboard, buttonclick

** 编辑问题 * *

> ```
> Storyboard s = (Storyboard)TryFindResource("kupmove");
> s.Stop(); 
> ```

**这不会停止正在进行的动画，我该如何停止它？**

* * *

如何在 Visual c# 中使用按钮单击事件开始情节提要？

这是我用来开始故事板的代码：

```
 Storyboard s = (Storyboard)TryFindResource("kupmove");
    Storyboard.SetTargetName(s, "geometryModel3D");
    s.Begin(); 
```

**动画没有开始，我收到以下错误：**

`'Children' property value in the path '(0).(1)[2].(2)' points to immutable instance of 'System.Windows.Media.Media3D.Transform3DCollection'`

*这是我的 xaml 故事板：*

```
<Storyboard x:Key="kupmove" 
            RepeatBehavior="Forever"
            AutoReverse="True">
  <Rotation3DAnimationUsingKeyFrames Storyboard.TargetProperty="(Model3D.Transform).(Transform3DGroup.Children)[2].(RotateTransform3D.Rotation)"
                                     Storyboard.TargetName="geometryModel3D">
    <EasingRotation3DKeyFrame KeyTime="0">
      <EasingRotation3DKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingRotation3DKeyFrame.EasingFunction>
      <EasingRotation3DKeyFrame.Value>
        <AxisAngleRotation3D Axis="0,1,0"
                             Angle="0" />
      </EasingRotation3DKeyFrame.Value>
    </EasingRotation3DKeyFrame>
    <EasingRotation3DKeyFrame KeyTime="0:0:1">
      <EasingRotation3DKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingRotation3DKeyFrame.EasingFunction>
      <EasingRotation3DKeyFrame.Value>
        <AxisAngleRotation3D Axis="0,1,0"
                             Angle="179" />
      </EasingRotation3DKeyFrame.Value>
    </EasingRotation3DKeyFrame>
    <EasingRotation3DKeyFrame KeyTime="0:0:2">
      <EasingRotation3DKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingRotation3DKeyFrame.EasingFunction>
      <EasingRotation3DKeyFrame.Value>
        <AxisAngleRotation3D Axis="0,-1,0"
                             Angle="1" />
      </EasingRotation3DKeyFrame.Value>
    </EasingRotation3DKeyFrame>
    <EasingRotation3DKeyFrame KeyTime="0:0:3">
      <EasingRotation3DKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingRotation3DKeyFrame.EasingFunction>
      <EasingRotation3DKeyFrame.Value>
        <AxisAngleRotation3D Axis="0.009,-0.014,1"
                             Angle="90.005" />
      </EasingRotation3DKeyFrame.Value>
    </EasingRotation3DKeyFrame>
  </Rotation3DAnimationUsingKeyFrames>

  <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Model3D.Transform).(Transform3DGroup.Children)[4].(TranslateTransform3D.OffsetX)"
                                 Storyboard.TargetName="geometryModel3D">
    <EasingDoubleKeyFrame KeyTime="0:0:2"
                          Value="0">
      <EasingDoubleKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingDoubleKeyFrame.EasingFunction>
    </EasingDoubleKeyFrame>
    <EasingDoubleKeyFrame KeyTime="0:0:3"
                          Value="0">
      <EasingDoubleKeyFrame.EasingFunction>
        <CubicEase EasingMode="EaseInOut" />
      </EasingDoubleKeyFrame.EasingFunction>
    </EasingDoubleKeyFrame>
  </DoubleAnimationUsingKeyFrames>

</Storyboard> 
```

*** 编辑 ***

建议的解决方案不起作用，实际上我对触发情节提要的先前代码没有错误，它可以工作，但我认为因为已经有一个使用以下代码启动的动画，导致异常。告诉我一种在它已经运行时停止它的方法：

```
>    DoubleAnimation myAnimation = new DoubleAnimation();
>    myAnimation.From = 1;
>    myAnimation.To = 361;
>    myAnimation.Duration = new >Duration(TimeSpan.FromMilliseconds(1000));
>    myAnimation.RepeatBehavior = RepeatBehavior.Forever;
>    rotateTransform.Rotation.BeginAnimation(AxisAngleRotation3D.AngleProperty, myAnimation);
>    geometryModel3D.Transform = rotateTransform; 
```

我想我必须先停止这个 -> **geometryModel3D.Transform = rotateTransform;** 因为我要触发的动画已经使用此代码运行。在使用 xaml 代码中声明的自己的参数重新启动我的故事板之前，我如何才能停止此操作。

> 使用 BeginAnimation 命令使用第二个参数空值停止 geometryModel3D.Transform，没有帮助。第一个异常仍然发生。

我认为问题从这里开始：

```
Storyboard s = (Storyboard)TryFindResource("kupmove");
s.Stop(); 
```

此命令不会停止正在进行的动画。所以一定有什么问题，这就是为什么 s.Begin() 还没有触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:02:57.230

use x:Name instead of x:Key and call the Begin() method on that storyboard instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:02:41.507

不久前，一位绅士发布了一个我读到的答案，显示如下：

“尝试通过它的键调用情节提要，即不使用`TryFindResource()`”

也许你可以尝试用它的实例化名称来调用它，`kupmove`

我只是读了这个，用户删除了他的答案。对不起，如果它没有帮助。

此外，正如另一位用户在上面发布的那样，使用`x:Name`而不是`key`, 为情节提要创建名称，然后使用该初始化名称调用它。

# java - 预期位置参数计数：1，实际参数：[]

> ID：14490111
> 
> 赞同：6
> 
> 时间：2013-01-23T21:53:08.237
> 
> 标签：java, hibernate

当我尝试使用 DaoImpl 类中的 HIbernate 执行存储过程时，出现以下异常。我不确定出了什么问题..我尝试了所有方法来解决它，但没有解决问题。谁能帮助我，找出代码或映射文件有什么问题。我尝试修复的越多，我得到的异常就越多。我正在连接到 Oracle 9i DB。从真正的 2 周开始，我一直在努力解决这个问题。任何人都可以帮我解决这个问题。

### 映射文件：

```
<hibernate-mapping>

    <sql-query name="proc_drsrr_sel_ValDDSummaryBal">
    <!--CALL proc_drsrr_sel_ValDDSummaryBal(:param1)]]>-->
    { call DEFAULT_SCHEMA.proc_name(?,:param1) } 
```

### 主类：

```
public static void main(String[] args) {
        String procName = "proc_name";// args[0];
        String params = "param1:500089" ; 
```

### DAO 实现：

```
@SuppressWarnings("unchecked")
    public void callProc(String procName, Map paramMap) throws SQLException {
        Session session = null;
        Transaction tx = null;
        try {

            session = HibernateUtils.getSessionFactory().getCurrentSession();
            tx = session.beginTransaction();
            String dbURL = session.connection().getMetaData().getURL().toString();
            System.out.println("Conenction DB URL "+ dbURL );
            tx.setTimeout(5);
            String[] keys = new String[paramMap.size()];
            keys = (String[]) paramMap.keySet().toArray(keys);

            Query query = session.getNamedQuery(procName)
            .setParameter("param1", "5501010");

            }

            List result = query.list();
            System.out.println(query.getQueryString());
            for (int i = 0; i < result.size(); i++) {
                // logging the information.
                log.info(i);

            }
            tx.commit();
        } catch (RuntimeException exception) {
            exception.printStackTrace();
            try {
                tx.rollback();
            } catch (RuntimeException rbe) {
                log.error("Couldn’t roll back transaction", rbe);
                rbe.printStackTrace();
            }
            throw exception;
        } finally{   
                   if(session !=null){   
                      session.flush();      
                      session.close();      
            } 
```

### cfg.xml

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.url">jdbc:oracle:thin:@ldap://hdsoid.ute.ovi.com:3060/UT1DEV,cn=OracleContext,dc=ute,dc=ovi,dc=com</property>
        <property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
        <property name="hibernate.connection.username">nameapp</property>
        <property name="connection.password">nameapp</property>
        <property name="connection.pool_size">1</property>   
        <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
       <!--   <property name="connection.release_mode">after_statement</property> -->
       <property name="default_schema">DEFAULT_SCHEMA</property>

        <property name="current_session_context_class">thread</property>
        <property name="hibernate.show_sql">true</property>
        <!-- mapping files -->
        <mapping resource="com/ovi/domain/hibernate.hbm.xml" />
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-03T11:45:32.300

您缺少设置`?`所谓的参数`positional parameter`。与命名参数相反`:foo`

当您有一些 SQL 时，您还必须确保注释中没有任何问号！这就是我刚刚遇到的。评论也是`:`如此，特别是如果它们后面有空格。

# zend-framework2 - 全局和模块配置交互

> ID：14490113
> 
> 赞同：0
> 
> 时间：2013-01-23T21:53:13.487
> 
> 标签：zend-framework2

假设我有全局应用程序配置

```
return array(

'languages' => array(
    'allowed'   => array('de', 'en'),
),

); 
```

我有带有路由描述的模块配置。我需要基于全局配置的路由，因此我需要读取模块中的全局应用程序配置，以根据语言->允许的值（段类型路由的约束）组成我的路由

从模块配置脚本中获取全局配置值的最佳方法是什么？操作配置文件中的数据而不是简单的数组返回是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:56:54.637

你应该多想一下你的问题。您想根据您的配置创建路由结构。配置可以来自任何地方：模块配置、本地配置和全局配置。因此，很难将模块的配置基于全局配置。

您可以做的是稍后创建路线。例如，您在模块`Foo`中创建如下配置：

```
'routes_foo' => array(
  'bar' => array(
    'type'    => 'segment',
    'options' => array(
      'route' => ':locale/foo/bar',
      'constraints' => array(
        'locale' => '%LOCALE%',
      ),
    ),
  ),
), 
```

在你的模块类中：

```
namespace Foo;

class Module
{
    public function onBootstrap($e)
    {
        $app = $e->getApplication();
        $sm  = $app->getServiceManager();

        $config  = $sm->get('config');
        $routes  = $config['routes_foo');
        $locales = $config['languages']['allowed'];

        $routes = $this->replace($routes, array(
            '%LOCALE%' => sprintf('(%s)', implode('|', $locales)
        );

        $router = $sm->get('router');
        $router->routeFromArray($routes);
    }

    public function replace($array, $variables)
    {
        foreach ($array as $key => $value) {
            if (is_array($value)) {
                $array[$name] = $this->replace($value, $variables);
            }

            if (array_key_exists($value, $variables)) {
                $array[$name] = $variables[$value];
            }
        }

        return $array;
    }
} 
```

发生的情况是您从配置中获取路由（这些路由不会自动注入路由器）。您还可以从全局配置中加载所有语言。然后你的“自定义”路由（在几个地方）有一个“神奇的”配置键，它将被区域设置的正则表达式约束替换：`(en|de)`. 然后将解析后的配置注入路由器。

# c# - 如何（自动）为 MVC + Entity 生成 webapi 控制器或一般查询所有类型

> ID：14490115
> 
> 赞同：6
> 
> 时间：2013-01-23T21:53:32.383
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, entity, controllers

作为 MVC4 + Entity + WebAPI 的新手，我很沮丧，为了简单地拥有 GET、POST 控制器处理程序和到数据模型的自定义映射。

我想我问的是有没有一个生成工具，例如从你的数据类中创建你的控制器类，这样我就可以直接从数据中执行简单的 GET 命令？

制作通用 RESTful API 的方法是什么，因此可以这样制作命令

获取 api/1.0/{genericdatatype}/{id}

通用数据类型可以是任何模型而没有特定控制器？假设我不需要 PUT（通过 MVC 应用程序处理），所以我真的不需要 POST 验证等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:42:59.250

有一个名为 MVC Scaffolding 的工具/包，它将根据您的模型构建您的控制器。

[http://mvcscaffolding.codeplex.com/](http://mvcscaffolding.codeplex.com/)

[http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)

至于通用部分，这是一个非常漫长和困难的过程，需要大量时间。如果有人对此有很好的答案，我也很乐意看到这一点。

编辑：我花了一些额外的时间来研究通用部分。看起来其他人也有类似的想法，并在这里提出了一个几乎相同的问题：[Generic Web Api controller to support any model](https://stackoverflow.com/questions/12077361/generic-webapi-controller)。

归根结底，他们在那次谈话中表达了一些非常好的担忧。您如何处理不同类型的 ID？它们是否总是需要成为字符串然后解析出来？一旦你进入更多的业务规则，我怀疑你在控制器后面会有一个非常复杂的业务层。也就是说，我会说你最好坚持使用直接脚手架，而不是构建通用 API。当然，它可能可以完成，但是 API 背后的时间和疯狂解析代码的成本是多少？只是我的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-22T20:39:09.360

对于原始海报来说，这个答案可能为时已晚，但也许其他人可以使用它。

我刚刚为 MVC 5 代码优先 CRUD 操作制作了这个通用的基本 api 控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using My.Models;
using System.Data.Entity.Validation;

namespace My.Controllers.Api
{
  public abstract class CrudController<TEntity>
    : ApiController where TEntity : class
  {
    private readonly MyContext _db = new MyContext();
    private readonly DbSet<TEntity> _dbSet;

    protected CrudController(Func<MyContext, DbSet<TEntity>> dbSet)
    {
      _db = new EtlContext();
      _dbSet = dbSet(_db);
    }

    public IEnumerable<TEntity> Get()
    {
      return _dbSet.AsEnumerable();
    }

    public HttpResponseMessage Post(TEntity entity)
    {
      try
      {
        if (!ModelState.IsValid)
          return Request.CreateResponse(HttpStatusCode.BadRequest);

        _db.Entry(entity).State = EntityState.Added;

        _db.SaveChanges();

        return Request.CreateResponse(HttpStatusCode.Created);
      }
      catch (DbEntityValidationException)
      {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
      }
      catch (DbUpdateException)
      {
        return Request.CreateResponse(HttpStatusCode.Conflict);
      }
    }

    public HttpResponseMessage Put(TEntity entity)
    {
      try
      {
        if (!ModelState.IsValid)
          return Request.CreateResponse(HttpStatusCode.BadRequest);

        _db.Entry(entity).State = EntityState.Modified;

        _db.SaveChanges();

        return Request.CreateResponse(HttpStatusCode.OK);
      }
      catch (DbEntityValidationException)
      {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
      }
      catch (DbUpdateConcurrencyException)
      {
        return Request.CreateResponse(HttpStatusCode.NotFound);
      }
      catch (DbUpdateException)
      {
        return Request.CreateResponse(HttpStatusCode.Conflict);
      }
    }

    public HttpResponseMessage Delete(TEntity entity)
    {
      try
      {
        _db.Entry(entity).State = EntityState.Deleted;

        _db.SaveChanges();

        return Request.CreateResponse(HttpStatusCode.OK);
      }
      catch (DbUpdateConcurrencyException)
      {
        return Request.CreateResponse(HttpStatusCode.NotFound);
      }
    }

    protected override void Dispose(bool disposing)
    {
      _db.Dispose();
      base.Dispose(disposing);
    }
  }
} 
```

我仍然必须像这样为每个 DbSet 创建子类：

```
public class CustomersController 
  : CrudController<Customer>
{
  public CustomersController()
    : base(db => db.Customers)
  {}
}

public class ProductsController 
  : CrudController<Product>
{
  public ProductsController()
    : base(db => db.Products)
  {}
} 
```

使此路由工作：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}",
 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T21:54:58.467

我自己提供了我们团队采用的替代方案。[数据](http://www.odata.org/)。它是构建初始 RESTful 模板的一种快速方法，比 CRUD 更强调查询，它使数据可用，而无需手动构建端点。我现在正在为一个在 Web API 服务器上具有 OData 的项目做前端，这可以很好地释放后端开发人员来处理比集合端点更紧迫的问题。

它也适用于实体框架。

# ios - MPMediaQuery 和 iTunes 匹配的问题

> ID：14490120
> 
> 赞同：2
> 
> 时间：2013-01-23T21:54:08.423
> 
> 标签：ios, objective-c, icloud, mpmediaitem, mpmediaquery

我需要显示设备上当前所有播放列表的列表。问题是，在打开 iTunes Match 的设备上，任何数量的播放列表都可能在手机上保存零个项目。由于（据我所知）没有可靠的方法来触发`MPMediaItem download`您使用的`AVAudioPlayer`，我想过滤掉任何没有任何本地条目的播放列表。现在我可以让它循环播放单个播放列表并删除没有`assetURL`. 我尝试过滤整个音乐库以获取播放列表

```
MPMediaQuery *songsQuery = [MPMediaQuery songsQuery];
[songsQuery addFilterPredicate:[MPMediaPropertyPredicate predicateWithValue:[NSNumber numberWithBool:NO] forProperty:MPMediaItemPropertyIsCloudItem]];
songsQuery.groupingType = MPMediaGroupingPlaylist; 
```

但是，当我循环浏览“收藏”数组时，它似乎根本没有过滤掉任何歌曲。我会尝试按歌曲是否有 过滤`assetURL`，但当然你不能过滤。

有没有人有一个相当快速的方法来完成这个？（或者，有没有人想出一种体面的方法来触发`MPMediaItem download`，因为 Apple 没有关于处理 iTunes Match 的开发人员文档？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:34:35.660

过滤器`MPMediaItemPropertyIsCloudItem`适用于`MPMediaItem`s 而不是`MPMediaItemCollection`s。因此该`collections`数组不会过滤任何云项，因为它是一个`MPMediaItemCollection`s 数组。但是该`items`数组将过滤云项，因为它是一个 s 数组`MPMediaItem`。

从 iOS 6 开始，没有公共 API 可以通过第三方应用程序触发云项目的下载。用户必须切换到内置的音乐应用程序才能执行此操作。

# python - tkinter canvas：文本对象可变字体大小？

> ID：14490121
> 
> 赞同：4
> 
> 时间：2013-01-23T21:54:11.667
> 
> 标签：python, text, tkinter, tkinter-canvas

我正在使用 tkinter 画布制作一些漂亮的图片，并在圆圈顶部覆盖文本，如下图所示：

[http://static.guim.co.uk/sys-images/Guardian/Pix/pictures/2012/11/6/1352220546059/Causes-of-deaths-graphic-008.jpg](http://static.guim.co.uk/sys-images/Guardian/Pix/pictures/2012/11/6/1352220546059/Causes-of-deaths-graphic-008.jpg)

我希望字体大小取决于圆圈大小所依赖的相同数字。

```
tempfont = tkFont.Font(family='Helvetica',size=int(round(ms*topnode[1])))
self.display.create_text(center[0],center[1],fill = "#FFFFFF",text = int(round(ms*topnode[1])),font = tempfont) 
```

我的问题是，当我使用上面的代码时，覆盖的文本对于每个文本对象都是一个恒定的大小。文本本身是正确的，因为它显示了我希望字体大小的数字，只是字体大小不正确。我已经尝试在大小定义中放入常量整数（按预期工作），并在上述两行代码之后立即添加一个 del(tempfont)，但我还没有找到解决这个问题的方法。

我究竟做错了什么？

这是一个重现问题的独立小程序：

```
from Tkinter import *
import tkFont

class TestApp(Frame):
    def __init__(self, master=None, height = 160, width = 400):
        Frame.__init__(self, master)
        self.grid()
        self.createWidgets()

    def createWidgets(self):
        self.display = Canvas(self, width = 800, height = 320, bg = "#FFFFFF")
        self.display.grid(row=0,column=0)

        def recurtext(tsize):
            if tsize > 20:
                recurtext(tsize-10)
            tempfont = tkFont.Font(family='Helvetica',size=tsize)
            self.display.create_text(800 - (tsize*12),160, text = str(tsize), font = tempfont)

        recurtext(60)

app = TestApp()
app.master.title("Test")
app.mainloop() 
```

要点是`recurtext`递归地调整字体大小，并以该大小写`shows`出字体大小......或者我认为它应该。也许这是 tkinter 的一个错误，但我仍然抱有一些希望，即我是这里逻辑错误的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:47:01.593

我以前从未遇到过这种行为；它看起来像一个 Tkinter 错误。好消息是，似乎有一种解决方法。如果您给每种字体一个唯一的名称，问题似乎就消失了。

以下示例显示了多行，每行具有不同的字体大小：

```
import Tkinter as tk
import tkFont

class Example(tk.Frame):
    def __init__(self, parent):
        tk.Frame.__init__(self, parent)

        self.display = tk.Canvas(self, width=400, height=600, background="black")
        self.display.pack(side="top", fill="both", expand=True)
        y = 10
        for size in range (2, 38, 2):
            tempfont = tkFont.Font(family='Helvetica',size=size, 
                                   name="font%s" % size)
            self.display.create_text(10, y, fill = "#FFFFFF",text = size, 
                                     font = tempfont, anchor="nw")
            y = y + tempfont.metrics()["linespace"]

if __name__ == "__main__":
    root = tk.Tk()
    frame = Example(parent=root)
    frame.pack(side="top", fill="both", expand=True)

    root.mainloop() 
```

# php - 向 symfony 2 表单域添加标签

> ID：14490124
> 
> 赞同：0
> 
> 时间：2013-01-23T21:54:16.833
> 
> 标签：php, symfony

我正在尝试修改一段使用 Symfony 2 框架生成输入字段的代码。在这种情况下，他使用默认标签创建的字段等于该字段的名称 id；“数量”。

```
<?php 
//++++++++++ descrizione
echo $view['form'] -> row($form["amount"], array(
    //widget
    "widgetArgs" => array(
        "attr" => array(
            'class' => 'input-small tooltipRight', 
            'id' => "gift_amount"
            ),
            "tooltip"=>"gift.tooltip.amount",
            "translation_domain" =>"brand"

         ),
   "labelArgs" => array(
        "label_attr" => array(
            'class' => 'control-label', 
        )) ,"rowType"=>2
      )
  );
?> 
```

我如何编辑它以使其显示自定义标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:01:31.630

您必须添加以下`label`属性：

```
<?php 
echo $view['form']->row($form["amount"], array(
    'widgetArgs' => array(
        "attr" => array(
            'class' => 'input-small tooltipRight', 
            'id' => "gift_amount"
            ),
            'tooltip'=>'gift.tooltip.amount',
            'translation_domain' =>'brand'
         ),
     'label'  => 'My ammount',
  )); 
```

# opengl - GLGS：如何将采样器“连接”到纹理？

> ID：14490126
> 
> 赞同：1
> 
> 时间：2013-01-23T21:54:33.077
> 
> 标签：opengl, glsl, geometry-shader

我正在尝试从几何着色器中的 3D 纹理中读取：

```
#version 150

layout(points) in; // origo of cell
layout(points, max_vertices = 1) out;

uniform sampler3D text;

void main (void) 
{   
    for(int i = 0; i < gl_in.length(); ++i)
    {
        // texture coordinates:
        float u, v, w;

        // set u, v, and w somehow
        ...

        float value = texture(text, vec3(u, v, w)).r;

        bool show;

        // set show based on value somehow:
        ...

        if(show) {      
            gl_Position = gl_in[i].gl_Position;
            EmitVertex();
            EndPrimitive();  
        }  
    }
} 
```

这就是我在初始化 GL 代码中设置纹理的方式：

```
int nx = 101;
int ny = 101;
int nz = 101;
float *data = new float[nx*ny*nz];
// set data[] somehow:
...
glEnable(GL_TEXTURE_3D);
glBindTexture(GL_TEXTURE_3D , texture); 
glTexParameteri( GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
glTexParameteri( GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
glTexImage3D( GL_TEXTURE_3D, 
                  0,      // level-of-detail number. 0 is the base image level.
             GL_RED, // internal format
         nx, ny, nz,
                  0,      // border
             GL_RED, // pixel format 
           GL_FLOAT,  // data type of the pixel data 
               data); 
```

**但是如何将几何着色器中的采样器“文本”与我的纹理相关联？**

到目前为止，我还没有告诉 OpenGL 有一个名为“text”的采样器，它应该对纹理进行采样。

编辑：我尝试了以下方法：

```
GLint textLoc = glGetUniformLocation(program, "text");
glUniform1i(textLoc, 0); // sends 0 to "text" in shader
// why do I not just hardcode 0 inside the geometry shader instead ? 
glBindTexture(GL_TEXTURE_3D , texture); 
glActiveTexture(GL_TEXTURE0); // same as 0 ?
GLuint sampler_state = 0;
glGenSamplers(1, &sampler_state);
glBindSampler(0, sampler_state); // what does this do? 
```

这里有什么问题？

# ruby-on-rails - 我将如何在 Rails 中正确地形成这个控制器？

> ID：14490128
> 
> 赞同：0
> 
> 时间：2013-01-23T21:54:37.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当在 URL 中获取类时，我将如何在我的控制器中定义运行并执行以下操作；

我需要为 current_user 找到所有“工作”我猜是这样的；

```
@joblisting = current_user.Joblisting.find(params[:id]) 
```

然后我需要接受这些工作并检查他们的列“job_status”是否包含“已完成”文本或其他“

如果jobs_status是“完成”那么我需要运行代码所以我做一个“如果”

我必须通过计算。

```
@joblisting = current_user.Joblisting.find(params[:id])
if @joblisting.where(:project_status => "completed")
  number_to_currency(current_user.Joblisting.where(:project_status => 'completed').sum('jobprice') * 1.60 - current_user.Joblisting.where(:project_status => 'completed').sum('jobprice')) 
  Notifier.notify_payout(current_user).deliver
  @joblisting.project_status = 'paid'
  @joblisting.save
end 
```

这就是我所拥有的，我坚持将计算传递给 Notifier.notify_payout 模板。

我敢肯定，谁比我更了解 Rails，谁都会马上看到我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:19:04.003

我的回答不会给你你想要的代码。我这样做是因为我觉得你还有很多东西要学，但我会告诉你该怎么做，只是不给你代码。如果你说这行代码有效....

```
 @joblisting = Joblisting.where(:developer_id => current_developer[:id])
 if @joblisting.where(:project_status => "completed")
   Notifier.notify_payout(current_developer).deliver
 end 
```

那么就这样吧。至于将`:project_status`列从“已完成”更新为“已支付”，可以有多种处理方式。您可以在模型中创建一个方法（我们称之为`project_is_paid`），将项目状态更改为已付款，并`notify_payout`在成功时在方法中声明它。

但这可能会让其他人在查看您的代码并想知道为什么突然间数据库内的记录从“已完成”变为“已支付”时会感到困惑。此外，您还必须将作业列表对象作为参数传递，这更加工作。

另一种思考方式是在控制器内部编写一个简单的条件语句。如果邮件已送达，则调用方法`project_is_paid`。请注意不要开始将所有这些逻辑添加到您的控制器中，您的控制器应该简洁明了。让模型处理逻辑。

最后，我想回到您发布的工作控制器代码。我敢打赌，您可以将以下两行合二为一。

```
 @joblisting = Joblisting.where(:developer_id => current_developer[:id])
 if @joblisting.where(:project_status => "completed") 
```

我为什么这么说？好吧，您正在对同一张表进行两次查询`Job Listings`。如果您无法弄清楚如何...[链接，这里有一点帮助](http://guides.rubyonrails.org/active_record_querying.html)

如果我未能在评论中回答您的最新问题，我很抱歉。在您的问题中发布更新，我很乐意更新我自己的答案。

# android - 创建要打开的活动

> ID：14490133
> 
> 赞同：0
> 
> 时间：2013-01-23T21:55:03.130
> 
> 标签：android, android-activity

我想在我侧滚动时打开活动`mainActivity`：“Like Playstore”。

我创建了 3 个活动，但我不知道如何插入到我的`mainActivity`.

```
public CharSequence getPageTitle(int position) {
    switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase();
            /** Here I must add the code to open activity but I don't know how ;-) **/
        case 1:
            return getString(R.string.title_section2).toUpperCase();
        case 2:
            return getString(R.string.title_section3).toUpperCase();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:03:21.673

看着

[http://developer.android.com/guide/components/activities.html#StartingAnActivity](http://developer.android.com/guide/components/activities.html#StartingAnActivity)

和

[http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent](http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent) )

它应该阐明您如何从您的活动开始新活动。

# java - 从android中的资产文件夹中读取文本文件

> ID：14490134
> 
> 赞同：1
> 
> 时间：2013-01-23T21:55:05.117
> 
> 标签：java, android

> **可能重复：**
> [从 Android 中的资产文件夹中读取文件时出现问题](https://stackoverflow.com/questions/9674815/trouble-with-reading-file-from-assets-folder-in-android)

嘿，我正在尝试从 android 的 assets 文件夹中读取文件，这就是我目前所拥有的

```
public class TestingMusicDAO {

private static final String TAG_NAME = "MUSIC_TESTING_DAO";
private static List<Song> songs;
private ContentResolver contentResolver;
private static Context testingcontext;
private File fFile;
InputStream inputStream = null;

public TestingMusicDAO( Context context) throws IOException{
    Log.d(TAG_NAME, "Setting up testing songs");
    contentResolver = context.getContentResolver();
    testingcontext = context;
    getAllSongsFromFile();

}

public static void getAllSongsFromFile() throws IOException{
    Log.d( TAG_NAME, "Tryign to Get all Songs" );
    InputStream is;

    is = testingcontext.getAssets().open("testing");
    Log.d( TAG_NAME, "Did that work?" );
    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(is));
    String inputLine;
    while((inputLine = bufferReader.readLine()) != null){
        processLine(inputLine);
    }
    bufferReader.close();

}

private static void logSongs() {
    for(Song song : songs)
        Log.d( TAG_NAME, song.toString() );
}

public List<Song> getAllSongs() {
    return songs;
}

public static void processLine(String aLine) {
    Scanner scanner = new Scanner(aLine);
    scanner.useDelimiter("=");
    if(scanner.hasNext()){
        String title = scanner.next();
        String artist = scanner.next();
        String album = scanner.next();
        String id = scanner.next();
        String albumId = scanner.next();
        String trackOrder = scanner.next();
        Log.d(TAG_NAME, "Title = " + title + "Artist = " + artist + "Album = " + album + "ID = " + id + "AlbumID = " + albumId);
    }
    else {
        Log.d(TAG_NAME, "Empty or invalid line. Unable to process");
    }

}

} 
```

所以我基本上调用了 TestingMusicDAO 构造函数，从那里我想单独读取文件的每一行以便能够解析它们，但它一直给我一个 FileNotFoundExecption: testing。任何想法都会非常感谢！

彼得，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:13:41.427

假设异常来自该行，那么您的文件夹的根目录中`is = testingcontext.getAssets().open("testing");`没有命名文件。`testing``assets/`

# c# - 在 C# 中创建 ASN1 编码签名以发送到 Java

> ID：14490135
> 
> 赞同：3
> 
> 时间：2013-01-23T21:55:11.993
> 
> 标签：c#, java, certificate, asn.1

我有一个私人/公共安全证书。我的 Java 同行拥有公钥。我需要获取一个字符串，对其进行签名，然后将其发送到 Java 以验证数据和签名。

微软和世界其他地方如何对数据进行编码/签名似乎是一个众所周知的问题，即字节的处理方式。众所周知，我找不到解决方案。如果他们拿走了我的字符串和私钥，他们显然可以正确签名并验证它。如果我使用我的字符串，我可以在 .Net 中对其进行签名和验证。我已经看到了许多从 ASN1 转换为 Microsoft 格式（我认为是 P1363）的方法，但没有从 Microsoft、C# 转换为 Java 的 ASN1。我不知道发生的事情足以理解如何进行逆向工程。

我已经探索了[http://www.codeproject.com/Articles/25487/Cryptographic-Interoperability-Keys](http://www.codeproject.com/Articles/25487/Cryptographic-Interoperability-Keys)但最终结果不是 java 端所需要的。我可以签署一个字符串，我得到一个签名，但 Java 家伙告诉我它需要以 MC 开头，第一个字节是指示符。我没有看到这个。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T15:49:42.403

已经找到了一个解决方案，看起来就像我看到的其他一些示例，但由于某种原因，这个方法效果更好：（以为我解决它的人命名的方法；）

```
 private static byte[] Rays(byte[] sigBytes)
            {
                bool highMsbR = (sigBytes[0] & 0x80) != 0;
                bool highMsbS = (sigBytes[20] & 0x80) != 0;  

                MemoryStream stream = new MemoryStream();
                using (BinaryWriter writer = new BinaryWriter(stream))
                {
                    writer.Write((byte)0x30);
                    int len = 44 + (highMsbR ? 1 : 0) + (highMsbS ? 1 : 0);
                    writer.Write((byte)len);

                    // r
                    writer.Write((byte)0x02);
                    writer.Write((byte)(highMsbR ? 21 : 20));
                    if (highMsbR)
                        writer.Write((byte)0); 
                    for (int i = 0; i < 20; i++)
                        writer.Write(sigBytes[i]); 

                    // s
                    writer.Write((byte)0x02);
                    writer.Write((byte)(highMsbS ? 21 : 20));
                    if (highMsbS)
                        writer.Write((byte)0);
                    for (int i = 20; i < 40; i++)
                        writer.Write(sigBytes[i]);
                }

                byte[] bytes = stream.ToArray();
                return bytes;
            } 
```

# xcode - CHDataStructures CHMutableDictionary HIDDEN void createCollectableCFMutableDictionary

> ID：14490137
> 
> 赞同：0
> 
> 时间：2013-01-23T21:55:24.613
> 
> 标签：xcode, macos, compilation, chdatastructures

尝试在 OSX 10.8 上编译 trunk@711，而 Xcode 4.5.2 出现编译错误。

CHMutableDictionary.m:54

```
Conflicting types for 'createCollectableCFMutableDictionary' 
```

查看 CHMutableDictionary.h:14

```
HIDDEN void createCollectableCFMutableDictionary(CFMutableDictionaryRef* dictionary, NSUInteger initialCapacity); 
```

此处讨论了隐藏宏：[CHDataStructures.framework 不会在 Xcode 4 中为 iOS 编译，](https://stackoverflow.com/questions/5418832/chdatastructures-framework-wont-compile-for-ios-in-xcode-4)而是关于 iOS。

我猜需要一个补丁才能让它在 OSX 上编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:14:44.223

与其他问题不同，该`HIDDEN`属性不会影响此处的编译。它抱怨是因为 .m 文件`__strong`在第一个参数上有一个修饰符，但 .h 文件中缺少它。您可以通过将标头中的声明更改为：

```
HIDDEN void createCollectableCFMutableDictionary(__strong CFMutableDictionaryRef* dictionary, NSUInteger initialCapacity); 
```

# jquery - 调用 Web Api POST 总是从 jQuery 接收空值

> ID：14490149
> 
> 赞同：6
> 
> 时间：2013-01-23T21:56:54.223
> 
> 标签：jquery, ajax, asp.net-web-api

我正在使用 ASP.NET Web API，我玩得很开心。至少对于 GET。出于某种原因，当我尝试通过 jQuery`$.post()`或发送数据时，我`$.ajax()`收到的值`ApiController`始终为空。更奇怪的是，用 Fiddler 向它发送数据就可以了。我确定这是我如何在 javascript 中构造对象的问题，但我似乎找不到它。这是代码：

```
// C#
[HttpPost]
public HttpResponseMessage BeginTrack([FromBody]string requestContext) {

        // requestContext is always null.  Except when it comes from Fiddler.

        RequestContext ctx = null;
        if (Request.Content.Headers.ContentType.MediaType == "application/json") {
            try {
                ctx = Json.Decode<RequestContext>(requestContext);
            } catch (Exception ex) {
                return Request.CreateErrorResponse(HttpStatusCode.InternalServerError,
                    "An error has occured while processing your request.  See Exception for details.", ex);
            }
        }

        if (ctx == null) //... 
```

和 jQuery...

```
getRequestContext = function (source, docType, id, ip) {
    return { 
        SourceSite: source,
        DocumentType: docType,
        Id: id,
        HostUrl: document.URL,
        HostDomain: document.location.hostname,
        IPAddress: ip,
        UserAgent: navigator.userAgent,
        Referrer: document.referrer
    };
},

beginTracking = function (done, fail) {
    var data = JSON.stringify(getRequestContext('none', 'P', 0, 'ip'));
    $.post(
        serviceBase + "/Tracking/BeginTrack",
         data,
        done,
        "json"
        ).fail(fail);
} 
```

**更新**：显然这在 ASP.NET WebForms (.NET 3.5) 中可以正常工作，但在同一个项目的 MVC4 中却不行...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T22:19:40.313

您需要发送`"=mystring"`而不是`"mystring"`从 jquery 发送。这是一个已知问题，这是由于数据在 Web API 中的映射方式造成的。

# visual-studio-2010 - Visual Studio 实例之间的调试器设置更改

> ID：14490152
> 
> 赞同：0
> 
> 时间：2013-01-23T21:56:57.550
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我在 Visual Studio 2012 设置中遇到了最烦人的问题。每次我关闭并重新打开 Visual Studio 时，我都会发现 Just My Code 调试器设置被禁用。无论我启用多少次，下次打开 IDE 时总是禁用它。

知道这是怎么发生的吗？所有其他设置似乎都很好。只有“仅我的代码”设置发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:12:41.507

嗯，我发现了问题。

我在 Visual Studio 中安装了 .NET Reflector 插件，它显然不喜欢“只是我的代码”，因此它在启动时将其禁用。

# html - 删除所有逗号 tags

The last person in my position was comma happy in the title tags. I need to remove all commas in the title tags of 40,000 html product pages. Is there a regex expression to find all commas in a t

> ID：14490155
> 
> 赞同：0
> 
> 时间：2013-01-23T21:57:09.063
> 
> 标签：html, regex, replace, find, dreamweaver

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:16:35.353

您可以查找逗号之后`</title>`的第一个逗号之后的内容`<`，并将它们替换为空字符串：

```
,(?=[^<]*</title>) 
```

请注意，这假设您将在编辑器中执行此操作。当涉及到未知的 HTML 时，永远不要相信正则表达式。如果您将在代码中使用它，最好使用 DOM 解析器来正确确定替换范围。它还假定该字符串`</title>`不会出现脱离上下文（例如在 javascript 代码中），或者您可以在此正则表达式可能混淆的任何地方手动查看替换过程。（谁的想法是再次拥有 40k HTML 文件？希望他们不要创建新的标题标签！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:20:01.513

描述如何在 PHP 中做到这一点的好博客：[http ://www.thatsquality.com/articles/how-to-match-and-replace-content-between-two-html-tags-using-regular-expressions](http://www.thatsquality.com/articles/how-to-match-and-replace-content-between-two-html-tags-using-regular-expressions)

我认为要在 Dreamweaver 中执行此操作，您需要使用反向引用，例如：

`(<Title>\S\s),+(\S\s<\/Title>)`

用这个替换：$1 $2

**正如所指出的**- 需要循环成功 - 认为这是 IDE 将支持的东西，但情况可能并非如此。

好帖子在这里：[http ://somerandomdude.com/2006/05/25/dreamweaver-regular-expressions/](http://somerandomdude.com/2006/05/25/dreamweaver-regular-expressions/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-23T21:59:51.530

您可以使用此正则表达式：`([\,]+)`

# php - joomla模式窗口中的jquery ajax请求

> ID：14490157
> 
> 赞同：0
> 
> 时间：2013-01-23T21:57:12.810
> 
> 标签：php, jquery, ajax, joomla, modal-dialog

我正在使用本机 joomla 代码的模态窗口。我正在显示一个表单，该表单用于将邮件从一个用户发送到另一个用户。php，css和js代码在视图的tmpl文件（通过使用JDocument）中，js就是这样；

```
var $j = jQuery.noConflict();
$j(document).ready(function(){
    $j("#sendMail").click(function(){
        if(document.formvalidator.isValid(this.form)){
            $j("#mailSending").css("display","inline-block");

            $j.ajax({       
                type: \'POST\',
                url: \'index.php?option=mycomponent&tmpl=component&view=members\',
                data: $j("form#mailForm").serialize(),
                success: function(data,xhr,status){
                            $j("#mailSending").css("display","none");
                            $j("#mailMsg").css("display","inline-block");
                            setTimeout(function(){window.parent.SqueezeBox.close()},1000);
                            alert(status);
                         }
            });
        }else{
            $j("#mailMsg").text("'.JText::_('OFFER_EMPTY_FIELDS').'").css("display","inline-block").delay(1000).fadeOut("slow");
        }
    });                 
});'; 
```

当我触发单击功能以显示加载图标并执行控制器文件中的任务时，我正在使用 firebug 跟踪 xhr。php文件就这样结束了；

```
$send =& $mailer->Send();
    if ( $send !== true ) {
        echo 'Error sending email: ' . $send->getMessage();
    } else {
        echo 'Mail sent';
    } 
    exit(); 
```

而 php 函数进程结束时，模态窗口内的内容会随着 Mail Sent 的变化而变化。但我想隐藏加载 .gif 并显示一条消息。但是代码不会那样做。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:26:01.577

有趣的是，我喜欢 Ricardo 使用 jquery 而不是这个 "$j(document).ready(function(){})" 但关键是我认为用于触发 ajax 的按钮不是设置类型按钮它有按钮标签但没有属性。我认为它尝试了 ajax 和正常的提交过程并且它冲突。

感谢您的帮助，并为我的愚蠢错误感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:33:35.227

使用 ajax 发送表单并将其返回值插入 div 的代码

```
jQuery(function($) {
    $("form[name='srchForm']").submit(function(){
        $.get($(this).action, $(this).serialize() + "&tmpl=component&limitstart=0", function(data){
            $m =$('#main'); 
            $m.html(data).delay(10);
        });
        return false;
    });
}); 
```

# php - RNDecryptor : 解密 PHP 加密的数据时出错 (mcrypt_encrypt)

> ID：14490161
> 
> 赞同：2
> 
> 时间：2013-01-23T21:57:29.890
> 
> 标签：php, iphone, ios, mcrypt

我有一个问题......它杀了我

下面是我的代码：

PHP

1-我没有使用任何类型的预填充并生成了 16 字节的 IV。

2-我强制 pbkdf2 函数为 key & hmacKey 返回 8 个字节

```
$key = "myKey";
$plainText = "iphone";
$iv = mcrypt_create_iv(16, MCRYPT_RAND);
$keySalt = '12345678';
$hmacSalt = '12345678';
$_key = pbkdf2('SHA1', $key, $keySalt, 10000, 8, true);
$_hmacKey = pbkdf2('SHA1', $key, $hmacSalt, 10000, 8, true);
$cipherText = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $_key, $plainText, MCRYPT_MODE_CBC, $iv);
$dataWithoutHMAC = chr(2).chr(1).$keySalt.$hmacSalt.$iv.$cipherText; 
```

3-第一次尝试我将密文传递给 hash_hmac

```
$data = base64_encode($dataWithoutHMAC.hash_hmac('SHA256',$cipherText,$_hmacKey, true)); 
```

在 iOS 中解密时出现“et.robnapier.RNCryptManager 错误 -4301”。“这意味着我认为缓冲区太小”

4 秒尝试我将标题 (chr(2).chr(1).$keySalt.$hmacSalt.$iv) + 密文传递给了 hash_hmac（但我第一次尝试得到了相同的结果 [-4301]）

```
$data = base64_encode($dataWithoutHMAC.hash_hmac('SHA256',$dataWithoutHMAC,$_hmacKey, true)); 
```

在 iOS 中

```
decryptionError = nil;
NSData *fromPHPData = [@"AgExMjM0NTY3ODEyMzQ1Njc4WvrmgsFy6IoWNmm2hYL9N2jNVxU13Eo15cRyQRakRZ9WsjZ2CY/B5y4YkmG9uGdB2vHFpmpjsnm3O4d59Ex7Nw==" base64DecodedData];

NSData *fromPHPDecryptedData = [RNDecryptor decryptData:fromPHPData withPassword:@"myKey" error:&decryptionError];

NSLog(@"decryptionError %@", decryptionError);
NSString *fromPHPEcryptedStr = [fromPHPDecryptedData base64EncodedString];
NSLog(@"data : %@", fromPHPEcryptedStr); 
```

我在 iOS 中遇到的错误是：“操作无法完成。（net.robnapier.RNCryptManager 错误 -4301。）”

# isolation-level - 使用 Rob Conery 的 Massive 时未提交阅读

> ID：14490163
> 
> 赞同：0
> 
> 时间：2013-01-23T21:57:44.113
> 
> 标签：isolation-level, massive, nolock, read-uncommitted

在使用 Rob Conery 的 Massive 而不编写自己的查询时，有没有办法进行未提交的读取？

它适用于主要是只读的站点。网站的 CMS 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T03:56:53.550

做到这一点的作弊方法是当你为桌子做声明时。传入（nolock）提示：

```
var dirtytbl = new DynamicModel("northwind", tableName:"dbo.Products (nolock)", primaryKeyField:"ProductID"); 
```

如果你不想建立脏模型和干净模型，我希望你很少这样做，你可以直接使用 SQL：

```
var dirtyresult = tbl.Fetch("set transaction isolation level read uncommitted; SELECT * FROM Categories c INNER JOIN things t on c.id = t.id "); 
```

我将上面的代码用于系统对象和其他一些我知道这无关紧要的幕后代码，但是您应该始终非常谨慎，并知道当您降到该隔离级别时会遇到什么。请参阅博客文章*[您的读取有多脏？](http://sqlblog.com/blogs/andrew_kelly/archive/2009/04/10/how-dirty-are-your-reads.aspx)*

# css - webkit 关键帧动画上的明显口吃

> ID：14490165
> 
> 赞同：2
> 
> 时间：2013-01-23T21:57:57.880
> 
> 标签：css, css-animations

我正在使用关键帧动画在无限循环中在 3 分钟内非常缓慢地在包含 div 内从左到右移动大图像（1500px）。我打开了缓动和空转换 3D 属性，但是当图像接近 50% 关键帧和 100% 关键帧时，我仍然会卡顿。是否有任何其他解决方案可以创建平滑的缓动？

# .net - 在 ObservableCollection 上使用 WPF MVVM 绑定扼杀行为

> ID：14490169
> 
> 赞同：0
> 
> 时间：2013-01-23T21:58:17.347
> 
> 标签：.net, wpf, windows, user-interface, data-binding

我有一个`System.Windows.ListBox`绑定到`ObservableCollection<string>`ViewModel 中的 a，ListBox 的 ItemsSource 属性绑定到`LbItems`，构造函数包含以下代码：

```
public DataSetViewModel(DataSetModel _dataSet) {
    LbItems.CollectionChanged += lbFiles_CollectionChanged2;
} 
```

**考虑以下两种可能的方案选项......**

按预期显示（从`OpenFileDialog`ListBox 中的相等项中设置的项）：

```
private void lbFiles_CollectionChanged2(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) {
        this.DataSet.InputFileSet = LbItems.ToArray(); 
} 
```

项目显示为未执行（列表框中出现的每个选定项目中的 2 个`OpenFileDialog`）：

```
private void lbFiles_CollectionChanged2(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e) {
        MessageBox.Show("Why does this messagebox cause an binding error?");
} 
```

.

**更新**

下面是 OpenFileDialog 的代码：

```
private void btnLoad__Click(object sender, RoutedEventArgs e) {
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Multiselect = true;
        ofd.Filter = "CSV File (.csv)|*.csv";
        ofd.InitialDirectory = @"%userprofile%\Documents";
        ofd.Title = "Load CSV data sources";

        if (ofd.ShowDialog() == true) {
            ((DataSetViewModel)this.DataContext).LbItems.Clear(); //bad code - please comment on proper strucutre for MVVM 

            foreach (string str in ofd.FileNames) {
                ((DataSetViewModel)this.DataContext).LbItems.Add(str);
            }

        }
    } 
```

# javascript - 将 json 数组存储在 jqgrid 的隐藏列中

> ID：14490172
> 
> 赞同：3
> 
> 时间：2013-01-23T21:58:22.647
> 
> 标签：javascript, jquery, json, jqgrid

我有一个从远程 URL`jqgrid`的响应中获取的设置。`JSON`我发回的字段之一`JSON`是一组值。我正在尝试将此数组存储在隐藏列中，以便在选择网格中的元素时可以访问它，但`jqgrid`正在将我的数组转换为字符串`[object Object]`。

有没有办法说服`jqgrid`数组保持完整以便可以访问它们，`getRowData`或者您是否必须在服务器上将数组编码为字符串，然后在客户端对其进行解码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T07:39:24.520

隐藏列只是具有 CSS 样式的列`display: none`。您不能将对象放在`<td>...</td>`. 所以对象会通过调用`toString`方法自动转换为字符串。

您真正需要的是在**某处**保存对象（例如数组） 。当用户稍后选择一行网格时，将调用回调`onSelectRow`。回调将 rowid 作为参数。因此，最好的办法是通过 rowids 将您的自定义信息保存为字典（对象）。

其中一个选项是发送附加信息，而不是`rows`在服务器响应的一部分内部，而是在内部`userdata`。例如，您尝试当前以以下格式发送数据

```
{
    "page": 1
    "total": 7
    "records": 123
    "rows": [
        {"id": 10, "cell": ["cell11", "cell12", "cell13", [1, 2, 3]]}
        {"id": 20, "cell": ["cell11", "cell12", "cell13", [4, 5, 6]]},
        ...
        {"id": 90, "cell": ["cell11", "cell12", "cell13", [9, 8, 7]]}
    ]
} 
```

您可以将服务器响应修改为

```
{
    "page": 1
    "total": 7
    "records": 123
    "rows": [
        {"id": 10, "cell": ["cell11", "cell12", "cell13", [1, 2, 3]]}
        {"id": 20, "cell": ["cell11", "cell12", "cell13", [4, 5, 6]]},
        ...
        {"id": 90, "cell": ["cell11", "cell12", "cell13", [9, 8, 7]]}
    ],
    "userdata": {
        "10": [1, 2, 3],
        "20": [4, 5, 6],
        ...
        "90": [9, 8, 7]
    }
} 
```

在这种情况下，该`userdata`部分将由 jqGrid 自动保存在内部参数中`userData`（注意 JSON 数据中“userdata”中的大小写和`"userData"`作为参数的使用）。

现在，您将能够通过以下方式在任何回调中获取自定义数据：

```
onSelectRow: function (rowid) {
    var custom = $(this).jqGrid("getGridParam", "userData");

    // custom[rowid] is the data from userdata like [4, 5, 6]
} 
```

如果您无法修改服务器响应，您可以将自定义数据移动到回调`userdata`内部。有关此类代码的示例，`beforeProcessing`请参见[答案。](https://stackoverflow.com/a/14205263/315935)

# cakephp - cakephp - 本地化不起作用

> ID：14490173
> 
> 赞同：2
> 
> 时间：2013-01-23T21:58:33.930
> 
> 标签：cakephp, localization, cakephp-2.0

我有 cakephp 2，默认语言为“fre”，但由于某种奇怪的原因，在我生日的表格中，我的月份仍然是英语。这是我的代码

```
 echo $this->Form->input('User.birthday', 
        array (
            'label' => array('text'=>__("form_birthday", "true"), 
                      'class' => ''),

            'selected' => 'empty',
            'dateFormat' => 'MDY',
            'minYear' => date('Y') - 90,
            'maxYear' => date('Y') - 18,
            'separator'=> " ",
            'empty' => __('select', true)
        )
    ); 
```

任何人都知道我如何将月份名称翻译成法语。我的 default.po 已经有月份的法语翻译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:05:29.647

## CakePHP is PHP

As mentioned in [the docs](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html#localization-in-cakephp):

> There’s one other aspect of localizing your application which is not covered by the use of the translate functions, and that is date/money formats. Don’t forget that CakePHP is PHP :), therefore to set the formats for these things you need to use [setlocale](http://php.net/setlocale).

As such, to localize dates you need to call setlocale somewhere appropriate - such as your `AppController::beforeFilter` if it's a multilingual app - or `app/bootstrap.php` if it's single language.

## Alternatively

If instead of relying on `setlocale` (which is the better idea) you prefer a bit more control you can use the `'monthNames' => true` to use "normal" translations rather than the output of `strfrtime`. You'll find this [in the source](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/FormHelper.php#L2572). You can get a French po file from [the localized repository](https://github.com/cakephp/localized/blob/master/Locale/fre/LC_MESSAGES/cake.po) - which in addition to translating month names for you, also translates all the other standard texts that come out of the core.

## If all else fails

You should never land here - but if nothing is working (this *will* mean that there are mistakes in your application) you can just defined `monthNames` to a normal array of month number -> name, and this will take precedence over automatically derived month names.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T14:30:39.670

我将以下行放在引导文件中，效果很好。

```
Configure::write('Config.language', 'fra'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:52:46.387

**有几个步骤：**

首先，设置要使用的语言环境。
为该语言创建一个或多个 .po 文件。
使用 __() 或 __d() 辅助方法包装所有支持 l10n 的字符串。
这是我的一个项目的摘录：

```
uses ( 'L10n' );

class AppController extends Controller {
 public function beforeFilter() {
  /**
 * Derive the desired locale by reading the subdomain from
 * the HTTP_HOST server variable. Locale subdomains can use
 * either the 2 or 3 character ISO code. Information on locale
 * ISO codes is at http://www.loc.gov/standards/iso639-2/php/code_list.php.
 */
$this->L10n = new L10n();

/** Auto-detect the request language settings */
$this->L10n->get();

/**
 * Set the default "domain" for translations. The domain is the
 * same as the po file name in a given locale directory. e.g.
 * __d( 'homepage', 'message_id' ) would look for the
 * message_id key in homepage.po. Using the __() convenience
 * function will always look in default.po.
 */
$this->set( 'domain', 'default' );
}

# The rest of your AppController code
} 
```

该片段将设置语言。您需要做的就是在 /app/locale/eng/LC_MESSAGES/ 目录中提供适当的 .po 文件。我认为 CakePHP 书提供了足够的信息。[http://book.cakephp.org/view/161/Internationalization-Localization](http://book.cakephp.org/view/161/Internationalization-Localization)

如果您选择仅使用一个 .po 文件，您将使用 __() 帮助程序包装您的字符串。我选择了多个 .po 文件以避免一个庞大的文件，因此我使用了 __d() 帮助程序，以便我可以指定哪个域（域 == .po 文件的名称，没有 .po 扩展名）。

**更新**

我应该补充一点，您需要使用翻译行为来帮助您处理需要翻译的数据库内容。

# iphone - 如何知道何时使“NSTimer”无效

> ID：14490178
> 
> 赞同：6
> 
> 时间：2013-01-23T21:59:11.367
> 
> 标签：iphone, ios, objective-c, automatic-ref-counting, nstimer

这是我的问题：

我有一个模型类，其中有一个`NSTimer`我希望 Timer 在模型对象的整个生命周期内运行。初始化很简单：我在方法中只有以下代码行`init`：

```
self.maintainConnectionTimer = 
             [NSTimer scheduledTimerWithTimeInterval:1 
                                              target:self 
                                            selector:@selector(maintainConnection) 
                                            userInfo:nil 
                                             repeats:YES]; 
```

但是，我的问题是，**当模型从内存中释放时，如何使这个计时器失效？** 现在，这通常很容易，但是据我所知，当您安排`NSTimer`操作系统时，操作系统会维护指向 Timer 对象的强指针。

我应该如何处理？有没有在模型从内存中释放之前被调用的方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T22:54:31.833

`[NSTimer scheduledTimerWithTimeInterval:...]` *保留目标*，因此如果目标是*self*，那么您的模型类实例将永远不会被释放。

作为一种解决方法，可以使用单独的对象（`TimerTarget`在以下示例中调用）。`TimerTarget`对 ,有一个*弱*引用`ModelClass`，以避免保留循环。

这个“帮助类”看起来像这样。它的唯一目的是将定时器事件转发给“真正的目标”。

```
@interface TimerTarget : NSObject
@property(weak, nonatomic) id realTarget;
@end

@implementation TimerTarget

- (void)timerFired:(NSTimer*)theTimer
{
    [self.realTarget performSelector:@selector(timerFired:) withObject:theTimer];
}

@end 
```

现在，在您的模型类中，您可以创建一个计时器并使其无效`dealloc`：

```
@interface ModelClass ()
@property(strong, nonatomic) NSTimer *timer;
@end

@implementation ModelClass

- (id)init
{
    self = [super init];
    if (self) {
        TimerTarget *timerTarget = [[TimerTarget alloc] init];
        timerTarget.realTarget = self;
        self.timer = [NSTimer scheduledTimerWithTimeInterval:1
                                                 target:timerTarget
                                               selector:@selector(timerFired:)
                                               userInfo:nil repeats:YES];
    }
    return self;
}

- (void)dealloc
{
    [self.timer invalidate]; // This releases the TimerTarget as well!
    NSLog(@"ModelClass dealloc");
}

- (void)timerFired:(NSTimer*)theTimer
{
    NSLog(@"Timer fired");
}

@end 
```

所以我们有

```
modelInstance ===> timer ===> timerTarget ---> modelInstance
(===> : strong reference, ---> : weak reference) 
```

请注意，不再有从计时器到模型类实例的（强）引用。

我已经使用以下代码对此进行了测试，该代码创建了一个实例`ModelClass`并在 5 秒后释放它：

```
__block ModelClass *modelInstance = [[ModelClass alloc] init];
int64_t delayInSeconds = 5.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    modelInstance = nil;
}); 
```

*输出：*

```
2013-01-23 23:54:11.483 timertest[16576:c07] Timer fired
2013-01-23 23:54:12.483 timertest[16576:c07] Timer fired
2013-01-23 23:54:13.483 timertest[16576:c07] Timer fired
2013-01-23 23:54:14.483 timertest[16576:c07] Timer fired
2013-01-23 23:54:15.483 timertest[16576:c07] Timer fired
2013-01-23 23:54:15.484 timertest[16576:c07] ModelClass dealloc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T07:22:37.607

基于@Martin R 的想法，我创建了更易于使用的自定义类，并添加了一些检查以避免崩溃。

```
@interface EATimerTarget : NSObject

// Initialize with block to avoid missing call back
- (instancetype)initWithRealTarget:(id)realTarget timerBlock:(void(^)(NSTimer *))block;

// For NSTimer @selector() parameter
- (void)timerFired:(NSTimer *)timer;

@end

@interface EATimerTarget ()
@property (weak, nonatomic) id realTarget;
@property (nonatomic, copy) void (^timerBlock)(NSTimer *); // use 'copy' to avoid retain counting
@end

@implementation EATimerTarget

- (instancetype)initWithRealTarget:(id)realTarget timerBlock:(void (^)(NSTimer *))block {
    self = [super init];
    if (self) {
        self.realTarget = realTarget;
        self.timerBlock = block;
    }
    return self;
}

- (void)timerFired:(NSTimer *)timer {
    // Avoid memory leak, timer still run while our real target is dealloc
    if (self.realTarget) {
        self.timerBlock(timer);
    }
    else {
        [timer invalidate];
    }
}

@end 
```

这是我的示例类

```
@interface MyClass
@property (nonatomic, strong) NSTimer *timer;
@end

@implementation MyClass

- (id)init
{
    self = [super init];
    if (self) {
         // Using __weak for avoiding retain cycles
         __weak typeof(self) wSelf = self;
    EATimerTarget *timerTarget = [[EATimerTarget alloc] initWithRealTarget:self timerBlock: ^(NSTimer *timer) {
        [wSelf onTimerTick:timer];
    }];
         self.timer = [NSTimer timerWithTimeInterval:1 target:timerTarget selector:@selector(timerFired:) userInfo:nil repeats:YES];
         [[NSRunLoop mainRunLoop] addTimer:self.timer forMode:NSDefaultRunLoopMode];
    }
    return self;
}

- (void)dealloc
{
    [self.timer invalidate]; // This releases the EATimerTarget as well! 
    NSLog(@"### MyClass dealloc");
}

- (void)onTimerTick:(NSTimer *)timer {
     // DO YOUR STUFF!
     NSLog(@"### TIMER TICK");
}

@end 
```

# r - 使用 replicate() 或 sapply() 重复用户定义的函数

> ID：14490182
> 
> 赞同：10
> 
> 时间：2013-01-23T21:59:20.697
> 
> 标签：r, sapply, replicate

我已经定义了一个自定义函数，如下所示：

```
my.fun = function() {

      for (i in 1:1000) {
      ...
        for (j in 1:20) {
          ...
        }
      }

 return(output)

} 
```

它返回一个输出矩阵 ，`output`由 1000 行和 20 列组成。

我需要做的是重复函数说 5 次并将五个`output`结果存储到一个全新的矩阵*中*，`final`比如想尝试并行化这些额外的 5 次重复）。

 *因此`final`应该是一个具有 5000 行和 20 列的矩阵（这 5 次重复背后的基本原理是在我使用的两个 for 循环中，以及其他函数`sample`）。

我尝试使用`final <- replicate(5, my.fun())`，它正确计算了五次复制，但是我必须“手动”将元素放入一个全新的 5000 x 20 矩阵中。有没有更优雅的方法呢？（也许使用`sapply()`？）。非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T22:09:09.023

就目前而言，您可能有一个具有三个维度的数组。如果你想要一个列表，你会添加 simple=FALSE。试试这个：

```
do.call( rbind, replicate(5, my.fun(), simplify=FALSE ) ) 
```

或者你可以`aperm`在“final”仍然是一个数组的情况下使用：

```
fun <- function() matrix(1:10, 2,5)
final <- replicate( 2, fun() )
> final
, , 1

     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10

, , 2

     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10

> t( matrix(aperm(final, c(2,1,3)), 5,4) )
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    3    5    7    9
[2,]    2    4    6    8   10
[3,]    1    3    5    7    9
[4,]    2    4    6    8   10 
```

可能有更经济的矩阵运算。我只是还没有发现一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T22:03:38.197

如果你用`replicate`包中的rlply[替换](http://svitsrv25.epfl.ch/R-doc/library/plyr/html/rlply-s7.html)`plyr`，你可以使用`do.call`with `rbind`：

```
library(plyr)
do.call(rbind, rlply(5, my.fun())) 
```

如果您不想依赖`plyr`软件包，您可以随时执行以下操作：

```
do.call(rbind, lapply(1:5, function(i) my.fun())) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T22:52:04.910

取决于您用于并行计算的包，但我会这样做（使用 将其隐藏在循环中`sapply`，就像`replicate`）。

```
library(snowfall)
sfInit(parallel = TRUE, cpus = 4, type = "SOCK")
# sfExport() #export appropriate objects that will be needed inside a function, if applicable
# sfLibrary() #call to any special library
out <- sfSapply(1:5, fun = my.fun, simplify = FALSE)
sfStop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T05:42:49.557

试试这个：

```
final <- replicate(5, my.fun(), simplify = "matrix") 
```

您将以矩阵的形式得到“最终”的结果。*

# asp.net-mvc - 根据设备改变控制器

> ID：14490183
> 
> 赞同：3
> 
> 时间：2013-01-23T21:59:41.470
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-4

我正在使用具有 3 个快照点的 MVC4 Web 应用程序 - 台式机、手机和平板电脑。

我已经设置了显示模式，因此视图会根据访问站点的设备而有所不同。我还使用媒体查询和 jquery mobile 来协助网站的移动开发。

当通过电话访问该站点时，向最终用户显示的数据库存储数据较少。因此，手机不需要控制器上的繁重处理。

当消费应用程序是手机时，是否有任何优雅的方法来改变使用的控制器或操作方法？我希望 url 保持不变，也不要在设备的控制器操作方法中进行检查。

以上有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:08:06.750

示例帖子在这里：

[http://weblogs.asp.net/shijuvarghese/archive/2011/02/25/mobile-enabled-web-apps-with-asp-net-mvc-3-and-jquery-mobile.aspx](http://weblogs.asp.net/shijuvarghese/archive/2011/02/25/mobile-enabled-web-apps-with-asp-net-mvc-3-and-jquery-mobile.aspx)

关于使用过滤器属性将用户重定向到 MVC 项目的移动区域。

我能找到的最好的，我知道你说你不想更改 URL .. 所以也许你可以写一个过滤器属性来应用到你的控制器.. 这样一个动作就被忽略了？

像这样的东西可能（未经测试）但它很讨厌，因为它必须不断维护，并且实际上只是将更多代码注入到你的动作管道中，这可能会让人感觉有点“神奇”，我个人可能会使用单独的区域：

```
public class MobileDeviceAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.Browser.IsMobileDevice)
        {
            if (filterContext.ActionDescriptor.ActionName == "foo")
                filterContext.HttpContext.Response.RedirectToRoute("bar");
        }
    }
} 
```

# ios - 使用 iPhone 5 撰写邮件

> ID：14490185
> 
> 赞同：5
> 
> 时间：2013-01-23T21:59:46.967
> 
> 标签：ios

我正在尝试通过我的应用程序发送电子邮件，并且我正在使用以下代码：

```
 if ([MFMailComposeViewController canSendMail]) {
            MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
            controller.mailComposeDelegate = self;

            NSString *subject = @"";
            NSString *body = @"";

            [controller setSubject:subject];
            [controller setMessageBody:body isHTML:YES];

            [self presentModalViewController:controller animated:YES];

        } else {
            NSString *message = @"Error opening mail, please make sure you have an email account setup";
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops" message:message delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
        } 
```

我收到一个奇怪的错误，在我的 iPhone 5 上弹出撰写屏幕，没有正文（尽管正文已在上面设置）。如果单击任何框并因此无法编辑，则无法看到光标，并且发送按钮不可单击。当我关闭屏幕时，我得到以下信息：

```
_serviceViewControllerReady:error: Error Domain=_UIViewServiceErrorDomain Code=1 "The operation couldn’t be completed. (_UIViewServiceErrorDomain error 1.)" 
```

但是，当我在 iPhone 4s、iPhone 4 和模拟器上测试时，它运行良好。我还在另一台 iPhone 5 上对其进行了测试，它运行良好。身体在那里，我可以发送电子邮件等。

还有什么我可能会丢失的吗？我有两个与手机上的邮件相关联的电子邮件帐户，因此`canSendMail`应该可以使用...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T22:46:58.097

尝试在其他应用程序中使用撰写对话框。如果您没有其他应用可以尝试，您可以下载并编译[Apple 的 Sample](http://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html)。如果它在其他应用程序中不起作用，请尝试重新启动您的设备。

# c++ - 使用 boost::shared_ptr 进行多态强制转换

> ID：14490190
> 
> 赞同：2
> 
> 时间：2013-01-23T21:59:57.753
> 
> 标签：c++, boost, polymorphism, smart-pointers

我`polymorphic_cast`对普通指针的提升很熟悉：

```
Base *base;

Derived *d = boost::polymorphic_cast<Derived>(base); 
```

但是，如何使用它`boost::shared_ptr`呢？

```
boost::shared_ptr<Base> base;

boost::shared_ptr<Derived> d = boost::?????(base); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:02:10.387

使用`boost::static_pointer_cast`or `boost::dynamic_pointer_cast`，作为 C++ 强制转换的类似物`static_cast`和`dynamic_cast`：

```
boost::shared_ptr<Derived> d = boost::static_pointer_cast<Derived>(base);

// now "d" shares ownership with "base" 
```

这只是对底层原始指针执行相应的转换。

（`std`C++11 标准库中的`std::tr1`命名空间和 C++03 的 TR1 库中的命名空间也是如此。）

# android - 使用 ViewPager/Fragments/ViewPagerExtensions 强制关闭方向更改

> ID：14490192
> 
> 赞同：0
> 
> 时间：2013-01-23T22:00:06.370
> 
> 标签：android, android-viewpager, fragment, fragmentpageradapter

我遇到了一些我似乎无法解决的问题（我以前没有以这种方式处理过片段）

我有一个主要的 FragmentActivity 如下：

```
package com.my.app;

import android.app.AlertDialog;
import android.content.DialogInterface; 
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;

import com.astuetz.viewpager.extensions.ScrollingTabsView;
import com.astuetz.viewpager.extensions.TabsAdapter;

public class MyTabsActivity extends FragmentActivity {

private ViewPager mPager;
private ScrollingTabsView mScrollingTabs;

private TabsAdapter mScrollingTabsAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_tabs);

    mPager = (ViewPager) findViewById(R.id.pager);
    mScrollingTabs = (ScrollingTabsView) findViewById(R.id.my_tabs);
    mScrollingTabsAdapter = new MyTabsAdapter(this, mPager);
    addTabs();
    mScrollingTabs.setAdapter(mScrollingTabsAdapter);
    mScrollingTabs.setViewPager(mPager);
    mPager.setCurrentItem(1);
    mPager.setPageMargin(1);
}

private void addTabs() {
    mScrollingTabsAdapter.addTab("FirstFragment", "First");
    mScrollingTabsAdapter.addTab("SecondFragment", "Second");
}
} 
```

XML 如下（带有 Viewpager 和 ScrollingTabsView：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res/com.my.package"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.astuetz.viewpager.extensions.ScrollingTabsView
    android:id="@+id/ztc_tabs"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/tab_unselected_holo"
    app:dividerDrawable="@drawable/divider"/>

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/ztc_tabs" />

</RelativeLayout> 
```

然后在 MyTabsAdapter 我有这个：

```
package com.my.app;

import com.my.app.R;

import java.util.ArrayList;

import android.app.Activity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;

import com.astuetz.viewpager.extensions.TabsAdapter;

public class MyTabsAdapter extends FragmentPagerAdapter implements TabsAdapter {
private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
private final ViewPager mPager;

private Activity mContext;

static final class TabInfo {
    private final String fragName;
    private final String title;

    TabInfo(String fragName, String title) {
        this.fragName = fragName;
        this.title = title;
    }
}

public MyTabsAdapter(FragmentActivity ctx, ViewPager pager) {
    super(ctx.getSupportFragmentManager());
    this.mContext = ctx;
    this.mPager = pager;
    this.mPager.setAdapter(this);
}

public View getView(int position) {
    Button tab;

    LayoutInflater inflater = mContext.getLayoutInflater();
    tab = (Button) inflater.inflate(R.layout.tab_scrolling, null);

    tab.setText(this.mTabs.get(position).title.toUpperCase());

    return tab;
}

public void addTab(String fragName, String title) {
    TabInfo info = new TabInfo(fragName, title);
    mTabs.add(info);
}

@Override
public Fragment getItem(int position) {
    TabInfo info = mTabs.get(position);
    if (info.fragName == "FirstFragment") {
        return FirstFragment.newInstance();
    } else if (info.fragName == "SecondFragment") {
        return SecondFragment.newInstance(t);
    }
    return null;
}

@Override
public int getCount() {
    return mTabs.size();
}

} 
```

并且 FirstFragment/SecondFragment 有自己的基本布局并且几乎相同，这里是 Fragment

```
package com.my.app;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FirstFragment extends Fragment {

public static Fragment newInstance() {
    FirstFragment frag = new FirstFragment();;
    return frag;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState) {
    if (container == null)
        return null;
    return inflater.inflate(R.layout.fragment_first, container, false);
}

} 
```

这里的一切都完全按照我的意愿工作。选项卡正常工作，ViewPager 页面正常，等等。

问题是，当我改变方向时，我得到了这个痕迹并强制关闭，我不知道为什么。

```
E/AndroidRuntime(32431): FATAL EXCEPTION: main
E/AndroidRuntime(32431): java.lang.NullPointerException
E/AndroidRuntime(32431):    at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
E/AndroidRuntime(32431):    at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
E/AndroidRuntime(32431):    at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
E/AndroidRuntime(32431):    at android.app.Activity.performSaveInstanceState(Activity.java:1147)
E/AndroidRuntime(32431):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1216)
E/AndroidRuntime(32431):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3666)
E/AndroidRuntime(32431):    at android.app.ActivityThread.access$700(ActivityThread.java:141)
E/AndroidRuntime(32431):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1240)
E/AndroidRuntime(32431):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(32431):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(32431):    at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(32431):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(32431):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(32431):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(32431):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(32431):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  418):   Force finishing activity com.ada.ztc/.ZTCTabs 
```

所以我需要帮助的是弄清楚为什么我在方向改变时会出现这个错误。我做了一些研究，似乎没有找到任何具有类似设置的人。

任何帮助将不胜感激，如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:05:38.763

我似乎通过添加解决了这个问题

```
android:configChanges="orientation|screenSize" 
```

在 FragmentActivity 的清单中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T23:06:23.807

```
@Override
        public void onSaveInstanceState(Bundle outState) {
            outState.putString("BUGFIX", "BUGFIX");
            super.onSaveInstanceState(outState);
        } 
```

试试这个。捆绑包永远不会为空

# sql - ssrs 2008级联参数

> ID：14490200
> 
> 赞同：1
> 
> 时间：2013-01-23T22:00:42.943
> 
> 标签：sql, sql-server-2008, reporting-services, ssrs-2008

我目前正在将 SQL 2008 R2 与 SQL Server Report Service 2008 一起使用。我正在使用以下参数创建报告 - Staff_name、Client_name、Lab、lab_date 等。当用户选择员工名称时，他们所服务的客户端将填充一个下拉列表-下来供他们选择，这很好用。当用户选择客户端时，客户端实验室将填充实验室下拉菜单。我有一个 SP，它返回所选实验室的实验室数据集的值，如果选择了“新实验室”，则返回空值。问题是，如果我默认 Lab 下面的参数，例如。Lab_date，从 sp 中选择适当的变量，然后选择一个 Lab，然后选择“New Lab”，Lab_date 不为空。

```
IF @ClientLabId <> 'New Lab' BEGIN
SELECT 
cc.Date_Lab_Test_Ordered, cc.Ordering_Provider, cc.Provider_Specialty, 
cc.Provider_Contact, cc.Desc_of_Order, cc.Date_Order_Filled, 
cc.Date_Receipt_Verified
FROM CCMT_Lab_Test_Orders_Tracking cc
WHERE cc.Client_Lab_Id = @ClientLabId 
AND cc.RecordDeleted = 'N'
END
IF @ClientLabId = 'New Lab' BEGIN
SELECT ' ',' ',' ',' ',' ',' ',' '
END 
```

我已经尝试过 NULL、''、''，只要您不选择实际实验室，报告就会显示这些值。我知道当 SP 设置为默认值时，SP 的第一部分会发送数据。这是“新实验室”部分，我无法弄清楚在擦除后选择“新实验室”时需要发送到 SSRS 以获取值。我们希望员工不必重新输入数据两次，并尽可能多地消除数据错误。

作为一个事后的想法 - 有没有办法强制报告在执行后完全刷新。每次用户单击查看报告时，报告只会刷新为新的，而不是退出报告并返回报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:19:05.830

您缺少列名。尝试：

```
SELECT 
' ' as Date_Lab_Test_Ordered, ' ' as Ordering_Provider, ' ' as Provider_Specialty, 
' ' as Provider_Contact, ' ' as Desc_of_Order, ' ' as Date_Order_Filled, 
' ' as Date_Receipt_Verified 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:35:26.953

在查看了不同的论坛并与几位 IT 专业人士交谈后，我决定创建两个单独的表单。一个用于插入，一个用于更新，因为 SSRS 似乎没有执行单个表单的功能。

# jquery - 在 IE 7 和 8 中应用 Knockout Bindings 正在清除 jQuery 数据

> ID：14490203
> 
> 赞同：1
> 
> 时间：2013-01-23T22:00:54.433
> 
> 标签：jquery, internet-explorer-8, knockout.js, internet-explorer-7

我有一个使用一些 jQuery 插件运行 Knockout 的应用程序，这里有问题的是 jQuery UI 选项卡。

通过一些搜索，我发现 jQuery 的数据插件保存的数据`($(someElt).data())`一直存在，直到我通过 Knockout 应用绑定。

之后，jQuery持有的数据就没有了，这让插件认为它没有初始化。

让这个陌生人感到奇怪的是，我的外部选项卡集（页面选项卡和页面选项卡的一个窗格中的选项卡）工作正常。
然而，内部标签有这个问题。

选项卡的任何一个容器都没有直接绑定，尽管两者内部和外部都有一些元素（尽管两者都不应该导致任何实际删除 DOM 元素）。

有什么想法吗？

编辑：这是我创建的一个测试用例（我使用的是 jQuery 1.9.2 和 Knockout 2.2.1）：

```
<div id="OutterTabContainer">
  <ul>
    <li>
      <a href="#OutterTab1">Outter Tab 1</a>
    </li>
    <li>
      <a href="#OutterTab2">Outter Tab 2</a>
    </li>
  </ul>
  <div id="OutterTab1">
    This is the first tab.
    <div data-bind="visible: test2">This should be invisible</div>

  </div>
  <div id="OutterTab2">
    This is the second tab.
    <div data-bind="text: test1()"></div>

    <div data-bind="with: testObj()">
      <div id="InnerTabContainer">
        <ul>
          <li>
            <a href="#InnerTab1">Inner Tab 1</a>
          </li>
          <li>
            <a href="#InnerTab2">Inner Tab 2</a>
          </li>
        </ul>
        <div id="InnerTab1">
          This is the first of the inner tabs.
        </div>
        <div id="InnerTab2">
          This is the second of the inner tabs.
          @*<div data-bind="text: innerTest()"></div>*@
        </div>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
  (function($, ko, undefined) {
    var outterTabs = $("#OutterTabContainer"),
        innerTabs = $("#InnerTabContainer"),
        viewModel = {
          test1: ko.observable("test 1"),
          test2: ko.observable(false),
          testObj: ko.observable({
            innerTest: ko.observable("inner")
          })
        };

    //creating tabs, works fine
    outterTabs.tabs();
    innerTabs.tabs();

    setTimeout(function() {
      //simulating an ajax success callback
      ko.applyBindings(viewModel);
      innerTabs.tabs("select", 1);
    }, 1000);

  })(jQuery, ko);
</script> 
```

在创建它时，我发现罪魁祸首是选项卡 2 中的“with”绑定。我仍然不确定为什么该绑定会导致此问题，因此我仍在寻找适当的解决方法。我想如果推送到了，我可以将内部选项卡初始化推迟到绑定视图模型之后。

编辑 2：我一直在查看淘汰赛源代码，看起来 with 绑定运行与 if 和 ifnot 绑定相同的代码。看起来绑定到 with 的元素变成了虚拟元素，据我所知，这些虚拟元素在应用绑定时被销毁并重新创建，因此元素本身（以及所有子元素，包括选项卡容器）将与之前的元素不同。我猜这就是数据不再存在的原因（因为它是由 dom 节点保存的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:23:37.037

根据我的建议，您可以尝试这样的事情（现已测试！）：

```
ko.bindingHandlers["tab"] = {
   init: function(element) {
       $(element).tabs();
   }
}; 
```

进而：

```
<div id="InnerTabContainer" data-bind="tab: $data"> 
```

编辑：事实证明，绑定需要一些数据，即使您没有使用它。

这是一个[小提琴](http://jsfiddle.net/GeeJ9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:14:09.003

我在使用手风琴时遇到了同样的问题（来自 jQuery UI），结果证明 Benjamin 关于 'with' 处理程序是正确的，导致元素认为它没有被初始化（谢谢你的帮助）。

我测试了Matt提出的解决方案，解决问题的不是呈现给元素的$data，而是绑定完成后内部选项卡的初始化。顺便说一句，这是我迄今为止找到的唯一解决方案。这是解决此问题的唯一方法吗？

编辑：经过一番挖掘，我发现 IE8 不能正确处理“with”处理程序（虚拟元素），删除它可以解决问题。

# apache - 在 apache localhost 服务器上使用 .htaccess 文件

> ID：14490209
> 
> 赞同：12
> 
> 时间：2013-01-23T22:01:32.810
> 
> 标签：apache, .htaccess, configuration, directory, localhost

好的，我用 PHP 和 MySql 启动并运行了 Apache localhost 服务器。现在我也希望能够使用一个`.htaccess`文件来使用`RewriteRule`，但是我不知道该把它放在哪里。

我有这些目录：

`C:\dev\progs`Apache PHP 和 MySQL 存储在哪里，每个都在它们自己的子目录中，即。`C:\dev\progs\Apache`等等...

`C:\dev\www`存储所有站点文件的位置。

我需要知道将`.htaccess`文件放在哪里，需要做什么配置，以及我的希望和梦想是否都是徒劳的。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-18T06:15:44.743

**在 localhost 的 apache 服务器上启用 .htaccess**

```
1) Find your apache directly which uses the php installation .
2) Open your httpd.conf  with notepad, Which is located in the path \apache\conf directory
3) Find the code like below       
      #LoadModule rewrite_module modules/mod_rewrite.so
4) Remove # from above code

# AllowOverride controls what directives may be placed in .htaccess files.
 # It can be "All", "None", or any combination of the keywords:
 #   Options FileInfo AuthConfig Limit
 #
 AllowOverride All   <--- make sure this is not set to "None"

5) Save httpd.conf file
6) Restart your apache server 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T22:08:50.297

.htaccess 是一个配置文件，应该存储在您的页面所在的位置。简而言之，它应该`c:\dev\www`在你的情况下，但你也应该阅读[这个](http://httpd.apache.org/docs/2.2/howto/htaccess.html)。顺便说一句，不要忘记通过从它所在的行中删除哈希来打开 mod_rewrite

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

并通过更改启用 .htaccess

```
AllowOverride None 
```

到

```
AllowOverride All 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T22:09:11.620

您将`.htaccess`文件放在您希望代码控制的 Web 目录（以及任何子目录）中。对于重写，它通常进入根目录并作用于 index.php 页面。

例如，如果您将`.htaccess`文件放在 \dev\www\ 目录中，并且您的`.htaccess`文件有类似这样的内容，那么`RewriteRule ^(.*)$ /index.php?/$1 [L]`这是一个正则表达式，表示获取 URL 中的所有字符并将它们附加到`/index.php?`脚本中。这`/$1`是正则表达式中的反向引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T08:16:12.953

试试这个。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /projectfolder/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /projectfolder/index.php [L]
</IfModule> 
```

# java - 中序遍历给出不正确的输出

> ID：14490210
> 
> 赞同：2
> 
> 时间：2013-01-23T22:01:40.177
> 
> 标签：java, binary-search-tree

```
class Node {
    Node parent;
    Node left;
    Node right;
    int value;

    Node (int value) {
        this.value = value;
        this.parent = null;
        this.left = null;
        this.right = null;
    }
}

class TreeofNodes {
    Node insert (Node root, Node node) {
        if (root == null)
        {
            root = node;
            return root;
        }

        Node cur    = root;
        Node father = root;

        while(cur != null)
        {
            father = cur;
            if (cur.value > node.value)
                cur = cur.left;
            else
                cur = cur.right;
        }
        if(father.value > node.value)
            father.left  = node;
        else
            father.right = node;

        node.parent = father;

        return node;
    }

    void Inorder (Node n) {
        if (n == null)
           return;
        Inorder (n.left);
        System.out.print (n.value + " ");
        Inorder (n.right);
    }
}

class binarySearchTree {

public static void main (String [] args) {

    int A[] = {6, 8, 5, 3, 7, 9, 1};

    TreeofNodes obj = new TreeofNodes ( );

    Node root = null;
    Node n = new Node (A[0]);
    root = obj.insert (root, n);

    Node Croot = root;

    for (int i = 1; i < 7; i++)
    {
        n = new Node (A[i]);
        Croot = obj.insert (Croot, n);
    }

    System.out.println ("============ Inorder ============");
    obj.Inorder (root);
  }
} 
```

当我调用`Inorder`方法时，我希望输出是：

```
 1   3   5   6   7   8   9 
```

但它是

```
 6   3   7   1   9   5   8 
```

我怀疑我的插入方法是错误的。

有人可以告诉我哪里错了，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:11:18.547

您的`insert`函数`node`最后返回而不是`root`. 改变：

```
 return node; 
```

至

```
 return root; 
```

# c++ - PPL critical_section/parallel_for 在 Visual Studio 2010 下崩溃？

> ID：14490211
> 
> 赞同：2
> 
> 时间：2013-01-23T22:01:40.303
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, ppl

我制作了这个简单的测试程序，它有时会触发 Debug Break 或者它只是崩溃（在 Debug/Win32/VS2010SP1 下）——当然，有时它甚至可以工作。我做错了什么还是PPL（VS2010）中的某个地方有错误？

```
#include "stdafx.h"
#include <ppl.h>
#include <vector>

int _tmain(int argc, _TCHAR* argv[])
{
    std::vector<int> vi;
    Concurrency::critical_section cs;
    Concurrency::parallel_for(0, 10000, [&](int i)
    {
        Concurrency::critical_section::scoped_lock l(cs);
        vi.push_back(i);
    });
    return 0;
} 
```

Debug Break 调用堆栈如下所示：

> msvcr100d.dll!_CrtDbgBreak() 第 85 行 C msvcr100d.dll!_VCrtDbgReportW(int nRptType=2, const wchar_t * szFile=0x0f45d230, int nLine=728, const wchar_t * szModule=0x00000000, const wchar_t * szFormat=0x0argflist =0x7d92f7c4) 第 502 行 C msvcr100d.dll!_CrtDbgReportWV(int nRptType=2, const wchar_t * szFile=0x0f45d230, int nLine=728, const wchar_t * szModule=0x00000000, const wchar_t * szFormat=0x0f45dx709 格式=7 * charlist) 241 + 0x1d 字节 C++ msvcr100d.dll!_CrtDbgReportW(int nRptType=2, const wchar_t * szFile=0x0f45d230, int nLine=728, const wchar_t * szModule=0x00000000, const wchar_t * szFormat=0x0f45d401d, ...) 第 258 行字节 C++ msvcr100d.dll!Concurrency::details::LockQueueNode::Copy(Concurrency::details::LockQueueNode * pCopyFromNode=0x7d92f908) 第 728 行 + 0x27 字节 C++ msvcr100d.dll!Concurrency::critical_section::_Acquire_lock(void * _PLockingNode=0x7d92f908, bool _FHasExternalNode=true) 第 1019 行 C++ msvcr100d.dll!Concurrency::critical_section::scoped_lock:: :scoped_lock(Concurrency::critical_section & _Critical_section=locked) 第 1083 行 C++ Lockable.exe！`anonymous namespace'::<lambda0>::operator()(int i=1418) Line 14 + 0x11 bytes C++ Lockable.exe!Concurrency::_Parallel_chunk_helper_invoke<int,unsigned int,`匿名命名空间'::,0>::_Invoke(const int & _First=0, unsigned int & _Index=1418, const`anonymous-namespace'::<lambda0> & _Func={...}) Line 1445 C++ Lockable.exe!Concurrency::_Parallel_chunk_helper<int,unsigned int,`匿名命名空间'::,0>::operator()() 第 1781 行 + 0x16 字节 C++ Lockable.exe!Concurrency::task_handle,0> > >(Concurrency::task_handle,0> > * _PChore=0x7c13fba8 {_M_first= 0 _M_step=1 _M_function={...} ...}) 第 3495 行 C++ msvcr100d.dll!Concurrency::details::_UnrealizedChore::_StructuredChoreWrapper(Concurrency::details::_UnrealizedChore * pChore=0x7c13fba8 {_M_first=0 _M_step =1 _M_function={...} ...}) 第 99 行 + 0xc 字节 C++ msvcr100d.dll!Concurrency::details::_UnrealizedChore::_Invoke() 第 3454 行 + 0xc 字节 C++ msvcr100d.dll!Concurrency::details ::WorkItem::Invoke() 第 75 行 C++ msvcr100d.dll!Concurrency::details::InternalContextBase::ExecuteChoreInline(Concurrency::details::WorkItem * pWork=0x7d92fe7c) 第 1385 行 C++ msvcr100d.dll!Concurrency::details: :InternalContextBase::Dispatch(Concurrency::DispatchState * pDispatchState=0x7d92fe9c) 第 1478 行 C++ msvcr100d.dll!Concurrency::details::FreeThreadProxy::Dispatch() 第 157 行 C++ msvcr100d.dll!Concurrency::details::ThreadProxy::ThreadProxyMain(void * lpParameter=0x2ed5b4f0) 第 162 行 C++ kernel32.dll!763c33aa()
> [下面的帧可能不正确和/或丢失，没有为 kernel32.dll 加载符号]
> ntdll.dll!771a9ef2()
> ntdll.dll!771a9ec5()

我刚刚遇到的一次崩溃看起来好像没有锁住（cs：not_locked）

Lockable.exe!std::vector >::_Orphan_range(int * _First=0x0000c5db, int * _Last=0x0000c5db) 第 1442 行 + 0x5 字节 C++ Lockable.exe!std::vector >::push_back(const int & _Val=4177 ) 第 995 行 C++

> 可锁定的.exe！`anonymous namespace'::<lambda0>::operator()(int i=4177) Line 16 C++ Lockable.exe!Concurrency::_Parallel_chunk_helper_invoke<int,unsigned int,`匿名命名空间'::,0>::_Invoke(const int & _First=0, unsigned int & _Index=4177, const`anonymous-namespace'::<lambda0> & _Func={...}) Line 1445 C++ Lockable.exe!Concurrency::_Parallel_chunk_helper<int,unsigned int,`匿名命名空间'::,0>::operator()() 第 1833 行 + 0x16 字节 C++ Lockable.exe!Concurrency::task_handle,0> > >(Concurrency::task_handle,0> > * _PChore=0x7cbffc24 {_M_first= 0 _M_step=1 _M_function={...} ...}) 第 3495 行 C++ msvcr100d.dll!Concurrency::details::_UnrealizedChore::_StructuredChoreWrapper(Concurrency::details::_UnrealizedChore * pChore=0x7cbffc24 {_M_first=0 _M_step =1 _M_function={...} ...}) 第 99 行 + 0xc 字节 C++ msvcr100d.dll!Concurrency::details::_UnrealizedChore::_Invoke() 第 3454 行 + 0xc 字节 C++ msvcr100d.dll!Concurrency::details ::WorkItem::Invoke() 第 75 行 C++ msvcr100d.dll!Concurrency::details::InternalContextBase::ExecuteChoreInline(Concurrency::details::WorkItem * pWork=0x7bc0fab4) 第 1385 行 C++ msvcr100d.dll!Concurrency::details: :InternalContextBase::Dispatch(Concurrency::DispatchState * pDispatchState=0x7bc0fad4) 第 1478 行 C++ msvcr100d.dll!Concurrency::details::FreeThreadProxy::Dispatch() 第 157 行 C++ msvcr100d.dll!Concurrency::details::ThreadProxy::ThreadProxyMain(void * lpParameter=0x2dcf6200) 第 162 行 C++ kernel32.dll!763c33aa()
> [下面的帧可能不正确和/或丢失，没有为 kernel32.dll 加载符号]
> ntdll.dll!771a9ef2()
> ntdll.dll!771a9ec5()

甚至在 PPL 内部实现中也可能存在其他随机访问违规，我猜你可以重现。（希望）

我在 Visual Studio 2012 Express for Desktop 下运行了相同的程序，经过多次测试后一切似乎都正常运行。

我想知道如果 VS2010 下的 PPL 在生产环境中使用有问题吗？

感谢您的任何投入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:46:37.953

因此，最后，在 Microsoft Connect（或社交？）上发布问题后，该问题已得到彻底解释。

[http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/thread/9601a2d0-b1ef-4d81-8743-73c3965a7b63](http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/thread/9601a2d0-b1ef-4d81-8743-73c3965a7b63)

[http://social.msdn.microsoft.com/Forums/eu/parallelcppnative/thread/38d2e8c8-e863-4da0-a45a-9776ab27feed](http://social.msdn.microsoft.com/Forums/eu/parallelcppnative/thread/38d2e8c8-e863-4da0-a45a-9776ab27feed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T03:04:10.907

在我看来，你应该在程序结束时等待。该例程`parallel_for`为并发执行创建了线程，并将自行运行。但是，`main`正在退出，这将导致所有正在运行的线程停止（或使它们无效）。

尝试进行一些阻塞调用（就像用户输入一样简单），看看它是否有效。

# python - Python 链接拉取器

> ID：14490212
> 
> 赞同：1
> 
> 时间：2013-01-23T22:01:50.243
> 
> 标签：python, html, hyperlink, beautifulsoup

所以我成功地使用了这个python脚本：

```
import httplib2
from BeautifulSoup import BeautifulSoup, SoupStrainer

http = httplib2.Http()
status, response = http.request('https://conceled:conceled@traveler.pha.phila.gov:8443/servlet/traveler')

for link in BeautifulSoup(response, parseOnlyThese=SoupStrainer('a')):
    if link.has_key('href'):
        print link['href'] 
```

将链接拉出网站。它几乎适用于任何其他网站，但是在尝试上述方法时（我需要工作的那个，我得到了很多错误:)

```
Traceback (most recent call last):
  File "C:\Users\joe\Desktop\PHA\AndroidPhones\androidphonescript2.py", line 5, in <module>
    status, response = http.request('https://conceled@traveler.pha.phila.gov:8443/servlet/traveler')
  File "C:\Python27\lib\httplib2.py", line 608, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cacheFullPath)
  File "C:\Python27\lib\httplib2.py", line 449, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "C:\Python27\lib\httplib2.py", line 427, in _conn_request
    conn.connect()
  File "C:\Python27\lib\httplib.py", line 1157, in connect
    self.timeout, self.source_address)
  File "C:\Python27\lib\socket.py", line 553, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno 11003] getaddrinfo failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:49:36.953

该站点的证书无效，但这似乎不会导致问题。你用的是什么版本的httplib2？我刚刚安装了当前版本，0.7.7，我得到了更好的异常文本：

> _conn_request 中的文件“d:\Python27\lib\site-packages\httplib2-0.7.7-py2.7.egg\httplib2__init__.py”，第 1287 行引发 ServerNotFoundError(“无法在 %s 找到服务器”% conn .host) ServerNotFoundError: 无法在 conceled:conceled@traveler.pha.phila.gov 找到服务器

所以它不会被解析`//username:password@`为用户名和密码。[Httplib2 文档](http://httplib2.googlecode.com/hg/doc/html/libhttplib2.html#examples)表明凭据应通过以下方式提供：

```
Http.add_credentials(name, password[, domain=None]) 
```

所以试试：

```
http = httplib2.Http()
http.add_credentials(name, password)
status, response = http.request('https://traveler.pha.phila.gov:8443/servlet/traveler') 
```

我在网站上没有帐户，所以我无法测试。

如果您需要能够支持 URL 中的用户名和密码，则必须自己编写代码来解析它。使用正则表达式（Python re 模块）应该不会太难。

# css - Internet Explorer 上的 Crossrider 扩展性能

> ID：14490213
> 
> 赞同：0
> 
> 时间：2013-01-23T22:02:03.690
> 
> 标签：css, internet-explorer, twitter-bootstrap, cross-browser, crossrider

我正在使用[Crossrider](http://crossrider.com/)开发跨浏览器扩展。该扩展将[Twitter Bootstrap的](http://twitter.github.com/bootstrap/)[CDN 托管](http://www.bootstrapcdn.com/)版本注入页面，并将其用作扩展注入的许多组件的样式的基础。到目前为止，我已经在 Google Chrome、Mozilla Firefox 和 Internet Explorer 上测试了这个扩展。

像往常一样，Chrome 和 Firefox 渲染组件没有问题。但是，IE9 对注入的组件的样式非常糟糕。比较页面的外观：[Google Chrome](https://lh3.googleusercontent.com/-_5VNL0qo330/UQBbZ4vX9TI/AAAAAAAAVas/3idnmZ0pWjA/s800/chrome.png)和它在 IE9 中的呈现方式：[Internet Explorer](https://lh3.googleusercontent.com/-f_gyX4CwVdE/UQBbZ1unuiI/AAAAAAAAVaw/8evkIumbazE/s800/internet-explorer.png)。

有谁知道为什么 IE 渲染组件的效果这么差？在 IE9 上访问 Bootstrap 网站，一切正常。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:40:30.077

正如评论中所讨论的，该页面以 IE7 模式呈现，该模式不支持 Twitter 引导程序使用的大部分 CSS3 属性。

您可以使用 X-UA-compatibility 元元素告诉 IE9 使用稍后的呈现模式。以下文章 [0] 对此进行了解释。

[0] [http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx)

例如，`<meta http-equiv="x-ua-compatible" content="IE=9" >`强制 IE9 标准模式。值`edge`强制最新版本。

# android - Android：检测何时按下软键上的“完成”键

> ID：14490217
> 
> 赞同：0
> 
> 时间：2013-01-23T22:02:14.313
> 
> 标签：android, onclick, android-softkeyboard, detect, onclicklistener

我想检测何时按下软键“完成”，以便当它按下时，会出现一条敬酒消息。[我在这里](https://stackoverflow.com/questions/5077425/android-detect-done-key-press-for-onscreen-keyboard)看到了关于同样问题的这篇文章，但是，我对如何准确地实施该解决方案感到困惑。

提供的解决方案是：

```
 editText = (EditText) findViewById(R.id.edit_text);

 editText.setOnEditorActionListener(new OnEditorActionListener() {
     @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            // toast message
        }
        return false;
    }
 }); 
```

我的问题是这样的：

1.  是否应该在 onCreate 方法下定义 editText？
2.  整个代码是否应该在 onCreate 方法下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:05:23.470

In short, yes. Unless you only want to activate the `EditText` under certain conditions then you can put it where the `EditText`comes into play if you'd like (like on click event, in a runnable or after a web call) it comes down to preference.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:11:07.897

你可以把你的`EditText`任何你喜欢的地方。我倾向于将所有内容拆分为更小的方法，因为我认为它使代码更容易更改，但将几乎所有内容都放在`onCreate`方法中是一种非常常见的做法，因为当您不来回跳转时，它使代码更容易遵循不同方法之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T04:24:54.690

**进口 ：**

```
import android.view.View.OnKeyListener; 
```

在特定编辑文本的键上尝试使用以下代码。

**代码 ：**

```
ed.setOnKeyListener(new OnKeyListener() {

@Override

public boolean onKey(View v, int keyCode, KeyEvent event) {

            // TODO Auto-generated method stubi

            Log.d("View", "conLL.getWidth() "+conLL.getWidth());

            if (event.getKeyCode()==66 && enteredNumber>0) {

            Log.d("View", "------------------------ ");

             } 
            return false;
        }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T22:52:19.823

`editText = (EditText) findViewById(R.id.edit_text);`

这必须在之后调用`setContentView`

在该编辑文本 ImeOption 的布局中设置，否则您将永远无法捕捉到该 DONE 动作。

```
public ... extends Activity
{

public void onCreate(Bundle ...)
{
super...
setContentVIew...

editText = (EditText) findViewById(R.id.edit_text);

 editText.setOnEditorActionListener(new OnEditorActionListener() {
     @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_DONE) {
            // toast message
        }
        return false;
    }
 });

}
} 
```

* * *

```
<EditText
            android:id="@+id/edittext1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:imeOptions="actionDone"
             > 
```

# mysql - Wordpress: Display freshest 3 topics from specific forum bbpress, mysql solution

> ID：14490226
> 
> 赞同：1
> 
> 时间：2013-01-23T22:02:47.107
> 
> 标签：mysql, wordpress, list, forum, bbpress

I simply need to display the "freshest" 3 topics from a specific forum in bbpress.

Is there a simple way to do this? Because I went nuts with trying to join tables. So here is my mysql solution (still cant code it well)....

So I instantly went into the database to check whats going on there, but I can't find a solution. sorting by post_modified didn't worked. So how can I get the FRESHEST topics under specific forum and display them?

Here is how the bbpress stores the data:

Forums -> Topics -> Reply on topics. Everything goes into wp_posts table.

Reply on Topics have a post_parent of Topics and Topics have post_parent of Forums. So definitely I cant use post_parent as a selection.

So I was thinking this (if someone can code this I would be grateful and even donate, because I am stuck somewhere).

Select all the posts from the table wp_posts that have post_type column which is 'reply'. Then check if the table wp_postmeta have a meta_value of 1263 (which is my parent forum) additionally it can be checked if meta_key from wp_postmeta is "_bbp_forum_id". This is how I will select all of the REPLYs.

After getting all of the replies under the FORUM I would like to check which 3 replies are freshest (getting the post_date value) and display their parent TOPICS. And I have to make sure that I dont have duplicates because the freshest 3 replies can be from the same TOPIC.

AM I COMPLICATING TOO MUCH ??? :)))

Any easier way?

THanks !!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:25:59.217

*"I simply need to display the "freshest" 3 topics under a specific forum in bbpress."*

It sounds like you're trying to take the long route to what the widgets described here already do:

[http://codex.bbpress.org/widgets/](http://codex.bbpress.org/widgets/)

If your needs differ from the widgets listed here please specify exactly why and we'll hopefully be able to narrow it down.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T07:14:38.663

尝试这个：

```
SELECT my_id, my_title, max(my_date) order_date
FROM
(
SELECT
replace(post_title,'Antwort zu: ','') my_title,
post_date my_date,
if(strcmp(post_type,'topic'),post_parent,ID) my_id
FROM wp_posts
where post_type in ('topic', 'reply')
and post_status = 'publish'
) my_temp_table
group by my_id, my_title
order by order_date desc
limit 3 
```

根据您的论坛语言，将 'Antwort zu: ' 替换为字符串。

# xamarin.ios - 单点触控对话框元素，如 Wifi 设置

> ID：14490228
> 
> 赞同：0
> 
> 时间：2013-01-23T22:02:55.730
> 
> 标签：xamarin.ios, monotouch.dialog, xamarin

我想知道[Monotouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)`Element`在 iOS 的 WiFi 连接设置中是否有类似的设置。您可以单击它以选择它（显示复选标记），然后单击右箭头以编辑条目。

我确信我可以手工构建它，但要确保没有一个元素已经这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:21:42.130

`StringElement`您可以使用它来显示右箭头。还有一个`CheckboxElement`是可选择的，但在右侧显示复选标记。

**没有任何元素可以开箱即用。**

我个人一直在寻找一个复选框，最终基于`GlassButton`from手动创建了一个复选框`MT.D`。

# smarty - How to change the block title in siman cms

> ID：14490236
> 
> 赞同：0
> 
> 时间：2013-01-23T22:03:55.210
> 
> 标签：smarty

I'm use Siman CMS and stuck.

{include file="block_begin.tpl"}

How can I change the title name of the block in tpl.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:22:34.433

你可以尝试使用

```
{include file="block_begin.tpl" panel_title="Custom Title"} 
```

但是也有`PHP`块标题的解决方案。

# wix - 在 server 2008 下 msp 安装失败，但在 server 2003 下成功

> ID：14490239
> 
> 赞同：0
> 
> 时间：2013-01-23T22:04:04.410
> 
> 标签：wix, windows-installer, patch, msp

致敬 WIX 用户，

我最近在我们的一个补丁中遇到了一个奇怪的问题，我真的很迷茫。试图了解这个问题 3 天，但仍然一无所获，所以我以您的方式发送我的问题，希望有人能看到一些东西。它涉及已经看到 6 个成功补丁 (.msp) 的构建的修补程序 7，因此它之前具有功能性修补程序。

当我在安装该修补程序之后安装构建时，假设是 Windows Server 2003，一切似乎都正确安装。但是在服务器 2008 下，安装失败并显示错误消息：

“将补丁应用到文件 C:\Config.Msi\PT1E0D.tmp 时出错。它可能已通过其他方式更新，无法再被此补丁修改。”

在查看日志后，它似乎与安装在文件夹 bin 下的 dll Coveo.ces.web.search.dll 有关（而不是 GAC 中的副本）。但我的意思是，自原始安装以来，应该没有任何改变。

我认为这是由于使用的 Windows 安装程序版本（服务器 2003 下的 3.0 和服务器 2008 下的 4.0），但我还没有找到任何支持它的东西。

我以前遇到过这个错误，这是因为我们在 GAC 中安装了 2 个相同的文件，它们相互覆盖，但在这种情况下，它从未发生在第一个修补程序（总是第二个）上，它确实不会因系统而异。

PCP 文件与生成 msp 的 msi 非常相似。我已经将失败的修补程序 7 日志与成功安装修补程序 6 进行了比较，我认为这是 dll Coveo.ces.web.search 按时间顺序排列的主要区别，如果您需要完整的日志，请询问我很高兴把它寄给你。

谢谢你的帮助，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T19:06:54.030

所以我的问题落入了人们不知道的晦涩难懂的东西的深处……是的！所以问题再次出现，类似的事情起初似乎无关，因为它是相反的情况。在服务器 2008 系统下安装时，我没有遇到任何问题，但是当我在 2003 服务器下安装时，我遇到了同样的问题。

“将补丁应用到文件 NAME 时出错。它可能已通过其他方式更新，无法再被此补丁修改。”

我做了一些研究，发现关于堆栈溢出的未回答问题。真可惜。

我没有放弃（我没有太多选择），经过几天的更多研究，我发现了以下内容：

Delta 补丁可能会在旧版操作系统上失败并出现此错误 - 它可能已通过其他方式更新，并且无法再被此补丁修改。

[http://support.microsoft.com/kb/2545078](http://support.microsoft.com/kb/2545078)

它回答了关于服务器 2003 下失败的问题（我们确实使用的是 MSI 5.0）。手动修复 msp 后，它起作用了。这是一种痛苦，但它可以解决它。

然后在阅读时更加注意这里的内容：

“针对 Vista 和更高版本的操作系统。旧版操作系统需要使用早期补丁创建资源创建的单独补丁。使用早期资源创建的补丁也会在 Vista 和更高版本的操作系统上出现类似问题，超出了本文的范围。 "

完全解决这个问题的最佳解决方案是使用整个文件而不是二进制补丁。

因此，如果您遇到类似问题，我希望该解决方案对您有所帮助。（很抱歉，如果我没有找到自己未解决的问题，我可能永远不会花时间更新它:)。)

尼克L

# jquery - 从 api 获取数据为 json，但 html 嵌套已关闭

> ID：14490240
> 
> 赞同：0
> 
> 时间：2013-01-23T22:04:05.653
> 
> 标签：jquery, html, json

在循环一些 JSON 数据时，我试图`<a>`在我的`<li>`标签中嵌套一个标签，但它不是：

```
var ul = $('<ul/>');
$.each(data.headlines, function() {
var linkFromJson = "<a>" + this.headline + "</a>";
linkFromJson = $(linkFromJson).attr("href", this.links.web.href).attr("target", "_blank");
var listItem = document.createElement('li');
ul.append(listItem, linkFromJson);
});
// append this list to the document body
$('body').append(ul); 
```

我得到的是 a`<li></li>`和`<a>`标签，但它正确显示超链接。当我编写代码以嵌套 json 时，它会`[object][Object]`在遍历每个`<li>`标签的项目后返回给我。

我究竟做错了什么？

谢谢！

编辑：我想通了，用于`.html`在 中插入内置链接`<li>`，然后将`<li>`s 附加到`<ul>`：

```
var ul = $('<ul/>');
$.each(data.headlines, function() {
var linkFromJson = "<a>" + this.headline + "</a>";
linkFromJson = $(linkFromJson).attr("href", this.links.web.href).attr("target", "_blank");
var listItem = $('<li/>');
$(listItem).html(linkFromJson);
ul.append(listItem);
});
// append this list to the document body
$('body').append(ul);
},
error: function() {
// handle the error
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:08:23.613

根据[`.append()`](http://api.jquery.com/append/),`ul.append(listItem, linkFromJson)`将所有内容`ul`按顺序插入到元素的末尾。它不会将给定的内容相互嵌套。

为此，您必须先附加`<a>`到`<li>`，然后将结果附加`<li>`到`<ul>`

```
var listItem = document.createElement('li');
listItem.append(linkFromJson);
ul.append(listItem); 
```

# python - 在python中组合列表元素？

> ID：14490243
> 
> 赞同：-4
> 
> 时间：2013-01-23T22:04:26.523
> 
> 标签：python

> **可能重复：**
> [如何从 Python 列表中删除重复项，同时保持顺序？](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)

这个问题可能很简单。例如，我有一个这样的列表：

```
a = [1,1,1,1,2,3,4,5,5,5,5,6,7,7,8,9,14,14] 
```

我不想在我的列表中保留相同的元素。所以，我想把它转换成：

```
a = [1,2,3,4,5,6,7,8,9,14] 
```

我该如何管理？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:06:31.160

将其转换为一组：

```
a = list(set(a)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T22:07:48.940

您可以使用itertools 中的`unique_everseen` [配方](http://docs.python.org/2/library/itertools.html#recipes)，它维护顺序。

如果顺序无关紧要，请使用`set()`.

```
In [294]: a = [1,1,1,1,2,3,4,5,5,5,5,6,7,7,8,9,14,14]

In [295]: list(unique_everseen(a))
Out[295]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 14] 
```

`unique_everseen`：

```
def unique_everseen(iterable, key=None):
    "List unique elements, preserving order. Remember all elements ever seen."
    # unique_everseen('AAAABBBCCDAABBB') --> A B C D
    # unique_everseen('ABBCcAD', str.lower) --> A B C D
    seen = set()
    seen_add = seen.add
    if key is None:
        for element in ifilterfalse(seen.__contains__, iterable):
            seen_add(element)
            yield element
    else:
        for element in iterable:
            k = key(element)
            if k not in seen:
                seen_add(k)
                yield element 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T22:06:54.037

将列表转换为集合将删除重复项，然后将其转换回列表。

```
a = list(set(a)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T22:08:03.593

```
import itertools
a = [k for k, g in itertools.groupby(a)] 
```

这假设原始列表中的重复项已经分组，如您的示例所示。这种方法比使用的好处`set()`是可以保持原来的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T22:09:12.917

或者，如果您需要保留`sorted`订单：

```
a = [1,1,1,1,2,3,4,5,5,5,5,6,7,7,8,9,14,14]
sorted(set(a)) 
```

结果是：

> [1、2、3、4、5、6、7、8、9、14]

# javascript - Apply ligature.js to specific elements

> ID：14490244
> 
> 赞同：0
> 
> 时间：2013-01-23T22:04:30.593
> 
> 标签：javascript, jquery

I am using this ligature.js script to add ligatures to my site: [http://code.google.com/p/ligature-js/](http://code.google.com/p/ligature-js/)

The problem I am having is I want to only apply it to certain class names because if it gets applied to some system fonts, other than the web font I am loading in, the ligature characters do not appear in Windows.

The docs say to implement it on specific elements using:

```
ligature(false, document.getElementById('myMemoirs')); 
```

How can I use this to apply it to different classes, like .site-title, or use jquery to do this? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:15:51.247

我们在 Drupal 基础主题中使用这个 jQuery 解决方案（顺便说一句效果很好），并将其设置为针对多个选择器，如下所示。是否有一种简单的方法可以在我们的某些子主题中使用覆盖脚本关闭某些选择器上的连字替换？我们的子主题继承了我们的基本主题脚本，但我们并不总是希望对所有先前定义的元素进行连字替换。

```
$.each($('h1, h2.site-name, .node-page h2, .node-page h3, .node-page h4'), function(index, element) {
    ligature(false, element);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:43:00.827

如果您查看连字源代码，您会注意到它只支持将一个元素作为第二个参数传递，但它确实支持遍历所有传递的子元素以应用连字。您可以将连字应用到多个元素，方法是在一个循环中遍历它们，一次使用一个元素调用该函数。

```
var siteTitle = document.getElementsByClassName('site-title');
var elemLength = siteTitle.length;
while(elemLength--) {
  ligature(false, siteTitle[elemLength]);
} 
```

或者使用 jQuery

```
$.each($('.site-title'), function(index, element) {
  ligature(false, element);
}); 
```

但可能最好的方法是重构函数以处理多个元素。

# javascript - jquery serializeArray() results sometimes in empty string or empty array

> ID：14490246
> 
> 赞同：0
> 
> 时间：2013-01-23T22:04:33.813
> 
> 标签：javascript, jquery, asp.net

I have an `aspx.net` page with a large form to add an order.
This page contains a table with many order lines.
Per order line, there are 20 form fields and 5 hidden fields.

There is a print button to print the order, but before that it has to save it first.

My problem is that when I use `$("form").serializeArray()`, the array is 1 to 1.000.000 times empty.
It doesn't matter which browser I use.

This is making me crazy because lot's of users are calling me to fix this problem a.s.a.p.
I don't know to where to start debugging.

*   Is `serializeArray()` the problemen?
*   Or maybe the postdata is to large or corrupt?
*   Maybe the `WebMethod` needs some extra attributes?

Here is my print button

```
<input type='button' title='Print' onclick='PrintOrder(true)' /> 
```

```
function PrintOrder(autosave) {
  if (autosave) {
    // save my order and call a callback function after it's completed
    AutoSaveForm(function () {
      PrintOrder(false);
    });
  } else {
    // show my pdf page
    window.open('printorder.pdf');
    return;
  }
}

var inAutoSaveForm = false;

// this function is needed to autosave my order
// fn is a callback function when it's successfull done.
function AutoSaveForm(fn) {
  if (!inAutoSaveForm) {
    // serializeArray to post my form by the ajax function
    var fields = $("form").serializeArray();

    // json format
    var myData = {
      'orderId': orderId,
      'fields': fields
    };

    myData = JSON.stringify(myData);

    ShowLoader();

    $.ajax({
      type: "POST",
      url: "/Order.aspx/AutoSave",
      contentType: "application/json; charset=utf-8",
      timeout: (1000 * 60 * 10),
      data: myData,
      dataType: "json",
      success: function () {
        setTimeout(function () {
          fn.call();
        }, 25);
      },
      error: function (x, t, m) {
        alert("Error, please try again later.\n\n" + t);
      },
      complete: function (msg) {
        // .. do nothing yet
      }
    });

    inAutoSaveForm = true;
  } else {
    fn.call();
  }
} 
```

Here is my .NET code to save the order.
Maybe I have to put some attributes to the WebMethod ?

```
[WebMethod]
public static string VerwerkForm(field[] fields) {
    // do the magic
    return "ok";
}

public class field {
    public string name { get; set; }
    public string value { get; set; }
} 
```

# msbuild - csc error cs0006 metadata file could not be found building a .net 3.5 application with TFS 2012

> ID：14490247
> 
> 赞同：40
> 
> 时间：2013-01-23T22:04:41.960
> 
> 标签：msbuild, migration

We are upgrading from TFS 2008 to TFS 2012\. Majority of our applications are .net 3.5 applications.
We have setup a TFS 2012 environment and went through migration process. When we attempt to build our .net 3.5 applications we are getting the error:

```
csc error cs0006 metadata file could not be found........ 
```

If we take a .net 3.5 application, upgrade it to .net 4.x, then run the build again, it works just fine.

I cannot upgrade every single application I have during this migration. Is there something I might be missing either in the migration or on my build box to support 3.5?

I have VS 2008, 2010, 2012 installed on my build server. I have .net frameworks installed, etc.

Any assistance is helpful.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-12T03:06:06.270

可以在 Visual Studio 2012 中通过右键单击解决方案资源管理器中的项目并选择项目依赖项来指定项目依赖项和项目构建顺序。通过执行此操作，您的解决方案文件将得到修复。就我而言，我无需手动编辑解决方案文件即可解决此问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-09T02:10:32.960

我们在分支之间切换时遇到了这些问题（有重大变化）。当它发生时，我建议如下：

*   关闭 Visual Studio
*   关闭 w3wp.exe 实例（偏执且仅当您通过本地 IIS 托管时）
*   搜索并删除所有 bin 和 obj 文件夹
*   从 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\ 中清除所有中间 JIT 编译程序集

遵循这一套将做“清洁解决方案”应该做的事情，但不会。本质上，我们试图消除任何地方缓存的任何机会（这是这些问题的最常见原因）。

当然，您的里程可能会有所不同，但对我们来说，有 120 个项目和 130 万行代码重构经常会抛出这个问题，并且它可以可靠地解决它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-04T16:53:17.463

这似乎是由于 Visual Studio 解决方案文件不包含项目依赖项造成的。我发现我必须手动编辑解决方案文件才能使用项目 GUID 设置依赖项。

例如，在我们的解决方案文件中，我们有这样的内容：

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "ProjectA", "ProjectA\ProjectA.csproj", "{61C9C7C3-B5B4-4C00-8AE0-B49D21B3D77C}"
EndProject 
```

请注意，没有指定依赖项。它需要更像这样，其中指定的其他 GUID 是 ProjectA 所依赖的项目的 GUID。

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "ProjectA", "ProjectA\ProjectA.csproj", "{61C9C7C3-B5B4-4C00-8AE0-B49D21B3D77C}"
    ProjectSection(ProjectDependencies) = postProject
        {EB576061-5081-4ED5-9146-1B20C893E51E} = {EB576061-5081-4ED5-9146-1B20C893E51E}
        {A469F4BA-8BAA-4F14-BFC8-4D49F93C3E40} = {A469F4BA-8BAA-4F14-BFC8-4D49F93C3E40}
        {03FAB21D-C077-499B-9B19-67971791D369} = {03FAB21D-C077-499B-9B19-67971791D369}
        {F5E0C7B8-36AD-46B0-A74D-9C48516E208A} = {F5E0C7B8-36AD-46B0-A74D-9C48516E208A}
    EndProjectSection
EndProject 
```

有关更多信息，请参阅此[帖子](http://victorsergienko.com/project-dependencies-of-visual-studio-2008-broken-in-msbuild/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-05T19:53:56.383

在每个项目 => 属性屏幕中检查目标框架版本。如果它低于参考项目或文件中使用的，你会得到错误，因为编译器不知道如何处理更高版本的框架。
根据您的描述，您有一个以框架 v4.0 为目标的依赖项。
 *一一更改依赖关系目标框架，直到您的项目构建。

如果是第 3 方闭源依赖，请要求他们提供 .net 3.5 目标。*

没有解决方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-07T17:51:53.407

在我的情况下，其中一个项目没有建立，但在错误中绝对没有提到它。经过几个小时的拉扯头发并[丢下一些 F 炸弹](http://www.urbandictionary.com/define.php?term=Drop%20the%20F%20bomb)后，**我终于仔细查看了输出，发现有一个错误：**

[![在此处输入图像描述](../Images/9954b2f4f881b5202c496aaf4ba9a5e4.png)](https://i.stack.imgur.com/Z0c0v.png)

就是这样。我修复了它，所有错误都消失了。但是我很好奇，所以我将代码改回了编译失败的代码。我做了一个构建，现在我得到了友好的构建错误。由于某种原因，没有显示错误。不知道为什么...

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-04T07:40:23.780

我也有同样的错误。

解决方法是检查路径。在我的路径中，一个文件夹的名称为**abc%20ert**。这来自从 git 同步空间。Visual Studio在路径中的**%20存在问题。**删除它解决了这个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-18T16:48:19.230

我有一个类似的问题。就我而言，我能够通过 2 个步骤解决它。首先，我使用“清洁解决方案”选项清洁了解决方案。然后在清理解决方案后，调试器检测到我安装了 Microsoft.Aspnet.Mvc 库的过时版本。因此，我使用以下行通过库控制台安装了新的： Install-Package Microsoft.Aspnet.Mvc -version 5.2.3.0 -projectname _____________ Install-Package Microsoft.Aspnet.Mvc -version 5.2.3.0 -projectname _____________

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-15T05:45:50.207

在 ASP.NET 项目中使用 C# 7 语言功能时出现此错误，该项目没有最新版本的 NuGet 包`Microsoft.Net.Compilers`，如在[asp.net 应用程序中启用 c# 7 中所述](https://stackoverflow.com/questions/42744689/enabling-c-sharp-7-in-a-asp-net-application)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-28T13:56:37.007

我在涉及多个项目的解决方案中遇到了这个问题。问题是有不同的框架版本。我的 WEB 项目是 4.5，并且有一个使用 4.7.2 版本的 PDF Helper。对齐所有版本后，我清理了解决方案并且编译正常。

此致。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-13T12:17:56.660

在项目中的分支之间切换后发生了这种情况，它们之间存在显着差异，我尝试了网络上的所有解决方案，但没有奏效。

最后，我不得不删除我的本地项目文件并再次从 GitHub 存储库克隆项目，之后当我启动项目时，项目构建工作没有错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-16T13:40:28.120

就我而言，我在依赖项目中有错误。这就是为什么没有构建依赖项目并且缺少 DLL 的原因。我必须先解决依赖项目中的其他错误，然后错误 CS0006 消失了。

# scala - Cannot get Scala to run

> ID：14490250
> 
> 赞同：0
> 
> 时间：2013-01-23T22:04:57.387
> 
> 标签：scala, installation, classnotfoundexception

I've tried on two separate occasions to get Scala installed on my MacBook Air and have run into the same problem both times.

The first stime I installed scala, I moved all the appropriate files into the bin, lib, & src directories. When I type "scala" in the Terminal I get the following error:

```
Error occurred during initialization of VM
java/lang/ClassNotFoundException: error in opening JAR file /usr/lib/charset.alias 
```

So I have poked around and tried to figure it out. The problem I'm running into is this seems to be a fairly common error (and I understand what causes this error) but I can't figure out what is actually causing this to happen. I made sure I had all the proper .jar files in my lib directory. After a while, I decided to try installing Scala using Homebrew. After successfully installing Scala using Homebrew, I get the same error above when I type "scala" in the Terminal.

What am I missing? Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:46:53.320

尝试通过[HomeBrew](http://mxcl.github.com/homebrew/)安装。你也可以通过这种方式获得 SBT，

编辑：

哦！你做到了......在这种情况下，我会调查你的 Java / JVM / JRE / JDK 安装是否完好无损。它所抱怨的文件的名称对于 Mac 来说是可疑的。

编辑下一个：

我真的不应该这么多从臀部射击。我的 MacBook*确实*有那个文件！它包含以下内容：

```
# This file contains a table of character encoding aliases,
# suitable for operating system 'darwin10.0'.
# It was automatically generated from config.charset.
# Packages using this file:  
* UTF-8 
```

# c# - XDocument to live updated viewmodel

> ID：14490251
> 
> 赞同：1
> 
> 时间：2013-01-23T22:05:07.347
> 
> 标签：c#, xml-parsing, linq-to-xml, viewmodel, visual-studio-sdk

Does anybody know an easy way to keep a viewmodel in sync with an XDocument which is constantly changing? The XDocument is coming from the Microsoft.VisualStudio.XmlEditor.XmlModel class ([http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.xmleditor.xmlmodel.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.xmleditor.xmlmodel.aspx)). The same XDocument is constantly updated when a user is changing text in the visual studio editor.

I don't want to use serialisation to parse every time the whole xml into objects. The document is very, and that would be a big performance bottleneck.

This question is somehow similar to my question, but what to fill in on "(helper)"? [ViewModel on top of XDocument](https://stackoverflow.com/questions/262515/viewmodel-on-top-of-xdocument)

Requirements: - The viewmodel must be updated when something in the XDocument tree is changed, and minimum changes must be applied. - Events when a child of an object is changed. - Observablecollections when there are multiple same child tags - Objects must be reused, no new elements each time objects are accessed made from my custom classes. So properties must be used to hold the generated object from xml. The object must be updated with the new childs.

Is there a framework or something available to do this task in an easy way? I think many people have already done something like this, and I don't want to re-invent the wheel.

I hope this question is a little bit clear.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:07:21.177

您可以围绕 XElement 编写 ViewModel。

例如，

```
public class Model {

   protected XElement Element {
     get; set;
   }

   public Model() : this(null) { }

   public Model(XElement element) {
     // do some validation (XName)element.Name
     this.Element = element ?? new XElement("Model");
   }

   public string Name {
     get {
       return (string)Element.Attribute("Name");
     }
     set {
       // null: attribute is removed
       Element.SetAttributeValue(value);
     }
   }
} 
```

你的 XML：

```
<Model Name="Marilyn" /> 
```

使用您的 XDocument，您可以阅读您的元素：

```
source.Select(xElement => new Model(xElement)); 
```

ObservableCollection 本身由 INotifyPropertyChanged 模式通知：

```
public event PropertyChangedEventHandler PropertyChanged;

protected virtual void OnPropertyChanged(string propertyName)
{
    var handler = PropertyChanged;
    if (handler != null)
        handler(this, new PropertyChangedEventArgs(propertyName));
} 
```

在您的模型中，您会收到您在构造函数中分配的 XObject.Change 和 .Changed 事件的通知：

```
public Model() : this(null) {
  // call public Model(XElement element = null)
}

public Model(XElement element) {
  // do some validation (XName)element.Name
  this.Element = element ?? new XElement("Model");
  //this.Element.Changing += Element_Changing;
  this.Element.Changed += Element_Changed;
} 
```

现在您可以将 XElement 更改连接到 INotifyProperty 更改：

```
protected void Element_Changed(object sender, XObjectChangeEventArgs ea) {
  var attribute = sender as XAttribute;
  if (attribute != null && attribute.Parent == this.Element) {
    // only attributes of this element (and not the nested elements)
    // the attribute name is assumed to be exactly same as property name 'Name'
    OnPropertyChanged(attribute.Name);
  }
} 
```

请注意，Changed 和 Changed 正在冒泡，因此您只能观看您的 XDocument.Root XElement 或 Model.Element XElement。

有点过于简单了，我希望让你知道它可能是什么样子。现在，.NET 框架就是你的了。

我在以下位置找到了很好的例子：

*   [msdn 上的 XObjectChange-枚举](http://msdn.microsoft.com/en-us/library/bb354510.aspx)
*   在 stackoverflow 上[回答 INotifyPropertyChanged 和 ObservableCollection WPF](https://stackoverflow.com/a/7934349/1352471)

# c# - Expand intellisense method overloads

> ID：14490253
> 
> 赞同：1
> 
> 时间：2013-01-23T22:05:08.660
> 
> 标签：c#, .net, visual-studio-2010

How do I display expanded list of method overloads in intellisense popup, like this: ?

![http://img1.uploadscreenshot.com/images/orig/1/2300511497-orig.png](../Images/bbcd2e75d1c66cd1cfd9da739a7f6f04.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:29:08.987

It isn't free, but resharper will do this for you, plus tons of other features

![enter image description here](../Images/13483b46000b586a96a08e237fba87f2.png)

# c# - 从先前选择的列表框中选择列表框项目

> ID：14490254
> 
> 赞同：0
> 
> 时间：2013-01-23T22:05:13.097
> 
> 标签：c#, asp.net

我有两个列表框，我试图从第一个列表中自动选择第二个列表。问题是，我陷入了第二个 Foreach 循环，而第一个循环并没有与它不同步。有人可以看看吗，谢谢。

```
 foreach (ListItem item in this.clb_Departments.Items)
        {
            foreach (ListItem it in this.cbl_fDepartments.Items)
            {
                    if (item.Value == "2")
                    {
                        if (it.Value == "2")
                        {
                            if (item.Selected == true)
                            {
                                it.Selected = true;
                                break;
                            }
                        }
                    }
                    if (item.Value == "3")
                    {
                        if (it.Value == "3")
                        {
                            if (item.Selected == true)
                            {
                                it.Selected = true;
                            }
                        }
                    }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:17:51.230

如果两者`ListBoxes`都有相同的项目：

```
for(int i=0; i<cbl_fDepartments.Items.Count; i++)
    cbl_fDepartments.Items[i].Selected = clb_Departments.Items[i].Selected; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:16:03.177

我不认为这是正确的方法。从第一页的第一个列表框中捕获数据后，将其存储在某处。然后，当您呈现评论页面时，您将第二个列表框的 SelectedValue 设置为您之前存储的值。

无需同步任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:16:31.340

我仍然对您要尝试做的事情感到有些困惑，但这可能会让您入门吗？

```
 foreach (ListItem item in this.clb_Departments.Items)
    {
        this.cbl_fDepartments.Items[this.cbl_fDepartments.IndexOf(item)].Selected = item.Selected;
    } 
```

如果这不起作用，您可以在您的内部尝试这个`foreach`：

```
this.cbl_fDepartments.Items.Cast<ListItem>().Where(t=>t.Value == item.Value).Selected = item.Selected; 
```

# javascript - 如何防止多次点击 AngularJS 中的链接？

> ID：14490257
> 
> 赞同：0
> 
> 时间：2013-01-23T22:05:25.470
> 
> 标签：javascript, angularjs

我有一个链接可以增加数据库中的值，前提是它低于某个阈值，如下所示：

```
if (currentValue + 10 < maxValue)
{
$http({method: 'GET', url: 'api.increaseValue/10'}) ...
} 
```

但是，如果我快速单击，则所有单击都会通过 if 条件并同时启动一堆请求，这些请求可以使值超过阈值。有没有办法优雅地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:45:46.000

有很多方法可以处理这个问题。除了@praneetloke 已经提到的，这里还有一些想法。

*   单击处理程序/函数可以首先禁用按钮，发送 http 请求，然后在收到来自服务器的确认时再次启用按钮 - 此时我假设 currentValue 也会更新。
*   在本地更新 currentValue，跟踪未完成的服务器请求，然后在您的 http 回调中处理任何错误情况。例如，如果它没有在服务器端更新，弹出一个错误对话框并适当地减少 currentValue —— 即，通过未完成的服务器请求的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:20:24.273

使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout) () 来延迟函数的执行。此外，在函数中使用全局标志，如果该函数当前正在为上一次单击执行，则该标志将返回函数执行。然后，当您的 API 调用返回时，重置标志以允许后续单击调用该函数。

该建议还取决于递增的值代表什么。您必须确定您的用户是否可以忽略快速点击。如果他们是故意这样做而您不想允许，也许您必须显示一条友好的消息，说明正在处理先前的请求，并且他们必须等待才能再次单击。

如果您提供此操作的一些上下文并显示更多有关此功能正在做什么的代码，我可能会改进答案。

# java - Java exceeding the 65535 bytes with Array of Points and Llines

> ID：14490262
> 
> 赞同：0
> 
> 时间：2013-01-23T22:05:34.540
> 
> 标签：java, arrays

So I have an array of Points

```
Point[] point ={new Point (x,y), ....} 
```

And an array of Lines from those points

```
Line[] line = {new Line(point[1],point[5]),....} 
```

If I store this in a class i exceed the 65535 bytes.

I thought of getting it from external files as splitting them up in other classes is no option. But the lines have to get their points from the point array.

So if anyone has an idea on how to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:08:58.033

从文本文件中读取点，例如

```
x0 y0
x1 y1
... etc 
```

将行读为一系列点号

```
1 5 etc
0 3 6 9 etc 
```

您可以使用 BufferedReader 和 split() 或仔细使用 Scanner。

您可以将线定义为一系列点，而不是提前定义所有点。这将更容易维护。

```
1,2 3,4 5,6 etc
2,1 4,5 0,7 etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:23:00.577

您可以使用静态初始化程序：

```
static {
   Point[] points;
   int i =0;
   for(int x=0;x<something;x++){
       for(int y=0;y<something;y++){
           point[i] = new Point(x,y);
       }
   }
} 
```

如果这些点无法计算，因为它们是值，请将它们存储在一个文件中，如 peter 所写。

# zend-framework - Error using _redirect function on ubuntu

> ID：14490269
> 
> 赞同：0
> 
> 时间：2013-01-23T22:06:03.983
> 
> 标签：zend-framework, ubuntu-12.04, doctrine-1.2, zend-auth

I am developing a system in Zend Framework and I implemented user/rol authentication using Zend_Auth for security and it work receiving user/password information and return the Model User with each user's rol.

In my global layout, I have a big banner that redirect to Home `some/path/default/index/index` and then inside IndexController, I redirect to user's home page that depends of its roles. When I work on Windows I have no problems. But when I work in my Ubuntu, the `_redirect` function of Zend Framework throw a Doctrine's Exception

`Uncaught exception 'Doctrine_Connection_Pgsql_Exception' with message 'SQLSTATE[22P02]: Invalid text representation: 7 ERROR: invalid input syntax for integer: ""`

But the error begin in Zend Broker.

I using a Plugin in my Front Controller to know if user can or cannor access to certain page. How can I solve that error?

This is my stack trace:

`Fatal error: Uncaught exception 'Doctrine_Connection_Pgsql_Exception' with message 'SQLSTATE[22P02]: Invalid text representation: 7 ERROR: invalid input syntax for integer: ""' in /home/project/library/Doctrine/Doctrine/Connection.php:1082 Stack trace: #0 /home/project/library/Doctrine/Doctrine/Connection/Statement.php(269): Doctrine_Connection->rethrowException(Object(PDOException), Object(Doctrine_Connection_Statement)) #1 /home/project/library/Doctrine/Doctrine/Connection.php(1006): Doctrine_Connection_Statement->execute(Array) #2 /home/project/library/Doctrine/Doctrine/Query/Abstract.php(976): Doctrine_Connection->execute('SELECT u.usuari...', Array) #3 /home/project/library/Doctrine/Doctrine/Query/Abstract.php(1026): Doctrine_Query_Abstract->_execute(Array) #4 /home/project/library/Zend/Controller/Plugin/Broker.php on line 336`

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:15:00.483

从技术上讲，大多数助手（尤其是这个助手）在任何平台上都以相同的方式工作。为了帮助您找出问题所在，我有两个建议。

确保您在两个系统上处于相同的环境中。如果其中一个是 APPLICATION_ENV '开发者'，而另一个是'生产'，这可能会导致不同系统上的不同行为。

另一件事是确保您设置了您认为设置它的环境。一些教程提倡通过 SetEnv APPLICATION_ENV 开发人员（例如）在 .htaccess 文件中设置环境，因此您在 public/index.php 中设置的任何内容都可能根本没有设置。

另一种想法是，两个系统上的包含路径可能预设（在 public/index.php 之前）不同。

希望这有助于这个过程:)

# .net - 将具有 NuGet 依赖项的 .NET 项目添加到 git 存储库的正确方法是什么？

> ID：14490270
> 
> 赞同：1
> 
> 时间：2013-01-23T22:06:05.963
> 
> 标签：.net, git, nuget, projects-and-solutions

我有一个项目，我正在为（例如）编写 NUnit 测试。我想将代码提交到 git，但我也觉得将 NuGet 包（NUnit 和 NUnit.Runner）提交到 repo 是不好的做法。但是，我也不想打开包还原，因为我相信这是用户设置而不是项目设置 (IIRC)。

将具有 NuGet 依赖项的 .NET 项目添加到 git 存储库的正确方法是什么？我认为它会很高兴地抓住包，但需要开发人员干预。也许只是期望其他开发人员知道将那些丢失的包添加回项目中？（看起来我们最终也会一直解决 .csproj 冲突）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:08:51.993

您应该`packages.config`只将解决方案的文件添加到您的 git 存储库中。每个开发人员都可以从中自动安装所需的软件包。

例如，至少在 Visual Studio 2012 下，您可以在“工具”>“库包管理器”菜单下可访问的“包管理器设置”窗口中选中“允许 NuGet 在构建期间下载丢失的包”复选框。使用此选项和`packages.config`文件，您无事可做...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:11:30.563

如果无法或不愿意启用包还原，开发人员可以通过命令行轻松添加所有包，如[本问题](https://stackoverflow.com/questions/6876732/how-do-i-get-nuget-to-install-update-all-the-packages-in-the-packages-config)所述：

> 您可以使用 nuget.exe 来恢复您的包。为每个项目运行以下命令。
> 
> ```
> nuget install packages.config 
> ```

[您也可以在](http://blog.davidebbo.com/2011/03/using-nuget-without-committing-packages.html)预构建命令中运行它，如下所述：

```
$(SolutionDir)Tools\nuget install $(ProjectDir)packages.config 
```

但实际上，包还原更容易，只需点击几下即可。

# java - Android：未为 VideoView 类型定义 setOnBufferingUpdateListener

> ID：14490271
> 
> 赞同：2
> 
> 时间：2013-01-23T22:06:05.660
> 
> 标签：java, android, buffer, android-videoview

我的代码：

```
VideoView mVideoView =  (VideoView) findViewById(R.id.videoView);
    mVideoView.setOnBufferingUpdateListener(new OnBufferingUpdateListener(){
    public void onBufferingUpdate(MediaPlayer mp, int percent) {

    }
}); 
```

但是，eclipse写了这个错误：

> “方法 setOnBufferingUpdateListener(new MediaPlayer.OnBufferingUpdateListener(){}) 未为 VideoView 类型定义”

反过来，我导入 OnBufferingUpdateListener。

```
import android.media.MediaPlayer.OnBufferingUpdateListener; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T04:27:28.103

你可以这样做：

```
videoView.setOnPreparedListener(new OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {

            mp.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {
                @Override
                public void onBufferingUpdate(MediaPlayer mp, int percent) {
                //do something
                }
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:33:25.360

您收到该错误的原因是因为 ViewView 不包含函数 setOnBufferingUpdateListener。

setOnBufferingUpdateListener 只能通过 MediaPlayer 类使用。Video View 是 surfaceView 和 mediaplayer 的包装器，但它不会从 MediaPlayer 公开该功能。

# entity-framework - 用实体框架 5.0 重写一个递归 sql select

> ID：14490272
> 
> 赞同：2
> 
> 时间：2013-01-23T22:06:20.130
> 
> 标签：entity-framework, c#-4.0

我想获取其父为 null 的所有模块，这意味着所有根模块。

此外，我希望每个模块都知道它是否有孩子。

我需要这个功能，因为根模块显示在延迟加载的模块树中。

这样它对 SQL 的工作很快：

```
SELECT 
   Id, 
   CASE WHEN EXISTS (SELECT NULL FROM Module m2 WHERE m2.ParentId = module.Id) THEN 1 
        ELSE 0 
   END AS HasChildren 
FROM Module 
WHERE ParentId IS NULL 
```

如何使用 EF 5 做同样的事情？

**更新**

这些是我的类，它们是我的 Poco 首先使用 EF 代码：

```
public class Module
    {
        public Module()
        {
            Children = new List<Module>();
        }

        // PK
        public int ModuleId { get; set; }
        public string Name { get; set; }
        public List<Module> Children { get; set; }

        // FK
        public int MachineId { get; set; }
        public Machine Machine { get; set; }
    }

    public class Machine
    {
        // PK
        public int MachineId { get; set; }
        public string Name { get; set; }
    } 
```

**更新**2

@Gert

这是 EF 为您生成的 sql 解决方案 .Any() 代码：

```
{SELECT 
[Extent1].[ModuleId] AS [ModuleId], 
[Extent1].[Name] AS [Name], 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM [dbo].[Module] AS [Extent2]
    WHERE [Extent1].[ModuleId] = [Extent2].[Module_ModuleId]
)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
    1 AS [C1]
    FROM [dbo].[Module] AS [Extent3]
    WHERE [Extent1].[ModuleId] = [Extent3].[Module_ModuleId]
)) THEN cast(0 as bit) END AS [C1]
FROM [dbo].[Module] AS [Extent1]
WHERE ([Extent1].[ParentId] IS NULL) AND ([Extent1].[MachineId] = @p__linq__0)} 
```

您的 linq 查询永远不会为 HasChildren 属性返回 TRUE，因为我以前的查询看起来不同：

```
context.Modules.SqlQuery("SELECT Module.ModuleId, Module.Name, case when Exists(select null from Module m where m.ParentID = Module.ModuleId) " +
"then 1 else 0 end as HasChildren FROM Module WHERE Module.ParentId Is Null AND Module.MachineId = @MachineId ORDER BY HierarchyIndex",
new SqlParameter("MachineId",machineId)).ToList(); 
```

在 EF 生成的“你的”sql 语句中，我错过了重要的 m.ParentId = Module.ModuleId 比较。你做 Extend1.ModuleId = Extend2.Module_ModuleId。

好像有什么不对劲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:12:37.117

到目前为止，这两个答案都没有考虑到 EF 查询中对 CLR 方法的调用无法转换为 SQL 并且 EF 会引发异常的事实。

因此，您必须使用 EF 可以转换为 SQL 的方法来解决它。现在幸运的是，您的查询*不是*递归的（例如获取层次结构的所有级别），而是非常简单：

```
from m in context.Modules
          where m.ParentId == null
          select new { m.Id, HasChildren = m.Children.Any() } 
```

如您所见，我必须对您的模型做出一些假设（这就是我问的原因）。主要的是`Module`具有导航属性`Childeren`（1：n）。你可以没有，但你必须（组）加入`Modules`：

```
from m in context.Modules.Where(x => x.ParentId == null)
          join child in context.Modules on m.Id equals child.ParentId
              into groupJoin
          select new Node { m.Id, HasChildren = groupJoin.Any() } 
```

（`Node`具有两个 get/set 属性`Id`和的类`HasChildren`）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-24T03:52:01.727

```
public void ListModule()
        {
            var raw= from m1 in db.Module
                       where m1.ParentId == null
                       select new { m1.ParentId, wanted = this.test(m1.ParentId) };

        }

public int test(string para)
{
    var raw = from c in db.Module
              where c.ParentId == para
              select c;
    if (raw.Count() != 0)
        return 1;
    else
        return 0;
} 
```

# delphi - 创建示例代码期间填充的 TDictionary

> ID：14490275
> 
> 赞同：4
> 
> 时间：2013-01-23T22:06:27.290
> 
> 标签：delphi

有没有人有`TDictionary<TKey, TValue>`在其构造函数期间填充的示例代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T07:16:48.207

显然你只想要一个单行，所以我试了一下，实现了一个`TDictHelper`允许使用单行创建和填充字典的方法。

* * *

使用任何形式的单线初始化 Dictionary 的问题在于它需要成对的值，而我们没有必要的好语法来传递这些对。例如，如果需要`TPair<Key, Value>.Create(A, B)`对添加到字典中的每一对值使用语法，那将是一个丑陋的一个衬里。

我确实想出了几个好看的替代品；第一个是这样使用的：

```
 with TDictHelper<Integer, string> do
    Dict := Make([P(1, 'one'), P(2, 'two')]); 
```

之所以需要使用 ，`with`是因为`TDictHelper`我实现的类有一个`Make`以数组`TPair<Key, Value>`为参数的例程；如果我把它写成这样，这将是不可用的：

```
Dict := TDictHelper<Integer, string>.Make(TPair<Integer, string>.Create(1, 'one'), TPair<Integer, string>.Create(2, 'two')); 
```

它会起作用，但它会非常非常难看！

由于使用`with`可能会出现问题（特别是如果您想使用两种字典），我提供了另一种语法；不幸的是，这个不能扩展，它变得非常丑陋，非常快：

```
 Dict := TDictHelper<Integer, string>.Make([1, 2], ['one', 'two']); 
```

此替代方法为键和值采用两个单独的数组，将它们组合在`Make`方法中。2-3 个元素看起来不错，但无法扩展：如果您有 10 个元素并且需要删除第 7 个元素怎么办？您需要对元素进行计数，这很容易出错。

这是完整的代码，不多：

```
program Project25;

{$APPTYPE CONSOLE}

uses
  SysUtils, Generics.Collections;

type
  TDictHelper<Key, Value> = class
  public
    class function P(const K:Key; const V:Value): TPair<Key, Value>;
    class function Make(init: array of TPair<Key, Value>): TDictionary<Key, Value>;overload;
    class function Make(KeyArray: array of Key; ValueArray: array of Value): TDictionary<Key, Value>;overload;
  end;

{ TDictHelper<Key, Value> }

class function TDictHelper<Key, Value>.Make(init: array of TPair<Key, Value>): TDictionary<Key, Value>;
var P: TPair<Key, Value>;
begin
  Result := TDictionary<Key, Value>.Create;
  for P in init do
    Result.AddOrSetValue(P.Key, P.Value);
end;

class function TDictHelper<Key, Value>.Make(KeyArray: array of Key;
  ValueArray: array of Value): TDictionary<Key, Value>;
var i:Integer;
begin
  if Length(KeyArray) <> Length(ValueArray) then
    raise Exception.Create('Number of keys does not match number of values.');
  Result := TDictionary<Key, Value>.Create;
  for i:=0 to High(KeyArray) do
    Result.AddOrSetValue(KeyArray[i], ValueArray[i]);
end;

class function TDictHelper<Key, Value>.P(const K: Key;
  const V: Value): TPair<Key, Value>;
begin
  Result := TPair<Key, Value>.Create(K, V);
end;

// ============================== TEST CODE FOLLOWS

var Dict: TDictionary<Integer, string>;
    Pair: TPair<Integer, string>;

begin
  try
    try
      // Nice-looking but requires "with" and you can't work with two kinds of DictHelper at once
      with TDictHelper<Integer, string> do
        Dict := Make([P(1, 'one'), P(2, 'two')]);
      // Use the array
      for Pair in Dict do
        WriteLn(Pair.Key, ' = ', Pair.Value);
      Dict.Free;

      // Passing the Keys and the Values in separate arrays; Works without "with" but it would
      // be difficult to maintain for larger number of key/value pairs
      Dict := TDictHelper<Integer, string>.Make([1, 2], ['one', 'two']);
      // Use the array
      for Pair in Dict do
        WriteLn(Pair.Key, ' = ', Pair.Value);
      Dict.Free;

    except on E:Exception do
      WriteLn(E.ClassName, #13#10, E.Message);
    end;
  finally ReadLn;
  end;
end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T22:29:34.283

您需要调用接收类型参数的[字典构造函数重载](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Generics.Collections.TDictionary.Create)。`Collection``TEnumerable<TPair<TKey, TValue>>`

例如，假设我们有`TDictionary<string, Integer>`. 然后我们可以向构造函数传递一个`TEnumerable<TPair<string, Integer>>`. 这种事情的一个例子是[`TList<TPair<string, Integer>>`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Generics.Collections.TList)。

```
List := TList<TPair<string, Integer>>.Create;
List.Add(TPair<string, Integer>.Create('Foo', 42));
List.Add(TPair<string, Integer>.Create('Bar', 666));
Dictionary := TDictionary<string, Integer>.Create(List); 
```

这是非常笨拙的，你永远不会喜欢这个选项，而不是简单`Create`的，然后是一系列对`Add`. 如果您碰巧手头有现成的收藏，您只会使用传递现有收藏的选项。

派生自的类的另一个示例`TEnumerable<T>`是`TDictionary`它本身：

```
type
  TDictionary<TKey,TValue> = class(TEnumerable<TPair<TKey,TValue>>) 
```

因此，如果您已经有一个字典实例，您可以创建另一个并使用第一个的内容对其进行初始化：

```
Dict2 := TDictionary<string, Integer>.Create(Dict1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-15T17:46:02.737

在下面的示例中，键和值的数组被传递给自定义构造函数。键和值使用以下模式放置在同一个数组中：key1, value1, key2, value2, ...., keyN, valueN。该数组必须包含偶数个项目。

```
unit MainUnit;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, System.Generics.Collections, System.Rtti;

type
  TForm3 = class(TForm)
  private
    { Private declarations }
  public
    { Public declarations }
  end;

  TMyDictionary<TK, TV> = class(TDictionary<TK,TV>)
    constructor Create(const values: array of variant);
  end;

var
  Form3: TForm3;
  extensions: TMyDictionary<string, integer>;

implementation

constructor TMyDictionary<TK, TV>.Create(const values: array of variant);
var
  I: Integer;
  k, v: TValue;
  kt: TK;
  vt: TV;
begin
  inherited Create(Length(values) div 2);
  I := Low(values);
  while i <= High(values)  do
  begin
    k := TValue.FromVariant(values[i]);
    v := TValue.FromVariant(values[i + 1]);
    kt := k.AsType<TK>;
    vt := v.AsType<TV>;
    Add(kt, vt);
    Inc(I, 2);
  end;

end;

{$R *.dfm}
begin

 extensions := TMyDictionary<string, integer>.Create(['1', 1, '3', 3]);

 OutputDebugString(PChar(IntToStr(extensions['1'])));
end. 
```

我不太确定 TValue 方法的性能，但是如果您有一些项目，我认为可以忽略不计。

# mysql - 查询设置货币mysql

> ID：14490277
> 
> 赞同：2
> 
> 时间：2013-01-23T22:06:39.240
> 
> 标签：mysql

我有财务数据，并将其保存为整数，例如 1000000000，我希望它显示 1,000,000,000，这样更易​​于阅读，我该怎么做？

我试过类似的东西

```
SELECT to_char(col_name, 'Rp 99,999.00') salary FROM my_table 
```

但它说函数 to_char 不存在？(Rp) 是我国的官方货币，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:09:38.327

CONCAT('Rp',FORMAT(col_name,2)) AS 工资

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:09:57.243

从 my_table 中选择 FORMAT(salary,0)；

# c++ - C++ 构造函数问题

> ID：14490284
> 
> 赞同：1
> 
> 时间：2013-01-23T22:07:30.567
> 
> 标签：c++, constructor, rvalue, most-vexing-parse

我想知道是否有人可以帮助我解决`c++`（`gcc`最新版本）中的奇怪行为。下面是一些成功编译的代码，由于缺少适当的构造函数，我预计会出现编译时错误。谁能解释发生了什么？

```
#include <iostream>
using namespace std;

struct ClassA {
  ClassA() {cout << "hello" << endl;} 
  void speak() {cout << "I am class A" << endl;}
  ~ClassA() {cout << "goodbye" << endl;} 
};

struct ClassB {
    // just an empty struct
};

int main() {
    ClassA myClassA(ClassB()); // trying to construct class A from an rvalue reference to class B is ok?
    return 0;
} 
```

}

如果我尝试调用 的函数`class A`，我会得到一个编译时错误：

```
int main() {
    ClassA myClassA(ClassB());
    myClassA.speak();
    return 0;
} 
```

结果是：

```
error: request for member ‘speak’ in ‘myClassA', which is of non-class type ‘ClassA(ClassB (*)())’ 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:08:29.063

你根本就没有声明一个对象。相反，您已经声明了一个*function*，因此根本不需要构造函数。（注意，`ClassB()`表示函数类型！）

如果要从临时构造对象，请尝试以下语法之一：

```
ClassA x1 { ClassB{} };   // C++11 only

ClassA x2((ClassB()));    // parenthesized expression is never a type declaration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:09:37.487

`ClassA myClassA(ClassB());`声明一个被调用的*函数*`myClassA`，该函数返回 a`ClassA`并接受一个参数，该参数是一个指向返回 a`ClassB`且不接受任何参数的函数的指针。这是[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T22:14:26.917

这是一种称为最令人烦恼的解析的情况。

首先，`ClassB` *确实*有一个构造函数。当您不创建自己的一个时，编译器会为您提供一个。在您`ClassB`将.`ClassA``ClassB`

# mysql - MySQL 查询未按预期工作

> ID：14490286
> 
> 赞同：1
> 
> 时间：2013-01-23T22:07:36.853
> 
> 标签：mysql

我对带有连接、计数和使用总和的 MySQL 查询有疑问。环境在这里可用：[http ://sqlfiddle.com/#!2/38e813/5](http://sqlfiddle.com/#!2/38e813/5)

我的目标是选择所有用户的数据，计算他拥有的评论和帖子的数量，并总结他收到的所有评级。尽管从示例中可以看出，即使有 3 条评分记录，返回的最终评分数也是 -4（应该是 -3）。我认为它需要与 group by 进行一些工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:56:33.047

这是我使用派生表（作为 x 和 y）的答案：

```
select x.id, x.active, x.ip, x.registered, x.username, x.email, x.role, 
   x.posts, y.comments, x.rating + y.rating as rating 
from
   (select u.id, u.active, u.ip, u.registered, u.username, u.email, u.role, 
    count(p.user_id) as posts, ifnull(sum(pr.rating),0) as rating 
    from users u 
    join posts p on p.user_id=u.id
    left join posts_ratings pr on pr.post_id=p.id) as x
join
   (select u.id, u.active, u.ip, u.registered, u.username, u.email, u.role, 
    count(c.user_id) as comments, ifnull(sum(cr.rating),0) as rating 
    from users u 
    join comments c on c.user_id=u.id
    left join comments_ratings cr on cr.comment_id=c.id) as y
on x.username=y.username; 
```

该`x`表获取帖子数和总评分，而该`y`表获取评论数和总评分。两个表都通过用户名（如果需要，也可以是 user_id）连接，并且每个表的两个评分都加在一起。

`x`要获取所有用户的数据，您必须在和表中显式列出用户表中的列`y`：
`select u.id, u.active, u.ip, u.registered, u.username, u.email, u.role, ... COLS here`
然后在最外面的选择（第一行）中执行相同操作：
`select x.id, x.active, x.ip, x.registered, x.username, x.email, x.role, ... COLS here`

要获取特定用户，`WHERE`请在表 x、表 y 和最外面的选择上添加子句。

# android - iPhone/Android 引入原生 Dropdown 选择器

> ID：14490287
> 
> 赞同：2
> 
> 时间：2013-01-23T22:07:39.263
> 
> 标签：android, iphone, cordova, select

有没有办法（可能使用phoneGap）为一组元素引入本地移动下拉选择器？

例如，有人点击进入列表：

```
<ul class="dropdown">
    <li>Bananas</li>
    <li>Oranges</li>
    <li>Apples</li>
    <li>Pears</li>
</ul> 
```

并且这组元素会在原生 iOS 下拉选择器中弹出，您可以单击其中一个吗？我正在谈论的下拉列表可以在这里看到：

![iPhone 选择下拉菜单](../Images/e77c090d67c5057d4d45c3bb4007b0d2.png)

我意识到您必须随后调用其他一些本机函数来获取实际选择的返回值并使用该信息“做某事”。

`<ul>`我问的原因是因为我有一个使用和元素创建的自定义选择选择器`<li>`，所以选择/下拉框是完全可定制的，我对它的工作方式很满意，但在移动版本上，长下拉菜单不像用户友好的本地选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T18:09:52.927

我知道这个问题已经很老了，但我只是在一些类似的问题上苦苦挣扎。到目前为止，移动浏览器无需任何额外的 JS 即可支持这些原生控件元素（我不确定去年移动设备是否有相同的支持）。

所以你可以做的是以下。首先，您使用选择框建立一个列表：（当然它也适用于单个选择框）

```
 <ul>
    <li>
        <select class="dropdown" name="fruits">
            <option value="Bananas">Bananas</option>
            <option value="Oranges">Oranges</option>
            <option value="Apples">Apples</option>
            <option value="Pears">Pears</option>
        </select>
    </li>
    <li>
        <select class="dropdown" name="cities">
            <option value="Arizona">Arizona</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Conneticut">Conneticut</option>
        </select>
    </li>
</ul> 
```

然后应用一些自定义样式使其看起来像原生 UI：

```
ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.dropdown {
    border: 1;
    padding: 3px 5px;
    width: 100%;
    /* attach a custom background image */
    background: url('http://dummyimage.com/15x15/00ff40/000&text=^') no-repeat right     center #FFF;

    /* prevent the default small pointer from showing up */
    -webkit-appearance: none;
    -moz-appearance:    none;
    appearance:         none;
} 
```

而已。在 JSBin 上工作的[现场演示](http://jsbin.com/kaxacuyo/1/edit?html,css,output)（使用 iOS 7 进行测试，但也应该在其他现代移动浏览器中工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T04:20:36.647

您可以使用一些 Javascript 库，例如 Mobiscroll；查看他们的[演示](http://demo.mobiscroll.com/select/select#)。

请注意 Mobiscroll 服务仅在 15 天内免费，因此请测试一下。

# c++ - 当矩阵对象的维度为 1x1 时，如何使我的矩阵对象隐式转换为标量？

> ID：14490288
> 
> 赞同：2
> 
> 时间：2013-01-23T22:07:39.467
> 
> 标签：c++, matrix, operator-overloading, member-functions

我写了一个`Matrix`类。它在矩阵之间进行乘法运算。有时矩阵的乘法会产生一个 1x1 矩阵（例如，两个列向量的内积）。是否可以让一个`Matrix`对象在一对一的时候直接返回一个标量值？

```
template <class T> class Matrix
{
    public:
        // ...
        T&       operator()(uint64_t unRow, uint64_t unCol = 0) throw(MatrixOutOfRange);
        const T& operator()(uint64_t unRow, uint64_t unCol = 0) const throw(MatrixOutOfRange);
        // ...
    protected:
        std::vector<T> MatrixArray;
        // ...
};

// ...

template <class T>
T & Matrix<T>::operator()(uint64_t unRow, uint64_t unCol /*= 0*/) throw(MatrixOutOfRange)
{
    /* Bound checking here */
    return MatrixArray[m_unColSize * unRow + unCol];
}

template <class T>
const T & Matrix<T>::operator()(uint64_t unRow, uint64_t unCol /*= 0*/) const throw(MatrixOutOfRange)
{
    /* Bound checking here */
    return MatrixArray[m_unColSize * unRow + unCol];
}

// ... 
```

* * *

示例代码：

![乳胶图像](../Images/9df0dd0877d1a9fd6bd1d21ddc77bf66.png)

```
Matrix<double> A (3, 1,    1.0, 2.0, 3.0);
Matrix<double> AT(1, 3,    1.0, 2.0, 3.0);   // Transpose of the A matrix
Matrix<double> B (3, 1,    4.0, 5.0, 6.0);
Matrix<double> C();

C = AT * B;
double Result1 = C(0, 0);
double Result2 = (AT * B)(0, 0);
double Result3 = A.InnerProductWith(B)(0, 0); 
```

`(0, 0)`当结果是一对一矩阵时，我想删除不必要的元素位置说明符参数。像这样：

```
C = AT * B;
double Result1 = C;
double Result2 = AT * B;
double Result3 = A.InnerProductWith(B); 
```

如果结果不是一一对应的，抛出异常也没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:12:33.737

是的。

这将类似于[`std::vector::at()`](http://en.cppreference.com/w/cpp/container/vector/at)，这也是一个编译时调用，除非满足某些运行时条件，否则它将始终抛出。

要键入的转换运算符`T`如下所示：

```
template <class T> class Matrix
{
    public:
        // ...
        operator T &() { 
           // Throw here if size is not 1x1...

           return (*this)( 0, 0 ); 
        }

        operator T const &() const { 
           // Throw here if size is not 1x1...

           return (*this)( 0, 0 ); 
        }
        // ...
}; 
```

您的所有示例代码都可以按原样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:29:59.367

我认为一个更好的方法是让你的尺寸成为类型的一部分：

```
template <class T, size_t NRows, size_t NCols>
class Matrix
{
public:
    // ...
protected:
    // ...
    T M_storage[NRows][NCols]; // Or something...
}; 
```

然后使用模板特化将转换运算符添加到 1x1 矩阵：

```
template <class T>
class Matrix<T, 1, 1>
{
public:
    // ...
    operator T ()
    {
       return M_storage;//[0][0]; 
    }
protected:
    // ...
    //T M_storage[1][1]; // Or something...
    // Or even
    T M_storage;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:15:27.350

除非尺寸成为类型的一部分。否则，您将必须始终进行标量转换，或者永远不会。您不能基于*运行时事实来更改类型的**编译时*特性（无论它是否具有隐式转换） -无论两个维度的大小是否为 1。这需要编译器的预知。

# mysql - 此 MySQL 查询的任何问题

> ID：14490289
> 
> 赞同：0
> 
> 时间：2013-01-23T22:07:42.093
> 
> 标签：mysql, csv

我有这个查询：

```
 SELECT A.id FROM TableB B
   LEFT JOIN TableA A ON 
          CONCAT(',',B.class_id,',') LIKE CONCAT('%,',A.class_id,',%')
   WHERE A.class_id is not null 
```

**表A**

```
 [id]   |   [class_id]
---------------------
 One       1, 10, 16, 18
 Two       14, 11
 Three     19, 13, 15
 Four      10 
```

**表B**

```
 [id]   |   [class_id]
---------------------
 ABC         1
 AC          1
 DE          10 
 DEC         19
 ACD         16
 BCD         18
 BCO         18 
```

我没有`id`从 TableA 中获得所有`class_id`来自 TableB 的 s。我也愿意接受任何其他更好的查询建议。

这就是我要的：

```
 One   // class_id contains  1, 10 16 and 18 that are in `TableB` class_id
  Three // class_id contains 19 which is in `TableB` class_id
  Four  // class_id contains 10 which is in `TableB` class_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:28:31.397

虽然您可能会使用此策略，但它会很棘手且查询速度非常慢。问题在于出现在 csv 列表开头或结尾的数字，因此与模式 '%,X,%' 不匹配

你应该做的是制作一个每个（id，class_id）一行的正确表，如下所示：

```
[id]   |   [class_id]
---------------------
One       1
One       10
One       16
One       18
Two       14
Two       11
Three     19
Three     13
Three     15
Four      10 
```

然后你的查询变成一个普通的连接：

```
SELECT A.id, B.class_id FROM TableB B
join TableA A ON 
      B.class_id = A.class_id
where A.class_id is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:28:23.227

这应该工作（编辑）：

```
select A.id from TableA A where A.id not in (
SELECT distinct A2.id FROM TableA A2 where 
    not exists (select B.id from TableB B where CONCAT(',',B.class_id,',') 
                         like CONCAT('%,',A2.class_id,',%'))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T22:38:02.380

看起来您只是混淆了搜索字符串：

`CONCAT(', ',B.class_id,',') LIKE CONCAT('%, ',A.class_id,',%')`

应该

`CONCAT(', ',A.class_id,',') LIKE CONCAT('%, ',B.class_id,',%')`

因为您正在寻找 B 在 A 中的出现。

另外，在连接冒号时注意冒号后面的空格

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T22:52:03.443

```
SELECT a.id, b.class_id
FROM TableA a, TableB b
WHERE CONCAT(', ',a.class_id,', ') LIKE CONCAT('%, ',b.class_id,', %'); 
```

你实际上不需要`a.class_id is not null`...因为来自 b.class_id 的字符串不会在 a.class_id 中。

[SQL小提琴](http://www.sqlfiddle.com/#!2/47410/23/0)

# android - 通过网络应用程序启动 android zxing 扫描仪似乎不起作用

> ID：14490290
> 
> 赞同：0
> 
> 时间：2013-01-23T22:07:46.360
> 
> 标签：android, jquery, ajax, web-applications, zxing

我从网络应用程序扫描的起点是这里的这篇文章[然后](http://code.google.com/p/zxing/wiki/ScanningFromWebPages) 我意识到它就像点击这样的链接一样简单

```
http://zxing.appspot.com/scan?req=http%3A%2F%2FLOCAL_SERVER_NAME%2FMY_APP_NAME%2FMY_SERVLET%3Fcode%3D%7BCODE%7D 
```

但它没有用。

我的网络应用程序很简单（使用 jquery 的 ajax）

```
$("#onebutton").click(function(){
        $.ajax({
            url: "http://zxing.appspot.com/scan",
            success:function(){
                alert("success");
            },
            error:function(){
                alert("error");
            },
            data:{
                req:"http%3A%2F%2F192.168.1.100:8080%2FMY_APP_NAME%2FMY_SERVLET%3Fcode%3D%7BCODE%7D"
            }

        });
    }); 
```

不用说“#onebutton”是一个带有那个id的按钮标签。当在 android 的浏览器上按下这样的按钮时，它总是会提醒错误消息。它不要求扫描仪启动。当我单击普通 PC 中的按钮时，控制台显示：

```
"Origin http://192.168.1.100:8080 is not allowed by Access-Control-Allow-Origin". 
```

难道我做错了什么？。我错过了什么吗？

谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:46:26.440

我不知道你是否完全理解链接的目的。

尝试添加到

`Access-Control-Allow-Origin on server`

或者

```
$("#onebutton").click(function(){
        $.ajax({
            url: "http://zxing.appspot.com/scan?ret=http%3A%2F%2F192.168.1.100:8080%2FMY_APP_NAME%2FMY_SERVLET%3Fcode%3D%7BCODE%7D",
            success:function(){
                alert("success");
            },
            error:function(){
                alert("error");
            }

        });
    }); 
```

但你可能不明白

```
<a href="zxing://scan/?ret=http%3A%2F%2Ffoo.com%2Fproducts%2F%7BCODE%7D%2Fdescription&SCAN_FORMATS=UPC_A,EAN_13"> ads </a> 
```

这是为了打开zxing扫描仪获取一些代码信息并在打开后将其替换为给定的url

.../scan!ret=www.host.com/product_{code}.hmtl

扫描后打开网络浏览器

[http://www.host.com/product_123.html](http://www.host.com/product_123.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T08:25:04.150

您应该使用这样的链接打开扫描仪：

```
<a href="zxing://scan/?ret=http://something.com/yourpage$status={CODE}"> 
    <span>My scan</span>
</a> 
```

请注意，在我的示例中 $status 是一个变量，它采用扫描条形码的值。这会将值作为参数传递到它通向的页面的地址中。

我看到线程有点旧，但我希望这会对某人有所帮助。

# c# - DataTemplateSelector 中的项目为空

> ID：14490292
> 
> 赞同：5
> 
> 时间：2013-01-23T22:07:49.943
> 
> 标签：c#, wpf, datatemplate, datatemplateselector

好吧，使用 dataTemplateSelector 根据枚举值为我的视图模型选择正确的数据模板时遇到了一点问题。

这是一个重现该问题的演示。

我有一个视图模型使用的模型层次结构

定义模型类型的枚举是：

```
public enum ModelType
{
    ModelA,
    ModelB        
} 
```

模型基类是：

```
public abstract class ModelBase
{
    protected ModelBase(ModelType modelType)
    {
        ModelType = modelType;
    }

    public ModelType ModelType { get; private set; }

    public string Name { get; set; }
} 
```

子模型类是：

```
public class ModelA:ModelBase
{
    public ModelA():base(ModelType.ModelA)
    {
        Name = "ModelA";
    }

    public string PropertyModelA { get { return "PropertyModelA"; } }
} 
```

和

```
public class ModelB : ModelBase
{
    public ModelB()
        : base(ModelType.ModelB)
    {

        Name = "ModelB";
    }
    public string PropertyModelB { get { return "PropertyModelB"; } }

} 
```

我的 MainViewModel 和 ModelViewModel 分别是：

```
public class MainWindowViewModel:ViewModelBase
{

    public MainWindowViewModel()
    {

        Models = new ObservableCollection<ModelViewModel>();
        LoadModels();
    }
    public ObservableCollection<ModelViewModel> Models { get; private set; }

    private void LoadModels()
    {
        Models.Add(new ModelViewModel(new ModelA()));
        Models.Add(new ModelViewModel(new ModelB()));
        Models.Add(new ModelViewModel(new ModelB()));
    } 
```

和

```
public class ModelViewModel : ViewModelBase
{
    private ModelBase _model;

    public ModelViewModel(ModelBase model)
    {
        _model = model;
    }

    public ModelBase Model
    {
        get { return _model; }
        set
        {
            if (!_model.Equals(value))
            {
                _model = value;
                OnPropertyChanged("Model");
            }

        }
    }

} 
```

之后，我的 MainView 中有一个列表框，它使用项目模板来显示每个项目。

```
 <ListBox x:Name="entryList" ItemsSource="{Binding Models}"  >
            <ListBox.ItemTemplate>
                <DataTemplate>                       
                      <views:ModelView/>     
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

这个item模板使用ModelView的其他视图来渲染item。ModelView展示了公共信息，具体的模型数据由ModelSelector选择的view展示。

```
<UserControl.Resources>
    <ResourceDictionary>
        <selectors:ModelSelector x:Key="modelSelector" />
    </ResourceDictionary>
</UserControl.Resources>
<StackPanel>
    <TextBlock Text="{Binding Model.Name}" />
    <ContentPresenter  ContentTemplateSelector="{StaticResource modelSelector}" DataContext="{Binding }" />
</StackPanel> 
```

目前，模型选择器可以选择的视图是 A 和 B：

```
<StackPanel>
    <TextBlock Text="{Binding Model.PropertyModelA}" />
</StackPanel>

<StackPanel>
    <TextBlock Text="{Binding Model.PropertyModelB}" />
</StackPanel> 
```

模型选择器是：

```
public class ModelSelector:DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var viewModel = item as ModelViewModel;

        var dataTemplate = default(DataTemplate);

        if (viewModel != null)
        {
            switch (viewModel.Model.ModelType)
            {
                case NestedDataTemplateSelectorTest.Models.ModelType.ModelA:
                    dataTemplate = CreateDataTemplate<ModelAView>();
                    break;
                case NestedDataTemplateSelectorTest.Models.ModelType.ModelB:
                    dataTemplate = CreateDataTemplate<ModelBView>();
                    break;
                default:
                    dataTemplate = this.SelectTemplate(item, container);
                    break;
            }
        }
        return dataTemplate;           
    }

    private DataTemplate CreateDataTemplate<TView>()
    {
        var dataTemplate = new DataTemplate();
        var frameworkElement = new FrameworkElementFactory(typeof(TView));
        dataTemplate.VisualTree = frameworkElement;

        return dataTemplate;
    }
} 
```

问题是DataTemplateSelector中的参数项为null，而另一个参数（Container）的dataContext为null。我无法知道ModelViewModel的值是什么来选择正确的视图。

如果我将数据模板放在 ListView 项目模板中，则该项目具有 ModelViewMode 的值，但我需要将该模板放在单独的文件中，因为它将用于应用程序的不同部分。

我不知道我可以访问 ModelSelector 中的 ModelViewModel 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T04:40:46.373

**是的，您可以通过DataTemplateSelector**访问您的 ViewModel 。您的错误是您设置了`DataContext`属性：

```
DataContext="{Binding}" 
```

对于**ContentPresenter**，您应该`Content`改为设置属性

```
Content="{Binding}" 
```

如果您这样做，`item`则被覆盖方法内的对象将完全是`Content`属性。

根据[msdn 文章](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter%28v=vs.100%29.aspx)：

> 如果设置了 ContentPresenter 上的 ContentTemplateSelector 属性，则 ContentPresenter 将适当的 DataTemplate 应用于 Content 属性，并显示生成的 UIElement 及其子元素（如果有）。

注意 **ContentPresenter**逻辑以显示`Content`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-07T06:36:21.080

呃 - 在用完全相同的问题将我的头撞到墙上之后，我终于找到了问题所在。

您需要使用“ContentControl”而不是“ContentPanel”，正如 Stukselbax 建议的那样，它是您需要绑定的内容，而不是数据上下文。

对不起，对你来说已经晚了 2 年，但希望它可以帮助别人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-11T13:48:32.687

迟到的答案，但要使用 TemplateSelector，您需要先设置内容，因此对于 ContentControl，您在 Xaml 中的 ContentTemplateSelector 之前设置 Content。

我猜 ListView 与 ItemsSource 和 ItemTemplateSelector 相同。

像这样的东西：

```
<ContentControl Content="{Binding Animals}" ContentTemplateSelector="{StaticResource AnimalTemplateSelctor}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-10T03:56:11.533

只是为了历史绑定很复杂。他们多次打电话。在应用模板之前和之后。在我的情况下，第一次调用是在我的模板在项目中应用 null 之前，在数据之后。如此简单的答案是 check\debug for not null in item。

# php - 如何降低 cron 脚本的 CPU 和 I/O 优先级？

> ID：14490295
> 
> 赞同：7
> 
> 时间：2013-01-23T22:08:07.817
> 
> 标签：php, unix, cron

我想通过 cron 以低 I/O 和 CPU 优先级运行脚本。如果我理解正确（我可能不理解），我可以添加`proc_nice(10);`到我的脚本中以降低 CPU 优先级，但 I/O 优先级没有 PHP 等效项。

似乎有一个shell命令`ionice`，但我是一个linux白痴，我不知道我在做什么。如果我想同时使用 nice 和 ionice 来降低相关脚本的优先级，这是否是我的 cron 文件的正确行？

```
0 * * * * /usr/bin/nice -n 10 /usr/bin/ionice -c 3 /path/php/bin/php /path/script.php 
```

我从[这里](http://friedcpu.wordpress.com/2007/07/17/why-arent-you-using-ionice-yet/)`-c3`得到了参数（“将进程放在空闲调度类中”），我不确定这就是我想要的。

使用 PHP 调用`proc_nice()`而不是这种方法有好处吗？

编辑：我的 cron 脚本没有使用上述运行，所以我肯定误解了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:07:16.140

Unix 及其克隆倾向于将一个实用程序/命令的输出变成下一个实用程序/命令的输入的概念。

在您的示例中，结果是（我认为）`nice`实际上会影响`ionice`. 只有`ionice`会对 PHP 产生影响。

（**更新**：实际上，它应该继承它的优点，见评论）

我发现[一个页面](http://docs.moodle.org/20/en/Cron_with_UNIX)建议执行以下操作以同时`nice`影响`ionice`您的 PHP 实例：

```
ionice -c3 -p$$;nice -n 10 /usr/bin/php /path/to/your/script.php 
```

# deployment - 在 dotcloud 上使用不同的生产和暂存需求文件

> ID：14490297
> 
> 赞同：0
> 
> 时间：2013-01-23T22:08:11.610
> 
> 标签：deployment, dotcloud

我正在尝试使用预构建挂钩在 Dotcloud 上的开发和生产中安装 Django 项目的单独需求（实际上只是在生产中遗漏了几个调试包）。我正在定义一个 DEBUG 环境变量来触发调试行为，并且我想选择一个 pip 需求文件。我想使用 prebuild hook 来运行一个 Python 脚本，该脚本检查调试变量的值并将正确的需求文件符号链接到`requirements.txt`根目录中，但这似乎不起作用。据我所知，预构建挂钩甚至没有运行，我正在`dotcloud push --clean`尝试强制进行全新安装。我是否误解了预构建挂钩的工作原理？如果这不是使用可变需求的好方法，我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:23:28.657

我觉得很愚蠢，但我确实想留下我的问题，因为该方法有效。我的问题是一个错误的`dotcloud.yml`文件，其中我的缩进包含`prebuild`在 下`config`，而不是直接在服务名称下。

如果其他人想这样做，这里有一个适合我的结构：

*点云.yml*

```
www:
  type: python
  prebuild: python dotcloud/prebuild.py
  config:
    python_version: v2.7

... and so on ... 
```

*点云/prebuild.py*

```
#!/usr/bin/env python

import json
import os

with open('/home/dotcloud/environment.json') as f:
    env = json.load(f)

try:
    os.unlink('requirements.txt')
except OSError:
    pass

if str(env.get('DEBUG', False)).lower() in ['t', 'true', 'y', 'yes', 'on']:
    print 'Using DEBUG mode requirements'
    os.symlink('requirements/dotcloud_debug.txt', 'requirements.txt')
else:
    print 'Using PRODUCTION mode requirements'
    os.symlink('requirements/dotcloud_production.txt', 'requirements.txt') 
```

# powershell - Powershell解压错误

> ID：14490304
> 
> 赞同：6
> 
> 时间：2013-01-23T22:08:34.403
> 
> 标签：powershell

我从互联网上获得了以下脚本，当我尝试运行时，它给了我一个错误。

```
#script
#unzip folder

$shell_app = new-object -com shell.application
$filename = "test.zip"
$zip_file = $shell_app.namespace("C:\temp\$filename")

#set the destination directory for the extracts
$destination = $shell_app.namespace("C:\temp\zipfiles")

#unzip the file
$destination.Copyhere($zip_file.items()) 
```

- - 错误信息

```
 You cannot call a method on a null-valued expression.
At line:1 char:22
+ $destination.Copyhere <<<< ($zip_file.items())
    + CategoryInfo          : InvalidOperation: (Copyhere:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T09:35:37.670

您需要在设置 $destination 变量之前创建“c:\temp\zipfiles”文件夹，这种草率的方式但它会完成这项工作:)

```
#script
#unzip folder

$shell_app = new-object -com shell.application
$filename = "test.zip"
$zip_file = $shell_app.namespace("C:\temp\$filename")

#set the destination directory for the extracts
if (!(Test-Path "C:\temp\zipfiles\")) { 
    mkdir C:\temp\zipfiles
}
$destination = $shell_app.namespace("C:\temp\zipfiles")

#unzip the file
$destination.Copyhere($zip_file.items()) 
```

# facebook - 如何为单个产品安装“喜欢”按钮

> ID：14490305
> 
> 赞同：0
> 
> 时间：2013-01-23T22:08:37.957
> 
> 标签：facebook, facebook-like

我想在特定页面上为单个产品安装“喜欢”按钮。他们的方式是这样做的吗？我只能为页面本身安装“Like”按钮。示例 我在一个页面上有 3 个产品。我需要此页面上的 3 个“喜欢”按钮，以便用户具体了解他们喜欢的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:46:02.027

Open Graph（协议）基本上假设每个对象（=产品）都有自己的 URL 和网页。这样很容易，您只需在每个产品页面上设置正确的 og:title、og:url、og:image 等。

```
http://yourdomain.com/product-A
http://yourdomain.com/product-B
http://yourdomain.com/product-C 
```

在产品概述页面[http://yourdomain.com/products](http://yourdomain.com/products)上，您将只有 3 个赞按钮：

```
<div class="fb-like" data-href="http://yourdomain.com/product-A"/>
<div class="fb-like" data-href="http://yourdomain.com/product-B"/>
<div class="fb-like" data-href="http://yourdomain.com/product-C"/> 
```

完毕！

如果出于某种原因，您没有单独的产品页面，则必须在 Facebook Crawler 的单独 URL 上设置“虚拟”页面。然后，您将通过用户代理检测爬虫并为其提供正确的 OG 元标记集（页面不必包含多于 with 标记）。普通用户应该被重定向到产品概览页面。下面是一些应该做到这一点的 PHP 代码：

```
<?php
if (!(strpos(strtolower($_SERVER["HTTP_USER_AGENT"]),"facebookexternalhit") === false)) {
  // Its Facebook crawler, give him what he needs!
  echo '<html><head>';
  echo '<meta property="og:title" content="Product A">';
  echo '<meta property="og:url" content="http://yourdomain.com/product-A">';
  echo '</head></html>';
} else {
  // normal user, lets redirect
  header("Location: http://yourdomain.com/products");
}
?> 
```

# javascript - 强制列表视图项导航到特定页面

> ID：14490308
> 
> 赞同：0
> 
> 时间：2013-01-23T22:08:47.870
> 
> 标签：javascript, windows-8, visual-studio-2012, winjs

我正在使用网格视图应用程序......我想要做的是当我调用特定项目时导航到特定页面。

这是我调用项目时的代码，我的 **问题是我无法获取项目的索引。** 一张图解释我的意思 [http://www.flickr.com/photos/magedelgazzar/8409848728/in/photostream](http://www.flickr.com/photos/magedelgazzar/8409848728/in/photostream)

```
 _itemInvoked: function (args) {
            var group = Data.groups.getAt(args.detail.itemIndex);
            var item  = Data.items.getAt(args.detail.itemIndex);

            if (appView.value === appViewState.snapped) {
                // If the page is snapped, the user invoked a group.
                this.navigateToGroup(group.key);
            } else {
                // If the page is not snapped, the user invoked an item.
                if ( item.index == 1 && group.index == 2 ) {
                    nav.navigate("../../nextPage.html", { item: Data.getItemReference(item) });

//                nav.navigate("../../nextPage.html");
                }
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:15:48.313

使用`args.detail.itemIndex`您已经用于项目索引的那个。这是获取索引的正确方法；您从`getAt`通话中获得的项目是您的数据项目，除非您在其`index`上放置，否则它不会有`index`属性。

# html - 同时更改 HTML 和嵌入式 XML 的样式

> ID：14490314
> 
> 赞同：-3
> 
> 时间：2013-01-23T22:09:08.553
> 
> 标签：html, css, xml

我有一些 HTML5 文件，我通过**对象**元素在其中嵌入了 XML。现在，对于 HTML 文件，我有备用样式表。我想要做的是与 HTML 同时更改嵌入式 XML 的样式（因为 XML 文件有自己的样式表）。因此，当我在浏览器的帮助下为 HTML 页面选择样式时，我希望 XML 的样式也可以更改。有没有办法做到这一点？

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>LondonDiamond Restaurant Menu</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" media="screen" title="Standard red black white"/>
    <link rel="stylesheet" type="text/css" href="../css/style_print.css" media="print" title="Print"/>
    <link rel="alternate stylesheet" type="text/css" href="../css/alt_style.css" media="screen" title="Monochrome"/>
</head>
<body>
    <object data="../xml/menu.xml"><span></span></object>
</body>
</html> 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="../css/style4xml.css"?>
<!DOCTYPE menu SYSTEM "../dtd/menu.dtd">

<menu>
     irrelevant
</menu> 
```

发生的情况是，当我为 HTML 选择备用样式表时，颜色会发生变化，但嵌入的 XML 保持相同的颜色（这是正常的）但我也想与 HTML 同时更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:39:39.540

我所做的是为 HTML 文件和 XML 文件应用相同的默认样式表和替代样式表。在 CSS 文件中，我有 HTML 和 XML 元素的样式。

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>LondonDiamond Restaurant Menu</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" media="screen" title="Red Black White"/>
    <link rel="stylesheet" type="text/css" href="../css/style_print.css" media="print"/>
    <link rel="alternate stylesheet" type="text/css" href="../css/altstyle.css" media="screen" title="Monochrome"/>
</head>
.......
</html> 
```

XML:

```
 <?xml version="1.0" encoding="UTF-8"?>
 <?xml-stylesheet type="text/css" href="../css/style.css" title="Red Black White"?>
 <?xml-stylesheet type="text/css" href="../css/altstyle.css" alternate="yes" title="Monochrome"?>
 <!DOCTYPE menu SYSTEM "../dtd/menu.dtd">

 <menu>
      .....
 </menu> 
```

CSS：

```
body {...}
header {...}
...
menu {...} 
```

# reporting-services - SSRS 子报表或其他解决方案

> ID：14490319
> 
> 赞同：2
> 
> 时间：2013-01-23T22:09:24.130
> 
> 标签：reporting-services, subreport

我正在编写一份显示调度数据的报告。此报告需要显示在指定日期范围内承诺日期的任何工作的数据。

我遇到的问题是如何最好地显示这些数据，我构建了一个包含标题信息（作业编号、描述、到期日期等）的数据集，它为每个作业返回一行。

然后，每个作业都有多个详细记录（行项目描述/详细信息、工作中心描述和详细信息）。每一个都可以返回几行。

我的问题是如何将这些详细数据与每个标题记录分组。希望每个作业有一个记录块这样的东西：

-- 标题数据集 Job Number , Job Desc, Date Ship By ... 等 -- 行项目描述数据集 --Work Center 数据集

下一个记录……

提前感谢您的帮助。

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:24:19.267

If each of the records in your dataset have a field that they can be grouped by then this is actually pretty easy. You need to use the grouping feature of the table in SSRS. It's easiest to create a view that contains all the rows (both headers and details) logically and pass it to SSRS as one dataset.

Here is a recent walkthrough from Microsoft. You can change the version number to match your specific version since you didn't specify in the question. Group header fields can be formatted distintly to make them standout etc.

[http://technet.microsoft.com/en-us/library/dd255263.aspx](http://technet.microsoft.com/en-us/library/dd255263.aspx)

If a field that you can group by isn't contained in the dataset in the report, i.e. it's a foreign relationship or something and you can't put them into a single view then you'll need to look into sub-reports. Based on the information provided however a simple row or column group should work just fine.

# javascript - 为什么即使未通过 if 语句，Javascript 变量也会被创建为未定义？

> ID：14490326
> 
> 赞同：2
> 
> 时间：2013-01-23T22:09:41.637
> 
> 标签：javascript, variables, if-statement

以此为例。

```
if (b) b = 1; 
```

参考错误。b 未定义。有道理，但如果我这样做......

```
if (b) var b = 1; 
```

我在控制台中未定义。现在，当我查找 b 是什么时，它显示为未定义。

如果我尝试再次执行相同的 if 语句，它不会通过，因为 b 既不是真也不是假，它是未定义的，但我想我的问题是为什么它显示为未定义？无论 if 语句通过还是失败，Javascript 是否都会通过 if 语句？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:45:58.917

所有`var`s 都被提升到它们所在范围的开头，将它们的值初始化为`undefined`. `var`然后在执行到达最初所在的行时设置该值。

在您的第二个示例`b`中`undefined`，`if`由于`var`. 认为它与编写以下内容相同

```
var b;
if (b) b = 1; 
```

这段代码执行后，`b`仍将是`undefined`因为它永远不会运行到`if`块中，因为初始值为*falsy*。

正如[pst](https://stackoverflow.com/users/166390/pst)所提到的，这是 JavaScript 的语言特定*功能*，因此在用其他语言编写代码时不要期望相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:13:04.847

JS 不会通过 if 语句，而是读取`if`语句的一部分，并且由于`b`没有在任何地方定义，而是在`if`语句中，所以你得到`undefined`.

# node.js - 是否存在将 Node.js 应用程序连接、构建和缩小为单个文件的工具？

> ID：14490331
> 
> 赞同：2
> 
> 时间：2013-01-23T22:09:54.763
> 
> 标签：node.js

假设我有一个服务器端应用程序，我想以“编译”版本“发布”。对于 Node.js，这将是：

*   将文件连接在一起以混淆代码结构
*   缩小以混淆代码

并发症：

*   带 s 的 CommonJS 框架`require`- 需要解析路径
*   3rd 方依赖项`node_modules`- 不要连接这些
*   “资产”或基本上任何不是`require`d 的文件 - 需要某种名册

这样的工具存在吗？你有关于如何实施的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T09:14:36.343

未经测试，但似乎是你所追求的。

[https://www.npmjs.com/package/node-uglifier](https://www.npmjs.com/package/node-uglifier)

然后你可以去

```
var nodeUglifier = require("node-uglifier");

new NodeUglifier("lib_compiled/test/testproject/main.js")).uglify().exportToFile("lib_compiled/test/resultFiles/simpleMergeAndUglify.js"; 
```

# c++ - 字符串和文件的问题

> ID：14490338
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:10:42.280
> 
> 标签：c++, file-io, segmentation-fault

我正在为我的 CS 课程做一个实验室，包括打开三个文件并根据获得的数据向第四个文件提供输出。我遇到了一些问题（我对 C++ 相当生疏），代码让我头疼。我遇到了字符串错误和分段错误

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <list>
#include <vector>
#include <algorithm>

using namespace std;

//Necessary objects/structures
struct student {                            //create a structure to contain all data     consistent to the student
    string ID, name, address, phone;
    bool is_In_Query;
    list<string> class_Grade;               //Dynamic list to contain all letter grades since we don't know how many there will be
};

//Prototypes
bool readStudentFile(string, vector<student>);
bool readGradeFile(string, vector<student>);//returning a boolean will report if read was a success
bool readQueryFile(string, vector<student>);
void outputReportFile(string, vector<student>);
float calculateGPA(student);                //Pass all calculations and reading to functions to simplify and manage code
void reportFileError(int);                  //Reports a file error. "1" is Student, "2" is Grade, "3" is Query
int isSame(string, vector<student>);

int main(int argc, const char* argv[])
{
    vector<student> studentList;            //Allow a range in number of students

    if (!readStudentFile("students.txt", studentList)){
        if (!readGradeFile("grades.txt", studentList)){
            if(!readQueryFile("query.txt", studentList))
                outputReportFile("report.txt", studentList);
            else
                reportFileError(3);
        }
        else
            reportFileError(2);
    }
    else
        reportFileError(1);

    return 0;                               //Termination

/*
    if (!readStudentFile(argv[1], studentList)){
        if (!readGradeFile(argv[2], studentList)){
            if(!readQueryFile(argv[3], studentList))
                outputReportFile(argv[4], studentList);
            else
                reportFileError(3);
        }
        else
            reportFileError(2);
    }
    else
        reportFileError(1);

    return 0;                               //Termination
*/
}

bool readStudentFile(string fileToRead, vector<student> studentInfo)
{
    ifstream inFile;
    int index = 0;

    //inFile.open(fileToRead.c_str());            Original opening line
    inFile.open(fileToRead.c_str(), ifstream::in);

    if (!inFile.good())
        return false;
    else while (!inFile.eof()) {            //Read in order
        getline(inFile, studentInfo[index].ID);
        getline(inFile, studentInfo[index].name);
        getline(inFile, studentInfo[index].address);
        getline(inFile, studentInfo[index].phone);
        ++index;                            //We use a prefix to insure that index is incremented BEFORE the jump back to the else-while
    }
    inFile.close();
    return true;
}

bool readGradeFile(string fileToRead, vector<student> studentInfo)
{
    ifstream inFile;
    string temp;
    int sameID = 0;

    inFile.open(fileToRead.c_str(), ifstream::in);

    if (inFile.fail())
        return false;
    else while (!inFile.eof()) {            //Got more? Ok, let's go!
        cin.ignore();                       //The class ID is not necessary for our computation
        getline(inFile, temp);              //Obtain student ID
        sameID = isSame(temp, studentInfo); //Find it in our list of IDs
        if (sameID != -1){                  //If there is a match, get letter grade
            getline(inFile, temp);
            studentInfo[sameID].class_Grade.push_back(temp);
        }
                                            //No match? Ignored.
    }
    inFile.close();
    return true;
}

bool readQueryFile(string fileToRead, vector<student> studentInfo)
{
    ifstream inFile;
    int sameID = 0;
    string temp;

    inFile.open(fileToRead.c_str(), ifstream::in);

    if (inFile.fail())
        return false;
    else while (!inFile.eof()) {
        getline(inFile, temp);
        sameID = isSame(temp, studentInfo); //We get an ID, compare it
        if (sameID != -1)                   //If it's in there, we'll flag it to not report a GPA of 0 due to a bug
            studentInfo[sameID].is_In_Query = true;
    }
    inFile.close();
    return true;
}

void outputReportFile(string fileToWrite, vector<student> studentInfo)
{
    ofstream outFile;

    outFile.open(fileToWrite.c_str(), ifstream::out);
    outFile.setf(ios::fixed | ios::showpoint);

    for(int x = 0; x < studentInfo.size(); x++){
        if (studentInfo[x].is_In_Query){
            outFile << setw(12) << studentInfo[x].ID;
            outFile << fixed << setprecision(2) << setw(7) << calculateGPA(studentInfo[x]);
            outFile << studentInfo[x].name;

        }
    }

    cout << "Finished.\n";
}    

float calculateGPA(student scholar)
{
    float gpa = 0;
    if (scholar.class_Grade.size() == 0)
            return 0;
    else {
        for(list<string>::iterator it = scholar.class_Grade.begin(); it != scholar.class_Grade.end(); ++it)
        {
            if(*it == "A")
                gpa += 4.0;
            else if (*it == "A-")
                gpa += 3.7;
            else if (*it == "B+")
                gpa += 3.4;
            else if (*it == "B")
                gpa += 3.0;
           else if (*it == "B-")
                gpa += 2.7;
            else if (*it == "C+")
                gpa += 2.4;
            else if (*it == "C")
                gpa += 2;
            else if (*it == "C-")
                gpa += 1.7;
            else if (*it == "D+")
                gpa += 1.4;
            else if (*it == "D")
                gpa += 1.0;
            else if (*it == "D-")
                gpa += 0.7;
            else if (*it == "E")
               gpa += 0;
        }
    }
    gpa = gpa / scholar.class_Grade.size();
    return gpa;
}

int isSame(string id, vector<student> studentInfo)
{
    for (int x = 0; x < studentInfo.size(); x++)
    {
        if (id.compare(studentInfo[x].ID) == 0)
            return x;
    }

    return -1;
}

void reportFileError(int report_num)
{
    switch(report_num){
        case 1 :
            cout << "No valid student file" << endl;
            break;
        case 2 :
           cout << "No valid grade file" << endl;
            break;
        case 3 :
            cout << "No valid query file" << endl;
            break;
    }
} 
```

（我希望我把它正确地放入代码块中）

如果我尝试使用预定义的文件名或 CLI 参数中的一个，我会得到相同的错误。我猜这要么与我制作的结构有关，要么与我过度使用的复杂性有关。

所有文件都包含在我的代码和可执行文件的目录中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:20:29.200

您的函数`readStudentFile`直接写入尚未调整大小的向量。

您必须在索引之前调整大小：

```
studentInfo.resize( studentInfo.size() + 1 );
student & record = studentInfo.back();
getline(inFile, record.ID);
getline(inFile, record.name);
getline(inFile, record.address);
getline(inFile, record.phone); 
```

或者创建一条记录并附加它：

```
student record;
getline(inFile, record.ID);
getline(inFile, record.name);
getline(inFile, record.address);
getline(inFile, record.phone);
studentInfo.push_back(record); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:23:08.233

根据您的代码立即想到的两个问题。首先，当您创建一个向量时，例如`studentList`默认大小和容量均为 0。然后当您访问该向量时，就像`studentList[index]`您访问向量的末尾并覆盖一些随机内存一样。

如果您知道最大学生人数（看起来不像），那么您可以将向量初始化为`vector<student> studentList(maxNumberOfStudents)`. 这将为您提供一个包含 maxNumberOfStudent 条目的向量，其中每个条目包含所有字段的默认构造版本（对于字符串，它们将为空）。或者，您可以使用类似`studentList.push_back(student())`的方法将新条目附加到向量。您可能可以采用更清洁的方法来做到这一点，但这是一般的想法。

其次，在将`studentList`向量传递给函数时，您需要通过引用 ( `vector<student>& studentList`) 传递它。如果没有，`&`您将通过值传递，这意味着您每次都在制作向量的副本。由于有几个函数修改了向量，如果您通过值传递，您将修改副本，但原始将保持不变。

希望有帮助！

# jquery - 幻灯片放映上的 Prev nex 按钮。

> ID：14490342
> 
> 赞同：1
> 
> 时间：2013-01-23T22:10:45.680
> 
> 标签：jquery

我有当前的代码：

```
<script type="text/javascript">

$(document).ready(function()
{

$('.showcase-content .description').jScrollPane();

$(".beericon").click(function() {
        var imgnumber = parseInt($(this).attr('id').replace("imglink", ""));
        var move = -($("#img"+imgnumber).width() * (imgnumber - 1));

        $("#img_box").animate({
            left: move
        }, 500);

        $("#beerview_icons").find("div").removeAttr("style");
        $("#imglink"+imgnumber).css("background-position", "0px -74px");

        return false;
    });
});
</script> 
```

它适用于：

```
<div id="img_container">
      <div id="img_box"> <img id="img1" src="../images/lightbox_brew_photos/cutthroat.png"/> <img id="img2" src="../images/beer_in_glasses/Cutthroat.png"/> 
<img id="img3" src="../images/lightbox_brew_photos/Cutthroat-6-Pack.png" style="margin-top:290px;"/> 
<img id="img4" src="../images/lightbox_brew_photos/Cutthroat-12-Pack.png" style="margin-top:335px;"/>
        <div style="clear:both;"></div>
      </div>
    </div>
    <div id="beerview_icons">
      <div class="beericon" id="imglink1" style="background-position:0px -74px;"></div>
      <div class="beericon" id="imglink2"></div>
      <div class="beericon" id="imglink3"></div>
      <div class="beericon" id="imglink4"></div>
      <br class="clearfloat" />
    </div> 
```

有没有办法修改 js 使其成为基本的上一个下一个导航？我必须添加更多图像，它的拇指空间更小。认为尝试写一些东西比用不同的幻灯片重做更容易。

# javascript - jqplot - 更改固定尺寸系列的轴标签的简单方法

> ID：14490343
> 
> 赞同：0
> 
> 时间：2013-01-23T22:11:06.700
> 
> 标签：javascript, jquery, jquery-plugins, jqplot

我有一个堆叠的条形图，**总是**有 12 个条形图，我觉得应该很容易将它们标记为“jan”，“feb”，......（也总是按顺序排列）做了一些谷歌搜索，仍然可以想不通，请帮帮我。

如果我不必编辑数据数组，那将是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:19:46.217

只需为轴设置“ticks”参数：

[http://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.ticks](http://www.jqplot.com/docs/files/jqplot-core-js.html#Axis.ticks)

```
axes: {
  xaxis: {
    ticks: ['Jan', 'Feb', 'Mar']
  }
} 
```

# php - PHP未定义变量？

> ID：14490345
> 
> 赞同：2
> 
> 时间：2013-01-23T22:11:11.783
> 
> 标签：php, variables

我购买 GeoIP Web Services 以从那里获取客户国家/地区的 IP 用于我的数据库，他们给了我一个 php 代码以从那里获取 API 的响应，以告诉我来自哪个 IP 的女巫国家，这是他们给我的代码：

```
 $query = "http://geoip.maxmind.com/f?l=" . $license_key . "&i=" . $ipaddress;
$url = parse_url($query);
$host = $url["host"];
$path = $url["path"] . "?" . $url["query"];
$timeout = 1;
$fp = fsockopen ($host, 80, $errno, $errstr, $timeout)
        or die('Can not open connection to server.');
if ($fp) {
  fputs ($fp, "GET $path HTTP/1.0\nHost: " . $host . "\n\n");
  while (!feof($fp)) {
    $buf .= fgets($fp, 128);
  }
  $lines = explode("\n", $buf);
  $data = $lines[count($lines)-1];
  fclose($fp);
} else {
  # enter error handing code here
}
echo $data; 
```

我得到 $data 值，它告诉我 $ipaddress 来自哪里......但我得到一个错误：未定义的变量 $buf ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:12:30.490

添加

```
$buf = ''; 
```

在您的代码之上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:13:56.020

将您的代码更改为：

```
$query = "http://geoip.maxmind.com/f?l=" . $license_key . "&i=" . $ipaddress;
$url = parse_url($query);
$host = $url["host"];
$path = $url["path"] . "?" . $url["query"];
$timeout = 1;
$fp = fsockopen ($host, 80, $errno, $errstr, $timeout)
        or die('Can not open connection to server.');

if ($fp) {
  fputs ($fp, "GET $path HTTP/1.0\nHost: " . $host . "\n\n");
  $buf = ''; //This is the line of code that initializes $buf and will keep the undefined error from happening 
 while (!feof($fp)) {
    $buf .= fgets($fp, 128);
  }
  $lines = explode("\n", $buf);
  $data = $lines[count($lines)-1];
  fclose($fp);
} else {
  # enter error handing code here
}
echo $data; 
```

# html - 英镑符号在 html 文档中未正确显示

> ID：14490353
> 
> 赞同：0
> 
> 时间：2013-01-23T22:11:45.600
> 
> 标签：html, ajax, encoding, datatable

![在此处输入图像描述](../Images/9f85ee67ba23e1eb3892798d16a3f436.png)

我正在使用[http://www.datatables.net/](http://www.datatables.net/) datatables 并且表格中显示的数据是动态检索的。

有人可以帮忙吗？

在 html 文档本身中输入时，井号显示正常。在 ajax 数据 url 中查看时也显示正常。

**更新**

我刚刚意识到 csv 文件的内容实际上并不是 utf-8 格式。如何确保上传是 utf-8 格式。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:13:51.900

您是否尝试过使用`&pound;`而不是通常的 £？还可能需要将您的字符集设置为 UTF-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:55:15.640

如果你想拒绝非 UTF-8 文件，你可以这样做：

```
if( !mb_check_encoding( $str, "UTF-8") ) {
    header("HTTP/1.1 400 Bad Request");
    die("File must be in UTF-8 encoding");
} 
```

`$str`是读入 PHP 字符串的文件内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:02:57.673

我现在已经在上传之前过滤了井号的 csv 文件，并在稍后附加它。我正在使用这个黑客。

# ruby-on-rails - 使用 simple_form 在 ruby on rails 上填充自定义时间字段

> ID：14490355
> 
> 赞同：5
> 
> 时间：2013-01-23T22:11:51.010
> 
> 标签：ruby-on-rails, simple-form

我是 ruby​​ 和 ruby​​ on rails 的初学者，我正在尝试使用 simple_form 创建一个复杂的表单。一切都在工作，但我想以一种非常具体的方式自定义“时间”字段。

当我使用：

```
<%= f.input :hour %> 
```

它呈现两个选择字段，分别是填充了 00 到 23 选项的“小时”字段，以及填充了 00 到 59 选项的“分钟”字段。

但这不是我想要的。我想用一个带有自定义预填充选项的选择字段替换两个选择字段的时间使用，时间范围从上午 8 点到下午 22 点，以 15 分钟为增量，并且选项的文本也显示时间语法“8h00”、“8h15”、“8h30”、“8h45”、“9h00”、“18h00”、“18h15”、“18h30”、“18h45”等。“21h45”是最后一个可用的选项。

我已经设法使用以下选项对其进行了更多自定义：

```
<%= f.input :hour, :as => :time, :minute_step => 15 %> 
```

虽然这解决了 15 分钟增量问题，但它仍然呈现两个选择字段。

这将是我想要为我呈现 simple_form 的 html 等价物：

```
<select name="hour">
<option value="08:00:00">08h00</option>
<option value="08:15:00">08h15</option>
<option value="08:30:00">08h30</option>
<option value="08:45:00">08h45</option>
...
<option value="21:30:00">21h30</option>
<option value="21:45:00">21h45</option>
</select> 
```

我很确定这很容易使用从 8..21 循环然后再次循环使用 '00'、'15'、'30' 和 '45' 的集合来实现，然后以以下语法输出选项我想要（小时+“h”+分钟）。

我想创建一个自定义“日期”字段，因为在一个表单中会有很多日期字段（对于我正在创建的“约会”相关应用程序），但由于我是 ruby​​ on rails 的初学者，我我真的迷失了实现这一点的最聪明的方法。我不确定是否应该在 simple_form 中实现自定义字段，是否应该使用辅助函数，或者什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T02:24:22.633

在来自 simpleform 邮件列表的 Carlos Antonio da Silva 的帮助下，我们通过创建如下自定义输入来解决此问题：

# 应用程序/输入/hour_input.rb

```
class HourInput < SimpleForm::Inputs::Base
  def input
    @builder.select(attribute_name, hour_options, { :selected => selected_value }, { :class => "input-medium" })
  end

  private

  # The "Selecione..." string could also be translated with something like: I18n.t("helpers.select.prompt')
  def hour_options
    hour = [['Selecione...', '00:00:00']]
    (8..21).each do |h|
      %w(00 15 30 45).each do |m|
        hour.push ["#{h}h#{m}", "#{"%02d" % h}:#{m}:00"]
      end
    end
    hour
  end

  def selected_value
    value = object.send(attribute_name)
    value && value.strftime("%H:%M:%S")
  end
end 
```

然后`<%= f.input :hora, :as => :hour %>`在视图中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T06:36:15.427

根据 simpleform 的谷歌邮件列表的建议，这就是我解决自己问题的方法：

在视图文件中，我创建了这样的输入：

```
<%= f.input :hour, collection: options_for_time_select, selected: f.object.hour.strftime("%H:%M:%S") %> 
```

在 application_helper.rb 文件中，我以这种方式创建了一个函数：

```
module ApplicationHelper
def options_for_time_select
    hour = Array.new
    for $h in 8..21 do
        for $m in ['00', '15', '30', '45'] do
            hour.push [$h.to_s + "h" + $m.to_s, "%02d" % $h + ":" + $m + ":00"]
        end
    end
    hour
end 
```

结尾

我不知道这是否是解决这个问题的最优雅的方法，或者它是否真的适用于所有场景。如果可能的话，我很想得到更正或更好的解决方案。

# ruby-on-rails-3 - rails 3中未定义的方法'build'

> ID：14490357
> 
> 赞同：1
> 
> 时间：2013-01-23T22:12:05.710
> 
> 标签：ruby-on-rails-3

我使用以下代码收到“ProjectsController#create 中的 NoMethodError”：

```
def create
  @project = current_user.project.build(params[:project])
  if @project.save
    flash[:success] = "Project created!"
    redirect_to root_url
  end
end 
```

我也尝试过使用`@project = current_user.project.create(params[:project])`，但我得到了同样的错误，尽管`.create`.

我的项目模型如下所示：

```
class Project < ActiveRecord::Base
  attr_accessible :title,
                  :sub_title,
                  :desc,
                  :category

  validates :user_id, presence: true
  validates :title, presence: true, length: { maximum: 35 }
  validates :category, presence: true

  belongs_to  :user
  ...
end 
```

我的用户模型如下所示：

```
class User < ActiveRecord::Base
  attr_accessible :name,
                  :surname,
                  :email,
                  :email_confirmation,
                  :password,
                  :password_confirmation

  has_secure_password

  has_one :project
  ...
end 
```

据我所知，这应该创建一个与`user.id`and关联的新项目`project.user_id`。任何想法为什么我得到错误而不是成功创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:13:55.590

对于`has_one`您想要的关联：

```
@project = current_user.build_project(params[:project]) 
```

相同的模式用于创建：

```
@project = current_user.create_project(params[:project]) 
```

如果您查看[has_one 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)，它们会列出在您声明关联时创建的方法。

# jquery - 用最少的代码模仿 jQuery .toggle()？

> ID：14490364
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:12:35.467
> 
> 标签：jquery, events, javascript-events

从 jQuery 1.8 开始，该`.toggle()`实用程序功能已被弃用，我正在查看 SO，但无济于事，无法找到一个快速片段来模仿其功能。[我在这里](https://stackoverflow.com/questions/2459153/alternative-to-jquerys-toggle-method-that-supports-eventdata)查看了一个建议的解决方案，但我发现它太冗长了。

我想知道是否应该切换自定义类名并执行`.on()`/ `.off()`，或者是否应该跟踪布尔值？

在我看来，我认为我应该能够在一个`.on()`事件地图中完成所有这些......

有没有人在这里做过并且可以分享一个片段？

**编辑**

我必须说，当人们如此激进地否决问题时，这有点令人恼火。是的，SO上有一些类似的片段，但这里的问题是关于最小化代码。旧的 jQuery`.toggle()`是一个很好的简单方法，我只是在寻找一些关于最佳方法的指针。

我想出的是：任何人都知道如何避免使用全局变量来跟踪我的点击状态？

```
g.toggler = 0;
$(document).on({
    click : function(){
        g.toggler++;
        if(g.toggler%2==1){
            console.log('forth');
        } else {
            console.log('back');
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:02:46.350

将切换值存储在元素的数据对象中。

[http://jsfiddle.net/HNxFx/](http://jsfiddle.net/HNxFx/)

```
$(document).on({
    click:function(){
        var toggle = $(this).data("toggler", !$(this).data("toggler")).data("toggler");
        if(toggle){
            console.log('forth');
        } else {
            console.log('back');
        };
    }
}); 
```

# php - php 无法识别 javascript cookie

> ID：14490365
> 
> 赞同：0
> 
> 时间：2013-01-23T22:12:39.340
> 
> 标签：php, javascript, cookies

我知道 JavaScript cookie 和 PHP cookie 之间没有区别。然而。我正在用 JavaScript 设置一个 cookie，并用 PHP 对其进行检查。

当我用 JavaScript 检查 cookie 时，它​​按设置返回。但是当我签入 PHP 时，它返回未设置。这是我的代码：

**Javascript**

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
   if (x==c_name)
    {
    return unescape(y);
    }
   }
  }

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
 document.cookie=c_name + "=" + c_value;
}

function moomoo()
{
var username=getCookie("username");
if (username!=null && username!="")
  {
  alert("Welcome again " + username);
  }
else 
  {
  username=prompt("Please enter your name:","");
  if (username!=null && username!="")
    {
    setCookie("moomoo",username,365);
    }
  }
} 
```

**HTML**

```
<div onclick="moomoo();">click me</div> 
```

**PHP**

```
if (isset($_COOKIE["moomoo"])) {
echo ' moomoo worked'; }
else {
echo ' moomoo didnt work';} 
```

当我想起 moo moo() 脚本时。它以我的名字提醒

当我加载 PHP 脚本时，它显示“moo moo 不起作用”。

修复！：

谢谢大家的建议。唉，解决方案要简单得多，而且像往常一样，是一个愚蠢的错误。最初的函数 moo moo() 读取：

```
function moomoo()
{
var username=getCookie("**username**");
if (username!=null && username!="")
  {
  alert("Welcome again " + username);
  }
else 
  {
  username=prompt("Please enter your name:","");
  if (username!=null && username!="")
    {
    setCookie("**username**",username,365);
    }
  }
} 
```

因此，我第一次调用该函数时，它设置了一个名为“用户名”的 cookie。然后我把它改成了现在的样子。因此，由于用户名已经设置，它没有设置 moomoo。所以php函数找不到moomoo，因为它从未设置过。谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:18:26.617

`When I recall the moo moo() script. It alerts with my name`

看起来 moomoo 变量没有在 JavaScript 中设置。如果您的名字被警告，则不会执行 else 块。

尝试在 php 中检查您的用户名 cookie，它将显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:18:57.150

尝试设置 cookie 的域和路径。

```
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString()) + ";domain=.mydomain.com;path=/";
    document.cookie=c_name + "=" + c_value;
} 
```

注意：`.mydomain.com`根据您的域进行更改。

# ios - 在 iOS 中有效缩放多个图像

> ID：14490368
> 
> 赞同：2
> 
> 时间：2013-01-23T22:12:47.097
> 
> 标签：ios, objective-c, ipad, core-graphics

我在一个视图上显示了 15 张图像。我需要根据用户的声音缩放图像（他们说话的声音越大，需要缩放的图像就越大）。目前我在 AVAudioRecorder 上使用 averagePowerForChannel 并经常对音频进行采样以适当地缩放所有图像。我用来进行缩放的代码如下所示：

```
- (void)scaleImages:(float)scalingFactor {
    for (UIView *imageHolder in self.imageView.subviews) {
        UIView *image = [imageHolder.subviews objectAtIndex:0];
        image.transform = CGAffineTransformMakeScale(scalingFactor, scalingFactor);
        image.hidden = scalingFactor <= 0.0f;
    }
} 
```

当我只有一个图像时，这很好用，但是当我对所有 15 个图像执行此操作时，它会变得非常滞后且反应迟钝。我尝试了几种不同的选项 - 减少采样频率，标准化采样输出等，但似乎没有任何区别。

我将如何优化这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:11:41.530

您可能想尝试 GPUImage 框架。它使用 GPU 来加速核心图像转换。

[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

# ruby - 我们可以使这两个循环组合的方式来并行运行它们吗？

> ID：14490372
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:13:05.907
> 
> 标签：ruby

***找到以下代码：***

```
all_links = driver.find_elements(:xpath,"//fieldset[contains(@class,'attachmentTable')]/table/tbody/tr/td/a")
all_attachment_names = driver.find_elements(:xpath,"//fieldset[contains(@class,'attachmentTable')]/legend")

all_links.each do|link|

href = link.attribute("href").strip
puts href
end

all_attachment_names.each do |name|

text = name.attribute("text")
puts text

end 
```

1.  我们可以让这两个循环结合起来运行它们`parallel`吗？前提是两者`loop count`相同。
2.  我想创建`hash`where`key will be text`和`item will be href`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:21:45.323

```
map = {}
all_attachment_names.zip(all_links) do |a, l|
    map[a] = l
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:28:39.820

您可以使用它[`zip`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-zip)来执行此操作：

```
returned_hash = {}
all_links.zip(all_attachment_names) do |link, name|
  returned_hash[name.text] = link.attribute("href").strip
end 
```

您还可以通过提取`href`and `text`with以函数式编程风格进行操作`map`：

```
hrefs = all_links.map{|link| link.attribute("href").strip}
names = all_attachment_names.map{|name| name.text}
returned_hash = Hash[names.zip(hrefs)] 
```

这样做（可以说）在美学上更令人愉悦，但效率稍低，因为它需要两倍的迭代次数，并创建几个额外的数组，但除非您有大量链接，否则这不会成为问题。

# java - Android 4 设置风格

> ID：14490373
> 
> 赞同：1
> 
> 时间：2013-01-23T22:13:08.930
> 
> 标签：java, android, xml, styles

我真的很喜欢 androi 4 设置页面，我试图以同样的方式设计我的应用程序。这是一个截图：[http](http://cdn.androidtapp.com/wp-content/uploads/2011/10/Android-4.0-Settings-Screen.jpg) ://cdn.androidtapp.com/wp-content/uploads/2011/10/Android-4.0-Settings-Screen.jpg 。

我刚接触 java 和 android 3 或 4 天前所以风格我还没有真正专注于风格，对它一无所知，所以我有几个问题：

1）如何设置类似的标题列表（例如图片上的Wires和network）

2）如何为我的应用程序设置相同的颜色？这是某种默认样式吗？

3) 是否在图片上使用填充来使列表与边界保持距离？填充可以应用于整个应用程序还是必须在每个 xml 中定义？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:15:45.460

是的，您可以将通用样式应用于您的应用程序（这包括填充），这非常简单

在这里寻找起点[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:17:49.873

如果您想为您的应用设置相同的样式，则应遵循以下有关标准指标和网格的指南：

[http://developer.android.com/design/style/metrics-grids.html](http://developer.android.com/design/style/metrics-grids.html)

1) 要设置类似的标题，您必须实现自己的自定义视图并将其添加到列表中。

2）您可以设置您需要的主题，`AndroidManifest.xml`也可以使用标准项目。要找到它们，请查看项目中 Android 库中的 android.jar/res.layout 文件夹。有视图的所有标准布局文件。

3）您需要在布局文件中设置边距。

您必须制作一个布局文件并在其中指定所有视图元素和边距。

但是，如果您想设置首选项，则可以使用现成的类（PreferenceActivity 或 PreferenceFragment）。

# jquery - Qtip 不适用于淘汰赛

> ID：14490374
> 
> 赞同：0
> 
> 时间：2013-01-23T22:13:09.703
> 
> 标签：jquery, knockout.js, qtip

我在我的模板页面中使用 Qtip。

```
<a href="details.html" class="qtipselector">Intro</a> 
```

在主页中，我包含了库：

```
<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery.qtip.js"></script>
<!--Template binding-->
<div id="Container" ua-app-id="topVm" data-bind='template: {name: pageModel, data: pageVM }'>                   
</div>
<script src="Scripts/abc.js"></script> 
```

这个函数在自定义库 abc.js 中

```
$('.qtipselector').qtip({
    content: $('div#TooltipContent').html(),
    position: {
        my: 'left center', 
        at: 'center right'
    },
    show: 'mouseenter',
        hide: {
            fixed: true,
            delay: 500,

            when: {
                event: 'unfocus'
            }
        },
    style: {
        tip: {
          width: 20,
          height: 14,
        },
        width:280,
        height:100,    
        classes: 'qtip-light qtip-shadow qtip-rounded',

    }
}); 
```

当我加载主页时，我收到此错误：未捕获的 TypeError: Object [object Object] has no method 'qtip' (anonymous function)

如何确保在模板绑定后加载 qtip 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:44:28.500

通常，实现此目的的一个好方法是通过 Knockout 中的自定义绑定。

这是 Knockout 网站上的教程： http://learn.knockoutjs.com/#/?tutorial= [custombindings](http://learn.knockoutjs.com/#/?tutorial=custombindings)

和文档： http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

# rest - 在AngularJS中将状态保存回数据库的正确方法是什么？

> ID：14490378
> 
> 赞同：0
> 
> 时间：2013-01-23T22:13:21.647
> 
> 标签：rest, angularjs

Angular 主页上的最后一个示例显示使用 mongolab API 将状态保存到 Mongo 数据库，但是 API 密钥在 JavaScript 文件中，并且客户端可以轻松查看。我的问题是使用 Angular 与服务器端 rest API 进行安全通信的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:36:25.067

一个非常标准的策略是在与 AngularJS 应用程序相同的域上运行 API（以防止跨域问题）

例如，整个应用程序（后端 + 前端）的路由可以是：

/ - 前端 AngularJS 应用程序，

/api - 休息 API

下一步是身份验证和授权，这可以通过会话来完成。因此，当有人访问 /api 时，您知道它是哪个用户以及是否允许他这样做。

只是要清楚 - 不要直接从前端应用程序访问 Mongo，为此构建一个 API。

# symfony - 将用户实体与实际客户信息分开是否更好

> ID：14490380
> 
> 赞同：0
> 
> 时间：2013-01-23T22:13:34.933
> 
> 标签：symfony

我目前正在 Symfony2 上开发一个完整的 Web 客户端管理系统。但是，是创建一个用户实体和一个单独的客户实体还是让用户实体管理所有客户信息（如信用状态）的问题仍未得到解答。

根据我收集到的信息，为每件事使用单独的实体可以让我更好地分离登录系统（需要具有基本属性的用户实体）和业务逻辑（需要具有所有属性的客户端实体）现实世界中的客户有）。但是，这意味着比让单个实体包含所有属性要占用更大的空间（如果它们保存在数据库中，我将不得不使用连接语句）。

在这种情况下你会推荐什么？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:27:38.633

对于用户登录和系统，您可以使用[FOSuserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)

如果您的客户也需要登录同一个系统，那么我会说您选择

[https://github.com/netmeansnet/NmnMultiUserBundle/blob/master/Resources/doc/index.md](https://github.com/netmeansnet/NmnMultiUserBundle/blob/master/Resources/doc/index.md)

然后，您可以为每种类型的 os 用户设置单独的类并定义自定义属性

他们都将使用相同的基本属性，如用户名、密码，然后您可以获得客户端实体的额外信息

# javascript - 如何在渲染后立即绑定 HTML 元素

> ID：14490383
> 
> 赞同：0
> 
> 时间：2013-01-23T22:13:51.203
> 
> 标签：javascript, jquery, backbone.js

我的视图中有一个使用 Backbone.js 呈现的跨度

我想在渲染后立即获取它的 HTML

就像是 ：`$(span).html()`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:46:44.470

这个问题让我有点困惑，因为 Backbone.View 实际上根本没有`render`方法（好吧，从技术上讲它确实有，但它是无操作的）；它是 100% 用户定义的。鉴于这一事实，检查......好吧，渲染后的*任何事情都*像......好吧，在渲染后检查它。

换句话说，如果您的视图的渲染方法是：

```
var YourView= Backbone.View.extend({
    render: function() {
        this.$el.html(someHtml);
    }
}); 
```

那么你需要做的就是：

```
var YourView= Backbone.View.extend({
    render: function() {
        this.$el.html(someHtml);
        console.log(this.$el.html()); // check rendered HTML
    }
}); 
```

如果您想通过事件进行中间处理（如@aerodynamo 建议的那样）：

```
var YourView= Backbone.View.extend({
    events: {'customPostRender': 'postRender'},
    postRender: function() {
        console.log(this.$el.html()); // check rendered HTML
    },
    render: function() {
        this.$el.html(someHtml);
        this.trigger('customPostRender');
    }
}); 
```

但实际上这甚至没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:40:05.950

不确定[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)是否有帮助，但绝对值得一试:-)

# python - 线拟合低于点

> ID：14490400
> 
> 赞同：5
> 
> 时间：2013-01-23T22:14:25.800
> 
> 标签：python, numpy, scipy

我有一组 x、y 点，我想找到最适合的线，使该线低于使用 SciPy 的所有点。我正在尝试为此使用 minimumsq，但我不确定如何将线调整为低于所有点而不是最佳拟合线。最佳拟合线的系数可以通过以下方式产生：

```
def linreg(x, y):

    fit = lambda params, x: params[0] * x - params[1]
    err = lambda p, x, y: (y - fit(p, x))**2 

    # initial slope/intercept
    init_p = np.array((1, 0))

    p, _ = leastsq(err, init_p.copy(), args=(x, y))

    return p

xs = sp.array([1, 2, 3, 4, 5])  
ys = sp.array([10, 20, 30, 40, 50])

print linreg(xs, ys) 
```

输出是最佳拟合线的系数：

```
array([  9.99999997e+00,  -1.68071668e-15]) 
```

如何获得低于所有点的最佳拟合线的系数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T00:35:52.777

一种可能的算法如下：

1.  移动轴以使所有数据都位于 x 轴的正半部分。

2.  如果拟合的形式`y = a * x + b`为 ，那么对于给定`b`的最佳拟合`a`将是连接点`(0, b)`与每个点的斜率的最小值`(x, y)`。

3.  然后，您可以计算拟合误差，它只是 的函数`b`，并用于`scipy.optimize.minimize`找到 的最佳值`b`。

4.  剩下的就是为此计算`a`并`b`计算`b`轴的原始位置。

以下大部分时间都会这样做，除非最小化失败并出现一些神秘错误：

```
from __future__ import division
import numpy as np
import scipy.optimize
import matplotlib.pyplot as plt

def fit_below(x, y) :
    idx = np.argsort(x)
    x = x[idx]
    y = y[idx]
    x0, y0 = x[0] - 1, y[0]
    x -= x0
    y -= y0

    def error_function_2(b, x, y) :
        a = np.min((y - b) / x)
        return np.sum((y - a * x - b)**2)

    b = scipy.optimize.minimize(error_function_2, [0], args=(x, y)).x[0]

    a = np.min((y - b) / x)

    return a, b - a * x0 + y0

x = np.arange(10).astype(float)
y = x * 2 + 3 + 3 * np.random.rand(len(x))

a, b = fit_below(x, y)

plt.plot(x, y, 'o')
plt.plot(x, a*x + b, '-')
plt.show() 
```

正如 TheodrosZelleke 明智地预测的那样，它通过两个属于凸包的点：

![在此处输入图像描述](../Images/c7fd6544e31bbc49c85cfe98bbd1588b.png)

# javascript - 正则表达式或 jQuery 用迭代计数查找/替换

> ID：14490406
> 
> 赞同：4
> 
> 时间：2013-01-23T22:14:49.083
> 
> 标签：javascript, jquery, regex, tinymce

我有一个基于 tinymce 的文档，我需要对其进行查找/替换。

文档中的标记将在 html 中具有特定`<!--nextpage-->`的注释标记，如下所示：

```
<p>some content</p><!--nextpage-->
<p>some more content</p><!--nextpage--> 
```

我需要做一个脚本化的查找/替换，迭代`<!--nextpage-->`标记中的每个出现并用锚元素替换它。

锚点需要有一个连续的 id 值“anchor+N”，其中`N`是文档中锚点的索引加 1。

因此，对于上述文本，替换将产生：

```
<p>some content</p><a id="anchor1"></a>
<p>some more content</p><a id="anchor2"></a> 
```

jQuery可以做到这一点还是我需要使用正则表达式之类的其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:09:15.627

您可以获取`innerHTML`of the`body`并对其进行替换，完成后将新文本写回。

* * *

[**DEMO - 1**](http://jsfiddle.net/2KJmC/) - 使用 JavaScript 替换 HTML

* * *

尽管代码有效，但替换 HTML 可能会产生后果。如果您有任何事件绑定到其中的任何元素，`body`它们现在将被解除绑定，因为您已经替换了 HTML。

如果可能的话，如果您对它有任何影响，我不会将其`<!--nextpage-->`用作占位符，但可能是一个空元素，您可以使用选择器作为目标，`<div class="nextpage-placeholder"></div>`例如。

这样，您可以仅定位和替换特定元素，而不影响其余代码。

* * *

[**DEMO - 2**](http://jsfiddle.net/AhBQ6/) - 使用 jQuery 替换元素

* * *

另一种方法是可能只是将类分配给实际`p`标签，然后简单地使用 jQuery`after`添加锚点。

* * *

[**DEMO - 3**](http://jsfiddle.net/EuNtn/) - 使用 jQuery 添加新的锚点

* * *

* * *

### 来自演示的代码以防小提琴死了

* * *

*演示 - 1*

```
<p>some content</p><!--nextpage-->
<p>some more content</p><!--nextpage--> 
```

```
var text = document.body.innerHTML;
var targetText = "<!--nextpage-->";
var index = 1;

while(text.indexOf(targetText) > -1){
    text = text.replace(targetText, '<a id="anchor' + index + '"></a>');
    index++;
}

document.body.innerHTML = text; 
```

* * *

*演示 - 2*

```
<p>some content</p><div class="nextpage-placeholder"></div>
<p>some more content</p><div class="nextpage-placeholder"></div> 
```

```
var $elements = $(".nextpage-placeholder");

$elements.each(function(index){
    $(this).replaceWith('<a id="anchor' + (index+1) + '"></a>')
}); 
```

* * *

*演示 - 3*

```
<p class="nextpage-placeholder">some content</p>
<p class="nextpage-placeholder">some more content</p> 
```

```
var $elements = $(".nextpage-placeholder");

$elements.each(function(index){
    $(this).after('<a id="anchor' + (index+1) + '"></a>')
}); 
```

# excel - Excel 宏用于更新其他电子表格中的链接

> ID：14490407
> 
> 赞同：1
> 
> 时间：2013-01-23T22:15:04.170
> 
> 标签：excel, vba

我正在尝试创建一个可以应用于我的工作表的宏。

场景：我有一个类似于摘要页面的工作簿。它具有指向其他工作簿中硬编码数字的链接。在许多情况下，文件夹已被移动，或者工作表可能被重命名/删除等。链接最终失败，并导致许多#REF 错误。发生这种情况是因为多人可以操作共享网络驱动器上的电子表格。

我想通过创建故障保险来解决这个问题。本质上，一个“更新”按钮会将所有已更新的引用的副本保存到一个名为“更新的数据”的新工作表中，并在执行最后一次更新时添加时间戳。仅当参考发生更改时，此数据才会更改。例如，如果在星期一，单元格 A1 引用工作簿的单元格 A1 并返回值 $1234.56，则它将引用存储在单独的工作表中。现在，星期二我单击更新，参考 A1 工作簿已被移动或删除。我仍然会返回 $1234.56 而不是#REF。最后，有一些更新失败的通知，会很棒，可能会突出显示单元格。

感谢您阅读并提供您的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:43:23.877

如果您想走验证路径，那么我建议您：

1.  使用如下代码来验证每个链接是否完整。此代码片段标识了链接文件与“摘要文件”不位于同一目录中的位置
2.  您可以添加一个更新有效链接工作簿的后续部分，然后跳过错误
3.  如果工作表已重命名但链接源有效，Excel 将提示您选择要链接到的工作表
4.  这仍然会使您暴露在人们在馈线表中移动数据的情况下，尤其是在可以插入或删除行和列的情况下。
5.  *预防问题比故障保险好得多*。最好的选择是在所有馈送工作簿上使用单个工作表来合并要链接到摘要文件的数据，然后将此工作表完整导入到摘要文件中。这意味着人们可以

    *   重命名/移动/添加工作表
    *   添加/删除列/行

在不影响合并数据表的情况下

**识别缺失链接的代码**

'查找源文件与摘要文件不在同一目录中的位置

```
 Dim vLinkArr()
    Dim lngLink As Long
    Dim strMsg As String
    Dim strGoodMsg As String

    On Error Resume Next
    vLinkArr = ThisWorkbook.LinkSources
    On Error GoTo 0
    If IsEmpty(vLinkArr) Then Exit Sub
    For lngLink = 1 To UBound(vLinkArr)
            If Left$(vLinkArr(lngLink), InStrRev(vLinkArr(lngLink), "\") - 1) <> ThisWorkbook.Path Then
                If InStr(Left$(vLinkArr(lngLink), InStrRev(vLinkArr(lngLink), "\") - 1), ThisWorkbook.Path) = 0 Then
                    strMsg = strMsg & vLinkArr(lngLink) & vbCrLf
                Else
                    strGoodMsg = strGoodMsg & vLinkArr(lngLink) & Chr(10)
                End If
            Else
                strGoodMsg = strGoodMsg & vLinkArr(lngLink) & Chr(10)
            End If

    Next
    If strMsg <> vbNullString Then MsgBox strMsg 
```

# php - 如何在 PHP 中解析常量

> ID：14490408
> 
> 赞同：3
> 
> 时间：2013-01-23T22:15:05.127
> 
> 标签：php, constants, eval

是否可以在 PHP 中解析常量的内容？

例如，

```
define('WHO_AM_I', 'My name is $_SESSION['who_am_i'].'); // setup the constant string
echo eval(WHO_AM_I); // something like this -- but the eval() returns an error 
```

请注意，直到我稍后在脚本流中实际使用该常量时，我​​才知道 _SESSION var 的值。

谢谢。

**修改了想要这样做的原因**

我想从我的脚本中提取“硬编码”，并让用户能够在他们的站点中配置某些分类法。因此，当我这样做时，我还想创建一个准动态常量，我认为我可以稍后在脚本中解析它。

如果做不到……那就做不到。

不过，不要因为我问这个问题而开枪。

**避免所有这些混乱的最后评论**

我的问题的目的与 eval() 函数无关。我真的很后悔一开始就把它放在那里。

我将 eval() 放在问题中只是为了向 stackoverflow 成员展示我做了一些准备，而不是问一个开放式的问题——嘿，给我一个解决方案，而我自己没有提出任何问题。所以请忽略eval()。

我想知道的是，我能否以某种方式制作一个define()，以便稍后在我的脚本中解析分配的值。就是这样，仅此而已。

**修正案 C**

我知道我可以执行以下操作，尽管我不想这样做：

```
define('PARSE_ABLE_CONSTANT_PART_A', 'My name is ');
define('PARSE_ABLE_CONSTANT_PART_B', '.'); 
```

...后来沿着脚本之路...

```
echo PARSE_ABLE_CONSTANT_PART_A . $_SESSION['who_am_i'] . PARSE_ABLE_CONSTANT_PART_B; 
```

如果我可以使用常量中的嵌入式 var 使其更流畅，我只是不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:24:59.370

正如其他用户指出的那样，这似乎很可疑。如果你愿意，你可以这样做：

```
define('WHO_AM_I', 'echo \'My name is \'.$_SESSION[\'who_am_i\'];');
eval(WHO_AM_I); 
```

这将始终只是回显变量。您需要评估一个表达式 afaik。

只需阅读您的编辑。我认为您会更适合 .ini 文件，或者可能是具有静态属性的静态类。使其更加灵活，并且您避免了评估。您正在谈论我所看到的用户生成的内容 - 将其置于 eval 调用似乎非常不安全。

您可以使用的静态类的快速示例：

```
<?php
class myConstants{
  public static function _($key){
    switch($key){
      case "WHO_AM_I":
        return "My name is ".$_SESSION['who_am_i'];
        break;
      case "OTHER_CONSTANT":
        // does some other evaluation and returns a string
        break;
    }
    throw new Exception("Constant isn't defined");
  }
}
?> 
```

然后你可以`echo myConstants::_('WHO_AM_I');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:19:56.547

根据定义，常量不允许您使用动态内容对其进行设置。

这是 php 手册中的引用：

> 顾名思义，该值在脚本执行期间无法更改

[去这里](http://php.net/manual/en/language.constants.php)可以看到更多

你可能在想[神奇的常数](http://php.net/manual/en/language.constants.predefined.php)

# mysql - SQL查询错误#1064

> ID：14490409
> 
> 赞同：1
> 
> 时间：2013-01-23T22:15:06.460
> 
> 标签：mysql, sql

所以我有这个查询：

```
SELECT 
   t1.password 
FROM Session AS t1 
INNER JOIN Locations AS t2 ON 
    t2.id = t1.location_id AND 
    SQRT( POWER( CONVERT(t2.longitude,float(10)) - 132.456, 2) + 
        POWER( CONVERT(t2.latitude,float(10)) - 132.456, 2) ) < 100 
WHERE t1.end_distribution = 0 AND t1.end_session = 0 
```

我明白了：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'float(10)) - 132.456, 2) + POWER( CONVERT(t2.latitude,float(10)) - 132.456, 2) )' 附近使用正确的语法第 13 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:19:34.660

利用

```
CONVERT(t2.longitude, float(10)) 
```

[MySQL 转换语法](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_convert)

**更新**

根据上面的文档，您无法将表达式转换为浮点类型，请改用小数。

```
CONVERT(t2.longitude, decimal(10)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:37:37.473

您对 CONVERT 函数的类型的规范无效。 `FLOAT(10)`无效。看起来您最好的选择是使用`DECIMAL`.

来自 MySQL 参考手册：[http ://dev.mysql.com/doc/refman/5.5/en/cast-functions.html](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html)

<剪辑>

结果的类型可以是以下值之一：

```
BINARY[(N)]
CHAR[(N)]
DATE
DATETIME
DECIMAL[(M[,D])]
SIGNED [INTEGER]
TIME
UNSIGNED [INTEGER] 
```

</snip>

# c - 编辑 gtkcellrenderertext

> ID：14490412
> 
> 赞同：1
> 
> 时间：2013-01-23T22:15:26.647
> 
> 标签：c, treeview, gtk3, renderer

我正在编写一个 gtk3(in C) 代码，它使用树视图。

```
store = gtk_list_store_new (NUM_COLS, G_TYPE_STRING, G_TYPE_STRING,
                                                G_TYPE_STRING,
                                                G_TYPE_STRING,
                                                G_TYPE_STRING);

  tree = gtk_tree_view_new_with_model (GTK_TREE_MODEL (store));
  cell = gtk_cell_renderer_text_new ();
  col_pub=gtk_tree_view_column_new_with_attributes (
                                               "Title", cell,
                                               "text", COL_BIB_PUB,
                                               NULL);
gtk_tree_view_column_set_sort_column_id( col_pub, ID_PUB);
gtk_tree_view_append_column (GTK_TREE_VIEW (tree), col_pub); 
```

问题是我希望树视图的每个单元格都是可编辑的，所以我需要类似的东西：

```
g_object_set(cell, "editable", TRUE, NULL); 
```

但我不知道如何将编辑后的标志连接到文件/缓冲区。如果有人好心地指路，这将非常有帮助......可能是一个非常简短的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T00:41:34.837

只需将 Gtk.CellRendererText 连接到信号即可。所有使用此渲染器的 TreeViewColumn 都将连接到信号。

```
g_signal_connect (G_OBJECT (cell), "edited", G_CALLBACK (cb), NULL)

    void cb (GtkCellRendererText *rend, char*path, char*newtext, gpointer data)
{
    // Do whatever you want with the newtext
       ........          

    // Since this signal emitted after cell being edited,
    // you can use a global variable (a bool maybe) to indicate.
    // gboolean switcher = 0   
    switcher = 1
} 
```

如果那是您想要的，因为您的问题不清楚

# c# - 根据另一个表中的值向表中添加多行新数据

> ID：14490415
> 
> 赞同：0
> 
> 时间：2013-01-23T22:15:38.213
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在使用 asp.net 和 mvc 3 来创建我的应用程序。这是我的表格的简化版本。

我的表格如下

[学生]（身份证，姓名）

[课程]（ID，主题）

[CLASSINSTANCE]（ID、主题、CLASSID）

[CLASSINSTANCEDETAIL]（学生 ID、班级 ID、出勤率）

[注册]（学生，班级）

我有学生和班级之间的关系

CLASS **<- 1 to MANY ->** CLASSINSTANCE **<- 1 TO MANY ->** CLASSINSTANCEDETAIL **<- MANY to 1 ->** STUDENT

学生**<- 1 到 MANY ->**招生**<- MANY 到 1 ->**班级

基本上我需要做的是，每当我创建一个新班级时，我还需要在 ClassDetail 表中添加一条新记录，其中包含班级的班级 ID 和每个学生的注册表中匹配的学生 ID。例如。如果我创建了一个新的类实例，那么我需要在该表中找到 classID，并为 ENROLLEDIN 表中具有匹配 classID 的每个学生添加新的数据行。

如果有人知道如何在 c# 中使用 mvc3 和 asp.net 做到这一点，我将非常感激！

PS。我使用实体框架将我的数据库与我的模型一起导入到数据访问层文件夹中，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:35:48.253

好吧，要使用 Linq 在 C# 上创建新`ClassDetail`记录，您可以使用：

```
var class = classInstance.Class;
var newDetails = from s in class.Students
                 select new ClassDetail
                 {
                     ClassInstance = classInstance, 
                     Student = s
                 };
foreach(ClassDetail cd in newDetails)
{
    ClassDetails.Add(cd);
} 
```

This assumes that the Student<->Class many-to-many relationship was mapped directly and the `EnrolledIn` table was not mapped to an entity. If it was, try this:

```
var class = classInstance.Class;
var newDetails = from ei in class.EnrolledIn
                 select new ClassDetail
                 {
                     ClassInstance = classInstance, 
                     Student = ei.Student
                 };
foreach(ClassDetail cd in newDetails)
{
    ClassDetails.Add(cd);
} 
```

# .htaccess - .htaccess 301 从旧 URL 结构重定向到新 URL 结构

> ID：14490416
> 
> 赞同：0
> 
> 时间：2013-01-23T22:15:39.997
> 
> 标签：.htaccess, redirect

我正在尝试将用户重定向到新的 URL 结构。

这是旧的 URL 结构：

[http://www.mywebsite.com/pants/pant-item-1234](http://www.mywebsite.com/pants/pant-item-1234)

这是新的 URL 结构：

[http://www.mywebsite.com/catalog/pants/pant-item-1234](http://www.mywebsite.com/catalog/pants/pant-item-1234)

知道如何使用 HTACCESS 301 重定向来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:23:10.733

```
RewriteRule ^pants/(.+)$ /catalog/pants/$1 [R=301,L] 
```

或者，如果裤子实际上可以是别的东西

```
RewriteRule ^([^/]+)/(.+)$ /catalog/$1/$2 [R=301,L] 
```

*我还没有测试过，所以我不确定它是否会起作用，对不起*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:31:56.607

只需使用重写 URL...除非您根本不使用 mywebsite.com 作为登录页面，否则我不会重定向。[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)你需要确保你有你的重写引擎。

# javascript - JavaScript 函数每次运行时都会崩溃

> ID：14490423
> 
> 赞同：0
> 
> 时间：2013-01-23T22:16:01.717
> 
> 标签：javascript

我正在用 JavaScript 编写这个非常棒的游戏，但是我刚刚编写的函数的一部分在每次运行时都会崩溃。

所以我想知道，在 for 循环中运行是不是太多了，还是我在某处犯了语法错误？

这是代码；它取自一个函数，但这是导致它崩溃的部分。

```
for (zloop=min_houses_per_block; zloop<(house_number+1); zloop++)
{
    if (zloop>0)
    {
        city_block_array[first][second].house_array[zloop].width =
                (min_house_width+(((max_house_width-min_house_width)/house_width_slots)*(Math.floor(Math.random()*house_width_slots))));

        city_block_array[first][second].house_array[zloop].height =
                (min_house_height+(((max_house_height-min_house_height)/house_height_slots)*(Math.floor(Math.random()*house_height_slots))));

        if (zloop=1)
        {
            x_number=(block_width-(house_threshold*2))-city_block_array[first][second].house_array[zloop].width;
            min_house_x=house_threshold
            city_block_array[first][second].house_array[zloop].x =
                    (min_house_x+(((x_number)/house_x_slots)*(Math.floor(Math.random()*house_x_slots))));
        }

        city_block_array[first][second].house_array[zloop].x=6000;
        city_block_array[0][0].house_array[1].x=6000;
    }
} 
```

没有`if (zloop=1)`它运行良好的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:17:12.700

你的意思是说`if (zloop==1)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T22:18:05.497

您的错误很可能是这一行：

```
if (zloop = 1) { 
```

这设置`zloop`为`1`。你想比较`zloop`，`1`所以使用`zloop == 1`.

另外，尝试减少线的长度。您可以使用一些更具描述性的变量：

```
for (var zloop = min_houses_per_block; zloop < (house_number + 1); zloop++) {
  var house = city_block_array[first][second].house_array[zloop];

  if (zloop > 0) {
    house.width = (min_house_width + (((max_house_width - min_house_width) / house_width_slots) * (Math.floor(Math.random() * house_width_slots))));
    house.height = (min_house_height + (((max_house_height - min_house_height) / house_height_slots) * (Math.floor(Math.random() * house_height_slots))));

    if (zloop == 1) {
      x_number = (block_width - (house_threshold * 2)) - house.width;
      house.x = (house_threshold + (((x_number) / house_x_slots) * (Math.floor(Math.random() * house_x_slots))));
    } else {
      city_block_array[0][0].house_array[1].x = 6000;
      house.x = 6000;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T22:18:53.510

```
if (zloop=1) 
```

你的意思

```
if (zloop == 1) 
```

= 是一个赋值 == 是一个比较

# filemaker - 用于贸易展览数据收集的 filemaker pro 7 电子邮件输入表

> ID：14490429
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:16:32.317
> 
> 标签：filemaker

我有 Filemaker pro 7（是的，已有 100 万年历史）

我需要帮助为我参加的贸易展览制作一个非常简单的电子邮件数据收集表。很多人都需要这种形式。

我已经做了！它有一个输入您的电子邮件的空间，然后如果您单击屏幕上的“提交”按钮，它会打开一条新记录，以便下一个人可以输入他们的电子邮件。简单又甜美。

然而，我真正想做的是，当他们敲击键盘的“ENTER”键时，它会打开一个新记录。因此客户不必使用鼠标。为什么？因为每个人都会自动敲击键盘 Enter 键。这就是直觉。这会让我非常非常高兴！

真让我欣喜若狂，如果他们可以输入他们的电子邮件一次，按回车键，然后转到同一页面上的另一个填写框，他们将再次输入他们的电子邮件 - 以确保他们拼写正确，我会很高兴。如果两个框不匹配，程序会要求他们再试一次。如果这两个条目匹配，那么当他们按下键盘 Enter 键时，它将打开一个新记录（如上）。

谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:09:48.320

这在 FileMaker 7 中可能很困难。如果您考虑升级到版本 11 或 12，它会容易得多。在更高版本中，您有一个称为 ScriptTriggers 的功能，该功能对您的解决方案非常有用。

我能想到的唯一真正的方法是，如果您编写一个带有自定义对话框的脚本，该对话框显示两个字段，一个用于电子邮件，另一个用于重新输入电子邮件。然后你把这个对话框放在一个循环中，这样它就会一直询问新的电子邮件，直到你点击“取消”

为此，您将需要两个全局文本字段 globalText1 和 globalText2

脚本可能看起来像这样。

```
[Set Field globalText1; ""]
[Set Field globalText1; ""]
[Loop]
  [Show Custom Dialog; "Enter new Email"; globalText1; globalText2]
  [If get(lastMessageChoice) = 2]
      [Exit loop if: True]
  [Else if globalText1 <> globalText2]
      [Show custom dialog; "You must type the same E-mail in both fields"] 
  [Else]
      [Create new Record]
      [Set field "Emailadress"; globalText1]
      [Commit record; Do not display dialog]
      [Set Field globalText1; ""]
      [Set Field globalText1; ""]
  [End if]
[End Loop] 
```

请注意，带有两个输入字段的对话框需要两个按钮。按钮 1 是“确定”，按钮 2 是“取消”。第二个对话框只是一个警告，需要一个“确定”按钮并且没有输入字段。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:13:31.537

您可以按照 Kalle 的建议进行操作，但不需要使用对话框。

将这两个字段放在一个布局上，然后在进入循环之前转到该布局。

将对话框替换为暂停脚本步骤。设置字段。

当用户按 Enter 或 Return 时，将字段设置为制表符。

当您迁移到 FMP12 时，您可能会发现使用布局更可取。

# windows-8 - 如何缩小 ProjectPlane 动画的视野？

> ID：14490433
> 
> 赞同：0
> 
> 时间：2013-01-23T22:16:44.943
> 
> 标签：windows-8, 3d, winrt-xaml, windows-store-apps, projection-plane

在 XAML 中，ProjectionPlane 用于在三维轴上旋转元素。例如，如果我想向我倾斜一个矩形的右边缘，我这样做：

```
<!-- zero rotation -->
<Rectangle Fill="White" Height="200" Width="200">
    <Rectangle.Projection>
        <PlaneProjection RotationY="0" />
    </Rectangle.Projection>
</Rectangle>

<!-- 45 deg rotation -->
<Rectangle Fill="White" Height="200" Width="200">
    <Rectangle.Projection>
        <PlaneProjection RotationY="45" />
    </Rectangle.Projection>
</Rectangle>

<!-- 85 deg rotation -->
<Rectangle Fill="White" Height="200" Width="200">
    <Rectangle.Projection>
        <PlaneProjection RotationY="85" />
    </Rectangle.Projection>
</Rectangle> 
```

生成的矩形将如下所示：

![在此处输入图像描述](../Images/1b1ddc3e65dda16906bd4c8fd9e31f8a.png)

到目前为止，一切都很好。这是我的问题。随着角度增加接近 90 度，矩形越来越倾斜。是否有一种属性或技术可以让 ProjectionPlane 沿 Y 轴一直旋转到 90 度但减少旋转（或改变视野）？

换句话说，从后角到前角的角度会减小，因此如果矩形中有内容，它会更容易辨别。

这是一个之前和之后的问题，以使问题尽可能清晰。左边是我得到的。右边是我想要的。说明这一点有些夸张。我希望这是有道理的。

![在此处输入图像描述](../Images/916db4d5ee376c7c056284de0262ab47.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:41:04.763

不幸的是，PlaneProjection 不允许您更改投影矩阵。要控制投影，您必须使用[Matrix3DProjection](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.matrix3dprojection)。您可以使用文档中提供的示例代码，也可以查看将[Matrix3DEx](http://matrix3dex.codeplex.com/)库移植到 WinRT。

您可以尝试的另一件事是将对象沿 Z 轴向后推并按比例放大以保持其大小。由于物体离相机更远，因此翻转时的失真会更小。

顺便说一句[，根据 Jaime Rodriguez](http://blogs.msdn.com/b/jaimer/archive/2009/06/03/silverlight3-planeprojection-primer.aspx)的说法，PlaneProjection 的 fov 设置为 57 度，对于大多数显示器来说有点宽。

# r - 为什么 outlier.colour 在 geom_boxplot() 中有效，但在 layer(..., geom_params(...) 中无效)

> ID：14490438
> 
> 赞同：1
> 
> 时间：2013-01-23T22:17:09.293
> 
> 标签：r, ggplot2

我希望这些能给出相同的结果，但他们没有：

```
p <- ggplot(diamonds, aes(y=carat, x=color))
p + layer( geom="boxplot", geom_params=list(colour="navy", fill="skyblue"),
           stat="boxplot", stat_params=list(coef=2))
p + geom_boxplot(colour='navy',fill="skyblue") 
```

似乎在第一个中，`colour`用于框和异常值，但仅用于第二个中的框。我有什么误解？

# xcode - 带有（id）发件人的按钮崩溃应用程序

> ID：14490449
> 
> 赞同：0
> 
> 时间：2013-01-23T22:18:23.227
> 
> 标签：xcode, cocos2d-iphone

我正在尝试制作一个需要大量按钮来控制玩家移动的基本游戏。请记住，我使用的是 cocos-2d。我的目标是让按钮可按住并在按住时移动精灵。我现在使用的代码如下所示。

CCMenuItemHoldable.h

```
@interface CCMenuItemSpriteHoldable : CCMenuItemSprite {
    bool buttonHeld;
}

@property (readonly, nonatomic) bool buttonHeld; 
```

CCMenuItemHoldable.m

```
@implementation CCMenuItemSpriteHoldable

@synthesize buttonHeld;

-(void) selected
{
    [super selected];
    buttonHeld = true;
    [self setOpacity:128];
}

-(void) unselected
{
    [super unselected];
    buttonHeld = false;
    [self setOpacity:64];
}

@end 
```

和按钮的设置

```
rightBtn = [CCMenuItemSpriteHoldable itemFromNormalSprite:[CCSprite spriteWithFile:@"art/hud/right.png"] selectedSprite:[CCSprite spriteWithFile:@"art/hud/right.png"] target:self selector:@selector(rightButtonPressed)];

CCMenu *directionalMenu = [CCMenu menuWithItems:leftBtn, rightBtn, nil];
[directionalMenu alignItemsHorizontallyWithPadding:0];
[directionalMenu setPosition:ccp(110,48)];
[self addChild:directionalMenu]; 
```

这一切似乎都很好，但是当我这样做时

```
-(void)rightButtonPressed:(id) sender
{

    if([sender buttonHeld])
            targetX = 10; 
        else{
            targetX = 0; 
        }   
} 
```

崩溃已修复，但我正试图让我的精灵移动。在我的游戏刻度函数中，我将 targetX 的值添加到计时器上精灵的位置，但仍然没有运动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:39:18.137

请在询问有关崩溃的问题时始终包含崩溃日志。

在你的情况下，我可以猜到问题所在。您正在添加此选择器：

```
@selector(rightButtonPressed) 
```

你的方法被称为

```
rightButtonPressed:(id)sender 
```

作为选择器，这将是`rightButtonPressed:`- 请注意指示参数已传递的冒号。要么更改方法，使其没有参数，要么在创建按钮时向选择器添加一个冒号。

崩溃日志会告诉你这一点——它会说“无法识别的选择器发送到...”，并带有接收类的名称和选择器的名称。

# actionscript-3 - Flash Window 大小相机权限

> ID：14490451
> 
> 赞同：0
> 
> 时间：2013-01-23T22:18:28.720
> 
> 标签：actionscript-3, flash

如果我将主 Flash 窗口设置为 100x100 或其他较小的窗口，则音频视频的权限对话框无法在该空间中显示，并且 Flash 会自动给我拒绝访问错误。有没有办法允许权限然后调整窗口大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:33:07.000

您可以这样做，但您需要使用 JavaScript 来处理`<div>`swf 所在的大小调整。

您可以使用`ExtenalInterface`从 Flash 调用 js 函数。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

AS3 代码就像这样简单：

```
ExternalInterface.call("myJSSwfResizeFunction"); 
```

# .net - OracleCommandBuilder.DeriveParameters 中的 System.AccessViolationException

> ID：14490456
> 
> 赞同：1
> 
> 时间：2013-01-23T22:18:56.563
> 
> 标签：.net, ado.net, oracle10g

连接打开，包有效，程序存在。

```
A first chance exception of type 'System.AccessViolationException' occurred in Oracle.DataAccess.DLL
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at Oracle.DataAccess.Client.OpsSql.ExecuteNonQuery(IntPtr opsConCtx, IntPtr& opsErrCtx, IntPtr& opsSqlCtx, IntPtr& opsDacCtx, IntPtr opsSubscrCtx, Int32& isSubscrRegistered, OpoSqlValCtx*& pOpoSqlValCtx, OpoSqlRefCtx& pOpoSqlRefCtx, IntPtr[] pOpoPrmValCtx, OpoPrmRefCtx[] pOpoPrmRefCtx, OpoMetValCtx*& pOpoMetValCtx, Int32 prmCnt)
   at Oracle.DataAccess.Client.OracleCommand.ExecuteNonQuery()
   at Oracle.DataAccess.Client.OracleCommandBuilder.DeriveParameters(OracleCommand command) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:26:23.277

重新安装客户端，问题消失。

# intellij-idea - IntelliJ全面屏，真的

> ID：14490461
> 
> 赞同：3
> 
> 时间：2013-01-23T22:19:27.917
> 
> 标签：intellij-idea

是否可以`IntelliJ Idea`在 MAC 上以真正的全屏模式运行？

**没有工具栏，没有侧边栏，没有按钮，只有代码。**

如果可能，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T06:08:23.950

您可以`View`通过禁用以下项目在菜单中执行此操作：

![看法](../Images/f70b8d143ff3bf0443f607bd0fb256a3.png)

双击编辑器选项卡将隐藏所有打开的工具窗口（第二次双击将恢复它们）。

也可以在`Preferences`|中禁用编辑器选项卡。`Editor`| `Editor Tabs`.

# c++ - c++ 默认构造函数无法初始化公共变量？

> ID：14490476
> 
> 赞同：4
> 
> 时间：2013-01-23T22:20:39.500
> 
> 标签：c++, visual-studio-2010

我有简单的样本：

```
#include <iostream>

class parent {
public:
    int i;
};

class child : public parent {
public:
    int d;
};

int main() {
    child c;
    std::cout << c.d << std::endl;
    return 0;
} 
```

[如果没有通过调用构造函数显式初始化具有构造函数的基类或成员，编译器会自动使用默认构造函数初始化基类或成员。](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr388.htm)

但是 c (`int d;`和`int i;`) 中的所有整数都没有初始化。

![在此处输入图像描述](../Images/8333de5bcfe8c0b984c821675b9d8fb5.png)

它有什么问题？或者我没有看到明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:23:08.993

使用内置类型，您实际上必须自己进行初始化：

```
class parent
{
 public:
  parent() : i() {}
  int i;
}; 
```

这将初始化`i`为`0`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T22:23:13.230

内置数据类型（如`int`）并未真正初始化。他们的“默认构造函数”什么都不做，也没有默认值。因此，他们只会得到垃圾值。如果您希望它们具有特定值，则必须显式初始化内置数据类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T22:27:24.240

在没有构造函数和基本类型的类上完成的默认初始化和零初始化之间存在差异：

```
child c1;           // Default initialized. int types are not initialized.
child c2 = child(); // Zero initialized.    int types are in initialized to zero.
// In C++ 11
child c3 {};        // Use new syntax for zero initialization 
```

更详细的解释：
这里：[https](https://stackoverflow.com/a/7546745/14065)
://stackoverflow.com/a/7546745/14065 这里：[https ://stackoverflow.com/a/8280207/14065](https://stackoverflow.com/a/8280207/14065)

# asp.net-mvc-4 - 为什么 MVC 控制器中的 ServiceSecurityContext.Current 为空？

> ID：14490477
> 
> 赞同：1
> 
> 时间：2013-01-23T22:20:44.273
> 
> 标签：asp.net-mvc-4, windows-authentication

我有一个 ASP.NET MVC 4 项目，它在 Web.config 中使用 Windows 身份验证，如下所示：

```
<system.web>
    <authentication mode="Windows" />
</system.web> 
```

但是，如果我`ServiceSecurityContext.Current`从 Controller 方法进行调查，则为空。由于我使用的是 Windows 身份验证，它不应该包含用户的身份验证信息吗？

我试图弄清楚这一点的原因是因为我想知道`CredentialCache.DefaultNetworkCredentials`Controller 方法中使用的是什么凭据。根据我通过阅读[有关该属性的 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultnetworkcredentials.aspx)收集到的信息，它使用当前安全上下文的凭据......这是空的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T22:22:41.700

这些[`ServiceContext`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicesecuritycontext.aspx)类旨在在 WCF 服务中使用。它与 ASP.NET MVC 无关。

尝试`ServiceContext.Current`在 ASP.NET MVC 应用程序中使用就像尝试`HttpContext.Current`在控制台应用程序中使用 => 你得到 NULL。

> 我试图弄清楚这一点的原因是因为我想知道 CredentialCache.DefaultNetworkCredentials 从 Controller 方法使用什么凭据

然后您正在寻找该`User.Identity.Name`物业：

```
[Authorize]
public ActionResult Index()
{
    string currentUser = User.Identity.Name;
    ...
} 
```

# powershell - 将数据从 .Net EXE 返回到 Powershell

> ID：14490487
> 
> 赞同：0
> 
> 时间：2013-01-23T22:21:46.093
> 
> 标签：powershell, parameters, exe, output-redirect

我有一个 powershell 脚本，它调用一个可执行文件来进行一些数据处理，并且该脚本需要从可执行文件中检索结果。想知道我对这种进程间通信有哪些选择

*   我可以让可执行文件直接返回一个字符串数组或一个对象吗（我认为这是不可能的）？
*   exe文件设置和powershell脚本读取的可变变量？
*   在可执行文件中生成一个临时的 .Net 远程处理服务器，并让 powershell ping 该服务器以获取结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:33:00.347

您可以将 EXE 中的结果以 XML 或 CSV 格式输出到标准输出，然后让 PowerShell 通过强制转换为 [xml] 或 ConvertFrom-Csv 来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:55:49.987

可执行文件是用 .NET 编写的，这没有什么区别：它将是一个单独的进程，因此只有将数据从一个进程传递到另一个进程的机制（两者都没有特定支持*）*可用：

*   exe的返回值：一个整数。
*   exe 的标准输出：一个字符串（通常通过换行符分割成单独的行，因此被视为一个数组）。

（理论上也可以使用标准错误，但这会滥用它而没有额外的功能。）

标准输出方法最简单：在 exe 中使用[`Console.WriteLine`](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)（这是 的快捷方式[`Console.Out.WriteLine`](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)），然后在 PowerShell 中解析字符串：

```
MyExe | Foreach-Object {
  # Do something with $_ which will be a string
} 
```

显然，可以使用任何可以编码为字符串的数据格式。此外，调用脚本可以将整个输出累积成一个值并一次处理它。

# objective-c - 如何使用 NSAttributedStrings 创建一个 NSarray 但将属性保留在数组中？

> ID：14490494
> 
> 赞同：0
> 
> 时间：2013-01-23T22:22:35.833
> 
> 标签：objective-c, nsarray, uilabel, nsattributedstring

我想存储具有不同属性的不同字符串并将它们全部存储在一个数组中，然后在一个标签中显示对象，但每个对象都有其各自的属性。

有什么建议么？

编辑：来自 rmaddy 的答案的解决方案

```
NSDictionary *redAttrs    = @{NSForegroundColorAttributeName:[UIColor redColor]};
NSDictionary *greenAttrs  = @{NSForegroundColorAttributeName:[UIColor colorWithRed:0.118 green:0.506 blue:0.000 alpha:1.000]};
NSDictionary *orangeAttrs = @{NSForegroundColorAttributeName:[UIColor orangeColor]};

NSString *stringUm = @"Brazil";
NSString *stringDois = @"USA";
NSString *stringTres = @"England";

NSMutableAttributedString *redString = [[NSMutableAttributedString alloc] initWithString:stringUm];
[redString setAttributes:redAttrs range:NSMakeRange(0,4)];

NSMutableAttributedString *greenString = [[NSMutableAttributedString alloc] initWithString:stringDois];
[greenString setAttributes:greenAttrs range:NSMakeRange(0,2)];

NSMutableAttributedString *orangeString = [[NSMutableAttributedString alloc] initWithString:stringTres];
[orangeString setAttributes:orangeAttrs range:NSMakeRange(0,4)];

NSArray *myStrings = [[NSArray alloc] initWithObjects:redString, greenString, orangeString, nil];

NSLog(@"%@", [myStrings description]);

NSMutableAttributedString *result = [[NSMutableAttributedString alloc]init];
NSAttributedString *delimiter = [[NSAttributedString alloc] initWithString: @", "];
for (NSAttributedString *str  in myStrings) {
    if (result.length) {
        [result appendAttributedString:delimiter];
    }
    [result appendAttributedString:str];
}

_lblUm.attributedText = result; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:20:17.300

你的问题很不清楚。但是根据您对 gerrytan 回答的评论，您的目标更加明确。

如果您有一个`NSAttributedString`对象数组，那么您可以通过将它们全部附加到一个`NSMutableAttributedString`.

```
NSArray *myStrings = ... // your array of NSAttributedString objects
NSMutableAttributedString *result = [[NSMutableAttributedString alloc] init];
// Put this delimiter between each string - change as desired
NSAttributedString *delimiter = [[NSAttributedString alloc] initWithString:@", "];
for (NSAttributeString *str in myStrings) {
    if (result.length) {
        [result appendAttributedString:delimiter];
    }
    [result appendAttributedString:str];
}

myLabel.attributedText = result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:37:39.257

UILabel 只支持一个 NSAttributedString。我认为您可以做的是为数组上的每个字符串并排放置多个 UILabel

# javascript - 如何在 Javascript 中进行乘法运算？小数问题

> ID：14490496
> 
> 赞同：35
> 
> 时间：2013-01-23T22:22:37.397
> 
> 标签：javascript, decimal, multiplication

我在 Javascript 中有以下代码：

```
var m1 = 2232.00;
var percent = (10/100);
var total = percent*m1;
alert(total); 
```

问题是变量“total”给了我“223.20000000000002”，它应该是“223.2”，我应该怎么做才能得到正确的值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-07-29T15:05:37.287

**.toFixed()**是最好的解决方案。它只会在点后保留两位数。

**经验 1：**

```
var value = 3.666;
value.toFixed(2); //Output : 3.67 
```

**经验 2：**

```
var value = 3.0000;
value.toFixed(2); //Output : 3.00 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T22:25:28.733

You can't get the exact value. This is the fundamental problem with floating-point numbers.

You can force a fixed number of decimal numbers with `toFixed`:

```
alert(total.toFixed(2)); 
```

However, keep in mind that this will leave trailing zeroes, which you might not want. You can remove them with `.replace(/0+$/,'');`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T22:24:04.453

If you are trying to display this number, you could convert to a string with [toFixed(1)](http://www.w3schools.com/jsref/jsref_tofixed.asp). If you do this, keep track of the types because you can't then multiply the string with another number.

If you are going to use it in another computation you could truncate it to one decimal place:

```
Math.round( total * 10 ) / 10 
```

However, as pointed out by various people, the inexact value is just the way floating point numbers are.

See the questions linked in the comments for more good information.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-23T22:55:00.227

感谢[Dimitry](https://stackoverflow.com/users/27073/dimitry) ，我使用以下页面找到了答案：

[JavaScript 的浮点备忘单](http://floating-point-gui.de/languages/javascript/)

我决定使用以下类，因为我需要操作的确切值，并且它们与货币操作有关：

*   [https://github.com/MikeMcl/big.js](https://github.com/MikeMcl/big.js)
*   [https://github.com/MikeMcl/bignumber.js/](https://github.com/MikeMcl/bignumber.js/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-10-19T18:53:33.833

运算符“*”和“/”并不总是完美地工作，例如：

```
32.09 * 100 = 3209.0000000000005
100 / (1 / 32.09) = 3209.0000000000005 
```

**解决方案：**

使用小数的一种简单的解决方案是使用 .toFixed(2) 其中“2”是您想要的小数位数。但是您必须考虑到这会给您返回一个字符串，并且它会将值四舍五入。

```
45.6789.toFixed(2) —&gt; "45.68" as String 
```

其他最完整的选项是使用 .toLocaleString 将数字正确转换为您想要的国家代码。您可以设置一对参数以将小数值始终固定为 2。这也将返回一个字符串：

```
(654.3453).toLocaleString(
  'en-US',
  {minimumFractionDigits: 2, maximumFractionDigits: 2},
) —&gt; "654.35" as String 
```

如果你需要它作为一个数字，你可以把它包装成 Number( ... ) ：

```
Number((654.3453).toLocaleString(
  'en-US',
  {minimumFractionDigits: 2, maximumFractionDigits: 2},
)) —&gt; 654.35 as Number 
```

如果您只想要一个没有小数的数字，请使用其中一种方法来确保结果没有小数。

```
Math.trunc(32.09); —&gt; 32 as Number  
(32.09).toFixed(0); —&gt; “32” as String
32.09 | 0; —&gt; 32 as Number 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-05T13:51:55.937

这可以通过一个名为[decimal.js](http://mikemcl.github.io/decimal.js/)的外部库来很好地完成，该库为 JavaScript提供了一种`Decimal`类型。它也可用于 npm 上的 Node。*下面是一个使用 decimal.js 复制来自gustavomanolo*的原始示例的示例。

```
// Decimal type provided by decimal.js (http://mikemcl.github.io/decimal.js/)
var m1 = new Decimal( 2232.00 );
var percent = new Decimal( 10/100 );
var total = m1.mul(percent);
console.log( 'Total:', total );
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/7.2.3/decimal.min.js"></script>
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-23T22:25:42.370

`total.toFixed(2)` may help. But note that the `total` variable be will typecasted into a string.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-10T12:15:16.170

这是浮点数乘法的解决方案。这很简单，但对我有用。你可以用这个函数计算出数字有多少位小数。

```
function decimalPlaces(num) {
    var match = (''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
    if (!match) { return 0; }
    return Math.max(
        0,
        // Number of digits right of decimal point.
        (match[1] ? match[1].length : 0)
        // Adjust for scientific notation.
        - (match[2] ? +match[2] : 0));
} 
```

然后对于你的最终答案“total”你做

```
total = total.toFixed(decimalPlaces(a)+decimalPlaces(b)); 
```

a,b 是你的号码

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-13T15:26:19.540

我最终得到了以下解决方案：

```
function decimalmultiply(a, b) {
    return parseFloat((a * b).toFixed(12));
}

10.50*30.45=319.72499999999997
decimalmultiply(10.50,30.45)=319.725 
```

此方法返回一个**数字**，而不是**字符串**，不截断有效小数（最多 12 位）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-17T13:46:30.267

试试看嘛

```
var x = 0.07;
console.log((x+1)*100 - 100); 
```

现在，将 x 的值替换为其他值；-)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-23T22:43:07.787

你可以做

```
var total = +(percent*m1).toPrecision(15);

223.2 === total;          // true
223.2 === 0.1*2232.00;    // false 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-16T09:29:37.023

我找到了一个非常简单的解决方案。当`*`涉及十进制数时，运算符有点坏，但`/`运算符不是。乘法可以很容易地转换为除法，因为 a • b = a / (1/b)

```
function times(a, b) { return a/(1/b) } 
```

只需替换`percent * m1`为`times(percent, m1)`.

**更新：**它并不总是有效。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-04T21:16:40.927

如果您使用的是 Angular，我为此制作了一个组件。

用凉亭安装

```
bower install angular-floating-point --save 
```

用法

```
var pretty = floatingPoint.makePretty(6.1*6); 
```

> 这是一个演示-> [https://mattspaulding.github.io/angular-floating-point](https://mattspaulding.github.io/angular-floating-point)
> 这是源代码-> [https://github.com/mattspaulding/angular-floating-point](https://github.com/mattspaulding/angular-floating-point)

用下面的这个片段自己试试。

```
 angular.module('myApp', ['floatingPoint'])
  .controller('myCtrl', function ($scope, floatingPoint) {

      $scope.calculate = function () {
        $scope.result =$scope.num0*$scope.num1;
        $scope.prettyResult=floatingPoint.makePretty($scope.result)
      }

      $scope.num0=6.1;
      $scope.num1=6;
      $scope.calculate();

    }); 
```

```
<html>

<head>
  <title>My Angular App</title>
  <script src='//code.jquery.com/jquery-latest.min.js'></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://rawgit.com/mattspaulding/angular-floating-point/master/dist/angular-floating-point.min.js"></script>
</head>

<body ng-app="myApp" ng-controller="myCtrl">
    <div class="row" style="padding-top: 10px;text-align:center">
      <label>(try me) ==> </label>
      <input ng-model="num0" ng-change="calculate()" style="width:100px; height:30px">
      X
      <input ng-model="num1" ng-change="calculate()" style="width:100px; height:30px">
    </div>
    <div class="row" style="padding-top: 50px;">
      <div class="col-xs-6">
        <label style="float: right;">Ugly calculation:</label>
      </div>
      <div class="col-xs-6">
        <label style="float: left;">{{result}}</label>
      </div>
    </div>
    <div class="row" style="padding-top: 20px;">
      <div class="col-xs-6">
        <label style="float: right;"><span style="color:blue">Angular Floating Point</span> calculation:</label>
      </div>
      <div class="col-xs-6">
        <label style="float: left;">{{prettyResult}}</label>
      </div>
    </div>

</body>
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-02-27T18:12:59.113

我希望这会有所帮助......我花了一段时间才到达那里，但它有点奏效。

```
Number.prototype.CountDecimals = function () {
  if (Math.floor(this.valueOf()) === this.valueOf())
    return 0;
  return this.toString().split(".")[1].length || 0;
};

String.prototype.PadRight = function (fullLength, character) {
  if (String.isNullOrEmpty(this.toString()) || String.isNullOrEmpty(character))
    return this.toString();
  var value = this.toString();
  while (value.length < fullLength)
    value += character;
  return value;
};

var Multiply = function () {
  var maxNumberOfDecimals = 0;
  for (var i = 0; i < arguments.length; i++) {
    var decimals = arguments[i].CountDecimals();
    if (decimals > maxNumberOfDecimals)
      maxNumberOfDecimals=decimals;
  }
  var results = 1;
  for (var j = 0; j < arguments.length; j++) {
    var arg = arguments[j];
    arg = arg * parseFloat('1'.PadRight(maxNumberOfDecimals + 1, '0'));
    results = results * arg;
  }
  var divisor = parseFloat('1'.PadRight((maxNumberOfDecimals * arguments.length) +1, '0'));
  return results / divisor;
}; 
```

# html - 我的导航栏中的换行符在 Chrome 但不是 Firefox

> ID：14490500
> 
> 赞同：0
> 
> 时间：2013-01-23T22:23:00.140
> 
> 标签：html, css, google-chrome, navigation, line-breaks

这是有问题的页面：[http ://www.jacobsievers.com/sample.html](http://www.jacobsievers.com/sample.html)

在 Firefox 和 IE 中，我的导航栏显示正确，但如果您使用 Chrome 查看它，“图库”后会有一个换行符。我想知道是否有人可以帮助我弄清楚我需要做什么或更改我的代码。我的 CSS 中有 nav ul 或 nav li 的东西吗？

[![HTML](../Images/2782a4983f5ae75234ce8c91415a5df9.png)](https://i.stack.imgur.com/h7AR4.jpg)
[（来源：[jacobsievers.com](http://jacobsievers.com/html.jpg)）]

[![CSS](../Images/78d2c1bd49adb01ff6cee2e1ee672445.png)](https://i.stack.imgur.com/0Jf40.jpg)
[（来源：[jacobsievers.com](http://jacobsievers.com/css.jpg)）]

我不知道如何制作那些其他人放入代码的滚动框，所以这里有一些 jpgs 抱歉！谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:24:58.090

```
nav ul {
text-align: center;
width: 700px;
margin: auto;
word-spacing: 50px;
padding: 0;
font-size: 20px;
} 
```

Should fix it :)

EDIT:

```
 /************************ =Nav ************************/
 nav ul {
    text-align: center;
    width: 700px;
    margin: auto;
    padding: 0;
    font-size: 20px;
}
nav li {
    display: inline;
    margin: auto;
    position: relative;
    top:30px;
    margin-left: 100px;
}

nav li:first-child { margin-left: 0px; }

nav a {
    text-decoration: none;
    color: rgb(50, 140, 204);
    transition: background-color 2s;
    -moz-transition: background-color 2s;
    /* Firefox 4 */
    -webkit-transition: background-color 2s;
    /* Safari and Chrome */
    -o-transition: background-color 2s;
    /* Opera */
    transition: color 2s;
    -moz-transition: color 2s;
    /* Firefox 4 */
    -webkit-transition: color 2s;
    /* Safari and Chrome */
    -o-transition: color 2s;
    /* Opera */
}
nav a:hover {
    background-color: #E0EEEE;
    color: black;
} 
```

jsFiddle - [http://jsfiddle.net/andyjh07/cqZTV/](http://jsfiddle.net/andyjh07/cqZTV/)

# android - TextView为空时在Layout中调整TextView

> ID：14490506
> 
> 赞同：0
> 
> 时间：2013-01-23T22:23:25.257
> 
> 标签：android, center, textview

我有一个基本单元格中`ListView`有两个`TextViews`单元格，我希望s在另一个单元格中没有任何文本时`TextView`居中到中间。`Layout``TextView`

这是我当前的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:minHeight="80dp"
    android:orientation="vertical"
    android:gravity="center_vertical"
    android:paddingLeft="20dp"
    android:paddingRight="20dp" >

    <TextView android:id="@+id/titleTextView"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:textSize="16sp"/>

    <TextView android:id="@+id/detailsTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="2dp"
        android:layout_below="@id/titleTextView"
        android:textSize="12sp"/>

</RelativeLayout> 
```

我使用 a 是`RelativeLayout`因为我希望在添加更多元素时使用它，但我想先弄清楚这部分。`TextView`切换到 LinearLayout 对调整s没有任何影响。

我是否必须以编程方式调整视图？如果是这样，我应该如何处理？从布局中删除一个视图（这需要一个`LinearLayout`，对吧）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:25:31.043

Simply make the `TextView` "gone" when it is empty, when a view is "gone" it has no effect on the layout it is in, thus the other `TextView` would center because of the gravity property you have added.

```
textView.setVisibility(View.GONE); 
```

# linux - How can I delete a newline character in bash script?

> ID：14490513
> 
> 赞同：3
> 
> 时间：2013-01-23T22:23:48.297
> 
> 标签：linux, bash

I have a little problem with a small script. The textfile has a lot of entries like:

```
permission-project1-admin
permission-project2-admin
.... 
```

The script looks like this (indeed, it is an awful one but still helps me):

```
#!/bin/bash
for i in $(cat adminpermission.txt); do
    permission=$(echo $i | cut -f1)

printf "dn:$permission,ou=groups,dc=domain,dc=com \n"
printf "objectclass: groupOfUniqueNames \n"
printf "objectclass: top \n"
printf "description: \n"
printf "cn:$permission \n\n"
done 
```

The output looks fine, but because the textfile has a newline character at the end, the first line of printf is devided into two lines like:

```
dn:permission-project1-admin
,ou=groups,dc=domain,dc=com
objectclass: groupOfUniqueNames
objectclass: top
description:
cn:permission-project1-admin 
```

My question is, how I can eliminate the newline character between the first two lines?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:29:34.733

[首先正确地做。](http://mywiki.wooledge.org/BashFAQ/001)

```
while read permission rest
do
  ...
done < adminpermission.txt 
```

此外，heredocs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:32:21.790

尝试：

```
$(echo $i | tr -d "\n" | cut -f1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:37:57.943

您是否检查过您的是否`adminpermission.txt`包含 DOS 样式的回车符？您的代码将去除换行符，但根据您查看输出的方式，回车符可能会像您描述的那样中断行。

你可以试试

```
mv adminpermission.txt backup.txt
tr -d '\r' < backup.txt > adminpermission.txt 
```

转换为 UNIX EOL，然后再次运行您的脚本。

# c# - .Net Webform 丢失数据

> ID：14490515
> 
> 赞同：0
> 
> 时间：2013-01-23T22:23:50.233
> 
> 标签：c#, .net, object, postback, viewstate

我在让我的页面保持状态时遇到问题。默认情况下启用视图状态，但每次单击按钮时都会重置表单。这是我的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {

        Levels loadGame = new Levels(currentGame);

        int [] gameNums =  loadGame.getLevelNums();
        int inc = 1;
        foreach(int i in gameNums){

            if (i != 0)
            {
                TextBox tb = (TextBox)FindControl("TextBox" + inc);
                tb.Text = i.ToString();
                tb.Enabled = false;
            }
            else {
                //leave blank and move to next box
            }

            inc++;
        } 
```

这是初始负载

```
protected void NormalButton_Click(object sender, EventArgs e)
    {

        clearBoxes();//clear boxes first
        setCurrentGame("normal");//setting to normal returns normal answers
         Levels loadGame = new Levels(returnCurrentGame());

        int[] gameNums = loadGame.getLevelNums();
        int inc = 1;
        foreach (int i in gameNums)
        {

            if (i != 0)
            {
                TextBox tb = (TextBox)FindControl("TextBox" + inc);
                tb.Text = i.ToString();
                tb.Enabled = false;
            }
            else
            {
                //leave blank and move to next box
            }

            inc++;
        }

    } 
```

单击此按钮可更改不同框中的数字。

```
 protected void Button1_Click(object sender, EventArgs e)
    {

    } 
```

然后我有这个空按钮，但每次我点击它时，它都会重置表单，即使我还没有设置它来做任何事情。我希望盒子保持不变，我也想让物体保持活力。我不确定我错过了什么，但请指出我正确的方向。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:26:38.823

每次加载页面时都会发生 Page_Load 事件，包括事件驱动的回发（按钮单击等）。

看起来初始化代码在您的 Page_Load 中，因此当您单击该按钮时，它会再次运行。

有两种选择：

*   将您希望仅在第一次加载时发生的所有事情放在 if 语句中：
*   将您的初始化移动到 Page_Init。

第一个选项的代码示例：

```
 protected void Page_Load(object sender, EventArgs e)
    {
      if(!Page.IsPostBack)  // Teis is the key line for avoiding the problem
      {
        Levels loadGame = new Levels(currentGame);

        int [] gameNums =  loadGame.getLevelNums();
        int inc = 1;
        foreach(int i in gameNums){

            if (i != 0)
            {
                TextBox tb = (TextBox)FindControl("TextBox" + inc);
                tb.Text = i.ToString();
                tb.Enabled = false;
            }
            else {
                //leave blank and move to next box
            }

            inc++;
        }
      }
     } 
```

另外，推荐阅读：[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

# asp.net - Boundfield 未从 LINQ 查询返回计数

> ID：14490516
> 
> 赞同：0
> 
> 时间：2013-01-23T22:23:54.180
> 
> 标签：asp.net, vb.net, linq

我有一个分组 LINQ 查询，其中包含我绑定到 gridview 的计数摘要行，但 gridview 中的计数字段仅显示“System.Data.DataRow []”

我在这里做错了什么？谢谢！

aspx：

```
 <asp:BoundField DataField="Service_Name" HeaderText="Impacted services"/>
 <asp:BoundField DataField="Fieldname" HeaderText="Count"/> 
```

VB代码：

```
 Dim Services = From Lines In dtMain _
 Where Lines.Field(Of String)("ULTIMATE_PARENT_NAME") = lstUPs.SelectedItem.ToString _
 Group By Parent_Name = Lines.Field(Of String)("ULTIMATE_PARENT_NAME"), _
 Service_Name = Lines.Field(Of String)("THIRD_PARTY_SERVICE_CLEAN") _
 Into Fieldname = Group, Count()
 grdOuterGridView.DataSource = Services
 grdOuterGridView.DataBind() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:39:14.617

我不是该语法的专家（我使用扩展方法），但在我看来，它`Fieldname`被分配了 value `Group`，或者被分组的行集合`Parent_Name`和`Service_Name`。也许您需要为结果定义一个字段名称`Count()`？

埃塔：明白了。你应该说`Group.Count()`，不是`Group, Count()`。

# jquery - jQuery: hover link show/hide div

> ID：14490519
> 
> 赞同：0
> 
> 时间：2013-01-23T22:24:09.170
> 
> 标签：jquery, html, hover

This seems to be a beginners question (I've googled a lot since I am a beginner at JavaScript) but I still can't get it to work. Could someone please help me?

I have a list menu with numbered links. Each links has it's own submenu that I want to show/hide on mouse over. The link and the submenu are connected in the way that they have similar ID.

Like this...

Link:

```
    a id=815 class="menuItem" href="/default____815.aspx">

```

Hidden div:

```
    div id="subMenudiv815" class="HoverTopSubMenuBlock" style="display:none">

```

Since I have several menuItems I've tried to loop a function that's working when you specify the divs manually. This is what I've tried with:

```
var j = [66,815,1006,9581,1239,1206,816];
var menu = [];
var hoverdiv = [];
for (var i = 0; i < j.length; i++) {
    menu[i] = "#"+j[i];
    hoverdiv[i] = "#subMenudiv" + j[i];
    $(rubrik[i]).hover(function() {
        $(hoverdiv[i]).show();
    }, function() {
        $(hoverdiv[i]).delay(1000).hide(0);
    });
} 
```

Ive tried to use the each()-function but that didn't help me much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:28:34.313

You don't need jquery to make a dropdown menu. You can use just html and css.

**HTML**

```
<ul id="nav">
    <li>
        <a href="#" title="">Link 1</a>
    </li>

    <li>
        <a href="#" title="">Link 2</a>
        <ul>
            <li><a href="#" title="">Sub Link 1</a></li>

            <li><a href="#" title="">Sub Link 2</a></li>
        </ul>
    </li>
</ul> 
```

**CSS**

```
#nav {
    margin: 0px;
    padding: 0px;
    list-style: none;
}

#nav > li {
    margin: 0px;
    padding: 0px;
    display: inline-block;
    position: relative;
}

#nav > li > a {
    padding: 0 10px;
    display: inline-block;
    background: #cccccc;
}

#nav > li:hover > a {

}

#nav > li > ul {
    display: none;
    position: absolute;
    width: 200px;
}

#nav > li:hover > ul {
    display: block;
}

#nav > li > ul > li { 
}
#nav > li > ul > li > a {
    display: block;
    background: #cccccc;   
    padding: 0 10px;
}

#nav > li > ul > li:hover > a {

} 
```

**[Demo](http://jsfiddle.net/BV9n6/)**

Here are some information on how to do this:

*   [CSS drop down menu](https://stackoverflow.com/questions/2188772/css-drop-down-menu)
*   [http://www.cssplay.co.uk/menus/dd_valid.html](http://www.cssplay.co.uk/menus/dd_valid.html)
*   [http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/](http://csswizardry.com/2011/02/creating-a-pure-css-dropdown-menu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:33:33.953

我看到的几点：

1.  在您的锚链接中，您需要在 id 值周围加上引号（ id="815" 而不是 id=815 ）

2.  如果要将它们放在变量中并通过调用该变量（ menu[i] = $("#"+j[i]); ）来重用它们，则需要将 jQuery $ 放在选择器周围

3.  我不知道你的 rubrik[i] 来自哪里，但是如果你试图根据它在 dom 中的位置调用一个元素，你需要使用 ":eq(x)" 选择器。就像如果你想用 HoverTopSubMenuBlock 类来抓取第三个元素，你可以用 $(".HoverTopSubMenuBlock:eq(3)") 来抓取它

但如果我是你，我会这样做：

```
$(".menuItem").hover(function(){
    var id = $(this).attr('id');
    $("#subMenudiv" + id).show();
},function(){
    var id = $(this).attr('id');
    $("#subMenudiv" + id).delay(1000).hide();
}); 
```

我认为没有所有的循环和东西就可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:56:25.867

感谢所有的帮助！

以为一旦我的问题得到回答，我会收到一封电子邮件通知，所以我继续尝试，并找到了解决方案。最终得到与 MG_Bautista 建议的几乎相同的代码。

```
$('a.menuItem').hover(function(){
    $('#subMenudiv' + this.id).show();
}, function(){
    $('#subMenudiv' + this.id).delay(1000).hide(0);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T22:41:38.803

尝试这个...

```
$('a.menuItem').hover(function(){
    $('#subMenudiv' + this.id).show();
}, function(){
    $('#subMenudiv' + this.id).delay(1000).hide(0);
}); 
```

请参阅此[示例](http://jsfiddle.net/f3NM3/3/)

问候。

# postgresql - "like" query on postgres

> ID：14490521
> 
> 赞同：0
> 
> 时间：2013-01-23T22:24:15.537
> 
> 标签：postgresql

I have this method that does a fuzzy search for a name on a sqlite3 database, meaning that if you search the letter "j" it will return any entry that has a "j" anywhere: "John" and "Vijay" would both match. However, when I push the rails app to Heroku, the application uses postgres, and the query's no longer working. According to this SO answer [postgres full text search like operator](https://stackoverflow.com/questions/4588717/postgres-full-text-search-like-operator), postgres does use the LIKE operator. Can anyone see what I need to change to make it work on postgres?

```
def getEmployeeByName

respond_with Employee.select("id, firstname, lastname, position").where("UPPER(firstname || ' ' || lastname) LIKE ('%' || ? || '%')", params[:query])

end 
```

Note, this method is an sql query written with Ruby on Rails query helpers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:34:27.743

我将 LIKE 更改为 ILIKE 以使搜索不区分大小写。问题解决了。

# javascript - 让 cookie 在一小时内过期

> ID：14490526
> 
> 赞同：0
> 
> 时间：2013-01-23T22:24:28.580
> 
> 标签：javascript, cookies

我有一些我想在 1 小时内过期的 cookie 代码，代码是：

```
 function createCookie(name,value,days) {
    if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*60*1000));
    var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
    }

    function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
    }

    sWhere = "http://google.com";

    if(!readCookie('viewcheck')){
    createCookie('viewcheck',1,1);
    } else {
    window.location = sWhere;
    } 
```

我怎样才能让cookie在一小时内过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:27:07.890

您的函数使用的`days`参数仅更改分钟，而不是天，因为`60*1000`60 秒（以毫秒为单位）。您应该将该参数重命名为`minutes`，然后您可以很容易地看到您只需将小时数乘以 60。

# objective-c - 标签不会标注

> ID：14490531
> 
> 赞同：0
> 
> 时间：2013-01-23T22:24:43.470
> 
> 标签：objective-c, label, outlet

我要疯了！我只是不明白。当我启动第二个窗口时，会在第二个窗口控制器中调用一个方法。该方法进行了大量计算，并应通过插座将一些结果放入标签中。标签保持为空。我不知道如何使它工作。

我的 AppDelegate.m：

```
#import "AppDelegate.h"
#import "ToDoItem.h"
#import "ResultWindowController.h"

@implementation AppDelegate

- (IBAction)pushRun:(id)sender {

    if (rwc)
    {
        [rwc close];
    }
    rwc = [[ResultWindowController alloc] init];
    [rwc calculateResults];//add observer
    [rwc setShouldCascadeWindows:NO]; //window re-opens at the same position
    [rwc showWindow:self];
}
@end 
```

我的 ResultWindowController.h：

```
#import <Cocoa/Cocoa.h>

@interface ResultWindowController : NSWindowController
{

}
@property (weak) IBOutlet NSTextField *outputResultAverageValue;
@property (weak) IBOutlet NSTextField *outputResultToleranceValue;

-(void)calculateResults;

@end 
```

结果窗口控制器.m：

```
-(void)awakeFromNib
{
    NSString *initial =@"-";
    [_outputResultAverageValue setStringValue:initial];
    [_outputResultToleranceValue setStringValue:initial];
}

- (void)calculateResults
{
double resultAverageValue = 0, resultToleranceValue = 0;

 //calculations
 for-loop{

   resultAverageValue = (maxresult + minresult)/2;
   resultToleranceValue = (maxresult - minresult)/2;
 }

NSLog(@"resultaverage is:%f", resultAverageValue);
[_outputResultAverageValue setDoubleValue:resultAverageValue];
[_outputResultToleranceValue setDoubleValue:resultToleranceValue];
} 
```

`NSLog`给了我想要在标签中显示的值。我也可以使用该`awakeFromNib`方法初始化我的标签。我有设计失败吗？我需要确保在`calculateResults`方法完成后设置标签吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:43:44.737

1.  你能具体说明你为什么使用弱吗？

2.  尝试使用：

    ```
    [self._outputResultAverageValue setDoubleValue:resultAverageValue];
    [self._outputResultToleranceValue setDoubleValue:resultToleranceValue]; 
    ```

    另外，你连接插座了吗？

3.  ViewControllers 的想法是从模型请求计算或逻辑，然后将其提交给视图。所以，我不会真的把它称为设计流程，但最好遵循 iOS 中的模型视图控制器的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:59:43.247

我希望这会奏效，但要做到：

。H

```
@property (nonatomic, strong) IBOutlet UILabel *averageValueLabel; 
```

.m

```
-(void)calculateResults {
     //your stuff

     averageValueLabel.text = [NSString stringWithFormat:@"%g", resultAverageLabel];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T11:24:31.727

我终于找到了我的问题。我将插座与`ResultWindowController`xib 中的对象绑定在一起。我将绑定更改为`File's Owner`，它现在可以工作了。

# javascript - Fusion table query : zoom on a marker from an external link

> ID：14490535
> 
> 赞同：0
> 
> 时间：2013-01-23T22:24:59.267
> 
> 标签：javascript, google-maps, google-fusion-tables

I'm trying to create links from a text to a marker in a google fusion map. More precisely, I want the map to refresh and zoom on the location selected.

A picture will be easier to understand: [http://projeteurope.free.fr/](http://projeteurope.free.fr/) For example, if you click on "Akrame" on the right side of the page, the map should zoom on the point (which already exist in the fusion table, and is 19 Rue Lauriston, 75016 Paris)

I've look at different topics and websites, but I don't understand how to do that (I'm a total beginner in javascript) [Fusion Table + Google Maps](https://stackoverflow.com/questions/9428323/fusion-table-google-maps) or [http://alamatku.com/cari?query=UPS&area=jakarta](http://alamatku.com/cari?query=UPS&area=jakarta) or [Google Fusion Tables With Maps - Link Table field to Map Info Window](https://stackoverflow.com/questions/11748211/google-fusion-tables-with-maps-link-table-field-to-map-info-window)

I just want the map to zoom on a specific market, not to create a new layer with only the marker.

Many thanks if you have any clues! Robin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:51:20.693

您可以使用[GViz（谷歌可视化库）](https://developers.google.com/chart/interactive/docs/reference#Query)查询融合表并在标记上放大地图。

代码：

```
function changeQuery(term) {
  layer.setOptions({query:{select:'Latitude', /* was 'Latitude,Longitude', used to work... */
                           from:FT_TableID,
                           where:"Nom contains "+term
                           }

 });

  // zoom and center map on query results
  //set the query using the parameter
  var queryText = encodeURIComponent("SELECT 'Latitude', 'Longitude' FROM "+FT_TableID+" WHERE 'Nom' contains '"+term+"'");
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);

  //set the callback function
  query.send(zoomTo);
}

function zoomTo(response) {
if (!response) {
  alert('no response');
  return;
}
if (response.isError()) {
  alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
  return;
} 
  FTresponse = response;
  //for more information on the response object, see the documentation
  //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
  numRows = response.getDataTable().getNumberOfRows();
  numCols = response.getDataTable().getNumberOfColumns();

  var bounds = new google.maps.LatLngBounds();
  for(i = 0; i < numRows; i++) {
      var point = new google.maps.LatLng(
          parseFloat(response.getDataTable().getValue(i, 0)),
          parseFloat(response.getDataTable().getValue(i, 1)));
      bounds.extend(point);
  }
  // zoom to the bounds, if you have only one result, 
  // you may want to do a map.setCenter; map.setZoom to specify the behavior
  map.fitBounds(bounds);
} 
```

[示例/概念证明](http://www.geocodezip.com/v3_FusionTables_GViz_zoom2MarkerA.html)

# sql - How to restore a .bak file on a remote Win7 system, which I have limited permissions at?

> ID：14490539
> 
> 赞同：0
> 
> 时间：2013-01-23T22:25:19.720
> 
> 标签：sql, windows-7, database-backups, sql-server-2008r2-express

We have an old project which is planned for an upgrade, and now as a seed, we took the backup of the whole database which is in a remote location. I saved it in my remote desktop, which I have limited permissions. I tried to use SQL Server Management Studio 2008 R2, but as there are no database in the newly created (remote) system, I cannot actually right click on the databases and restore the `.BAK` file.

Is there any other software, or any other method I can use to restore the file? I am guessing this is a pretty small work, but because of the complexity in permissions and connectivity, it's messed up. I cannot even compare to another blogs, I feel this is unique. Please suggest a workaround.

ps., I have no clue which SQL Server version they used to create that backup. The new system does not have Visual Studio, or anything else, but the SQL Server Management Studio 2008 R2 Express x64 version.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:31:34.833

如果您可以获得安装 SQL Server 的适当权限，那么 SQL Server 2012 Express 应该可以恢复数据库并从中读取，前提是数据库的数据少于 10GB。

SQL Server 2008 R2 Express 也有 10GB 的数据限制。早期版本允许的数据较少。

不要将小于 10GB 的备份文件与小于 10GB 的数据混淆。可以压缩备份文件。

如果除了从恢复的数据库中读取一些数据之外还要使用 SQL Server Express，您应该了解它的局限性，它可能不适合所有工作负载。

SQL Server 2012 LocalDB 也可以在低权限/大量的箍跳环境中发挥作用，尽管它在安装时需要管理员权限。请注意，它仍然具有与 Express 版本类似的限制，请确保在生产中使用它之前了解这些限制。

# html - 谷歌浏览器喜欢css中的关闭按钮行为

> ID：14490540
> 
> 赞同：1
> 
> 时间：2013-01-23T22:25:25.360
> 
> 标签：html, css, google-chrome, button

您将如何使用 css 复制 google chrome 中标签的行为？

我遇到的一个问题是关闭按钮 (x)

粗略的谷歌搜索说你不应该在锚内有一个按钮，但如果是这样的话，我不知道如何复制这种行为。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:34:43.630

我将假设您需要两个单独的答案来回答您的问题：

*   如何正确嵌套元素？
*   您如何执行关闭操作？

让我们从**嵌套元素**开始。我选择将我的选项卡放在 a 中`ul`，并将每个选项卡都`li`放在该列表中。关闭按钮是一个`a`浮动到右侧*的*标签`li`。

```
<ul>
    <li>Tab 1 <a>x</a></li>
    <li>Tab 2 <a>x</a></li>
    <li>Tab 3 <a>x</a></li>
    <li>Tab 4 <a>x</a></li>
    <li>Tab 5 <a>x</a></li>
</ul> 
```

（我强烈建议你给他们所有合适的类来做你想做的事情，但是对于这种情况，我使用了最少的代码来保持它的简洁和易于阅读。）

接下来，我们将使用 JavaScript**执行关闭操作。**

我能够为您创建以下 jsFiddle 来演示这两点：

[原来的jsFiddle](http://jsfiddle.net/exHza/4/)

**编辑：** [修改 jsFiddle](http://jsfiddle.net/exHza/6/)

本质上，代码的工作方式如下：

```
$('a').click(function() {
    $(this).closest('li').animate({padding:0, margin:0, width: 0}, function () {  
        $(this).closest('li').hide();   
    });
}); 
```

当您单击`a`标记时，这是我制作的 x 按钮（类似于 chrome 选项卡），它通过将填充、边距和宽度更改为 0 来动画列表项（选项卡列表，浮动到左侧） .

从技术上讲，由于我将 li 设置为边界框以调整框大小，因此我根本不需要在动画函数中使用 padding:0。

动画完成后，我完全隐藏了列表项。（如果我想摆脱它，我什至可以在那时完全删除它，但我想让你看看我在做什么。）

一些额外的收获：

*   您可以在 jQuery 中的几乎任何项目上设置点击事件，但是如果某些移动设备不是`a`标签，它们就会变得很挑剔。
*   您是正确的，您不应该在锚标记内放置一个按钮，但是将两个锚标记或一个按钮和一个锚标记放在一个列表项中是可以的。

设置活动选项卡和使用 % 作为最大宽度等其他一切都应该非常明显，但如果您需要更多帮助或澄清，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:18:21.717

这是一种没有 javascript 代码的解决方案，仅使用 css。不知道是否是最好的解决方案，但知道这种东西的存在肯定很有趣。

这是[Js 小提琴](http://jsfiddle.net/eJMfd/6/)

HTML：（你应该使用`<li>`我猜最适合组织）

```
<div class="background" id="background">
    <i class="icon-home"></i>
    <div class="text">Tab name 
        <div class="close-button">
            <a href="#background" >x</a>
        </div>
    </div>
</div> 
```

然后是 CSS 魔法：

> @import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');
> 
> #background{ 背景颜色：#d8d8d7; 高度：30px；不透明度：1；显示：表格单元格；垂直对齐：中间；过渡：不透明度 0.5s；-moz 过渡：不透明度 0.5 秒；/* Firefox 4 */ -webkit-transition: opacity .5s; /* Safari 和 Chrome */ -o-transition: opacity .5s; /*歌剧 */ }
> 
> #背景：目标{不透明度：0；}
> 
> .text{ 显示：内联块；}
> 
> .close-button{ 文本对齐：中心；宽度：20px；高度：20px；显示：内联块；-webkit-border-radius：50%；-moz-边界半径：50%；边界半径：50%；}
> 
> .close-button:hover{ 背景颜色:#ec8e92; }
> 
> .close-button:active{ 背景颜色:#cc7d80; }
> 
> .close-button a{ 文字装饰：无；颜色：#868687; }
> 
> .close-button a:hover{ 颜色:#FFFFFF; }

希望它有所帮助，或者至少打开你的 CSS 视野。

干杯。

# c# - 查找下一个/上一个项目并设置为当前项目

> ID：14490541
> 
> 赞同：0
> 
> 时间：2013-01-23T22:25:26.887
> 
> 标签：c#, linq, collections

全部，

我有一个绑定到某些东西的列表。

假设我的当前索引为 i。现在，我从列表中删除了几个项目（可能彼此相邻，也可能不相邻）。如果我想将当前索引重置为删除后的下一个项目（或者如果没有下一个项目，那么最后一个项目，假设还有任何项目），那么最好的方法是什么？很多枚举。

基本上，我坚持的是，似乎我需要在执行删除之前弄清楚这一点并在某处引用新对象，但如果不枚举几个列表并让我的应用程序陷入困境，我似乎无法做到这一点。

```
List<Object> MyCoolList;
List<Object> ItemsIWillBeDeleting;
Object CurrentItem;

//For simplicity, assume all of these are set and known for the following code
int i = MyCoolList.IndexOf(CurrentItem);
Object NewCurrentItem = null;
if (MyCoolList.Any(a => MyCoolList.IndexOf(a) > i && !ItemsIWillBeDeleting.Any(b => b==a)))
{
    NewCurrentItem = MyCoolList.First(a => MyCoolList.IndexOf(a) > i && !ItemsIWillBeDeleting.Any(b => b==a));
    ItemsIWillBeDeleting.ForEach(a => MyCoolList.Remove(a));
    CurrentItem = NewCurrentItem;
}
else (if MyCoolList.Count > MyCoolList.Count)
{
    NewCurrentItem = MyCoolList.Last(a => !ItemsIWillBeDeleting.Any(b => b==a))
    ItemsIWillBeDeleting.ForEach(a => MyCoolList.Remove(a));
    CurrentItem = MyCoolList.Last();
}
else
{
    MyCoolList.Clear(); //Everything is in MyCoolList is also in ItemsIWillBeDeleting
    CurrentItem = null;
} 
```

我确信有更好的方法可以用 Linq 做到这一点，但我很难找到它。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:20:40.463

```
private ICollection<MyCoolClass> _someCollection

public void DeleteAndSetNext(IEnumerable<MyCoolClass> IEDelete)
{
    bool boolStop = false;
    MyCoolClass NewCurrent = _someCollection.FirstOrDefault(a =>
        {
            if (!boolStop) boolStop = IEDelete.Contains(a);
            return boolStop && !IEDelete.Contains(a);
        });
    foreach (MyCoolClass cl in IEDelete)
    {
        _someCollection.Remove(a);
    }
    CurrentMyCoolClass = NewCurrent ?? _someCollection.LastOrDefault();
}

MyCoolClass CurrentMyCoolClass
{
    get;
    set;
} 
```

# ios - Extract PID of all iOS processes running

> ID：14490547
> 
> 赞同：1
> 
> 时间：2013-01-23T22:25:52.543
> 
> 标签：ios, logging, process, pid

> **Possible Duplicate:**
> [Can we retrieve the applications currently running in iPhone and iPad](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad)

I am searching for a way to grab a list of all processes running on an iDevice and their respective PID's.

I want to run this app on my device and it will show a dynamic list of processes running.

I couldn't find a way to do this. I've tried looking at iOS API's, and had a look into the files:

```
<mach/mach.h>
<sys/utsname.h>
<sys/resource.h>
<sys/syslog.h> 
```

I have seen apps that can do exactly this (dynamically showing PID and process names). Any tips and direction would be much appreciated!

Note: I can extract the process-ID of my own app on the device through 'sys/utsname.h' but not any other app

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:25:30.000

找到答案了，谢谢Black Frog。不知道为什么我以前找不到线程。

我已经更新了链接中的代码以在 Xcode 4.5 中使用 ARC 和 iOS6

```
int mib[4] = {CTL_KERN, KERN_PROC, KERN_PROC_ALL, 0};
size_t miblen = 4;

size_t size;
int st = sysctl(mib, miblen, NULL, &size, NULL, 0);

struct kinfo_proc * process = NULL;
struct kinfo_proc * newprocess = NULL;

do {

    size += size / 10;
    newprocess = realloc(process, size);

    if (!newprocess){
        if (process){
            free(process);
        }
    }

    process = newprocess;
    st = sysctl(mib, miblen, process, &size, NULL, 0);

} while (st == -1 && errno == ENOMEM);

if (st == 0){
    if (size % sizeof(struct kinfo_proc) == 0){
        int nprocess = size / sizeof(struct kinfo_proc);

        if (nprocess){

            NSMutableArray * array = [[NSMutableArray alloc] init];

            for (int i = nprocess - 1; i >= 0; i--){

                NSString * processID = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_pid];
                NSString * processName = [[NSString alloc] initWithFormat:@"%s", process[i].kp_proc.p_comm];

                NSDictionary * dict = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:processID, processName, nil]
                                                                    forKeys:[NSArray arrayWithObjects:@"ProcessID", @"ProcessName", nil]];
                [array addObject:dict];
            }

            free(process);
            NSLog(@"System pid: %@", array);
        }
    }
} 
```

# jaxb - 将 JAXB @XmlValue 与 @XmlElementRef 一起使用

> ID：14490548
> 
> 赞同：3
> 
> 时间：2013-01-23T22:25:53.180
> 
> 标签：jaxb

是否可以在使用 @XmlElementRef 注释的引用对象上使用 @XmlValue 注释？目标是生成以下 XML 输出：

```
 <foo>
       <bar>Blah</bar>
    </foo> 
```

给定以下示例 JAXBContext 初始化正在引发 NPE：在 com.sun.xml.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:128)

**Foo 类**

```
 @XmlRootElement(name = "foo")
     public class Foo
     {
         @XmlElementRef
         private Bar bar;
     } 
```

**酒吧班**

```
 @XmlRootElement(name = "bar")
     public class Bar extends BarBase // BarBase is annotated with @XmlTransient
     {
         @XmlValue
         private String value;
     } 
```

有没有什么方法可以根据实现来实现所需的输出？我一直在研究适配器，但没有成功实施。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T00:42:34.857

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**已确认 JAXB RI 问题**

我已经能够确认您在 JAXB RI 中看到的问题。我得到以下堆栈跟踪：

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(PropertyFactory.java:113)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.<init>(ClassBeanInfoImpl.java:166)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(JAXBContextImpl.java:494)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:311)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:126)
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1148)
    at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:248)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:235)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:445)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:637)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:584)
    at forum14490548.Demo.main(Demo.java:10) 
```

这是[**JAXB RI**](http://jaxb.java.net/)中的一个错误，我建议在以下链接中打开票证：

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

**选项 #1 - 使用带有 JAXB RI 的备用映射**

以下映射似乎适用于 JAXB RI（使用`@XmlElement`而不是`@XmlElementRef`.

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "foo")
public class Foo
{
    @XmlElement
    private Bar bar;
} 
```

**选项 #2 - 使用备用 JAXB (JSR-222) 提供程序**

您的映射是正确的。如果您使用另一个[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)提供程序，例如 EclipseLink MOXy，您将不会收到此异常。下面的链接解释了如何使用 MOXy 作为您的 JAXB 提供程序：

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T04:08:11.390

@blaise - 作为一种解决方法，在类中创建一个可选的`@XmlAttribute`或`@XmlElement``Bar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T10:13:00.263

我来这里是为了完全相同的问题。这个问题仍然存在`1.8.0_77`。

`user3345125`如前所述，我绕过了一个额外的虚拟属性。

```
@XmlAttribute
public String getNothing() {
    return null;
} 
```

对于任何想追查的人。[https://github.com/javaee/jaxb-v2/issues/1027](https://github.com/javaee/jaxb-v2/issues/1027)

# winforms - 为与自身相关的实体创建正确的模型

> ID：14490550
> 
> 赞同：0
> 
> 时间：2013-01-23T22:25:59.563
> 
> 标签：winforms, entity-framework-5

我的模型中有以下类 - 但我无法让它以我期望的方式创建表。

```
public class Task
{
    public int Id { get; set; }
    public string Description { get; set; }
    private readonly BindingList<Dependancy> _dependancies = new BindingList<Dependancy>();
    public virtual BindingList<Dependancy> Dependancies
    {
        get { return _dependancies; }
    }
}

public class Dependancy
{
    public int Id { get; set; }
    [Required]
    public virtual Task Task { get; set; }
    [Required]
    public virtual Task NeededTask { get; set; }
} 
```

我希望依赖表只包含以下字段；

```
Id,
Task_Id,
NeededTask_Id 
```

但是生成的包含一个额外的 Task_Id1 字段

我在上下文类中尝试了以下覆盖；

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      modelBuilder.Entity<Dependancy>().HasRequired( p=>p.Task ).WithMany().WillCascadeOnDelete(false);
      modelBuilder.Entity<Task>().HasMany<Dependancy>(c => c.Dependancies).WithOptional().WillCascadeOnDelete(false);
    } 
```

但仍会创建不需要的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:00:49.330

实体框架不知道这一点`Dependancy.Task`并且`Task.Dependancies`是配对的，因此它创建了两个外键字段，一个用于两个关联。您必须告诉 EF 这两个关联是对应的：

```
modelBuilder.Entity<Dependancy>().HasRequired(p => p.Task)
    .WithMany(t => t.Dependancies).WillCascadeOnDelete(false); 
```

另一个关联可以定义为

```
modelBuilder.Entity<Dependancy>().HasOptional(p => p.NeededTask)
    .WithMany().WillCascadeOnDelete(false); 
```

# hibernate - Hibernate Postgres could not deserialize

> ID：14490552
> 
> 赞同：0
> 
> 时间：2013-01-23T22:26:16.083
> 
> 标签：hibernate, postgresql

```
public List<Marki> getMarki()
      {
        List<Marki> markiList = null;
        try {
            Session session = HibernateSession.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            Query q = session.createQuery("from Marki ");
            if ( q != null ) {
                markiList = ( List<Marki> ) q.list();
            }
            // session.getTransaction().commit();
        } catch ( Exception e ) {
            e.printStackTrace();
        }
        return markiList;
 } 
```

Mapping

```
<hibernate-mapping>
    <class name="bazaMap.Marki" table="marki" schema="public">
        <id name="id" type="int">
            <column name="id" />
            <generator class="assigned" />
        </id>
        <property name="marka" type="serializable">
            <column name="marka" unique="true" />
        </property>
        <set name="modeles" inverse="true">
            <key>
                <column name="markaid" not-null="true" />
            </key>
            <one-to-many class="bazaMap.Modele" />
        </set>
    </class>
</hibernate-mapping>

N

CREATE TABLE marki
(
  id serial NOT NULL,
  marka character varying(32)[],
  CONSTRAINT glowny PRIMARY KEY (id),
  CONSTRAINT marki_marka_key UNIQUE (marka)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE marki
  OWNER TO postgres; 
```

> FO: Hibernate: select marki0_.id as id3_, marki0_.marka as marka3_ from public.marki marki0_ INFO: could not read column value from result set: marka3_; could not deserialize SEVERE: org.hibernate.type.SerializationException: could not deserialize at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:217) at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:240) at org.hibernate.type.SerializableType.fromBytes(SerializableType.java:82) at org.hibernate.type.SerializableType.get(SerializableType.java:39) at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:163) at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:154) at org.hibernate.type.AbstractType.hydrate(AbstractType.java:81) at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2096) at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1380) at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1308) at org.hibernate.loader.Loader.getRow(Loader.java:1206) at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:580) at org.hibernate.loader.Loader.doQuery(Loader.java:701) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) at org.hibernate.loader.Loader.doList(Loader.java:2220) at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) at org.hibernate.loader.Loader.list(Loader.java:2099) at org.hibernate.hql.classic.QueryTranslatorImpl.list(QueryTranslatorImpl.java:912) at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172) at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121) at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79) at DataFetcher.getMarki(DataFetcher.java:40)

1.All the Mappings code were generated by NetBeans. Any ideas what could be wrong or even better - how to fix it?

blah "Your post does not have much context to explain the code sections; please explain your scenario more clearly."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:39:34.393

我敢打赌这是你的问题：

```
marka character varying(32)[], 
```

你可能不想要一个字符*数组*。这可能是你想要的：

```
marka varchar(32), 
```

最后我检查了 Hibernate 不知道如何处理开箱即用的 Postgres 数组，因为很少有 RDBMS 支持它们。

# php - Facebook signed request not providing all information

> ID：14490553
> 
> 赞同：0
> 
> 时间：2013-01-23T22:26:19.747
> 
> 标签：php, facebook, codeigniter

I've placed in the SDK properly into my CI setup, and I run a bit of code like this:

```
 if (!empty($_POST['signed_request'])) {
        $signed_request = $_POST['signed_request'];
    }
    list($sig, $payload) = explode('.', $signed_request, 2);
    $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
    var_dump ($data); 
```

I'm only receiving back *some* of the information from this code, as follows:

> array(6) { ["algorithm"]=> string(11) "HMAC-SHA256" ["expires"]=> int(1358985600) ["issued_at"]=> int(1358978635) ["oauth_token"]=> string(116) "AAACPRZBPSwx0BADKZBGikSA09ZCJeWDcOZCWYpg0YoXZAgSkZB6tnBQftKZAM3LFG9itoAwoYQ3bDeZCuyZBoPXvxqMTrAonrIphlQY4g0KPChwZDZD" ["user"]=> array(3) { ["country"]=> string(2) "us" ["locale"]=> string(5) "en_US" ["age"]=> array(1) { ["min"]=> int(21) } } ["user_id"]=> string(9) "---------" }

(Blocking out my user_id for obvious reasons!)

I'm told with the countless tutorials online that I should be able to use this code to determine if the app is "liked" or not:

```
if ($data["page"]["liked"]) { echo "yes"; } else { echo "no"; } 
```

Am I missing something here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:48:33.473

> 网上无数的教程告诉我，我应该能够使用此代码来确定应用程序是否“喜欢”

应用程序不能被“点赞”。

可以喜欢的是 Facebook 页面，如果您的应用程序作为页面选项卡嵌入到该页面中，*那么*您将在签署的请求中获得相应的信息，该信息在 iframe 的初始加载时发布到您的应用程序。

# javascript - 在验证之后和回发之前禁用 Webform 按钮

> ID：14490556
> 
> 赞同：1
> 
> 时间：2013-01-23T22:26:35.037
> 
> 标签：javascript, asp.net, webforms

使用 WebForms，我怎样才能拥有一个禁用的按钮，仅在单击 IT 之后，并且在通过验证之后？

我知道有：[单击后禁用asp.net按钮以防止双击](https://stackoverflow.com/questions/5189593/disable-asp-net-button-after-click-to-prevent-double-clicking)

但是，我的页面上还有其他回传，在最后一个按钮按下确认预订之前，我需要允许这些回传。

这只是我需要确保通过验证的最后一次按下按钮，但在被禁用之前只允许按下一次。

代码如下：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        FinalButton.Attributes.Add("onclientclick", "if(Page_ClientValidate('vg')){this.disabled = true; }");
    }

}
protected void Button1_Click(object sender, EventArgs e)
{
    TextBox1.Text = "Hi";
}
protected void Button3_Click(object sender, EventArgs e)
{
    TextBox1.Text = "";
} 
```

ASPX 页面：

```
 <p>
    <asp:TextBox ID="TextBox1" runat="server" ValidationGroup="vg"></asp:TextBox>
</p>
<p>
    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Set TextBox1 to Hi" />
    <asp:Button ID="Button3" runat="server" OnClick="Button3_Click" Text="Set TextBox1 to Empty" />
</p>
<p>
    <asp:Button ID="FinalButton" runat="server" Text="Final Submit" ValidationGroup="vg" />
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1" ErrorMessage="RequiredFieldValidator" ValidationGroup="vg"></asp:RequiredFieldValidator>
</p> 
```

因此，除非填充了文本框，否则“FinalButton”不应提交（这部分有效）。但是，如果填充了文本框，那么在回发之前应该禁用它以防止双击 - 但它不会禁用，所以我认为我的代码在这里是不正确的：

```
FinalButton.Attributes.Add("onclientclick", "if(Page_ClientValidate('vg')){this.disabled = true; }"); 
```

呈现时页面上的源将按钮显示为：

```
<input type="submit" name="ctl00$MainContent$FinalButton" value="Final Submit" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$MainContent$FinalButton&quot;, &quot;&quot;, true, &quot;vg&quot;, &quot;&quot;, false, false))" id="MainContent_FinalButton" onclientclick="if(Page_ClientValidate(&#39;vg&#39;)){this.disabled = true; }" /> 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:21:25.890

您可以在呈现的 HTML 按钮中看到您的单引号已更改为`&#39;`，这是 ASP.NET 的一项安全功能。SO 上的一些帖子（例如[Stop the tag builder escaping single quotes ASP.NET MVC 2](https://stackoverflow.com/questions/3924861/stop-the-tag-builder-escaping-single-quotes-asp-net-mvc-2)）已经发布以解决这个问题，但我个人不会采取这条路线。

请注意，对于这两个示例，我添加了一个`return false`来停止表单提交，以便您可以看到该按钮实际上已禁用。当您准备好继续测试您的代码时删除它。

您可以将代码放入按钮本身：

```
<asp:Button ID="FinalButton" runat="server" OnClientClick="if(Page_ClientValidate('vg')){this.disabled = true; return false; }" Text="Final Submit" ValidationGroup="vg" /> 
```

这有效，但看起来很讨厌。不用`OnClientClick`只用 Javascript 添加点击事件就更干净了：

```
<script>
    $("#<%= FinalButton.ClientID %>").click(function () {
        if (Page_ClientValidate('vg')) {
            this.disabled = true; return false;
        }
    });
</script> 
```

好的，一旦你看到它工作，并且你删除了`return false;`，你仍然会遇到问题。即禁用的按钮不会在某些浏览器中执行回发。所以一些浏览器会回发，其他浏览器会像使用`return false;`. 这不好。

更糟糕的是，无论浏览器如何，ASP.NET 都*不会*运行禁用按钮的单击事件（如果您向`OnClick="FinalButton_Click"`按钮添加类似的内容）。您可以在 IE9 中对此进行测试，因为禁用的按钮仍会返回，但您可以看到您的`OnClick`事件不会触发。另一方面，Chrome 只会禁用您的按钮而不是回发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T08:04:10.537

您可以在触发回发后立即使用 setTimeout 技巧禁用按钮：

```
<script>
    $("#<%= FinalButton.ClientID %>").click(function ()
    {
        var self = this;
        setTimeout(function ()
        {
            self.disabled = true;
        }, 0);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T15:02:29.643

在搜索了几个小时后，我发现您可以使用`UseSubmitBehavior="false"`允许 asp 回发来处理按钮，而不是普通的浏览器提交。[你可以在这里](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.button.usesubmitbehavior?view=netframework-4.8)阅读文档

这也意味着您的`OnClientClick`脚本不必返回 true

```
<asp:Button ID="btnSave" runat="server" 
    Text="Save"
    OnClientClick="this.disabled=true" OnClick="btnSave_Click" 
    UseSubmitBehavior="false"/> 
```

# ravendb - Getting distinct total results from RavenDB

> ID：14490557
> 
> 赞同：2
> 
> 时间：2013-01-23T22:26:36.050
> 
> 标签：ravendb

I have an index :

```
from rest in docs 
from prom in rest.RestPromotions 
```

When querying with LuceneQuery the TotalResults is more than expected because of the duplicate documents created by the index. The skipped field has only the skipped results from the current page.

Is there a way to get the distinct total results?

The document type is like this:

```
{
  "RestName": "Belini",
  "RestID": 1275,
  "SearchNotVisible": [
    "Beliny",
    "bellini"
  ],
  "RegionID": 4,
  "SubRegionID": 0,
  "CityID": 172,
  "AreaID": 5,
  "AvgPriceID": 3,
  "RestTypes": [
    58
  ],
  "FoodTypes": [
    1,
    16
  ],
  "RestSpecials": [],
  "RestProperties": [
    4
  ],
  "RestPromotions": [
    {
      "regionID": 4,
      "cityID": 172,
      "areaID": 0,
      "KosherID": 0,
      "foodTypeID": 16,
      "restTypeID": 0,
      "promotionNumber": 1,
      "isFalsePromo": false
    },
    {
      "regionID": 4,
      "cityID": 172,
      "areaID": 0,
      "KosherID": 0,
      "foodTypeID": 0,
      "restTypeID": 0,
      "promotionNumber": 1,
      "isFalsePromo": false
    },
    {
      "regionID": 4,
      "cityID": 172,
      "areaID": 0,
      "KosherID": 0,
      "foodTypeID": 1,
      "restTypeID": 0,
      "promotionNumber": 1,
      "isFalsePromo": false
    },
  "isKosher": false,
  "ReviewsScore": 3.709,
  "ReviewsAmount": 408,
  "Latitude": 32.060707,
  "Longitude": 34.765018
} 
```

and when doing a LuceneQuery on the index :

```
from rest in docs 
from prom in rest.RestPromotions
select new {RestID=rest.RestID,RestName=rest.RestName,PromoCityID=prom.cityID} 
```

the TotalResult is greater than the real amount of documents returned by the query. I know this is because of duplicated documents that are made by the index.

What I want to know is if there is an option to get the real amount of distinct documents that a specific LuceneQuery has generated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:37:06.100

将您的索引映射更改为：

```
from rest in docs 
select new
{
    rest.RestName,
    PromoCityID = rest.RestPromotions.Select(x=> x.cityID)
} 
```

这将在一个索引条目中索引多个术语，而不是具有多个索引条目。您仍然可以像以前一样查询单个术语。但是现在当您查看统计数据时，`TotalResults`将表示匹配的餐厅总数。

# jquery - jQuery 获取 .val

> ID：14490563
> 
> 赞同：0
> 
> 时间：2013-01-23T22:27:05.860
> 
> 标签：jquery

我需要的是“这个”值

```
( $(this).attr("value")); 
```

出现在“这个”的

```
$("#activities_" +btn_id).val($(this).val()); 
```

这是代码。

```
$('.thoughts_list').click(function(){
    ( $(this).attr('id'));
    ( $(this).attr("value"));
}); 
    $('#close_thoughts').click(function(){

    $("#activities_" +btn_id).val($(this).val());   
}); 
```

目前，返回的值是“取消”，这是“#close_thoughts”的值，而不是我需要点击的“.thoughts列表”的值

回答，显然这就是我想要的。

```
$('.thoughts_list').click(function(){
    ( $(this).attr('id'));
    ( $(this).attr("value"));
}); 
    $('#close_thoughts').click(function(){

    $("#activities_" +btn_id).val($('input[name=thoughts_list]:checked').val());    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:29:23.613

If you want to get the value of the `.thoughts_list` element when you click the `#close_thoughts` element you'll need this:

```
$('#close_thoughts').click(function(){
    $("#activities_" + btn_id).val($('.thoughts_list').val());   
}); 
```

Your code was setup as follows:

```
$('#close_thoughts').click(function(){
    $("#activities_" +btn_id).val($(this).val());   
}); 
```

The problem here is that on the 2nd line `$(this).val()` is the same as `$('#close_thoughts').val()` and you're looking for `$('.thoughts_list').val()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:29:50.220

这也许？

```
$('.thoughts_list').on('click', function() {
    $("#activities_" + this.id).val(this.value);
}); 
```

你的问题很神秘。您是否尝试更改 ID 为`activities_`+ 单击元素 ID 的元素的值？如果是这样，上述将工作。如果没有，您需要进一步说明您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:34:16.960

这是我的老板给我的工作。

```
$('.thoughts_list').click(function(){
    ( $(this).attr('id'));
    ( $(this).attr("value"));
}); 
    $('#close_thoughts').click(function(){

    $("#activities_" +btn_id).val($('input[name=thoughts_list]:checked').val());    
}); 
```

# asp.net-mvc-4 - 嵌套模型绑定

> ID：14490567
> 
> 赞同：3
> 
> 时间：2013-01-23T22:27:18.417
> 
> 标签：asp.net-mvc-4, model-binding, actionresult

- -编辑 - -

我有这个模型

```
public class MainModel {
  string Name;
  List<Address> Addresses;
}

public class Address {
  string prop2;
} 
```

创建视图很容易，但我没有找到在 POST 请求中绑定它的方法。我想避免在 Request.Form 上循环

**看法**

```
 @foreach (var obj in Model.Address)
  {
    <tr>
      <td>            
        <input type="text" id="@string.Format("obj.Name.{0}", obj.Id)" name="@string.Format("obj.Name.{0}", obj.Id)" value="@Model.Name" />
        //I'm not able to overwrite the name attribute, still working on that
      </td>
    </tr>
  } 
```

有没有办法在 ActionController 中自动绑定这个列表？就像是

```
public ActionResult Edit(MainModel model, List<Address> objects) 
```

我想我必须创建一个自定义模型绑定，但我找不到这样做的方法

... MVC 让我们变得懒惰... :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T00:29:22.383

通过阅读您的要求，您可能会过度思考解决方案。

在 Views/EditorTemplates 文件夹中创建一个视图 Address.cshtml 类似于

```
@model SampleMvc.Models.Address
    <tr>
        <td>
            @Html.HiddenFor(x=>x.Id)            
            @Html.TextBoxFor(x=>x.Prop2)
        </td>
    </tr> 
```

在您的编辑视图中具有类似于以下内容的标记：

```
@using (Html.BeginForm()) {
    <table>
        @Html.EditorFor(x=>x.Name)
        <br/>
        <table>
            @Html.EditorFor(x=>x.Addresses)
        </table>
    </table>
    <input type="submit" id="submit" value="Submit"/>
} 
```

EditorFor 语句将使用地址编辑器模板来呈现标记。

如果您需要添加新地址的能力，您可以使用客户端脚本查找最高 id 并注入以下标记

```
<tr>
   <td>
      <input id="Addresses_{HIGHESTIDVALUEHERE}__Id" type="hidden" value="{HIGHESTIDVALUEHERE}" name="Addresses[{HIGHESTIDVALUEHERE}].Id" data-val-required="The Id field is required." data-val-number="The field Id must be a number." data-val="true">
<input id="Addresses_{HIGHESTIDVALUEHERE}__Prop2" type="text" value="" name="Addresses[{HIGHESTIDVALUEHERE}].Prop2">
   </td>
</tr> 
```

然后你的控制器动作变成

```
public ActionResult Edit(MainModel model){
} 
```

# rest - How to use Fiddler against an OAuth protected REST API?

> ID：14490571
> 
> 赞同：0
> 
> 时间：2013-01-23T22:27:32.933
> 
> 标签：rest, fiddler

We use a fancy library for oauth that hides the oauth complexity. But now I need to play with a couple of discrete api calls in fiddler.

Part of the complexity is that the app that interacts with the API is a web app, running on a web server. So I can't use fiddler to see what is going on...

E.g.

```
 my browser --> web server -- > initial oath auth sequence (redirect to API server, sign in..)
  web server --> remote REST API protected by oauth tokens/permissions... 
```

So in this layout, I cannot use fiddler to capture the traffic between the web server and the API...

REST apis behind oauth are pretty common these days. Is there approach to using fiddler to interact with such an api?

Thanks!

# c# - 在 WPF 中平滑图像边缘

> ID：14490574
> 
> 赞同：35
> 
> 时间：2013-01-23T22:27:39.533
> 
> 标签：c#, wpf, image, antialiasing

我有一些 256x256 图像，我在 WPF 应用程序中使用图像控件。虽然它们都是 256x256，但我将一些控件更改为 64x64 等。当我缩小它的大小（使用填充作为我的拉伸属性）时，边缘变得非常粗糙。即使在像三角形这样简单的东西上，也很明显：

![在此处输入图像描述](../Images/6544436127b80e08d70f5df6594b9621.png)

有没有一个很好的解决方法，或者我需要在将它们放入应用程序之前在 Photoshop 中调整图像大小？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-23T22:34:11.837

您需要设置图像的渲染选项。

尝试将图像的样式设置为：

```
<Window.Resources>
    <Style TargetType="Image">
        <Setter Property="Height" Value="64" />
        <Setter Property="Width" Value="64" />
        <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality" />
    </Style>
</Window.Resources> 
```

要使用图像，只需像以前一样调用：

```
<Image Source="/Images/MyImage.png" /> 
```

或者，`RenderOptions`在单个图像上使用：

```
<Image RenderOptions.BitmapScalingMode="HighQuality"
       Source="/Images/MyImage.png"
       Width="64"
       Height="64" /> 
```

有关更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-07T14:01:29.057

这是代码中的先前答案：

```
var i = new Image();
System.Windows.Media.RenderOptions.SetBitmapScalingMode(i, System.Windows.Media.BitmapScalingMode.HighQuality); 
```

# wcf - AWS S3 need to generate pre-signed url for GET via wcf to return to classic asp request form

> ID：14490576
> 
> 赞同：0
> 
> 时间：2013-01-23T22:27:46.523
> 
> 标签：wcf, amazon-web-services

I need to create a WCF web service that takes a request from a classic ASP page/form and returns a pre-signed expiring URL in AWS S3\. (I have a little WCF experience. I've previously been able to return a custom JSON formatted object.)

Now, I need to take a form post, get the name of the file requested from the form, and generate a pre-signed URL that expires in 24 hours, and return it. FYI, I don't do theory well. I need code examples.

How to I massage the following to do what I need it to?

[Serving videos from Amazon S3](https://stackoverflow.com/questions/4469074/serving-videos-from-amazon-s3) (this seems to be close to what I need. I can convert from VB to C# on my own, I just need more than this snippet to understand the total flow.

===SampleRestService.svc.cs===

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.Data.SqlClient;
using System.Configuration;

namespace WcfService5
{       
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class SampleRestService : ISampleRestService
    {       
        public IEnumerable<APIContentObject> GetAllUsers()
        {
            IList<APIContentObject> myAPIContentObject = new List<APIContentObject>();

            string strcon = ConfigurationManager.ConnectionStrings["iOSConn"].ConnectionString;

            using (SqlConnection conn = new SqlConnection(strcon))
            {
                conn.Open();
                string cmdStr = String.Format("SELECT  FirstName, LastName, Email, pword, SignUpDate, enabled FROM Users");
                SqlCommand cmd = new SqlCommand(cmdStr, conn);
                SqlDataReader rd = cmd.ExecuteReader();

                if (rd.HasRows)
                {
                    while (rd.Read())
                    {
                        myAPIContentObject.Add(new APIContentObject(rd["FirstName"].ToString(),
                                                                    rd["LastName"].ToString(),
                                                                    rd["Email"].ToString(),
                                                                    rd["pword"].ToString(),
                                                                    rd["SignUpDate"].ToString(),
                                                                    rd["enabled"].ToString(),
                                                                    rd["FirstName"].ToString()));                                                                         
                    }
                }
                conn.Close();
            }
            return myAPIContentObject;
        }    
    }

    [DataContract]
    public class APIContentObject
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public string Excerpt { get; set; }
        [DataMember]
        public string Content { get; set; }
        [DataMember]
        public string ImageURL { get; set; }
        [DataMember]
        public string ThumbnailURL { get; set; }
        [DataMember]
        public string SluggedURL { get; set; }
        [DataMember]
        public string FileURL { get; set; }

        public APIContentObject(string vName, string vExcerpt, string vContent, string vImageURL, string vThumbnailURL, string vSluggedURL, string vFileURL)  //, decimal sal)
        {
            Name = vName;
            Excerpt = vExcerpt;
            Content = vContent;
            ImageURL = vImageURL;
            ThumbnailURL = vThumbnailURL;
            SluggedURL = vSluggedURL;
            FileURL = vFileURL;
        }

    }   
} 
```

====iSampleRestService.cs====

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using System.ServiceModel.Web;

namespace WcfService5
{   
    [ServiceContract]
    public interface ISampleRestService
    {
        [OperationContract]
        //attribute for returning JSON format
        [WebGet(ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Xml,
            BodyStyle = WebMessageBodyStyle.Bare,
            UriTemplate = "/json/users")]
        //method
        IEnumerable<APIContentObject> GetAllUsers();              
    }
} 
```

====web.config====

```
<?xml version="1.0"?>
<configuration>

  <connectionStrings>
    <add name="iOSConn" connectionString=" Server=HIDDEN;Database=HIDDEN;User ID=HIDDEN;Password=HIDDEN;Trusted_Connection=False;"/>
  </connectionStrings >

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <services>
      <service name="WcfService5.SampleRestService">
        <endpoint address="/" behaviorConfiguration="REST" binding="webHttpBinding"
          bindingConfiguration="" contract="WcfService5.ISampleRestService" />
        <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <endpointBehaviors>
        <behavior name="REST">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:48:27.253

好的，使用其他一些示例我想出了我需要的东西。以下是在 Amazon S3 中创建预签名 URL 的方法：

```
 public string AWSS2CreatePreSignedURL(string fileName)
        {
            string urlToReturn = "";
            string jsonClient = "";

            string AWSKey = "YOURKEY";
            string AWSSecretKey = "YOURSECRETKEY";

            using (AmazonS3 client = Amazon.AWSClientFactory.CreateAmazonS3Client(AWSKey, AWSSecretKey))
            {
                dynamic req = new Amazon.S3.Model.GetPreSignedUrlRequest
                {
                    BucketName = "gametrainingresources",
                    Key = fileName,
                    Protocol = Amazon.S3.Model.Protocol.HTTPS,
                    Verb = Amazon.S3.Model.HttpVerb.GET,
                    Expires = DateTime.Now.AddMinutes(20)
                    //Expires = DateTime.Now.AddDays(1).AddSeconds(0)
                };

                //url
                urlToReturn = client.GetPreSignedURL(req);

            }

            return urlToReturn;
        } 
```

# hibernate - HQL 内连接在同一张表上

> ID：14490581
> 
> 赞同：3
> 
> 时间：2013-01-23T22:28:06.007
> 
> 标签：hibernate, grails, hql, grails-orm

我今天问了一个关于 GORM 的较早问题：[How to fetch records in grails by max date and group 同时](https://stackoverflow.com/questions/14484883/how-to-fetch-records-in-grails-by-max-date-and-group-at-same-time) 然而，有人建议使用 HQL 可以轻松实现。但是使用 HQL 我得到了`unexpected token`错误。当我研究这个时，我发现 HQL 不允许`INNER JOINS`，除非两个实体之间存在关联：[HQL，在同一个表上左连接](https://stackoverflow.com/questions/11741439/hql-left-join-on-the-same-table)

所以，我迷路了。首先，我很沮丧为什么 GORM 不支持这样一个简单的查询，现在有了 HQL，我的问题是：如何在子集上执行 INNER JOIN？

我试过的：

> 意外标记：（在第 1 行附近，第 16 列 [从（选择名称，max(dateCreated) as maxTime from com.mine.Color group by name 中选择 c）作为 t 内部连接颜色 c 在 c.name = t.name 和 c .dateCreated = t.maxTime ]

我怀疑`Color`没有检测到第二个实例，因为包名称没有自动添加到它的前缀。所以阅读我尝试的其他答案：

> 意外标记：（在第 1 行附近，第 16 列 [select c from (select name, max(dateCreated) as maxTime from com.mine.Color group by name ) as t ，com.mine.Color as c on c.name = t .name 和 c.dateCreated = t.maxTime ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:55:41.803

干得好：

```
Color.executeQuery("""    
    Select c
    From Color c
    where c.dateCreated = (select max(b.dateCreated) from Color b where b.name = c.name)
    """) 
```

# cakephp - 使用带有可选身份验证登录的 CakePHP 安全组件

> ID：14490584
> 
> 赞同：2
> 
> 时间：2013-01-23T22:28:08.793
> 
> 标签：cakephp, authentication, basic-authentication

我有一个使用 CakePHP 1.3 的 REST API 设置，它使用 Security 组件和 Auth 组件来促进用户登录的 HTTP 身份验证，如下所示：

用户控制器：

```
function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('view', 'add');

    if ( $this->params['url']['ext'] == 'json' && !$this->Auth->user() ) {
        $this->Auth->allow('edit', 'add_friend');
        $this->Security->loginOptions = array(  
            'type'=>'basic',  
            'login'=>'authenticate',  
            'realm'=>'MyRealm'  
        );  
        $this->Security->loginUsers = array();  
        $this->Security->requireLogin('edit', 'add_friend');  
    }
} 
```

应用控制器：

```
function authenticate($args) {  
    $data[ $this->Auth->fields['username'] ] = $args['username'];  
    $data[ $this->Auth->fields['password'] ] = $this->Auth->password($args['password']);  
    if ( $this->Auth->login($data) ) {
        return true;  
    } else {  
        $this->Security->blackHole($this, 'login');  
        return false;  
    }  
} 
```

**这一切都很好**，但我的问题是我有一个方法可以选择是否进行身份验证。在我看来，CakePHP 中的 Security 组件具有`requireLogin()`强制您进行身份验证的方法。

我尝试创建一个`authenticate()`始终返回 true 的新方法：

```
function optionalAuthenticate($args) {  
    $data[ $this->Auth->fields['username'] ] = $args['username'];  
    $data[ $this->Auth->fields['password'] ] = $this->Auth->password($args['password']);  
    $this->Auth->login($data);
    return true;
} 
```

但不幸的是，这并没有奏效。

有谁知道我可以完成某种可选授权的安全组件的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:50:57.707

`optionalAuthenticate()`通过在 app_controller.php 中声明该方法，我最终完全不使用 Security 组件来完成此操作：

```
function optionalAuthenticate() { 
    if(empty($_SERVER['PHP_AUTH_USER']) || empty($_SERVER['PHP_AUTH_PW']))
        return false;
    $data[ $this->Auth->fields['username'] ] = $_SERVER['PHP_AUTH_USER'];  
    $data[ $this->Auth->fields['password'] ] = $this->Auth->password($_SERVER['PHP_AUTH_PW']);
    if($this->Auth->login($data))
        return true;
    else
        return false;
} 
```

然后从我想要尝试验证的任何方法中调用它（例如在 users_controller.php 中）：

```
function view($id = null) {
    $this->optionalAuthenticate();
    $user = $this->Auth->user();
    if($user)
    ... 
```

# linux - Get Month & Day from Date

> ID：14490590
> 
> 赞同：27
> 
> 时间：2013-01-23T22:28:24.593
> 
> 标签：linux, unix, date

I am trying to get Month and Date from Date in Linux. this is my code

```
# Set Date 
D="2013/01/17"

# get day 
DD=$(D+"%d")

# get day 
MM=$(D+"%M")

# Day 
echo "Day:"$DD
echo "Month:"$MM 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-23T22:44:45.647

在`sh`或`bash`：

```
D="2013/01/17"
DAY=$(date -d "$D" '+%d')
MONTH=$(date -d "$D" '+%m')
YEAR=$(date -d "$D" '+%Y')

echo "Day: $DAY"
echo "Month: $MONTH"
echo "Year: $YEAR" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-23T22:46:54.350

或者，如果您想要当前日期，请使用`date +%Y/%m/%d`. 如果你想要它们分开你可以做这样的事情：

```
read YYYY MM DD <<<$(date +'%Y %m %d')
echo "Today is Day:$DD Month:$MM" 
```

一种更简单的方法是：

```
DD=$(date +%d)
MM=$(date +%m)
echo "Today is Day:$DD Month:$MM" 
```

但是在这种情况下，您要执行`date`两次，这是低效的，如果您真的不走运，那么这两行之间的日期可能会发生变化；）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T22:39:20.413

```
kent$  D="2013/01/17"

kent$  awk -F/ '{print "year:"$1,"Month:"$2,"Day:"$3}'<<<$D
year:2013 Month:01 Day:17 
```

如果您只想要月份或日期，只需在此处留下 2 美元或 3 美元，删除不需要的部分

编辑

```
kent$  year=$(awk -F/ '{print $1}' <<<$D)                                                                                                                                   

kent$  echo $year
2013 
```

# java - How to set encoding in Apache HTTP Components?

> ID：14490591
> 
> 赞同：3
> 
> 时间：2013-01-23T22:28:27.130
> 
> 标签：java, apache-httpcomponents

How do I set the character encoding in Apache HTTP Components?

I do something like this:

```
 Form form = Form.form();
    form = form.add("somekey", "somevalue");
    Request request = Request.Post("http://somehost/some-form")
                             .request.bodyForm(form.build()); 
```

"somekey" and "somevalue" are unicode strings because all java string are unicode. http components converts them to latin-1 when I tested. I want it to convert to something else (e.g., utf-8).

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T00:11:39.943

按照您在示例中显示的内容，您似乎正在使用流利的 API。

查看[javadocs](http://hc.apache.org/httpcomponents-client-ga/fluent-hc/apidocs/org/apache/http/client/fluent/class-use/Request.html)有一个`request.bodyForm()`接受字符集的版本：

```
 import org.apache.http.Consts;
    ...
    request = request.bodyForm(form.build(), Consts.UTF_8); 
```

根据[来源](http://javasourcecode.org/html/open-source/httpcomponents-httpclient/httpcomponents-httpclient-4.2.1/org/apache/http/client/fluent/Request.java.html#line.269)，字符集默认为`Consts.ISO_8859_1`(aka Latin-1)。

## 备择方案

1.  如果这不起作用，请考虑：

    ```
    import org.apache.http.Consts;
    ...
    request.elementCharset(Consts.UTF_8); 
    ```

2.  作为最后的手段，应该可以设置内容字符集。查看[源代码`elementCharset()`](http://javasourcecode.org/html/open-source/httpcomponents-httpclient/httpcomponents-httpclient-4.2.1/org/apache/http/client/fluent/Request.java.html#line.225)，您可以尝试以下操作：

    ```
    import org.apache.http.Consts;
    import org.apache.http.params.CoreProtocolPNames;
    ...
    request.config(CoreProtocolPNames.HTTP_CONTENT_CHARSET, Consts.UTF_8); 
    ```

# html - 文本字段填充其余的水平空间

> ID：14490594
> 
> 赞同：1
> 
> 时间：2013-01-23T22:28:35.407
> 
> 标签：html, css

我正在尝试创建一个菜单，其中文本输入字段`.search-form`将扩展以占用`.container`. 我也有一个`.cart`, `.logo`, 并且`.menu`它的宽度基于它们的内容。

目前，我能够让一切正常工作，除了当时`.search-btn`在不同的线路上`.search-form`，我不知道如何解决这个问题。重要的是`.search-btn`和`.search-form`包含在同一个 div 中，因为我将创建一个包含潜在搜索结果的下拉列表。此下拉列表的宽度必须与`.search-btn`和相同`.search-form`。

jsFiddle：http: [//jsfiddle.net/bnJPE/1/](http://jsfiddle.net/bnJPE/1/)

html:

```
<div class="container">

    <a href="#" class="cart">
        <img src="http://www.placehold.it/27x27">
    </a>

    <a href="#" class="logo">
        <img src="http://www.placehold.it/100x27">
    </a>

    <ul class="menu">
        <li class="item"><a class="link" href="#">
            Item 01
        </a> </li>
        <li class="item"><a class="link" href="#">
            Item 02
        </a> </li>
        <li class="item"><a class="link" href="#">
            Item 03
        </a> </li>
        <li class="item"><a class="link" href="#">
            Item 04
        </a> </li>
    </ul>

    <div class="search">
        <input class="search-form" type="text" value="varying width">
        <a href="search-btn"><img class="search-icon" src="http://www.placehold.it/20x20"></a>
        <div class="suggestions">
            Potential Results Goes Here
        </div>
    </div>

</div> 
```

CSS：

```
.container{
    width: 100%;
    float:left;
    height:30px;
    background: yellow;
    padding: 0;
    margin: 0;
}

.logo{
    float:left;
}

.search{
    overflow: hidden;
    background:aqua;
}

    .search > .search-form {
        width: 100%;
    }

    .search > .search-btn {
        width: 27px;        
    }

    .suggestions {
        background: #98faf9;
        height: 50px;
    }

.menu {
    float: left;
}

    .menu > .item {
        display: inline;
        list-style-type: none;
    }

.cart{
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:38:54.933

尝试

```
.search > .search-form {
    width: auto;
} 
```

代替

```
.search > .search-form {
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:02:19.123

对于`.search`, 删除`overflow: hidden`不需要，然后使用`float: right`. 对于`.search-form`删除`width: 100%`，因为这会阻止按钮向右移动，或者将其设置为`auto`

```
.search {
    background:aqua;
    float: right;
}

.search > .search-form {
} 
```

[修改后的 JSFiddle](http://jsfiddle.net/bnJPE/30/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:44:21.130

在`.search`添加`white-space: nowrap;`

[http://jsfiddle.net/WTsqK/](http://jsfiddle.net/WTsqK/)

# php - 正则表达式和 preg_match() 的问题 - 无法保存结果

> ID：14490598
> 
> 赞同：1
> 
> 时间：2013-01-23T22:28:52.373
> 
> 标签：php, regex, preg-match, pcre, preg-match-all

我正在为我正在处理的一个网站构建一个动态链接系统，这样你就可以放一些类似的东西`{_LINK_20_}`，它会根据用户是否启用或禁用 javascript 来动态输入 onclick 事件或 href 属性.

唯一的问题是我最初使用循环来浏览文档，但我意识到正则表达式会更好地工作，这样我就可以拥有不连续的链接 ID，它仍然会检测到它们。

我只是在示例页面中对此进行测试，然后再尝试将其嵌入我的 OOP 后端，所以这里是示例代码：

```
$results = array();
$string = 'asdfasdf {_LINK_2_} asdf {_LINK_1_}{_LINK_3_} asdf{_LINK_8_}';
$exp = '/{_LINK_<0-9>+_}/';
$find = preg_match($exp, $string, $results); 
```

但是，`$results`当我使用`print_r()`. 我在正则表达式语法方面几乎是一个完整的新手，所以请放轻松。:)

我真正想做的**只是保存**匹配文本中的数字，这样我就可以遍历正则表达式结果并根据需要替换每个链接，而无需调用`preg_replace()`or `str_replace()`。

我也试过这个`preg_match_all()`功能，但也没有用。在此先感谢，对不起，我在正则表达式方面很糟糕！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:03:59.620

试试这个正则表达式：

```
$exp = '/{_LINK_[0-9]+_}/' 
```

并使用 preg_match_all。

字符类是用方括号（'[]'）实现的，而不是尖括号（'<>'）。只需使用正确的括号即可使您的正则表达式起作用。

如果你*真的*想只保存数字，你可以使用这个正则表达式：

```
$exp = '/(?<={_LINK_)[0-9]+(?=_})/' 
```

[单击此处](http://regexr.com?33gun)在 RegExr 中查看它。它通过使用后向和前向来工作，它们是零宽度断言（意味着它们在字符之间匹配，而不是匹配字符本身）关于在其他正则表达式之后或之前的内容。

[在ideone.com](http://ideone.com/iHqNkq)上查看。

# jquery - Weird form behavior

> ID：14490599
> 
> 赞同：0
> 
> 时间：2013-01-23T22:28:56.513
> 
> 标签：jquery

i'm having some crazy trouble and i can't figure out how to fix it. I have a form that has a "return submitNotes" on the submit button (onclick). i have the submitNotes function and it seems to be calling it fine, but in my function i have an ajax call that doesn't seem to be firing off. I've placed alerts in the ajax call for when it is finished and the curious thing is that the alert only goes off when i have return false at the bottom of the page. If i comment out the return it doesn't even show the alert. In both cases the ajax call doesn't seem to be reaching out to it's page. Anything you guys can do to help!

```
function submitNotes(rID){

    ts = getTs(); //this is so IE sees a unique URL being called everytime.
    var consignor = $('#consignor').val()
    var consignee = $('#consignee').val();
    var consignorRequired = $('#consignorRequired').val();

    if(consignorRequired=='true'){

            if(consignor==''){
                alert('Consignor information is required!');
                return false;
            }

            if(consignee==''){
                alert('Consignee information is required!');
                return false;
            }
    }

    $('#loading_notes').show();

    $.get('/scripts/claim_sendTo.asp?action=pending&rID='+rID+'&auditorID=1',function(){
        alert('hello2');
        $('#claimForm').submit();
    });

    //return false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:31:11.063

您可能想要尝试的是阻止事件的默认行为。

您可能希望在表单上使用 onsubmit="" 而不是 onclick=""，因为这样您就可以在核心处停止表单提交。

然后，您需要将事件对象传递给提交函数。它允许更好地控制事件，而无需过多依赖返回值。

```
<form method="post" action="X" onsubmit="submitNotes(event)">

// Somewhere in your JavaScript
function submitNotes(event) {
    if (event.preventDefault) event.preventDefault();
    else window.event.cancelBubble = true;
    // the rest of the event code
} 
```

这应该是一个好的开始。

如果您想坚持使用该`onclick`事件，您可能需要尝试以下操作：

```
<form method="post" action="X" onsubmit="if (event.stopPropagation) event.stopPropagation(); else window.event.cancelBubble = true"> 
```

这应该会阻止表单处理提交。

我可以推荐你使用 jQuery 的`$('form').submit( ... )`事件处理吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:31:38.153

当您取消注释时警报会消失，`return false`因为您处于 onsubmit 事件的上下文中。从该事件返回`false`将取消它，允许您的 jquery 执行。否则，表单会重新加载页面

# c++ - Debugging link error with lib.a file

> ID：14490601
> 
> 赞同：0
> 
> 时间：2013-01-23T22:29:21.740
> 
> 标签：c++, build, compilation, linker, linker-errors

The project I'm working with, uses the VTK (ver 5.8.0), c++ 4.6.3, buntu 12.04
The code compiles w/o any errors. The linker is failing with: **undefined reference to QVTKWidget2::QVTKWidget2(QWidget*, QGLWidget const*, QFlags)**
This class is in `VTK/GUISupport/Qt/QVTKWidget2.cxx` As far as I can tell, this is in **libQVTK.a** (`grep -i -l QVTKWidget2 *.a`) or **libQVTK.so**, **libQVTKWidgetPlugin.so** (`grep -i -l QVTKWidget2 *.so`) But I'm not sure a text search is enough to say the reference/symbol is there. I'm not sure what the linker is looking for.
When I try to locate the symbol w/ `nm -A *.a|grep QVTKWidget2` the five responses are too cryptic for me to understand. (I'm not sure what to look for.)
When I look at the .so files (`ldd libQVTK.so`), I see references to different libs, and no mention of QVTKWidget2\. (Further confusion.)
The linker cmd is `/usr/bin/c++` The library is called explicitly with `/full/path/to/VTK/build/bin/libQVTK.a`

Edit 1:
In this case a simple text search is not good enough. `grep -i -l QVTKWidget2 *.a` will flag **libQVTK.a** When taking a closer look at the archive `ar -t libQVTKA.a`, this lib contains **QVTKWidget.cxx.o** There is no mention of **QVTKWidget2.cxx.o**. I'll guess this is due to name mangling, or just the archive format.

Edit 2: `nm -C libQVTK.a | grep QVTKWidget2` returns nothing. `nm -C libQVTK.a |grep QVTKWidget` shows there is only QVTKWidget class members in this archive. `nm -C libQVTK.so | grep QVTKWidget2`, again returns nothing, while `nm -C libQVTK.so | grep QVTKWidget` shows only QVTKWidget class members. The results are the same for **libQVTKWidgetPlugin.so** Again, due to name mangling, a text search is misleading.

Is there a quick way to find out which library has the QVTKWidget2 class? (QVTKWidget2.cxx.o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:25:34.553

这里的问题是没有构建 QVTKWidget2 类。它仅在构建 OpenGL 的东西时构建。由 CMAKE 标志控制：VTK_USE_QVTK_QTOPENGL (on)
（我真的很讨厌 CCMAKE。）

# python - 这是 python 客户端的有效 TCP/IP 套接字循环吗？

> ID：14490607
> 
> 赞同：1
> 
> 时间：2013-01-23T22:29:33.907
> 
> 标签：python, sockets, tcp, multiprocessing

我正在连接一个服务器，该服务器将向我发送需要逐行处理的流数据。所以我必须解析出单独的行，然后处理每一行。下面的代码似乎工作得很好，但我想知道是否有任何标准的设计模式来做这种事情。或者这是要走的路？

队列是否会引入任何严重的开销？我需要它尽可能快速和高效，这也是我偏离了像 twisted 这样的库的原因。

```
import socket, multiprocessing

def receive_proc(s, q):
    data = ''
    while True:
        data += s.recv(4096)
        if '\n' in data:
            lines = data.split('\n')[:-1]
            for line in lines:
                if len(line) > 0:
                    q.put(line)
                    data = data.replace(line+'\n', '', 1)

q = multiprocessing.Queue()
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(('127.0.0.1', 1234))

p = multiprocessing.Process(target=receive_proc, args=(s,q))
p.start()

while True:
    line = q.get()

    # do your processing here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T14:29:30.983

想要远离诸如*twisted*之类的东西当然有正当的理由，但我认为效率不在其中——我怀疑它们更有可能以正确的方式进行优化。性能是一头棘手的野兽，瓶颈通常不在您想象的地方，这就是为什么您需要在进行适当优化之前进行概要分析的原因。例如，框架可能已经努力将更多代码推送到 C 扩展中，这肯定会提高性能。如果性能是您的*关键*动机，第三方的东西可能是更安全的选择。此外，使用其他人针对各种不同的用例和环境测试和调整的代码存在很大的争议——如果你最终重新发明了太多的轮子，总是有可能缺少一些辐条的风险。

但是，您需要做的事情似乎很简单，因此安装和学习框架以及向代码添加另一个运行时依赖项的开销可能不合理。此外，如果您主要受 IO 限制，那么燃烧一些额外的 CPU 来进行处理不会有太大的不同。在过去，我当然避免了诸如扭曲之类的事情，仅仅是因为我知道自己编写它会更快（就我的时间而言）并且性能会“足够好”。我一直发现twisted 的回调系统使调试有点棘手——例如，获取错误消息可能有点令人担忧。这绝不是不可能的，很多人都非常成功地使用它，但我个人觉得它太“繁琐”，不适合简单的任务。

我认为在这种情况下，您将接收和处理拆分为自己的进程的想法可能是一种错误的经济——从套接字接收数据非常快，并且如果您在纯 Python 中进行大量处理，则可能占主导地位性能因素。但是，如果不知道你在做什么处理，我不能肯定地说。如果这将是耗时和/或 CPU 密集型的，并且您可以独立于前几行处理每一行，那么这可能是合理的，但您可能希望将处理转移到一整套工作进程。根据您现有的代码，这非常容易 - 只需将主进程设置为接收器而不是“从属”，并创建一个共享一个`Queue`. 每个工人都经过一个循环来选择下一个项目并产生结果。无论每个需要多长时间，他们都会在下一个可用时获得下一个项目（并将`Queue`为您处理）。

但是，如果您的处理循环也主要受 IO 限制（例如写入文件），那么您可能会发现单个进程实际上比将所有内容推入管道的开销要好。这取决于许多因素，包括您的 CPU 架构（某些系统使 CPU 内核之间的传输比其他系统更昂贵），但最终您不希望使用多个进程，除非您非常有信心它会给您带来性能优势。

无论如何，如果循环*是*IO 绑定的，您可能会发现使用非阻塞 IO 的单个进程是要走的路。您可以使用 Python 的[select](http://docs.python.org/2/library/select.html)模块自己完成此操作，或者您可能会使用[eventlet](http://eventlet.net/)或[gevent 之](http://www.gevent.org/)类的库发现它更简洁。

不相关的 - 你从缓冲区中剥离 start 的方法效率很低 - 你不需要使用`replace()`你可以使用你现有的`split()`，如下所示：

```
while True:
    data += s.recv(4096)
    if '\n' in data:
        lines = data.split('\n')
        for line in lines[:-1]:
            if len(line) > 0:
                q.put(line)
        data = lines[-1] 
```

# java - 使用ant和scp拒绝权限

> ID：14490615
> 
> 赞同：0
> 
> 时间：2013-01-23T22:29:59.110
> 
> 标签：java, ant, java-7, scp

在我的 ant 文件中，我将一个 java war 文件 scp 到一个测试服务器。一旦我切换到 java 1.7，由于项目要求，ant 文件抛出一个权限被拒绝错误：

构建失败

```
C:\Users\jdoe\Documents\code\build2\projectName\build.xml:72: com.jcraf
t.jsch.JSchException: java.net.SocketException: Permission denied: connect
        at com.jcraft.jsch.Util.createSocket(Util.java:344)
        at com.jcraft.jsch.Session.connect(Session.java:194)
        at com.jcraft.jsch.Session.connect(Session.java:162)
        at org.apache.tools.ant.taskdefs.optional.ssh.SSHBase.openSession(SSHBas
e.java:223) 
```

一旦我将 JAVA_HOME 环境变量切换回 Java 1.6，一切正常。

我尝试安装两个版本的 java 7（jdk1.7.0_03 和 jdk1.7.0_11），但是这两个版本都出现相同的错误。

我的 build.xml 文件中的 scp 任务如下所示：

```
 <scp file="${name}.war" todir="${appserver.username}:${appserver.password}@${appserver.ipAddress}:${appserver.testTomcatLocation}" trust="yes"/> 
```

我有所需的 jar 文件 jsch-0.1.49.jar 位于我的 Ant 路径 @ c:\Program Files(x86)\WinAnt\lib

为什么当我使用 Java 7 时 scp 不工作。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:49:26.580

我想知道您是否坐在公司防火墙后面？

也许您的 Java 6 环境有一些新的 Java 7 安装缺少的代理设置？

*   [如何设置 JVM 使用的代理](https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:29:29.710

该问题与 Cisco AnyConnect VPN 客户端有关。原来我所要做的就是在 Windows 的 VPN 属性中禁用 IPv6，问题就消失了。这是互联网上帮助我的来源：http: [//jonathangiles.net/blog/ ?p=1126](http://jonathangiles.net/blog/?p=1126)

# android - 如何在 android 中将 webview 存档文件获取到 InputStream？

> ID：14490616
> 
> 赞同：0
> 
> 时间：2013-01-23T22:30:12.660
> 
> 标签：android, android-webview, inputstream, webarchive

我之前问过一个关于将存档文件加载到 WebView 的类似问题。

根据[教程](https://stackoverflow.com/questions/12872043/android-webview-display-webarchive)，我必须将存档文件加载到 InputStream，以便我可以使用 WebArchiveReader.java 中的 loadToWebView 方法。

但是，在[教程](https://stackoverflow.com/questions/12872043/android-webview-display-webarchive)中，作者使用以下语句获取存档文件：

```
InputStream is = getAssets().open("TestHtmlArchive.xml"); 
```

不幸的是，我想从“资产”文件夹以外的其他地方获取存档文件。

```
WebView webView = (WebView) rootView.findViewById(R.id.webview_layout);
String url = "http://www.yahoo.com";
webView.loadUrl(url);
String path = getFilesDir().getAbsolutePath() + File.separator + "yahoo" + ".html";
webView.saveWebArchive(path);
webView.loadUrl("file://" + path); 
```

假设我想加载上面代码中保存的文件“yahoo.html”。

我怎样才能把它放到 InputStream 的实例中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:27:02.570

似乎打开文件到 InputStream 的正确方法如下所示。

```
 String path = getFilesDir().getAbsolutePath() + File.separator
                    + "yahoo" + ".html";

            File file = new File(path);

            try {
                InputStream is = new BufferedInputStream(new FileInputStream(file));

                WebArchiveReader wr = new WebArchiveReader() {

                    @Override
                    public void onFinished(WebView webView) {
                        System.out.println("Page loaded");
                    }
                };

                if (wr.readWebArchive(is)) {
                    wr.loadToWebView(webView);
                }

            } catch (IOException e) {
                e.printStackTrace();
            } 
```

# xslt - XSLT：当使用应用模板时，我应该在选择还是匹配中更具体？

> ID：14490618
> 
> 赞同：0
> 
> 时间：2013-01-23T22:30:17.970
> 
> 标签：xslt

我正在使用 apply-templates 元素完成我的第一个 XSL 转换。开发 XSLT 时，最佳实践是什么？我应该非常具体地选择应用模板还是模板匹配或我没有考虑过的东西？

示例 A

```
<xsl:template match="/">
    <xsl:apply-templates select="A/B/C/D"/>
    <xsl:apply-templates select="J/K/L/M"/>
    <xsl:apply-templates select="W/X/Y/Z"/>
</xsl:template>

<xsl:template match="Q"/> 
```

或者

示例 B

```
<xsl:template match="/">
    <xsl:apply-templates/>
</xsl:template>

<xsl:template match="A/B/C/D/Q or J/K/L/M/Q or W/X/Y/Z/Q"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:08:08.137

很难说哪个更好，因为这两个建议的片段做的事情非常不同，所以这取决于预期的结果是什么。

```
<xsl:template match="A/B/C/D/Q or J/K/L/M/Q or W/X/Y/Z/Q"/> 
```

应该是语法错误

```
<xsl:template match="A/B/C/D/Q  | J/K/L/M/Q | W/X/Y/Z/Q"/> 
```

或者可能更有效（但通常不等效）

```
<xsl:template match="Q"/> 
```

因此，一旦错误得到修复，sample`B`将首先深度遍历树，将默认模板应用于每个节点，特别是将所有文本复制到输出，直到它到达`Q`元素节点，在那里它将修剪遍历而不是复制`Q`或其后代到结果树。

完全相反的样本 A 根本不遍历树的深度优先文档顺序，并且首先处理`A/B/C/D`节点，特别是在此阶段它不*处理*`A`or`B`的任何其他子节点，`C`因此不会将这些子节点的任何文本节点后代复制到输出。然后它将从 D 开始深度优先遍历，`Q`像以前一样进行修剪。然后该过程再次开始，`J/K/L/M"`因此任何输出`M`都将在输出之后输出，`D`即使`M`在源中更早发生。这与`B`结果顺序反映输入顺序的样本形成对比。

这可能是最小示例的人工制品，但如果输入是格式良好的文档，则示例 A 中的三个应用模板中只有一个可以产生任何结果，因为`/`只能有一个元素子子元素，因此至少有两个`A` `J` `W`必须不选择任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:13:14.463

一般来说，如果您想编写一个在源文档结构发生变化时仍然可以工作的样式表，最好将规则放在匹配模式中。当您想以非文档顺序处理子项时，在选择表达式中具有选择性主要有用。

# jar - 滑动菜单 jar 文件 - Mono for Android

> ID：14490627
> 
> 赞同：0
> 
> 时间：2013-01-23T22:31:16.090
> 
> 标签：jar, xamarin.android

我想为 android 实现一个单声道滑动菜单。看来我需要的是 .jar 文件。我从哪里获得 .jar 文件？我不使用 Eclipse。

来源在这里：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

如何实现（一旦你有一个 .jar 文件）在这里得到了回答：[Monodroid 滑动菜单](https://stackoverflow.com/questions/13417126/monodroid-sliding-menu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:36:05.510

您可以在 Xamarins [monodroid-samples 存储库](https://github.com/xamarin/monodroid-samples/tree/master/SlidingMenu)中找到绑定。它们最近已更新。

# algorithm - 用于计算 PDF 文件页数的代码改进

> ID：14490628
> 
> 赞同：0
> 
> 时间：2013-01-23T22:31:19.567
> 
> 标签：algorithm, pdf, vbscript, wsh

如何将所有页面的总页数`PDF`放入文件夹中？我还希望将输出写入`.txt`文件。

所以，我需要知道如何获得所有的页数，以及如何将所有页码和名称`PDF`放在一列中。`PDF`

我会这样的输出：

```
PDF file name          Number of page
-------------------------------------
firstpdffile           30 pages
secondpdffile          25 pages
thirdpdffile           10 pages
fourthpdffile           5 pages
-------------------------------------
Total                  70 pages 
```

* * *

```
Option Explicit

Private Function getPdfPgCnt(ByVal sPath) 'Returns page count of file on passed path
    Dim strTStr

    With CreateObject("Adodb.Stream")
        .Open
        .Charset = "x-ansi"
        .LoadFromFile sPath
        strTStr = .ReadText(-1)
    End With

    With (New RegExp)
        .Pattern = "Type\s*/Page[^s]"
        .IgnoreCase = True
        .Global = True
        getPdfPgCnt = .Execute(strTStr).Count
    End With

    If getPdfPgCnt = 0 Then getPdfPgCnt = 1
End Function

'--------------------------------
Dim oFso, iFile
Set oFso = CreateObject("Scripting.FileSystemObject")

'enumerating pdf files in vbs's base directory
For Each iFile In oFso.getFolder(oFso.GetParentFolderName(WScript.ScriptFullName)).Files
    If LCase(oFso.GetExtensionName(iFile)) = "pdf" Then WScript.Echo iFile & " has "& getPdfPgCnt(iFile)&" pages."
Next
Set oFso = Nothing
'-------------------------------- 
```

* * *

我使用这个`.bat`文件来运行脚本

```
@echo off
color 0A

@set currentdir="%cd%"

title PDF page counter

del temp1.txt
del temp2.txt
del temp3.txt
del output.txt

cscript pdfpagecount.vbs > temp1.txt

BatchSubstitute.bat "%cd%" "" temp1.txt > temp2.txt & BatchSubstitute.bat "\" "" temp2.txt > temp3.txt & Type temp3.txt | findstr /I /V /C:"Microsoft" >>output.txt & del temp1.txt & del temp2.txt & del temp3.txt

exit 
```

* * *

```
@echo off
REM -- Prepare the Command Processor --
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

::BatchSubstitude - parses a File line by line and replaces a substring"
::syntax: BatchSubstitude.bat OldStr NewStr File
::          OldStr [in] - string to be replaced
::          NewStr [in] - string to replace with
::          File   [in] - file to be parsed
:$changed 20100115
:$source http://www.dostips.com
if "%~1"=="" findstr "^::" "%~f0"&GOTO:EOF
for /f "tokens=1,* delims=]" %%A in ('"type %3|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:%~1=%~2%%"
        for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X
    ) ELSE echo.
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:03:06.930

试图集中注意力

1.  表格（页眉、正文、页脚），类似于控制台脚本的输出
2.  总结价值

你需要什么

1.  .NET sprintf 格式（类 cFormat）
2.  sum 变量在循环之前初始化为 0，在循环中添加，在循环之后输出/使用

在代码中：

```
' 14490628.vbs
' http://stackoverflow.com/questions/14490628/code-improvements-for-counting-the-pages-of-pdf-files

Option Explicit

Dim oFS     : Set oFS  = CreateObject("Scripting.FileSystemObject")
Dim sDir    : sDir     = "..\..\10041057\data"
Dim oFmt    : Set oFmt = New cFormat
Dim nFWidth : nFWidth  = 25                ' for file name
Dim nPWidth : nPWidth  = 15                ' for number of pages
Dim nLWidth : nLWidth  = nFWidth + nPWidth ' for whole line

Dim sRuler1 : sRuler1 = String(nLWidth, "=")
Dim sRuler2 : sRuler2 = String(nLWidth, "-")
Dim sFmtT   : sFmtT   = insertWidth("{4}{2}{0,-@F}{1,@P}{2}{3}", nFWidth, nPWidth)
Dim aDataT  : aDataT  = Array("PDF file name", "Number of pages", vbCrLf, sRuler2, sRuler1)
Dim sFmtF   : sFmtF   = insertWidth("{0,-@F}{1,@P}", nFWidth, nPWidth)
Dim aDataF  : aDataF  = Array("", 0)
Dim sFmtS   : sFmtS   = insertWidth("{3}{2}{0,-@F}{1,@P}{2}{4}", nFWidth, nPWidth)
Dim aDataS  : aDataS  = Array("Total", 0, vbCrLf, sRuler2, sRuler1)

WScript.Echo oFmt.formatArray(sFmtT, aDataT)
Dim oFile
For Each oFile In oFS.GetFolder(sDir).Files
    aDataF(0) = oFile.Name
    aDataF(1) = getPdfPgCnt(oFile.Path)
    WScript.Echo oFmt.formatArray(sFmtF, aDataF)
    aDataS(1) = aDataS(1) + aDataF(1)
Next
WScript.Echo oFmt.formatArray(sFmtS, aDataS)

Function getPdfPgCnt(sFSpec)
  ' stolen from the VBScript Docs
  Dim lowerbound : lowerbound = 1
  Dim upperbound : upperbound = 1000
  getPdfPgCnt = Int((upperbound - lowerbound + 1) * Rnd + lowerbound)
End Function

Function insertWidth(sFmt, nFWidth, nPWidth)
  insertWidth = Replace(Replace(sFmt, "@F", nFWidth), "@P", nPWidth)
End Function

' stolen from http://stackoverflow.com/a/11262441/603855
Class cFormat
  Private m_oSB
  Private Sub Class_Initialize()
    Set m_oSB = CreateObject("System.Text.StringBuilder")
  End Sub ' Class_Initialize
  Public Function formatOne(sFmt, vElm)
    m_oSB.AppendFormat sFmt, vElm
    formatOne = m_oSB.ToString()
    m_oSB.Length = 0
  End Function ' formatOne
  Public Function formatArray(sFmt, aElms)
    m_oSB.AppendFormat_4 sFmt, (aElms)
    formatArray = m_oSB.ToString()
    m_oSB.Length = 0
  End Function ' formatArray
End Class ' cFormat 
```

输出：

```
========================================
PDF file name            Number of pages
----------------------------------------
xpl.txt                              706
1.abc                                534
xpl.vbs                              580
1.txt                                290
xx.txt                               302
----------------------------------------
Total                               2412
======================================== 
```

# php - Facebook 页面 - 发布到用户墙（在用户喜欢该页面后）

> ID：14490629
> 
> 赞同：0
> 
> 时间：2013-01-23T22:31:20.663
> 
> 标签：php, facebook, facebook-php-sdk

我希望它没有那么复杂，但由于 Facebook 已经改变了很多它的 API（关于权限等），我发现许多过时的信息并没有真正帮助我。情况是：

1.  我有一个带有 Page Tab 的 Facebook 页面
2.  我有一个与该页面相关联的 Facebook 应用程序（通过选项卡）。
3.  我自己的 WebApp 通过 Facebook PHP-SDK 将帖子发布到页面的墙上，每个用户都会在流中看到新闻。

问题：如何通过该应用程序发布到用户时间轴？

到目前为止我的代码（发布到页面的墙上）

```
require 'facebook.php';
$facebook = new Facebook(array(
    'appId'  => 'xxxxxxxxxxxxxx',
    'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxx',
));
$loginUrl = $facebook->getLoginUrl();
$user = $facebook->getUser();

$page_id = 'xxxxxxxxxxxxxxxxxxxx';
$page_info = $facebook->api("/$page_id?fields=access_token");
if( !empty($page_info['access_token']) ) {
    $args = array(
        'access_token'  => $page_info['access_token'],
        'message'       => "Neuer Test!"
    );
    $post_id = $facebook->api("/$page_id/feed","post",$args);
} else {
    $permissions = $facebook->api("/me/permissions");
    if( !array_key_exists('publish_stream', $permissions['data'][0]) || 
        !array_key_exists('manage_pages', $permissions['data'][0])) {
        header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream, manage_pages")) );
    }

} 
```

这工作正常，但该消息在喜欢该页面的用户的时间轴中不可用，仅在他们自己的流中可用。是否可以发布到他们的时间线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T22:29:46.417

不知道你是否还需要帮助。但以防万一，这段代码对我有用。它假设您有一个登录用户。并将其发布到用户的时间线。这段代码没有得到我相信的许可，因为 Facebook 有平台 TOS，所以你需要继续工作。试试这个：

```
 require_once('libs/facebook.php');

    // init new facebook class instance with app info (taken from the DB)
    $facebook = new Facebook(array(
        'appId' => 'your app id here',
        'secret' => 'your app secret here'
    ));

    $fb_user_id = $facebook->getUser();
    $location = "". $facebook->getLoginUrl(array('scope' => 'publish_stream'));

    if ($fb_user_id) {
        try {
            $fb_user_profile = $facebook->api('/me');   

        } catch (FacebookApiException $e) {
            $fb_user_id = NULL;

            print '<script language="javascript" type="text/javascript"> top.location.href="'. $location .'"; </script>';
            die();
        }
    } else {

        print '<script language="javascript" type="text/javascript"> top.location.href="'. $location .'"; </script>';
        die();
    }

    $ret_obj = $facebook->api('/me/feed', 'POST',
                            array(
                            'link' => 'www.google.com',
                            'message' => 'Google me!'
                                             )); 
```

# c - 在C数组之间插入元素

> ID：14490630
> 
> 赞同：0
> 
> 时间：2013-01-23T22:31:25.583
> 
> 标签：c

> **可能重复：**
> [在 char 数组中间插入字符](https://stackoverflow.com/questions/9285587/inserting-characters-in-the-middle-of-char-array)

我需要在静态数组的 2 个元素之间插入元素。我已经编写了以下代码。如果我们有比这更有效的代码，请告诉我。

```
int main()
{
    int a[4];

    a[0] = 10;
    a[1] = 20;
    a[2] = 30;

    int x = 15;

    memcpy(a+2,a+1,2);

    a[1] = x;

    printf("%d",a[2]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:46:00.280

您太担心低级优化 - 编译器会处理这个问题。

如果相信在这种情况下最明显的代码也是最快的：

```
a[3] = a[2];
a[2] = a[1];
a[1] = x; 
```

你不能得到比这更简单的了。

* * *

以下是编译器在优化代码时可以执行的操作的示例：

[https://stackoverflow.com/a/11639305/597607](https://stackoverflow.com/a/11639305/597607)

（10 行源代码变成了 4-5 条机器指令——让编译器完成它的工作！）。

# algorithm - 如何有效地为 8 球比赛打台球？

> ID：14490631
> 
> 赞同：34
> 
> 时间：2013-01-23T22:31:27.800
> 
> 标签：algorithm, optimization, language-agnostic

由于 8 球比赛的台球击球可以在多种规则下完成，所以我指的是这样的击球：

![在此处输入图像描述](../Images/97b010629fdcf5527a053a768c2d8afd.png)

即 8 号球必须在中心，并且沿两侧条纹和固体必须交替。剩下的两个球（条纹和实心）无关紧要。

假设您刚刚完成了一场比赛，收集球，将它们放在架子上，然后继续安排它们开始新的比赛。现在它们的顺序是随机的。你如何进行？

[免责声明：绘画艺术如下]

![在此处输入图像描述](../Images/cc76818be6c2abf3d76a6710e80199b9.png)

一个简单的方法是按顺序开始，顶部 -> 底部和左侧 -> 右侧。

例如，我们假设`1`在正确的位置。`5`不是，我们将它与 交换`2`，然后`4`与`3`（或与`8`）交换，但这已经是低效的，因为我们要么将 移动`4`到中心，要么将`8`in`4`的位置 - 即不是它必须在最后的位置.

还有我们想要在角落里制造哪种类型的球的决定。你如何预先决定？你应该考虑有多少球已经到位？在我的例子中，如果你想要角落里的灰色，你已经有 3 个就位（球 1、10、14）。如果你想要角落里的白色的，你只有 2 个就位 (2,11)。这应该重要吗？

为了形式化这一点，我们可以假设有~~二~~我们可以做的三个操作：

*   交换两个相邻的球
*   交换两个不相邻的球
*   旋转机架

由于我们可以使用双手，假设我们可以并行化第一个操作（同时交换 2 对球），而我们一次只能交换两个不相邻的球。

什么方法最适合这个任务，使时间最小化（在描述的时间单位中）？贪婪会是最好的吗？（这就是我把它们架起来时的做法，我猜）

编辑：根据现有（或以前的答案） - 您可能会假设角落中的条纹多于实体意味着步幅会更喜欢角落 - 并不是说​​这不是真的，但如果您做出这样的假设，请证明它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T23:24:37.597

笔记！这个答案是在轮换要求之前写的。请谨慎行事:)

这是我对问题的初步看法。

首先要做的是计算外部的奇偶性 - 如果它适合“角落中的条纹”，则为 +1，如果适合“角落中的实体”，则为 -1，如果它是 8 球则为 +0。这给了我们从 +12 到 -12 的范围，我们的目标是我们更接近的极端。（如果+0，选择+12或随机）

例如，这是 +1 +1 +1 -1 -1 +1 -1 -1 -1 +1 +0 -1，因此它是 -1 在角落倾斜的固体：

```
x o x x o
 x o x o
  8 x o
   o x
    o 
```

接下来要做的是将8号球移到中心。*如果您可以用它进行两次相邻的交换，将两个球移动到位，而不是一次相邻的交换只将一个球移动到位（或者如果它在角落里，那么一个不相邻的交换），这样做。*

```
x o x x o
 x 8 x o
  o x o
   o x
    o 
```

在我们移动了 8 个球之后，共享一个球的两个相邻交换的所有组合都可以由一个非相邻交换相同地产生，因此我们必须同时考虑的复杂性要低得多。

按此优先级排序所有剩余的移动：

- 外部两个相邻球之间的交换“价值 4”（如果这是我们的最后一个，则为 2）

- 两个相邻球之间的交换，一个在外面，“价值 2”（如果是我们的最后一个，则为 1）

- 外部两个球之间的交换“价值 2”

- 两个球之间的交换，一个在外面，是“价值 1”

并从上到下执行它们。

所以我们移动顶部的o，左侧（4），右侧的o（2），左下方的o（2），然后将x顶部与中间的o交换（2） . 我们最终在 2-2-1 系列中进行了五次交换，所以三步。

```
o x o x o
 x 8 x x
  o o o
   x x
    o 
```

（值得注意的是，如果我们瞄准角落里的条纹，这个问题也会很快解决。）

```
x x o o x
 o 8 o x
  o x o
   x o
    x 
```

我认为要求 4 回合是不可能的，但我还没有向自己证明这一点。

另一个工作示例：

这具有 +1 的奇偶性，因此我们的目标是角落中的条纹：

```
8 o o o x
 o o o x
  o x x
   x x
    x 
```

交换中心 x 的 8 个球 (1-)

```
x o o o x
 o o o x
  o 8 x
   x x
    x 
```

交换两个相邻的外部，4 点 (1-1)

```
x o o o x
 o o o x
  x 8 x
   o x
    x 
```

将相邻边缘交换为中心，2 点 (1-2-)

```
x o o o x
 o o x o
  x 8 x
   o x
    x 
```

交换边到边，2 分 (1-2-1-)

```
x o x o x
 o o x o
  x 8 x
   o o
    x 
```

3个动作。

编辑：这对于开篇文章中的示例非常有效，分两步解决：

这具有 +1 的奇偶性，因此我们的目标是角落中的条纹：

```
x x o o x
 o o x o
  o o 8
   x x
    x 
```

用 x 在边缘交换 8，然后用 o 在中心交换（解决两条边）（2-）

```
x x o o x
 o o x o
  o 8 x
   x o
    x 
```

在左上角和左下角交换相邻的 o 和 x（解决四个边）（2-2-）

```
x o x o x
 o o x o
  x 8 x
   o o
    x 
```

2个动作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T06:42:36.160

有`15!/(7!7!1!)=51480`可能的职位。其中，4 个是最终的：8 号和 9 号球可以互换，条纹/实心可以反转。我们会说这些位置的距离为 0。

对于这 4 个位置中的每一个，生成所有可能的移动（1 个交换或 2 个相邻交换）。对于这些之前未见过的移动生成的每个位置，记住是使用哪个移动生成它的，并给这些位置距离 1。然后对距离 1 处的每个位置做同样的事情，并给新位置距离 2。保持这样做直到没有更多的新职位。

这利用了这样一个事实，正如@DPenner 指出的那样，旋转总是可以用相邻的移动代替。

由于掉期是它们自己的逆向，从位置 A 到 B 的移动也是将位置 B 带回 A 的移动。

因此，您最终会得到所有位置的列表，并且对于每个不是最终位置的位置，移动肯定会使其更接近最终位置。

你会发现有 232 个位置至少需要 4 步。（编辑：我的邻接表之前包含一个错误。）例如：

```
 6-9,14-15     2-12       2-5,4-7       1-2
    x           x           x           x           o
   x x         x x         8 x         o x         x x
  x o x   =>  x o o   =>  x o o   =>  o 8 o   =>  o 8 o
 o o o x     o o x x     o o x x     x o x x     x o x x
o 8 o o x   o 8 o x o   o x o x o   o x o x o   o x o x o 
```

没有超过 4 步的初始位置。

编辑：首先交换 8 球的策略不是最佳的。例如：

```
 5-11     12-13,14-15    4-7,6-10
    x            x            x            x
   o o          o o          o o          o o
  o x o   =>   o 8 o   =>   o 8 o   =>   x 8 x
 x o x x      x o x x      x o x x      o o x o
8 x o x o    x x o x o    x o x o x    x o x o x 
```

但我们可以做得更好：

```
 3-11       1-2,3-5
    x            x            o
   o o          o 8          x x
  o x o   =>   o x o   =>   o 8 o
 x o x x      x o x x      x o x x
8 x o x o    o x o x o    o x o x o 
```

问题是 x 是角的错误类型，所以我们输了一步。

相反，策略应该是寻找一个不合适的球，但不能与相邻的球交换，或者因为它们是相同的，或者它们已经在适当的位置。角落应该是首选，因为它们的相邻交换选项最少。它应该与该位置的正确类型的球交换。如果第一个球的最终位置的球是错误的类型，则应选择错误位置的相邻球。这样，随后的相邻交换会将这些球放在正确的最终位置。

在上面的（反）示例中，8 号球需要长时间交换才能到达其最终位置。但是，#5 中的 x 是错误的类型，因此我们与相邻的 o 交换，即第二行中的第二个。

前面有 4 个动作的例子是这样解决的：

```
 11-2         12-5        13-3       9-10
    x           x           x           x           x
   x x         o x         o x         o o         o o
  x o x   =>  x o x   =>  x 8 x   =>  x 8 x   =>  x 8 x
 o o o x     o o o x     o o o x     o o o x     o o x o
o 8 o o x   x 8 o o x   x o o o x   x o x o x   x o x o x 
```

第一步，我们选择左下角的o。第一个 x 位于位置二。然后我们在#12 选择 8，我们可以把它带回家到 #5。底行中间的 o 是下一个。我们将它与 #3 的下一个错误放置的 x 交换。最后，我们交换#9 和#10 以获得最终机架。路径和以前不同，但我们还是用 4 步走的。

编辑：还有一点：在执行相邻交换时，应优先考虑那些最终没有两个球都处于最终位置的交换。原因是这意味着总共至少需要两步，因此最好尽快进行第一步。

例如，问题中的架子可以分两步解决：（2-4），（5,6）和（3-6），（12-13）。8号球首先被移动到它的最终位置，即使它被交换的白球还没有到达它的最终位置。如果先完成两次外围交换（2-4），（12-13），您仍然需要两次移动才能到达最后一个架子，总共需要进行次优的 3 次移动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T20:39:39.503

你有2个八球，骗子。

在给定的示例中，解决方案需要 2 步：

2-5, 3-8
3-4, 11-12

通过将问题配置为[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)(DP) 可以最好地找到最佳解决方案。由于该问题是多阶段的，具有固定成本且没有不确定性，因此将存在最佳解决问题的 DP 矩阵。

要创建矩阵：请注意，考虑到对称性，8 球可以位于 9 个位置之一。固体可以以大约（14 种选择 7）/2=1716 种不同的方式排列。这意味着机架配置的总数约为 1716 * 9 = 15,444。因此，您有 15,444 种不同的可能状态。计算从这些状态中的任何一个状态到任何其他状态的成本。这会产生一个包含 15,444 * 15,444 个单元格的矩阵，即大约十亿个单元格的四分之一。识别所有最终状态单元格。要解决矩阵，您从起始状态向前进行广度搜索，直到达到结束状态（或直到您达到的总成本大于您当前的最低成本）。通过这样做，您将可证明找到所有成本最低的路径。

请注意，上述解决方案有些幼稚，可以通过各种方式进行优化以产生更小的矩阵。例如，您可以使用旋转对称来减少单元数，并将成本 1（用于旋转机架）添加到正确的路径，但 8 球位于低中心位置之一。

```
Pseudocode:

Create DP Matrix:

(1) determine number of possible arrangements, A, of balls
(2) for each arrangement, make a list of possible unique moves  
---- the possible moves are:  
------- rotating right  
------- rotating left  
------- exchanging any pair of balls  
------- exchanging any two pairs of adjacent balls  
(3) for each move in A store a pointer to the resulting arrangement  
(4) for each arrangment make an attribute indicating whether it is an end state  

Solve Problem  
(5) goto arrangement for starting position S  
(6) set best-cost-so-far (BCSF) variable to infinity
(6) breadth search from S, accumulating current cost CC as +1 for each transition
(7) if you reach an end state CC < BCSF, then set BCSF = CC and make solution list contain only the current path
(8) if you reach an end state CC = BCSF, then add path to solution list
(9) if CC > BCSF abandon branch and try next branch

The result will be a list of all possible solutions and the minimum cost BCSF. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-03T02:12:42.523

萨鲁特，首先我必须说这是一个非常有趣和有趣的问题，而且是我在打球时没有想到的，尽管总共有 15 个球，一些额外的动作并不重要。

从货架描述和图像中，我们得到以下**规则**：

1.  角落总是相同的类型
2.  每边的中间总是与角相同的类型
3.  接触角的每组 2 个球始终是相同的类型（与角的类型相反）
4.  内部三角形始终有 8ball、条纹和实心（8ball 在顶部）
5.  在侧面，彼此靠近的球总是交替类型

正如@DPenner 在 中所述`Lemma 1`，轮换不是必需的，因为只要成本相同，它们可以用交换代替。如果您是 Rubick 粉丝并选择使用它们，您只需要一个。

## 不能在少于 4 次交换中解决！（*总是*）

您的示例图像最能证明这一点，无论您如何计算，您都需要从它们的位置移走 6 个*彩球*，而 8ball => 是 3½ 次交换，因为交换需要 2 个球，所以我们将其四舍五入为 4 次交换。
为什么是这样？
因为它不符合所有规则：

*   `[5,1,4]` `[2,6]` `[11,13]` `[10,12]`不能彼此靠近（休息 5）
*   `8ball`位于一侧而不是中间三角形（中断 4）
*   `[5,4]` `[6,12]` `[13,9]`并非都是相同的类型（中断 3），而且在`[1,5,4]`集合不与角落相对的情况下（再次中断 3）
*   `[2]`并且`[11]`与角的类型不同（中断 2）

## 算法

![8个球点](../Images/8686d6605dfcb39974eb47f6051ebc42.png)
**第一步：固定 8ball 将 8ball**
交换到它的位置。无论如何，它都需要在那里。
*这是旋转的唯一机会（如果 8ball 从内三角形开始，但位置不正确）*

**`Count`红色位置同类型球最多**。
最高计数的球留下，其余的点必须换掉。

```
IF count is 3 {
    #inside triangle will choose 
    IF inside triangle has 2 of a kind, that type stays (in the red spots)
    ELSE pick random
} 
```

**开始交换：**

*   做角球（选择一个需要改变的球，然后在角球找到一个相反的球）
*   做中间（选择一个需要改变的球并在一侧中间找到一个相反的球）
*   *如果角落和中间都完成了，最后的交换是在内部三角形中*

## 演示您的示例：

```
swap 8 with 3  #move1
count[stripe]=3 [6,13,9]  
count[solid]=3 [5,4,12]
highest count=3, checking inside, inside is correct, random pick: stripes stay
Pick 5, corners() correct, swap with middles(2)  #move2
Pick 4, corners() correct, swap with middles(11)  #move3
Pick 12, corners() correct, swap with middles(3)  #move4
Done. 
```

如果随机选择会选择固体留下：

```
Pick 6, swap with corners(10)  #move2
Pick 13, swap with corners(1)  #move3
Pick 9, swap with corners(14)  #move4
Done. 
```

## 演示2：

*将 3 改为 7，将“8 号白球”替换为 15 号球* ![demo2_with_ball_15](../Images/bef9d2619cadd571d7ef2dc115c03064.png)

```
swap 8 with 3  #move1
count[stripe]=3 [6,13,9]  
count[solid]=3 [5,4,12]
highest count=3, checking inside, inside has 2 of a kind(stripes) => stripes stay
Pick 5, corners() correct, swap with middles(2)  #move2
Pick 4, corners() correct, swap with middles(11)  #move3
Pick 12, corners() correct, swap with middles(15)  #move4
Done. 
```

*`Have fun!`*

PS：您可能还喜欢灰色位置的**算法变体＃2**，`counts`但我发现在现实生活场景中使用红点更容易。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-02T05:01:08.080

这是一个具有挑战性、令人深感沮丧和有趣的问题。我的猜想是以下是最佳解决方案：

*   根据 Patashu 的奇偶校验方法选择边角是条纹还是实心
*   无旋转
*   每次计时，除了 +3 移动可以将 8 球放在中心外，做出得分最高的移动
*   万一平手，选择无所谓？**编辑：**见底部注释。领带是困难的。

（我根据正确位置的球数量的净差来计分。）

以下是两个示例机架：

```
 x            8
   x x          o o
  o o x        o o x
 o o x x      o x x x
8 o o o x    o x x o x 
```

如果我们将位置 1 到 15 从左到右，然后从上到下编号，第一个机架求解为 (2-4/3-5)(5-11)(10-13)，第二个机架求解为 (4 -8/11-12)(5-10)(1-5)。

我最近一次证明的尝试只有在 11 个不同的机架上失败，直到对称（上面显示的两个是失败的变体）。这是我在尝试中发现的两个引理，希望能帮助其他人提供证据。

## 引理 1：不需要轮换

请注意，如果我们需要在解决方案中的某个时间点进行轮换，那么何时（轮换不会改变任何可用的交换）并不重要。此外，我们最多只需要旋转一次，因为 2 次顺时针旋转 = 1 次逆时针旋转，反之亦然。

因此，如果需要，让我们选择在最后一步进行轮换。此时，由于外侧是旋转对称的，外侧一定是正确的。所以 8 号球将在三个中心球之一中。如果它在正确的位置，我们不需要旋转。否则，我们可以使用它，但请注意交换也会完成机架。因此，在最佳解决方案中是不必要的。

## 引理 2：如果贪婪在 3 步内解决机架，则它是最佳的

让策略`A`成为贪婪的解决方案，让策略`B`成为任何试图更快的非贪婪解决方案。`B`必须至少做出一次非贪婪的举动。必然地，这不可能是最后一步。因此，如果`A`需要 n 轮完成一个机架，则`B`必须在第 n-2 轮或更早时进行其非贪婪移动。这意味着如果`A`在 2 圈或更短的时间内解决齿条问题，这是最佳的。

* * *

**编辑：**好吧，我刚刚在程序测试中运行了我的算法，发现它甚至不一致。事实上，这种联系似乎很难打破。考虑以下机架：

```
 x
   o o
  x o x
 x 8 o x
x o o x o 
```

我的算法将执行以下移动序列之一：(5-8/13-14)(7-8/10-15)、(5-8/10-15)(7-8/13-14)、( 5-8/14-15)(10-13)(7-8), (5-8/14-15)(7-8)(10-13), (5-8/9-10)(14) -15)(7-13)、(5-8/9-10)(7-13)(14-15)、(5-8/9-10)(13-14)(7-15)，或(5-8/9-10)(7-15)(13-14)。前两个以最佳的 2 个时间度量解决它，但其他两个以 3 个时间度量解决它。问题是 (14-15) 和 (9-10) 开关破坏了第二回合可能的 +4 移动。对该算法的修改可能需要先行，然后很快就会变得复杂。我开始认为没有“简单”的解决方案，@JeffreySax 的解决方案是可行的方法。另请注意，此机架也击败了贪婪的解决方案。贪婪的解决方案将执行 (13-14/10-15)(5-8)(7-8) 或 (13-14/10-15)(7-8)(5-8)。

# ruby-on-rails - 如何使用 heroku db:push

> ID：14490638
> 
> 赞同：0
> 
> 时间：2013-01-23T22:31:58.453
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku

我有一个 Ruby 1.9.3p194/Rails 3.2.7 应用程序。我想将我的本地数据库推送到heroku。我使用`heroku db:push`但我得到这些错误：

```
Schema:        100% |==========================================| Time: 00:00:11
Sending indexes
schema_migrat: 100% |==========================================| Time: 00:00:02
Sending data
5 tables, 30 records
magazines:       0% |                                          | ETA:  --:--:--
Saving session to push_201301231426.dat..
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: PGError: ERROR:  time zone displacement out of range: "2013-01-23 12:00:00.000000+5895158400" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:36:09.490

[查看这个已解决的 SO 问题](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range)

您使用的是 Ruby 1.9.3-p0 吗？显然切换到 1.9.2-p290 将解决此问题。

否则，请查看[这个 Github 问题。](https://github.com/ricardochimal/taps/issues/92)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T09:23:07.813

首先我安装**rvm 使用 ruby​​-1.9.2-p290**但我有一个 mac os 并且它有问题所以你可以在 rvm 上安装新的 ruby​​ 版本，就像这个 **rvm 使用 ruby​​-1.9.2-p290 --with-gcc=clang**之后你安装了 ruby​​ ，你需要安装 taps ，之后你可以使用**heroku db:push**

**1-** [Ruby、RVM、LLVM 和 MySQL](https://stackoverflow.com/questions/8000145/ruby-rvm-llvm-and-mysql)

**2-** [将数据推送到 Heroku 时出错：时区位移超出范围](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range/10129060#10129060)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:32:10.167

这是很多人都在经历的一个问题。切换版本对我没有用，我不得不使用此处找到的另一个修复程序：[Github 上的问题](https://github.com/ricardochimal/taps/issues/92)

# java - 无法在 ASP.NET MVC 应用程序中使用 Java 小程序

> ID：14490639
> 
> 赞同：2
> 
> 时间：2013-01-23T22:32:08.387
> 
> 标签：java, asp.net-mvc, applet, classnotfoundexception

这是我第一次必须使用 Java 小程序，但我失败得很惨。

我得到了一个需要放在 ASP.NET MVC 页面上的 java 小程序。我还获得了一个使用相同小程序的示例 WebForm。该示例工作得很好，但是当我将小程序放在 MVC 页面上时，我得到一个异常：ClassNotFoundException。它找不到 com.applet.SampleApplet.class。我试图将 Sample.jar 文件放在根目录和使用小程序但目前没有雪茄的视图中。这是在示例中有效但在我的应用程序中无效的部分。

```
 <object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" 
            width="276" height="296" align="center" 
            codebase="/supports/jre-7u1-windows-i586.exe">
        <param name="java_code" value="com.applet.SampleApplet.class">
        <param name="java_archive" value="Sample.jar">
        <param name="type" value="application/x-java-applet;version=1.4">
        <param name="language" value="en">
        <param name="country" value="US">
        <param name="id" value="Sample">
        <param name="name" value="Sample">
        <comment>
        <EMBED type="application/x-java-applet;version=1.4" 
               width="276" height="296" align="center" 
               pluginspage="/supports/jre-7u1-windows-i586.exe" 
               java_code="com.applet.SampleApplet.class">
        <param name="java_archive" value="Sample.jar">" 
               java_archive="Sample.jar" language="en" country="US" 
               id="Sample" name="Sample"/>
        <noembed>
            <p>Unable to start java plugin.</p>
        </noembed>
        </comment>
    </object> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T01:45:30.263

To make it work I needed to put the jar file into Content folder.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T16:59:53.830

如果您使用的是 net beans，请确保您将包放在顶部，以便它知道在哪里查找。

例如：

```
package sampleapplets;

import java.awt.Graphics;
import javax.swing.JApplet; 
```

# twitter - 与 Twitter Streaming api 断开连接，“管理员注销”

> ID：14490640
> 
> 赞同：0
> 
> 时间：2013-01-23T22:32:14.143
> 
> 标签：twitter

我最近开始使用流 API 并连接基本身份验证以对其进行测试，但它现在已停止流式传输。我得到错误：

```
{
    "disconnect":{
        "code":7,
        "stream_name":"XXXX-userstreamxxxx",
        "reason":"admin logout"
    }
} 
```

我能找到的唯一答案是，“您已使用相同的凭据再次连接，但最早的连接已断开”，但我不知道如何解决这个问题，也无法通过谷歌找到任何谨慎的答案。我的假设是我应该使用相同的登录名/密码组合，因为这才有意义，但我不知道还有什么可以改变的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T00:21:47.573

每个帐户一次只能打开一个流。因此，如果您打开了一个，并且您尝试使用相同的用户名/密码打开另一个，则会发生这种情况。

# windows - 删除所有子目录和子文件而不删除父/根目录？

> ID：14490644
> 
> 赞同：1
> 
> 时间：2013-01-23T22:32:59.043
> 
> 标签：windows, batch-file, command-line, directory

通过Windows Batch，删除文件夹的所有子目录和子文件而不删除/删除所述父/根文件夹的命令是什么？

这是我到目前为止所尝试的：

```
ECHO "Good riddance, cache! Muahahahahahaha"
cd "C:\Users\abrewer\Desktop\cache"
del * /q 
```

以上仅删除文件，但不删除子文件夹。我也尝试过 RMDIR 和 RD，这两个命令似乎删除了父/根目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T23:01:11.977

最简单的方法：

```
cd "C:\Users\abrewer\Desktop\cache"
rd /s /q . 
```

当它尝试删除父目录但失败时，它会输出一条错误消息，否则它可以正常工作。

或者，类似：

```
cd "C:\Users\abrewer\Desktop\cache"
del * /q
for /D %%i in (*) do rd /s /q "%%i" 
```

可能会奏效。如果您从命令行而不是在批处理文件中运行，请记住仅使用单个百分号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T23:02:53.163

```
@echo off
ECHO "Good riddance, cache! Muahahahahahaha"
pushd "C:\Users\abrewer\Desktop\cache"
del * /q
for /d %%F in (*) do rd /s /q "%%F"
popd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-22T23:52:55.060

```
cd "C:\Users\abrewer\Desktop\cache"
if %errorlevel% neq 0 exit /b %errorlevel%
rd /s /q . 
```

最佳答案的第一部分很棒，但也很危险。请确保您在代码中检查了一些错误，就好像由于某种原因该目录不存在一样，您将删除工作路径中的内容。

我太新了，无法添加评论，编辑队列已满，无法回答建议修改。

# php - 制作具有无限个参数的函数

> ID：14490646
> 
> 赞同：0
> 
> 时间：2013-01-23T22:33:30.443
> 
> 标签：php, function

我有这个块，它在我的代码中一遍又一遍地出现，有细微的变化，我想使用一个函数，但据我所知，在编写函数时你设置了参数的数量，

我使用的代码块是

```
 $type = $xml->response->williamhill->class->type;
    $type_attrib = $type->attributes();
      echo "<h2>".$type_attrib['name']."</h2>";
      echo "<h2>".$type_attrib['url']."</h2>"; 
```

主要区别在于，通过 xml 文档向下钻取的第一行，它可能会在其他地方进一步向下钻取，这可能与函数有关吗？

IE。在某些地方可能需要看起来像这样：

`$xml->response->williamhill->class->type->market->participant`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:46:28.617

您可以使用 XPath：

```
function get_type_as_html($xml, $path)
{
  $type = $xml->xpath($path)[0]; // check first if node exists would be a good idea
  $type_attrib = $type->attributes();
  return "<h2>".$type_attrib['name']."</h2>" .
         "<h2>".$type_attrib['url']."</h2>";
} 
```

用法：

```
echo get_type_as_html($xml, '/response/williamhill/class/type'); 
```

此外，如果此路径的任何部分始终相同，您可以将该部分移动到函数中，即

```
$type = $xml->xpath('/response/' . $path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:36:31.883

不需要无限数量的参数。做到这一点的方法是使用一个参数，每次调用该函数时该参数都会有所不同。

首先定义函数并将`$type`变量作为参数：

```
function output_header($type)
{
    $type_attrib = $type->attributes();
    echo "<h2>".$type_attrib['name']."</h2>";
    echo "<h2>".$type_attrib['url']."</h2>";
} 
```

`$xml->...`然后，您可以使用您喜欢的任何属性调用该函数。

```
<?php
    output_header($xml->response->williamhill->class->type);
    output_header($xml->response->williamhill->class->type->market->participant);
?> 
```

# c++ - 适用于 Mac 的 C++ IDE

> ID：14490659
> 
> 赞同：1
> 
> 时间：2013-01-23T22:34:26.907
> 
> 标签：c++, xcode, git, gcc, sublimetext2

我通常使用 Xcode 在我的 mac 上开发 C++ 应用程序；但是，我想迁移到 GCC 4.7.2。Xcode 支持的最新版本是 4.2。有谁知道我可以如何更改 Xcode 中的编译器以便我可以使用 gcc 4.7.2？如果这不可能，你们中的任何人推荐其他 IDE 吗？我目前正在研究 eclipse，因为我将它用于 Java 开发。

我也可以使用 Makefiles 并从终端编译，那么有没有比使用 IDE 更好的解决方案？我读过关于 sublime text 2 的文章，它是一个强大的文本编辑器。我可以将它用于我的 C++ 项目，然后从终端编译。那会是最好的选择吗？另外，当我广泛使用 git 时，有没有办法将 sublime text 2 与 git 集成。如果你推荐 Sublime Text 2，你能否给我一些对 C++ 开发有用的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:46:09.230

您可以在项目构建设置中设置编译器。单击左侧列表中的项目文件，选择“Build Settings”，找到“Compiler for C/C++/Objective-C”并选择其他。您可能必须指定完整路径。

应该注意的是，gcc 4.7 无法在 OS X 10.8 和可能的 10.7 上编译 Objective-C，它无法解析 Apple 最新的语法添加。但如果你坚持纯 C++，你应该没问题。

是否使用和 IDE 在很大程度上是主观的。就我个人而言，我只将 XCode 用于 Obj-C 项目，但这取决于你。

# mysql - MySQL条件检查

> ID：14490660
> 
> 赞同：1
> 
> 时间：2013-01-23T22:34:31.257
> 
> 标签：mysql

如何构建此查询验证，以便它独立验证电子邮件和密码。因此，如果用户输入正确的电子邮件，位置（见代码）将不同于用户输入正确的密码但错误的电子邮件？这是查询，if 语句设置为 GET 错误变量：

```
$mysql = mysql_query("SELECT * FROM employees WHERE email = '{$email}' AND hashed_password = '{$hashed_password} '");

if ( mysql_num_rows($mysql) < 1 )
{
    header ("Location: index.php?error=1");
    die();    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:48:18.830

```
SELECT hashed_password = '{$hashed_password}' AS is_password_correct 
FROM employees WHERE email = '{$email}' 
```

如果没有匹配 $email 的此类条目，此查询将返回零行。

如果存在与 $email 匹配的行，则查询将根据选择列表中的布尔相等比较是真还是假而返回 1 或 0。

然后，您可以根据三种可能的状态在您的应用程序中执行不同的操作。

您应该停止在 PHP 中使用已弃用的“mysql”函数，它们将在 PHP 的下一个版本中消失。使用 mysqli 或 PDO。

此外，您应该学习使用准备好的查询并将您的 $hashed_pa​​ssword 和 $email 作为查询参数传递。然后您可以避免 SQL 注入漏洞，而不必担心转义字符串。

这是一个使用 PDO 的完整示例（未经测试）：

```
$stmt = $pdo->prepare("SELECT hashed_password = :password AS is_password_correct 
    FROM employees WHERE email = :email");
if ($stmt === false) {
    // always check for errors
}
$result = $stmt->execute(array(":password"=>$hashed_password, ":email"=>$email));
if ($result === false) {
    // always check for errors
}
if ($stmt->rowCount() == 0) {
    // no such user
} else {
    while ($row = $stmt->fetch()) {
        if ($row["is_password_correct"] == 1) {
            // password is correct for the given user
        } else {
            // password is wrong
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:44:09.993

一种简单的方法是使用`OR`子句，而不是`AND`在 PHP 端进行比较：

```
$mysql = mysql_query("SELECT email, hashed_password FROM employees WHERE email = '{$email}' OR hashed_password = '{$hashed_password} '");

if ( mysql_num_rows($mysql) < 1 )
{
    // e-mail and password not found
    header ("Location: index.php?error=1");
    die();    
}
else
{
    $rows = mysql_fetch_assoc($mysql);

    if ($rows["email"] != $email)
    {
        // e-mail not found
    }
    else if ($rows["hashed_password"] != $hashed_password)
    {
        // passwords do not match
    }

} 
```

# xml - 从 SQLPLUS 生成 xml 时如何插入新行

> ID：14490661
> 
> 赞同：1
> 
> 时间：2013-01-23T22:34:31.947
> 
> 标签：xml, oracle, sqlplus

使用生成的 XML

```
XMLAgg(XMLElement('student', ...)...) 
```

将所有内容都吐到一条线上。鉴于我有一个非常大的表，它在假脱机时达到了行长限制。

我想让每个 <student>...</student> 节点在单独的行上。[该](https://www.ibm.com/developerworks/mydeveloperworks/blogs/xmldatabase/entry/how_to_generate_xml_from_relational_data_with_line_breaks?lang=en)页面建议使用 XMLText(x'0A') 插入新行，但 SQLPlus 似乎无法识别它。

我已经尝试过：

```
set long 2000000000
set linesize 32767
set wrap on
set trimspool on 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:46:11.143

10g 中的常用技巧是添加`.extract('/*')`您正在执行的外部 xml 操作，例如

```
xmlagg(....).extract('/*') 
```

但这在 11g 中不起作用。对于使用 xsl 转换的跨版本兼容的版本，请参阅使用[Oracle 数据库表中的自定义 XML 标记生成 XML 文件](https://stackoverflow.com/questions/14466485/generate-xml-file-with-customized-xml-tags-out-of-oracle-database-table/14469525#14469525)。

10.2.0.4：

```
SQL> create table foo (id) as select rownum from dual connect by level <= 2;

Table created.

SQL> select xmlagg(xmlelement("id", xmlelement("id2", id))).extract('/*') a from foo;

A
--------------------------------------------------------------------------------
<id>
  <id2>1</id2>
</id>
<id>
  <id2>2</id2>
</id>

SQL> select xmlserialize(content xmlagg(xmlelement("id", xmlelement("id2", id))).extract('/*') indent) a from foo;
select xmlserialize(content xmlagg(xmlelement("id", xmlelement("id2", id))).extract('/*') indent) a from foo
                                                                                                *
ERROR at line 1:
ORA-00907: missing right parenthesis

SQL> select xmlagg(xmlelement("id", xmlelement("id2", id))).transform(xmltype('<xsl:stylesheet version="1.0"
  2   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  3   <xsl:output omit-xml-declaration="yes" indent="yes"/>
  4   <xsl:template match="node()|@*">
  5    <xsl:copy>
  6     <xsl:apply-templates select="node()|@*"/>
  7    </xsl:copy>
  8   </xsl:template>
  9  </xsl:stylesheet>')) a from foo;

A
--------------------------------------------------------------------------------
<id>
  <id2>1</id2>
</id>
<id>
  <id2>2</id2>
</id> 
```

和 11.2.0.2/3：

```
SQL> select xmlagg(xmlelement("id", xmlelement("id2", id))).extract('/*') a from foo;

A
--------------------------------------------------------------------------------
<id><id2>1</id2></id><id><id2>2</id2></id>

SQL> select xmlserialize(content xmlagg(xmlelement("id", xmlelement("id2", id))).extract('/*') indent) a from foo;

A
--------------------------------------------------------------------------------
<id>
  <id2>1</id2>
</id>
<id>
  <id2>2</id2>
</id>

SQL> select xmlagg(xmlelement("id", xmlelement("id2", id))).transform(xmltype('<xsl:stylesheet version="1.0"
  2   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  3   <xsl:output omit-xml-declaration="yes" indent="yes"/>
  4   <xsl:template match="node()|@*">
  5    <xsl:copy>
  6     <xsl:apply-templates select="node()|@*"/>
  7    </xsl:copy>
  8   </xsl:template>
  9  </xsl:stylesheet>')) a from foo;

A
--------------------------------------------------------------------------------

<id>
 <id2>1</id2>
</id>
<id>
 <id2>2</id2>
</id> 
```

简而言之，要执行此版本不可知论，您应该使用 XSL。如果您只是尝试将其用于临时内容，那么`extract`在 10g 上键入`xmlserialize`更短，在 11g 上更短。

# c++ - 禁止引用捕获

> ID：14490663
> 
> 赞同：1
> 
> 时间：2013-01-23T22:34:33.437
> 
> 标签：c++, c++11, lambda

是否有一种巧妙的方法可以防止对象通过引用被捕获到兰巴中？例如，我想禁止这样做：

```
class A {};

void Foo()
{
    A a;
    auto lamda = [&a](){};      // Disallow this
    // give lambda to async process
    // use A to help know when the lamda finally gets called
} 
```

我想防止这种情况发生，因为`A`在这种情况下很容易被滥用，所以我想防止用户伤害自己。有人可能会争辩说，任何类都可能被滥用，但鉴于`A`'s 的合同，用户这样做*确实*很诱人。我可以根据需要自由包装、更改和以其他方式混淆 A。

* * *

**编辑**

创建 lambda 后，它将被移交给异步进程，而当前线程内联等待，直到该异步进程完成。 `A`是一个帮助了解异步操作何时完成的类（想想`boost::future`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T22:42:44.307

你不能那样做。任何类型的左值都`T`可以绑定到类型的变量`T &`。您不能阻止对象成为左值表达式（例如 id 表达式）的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:50:53.757

lambda 只是函数对象的语法糖。上面的 lambda 基本上等同于这样的东西：

```
class SomeAnonymousFunctor {
    A &a;
public:
    SomeAnonymousFunctor(A &foo) : a(foo) {}
    void operator()() const {}
};

void Foo()
{
    A a;
    auto lamda = SomeAnonymousFunctor(a);      // Disallow this
} 
```

所以你看，为了处理潜在的问题，现在你必须要么禁止构造函数或函数接受 type `A &`，要么禁止在类中存储类型`A &`。

# ruby-on-rails - 翻译日期对象

> ID：14490664
> 
> 赞同：0
> 
> 时间：2013-01-23T22:34:35.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在控制器中，我有这样的东西：

```
 def methodfoo
    # set the profile attributes
    @start_date = Date.parse('June 24th, 2002')
    @college = 'University of Chicago'
    render :layout => 'profile'
  end 
```

在 YML 文件中我添加了这个：

```
 date:
    formats:
      default: "%Y-%d-%m"
      short: "%b %d"
      long: "%B %d, %Y" 
```

在 html.erb 文件中，我添加了“t”函数并像这样使用它：

```
<ul><li><%= t('.started') %> <%= t(@start_date) %></li></ul> 
```

但它不起作用：它没有翻译它。我做错了什么？

# javascript - 如何使用 JW Player 在所有浏览器/设备中播放视频？

> ID：14490669
> 
> 赞同：3
> 
> 时间：2013-01-23T22:34:55.340
> 
> 标签：javascript, twitter-bootstrap, video, jwplayer

我在我的项目中使用 JW Player，其中包含许多格式的视频：MP4、FLV、OGV、WMV

我阅读了每个浏览器支持的不同格式的文档。所以，现在我使用 MP4（Chrome、Safari）、FLV（IE、7、8、9）和 WEBM（Mozilla）。

```
jwplayer('container').setup({
                height: 309,
                width: 549,
                levels: [
                    { file: "video.mp4" },
                    { file: "video.webm" },
                    { file: "video.flv" }
                ], 
                'modes': [
                    {type: 'html5'},
                    {type: 'flash', src: "jwplayer.flash.swf"},
                    {type: 'download'}
                ]
}); 
```

我的问题是，如果此代码执行：检查浏览器是否支持 HTML5 或 FLASH -> 取决于浏览器自动重现 MP4（Chrome - Safari）或 FLV（IE）或 WEBM（Mozilla）。

因为，尤其是在 mozilla 中，我第一次收到消息：“错误加载媒体：无法播放文件”。然后当我单击 2 或 1 次时，播放视频。

也许这发生在文件的顺序上？

* * *

## 更新

我更改了 mime.conf 设置和 .htaccess，添加了以下几行：

注意：我在 Codeigniter 项目中使用 Drupal 的 .htaccess

.ht 访问：

```
#
# Apache/PHP/Drupal settings:
#

#For disable gzip
SetEnvIfNoCase Request_URI \.(og[gv]|mp4|m4v|webm)$ no-gzip dont-vary

#For add mime types
AddType video/ogg  .ogv
AddType video/mp4  .mp4
AddType video/webm .webm
[...] 
```

哑剧配置文件

```
#
# If the AddEncoding directives above are commented-out, then you
# probably should define those extensions to indicate media types:
#
AddType application/x-compress .Z
#AddType application/x-gzip .gz .tgz
AddType application/x-bzip2 .bz2
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm 
```

我禁用了 gzip 压缩，但问题仍然存在。只有我的应用程序进入 facebook 的 iframe 导致视频 webm 失败。MP4 工作正常。

* * *

## 更新 2

这里的问题是 Twitter Bootstrap。我用它来显示模态。在显示带有视频的模态之前，我将 cookie 保存在浏览器中。

当我将视频放入模态时，视频无法播放。当我点击 2 次视频时，该视频播放。仅在 Mozilla Firefox 中；Chrome，IE 7-8-9 工作正常。

当我把视频放在模态框里时。这在所有浏览器中都能正常播放。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:25:59.827

由于通过查看您的链接，我已经能够确定您现在使用的是 JW6，而不是 JW5，您应该使用不同的代码。

这段代码：

```
jwplayer('container').setup({
                height: 309,
                width: 549,
                levels: [
                    { file: "video.mp4" },
                    { file: "video.webm" },
                    { file: "video.flv" }
                ], 
                'modes': [
                    {type: 'html5'},
                    {type: 'flash', src: "jwplayer.flash.swf"},
                    {type: 'download'}
                ]
}); 
```

相反，应该看起来像这样，例如：

```
jwplayer('container').setup({
                height: 309,
                width: 549,
                playlist: [{
                sources: [
                    { file: "video.mp4" },
                    { file: "video.webm" },
                    { file: "video.flv" }
                ]
                }]
}); 
```

这是因为在 JW6 模式中被移除，HTML5 已经是主要模式，而“l​​evels”被“sources”取代。

这是一个迁移文档 - [http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6](http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6)

在 jw6 中使用多个文件的示例在这里 - [http://www.longtailvideo.com/support/jw-player/29251/mp4-and-webm-formats](http://www.longtailvideo.com/support/jw-player/29251/mp4-and-webm-formats)

# asp.net-mvc-4 - 在 FluentValidation 中将子错误传播给父级

> ID：14490671
> 
> 赞同：0
> 
> 时间：2013-01-23T22:35:13.600
> 
> 标签：asp.net-mvc-4, fluentvalidation, razor-2

**环境：**
我正在使用 MVC4、Razor 2 和 FluentValidation.MVC4 (3.4.6.0)。

**场景：**
我有一个特定页面的复杂视图模型，它上面还有一个子视图模型，如下所示：

```
public class ProfileViewModel
{
    public string FirstName {get; set;}
    public PhoneNumberViewModel Primary {get; set;}
    // ... other stuff ... //
}

public class PhoneNumberViewModel
{
    public string AreaCode { get; set; }
    public string Exchange { get; set; }
    public string Suffix { get; set; }
    public string Extension { get; set; }
} 
```

可以编辑此配置文件并将其发回以进行更新。我为两者创建了 Fluent Validators，如下所示：

```
public class ProfileViewModelValidator : AbstractValidator<ProfileViewModel>
{
    public ProfileViewModelValidator()
    {
        RuleFor(m => m.FirstName).NotEmpty().WithMessage("Please enter a First Name,");
        RuleFor(m => m.Primary).SetValidator(new PhoneNumberViewModelValidator()).WithMessage("Hello StackOverflow!");
        // ... other validation ... //
    }
}

public class PhoneNumberViewModelValidator : AbstractValidator<PhoneNumberViewModel>
{
    public PhoneNumberViewModelValidator()
    {
        RuleFor(m => m.AreaCode).NotEmpty();
    }     
} 
```

然后，当然，我有视图来显示所有内容。

个人资料视图片段：

```
...
@Html.TextBoxFor(m => m.FirstName)
@Html.EditorFor(m => m.PrimaryPhoneNumber)
... 
```

电话号码编辑器模板片段：

```
...
@Html.ValidationLabelFor(m => m, "Primary Phone:")
@Html.TextBoxFor(m => m.AreaCode)
@Html.TextBoxFor(m => m.Exchange)
@Html.TextBoxFor(m => m.Suffix)
@Html.TextBoxFor(m => m.Extension) 
@Html.ValidationMessageFor(m => m)
... 
```

如果它是相关的，我会设置一些东西，以便它自动将验证器与各种对象连接起来。实际上，我什至不需要`.SetValidator()`上面的那一行……由于接线，一切都得到了验证。

**目标：**
如果我不输入名字，我会在 ValidationMessageFor 创建的区域中收到上面提供的错误消息。但是，如果子 PhoneNumberViewModel 的任何元素验证失败，我什么也得不到。文本框突出显示红色，这很棒，但我没有收到我在 中提供的消息`.WithMessage()`，表明我的子属性无效。

目前我正在通过我的控制器中的额外工作来实现它......它在子对象上查找错误，然后将错误添加到父对象。这种方法闻起来非常非常糟糕。它将验证相关的问题放在控制器中，我只是不希望它们在那里。更不用说它最终也有大量的字符串索引来挖掘 ModelState，这只是......恶心。

**是否有一种简单的方法可以为 ProfileViewModelValidator 定义验证规则，如果子验证失败，它将为 ProfileViewModel 添加错误？和/或它应该工作，但我做错了什么？**我已经搜索和搜索，但我找不到满意的解决方案。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:45:52.540

我发现了与问题中包含的臭名昭著的解决方案不同的解决方案。它也不太理想，但我认为我更喜欢上面提供的解决方案。也许其他人会同意，因此在出现更清晰的答案之前它可能很有用。

我向 中添加了一个属性，该属性将`PhoneNumberViewModel`整个电话号码作为格式化字符串返回：

```
public string FullNumber
{
   get { return string.Format("{0}{1}{2}{3}", AreaCode, Exchange, Suffix, Extension); }
} 
```

然后，除了每个组件属性的规则之外，您还可以将验证规则应用于此属性。如果仅将 应用于`.WithMessage()`FullNumber 属性，则最终将获得您期望的验证消息（并且仅一次）以及在失败时为每个单独的框突出显示的文本框。

这种方法的主要缺点是您最终会重复验证规则。您单独验证每个组件，然后还必须验证组合属性，这基本上是您已经完成的验证的组合。您将代码加倍，处理量加倍。您还会将可能出错的地方增加一倍。

在我的情况下，我使用的是正则表达式，所以还不错......而且我更喜欢它在控制器中嵌入错误传播代码。然而，它仍然不理想 - 希望会有更好的解决方案出现。

# android - 在 Android 线程中显示 Toast

> ID：14490672
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:35:13.513
> 
> 标签：android, multithreading, toast, android-context

> **可能重复：**
> [Android：线程中的吐司](https://stackoverflow.com/questions/3134683/android-toast-in-a-thread)

我正在尝试使用标准方法在 Thread 中显示 Toast：

```
Toast.makeText(context, "Hello World!", Toast.LENGTH.SHORT).show(); 
```

在正常情况下，这当然是有效的。但是当我尝试从一个单独的线程调用时，我遇到了一个异常：

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

我完全不知道这意味着什么。

我传递的上下文值是应用程序本身（应用程序继承自上下文）或`Application.getApplicationContext()`.

顺便说一句，我也完全不知道为什么会有这个多余的东西。应用程序（它本身已经是一个上下文）和`Application.getApplicationContext()`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T22:37:07.837

您不能做任何影响工作线程 UI 的事情 - 包括显示 toast。用于`Activity.runOnUiThread()`在主线程上执行该行。像这样：

```
MyActivity.runOnUiThread(new Runnable()
{
    public void run()
    {
        Toast.makeText(context, "Hello World!", Toast.LENGTH.SHORT).show();
    }
}); 
```

或者使用`Handler`在主线程及其`post()`方法上创建的对象。非常相似的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:49:23.760

您不能直接从后台线程操作 UI。一种解决方案是使用[Handler](https://developer.android.com/reference/android/os/Handler.html)对象在线程之间进行通信，并让它为您显示 Toast。像这样的东西：

```
Handler h = new Handler() {
  public void handleMessage(Message msg){
    if(msg.what == 0){
      Toast.makeText(context, "HelloWorld!", Toast.LENGTH_SHORT).show();
    }
  }
}; 
```

然后在您的后台线程中，您可以使用它：

```
h.sendEmptyMessage(0); 
```

发送您已准备好展示 Toast 的信号。

# eclipse - Weblogic.xml 及其无法解析“URL 映射类”属性

> ID：14490673
> 
> 赞同：3
> 
> 时间：2013-01-23T22:35:33.707
> 
> 标签：eclipse, weblogic, weblogic-10.x

我有一个针对 WebLogic 10.3.2 的 ICEfaces 1.8.2 应用程序。也就是说，它是一个使用“Oracle WebLogic Web App Extensions 10.3.2”方面的分面项目（其中包括 ICEfaces EE 1.8.2、Java 1.6、Java Annotation Processing Support 5.0、Javascript 1.0、JSF 1.2 和 Dynamic网络模块 2.5)。

它无法部署，到目前为止，我不知道为什么。

我可能正在寻找救命稻草，但我一直在查看 weblogic.xml，因为它在 URL 映射类上显示错误。它说它无法解析 weblogic.servlet.utils.ServletMapping，即使这实际上是默认设置。

![1](../Images/c3c88bcb2e498efcb852994444641ae2.png) ![2](../Images/b1d661912bd321d1647b74bf10d95bf3.png)

我已经搜索了相当多的答案，但我发现文档是微不足道的，并且这个确切问题发生的实例不存在。

我正在使用 Spring 2.5.6（并且 JAR 在构建路径上）-我应该引用它的映射类吗？我需要显式引用 WebLogic JAR 文件吗？

很抱歉到处都是。我只是不知道该怎么做。如果这被证明是徒劳的，我将在此处或在新线程中发布失败部署的堆栈跟踪。看起来我应该能够清除这个错误，至少消除它成为罪魁祸首的可能性。

谢谢！格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T02:32:22.913

这个问题在新版本的 weblogic 12 c 中自动解决了。

或者试试这个......

将 weblogic.jar 添加到项目构建路径。

# python - Python 的 I/O 优化

> ID：14490677
> 
> 赞同：0
> 
> 时间：2013-01-23T22:35:46.837
> 
> 标签：python, performance, io, built-in, chunks

我正在编写一个包含多行代码的程序。目前，我正在分别处理每一行 -> 当每一行进入时，我将其剥离、存储等，然后通过 sys.stdin.readline() 方法请求下一行。我想知道是否有办法提高我的效率，因为我的程序目前太慢了。一次取所有行是否更快（我知道我期待多少行），将它们存储在一个列表中然后处理它们？如果是这样，是否有任何内置功能可以提高速度并且可以有效地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:46:20.573

您可以通过一次读取所有行然后将它们剥离并将它们放入如下列表中来加快速度：

```
import sys
lines = sys.stdin.read().splitlines(False)
if lines:
    # process lines list.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:25:05.357

该`readlines()`方法将读取文件，并自动将其拆分为由换行符分隔的列表。然后，您可以将该`rstrip('\r\n')`方法迭代地应用于列表。或者，如果您知道换行符（对于 *nix，通常是 '\n'），您可以像这样链接 read 和 split 方法`.read().split('\n')`：

示例代码：

```
file_ob = open(path/to/file,'r')
# Method 1
file_list = file_obj.readlines()
for f in file_list
    clean = f.rstrip('\r\n')
    #do something with clean
# Method 2
clean_list = file_obj.read().split('\r')
# do something with clean_list 
```

# css - CSS - 最后调用的样式表不是覆盖/重要的

> ID：14490687
> 
> 赞同：1
> 
> 时间：2013-01-23T22:36:30.790
> 
> 标签：css

我正在编写一个 jQuery 脚本，它通过对旧网站应用流体网格系统来帮助它们做出响应。

一切都很好，除了一些事情。首先，插件和样式表在页面末尾被调用，因此 CSS 样式应该覆盖页面上的任何其他内容。但是（我认为这是由于特殊性）当我有：

```
<div id="header" class="span4">

#header {
float: right;
width: 960px;
margin-left: -5em;
}

[class*="span"] {
display: block;
float: left;
width: 100%;
margin-left: 2.564102564102564%;
} 
```

`#header`样式优先，即使 CSS 中的样式`.span`较低。我知道它通常被认为是不好的形式，但最好/唯一的方法是`!important`从我的插件样式表中添加到每个样式中？它们**很**重要，使用插件的全部意义在于覆盖您当前的样式表，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:50:41.650

一个不完美的解决方案是用 2-4 个具有不同 id 的 div 包装 body 标签的内部 html，以便流体 css 文件中的 css 更具体：

HTML：

```
<html>
    <body>
        <div id="wrapper_1">
            <div id="wrapper_2">
                <div id="wrapper_3">
                    <div id="header" class="span4">
                        This is set as red by the main css file, but is rendered as blue, because the fluid css file has more specific declarations.
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
/* MAIN CSS FILE */
#header {
color: red;
}

/* END MAIN CSS FILE */

/* FLUID CSS FILE */
#wrapper_1 #wrapper_2 #wrapper_3 [class*="span"] {
color: blue;
}

/* END FLUID CSS FILE */ 
```

这是一个演示：http: [//jsfiddle.net/j5gt7/](http://jsfiddle.net/j5gt7/)

有关更多信息，您可以阅读[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

这种解决方案并不完美，因为元素可能具有内联样式，或者主 css 可能具有超过 2-4 个 ID 的选择器，这将覆盖流体 css（或使用 !important 设置的规则）。

# uitabbarcontroller - 如何使用情节提要对 UITabbar 控制器进行子类化？

> ID：14490689
> 
> 赞同：1
> 
> 时间：2013-01-23T22:36:33.270
> 
> 标签：uitabbarcontroller, subclass

我有一个使用情节提要的标签栏应用程序。Tab 1 是带有 Mapview 的 UIViewController，Tab 2 是 UITableViewController。

appdelegate 调用网络获取（通过自定义类）并获取该网络响应并解析它（通过自定义类），然后将信息放入 CD-db（通过自定义类）。

MapVC 从 CD-db 获取结果并填充 NSMutableArray（属性）以循环通过。该数组包含一个带有 2 个坐标的自定义 CD-db 对象，用于在 for 循环中创建 MKAnnotation。计算每个 MKAnnotation 到 userLocation 的距离，并在其 subtitle 属性中使用距离值完成 MyLocation 类对象。因此地图上的每个图钉都显示一个标题（名称）和副标题（距离）。

TableVC 创建对 CD-db 的单独提取并填充其数组属性以在 cellForRowAtIndexPath (CFRAIP) 中使用。

现在我希望表格视图也显示每个单元格中的距离。所以有人建议我继承 uitabbarcontroller 并将 TableVC.tableview 的委托/数据源设置为 MapVC。我的问题是，如何子类化我的 uitabbarcontroller 并设置委托和数据源？

类似于：在应用程序委托中获取窗口的 rootviewcontroller？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:15:54.207

首先你需要继承UITabBarController。在 Xcode 中新建一个文件，将 UITabBarController 设置为父类。

然后转到您的故事板并选择 tabbarcontroller，将其自定义类设置为您刚刚创建的类。

在`viewDidLoad`tabVC 中获取它的子 VC 并找到你想要的。这是伪代码，我以后可以整理一下：

```
CSMapListViewController *mapListViewController;
CSTableViewController *tableViewController;

for (UIViewController *vc in self.viewControllers)
{
    if ([vc isKindOfClass:[CSMapListViewController class]])
    {
        mapListViewController = (CSMapListViewController *)vc;
    } else if ([vc isKindOfClass:[CSTableViewController class]])
    {
        tableViewController = (CSTableViewController *)vc;
    } 
}

tableViewController.tableview.datasource = mapListViewController; 
```

希望有帮助。

# c++ - 将不同的图像设置为数组

> ID：14490690
> 
> 赞同：0
> 
> 时间：2013-01-23T22:36:40.940
> 
> 标签：c++, arrays, qt

我正在制作一个菜单小部件，我需要为每个小部件设置不同的图像。小部件存储在一个数组中。有谁知道我可以用什么来为数组的每个实例设置不同的图像？

如果需要更多信息，请告诉我！

这是小部件的 .cpp

```
#include "iconwidget.h"
#include <QPaintEvent>
#include <QPainter>
#include <QPainterPath>

iconWidget::iconWidget(QWidget *parent) :
    QWidget(parent)
{
    this->resize(ICON_WIDGET_WIDTH,ICON_WIDGET_HEIGHT);
    pressed = false;
}

void iconWidget::paintEvent(QPaintEvent *event)
{
    QRect areatopaint = event->rect();
    QPainter painter(this);
    QBrush brush(Qt::black);

    QPointF center = this->rect().center();

    QPainterPath icon;
    icon.addEllipse(center,30,30);
    painter.drawPath(icon);

    if(pressed)
    {
        brush.setColor(Qt::red);
    }

    painter.fillPath(icon, brush);
}

void iconWidget::mousePressEvent(QMouseEvent *event)
{
    pressed = true;
    update();
    QWidget::mousePressEvent(event);
}

void iconWidget::mouseReleaseEvent(QMouseEvent *event)
{
    pressed = false;
    update();
    QWidget::mouseReleaseEvent(event);
} 
```

这是制作图标并移动它们的功能。我只希望创建的每个图标都有不同的图像。

```
void zMenuWidget::createAndLayoutIcons(zMenuWidget* const)
{
    int outerRadius = 150;
    int innerRadius = 80;
    int radius = (outerRadius + innerRadius)/2;
    double arcSize = (2.0 * M_PI)/ NUM_ICONS;

    QPointF center;
    center.setX(this->size().width());
    center.setY(this->size().height());
    center /= 2.0;

    //Loop for finding the circles and moving them
    for(int i = 0; i<NUM_ICONS; i++)
    {

        icon[i] = new iconWidget(this);

        //Finding the Icon center on the circle
        double x = center.x() + radius * sin(arcSize * i);
        double y = center.y() + radius * cos(arcSize * i);

        x -= ICON_WIDGET_WIDTH/2.0;
        y -= ICON_WIDGET_HEIGHT/2.0;

        //moves icons into place
        icon[i]->move(x-icon[i]->x(),y-icon[i]->y());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:18:36.903

我假设您的小部件是您已实现的类。如果是这种情况，只需添加一个“图像”成员变量（但您正在实现图像）。然后您的数组存储这些小部件。

在伪代码中：

```
class Widget
{
    Image image; //however you represent an image. This could be a BYTE pointer.
    //all your other stuff
}; 
```

然后，

```
Widget widget1;
Widget widget2;
widget1.image = something.jpg;
widget2.image = something_else.jpg;

std::vector<Widget> = {widget1,widget2}; 
```

# sql - 具有最大结果的多个类的休眠查询

> ID：14490692
> 
> 赞同：1
> 
> 时间：2013-01-23T22:36:54.343
> 
> 标签：sql, hibernate

我有两个类（一和二）和两个相应的表（“一”和“二”）。每个表都有一个时间列（“timeOne”和“timeTwo”）。

我想在一个查询中从这两个表中获取最后 10 个结果。基本上，如果我在表“一”中有 30 行并且今天添加了 3 行，而我的表 2 有 30 行并且今天添加了 7 行，那么我的查询应该返回 10 行（1 中的 3 行和 2 中的 7 ）。

如果可能，我想在单个 Hibernate 查询中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:29:56.017

我认为使用本机查询是最简单的。

我这样说是因为另一种选择是你在 JPQL 中使用这样的东西：

```
Query q = entityManager
                .createQuery("select f, b from Foo f, Bar b");

q.setMaxResults(2); 
```

这会产生以下 SQL：

```
select foo0_.id as id0_0_, bar1_.id as id1_1_, foo0_.val as val0_0_, bar1_.val as val1_1_ from dbo.Foo foo0_ cross join dbo.Bar bar1_ limit ? 
```

（请注意，为简洁起见，我省略了排序，但您可以`order by`）

我相信您会从交叉连接中获得 (maxResults * maxResults) 行，尽管您随后可以将该结果集折叠到不同的实体中......它不太可能是您想要的（也不会像可能的）。

因此，与其尝试处理上述混乱，使用本机查询将是最简单（以编程方式）和最有效的。

**简而言之：**不，据我了解，您无法通过 JPA 或 Hibernate 以产生附加到持久性单元的类型安全结果的方式做您想做的事情。

# jquery - Jquery Datepicker没有关闭选择？

> ID：14490695
> 
> 赞同：4
> 
> 时间：2013-01-23T22:37:08.967
> 
> 标签：jquery, datepicker

我的代码：

```
 var availableDates = ["23-1-2013","24-1-2013","25-1-2013"];

        function available(date) {
          dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();
          if ($.inArray(dmy, availableDates) !== -1) {
            return [true, "","Available"];
          } else {
            return [false,"","unAvailable"];
          }
        }

        $("a.pickadate").click(function () {
            $("#datepicker").datepicker({
                    beforeShowDay: available,
                    altField: '#datepicked',
                    dateFormat: "dd-mm-yy"
                });
        });
        $("#datepicker a.ui-state-default").click(function () {
            $("#datepicker").datepicker("hide");
        }); 
```

它可以很好地打开，很好地填充字段并显示正确的日期也很好；就在我选择某些东西时，它保持打开状态。

我的 HTML 是：

```
<input type="text" id="datepicked" name="datepicked" size="8" style="float: left;">
    <a href="javascript:void();" class="pickadate">
        <img src="media/images/icon-calendar.gif" style="float: left; margin-right: 10px;">
    </a>    
    <!-- Datepicker -->
    <div id="datepicker" style="position: absolute; left: 670px; border: 0px; z-index: 5000; top: 247px;"></div> 
```

为什么不关门？它与样式标签中的CSS有关吗？我不知道我应该把它放在哪里。如果我把它拿出来，它不会关闭，而且定位很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:14:26.060

jQuery UI 似乎讨厌它，当您放置`.datepicker`不是某种类型的输入的东西时。改为调用`.datekpicker()`，`#datepicked`并单独设置 UI 样式。

[http://jsfiddle.net/wvxmF/1/](http://jsfiddle.net/wvxmF/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T13:22:50.653

使用这个脚本

```
 $(document).click(function (e) {
        var ele = $(e.target);
        if (!ele.hasClass("hasDatepicker") && !ele.hasClass("ui-datepicker") && !ele.hasClass("ui-icon") && !$(ele).parent().parents(".ui-datepicker").length)
            $(".hasDatepicker").datepicker("hide");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T05:56:15.570

我知道这是一个旧线程，但也许有人会发现这很有用：

我在网站上有许多不同的占位符，具有不同的颜色，因此使用确切的颜色可能会覆盖样式。

这是有效的解决方案：

```
::-webkit-input-placeholder { color:inherit; opacity: 1 !important;} 
```

# google-analytics - Google Analytics 目标：防止跟踪子文件夹的 URL 参数

> ID：14490698
> 
> 赞同：1
> 
> 时间：2013-01-23T22:37:22.640
> 
> 标签：google-analytics, subdirectory

在我的网站上，我通过**head match**`/shop/`跟踪 URL作为目标。由于有一些 URL 参数，我不能在这里使用完全匹配。

 **此外，我正在通过**完全匹配**来跟踪目标，该目标是子文件夹的 URL：`/shop/process/paid.php`

问题是 GA 也使用头部匹配跟踪这个子文件夹，因此保存了 pay.php 附带的 URL 参数，例如*paid.php?email=customer@home.com*

如何防止 GA 跟踪 URL 参数？
设置如何？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:07:21.067

这应该与自定义过滤器一起使用：

管理员->配置文件->过滤器->自定义过滤器->搜索和替换。

搜索

```
/shop/process/paid.php\?.* 
```

（这是您的带有任意查询参数的网址，“\”是转义符号，因为“？”也是正则表达式中的控制字符。点表示任何字符，“*”表示前面的任意数量（在这种情况下为任意）字符）并替换为所需的网址（/shop/process/paid.php）。

可能有一个更优雅的解决方案，但像大多数人一样，我不擅长这个正则表达式的东西。但是，这应该有效。

备择方案：

*   如果跟踪数据中不需要这些查询参数，您可以在配置文件设置中完全排除它们。
*   您可以根据目录为子目录创建配置文件（包括过滤器->请求uri包含“/shop”并仅设置此配置文件以删除查询参数**

# android - 将 Google 地图添加到我的应用

> ID：14490703
> 
> 赞同：0
> 
> 时间：2013-01-23T22:37:57.613
> 
> 标签：android

我正在尝试将谷歌地图添加到我的 android 应用程序中，并且我遵循了以下文档：[https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

首先，我的清单文件是否正确？

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="where.is.the.action"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
    <permission
        android:name="where.is.the.action.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
    <uses-permission android:name="where.is.the.action.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="xxxxxxxxxxxxxxxxxxxxxxxxxxxx"/>
    </application>
</manifest> 
```

然后这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="My Location"
        android:onClick="getLocation"
        android:layout_weight="0"
    />
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/map"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              class="com.google.android.gms.maps.MapFragment"/>
</LinearLayout> 
```

如果我删除`fragment`标签它工作正常，但是一旦我将它添加回应用程序关闭并显示：“不幸的是，MainActivity 已停止。”

有谁看到出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:12:25.247

也许您正尝试`MapFragment`在未运行 Android 3.0+ 的设备上使用。`MapFragment`适用`Activity`于 API 级别 11 中的 an 和本机片段实现。适用于 Android 支持库提供的`SupportMapFragment`a和片段 backport。`FragmentActivity`

* * *

**更新**

经过进一步审查，问题可能有两个方面：

1.  您尝试附加`google-play-services.jar`到您的项目，而不是[按照说明将 Play Services Android 库项目附加到您的项目](http://developer.android.com/google/play-services/setup.html)。

2.  您通过直接弄乱构建路径而不是将 JAR 复制到`libs/`.

撤销你最初所做的。然后，[按照说明将 Android 库项目附加到您的项目](http://developer.android.com/google/play-services/setup.html)（作为副作用，它将为您正确设置该 JAR）。

由于您似乎正在执行命令行构建，因此您需要为 Google 选择不发布的 Android 库项目创建命令行构建文件 (grrrrrrrrrrrrrrr)。跑：

```
android update project -p /home/ryan/android-sdk-linux/extras/google/google_play_services/libproject/googl‌​e-play-services_lib 
```

创建必要的文件。

# javascript - 如何在 chrome 调试器中找到匿名函数的闭包？

> ID：14490707
> 
> 赞同：3
> 
> 时间：2013-01-23T22:38:28.863
> 
> 标签：javascript, google-chrome

调试时，在匿名函数的情况下，我在哪里可以找到闭包？

在非匿名函数的情况下，它似乎出现在“函数范围”下。例如：

```
 function outer(x){
    var temp = 0;
    return function inner(){
        alert(++x);
    };
    }
    var out = outer(3);
    out();
    debugger;
    out = outer(5);
    out(); 
```

在这种情况下，我可以在“out”的监视表达式中看到[closure_in_functionalscope](http://imgur.com/PCieTuy)。

但是，当我使用匿名函数时，如下所示：

```
 function outer(x){
    var temp = 0;
    return function (){
        alert(++x);
    };
    }
    outer(3)();
    debugger;
    outer(5)(); 
```

在这种情况下，我不认为[匿名函数](http://imgur.com/6dTxIqC)是监视表达式中的闭包。在匿名函数的情况下，哪个对象存储闭包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:53:29.433

它与是否命名内部函数无关。

在第一个屏幕截图中，您正在检查`out`变量，它引用了一个返回的函数但是`outer`. 该函数`x`在其闭包范围内。

在第二个屏幕截图中，您正在检查`outer`变量，该变量引用了一个命名的全局函数。在该代码段中，您没有任何变量来引用结果或`outer(3)`. 如果您像在第一个示例中那样将其分配给一个变量并`var out = outer(3)`在该分配之后放置一个断点，您将能够看到`out`的闭包范围。或者，您可以通过在调试器中添加“监视表达式”来检查，`outer(3)`而无需修改代码。

# ruby-on-rails - 打开 url 是 Timeout::Error

> ID：14490708
> 
> 赞同：-1
> 
> 时间：2013-01-23T22:38:35.690
> 
> 标签：ruby-on-rails, ruby, json, url

```
 uniqUsers = User.find(params[:userid]).events.where("comingfrom != ''").uniq_by {|obj| obj.comingfrom}

  uniqUsers.map do |elem|
     begin
       @tag = nil
       open('http://localhost:3000/search_dbs/show?userid='+ params[:userid] + '&fromnumber=' + elem.comingfrom + '&format=json', 'r', :read_timeout=>1) do |http|
         @tag = http.read
       end
     rescue  Exception => e
      puts "failes"
      puts e
     end
 end 
```

嗨，这让我发疯了，由于某种原因，open url 命令超时而没有错误。当我在 chrome 中尝试相同的 url 时，一切都像魅力一样，当我从代码中执行此操作时，我得到 Timeout::Error

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:07:36.840

一秒钟是乐观的。

当我在编写爬虫时，我会创建一个重试队列，其中包含子数组或对象，这些子数组或对象包含先前尝试的重试次数、URL，可能还有最后的超时值。使用递增的超时值，第一次尝试一秒，第二次尝试两秒、四、八、十六等，直到我确定站点不会响应。

# jquery - jcrop 无法与 IE 一起正常工作

> ID：14490709
> 
> 赞同：2
> 
> 时间：2013-01-23T22:38:37.937
> 
> 标签：jquery, internet-explorer, jcrop

我在我的 .net web 应用程序中使用了crop。所有浏览器的代码都很好。但是，IE 显示出奇怪的行为。我尝试过其他帖子，但它们要么没有帮助，要么有点像黑客。这是javascript代码：

```
jQuery(function ($) {
                api = $('<%= "#" + target.ClientID %>').Jcrop({
                    onChange: showCoords,
                    onSelect: showCoords,
                    onRelease: clearCoords,
                    aspectRatio: 1
                }, function () {
                    api = this;
                    api.setSelect([10, 10, 110, 110]);
                    api.setOptions({ bgFade: true });
                    api.ui.selection.addClass('jcrop-selection');
                });

            }); 
```

第一次尝试 IE 无法加载虚线，但有时在第二次尝试时它可以工作。似乎是时间问题或图像加载问题......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T01:20:51.577

> 实际上我发现了问题，所以我会先提一下IE的问题，然后再描述我的解决方案。正如我在问题中所说，这是一个时间问题。IE 在从服务器获取图片之前加载脚本。
> 
> 要解决此问题，您必须等到图片下载完成：
> 
> ```
> $('<%= "#" + target.ClientID %>').load(function () {
>     api = $('<%= "#" + target.ClientID %>').Jcrop({... 
> ```
> 
> 目标显然是我的`asp:Image`控制。

# javascript - Javascript写入文件而不覆盖

> ID：14490710
> 
> 赞同：1
> 
> 时间：2013-01-23T22:38:44.457
> 
> 标签：javascript, firefox, filestream, xpcom, imacros

我正在使用 XPCOM 读取/写入硬盘上的文件（因为 FF16、17、18 不再支持 Java，+ 我必须使用它）。我在我的 FireFox 扩展中使用它（我使用 iMacros）。在这个文档上[点击](https://developer.mozilla.org/en-US/docs/Firefox_addons_developer_guide/Using_XPCOM%E2%80%94Implementing_advanced_processes) 我找到了这个例子。

```
var string = '\u5909\u63db\u30c6\u30b9\u30c8';
file.initWithPath('C:\\temp\\temp.txt');
file.create(file.NORMAL_FILE_TYPE, 0666);
var charset = 'EUC-JP';
var fileStream = Components
.classes['@mozilla.org/network/file-output-stream;1']
.createInstance(Components.interfaces.nsIFileOutputStream);
fileStream.init(file, 2, 0x200, false);
var converterStream = Components
.classes['@mozilla.org/intl/converter-output-stream;1']
.createInstance(Components.interfaces.nsIConverterOutputStream);
converterStream.init(fileStream, charset, string.length,
Components.interfaces.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);
converterStream.writeString(string);
converterStream.close();
fileStream.close(); 
```

因此，此代码执行以下操作。如果文件不存在，它会创建它并将数据保存在其中。但是，如果文件确实存在，它将返回错误。如果我评论那部分代码（并且文件存在），它只会覆盖旧数据并放入新数据。

我需要这段代码来创建文件，如果它存在就继续前进而不会出现错误并将数据保存在新行中而不会覆盖。

像这样。

前：

```
data11, data12, data13
data21, data22, data23 
```

后：

```
data11, data12, data13
data21, data22, data23
data31, data32, data33
data41, data42, data43 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:46:08.933

尝试`18`在初始化输出流时作为第二个参数传递（而不是 2）。

```
fileStream.init(file, 18, 0x200, false); 
```

这会将`PR_APPEND`标志添加到 io 模式参数（它是`0x10`;`2`是 for `PR_WRONLY`）。

# mysql - 用于选择缺失列的 MySQL 子查询或 LEFT JOIN？

> ID：14490718
> 
> 赞同：0
> 
> 时间：2013-01-23T22:39:30.047
> 
> 标签：mysql

我需要对 3 个表执行 SELECT 查询，但我不知道使用子查询是否比 LEFT JOIN 更好，因为在某些情况下可能会丢失一列。这些是表格：

选项（名称、信息...）

业主（姓名、地址）

Rel (idoption, idowner)

SELECT 应返回每条记录中带有所有者名称的所有选项，但在某些情况下，选项可能未连接到任何所有者，并且所有者的名称应为空。有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:42:18.210

LEFT JOIN 然后，无论是否有匹配的所有者，它都会获得所有选项 - “对左表的这种额外考虑可以被认为是一种特殊的保存。左表中的每个项目都将显示在 MySQL 中结果，即使与它所连接的另一个表不匹配。”

来自：[http ://www.tizag.com/mysqlTutorial/mysqlleftjoin.php](http://www.tizag.com/mysqlTutorial/mysqlleftjoin.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:44:28.360

A`LEFT JOIN`可能是适当的响应，并且*可能*比子查询更快，具体取决于您的结果（它们可能会编译为相同的计划）。

```
SELECT
    op.name
    ,op.info
    ,...
    ,ow.name
    ,ow.address
FROM
    options op
LEFT OUTER JOIN
    Rel r
        ON r.idoption = op.id
LEFT OUTER JOIN
    owners ow
        ON ow.id = r.idowner 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:42:58.177

左连接将比子查询更有效和更快。如果您可以在没有匹配的情况下使用 NULL，那么这是更好的方法。

# prolog - 在这个 prolog 场景中，这个通配符有什么作用？

> ID：14490720
> 
> 赞同：0
> 
> 时间：2013-01-23T22:39:38.567
> 
> 标签：prolog

我遇到过这段代码：

```
connectRow(_,_,0).
connectRow([spot(_,R,_,_)|Spots],R,K) :- K1 is K-1, connectRow(Spots,R,K1).

/*c*/
connectRows([]).
connectRows(Spots) :- 
   connectRow(Spots,_,9),
   skip(Spots,9,Spots1), 
   connectRows(Spots1). 
```

connectRow(Spots,_,9) 中的通配符如何工作？它如何知道要检查哪些值以及它如何知道它检查了所有可能的值？

编辑：我想我理解为什么会这样，但是如果有人可以为我验证这一点，我会很高兴：当我使用通配符“调用”connectRow 时，它会匹配带有 connectRow 谓词中的“R”的通配符。会是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:49:35.427

`_`就像任何其他变量一样，除了您看到的每个变量都被视为不同的变量，Prolog 不会向您显示它与什么相结合。那里没有特殊行为；如果它使您对行为感到困惑，只需发明一个全新的变量并将其放入其中以查看其作用。

让我们谈谈Prolog如何处理变量。这是一个你可以遵循的实验，如果你碰巧有它们，它应该会破坏无益的先入为主的观念。

```
?- length([2,17,4], X)
X = 3. 
```

很多 Prolog 看起来像这样，很容易陷入这样的陷阱，即认为有指定的“输出”变量像返回值一样工作，而指定的“输入”变量像参数一样工作。毕竟：

```
?- length([2,17,4], 3).
true.

?- length([2,17,4], 5).
false. 
```

在这里，我们开始看到一些有趣的事情正在发生。错误的直觉是 Prolog 以某种方式跟踪输入和输出变量并在这种情况下“检查”。但这不是正在发生的事情，因为统一比这更普遍。观察：

```
?- length(X, 3).
X = [_G2184, _G2187, _G2190]. 
```

我们现在颠覆了传统的参数/返回值：Prolog 知道 X 是一个包含三个项目的列表，但不知道这些项目实际上是什么。信不信由你，当您知道需要多少变量但不需要单独命名时，这种技术经常用于生成变量。

```
?- length(X, Y).
X = [],
Y = 0 ;

X = [_G2196],
Y = 1 ;

X = [_G2196, _G2199],
Y = 2 ;

X = [_G2196, _G2199, _G2202],
Y = 3 
```

碰巧长度的定义非常笼统，Prolog 可以使用它来生成列表及其长度。这种行为是 Prolog 如此擅长“生成和测试”解决方案的部分原因。你在逻辑上定义你的问题，Prolog 应该能够生成逻辑上合理的值来测试。

所有这些变化都源于一个非常简单的长度定义：

```
length([], 0).
length([_|Rest], N1) :-
  length(Rest, N0), 
  succ(N0, N1). 
```

关键是不要把它看成一个计算长度的过程，而是把它看作是列表和数字之间的逻辑关系。该定义是归纳的，将空列表与 0 相关联，将包含一些项目的列表与 1 + 列表其余部分的长度相关联。进行这项工作的引擎称为统一。

在第一种情况下，`length([2,17,4], X)`值 [17,4] 与 Rest 统一，N0 与 2 统一，N1 与 3 统一。该过程是递归的。在最后一种情况下，X 与 [] 统一，Y 与 0 统一，这自然会导致下一种情况，即我们有一些项目并且 Y 为 1，并且表示列表中项目的变量没有任何内容的事实特别是统一并不重要，因为该变量的值从未使用过。

查看您的问题，我们看到了相同的递归结构。谓词非常复杂，所以让我们将它们分解。

```
connectRow(_, _, 0). 
```

这说`connectRow(X, Y, 0)`的是真的，不管 X 和 Y。这是基本情况。

```
connectRow([spot(_, R, _, _)|Spots], R, K) :- 
```

此规则匹配特定结构的点列表，假设第一个点的第二个值 (R) 与第二个参数匹配。

```
K1 is K-1, connectRow(Spots, R, K1). 
```

该子句的主体本质上是在递减第三个参数 K 时重复出现的。

现在很清楚，这基本上会生成一个看起来像`[spot(_, R, _, _), spot(_, R, _, _), ... spot(_, R, _, _)]`长度 = K 的列表，并且在其他三个位置没有特定值`spot`。事实上，这就是我们在测试时看到的：

```
?- connectRow(X, Y, 0).
true ;
(infinite loop)^CAction (h for help) ? abort
% Execution Aborted

?- connectRow(X, Y, 2).
X = [spot(_G906, Y, _G908, _G909), spot(_G914, Y, _G916, _G917)|_G912] ;
(infinite loop)^CAction (h for help) ? abort 
```

所以这里似乎有一些错误；如果我确定这些就是整个故事，我会说：

*   基本情况应该使用空列表而不是匹配任何东西
*   我们应该在归纳情况下规定 K > 0
*   `clpfd`如果我们希望能够产生所有可能性，我们应该使用

进行更改我们会得到稍微不同的行为：

```
:- use_module(library(clpfd)).

connectRow([], _, 0).
connectRow([spot(_, R, _, _)|Spots], R, K) :- 
  K #> 0, K1 #= K-1, connectRow(Spots, R, K1).

?- connectRow(X, Y, 0).
X = [] ;
false.

?- connectRow(X, Y, 1).
X = [spot(_G906, Y, _G908, _G909)] ;
false.

?- connectRow(X, Y, Z).
X = [],
Z = 0 ;

X = [spot(_G918, Y, _G920, _G921)],
Z = 1 ;

X = [spot(_G918, Y, _G920, _G921), spot(_G1218, Y, _G1220, _G1221)],
Z = 2 
```

您会注意到，在结果中，我们的结构中有 Y `spot`，但我们在其他位置有看起来很奇怪的自动生成变量，例如`_G918`. 碰巧的是，我们可以使用`_`而不是 Y 并看到类似的效果：

```
?- connectRow(X, _, Z).
X = [],
Z = 0 ;

X = [spot(_G1269, _G1184, _G1271, _G1272)],
Z = 1 ;

X = [spot(_G1269, _G1184, _G1271, _G1272), spot(_G1561, _G1184, _G1563, _G1564)],
Z = 2 
```

所有这些看起来很奇怪的变量都在那里，因为我们使用了`_`. 请注意，所有`spot`结构在第二个位置都有完全相同的生成变量，因为 Prolog 被告知它必须将 的第二个参数`connectRow`与 的第二个位置统一`spot`。这在任何地方都是正确的，因为 R 被递归地“传递”到下一个对 connectRow 的调用。

希望这有助于解释`_`您的示例中发生了什么，以及一般的 Prolog 统一。

**编辑**：用 R 统一一些东西

要在下面回答您的问题，您可以直接将 R 与一个值统一，或者将其绑定到一个变量并使用该变量。例如，我们可以直接绑定它：

```
?- connectRow(X, 'Hello, world!', 2).
X = [spot(_G275, 'Hello, world!', _G277, _G278), spot(_G289, 'Hello, world!', _G291, _G292)] 
```

我们也可以绑定它，然后再分配它：

```
?- connectRow(X, R, 2), R='Neato'.
X = [spot(_G21, 'Neato', _G23, _G24), spot(_G29, 'Neato', _G31, _G32)],
R = 'Neato' 
```

说起来没什么特别的`R=<foo>`；它统一了表达式的两边，但两边都可以是表达式而不是变量：

```
?- V = [2,3], [X,Y,Z] = [1|V].
V = [2, 3],
X = 1,
Y = 2,
Z = 3. 
```

所以你也可以在另一个谓词中使用 R：

```
?- connectRow(X, R, 2), append([1,2], [3,4], R).
X = [spot(_G33, [1, 2, 3, 4], _G35, _G36), spot(_G41, [1, 2, 3, 4], _G43, _G44)],
R = [1, 2, 3, 4] ; 
```

请注意，这为回溯和生成其他解决方案创造了机会。例如：

```
?- connectRow(X, R, 2), length(R, _).
X = [spot(_G22, [], _G24, _G25), spot(_G30, [], _G32, _G33)],
R = [] ;

X = [spot(_G22, [_G35], _G24, _G25), spot(_G30, [_G35], _G32, _G33)],
R = [_G35] ;

X = [spot(_G22, [_G35, _G38], _G24, _G25), spot(_G30, [_G35, _G38], _G32, _G33)],
R = [_G35, _G38] ; 
```

希望这可以帮助！

# c# - 步行周期所需的代码？XNA Visual Studio C#

> ID：14490721
> 
> 赞同：2
> 
> 时间：2013-01-23T22:39:49.090
> 
> 标签：c#, visual-studio-2010, xna

所以几个月前我刚开始学习 C# 代码，我想在一个完整的步行周期中获得一个精灵。

我在 PNG 图像上进行了步行循环。这显然是一系列单独的图像，显​​示了步行周期的不同阶段。现在我已将其纳入我的项目/解决方案中，我在 Visual Studio 2010 中将其作为 Windows Game 4.0 进行。

而且我已经走了很远，所以我开始尝试设置 srcRect 和 destRect 。但我设法在屏幕上显示的只是图像从左到右快速滑动，然后无限向右移动。我通过使用 srcRect.X += srcRect.width 线实现了这一点。

但我想做的是让这个动作慢得多。当拇指杆向右推时，我希望 destRect 在屏幕上向右移动，并且在发生这种情况时，我希望它在我的步行周期中向右滑动。

我变得非常混乱，我是一个初学者，所以对此的任何帮助将不胜感激！以下是我到目前为止的代码！

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace fra_walk
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        GamePadState pad1, oldpad1;

        Rectangle srcRect;

        struct Rect
        {
        public Rectangle destRect;
        public Rectangle frame;
        public Point velocity;

        }
            Rect destRect;

        struct Wright
        {
            public Texture2D txr;
            public Rectangle frame;
        }

        Wright walkright;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

            graphics.PreferredBackBufferWidth = 800;
            graphics.PreferredBackBufferHeight = 600;

        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            destRect.velocity = new Point(0, 0);

            destRect.frame = new Rectangle(400, 400, 83, 170);

            srcRect = new Rectangle(0, 0, 64, 170);

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            walkright.txr = Content.Load<Texture2D>("walk right");

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit

            GamePadState pad1 = GamePad.GetState(PlayerIndex.One);

            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            srcRect.X += srcRect.Width;

        //  if ((pad1.ThumbSticks.Left.X == 1.0f)
         //     && (oldpad1.ThumbSticks.Left.X == 1.0f))
       //   {
                // srcRect.X += destRect.frame.Width;
        //  }

            oldpad1 = pad1;
            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();
            spriteBatch.Draw(walkright.txr, destRect.frame, srcRect, Color.White);
            spriteBatch.End();

            // TODO: Add your drawing code here

            base.Draw(gameTime);
        }
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:21:14.687

一个简单的方法来做你想要的可能是实现一个计数器。

在代码顶部添加诸如 public double animCounter = 0 之类的内容。

然后围绕 srcRect.X += srcRect.Width; 行添加一些东西的效果：

```
 if (animCounter > 0)
        {
            animCounter -= gameTime.ElapsedGameTime.TotalSeconds;
        }
        else
        {
            srcRect.X += srcRect.Width;
            animCounter = 0.5f;
        } 
```

同样，这是做你想做的事情的简单方法，但不一定是最好的。一方面，+= srcRect.Width 将很快超过你的精灵表的宽度，所以你需要检查并纠正它。正如 itsme86 所建议的，您应该在 Google 上搜索一些教程。

这不是一个糟糕的开始：http: [//msdn.microsoft.com/en-us/library/bb203866.aspx](http://msdn.microsoft.com/en-us/library/bb203866.aspx)

# javascript - Windows 8 应用程序 javascript 重定向“立即”

> ID：14490728
> 
> 赞同：0
> 
> 时间：2013-01-23T22:40:52.613
> 
> 标签：javascript, redirect, windows-8

我有这个：

```
try{var conn = new WebSocket('ws://' + sessionStorage.ip + ':5565');}
catch (Exception) {location = "error.html";} 
```

我希望这会在它到达后立即重定向我`location = "error.html"`

稍后在脚本中我有：

```
conn.onopen = {blah blah 
```

但它崩溃了

```
0x800a138f - JavaScript runtime error: Unable to set property 'onopen' of undefined or null reference 
```

所以 websocket 没有被创建，虽然 catch 确实得到了异常，但它不会立即重定向，而是继续运行一段时间，直到实际重定向。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:12:30.247

我以前在`<body>`标签中有重定向。

```
<body>
    <script>
        location = "error.html"
    </script>
</body> 
```

我应该在`<head>`

```
<head>
    <script>
        location = "error.html"
    </script>
</head> 
```

# azure - 为什么部署的 Empty MVC4 项目有错误和对 DefaultConnection 字符串的引用？

> ID：14490729
> 
> 赞同：0
> 
> 时间：2013-01-23T22:40:55.403
> 
> 标签：azure, asp.net-mvc-4

我可以在 Visual Studio 2012 中创建一个 Empty MVC4 项目。添加一个简单的控制器和视图，然后部署到 Azure。从 Azure 打开网站会产生错误：

```
Connection string "DefaultConnection" was not found.
Line 2:       if (!WebSecurity.Initialized)
Line 3:      {
Line 4:          WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId",
Line 5:                                                   "UserName", autoCreateTables: true);
Line 6:      }

Source File: c:\DWASFiles\sites\pre\VirtualDirectory0\site\wwwroot\_AppStart.cshtml    Line: 4 
```

为什么一个空项目试图引用 Websecurity/Database/etc.？

为什么我无法通过全局搜索在我的项目中的任何位置找到此代码？

任何帮助将不胜感激。我想我正在失去理智。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:28:04.080

看来您的测试网站正在从 machine.config 继承成员资格提供程序。尝试将此元素添加到`<system.web>`web.config中的元素

```
<membership>
  <providers>
      <clear />
  </providers>
</membership>
<roleManager enabled="false">
  <providers>
      <clear />
  </providers>
</roleManager>
<profile enabled="false">
   <providers>
       <clear />
     </providers>
</profile> 
```

还添加这个：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <remove name="RoleManager" />
    </modules>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:23:03.677

我发现了问题。我在之前部署的根目录中有一些文件在我部署时没有被删除。完全与代码无关。

# java - 通过创建一种方法来简化 Java 代码……但是在哪里？

> ID：14490730
> 
> 赞同：2
> 
> 时间：2013-01-23T22:41:01.160
> 
> 标签：java, methods

我正在尝试编写一些在作业中给出的伪代码 - 但是我现在正在做的编码部分不是作业的一部分，只是为了好玩。

伪代码的一部分说“交换数组的元素”。在我的代码中，我必须在两个地方执行此操作。但是我想知道是否有一种方法可以通过只创建一个方法来做到这一点，即创建另一种方法来简单地交换它们并保存我每次想要运行它时使用的额外代码行。

问题是，如果我在这个方法之外创建一个全新的方法，我将不得不将数组作为参数发送并取出它，我担心这会降低效率（显然没什么大不了的在这里，但我正在努力为未来的大型项目学习）。

这是我的代码，其中包含重复的“交换”方法行。

```
public int[] myAlgorithm(int[] arrayOfInts, int size){
    boolean done = true;
    int j= 0;

    while (j <= n-2){
        if (arrayOfInts[j] > arrayOfInts[j+1]){
            int tempHolder = arrayOfInts[j];
            arrayOfInts[j] = arrayOfInts[j+1];
            arrayOfInts[j+1] = tempHolder;
            done = false;
        }
        j = j + 1;
    }
    j = size - 1;
    while (j >= 1){
        if (arrayOfInts[j] <= arrayOfInts[j-1]){
            int tempHolder = arrayOfInts[j];
            arrayOfInts[j] = arrayOfInts[j+1];
            arrayOfInts[j+1] = tempHolder;
            done = false;
        }
        j--;
    }
    if (!done)
        myAlgorithm(arrayOfInts, size)
    else
        return arrayOfInts;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:46:49.960

> 我必须将数组作为参数发送并取出

您只需要“发送”并直接在阵列上工作。在实践中，将参数传递给方法是一种非常便宜的操作，如果调用得足够频繁，编译器可能会对其进行优化，因此您不必担心太多（除非您通过分析证明这是性能损失你的申请）。

在您的情况下，您可以使用以下方法：

```
public void swap(int[] arrayOfInts, int i, int j) {
    int tempHolder = arrayOfInts[i];
    arrayOfInts[i] = arrayOfInts[j];
    arrayOfInts[j] = tempHolder;
} 
```

你会称之为：

```
swap(arrayOfInts, j, j+1); 
```

**为什么它有效？**

[Java 通过值传递参数](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)，但在对象（即非原始类型，包括数组）的情况下，传递的值是对对象的引用。换句话说，swap 方法的参数是对与调用代码中相同的数组的引用，因此您可以直接处理该数组，而无需将其发送回调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:46:55.783

如果有重复的代码位，则运行时间会更短。虽然它需要更多的空间。

问题是您无法预测编译器将如何优化您的代码。您可以创建一个函数，该函数采用数组和两个索引并交换这些索引处的元素。编译器可能会将代码内联到您调用它的函数中。如果你不这样做，编译器可能会注意到你有重复的代码，如果它决定创建一个函数。

编写代码以您最容易阅读的方式编写，尤其是在效率差异很小的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T22:48:10.167

> 问题是，如果我在这个方法之外创建一个全新的方法，我将不得不将数组作为参数发送并取出......

事实并非如此。在 Java 中，数组是一个对象。因此，当您将数组传递给方法时，您实际上只是传递了对数组的引用。您对方法内的数组所做的任何更改都将在方法调用之后出现。仅传递对数组的*引用*也意味着该方法将非常快，因为您没有制作整个数组的副本。

所以你可以写一个交换方法：

```
private void swap(int[] arrayOfInts, int i, int j) {
    int temp = arrayOfInts[i];
    arrayOfInts[i] = arrayOfInts[j];
    arrayOfInts[j] = temp;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T22:48:16.560

数组，与任何其他引用类型的对象一样，都是通过引用传递的——也就是说，对对象的引用是通过值传递的。这意味着，数组本身不会被复制。因此，没有理由担心“效率低下”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T22:49:07.673

在java中，您可以将数组作为变量传递，这只会传递指向它的指针而不是数组的全新副本，因此您必须传递数组和要交换的两个索引：

```
 public static void swap(final int[] arr, final int         pos1, final int pos2){
final int temp = arr[pos1];
arr[pos1] = arr[pos2];
arr[pos2] = temp;
} 
```

# javascript - web2py透明标签

> ID：14490731
> 
> 赞同：1
> 
> 时间：2013-01-23T22:41:19.750
> 
> 标签：javascript, python, web2py

现在在 web2py 中，db 中的每个字段在表单中看起来像这样

```
Label : [            ] 
```

我正在使用自定义表单，所以我删除了所有标签，我想在 and 中将它们显示为透明的免费`input`，`textarea`并将第一个选项设置为标签`select`

这是定制

```
<div>{{=form.custom.widget.field}}</div> 
```

我希望它看起来像这样

```
inputs/textareas:
[ label ]
selects:
[ -- label -- [v]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:45:02.837

```
{{label = form.custom.label.field}} 
```

对于输入字段，您可以使用以下`placeholder`属性：

```
{{form.element(_name='fieldname')['_placeholder'] = label}}
<div>{{=form.custom.widget.field}}</div> 
```

对于您的选择字段：

```
{{form.custom.widget.field.element('option').append(label)}}
<div>{{=form.custom.widget.field}}</div> 
```

# php - PHP Parse 错误：语法错误，意外的 T_STRING，期待 T_VARIABLE

> ID：14490732
> 
> 赞同：2
> 
> 时间：2013-01-23T22:41:26.770
> 
> 标签：php

我在下面的第 28 行有这个错误。

```
private loadText() { $this->text = $wiki->getpage($this->page);} 
```

周边代码如下

```
public function parse() { $this->parser = new parser($page,$this->getText()); $this->parser->parse();}
// private functions
private loadText() { $this->text = $wiki->getpage($this->page);} 
private parseNamespace(){... 
```

我看不到问题，我唯一的猜测是它与 $this-> 有关

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-23T22:43:58.730

*您在每个*关键字`function`之后都忘记了。有趣的是，你用一种方法做对了。 *`private``public`*

# php - 确保上传到服务器的 csv 文件转换为 utf-8

> ID：14490733
> 
> 赞同：0
> 
> 时间：2013-01-23T22:41:28.707
> 
> 标签：php, csv

```
if (move_uploaded_file($file['tmp_name'], $
      return array('success'=> true);
 } 
```

在将临时文件移动到其位置之前，如何对 csv 的内容进行 utf-8 处理。我正在为这个 webapp 使用 php。我已经有了utf编码功能，但是，我不知道如何干预上传过程，在文件上传到服务器之前对文件的内容进行编码。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:44:59.623

我不相信你可以对文件做任何事情，直到它被上传到服务器，至少使用 PHP。你应该把它放在一个 tmp 文件夹中，弄乱它，然后移动它。

# .net - ESRI Silverlight Map Tile 不在特定级别绘制

> ID：14490735
> 
> 赞同：0
> 
> 时间：2013-01-23T22:41:34.913
> 
> 标签：.net, silverlight, esri

我怀疑这太具体了，无法在这里用一个问题来解决，但我希望至少能得到一些分析提示：

我正在使用 ESRI.ArcGIS.Client（用于 Silverlight），特别是 ArcGISTiledMapServiceLayer，以及位于[http://server.arcgisonline.com/ArcGIS/rest/services/ESRI_StreetMap_World_2D/MapServer](http://server.arcgisonline.com/ArcGIS/rest/services/ESRI_StreetMap_World_2D/MapServer)的地图。

在某个缩放级别 (13) 下，有一个特定区域（加利福尼亚州 McKittrick 东南 3 英里的 Reserve Rd）变为灰色。如果我放大或缩小直到级别更改为 12 或 14，则地图的部分将被绘制好。灰色矩形（这是一个图块吗？）只是地图的一部分，在我查看的每个级别上都可以。我也滚动了一下，并没有在另一个位置看到这种异常，尽管在这个缩放级别上滚动很乏味，并且我正在处理尽可能多的图形。

我的应用有 21 层，总共有将近 2600 个图形，这可能与问题有关。它发生在我的应用程序的两个不同页面中（相同的地图引用但不同的 ESRI.Map 对象），但不会发生在使用相同地图的只有几个图层和图形的简单示例应用程序中。

我通常将地图加载一次作为第一层并保留它，但我也强制它重新加载；问题依然存在。最后，这不是随机的。每次都是可重复的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T04:49:16.427

我不确定你为什么会得到一个灰色的磁贴 - 这可能有很多原因，但磁贴数据似乎确实存在，所以它可能不是你看到的无数据磁贴。但是我必须说，21 层远远超出了一张地图中推荐的层数（将这么多层混合在一起客户端非常昂贵），如果您在应用程序中达到一些内存限制，我不会感到惊讶或在 GPU 上。在顶部添加 2600 个图形，即使它本身也接近于推动它，这也不是不可能的原因。你不能用更少的层来重现这个事实很好地表明这就是发生的事情。但是我以前从未听说过这个问题，但是我又没有

我建议您将所有层合并到一个或几个服务中，而不是在客户端拥有那么多不同的层。使用为从头开始渲染地图而构建的服务器功能，而不是重载客户端及其网络连接（XAML 是为构建应用程序而不是从头开始构建地图，因此地图之类的东西通常会突破 XAML 的限制可以处理，更不用说您将在所有这些层上下载大量数据）。

顺便提一句。您可能最好使用 ArcGIS 论坛。API 开发人员和支持人员每天都会对这些进行巡逻——我今天偶然偶然发现了这个问题。

/Morten - 领导开发。@Silverlight ArcGIS API

# mysql - 在 MySQL 中存储/更新基于比较的数据

> ID：14490739
> 
> 赞同：0
> 
> 时间：2013-01-23T22:41:39.500
> 
> 标签：mysql, database-design, comparison

我想将项目之间的比较存储在 mysql 表中。例如，我有以下三个项目：

*   id: 1, Name: Item A, comparisionScore: 1
*   id: 2, Name: Item B, comparisionScore: 2
*   id: 3, Name: Item C, comparisionScore: 3

这意味着在比较时，compareScore 越大的项目越好。但是，当我想向表中插入一个新项目时，此方法会失败，这比项目 A 好，比项目 B 差，比方说项目 D。所以我可以执行以下操作，因为我不必只存储整数：

*   id: 1, Name: Item A, comparisionScore: 1
*   id: 2, Name: Item B, comparisionScore: 2
*   id: 3, Name: Item C, comparisionScore: 3
*   id: 4, Name: Item D, comparisionScore: 1.5

最糟糕的是，由于我们无法知道要添加的新项目的数量，因此没有足够的数量用于此目的。例如，通过将范围除以 2，结果可能如下：

*   id: 1, Name: Item A, comparisionScore: 1
*   id: 2, Name: Item B, comparisionScore: 2
*   id: 3, Name: Item C, comparisionScore: 3
*   id: 4, Name: Item D, comparisionScore: 1.5
*   id: 5, Name: Item E, comparisionScore: 1.75
*   id: 6, Name: Item F, comparisionScore: 1.875
*   id: 7, Name: Item G, comparisionScore: 1.9375
*   id: 8, Name: Item H, comparisionScore: 1.96875 ...

如果项目 Z 比项目 A 好而比项目 H 差，则 Z 不能在 1.9999... 和 2 之间取双倍值。

那么问题是我还可以使用什么方法来存储 MySQL 数据中项目之间的比较数据？

当用户通过查看该表来询问哪个更好项目 A 或项目 D 时，我应该能够回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:01:26.587

而不是从 1、2、3 的比较分数开始；给出更大的整数值，例如 10,000、20,000、30,000。然后你有一些空间在中间插入值。

要回答您的最后一个问题，当您尝试在 12,384 和 12,385 之间插入比较分数时，您必须首先重新编号所有比较分数，以便您有一个位置来放置最新的比较分数。

这些数字仅对排序有意义，因此您可以随时更改它们。

# android - android回调失败片段失败无法转换为android.content.Context

> ID：14490740
> 
> 赞同：0
> 
> 时间：2013-01-23T22:41:45.523
> 
> 标签：android, callback, android-fragments

我有一个回调类 gaGPS，我认为这是一个在正常活动中可以正常工作的上下文，但是当我在 Fragment 中使用它时它会失败

这是我的接口类

```
Public class gaGPS extends Service implements LocationListener {

private final Context mContext;

// Declaring a Location Manager
protected LocationManager locationManager;

private gaGPSinterface gpsu;

public interface gaGPSinterface {
    public void locationChanged(Location newloc);
}

public gaGPS(Context c, gaGPSinterface gpsiface) {
    mCallback = gpsiface;
    //mContext = (Context) gpsiface;
    mContext = c;

    locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
} 
```

剪断

我正在使用这个 FragmentActivity 类启动 Fragment

```
public class gaDetailsActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gpsfragment);

} 
```

这是 gpsfragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".gpsfragment" >
<fragment
    android:id="@+id/gpsTestFragLayout"
    android:name="id.wilsononline.gcadroid.gpsfragment"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" /> 
```

以下是我正在使用的片段

```
public class gpsfragment extends Fragment implements gaGPS.gaGPSinterface {

private gaGPS gps;

@Override
public void locationChanged(Location newloc) {
    // TODO Auto-generated method stub

}

@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    View rootView = inflater.inflate(R.layout.gpsdetails, container, false);
    ((TextView) rootView.findViewById(R.id.gpsText1)).setText("testing fragment");

    Context c = getActivity().getApplicationContext();

    gps = new gaGPS(c, (gaGPSinterface) getActivity());

    return rootView;
} 
```

}

我得到的错误是： java.lang.ClassCastException: com.test.app.gpsfragment cannot be cast to android.content.Context

更全面的输出：

```
E/AndroidRuntime( 3118): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
E/AndroidRuntime( 3118):        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
E/AndroidRuntime( 3118):        at android.com.test.app.Activity.setContentView(Activity.java:1867)
E/AndroidRuntime( 3118):        at id.wilsononline.gcadroid.gaDetailsActivity.onCreate(gaDetailsActivity.java:12)
E/AndroidRuntime( 3118):        at android.com.test.app.Activity.performCreate(Activity.java:5008)
E/AndroidRuntime( 3118):        at android.com.test.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
E/AndroidRuntime( 3118):        at android.com.test.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
E/AndroidRuntime( 3118):        ... 11 more
E/AndroidRuntime( 3118): Caused by: java.lang.ClassCastException: com.test.com.test.app.gaDetailsActivity cannot be cast to id.wilsononli
ne.gcadroid.gaGPS$gaGPSinterface
E/AndroidRuntime( 3118):        at com.test.com.test.app.gpsfragment.onCreateView(gpsfragment.java:49)
E/AndroidRuntime( 3118):        at android.support.v4.com.test.app.Fragment.performCreateView(Fragment.java:1460)
E/AndroidRuntime( 3118):        at android.support.v4.com.test.app.FragmentManagerImpl.moveToState(FragmentManager.java:884)
E/AndroidRuntime( 3118):        at android.support.v4.com.test.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
E/AndroidRuntime( 3118):        at android.support.v4.com.test.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
E/AndroidRuntime( 3118):        at android.support.v4.com.test.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
E/AndroidRuntime( 3118):        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
E/AndroidRuntime( 3118):        ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:51:39.960

```
public gaGPS(gaGPSinterface gpsu) {
    this.mContext = (Context) gpsu;
    this.gpsu = gpsu;
    // ...
} 
```

在这里，您尝试转换`gpsu`为`Context`. 它不是一个；这是一个`Fragment`。您应该分别通过`Context`and `gaGPSinterface`：

```
public gaGPS(Context c, gaGPSinterface gpsu) {
    this.mContext = c;
    this.gpsu = gpsu;
    // ...
} 
```

然后，使用`.getActivity()`（返回一个`Activity`，一个子类`Context`）从调用它`Fragment`：

```
gps = new gaGPS(getActivity(), this); 
```

# objective-c - 使用 NSRange 提取双精度值

> ID：14490741
> 
> 赞同：0
> 
> 时间：2013-01-23T22:41:46.630
> 
> 标签：objective-c, substring, nsrange

我有一个字符串 "Number: 0.3456" 如何删除 "Number:" 部分以使用它从中提取双精度值 "0.3456" `NSRange`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:46:52.890

如果`Number: X.XXX`是固定模式，您只需执行类似的操作

```
NSString * string = @"Number: 0.3456";
NSString * prefix = @"Number: ";
NSString * doubleString = [string substringFromIndex:prefix.length];
double yourDouble = [doubleString doubleValue]; 
```

如果你真的想使用`NSRange`你可以做类似的事情

```
NSString * string = @"Number: 0.3456";
NSString * substringToRemove = @"Number: ";
NSRange substringRange = [string rangeOfString:substringToRemove];
NSString * doubleString = [string stringByReplacingCharactersInRange:substringRange 
                                                          withString:@""];
double yourDouble = [doubleString doubleValue]; 
```

主要区别在于第二个示例将从原始字符串中删除*所有*出现的字符串，而第一个示例将仅删除前缀。`Number:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:05:32.320

我建议你使用 [NSScanner scanDouble:]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T00:10:23.167

您可以使用 NSScanner，只要您先设置扫描位置：

```
double result;
NSString *str = @"Number: 0.3456";
NSScanner *scanner = [NSScanner scannerWithString:str];

[scanner setScanLocation:[@"Number: " length]];
[scanner scanDouble:&result]; 
```

请记住，`scanDouble:`返回`YES`或`NO`指示扫描是否成功。

# javascript - .js、setInterval、.load()、clearInterval()

> ID：14490745
> 
> 赞同：1
> 
> 时间：2013-01-23T22:42:10.917
> 
> 标签：javascript, jquery

我从不完全确定何时会生成 ajax-loaded.html（可能是 1 秒或 10 秒），所以我使用 setInterval 不断调用 example_ajax_request()。这样，当它确实可用时，它就会显示出来（在一秒钟内）。

**问题**- 我如何调用 myStopFunction() 以便在 example_ajax_request() 实际加载 ajax-loaded.html 时，setInterval 停止？

```
<html>
<head>
</head>
<body>
<div id="example-placeholder">
<p>Placeholding text</p>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
  <script>
    var myVar=setInterval(function(){example_ajax_request()},1000);
    function example_ajax_request() {
        $('#example-placeholder').html('<p><img src="ajax-loader.gif"  /></p>');
        $('#example-placeholder').load("ajax-loaded.html");
    }

    function myStopFunction(){
        clearInterval(myVar);
    }
  </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:43:41.107

您可能应该使用加载回调来清除间隔。

```
$('#example-placeholder').load("ajax-loaded.html", function () {
   myStopFunction();
}); 
```

**每秒轮询一次是不好的，您应该使用`error`回调通过 retryCount 重试。**

# drop-down-menu - 在 Qt 中创建自定义上下文菜单

> ID：14490748
> 
> 赞同：2
> 
> 时间：2013-01-23T22:42:41.967
> 
> 标签：drop-down-menu, menu, qt4

我想为我的应用程序创建一个特殊的上下文菜单。该菜单可能具有与标准上下文菜单不同的形状和行为。

例如，我想将它们绘制成圆形或能够右键单击菜单条目，以打开*有关*该菜单项的另一个菜单。

当然，我想尽可能地将它们与当前框架集成，即具有基于操作的菜单等（但我不确定哪些属性应该有一个菜单以“适合”Qt 框架）。

所以，我的问题是，我应该从哪里开始实施呢？我看到 QMenu 继承自 QWidget，那么为它实现自定义 QWidget 就足够了吗？我是否应该继承 QMenu 并使用自定义图形和事件处理对其进行扩展？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:52:37.370

我想你要求很多`QMenu`来定制它。我建议您只创建自己的类，该类派生自`QWidget`并设置它的剪切位图（`QWidget::setMask`）并`paintEvent`自己实现。从`QAbstractButton`或`QPushButton`获得按钮按下处理可能会更好。QActions 不会在这里为你买太多东西。

# python - Python - 在屏幕上绘制的弹出消息

> ID：14490753
> 
> 赞同：0
> 
> 时间：2013-01-23T22:42:57.863
> 
> 标签：python, popup, screen, draw

我正在编写一个程序，我需要通过弹出消息通知用户一些更改，而不是弹出窗口。类似于 Kadu 中通知新消息的矩形 - 没有窗口，只是直接在屏幕上绘制了几秒钟的位图。

我想知道是否有一种简单的方法可以使用 win32 包或 Tkinter 执行此操作，并在用户单击矩形时处理该事件。

实际上消息是不变的，所以位图可能是从文件中加载的，但我仍然不知道如何开始。

请问有什么想法吗？

问候， mopsiok

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:55:50.860

其实我找到了我的问题的答案。这是我使用 Tkinter 的代码，希望对您有所帮助。

```
from Tkinter import Tk, Label
from Image import open as iopen #doesn't needed if you won't display image
from ImageTk import PhotoImage #as before

root = Tk()
img = PhotoImage(iopen("some_path")) #load an image
label = Label(root, image=img)
label.image = img
label.bind("<Button-1>", Click)
label.pack()
root.geometry('-0-40') #place in the right-bottom corner
root.wm_attributes("-topmost", 1) #popup
root.overrideredirect(1)
root.mainloop()

def Click(event): #close the window if image clicked
    root.destroy()
    print 'window closed' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:11:00.350

我正在使用 wxPython 并寻找一种弹出消息的方法。现在我正在使用一个弹出菜单，在其中我将菜单的每个项目附加到一行消息。

# c# - 使用 USB 编写 C# 同步应用程序

> ID：14490757
> 
> 赞同：0
> 
> 时间：2013-01-23T22:43:02.550
> 
> 标签：c#, usb, communication, transfer

我正在考虑将同步功能添加到我的一个 C# 应用程序中。目的是其中一个同步选项允许一个版本的应用程序通过 USB 电缆同步到另一个版本的应用程序。

该应用程序是跨平台的，目前使用 Mono 在 Windows 和 Mac 上实现，但最终也将移植到 iOS 和 Android。

我要做的就是通过 USB 电缆发送和接收数据。

这听起来像是可行的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:50:00.403

可行的？当然。这只是一个串行数据传输。您必须处理端口的打开和关闭以及数据的发送/接收，但这非常简单。

```
public void SendDataOverSerial(string data) {
  try {
     SerialPort port = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One); 
     port.Open(); 
     port.Write(data); 
  }
  finally {
     port.Close();    
  }
} 
```

显然，您需要在管道的另一端接收数据并执行它应该对它执行的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-24T07:15:19.850

这是一个很老的问题，但我最近写了一篇博客文章来描述如何实现这一点。简单地使用 SharpUSBLib 之类的东西是行不通的，因为您的 iOS 应用程序无法直接访问 USB 端口。

[http://thecodewash.blogspot.com/2017/05/communicating-with-your-ios-app-over.html](http://thecodewash.blogspot.com/2017/05/communicating-with-your-ios-app-over.html)

要回答您的问题（所以这个答案不仅仅是一个链接），是的，使用通常作为 iTunes 的一部分安装的 USB 多路复用守护程序 (usbmuxd) 程序绝对可以实现这一点。该程序可以通过 USB 电缆创建与您的 iOS 设备的套接字连接，并允许您像使用任何其他套接字一样通过该套接字连接进行通信。该链接更详细。

希望这可以帮助！

# jquery - jQuery : XMLHttp Requests : 使用同步 ajax 不好吗？

> ID：14490770
> 
> 赞同：2
> 
> 时间：2013-01-23T22:44:00.063
> 
> 标签：jquery, ajax, validation, asynchronous, synchronous

我知道，总的来说，目标应该是避免`async: false`. 但是，在这种情况下，我想了解是否值得将事情捆绑在一起以使其工作，或者是否可以：

在我网站的注册页面上，我有一个`JS/jQuery`提交验证功能。它有两个`AJAX`查询，一个用于`username`（以确保它尚未被占用），一个用于`email`（以确保他们没有提交已被其他用户声明的电子邮件）。在验证功能中，我会检查每一项以及许多其他内容（密码匹配、检查非空白等），当其中任何一项弹出时，都会出现一条警告消息说明问题。

这两个 ajax 查询`async: false`都是为了确保表单在被检查之前不提交。

**我的问题是，**
这有多糟糕？如果它很糟糕，那么为什么？我可以将工作投入到创建一个函数来检查两者并为每个不同的选项有 4 个返回值，但这似乎很多......我知道这可能不是一个可靠的编码问题，但我编码新手，想确保我理解这里的区别意味着什么。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-13T09:16:54.237

同步 HTTP 请求会在后续代码在途中停止执行。虽然在此期间浏览器可能不再阻止 UI，但我们依靠用户的可用带宽、网络可靠性和服务器的当前负载来执行代码。这通常不是好的做法。

正如我从该链接中发现的那样，这可能会对您有所帮助，请查看此 **[https://softwareengineering.stackexchange.com/questions/112551/should-we-still-consider-a-synced-xmlhttprequest-bad-practice](https://softwareengineering.stackexchange.com/questions/112551/should-we-still-consider-a-synced-xmlhttprequest-bad-practice)**

您还应该参考**[https://webtide.com/xmlhttprequest-bad-messaging-good/](https://webtide.com/xmlhttprequest-bad-messaging-good/)**

# php - aws-php-sdk -- 在没有包管理器的情况下安装

> ID：14490771
> 
> 赞同：3
> 
> 时间：2013-01-23T22:44:05.863
> 
> 标签：php, amazon-web-services, amazon-s3

我正在努力引入 AWS PHP SDK，但由于我当前的堆栈没有使用包管理器，因此遇到了一些问题。也不是开始使用它的选项（与公司相关——宁愿不详细说明）。

话虽如此，我直接拉入源代码并尝试将其添加到我的包含路径中，并仅将我需要的文件包含在我正在编写的 S3 包装器对象中。但是，它遇到了命名空间（我认为）和那些爆炸的问题。

这是我指的图书馆： [https ://github.com/aws/aws-sdk-php](https://github.com/aws/aws-sdk-php)

我尝试按照底部有关使用 AmazonS3 并将文件上传到其中的内容进行操作。因此，我尝试将它引用的代码的各个部分包括在内，如下所示：

**尝试一**

```
require_once('/includes/third_party/aws-sdk-php-master/src/Aws/Common/Aws.php');
require_once('/includes/third_party/aws-sdk-php-master/src/Aws/S3/Enum/CannedAcl.php');
require_once('/includes/third_party/aws-sdk-php-master/src/Aws/S3/Exception/S3Exception.php'); 
```

**尝试二**

```
set_include_path(get_include_path() . "/includes/third_party/aws-sdk-php-master/src/");
include('Aws/Common/Aws.php');
include('Aws/S3/Enum/CannedAcl')
include('Aws/S3/Exception/S3Exception.php'); 
```

这两个都产生了类似的错误：

```
Fatal error: Class 'Guzzle\Service\Builder\ServiceBuilderLoader' not found in \includes\third_party\aws-sdk-php-master\src\Aws\Common\Aws.php on line 26
PHP Fatal error: Class 'Guzzle\Service\Builder\ServiceBuilderLoader' not found in \includes\third_party\aws-sdk-php-master\src\Aws\Common\Aws.php on line 26 
```

关于如何开始调试的任何建议？将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-05T09:07:33.900

AWS SDK for PHP 现在提供了一个 zip 文件，其中包含您需要的所有内容，包括自动加载器： http: [//docs.aws.amazon.com/aws-sdk-php-2/guide/latest/installation.html#installing-via -压缩包](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/installation.html#installing-via-zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:02:42.367

你应该坚持推荐的安装程序。就个人而言，我会使用 Composer 安装，或者只使用没有 Composer 的 PHAR。

然后你只需要包括 PHAR 像：

```
require '/path/to/aws.phar'; 
```

你将拥有你需要的一切。

您现在遇到的问题很可能是您没有利用自动装载机。使用您的方法，您将需要手动包含所有通常会自动加载的类。

您还需要下载并包含另一个库（Guzzle，未包含在 PHAR 存档中）。

# jquery - jQuery选择要显示的孩子

> ID：14490773
> 
> 赞同：0
> 
> 时间：2013-01-23T22:44:10.560
> 
> 标签：jquery, dom, children

我有以下 html

```
<div class="foo">
    <a href="" class="bar1">Bar1</a>
    <a href="" class="bar2">Bar2</a>
</div> 
```

假设.foo 默认隐藏，那么我只想显示.foo 和他的孩子.bar1。如何在 jquery 中做到这一点？

我的jquery中有这个

```
$('#' + id).children(".foo //anything I can do here to select ONLY bar1 to show? ").show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:49:17.063

我会隐藏所有孩子，只显示`bar1`。见下文，

```
var $foo = $('.foo');    //cache foo
$foo.children().hide();  //hide all foo's children
$foo.show();             //show foo
$foo.find('.bar1').show();  //show bar1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:46:26.087

这会奏效。

```
$('#' + id).find(".foo .bar1").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:48:31.773

```
$(".foo").show();
$(".foo").children(".bar1").show();

$(".foo").children("not:(.bar1)").hide();//if not hidden 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T22:50:24.787

你可以打字

```
$('.foo').toggle(); 
```

显示或隐藏 foo div 容器。

选择栏 1 你可以选择`$('.foo > .bar1').somefunction()`或`$('.foo').children('.bar1').somefunction();`

有很多不同的方法来选择你的元素......你也可以使用`.hide()`或`.show()`管理你的元素是否隐藏

总是一个不错的链接顺便说一句：http: [//api.jquery.com/](http://api.jquery.com/)

# javascript - JQuery 语法混乱

> ID：14490780
> 
> 赞同：1
> 
> 时间：2013-01-23T22:44:28.517
> 
> 标签：javascript, jquery

我对 JQuery 几乎是新手。所以如果是微不足道的请见谅。

这在 JQuery 中是什么意思： var Utilities = $([]);

这就像定义一个数组吗？任何示例的链接？

更多信息：在代码中定义之后，我看到：

```
Utilities.Message = ' some message';
Utilities.function1 = function(message) { some code };
Utilities.function2 = function() { some code}; 
```

调用方法：Utilities.function2();

谢谢，-萨拉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:03:50.730

`$([])`将使用[`jQuery( elementArray )`签名](http://api.jquery.com/jQuery/#jQuery1)创建一个空集合`jQuery`。

现在做同样的`jQuery()`签名，直到 jQuery 1.4`jQuery([])`才可用，因此可以在此之前使用，并且仍然可以用于与旧版本的库兼容。

在 1.4 之前，`jQuery()`将与`jQuery(document)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:46:16.157

我不认为这意味着什么。我不相信您可以像这样将数组作为选择器。

定义一个数组将是：

var Utilities.Urls = [];

这有一些很好的信息：[在 javascript 中定义数组](https://stackoverflow.com/questions/6047582/defining-array-in-javascript)

# c - 将默认值从外部更改为静态

> ID：14490781
> 
> 赞同：0
> 
> 时间：2013-01-23T22:44:32.510
> 
> 标签：c, gcc, static, c99

我总是忘记在我的变量和函数中添加“静态”前缀，因此 GCC 将它们标记为外部。是否可以更改此行为，以便默认情况下将所有内容标记为静态。并且这两种类型在运行时是否存在性能差异，还是更像是一种形式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T22:47:29.917

> 是否可以更改此行为，以便默认情况下将所有内容标记为静态。

据我所知不是。

> 并且这两种类型在运行时是否存在性能差异，还是更像是一种形式？

是的，在指定`gcc`对象或函数时能够执行进一步的优化`static`。例如，`gcc`(even in `-O0`) 将内联`static`只调用一次的指定函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:54:30.307

首先：`extern`修饰符**不是**默认的。该限定符表示提到的项目将在另一个编译单元中定义，因此它仅适用于声明全局变量之类的内容。

没有办法使`static`修饰符成为默认值，因为没有`dynamic`修饰符可以取消这个默认值。因此，没有办法编写具有该默认值的工作代码：每个函数和变量都是`static`，这将导致编译器生成一个空的输出文件！

> 这两种类型在运行时是否存在性能差异，还是更像是一种形式？

编译器可以对`static`函数和变量进行一些优化，而这些优化是动态的。特别是，`static`从未引用的函数和变量可能会被完全删除，并且`static`可以更积极地内联函数。

# facebook-access-token - Internet Explorer 中缺少 url 参数

> ID：14490789
> 
> 赞同：3
> 
> 时间：2013-01-23T22:45:03.287
> 
> 标签：facebook-access-token

我正在按照[此处](http://developers.facebook.com/docs/reference/dialogs/oauth/)的教程获取访问令牌以从 Web 浏览器访问 Facebook。基本上，本教程指导人们以以下形式获取 URL

```
http://www.facebook.com/dialog/oauth/?
    client_id=YOUR_APP_ID
    &redirect_uri=YOUR_REDIRECT_URL
    &state=YOUR_STATE_VALUE
    &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES 
```

然后用户在对话框中登录。之后，Web 浏览器将转到 redirect_uri，后跟访问时间和过期时间，形式为

```
YOUR_REDIRECT_URI#
    access_token=USER_ACCESS_TOKEN
   &expires_in=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

它适用于 Chrome 和 Firefox。但是 IE 在 redirect_uri 之后不会显示访问令牌。实际上它没有在返回 url 中显示任何参数。我曾在两台不同的计算机上尝试过 IE，但出现了同样的问题。

任何人都知道为什么会出现问题以及如何解决它？任何帮助深表感谢！

# javascript - 检查当前 url 中的特定 uri - Jquery

> ID：14490792
> 
> 赞同：0
> 
> 时间：2013-01-23T22:45:10.280
> 
> 标签：javascript, jquery, url, uri

我正在尝试检查当前 url

```
base_url/index.php?name0=value0&name1=value1&name2=value2... 
```

包含特定的`name=value`. 我试过这个

```
var path = $.inArray('name=value', $(location).attr('href').split('&'));
        if (path  > -1){ triggers my function...} 
```

但我想如果 url 是 url 编码的，这将不起作用。有没有办法在`name=value`不检查所有条件的情况下检查url`(split('&')`是否包含`split('%26'))`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:58:08.157

您可以为此使用核心 javascript：

```
var parameterName = 'name0';
var parameterValue = 'value0';
var path = decodeURI(location.href).indexOf(parameterName+'='+parameterValue); 
if (path > -1){ 
    triggers my function...
} 
```

**编辑：**我已经对其进行了更多测试，但两种解决方案都不是完美的：当您在指定名称值之前有某些东西时，我的失败，例如：`varname0`当您检查`name0`时会找到并且不正确时，您的（和 monshq 的）不检查字符后面的第一个值/对`?`。

[如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)是你正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:58:39.403

拆分将始终有效，因为`&`如果拆分参数，则部分 url 未编码。但是，您可以在 url 中编码名称或值。要搜索它们，您应该`encodeURI`这样使用：

```
var path = $.inArray(encodeURI('name=value'), $(location).attr('href').split('&'));
    if (path  > -1){ triggers my function...} 
```

# sharepoint - 在子站点级别的 SiteSettings 页面中隐藏 CustomAction

> ID：14490795
> 
> 赞同：4
> 
> 时间：2013-01-23T22:45:23.300
> 
> 标签：sharepoint, custom-action

我有两个将 CustomAction 添加到 SiteSettings 页面的功能。一个功能是在站点级别，另一个是在 Web 级别。

在站点级别添加的 CustomAction 是指向自定义配置页面的链接，该页面为我的应用程序操作站点级别设置。因此，我不希望为子网站的 SiteSettings 页面显示链接。我知道有一个设置（RequireSiteAdministrator）可以根据访问级别隐藏页面，但我仍然希望在顶级/根级别站点设置页面而不是子站点级别设置页面中为站点所有者显示此页面.

CustomAction xml 节点有一个 RootWebOnly 属性，可以解决我的问题。此属性的问题在于它仅适用于沙盒解决方案。

我知道这是可能的，因为我在网站设置页面的用户和权限部分看到了网站集管理员链接的行为。请注意，如果您转到顶级/根级别设置页面，您将看到此链接。另一方面，如果您导航到子站点的站点设置页面，则链接不再存在。

我曾尝试使用 HideCustomAction，但这会隐藏两个页面上的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:20:12.447

在与这个斗争了两天之后，我有一个 ah 的时刻，我想我会分享。这将允许您放置仅在根 Web 级别显示的自定义操作。

创建 2 个特征。一种在站点级别 (siteFeature)，另一种在 Web 级别 (webFeature)。隐藏 Web 功能，使其无法通过管理功能页面访问（激活/停用）。将自定义操作元素 xml 放入 Web 功能中。在站点功能的激活事件接收器中，激活 Web 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:32:29.060

不幸的是，自定义操作和自定义组无法做到这一点。

您所能做的就是设置仅向 SiteCollection 管理员显示的链接的权限

示例是“站点集合管理”组，当您不在顶级站点级别时链接隐藏并在您位于时显示。

希望能帮助到你，

安德鲁

# java - Eclipse 在哪里打印它在注释处理器中输出的消息？

> ID：14490796
> 
> 赞同：7
> 
> 时间：2013-01-23T22:45:25.070
> 
> 标签：java, eclipse, annotations

[Eclipse Juno](http://www.eclipse.org/juno/)在哪里打印以下注释处理器`ComplexityProcessor`在编译类时输出的消息`SimpleAnnotationTest`？编译后，我希望在控制台窗格中看到消息，但它是空的。

```
public @interface Complexity
{
    public enum Level
    {
        VERY_SIMPLE,
        SIMPLE,
        MEDIUM,
        COMPLEX,
        VERY_COMPLEX;
    }

    Level value() default Level.MEDIUM;
}

@SupportedAnnotationTypes("com.intelerad.annotations.Complexity")
@SupportedSourceVersion(SourceVersion.RELEASE_6)
public class ComplexityProcessor extends AbstractProcessor
{
    @Override
    public boolean process( final Set<? extends TypeElement> annotations,
                            final RoundEnvironment environment )
    {
        for ( final Element element : environment.getElementsAnnotatedWith( Complexity.class ) )
        {
            final Complexity complexity = element.getAnnotation( Complexity.class );
            String message =
                "Annotation found in " + element.getSimpleName() + " with complexity " +
                complexity.value();

            // Where does Eclipse print this message?
            processingEnv.getMessager().printMessage( Diagnostic.Kind.NOTE, message );
        }
        return true;
    }
}

@Complexity(Level.VERY_SIMPLE)
public class SimpleAnnotationTest
{
    @Complexity()
    public void theMethod()
    {
        System.out.println( "console output" );
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T15:37:57.543

我在 Eclipse 中找到了输出`.metadata/.log`：

```
!ENTRY org.eclipse.jdt.apt.pluggable.core 1 1 2013-01-23 16:45:35.102
!MESSAGE Annotation found in SimpleAnnotationTest with complexity VERY_SIMPLE

!ENTRY org.eclipse.jdt.apt.pluggable.core 1 1 2013-01-23 16:45:35.102
!MESSAGE Annotation found in theMethod with complexity MEDIUM 
```

# javascript - 如何将 forvo API 与 jquery ajax 一起使用？

> ID：14490797
> 
> 赞同：1
> 
> 时间：2013-01-23T22:45:30.653
> 
> 标签：javascript, jquery, ajax, api

我正在尝试这个：

```
 $("i.icon-play-circle").click(function(){
        var word = "你好";
        var url = 'http://apifree.forvo.com/key/XXXXXXXXXXXXXXXXXXXXXXXXXXX/format/json/action/standard-pronunciation/word/'+encodeURI(word)+'/language/zh';
        $.ajax({
            url: url,
            crossDomain: true,
            dataType: "jsonp",
            success: function (i,item) {
                alert(item);
            },
            error: function () {
                alert('foo');
            }
        });
    }); 
```

我在萤火虫控制台中收到此错误：

```
SyntaxError: invalid label
[Break On This Error]   

{"items":[{"id":1967282,"addtime":"2013-01-21 23:35:31","hits

zh?cal...0549189 (line 1, col 1) 
```

**更新：**

如果您想取回 jsonp，请按照以下方式格式化 url：

apifree.forvo.com/key/XXXXXXX/format/json/callback/your_function_here **/** action/standard-pronunciation/word/你好/language/zh

**结果：**

`pronounce({"items":[{"id":436,"addtime":"2008-03-16 10:40:22","hits":4346,"username":"geneboy","sex":"m","country":"China","code":"zh","langname":"Mandarin Chinese","pathmp3":"http:\/\/apifree.forvo.com\/audio\/2i253j1l2e2m1b2i2f3q2d2g2f341k2q1f3h2g1b3m223i342b2q3k28323n2732372e1b1o393k2k1m1i2q3m353q253l36371l3k3a3q3d271h3133342o263g3223_3m2d2p2f2d1f2k3n1h3i3g2q263f293e1b253g1i2f2h1t1t","pathogg":"http:\/\/apifree.forvo.com\/audio\/3b2625373d3f2n1j233d2b211i3j3p3g1b1j1m312i3j2f261l2e2n383k371i1m3a3l292o3k2h29293h3q3c3f362h2k2h271m3i312o211h3m3g1h3e351m2n2d27_293q2c2l1m343a2q26343a391k1p3m1o2a2q333f35371t1t","rate":5,"num_votes":5,"num_positive_votes":5}]})`

**我现在需要帮助编写一个打印“pathmp3”值的函数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:37:39.533

这是对我有用的ajax代码：

```
 word = "你好"
    var url = 'http://apifree.forvo.com/key/XXXXXXXXXXXXXXXX/format/json/callback/pronounce/action/standard-pronunciation/word/'+encodeURI(word)+'/language/zh';
    $.ajax({
        url: url,
        jsonpCallback: "pronounce",
        dataType: "jsonp",
        type: "jsonp",
        success: function (json) {
       var mp3 = json.items[0].pathmp3;
       var ogg = json.items[0].pathogg;
   },
    error: function(){
        console.log("error");
}}); 
```

# git - heroku nodejs app通过git remote将文件推送到另一个heroku nodejs app

> ID：14490801
> 
> 赞同：0
> 
> 时间：2013-01-23T22:45:34.127
> 
> 标签：git, node.js, heroku

我在 heroku 上有两个 nodejs 应用程序。我需要我的一个应用程序来更改另一个应用程序的文件。我有一个目标应用程序的 git url。换句话说，我在 nodejs 应用程序的内存中有文件。我需要将它们推送到 git url。类似这个 nodejs git-stream 模块的东西，但这不起作用。

请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:38:18.347

我不会明确推荐为此目的使用 git。如果您的应用程序更改了其他文件并且您想推送，则具有更改文件的整个应用程序将重新启动，并且由于从外部下载模块，heroku 需要很长时间。相反，实施只有您的服务器可以连接的安全文件上传机制，并通过 http 将文件流式传输到该服务器。

# python - 在 Kivy 画布上绘制 SVG

> ID：14490804
> 
> 赞同：10
> 
> 时间：2013-01-23T22:45:46.193
> 
> 标签：python, canvas, svg, kivy

我是基维的新手。我需要创建一个经典的模拟时钟。

我的问题是：如何将 svg 图形绘制到 kivy 画布中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T05:37:50.673

Kivy master 现在有实验性的 SVG 支持。它将在 1.9.0 中发布。

更多信息请访问：

*   [https://github.com/kivy/kivy/blob/master/examples/svg/main.py](https://github.com/kivy/kivy/blob/master/examples/svg/main.py)
*   [https://github.com/kivy/kivy/blob/master/kivy/graphics/svg.pyx](https://github.com/kivy/kivy/blob/master/kivy/graphics/svg.pyx)
*   [https://twitter.com/mathieuvirbel/status/513161191817220097](https://twitter.com/mathieuvirbel/status/513161191817220097)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T14:11:14.797

@incognick

无需使用任何其他库。使用 Kivy 本身制作一个小部件。

为此，首先将 kivy.widget.Widget 子类化，然后定义一个带有一些 kivy.graphics.Instruction 的画布。

[更多细节在这里。](http://kivy.org/docs/api-kivy.graphics.html)

# java - 在 for 循环中将值重新分配给 double

> ID：14490805
> 
> 赞同：-2
> 
> 时间：2013-01-23T22:45:48.943
> 
> 标签：java

我目前正在开发一个程序，该程序将计算贷款的简单利率和每月付款。虽然，我遇到了一个很大的问题。我正在努力使我的主要价值（见代码）重新分配给我的新余额的价值（见代码）。这是我现在的代码，我将在下面更详细地解释：

```
import java.util.Scanner;

 public class Payments {

public static double principal;       //principal
public static double annualrate;     //annual interest rate
public static double p;             //monthly payment
public static double mr;           //monthly interest rate
public static double nb;          //new balance after monthly payments
public static double i;          //interest (monthly)
public static String spaces = "           "; //spaces for making clean columns
public static int months = 12;

public static void main(String[] args){

    Scanner input = new Scanner(System.in);

    System.out.println("Principal: $");
    principal  = input.nextDouble();

    System.out.println("Anual Interest Rate: ");
    annualrate = input.nextDouble();

    System.out.println("Monthly Payment: $");
    p = input.nextDouble();

    calculate();

}

public static void calculate() {
    mr = annualrate / 12;
    i = mr * p;
    nb = principal + i - p;

    System.out.print("Month     Principal Amt.        Interest       Payment         New Balance");
    System.out.println();
    System.out.println();

    for(int x = 1; nb > 0; nb = principal + i - p){

        System.out.println(x + spaces + p + spaces + i + "%" + spaces + "$"           + p + spaces + "$" + nb);
             p = (Double)null;
             p = nb;

         }

     }
 } 
```

因此，正如您很可能通过代码中的注释看到的那样，显示了所有变量。现在，忽略 null 而我将其转换为双精度值，因为这是我在问你们之前尝试做的最后一件事 :) 无论如何，我的最后一个问题是，我怎样才能将 principal 的值重新分配给我的新百伦（NB）？另外，一个附带的问题，对于这种程序来说，while循环会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:55:59.673

nb = p + i - p; ？？？看起来您需要仔细检查您的代码.. for 循环不会在任何地方更改条件.. 如果值大于 0，您将始终将其引导到无限循环，或者它根本不会进入循环（如果 np<1）。所以检查你的代码是否有运行时错误..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:00:55.617

这已经在评论中说了，但我能看到的最直接的问题是

```
for(int x = 1; nb > 0; x++){ 
```

你的情况，`nb > 0`永远不会在那个循环中改变。

这意味着两件事中的一件

*   你的循环不会执行
*   你的循环不会退出（无限循环）

从您的计算方式`nb`（新余额）来看，我假设它大部分时间都会高于 0，并且您的循环永远不会停止。

就目前情况而言，我不完全确定您在该`for`循环中实际想要做什么，或者您是否甚至想要一个 for 循环，因为那部分还不清楚。

* * *

`for`循环应该做什么？

它几乎看起来像你正在尝试做类似的事情

```
for (int x = 1; principal > 0; x++)
{
    principal += principal * monthlyInterestRate;
    principal -= payment;

    System.out.println("insert output here");
} 
```

# c++ - 扩展基类并维护引用

> ID：14490807
> 
> 赞同：0
> 
> 时间：2013-01-23T22:45:53.287
> 
> 标签：c++

我试图找出一种方法来获取我的基类的副本，并创建我的子类的一个实例，该实例引用与基类相同的地址空间。

例如，我的基类中有许多成员`Foo`，而子类中有几个额外的成员`Bar`。如何从我的酒吧创建一个`Foo`这样的变化`x`也`Bar`改变`x`.`Foo`

前任）

```
struct Foo{
    int x;
    Foo(){
        x = 0;
    }
}

struct Bar : Foo{
    int z;
    //?? what to do here
}

int main(){
   Foo foo();
   Bar bar(foo); //??
   bar.x = 7;
   assert(bar.x == foo.x);
} 
```

我知道这是一个奇怪的问题，而且我的措辞不是很好。如果有人知道答案，或者如果我很可笑并且在stackoverflow上有一个我无法找到的答案，我将非常感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:09:29.027

根据您希望/可以如何处理此问题，您有两种选择：

1) 间接

```
struct Bar
{
private:
    Bar() = delete; //eradicate the default constructor
public:
    //Foo member references
    int &x;

    //Bar members
    int z;

    Bar(Foo& f): x(f.x) { } //of course, you may initialize z as well
}; 
```

用法：

```
Foo foo_obj;

//new scope begins (can be a function call, for example)
{
    Bar bar_obj(foo_obj);

    //do stuff with bar_obj
    //...
    //work done

} //scope ends; bar_obj is destroyed

//magic! foo_obj has been updated with the correct values all this time 
```

2) 多态性

```
struct Bar: public Foo
{        
    //Bar members
    int z;

    Bar(): Foo() { }
}; 
```

用法：

```
Foo foo_obj;

//new scope begins (can be a function call, for example)
{
    Bar bar_obj;
    static_cast<Foo&>(bar_obj) = foo_obj; //we'll use Foo's default (or user-defined) assignment operator
    //note that you need to cast to reference

    //do stuff with bar_obj
    //...
    //work done

    foo_obj = bar_obj; //you will need to copy your data back at this point
    //also note foo_obj has not been updated during this time, which may not be desirable
} //scope ends 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:14:32.283

当您初始化 Bar 时，您当前的代码会生成您的 Foo 的新副本，这意味着它在其结构中存储了自己的一组单独的值。为了让 Foo 和 Bar 共享一个值，您需要将其更改为指针或引用。您还需要为 Bar 指定一个以 Foo 作为参数的构造函数。

这是一种方法，显然不理想，因为 X 的值被存储为全局，最终您将需要某个地方来存储它，而确切的位置取决于您的需要。

```
int x_storage;

struct Foo{
    int& x;
    Foo(): x(x_storage){
        x = 0;
    }
};

struct Bar : Foo{
    int z;
    Bar(Foo& f)
    {
        x = f.x;
    }
};

int main(){
   Foo f = Foo();
   Bar b = Bar(f); //??
   b.x = 7;
   assert(b.x == f.x);
}; 
```

**编辑：**从您的评论来看，也许 inheretence 根本不是您想要的，您可能只是想使用“具有”关系将 Foo 包装在 Bar 中，如下所示：

```
struct Foo{
    int x;
    Foo(){
        x = 0;
    }
};

struct Bar{
    Foo& myFoo;
    int z;
    Bar(Foo& f): myFoo(f){
    }
};

int main(){
   Foo f = Foo();
   Bar b = Bar(f); //??
   b.myFoo.x = 7;
   assert(b.myFoo.x == f.x);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T23:15:20.550

对，所以我假设你也有能力创建你的对象：

```
class Foo  // Base class. 
{
   public:
     int x;
};

class Bar
{
   public:
     int z;
} 
```

一些功能：

```
void frobb(Foo *fooPtr)
{
    if(fooPtr->x != 7)
    {
        cout << "Bad value of x\n"; 
    }
    ... 
}

....

// some of your code (in a different file probably.

Bar b;
... do stuff with b. 
b.x = 7;
frobb(&b); 
```

除非 API 中确实存在问题，否则您永远不需要从 Foo 中创建 Bar，或从 Bar 中创建 Foo。那只是糟糕的设计。

编辑：

在评论中描述的情况下：

一些代码创建了一个 Bar 对象：

```
Bar b;

extern void some_generic_api(Foo *fptr);

... do stuff with b, including setting your own variables. 

b.x = 7;
some_generic_api(&b);   // WOrks like a "Foo" object without problem. 

... some other bit of code ... 

void frobb(Foo *fptr)
{
    // Note: Don't do this unless you are SURE it's a Bar object you actually have! 
    Bar *bptr = reinterpret_cast<Bar*>(fptr);   

    .. do stuff that requires Bar object using bptr;
    bptr->x = 19; 

    some_generic_api(bptr);   // This will work fine. 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T02:32:56.650

只是另一个尚未提及的选项，但如果您只想在内存中为 Foo 作为基类的所有对象分配一个变量，则可以使用静态成员变量。

```
struct Foo{
    static int x;
    Foo() {
        x = 0;
    }
};

int Foo::x = 0;

struct Bar : Foo {
    int z;
};

int main(){
   Foo foo();
   Bar bar();
   bar.x = 7;
   assert(&bar.x == &foo.x); // now using the same memory address
} 
```

而且，作为一个注释，静态关键字在 C++ 语言中有很多含义，所以如果你不熟悉的话，我建议你查看其余的（这里是[C++ 静态关键字上的一个 msdn 页面 msdn 页面](http://msdn.microsoft.com/en-us/library/s1sb61xd.aspx)作为入门）我不能说我经常使用 static 关键字的所有含义（特别是函数范围内的静态变量），但是如果出现正确的情况，它们是工具箱中的方便工具。

# javascript - 谷歌可视化数据表不会转到 csv

> ID：14490808
> 
> 赞同：0
> 
> 时间：2013-01-23T22:45:56.567
> 
> 标签：javascript, csv

在谷歌操场上搞砸了这个，它似乎没有任何错误。但是，当我去做导出选项时，它什么也没给我。任何想法？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>
  Google Visualization API Sample
</title>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['table']});
</script>
<script type="text/javascript">
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Name', 'Height', 'Smokes'],
    ['Tong Ning mu', 174, true],
    ['Huang Ang fa', 523, false],
    ['Teng nu', 86, true]
  ]);
  var options = { 'showRowNumber': true };
  options['page'] = 'enable';
  options['pageSize'] = 3;
  options['pagingSymbols'] = { prev: 'prev', next: 'next' };
  options['pagingButtonsConfiguration'] = 'auto';

  var components = [
    { type: 'html', datasource: data },
    { type: 'csv', datasource: data }
  ];

  var container = document.getElementById('toolbar_div');
  google.visualization.drawToolbar(container, components);

  // Create and draw the visualization.
  visualization = new google.visualization.Table(document.getElementById('table'));
  visualization.draw(data, options);
}

google.setOnLoadCallback(drawVisualization);
</script>
</head>
<body style="font-family: Arial;border: 0 none;">
<div id="table"></div>
<dov id="toolbar_div"></div>
</body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:12:07.950

根据文档，您必须通过 URL 而不是任何手动填充的数据对象传递数据。请参阅： [https ://developers.google.com/chart/interactive/docs/gallery/toolbar](https://developers.google.com/chart/interactive/docs/gallery/toolbar)

> **用法** 要使用工具栏，您的可视化必须从 URL 获取其数据；您不能传入手动填充的 DataTable 或 DataView 对象。您将用于填充可视化的数据的 URL 传递到 drawToolbar() 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T02:56:30.697

**代码：**

```
$('#Export').click(function () {
    var csvFormattedDataTable = google.visualization.dataTableToCsv(data);
    var encodedUri = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csvFormattedDataTable);
    this.href = encodedUri;
    this.download = 'table-data.csv';
    this.target = '_blank';
}); 
```

**解释：**

[查看我在此处发布的答案以获取代码说明。](https://stackoverflow.com/questions/17853248/google-visualization-datatable-to-csv-download/38387061#38387061) `Export`是带有下载选项的页面上锚元素的 ID。

# sql - 谜团：SQL 查询因 DataLength() 条件而挂起

> ID：14490823
> 
> 赞同：2
> 
> 时间：2013-01-23T22:46:36.723
> 
> 标签：sql, sql-server-2008, tsql, query-optimization

我有一张叫做照片的桌子。它有 3000 多行，并包含一个`image`名为 Photo 的类型字段。

此查询立即运行：

```
Select PhotoFileName, DATALENGTH(Photo)
From Photos 
Order by DATALENGTH(Photo) 
```

此查询间歇性挂起（有时需要几分钟才能完成，然后在完成一次后立即运行）。

```
Select PhotoFileName, DATALENGTH(Photo)
From Photos 
Where DATALENGTH(Photo)>0 
```

与此查询相同：

```
Select PhotoFileName, DATALENGTH(Photo)
From Photos 
Where Photo is not NULL 
```

可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:49:08.017

我不确定你*为什么*会看到这个问题，但我认为你可以通过在表中添加一个[计算列](http://msdn.microsoft.com/en-us/library/ms191250.aspx)来保存照片的长度来解决它，可能与该新列上的索引相关联。

# java - 带有字体和样式的 iText PDF 文本提取

> ID：14490829
> 
> 赞同：0
> 
> 时间：2013-01-23T22:46:50.903
> 
> 标签：java, android, pdf, itext

我正在使用 iText 将文本从 PDF 提取到字符串，但我遇到了一些 PDF 的问题。当我尝试提取文本时，阅读器仅提取某些 pdf 上的空白/损坏的文本。

被破坏的文本示例：

**“对于提取文本的测试时间已经很长了”**

**这个问题的原因是什么？**

我正在考虑删除字体并将字体更改为适合读者阅读的字体。我曾尝试对此进行研究，但我发现的内容对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:51:12.227

这是由文本在 PDF 文件中的存储方式引起的。它只是放置带有渲染和位置信息的字母。文本提取算法很聪明，因为它可以找到看起来很接近的字母，如果是的话，它将它们放在一起。如果它们不是那么接近，它会放置一些空间。

不过，我不能告诉你该怎么做。

# jquery - jQuery脚本在不应该运行的函数时运行

> ID：14490834
> 
> 赞同：0
> 
> 时间：2013-01-23T22:46:54.507
> 
> 标签：jquery, jquery-selectors

我已经破解了这个 jQuery 脚本，它工作正常，除了警报在不应该触发的时候被触发，我不知道为什么。

```
jQuery(document).ready(function(){              
function countDouble() {      

  var d = $("input.double:checked").length;
  var s = $("input.single:checked").length;

    if (s === 1 && d === 2) {

        $("a#proj-btn").attr("href", "#tab2");

    } else {

        $("a#proj-btn").attr("href", "http://www.someurl.com.au/new-cruise-name-home");
        $("#proj-btn").click( function() {
            alert('Please select which projects you are interested in before continuing with enquiry.\nSelect 1 x 1 day project and 2 x 2 day projects by ticking the box beneath your chosen projects.');
        });
    };
}
countDouble();
$(":checkbox").click(countDouble);  
}); 
```

这是HTML

```
<ul class="tabs">
    <li class="right"><a id="proj-btn" href="#">NEXT &gt;&gt; Cabin Choice</a></li>
</ul> 
```

因此，当有1次X.Single复选框时，检查2 x .double复选框时，它会将＃tab2的URL添加到正常工作的按钮。但是，当复选框被选中时，它也会在单击按钮后显示 3 次警报。仅当未选中复选框时才应发出警报。我做错了什么？我无法解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:55:27.720

每次调用`countDouble()` 并拉出`countDouble()`就绪函数时尝试取消绑定“单击”（可能没有必要）。

```
function countDouble() {      
  var d = $("input.double:checked").length;
  var s = $("input.single:checked").length;

  //Add This:
  $("#proj-btn").unbind('click');

  if (s === 1 && d === 2) {

        $("a#proj-btn").attr("href", "#tab2");

  } else {

        $("a#proj-btn").attr("href", "http://www.someurl.com.au/new-cruise-name-home");
        $("#proj-btn").click( function() {
            alert('Please select which projects you are interested in before continuing with enquiry.\nSelect 1 x 1 day project and 2 x 2 day projects by ticking the box beneath your chosen projects.');
        });
  };
}
jQuery(document).ready(function(){              
    countDouble();
    $(":checkbox").click(countDouble);  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:59:31.433

```
jQuery(document).ready(function(){              
function countDouble() {      

  var d = $("input.double:checked").length;
  var s = $("input.single:checked").length;

    if (s === 1 && d === 2) {

        $("#proj-btn").unbind("click");//changed
        $("a#proj-btn").attr("href", "#tab2");

    } else {

        $("a#proj-btn").attr("href", "http://www.someurl.com.au/new-cruise-name-home");
        $("#proj-btn").click( function() {
            alert('Please select which projects you are interested in before continuing with enquiry.\nSelect 1 x 1 day project and 2 x 2 day projects by ticking the box beneath your chosen projects.');
        });
    };
}
countDouble();
$(":checkbox").click(countDouble);  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:01:23.200

请参阅此表单以将您的事件处理程序添加到函数之外：

```
jQuery(document).ready(function () {
    $("#proj-btn").click(function () {
        alert('Please select which projects you are interested in before continuing with enquiry.\nSelect 1 x 1 day project and 2 x 2 day projects by ticking the box beneath your chosen projects.');
    });

    function countDouble() {
        var d = $("input.double:checked").length;
        var s = $("input.single:checked").length;
        if (s === 1 && d === 2) {
            $("a#proj-btn").attr("href", "#tab2");
        } else {
            $("a#proj-btn").attr("href", "http://www.someurl.com.au/new-cruise-name-home");
        }
    }
    countDouble();
    $(":checkbox").click(countDouble);
}); 
```

# php - 通过 ajax 发送动态生成的选择

> ID：14490837
> 
> 赞同：0
> 
> 时间：2013-01-23T22:46:58.983
> 
> 标签：php, ajax, codeigniter

我有这个：

```
<? foreach ($atributes as $key => $value) { ?>
    <select size="10" id="attr_id_<?=$value['id']?>">
        <? foreach ($value['attrs'] as $key => $value) { ?>
        <option value="<?=$value['value_id']?>" ><?=$value['name']?></option>
        <? } ?>
    </select>
<? } ?> 
```

我需要通过 ajax 将这些选定的选项发送到控制器。

我通常将数据发送到这样的控制器：

```
function save_values() {
    $.post("/dir/page.php",
        {
            api:"update_values",
            attr_id:attr_id,
            value_id:value_id,
    },
    function(data){

    });
} 
```

并让控制器像这样收听发布请求：

```
if($this->input->get_post('api') == "update_values") {
    $attr_id = $this->input->get_post('attr_id');
    .... 
```

我想让所有的选择 ID 值和选项值相互关联，如下所示：

```
array
    (
        'attr_id_XX' => 'XX',
        'attr_id_XX' => 'XX,
    ); 
```

它不需要是一个数组，但我需要以关系方式处理它们，所以我可以用选定的值保存每个 attr_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:02:42.863

您可以将选择包含在一个表单中并使用 jQuery 的序列化函数。

考虑以下：

（请注意，名称属性必须存在于选择中）

```
<form id="myForm">
    <select name="attr1">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
    <select name="attr2">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
    <select name="attr3">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</form>

<script type="text/javascript">
    $(document).ready(function() {
        var url = '';   // ...

        $.ajax(url, {
            type: 'post',
            data: $('#myForm').serialize()
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:14:51.613

你可以为你的 JS 函数尝试这样的事情

```
function save_values() {
    var select_data = {'api': 'update_values', 'value_id': value_id};
    $('select').each(function() {
        select_data[$(this).attr("id")] =  $(this).find(":selected").attr('value');
    });
    $.post("/dir/page.php", select_data,
    function(data){

    });
} 
```

# javascript - 如何使用 jQuery 或 javascript“隐藏”网站并要求输入密码？

> ID：14490842
> 
> 赞同：-4
> 
> 时间：2013-01-23T22:47:18.350
> 
> 标签：javascript, jquery, html

因此，我正在为一位家庭成员创建一个婚礼网站，并希望通过一种非常简单的方式让人们在显示该网站之前输入密码。它不需要是安全的。

我在想我可以在网站上方有一个白色“层”，上面有一个简单的密码表格（网站将在它下面加载）。然后，当输入密码时，白色层消失，出现网站。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:53:13.660

呃..既然你说它不需要安全（*颤抖*），你就可以逃脱......

将与您的网站有关的所有内容包装在某个容器中，比如说 a `div`，在其上抛出一个类`'main-content'`。关于如何隐藏它，您有多种选择：

1.  CSS显示：无；
2.  内联样式：显示：无；
3.  高度：0px；

除了你的`'main-content'`，创建一个类似级别的 div 并给它一个标识符，即类`'login-content'`。保持不变（即可见）。

当 DOM 加载时，你`login-content`应该是可见的，而 main-content 不会。

当用户“成功登录”时，恢复样式。即`main-content`-> `display:block;`, `height:100%`, 无论如何..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:58:32.573

这是一个工作示例。

**HTML**

```
<div class="page">
    HERE IS MY PAGE
</div>
<div class="cover">
    HERE IS THE COVER
</div> 
```

**JavaScript** *(jQuery)*

```
$('.cover').click(function(){
    $(this).fadeOut(1000, function(){
        $(this).remove();    
    });   
}); 
```

**CSS**

```
.page{
    background-color:green;
    height:200px;
}
.cover{
    background-color:yellow;
    height:200px;
    z-index:200;
    position:fixed;
    top:0;
    left:0;
    float:left;
    width:100%;

} 
```

[在 JSFiddle 上查看。](http://jsfiddle.net/LRhHx/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:05:51.477

在 js 的帮助下，你可以这样做：

```
var password;

var pass1="1234567";

password=prompt('Enter your password',' ');

if (password==pass1) {
  $('body').show();
} else  {
  $('body').hide();
} 
```

如果您想了解更多信息，这是来源：http:
[//www.pageresource.com/jscript/jpass.htm](http://www.pageresource.com/jscript/jpass.htm)

# jquery - 浏览器刷新后jquery砌体排水沟放大

> ID：14490843
> 
> 赞同：0
> 
> 时间：2013-01-23T22:47:26.143
> 
> 标签：jquery, css, jquery-plugins, jquery-masonry

就像我认为我在让 Masonry 更具响应性方面取得了进展......

我用这段代码给 Masonry 打电话：

```
jQuery(document).ready(function($) {
var CollManag = (function() {
    var $ctCollContainer = $('#grid'),
    collCnt = 1,
    init = function() {
        changeColCnt();
        initEvents();
        initPlugins();
    },
    changeColCnt = function() {
        var w_w = $(window).width();
        if( w_w <= 480 ) n = 1;
        else if( w_w <= 700 ) n = 2;
        else n = 3;
    },
    initEvents = function() {
        $(window).on( 'smartresize.CollManag', function( event ) {
            changeColCnt();
        });
    },
    initPlugins = function() {
        $ctCollContainer.imagesLoaded( function(){
            $ctCollContainer.masonry({
                itemSelector : '.box_item',
                columnWidth : function( containerWidth ) {
                    return containerWidth / n;
                },
                isAnimated : true,
                animationOptions: {
                    duration: 250
                }
            });
        });

    };
    return { init: init };
})();
CollManag.init(); 
```

});

它根据视口宽度更改砌体柱。

我已经剥离了我的 HTML/CSS，所以我只有一些图像包装在一个 div (.box_item) 中。这些 div 具有基于百分比的宽度（我知道使用 % 的浏览器舍入问题）。

一切运行良好，当我减小浏览器宽度时，我的网格相应地从 3、2、1 列更改。我对容器之间的间距特别满意（一切看起来都一样）。

如果我将浏览器的大小调整到 700 像素，我们的所有间距都是相等的（由于浏览器对我的尺寸进行了四舍五入，在最右侧稍大一些）。如果我在这个视口刷新浏览器，排水沟的宽度会稍微改变。如果我将浏览器的大小调整 1 像素，我的网格间距会重置。

访问某些视口的人比我为他们调整浏览器的大小更重要 :) 知道可能导致此问题的原因是什么吗？99% 确定它与 CSS 无关，因为我已经将所有内容都剥离了。

更新：已将原始脚本替换为以下脚本（问题仍然存在）：

```
// load masonry / change layout based on view port
$(document).ready(function(){
    var $container = $('#grid');
    var gutter = 20;
    var min_width = 230;
    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector : '.box_item',
            gutterWidth: gutter,
            isAnimated: true,
              columnWidth: function( containerWidth ) {
                var box_width = (((containerWidth - 2*gutter)/3) | 0) ;

                if (box_width < min_width) {
                    box_width = (((containerWidth - gutter)/2) | 0);
                }

                if (box_width < min_width) {
                    box_width = containerWidth;
                }

                $('.box_item').width(box_width);

                return box_width;
              }
        });
    });
}); 
```

# python - python 32位浮点数转换

> ID：14490845
> 
> 赞同：1
> 
> 时间：2013-01-23T22:47:50.657
> 
> 标签：python

Redhat 6.3 上的 Python 2.6

我有一个设备可以在 2 个内存寄存器中保存 32 位浮点值，分为最高有效字和最低有效字。我需要将其转换为浮点数。我一直在使用在 SO 上找到的以下代码，它与我在其他地方看到的代码相似

```
#!/usr/bin/env python
import sys
from ctypes import *
first  = sys.argv[1]
second = sys.argv[2]

reading_1 = str(hex(int(first)).lstrip("0x"))
reading_2 = str(hex(int(second)).lstrip("0x"))

sample = reading_1 + reading_2

def convert(s):
    i = int(s, 16)                   # convert from hex to a Python int
    cp = pointer(c_int(i))           # make this into a c integer
    fp = cast(cp, POINTER(c_float))  # cast the int pointer to a float pointer
    return fp.contents.value         # dereference the pointer, get the float

print convert(sample) 
```

寄存器值的一个例子是；

寄存器 1；16282 寄存器 2；60597

这会产生结果浮点数

1.21034872532

一个完美的数字，但有时内存值类似于；

寄存器 1；16282 寄存器 2；1147

其中，使用此函数会导致浮点数；

1.46726675314e-36

这是一个非常小的数字，而不是一个看似正确的数字。该设备应产生 1.2、1.3 范围内的读数。

我要解决的是设备是否抛出虚假值，或者我得到的值是否正确但我使用的函数无法正确转换它们。

还有没有更好的方法来做到这一点，比如 numpy 或类似的东西？我会举手说我刚刚从网上的示例中复制了这段代码，我对它的工作原理知之甚少，但它似乎在我当时可用的测试用例中工作。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T22:56:52.433

如果您有原始字节（例如，从内存、文件、网络中读取，...），您可以使用`struct`：

```
>>> import struct
>>> struct.unpack('>f', '\x3f\x9a\xec\xb5')[0]
1.2103487253189087 
```

在这里，`\x3f\x9a\xec\xb5`您的输入寄存器 16282（十六进制 0x3f9a）和 60597（十六进制 0xecb5）以字符串中的字节表示。是`>`字节顺序标记。

因此，根据您获取寄存器值的方式，您也许可以使用此方法（例如，通过将输入整数转换为字节字符串）。您也可以使用`struct`它；这是你的第二个例子：

```
>>> raw = struct.pack('>HH', 16282, 1147)    # from two unsigned shorts
>>> struct.unpack('>f', raw)[0]              # to one float
1.2032617330551147 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:09:14.883

您转换两个 s 的方式隐含了我认为错误的[字节顺序](http://en.wikipedia.org/wiki/Endianness)`int`假设。

所以，让我们后退一步。你知道第一个参数是最重要的词，第二个是最不重要的词。所以，与其试图弄清楚如何以适当的方式将它们组合成一个十六进制字符串，不如让我们这样做：

```
import struct
import sys

first  = sys.argv[1]
second = sys.argv[2]

sample = int(first) << 16 | int(second) 
```

现在我们可以像这样转换：

```
def convert(i):
    s = struct.pack('=i', i)
    return struct.unpack('=f', s)[0] 
```

如果我在您的输入上进行尝试：

```
$ python floatify.py 16282 60597
1.21034872532
$ python floatify.py 16282 1147
1.20326173306 
```

# django - Django过滤有序表内存使用情况

> ID：14490846
> 
> 赞同：0
> 
> 时间：2013-01-23T22:47:57.597
> 
> 标签：django, memory, filter

我在 model.py 中定义了一个有序表（博客是另一个表）：

```
class OrderedBlog(Blog):
  class Meta:
    ordering = ["-time_created"]
    proxy = True 
```

如果我尝试做类似的事情：

```
OrderedBlog.objects.filter(time_created__lt = a_specific_time) 
```

这会将博客的所有条目都带入内存吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:51:46.580

不，它不会。当您要遍历查询集时，Django 将开始将查询集的每个元素加载到内存中并一次实例化一个。

如果您担心内存使用情况，最好使用[Queryset.iterator()或](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#iterator)[仅](https://docs.djangoproject.com/en/dev/ref/models/querysets/#only)检索您感兴趣的字段。

# listview - iOS UITableView 类似 Flex Air 的 Sticky Header Index 列表

> ID：14490847
> 
> 赞同：3
> 
> 时间：2013-01-23T22:48:06.293
> 
> 标签：listview, apache-flex, android-listview, air, flex-spark

有谁知道是否有用于 Adob​​e Flex (Air) 的现有工具与 iOS 的 UITableView 的 Spark List 视图的粘性标题具有相同的行为？

![在此处输入图像描述](../Images/270ef53f61bca13250479a122ad0c48b.png)

像这样，当你向下滚动粘头将更新到相应的标签初始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:02:15.013

这可能对您有所帮助： [http](http://corlan.org/2011/07/04/creating-flex-mobile-section-lists/) ://corlan.org/2011/07/04/creating-flex-mobile-section-lists/ 您需要添加/调整一些代码以实现您想要的，但这是一个很好的基础

# c# - 在 C# 程序集中将敏感数据存储在哪里？

> ID：14490855
> 
> 赞同：9
> 
> 时间：2013-01-23T22:48:37.983
> 
> 标签：c#, .net, reflector

鉴于可以使用反射器轻松对 C# 程序集进行逆向工程，在 C# 中编译程序集时我应该将敏感数据存储在哪里？

我在我的 C# 程序集中嵌入了一个 X509certificate，在访问证书时我需要在其中存储密码！现在我应该在哪里存储证书密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T22:53:28.570

如果你不介意花一些钱，你可以看看[Eazfuscator](http://www.gapotchenko.com/eazfuscator.net/features)

该供应商声称提供**代码虚拟化**、字符串加密等功能。

如果他的说法是有效的，这可能就是你需要的。

他们有一个试验，所以我想试一试不会有什么坏处。

# php - 从php中的数组中提取信息

> ID：14490858
> 
> 赞同：0
> 
> 时间：2013-01-23T22:48:58.373
> 
> 标签：php, arrays, parsing, web

谁能告诉我如何使用 php 从下面的数组中提取“honda”值？

```
{
        "version": "1.0",
        "encoding": "UTF-8",
        "entry": {
            "name": "bob",
            "car": {
                "model": "honda"
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:51:54.603

这看起来像一个 json 编码的对象。你可以做的是：

```
$info = json_decode($data, true); //where $data has your stuff from the question
$carModel = $obj['entry']['car']['model']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:51:25.383

如果你在一个名为“obj”的变量中拥有所有这些，那么

```
$obj = '{ "version": "1.0", "encoding": "UTF-8", "entry": { "name": "bob", "car": { "model": "honda" } } }';     
$arr = json_decode($obj, true);
echo $arr['entry']['car']['model']; 
```

应该是“本田”

已编辑：根据下面的 Omar，您确实需要 true 作为 json_decode 中的第二个参数。他应该被选为正确答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:09:31.050

使用 json_decode 为：[http ://php.net/manual/fr/function.json-decode.php](http://php.net/manual/fr/function.json-decode.php)

> `<?php`
> 
> `$json = '{"version": "1.0","encoding": "UTF-8","entry": {"name": "bob","car": {"model": "honda"} } }';`
> 
> `$tab = json_decode($json, true);`
> 
> `$honda = $tab['entry']['car']['model'];`
> 
> `var_dump($honda);`
> 
> > `// or with object:`
> 
> `$obj = json_decode($json);`
> 
> `$honda = $obj->entry->car->model;`
> 
> `var_dump($honda);`

# r - 如何更改 ggplot2 密度图中的颜色？

> ID：14490870
> 
> 赞同：4
> 
> 时间：2013-01-23T22:49:37.283
> 
> 标签：r, plot, ggplot2

**摘要**：我想为 ggplot2() 密度分布图选择颜色，而不会丢失自动生成的图例。

**详细信息**：我有一个使用以下代码创建的数据框（我意识到它并不优雅，但我只是在学习 R）：

```
cands<-scan("human.i.cands.degnums")
non<-scan("human.i.non.degnums")
df<-data.frame(grp=factor(c(rep("1\. Candidates", each=length(cands)),
           rep("2\. NonCands",each=length(non)))), val=c(cands,non)) 
```

然后我像这样绘制它们的密度分布：

```
library(ggplot2)
ggplot(df, aes(x=val,color=grp)) + geom_density() 
```

这会产生以下输出：

![在此处输入图像描述](../Images/52fc6ce3ed563a91df0560f10650a21f.png)

我想选择线条出现的颜色，但我一生都无法弄清楚如何。我已经阅读了该网站上的各种其他帖子，但无济于事。最相关的是：

*   [改变ggplot2中密度图的颜色](https://stackoverflow.com/questions/7363813/changing-color-of-density-plots-in-ggplot2)
*   [ggplot2中的重叠密度图](https://stackoverflow.com/questions/12199919/overlapped-density-plots-in-ggplot2)

搜索了一段时间后，我尝试了：

```
## This one gives an error
ggplot(df, aes(x=val,colour=c("red","blue"))) + geom_density() 
Error: Aesthetics must either be length one, or the same length as the dataProblems:c("red", "blue")

## This one produces a single, black line
ggplot(df, aes(x=val),colour=c("red","green")) + geom_density() 
```

我想出的最好的是：

```
ggplot() + geom_density(aes(x=cands),colour="blue")  + geom_density(aes(x=non),colour="red") 
```

![在此处输入图像描述](../Images/e83d01e19d3bbf83dc5684d602b978f9.png) 正如您在上图中看到的，最后一个命令正确地更改了线条的颜色，*但*它删除了图例。我*喜欢*ggplot2的图例系统。它既好又简单，我不想费心去重新创建 ggplot 显然能够做的事情。最重要的是，语法非常难看。我的实际数据框由 7 组不同的数据组成。我不敢相信写`+ geom_density(aes(x=FOO),colour="BAR")`7 次是最优雅的编码方式。

所以，如果一切都失败了，我会接受一个答案，告诉我如何让传说回到第二个情节。但是，如果有人能告诉我如何正确地做到这一点，我会很高兴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T23:00:24.820

```
set.seed(45)
df <- data.frame(x=c(rnorm(100), rnorm(100, mean=2, sd=2)), grp=rep(1:2, each=100))
ggplot(data = df, aes(x=x, color=factor(grp))) + geom_density() + 
                scale_color_brewer(palette = "Set1")

ggplot(data = df, aes(x=x, color=factor(grp))) + geom_density() + 
                scale_color_brewer(palette = "Set3") 
```

给了我不同颜色的相同图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-26T10:32:10.663

为 "values" 参数提供包含颜色的向量，以将离散值映射到手动选择的视觉值：

```
ggplot(df, aes(x=val,color=grp)) +
geom_density() +
scale_color_manual(values=c("red", "blue")) 
```

要选择您想要的任何颜色，请输入十六进制代码：

```
ggplot(df, aes(x=val,color=grp)) +
geom_density() +
scale_color_manual(values=c("#f5d142", "#2bd63f")) # yellow/green 
```

# java - 开机后多次报警重启

> ID：14490871
> 
> 赞同：1
> 
> 时间：2013-01-23T22:49:40.447
> 
> 标签：java, android, broadcastreceiver, alarmmanager, reboot

我正在设置多个警报，以便可以在特定日期重复它们。现在我听说 Android 不会在重启时保存警报。我还阅读了`BroadcastReceiver`应该在何时`BOOT_COMPLETED`重新安排所有警报时使用。

但是，如果我每天有 5 个警报 = 在不同的日子安排大约 35 个警报，我如何告诉 BroadcastReceiver 在重新启动后重新安排警报。我需要将它们存储在数据库中还是？我该如何存储它们？还是我只需要 BOOT_COMPLETED ？这种事情有什么例子吗？我找不到它。

这是我目前用于设置警报和我的简单接收器类的东西。我在这里使用 Service 而不是 BroadcastReceiver，因为我听说 BR 应该只用于处理短的东西，并且将来我将不得不使用一些长的声音剪辑。

```
 private void setAlarm(){     
            Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
            PendingIntent pendingintent = PendingIntent.getService(getBaseContext(), 2, intent, PendingIntent.FLAG_CANCEL_CURRENT);

            AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + sveskupa, pendingintent);
            Toast.makeText(getBaseContext(), "Alarm is set", Toast.LENGTH_LONG).show();
        } 
```

警报接收器类：

```
public class AlarmReceiver extends Service{

            @Override
            public IBinder onBind(Intent intent) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public void onCreate() {
                // TODO Auto-generated method stub
                super.onCreate();
                final MediaPlayer MPRadio1 = MediaPlayer.create(this, R.raw.radio3);
                MPRadio1.start();
                Toast.makeText(getBaseContext(), "OnCreate", Toast.LENGTH_LONG).show();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:09:59.827

> 但是，如果我每天有 5 个警报 = 在不同的日子安排大约 35 个警报，我如何告诉 BroadcastReceiver 在重新启动后重新安排警报。

警报时间表要么是固定的、不变的，并且融入了你的代码，要么不是。

如果它被嵌入到您的代码中，只需使用启动时相同的代码`BroadcastReceiver`来重新建立警报时间表。

否则，警报时间表来自*某个地方*，因为由于宇宙射线与手机的 CPU 和内存的相互作用，警报时间表不太可能是自发创建的。您需要确保在重新启动后可以访问相同的信息。

> 我需要将它们存储在数据库中还是？我该如何存储它们？

那取决于你。

> 我在这里使用 Service 而不是 BroadcastReceiver，因为我听说 BR 应该只用于处理短的东西，并且将来我将不得不使用一些长的声音剪辑。

不要*直接*使用`Service`a `_WAKEUP`-style 警报，因为无法保证您`Service`将获得控制权。要么不使用`_WAKEUP`-style 警报，要么让警报触发 a `BroadcastReceiver`，它可以与 a 一起使用`WakeLock`以确保您`Service`获得控制权并可以完成其工作。

# objective-c - Obj-C 模式和对象内存占用

> ID：14490872
> 
> 赞同：0
> 
> 时间：2013-01-23T22:49:39.963
> 
> 标签：objective-c, cocoa, memory-management, nsview, nsobject

在这个特定的可可项目中，我有一组视图的属性，并且从 xml 文件中解析出相应的子视图。

一次只有一个视图处于活动状态，并且视图可能会经常更改。

最好是

A.) 使用解析的属性初始化视图对象，并将对它们的引用存储在一个数组中，以便在必要时使用。

b.) 使用解析的属性初始化一个 NSObject，然后通过工厂根据需要创建它的各自视图。

这背后的逻辑是，未使用的 NSView（大多数）可以在需要时由 ARC 释放，因为它们没有持久引用。

这引出了另一个问题。

当引用 NSView 但未显示时，所有这些是否都在后台完成（因为 NSView 是 NSObject 子类）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:48:39.190

您正在描述实现自己的 xibs 版本。我要说，“最好的”答案是重新考虑你的设计决定。可能有更好、更简单的方法来实现您想要的结果。

描述 NSView 的所有属性和子视图的 NSObject 数组与 NSView 数组之间的内存差异是名义上的。

最节省内存的方法是通过 NSWindowController 或 NSViewController 懒惰地反序列化单个视图。

# ruby-on-rails - 使用环境变量的 Rails 单元测试夹具抛出 MySQL 错误

> ID：14490873
> 
> 赞同：1
> 
> 时间：2013-01-23T22:49:47.833
> 
> 标签：ruby-on-rails, ruby, unit-testing, testing

以下面的测试夹具为例：

```
fixture_1:
  name: MyString
  username: <%= Rails.configuration.database_configuration['test']['username'] %> 
```

执行测试时抛出以下错误：

```
Mysql2::Error: Unknown column 'adapter' in 'field list': 
```

但是，我可以毫无问题地将夹具手动加载到数据库中。

使用 Rails 3.2.11 和 Ruby 1.9.2。

Rails错误还是我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:32:25.673

在执行测试之前尝试运行`rake db:test:prepare`- 似乎您稍后将该字段添加到开发数据库，​​但尚未添加到测试数据库。

# c++ - c++ temporary - "pure virtual method called"

> ID：14490877
> 
> 赞同：6
> 
> 时间：2013-01-23T22:50:08.810
> 
> 标签：c++, virtual-functions, temporary, pure-virtual

As I understand temporaries, the following code should work, but it doesn't.

```
struct base
{
    virtual~base() {}
    virtual void virt()const=0;
};
struct derived:public base
{
    virtual void virt()const {}
};

const base& foo() {return derived();}

int main()
{
    foo().virt();
    return 0;
} 
```

The call to virt() gives a "pure virtual function called" error. Why is that, and what should I do?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T22:53:13.423

You're returning a reference to a temporary which is destructed ~~when the function ends~~ at the end of the `return` statement and you get undefined behaviour.

You cannot return any kind of reference to a temporary and if you return a `base` by value you'll get slicing, so if you really want this to work, you should return a `std::unique_ptr<base>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T22:56:06.670

It seems like you're expecting the `const` reference to extend the lifetime of the temporary. There are certain situations where this doesn't occur. One of those situations is when returning a temporary:

> The second context [in which temporaries are destroyed at a different point than the end of the full-expression] is when a reference is bound to a temporary. The temporary to which the reference is bound or the temporary that is the complete object of a subobject to which the reference is bound persists for the lifetime of the reference except:
> 
> [...]
> 
> *   The lifetime of a temporary bound to the returned value in a function return statement (6.6.3) is not extended; the temporary is destroyed at the end of the full-expression in the return statement.

Since calling a member function of the object returned by `foo()` will necessitate an lvalue-to-rvalue conversion and the object is invalid (not derived from type `base`), you get undefined behaviour:

> If the object to which the glvalue refers is not an object of type `T` and is not an object of a type derived from `T`, or if the object is uninitialized, a program that necessitates this conversion has undefined behavior.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T22:54:29.153

I don't think you can return references to objects like that. The derived() instance goes out of scope as soon as foo() returns. Have

```
base *foo() { return new derived(); } 
```

and

```
foo()->virt(); 
```

should work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T22:56:45.213

There is no object during the call, the local object was deleted. There will be no vtable to look at. Try:

```
base& foo() { return *new derived(); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T22:57:11.593

Your temporary 'derived()' object is allocated on the stack. It might have something to do with the object up-casting.

> const base& foo() { derived *d = new derived(); return *d; }

Works just fine, for me.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T23:12:09.033

Change the problem piece to this:

```
class A {
public:
  const base &foo() { return d; }
private:
  derived d;
}; 
```

This way the lifetime of the derived object is as long as A's lifetime, and there will never be any problems.

# linq - 我应该使用 Linq 和 IQueryable 实现查询对象模式

> ID：14490878
> 
> 赞同：0
> 
> 时间：2013-01-23T22:50:19.673
> 
> 标签：linq, entity-framework, architecture, iqueryable

假设：在可预见的未来，该解决方案将始终是 MS、C#、.Net、SQL Server、Entity Framework 和 DAL、BLL 等不会传递给外部源，但可以在同一套件的不同应用程序中使用

A. 我应该使用 Linq 和 IQueryable 来实现 Query 对象模式而忘记处理存储库和/或 DAO 吗？

B. 如果有什么适合模式，我必须做什么/实施？还没有找到太多的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:50:10.693

我认为你错过了技术与模式之间的一些东西。Linq 是一种以非常有用的方式处理数据的低级技术。但这不是一种模式，与它没有任何联系。

另一方面，如果您想实现查询对象模式（这是一个很好的主意，如果您需要实现非常简单的数据查询功能，并且您可以使用倍数方式查询您的数据），您可以使用 Linq 或没有。这完全取决于你。并且 linq 本身无法帮助您实现查询对象。

此外，即使您决定在查询对象的帮助下实现数据访问层，这并不意味着您不需要使用服务或存储库模式。在大多数情况下，特别是如果您使用到达查询功能，您应该能够同时实现这两种功能，因为很难实现具有您需要的所有方法的服务或存储库。

但无论如何，对于复杂的项目，允许用户在你的 DAL 代码之外使用 IQueryable 会导致严重的问题。简短示例：您的一些数据更改，现在它包含 ID1 字段 insted ID 字段。如果您有单一的方法来查询您的数据，您只需在一个地方更改代码，但如果您只允许在任何地方使用 IQueryable，那么您需要找到所有使用 ID 的地方并将其替换为 ID1。

而且，如果您的查询功能很差，那么您最不需要查询对象或存储库等。活动记录模式就足够了。

# php - 仅在加载 wordpress 索引时才显示 div 的简单功能

> ID：14490880
> 
> 赞同：0
> 
> 时间：2013-01-23T22:50:21.193
> 
> 标签：php, javascript

我只是在学习 Wordpress 结构和 javascript/php，所以我希望有人能帮我解决这个问题。

我想要做的是显示一个我放在 header.php 中的 div，但只有当它是加载的 'index.php' 文件时。

不应该是这样的吗？

```
$(document).ready(){
    if.this(document == "http://sample.com/") {
        this.document.getElementById('only-show-when-index').style.display = "visible";
    } else {
        this.document.getElementById('only-show-when-index').style.display = "hidden";
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T22:58:33.807

您有一些语法错误，并且您不在“this”可以工作的上下文中：

```
if (window.location.href == 'http://sample.com/'){
     document.getElementById('only-show-when-index').style.display = "block";
}else{
      document.getElementById('only-show-when-index').style.display = "none";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T23:15:44.327

fred2 已经很好地解决了语法错误。但是，由于 jQuery 已经加载，您可以使用它来使事情变得更紧凑：

```
$(document).ready(){
    if ( window.location.href == "http://sample.com/" ) {
        $('#only-show-when-index').show();
    } else {
        $('#only-show-when-index').hide();
    }
}; 
```

我还想指出，由于您使用的是 WordPress，而且如果不刷新，这将永远不会改变，您可以在添加的代码周围使用一些 PHP 来完成同样的事情：

```
<?php if ( is_front_page() ): ?>
    <!-- shown only on front page -->
<?php else: ?>
    <!-- shown everywhere else -->
<?php endif; ?> 
```

这样您就不会依赖用户的浏览器来显示/隐藏您的代码。

# javascript - replaceChild 在加载替换图像时更改间距一秒钟

> ID：14490882
> 
> 赞同：0
> 
> 时间：2013-01-23T22:50:25.883
> 
> 标签：javascript, css

在此先感谢您的帮助。所以在我的网站上，我有 2 张图片在同一个 div 中彼此相邻。我正在使用 replaceChild 替换第一个图像。一切正常，但是当它删除第一个图像时，第二个图像会在新图像加载并放置在第一个图像点之前向左移动一瞬间。

你们对我如何使第二张图像保持在原位，而第一张图像消失然后被替换有什么想法吗？

编辑：找到了一种方法，我可以在[这里](http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript/)预加载页面，最终效果很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:56:32.440

这里有几个选项：

1.  使用 css 属性作为 position 将两个图像保持在它们的父级中（它们不相互依赖）
2.  将每个图像放在具有硬编码大小的 div 中
3.  硬编码图像的高度/宽度并替换 src 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:54:23.013

**HTML：**

```
<div>
<img id="image1" src="image1.png" alt="image1" />
<img id="image2" src="image2.png" alt="image2" />
</div> 
```

**CSS：**

```
div
{
   overflow:hidden;
   width:200px; 
}
#image1
{
   width:100px;
   height:100px;
   float:left;
}
#image2
{
   width:100px;
   height:100px;
   float:right;
} 
```

通过给**DIV**和**img**一个固定的宽度，并使用**float**，我认为第二个图像将保持原位，试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:55:22.113

也许这会有所帮助

1.  将新图像加载到隐藏位置。
2.  删除旧图像
3.  然后取消隐藏新图像并将其移动到位。

这只是减少了旧图像在新图像到位之前消失的时间。

# javascript - console.log 中的神秘 NaN。尝试一个简短的物理实验

> ID：14490885
> 
> 赞同：1
> 
> 时间：2013-01-23T22:50:54.290
> 
> 标签：javascript, html, syntax, gravity, particles

所以我已经确定了我认为是这里的问题。不过，我很难理解为什么 console.log(particles[index].x); 调用输出“NaN”。它应该是一个数字。那么，为什么不是呢？不知道为什么这是值得投票的，有人可以向我解释一下吗？

```
<html>
<head>
</head>
<body>
<canvas id='c'></canvas>
<script type="text/javascript">
var width = window.innerWidth,
height = window.innerHeight,
c = document.getElementById('c'),
ctx = c.getContext('2d');
c.width = width;
c.height = height;
var center = {x:width/2, y:height/2};

var particles = [];
var totalParticles = width/50;
var size = 20;

function init(){
    for (var i = 0; i < totalParticles; i++) {
        addParticle(i);
    }
    drawParticle(center.x, center.y, 20, particles[1].c);

    setInterval(update, 40);
}

function update(){

    for (var i = 0; i < particles.length; i++) {
        applyForce(i);
    }
}

function applyForce(index){

    console.log(particles[index].x);
    var rx = Math.abs(particles[index].x - center.x);
    var ry = Math.abs(particles[index].y - center.y);

    var sign = {x:1, y:1};
    if (particles[index].x > center.x) {
        sign.x = -sign.x;
    } else {
        sign.x = sign.x;
    }

    if (particles[index].y > center.y) {
        sign.y = -sign.y;
    } else {
        sign.y = sign.y;
    }   

    //just use size for mass, center has mass 1
    var force = {
        x:(sign.x*particles[index].s)/Math.pow(rx, 2),
        y:(sign.y*particles[index].s)/Math.pow(ry, 2)
    };

    addForce(index, force);

}

function addForce(index, force){

    particles[index].v.x += force.x;
    particles[index].v.y += force.y;

    particles[index].x = particles[index].x + particles[index].v.x;
    particles[index].y = particles[index].y + particles[index].v.y;

    drawParticle(particles[index].x, particles[index].y, particles[index].s, particles[index].c);

}

function drawParticle(x,y,size,color){

    ctx.beginPath();
    ctx.arc(x, y, size, 0, Math.PI*2, true);
    ctx.closePath();
    ctx.fillStyle=color;
    ctx.fill();
}

function addParticle(index){

        size = Math.random() * size + 10;
        var y = Math.random() * height;
        var x = width - 10;
        if (index%2) {
            x = 10;
            console.log("even");
        }

        particles.push({s:size, 
                        x:x, 
                        y:y, 
                        v:(Math.random() * 2) + 4, 
                        c:'#' + (Math.random() * 0x313131 + 0xaaaaaa | 0).toString(16)});

        return;

}

init();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:04:34.810

似乎`particles[index].v.x`总是`particles[index].v.y`如此`undefined`。因此，当您对这些`undefined`值求和时：

```
particles[index].x = particles[index].x + particles[index].v.x;
particles[index].y = particles[index].y + particles[index].v.y; 
```

`particles[index].x`也`particles[index].y`成为`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:19:07.887

您为 v 属性分配一个数字...

```
particles.push({s:size, 
                x:x, 
                y:y, 
                v:(Math.random() * 2) + 4, 
                c:'#' + (Math.random() * 0x313131 + 0xaaaaaa | 0).toString(16)}); 
```

稍后您可以像这样访问它...

```
 particles[index].v.x += force.x;
 particles[index].v.y += force.y; 
```

vx 和 vy 都未定义。

```
> 1 + undefined
Nan 
```

一个数字加上 undefined 不是一个数字。

# ruby-on-rails - 捆绑安装扩展？

> ID：14490887
> 
> 赞同：0
> 
> 时间：2013-01-23T22:51:06.523
> 
> 标签：ruby-on-rails

我知道捆绑安装有不止一个扩展，但具体是做什么的：

```
 bundle install --binstubs 
```

与正常相比

```
 bundle install 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:00:01.433

不确定在这种情况下扩展是什么意思，但不同之处在于它`bundle install --binstubs`创建了一个`./bin`目录，并在该目录中放置了指向 gem 安装的任何二进制文件的链接。例如，rspec gem 带有一个`rspec`二进制文件。为了确保在命令行中键入 RSpec 时运行正确版本的 RSpec，可以将项目特定`bin`目录放在 shell 的可执行搜索路径中。

Bundler 在这里试图解决的问题是您可以安装 gem 的多个版本（如 rspec），并且您的 shell 需要一种方法来找到正确的版本来执行。一种解决方案是使用`--binstubs`和更改您的 PATH 以在开头包含它（相对路径，这不是世界上最好的主意，或者绝对路径，您必须为每个项目配置）。

替代方法`--binstubs`是在所有 gem 命令前加上`bundle exec`(like `bundle exec rspec`)，以确保根据项目的 Gemfile 运行适当的版本，或者使用 RVM 和 gemsets。

这有点复杂，Bundler 文档在解释这一点时非常糟糕。

# sql - 如何在 Oracle SQL 中解析 XML 文件

> ID：14490888
> 
> 赞同：0
> 
> 时间：2013-01-23T22:51:05.957
> 
> 标签：sql, xml, json, oracle

我从以下网站下载了每日交换文件到数据库中。如何使用 oracle SQL 解析以下 XML 文档？

> “http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote;currency=true?view=basic&format=json”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T10:21:34.160

if you've really downloaded the XML version and not the JSON one, you can form the basic query like:

```
select /*+ cursor_sharing_exact */ id, classname, name, value
  from (select rownum id, classname, field_list
          from myxml mx cross join
               xmltable('/list/resources/resource'
                        passing xmltype(mx.mydoc)
                        columns classname  varchar2(100) path '@classname',
                        field_list xmltype path 'field'

                       )
       ) 
       cross join xmltable('/field'
                    passing field_list
                    columns
                    name varchar2(200) path '@name',
                    value varchar2(200) path '.'
                   ) 
```

this would give you output like:

```
SQL> select /*+ cursor_sharing_exact */ id, classname, name, value
  2    from (select rownum id, classname, field_list
  3            from myxml mx cross join
  4                 xmltable('/list/resources/resource'
  5                          passing xmltype(mx.mydoc)
  6                          columns classname  varchar2(100) path '@classname',
  7                          field_list xmltype path 'field'
  8                         )
  9         )
 10         cross join xmltable('/field'
 11                      passing field_list
 12                      columns
 13                      name varchar2(200) path '@name',
 14                      value varchar2(200) path '.'
 15                     )
 16  /

        ID CLASSNAME            NAME                 VALUE
---------- -------------------- -------------------- --------------------
         1 Quote                change               0.099976
         1 Quote                chg_percent          0.009367
         1 Quote                name                 USD/KRW
         1 Quote                price                1067.400024
         1 Quote                symbol               KRW=X
         1 Quote                ts                   1359020860
         1 Quote                type                 currency
         1 Quote                volume               0 
```

you could PIVOT that of course.

```
with data as (select /*+ cursor_sharing_exact */ id, classname, name, value
                from (select rownum id, classname, field_list
                        from myxml mx cross join
                             xmltable('/list/resources/resource'
                                      passing xmltype(mx.mydoc)
                                      columns classname  varchar2(100) path '@classname',
                                      field_list xmltype path 'field'
                                     )
                     ) 
                     cross join xmltable('/field'
                                  passing field_list
                                  columns
                                  name varchar2(200) path '@name',
                                  value varchar2(200) path '.'
                                 ) ) select id, classname,
       max(case when name = 'change' then value end) change,
       max(case when name = 'chg_percent' then value end) chg_percent,
       max(case when name = 'name' then value end) name,
       max(case when name = 'price' then value end) price,
       max(case when name = 'symbol' then value end) symbol,
       max(case when name = 'ts' then value end) ts,
       max(case when name = 'type' then value end) type,
       max(case when name = 'volume' then value end) volume   
 from data  
group by id, classname 
order by id 
```

a sample (shortened data): [http://sqlfiddle.com/#!4/7b53c/1](http://sqlfiddle.com/#!4/7b53c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:53:08.083

如果你想解析 JSON 文件，PL/JSON 库可以帮助你。 [PL/JSON 网站](http://pljson.sourceforge.net/)

# javascript - 将参数应用于函数

> ID：14490893
> 
> 赞同：0
> 
> 时间：2013-01-23T22:51:28.620
> 
> 标签：javascript, higher-order-functions, named-parameters

我想将表示为哈希的参数应用于函数。

例如，我想调用这个函数：

```
myFunc = function(a,b,c) { return b } 
```

以类似于此的方式：

```
myFunc({a:1, b:2, c:3}) 
```

有没有办法在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:55:17.297

通常，不可能将函数中的位置参数与对象中的键值对关联起来。

可以将函数配置为以两种方式获取参数：

```
myFunc = function (objOrA, b, c) {
    var a = objOrA;
    if (objOrA.a || objOrA.b || objOrA.c) {
        a = objOrA.a;
        b || (b = objOrA.b);
        c || (c = objOrA.c);
    }
    return b;
}; 
```

但是，如果您可以控制函数定义，最简单的解决方案就是无论如何都需要一个对象作为唯一参数。

```
myFunc = function (options) {
    return options.b;
} 
```

# windows - 为什么单击 ScrollViewer 内部时我的 TextBox 会获得焦点？

> ID：14490901
> 
> 赞同：5
> 
> 时间：2013-01-23T22:52:07.623
> 
> 标签：windows, xaml, windows-runtime

在我的 Windows Store 应用程序中，我创建了一个 ScrollViewer（里面有一个 Grid），里面有几个 TextBox。每当用户单击 ScrollViewer 中的任何位置时，都会聚焦第一个 TextBox。我不知道为什么会发生这种情况，这当然不是我想要的行为。

这只是 XAML 试图“提供帮助”的一个症状吗？我该如何预防？

**编辑**：我发现了一个线索。这只发生在我的文本框位于 ScrollViewer 内时。它也出现在 C++ 和 C# 项目中，因此它显然是 XAML/WinRT 的症状。添加示例 XAML：

使用以下 XAML，如果我聚焦第二个 TextBox，然后单击框之间边缘的任意位置，则第一个 TextBox 会自动聚焦。我不希望它被集中。

```
<ScrollViewer Background="#111111"
              VerticalScrollBarVisibility="Auto">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition />
      <RowDefinition />
      <RowDefinition />
    </Grid.RowDefinitions>

    <TextBox Grid.Row="0" />
    <TextBox Grid.Row="1" />
  </Grid>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T22:25:47.683

找到了解决方案！设置 ScrollViewer`TabStop="true"`可以防止这种行为。

# javascript - AngularJS、谷歌地图和 InfoWindows

> ID：14490908
> 
> 赞同：0
> 
> 时间：2013-01-23T22:52:41.370
> 
> 标签：javascript, google-maps-api-3, angularjs, google-maps-markers

当用户单击地图上的标记或用户单击位置列表中的位置时，我试图打开一个信息窗口。我遇到的问题是我收到 $apply 已经在进行中的错误。该应用程序仍然可以正常工作，但根据文档，如果我看到这个错误，我做错了什么。这是我正在处理的两段代码。

第一个函数将标记放置在地图上并响应单击标记单击事件。

```
var placeMarker = function(center) {
            var marker = new google.maps.Marker({
                map : map,
                position : new google.maps.LatLng(center.location.latitude, center.location.longitude)
            });

            var infoWindow = new google.maps.InfoWindow();

            marker.center = center;
            $scope.markers.push(marker);

            google.maps.event.addListener(marker, "click", function() {
                if ($scope.openInfoWindow) {
                    $scope.openInfoWindow.close();
                }

                $scope.center = marker.center;

                if (!$scope.compiled) {
                    var content = '<div id="infowindow_content" ng-include src="\'/infowindow.html\'"></div>';
                    $scope.compiled = $compile(content)($scope);
                }

                $scope.$apply();

                infoWindow.setContent($scope.compiled[0].innerHTML);
                infoWindow.open(map, marker);

                $scope.openInfoWindow = infoWindow;
            });
}; 
```

这里的第二个函数是接受来自应用程序中其他地方的事件并将谷歌地图点击事件发送到我想打开的标记。

```
$scope.$on("app:ResultListSelection", function(event, providerNumber) {
            for (var i = 0, length = $scope.markers.length; i < length; i += 1) {
                var center = $scope.markers[i].center;

                if (providerNumber === center.providerNo) {
                    google.maps.event.trigger($scope.markers[i], "click");
                    break;
                }
            }
        }); 
```

当我在标记上触发谷歌地图点击事件时，会发生 $apply 已在进行中的错误。

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:44:48.907

我知道可能有更好的方法来做到这一点，但我最终将 underscore.js 添加到我的项目中，并在传递数据的同时使用下划线编译模板。

```
var template = _.template($("#infoWindowTmpl").html()),
    compiled = template($scope);

var infoWindow = new google.maps.InfoWindow({
    content : compiled
}); 
```

# php - 在数组中包含文件

> ID：14490911
> 
> 赞同：2
> 
> 时间：2013-01-23T22:53:07.977
> 
> 标签：php, arrays, include

我有这个代码

```
$__routes = array(

"Home"                    => "index.php",
"Contact"                 => "contact.php",
"Register"                => "register.php",

); 
```

我有这样的example.php文件

```
"Support"                 => "support.php",
"Success"                 => "success.php",
"Act"                     => "activate.php", 
```

我想在“$__routes 数组”中包含 example.php 文件

有点像

```
$__routes = array(

"Home"                    => "index.php",
"Contact"                 => "contact.php",
"Register"                => "register.php",

include 'example.php';

); 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:00:16.530

不是不改变example.php。每个文件本身必须是有效的 PHP 代码，因为包含只发生在运行时（即到达该确切代码行时），而不是在解析时（即加载文件时）

完成您需要的一种方法是

**例子.php**

```
return array(
    "Support"                 => "support.php",
    "Success"                 => "success.php",
    "Act"                     => "activate.php"
); 
```

**主文件**

```
$__routes = array(
    "Home"                    => "index.php",
    "Contact"                 => "contact.php",
    "Register"                => "register.php"
) + (include 'example.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:59:49.240

如果我正确理解您的意图，您可以将一个文件包含到另一个文件中并合并数组：

```
$merged_aray = array_merge($__routes, $array2); 
```

其中`$array2`等于：

```
"Support"                 => "support.php",
"Success"                 => "success.php",
"Act"                     => "activate.php" 
```

# .net - MVVM 数据绑定

> ID：14490914
> 
> 赞同：6
> 
> 时间：2013-01-23T22:53:15.427
> 
> 标签：.net, wpf, user-interface, data-binding, mvvm

我有一个 ComboBox，其 DataContext 在应用程序启动时定义到适当的 ViewModel。我想从 XML 文件中获取项目，但让用户选择绑定到 ViewModel，最终绑定到模型。

XAML：

```
<ComboBox x:Name="cbConnection"
          ItemsSource="{Binding Source={StaticResource XmlConnectionList}, XPath=//ComboItem}"
          DisplayMemberPath="Key"
          SelectedValuePath="Value"
          SelectionChanged="{Binding Path=DataContext.cbConnection_SelectionChanged}"
          /> 
```

但我在运行时收到以下异常：

`{"Unable to cast object of type 'System.Reflection.RuntimeEventInfo' to type 'System.Reflection.MethodInfo'."}`

我们知道 ViewModel 被适当地设置为 View 窗口的 DataContext。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T22:57:49.100

您正在使用;

```
SelectionChanged="{Binding Path=DataContext.cbConnection_SelectionChanged}" 
```

这实际上是一个事件。

您应该将 ViewModel 中的公共属性（可能实现 INotifyPropertyChanged）绑定到**SelectedItem**属性，以管理选择中的更改。

假设您的窗口具有 DataContext，而不是组合框本身...

**SelectedItem 绑定版本：**

所以你的 XAML 会是这样的；

```
<ComboBox x:Name="cbConnection"
          ItemsSource="{Binding Source={StaticResource XmlConnectionList}, XPath=//ComboItem}"
          DisplayMemberPath="Key"
          SelectedValuePath="Value"
          SelectedItem="{Binding Path=DataContext.cbConnectionSelectedItem}"
/> 
```

在您的 ViewModel 中；

```
Private _cbConnectionSelectedItem As XmlElement

Public Property cbConnectionSelectedItem As XmlElement
     Get
         Return _cbConnectionSelectedItem
     End Get
     Set(value As XmlElement)
         If value.Equals(_cbConnectionSelectedItem) = False Then
             _cbConnectionSelectedItem = value
             OnPropertyChanged("cbConnectionSelectedItem")
            End If
     End Set
End Property 
```

**文字装订版本：**

当然，如果您只对他们选择的文本值感兴趣，理论上您可以将 ComboBox 文本属性绑定到 ViewModel 中的公共字符串属性；

您的 XAML 将是；

```
<ComboBox x:Name="cbConnection"
              ItemsSource="{Binding Source={StaticResource XmlConnectionList}, XPath=//ComboItem}"
              DisplayMemberPath="Key"
              SelectedValuePath="Value"
              Text="{Binding Path=DataContext.cbConnectionText}"
    /> 
```

还有你的 ViewModel；

```
Private _cbConnectionText As String

Public Property cbConnectionText As String
     Get
         Return _cbConnectionText
     End Get
     Set(value As String)
         If value.Equals(_cbConnectionText) = False Then
             _cbConnectionText = value
             OnPropertyChanged("cbConnectionText")
            End If
     End Set
End Property 
```

**SelectedValue 绑定版本：**

如果您正在显示键，但想要键/值对中的值，那么您应该绑定到 SelectedValue；

XAML；

```
<ComboBox x:Name="cbConnection" 
    ItemsSource="{Binding Source={StaticResource XmlConnectionList}, XPath=//ComboItem}"
    DisplayMemberPath="@Key" 
    SelectedValuePath="@Value" 
    SelectedValue="{Binding Path=DataContext.cbConnectionValue}" /> 
```

视图模型；

```
Private _cbConnectionValue As String

Public Property cbConnectionValue As String
     Get
         Return _cbConnectionValue
     End Get
     Set(value As String)
         If value.Equals(_cbConnectionText) = False Then
             _cbConnectionValue = value
             OnPropertyChanged("cbConnectionValue")
            End If
     End Set
End Property 
```

注意额外的 @ 符号。

正如我上面提到的，这假设您的 Window 在此处设置了 DataContext。如果不是，则从上面的绑定中删除“DataContext。”！

我假设您目前正在查看 ComboBox 中列出的项目？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T11:46:43.130

您必须为组合框选择更改事件使用事件触发器您应该尝试下面提到的代码

```
<ComboBox Margin="192,5,5,5" DisplayMemberPath="AttachmentName" ItemsSource="{Binding AttachementList, Mode=TwoWay}" Style="{StaticResource BasicComboBoxStyle}" BorderThickness="2" BorderBrush="DarkGray"
                          Name="cmb_AttchDetails" Width="287" Height="25" SelectedItem="{Binding Defaultrequiredattachment, Mode=TwoWay}">
                    <l:Interaction.Triggers>
                        <l:EventTrigger EventName="SelectionChanged">
                            <l:InvokeCommandAction Command="{Binding DataContext.AttachmentNameCommand,Mode=TwoWay,RelativeSource={RelativeSource AncestorType=controls:ChildWindow}}" CommandParameter="{Binding ElementName=cmb_AttchDetails,Path=SelectedItem}" />
                        </l:EventTrigger>
                    </l:Interaction.Triggers>
                </ComboBox> 
```

对于这些，您必须添加参考，例如

```
 xmlns:l="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

# ios - Google AdMob GADBannerView 第一个请求需要很长时间并冻结 UI

> ID：14490917
> 
> 赞同：7
> 
> 时间：2013-01-23T22:53:19.170
> 
> 标签：ios, admob, banner

我在我的应用程序中使用 Google AdMob SDK（最近下载的最新版本）。

当我的应用程序启动时，它会冻结 4-5 秒，直到广告加载并显示。之后就顺利运行了。当我注释掉横幅请求行时，应用程序正常启动。

我制作了一个自定义助手类，其中包含以下代码。

```
- (void) getGoogleBanner:(UIViewController *) targetController
{
    self.googleBannerView.rootViewController = targetController;
    [self.googleBannerView.rootViewController.view addSubview:self.googleBannerView];
    [self.googleBannerView setDelegate:self];
    GADRequest* request = [GADRequest request];
    [self.googleBannerView loadRequest:request];
} 
```

在哪里

*   googleBannerView 是我班级的一个属性，类型为 GADBannerView
*   我事先正确设置了框架尺寸和广告单元ID
*   targetController 是我要添加横幅的控制器
*   我在各种不同控制器的 viewDidAppear 中调用 [CustomClass getGoogleBanner:self] 方法并成功显示横幅，除了第一次加载问题。

我想知道是否有人遇到过这个问题，以及如何解决。我对任何可以消除冻结问题的想法持开放态度。我试图将代码运行到后台线程，但我失败了，因为我对它不是很有经验。

非常感谢任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T10:43:44.087

我只有在模拟器中运行时才会遇到这个问题，所以如果是这种情况，您可能不必担心。

据我所知，在调用`loadRequest`方法时，框架也会调用`canOpenURL:`方法（`UIApplication`）。从我运行的一些测试中（在模拟器和带有 5.1.1 和 6.1.3 的 iOS 设备上），`canOpenURL`偶尔会在模拟器上冻结几秒钟（一旦需要 20 秒才能返回），但在设备上运行良好。

# asp.net - 如何在 asp.net 中创建 2 列布局

> ID：14490920
> 
> 赞同：2
> 
> 时间：2013-01-23T22:53:51.180
> 
> 标签：asp.net

我正在尝试在我的页面中创建 2 列和 2 行布局，但我遇到了一些问题。我使用了一个表，其中创建了 2 列和 2 行，这看起来很简单，对吧？但我的问题是我在页面左侧构建了一个具有向下钻取功能的gridview，并且在页面右侧有一个图表。因此，当我尝试在 gridview 中使用向下钻取功能时；右侧的图表将向下移动，反之亦然。所以我想使用一个非常简单的布局，这样当我钻网格视图时，我不想影响页面右侧的任何内容。有人可以给我看一些布局示例，我可以有 2 列并且不会相互影响吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:42:47.560

首先，[不要使用表格进行布局](http://phrogz.net/css/WhyTablesAreBadForLayout.html)，这不是它们的设计目的。继续前进，这不是 ASP.net 问题，而是 HTML 页面设计问题之一。[谷歌“CSS 2 Column layout”](https://www.google.com.au/search?q=css%202%20column%20layout&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)，你会得到很多可供选择的教程。包括这个：

[http://css-tricks.com/super-simple-two-column-layout/](http://css-tricks.com/super-simple-two-column-layout/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T23:54:51.833

如果你想投资 Bootstrap，你可以像这样使用标记。

```
<div class="row">
   <div class="span6"> column 1 </div>
    <div class="span6"> column 2 </div>
</div> 
```

Twitter Bootstrap 使用网格系统很容易做到这一点，而且它们还提供了响应式样式表。

# c# - 如何将一个数据集中的列复制到另一个数据集中？

> ID：14490922
> 
> 赞同：3
> 
> 时间：2013-01-23T22:54:08.217
> 
> 标签：c#, asp.net, sql

这是一个相当有用的功能，它需要一些杂耍才能弄清楚如何使用而不会遇到关于已经属于数据集的列的错误。由于我看到很多关于这样做的问题，所以我想分享我想出的方法。

这是一个功能化版本，它只采用源数据集和接收者数据集，依次添加源中的每一列和值：

```
protected DataSet AddColumns(DataSet ds, DataSet dt)
{
  foreach (DataColumn dc in dt.Tables[0].Columns)
  {
    ds.Tables[0].Columns.Add(dc.ColumnName, dc.DataType);
    for (int i = 0; i < dt.Tables[0].Rows.Count; i++)
      ds.Tables[0].Rows[0][dc.ColumnName] = dt.Tables[0].Rows[0][dc.ColumnName]; 
  }
  return ds;
} 
```

希望这会对某人有所帮助——花了几个小时研究部分方法，这些方法并不能很好地将其组合成一些好的和模块化的东西。:)

# c# - ZedGraph 点标签重叠

> ID：14490928
> 
> 赞同：1
> 
> 时间：2013-01-23T22:54:38.387
> 
> 标签：c#, charts, zedgraph, linechart

我有包含多个系列数据的折线图。系列中的点彼此之间几乎没有接近，因此由于这个原因，标签彼此重叠。是否有任何支持库可以自己处理点标签。

或者是否有任何智能逻辑可以识别最近的点并相应地设置标签的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:48:05.937

也许尝试将`IsPreventLabelOverlap`属性设置为 true。不幸的是，这通常只会删除重叠的标签，而不是简单地将它们展开。因此，考虑到这一点，请参见下文。

没有一个库可以满足您的要求，但是可以`postpaint`选择。不幸的是，Zedgraph 没有修复重叠的标签（我尝试了很长时间但没有运气）。然而，有一种解决方法，但它很乏味，你必须真正考虑在哪里放置图形标签。请参阅下面的代码，了解添加标签的简单方法：

```
protected void Chart1_PostPaint(object sender, ChartPaintEventArgs e)
{
  if (e.ChartElement is Chart)
{
// create text to draw
String TextToDraw;
TextToDraw = "Chart Label"

// get graphics tools
Graphics g = e.ChartGraphics.Graphics;
Font DrawFont = System.Drawing.SystemFonts.CaptionFont;
Brush DrawBrush = Brushes.Black;

// see how big the text will be
int TxtWidth = (int)g.MeasureString(TextToDraw, DrawFont).Width;
int TxtHeight = (int)g.MeasureString(TextToDraw, DrawFont).Height;

// where to draw
int x = 5;  // a few pixels from the left border

int y = (int)e.Chart.Height.Value;
y = y - TxtHeight - 5; // a few pixels off the bottom

// draw the string        
g.DrawString(TextToDraw, DrawFont, DrawBrush, x, y);
} 
```

这将为您创建一个标签，您可以选择在哪里绘制它。然而，这是棘手的部分。您基本上需要找出图形在屏幕上的位置以及该点在该图形上的位置。非常麻烦，但如果它是静态图，那么它应该不是问题。我知道，这是一种 hack，但它确实有效，而且似乎是所有人都想出的。

# asp.net-mvc - 在 ASP.NET 中使用 Razor 嵌套表时遇到问题 / 示例如下说明

> ID：14490930
> 
> 赞同：0
> 
> 时间：2013-01-23T22:54:42.117
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, razor-2

对于一个有多个时间段的会议站点，我有一个简单的关系，并且我想在每个时间段中显示多个会话。

下面的代码可以正常工作，但是我不得不在外部代码块中使用 @Html.Raw("..") 。如果我只是尝试将原始 html （如**ABCD**放在第一个 @Html.Raw("") 的正上方），我会收到编译器错误。我对 razor 还是很陌生，只是不明白如何让我的生活更简单在嵌套的 foreach 中有真正的 html 代码，而不必将所有内容都包装在辅助方法中。

谢谢。

```
 @Html.Raw("<table id='myTable' border='1'>")

    @foreach (var sessionTime in Model.SessionsByTime)
    { 
        @Html.Raw("<tr>")
        @Html.Raw("<td>")
        @sessionTime.StartTimeFriendly
        @Html.Raw("</td>")
        @Html.Raw("<td></td>")
        @Html.Raw("</tr>")

        @Html.Raw("<table>")
            foreach (var session in sessionTime.sessionsResults)
            {
            <tr>
                <td width="300"></td>
                <td width="300">@session.Title</td>
            </tr>
            }
        @Html.Raw("</table>")
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:07:11.820

这应该看起来像这样

```
<table id='myTable' border='1'>
@foreach (var sessionTime in Model.SessionsByTime)
{ 
    <tr>
      <td>@sessionTime.StartTimeFriendly</td>
      <td></td>
    </tr>
    <table>
        @foreach (var session in sessionTime.sessionsResults)
        {
        <tr>
            <td width="300"></td>
            <td width="300">@session.Title</td>
        </tr>
        }
    </table>
}
</table> 
```

如果您需要显示一些未包含在 html 标记中的文本，您需要使用`@:`：

```
@foreach(var s in list) {
    @: hello there @s
    <text>this also work instead of @: and is usuful
    when you need more than one line
    </text>
} 
```

如果您在代码块内而不是在 html 标记内，Razor 将假定您只是在编写代码，这就是为什么需要`@:`或`<text>`需要

# watir-webdriver - 某些列表项不可见

> ID：14490940
> 
> 赞同：1
> 
> 时间：2013-01-23T22:55:30.600
> 
> 标签：watir-webdriver

我可以使用以下方法在列表中找到 2 个项目：

`br.span(:text, "Customer").click`

但是其他人给了我一个`Selenium::WebDriver::Error::ElementNotVisibleError`。列表中的某些项目我可以选择而某些 Watir 可以看到，这似乎有点奇怪。下面是html。我可以选择 Telecom Profile 但不能选择 Opportunity。关于为什么可以看到一个但看不到另一个的任何想法？

```
<TD style="PADDING-BOTTOM: 3px; PADDING-LEFT: 2px; PADDING-RIGHT: 2px; PADDING-TOP: 3px" id=apy0m1i2ITD vAlign=center width="100%" noWrap align=left>
  <SPAN style="MARGIN: 0px 13px">Opportunity</SPAN>
</TD>
</TR></TBODY></TABLE></TD></TR>

<TD style="PADDING-BOTTOM: 3px; PADDING-LEFT: 2px; PADDING-RIGHT: 2px; PADDING-TOP: 3px" id=apy0m1i3ITD vAlign=center width="100%" noWrap align=left>
  <SPAN style="MARGIN: 0px 13px">Telecom Profile</SPAN>
</TD>
</TR></TBODY></TABLE></TD></TR> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:22:36.240

如果元素不可见，WebDriver 无法单击它。

在元素变得可见之前页面是否发生变化？如果是这样，试试这个：

```
br.wait_until { br.span(:text => 'Customer').visible? }
br.span(:text, "Customer").click 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:34:03.927

首先，您说“从列表中选择”，但您显示的 HTML 中没有 HTML 选择元素，只有表格和行。所以这让我觉得你的“列表”控件是某种 javascript 动画小部件，来自 jQuery 或类似的库。

很多这些工作的方式是他们构建看起来像下拉菜单的东西，然后设置类使得这些东西不可见。当您对下拉列表顶部执行某些操作（例如单击或鼠标悬停）时，它会将类更改为由 CSS 呈现可见的类。他们经常使用一种叫做伪类的东西，它是由鼠标悬停在项目上触发的，所以一旦显示菜单，只要鼠标悬停在它上面，它就会一直显示。

自动化这些可能特别棘手，因为 webdriver 不会移动实际的鼠标指针来创建鼠标悬停或悬停事件。所以你可以做一些事情来显示一个菜单，比如点击菜单的顶部，但是很快浏览器就可以检测到鼠标没有在这个东西上，然后砰，它又被隐藏了。

按照设计，几乎任何使用 webdriver 驱动浏览器（watir-webdriver、Selenium、Capybara）的东西都不会点击或与从用户角度来看不“存在”的元素（即可见和启用）进行交互. 通常这很好，如果用户无法点击它，那么自动化工具为什么要点击它呢？这可能是“不可见”消息的来源，即 webdriver 说“嘿，我可以在 DOM 中找到这个东西，但它对用户不可见，所以你不能点击它。

我通常从 IRB 对此类页面进行故障排除，在我认为会使菜单出现的 watir-webdriver 命令中触发，然后是单击元素的命令。如果你能让它工作，那么它很可能会以脚本速度工作.

有时你需要使用 'when present' 装饰器，例如，如果某些东西会因为较早的操作而变得可见或形成，并且你不想过早地尝试与之交互。

```
browser.span(:text => "Customer").when_present.click 
```

这比@TrinitronX 的建议优雅一点，但基本上是一样的

但是，如果问题是元素在正在执行的一行代码和下一行代码之间出现和消失，那么这种方法对您没有帮助，例如，如果它消失得太快。

在这种情况下，您可能不得不求助于执行一些 javascript 来更改元素的样式以强制它可见。或者您可以尝试在元素上手动触发 onclick 事件，看看是否会导致 javascript 像您单击它一样响应。

如果没有看到站点本身，或者对其具有相同控件的示例站点，有时很难知道操作元素的最佳解决方案是什么

# uml - 如何判断 UML 图中哪个是超类

> ID：14490942
> 
> 赞同：2
> 
> 时间：2013-01-23T22:55:35.197
> 
> 标签：uml

[http://i.stack.imgur.com/SbDlZ.jpg](http://i.stack.imgur.com/SbDlZ.jpg)

任何人都可以帮助我找出哪个是超级类。我认为从那张图片来看应该是 CChatWnd，因为它有许多指向其他子类的箭头，但它也有指向 CprivateChatWnd 的箭头。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:23:20.877

CChatWnd 是 CPrivateChatWnd 的超类，CPanelWnd 是 CChatWnd 的超类。

请注意，您的图表中有两种类型的箭头：我提到的类之间的那些是概括，而其他的是有向关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:05:43.337

为了快速了解 UML 类图的基础知识，我发现这个[链接](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/)很有用。对于您当前的问题，关于继承的部分可能特别感兴趣。

# textures - 复杂网格表面上的动态流体（与重力实时相互作用）

> ID：14490946
> 
> 赞同：1
> 
> 时间：2013-01-23T22:55:53.127
> 
> 标签：textures, shader, mesh

我的问题简单来说是这样的：详细来说，沿着人物表面流的血是怎么做的？它从 0:34 开始在[此视频中显示。](http://www.youtube.com/watch?v=9Xrmgsz76Yc)

好的，现在关于我所调查的内容的更多细节（我已经尝试实现这种效果几个星期了，但没有成功）：我尝试了一种蛮力方法，我得到了三角形（字符网格三角形) 与平面相交并计算每个三角形的线方程以绘制一条线（用于斜线）。然而，为了从表面上滴下来，我尝试创建一个三角形映射，该映射包含三角形的索引，这些三角形通过边缘连接到每个三角形。然后我沿着重力方向沿着每个三角形的表面做了线。这需要大量的处理器能力，并且通常会产生不良影响。当试图增加滴水的厚度时，它会产生很多额外的问题，因此根本不起作用。

我研究了八叉树纹理及其在模拟流过表面的液体中的用途，但是我不确定如何实现这一点，据我所知，这不适用于重力。

我目前正在研究 Cg 着色器，并认为这就是解决方案所在。我发现同一团队（Wolfire）的另一个视频暗示使用着色器来制作[此处](http://www.youtube.com/watch?v=z1IsxDQ5cPg)显示的血液效果。我一直在寻找着色器示例，这些示例可能会给我一个线索来了解它是如何完成的，但到目前为止我还没有运气。

我正在使用语言 C# 和 Cg 进行着色器。如果有人想提供任何代码来帮助解释等，那么任何语言都可以，我会尝试转换:-)

感谢任何帮助我的人，因为就像我在这篇文章前面所说的那样，我花了相当多的时间试图解决这个问题，但我的大脑开始受伤了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:15:00.020

这更像是一种着色器技巧，而不是平滑粒子流体动力学等动态流体。

首先，上面的视频是由一位非常优秀的图形程序员 (IMO) 创建的。请注意，获得相同或相似的效果并非易事。

他说他存储了一个独特的“血液纹理”，它存储了每个纹素的血液量。

添加伤害时，您会增加伤口位置的血量（到血图）。

给定几个标准，每一帧都会更新血图：

*   对于每个纹素 - > 如果上面的纹素中有很多血...增加当前纹素的血量。

*   您需要通过检查着色器中的世界坐标来确定“上方”是什么

*   如果要匹配视频，还必须检查垂直间隙。滴水。

*   将所有纹素的总血量减少到一定的最小值（以使系统随着时间的推移而减慢）

当滴血碰到“水平表面”时会发生什么？看起来他在水平表面上添加了一个贴花，每次“滴”都会增加。

祝你好运

编辑：这是我刚刚制作的滑动血液的糟糕（1 小时开发时间）示例......它在 GLSL 中......你需要一个像样的显卡和一个兼容 webGL 的浏览器才能查看它。 [http://glsl.heroku.com/e#6237.48](http://glsl.heroku.com/e#6237.48)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T20:24:22.737

这太晚了，但我会把它留给后代。Wolfire 血液飞溅效果似乎是 nVidia Gravity Maps 样本的（非常）升级版。样本可以在这里找到：

[http://developer.download.nvidia.com/SDK/9.5/Samples/samples.html#HLSL_BloodShader](http://developer.download.nvidia.com/SDK/9.5/Samples/samples.html#HLSL_BloodShader)

这里还有 GDC 演示文稿中的幻灯片：

[ftp://download.nvidia.com/developer/presentations/GDC_2004/gdc2004_BloodShader.pdf](ftp://download.nvidia.com/developer/presentations/GDC_2004/gdc2004_BloodShader.pdf)

# iphone - 尝试在 iOS 设备上运行应用程序时出现 Xcode 配置文件问题

> ID：14490947
> 
> 赞同：0
> 
> 时间：2013-01-23T22:55:58.163
> 
> 标签：iphone, ios, xcode, cs193p

我正在关注 iTunes U 上优秀的斯坦福 CS193P 课程（2011 年秋季）：http:
[//www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)

我正在尝试在带有 iOS 4.3.3 的 iPhone 3GS 上从带有 iOS 5 的 Xcode 4.2 运行我的应用程序（计算器）

我遵循了这些说明： http:
[//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Developing%20on%20Devices.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Developing%20on%20Devices.pdf)

我能够毫无问题地获得我的开发人员证书。

我去了 iOS 开发中心并创建了一个配置文件。我在表单字段中输入了这个：

*   个人资料名称：我输入了“计算器”（有关系吗？）
*   证书：我选择了我的名字（唯一的选择，因为我只创建了一个开发者证书）
*   应用 ID：我选择了“计算器”（唯一的选项，因为我只创建了一个应用 ID）
*   设备：我选择了我的设备（唯一的选项，因为我只创建了一个设备）

我很确定我为我的证书和我的设备做了正确的事情。

对于 App Id，我有点困惑。

*   描述：我输入了“计算器”（再次，这有关系吗？）
*   Bundle Seed Id (App ID Prefix): 显示“Your Team Id xxxxxxx will be used as you App Id Prefix”（我无法更改）
*   Bundle Identifier（App ID 后缀）：我输入了“com.myname.calculator”

应该为一个应用程序（为我制作的每个应用程序创建一个新的应用程序）还是为一个开发人员（为我制作的所有应用程序只创建一个）创建一个配置文件？

当我最终完成我的配置文件时，我将它导入到 Organizer（在 Xcode 中）并插入我的 iPhone 并单击“用于开发”。我以为我已经完成了！

但是，当我尝试使用连接的设备在 Xcode 中运行我的应用程序时，我收到以下错误消息：

> 没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

是因为我的配置文件有问题吗？我四处搜索，我在 Code Signing Identity 和 .plist 中的设置似乎没问题。

还是因为我的 iPhone 有 iOS 4.3.3 而我正在尝试使用 iOS 5.0 进行开发？这是我认为可能是问题的第一件事，所以我说，让我们升级到 5.0。但是，似乎我只能将我的 iPhone 升级到 iOS 6.01，我不想导致 iTunes U 课程针对的是 iOS 5.0，而且我知道有些东西肯定行不通。有没有办法只将我的 iPhone 升级到 iOS 5.0？

现在我正试图找出问题实际上出在哪里......我的配置文件或我的 iPhone 设备？

# 编辑＃1：

我从头开始使用一个全新的应用程序（我创建了一个单视图应用程序，在视图中添加了标签“Hello World！”......仅此而已）。然后，我按照以下方法从头开始创建了另一个配置文件：http:
[//mobile.tutsplus.com/tutorials/iphone/iphone-sdk-install-apps-on-iphone-devices-for-development/](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-install-apps-on-iphone-devices-for-development/)

我仍然有同样的错误信息。

然后我进入新项目的构建设置，将 iOS 部署目标从 iOS 5.0 更改为 iOS 4.3……然后我的应用程序在我的设备上启动了！但是，应用程序没有显示我的“Hello World！” 标签。

所以看起来我在做正确的事情......但我的设备 iOS 太旧了。我想将它升级到 iOS 5.0 但不是 iOS 6.01... 可以吗？

# 编辑＃2：

我将我的 iPhone 3GS 升级到 iOS 6.01，当我点击 Organizer 中的“用于开发”按钮时，我收到了以下错误消息：

> “我的 iPhone”上的 iOS 版本不匹配任何支持使用此 iOS SDK 安装进行开发的 iOS 版本。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。
> 
> 安装在 Gaston Vachon 的 iPhone
> 6.0.1 (10A523)上的操作系统
> 
> Xcode 支持的 iOS 版本 最新
> 5.0 (9A334)
> 4.3
> 4.2 (8C134)
> 4.2

现在我必须将我的 Xcode 升级到最新版本（4.5.2），但我不能，因为我使用的是 Snow Leopard。所以我必须将我的 Mac OS 升级到 Lion 或 Mountain Lion，然后将 Xcode 升级到 4.5.2 (iOS 6.01)，然后它可能会工作。但是，由于我正在学习使用 Xcode 4.2 和 iOS 5.0 完成的 iTunes U 课程，我宁愿等到完成本课程后再进行这些升级。

我想我赢不了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:25:45.287

您还需要配置您的设备。这样做的目的是将您的设备添加到您的应用程序在开发时可以实际运行的设备列表中。

这是有关如何配置设备的 Apple 教程。

[http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/provision_device_for_development-generic.html](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/provision_device_for_development-generic.html)

*至于你的其他问题：*

*   个人资料名称：无所谓，仅供参考。
*   说明：也仅供参考
*   捆绑标识符：必须与您应用中的捆绑 id 匹配，您还应该将“myname”替换为您自己的名称。它适用于您拥有的网站域。例如，我的网站是[http://bentrengrove.com](http://bentrengrove.com)，所以我的捆绑标识符之一是`com.bentrengrove.WeightApp`.
*   创建不同的配置文件：您的所有应用程序只需要一个通用开发配置文件。您可以将捆绑标识符与通配符一起使用。阅读Apple 提供的有关何时创建个人配置文件和通用配置文件的说明[。](http://developer.apple.com/library/ios/#qa/qa1713/_index.html)

几乎所有 iOS5 代码都适用于 iOS6，您应该始终使用最新的 SDK 进行开发。您仍然可以部署到运行旧 iOS 版本的设备上，您只需要确保您没有使用仅限 iOS6 的功能。

# ios - NSFetchedResultsController 部分

> ID：14490952
> 
> 赞同：0
> 
> 时间：2013-01-23T22:56:17.143
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我设置了一个 NSFetchedResultsController 如下：

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.contactsDatabase.managedObjectContext sectionNameKeyPath:@"nameInitial" cacheName:nil]; 
```

第一次运行我的应用程序时，会调用下面的 NSFetchedResultsController 委托。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog([[self.fetchedResultsController fetchedObjects] description]);

    NSLog([NSString stringWithFormat:@"Number of Sections = %i", [[self.fetchedResultsController sections] count]]);

    return [[self.fetchedResultsController sections] count];
} 
```

获取请求似乎工作正常，因为我得到了数组描述的完整 NSLog。

但是该方法返回的部分数 = 0，所以我得到一个空白表视图。

当我关闭应用程序，然后再次运行它时，它可以正常工作。

有任何想法吗？

# python - 在 Python 中设计具有大量参数的 API 客户端

> ID：14490954
> 
> 赞同：0
> 
> 时间：2013-01-23T22:56:29.167
> 
> 标签：python, oop, rest, design-patterns

我正在用 Python 为流行的 RESTful API 构建客户端，并且试图找出为具有许多可选值的端点构建方法的最佳方法。

让我解释。

首先，我有一个方法可以将命名参数转换为适当的 json 表示。

```
def map_kwargs_to_payload(self, **kwargs):
    payload = {}
    for key in kwargs:
        payload[key] = kwargs[key]

    return payload 
```

这使我可以创建如下所示的函数签名：

```
def some_rest_method(**kwargs):
    payload = map_kwargs_to_payload(**kwargs)
    self.transmit('PUT', '/endpoint', payload) 
```

这很好用——当用户有很多选项可以传递给该方法时，它使我不必做类似下面的事情。

```
def some_rest_method(setting_1=None, setting_2=None, setting_3=None, etc...): 
```

但是它失败的地方是当请求主体想要像下面这样的东西时，端点有几个可选的主体参数：

```
{
  "setting_1" : foo,
  "setting_2" : foo,
  "setting_3" : [{
               "IsEnabled" : 1,
               "Type" : x
         }, {
               "IsEnabled" : 1,
               "Type" : x
         }
  ]
} 
```

我的映射器不支持上述请求所需的嵌套数组。

那么我应该如何解决这个问题呢？我应该让用户传入身体的字典表示吗？有没有其他更好的方法来保持我的方法签名的合理长度，同时为最终用户做尽可能多的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:17:51.107

恕我直言，这里的问题是您实际上并没有使用这些 API 概念对对象进行建模，因此您不能将责任委托给它们。当我遇到这种情况时，我创建了两个模型：API 的低级 OO 表示和我的域的高级 OO 模型。通过这种方式，应用程序中的所有概念都被表示（API 和域），因此我可以在我认为合适的时候委托给它们。这里有几个类似的问题，我在其中详细解释了这一点：

[将远程数据与本地对象映射/解耦](https://stackoverflow.com/questions/14311654/mapping-decoupling-remote-data-with-local-objects/14322486)

[最适合从服务器发出各种请求的应用程序的设计模式](https://stackoverflow.com/questions/13878329/most-suitable-design-pattern-for-an-app-that-makes-various-requests-from-a-serve/13878512)

高温高压

# jquery - 在 jQuery 1.9 删除 .toggle(function,function) 后有什么替代方法？

> ID：14490957
> 
> 赞同：19
> 
> 时间：2013-01-23T22:56:33.727
> 
> 标签：jquery, css, animation, toggle

嗨，我正在尝试创建在每次点击时会交替缩小和增长的东西，但我正在`jQuery 1.9`用于我的网站。该`.toggle(function,function)`功能已从 中删除`jQuery 1.9`，因此我不确定应该改用什么。

任何帮助都会很棒。

谢谢

jsfiddle（使用旧代码，jquery 1.8 版本）：http: [//jsfiddle.net/TNAC6/](http://jsfiddle.net/TNAC6/)

新的 jsfiddle (jquery 1.9): [http://jsfiddle.net/TNAC6/1/](http://jsfiddle.net/TNAC6/1/)

这是我正在尝试切换的代码。基本上我要切换的是一个圆形 div。

```
(function($){
    $.fn.createToggle = function(size) {
        var ele = $(this);
        var oldSize = ele.width();
        console.log("creating new toggle on element: " + ele + " old: " + oldSize + " new: " + size );
        console.log("its content is" + ele.children(".content"));
        var growfn = function() {
            $(this).stop().animate({
                'width': size+'px',
                'height': size+'px',
                'margin-left': '-'+(size/2)+'px',
                'margin-top': '-'+(size/2)+'px'
            }, 500);
            $(this).children(".content").toggle();
        };
        var shrinkfn = function() {
            $(this).stop().animate({
                'width': oldSize+'px',
                'height': oldSize+'px',
                'margin-left': '-'+(oldSize/2)+'px',
                'margin-top': '-'+(oldSize/2)+'px'
            }, 500);
            $(this).children(".content").toggle();
        };
        ele.click(function() {
//insert code to toggle stuff
        });
    };
})(jQuery);

$(".home").createToggle(500); 
```

和CSS：

```
.circleBase {
    -webkit-border-radius: 999px;
    -moz-border-radius: 999px;
    border-radius: 999px;
    behavior: url(PIE.htc);
}

.home {
    width: 200px;
    height: 200px;
    background: #FF5032;
    position: absolute;
    top: 300px;
    left: 300px;
    margin-left: -100px;
    margin-top: -100px;
}

.title {
    position: relative;
    padding-top: 10%;
    text-align: center;
    font-weight: bold;
    font-size: 24px;
}

.content {
    text-align: center;
    display: none;
} 
```

和html：

```
<div class="circleBase home">
    <p class="title">Glen Takahashi<p>
    <p class="content">THIS IS CONTENT<BR> THIS IS CONTENT<BR> THIS IS CONTENT<BR> THIS IS CONTENT<BR> THIS IS CONTENT</p>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T01:15:48.037

使用两种状态，您可以将当前切换状态保持为布尔值（我使用过`clickState`）。如果您想拥有多个状态，您可以继续将状态计数加 1，然后检查总计数的模数以确定应根据状态触发哪个函数。

我稍微更新了您的代码，因为`ele`实际上是您要使用的 jQuery 对象：

[http://jsfiddle.net/TNAC6/2/](http://jsfiddle.net/TNAC6/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T19:21:00.350

```
$(document).ready(function() {
    var flag=0;
    $('selector').on('click', function(){
        var menu = $("element_to_toggle");
        if(flag==0){
            menu.text("click one");
            flag=1;
            return;
        }
        else if(flag==1){
            menu.text("click two");
            flag=0;
            return;
        }
    });
}); 
```

# matlab - matlab将位打包成字节数组

> ID：14490958
> 
> 赞同：1
> 
> 时间：2013-01-23T22:56:43.360
> 
> 标签：matlab, bitarray

在Matlab 中，我试图将任意位长度的无符号整数（例如，3 位整数数组）打包成一个uint8 数组。鉴于[此处](https://stackoverflow.com/questions/1552966/converting-binary-to-decimal-without-using-loop/1554876#1554876)的提示，我可以生成适用于“小型”数组（例如 10,000 个元素）的代码，但它会占用大型数组（例如 1600 万个元素）的所有内存。我使用的代码如下，借鉴了以前的帖子：

```
function x_bytes = stuff_bits(x, n)
    r = dec2bin(x,n);                 % bitstring for each uint in x
    s = reshape(r',[],1);             % one continuous string of bits
    t = reshape(str2num(s),8,[])';    % array of 8-bit numbers (stuffed)
    u = t*(2.^(size(t,2)-1:-1:0))';   % array of bytes representing all the bits stuffed together
    x_bytes = uint8(u);              % should be compressed byte stream
end 
```

我意识到我正在使用一个 uint，将其转换为字符串，然后将其转换回位；我还读到 dec2bin 效率不是很高。

当我用 1600 万个元素（在具有 8 GB 内存的 64 位 Windows 机器上）尝试这个时，所有内存都被消耗掉了。废话。所以我循环遍历小节，完成 1600 万个元素大约需要 10 分钟。所以，有些东西是非常低效的。

有人有更好的方法来生成像 python 的 BitArray 这样的位字符串吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:59:52.737

它似乎与[这个](https://stackoverflow.com/questions/3953936/how-can-i-efficiently-convert-a-large-decimal-array-into-a-binary-array-in-matla)和[这个相似](https://stackoverflow.com/questions/1544456/faster-version-of-dec2bin-function-for-converting-many-elements)

在第一个中，建议在 for 循环中使用 dec2bitvec。这对你来说可能已经足够了（虽然很慢）。

第二个建议使用 bitget 创建一个查找表，然后使用它（而不是使用 dec2bit 或 dec2bitvec）

您可以尝试使用“中间”的东西。

```
B = 3; % Number of bits per int.
A = randi(7, 16000000, 1); % 16M random elements between 1 and 7 (3bits).

tic
% get each group of bits in a column of K.
K = cell2mat(arrayfun(@(bit)bitget(A, B+1-bit), 1:B, 'UniformOutput', 0))';
% reshape to have them in 8 packs
K = reshape(K, [8, numel(K)/8])';
% get the uint8 vec.
U = K*(2.^(size(K,2)-1:-1:0))';
toc 
```

我的时间是 3.5 秒。（Win8 64 位，i5 4GB 内存）

此代码不是创建查找表，而是创建一个矩阵 (K)，其中包含每个整数的位值（存储在列中），对其进行整形（以创建 8bin 值），然后使用与之前使用相同的数学来创建 uint8向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T19:11:56.420

这是我为将位矩阵转换为 n 位长数字而创建的代码：

```
function [ uD10 ] = bits_to_n_bit_integers( A, n)
%bits_to_n_bit_integersTurns vector matrix of bits in A into a vector matrix of 
%n bits long numbers. 
%B is 1 for a bit matrix
%   Detailed explanation goes here

B = 1;
% get each group of bits in a column of K.
K = cell2mat(arrayfun(@(bit)bitget(A, B+1-bit), 1:B, 'UniformOutput', 0))';
%make sure there is multiple of B
K = K(:);
while ~(mod(numel(K),n) == 0)
    K = [0;K];
end
K = K(:);
% reshape to have them in 8 packs
K = reshape(K, [n, numel(K)/n])';
% get the uint8 vec.
UD = K*(2.^(size(K,2)-1:-1:0))';

uD10=bi2de(K);

end 
```

:)

# java - 读取 jar 外的配置文件

> ID：14490960
> 
> 赞同：3
> 
> 时间：2013-01-23T22:56:46.900
> 
> 标签：java, maven, configuration, input, jar

我正在尝试创建 jar，我可以在其中读取 jar 文件之外的配置文件。最好从jar文件所在的目录。我的目录结构如下：

```
/src/main/resources/config 
```

我有一个运行 mvn install 来创建 jar 文件的 Maven 项目。

```
<plugin>
            <!-- Build an executable JAR -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.expedia.e3.qm.perforce.audit.Main</mainClass>
                    </manifest>
                    <manifestEntries>
                        <Class-Path>config/config.xml</Class-Path>
                    </manifestEntries>
                </archive>
                <excludes>
                    <exclude>**/config/</exclude>
                </excludes>
            </configuration>
        </plugin> 
```

现在我手动将我的配置文件夹从 /target/classes/config 移动到 /target/config 我已经研究了 maven 程序集插件但是我已经尝试了它的所有不同配置，但我无法让它只输出到 / target/config 它总是输出 /target/audit-1.0/config 其中 audit-1.0 是我的 Maven 项目名称。

我正在使用 Intellij IDEA 来调试我的程序并构建/安装 maven 项目。

在代码中，我试图通过

```
InputStream stream = Class.class.getResourceAsStream("/config/config.xml"); 
```

当我在 IDE 中运行它时，它可以工作，但是当我从命令行运行它时：

```
java -jar ./audit-1.0.jar 
```

尝试访问“inputStream”后抛出错误：

```
Exception in thread "main" java.lang.NullPointerException 
```

我知道“/config/config.xml”应该指向“/target/audit-1.0.jar!/config/config.xml”。但是，我希望它指向“/target/config/config.xml”

有任何想法吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:15:13.873

```
File base = new File(<Current class name here>.class.getProtectionDomain().getCodeSource().getLocation().toURI()).getParentFile();
File configFile= new File(base,"config.xml"); 
```

# javascript - 在没有画布的情况下用 html/javascript 制作棋盘？

> ID：14490962
> 
> 赞同：0
> 
> 时间：2013-01-23T22:57:00.140
> 
> 标签：javascript, canvas

我一直在尝试在不使用画布的情况下创建棋盘图案。问题是，我需要一个 100 像素 x 100 像素的正方形，其中每个像素在绿色 [rgb(0, 255, 0)] 和黄色 [rgb(255, 255, 0)] 之间交替（就像棋盘一样，但在像素级别）。我可以在 html 中进行大量复制和粘贴... [这里] (http://jsfiddle.net/DyEq9/3/)。

但是，我使用的调查软件不允许这么长的代码。该软件似乎也不支持画布功能。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:14:04.390

正如克里斯托弗所提到的，您可以创建一个 2x2 图像版本的网格并将其设置为背景图像，并重复。这可能是迄今为止最好的解决方案。

如果由于某种原因这是不可能的，并且您可以访问 CSS3，您可以这样做：

[http://jsfiddle.net/DyEq9/4/](http://jsfiddle.net/DyEq9/4/)

```
width:100px;
height:100px;
background-size: 2px 2px;
background-position: 0 0, 1px 1px;
background-color:#ff0;
background-image: -webkit-linear-gradient(45deg, #0f0 25%, transparent 25%, transparent 75%, #0f0 75%, #0f0), -webkit-linear-gradient(45deg, #0f0 25%, transparent 25%, transparent 75%, #0f0 75%, #0f0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:00:25.893

你可以用你的绿色/黄色背景创建一个 200px x 100px 的图像来伪造它，然后重复它。

```
.chessboard-container {
 background:url('chess-tile.gif') repeat;
} 
```

# java - 查找运营商的最低价目表

> ID：14490965
> 
> 赞同：0
> 
> 时间：2013-01-23T22:57:18.787
> 
> 标签：java, binary-search, comparator

```
Country Code List=   92,  445,  445,  966,   92,  445,  966,  966, 92
Price List =       0.99, 0.91, 0.92, 0.97, 0.93, 0.97, 0.92, 0.97, 1.0
Operator List=        A,    C,    A,    B,    C,    B,    A,    C,  A 
```

当用户输入国家代码时，我应该找到最低价目表和相应的运营商。国家代码数据可以复制。它不是唯一的。例如，由于我们不知道 countrycode：92 属于哪个运营商，因此在 countrycode 列表中，运营商 A、B 或 C 可以存在 92。

我已经写了下面的代码。但它有一个问题，

问题：我可以对 CountryCode 进行排序，但以下代码中的 binarySearch 无法找到相应的最低价目表。它总是给我随机值，这不是最低价格。对以下代码的改进将不胜感激。

```
class Dog implements Comparator<Dog>, Comparable<Dog>{
   private int CountryCode; 
   private double Price;
   private String Operator;
   Dog(){
   }

   Dog( int c, double p, String o){
       CountryCode= c;
       Price= p;
       Operator=o;
   }

   public int getCountryCode(){
      return CountryCode;
   }

   public double getPrice(){
      return Price;
   }
   public String getOperator(){
          return Operator;
       }

   // Overriding the compareTo method
   public int compareTo(Dog d){

       return CountryCode- d.getCountryCode();
   }

   // Overriding the compare method to sort the age 
   public int compare(Dog d, Dog d1){
       return d.CountryCode - d1.CountryCode;     
   }

}

public class Ser {                          
/**                                     
 * @param args
 */
public static void main(String[] args) {
    // Takes a list o Dog objects
    ArrayList <Dog> list1 = new ArrayList<Dog>();

      list1.add(new Dog(92, 0.99 , "A"));
      list1.add(new Dog(445, 0.91 , "C"));
      list1.add(new Dog(445, 0.92 , "A"));
      list1.add(new Dog(966, 0.97 , "B"));
      list1.add(new Dog(92, 0.93 , "C"));
      list1.add(new Dog(445, 0.97 , "B"));
      list1.add(new Dog(966, 0.92, "A"));
      list1.add(new Dog(966,0.97, "C"));
      list1.add(new Dog(92,1.0, "A"));
      // Sorts the array list using comparator

      Collections.sort(list1, new Dog());

      for(Dog a: list1)//printing the sorted list of ages
          System.out.println(a.getCountryCode() +"  : "+
         a.getOperator()+"  : "+ a.getPrice());

     int index=  Collections.binarySearch(list1, new Dog ( 92,null,null));

      if (index>=0)
      System.out.println( list1.get(index).getOperator()+ " " + list1.get(index).getPrice());
      else
          System.out.println("No operator is availible");

}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:06:19.360

您从未按价格对列表进行排序，因此您不应期望获得最低价格。

乍一看，列表是按国家代码排序的。

每个国家代码中的价格顺序是随机的，取决于两者：

*   原始列表排序的未指定顺序...
*   使用正确的国家代码进行二分搜索找到的第一个值....

滚滚

编辑：

你问正确的方法应该是什么......我想到了三个：

*   使用 Kent 对预先构建的层次结构的建议，该结构对两个维度（国家/价格）上的数据进行排序，然后您可以快速提取所需的数据。
*   将比较器更改为按国家和价格排序，然后扫描列表（而不是二分搜索），并返回具有正确国家/地区的第一项。
*   将比较器更改为按国家和价格排序，然后使用二分搜索来搜索该国家（二分搜索将返回具有该国家/地区的任何位置），然后向后扫描以找到最低价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:11:53.627

如果您的要求是：`if find multiple Dogs with same countryCode, return the Dog with lowest price.`

我建议你改变你的列表设计。

你可以有一个`Map<Integer, List<Dog>>`关键是`countryCode`。当然，`Map<Integer, TreeSet<Dog>>`或者番石榴`MultiMap<Integer, Dog>`也可以。

如果`countryCodes`是真正的国家，您的地图将不会有超过 300 个条目。

然后您可以保存该`O(logn)`二进制搜索。并用于`O(1)`获取相同国家代码的 Dogs 列表/集合/TreeSet。

然后，`O(nlogn)`如果未排序，您可以按价格对 Dog 的集合进行排序（）。（您应该实现可比较的接口并实现方法）并获取第一个/最后一个 Dog。取决于你的排序顺序。您还可以对集合进行排序以供以后使用。如果只是一次性工作，你甚至可以通过 Dog collection 以最低的价格获得 Dog。`O(n)`

如果您也想让运算符进行排序，请将该信息写入您的 compareTo 方法实现。

如果像你说的那样，只有几千个元素，你不必太在意性能，除非最小/最大搜索会进行很多次。如果在这种情况下，当您填写地图时，或者即使使用您的方法，列表，为国家代码的最低/最高价格构建另一张地图。这将在以后节省大量时间。显然，如果您缓存最低/最高价格，如果地图（或您的列表）被更改，或者某些狗被修改，您必须维护它。无论如何，您最了解您的需求，您可以选择正确的方式。

最后，请阅读一些有关 java 命名约定的内容。CountryCode、Price 看起来像 Class 而不是字段。

# asp.net - 是否可以使用 Parallel.Invoke 加速 ASP.NET GridView 的数据绑定？

> ID：14490971
> 
> 赞同：2
> 
> 时间：2013-01-23T22:57:50.043
> 
> 标签：asp.net, gridview, parallel-processing

我有一个 asp.net GridView，由于很多列和（可能基于用户输入）很多行，它需要很长时间才能加载。我已经在使用 AJAX，但想知道从 Parallel.Invoke 中调用 DataBind 方法是否可以提高性能而不会有损坏数据的风险。有什么建议么？

# c# - 时间：2019-06-01 标签：c#convert string to int

> ID：14490973
> 
> 赞同：-5
> 
> 时间：2013-01-23T22:58:10.087
> 
> 标签：c#, string, parsing, int

```
converted.Year = textBox2.Text;
textBox17.Text = converted.Year;

int year2 = int.Parse(converted.Year);
converted.Year = year2.ToString(); 
```

你好！我希望最终分配的值`textBox17`是一种`int`类型。

最初，我尝试过： `textBox17.Text = int.Parse(converted.Year);`

但它只返回一条无法进行转换的错误消息。

所以我想出了最后两行，但我不确定它是否真的输出`int`? 我想我可能已经绕着这个问题转了一圈？唔...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:02:31.680

的类型`textbox17.Text`是`string`并且将永远是`string`。您当然可以使用它来显示整数。

有一个[NumericUpDown 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown%28v=vs.90%29.aspx)可用于显示仅接受数字的数字。要强制显示整数，只需将其[DecimalPlaces 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.decimalplaces%28v=vs.90%29.aspx)设置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T23:06:54.133

你有：

```
converted.Year = textBox2.Text;
textBox17.Text = converted.Year; 
```

这是有效的，尽管您所做的只是复制一个字符串。

然后你有：

```
int year2 = int.Parse(converted.Year); 
```

这也很好 - 但如果字符串不代表 int 会崩溃（“32”很好，“bob”会崩溃，“32bob”也会崩溃）

然后你有：

```
converted.Year = year2.ToString(); 
```

其中，如果它没有崩溃 - 不应该给出与上面第一行不同的任何值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T23:01:43.750

textBox.Text 只能接受一个字符串。因此，在获取/设置文本时，您必须使用 int.Parse 和 ToString。

# python - Python网络爬虫：连接超时

> ID：14490978
> 
> 赞同：0
> 
> 时间：2013-01-23T22:58:38.050
> 
> 标签：python, web-crawler, beautifulsoup

我正在尝试实现一个简单的网络爬虫，并且我已经编写了一个简单的代码来开始：有两个模块**fetcher.py**和**crawler.py**。以下是文件：

fetcher.py：

```
 import urllib2
    import re
    def fetcher(s):
    "fetch a web page from a url"

    try:
            req = urllib2.Request(s)
            urlResponse = urllib2.urlopen(req).read()
    except urllib2.URLError as e:
            print e.reason
            return

    p,q = s.split("//")
    d = q.split("/")
    fdes = open(d[0],"w+")
    fdes.write(str(urlResponse))
    fdes.seek(0)
    return fdes

    if __name__ == "__main__":
    defaultSeed = "http://www.python.org"
    print fetcher(defaultSeed) 
```

爬虫.py：

```
from bs4 import BeautifulSoup
import re
from fetchpage import fetcher    

usedLinks = open("Used","a+")
newLinks = open("New","w+")

newLinks.seek(0)

def parse(fd,var=0):
        soup = BeautifulSoup(fd)
        for li in soup.find_all("a",href=re.compile("http")):
                newLinks.seek(0,2)
                newLinks.write(str(li.get("href")).strip("/"))
                newLinks.write("\n")

        fd.close()
        newLinks.seek(var)
        link = newLinks.readline().strip("\n")

        return str(link)

def crawler(seed,n):
        if n == 0:
                usedLinks.close()
                newLinks.close()
                return
        else:
                usedLinks.write(seed)
                usedLinks.write("\n")
                fdes = fetcher(seed)
                newSeed = parse(fdes,newLinks.tell())
                crawler(newSeed,n-1)

if __name__ == "__main__":
        crawler("http://www.python.org/",7) 
```

问题是，当我运行**crawler.py**时，它对前 4-5 个链接工作正常，然后它挂起，一分钟后给我以下错误：

```
[Errno 110] Connection timed out
   Traceback (most recent call last):
  File "crawler.py", line 37, in <module>
    crawler("http://www.python.org/",7)
  File "crawler.py", line 34, in crawler
    crawler(newSeed,n-1)        
 File "crawler.py", line 34, in crawler
    crawler(newSeed,n-1)        
  File "crawler.py", line 34, in crawler
    crawler(newSeed,n-1)        
  File "crawler.py", line 34, in crawler
    crawler(newSeed,n-1)        
  File "crawler.py", line 34, in crawler
    crawler(newSeed,n-1)        
  File "crawler.py", line 33, in crawler
    newSeed = parse(fdes,newLinks.tell())
  File "crawler.py", line 11, in parse
    soup = BeautifulSoup(fd)
  File "/usr/lib/python2.7/dist-packages/bs4/__init__.py", line 169, in __init__
    self.builder.prepare_markup(markup, from_encoding))
  File "/usr/lib/python2.7/dist-packages/bs4/builder/_lxml.py", line 68, in     prepare_markup
    dammit = UnicodeDammit(markup, try_encodings, is_html=True)
  File "/usr/lib/python2.7/dist-packages/bs4/dammit.py", line 191, in __init__
    self._detectEncoding(markup, is_html)
  File "/usr/lib/python2.7/dist-packages/bs4/dammit.py", line 362, in _detectEncoding
    xml_encoding_match = xml_encoding_re.match(xml_data)
TypeError: expected string or buffer 
```

谁能帮我解决这个问题，我对 python 很陌生，我无法找出为什么它***说连接***在一段时间后超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:12:32.563

连接[超时](http://en.wikipedia.org/wiki/Timeout_%28computing%29)不是特定于 python，它只是意味着您向服务器发出了请求，而服务器在您的应用程序愿意等待的时间内没有响应。

发生这种情况的一个很可能的原因是 python.org 可能有一些机制来检测它何时从脚本获取多个请求，并且可能在 4-5 个请求后完全停止服务页面。除了在不同的站点上尝试您的脚本之外，您实际上无法采取任何措施来避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T14:43:28.377

如上所述，您可以尝试使用代理来避免在多个请求中被检测到。您可能想查看此答案以了解如何使用代理发送 urllib 请求：[如何通过代理使用 urllib 打开网站 - Python](https://stackoverflow.com/questions/3168171/how-can-i-open-a-website-with-urllib-via-proxy-python)

# .net - 使用配置设置打印出 HTTPHeaders 以在 ASMX / WCF 调用上记录文件

> ID：14490981
> 
> 赞同：0
> 
> 时间：2013-01-23T22:58:52.740
> 
> 标签：.net, web-services, http-headers, trace

我已经在一些环境中运行了一些 Web 服务，一些开发人员需要获取发送到这些 Web 服务的原始 HTTPHeaders。这些服务是使用 HTTPS 设置的。

我不能使用wireshark/fiddler来拦截数据，一个是加密的，二是fiddler需要太多的SSL规则，就像炸弹一样。

我“可以”对其进行编码，但我正在寻找一种可以修改 web.config 以输出这些调用的所有数据的方法。

想法？

我有：

```
 <system.diagnostics>
    <trace autoflush="true" />
    <sources>
        <source name="System.Web.Services.Asmx">
            <listeners>
                <add name="AsmxTraceFile" type="System.Diagnostics.TextWriterTraceListener" initializeData="local.log" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack" />
            </listeners>
        </source>
    </sources>
    <switches>
        <add name="System.Web.Services.Asmx" value="Verbose"  />        
    </switches>
</system.diagnostics> 
```

但这不是打印出 HTTP Header 信息或任何类型的 SOAP 数据。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:03:34.557

我会试试这个

```
<system.diagnostics>
    <sources>
        <source name="System.Net" tracemode="protocolonly" maxdatasize="1024">
            <listeners>
                <add name="System.Net"/>
            </listeners>
        </source>
    </sources>
    <switches>
        <add name="System.Net" value="Verbose"/>
    </switches>
    <sharedListeners>
        <add 
            name="System.Net"
            type="System.Diagnostics.TextWriterTraceListener"
            initializeData="network.log"
        />
    </sharedListeners>
    <trace autoflush="true"/>
</system.diagnostics> 
```

# performance - Omnetpp 模型非对称通道

> ID：14490983
> 
> 赞同：0
> 
> 时间：2013-01-23T22:59:02.887
> 
> 标签：performance, networking, upload, omnet++, asymmetric

我必须建模一个bittorrent网络，所以有许多节点相互连接。每个节点都有一个下载速度，比如 600KBps，和一个上传速度，比如 130KBps。问题是：如何在 omnetpp 中建模？在 NED 文件中，我以这种方式创建了网络。如果 A 和 B 是节点：

```
A.mygate$o++ --> {something} -->B.mygate$i++
B.mygate$o++ --> {something} -->A.mygate$i++ 
```

其中 mygate 是输入门，$i 和 $o 是输入和输出半通道。但是必须是速度，**但是**：如果我在第一行代码中设置了速度，这是A的上传速度，但也是B的下载速度。这很正常，因为如果我从慢速服务器下载我下载速度慢。如何在 Omnetpp 中模拟对等点的**下载速度？**我无法理解这。我是否应该说：“允许 k simultaneus 下载，直到我达到下载速度？” 或者这是一个不好的方法？有人可以建议我正确的方法吗，如果 omnetpp 中的内置模块已经存在？我已经阅读了手册，但有点混乱。感谢您的每一个回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:37:04.747

我建议看一下 OverSim，它是 INET 框架之上的对等网络模拟器，它是在 OMNeT++ 中模拟互联网相关协议的框架。

通常每个主机都应该在链路层有一个队列，并且连接的接口应该管理它们不会发出进一步的网络数据包，直到传输线路不空闲（这取决于线路上的数据速率和数据包的长度） ）。一旦线路空闲，就可以在线路上发送下一个数据包。这就是数据速率受实际通道限制的方式。

如果您不想从头开始实现（没有理由这样做），请查看 INET 框架。您应该删除您的主机并将其 PPP 接口与您在问题中提出的非对称连接连接。StandardHost 中的 PPP 接口将为您进行排队，因此您只需添加一些生成流量的应用程序，您就可以设置好。

我仍然会看一下 OverSim，因为它在 INET 之上提供了更高级别的抽象（虽然我没有经验）

# xcode - 在 Xcode 中识别按钮的 titleLabel

> ID：14490984
> 
> 赞同：0
> 
> 时间：2013-01-23T22:59:03.370
> 
> 标签：xcode, ipad, ios6

我正在编写一个在视图控制器上有一个取消按钮的 iPad 应用程序。当控制器上的工作完成时，labelText 从“Cancel”变为“Done”。因此，我只希望在 labelTitle 仍为“取消”时显示警报。如果它是“完成”，我只想让控制器解散。这是代码：

```
NSLog(@"%@",closeButton.titleLabel.text);

if (closeButton.titleLabel.text = @"Cancel")
{
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"i-observe"
message:@"Are you sure that you want to cancel?" delegate:self cancelButtonTitle:@"no" otherButtonTitles:@"yes", nil];
[alert show];
} 
else
{
  [self dismissViewControllerAnimated:YES completion:nil];  
} 
```

发生的情况是警报出现在两种情况下（“取消”和“完成”）。但是在 NSLog 中，它显示 titleLabel 已更改。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:24:03.407

首先，您在 if 语句中将文本设置为“取消”。因此，您的 if 语句逻辑说“如果标题文本成功设置为‘取消’，则显示警报。” 比较运算符是`==`，不是`=`。

其次，您不想用`==`运算符比较两个不同的文本对象。你想这样使用`isEqualToString:`：

```
if ([closeButton.titleLabel.text isEqualToString:@"Cancel"]) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T23:23:30.493

您不能使用“==”来比较字符串。你使用 isEqualToString，像这样：

```
if ([closeButton.titleLabel.text isEqualToString:@"Cancel"]) 
```

# android - 在 Java 中复制对象时保证对象重用

> ID：14490985
> 
> 赞同：-3
> 
> 时间：2013-01-23T22:59:16.473
> 
> 标签：android, garbage-collection, jvm, immutability

在下面的代码中，我们在循环中将复数旋转了某个角度，然后确认得到的数字与我们开始时的数字相同。

```
public class Complex {
    private float r, i;
    ...
    public Complex(Complex other) {
        r = other.r;
        i = other.i;
    }

}

Complex z1 = new Complex(..);
Complex z1_save = new Complex(z1);
Complex z2 = new Complex();
Complex k = new Complex();
k.set_to_first_root_of_unity(8);
int n = 64;
while(n-- != 0) {
    z1.multiply(k, z2);
    z1 = new Complex(z2); // Line Y
}
Assert.assertEquals(true, z1.equals(z1_save)); 
```

Java中有没有办法使用构造函数`public Complex(Complex other)`而不是编写Line Y `clone()`，并确定64个对象不会被垃圾收集？

**更新：** 如果不参考上下文（交互式应用程序的上下文），似乎不可能以简化的方式提出这个问题。到目前为止，对当前问题（assylias）的最佳答案是，90% 的时间都不应该担心对象创建和垃圾收集。在重绘期间，有必要 100% 地担心它。我现在在[这里](https://stackoverflow.com/questions/14505775/should-one-delay-side-effects-in-an-interactive-application-on-android)重申了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T23:27:47.040

> 我担心 GC 不必要地运行 64 次效率低下。

这是不必要的担心。如果您的对象在年轻代中（他们将考虑其范围），GC 将是免费的（如 0 成本）。

当 GC 在年轻代上运行时，它只经过活动对象（符合 GC 条件的对象不被访问），因此 GC 时间仅是活动对象的函数。

老一代的故事不同，但您的本地对象不会达到那个阶段。

参考 - [Brian Goetz](http://www.ibm.com/developerworks/java/library/j-jtp09275/index.html)，强调我的：

> **解除分配呢？**
> 
> 但是分配只是内存管理的一半——释放是另一半。事实证明，对于大多数对象，直接垃圾回收成本为零。这是因为复制收集器不需要访问或复制死对象，只需要访问或复制活对象。因此，在分配后不久变成垃圾的对象不会对收集周期造成任何工作负载。
> 
> ? 事实证明，典型的面向对象程序中的绝大多数对象（根据各种研究在 92% 到 98% 之间）“早逝”，这意味着它们在分配后不久即成为垃圾，通常在下一次垃圾回收之前。（这个属性被称为世代假设，并且已经过经验测试，发现对于许多面向对象的语言都是正确的。）**因此，不仅分配速度很快，而且对于大多数对象来说，释放是免费的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T23:24:13.517

即使对于像手机这样的设备，对具有十个（左右）字段的对象执行 64 次构造函数也不是什么大问题。

目前尚不清楚您的任务是什么。

如果您真的担心多次调用构造函数并创建太多相同的对象，您可以尝试使用 Flightweight 模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T23:59:40.510

^(您的问题（和评论）有点困惑……但这可能只是您的书面英语技能有问题。所以我只是假设我明白你的*意思*。我还假设您的示例“有效”......它目前没有。)

简短的回答是，您可以通过使`Complex`对象可变来减少对象流失（即“临时”对象的创建和释放）。通常，您通过添加允许您更改对象状态的设置器操作来执行此操作。但这会使您的`Complex`课程更难正确使用。例如：

```
 public static final ZERO = new Complex(0, 0);

    // somewhere else

    Complex counter = ZERO;
    while (counter.lessThan(10)) {
        // ....
        counter.setRealPart(counter.getRealPart() + 1);  // Ooops!!
    } 
```

...以及更多类似的错误。

然后是这样的问题是否真的会减少垃圾收集开销，以及减少多少。

正如@assylias 指出的那样，在下一个 GC 周期中创建然后回收的临时对象的成本非常低。昂贵的对象是不会变成垃圾的对象。而且很可能对于在正常环境中运行的正常程序来说，创建临时对象实际上总体上 *更有效。*

还有一个问题是最新的 HotSpot JVM 可以做一些被称为“逃逸分析”的事情，它（如果它有效）可以确定给定的临时对象在其创建范围之外永远不可见，因此不需要完全分配在堆中。当可以应用该优化时，就会提出“对象流失”问题。

但是，运行 GC 可能会影响“实时”性能。例如，在游戏编程中，用户会注意到游戏是否冻结了几分之一秒。在这种情况下，值得考虑“调整”您的代码以减少对象流失。但是还有其他可能的方法......比如使用低暂停垃圾收集器......如果您的平台可用。

* * *

@assylias 的评论使另一个重要。提防*过早*的优化。您对`Complex`对象使用的直觉......以及由此产生的对象流失......可能是*非常*错误的。在所有条件相同的情况下，最好延迟优化工作，直到您分析了应用程序并确定：

*   它*需要*调整，并且
*   分析证据表明`Complex`该类是一个重要的性能瓶颈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T00:41:04.993

根本没有理由关注垃圾收集，*除非*：

*   用户（也许是您）感知应用程序的性能问题；*和*

*   分析应用程序表明垃圾收集是感知性能问题的根源。

缺少*这两个*条件：忽略垃圾收集。

一般而言，Java 中的性能调优也是如此。除非你已经证明有真正的理由，否则不要这样做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T23:10:33.580

如果您想提高 wrt GC 的效率，请尽量减少对 new 的使用。

因此，在您的示例中，您可以重新使用“Y 行”中的变量，并简单地使用新值设置字段。就像是：

```
while(n-- != 0) {
    z1.multiply(k, z2);
    z1.setValue(z2); // Line Y
} 
```

其中 z1.setValue(X) 以与构造函数 new Complex(x) 相同的方式设置对象的状态。

* * *

编辑：为什么这被否决了？我支持上面关于通过最小化使用 new 来降低 GC 成本的说法。是的，我同意在大多数情况下 GC 不是问题 - 但如果您的代码确实经常调用 GC，可能是因为您的代码在循环中花费了大量时间（例如 CPU 密集型算法），那么您可能希望重用对象.

# ruby-on-rails - 如何修复在 Mac OS 10.7.5 上安装 RVM 后停止工作的 gem

> ID：14490986
> 
> 赞同：0
> 
> 时间：2013-01-23T22:59:25.547
> 
> 标签：ruby-on-rails, ruby, rvm, compass-sass, susy-compass

为了让 Rails 在我的 mac 上正常运行，我使用了这个网站：[http ://railsinstaller.org/mac](http://railsinstaller.org/mac)

*效果很好！*- 安装 RVM 和最新版本的 Ruby。不幸的是，我曾经使用一个名为 compass 的 gem，现在它在新安装 RVM 后崩溃了。

有没有办法我可以卸载我在 Ruby 1.8.7 上的旧 ruby​​ gem，然后使用我安装的新版本的 Ruby 1.9.3 重新安装它们？

当我输入 gem uninstall compass 时，它说我没有安装它。如何从旧版本的 Ruby 运行 gem 命令？（我必须为 compass 和 susy 等做这个）

事实上 - 我可以获取所有以前安装的 gem 的列表并卸载所有它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:02:14.097

用于`rvm use system`更改回系统 RVM 和 gems 以卸载并列出它们 ( `gem list`)。

列出它们后，您可以将它们安装在 1.9.3 环境中（通过 normal `gem install`，可能带有系统集中的一长串 gem）

# java - 如何在 Java 中将字符串读入 inputStream？

> ID：14490987
> 
> 赞同：3
> 
> 时间：2013-01-23T22:59:28.223
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中将字符串转换为 InputStream？](https://stackoverflow.com/questions/782178/how-do-i-convert-a-string-to-an-inputstream-in-java)

如何在 Java 中将字符串读入 InputStream？

我希望能够转换`String say = "say"`为 InputStream/InputSource。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:01:17.520

```
public class StringToInputStreamExample {
    public static void main(String[] args) throws IOException {
    String str = "This is a String ~ GoGoGo";

    // convert String into InputStream
    InputStream is = new ByteArrayInputStream(str.getBytes());

    // read it with BufferedReader
    BufferedReader br = new BufferedReader(new InputStreamReader(is));

    String line;
    while ((line = br.readLine()) != null) {
        System.out.println(line);
    }

    br.close();
   }
} 
```

资料来源：[如何在 Java 中将字符串转换为 InputStream](http://www.mkyong.com/java/how-to-convert-string-to-inputstream-in-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T23:01:18.200

就像是...

```
InputStream is = new ByteArrayInputStream(sValue.getBytes()); 
```

应该管用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:01:24.597

您可以使用`ByteArrayInputStream`. `byte[]`它使用`InputStream`方法从 a 中读取元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T23:15:01.707

对于一个`InputStream`疯狂的程序员来说有答案。

如果 a`Reader`没问题，那么您可以使用：

```
Reader r = StringReader(say); 
```

# asp.net-web-api - 将实体批量发布到 WebAPI？

> ID：14490988
> 
> 赞同：5
> 
> 时间：2013-01-23T22:59:30.153
> 
> 标签：asp.net-web-api

我是否需要将单个实体更新发送到 WebAPI，或者我可以发布一组它们并一次发送它们？这似乎是一个愚蠢的问题，但我找不到任何能以这种或另一种方式表达的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:25:17.930

Brad 有一篇博客[文章](http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html)讨论了在 Web API 中实现批处理支持。

此外，codeplex 上的Web API 示例[项目有一个](http://aspnet.codeplex.com/)[示例](http://aspnet.codeplex.com/SourceControl/changeset/view/13217b5b4cf1#Samples/Net45/CS/WebApi/HostedBatchSample/ReadMe.txt)，用于在托管在 asp.net 上的 Web API 中进行批处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T09:56:49.057

似乎 WEB API 2 对此有支持

从站点（Web API 请求批处理）：

> 请求批处理是最小化客户端和服务器之间传递的消息数量的有用方法。这减少了网络流量，并提供了一个更流畅、更少喋喋不休的用户界面。此功能将使 Web API 用户能够批量处理多个 HTTP 请求并将它们作为单个 HTTP 请求发送。

此页面上有许多针对不同场景的示例。

[https://aspnetwebstack.codeplex.com/wikipage?title=Web+API+Request+Batching](https://aspnetwebstack.codeplex.com/wikipage?title=Web+API+Request+Batching)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:01:55.707

您将必须创建一个接受项目集合的操作。

如果您所拥有的只是一个接受单个项目的操作，那么您需要发送单独的请求。

使用批处理时，请始终考虑如何报告失败以及单个项目的失败是否应该使整个批处理无效。

# c++ - C++调用python脚本来处理电子邮件

> ID：14490992
> 
> 赞同：1
> 
> 时间：2013-01-23T22:59:33.913
> 
> 标签：c++, python, smtp

在服务器上，我有一个 C++ 程序，它接受一些输入并将一些输出写入文件。生成文件后，我想向具有文件相应链接的人发送电子邮件。

我宁愿避免从 C++ 本身处理 SMTP，所以我考虑让 C++ 使用系统调用来执行 python 脚本，该脚本反过来会处理电子邮件过程。

在 C++ 中：

```
system("python emailer.py foo@bar.com filetodownload.txt"); 
```

在 Python 中：

```
import sys
email = sys.argv[1]
file = sys.argv[2]
// handle SMTP emailing... 
```

我对这种简单的方法有疑问。C++ 程序是多线程的，因此可能有多个线程想要调用 python 脚本来发送电子邮件。这是一个问题吗？一个（同样简单的）解决方案是否会在 C++ 程序中有一个互斥变量，它一次只允许一个线程调用 python 脚本？另外，如果有更好的方法来完成这项任务，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:13:27.043

从您所展示的内容来看，我看不到任何需要任何多线程同步的共享资源。对 python 的每个系统调用都会产生一个单独的进程。

# django - 在帖子之外返回httpresponse

> ID：14490995
> 
> 赞同：0
> 
> 时间：2013-01-23T22:59:48.603
> 
> 标签：django, django-views

有没有办法停止执行并在除 post、get、put 之外的函数中返回 httpresponse？

所以例如

```
class MyClass(View):
  def post(self, request, *args, **kwargs):
      test_some_things()
      do_some_other_stuff()
      return HttpResponse(..)

  def test_some_things(self):
      if test_fails:
          return HttpResponse(..)
      else:
          return 1 
```

如果 test_fails 我希望能够结束执行并返回响应。但是上面的好像不行。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:12:16.327

尽管可能，但将这些东西分开会更清楚：有一种方法可以测试并返回结果（布尔值）。然后，检查测试是否成功并在视图中返回响应。

从长远来看，这将使您的代码更容易维护和测试。

您的建议是可能的，但不会导致这种情况的最简单解决方案。

# winapi - TreeView 加减号图标大小

> ID：14490999
> 
> 赞同：1
> 
> 时间：2013-01-23T23:00:03.347
> 
> 标签：winapi, fonts, treeview, icons

在[TreeView fontsize - Custom Draw 或 Owner Draw](https://stackoverflow.com/questions/14489358/treeview-fontsize-custom-draw-or-owner-draw/14489696#14489696)中，我学习了如何更改 TreeView 控件中文本的字体大小。只是使用`WM_SETFONT`消息。

但是当我增加字体大小时，加减号不会同时改变。

如何在运行时根据项目大小（由字体大小确定）设置加减号图标大小。

这是图片：

![在此处输入图像描述](../Images/3e288f1ac5c172e20fa9d8dd021336a0.png)