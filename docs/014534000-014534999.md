# StackOverflow 问答 14534000-14534999

# hadoop - 如何在 Hadoop Hive 中执行“事件顺序”查询？

> ID：14534002
> 
> 赞同：0
> 
> 时间：2013-01-26T04:53:39.207
> 
> 标签：hadoop, hive, emr, hiveql

在过去的 2 个月里，我一直在学习 Hive，但我无法弄清楚如何进行某些基于序列的查询。举个例子：

*   我有一个包含用户操作的巨大日志
*   每个用户操作都有一个日期字段，但由于来自不同机器的多个日志文件，显然可能不会按该顺序扫描
*   每个日志可以记录各种不同的事件。对于这个例子，我将它们表示为字母：A、B、C、D...

问题：我将如何编写一个询问“平均而言，事件 A 在 B 发生之前发生多少次”的查询？

我知道如何对用户进行分组，只取完成 A 和 B 的用户并平均 A 发生的数量，但是限制 B 的第一次出现似乎很困难。我想我实际上可以通过将 10 个左右看起来很讨厌的查询串在一起来做到这一点，但我想知道是否有一种我不知道的更简单的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:10:00.937

这并不容易映射到 SQL，尤其是在 Hive 中，考虑到 Hive 不支持与等值连接不同的连接。
同时，我们可以将很多繁重的工作留给 Hive，而我们自己做一小部分。
我建议的想法是：让 hive 将特定用户的所有事件组合在一起。我们可以创建自己的聚合 UDF，它将计算 A 和 B 的最小日期并给出输出 0,1,2,3 - 如果只有 A 发生，只有 B 发生，A 发生在 B 之前，B 发生在 A 之前。
从那里剩下的在 Hive 中进行计算再次变得微不足道。

# jquery - Foundation JS 模态居中

> ID：14534005
> 
> 赞同：2
> 
> 时间：2013-01-26T04:53:55.850
> 
> 标签：jquery, css, zurb-foundation

我对 Foundations 显示功能有一个奇怪的问题。它没有以我的页面为中心。

[http://landpros.turnpostinteractive.com/LandPros_Results_2.html](http://landpros.turnpostinteractive.com/LandPros_Results_2.html)

如果您转到此页面并单击主内容区域中显示“我的列表”的链接，它将向您显示模式，并且它显然不在页面的中心。无论浏览器的大小如何，我都希望它保持在屏幕的中心。

这可能吗？我可以覆盖css代码，但我很困惑为什么默认情况下它不是那样的。

```
<p>  
  <a class="star" href="#"></a> add to <a class="link reveal" data-reveal-id="myModal" href="#">my listing</a><br/>
</p>

<div id="myModal" class="reveal-modal ModalCSS">
  <div class="modal-header">
    <h1>Add to My Listings</h1>
  </div><!--/modal-header-->
  <div class="modal-body">
    <p class="top">Please login to use our<br/> My Listings feature.</p><br/>
    <p>My Listings allows you to save your proper-<br/>ties for future visits. It is Free! </p>

    <br/><br/>
    <p class="right">
      <a href="#">login</a> | <a href="#">create an account</a>
  </div><!--/modal-body-->
  <a class="close-reveal-modal">&#215;</a>
</div> 
```

这是我正在使用的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:19:33.340

在此处居中对齐模态框 Css：-

```
#myModal2 {
            top: 50%;
            left: 50%;
            margin: -202px 0px 0px -92px;
           } 
```

# java - 使用 Runtime.exec() 运行 explorer.exe

> ID：14534006
> 
> 赞同：1
> 
> 时间：2013-01-26T04:54:05.040
> 
> 标签：java, runtime, explorer, runtime.exec

我使用 runTime.exec() 方法杀死 explorer.exe，然后在我的应用程序中重新运行它。最后，当我使用 system.exit(0) 关闭我的应用程序时；表单应用程序关闭，但 java 应用程序似乎在 netbeans 的状态栏中运行。在我杀死 explorer.exe 进程任务管理器并通过任务管理器重新运行它之后，java 应用程序结束。

问题是什么？

# .htaccess - 排除目录表单重定向

> ID：14534008
> 
> 赞同：0
> 
> 时间：2013-01-26T04:54:40.577
> 
> 标签：.htaccess, mod-rewrite

我添加了 RewriteCond ，它应该从重定向中省略管理目录。但是它继续像这样发送 URL

[http://www.site.tld/admin/software/windows/edit/148](http://www.site.tld/admin/software/windows/edit/148)到[http://www.site.tld/help.php](http://www.site.tld/help.php)

我在这里做错了什么？一直在尝试解决这个问题......

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/admin/
</IfModule>
RedirectMatch 301 /en/(.*) /$1
RedirectMatch 301 /windows/(.*) /$1
RedirectMatch 301 /home/os/(.*) /os/$1
RedirectMatch 301 ^/software/add_version/(.*) http://www.site.tld/help.php
RedirectMatch 301 ^/edit/(.*) http://www.site.tld/help.php
RedirectMatch 301 ^/software/edit/(.*) http://www.site.tld/help.php
RedirectMatch 301 ^/software/add_image/(.*) http://www.site.tld/help.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:36:53.713

`RewriteCond %{REQUEST_URI} !^/admin/`只会匹配`/admin/`文件夹。用这个：

```
RewriteCond %{REQUEST_URI} !^/admin/.*$ 
```

# linux - 在 linux 中找不到 syscall_table_32.S 文件

> ID：14534013
> 
> 赞同：4
> 
> 时间：2013-01-26T04:55:46.967
> 
> 标签：linux, linux-kernel, system-calls, archlinux

我`linux-headers-2.6.32-21`在虚拟机上使用这个包。我要写一个新的系统调用。我找到了其他文件来编写系统调用的缩写，但我无法`syscall_table_32.S`在`arch/x86/kernel/`目录中找到它。请帮助我如何以及在哪里可以找到此文件。我怀疑它可能由于权限问题或其他原因而被隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:12:29.587

以下提交将其删除：

```
commit 303395ac3bf3e2cb488435537d416bc840438fcb
Author: H. Peter Anvin <hpa@linux.intel.com>
Date:   Fri Nov 11 16:07:41 2011 -0800

    x86: Generate system call tables and unistd_*.h from tables

    Generate system call tables and unistd_*.h automatically from the
    tables in arch/x86/syscalls.  All other information, like NR_syscalls,
    is auto-generated, some of which is in asm-offsets_*.c.

    This allows us to keep all the system call information in one place,
    and allows for kernel space and user space to see different
    information; this is currently used for the ia32 system call numbers
    when building the 64-bit kernel, but will be used by the x32 ABI in
    the near future.

    This also removes some gratuitious differences between i386, x86-64
    and ia32; in particular, now all system call tables are generated with
    the same mechanism. 
```

因为现在 syscall 表是由脚本 arch/x86/syscalls/syscalltbl.sh 生成的，基于 arch/x86/syscalls/syscall_{32,64}.tbl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T07:40:23.193

/usr/src/kernels/3.3.4-5.fc17.i686.PAE/arch/x86/include/generated/asm

在这里你可以得到 syscalls_32.h。

# objective-c - SLComposeViewController 返回 null (ShareKit)

> ID：14534015
> 
> 赞同：2
> 
> 时间：2013-01-26T04:55:52.757
> 
> 标签：objective-c, sharekit, slcomposeviewcontroller

每当我尝试在其上调用 composeViewControllerForServiceType:serviceType 时，我的 SLComposeViewController 都会返回 null。我可以像这样分配它：

```
SLComposeViewController *test = [[SLComposeViewController alloc] init]; 
```

我会得到

```
<SLComposeViewController: 0x1e057180> 
```

如果我记录它。但如果我这样做：

```
SLComposeViewController *test2 = [SLComposeViewController composeViewControllerForServiceType:serviceType]; 
```

它返回`nil`（serviceType 为 com.apple.social.facebook）。

我不知道是怎么回事。任何人都经历过这种情况或知道会发生什么？

**补充：** 我在一个无法访问 FB 和 Twitter 的国家（并在这里购买了我的 ipad）。这个问题只发生在这两个服务上，如果我做 SLServiceTypeSinaWeibo 就可以了。有趣的是，即使我运行了 VPN，它也不起作用。

# android - Android 通话时长定期提醒应用

> ID：14534016
> 
> 赞同：1
> 
> 时间：2013-01-26T04:56:16.237
> 
> 标签：android, callblocking

我是 Android 开发的新手。我正在尝试开发一个应用程序，该应用程序在达到用户给出的特定通话持续时间时结束活动通话。我正在使用反射来实现这一点，但是，我陷入了困境。有人可以帮我继续吗？

我的 pgm 如下所示：

```
if(intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
                                    TelephonyManager.EXTRA_STATE_OFFHOOK)){

    //infinite loop until user duration exceeds
    while( <condtion I dont know>){
        if(userSeconds >= (System.currentTimeMillis() - start_time)){
            telephonyService.endCall();
        }       
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:58:19.773

终于找到了一些有用的东西，真的很高兴，现在我正在分享它......我们也可以使用java计时器...... :)

```
 if(intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
                                TelephonyManager.EXTRA_STATE_OFFHOOK)){

       //the handler runs once the user specified time period exceeds
       Handler handler=new Handler();handler.postDelayed(new Runnable() {
                @Override
           public void run() {
               // TODO Auto-generated method stub
               // write the code here that will be executed after desired milliseconds.     
               try {
                    telephonyService.endCall();
               } catch (RemoteException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }
           }

        }, userSeconds);
  } 
```

# javascript - 在命令行预编译dust.js模板

> ID：14534022
> 
> 赞同：3
> 
> 时间：2013-01-26T04:58:27.137
> 
> 标签：javascript, templates, dust.js

我对使用dust.js 很感兴趣，出于效率原因，我想预编译模板。

为了自动化编译过程，我希望能够从命令行执行此操作。从[网站](http://akdubya.github.com/dustjs/)上看，我似乎必须使用浏览器来编译模板。有命令行解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T00:45:55.737

有一种方法可以使用命令行自动执行编译过程。首先，你需要安装dustjs-linkedin：

```
$ npm install -g dustjs-linkedin 
```

然后你可以使用命令`dustc`：

```
$ dustc input_file.tl output_file.js 
```

`--name`您还可以使用标志指定模板的名称：

```
$ dustc --name=dust_fun dust_is_fun.tl dust_is_fun.js 
```

有关更多信息，请查看 Dust by LinkedIn [GitHub 页面](http://linkedin.github.com/dustjs/)。

`dustc`自dustjs 2.6版以来已完全重写（但语法几乎相同），文档[可在此处获得](http://www.dustjs.com/docs/dustc-api/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T22:37:03.397

已经编写了几个命令行观察程序来执行此操作，并在文件更改时自动编译。这里有几个：

*   [https://github.com/dmix/dusterjs](https://github.com/dmix/dusterjs)
*   [https://github.com/mutualmobile/dust_compiler](https://github.com/mutualmobile/dust_compiler)
*   [https://github.com/jamsyoung/dust-compiler](https://github.com/jamsyoung/dust-compiler)

所有这些都是自动化 smfoote 详细介绍的dustc 命令。

# javascript - 防止 D3 饼图中的文本重叠

> ID：14534024
> 
> 赞同：8
> 
> 时间：2013-01-26T04:58:35.440
> 
> 标签：javascript, d3.js, label, pie-chart, overlap

我一直在谷歌搜索，但我似乎无法掌握这一点。

我的情况是，在饼图上显示的国家/地区重叠：

这是正在发生的事情的一个例子：

[jsfiddle](http://jsfiddle.net/tqnqz/3/)

![在此处输入图像描述](../Images/6fa6217a5e5e69134312289e6d21762c.png)

我是一个完全的初学者，`D3`并试图防止文本重叠。是否有像我可以添加的文本边距属性这样我的标签不会相互重叠？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T20:02:23.387

**更新**：如果有足够的空间来提供更全面的解决方案，请参阅[D3 将弧标签放入饼图中的答案。](https://stackoverflow.com/questions/19792552/d3-put-arc-labels-in-a-pie-chart-if-there-is-enough-space/19801529#19801529)

* * *

我不知道放置文本元素以使它们不重叠的任何通用方法。

但是，通过旋转标签和缩放图形以使它们不重叠，可以解决您的问题：http: [//jsfiddle.net/2uT7F/](http://jsfiddle.net/2uT7F/)

```
// Get the angle on the arc and then rotate by -90 degrees
var getAngle = function (d) {
    return (180 / Math.PI * (d.startAngle + d.endAngle) / 2 - 90);
};

g.append("text")
    .attr("transform", function(d) { 
            return "translate(" + pos.centroid(d) + ") " +
                    "rotate(" + getAngle(d) + ")"; }) 
    .attr("dy", 5) 
    .style("text-anchor", "start")
    .text(function(d) { return d.data.label; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-26T01:11:26.380

另一种解决方案是改变数据的顺序，美国是第一位的。您可能会发现饼图布局的角度更具可读性。

```
var data_values = [48, 1, 1, 1, 1, 1, 1, 4];
var titles = ["USA","Pakistan", "Israel", "Netherlands", "Italy", "Uruguay",       "United Kingdom", "Austria", "China"] 
```

[http://jsfiddle.net/rocky1616/oLzsrd4o/](http://jsfiddle.net/rocky1616/oLzsrd4o/)

Musically_ut 的解决方案在这里也可以很好地工作。如果这在您的设计中有效，您甚至可以将角度降低一点。

```
 var getAngle = function (d) {
      return (180 / Math.PI * (d.startAngle + d.endAngle) / 2 + 45);
  }; 
```

[http://jsfiddle.net/2uT7F/26/](http://jsfiddle.net/2uT7F/26/)

您需要创建一个 if else 块来处理 USA 项目，但如果有帮助，这是一个开始。

# javascript - Ajax 为每个提交的表单添加一个额外的帖子

> ID：14534026
> 
> 赞同：1
> 
> 时间：2013-01-26T04:59:13.943
> 
> 标签：javascript, json, jquery, jquery-mobile

我正在构建我的第一个电话间隙应用程序以连接到我已经在 rails 中构建的 API，我有一个用户可以发布内容的部分，但是当用户单击提交时，它会毫无问题地提交表单并附加帖子很好，但是如果用户导航到应用程序的另一个部分，然后返回会有第二个帖子副本，如果我观看我的服务器控制台，我可以看到它多次发布，另一个真正奇怪的事情是如果用户继续在该部分再次发布，它将在附加帖子的顶部添加一个附加帖子，依此类推，直到用户一次发布相同的帖子 10 次。

似乎它出于某种原因多次循环该函数，但我真的不确定为什么，我有预感它与我的

```
jQuery('#new_rave').live('submit', function( event ) { 
```

但是我尝试过的其他方法导致页面无法加载。

**jQuery/JS**

```
<!-- Load Json data and events -->
<script type="text/javascript">
    jQuery('#new_rave').live('submit',function( event ) {
        $.ajax({
            url: 'http://whoops/goodtimes',
            type: 'POST',
            dataType: 'json',
            data: $('#new_rave').serialize(),
            success: function( data ) {
                for( var id in data ) {
                   jQuery('#').html(data[id]);
                }
            }
        });
        return false;
    });
    $(document).ready(function() {
        $.getJSON('http://whoops/goodtimes', function( goodtimes ) {
            $.each(goodtimes, function( goodtime ) {
        var output = 
            "<li><a href="+this.goodtime.id+">" + 
            "<h3>" + this.goodtime.title + "</h3>" +
            "<p>" + this.goodtime.post + "</p>" +
            "<p class='ui-li-aside'><strong>" + 
                this.goodtime.created_at + "</strong></p>" +
            "</a></li>";
            $('#content ul').append(output).listview('refresh');
        });
        });
    });
</script> 
```

**表格**

```
<!-- New item Popup -->
<div data-role="popup" class="ui-content"
data-overlay-theme="a" data-position-to="window" id="add">
    <form id="new_rave">
        <label for="goodtime_title">Title</label>
        <input type="text" name="goodtime[title]" id="goodtime_title">
        <label for="goodtime_post">Rave</label>
        <div data-role="fieldcontain">  
        <textarea name="goodtime[post]" id="goodtime_post"></textarea>
        </div>
        <input type="submit" value="submit">
    </form>
</div> 
```

**和内容 div**

```
<div id="content" data-role="content">  
    <ul data-role="listview" data-theme="d" data-divider-theme="d"></ul>
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:23:16.797

我现在真的不知道你的代码是什么.. 但是对于 ajax 调用，我主要为变量分配值.. 像这样

```
jQuery('#new_rave').click(function( event ) {
    var title = $(':input[name="goodtime[title]"]').val() ;
    var post = $(':input[name="goodtime[post]"]').val() ;
    $.ajax({
        url: 'http://whoops/goodtimes',
        type: 'POST',
        dataType: 'json',
        data: {'title' : title , 'post': post},
        success: function( data ) {
            for( var id in data ) {
               jQuery('#').html(data[id]);
            }
        }
    });
    return false;
}); 
```

只需用按钮元素替换提交输入..这将节省大量不必要的工作并避免很多麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:15:59.753

那是因为您的提交按钮本身发布了表单（默认情况下）并且显然也发布了 ajax ......
这是您如何禁用提交按钮的默认操作。

```
jQuery(SUBMIT_BUTTON_ID).bind('click',function( event ) {
   event.preventDefault();       
    $.ajax({
        url: 'http://whoops/goodtimes',
        type: 'POST',
        dataType: 'json',
        data: $('#new_rave').serialize(),
        success: function( data ) {
            for( var id in data ) {
               jQuery('#').html(data[id]);
            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:45:52.907

在再次绑定之前先尝试取消绑定事件

```
$('#new_rave').off().on('submit', function(event) {
    //your code goes here
}); 
```

# sql-server - 通过 Internet 远程连接到 SQLEXPRESS

> ID：14534028
> 
> 赞同：1
> 
> 时间：2013-01-26T04:59:20.780
> 
> 标签：sql-server, sql-server-express

我正在尝试使用 sqlexpress，所以我将它安装在计算机上，当我在网络内（工作）时，我可以成功登录到它，使用 machinename\sqlexpress 然后是用户名和密码。

问题：我无法从网络外部（在家）连接。在工作中，我有一个静态 ip。我去了myipaddress.com并使用该IP地址远程连接：\47.23.xx.xx,2301\sqlexpress，但仍然无法连接。

在研究了这个问题后，我启用了 tcp/ip，尝试使用端口 1433，然后更改为 2301，以防 1433 被阻止，Windows 8 防火墙：为 sqlserver 添加了异常，我正在运行 sqlexpress 和浏览器服务。

我想我的问题是：我是否正确假设使用我从 myipaddress.com 获得的 IP 地址，后跟配置的端口和服务器名称 sqlexpress 应该连接我？我有点困惑，因为如果该静态 ip 是针对整个路由器的，它怎么知道将外部呼叫定向到网络上的那台机器？和上面运行的sqlexpress？这一切都是由端口号完成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:02:41.470

你快到了，正如你所说，公共IP地址是整个路由器的，但是你可以配置一个端口转发功能，这将使路由器知道应该将流量转发到哪里。如何做到这一点，登录到你的路由器，寻找端口转发功能在哪里，然后在端口的空间上配置你为sql express分配的端口，前面有ip地址，输入机器的ip地址运行 sql server，这样路由器就能够识别出使用端口号的应用程序是哪台计算机并转发流量。

注意：您必须为运行 sql server 的计算机配置客户端列表或 dhcp 预留，以便每次重新启动计算机时 ip 地址都不会更改。如何做到这一点：登录到你的路由器，去 dhcp 服务器，应该有 dhcp 保留或客户端列表，这取决于你的路由器类型，将运行 sql 服务器的系统的 mac id 和你想要的 ip 地址放在必填字段，保存。

这样，您应该能够远程连接。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:13:19.387

您几乎肯定会遇到不知道如何管理该流量的防火墙，因此拒绝它。此外，您在工作中看到的静态 IP 是网络地址转换 (NAT) 地址，不太可能接受连接。

在这个用例中使用 VPN 要好得多；无需将测试系统暴露在互联网上，这可能是一个重大的安全风险。如果您还没有 VPN 设置，请向您的管理员咨询...

# meteor - 如何 JSON.parse Meteor 模板中的数据？

> ID：14534029
> 
> 赞同：4
> 
> 时间：2013-01-26T04:59:41.427
> 
> 标签：meteor

这是我的场景，第一个使用[Meteor](http://en.wikipedia.org/wiki/Meteor_%28platform%29)的项目：我的 MongoDB 文档中嵌入了 JSON 字符串化数据，您可以在下面的 MESSAGE 键中看到：

```
{ "DATE" : "Jan 24 23:28:14",
  "MESSAGE" : **"{\"status_code\":200,\"uri\":\"172.16.156.143/content/dynamic\",\"tprocess\":3}"**,
  "_id" : ObjectId("5101c3992a1624e726000014") } 
```

在 Meteor 中，我的客户端模板代码类似于以下基本模式：

```
Template.log.logEntry = function () {
    return Messages.find({});
}; 
```

...效果不错，但它显然会呈现以下模板...

```
<template name="log">
    <h1>Log Entries Are:</h1>
        {{#each logEntry}}
            <div> : {{MESSAGE}} </div>
        {{/each}}
</template> 
```

...例如，在浏览器中使用未解析的文字字符串，

```
{"status_code":200,"uri":"172.16.156.143/static/style.css","tprocess":2} 
```

我很想 JSON.parse() 这个字符串并做更多有趣的事情，但我不确定如何从我的 Meteor 项目的 JavaScript 文件中的 isClient 上下文中最好地做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T05:37:59.737

添加模板助手：

```
Template.log.aSpecificField = function () {
  return JSON.parse(this.MESSAGE).aSpecificField;
} 
```

它允许您`{{aSpecificField}}`在`#each`循环中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:10:09.877

我不确定这是否是最好的方法（实际上，我怀疑不是），但这可以按预期工作。

```
Template.log.helpers({
  get_uri: function () {
     return JSON.parse(this.MESSAGE).uri;
} 
```

在模板中调用它现在只是：

```
{{ get_uri }} 
```

# django - Django 模板中使用绝对路径发送电子邮件的提示

> ID：14534030
> 
> 赞同：0
> 
> 时间：2013-01-26T04:59:43.037
> 
> 标签：django, django-templates

我对 Django 中的模板有疑问。我创建了一个通过 html 电子邮件发送的模板，该模板从站点中所有页面的相同 base.html 扩展而来（继承了样式、页眉和页脚）。

我的问题是：如果我在我的站点中，所有 URL 都是相对的，并且工作正常，但电子邮件没有看到任何内容，因为它在域之外。

我应该使用绝对路径复制电子邮件的页眉和页脚吗？我应该将应用程序中的所有路径从相对更改为绝对吗？渲染模板时是否有任何过滤器可以更改 URL？

我希望有人可以提供建议/提示。

问候， 克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:39:22.670

**样本：**

**视图.py**

```
from django.core.mail import send_mail
from django.template.loader import render_to_string

def notify_admin(request, topic):
    message = render_to_string('emails/new_speakup_topic.txt', {
            'topic': topic, 'ip_address': get_ip(request)})
    subject = "Topic: {0}".format(topic.title)
    send_mail(subject, message, from_email,
        ['to_email',]) 
```

在模板文件夹中创建电子邮件文件夹，然后将此 txt 放入电子邮件文件夹中

**样本.txt**

```
{{ topic.title }}
Category: {{ topic.category }}
Author: {{ topic.author.username }}
IP: {{ ip_address }}

{{ topic.description }}

https://site.com/speakup/topic/{{ topic.id }}/ 
```

# iphone - 根据可用的文本字体大小和字体名称初始化 UITextView

> ID：14534031
> 
> 赞同：1
> 
> 时间：2013-01-26T04:59:47.567
> 
> 标签：iphone, ios, objective-c, uitextview

这是我尝试过的，

```
 UITextView *_textView = [[UITextView alloc] initWithFrame:CGRectMake(10, 10, 300, 10)];
    NSString *str = @"This is a test text view to check the auto increment of height of a text     view. This is only a test. The real data is something different.";
    _textView.text = str;

CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame;//Here i am adjusting the textview

[self.view addSubview:_textView];

Basically after fitting the text into textview,scrolling is enable,but i cannot view the content inside the textview without scrolling the textview.I do want to initialize the UITextView frame size based on the text size,font name etc. 
```

任何解决方案表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:09:40.387

```
NSString *str = @"This is a test text view to check the auto increment of height of a text     view. This is only a test. The real data is something different.";
UIFont * myFont = [UIFont fontWithName:@"your font Name"size:12];//specify your font details here 
```

//然后计算上述文本所需的高度。

```
CGSize textviewSize = [str sizeWithFont:myFont constrainedToSize:CGSizeMake(300, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping]; 
```

//根据你从上面得到的高度初始化你的textview

```
UITextView *_textView = [[UITextView alloc] initWithFrame:CGRectMake(10, 10, textviewSize.width, textviewSize.height)];
_textView.text = str;
[self.view addSubview:_textView]; 
```

而且您还想禁用 textview 中的滚动，然后参考这个。

正如 William Jockusch 在[他的回答](https://stackoverflow.com/a/4652183/19679)中所说：

> 您可以通过将以下方法放入 UITextView 子类来禁用几乎所有滚动：
> 
> ```
> - (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated {
>   // do nothing
> } 
> ```
> 
> 我说“几乎”所有滚动的原因是即使使用上述内容，它仍然接受用户滚动。尽管您可以通过将 self.scrollEnabled 设置为 NO 来禁用它们。
> 
> 如果您只想禁用某些滚动，则制作一个 ivar，我们将其称为 acceptScrolls，以确定您是否要允许滚动。然后您的 scrollRectToVisible 方法可以如下所示：
> 
> ```
> - (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated {
>    if (self.acceptScrolls)
>      [super scrollRectToVisible: rect animated: animated];
> } 
> ```

# jquery - 带有更改跳转菜单的链式选择 jQuery

> ID：14534038
> 
> 赞同：2
> 
> 时间：2013-01-26T05:01:39.563
> 
> 标签：jquery, jquery-plugins, chained

我正在使用 Chained Selects jQuery 插件，[http://www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

但我想在第二个选择元素中添加一个跳转菜单，即需要点击提交。如果我使用处理程序更改，则会在链式脚本上触发。

```
 $(function(){
      $("#spotCat").chained("#locationCat"); 
      $("#spotCat").change(function(){
        window.location.href = $(this).val();
      });
  }); 
```

我不确定解决问题的最佳方法？当您“单击”选择下拉箭头时触发单击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:24:45.913

以下方式似乎对我有用，它之所以有效，是因为模糊事件不会被触发，除非它是焦点。更改事件没有给出。

```
$(function(){
      $("#spotCat").chained("#locationCat"); 
  $("#spotCat").change(function(){      
        this.blur()
  });
  $("#spotCat").blur(function(){
        if($(this).val().length !== 0) {
          window.location.href = $(this).val();
        }
  }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:21:02.633

根据插件的功能方式（具体来说，当它填充依赖选项列表时它总是保留第一个项目被选中的方式），您只需向`if`匿名`change`事件处理函数添加一个：

```
 if ($(this).find("option:selected").index() !== 0) { 
```

演示（打开浏览器的开发人员工具并转到控制台以查看事件逻辑何时触发 - 或者更重要的是，当它不触发时）：http: [//jsfiddle.net/ywn6G/](http://jsfiddle.net/ywn6G/)

在`if`上下文中：

```
 $(function(){
    $("#spotCat").chained("#locationCat"); 
    $("#spotCat").change(function(){
        if ($(this).find("option:selected").index() !== 0) {
            window.location.href = $(this).val();
        }
    });
 }); 
```

# python - 将字符串转换为大端，索引超出范围

> ID：14534044
> 
> 赞同：3
> 
> 时间：2013-01-26T05:02:27.860
> 
> 标签：python, math

我正在尝试将字符串转换为大端，但由于我缺乏位移等经验，到目前为止我一直坚持以下几点：

```
def my_func(self, b):
    a = [(len(b)+3) >> 2]

    for i, val in enumerate(b):
        a[i>>2] |= ord(b[i]) << (24-(i & 3)*8)
    return a 
```

上面返回错误 `a[i>>2] |= ord(b[i]) << (24-(i & 3)*8) IndexError: list index out of range`，并且也永远不会比#4更远地通过循环索引。

错误消息指向 a[] 列表。

谁能看到我在这里做错了什么？我从 JavaScript 移植这个，所以这可能是问题（链接到那个[http://pastebin.com/GKE3AeCm](http://pastebin.com/GKE3AeCm)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:19:18.100

在不求助于其他方法的情况下，您的代码只需要从 Javascript 版本更正确地调整即可。在 Javascript 中，您正在创建一个`Array`特定长度的列表，但在您的 Python 代码中，您总是创建一个大小为 1 的列表。以下是更正的：

```
def my_func(b):
    a = [0] * ((len(b)+3) >> 2)

    for i, val in enumerate(b):
        a[i>>2] |= ord(b[i]) << (24-(i & 3)*8)
    return a 
```

因此，您正在做的是将 4 个对象的序列视为原始字节并将它们解包以构建一个整数。使用`struct`，正确的方法是明确说明您的数据是字节并将其传递：

```
import struct

def my_func2(data):
    lb = len(data)
    if lb % 4:
        data += b'\x00' * (4 - (lb % 4))
    a = [struct.unpack('>i', data[i:i+4])[0] for i in range(0, lb, 4)]
    return a

print(my_func2(b'pass123')) 
```

# arrays - 使用 matplotlib 将数组保存为灰度“L”图像时出现问题？

> ID：14534047
> 
> 赞同：0
> 
> 时间：2013-01-26T05:02:49.607
> 
> 标签：arrays, matplotlib

我正在尝试使用将数组保存为图像`plt.imsave()`。原始图像是 16 灰度 'L' tiff。但我不断收到错误：

```
Attribute error: 'str' object has no attribute 'shape'
    figsize = [x / float(dpi) for x in (arr.shape[1], arr.shape[0])] 
```

* * *

```
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
import numpy as np 
from PIL import Image

im2=plt.imread('C:\Documents\Image\pic.tif')
plt.imsave(im2, '*.tif') 
```

图像为 2048x2048，阵列为 2048Lx2048L。我尝试过的一切都不起作用：`shape=[2048,2048]`，`im2.shape(2048,2048)`。谁能告诉我如何将形状添加为关键字参数？或者有没有更简单的方法来做到这一点，最好避免 PIL，因为它似乎有 16 位灰度 tiff 的问题，我绝对必须使用这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:13:29.617

我认为你的论点倒退了。来自`help(plt.imsave)`：

```
Help on function imsave in module matplotlib.pyplot:

imsave(*args, **kwargs)
    Saves a 2D :class:`numpy.array` as an image with one pixel per element.
    The output formats available depend on the backend being used.

    Arguments:
      *fname*:
        A string containing a path to a filename, or a Python file-like object.
        If *format* is *None* and *fname* is a string, the output
        format is deduced from the extension of the filename.
      *arr*:
        A 2D array. 
```

IE：

```
>>> im2.shape
(256, 256)
>>> plt.imsave(im2, "pic.tif")
Traceback (most recent call last):
  File "<ipython-input-36-a7bbfaeb1a4c>", line 1, in <module>
    plt.imsave(im2, "pic.tif")
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 1753, in imsave
    return _imsave(*args, **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/image.py", line 1230, in imsave
    figsize = [x / float(dpi) for x in arr.shape[::-1]]
AttributeError: 'str' object has no attribute 'shape'

>>> plt.imsave("pic.tif", im2)
>>> 
```

# hashmap - 在不同时间保存哈希图

> ID：14534052
> 
> 赞同：0
> 
> 时间：2013-01-26T05:04:25.380
> 
> 标签：hashmap

我的问题是：我正在尝试将属性值保存到哈希图中。每次单击时，它都会将一组新变量保存到我的 hashmap 中，但是当我输出保存的变量时，即使我有 hashMap 循环，它也只会显示新保存的变量。为什么是这样？

我有

```
Map<Boolean, Integer> property = new HashMap<Boolean, Integer>(); 
```

作为全局变量

这就是我将变量保存到我的 Hashmap 的方式

```
property.put(m.turn, tempBoard.current.position); 
```

发生一系列事件后，每次单击某个图像时都会发生这种情况，尽管它们不会影响 Hashmap

然后我返回到创建哈希图的同一个类，但过程不同。我用来循环哈希图的代码是：

```
for (Map.Entry<Boolean, Integer> entry : property.entrySet()) {
        System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
    } 
```

这只会将新保存的变量输出到 hashmap，而不是任何其他保存变量。

老实说，我一直在搜索谷歌，试图找到它不会从保存变量的开头开始的原因。我找不到任何与我的问题相似的东西，因为每个其他示例都同时将变量保存到哈希图中；永远不会在不同的时间或事件之间。

任何帮助表示赞赏，并对这篇文章的措辞有多么奇怪感到抱歉。我不知道如何更好地解释它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T09:41:54.827

应该如何在 hashmap 中存储超过 2 个值？我认为您需要了解 hashmap 的工作原理，在 hashmap 中，您针对 UNIQUE 键存储一个 VALUE，如果您使用一些已经添加的键，则 put 方法将始终用传递的新值替换键的旧值，否则它将添加这个值对给定的键。
现在您只需要弄清楚如何存储所有值以及要使用哪种类型的 Key。查看此链接以了解 HashMap [https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html的详细信息](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html)

# actionscript-3 - 为什么我无法访问 actionscript 3 中的外部类？

> ID：14534056
> 
> 赞同：1
> 
> 时间：2013-01-26T05:05:39.360
> 
> 标签：actionscript-3, flash

我正在 adobe flash 中开发一款突破性游戏。我定义了一个文档类 BreakOut.as，并将其设置为 .fla 文件。我编写了另一个类 Player.as，但我无法在 BreakOut.as 中访问 Player.as。这是代码：

BreakOut.as:

```
package 
{
import flash.display.MovieClip;
import flash.display.Sprite;
public class BreakOut extends MovieClip
{
    public function BreakOut()
    {
        var background:Background;
        background= new Background();
        addChild(background);

        var playerone:Player;
        playerone=new Player();
        playerone.x=50;
        playerone.y=50;
        addChild(playerone);
    }
}

} 
```

播放器.as:

```
package 
{
import flash.display.MovieClip;

public class Player extends MovieClip
{
    public function Player()
    {

        player.graphics.beginFill(0x000000);
        player.graphics.drawRect(0,0,20,100);

    }
}

} 
```

Adobe flash 一直告诉我：未定义属性 Player 的访问。嗯，Background.as 是另一个类，我可以毫无问题地访问它。但它在 Player.as 上不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:49:20.187

```
 player.graphics.beginFill(0x000000);
    player.graphics.drawRect(0,0,20,100); 
```

这样，如果您尝试通过绘制一个矩形来初始化**Player**，您应该使用***这个***：

```
 this.graphics.beginFill(0x000000);
    this.graphics.drawRect(0,0,20,100); 
```

* * *

请注意，**Player.as**也应该与 fla 的类路径位于同一路径中。

# oracle - 如何在Oracle中通过查询编写一个复杂的组？

> ID：14534059
> 
> 赞同：1
> 
> 时间：2013-01-26T05:07:03.810
> 
> 标签：oracle, group-by

我有查询要按某些列编写分组并计算结果集。

这是我的要求。我有一个表名 Table_1 ，它有 3 列`id, key, value`。记录就像`id_1 key_1 value_1`. 我想找出哪些`value`在同一个`id`组中，并且在该`id`组下`key`都有它们。

这是一个例子：

```
id=id1, key=key1, value=value1
id=id1, key=key1, value=value2
id=id1, key=key2, value=value2
id=id1, key=key2, value=value3
id=id1, key=key3, value=value1
id=id1, key=key3, value=value2
id=id1, key=key3, value=value3

id=id2, key=key1, value=value2
id=id2, key=key1, value=value3
id=id2, key=key2, value=value2
id=id2, key=key2, value=value3
id=id2, key=key3, value=value1
id=id2, key=key3, value=value2
id=id2, key=key3, value=value3 
```

结果应该`id1, value2`和`id2, value2` `id2, value3`。

你可以看到 all `key`under`id1`有一个值`value2` 并且 all `key`under`id2`有一个值`value2`and `value3`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:14:13.047

假设 (ID,KEY,VALUE) 形成一个唯一的组合，即每个 ID 每个 KEY 只有一个 VALUE 实例，这应该可以工作。

```
with data_k as ( select id 
                      , count(distinct key) no_of_key
               from your_table
                group by id )
     , data_v as ( select id 
                      , value
                      , count(*) no_of_value
               from your_table
                group by id, value )
select distinct data_k.id
       , data_v.value
       , data_k.no_of_key 
       , data_v.no_of_value
from data_k
     join data_v on (data_k.id = data_v.id)
where data_k.no_of_key = data_v.no_of_value
order by data_k.id, data_v.value; 
```

我不清楚您期望的实际结果是什么，所以我只是对预测进行了猜测。

这个版本有效，[这里有一个 SQL Fiddle 来证明它](http://sqlfiddle.com/#!4/b3f06/19)。

# php - 让用户登录的最佳方式过期？

> ID：14534065
> 
> 赞同：0
> 
> 时间：2013-01-26T05:08:32.150
> 
> 标签：php, javascript, login, timeout

我正在探索一个潜在的内部内容交付系统，我们必须在其中跟踪学生的任务时间。只要学生与页面交互，就没有问题。如果学生出去吃午饭，页面打开，会话应该超时，超时后他们将不会获得在线时间的积分。

我已经知道我可以轻松地捕获事件，例如离开页面并使用 PHP 将该事实记录到 MySQL 中的学生记录中，但是让学生超时的最佳方法是什么？JavaScript？我环顾四周，还没有找到好的解释。

谢谢你的帮助！

- - - - - 编辑 - - - - - - -

在 Floris 建议查看有关闲置的特定帖子后，大多数人建议使用 JQuery 解决方案，但一位发帖者有一个没有 JQuery 的简单解决方案。这段代码看起来会起作用吗？对我来说看起来不错：

```
var inactivityTime = function () {
    var t;
    window.onload = resetTimer;
    document.onmousemove = resetTimer;
    document.onkeypress = resetTimer;

    function logout() {
        alert("You are now logged out.")
        //location.href = 'logout.php'
    }

    function resetTimer() {
        clearTimeout(t);
        t = setTimeout(logout, 3000)
        // 1000 milisec = 1 sec
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:12:47.513

使用 JavaScript 检测用户何时空闲。当用户空闲时，会触发一个 AJAX 调用，该调用会清除所有 cookie 或会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:17:41.433

如果您让浏览器完成这项工作，学生可以轻松伪造它。相反，每当用户执行操作（例如转到其他页面）时，我都会将其转过来并记录。花费的时间是一个动作和下一个动作之间的时间总和（增量时间），但如果增量时间大于 15 分钟，则不包括在内。

# android - 为什么 TYPE_ORIENTATION 自 API 8.0 以来已弃用？

> ID：14534068
> 
> 赞同：3
> 
> 时间：2013-01-26T05:08:43.333
> 
> 标签：android

为什么 TYPE_ORIENTATION 自 API 8.0 for Android 以来被弃用？日食中有一个十字架，但代码运行得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T05:48:59.680

在关于传感器的 Google I/O 2012 会议上：http: //youtu.be/Q0V_ld7iNw4?t= [23m23s](http://youtu.be/Q0V_ld7iNw4?t=23m23s)在 23 分 23 秒时谈到了弃用该功能，因为在平板电脑和智能手机等不同设备上，默认方向平板电脑是横向的，手机是纵向的。如果编码人员没有意识到这一点，它将导致他们的设备在这些环境中以不同的方式运行，或者当它旋转 45 度时。最好先使用 SensorManager.getOrientation() 获取设备的默认方向，然后相应地执行传感器计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:23:36.110

因为平板电脑通常与过去的默认方向不同。（它是纵向的，这意味着按正常预期握住时屏幕比宽高。平板电脑意味着默认为屏幕宽比高。）

这意味着需要找到更好的机制，即[`android.view.Display.getOrientation()`](http://developer.android.com/reference/android/view/Display.html#getRotation%28%29).

有关详细信息，请参阅[此博客文章](http://android-developers.blogspot.com/2010/09/one-screen-turn-deserves-another.html)。

`Deprecated`意思是“这已经被更好的东西取代了。它现在仍然可以工作，但你应该寻找新的替代品，因为它将来可能会停止工作”，这解释了为什么代码对你来说“运行得很好”。它可能工作多年（或在下一个版本中停止工作），这就是您收到警告的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:14:38.493

折旧的代码仍然有效，但不能保证在未来的 API 上有效。它们被更有效地工作（并且也必须以这种方式运行）的代码贬值，无论是与其他代码还是整体。除非你真的需要使用它，否则你应该避免使用贬值的代码。

# c# - 如何为 2 个集合使用相同的 foreach 代码？

> ID：14534069
> 
> 赞同：8
> 
> 时间：2013-01-26T05:08:54.707
> 
> 标签：c#, entity-framework

我有 2 种不同类型的 2 个集合，但具有几乎相同的字段集。在一个函数中，我需要根据一个条件遍历其中一个集合。我只想编写一个涵盖这两种情况的代码块。示例：我有以下代码：

```
if (condition1)
{
    foreach(var type1var in Type1Collection)
    {

    // Do some code here
       type1var.Notes = "note";
       type1var.Price = 1;
    }
}
else
{
    foreach(var type2var in Type2Collection)
    {

    // the same code logic is used here
       type2var.Notes = "note";        
       type2var.Price = 1;
    }
} 
```

现在：我想简化此代码以仅使用相同的逻辑一次（因为它们是相同的），如下所示（PS：我知道以下代码不正确，我只是在解释我想要做什么）：

```
var typecollection = Condition1 ? Type1Collection : Type2Collection;

foreach(var typevar in TypeCollection)
{

   // the same code logic is used here
   typevar.Notes = "note";
   typevar.Price = 1;       
 } 
```

Type1 & Type2 的定义类似如下代码（其实它们是Entity对象）：

```
 public class Type1 : EntityObject
    {
        public int Type1ID { get; set; }
        public int Type1MasterID { get; set; }

        public String Notes { get; set; }
        public decimal Price { get; set; }
    }

    public class Type2 : EntityObject
    {
        public int Type2ID { get; set; }
        public int Type2MasterID { get; set; }

        public String Notes { get; set; }
        public decimal Price { get; set; }
    } 
```

更新1：

我在 foreach 块中包含了一些示例代码（我正在访问这两种类型的公共属性）。

更新 2：

我已经包含了示例 Type1 和 Type2 定义，如您所见，我想在 foreach 块中更新这两个类中的 2 个公共公共属性。

更新 3：

很抱歉，Type1 和 Type2 是从 EntityObject 派生的（它们都是我的实体模型的一部分，而 Type1Collection 和 Type2Collection 实际上是这两个实体的 EntityCollection。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T05:16:49.133

你可以使用动态的。请注意，您将失去类型安全性。

```
var list1 = new List<bool>(){true,false};
var list2 = new List<int>(){1,2};

var typecollection = condition1 ? list1.Cast<dynamic>() : list2.Cast<dynamic>();
foreach (var value in typecollection)
{
    //then you can call a method you know they both have
    Debug.WriteLine(value.ToString());
} 
```

或者，如果它们共享一个通用接口，您可以直接转换为该接口。您将保持类型安全

```
var list1 = new List<bool>(){true,false};
var list2 = new List<int>(){1,2};

var typecollection = condition1 ? list1.Cast<IConvertible>() : list2.Cast<IConvertible>();
foreach (IConvertible convertible in typecollection)
{
    //we now know they have a common interface so we can call a common method
    Debug.WriteLine(convertible.ToString());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:56:49.387

鉴于 Jon Skeet 暗示使用 LINQ 的`Concat`方法和 OP 声明所涉及的类是`EntityObject`s，这是另一种可能的解决方案。这假设`EntityObject`子类被定义为**部分**类：

```
public partial class Type1 : EntityObject
{
    public int Type1ID { get; set; }
    public int Type1MasterID { get; set; }
    public String Notes { get; set; }
    public decimal Price { get; set; }
}

public partial class Type2 : EntityObject
{
    public int Type2ID { get; set; }
    public int Type2MasterID { get; set; }

    public String Notes { get; set; }
    public decimal Price { get; set; }
} 
```

这允许 OP 声明一个具有公共属性的接口，并让他的`EntityObject`子类实现该接口：

```
public interface IMyType
{
    String Notes { get; set; }
    decimal Price { get; set; }
}
public partial class Type1 : IMyType {}
public partial class Type2 : IMyType {} 
```

原来的代码变成了：

```
var query = (
    from type1var in type1Collection
    where condition1
    select (IMyType)type1var
   ).Concat(
    from type2var in type2Collection
    where !condition1
    select (IMyType)type2var
   );
foreach(var myType in query)
{
    myType.Notes = "note";
    myType.Price = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:18:25.270

您可以使用存储在字典中的谓词和动作来做到这一点。我建议在这里采取行动，因为代码片段似乎没有返回任何内容

```
public class IterationExample
{
    private readonly Dictionary<bool, Action> dictionary;

    public IterationExample()
    {
        dictionary = new Dictionary<bool, Action> { { true, CollectionOneIterator }, { false, CollectionTwoIterator } };
    }

    public void PublicMethod()
    {
        dictionary[condition]();
    }

    private void CollectionOneIterator()
    {
        foreach (var loopVariable in Type1Collection)
        {
            //Your code here
        }
    }

    private void CollectionTwoIterator()
    {
        foreach (var loopVariable in Type2Collection)
        {
            //Your code here
        }

    }
} 
```

通过这种方式，您的代码的可读性和可测试性得到了提高，同时也避免了冗长的方法。

编辑：

```
public class Entity
{
    public IList<string> Type1Collection { get; set; }
    public IList<string> Type2Collection { get; set; } 
}

public class ConsumingClass
{
    public void Example()
    {
        var entity = new Entity();
        entity.PublicMethod();
    }
}

public static class IterationExample
{
    private static readonly Dictionary<bool, Action<Entity>> dictionary;

    static IterationExample()
    {
        dictionary = new Dictionary<bool, Action<Entity>> { { true, CollectionOneIterator }, { false, CollectionTwoIterator } };
    }

    public static void PublicMethod(this Entity entity)
    {
        dictionary[condition]();
    }

    private static void CollectionOneIterator(Entity entity)
    {
        foreach (var loopVariable in entity.Type1Collection)
        {
            //Your code here
        }
    }

    private static void CollectionTwoIterator(Entity entity)
    {
        foreach (var loopVariable in entity.Type2Collection)
        {
            //Your code here
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T05:20:24.547

您可以为 type1 和 type2 创建一个基类型，将两个类之间的公共属性分组：

```
class MyBaseType {
   // Common properties
}

class Type1 : MyBaseType {
   // Specific properties
}

class Type2 : MyBaseType {
   // Specific properties
} 
```

然后，您可以执行以下操作：

```
IEnumerable<MyBaseType> collection;
if(condition1)
   collection = type1Collection;
else
   collection = type2Collection;

foreach(MyBaseType element in collection) {
   // Common logic
} 
```

编辑：正如西蒙在评论中指出的那样，如果足够的话，您应该使用接口而不是基本类型（即您不需要两种类型的特定实现）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T15:47:50.927

这不是一个很好的方法，但它至少会起作用。

```
 var type1Collection = new Collection<Type1>();
        var type2Collection = new Collection<Type2>();

        var condition1 = new Random().Next(0, 2) != 0;

        dynamic selectedCollection;
        if (condition1)
            selectedCollection = type1Collection;
        else
            selectedCollection = type2Collection;

        foreach (var typeVar in selectedCollection)
        {
            typeVar.Notes = "note";
            typeVar.Price = 1;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T19:14:57.577

我很惊讶没有其他人提出扩展方法：

```
public interface IMyType
{
    String Notes { get; set; }
    decimal Price { get; set; }
}

public static class MyTypeExtensions
{
    public static void MyLogic(this IMyType myType)
    {
        // whatever other logic is needed
        myType.Notes = "notes";
        myType.Price = 1;
    }
 } 
```

现在，您的原始类型只需要实现`IMyType`：

```
public class Type1 : IMyType
{
    public int Type1ID { get; set; }
    public int Type1MasterID { get; set; }

    public String Notes { get; set; }
    public decimal Price { get; set; }
}

public class Type2 : IMyType
{
    public int Type2ID { get; set; }
    public int Type2MasterID { get; set; }

    public String Notes { get; set; }
    public decimal Price { get; set; }
} 
```

那么原来的代码就变成了：

```
if (condition1)
{
    foreach (var type1 in type1Collection)
    {
        type1.MyLogic();
    }
}
else
{
    foreach (var type2 in type2Collection)
    {
        type2.MyLogic();
    }
} 
```

# php - 如何将复选框的值插入到数据库中？

> ID：14534074
> 
> 赞同：0
> 
> 时间：2013-01-26T05:10:28.060
> 
> 标签：php, mysqli

我在这里有关于我的复选框的代码，但是当我单击提交按钮时出现了一些错误。虽然它打印了我在复选框上选择的所有值，但是我在我的 sql 脚本上出现错误，说“警告：mysqli_query() 需要至少 2 个参数，1 个在 C:\xampp\htdocs\project\candidate\president2.php 中给出在第 21 行"。我只想保存我在数据库中选择的值。请帮助..

```
 <?php session_start(); ?>
         <?php
         //server info
          $server = 'localhost';
         $user = 'root';
         $pass = 'root';
        $db = 'user';

            // connect to the database
          $mysqli = new mysqli($server, $user, $pass, $db);

          // show errors (remove this line if on a live site)
               mysqli_report(MYSQLI_REPORT_ERROR);
           ?>
           <?php

           if ($_POST['representatives']){

         $check = $_POST['representatives'];
         foreach ($check as $ch){
           //this is my line 21 error. what i want here is to save the selected checkbox into my database but i got some error and i couldnt save it to my database
         mysqli_query("INSERT INTO sample (name) VALUES ('". $ch ."') ");
            echo  $ch. "<br>";
            }
            }
           ?>
     <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml">
      <html>
     <head>  
        <script type="text/javascript">
        <!--
    function get_representatives_value()
     {
      for (var i=0; i < document.list.representatives.length; i++)

      {
     if (document.list.representatives[i].value = true)
    {
    return document.getElementById('txt').innerHTML =document.list.representatives[i].value

    }
     }
     }

   //-->
    </script>
  title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="candidate.css" rel="stylesheet" type="text/css">
   </head>
   <body> <p id="txt"></p>
   <form name="list" action="president2.php" method="post" onSubmit="return get_representatives_value()">
<div id="form"> 
     <?php
    // get the records from the database
     if ($result = $mysqli->query("SELECT * FROM candidate_info WHERE position= 'representatives' AND department ='CCEITE' ORDER BY cand_id"))
        {
      // display records if there are records to display
        if ($result->num_rows > 0)
          {
           // display records in a table
        echo "<table border='1' cellpadding='10'>";

         // set table headers
         echo "<tr><th>Student ID</th><th>Candidate ID</td><th>Course</th><th colspan = '3'>Name</th></tr>";

        while ($row = $result->fetch_object())
                  {
         // set up a row for each record
        echo "<tr>";
      echo "<td>" . $row->cand_studid . "</td>";
  echo "<td>".$row->cand_id."</td>";
 echo "<td>" . $row->course . "</td>";
     echo "<td coslpan ='5'>" . $row->fname . " ". $row->mname ." ". $row->lname ." </td>";
  echo "<td><input type ='checkbox' name='representatives[]' id='". $row->studid ."' value='" . $row->fname . " ". $row->mname ." ". $row->lname .  "'onchange='get_representatives_value()' /></td>";
 echo "</tr>";
                                    }
echo "</table>";
                            }
         // if there are no records in the database, display an alert message
                            else
                            {
          echo "No results to display!";
                            }
                    }
           // show an error if there is an issue with the database query
            else
                    {
                 echo "Error: " . $mysqli->error;
                    }

           // close database connection
           $mysqli->close();

    echo "<input type='submit' name='representatives  value='Submit' />";

       ?> 
   </div>
 </form>
    </body>
   </html> 
```

这是我输出的预览，第一张图片是我选择了 2 个候选者，另一个是一个。

![在此处输入图像描述](../Images/78f64c6b2813cb45afa620ff7638ea98.png)

![在此处输入图像描述](../Images/57f7c08ac846b92ab784707592be628a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:21:38.540

正如它所说，该函数`mysqli_query()`需要至少两个参数。根据[PHP 文档](http://php.net/manual/en/mysqli.query.php)，第一个参数应该是：

> 由`mysqli_connect()`or返回的链接标识符`mysqli_init()`

其次是查询作为第二个参数。您似乎没有在代码中使用这些函数中的任何一个。看到您声明了一个 mysqli 对象，您可能打算`$mysqli->query()`改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:15:08.913

mysqli_query 函数需要 $mysqli 链接作为第一个参数。有两种方法可以修复错误。下面是**错误**

```
mysqli_query("INSERT INTO sample (name) VALUES ('". $ch ."') "); 
```

要解决此问题，只需将其更改为以下两个中的一个 >（我使用第一个选项，因为您已经在代码中的某个地方使用了它。）

```
$mysqli->query("INSERT INTO sample (name) VALUES ('". $ch ."') "); 
```

或者

```
 mysqli_query($mysqli, "INSERT INTO sample (name) VALUES ('". $ch ."') "); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T05:16:54.170

看看我的例子，我希望它会对你有所帮助..:-

```
<?php
if(isset($_POST['team']))
{
foreach($_POST['team'] as $value){
$insert=mysql_query("INSERT INTO team('team') VALUES ('$value')");
}
}
?>
<html>
<body>
<form method="post" action="lol.php">
<input type="checkbox" name="team[]" value="IN"> India<br />
<input type="checkbox" name="team[]" value="DK"> Dark <br />
<input type="checkbox" name="team[]" value="LA"> lolax <br />
<input type="submit" name="submit" value="submit">
</form>
</body>
</html> 
```

# c# - WPF 上的 PCL HttpWebRequest 用户代理

> ID：14534081
> 
> 赞同：1
> 
> 时间：2013-01-26T05:12:20.633
> 
> 标签：c#, httpwebrequest, user-agent, portable-class-library

我在我的`PCL`一个项目上使用了一个做很多 WebRequests 的项目。

我必须设置一个 UserAgent 否则我的 API 将不接受调用。这在 Windows Phone 8 和 Windows 8 中很好，因为它`HttpWebRequest`有一个 Headers 属性，所以你可以这样做：

```
var request = (HttpWebRequest)WebRequest.Create(cUrlLogin);
request.Headers[HttpRequestHeader.UserAgent] = cUserAgent;
request.Headers[HttpRequestHeader.Referer] = cUrlHalo; 
```

但是在 Windows 窗体和 WPF 中，我需要使用方法来设置它，然后才这样做：

```
var request = (HttpWebRequest)WebRequest.Create(cUrlLogin);
request.UserAgent = cUserAgent;
request.Referer = cUrlHalo; 
```

但是 PCL 不允许这样做，当我尝试另一种方式时，它只会抛出错误：

> 附加信息：必须使用适当的属性或方法修改“User-Agent”标头。

我已经尝试在构建条件中放置`WINDOWS_FORMS`或`WPF`，并使用.UserAgent/.Referer 放置一个if 语句来设置它，但无济于事。有没有人遇到这个并找到解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T00:30:12.813

这是一个较晚的响应，但可能对您或其他访问者仍然有用。功能：

```
public void SetHeader(HttpWebRequest Request, string Header, string Value) {
    // Retrieve the property through reflection.
    PropertyInfo PropertyInfo = Request.GetType().GetProperty(Header.Replace("-", string.Empty));
    // Check if the property is available.
    if (PropertyInfo != null) {
        // Set the value of the header.
        PropertyInfo.SetValue(Request, Value, null);
    } else {
        // Set the value of the header.
        Request.Headers[Header] = Value;
    }
} 
```

这会尝试设置一个属性，然后默认为一个标题。使用示例：

```
// Initialize a new instance of the HttpWebRequest class.
HttpWebRequest Request = WebRequest.Create(Address) as HttpWebRequest;
// Set the value of the user agent.
SetHeader(Request, "User-Agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/6.0)");
// Set the value of the referer.
SetHeader(Request, "Referer", Referer.AbsoluteUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:29:30.347

我最终只需要创建 2 个几乎相同代码的库。一个库作为 Win32 的类库和 WinRT 的可移植类库。

# javascript - MarionetteJS CompositeView ListenTo 未定义

> ID：14534085
> 
> 赞同：0
> 
> 时间：2013-01-26T05:13:10.907
> 
> 标签：javascript, backbone.js, marionette, backbone-views

我现在很坚持。我收到以下错误：

```
TypeError: listenTo is undefined    
return listenTo.call(this, evtSource, events, _.bind(callback, context)); 
```

我不明白为什么会发生此错误。我真的不知道listenTo 期望什么。当我更改`Backbone.Marionette.CompositeView`为`BackboneView`工作正常时。有任何想法吗？

请参见下面的代码：

```
define([
        "jquery",
        "backbone",
        "marionette",
        ],
function($, Backbone, Marionette){

    var CompositeView = Backbone.Marionette.CompositeView.extend({
      // The DOM Element associated with this view
      el: ".example",
      // View constructor
      initialize: function() {
          // Calls the view's render method
          this.render();
      },
      // View Event Handlers
      events: {

      },

      // Renders the view's template to the UI
      render: function() {
          // Setting the view's template property using the Underscore template method
          //this.template = _.template('ddd', {});
          // Dynamically updates the UI with the view's template
          this.$el.html('123123123123123123123123');
          // Maintains chainability
          return this;
      }

    });

    // Returns the View class
    return CompositeView;
  }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:08:39.300

`listenTo`是[Backbone.Events](http://backbonejs.org/#Events-listenTo)的一个特性。Backbone.View 和随后的 Marionette.View 包括 Backbone.Events 功能。您正在调用它，就好像它是全局定义的；因此，你得到`listenTo is undefined`.

你可以用类似的东西来调用它`myView.listenTo(model, 'change', myView.doSomething)`; 或者如果当前上下文是您想要进行监听的视图实例，`this.listenTo(object, 'eventName', this.doSomething)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:54:35.873

将主干更新到 v0.9.9 或更高版本。

[https://github.com/marionettejs/backbone.marionette/blob/master/upgradeGuide.md](https://github.com/marionettejs/backbone.marionette/blob/master/upgradeGuide.md)

和

[https://github.com/marionettejs/backbone.marionette/blob/master/changelog.md](https://github.com/marionettejs/backbone.marionette/blob/master/changelog.md)

# php - PDO 搞砸了我的 CSS / HTML 布局

> ID：14534094
> 
> 赞同：0
> 
> 时间：2013-01-26T05:14:43.733
> 
> 标签：php, html, mysql, css, pdo

我的一个网页在 MySQL_* 函数下具有完美的格式，当我将旧函数转换为 PDO 时突然变得混乱。问题是我的版权栏现在浮动在我的 MySQL 数据表上方，而它应该在页面底部。我不确定为什么会这样。任何帮助表示赞赏！

* * *

这是我认为可能是问题的文件部分：

```
<div id="content" style="float:center;background-image:url('http://tinyurl.com/bds4u2j');">

<ul class="menu">
<li>
<?php
if(!isset($_COOKIE['username'])){
echo "Welcome, guest!";
}else{
echo "Welcome, " . $_COOKIE['username'];
}
?>
</li>
<li><br></li>
<li><a class="item" href="index.html">Home</a></li>
<li><a class="item" href="classes.html">Classes</a></li>
<li><a class="item" href="contact.html">Contact</a></li>
<?php
if(!isset($_COOKIE['username'])){
echo '<li><a class="item" href="login.html">Login</a></li>';
}else{
echo '<li><a class="item" href="upload.html">Upload</a></li>';
echo '<li><a class="item" href="password_protect.php?logout=1">Logout</a></li>';
}
?>
</ul>

<center><h1>Mr. Stanford's first period</h1></center>
<br>

  <center><h3>Your class files are available for download below</h3></center>
  <br>
  <br>
  <center>
  <?php
  echo "<table border='1'>
<tr>
<th>Filename</th>
<th>Description</th>
<th>Download</th>";
IF(isset($_COOKIE["username"]))
{
echo "<th>Delete</th>","</tr>";
}
ELSE
{
echo "</tr>";
}
try{
  $dbh = new PDO('mysql:host=$host;port=$port;dbname=$dbname','$username','$password');
  foreach($dbh->query('SELECT * from period1') as $row) {
echo "<tr>";
  echo "<td>" . $row['Filename'] . "</td>";
  echo "<td>" . $row['Description'] . "</td>";
    echo "<td><a href = ". $row['File'] ." ><button>Download</button></a></td>";
    IF(isset($_COOKIE["username"]))
       {
       echo "<td><a href = 'deletefile.php?$s_id=". $row['s_id'] ."'><button>Delete</button></a></td>","</tr>";
       }
       ELSE
       {
       echo "</tr>";
       }
       echo "</table>";
       }
  $dbh=null;
} catch (PDOException $e) {
  print "<br>ERROR: " . $e->getMessage() . "<br/>";
  die();
  }

$dbh=null;
?>

  </center>
  <br>
  <br>
  <br>
</div>

<div id="footer" style="background-color:#99FF33;clear:both;text-align:center;">
Copyright © David Schilpp 2013, All Rights Reserved
</div> 
```

再次感谢任何可以帮助我调试此问题的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:27:03.413

我猜你`table`的没有关闭。请参阅有关问题的评论。

当你遇到这种问题（破碎的html）时，你应该首先分析生成的html。

您可以右键单击页面并选择`View page source`。

您也可以使用免费提供的工具。

与往常一样，[StackOverflow 是寻找答案和新东西的好地方](https://stackoverflow.com/questions/2224055/show-html-errors-in-google-chrome)

# css - 增加按钮的字体大小

> ID：14534097
> 
> 赞同：1
> 
> 时间：2013-01-26T05:15:49.567
> 
> 标签：css, jsp, user-interface, struts, struts-1

我有一个用 struts 1.2 制作的应用程序，它可以通过桌面浏览器和 Android 浏览器访问。DEsktop 浏览器的布局很好，但在 Android 浏览器中的布局有问题。不知何故，我设法改变了 UI 的外观和感觉，但仍坚持使用按钮字体。

下面是我为按钮编写的代码：

```
<html:submit property="action" value="Login" style="width: 150px;height: 80px;"></html:submit> 
```

按钮外观很好，但按钮的字体`Login`非常小。我尝试`font: 100px;`在`style`属性中添加，但没有奏效。

关于如何增加`font`提交按钮文本大小的任何建议？

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:20:27.577

[`font`属性](http://www.w3.org/TR/CSS21/fonts.html#propdef-font)值必须是指示系统字体的单个关键字或至少包含字体大小和字体系列，如`font: 100% Calibri`. 如果您只想设置字体大小，请不要使用`font`简写，而是使用特定属性`font-size`，例如`font-size: 30px`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:32:29.470

`font`css 属性不是您想要的。请`font-size: 100px`改用。

事实上，`font`您可以指定多个字体相关的属性。[文档](http://www.w3schools.com/css/css_font.asp)

# c - 为什么在 C 中我的字符串后面会打印数字“7”？

> ID：14534098
> 
> 赞同：2
> 
> 时间：2013-01-26T05:15:50.193
> 
> 标签：c, string, c-strings

我需要在数组中定义字符并打印字符串……但它总是打印为 string7（在本例中为 test7）……我在这里做错了什么？

```
#include <stdio.h>
int main() {
    char a[]={'t','e','s','t'};
    printf("%s\n",a);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T05:16:54.147

> **为什么会有这种行为？**

因为你没有`\0`终止你的数组，所以你得到的是**Undefined behavior**。

> **幕后可能会发生什么？**

尝试打印字符串，`printf`直到遇到 a `\0`，在您的情况下，字符串从未`\0`终止，因此它随机打印，直到遇到 a `\0`。
请注意，超出分配内存范围的读取是未定义的行为，因此从技术上讲，这是一个 UB。

> **你需要做什么来解决问题？**

你需要：

```
char a[]={'t','e','s','t',`\0`}; 
```

或者

```
char a[]="test"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T05:16:40.087

因为您的“字符串”或`char[]`不是以空值结尾的（即以 结尾`\0`）。

然后，`printf("%s", a);`将尝试打印从开头开始的每个字符`a`并继续打印，直到看到`\0`.

那`\0`在您的数组之外，并且取决于您的程序内存的初始状态，您几乎无法控制。

要解决此问题，请使用

```
char a[]={'t','e','s','t','\0'}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T05:17:40.457

您打印的字符串必须为空终止...所以您的字符串声明应该是，

```
char a[]={'t','e','s','t', '\0'}; 
```

# javascript - 将 JavaScript 正则表达式合二为一

> ID：14534109
> 
> 赞同：0
> 
> 时间：2013-01-26T05:17:14.990
> 
> 标签：javascript, regex

我想将这些 JavaScript 正则表达式组合成一个正则表达式。我怎样才能做到这一点？我试过使用'|' 字符串之间的运算符，但这不起作用。

```
var r1 = new RegExp(id + '\\s*===\\s*TRUE', 'gm');
var r2 = new RegExp(id + '\\s*===\\s*true', 'gm');
var r3 = new RegExp(id + '\\s*===\\s*FALSE', 'gm');
var r4 = new RegExp(id + '\\s*===\\s*false', 'gm');
var r5 = new RegExp(id + '\\s*!==\\s*TRUE', 'gm');
var r6 = new RegExp(id + '\\s*!==\\s*true', 'gm');
var r7 = new RegExp(id + '\\s*!==\\s*FALSE', 'gm');
var r8 = new RegExp(id + '\\s*!==\\s*false', 'gm'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:21:03.273

试试这个：

```
var r = new RegExp(id+"\\s*[!=]==\\s*(?:true|false)","gi"); 
```

我删除了`m`修饰符，因为它不适用于此处，并添加了`i`修饰符以处理所有大小写选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:22:32.290

在这种特定情况下

```
new RegExp(id + '\\s*[!=]==\\s*(?:TRUE|true|false|FALSE)', 'gm') 
```

应该做的伎俩。

在一般情况下，使用 '|' 连接字符串 应该管用。

如果您还想接受 'fAlSe' 和类似的字符串，@Kolink 的答案会更好。

# ruby - Ruby on Rails 异常

> ID：14534110
> 
> 赞同：2
> 
> 时间：2013-01-26T05:17:28.070
> 
> 标签：ruby, ruby-on-rails-3

我是一名初级 Rails 开发人员，被建议使用 Class.find(id) 来查询数据库，而不是我以前使用的 Class.find_by_id(id)。我被告知的原因是因为前者会引发异常，而后者会返回 nil。我意识到会发生这种情况，但我想知道这样做的高级概念逻辑是什么。为什么我想要例外？这是一个 Rails 标准，我总是更喜欢返回异常而不是 nil 的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:00:04.433

您通常需要例外，因为您通常`Foo.find(id)`基于来自用户的数据输入进行操作，例如单击链接。

例如，您向用户显示项目列表。有这样的链接：

```
http://example.com/items/100
http://example.com/items/101
http://example.com/items/102

```

用户单击第一个链接，并希望看到项目 100。

您的代码执行此操作：

```
 Item.find(100) 
```

您希望找到该项目，因为应用程序创建了项目链接。如果该项目不存在，您会感到惊讶。

（可能会出现意外情况：可能该项目已被删除，或者黑客正在发送丢失的 ID 等。使用例外可以帮助您将其作为例外情况处理。）

为此，异常优先于 nil，因为您希望代码立即失败，这样您就不会意外地将 nil 发送到其他方法。

Ruby nil 对象可能会令人困惑，因为它们的评估结果为假，还因为 nil.id == 4 因为 Ruby 使用 C 的方式。错误消息显示为“警告：Object#id 将被弃用”或“4:Fixnum 的未定义方法” ”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:59:51.870

一般来说，Nils 作为 Ruby 中的返回类型是有问题的。Gary Bernhardt有一个很棒的（付费）[截屏视频](https://www.destroyallsoftware.com/screencasts/catalog/how-and-why-to-avoid-nil)，它解释了为什么要避免从方法返回 nil，但简而言之：当一个方法返回 nil，并且该 nil 通过一系列方法调用传递并且某处出现问题时，*很难*弄清楚实际问题发生在哪里。

比如说，你有这样的东西：

```
foo_model = MyModel.find_by_name('foo')
# some more lines of code
do_something(foo_model) 
```

和一个方法：

```
def do_something(model)
  # some stuff stuff
  some_other_method(model)
end 
```

现在，如果`MyModel.find_by_name('foo')`返回`nil`，该 nil 将继续执行而不会出现任何错误，直到它实际必须做某事。比如说，在 中`some_other_method`，你实际上尝试在 上调用一些东西`model`，比如说`model.save`，你会得到一个错误：

```
undefined method 'save' for nil:NilClass (NoMethodError) 
```

跟踪将带您备份方法调用，但它*不会*提及实际上有问题的行，您在其中分配`MyModel.find_by_name('foo')`（评估为`nil`）到`foo_model`.

您可以想象，在实际应用程序中，代码可能要复杂得多，返回 nil 会使找出错误来源变得更加困难。

相反，异常会立即告诉您问题出在哪里，并且跟踪将返回到发生问题的行。这是一个原因（我想还有其他原因）为什么总的来说返回`nil`不是一个好主意。

希望有帮助。

# forms - 您可以将 Chosen 与动态创建的表单元素一起使用吗？

> ID：14534115
> 
> 赞同：0
> 
> 时间：2013-01-26T05:17:58.717
> 
> 标签：forms, dynamic, jquery-chosen

我创建了一个包含两个选择框元素的简单表单。我还有一个按钮，可以根据用户的判断动态添加这些选择框。选择框选项会很长，所以我应用了 jQuery Chosen 插件来更有用。

在使用 jQuery 克隆动态添加新元素之前，一切正常。我无法在我的新元素选择框中选择任何选项，它们也带有先前的结果。

在搜索论坛，其他人已经“重置”选择后选择，通过调用：`$("#form_field").trigger("liszt:updated");`。我也试过这个，但它只会清除所有选择（我不想要）并继续冻结下拉动作。

任何人都有使用带有动态元素的选择（或任何其他自动完成类型的选择框增强功能）的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:12:01.823

找到了一个可行的解决方案——尽管没有使用 Chosen 插件。

我通过将选择框替换为与基本 jQueryUI 自动完成插件相关的输入字段来更改我的动态创建的表单元素。这是他们实现的链接：http: [//jqueryui.com/autocomplete/#default](http://jqueryui.com/autocomplete/#default)。

主要区别在于，在这种情况下，选择“选项”被列为框查找自动完成选项的来源。我的清单有 70 项，所以初始设置需要一些时间。

jQuery 文本通常如下所示：

```
$("input#search").autocomplete({

    source: [item1, item2, item3, item 4, ... item5]); 
```

# entity-framework - 多种类型的用户通知的数据模型

> ID：14534119
> 
> 赞同：4
> 
> 时间：2013-01-26T05:18:38.120
> 
> 标签：entity-framework, ef-code-first, data-modeling

我试图弄清楚如何为通知建模。这是我尝试过的。

```
public class NotificationType
{
    public int NotificationTypeID { get; set; }
    public string Type { get; set; }
    public string Action { get; set; }
}

public class Notification
{
    public int NotificationID { get; set; }
    public bool ReadStatus { get; set; }
    public DateTime DateCreated { get; set; }
    [ForeignKey("User")]
    public int UserID { get; set; }
    [ForeignKey("NotificationType")]
    public int NotificationTypeID { get; set; }

    public int CommentID { get; set; }
    public int ProjectID { get; set; }

    public Comment Comment { get; set; }
    public Project Project { get; set; }
    public NotificationType NotificationType { get; set; }
    public User User { get; set; }
} 
```

坦率地说，我觉得我仍然不知道自己在做什么，但是让我告诉你我想做什么，如果这是一个坏主意，请告诉我，如果不是，请告诉我我是如何做到的。

我有`Notifications`用于与 a 相关的操作`Comment`，`Reply`并且`Project`- 这就是我拥有所有这些导航属性和字段的原因。我想基本上使用`NotificationType`来确定它是什么，然后使用适当的 ID 字段来获取信息以向用户显示通知。

第一个问题，我似乎无法将这些 ID ( `CommentID` `ProjectID`) 字段设为 Nullable，因此我不必总是拥有它们。

如何使用数据注释和/或流利的 api 使它们可以为空，或者更好地设计我的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:06:05.753

使它们可以为空属性

```
public class Notification
{
    public int NotificationID { get; set; }
    public bool ReadStatus { get; set; }
    public DateTime DateCreated { get; set; }
    [ForeignKey("User")]
    public int UserID { get; set; }
    [ForeignKey("NotificationType")]
    public int NotificationTypeID { get; set; }

    public int? CommentID { get; set; }
    public int? ProjectID { get; set; }

    public Comment Comment { get; set; }
    public Project Project { get; set; }
    public NotificationType NotificationType { get; set; }
    public User User { get; set; }
} 
```

然后使用fluent API

```
modelBuilder.Entity<Notification>().HasOptional(n => n.Comment).WithMany()
    .HasForeignKey(n => n.CommentID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T01:03:46.400

我发现这是一种复杂但完整的通知系统： http: [//library.blackboard.com/ref/df5b20ed-ce8d-4428-a595-a0091b23dda3/Content/Mini_TOCs/mt_admin_app_system_manage_comm_notify_frame.htm](http://library.blackboard.com/ref/df5b20ed-ce8d-4428-a595-a0091b23dda3/Content/Mini_TOCs/mt_admin_app_system_manage_comm_notify_frame.htm) 我认为可以借鉴很多好主意从中。

# r - z 堆叠直方图系列

> ID：14534123
> 
> 赞同：0
> 
> 时间：2013-01-26T05:19:15.983
> 
> 标签：r

我有一个人口的时间序列直方图，我想在一个图中表示。我试图避免将所有直方图放在一个 x,y 图中，这会变得非常混乱。相反，我想制作一个图，绘制一系列只有 x 轴的直方图（对于我的数据，形状和 x 值很重要），每个直方图垂直堆叠在另一个之上。换句话说，我可以制作一堆单独的直方图，将它们导出到 Illustrator，然后将它们放在一个垂直的行中，并将垂直的“z 轴”标记为时间，但似乎应该能够在 R 中做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:05:53.057

在函数`hist`中，可以设置`freq=FALSE`为以绘制密度而不是频率。这将以将注意力集中在形状而不是幅度上的方式缩放直方图的 y 轴。但是，即使使用默认频率直方图，您的绘图也会具有相同的形状。

这是一个示例图，其中您的设备分为 4 行和 1 列。每个直方图都有不同的分布，但所有图都对直方图使用相同的分箱（即`breaks`参数）：

### 示例 1：

```
set.seed(1)
f1 <- rnorm(100, mean=0, sd=1)
f2 <- rnorm(100, mean=3, sd=3)
f3 <- rnorm(100, mean=4, sd=1)
f4 <- rnorm(100, mean=7, sd=3)

breaks <- pretty(c(f1, f2, f3, f4), n=20)
x11(width=4, height=8)
op <- par(mfcol=c(4,1))
hist(f1, freq=FALSE, breaks=breaks)
hist(f2, freq=FALSE, breaks=breaks)
hist(f3, freq=FALSE, breaks=breaks)
hist(f4, freq=FALSE, breaks=breaks)
par(op) 
```

以下内容可能更符合您的兴趣 - 每个连续直方图都可能是一个 time `t`。通过稍微减少边距，您可以跟踪形状随时间的进展：

### 示例 2：

```
set.seed(1)

N <- 100
M <- 7
MEAN <- c(1:M)
SD <- MEAN*0.2+1
RES <- list()

for(i in seq(M)){
    RES[[i]] <- rnorm(N, mean=MEAN[[i]], sd=SD[[i]])
}

breaks <- pretty(unlist(RES), n=20)
x11(width=4, height=10)
op <- par(mfcol=c(M,1), mar=c(1,3,0,0), oma=c(3,2,1,1))
for(i in seq(M)){
    h1 <- hist(RES[[i]], breaks=breaks, plot=FALSE)
    plot(h1$mids, h1$densit, t="n", xlab="", ylab="", xaxt="n")
    grid()
    lines(h1$mids, h1$densit, t="S")
    text(par()$usr[1], par()$usr[3]+(par()$usr[4]-par()$usr[3])*0.9, labels=paste("t", i), pos=4)
    if(i == M){
        axis(1)
    } else {
        axis(1, labels=FALSE)
    }
}
mtext("Density", outer=TRUE, side=2, line=0)
par(op) 
```

![在此处输入图像描述](../Images/76078f2fe9c71630626b806436985fbb.png)

# php - 如何在magento中动态更改价格值

> ID：14534124
> 
> 赞同：0
> 
> 时间：2013-01-26T05:19:17.517
> 
> 标签：php, javascript, ajax, magento, magento-1.7

我是 Magento 的初学者。我想使用 ajax 动态更改产品详细信息页面中的价格值。同时我也想在购物车页面中计算这个价格值

参考这个网址： [http ://dev.tangoprint.ch/magento/index.php/plakate/a1.html](http://dev.tangoprint.ch/magento/index.php/plakate/a1.html)

此页面包含一个计算器来计算价格值，并且我也想动态更改购物车页面中的价格。请参考这张图片： ![在此处输入图像描述](../Images/41b8efdf1ae2ac19107f118c112e84fb.png)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:03:50.433

*第 1 步 - 在 page.xml (app/design/frontend/mytheme/default/layout/page.xml) 中包含 jQuery*

```
<action method="addJs"><script>jquery/jquery-1.5.2.no-conflict.min.js</script></action> 
```

*第 2 步 - 添加价格计算 php 页面 (/myscripts/ajaxPriceCal.php)*

```
<?php
include_once '../app/Mage.php';
Mage::app();

if(isset($_POST['qty']) && !empty($_POST['qty'])){

    $product_id = $_POST['pid'];
    $my_qty = $_POST['qty'];
    $my_price = 0;

    $_product = Mage::getModel('catalog/product')->load($product_id);

    $_tierPrices = $_product->tier_price;

    $_tierPrices = array_reverse($_tierPrices);

    for($i=0; $i < count($_tierPrices); $i++){
        if($my_qty >= $_tierPrices[$i]['price_qty']){
            $my_price = $_tierPrices[$i]['price'];        
            break;
        }
    }

    $calculated_price = $my_price*$my_qty;

    echo number_format($calculated_price,2,'.',',');
}
?> 
```

*第 3 步 - 修改等级价格数量文本选项页面（app/design/frontend/mytheme/default/template/catalog/product/view/options/type/text.phtml）*

将以下脚本添加到 text.phtml 页面的开头

```
<script type="text/javascript">
$j = jQuery.noConflict();

function get_total_qty(){
    var qty = parseInt(0);
    var qty = $("#calculator_qty").val();
    /*
    * AJAX call
    */
    var quantity = parseInt($j('#qty').val()) + parseInt(qty); // get final quantity
    var product_id = $j('#prod_id').val(); // get product id
    $j.post("/magento/scripts/ajaxPriceCal.php", { qty: quantity, pid: product_id },
        function(data){
            $j('.price').html(data);
    });

}

$j(document).ready(function(){
    $j('.calculate').click(function(){
        if($("#calculator_qty").val()){
            get_total_qty();
        }
    });    
});
</script> 
```

这将对您有所帮助。您正在更改`price`价值，当您这样做时，`add to cart`它会反映在购物车中。

# android - Android - 使用 Admob 进行图像查看的广告

> ID：14534127
> 
> 赞同：-1
> 
> 时间：2013-01-26T05:19:23.643
> 
> 标签：android, image, android-layout, admob

在我的安卓应用程序中，我有一个图像视图和返回和下一步按钮，如下所示。它工作正常。现在我想在按钮下方或按钮上方但图像下方绘制一个 admob 广告。无论如何，我不希望图像被广告或按钮裁剪。这是具有图像和两个按钮的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:id="@+id/Linear1">

    <RelativeLayout android:id="@+id/relativeLayout1"

        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:orientation="vertical">

        <ImageView android:id="@+id/katha_image"
        android:layout_height="wrap_content" android:layout_width="wrap_content"
         android:layout_marginBottom="@dimen/menu_item_size"></ImageView>

        <LinearLayout android:layout_width="fill_parent"
            android:orientation="horizontal" android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" android:layout_gravity="bottom|center">
            <Button android:id="@+id/Button_Back" android:layout_width="fill_parent"
                android:layout_height="wrap_content" android:layout_weight="50"
                android:layout_alignParentBottom="true"

                android:layout_alignParentLeft="true" android:text="@string/back"
                android:textSize="@dimen/button_size" android:minWidth="75px"></Button>
            <Button android:text="@string/next" android:textSize="@dimen/button_size"
                android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:layout_weight="50" android:id="@+id/Button_Next"></Button>

        </LinearLayout>

    </RelativeLayout>

</LinearLayout> 
```

请建议。

个人电脑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:07:28.503

您将希望在 RelativeLayout 中使用`android:layout_above`或`android:layout_below`与您的元素一起使用，以免它们重叠。

```
<com.google.ads.AdView xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
                       android:id="@+id/adView"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       ads:adUnitId="MY_AD_UNIT_ID"
                       ads:adSize="BANNER"
                       ads:loadAdOnCreate="true"
                       android:layout_above="@id/linearLayout1"/>
<!-- Assumes your LinearLayout with buttons have id "linearLayout1" --> 
```

然后添加`android:layout_above="@id/adView"`您的 ImageView 以使其显示在广告上方。

# javascript - 确定 li 中的“a”元素是否具有带有 jquery 的 CSS 类

> ID：14534129
> 
> 赞同：2
> 
> 时间：2013-01-26T05:20:06.150
> 
> 标签：javascript, jquery, nav

我想根据li 元素中的**元素和****li 元素****中**的子菜单类执行一些操作。如果元素有 2 个类，`current submenu`我想在**$(".menu").mouseenter**事件发生时执行一些操作。如果 li 元素没有这个，请执行其他操作....

```
 <nav id="id"> 
    <ul>
        <li><a href="index.html">index</a></li>
        <li><a href="serviceios.html" class="current submenu">Services</a></li>
        <li><a href="clients.html" >Clients</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="contact.html" >Contact</a></li>
        <ul class="menu">
            <li><a href="#" class="documents" data-icon="&#xe000">1</a></li>

            <li><a href="#" class="messages" data-icon="&#xe001">2</a></li>

            <li><a href="#" class="signout" data-icon="&#xe002">3</a></li>
        </ul>
    </ul>
</nav> 
```

我有：

```
$(".menu").mouseenter(
    function() {
        $(".menu").toggleClass('hover');
        $(".submenu").css("-webkit-border-radius", "8px 8px 0 0");
        $(".submenu").css("-moz-border-radius", "8px 8px 0 0");
        $(".submenu").css("border-radius", "8px 8px 0 0");
        if( $('li').hasClass('current submenu') )
            /*...*/
        else
            $(".submenu").toggleClass('current');
    }
); 
```

该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:28:16.703

这个 jQuery 对象：

```
$("li a.current.submenu") 
```

将选择所有带有这些类的标签，并且只选择那些标签。您可以使用该 jQuery 对象将任何操作仅限于这些标签。

或者，如果您想遍历所有`li a.submenu`项目并在当前类存在时执行一件事，如果不存在则执行另一件事，您可以这样做：

```
$("li a.submenu").each(function() {
    if ($(this).hasClass("current")) {
        // do something here when current class is present
    } else {
        // do something here when current class is not present
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T05:38:33.490

您正在设置`class`中的`a`元素`li`，因此`a`将拥有该类。

用这个。这将`a`选择.`submenu current``li`

```
if( $('li a.submenu').hasClass('current') ) {
    console.log("Got an li");
    /* Do stuff here */
} else {
    $(".submenu").toggleClass('current');
} 
```

如果您确定一次只有一个带有`submenu`类的元素，那么您也可以这样做：

```
if( $('.submenu').hasClass('current') ) { 
```

[现场演示](http://jsfiddle.net/jFen9/)

# python - 图例未出现在 Matplotlib 堆积面积图中

> ID：14534130
> 
> 赞同：26
> 
> 时间：2013-01-26T05:20:10.070
> 
> 标签：python, numpy, matplotlib

我正在使用pyplot 的[plt.fill_between()](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.fill_between)方法创建一个堆叠的线/面积图，在尝试了这么多事情之后，我仍然无法弄清楚为什么它没有显示任何图例或标签（即使我在代码）。这是代码：

```
import matplotlib.pyplot as plt
import numpy

a1_label = 'record a1'
a2_label = 'record a2'

a1 = numpy.linspace(0,100,40)
a2 = numpy.linspace(30,100,40)

x = numpy.arange(0, len(a1), 1)

plt.fill_between(x, 0, a1, facecolor='green')
plt.fill_between(x, a1, a2, facecolor='red')
plt.title('some title')
plt.grid('on')
plt.legend([a1_label, a2_label])
plt.show() 
```

这是生成的图像（请注意，图例显示的是空框而不是标签）： ![顶部的空图例框](../Images/ee3180f6389a6cc556ab530064a07e3a.png)

帮助！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-26T07:23:00.343

该`fill_between()`命令会创建一个不受该命令支持的 PolyCollection `legend()`。

因此，您将不得不使用另一个 matplotlib 艺术家（与 兼容`legend()`）作为代理，而不将其添加到轴（因此代理艺术家不会在主轴上绘制）并将其提供给图例函数。（有关更多详细信息，请参阅[matplotlib 图例指南](http://matplotlib.org/users/legend_guide.html)）

在您的情况下，下面的代码应该可以解决您的问题：

```
from matplotlib.patches import Rectangle

p1 = Rectangle((0, 0), 1, 1, fc="green")
p2 = Rectangle((0, 0), 1, 1, fc="red")
legend([p1, p2], [a1_label, a2_label]) 
```

![图片](../Images/f3aae6b0f5e67b837aca1c6b16d6767d.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-26T17:33:38.583

gcalmettes 的回答是一个有益的开始，但我希望我的图例能够选择堆栈图自动分配的颜色。我是这样做的：

```
polys = pyplot.stackplot(x, y)
legendProxies = []
for poly in polys:
    legendProxies.append(pyplot.Rectangle((0, 0), 1, 1, fc=poly.get_facecolor()[0])) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-06-13T02:26:57.337

另一种可以说更简单的技术是绘制一个空数据集，并使用它的图例条目：

```
plt.plot([], [], color='green', linewidth=10)
plt.plot([], [], color='red', linewidth=10) 
```

如果您也有图例的其他数据标签，这很有效：

![在此处输入图像描述](../Images/bfe9f51ef7b005da37ad60ea2e1208c7.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-03T13:42:43.737

只是在我寻找它时提供有关此问题的更新。在 2016 年，PolyCollection 已经提供了对 label 属性的支持，如您所见：

[https://github.com/matplotlib/matplotlib/pull/3303#event-182205203](https://github.com/matplotlib/matplotlib/pull/3303#event-182205203)

# ios - UIStoryBoard 加载 rootController

> ID：14534138
> 
> 赞同：0
> 
> 时间：2013-01-26T05:21:54.700
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uistoryboard

我的应用程序中有 UIStoryBoard 方法，它具有以下模式的屏幕：

**UINavigationController** -> MyMainController -> UITabBarController-> UINavigationController -> MyHomeController

从 MyHomeController 有一个 UIButton 和它的动作是

UINavigationController -> MyDetailsController

现在，我想从 MyDetailsController 回到 MyMainController。我面临的问题是我没有以黑色突出显示 UINavigationController 以从 MyDetailsController 访问。

此外，UIStoryBoard 不必基于 Identifier 获取 UIViewController。

它有但实例化了一个 UIViewController，这不是一个更好的解决方案。

```
- (id)instantiateViewControllerWithIdentifier:(NSString *)identifier 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:28:00.150

Uitabbar控制器首先。然后添加 uinavigation 控制器，然后添加您选择的视图控制器作为导航控制器的根控制器

这篇文章有很好的图片来显示这个问题

[使用 UITabController 时将数据传递给 UIViewControllers 的一般方法](https://stackoverflow.com/questions/14383156/general-way-to-pass-data-to-uiviewcontrollers-when-using-a-uitabcontroller/14383826#comment20013888_14383826)

# php - How do I store a block of html (with embeded PHP) in a PHP variable?

> ID：14534147
> 
> 赞同：1
> 
> 时间：2013-01-26T05:23:04.637
> 
> 标签：php, html

I am new to wordpress themes and PHP. (I don't believe this is specific to WP) I would like to know the best way to store a block of HTML (with embeded PHP code) in a PHP variable.

```
<?php
function rfttc_insert_nav_menu ($position){
$poswanted = 'above';
$nav_code = 
    '<nav id="site-navigation" class="main-navigation" role="navigation">
        <h3 class="menu-toggle"><?php _e( \'Menu\', \'twentytwelve\' ); ?></h3>
        <a class="assistive-text" href="#content" title="<?php esc_attr_e( \'Skip to content\', \'twentytwelve\' ); ?>"><?php _e( \'Skip to content\', \'twentytwelve\' ); ?></a>
        <?php wp_nav_menu( array( \'theme_location\' => \'primary\', \'menu_class\' => \'nav-menu\' ) ); ?>
    </nav><!-- #site-navigation -->'

if($position == $poswanted)
    return $nav_code;
}
?> 
```

Reading through many questions here leads me to believe that nowdoc and heredoc are not good choices. I have tried single quotes and escaping the single quotes inside. Same with double quotes. Both attempts resulted in error messages.

Any help here would be appreciated.

**EDIT*** The following code is what finally worked.

```
<?php
function rfttc_insert_nav_menu ($position){
    $poswanted = 'below';
    if($position == $poswanted){?>
        <nav id="site-navigation" class="main-navigation" role="navigation">
        <h3 class="menu-toggle"><?php __( 'Menu', 'twentytwelve' )?> </h3>
        <a class="assistive-text" href="#content" title="<?php
        esc_attr_e( 'Skip to content', 'twentytwelve' );
        ?>"><?php  _e( 'Skip to content', 'twentytwelve' );?>"</a>
        <?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu' ) );?>
        </nav><!-- #site-navigation -->
        <?php
    }
}
?> 
```

Thanks to TJohnW for pointing me in the right direction: processing the inline PHP instead of trying to insert it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:41:22.030

I think I know what you are trying to do here. Give this a shot.

```
<?php
function rfttc_insert_nav_menu ($position){
   $poswanted = 'above';
   $nav_code = 
  '<nav id="site-navigation" class="main-navigation" role="navigation">
   <h3 class="menu-toggle">'. _e( 'Menu', 'twentytwelve' ) . '</h3>
   <a class="assistive-text" href="#content" title="' . esc_attr_e( 'Skip to content', 'twentytwelve' ) . '">' . _e( 'Skip to content', 'twentytwelve' ) . '</a>' . wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu' ) ) . '</nav><!-- #site-navigation -->';

  if($position == $poswanted) return $nav_code;
}
?> 
```

# php - Simple Caching code for PHP Pages Fails - How to invalidate cache when form is Submitted

> ID：14534156
> 
> 赞同：2
> 
> 时间：2013-01-26T05:24:46.900
> 
> 标签：php, caching

```
<?php
// cache - will work online - not locally
// location and prefix for cache files
define('CACHE_PATH', "siteCache/"); 

// how long to keep the cache files (hours)
define('CACHE_TIME', 12); 
// return location and name for cache file 
function cache_file() 
{ 
    return CACHE_PATH . md5($_SERVER['REQUEST_URI']); 
}

// display cached file if present and not expired 
function cache_display() 
{ 
    $file = cache_file(); 
    // check that cache file exists and is not too old 
    if(!file_exists($file)) return; 
    if(filemtime($file) < time() - CACHE_TIME * 3600) return; 
    // if so, display cache file and stop processing
    readfile($file);
    exit; 
} 

// write to cache file 
function cache_page($content) 
{ 
    if(false !== ($f = @fopen(cache_file(), 'w'))) { 
        fwrite($f, $content);
        fclose($f); 
    } 
    return $content; 
} 

// execution stops here if valid cache file found
cache_display(); 

// enable output buffering and create cache file 
ob_start('cache_page');
?> 
```

This is the cache code that I am using in a dynamic website in db file. And every page contains this code at top.

```
<?php session_start();
include("db.php"); ?> 
```

Pages are being cached and its working but on form submission, on user login, on variable passing through pages, nothing is happening. Old pages are being displayed. How do I use this caching code so that it may work but site remain functional as well.

I wonder how wordpress plugins do it. Wp Super Cache and W3T Cache cache everything, yet blog remains functional. Should I selectively use it at parts of website.

Like this:

```
<?php
// TOP of your script
$cachefile = 'cache/'.basename($_SERVER['SCRIPT_URI']);
$cachetime = 120 * 60; // 2 hours

// Serve from the cache if it is younger than $cachetime
if (file_exists($cachefile) && (time() - $cachetime < filemtime($cachefile))) {
    include($cachefile);
    echo "<!-- Cached ".date('jS F Y H:i', filemtime($cachefile))." -->";
    exit;
}

ob_start(); // start the output buffer
// Your normal PHP script and HTML content here
// BOTTOM of your script
$fp = fopen($cachefile, 'w'); // open the cache file for writing
fwrite($fp, ob_get_contents()); // save the contents of output buffer to the file
fclose($fp); // close the file
ob_end_flush(); // Send the output to the browser
?> 
```

But it will not work as well, because its about pageURL (whole page caching), not the selective content from page.

Please advise. Is there any easy script do do this. Pear::Cache_Lite seems good but its looks difficult to implement.

Update: I have used Cache_Lite. Its the same. Caches everything or included php file. There are few configuration options to play with. But if used as a whole, it will also ignore get, post, session data updates...and will show previous cached pages unless they are deleted.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:36:04.213

I think you could separate display from logic.

I mean, change the action attribute of the form and point it to a php that does not have cache logic (and you must check the referer or other parameter, using tokens or sessions, or something, to avoid security issues like CSRF).

Other thing that I want to point out is you should look to cache only the most visited pages (i.e. the homepage), generally you don't have a "one size fits all" with caching, and it is better not to worry about pages that don't have speed/load issues. Or it may be better to cache the data if your speed issues comes from a database query (you should profile your application before implementing caching).

Other approach that migth work is checking the request method and disable the cache if it is post (given that all your forms use the POST method) using `$_SERVER['REQUEST_METHOD'] == 'POST'`.

# objective-c - 完全重置 OS X Mountain Lion 的 Twitter/Facebook 应用程序权限

> ID：14534159
> 
> 赞同：2
> 
> 时间：2013-01-26T05:25:45.457
> 
> 标签：objective-c, facebook, macos, cocoa, twitter

我正在编写一些使用 Mountain Lion 中的帐户 API 的代码。但是，我找不到让 OS X 完全忘记我授权我的应用程序的方法，以便我可以在我的应用程序中测试身份验证过程。以下是不起作用的事情：

*   在隐私首选项窗格中禁用它们。这只是撤销访问权限。
*   删除帐户并重新添加它们。访问是*accounts*，而不是*特定的 account*，所以一组空的 account 仍然可以访问它。
*   删除应用程序（据我所知，我清除了它的所有副本 - 没有出现在 Spotlight 中）
*   在 中的目录上运行`rm -rf`，该目录包含一个似乎包含访问权限表的 SQLite 数据库（它已由操作系统重新创建，该表现在为空，但它们保留在系统偏好设置中）。`Accounts``~/Library`
*   `rm -rf`基本上在`~/Library`其中包含有关帐户的内容的每个目录上运行。

有什么作用：

*   更改应用程序的捆绑包 ID。但是*来吧*。必须有一种*真正的*方法来做到这一点，它不会将我在“安全和隐私”中的应用程序列表变成我的应用程序的 500 个具有唯一捆绑 ID 的副本。此外，它不适用于 Facebook，因为他们要求您在他们的开发者网站上设置您的捆绑 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:45:26.710

`tccutil reset Twitter`/`tccutil reset Facebook`应该做你所追求的。

# html - 显示隐藏的 HTML 文本时加粗

> ID：14534161
> 
> 赞同：0
> 
> 时间：2013-01-26T05:26:34.520
> 
> 标签：html, css

在我的网页上，我有一个隐藏字段（`input type="hidden"`）中的文本。当我显示文本时，我希望它是粗体的，以便突出。这可以用 CSS 或任何其他方式完成吗？我已经尝试过`style="font-weight: bold;"`了，但它在 Chrome 中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:52:27.467

```
<input type="text" id="myInput" value="Hello" /> 
```

**CSS：**

```
#myInput
{
    display:none;
    font-weight:normal;
} 
```

**Javascript：**

```
function ShowInput()
{
    document.getElementById("myInput").style.display="block";
    document.getElementById("myInput").style.fontWeight="bold";
} 
```

检查它[http://jsfiddle.net/LvaFS/](http://jsfiddle.net/LvaFS/)

# c# - 在 Web Api 中找到多个与请求匹配的操作

> ID：14534167
> 
> 赞同：261
> 
> 时间：2013-01-26T05:27:51.693
> 
> 标签：c#, .net, asp.net-web-api, asp.net-web-api-routing

当我尝试使用 2 个“获取”方法时，我不断收到此错误

> 找到多个与请求匹配的操作：webapi

我一直在寻找关于堆栈的其他类似问题，但我不明白。

我有 2 个不同的名称并使用“HttpGet”属性

```
[HttpGet]
public HttpResponseMessage Summary(MyVm vm)
{
    return null;
}

[HttpGet]
public HttpResponseMessage FullDetails()
{
    return null;
} 
```

* * *

## 回答 #1

> 赞同：524
> 
> 时间：2013-01-26T06:48:24.063

**您的路线图在WebApiConfig.cs**中可能是这样的：

```
routes.MapHttpRoute(
name: "API Default",
routeTemplate: "api/{controller}/{id}",
defaults: new { id = RouteParameter.Optional }); 
```

但是为了使用相同的 http 方法进行多个操作，您需要通过如下路由向 webapi 提供更多信息：

```
routes.MapHttpRoute(
name: "API Default",
routeTemplate: "api/{controller}/{action}/{id}",
defaults: new { id = RouteParameter.Optional }); 
```

请注意， routeTemplate 现在包含一个操作。更多信息在这里：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

**更新：**

好吧，现在我想我明白了你在这里追求的是什么：

也许您不需要 action url 参数，应该以另一种方式描述您所追求的内容。既然您说这些方法从同一实体返回数据，那么只需让参数为您进行描述。

例如，您的两种方法可以变成：

```
public HttpResponseMessage Get()
{
    return null;
}

public HttpResponseMessage Get(MyVm vm)
{
    return null;
} 
```

你在 MyVm 对象中传递什么样的数据？如果您只能通过 URI 传递变量，我建议您走这条路线。否则，您需要在请求的正文中发送对象，并且在执行 GET 时这不是您的 HTTP（尽管它有效，只需在 MyVm 前面使用 [FromBody]）。

希望这说明您可以在单个控制器中拥有多个 GET 方法，而无需使用操作名称甚至 [HttpGet] 属性。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2016-01-21T21:10:44.353

从 Web API 2 开始更新。

在您的 WebApiConfig.cs 文件中使用此 API 配置：

```
public static void Register(HttpConfiguration config)
{
    //// Web API routes
    config.MapHttpAttributeRoutes(); //Don't miss this

    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = System.Web.Http.RouteParameter.Optional }
    );
} 
```

你可以像这样路由我们的控制器：

```
[Route("api/ControllerName/Summary")]
[HttpGet]
public HttpResponseMessage Summary(MyVm vm)
{
    return null;
}

[Route("api/ControllerName/FullDetails")]
[HttpGet]
public HttpResponseMessage FullDetails()
{
    return null;
} 
```

其中 ControllerName 是您的控制器的名称（没有“控制器”）。这将允许您使用上面详述的路线获取每个操作。

进一步阅读：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-26T15:45:43.570

在 Web API（默认情况下）中，方法是根据*HTTP 方法和路由值的组合*选择的。

`MyVm`看起来像一个复杂的对象，由格式化程序从正文中读取，因此您在路由数据方面有两个相同的方法（因为它们都没有来自路由的任何参数） - 这使得调度程序 ( `IHttpActionSelector`) 无法匹配适当的.

您需要通过查询字符串或路由参数来区分它们以解决歧义。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-10-23T04:40:41.537

经过大量的网络搜索并尝试找到最适合路由图的表格，如果找到以下内容

```
config.Routes.MapHttpRoute("DefaultApiWithId", "Api/{controller}/{id}", new { id =RouteParameter.Optional }, new { id = @"\d+" });
config.Routes.MapHttpRoute("DefaultApiWithAction", "Api/{controller}/{action}"); 
```

这些映射适用于动作名称映射和基本 http 约定（GET、POST、PUT、DELETE）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-15T15:28:34.653

**这是每个人都知道一切都是正确并检查了50次的答案**.....

确保您没有反复查看`RouteConfig.cs`.

您要编辑的文件名为`WebApiConfig.cs`

此外，它应该看起来完全像这样：

```
using System.Web.Http;

namespace My.Epic.Website
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
          config.MapHttpAttributeRoutes();

          // api/Country/WithStates
          config.Routes.MapHttpRoute(
            name: "ControllerAndActionOnly",
            routeTemplate: "api/{controller}/{action}",
            defaults: new { },
            constraints: new { action = @"^[a-zA-Z]+([\s][a-zA-Z]+)*$" });

          config.Routes.MapHttpRoute(
            name: "DefaultActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
          );
    }
    }
} 
```

我本可以为自己节省大约 3 个小时。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-26T05:35:22.433

您的 webmethod 可能被解析为相同的 url。看看以下链接：-

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

因此，您可能需要将您的方法名称添加到您的路由表中。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-26T14:35:42.997

如果不使用操作，选项将是：

1.  将其中一种方法移动到不同的控制器，以免它们发生冲突。

2.  仅使用一种获取参数的方法，如果它为 null，请从您的代码中调用另一种方法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-03-31T04:03:57.060

这个解决方案对我有用。

请先将 Route2 放在 WebApiConfig 中。还要在每个方法之前添加 HttpGet 和 HttpPost，并在 url 中包含控制器名称和方法名称。

WebApiConfig =>

```
config.Routes.MapHttpRoute(
           name: "MapByAction",
           routeTemplate: "api/{controller}/{action}/{id}", defaults: new { id = RouteParameter.Optional });
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }); 
```

控制器 =>

```
public class ValuesController : ApiController
{

    [HttpPost]
    public string GetCustomer([FromBody] RequestModel req)
    {
        return "Customer";
    }

    [HttpPost]
    public string GetCustomerList([FromBody] RequestModel req)
    {
        return "Customer List";
    }
} 
```

网址 =>

```
http://localhost:7050/api/Values/GetCustomer

http://localhost:7050/api/Values/GetCustomerList 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-03-25T22:35:08.227

我发现当我有两个 Get 方法时，一个是无参数的，一个是复杂类型的参数，我得到了同样的错误。我通过添加一个名为 Id 的 int 类型的虚拟参数作为我的第一个参数，然后是我的复杂类型参数来解决这个问题。然后我将复杂类型参数添加到路由模板中。以下对我有用。

首先得到：

```
public IEnumerable<SearchItem> Get()
{
...
} 
```

第二次获得：

```
public IEnumerable<SearchItem> Get(int id, [FromUri] List<string> layers)
{
...
} 
```

WebApiConfig：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}/{layers}",
    defaults: new { id = RouteParameter.Optional, layers RouteParameter.Optional }
); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-11-27T11:45:00.360

这可能是由于使用 MVC 控制器而不是 Web API 控制器。检查 Web API 控制器中的命名空间，它应该如下所示

```
using System.Net;
using System.Net.Http;
using System.Web.Http; 
```

如果命名空间如下，则在 web api 控制器方法调用中给出上述错误

```
using System.Web;
using System.Web.Mvc; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-07-10T18:16:17.110

请检查您有两个名称不同但参数相同的方法。

如果是这样，请删除任何方法并尝试。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-04T13:03:17.570

我在尝试通过额外的操作来增强我的 WebAPI 控制器时偶然发现了这个问题。

假设你会有

```
public IEnumerable<string> Get()
{
    return this.Repository.GetAll();
}

[HttpGet]
public void ReSeed()
{
    // Your custom action here
} 
```

现在有两种方法可以满足触发 TS 描述的问题的 /api/controller 请求。

我不想在我的附加操作中添加“虚拟”参数，所以我查看了默认操作并想出了：

```
[ActionName("builtin")]
public IEnumerable<string> Get()
{
    return this.Repository.GetAll();
} 
```

对于结合“双重”路由绑定的第一种方法：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { action = "builtin", id = RouteParameter.Optional },
    constraints: new { id = @"\d+" });

config.Routes.MapHttpRoute(
    name: "CustomActionApi",
    routeTemplate: "api/{controller}/{action}"); 
```

请注意，即使第一个路由模板中没有“action”参数，您仍然可以配置默认操作，允许我们将“正常”WebAPI 调用的路由和对额外操作的调用分开。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-03-12T07:01:31.443

在我的情况下，一切都是正确的

1) Web Config 配置正确 2) 路由前缀和路由属性正确

我仍然收到错误消息。在我的案例中，“Route”属性（通过按 F12）指向 System.Web.MVc 而不是 System.Web.Http 导致问题。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-07-22T19:03:58.017

您可以添加`[Route("api/[controller]/[action]")]`到您的控制器类。

```
[Route("api/[controller]/[action]")]
[ApiController]
public class MySuperController : ControllerBase
{
 ...
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-20T15:40:37.137

我知道这是一个老问题，但有时，当您使用 AngularJS 等服务资源连接到 WebAPI 时，请确保您使用的是正确的路由，否则会发生此错误。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-09-06T00:47:20.590

确保不要使用 [HttpPost/Put/Get/Delete] 属性为默认的 GET|PUT|POST|DELETE 操作装饰控制器方法。我已将此属性添加到我的香草后控制器操作中，它导致了 404。

希望这对某人有所帮助，因为它可能非常令人沮丧并导致进展停滞。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-15T10:29:28.043

例如 => 测试控制器

```
 [HttpGet]
        public string TestMethod(int arg0)
        {
            return "";
        }

        [HttpGet]
        public string TestMethod2(string arg0)
        {
            return "";
        }

        [HttpGet]
        public string TestMethod3(int arg0,string arg1)
        {
            return "";
        } 
```

如果只能更改 WebApiConfig.cs 文件。

```
 config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{action}/",
                defaults: null
            ); 
```

就是这样 ：）

结果： [![在此处输入图像描述](../Images/38e94ccdccbf4463a25055e3978efb53.png)](https://i.stack.imgur.com/LTFOG.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-05-15T02:36:05.590

您是否尝试过：

```
[HttpGet("Summary")]
public HttpResponseMessage Summary(MyVm vm)
{
    return null;
}

[HttpGet("FullDetails")]
public HttpResponseMessage FullDetails()
{
    return null;
} 
```

# c# - 选择一个随机方向并移动

> ID：14534171
> 
> 赞同：1
> 
> 时间：2013-01-26T05:28:45.400
> 
> 标签：c#, xna, trigonometry

我希望能够选择一个随机角度（在 0 到 360 或 0 到 2pi 之间），然后让精灵朝那个方向移动。到目前为止，我已经尝试过这个，但它非常无效，因为它总是向下移动，并且角度选择不是很漂亮。

```
Random rand = new Random();

//Chooses the Angle
rotation = (float)rand.NextDouble()*MathHelper.TwoPi; 

//Is supposed to get a normalized movement vector that moves in the direction of that angle.
moveVector = Vector2.Normalize(new Vector2(-(float)Math.Tan(rotation), 1)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T05:35:24.663

您似乎缺少一点三角函数：

您正在创建一个 Y 分量始终为 1 的向量（在 2D XNA 中向下）。所以，不管是随机的角度，它只影响方向的水平部分。

要将角度转换为（单位，即已经归一化的）方向向量，您可以使用 sin 和 cos（想想单位圆）：

```
var dir = new Vector2((float)Math.Cos(angle), (float)Math.Sin(angle)); 
```

由于 XNA 将原点放置在 2D 屏幕的左上角，因此您需要反转 y 分量：

```
var dir = new Vector2((float)Math.Cos(angle), -(float)Math.Sin(angle)); 
```

此外，为确保您获得正确的随机数序列，您应该只创建一次随机对象，然后每次使用相同的实例来获取下一个随机数。

此外，为了获得更平滑的运动，您可以加权方向以支持您已经进入的方向，或者选择一个随机目的地并前往该目的地（然后选择另一个，等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:34:53.213

想通了，这是正确的行：

```
move = new Vector2((float)Math.Cos(rotation - MathHelper.PiOver2), (float)Math.Sin(rotation - MathHelper.PiOver2)); 
```

# php - PHP：检查 FORM 值是否为空

> ID：14534173
> 
> 赞同：0
> 
> 时间：2013-01-26T05:28:53.830
> 
> 标签：php

我正在检查以确保所有传入`$_POST`的值都不为空。使用 isEmpty 是最好的方法。这是 db 条目之前的第二次检查，我已经在使用 jquery 表单验证

```
if (!isEmpty($_POST['add']) || ($_POST['add']['type'] == 2 && !isEmpty($_POST['cpl']))):
    // insert into db
else:
    header("Location: /?req=register");
    exit();
endif; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T05:36:57.863

试试这个

```
if (isset($_POST['add']) AND $_POST['add'] != '') 
```

您也可以使用 NULL 以多种方式检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T05:30:59.473

小心，因为[`empty`](http://php.net/manual/en/function.empty.php)（没有这样的东西`isEmpty`）认为某些值是空的。

> 以下内容被认为是空的：

```
"" (an empty string)
0 (0 as an integer)
0.0 (0 as a float)
"0" (0 as a string)
NULL
FALSE
array() (an empty array)
$var; (a variable declared, but without a value) 
```

你可以使用`if($_POST['add'] <> '') ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:40:01.310

您可以使用`isset`来查看变量是否已设置。如果您尚未选择，这将有助于单选和复选框。

```
 (isset($_POST['add']) && $_POST['add'] != '') 
```

你也可以使用`!empty($_POST['add'])`

# iphone - 不可接受的属性值类型：

> ID：14534174
> 
> 赞同：0
> 
> 时间：2013-01-26T05:28:56.920
> 
> 标签：iphone, ios, core-data, uicolor

我在书中找到的项目有问题。点击屏幕时，项目会弹出不同的形状。我的问题是它创建了一个异常，我相信问题是 createShapeAt 中的一行：

在 NSInvalidArgumentException 中，在 updateAllShapes 中找到属性：所需的 NSString 类型是它需要的，但输出是 UIDeviceRGBColor 类型。我对吗？

它有一个例外：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unacceptable type of value for attribute: property = "color"; desired type = NSString; given type = UIDeviceRGBColor; value = UIDeviceRGBColorSpace 0.0980392 0.0705882 0.152941 1.' 
```

代码：

```
- (void)createShapeAt:(CGPoint)point
{
    Shape *shape = nil;
    int type = arc4random() % 2;
    if (type == 0) {
        shape = [Circle randomInstance:point inContext:self.managedObjectContext];
    }

    else {
        shape = [Polygon randomInstance:point inContext:self.managedObjectContext];
    }

    NSLog(@"Test: %@", [[self makeRandomColor] description]);
    shape.color = [self makeRandomColor]; //This is where the Exception kicks in.
}

- (UIColor *)makeRandomColor
{
    float red = (arc4random() % 256) / 255.0;
    float green = (arc4random() % 256) / 255.0;
    float blue = (arc4random() % 256) / 255.0;

    return [UIColor colorWithRed:red green:green blue:blue alpha:1.0];
}

- (void)updateAllShapes
{
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Shape" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    NSArray *shapes = [managedObjectContext executeFetchRequest:fetchRequest error:nil];

    for (NSManagedObject *shape in shapes) {
        [shape setValue:[self makeRandomColor] forKey:@"color"];
    }

    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
} 
```

形状.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Canvas;

@interface Shape : NSManagedObject

@property (nonatomic, retain) UIColor *color;
@property (nonatomic, retain) NSSet *canvases;
@end

@interface Shape (CoreDataGeneratedAccessors)

- (void)addCanvasesObject:(Canvas *)value;
- (void)removeCanvasesObject:(Canvas *)value;
- (void)addCanvases:(NSSet *)values;
- (void)removeCanvases:(NSSet *)values;
@end 
```

形状.m

```
#import "Shape.h"
#import "Canvas.h"

@implementation Shape

@dynamic color;
@dynamic canvases;

@end 
```

安慰：

```
Test: UIDeviceRGBColorSpace 0.0431373 0.764706 0.223529 1 
```

如何更改这行代码：`shape.color = [self makeRandomColor];`成为 NSString？

编辑：我添加了 Shape.h 和 Shape.m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:38:35.363

声明一个如下所示的属性，请确保它是`retain`

```
@property (nonatomic, retain) UIColor *color; 
```

& 然后分配

```
shape.color=[self makeRandomColor]; 
```

# sql - 类别和子类别 - 如何设计数据库

> ID：14534178
> 
> 赞同：1
> 
> 时间：2013-01-26T05:30:41.873
> 
> 标签：sql, database, database-design, select

所以我正在创建一个数据库，它有一个类别、子类别、子子类别、子子子类别……你明白了，它可以永远持续下去。

所以我做了一张桌子。类别名称|ParentID|ID|预算|

为了解释我的情况，我会假装每个类别都有预算。我将如何制作能够获取类别及其子类别及其子类别的总预算的 Select 语句。这也意味着当我进入一个子类别时，我也应该能够看到它自己的子类别的总预算。

任何建议都会对我有很大帮助！

多谢你们！

编辑：我忘了提，数据库是 MySQL。我将使用 PHP 在网页上显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:45:34.277

您正在使用难以搜索的模型（邻接列表模型）。您是否考虑过合并嵌套集模型？这是一篇关于该主题的好文章：

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

关于您的问题，递归函数将是您最好的选择。除非您知道子类型的潜在范围，否则我认为您不能仅使用 SQL 来做到这一点。在这种情况下，您可以多次加入表格——如下所示：

```
SELECT t.CatName, SUM(t.Budget+t2.Budget+t3.Budget...)
FROM YourTable t
    LEFT JOIN YourTable t2 ON t2.parentid = t1.id
    LEFT JOIN YourTable t3 ON t3.parentid = t2.id
    LEFT JOIN YourTable t4 ON t4.parentid = t3.id
    ... 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:45:48.190

希望以下链接将带您到正确的道路..

[http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

[http://forums.databasejournal.com/showthread.php?30908-Recursive-MYSQL-Query](http://forums.databasejournal.com/showthread.php?30908-Recursive-MYSQL-Query)

# variables - 将 xpath 设置为 xslt 变量的值并将其作为参数传递给 JS 函数

> ID：14534182
> 
> 赞同：0
> 
> 时间：2013-01-26T05:31:48.737
> 
> 标签：variables, xslt

您能否解释如何将`xpath`节点设置为`xslt`变量的值。我还想显示该值，然后将其作为参数传递给`JS Function`. 感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:22:00.027

示例输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <child>
    <trial>test</trial>
  </child>
</root> 
```

将当前节点的 XPath 传递给内联 JS 函数的模型代码：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:js="urn:js">

    <xsl:output method="xml" indent="yes"/>
  <msxsl:script language="JScript" implements-prefix="js">
    <![CDATA[
      function test(something)
      {
      //code here
      }
     ]]>
  </msxsl:script>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
  <xsl:template match="trial">
    <xsl:copy>
      <xsl:variable name="xpath">
        <xsl:for-each select="ancestor-or-self::*">
          <xsl:value-of select="name()"/>
          <xsl:if test="not(position()=last())">
            <xsl:value-of select="'/'"/>
          </xsl:if>
        </xsl:for-each>
      </xsl:variable>
      <xsl:apply-templates select="js:test($xpath)"/> <!--Passed value $xpath to funciton test-->
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

返回值为

```
 return (something); 
```

将输出：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <child>
    <trial>root/child/trial</trial>
  </child>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:38:21.780

XPath 表达式不是值，因此它们不能绑定到变量。您当然可以将 XPath 表达式放入字符串中。XSLT 中没有标准方法来执行保存在字符串中的 XPath 表达式，但许多实现都有一个扩展函数（例如 xx:evaluate()）来执行此操作。

它有助于解释你试图解决什么问题，而不是你试图使用什么技术来解决它。然后我们可以提出替代方案，也许是更好的方法。

# c# - Visual Studio 从一般开发设置更改

> ID：14534183
> 
> 赞同：19
> 
> 时间：2013-01-26T05:31:50.080
> 
> 标签：c#, asp.net, visual-studio-2010, visual-studio-2012, visual-studio-2013

在 Visual Studio 2010 中，有没有办法从`General Development`设置更改为`C#`开发设置？

我最初安装它时忘记选择它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-26T05:58:36.460

1.  点击***工具***
2.  单击***导入和导出设置***
3.  单击***导入选定的环境设置***
4.  保存当前设置
5.  点击默认设置文件夹下的***C#***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-06T15:19:59.940

1.  **工具**
2.  **导入和导出设置**> 将打开一个对话框。
3.  选择**重置所有设置**
4.  单击**下一步**> 导入和导出设置向导将打开
5.  选择**否，只是重置设置，覆盖我当前的设置**
6.  单击**下一步**
7.  点击**完成**
8.  最后点击**关闭**。

# php - 标签中的 onclick 属性无法正常工作

> ID：14534184
> 
> 赞同：-1
> 
> 时间：2013-01-26T05:31:53.717
> 
> 标签：php, html, onclick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:08:05.697

尝试这个：

```
$menu .= '<LI '.$class.'><a href="'.site_url($row->custom_url).'/'.$row->item_id.'" title="'.$row->alt_title.'" onclick="javascript:get_id('.$row->item_id.');">'.$row->item_title.'</a>'.$this->gen_menu($menuItems, $row->item_id).'</LI>'; 
```

你`$row->item_id`在引用的字符串里面，所以它没有被扩展。你应该从中得到一个 javascript 错误。

更新：

您遇到的问题是您混淆了服务器端和客户端操作。此 PHP 脚本中的代码在创建要发送给用户的页面时都在服务器上运行。如果您在循环中设置会话变量，该变量将包含上次迭代的值。将 PHP 代码放入`onclick`其中不会在用户单击时运行它，而是在服务器编写`onclick`属性以放入发送到浏览器的 HTML 时运行它。

如果你想在用户点击时在服务器上做一些事情，你需要在`onclick`属性中放置一个 Javascript 函数，并且该函数应该使用 AJAX 调用另一个 PHP 脚本。

# javascript - 数值比较给出错误结果（javascript）

> ID：14534187
> 
> 赞同：0
> 
> 时间：2013-01-26T05:32:34.073
> 
> 标签：javascript

以下代码一直给出错误的结果。我想我正在比较两个数字变量。不是这样吗？

```
var request; var getfilesize; var maxdisplaysize=2097152;
    request = $.ajax({
    type: "HEAD",
    url: getfile,
    success: function () {
      getfilesize = request.getResponseHeader("Content-Length");
      console.log("Size is" + getfilesize+'xxx');
    }
    });
    parseInt( getfilesize, 10 );
if ( getfilesize < maxdisplaysize ) {
    $("#displayfile").load(getfile);
    console.log('file size less then 2mb 2097152bytes');
} else {
    $("#displayfile").append('<p>sorry large file<p>');
} 
```

请建议为什么 if 条件总是被评估为假？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T05:33:45.350

你的调用`parseInt()`没有任何效果，因为你没有对结果做任何事情。

```
getfilesize = parseInt(getfilesize, 10); 
```

是你想要的。该`parseInt()`函数不会（**也不能**）修改第一个参数。

现在，也就是说，您要处理的下一个问题是您的 ajax 调用是**异步**的。您需要将使用文件大小的代码**放在**“成功”回调中。

# nginx - 带有 PHP5-FPM 的 Nginx - .php 文件提供空白屏幕

> ID：14534189
> 
> 赞同：3
> 
> 时间：2013-01-26T05:33:27.737
> 
> 标签：nginx, webserver, php

我正在努力让 nginx 启动并使用 php5-fpm 运行。我觉得这是我忽略的一个小细节，所以我休息了几天，然后又回来了。今晚又搞砸了几个小时，但无济于事。

无论如何，这是问题所在：我已经启动并运行了 nginx。它似乎可以正确地提供网页。例如，[http://www.shidenadvanced.com](http://www.shidenadvanced.com)的基础网站服务就很好。但是，位于[http://www.shidenadvanced.com/test.php](http://www.shidenadvanced.com/test.php)的 php 测试返回为空白。以前它作为 502 坏网关返回。

通过我的研究，我了解到这意味着它无法通过 php-fpm 正确路由它。不是100％。

这是我的 /sites-available/config：

```
server {
    server_name www.shidenadvanced.com shidenadvanced.com;
    access_log /srv/sites/shidenadvanced/logs/access.log;
    error_log /srv/sites/shidenadvanced/logs/error.log;

    root /srv/sites/shidenadvanced/www;
    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ /index.html;
    }

    #location ~ \.php$ {
    #    try_files $uri =404;
    #    include /etc/nginx/fastcgi_params;
    #    fastcgi_pass unix:/var/run/php-fpm5.sock;
    #    fastcgi_index index.php;
    #    fastcgi_param SCRIPT_FILENAME /srv/sites/shidenadvanced/www$fastcgi_script_name;
    #}

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }

    location ~ /\.ht {
        deny all;
    }
} 
```

除此之外，我只保留了大部分设置。不完全确定发生了什么。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:11:39.910

尝试这个。我对您处理 fastcgi 的方式进行了一些更改

```
server {
server_name www.shidenadvanced.com shidenadvanced.com;
access_log /srv/sites/shidenadvanced/logs/access.log;
error_log /srv/sites/shidenadvanced/logs/error.log;

root /srv/sites/shidenadvanced/www;
index index.php index.html index.htm;

location / {
    try_files $uri $uri/ /index.html;
}

# use fastcgi for all php files
location ~ \.php$
{
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

location ~ /\.ht {
    deny all;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T08:23:40.983

我个人更喜欢socket解决方案：

```
fastcgi_pass unix:/path/tp/myfirst.socket; 
```

代替

```
fastcgi_pass 127.0.0.1:9000; 
```

但您也需要主机的 fpm 配置：

```
[hak-rentrisch_de]
listen = /path/tp/myfirst.socket
listen.owner = hostuser
listen.group = hostgroup
listen.mode = 0666

listen.backlog = -1
listen.allowed_clients = 127.0.0.1

user = hostuser
group = hostgroup

pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
pm.max_requests = 500

php_admin_value[include_path] = .:/var/www/libs 
[...] 
```

亲切的问候

# php - 如何将图像值从一种形式传递到另一种形式？

> ID：14534192
> 
> 赞同：0
> 
> 时间：2013-01-26T05:33:56.647
> 
> 标签：php, forms, echo

我在promotions.php 上有一张图片。当我点击“编辑”链接时，“标题”、“描述”和“图像”等变量将被传递到 doEditPromotion.php 的页面表单。

我可以传递“标题”和“描述”以显示在 doEditPromotion.php 的页面表单上，但不能传递图像值。

谁能帮我这个？谢谢！

doEditPromotion.php -->

```
<?php
  session_start();
  include "dbfunction.php";

  $id = $_REQUEST['id'];

 $query = "SELECT title, description, image, promotionID FROM promotion WHERE promotionID = '$id'";

  $result = mysqli_query($link, $query);

  $row = mysqli_fetch_array($result);

        $title = $row['title'];
        $description = $row['description'];
        $image = $row['image'];

// check if the form has been submitted. If it has, process the form and save it to the database

    if (isset($_POST['save']))
    {
        $title_save = $_POST['title'];
        $description_save = $_POST['description'];
        $target = 'images/';
        $target = $target.basename($_FILES['photo']['name']);
        $pic = ($_FILES['photo']['name']);
        move_uploaded_file($_FILES['photo']['tmp_name'], $target);

// check that firstname/lastname fields are both filled in
 if ($title_save == '' || $description_save == '' || $pic == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';
 echo $error;
 }

    else
 {  
  // save the data to the database
  $query = "UPDATE promotion SET title = '$title_save', description = '$description_save', image = '$pic' WHERE promotionID = '$id'"; 
  $result = mysqli_query($link, $query);

  // once saved, redirect back to the view page
 header("Location: promotions.php"); 
 }   
 }
          ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
                <link rel="stylesheet" type="text/css" href="codes.css"/>
        <link href="styles.css" rel="stylesheet" type="text/css" media="screen" />

        <link rel="stylesheet" href="picture-zoom/css/dg-picture-zoom.css" type="text/css" /> 
        <script type="text/javascript" src="picture-zoom/js/external/mootools-1.2.4-core-yc.js"></script>
        <script type="text/javascript" src="picture-zoom/js/external/mootools-more.js"></script>
        <script type="text/javascript" src="picture-zoom/js/dg-picture-zoom.js"></script> 
        <script type="text/javascript" src="picture-zoom/js/dg-picture-zoom-autoload.js"></script> 

        <script>
        function myFunction()
        {
        alert("Are you sure you want to proceed?");
        }
        </script>

    <title>Eco Canteen - Promotions</title>
</head>

<body>

<div id="wrap">   
           <div id="header">
            <div id="logo">

               <br/>
                    <?php
                            if(isset($_SESSION['username']))
                            {
                            ?>
                        <p align="right"><a href="logout.php"><font color="white">Logout</font></a></p>
                        <?php
                            }
                            else
                            {
                        ?>

                        <form align="right" name="form" action="doIndex.php" method="post">
                        <p><label for="username"><font color="white"> Username: </font></label>
                        <input name="username" type="text"></input>

                        <label for="password"><font color="white"> Password: </font></label>
                        <input name="password" type="password"></input>
                        &nbsp;&nbsp;&nbsp;
                        <input name="submit" value="Login" type="submit"/></p>
                    <?php
                                }
                    ?>
                        </form>

                </div>

<div id='menu'>

<ul>
   <li><a href='index.php'><span>Home</span></a></li>
   <li><a href='promotions.php'><span>Promotions</span></a></li>
   <li><a href='outlets.php'><span>Outlets</span></a></li>
   <li><a href='feedback.php'><span>Feedback</span></a></li>
   <li class='has-sub '><a href='#'><span>Career</span></a>
      <ul>
         <li><a href='stall.php'><span>Stall Leasing</span></a></li>
         <li><a href='career.php'><span>Career Opportunity</span></a></li>
      </ul>
   </li>
   <li><a href='contactUs.php'><span>Contact Us</span></a></li>
</ul>

                </div>
                </div>

    <br/>     
    <br/>

    <p class="slogan"></p>

        <div id="intro">
        <h2><b>ECO CANTEEN</b></h2>

    </div>

<br/>

        <div class="wid_center">

        <div id="content">
        <div class="gao">
        <h3><a href="promotions.php">Promotion</a> > <b>Edit Promotion</b></h3>

        <fieldset stype='width:500px'>
        <legend><b>Promotion Details</b></legend>
        <form method="post" enctype="multipart/form-data">
        <table>
        <tr>
        <td>Promotion Title:</td>
        <td><input type="text" name="title" size='36' value="<?php echo $title;?>"/></td>
        </tr>
        <tr>
        <td>Description:</td>
        <td><input type="text" name="description" style='width: 300px;height:80px' value="<?php echo $description;?>"/></td>
        </tr>
        <tr>
        <td>Image:</td>
        <td><input type='file' name='upfile' id='image' src='images/<?php echo $_REQUEST['$image']?>'></input></td>
        </tr>
        <tr>
        <td></td>
        <td><input type="submit" name="save" value="Save"/></td>
        </tr>
        </table>
        </form>
        </fieldset>

        </div>

    <br/>
    <br/>

    <hr class="clear" />
    </div>
                </div>

    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>

    <div id="footer">
    <p> <br />
    Copyright &copy; 2012 EcoCanteen<br />
            </p></div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:04:07.177

您将上传的文件命名为 upfile，然后尝试将其作为照片访问。执行`print_r($_FILES)`然后更改以下操作之一：

```
$_FILES['photo']['name'] // Either change photo to upfile
...
<input type='file' name='upfile' id='image' src='...' /> // Or upfile to photo 
```

# c++ - 向量容器和 unique_ptr

> ID：14534194
> 
> 赞同：2
> 
> 时间：2013-01-26T05:34:31.090
> 
> 标签：c++, vector, c++11, unique-ptr

我已经搜索了几个小时来寻找解决方案，并尝试了不同的方法来解决`unique_ptr`与无复制/无分配相关的编译错误。我什至写了一个隐藏的副本并分配以防止vector调用它无济于事。

以下是导致编译错误的代码：

```
class World{
    World(const World&) {}
    World& operator=(const World&) {return *this; }

    std::vector<std::vector<std::unique_ptr<Organism>>> cell_grid;
public:
    World() {
        cell_grid = std::vector<std::vector<std::unique_ptr<Organism>>> (20, std::vector<std::unique_ptr<Organism>> (20, nullptr));
    }
    ~World() {}
}; 
```

编译错误与私有成员访问问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:39:18.867

问题是这个`vector`构造函数的使用：

```
vector(size_type n, const T& value); 
```

这个构造函数创建了一个`vector`的长度`n`，每个`n`元素都有一个的**副本**。`value`由于`unique_ptr`不能被复制（a 也不能`vector<unique_ptr>`），所以不能使用这个构造函数。而是这样做：

```
World()
    : cell_grid(20)
{
    for (auto& row : cell_grid)
        row.resize(20);
} 
```

第一行调用 的默认构造函数`vector<unique_ptr>`，创建 20 个 size 0 `vector<unique_ptr>`s。

然后循环将每个`vector<unique_ptr>`s 的大小调整为 size == 20，每个元素都是默认构造的`unique_ptr`（将具有 value `nullptr`）。

# c++ - 调用变量的类中的构造函数

> ID：14534195
> 
> 赞同：1
> 
> 时间：2013-01-26T05:34:46.753
> 
> 标签：c++, class, constructor, game-boy-advance

我已经查阅了关于类和构造函数的各种指南和教程，但到目前为止，如何将两者结合到我的程序中对我来说还没有意义。我觉得一些巨大的逻辑块正在逃避我。如果有人能用人类语言解释构造函数应该如何为我的函数填充变量，我将非常感激。不仅仅是如何让它做我想让它做的事情，还有为什么它对程序有意义？我今年开始学习。谢谢你。这是要在 GBA 模拟器上编译的代码，尽管我遇到的问题纯粹是从 C++ 的角度来看的。我在程序中以粗体概述了这篇文章的附加评论。到目前为止，我如何理解我正在尝试做的是：

我创建了一个构造函数，该构造函数随后在程序的主循环中获取其中函数的变量值，在该程序中我第一次初始化类对象，然后在我为我简单调用的移动重绘框的部分在应该从构造函数存储其初始值的类对象上。

```
#include <stdint.h>
#include <stdlib.h>
#include "gba.h"

// A class with variables.
class CHARBOX
{
    public:
    int init_;
    int str_;
    int health_;
    int posx_;
    int posy_;
    int width_;
    int height_;
    int colour_; // someone advised me to name my class variables 
                 // with a special symbol attached.

    public:
// This is probably the part where I have not done things right. When this is 
// compiling, there is an error saying that there is no matching function to 
// call CHARBOX. Which I don`t understand completely.
        // Constructor.
    CHARBOX(int posx, int posy, int width, int height, int colour)
    {
        DrawBox(posx, posy, width, height, colour);
    }

    // Drawing functions.
    void DrawBox(int posx_, int posy_, int width_, int height_, int colour_)
    {
        for (int x = posx_; x < posx_ + width_; x++)
        {
            for (int y = posy_; y < posy_ + height_; y++)
            {
                PlotPixel8(x, y, colour_);
            }
        }
    }
};

// The entry point.
int main()
{
    // Put the display into bitmap mode 4, and enable background 2.
    REG_DISPCNT = MODE4 | BG2_ENABLE;

    // Defining some colour palettes.
    SetPaletteBG(1, RGB(90,0,0));
    SetPaletteBG(2, RGB(0,90,0));
    SetPaletteBG(3, RGB(0,0,90));
    SetPaletteBG(4, RGB(90,90,0));
    SetPaletteBG(5, RGB(90,0,90));

//Here is where the objects get initialized and the constructor is called.
        // Draw the player at a starting location.
    CHARBOX player(10, 24, 6, 8, 1);

    // Draw the enemy at a starting location.
    CHARBOX enemy(80, 24, 6, 8, 2);

// main loop.
    while (true);
    {
        // Clear screen and paint background.
        ClearScreen8(1);

        // Flip buffers to smoothen the drawing.
        void FlipBuffers();

        // Redraw the player.
        if ((REG_KEYINPUT & KEY_LEFT) == 0)
        {
            player.DrawBox(); // This is where the object gets called 
                                      // again to be redrawn.
            posx_--;
        }

        if ((REG_KEYINPUT & KEY_RIGHT) == 0)
        {
            player.DrawBox();
            posx_++;
        }

        if ((REG_KEYINPUT & KEY_UP) == 0)
        {
            player.DrawBox();
            posy_--;
        }

        if ((REG_KEYINPUT & KEY_DOWN) == 0)
        {
            player.DrawBox();
            posy_++;
        }
    WaitVSync();
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:38:07.723

您需要使用**成员初始化列表**来初始化您的类成员：

```
CHARBOX(int posx, int posy, int width, int height, int colour):posx_(posx),posy_(posy),width_(width),height_(height), colour_(colour)
{

} 
```

**好读：**
[构造函数中这个奇怪的冒号成员（“：”）语法是什么？](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)

> **有人建议我用附加的特殊符号命名我的类变量。**

这样您就可以区分成员变量名称和传递的函数参数名称。您可以简单地选择不同的名称，这不是必需的，它应该没问题。

> **为什么它对程序有意义？**

C++ 中的构造函数是一个特殊的成员函数，每当创建类的对象时都会调用它。构造函数的目的是提供正确初始化对象成员的机会。例如：在您的情况下，width_、height_ 等。

一旦构造了对象，就假定类成员处于有效和确定的状态，以便程序可以使用它们。在您的情况下，除非您在构造函数中初始化成员，否则它们将具有不确定的值，即：任何随机值。您真的不希望成员函数获取`width_`并返回垃圾值。所以你需要初始化它们。

# c++ - ALSA：如何通过耳机和扬声器发送音频

> ID：14534199
> 
> 赞同：2
> 
> 时间：2013-01-26T05:35:16.410
> 
> 标签：c++, c, linux, audio, alsa

我需要在运行时控制音频输出设备：

```
1) Main Speaker only
2) Headphone Only
3) Headphone + Main Speaker both together 
```

我的应用程序在运行时决定在上述组合之间切换。我应该为上述目的使用什么 ALSA API。

（我使用 Linux 3.0、ALSA、C、TI tlv320aic3x、ARM）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:10:14.573

你可以使用这个：

```
int snd_mixer_selem_set_playback_volume(snd_mixer_elem_t *elem,
snd_mixer_selem_channel_id_t channel, long value) 
```

[它设置了混音器简单元素的播放音量控制值。](http://www.alsa-project.org/alsa-doc/alsa-lib/group___simple_mixer.html#ga1e4556740beefc8bed40677a316e60ac)

这是一个[源代码示例](http://herrie.info/doxygen/audio__output__alsa_8c_source.html)：

```
 /* Set new volume */
         if (snd_mixer_selem_set_playback_volume(elem,
             SND_MIXER_SCHN_FRONT_LEFT, left_volume) != 0)
                 return (-1);
         if (snd_mixer_selem_set_playback_volume(elem,
             SND_MIXER_SCHN_FRONT_RIGHT, right_volume) != 0)
                 return (-1); 
```

# python - 分离图像中的相似对象 - opencv python

> ID：14534202
> 
> 赞同：8
> 
> 时间：2013-01-26T05:35:27.370
> 
> 标签：python, opencv, surf

我正在尝试检测图像中与参考图像相似的对象。这是我试图完成它的方法：

这是示例图像：

![在此处输入图像描述](../Images/7f28f89ec75f121e66115bf0607525ba.png)

这是带有 SURF 关键点的图像：

![在此处输入图像描述](../Images/927b2c9d5cc145b9f68850e0ade2ad27.png)

矩形是基于“层次聚类”等聚类方法绘制的。

主要问题是，在这种情况下，它不会单独检测对象，而是将所有内容都检测为一个对象。

有没有办法分离这些关键点，以便分别检测每辆车？这是检测物体的好方法还是有更好的方法请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:11:26.803

SURF 关键点可用于检测相似图像或从不同角度拍摄的同一地点的图像。尽管您可以将[Haar 分类器](http://opencv.willowgarage.com/documentation/object_detection.html)用于对象检测。它也是 OpenCV 库的一部分。

[这](http://www.ces.clemson.edu/~stb/ece877/.../objectdetect_tutorial.ppt)是另一个关于使用 OpenCV 进行对象检测的精彩教程。

# android - 如何关闭一个活动，而不是整个应用程序

> ID：14534206
> 
> 赞同：1
> 
> 时间：2013-01-26T05:36:02.497
> 
> 标签：android

当用户单击按钮（不是后退按钮，不同的按钮）时，我想销毁 Activity。我决定直接打电话`super.onBackPressed`。可以吗？在不关闭整个应用程序的情况下关闭当前活动的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:41:14.743

要关闭 Activity ，您可以使用 finish() ，但您必须注意后退堆栈，如果您完成堆栈中的最后一个活动，那么堆栈中将没有任何活动，您必须重新启动您的应用程序。

查看更多信息：[任务和BackStack](http://developer.android.com/guide/components/tasks-and-back-stack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:07:52.587

super.onBackPressed 的默认实现完成活动。
而不是使用 super.onBackPressed ，关闭当前活动的更好方法是调用 finish() 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T05:57:12.567

此外，当您按下后退按钮时，会调用 onResume 方法。使用 onResume 方法并在那里刷新你的东西。

另外，如果是 listView 刷新数据-> [https://stackoverflow.com/a/12662994/2006412](https://stackoverflow.com/a/12662994/2006412)

# java - 在Java中使用线程同时执行多个方法

> ID：14534216
> 
> 赞同：2
> 
> 时间：2013-01-26T05:37:55.120
> 
> 标签：java, multithreading

就我而言，我有三个不同类的三种方法。第一个是通过运行 jar 文件连续运行服务，第二个是检查是否有任何服务关闭，如果没有关闭则让它停止，如果有任何服务关闭，则通过运行 jar 文件运行服务，第三个是插入日志在数据库和文本文件中。

我已经这样做了，但它不能正常工作。

```
Thread thread1 = new Thread() {
   public void run() {
      Runjar.Runservices();
   }
};
Thread thread2 = new Thread() {
   public void run() {
      ControllerApplication.linuxCmd();
   }
};
Thread thread3 = new Thread() {
   public void run() {
      Utils.insertLog();
   }
};
thread1.start();
thread2.start();
thread3.start(); 
```

我如何以简单有效的方式在java中处理它。示例代码示例更受欢迎。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:54:46.173

如果您想在循环中连续调用所有这些方法，那么只需将您的代码更改为以下内容：

```
volatile boolean runServices = true;
volatile boolean linuxCmd = true;
volatile boolean insertLog = true;
int SLEEP_TIME = 100;//Configurable. 
Thread thread1 = new Thread() {
   public void run() {
       while (runServices)
       {
           try
           {
                Runjar.Runservices();
                Thread.sleep(SLEEP_TIME);//So that other thread also get the chance to execute.
           }
           catch (Exception ex)
           {
               ex.printStackTrace();
           }

       }    
   }
};
Thread thread2 = new Thread() {
   public void run() {
       while (linuxCmd)
       {
           try
           {
                ControllerApplication.linuxCmd();
                Thread.sleep(SLEEP_TIME);//So that other thread also get the chance to execute.
           }
           catch (Exception ex)
           {
               ex.printStackTrace();
           }
       }
   }
};
Thread thread3 = new Thread() {
   public void run() {
       while (insertLog)
       {
           try
           {
                Utils.insertLog();
                Thread.sleep(SLEEP_TIME);//So that other thread also get the chance to execute.
           }
           catch (Exception ex)
           {
               ex.printStackTrace();
           }
       }

   }
};
thread1.start();
thread2.start();
thread3.start(); 
```

> 如果要停止 runServices，请更改`runServices`为`false`. 同样对于`linuxCmd`和`insertLog`

# namespaces - 命名空间长度

> ID：14534220
> 
> 赞同：2
> 
> 时间：2013-01-26T05:38:28.297
> 
> 标签：namespaces, facebook-apps, facebook-page

我正在尝试配置一个新应用程序，但我的粉丝页面 (http://www.facebook.com/fansdeviolettatequiero) 有 22 个字符，并且应用程序中的命名空间只允许我输入 21 个字符，所以我的命名空间是错误的，我可以不修。

我的命名空间必须是fansdeviolettatequiero。但仍然是粉丝deviolettatequier

请让我知道我可以做些什么来正确放置我的命名空间。

# objective-c - 为什么 Xcode 不为 id 类型的对象上的点标记属性提供自动完成功能 ?

> ID：14534223
> 
> 赞同：11
> 
> 时间：2013-01-26T05:39:02.943
> 
> 标签：objective-c, xcode

鉴于此协议定义：

```
@protocol MyProtocol <NSObject>
@property (nonatomic, strong) NSString *someProperty;
@end 
```

为什么 Xcode 会很乐意为这个语句提供自动完成功能：

```
id<MyProtocol> thing = [ThingManager currentThing];
[thing someProperty]; // Xcode offered autocompletion here 
```

但是当我尝试使用点符号访问*相同*的属性时，它不提供自动完成功能：

```
id<MyProtocol> thing = [ThingManager currentThing];
thing.someProperty; // Xcode claimed there were 
                    // "No completions" available
                    // after the period 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:08:03.170

因为`id`是基本类型，Xcode 和 CLANG 对提供点语法访问感到不安，因为点语法只是对普通对象中关联的 setter 或 getter 的方法调用的语法糖，但 id 没有定义的方法成员。从 C 方面来看，id 是编译器无法看到其成员的结构指针的 typedef，这意味着它无法访问它们（更不用说在点访问之前需要取消引用 id 的事实）做出任何语义意义）。

回到 Objective-C 方面，协议实际上并没有向声称实现它们的类添加方法或属性，而是作为其他类的说明符，即符合给定协议的对象*实现*了一系列方法。至于正在完成的方法语法，Xcode 将所有文件的所有给定方法汇集到一个给定的 .m 文件中，因为类型 id 的对象可以接收任何消息*

*[当然，它可以接收消息，但是如果它没有实现它仍然会崩溃。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-02T17:49:46.387

这是一个切题的答案，也是一个思想实验。

但在此之前，我会注意到您可以通过 skipping 获得您的属性自动完成`id`，如下所示：

```
NSObject<MyProtocol> *thing;
thing.▮ 
```

但是假设您不希望整个`NSObject`方法列表影响您的完成，您*可以*执行类似的操作

```
EmptyClass<MyProtocol> *thing = [ThingManager currentThing];

// completion list will be (close) to only the protocol props
thing.▮ 
```

`EmptyClass`提供类似的“好的，没有承诺！” 作用`id`，但自动完成喜欢它。这是`EmptyClass`：

```
NS_ROOT_CLASS
@interface EmptyClass

@end

@implementation EmptyClass

+ (void)initialize {} // required

@end 
```

请注意，其中的对象`thing`实际上并不植根于`EmptyClass`（*不可能*），所以这是高度伪造的。然而，它

*   *大大低估*了`thing`实际可以做什么。
*   不（**不能！**）实例化一个`EmptyClass`对象。

那为什么不呢？如果你*真的很*努力，你可能会导致类似的问题

```
EmptyClass *nooooo = [[NSClassFromString(@"EmptyClass") alloc] init]; 
```

这将立即异常。但并不是真正需要避免的棘手错误。

一个陷阱不会让我感到惊讶，但我现在不知道。请留下评论，如果你这样做。

# android - 从活动链的上层位置修改主活动数组的对象

> ID：14534224
> 
> 赞同：0
> 
> 时间：2013-01-26T05:39:08.360
> 
> 标签：android, android-activity, chain

我有一系列活动：Act1->Act2->Act3。Act2 是显示 Act1 中对象数组中的项目的视图，Act3 是显示来自 Act2 中单击的项目的数据的视图。在 Act2 中长按可以删除项目，在 Act3 中长按可以修改项目中的数据。删除或修改项目时，我希望保留在相应的视图中并显示更新的数据。

我将如何最好地实现这一目标？我会将 Act1 中的对象数组设为静态还是有其他方法？

# php - 需要显示不带小数的价格

> ID：14534229
> 
> 赞同：1
> 
> 时间：2013-01-26T05:41:00.713
> 
> 标签：php, formatting, numbers

我试图显示产品的价格，当价格是一个整数时，不显示小数点“.00”；但当前结果总是显示十进制值。我在下面提供了我当前的逻辑；

```
$price_value = "20.00"; //coming from DB as string

if (is_int($price_value)) {

   //Display whole number without decimal
   $to_print = number_format($price_value,0);

else {
  //Show the decimal value
  $to_print = number_format($price_value,2);

}

//When I print this value I always get "`20.00`" not "`20`" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:44:19.900

该变量不被视为整数，因为您转换了字符串。

参见例如：

```
php > var_dump(is_int("23.0"));
bool(false)
php > var_dump(is_int("23"));
bool(false)
php > var_dump(is_int(23));
bool(true) 
```

您可以改为执行以下操作：

```
if( abs($price_value - floor($price_value)) < 0.001 )
  //Display whole number without decimal
  $to_print = number_format($price_value,0);
else {
  //Show the decimal value
  $to_print = number_format($price_value,2);
} 
```

0.001 考虑了将字符串转换为小数时的任何舍入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:44:43.973

尝试仅删除“0”参数。无论如何，它默认为它。

如果这不起作用并且您坚持这样做，则可以添加所有参数：

```
string number_format ( float $number , int $decimals = 0 , string $dec_point = '.' , string $thousands_sep = ',' ) 
```

并将 dec_point 设置为可用于拆分的字符值，然后返回字符串直到该点。首先检查第一个想法是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:45:54.320

你可以用来打印没有小数的值

```
$to_print = (int) $price_value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T06:08:25.303

rather than `is_int()` (which returns false work on strings), consider using `fmod()`:

```
$price_value = "20.00";
if (fmod($price_value,1) === 0.0)
    $to_print = number_format($price_value,0);
else
    $to_print = number_format($price_value,2); 
```

It probably doesn't work as well for higher-precision numbers, but I tested it with a few reasonable price values and it seems to work okay.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T13:29:57.203

you can try this little class : [https://github.com/johndodev/MoneyFormatter](https://github.com/johndodev/MoneyFormatter)

# java - 为什么我不能在 for 循环中添加 i 加一个随机整数？

> ID：14534231
> 
> 赞同：-2
> 
> 时间：2013-01-26T05:41:16.860
> 
> 标签：java

有人可以向我解释为什么我不能 5 到我吗？每次我尝试编译时，我都会收到一个错误，说它不是一个语句。

```
for (int i = 0; i < s; i+5) {

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T05:42:38.903

`i + 5`单独不修改`i`。你仍然需要改变`i`：

```
for (int i = 0; i < s; i += 5) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:44:21.590

@Blender 建议的另一种方法是：

```
for (int i = 0; i < s; i=i+5) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:49:25.520

i 的值不会增加 i+5。试试这个

```
for (int i=0;i<s ;i=i+5 ){

} 
```

或者

```
for(int i=0;i<s;i+=5){

} 
```

# symfony - 使用 JMSSerializer 反序列化原则引用

> ID：14534234
> 
> 赞同：2
> 
> 时间：2013-01-26T05:41:39.873
> 
> 标签：symfony, doctrine-orm, jmsserializerbundle

我不确定如何正确编写标题，因为我不确定我在寻找什么，但基本上我想知道是否有办法反序列化以下 json：

```
{ "title": "hello world", "user": 1 } 
```

但是由于***user***是一个 ORM 映射，因此请尝试从其存储库中查找实体，而不是尝试直接解析它。

我可以通过在这种情况下使用处理程序轻松地为特定字段执行此操作，传递 EM 并查找实体，但我希望提出一个更通用的解决方案，其中任何关系都可以通过它的序列化字段来指定（为了创建一个新实体）或通过它的 id 来查找现有实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:59:39.110

JMSSerializer bundle 需要添加额外的注解

```
/**
 * @ORM\OneToMany(targetEntity="Test", mappedBy="myentity", fetch="LAZY", cascade={"persist"})
 * @ORM\OrderBy({"dateTo" = "DESC"})
 * @Expose
 * @Type("ArrayCollection<Acme\Bundle\Entity\Test>")
 */ 
```

# php - 连接两个表后打印标题和计数ID的SQL语句

> ID：14534236
> 
> 赞同：0
> 
> 时间：2013-01-26T05:41:42.603
> 
> 标签：php, mysql, sql, wordpress, phpmyadmin

```
SELECT b.post_title
     , a.post_id
     , Deriv1.Count
FROM  wp_posts b
    , wp_postmeta a
LEFT OUTER JOIN (    
   SELECT meta_value, COUNT( * ) AS Count
   FROM  wp_postmeta
   GROUP BY meta_value
   ) Deriv1 
ON a.post_id = Deriv1.meta_value
WHERE a.meta_value = 1
  AND a.meta_key = 'type-select' 
  AND b.post_status = 'publish'
  and post_type = 'car-cc' 
```

当前的问题`SQl STATEMENT`是，当我提供`meta_value =1`它时，它正在获取所有值，即还列出`post_id`了没有的值。`meta_value =1`

[http://sqlfiddle.com/#!2/1115a7/1](http://sqlfiddle.com/#!2/1115a7/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:51:42.607

我认为问题在于您没有加入 wp_posts 表和 wp_postmeta 表。将此添加到您的 WHERE 子句中：

```
AND a.post_id = b.ID 
```

或者，只需在两个表上执行 INNER JOIN：

```
SELECT b.post_title
     , a.post_id
     , Deriv1.Count
FROM  wp_posts b INNER JOIN 
        wp_postmeta a ON a.post_id = b.ID
LEFT OUTER JOIN (    
   SELECT meta_value, COUNT( * ) AS Count
   FROM  wp_postmeta
   GROUP BY meta_value
   ) Deriv1 
ON a.post_id = Deriv1.meta_value
WHERE a.meta_value = 1
  AND a.meta_key = 'type-select' 
  AND b.post_status = 'publish'
  and post_type = 'car-cc' 
```

顺便说一句——你想要每个组的计数吗？如果是这样，您的查询可以简化：

```
SELECT b.post_title, a.post_id, COUNT( * ) as Total
FROM  wp_posts b INNER JOIN 
            wp_postmeta a ON a.post_id = b.ID
    WHERE a.meta_value = 1
      AND a.meta_key = 'type-select' 
      AND b.post_status = 'publish'
      and post_type = 'car-cc'
GROUP BY b.post_title, a.post_id 
```

这是一些更新的[小提琴](http://sqlfiddle.com/#!2/1115a7/12)。不确定您想要的输出。

祝你好运。

# python - 在python中缩短语句的任何方法

> ID：14534237
> 
> 赞同：0
> 
> 时间：2013-01-26T05:41:51.007
> 
> 标签：python, dictionary

我想做以下事情（在对似乎没有返回原始对象的python方法感到恼火之后）：

从字典中取出值`d`，并以相反的顺序对其进行排序

```
values=d.values()
values.sort(reverse=True) 
```

但是有没有办法将它缩短为一条线？一般来说，我也想做：

```
weight=range(1,27)
weight.reverse() 
```

（我当然可以使用`range(26,0,-1)`，但如果我坚持我上面写的，有没有办法做到这一点`weight=range(1,27).reverse()`？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:49:14.400

您可以使用以下`sorted`功能：

```
rvals = sorted(d.values(), reverse=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:49:51.993

通常，Python 中的变异方法返回`None`.

在这种特殊情况下，有一些对您有用的内置插件：

```
weight = list(reversed(range(1,27))) 
```

`reversed`和`sorted`内置函数返回新列表，因此您可以根据需要继续使用旧列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T05:50:52.903

使用内置函数`sorted`和`reversed`：

```
values = sorted(d.values, reverse=True)

weight = reversed(range(1,27)) 
```

# java - 使用html单元点击链接返回相同的页面然后成为java中的死锁状态

> ID：14534240
> 
> 赞同：2
> 
> 时间：2013-01-26T05:42:37.980
> 
> 标签：java, htmlunit

我最近读到通过 html 单元我们可以模拟页面。

我对我的论文有类似的要求。我必须将特定链接的所有评论提取到我的数据库中。我目前正在研究雅虎新闻。

假设我正在使用“http://news.yahoo.com/yemen-says-regional-al-qaedas-deputy-head-dead-184541137.html”链接。该链接目前有 125 条评论。当我打开页面查看更多评论时显示 10 条我必须按“更多”链接，然后 ajax 请求进入服务器并显示 10 条更多评论。现在我正在使用以下代码来获取所有评论。

```
 String google = "http://news.yahoo.com/yemen-says-regional-al-qaedas-deputy-  head-dead-184541137.html";

        WebClient webClient = new WebClient();
         HtmlPage page1 = webClient.getPage(google);
         HtmlAnchor advancedSearchAn = (HtmlAnchor)page1.getElementById("ugccmt-view-more");

        while(true){
            if(advancedSearchAn == null){
                String text = page1.asText();
           System.out.println(text);
                break;
            }
           page1 = advancedSearchAn.click();
           advancedSearchAn = (HtmlAnchor)page1.getElementById("ugccmt-view-more"); 
```

任何人都可以建议我在这段代码中做错了什么，因为它只是给了我前 10 条评论的相同页面。

# .net - 如何表示两个不同时间.NET之间的跨度

> ID：14534241
> 
> 赞同：0
> 
> 时间：2013-01-26T05:42:47.297
> 
> 标签：.net, vb.net

我正在通过.net 构建一个闹钟。我想通过百分比（进度条）显示警报即将触发的时间。我目前有一个功能可以让我从警报时间和返回小时、分钟和秒的当前系统时间倒计时，但我没有能够弄清楚这一点..

```
Dim span As System.TimeSpan = TimeEnd.TimeOfDay - DateTime.Now.TimeOfDay
Dim remaining As String, remain As String, aTime As String

remaining = span.Hours & "hr:" & span.Minutes & "min:" & span.Seconds & "sec"
remain = span.Hours & span.Minutes & span.Seconds

For y = 0 To remain

    pBar.Minimum = 0
    pBar.Maximum = remain
    pBar.Value = y

    '  MsgBox("Min: " & pBar.Minimum & " Max:" & pBar.Maximum)
    Exit Sub

Next y 
```

* * *

我想我需要澄清一下...

我有两次

闹钟时间：5:00：下午

当前时间：不管它是什么

我需要计算两个值之间的时间量，并在进度条中表示这两个值何时相遇，因为进度条会在它们接近时填满。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:32:10.083

您遇到的主要问题之一是 ProgressBar 需要整数，而 Timespan 的 Hour、Minute 和 Seconds 属性只给出整数，即 2 分钟将返回 2 而它将是 120 秒，因此您需要将它们乘以公共在这种情况下，我使用秒的分辨率。我创建了一个将 DateTimePicker 设置为 Time 的示例，一个间隔为 1 秒的 Timer，并创建了一个函数来区分两个 DateTime 对象。看看是否适合你。

```
Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        ProgressBar1.Minimum = 0
        ProgressBar1.Maximum = GetTimeDifference(DateTimePicker1.Value, DateTime.Now)
        Timer1.Start()
    End Sub
    Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
        Dim value As Integer = ProgressBar1.Maximum - GetTimeDifference(DateTimePicker1.Value, DateTime.Now)
        If value > ProgressBar1.Maximum Then
            Timer1.Stop()
            Exit Sub
        End If
        ProgressBar1.Value = value

    End Sub

    Public Function GetTimeDifference(EndTime As DateTime, StartTime As DateTime) As Integer
        Dim span As TimeSpan = EndTime.TimeOfDay - StartTime.TimeOfDay
        Dim hour As Integer = span.Hours * 360
        Dim minute As Integer = span.Minutes * 60
        Dim second As Integer = span.Seconds
        Dim result As Integer = hour + minute + second

        Return result

    End Function

End Class 
```

根据康拉德评论修改功能：

```
Public Function GetTimeDifference(EndTime As DateTime, StartTime As DateTime) As Integer

    Dim span As TimeSpan = EndTime.TimeOfDay - StartTime.TimeOfDay
    Dim result As Integer = CInt(span.TotalSeconds)

    Return result

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:55:20.537

```
 Dim span As System.TimeSpan = TimeEnd.TimeOfDay - DateTime.Now.TimeOfDay
    Dim remaining As String, remain As String, aTime As String

    remaining = span.Hours & "hr:" & span.Minutes & "min:" & span.Seconds & "sec"
    remain = span.Hours & span.Minutes & span.Seconds

    For y = 0 To remain

        pBar.Minimum = 0
        pBar.Maximum = remain
        pBar.Value = y

        '  MsgBox("Min: " & pBar.Minimum & " Max:" & pBar.Maximum)
        Exit Sub

    Next y 
```

我正在尝试将 pbar.maximum 设置为剩余时间，并随着时间接近警报时间而使其进展。

# java - Java中的Base64异常

> ID：14534243
> 
> 赞同：0
> 
> 时间：2013-01-26T05:43:03.240
> 
> 标签：java, soap, pdf-generation

在 java 中执行以下操作时，我在 0: 37(decimal) 异常处得到 Bad Base64 输入字符。

```
static void byteArrayToFile(byte[] bArray) {  
        try {  
            // Create file  
            String pathName = AppConfig.getInstance().getConfigValue("webapp.root") + File.separator + "temp"+File.separator+"heasas.pdf";
            FileWriter fstream = new FileWriter(pathName);  
            BufferedWriter out = new BufferedWriter(fstream);  
            for (Byte b: bArray) {  
                out.write(b);  
            }  
            out.close();  
        } catch (Exception e) {  
            System.err.println("Error: " + e.getMessage());  
        } 
```

大家好， 在收到来自第 3 方的 Soap 消息时，我编写了以下代码片段来获取附件内容： Object content = attachment1.getContent(); 写PDF（内容）；

```
private void writePdf(Object content) throws IOException, PrintException, DocumentException {
        String str = content.toString();
        byte[] b = Base64.decode(str);
        byteArrayToFile(b);

} 
```

这是我将字节数组转换为pdf的逻辑：

```
static void byteArrayToFile(byte[] bArray) {  
    try {  
        // Create file  
        String pathName = AppConfig.getInstance().getConfigValue("webapp.root") + File.separator + "temp"+File.separator+"heasas.pdf";
        FileWriter fstream = new FileWriter(pathName);  
        BufferedWriter out = new BufferedWriter(fstream);  
        for (Byte b: bArray) {  
            out.write(b);  
        }  
        out.close();  
    } catch (Exception e) {  
        System.err.println("Error: " + e.getMessage());  
    }  
} 
```

任何人都可以建议我现在的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:02:08.913

从[FileWriter javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)：

> FileWriter 用于写入字符流。要写入原始字节流，请考虑使用 FileOutputStream。

# windows - 在将输出重定向到批处理文件中的文件时异步执行命令？

> ID：14534244
> 
> 赞同：2
> 
> 时间：2013-01-26T05:43:03.760
> 
> 标签：windows, asynchronous, batch-file, cmd

假设在一个批处理文件中，我想异步执行*myCommand*（不等待它完成）。而且我不想在新的控制台窗口中执行*myCommand 。*

同时，我想将*myCommand*的输出重定向到 output.txt

所以在批处理文件中，如果我写

```
START myCommand > output.txt 
```

output.txt 将为空，我将看到一个新窗口。

如果我写

```
myCommand > output.txt 
```

然后我无法异步执行它。

有什么办法可以达到这三个要求吗？（异步，无新窗口，重定向输出）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:59:17.630

我还没有完全测试它，但我认为这可能有效：

```
start /b "" myCommand >output.txt 
```

我相信这两种形式都可以正常工作 - 唯一的区别是[标准错误](https://en.wikipedia.org/wiki/Standard_streams#Standard_error_.28stderr.29)是否也被重定向并且 START 无法启动 myCommand。

重定向 START：myCommand 和 START 输出都被重定向到文件。

```
start /b "" myCommand >output.txt >2&1 
```

仅重定向 myCommand：仅重定向 myCommand 输出。任何 START 错误信息都会出现在屏幕上。请注意，我选择逃避重定向，而不是[使用像 jeb 这样的引号](https://stackoverflow.com/questions/14534244/execute-a-command-asynchronously-while-redirecting-the-output-to-a-file-in-a-bat/14535432#14535432)。

```
start /b "" myCommand ^>output.txt ^>2^&1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T09:07:27.033

几乎像 dbenhams 回答，但您需要强制重定向到新线程，而不是`start`命令。

```
start "myTitle" "myCommand > output.txt" 
```

# angularjs - 在 Laravel 中验证 Input::json()

> ID：14534246
> 
> 赞同：1
> 
> 时间：2013-01-26T05:43:12.850
> 
> 标签：angularjs, laravel, angular-resource

验证不适用于 Input::json。我尝试了使用 json_decode/使用数组的不同方法，但仍然没有运气。这是我的代码：

```
//routes.php
Route::get('create', function() {

    $rules = array(
        'username' => 'required',
        'password' => 'required',
    );

    $input = Input::json();
    //var_dump($input); //outputs std obj with correct inputs
    $validation = Validator::make($input, $rules);
    if ($validation->fails()) { //throws exeption "Call to a member function to_array() on a non-object"
        return Response::json($validation->errors->all());
    }

} 
```

我正在使用 Angular Resource 发布数据……但它总是抛出错误“调用非对象上的成员函数 to_array()”……我无法粘贴我的 Angular 代码，因为我无法正确格式化它而stackoverflow不允许我这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:37:53.653

这是因为在 input::json() 中返回一个对象，而验证方法需要数组或 eloquent 对象。您可以做的是将对象转换为数组。

```
$input = Input::json();
$input_array = (array)$input;

$validation = Validator::make($input_array, $rules); 
```

更新：

在与@Ryan 讨论后，我注意到问题不在于验证，而是在 response::eloquent() 中传递了一个数组而不是一个雄辩的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T20:00:36.727

从 [至少] Laravel 5.3 开始，您需要将 ->all() 添加到 @Raftalks 发布的答案中。这是一种在一行中自动抛出异常 (422) 的简写方法，其中包含所有错误：

```
use Validator;
use Input;

... other stuff

Validator::make((array)Input::json()->all(), ["rule"=>"filter"])->validate(); 
```

# list - 如何在scala列表中查找可重复元素的数量

> ID：14534248
> 
> 赞同：2
> 
> 时间：2013-01-26T05:43:29.200
> 
> 标签：list, scala

假设您有一个`List(1,1,1,4,4,1)`并且必须计算作为列表头部的元素连续重复了多少次。在上面的例子中，方法应该返回 3。在这个方法中，我们只关心第一个元素。

我走了这么远，卡住了。给定第一个不可重复的字符，我想打破，如何？

```
 def firstRepeated [X] (xs: List[X]) : Int = xs match {
     case Nil    => 0
     case y::ys  => ys match {
       case Nil   => 0
       case z::zs => if (y == z) 1 + firstRepeated(zs) else // break
     }
 } 
```

另外，在上面的代码中，我认为我没有正确处理 list 的情况`z::Nil`

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T13:20:51.797

[`GenSeqLike`](http://www.scala-lang.org/api/current/scala/collection/GenSeqLike.html)在（`List`继承自）中也有一个方法： `prefixLength`. 这是一个非常简短的答案：

```
s.prefixLength(_==s.head) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T06:35:02.443

这是我的做法：

```
def getHeadCount(xs:List[Int]) = xs.count(_==xs.head)-1
val x = List(1,1,1,4,4,1)
getHeadCount(x) //Returns 3 
```

但是要回答你的问题，你真的不需要打破。我已经浏览了你的代码，根本问题就在这条线上

```
case z::zs => if (y == z) 1 + firstRepeated(zs) else // break 
```

`zs`这里不再是您的原始数组，并且在该数组上运行`firstRepeated`将使用第一个元素进行计数，`zs`其中可能是也可能不是`xs`. 以下是我将如何重写您的代码：

```
def firstRepeated[X](xs: List[X]): Int = xs match {
  case Nil => 0
  case y :: ys => ys match {
    case Nil => 0
    case z :: zs => {
      if (y == z) {
        //println(zs)
        1 + firstRepeated(z :: zs)
      } else {
        firstRepeated(y :: zs)
      }
    }
  }
}                                               //> firstRepeated: [X](xs: List[X])Int

val x = List(1, 1, 1, 4, 4, 1)                  //> x  : List[Int] = List(1, 1, 1, 4, 4, 1)

firstRepeated(x)                                //> res0: Int = 3 
```

如果您对它的实施方式有任何疑问，请查看并告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T05:49:01.757

```
xs.headOption.map(h => xs.takeWhile(_ == h).size).getOrElse(0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T06:14:00.297

另一种方法：

```
xs.span(_ == xs.head)._1.size 
```

# android - 从 Textview 获取价值

> ID：14534253
> 
> 赞同：1
> 
> 时间：2013-01-26T05:44:17.903
> 
> 标签：android, android-activity, textview

如何从中获取值`TextView`并将其存储在 a 中`String`？在这里，我试图创建一个具有 TextView 值的字符串并将其写入文件。

下面的代码显示了运行时错误：

```
package com.ralley.par2;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;

import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

    public class Par2Activity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            TextView txtData1;

            txtData1 = (TextView) findViewById(R.id.txtData1);

            try {
            File myFile = new File("/sdcard/mysdfile.txt");

                myFile.createNewFile();
                FileOutputStream fOut = new FileOutputStream(myFile);
                OutputStreamWriter myOutWriter = 
                                        new OutputStreamWriter(fOut);
                String s = txtData1.getText().toString();
                myOutWriter.write(s);
                myOutWriter.close();
                fOut.close();
                Toast.makeText(getBaseContext(),
                        "Done writing SD 'mysdfile.txt'",
                        Toast.LENGTH_SHORT).show();

            } 

            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

**日志错误：**

```
12-06 16:51:47.794: D/AndroidRuntime(3291): Shutting down VM
12-06 16:51:47.794: W/dalvikvm(3291): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-06 16:51:47.814: E/AndroidRuntime(3291): FATAL EXCEPTION: main
12-06 16:51:47.814: E/AndroidRuntime(3291): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ralley.par2/com.ralley.par2.Par2Activity}: java.lang.NullPointerException
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.os.Looper.loop(Looper.java:123)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at java.lang.reflect.Method.invokeNative(Native Method)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at java.lang.reflect.Method.invoke(Method.java:507)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at dalvik.system.NativeStart.main(Native Method)
12-06 16:51:47.814: E/AndroidRuntime(3291): Caused by: java.lang.NullPointerException
12-06 16:51:47.814: E/AndroidRuntime(3291):     at com.ralley.par2.Par2Activity.onCreate(Par2Activity.java:30)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-06 16:51:47.814: E/AndroidRuntime(3291):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-06 16:51:47.814: E/AndroidRuntime(3291):     ... 11 more
12-06 16:52:04.874: I/Process(3291): Sending signal. PID: 3291 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T05:58:16.837

目前，在从 Current Activity 布局获取 UI 元素之前，您没有为 Activity 设置布局，因此`setContentView` 用于将 Activity 的布局设置为：

```
 public class Par2Activity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main); ///<<<<<<<Set layout here for Activity
           //....your code here.... 
```

# python - Python - 仅在忽略大小写的字符串中计算字母数

> ID：14534256
> 
> 赞同：1
> 
> 时间：2013-01-26T05:44:22.697
> 
> 标签：python, string

我试图在忽略大小写、空格和特殊字符的字符串中查找每个字母的出现次数。做这个的最好方式是什么。

例如：

```
i/p: ABCccCDde :)! f

o/p: A=1, B=1, C=4, D=2, E=1 
```

我试过了

```
abc = Counter(line.rstrip('\n')) 
```

而且，`defaultdict`但他们不忽略大小写。我还需要在不花费太多时间的情况下清除特殊字符

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T05:52:30.957

尝试

```
>>> abc = 'ABCccCDde :)! f'
>>> from collections import Counter
>>> Counter(c for c in abc.upper() if c.isalpha())
Counter({'C': 4, 'D': 2, 'A': 1, 'B': 1, 'E': 1, 'F': 1}) 
```

# tinymce - 如何让 TinyMCE 表情符号使用绝对 URL？

> ID：14534262
> 
> 赞同：2
> 
> 时间：2013-01-26T05:45:21.977
> 
> 标签：tinymce

我的 TinyMCE 安装中的表情符号都使用相对 URL，例如“tinymce/jscripts/tiny_mce/plugins/emotions/img/smiley-cool.gif”。

如何告诉 TinyMCE 使用绝对 URL，例如“/tinymce/jscripts/tiny_mce/plugins/emotions/img/smiley-cool.gif”？我努力了

```
 relative_urls : false,
  remove_script_host : false,
  convert_urls : true, 
```

在`tinyMCE.init({ ... });`.

我也尝试过使用`document_base_url : "/",`，但这些方法都没有改变表情符号的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-04T21:01:11.243

只是寻找答案，并自己管理。

```
relative_urls: false,
document_base_url: '//yoururl.com/', 
```

也许它会与`document_base_url: '//',`

# deployment - 如何在 intellij 11 中设置本地谷歌应用服务器

> ID：14534270
> 
> 赞同：3
> 
> 时间：2013-01-26T05:46:35.150
> 
> 标签：deployment, intellij-idea

我正在尝试通过 intellij 11 Ultimate 将我的应用程序部署到 Google App Engine (GAE)。

我已经下载了 GAE sdk 并按照说明（[此处](http://www.jetbrains.com/idea/features/google_app_engine.html)）了解如何正确设置 intellij。

问题是当我尝试添加本地 GAE 来测试我得到的应用程序时

> 错误：未配置应用程序服务器“AppEngine Dev”

Intellij 11，GAE java-sdk-1.7.4

错误消息，我不确定我错过了什么。![在此处输入图像描述](../Images/ace7ede42241f6594be4db2f76430564.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:46:23.643

看起来像一个错误。只有在删除 GAE 方面后，我才能单击运行/调试配置中的配置按钮。完成此操作后，我可以一次又一次地添加构面。

# actionscript-3 - 无法引用具有变量实例名称的子项 [语法]

> ID：14534271
> 
> 赞同：0
> 
> 时间：2013-01-26T05:46:34.620
> 
> 标签：actionscript-3, flash, instance

我想为我的游戏生成村民，然后将它们组织成一个列表，但我遇到了一些困难，[这](http://i.imgur.com/mqwLE6U.png)就是它应该看起来的样子，而[这](http://i.imgur.com/oWLeglq.png)就是它实际的样子。生成亲属的代码是：

```
var k = new kinsmen  ;
menuArea.kinsmenDivider.addChild(k);
totalKinsmen++;
totalKinsmenAlive++;
k.name = "kinsmen" + totalKinsmen; 
```

用于对它们进行排序的代码是：

```
for (var i:int = 1; i < (totalKinsmen+1); i++) {
if (menuArea.kinsmenDivider.getChildByName("kinsmen"+i) !=null) {
    menuArea.kinsmenDivider["kinsmen" + i].y = menuItemCount * 107.5;
    menuItemCount++;}} 
```

这应该查看曾经存在的每个亲属的 ID，当它找到一个活着的人的 ID 时，它应该在菜单中给它一个位置并继续查看其他 ID。

```
trace ("kinsmen" + totalKinsmen);
trace (menuArea.kinsmenDivider.getChildByName("kinsmen"+i)); 
```

在我的测试中，两者总是具有相同的值。调试器在运行时发布以下错误：

```
TypeError: Error #1010: A term is undefined and has no properties. 
```

当我删除 ["kinsmen" + i] 时，它会停止给出错误，并且每次生成新的 kinsmen 时整个菜单都会向下移动，所以我知道这是导致问题的部分，但我不知道为什么或如何解决它并且会感谢帮助，以上所有代码都在我的文档类中。几天前我才开始编写 AS3，所以我还是有点不放心。为阅读喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:00:09.463

您可以在任何地方正确访问剪辑，除了

```
menuArea.kinsmenDivider["kinsmen" + i].y 
```

不应该是：

```
menuArea.kinsmenDivider.getChildByName("kinsmen" + i).y 
```

# linux - 完成 libftdi 中缺失的 .so 文件

> ID：14534272
> 
> 赞同：4
> 
> 时间：2013-01-26T05:46:49.440
> 
> 标签：linux, ftdi

我正在使用 ftdi 提供的 ft232r 库通过 Linux Mint 对 LPC11C14 微控制器进行编程。要初始化软件，我需要运行以下命令：

```
./ft232r_prog --manufacturer Sunswift --product $(PROJECT_NAME) --invert_rts --invert_dtr 
```

当我运行代码时，出现以下问题：

```
Error while loading shared libraries: libftdi.so.1: cannot open shared object file: No such file or directory 
```

在运行 ldd ft232r_prog 时，我得到：

```
linux-gate.so.1 =>  (0xf77b8000)
libusb-0.1.so.4 => /lib/i386-linux-gnu/libusb-0.1.so.4 (0xf7790000)
libftdi.so.1 => not found
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xf75e5000)
/lib/ld-linux.so.2 (0xf77b9000) 
```

该文件`libftdi.so.1`位于`/usr/lib/x86_64-linux-gnu`. 由于可执行的 ft232r_prog 找不到 .so 文件，我尝试了以下方法：

1.  更新了路径环境变量以包含 /usr/lib/x86_64-linux-gnu -- 失败
2.  更新了 $LD_LIBRARY_PATH 环境变量以包含`/usr/lib/x86_64-linux-gnu`-- 失败
3.  跑`ldconfig`进来`/usr/lib/x86_64-linux-gnu`——失败

这似乎是包含共享库的常见问题。关于如何解决它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-12T04:53:40.967

要在 Ubuntu 12.04 x64 上安装 32 位版本的 libftdi，请尝试以下操作：

```
$ sudo apt-get install libftdi1:i386 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T06:18:58.407

我怀疑你的系统是 64 位的，而程序是 32 位的。在这种情况下，您需要安装 32 位版本的库。

# wpf - 是否可以将 Window 作为 WPF 项目的 SplashScreen

> ID：14534277
> 
> 赞同：0
> 
> 时间：2013-01-26T05:48:25.920
> 
> 标签：wpf, splash-screen

当我使用`AddNewItem`向项目添加启动画面时，它会向项目添加图像文件。但我想知道是否可以将 a`Window`作为 WPF 项目的启动画面。

我试图将`BuildAction`a 的属性设置为`Window`，`SplashScreen`但项目无法编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:14:43.907

Andy Lang 显然解释了用这个简单的步骤制作启动画面。

请参考

[http://www.codeproject.com/Articles/38291/Implement-Splash-Screen-with-WPF](http://www.codeproject.com/Articles/38291/Implement-Splash-Screen-with-WPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T05:55:19.400

您需要创建一个普通窗口，在窗口内放置一个图像，并在适当的时候显示和隐藏它。.NET 中不存在“启动画面”之类的东西。

# mysql - Perl 和 DBD::mysql Can't load mysql.so... 也许所需的共享库或 dll 没有安装在预期的位置

> ID：14534279
> 
> 赞同：1
> 
> 时间：2013-01-26T05:48:51.690
> 
> 标签：mysql, perl, dbd

在使用本地安装的 perl 和通过 perlbrew 安装的模块的共享主机上运行此代码。它工作了好几个星期。有一天，它开始因以下输出而死亡：

```
/home/xxxx/perl5/perlbrew/perls/perl-5.16.2/bin/perl tweet.pl
install_driver(mysql) failed: Can't load '/home/xxxx/perl5/perlbrew/perls/perl-5.16.2/lib/site_perl/5.16.2/x86_64-linux/auto/DBD/mysql/mysql.so' for module DBD::mysql: libmysqlclient.so.15: cannot open shared object file: No such file or directory at /home/xxxx/perl5/perlbrew/perls/perl-5.16.2/lib/5.16.2/x86_64-linux/DynaLoader.pm line 190\. 
at (eval 27) line 3.
Compilation failed in require at (eval 27) line 3.
Perhaps a required shared library or dll isn't installed where expected
at subroutines.pm line 3. 
```

代码没有改变。我运行脚本的方式也没有改变。由于我在共享主机上运行此主机，因此我不知道服务器上可能已更新或更改了哪些内容，但是 perl 已安装到我的主目录中，就像我正在使用的所有模块一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:00:28.657

它看起来像 libmysqlclient 的问题。您正在运行什么发行版？

如果您正在运行 Debian（基于），请尝试“sudo apt-get purge libmysqlclient libmysqlclient-dev”，然后尝试“sudo apt-get install libmysqlclient libmysqlclient-dev”。

# android - android布局从屏幕推送视图

> ID：14534287
> 
> 赞同：1
> 
> 时间：2013-01-26T05:49:52.573
> 
> 标签：android, xml, layout, view

为了构建应用程序，我们有几个列表。列表项存在问题，这是自定义的，但非常简单。格式为：

![在此处输入图像描述](../Images/348ec9a7e4d588dde6c3e375f4f6d0f3.png)

这代表一个带有 2 个文本视图和一个图像视图的列表项

请注意，标题和日期实际上是在彼此下方，图像在右侧，中心垂直作为属性。**图像不应位于两个文本视图之间**

我将先给出 XML，然后再解释确切的问题。

**XML：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout 
        android:orientation="vertical" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView 
            android:textSize="16dip" 
            android:id="@+id/title"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"/>

        <TextView 
            android:textSize="12dip" 
            android:id="@+id/date"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"/>
    </LinearLayout>
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginRight="5dip" >

        <ImageView
            android:id="@+id/validationStateImg"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true" />
    </RelativeLayout>
</LinearLayout> 
```

**问题：** 从某种意义上说，这种布局完全按照 ascii 表示形式显示所有内容。当文本变长时，无法正常工作。在文本很长但不足以占用 2 行的情况下，它只会使图像视图变得很小。

在其他情况下，它只是将 imageview 完全推离屏幕。

我需要的是，当日期或其他文本视图的长度太长时，不能换行。当然，它需要是一种可移植到各种屏幕尺寸的解决方案。

我不是 UI 艺术家，因此，如果我在某种意义上滥用布局，我表示歉意，因为它们不应该被使用。

除了帮助，也欢迎提示和提示！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:41:34.077

我认为你最好的选择是一个简单的RelativeLayout：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="8dp"
    >
    <ImageView
        android:id="@+id/validationStateImg"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:gravity="center_vertical"
        />
    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/validationStateImg"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="16dp"
        />
    <TextView
        android:id="@+id/date"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/validationStateImg"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/title"
        />
</RelativeLayout> 
```

将 ImageView 对齐到父对象的右侧，让 TextViews 占据其余的宽度，但与 ImageView 的左侧对齐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T06:18:11.473

希望这可以帮助：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_weight = "1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="dasdfasdfasdfasdfsadfsdf dsfasdfasd asdfadsf dfasdfads asdfasdf"
        android:textSize="16dip" />

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="dasdfasdfasdfasdfsadfsdf"
        android:textSize="12dip" />
</LinearLayout>

<RelativeLayout
    android:layout_width="100dp"
    android:layout_height="match_parent"
    android:gravity="center"
    android:layout_marginRight="5dip" >

    <ImageView
        android:id="@+id/validationStateImg"
        android:src="@drawable/ic_launcher"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T06:07:19.303

我认为在这种情况下你需要一个不同的布局，检查这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout 
        android:orientation="vertical" 
        android:layout_width="0dp"
        android:layout_weight="1"
        android:gravity="center"
        android:layout_height="wrap_content">
        <TextView 
           android:textSize="16dip" 
           android:id="@+id/title"
           android:layout_width="match_parent" 
           android:layout_height="wrap_content"/>
        <TextView 
           android:textSize="12dip" 
           android:id="@+id/date"
           android:layout_width="match_parent" 
           android:layout_height="wrap_content"/>
    </LinearLayout>
    <ImageView
       android:id="@+id/validationStateImg"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:layout_gravity="center_vertical"/>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T06:14:44.280

如果您不希望您的图像缩小，那么您需要为其提供其父级提供的房地产的特定比例。

具体来说，作为其父级的 LinearLayout 需要有一个 weight_sum，然后文本和图像都需要有一个 layout_weight。

重量应该加起来。重量不必是整数，layout_width 必须为 0 非常重要（并且非常反直觉）（假设他们两个并排坐着）......所以......

我正在删除下面您需要重新添加的所有额外内容，只留下重要部分....

```
<LinearLayout weight_sum=2 layout_height=fill_parent>
   <TextView layout_weight=2 layout_height=0dp/>
   <ImageView layout_weight=2 layout_height=0dp />
   <TextView layout_weight=2 layout_height=0dp/>
</LinearLayout> 
```

这会将 LinearLayout 分成两半，左侧是文本（如果可以的话，它将换行），右侧是图像。您可以通过将总和设置为 3 并将边拆分为 2 和 1 来调整它，在这种情况下，文本将占屏幕的 2/3，图像占 1/3。或者将总和保留为 2，让左边为 1.3，右边为 0.7，以获得类似的效果。

# css - 移动网站，后台不缩放

> ID：14534288
> 
> 赞同：0
> 
> 时间：2013-01-26T05:49:56.817
> 
> 标签：css, mobile, background

我有这个网站（www.dragonit.ca），当您从移动设备查看它时，背景会继续向右显示。

我怎样才能使背景缩放到站点而不是需要您滚动的巨大尺寸？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:59:56.750

尝试使用`background-size:100%;`

让我知道它是否有效

# jquery - jQuery - 检查容器 div 是否有具有指定属性值的子项

> ID：14534289
> 
> 赞同：5
> 
> 时间：2013-01-26T05:50:15.493
> 
> 标签：jquery, html, containers, children

我希望能够检查容器 div 中是否有一个具有特定值属性的子级以及存在多少个实例。

例如，如果我有以下 HTML：

```
<div class='container'>
    <div class='child' myattr='myattrvalue1'>DIV CONTENTS</div>
    <div class='child' myattr='myattrvalue2'>DIV CONTENTS</div>
    <div class='child' myattr='myattrvalue3'>DIV CONTENTS</div>
    <div class='child' myattr='myattrvalue3'>DIV CONTENTS</div>
    <div class='child' myattr='myattrvalue3'>DIV CONTENTS</div>
    <div class='child' myattr='myattrvalue4'>DIV CONTENTS</div>
</div> 
```

我想要一个 jquery 行，它能够找到 $(".container") 中具有“child”类的任何 div 是否具有“myattr”的属性和“myattrvalue3”的值。我还希望能够确定存在多少这样的孩子的实例，在这个例子中，这将是 myattr='myattrvalue3' 的孩子的 3 个实例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T05:56:37.003

```
var $elems = $('.container .child[myattr=myattrvalue3]');
var length = $elems.length; // length of the selected elements 
```

请注意，这`myattr`不是有效属性。您可以改用 HTML5`data-*`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T05:56:12.660

find() 方法怎么样？

```
var $children = $('.container').find('.child[myattr="myattrvalue3"]'); 
```

并找到孩子的数量：

```
$children.length 
```

# magento-1.4 - magento-模型覆盖

> ID：14534290
> 
> 赞同：2
> 
> 时间：2013-01-26T05:50:30.337
> 
> 标签：magento-1.4, magento

我正在尝试向层级定价添加一个新属性，当我尝试覆盖 tierprice 类时，当我尝试保存项目并且在前端我无法查看任何项目时，我得到“指定的后端模型无效：目录/product_attribute_backend_tierprice”错误。

请帮我。

在我的 config.xml 中，我将类定义为

* * *

```
<modules>
   <Mypackage_Catalog>
     <version>0.1.0</version>
   </Mypackage_Catalog>
</modules>

<global>
    <models>
        <catalog>
            <rewrite>
                <product_type_price>Mypackage_Catalog_Model_Product_Type_Price</product_type_price>
                <product_attribute_backend_tierprice>Mypackage_Catalog_Model_Product_Attribute_Backend_Tierprice</product_attribute_backend_tierprice>
            </rewrite>
        </catalog>                          
        <catalog_resource_eav_mysql4>
            <rewrite>
                <product_attribute_backend_tierprice>Mypackage_Catalog_Model_Resource_Eav_Mysql4_Product_Attribute_Backend_Tierprice</product_attribute_backend_tierprice>
            </rewrite>                          
        </catalog_resource_eav_mysql4>
    </models>
</global> 
```

* * *

我的文件夹结构看起来像

```
app\code\local\Mypackage\Catalog\Model\Resource\Eav\Mysql4\Product\Attribute\Backend\Tierprice.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:22:59.477

对我来说，您似乎在配置 xml 中覆盖了 3 个类，但您的文件夹结构中只存在一个。我尝试了您在此处描述的模块（但没有对核心文件进行修改，只是复制了它们并更改了类定义）并得到了相同的错误。在 system.log 这个错误看起来像：

```
Failed opening 'Mypackage\Catalog\Model\Product\Attribute\Backend\Tierprice.php' for inclusion 
```

在您的文件夹结构中，您将需要以下文件（除了现有文件）：

```
app\code\local\Mypackage\Catalog\Model\Product\Attribute\Backend\Tierprice.php
app\code\local\Mypackage\Catalog\Model\Product\Type\Price.php 
```

![具有类定义的文件夹结构](../Images/86fa180fe35412055f5acc741c608cef.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:04:04.643

据我所知，您的文件 tierprice.php 应该大写，如果不这样做，请发布您的 Tierprice.php 文件

# jquery - e.preventDefault 不稳定且不阻止默认操作

> ID：14534296
> 
> 赞同：0
> 
> 时间：2013-01-26T05:51:20.957
> 
> 标签：jquery, events, preventdefault

我试图使链接不执行链接的默认操作，而是当用户单击链接时执行其余代码，在这种情况下，加载我使用 AJAX 调用的适当 url 元素并放置它们在正确的 Divs/span 中。这是代码...

```
 $(function(){
    $('body').append('<span id="view_mess">New Message</span><div id="mess_wrapper"><div id="new_mess_pop"><div id="button_wrap"><span id="post_date_time"></span><div id="users_contact_info"><div id="users_image"></div><div id="message_lister"></div></div><div id="message_post"></div><div id="inner_mess_wrapper"></div></div></div></div>');
      $('#message_lister').load('/privmsg?folder=inbox .tdtopics:lt(5)');
        $('#view_mess').click(function() {
      $('#mess_wrapper').show();
       });
 $('.topictitle').click(function(e) {
  var msg = $('.tdtopics a').attr('href');
   $.get(msg, function (data) {
     var elems = $(data);
      $('#post_date_time').append(elems.find('div.posthead h2'));
      $('#users_image').append(elems.find('.user-basic-info'));
      $('#message_post').append(elems.find('.entry-content'));
   }, 'html');
e.preventDefault();
  $('#mess_wrapper').show();
 }); 
```

我已经尝试过`e.preventDefault();`它在上面的代码中和函数代码之后的位置。也许我应该在第一个函数中写 e ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:10:47.310

```
Try with this :
Two things :you missed the end bracket of function  and e.preventdefault shuld be in start of the event 

 $(function(){
    $('body').append('<span id="view_mess">New Message</span><div id="mess_wrapper"><div id="new_mess_pop"><div id="button_wrap"><span id="post_date_time"></span><div id="users_contact_info"><div id="users_image"></div><div id="message_lister"></div></div><div id="message_post"></div><div id="inner_mess_wrapper"></div></div></div></div>');
      $('#message_lister').load('/privmsg?folder=inbox .tdtopics:lt(5)');
        $('#view_mess').click(function() {
      $('#mess_wrapper').show();
       });
 $('.topictitle').click(function(e) {
 e.preventDefault();
  var msg = $('.tdtopics a').attr('href');
   $.get(msg, function (data) {
     var elems = $(data);
      $('#post_date_time').append(elems.find('div.posthead h2'));
      $('#users_image').append(elems.find('.user-basic-info'));
      $('#message_post').append(elems.find('.entry-content'));
   }, 'html');
  $('#mess_wrapper').show();
 });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:07:29.390

尝试

```
return false; 
```

这将防止默认以及防止传播

# css - 如何在 GWT 中生成颜色并在 CSS 中动态应用

> ID：14534297
> 
> 赞同：0
> 
> 时间：2013-01-26T05:51:23.693
> 
> 标签：css, gwt, random, colors

在应用程序中，我需要使用不同的颜色。那就是我想动态生成颜色以及更改`CSS`属性。我用过

```
draw.getElement().getStyle().setProperty(); // Where draw is my flowpanel 
```

但我得到的错误不是camelCase格式。此外，由于我使用上述方法，我需要将参数作为字符串传递，但如果我在 Google 上生成不同的颜色，那么它们都采用不同的格式。

如何在 GWT 中实现这一点，以及如何在`CSS`课堂上应用生成的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:35:27.227

您传递的所有属性都应采用 CamelCase 格式，并且没有任何问题，只需将例如“background-color”更改为“backgroundColor”即可正确设置。因此，您可以通过这种方式动态更改颜色。修改 css 不是必要的（也不可行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:32:10.480

可以通过GWT提供的方法来做，比如 `draw.getElement().getStyle().setBackgroundColor(String value);`

您的问题不是普通的 '-' 格式，而是使用 camelCase 格式，这样`background-color`就变成了`backgroundColor`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:55:52.777

请注意，在设置样式属性时，您需要使用驼峰式大小写作为属性名称。

```
draw.getElement().getStyle().setProperty("background-color", "colorname");//gives error

draw.getElement().getStyle().setProperty("backgroundColor", "colorname");//will works 
```

并尝试使用[W3C 诽谤的颜色代码](http://www.docsteve.com/DocSteve/TechNotes/color_test.html) 。所有标准浏览器都支持这些代码

在那里你也可以找到非官方的颜色代码：P

# php - 空值提交到mysql数据库

> ID：14534301
> 
> 赞同：0
> 
> 时间：2013-01-26T05:52:20.240
> 
> 标签：php, mysql, variables, login, submit

我正在尝试为我的网站制作用户系统，但在提交时遇到了一些问题。它总是向数据库提交 0 的所有内容。我在 w3schools 上阅读了有关全局和局部变量的信息，我认为这可能是我的问题，但我不确定。这是我的代码

```
<?php
$con = mysql_connect(localhost, 262096, 9201999);
if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
mysql_select_db("262096", $con);
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$username = $_POST['username'];
$password = $_POST['password'];
$passwordconf = $_POST['passwordconf'];
$email = $_POST['email'];
$securityq = $_POST['securityq'];
$qanswer = $_POST['qanswer'];

if(!isset($firstname) || !isset($lastname) || !isset($username) || !isset($password) || !isset($passwordconf) || !isset($email) || !isset($securityq) || !isset($qanswer))
    {
    echo "You did not fill out the required fields.";
    }

$uname = "SELECT * FROM users WHERE username='{$username}'";
$unamequery = mysql_query($uname) or die(mysql_error());
if(mysql_num_rows($unamequery) > 0) 
    {
    echo "The username you entered is already taken";
    }

$emailfind = "SELECT * FROM users WHERE email='{$email}'";
$emailquery = mysql_query($emailfind) or die(mysql_error());
if(mysql_num_rows($emailquery) > 0)
    {
    echo "The email you entered is already registered";
    }

if($password != $passwordconf)
    {
    echo "The passwords you entered do not match";
    }

$regex = "/^[a-z0-9]+([_.-][a-z0-9]+)*@([a-z0-9]+([.-][a-z0-9]+)*)+.[a-z]{2,}$/i";
if(!preg_match($regex, $email))
    {
    echo "The email you entered is not in name@domain format";
    }

else
    {
    $salt = mcrypt_create_iv(32, MCRYPT_DEV_URANDOM);
    $hpassword = crypt($password,$salt);
    $insert = "INSERT INTO users (firstname, lastname, username, password, email, securityq, qanswer, salt)
    VALUES ('$firstname','$lastname','$username','$hpassword','$email','$securityq','$qanswer','$salt')";
    mysql_query($insert);

    if(!mysql_query($insert))
        {
        die('Could not submit');
        }
    else
        {
        echo "Information was submited.  Please check your email for confirmation";
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:31:53.193

让我试着回答。

首先，我同意转向 PDO 的建议。mysql_* 函数已弃用。但是，如果您想使用它，请直接**在**sql 之前转义每个变量，因为**'** -symbols 在您的 sql 中：

```
$hpassword  = mysql_real_escape_string($hpassword ); 
```

至于我，下面的语法比 insert ... values() 更容易查看：

```
$insert = "INSERT INTO `users` 
    SET `firstname` = '$firstname',
    SET `hpassword` = '$hpassword'..." 
```

实际上，我正试图忘记这种代码。我对简单的应用程序使用 PDO 或舒适的 uniDB 类。

无论密码匹配等错误如何插入用户都是正确的行为吗？你应该修复条件。

你的条件逻辑是错误的。你提交后`if(!preg_match($regex, $email))`。因此，如果电子邮件是正确的，它会提交。使用 ELSEIF 将其修复如下

```
$regex = "/^[a-z0-9]+([_.-][a-z0-9]+)*@([a-z0-9]+([.-][a-z0-9]+)*)+.[a-z]{2,}$/i";

if(mysql_num_rows($emailquery) > 0){
    echo "The email you entered is already registered";
}elseif($password != $passwordconf){
    echo "The passwords you entered do not match";
}elseif(!preg_match($regex, $email))
{
    echo "The email you entered is not in name@domain format";
}else{
    // insertion code HERE
} 
```

# php - 在 Magento PHP 中显示之前检查文件是否存在？

> ID：14534309
> 
> 赞同：3
> 
> 时间：2013-01-26T05:54:46.150
> 
> 标签：php, file, magento

我能够像这样获取文件的网络路径：

```
$filename = 'elephant.jpg';
$path_to_file = $this->getSkinUrl('manufacturertab');
$full_path = $path_to_file . '/' . $filename; 
```

但是，如果该文件不存在，那么我最终会得到一个损坏的图像链接。

我试过这个：

```
if(!file_exists($full_path)) {
  Mage::log('File doesn\'t exist.');
} else {
  ?><img src="<?php echo $full_path ?>" /><?php
} 
```

当然这不起作用，因为`file_exists`不适用于 url。

我该如何解决这个问题？

1.) 我可以在 Magento 中的系统路径和网址之间进行翻译吗？

例如类似（伪代码）：

```
$system_path = $this->getSystemPath('manufacturertab'); 
```

看起来对称且便携。

或 2.) 是否有一些 PHP 或 Magento 函数用于检查远程资源是否存在？但这似乎是一种浪费，因为资源确实是本地的。PHP使用http方法检查本地文件会很愚蠢，不是吗？

我目前使用的解决方案：

```
$system_path = Mage::getBaseDir('skin') . '/frontend/default/mytheme/manufacturertab'; // portable, but not pretty
$file_path = $system_path . '/' . $filename; 
```

然后我检查是否有`file_exists`，如果有，我会显示`img`. 但是我不喜欢必须对系统路径的部分路径进行硬编码与对 url 路径使用方法之间的不对称性。两者都有一个方法会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:22:57.190

功能

```
$localPath = Mage::getSingleton( 'core/design_package' )->getFilename( 'manufacturertab/' . $filename, array( '_type' => 'skin', '_default' => false ) ); 
```

将返回相同的路径

```
$urlPath = $this->getSkinUrl( 'manufacturertab/' . $filename ); 
```

但在您的本地文件系统上。你可以省略 '_default' => false 参数，它仍然可以工作（我把它留在那里只是因为 getSkinUrl 也在内部设置它）。

请注意，getSkinUrl 和 getFilename 的参数可以是文件或目录，但您应始终使用整个路径（带有文件名），以便回退机制正常工作。

考虑情况

皮肤/默认/默认/manufacturertab/a.jpg

皮肤/yourtheme/default/manufacturertab/b.jpg

在这种情况下，如果文件名作为参数提供，但对于您只设置文件夹名称的情况，它会返回 skin/yourtheme/ default/manufacturertab/ 对于这两种情况，当您附加文件名并检查 a.jpg 时，检查将失败。这就是为什么您始终提供整个路径作为参数的原因。

您仍然必须使用自己的函数来检查文件是否存在，因为 getFilename 函数返回默认路径如果文件不存在（返回 skin/default/default/manufacturertab/foo.jpg 如果manufacturertab/foo.jpg 不存在）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-31T04:09:29.043

它帮助我：

```
 $url = getimagesize($imagepath); //print_r($url); returns an array

    if (!is_array($url)) 
    {

                    //if file does not exists
    $imagepath=Mage::getDesign()->getSkinUrl('default path to image');

    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-05T06:04:06.730

```
$fileUrl = $this->getSkinUrl('images/elephant.jpg');
$filePath = str_replace( Mage::getBaseUrl(), Mage::getBaseDir() . '/', $fileUrl);

if (file_exists($filePath)) {
  // display image ($fileUrl)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-26T05:59:46.443

您可以使用

```
$thumb_image = file_get_contents($full_path) //if full path is url

//then check for empty
if (@$http_response_header == NULL) {
  // run check
} 
```

您也可以使用 curl 或尝试此链接[http://junal.wordpress.com/2008/07/22/checking-if-an-image-url-exist/](http://junal.wordpress.com/2008/07/22/checking-if-an-image-url-exist/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-09T14:18:55.750

`Mage::getBaseDir()`就是你要的。对于您的方案，`getSkinBaseDir()`将执行更好的工作。

```
 $filename = 'elephant.jpg';
    $full_path = Mage::getDesign()->getSkinBaseDir().'/manufacturertab/'.$filename;
    $full_URL=$this->getSkinUrl('manufacturertab/').$filename;

    if(!is_file($full_path)) {
      Mage::log('File doesn\'t exist.');
    } else {
      ?><img src="<?php echo $full_URL ?>" /><?php
    } 
```

请注意，`<img src>`您需要 URL，而不是系统路径。... `is_file()`，而不是`file_exists()`，在这种情况下，如果您确定要检查文件而不是目录，这可能是一个不错的选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-24T07:16:47.260

您可以使用以下内容：

```
$file = 'http://mysite.co.za/files/image.jpg';
$file_exists = (@fopen($file, "r")) ? true : false; 
```

尝试检查 URL 上是否存在图像时为我工作

# scala - 如何将以下类定义从 Java 转换为 Scala？

> ID：14534312
> 
> 赞同：0
> 
> 时间：2013-01-26T05:55:25.993
> 
> 标签：scala

我正在学习 Scala，但无法弄清楚如何将以下 Java 代码转换为 Scala：

```
class Parent {
  Parent(int i) {}
}
public class Test extends Parent {
  final static int I = 1;
  Test() {
    super(I);
  }
} 
```

请帮助我，谢谢。

这是我失败的尝试：

1.

```
class Parent(val i: Int) {}
object Test {
  val I = 1
}
class Test extends Parent(I) {
} 
```

2.

```
class Parent(val i: Int) {}
class Test extends Parent(I) {
  val I = 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:02:43.700

```
class Parent(i: Int)

class Test extends Parent(Test.I)  // `super` is done in the parent's constructor

object Test {
  val I = 1                        // `static` members go in an `object`
} 
```

笔记：

1.  您实际上并不需要空括号。
2.  仅当您希望它可公开访问（但不可修改）时才声明`i`。`val`默认情况下它是私有的。

# android - 如何在android Webview中的html5视频上使用电影图标更改灰色背景

> ID：14534313
> 
> 赞同：2
> 
> 时间：2013-01-26T05:55:35.120
> 
> 标签：android, video, background, webview

我正在开发一个通过 webview 加载网站的 android 应用程序，一切正常，视频可以播放。

但是，视频在空闲状态下显示灰色背景和中间的电影图标，在加载状态时显示灰色背景和加载图标。它不适合我的网站，所以我想把它改成黑色，或者如果可能的话，把它改成一些图像。

我该怎么做？

# javascript - 停止 Ipad 键盘弹出

> ID：14534314
> 
> 赞同：1
> 
> 时间：2013-01-26T05:56:05.387
> 
> 标签：javascript, jquery, iphone

我正在开发一个 PHP 应用程序，它将在 Ipad、PC、Iphone、android 手机等上运行。我在一个地方使用 jquery datepicker。现在，当我在 ipad 上工作时，只要我点击日期字段，就会立即出现 Ipad 键盘。根据我的要求，不需要键盘。我尝试了[这里给出的解决方案](https://stackoverflow.com/questions/10491790/ipad-how-to-prevent-the-keyboard-from-popping-up-on-jquery-datepicker)

但它没有用，因为我使用的是不同的日期选择器。所以如果你知道，请建议一个快速的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:33:19.353

你可以禁用它。像这样

```
$(".datePicker").datepicker({
    showOn: 'button',
    onClose: function(dateText, inst) 
    { 
        $(this).attr("disabled", false);
    },
    beforeShow: function(input, inst) 
    {
        $(this).attr("disabled", true);   //set disable to true
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:00:06.667

尝试将`readonly="true"`属性添加到字段以停止 iPad 键盘弹出。

# c++ - 将未声明的标识符与模板和继承跟进一起使用

> ID：14534316
> 
> 赞同：5
> 
> 时间：2013-01-26T05:56:18.843
> 
> 标签：c++, macos, gcc, compilation, visual-studio-2012

我在这里遇到了与上一个问题相同的问题： [使用模板和继承在 C++ 中使用未声明的标识符](https://stackoverflow.com/questions/10735611/use-of-undeclared-identifier-in-c-with-templates-and-inheritance)

总而言之，我们尝试从子类访问模板类的受保护属性。所描述的执行此操作的方法是使用`this->attribute`而不是仅`attribute`. 问题是，我想知道 Visual Studio 2012 为何不需要在变量引用前添加 this-> 以使程序正确编译和执行。我还想知道是否有办法在 gcc 或 OS X 上的其他编译器中使用该功能。

编辑：这是我在 Visual Studio 2012 中用来测试的代码。

```
//file a.h

template<class T>
class a
{
public:
    a(){value = 2;};
protected:
    T value;
};

template<class T>
class b: public a<T>
{
public:
    T getValue(){return value;};
};

//file main.cpp
#include <iostream>
#include "a.h"
using namespace std;
int main()
{
    b<int> myTest;
    cout<<myTest.getValue();
    system("pause");
    return 0;
} 
```

这不是使用 g++ 编译的，而是使用 Visual Studio 2012 编译的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:18:18.837

我相信描述在这种情况下适用的参数相关查找规则的标准部分是§14.6.2/3，其中规定了以下内容：

> 在类模板或类模板成员的定义中，如果类模板的基类依赖于模板参数，则在类定义点的非限定名称查找期间不会检查基类范围模板或成员，或在类模板或成员的实例化期间。

由于您的基类依赖于模板参数，因此不应检查依赖的基类范围。然而，一些编译器有这个错误。例如，GCC 正在执行额外的依赖基类范围查找，这[仅在版本 4.7 中得到修复](http://gcc.gnu.org/gcc-4.7/porting_to.html)（错误# [24163](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=24163)、[29131](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=29131)）。我不知道为什么 Visual Studio 编译器允许它。但如果是这样，那么在这方面显然不符合标准。您不应该依赖该错误，并且绝对不应该寻找具有类似错误的编译器来依赖。

# iphone - 在 iOS 中实施免费试用期

> ID：14534319
> 
> 赞同：4
> 
> 时间：2013-01-26T05:57:27.820
> 
> 标签：iphone, ios, xcode, ios6, trialware

我正在开发一个 iDevice 应用程序。我想让这个应用程序的用户可以从 iTunes 免费下载这个应用程序，但是在 1 周的试用期后，用户将被要求购买该应用程序。如果用户不购买它，那么他/她将不被允许使用该应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:13:42.540

使用钥匙串存储他们安装应用程序的日期。您的应用程序添加到钥匙串中的值在您的应用程序被卸载后仍然存在，并且可以在重新安装时再次访问。

[https://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898-CH4g-SW7](https://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898-CH4g-SW7)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T06:14:31.533

一种选择可能是 AKV 提出的选择：节省时间`NSUserDefaults`并在每次启动时检查它。

弱点是用户可以通过从 AppStore 重新安装应用程序来重置试用期。

一个不错的选择是使用钥匙串，它应该在应用程序的多个安装中保持不变。

或者，您可以在服务器上存储设备的唯一标识符，并在每次应用启动时检查它。

该解决方案的缺点是它需要有效的互联网连接，但它会阻止用户轻松绕过它。

最后一点，Apple 可能不会接受具有这种行为的应用程序。通常要求应用程序不要随着时间的推移禁用功能，即使某些边界线情况可能适用。审查指南最近可能发生了变化，但据我所知，他们清楚地说明了

> 包含在限定时间后过期的“出租”内容或服务的应用程序将被拒绝

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:00:52.530

将日期时间保存在用户默认值中。

在每次启动应用程序时继续检查 dateDiffernce 是否不超过 30 天。如果它更多显示一个弹出窗口，要求用户购买该应用程序。并禁用所有功能。

编辑：在我早期，我们为 Windows、试用软件游戏和应用程序做了很多这样的调整。但是再次重新安装应用程序会丢失您保存的数据。如果您仍然坚持不允许，那么您可以将其写入 Keychain 或文档中的某些文件，而不是用户默认值和 plist。但在某种程度上，苹果不允许有这样的应用程序。

# ios - TBXML 解析不能使用目标 c

> ID：14534320
> 
> 赞同：0
> 
> 时间：2013-01-26T05:57:36.193
> 
> 标签：ios, web-services, parsing, tbxml

我有一个 ASMX 网络服务。它以 XML 格式返回数据。返回的数据很大。订购 30-40000 条记录。我正在尝试使用

```
TBXML.
&lt;ArrayOfNAllAddresses xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/"&gt;

 &ltNAllAddresses&gt
   &ltAllAddID&gt60386 &lt/AllAddID&gt
    &ltAllAddressLine&gtXYZA Company &lt;/AllAddressLine&gt
    &ltAllAddressCity>&gtChicago  &lt;/AllAddressCity&gt
    &ltAllAddressState&gtIL &lt;/AllAddressState&gt
    &ltAllAddressZip&gt5555&lt;/AllAddressZip&gt
    &ltAllCustID &gt41257&gt; &lt;/AllCustID&gt
  &lt/NAllAddresses&gt
 &ltNAllAddresses&gt
....

  &lt;/NAllAddresses&gt;
 &lt;/ArrayOfNAllAddresses&gt;

     TBXMLElement *elem_NAddresses = [TBXML childElementNamed:@"ArrayOfNAllAddresses" parentElement:root];
        NSLog(@"the value is at 873 %@",elem_NAddresses);
        while (elem_NAddresses != nil) {
    //It should enter here. But it won't
    } 
```

所以我试了一下。但它不会进入while循环。我将 ArrayOfNAllllAddresses 的值更改为使用 NALLAddresses。但它也不起作用。有人可以告诉我如何解析它吗？谢谢。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:31:05.633

您是否在任何时候将 XML 文件传递​​给 TBXML？您需要首先这样做，否则 TBXML 不知道您在说什么 XML。因此，将您的 XML 保存在 Xcode 中的 .xml 文件中，或者将其制成一个`NSString`并将其传递给 TBXML，如下所示：

```
TBXML *tbxml = [TBXML tbxmlWithXMLFile:@"yourFile.xml"];
//or
TBXML *tbxml = [TBXML tbxmlWithXMLString:yourString] 
```

然后你可以抓住根元素并做你的while循环：

```
TBXMLElement *root = tbxml.rootXMLElement; 
```

另外，请确保您`#include`的`TBXML.h`头文件。

# python - 如何搜索 Flask SQLAlchemy 多对多关系的表？

> ID：14534321
> 
> 赞同：3
> 
> 时间：2013-01-26T05:58:10.903
> 
> 标签：python, sqlalchemy, flask

我有以下模型和表格：

```
chat_members = db.Table('chat_members',
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('chat_id', db.Integer, db.ForeignKey('chat.id'))
)

class chat(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    start_date = db.Column(db.DateTime)
    chat_memb = db.relationship('user', secondary=chat_members, backref=db.backref('members', lazy='dynamic'))  
    chat_line = db.relationship('line', backref='chat_line', lazy='dynamic')

    def __repr__(self):
        return '<Chat %r>' % (self.id)

class user(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_email = db.Column(db.String, unique=True)
    user_password = db.Column(db.String)
    lines = db.relationship('line', backref='line_author', lazy='dynamic')

    def __repr__(self):
        return '<User %r>' % (self.user_email)

class line(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    published_date = db.Column(db.DateTime)
    chat_id = db.Column(db.Integer, db.ForeignKey('chat.id'))
    sent_by = db.Column(db.Integer, db.ForeignKey('user.id'))
    line_text = db.Column(db.String)

    def __repr__(self):
        return '<Line %r>' % (self.id) 
```

我已成功将数据添加到所有这些模型，但无法查询表。查询的最终目标是查找与特定用户关联的所有聊天。这是我所做的：

```
first_user = user.query.get(1)
chat.query.filter(chat_members.any(chat_memb=first_user)).all() 
```

我得到的

> sqlalchemy.exc.InvalidRequestError：无法将集合与对象或集合进行比较；使用 contains() 来测试成员资格。

这个问题（http://stackoverflow.com/questions/12593421/sqlalchemy-and-flask-how-to-query-many-to-many-relationship）看起来非常相似，但是当我为我的模型复制它时，我得到了`AttributeError: type object 'chat' has no attribute 'members'`做完之后

```
chat.query.filter(chat.members.any(user_email='ACCEPTABLE_EMAIL')).all() 
```

`members`回溯和模型中的 backref一样令人惊讶`chat`，但我觉得这个查询很接近。

我能找到的其他相关问题似乎没有为同一搜索提供建议，而且我在官方或第 3 方多对多文档中找不到此类查询。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T09:59:53.847

您需要在查询中使用联接。首先将您的`chat.chat_memb`关系更改为：

```
# Change backref from 'members' to 'chats', since the backref will be pointing
# to chat class.
chat_memb = db.relationship('user', secondary=chat_members,
                            backref=db.backref('chats', lazy='dynamic')) 
```

然后使用这个查询：

```
chat.query.join(user.chats).filter(user.id == 1).all() 
```

我还建议遵循 Python 风格指南并为类使用大写的名称，例如，`Chat`而不是`chat`. 现在很容易混淆代码中的类和实例。

# php - 在 PHP 中将变量从一个函数传递到另一个函数时遇到问题？

> ID：14534327
> 
> 赞同：0
> 
> 时间：2013-01-26T05:58:42.600
> 
> 标签：php, function, variables

我有两个函数，我很困惑如何在它们之间传递一个变量。这是我到目前为止所拥有的。

```
function copy_photo ($image_url, $image_description){
$rand_string = rand(0001, 9999);//create simple random string   
$image_type = substr(strrchr($image_url,'.'),1);//get image type
$local_directory = "./images/";//folder to put photo
$local_image_name = $local_directory . $image_description . "-" . $rand_string . $image_type;//full directory and new image name to place photo 

copy($image_url, $local_image_name);// I want the function to first copy the image here
return $local_image_name;// <---this is the variable I want to pass on
}

function store_data ($local_image_name){
 //simple PDO statement to insert newly created local image url into database
}

copy_photo ($image_url, $image_description);//copy photos to folder 
store_data ($image_description);//store $image_description in database 
```

我希望 copy_photo 函数首先复制照片，然后返回 $local_image_name 并将其传递给 store_data 函数以存储在数据库中。当 store_data 尝试将 $image_description 存储到数据库中时，我不断收到错误消息。如何成功地将 $local_image_name 从一个函数传递到下一个函数？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:01:21.093

您将函数的返回值分配给一个变量，然后将该变量传递给下一个函数。

```
$image_name=copy_photo ($image_url, $image_description);//copy photos to folder 
store_data ($image_name);//store $image_description in database 
```

# php - 在 jquery 代码点火器中显示后将 div 隐藏在一个区域中

> ID：14534328
> 
> 赞同：0
> 
> 时间：2013-01-26T05:58:58.460
> 
> 标签：php, javascript, json, codeigniter, jquery

我在视图页面的一个区域中有一个名为“hide”的 div ...我想将它隐藏起来以防止 ajax 的响应...这是我的代码 ..首先我在开始时隐藏了一个 div 所以我写了 $ ('#hide').hide(); 就在准备好的功能之后......然后我在其他部分显示div..所以现在我想要的是如果响应是'userNo'我想再次隐藏它......除了div没有再次隐藏之外一切都在工作......我不知道为什么有什么问题

```
$(document).ready(function(){
     $('#hide').hide();
    $('#bill_no').blur(function(){

        if( $('#bill_no').val().length >= 3 )
            {
              var bill_no = $('#bill_no').val();
              getResult(bill_no); 
            }
        return false;
    })
    function getResult(billno){
        var baseurl = $('.hiddenUrl').val();
       $('.check').addClass('preloader');
        $.ajax({
            url : baseurl + 'returnFromCustomer_Controller/checkBillNo/' + billno,
            cache : false,
            dataType: 'json',
            success : function(response){
                 $('.check').removeClass('preloader');

                if (response == "userNo") 
                    $('#hide').hide();  // this is not working 
                else
                $('.check').removeClass('userNo').addClass('userOk');
                // $(".text").html(response.result);
                 $('#hide').show();
                 $(".text1").html(response.result1);
                 $(".text2").html(response.result2);
                 $(".text3").html(response.result3);

            }
        })
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:09:47.103

哦，好吧，你隐藏了 div，然后在“else”语句之后的第二行代码中再次显示它！因此，在您看来，您的代码不起作用。您的代码流程如下：如果响应是“userNo”，则隐藏 div，否则在 $('.check') 上删除/添加一些类。在任何一种情况下，显示 div 并替换三个文本 div 的 html。由于您的 show div 语句不在 if/else 情况下。

您应该始终在 if/else 语句之后使用 {}，如果不是，则只执行 if/else 之后的第一条语句。所以你应该做

```
if (response == 'userNo') {
  $('#hide').hide();
} else {
  $('.check').removeClass('userNo').addClass('userOk');
  $('#hide').show();
  $(".text1").html(response.result1);
  $(".text2").html(response.result2);
  $(".text3").html(response.result3);
} 
```

# php - 如何避免sql注入？

> ID：14534332
> 
> 赞同：0
> 
> 时间：2013-01-26T05:59:47.097
> 
> 标签：php, sql, pdo

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

我有这个代码

```
$where = '';
if (isset($_POST['lvl']) && $vals = $_POST['lvl']) {
    $where = 'WHERE ';
$first = false;
if ($vals[0] === '0') {
    $where .= 'team = "neutral"';
    unset($vals[0]);
    $first = true;
}
if (count($vals)) {
    if ($first) $where .= ' OR ';
    $where .= 'lvl IN (\'' . implode('\',\'', $vals) . '\')';
}}
    $sql = "SELECT * FROM $table $where";
$res = $DBH->prepare($sql);
$res->execute();
$num = $res->rowCount();
echo "<h2>".$num."</h2>"; 
```

它有效，但如果有人做了某事，就会发生[这种](https://lh3.googleusercontent.com/-p5xzuA0_kzY/UQKrLFx2MvI/AAAAAAAAARU/qXbO9BNKFf8/s848/SQL.jpg)情况。如何解决这个问题？

**UPD**：添加了 PDO 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:01:42.520

使用 PHP`mysqli_real_escape_string()`来转义值。请注意，这是`mysqli`因为`mysql`功能已折旧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:00:28.267

您需要对所有字符串值使用 PDO::quote()。
此外，当您只需要计算它们时，您永远不应该选择所有记录。让数据库为你做这件事

```
$where = '';
if (!empty($_POST['lvl'])) {
    $vals = $_POST['lvl'];
    $where = 'WHERE ';
    if ($vals[0] === '0') {
        $where .= "team = 'neutral'";
        unset($vals[0]);
        if ($vals) {
            $where .= " OR ";
        }
    }
    if ($vals) {
        foreach ($vals as $i => $val) {
           $vals[$i] = $DBH->quote($val);
        }
        $where .= "lvl IN (".implode(',', $vals).")";
    }
}
$sql = "SELECT count(*) as cnt FROM $table $where";
$res = $DBH->query($sql);
$res->execute();
$row = $res->fetch();
echo "<h2>".$row['num']."</h2>"; 
```

顺便说一句，使用我自己的类，代码会稍微不那么复杂，因为它不需要手动转义（虽然它使用的是 mysqli，而不是 PDO）。

```
$where = '';
if (!empty($_POST['lvl'])) {
    $vals = $_POST['lvl'];
    $where = 'WHERE ';
    if ($vals[0] === '0') {
        $where .= "team = 'neutral'";
        unset($vals[0]);
        if ($vals) {
            $where .= " OR ";
        }
    }
    if ($vals) {
        $where .= $db->parse("lvl IN (?a)",$vals);
    }
}
$num = $db->getOne("SELECT count(*) as cnt FROM ?n ?p",$table, $where);
echo "<h2>".$num."</h2>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-26T06:09:47.843

使用带有命名参数的 PDO

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

# byte - 用python字节反向十六进制

> ID：14534343
> 
> 赞同：0
> 
> 时间：2013-01-26T06:01:24.830
> 
> 标签：byte, reversing

我有一个`.bin`文件，我想简单地对十六进制数据进行字节反转。比如说`@ 0x10`它读`AD DE DE C0`，要它读`DE AD C0 DE`。

我知道有一种简单的方法可以做到这一点，但我是初学者，刚刚学习 python，正在尝试制作一些简单的程序来帮助我完成日常任务。我想以这种方式转换整个文件，而不仅仅是`0x10`.

我将在开始偏移处进行转换，`0x000000`块大小/长度为 1000000。

编辑：

这是我的代码，也许你可以告诉我我在哪里搞砸了。

```
def main():
    infile = open("file.bin", "rb")
    new_pos = int("0x000000", 16)
    chunk = int("1000000", 16)
    data = infile.read(chunk)
    save(data)

def save(data):
    with open("reversed", "wb") as outfile:
        outfile.write(data)

main() 
```

我将如何将其编码为从 CDAB 到 ABCD 的字节反转？如果有帮助，文件正好是 16MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:49:44.723

您可以像这样手动交换字节：

```
with open("file.bin", "rb") as infile, open("reversed", "wb") as outfile:
  data = infile.read()
  for i in xrange(len(data) / 2):
    outfile.write(data[i*2+1])
    outfile.write(data[i*2]) 
```

# java - 在单词搜索游戏中寻找所有可能性

> ID：14534344
> 
> 赞同：1
> 
> 时间：2013-01-26T06:01:31.587
> 
> 标签：java, search, word, wordsearch

我有这个用 Java 编写的 boggle 类型的游戏。它工作正常，没有任何问题，但我想添加一个功能，当游戏结束时（通过计时器达到 0，或用户输入 0 退出到主菜单）系统将计算所有可能的单词你本可以找到的。我在这里有一个方法，它用于搜索 10x10 的字母网格以找到与用户输入的内容匹配的内容。

```
 public class FinalProjectBogel {

 static private BufferedReader br = new BufferedReader (newInputStreamReader(System.in),1);
boolean timeUp = true;
boolean notValid = true;

Toolkit toolkit;
Timer timer;
sortLib sl = new sortLib();

public FinalProjectBogel() throws IOException
{
    toolkit = Toolkit.getDefaultToolkit();
    timer = new Timer();     //Creates new timer       

   // CREDITS
   System.out.println("");
   System.out.println("BOGEL ®");
   System.out.println("Created by George Ondi and Kirkland Clive Douglas");
   //Edited by Alan Kwok
   System.out.println("");
//________________________________________________________________________________________
// MAIN MENU
//________________________________________________________________________________________
   for (int ctrloop = 0; 0 < 1; ctrloop--)//Endless loop for main menu
   {
        System.out.println("");
        System.out.println("Enter one of the following numeric options to initiate the corresponding command.");
        System.out.println("");
        System.out.println("1  Commence Game");
        System.out.println("2  Rules");
        System.out.println("3  View Highscores");
        System.out.println("4  Exit");
        System.out.println("");
//________________________________________________________________________________________
// TIMER / GAMEBOARD
//________________________________________________________________________________________
        int userCmd = Keyboard.readInt();//Gets input from user for the main menu
        System.out.println("");

        if (userCmd==1)//Runs the game it self
        {
                timer.schedule(new RemindTask(),0,1*1000);  // start timer

                int score = 0;//Where your points are scored

                char table[][] = new char[10][10]; //Creates the array for the 10x10 grid
                int ctr = 0;
                char c;
                Random r = new Random();//for the random characters

                for (int x = 0; x < 10; x++)
                {
                    for (int y = 0; y < 10; y++)
                    {
                         table[x][y] = (char)(r.nextInt(26) + 'a');//creates random characters
                    }
                }   
                for (int x = 0; x < 10; x++)
                {
                    for (int y = 0; y < 10; y++)
                    {
                        System.out.print("|" + table[x][y] + "|");//creats the grid and the lines between the letters
                    }
                    System.out.println("");
                }
                System.out.println("Enter words that appear horizontally, vertically.");
                System.out.println("- Enter 0 to return to main menu.");
                String userInput = Keyboard.readString();//User input for the word search
               // System.out.println(userInput);
                String[] wordStorage = new String[50];//creats array for words you enter. this is where they are stored then later compared with.
                int size = 0;//for keeping track of array size
                boolean Flag = false;
//________________________________________________________________________________________
//  EXITING TO MAIN MENU OPTION / BUFF.READER / WORDSEARCH
//________________________________________________________________________________________
                while (Flag != true )
                {
                    if (userInput.equals("0"))//The following is initiated if userin. = 0
                    {
                        timer.cancel();//Cancels timer
                        timer = new Timer();//Makes or schedules a new timer
                        //HIGHSCORE FILES
                        notValid = false;
                        System.out.println("");
                        System.out.println("");
                        int[] numbers = new int[11];//creates array for storing highscore
                        BufferedReader lineIn2 = new BufferedReader(new FileReader("Highscore.txt"));//reads highscore file
                        String line2 = "";
                        //load array with file (for loop)
                        for (int ctr5 = 0; ctr5 < 11; ctr5++)
                        {
                            line2 = lineIn2.readLine();
                            numbers[ctr5] = Integer.parseInt(line2);
                        }
                        System.out.println("");
                        System.out.println("");
                        System.out.println("");
                        System.out.println("");
                        System.out.println("");
                        System.out.println("The previous highscore is: " + numbers[10]);
                        System.out.println("");
                        System.out.println("Your highscore is: " + score);

                        lineIn2.close();//closes file
                        PrintWriter lineOut2 = new PrintWriter(new FileWriter("Highscore.txt"));//writes to file
                        int Highscore = score;

                        numbers[0] = Highscore;
                        sl.quickSort(numbers, 0,10); //Sorts the high scores
                        System.out.println("");                         
                        System.out.println("The high scores are:");
                        for (int index = numbers.length-1; index >= 1; index--)
                        {
                            System.out.print (numbers[index] + " ");//Displays array of numbers. Not neccessry for game
                        }
                        for (int ctr99 = 0; ctr99 < 11; ctr99++)
                        {
                            lineOut2.println(numbers[ctr99]);//writes scores back to file
                        }
                        System.out.println("");
                        System.out.println();
                        lineOut2.close();//closes file one last time
                        System.out.println("The words you entered are:");

                        for (int disp = size-1; disp >= 0; disp--)
                        {
                            System.out.print(wordStorage[disp] + " ");
                        }
                        System.out.println("");

                        //notValid = true;
                        timeUp = false;
                        //Breaks back to main menu
                        break;//breaks back to main menu
                    }
                    else if (!userInput.equals("0") && !timeUp)//If userin. doesn't equal 0, following error is displayed
                    {
                            System.out.println("");
                            System.out.println("-------------------------Not a valid input----------------------------");
                            System.out.println("");
                    }
                    ctr = 0;
                    boolean answer = wordSearch(table, userInput);
                    //link the two together
                    BufferedReader lineIn = new BufferedReader(new FileReader("allWordsEn.txt"));//opens dictionary
                    int ctr2 = 0;
                    String line = lineIn.readLine();//reads dictionary
                    boolean match = false;
//________________________________________________________________________________________
//  SCORE SYSTEM / ERROR MESSAGES
//________________________________________________________________________________________
                        while(line != null && answer)
                        {
                            StringTokenizer words = new StringTokenizer(line);
                            String temp = words.nextToken();

                            if (userInput.equalsIgnoreCase(temp))//the following compares userinput with array of 
                                                                 //stored words, to see if they already exist or not
                            {
                                boolean ifwordexist = false;

                                for (int ctr9 = 0; ctr9 <= size; ctr9++)
                                {
                                    if (userInput.equals(wordStorage[ctr9]))
                                    {
                                        ifwordexist = true;
                                        System.out.println("You entered the word aleady");
                                        match = true;
                                        break;
                                    }
                                     //check if word is in the array.. if yes, ifwordexist= true
                                }

                                if (!ifwordexist)
                                {
                                    wordStorage[size] = userInput;  // store name into the array
                                    int temp999 = userInput.length();
                                    size++;     // keep track of logical size of the array
                                    score+=temp999; //Adds points to total score equal to length of word
                                    System.out.println("Match Dictionary! +" + temp999  + " Total Score: " + score); //displays current score
                                    match = true;
                                    break;
                                }
                            }
                            line = lineIn.readLine();
                            ctr2++;
                        }
                        lineIn.close(); //closes dictionary
                    //If word doesn't match the grid or dictionary, displays the following error message
                    if (timeUp)
                    {
                        if (!match)
                        {
                            System.out.println("Word not found in database. No point scored, try Again.");
                        }
                        //Displays the gird once again
                        for (int x = 0; x < 10; x++)
                        {
                            for (int y = 0; y < 10; y++)
                            {
                                System.out.print("|" + table[x][y] + "|");
                            }
                            System.out.println("");
                        }
                        System.out.println("Next word");
                    }

                    System.out.println("- Enter \"0\" to return to main menu.");
                    userInput = Keyboard.readString();
                }
           }
//________________________________________________________________________________________
// RULES
//________________________________________________________________________________________
        else if (userCmd==2)//displayes rules
        {
            System.out.println("Rules:");
            System.out.println("");
            System.out.println("- Search the 10 x 10 grid for words that are formed vertically and horizontally (left to right, top to bottom)");
            System.out.println("- When you have found a word (minimum 2 letter word), type the word into the program.");
            System.out.println("- The amount of points you score is determined by the length of the word you entered.");
            System.out.println("- The goal of the game is to score as many points before the time runs out.");
            System.out.println("- While playing the game you can enter \"0\" to return to the main menu.");
            System.out.println("- Good Luck and have fun!");
            System.out.println("");
        }
        else if (userCmd==3)//displayes high scores
        {
            int[] numbers = new int[11];
            BufferedReader lineIn2 = new BufferedReader(new FileReader("Highscore.txt"));
            String line2 = "";
            //load array with file (for loop)
            for (int ctr5 = 0; ctr5 < 11; ctr5++)
            {
                line2 = lineIn2.readLine();
                numbers[ctr5] = Integer.parseInt(line2);
            }
            System.out.println("");
            System.out.println("");
            System.out.println("The previous highscore is: " + numbers[10]);
            System.out.println("");
            lineIn2.close();
            PrintWriter lineOut2 = new PrintWriter(new FileWriter("Highscore.txt"));
            sl.quickSort(numbers, 0,10); //Sorts the high scores
            System.out.println("The high scores are:");
            for (int index = numbers.length-1; index >= 1; index--)
            {
                System.out.print (numbers[index] + " ");//Displays array of numbers. Not neccessry for game
            }

            for (int ctr99 = 0; ctr99 < 11; ctr99++)
            {
                lineOut2.println(numbers[ctr99]);
            }
            System.out.println("");
            System.out.println();
            lineOut2.close();
        }
        else if (userCmd==4)//ends the process
        {
            System.out.println("Bye!");
            System.exit(0);
        }
            else//displayes error message if input doesn't match 1,2,3, or 4.
            {
                System.out.println("");
                System.out.println("-------------------------Not a valid input----------------------------");
                System.out.println("");
                System.out.println("");
            }
   }
}
//________________________________________________________________________________________
// COUNTDOWN TIMER / ADJUST TIMER HERE
//________________________________________________________________________________________
class RemindTask extends TimerTask
{
    int numWarningBeeps = 59;//Set timer here (seconds)

        public void run() 
        {
            if (numWarningBeeps > 0) 
            {
                toolkit.beep();//Creats beeping noises
                numWarningBeeps--;
                timeUp = true;
            } 
            else 
            {
                toolkit.beep(); 
                timer.cancel();//cancels timer when it reaches 0
                System.out.println("");
                System.out.println("Time's up!");
                System.out.println("");
                System.out.println("- Enter \"0\" to continue.");
                timeUp = false;
                notValid = false;
                timer = new Timer();//creats or schedules new timer
                //System.exit(0);   //Stops the AWT thread (and everything else)
            }
        }
}    

   //____________________________________________________________________________
          // MAIN METHOD / RELATED TO TIMER
   //__________________________________________________________________________
 public static void main(String[] args) throws IOException
{
 new FinalProjectBogel();
}

        //____________________________________________________________________________
       // WORDSEARCH METHOD (Searches grid for words you enter to see if they match)
      //_______________________________________________________________________________

     public static boolean wordSearch (char[][] table, String search)
       {
           int  ctr = search.length();
           String temp = ""; 
           String hcraes = (search); // copy search into hcraes

           //Right to left, bottom to top
           int ls = search.length();  // length of initial string
            StringBuilder sb = new StringBuilder(); // temporary place to store growing string
            for(int ii=ls-1;ii>=0; ii--) {
                    sb.append(search.charAt(ii)); // build the string one character at a time
                }
            hcraes = sb.toString(); // convert to "regular" string

           // LEFT TO RIGHT / X-AXIS
           for (int row = 0; row < 10; row++) //Checks each row (x) one by one
           {
                   for (int a = 0; a <= (10 - ctr); a++)
                   {
                    StringBuilder s = new StringBuilder(10-ctr);//Does... something
                        for (int x = a; x <= (a+ctr-1); x++) //Checks every possibility in the row
                         {
                            s.append(table[row][x]);
                            temp = s.toString();
                            if (temp.equals(search) || temp.equals(hcraes))
                            {
                                return true;
                            }
                         }
                   }
           }
           // TOP TO BOTTOM / Y-AXIS
           for (int column = 0; column < 10; column++)
           {
                   for (int b = 0; b <= (10 - ctr); b++)
                   {
                    StringBuilder v = new StringBuilder(10-ctr);
                        for (int y = b; y <= (b+ctr-1); y++)//checks every possibility in grid
                         {
                            v.append(table[y][column]);
                            temp = v.toString();
                            if (temp.equals(search) || temp.equals(hcraes))
                            {
                                return true;
                            }
                         }
                   }
           }
            return false;//if word isn't in grid it returns as false, which then displays an error message
      } 
```

我只想知道这是什么代码。当用户输入 0 我希望它显示所有可能的单词。请记住，我有一个外部 .txt 文件，它基本上是与单词进行比较的字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:16:56.103

你现在试图做的搜索真的变成了“繁重的任务”——它不再是一个词。我建议您使用 grep.，而不是编写自己的代码。我假设您可以在 linux (Mac OS) 类型的机器上执行此操作……对 Windows 不太熟悉，抱歉。

基本方法是这样的：你的 10x10 网格可以变成总共 40 个字符串（水平和垂直各 10 个）x 2 [因为你可以向后阅读]。将这 40 个字符串，一次一行，放入我们调用的文件中`file.txt`

现在魔法来了。有一个非常快速的 grep 版本，它使用该`-F`选项查找密钥的“完全匹配”。假设您的“有效单词”在名为`valid.txt`. 从这两个文件所在的目录中，执行以下命令：

```
grep -oF valid.txt file.txt > words.txt 
```

这是解释：

```
-o        : output the matched string, not the line found
-F        : do not do pattern matching; look for an exact match 
            (much, much faster - not available in all versions of grep. 
            If you don't have it, use -f instead)
valid.txt : file with the 'keys' (good words)
file.txt  : file to be searched for the keys
>         : send the output of the command...
words.txt : ... to this file 
```

您可以从您的 java 程序内部调用此命令（例如参见[此链接](http://javaevangelist.blogspot.com/2008/08/making-system-call-in-java.html)），然后重新读取文件。它会为您节省一些编程时间，而且它很可能比您自己编写的任何代码都快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:49:12.513

作为上述方法的替代方法，这里是在 Java 中执行详尽搜索的代码。它的效率不高——但它具有独立于操作系统的优势。

这里有三个概念块：首先，我创建一个 10x10 网格（使用上面应用程序中的代码......我需要以某种方式获取一个 table[][]）。我在这里添加了一个小“技巧”​​——我不是从字母表中随机选择字母，而是从具有“近似”英文字母频率的字符串中随机选择它们。我们应该在结果网格中获得更多“英语发音”的单词组合。

接下来，我从左到右、从右到左、从上到下、从下到上阅读网格。这将创建总共 40 个要搜索的字符串。

第三，我打开输入文件，一次查看一个字符串；我尝试依次将其与 40 个字符串进行匹配，一旦找到匹配项，我就会停止查找（换句话说，是否有多个匹配项无关紧要）。

我用一个非常小的输入文件运行它，它似乎工作。当您针对完整的字典运行它时，它可能会很慢 - 但请注意，一旦我知道我有匹配项，或者 - 知道我没有匹配项，我就会尝试跳出搜索循环。

毫无疑问，这可以进一步优化。

```
import java.util.Random;
import java.io.*;

public class myGrep {

public static void main(String[] args){
char t40[][] = new char[40][10];
char table[][] = new char[10][10]; //Creates the array for the 10x10 grid
int ii=0, jj=0;
char c;

int ctr = 0;
char m;

Random r = new Random();//for the random characters

// First, I create a random table of 10x10 characters to work with
// To make it more interesting, I use a string with approximate frequencies
// for characters in the English language - this should yield more, and longer
// "findable" words in the grid
// source: http://www.math.cornell.edu/~mec/2003-2004/cryptography/subs/frequencies.html
String cfreq = "eeeeeeeeeeeetttttttttaaaaaaaaoooooooo" +
               "iiiiiiinnnnnnnssssssrrrrrrhhhhhhddddl" +
               "llluuucccmmmffyywwggppbbvkxqjz";

for (int x = 0; x < 10; x++)
{
  for (int y = 0; y < 10; y++)
  {
    table[x][y] = cfreq.charAt(r.nextInt(cfreq.length()));
   }
}   

// Now, make a second table of 40 lines; this speeds up the search
// since I won't have to think about "direction" any more ... just search L to R
for (int x = 0; x < 10; x++)
{
   for (int y = 0; y < 10; y++)
   {
      m = table[x][y];
      t40[x][y]=m;       // L to R
      t40[x+10][9-y]=m;  // R to L
      t40[y+20][x]=m;    // T to B
      t40[y+30][9-x]=m;  // B to T
   }
}

// confirm that we now have 40 rows of strings:
System.out.println("The following 40 strings represent searching the 10x10 grid in all directions:");
for( ii = 0; ii<40; ii++) {
  System.out.println(t40[ii]);
}

// Now starts the fun... for each word in the input file, look for a match
  try {
    FileInputStream fstream = new FileInputStream("textfile.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;

    //Read File Line By Line
    while ((strLine = br.readLine()) != null)   {
      if(canFind(strLine, t40)) 
      {
        System.out.println (strLine);
      }
    }

    //Close the input stream
    in.close();
  } catch (Exception e) { //Catch exception if any
    System.err.println("Error: " + e.getMessage());
  }

} // end of main()

private static boolean canFind(String findme, char[][] searchme) {
  boolean isfound = false;
  int li = 0;

  // loop over all lines in the searchme table: we know there are 40
  while (li < 40 && !isfound) {
    // look for a match of the first character:
    for(int ii = 0; ii<11-findme.length(); ii++) {
      if(searchme[li][ii] == findme.charAt(0)) {
        isfound = true;
        for(int jj = 1; (jj < findme.length()) && isfound; jj++) {
          // **** this line could probably be optimized more: ****
          isfound = (isfound && (findme.charAt(jj) == searchme[li][ii+jj]));
        }
      ii = 10; // exit for(int ii = 0;..) loop...
      }
    }
    li++;
  }
  return isfound;

}
} 
```

# javascript - 如何创建使用前缀作为参数的自定义方法

> ID：14534350
> 
> 赞同：1
> 
> 时间：2013-01-26T06:02:58.253
> 
> 标签：javascript, oop, methods

学习 JavaScript OOP ...并且整天都在那个领域但是...
我无法理解/找到**如何创建自定义 JS 方法**，就像

`.toString()`, `.toUpperCase()`...和其他方法，例如，如果您有一个访问对象，例如

```
customer.name // John 
```

你使用：

```
customer.name.toLowerCase(); 
```

会给你`// john`

这意味着函数 Method`toLowerCase()`以某种方式使用*前缀对象*`this`的引用作为操作的可操作*参数*。**`return`**

 ****如何做这样的事情？附加一个方法来处理一些未知的先前对象？**

好的，只是一个愚蠢的例子，假设我们希望能够创建一个`.addLength()`Method 来简单地让我们这样做：`customer.name.addLength() // John Name length = 4`

```
function addLength(){   
    var that = this;
    var name = that.toString();
    return ( name +' Name length = '+ name.length );   
} 
```

好的，我知道这是完全错误的，这只是为了以某种方式描述。
没有目的，只是为了理解。（欢迎提供更好的有用示例）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:06:45.003

你想利用原型继承

[https://stackoverflow.com/a/572996](https://stackoverflow.com/a/572996)

[http://javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)**

# jsf-2 - PrimeFaces 选项列表目标未填充

> ID：14534355
> 
> 赞同：0
> 
> 时间：2013-01-26T06:03:38.177
> 
> 标签：jsf-2, primefaces

我正在对话框中实现 PrimeFaces 选项列表。每次显示对话框时，选择列表目标的内容应根据之前显示的列表条目而更改。在我打开对话框之前，我在 ProdukteBean.onEditProdukt(..) 中用适当的值填充选项列表的目标。不幸的是，这些目标值没有显示在目标容器中。以下是相关的代码片段：

列表.xhtml：

```
<p:commandLink id="editButton" update=":dialogForm:editDialogPanel" title="Edit" 
    oncomplete="produktDialog.show();" 
    process="@this" partialSubmit="true"
    action="#{produkteBean.onEditProdukt}">
            <h:outputText value="Bearbeiten" /> 
            <f:setPropertyActionListener value="#{p}" target="#{produkteBean.produkt}" /> 
</p:commandLink> 
```

对话框.xhtml：

```
<!-- ... -->
<p:dialog id="dialog" header="Produkt-Details" widgetVar="produktDialog" appendToBody="true" showEffect="explode" hideEffect="explode"  modal="true" width="500"> 
<p:messages id="msgs"/> 
        <h:form id="dialogForm"> 
            <!-- ... -->
            <p:pickList id="produkteDatenList" var="proddat" value="#{produkteBean.datenList}"
        itemLabel="#{proddat.bezeichnung}" itemValue="#{proddat}" 
        converter="produktDatConverter"/> 
            <!-- ... -->
        </h:form>
</p:dialog> 
```

产品Bean.java：

```
 @Named("produkteBean")
    @ViewScoped // @SessionScoped // @ViewScoped
    public class ProdukteBean implements Serializable {

        @Inject @Transient private ProdukteService produkteService; 
        @Inject @Transient private DatenService datenService; 

        @Inject()
        private ProdukteDatenBean produkteDatenBean;

        private DualListModel<Dat> datenList = new DualListModel<Dat>();  

        private Dat dat = null;

        public ProdukteBean() {

        }

        @PostConstruct
        private void init() {

            getAll();
        }

        private void getAll() {
            logger.debug("getAll()");
            getAllProdukte();
            getAllDaten();
        }

        private void getAllDaten() {
            logger.debug("getAllDaten()");

            List<Dat> source = new ArrayList<Dat>();
            source.addAll(datenService.list());

            List<Dat> target = new ArrayList<Dat>();
            if (produkt.getDaten() != null) {
                logger.debug("adding " + produkt.getDaten().size() + " daten to produkt " + produkt.getName());
                target.addAll(produkt.getDaten());
            }       

            DualListModel<Dat> datenList = new DualListModel<Dat>();  
            datenList.setSource(source);
            datenList.setTarget(target);
            setDatenList(datenList);
        }

        public List<Produkt> getAllProdukte() {
            logger.debug("getAllProdukte()");
            return produkteService.list();
        }

        public void onEditProdukt() {

            onEditProdukt(null);
        }

        public void onEditProdukt(ActionEvent actionEvent) {

            logger.debug("onEditProdukt: " + ReflectionToStringBuilder.toString(produkt));
            if (produkt != null) {
                setSelectedEinheit(produkt.getEinheit());
                getAllDaten();
            }
            FacesMessage msg = new FacesMessage("Produkt ausgewählt", produkt.getName());  
            FacesContext.getCurrentInstance().addMessage(null, msg);  
        }

        /**
         * @return the einheitList
         */
        public List<Einheit> getEinheitList() {

            if (einheitList == null) {
                einheitList = produkteService.getEinheiten();
            }
            return einheitList;
        }

    } 
```

产品数据转换器.java：

```
@FacesConverter(forClass=Dat.class,value="produktDatConverter")
@ViewScoped
public class ProduktDatConverter implements Converter {

@Inject
@Transient DatenService datenService;

@Transient
protected final Logger logger = Logger.getLogger(getClass().getName());

    // gets never called (of course)
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String str) {
       logger.debug("getAsObject(): " + str);
       return null;
    }

public String getAsString(FacesContext arg0, UIComponent arg1, Object object) {
   if (object instanceof Dat) {
            // logger.debug("   returning id " + String.valueOf(((Dat) object).getId()));
        return Long.toString(((Dat) object).getId());
   }
   return null;
}
} 
```

有任何想法吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:46:01.923

我想这是`converter`+`injection`问题。请单击[此处](https://stackoverflow.com/questions/7531449/cdi-injection-into-a-facesconverter)并参考 BalusC 的答案。您也可以尝试替换：

`@FacesConverter(forClass=Dat.class,value="produktDatConverter")`

`@ViewScoped`

和

`@ManagedBean`

`@RequestScoped`

并像这样调用转换器： `converter="#{produktDatConverter}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:10:02.853

您正在使用`@ViewScoped`CDI 托管 Bean。将其更改为 JSF 托管 Bean。更好的是，改用[CODI](http://myfaces.apache.org/extensions/cdi/)

另见：

*   [在 CDI Weld 中查看范围](http://www.stackoverflow.com/questions/4865047/view-scope-in-cdi-weld/5122139)
*   [CDI 缺少 @ViewScoped 和 @FlashScoped](https://stackoverflow.com/questions/7812985/cdi-missing-viewscoped-and-flashscoped)

# string - 在 VB6 中实现 String.Format()

> ID：14534360
> 
> 赞同：45
> 
> 时间：2013-01-26T06:04:36.840
> 
> 标签：string, vba, vb6, string-formatting

可以`String.Format()`在 VB6 中实现，至少是它的一个足够接近的版本，在使用好的 ol'VB6 编程时可能很有用？

关于 VB6 字符串操作性能的好资源：[http ://www.aivosto.com/vbtips/stringopt2.html](http://www.aivosto.com/vbtips/stringopt2.html)

在一个相关的问题上，我还想出了几个字符串比较函数，[在 CodeReview.SE 上找到它们](https://codereview.stackexchange.com/questions/30816/a-more-readable-instr-stringcontains)

这些函数对于提高 VB6 的可读性非常有用，特别是如果您最近被 .net 代码宠坏了，突然需要深入研究 VB6 代码库……享受吧！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-26T06:04:36.840

我在任何地方都找不到，所以我自己做了一个：

```
Public PADDING_CHAR As String

Public Function StringFormat(format_string As String, ParamArray values()) As String
'VB6 implementation of .net String.Format(), slightly customized.
'Tested with Office 2010 VBA (x64)

        Dim return_value As String
        Dim values_count As Integer

        'some error-handling constants:
        Const ERR_FORMAT_EXCEPTION As Long = vbObjectError Or 9001
        Const ERR_ARGUMENT_NULL_EXCEPTION As Long = vbObjectError Or 9002
        Const ERR_SOURCE As String = "StringFormat"
        Const ERR_MSG_INVALID_FORMAT_STRING As String = "Invalid format string."
        Const ERR_MSG_FORMAT_EXCEPTION As String = "The number indicating an argument to format is less than zero, or greater than or equal to the length of the args array."

        'use SPACE as default padding character
        If PADDING_CHAR = vbNullString Then PADDING_CHAR = Chr$(32)

        'figure out number of passed values:
        values_count = UBound(values) + 1

        Dim regex As RegExp
        Dim matches As MatchCollection
        Dim thisMatch As Match
        Dim thisString As String
        Dim thisFormat As String

        'when format_string starts with "@", escapes are not replaced 
        '(string is treated as a literal string with placeholders)        
        Dim useLiteral As Boolean 
        Dim escapeHex As Boolean 'indicates whether HEX specifier "0x" is to be escaped or not
        'validate string_format:
        Set regex = New RegExp
        regex.Pattern = "{({{)*(\w+)(,-?\d+)?(:[^}]+)?}(}})*"
        regex.IgnoreCase = True
        regex.Global = True
        Set matches = regex.Execute(format_string)

        'determine if values_count matches number of unique regex matches:
        Dim uniqueCount As Integer
        Dim tmpCSV As String
        For Each thisMatch In matches
            If Not StringContains(tmpCSV, thisMatch.SubMatches(1)) Then
                uniqueCount = uniqueCount + 1
                tmpCSV = tmpCSV & thisMatch.SubMatches(1) & ","
            End If
        Next

        'unique indices count must match values_count:
        If matches.Count > 0 And uniqueCount <> values_count Then _
            Err.Raise ERR_FORMAT_EXCEPTION, _
            ERR_SOURCE, ERR_MSG_FORMAT_EXCEPTION

        useLiteral = StringStartsWith("@", format_string)

        'remove the "@" literal specifier
        If useLiteral Then format_string = Right(format_string, Len(format_string) - 1)

        If Not useLiteral And StringContains(format_string, "\\") Then _
            format_string = Replace(format_string, "\\", Chr$(27))

        If StringContains(format_string, "\\") Then _
            format_string = Replace(format_string, "\\", Chr$(27))

        If matches.Count = 0 And format_string <> vbNullString And UBound(values) = -1 Then
        'only format_string was specified: skip to checking escape sequences:
            return_value = format_string
            GoTo checkEscapes
        ElseIf UBound(values) = -1 And matches.Count > 0 Then
            Err.Raise ERR_ARGUMENT_NULL_EXCEPTION, _
                ERR_SOURCE, ERR_MSG_FORMAT_EXCEPTION
        End If

        return_value = format_string

        'dissect format_string:

        Dim i As Integer, v As String, p As String 'i: iterator; v: value; p: placeholder
        Dim alignmentGroup As String, alignmentSpecifier As String
        Dim formattedValue As String, alignmentPadding As Integer

        'iterate regex matches (each match is a placeholder):
        For i = 0 To matches.Count - 1

            'get the placeholder specified index:
            Set thisMatch = matches(i)
            p = thisMatch.SubMatches(1)

            'if specified index (0-based) > uniqueCount (1-based), something's wrong:
            If p > uniqueCount - 1 Then _
                Err.Raise ERR_FORMAT_EXCEPTION, _
                ERR_SOURCE, ERR_MSG_FORMAT_EXCEPTION
            v = values(p)

            'get the alignment specifier if it is specified:
            alignmentGroup = thisMatch.SubMatches(2)
            If alignmentGroup <> vbNullString Then _
                alignmentSpecifier = Right$(alignmentGroup, LenB(alignmentGroup) / 2 - 1)

            'get the format specifier if it is specified:
            thisString = thisMatch.Value
            If StringContains(thisString, ":") Then

                Dim formatGroup As String, precisionSpecifier As Integer
                Dim formatSpecifier As String, precisionString As String

                'get the string between ":" and "}":
                formatGroup = Mid$(thisString, InStr(1, thisString, ":") + 1, (LenB(thisString) / 2) - 2)
                formatGroup = Left$(formatGroup, LenB(formatGroup) / 2 - 1)

                precisionString = Right$(formatGroup, LenB(formatGroup) / 2 - 1)
                formatSpecifier = Mid$(thisString, InStr(1, thisString, ":") + 1, 1)

                'applicable formatting depends on the type of the value (yes, GOTO!!):
                If TypeName(values(p)) = "Date" Then GoTo DateTimeFormatSpecifiers
                If v = vbNullString Then GoTo ApplyStringFormat

NumberFormatSpecifiers:
                If precisionString <> vbNullString And Not IsNumeric(precisionString) Then _
                    Err.Raise ERR_FORMAT_EXCEPTION, _
                        ERR_SOURCE, ERR_MSG_INVALID_FORMAT_STRING

                If precisionString = vbNullString Then precisionString = 0

                Select Case formatSpecifier

                    Case "C", "c" 'CURRENCY format, formats string as currency.
                    'Precision specifier determines number of decimal digits.
                    'This implementation ignores regional settings
                    '(hard-coded group separator, decimal separator and currency sign).

                    precisionSpecifier = CInt(precisionString)
                    thisFormat = "#,##0.$"

                    If LenB(formatGroup) > 2 And precisionSpecifier > 0 Then 
                        'if a non-zero precision is specified...
                        thisFormat = _
                        Replace$(thisFormat, ".", "." & String$(precisionString, Chr$(48)))
                    End If

                    Case "D", "d" 'DECIMAL format, formats string as integer number.
                    'Precision specifier determines number of digits in returned string.

                    precisionSpecifier = CInt(precisionString)
                    thisFormat = "0"
                    thisFormat = Right$(String$(precisionSpecifier, "0") & thisFormat, _
                        IIf(precisionSpecifier = 0, Len(thisFormat), precisionSpecifier))

                    Case "E", "e" 'EXPONENTIAL NOTATION format (aka "Scientific Notation")
                    'Precision specifier determines number of decimals in returned string.
                    'This implementation ignores regional settings'
                    '(hard-coded decimal separator).

                    precisionSpecifier = CInt(precisionString)
                    thisFormat = "0.00000#" & formatSpecifier & "-#" 'defaults to 6 decimals

                    If LenB(formatGroup) > 2 And precisionSpecifier > 0 Then
                        'if a non-zero precision is specified...
                        thisFormat = "0." & String$(precisionSpecifier - 1, Chr$(48)) & "#" & formatSpecifier & "-#"

                    ElseIf LenB(formatGroup) > 2 And precisionSpecifier = 0 Then
                        Err.Raise ERR_FORMAT_EXCEPTION, _
                            ERR_SOURCE, ERR_MSG_INVALID_FORMAT_STRING
                    End If

                    Case "F", "f" 'FIXED-POINT format
                    'Precision specifier determines number of decimals in returned string.
                    'This implementation ignores regional settings'
                    '(hard-coded decimal separator).

                    precisionSpecifier = CInt(precisionString)
                    thisFormat = "0"
                    If LenB(formatGroup) > 2 And precisionSpecifier > 0 Then
                        'if a non-zero precision is specified...
                        thisFormat = (thisFormat & ".") & String$(precisionSpecifier, Chr$(48))
                    Else
                        'no precision specified - default to 2 decimals:
                        thisFormat = "0.00"
                    End If

                    Case "G", "g" 'GENERAL format (recursive)
                    'returns the shortest of either FIXED-POINT or SCIENTIFIC formats in case of a Double.
                    'returns DECIMAL format in case of a Integer or Long.

                    Dim eNotation As String, ePower As Integer, specifier As String
                    precisionSpecifier = IIf(CInt(precisionString) > 0, CInt(precisionString), _
                        IIf(StringContains(v, "."), Len(v) - InStr(1, v, "."), 0))

                    'track character case of formatSpecifier:
                    specifier = IIf(formatSpecifier = "G", "D", "d")

                    If TypeName(values(p)) = "Integer" Or TypeName(values(p)) = "Long" Then
                        'Integer types: use {0:D} (recursive call):
                        formattedValue = StringFormat("{0:" & specifier & "}", values(p))

                    ElseIf TypeName(values(p)) = "Double" Then
                        'Non-integer types: use {0:E}
                        specifier = IIf(formatSpecifier = "G", "E", "e")

                        'evaluate the exponential notation value (recursive call):
                        eNotation = StringFormat("{0:" & specifier & "}", v)

                        'get the power of eNotation:
                        ePower = Mid$(eNotation, InStr(1, UCase$(eNotation), "E-") + 1, Len(eNotation) - InStr(1, UCase$(eNotation), "E-"))

                        If ePower > -5 And Abs(ePower) < precisionSpecifier Then
                            'use {0:F} when ePower > -5 and abs(ePower) < precisionSpecifier:
                            'evaluate the floating-point value (recursive call):
                             specifier = IIf(formatSpecifier = "G", "F", "f")
                             formattedValue = StringFormat("{0:" & formatSpecifier & _
                                 IIf(precisionSpecifier <> 0, precisionString, vbNullString) & "}", values(p))
                        Else
                            'fallback to {0:E} if previous rule didn't apply:
                            formattedValue = eNotation
                        End If

                    End If

                    GoTo AlignFormattedValue 'Skip the "ApplyStringFormat" step, it's applied already.

                    Case "N", "n" 'NUMERIC format, formats string as an integer or decimal number.
                    'Precision specifier determines number of decimal digits.
                    'This implementation ignores regional settings'
                    '(hard-coded group and decimal separators).

                    precisionSpecifier = CInt(precisionString)
                    If LenB(formatGroup) > 2 And precisionSpecifier > 0 Then
                        'if a non-zero precision is specified...
                        thisFormat = "#,##0"
                        thisFormat = (thisFormat & ".") & String$(precisionSpecifier, Chr$(48))

                    Else 'only the "D" is specified
                        thisFormat = "#,##0"
                    End If

                    Case "P", "p" 'PERCENT format. Formats string as a percentage.
                    'Value is multiplied by 100 and displayed with a percent symbol.
                    'Precision specifier determines number of decimal digits.

                    thisFormat = "#,##0%"
                    precisionSpecifier = CInt(precisionString)
                    If LenB(formatGroup) > 2 And precisionSpecifier > 0 Then
                        'if a non-zero precision is specified...
                        thisFormat = "#,##0"
                        thisFormat = (thisFormat & ".") & String$(precisionSpecifier, Chr$(48))

                    Else 'only the "P" is specified
                        thisFormat = "#,##0"
                    End If

                    'Append the percentage sign to the format string:
                    thisFormat = thisFormat & "%"

                    Case "R", "r" 'ROUND-TRIP format (a string that can round-trip to an identical number)
                    'example: ?StringFormat("{0:R}", 0.0000000001141596325677345362656)
                    '         ...returns "0.000000000114159632567735"

                    'convert value to a Double (chop off overflow digits):
                    v = CDbl(v)

                    Case "X", "x" 'HEX format. Formats a string as a Hexadecimal value.
                    'Precision specifier determines number of total digits.
                    'Returned string is prefixed with "&H" to specify Hex.

                    v = Hex(v)
                    precisionSpecifier = CInt(precisionString)

                    If LenB(precisionString) > 0 Then 'precision here stands for left padding
                        v = Right$(String$(precisionSpecifier, "0") & v, IIf(precisionSpecifier = 0, Len(v), precisionSpecifier))
                    End If

                    'add C# hex specifier, apply specified casing:
                    '(VB6 hex specifier would cause Format() to reverse the formatting):
                    v = "0x" & IIf(formatSpecifier = "X", UCase$(v), LCase$(v))

                    Case Else

                        If IsNumeric(formatSpecifier) And val(formatGroup) = 0 Then
                            formatSpecifier = formatGroup
                            v = Format(v, formatGroup)
                        Else
                            Err.Raise ERR_FORMAT_EXCEPTION, _
                                ERR_SOURCE, ERR_MSG_INVALID_FORMAT_STRING
                        End If
                End Select

                GoTo ApplyStringFormat

DateTimeFormatSpecifiers:
                Select Case formatSpecifier

                    Case "c", "C" 'CUSTOM date/time format
                    'let VB Format() parse precision specifier as is:
                        thisFormat = precisionString

                    Case "d" 'SHORT DATE format
                        thisFormat = "ddddd" 

                    Case "D" 'LONG DATE format
                        thisFormat = "dddddd"

                    Case "f" 'FULL DATE format (short)
                        thisFormat = "dddddd h:mm AM/PM"

                    Case "F" 'FULL DATE format (long)
                        thisFormat = "dddddd ttttt"

                    Case "g"
                        thisFormat = "ddddd hh:mm AM/PM"

                    Case "G"
                        thisFormat = "ddddd ttttt"

                    Case "s" 'SORTABLE DATETIME format
                        thisFormat = "yyyy-mm-ddThh:mm:ss"

                    Case "t" 'SHORT TIME format
                        thisFormat = "hh:mm AM/PM"

                    Case "T" 'LONG TIME format
                        thisFormat = "ttttt"

                    Case Else
                        Err.Raise ERR_FORMAT_EXCEPTION, _
                            ERR_SOURCE, ERR_MSG_INVALID_FORMAT_STRING
                End Select
                GoTo ApplyStringFormat

            End If

ApplyStringFormat:
            'apply computed format string:
            formattedValue = Format(v, thisFormat)

AlignFormattedValue:
            'apply specified alignment specifier:
            If alignmentSpecifier <> vbNullString Then

                alignmentPadding = Abs(CInt(alignmentSpecifier))
                If CInt(alignmentSpecifier) < 0 Then
                    'negative: left-justified alignment
                    If alignmentPadding - Len(formattedValue) > 0 Then _
                        formattedValue = formattedValue & _
                            String$(alignmentPadding - Len(formattedValue), PADDING_CHAR)
                Else
                    'positive: right-justified alignment
                    If alignmentPadding - Len(formattedValue) > 0 Then _
                        formattedValue = String$(alignmentPadding - Len(formattedValue), PADDING_CHAR) & formattedValue
                End If
            End If

            'Replace C# hex specifier with VB6 hex specifier, 
            'only if hex specifier was introduced in this function:
            If (Not useLiteral And escapeHex) And _
                StringContains(formattedValue, "0x") Then _
            formattedValue = Replace$(formattedValue, "0x", "&H")

            'replace all occurrences of placeholder {i} with their formatted values:
            return_value = Replace(return_value, thisString, formattedValue, Count:=1)

            'reset before reiterating:
            thisFormat = vbNullString
        Next

checkEscapes:
        'if there's no more backslashes, don't bother checking for the rest:
        If useLiteral Or Not StringContains(return_value, "\") Then GoTo normalExit

        Dim escape As New EscapeSequence
        Dim escapes As New Collection
        escapes.Add escape.Create("\n", vbNewLine), "0"
        escapes.Add escape.Create("\q", Chr$(34)), "1"
        escapes.Add escape.Create("\t", vbTab), "2"
        escapes.Add escape.Create("\a", Chr$(7)), "3"
        escapes.Add escape.Create("\b", Chr$(8)), "4"
        escapes.Add escape.Create("\v", Chr$(13)), "5"
        escapes.Add escape.Create("\f", Chr$(14)), "6"
        escapes.Add escape.Create("\r", Chr$(15)), "7"

        For i = 0 To escapes.Count - 1
            Set escape = escapes(CStr(i))
            If StringContains(return_value, escape.EscapeString) Then _
                return_value = Replace(return_value, escape.EscapeString, escape.ReplacementString)

            If Not StringContains(return_value, "\") Then _
                GoTo normalExit
        Next

        'replace "ASCII (oct)" escape sequence
        Set regex = New RegExp
        regex.Pattern = "\\(\d{3})"
        regex.IgnoreCase = True
        regex.Global = True
        Set matches = regex.Execute(format_string)

        Dim char As Long
        If matches.Count <> 0 Then
            For Each thisMatch In matches
                p = thisMatch.SubMatches(0)
                '"p" contains the octal number representing the ASCII code we're after:
                p = "&O" & p 'prepend octal prefix
                char = CLng(p)
                return_value = Replace(return_value, thisMatch.Value, Chr$(char))
            Next
        End If

        'if there's no more backslashes, don't bother checking for the rest:
        If Not StringContains("\", return_value) Then GoTo normalExit

        'replace "ASCII (hex)" escape sequence
        Set regex = New RegExp
        regex.Pattern = "\\x(\w{2})"
        regex.IgnoreCase = True
        regex.Global = True
        Set matches = regex.Execute(format_string)

        If matches.Count <> 0 Then
            For Each thisMatch In matches
                p = thisMatch.SubMatches(0)
                '"p" contains the hex value representing the ASCII code we're after:
                p = "&H" & p 'prepend hex prefix
                char = CLng(p)
                return_value = Replace(return_value, thisMatch.Value, Chr$(char))
            Next
        End If

normalExit:
        Set escapes = Nothing
        Set escape = Nothing
        If Not useLiteral And StringContains(return_value, Chr$(27)) Then _
            return_value = Replace(return_value, Chr$(27), "\")
        StringFormat = return_value
End Function 
```

注意`ParamArray`方法签名中的（感谢@wqw）：这样做可以避免使用多个可选参数（以及在调用语句中命名参数时能够在`value2`不分配的情况下分配的使用错误）。`value1`因为它是 a `ParamArray`，所以各个值是`Variant`这意味着每个参数都可以是不同的类型，VB 正在幕后进行字符串转换。

然后可以像这样使用该函数：

```
?StringFormat("(C) Currency: . . . . . . . . {0:C}\n" & _
    "(D) Decimal:. . . . . . . . . {0:D}\n" & _
    "(E) Scientific: . . . . . . . {1:E}\n" & _
    "(F) Fixed point:. . . . . . . {1:F}\n" & _
    "(N) Number: . . . . . . . . . {0:N}\n" & _
    "(P) Percent:. . . . . . . . . {1:P}\n" & _
    "(R) Round-trip: . . . . . . . {1:R}\n" & _
    "(X) Hexadecimal:. . . . . . . {0:X}\n",-123, -123.45) 
```

输出：

```
(C) Currency: . . . . . . . . -123.00$
(D) Decimal:. . . . . . . . . -123
(E) Scientific: . . . . . . . -1.23450E2
(F) Fixed point:. . . . . . . -123
(N) Number: . . . . . . . . . -123
(P) Percent:. . . . . . . . . -12,345%
(R) Round-trip: . . . . . . . -123.45
(X) Hexadecimal:. . . . . . . &HFFFFFF85 
```

也像这样：

```
?StringFormat("(c) Custom format: . . . . . .{0:cYYYY-MM-DD (MMMM)}\n" & _
    "(d) Short date: . . . . . . . {0:d}\n" & _
    "(D) Long date:. . . . . . . . {0:D}\n" & _
    "(T) Long time:. . . . . . . . {0:T}\n" & _
    "(f) Full date/short time: . . {0:f}\n" & _
    "(F) Full date/long time:. . . {0:F}\n" & _
    "(s) Sortable: . . . . . . . . {0:s}\n", Now()) 
```

输出：

```
(c) Custom format: . . . . . .2013-01-26 (January)
(d) Short date: . . . . . . . 1/26/2013
(D) Long date:. . . . . . . . Saturday, January 26, 2013
(T) Long time:. . . . . . . . 8:28:11 PM
(f) Full date/short time: . . 1/26/2013 8:28:11 PM
(F) Full date/long time:. . . Saturday, January 26, 2013 8:28:11 PM
(s) Sortable: . . . . . . . . 2013-01-26T20:28:11 
```

也可以指定对齐方式（/填充）并使用转义序列：

```
?StringFormat ("\q{0}, {1}!\x20\n'{2,10:C2}'\n'{2,-10:C2}'", "hello", "world", 100)

"hello, world!"
'   100.00$'
'100.00$   ' 
```

查看来自[http://msdn.microsoft.com/fr-fr/library/b1csw23d(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/b1csw23d(v=vs.80).aspx)的示例，只有少数格式说明符没有实现，主要是日期/时间说明符......但我会认为“c”自定义日期/时间格式说明符构成了它。

该函数使用一个简单的实现`String.Contains()`：

```
Public Function StringContains(string_source As String, find_text As String, _
    Optional ByVal caseSensitive As Boolean = True) As Boolean
    StringContains = StringContainsAny(string_source, caseSensitive, find_text)
End Function 
```

**编辑：**此代码现在正确处理“\\”转义，如评论中所述。此外，虽然`StringContains`肯定是实用的，并且比`InStr()`调用更舒适，但以下`StringContainsAny`功能甚至更好：

```
Public Function StringContainsAny(string_source As String, ByVal caseSensitive As Boolean, _
    ParamArray find_values()) As Boolean

    Dim i As Integer, found As Boolean
    If caseSensitive Then
        For i = LBound(find_values) To UBound(find_values)
            found = (InStr(1, string_source, _
                find_values(i), vbBinaryCompare) <> 0)
            If found Then Exit For
        Next
    Else
        For i = LBound(find_values) To UBound(find_values)
            StringContainsAny = (InStr(1, LCase$(string_source), _ 
                LCase$(find_values(i)),   vbBinaryCompare) <> 0)
            If found Then Exit For
        Next
    End If
    StringContainsAny = found
End Function 
```

考虑以下：

```
foo = Instr(1, source, "value1") > 0 Or Instr(1, source, "value2") > 0 _
   Or Instr(1, source, "value3") > 0 Or Instr(1, source, "value4") > 0 _
   Or Instr(1, source, "value5") > 0 Or Instr(1, source, "value6") > 0 _ 
```

在 VB 可以确定`foo`is`TRUE`或之前`FALSE`，每个单独`InStr()`的调用都会进行。但是，使用`StringContainsAny()`时，条件满足于找到的第一个值，这使其成为更快的语句。

编辑：以前的编辑几乎消除了转义序列；使用暴露两个属性和工厂方法的小类“EscapeSequence”恢复它们 - 这样做允许保留 for-each 循环并处理所有简单的转义，而无需复制太多代码。

这段代码还使用了一个`StringStartsWith`函数，实现如下：

```
Public Function StringStartsWith(ByVal find_text As String, ByVal string_source As String, Optional ByVal caseSensitive As Boolean = True) As Boolean

    If caseSensitive Then
        StringStartsWith = (Left$(string_source, LenB(find_text) / 2) = find_text)
    Else
        StringStartsWith = (Left$(LCase(string_source), LenB(find_text) / 2) = LCase$(find_text))
    End If

End Function 
```

# php - javascript Web 应用程序是否应该使用另一种服务器端语言？

> ID：14534363
> 
> 赞同：0
> 
> 时间：2013-01-26T06:05:09.493
> 
> 标签：php, javascript, ajax, web-applications, server-side

我想创建一个 Web 应用程序。我做了很多 java 并且对可用的 Web 应用程序框架印象不深。

我正在考虑使用另一种服务器端语言，如 php，但我不想要学习曲线。

这让我想到了 javascript。我可以并且应该使用 ajax 执行所有服务器端调用吗？我有一个面向服务的架构，可以访问我需要的所有数据。

将服务器端语言与 javascript 结合使用来构建强大的 Web 应用程序是否更有利？是否最好使用纯 javascript 并对我的 Web 服务进行 ajax 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:11:58.223

你可以，但问题是你应该吗？从一开始就建议为禁用 JavaScript 的人优雅地回退，但一些大型服务和网站似乎不再介意。例如，如果没有启用 JavaScript，您将无法打开 Facebook。

这并不是说你应该这样做。你必须通过让体验变得更好来证明它的合理性。确保它的导航完美运行，并且您正确地利用了历史记录。

客户端应用程序还必须在一个全新的水平上处理浏览器差异。当然，使用 jQuery 等框架更容易做到这一点，但您会注意到浏览器之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:41:57.220

## **我可以并且应该使用 ajax 执行所有服务器端调用吗？**

是的。您可以使用 AJAX 执行所有服务器端调用。即使是现在，也出现了很多单页应用程序，它们大量使用 AJAX 和 Javascript MVC 与服务器通信。甚至一些 javascript 框架也提供了内置的 REST 支持（例如 - **Backbone JS**）。
但话虽如此，*您应该考虑为 AJAX 调用设置回退机制*。因此，如果用户关闭了 javascript，他应该被导航到适当的页面。（同样，这取决于您选择是否支持 nonJS）

## **将服务器端语言与 javascript 结合使用来构建强大的 Web 应用程序是否更有利？**

使用 javscript 的优势取决于您的测试用例，主要取决于您的服务的受众。但是转向异步通信肯定更“***冒险”，但前提是你以结构化的方式使用它。***我建议为此使用 Javascript 端的任何 MVC 框架。

## **是否最好使用纯 javascript 并对我的 Web 服务进行 ajax 调用？**

同样，偏好取决于您的 Web 服务的用例场景。像这样使用 javascript 并没有什么坏处。唯一的事情是你应该很少意识到你正在做的 javascript 调用的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:51:27.637

当您仅使用 Javascript 构建 Web 应用程序时，您会将所有负载和进程完全交给客户端。从技术上讲，服务器仍然可以完成一些工作，因为您将使用 ajax 调用，但考虑到低端 PC 或普通移动设备的性能，他们将很难加载您的 Web 应用程序。

在同时使用 PHP 和 Javascript 的情况下，您可以灵活地为 Web 应用程序提供更高的性能，因为客户端和服务器彼此共享负载和进程。当然，使用 PHP 将为您提供更好的访问工具您网站的数据库很容易，在这种情况下是 MySQL ..

# c# - 从 VisualTreeHelper.HitTest 访问 FrameworkElement 的子类

> ID：14534364
> 
> 赞同：1
> 
> 时间：2013-01-26T06:05:38.647
> 
> 标签：c#, wpf, .net-4.0, frameworkelement, visualtreehelper

我有一个自定义元素类，它是`FrameworkElement`.

```
public class MyCustomElement : FrameworkElement
{
    private VisualCollection children;

    public MyCustomElement()
    {
        this.children = new VisualCollection(this);
        this.children.Add(MyDrawingRoutines());
    }

    private DrawingVisual MyDrawingRoutines()
    {
        //...
    }

    protected override int VisualChildrenCount
    {
        get { return children.Count; }
    }

    protected override Visual GetVisualChild(int index)
    {
        if (index < 0 || index >= children.Count)
        {
            throw new ArgumentOutOfRangeException();
        }

        return children[index];
    }
} 
```

UI 拥有一个画布，其中添加了这些自定义绘图元素并执行命中测试。

```
public partial class MainWindow : Window
{
        private MyCustomElement myCustomElement;

        public MainWindow()
        {
            InitializeComponent();

            myCustomElement = new MyCustomElement();
            myCanvas.Children.Add(myCustomElement);
        }

        private void myCanvas_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
        {
            System.Windows.Point pt = e.GetPosition((UIElement)sender);
            VisualTreeHelper.HitTest(this, null, new HitTestResultCallback(leftClickCallback), new PointHitTestParameters(pt));
        }

        public HitTestResultBehavior leftClickCallback(HitTestResult result)
        {
            if (result.VisualHit.GetType() == typeof(DrawingVisual))
            {
                if (((DrawingVisual)result.VisualHit).Opacity == 1.0)
                {
                    ((DrawingVisual)result.VisualHit).Opacity = 0.4;
                }
                else
                {
                    ((DrawingVisual)result.VisualHit).Opacity = 1.0;
                }
            }

            return HitTestResultBehavior.Stop;
        }

    }
} 
```

此代码按预期工作，但我找不到确定检测到的 DrawingVisual 属于哪个 MyCustomElement 的方法。现在，不透明度调整只是表面上正确吗？我想更改 MyCustomElement 上的 opacity 属性，让 MyDrawingRoutines() 方法应用它，并且只在 Canvas 上绘制完成的 DrawingVisual。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T08:21:52.933

您应该能够将 DrawingVisual 的[Parent](http://msdn.microsoft.com/en-us/library/system.windows.media.containervisual.parent.aspx)属性转换为 MyCustomElement 类：

```
public HitTestResultBehavior leftClickCallback(HitTestResult result)
{
    var visual = result.VisualHit as DrawingVisual;

    if (visual != null)
    {
        var element = visual.Parent as MyCustomElement;

        if (element != null)
        {
            if (element.Opacity == 1.0)
            {
                element.Opacity = 0.4;
            }
            else
            {
                element.Opacity = 1.0;
            }
        }
    }

    return HitTestResultBehavior.Stop;
} 
```

* * *

如果您需要获取任何视觉对象的父对象（不仅仅是具有`Parent`如上所示属性的 ContainerVisual），您可以使用[VisualTreeHelper.GetParent](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getparent.aspx)：

```
var visual = result.VisualHit;
var element = VisualTreeHelper.GetParent(visual) as MyCustomElement; 
```

# annotations - 设置我的地图视图；如何添加多个注释？

> ID：14534373
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:07:15.347
> 
> 标签：annotations, mkmapview, mapkit

我在我的应用程序中创建了一个 MapView，它可以放大用户的当前位置，并且效果很好。请参阅下面的代码：

**.h 文件**

```
@interface MapViewController : UIViewController  <MKMapViewDelegate> 

@property (nonatomic, strong) IBOutlet MKMapView *mapView;

@end 
```

**.m 文件**

```
- (void)viewDidLoad {

[super viewDidUnload];

    [mapView setMapType:MKMapTypeStandard];
    [mapView setZoomEnabled:YES];
    [mapView setScrollEnabled:YES];

    self.mapView.delegate = self;
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation

{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.coordinate, 800, 800);
    [self.mapView setRegion:[self.mapView regionThatFits:region] animated:YES];

MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = userLocation.coordinate;
point.title = @"You Are Here";
point.subtitle = @"Your current location";

[self.mapView addAnnotation:point];
} 
```

此代码将注释放置在用户当前位置的位置。但是，从这里开始，我想添加多个注释（以便用户可以看到它们周围的关键位置）。为了做到这一点，我需要添加/更改什么代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:16:58.940

这可以通过很多很多不同的方式来完成。这取决于您的数据源和需求

这是添加两个的方法

```
MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = userLocation.coordinate;
point.title = @"You Are Here";
point.subtitle = @"Your current location";

[self.mapView addAnnotation:point];

MKPointAnnotation *point2 = [[MKPointAnnotation alloc] init];
point2.coordinate = aDifferentCoordinate;
point2.title = @"You Are Here";
point2.subtitle = @"Your current location";

[self.mapView addAnnotation:point2]; 
```

这是一种在同一点添加一千的方法

```
int i;
for(i = 0; i < 1000; i++)
{
    MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
    point.coordinate = userLocation.coordinate;
    point.title = @"You Are Here";
    point.subtitle = @"Your current location";

   [self.mapView addAnnotation:point];
} 
```

# microsoft-commerce-server - Commerce Server 2007 中的税务模块

> ID：14534383
> 
> 赞同：0
> 
> 时间：2013-01-26T06:08:35.783
> 
> 标签：microsoft-commerce-server, commerceserver2007, commerceserver

我们是否有任何开箱即用的管道组件用于在 commerce server 2007 中计算税收？是否建议在 commerce server 交易相关数据库中使用自定义表来存储税收信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:31:53.587

是否在 _transactionconfig 数据库中存储税款取决于您。这取决于您开展业务的税收规则/法律的复杂程度。如果您必须处理计算税收的变量不断变化的全球问题，那么我建议您使用税收计算服务来自商家提供商的 Verisign、FirstDataCorporation 和许多其他提供商都有 Web 服务 API，如果您设置了付费商家帐户，您可以访问这些 API 来为您处理这些计算。对于简单的税收计算，您甚至可以考虑将其存储在您的 app.config 或 web.config 文件中，如果它只是一个很少变化的固定百分比。

对于是否存在用于计算税收的开箱即用的管道组件，答案是否定的。Commerce Server 2007 仅附带两个与税收相关的管道组件。如果您打开可以在您的商务服务器站点的管道文件夹中找到的 total.pcf 文件，您会注意到一个名为 tax 的阶段。您将看到一个 DefaultTaxCy 组件和一个 RequiredTaxCy 组件。

DefaultTaxCy 组件将 _cy_tax_total（表示当前订单上的总税额的十进制值）初始化为零，并将 _cy_tax_included（表示订单上是否包含税的布尔值）设置为 false。

RequiredTaxCy 组件仅读取 _cy_Tax_total 值和 _cy_tax_included 值，如果遇到错误，则将错误写入 _PurchaseErrors 字典。

您要做的是创建一个自定义管道组件来替换 DefaultTaxCy 组件并设置订单上的 _cy_tax_total 属性的值。可以在此处的 MSDN 上找到说明[http://msdn.microsoft.com/en-US/library/ms916284(v=cs.70).aspx](http://msdn.microsoft.com/en-US/library/ms916284(v=cs.70).aspx)

这是一个简单的示例，仅自定义管道组件的 Execute 方法迭代订单中的每个 lineitem，然后根据我称为“CalculateTaxForLineItem”的假设方法增加订单上的税收总额，该方法将 LineItem 字典作为参数，然后将允许您使用自己的自定义业务逻辑计算该税。

```
public int Execute(object pdispOrder, object pdispContext, int lFlags)
{
     string basketErrorMessage = string.Empty;
     int componentErrorLevel = 1;
        IDictionary order = (IDictionary)pdispOrder;
        ISimpleList lineItems = (ISimpleList)order["items"];
        if (lineItems != null && lineItems.Count > 0)
        {
          decimal taxTotal = 0M;
          int lineItemCount = lineItems.Count;
          // Loop over the lineitems
          for (int i = 0; i < lineItemCount; i++)
          {
             IDictionary lineItem = (IDictionary)lineItems[i];
             decimal lineItemTaxTotal = 0M; 
             // TODO: peform some business logic to get calculate the lineItemTaxTotal
             // per line here
             lineItemTaxTotal = CalculateTaxForLineItem(lineItems[i]);
             // add the lineitem tax total that was calculated to the total for the order
             taxTotal += lineItemTaxTotal;

           }
         }
      // Set the _cy_tax_total for the orderform
      order["_cy_tax_total"] = taxTotal;

      return componentErrorLevel;

}

public decimal CalculateTaxForLineItem(IDictionary currentLineItem){

   // TODO: write your code to calculate your lineitem tax totals based on whatever
   // custom business logic you want (could be a web service from a 3rd party tax service, could 
   // be custom sql reaching out to a database, your choice....
} 
```

# iphone - 无法在标签栏控制器的顶部完全呈现模态视图控制器

> ID：14534394
> 
> 赞同：0
> 
> 时间：2013-01-26T06:11:10.117
> 
> 标签：iphone, ios, objective-c

我正在创建一个选项卡式 iPhone 应用程序。当应用程序启动时，如果用户未登录，则应该在选项卡栏控制器的顶部显示一个模式视图（因此看起来这是第一个屏幕）。登录后，模态视图会滑开以显示其后面的标签栏控制器。

不幸的是，当我`[self.tabBarController presentViewController:self.loginViewController animated:NO completion:NULL]`从我的应用程序委托内部调用时，我仍然可以看到屏幕底部的选项卡。我需要他们覆盖。

具有讽刺意味的是，在寻找解决方案时，我发现大多数人都遇到了逆问题。

我注意到，如果我*没有*将窗口的 rootViewController 设置为 UITabBarController，只将其视图作为窗口的子视图插入，那么它可以按预期工作，但是 Xcode 抱怨缺少 rootViewController。这里发生了什么？

我的应用程序委托的`-application:didFinishLaunchingWithOptions:`方法如下所示。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self registerDefaults];
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = @[
        [self makeSellingListingsController],
        [[[UIViewController alloc] init] autorelease], // stub
        [[[UIViewController alloc] init] autorelease], // stub
        [[[UIViewController alloc] init] autorelease]  // stub
    ];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.window.rootViewController = self.tabBarController;
    [self.window addSubview:self.tabBarController.view];

    [self presentLogin]; // this doesn't cover the tabs, but it should

    [self.window makeKeyAndVisible];
    return YES;
}

- (void)presentLogin
{
    [self.tabBarController presentViewController:[[[FLLoginViewController alloc]
                                                   initWithNibName:@"FLLoginViewController"
                                                   bundle:[NSBundle mainBundle]] autorelease]
                                        animated:NO
                                      completion:NULL];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:22:52.673

不要从选项卡栏控制器显示它，而是从第一个选项卡的根控制器的 viewDidAppear 方法中显示它。如果您将 NO 传递给动画参数，则当您启动应用程序时，模态屏幕将是您看到的第一件事。

# mongodb - Can i use mongoexport --query where file is a list of conditions

> ID：14534395
> 
> 赞同：0
> 
> 时间：2013-01-26T06:11:32.350
> 
> 标签：mongodb, mongoexport, database

I have an array of ids stored in a file, and I want to retrieve their data from the mongdb so i looked into the mongoexport method. it seems --query option can only accept a json instead read a large json or array from a file. In my case, it is about 4000 ids stored in the file. Is there a solution to this?

I was able to use mongoexport --db db --collection collection --field name --csv -oout ~/data.csv but how to read query conditions from a file

for example, for mongoid in rails application, query like this is Data.where(:_id.in => array).

or is it possible to do from mongo shell by executing a javscript file

tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:13:39.337

I believe you can use a javascript to output the array you need.

you can use "printjson" command in your script, for example:

create a script.js javascript file as following:

script.js:

printjson( db.albums.find({_id : 18}, {"images" : 1,"_id":0}).toArray() )

Call hi as follow:

mongo test script.js > out.txt

In my local environment albums collection has the following structure:

```
 db.albums.findOne({"_id":18
{
        "_id" : 18,
        "images" : [
                2926,
                5377,
                8036,
                9023,
                10119,
                11543,
                12305,
                12556,
                12576,
                13753,
                14414,
                14865,
                15193,
                15933,
                17156,
                17314,
                17391,
                20168,
                21705,
                22016,
                22348,
                23036,
                23452,
                24112,
                27086,
                27310,
                27864,
                28092,
                29184,
                29190,
                29250,
                29354,
                29454,
                29563,
                30366,
                30619,
                31390,
                31825,
                31906,
                32339,
                32674,
                33307,
                33844,
                37475,
                37976,
                38717,
                38774,
                39801,
                41369,
                41752,
                44977,
                45384,
                45643,
                46918,
                47069,
                50099,
                52755,
                54314,
                54497,
                62338,
                63438,
                63572,
                63600,
                65631,
                66953,
                67160,
                67369,
                69802,
                71087,
                71127,
                71282,
                73123,
                73201,
                73954,
                74972,
                76279,
                77054,
                78397,
                78645,
                78936,
                79364,
                79707,
                83065,
                83142,
                83568,
                84160,
                85391,
                85443,
                85488,
                86143,
                86240,
                86949,
                89406,
                89846,
                92591,
                92639,
                92655,
                93844,
                93934,
                94987,
                95324,
                95431,
                95817,
                95864,
                96230,
                96975,
                97026
        ]
}
> 
```

, so the output I got was:

$ cat out.txt

```
MongoDB shell version: 2.2.1
connecting to: test
[
        {
                "images" : [
                        2926,
                        5377,
                        8036,
                        9023,
                        10119,
                        11543,
                        12305,
                        12556,
                        12576,
                        13753,
                        14414,
                        14865,
                        15193,
                        15933,
                        17156,
                        17314,
                        17391,
                        20168,
                        21705,
                        22016,
                        22348,
                        23036,
                        23452,
                        24112,
                        27086,
                        27310,
                        27864,
                        28092,
                        29184,
                        29190,
                        29250,
                        29354,
                        29454,
                        29563,
                        30366,
                        30619,
                        31390,
                        31825,
                        31906,
                        32339,
                        32674,
                        33307,
                        33844,
                        37475,
                        37976,
                        38717,
                        38774,
                        39801,
                        41369,
                        41752,
                        44977,
                        45384,
                        45643,
                        46918,
                        47069,
                        50099,
                        52755,
                        54314,
                        54497,
                        62338,
                        63438,
                        63572,
                        63600,
                        65631,
                        66953,
                        67160,
                        67369,
                        69802,
                        71087,
                        71127,
                        71282,
                        73123,
                        73201,
                        73954,
                        74972,
                        76279,
                        77054,
                        78397,
                        78645,
                        78936,
                        79364,
                        79707,
                        83065,
                        83142,
                        83568,
                        84160,
                        85391,
                        85443,
                        85488,
                        86143,
                        86240,
                        86949,
                        89406,
                        89846,
                        92591,
                        92639,
                        92655,
                        93844,
                        93934,
                        94987,
                        95324,
                        95431,
                        95817,
                        95864,
                        96230,
                        96975,
                        97026
                ]
        }
] 
```

Regards, Moacy

# git - 将我所有的提交压缩为一个用于 GitHub 拉取请求

> ID：14534397
> 
> 赞同：78
> 
> 时间：2013-01-26T06:11:57.293
> 
> 标签：git, github, pull-request, squash

我在 GitHub 上提出了拉取请求。现在存储库的所有者说要将所有提交压缩为一个。

当我键入`git rebase -i`记事本时，会打开以下内容：

```
noop

# Rebase 0b13622..0b13622 onto 0b13622
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out 
```

我在谷歌上搜索，但我不明白如何做到这一点。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-05-20T04:29:16.093

只是一个简单的补充来帮助其他人寻找这个解决方案。您可以传入您想要压缩的先前提交的数量。例如，

```
git rebase -i HEAD~3 
```

这将在编辑器中显示最后 3 次提交。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-26T08:25:21.723

好的，我想通了...首先我必须写出`git rebase -i xxxxxxxxxxxxxxxx`xxxxxxxxxx 是提交的 SHA 的位置，我必须将其压缩。然后在记事本中，我将第一个编辑为挑选，其余的编辑为壁球。然后会出现一个新的记事本窗口，在第一行中我输入了新提交的名称。然后我不得不做一个力推：

```
git push --force origin master 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-05-08T23:25:59.173

[自 2016 年 4 月 1 日起](https://github.com/blog/2141-squash-your-commits)，存储库的经理可以通过在拉取请求上选择“压缩并合并”将拉取请求中的所有提交压缩为单个提交。

[![挤压和合并选项](../Images/440d63eb2545cd140c20616702769d97.png)](https://i.stack.imgur.com/8t1OJ.png)

如果您想在拉取请求中手动压缩提交，请参阅[fontno 的答案](https://stackoverflow.com/questions/14534397/squash-all-my-commits-into-one-for-github-pull-request/16642628#16642628)。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-26T06:13:51.143

尝试`git rebase -i`，并为所有要压缩的提交使用 'squash'。

编辑：

`git rebase -i`将向您显示一个交互式编辑器，其中包含您正在变基的提交列表。每次提交之前的默认命令是“pick”，所以你只需要 s/pick/squash/ 来获取你想要压缩的所有提交，然后它们都将被压缩到他们最后一次提交。

确保你在正确的分支上重新定位。

# css - z-index 问题，高级 z-indexing

> ID：14534399
> 
> 赞同：1
> 
> 时间：2013-01-26T06:12:03.630
> 
> 标签：css, z-index, css-position

我正在寻找在此链接上找出浮动社交栏的 z 索引（向下滚动页面以使其显示）：

[http://dailycaller.com/2013/01/25/herman-cain-explains-why-he-wont-run-for-georgia-senate-seat/](http://dailycaller.com/2013/01/25/herman-cain-explains-why-he-wont-run-for-georgia-senate-seat/)

目前，我设置包含 div 的方式，为了在侧面的固定位置，100% 使用固定 div。这是覆盖内容，因此内容中的链接不可定位。

问题是 facebook like 按钮。如何正确设置 z 索引，以便 facebook 框显示在顶部，但内容中的超链接是可定位的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:03:25.410

您也许可以设置侧边栏容器的宽度而不是使其 100% 然后使用

```
overflow: visible; 
```

示例：http: [//jsfiddle.net/CFCDS/3/](http://jsfiddle.net/CFCDS/3/)

（请原谅我的利润——它们只是为了让一切看起来更像你拥有它。）

# java - Java Object Array - 通过 int 将对象放入数组中

> ID：14534404
> 
> 赞同：0
> 
> 时间：2013-01-26T06:13:09.863
> 
> 标签：java

我目前正在开发一款 Java 游戏，它会在屏幕顶部生成块并且它们会掉下来（你必须躲避它们）。目前我在屏幕顶部从一个数组中生成游戏块，但我不知道如何使它们的 y 位置下降 (int)。

基本上我只需要帮助创建一个公共 void 来检查一个对象数组，并且对于一个对象的每个实例，它发现它会将它的 y 位置降低 12。

从代码中选择的片段：

```
static Object[][] food = new Object[7][700];

public void draw() {
    try {
        Graphics g = bufferStrategy.getDrawGraphics();
        g.clearRect(0, 0, this.getSize().width, this.getSize().height);

        // Draw to back buffer
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, this.getSize().width, this.getSize().height);
        g.setColor(Color.BLUE);
        g.fillRect(Player.getX(), Player.getY(), Player.WIDTH, Player.HEIGHT);
        g.setColor(Color.GRAY);

        for(int x = 0; x < food.length; x++) {
            for(int y = 0; y < food[x].length; y ++) {
                Object o = food[x][y];
                if(o instanceof Hamburger) {
                    new Hamburger(x * 100, y, g);           
                }
                else if(o instanceof Salad) {
                    new Salad(x * 100, y, g);
                }
            }
        }

        GUI.draw(g);

    } catch(Exception e) {
        e.printStackTrace();
    } finally {
        bufferGraphics.dispose();
    }
}

public void dropBlocks() {

}

public void addBlock() {
    if(new Random().nextInt(2) == 1) {
        food[new Random().nextInt(7)][0] = new Hamburger(0, 0);
    } else food[new Random().nextInt(7)][0] = new Salad(0, 0);
}

public  void drawBackbufferToScreen() {
    bufferStrategy.show();

    Toolkit.getDefaultToolkit().sync();
}

public void run() {
    int i = 0;
    while(running) {
        i++;
        draw();
        Player.update();
        drawBackbufferToScreen();

        if(i == 50) {
            addBlock();
            i = 0;
        }

        dropBlocks();   

        Thread.currentThread();
        try {
            Thread.sleep(10);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

Food.java（汉堡和沙拉扩展的内容）

```
public class Food {
public static int x;
public static int y;
public static int HEIGHT;
public static int WIDTH;
public int type;

private static Image blockImage;

// Default constructor
public Food() {
    Food.x = 0;
    Food.y = 0;
    Food.HEIGHT = 80;
    Food.WIDTH = 80;
}

public Food(int x, int y) {
    Food.x = x;
    Food.y = y;
    Food.HEIGHT = 80;
    Food.WIDTH = 80;
}

// Getters and setters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:24:00.093

我会做这样的事情：

```
Object[][] board = new Object[7][700];  //Game board.  
//you can also switch the width and height
//Initialization

for (int x = 699; x >= 0; x--) {
    for (int y = 0; y < 7; y++) {
        if (x == 699) {
            board[y][x] = BLANK; //set spot to open if it is the bottom row
            continue;
        }
        board[y][x+1] = board[y][x]; //move row down
    }
}
//Generate new Objects if needed for the top row of the board. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:36:47.657

显然 Object 没有`getY()`方法。你可以用铸造和做丑陋的事情`instanceof`，但这种设计相当糟糕。尝试转向面向对象的模型。

```
interface Drawable {
    int getX();
    int getY();
    void moveDown(int numSpaces);
}

class Hamburger implements Drawable {
    private int x;
    private int y;
    public Hamburger(final int xPos, final int yPos) {
       x = xPos;
       y = yPos;
    }

    @Override
    public void moveDown(final int numSpaces) {
        // eg negative number, off the screen
        if(isValid(numSpaces)) {
           setY(getY() - numSpaces);
        }
    }
}

class Positioner {
  public static void moveMyObjects(final Drawable[][] objs) {
      for(Drawable[] rows : objs) {
          for(Drawable col : rows) {
             // clearly Object doesn't have a getY() method, so you should create your own interface and implement it
             col.moveDown(12);
          }
       }
   }
} 
```

# spring - 如何在事务中的 mule 流中调用多个 http web 服务？

> ID：14534406
> 
> 赞同：3
> 
> 时间：2013-01-26T06:13:33.863
> 
> 标签：spring, hibernate, mule, mule-studio

我是新来的骡子。我有一个弹簧休眠骡子设置。假设有 3 个 web 服务。目标是在 mule 流中调用所有这些 web 服务，以便所有 3 个都在事务中。因此假设如果第 3 个 web 服务失败，那么前 2 个将自动回滚。

这是我尝试过的代码片段。我的 mule-flow.xml( `currently I have only one webservice,kindly let me know how can I add multipe webservice call in flow?`)

```
<spring:beans>
 <spring:import resource="classpath:spring-mule.xml"/>
 <spring:import resource="classpath:applicationContext-persistence.xml"/>
</spring:beans>

<flow name="addCustomer" doc:name="addCustomer">
<http:inbound-endpoint exchange-pattern="request-response"
address="http://localhost:8081/pos/addCustomer" doc:name="HTTP" />

<cxf:simple-service serviceClass="com.proj.pos.webservice.interfac.CustomerService" doc:name="SOAP"/>
<component ><spring-object bean="customerService"/></component>
</flow>

</mule> 
```

我的 spring-mule.xml

```
<bean id="customerService"  class="com.proj.pos.webservice.implementation.CustomerServiceImpl">
    <property name="cusDao" >
    <ref local="customerDao"/>
    </property>
    </bean> 
```

我的：applicationContext-persistence.xml

```
 <bean id="datasource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="oracle.jdbc.OracleDriver" />
<property name="url" value="jdbc:oracle:thin:@localhost:1521:xe" />
<property name="username" value="xyz" />
<property name="password" value="xyz" />
</bean> 

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>
                <prop key="hibernate.connection.release_mode">auto</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

     <bean id="customerDao" class="com.proj.pos.dao.implementation.CustomerDaoImpl">
    <property name="sessionFactory">
    <ref local="sessionFactory"/>
    </property>
    </bean> 
```

我的 CustomerServiceImpl

```
@WebService(endpointInterface = "com.proj.pos.webservice.interfac.CustomerService",
        serviceName = "CustomerService")
public class CustomerServiceImpl implements CustomerService {

    @Autowired
    private CustomerDao cusDao;

    @Transactional  //NOTE:USING THIS ANNOTATION I AM ABLE TO ACHIEVE THE BELOW METHOD //IN TRANSACTION,BUT I BELEIVE THIS FEATURE WILL NOT WORK IF WE HAVE MULTIPLE WEBSERVICE CALL
    @Override
    public Customer addCustomer(CustomerDto dto) {
        Customer customer=new Customer(dto.getCustomerId(), dto.getFname(), dto.getLname(), dto.getAge(), dto.getDateOfBirth(), dto.getAddress());
        customer.setCustomerId(cusDao.persist(customer));
         return customer;
    }

    public CustomerDao getCusDao() {
        return cusDao;
    }

    public void setCusDao(CustomerDao cusDao) {
        this.cusDao = cusDao;
    }

} 
```

请让我知道任何解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T15:47:19.113

通过看到您的问题，我了解到您尝试进行 3 个 Web 服务调用，并且您希望在一个事务中进行所有三个调用。

当您调用另一个系统（在您的情况下为 Web 服务）时，您无法控制维护事务。

在您的情况下，您可以使用 Scatter 收集路由器来调用三个 Web 服务，如果任何路由（Web 服务调用）失败，它会抛出`CompositeRoutingException`，您可以很好地在您的捕获异常策略中捕获此异常。

在您的捕获异常策略中，您需要执行回滚活动（进行另一个 Web 服务调用或数据库调用，这将满足您的回滚要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T08:04:35.243

据我了解，您有三个或更多的 Web 服务调用和一些数据库操作。如果任何服务调用失败，您想要回滚。

为 SpringTransactionFactory 编写如下 Spring bean 并设置 transationManager 属性（来自 applicationContext-persistence.xml 的参考）

```
<spring:beans>
 <spring:import resource="classpath:spring-mule.xml"/>
 <spring:import resource="classpath:applicationContext-persistence.xml"/>
 <spring:bean id = "transactionFactory" class = "org.mule.module.spring.transaction.SpringTransactionFactory">
    <spring:property ref="transactionManager" name=""></spring:property>
 </spring:bean>
</spring:beans> 
```

并添加一个 tansactionfactory ref 到 inboundEndpoint 如下

```
<http:inbound-endpoint exchange-pattern="request-response"
                address="http://localhost:8081/pos/addCustomer" doc:name="HTTP" >
                <custom-transaction action="ALWAYS_BEGIN" factory-ref="transactionFactory"/>
                </http:inbound-endpoint> 
```

完整的流程将在单个事务和 inclouding dao 类中

# wordpress - Wordpress：如何根据 URL 使用不同的模板提供相同的内容

> ID：14534409
> 
> 赞同：1
> 
> 时间：2013-01-26T06:13:48.970
> 
> 标签：wordpress, wordpress-theming

总而言之：如果您访问 mysite.com/blog，您会看到博客登录页面，该页面使用了我的主题中的 index.php 模板。但是，我希望能够访问 mysite.com/blog-content 并获得所有相同的内容，但在我的主题中使用我的 page-blog-content.php 模板。

如何才能做到这一点？

提前致谢！

*** 编辑 ***

澄清一下，我试图让两个不同的 URL，/blog 和 /blog-content 加载*相同的内容*；具体来说，博客登陆页面。这两个 URL 之间的唯一区别应该是它们使用的模板。我的主题中有两个模板准备好了，我只需要将 /blog-content 镜像 /blog 并引导它使用我的 page-blog-content.php 模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:51:19.567

有很多可用的选项，但是（我认为？）您的问题太宽泛，无法具体回答。

通常，您可以为给定的页面/帖子选择特定模板（从页面/帖子编辑屏幕中）。

否则，您可以创建一个特定的模板，根据其文件名，为某个 slug、类别等选择...

参考这里：[Wordpress Codex -> 模板层次结构](http://codex.wordpress.org/Template_Hierarchy)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:33:20.963

您可以使用 wordpress 的[主题切换](http://codex.wordpress.org/Theme_Switching)功能/插件。它适用于 URL

# jquery - 文本中的 jQuery Word 替换动画

> ID：14534417
> 
> 赞同：0
> 
> 时间：2013-01-26T06:14:41.877
> 
> 标签：jquery, css, animation, replace

我对 jQuery 很陌生，但我设法找到/组合了一些我想要实现的东西。

该脚本循环替换文本/标题中的单词。它淡出，更新文本并再次淡入 - 但我的问题是：句子变得更短或更长，导致标题或整个段落的跳跃。

这是我在 jsFiddle 上的代码 [http://jsfiddle.net/B2eLz/1/](http://jsfiddle.net/B2eLz/1/)

有没有办法实现流畅的动画来阻止句子/段落跳跃？

谢谢

JS：

```
$(function(){
var words = [
        'breathtaking',
        'excellent',
        'awesome',
        'nice',
        'cool',
        'sweet',
        'extraordinary'
        ], i = 0; // i for counting

    setInterval(function(){
        $('span').fadeOut(function(){ //fadeout text
            $(this).html(words[i=(i+1)%words.length]).fadeIn(); //update, count and fadeIn
        });
    }, 2000 ); //2s
}); 
```

HTML：

```
<h3>This is a <span>extraordinary</span> Headline in a h3-Tag</h3> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:19:40.490

问题是它`<span>`本身正在褪色和崩溃，而不仅仅是其中的内容。我会稍微修改代码，因此只有淡入淡出的内容`<span>`和带有单词的跨度的实际宽度由 jQuery 设置。这样内容就会消失，但`<span>`本身会分流空白空间宽度而不会崩溃。将尝试分叉并看看我能做什么。

**编辑：**好的，这并不完美，但问题是不同的词只会有不同的长度。但是保持`<span>`相同宽度的概念确实有效。您需要根据自己的需要进行改进。这是我所做的：http: [//jsfiddle.net/rHtYA/17/](http://jsfiddle.net/rHtYA/17/)

对于我调整`span`为具有`display`, `text-align`&`width`设置的 CSS：

```
span {
    color:red;
    display: inline-block;
    text-align:center;
    width: 120px;
} 
```

# gwt - 使用 GIN 注入、没有 GWTTestCase 和重载 gin 模块的 JUnit 测试？

> ID：14534420
> 
> 赞同：2
> 
> 时间：2013-01-26T06:14:46.017
> 
> 标签：gwt, junit, guice, gwt-gin, jukito

我使用 Guice/Gin 设计了一个新项目，因此我可以使我们的代码更加模块化和可交换，尤其是在测试时。

但是，我无法找到如何在实践中进行这项工作。我的印象是我可以在我的测试中创建一个新的 Gin/Guice 模块并安装我的“基本”模块，重载任何我想用特定测试实现替换的绑定。

我不想使用 GWTTestCase 并加载我的整个模块，因为对于我需要执行的精细测试类型来说，它非常缓慢且不方便。

我尝试过使用 Jukito ( [http://code.google.com/p/jukito/](http://code.google.com/p/jukito/) )、gwt-test-utils ( [http://code.google.com/p/gwt-test-utils/wiki/HowToUseWithGIN](http://code.google.com/p/gwt-test-utils/wiki/HowToUseWithGIN) )还有一些关于使用 guice 执行此操作的资源（[http://fabiostrozzi.eu/2011/03/27/junit-tests-easy-guice/](http://fabiostrozzi.eu/2011/03/27/junit-tests-easy-guice/)）。

这些方法都没有产生任何结果。

如果我为我的 Gin 模块定义了一个镜像 guice 模块，我认为 Guice 方法可能会起作用。但是我真的不想同时管理这两个。我真的只是想测试我的 GIN 模块，就像我假设人们使用 Guice 进行测试一样。

我觉得这应该很简单，任何人都可以指出有效的例子吗？

**更新**

看待这个问题的另一种方式是：

当我注入的类位于外部 Gin 模块中时，如何让 Jukito 网站 ( [http://code.google.com/p/jukito/ ) 上的示例正常工作？](http://code.google.com/p/jukito/)

**更新 - 参考 Thomas Boyer 的回答 **

感谢 Tom 的提示，我找不到使用适配器的示例，但我尝试扩充 Jukito 示例以使用 GinModuleAdapter：

```
@RunWith(JukitoRunner.class)
public class MyGinTest {

  public static class Module extends JukitoModule {
    protected void configureTest() {
        install(new GinModuleAdapter(new ClientModule()));
    }
  }

  @Test
  @Inject
  public void testAdd(SyncedDOMModel mod){
      assertNotNull(mod);
  }
} 
```

当我尝试运行这个测试时，我收到了这个异常：

```
java.lang.AssertionError: should never be actually called
    at com.google.gwt.inject.rebind.adapter.GwtDotCreateProvider.get(GwtDotCreateProvider.java:43)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1031)
    at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
    at com.google.inject.Scopes$1$1.get(Scopes.java:65)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InternalInjectorCreator$1.call(InternalInjectorCreator.java:204)
    at com.google.inject.internal.InternalInjectorCreator$1.call(InternalInjectorCreator.java:198)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
    at com.google.inject.internal.InternalInjectorCreator.loadEagerSingletons(InternalInjectorCreator.java:198)
    at com.google.inject.internal.InternalInjectorCreator.injectDynamically(InternalInjectorCreator.java:179)
    at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:109)
    at com.google.inject.Guice.createInjector(Guice.java:95)
    at com.google.inject.Guice.createInjector(Guice.java:72)
    at com.google.inject.Guice.createInjector(Guice.java:62)
    at org.jukito.JukitoRunner.ensureInjector(JukitoRunner.java:118)
    at org.jukito.JukitoRunner.computeTestMethods(JukitoRunner.java:177)
    at org.jukito.JukitoRunner.validateInstanceMethods(JukitoRunner.java:276)
    at org.junit.runners.BlockJUnit4ClassRunner.collectInitializationErrors(BlockJUnit4ClassRunner.java:102)
    at org.junit.runners.ParentRunner.validate(ParentRunner.java:344)
    at org.junit.runners.ParentRunner.<init>(ParentRunner.java:74)
    at org.junit.runners.BlockJUnit4ClassRunner.<init>(BlockJUnit4ClassRunner.java:55)
    at org.jukito.JukitoRunner.<init>(JukitoRunner.java:72) 
```

我的 gin 模块是 GWTP 项目的一部分，如下所示：

```
public class ClientModule extends AbstractPresenterModule {

    @Override
    protected void configure() {
        install(new DefaultModule(ClientPlaceManager.class));

        bindPresenter(MainPagePresenter.class, MainPagePresenter.MyView.class,
                MainPageView.class, MainPagePresenter.MyProxy.class);

        bindConstant().annotatedWith(DefaultPlace.class).to(NameTokens.main);

        bindPresenterWidget(MapTreePresenter.class,
                MapTreePresenter.MyView.class, MapTreeView.class);

        bindPresenterWidget(MapTreeItemPresenter.class,
                MapTreeItemPresenter.MyView.class, MapTreeItemView.class);

        bind(ResourcePool.class).to(DefferredResourcePool.class);

        bind(WebSocket.class).to(WebSocketImpl.class);

    }

} 
```

正如您所看到的，我在 test`SyncedDOMModel`中注入的类使用了`WebSocket`我在模块中绑定的 a。当我测试时，我不想使用真正的 websocket 和服务器。所以我想在我的测试中重载这个绑定，用一个基本上模拟整个事情的类。在这种情况下，只注入 WebSocket 的不同实现比使用模拟更容易。

如果有帮助，这是 SyncedDOMMOdel 类的基本大纲：

```
public class SyncedDOMMOdel {
 ....
    @Inject
    public SyncedDOMModel(WebSocket socket){
        this.socket = socket;
    }

 ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:00:59.610

您可以使用`GinModuleAdapter`来使用 any`GinModule`作为 Guice `Module`。

显然，您不会从 GIN 的特定功能中受益：默认为当某些东西没有特定绑定时（这包括接口和抽象类，这将在 Guice 中抛出），并在名称结尾的接口没有特定绑定时自动`GWT.create()`搜索接口捆绑。 而且您将无法使用任何依赖于 JSNI 或延迟绑定 ( ) 的东西，就像在任何非单元测试中一样。`RemoteService``Async`
`GWT.create()``GWTTestCase`

# java - Java：扩展内部类

> ID：14534421
> 
> 赞同：10
> 
> 时间：2013-01-26T06:15:03.627
> 
> 标签：java, class, inheritance, extends

我试图理解在 Java 中扩展内部类。我已经阅读过，但没有找到能完全回答我的问题。所以这里...

我有...

```
public class Pie{
    protected Slice[] slices;

    // Pie constructor
    public Pie(int n){
         sliceGenerator(n)
    }

    private void sliceGenerator(int n){
         slices = new Slice[n];
         final float sweepAngle = 360.0f/(float)n;
         float startAngle = 0;
         for (int i=0;i<n;i++){ 
             slices[i] = new Slice(startAngle);
             startAngle += sweepAngle;
         }
    }

    @Override
    public String toString(){
         for (Slice s:slices){  
             s.toString();
         }
    }

    // Inner class...
    public class Slice{
        public Slice(float startAngle){
             //set some private fields based on startAngle and generic pie 
        }

        @Override
        public String toString(){
             return **string based on private fields**
        }
    }
} 
```

然后我扩展这个...

```
public class ApplePie extends Pie{
    protected Slice[] slices;

    // Apple Pie constructor
    public ApplePie(int n){
         super(n);
    }

    // Inner class...
    public class Slice extends Pie.Slice{
        public Slice(float startAngle){
            super(startAngle);
            //set some **additional** private fields based on startAngle **specific to apple pie** appleness or something
        }

        @Override
        public String toString(){
             return **string based on apple pie specific private fields**
        }
    }
} 
```

现在，当我制作一个苹果派并调用它的 toString 方法时，就像这样......

```
ApplePie ap = new ApplePie(8);
System.out.println(ap.toString()); 
```

我没有得到关于苹果派切片的信息，但是关于派切片的信息。它忽略了我的`toString`覆盖，或者更有可能忽略了我的 apple pie `Slice`。我怎样才能安排它，以便苹果派切片参考`ApplePie`？

非常感谢任何帮助！对不起馅饼参考 - 这是我正在使用的实际课程......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:36:15.767

我已更改您的代码以满足您的要求。

您的超类`Pie`即将创建 的新实例`Slice`，但子类 ApplePie 的 Slice 并没有覆盖`Slice`其超类的方法。

我添加了下面的函数以使子类能够创建自己的`Slice`.

```
protected void newSliceArray(int n) {
    slices = new Slice[n];
}

protected Slice newSlice(float startAngle) {
    return new Slice(startAngle);
} 
```

馅饼.java：

```
public class Pie {
  private int a = 1;
  protected Slice[] slices;

  // Pie constructor
  public Pie(int n) {
    sliceGenerator(n);
  }

  private void sliceGenerator(int n) {
    newSliceArray(n);
    final float sweepAngle = 360.0f / n;
    float startAngle = 0;
    for (int i = 0; i < n; i++) {
      slices[i] = newSlice(startAngle);
      startAngle += sweepAngle;
    }
  }

  protected void newSliceArray(int n) {
    slices = new Slice[n];
  }

  protected Slice newSlice(float startAngle) {
    return new Slice(startAngle);
  }

  @Override
  public String toString() {
    String t = "";
    for (Slice s : slices) {
      t += s.toString();
    }
    return t;
  }

  // Inner class...
  public class Slice {
    public Slice(float startAngle) {
      // set some private fields based on startAngle and generic pie
    }

    @Override
    public String toString() {
      return "" + a;
    }
  }
} 
```

苹果派.java：

```
public class ApplePie extends Pie {
  private int b = 2;

  // protected Slice[] slices;

  // Apple Pie constructor
  public ApplePie(int n) {
    super(n);
  }

  protected void newSliceArray(int n) {
    slices = new Slice[n];
  }

  protected Slice newSlice(float startAngle) {
    return new Slice(startAngle);
  }

  // Inner class...
  public class Slice extends Pie.Slice {
    public Slice(float startAngle) {
      super(startAngle);
      // set some **additional** private fields based on startAngle **specific to apple pie**
      // appleness or something
    }

    @Override
    public String toString() {
      return b + "";
    }
  }
} 
```

测试：

```
public static void main(String[] args) {
    ApplePie ap = new ApplePie(8);
    System.out.println(ap.toString());
} 
```

代码将打印`22222222`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T06:30:50.980

在您的超类中，您正在创建和存储`Pie.Slice`对象：

```
private void sliceGenerator(int n){
     slices = new Slice[n];
     final float sweepAngle = 360.0f/(float)n;
     float startAngle = 0;
     for (int i=0;i<n;i++){ 
         slices[i] = new Slice(startAngle);
         startAngle += sweepAngle;
     }
} 
```

这些是被使用的相同对象`Pie.toString`（顺便说一下，它们`ApplePie`不会覆盖）。

扩展`Pie`和`ApplePie`扩展不会改变这一点`Pie.Slice`。`ApplePie.Slice`上面的`new Slice(startAngle)`代码并没有神奇地切换到实例化不同的东西。

除此之外，你`Pie.toString()`没有返回任何东西——它甚至不应该编译：

```
@Override
public String toString(){
     for (Slice s:slices){  
         s.toString();
     }
} 
```

我猜你想返回一个代表所有切片的字符串。这将是一个快速的解决方案，例如：

```
@Override
public String toString() {
     return Arrays.toString(slices);
} 
```

（[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)只是获取表示数组的字符串的实用方法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T06:41:22.890

答案就在您的程序中。当您实例化 Slice 类时，它会调用超类并调用 sliceGenerator。此方法在内部创建 Pie.Slice 而不是 ApplePie.Slice 的实例。要解决这个问题，请保护 sliceGenerator 方法并在 Apple.Slice 类中覆盖它。创建 Apple.Slice 的实例，它应该可以工作。

# python - 刷新时再次提交Django表单

> ID：14534422
> 
> 赞同：1
> 
> 时间：2013-01-26T06:15:05.850
> 
> 标签：python, django, forms

您好，我正在制作一个简单的表格。表单提交正常，但如果我刷新页面，它会重新提交数据。似乎表单在提交后保存了数据，我假设在提交后请求方法是发布的。问题是提交后清除 Django 表单的最佳方法是什么。提交后，表单变量不应再保留这些值。谢谢

```
def testimonials(request, template_name="testimonials.html"):
reviews = Reviews.objects.all()
if request.method == 'POST':
    form = forms.ReviewsForm(data = request.POST)
    # create a new item

    if form.is_valid(): # All validation rules pass
        # Process the data in form.cleaned_data
        # ...
        if form.is_valid():
            nameIn = form.cleaned_data['name']
            reviewIn = form.cleaned_data['review']
            newReview = Reviews(name = nameIn, review = reviewIn)
            newReview.save()
            return render_to_response(template_name, locals(), context_instance=RequestContext(request))

else:
    # This the the first page load, display a blank form
    form = forms.ReviewsForm()

    return render_to_response(template_name, locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T06:35:40.903

通常，您会在处理表单/POST 请求后发出重定向（这是避免您提到的重新提交问题的常见 Web 开发实践）。因此`render_to_response`，您可能会发出`HttpResponseRedirect`类似这样的命令，而不是 a ：

```
if form.is_valid(): 
        # Process form as desired here
        # Simple example; use reverse() to avoid hard-coding URLs
        return HttpResponseRedirect('/success/') 
```

查看[using a form in view](https://docs.djangoproject.com/en/dev/topics/forms/#using-a-form-in-a-view)了解通常如何处理表单的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:35:22.803

使用反向而不是渲染来响应

```
 if form.is_valid():
        nameIn = form.cleaned_data['name']
        reviewIn = form.cleaned_data['review']
        newReview = Reviews(name = nameIn, review = reviewIn)
        newReview.save()
        return HttpResponseRedirect(reverse('app_name:url')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:01:49.867

您还可以使用“重定向”快捷方式：

```
from django.shortcuts import redirect

...
return redirect(newReview) 
```

这是假设您在评论模型中定义了 get_absolute_url。

有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)。

# php - 为什么我无法在 wamp 服务器中访问 phpMyAdmin？

> ID：14534423
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:15:09.317
> 
> 标签：php, mysql

我无法访问 phpMyAdmin。错误是：

> #1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：是）

我没有设置密码。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:17:41.287

试试这个

*   [使用 PHPMyAdmin 拒绝用户 'root'@'localhost' 的访问](https://stackoverflow.com/questions/11482970/1045-access-denied-for-user-rootlocalhost-using-password-no)

*   [http://www.ostraining.com/blog/coding/error-1045-phpmyadmin/](http://www.ostraining.com/blog/coding/error-1045-phpmyadmin/)

或者，如果您有 Skype，则尝试卸载并在安装 WAMP 后重新安装 Skype

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:10:35.943

您可以通过此命令重置您的 mysql 密码

```
mysqladmin -u root password NEWPASSWORD 
```

# java - 使用 Java 从文件中提取文本

> ID：14534425
> 
> 赞同：-6
> 
> 时间：2013-01-26T06:15:53.090
> 
> 标签：java, swing

在 JPanel 中...

是否可以显示特定 .txt 文件中的某些文本行？

例子...

用户从几个下拉列表中选择（我已经把这部分放下了）并单击提交，然后在右侧的 JPanel 中，我希望它从 xxx.txt 中提取（例如）第 24 - 43 行

我没有找到完成这项工作的方法，这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:33:17.357

虽然您所说的应该考虑其他方面以及如果文件非常大，因此简单地存储到任何集合中只是为了按数字访问它并不是一个好的解决方案。有各种 API 可以帮助您解决此问题，例如 RandomAccessFile。检查这些链接会有所帮助

[从Java中的文本文件中读取特定行](https://stackoverflow.com/questions/2138390/read-a-specific-line-from-a-text-file)

[http://bitsofinfo.wordpress.com/2009/04/15/how-to-read-a-specific-line-from-a-very-large-file-in-java/](http://bitsofinfo.wordpress.com/2009/04/15/how-to-read-a-specific-line-from-a-very-large-file-in-java/)

[如何使用 Java 文件中的特定行号读取特定行？](https://stackoverflow.com/questions/2312756/in-java-how-to-read-from-a-file-a-specific-line-given-the-line-number)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T06:35:59.510

我想知道你是否让这个过于复杂。您需要做的就是使用 Scanner 类从文件中读取文本。然后正如 Tim 在他的评论中提到的，您可以将 Scanner 接收的任何内容加载到列表结构中，然后从中打印出行（尽管老实说，您甚至可以在没有列表存储结构的情况下执行此操作，尽管它确实使操作更容易）。然后是的，对文本窗格使用 setText 方法，然后就可以了。

ListInterface 可以替换为任何存储类型。蒂姆再次提出了一个同样有效的清单。您也可以只使用一个简单的数组，尽管这样您将无法编写自己的方法来很好地与它交互。

```
ListInterface<String> fileBag = new ListArray<>();
try
{
    /*
     * Open file fileName with Scanner
     * add all entries fron the file somefile.txt into fileBag
     * Close Scanner object
     */
    String fileName = "somefile.txt";
    File file = new File(fileName);
    Scanner scanner = new Scanner(file);
    String line;
    while (scanner.hasNextLine())
    {
        line = scanner.nextLine();
        fileBag.add(line);
    }
    scanner.close();
}
catch(FileNotFoundException e)
{
    System.out.println(e.getMessage());
    System.exit(0);
} 
```

如果您不知道如何使用接口并在 ListArray 类中为其编写自己的方法，请替换

```
ListInterface<String> fileBag = new ListArray<>(); 
```

和

```
ArrayList<String> fileArrayList = new ArrayList<>(1000); 
```

其中 1000 应该是对数组需要多大的最佳猜测它不需要正确，如果要添加并且没有足够的空间，数组的容量将加倍，但这是一个 O(n ) 操作，因此如果您对文件最多包含多少行有很好的了解，最好避免使用它。同时替换：

```
fileBag.add(line); 
```

和

```
with fileArrayList.add(line); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T07:09:59.277

看一眼

*   [基本 IO](http://docs.oracle.com/javase/tutorial/essential/io/index.html)。我建议你使用`FileReader`包裹在`BufferedReader`
*   [如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)，这是一种显示数据行的方式......或者
*   [How to Text Areas](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)这是一种显示多行文本的方式。这可能更好，因为它支持文本选择和复制

**小更新**

很多将取决于文件的大小。一次读取文件并将其存储在每次请求的读取中会更有效`java.util.List`，但这取决于您有多少可用内存

# compiler-optimization - 为什么你不希望编译器优化你的代码？

> ID：14534426
> 
> 赞同：2
> 
> 时间：2013-01-26T06:15:53.843
> 
> 标签：compiler-optimization

一旦我意识到在 GCC 中有这个选项，我就问谷歌，很多人想知道如何告诉编译器不要优化代码。这似乎适得其反，这对程序员有什么帮助？也许调试？在首选这样做的情况下，它将如何提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:27:08.590

你说的 - 调试。优化器可以重组代码，使函数不再存在并且语句混合在一起。通常需要关闭优化以允许调试器将机器/字节代码地址映射回源位置。

正如 Tikhon 所提到的，如果优化器有错误，它也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:19:31.700

主要原因是编译时间：打开优化可以显着增加构建时间，但不一定会带来太多好处。

此外，某些优化可能会影响程序的准确性和正确性。但是，这些优化通常需要显式打开，而不是使用像 -O2 这样的标志。

一些优化——比如内联——可以增加可执行文件的大小。在某些情况下，这是一个重要的考虑因素。

优化也会对您的代码产生负面影响。例如，速度可能会提高，但会以使用更多内存为代价。这并不总是可取的。

# javascript - 具有重叠 div 的鼠标事件

> ID：14534430
> 
> 赞同：1
> 
> 时间：2013-01-26T06:16:17.293
> 
> 标签：javascript, mouseevent

我需要在另一个上显示图像，而不是使用这些代码，但是当我的鼠标悬停在显示图像的列表 lisdel 上时，它会消失，因为它接收到 mouseout 事件。这很难解释，但尝试调试它并在您将看到的图像中移动鼠标。

```
<script>
    var mouseOverListDel = false;
    // Detect if the browser is IE or not.
    // If it is not IE, we assume that the browser is NS.
    var IE = document.all ? true : false

    // If NS -- that is, !IE -- then set up for mouse capture
    if (!IE) document.captureEvents(Event.MOUSEMOVE)

    // Set-up to use getMouseXY function onMouseMove
    document.onmousemove = getMouseXY;

    // Temporary variables to hold mouse x-y pos.s
    var tempX = 0
    var tempY = 0

    // Main function to retrieve mouse x-y pos.s

    function getMouseXY(e) {
        if (IE) { // grab the x-y pos.s if browser is IE
            tempX = event.clientX + document.body.scrollLeft
            tempY = event.clientY + document.body.scrollTop
        } else {  // grab the x-y pos.s if browser is NS
            tempX = e.pageX
            tempY = e.pageY
        }
        // catch possible negative values in NS4
        if (tempX < 0) { tempX = 0 }
        if (tempY < 0) { tempY = 0 }
        // show the position values in the form named Show
        // in the text fields named MouseX and MouseY
        var txbX = document.getElementById('TextBox1');
        var txbY = document.getElementById('TextBox2');
        txbX.value = tempX;
        return true
    }

    function getPosition(element) {
        var xPosition = 0;
        var yPosition = 0;

        while (element) {
            xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
            yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
            element = element.offsetParent;
        }
        return { x: xPosition, y: yPosition };
    }

    function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object

        // Loop through the FileList and render image files as thumbnails.
        for (var i = 0, f; f = files[i]; i++) {

            // Only process image files.
            if (!f.type.match('image.*')) {
                continue;
            }

            var reader = new FileReader();

            // Closure to capture the file information.
            reader.onload = (function (theFile) {
                return function (e) {
                    // Render thumbnail.
                    var span = document.createElement('span');

                    span.innerHTML = ['<img class="thumb" src="', e.target.result,
                                      '" title="', escape(theFile.name), '"/>'].join('');
                    span.style.height = "65px";
                    span.style.width = "90px";
                    document.getElementById('list').insertBefore(span, null);

                    var del = document.createElement('del');
                    del.style.visibility = "hidden";
                    del.innerHTML = ['<img class="thumbdel" src="http://s7.postimage.org/fc6w3qjp3/del.png',
                                      '" title="', escape(theFile.name + "del"), '"/>'].join('');
                    document.getElementById('listdel').insertBefore(del, null);
                    del.addEventListener("click", function () { delClick(del, span) }, false);

                    del.addEventListener('mouseover', function () { opacityOn(del) }, false)
                    del.addEventListener('mouseout', function () { opacityOn(del) }, false);
                    span.addEventListener('mouseover', function () { opacityOn(del) }, false);
                    span.addEventListener('mouseout', function () { opacityOff(del) }, false);
                };
            })(f);

            // Read in the image file as a data URL.
            reader.readAsDataURL(f);
        }
    }

    function delClick(imgDel, img)
    {
        var listImg = document.getElementById('list');
        listImg.removeChild(img);

        var listDelImg = document.getElementById('listdel');
        listDelImg.removeChild(imgDel);
    }

    function opacityOn(imgDel)
    {
        imgDel.style.visibility = "visible";
    }

    function opacityOff(imgDel)
    {
            imgDel.style.visibility = "hidden";
    }

    document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:23:07.670

你可以为此使用 CSS 吗？像 ：

```
.listDel {
    background: none;
}

.listDel :hover {
    background: URL("URL to image");
} 
```

如果你想为图像在 javascript 中显示做一个复杂的条件，为什么不考虑这样的事情：

```
var listdel = document.getElementById('listdel');
listdel.addEventListener('mouseover', 
    function () { window.mouseOverListDel = true; }
    , false);
listdel.addEventListener('mouseout', 
    function () { 
         setTimeout( 
             function () {  window.mouseOverListDel = false; }
             , 333
         );
    }
    , false); 
```

然后在你的`opacityOn`函数中（大概也隐藏删除按钮图像？）检查是否设置了该标志（`mouseOverListDel`），如果是，那么你不想隐藏 del 按钮图像，因为你知道鼠标已经结束删除图像列表，它不应该隐藏任何东西。

即使我没有完全理解您的详细信息，这种模式也会有所帮助。基本上，您希望继续显示图像，即使鼠标在本地离开该图像的边界，但它仍然位于该图像的“用户相关”位置 - 即它仍然“看起来非常接近该图像”所以它如果我们继续显示图像是有帮助的，如果我们不显示则无济于事。

您可以使用类似的库`hoverIntent`并使用 jQuery，这会使事情变得更容易，或者您可以自己编写代码，就像我给您的示例一样。基本思想有两部分：

1.  当鼠标悬停时为您感兴趣的区域设置一个标志，当鼠标不在它们上时取消设置。
2.  从您的其他鼠标悬停事件处理程序中检查这些标志，以确定您为操作选择的条件（图像显示、图像隐藏或其他任何内容）是否得到满足。
3.  **这是关键**，因为触发事件的时间略有变化，您需要稍微**延迟**检查标志，延迟一小部分秒（您可以测试这些毫秒值）。因此，您需要将处理程序代码延迟`mouseout`333 毫秒，因为例如，当事件触发并且您的代码被执行时，`listdel` `mouseover`甚至可能尚未触发。`del` `mouseout`
4.  另外：为了加分，这些延迟和条件可用于为您提供更流畅的 UI。当用户通过他们的随机蜿蜒运动稍微离开感兴趣的区域以供您显示图像，然后在 500 毫秒内返回时，您可能会允许一些容忍度——如果您延迟检查标志和`mouseout`处理程序，你可以容忍这种**意外退出**。但是 UI 设计的那部分取决于对您有用的部分。

    此行也可能导致问题： `del.style.visibility = "hidden";` 您是否将其设置回`visible`？如果没有，那么您的 del 将不会显示。不透明度**与**可见性不同。

# java - 如何减少哈希冲突？

> ID：14534431
> 
> 赞同：2
> 
> 时间：2013-01-26T06:16:17.360
> 
> 标签：java, algorithm, hashtable

我编写了从文件中读取一些单词及其含义并将它们映射到数组（制作哈希表）的代码。它使用多项式哈希码和压缩方法。

我的目标是尽可能减少碰撞，但我不知道如何。

```
public int hashcode(Entry my){ 
    Object key=my.getKey(); 
    int sum=0 ,z=33; 
    char[] chars = new char[key.toString().length()]; 
    chars=key.toString().toCharArray(); 
    for(int i=0; i < chars.length; i++){ 
         sum += (chars[i])*Math.pow(z,i);
    } 
    return sum;
} 
```

这是我的压缩方法（对于大小为 100 的数组）：

```
public int compress(int hashcode){ 
    return hashcode%100; 
} 
```

我应该改变我的压缩方法还是有一些方法可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:13:43.583

您似乎正在寻找的是一个完美的散列函数，不幸的是，据我所知，这样的散列不存在 :)
要指出的另一件事是散列函数的性能也因您想要的结果类型而异实现; 我的意思是，散列函数在“存储”电话号码方面可能表现出色，但在存储联系人姓名时效果不佳。

快速浏览一下您的代码，我会说您的哈希函数过于复杂。
首先，我想指出您当前算法的一个问题：这一行 'sum+=(chars[i])*Math.pow(z,i);' 对于长度超过 4-5 个字符的单词（只是猜测），将返回超出整数范围的值。你可能会说没关系，因为它会溢出等等，但事实是它不会，因为 sum+= 语法实际上隐藏了类型转换（尝试将其写为 sum=sum+），在这种情况下，总和将具有Integer.MAX_VALUE 的值。这可能就是您的算法现在很慢的原因。

如果我是你，出于字典的目的（这似乎是你想要做的）并假设 Entry#getKey() 是字符串类型，我可能会选择：

```
public int hashcode(Entry my) {
    return my.getKey().hashCode();
} 
```

如果您仍然想提出自己的哈希函数，为什么不使用更简单的方法，例如：[字长 + 前 X 个字母的字符代码 + 最后一个字母的字符代码] 调整 X 以便结果适合诠释。只是一个想法:)

# emacs - emacs 和 emacs 客户端颜色

> ID：14534432
> 
> 赞同：0
> 
> 时间：2013-01-26T06:16:22.047
> 
> 标签：emacs

当我开始使用 emacs 作为守护进程和 emacsclient 使用新框架作为接口时，一切都很好。但后来我想采用 emacsclient 在 urxvt 终端中运行。我已经从我的发行版的包管理器中安装了 color-scheme 包，并将初始化代码添加到我的 ~/.emacs.d/init.el 我在各种颜色主题之间切换，但后来意识到颜色实际上取决于终端的调色板emacsclient 正在运行。所以我删除了 color-theme 包并从我的 init.el 中删除了与它相关的行。但是出了点问题，我留下了默认的黑色前景色，完全黑色的光标（我只使用默认的 X 光标，黑色箭头轮廓为白色，但我得到的看起来几乎像这样，但完全是黑色的）并减小了字体大小.

我正在挖掘尽快修复所有这些，并开始使用

```
 '(default-frame-alist (quote ((menu-bar-lines . 0) (left-fringe . 0) (right-fringe) (tool-bar-lines . 0) (background-color . "#2e3436") (foreground-color . "#d3d7cf") (cursor-color . "#ffffff")))) 
```

这是在我最终点击爬取自定义菜单的适当项目后出现在我的 init.el 的自定义设置变量中的内容。但是，现在我需要指定越来越多的东西以使它们看起来像通常的 emacs（不是作为守护程序，颜色和字体仍然可以）。然后出现了一个问题：'为什么在安装emacsclient的color-theme框架之前总是继承我通过customize menu描述的emacs的默认外观并保存到init.el？'</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:22:19.053

从 init.el 中删除了所有与帧相关的东西，它现在像以前一样工作。

# mysql - 恼人的 MySQL 错误（尝试了一切，没有任何效果）

> ID：14534433
> 
> 赞同：0
> 
> 时间：2013-01-26T06:16:26.073
> 
> 标签：mysql

在最近编译并尝试测试一个基本的论坛程序集之后，我遇到了一个令人惊讶的 MySQL 错误：

```
Forum.ForumException: MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc) VALUES('bar', 'bar')' at line 1 at ... 
```

这是论坛程序集中的 CreateBoard 函数：

```
 public int CreateBoard(string bname, string bdesc)
        {
            MySqlConnection con = new MySqlConnection(conString);
            MySqlCommand cmd = new MySqlCommand("INSERT INTO boards (name, desc) VALUES(?name, ?desc)", con);
            int res_id = 0;

            try
            {
                //cmd.CommandText = "INSERT INTO boards(name, desc) VALUES(?name, ?desc)";
                cmd.Parameters.Add("?name", MySqlDbType.VarChar).Value = bname;
                cmd.Parameters.Add("?desc", MySqlDbType.VarChar).Value = bdesc;
                con.Open();
                cmd.ExecuteNonQuery();
                //get the id of the new board
                //cmd.CommandText = "SELECT last_insert_id() FROM boards";
                //res_id = (int)cmd.ExecuteScalar();
                return res_id;
            }
            catch (Exception yf)
            {
                throw new ForumException(yf.ToString());
            }
            finally
            {
                con.Close();
            }
        } 
```

最后，这是来自测试页面“a.aspx”的代码片段

```
protected void Page_Load(object sender, EventArgs e)
{
    Forum f = new Forum();
    try
    {
        int b = f.CreateBoard("foo", "bar");
        if (b == 0)
        {
            Response.Write("Board creation failure :(");
            return;
        }
        Response.Write("Board create with id '" + b + "', name 'foo', and description 'bar'");
    }
    catch (ForumException ff)
    {
        Response.Write(ff.ToString());
    }
} 
```

执行查询时，随机引用似乎无处不在。谁能帮我解决这个问题？我一直很沮丧解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:18:52.783

我认为 desc 是保留关键字，按子句降序排列。

改为使用`desc`

# numpy - 为 numpy.array() 创建一个“array_like”QImage 子类

> ID：14534434
> 
> 赞同：1
> 
> 时间：2013-01-26T06:16:37.707
> 
> 标签：numpy, pyside, qimage

**我**想**创建一个可以传递给`array_like``QImage``numpy.array()`**. 我想避免`PIL`用作替代品；这样做的全部目的是避免对`PIL`. 此外，不断在`QImage`和之间转换`PIL Image`对我的程序来说是不切实际的。

我发现[文档](http://docs.scipy.org/doc/numpy/reference/arrays.interface.html)很神秘，阅读后我仍然对如何模拟数组接口感到困惑。正如 numpy 文档所述，要成为一个 " `array_like`" 对象，它需要`__array_interface__`属性，它是一个具有五个键的字典。但是，我以前从未处理过类型、缓冲区和内存。如果有人能解释如何解决这个问题，将不胜感激。

我正在使用 Python 3.3 和 PySide 1.1.2。感谢所有回复的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:55:16.533

仅使用从`QImage.bits()`和返回的缓冲区对象更容易`np.frombuffer()`。

```
def qimage2array(q_image):
    width = q_image.width()
    height = q_image.height()
    arr = np.frombuffer(q_image.bits(), dtype=np.uint8).reshape([height, width, -1])
    return arr 
```

# python - 验证是否输入了整数

> ID：14534438
> 
> 赞同：0
> 
> 时间：2013-01-26T06:17:59.237
> 
> 标签：python, validation, types, input, integer

我已经查看了其中几个问题，但似乎无法将其正确应用于我的代码。我绝对是 Python 的新手，并且开发了一个数字猜谜游戏来练习。我需要的最后一个错误处理是确保输入的不是整数的任何内容都将返回错误消息。我希望像其他条件一样使用“if”语句，但会使用我能得到的。谢谢！

（这只是一个片段。我没有包括整个程序）

```
def gamestart():
    print(rndnumber)
    for GuessAmount in range (1,11):
        ActualGuess = int(input("Guess number " + str(GuessAmount) + ": "))  
        if ActualGuess < rndnumber:
            print("HIGHER!")
        if ActualGuess > rndnumber:
            print("LOWER!")
        if ActualGuess != rndnumber:
            GuessAmount == GuessAmount + 1
        if ActualGuess == rndnumber:
            print("You Win!")
            gameend()
    print("")
    print("Sorry, but you ran out of guesses.")
    print("")
    gameend() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:22:11.770

使用尝试/除外：

```
while True:
    guess = input("Guess number " + str(GuessAmount) + ": ")
    try:
        guess_int = int(guess)
        break
    except ValueError:
        print "please enter only integers" 
```

现在你有你的（转换为整数）输入`guess_int`。如果无法将输入转换为整数，用户会收到警告并再次输入数字。

# c++ - 从 c++ 升级到 c++11

> ID：14534451
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:19:41.103
> 
> 标签：c++, c++11, migration, upgrade

我正在寻找快速掌握 c++11 特性的资源。在谷歌上搜索我确实找到了一些资源。但是，我找不到可以帮助具有 C++ 知识的程序员的资源。
我不想开始阅读数百页关于我已经从 C++ 中了解的 C++11 特性。我发现的最好的东西是关于 C++11 的 Wikipedia 文章，但它仍然没有很多示例。还有一些很好的文章解释了 C++ 的某个特性（例如[lambdas](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)）。但是我找不到将它们全部放在一个地方的东西。
有谁知道任何书籍，链接等...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:29:07.417

我认为 Bjarne Stroustrup 的 C++11 FAQ 正是您正在寻找的：

[http://www.stroustrup.com/C++11FAQ.html](http://www.stroustrup.com/C++11FAQ.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:34:56.000

访问[http://isocpp.org/get-started](http://isocpp.org/get-started)。它包含任何人都可以在这里给你的大部分细节。当然，Stroustrup 教授的主页 (http://www.stroustrup.com/C++11FAQ.html) 也是查找所需内容的最佳地点之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T06:26:30.070

你可以从这里开始阅读：[现代 C++ 风格的元素](http://herbsutter.com/elements-of-modern-c-style/)——Herb Sutter 的这篇文章可以被认为是针对开始使用 C++11 的 C++ 程序员的。

一页上有关 C++11 的所有内容都在这里：Bjarne Stroustrup 的[C++11 FAQ](http://www.stroustrup.com/C++11FAQ.html)

# android - SDK 管理器没有在我的 Eclipse 中打开

> ID：14534454
> 
> 赞同：6
> 
> 时间：2013-01-26T06:20:02.830
> 
> 标签：android, eclipse, sdk

```
[SDK Manager] The system cannot find the path specified. 
```

在打开 sdk 管理器时，此消息显示在控制台中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:22:56.797

只需转到 windows-> 首选项-> android 并设置您下载的 sdk 的路径

![在此处输入图像描述](../Images/e341ba46da634303df4d3262af03475e.png)

在图像中引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T14:43:22.030

说明你指定的路径不正确。首先，我们需要根据我们的版本要求下载 android sdk。然后将下载的 sdk 放到 C:\program files ........

然后运行 ​​eclipse 并转到`windows/ preferences`并提供保存 sdk 的路径

# asp.net-mvc-3 - 如何为从存储过程返回为临时表的结果集创建复杂类型？

> ID：14534459
> 
> 赞同：0
> 
> 时间：2013-01-26T06:21:09.197
> 
> 标签：asp.net-mvc-3, edmx

如何获取包含从实体框架函数导入中的存储过程返回的多个表列的临时表的列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T06:18:01.223

**第一步：**

首先，您必须在**不使用临时表**的情况下创建一个正常的存储过程。此存储过程将包含所有列名（普通表+临时表）。现在将能够在您的**EDMX中创建复杂类型**

**第二步 ：**

现在您将修改您的存储过程，因为您确切地想要**使用临时表编写**

**第三步：**

更新您的**EDMX**模型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T07:23:32.867

您必须向 sql server 提供数据协定，以便实体框架可以使用它来生成复杂对象。所以我们将使用一个虚拟的 select 语句来提供合同。select 语句将无法访问，因此不会对代码块造成性能损失。

现在让我们看一个例子：

```
ALTER PROCEDURE [dbo].[Dummy_SP_Complex_Object_For_Temp_Table]   
AS
BEGIN

      IF 1 = 2 BEGIN
       SELECT
       cast(null as int)  as WeekNumber,
       cast(null as date)    as FilterStartDate,
       cast(null as date)    as FilterEndDate,
       cast(null as int)    as OrderNumber
        WHERE 1 = 2  
      END

  IF OBJECT_ID('tempdb.dbo.#T', '#OrderShipments') IS NOT NULL
  DROP TABLE #T; 
  Create Table #OrderShipments
  (
    WeekNumber int,
    FilterStartDate date,
    FilterEndDate date,
    OrderNumber int
  )
  Select WeekNumber, FilterStartDate, FilterEndDate, OrderNumber FROM #OrderShipments order by WeekNumber
END 
```

实体框架无法访问第一个代码块，但它为 EF 创建复杂类型对象提供了必要的信息。

# jquery - Jersey Ajax POST 错误 415（不支持的媒体类型）

> ID：14534460
> 
> 赞同：0
> 
> 时间：2013-01-26T06:21:10.097
> 
> 标签：jquery, json, rest, jaxb

我的请求没有到达服务器……我看过很多例子，但我找不到错误。我在 GAE 上使用球衣

这是我接收请求的资源类

```
@Path("/preMatricula")
public class PreMatriculaRS {

@GET
@Path("/get")
@Produces(MediaType.APPLICATION_JSON)
public String getPreMatricula(){
    return "Primeira requisicao...";
}

@POST
@Path("/save")
@Consumes(MediaType.APPLICATION_JSON)
public void savePreMatricula(Academico academico){
    //code goes here
}

} 
```

那是我的波乔

```
@XmlRootElement
public class Academico {

private String nome;
private String cpf;
private String email;

public String getNome() {
    return nome;
}
public void setNome(String nome) {
    this.nome = nome;
}
public String getCpf() {
    return cpf;
}
public void setCpf(String cpf) {
    this.cpf = cpf;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
} 
```

这是我的 jquery 函数

```
(function($) {
    var path = "/rs";

    preMatricula = {};

    preMatricula.salvar = function(){
        var data = $('#myForm').serializeObject();
        var urlFor = path + "/preMatricula/save";
        $.ajax({
              type:'POST',
              url: urlFor,
              data: JSON.stringify(data),
              dataType: 'json',
              contentType : "application/json",
              async : false

        });
    }
})(jQuery);$ 
```

# c++ - 如何在我的 C++ 程序中某个日期/驱动器已满后删除 linux 系统中的文件？

> ID：14534461
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:21:28.013
> 
> 标签：c++, linux

是否有一段 C++ 代码允许我删除特定目录中的文件，该目录中大约有 30 天？或者当存储它们的驱动器已满时？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:27:41.190

看

*   [`unlink`](http://www.kernel.org/doc/man-pages/online/pages/man2/unlink.2.html)- 删除文件
*   [`stat`](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)- 找出时间
*   [`readdir`](http://www.kernel.org/doc/man-pages/online/pages/man2/readdir.2.html)- 列出文件

使用[crontab](http://linux.die.net/man/1/crontab)每天运行一次程序。

或者使用[find](http://linux.die.net/man/1/find)并避免麻烦。

# android - SQLite 到 ListView(androidhive 的版本)

> ID：14534465
> 
> 赞同：0
> 
> 时间：2013-01-26T06:21:57.840
> 
> 标签：android, sqlite, android-listview, populate

我正在尝试将数据从 SQLite 插入列表视图。我已经尝试查找示例代码，但它们不起作用。数据库部分来自 AndroidHive 的 SQL 教程。在他的帖子中，获取数据库中所有数据的代码是（我编辑了数据字段）：

```
// Getting All carts item
public List<Cart> getAllCart() {
    List<Cart> cartList = new ArrayList<Cart>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Cart cart = new Cart();
            cart.setID(Integer.parseInt(cursor.getString(0)));
            cart.setPID(Integer.parseInt(cursor.getString(1)));
            cart.setName(cursor.getString(2));
            cart.setPrice(Double.parseDouble(cursor.getString(3)));
            cart.setQut(Integer.parseInt(cursor.getString(4)));
            // Adding cart to list
            cartList.add(cart);
        } while (cursor.moveToNext());
    }

    // return cart list
    return cartList;
} 
```

如何把这个“getAllCart()”放到我的列表视图中。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:28:19.370

您需要在 Activity 或 ListActivity 中创建一个 Database 类实例才能`getAllCart`访问

```
public class TempActivity extends Activity {
DatabaseHandler db;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        db = new DatabaseHandler(TempActivity.this);

        // Reading all Carts
        List<Cart> Carts = db.getAllCart(); //<< get all Cart details here    
       //... your code here.. 
```

并且为了在 ListView 中显示 Carts ArrayList 值，您需要创建一个自定义适配器来添加 ListView 行中的所有项目。

对于使用自定义适配器创建 ListView，您可以查看以下教程：

[使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

[Android 列表视图示例](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:29:11.283

要从 SQLite 获取数据，您可以这样尝试：

```
 public List<String[]> selectAll()
{

    List<String[]> list = new ArrayList<String[]>();
    Cursor cursor = db.query(TABLE_NAME, new String[] { "id","name","number","skypeId","address" },
            null, null, null, null, "name asc"); 

    int x=0;
    if (cursor.moveToFirst()) {
        do {
            String[] b1=new String[]{cursor.getString(0),cursor.getString(1),cursor.getString(2),cursor.getString(3),cursor.getString(4)};

            list.add(b1);

            x=x+1;
        } while (cursor.moveToNext());
    }
    if (cursor != null && !cursor.isClosed()) {
        cursor.close();
    } 
    cursor.close();

    return list;
} 
```

并在列表视图中显示它：

```
 List<String[]> list = new ArrayList<String[]>();
List<String[]> names2 =null ;
     names2 = dm.selectAll();

    stg1=new String[names2.size()]; 

    int x=0;
    String stg;

    for (String[] name : names2) {
        stg = name[1]+" - "+name[2]+ " - "+name[3]+" - "+name[4];

        stg1[x]=stg;
        x++;
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(   
            this,android.R.layout.simple_list_item_1,   
            stg1);
    this.setListAdapter(adapter);
} 
```

参考本教程你会得到一个想法：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# treeview - YUI.TreeView 不是构造函数

> ID：14534468
> 
> 赞同：1
> 
> 时间：2013-01-26T06:22:19.117
> 
> 标签：treeview, yui

我是 Javascript 和 YUI 的新手。当我尝试使用 YUI 3（wrt [http://allenrabinovich.github.com/gallery-yui-treeview/docs/](http://allenrabinovich.github.com/gallery-yui-treeview/docs/)）实现树视图时，我收到以下错误： yui：未加载：树视图 Y.TreeView 不是构造函数 {标签：“第二章”}

请帮我调试错误。这是代码：

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="http://yui.yahooapis.com/3.3.0/build/yui/yui-min.js">
    </script>
    </head>
    <body>
    <div id="toc" class="yui3-skin-sam">check
    </div>
    <script>
    YUI().use('treeview', function (Y) {
     var tree = new Y.TreeView({
            label: 'My Novel',
            children: [
                { label: 'Chapter One' },
                { label: 'Chapter Two' }
            ]
        });

     tree.render('#toc');
   });
   </script>
   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:47:48.400

“Treeview”是图库中的一个模块，您不能使用 YUI.use('treeview') 加载它。

图库中这个模块的正确名称是**gallery-yui3treeview**，所以你必须像这样加载它：

```
 YUI().use('gallery-yui3treeview', function (Y) {
    // Your code
 }); 
```

看看这段代码：http: [//jsfiddle.net/MDUXW/](http://jsfiddle.net/MDUXW/)

# php - HTTP 根据查询字符串将一个 URL 重定向到另一个 URL

> ID：14534469
> 
> 赞同：1
> 
> 时间：2013-01-26T06:22:33.430
> 
> 标签：php, apache, redirect, http-status-code-301, mod-alias

当**`/page1.php?abc`**请求 URL 时，我希望将其重定向到**`/page1.php?xyz`**。

具体来说，这就是我想告诉客户的：

```
HTTP/1.1 301 Moved Permanently
Location: /page1.php?xyz 
```

我试过 Apache [RedirectMatch](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirectmatch)指令，但它似乎不支持查询字符串。

是否有另一个指令支持带有查询字符串的 URL 的 HTTP 重定向？

目前我正在使用[PHP 的标头函数](http://php.net/manual/en/function.header.php)来完成此操作，但这感觉像是权宜之计，因此我正在寻找 Apache 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:45:54.877

你可以用`mod_rewrite`这个。如果这个模块可用，你使用这些规则（必须放在里面`/.htaccess`）：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ="abc"
RewriteRule ^page1\.php$ /page1.php?xyz [R=301,L] 
```

还有一个仅限 PHP 的解决方案：

```
if ($_SERVER["QUERY_STRING"] == "abc") {
    header("Location: /page1.php?xyz", true, 301);
    die;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:27:18.870

我会创建一个自己生成的 PHP 文件，但不知道可以做到这一点的 Apache 模块/解决方案。

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# java - Groovy 编码约定？

> ID：14534476
> 
> 赞同：8
> 
> 时间：2013-01-26T06:23:33.763
> 
> 标签：java, ruby, groovy

Groovy 的标准编码约定是什么？

在 Java 中，方法命名是使用驼峰式表示法完成的。

```
public void calculateTotal() {} 
```

在 Groovy 所基于的 Ruby 中，下划线是首选。

```
def calculate_total()
end 
```

以上两种风格中哪一种更适合 Groovyist？

我个人更倾向于使用 Ruby 风格。Groovy 社区之间是否有关于什么是可取的标准文档/普遍共识？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T06:59:55.097

第一个。Groovy 从 Ruby 中汲取了很多东西，但它的主要重点是成为一种动态且强大的语言，可以很好地与 Java 配合使用。因此，大多数 Java 编码约定和编码风格也适用于 Groovy。

关于命名约定，虽然我也比较喜欢`underscore_separated_words`Ruby/Python 之类的风格，但我觉得在这些多余的事情上，坚持约定并与周围环境保持一致比个人喜好重要得多（还有其他事情，就像更喜欢函数式风格而不是命令式构造，反之亦然，我认为讨论更有趣:)。

因此，请始终使用`camelCasing`for Groovy 方法。[Groovy 文档](http://groovy-lang.org/documentation.html)使用它们；标准库中的所有方法都使用它们。

最后，这是一个很好的[Groovy 编码约定指南](http://groovy-lang.org/style-guide.html)。它没有提及命名约定或格式，但它介绍了 Groovy 的许多不错的句法添加，并解释了何时首选使用它们 :)

# css - 如何在媒体查询中使用 > 或 <（大于和小于）符号

> ID：14534477
> 
> 赞同：25
> 
> 时间：2013-01-26T06:23:37.670
> 
> 标签：css, media-queries

我们可以在媒体查询中使用“>”或“<”符号（大于和小于）吗？例如，我想隐藏所有小于 768 像素的显示器的潜水。我可以这样说吗：

```
@media screen and (min-width<=768px) {} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-26T06:36:08.353

媒体查询不使用这些符号。相反，他们使用`min-`and`max-`前缀。这包含在[规范](http://www.w3.org/TR/css3-mediaqueries/#media1)中：

> *   大多数媒体功能都接受可选的“min-”或“max-”前缀来表示“大于或等于”和“小于或等于”约束。此语法用于避免可能与 HTML 和 XML 冲突的“<”和“>”字符。那些接受前缀的媒体功能最常与前缀一起使用，但也可以单独使用。

所以，而不是类似的东西`(width <= 768px)`，你会说`(max-width: 768px)`：

```
@media screen and (max-width: 768px) {} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-05T17:00:49.413

查看 Sass 库[include-media](https://eduardoboucas.github.io/include-media/)，其中（尽管是针对 Sass）解释了调用之类的调用如何`@include media('<=768px')`映射到纯 CSS`@media`查询。特别是，请参阅文档的[这一部分](https://eduardoboucas.github.io/include-media/documentation/#variable-breakpoints)。

TLDR，您从中学到的是：

要`media('<=768px')`在 CSS 中执行类似（小于或等于 768）的操作，您需要编写

```
@media (max-width: 768px) {} 
```

并在 CSS 中做相当于`media('<768px')`(小于 768) 的操作，您需要编写

```
@media (max-width: 767px) {} 
```

请注意我是如何从 中减去`1`的`768`，因此最大宽度小于 768（因为我们想要模拟`<`CSS 中实际不存在的小于行为）。

因此，为了模拟类似`media('>768px', '<=1024')`CSS 中的内容，我们将编写：

```
@media (min-width: 769px) and (max-width: 1024px) {} 
```

并且`media('>=768px', '<1024')`会是

```
@media (min-width: 768px) and (max-width: 1023px) {} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-26T06:25:43.547

```
@media screen and (max-width: 768px) { ... } 
```

# objective-c - 试图从gps检测到的位置计算到plist文件中的许多餐馆的距离

> ID：14534478
> 
> 赞同：-4
> 
> 时间：2013-01-26T06:23:54.530
> 
> 标签：objective-c, cllocationmanager, cllocation, cllocationdistance

我必须做一个项目，在该项目中我必须计算从我的位置（由 gps 检测到）到许多位置在 plist 文件中的餐厅的距离，然后在列表视图中显示距离作为餐厅名称的副标题.

我知道`CLLocationDistance`并且我写了一个函数，它是：-

```
-(double)distanceBetPoints
{
    CLLocation *user = [[CLLocation alloc] initWithLatitude:locationManager.location.coordinate.latitude longitude:locationManager.location.coordinate.longitude];
    CLLocationDistance distance = [user distanceFromLocation:restaurant.location];
    return distance;
} 
```

这里位置管理器正在确定我的位置，并且`restaurant.location`是 plist 文件中的位置条目。

我在单元格配置中写了以下内容：-

```
NSString *d = [NSString stringWithFormat:@"%@",[mapVC.distanceBetPoints]];
cell.detailTextLabel.text = [@"%@",[d]]; 
```

这`mapVC`是我的`mapVC`类对象，其中存在距离计算方法，这两行都给了我预期标识符的错误。

另外，我如何为每家餐厅分别计算并在 tableview 中显示？我必须将值存储在数组中吗？如果是，那么我应该把我的方法放在哪里，我应该在哪里调用它，以便为每家餐厅计算它并存储在一个数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:56:31.333

嗯....我认为这是您的错误：

```
NSString *d = [NSString stringWithFormat:@"%@",[mapVC.distanceBetPoints]];
cell.detailTextLabel.text = [@"%@",[d]]; 
```

不应该是这样的：

```
NSString *d = [NSString stringWithFormat: @"%@", mapVC.distanceBetPoints];
cell.detailTextLabel.text = d; 
```

我不确定，这里的答案似乎如此简单和明显，以至于我可能从未见过这种语法，我假设它不正确，我从未见过这么多括号和那种格式！

> 另外，我如何为每家餐厅分别计算并在 tableview 中显示？我必须将值存储在数组中吗？如果是，那么我应该把我的方法放在哪里，我应该在哪里调用它，以便为每家餐厅计算它并存储在一个数组中。

将其存储到本地数组中，并使用一种方法（可能应该将其放入`viewDidLoad`）将餐厅填充到数组中。我假设您的 plist 是一个字典数组（每个字典都是一家餐厅）。但如果没有，你的餐厅名单是什么？一个字符串数组还是什么？

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"MyPlistName" ofType:@"plist"]; 
```

restaurantArray = [[NSArray alloc] initWithContentsOfFile: plistPath];

# java - Java Netbeans 6.5 Mastermind 计算白钉

> ID：14534489
> 
> 赞同：0
> 
> 时间：2013-01-26T06:25:50.310
> 
> 标签：java, netbeans

对于我的策划游戏，我使用 6 个数字而不是 6 种颜色。也不是显示黑色和白色的钉子，而是只输出 2 个句子。一读：

"正确位置的正确位数是__"(黑色钉子/bothRight) "错误位置的正确位数是__"(白色钉子/numberRight)

对于提交的 4 位猜测，我使用了一个名为guessArr 的数组，它接受来自 4 个输入框的 4 个值。

```
 guess0 = Integer.parseInt(firstInput.getText());
    guess1 = Integer.parseInt(secondInput.getText());
    guess2 = Integer.parseInt(thirdInput.getText());
    guess3 = Integer.parseInt(fourthInput.getText());

    //New array to arrange guesses
    int[] guessArr = new int[] {guess0,guess1,guess2,guess3}; 
```

对于计算机生成的答案，

```
 //Create a 4 digit code made of random numbers between 1 and 6
    answerArr[0]=(int)(Math.random()*6+1);
    answerArr[1]=(int)(Math.random()*6+1);
    answerArr[2]=(int)(Math.random()*6+1);
    answerArr[3]=(int)(Math.random()*6+1); 
```

找到黑色钉子的数量很容易：

```
 //Calculate number of correct digits in correct position

 for (int i = 0; i < 4; ++i)
{
    if (answerArr[i] == guessArr[i])
    {
    used[i] = true;
    bothRight++;
    }
} 
```

***编辑***

我已经解决了！

```
 // Calculate number of correct numbers in wrong position

    //Declare variables for what digits are in the answer
    Integer digit1 = 0, digit2 = 0, digit3 = 0, digit4 = 0, digit5 = 0 , digit6 = 0;

    //Find what the answer digits are
    for (int k = 0; k < answerArr.length; ++k){

    if (answerArr [k] == 1)
    {
        digit1++;
    }

       if (answerArr [k] == 2)
    {
        digit2++;
    }

       if (answerArr [k] == 3)
    {
        digit3++;
    }

       if (answerArr [k] == 4)
    {
        digit4++;
    }

       if (answerArr [k] == 5)
    {
        digit5++;
    }

       if (answerArr [k] == 6)
    {
        digit6++;
    }

  }

    //Declare variables for what digits are in the answer
   Integer gDigit1 = 0, gDigit2 = 0, gDigit3 = 0, gDigit4 = 0, gDigit5 = 0 , gDigit6 = 0;

   //Find the guess numbers submitted

    for (int p = 0; p < guessArr.length; ++p){

    if (guessArr [p] == 1)
    {
        gDigit1++;

    }

    else if (guessArr [p] == 2)
    {
        gDigit2++;

    }

        else if (guessArr [p] == 3)
    {
        gDigit3++;

    }

        else if (guessArr [p] == 4)
    {
        gDigit4++;
    }

        else if (guessArr [p] == 5)
    {
        gDigit5++;
    }

        else if (guessArr [p] == 6)
    {
        gDigit6++;
       if (gDigit6 == 0)
       {
         gDigit6++;
       }
    }

       //Find the value of correct numbers submitted in the guess
       Integer correctNumbers = Math.min  (digit1, gDigit1) +  Math.min  (digit2, gDigit2) + Math.min  (digit3, gDigit3) +
                                            Math.min  (digit4, gDigit4) +  Math.min  (digit5, gDigit5) + Math.min  (digit6, gDigit6);

       //Calculate value of numberRight
       numberRight = (correctNumbers - bothRight);
  } 
```

任何帮助将不胜感激。:D 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:39:44.183

首先，我要提前说，我不会给你任何代码，因为这要么是一个学习练习，所以你可以学习语言，否则这是一个课堂问题。

所以，让我们从逻辑上考虑一下……解决这个问题的一种方法是计算一种颜色的数量。

例如，假设玩家猜出 2 个蓝色和 2 个绿色，答案是 1 个蓝色、1 个红色和两个绿色。

玩家猜对了 3 个颜色，所以你会给他们 3 个白色钉子，除非他们在正确的位置找到了一些。现在，假设他们在正确的位置获得了其中一个蓝色，这意味着他们有 1 个黑色钉子，它取代了一个白色钉子。因此，总计是 2 个白色钉子和 1 个黑色钉子。

因此，要找到“正确颜色”的数量，您应该检查每种颜色（循环的好机会？）并将玩家猜测的每种颜色的数量与解决方案具有的每种颜色的数量进行比较。

换句话说，您不想将猜测与答案进行比较。您想将猜测中每种颜色的计数与解决方案中每种颜色的计数进行比较。

然后，您通过这个伪代码得到“白色钉子”： int whitePegs=correctColors-blackPegs;

编辑 1：**一次比较一种颜色的答案**

如果您要保留每种颜色的计数，那么您将要使用两个数组，一个用于猜测，一个用于解决方案。数组中的每个元素都将保存颜色的计数，如下所示：

```
r=red, o=orange, y=yellow, etc.
         R  O  Y  G  B
Guess:  [0][2][1][1][0] (Total is 4, for 4 pegs
Actual: [1][1][2][0][0] (Total is 4) for 4 pegs
Matches:[0][1][1][0][0] (Total is 2) This is "correctColors" from above 
```

# r - 我能对 Gtk-CRITICAL 错误做些什么？

> ID：14534494
> 
> 赞同：4
> 
> 时间：2013-01-26T06:26:43.857
> 
> 标签：r, gwidgets

我正在编写一个小型数据库界面并想使用 glayout。MWE：

```
require(gWidgets)
options("guiToolkit"="RGtk2")

###   The bowl
win     <- gwindow( "Fruits")
gui     <- glayout( container = win )

###   Fruit salad
gui[1,1] <- glabel( "Apple", cont = gui )
gui[1,2] <- gbutton( "Change", cont = gui )

nav1 <- function( gui )
{
  svalue( gui[1,1] ) <- "Banana" 
}

addHandlerClicked( gui[1,2], handler = function( h, ... )
{ 
  nav1( gui )
}) 
```

该功能似乎存在，但我收到错误（或者是警告？）消息

```
(R:14953): Gtk-CRITICAL **: IA__gtk_table_attach: assertion `child->parent == NULL' failed 
```

我用 rseek（什么都没有）和谷歌（没有什么与我的具体问题相关）寻找解决方案。任何想法我可以做些什么来摆脱这些消息？或者我可以放心地忽略它们吗？

```
sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)
...       
other attached packages:
[1] gWidgetsRGtk2_0.0-81 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:57:44.140

它在这一行：

```
svalue( gui[1,1] ) <- "Banana" 
```

你得到错误。如果你把它分成两个步骤：

```
tmp <- gui[1,1]
svalue( tmp ) <- "Banana" 
```

它消失了。这一定与 R 如何使用替换函数创建副本有关，但 gui[1,1] 引用的小部件是一个指针。无论如何，对此不太确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:37:07.713

基于约翰的解决方案（非常感谢......），我做了一些实验，发现创建一个包含索引小部件的列表可以解决这个问题。它还避免了当有许多小部件时可能令人讨厌的临时分配。

```
###   The bowl
win     <- gwindow( "Fruits")
gui     <- glayout( container = win )

###   Fruit salad  
tmp <- list(
  t1 = gui[1,1] <- glabel( "Apple", cont = gui ),
  t2 = gui[1,2] <- gbutton( "Change", cont = gui ) )

nav1 <- function( tmp )
{
  svalue( tmp$t1 ) <- "Banana" 
}

addHandlerClicked( tmp$t2, handler = function( h, ... )
{ 
  nav1( tmp )
}) 
```

# python - 散列frozenset与排序的元组

> ID：14534495
> 
> 赞同：3
> 
> 时间：2013-01-26T06:26:55.503
> 
> 标签：python, hash, python-3.x

在 Python 中，给定一组可比较的、可散列的元素`s`，是散列`frozenset(s)`还是`tuple(sorted(s))`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:06:41.250

这取决于你在做什么。创建 a`frozenset()`比排序 a快`tuple`，但`frozenset`比 a 占用更多内存`tuple`。

`frozenset`创建 a比创建 a 更快`tuple`：

```
import timeit

import random as rn

x = range(2000)
rn.shuffle(x)
x = tuple(x)

def get_frozen_set(x):
    return frozenset(x)

def get_sorted_tuple(x):
    return sorted(x)

n = 10000

t1 = timeit.timeit('get_frozen_set(x)', 'from __main__ import x, get_frozen_set', number = n)
print 'create a frozenset:', t1
t2 = timeit.timeit('get_sorted_tuple(x)','from __main__ import x, get_sorted_tuple', number = n)
print 'sort tuple:', t2 
```

结果：

```
create a frozenset: 0.85803164112
sort tuple: 6.65848886198 
```

虽然差别很大，但起步`tuple`很短。为了`n = 20`

结果：

```
create a frozenset: 0.0124568308591
sort tuple: 0.0257906431368 
```

`frozenset`占用更多`memory`，这[在此处](https://stackoverflow.com/questions/5189909/use-frozenset-as-a-pair-in-python)进行了说明。

`frozenset`和之间的查找时间差别很小`tuple`，[这里](https://stackoverflow.com/questions/10398470/is-there-a-performance-difference-in-using-a-tuple-over-a-frozenset-as-a-key-for)

# c++ - 类对象初始化内部的c ++指针（指向数组）

> ID：14534497
> 
> 赞同：0
> 
> 时间：2013-01-26T06:27:16.233
> 
> 标签：c++, arrays, class, pointers, struct

假设我有一个类，其中包含一个结构数组和一个指向该数组的指针。

```
struct Box {
    //stuff
};
class Foo {
    private:
        Box *boxPtr     //pointer to an array of Box structs
        int max;        //the size of the partially filled array
        int boxCounter; //the current number of non-NULL elements in the array
    public:
        Foo();                //constructor
        Foo(const Foo &obj);  //copy constructor
        ~Foo();               //destructor
        bool newBoxInsert(Box newBox){
            //adds another Box to my array of Box structs
            boxCounter++;
        }
        //etc
}; 
```

在我的 int main() 中，我必须以某种方式创建一个全新的 Foo 类对象。我将需要部分填充那个大小不确定的数组，它的指针是 boxPtr。

我将如何初始化该数组？构造函数应该这样做吗？还是我应该让 newBoxInsert 处理它？

在任何一种情况下，我将如何实现这一目标？我猜我必须动态分配数组。如果是这种情况，那么最好将指针作为类成员......对吗？

例如，将第一个元素添加到我的数组时，我应该使用

```
boxCounter = 1;
boxPtr = new Box[boxCounter]; 
```

然后继续向数组中添加元素？

也许这只是用向量做得更好。添加元素时，它们更加...灵活（？）。向量可以包含结构作为元素吗？

[/n00b]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:28:55.967

```
private:
        Box *boxPtr 
```

将其替换为：

```
private:
        std::vector<Box> mbox; 
```

它为您节省了所有手动内存管理。而且你出错的可能性更小。
是的，`std::vector`可以包含结构作为元素。事实上，它是一个模板类，因此它可以存储您想要的任何数据类型。

在C++中如果需要动态数组，最简单最明显的选择就是我们`std::vector`。

# neo4j - 为什么 neo4j-shell 索引查询有效并且 cypher 返回 0 行

> ID：14534499
> 
> 赞同：1
> 
> 时间：2013-01-26T06:27:19.050
> 
> 标签：neo4j

我有一个名为植物的索引。我已经使用名称索引了一堆节点：`index -i plants name`

当我使用 shell index 命令进行查询时，我可以使用 *. 当我使用 Cypher 时，通配符不起作用。但是，完全匹配确实如此。为什么通配符在 Cypher 中不起作用？我的语法错了吗？

```
neo4j-sh (foo,0)$ start n=node:plants(name="*")
> return n;
+---+
| n |
+---+
+---+
0 row
0 ms

neo4j-sh (foo,0)$ index -q plants name "*"
(me)
(Broccoli,23)
(Basil,24)
(Kale,22)
(Brussel_sprouts,30)
(Sunflowers,27)
(Cilantro,26)
(Parsley,28)
(Beets,25)
(Corn,1)
(Cauliflower,17)
(Lettuce,18)
(Pumpkin,15)
(Garlic,16)
(Tomato,13)
(Beans,14)
(Peas,19)
(Potatoes,20)
(Favas,21)
(Cabbage,12)
(Cucumber,11)
(Onions,5)
(Carrots,3)

neo4j-sh (foo,0)$ start n=node:plants(name="Corn")

> return n;
+----------------------------------+
| n                                |
+----------------------------------+
| Node[1]{name:"Corn",height:"84"} |
+----------------------------------+
1 row
2 ms

neo4j-sh (foo,0)$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:34:28.537

对于这种查询，您必须使用 Lucene 语法。像这样：

```
start n=node:plants("name:*")
... 
```

# c# - MonoTouch instancesRespondToSelector 的实现在哪里？

> ID：14534509
> 
> 赞同：3
> 
> 时间：2013-01-26T06:29:07.920
> 
> 标签：c#, ios, xamarin.ios, uiappearance

各种 UIAppearance 代理实例不响应选择器（因为它们是其相关类型的代理，而不是它的实际实例），如本[问答](https://stackoverflow.com/questions/12504304/respondstoselector-fails-for-appearance-proxy)中所述。

这使得无法测试 Appearance API 的新 iOS 6 功能。例如，这种外观更改将永远不会执行，因为 if 检查中的代码总是返回 false，即使在 iOS 6 上也是如此，因为它正在检查的实例不是真实实例，而是外观代理。

```
if ( UINavigationBar.Appearance.RespondsToSelector( new Selector("setShadowImage:")))
    UINavigationBar.Appearance.ShadowImage = new UIImage(); 
```

链接的答案说使用该`instancesRespondToSelector`方法。但是我在 MT API 的任何地方都找不到它。我只是盲目，还是在 MT 中有不同的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:03:00.930

和之间**几乎没有**区别，这里有一个[很好的描述](https://stackoverflow.com/q/11574478/220643)，只是后者是一种方法。`respondsToSelector:``instancesRespondToSelector:``static`

来自您的链接的答案用于**真实**`instancesRespondToSelector:`类型，而不是其代理。您可以使用MonoTouch 中已有的方法获得相同的结果。**`Appearance``RespondsToSelector`**

 **```
if (new UINavigationBar ().RespondsToSelector( new Selector("setShadowImage:")))
    UINavigationBar.Appearance.ShadowImage = new UIImage(); 
```

IOW 它假设如果`setShadowImage:`可用，那么您可以访问它的代理。对于以前存在的功能`UIAppearance`可用，情况并非如此（代码可能有效，但结果与您的期望不符）。

> 在 MT 中是否有不同的方法来实现这一点？

在许多情况下，您可以通过执行单个版本检查来启用/禁用**多个功能，如下所示：**

```
if (UIDevice.CurrentDevice.CheckSystemVersion (6,0)) {
    // enable iOS6 new features
} else {
    // fallback to iOS 5.x supported features
} 
```

现在`instancesRespondToSelector:`不是 MonoTouch 提供的公共 API 的一部分（它需要在每种类型中绑定，至少在使用生成的绑定完成时）。但是，如果您愿意，实施起来并不难。您可以使用以下代码：

```
IntPtr responds_handle = Selector.GetHandle ("instancesRespondToSelector:");
IntPtr appearance_handle = new UINavigationBar ().ClassHandle; // *not* Handle
IntPtr setShadowImage_handle = Selector.GetHandle ("setShadowImage:");
bool result = Messaging.bool_objc_msgSend_IntPtr (appearance_handle, responds_handle, setShadowImage_handle); 
```

如果你在几个地方需要它，你可以把它变成一个方法。请记住，它将返回与`RespondsToSelector`（针对您的特定问题）相同的答案。**

# java - 运行外部命令时 Java 无法获得完整错误

> ID：14534511
> 
> 赞同：3
> 
> 时间：2013-01-26T06:29:33.773
> 
> 标签：java, process, cmd

我正在尝试在 java中编译[打字稿文件。](http://typescriptlang.org)

这是一个有错误的“.ts”文件：

```
alert("hello, typescript");
errrrrrrrrrrrrrrrrrrrrrrrrrror 
```

当我在 windows shell(cmd) 中编译时：

```
tsc hello.ts 
```

它将报告错误消息：

```
E:/WORKSPACE/test/typescripts/hello.ts(2,0): The name 'errrrrrrrrrrrrrrrrrrrrrrrrror' 
does not exist in the current scope 
```

但是当我在java中这样做时：

```
String cmd = "cmd /C tsc hello.ts";
Process p = Runtime.getRuntime().exec(cmd);
String out = IOUtils.toString(p.getInputStream());
String error = IOUtils.toString(p.getErrorStream());
System.out.println("### out: " + out);
System.out.println("### err: " + error); 
```

它打印：

```
### out:
### err: E:/WORKSPACE/test/typescripts/hello.ts(2,0): 
```

您可以看到未捕获详细错误。我的代码哪里出了问题？

* * *

**更新**

我只是确保`tsc.exe`MS提供的没有这样的问题，我在这个问题中运行的是`tsc.cmd`从npm安装的`npm install typescript`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:33:28.070

您是否尝试过使用原始 Process/ProcessBuilder 组合？

```
ProcessBuilder pb = new ProcessBuilder("cmd /C tsc hello.ts");

//merge error output with the standard output
pb.redirectErrorStream(true);

Process p = pb.start();
try (BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream(), Charset.forName("UTF-8")))) {
    String line;
    while ((line = reader.readLine()) != null) {
        System.out.println(line);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T02:29:48.903

我只是花了几个小时来解决同样的问题。

最后，我通过添加`"2> errorfile.txt"`到我的命令行来解决它。这会将 重定向`stderr`到一个文件，然后我读取并打印该文件。

# android - Android如何绘制圆形矩形和阴影布局

> ID：14534512
> 
> 赞同：6
> 
> 时间：2013-01-26T06:29:54.630
> 
> 标签：android, android-linearlayout, draw, shadow, rounding

我让一个类扩展了 LinearLayout 我想显示一个这样的 Rect：

```
 ---------------------     => it is round corner 
 | border frame         | .
 |  -----------------   | .
 |  |  hearder      |   | .
 |  | - - - - - - - |   | .
 |  |  center       |   | .
 |  |               |   | .
 |  | - - - - - - - |   | .
 |  |  buttom       |   | .
 |  ----------------    | .
 |                      | .
  ---------------------- .
  . . . . .  . . . . . .      => it is shadow 
```

我使用了paintShadow.setShadowLayer(this.radius, 8, 8, Color.GRAY); 影子不圆。

所以谁知道如何制作圆形矩形和阴影。代码：

```
@SuppressLint("DrawAllocation")
public class CornerLinearLayout extends LinearLayout{

    public CornerLinearLayout(Context context,AttributeSet attr){
        super(context,attr);
        init();
    }

    public CornerLinearLayout(Context context) {
        super(context);

        init();

        // TODO Auto-generated constructor stub
    }
    private static final int RADIUS=10;
    private int frameColor;
    private int radius;
    private Path mClip;
    private int frameWidth;
    private int headerHeight;
    private int buttomHeight;
    private int headerColor;
    private int buttomColor;
    private int centerColor;
    private void init() {
        this.radius = RADIUS;
        this.frameColor = 0xFFFFFFFF;
        this.frameWidth = 4;
        this.headerHeight = 50;
        this.buttomHeight = 50;
        headerColor = 0xFF31234A;
        buttomColor = 0xFF9ACFFF;
        centerColor = 0xFF55AACC;
        this.setBackgroundColor(0);
//      GradientDrawable gd = new GradientDrawable();
//      gd.setStroke(frameWidth, frameColor);
//      gd.setCornerRadius(radius);
//      gd.setColor(0);
//      //gd.setStroke(30, 0xFFFFFFFF);
//      
//      setBackgroundDrawable(gd);
        this.setPadding(frameWidth, frameWidth, frameWidth,frameWidth);

//      LinearLayout.LayoutParams params = (LayoutParams) this.getLayoutParams();
//      params.setMargins(25, 10, 25, 10);

    }
    private Paint paintShadow = new Paint();
    private Paint paint = new Paint();
    public void onDraw(Canvas canvas){
        super.onDraw(canvas);       
        RectF rf = new RectF(0,0,this.getWidth()-10,this.getHeight()-5);
        paintShadow.setShadowLayer(this.radius, 8, 8, Color.GRAY);
        rf.right -= 3;
        rf.bottom -= 3;
        paintShadow.setColor(this.frameColor);
        paintShadow.setStrokeWidth(5);
        canvas.drawRoundRect(rf,this.radius,this.radius, paintShadow);

        paint.setStyle(Paint.Style.FILL);
//      Rect r = new Rect(5,5,this.getWidth()-5,this.getHeight()-5);
        if(this.centerColor != 0){

            paint.setColor(this.centerColor);
//          canvas.drawRect(r, paint);
            rf.right -= 5;
            rf.left += 5;
            rf.top += 5;
            rf.bottom -=5;
            canvas.drawRoundRect(rf, this.radius, this.radius, paint);
        }
//      if(this.headerColor!=0){
//          Rect rr = new Rect(10,10,this.getWidth()-5,this.headerHeight-10);
//          paint.setColor(this.headerColor);
//          canvas.drawRect(rr, paint);
//      }
//      if(this.buttomColor != 0){
//          Rect rr = new Rect(10,this.getHeight()-this.buttomHeight,this.getWidth()-3,this.buttomHeight-3);
//          paint.setColor(this.headerColor);
//          canvas.drawRect(rr, paint);
//      }
//      

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mClip = new Path();
        RectF rect = new RectF(0, 0, w, h);
        mClip.addRoundRect(rect, this.radius,  this.radius, Direction.CW);

    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        canvas.save();

        canvas.clipPath(mClip);

        super.dispatchDraw(canvas);
        canvas.restore();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T07:32:54.037

我敢打赌你的问题在于使用 clipPath()。尝试在视图中禁用硬件加速，我想你会发现它按预期工作。

在您的 init() 方法中：

```
setLayerType(LAYER_TYPE_SOFTWARE, null); 
```

有用的链接：

*   [我应该在Android中给图像圆角吗？](https://stackoverflow.com/questions/1705239/how-should-i-give-images-rounded-corners-in-android/1718738#1718738)
*   [硬件加速——不支持的方法](http://developer.android.com/guide/topics/graphics/hardware-accel.html#unsupported)
*   [画布 clipPath() 方法未按预期工作](https://stackoverflow.com/questions/13672802/canvas-clippathpath-not-clipping-as-expected)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T07:41:56.320

使用[九个补丁可绘制对象](http://developer.android.com/tools/help/draw9patch.html)。这些将为您节省大量代码。查看九个补丁的一些[教程](http://radleymarx.com/blog/simple-guide-to-9-patch/)。

此外，看看你的`<SDK folder>/platforms/<android-xx>/data/res`开发平台附带了许多现成的默认主题的九个补丁可绘制对象，你可以将它们复制到你的应用程序中。

代码示例：

```
 @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        //-- draw with white color--
        Paint p = new Paint();
        p.setColor(Color.WHITE);

        //-- set shadow, 5dp down, 5 dp left, with radius of 15 dp--
        p.setShadowLayer(10,5,5,Color.BLACK);

        //-- warning, Honeycomb and above only
        //-- this will reduce draw performance of view
        //-- but is required to support drawing filters, like shadow, blur etc
        setLayerType(LAYER_TYPE_SOFTWARE,p);

        //--basic shapes don't have round corners yet, so use path--
        Path pt = new Path();

        //-- round rectangle path with 15dp padding (space for shadow)
        //-- and 10 dp corner radius
        pt.addRoundRect(new RectF(15,15,getWidth() - 15 ,getHeight() -15 ),
                        10,10, Path.Direction.CW);

        //--draw--
        canvas.drawPath(pt,p);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:03:41.703

而不是使用 setShadowlayer，而是直接绘制一个带有 alpha 颜色值的圆形矩形，如 color=0x66000000。一个简单的黑色阴影。

您可以通过更改`rect`参数来调整它，然后再容纳其他绘图以匹配它，否则它将被全部覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T09:25:07.447

有一个关于这个问题的很好的教程，由 Romain Guy 制作，[在这里](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)。

我发现的唯一缺点是您需要将位图准备为您希望使用它的确切尺寸，否则它会涂抹。

# speech-recognition - 在 Sphinx4 中将语音解码为音素

> ID：14534515
> 
> 赞同：1
> 
> 时间：2013-01-26T06:31:08.747
> 
> 标签：speech-recognition, sphinx4, phoneme

我可以使用 CMUSphinx4 将特定语音解码为音素并将这些音素用于进一步的实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-18T10:49:27.063

如果您使用的是 sphinx4（beta 6），框架中有一个名为**getBestPronunciationResult()的方法**

> "当应用程序希望音素在最佳最终路径上时使用该方法。请注意，单词可能有多个发音，因此这不等同于单词路径，例如 one[HH,W,AH,N] to[T ,UW] 三[TH,R,IY]
> 
> 返回：最佳路径上的单词字符串和相关音素"

位置：src/sphinx4/edu/cmu/sphinx/result/Result.java

Token.java 是执行实际工作的类。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T22:16:53.013

找到了这个示例代码，它将接受识别结果对象并转储音素：[http ://cmusphinx.sourceforge.net/wiki/sphinx4:unittimestamps](http://cmusphinx.sourceforge.net/wiki/sphinx4:unittimestamps)

我发现这篇论文对理解 Sphinx4 非常有用：[http ://cmusphinx.sourceforge.net/sphinx4/doc/Sphinx4Whitepaper.pdf](http://cmusphinx.sourceforge.net/sphinx4/doc/Sphinx4Whitepaper.pdf)

一旦我了解了架构，我就浏览了 javadoc 页面上的包列表。

希望有帮助。祝你好运 ！

# boost - 如何解释 boost::mpi 的错误代码？

> ID：14534516
> 
> 赞同：1
> 
> 时间：2013-01-26T06:31:16.897
> 
> 标签：boost, mpi, boost-mpi

如何理解 boost::mpi 错误代码？例如，错误代码 834983239 是什么意思？

```
...
mpi::communicator world;
mpi::request req = world.isend(1, 1, std::string("hello"));
while(!req.test()) {
  boost::this_thread::sleep(boost::posix_time::seconds(1));
}
int errorCode = req.test()->error();
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T06:03:09.897

如果没有错误，则不太可能填写错误代码（Boost.MPI 的默认行为是在错误时抛出异常，而不是返回代码）。除非您更改了 Boost.MPI 的默认错误处理设置，否则您不需要手动检查错误代码。

# ruby - 带有转义引号的 Ruby CSV 解析字符串

> ID：14534522
> 
> 赞同：17
> 
> 时间：2013-01-26T06:32:19.837
> 
> 标签：ruby, csv

我的 CSV 文件中有一行包含一些转义引号：

```
173,"Yukihiro \"The Ruby Guy\" Matsumoto","Japan" 
```

当我尝试解析它时，Ruby CSV 解析器：

```
require 'csv'
CSV.foreach('my.csv', headers: true, header_converters: :symbol) do |row|
  puts row
end 
```

我收到此错误：

```
.../1.9.3-p327/lib/ruby/1.9.1/csv.rb:1914:in `block (2 levels) in shift': Missing or stray quote in line 122 (CSV::MalformedCSVError) 
```

我怎样才能绕过这个错误？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-26T06:50:19.483

这`\"`是典型的 Unix 而 Ruby CSV 期望`""`

解析它：

```
require 'csv'
text = File.read('test.csv').gsub(/\\"/,'""')
CSV.parse(text, headers: true, header_converters: :symbol) do |row|
  puts row
end 
```

注意：如果您的 CSV 文件非常大，它会使用大量 RAM 来读取整个文件。考虑一次读取一行文件。

注意：如果您的 CSV 文件可能在斜杠前面有斜杠，请使用以下 Andrew Grimm 的建议来帮助：

```
gsub(/(?<!\\)\\"/,'""') 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-26T18:28:19.957

CSV 支持“转换器”，我们通常可以使用它来处理字段的内容，然后再将其传递回我们的代码。例如，这可用于去除一行中所有字段上的[额外空格。](https://stackoverflow.com/a/14443817/128421)

不幸的是，转换器在将行拆分为字段后触发，并且在该步骤中 CSV 对嵌入的引号感到生气，因此我们必须在“行读取”步骤和“将行解析为字段”之间“ 步。

这是我的示例 CSV 文件：

```
ID,Name,Country
173,"Yukihiro \"The Ruby Guy\" Matsumoto","Japan" 
```

保留您的`CSV.foreach`方法，这是我在不让 CSV 发疯的情况下解析它的示例代码：

```
require 'csv'
require 'pp'

header = []
File.foreach('test.csv') do |csv_line|

  row = CSV.parse(csv_line.gsub('\"', '""')).first

  if header.empty?
    header = row.map(&:to_sym)
    next
  end

  row = Hash[header.zip(row)]
  pp row
  puts row[:Name]

end 
```

以及由此产生的哈希值和名称值：

```
{:ID=>"173", :Name=>"Yukihiro \"The Ruby Guy\" Matsumoto", :Country=>"Japan"}
Yukihiro "The Ruby Guy" Matsumoto 
```

我假设您想要一个哈希值，因为您指定了`:headers`标志：

```
CSV.foreach('my.csv', headers: true, header_converters: :symbol) do |row| 
```

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2016-01-12T03:19:49.067

在 MSExcel 中打开文件并保存为 MS-DOS 逗号分隔 (.csv)

# symlink - 动态根主机切换

> ID：14534524
> 
> 赞同：0
> 
> 时间：2013-01-26T06:32:47.783
> 
> 标签：symlink, g-wan, virtual-hosts

我在 gwan 服务器中有几个项目，所以当我从本地网络中的其他机器测试项目时，我需要切换虚拟主机。
我做了一个虚拟主机的符号链接作为根主机。
但是 gwan 报告说“没有 'root' #host for listener 0.0.0.0_80”。
无论是相对路径还是绝对路径链接，都会出现同样的错误。

有什么办法可以实现动态根主机切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:11:30.083

你可以试试今天早上发布的 v4.25 吗？v4.24 存在编译器优化问题，导致某些代码无法执行（导致某些平台上出现空文件）。

# php - 比较 PHP 服务器时间和 JavaScript 时间（客户端浏览器时间）

> ID：14534534
> 
> 赞同：1
> 
> 时间：2013-01-26T06:33:47.190
> 
> 标签：php, javascript, jquery

我正在制作一个通知系统，它需要自功能以来的时间。

我将此脚本用于timesince函数（jQuery）：

```
$.fn.updateSince = function(interval) {
    var times = this.map(function(){ return { e: $(this), t: parseInt($(this).html()) }; });

    var format = function(t) {
        if(t > 86400) {
            return Math.floor(t / 86400) + ' days ago';
        } else if (t > 3600) {
            return Math.floor(t / 3600) + ' hours ago';
        } else if (t > 60) {
            return Math.floor(t / 60) + ' minute ago';
        } else if (t > 50) {
            return '50 seconds ago';
        } else if (t > 40) {
            return '40 seconds ago';
        } else if (t > 30) {
            return '30 seconds ago';
        } else if (t > 25) {
            return '25 seconds ago';
        } else if (t > 15) {
            return '15 seconds ago';
        } else if (t > 10) {
            return '10 seconds ago';
        } else {
            return 'a few seconds ago';
        }
    }
    var update = function(){
        var now = new Date().getTime();
        $.each(times, function(i, o){
            o.e.html(format(Math.round((now - o.t) / 1000)));
        });
    };

    window.setInterval(update, interval);
    update();
    return this;
} 
```

通知存储在 MySQL 数据库中，每个通知都有一个时间戳，格式如下：2012-12-26 06:21:28

我使用 PHP strtotime 并在为每个通知项从数据库中获取时间时将其更改为 UTC 格式:(php)

```
 $rows['time']= strtotime($temp_time." UTC"); 
```

当我使用 ajax 将它传递回客户端浏览器时。我将 UTC 时间（来自数据库）乘以 1000（javascript）

```
 var time = parseInt(dbtime * 1000); 
```

然后我可以使用jQuery的timesince函数把它变成时间之前。

**问题：** 我的服务器时间随客户端浏览器时间而变化。我如何使它们彼此“兼容”。

例如，根据客户端浏览器在 2 小时前发出通知。但是 PHP 说它是 7 小时前制作的。因为客户端浏览器时区与我的服务器时区不同

我的逻辑是： 1\. [PHP] 获取当前时间，并使用从数据库中获取的通知时间减去它。数据库时间-当前时间=服务器端时间差

1.  [PHP] 然后我们得到一个时差。在这种情况下 7 小时。
2.  [PHP] 如何将 7 小时转换为 UTC 格式？
3.  [Javascript] 将当前客户端浏览器时间，也以 UTC 格式发送到 php 脚本。
4.  [PHP] 客户端浏览器时间 - 7 小时（UTC？） = 为 javascript 使用创建通知的实际时间。
5.  [PHP] 将结果发送回 Javascript ，所以现在时间可以在客户端浏览器端 2 小时前。

我该怎么做呢？

仅供参考，UTC格式就像（乘以1000）：1314952284779

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:52:14.680

我有同样的问题，我将用户的 ip 存储在数据库中，然后将其转换为位置并获取时区，然后使用此功能。这样做的主要原因是我将来可能会考虑获取有关您的用户的信息，这样这种方法也会有所帮助。您可以使用间隔触发功能来运行代码

```
 j(document).ready(function () {
        window.initial = 0;
        window.setInterval(timeincrement, 60000);
        function timeincrement() {
            initial = initial + 60;
            j('.coment').each(function () {
                var timefromserver = j(this).find('input[type=hidden]').val();
                timefromserver = parseInt(timefromserver);

                if ((timefromserver / 216000) < 1) {

                    var secgone = timefromserver + initial;
                    var timeelasped = secgone / 60;

                    if (Math.floor(timeelasped) < 1) {
                        j(this).find('.lightgrey').text("Few seconds ago");
                    } else if (Math.floor(timeelasped) < 60) {
                        var innertext = timeelasped + " minutes ago";
                        j(this).find('.lightgrey').text(innertext);

                    } else if (Math.floor(timeelasped / 60) > 0) {
                        var hourgone = Math.floor(timeelasped / 60);
                        var innertext = hourgone + " hours ago";
                        j(this).find('.fdlightgrey').text(innertext);
                    }
                }
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:22:36.250

你的逻辑可能是：

1.  `strtotime`使用（或任何类似函数）将通知时间转换为 UNIX 时间戳
2.  使用带有此值的 JavaScript`Date`函数（乘以 1000）重新构建日期
3.  使用 (new Date) - thatDate 计算差异
4.  转换为小时、分钟和秒

我在这里看到的问题是第一步。您提到日期存储为`2012-12-26 06:21:28`但该日期对应于哪个时区？如果它与服务器时区相同，则使用`strtotime("2012-12-26 06:21:28")`足以生成正确的时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T14:36:18.527

对于您`new Date().getTime()`在 JavaScript 中的信息返回 UTC 时间，只要客户端时钟正确，这意味着您不必处理用户的不同时区，您所要做的就是以 UTC 格式从您的服务器提供时间。

在 PHP 中，您应该使用该`gmdate`函数来创建 UTC 时间字符串，或者干脆不对其进行格式化，而只发送您从该`time`函数获得的原始 UNIX UTC 时间。

简而言之，UTC无处不在，那么它就可以工作。作为奖励，它就像夏令时不存在一样工作。

您还可以通过在页面首次加载时发送“现在”时间戳来进行调整以解决客户端上的错误时间，计算客户端上的时间，然后从所有未来的计算中减去此结果。但考虑到几乎所有计算机都会自动将时钟调整为时间服务器的时钟，因此计算机时钟关闭超过几秒钟的情况很少见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:32:23.830

如果 mysql 数据是 UTC，我在 JavaScript 中使用[**Date.getTimezoneOffset()**](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)并将它（偏移量以分钟为单位：-120 = GMT+2）应用于显示历史时间（事件发生时）存储在 mysql 中的时间（通过 php 获得） ) 为用户。

漫步：

还用于将当前时间与 mysql 数据进行比较（永远不要相信用户的时钟，但他们的时区通常是正确的 [除了常旅客的笔记本电脑，哎哟]）。

我注意告诉用户她的时区差异是什么（通过发布 GMT +/- XX 或类似“HH：MM 这应该是您的当地时间，如果不是请修复时钟”）并要求他们确认，如有必要。您的代码将根据您与用户的关系来处理这种情况（“修复那个时钟，darnit”或“是的，嗯，您希望我们修复我们的时钟以适应巴黎时间[尽管我们在阿根廷]，女士？” )

# sql-server - 使用 Eloquent 更新行时数据不持久

> ID：14534535
> 
> 赞同：0
> 
> 时间：2013-01-26T06:33:47.643
> 
> 标签：sql-server, laravel, eloquent

我正在尝试使用 Eloquent ORM 更新 SQL Server 数据库中的表，但由于某种原因，更新从未提交。由于它是一个遗留数据库，我以以下方式定义了我的模型（因为表和键不完全符合预期的约定，并且时间戳列未命名为 updated_at、created_at）

```
class User extends Eloquent {
    public static $key  = 'UserID';
    public static $table = 'User';
    public static $timestamps = false;
} 
```

我试图运行的代码就像这样简单：

```
 $user = User::find($userid);
    $user->password = $password;
    $user->salt = $salt;
    $user->resettoken = $reset_token;
    $user->save(); 
```

我已经调试了代码，可以看到用户对象被正确检索，并且用户对象的属性在分配新值时被更新。但是，save 方法不会保留数据。

不过，使用 Fluent 就像款待一样。这适用于例如：

```
$affected = DB::table('User')
                ->where('UserID', '=', $userid)
                ->update(array(
                    'password' => $password, 
                    'salt' => $salt, 
                    'resettoken' => $reset_token
                )
            ); 
```

但是使用 Eloquent 会很好。是什么绊倒了我？

**更新：**运行代码如皮埃尔所说：

```
<?php
$test = new User();
die(var_dump($test)); 
```

回报：

```
object(User)[39]
  public 'attributes' => 
    array (size=0)
      empty
  public 'original' => 
    array (size=0)
      empty
  public 'relationships' => 
    array (size=0)
      empty
  public 'exists' => boolean false
  public 'includes' => 
    array (size=0)
      empty 
```

User 对象实例的转储显示所有属性，即该对象包含所有属性，包括新值，但没有任何内容保存到数据库：

```
$user = User::find($userid);
$user->password = $password;
$user->salt = $salt;
$user->resettoken = $reset_token;
$user->save(); 
```

使用此语法没有区别：

```
$user = User::where_UserID($userid)->first(); 
```

**解决方案：**

必须使用模型中键的小写名称，然后才能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:20:00.007

雄辩的更新看起来不错。愿你的 $key 不能正常工作：

```
public static $key  = 'UserID'; 
```

什么，你的 Laravel 核心版本是什么？我知道有些用户用以前的版本报告了这个。

* * *

**编辑：** [质量团队关于它......](http://forums.laravel.io/viewtopic.php?id=4122)

您可以使用以下方法验证这一点：

```
<?php
$test = new User();
die(var_dump($test)); 
```

我会提到使用的主键（仅限 laravel 4）

最后，尝试：

```
$user = User::where_UserID($userid)->first();
$user->password = $password;
$user->salt = $salt;
$user->resettoken = $reset_token;
$user->save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:35:55.040

确保在模型中使用小写的键名。

这是错误的：

```
class User extends Eloquent {
    public static $key  = 'UserID';
} 
```

这按预期工作：

```
class User extends Eloquent {
    public static $key  = 'userid';
} 
```

# mainframe - 是否可以强制删除另一个作业/用户使用的 VSAM 文件？

> ID：14534538
> 
> 赞同：0
> 
> 时间：2013-01-26T06:34:10.963
> 
> 标签：mainframe, jcl, vsam

我们有一个作业，它需要备份 VSAM 文件，然后是同一 VSAM 文件的标准 Delete-Define-Repro。为了处理尝试删除不存在文件的情况，我们遵循标准做法，如果 Delete 返回非零返回码，则将 MAXCC/LASTCC 设置为 0，然后继续该过程，就好像没有错误一样。

但有时我们会面临删除无法正常工作的情况，因为文件被某个用户打开或在其他作业中被读取。在这种情况下，作业失败是因为在定义新的 VSAM 文件时，因为文件已经存在（删除无法清除它）。

这种情况有什么解决方法吗？或者我们可以强制删除一个文件，即使它被其他进程/用户持有？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:47:59.717

您应该能够发现，当 VSAM 文件（或任何其他文件）被“其他东西”使用时，删除它不是一个好主意。

为什么不测试 DELETE 中的特定值？

如果您要进行备份，然后删除/定义，那么获得文件的独占控制权将是一个非常非常好的主意，否则某些事情会变得一团糟。

您可以使用 DISP=OLD 将 DSN 的 DD 作为有问题的 VSAM 文件，这样只有在没有人使用该文件时才会选择您的作业。

你是怎么做备份的？为什么其他作业同时访问该文件？这是在“测试”环境中吗？它是什么类型的 VSAM 文件？你为什么要做 REPRO，你觉得那是最好的方法吗？

如果不知道所有这些以及更多信息，实际的答案是很困难的。

# iphone - 在表格视图中选择新行时如何取消选择选定的行？

> ID：14534539
> 
> 赞同：0
> 
> 时间：2013-01-26T06:34:23.957
> 
> 标签：iphone, ios, ipad

我有一个应用程序，当用户选择一个新单元格时，我需要在其中取消选择选定的单元格。我可以选择和取消选择 tableview 行，但问题是我一次只需要选择一行。我现在是这样的，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
   cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell_check.png"]];   

}
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
      UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

     cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell.png"]]; 

} 
```

但在此我可以选择和取消选择同一行。但我的意图是在选择新行时，如果已经选择了任何其他单元格，则需要取消选择。有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:53:39.007

一个天真的解决方案是

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  for (int i = 0; i < [tableView numberOfRowsInSection:0]; i++) {
      [tableView deselectRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
  } 
   UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
   cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell_check.png"]];   

}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
      UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

     cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell.png"]]; 

} 
```

基本上，每当您选择一个新单元格时，您都会遍历所有单元格以取消选择它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T06:36:37.610

采用 ：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T06:39:31.457

您可以使用`deselectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
    {
          [tableView deselectRowAtIndexPath:indexPath animated:YES];

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T06:48:31.177

试试下面的代码，希望它对你有用。

```
int rowNumber = [tableCategory numberOfRowsInSection:0];

for (int indexRow = 0 ; indexRow < rowNumber; indexRow++) {

[NSIndexPath indexPathForRow:indexRow inSection:0];

[tableCategory cellForRowAtIndexPath:indexPath] ;

<required indexpath row>)

cell

cell

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T07:29:30.240

试试下面的一个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
  UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
  for (int i = 0; i < [tableView numberOfRowsInSection:0]; i++) {
    [tableView deselectRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
    cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell.png"]]; 
  }

   cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell_check.png"]];   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-25T08:49:21.863

我有这样的选择处理。我假设表格视图中有 2 个组，可以单独选择一个选项，即 0,1 部分是一组单选，2 部分是另一组单选在 Storbyboard 我选择了“多项选择”但是在这里，我取消选择给定组中的其他行。

```
 // MARK: - OPTIONS SELECTION HANDLING
    func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath? {

        print("Will select row \(indexPath.row) in section \(indexPath.section)")

        switch indexPath.section {
        case 0: fallthrough
        case 1:
            // Package Options
            // unselect other packages
            tableView.indexPathsForSelectedRows?.forEach({ (indexPath) in
                if indexPath.section == 0 || indexPath.section == 1 {
                    tableView.deselectRow(at: indexPath, animated: false)
                }
            })
        case 2:
            // A'la carte Cleaning Options
            // unselect other cleanings
            tableView.indexPathsForSelectedRows?.forEach({ (indexPath) in
                if indexPath.section == 2 {
                    tableView.deselectRow(at: indexPath, animated: false)
                }
            })
          default:
             fatalError("Impossible section number (\(section))!")
        }

        return indexPath
    } 
```

# python - 在使用 Python 2.7.2 和 MySQL 的 OS X 10.8.2 (Mountain Lion) 上导入 MySQLdb 失败

> ID：14534545
> 
> 赞同：0
> 
> 时间：2013-01-26T06:35:25.400
> 
> 标签：python, mysql-python

> **可能重复：**
> [如何在 Mac OS X 上安装 MySQLdb（MySQL 的 Python 数据访问库）？](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)

尽管此问题之前已在[此处](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)提出，但此处发布的问题和后续答案与 OS X (Snow Leopard) 相关，与 OS X Lion 和 OS X Mountain Lion 无关。OS X Lion 和 OS X Mountain Lion 中提供了 Python 和 MySQL 补丁，这些补丁会影响在 Mac OS X 10.7 (Lion) 和 Mac OS X 10.8 (Mountain Lion) 上顺利安装 Python-MySQLdb-connector 的过程。这是重复这个问题的唯一原因。如果您运行的是旧版本的 OS X，请随时参考旧问题。

我正在运行 OS X 10.8.2 (Mountain Lion) 并安装了 python 2.7.2 -

```
==> python 
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information. 
```

但是当我在 python 上运行 import MySQLdb 时，它会失败并显示以下消息 -

```
==> python 
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import MySQLdb
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named MySQLdb 
```

任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:38:32.880

我按照以下步骤解决了上述问题：

以下步骤适用于 Mountain Lion (OS X 10.8.2) -

安装 MySQL-python 包

[在此处](http://dev.mysql.com/downloads/)下载最新的 MySQL（64 位，tar 存档）

*   提取焦油含量
*   将文件夹重命名为“mysql”</li>
*   将文件夹复制到 /usr/local/
*   您现在应该在 /usr/local/mysql 上安装了 mysql

[在此处](http://sourceforge.net/projects/mysql-python/files/mysql-python/)下载最新的 MySQL-python 包

在终端上输入：

tar -xvzf MySQL-python-1.2.3.tar.gz cd MySQL-python-1.2.3

在您喜欢的文本编辑器上编辑 site.cfg 并更改 mysql 路径如下： mysql_config = /usr/local/mysql/bin/mysql_config

您现在已准备好构建和安装 MySQL-python：

sudo python setup.py build sudo python setup.py install

Edit your ~/.bash_profile, add the following line:

export DYLD_LIBRARY_PATH=/usr/local/mysql/lib/

If you are already using MAMP you still have to follow the above MySQL installation process, as MAMP by default doesn’t include the required header files to build MySQL-python. Moreover if you prefer MAMP, you don’t have to run mysql from /usr/local/mysql. On your settings.py remember to set “127.0.0.1″ as your preferred db host in case that “localhost” doesn’t work.

Test MySQL-python installation

Restart Terminal and type:

python import MySQLdb

The other thing I noticed is that it helps to restart the mac after installing mysql.

The steps posted on the following link work for OS X 10.6.8 -

[How to install MySQLdb (Python data access library to MySQL) on Mac OS X?](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:05:55.477

[mysql-connector-python](http://dev.mysql.com/downloads/connector/python/#downloads) from offical mysql(Oracle) is a good choice for both python 2.x and 3.x.

It's a pure python library without mysql client.

# c++ - 递归分割图像并并行处理

> ID：14534546
> 
> 赞同：1
> 
> 时间：2013-01-26T06:35:33.283
> 
> 标签：c++, image-processing, parallel-processing, mpi

我需要对图像执行某些琐碎的操作（在这种情况下为负数）。有人告诉我，我需要将图像递归地划分为相等的矩形，并使用 MPI 并行处理它们。

我在我的顺序图像处理类中编写了一个用于执行此操作的函数：

```
void recursive_negative_helper(int x, int y, int WIDTH, int HEIGHT)
{
    /* recurse until dimensions become odd, to avoid corruption of image
      (equal sized rectangles only) */
    if( (WIDTH&1) || (HEIGHT&1) )
    {
        uint8_t color[BPP];
        for(int i=y ; i<y+HEIGHT ; i++)
        {
            for(int j=x ; j<x+WIDTH ; j++)
            {
                    get_pixel(color,i,j);
                    for(int k=0 ; k<BPP ; k++)
                        color[k] = 255-color[k];
                    set_pixel(color,i,j);
            }
        }
        return;
    }
    recursive_negative_helper(x        , y         , WIDTH/2, HEIGHT/2);
    recursive_negative_helper(x+WIDTH/2, y         , WIDTH/2, HEIGHT/2);
    recursive_negative_helper(x        , y+HEIGHT/2, WIDTH/2, HEIGHT/2);
    recursive_negative_helper(x+WIDTH/2, y+HEIGHT/2, WIDTH/2, HEIGHT/2);
}

void recursive_negative()
{
    recursive_negative_helper(0,0,width,height);
} 
```

我是第一次学习 MPI，并且很难弄清楚如何并行执行此操作。我想一种方法是分成 4 份并将每个部分分配给一个过程。这对我的应用程序来说已经足够了！但是我怎样才能为任意数量的进程做到这一点？

任何人都可以帮忙吗？另外，如果可能的话，请发布一些 MPI 伪代码，以便我可以更清楚地看到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:03:38.280

对于您的情况，我想建议使用 OPENMP ( [http://openmp.org/wp/](http://openmp.org/wp/) ) 进行并行处理。易于配置和编译以优化简单循环。代码更改也是微不足道的。但我不确定递归处理，所以要小心，或者只使用非递归实现。一些教程和指南：[http ://bisqwit.iki.fi/story/howto/openmp/](http://bisqwit.iki.fi/story/howto/openmp/)

# c++ - 外部变量导致多重定义错误

> ID：14534551
> 
> 赞同：5
> 
> 时间：2013-01-26T06:36:10.983
> 
> 标签：c++, extern, multiple-definition-error

我一直在尝试使用 extern 来使用先前定义的变量。

我以前没有使用过 extern，现在我需要使用它来定义变量一次并在多个文件中使用它们

我已经为这个问题编写了最小化版本的代码。我有四个文件

库文件

```
#ifndef LIB_H
#define LIB_H

#include <iostream>

namespace lib {

  extern bool initialized;

  bool initialized = false;

  static void isInit(char* parent) {
    std::cout << "Library for [" << parent << "] initialized? " << (::lib::initialized ? "yes" : "no") << "\n";
  }
} // namespace lib
#endif 
```

*车辆.h*

```
#ifndef _VEHICLE_H
#define _VEHICLE_H
#include <string>

class Vehicle {
  public:
    Vehicle(const std::string& manufacturer,
            const std::string& model,
            int year);
    std::string manufacturer;
    std::string model;
    int year; 
};
#endif 
```

以下是名为 vehicle.cpp 的 vehicle.h 文件的实现

```
#include "vehicle.h"

#include "lib.h"

Vehicle::Vehicle(const std::string& manufacturer,
                 const std::string& model,
                 int year) :
                    manufacturer(manufacturer),
                    model(model),
                    year(year) {
   ::lib::isInit("Vehicle");
} 
```

主文件

```
#include "vehicle.h"

#include "lib.h"

int main(int argc, char** argv) {

   ::lib::isInit("main");

   ::lib::initialized = true;

   ::lib::isInit("main");

   Vehicle vehicle("Toyota", "Corolla", 2013);

   return 0;
} 
```

我正在使用 g++

```
g++ -Wno-write-strings main.cpp vehicle.cpp -o bin/main.cpp.bin 
```

我收到以下错误：

```
/tmp/cclVpsgT.o:(.bss+0x0): multiple definition of `lib::initialized'
/tmp/ccmJKImL.o:(.bss+0x0): first defined here
collect2: error: ld returned 1 exit status 
```

我检查了以下输出：

```
g++ -Wno-write-strings main.cpp vehicle.cpp -E 
```

每次包含 lib.h 时都会出现多个定义。

我的问题是：

*   当定义保护存在时，为什么会多次包含 lib.h
*   我将如何定义'extern'变量并在同一个文件中初始化它（因为它稍后在同一个文件中使用）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T06:38:18.600

> **为什么`lib.h`在定义保护时包含多次**

您需要删除定义：

```
bool initialized = false; 
```

并将其放在一个且只有一个源文件中。

包含保护可防止同一头文件多次包含在同一***[翻译单元 (TU)](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)***中，而不是在不同的翻译单元中。
您在头文件中定义变量，该变量`initialized`包含在不同的翻译单元中，然后每个 TU 都有一个名为的符号`initialized`，它违反了***[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)***。

> **我将如何定义'extern'变量并在同一个文件中初始化它（因为它稍后在同一个文件中使用）**

如果您希望变量在同一个文件中使用，为什么要创建它`extern`？`extern`当您想在不同的 TU 之间共享相同的变量时需要使用。
如果您只需要在单个 TU 中在全局范围内使用它，您应该简单地将它放在一个***[未命名的命名空间](http://msdn.microsoft.com/en-us/library/yct4x9k5%28v=vs.80%29.aspx)***中。

# java - 使用正则表达式查找 + 或 -

> ID：14534555
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:36:31.787
> 
> 标签：java, regex

我在使用正则表达式时遇到问题。

这就是我所拥有的：

`String expr = "1+4+3-2"
Matcher m;`

```
while(Pattern.matches("[+-].*", expr))
{
    (m = Pattern.compile("[+-](.*)").matcher(expr)).find();
    expr = parseTerm(m.group(1));
    System.out.println("+: " + expr)
} 
```

我试图在上面的字符串中找到“+”或“-”（或任何其他带有 + 和 - 的计算，例如`1+D[0]+D[5]`）。当我找到 + 或 - 时，我想用操作的左侧和右侧的数字进行操作。所以 1+4 将加到 5。然后 5+3 将加到 8，最后 8-2 将减去最终得到 6。由于某种原因，我当前的代码没有通过 while 循环，所以我m 不能加或减任何东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:43:19.300

您必须只捕获数字：

```
 (m = Pattern.compile("[+-]([0-9]*)").matcher(expr)).find(); 
```

不是任何符号！( `.*`)。因为在这种情况下，您会捕捉到整个表达式。

如果标记中可能有其他符号（但不是 + 或 =），您可以这样做：

```
 (m = Pattern.compile("[+-]([^+-]*)").matcher(expr)).find(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:17:29.550

参考：[pattern.matcher() 与 pattern.matches()](https://stackoverflow.com/questions/3862917/pattern-matcher-vs-pattern-matches)

```
while (Pattern.compile("[\\+-]").matcher(expr).find())
{
   ....
} 
```

# c# - ccnet 中的 Assert.Inconclusive() 测试无法构建

> ID：14534556
> 
> 赞同：0
> 
> 时间：2013-01-26T06:36:34.687
> 
> 标签：c#, mstest, ccnet-config

我有一个 Visual Studio 2010 测试工具，它为同一个测试测试不同的端点（应用程序），当为所有端点运行时，一些测试不会针对端点运行并作为不确定的测试返回，这反过来又使构建失败。使用用于持续集成的 mstest/ccnet 是否有办法使构建通过但仍显示不确定测试的计数。

我浏览了[这个](http://blog.dbtracer.org/2011/02/27/inconclusive-tests-in-tfs-build-should-not-break-the-build/)博客，但无法通过更改项目来为 ccnet 项目工作。文件。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:25:48.837

我的建议是分别运行 msbuild 和 mstest。所以你有你的任务

```
<task>
<msbuild>
<executable>c:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe</executable>
<workingDirectory>youWorkinDir</workingDirectory>
<projectFile>yourProjd.proj</projectFile>
<targets>Build</targets>
</msbuild>
<exec>
<executable>C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe</executable>
<buildArgs>/testcontainer:YourTestProject.dll /resultsfile:TestResult.xml</buildArgs>
</exec>
</task> 
```

在发布`</xmllogger>`者部分，在您执行合并任务之前，将在构建日志中包含输出文件：

```
<publishers>
<merge>
 <files>
   <file>TestResult.xml</file>
 </files>
</merge>
</publishers> 
```

# git - 下面的 git config 有什么区别

> ID：14534558
> 
> 赞同：3
> 
> 时间：2013-01-26T06:36:39.267
> 
> 标签：git, git-flow

**.git/配置 1**

```
[core]
    repositoryformatversion = 0
    filemode = false
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = ssh://johndoe@example.com//repositories/plugins/myproject.git
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

**.git/配置 2**

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = ssh://johndoe@example.com//repositories/plugins/myproject.git
[branch "master"]
    remote = origin
    merge = refs/heads/master
[branch "develop"]
    remote = origin
    merge = refs/heads/develop] 
```

但是，在两个存储库中，当我输入 时`branch -a`，都返回

```
git branch -a
* develop
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/develop
  remotes/origin/master 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T20:21:01.077

`develop`在第一个中，您没有分支跟踪远程存储库上的分支。

`git branch -avv`查看每个存储库上运行的差异。这将显示所有分支（本地和远程），每个提交的内容以及每个本地分支跟踪哪些远程分支（如果有）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T07:18:12.843

如果您尝试从未定义`[branch "develop"]`using的 repo 的开发分支中提取`git pull`，您将收到一条错误消息，提示您未指定远程分支。Git 会建议您运行`git branch --set-upstream develop origin/develop`以创建该条目并正确跟踪远程分支。

# facebook-graph-api - 在开放图形操作中获取 fb_ref 的正确方法是什么？

> ID：14534560
> 
> 赞同：1
> 
> 时间：2013-01-26T06:36:38.853
> 
> 标签：facebook-graph-api, post, facebook-opengraph

根据[文档](https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/)，如果您调用一个开放图形操作发布并填写了可选的“ref”参数（比如说，ref: foo），Facebook 将在 Facebook 发送给您的点击器的 fb_ref URL 参数中将该值返回给您（比方说，myObject?fb_ref=foo)。

然而，Facebook 并没有这样做。我没有看到在我的操作发布中包含 ref 参数有任何收益，即使在生产的非沙盒应用程序上也是如此。

根据我的实验，将 fb_ref 放入我的 URL 的唯一方法是在用户正在操作的对象的 URL 参数中包含 fb_ref（而不是在 API 调用中包含参数），并让页面在OG：网址。但是，我猜这将导致 Facebook 将每个不同的 fb_ref 视为不同的对象。这显然是不可取的。

因此，无论我做什么，我都无法让 Facebook 提供指向我对象中的 og:url 指定的内容和 Facebook 生成的内容（例如 fb_source）以外的任何内容的链接。

有人知道我做错了什么吗？

# php - 选中复选框时jquery显示按钮

> ID：14534568
> 
> 赞同：3
> 
> 时间：2013-01-26T06:38:12.117
> 
> 标签：php, jquery, html, checkbox, show-hide

如果选中任何行复选框，我想在表格下方显示删除按钮。否则，该按钮应保持隐藏状态。

表我希望它被实施。表格截图： ![在此处输入图像描述](../Images/2ea8dd13bc60a46854dd9a0b852f8ce8.png)

这是后面的html表格代码。

```
 <table id="datatable_example" class="responsive table table-striped table-bordered" style="width:100%;margin-bottom:0; ">
        <thead>
          <tr>
            <th style="width:0px; padding-right:0px;" class="jv no_sort"> <label class="checkbox ">
                <input type="checkbox">
              </label>
            </th>
            <th style="width:200px;" class=""> Skill </th>
            <th style="width:300px;" class="to_hide_phone  no_sort"> Description </th>
            <th class=""> Rating </th>
            <th style="width:200px;" class="ue no_sort"> Date </th>
            <th class="ms no_sort "> Actions </th>
          </tr>
        </thead>
        <tbody>
        <?php echo $skills; ?>
        </tbody>
      </table> 
```

这是技能变量：

```
$skills="";
while($row=mysql_fetch_array($skills_list))
{
    $showskillid=$row['skill_id'];
    $showskillname=$row['skill_name'];
    $showskilldescription=$row['skill_desc'];
    $showskillrating=$row['skill_rating'];
    $showskill_lastupdated=$row['last_updated'];
    $skills .="<tr>
                    <td><label class=\"checkbox\">
                        <input type=\"checkbox\" class=\"chkboxes\" name=\"ids[]\">
                      </label></td>
                    <td class=\"to_hide_phone\"> $showskillname </td>
                    <td class=\"to_hide_phone\">$showskilldescription</td>
                        <td> $showskillrating </td>
                    <td> $showskill_lastupdated </td>
                    <td class=\"ms\"><div class=\"btn-group1\"> <a href=\"skill_edit.php?id=$showskillid\" class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"left\" data-original-title=\" edit \"><i class=\"gicon-edit\"></i></a> <a class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"top\" data-original-title=\"View\"><i class=\"gicon-eye-open\"></i></a> <a class=\"btn  btn-small\" rel=\"tooltip\" data-placement=\"bottom\" data-original-title=\"Remove\"><i class=\"gicon-remove \"></i></a> </div></td>
                  </tr>";
} 
```

我尝试过的 Jquery 但我知道我是 jquery 的新手，所以需要帮助来修复它。

```
 <script type="text/javascript">
$(document).ready(function() {
    $('.delbtn').hide();
 });

$('.chkboxes').click(function(){
    $('.delbtn').toggle();
});

</script> 
```

Jquery 我尝试过它的工作方式就像我单击一个复选框时按钮显示，当我去单击另一个复选框时按钮消失？

我知道不应该在这里使用切换。我应该在这里使用什么来解决这个问题，或者如果有更好的选择来解决它，我愿意接受它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T06:50:25.947

当至少一个复选框被选中时，这将显示删除按钮。

```
$('.chkboxes').change(function(){
    $('.delbtn').toggle($('.chkboxes:checked').length > 0);
}); 
```

但不是隐藏它，更常见的方法是启用和禁用按钮：

```
$('.delbtn').prop('disabled', true);

$('.chkboxes').change(function(){
    $('.delbtn').prop('disabled', $('.chkboxes:checked').length == 0);
}); 
```

# python - 使用烧瓶运行多个python函数

> ID：14534570
> 
> 赞同：1
> 
> 时间：2013-01-26T06:38:31.270
> 
> 标签：python, serial-port, arduino, flask

**第二次更新**

差不多好了！！但收到“ValueError：尝试使用未打开的端口”

> ```
> File "c:\Python27\lib\site-packages\flask\app.py", line 1701, in __call__
> return self.wsgi_app(environ, start_response)
> 
> File "c:\Python27\lib\site-packages\flask\app.py", line 1689, in wsgi_app
> response = self.make_response(self.handle_exception(e))
> 
> File "c:\Python27\lib\site-packages\flask\app.py", line 1687, in wsgi_app
> response = self.full_dispatch_request()
> 
> File "c:\Python27\lib\site-packages\flask\app.py", line 1360, in full_dispatch_request
> rv = self.handle_user_exception(e)
> 
> File "c:\Python27\lib\site-packages\flask\app.py", line 1358, in full_dispatch_request
> rv = self.dispatch_request()
> 
> File "c:\Python27\lib\site-packages\flask\app.py", line 1344, in dispatch_request
> return self.view_functions[rule.endpoint](**req.view_args)
> 
> File "G:\OverAir\arduino\server.py", line 19, in light_off
> board.output([pin])
> 
> File "G:\OverAir\arduino\arduino.py", line 16, in output
> self.__sendData(len(pinArray))
> 
> File "G:\OverAir\arduino\arduino.py", line 56, in __sendData
> while(self.__getData()[0] != "w"):
> 
> File "G:\OverAir\arduino\arduino.py", line 61, in __getData
> return self.serial.readline().rstrip('\n')
> 
> File "c:\Python27\lib\site-packages\serial\serialwin32.py", line 221, in read
> if not self.hComPort: raise portNotOpenError
> 
> ValueError: Attempting to use a port that is not open 
> ```
> 
> 更新
> 
> 下面@Blender 答案中的代码可能是正确的。我现在遇到的问题是我收到 **“SerialException：无法打开端口 COM5：[错误 5] 访问被拒绝”。**
> 
> 但是，如果我单独运行我的原始 on.py 或 off.py 脚本，它可以正常工作......我看不出新代码是如何工作的......除非它尝试打开 COM5 两次？
> 
> 结束更新

我尝试使用 Flask 运行多个 python 函数或单独的 .py 脚本；为了生成单独的 URL。只是试图打开/关闭在本地运行的 Arduino。

例如，我有 on.py 和 off.py 并想构建 sever.py。所以，当我打开 127.0.0.1:5000/on 它运行 on.py，同样 127.0.0.1:5000/off 运行 off.py，

几个小时后，我才决定将这两个.py函数都添加到server.py中，但是它当然不起作用……我想我只是不明白参数的用法。

真的提前谢谢你！

```
## Open a serial connection with Arduino.

from time import sleep
from arduino import Arduino

from flask import Flask

b = Arduino("COM5",9600)
pin = 13
num = 5

ON = Flask("Light_ON")
OFF = Flask("Light_OFF")

def LightON():
    #declare output pins as a list/tuple
    b.output([pin])
    b.setHigh(pin)
    b.close()
    return 'Light is ON'

def LightOFF():
    #declare output pins as a list/tuple
    b.output([pin])
    b.setLow(pin)
    return 'Light is OFF'

@ON.route('/ON')
@OFF.route('/OFF')

ON.run()
OFF.run()  //I know this doesn't run, just not sure how to include it. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:15:42.447

像这样的东西应该工作：

```
from arduino import Arduino
from flask import Flask

app = Flask('light_control')
board = Arduino('COM5', 9600)
pin = 13

@app.route('/on')
def light_on():
    board.output([pin])
    board.setHigh(pin)
    board.close()

    return 'Light is ON'

@app.route('/off')
def light_off():
    board.output([pin])
    board.setLow(pin)
    # board.close() ???

    return 'Light is OFF'

if __name__ == '__main__':
    app.debug = True
    app.run() 
```

# javascript - 访问输入元素错误的选择方向

> ID：14534573
> 
> 赞同：3
> 
> 时间：2013-01-26T06:38:39.487
> 
> 标签：javascript, jquery, json, cookies, jquery-cookie

我正在尝试将 Javascript Array 对象保存在 cookie 中。但由于它不能正常工作，我在 json.js 文件中找到了 stringify() 函数。以下是我的代码：

```
$(".save").on('click', function(){          
var lhb = [], csb = [], cons = [], vb = [],
      txt = $("#accordion").find('textarea').serialize(),
      lbs = $('.lh:checked').each(function(){ lhb.push($(this).val()); }),
     cbs = $(".cs:checked").each(function(){ csb.push($(this).val()); }),
     cs = $(".cons:checked").each(function(){ cons.push($(this).val()); });
     vs = $(".vul:checked").each(function() { vb.push($(this).val()); });
     scenario = { 
        "textArea" : txt
        "lbs" : lbs,
        "cbs" : cbs, 
        "cs" : cs,
        "vs" : vs
    },
    cardId = $(this).parent().get(0).id;
    save(cardId, scenario);
    retreive(cardId);
}); 
```

现在在`save`函数中，我使用 json.js 将场景转换为 JSON 对象

```
function save(cardId, formData){
    $.cookie(cardId, JSON.stringify(formData), { expires: 7, path: '/' });
} 
```

这给了我以下错误：

`Accessing selection direction on an input element that cannot have a selection.`

谁能帮我解决这个错误。我的方法是否正确将 json 数组保存到 cookie 中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:24:31.477

```
$(".save").on('click', function(){          
    var lhb = [], csb = [], cons = [], vb = [],
        txt = $("#accordion").find('textarea').val();

    $('.lh:checked').each(function(){ 
        lhb.push($(this).val()); 
    });
    $(".cs:checked").each(function(){ 
        csb.push($(this).val()); 
    });
    $(".cons:checked").each(function(){ 
        cons.push($(this).val()); 
    });
    $(".vul:checked").each(function() { 
        vb.push($(this).val()); 
    });

    var scenario = { 
        "textArea" : txt,
        "lbs" : lhb,
        "cbs" : csb, 
        "cs" : cons,
        "vs" : vb
    }

    var cardId = $(this).parent().attr('id');

    save(cardId, scenario);
    retreive(cardId);
}); 
```

你在场景对象中有语法错误，在txt之后没有''，你也没有正确使用序列化函数，以及场景对象中的错误分配

# java - java代码中的PDF生成问题

> ID：14534575
> 
> 赞同：0
> 
> 时间：2013-01-26T06:38:43.097
> 
> 标签：java, pdf, soap

我在 Soap 响应消息中收到一个 PDF 附件。我需要从中生成一个 PDF。但是，生成的 PDF 格式如下：

```
%PDF-1.4
%
2 0 obj
<</Type/XObject/ColorSpace/DeviceRGB/Subtype/Image/BitsPerComponent 8/Width
278/Length 7735/Height 62/Filter/DCTDecode>>stream 
```

我该如何解决这个问题？

这是显示我如何将 PDF 作为附件嵌入的代码：

```
message = messageFactory.createMessage();
SOAPBody body = message.getSOAPBody();
header.detachNode();
AttachmentPart attachment1 = message.createAttachmentPart();
fr = new FileReader(new File(pathName));
br = new BufferedReader(fr);
String stringContent = "";
line = br.readLine();
while (line != null) {
    stringContent = stringContent.concat(line);
    stringContent = stringContent.concat("\n");
    line = br.readLine();
}
fr.close();
br.close();
attachment1.setMimeHeader("Content-Type", "application/pdf");
attachment1.setContent(stringContent, "application/pdf"); 
```

下面的代码描述了我如何从 SOAP 消息中获取 PDF：

```
Object content = attachment1.getContent();
writePdf(content);

private void writePdf(Object content) throws IOException, PrintException,
        DocumentException {
    String str = content.toString();
    //byte[] b = Base64.decode(str);
    //byteArrayToFile(b);
    OutputStream file = new FileOutputStream(new File
            (AppConfig.getInstance().getConfigValue("webapp.root") +
            File.separator + "temp" + File.separator + "hede.pdf"));
    //String s2 = new String(bytes, "UTF-8");
    //System.out.println("S2::::::::::"+s2);
    Document document = new Document();
    PdfWriter.getInstance(document, file);

    document.open();
    document.add(new Paragraph(str));
    document.close();
    file.close();
} 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:41:20.117

提供的代码中有几个错误：

在*显示如何将 pdf 作为附件嵌入的代码中，*您使用 a `Reader`（包含`FileReader`在 a 中`BufferedReader`）读取文件以逐行附加，将这些行与 using`\n`作为分隔符连接起来，并将连接的结果作为附件发送“应用程序/pdf”类型的内容。

这是您可以考虑用于文本文件的过程（即使它在那里也不是一个好的选择），但是像这样读取的二进制文件最有可能被破坏而无法修复（并且 PDF**是**二进制文件，尽管它们处于早期阶段将它们作为文本处理的历史是非常无害的）：

*   读取文件时，a`Reader`根据某种字符编码解释其中的字节（因为这里没有明确给出，很可能使用平台默认编码）将它们转换为收集在 a 中的 Unicode 字符`String`。已经在这里很可能二进制数据已损坏。
*   使用时，`readLine`您会阅读这些 Unicode 字符，直到`Reader`识别出换行符。*一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。*（Java API 源 JavaDocs）。当您继续使用`\n`作为分隔符统一连接这些行时，您实际上将所有单个回车符和所有回车 - 换行符对替换为单个换行符，从而进一步损坏二进制数据。
*   当您制作附件 API 时，您使用将此字符串编码为某些附件部分的内容，使其将您的 Unicode 字符转换回字节。如果偶然假设与 Reader 之前相同的字符编码，这可能会治愈当时造成的一些损害，但肯定不是全部，并且中间步骤的换行解释当然也没有治愈。如果使用不同的编码，数据会再次损坏。

因此，请检查您的 AttachmentPart.setContent 方法接受哪些其他参数，选择不会损坏二进制文件的参数（例如 InputStreams、ByteBuffers、byte[]、...）并使用它，例如 FileInputStream。

*描述如何从 SOAP 消息中获取 PDF*的代码甚至更奇怪......您假设附件内容的 toString 返回一些有意义的字符串表示（这里不太可能），然后继续**创建**一个包含该字符串表示的新 PDF作为 PDF 的第一段也是唯一一段的文本内容。因此，虽然您上面讨论的附件创建代码至少“仅”损坏了 PDF，但您的附件检索代码完全忽略了附件的性质并将其破坏得面目全非。

相反，您应该检查内容对象的实际类型，根据其类型检索它保存的二进制数据，并使用 FileOutputStream 存储该内容（不是 Writer，并且不使用其间的字符串，并且不通过 'line' 复制 'line' '）。

无论来源给您的印象是您的代码适合该任务......好吧，要么您完全误解了它，要么您应该从现在开始避开它。

# imap - 与服务器同步基本 IMAP 客户端

> ID：14534578
> 
> 赞同：0
> 
> 时间：2013-01-26T06:39:35.090
> 
> 标签：imap

我正在编写一个简单的 IMAP 客户端，它将能够与任何 Google 电子邮件帐户同步。我不想每次同步时都阅读服务器上的整组消息头，以确保不会错过任何内容。我宁愿不必这样做，而是依赖某些确保总订单的领域。例如，我更愿意依赖谷歌扩展的消息 ID 字段，甚至只是依赖于 Receieved-Date 并且我的逻辑是：“继续向后阅读，直到你遇到以前阅读过的内容”。但很可惜，事情似乎没有那么简单。

什么是同步的首选方式，这样它既有效（就时间+带宽而言）又保证（即没有丢失的消息）？

谢谢！

# php - 多子域会话

> ID：14534581
> 
> 赞同：0
> 
> 时间：2013-01-26T06:40:09.353
> 
> 标签：php, session

[编辑解决]

好的问题解决了！对于 debian 用户，您需要编辑带有默认配置的 /etc/php5/apache2/conf.d/suhoshin.ini，如下所示： suhosin.session.cryptua = on suhosin.session.cryptdocroot = on 只需将这两个选项关闭suhosin.session.cryptua = off suhosin.session.cryptdocroot = off 重启你的 apache 服务器

[结束编辑]

我有 2 个应用程序：app1.domain.ltd app2.domain.ltd，/home/www/app1 和 /home/www/app2 在同一台服务器上。app1/index.php：

```
<?php
ini_set('session.cookie_domain', '.domain.ltd'); 
session_name('mysession');
session_start();
if (!isset($_SESSION['data'])) $_SESSION['data'] = time();
echo session_id();
var_dump($_SESSION);
?> 
```

app2/index.php

```
<?php
ini_set('session.cookie_domain', '.domain.ltd'); 
session_name('mysession');
session_start();
echo session_id(); //same id as app1
var_dump($_SESSION); //session is empty 
?> 
```

我首先调用 app1/index.php（多次调用将在会话中保留相同的数据），然后当我调用 app2/index.php 我的会话是空的，即使我回到 app1/index.php 它也会重新生成数据随着新的时间...

PHP 版本 5.3.3-7+squeeze14 Apache 版本 Apache/2.2.16 (Debian)

会话设置-> [http://img211.imageshack.us/img211/1748/sessioninfoya3.png](http://img211.imageshack.us/img211/1748/sessioninfoya3.png)

想知道是什么原因造成的，我累了吗？o_O 任何帮助将不胜感激。

顺便说一句：我正在使用此代码进行调试，它会打印除会话内容之外的所有相同信息：

```
echo '<pre>';
echo '------ACTIVE SESSION :---------<br>';
echo 'SESSION SAVE PATH : '.session_save_path().'<br>';
echo 'COOKIE PARAMS : ';
var_dump(session_get_cookie_params());
echo 'SESSION NAME : '.session_name().'<br>';
echo 'SESSION SSID : '.session_id()  .'<br>';
var_dump($_SESSION);
echo '----------- END ---------<br><hr>';
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:50:12.917

更改 session_name('my_session'); 不一样的

# php - 通过拖放将声音分配给元素

> ID：14534582
> 
> 赞同：0
> 
> 时间：2013-01-26T06:40:25.420
> 
> 标签：php, javascript, jquery, html, css

我有一个有趣的想法（值得商榷）。基本上我想用jQuery 和键盘制作一个类似于[https://www.youtube.com/watch?v=3vC5TsSyNjU的节拍垫。](https://www.youtube.com/watch?v=3vC5TsSyNjU)

将声音分配给键盘上的键并不难。

```
<script type="text/javascript" src="js/jquery.playSound.js"></script>   
<script type="text/javascript" src="js/jquery.hotkeys.js"></script> 

<script type="text/javascript">

$(document).ready(function(){

        jQuery(document).bind(
            'keydown', 
            'q',
            function(ect){
                $.playSound('tracks/basses/bass01.ogg');
            });

        jQuery(document).bind(
            'keydown', 
            'w',
            function(ect){
                $.playSound('tracks/drums/clap04.ogg');
            });         

        jQuery(document).bind(
            'keydown', 
            'e',
            function(ect){
                $.playSound('tracks/beats/rave_hihat02.ogg');
            });

        jQuery(document).bind(
            'keydown', 
            'r',
            function(ect){
                $.playSound('tracks/4.wav');
            });

}); // End
</script> 
```

如何将声音拖放到键盘上的某个键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:56:08.880

好的，我明白你的问题。这是我将继续的方式：

```
function drawImage(e) {    
    e = e || window.event;   

    if (e.keyCode == 13) {           
       if (counter < images.length) {            
            counter ++;

           if(playable) {
               audio.src = sounds[counter-1];
               audio.controls = false;
               audio.load();
               audio.play();
           }

           var img = new Image();
           img.src = images[counter-1];
           img.onload = function() {
                ctx.drawImage(img, 0, 0, WIDTH, HEIGHT); 

           }
      }
    }
} 
```

首先，您需要为每个按下的键分配一个存储到数组中的音频文件。您可以从 html 标记创建音频，但这种方式更优雅。所以我会坚持这种方式。然后对于每个按键，关联来自相应音频阵列的音频。在我的示例中，我使用画布将图像关联到音频文件。然而，这仅用于视觉外观。请注意，为简单起见，我只使用了`Enter`密钥。每按一次键，您将听到另一次哔声。

您必须考虑的另一件事是使用测试用例，因为并非每个浏览器都可以播放音频。您可以测试浏览器是否支持音频，如下所示：

```
var audio = document.createElement('audio');
var canPlay = !!(audio.canPlayType && audio.canPlayType('audio/mpeg;').replace(/no/, ''));
var playable = canPlay ? true : false; 
```

如果不是，您可以使用回退到 flash： [在 HTML 5 中单击图像时添加声音](https://stackoverflow.com/questions/12634862/adding-sound-on-clicking-a-image-in-html-5/12635093#12635093)

示例：http: [//jsfiddle.net/N9Q6S/1/](http://jsfiddle.net/N9Q6S/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:54:11.640

这是我用的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>hello</title>

<script type="text/javascript" src="js/jquery-1.7.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.8.23.min.js"></script>   
<script type="text/javascript" src="js/jquery.hotkeys.js"></script> 

<link rel="stylesheet" href="" />
<style>

.key{
    width: 50px;
    height: 50px;
    border: solid 1px #000;
}

.song{
    width: 50px;
    height: 50px;
    border: solid 1px #f0f;
    float: right;
}

</style>
<script src=""></script>

<script type="text/javascript">

$(document).ready(function(){

    $( ".song" ).draggable();

    $( ".key" ).droppable({
        drop: function( event, ui ) {
            $( this )
        var title = ui.draggable.attr('title');
                $(this).attr({
                    //text: 'Beijing Brush Seller',
                    title: title,
                });
                    //alert("Dropped!");
        }
    });

    $(this).bind(
        'keydown', 
        'q',
        function(ect){
            var track = $('.key').attr("title");
            //alert(track);
            var snd = new Audio(track); // buffers automatically when created
            snd.play();
    });

    $(this).bind(
        'keydown', 
        'w',
        function(ect){
            var track = $('.key').attr("title");
            //alert(track);
            var snd = new Audio(track); // buffers automatically when created
            snd.play();
    });

    $(this).bind(
        'keydown', 
        'a',
        function(ect){
            var track = $('.key').attr("title");
            //alert(track);
            var snd = new Audio(track); // buffers automatically when created
            snd.play();
    });

}); // End
</script>

<style type="text/css">

</style>
</head>
<body>

<div class="key" title="">Key</div>

<div class="song" id="" title="tracks/basses/bass01.ogg">Song</div>
<div class="song" id="" title="tracks/bassloopes/rave_bass01.ogg">Song</div>
<div class="song" id="" title="tracks/basses/synth_acid02.ogg">Song</div>
</body>
</html> 
```

# macos - 在 Mac OS X 上将 GCC 版本更改为 4.7

> ID：14534584
> 
> 赞同：8
> 
> 时间：2013-01-26T06:40:37.713
> 
> 标签：macos, gcc, g++

在 OS X 上，我目前安装了几个版本的 gcc。每当我使用`gcc -v`or`g++ -v`时，它都会告诉我：`gcc version 4.2.1`. 不过，为了利用 C++11，我已经安装了 gcc 4.7。如何更改它以使 gcc/g++ 指向 4.7 而不是 4.2.1？

编辑：我有自制软件，而不是 macports。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-10T00:15:56.307

我认为你可以做这样的事情。去`/usr/bin`

假设您已经在 Mavericks 中安装了`gcc-4.7`using home brew。然后输入：

```
cd /usr/bin
sudo mv gcc gcc_mavs
sudo ln -s /usr/local/Cellar/gcc48/4.7.0/bin/gcc-4.7 gcc 
```

在这个类型之后验证你是否选择了正确的 gcc 编译器。

`gcc -v`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T06:48:21.683

如果我们不知道其他安装的完整路径，这是一个棘手的问题。`.profile`但基本上你可以在本地用户设置中更改 $PATH 顺序。因此，假设您的 4.7 安装已安装，并且`/usr/local/bin/`我们知道 Apple 默认版本已安装，然后按照$PATH 顺序`/usr/bin/`编辑您的安装。`.profile``/usr/local/bin/``/usr/bin/`

默认应该是这样的：

> 导出 PATH=/usr/bin: **/usr/local/bin** :[etc, etc, etc]

调整后应该是这样的：

> 导出 PATH= **/usr/local/bin** :/usr/bin:[etc, etc, etc]

有一种方法可以强制所有用户在系统范围内进行这种更改，但我不建议这样做。不要乱用 Apple 实现 *nix 环境的更深层次（通常是非标准）的方式。将其保留在您的用户本地。

**编辑：** [查看此处的讨论](https://stackoverflow.com/questions/837992/update-gcc-on-osx)，看看提供的任何解决方案是否可以帮助您。`gcc_select`通过 MacPorts安装似乎是最干净的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T03:39:43.997

我在网上找到了一个很好的教程。虽然它有点旧（描述了 gcc 3.2 的过程），但仍然可以使用相同的通用方法 [http://www-numi.fnal.gov/offline_software/srt_public_context/WebDocs/install_gcc.html](http://www-numi.fnal.gov/offline_software/srt_public_context/WebDocs/install_gcc.html)

# loops - 在verilog中实现闭环

> ID：14534595
> 
> 赞同：0
> 
> 时间：2013-01-26T06:42:49.390
> 
> 标签：loops, verilog

我试图在不使用verilog中的循环指令的情况下实现一个循环，所以我制作了一个计数器模块并且模拟进行得很完美，但是当我尝试在FPGA上实现它时，我在映射中遇到了很多错误，比如这个

```
ERROR:MapLib:979 - LUT4 symbol
"Inst_Count/Mcompar_GND_1105_o_xcount[7]_LessThan_25_o_lut<0>" (output
signal=Inst_Count/Mcompar_GND_1105_o_xcount[7]_LessThan_25_o_lut<0>) has
input signal "Inst_Count/Madd_x[9]_GND_1105_o_add_0_OUT_cy<0>" which will be
trimmed. See Section 5 of the Map Report File for details about why the input
signal will become undriven. 
```

这些错误只发生在我用循环指令模块替换这个模块时，所以没有人知道这个有什么问题吗？

感谢您抽出宝贵的时间 :)

```
module average( input rst , output reg [7:0]
reg [7:0] count;
reg [7:0] prv_count;

reg clk;

initial
begin

count = 8'd0;

end

always @ (posedge rst)
begin

clk = 1'b0;

end

always @ (clk)
begin

prv_count = count ;
count = prv_count + 1'b1;

end

always @ (count)
begin

if (count == 8'd255)
G_count= count;
else
begin

clk = ~clk;
G_count= count;

end

end
endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T06:58:57.157

哦，这完全是错误的。如果不给您讲授 Verilog，我真的不认为任何人都可以在这里提供帮助，但是......一些立即引人注目的事情是：

1.  您的模块参数列表中有一个明显的语法错误，您没有将其关闭（即`)`丢失）。
2.  时钟应该是模块的输入。即使您仅依赖复位输入并将寄存器用作“时钟”，它也不起作用（从逻辑上讲，您有必须打破的组合循环，否则......）。
3.  不要在应该可综合的代码中使用初始块。
4.  `prv_count`没用。
5.  无需手动处理溢出（检查 255？`8'd255`准确无误`8'b11111111`，如果添加 1'b1 等，它将重置为 0）。

还有很多其他的事情，这引发了一个明显的问题——你是否尝试过阅读一些关于 Verilog 的书籍，最好是那些涵盖语言可合成部分的书籍？:) 无论如何，您正在尝试做的事情（据我所知）可能看起来像这样：

```
module average(input clk, input rst, output reg [7:0] overflow_count);
   reg [7:0] count;

   always @(posedge clk or negedge rst) begin
      if (~rst) begin
         count <= 8'b0;
         overflow_count <= 8'b0;
      end else begin
         count <= (count + 1'b1);
         if (count == 8'b0)
           overflow_count <= (overflow_count + 1'b1);
      end
   end
endmodule 
```

希望它有所帮助，并且真的建议您看一些关于 HDL 的好书。

# c++ - 在本机函数中中断 v8 脚本的执行

> ID：14534600
> 
> 赞同：1
> 
> 时间：2013-01-26T06:43:42.007
> 
> 标签：c++, v8, spidermonkey

我使用来自 C++ 程序的 v8 和 spidermonkey。在 spidermonkey 中，很容易停止执行，您只需在 C++ 中实现的任何本机方法中返回 FALSE。但我看不到如何在 v8 中做同样的事情。

```
Handle<Value> enough(const v8::Arguments& a) {
    // want to tell v8, that execution is not needed to continue.
    return v8::Undefined();
} 
```

也许返回特定的东西，或者设置一些变量，或者调用 v8 函数，或者发送消息，或者抛出和异常，你知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:26:39.487

在这种情况下，我不确定您所说的“中断”是什么意思。但我会试一试我的回答：

您可以在 ( `return v8::False()`) 早期从 C++ 函数返回一个值，以跳过同一函数内其他代码的执行，或者使用`v8::ThrowException(...)`.

你可以使用`v8::V8::TerminateExecution()`. 这将终止当前隔离/线程中的执行。v8 这样做的方式是抛出一个无法捕获的异常（在 JavaScript 领域）。您仍然可以使用`v8::TryCatch`来处理 C++ 代码的终止。

# ios - 如何像iOS Music App TableView一样将UITableView分成三部分？

> ID：14534601
> 
> 赞同：0
> 
> 时间：2013-01-26T06:44:02.807
> 
> 标签：ios, cocoa-touch, uitableview

我想像`UITableView`iOS Music App`TableView`一样分为三个部分，如下图所示

![在此处输入图像描述](../Images/74f71bdca38280295cb51da5571e6b40.png)

我想像上面的图像那样划分`UITableView`。

我怎样才能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:51:08.130

> 制作自定义单元格，在该自定义单元格中放置一个具有三个 imageViews 的视图，以使其看起来像上述设计的方式设置图像。为左、中、右创建 3 个图像。

leftImage 必须在右侧有边框线才能将其视为垂直线，而 rightImage 必须在左侧有边框线才能将其视为垂直线，或者只需创建一个两侧都有边框的中心图像。

对于水平线，您可以简单地使用默认单元格分隔符。如果没有，则将单元格分隔符设置为无，并在 3 个具有顶部或底部边框线的图像上方设计。

您可以简单地通过情节提要设计它并将您的自定义单元格文件名分配给 TableViewCell。您可以像下面在评论中给出的链接一样设计自定义单元格

# javascript - 单击功能在html文件中不起作用

> ID：14534602
> 
> 赞同：0
> 
> 时间：2013-01-26T06:44:13.410
> 
> 标签：javascript, html

我正在尝试通过单击 html 文件中的图像发送电子邮件，但它在文件中不起作用，我正在使用单个图像在单独的文件中执行相同的操作，然后它正在工作。这是我在 html 中调用代码的地方

```
 <div class="root_panel_img"><img src="images/main_button.png" id="commandEmail1" /></div> 
```

[http://codepad.org/jFrQTVrM](http://codepad.org/jFrQTVrM)

这是javascript文件

[http://codepad.org/aagrAjNs](http://codepad.org/aagrAjNs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:52:59.710

```
 $(document).ready(function(){
      $("#commandEmail1").click(function() {
            ......
            ......

            "You can test this if it is working or not by putting an alert("OK") message."
      });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:11:27.600

所以根据提供的代码，以下不起作用？

```
$("#commandEmail2").click(function() {
    presenter.command("emailSend",{
        "toEmail": "debug@orchard.net.au",
        "toName": "Debug",
        "subject": "Presenter Library Test",
        "body": "Dual Attachment",
        "bodyHtml": "<h1>Dual Attachment</h1>",
        "attachments": ["/pdf/ip6.pdf","/pdf/docs.pdf"]
    }, status);
    return false;
}); 
```

这行得通吗？

```
$("#commandEmail2").click(function() {
    alert("this works");
    return false;
}); 
```

如果是这样，那么presenter.command 中的某些内容会失败，那就是您尚未发布的代码。

# c# - 解析 XML 的有效方法

> ID：14534609
> 
> 赞同：3
> 
> 时间：2013-01-26T06:45:59.110
> 
> 标签：c#, .net, xml, linq-to-xml

我发现确定解析某些 XML 的最佳方法令人费解。似乎它们有很多可能的方法，但没有一个真正吸引我。

我目前的尝试看起来像这样：

```
XElement xelement = XElement.Parse(xmlText);
var name = xelement.Element("Employee").Attribute("name").Value; 
```

所以，这行得通。但如果缺少“Employee”元素或“name”属性，则会引发异常。我不想抛出异常。

探索一些[在线可用的示例](http://www.dotnetcurry.com/ShowArticle.aspx?ID=564)，我看到如下代码：

```
XElement xelement = XElement.Load("..\\..\\Employees.xml");
IEnumerable<XElement> employees = xelement.Elements();
Console.WriteLine("List of all Employee Names :");
foreach (var employee in employees)
{
    Console.WriteLine(employee.Element("Name").Value);
} 
```

这似乎会遇到完全相同的问题。如果“名称”元素不存在，则`Element()`返回`null`并且调用该`Value`属性时出错。

我需要一些块，比如上面的第一个代码片段。是否有一种简单的方法可以让它工作并且如果缺少某些数据而不抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:06:58.343

在这种情况下，我经常使用扩展方法，因为即使引用为空，它们也能正常工作。我使用了 Anders Abel 在 2012 年初发表的非常好的博客文章“[使用扩展方法处理空](http://coding.abel.nu/2012/02/null-handling-with-extension-methods/)值”中的扩展方法的略微修改版本：

```
public static class XElementExtension
{
    public static string GetValueOrDefault(this XAttribute attribute,
                                           string defaultValue = null)
    {
        return attribute == null ? defaultValue : attribute.Value;
    }

    public static string GetAttributeValueOrDefault(this XElement element,
                                                    string attributeName, 
                                                    string defaultValue = null)
    {
        return element == null ? defaultValue : element.Attribut(attributeName)
                                                .GetValueOrDefault(defaultValue);
    }
} 
```

如果要在元素或属性不存在时返回“null”：

```
var name = xelement.Element("Employee")
                   .GetAttributeValueOrDefault("name" ); 
```

如果要在元素或属性不存在时返回默认值：

```
var name = xelement.Element("Employee")
                    .GetAttributeValueOrDefault("name","this is the default value"); 
```

在你的 for 循环中使用：

```
XElement xelement = XElement.Load("..\\..\\Employees.xml");
IEnumerable<XElement> employees = xelement.Elements();
Console.WriteLine("List of all Employee Names :");
foreach (var employee in employees)
{
    Console.WriteLine(employee.GetAttributeValueOrDefault("Name"));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T08:29:10.187

您可以使用从`XAttribute`to的显式字符串转换`string`（如果操作数为 null，则返回 null）和`FirstOrDefault`方法的组合：

```
var name = xelement.Elements("Employee")
                   .Select(x => (string) x.Attribute("name"))
                   .FirstOrDefault(); 
```

如果没有这样的元素（因为序列将为空，并且`FirstOrDefault()`将返回 null）或者有一个没有该属性的元素（在这种情况下，您将获得一个带有 null 元素的序列，`FirstOrDefault`它将返回），则该元素将为 null。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T16:23:49.757

你总是可以使用 XPath：

```
string name = xelement.XPathEvaluate("string(Employee/@name)") as string; 
```

这将是属性的值，或者`null`是否存在`Employee`或`@name`不存在。

对于迭代示例：

```
foreach (XNode item in (IEnumerable)xelement.XPathEvaluate("Employee/Name"))
{
     Console.WriteLine(item.Value);
} 
```

`XPathEvaluate()`只会在这里选择有效的节点，所以你可以放心，它`item`总是非空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T09:42:27.077

这一切都取决于从 XML 中提取数据后要对数据执行的操作。

您最好查看为 XML 处理而设计的语言，例如 XSLT 和 XQuery，而不是使用 C# 之类的语言，这些语言不是（尽管 Linq 为您提供了一些混合的东西）。使用 C# 或 Java，您总是需要做很多工作来应对 XML 如此灵活的事实。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T16:16:38.030

使用本**机 XmlReader**。如果您的问题是读取大型**XML**文件而不是允许**XElement**构建对象表示，您可以构建类似**Java SAX**解析器的东西，它只流式传输**XML**。

**例如： http:** [//www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c4221/Writing-XML-SAX-Parsers-in-C.htm](http://www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c4221/Writing-XML-SAX-Parsers-in-C.htm)

# javascript - 如何在 GWT celltable 2.3 中创建依赖下拉/选择单元格？

> ID：14534616
> 
> 赞同：3
> 
> 时间：2013-01-26T06:48:07.967
> 
> 标签：javascript, gwt, dom-events, custom-cell, gwt-celltable

我正在使用 gwt2.3 单元格表。

在我的单元格表中，有几列是依赖的。

前任。名称和地址列是依赖的名称和地址列包含我的自定义选择单元格。

在名称列中：1 个单元格包含 jon、tom、steve

当名称单元格包含乔恩时，我想在地址单元格中设置美国和英国

如果用户将名称单元更改为 tom，那么我想在地址单元中设置印度和中国

如果用户将名称单元格更改为史蒂夫，那么我想在地址单元格中设置 japana 和 bhutan

当名称单元格选择更改时，我想更改地址单元格中的相关数据。

我怎样才能做到这一点？任何示例代码或指针可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:38:01.463

此解决方案适用于 GWT 2.5，但它可能适用于 2.3。我认为最好的是在更改第一列的选择时修改 RecordInfo 元素。您可以在您的 CustomSelectionCell 中进行类似的操作：

```
@Override
public void onBrowserEvent(Context context, Element parent, C value, NativeEvent event, ValueUpdater<C> valueUpdater) {
    super.onBrowserEvent(context, parent, value, event, valueUpdater);
    if (BrowserEvents.CHANGE.equals(event.getType())) {
        Xxxxx newValue = getSelectedValueXxxxx();
        valueUpdater.update(newValue);
    }
} 
```

然后在使用单元格的地方添加一个像这样的 fieldUpdater，它将使用新值更新 RecordInfo 并要求重绘该行：

```
column.setFieldUpdater(new FieldUpdater<.....>() {
    ....
    recordInfo.setXxxxx(newValue);
    cellTable.redrawRow(index);
    ....
}); 
```

这将调用另一个 CustomSelectionCell 的渲染，在那里您将能够检查 RecordInfo 的值是否已更改并根据需要更新选择值。例子：

```
@Override
public void render(Context context, C value, SafeHtmlBuilder sb) {
    if (!value.getXxxxx().equals(this.lastValue)) {
        this.items = loadItemsForValueXxxx(value.getXxxxx());
    }
    .... // Your usual render.
} 
```

当您更改项目以设置默认选定项目时要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T10:42:12.923

这是我对 DynamicSelectionCell 的实现。

DynamicSelectionCell 允许您为同一个 GWT 表中的不同行呈现不同的选项。

使用单个 DynamicSelectionCell 对象并使用*addOption*方法为每一行添加选项。选项存储在 Map 中，其中 Key 是行号。

对于表中的每一行*$i* ，都会呈现存储在 Map 中的键*$i的选项。*

适用于 DataGrid、CellTable。

***代码***

```
public class DynamicSelectionCell extends AbstractInputCell<String, String> {

    public TreeMap<Integer, List<String>> optionsMap = new TreeMap<Integer, List<String>>();
    interface Template extends SafeHtmlTemplates {
        @Template("<option value=\"{0}\">{0}</option>")
        SafeHtml deselected(String option);

        @Template("<option value=\"{0}\" selected=\"selected\">{0}</option>")
        SafeHtml selected(String option);
    }

    private static Template template;

    private TreeMap<Integer, HashMap<String, Integer>> indexForOption = new TreeMap<Integer, HashMap<String, Integer>>();

    /**
     * Construct a new {@link SelectionCell} with the specified options.
     *
     * @param options the options in the cell
     */
    public DynamicSelectionCell() {
        super("change");
        if (template == null) {
            template = GWT.create(Template.class);
        }
    }

    public void addOption(List<String> newOps, int key){
        optionsMap.put(key, newOps);
        HashMap<String, Integer> localIndexForOption = new HashMap<String, Integer>();
        indexForOption.put(ind, localIndexForOption);
        refreshIndexes();
    }

    public void removeOption(int index){        
        optionsMap.remove(index);
        refreshIndexes();
    }

    private void refreshIndexes(){
        int ind=0;
        for (List<String> options : optionsMap.values()){
            HashMap<String, Integer> localIndexForOption = new HashMap<String, Integer>();
            indexForOption.put(ind, localIndexForOption);
            int index = 0;
            for (String option : options) {
                localIndexForOption.put(option, index++);
            }
            ind++;
        }
    }

    @Override
    public void onBrowserEvent(Context context, Element parent, String value,
            NativeEvent event, ValueUpdater<String> valueUpdater) {
        super.onBrowserEvent(context, parent, value, event, valueUpdater);
        String type = event.getType();
        if ("change".equals(type)) {
            Object key = context.getKey();
            SelectElement select = parent.getFirstChild().cast();
            String newValue = optionsMap.get(context.getIndex()).get(select.getSelectedIndex());
            setViewData(key, newValue);
            finishEditing(parent, newValue, key, valueUpdater);
            if (valueUpdater != null) {
                valueUpdater.update(newValue);
            }
        }
    }

    @Override
    public void render(Context context, String value, SafeHtmlBuilder sb) {
        // Get the view data.
        Object key = context.getKey();
        String viewData = getViewData(key);
        if (viewData != null && viewData.equals(value)) {
            clearViewData(key);
            viewData = null;
        }

        int selectedIndex = getSelectedIndex(viewData == null ? value : viewData, context.getIndex());
        sb.appendHtmlConstant("<select tabindex=\"-1\">");
        int index = 0;
        try{
        for (String option : optionsMap.get(context.getIndex())) {
            if (index++ == selectedIndex) {
                sb.append(template.selected(option));
            } else {
                sb.append(template.deselected(option));
            }
        }
        }catch(Exception e){
            System.out.println("error");
        }
        sb.appendHtmlConstant("</select>");
    }

    private int getSelectedIndex(String value, int ind) {
        Integer index = indexForOption.get(ind).get(value);
        if (index == null) {
            return -1;
        }
        return index.intValue();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T00:27:21.737

Varun Tulsian 的回答很好，但是代码不完整。

DynamicSelectionCell 将每行的选项存储在地图中。当单元格更新或呈现自身时，它会将 Context 中的行索引与地图中匹配的行列表匹配。

对于后代，请参阅下面的简化和更新版本：

```
public class DynamicSelectionCell extends AbstractInputCell<String, String> {

interface Template extends SafeHtmlTemplates {
    @Template("<option value=\"{0}\">{0}</option>")
    SafeHtml deselected(String option);

    @Template("<option value=\"{0}\" selected=\"selected\">{0}</option>")
    SafeHtml selected(String option);
}

private static Template template;

/**
 *  key: rowIndex
 *  value: List of options to show for this row
 */
public TreeMap<Integer, List<String>> optionsMap = new TreeMap<Integer, List<String>>();

/**
 * Construct a new {@link SelectionCell} with the specified options.
 *
 */
public DynamicSelectionCell() {
    super("change");
    if (template == null) {
        template = GWT.create(Template.class);
    }
}

public void addOptions(List<String> newOps, int rowIndex) {
    optionsMap.put(rowIndex, newOps);
}

public void removeOptions(int rowIndex) {
    optionsMap.remove(rowIndex);
}

@Override
public void onBrowserEvent(Context context, Element parent, String value,
                           NativeEvent event, ValueUpdater<String> valueUpdater) {
    super.onBrowserEvent(context, parent, value, event, valueUpdater);
    String type = event.getType();
    if ("change".equals(type)) {
        Object key = context.getKey();
        SelectElement select = parent.getFirstChild().cast();
        String newValue = optionsMap.get(context.getIndex()).get(select.getSelectedIndex());
        setViewData(key, newValue);
        finishEditing(parent, newValue, key, valueUpdater);
        if (valueUpdater != null) {
            valueUpdater.update(newValue);
        }
    }
}

@Override
public void render(Context context, String value, SafeHtmlBuilder sb) {
    // Get the view data.
    Object key = context.getKey();
    String viewData = getViewData(key);
    if (viewData != null && viewData.equals(value)) {
        clearViewData(key);
        viewData = null;
    }

    int selectedIndex = getSelectedIndex(viewData == null ? value : viewData, context.getIndex());
    sb.appendHtmlConstant("<select tabindex=\"-1\">");
    int index = 0;
    try {
        for (String option : optionsMap.get(context.getIndex())) {
            if (index++ == selectedIndex) {
                sb.append(template.selected(option));
            } else {
                sb.append(template.deselected(option));
            }
        }
    } catch (Exception e) {
        System.out.println("error");
    }
    sb.appendHtmlConstant("</select>");
}

private int getSelectedIndex(String value, int rowIndex) {
    if (optionsMap.get(rowIndex) == null) {
        return -1;
    }
    return optionsMap.get(rowIndex).indexOf(value);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T21:23:42.673

或者您可以执行创建自定义单元格之类的操作，其中包含可以在该特定列的 getValue 中调用的方法

说

```
final DynamicSelectionCell selection = new DynamicSelectionCell("...");
    Column<GraphFilterCondition, String> operandColumn=new Column<GraphFilterCondition, String>(selection) {
        @Override
        public String getValue(FilterCondition object) {
            if(object.getWhereCol()!=null){
                 ((DynamicSelectionCell)this.getCell()).addOptions(new String[]{">","<",">="});
            }
            if(object.getWhereCondition()!=null){
                return object.getWhereCondition().getGuiName();
            }
            return "";
        }
    }; 
```

我猜这应该可行。

还要检查这个[其他](https://stackoverflow.com/questions/4565790/how-to-dynamically-update-the-choices-in-a-selectioncell-using-gwt)问题

# php - php文件函数与sql

> ID：14534621
> 
> 赞同：0
> 
> 时间：2013-01-26T06:48:44.647
> 
> 标签：php, sql, scalability

我正在为一家拥有大约 25 名员工的企业编写几个小型 PHP 应用程序。我目前正在使用 PHP 文件函数来存储日常条目的数据，以跟踪工人的生产力。然而，我工作的公司在全球设有办事处，并且考虑到我可能需要为数千名员工扩展这些应用程序，我想知道使用文件函数与使用 SQL 存储用户是否存在重大缺陷数据。我知道一般来说 SQL 使用的资源比 php 更有效，但是如果我不是在任何时候或为任何一个人存储大量数据，性能上会有显着差异吗？还有其他我应该关注的潜在问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:53:17.980

将文件用于数据存储绝对有很大的缺点。所有主要的 DBM 都为您提供搜索、以某种方式复制、正交存储数据的能力等。所有这些都让您除了表定义和查询之外什么都不写。没有代码来管理信息文件或担心竞争条件。

如果您在 Windows 上，WampServer 将为您提供准备就绪的 Apache、PHP 和 MySQL。PostgreSQL 也可以被替换，但这是额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:56:38.920

使用文件存储数据是个坏主意。

现在对你来说很好。因为您有 25 个用户，每天都会有 25 个条目。

想想未来，可能是2年

```
25 * 2 * 365  (25 can increase in 2 years) 
```

再一次，稍后您要生成报告。一个用户的表现，你会怎么看。您将编写多少代码来解析文件？

`Mysql`您将获得很多选项，例如每日报告，每月报告，每个人报告等，只需一些简单的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:20:35.267

无论是 1 名员工、25 名员工还是 25,000 名员工，都没有关系。要走的路始终是 SQL。事实上，编写平面文件将比在现实中使用 sql 困难得多，因为使用 SQL，您可以自由选择所有层的第三方供应商，无论是数据层、应用程序层还是后端层。一个为 20,000 人编写的软件除了 20,000 名员工基础软件中投入的硬件资源量可能会高出 100 倍，当然还会有其他功能，例如多个服务器节点、链接事件处理程序和复制数据库服务器以最大化资源，但该层将位于已编写的软件之上，并且会在非常小的程度上影响您的软件编码，

# android - 裁剪图像后如何获得正确的路径？

> ID：14534625
> 
> 赞同：12
> 
> 时间：2013-01-26T06:49:40.357
> 
> 标签：android, image, imageview, android-imageview, crop

我想裁剪捕获/选定的图像并将其上传到服务器。

我面临什么问题：裁剪图像后，我没有得到该裁剪图像的实际路径。我已经按照以下方式完成了我的代码。我正在正确裁剪图像，这里一切正常，但 imageview 不显示原始图像而不是裁剪图像。

但是，当我在 `Bitmap photo = extras.getParcelable("data");`内部获取位图时，`onActivityResult()`我会在 imageview 中显示裁剪图像。但无法获得该裁剪图像的绝对路径。

任何人都可以请指导我我缺乏的地方。我尝试了许多 SO 链接，但无法为我的问题找到确切的解决方案。

这是我的代码：

```
public class MainActivity extends Activity {
    private Uri mImageCaptureUri;
    private ImageView mImageView;

    private static final int PICK_FROM_CAMERA = 1;
    private static final int CROP_FROM_CAMERA = 2;
    private static final int PICK_FROM_FILE = 3;

    private String selectedImagePath = "";
    boolean GallaryPhotoSelected = false;

    public static String Finalmedia = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        final String[] items = new String[] { "Take from camera",
                "Select from gallery" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.select_dialog_item, items);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("Select Image");
        builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) { // pick from
                                                                    // camera
                if (item == 0) {
                    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                    mImageCaptureUri = Uri.fromFile(new File(Environment
                            .getExternalStorageDirectory(), "tmp_avatar_"
                            + String.valueOf(System.currentTimeMillis())
                            + ".jpg"));

                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                            mImageCaptureUri);

                    try {
                        intent.putExtra("return-data", true);

                        startActivityForResult(intent, PICK_FROM_CAMERA);
                    } catch (ActivityNotFoundException e) {
                        e.printStackTrace();
                    }
                } else { // pick from file
                    Intent intent = new Intent();

                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);

                    startActivityForResult(Intent.createChooser(intent,
                            "Complete action using"), PICK_FROM_FILE);
                }
            }
        });

        final AlertDialog dialog = builder.create();

        Button button = (Button) findViewById(R.id.btn_crop);
        mImageView = (ImageView) findViewById(R.id.iv_photo);

        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.show();
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK)
            return;

        switch (requestCode) {
        case PICK_FROM_CAMERA:
            doCrop();

            break;

        case PICK_FROM_FILE:
            mImageCaptureUri = data.getData();
            Log.i("TAG",
                    "After Crop mImageCaptureUri " + mImageCaptureUri.getPath());
            GallaryPhotoSelected = true;
            doCrop();

            break;

        case CROP_FROM_CAMERA:
            Bundle extras = data.getExtras();

            selectedImagePath = mImageCaptureUri.getPath();

            Log.i("TAG", "After Crop selectedImagePath " + selectedImagePath);

            if (GallaryPhotoSelected) {
                selectedImagePath = getRealPathFromURI(mImageCaptureUri);
                Log.i("TAG", "Absolute Path " + selectedImagePath);
                GallaryPhotoSelected = true;
            }

            Finalmedia = selectedImagePath;

            Log.i("TAG", "Finalmedia Path " + Finalmedia);

            if (extras != null) {
                Bitmap photo = extras.getParcelable("data");

                Bitmap bm = BitmapFactory.decodeFile(Finalmedia);

                mImageView.setImageBitmap(bm);
            }

            // File f = new File(mImageCaptureUri.getPath());
            //
            // if (f.exists()) f.delete();

            break;

        }
    }

    public static Bitmap decodeFile(String path) {
        int orientation;
        try {
            if (path == null) {
                return null;
            }
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 2;
            // while (true) {
            // if (width_tmp / 2 < REQUIRED_SIZE
            // || height_tmp / 2 < REQUIRED_SIZE)
            // break;
            // width_tmp /= 2;
            // height_tmp /= 2;
            // scale++;
            // }
            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            Bitmap bm = BitmapFactory.decodeFile(path, o2);
            Bitmap bitmap = bm;

            ExifInterface exif = new ExifInterface(path);

            orientation = exif
                    .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

            Log.e("ExifInteface .........", "rotation =" + orientation);

            // exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

            Log.e("orientation", "" + orientation);
            Matrix m = new Matrix();

            if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
                m.postRotate(180);
                // m.postScale((float) bm.getWidth(), (float) bm.getHeight());
                // if(m.preRotate(90)){
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                m.postRotate(90);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                m.postRotate(270);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            }
            return bitmap;
        } catch (Exception e) {
            return null;
        }

    }

    public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    private void doCrop() {
        final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");

        List<ResolveInfo> list = getPackageManager().queryIntentActivities(
                intent, 0);

        int size = list.size();

        if (size == 0) {
            Toast.makeText(this, "Can not find image crop app",
                    Toast.LENGTH_SHORT).show();

            return;
        } else {
            intent.setData(mImageCaptureUri);

            intent.putExtra("outputX", 200);
            intent.putExtra("outputY", 200);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);
            intent.putExtra("return-data", true);

            if (size == 1) {
                Intent i = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent(new ComponentName(res.activityInfo.packageName,
                        res.activityInfo.name));

                startActivityForResult(i, CROP_FROM_CAMERA);
            } else {
                for (ResolveInfo res : list) {
                    final CropOption co = new CropOption();

                    co.title = getPackageManager().getApplicationLabel(
                            res.activityInfo.applicationInfo);
                    co.icon = getPackageManager().getApplicationIcon(
                            res.activityInfo.applicationInfo);
                    co.appIntent = new Intent(intent);

                    co.appIntent
                            .setComponent(new ComponentName(
                                    res.activityInfo.packageName,
                                    res.activityInfo.name));

                    cropOptions.add(co);
                }

                CropOptionAdapter adapter = new CropOptionAdapter(
                        getApplicationContext(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Choose Crop App");
                builder.setAdapter(adapter,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int item) {
                                startActivityForResult(
                                        cropOptions.get(item).appIntent,
                                        CROP_FROM_CAMERA);
                            }
                        });

                builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel(DialogInterface dialog) {

                        if (mImageCaptureUri != null) {
                            getContentResolver().delete(mImageCaptureUri, null,
                                    null);
                            mImageCaptureUri = null;
                        }
                    }
                });

                AlertDialog alert = builder.create();

                alert.show();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T13:10:15.010

在这个问题上花了几个小时后，如果将来有人遇到这个问题，我终于可以通过下面的方式让它工作。

```
public class MainActivity extends Activity {
    private Uri mImageCaptureUri;
    private ImageView mImageView;

    private static final int PICK_FROM_CAMERA = 1;
    private static final int CROP_FROM_CAMERA = 2;
    private static final int PICK_FROM_FILE = 3;

    private String selectedImagePath = "";
    boolean GallaryPhotoSelected = false;

    public static String Finalmedia = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        final String[] items = new String[] { "Take from camera",
                "Select from gallery" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.select_dialog_item, items);
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setTitle("Select Image");
        builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) { // pick from
                                                                    // camera
                if (item == 0) {
                    String storageState = Environment.getExternalStorageState();

                    if (storageState.equals(Environment.MEDIA_MOUNTED)) {
                        Intent intent = new Intent(
                                MediaStore.ACTION_IMAGE_CAPTURE);
                        // intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,
                        // mImageCaptureUri);
                        // if (hasImageCaptureBug()) {

                        String path = Environment.getExternalStorageDirectory()
                                .getName()
                                + File.separatorChar
                                + System.currentTimeMillis() + ".jpg";
                        File file = new File(path);
                        // mImageCaptureUri = Uri.fromFile(new File(
                        // Environment.getExternalStorageDirectory(),
                        // "tmp_avatar_"
                        // + String.valueOf(System
                        // .currentTimeMillis())
                        // + ".jpg"));
                        Log.i("TAG", "Final  path" + path);
                        try {
                            if (file.exists() == false) {
                                file.getParentFile().mkdirs();
                                file.createNewFile();
                            }

                        } catch (IOException e) {
                            Log.e("TAG", "Could not create file.", e);
                        }
                        mImageCaptureUri = Uri.fromFile(file);
                        intent.putExtra(
                                android.provider.MediaStore.EXTRA_OUTPUT,
                                mImageCaptureUri);
                        // } else {
                        // intent.putExtra(
                        // android.provider.MediaStore.EXTRA_OUTPUT,
                        // android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        // }

                        try {
                            // intent.putExtra("return-data", true);
                            startActivityForResult(intent, PICK_FROM_CAMERA);
                        } catch (ActivityNotFoundException e) {
                            e.printStackTrace();
                        }
                    } else {
                        new AlertDialog.Builder(MainActivity.this)
                                .setMessage(
                                        "External Storeage (SD Card) is required.\n\nCurrent state: "
                                                + storageState)
                                .setCancelable(true).create().show();
                    }

                } else { // pick from file
                    Intent intent = new Intent();

                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);

                    startActivityForResult(Intent.createChooser(intent,
                            "Complete action using"), PICK_FROM_FILE);
                }
            }
        });

        final AlertDialog dialog = builder.create();

        Button button = (Button) findViewById(R.id.btn_crop);
        mImageView = (ImageView) findViewById(R.id.iv_photo);

        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.show();
            }
        });
    }

    public boolean hasImageCaptureBug() {

        // list of known devices that have the bug
        ArrayList<String> devices = new ArrayList<String>();
        devices.add("android-devphone1/dream_devphone/dream");
        devices.add("generic/sdk/generic");
        devices.add("vodafone/vfpioneer/sapphire");
        devices.add("tmobile/kila/dream");
        devices.add("verizon/voles/sholes");
        devices.add("google_ion/google_ion/sapphire");

        return devices.contains(android.os.Build.BRAND + "/"
                + android.os.Build.PRODUCT + "/" + android.os.Build.DEVICE);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK)
            return;

        switch (requestCode) {
        case PICK_FROM_CAMERA:
            Log.i("TAG", "Inside PICK_FROM_CAMERA");
            // mImageCaptureUri = data.getData();
            // Bitmap bm1 = (Bitmap) data.getExtras().get("data");
            // mImageView.setImageBitmap(bm1);
            // Bundle extras1 = data.getExtras();
            // Bitmap bm1 = (Bitmap) extras1.get("data");
            // mImageView.setImageBitmap(bm1);

            /*
             * try { if (hasImageCaptureBug()) { Log.i("TAG", "Inside Bug");
             * selectedImagePath = String.valueOf(System .currentTimeMillis()) +
             * ".jpg"; File fi = new File(
             * Environment.getExternalStorageDirectory(), selectedImagePath);
             * try { mImageCaptureUri = Uri
             * .parse(android.provider.MediaStore.Images.Media
             * .insertImage(getContentResolver(), fi.getAbsolutePath(), null,
             * null)); if (!fi.delete()) { Log.i("logMarker",
             * "Failed to delete " + fi); } } catch (FileNotFoundException e) {
             * e.printStackTrace(); } } else { mImageCaptureUri =
             * data.getData(); } } catch (Exception e) { Log.i("TAG",
             * "Inside Bug"); selectedImagePath =
             * String.valueOf(System.currentTimeMillis()) + ".jpg"; File fi =
             * new File(Environment.getExternalStorageDirectory(),
             * selectedImagePath); try { mImageCaptureUri = Uri
             * .parse(android.provider.MediaStore.Images.Media
             * .insertImage(getContentResolver(), fi.getAbsolutePath(), null,
             * null)); if (!fi.delete()) { Log.i("logMarker",
             * "Failed to delete " + fi); } } catch (FileNotFoundException e1) {
             * e1.printStackTrace(); } }
             */

            String path = mImageCaptureUri.getPath();
            Log.i("TAG",
                    "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!After capture path "
                            + path);

            doCrop();

            break;

        case PICK_FROM_FILE:
            mImageCaptureUri = data.getData();
            Log.i("TAG",
                    "After Crop mImageCaptureUri " + mImageCaptureUri.getPath());
            GallaryPhotoSelected = true;
            doCrop();

            break;

        case CROP_FROM_CAMERA:
            Bundle extras = data.getExtras();

            selectedImagePath = mImageCaptureUri.getPath();

            Log.i("TAG", "After Crop selectedImagePath " + selectedImagePath);

            if (GallaryPhotoSelected) {
                selectedImagePath = getRealPathFromURI(mImageCaptureUri);
                Log.i("TAG", "Absolute Path " + selectedImagePath);
                GallaryPhotoSelected = true;
            }

            Finalmedia = selectedImagePath;

            if (extras != null) {
                // Bitmap photo = extras.getParcelable("data");
                Log.i("TAG", "Inside Extra " + selectedImagePath);
                Bitmap photo = (Bitmap) extras.get("data");

                selectedImagePath = String.valueOf(System.currentTimeMillis())
                        + ".jpg";

                Log.i("TAG", "new selectedImagePath before file "
                        + selectedImagePath);

                File file = new File(Environment.getExternalStorageDirectory(),
                        selectedImagePath);

                try {
                    file.createNewFile();
                    FileOutputStream fos = new FileOutputStream(file);
                    photo.compress(Bitmap.CompressFormat.PNG, 95, fos);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(this,
                            "Sorry, Camera Crashed-Please Report as Crash A.",
                            Toast.LENGTH_LONG).show();
                }

                selectedImagePath = Environment.getExternalStorageDirectory()
                        + "/" + selectedImagePath;
                Log.i("TAG", "After File Created  " + selectedImagePath);

                Bitmap bm = decodeFile(selectedImagePath);
                mImageView.setImageBitmap(bm);
            }

            /*
             * File f = new File(mImageCaptureUri.getPath());
             * 
             * if (f.exists()) f.delete();
             */

            break;

        }
    }

    public static Bitmap decodeFile(String path) {
        int orientation;
        try {
            if (path == null) {
                return null;
            }
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 70;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            // while (true) {
            // if (width_tmp / 2 < REQUIRED_SIZE
            // || height_tmp / 2 < REQUIRED_SIZE)
            // break;
            // width_tmp /= 2;
            // height_tmp /= 2;
            // scale++;
            // }
            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            Bitmap bm = BitmapFactory.decodeFile(path, o2);
            Bitmap bitmap = bm;

            ExifInterface exif = new ExifInterface(path);

            orientation = exif
                    .getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);

            Log.e("ExifInteface .........", "rotation =" + orientation);

            // exif.setAttribute(ExifInterface.ORIENTATION_ROTATE_90, 90);

            Log.e("orientation", "" + orientation);
            Matrix m = new Matrix();

            if ((orientation == ExifInterface.ORIENTATION_ROTATE_180)) {
                m.postRotate(180);
                // m.postScale((float) bm.getWidth(), (float) bm.getHeight());
                // if(m.preRotate(90)){
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
                m.postRotate(90);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
                m.postRotate(270);
                Log.e("in orientation", "" + orientation);
                bitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(),
                        bm.getHeight(), m, true);
                return bitmap;
            }
            return bitmap;
        } catch (Exception e) {
            return null;
        }

    }

    public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    private void doCrop() {
        final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");

        List<ResolveInfo> list = getPackageManager().queryIntentActivities(
                intent, 0);

        int size = list.size();

        if (size == 0) {
            Toast.makeText(this, "Can not find image crop app",
                    Toast.LENGTH_SHORT).show();

            return;
        } else {

            intent.setData(mImageCaptureUri);
            intent.setClassName("com.android.camera",
                    "com.android.camera.CropImage");
            intent.putExtra("outputX", 100);
            intent.putExtra("outputY", 100);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);
            intent.putExtra("return-data", true);
            // startActivityForResult(intent, CROP_FROM_CAMERA);

            if (size == 1) {
                Intent i = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent(new ComponentName(res.activityInfo.packageName,
                        res.activityInfo.name));

                startActivityForResult(i, CROP_FROM_CAMERA);
            } else {
                for (ResolveInfo res : list) {
                    final CropOption co = new CropOption();

                    co.title = getPackageManager().getApplicationLabel(
                            res.activityInfo.applicationInfo);
                    co.icon = getPackageManager().getApplicationIcon(
                            res.activityInfo.applicationInfo);
                    co.appIntent = new Intent(intent);

                    co.appIntent
                            .setComponent(new ComponentName(
                                    res.activityInfo.packageName,
                                    res.activityInfo.name));

                    cropOptions.add(co);
                }

                CropOptionAdapter adapter = new CropOptionAdapter(
                        getApplicationContext(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Choose Crop App");
                builder.setAdapter(adapter,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int item) {
                                startActivityForResult(
                                        cropOptions.get(item).appIntent,
                                        CROP_FROM_CAMERA);
                            }
                        });

                builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel(DialogInterface dialog) {

                        if (mImageCaptureUri != null) {
                            getContentResolver().delete(mImageCaptureUri, null,
                                    null);
                            mImageCaptureUri = null;
                        }
                    }
                });

                AlertDialog alert = builder.create();

                alert.show();
            }
        }
    }
} 
```

# android - 如何显示动态创建的edittext中的值并添加

> ID：14534630
> 
> 赞同：0
> 
> 时间：2013-01-26T06:50:39.457
> 
> 标签：android

当我输入值时，我动态创建了edittext，我无法显示值。如果我想添加我在编辑文本中输入的值，我怎么可能需要给出for循环。

这是代码

```
 public class NewActivity extends Activity {

LinearLayout ll;

   EditText lEditText; 

   public void onCreate(Bundle savedInstanceState) {

   super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

        ll=new LinearLayout(this);

            ll=(LinearLayout)findViewById(R.id.my);

            Button lButton = (Button)findViewById(R.id.mybtnid);

            lButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

            lEditText = new EditText(getApplicationContext());

            lEditText.setHint("Text Here");

            lEditText.setInputType(InputType.TYPE_CLASS_NUMBER);

            ll.addView(lEditText);

                 }
                });

        Button button1=(Button)findViewById(R.id.btn2);
            button1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                            TextView tv = new TextView(getApplication());

                          int x=Integer.parseInt(lEditText.getText().toString());

                          tv.setText(x);

                         ll.addView(tv);

            }
        }); 
```

我在 logcat 中收到错误：

```
 AndroidRuntime(509): android.content.res.Resources$NotFoundException: String resource ID #0x1
    E/AndroidRuntime(509):  at android.content.res.Resources.getText(Resources.java:201)
    E/AndroidRuntime(509):  at android.widget.TextView.setText(TextView.java:2817)
    E/AndroidRuntime(509):  at com.app.NewActivity$2.onClick(NewActivity.java:44)
    E/AndroidRuntime(509):  at android.view.View.performClick(View.java:2408)
    E/AndroidRuntime(509):  at android.view.View$PerformClick.run(View.java:8816)
    E/AndroidRuntime(509):  at android.os.Handler.handleCallback(Handler.java:587)
    E/AndroidRuntime(509):  at android.os.Handler.dispatchMessage(Handler.java:92)
    E/AndroidRuntime(509):  at android.os.Looper.loop(Looper.java:123)
    E/AndroidRuntime(509):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    E/AndroidRuntime(509):  at java.lang.reflect.Method.invokeNative(Native Method)
    E/AndroidRuntime(509):  at java.lang.reflect.Method.invoke(Method.java:521)
    E/AndroidRuntime(509):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    E/AndroidRuntime(509):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    E/AndroidRuntime(509):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:56:21.800

您正在将一个整数传递给 setText。您需要传递字符串，如果您传递的是 int，则需要传递资源 id。

所以使用

```
 tv.setText("" + x); 
```

代替

```
 tv.setText(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:01:17.210

尝试进行如下更改以设置您的文本`TextView`

> ```
>  int x=Integer.parseInt(lEditText.getText().toString());
>    tv.setText(x+""); <-- Add "" to set the integer value in your textview. 
> ```

**编辑：**

试试下面的代码来动态添加值：

> ```
>  final EditText et1=(EditText)findViewById(R.id.editText1);
>    final EditText et2=(EditText)findViewById(R.id.editText3);
>     Button bt=(Button)findViewById(R.id.button1);
>     bt.setOnClickListener(new OnClickListener() {           
>         @Override
>         public void onClick(View arg0) {
>             try
>             {
>             int x=Integer.valueOf(et1.getText().toString());
>             int y= Integer.valueOf(et2.getText().toString());
>             int z=x+y;
>             System.err.println(z+"");
>                     tv.setText(z+""); 
>             }
>             catch (NumberFormatException e) {
>                 // TODO: handle exception
>             }
>         }
>     }); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:10:20.033

如果你去[这里，](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)你可以看到如何使用动态来获取组件的 setId。

# jquery - asp.net mvc 4：客户端验证不起作用

> ID：14534631
> 
> 赞同：1
> 
> 时间：2013-01-26T06:50:59.337
> 
> 标签：jquery, asp.net-mvc, validation, unobtrusive-validation

我有一个模型：

```
public class UserInfoViewModel
    {
        public int Id { get; set; }

        [LocalizedDisplayName("CarNumber", NameResourceType = typeof(CabinetViewModelsStrings))]
        [Required]
        public string CarNumber { get; set; }  

        [LocalizedDisplayName("CarMark", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string CarMark { get; set; }

        [LocalizedDisplayName("CarYear", NameResourceType = typeof(CabinetViewModelsStrings))]
        [IntLengthAttribute(4, ErrorMessage = "Wrong Year")]
        public int CarYear { get; set; }

        [LocalizedDisplayName("Email", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string Email { get; set; }

        [LocalizedDisplayName("PhoneNumber", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string PhoneNumber { get; set; }

        [LocalizedDisplayName("FullName", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string FullName { get; set; }

        [LocalizedDisplayName("FirstName", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string FirstName { get; set; }

        [LocalizedDisplayName("LastName", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string LastName { get; set; }

        [LocalizedDisplayName("MiddleName", NameResourceType = typeof(CabinetViewModelsStrings))]
        public string MiddleName { get; set; }       

    } 
```

当用户单击`Edit`按钮时，我显示对话框：

```
$(document).on('click', '#edit_info', function() {
        var dialog = createDialog();
        var editUrl = '/cabinet/edit';
        dialog.load(editUrl, function(content) {
            dialog.dialog({
                close: function(event, ui) {
                    dialog.remove();
                },
                modal: true,
                width: 460,
                resizable: false
            });
        });
    }); 
```

`Edit`观点：

```
@using (Ajax.BeginForm("Edit", "Cabinet", new AjaxOptions { HttpMethod = "POST" }, new { Id = "update_user_info" })) 
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>@CabinetViewsStrings.FormEditInfo</legend>
        @Html.HiddenFor(m=>m.Id)
        <ol>
            <li>
                @Html.LabelFor(m => m.FirstName)
                @Html.TextBoxFor(m => m.FirstName)
            </li>
            <li>
                @Html.LabelFor(m => m.MiddleName)
                @Html.TextBoxFor(m => m.MiddleName)
            </li>
            <li>
                @Html.LabelFor(m => m.LastName)
                @Html.TextBoxFor(m => m.LastName)
            </li>
            <li>
                @Html.LabelFor(m => m.Email)
                @Html.TextBoxFor(m => m.Email)
            </li>
            <li>
                @Html.LabelFor(m => m.PhoneNumber)
                @Html.TextBoxFor(m => m.PhoneNumber)
            </li>
            <li>
                @Html.LabelFor(m => m.CarNumber)
                @Html.TextBoxFor(m => m.CarNumber)
                @Html.ValidationMessageFor(model => model.CarNumber)
            </li>                
            <li>
                @Html.LabelFor(m => m.CarMark)
                @Html.TextBoxFor(m => m.CarMark)
            </li>                
            <li>
                @Html.LabelFor(m => m.CarYear)
                @Html.TextBoxFor(m => m.CarYear)
                @Html.ValidationMessageFor(model => model.CarYear)
            </li>      
        </ol>
        <input id="update_user_info" type="submit" value="@CabinetViewsStrings.ButtonSaveEditInfo" />
    </fieldset>
}

@Scripts.Render("~/bundles/jqueryval") 
```

但是当我单击带有空白`CarNumber`字段的 sumbit 按钮时，我没有收到任何错误。哪里有错误？

加载所需的js库：

```
GET jquery.unobtrusive-ajax.js?_=1359182513969
GET jquery.validate.js?_=1359182514123
GET jquery.validate.unobtrusive.js?_=1359182514379 
```

这部分生成的html：

```
<li>
     <label for="CarNumber">Car Number</label>
     <input type="text" value="B650LZN" name="CarNumber" id="CarNumber" data-val-required="The Car Number field is required." data-val="true">
</li> 
```

这是动作：

```
public ActionResult Edit()
{
   var model = _viewModelCreator.Create<UserInfoViewModel, User>(PcpSession.CurrentUser);
   return PartialView(model);
 }

 [HttpPost]
 public ActionResult Edit(UserInfoViewModel userInfo)
 {
    if (!ModelState.IsValid)
    {
       return View(userInfo);
    }

    var user = _entityCreator.Create<User, UserInfoViewModel>(userInfo);
    _userService.UpdateUser(user);
    PcpSession.CurrentUser = user;

    return Json(new { });
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:17:51.853

我认为在您的操作（在控制器中）之前添加 [ValidateAntiForgeryToken] 将解决您的问题

# spring - org.springframework.web.servlet.PageNotFound - 没有为 HTTP 找到映射 - 我的项目中只有一个页面

> ID：14534639
> 
> 赞同：0
> 
> 时间：2013-01-26T06:51:44.143
> 
> 标签：spring, spring-mvc, mapping

我有一个简单的弹簧应用程序，有很多关于这个问题的帖子，但我看不到我错在哪里。由于显示未找到映射，我无法查看 displayAllOrders.jsp。:(

请在下面找到我的 web.xml 映射：

```
<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/pres.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
 </servlet> 

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

请在 pres.xml 下方找到：

```
<!-- DispatcherServlet Context: defines this servlet's request-processing 
    infrastructure -->
<context:component-scan base-package="com.example.pres" />
<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven />
<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources 
    in the /WEB-INF/views directory -->
<beans:bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<beans:bean id="validator"
        class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" /> 
```

请在我的控制器下方找到（包：com.example.pres）：

```
@Controller
public class OrderController {

private static final Logger logger = LoggerFactory
        .getLogger(OrderController.class);

@Autowired
OrderService orderService;

@RequestMapping(method=RequestMethod.GET,value="/displayAllOrders")
public ModelAndView listPeople() {
    logger.debug("Received request to list orders");
    ModelAndView mav = new ModelAndView();
    List<Order> order = orderService.getAllOrders();
    logger.debug("Order Listing count = "+order.size());
    mav.addObject("order",order);
    mav.setViewName("displayAllOrders");
    return mav;
} 
```

请在调用 displayAllOrders.jsp(Path:src\main\webapp\WEB-INF\视图\displayAllOrders.jsp）：

```
<a href=displayAllOrders> View order</a> 
```

我能够显示主页，但是当我单击超链接 displayAllOrders 时：

```
org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/project/displayAllOrders] in DispatcherServlet with name 'appServlet' 
```

任何想法为什么我的映射不适用于 displayAllOrders？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:00:12.590

您的 url 映射`/displayAllOrders`不适用于`/project/displayAllOrders`，请`RequestMapping`在控制器中更改并尝试。

# java - 在 Play Framework 中使用 Json 呈现的数组发送 ajax 请求

> ID：14534643
> 
> 赞同：1
> 
> 时间：2013-01-26T06:52:46.823
> 
> 标签：java, json, jquery, playframework-2.0

我在使用 Play Framework 中的 Json 呈现的数组发送 ajax 请求时遇到了几个问题。首先，看看我的代码。

```
$('#changeCategory').click(function(){
    var categoryOrder = $('#categories').sortable('toArray');
    $.ajax({
        'type': 'POST',
        'url': '@routes.ImageUploader.categoryOrderUpdate()',
        'data': {'categoryOrder': categoryOrder},
        'dataType': 'json',
        'success': function(data){
            alert('success_' + data);
        }
    });
}); 
```

我尝试将 ajax 请求作为“POST”发送到 ImageUploader.categoryOrderUpdate()。`categoryOrder`是一个像下面这样的数组。

![使用 Jquery UI 插件](../Images/d11477c54c536f819afb3d1893d93d8a.png)

当我首先尝试此代码时，我收到一个错误`Action Not Found For request 'GET /categoryOrderUpdate'`这是意外错误，因为我将我的 ajax 请求定义为 POST 并且还在`POST /categoryOrderUpdate controllers.ImageUploader.categoryOrderUpdate()`我的路由文件中定义。所以，这是我的第一个问题。为什么我的 ajax 请求不通过 'POST' 发送？

另外，有没有办法在我的 Java 控制器中接收这个数组？我看到了一些用 Scala 编写的示例，但我找不到 Java 示例。我尝试使用下面的代码，但它一直抛出空指针异常。

```
@BodyParser.Of(BodyParser.Json.class)
public static Result categoryOrderUpdate() {
    JsonNode jsonRequest = request().body().asJson().findPath("categoryOrder"); 
```

我的路线文件：

```
# ImageUploader
GET     /imageUpload                controllers.ImageUploader.mainPage()
POST    /imageUpload                controllers.ImageUploader.imageUploader()
POST    /imagePath                  controllers.ImageUploader.pathCalculator()
GET     /categoryAdd                controllers.ImageUploader.categoryAdder()
POST    /categoryOrderUpdate        controllers.ImageUploader.categoryOrderUpdate() 
```

# java - 测试数据库结果

> ID：14534646
> 
> 赞同：1
> 
> 时间：2013-01-26T06:53:14.890
> 
> 标签：java, testing, junit

如何为应用程序（**Java**应用程序）的 CRUD 操作编写 JUnit 测试。我使用 MyBatis 作为数据库上的数据映射器。例如，我有一个这样的查询：

```
SELECT * FROM sm.PERSON WHERE name='something' 
```

我从 MyBatis 调用这个查询：

```
java.util.List<Person> persons = SqlMapClient.openSession().queryForList(queryName) 
```

现在我怎样才能测试这个操作以获得正确的结果？

* * *

（另一件事请告诉我学习Java测试的书名。我知道基础知识，我想更深入。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:22:24.650

我认为您的 Junit 测试应该独立运行，而不依赖于数据库结果。在您需要使用数据库进行测试的情况下，您可以使用[DbUnit](http://www.dbunit.org/%20dbunit)，这是一个针对数据库驱动项目的 junit 扩展。

对于电子书：

1.  单元测试：[JUnit 在行动](http://www.manning.com/massol/)
2.  回归测试：[硒](http://selenium-tutorial.blogspot.com/2012/03/selenium-tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:20:17.030

在这里，您似乎想`test MyBatis's functionality`使用 JUnit 对其 CRUD 功能。我会做的是，`use the native JDBC`这是一个既定标准，可以在数据库上触发查询并根据给出`then compare the`的结果得出结果`MyBatis function`。

对于第二个问题，如果您正在使用`JUnit 3`，则使用`JUnit in Action first edition`，如果使用`JUnit 4`，请使用`JUnit in Action second edition`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T08:37:02.387

第一个问题：持久层的测试并不容易。您应该阅读 Junit in Action 第 2 版中的第 17 章。[Unitils](http://www.unitils.org/cookbook.html)也可以提供帮助。

关于测试的书籍：

*   [Junit 在行动 2nd](http://www.manning.com/tahchiev/)
*   [测试驱动 - Java 开发人员的实用 TDD 和验收 TDD](http://www.manning.com/koskela/)（我的最爱之一）
*   [xUnit 测试模式](http://xunitpatterns.com/)（不知何故必须具备）
*   [实用单元测试](http://practicalunittesting.com/)（使用 TestNG 和 Mockito 编写得很好，很新）
*   [Kent Beck 关于测试驱动开发](https://www.google.ch/search?q=beck%20test%20driven%20development)

# wordpress - 除非定义了“自定义结构”，否则 add_rewrite_rule 不会添加规则。

> ID：14534648
> 
> 赞同：0
> 
> 时间：2013-01-26T06:53:18.057
> 
> 标签：wordpress, .htaccess

嘿，这个问题正如标题所暗示的那样。

我想使用 add_rewrite_rule 添加自定义规则，但只有在我的永久链接设置区域中选择“自定义结构”时才会添加这些规则。

这是我在初始化时调用的内容。

```
add_rewrite_rule("$slug/([^/]*)?", $this_path.'modules/module.redirect.php?permalink_name=$1','top');
add_rewrite_rule("custom-post-type-name=([^/]*)?", $this_path.'modules/module.redirect.php?permalink_name=$1','top'); 
```

有什么想法吗？

# javascript - 如何在javascript中使用数组的值获取数组的索引？

> ID：14534652
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:53:40.957
> 
> 标签：javascript, arrays

嗨，我是 javascript 新手。我想使用它的值获取数组的索引并将新元素附加到该数组中。这是我的数组：

```
var testArray=[];

testArray.push({"key1":"value1","key2":"value2"});
testArray.push({"key1":"value11","key2":"value22"}); 
```

现在我想获取“value11”的索引，并将新元素附加为“key3”：“value33”在**相同的索引**中，如下所示：

```
testArray.push({"key1":"value11","key2":"value22","key3":"value33"}); 
```

请解释。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:07:41.373

```
var testArray=[];

testArray.push({"key1":"value1","key2":"value2"});
testArray.push({"key1":"value11","key2":"value22"});

var filtered = testArray.filter(function(item) {
    if (item.key1 == 'value11') {
        item.key3 = 'value33';
        return true
    }
    return false;
}); 
```

[http://jsfiddle.net/XUzJw/](http://jsfiddle.net/XUzJw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:24:26.610

这是简单的答案：

```
var testArray = [];

testArray.push();
testArray.push();

// loop through every element of the array
for(var i = testArray, l = testArray.length; i < l; i++){
  // grab this particular object
  var obj = testArray[i];

  // see if key1 is equivalent to our value
  if(obj.key1 == 'value11'){
    // if so, set key3 to the value we want for this object
    obj.key3 = 'value33';
    break;    
  }
} 
```

更好的答案看起来更像这样：

```
var testArray = [
  {
    "key1" : "value1",
    "key2" : "value2"
  },
  {
    "key1" : "value11",
    "key2" : "value22"
  }
];

function findAndSwap(list, comparator, perform){
  var l = list.length;
  while(l--) if(comparator(list[l], l, list)) perform(list[l], l, list);
}

function checkProp(prop, value){ return function(obj){ return obj[prop] === value } }
function addProp  (prop, value){ return function(obj){ obj[prop] = value          } }

findAndSwap(testArray, checkProp('key1', 'value11'), addProp('key3', 'value33')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:45:19.843

你可以尝试类似的东西。即使您没有键名，此代码也可以使用。它在价值基础上找到键名。也将它添加到 jsFiddle [http://jsfiddle.net/rTazZ/2/](http://jsfiddle.net/rTazZ/2/)

```
var a = new Array(); 
a.push({"1": "apple", "2": "banana"}); 
a.push({"3": "coconut", "4": "mango"});

GetIndexByValue(a, "coconut");

function GetIndexByValue(arrayName, value) {  
var keyName = "";
var index = -1;
for (var i = 0; i < arrayName.length; i++) { 
   var obj = arrayName[i]; 
        for (var key in obj) {          
            if (obj[key] == value) { 
                keyName = key; 
                index = i;
            } 
        } 
    }
    //console.log(index); 
    return index;
} 
```

# arrays - 在限制元素移位范围的同时对列表进行改组

> ID：14534654
> 
> 赞同：2
> 
> 时间：2013-01-26T06:53:55.877
> 
> 标签：arrays, algorithm, range, shuffle

随机[打乱](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)数组很容易解决。我想做一个洗牌，但有一个额外的限制，即任何元素的变化都被限制在一个范围内。因此，如果 max allowed shift ，则由于洗牌，任何元素都不能在任一方向上`= n`移动超过步数。`n`

所以给定这个数组，并且 n=3：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

这将是一个有效的洗牌：

```
[2, 3, 4, 0, 1, 6, 5, 8, 9, 7] 
```

虽然这些是无效的：

```
[2, 3, 4, 7, 1, 6, 5, 8, 9, 0]
[2, 3, 4, 6, 1, 7, 5, 8, 9, 0] 
```

（注意范围不是旋转的）

我们正在寻找一种简单有效的方法来实现这一目标。最好就地进行，但如果它提供了一个好的解决方案，则可以使用第二个数组。

一个天真的入门解决方案是，使用第二个数组：

```
for element in array1:
  get legal index range
  filter out indexes already filled
  select random index i from filtered range
  array20[i] = element 
```

**编辑**：

这是关于@ruakh 提出的概率失真问题，如果算法首先以相等的概率处理终端元素：

乍一看，我认为概率方差会随着数组大小的增加而减小，但情况似乎并非如此。下面的一些快速测试（我匆忙炮制了这个，所以可能有错误）。由于概率的失真很大，我认为它不能作为一般情况接受，但对于我自己的应用程序，我可以忍受它，就像我在评论中所说的那样。

```
import itertools

n = 2

def test(arlen):
    ar = range(arlen)
    lst = list(itertools.permutations(ar))
    flst = [l for l in lst if not illegal(l)]

    print 'array length', arlen
    print 'total perms: ', len(lst)
    print 'legal perms: ', len(flst)

    frst = [0] * (n+1)
    for l in flst:
        frst[l[0]] +=1

    print 'distribution of first element: ',frst

def illegal(l):
    for i in range(len(l)):
        if abs(l[i]-i)>n: return True

if __name__=="__main__":
    arlen = range(4,10)
    for ln in arlen:
        test(ln)

------------ n=2
array length 4
total perms:  24
legal perms:  14
distribution of first element:  [6, 4, 4]
array length 5
total perms:  120
legal perms:  31
distribution of first element:  [14, 10, 7]
array length 6
total perms:  720
legal perms:  73
distribution of first element:  [31, 24, 18]
array length 7
total perms:  5040
legal perms:  172
distribution of first element:  [73, 55, 44]
array length 8
total perms:  40320
legal perms:  400
distribution of first element:  [172, 128, 100]
array length 9
total perms:  362880
legal perms:  932
distribution of first element:  [400, 300, 232]

------------ n=4
array length 4
total perms:  24
legal perms:  24
distribution of first element:  [6, 6, 6, 6, 0]
array length 5
total perms:  120
legal perms:  120
distribution of first element:  [24, 24, 24, 24, 24]
array length 6
total perms:  720
legal perms:  504
distribution of first element:  [120, 96, 96, 96, 96]
array length 7
total perms:  5040
legal perms:  1902
distribution of first element:  [504, 408, 330, 330, 330]
array length 8
total perms:  40320
legal perms:  6902
distribution of first element:  [1902, 1572, 1296, 1066, 1066]
array length 9
total perms:  362880
legal perms:  25231
distribution of first element:  [6902, 5836, 4916, 4126, 3451] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:45:41.953

有可能将此视为一个完全覆盖的问题，并且可能（我没有测试它，但我会证明这个说法是正确的）用 ZDD 有效地解决。

精确覆盖问题对于每个元素可以放入结果的每种方式都有布尔决策变量，所以如果`n = 0`，将有与元素一样多的变量，因为`n = 1`除了末端之外的每个元素都有三个变量，其中每个有两个变量，等等。

如果`n`明显小于数组的大小，则意味着“相距甚远”的决策变量不会直接相互影响。这应该使 ZDD 的大小保持合理，因为它在结构上与小瓷砖的平铺问题相当。

编辑：实际上我现在不太确定这一点，尤其是与平铺的可比性，这似乎越来越令人怀疑，但我仍然怀疑 ZDD 的大小将是可控的。

在合理大小的 ZDD 上，可以有效地生成无偏差（即每个解决方案具有相等概率）随机解决方案（对应于在“不要移动超过 n 个位置”规则下有效的排列）。

这可能不是最好的方法，但它表明无需蛮力就可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:06:11.953

听起来您对每个可能的输出具有相等的概率并不太挑剔。一个简单的解决方案可能是等效于`n`冒泡排序，但不是对元素进行排序，而是随机选择是否在每一步交换两个元素。这种方法也可以让您就地进行随机化。您可以执行以下操作：

```
import random
def shuffle_list(list, n):
    for ipass in xrange(n):
        for ielt in xrange(len(list) - 1):
            if random.randrange(2):
                temp = list[ielt]
                list[ielt] = list[ielt + 1]
                list[ielt + 1] = temp 
```

**编辑：**对不起，我应该多考虑一下。我描述的方法不起作用——在第一遍中，第一个元素冒泡到列表末尾的概率非零。不知怎的，我错过了。

我想我现在真的没有答案，但至少有一个想法：为原始列表中的每个元素分配一个等于 的代理值，原始列表中元素的索引在`ii + random.uniform(-n/2., n/2.)`哪里；`ii`然后根据这个代理值对原始列表进行排序。然后，最早`ii`可以出现在最终列表中的元素是 position `ii-n`：只有当元素接收到代理值`ii-n/2.`并且以元素开头的每个元素都`ii-n`接收到至少 的代理值时，才会发生这种情况`ii-n/2.`。上限的参数相同。

在实践中，您可能希望使用稍宽的范围，可能类似于`random.uniform(-n/2\. - 0.49, n/2\. + 0.5)`. 我还没有仔细计算过这个数学，但我认为这保持了距离约束。我也不完全确定可能列表的最终分布是什么。@Basel，我认为您对最初的建议是正确的，似乎更有可能让每个元素移动少量而不是大量移动。我认为这个解决方案应该更好，但我不能发誓。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:30:40.813

*   输入`InputArray`：说整数数组
*   Input `NumberCount`: InputArray 中的整数个数
*   输入`ShuffleRange`：一个数字允许跳转的有效范围

*   `ShuffleWindowSize`：发生交换的处理窗口。它的值为`ShuffleRange +1`

*   `ShuffleIndexArray`: Shuffle 窗口中输入数字的索引，无效索引将是**INT_MIN**

初始化`ShuffleIndexArray`

> ```
> for (idx =0; idx < ShuffleWindowSize; idx++) {
>   ShuffleIndexArray[idx] = idx;
> } 
> ```

过程`InputArray`

```
for (idx = 0; idx < NumberCount; idx++) {

    shuffleIdx = idx % ShuffleWindowSize;

    /* 1\. Check if the Element has been moved from it's Original Position
     * 1.1 IF it was swapped already then move to next element
     * 1.2 ELSE perform shuffling within available window
     */
    if (idx != ShuffleIndexArray[shuffleIdx]) { /* was swapped already */
        goto LOOP_CONTINUE;
    }
    /* Get a random Index in the range [0, shuffleWinSize) */
    randomSwapIdx = rand() % shuffleWinSize; /* OffSet */

    /* Skip Invalid Indexes */
    if (INT_MIN == shuffleIndexArray[randomSwapIdx]) {
        for (jdx = randomSwapIdx + shuffleWinSize - 1; jdx > randomSwapIdx; jdx--) {
            if (INT_MIN != shuffleIndexArray[jdx % shuffleWinSize]) {
                randomSwapIdx = jdx % shuffleWinSize;
                break;
            }
        }
    }

    /* Get the actual index into InputArray */
    randomSwapIdx = ShuffleIndexArray[randomSwapIdx]; /*Actual Index*/

    /* Check if number gets to stay in original position */
    if (idx == randomSwapIdx) { /* Lucky Bugger */
        goto LOOP_CONTINUE;
    }

    /* Swapping of two numbers in InputArray */
    swapInt = inputArr[idx];
    inputArr[idx] = inputArr[randomSwapIdx];
    inputArr[randomSwapIdx] = swapInt;

    /* Update indexes in Shuffle-Window Array */
    ShuffleIndexArray[randomSwapIdx % ShuffleWindowSize] = idx;

    LOOP_CONTINUE:
    /* InputArray[idx] was processed.
     * Update ShuffleIndexArray */
    ShuffleIndexArray[shuffleIdx] =
            ((idx + ShuffleWindowSize) < NumberCount) ?
                    (idx + ShuffleWindowSize) : INT_MIN;
} 
```

这是一个就地改组，除了我们需要另一个大小数组`ShuffleWindowSize`来跟踪索引。

# javascript - 我如何创建一个在鼠标悬停时循环遍历图像数组的 javascript

> ID：14534659
> 
> 赞同：0
> 
> 时间：2013-01-26T06:55:20.423
> 
> 标签：javascript, image, loops

我有如下图像

```
coolimg.1.jpg 
```

我想`1`用以下数组循环：

```
[2,5,8,11,14,17,20,23,26,29] 
```

...`mouseover`延迟 1 秒开启

我应该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:17:05.553

```
var imgs  = [2,5,8,11,14,17,20,23,26,29]
  , last  = imgs.length
  , count = 0
  , timer
  , img_name
;//var

function cycleImage(){
  if(count++ < last){
    img_name = 'coolimg.' + imgs[count] + '.jpg';
    // do something with image
    timer = setTimeout(changeImage, 1000);
  }
}

function resetImage(){
  count = 0;
  clearTimeout(timer);
}

var $element = $('element');

$element
  .on ('mouseover', cycleImage)
  .off('mouseout' , resetImage)
;//var 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:31:28.230

到目前为止，这还不完整，但它可以提供一个开始的地方：

```
var imageRoller=function(){
    this.myNumbers=[2,5,8,11,14,17,20,23,26,29];
    this.currentIndex=0;
    this.timerID=0;
    this.onMouseover=function(){
        //do something
        var currentID="coolimg."+
            this.myNumbers[this.currentIndex]+
            ".jpg";
        //increase the current index
        this.currentIndex++;
        if(this.currentIndex>=
            this.myNumbers.length){
            this.myNumbers=0;
        }
        //do something again in 1 second
        me=this;
        setTimeout(function(){
            me.onMouseover();
        },1000);
    }
    this.onMouseout=function(){
        // stop doing something agqain in 1 second
        clearTimeout(this.timerID);
    }
    //attach the mouseover and out events:
    var me = this;
    document.getElementById("someImg")
        .addEventListener("mouseover", function(){
            me.onMouseover.call(me);
        });

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:58:40.940

干得好。

这将为 id 中的元素设置动画`imgId`。动画仅在 1 秒后开始`mouseover`。

**HTML**

```
<img id="myImg" onmouseover="imgId = this.id; timer = setTimeout(animate, 1000);" onmouseout="stopAnimation();" src="coolimg.1.jpg" /> 
```

**JS**

```
var myImages = [1, 2, 3, 5]
var img_index = 0;
var timer;
var imgId = "myImg";

// Start animation
function animate() {
    me = document.getElementById(imgId);

    me.src = "coolimg." + myImages[img_index] + ".jpg"

    img_index++;

    if (img_index == myImages.length){
        img_index = 0;
    }

    timer = setTimeout(animate, 1000);
}

function stopAnimation() {
    clearTimeout(timer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T08:38:26.930

这个版本有更好的代码和标记分离：

```
 var coolimg = {
            images      : [2,5,8,11,14,17,20,23,26,29],
            position    : 0,
            mouseOver   : false,
            target      : document.getElementById('coolimg')
        }

        coolimg.target.addEventListener('mouseenter',function(){
            coolimg.mouseOver = true;
        });
        coolimg.target.addEventListener('mouseleave', function(){
            coolimg.mouseOver = false;
        });

        setInterval(function(){
            if (coolimg.mouseOver) {
                coolimg.position = (coolimg.position+1)%coolimg.images.length;
                coolimg.target.src = 'coolimg.'+coolimg.images[coolimg.position]+'.jpg';
            }
        }, 1000); 
```

# mysql - 当条件返回真时插入多个值

> ID：14534660
> 
> 赞同：0
> 
> 时间：2013-01-26T06:55:24.970
> 
> 标签：mysql, case

当 If 条件返回 true 时，在表中插入多个值。if 条件检查两个表数据并相应地返回 true 和 false。

结构体-

```
products: id, qty_on_hand
orders: id, product_id, qty ,price,room_number etc
roomTable :id,product_id,room_number,booked_status 
```

当请求的总数量小于 qty_on_hand 时，在订单表中插入所有数据

请告知如何在此中使用 case 语句。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:22:21.510

```
INSERT INTO orders (id, product_id, qty ,price,room_number, etc)
SELECT $id, $product_id, $qty, $price, $room_number, ...
FROM products
WHERE id = $id AND $qty < qty_on_hand; 
```

将所有 替换`$xxx`为您要插入的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:38:22.283

我认为上一个查询中的所有内容都是常规的，除了“id”部分和 roomtable 上可能缺少的连接我认为 product_id 是请求的 id .. 还需要在 roomTable 上进行内部连接才能获取...数据

我的直觉是订单表中的 id 列是自动生成的

```
INSERT INTO orders (product_id, qty ,price,room_number, etc)
SELECT products.id, products.qty, products.price, roomTable.room_number, ...
FROM products
Inner join roomTable
on roomtable.product_id = products.id
WHERE products.id = $id AND $qty < qty_on_hand; 
```

我假设代码是::

```
 begin tran orderstransaction
     //This will insert a new order with an autogenerated order id..    
      INSERT INTO orders (product_id, qty ,price,room_number, etc)
        SELECT products.id, products.qty, products.price, roomTable.room_number, ...
        FROM products
        Inner join roomTable
        on roomtable.product_id = products.id
        WHERE products.id = $id AND $qty < qty_on_hand;

    //this will reduce the qty_on_hand by $qty now that an order has been posted 
    update products set qty_on_hand = (qty_on_hand - $qty)
    where products.id = $id

    commit tran orderstransaction 
```

这是我的编辑，其中至少有一个有效的语句

```
SQL Insert Statement that worked for me
..................
this sql statement below assumes that id in orders is not autogenerated..
i did not see an attribute for price in products so hardcoded it to 2500 to be replaced with products.price assuming there is a price in products table.
Now assuming that u r querying for product_id=1 and qty=250 which are ur inputs for the query, am inserting order id 10000 into orders
INSERT INTO orders (id,product_id, qty ,price,room_number)
        SELECT 10000,products.id,250 , 2500, roomTable.room_number
        FROM products
        Inner join roomTable
        on roomtable.product_id = products.id
        WHERE products.id = 1 AND 250 < products.qty_on_hand
..........................................................
This Sql assumes order id is autogenerated
  INSERT INTO orders (product_id, qty ,price,room_number)
        SELECT products.id,250 , 2500, roomTable.room_number
        FROM products
        Inner join roomTable
        on roomtable.product_id = products.id
        WHERE products.id = 1 AND 250 < products.qty_on_hand
........................................................ 
```

# python - 在python中用floordiv除负数

> ID：14534661
> 
> 赞同：3
> 
> 时间：2013-01-26T06:55:45.273
> 
> 标签：python, integer-division, negative-number

我对整数除法的性质感到困惑 // 或在 python 中带有负数的 floordiv 。

```
>>> -5 // 2
-3
>>> int(-5/2)
-2 
```

为什么 floordiv() 会向下舍入为 -3？我认为整数除法应该简单地删除（或缺少）小数点后的信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T07:10:31.170

在算术中，`floor`函数被定义为*不大于操作数的最大整数*。由于不大于 -2.5 的最大整数是 -3，因此您看到的结果是预期的结果。

我想一种思考方式是 floordiv 总是向下舍入（在数字线上*向左*），但作用于操作数的实际值（-2.5），而不是其绝对值（2.5）。

维基百科在[地板和天花板功能](http://en.wikipedia.org/wiki/Floor_and_ceiling_functions)中提供了更多信息。

请注意，您描述的行为是由`math.trunc()`Python 标准库中的函数提供的。

```
>>> from math import trunc
>>> trunc(-2.5)
-2 
```

# ruby-on-rails - 当一些可能被标记为销毁时，rails 验证嵌套属性的唯一性

> ID：14534665
> 
> 赞同：5
> 
> 时间：2013-01-26T06:56:17.963
> 
> 标签：ruby-on-rails, ruby, validation, rails-activerecord, validates-uniqueness-of

我有以下（经过消毒的）模型：

```
 class Person < ActiveRecord::Base

      attr_accessible :name, :first_name, :last_name, :age, :job_title, :salary, :ssn, :prison_convictions, :addresses_attributes

      has_many :addresses, inverse_of: :person

      accepts_nested_attributes_for :addresses, allow_destroy: true

 end

 class Address < ActiveRecord::Base

      attr_accessible :zip_code, :street,:house_number,
 :unique_per_person_government_id

      belongs_to :person, inverse_of: :addresses

      validates_uniqueness_of :unique_per_person_government_id, scope: :person_id
 end 
```

问题如下，

假设人 Joe Shmoe 目前有两个地址附加到他自己

666 Foo Street, 12345，唯一 ID：“ABCDEFG”和 777 Lucky Avenue，54321，唯一 ID：“GFEDCBA”</p>

假设以下帖子来自一个表单：

```
 {:addresses_attributes =>
 { [0] => {:unique_per_person_government_id => “ABCDEFG”, :street=> “Foo Street”, :house_number => 666, :zip_code=>12345, _destroy => 1}
 [1] => {:unique_per_person_government_id => “ABCDEFG”, :street=>”Bar Street”, :house_number => 888, :zip_code => 12345, _destroy => 0}
 } 
```

行为似乎是第二个（即新的）记录首先验证唯一性，验证失败。

我想要的行为是`marked_for_destruction?`在进行任何进一步验证之前非常简单地删除所有元素。

如何以这种方式重新连接生命周期？有没有更好的方法来实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:51:47.970

我已经解决了这个问题：

```
class Person < ActiveRecord::Base
  attr_accessible :name, :first_name, :last_name, :age, :job_title, :salary, :ssn, :prison_convictions, :addresses_attributes

  has_many :addresses, inverse_of: :person

  accepts_nested_attributes_for :addresses, allow_destroy: true

  def validate_addresses
    codes = {}
    addresses.each do |a|
      if codes.key?(a.unique_per_person_government_id) and not a.marked_for_destruction?
        codes[a.unique_per_person_government_id] = codes[a.unique_per_person_government_id]+1
        if codes[a.unique_per_person_government_id] > 1
          return false
        end
      elsif not codes.key?(a.unique_per_person_government_id) and a.marked_for_destruction?
        codes[a.code] = 0
      elsif not codes.key?(a.unique_per_person_government_id) and not a.marked_for_destruction?
        codes[dacode] = 1
      end
    end
    return true
  end
end

class Address < ActiveRecord::Base
  before_save :validate_addresses

  attr_accessible :zip_code, :street,:house_number, :unique_per_person_government_id

  belongs_to :person, inverse_of: :addresses

  validates_uniqueness_of :unique_per_person_government_id, scope: :person_id, unless: :skip_validation?

  def skip_validation?
    person.addresses.each do |a|
      if unique_per_person_government_id == a.code and id != a.id
        return false unless a.marked_for_destruction?
      elsif id == a.id and a.marked_for_destruction?
        return false
      end
    end
    return true
  end
end 
```

从而强制执行唯一性，并防止地址无效的人保存，但忽略标记为销毁的项目。如果有人遇到类似的问题并且有更好的/算法上更简单/更容易阅读的解决方案，并且想分享它，那就太棒了：D

# php - 如何在 php 中跨数据中心发出异步 http 请求

> ID：14534667
> 
> 赞同：-1
> 
> 时间：2013-01-26T06:56:26.567
> 
> 标签：php, curl, asynchronous, gearman, guzzle

我们正在开发基于 Kafka 的事件收集管道，该管道将通过 HTTP GET / POST 请求接受传入事件。它应该能够通过用户浏览器以及在 Nginx + PHP-FPM 上运行的 Web 服务器接收事件。根据需求的本质，该管道必须具有弹性，因此我们将在新加坡 AWS 进行部署，而我们的客户端服务 Web 服务器位于印度孟买的物理数据中心。我们不想因此而引入任何延迟，因此 PHP 应用程序应该只触发一个请求并忘记它，开始时即使约 5% 的请求丢失也是可以的。孟买和新加坡之间的往返时间约为 70 毫秒。我们可以使用哪些选项：-

*   超时时间约为 100 毫秒的 curl 或 fsockopen 请求——不可接受
*   使用[Guzzle](https://github.com/guzzle/guzzle)或[curl-easy](https://github.com/stil/curl-easy)之类的库——它们在内部仅使用 curl，因此会再次引入延迟
*   将请求本地写入文件并使用像 Flume 或 Kafka 这样的总线进行传输——本质上我们将复制均匀的收集管道，增加硬件成本。
*   使用像 gearman 这样的工作队列——不是这方面的专家，所以不知道利弊。
*   阳光下的任何东西，都提供免费且低维护的服务。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:52:45.740

我会使用作业队列系统，即使它引入了另一层复杂性。它是在 PHP 中异步处理事情的最简单方法之一，并且保证几乎不需要同步处理器时间。

您可以使用 Gearman 或[ZeroMQ](http://www.zeromq.org)。它们在 PHP 中都得到了很好的支持。

# php - 降序排序

> ID：14534672
> 
> 赞同：22
> 
> 时间：2013-01-26T06:57:19.353
> 
> 标签：php, arrays, sorting, multidimensional-array, usort

当我尝试[从此处应用以下代码时](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2/2699159#2699159)

```
usort($myArray, function($a, $b) {
    return $a['order'] - $b['order'];
}); 
```

它给了我升序的结果。

**输出**：

```
0
0
0
0
0
0.29
1.09
6.33 
```

在交换 $a 和 $b 时，它会按降序给出结果，除了一个值

```
usort($myArray, function($a, $b) {
    return $b['order'] - $a['order'];
}); 
```

**输出**：

```
6.33
1.09
0
0
0
0
0.29
0 
```

我希望按以下顺序获得结果：

```
6.33
1.09
0.29
0
0
0
0
0 
```

我如何达到同样的效果。？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-26T07:05:17.510

我的第一个猜测是 usort 期望一个整数响应，如果它们不是整数，它将四舍五入你的返回值。以0.29为例，与0比较时，结果为0.29（或-0.29），四舍五入为0。对于usort，0表示两个值相等。

尝试这样的事情：

```
usort($myArray, function($a, $b) {
    if($a['order']==$b['order']) return 0;
    return $a['order'] < $b['order']?1:-1;
}); 
```

（我认为这是正确的方向。要颠倒顺序，请将 更改`<`为`>`）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-14T20:51:10.927

只需如下切换 $a 和 $b 即可；

```
function sort($a, $b){ 
return strcasecmp($b->order, $a->order);
}
usort($myArray, "sort"); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-12-03T11:57:01.567

在 php 7（及更高版本）中使用 space ship 运算符：

```
usort($myArray, function($a, $b) {
    return $a['order'] <=> $b['order'];
}); 
```

将返回按升序排序的数组。反转比较将以降序返回。

```
usort($myArray, function($a, $b) {
    return $b['order'] <=> $a['order'];
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-21T20:55:17.500

我知道这很旧，但希望这对某人有所帮助。设置降序的最简单方法是乘以负数 (-1)，如下所示。对我来说效果很好，有文字。

```
function DESC($a, $b)
{
    return strcmp($a["text"], $b["text"])*-1;
}

usort($results,"DESC"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-15T13:14:10.933

排序后，您也可以简单地反转数组。

以与您相同的方式开始：

```
usort($myArray, function($a, $b) {
    return $a['order'] - $b['order'];
}); 
```

然后像这样反转结果：

```
$myArray = array_reverse($myArray); 
```

# php - 隐藏一个类别

> ID：14534676
> 
> 赞同：1
> 
> 时间：2013-01-26T06:58:37.793
> 
> 标签：php, wordpress

如何从页面中隐藏“课程或通话”类别..

我有`var_dump`作为参数传递给的变量`query_posts`

```
$args = jr_filter_form();
var_dump($args);
query_posts($args); 
```

![在此处输入图像描述](../Images/5ea5984b9d6e93e4840970a89425e396.png)

这个类别`tag_ID="69"`在它的 url 中，我在 WordPress 仪表板，工作类别页面中看到过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:27:47.220

始终检查[WordPress 法典](http://codex.wordpress.org/)，这是你的朋友 :)

它在[此处的](http://codex.wordpress.org/Function_Reference/query_posts#Exclude_Categories_From_Your_Home_Page)[query_posts](http://codex.wordpress.org/Function_Reference/query_posts)文档中有详细说明

但是，我建议不要使用 query_posts。[有关详细信息，请参阅此内容](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)。

[get_posts](http://codex.wordpress.org/Template_Tags/get_posts)更可能是您需要的 - 快速 Google 将为您提供[此示例](https://wordpress.stackexchange.com/questions/28084/exclude-category-from-get-posts)。

# git - 如何保持 git fork 更新？

> ID：14534677
> 
> 赞同：2
> 
> 时间：2013-01-26T06:58:46.387
> 
> 标签：git, github, git-fork

> **可能重复：**
> [我可以将 git 上的分叉项目更新为原始/主副本吗？](https://stackoverflow.com/questions/7297486/can-i-update-a-forked-project-on-git-to-the-original-master-copy)

假设我 fork 一个项目，然后将其克隆到我的机器上。

此时，`git pull`， 以及`git fetch`，`git rebase origin/branch_name`参考我的分叉存储库。如果我想变基到原始存储库的主库，我将如何做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T07:03:43.103

将原始存储库添加为远程

```
git remote add upstream git@github.com:<OriginalUser>/<OriginalRepo>.git 
```

然后从那里变基

```
git fetch upstream
git rebase upstream/master 
```

# android - 使用特定条件执行查询

> ID：14534678
> 
> 赞同：0
> 
> 时间：2013-01-26T06:58:55.193
> 
> 标签：android, database

我想做一个查询。我不确定它在 android sql db 中是否可用。我想根据开始和结束字符以及字符串的长度进行查询。假设，在我的数据库中我有你好，如何，欢呼，亲爱的。我想从数据库中获取蜂蜜，所以我想做一个查询，比如它会找到以“h”开头并以“y”结尾的字符串和单词的长度是 5。为此，我的查询字符串是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:18:35.837

它应该是

```
select * from `table` where LENGTH(`field`) = 5 and `field` LIKE `h%y` 
```

# windows - 我无法安装 WordPress 3.5.1

> ID：14534684
> 
> 赞同：0
> 
> 时间：2013-01-26T06:59:41.943
> 
> 标签：windows, wordpress

我已经在 Windows 上下载并安装了 XAMPP 1.8.1。XAMPP 控制面板正在运行，Apache 启动，MySQL 启动。

当我单击 wordpress\wp-admin 文件夹中的 install.php 时，出现以下错误：

```
Error: PHP is not running

WordPress requires that your web server is running PHP. Your server does not have PHP installed, or PHP is turned off.
>
get_var("SHOW TABLES LIKE '$wpdb->users'") != null ); // Ensure that Blogs appear in search engines by default $blog_public = 1; if ( ! empty( $_POST ) ) $blog_public = isset( $_POST['blog_public'] ); $weblog_title = isset( $_POST['weblog_title'] ) ? trim( stripslashes( $_POST['weblog_title'] ) ) : ''; $user_name = isset($_POST['user_name']) ? trim( stripslashes( $_POST['user_name'] ) ) : 'admin'; $admin_password = isset($_POST['admin_password']) ? trim( stripslashes( $_POST['admin_password'] ) ) : ''; $admin_email = isset( $_POST['admin_email'] ) ? trim( stripslashes( $_POST['admin_email'] ) ) : ''; if ( ! is_null( $error ) ) { ?>

ERROR: %s' ), $error ); ?> 
```

我从未使用过这个工具，也从未使用过 MySQL（MySQL 在哪里？）。如何让 WordPress 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:18:11.560

您是否使用 http 请求访问该文件？（例如*[http://localhost/mysite](http://localhost/mysite)*）。这可能是重置服务（Apache 和 MySQL）或进行全新安装的情况，但需要更多信息来提供帮助。

快速谷歌为这个问题提供了许多解决方案，请参阅 [PHP not working in XAMPP](https://stackoverflow.com/questions/9406433/php-not-working-in-xampp)或[http://wordpress.org/support/topic/wordpress-xampp-and-virtual-hosts-please-help](http://wordpress.org/support/topic/wordpress-xampp-and-virtual-hosts-please-help)。事实上，您甚至可以尝试[XAMPP](http://www.apachefriends.org/en/xampp.html)站点，或者只是尝试谷歌搜索错误消息。

有许多根本原因，除非您提供有关[您所尝试](http://mattgemmell.com/2008/12/08/what-have-you-tried/)的更多详细信息，否则此问题只能有推测的答案。

# css - 标记中的多个类 - 它会降低性能吗？

> ID：14534689
> 
> 赞同：0
> 
> 时间：2013-01-26T07:00:19.117
> 
> 标签：css

因此，我正在为一家大型连锁酒店开发一个网站，并且在 css 中，他们为每种可以想象的情况提供了一个预先存在的类。

我正在编辑一个页面，添加了 100 多个

带有代码的实例：

```
<p class="pad-b10 pad-t15 margin-b5 border-bottom-black"> 
```

它在底部应用 10px 的填充，在顶部应用 15px 的填充，在底部应用 5px 的边距，在下面应用黑色边框。

我的问题是，创建一个包含所有这些参数的类是否更有意义？我在 CSS 的其余部分中看不到很多自定义类。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:13:41.290

在 Mozilla 的实现中（可能还有其他实现），对于每个元素，CSS 引擎都会搜索样式规则以找到匹配项。引擎从右到左评估每个规则，从最右边的选择器（称为“键”）开始，遍历每个选择器，直到找到匹配项或丢弃规则。（“选择器”是规则应该应用到的文档元素。）

在这种情况下，拥有单一样式元素非常值得，这样浏览器只需要搜索一个键（css 类名），从而提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:05:11.333

我强烈建议您毫不犹豫地按照您描述的方式（在更统一的类中）清理该 CSS。您继承的 CSS 似乎非常有限。但我认为它不会像驱使任何人调试混乱的坚果那样减慢页面速度！这是一个有效的担忧。

编辑：还想补充一点，基于位置和高度（`pad-b10`、、`pad-t15`等`margin-b5`）的命名类基本上与硬编码内联 CSS 一样糟糕。重做 CSS，使其在语义上有意义。必须有一个共同的模式，所以要适应它。但是这样的 CSS 让我生病了。

# java - 在 Eclipse 中使用代号一

> ID：14534695
> 
> 赞同：2
> 
> 时间：2013-01-26T07:01:48.950
> 
> 标签：java, iphone, ios, objective-c, codenameone

我有一个想要在 iPhone 上运行的当前 Java 应用程序。这只是为了兴趣，因此我不介意 GUI 是否有点偏离，所以我希望用尽可能少的步骤来做到这一点。

我已经将代号一个插件安装到 eclipse 中，但不知道从哪里开始。

我做了什么：

我创建了一个代号类型的新项目，打开源文件夹（在 Eclipse 中）并将创建的文件替换为我已经编写的 java 文件。但是，我现在每次使用文件中的 swing 组件都会出错。我能做些什么？

我在想我不应该删除我删除的文件——它们只是生成的类，但是我不知道如何将它与我当前的 java 程序合并（顺便说一句，这是一个国际象棋应用程序）。

此外，我所有的 java 文件都在一个名为 chess 的包中 - 这是一个问题吗？

抱歉，我只是不确定从这里去哪里 - 在互联网上找不到任何有用的东西。我所需要的只是获取我的 java 代码并转换为 c (Obs) 的最简单方法，以及一种将其传输到我的 iPhone 上运行的方法。

提前感谢您的任何建议。PS我刚刚注意到我认为文件中缺少一些属于代号的导入。有没有办法可以自动插入所有必需的导入？PPS OK 几个导入 eclipse 已决定插入已删除的错误。这些是诸如

导入 com.codename1.ui.events.ActionEvent；

JFrame、JChechkBox、JButton、JLabel 等需要哪些导入？有没有 ...*; 我可以导入以获得必要的包的目录？

再次感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T04:44:08.617

代号一不支持 Swing。Swing 有许多桌面级别的假设。您将需要重写 Swing 代码以使用 Codename One API 和可能的 Java 功能的其他用途，例如同样不受支持的反射（以保持代码较小）。

删除我们生成的代码可能不是一个好主意，因为 main 方法不是构建移动应用程序的正确方法。您需要生命周期类和主题。

Codename One UI API 与 Swing 非常相似，因此在某些情况下移植应该是微不足道的，但它是有效的，有些事情只是不同。

# .net - LoadKeyboardLayout 不会改变屏幕键盘的 UI

> ID：14534700
> 
> 赞同：1
> 
> 时间：2013-01-26T07:03:14.423
> 
> 标签：.net, vb.net, unicode, tamil, on-screen-keyboard

我已经为我的应用程序激活了 Windows 屏幕键盘，并在显示屏幕键盘之前将[键盘布局](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318693%28v=vs.85%29.aspx)更改为泰米尔语，使用以下代码：

```
Private Const KLF_ACTIVATE As Integer = 1
Dim oskProcess As System.Diagnostics.Process

Private Sub ProdNameText_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles ProdNameText.GotFocus
        LoadKeyboardLayout("00000449", KLF_ACTIVATE)
        oskProcess = Process.Start("osk.exe") 
End Sub 
```

我可以通过以下方式在文本框中输入泰米尔语：

*   在我的键盘上按下键
*   单击屏幕键盘中的键

但屏幕键盘仅显示英文字符。当我单击语言栏中的泰米尔语时，屏幕键盘上的键会显示泰米尔语字符。

当以编程方式进行更改时，为什么屏幕键盘的字符不会根据当前键盘布局的更改而更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:27:28.593

这是因为键盘布局是每个进程的属性。您只更改了进程的键盘布局，没有更改 osk.exe。

没有用于更改另一个进程的键盘布局的 winapi 函数。鉴于语言栏知道如何做，它只提供了一个暗示，它是可能的，但它是一个保守得很好的秘密。语言栏是通过文本服务框架 api（ItfLangBarMgr 等）控制的，这是一个非常令人不快的 api，并且很难从托管代码中使用。快速浏览显示没有明显支持更改布局的界面方法。可能这是困难/不可能的最好暗示是 osk.exe 不这样做，这是您期望它具有的功能。我不得不建议你坚持使用语言栏。

# java - 实例方法是否能够在 java 中默认并发执行？

> ID：14534701
> 
> 赞同：1
> 
> 时间：2013-01-26T07:03:39.063
> 
> 标签：java, concurrency, synchronized

我知道 synchronized 关键字，但我想确保我有一个清晰的理解。

所以，如果我不使用 synchronized 关键字，一个实例变量可能会被两个线程覆盖，但如果我使用 synchronized 关键字，一次只能有 1 个线程进入该方法。对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:09:30.940

> 如果我不使用 synchronized 关键字，一个实例变量可能会被两个线程覆盖

它不会被“覆盖”，但它可以由两个线程同时执行，如果它不是为处理这种情况而设计的，可能会导致不一致。

> 如果我确实使用 synchronized 关键字，一次只能有 1 个线程进入该方法。

如果您使用该方法，那是正确的`synchronized`：该关键字提供了一定数量的保证，包括互斥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T07:10:42.193

如果两个线程进入一个非同步的方法并更新一些共享状态，那么它可能会导致不一致。

```
public synchronized void method(){ 
      //only one thread will be able to enter (IF SAME INSTANCE)
} 
```

但它也建立了一种**先发生的**关系。这是多线程的可见性部分。

> 两个动作可以通过happens-before关系排序。如果一个动作发生在另一个动作之前，那么第一个动作对第二个动作可见并在第二个动作之前排序。

[发生在](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)JLS 之前。

# objective-c - 图像未显示在 imageView 中

> ID：14534704
> 
> 赞同：0
> 
> 时间：2013-01-26T07:03:46.747
> 
> 标签：objective-c, uiimageview

在我的应用程序中，我在 annotationView 中使用 rightCalloutButtons 在地图上有引脚，按下时会拉出第二个视图。在第二个视图中，用户可以拍摄一张照片，然后将其放入 imageView 中。我将图像分配给所选 mkannotation 的图像属性，但图像未显示。有人可以告诉我我做错了什么吗？这是一些代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    _annotation.image = image;

    [imageView setImage:_annotation.image];

    [self dismissViewControllerAnimated:YES
                             completion:nil];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [imageView setImage:_annotation.image]
} 
```

这是 _annotation ivar 设置为我存储在数组中的 mkannotation 的位置：

```
- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex {
    if(buttonIndex==1)
    {
        _annotation = [[Data singleton].annotations objectAtIndex:identifier];
        [[Data singleton] removePin:_annotation];
        NSLog(@"The singleton array count is: %u", [Data singleton].annotations.count);
        _vc = [[P2OViewController alloc]init];
        [[self navigationController]pushViewController:_vc
                                          animated:YES];
    }
} 
```

我的问题是，一旦拍摄了照片，它就不会出现在 imageView 中。

# jquery - jQuery一个接一个触发

> ID：14534705
> 
> 赞同：0
> 
> 时间：2013-01-26T07:03:48.273
> 
> 标签：jquery, events

有人可以告诉我如何一个接一个地触发事件吗？我选择了 3 个班级。我需要在第一堂课点击后触发一个事件，然后它应该转到第二堂课，依此类推......

```
$(".col-1 #number, .col-2 #number, .col-3 #number").waterDrop({event:"mouseover"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:07:16.700

```
$(".col-1 #number1").click(function(){
     $(".col-2 #number2").hide(500,function(){
          $(".col-2 #number3").show()
     })
}) 
```

使用回调函数

# javascript - 为什么图片不能在 iPad2 上绘制？

> ID：14534710
> 
> 赞同：0
> 
> 时间：2013-01-26T07:04:47.683
> 
> 标签：javascript, html, html5-canvas

下面的代码在 Chrome、Safari 和 Firefox 中就像一个魅力，但在我的 iPad2 iOS5 中不起作用为什么

```
function preImage(url,callback){
  var img = new Image(); 
  img.src = url;

  if (img.complete) { 
    callback.call(img);
    return; 
  }

  img.onload = function (){ 
     callback.call(img);
  };
}
(function() {
  var my_canvas=document.getElementById("myCanvas");
  var context=my_canvas.getContext("2d");
  preImage("img/test.png",function(){
    context.drawImage(this,0,0);
  });
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:10:31.857

以下似乎在我的 iPhone 和 iPad 模拟器上运行良好，两者都运行 IOS6。我注意到你说的是IOS5，错字？还是有意的？

```
var preImage = function(url, callback){
    var img = new Image(); 
    img.src = url;

    if (img.complete) { 
        callback.call(img);
        return; 
    }

    img.onload = function (){ 
        callback.call(img);
    };
};
(function() {
    var my_canvas = document.getElementById("myCanvas");
    var context = my_canvas.getContext("2d");
    preImage("img/picture.jpg", function(){
        context.drawImage(this,0,0);
    });
})(); 
```

注意添加了';' 在 preImage 声明之后。

# wordpress - Wordpress WooCommerce：“下订单”不起作用

> ID：14534711
> 
> 赞同：1
> 
> 时间：2013-01-26T07:05:01.607
> 
> 标签：wordpress, woocommerce

我正在使用 1.6.6 版本的 WooCommerce，但我遇到了一个问题：

当支付网关 -> PayPal ->“使用表单提交方法。”被选中时 - 我正在尝试结帐 - “下订单”按钮给我“加载”淡入淡出动画，然后将我重定向回结帐页面（就像只是刷新）。

未选中时，“下订单”按钮有效，我可以结帐，但我没有从 PayPal 获得订单详细信息。

我正在使用 BlueHost。

提前致谢，

阿维尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:42:37.647

解决了。

“404 Redirected”插件刚刚用 ?querystring 捕获了所有调用，但从未给出回复。

该死。

# java - Java中Set和SortedSet接口之间的逻辑不一致

> ID：14534713
> 
> 赞同：4
> 
> 时间：2013-01-26T07:05:11.437
> 
> 标签：java, collections, set, sortedset

我注意到 Java 中 Set 和 SortedSet 接口之间的逻辑不一致。

SortedSet 将不同的对象（通过 equal() 方法）识别为相等，如果它们在比较期间相同，但它在逻辑上是不正确的。对象的比较应该只负责对象的顺序。

例如：我可以有很多产品，我想按价格对它们进行排序。在这种情况下，SortedSet 不能包含价格相同的不同产品：[“salt”,0.5$], [“milk”, 1$], [“bread”, 1$], [“bananas”, 2$ ] 在上面的例子中，牛奶将被面包代替。在这种情况下，继承的 Set 接口的约定将被违反，因为不相等的对象相互替换。我红色了 SortedSet 的 JavaDoc，并且知道这种行为有据可查，但我认为这是一个逻辑上的失败。

你怎么看，也许你已经对 Set 和 SortedSet 有类似的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T07:10:47.273

这不是逻辑上的失败，而是设计的属性。请注意，如果您的比较算法与 equals 一致，`a.compareTo(b) == 0`则将等效于`a.equals(b)`.

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)实际上对此非常明确：

> 一个有序集合的行为是明确定义的，即使它的排序与equals不一致；它只是不遵守 Set 接口的一般约定。

**那有用吗？**

这实际上在您想要达到特定行为的地方提供了灵活性。例如，假设您想将字符串放入 SortedSet 并忽略大小写对它们进行排序，您可以使用：

```
Set<String> set = new TreeSet<> (String.CASE_INSENSITIVE_ORDER); 
```

这将达到预期的结果，但是：

```
set.add("ABC");
set.add("abc"); 
```

只会将一个字符串添加到您的集合中，因为它们将被视为与该特定比较器相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:25:41.850

在 Java 中，一般来说，两个对象`a`和`b`是相同的 if `a.equals(b) == true`。而一个 Set，每个 Set，甚至是 SortedSet，都没有重复项，所以如果你重写`equals`比较价格属性，如果两个对象具有相同的价格，则它们是相同的。

我猜你不会覆盖`equals`方法，而是提供一个`Comparator`to`SortedSet`来进行排序。在这种情况下，如另一个答案中所述， if`a.compareTo(b) == 0`将等同于`a.equals(b)`.

如果你想订购那个 Set，你需要的是另一个结构，比如一个 List 来进行排序。就像是：

```
List<Product> list = new ArrayList<Product>(myUnorderedProductsSet);
Collections.sort(list, comparatorByPrice); 
```

请注意，这不会加倍或复制您的 Product Bean，而只是另一个结构，以不同的顺序引用相同的对象。所以不是昂贵的或可以避免的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:08:53.020

您可能指的`equals()`是实际可用的方法`Object`，因此 Java 中的每个对象类型要么覆盖它，要么从`Object`.

# python - Django-book教程模型第5章

> ID：14534716
> 
> 赞同：0
> 
> 时间：2013-01-26T07:05:49.750
> 
> 标签：python, django, django-models, model

我目前正在通过 Django-book 教程学习 Django，但遇到了一个错误。在第 5 章，我应该在 python 解释器中输入这个

```
 >>> p1 = Publisher.objects.create(name='Apress', 
    ... address='2855 Telegraph Avenue', 
    ... city='Berkeley', state_province='CA', country='U.S.A.', 
    ... website='http://www.apress.com/') 
    >>> p2 = Publisher.objects.create(name="O'Reilly", 
    ... address='10 Fawcett St.', city='Cambridge', 
    ... state_province='MA', country='U.S.A.', 
    ... website='http://www.oreilly.com/') 
    >>> publisher_list = Publisher.objects.all() 
    >>> publisher_list 
```

根据教程，我应该得到一个输出

```
 [<Publisher: Publisher object>, <Publisher: Publisher object>] 
```

但是我得到了相同的输出，但是有 4 个对象！！

```
 [<Publisher: Publisher object>, <Publisher: Publisher object>, <Publisher: Publisher object>, <Publisher: Publisher object>] 
```

另外我应该从 django.db import models 将我的 models.py 更改为这个（添加的 unicode 函数）

```
 class Publisher(models.Model): 
    name = models.CharField(max_length=30) 
    address = models.CharField(max_length=50) 
    city = models.CharField(max_length=60) 
    state_province = models.CharField(max_length=30) 
    country = models.CharField(max_length=50) 
    website = models.URLField() 

    def __unicode__(self): 
            return self.name 

    class Author(models.Model): 
    first_name = models.CharField(max_length=30) 
    last_name = models.CharField(max_length=40) 
    email = models.EmailField() 

    def __unicode__(self): 
            return u'%s %s' % (self.first_name, self.last_name) 

    class Book(models.Model): 
    title = models.CharField(max_length=100) 
    authors = models.ManyToManyField(Author) 
    publisher = models.ForeignKey(Publisher) 
    publication_date = models.DateField() 

    def __unicode__(self): 
            return self.title 
```

为了显示对象。这是根据教程的输出

```
 >>> from books.models import Publisher 
    >>> publisher_list = Publisher.objects.all() 
    >>> publisher_list 
    [<Publisher: Apress>, <Publisher: O'Reilly>] 
```

但我仍然得到

```
 [<Publisher: Publisher object>, <Publisher: Publisher object>, <Publisher: Publisher object>, <Publisher: Publisher object>] 
```

不知道为什么我得到更多的对象，为什么我不能查看 unicode 的输出......

感谢您的帮助！

**http://django-book.readthedocs.org/en/latest/chapter05.html 是具体章节的链接！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:16:14.870

试试这个示例：

**模型.py**

```
class Debt(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50,
        help_text="Name to identify your debt.")
    due_day = models.PositiveSmallIntegerField(
        help_text="Day of the month payment is due.")

    def __unicode__(self):
        return "{0}".format(self.user) 
```

**视图.py**

```
def debt(request):

return render(request, 'debt.html', {
    'debts': Debt.objects.filter(),
}) 
```

**债务.html**

```
 {% for debt in debts %}
     {{debt.user}} - {{debt.name}} <br/>
 {% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:25:29.293

这是因为您已经运行了两次代码。这些值已经保存在数据库中。当您再次运行它时，将保存另外两个值并且它们是重复的。

# android - android.view.InflateException: Binary XML file line #134: Error inflating class

> ID：14534718
> 
> 赞同：1
> 
> 时间：2013-01-26T07:06:09.883
> 
> 标签：android

我在我的主应用程序中使用 AdMob。但是当我启动一些服务时，我得到了异常：`android.view.InflateException: Binary XML file line #134: Error inflating class <unknown>`

`main`AdMob 布局

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="bottom"
        android:orientation="vertical" >

        <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="xxx"
            android:gravity="bottom" />
    </LinearLayout> 
```

然后当我运行调用此代码的服务时：

```
private View getMainLayout() {
        LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.main, null);

        return layout;
    } 
```

我得到例外：

```
01-26 07:55:56.500: W/dalvikvm(21075): threadid=1: thread exiting with uncaught exception (group=0x40c7a1f8)
01-26 07:55:56.655: E/AndroidRuntime(21075): FATAL EXCEPTION: main
01-26 07:55:56.655: E/AndroidRuntime(21075): java.lang.RuntimeException: Unable to create service com.xxx.sss.service.SmsService: android.view.InflateException: Binary XML file line #134: Error inflating class <unknown>
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2274)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.app.ActivityThread.access$1600(ActivityThread.java:127)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1212)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.os.Looper.loop(Looper.java:137)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at java.lang.reflect.Method.invokeNative(Native Method)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at java.lang.reflect.Method.invoke(Method.java:511)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at dalvik.system.NativeStart.main(Native Method)
01-26 07:55:56.655: E/AndroidRuntime(21075): Caused by: android.view.InflateException: Binary XML file line #134: Error inflating class <unknown>
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at com.xxx.sss.service.SmsService.getMainLayout(SmsService.java:79)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at com.xxx.sss.service.SmsService.setOnLabelOnButton(SmsService.java:68)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at com.xxx.sss.service.SmsService.onCreate(SmsService.java:37)
01-26 07:55:56.655: E/AndroidRuntime(21075):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2264) 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-24T09:06:32.597

您也可以尝试添加依赖项：将 'com.google.android.gms:play-services-ads:8.4.+' 编译到您的应用级别 build.gradel 并构建项目。

然后在你的 layout.xml 文件中添加

```
<com.google.android.gms.ads.AdView
                    android:id="@+id/adView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentBottom="true"
                    android:layout_centerHorizontal="true"
                    ads:adSize="BANNER"
                    ads:adUnitId="@string/banner_ad_unit_id"/> 
```

banner_ad_unit_id：这必须是您的唯一 ID

将波纹管添加到您的 java 文件 java 文件

```
mAdView = (AdView) mMainView.findViewById(R.id.adView); 
```

不要忘记在清单文件中添加**AdActivity 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:12:24.917

您是否忘记`com.google.ads.AdView`在清单文件中声明库？

# django - 包含外部属性的 Django 查询

> ID：14534719
> 
> 赞同：0
> 
> 时间：2013-01-26T07:06:19.790
> 
> 标签：django, django-queryset

我有这个模型类：

```
class question(models.Model):
    id = models.CharField(max_length=64, primary_key=True,null=False)
    paper_id = models.ForeignKey(paper,null=True)
    question_no = models.SmallIntegerField('question_no',max_length=6,null=True)
    content = models.TextField('content',null=False)
    topic_id = models.ForeignKey(topic,null=True)
    subtopic_id = models.ForeignKey(subtopic,null=True)
    std_answer = models.CharField(max_length=128,null=True)
    marks = models.IntegerField('marks',max_length=2,null=True)
    input = models.CharField(max_length=512,null=True,default=None)
    type_answer = models.CharField(max_length=512,null=True)
    type = models.CharField(max_length=512,null=True,default=None)

    def __str__(self):
        return str(self.id) 
```

我需要列出它的所有属性，包括分别位于外部对象 Topic、Subtopic、Paper 中的 Topic.Title、Subtopic.Title 和 Paper.Title。如何在单个查询中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:31:42.877

要根据外键属性进行过滤，请使用 FK 模型名称后跟双下划线，然后是属性名称：

```
query = question.objects.filter(topic_id__title="foobar") 
```

要轻松创建复杂查询，请使用[Q 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:40:18.493

您的 models.py 必须是这样的，例如：

```
class Topic(models.Model):
    .....

class SubTopic(models.Model)
    topic = models.ForeignKey(Topic)
    .....

class question(models.Model):
   question_no = models.SmallIntegerField('question_no',max_length=6,null=True)
   content = models.TextField('content',null=False)
   subtopic = models.ForeignKey(Subtopic)
   ..... 
```

您不必输入 id 因为 django 会为您创建它。

视图.py

```
def page(request):
return render(request, 'page.html', {
    'topics' : topic.objects.filter()
}

if you want to get by id

def page(request, id):
    topics = topic.objects.get(pk=id)
return render(request, 'page.html', {
    'topics' : topic
} 
```

您的模型类不正确。你不必放很多外键。一个外键就可以了。

```
{% for topic in topics %}
    {{topic.title}}

    {% for subtopic in topic.subtopics  %}
        {{subtopic.title}}

        {% for question in subtopic.questions %}
            ............
        {% endfor %} 
    {% endfor %}
{% endfor %} 
```

# bluetooth - 连接蓝牙耳机时出现 WP8 错误

> ID：14534722
> 
> 赞同：0
> 
> 时间：2013-01-26T07:06:52.677
> 
> 标签：bluetooth, windows-phone-8, headset

场景是： 1\. 打开我的诺基亚蓝牙 BH-214。2\. 等待我的 Lumia 822 建立连接。 3\. 运行代码。

异常是从

等待 socket.ConnectAsync(selectedDevice.HostName, "1");

Message =“通常只允许使用每个套接字地址（协议/网络地址/端口）。（来自 HRESULT 的异常：0x80072740）”

代码：PeerFinder.AlternateIdentities["Bluetooth:Paired"] = ""; varpairedDevices = 等待 PeerFinder.FindAllPeersAsync();

```
 if (pairedDevices.Count == 0)
       {
          Debug.WriteLine("No paired devices were found.");
       }
       else
       {
          // Select a paired device. In this example, just pick the first one.
          PeerInformation selectedDevice = pairedDevices[0];
          StreamSocket socket = new StreamSocket();
          try
          {
              await socket.ConnectAsync(selectedDevice.HostName, "1");
          }
          catch (Exception ee)
          {
          }
       } 
```

这是否意味着，如果音频BT耳机已经连接了原生应用程序，我无法连接它？我有自己的音乐播放器，我想收听 BT 耳机发送的播放/暂停/FF/FW 评论，仅此而已。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:45:24.330

是的，如果操作系统已连接到免提（等）服务，那么应用程序就不能。

桌面 Windows 上有一个 API 可以按下“媒体”播放器按钮，它在 WP8 上不可用吗？操作系统从蓝牙免提/耳机设备等获取事件并引发这些事件。

或者。同样在桌面 Windows 上，它可以在控制面板中以编程方式启用/禁用每个设备上的特定蓝牙服务。也许这在 WP8 上可用？

# c++ - 我可以将任意源 IP 绑定到套接字吗？

> ID：14534731
> 
> 赞同：1
> 
> 时间：2013-01-26T07:07:59.733
> 
> 标签：c++, c, sockets, tcp, winsock

我有一个 TCP 服务器在无限循环中运行，如下面的伪代码：

```
while (true)
{
    auto new_connected_socket = accept(listening_socket,...); 
    // Here it may block for a long time

    std::thread(fn_new_connection_handler, new_connected_socket);
} 
```

如果管理员想要停止 TCP 服务器，则必须很好地打破无限循环。

我想到的一种方法是使用特殊的套接字连接到 TCP 服务器。使套接字“特殊”的是它的源 IP 是“特殊的”，例如 255.255.255.255 显然不是有效的源 IP。

如果它是合法的，那么客户端伪代码可能如下所示：

```
auto special_socket = socket(...);
bind(special_socket, "255.255.255.255", ...);
connect(special_socket, tcp_server_addr, ...); 
```

并且服务器端伪代码可能如下：

```
while (true)
{
    auto new_connected_socket = accept(listening_socket,...);
    // Here it may block for a long time

    if (IsSpecialSourceIp(new_connected_socket))
    {
        break; // Exit the server thread.
    }
    else
    {
        std::thread(fn_new_connection_handler, new_connected_socket);
    }
} 
```

这种解决方案可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:26:39.913

如[accept](http://linux.die.net/man/2/accept) ( `man 2 accept`) 的手册页中所述，您可以将套接字标记为非阻塞操作，并使用[select](http://linux.die.net/man/2/select)或[poll](http://linux.die.net/man/2/poll)来确定连接是否正在等待。甚至重复调用 accept 并检查 EAGAIN 或 EWOULDBLOCK 作为返回值，中间有足够的停顿。

当然 select 或 poll 是更好的选择，因为您不需要“忙等待”并且您会收到新连接的即时通知（较低的延迟）。与阻塞代码并执行一些晦涩的套接字魔术来关闭服务器相比，这无疑是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:38:30.210

不要尝试使用“特殊”地址，只需在应用程序的内存中设置一个`while`循环可以查看的标志，然后`connect()`绑定到任何服务器机器的本地 IP 的普通套接字（让`connect()`您处理绑定，您不需要`bind()`手动调用），例如：

```
bool shutting_down = false; 
```

.

```
while (!shutting_down)
{
    auto new_connected_socket = accept(listening_socket,...); 
    // Here it may block for a long time

    if (shutting_down)
    {
        closesocket(new_connected_socket);
        break;
    }

    std::thread(fn_new_connection_handler, new_connected_socket);
} 
```

.

```
shutting_down = true;

if (server is listening)
{
    sockaddr_in server_addr = {0};
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(my server port);
    server_addr.sin_addr.s_ddr = inet_addr("127.0.0.1");

    SOCKET wakeup_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    connect(wakeup_socket, (sockaddr*)&server_addr, sizeof(server_addr));
    closesocket(wakeup_socket);
} 
```

更好的方法是简单地将您的侦听套接字置于非阻塞模式，并`select()`在循环中使用超时，以便它可以定期唤醒自己：

```
while (!shutting_down)
{
    fd_set rds;
    FD_ZERO(&rds);
    FD_SET(listening_socket, &rds);

    timeval t;
    t.tv_sec = 5;
    t.tv_usec = 0;

    if ((select(0, &rds, NULL, NULL, &t) > 0) && (!shutting_down))
    {
        auto new_connected_socket = accept(listening_socket,...); 
        std::thread(fn_new_connection_handler, new_connected_socket);
    }
} 
```

更好的是，使用`WSACreateEvent()`and`WSAWaitForMultipleEvents()`代替`select()`：

```
WSAEVENT hShutdownEvent = WSACreateEvent(); 
```

.

```
WSAEVENT hAcceptEvent = WSACreateEvent();
WSAEventSelect(listening_socket, hAcceptEvent, FD_ACCEPT);

while (true)
{
    WSAEVENT hEvents[2];
    hEvents[0] = hAcceptEvent;
    hEvents[1] = hShutdownEvent;

    DWORD dwRet = WSAWaitForMultipleEvents(2, hEvents, FALSE, INFINITE, FALSE);
    if (dwRet == WSA_WAIT_EVENT_0)
    {
        auto new_connected_socket = accept(listening_socket,...); 
        std::thread(fn_new_connection_handler, new_connected_socket);
    }
    else
        break;
}

WSACloseEvent(hAcceptEvent); 
```

.

```
if (server is listening)
    WSASetEvent(hShutdownEvent); 
```

# ruby-on-rails - Rails 应用程序中的连接超时

> ID：14534733
> 
> 赞同：0
> 
> 时间：2013-01-26T07:08:45.207
> 
> 标签：ruby-on-rails, apache, connection-timeout

我有一个 Rails 应用程序部署在 Apache + Passenger + Rails 2.3.8(Ruby 1.8.7) + Linux 服务器 + MySQL 5 上。

我正在尝试通过从数据库获取记录并下载它来创建一个 excel 报告。

当我的报告有 < = 600（大约）条记录时，它会成功创建并下载。

但是当报告包含更多记录时，它不会被下载。

查询和逻辑处理在后端和应用服务器中完成，但浏览器在一段时间后开始抛出连接超时。

我尝试过增加 keepAlive 时间，也尝试过修改浏览器设置。没有什么对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:37:56.230

由于您没有提供您的代码，我只能回答一个一般性的答案。

在我看来，让请求的响应时间过长总是不理想的，即使您可以避免浏览器的超时问题。你有两个更好的选择：

1.  如果您不需要回复最新数据，请使用 cron 作业生成您的 excel 文件并在收到请求时回复它。这是一个很好的[参考](https://stackoverflow.com/questions/285717/a-cron-job-for-rails-best-practices)。

2.  如果你必须回复最新的数据，把你数据库中的数据分成很多部分，分别重播。（在这种情况下，您可能需要多次发送请求）

# sql-server - SQL Server：选择 ID 出现在字符串中的记录

> ID：14534744
> 
> 赞同：1
> 
> 时间：2013-01-26T07:10:05.573
> 
> 标签：sql-server

我有一个项目表，需要选择在从其他地方形成和检索的字符串中找到项目 ID 的行。例如，要匹配的字符串如下所示：

```
'100684','103223','103228' 
```

或者我可以剥离它来生产：

```
100684,103223,103228 
```

但我没有从以下尝试中获得任何成功：

```
SQL = "SELECT * FROM Table Where ID LIKE '" & strString & "'  "
SQL = "SELECT * FROM Table Where ID IN '" & strString & "'  "
SQL = "SELECT * FROM Table Where PATINDEX('%" & ID & "%','" & strString & "') > 0 "
SQL = "SELECT * FROM Table Where PATINDEX(ID,'" & strString & "') > 0 "
SQL = "SELECT * FROM Table Where CHARINDEX(ID, '" & strString & "') > 0 " 
```

这些要么无法产生结果，要么给出错误，例如

> *参数数据类型 int 对 charindex 函数的参数 1 无效*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:14:58.043

使用您的字符串的剥离版本并尝试

```
SQL = "SELECT * FROM Table Where ID IN (" & strString & ")" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:16:37.843

从 STRING 到 INT 的转换会有所帮助

```
SQL = "SELECT * FROM Table Where ID = CONVERT(INT,'"&strString &"')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T08:05:04.743

这是一个很好的经验法则：作为参数传入的字符串永远不应该连接到 SQL 查询文本中。

正确的方法是使用命名参数或表值参数。您希望得到这样的 sql 查询：

```
 SQL = "SELECT * FROM Table Where id IN (@p1, @p2, @p3)" 
```

然后你调用它为@p1、@p2、@p3 传入适当的值。可以使用不同数量的@p 动态构建字符串。

如果要传入的值超过 2100 个，则应使用表值参数。

最后，您还可以使用拆分器安全地解析 T-SQL 中的字符串。Jeff Moden 在 SSC 上有一篇关于有效分割文本的优秀文章：[http ://www.sqlservercentral.com/articles/Tally+Table/72993/](http://www.sqlservercentral.com/articles/Tally+Table/72993/)

# java - .properties 文件未在 java 动态 Web 应用程序中创建

> ID：14534753
> 
> 赞同：0
> 
> 时间：2013-01-26T07:11:23.980
> 
> 标签：java, properties

我正在开发一个 java Web 应用程序，我想在其中使用属性类来存储用户名和密码，并将它们存储在 XYZ.properties 文件中。当我执行代码时，没有创建 XYZ.properties 文件。我想为每个用户注册添加用户名和密码到这个属性文件。所以我正在调用从 Servlet 创建属性文件的方法。

**下面的代码片段**

```
public  String insertUser(String uname,String password, Properties UserDetails) throws NullPointerException,IOException,FileNotFoundException
    {

        UserDetails.setProperty(uname, password);

        try {
            File file = new File("XYZ.properties");
            FileOutputStream  fw=new FileOutputStream (file);
            UserDetails.store(fw, "my:op"); 
```

# sql - 如何在sql中对表进行透视

> ID：14534754
> 
> 赞同：0
> 
> 时间：2013-01-26T07:11:24.210
> 
> 标签：sql, pivot

我创建了一个表如下：

```
create table stud(sname nvarchar(10), hr nvarchar(30),  dt int,att varchar(3)) 
```

我插入的值如下：

```
insert into stud values ('Abi',  '1',  '21/01/2013','a')
insert into stud values ('Abi',  '2',  '21/01/2013','p')

insert into stud values ('bala',  '1',  '21/01/2013','p')
insert into stud values ('bala',  '2',  '21/01/2013','a')

insert into stud values ('bala',  '1',  '22/01/2013','od')
insert into stud values ('bala',  '2',  '22/01/2013','ml')

insert into stud values ('Abi',  '1',  '22/01/2013','ml')
insert into stud values ('Abi',  '2',  '22/01/2013','od') 
```

* * *

如果选择表格意味着我得到的输出为：

```
sname   hr   dt   att

abi      1    20/1/2013 a
abi      2    20/1/2013 p

bala      1    20/1/2013 p
bala      2    20/1/2013 a 
```

* * *

但我希望输出为：

```
sname    h1    h2

abi      a      p
bala     p      a 
```

如何旋转桌子..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:18:28.153

这种类型的转换称为*枢轴*。`nvarchar`由于您提供的创建表代码中的使用，我假设 SQL Server 作为数据库。

如果您使用的是 SQL Server 2005+，那么您可以使用 pivot 函数，代码将是：

```
select sname, [1] as h1, [2] as h2
from
(
  select sname, hr, att
  from stud
  where att in ('a', 'p')
) d
pivot
(
  max(att)
  for hr in ([1], [2])
) p; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/9e551/5)。

如果您没有使用 SQL Server 2005+ 或在另一个不支持数据透视的数据库上，那么您可以使用带有`CASE`表达式的聚合函数：

```
select sname,
  max(case when hr=1 then att end) as H1,
  max(case when hr=2 then att end) as H2
from stud
where att in ('a', 'p')
group by sname; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/9e551/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T15:43:00.283

[Ray 在Sql Server 2008 Cross Tab Query](https://stackoverflow.com/questions/7956908/sql-server-2008-cross-tab-query)中的响应应该为您提供符合标准的 DBMS 所需的详细信息。

# php - Laravel Eloquent 限制每个用户的结果 - 日期组合

> ID：14534758
> 
> 赞同：0
> 
> 时间：2013-01-26T07:11:50.700
> 
> 标签：php, mysql, laravel, eloquent

在我的数据库中，我得到了具有以下结构的下表：

```
[taskdate_user]
id : int
user_id : int
taskdate_time : datetime 
```

例如，如果我有 2 行包含以下数据：

```
id : 1
user_id : 1
taskdate_time : 2013-01-25 10:15

id : 2
user_id : 1
taskdate_time : 2013-01-25 11:15 
```

我需要过滤掉用户和 taskdate_time 组合的最早时间。我现在收到以下查询：

```
// Get all the TaskdateUser objects for this week
$taskdateuser = TaskdateUser::where('taskdate_time', '>=', $this_monday)->where('taskdate_time', '<', $this_sunday)->order_by('taskdate_time', 'ASC')->get(); 
```

这将为我提供本周的所有 TaskdateUser 对象，但它确实返回了所有对象。现在，我正在按 taskdate_time 进行排序，并且正在按升序进行。所以我为 user_id - taskdate_time 组合选择每个第一个对象。

这似乎是很多额外的代码来过滤掉第一个 user_id - date 组合。有人建议简化这个吗？提前谢谢了！

**编辑 2：**

***我需要最早的时间，每个用户，每个日期。***

我通过以下方式编辑了我的查询：

```
 $taskdateuser = TaskdateUser::where('taskdate_time', '>=', $monday)
                                ->where('taskdate_time', '<', $sunday)
                                ->raw_where('id IN 
                                    (
                                        SELECT id
                                        FROM taskdate_user 
                                        GROUP BY date_format(taskdate_time, "%Y-%m-%d"), user_id
                                     )')
                                ->order_by('taskdate_time', 'ASC')
                                ->get(); 
```

如果我回显所有的taskdate_times，输出如下：

```
2013-01-21 14:14:00
2013-01-21 17:47:02
2013-01-25 10:56:00
2013-01-26 17:56:41 
```

我在 2013 年 1 月 26 日和 2013 年 1 月 25 日有多个 taskdate_time，它们只会显示 1 次。而 2013-01-21 总是出现 2 次。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:51:18.580

[从分组的 MySQL 数据中获取最新日期](https://stackoverflow.com/questions/8470311/get-the-last-date-from-mysql-data)

您将不得不使用 RAW 查询，但如果我了解您想要什么，那应该会对您有所帮助。

就像是：

```
$taskdateuser = DB::query(SELECT `id`,`user_id`,`taskdate_time` FROM `taskdate_user` WHERE `taskdate_time` IN (SELECT max(`taskdate_time`) FROM `taskdate_user`)); 
```

# iphone - iPhone 应用程序用户通过 Apple ID 帐户注册和计费

> ID：14534761
> 
> 赞同：1
> 
> 时间：2013-01-26T07:12:12.730
> 
> 标签：iphone, in-app-purchase, app-store, in-app-billing

我们正在为我们的项目构建一个 iPhone 应用程序，我担心用户的**唯一**方法是：

1.  注册一个帐户；
2.  购买额外内容

是通过用户的 Apple ID 帐户。这对我们不利，因为：

1.  我们没有获取用户详细信息数据
2.  30% 的款项归苹果所有

但正如我的同事所说，这是处理此问题的唯一正确方法 - 否则应用程序可能会被应用商店禁止。那么我可以在 iPhone 应用程序中以某种方式在网站上进行注册/付款吗？可以通过什么方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:52:41.400

看看 Evernote 如何实现他们的服务。您可以通过应用内购买从应用内订阅高级服务，您也可以在他们的网站上使用信用卡或任何其他形式的在线支付进行同样的操作。

这里的关键是用户的电子邮件地址。当用户注册时，他们向服务提供他们的电子邮件地址，该地址基本上与用户名相关联。我很确定您知道接下来可以使用该电子邮件地址做什么。祝你好运！

# ios - 在 UICollectionView 中的单元格上创建视图

> ID：14534762
> 
> 赞同：2
> 
> 时间：2013-01-26T07:12:21.467
> 
> 标签：ios, objective-c, xcode, uicollectionview

我在将新创建的视图放置在 UICollectionView 单元格上时遇到问题（并将其增长以填充屏幕）。当集合视图滚动到顶部时效果很好，但是一旦滚动，我就无法正确放置新视图，因为我收集的浮点值低于窗口高度。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    UIView *picturesView = [[UIView alloc] init];
    picturesView.frame = CGRectMake(CGRectGetMidX([[collectionView cellForItemAtIndexPath:indexPath] bounds]), CGRectGetMidY([[collectionView cellForItemAtIndexPath:indexPath] bounds]), 100, 100);

    [self.view addSubview:picturesView];

    [UIView animateWithDuration:0.3 animations:^{
        picturesView.frame = CGRectMake(0, 0, windowWidth, windowHeight);
        picturesView.alpha = 1.0;
    }];
} 
```

这里的问题是 CGRectMake 的 x 和 y 参数中的值大于滚动后的可用窗口区域，并且视图出现在滚动剪辑下方（新创建的视图似乎从屏幕底部向上滑动，这不是所需的动画）。

逻辑会让我通过 positionY = ((totalScrollHeight - topScrollAreaClipped) + screenPositionOfCell) 计算这些应该放在哪里。我似乎无法获得的唯一变量是被滚动剪辑的 UICollectionView 的高度。

除非有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:37:26.837

您需要补偿`UICollectionView`. 检查`scrollOffsett`属性，并从您的 x/y 位置减去该值，为您的`UIView`.

# java - 如何将换行符附加到 StringBuilder

> ID：14534767
> 
> 赞同：266
> 
> 时间：2013-01-26T07:13:35.420
> 
> 标签：java, stringbuilder

我有一个[`StringBuilder`](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)对象，

```
StringBuilder result = new StringBuilder();
result.append(someChar); 
```

现在我想在`StringBuilder`. 我该怎么做？

```
result.append("/n"); 
```

不工作。因此，我正在考虑使用 Unicode 编写换行符。这会有帮助吗？如果是这样，我该如何添加一个？

* * *

## 回答 #1

> 赞同：568
> 
> 时间：2013-01-26T07:18:54.583

它应该是

```
r.append("\n"); 
```

但我建议你做如下，

```
r.append(System.getProperty("line.separator")); 
```

`System.getProperty("line.separator")`在 java 中为您提供系统相关的换行符。同样从 Java 7 开始，还有一个直接返回值的方法：[`System.lineSeparator()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#lineSeparator%28%29)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-12-03T18:00:37.507

另一种选择是使用 Apache Commons StrBuilder，它具有 StringBuilder 所缺乏的功能。

[StrBuilder.appendLn()](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/text/StrBuilder.html#appendln(org.apache.commons.lang3.text.StrBuilder))

从 3.6 版开始，StrBuilder 已被弃用，取而代之的是具有相同功能的[TextStringBuilder](https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/TextStringBuilder.html)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-26T07:17:47.023

逃生应该做`\`，而不是`/`。

所以`r.append('\n');`or`r.append("\n");`将起作用（具有和类型`StringBuilder`的重载方法）。`char``String`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-06T05:26:20.303

我创建了类似于 StringBuidler 的原始类，并且可以通过调用方法 appendLine(String str) 来追加行。

```
public class StringBuilderPlus {

    private StringBuilder sb;

    public StringBuilderPlus(){
         sb = new StringBuilder();
    }

    public void append(String str)
    {
        sb.append(str != null ? str : "");
    }

    public void appendLine(String str)
    {
        sb.append(str != null ? str : "").append(System.getProperty("line.separator"));
    }

    public String toString()
    {
        return sb.toString();
    }
} 
```

用法：

```
StringBuilderPlus sb = new StringBuilderPlus();
sb.appendLine("aaaaa");
sb.appendLine("bbbbb");
System.out.println(sb.toString()); 
```

安慰：

```
aaaaa
bbbbb 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-29T20:45:02.323

您可以用于`line.seperator`在其中添加新行

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-29T07:12:48.130

对于 Kotlin，

`StringBuilder().appendLine("your text");`

虽然这是一个 java 问题，但这也是 Kotlin 的第一个 google 结果，可能会派上用场。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-18T21:23:51.340

您还可以在`String.format`(See `java.util.Formatter`) 中使用行分隔符，这也是平台无关的。

IE：

```
result.append(String.format("%n", "")); 
```

如果您需要添加更多行空格，只需使用：

```
result.append(String.format("%n%n", "")); 
```

您还可以使用`StringFormat`以格式化整个字符串，并在末尾添加换行符。

```
result.append(String.format("%10s%n%n", "This is my string.")); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-08T13:30:13.520

除了 KS 响应创建 StringBuilderPlus 类并利用适配器模式扩展 final 类之外，如果您使用泛型并在新的 append 和 appendLine 方法中返回 StringBuilderPlus 对象，您可以利用 StringBuilders 的许多 append 方法对于所有不同的类型，同时重新获得将多个附加命令串在一起的能力，如下所示

```
public class StringBuilderPlus {

    private final StringBuilder stringBuilder;

    public StringBuilderPlus() {
        this.stringBuilder = new StringBuilder();
    }

    public <T> StringBuilderPlus append(T t) {
        stringBuilder.append(t);
        return this;
    }

    public <T> StringBuilderPlus appendLine(T t) {
        stringBuilder.append(t).append(System.lineSeparator());
        return this;
    }

    @Override
    public String toString() {
        return stringBuilder.toString();
    }

    public StringBuilder getStringBuilder() {
        return stringBuilder;
    }
} 
```

然后你可以像原来的 StringBuilder 类一样使用它：

```
StringBuilderPlus stringBuilder = new StringBuilderPlus();
stringBuilder.appendLine("test")
    .appendLine('c')
    .appendLine(1)
    .appendLine(1.2)
    .appendLine(1L);

stringBuilder.toString(); 
```

# javascript - 使用jquery将表的内容添加到选择框

> ID：14534770
> 
> 赞同：-1
> 
> 时间：2013-01-26T07:14:00.230
> 
> 标签：javascript, jquery

我有一个在页面底部生成的表格。我想获取该表的内容（第二列）并将其放在页面顶部的选择框中。最好按字母顺序。

我在这里缺乏想法，但这是我目前拥有的代码。

```
<div id="content">
    <p>Lots of content goes here...</p>
    <p>Lots of content goes here...</p>
    <p>Lots of content goes here...</p>
    <p>Lots of content goes here...</p>
    <p>Lots of content goes here...</p>
    <table id="fav-table">
        <tbody>
            <tr>
                <th>Number</th>
                <th>Name</th>
            </tr>
            <tr>
                <td>1</td>
                <td><a href="http://www.example/com/durham">Durham</a></td>
            </tr>    
            <tr>
                <td>2</td>
                <td><a href="http://www.example/com/leicester">Leicester</a></td>
            </tr>
            <tr>
                <td>3</td>
                <td><a href="http://www.example/com/london">London</a></td>
            </tr>
            <tr>
                <td>4</td>
                <td><a href="http://www.example/com/manchester">Manchester</a></td>
            </tr>
            <tr>
                <td>5</td><td><a href="http://www.example/com/worcester">Worcester</a></td>
            </tr>
            <tr>
                <td>6</td>
                <td><a href="http://www.example/com/newcastle">Newcastle</a></td>
            </tr>
        </tbody>
    </table>
</div> 
```

用jquery

```
 jQuery('#content').prepend(jQuery('#fav-table').html()); 
```

如果我手动添加这个 jquery，那么它就可以工作。

```
jQuery('#content').prepend('<select><option value="http://www.example/com/durham">Durham</option><option value="http://www.example/com/leicester">Leicester</option><option value="http://www.example/com/london">London</option><option value="http://www.example/com/manchester">Manchester</option><option value="http://www.example/com/newcastle">Newcastle</option><option value="http://www.example/com/worcester">Worcester</option></select>'); 
```

但是，由于表的数据可能会发生变化，我希望 jquery 基于表的第二列。我该怎么做呢？

我也将代码放在了[这个 jsfiddle](http://jsfiddle.net/aaronk85/jVKe3/)中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:23:03.463

试试这个可能会有所帮助。更改以满足您的需要:)

```
var values=[], options=[];

//Iterate  td's in second column
$('#fav-table>tbody>tr>td:nth-child(2)').each( function(){
//add item to array
values.push( $(this).text() );         
});

//restrict array to unique items so that select have only unique values in dropdown
var values = $.unique( values );

var values = values.sort();// sort the array

//iterate unique array and build array of select options
$.each( values, function(i, value){
options.push('<option value="' + value + '">' + value + '</option>'); 
})

//finally empty the select and append the items from the array
$('#selectId').empty().append( options.join() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:24:18.940

更新 ：

```
 $('body').append('<select id="select">');
     var mylist = $('#select');
    $('#fav-table tr td:nth-child(2) a').each(function(){
    var text = $(this).text();
        mylist.append('<option value=' + $(this).attr('href') + '>'+text+'</option>')
    }
    )

     var listitems = mylist.children('option').get();
     listitems.sort(function(a, b) {
        var compA = $(a).text().toUpperCase();
        var compB = $(b).text().toUpperCase();
        return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
     })
     $.each(listitems, function(idx, itm) { mylist.append(itm); }); 
```

订单代码取自其他问题 [现场演示](http://jsfiddle.net/5GU7r/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T07:31:14.890

您必须先创建一个`select`添加到它的对象`options`，然后再添加到您的对象中`div`，方法是创建 select 的 html 字符串并添加它。您可以使用 jQuery`sort`对锚文本进行排序，然后`each`进行迭代以创建选项。

**[现场演示](http://jsfiddle.net/rajaadil/jVKe3/6/)**

```
sel = $('<select>');
jQuery('#fav-table a').sort(function(a, b){
    return $(a).text() > $(b).text();
}).each(function () {
  sel.append("<option value=\"" + this.href + "\">" + $(this).text() + "</option>");
});
jQuery('#content').prepend(sel); 
```

# r - R代码中的多个条件

> ID：14534774
> 
> 赞同：0
> 
> 时间：2013-01-26T07:15:18.527
> 
> 标签：r, conditional-statements

假设，我有一个数据集，例如，

```
y <- c(0,0,1,2,2,1,0,1)
a <- c(0,2,1,1,0,2,0,3)
dat <- data.frame(y, a) 
```

我想`f <- digamma(a+y)`通过使用条件来计算的值

```
if(a>0 & y==0) then f
if(a==0 & y>0) then f
if (a==0 & y==0) then f = 1 
```

我怎样才能使用 R 代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:20:30.283

我认为这会给你事后的结果：

```
f <- digamma(a+y) 
f[a==0 & y==0] <- 1 
```

或者

```
f[is.nan(f)] <- 1 
```

好吧，这是使用索引来查看向量中的哪些元素是 nan 或在第一种方法中 a 和 y 都是 0。然后索引`[]`说取 f 的这些元素，赋值`<-`说使这些元素成为一个。

# linux - bash，如何将记录器脚本转换为函数

> ID：14534778
> 
> 赞同：0
> 
> 时间：2013-01-26T07:15:49.803
> 
> 标签：linux, bash, logging, exec

我想将我的所有标准输出和错误转发到一个记录器脚本，该脚本使用一些额外的信息（例如 dateTime）记录它们，并且脚本导致了错误。经过一番谷歌搜索后，我终于以这种方式编写了我的 bash 程序：我在主脚本中添加了这两行：

```
exec  1> >(xargs ./doLog)
exec  2> >(xargs ./doLog) 
```

./doLog 有点像这样：

```
if [ -n $1 ]
then
    echo -n "Jaky: `date`: $@ " >> $Log_File
fi 
```

因此，它从 1> 和 2> 获取每个输入并将其回显到我的日志文件中。问题是由于某种原因我需要将 doLog 脚本转换为执行相同结果的函数。但我不知道如何将 exec 1 和 2 的输入传递给函数。我尝试了 xargs 和其他文件描述符，但我无法得到结果。

另一个问题是传递给 doLog 的日志不包含行尾字符，因此所有输出看起来都相互连接。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:23:35.880

你不能`xargs`用于函数。这就是为什么您需要直接从标准输入读取函数中的数据。使用`read`. 下面有一个小例子。

功能：

```
dolog()
{
  while read log_entry
  do
   echo "Jaky: `date`: $log_entry " >> $Log_File 
  done
} 
```

用法：

```
your-command | dolog 
```

# c - C - 格式化 MAC 地址

> ID：14534780
> 
> 赞同：3
> 
> 时间：2013-01-26T07:15:53.513
> 
> 标签：c, formatting

我目前正在解析一些 MAC 地址。我得到一个不包括前导零的输出（像这样）。

```
char* host = "0:25:25:0:25:25"; 
```

我想像这样格式化它

```
char* host = "00:25:25:00:25:25"; 
```

解决这个问题的最简单方法是什么？

对于那些想知道的人，我正在使用 libpcap 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T07:26:18.103

我可能在问题中遗漏了一些东西。假设您知道它是一个有效的 MAC，并且输入字符串因此是可解析的，您是否考虑过以下简单的事情：

```
char* host1 = "0:25:25:0:AB:25";
char *host2 = "0:1:02:3:0a:B";
char result[19];
int a,b,c,d,e,f;

// the question sample
if (sscanf(host1, "%x:%x:%x:%x:%x:%x", &a,&b,&c,&d,&e, &f) == 6)
    sprintf(result, "%02X:%02X:%02X:%02X:%02X:%02X", a,b,c,d,e,f);
printf("host1: %s\n", result);

// a more daunting sample
if (sscanf(host2, "%x:%x:%x:%x:%x:%x", &a,&b,&c,&d,&e, &f) == 6)
    sprintf(result, "%02X:%02X:%02X:%02X:%02X:%02X", a,b,c,d,e,f);
printf("host2: %s\n", result); 
```

**输出**

```
host1: 00:25:25:00:AB:25
host2: 00:01:02:03:0A:0B 
```

显然，对于极度偏执的人，您需要确保`a-f`所有值都 < 255，这可能是更可取的。在性能不是关键问题的情况下，我更喜欢这个的根本原因是您在问题中可能没有考虑到*许多事情。*它处理所有

1.  的前导值`"n:"`，其中`n`是*任何*十六进制数字；不只是零。例子：`"5:"`,`"0:"`
2.  的中间值`":n:"`，同样在与上述 (1) 相同的条件下。例子：`":A:"`,`":0:"`
3.  的尾值`":n"`。再一次，在与上述（1）相同的条件下。例子：`":b"`,`":0"`
4.  阅读时与十六进制数字无关；它适用于大写和小写数字字符。
5.  最重要的是，如果您的输入字符串已经正确格式化，则什么也不做（除了大写的十六进制值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:23:49.403

大致如下：分配一个输出字符串来保存重新格式化的 MAC 地址。遍历输入字符串并使用`strtok`分隔`:`符。在每次迭代中，将字符串的开头（2 个字节）转换为数值（例如，with `atoi`）。如果结果<16（即<0x10），则设置`"0"`到当前位置的输出字符串中，并在下一个位置以十六进制的结果；否则复制输入字符串的 2 个字节。附加`:`到输出字符串。继续直到输入结束。

# file - 批处理文件问题 - 将输入保存到带空格的文本中

> ID：14534782
> 
> 赞同：0
> 
> 时间：2013-01-26T07:16:26.073
> 
> 标签：file, variables, input, batch-file, space

我正在尝试为工作制作一个有用的批处理文件，为此，我正在尝试通过变量将注释/文本输入到 .txt 文件中。它非常适合只输入不带空格的文本（例如：“test”），但是一旦你输入了至少有 1 个空格的内容，cmd 就会关闭。（例如：“测试测试”）我不知道为什么会发生这种情况，所以我留在这里和你们在一起。任何/所有帮助将不胜感激！

```
@echo off

color 9F
title Notes
CLS

del %UserProfile%\Documents\Notes.txt
echo Issue/Request: >> %UserProfile%\Documents\Notes.txt

:StartCallNotes
CLS

echo ================== Notes =================
type %UserProfile%\Documents\Notes.txt
echo ==========================================

set /p NotesEnter=Enter Notes: 

set NewNote="%NotesEnter%"

if %NotesEnter% == CLS goTo :CLS

echo %NotesEnter% >> "%UserProfile%\Documents\Notes.txt"

goTo :StartCallNotes

:CLS
del %UserProfile%\Documents\Notes.txt
echo Issue/Request: >> "%UserProfile%\Documents\Notes.txt"
goTo :StartCallNotes

exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:38:28.843

我认为问题在于当您将用户的输入与 CLS 进行比较时。在比较这样的值时，尝试在 %NotesEnter% 中加上引号：

```
@echo off

color 9F
title Notes
CLS

del %UserProfile%\Documents\Notes.txt
echo Issue/Request: >> %UserProfile%\Documents\Notes.txt

:StartCallNotes
CLS

echo ================== Notes =================
type %UserProfile%\Documents\Notes.txt
echo ==========================================

set /p NotesEnter=Enter Notes: 

set NewNote="%NotesEnter%"

REM if user doesn't input the value echo a new line
if "%NotesEnter%" == "" echo. >> "%UserProfile%\Documents\Notes.txt"

if "%NotesEnter%" == CLS goTo :CLS

if NOT "%NotesEnter%" == "" echo %NotesEnter% >> "%UserProfile%\Documents\Notes.txt"

REM reset the variable value
set NotesEnter=

goTo :StartCallNotes

:CLS
del %UserProfile%\Documents\Notes.txt
echo Issue/Request: >> "%UserProfile%\Documents\Notes.txt"
goTo :StartCallNotes

exit 
```

# angularjs - angular.js 和 phantom.js 错误

> ID：14534785
> 
> 赞同：2
> 
> 时间：2013-01-26T07:16:47.620
> 
> 标签：angularjs, phantomjs, poltergeist

当我尝试通过此堆栈运行 phantomjs 时出现错误：rails (3.2.11)、rspec (2.12.2)、capybara (1.1.4)、poltergeist (1.0.2)、phantomjs (1.8.1) 和 angular .js (1.1.2)。

我有很多规范在这个堆栈上运行良好，没有角度。但是在我启动 Angular 的测试页面上，我收到了以下错误。当我使用 selenium 驱动程序运行规范时，它们通过了。

```
{"name"=>"visit", "args"=>["http://127.0.0.1:57124/pages/angular"]}
{"response"=>{"status"=>"success"}}
{"name"=>"find", "args"=>["./descendant-or-self::*[contains(normalize-space(.), 'Hello')]"]}
{"error"=>{"name"=>"Poltergeist.JavascriptError", "args"=>[[{"message"=>"TypeError: 'undefined' is not an object (evaluating '$lastDestination.offset().top')", "stack"=>"TypeError: 'undefined' is not an object (evaluating '$lastDestination.offset().top')
at http://127.0.0.1:57124/assets/application.js:13100
at http://127.0.0.1:57124/assets/application.js:3046
at  http://127.0.0.1:57124/assets/application.js:2722"}]]}} 
```

即使在最简单的内容上也会发生这种情况，只有没有任何其他 ng 指令（没有实例化控制器等），例如

```
<div ng-app>
  <h1>Hello</h1>
</div> 
```

规格看起来像

```
describe 'ng_posts', type: :request, js: true do
  it "should load page" do
    visit '/pages/angular'
    page.should have_content('Hello')
  end
end 
```

这似乎是一个 phantom.js 错误，因为页面在浏览器中加载（js 控制台中没有错误）并且规范使用 Selenium 运行。这是一个已知的问题？我能过去吗？谢谢。

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:11:10.250

没关系。原来这是另一个库 zurb-foundation（twitter bootstrap 的替代品）中的一个错误，该库在一周前修复，但 gem 更新还没有。如下更新 Gemfile 修复了它。

```
gem 'zurb-foundation', github: 'zurb/foundation' 
```

# mysql - 如何在不隐藏任何行的情况下对行进行分组和排序？

> ID：14534787
> 
> 赞同：0
> 
> 时间：2013-01-26T07:17:24.040
> 
> 标签：mysql

我有一张桌子`mytable`

```
id | name| location
---|-----|----------
1  | fff |  www
2  | bbb |  xxx
3  | aaa |  www
4  | eee |  xxx
5  | ddd |  yyy
6  | ccc |  xxx 
```

如何选择它以使名称按其位置按升序排列？

我期望输出为：

```
 name| location
-----|----------
 aaa |  www
 fff |  www
 bbb |  xxx
 ccc |  xxx
 eee |  xxx
 ddd |  yyy 
```

sql：

```
SELECT name, location
FROM mytable
GROUP BY location
ORDER BY location, name ASC 
```

给出：

```
 name| location
-----|----------
 bbb |  xxx
 ddd |  yyy
 fff |  www 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:29:30.243

在这种情况下，您不需要使用 GROUP BY ，只需：

```
 SELECT name, location
     FROM mytable
 ORDER BY location asc, name asc 
```

它会给你预期的结果

# c++ - 用于禁用特定平台特定文件编译的 CMake 选项

> ID：14534790
> 
> 赞同：4
> 
> 时间：2013-01-26T07:17:43.260
> 
> 标签：c++, cross-platform, cmake

我正在使用 CMake 来定义我的项目。我的目标是让特定于平台的文件易于访问，以便在所有平台上进行编辑、搜索、浏览和源代码控制。

我目前在 cmake 描述中分离了特定于平台的文件。我的 CMakeLists.txt 文件如下所示：

```
 Foo.hpp
 ${platform_directory}/Foo.cpp 
```

然后在磁盘上我有这样的东西：

```
 Foo.hpp
 win
  `- Foo.cpp 
 osx
  `- Foo.cpp 
```

在生成的项目文件中如下所示：

```
 Foo.hpp
 Foo.cpp (platform-specific version) 
```

这对于编译器来说是完美的，但这意味着开发人员缺乏用于非本地平台特定文件的 IDE 工具。

我正在寻找的是这样的（在 Xcode 中）：

```
 Foo.hpp
 Foo.cpp (OS X version)
 win
  `- Foo.cpp (file type set to plain text) 
```

或在 Visual Studio 中：

```
 Foo.hpp
 Foo.cpp (Windows version)
 osx
  `- Foo.cpp (build action set to none) 
```

关于如何设置 CMake 的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T08:28:17.467

一种方法是添加一个没有构建规则的自定义目标，特别是保存不属于给定平台构建的文件；例如

```
if(WIN32)
  add_library(Foo Foo.hpp win/Foo.cpp)
  add_custom_target(NonWindows SOURCES osx/Foo.cpp)
  source_group("osx" osx/Foo.cpp)
else(APPLE)
  add_library(Foo Foo.hpp osx/Foo.cpp)
  add_custom_target(NonApple SOURCES win/Foo.cpp)
  source_group("win" win/Foo.cpp)
endif() 
```

另一种选择（可能更接近您想要的，但更“hacky”）是将所有文件添加到目标，但将构建不需要的文件标记为`HEADER_FILE_ONLY`：

```
add_library(Foo Foo.hpp win/Foo.cpp osx/Foo.cpp)
if(WIN32)
  set_source_files_properties(osx/Foo.cpp PROPERTIES HEADER_FILE_ONLY TRUE)
  source_group("osx" osx/Foo.cpp)
else(APPLE)
  set_source_files_properties(win/Foo.cpp PROPERTIES HEADER_FILE_ONLY TRUE)
  source_group("win" win/Foo.cpp)
endif() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-05T05:02:56.980

[Fraser](https://stackoverflow.com/users/2556117/fraser)建议的 HEADER_FILE_ONLY[技术](https://stackoverflow.com/a/14703044/472698)效果很好，但是显式配置应该在哪个平台上编译哪些文件变得乏味。

给定一个 CMake 函数，如下所示：

```
function (DisableCompilingPlatformSpecificSources file_list)
   foreach(file ${file_list})
      if (
         ((${file} MATCHES "^(.*)Win32\\.cpp") AND NOT WIN32) OR
         ((${file} MATCHES "^(.*)Unix\\.cpp")  AND NOT UNIX)  OR
         ((${file} MATCHES "^(.*)Apple\\.cpp") AND NOT APPLE)
      )
         set_source_files_properties(
            ${file}
            PROPERTIES HEADER_FILE_ONLY TRUE
         )
      endif()
   endforeach()
endfunction() 
```

我们可以通过它们的后缀来控制特定于平台的源。例如：

```
set(all_sources
   Foo.hpp
   FooWin32.cpp # windows-specific
   FooApple.cpp # apple-specific
)

DisableCompilingPlatformSpecificSources("${all_sources}")

add_executable(foo ${all_sources}) 
```

[这与gyp](https://code.google.com/p/gyp/)处理[特定平台文件](https://code.google.com/p/gyp/wiki/GypUserDocumentation#Add_new_source_files)的方式非常相似，并且可以根据需要轻松扩展以支持其他后缀。

# asp.net - 对匿名用户隐藏特定的导航菜单项

> ID：14534793
> 
> 赞同：0
> 
> 时间：2013-01-26T07:18:02.743
> 
> 标签：asp.net, master-pages

我想对匿名用户隐藏位于母版页中的一些导航菜单项，并根据用户的角色隐藏其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:21:19.390

您可以使用[LoginView](https://stackoverflow.com/questions/tagged/loginview)。只需将您需要的任何内容对匿名用户不可见`<LoggedInTemplate>`：

```
<asp:LoginView
    runat="server">
        <AnonymousTemplate>
            <!-- anonymous users see this -->
        </AnonymousTemplate>
        <LoggedInTemplate>
            <!-- only registered, logged in users see this -->
        </LoggedInTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:25:18.700

有很好的方法来实现这一点。你可以使用`Control adapters`来实现这一点。请看下面的线程..

```
http://stackoverflow.com/questions/8708489/role-based-enabling-disabling-of-controls-in-asp-net 
```

# c# - ISupportIncrementalLoading 从下到上

> ID：14534796
> 
> 赞同：5
> 
> 时间：2013-01-26T07:18:21.343
> 
> 标签：c#, xaml, windows-8

我已经`ISupportIncrementalLoading`在 WinRT 中实现了增量加载`ListView`，效果很好。问题是新项目被添加到列表底部，要查看更多项目，我需要往下看。我需要的是相反的。我希望看到更多项目，我需要向上滚动。该列表基本上是一个日志文件，最新的日期必须显示在列表的底部，如果我想查看较旧的记录，我需要使用向上滚动。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-10T12:05:40.603

我知道，问题很旧，但我遇到了同样的问题，没有找到好的解决方案。

所以我会为其他有同样问题的人发布我的解决方案。

我的第一个解决方案是我自己的 IncrementalLoadCollection，它具有用于滚动和加载数据的自定义行为。它工作正常，但对我来说不够好。

所以我尝试了另一个强大的 XAML 技巧，它运行良好，除了一个小的鼠标滚轮行为。它现在颠倒了:)。

解决方案非常简单而强大。只需将 ListView 的 ScrollViewer 旋转 180° 并将其翻转以使滚动条再次位于右侧。然后对项目执行相同的操作，以使它们再次正确。

而已。增量加载由 ListView 处理，触摸事件和滚动条工作正常，只是鼠标滚轮行为现在反转了。

我的代码

```
<ListView Grid.Row="1" x:Name="ChatListView" ItemsSource="{TemplateBinding ItemsSource}" 
                              SelectionMode="None"
                              IsItemClickEnabled="False"
                              IsZoomedInView="False"
                            ShowsScrollingPlaceholders="False"
                            VerticalContentAlignment="Top" 
                              VerticalAlignment="Stretch" 
                              Margin="10,5">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListViewItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.ItemContainerTransitions>
                            <TransitionCollection/>
                        </ListView.ItemContainerTransitions>
                        <ListView.Template>
                            <ControlTemplate>
                                <Border BorderThickness="{TemplateBinding BorderThickness}"
                                        Padding="{TemplateBinding Padding}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        Background="{TemplateBinding Background}">
                                    <ScrollViewer ZoomMode="Disabled" x:Name="ScrollViewer" RenderTransformOrigin="0.5,0.5">
                                        <ScrollViewer.RenderTransform>
                                            <CompositeTransform Rotation="180" ScaleX="-1"/>
                                        </ScrollViewer.RenderTransform>
                                        <ItemsPresenter x:Name="ItemsPresenter"/>
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </ListView.Template>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <controls:ChatMessageControl Message="{Binding Message}"
                                                             ChatFrom="{Binding Name}"
                                                             IsMy="{Binding IsMy}"
                                                             ShortTime="{Binding CreatedTime}"
                                                             RenderTransformOrigin="0.5,0.5">

                                    <controls:ChatMessageControl.RenderTransform>
                                        <CompositeTransform Rotation="180" ScaleX="-1"/>
                                    </controls:ChatMessageControl.RenderTransform>
                                </controls:ChatMessageControl>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T13:12:04.967

参考 Demetrius Axenowski 的回答，这是我反转鼠标滚轮输入的方法。

**注意**我将它用于仅限桌面的应用程序

**1）**在ListView的ScrollViewer中找到第一个Grid，并hook PointerWheelChanged事件。

```
 this._ScrollViewer = this.GetChildren<ScrollViewer>().FirstOrDefault();
        if (this._ScrollViewer == null)
        {
            throw new InvalidOperationException("ScrollViewer not found.");
        }

        this._ScrollViewerInsetBorder = this.GetChildren<Border>().FirstOrDefault();

        this._BorderInsetGrid = this.GetChildren<Grid>().FirstOrDefault();
        this._BorderInsetGrid.AddHandler(ScrollViewer.PointerWheelChangedEvent, new PointerEventHandler(this.SW_Handler_OnPointerWheelChanged), true); 
```

**2)**覆盖鼠标滚轮行为。

```
 double desiredVerticalOffset = 0;
    private void SW_Handler_OnPointerWheelChanged(object sender, PointerRoutedEventArgs e)
    {
        PointerPoint mousePosition = e.GetCurrentPoint(sender as UIElement);
        var delta = mousePosition.Properties.MouseWheelDelta;

        // calculate desiredOffset
        desiredVerticalOffset = desiredVerticalOffset + delta;

        // limit desiredOffset.
        desiredVerticalOffset = desiredVerticalOffset < 0 ? 0 : desiredVerticalOffset;
        desiredVerticalOffset = desiredVerticalOffset > _ScrollViewer.ScrollableHeight ? _ScrollViewer.ScrollableHeight : desiredVerticalOffset;

        if (delta < 0 || delta > 0)
        {
            _ScrollViewer.ChangeView(null, desiredVerticalOffset, null, false);
            e.Handled = true;
        }
    } 
```

# php - 单击特定单选按钮后验证文本区域框

> ID：14534801
> 
> 赞同：1
> 
> 时间：2013-01-26T07:19:37.110
> 
> 标签：php, javascript, mysql, ajax

嗨，我在 html 中的代码是这样的

```
 <input type="radio" name='answer_value1[<?php echo $survey1->id?>]' value="<?php echo $answer1->id?>" validate="required:true" id="<?php $answer1->valdt == '1' ? print "welcome":""?>" /> 
```

这是评论框的代码

```
<textarea rows="5" cols="55" name="nn[<?php echo $survey1->id?>]" id="comment" ></textarea> 
```

如果单选按钮 id 是“欢迎”，那么我想让 textarea 应该被验证，否则不是。

我在 jquery 中写了一些代码

```
 $(function() {
    $('input[id="welcome"]')).change(function() {
    $('textarea[id="comment"]').each(function(){
        $(this).rules("add", {
            required: true,

        } );        
    } ); 
```

如果我先点击这个字段，然后如果我点击另一个单选按钮，它仍然会验证这个 textarea 字段。请给我一些想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:02:33.150

仅供参考，ajax 不用于验证。它用于从服务器异步获取数据。

```
if (document.getElementById('welcome').checked) {
    var textarea = document.getElementById('comment');

    if (textarea.value = '') {
        // validation failed
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:38:45.313

你试过这个：

var v = document.getElementById("validation1"); 验证器验证（v）；

通过这行代码，您可以强制验证器检查验证。因此您可以为您的文本框添加验证控件并在单选按钮 selectedChanged 事件处理程序上运行上述代码。

# c - a.exe 已停止工作

> ID：14534803
> 
> 赞同：-1
> 
> 时间：2013-01-26T07:19:48.220
> 
> 标签：c

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
char *createP(int);
int main()
{
    int n,i;
    char str[100];
    printf("int n = ");
    scanf("%d",&n);
    printf("string str = ");
    scanf("%s",&str);
    if(n>40)
            return -1;
    for(i=0;i<strlen(str);i++)
        if(str[i]=='X' || str[i]=='Y' || str[i]=='Z')
            continue;
            else
             return -1;
    char *P;
    P=createP(n);
    printf("The generated string is = %s",P);
    return 0;
}
char *createP(int n)
{
    if(n==0)
            return "X";
    if(n==1)
        return "Y";
    if(n==2)
        return "Z";
    if(n>2)
        return strcat(createP(n-2),createP(n-3));
} 
```

我正在尝试为以下问题创建一个字符串：

P(0) = 'X'

P(1) = 'Y'

P(2) = 'Z'

P(n) = P(n-2) + P(n-3), n>2 其中 + 表示字符串连接。我正在使用递归（看起来很明显）来解决这个问题。但是我的 .exe 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:43:52.620

您错误地使用了 strcat 。

> char * strcat ( char * 目标, const char * 源);
> 
> 将源字符串的副本附加到目标字符串。终止空字符 >indestination 被 source 的第一个字符覆盖，并且空字符 >include 在由两个 indestination 连接形成的新字符串的末尾。

尝试使用类似的东西，

```
char *createP(int n)
{
    if(n==0)
            return "X";
    if(n==1)
            return "Y";
    if(n==2)
            return "Z";
    if(n>2)
    {   

            char *P = calloc (n, sizeof(char));
            strcat(P, createP(n-2));
            strcat(P, createP(n-3));
            return P;
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:25:13.157

您需要创建一个动态列表，仅`char *P`使用不让您将其用作字符串。

尝试声明`char P[100]`，并在递归结束时放入`\0`char。

编辑：

类似的东西：

```
void createP(int n,int index)
{
    if(n==0)
            P[index] = "X";
            return ;

    if(n>2)
        return strcat(createP(n-2,index + 2),createP(n-3,index + 3));
} 
```

而 P 是全局字符串，索引从 0 开始。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-02T00:37:08.983

内存分配不正确，我在声明时遇到了同样的问题

```
type array[20]; 
```

然后打电话`array[20]=...;`

解决方案是需要声明`type array[21];`）

# clickonce - 以编程方式更新 ClickOnce 应用程序时文件关联中断

> ID：14534814
> 
> 赞同：1
> 
> 时间：2013-01-26T07:20:58.947
> 
> 标签：clickonce

我刚刚使用 VisualStudio 创建了一个 WinForms 应用程序，在**Publish -> Options -> File Associations**中添加了一个文件关联，并将其发布到一个 Web 位置。[此应用程序具有与http://msdn.microsoft.com/en-us/library/ms404263.aspx](http://msdn.microsoft.com/en-us/library/ms404263.aspx)中描述的相同的更新方法。但是当我发布更新版本然后从应用程序运行更新方法并执行更新时，文件关联消失了。

两个问题：你能重现这个吗？如果是这样，除了不使用程序更新之外还有其他解决方法吗？

# matlab - 填充 3d 图像的孔

> ID：14534818
> 
> 赞同：4
> 
> 时间：2013-01-26T07:21:18.333
> 
> 标签：matlab, 3d

我想使用形态学运算符来填充 3d 图像的孔。3d 图像由 116 个相同大小（512*512 像素）的 2-D 图像切片组成。我尝试在 Matlab 中使用 imfill 处理 3d 图像，但结果不是我想要的。小孔填满，其他孔不填

当我尝试逐片使用 imfill 时，结果是正确的。有什么方法可以填充 3d 图像中的孔吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:56:51.703

`imfill`逐片使用的 for 循环有什么问题？你说这已经奏效了。

或者，这是文件交换中的一个选项：[区域增长](http://www.mathworks.com/matlabcentral/fileexchange/32532-region-growing-2d3d-grayscale)- 一种递归区域增长算法，用于具有多边形和二进制掩码输出的 2D/3D 灰度图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-12T05:25:32.447

我最近写了[https://github.com/seung-lab/fill_voids](https://github.com/seung-lab/fill_voids)，它将快速填充拓扑洞。

或者，还有 SciPy [https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.binary_fill_holes.html](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.binary_fill_holes.html)

# charts - 如何在 Google 图表标签中显示阿拉伯字符

> ID：14534832
> 
> 赞同：0
> 
> 时间：2013-01-26T07:23:12.637
> 
> 标签：charts

这是我正在使用的代码，阿拉伯字符显示为问号。我尝试在互联网上搜索，但没有找到解决方案。

提前致谢。

```
<html>
<head>
<title>Graph</title>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport"
content="width=device-height,minimum-scale=0.5,maximum-scale=3.0,user-scalable=yes" />
<script type='text/javascript' src='http://www.google.com/jsapi'></script>
<script type='text/javascript'>
    google.load('visualization', '1', { packages: ['corechart'] });
    //google.load('visualization', '1', { packages: ['corechart'], language: 'ar' });
    google.setOnLoadCallback(drawChart);

function drawChart() {
var data = google.visualization.arrayToDataTable([['التواريخ',
 'التواريخ', 'المبلغ'],
['2004', 1000, 400], ['2005', 1170, 460], ['2006', 660, 1120], ['2007', 1030, 540]]);
        var options = { title: 'الاستهلاك الشهري', hAxis: 
{ title: 'التواريخ',   titleTextStyle: { color: 'red' } } };
var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
</script>
</head>
<body>
  <div id='chart_div' style='width: 100%; height: 100%;'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:58:22.760

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
```

应该

```
<meta http-equiv='content-type' content='text/html; charset=UTF-16' /> 
```

# objective-c - 与位 2 CFBitVectorRef

> ID：14534833
> 
> 赞同：1
> 
> 时间：2013-01-26T07:23:19.330
> 
> 标签：objective-c, bit-manipulation

给定以下代码，我将如何对 2 个位图执行按位 And 并取回生成的位图？

```
 CFBitVectorRef maskForCollection = CFBitVectorCreate(nil, 0, _tables.AllObjects.count);

    for ( LocalFilter * filter in self)
    {
        CFBitVectorRef maskForFilter = filter.ValidObjectMask;

        CFBitVectorRef blah = maskForCollection & maskForFilter;
    } 
```

这篇文章是相关的：[如何按位和 CFBitVector](https://stackoverflow.com/questions/9846516/how-to-bitwise-and-cfbitvector)，但它根本没有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:34:54.847

以下函数创建`CFBitVectorRef`两个位图的按位与。该函数假定两个位图具有相同的大小`count`（在您的情况下是正确的，正如您在评论中所说）。

该函数创建第一个位图的（可变）副本，然后清除第二个位图中为零的所有位。

```
CFBitVectorRef CreateBitmapAnd(CFBitVectorRef bm1, CFBitVectorRef bm2, CFIndex count)
{
    CFMutableBitVectorRef result = CFBitVectorCreateMutableCopy(NULL, count, bm1);
    for (CFIndex i = 0; i < count; i++) {
        if (CFBitVectorGetBitAtIndex(bm2, i) == 0)
            CFBitVectorSetBitAtIndex(result, i, 0);
    }
    return result;
} 
```

与[如何按位和 CFBitVector](https://stackoverflow.com/questions/9846516/how-to-bitwise-and-cfbitvector)的建议解决方案相比，此函数不使用位图的内部表示。

不同的实现如下：

```
CFBitVectorRef CreateBitmapAnd(CFBitVectorRef bm1, CFBitVectorRef bm2, CFIndex count)
{
    size_t nbytes = (count + 7)/8;
    UInt8 *bytes1 = malloc(nbytes); // (Error checking omitted)
    UInt8 *bytes2 = malloc(nbytes);
    CFBitVectorGetBits(bm1, CFRangeMake(0, count), bytes1);
    CFBitVectorGetBits(bm2, CFRangeMake(0, count), bytes2);
    for (size_t i = 0; i < nbytes; i++) {
        bytes1[i] &= bytes2[i];
    }
    CFBitVectorRef result = CFBitVectorCreate(NULL, bytes1, count);
    free(bytes1);
    free(bytes2);
    return result;
} 
```

优点是它对字节而不是位进行操作（并且可以进一步优化以对整数进行操作），缺点是需要分配和释放内存。

# javascript - 如何打开子浏览器窗口，然后在新加载的子浏览器页面上执行脚本以单击其中的链接

> ID：14534834
> 
> 赞同：0
> 
> 时间：2013-01-26T07:23:23.177
> 
> 标签：javascript, url, popup, zoho

我有 2 个 Web 应用程序 A 和 B（对于熟悉 Zoho 的人，A 是 Zoho Creator，B 是 Zoho Invoice）

从 Web 应用程序 A，我需要在应用程序 B 中打开一个页面并进入 B 中的特定视图，该视图只能通过单击 B 中页面上的链接来获得（因为该视图是通过视图的 AJAX 加载获得的） .

B 的限制是它不会通过带有参数的 URL 公开我想要的特定视图（即，我无法通过新的浏览器窗口请求 www.appB.com/somePage?ID=1233 获得我想要的.我只能让新的浏览器窗口请求 www.appB.com/somePage 然后我需要手动单击 B 中的 AJAX 链接打开我想要的视图）。

A 的限制是我无法访问 javascript。我在新的浏览器窗口中打开另一个 Web 应用程序的方式有限（Zoho Creator 的 Deluge 语言）。我所能做的就是给A的网页一个URL并告诉它在同一个窗口或新窗口中打开它。因此，在打开新浏览器窗口时，我在 A 的网页上拥有的唯一操作能力是新网页的 URL。

我想要完成的是 - 从 A 的网页仅通过 URL 打开新的浏览器窗口，该窗口加载 B 的初始页面，然后我的 javascript 执行并单击 B 上的链接，该链接在 B 的浏览器窗口中加载所需的 AJAX 视图。

关于如何让它发挥作用的任何想法？非常感谢您的意见，并提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:44:21.453

总结一下我之前评论中的结论：

1.  您不能通过页面 URL 将 javascript 注入页面。您可以在 URL 中传递参数，但接收页面需要已经编码才能对这些参数进行操作。
2.  如果两个页面位于不同的域中并且未预先设计为协作，则您不能使用一个页面中的 javascript 对另一个页面进行操作。这是称为同源策略的安全限制，您可以在[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)阅读。
3.  因此，如果您无法以任何方式修改页面 B，并且 B 与 A 位于不同的域中，并且 A 和 B 没有预先设计为合作，那么您无法从 A 中单击 B 中的链接。

# jakarta-ee - 在 javaee 中配置 mysql 数据源

> ID：14534843
> 
> 赞同：3
> 
> 时间：2013-01-26T07:24:25.673
> 
> 标签：jakarta-ee, datasource, glassfish-3

好吧，伙计们，我知道这看起来很愚蠢，因为已经问了很多问题，但是没有一个解决了我配置 mysql 数据源的问题。我正在使用“Eclipse IDE”、“MySql 数据库”和“java 语言”。我已将 context.xml 配置为

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
 <Resource name="jdbc/world" auth="Container" type="javax.sql.DataSource"
           maxActive="50" maxIdle="30" maxWait="10000"
           username="root" password="admin" 
           driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/world"/>
</Context> 
```

然后 web.xml 作为

```
<resource-ref>
<description>MySQL Datasource example</description>
<res-ref-name>jdbc/world</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

在连接文件名 WorldCityBean.java 我尝试了两种方式，即

通过注释类和使用 InitialContext 但它根本不起作用。

```
public class WorldCityBean {

@Resource(name="world")
private DataSource ds;

private Connection conn;

public void open() throws SQLException, NamingException{
    if(conn !=null)
    {
        return;
    }

//      Context ic = new InitialContext();
//      Context subcontext = (Context) ic.lookup("java:comp/env");
//      DataSource ds = (DataSource) subcontext.lookup("jdbc/world");

    conn = ds.getConnection();
}
} 
```

并给出这个例外

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message

descriptionThe server encountered an internal error () that prevented it from     fulfilling this request.

exception 
javax.servlet.ServletException: An error occurred performing resource injection on     managed bean city

root cause 
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing     resource injection on managed bean city

root cause 
com.sun.faces.spi.InjectionProviderException:         com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to     inject Res-Ref-Env-Property: world@javax.sql.DataSource@ resolved as: jndi:     world@res principal: null@mail: null
No Runtime properties
Database Vendor : null
Create Tables at Deploy : false
Delete Tables at Undeploy : false into class com.corejsf.WorldCityBean

root cause 
com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting     to inject Res-Ref-Env-Property: world@javax.sql.DataSource@ resolved as:     jndi: world@res principal: null@mail: null
No Runtime properties
Database Vendor : null
Create Tables at Deploy : false
Delete Tables at Undeploy : false into class com.corejsf.WorldCityBean

root cause 
javax.naming.NamingException: Lookup failed for 'java:comp/env/world' in             SerialContext  [Root exception is javax.naming.NamingException: Lookup failed for 'world'     in SerialContext  [Root exception is javax.naming.NameNotFoundException: world not found]]

root cause 
javax.naming.NamingException: Lookup failed for 'world' in SerialContext  [Root     exception is javax.naming.NameNotFoundException: world not found]

root cause 
javax.naming.NameNotFoundException: world not found

note The full stack traces of the exception and its root causes are available in the     GlassFish Server Open Source Edition 3.0.1 logs.

--------------------------------------------------------------------------------

GlassFish Server Open Source Edition 3.0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:22:51.657

使用 context.xml 不是在 Glassfish 中配置 JDBC 资源的标准方法。虽然有一些方法可以通过部署描述符（[Stackoverflow 链接](https://stackoverflow.com/questions/1684583/what-is-the-glassfish-alternative-to-context-xml)）来配置它，但我还是推荐使用 Web 控制台。登录，转到资源并定义连接池和 JDBC 资源（[Glassfish 3.0.1 的链接](http://docs.oracle.com/cd/E19798-01/821-1752/beamo/index.html)）。如果您这样做，您可以测试/ping 您的 SQL 连接并检查所有参数是否正确。当你确定你指定了正确的参数时，通常的注入就足够了，但要小心——你必须指定：

```
@Resource(name="jdbc/world") 
```

代替

```
@Resource(name="world") 
```

# sql - SQL 查询 APEX 上的 FORM

> ID：14534848
> 
> 赞同：3
> 
> 时间：2013-01-26T07:24:57.093
> 
> 标签：sql, oracle, oracle11g, oracle-apex

我正在使用 Oracle APEX 4.2。我已经创建了表格表格、表格表格和带有报告的表格表格。我已经尝试了很多在 SQL 查询上创建表单，但我做不到。

我在 SQL 查询上有两个与表单相关的问题！

首先，我想在两个表上创建 SQL 查询表单，即`

```
Patient_Registration 
```

> `Pat_Id(Pk),Name,Address,Gender ,Age,Contact`

和`Patient_Charges`

> P_Ch_Id(Pk)、Patient_Id(Fk)、P_Doc_Charges、P_Extra_Charges

其次，如果创建了 from，那么我们将能够以一种形式在两个表上进行插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T06:51:29.080

我*认为*我理解你的问题。

使用您的 SQL 查询创建一个视图，然后添加执行必要 DML 的 Before Insert 触发器。

查看一些示例应用程序，了解这方面的想法。

# ios - 调整 TableViewCell 和 UIImageView 大小时的问题

> ID：14534850
> 
> 赞同：0
> 
> 时间：2013-01-26T07:25:17.107
> 
> 标签：ios, uitableview, uiimageview, dimensions

我有一个带有自定义单元格的 TableView。每个单元格显示一个 300 像素大的 UIImageView（并非所有图像都具有相同的尺寸）。然后我使用宽度/高度比来动态获取新高度。

此时，我调整了 UIImageView 和 TableViewCell 的大小：

```
// In -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
// Resize my UIIMageView
cell.myImage.frame = CGRectMake(10, 10, 300, newHeight);

// In -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
return newHeight; 
```

但是我遇到了一些奇怪的事情，一些图像超出了它们的单元格，扩展到了其他单元格。有什么我错过或做错了吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:29:56.003

就这样`return new height`_`(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath"`

```
(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 90;
} 
```

# mysql - 搜索非常大的彩虹表文件

> ID：14534852
> 
> 赞同：0
> 
> 时间：2013-01-26T07:25:20.493
> 
> 标签：mysql, c, file-io, large-data

我正在寻找搜索一个非常大的彩虹表文件（13GB 文件）的最佳方法。这是一个 CSV 样式的文件，看起来像这样：

```
1f129c42de5e4f043cbd88ff6360486f; somestring
78f640ec8bf82c0f9264c277eb714bcf; anotherstring
4ed312643e945ec4a5a1a18a7ccd6a70; yetanotherstring 
```

...你明白了 - 大约有 9 亿行，总是带有哈希、分号、明文字符串。

所以基本上，程序应该看看这个文件中是否有一个特定的哈希。

最快的方法是什么？显然，我无法将整个文件读入内存，然后`strstr()`在上面放一个。

那么最有效的方法是什么？

1.  逐行读取文件，总是到一个`strstr()`；
2.  读取较大的文件块（例如 10.000 行），执行`strstr()`

或者将所有这些数据导入 MySQL 数据库然后通过 SQL 查询搜索散列会更有效吗？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:32:01.130

最好的方法是对其进行排序，然后对其使用类似于[二进制搜索](https://en.wikipedia.org/wiki/Binary_search_algorithm)的算法。对其进行排序后，大约需要 O(log n) 时间才能找到特定条目，其中 n 是您拥有的条目数。您的算法可能如下所示：

1.  保留起始偏移量和结束偏移量。将起始偏移量初始化为零，将结束偏移量初始化为文件大小。
2.  如果 start = end，则不匹配。
3.  从偏移量（开始+结束）/ 2读取一些数据。
4.  向前跳，直到看到换行符。（您可能需要阅读更多内容，但如果您在第 3 步中选择合适的大小（比大多数记录大）来阅读，您可能就不必再阅读了。）
5.  *   如果您使用的哈希是您要查找的哈希，请继续执行第 6 步。
    *   否则，如果您所在的哈希值小于您要查找的哈希值，请将 start 设置为当前位置并转到第 2 步。
    *   如果您所在的哈希值大于您要查找的哈希值，请将 end 设置为当前位置并转到第 2 步。
6.  跳到分号和尾随空格。未散列的数据将从当前位置到下一个换行符。

这可以很容易地转换为带中断的 while 循环。

使用适当的索引将其导入 MySQL 等将使用类似（或更多，因为它可能包装得很好）有效的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:17:06.420

我首先将单个大文件拆分为 65536 个较小的文件，这样如果哈希以`0000`它在文件中`00/00data.txt`开头，如果哈希以`0001`它在文件中开头`00/01data.txt`，等等。如果完整文件是 12 GiB，那么每个较小的文件（平均）为 208 KiB。

接下来，将哈希与字符串分开；这样您就有 65536 个“哈希文件”和 65536 个“字符串文件”。每个散列文件将包含散列的其余部分（仅最后 12 位，因为不再需要前 4 位）和相应字符串文件中字符串的偏移量。这意味着（而不是平均每个 208 KiB 的 65536 个文件）您将拥有 65536 个哈希文件，每个文件可能 120 KiB 和 65536 个字符串文件，每个文件可能 100 KiB。

接下来，哈希文件应该是二进制格式。12 个十六进制数字需要 48 位（不是 12*8=96 位）。仅此一项就会将哈希文件的大小减半。如果字符串在字符串文件中的 4 字节边界上对齐，那么 16 位“字符串偏移量 / 4”就可以了（只要字符串文件小于 256 KiB）。哈希文件中的条目应按顺序排序，对应的字符串文件应按相同顺序排列。

在所有这些变化之后；您将使用哈希的最高 16 位来找到正确的哈希文件，加载哈希文件并进行二进制搜索。然后（如果找到）您将从哈希文件中的条目中获取字符串开头的偏移量（在字符串文件中），并从哈希文件中的下一个条目中获取下一个字符串的偏移量。然后，您将从字符串文件中加载数据，从正确字符串的开头开始，到下一个字符串的开头结束。

最后，您将在内存中实现“哈希文件缓存”。如果您的应用程序可以分配 1.5 GiB 的 RAM，那么这足以缓存一半的哈希文件。在这种情况下（缓存了一半的哈希文件），您预计一半时间您需要从磁盘加载的唯一内容是字符串本身（例如可能小于 20 个字节），而另一半时间您需要需要先将哈希文件加载到缓存中（例如 60 KiB）；所以平均每次查找你会从磁盘加载大约 30 KiB。当然内存越多越好（越少越好）；如果您可以分配超过 3 GiB 的 RAM，您可以缓存所有哈希文件并开始考虑缓存一些字符串。

一种更快的方法是使用可逆编码，这样您就可以将字符串转换为整数，然后将整数转换回原始字符串，而无需进行任何类型的查找。举个例子；如果您的所有字符串都使用小写 ASCII 字母并且是最大值。13 个字符长，那么它们都可以转换为 64 位整数并返回（如 26^13 < 2^63）。这可能会导致一种不同的方法——例如，在可能的情况下使用可逆编码（整数/散列的第 64 位清除）；并且仅对无法以可逆方式编码的字符串使用某种查找（使用整数/哈希集的第 64 位）。只需一点知识（例如，为您的字符串仔细选择最佳可逆编码），这可以将您的 13 GiB 文件的大小缩减到“小到足以轻松放入 RAM”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:34:52.983

当您将整个性能优化移至数据库时，您的最后一个解决方案可能是最容易实现的解决方案（通常它们为此进行了优化）。

[`strstr`](http://www.manpagez.com/man/3/strstr/)在这里没有用，因为它搜索字符串，但您知道特定格式并且可以跳转和比较更多面向目标的内容。关于[`strncmp`](http://www.manpagez.com/man/3/strncmp/), 和[`strchr`](http://www.manpagez.com/man/3/strchr/)。

读取单行的开销会非常高（文件 IO 经常出现这种情况）。所以我建议阅读更大的块并对该块执行搜索。我什至会考虑通过读取另一个线程中的下一个块来并行化搜索，并在那里进行比较。

您还可以考虑使用内存映射 IO 代替标准 C 文件 API。使用它，您可以将整个内容加载到操作系统，而不必关心自己的缓存。

当然，重组数据以加快访问速度也会对您有所帮助。例如插入填充字节，以便所有数据集都一样长。这将为您提供对数据流的“随机”访问，因为您可以轻松计算第 n 个条目的位置。

# mvvm - MVVM 中的 Kendo Grid 和翻译或自定义命令按钮

> ID：14534853
> 
> 赞同：0
> 
> 时间：2013-01-26T07:25:27.927
> 
> 标签：mvvm, kendo-ui

这是我的 MVVM 代码，我无法自定义更新/取消命令按钮的文本。我已经自定义了编辑/删除按钮，但是现在隐藏的命令按钮呢？当我单击编辑按钮时将可见？请帮我定制这样的命令。我怎样才能做到这一点？

```
<div id="grid"  data-role="grid" data-sortable="true" data-editable="inline" data-Scrollable="true"
    data-toolbar='[{name:"create", text:"新しいドメインの追加"}]'
    data-pageable="true"  data-columns='[{field: "Domain", title: "ドメイン", width: 250, filterable: false, sortable: false}, 
                                         {"command": [{name:"destroy",text:"削除"},
                                                      {name:"edit",text:"編集"}]}]' 

    data-bind="source: dataSource, events: { edit: edit, dataBound: dataBound }"></div> 
```

回答这个问题将帮助很多想要自定义或翻译更新命令或取消命令以及编辑命令或销毁命令的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:21:28.053

对于在模式下进行本地化`Update`和`Cancel`按钮，您需要将命令定义为：`update``popup`

```
command: [
    {
        name: "edit",
        text: { edit: "Edita", update: "Actualiza", cancel: "Cancela"}
    },
    {
            name : "destroy",
            text : "Borra"
    }
], 
```

**编辑**：如果您还想更改`popup`窗口的标题，那么您应该`window.title`在`editable`网格定义中添加：

```
editable  : {
    mode : "popup",
    window : {
        title: "Edición",
    }
}, 
```

如果你想看一个例子：[JSFiddle](http://jsfiddle.net/OnaBai/tTXSJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:14:27.343

如果您想自定义按钮更新、取消、删除、添加、编辑，只需执行此操作

```
{
            command : [{
                name : "edit",
                text : {// sets the text of the "Edit", "Update" and "Cancel" buttons
                    edit : "CustomEdit",
                    update : "CustomUpdate",
                    cancel : "CustomCancel"
                },
            }, {
                name : "destroy",
                text : "Destroy"
            } // sets the text of the "Delete" button
            ] 
```

这是一个[小提琴](http://jsfiddle.net/delebash/TaTMn/8/)

# forms - Wicket - 带有 java 子类的可重用面板

> ID：14534856
> 
> 赞同：0
> 
> 时间：2013-01-26T07:25:51.297
> 
> 标签：forms, wicket, panel, reusability, subclass

1.  我有一个java类：

```
 public Task {

        private int id;
        private Company sender;
        private Company receiver;

        //Getter and Setter
        ...
    } 
```

如您所见，我在任务类中还有另外 2 个自定义类。一家公司有例如地址和目录（见下面的截图）。

2.  现在我有一个包含代表公司的 2 个部分（发送者和接收者）的表单页面。我不想为这两个部分制作 2 个单独的标记和 java 代码。有什么办法可以避免这种重复？

![在此处输入图像描述](../Images/7adb63aea62f26f1cf86991cce89e589.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:23:19.857

您可以创建一个`CompanyPanel`需要一个`IModel<Company>`. 您可以在任务类上使用 PropertyModel 来获得一个。`PropertyModel sender = new PropertyModel(myTask, "sender")`. 然后，面板可以有两个 TextField，您可以在传递的 IModel 上使用 CompoundPropertyModel。

在您的表单上重复使用此面板两次。

在公司面板上

```
public class CompanyPanel extends Panel
{
    public CompanyPanel(String id, IModel<Company> model)
    {
        super(id, new CompoundPropertyModel(model));
        add( new TextField("address"));
        add( new TextField("directory"));
    }
} 
```

在文档中查找 CompoundPropertyModel。它真的很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:58:55.290

制作一个用于编辑`Company`类的面板，并将它的两个具有不同`Model`s 的实例放入 TaskPanel

```
public class TaskPanel extends Panel{

  public TaskPanel(String id, IModel<Task> model){
    super(id, model);
    add(new CompanyPanel("senderCompanyPanel", new PropertyModel(model, "sender")));
    add(new CompanyPanel("receiverCompanyPanel", new PropertyModel(model, "receiver")));
    ...
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:14:06.107

只需创建一个 Panel 或 Fragment，使其模型为 a `IModel<Company>`，然后将它的两个实例添加到您的页面，一个 for `sender`，另一个 for `receiver`。

*   [检票口示例：使用片段](http://wicket.apache.org/learn/examples/usingfragments.html)
*   [Wicket Wiki：片段](https://cwiki.apache.org/WICKET/fragment.html)
*   [Wicket Wiki：面板](https://cwiki.apache.org/WICKET/panel.html)

# php - Socket.io 私信通知

> ID：14534857
> 
> 赞同：5
> 
> 时间：2013-01-26T07:25:56.807
> 
> 标签：php, mysql, node.js, socket.io, laravel

嘿，堆栈溢出！我现在正在使用 Laravel3 开发一个社区，我正在尝试实现一些 Facebook 风格的私人消息传递。

我做了编码部分，但我和我的朋友们非常同意添加实时消息通知。我做了我的研究，我不能说我找到了一篇关于这个的好文章，其中一些开始于`oh you know everything about matrix so lets socketsocketsocketsocketsocket`我很困惑如何开始，从哪里开始，这到底是什么，其中很多都说`go with MongoDB never use MySQL again.`老兄，这到底是什么？我正在使用 MySQL 我在 Laravel 中创建了一个不错的私人消息系统，我想添加实时通知！

我想做的就是

1.  用户A向用户B发送消息
2.  消息插入到 privmsg 表中。
3.  套接字或您建议的任何内容，告诉 UserB 的浏览器有来自 UserA 的 +1 新消息
4.  UserB 看到有一条未读消息没有刷新他的页面并点击阅读它。

我怎样才能做到这一点？Socket.io 的最佳选择是什么？如果是这样，我该如何使用它？任何片段都会很棒！或关于我的情况的教程:)

我真的很感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T08:01:48.983

您会遇到这样的问题：“X 总是比 Y 好，所以总是使用 X”。它可能有一个名字......甚至可能写了一两本书。谁知道。让我们从你的第一个问题开始：

> 这到底是什么鬼东西，很多人说“使用 MongoDB 永远不要再使用 MySQL”。哥们什么鬼？

你应该停止花时间和说这话的人在一起。MySQL 和 MongoDB 是用于两种非常不同类型的数据库的数据库系统。它们通常被称为基于表格和基于文档。使用 MySQL（使用 SQL 的任何其他数据库......可能还有一些不使用），您的数据存储在一组由非常特定的模式概述的关系表中。此表中的每条记录都符合具有特定类型集的特定字段集。这种类型的数据库非常适合多种数据。

MongoDB 是基于文档的各种数据库，通常称为“NoSQL”（意思是 not-only-SQL）。每个“文档”都可以有一个完整的结构，包括有子节点和孙子节点的节点。每个文档都可以有自己独特的数据集。文档存储在“集合”中。这种类型的数据库有一些优点......对于某些类型的操作来说它可能非常快。话虽如此，这对于其他事情来说是很糟糕的，例如当你有一堆类型完全相同的数据时。像这样的数据库上的数据聚合非常慢（但它一直在变得更好！）。

我要说明的一点是 MySQL 和 MongoDB 只是不同的工具，专为不同的工作而设计。不要仅仅因为你的朋友告诉你螺丝比钉子好就用螺丝刀敲钉子。

> 我要做的就是： UserA 向 UserB 发送消息；消息插入到 privmsg 表中。套接字或您建议的任何内容，告诉用户 B 的浏览器有来自用户 A 的 +1 新消息；UserB 看到有一条未读消息没有刷新他的页面并点击阅读它。

再次，为工作选择工具。了解您的工具是一个好的开始。Socket.IO 旨在建立服务器和客户端之间的通信通道。它提供了类似 web-socket 的功能，通常在 Node.js 服务器和 web 浏览器之间使用（但也可以在其他上下文中使用！）。它的两个主要特性是它在 Web Sockets 不可用时提供后备传输（使其与旧浏览器兼容），并且它在一些漂亮而简单的调用中封装了一个事件消息传递系统。您不必担心底层通信。一方面`emit`是事件，另一方面是事件。简单的。

对于服务器和浏览器之间的实际通信，Socket.IO 是一个很好的选择。它提供近乎实时的通信。但是，Socket.IO 不仅仅是一种可以为您解决所有问题的魔法。如果是的话，对几乎每个人来说都是无用的。

由于您的消息需要持久化，因此将它们存储在数据库中是一个好主意。我会做什么：

1.  在发送消息时，将副本插入数据库
2.  插入时，通过您的 pub/sub向集群中的其他服务器[发出通知](http://howtonode.org/redis-pubsub)
3.  任何与获取消息的用户有连接的服务器都将看到来自其他服务器的此通知。
4.  该服务器将从数据库中加载用户的消息数据并通过 Socket.IO 发出它

你要教程吗？Socket.IO主页上的例子相当不错： [http ://socket.io/](http://socket.io/)

# c# - 更新列表视图列

> ID：14534859
> 
> 赞同：0
> 
> 时间：2013-01-26T07:26:13.190
> 
> 标签：c#, listview

我尝试下面的代码来更新列表视图的第 1 行的内容，但失败了

```
listview.Items[0].SubItems[0].Text = "Column1";
listview.Items[0].SubItems[1].Text = "Column2";
listview.Items[0].SubItems[2].Text = "Column3";//failed here 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:43:37.817

您必须先添加 SubItem，然后设置其 Text 属性。

```
listview.Items[0].SubItems.Add(new ListViewItem.ListViewSubItem());
listview.Items[0].SubItems[2].Text = "Column3"; 
```

或者

```
listview.Items[0].SubItems.Add("Column3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:33:40.207

看起来您正在尝试为不存在的列设置值，因此是例外。确保您的列表视图肯定有 3 列以上。

# android - 警报管理器和服务 Android

> ID：14534866
> 
> 赞同：0
> 
> 时间：2013-01-26T07:27:25.110
> 
> 标签：android, service

我在使用服务启动警报管理器时遇到问题。使用以下代码从 mainActicity 启动服务：

```
Intent intent = new Intent(this, YourService.class);
        startService(intent); 
```

我已经使用以下代码在清单中定义了服务：

```
<activity
        android:name=".YourService"
        android:label="@string/app_name" 
        android:screenOrientation="portrait">
        <intent-filter>
                <action android:name="com.sjjgames.abortionappnoads.YOURSERVICE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
<service android:name=".YourService" /> 
```

这就是“YourService”类的样子：

```
package com.sjjgames.abortionappnoads;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;

public class YourService extends Service
{
    Alarm alarm = new Alarm();
    public void onCreate()
    {
        super.onCreate();       
    }

    public void onStartCommand(Context context,Intent intent, int startId)
    {
        alarm.SetAlarm(context);
    }

    @Override
    public IBinder onBind(Intent intent) 
    {
        return null;
    }
} 
```

该服务应该调用一个名为“Alarm”的类，但该服务似乎永远不会启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:41:42.550

你`OnStartCommand`的签名错误，所以它没有覆盖基类，它应该返回一个`int`. 使用`@Override`注释有助于捕获这些错误。请务必返回`START_`与您希望服务运行方式相对应的代码之一。有关更多详细信息，请参阅[服务生命周期](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) { 
```

# java - 如何在 linux 上安装 xuggler 依赖项？

> ID：14534870
> 
> 赞同：1
> 
> 时间：2013-01-26T07:28:10.370
> 
> 标签：java, linux, maven, dependencies, xuggler

> **可能重复：**
> [设置 Xuggler 的初学者指南](https://stackoverflow.com/questions/14010557/beginners-guide-to-setup-xuggler)

我下载了已成功添加到 netbeans 的 xuggler-xuggler-5.4.jar。问题是让它工作，因为它有很多依赖项。我查看了 .jar 文件并没有看到任何 pom 文件，所以我搜索了该文件。现在我有了 .pom 文件，并且必须使用 Maven 下载依赖项。Maven 让我非常困惑，所以我希望有人能给我命令行来获取依赖项。

# localization - 代号 - L10N 在对话框中不起作用

> ID：14534876
> 
> 赞同：0
> 
> 时间：2013-01-26T07:29:32.893
> 
> 标签：localization, dialog, codenameone

我正在为我的移动应用程序使用代号。我在上面使用自定义 L10N 字典，当我想在`dialog`页面中显示其中一个键时，它不会显示。这是示例：

```
Dialog.show("Info", "errPassEmpty", Dialog.TYPE_INFO, 
            res.getImage("notification_error64.png"), "OK", 
            "Cancel", CommonSettings.TimeOut); 
```

如何在 中显示 L10N 值`dialog`？

提前致谢。

# python - 如何停止 Google Cloud SQL 中的 SQL 注入？

> ID：14534880
> 
> 赞同：0
> 
> 时间：2013-01-26T07:30:39.147
> 
> 标签：python, mysql, google-cloud-sql

我正在使用 Python 与 Google 的新 Cloud SQL (mySQL) 数据库通信。我有一个工作示例，但我想知道示例代码是否可以阻止 SQL 注入攻击？

```
mdata = self.request.get('mdata')
conn = rdbms.connect(instance=_INSTANCE_NAME, database='metarsql')
cursor = conn.cursor()
# Note that the only format string supported is %s
cursor.execute('INSERT INTO metar (metar_data) VALUES (%s)', (MySQLdb.escape_string(mdata)))
conn.commit()
conn.close() 
```

是否有要添加的函数或命令来停止 SQL 注入？也许是一个停止多个 SQL 命令的函数？

谷歌搜索中没有太多关于 Cloud SQL 和注入的内容。

此致

安德烈·F·布鲁顿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:35:41.153

一个很好的指南：[正确使用 cursor.execute 防止 python 中的 sql 注入](http://love-python.blogspot.co.il/2010/08/prevent-sql-injection-in-python-using.html)

它是 Google 的服务器还是其他任何人都没有关系。

# django - 在 Django 事务中重复保存导致 InternalError 而不是 IntegrityError

> ID：14534881
> 
> 赞同：1
> 
> 时间：2013-01-26T07:30:42.010
> 
> 标签：django, transactions, django-views, django-orm

我使用 PostgreSQL 作为 psycopg2 的后端，我注意到一些对我来说似乎很奇怪的东西。我的设置如下：

```
class ParentModel(models.Model):
    field1 = models.IntegerField()

class ChildModel(ParentModel):
    field2 = models.IntegerField(unique=True) 
```

当我尝试从 shell 中保存具有重复字段 2 的 ChildModel 对象时，我得到的是 InternalError 而不是 IntegrityError，但前提*是*保存是在 transaction.commit_on_success 块中完成的，如下所示：

```
with transaction.commit_on_success():
    newObj = ChildModel(field1=5, field2=10) # Assume that a ChildModel with field2 == 10 exists 
```

正如我所料，在事务块之外，我得到了一个 IntegrityError。

在视图代码中运行时，即使使用保存点，我也总是在更新失败后收到 InternalError：

```
try:
    sid = transaction.savepoint()
    newObj = ChildModel(field1=5, field2=10) # Assume that a ChildModel with field2 == 10 exists
    transaction.savepoint_commit(sid)
except IntegrityError:
    transaction.savepoint_rollback(sid)
except InternalError:
    transaction.savepoint_rollback(sid)

... other stuff ... # raises InternalError on next database hit 
```

如果我在带有块的 commit_on_success 事务中执行此操作，而不是使用保存点，也会发生同样的事情。我安装了 TransactionMiddleware，但我没有在自动提交模式下运行 PostgreSQL。

我可以通过简单地检查以确保不存在重复对象来避免这种情况，但我想了解我对 Django 事务的理解出了什么问题。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T11:34:40.950

我有同样的问题。我查看了 Postgres 日志文件，可以看到在导致完整性错误的查询之后正在运行另一个查询，这导致实际错误在默认事务设置中黯然失色。我发现额外的查询来自`django-debug-toolbar`app.

谷歌向我指出了[https://github.com/django-debug-toolbar/django-debug-toolbar/issues/351](https://github.com/django-debug-toolbar/django-debug-toolbar/issues/351)这似乎解决了这个问题。

简而言之，如果您使用 django-debug-toolbar<=0.9.4，禁用它可以解决问题。

# magento-1.7 - 切换商店视图代码时magento 1.7.0.2 404错误

> ID：14534882
> 
> 赞同：1
> 
> 时间：2013-01-26T07:30:45.263
> 
> 标签：magento-1.7

我正在使用 Magento 1.7.0.2 并有 3 个商店视图。当我在某个类别中并切换到其他商店视图（语言）时，我收到 404 错误。例如：

我在这里：www.example.com/en/cars.html 并且想要切换到西班牙语。它将更改为：

www.example.com/es/coches.html 但它移动到 www.example.com/coches.html （没有商店视图代码）并给出 404 错误。

这仅在翻译 url 时发生。如果没有，它可以工作。

我搜索了几天并没有找到解决方案。

请帮忙。

谢谢

# python - 在 django 1.4 中创建一个 ModelForm 来更新记录

> ID：14534889
> 
> 赞同：0
> 
> 时间：2013-01-26T07:31:52.930
> 
> 标签：python, django, django-forms, django-1.4

我正在尝试创建一个 ModelForm 来更新我的数据库中的记录，但由于某种原因它不起作用。结果是空白。我在这里做错了什么？

这是我的forms.py：

```
class PageForm(ModelForm):
    class Meta:
        model = Page 
```

这是我的views.py：

```
def detail(request, page_id):
    p = get_object_or_404(Page, pk=id)
    if request.method == 'POST':
        form = PageForm(request.POST, instance=p)
        if form.is_valid():
           form.save()
           messages.success(request, "Detail updated successfully.")
           return HttpResponseRedirect('/thanks/')
    return render(request, 'pages/pageform.html', {
    'form': PageForm(instance=p),
}) 
```

这是我的model.py：

```
class Page(models.Model):
    pub_date = models.DateTimeField('date published')
    title = models.CharField(max_length=255)
    keywords = models.CharField(max_length=255)
    description = models.CharField(max_length=255)
    content = models.TextField()
    def __unicode__(self):
        return self.title 
```

这是我的 pageform.html

```
<form action="/detail/" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

这是我的 urls.py

```
urlpatterns = patterns('',
    url(r'^page/(?P<id>\d+)/$', 'detail', name='detail'),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:36:44.510

您还需要为*获取*请求创建表单。

将您的视图更新为

```
def detail(request, page_id):
    if request.method == 'POST':
    ....
    else:
        p = Page.objects.get(pk=page_id)
        form = PageForm(instance=p)
    .... 
```

此外，当表单无效时不要创建新表单，因为它不会显示任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:34:34.630

谢谢凯茜和罗汉！这对我有用：

视图.py

```
def detail(request, page_id):
    p = get_object_or_404(Page, pk=page_id)
    if request.method == 'POST':
        form = PageForm(request.POST or None, instance=p)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/thanks/')
    else:
        form = PageForm(instance=p)
    return render_to_response('pages/detail.html', {'page': p, 'form': form}, context_instance=RequestContext(request)) 
```

网址.py：

```
urlpatterns = patterns('',
    url(r'^page/(?P<page_id>\d+)/$', 'pages.views.detail'),
) 
```

# php - PHP mail() 不工作请帮帮我

> ID：14534903
> 
> 赞同：0
> 
> 时间：2013-01-26T07:33:51.690
> 
> 标签：php

有人可以帮我弄清楚为什么这没有发送吗？我是 PHP 新手。

这是我网站上的联系表格。我从我的服务器（不是本地主机）发送并收到控制台消息“邮件未发送”

```
<?php

include 'ChromePhp.php';

if ($_SERVER['REQUEST_METHOD'] == 'POST'){

   $to = 'me@myemail.com';
   $subject = 'Email from Me';
   $message = $_POST['email'];

     if(mail($to, $subject, $message)){
        ChromePHP::log( 'Mail Sent');
     }else{
        ChromePHP::log( 'Mail Not Sent');
     }
}

?> 
```

我意识到以前有人问过这个问题，但我找不到有效的答案。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:44:22.720

您应该在 mail() 函数中包含标头，例如

```
$headers = 'From: webmaster@example.com' . "\r\n" .
'Reply-To: webmaster@example.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion(); 
```

然后将 $headers 参数插入到 mail() 函数中：

```
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:39:59.777

没有错误信息，我只能猜测。您可能需要在 php.ini 中设置 SMPT 服务器。您可以在运行时使用 ini_set('SMTP', 'your_server_here') 执行此操作。

更多关于这里的邮件配置：http: [//php.net/manual/en/mail.configuration.php](http://php.net/manual/en/mail.configuration.php)

如果您没有，您可以检查您的 ISP 是否有开放的服务器。ISP 有时具有开放的 SMTP 服务器（外发服务器），您可以通过查找有关如何设置邮件程序 (Outlook) 的说明来找到它们。

不过要小心，不要将它用于除了轻度测试之外的任何事情。我可以想象他们不会喜欢大量垃圾邮件通过他们的服务器。

**编辑：**另外，阅读所需的标题。我看到您缺少 From 标头，这应该会导致警告。见这里： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
When sending mail, the mail must contain a From header. This can be set with the additional_headers parameter, or a default can be set in php.ini.

Failing to do this will result in an error message similar to Warning: mail(): "sendmail_from" not set in php.ini or custom "From:" header missing. The From header sets also Return-Path under Windows. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:36:44.640

你应该检查你的邮件服务，因为上面的 PHP 代码很真实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T08:33:18.947

您可以要求您的托管服务提供商激活邮件服务，因为某些托管服务提供商默认不允许使用邮件。

# c++ - 32 位长与 64 位长

> ID：14534907
> 
> 赞同：0
> 
> 时间：2013-01-26T07:34:53.097
> 
> 标签：c++

我正在研究已迁移到 32 位机器到 64 位机器的项目（c++ 与 Python 集成）。在 Python 中，C long 与 Python Integer 进行映射。所以我无法更改 Python 接口（客户端接口）并且总是从 python 客户端获取溢出错误。它在 32 位机器上运行良好

所以我有以下解决方案

1）在 64 位机器中将所有 long 转换为 int。

2）在 64 位机器上声明 32 位长。

我们是否有任何通用解决方案/头文件可以让我选择始终声明 32 位数据类型所以我可以用更通用的方式处理这个问题。

我知道这可能是小问题，但我无法找到通用解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T07:37:14.380

> 我们是否有任何通用的解决方案/头文件可以让我选择始终声明 32 位数据类型？

是的，从 C99 开始[就有。](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/stdint.h.html)

```
#include <stdint.h>

uint32_t foo; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T07:37:05.110

标准 C99（和更高版本）具有为 32 位有符号整数（和许多其他类型）`<stdint.h>`定义的标头，最近的 C++ 具有`int32_t``<cstdint>`

如果您关心[bignums](http://en.wikipedia.org/wiki/Bignums)（任意精度数），请注意这是一个困难的主题并使用一些现有的库，例如[GMP](http://gmplib.org/)。

# mysql - mySQL 连接两个表并按排序顺序显示特定记录

> ID：14534908
> 
> 赞同：-5
> 
> 时间：2013-01-26T07:34:58.850
> 
> 标签：mysql, sql, join

我有两张桌子：

**订金**

```
accountNumber    balance    addDate
0000102          5000       21/01/2013
0000105          5500       21/01/2013
0010024          9800       21/01/2013
0000102          2500       22/01/2013
0000105          9000       22/01/2013
.......          ....       ../../....   //rest of the records 
```

**退出**

```
accountNumber    balance    addDate
0000102          2500       20/01/2013
0010024          5000       20/01/2013
0000105          1500       20/01/2013
.......          ....       ../../....  //rest of the records 
```

现在，我需要将这两个表的结果显示为：

**细节**

```
date          withdrawal   deposite
20/01/2013    2500
21/01/2013                 5000
22/01/2013                 2500 
```

对于特定的`accountNumber`=`0000102`和`order by` `addDate`.

我是数据库的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:41:34.673

基本上，您需要在`UNION ALL`此处使用以保留结果的重复项。

```
SELECT addDate AS date, balance
FROM
    (
        SELECT  accountNumber, balance, addDate FROM deposit
        UNION ALL
        SELECT  accountNumber, balance, addDate FROM withdrawal
    ) s
WHERE   accountNumber = '0000102'
ORDER   BY date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6959d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:27:55.077

或者，对 JW 对您评论中要求的列别名的回答稍作更改：

```
SELECT addDate AS date, w as withdrawal, d as deposit
    FROM
        (
            SELECT  accountNumber, '' as w, balance as d, addDate FROM deposit
            UNION ALL
            SELECT  accountNumber, balance as w, '' as d, addDate FROM withdrawal
        ) s
    WHERE   accountNumber = '0000102'
    ORDER   BY date 
```

# java - 如何使 JSlider 背景透明？或如何在 JLayeredPane 中正确覆盖 JComponents？

> ID：14534910
> 
> 赞同：1
> 
> 时间：2013-01-26T07:35:41.783
> 
> 标签：java, swing, transparent, jslider, jlayeredpane

我正在尝试将 JSlider 覆盖在 JProgressBar 之上。我正在使用 JLayeredPane 来保存这两个组件。我将 JProgressBar 添加到 JLayeredPane，然后添加 JSlider。到目前为止，我已经尝试通过将 opaque 设置为 false 并覆盖 paintComponent 方法来使 JSlider 透明。我最终得到的是滑块手柄是唯一在背景保持不透明时变得透明的部分。我可能没有正确使用 JLayeredPane，但我对 JLabels 的测试似乎有效。如何让 JSlider 的背景透明？

```
JSlider slider = new JSlider()
{

    @Override
    public void paintComponent(java.awt.Graphics g)
    {
        java.awt.Graphics2D g2 = (java.awt.Graphics2D) g;
        g2.setComposite(AlphaComposite.getInstance(
                AlphaComposite.SRC_OVER, (float) 0.5));

        super.paintComponent(g2);
    }

}; 
```

感谢大家的帮助。通过您的示例，我发现我的问题出在我正在使用的 JLayeredPane 上。我认识到可以使 JSlider 背景透明，但是，我仍然无法让下面图层上的组件显示出来。这是我的例子：

```
public class SliderTest extends JFrame
{

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args)
{
    EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            try
            {
                SliderTest frame = new SliderTest();
                frame.setVisible(true);
            } catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public SliderTest()
{
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);

    JPanel panel = new JPanel();
    contentPane.add(panel, BorderLayout.CENTER);
    panel.setLayout(new BorderLayout(0, 0));

    JLayeredPane layeredPane = new JLayeredPane();

    panel.add(layeredPane, BorderLayout.CENTER);
    layeredPane.setLayout(new BorderLayout(0, 0));

    JProgressBar progressBar = new JProgressBar();
    progressBar.setValue(50);
    layeredPane.add(progressBar);
    layeredPane.setLayer(progressBar, 0);

    JSlider slider = new JSlider()
    {
        @Override
        protected void paintComponent(Graphics g)
        {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getBackground());
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
            g2d.fillRect(0, 0, getWidth(), getHeight());
            g2d.dispose();

            super.paintComponent(g);
        }

    };
    layeredPane.setLayer(slider, 1);
    slider.setOpaque(false);

    // layeredPane.setLayer(slider, 1);
    layeredPane.add(slider, BorderLayout.CENTER);

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:48:06.650

这将取决于您想要实现的目标。默认情况下`JSlider`是透明的。

这里重要的是 opaque 属性必须是`false`，否则重绘管理器不会在组件后面绘制...

![在此处输入图像描述](../Images/2e4465bfee7d87e1c65de4d6dab2c531.png)

*   顶部滑块，透明背景（蓝色），不透明控件
*   中间滑块，透明背景（绿色），透明控件
*   底部滑块，正常`JSlider`

    公共类TestSlider {

    ```
    public static void main(String[] args) {
        new TestSlider();
    }

    public TestSlider() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBackground(Color.RED);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(new TransparentBackgroundSlider(), gbc);
            add(new TransparentSlider(), gbc);
            add(new JSlider(), gbc);

        }

    }

    public class TransparentBackgroundSlider extends JSlider {

        public TransparentBackgroundSlider() {
            // Important, we taking over the filling of the
            // component...
            setOpaque(false);
            setBackground(Color.BLUE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getBackground());
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
            g2d.fillRect(0, 0, getWidth(), getHeight());
            g2d.dispose();

            super.paintComponent(g);
        }

    }

    public class TransparentSlider extends JSlider {

        public TransparentSlider() {
            // Important, we taking over the filling of the
            // component...
            setOpaque(false);
            setBackground(Color.GREEN);
        }

        @Override
        public void paint(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setComposite(AlphaComposite.SrcOver.derive(0.5f));
            super.paint(g2d);
            g2d.dispose();
        }

        @Override
        protected void paintComponent(Graphics g) {
            // We need this because we've taken over the painting of the component
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getBackground());
            g2d.fillRect(0, 0, getWidth(), getHeight());
            g2d.dispose();

            super.paintComponent(g);
        }

    } 
    ```

    }

**更新图层示例**

![在此处输入图像描述](../Images/5ca8600aba12f725ee9174e31dd166fb.png)

```
public class TestSlider {

    public static void main(String[] args) {
        new TestSlider();
    }

    public TestSlider() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JLayeredPane {

        private JProgressBar pb;
        private JSlider slider;

        public TestPane() {

            pb = new JProgressBar();
            slider = new JSlider();

            add(pb, new Integer(0));
            add(slider, new Integer(1));

        }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = pb.getPreferredSize();
            size.height *= 4;
            size.width = Math.max(size.width, slider.getPreferredSize().width);
            return size;
        }

        @Override
        public void doLayout() {
            super.doLayout();

            int width = getWidth();
            int height = getHeight();

            Dimension size = pb.getPreferredSize();

            int x = 10;
            int y = (getHeight() - size.height) / 2;

            pb.setLocation(x, y);
            size.width = getWidth() - 21;
            pb.setSize(size);

            size = slider.getPreferredSize();
            x = (getWidth() - size.width) / 2;
            y = (getHeight() - size.height) / 2;
            slider.setBounds(x, y, size.width, size.height);

        }

    }

} 
```

# android - 如何在前一个按钮意图之外添加另一个按钮意图？

> ID：14534912
> 
> 赞同：0
> 
> 时间：2013-01-26T07:36:15.443
> 
> 标签：android, eclipse, button, android-intent

这是我的代码：它包含一个名为**button1A**的按钮，当我单击它时，它会打开一个名为**list1**的列表。如何为另一个名为 button2A 的按钮添加代码，该按钮以 List2 的形式打开列表。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;

public class Tab_1st extends Activity {

Button button1A;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tablayout1);

    addListenerOnButton();

}

public void addListenerOnButton() {

    button1A = (Button) findViewById(R.id.button1A);

    button1A.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent a1 = new Intent(v.getContext(), List1.class);
            startActivity(a1);

        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:45:03.057

更改您的`addListenerOnButton`方法使用`switch-case`以最小化代码并将单个`OnClickListener`侦听器添加到多个按钮：

```
 public void addListenerOnButton() {

        button1A = (Button) findViewById(R.id.button1A);
        button1A.setOnClickListener(clicklistener);
        // add OnClickListener to second Button 
        button1B = (Button) findViewById(R.id.button1B);
        button1B.setOnClickListener(clicklistener);
    OnClickListener clicklistener = new View.OnClickListener() {
     @Override
      public void onClick(View v) {
        switch(v.getId()){

          case R.id.button1A: 
                    // start second List Activity
               Intent a1 = new Intent(v.getContext(), List1.class);
               startActivity(a1);
               break;

          case R.id.button2A: 
                     // start second List Activity
               Intent a2 = new Intent(v.getContext(), List2.class);
               startActivity(a2);
               break;

        }
       }
     };
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:40:27.300

如果需要，您可以添加更多点击侦听器。试试这样。

```
public void addListenerOnButton() {

button1A = (Button) findViewById(R.id.button1A);

button1A.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        Intent a1 = new Intent(v.getContext(), List1.class);
        startActivity(a1);

    }
});

button2A = (Button) findViewById(R.id.button2A);

button2A.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        Intent i = new Intent(v.getContext(), List2.class);
        startActivity(i);

    }
}); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T07:48:57.800

一种方法是实现 OnClickListener。

```
public class Tab_1st extends Activity implements OnClickListener {

Button button1A;
Button button2A;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tablayout1);
    button1A = (Button) findViewById(R.id.button1A);
    button2A = (Button) findViewById(R.id.button2A);
    button1A.setOnClickListener(this);
    button2A.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    if (v == button1A) {
        // Start Activity a1
        Intent a1 = new Intent(v.getContext(), List1.class);
        startActivity(a1);
    } else if (v == button2A) {
        // Start Activity a2
        Intent a2 = new Intent(v.getContext(), List2.class);
        startActivity(a2);
    }

}

} 
```

# ruby-on-rails - 无法使用rails从mongodb检索bcrypt哈希

> ID：14534914
> 
> 赞同：-2
> 
> 时间：2013-01-26T07:36:28.433
> 
> 标签：ruby-on-rails, mongodb, bcrypt

我正在使用 rails 和 mongodb 开发一个应用程序。它有一个身份验证系统，但根本不工作。过了一会儿，我想通了为什么。如果我做：

```
<% user = User.where(:email => 'test@test.com').first %>
<%= user.hash %> | <%= user.salt %> 
```

它返回：

```
287708835 | $2a$10$Arn.fJ0QT3zKRE748wNbXO 
```

但是如果我在 mongo 上做“同样的事情”

```
db.users.find({'email' => 'test@test.com'}) 
```

它返回：

```
{ "_id" : ObjectId("5103834b108f67f3e9000005"), "email" : "test@test.com", "salt" : "$2a$10$Arn.fJ0QT3zKRE748wNbXO", "hash" : "$2a$10$Arn.fJ0QT3zKRE748wNbXOYBI7k54x6HKypo0m4LyUrvERpTKygSe" } 
```

所以我可以毫无问题地检索盐，但不能检索哈希。

我使用 bcrypt-ruby 生成盐和哈希

```
BCrypt::Engine.generate_salt
BCrypt::Engine.hash_secret(password, salt) 
```

我怎样才能从数据库中获取真正的哈希？

提前致谢 （：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T09:49:43.667

`user.hash`调用[Object#hash](http://apidock.com/ruby/Object/hash)方法而不是您的属性方法。我认为你有两个选择：

1.  以其他方式调用它（不确定您使用的是什么 ORM，但`user.read_attribute('hash')`可能会起作用）
2.  重命名您的字段

# sql - 请帮我查询数据库

> ID：14534925
> 
> 赞同：0
> 
> 时间：2013-01-26T07:37:49.247
> 
> 标签：sql

这是我的桌子

房间

```
Room_no 

0001 
```

租户

```
ALICA 0001(Room_no  )         
Alex  0001(Room_no) 
```

2个租户可以住1个房间。

这是我想要表单查询的结果

```
0001 ALICA Alex 
```

如何在 sql select 命令中执行此操作。

PS。对不起，我向您展示的表格我不知道如何在 stackoverflow 中发布表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:44:10.573

使用`GROUP_CONCAT`带`SEPARATOR`空格的函数

如果您需要来自两个表的信息，此查询将为您提供帮助。

```
SELECT 
      Room.Room_no, GROUP_CONCAT(Tenant_name SEPARATOR ' ') 
FROM 
      Room 
JOIN 
      Tenant ON Room.Room_no = Tanent.Room_no
GROUP BY 
      Room.Room_no 
```

根据您的问题，您只需要从一张表 ( `Tenant`) 中获取信息。所以现在使用下面的查询

```
SELECT 
      Room_no, GROUP_CONCAT(Tenant_name SEPARATOR ' ') 
FROM 
      Tenant 
GROUP BY 
      Room_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T07:45:28.347

希望这有帮助

编辑字段名称匹配您的表

```
SELECT GROUP_CONCAT(tenant SEPARATOR ',') FROM room GROUP BY room_no 
```

# javascript - IndexedDB I/O 速度

> ID：14534927
> 
> 赞同：1
> 
> 时间：2013-01-26T07:38:04.523
> 
> 标签：javascript, jquery, performance, io, indexeddb

我开始使用[IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)。以为我会为它获取 Parashuram 的[jQuery 包装器](https://github.com/axemclion/jquery-indexeddb)。

但是，互联网上似乎没有很多关于 IndexedDB 的信息。

有谁知道 IndexedDB 上的 I/O 速度如何，最好是特定于浏览器的？有什么方法可以测量吗？使用 jQuery 包装器（以及[polyfill shim](http://nparashuram.com/IndexedDBShim/index.html)使其在 Opera/Safari 中工作）会如何影响这些速度？

我问的原因是我想在基础中存储 HTML 内容的片段，但如果获取它需要比浏览器缓存或类似的时间更长的时间，我可能不应该打扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:37:17.663

这取决于您使用的浏览器。

我的经验是，与 chrome 和 FireFox 相比，IE 10 相当快。试试我为我的框架编写的[QUnit 测试，你会真正看到不同之处。](http://linq2indexeddb.azurewebsites.net/Tests/Linq2IndexedDBCoreTest.htm)当然，这不是基准测试，只是功能测试。

# visual-studio-2010 - VS2010 没有出现在我的应用程序 windows 8 中

> ID：14534931
> 
> 赞同：9
> 
> 时间：2013-01-26T07:39:06.093
> 
> 标签：visual-studio-2010, windows-8

我的是一台 Windows 8 机器。我安装了 Visual Studio 2012，然后转到 Microsoft SQL Server 2012。后来我被告知要安装 Visual Studio 2010。前两次安装效果很好。得到所有整洁的图标，一切都很好。MSVS2010 SP1 安装成功。

现在第三次安装 Visual Studio 2010 是我卡住的地方。我正在从 Microsoft 许可的 CD 下载它。安装过程中没有错误，但它只安装了 Microsoft Visual Studio 命令提示符、X64 Win64 命令提示符和 Microsoft Visual Studio 2010 文档。没有其他的。所以基本上我不知道从哪里开始启动程序。

于是我就`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7`去找`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7`了`devenv.exe`。在任何一个位置都找不到。

然后去运行并输入devenv.exe，繁荣VS2010打开。所以我在 Windows 8 上进行了应用程序搜索。当我输入 devenv.exe 时，我唯一能找到的是带有 VS2010 图标的 SQL Server 数据工具。双击它并打开 VS 2010。所以我的猜测是 SQL server 2012 需要 VS2010 并安装它。

**问题**：

1.  devenv.exe 在哪里？
2.  为什么不安装其余的东西？
3.  如何启动 VS2010？

我不认为双击 sql server 数据工具是正确的方法。我希望 VS2010 像任何其他应用程序一样出现在我的应用程序中。这可能是一个相当愚蠢的问题。我做了很多研究，对所有这些参数有点困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-17T09:21:33.950

在 Windows 8 中，如果您在“开始”屏幕中搜索“Visual Studio”，您将找不到 VS 2010。而是搜索“devenv”，它会出现。

搜索“SQL 服务器数据工具”也可以。

在 64 位机器上，你可以在 2010 中找到

> C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE

创建桌面快捷方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-08T08:54:59.237

在 Windows 8 上显示 Visual Studio 2010 图标不需要卸载和重新安装 Visual Studios。Visual Studio 2010 图标位于 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\devenv。您可以将此图标添加到您的任务栏或 Windows 桌面并启动 Visual Studio 2010。该文件夹位置有两个 devenv 图标，只需选择最新的一个，您可以通过查看文件属性找到它。我上面提到的文件夹路径对于 64 位 Windows 机器会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T14:44:40.940

出于某种原因，Visual Studio 2010 并没有完全为我加载，尽管它说它确实如此。所以我进入它的文件夹并选择 setup.exe 来运行维护模式。在那里我重新安装了它。它要求我（这次）重新启动我的笔记本电脑。我这样做了。然后我被提示通过给定的链接使用 service pack 1 更新来更新它。然后就没事了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-04T07:49:29.360

有两种查看方式：

*   在`Win8`或`Win8.1`搜索`"devenv.exe"`名称中，它会出现并在桌面中创建快捷方式。
*   在您的计算机上转到此地址： `C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe`

并在您的桌面上为此文件创建一个快捷方式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-14T10:59:54.673

在 Windows 8.0 或 8.1 中有两个选项，运行并键入“devenv”，然后 Visual Studio 将为您打开。

否则使用应用程序名称搜索并从已安装应用程序列表中选择“Microsoft Visual Studio”，右键单击该应用程序并选择“固定到开始”或“固定到任务栏”选项。这将使用方便的应用程序图标创建快捷方式。

# ios - RestKit：使用`postObject：usingBlock：`时如何传递附加参数

> ID：14534936
> 
> 赞同：1
> 
> 时间：2013-01-26T07:40:18.687
> 
> 标签：ios, restkit

我做一个这样的帖子：

```
 [[RKObjectManager sharedManager] postObject:object
                                 usingBlock:^(RKObjectLoader* loader) {
                                     loader.objectMapping = objectMapping;
                                     loader.delegate = self;
                                 }]; 
```

如何添加与 无关的附加参数`objectMapping`？就我而言，我想将一个标志传递给我的服务器并将其设置为`true`.

# c# - 我可以知道在格式化富文本中识别特殊字符串（预定义的字符序列）或代码的正确方法是什么

> ID：14534948
> 
> 赞同：1
> 
> 时间：2013-01-26T07:42:03.503
> 
> 标签：c#, html, parsing, ckeditor, richtextbox

我正在使用 CKEditor 允许用户将文本输入到用 c# 编码的 asp 页面中，该页面输出一些圣经文本，现在我想添加一个函数，让用户键入一些我将检测并替换为一些文本的字符串来自圣经，例如，如果我进入文本编辑器（例如，用~~~作为特殊的字符序列，我用它来识别特殊的代码/字符串）

今天是快乐的一天，我学到了：~~~1 John 4:7~~~。

代码隐藏应该能够检测到“1 John 4:7”字符串前后的~~~，并且能够知道可以查找并使用“1 John 4:7”字符串查找数据结构（我正在考虑使用哈希或字典或链表）页面上的输出可能是这样的

今天是快乐的一天，我学到了：“亲爱的，让我们彼此相爱，因为爱是来自上帝的。”

我可以使用普通文本框完成此操作，但如果我们有一个所见即所得的编辑器，则会在后台添加很多标签，如果我想为字符串添加颜色，它会使字符串更加复杂，因为编辑器可能不会突出显示从开头~~~到后面的~~~结尾的整个字符串。我可能会得到这样的字符串（ckeditor中文本的来源）

`<p> <span class="text 1John-4-7" id="en-KJ21-30580">~<span style="background-color: #ffff00">~~</span><strong><span style="background-color: #ffff00">1 Jo<u>hn </u><em>4:7</em></span></strong><span style="background-color: #ffff00">~~~</span></span></p>`

所以不是像这样的简单字符串 ~~~1 John 4:7~~~ ，我们有一个更长的字符串，有很多格式（这是预期的，因为我想能够在编辑器中添加带有格式的文本），单词 John 和“~~~”序列在标签之间分开。（因为字符串已部分突出显示，在这种情况下，我应该为整个特殊字符串使用出现的第一种颜色，或者为简单起见忽略整个字符串之间的所有标签（意味着查找的文本将仅采用格式包含~~~特殊字符串/代码~~~）

如果我们可以将整个字符串 ~~~1 John 4:7~~~ 作为原子字符串（我的意思是在编辑器中不会更改的连续字符串），那就太好了，但这可能不是案例，所以我想问一下，我应该怎么做，这样我就可以允许用户在编辑器中自由输入文本，但让 asp 页面能够检测到用户键入了一个特殊的字符串 /它可以尝试查找的代码，当使用一系列特殊字符（在本例中为~~~）将其括起来时。

非常感谢大家的阅读和美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:53:35.423

我看到两个解决方案。

1.  如果您想在客户端执行此操作，则必须深入研究 CKEditor 附加系统。有很多入门[示例。](http://ckeditor.com/addons/plugins)
2.  使用简单的正则表达式在服务器端执行此操作。

# c# - Dapper 是否支持未知数量的结果集？

> ID：14534952
> 
> 赞同：6
> 
> 时间：2013-01-26T07:43:00.593
> 
> 标签：c#, ado.net, dapper

## 更新：

正如 Marc 在下面提到的，我的基本问题是：当使用 QueryMultiple() 时调用 Read() 的次数多于记录集时会发生什么？

* * *

我正在将现有的数据库调用从使用 SqlDataReader 转换为 Dapper。

虽然有问题。我调用了一个 sproc，它有条件地可以再调用 1-4 个 sproc。所以我可能有很多结果集。为了简化我的解释，假设我只有 1-2 个结果集。如果第一个 sproc 没有被调用，但第二个 sproc 被调用，那么我的第一个 Read() 调用会吃掉第一个也是唯一的结果集。然后我有一堆应该是 ProjectItem 对象的无用 TeamItem 对象。然后它当然会在第二次调用 Read() 时爆炸，因为没有另一个结果集。

我是否遗漏了有关 Dapper 的某些内容，或者这是 Dapper 无法切实支持的极端情况？

```
if (_searchParams.WillSearchTeams)
{
    var teams = multi.Read<TeamItem>().ToList();
}
var projects = multi.Read<ProjectItem>().ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:55:01.940

我假设您已经在使用 QueryMultiple；听起来这里的基本问题是当您调用 Read 的次数超过网格时会发生什么。我想它可以返回一个空序列，但我*怀疑*某种 TryRead 会更好。不，它目前没有 - 但理论上可以。

# ios - Interface Builder (Xcode 4.5) 中的设计未更新

> ID：14534955
> 
> 赞同：1
> 
> 时间：2013-01-26T07:43:33.463
> 
> 标签：ios, xcode

我是 iOS 开发的新手。我正在使用 XCode 4.5。当我运行项目时，我在情节提要中有一个 Button 和一个 UITableView 一切正常，但之后它停止更新设计，就像我在情节提要底部添加了一个工具栏但在我运行项目时它没有显示，我有检查了一切；更改按钮位置，TableView 位置，清理项目然后重建但没有效果......任何帮助将不胜感激......

```
MyViewController.h 

#import <UIKit/UIKit.h> 
@interface TweetifyViewController : UIViewController{ 
   IBOutlet UITableView *tweetsContainer;
   NSArray *tweets; 
   NSMutableData *data; 
}

- (IBAction)composeTweet:(id)sender; 
- (IBAction)viewMentions:(id)sender; 

@end 
```

* * *

## 我的视图控制器.m

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return  1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tweets count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
        static NSString *customTableIdentifier = @"CustomTableCell";

        CustomTableCell *cell = (CustomTableCell *)[tableView dequeueReusableCellWithIdentifier:customTableIdentifier];
        if (cell == nil)
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:customTableIdentifier owner:self options:nil];
            cell = [nib objectAtIndex:0];
        }

        cell.Name.text = [[[tweets objectAtIndex:indexPath.row] objectForKey:@"user"] objectForKey:@"name"];
        NSString *At = @"@";
        NSString *AtUserName = [[[tweets objectAtIndex:indexPath.row] objectForKey:@"user"] objectForKey:@"screen_name"];
    cell.userName.text = [NSString stringWithFormat:@"%@%@",At, AtUserName];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    cell.avatar.image = [UIImage imageWithData:imageData];
    cell.tweetText.text = [[tweets objectAtIndex:indexPath.row] objectForKey:@"text"];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 120;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:46:38.007

目前尚不清楚您在哪里添加了工具栏：

> 在故事板的底部

可能工具栏被放置在 tableView 下，所以选择它并在 menu 中`Editor->Arrange->Send to front`。

# android - 从 Android/iOS 上的移动网站启动 Youtube 应用程序

> ID：14534965
> 
> 赞同：3
> 
> 时间：2013-01-26T07:45:19.907
> 
> 标签：android, jquery, html, ios, youtube

```
<a href="http://www.youtube.com/watch?v=UqX4ohZo8AM">Play Video</a> 
```

如果存在带有 Javascript 或原生 HTML 的 iOS 或 Android 设备上的 YouTube 应用程序，我如何强制该链接打开该应用程序？

目前它将链接到 youtube 移动网站，然后当我在 Android 上尝试时尝试从那里启动该应用程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T08:35:23.510

我相信这会为您解决问题。

[强制视频在 Android 上的 Youtube 应用中打开](https://stackoverflow.com/questions/11114341/force-video-to-open-in-youtube-app-on-android)

我想这使这是一个骗局。

# c++ - 定义了一个 std::list 但在迭代器上出错

> ID：14534966
> 
> 赞同：-1
> 
> 时间：2013-01-26T07:45:23.463
> 
> 标签：c++, list

我已经定义了一个`std::list`但我不知道为什么我不能使用迭代器

```
#include <iostream>
#include <list>
using namespace std;
class foo {
public:
  static const int N = 10;
  list<int *> myList[ N ];
  void bar()
  {
     list<int *>::iterator it = myList.begin();   //ERROR
  }
};

int main()
{
  foo a;
  a.bar();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:48:33.780

因为你有一个列表数组，而不是一个列表。不应该

```
list<int *> myList[N]; 
```

真的是

```
list<int *> myList; 
```

?

# perl - awk 镜像（反向）行

> ID：14534967
> 
> 赞同：2
> 
> 时间：2013-01-26T07:45:28.010
> 
> 标签：perl, awk, row

我想反转文件的行（单个字）。

```
cat dummy

Hugo
Dumas
Camus 
```

想要的输出如下所示：

```
Hugo oguH
Dumas samuD
Camus sumaC 
```

使用 awk 可能是最简单的，但 perl oneliner 也很适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T07:50:18.607

不需要`perl`or `awk`，只需使用`paste`and `rev`，并处理替换（否则只需使用临时文件）：

```
paste -d ' ' file <(rev file) 
```

结果：

```
Hugo oguH
Dumas samuD
Camus sumaC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T07:53:07.913

```
#!/usr/bin/awk -f

{
    row = $0
    s = ""
    for (i = length(row); i > 0; --i)
        s = s substr(row, i, 1)
    print row " " s
} 
```

对于输入中的每一行，循环遍历从每个位置获取长度为 1 的子字符串的字符并连接以生成反转字符串。然后打印行、空格和反转的字符串。

在 Python 中更容易！

```
#!/usr/bin/env python

import sys

for line in sys.stdin:
    row = line.strip()
    print(row + ' ' + row[::-1]) 
```

对于标准输入中的每一行，去掉空格以去掉换行符。然后打印行、空格和反转的行。它使用具有默认开头和结尾的“切片”进行反转，但步长为 -1 以使切片反向获取字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T10:09:22.060

```
$ perl -pi -le '$_ .= $" . reverse' file.txt 
```

说明（[`perldoc perlrun`](http://perldoc.perl.org/perlrun.html)详情请参阅）：

*   **`-p`**: 以逐行模式处理和打印文件
*   **`-i`**：启用就地编辑
*   **`-l`**: 自动处理行尾（在与和附加一起使用时隐含`chomp`s`-p``$\`
*   **`$"`**: 另一种写入`' '`默认值的方式是空格
*   **`$_ .= $" . reverse`**

    `$_`对应于该行包含的字符串（减去`chomp`-ed 行尾）。所以在这里，`.=`连接到`$_`一个空格 ( `$"`)，后跟`reverse`-d 字符串。请注意，无需`reverse($_)`显式指定，因为在标量上下文中，如果未指定参数，则会`reverse()`反转。`$_`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T08:01:11.217

带 sed 一个衬垫

`sed '/\n/!G;s/\(.\)\(.*\n\)/&\2\1/;//D;s/.//'`

# php - MySQL - 如果还不存在则插入

> ID：14534972
> 
> 赞同：9
> 
> 时间：2013-01-26T07:45:52.433
> 
> 标签：php, mysql, sql, sql-insert

我想执行这个 MySQL 查询：

`INSERT INTO `cron-stats` (`user`) VALUES (".(int)$d['by-user'].")`

每当此类用户尚不存在时，例如：

```
SELECT 1
FROM `cron-stats`
WHERE `user` = ".(int)$d['by-user']." 
```

如何在一个查询中执行此操作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-26T07:47:55.080

您可以使用`ON DUPLICATE KEY UPDATE`

```
INSERT INTO `cron-stats` (`user`) VALUES ('yourValue')
ON DUPLICATE KEY UPDATE user = user; 
```

*   [重复密钥更新](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

但为了`INSERT`很好地执行该语句，您需要`UNIQUE`在 column 上设置一个索引`user`。

如果该列还没有`index`，执行下面的语句，

```
 ALTER TABLE `cron-stats` ADD CONSTRAINT tb_un UNIQUE (`user`) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-26T07:52:39.830

有点hacky，但如果你使用`SELECT`派生表而不是`VALUES`你可以这样做：

```
INSERT INTO `cron-stats`(`user`)
SELECT u
FROM (SELECT @dByUser AS u) x
WHERE NOT EXISTS(SELECT 1 FROM `cron-stats` WHERE `user` = @dByUser) 
```

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/91546f/1)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-26T07:57:40.230

您可以尝试使用 if else 条件

```
$chk = mysql_query("select 'the username' FROM `cron-stats`");
$rs = mysql_fetch_array($chk);
if($rs == "")
{
    $ins = mysql_query("INSERT INTO `cron-stats` (`user`) VALUES ('.(int)$d['by-user'].')");
} 
else{
    echo "Duplicate entry";
} 
```

# algorithm - 煎饼分拣

> ID：14534975
> 
> 赞同：0
> 
> 时间：2013-01-26T07:46:06.497
> 
> 标签：algorithm, sorting

我的作业有点麻烦；我的任务是想出我自己的解决方案来解决煎饼问题。

我已经把大部分代码都写下来了，除了这一部分（以下是伪代码）：

```
//assuming input is an array of [0...n-1] size
int maxValue = -infinity
for int i <- 0 to n-1 do
{
    for int j <-i to n-1 do
    {
       if A[j] > maxValue
       {
          maxValue <- A[j]
          maxPos <- j
    if ((maxPos == n-1) && (maxPos > i))
    {
        flip(i) //flipping starting from index i
    }
    /*the following is the bit i'm stuck on
    i know that should be able to flip the max value IN the array 
    (but not the end) to the n-1 term. 
    On the next iteration of the loop, i flip the maxValue (now held in the last 
    element) into the slot that is either at the beginning of the array, or at the
    element closest to the elements already sorted */
    maxValue <- -infinity 
```

抱歉，对于随机短代码，我在输入 =(.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:47:38.453

我想你被困住了`infinity`。你可以把它当作一个`large integer or long number`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T10:46:00.577

煎饼排序：

煎饼排序是一个数学问题的通俗术语，用于按大小顺序对一堆无序的煎饼进行排序，此时可以将抹刀插入堆叠中的任何点并用于翻转上面的所有煎饼。

煎饼数是给定数量的煎饼所需的最大翻转次数。

***flip(array, i)：从 0 到 i 的反转数组。***

**伪代码 Pancake 排序：**

**1) iMax = 未排序数组中最大元素的索引。**

在 arr[0..unsorted_array_size -1] 中查找最大元素索引的索引。

**2) 调用翻转(array, iMax)**

它将数组的所有元素从 0 翻转到 iMax 索引。最大的元素将是数组中的第一个元素。

**3) 调用翻转(array, unsorted_array_size -1)**

翻转完整的未排序数组，结果将最大的元素放在未排序数组的末尾。

复杂性：总共执行 O(n) 次翻转操作，其中每次翻转将花费 O(n) 时间。因此复杂度为 O(n^2)。

[http://javaexplorer03.blogspot.in/2015/11/pancake-sort-in-java.html](http://javaexplorer03.blogspot.in/2015/11/pancake-sort-in-java.html)

# mongodb - MongoDB $或查询

> ID：14534984
> 
> 赞同：18
> 
> 时间：2013-01-26T07:47:49.897
> 
> 标签：mongodb, mongodb-shell

我在 mongo shell 中运行以下查询：

```
db.Profiles.find ( { $or : [ { "name" : "gary" }, {"name":"rob} ] } ) 
```

它只是没有按预期返回（JSON）？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-26T07:54:56.340

## 使用 $in

对于问题中的查询，使用[$in更合适](http://docs.mongodb.org/manual/reference/operator/in/#_S_in)

```
db.Profiles.find ( { "name" : { $in: ["gary", "rob"] } } ); 
```

## 为什么它不起作用

缺少引用 - cli 正在等待您完成 or 的第二部分：

```
db.Profiles.find ( { $or : [ { "name" : "gary" }, {"name":"rob} ] } )
..............................................................^ 
```

您需要充分完成查询，以便 cli 对其进行解析，然后说存在语法错误。

## 不区分大小写的匹配

如评论所示，如果您想以不区分大小写的方式进行搜索，则可以使用`$or`$ [regex](http://docs.mongodb.org/manual/reference/operator/regex/)：

```
db.Profiles.find ( { $or : [ { "name" : /^gary/i }, {"name": /^rob/i } ] } ) 
```

或者，您只需使用一个正则表达式：

```
db.Profiles.find ( { "name" : /^(gary|rob)/i } ) 
```

但是，不以固定字符串开头的正则表达式查询不能使用索引（它不能使用索引并有效地执行“从这里开始直到找不到匹配项然后保释”），因此是次优的。如果这是您的要求，最好存储一个规范化的名称字段（例如`name_lc`- 小写名称）并对其进行查询：

```
db.Profiles.find ( { "name_lc" : { $in: ["gary", "rob"] } } ); 
```

# java - 如何使用“get”方法编写 HttpRequest

> ID：14534987
> 
> 赞同：1
> 
> 时间：2013-01-26T07:47:55.940
> 
> 标签：java, google-http-client

我正在使用**com.google.api.client.http**

我想用这个包发送一些请求。

```
HttpRequest request = new HttpRequest(new HttpTransport(),"GET"); 
```

但是包中的 HttpTransport 是抽象的，所以这意味着我需要实现这个类吗？

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:56:35.897

如果库提供了一些继承自该抽象类的具体类，则不必实现该类（除非它们都不符合您的需要）。例如`ApacheHttpTransport`，`NetHttpTransport`和`UrlFetchTransport`。

# android - android中的Import.Jar文件给出错误

> ID：14534989
> 
> 赞同：0
> 
> 时间：2013-01-26T07:48:10.297
> 
> 标签：android

首先我用java编写了small然后导出到.jar文件这里是Java代码

```
package de.vogella.eclipse.ide.first;

public class MyFirstClass {

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println("Hello Eclipse!");

    }

} 
```

然后转换为“myfile.jar”它的工作正常（“Hello Eclipse！”）我在 android 应用程序中调用“myfile.jar”文件但无法在 android 应用程序中获取“MyFirstClass”，Android 代码 main.java

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import de.vogella.eclipse.ide.first.*;  // Here I imported jar file

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:02:00.873

本教程将帮助您

[http://mobile.tutsplus.com/tutorials/android/jar-for-android/](http://mobile.tutsplus.com/tutorials/android/jar-for-android/)

希望这有帮助

# php - 我们如何在 cakephp 的控制器名称之前添加一些文本？

> ID：14534991
> 
> 赞同：0
> 
> 时间：2013-01-26T07:48:42.157
> 
> 标签：php, cakephp, seo

我有一个 SEO 要求，当用户登录时，他们的用户名应该显示在控制器名称之前。

IE

*   example.com/home - 目前看起来像这样
*   example.com/username/home - 我希望它看起来像这样

我在 routes.php 中尝试了一些基本修改，例如：

```
Router::connect('/haresh/:controller', array('action' => 'index')); 
```

有了这个，它就可以了，但是这个选项丢失了基本路径，所以所有图像都消失了。即像这样的图像网址：

```
<img src='img/xyz.png' /> 
```

不要工作。

如何修改 url 使其`/username/`作为所有 url 的前缀，并修复图像路径问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:33:12.770

## SEO适用于匿名用户

如果问题中的网址仅适用于已登录的用户 - 它们的 SEO 价值为零 - 因为 googlebot et.al. 永远不会登录您的网站，如果他们这样做了 - 所有网址都是`/googlebots-username/...`.

## 搜索引擎优化路线

假设这些用户 url 是可公开访问的（请参阅前一点，如果不是，则它们没有任何价值），您需要做的就是为它们定义一个路由：

```
// define other routes first
Router::connect('/about', array('controller' => 'pages', 'action' => 'display', 'about'));

Router::connect('/:username/:controller', array('controller' => 'default', 'action' => 'index'));
Router::connect('/:username/:controller/:action', array('controller' => 'default', 'action' => 'index'));
Router::connect('/:username/:controller/:action/*', array('controller' => 'default', 'action' => 'index')); 
```

然后，您可以访问控制器内的用户名属性

```
$username = $this->request->params['named']['username']; 
```

## 修复图像

这是一个单独的问题，但简单的解决方法是使用[适当的辅助方法](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3aimage)：

```
<?php echo $this->Html->image('xyz.png', array('alt' => 'to the abc')); ?> 
```

*大多数*标记问题的答案是使用适当的辅助方法。

### 或者

或者只使用绝对网址：

```
<img src='/img/xyz.png' /> 
```

显然，如果 url 正在更改 - 使用资产的相对路径意味着请求的图像会根据当前 url 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:18:14.783

如果只是图像路径问题，您可以使用任一解决方案

1 使用 cakephp 的 html helper 类

```
 <?php echo $this->Html->image('xyz.png', array('alt' => 'alternate text')); ?> 
```

2 使用webroot路径

```
<img src='<?php echo $this->webroot ?>img/xyz.png' /> 
```

# linux-kernel - Windows PC (Windows 7) 上的 Linux 内核开发

> ID：14534994
> 
> 赞同：0
> 
> 时间：2013-01-26T07:50:07.410
> 
> 标签：linux-kernel

尽管我对 Solaris 非常熟悉，但我对 Linux 内核开发领域还是很陌生。我刚刚开始阅读一本关于 Linux 内核开发的著名书籍，它建议读者只使用 Linux 系统以及手头可用的最新内核源代码。

我知道论坛上有很多关于如何有选择地使用 Linux 或 Windows 引导 PC 的建议。建议包括使用 VMWare、Linux 启动 CD、USB、安装在 Windows 分区上的 Linux 等。

但我的问题是，如果我使用 VMWare 或 Linux 启动 CD，我是否能够做一些事情，比如修改 Linux 内核源代码以添加新功能或修复错误，然后启动系统以查看更改核心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:54:10.240

您可以使用 VMVare 或任何其他虚拟机。在这种情况下，Linux 引导 CD 无法帮助您。

为了能够使用新内核引导系统，您应该能够更改引导加载程序设置。在这种情况下，虚拟机环境与常规系统安装没有区别。但是，要更改 Linux 引导 CD 中的引导加载设置，您必须重建引导 CD iso，这不是最简单的任务。

# mysql - 我应该使用异步 MySQL 查询吗？

> ID：14534997
> 
> 赞同：0
> 
> 时间：2013-01-26T07:50:19.253
> 
> 标签：mysql, perl, sockets, asynchronous

目前，我正在使用 Perl 开发套接字服务器。服务器接受客户端，并侦听一系列命令，这些命令有时可能会在 MySQL 表中获取或设置值（大约 45 - 65% 的时间，并非总是如此）。服务器将有相当多的客户端连接并同时使用它（100+）。

我的问题（从标题中可以看出）是：我应该使用异步 MySQL 查询吗？我知道我可能会从不需要从中获取任何输出的查询（我设置值等）上使用异步 MySQL 获得好处，但是带有输出的查询真的需要足够的时间，我需要异步 MySQL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:45:53.043

查询所需的时间主要取决于查询本身、数据库的结构以及您正在查看的数据量。

异步查询的好处是您的脚本无需等待服务器响应即可继续运行。

我对 perl 不是很熟悉，但是为了获取异步查询后返回的数据，您需要某种回调函数，该函数在服务器响应后执行。

# python - 将 C 结构转换为 ctypes.Structure 的工具？

> ID：14534998
> 
> 赞同：11
> 
> 时间：2013-01-26T07:50:45.070
> 
> 标签：python, structure, ctypes

当我使用 ctypes 时，我大部分时间都花在将 C 结构转换为 ctypes.Structure 上，如果它是一些 Windows 结构，则将转换 typedef 的数据类型的工作加倍。这是一个单调乏味的过程。

是否有一些可用的工具可以自动完成？，我想我给它结构和包含头，它会为我生成 ctypes.Structure。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:35:37.340

我自己没有这方面的经验，但是[ctypes 代码生成器](http://starship.python.net/crew/theller/ctypes/old/codegen.html)看起来很像您正在寻找的东西：

> 生成器将 C 头文件中的声明转换为可执行的 Python 代码：枚举、结构、联合、函数声明、com 接口和预处理器定义。

它可以从[svn repo](http://svn.python.org/projects/ctypes/trunk/ctypeslib/)获得。请注意，最后一次提交是在 2009 年，因此您的里程可能会有所不同。

# c++ - 为什么 push_back 对左值和右值有两个重载？

> ID：14534999
> 
> 赞同：8
> 
> 时间：2013-01-26T07:50:50.860
> 
> 标签：c++, c++11, move-semantics

为什么一个类/函数会有两个重载，一个用于左值，一个用于右值？

例如，从[这个](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)视频中，它说我们有两个重载`vector<T>::push_back`

```
void push_back( const T& value );
void push_back( T&& value ); 
```

为什么我们不能只按值重载一个，

```
void push_back( T value ); 
```

如果它是一个左值，值将被复制，如果它是一个右值，值将被移动。这不是标准的工作方式和保证方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T07:56:09.800

根据您的按价值主张，从技术上讲，会有复制+移动或移动+移动，而对于其他两个重载，则只有一个复制或一个移动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T07:59:12.417

除了其他人提到的一点之外，它还需要*更改*旧界面。有时这根本是不可接受的。