# StackOverflow 问答 13016000-13016999

# python - WebPy：AttributeError没有名为索引的模板

> ID：13016003
> 
> 赞同：1
> 
> 时间：2012-10-22T16:49:46.137
> 
> 标签：python, html, indexing, web.py

最近我一直在尝试学习 WebPy，当尝试在教程 ( [http://webpy.org/docs/0.3/tutorial](http://webpy.org/docs/0.3/tutorial) ) 中使用模板时，我在尝试访问页面时遇到了这个错误。

```
File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/application.py", line 239, in process
return self.handle()

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/application.py", line 230, in handle
return self._delegate(fn, self.fvars, args)

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/application.py", line 420, in _delegate
return handle_class(cls)

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/application.py", line 396, in handle_class
return tocall(*args)

File "/Users/clement/Desktop/#Minecraft/index2.py", line 14, in GET
return render.index(name)

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/template.py", line 1017, in __getattr__
t = self._template(name)

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/template.py", line 1014, in _template
return self._load_template(name)

File "/Library/Python/2.7/site-packages/web.py-0.37-py2.7.egg/web/template.py", line 1001, in _load_template
raise AttributeError, "No template named " + name

AttributeError: No template named index 
```

我已经在 SOF 上查看了这个[问题](https://stackoverflow.com/questions/7179768/python-exception-no-template-named-index-in-lpthw-web-framework)，但我无法让它在我的情况下工作。我花了大约 4 个小时试图弄清楚这一点，并试图重新设计我启动服务的方式，这通常是通过以下方式完成的：

```
Macintosh-2:~ clement$ python /Users/clement/Desktop/\#Minecraft/index.py 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:07:19.387

我相信我已经找到了答案。

解决：

1.  将 CD 放入包含 main.py（或在我的情况下为 index.py）的目录中
2.  确保您的 HTML 文件位于您 cd 进入的名为“模板”的目录中
3.  运行方式：python [main.py 的完整路径]

希望这可以帮助有类似问题的人:)

（注：运行 OS X 10.8.1）

# assembly - 引导加载程序崩溃

> ID：13016004
> 
> 赞同：2
> 
> 时间：2012-10-22T16:49:47.350
> 
> 标签：assembly, x86, nasm, osdev, bochs

我目前正在开发我的引导加载程序，但我有问题。

我使用 Bochs 测试引导加载程序，编译引导加载程序并制作磁盘映像：

```
rm disk.bin
rm boot.bin
rm post.bin
nasm bootloader.asm -o boot.bin
nasm postmbr.asm -o post.bin
cat boot.bin post.bin > disk.bin 
```

这是 bootloader.asm：

```
[BITS 16]       ;Tells the assembler that its a 16 bit code
[ORG 0x7C00]    ;Origin, tell the assembler that where the code will

MOV SI, HelloString ;Store string pointer to SI
MOV AH, 02h          ; read sector command
MOV AL, 01h
MOV CX, 0001h
MOV DH, 00h
MOV DL, 80h ;disk
MOV AX, 7E00h
MOV ES, AX ;buffer
MOV BX, 00h ;offset
CALL PrintString
JMP 0x7E00              ;Infinite loop, hang it here.

PrintCharacter: ;Procedure to print character on screen
        ;Assume that ASCII value is in register AL
MOV AH, 0Eh     ;Tell BIOS that we need to print one charater on screen.
MOV BH, 00h     ;Page no.
MOV BL, 07h     ;Text attribute 0x07 is lightgrey font on black background

INT 10h ;Call video interrupt
RET             ;Return to calling procedure

PrintString:    ;Procedure to print string on screen
        ;Assume that string starting pointer is in register SI

next_character: ;Lable to fetch next character from string
MOV AL, [SI]    ;Get a byte from string and store in AL register
INC SI          ;Increment SI pointer
OR AL, AL       ;Check if value in AL is zero (end of string)
JZ exit_function ;If end then return
CALL PrintCharacter ;Else print the character which is in AL register
JMP next_character      ;Fetch next character from string
exit_function:  ;End label
RET             ;Return from procedure

;Data
HelloString db 'Loading OS demo...', 0  ;HelloWorld string ending with 0

TIMES 510 - ($ - $$) db 0       ;Fill the rest of sector with 0
DW 0xAA55                       ;Add boot signature at the end of bootloader 
```

和 postmbr.asm：

```
[BITS 16]       ;Tells the assembler that its a 16 bit code

MOV SI, HelloString ;Store string pointer to SI
CALL PrintString        ;Call print string procedure
JMP $           ;Infinite loop, hang it here.

PrintCharacter: ;Procedure to print character on screen
        ;Assume that ASCII value is in register AL
MOV AH, 0x0E    ;Tell BIOS that we need to print one charater on screen.
MOV BH, 0x00    ;Page no.
MOV BL, 0x07    ;Text attribute 0x07 is lightgrey font on black background

INT 0x10        ;Call video interrupt
RET             ;Return to calling procedure

PrintString:    ;Procedure to print string on screen
        ;Assume that string starting pointer is in register SI

next_character: ;Lable to fetch next character from string
MOV AL, [SI]    ;Get a byte from string and store in AL register
INC SI          ;Increment SI pointer
OR AL, AL       ;Check if value in AL is zero (end of string)
JZ exit_function ;If end then return
CALL PrintCharacter ;Else print the character which is in AL register
JMP next_character      ;Fetch next character from string
exit_function:  ;End label
RET             ;Return from procedure

;Data
HelloString db 'Hello World', 0 ;HelloWorld string ending with 0

TIMES 512 - ($ - $$) db 0       ;Fill the rest of sector with 0 
```

这是来自 Bochs 的崩溃日志：

```
00000004661i[BIOS ] $Revision: 11318 $ $Date: 2012-08-06 19:59:54 +0200 (Mo, 06\. Aug 2012) $
00000319074i[KBD  ] reset-disable command received
00000321808i[BIOS ] Starting rombios32
00000322242i[BIOS ] Shutdown flag 0
00000322837i[BIOS ] ram_size=0x02000000
00000323258i[BIOS ] ram_end=32MB
00000363787i[BIOS ] Found 1 cpu(s)
00000377969i[BIOS ] bios_table_addr: 0x000fa438 end=0x000fcc00
00000396429i[BIOS ] bios_table_cur_addr: 0x000fa438
00000524046i[VBIOS] VGABios $Id: vgabios.c,v 1.75 2011/10/15 14:07:21 vruppert Exp $
00000524117i[BXVGA] VBE known Display Interface b0c0
00000524149i[BXVGA] VBE known Display Interface b0c5
00000527074i[VBIOS] VBE Bios $Id: vbe.c,v 1.64 2011/07/19 18:25:05 vruppert Exp $
00000800003i[XGUI ] charmap update. Font Height is 16
00000866078i[BIOS ] ata0-0: PCHS=1/1/2 translation=none LCHS=1/1/2
00004743252i[BIOS ] IDE time out
00016726470i[BIOS ] Booting from 0000:7c00
00016755553e[CPU0 ] write_virtual_word_32(): segment limit violation
00016755553e[CPU0 ] write_virtual_word_32(): segment limit violation
00016755553e[CPU0 ] write_virtual_word_32(): segment limit violation
00016755553i[CPU0 ] CPU is in real mode (active)
00016755553i[CPU0 ] CS.mode = 16 bit
00016755553i[CPU0 ] SS.mode = 16 bit
00016755553i[CPU0 ] EFER   = 0x00000000
00016755553i[CPU0 ] | EAX=000000aa  EBX=00000007  ECX=00090001  EDX=00000080
00016755553i[CPU0 ] | ESP=00000001  EBP=00000000  ESI=000e7c45  EDI=0000ffac
00016755553i[CPU0 ] | IOPL=0 id vip vif ac vm RF nt of DF if tf SF zf af PF cf
00016755553i[CPU0 ] | SEG sltr(index|ti|rpl)     base    limit G D
00016755553i[CPU0 ] |  CS:0000( 0004| 0|  0) 00000000 0000ffff 0 0
00016755553i[CPU0 ] |  DS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00016755553i[CPU0 ] |  SS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00016755553i[CPU0 ] |  ES:7e00( 0005| 0|  0) 0007e000 0000ffff 0 0
00016755553i[CPU0 ] |  FS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00016755553i[CPU0 ] |  GS:0000( 0005| 0|  0) 00000000 0000ffff 0 0
00016755553i[CPU0 ] | EIP=0000fd34 (0000fd34)
00016755553i[CPU0 ] | CR0=0x60000010 CR2=0x00000000
00016755553i[CPU0 ] | CR3=0x00000000 CR4=0x00000000
00016755553i[CPU0 ] 0x0000fd34>> pusha  : 60
00016755553e[CPU0 ] exception(): 3rd (12) exception with no resolution, shutdown status is 00h, resetting
00016755553i[SYS  ] bx_pc_system_c::Reset(HARDWARE) called
00016755553i[CPU0 ] cpu hardware reset
00016755553i[APIC0] allocate APIC id=0 (MMIO enabled) to 0x00000000fee00000
00016755553i[CPU0 ] CPUID[0x00000000]: 00000002 68747541 444d4163 69746e65
00016755553i[CPU0 ] CPUID[0x00000001]: 00000633 00010800 00000008 17cbfbff
00016755553i[CPU0 ] CPUID[0x00000002]: 00000000 00000000 00000000 00000000
00016755553i[CPU0 ] CPUID[0x80000000]: 80000008 68747541 444d4163 69746e65
00016755553i[CPU0 ] CPUID[0x80000001]: 00000633 00000000 00000000 c1c3f3ff
00016755553i[CPU0 ] CPUID[0x80000002]: 20444d41 6c687441 74286e6f 7020296d
00016755553i[CPU0 ] CPUID[0x80000003]: 65636f72 726f7373 00000000 00000000
00016755553i[CPU0 ] CPUID[0x80000004]: 00000000 00000000 00000000 00000000
00016755553i[CPU0 ] CPUID[0x80000005]: 01ff01ff 01ff01ff 40020140 40020140
00016755553i[CPU0 ] CPUID[0x80000006]: 00000000 42004200 02008140 00000000
00016755553i[CPU0 ] CPUID[0x80000007]: 00000000 00000000 00000000 00000000
00016755553i[CPU0 ] CPUID[0x80000008]: 00002028 00000000 00000000 00000000
00016755553i[     ] reset of 'cmos' plugin device by virtual method
00016755553i[     ] reset of 'dma' plugin device by virtual method
00016755553i[     ] reset of 'pic' plugin device by virtual method
00016755553i[     ] reset of 'pit' plugin device by virtual method
00016755553i[     ] reset of 'floppy' plugin device by virtual method
00016755553i[     ] reset of 'vga' plugin device by virtual method
00016755553i[     ] reset of 'ioapic' plugin device by virtual method
00016755553i[     ] reset of 'keyboard' plugin device by virtual method
00016755553i[     ] reset of 'harddrv' plugin device by virtual method
00016755553i[     ] reset of 'unmapped' plugin device by virtual method
00016755553i[     ] reset of 'biosdev' plugin device by virtual method
00016755553i[     ] reset of 'speaker' plugin device by virtual method
00016755553i[     ] reset of 'extfpuirq' plugin device by virtual method
00016755553i[     ] reset of 'parallel' plugin device by virtual method
00016755553i[     ] reset of 'serial' plugin device by virtual method 
```

这是 Bochs 的配置文件：

```
# configuration file generated by Bochs
plugin_ctrl: unmapped=1, biosdev=1, speaker=1, extfpuirq=1, parallel=1, serial=1
config_interface: textconfig
display_library: x
memory: host=32, guest=32
romimage: file="/usr/share/bochs/BIOS-bochs-latest"
vgaromimage: file="/usr/share/bochs/VGABIOS-lgpl-latest"
boot: disk
floppy_bootsig_check: disabled=0
# no floppya
# no floppyb
ata0: enabled=1, ioaddr1=0x1f0, ioaddr2=0x3f0, irq=14
ata0-master: type=disk, mode=flat, translation=auto, path="disk.bin", cylinders=1, heads=1, spt=2, biosdetect=auto, model="Generic 1234"
ata1: enabled=1, ioaddr1=0x170, ioaddr2=0x370, irq=15
ata2: enabled=0
ata3: enabled=0
pci: enabled=0
vga: extension=vbe, update_freq=5
cpu: count=1, ips=4000000, model=bx_generic, reset_on_triple_fault=1, cpuid_limit_winnt=0, ignore_bad_msrs=1, mwait_is_nop=0
cpuid: family=6, model=0x03, stepping=3, mmx=1, apic=xapic, sse=sse2, sse4a=0, sep=1, aes=0, xsave=0, xsaveopt=0, movbe=0, adx=0, smep=0, mwait=1
cpuid: vendor_string="AuthenticAMD"
cpuid: brand_string="AMD Athlon(tm) processor"

print_timestamps: enabled=0
port_e9_hack: enabled=0
private_colormap: enabled=0
clock: sync=none, time0=local, rtc_sync=0
# no cmosimage
# no loader
log: -
logprefix: %t%e%d
panic: action=ask
error: action=report
info: action=report
debug: action=ignore
keyboard: type=mf, serial_delay=250, paste_delay=100000, keymap=
user_shortcut: keys=none
mouse: enabled=0, type=ps2, toggle=ctrl+mbutton
parport1: enabled=1, file=""
parport2: enabled=0
com1: enabled=1, mode=null, dev=""
com2: enabled=0
com3: enabled=0
com4: enabled=0 
```

我不知道出了什么问题，我还没有在其他平台上测试过我的引导加载程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:40:20.260

好吧，故障转储明确指出了`pusha`试图将寄存器压入已破坏堆栈的指令。

相关位：

> 00016755553e[CPU0] **write_virtual_word_32()：违反段限制**
> 00016755553e[CPU0] write_virtual_word_32()：违反段限制
> 00016755553e[CPU0] write_virtual_word_32()：违反段限制
> 00016755553i[CPU0] | EAX=000000aa EBX=00000007 ECX=00090001 EDX=00000080
> 00016755553i[CPU0] | **ESP=00000001** EBP=00000000 ESI=000e7c45 EDI=0000ffac
> 00016755553i[CPU0] | SEG sltr(index|ti|rpl) 基本限制 GD
> 00016755553i[CPU0] | CS:0000(0004|0|0)00000000 0000ffff 0 0
> 00016755553i[CPU0]| SS:0000(0005|0|0)00000000 0000ffff 0 0
> 00016755553i[CPU0]| EIP=0000fd34 (0000fd34)
> 00016755553i[CPU0] **0x0000fd34>> pusha : 60**
> 00016755553e[CPU0] **exception()：第 3 (12) 个异常，无解决，关机状态为 00h，正在重置**

该指令在将数据写入堆栈时试图在偏移量 0 处越过下段边界。这会导致不可恢复的异常和以下重置。

最可能的原因是跳转到错误的位置并在那里执行随机的东西，可能是数据。

看看这个指令：

```
JMP 0x7E00              ;Infinite loop, hang it here. 
```

CPU 执行后，`CS:IP`将是 0:0x7E00。

现在看看你的 postmbr.asm：

```
[BITS 16]       ;Tells the assembler that its a 16 bit code

MOV SI, HelloString ;Store string pointer to SI
... 
```

那里没有`org`，在这种情况下`org 0`是隐含的。

因此，这部分代码的编译假设`IP`在开始时 =0 并且所有偏移量都从这部分代码的开头开始计算，并且从逻辑上讲，这意味着`CS`= `DS`=0 也是错误的。但是您在寄存器中使用错误的、意外的值跳转到它。

所以这段代码不会按预期执行。IOW，它几乎可以做任何事情，我敢打赌，它确实会导致堆栈破坏和崩溃。

**这里的关键教训：x86 代码不是与位置无关的。**

您应该插入适当的`org`( `org 0x7E00`) 或相应地设置寄存器并跳到这部分代码（使用 eg `jmp 0x7e0:0`）。

**更新：现在是我上一课的时候了……**上述问题确实存在。**然而，正如@ughoavgfhw**所指出的，还有一个几乎在同一个地方，但发生的时间稍早一些。永远不会加载第二个 512 字节。是的。BIOS 本身只加载第一个扇区。第一个扇区必须通过显式调用 BIOS int 13h 来加载第二个扇区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:43:46.153

```
JMP 0x7E00 
```

此时跳转到 0x7E00 将导致意外行为。看起来您想跳转到 post.bin，您希望在 0x7E00 加载该文件。它不是。BIOS 仅在 0x7C00 处加载了 1 个扇区 boot.bin。您必须手动加载任何其他扇区。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T17:37:47.077

当您的引导加载程序开始运行时，大多数寄存器的值可以是任何值。这包括堆栈指针。您的崩溃报告显示`esp`为 1，并且由于`pusha`指令上的三重错误而发生崩溃，这基本上意味着您正在尝试将数据推送到不存在的堆栈上。这是因为你从来没有设置堆栈指针，所以你不知道它在哪里。您需要将堆栈指针设置为您首先要做的事情之一。我建议将其设置为 0x7c00，以便将其放置在您的代码下方。将其放在引导加载程序的开头附近：

```
mov  sp, 0x7C00 
```

# git - 如何将未更改的补丁集推送到 gerrit 并避免创建新版本？

> ID：13016006
> 
> 赞同：1
> 
> 时间：2012-10-22T16:49:48.233
> 
> 标签：git, push, gerrit

我在一个使用 Git/Gerrit 作为源代码控制/代码审查的小团队中工作。
当团队中的开发人员想要提交他们的工作时，他们提交/推送到 gerrit 并开始开发新功能。
此外，鼓励开发人员尽可能推动他们的工作，他们通常在已经提交的更改（通过挑选相关更改）之上工作，这些更改目前正在审查中。

问题是，当开发人员尝试推送更改时，他们也会推送更改的历史记录。作为副作用，这些更改会获得与相同更改的先前版本没有区别的新版本。此外，开发人员现在必须获得“伪造”许可（假设某些精心挑选的更改不是他的）

示例：假设亚当的一个分支的历史看起来像这样（更高的变化是最新的）：

Change 3（作者：Adam，目前在职）
Change 2（Athhor：Charlie）
Change 1（作者：Bath）
大师

现在，更改 1,2 是从 gerrit 中挑选出来的，并且没有更改。
当亚当推送他的补丁时，他必须能够在更改 1,2 上伪造提交者，并且他们会获得更新的版本（与之前的推送没有任何区别）

有人可以建议如何避免这种行为吗？我们做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:47:50.513

Gerrit 正在创建这些补丁集的新版本，因为它们*发生了*变化——当开发人员精心挑选出待审查的变化时，它会修改 git 提交。提交现在具有不同的父级和不同的 SHA1。

有两种方法可以避免这种情况：

1.  花时间正确审查/验证/合并仍在审查中的更改，然后再对其进行更多工作
2.  与其在本地挑选更改，不如使用结帐。这将使现有的补丁集保持原样，因此顶部的任何提交都可以正常上传，而无需修改现有的补丁集。但是，这会将您在存储库中的位置移动到创建补丁集时所在的位置 - 自上传补丁集以来，您不会有任何已合并的提交。

在 dayjob，我们会根据情况结合使用这两种方法。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:02:43.613

我们公司也有类似的问题。Gerrit 附带一个脚本，您应该将其添加到本地存储库（它在 windows、mac 和 linux 下工作）。当对本地存储库进行提交时，它会自动运行并生成提交 ID（将其添加到提交消息的末尾）。

如果稍后提交的 SHA1 发生更改（例如由于修改），Gerrit 将看到它是相同的提交并且不会创建新的入口点，如果提交仍在审查中，它只会更新文件。

要将脚本复制到您的存储库并执行以下操作：

```
scp -p -P 29418 username@path.gerrit.server.com:hooks/commit-msg .git/hooks/ 
```

# opencv - 如何从一个函数返回多个图像？

> ID：13016010
> 
> 赞同：0
> 
> 时间：2012-10-22T16:49:52.103
> 
> 标签：opencv

我觉得我正在做从函数返回图像的效率不高的方法。

如果我使用，

```
void processImg(IplImage* srcImg, IplImage* dstImg1, IplImage* dstImg2)
{
....processing image
cvCopy(..., dstImg1);
cvCopy(..., dstImg2);
} 
```

对于上面的例子，我怎样才能返回这两个图像呢？

如果我使用 IplImage*processImg(IplImage* srcImg, IplImage* dstImg1, IplImage* dstImg2)，它只能返回一个图像。

如何根据这两个函数返回图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:47:59.363

你在做什么工作。您正在传递指向两个 dst 图像的指针。这意味着如果您修改这些图像，您实际上是在修改原始图像。

如果这不是您要查找的内容，并且您确实想返回两个图像，则可以探索其他数据结构，例如列表或链表。您可以将这两个图像放在该结构中并返回该结构。

```
std::list<IplImage *> processImg(IplImage* srcImg)
{
    std::list<IplImage *> image_list;

    //....processing image

    //create two ipl images pointers
    IplImage *dstImg1, *dstImg2;

    //allocate memory for the ipl images

    //copy the data into images
    cvCopy(..., &dstImg1);
    cvCopy(..., &dstImg2);

    //add the images to list
    image_list.push_back(dstImg1);
    image_list.push_back(dstImg2);

    return image_list;
 } 
```

# clojure - 有没有更好的方法来映射除第一个项目之外的所有项目？

> ID：13016020
> 
> 赞同：11
> 
> 时间：2012-10-22T16:50:58.347
> 
> 标签：clojure

我觉得必须有一种更清洁的方法来做到这一点，但我看不到。

```
(defn map-rest
  "Passes through the first item in coll intact. Maps the rest with f."
  [f coll]
  (concat (list (first coll)) (map f (rest coll)))) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-22T17:32:11.807

解构和使用`cons`而不是`concat`：

```
(defn map-rest [f [fst & rst]] (cons fst (map f rst))) 
```

REPL 输出：

```
user=> (map-rest inc [1 2 3 4 5])
(1 3 4 5 6) 
```

# objective-c - 连接 UITextField 以更新标签

> ID：13016021
> 
> 赞同：2
> 
> 时间：2012-10-22T16:51:08.393
> 
> 标签：objective-c, ios, interface-builder

我仍在开发我的转换器应用程序，我再次偶然发现了一个问题。

在尝试在文本字段中进行所有编辑以触发计算代码时，没有发生任何事情。这就是atm发生的事情：

![试图输入数字](../Images/09c1c88688ba83bbcf566e93129180e6.png)

在我更改 PickerWheel 中的某些内容之前，不会触发计算。我没有责怪代码，因为这就是我第一次制作它的方式。

在尝试解决此问题时，我从好友那里得到了一些帮助，并添加了以下代码以使其正常工作。

第一的，

```
- (void)textFieldChanged:(UITextField *)textField
{
[self updateConversionLabel];
} 
```

在 .m 的开头，以及 .h 的以下内容（我知道它的两个，那可能是错误的，但我想尝试两者。）

```
-(IBAction)textFieldChanged:(UITextField *)textField;
-(void)textFieldChanged:(UITextField *)textField; 
```

计算如下：

```
#pragma mark -
#pragma mark PickerView Delegate

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
[self updateConversionLabel];
}

- (void)updateConversionLabel
{
float convertFrom = [[_convertRates objectAtIndex:[picker selectedRowInComponent:0]] floatValue];

float convertTo = [[_convertRates objectAtIndex:[picker selectedRowInComponent:1]] floatValue];

float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;

float convertValue = input;
float relative = to / from;
float result = relative * convertValue;

NSString *convertFromName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:0]];
NSString *convertToName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:1]];

NSString *resultString = [[NSString alloc]initWithFormat:
                          @" %.4f %@",result, convertToName];
resultLabel.text = resultString;

NSString *formelString = [[NSString alloc]initWithFormat:
                          @" %.4f %@=", convertValue, convertFromName];
formelLabel.text = formelString;

} 
```

我认为错误可能在界面生成器中，所以这里是连接 ![连接检查员](../Images/62064fa8dc3996a08ddc2cfeb9a5686b.png)

有一个简单的解决方案吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:52:12.347

不要使用“值已更改”操作，而是对文本字段使用“编辑更改”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:05:01.293

确保您的视图控制器符合 UITextFieldDelegate。在界面构建器中将 viewController 设置为 UITextField 的委托。然后在你的 viewController 中实现这个委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string; 
```

每次您对文本字段进行更改时都会触发该委托方法，因此在那里触发您的计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:03:02.267

将您的 textFieldChanged 操作更改为“Editing Changed”，并将所有计算代码放入 textFieldChanged 操作方法中。

# r - ggplot2 热图：对类别使用不同的梯度

> ID：13016022
> 
> 赞同：29
> 
> 时间：2012-10-22T16:51:07.957
> 
> 标签：r, ggplot2

[这篇 Learning R 博客文章](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)展示了如何使用 ggplot2 制作篮球统计热图。完成的热图如下所示：

![在此处输入图像描述](../Images/b7131111cd5e2ccee29c9a9fcf1fa3ad.png)

我的问题（受到[Jake](https://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/#comment-450)对 Learning R 博客文章的评论的启发）是：是否可以对不同类别的统计数据（进攻性、防守性、其他）使用不同的渐变颜色？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-22T17:51:15.920

首先，从帖子中重新创建图表，为更新的 (0.9.2.1) 版本更新它，该版本`ggplot2`具有不同的主题系统并附加更少的包：

```
nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv")
nba$Name <- with(nba, reorder(Name, PTS))

library("ggplot2")
library("plyr")
library("reshape2")
library("scales")

nba.m <- melt(nba)
nba.s <- ddply(nba.m, .(variable), transform,
               rescale = scale(value))

ggplot(nba.s, aes(variable, Name)) + 
  geom_tile(aes(fill = rescale), colour = "white") + 
  scale_fill_gradient(low = "white", high = "steelblue") + 
  scale_x_discrete("", expand = c(0, 0)) + 
  scale_y_discrete("", expand = c(0, 0)) + 
  theme_grey(base_size = 9) + 
  theme(legend.position = "none",
        axis.ticks = element_blank(), 
        axis.text.x = element_text(angle = 330, hjust = 0)) 
```

![在此处输入图像描述](../Images/68563dc17fad6f02f1b15bb187aa18b6.png)

为不同的类别使用不同的渐变颜色并不是那么简单。映射`fill`到的概念方法`interaction(rescale, Category)`（其中`Category`是进攻/防守/其他；见下文）不起作用，因为将一个因素和连续变量相互作用会给出一个`fill`无法映射到的离散变量。

解决这个问题的方法是人为地进行这种交互，将`rescale`不同的值映射到不重叠的范围，`Category`然后将`scale_fill_gradientn`这些区域中的每一个映射到不同的颜色渐变。

首先创建类别。我认为这些映射到评论中的那些，但我不确定；更改哪个变量属于哪个类别很容易。

```
nba.s$Category <- nba.s$variable
levels(nba.s$Category) <- 
  list("Offensive" = c("PTS", "FGM", "FGA", "X3PM", "X3PA", "AST"),
       "Defensive" = c("DRB", "ORB", "STL"),
       "Other" = c("G", "MIN", "FGP", "FTM", "FTA", "FTP", "X3PP", 
                   "TRB", "BLK", "TO", "PF")) 
```

由于`rescale`在 0 的几个（3 或 4）内，不同的类别可以偏移 100 以保持它们分开。同时，根据重新缩放的值和颜色，确定每个颜色渐变的端点应该在哪里。

```
nba.s$rescaleoffset <- nba.s$rescale + 100*(as.numeric(nba.s$Category)-1)
scalerange <- range(nba.s$rescale)
gradientends <- scalerange + rep(c(0,100,200), each=2)
colorends <- c("white", "red", "white", "green", "white", "blue") 
```

现在将`fill`变量替换为`rescaleoffset`并更改`fill`要使用的比例`scale_fill_gradientn`（记住重新调整值）：

```
ggplot(nba.s, aes(variable, Name)) + 
  geom_tile(aes(fill = rescaleoffset), colour = "white") + 
  scale_fill_gradientn(colours = colorends, values = rescale(gradientends)) + 
  scale_x_discrete("", expand = c(0, 0)) + 
  scale_y_discrete("", expand = c(0, 0)) + 
  theme_grey(base_size = 9) + 
  theme(legend.position = "none",
        axis.ticks = element_blank(), 
        axis.text.x = element_text(angle = 330, hjust = 0)) 
```

![在此处输入图像描述](../Images/0b55bead68b50da2eb4f656a034e2ede.png)

重新排序以获得相关统计数据是该`reorder`函数在各种变量上的另一个应用：

```
nba.s$variable2 <- reorder(nba.s$variable, as.numeric(nba.s$Category))

ggplot(nba.s, aes(variable2, Name)) + 
  geom_tile(aes(fill = rescaleoffset), colour = "white") + 
  scale_fill_gradientn(colours = colorends, values = rescale(gradientends)) + 
  scale_x_discrete("", expand = c(0, 0)) + 
  scale_y_discrete("", expand = c(0, 0)) + 
  theme_grey(base_size = 9) + 
  theme(legend.position = "none",
        axis.ticks = element_blank(), 
        axis.text.x = element_text(angle = 330, hjust = 0)) 
```

![在此处输入图像描述](../Images/3dc4eb36a577dd2021ef15e90f6f2205.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-29T15:22:26.980

这是一个更简单的建议，它使用 ggplot2 美学来映射渐变和颜色类别。只需使用 alpha-aesthetic 来生成渐变，并为类别生成 fill-aesthetic。

这是执行此操作的代码，重构了 Brian Diggs 的响应：

```
nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv")
nba$Name <- with(nba, reorder(Name, PTS))

library("ggplot2")
library("plyr")
library("reshape2")
library("scales")

nba.m <- melt(nba)
nba.s <- ddply(nba.m, .(variable), transform,
           rescale = scale(value))

nba.s$Category <- nba.s$variable
levels(nba.s$Category) <- list("Offensive" = c("PTS", "FGM", "FGA", "X3PM", "X3PA", "AST"),
   "Defensive" = c("DRB", "ORB", "STL"),
   "Other" = c("G", "MIN", "FGP", "FTM", "FTA", "FTP", "X3PP", "TRB", "BLK", "TO", "PF")) 
```

`rescale`然后，将变量标准化为0 和 1 之间：

```
nba.s$rescale = (nba.s$rescale-min(nba.s$rescale))/(max(nba.s$rescale)-min(nba.s$rescale)) 
```

现在，进行绘图：

```
ggplot(nba.s, aes(variable, Name)) + 
  geom_tile(aes(alpha = rescale, fill=Category), colour = "white") + 
  scale_alpha(range=c(0,1)) +
  scale_x_discrete("", expand = c(0, 0)) + 
  scale_y_discrete("", expand = c(0, 0)) + 
  theme_grey(base_size = 9) + 
  theme(legend.position = "none",
        axis.ticks = element_blank(), 
        axis.text.x = element_text(angle = 330, hjust = 0)) +
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank()) 
```

[![使用 alpha 美学的 ggplot2 热图](../Images/0602864d679fe617049d6e6b2a339508.png)](https://i.stack.imgur.com/jbyGM.png)

请注意`alpha=rescale`alpha 范围的使用，然后使用 来缩放`scale_alpha(range=c(0,1))`，这可以适应为您的绘图适当地更改范围。

# wsdl - 更改 WSDL 的 URL

> ID：13016025
> 
> 赞同：0
> 
> 时间：2012-10-22T16:51:22.450
> 
> 标签：wsdl, ejb

我有一个 EJB，我将其作为 Web 服务托管，URL 类似于

http://<>:7005/PurgeReportSessionEJBBean/PurgeReportSessionEJBBeanService?WSDL

现在我想把它改成

http://<>:7005/ **jasperserver-pro** /PurgeReportSessionEJBBean/PurgeReportSessionEJBBeanService?WSDL

我应该在 EJB 中做什么，以便 WSDl URL 像上面一样更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:30:16.913

如果您通过`@WebService`注解声明 web 服务，那么您可以指定`@WebService(wsdlLocation="http://...:7005/jasperserver-pro/...")`. `@WebServiceProvider`注释上有一个类似的属性。

# c++ - stat() 在 C++ 中找不到文件

> ID：13016035
> 
> 赞同：-1
> 
> 时间：2012-10-22T16:52:04.243
> 
> 标签：c++, linux, posix, stat

在 Linux 12.04 上，我有一个可执行文件位于：

```
/a/b/exe 
```

和一个配置文件

```
/a/b/config 
```

做的时候：

```
cd /a/b/
./exe 
```

一切正常，stat 函数在 /a/b/ 上找到文件配置

但是，从 root 运行时

```
/a/b/exe 
```

stat 找不到配置文件

知道为什么吗？

它使得无法使用不是从 exe 文件夹中运行的脚本来运行二进制文件。

### 编辑

调用如下所示：

```
struct stat stFileInfo;
bool blnReturn;
int intStat;

// Attempt to get the file attributes
intStat = stat(strFilename.c_str(),&stFileInfo);
if(intStat == 0) {
// We were able to get the file attributes
// so the file obviously exists.
    blnReturn = true;
} else {
// We were not able to get the file attributes.
// This may mean that we don't have permission to
// access the folder which contains this file. If you
// need to do that level of checking, lookup the
// return values of stat which will give you
// more details on why stat failed.
    blnReturn = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:58:34.787

在第一种情况下`cd ..., run exe`，您在执行程序之前更改当前工作目录，在第二种情况下，您在不更改当前工作目录的情况下启动 exe，我认为在您的程序中您使用相对路径来打开您的配置（例如`./config`或只是`config`），它可以' t 从当前工作目录中找到它。最简单的解决方法是在应用程序启动时更改工作目录：

```
int main(int argc, char** argv) {
    std::string s( argv[0] );  // path to the program
    std::string::size_type n = s.rfind( '/' );
    if( n != std::string::npos ) {
        std::system( ("cd " + s.substr(0, n)).c_str() );
    }

    // rest of your code
} 
```

# java - NetBeans 构建时找不到 rt.jar

> ID：13016037
> 
> 赞同：0
> 
> 时间：2012-10-22T16:52:14.057
> 
> 标签：java, netbeans, build

我在 NetBeans7.2 中有一个简单的 Java 项目，当我尝试清理/构建时它失败了：

```
Building jar: D:\MEUS PROJETOS\_Workspace\JavaWorkspace\Mina\dist\Mina.jar
To run this application from the command line without Ant, try:
java -jar "D:\MEUS PROJETOS\_Workspace\JavaWorkspace\Mina\dist\Mina.jar"
Realizando o ofuscamento do código
Obfuscating dist/Mina.jar...
Created dir: D:\MEUS PROJETOS\_Workspace\JavaWorkspace\Mina\build\obfuscated
ProGuard, version 4.8
Reading program jar [D:\MEUS PROJETOS\_Workspace\JavaWorkspace\Mina\dist\Mina.jar]
Reading library jar [C:\Program Files\Java\jdk1.7.0\jre\lib\ext\jna.jar]
Reading library jar [C:\Program Files\Java\jdk1.7.0\jre\lib\ext\mysql-connector-java-5.1.21-bin.jar]
Reading library jar [C:\Program Files\Java\jre7\lib\rt.jar]
Reading library jar [C:\Library\Java\Home\lib\rt.jar]
D:\MEUS PROJETOS\_Workspace\JavaWorkspace\Mina\build.xml:28: Can't read [C:\Library\Java\Home\lib\rt.jar] (No such file or directory)
BUILD FAILED (total time: 5 seconds) 
```

这很奇怪，因为我的项目库中**没有**调用 [C:\Library\Java\Home\lib\rt.jar]（我的计算机中根本没有“C:\Library”）！

另外，如果已经从“C:\Program Files\Java\jre7\lib\rt.jar”调用了“rt.jar”，为什么还要再次调用它？

我完全不知道这是从哪里来的，也不知道我可以在哪里更改它（因为它不在我项目的库列表中）。

提前致谢！原谅我的英语不好...

已编辑：我刚刚发现编译（构建）应用程序时不会发生此问题，但是当 NetBeans 的 ProGuard4.8 插件尝试混淆时！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:48:50.417

我想“简单的Java项目”是指“文件”菜单中的NetBeans“新建项目...”操作中的“Java”类别中的“Java应用程序”项目。

Netbeans 默认[构建系统](http://en.wikipedia.org/wiki/Build_automation)是[Ant](http://ant.apache.org/manual/index.html)。Ant 是编译、打包和运行项目源代码的程序。

*如果在项目属性窗口的任何地方*都找不到字符串“C:\Library\Java\Home\lib\rt.jar” ，那么下一个要查找的位置是项目根目录下的 nb 文件夹内的属性文件（从“项目”视图更改为“文件”视图）或 build{-impl}.xml 文件。

当您从右键单击“项目”视图中的项目图标单击“清理和构建”操作时，蚂蚁读取 build.xml 文件（导入 build-impl.xml 文件），找到清理和 jar[目标](http://ant.apache.org/manual/targets.html)，计算成功运行上述目标所需的所有相关目标和[属性，并最终运行计算的目标序列。](http://ant.apache.org/manual/Tasks/property.html)

但是，如果是通过 NetBeans“新建项目”操作创建的项目，则会自动生成 build.xml 和 nb-project，并且从 GUI 更改项目属性有效地更改 build-impl.xml 和其他一些文件的部分. 如果您没有编辑自动生成的文件，那不是要寻找的地方。

接下来要考虑是否是 Netbeans 缓存问题，请参阅[此处](http://wiki.netbeans.org/FaqWhatIsUserdir)了解它的位置，输入该目录并删除其内容（但我不能保证它会有所帮助）。

有趣的是，rt.jar 通常位于 JRE_HOME/lib 目录中，其中 JRE_HOME 是某些[JRE](http://www.oracle.com/technetwork/java/javase/downloads/jre7u9-downloads-1859586.html)安装的完整路径，因此可能会导致您将 JRE_HOME[环境变量](http://en.wikipedia.org/wiki/Environment_variable)设置为此（不存在的）位置的结论。

这一切都只是猜测，但其中的一些内容应该对您有所帮助。请反馈。

# iphone - 在 HTML 文档中查找标签

> ID：13016040
> 
> 赞同：0
> 
> 时间：2012-10-22T16:52:31.980
> 
> 标签：iphone, html, objective-c, xcode, html-parsing

我有一个带有一个标签的网页的网址，该标签会不时更改。我想在不打开浏览器的情况下向用户显示标签内的消息。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:51:06.983

从 url 获取 htmldata 的最简单方法是

```
//ur url is a object of NSURL
NSError* error;
NSString* html = [[NSString alloc] initWithContentsOfURL:url encoding:NSUTF8String error:&error]; 
```

html中的响应是对url的响应，但是请求会在主线程上，如果连接/响应时间很慢，它会停止其他功能。

# c# - 字符串，随机，有趣的行为

> ID：13016042
> 
> 赞同：0
> 
> 时间：2012-10-22T16:52:37.820
> 
> 标签：c#, .net, random, stringbuilder

> **可能重复：**
> [为什么这个方法每次都返回相同的随机字符串？](https://stackoverflow.com/questions/807892/why-does-this-method-return-the-same-random-string-each-time)
> [随机的不是随机的](https://stackoverflow.com/questions/4858790/random-not-that-random)

我在这段代码中有奇怪的行为。

```
public void InitPopulation()
{
    for (int i = 0; i < PopSize; i++)
    {
        var builder = new StringBuilder();
        var random = new Random();

        for (int j = 0; j < Target.Length; j++)
        {
            builder.Append(Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65))));
        }

                        vector.Add(new GaStruct() { Fitness = 0, StrValue = builder.ToString().ToLower() });
        builder.Clear();
    }
} 
```

这段代码给了我 5 个完全相同的字符串！

如果我添加`Thread.Sleep`这样的：

```
public void InitPopulation()
{
    for (int i = 0; i < PopSize; i++)
    {
        var builder = new StringBuilder();
        var random = new Random();

        for (int j = 0; j < Target.Length; j++)
        {
            builder.Append(Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65))));
        }

        **System.Threading.Thread.Sleep(20);**
        vector.Add(new GaStruct() { Fitness = 0, StrValue = builder.ToString().ToLower() });
        builder.Clear();
    }
} 
```

一切正常，所有字符串都是随机的。

# perl - 如何使用 DBD::CSV 获取列名行？

> ID：13016046
> 
> 赞同：2
> 
> 时间：2012-10-22T16:52:44.907
> 
> 标签：perl, csv, dbd

我正在使用[DBD::CSV](http://search.cpan.org/~hmbrand/DBD-CSV-0.36/lib/DBD/CSV.pm#Driver_specific_attributes)来显示 csv 数据。我的代码是：

```
#! perl
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect("dbi:CSV:", undef, undef, {
    f_dir            => ".",
    f_ext            => ".txt/r",
    f_lock           => 2,
    csv_eol          => "\n",
    csv_sep_char     => "|",
    csv_quote_char   => '"',
    csv_escape_char  => '"',
    csv_class        => "Text::CSV_XS",
    csv_null         => 1,
    csv_tables       => {
        info => {
            file => "countries.txt"
        }
    },  
    FetchHashKeyName => "NAME_lc",
}) or die $DBI::errstr;

$dbh->{csv_tables}->{countries} = {
  skip_first_row => 0,
  col_names => ["a","b","c","d"],
  raw_header => 1,
};

my $sth = $dbh->prepare ("select * from countries limit 1");
$sth->execute;
while (my @row = $sth->fetchrow_array) {
  print join " ", @row;
  print "\n"
} 
```

country.txt 文件是这样的：

```
ISO_COUNTRY|COUNTRY_NAME|REGION_CODE|REGION_NAME
AF|Afghanistan|A|Asia
AX|"Aland Islands"|E|Europe
AL|Albania|E|Europe 
```

但是当我运行这个脚本时，它返回

```
AF Afghanistan A Asia 
```

我希望它返回：

```
ISO_COUNTRY COUNTRY_NAME REGION_CODE REGION_NAME 
```

有谁知道如何使用 DBD::CSV 模块来实现这一点？

还有一个问题是col_names属性设置为什么没有生效？如何使其返回以下内容？

```
 a b c d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:56:38.580

`$sth->{NAME}`, `$sth->{NAME_lc}` and `$sth->{NAME_uc}` return a reference to an array containing the names.

```
my $sth = $dbh->prepare("select * from countries limit 1");
$sth->execute;
print "$_\n" for @{ $sth->{NAME} }; 
```

# c# - 查询 XML 文件并创建文本文件

> ID：13016054
> 
> 赞同：2
> 
> 时间：2012-10-22T16:53:58.580
> 
> 标签：c#, .net, linq, file, linq-to-xml

我有一个 XML 文件：TableList.xml

```
<TableList>  
<Table>  
<TableName>TableA</TableName>  
<Columns>ColumnA1,ColumnA2,ColumnA3,ColumnA4</Columns>  
</Table>  
<Table>  
<TableName>TableB</TableName>  
<Columns>ColumnB1,ColumnB2,ColumnB3,ColumnB4</Columns>  
</Table>  
</TableList> 
```

我想使用 Linq-to-XML 查询这个文件，并且对于我想要的每个值派生以下格式

```
The table - TableA - has columns - ColumnA1,ColumnA2,ColumnA3,ColumnA4.

The table - TableB - has columns - ColumnB1,ColumnB2,ColumnB3,ColumnB4. 
```

并将其创建为单个文本文件 -`TableDoc.txt`最后。

如何使用 Linq-to-XML 简洁地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:00:48.170

> 如何使用 Linq-to-XML 简洁地做到这一点？

为了简洁起见，我将把它当作一个挑战......

```
File.WriteAllLines("TableDoc.txt", XDocument.Load("TableList.xml")
         .Descendants("Table")
         .Select(t => string.Format("The table - {0} - has columns {1}.",
                                    t.Element("TableName").Value,
                                    t.Element("Columns").Value))); 
```

（显然，为了简洁起见，删除所有不必要的空格*。*）

当然，这仍然给您留下了弄清楚它如何/为什么工作的挑战 - 并可能以更易读的方式重构它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:01:11.057

```
using (TextWriter writer = File.CreateText("TableDoc.txt"))
{
    XDocument doc=XDocument.Load("yourXML");//load document
    foreach(var elm in doc.Descendants("Table"))//takes all table elements
    {
    string s="The table-"+elm.Element("TableName").Value+"- has coloumns -"+elm.Element("Columns").Value;
      writer.WriteLine(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:08:44.160

我可以建议（主观上？）稍微可读性更强的查询表达式版本：

```
var columnsPerTable = from table in XElement.Load("TableList.xml").Elements("Table")
                      let name = table.Element("TableName")
                      let columns = table.Element("Columns")
                      select string.Format("The table - {0} - has columns - {1}.", 
                                           name.Value, columns.Value);
File.WriteAllLines("TableDoc.txt", columnsPerTable); 
```

当然，没有必要使用`XDocument`。`XElement`工作得很好。

# android-ndk - 读取/写入文件时 Android NDK 崩溃

> ID：13016057
> 
> 赞同：0
> 
> 时间：2012-10-22T16:54:39.517
> 
> 标签：android-ndk, native-activity

我已经将一个非常大的应用程序移植到 Android。它通过 TCP/IP 接收二进制数据，并将其写入应用程序中不时使用的文件。保存文件的目录默认设置为 ./file_cache。这里出错了：

```
fileHandle = fopen(filename,"wb"); 
```

在这种情况下，文件名是“file_i”，其中 i 从 0 开始并为每个文件递增。

程序在写入时崩溃，它不必在第一个文件上崩溃，有时它会到达第 10 个文件。当它崩溃时，fileHandle 最终为 NULL。

文件名最初在 wchar 中，但之前已转换（我在记录器中将其打印出来以确认它是正确的）。

**我试过的：**

*   我添加了所有似乎与文件读/写外部存储有关的权限。

*   我尝试了不同的位置 /sdcard/files 和 /data/data/<package>/files

**问题：**

1.  当前目录是什么，即文件在默认设置下真正结束的位置是什么？

2.  是什么导致 fopen 返回 null，而这又是导致崩溃的原因？

非常感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:14:15.683

我发现了问题，虽然这是一个一般程序错误。文件名“file_i”是由于一些复杂的代码被分配了大小1，这自然是太小了，导致分段错误。所以它与fopen无关。实际上，我遇到的所有分段错误都是由与此类似的错误引起的，因此每当您弄乱 char/wchar 时，都值得仔细检查您的代码。

此外，我使用工作正常的 /data/data/.. 文件夹，实际上并没有尝试过 sdcard 文件夹，但不明白为什么它不起作用。

# java - 实现具有 3 个字符串值的链表

> ID：13016060
> 
> 赞同：2
> 
> 时间：2012-10-22T16:54:51.980
> 
> 标签：java, mergesort, singly-linked-list

我正在尝试实现一个单链表以在每个元素（名字、中间名、姓氏）中保存多个字符串值，以便我可以按排序并搜索元素中的不同字符串（按姓氏排序，搜索中间名， ETC。）。

我创建了一个 Name 类来保存 3 个字符串（第一个、中间、最后一个）和每个字符串的观察者方法。

有人可以帮我修改我的 MergeSort 以按姓氏排序 (Name.getLastName()) 吗？如果我能弄清楚这一点，它应该让我走上正确的轨道来创建我的按中间名搜索方法。

提前致谢！

```
public class SinglyLinkedList {

  private class Link {

    public Name data;
    public Link next;

    Link(Name data) 
    {
        this(data, null);
    }

    Link(Name d, Link n) 
    {
        data = d;
        next = n;
    }

  }

  private Link first_;

  // Creates an empty list
  public void List() 
  {
      first_ = null;
  }

// Returns true iff this list has no items
  public boolean isEmpty() 
  {
      return first_ == null;
  }

// Data is put at the front of the list

  public void insertFront(Name data) 
  {
      first_ = new Link(data, first_);
  }

// Removes first element
  public String removeFront() 
  {     
        Name data = first_.data;
        first_ = first_.next;
        return data;

  }

  public Link MergeSort(Link headOriginal)
  {

    if (headOriginal == null || headOriginal.next == null)
    {
        return headOriginal;
    }

    Link a = headOriginal;
    Link b = headOriginal.next;

    while ((b != null) && (b.next != null))
    {
        headOriginal = headOriginal.next;
        b = (b.next).next;
    }

    b = headOriginal.next;

    headOriginal.next = null;

    return merge(MergeSort(a), MergeSort(b));

  }

  public Link merge(Link a, Link b)
  {
      Link temp = new Link();
      Link head = temp;
      Link c = head;

      while ((a != null) && (b != null))
      {

          if (a.item <= b.item)
          {
              c.next = a;
              c = a;
              a = a.next;
            }
            else
            {
                c.next = b;
                c = b;
                b = b.next;
            }
        }

        c.next = (a == null) ? b : a;

        return head.next;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:56:02.407

> I'm attempting to implement a singly linked list to hold multiple String values in each element (First, Middle, Last Name)

Don't. You've described a logical type - e.g. a `PersonalName` - with three string members. So create that type *as a separate type*. Then you can use any of the normal built-in collections, e.g. `Deque<PersonalName>` or `List<PersonalName>`. (Is there any particular reason you need a linked list?)

Any time you find yourself with a collection of values, always the same length, always with the same well-specified meaning for each value, strongly consider creating a type to encapsulate it.

# c++ - const pod 和 std::vector

> ID：13016065
> 
> 赞同：1
> 
> 时间：2012-10-22T16:55:07.083
> 
> 标签：c++, vector, struct

要编译此代码：

```
std::vector<Foo> factory() 
{
    std::vector<Foo> data;
    return data;
} 
```

我必须像这样定义我的 POD：

```
struct Foo
{
    const int i;
    const int j;

    Foo(const int _i, const int _j): i(_i), j(_j) {}

    Foo(Foo& foo): i(foo.i), j(foo.j){}

    Foo operator=(Foo& foo)
    {
        Foo f(foo.i, foo.j);
        return f;
    }
}; 
```

这是定义一个我不想在创建后更改 pod 成员的 pod 的正确方法吗？为什么我必须定义一个复制构造函数并重载赋值运算符？这是否兼容不同的平台实现`std::vector`？您认为拥有这样的 const PODS 是错误的吗？我应该将它们保留为非常量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:56:55.333

创建一个`std::vector`您无法分配的类型是未定义的行为。您不能将 POD 分配给`const`成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:07:59.857

你问了几个问题：

> > 这是定义一个我不想在创建后更改 pod 成员的 pod 的正确方法吗？

您的问题不正确，因为您**有**兴趣在创建后更改 pod 成员。例如，通过使用`std::vector`，您正在请求`vector::resize()`通过赋值运算符修改对象的所有成员的权限。

另外，正如其他人指出的那样，您`operator=`的意义不大。它肯定不会像你认为的那样做。具体来说，在表达式 之后`a=b`， 的成员`a`不变。

> > 为什么我必须定义一个复制构造函数并重载赋值运算符？

因为你正在使用`std::vector`. 考虑 C++2003，§23.1/3，“存储在这些组件中的对象的类型必须满足类型的要求`CopyConstructible` ，以及类型的附加要求`Assignable`。”

实际上，这是因为`vector`需要能够在进行内存管理时移动对象。

> > 这是否兼容不同的平台实现`std::vector`？

是的。对于 的任何实现`std::vector`，您的类型必须是 CopyConstructible 和 Assignable。

> > 您认为拥有这样的 const PODS 是错误的吗？

是的，它与您的预期用途相矛盾。您打算将它们放入一个向量中，在那里它们将被修改。

> > 我应该将它们保留为非常量吗？

是的。如果将它们保留为非常量，则不需要用户定义的复制构造函数，也不需要用户定义的赋值运算符。

# javascript - Ember 初学者：使用 ajax 的路由器和插座

> ID：13016068
> 
> 赞同：1
> 
> 时间：2012-10-22T16:55:29.777
> 
> 标签：javascript, ember.js

我只是 Ember 的新手，确信这是一个简单的问题，但无法找出实现我想要的最佳方法。场景如下：

```
App.Router = Ember.Router.extend({
root: Ember.Route.extend({
    home: Ember.Route.extend({
        route: '/',
        connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('home');
            router.get('homeController').connectOutlet('menu', 'menu', App.Channels.find());
            router.get('homeController').connectOutlet('video_overview', 'videoOverview', App.Featured.find());
        }
    })
})

App.Featured = Ember.Object.extend();

App.Featured.reopenClass({
find: function() {
    setRequestUrl('featured');
    establishSecureConnection();
    $.ajaxQueue({
        type: "GET",
        url: connect.url,
        data: "",
        dataType: 'jsonp',
        jsonp: false,
        jsonpCallback: "fjsonp",
        cache: true,
        context: this,
        success: function(response){
            this.findOne(response[0].mediaId); // get the first featured object and retrieve details
            //
            console.log('Featured Video:');
            console.log(response);
        }
    });
},
findOne: function(item) {
    var featuredVideo = App.Featured.create({});
    setRequestUrl('media/'+item);
    establishSecureConnection();
    $.ajaxQueue({
        type: "GET",
        url: connect.url,
        data: "",
        dataType: 'jsonp',
        jsonp: false,
        jsonpCallback: "fjsonp",
        cache: true,
        context: featuredVideo,
        success: function(response){
            this.setProperties(response);
            //
            console.log('Featured Video details:');
            console.log(response);
        }
    });
    return featuredVideo;
} 
```

因此，当执行应用程序`Router`并将插座`video_overview`与从中检索的内容连接时，`App.Featured.find()`我可以在浏览器日志中看到响应，但值永远不会到达模板。

我猜这与我正在执行的“双重”请求有关`App.Featured`（首先是 find（），然后是 findOne（）），所以当我返回带有 return`featuredVideo`的值时，不会被通知。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:01:26.790

`App.Featured.find`确实似乎返回任何东西。我认为您必须返回 findOne 的结果，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:18:58.193

再次嗨大家，最后我搞砸了，接受了 sly7_7 的建议并开始工作！

这是我实现的方式，但如果有人能详细解释 Ember 的行为，将不胜感激。

```
App.Featured = Ember.Object.extend();
App.Featured.reopenClass({
find: function(singleItem) {
    if (singleItem){
        console.log('Returning the single item...');
        console.log(singleItem);
        //
        featuredContent.setProperties(singleItem);
    } else {
        setRequestUrl('featured');
        establishSecureConnection();
        $.ajaxQueue({
            type: "GET",
            url: connect.url,
            data: "",
            dataType: 'jsonp',
            jsonp: false,
            jsonpCallback: "fjsonp",
            cache: true,
            context: featuredContent,
            success: function(response){
                this.setProperties(App.Featured.findOne(response[0].mediaId)); // this.setProperties({'category':'hey arrives here success'});
                //
                console.log('Featured Video:');
                console.log(response);
            }
        });
    }
    return featuredContent;
},
findOne: function(item) {
    setRequestUrl('media/'+item);
    establishSecureConnection();
    $.ajaxQueue({
        type: "GET",
        url: connect.url,
        data: "",
        dataType: 'jsonp',
        jsonp: false,
        jsonpCallback: "fjsonp",
        cache: true,
        context: this,
        success: function(response){
            console.log('Featured Video content:');
            console.log(response);
            //
            this.find(response);
        }
    });
} 
```

});

```
var featuredContent = App.Featured.create({}); 
```

然后模板接收对 featuresContent 对象所做的更改。

# bash - put awk code in bash and sort the result

> ID：13016073
> 
> 赞同：0
> 
> 时间：2012-10-22T16:55:49.530
> 
> 标签：bash, sorting, awk

I have a awk code for combining 2 files and add the result to the end of file.txt using ">>"

my code

```
NR==FNR && $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, "A", $4); print j++,$1,$2,$3,x,$4 | "column -t" ">>" "./Desktop/file.txt"}}} 
```

i want put my awk to bash script and finaly sort my file.txt and save sorted result to file.txt again using `>`

i tried this

```
#!/bin/bash
command=$(awk '{NR==FNR && $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, "A", $4); print $1,$2,$3,$4 | "column -t" ">>" "./Desktop/file.txt"}}}}')
echo -e "$command" | column -t | sort -s -n -k4 > ./Desktop/file.txt 
```

but it gives me error `"for reading (no such a file or directory)"`

where is my mistake?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:28:21.077

1）您没有为 awk 脚本指定输入文件。这个：

```
command=$(awk '{...stuff...}') 
```

需要是：

```
command=$(awk '{...stuff...}' file1 file2) 
```

2）您将您的 awk 条件“NR == ...”移动到操作部分内，这样它就不再表现为条件。

3）您的 awk 脚本输出将进入“file.txt”，因此当您在下一行回显时，“command”为空。

4) 你有未使用的变量 x 和 j

5) 您将 arg FS 不必要地传递给 split()。

ETC...

我想你想要的是：

```
command=$( awk '
   NR==FNR && $2!=0 { two[$0]++; next }
   {
      for(i in two) {
          split(i,one)
          if(one[3] == $NF) {
             sub(/[[:digit:]]/, "A", $4)
             print $1,$2,$3,$4 
          }
      }
    }
' file1 file2 )
echo -e "$command" | column -t >> "./Desktop/file.txt"
echo -e "$command" | column -t | sort -s -n -k4 >> ./Desktop/file.txt 
```

但很难说。

# c# - MinidumpWriteDump from managed code throws an AccessViolationException

> ID：13016076
> 
> 赞同：1
> 
> 时间：2012-10-22T16:55:51.323
> 
> 标签：c#, .net, interop, clr, minidump

I have the basic MiniDumpWriteDump method interop copied off the internet in my C# (3.5) project.

Up till now, i have used this code to register on the UnhandledException event, to take a crash dump before the process shuts down.

In a particular scenario i am facing now, i have set this function to be used in some other case, to take a diagnostic memory dump of the process.

Whenever this function gets called (not from the UnhandledException handler), it throws an *AccessViolationException*

Here's what the MiniDump code looks like (removed some redundant parts):

```
using (var fs = new System.IO.FileStream(fileName, 
                                         System.IO.FileMode.Create, 
                                         System.IO.FileAccess.Write, 
                                         System.IO.FileShare.None))
{
    MiniDumpExceptionInformation exp;
    exp.ThreadId = GetCurrentThreadId();
    exp.ClientPointers = false;
    exp.ExceptionPointers = Marshal.GetExceptionPointers();

    bool bRet = MiniDumpWriteDump(
                GetCurrentProcess(),
                GetCurrentProcessId(),
                fs.SafeFileHandle.DangerousGetHandle(),
                (uint)dumpType,
                ref exp,
                IntPtr.Zero,
                IntPtr.Zero);

    return bRet;
} 
```

Native types are defined like so:

```
//typedef struct _MINIDUMP_EXCEPTION_INFORMATION {
        //    DWORD ThreadId;
        //    PEXCEPTION_POINTERS ExceptionPointers;
        //    BOOL ClientPointers;
        //} MINIDUMP_EXCEPTION_INFORMATION, *PMINIDUMP_EXCEPTION_INFORMATION;
        // Pack=4 is important! So it works also for x64!
        [StructLayout(LayoutKind.Sequential, Pack = 4)]  
        struct MiniDumpExceptionInformation
        {
            public uint ThreadId;
            public IntPtr ExceptionPointers;
            [MarshalAs(UnmanagedType.Bool)]
            public bool ClientPointers;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T13:14:11.453

Marshal.GetExceptionPointers() 可能会返回 IntPtr.Zero （可能当操作系统看到异常已处理时）。如果是这种情况，您可以尝试将“MiniDumpWriteDump”的调用放在其他地方。我遇到了同样的问题并通过将“MiniDumpWriteDump”放入事件处理程序“AppDomain.CurrentDomain.FirstChanceException”来解决它。

# mshtml - 在 MSHTML 中，这些数字是什么意思？就像在 IHTMLElement7 中一样？

> ID：13016084
> 
> 赞同：1
> 
> 时间：2012-10-22T16:56:10.793
> 
> 标签：mshtml

在 MSHTML 中，接口通常是编号的。数字位于接口名称的末尾，例如`IHTML{name}{number}`. 像这样的接口：

*   `IHTMLRuleStyle`
*   `IHTMLRuleStyle2`
*   ...
*   `IHTMLRuleStyle6`

或者

*   `IHTMLElement`
*   `IHTMLElement2`
*   ...
*   `IHTMLElement7`

可以在[此 Microsoft 页面中看到一个列表](http://msdn.microsoft.com/en-us/library/hh801967%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:07:49.047

感谢@Jay 的评论。

数字代表 MSHTML 的版本，版本号与 Internet Explorer、CSS、HTML 等的版本有间接关系...

我希望我以前做过这个搜索，但[Geoff Chappell 的网站](http://www.geoffchappell.com/studies/windows/ie/mshtml/history/index.htm)有一个很棒的 MSHTML 到 IE 和 Windows 的图表映射版本。

```
Versions of things
MSHTML  IE      Windows
6.0     6.0     Windows XP
6.0     6.0     Windows Server 2003
7.0     7.0     Windows Vista
8.0     8.0     Windows 7 
```

从图表来看，MSHTML 的版本与 Internet Explorer 的版本密切相关。

# magento - 移动到新服务器后 Magento 模块管理员 404

> ID：13016091
> 
> 赞同：0
> 
> 时间：2012-10-22T16:56:38.157
> 
> 标签：magento, module, http-status-code-404, admin

我一直在 Mac 的本地 Apache 服务器上开发几个 Magento 模块。最近，我已将模块移至新服务器上的新 Magento 安装。我的问题是，当我尝试加载他们的管理页面时，除了一个之外都是 404-ing。我找不到任何原因为什么这个模块可以工作而其他模块甚至不尝试加载页面。大多数情况下，如果代码从一个到另一个非常相似。此外，404 页面没有帮助，也没有任何异常或日志条目可以帮助我。这些都在旧服务器上工作，虽然有些代码有需要修复的坏/旧链接，并且这些链接会产生错误，但我认为没有理由他们不尝试加载页面并产生错误。

我认为配置有效，因为我得到了管理菜单。由于布局与 URL 的前面部分没有任何关系，我认为问题也没有理由成为它们。我可以发布代码，但我不知道发布什么可能导致这种情况。

我将不胜感激任何可能导致这种情况的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:04:42.930

当我在 Windows 上转移模块并发送到 Linux 时，有时会忘记并在大写字母和小写字母上做一些事情，Windows 在这种情况下不区分大小写，但 linux 是。也许在 Mac / Linux 上是一样的

# iphone - Going back to initial storyboard ViewController on logout

> ID：13016094
> 
> 赞同：6
> 
> 时间：2012-10-22T16:56:44.680
> 
> 标签：iphone, ios, uistoryboard, uistoryboardsegue

I am using storyboards in my iOS. The first screen is the login screen. When a user logs out or gets logged out, he may be on a screen in a deep hierarchy.

For example: login view controller => modal view controller => tab bar controller => nav controller => view controller => view controller. I want to go all the way back from the top-most view controller to the bottom one.

Edit: Here's a diagram of the view hierarchy:![enter image description here](../Images/cc521a915a32a4c60aa578114c093989.png)

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:38:02.193

我为 UIViewControllers 编写了一个似乎正在工作的类别：

```
- (void) popToInitialViewController
{
    UIViewController *vc;
    if (self.navigationController != nil) {
        vc = self.navigationController;
        [self.navigationController popToRootViewControllerAnimated:NO];
        [vc popToInitialViewController];
    }
    else if (self.tabBarController != nil) {
        vc = self.tabBarController;
        [vc popToInitialViewController];
    }
    else if (self.presentingViewController != nil) {
        vc = self;

        while (vc.presentingViewController != nil)
            vc = vc.presentingViewController;

        [vc dismissModalViewControllerAnimated:NO];

        [vc popToInitialViewController];
    }
} 
```

评论表示赞赏:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:00:00.187

假设所有内容都被推送到导航堆栈上，这应该可以工作：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-19T03:32:47.487

就我而言，我直接设置**窗口**的**rootViewController**如下：

 **```
func popToInitialScreen() {
    let window = UIApplication.shared.keyWindow
    window.rootViewController = nil
    window.rootViewController = // init your initial view controller
    window.makeKeyAndVisible()
} 
```

PS keyWindow 在 iOS 13 中已弃用，不应用于支持多个场景的应用程序，因为它会在所有连接的场景中返回一个键窗口。**

# c# - MVC 4: Every F5 on First Time Login Always Won't Work, it will Only Work After the First Time

> ID：13016095
> 
> 赞同：0
> 
> 时间：2012-10-22T16:56:45.750
> 
> 标签：c#, jquery, json

As mentioned in the title, i cannot login everytime for the first time, but subsequent time I can login, where is wrong?Any Help will be appreciated! Or any new ways to implement the code? I'm new to it, it will also serve as a learning experience to me :)

Also is there any way in Razor to make Url.Action to string url instead of Object?

```
jQuery Client Side:
//To be submitted to the server for authentication
<script>
    $(".btn").click(function () {
        login();
    });
    function login() {
        var username = $("#username").val();
        var password = $("#password").val();
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            //url: "/member_control.asmx/Login",
            url: '@Url.Action("Index", "Home")',
            dataType: 'json',
            data: '{"username": "' + username + '","password": "' + password + '" }',

            success: function(result) {
                if (result.Success) {
                    window.location.href = result.redirectToUrl;
                } else {
                    alert(result.Message);
                }
            }
        });
    }
</script>

       Json Server Side:  
        //json will be returning back to the jquery request

            [AllowAnonymous]
            [HttpPost]
             public JsonResult Index(LoginModel1 model, Object redirectToUrl){
            //set default
            redirectToUrl = Url.Action("Test", "Home");

            if (ModelState.IsValid)
            {
                if (DataAccess.DAL.UserIsValid(model.Username, model.Password))//Authentication
                {
                    FormsAuthentication.SetAuthCookie(model.Username, false);
                    return Json(new { Success = true, redirectToUrl = Url.Action("Test", "Home") });
                }
                {
                    return Json(new { Success = false, Message = "Login failed, invalid username or password." });
                }
            }
            return Json(new { Success = false, Message = "Login failed" });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:59:43.960

好吧，不建议通过 ajax 登录，但在您的情况下，问题可能是因为缓存。在您当前的 jquery ajax 请求中添加一个选项`cache : false`，问题将得到解决。

**例子 ：**

```
 $.ajax({
    cache : false,
    // existing stuff
 }); 
```

# c++ - 2D vector class variable for a genetic algorithm gives a bad_alloc error

> ID：13016097
> 
> 赞同：0
> 
> 时间：2012-10-22T16:56:50.227
> 
> 标签：c++, vector, genetic-algorithm, bad-alloc

I'm writing a genetic algorithm for which I'm creating a "crossover" operator as a class object that is passed the two parent "chromosomes" Because the input and therefore the output chromosomes are variable lengths, my idea was two divide the input chromosomes and place in a sort of storage class variable, then resize the input chromosomes, and then finally refill the input chromosomes. I'm getting a bad_alloc error, however. If someone could spot my error I'd very much appreciate the help.

Thanks! My class code is below. Note that "plan_vector" is a 2d vector of int types.

```
#include <iostream>
#include <vector>
#include <eo>

class wetland_vector : public std::vector<int> {
public:
wetland_vector() : std::vector<int>(1, 0) {
}

};

std::istream& operator>>(std::istream& is, wetland_vector& q) {
for (unsigned int i = 0, n = 1; i < q.size(); ++i) {
    is >> q[i];
}
return is;
}

std::ostream& operator<<(std::ostream& os, const wetland_vector& q) {
os << q[0];
for (unsigned int i = 1, n = 1; i < q.size(); ++i) {
    os << " " << q[i];
}
os << " ";
return os;
}

class wetland_vector_Init : public eoInit<wetland_vector> {
public:

void operator()(wetland_vector& q) {
    for (unsigned int i = 0, n = q.size(); i < n; ++i) {
        q[i] = rng.random(10);
    }
}
};

class plan_vector : public eoVector<double, wetland_vector> {
};

int read_plan_vector(plan_vector _plan_vector) {
for (unsigned i = 0; i < _plan_vector.size(); i++) {
    //Call function that reads Quad[1]
    //Call function that reads Quad[2]
    //etc
    return 0;
}
return 0;
};

class eoMutate : public eoMonOp<plan_vector> {
int subbasin_id_min;
int subbasin_id_max;
int wetland_id_min;
int wetland_id_max;

bool operator() (plan_vector& _plan_vector) {

    //decide which Quad to mutate
    int mutate_quad_ID = rng.random(_plan_vector.size());

    //decide which Gene in Quad to mutate 
    int mutate_gene_ID = rng.random(_plan_vector[mutate_quad_ID].size());

    //mutation procedure if first slot in the Quad is selected for mutation
    if (mutate_quad_ID = 0) {
        _plan_vector[mutate_quad_ID][mutate_gene_ID] = rng.random(subbasin_id_max);
    }

    //mutation procedure if second slot in the Quad is selected for mutation
    if (mutate_quad_ID = 1) {
        _plan_vector[mutate_quad_ID][mutate_gene_ID] = rng.random(subbasin_id_max);
    }

    //note: you'll need to add more for additional wetland characteristics

    return true;
   };

public:
void set_bounds(int, int, int, int);
};

void eoMutate::set_bounds(int a, int b, int c, int d) {

subbasin_id_min = a;
subbasin_id_max = b;
wetland_id_min = c;
wetland_id_max = d;

}

double evaluate(const plan_vector& _plan_vector) {

int count = 0;
for (int i = 0; i < _plan_vector.size(); i++) {
    for (int j = 0; j < _plan_vector[i].size(); j++) {
        count += _plan_vector[i][j];
    }
}
return (count);
}

class eoQuadCross : public eoQuadOp<plan_vector> {
public:

std::string className() const {
    return "eoQuadCross";
}

plan_vector a1;
plan_vector a2;
plan_vector b1;
plan_vector b2;

bool operator() (plan_vector& a, plan_vector& b) {

    int cross_position_a = rng.random(a.size() - 1);
    int cross_position_b = rng.random(b.size() - 1);

    for (int i = 0; i < cross_position_a; i++) {
        a1.push_back(a[i]);
    }
    for (int i = cross_position_a; i < a.size(); i++) {
        a2.push_back(a[i]);
    }

    for (int i = 0; i < cross_position_b; i++) {
        b1.push_back(b[i]);
    }
    for (int i = cross_position_b; i < b.size(); i++) {
        b2.push_back(b[i]);
    }

    int size_a = b2.size() + a1.size();
    int size_b = a2.size() + b1.size();

    a.resize(size_a);
    b.resize(size_b);

    for (int i = 0; i < b2.size(); i++) {
        a.push_back(b2[i]);
    }
    for (int i = 0; i < a1.size(); i++) {
        a.push_back(a1[i]);
    }
    for (int i = 0; i < a2.size(); i++) {
        b.push_back(a2[i]);
    }
    for (int i = 0; i < b1.size(); i++) {
        b.push_back(b1[i]);
    };

    //Return bool
    return true;
}

};

int main() {
unsigned int vec_size_min = 1;
unsigned int vec_size_max = 10;
unsigned int pop_size = 100;

//BEGIN COPY PARAMETRES
const unsigned int MAX_GEN = 100;
const unsigned int MIN_GEN = 5; 
const unsigned int STEADY_GEN = 50; 
const float P_CROSS = 0.8;
const float P_MUT = 0.5; 
const double EPSILON = 0.01;
double SIGMA = 0.3; 
const double uniformMutRate = 0.5;
const double detMutRate = 0.5; 
const double normalMutRate = 0.5;
//END COPY PARAMETERS

rng.reseed(1);

//Create population
wetland_vector_Init atom_init;
eoInitVariableLength<plan_vector> vec_init(vec_size_min, vec_size_max, atom_init);
eoPop<plan_vector> pop(pop_size, vec_init);

//Create variation operators
eoMutate mutate;
mutate.set_bounds(1, 453, 1, 4);
eoQuadCross crossover;
eoDetTournamentSelect<plan_vector> select(3);
eoSGATransform<plan_vector> transform(crossover, .5, mutate, .2);

//Create fitness function
eoEvalFuncPtr<plan_vector> eval(evaluate);

//Evaluate initial population and cout
apply<plan_vector > (eval, pop);
std::cout << pop << std::endl;

//Set GA for execution and execute
eoGenContinue<plan_vector> GenCount(5);
eoSGA<plan_vector> gga(select, crossover, .5, mutate, .1, eval, GenCount);
gga(pop);

//cout final population and end
std::cout << pop << std::endl;
std::cout << "The End" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:04:23.900

```
a1.~vector();
a2.~vector();
b1.~vector();
b2.~vector(); 
```

您不应手动破坏向量，否则下次尝试访问它们时（在下一次调用 operator () 时）您会得到未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:07:02.117

为什么要`vector`手动调用析构函数？您应该让 C++ 为您调用它。如果要清除`vector`使用`clear`成员函数

# android - 在单独的活动中显示绘制的 AChartEngine 图

> ID：13016099
> 
> 赞同：3
> 
> 时间：2012-10-22T16:56:56.800
> 
> 标签：android, button, android-linearlayout, achartengine

最初尝试使用 Google 的[AChartEngine](http://code.google.com/p/achartengine/)绘制图表。但是，我想用后退按钮将它绘制在不同的布局上。到目前为止，我找不到代码有任何问题，但图表在需要时没有显示。所以我有一个主文件，它启动了启动 ShowGraph 活动的意图。此代码有效，因为它将我带到适当的屏幕。所以问题是图表没有显示在线性布局中，只有按钮显示。您能找到任何建议或错误吗？

```
buttonConfirm.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    if (radioButtonGraph.isChecked()){
                        Intent sg = new Intent (MainActivity.this, ShowGraph.class);
                        startActivity(sg);

                    } 
```

在显示图形屏幕上，xml 如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

   <Button
    android:id="@+id/buttonBackGraph"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="@drawable/coolbutton"
    android:text="@string/doneAlarm" >
    </Button>

    <LinearLayout
    android:id="@+id/graphLayout"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" />
 </LinearLayout> 
```

使用此布局的活动有一个按钮，以及对图形函数的调用：

```
public class ShowGraph extends Activity{
Button buttonDone1;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.avgraph);
    buttonDone1 = (Button)findViewById(R.id.buttonBackGraph);
    buttonDone1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent dne = new Intent(ShowGraph.this, MainActivity.class);
            startActivity(dne);
        }
    });
}

public void lineGraphHandler(View view){
    GraphActivity line = new GraphActivity();
    GraphicalView gView = line.getView(getApplicationContext());
    LinearLayout l1 = (LinearLayout)findViewById(R.id.graphLayout);
    l1.addView(gView);
}

} 
```

最后，呈现图形并应该在上面的线性布局中绘制的图形函数：

```
public class GraphActivity extends Activity {

public GraphicalView getView(Context context){
    //hardcoded plotting data for now
    int[]x = {1,2,3,4,5,6,7,8,9,10};
    int[]y ={130, 150, 358, 200, 90,60, 110, 120, 130, 150};

    TimeSeries series = new TimeSeries ("BGL Data");
    for (int i=0; i<x.length;i++){
        series.add(x[i], y[i]);
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    mrenderer.addSeriesRenderer(renderer);
    mrenderer.setChartTitle("Blood Glucose Levels Tracking");
    mrenderer.setXTitle("Test Date and Time Reference Number"); //number corresponding to date and time of test
    mrenderer.setXAxisMin(0);
    mrenderer.setXAxisMax(10);
    mrenderer.setYTitle("Blood Glucose Level/ mg/dl");

    return ChartFactory.getLineChartView(context, dataset, mrenderer); 

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:03:35.540

该`lineGraphHandler`方法不会在任何地方调用。

# perl - how to query sqlite for certain rows, i.e. dividing it into pages (perl DBI)

> ID：13016100
> 
> 赞同：5
> 
> 时间：2012-10-22T16:56:58.550
> 
> 标签：perl, sqlite, dbi

sorry for my noob question, I'm currently writing a perl web application with sqlite database behind it. I would like to be able to show in my app query results which might get thousands of rows - these should be split in pages - routing should be like /webapp/N - where N is the page number. what is the correct way to query the sqlite db using DBI, in order to fetch only the relavent rows.

for instance, if I show 25 rows per page so I want to query the db for 1-25 rows in the first page, 26-50 in the second page etc....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T19:03:40.973

使用`LIMIT`/`OFFSET`构造会显示页面，但是`OFFSET`会使查询效率低下，并且在数据更改时使页面内容移动。

如果下一页在最后一个结束的位置开始查询，则效率更高，更一致，如下所示：

```
SELECT *
FROM mytable
ORDER BY mycolumn
WHERE mycolumn > :lastvalue
LIMIT 25 
```

这意味着您的链接不是`/webapp?Page=N`but `/webapp?StartAfter=LastKey`。

[滚动光标页面](https://www2.sqlite.org/cvstrac/wiki?p=ScrollingCursor)对此进行了详细说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T16:58:53.307

你应该这样做：

```
SELECT column FROM table ORDER BY somethingelse LIMIT 0, 25 
```

当用户点击第 2 页时，您应该执行以下操作：

```
SELECT column FROM table ORDER BY somethingelse LIMIT 25, 50 
```

等等..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:10:49.890

您很可能会使用 LIMIT 和 OFFSET 关键字，如下所示：

```
$sth->prepare("SELECT foo FROM bar WHERE something LIMIT ? OFFSET ?");
$sth->execute($limit, $offset);
while ( my @row = $sth->fetchrow_array ) { # loop contains 25 items 
```

和变量将由 html/cgi/whatever 特性传递给脚本的参数控制`$limit`。`$offset`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T13:19:10.887

分页是许多 CPAN 模块已经解决的问题之一。如果您使用的是直接 SQL，则可以查看类似[DBIx::Pager](https://metacpan.org/module/DBIx%3a%3aPager)的内容。您可能还想查看[Data::Pageset 之](https://metacpan.org/module/Data%3a%3aPageset)类的内容，以帮助您管理创建到各个页面的链接。如果您使用 DBIx::Class（这是一个出色的工具）进行 SQL 查询，那么[DBIx::Class::ResultSet::Data::Pageset](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aResultSet%3a%3aData%3a%3aPageset)将使您轻松完成此操作。

从本质上讲，处理 SQL 是它的一方面，但您还需要解决它的模板方面的各种问题。我鼓励你看看这些模块，甚至可能更多地浏览 CPAN，看看其他人已经在分页方面为你完成了繁重的工作。

# windows-phone-7 - MvvmCross vnext : monodroid 在插件中使用 VideoView

> ID：13016103
> 
> 赞同：1
> 
> 时间：2012-10-22T16:57:15.373
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, mvvmcross, xamarin.mobile

我正在玩 Xamarin Mobile api MediaPicker，它使用 MediaRecorder 和 monodroid 制作插件来录制视频。

Android 必须在 VideoView 中预览视频。出于隐私考虑，此限制也适用于 wp7 和 ios。

因此，我需要从我的自定义视图中获取 VideoView（或 wp7 中的 Rectangle），并在我的插件（或使用此 VideoView 初始化 MediaPicker）中将此 VideoView 设置为 setPreviewDisplay。

实现需要 UI 元素的便携式插件的最佳方法是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:17:59.700

> 实现需要 UI 元素的便携式插件的最佳方法是什么？

我想我的第一个问题是“你需要一个便携式插件吗？”

你在 ViewModel 层或更低层实际需要的接口是什么？

我的猜测是 ViewModel 将看到的跨平台界面可能只包含：

*   一些控制命令（例如启动/停止）
*   一些摘要信息 - 例如视频长度
*   文件访问层 - 这可能与文件路径一样少？

如果是这种情况，那么我可能会在 UI 中的 Controls/Views/UIViews 中实现大部分逻辑，然后将相关命令和值绑定到那些 ViewModel 属性。

所以我根本不会亲自将它作为插件来实现！

* * *

我之前做过几个使用视频视图的应用程序 - 一个用于视频捕获（仅限 Android），一个用于条形码扫描。

我发现基本的可用样本效果很好。然而，一旦我开始尝试扩展它们，它们很快就会变得脆弱，它们很难工作，而且它们的开发非常令人沮丧！

我真诚地建议您以 UI 视图代码的形式开始您当前的开发。在你让它工作之后，你可能会找到一个很好的方法来将控件和界面拆分成一个插件——但我怀疑这不会是你大部分时间花费的地方。

* * *

例如，对于我的下一个 QR 码应用程序，我计划在[https://github.com/Redth/ZxingSharp.Mobile](https://github.com/Redth/ZxingSharp.Mobile)中使用单独的 UI 控件- 在 ViewModel 级别，我希望可以只公开某种作用于解码的命令二维码字符串。

# iphone - 从关闭“mainTabBar”视图返回后不显示子视图

> ID：13016107
> 
> 赞同：0
> 
> 时间：2012-10-22T16:57:30.937
> 
> 标签：iphone, uiview, keyboard

我有一个带有两个子视图（1.UIScrollView 和 2.UIView）的 UIView（超级视图），第一个视图是登录表单，第二个视图包含启动动画（带有 UIImageView）。动画完成后，我将其从 superview 中删除，然后，在验证登录后，它会显示一个新的 TabBarViewController，其中有一个 Home 和其他导航控制器。主页导航控制器有一个注销按钮，注销操作在 tabBarViewController 中被称为方法“注销”，这种方法会自行关闭以返回登录表单。

```
@implementation LoginViewController

MainTabBarViewController *mainTabBarViewController = [[self storyboard] instantiateViewControllerWithIdentifier:@"MainTabBarViewController"];

[self presentViewController: mainTabBarViewController animated: YES completition: nil];

Logout works fine as long as the keyboard is never shown, otherwise the login form doesn´t appear, the superview does.

@implementation MainTabBarViewController

-(void)logout{

[self dismissViewControllerAnimated: YES completition: nil];

} 
```

我注意到 loginView (1.ScrollView) 位于堆栈的顶部，并且 hidden 属性为 NO。

有任何想法吗？先感谢您

注意：我使用 ARC、故事板和 iOS 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:59:16.683

我发现了问题，在我的 loginView 中，我调整 UIScrollView 中的框架以在键盘出现时移动到 TextField 的可见区域，我这样做是注册键盘通知，所以，当键盘出现在某处时，loginView 落入一个不可见区域，所以解决方案是在 loginView 出现时注册键盘通知，在消失时取消注册。

谢谢，对不起我的英语！！

# html - ipad 纵向视图上的网站

> ID：13016109
> 
> 赞同：2
> 
> 时间：2012-10-22T16:57:38.283
> 
> 标签：html, css, viewport

我的网站在 ipad - 纵向模式下显示不正确。它在横向模式下看起来很好，但是当我把它变成纵向模式时，我最终得到了一个凌乱的网站。所有元素散布在整个网站上。我怎样才能解决这个问题？请帮我。

这是我网站的链接：[inclouds.co.uk](http://www.inclouds.co.uk)

这是我的html代码：

```
<div id="header">

         <div class="block1"> 

                <a>InClouds Hosted Business Services<br /><br /> </a><br />

                <strong><ul> 
                <li>Hosted Desktops &amp; Servers </li>
                <li>Hosted IP Telephony</li>
                <li>Hosted Electronic Document Management</li>
                <li>Private Cloud: MPLS Core Network</li>
                </ul></strong>
    </div>

    <div class="block2">
                <img width="200" height="60" src="img/logo.png"  alt="" />
                <br /><br />
               <subheading>Hosted IT &amp; Telecoms<br /><h3>Communications for Business</h3></subheading>

    </div>

    <div class="block3">
             <cont>
               <h1>  <img src="img/tel.jpg" width="25px" height="20px" /> 0845 355 1200</h1><br /> 
      <img src="img/email-icon.jpg" width="24" height="22" /><h2>  info@inclouds.co.uk</h2></cont>

    </div>

  </div>

  <div id="navbar">

  <form name="form1" method="post" action="http://www.google.com/search" method="get" onSubmit="Gsitesearch(this)">
    <label for="search"></label>
    <input type="text" name="search" id="search1" style="width: 150px; height: 15px;" >
  </form>

  <div class="menu">
             <ul id="nav">
                <li><a href="#">HOME</a></li>
                <li><a href="#">ABOUT</a></li>
                <li><a href="#">SERVICES</a></li>
                <li><a href="#">BLOG</a></li>
                <li><a href="#">CONTACT</a></li>
                <li><a href="#">SUPPORT</a></li>

            </ul>
    </div>
  <login><a href="index.html"><img src="img/images/loginclient_05.png" alt="login" longdesc="http://www.inclouds.co.uk/login" href="login.html"></a> </login> 
  </div>

  <div id="feature">

    <div id="page">

    </div>

  </div>
  </div>
  <div id="container">
  <div id="main">
  <div id="sidebar">

            <div id="sidebarA">

                <heading>HOSTED SERVICES</heading>

            </div>
            <div id="sidebarB">

                <img src="img/callus.png" />

            </div>
            </div>

            <div id="services">

                <a href="#"><img id="sBox1" src="img/1.png" alt="" /></a>
                <a href="#"> <img id="sBox2" src="img/2.png" alt="" /></a>
                <a href="#"> <img id="sBox3" src="img/3.png" alt=""  /></a>
                <a href="#"> <img id="sBox4" src="img/4.png"  alt="" /></a>               
                <a href="#"> <img id="sBox5" src="img/5.png"  alt="" />
                <a href="#"> <img id="sBox6" src="img/6.png" alt=""  /></a>
                <a href="#"> <img id="sBox7" src="img/7.png" alt=""  /></a>
                <a href="#"><img id="sBox8" src="img/8.png"  alt="" /></a>
                <a href="#"><img id="sBox9" src="img/9.png"  alt="" /></a>          

            </div>
            <div id="sidebar2">
            <heading>About Us</heading>
                <featured1>

<script type="text/javascript">

var marqueewidth="155px"
var marqueeheight="430px"
var marqueespeed=1
var initPause=1000
var full=1
var pauseit=1
var iebreak='<p></p>'

var marqueecontent='<font face="Arial">InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p>InClouds provide our IT Telecoms, Networks &amp; infrastructure all via their private cloud. This has Massively changed and improved the way we now work for the better.</p><p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr. Lorem ipsum dolor sit amet, consetetur sadispscing alitr. </p></font>'

var copyspeed=marqueespeed
var pausespeed=(pauseit==0)? copyspeed: 0
var iedom=document.all||document.getElementById
var actualheight=''
var cross_marquee, cross_marquee2, ns_marquee

function populate(){
if (iedom){
var lb=document.getElementById&&!document.all? '' : iebreak
cross_marquee=document.getElementById? document.getElementById("iemarquee") : document.all.iemarquee
cross_marquee2=document.getElementById? document.getElementById("iemarquee2") : document.all.iemarquee2
cross_marquee.style.top=(full==1)? '2px' : parseInt(marqueeheight)+8+"px"
cross_marquee2.innerHTML=cross_marquee.innerHTML=marqueecontent+lb
actualheight=cross_marquee.offsetHeight
cross_marquee2.style.top=(parseInt(cross_marquee.style.top)+actualheight+8)+"px" //indicates following #1
}
else if (document.layers){
ns_marquee=document.ns_marquee.document.ns_marquee2
ns_marquee.top=parseInt(marqueeheight)+8
ns_marquee.document.write(marqueecontent)
ns_marquee.document.close()
actualheight=ns_marquee.document.height
}
setTimeout('lefttime=setInterval("scrollmarquee()",20)',initPause)
}
window.onload=populate

function scrollmarquee(){

if (iedom){
if (parseInt(cross_marquee.style.top)<(actualheight*(-1)+8))
cross_marquee.style.top=(parseInt(cross_marquee2.style.top)+actualheight+8)+"px"
if (parseInt(cross_marquee2.style.top)<(actualheight*(-1)+8))
cross_marquee2.style.top=(parseInt(cross_marquee.style.top)+actualheight+8)+"px"
cross_marquee2.style.top=parseInt(cross_marquee2.style.top)-copyspeed+"px"
cross_marquee.style.top=parseInt(cross_marquee.style.top)-copyspeed+"px"
}

else if (document.layers){
if (ns_marquee.top>(actualheight*(-1)+8))
ns_marquee.top-=copyspeed
else
ns_marquee.top=parseInt(marqueeheight)+8
}
}

if (iedom||document.layers){
with (document){
if (iedom){
write('<div style="position:relative;width:'+marqueewidth+';height:'+marqueeheight+';overflow:hidden" onMouseover="copyspeed=pausespeed" onMouseout="copyspeed=marqueespeed" scrollamount="1">')
write('<div id="iemarquee" style="position:absolute;left:0px;top:0px;width:100%;">')
write('</div><div id="iemarquee2" style="position:absolute;left:0px;top:0px;width:100%;z-index:100;">')
write('</div></div>')

}
else if (document.layers){
write('<ilayer width='+marqueewidth+' height='+marqueeheight+' name="ns_marquee">')
write('<layer name="ns_marquee2" width='+marqueewidth+' height='+marqueeheight+' left=0 top=0 onMouseover="copyspeed=pausespeed" onMouseout="copyspeed=marqueespeed"></layer>')
write('</ilayer>')
}
}
}
</script>
</featured1>
            </div>
  </div>

<div id="footer-wrapper">
        <div id="footer">

            <div id="partner">
                <img src="img/partnerslogo.png" alt=""  />
            </div>

            <div id="footer-links">

               <div class="f1">

                <strong><ftr_header>Sitemap</ftr_header></strong><br />
                <a href="/">Homepage</a><br/>
                <a href="/">Why Netplan?</a><br/>
                <a href="/">Philosophy</a><br/>
                <a href="/">Green Policy</a><br/>
                <a href="/">Service Level Agreement</a><br/>
                <a href="/">PCI DSS Hosting</a><br/>
                <a href="/">Contact Details</a><br/>
                <a href="/">Blog</a><br/><br /><br /><br /><br /> <br />
                <a href="/"><img src="img/cookie-policy.png" width="200px" height="73px"/></a>                

                <site>Site by:</site>
                <ba><img id="img" src="img/propromo.png" width="100px" height="20px"></ba>
                </div>

                <div class="f2">

                <strong><ftr_header>Sitemap</ftr_header></strong><br />
                <a href="/">Homepage</a><br/>
                <a href="/">Why Netplan?</a><br/>
                <a href="/">Philosophy</a><br/>
                <a href="/">Green Policy</a><br/>
                <a href="/">Service Level Agreement</a><br/>
                <a href="/">PCI DSS Hosting</a><br/>
                <a href="/">Contact Details</a><br/>
                <a href="/">Blog</a><br/><br />

                </div>

                <div class="f3">

                <heading>InClouds Hosted Business Services</heading><br/><br  /><add>
                29th Floor, 1 Canada Square, Canary Wharf<br/>
               London, UK E14 5DY<br/><br/></add>
                </div>
                <div class="f4">
                <quote>Quote Line</quote><br/>

                <num>0845 355 1200</num><br />
                <email>info@inclouds.co.uk</email><br /><br/><br /> <br/><br />

                <ul id="socialmedia">
                <li><a href="#"><img src="img/Twitter-Logo-300x293.png" width="40px" height="40px"/></a></li>
                <li><a href="#"><img src="img/Facebook-skins-post.png" width="40px" height="40px"/></a></li>
                <li><a href="#"><img src="img/LinkedIn_logo.png" width="40px" height="40px"/></a></li>
                <li><a href="#"><img src="img/rss-icon.png" width="40px" height="40px"/></a></li>
                </ul>
                </div>
            </div>

            <div id="wrapperform">
                         <formHeader>Enter your details below and we will keep you<br />
        updatedon relevant industry information and<br />
        technological advances. </formHeader>
                       <style type="text/css">

        </div>
        </div><!-- footer -->
        </div> 
```

CSS代码：

```
@charset "utf-8";
/* CSS Document */

#header_container {

    width: 100%;
    background: url(../img/headerbackground.jpg) repeat-x;

    height: 695px;

 }
#header {
width: 990px;
height: 220px;
margin-left: auto;
margin-right: auto;
margin-top: auto;
display: block;
}

.block1 {

    float:left;
    position: relative;
    width: 330px;
    top: 25px;  
}

#header .block1 ul {

    float: left;
    list-style-type: none;
    padding: 0px;   
    margin-left: 30px;
    line-height: 25px;
    font-size: 13px;
    font-weight: 600;
    color: #003;
    text-align: left;
    list-style-image: url('../img/bullets.png');

}

#header .block li{

    list-style-position: inside;
}
#header .block1 a{

    font-weight: bold;
    float: left;
    display:block;
}

.block2 {
    text-align:center;
    width: 33%;
    float: left;
    position: relative;
    top: 85px;

}

#header .block2 subheading {

    font-size:18px;
    font-weight: 600;
    color: #003;
    text-align: center;
    position: relative;
    bottom: 15px;

}

#header .block2 img{

    text-align: center;
}

.block3 {

    width: 330px;
    float: left;
    position: relative;
    top: 25px;
}

#header .block3 cont{
    text-align: right;
    float: right;
}

#navbar {
width: 990px;
height: 50px;
margin-left: auto;
margin-right: auto;
position: relative;
bottom: 5px;
}

#navbar form{
float: left;
position: relative;
top: 10px;
padding: 0;
margin:0;

}

#nav li {
float: left;
width: 100px;
line-height:10px;
list-style: none;
margin-right: 5px;
text-align: center;
display: block;
font-weight: bold;
color: #003;
}

#nav li a {
text-decoration: none;
font-size:: 18px;
color: #003;

}

#nav li a:hover {
color: #09F;
font-weight:bold;
text-decoration: none;
border-bottom: solid medium #09F;
}

#search1 {
width: 150px;
height: 20px;
background: white  url(../img/searchicon.jpg) right no-repeat;
padding-right: 10px;
}

input
{
  -moz-border-radius: 15px;
 border-radius: 15px;
    padding:5px;
}

.menu {

float:left;
position: relative;
right: 20px;

}

#navbar .menu a{
padding: 0px;
margin: 0px;
}

#navbar .menu img {

border: none;
height: 40px;

}

#navbar login{
    position: relative;
    top: 5px;
    float: right;

}

#navbar login img {

    border: none;
    width: 140px;
    height: 35px;

}

/* ---------------------------------*/

#feature {
width: 100%;
height:420px;
text-align: left;
margin-top: 22px;
}

#slider {
width:100%;
height:416px;

/*IE bugfix*/
padding:0;
margin:0;
}

#slider img {
    height: 416px;
    text-align: center;
}

#slider li { list-style:none; }

#page {
position: relative;
width:100%;
bottom: 20px;
float:left;

}

#container {

    width: 100%;
    background: url(../img/mainbackground.jpg) no-repeat;
    background-size: 100%;
}

#main {
display: block;
width: 990px;;
height: 490px;
margin-left: auto;
margin-right: auto;
text-align: left;
position: relative;
}

#sidebar {

    float: left;
    width: 180px;
    height: 490px;
}
#sidebarA{

    width: 180px;
    height: 335px;
    border: thin solid #666;
        -moz-border-radius: 15px;
        border-radius: 15px;
    position: relative;
    float: left;

}

#sidebarB {

width: 180px;
    height: 140px;
    border: thin solid #666;
        -moz-border-radius: 15px;
        border-radius: 15px;
float: left;
margin-top: 10px;
}

#sidebarB img{

    position: relative;
    left: 17px;
    bottom: 8px;
}

#sidebar heading {

    position: relative;
    top: 10px;
    left: 28px;
    font-size: 14px;
    color: #333;
    text-transform: uppercase;
    font-weight: bold;
}
#serviceMenu {
position: relative;
left: 10px;
text-decoration: none;
padding: 0;
width: 150px;

}
#serviceMenu li {
margin-top: 2px;
margin-bottom: 2px;
text-decoration: none;
list-style: none;

}

#serviceMenu li a{
color: #333;
font-size: 13px;
text-decoration: none;
}

#services{

    float: left;
    width: 600px;
    position: relative;
    padding: 10px;
}

#services img {

    width: 160px;
    border: none;
    height: 141px;
    padding-left: 15px;
    padding-right: 20px;
    padding-bottom: 15px;
}

#services img:hover {
opacity: 0.7;
filter:alpha(opacity=70);
}

#sidebar2 {

width: 180px;
    height: 490px;
    border: thin solid #666;
        -moz-border-radius: 15px;
        border-radius: 15px;
    position: relative;
    float: left;
left: 10px;
font-size: 15px;

}

#sidebar2 heading {

    position: relative;
    font-weight: BOLD;
    left: 50px;
    top: 10px;
    color: #333;
    text-transform: uppercase;
    font-weight: 550;
}

#sidebar2 featured1 {

position: relative;
top: 25px;
left: 15px;
font-size: 13px;
color: #333;
margin-left: 10px;

}

#footer-wrapper {
width: 100%;
height: 620px;
background: url(../img/footerbackground.png) repeat-x;
text-align: left;
position: relative;
bottom: 30px;

}
#footer {
display: block;
position: relative;
width: 990px;
height: 100%;
bottom: 15px;
text-align: left;
margin-left: auto;
margin-right: auto;
}

#footer .f1 site{

    font-size:14px;
    color: #333;
}

#footer .f1 img{

    position: relative;
    top: 10px;
}
#partner {
    position: relative;
    top: 80px;
    float: left;
    padding-bottom: 50px;
}

#partner img{
    width: 990px;
}

#wrapperform {
position: relative;
width: 300px;
float:left;
margin-top: 75px;
left: 50px;

}

#wrapperform formHeader {

    position: relative;
    font-size: 13px;
    float:left;
    color: white;
    text-align: left;
    left: 26px;
}

#footer-links{

    width: 600px;
    float: left;
    font-size: 10px;
    color: #FFF;
    position: relative;
    top: 15px;
}

.f1 {
        float: left;
        position: relative;
        top: 64px;
        width: 200px;
        font-style:normal;
        line-height: 15px;
}
.f1 a{

    text-decoration: none;
    color: #FFF;
    font-size: 12px;
}

.f1 a:hover {

    text-decoration: underline;
}

.f1 site{
position: relative;
top: 45px;
}

.f1 ba{
position: relative;
top: 40px;
}

.f2 {
        float: left;
        position: relative;
        width: 100px;

        line-height: 15px;
        top: 64px;
        font-style:normal;

}
.f2 a{

    text-decoration: none;
    color: #FFF;
    font-size: 12px;
}

.f2 a:hover {

    text-decoration: underline;
}

.f3 {
        float: left;
        position: relative;
        left: 65px;
        width: 300px;
        line-height: 15px;
        top: 64px;
        font-style:normal;

}
.f3 a{

    text-decoration: none;
    color: #FFF;
    font-size: 16px;
}

.f3 a:hover {

    text-decoration: underline;
}

.f3 heading {

    font-size: 15px;
    color:#FFFFFF;
    font-weight:bold;
}

.f3 add{
    font-size: 13px;
}

.f4 {
        float: left;
        position: relative;
        left: 65px;
        line-height: 15px;
        top: 59px;
        font-style:normal;
        line-height: 25px;

}

.f4 quote {

    font-size: 18px;
    line-height: 20px;

}

.f4 num {

    font-size: 27px;
    font-weight: bold;
}

.f4 email {
    font-size: 20px;
}

.f4 ul{

    float: left;
    position: relative;
    right: 40px;
}

.f4 img{

    border: none;
}

.f4 li{

line-height:10px;
list-style: none;
display: inline;
padding-right: 20px;
font-weight: bold;
color: #003;

}

.low
{
     font: 13px/1.7 'open sans', sans-serif;
    color: #333;
    font-weight: 300;
}
.low a
{
    color: #333;
    text-decoration: none;
    padding-bottom: 1px;
    border-bottom: 1px solid #ccc;
}
.low a:hover
{
     border: none;
}

.light_image:hover
{
    opacity: 0.8;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:15:27.310

链接已损坏，因此无法真正看到您的网站。就在我的头上，尝试像这样添加元标记：

```
 <meta name = "viewport" content = "width=device-width; initial-scale = 1; maximum-scale=1; user-scalable = no;" /> 
```

# objective-c - 我需要包含@synthesize 吗？

> ID：13016117
> 
> 赞同：6
> 
> 时间：2012-10-22T16:58:12.650
> 
> 标签：objective-c, synthesize

我`@property`通过右键单击并从`ViewController.xib`into拖动来创建一个`ViewController.h`，但`@synthesize`不是在`ViewController.m`.

[这篇文章](https://stackoverflow.com/questions/12730244/property-and-synthesize)说`@synthesize`不再需要，但我想知道自动完成是否需要`@synthesize`它才能正常工作。

问：我需要包括`@synthesize`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T17:01:42.990

一句话，没有。Xcode 4.5 完全意识到`@synthesize`不再需要的事实。你很高兴没有！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T15:45:01.747

是的，你很高兴，但请确保你指定它是这样的： self.textInput.text=@"Hello world" 没有 self 就无法识别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:08:39.790

使用 ARC 时，@synthesize auto 会出现。在 ARC 之外，您必须添加它。阿德里安

# git - 如何在 GitHub 的存储库上设置 receive.denyNonFastForwards

> ID：13016119
> 
> 赞同：8
> 
> 时间：2012-10-22T16:58:20.123
> 
> 标签：git, github

我有一个托管在 GitHub 上的存储库，它有几个分支。

如何设置主存储库的配置以设置`receive.denyNonFastForwards`标志，以便主存储库只能接受快进的推送，并且即使它们是，也会拒绝任何非快进`--forced`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T17:25:37.547

GitHub 没有公开此功能，但有两种选择：

*   GitHub 支持可以在存储库上设置它。

*   您可以通过将 GitHub 存储库设置为您拥有更多控制权的另一个存储库的镜像来模拟这一点。仅将 GitHub 帐户的写入权限授予最少的负责个人以及用于进行镜像的帐户。非 GitHub 存储库将是您设置的位置`receive.denyNonFastForwards`，并让每个人都推送。然后可以通过`post-receive`钩子、cron 作业或两者的组合来完成镜像。`post-receive`使用两者的一个原因是在两个存储库之间获得最小的时间延迟，并且即使钩子未能更新 GitHub（例如，如果 GitHub 已关闭），仍然确保一切都是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T19:52:34.220

Github 企业版现在具有[禁用强制推送](https://help.github.com/enterprise/2.1/admin/articles/blocking-force-pushes-to-a-repository/)的功能。对于不使用企业版的用户，您可以[配置一个 pre-push hook](http://blog.bigbinary.com/2013/09/19/do-not-allow-force-push-to-master.html)。

除非绝对必要，否则永远不要强行掌握，这是一个很好的做法。

# javascript - 返回列标题的名称

> ID：13016125
> 
> 赞同：-1
> 
> 时间：2012-10-22T16:58:43.453
> 
> 标签：javascript, html, dom

我需要你的帮助，

给定下面的 html 表，我如何创建一个 javascript 函数，只需单击鼠标，就可以提醒我列标题的名称？

IE。如果我单击颜色标题，将弹出一个 JavaScript 框并警告（“颜色”）？

```
<html>

<head>

</head>

<body>

<table border="1" cellspacing="1" width="500">
    <tr>
        <td>FRUITS</td>
        <td>COLORS</td>
        <td>VEGGIES</td>
        <td>NUMBERS</td>
    </tr>
    <tr>
        <td>apples</td>
        <td>red</td>
        <td>carrots</td>
        <td>123</td>
    </tr>
    <tr>
        <td>oranges</td>
        <td>blue</td>
        <td>celery</td>
        <td>456</td>
    </tr>
    <tr>
        <td>pears</td>
        <td>green</td>
        <td>brocoli</td>
        <td>789</td>
    </tr>
    <tr>
        <td>mangos</td>
        <td>yellow</td>
        <td>lettuce</td>
        <td>098</td>
    </tr>
</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:10:52.567

试试这个

```
var td     = document.getElementsByTagName("td"),
    titles = document.getElementsByTagName("th");

for ( var i = 0; i < td.length; i++ ) {   
    td[i].addEventListener("click", function() {
        alert( titles[this.cellIndex].innerHTML );
    }, false);
} 
```

[**演示**](http://jsfiddle.net/gDYws/)

* * *

**更新**

如果点击应该只发生在表头上

```
var titles = document.getElementsByTagName("th");

for ( var i = 0, len = titles.length; i < len; i++ ) {   
    titles[i].addEventListener("click", function() {
        alert( this.innerHTML );
    }, false);
} 
```

[**演示**](http://jsfiddle.net/gDYws/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:05:04.480

```
​(function() {
    var headings = document.getElementsByTagName('th');
    for (var i = 0, amount = headings.length; i < amount; i++) {
        headings[i].addEventListener("click", function() {
            alert(this.innerText);
        });
    }
})();​ 
```

注意我已将标签更改为`td`标签，`th`因为它就是这样。:-) 另请注意，我使用了一个通用`getElementsByTagName('th')`调用，它应该适用于提供的 HTML，但您可能希望在真实的 HTML 文档中更具体。

演示：http: [//jsfiddle.net/3G9Tx/](http://jsfiddle.net/3G9Tx/)

您可能还想研究`console.log()`而不是使用`alert()`，这在大多数情况下更容易/更受欢迎。

**更新**

改进版：

```
function getTextFromHeading(e) {
    var e = e || window.event,
        target = e.target || e.srcElement,
        text = target.textContent || target.innerText;  

    if (target.tagName.toLowerCase() === 'th') {
        alert(text);
    }
}

(function() {
    var table = document.getElementsByTagName('table');
    if (table[0].addEventListener) {
        table[0].addEventListener('click', getTextFromHeading);
    } else if (table[0].attachEvent) {
        table[0].attachEvent('onclick', getTextFromHeading);
    }
}()); 
```

这有一些额外的任务，以确保它是跨浏览器兼容的。它也只使用一个事件处理程序。

演示： http: [//jsfiddle.net/yRfem/](http://jsfiddle.net/yRfem/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:05:15.443

由于没有指定 jQuery，我将给出一个非 jQuery 的解决方案。`onclick`像这样给你的细胞一个事件：

```
<td onclick="alert(this.innerHTML);">FRUITS</td> 
```

jQuery 可以大大简化这个任务。您可以为所有单元格设置事件处理程序，并在一次调用中设置事件方法。

```
<tr id="headerRow">
    <td>FRUITS</td>
    <td>COLORS</td>
    <td>VEGGIES</td>
    <td>NUMBERS</td>
</tr> 
```

js：

```
$(function() {  //on DOM loaded method
  $('#headerRow td').click(function() {
      alert(this.innerHTML);
  });
}); 
```

[http://jsfiddle.net/xzmMj/](http://jsfiddle.net/xzmMj/)

（类似的非 jquery 概念）：

```
//execute at end of document or in a DOM ready/loaded handler
var arr = document.getElementById('headerRow')
    .getElementsByTagName("td");

for(var i = 0; i < arr.length; i++) {
    (function(_i){
        arr[_i].onclick = function() { alert(this.innerHTML); };
    })(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:08:14.103

假设您使用 jquery

```
$('table tr').each(function(index){
  $(this+" td").each(function(index2){
      $(this).click(function(){
         alert($('table td:eq('+index2+')').text());
      });
  });
}); 
```

应该带你去某个地方（未经测试）

# razor - 如何使用 media=print 从视图生成 PDF 样式

> ID：13016126
> 
> 赞同：4
> 
> 时间：2012-10-22T16:58:42.120
> 
> 标签：razor, asp.net-mvc-4, pdf-generation, itextsharp, print-css

stackoverflow 或其他论坛中的大多数问题都展示了如何生成视图并通过电子邮件发送它们。

但我的目标是从具有该`media=print`格式的视图生成 PDF，并通过电子邮件将其作为附件发送。

我有一个显示报告的视图。我使用 CSS Print 以打印格式显示此报告。（基本上我显示一些元素并隐藏其他元素）。

如何从此视图生成 PDF（格式为`media=print`）并通过电子邮件附件发送。

我正在使用 ActionMailer 发送电子邮件并使用 iTextSharp 生成 PDF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T05:54:55.343

我也有同样的问题，并做了很多谷歌搜索。但找不到合适的解决方案。有一个名为“PDFGenerator”的第 3 方 dll，但输出并不整洁。所以我选择了另一种解决方案。我创建了一个带有 UI 的报告文件（.rdlc），我想通过代码将其打印为 pdf。这是我的示例代码 [GitHub](https://github.com/dimuthudrw/ReportToPdfConverter)

# python - Python - 将列表的字典扁平化为唯一值？

> ID：13016129
> 
> 赞同：32
> 
> 时间：2012-10-22T16:58:50.667
> 
> 标签：python

我在 python 中有一个列表字典：

```
content = {88962: [80, 130], 87484: [64], 53662: [58,80]} 
```

我想把它变成唯一值的列表

```
[58,64,80,130] 
```

我写了一个手动解决方案，但它是一个手动解决方案。我知道有更简洁和更优雅的方式来使用列表推导、 map/reduce 、 itertools 等。有人知道吗？

```
content = {88962: [80, 130], 87484: [64], 53662: [58,80]}
result = set({})
for k in content.keys() :
    for i in content[k]:
        result.add(i)
# and list/sort/print just to compare the output
r2 = list( result )
r2.sort()
print r2 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-22T17:03:45.397

双组理解：

蟒蛇 3：

```
sorted({x for v in content.values() for x in v}) 
```

蟒蛇2：

```
sorted({x for v in content.itervalues() for x in v}) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-22T17:02:28.043

在 python3.7 中，您可以使用[`.values`](https://docs.python.org/3/library/stdtypes.html#dict.values)和的组合[`chain`](https://docs.python.org/3.7/library/itertools.html#itertools.chain)。

```
from itertools import chain
sorted(set(chain(*content.values())))
# [58, 64, 80, 130]

# another option is `itertools.groupby`
from itertools import groupby
[k for k, g in groupby(sorted(chain(*content.values())))] 
```

在python2.7

```
from itertools import chain
sorted(set(chain.from_iterable(content.itervalues())))
# [58, 64, 80, 130]

# another option is `itertools.groupby`
[k for k, g in groupby(sorted(chain.from_iterable(content.itervalues())))] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T17:00:00.090

使用`set()`和`itertools.chain()`：

```
In [83]: content = {88962: [80, 130], 87484: [64], 53662: [58,80]}

In [84]: from itertools import chain

In [94]: x=set(chain(*content.values()))

In [95]: x
Out[95]: set([58, 64, 80, 130]) # a set, the items may or may not be sorted

In [96]: sorted(x)         #convert set to a sorted list
Out[96]: [58, 64, 80, 130] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-22T17:00:38.007

```
sorted(set(val
            for row in content.itervalues()
                for val in row)) 
```

`set`为我们获取所有不同的值（如字典，但没有存储值的开销）。 `sorted`然后只接受创建的`set`并返回一个`list`按升序排序的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-22T17:01:14.387

```
list(reduce(lambda a, b: a.union(set(b)), content.itervalues(), set())) 
```

将`lambda`两个输入参数转换为集合并将它们联合起来。

`reduce`将对传递给它的列表进行左[折叠](http://en.wikipedia.org/wiki/Left_fold)——在这种情况下，列表是您的字典的值。

`reduce`将把这个结果变成`set`一个列表。

这也可以拼写：

```
list(reduce(lambda a, b: a | set(b), content.itervalues(), set())) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-22T17:09:26.993

```
sorted(set(sum(content.values(), []))) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-02T16:09:24.990

使用列表推导生成一个非唯一列表，将其转换为集合以获取唯一值，然后返回排序列表。也许不是最有效的，但又是另一种单行解决方案（这次没有导入）。

蟒蛇 3：

```
sorted(list(set([val for vals in content.values() for val in vals]))) 
```

蟒蛇 2.7：

```
sorted(list(set([val for vals in content.itervalues() for val in vals]))) 
```

# xcode - 如何以编程方式在 xCode 中设置 Main Inerface

> ID：13016131
> 
> 赞同：0
> 
> 时间：2012-10-22T16:58:59.803
> 
> 标签：xcode

我正在使用 Apples MultipleDetailViews [http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html) 作为模板作为我的 iPad 应用程序的来源。该模板在界面构建器 (MainWindow) 中使用 splitviewController。在目标的 iPhone/iPad 部署信息中，将 MainWindow 设置为“主界面”。

我希望我的应用程序也可以在 iPhone 上运行。这意味着当应用程序在 iPhone 上运行时，我需要加载不同的 xib。然后我必须从“主界面”中删除“MainWindow”，因为当我在 iPhone 上加载时，由于 splitViewController，应用程序会崩溃。

模板的 AppDeleagte 如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];        self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];
} 
```

如果我从“主界面”中删除“主窗口”，那么我如何需要更改 APpDelegate，或者我可能需要更改 MainWindow.xib 以使其也适用于 iPhone？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:13:11.100

我自己找到了答案，我为它真的很简单而感到羞愧。iPhone 有一个“主界面”，iPad 有一个：-S。所有这一切都是徒劳的:-(

# ruby-on-rails-3 - bootstrap for rails 我们需要保留所有文件吗？

> ID：13016132
> 
> 赞同：1
> 
> 时间：2012-10-22T16:59:01.777
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

嗨，我从他们的网站下载了引导程序。它是一个带有不同 css js img 文件的 zip 文件。我们需要同时粘贴 bootstrap.css 和 bootstrap.min.css 吗？它不是同一个文件，我将它们包括了两次吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:50:15.607

不，您不需要保留这两个文件，因为 .min 文件只是 bootstrap.css 的缩小（压缩）版本。为了利用所有引导功能，您只需在一个 css 中包含 2 个文件（最小或正常）和一个js（最小或正常）。您也可以考虑从cdn下载它而不是在本地保存副本这里是链接[http://www.bootstrapcdn.com/](http://www.bootstrapcdn.com/)

# c++ - 何时应该使用 boost call_traits::param_type 与通用参考？

> ID：13016139
> 
> 赞同：4
> 
> 时间：2012-10-22T16:59:44.163
> 
> 标签：c++, performance, boost, c++11, parameter-passing

在 C++98 中，我习惯于在模板函数中使用[call_traits](http://www.boost.org/doc/libs/1_51_0/libs/utility/call_traits.htm)来自动选择传递参数的最佳方式，例如：

```
template<class T>
void foo(typename boost::call_traits<T>::param_type arg)
{
    // .. do stuff with arg ..
} 
```

优点是对于原语，它将通过值传递，而对于更复杂的对象，它将通过引用传递，因此我将拥有尽可能少的开销。C++11 现在有了“通用引用”的概念：

```
template<class T>
void foo(T&& arg)
{
    // .. do stuff with arg ..
} 
```

据我了解，我需要使用通用引用才能通过 std::forward 获得完美的转发，所以如果我打算使用它，那么选择是明确的。但是当我不打算这样做时，我应该更喜欢哪个？通用参考总是一样好还是更好？

# php - 在页面之间导航时动态地将数据附加到 URL 查询字符串

> ID：13016140
> 
> 赞同：1
> 
> 时间：2012-10-22T16:59:46.630
> 
> 标签：php, mysql, url

这只是一个用于我自己学习目的的项目。对于我的项目，用户将能够创建投票并回答它们。每个调查都有自己的唯一 ID，并且可以通过其唯一的 URL 访问。

我的问题是这个。我知道我可以通过这种方式解决问题，但这是一种学习体验。当用户提交此表单时：

```
 <form name="createPoll" action="polls.php" method="post">
        Poll Title: <input name="pollTitle" type="text" /><br />
        Option 1: <input name="pollOption" type="text" /><br />
        Option 2: <input name="pollOption" type="text" /><br />
        <input type="submit" value ="Submit Poll" /><br />
    </form> 
```

我想运行一个脚本，将其添加到我的 MySQL 数据库中，并使用该脚本将为 URL 生成的 pollID，如下所示：

```
 http://www.mydomainname.com/polls.php?pollID=12345 
```

其中“12345”是投票的唯一 ID。我的问题是这样的：

在提交我的表单时，将用户带到[http://www.mydomainname.com/polls.php?pollID=12345](http://www.mydomainname.com/polls.php?pollID=12345)（假设生成的 pollID 为“12345”）的最佳方式是什么？一旦脚本创建了唯一的 pollID，我是否必须在 php 中设置标题才能重定向它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:03:52.073

生成 url，然后用于[`header()`](http://php.net/manual/en/function.header.php)重定向页面。

例如：

```
$id = 12345;

$url = 'http://www.mydomainname.com/polls.php?pollID=' . $id;
header('Location: ' . $url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:08:54.277

顺便说一句：有两个名为“pollOption”的输入，小心:)

您的 INSERT 代码可能是这样的

```
$id=rand(100000,9999999999999999);
$checkid=mysql_query("SELECT ID FROM ID WHERE ID='$id'");
$checkidx=mysql_fetch_array($checkid);

if($_POST and $checkidx==null){
$title=$_POST['pollTitle'];
$opt1=$_POST['pollOption1'];
$opt2=$_POST['pollOption2'];
$insert=mysql_query("INSERT INTO ID,title,option1,option2 VALUES ('$id','$title','$opt1','$opt2')");
echo "Added! You re redirecting";
?>
<meta http-equiv="refresh" content="2;URL=http://www.mydomainname.com/polls.php?pollID=<?echo $id; ?>">

<?
} 
```

而你的 polls.php 可能是这样的；

```
$id=$_GET['id'];
if($id!=null){
$idget=mysql_query("SELECT * FROM blabla WHERE ID='$id'");
$idgetx=mysql_fetch_array($idget);

echo $idgetx[0] . $idgetx[1];
} 
```

# android - 未调用 IntentService

> ID：13016145
> 
> 赞同：2
> 
> 时间：2012-10-22T17:00:14.763
> 
> 标签：android, intentservice

我想为我的应用程序使用 IntentService 以在后台线程中从服务器加载数据，而不会影响或干扰应用程序活动。这是我的简单 IntentService

```
public class SearchService extends IntentService  {

    public SearchService() {
    super("SearchService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
    Log.d("Tag","service started");
    } 
```

}

我在我的应用程序的主活动中启动此服务

```
public class ChannelsActivity extends Activity {
   @Override
    public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
            Intent intent = new Intent(this , SearchService.class);
            startService(intent);   
         } 
```

我还在清单文件中定义了服务属性，但它对我不起作用我不知道是什么问题

```
 <application
    <activity
        android:name=".ChannelsActivity"
        android:screenOrientation="landscape"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".SearchService"/>

</application> 
```

我被这个问题困住了，任何帮助都会对我有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:20:23.877

您发布的代码应该可以工作。您是否在 logcat 窗口中看到调试日志“服务已启动”？尽管这听起来很愚蠢，但 SearchService 将运行并立即关闭，因为没有大量工作要做，如果这是您的目标，您将不会在 Running Services 中看到该服务。

希望能帮助到你。

# iphone - 在完成之前启动动画 UIView？

> ID：13016147
> 
> 赞同：1
> 
> 时间：2012-10-22T17:00:29.343
> 
> 标签：iphone, objective-c, ios, animation

我正在使用动画视图`[UIView animateWithDuration:...]`序列。`UIImageView`像这样：

```
[UIView animateWithDuration:1.0 animations:^{
    imageView.frame = newImageRectPosition;
}completion:^(BOOL finished){
 //animate next UIImageView
}]; 
```

我需要动画“下一个 UIImageView”，而不是完成。我需要在上一个动画的中间设置“下一个 UIImageView”，而不是在完成时。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:14:15.073

您可以设置两个 UIView 动画块，其中一个具有第一个动画持续时间的一半的延迟：

```
[UIView animateWithDuration:1.0 
                 animations:^{ ... }
                 completion:^(BOOL finished){ ... }
];

[UIView animateWithDuration:1.0
                      delay:0.5
                    options:UIViewAnimationCurveLinear
                 animations:^{ ... }
                 completion:^(BOOL finished) { ... }
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:19:52.517

您可以使用许多选项来实现您所追求的效果。想到的一个是计时器的使用。

使用 NSTimer，其触发间隔为动画的一半，并让计时器触发另一个动画。只要两个动画互不干扰，应该没问题。

一个例子是这样的：

```
NSTimer* timer;
// Modify to your uses if so required (i.e. repeating, more than 2 animations etc...)
timer = [NSTimer scheduledTimerWithTimeInterval:animationTime/2 target:self selector:@selector(runAnimation) userInfo:nil repeats:NO];

[UIView animateWithDuration:animationTime animations:^{
    imageView.frame = newImageRectPosition;
} completion:nil];

- (void)runAnimation
{ 
    // 2nd animation required
    [UIView animateWithDuration:animationTime animations:^{
        imageView.frame = newImageRectPosition;
    } completion:nil];
} 
```

使用计时器，如果您需要制作两个以上的动画，这可以扩大，如果您稍后需要更改动画时间，这一切都会保持在一起。

# android - GCM 消息传递时间非常不稳定

> ID：13016150
> 
> 赞同：15
> 
> 时间：2012-10-22T17:00:45.580
> 
> 标签：android, message, google-cloud-messaging

我已经设置了一个支持 GCM 的 Android 应用程序，并且有一个小测试应用程序可以向应用程序发送消息。当我在模拟器中运行应用程序时，我可以看到（通过记录消息）它向 GCM 注册并获得了一个令牌。

然后当我将令牌放入我的测试应用程序并让它发送一条消息时，结果显示发送了 1 条消息，0 失败，0 有 ID 更改。

有时味精几乎立即出现，有时需要 20 分钟。周五，我的 2 条测试消息用时 15 和 20 分钟。我今天早上发送的前2个是立即发送的，下一个还没有出现-才10分钟...

我能做些什么来使交货时间始终如一地快吗？随机延迟 20 分钟几乎是不可接受的情况。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T09:53:43.960

我们遇到了同样的问题，但它因网络而异。我们认为这是家庭集线器路由器（维珍超级集线器）在五分钟不活动后断开连接。您可以通过每两分钟发送一条空的 GCM 消息来保持连接处于活动状态。

这是对我们所做工作的更深入解释：[https ://groups.google.com/d/msg/android-gcm/Y33c9ib54jY/YxnCkaPRHRQJ](https://groups.google.com/d/msg/android-gcm/Y33c9ib54jY/YxnCkaPRHRQJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T13:39:13.827

您不能保证快速交付，因为正如 CommonsWare 所指出的那样，GCM 到设备的连接性可能很差。然而，传送列车有两种可能的延迟：1）GCM 连接到手机（如前所述）和 2）实际从 GCM 服务器发出的消息的延迟。如果您在发送应用程序中将“time_to_live”参数设置为 0 秒，那么您至少可以测试延迟发生的位置。

值为 0 秒意味着消息将立即发送，如果发送不成功，消息将在 GCM 服务器上丢弃。对现实生活没有实用价值，但可以让您找出是送货列车的哪个部分造成了延误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-08T09:16:01.900

这确实是由Google Cloud Messaging 中**不切实际的心跳间隔造成的。**

这可能是 GCM 中最令人沮丧的错误。GCM 的工作原理是维护从 Android 设备到 Google 服务器的空闲套接字连接。这很棒，因为它几乎不消耗电池电量（与轮询相反），并且它允许在消息到达时立即唤醒设备。为确保连接保持活动状态，Android 将在移动连接上每 28 分钟发送一次心跳，在 WiFi 上每 15 分钟发送一次。如果心跳失败，则连接已终止，GCM 将重新建立它并尝试检索任何未决的推送通知。心跳间隔越高，消耗的电池越少，设备从睡眠中唤醒的次数就越少。

然而，这是有代价的：心跳间隔越长，识别断开的套接字连接所需的时间就越长。在部署 GCM 之前，谷歌没有在现实生活中对这些间隔进行足够彻底的测试。这些间隔的问题是由网络路由器和移动运营商引起的，他们在几分钟不活动后断开空闲套接字连接。通常，这在廉价的家用路由器中更为常见，其制造商决定了空闲套接字连接的最长寿命，并终止它以节省资源。这些路由器只能处理有限数量的并发连接，因此采取这种措施是为了防止过载。这会导致 GCM 套接字终止，并且当传递 GCM 消息时，它不会到达设备。设备只会在发送心跳的时间（0 到 28 分钟后）才意识到连接已断开，这会在某些情况下（例如，当消息对时间要求严格时）使推送通知变得无用。根据我的经验，大多数便宜的路由器会在大约 5 到 10 分钟不活动后终止空闲连接。

我写了一篇关于这个和其他 GCM 问题的完整文章：

[http://eladnava.com/google-cloud-messaging-extremely-unreliable/](http://eladnava.com/google-cloud-messaging-extremely-unreliable/)

**谷歌云消息传递的替代方案**

Pushy ( [https://pushy.me/](https://pushy.me/) ) 是一个独立的推送通知网关，完全独立于 GCM。它维护自己的后台套接字连接，就像 GCM 一样，以接收推送通知。底层协议是 MQTT，一种极其轻量级的发布/订阅协议，占用的网络带宽和电池非常少。

Pushy 的一个巨大优势在于，用于发送推送通知（从服务器）和注册设备以获取推送通知的代码实际上在 GCM 和 Pushy 之间是可互换的。这使得在实施 GCM 之后切换到 Pushy 变得非常容易，并且因为它的不稳定性而不得不放弃它。

（全面披露：我为自己的项目创建了 Pushy，并意识到许多应用程序将从这样的服务中受益）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-10T18:35:25.850

据报道，GCM 存在一个非常严重的问题，即保持活动心跳不那么可靠。因此，由于它仅每 15 分钟（超过 3G）或 28 分钟（通过 Wifi）发送一次，如果由于某种原因导致服务器连接断开，则可能需要很长时间才能恢复。

这些类型的恶作剧促使开发了一种不依赖第三方网络的解决方案，以向离线（后台）Android 应用程序提供可大规模扩展且可靠的推送通知。

[https://help.pubnub.com/entries/21720011-Can-my-Android-App-Receive-Messages-While-Inactive](https://help.pubnub.com/entries/21720011-Can-my-Android-App-Receive-Messages-While-Inactive)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:49:56.740

这件事对我很重要。

我已经在一秒计时器处理程序中设置了此代码，以每 2 分钟发送一条 GCM 消息。希望它能让事物保持活力

```
 if ((mOneSecondTick %120) == 0){
            // q 1 minute check when we got last call....
            long lDiff = System.currentTimeMillis() - GCMlastCall;
            if (PushAndroidActivity.GCMAvailable){
                Log.d("pushAndroidActivity",String.format("(mOneSecondTick %d",lDiff));
                if (lDiff > 122 * 1000){ // more than a minute
                    Intent intent = new Intent(StayInTouch.this,PushAndroidActivity.class);
                    2startActivity(intent);
                }else{ // every 2 minutes send out a gcm message...
                    asyncWebCall(String.format(AgeingLib.GCMTICKLE,androidid),0);
                    return; // only if it sends a tickle and all is well...
                }
            }else{
                Log.d("pushAndroidActivity",String.format("(mOneSecondTick mod60 no GCM on this device"));
            }
        } 
```

GCMlastCall 是最后一次收到消息，因此我们可以判断 gcm 是否停止。

工作了几天现在感觉还可以

# visual-studio-2010 - 我无法显示新的 XNA 项目模板

> ID：13016152
> 
> 赞同：0
> 
> 时间：2012-10-22T17:00:51.057
> 
> 标签：visual-studio-2010, xna, installation, wizard

我正在尝试从模板制作一个新的 XNA 项目。我已经安装了 xna 并拥有 Visual Studio Professional 2010 和 Visual C# Express 2010。我单击“新建项目”并查找与 XNA 或游戏窗口相关的任何内容或左侧的任何内容，但那里什么也没有。我已经重新安装了 XNA，但它还没有。如何让这些巫师出现？

# java - minOccurs="0" 表示 VB.NET 和 Java 中的 Long

> ID：13016155
> 
> 赞同：2
> 
> 时间：2012-10-22T17:01:07.687
> 
> 标签：java, vb.net, xsd

我有一个用 VB.NET 编写的 WebService，在其中，我有一个 Long 定义如下：

```
<s:element minOccurs="0" maxOccurs="1" name="clientId" type="s:long"/> 
```

现在，每当我从另一个 VB.NET 应用程序中调用此 WS 以及设置`clientId`var 时，我还必须设置`clientIdSpecified`为`True`- 这就是 .NET 的怪癖。但是，我的客户使用 Java，问题是 - 他们是否必须这样做并设置`clientIdSpecified`为`True`？

这个布尔值不是规范的一部分，所以如果他们确实需要设置它，我必须警告他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:07:09.773

如果您的客户端使用的是 java，只需给他们 xsd 文件就足够了，因为它可以编译成 java 类，在编组为 xml 之前提供验证。

需要注意的是，minOccurs=0 意味着它是可选的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:10:24.670

在 Java 方面，这种构造通常会被编译为类型`java.lang.Long`（包装类）而不是`long`（原始类型）的属性，使用`null`值来表示元素不存在的情况。

# jsf - p:dataTable 中的 h:selectOneMenu 未提交其值

> ID：13016159
> 
> 赞同：3
> 
> 时间：2012-10-22T17:01:17.737
> 
> 标签：jsf, datatable, primefaces

我对 selectOneMenu 和设置值有疑问。我有一个 Object SampleDesc，它有 ID、Text 和`List<SampleDescValues>`. 对于每个数据表行，文本是输出标签，选择一个菜单值是`List<SampleDescValues>`. XHTML：

```
 <h:panelGroup id="tables">
    <p:dataTable resizableColumns="true" 
             var="sampleDesc" id="SampleDescTable" rowIndexVar="rowIndex"
                     value="#{sampleBean.sampleDescList.list}" 
                     rendered="#{sampleBean.sampleDescList.list.size() gt 0}">
            <p:column>
                    <h:outputLabel value="#{sampleDesc.sampleDescText}"/>
                </p:column>
        <p:column>
            <h:selectOneMenu required="#{sampleBean.sampleDescList.list.size() gt 0}" converter="#{sampleDescValueConverter}" 
                                                         id="SampleDescValue" value="#{sampleBean.selectedSampleDescList.get(rowIndex)}">                                                         
                <f:selectItem itemLabel="Select One" itemValue="#{null}"/>
                            <f:selectItems value="#{sampleDesc.sampleDescValues}" var="sdv" 
                                       itemLabel="#{sdv.sampleDescValuesText}" itemValue="#{sdv}" />

                        </h:selectOneMenu>
                </p:column>    
        </p:dataTable>
</h:panelGroup> 
```

我有转换器设置并且它可以工作，因为我将它设置为单个 SampleDescValue 并且它设置了值。

问题是当我尝试使用数据库中的示例填充表单时，它只能设置一个下拉菜单，而选择菜单的数量可能是无限的

我将选择的值设置为`private List<SampleDescValue> selectedSampleDescList;`

当我尝试提交它什么都不做时，它在数据表未呈现时起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:07:48.080

您的菜单值错误：

```
<h:selectOneMenu value="#{sampleBean.selectedSampleDescList.get(rowIndex)}"> 
```

无法`set`对此 EL 表达式执行操作。

请改用大括号表示法：

```
<h:selectOneMenu value="#{sampleBean.selectedSampleDescList[rowIndex]}"> 
```

请注意，这需要一个非 null `selectedSampleDescList`。因此，请确保您已经`new ArrayList<>()`事先正确初始化了它。EL不会为你这样做。它只会使用`List#add(index, object)`方法设置列表项。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

**与具体问题无关**，这个表达式

```
#{sampleBean.sampleDescList.list.size() gt 0} 
```

可以简化如下

```
#{not empty sampleBean.sampleDescList.list} 
```

这在 the 的`required`属性中是不必要的，`<h:selectOneMenu>`因为它*总是*`true`会在那时进行评估。`required="true"`直接改用就好了。

# bash - 如何编写一个 shell 脚本程序来遍历我的所有 esql 文件，然后执行该文件以创建 exe 文件

> ID：13016160
> 
> 赞同：3
> 
> 时间：2012-10-22T17:01:18.170
> 
> 标签：bash, shell, embedded-sql

这就是我的意思：

```
ls -l *.ec 
```

对于找到的每个结果，我想一次编译一个。

例如，对于 $something.ec：

```
esql $something.ec -o $something 
```

`$something.ec`是原始文件

`$something`是目标exe文件。

我的问题是：如何将其放入循环中以遍历目录中的所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:28:47.013

我建议你编写一个简单的 Makefile：

```
INPUTS = $(wildcard *.ec)
all: $(INPUTS:.ec=)

%: %.ec
    esql $@ -o $< 
```

然后只要你想重新执行它们就简单地运行`make`（或强制执行）。`make -B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:13:44.957

您可以按如下方式使用 for 循环：

```
for file in *.ec
do
    esql "$file" -o "${file//.ec}"
done 
```

# mysql - 从表中选择 * 1 = 2

> ID：13016168
> 
> 赞同：4
> 
> 时间：2012-10-22T17:01:55.403
> 
> 标签：mysql, sql, database

查询：

```
Explain SELECT * FROM TABLE WHERE 1 = 2 
```

显示给定表的字段名称。谁能解释这种语法？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:03:43.350

你没有返回任何结果，因为`1 = 2`是假的。（没有与该`WHERE`子句匹配的记录，因此您只得到表标题，没有记录。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T17:04:56.253

好吧，既然 1 不等于 2，那么查询的结果就会是空的。即，对于任何可能的输出中没有行，表达式 1 = 2 是否为真。所以你得到的只是列标题（字段名称），没有实际的数据行......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T17:10:45.123

## EXPLAIN 是 MySQL 实用程序语句

该`EXPLAIN`语句可以用作获取有关 MySQL 如何执行语句的信息的一种方式。

当您在`SELECT`语句前加上关键字`EXPLAIN`时，MySQL 会显示来自优化器的有关查询执行计划的信息。也就是说，MySQL 解释了它将如何处理该语句，包括有关表如何连接以及以何种顺序连接的信息。

简而言之，EXPLAIN 语句用于调查 MySQL 是如何执行查询的。

您的语句生成以下输出 -

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  NULL    NULL    NULL    NULL    NULL    NULL    NULL    Impossible WHERE 
```

正如您在列下看到的，`Extra`它正在返回`Impossible WHERE`文本。这意味着 MySQL 已经确定它将导致零行。

同样，其他列将帮助您识别正在使用的索引和其他有用信息。

有关更多信息，请参阅 - [EXPLAIN 语法](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T17:58:10.183

查询将不会产生任何结果，因为 where 条件为假......如果 1、2 的引用是列标题并产生结果，则 1 = 2 的逻辑条件为假。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T17:05:54.457

`explain`用于查看查询的执行计划。如果您在查询的开头添加它，您可以看到哪些索引用于选择等等。

所以查询不会显示任何结果。如果您`explain`从语句中删除并执行， `select ...`那么您将获得查询结果。在您的情况下，这将不会有任何结果，因为`1=2`is never `true`。

见[解释](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T17:09:14.703

您正在返回一个空集（您在列中投影列名和数据，但 where 子句过滤所有内容，因此您只看到列名）。

你可以用更少的几个字符来实现同样的目标。

```
select top 0 * from TABLE 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-10-22T17:05:05.927

SELECT *(all tables) FROM TABLE(table name here is table) WHERE 1(table's name 1) (equals) = 2

例如，显示表中名为 1 的表等于 2 的所有表。

干杯。，

# objective-c - 可可 - 在 NSView 中绘制图像

> ID：13016173
> 
> 赞同：0
> 
> 时间：2012-10-22T17:02:17.453
> 
> 标签：objective-c, cocoa, nsview, nsimage

我很难理解为什么下面的代码不起作用，我想要实现的是一个图像显示在 NSView 的左上角，但什么都没有显示......

```
NSImage *map0 = [NSImage imageNamed:@"map0.png"];
NSRect rect = NSMakeRect(0, 0, 400, 400);
[map0 drawInRect:rect fromRect:NSZeroRect operation:NSCompositeSourceAtop fraction:1.0f];
[map drawRect:rect]; 
```

**编辑：**

`map`是我想将图像绘制到的 NSView

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:37:23.967

你从不`drawRect:`直接打电话。该例程具有 Cocoa 提供的各种先决条件，例如创建`CGContextRef`. 你实施`drawRect:`. 可可称之为。

您的`drawInRect:fromRect:operation:fraction:`调用应该放入`drawRect:`of 中`map`，它应该是 的子类`NSView`。这个特定问题通常用 a`NSImageView`而不是 custom更好地解决`NSView`，但如果绘图更复杂，那么 custom`NSView`是合适的。

# javascript - jQuery超大不显示幻灯片

> ID：13016175
> 
> 赞同：3
> 
> 时间：2012-10-22T17:02:22.883
> 
> 标签：javascript, jquery, supersized

我正在尝试使用 Supersized 在背景上制作一个简单的幻灯片，但是由于某种原因，它似乎只显示了一张幻灯片。

```
$.supersized({
        slideshow           :   1,
        autoplay            :   1,
        slide_interval      :   1000,
        transition          :   1,  // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
        transition_speed    :   1000,
        min_height          :   0,
        min_width           :   0,
        horizontal_center   :   1,
        fit_portrait        :   1,
        slides              :   images
    }) 
```

当我检查“图像”中的内容时，它返回一个包含 2 个对象的数组，但是当我检查源代码时，我可以看到它只显示一个图像，而它通常应该显示一个包含所有图像的“ul”。

![在此处输入图像描述](../Images/bf5a0e7259fa9a8ee0113551681d4cc2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T17:20:25.270

确保您正在加载适当的“超大”js 文件。`supersized.3.2.7.js`我相信在“幻灯片”文件夹中找到的内容与`supersized.core.3.2.1.js`位于“核心”文件夹中的内容存在差异。我认为“核心”不包括幻灯片功能。

# c# - Salt and MD5 in c#

> ID：13016179
> 
> 赞同：-4
> 
> 时间：2012-10-22T17:02:30.717
> 
> 标签：c#, php, winforms, encryption

So I have a website for my game

This is an exert of the php that I am using.

```
$Login = strtolower(trim($Login));
$Pass = strtolower(trim($Pass));
$Repass = strtolower(trim($Repass));

$Salt = $Login.$Pass;
$Salt = md5($Salt);
$Salt = "0x".$Salt; 
```

But now I am faced with an issue that I cant seem to work out. I need to be able to do this encryption through C# WinForms for a client side Launcher(Register, Play Game etc etc)

For the life of me I cant figure out how to make the same binary as it makes in php.

I have tried loads but just cant crack it.

Many thanks if you can help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:32:59.857

尽管您的示例代码混淆了实际问题，但我认为我有解决您实际问题的方法。

我在使用该方法时遇到了同样的问题，`md5()`不久前将一些 PHP 代码转换为 C#。这是我想出的：

```
private static string CalculateChecksum(string inputString)
{
    var md5 = new MD5CryptoServiceProvider();
    var hashbytes = md5.ComputeHash(Encoding.UTF8.GetBytes(inputString));
    var hashstring = "";
    foreach(var hashbyte in hashbytes)
        hashstring += hashbyte.ToString("x2");

    return hashstring;
} 
```

可能有一个更整洁的解决方案，但它对我有用，当时我很着急。

无论如何，它给你的字符串就像你对's`A48EDF06 ...`所期望的那样`php``md5()`

# php - How can I add a jqGrid custom error message?

> ID：13016181
> 
> 赞同：1
> 
> 时间：2012-10-22T17:02:33.837
> 
> 标签：php, jquery, codeigniter, jqgrid

I´m using CodeIgniter and JQuery Grid. I have seen the responses that you have been made here about this topic but I haven't been able to solve my problem with none of them.
The fact is that I have a jqGrid and I need to show the the dialog of insert several types of error that the database server returns.

For example, in one case I have this error:

> Duplicate entry '18-2-1-2012-10-25' for key 'user_store_turn_index'

I need to get this and to show a custom message instead of the current:

> error Status: 'Internal Server Error'. Error code: 500

I've tried with the `aftersubmit` event. I've read the docs and seen the available examples but nothing works.

Inside my JavaScript code I have the function that deals with the after submit event for jqGrid:

```
afterSubmit : function(response, postdata){ 
    test_validate
           return false;
    },
} 
```

Then, I write the function that should get the responses for the after submit event:

```
function test_validate(response,postdata) {
    alert('test');
    if(response.responseText == '') {
        success = true;
    } else {
        success = false;
    }
    return [success,response.responseText]
} 
```

But nothing happens... Here is the almost complete jquery grid code

```
$(document).ready(function() {

           var grid = jQuery("#newapi_1351189510").jqGrid({
                    ajaxGridOptions : {type:"POST"},
                      jsonReader : {
                      root:"data",
                      repeatitems: false
                   },
                    rowList:[10,20,30],
                    viewrecords: true
                   ,url:'http://localhost/sp/index.php/turn_open/getData'
,editurl:'http://localhost/sp/index.php/turn_open/setData'
,datatype:'json'
,rowNum:'20'
,width:'600'
,height:'300'
,pager: '#pnewapi_1351189510'
,caption:'Apertura de caja'
,colModel:[
{name:'username',index:'username',label:'Usuario' ,align:'center',width:180,editable:false  }
,{name:'TurnName',index:'TurnName',label:'Turno' ,align:'center',width:180,editable:false  }
,{name:'date',index:'date',label:'Fecha' ,width:100,editable:true,edittype:'text',editrules:{required:false,date:true}  ,editoptions: {size: 10, maxlengh: 10,dataInit: function(element) { $(element).datepicker({dateFormat: 'yy-mm-dd',changeMonth: true,changeYear: true,yearRange: '1982:2022'})}},searchoptions: {size: 10, maxlengh: 10,dataInit: function(element) { $(element).datepicker({dateFormat: 'yy-mm-dd',changeMonth: true,changeYear: true,yearRange: '1982:2022'})}}}

]       })
            jQuery("#newapi_1351189510")
            .jqGrid('navGrid',
            '#pnewapi_1351189510',
            {view:false,
            edit:'1',
            add:'1',
            del:'1',
            close:true,
            delfunc: null
        },
         afterSubmit : function(response, postdata)
          { test_validate
           return false;
         },
        }, 
        {mtype: 'POST'} /*delete options*/,
        ).navButtonAdd('#pnewapi_1351189510',
                { caption:'', buttonicon:'ui-icon-extlink', onClickButton:dtgOpenExportdata, position: 'last', title:'Export data', cursor: 'pointer'}
                );
        ;

             function test_validate(response,postdata){
             alert('test');
               if(response.responseText == ''){
                 success = true;
                }else{
                success = false;
                }
                return [success,response.responseText]
             }

        }); 
```

# css - CSS 中的相对定位在 Safari 和 Firefox 中完全不同？

> ID：13016187
> 
> 赞同：1
> 
> 时间：2012-10-22T17:02:47.643
> 
> 标签：css, forms, radio-button, css-position

我是 CSS 新手，一直在尝试创建一个带有与文本字段旁边对齐的单选按钮的 Web 表单。但是，在 Firefox 中，单选框看起来不错，但是当我在 Safari 中检查时，单选框位于文本字段的中间。

CSS 看起来像这样：

```
 input#answers
{
     display: block;
    height: 31px;
    left: 87px;
    position: relative;
    top: 0px;
    width: 350px;
}

input[type="radio"]
{
    display: inline- block;
    height: 20px;
    left: 249px;
    position: relative;
    top: -30px;
    vertical-align: middle;
} 
```

和这样的HTML：

```
 <form id="quizCreator" name="quizCreator" method="post" action="quiz.maker.php">
    <label><span><img src="images/quizcreatorText.ques.png" hspace="79px" vspace="70px" class="titles"  /></span>      <br />
      <input type="text" name="question" id="question" />
    </label>
    <label><img src="images/quizcreatorText.ans.png" hspace="79px" vspace="70px" class="titles" id="ans" />      <br />
      <input type="hidden" name="creator" value="myform" />
      <br />
      <input type="text" name="answer1" id="answers" />
    </label>
    <label>
      <input type="radio" name="radio" id="radio1" value="radio1" />
    </label>

    <label>
      <input type="text" name="answer2" id="answers" />
    </label>
    <label>
      <input type="radio" name="radio" id="radio3" value="radio2" />
    </label>

    <label>
      <input type="text" name="answer3" id="answers" />
  </label>  
    <label>
     <input name="radio" type="radio" class="radio" id="radio3" value="radio3" />
  </label>  

    <label>
      <input type="text" name="answer4" id="answers" />
    </label>
    <label>
      <input name="radio" type="radio" id="radio4" value="radio4" />
    </label>
    <span><input  type="image" src="images/quiznameText.next.png"  name="nextPage" id="nextPage"  class="nxtbutton" /></span>
</form> 
```

我尝试过使用相对定位和边距，但是虽然它解决了 Safari 中的问题，但 Firefox 看起来是错误的。有没有办法让它们都像我想要的那样使用一组代码工作？（那么 MSIE 呢？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:23:46.653

您不应该为此使用相对定位。

正确的结构是这样的（不确定您是否想要之前或之后的文本）：

```
<div class="answers">
<ul>
    <li><label>your text</label><input type="radio" /></li>
    ...repeat...
</ul>
</div> 
```

CSS：

```
.answers ul, .answers li {
    list-style-type:none;
    margin:0;
    padding:0;
}

.answers li {
    clear:both
}

.answers label {
    display:block;
    float:left;
    width:100px;
}

.answers input {
     display:block;
     float:left;
} 
```

# plugins - 支持表单的灯箱插件

> ID：13016188
> 
> 赞同：0
> 
> 时间：2012-10-22T17:02:51.310
> 
> 标签：plugins, spring-mvc, lightbox

我正在开发一个 Spring MVC 应用程序，我正在寻找一个支持表单的 Lightbox 插件，这意味着我可以在其中调用我的表单，它将像图片一样显示。有没有人做过这个，请指教。

我还想知道在使用 MVC 设计模式时是否对灯箱有任何特定的调用，或者对表单 url 的简单调用是否有效。

# linux - 你能用 Linux shell 在内存中加载树结构吗？

> ID：13016192
> 
> 赞同：3
> 
> 时间：2012-10-22T17:02:58.887
> 
> 标签：linux, shell

我想用这样的 Linux shell 脚本创建一个应用程序——但能做到吗？

此应用程序将创建一个包含数据的树。树应该加载到内存中。树（加载在内存中）可以从任何其他外部 Linux 脚本中读取。

*   是否可以使用 Linux shell 来实现？
*   如果是，你该怎么做？
*   有什么简单的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:23:14.477

问题中存在大量误解。

每个进程通常都有自己的内存；没有简单的方法可以将“树”加载到一个进程的内存中并使其可用于所有其他进程。您可能会设计一个相关程序系统，该系统知道包含树的共享内存段（不知何故 - 那里有一个问题），但仅此而已。它们是特殊程序，而不是一般的 shell 脚本。这不符合您的“任何其他外部 Linux 脚本”要求。

您正在寻找的东西在 Linux shell 基础架构中根本不可用。这回答了你的第一个问题；其他两个没有实际意义，因为第一个的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:23:54.927

我认为没有办法做到这一点，就好像你想保留以下所有要求：

*   将其构建为 shell 脚本
*   在记忆中
*   可跨终端/从外部脚本使用

您将不得不放弃至少一项要求：

1.  放弃 shell 脚本 req - 在 C 中构建它以作为 Linux 进程运行。我只明白这一点，说这不是微不足道的

2.  放弃内存请求 - 您可以序列化树并将数据保存在临时文件中。只要文件很小并且性能瓶颈不在访问树周围，这就会起作用。好消息是您可以跨终端/来自外部脚本使用数据

3.  放弃外部脚本的可用性 req - 从技术上讲，您可以构建一个脚本并通过采购它来运行它，以将表示树的许多（阅读：一堆）变量添加到您当前的 shell 会话中。

这些替代方案都不是很好，但如果你不得不选择一个，2 号可能是问题最少的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:56:31.353

这里有一个相关的讨论。他们使用共享内存设备**/dev/shm**，而且表面上它适用于多个用户。至少，值得一试：

[http://www.linuxquestions.org/questions/linux-newbie-8/bash-is-it-possible-to-write-to-memory-rather-than-a-file-671891/](http://www.linuxquestions.org/questions/linux-newbie-8/bash-is-it-possible-to-write-to-memory-rather-than-a-file-671891/)

编辑：刚刚在 Ubuntu 上与两个用户一起尝试过 - 看起来像一个普通目录，并且**真正**适用于正确的 chmod。

也可以看看：

[http://www.cyberciti.biz/tips/what-is-devshm-and-its-practical-usage.html](http://www.cyberciti.biz/tips/what-is-devshm-and-its-practical-usage.html)

# django - Django 上传 SVG 文件

> ID：13016193
> 
> 赞同：1
> 
> 时间：2012-10-22T17:03:00.230
> 
> 标签：django, svg

我目前正在使用 ImageField 将图像上传到我的网站。我今天发现 ImageField 不允许上传 SVG。原因是 SVG 文件存在潜在的安全问题，SVG 文件可能包含恶意 javascript。我可以使用 FileField，但我想知道是否有使用 ImageField 的方法，或者如果我使用 FileField，如何确保 SVG 文件是安全的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:16:39.233

您可能会在文件上编写消毒剂，但这可能需要一些工作。看看Sanitizing [SVG](http://golem.ph.utexas.edu/~distler/blog/archives/001482.html "消毒 SVG")和[html5lib 中的白名单](https://github.com/clones/html5lib/blob/master/python/src/html5lib/sanitizer.py)

# wpf - 在我直接运行文件之前，xbap 找不到它的 DLL

> ID：13016194
> 
> 赞同：0
> 
> 时间：2012-10-22T17:03:09.733
> 
> 标签：wpf, iis, deployment, xbap

最近，当我部署我的 xbap 时，如果我浏览到 IIS 托管它的 url，我会在它试图从 Application Files 文件夹下载的一些 DLL 上看到“找不到文件”http 错误消息。

这将一直是个问题，直到我在资源管理器中双击 .xbap 文件以启动它。然后我可以通过 http:// 浏览到 xbap 没有任何问题！

我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:22:14.317

发现这个：

可能是 IIS 未配置为服务 *.DLL，这是默认行为。Visual Studio 发布向导中有一个方便的功能，可以使用 *.deploy 重命名所有已发布的文件，因此您只需向 IIS 注册一种 MIME 类型。它在项目属性窗口->发布->选项->“使用 .deploy 文件扩展名重命名所有文件”下

# c# - 获取所有图片并将其保存到文件

> ID：13016196
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:03:16.757
> 
> 标签：c#, wpf, image, printscreen, uniformgrid

我有一个 UniformGrid，其中包含我拍摄的所有视频缩略图（它们都是 System.Windows.Control.Image）。我的目标是在单击按钮后保存所有缩略图的 jpg。有没有办法从 UbiformGrid 中获取位图图像或其他东西？我正在将 C# 与 WPF 一起使用。

**编辑：**就像截图一样。但我不想窗口边框，只有网格内容。

**Edit2：**我终于找到了解决方案。谢谢您的帮助。

```
RenderTargetBitmap renderTarget = new RenderTargetBitmap((int)ThumbnailPanel.Width, 

(int)ThumbnailPanel.Height, 96, 96, PixelFormats.Pbgra32);
VisualBrush sourceBrush = new VisualBrush(ThumbnailPanel);
DrawingVisual drawingVisual = new DrawingVisual();
DrawingContext drawingContext = drawingVisual.RenderOpen();
using (drawingContext)
{
    drawingContext.DrawRectangle(sourceBrush, null, new Rect(new Point(0, 0), new Point(ThumbnailPanel.Width, ThumbnailPanel.Height)));
}
renderTarget.Render(drawingVisual);
JpegBitmapEncoder jpgEncoder = new JpegBitmapEncoder();
jpgEncoder.QualityLevel = 80;
jpgEncoder.Frames.Add(BitmapFrame.Create(renderTarget));
Byte[] _imageArray;
using (MemoryStream outputStream = new MemoryStream())
{
    jpgEncoder.Save(outputStream);
    _imageArray = outputStream.ToArray();

}
FileStream fileStream = new FileStream(@"myThumbnails.jpg", FileMode.Create, FileAccess.ReadWrite);
BinaryWriter binaryWriter = new BinaryWriter(fileStream);
binaryWriter.Write(_imageArray);
binaryWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:08:38.730

`for`当然，只需使用or遍历您的图像集合`foreach`并使用命名空间中的[`Image.GetThumbnailImage`](http://msdn.microsoft.com/en-us/library/system.drawing.image.getthumbnailimage%28v=vs.100%29.aspx)方法`System.Drawing`来创建缩略图……就这么简单。

例如：

```
foreach (var img in myImages)
{
  var thumb = image.GetThumbnailImage(thumbnailSize.Width, thumbnailSize.Height, null, IntPtr.Zero);
  //Do something with the thumbnail
  thumb.Save(output)
} 
```

# html - Safari 中受密码保护的目录中的 HTML5 视频

> ID：13016204
> 
> 赞同：1
> 
> 时间：2012-10-22T17:04:01.680
> 
> 标签：html, video, safari, cross-browser

有没有人遇到过类似的问题，并找到了解决方案？

我在受密码保护的目录中有一个页面，我想在其上显示视频，使用 HTML5 视频标签（使用 video.js，视频标签是正确的，并且包含所有后备格式，因此没有问题）。问题在于，当视频文件位于同一个 PW 保护目录中时，Safari 似乎不会播放视频文件，而所有其他浏览器都可以。一旦我将 vid 文件移出受 PW 保护的目录，它就可以正常播放。

有什么想法/解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T01:06:04.023

我有一个非常相似的问题，并在这里找到了答案：

[https://discussions.apple.com/thread/2448777?start=0&tstart=0](https://discussions.apple.com/thread/2448777?start=0&tstart=0)

> 您的问题是 Safari、Quicktime X 和 HTTP 基本授权的身份验证错误。如果您选中该框以记住钥匙串中的密码，则电影会在 Safari 中播放。

一旦我让 Mac OS 的钥匙串记住了 Safari 中的密码，我的 MP4 视频就开始在我受密码保护的目录中播放！

# associations - ThinkingSphinx：过滤关联的布尔列

> ID：13016210
> 
> 赞同：0
> 
> 时间：2012-10-22T17:04:24.897
> 
> 标签：associations, ruby-on-rails-3.2, sphinx, thinking-sphinx

我看不出为什么这不应该起作用，但我没有得到任何结果。A`Contact`有很多`OrganizationContacts`。并且`OrganizationContact`有一个布尔字段`primary`。我在这个字段上添加了一个过滤器，如下所示。

```
class Contact < ActiveRecord::Base

  has_many :organization_contacts, :dependent => :destroy

  define_index do
    has organization_contacts(:primary), :as => :primary_contacts

    set_property :delta => true
  end
end 
```

在调试会话中，我可以看到我确实有一个`Contact`被`OrganizationContact`列为`primary`：

```
(rdb:1) p Contact.first.organization_contacts.first.primary
true 
```

但是，如果我`ThinkingSphinx`使用该过滤器进行搜索，我什么也得不到：

```
(rdb:1) p Contact.search :with => { :primary_contacts => true }
[] 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:22:29.147

蟋蟀啁啾。唉，我们想出了一个解决办法。

```
class Contact < ActiveRecord::Base

  has_many :primary_organization_contacts, :class_name => "OrganizationContact", :foreign_key => "contact_id", :conditions => { :primary => true }
  has_many :organization_contacts, :dependent => :destroy

  define_index do
    has primary_organization_contacts(:id), :as => :primary_organization_contacts

    set_property :delta => true
  end
end 
```

寻找它们是有趣的部分。如果我想要没有主要组织联系人的记录：

```
Contact.search :with { :primary_organization_contacts => 0 } 
```

如果我想要至少有一个主要组织联系人的记录：

```
Contact.search :without { :primary_organization_contacts => 0 } 
```

它让我感到肮脏和困惑，但它确实起到了作用。

# android - ADT 没有出现在 Eclipse 中

> ID：13016213
> 
> 赞同：1
> 
> 时间：2012-10-22T17:04:33.567
> 
> 标签：android, eclipse, adt

我通过了[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)关于“下载 ADT 插件”的所有步骤，但是当 Eclipes 重新启动时，我没有收到“欢迎使用 Android 开发”消息. 在 NEW 菜单下我也没有得到任何“新的 android 应用程序”。我还尝试通过“自定义透视图”检查菜单可见性，但找不到任何 Android 菜单。有什么建议么？

谢谢， 埃雷兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:18:06.020

```
你好！
您是否配置了 Android SDK 位置？
窗口 -> 首选项 -> Android -> SDK 位置

```

# android - 如何以编程方式设置按钮的权重

> ID：13016216
> 
> 赞同：32
> 
> 时间：2012-10-22T17:04:46.130
> 
> 标签：android

我需要通过 Java 代码为我的 Android 应用程序实现 Dialog，所以我不能使用 XML。

我有根`LinearLayout`，我在其中实现范围搜索栏，然后我`LinearLayout`在根布局下有另一个，水平方向，我想在同一行中添加两个按钮。所以我需要将重量设置为 1，将宽度设置为 ，将`FILL_PARENT`高度设置为`WRAP_CONTENT`。

我如何使用 Java 代码做到这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-22T17:06:08.340

```
LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
p.weight = 1;

rangeSeekBar.setLayoutParams(p); 
```

我不确定您要在哪个视图上设置布局参数。我只是假设 rangeSeekbar 来展示一个例子。如果需要，请更改。

使用布局参数时，请始终使用根的参数类型。

前任。如果你有一个`View`你想在一个`RelativeLayout`使用中应用参数`RelativeLayout.LayoutParams`..

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-22T17:08:59.280

您可以将其作为 LinearLayout.LayoutParams 构造函数的一部分传递：您的意思是 wrap_content 吗？

```
LayoutParams param = new LinearLayout.LayoutParams(
                         LayoutParams.MATCH_PARENT,
                         LayoutParams.WRAP_CONTENT, 1.0f); 
```

1.0f 是重量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:11:59.427

不使用 XML 是必需的吗？如果没有，您总是可以在 XML 中构建您的布局，然后`LayoutInflater`在运行时使用 a 来构建您的视图层次结构并将其传递给`setView()`您的对话框。

例如：

```
LayoutInflater inflater = LayoutInflater.from(getActivity());
View v = inflater.inflate(R.layout.my_dialog_layout, null);

AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setView(v); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T12:54:50.920

更简单的方法：

```
public static void setLayoutWeight(View view , float weight)
{
    ((LinearLayout.LayoutParams) view.getLayoutParams()).weight = weight;
    view.requestLayout();
} 
```

# php - 如何获取 div id 中的文本

> ID：13016218
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:04:50.060
> 
> 标签：php, javascript, jquery, html

嗨，我是这个网站的新手，我试图在我的论坛中获得一个标题，而不是在论坛中再次粘贴它 < div class="titleBar" >

所以基本上我需要的是一些代码，例如，可以获取该 div 中的内容

[http://desiztv.com/index.php?threads/watch-colors-live-online-for-free.68/](http://desiztv.com/index.php?threads/watch-colors-live-online-for-free.68/)

标题是“免费在线观看颜色直播”我需要一些代码，我将在帖子中发布，它会自己获得标题，我可以在每个帖子中做到这一点，请帮助我谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:08:01.087

You could simply store the text value in a variable to use wherever you want...

```
<div id="mainTitle>Watch Colors Live Online For Free</div> 
```

Using jQuery and JavaScript, we initialize a new variable called `title`.

```
var title = ''; 
```

Now as soon as your text has been inserted into your `#mainTitle` div element, you can retrieve the text content of that div using this -

```
title = $("#mainTitle").text(); 
```

Your `title` variable is then available for you to use anywhere you want to copy that text -

```
$("#someElement, #anotherElement, #yetAnotherElement").text(title); 
```

All three elements -

```
<div id="someElement">Watch Colors Live Online For Free</div>
<div id="anotherElement">Watch Colors Live Online For Free</div>
<div id="yetAnotherElement">Watch Colors Live Online For Free</div> 
```

will now contain the same text as the first `#mainTitle` element.

# c# - Call dynamic methods using reflection in C#

> ID：13016224
> 
> 赞同：3
> 
> 时间：2012-10-22T17:05:04.393
> 
> 标签：c#, dynamic, reflection

I have a DynamicObject-based class that implements an interface dynamically (via TryGet* and TryInvoke*). I want to call the methods that it implements using reflection. The problem is that it throws a TargetException (Object does not match target type).

Like I said, it's dynamic, so it forwards the calls via a series of connections as text to another program, which then calls the destination method using reflection. It is basically a proxy class. The method names are known at compile time (because of the interface), but are called externally.

```
typeof(ITelescope).GetMethod(Console.ReadLine()).Invoke(prox,null); 
```

ITelescope is the interface, `prox` is the dynamic object.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:07:43.960

Unfortunately, dynamically defined methods are not available via reflection. Part of this is due to the fact that they are truly dynamic - you could have a dynamic object where ANY method was valid, so there is no way for reflection to work properly in that scenario. (ie: what would `GetMethods()` return?)

If the object is a dynamic object, the best option is usually to just assign it to a `dynamic`, and use the dynamic binding to get your method call:

```
dynamic yourObj = prox;
yourObj.Unpark(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T17:35:41.980

If your trying to do something a little more meta than just using the dynamic keyword, you might be interested in a framework I wrote ImpromptuInterface (apache licensed, can be found in [nuget](http://nuget.org)).

Since it looks like you have an interface that matches up with your dynamic object, you can use Impromptu to [wrap your dynamic object with an interface](http://code.google.com/p/impromptu-interface/wiki/UsageBasic?tm=6) impromptu will dynamically emit an object that statically has an interface and will forward calls from that interface to a dynamic object using the dlr.

```
ITelescope iprox = Impromptu.ActLike(prox);
prox.Unpark(); 
```

Or if you just want to call a method of a dynamic object by a string name, similar to reflection, it also has a bunch of [reflection like methods](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding), that dynamically invoke dlr calls. It is less efficient than the interface way, but more efficient than reflection.

```
Impromptu.InvokeMember(prox,"Unpark"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T18:39:58.430

Although you can not invoke a dynamic method with reflection, you can invoke *TryGet.../TryInvoke...* methods of DynamicObject which in turn execute your dynamic method...

```
dynamic obj = new MyDyn();
Console.WriteLine(obj.Text);

string methodName = "YourDynamicMethod";                    

var p1 = new ParameterModifier(2);
p1[0] = false; p1[1] = true;

var args = new object[] { new MemberBinder(methodName, true), null };

var res = typeof(DynamicObject).InvokeMember(
    "TryGetMember",
    BindingFlags.Instance | BindingFlags.InvokeMethod | BindingFlags.Public,
    null,
    obj,
    args,
    new ParameterModifier[] { p1 },
    null,
    null);

var result = args[1]; 
```

* * *

```
public class MyDyn : DynamicObject
{
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = "#" + binder.Name + "#";
        return true;
    }
}

public class MemberBinder : GetMemberBinder
{
    public MemberBinder(string name, bool ignoreCase) : base(name, ignoreCase)
    {
    }

    public override DynamicMetaObject FallbackGetMember(DynamicMetaObject target, DynamicMetaObject errorSuggestion)
    {
        throw new NotImplementedException();
    }
} 
```

# c# - 如何按字母分组并输入相同的字母大小

> ID：13016227
> 
> 赞同：3
> 
> 时间：2012-10-22T17:05:11.090
> 
> 标签：c#, linq

我有一个 LINQ 查询来按单词的第一个字母对元素进行分组

```
var res = from sign in all
          group sign by sign.first_letter into grp
          select grp; 
```

但是当我有`apple`and时`August`，我会得到两组。组`a`和组`A`。如何将它们放在同一组中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:09:36.800

[您可以使用Char.ToLower](http://msdn.microsoft.com/en-us/library/hhef7hhe.aspx)或[String.ToLower](http://msdn.microsoft.com/en-us/library/e78f86at.aspx)按小写字母分组，具体取决于类型：

```
var res = from sign in all 
          group sign by Char.ToLower(sign.first_letter) 
          into grp 
          select grp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:11:36.377

这个怎么样（按`lowercase`字母分组） -

```
var res = from sign in all group sign by sign.first_letter.ToLower()
               into grp select grp; 
```

# ruby - 如何查看多维哈希是否在 ruby 中具有值？

> ID：13016232
> 
> 赞同：4
> 
> 时间：2012-10-22T17:05:30.240
> 
> 标签：ruby, hash

目前我正在做以下事情，但我相信一定有更好的方法：

```
def birthday_defined?(map)
    map && map[:extra] && map[:extra][:raw_info] && map[:extra][:raw_info][:birthday]
end 
```

可能存在仅`map[:extra]`定义的情况，然后如果我不使用上面检查的代码，我最终会得到 Nil 异常错误原因`map[:extra][:raw_info]`不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:17:26.690

我有两种方法。两者都有相同的代码，但略有不同：

```
# Method 1

def birthday_defined?(map)     
    map[:extra][:raw_info][:birthday] rescue nil # rescues current line
end

# Method 2

def birthday_defined?(map)     
    map[:extra][:raw_info][:birthday]
rescue # rescues whole method
    nil
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:40:17.263

如果您使用的是 Rails，那么您可以使用[`try`](http://api.rubyonrails.org/classes/Object.html#method-i-try)(and [`NilClass#try`](http://api.rubyonrails.org/classes/NilClass.html#method-i-try))：

```
value = map.try(:[], :extra).try(:[], :raw_info).try(:[], :birthday) 
```

这看起来有点重复：它只是一遍又一遍地做同样的事情，同时将一个步骤的结果提供给下一步。该代码模式意味着我们有一个隐藏的注入：

```
value = [:extra, :raw_info, :birthday].inject(map) { |h, k| h.try(:[], k) } 
```

这种方法很好地推广到`map`您想到的任何路径：

```
path  = [ :some, :path, :of, :keys, :we, :care, :about ]
value = path.inject(map) { |h, k| h.try(:[], k) } 
```

然后你可以看看`value.nil?`。

当然，如果你不使用 Rails，那么你需要一个替代品，`try`但这并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:12:59.607

使用开始/救援块。

```
begin
  map[:extra][:raw_info][:birthday]
rescue Exception => e
  'No birthday! =('
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:13:07.890

这是惯用的为什么要这样做。是的，它可能有点麻烦。

如果你想扩展`Hash`一点，你可以做一些很酷的东西，比如关键路径。请参阅[使用点分路径键字符串访问 Ruby 哈希](https://stackoverflow.com/questions/7139471/transform-a-ruby-hash-into-a-dotted-path-key-string)

```
def birthday_defined?
  map.dig('extra.raw_info.birthday')
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T18:29:14.000

这有点hacky，但它会起作用：

```
def birthday_defined?(map)
    map.to_s[":birthday"]
end 
```

如果`map`包含`:birthday`，那么它将返回将`true`在条件语句中评估为的字符串，而如果它不包含`:birthday`，它将返回`nil`。

**注意：**这假设密钥`:birthday`不会出现在`map`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T20:18:26.317

这应该适合你：

```
def birthday_defined?(map)
  map
  .tap{|x| (x[:extra] if x)
  .tap{|x| (x[:raw_info] if x)
  .tap{|x| (x[:birthday] if x)
  .tap{|x| return x}}}}
end 
```

# jquery - Gravity Forms jQuery 没有周末

> ID：13016233
> 
> 赞同：4
> 
> 时间：2012-10-22T17:05:39.920
> 
> 标签：jquery, wordpress, gravity

我在 Gravity Forms 中使用了 gform_post_render 函数来创建自定义日期选择器，使用 minDate 选项提前选择 1 天：

[http://www.gravityhelp.com/documentation/page/Gform_post_render](http://www.gravityhelp.com/documentation/page/Gform_post_render)

有没有办法可以排除周末？我只希望用户能够提前一天选择工作日。我尝试过使用，`beforeShowDay: $.datepicker.noWeekends`但这似乎与`minDate`

这是我的表格：[http ://www.discountdumpsters.com/shop/30-yard-dumpster/](http://www.discountdumpsters.com/shop/30-yard-dumpster/)

这是我的代码：

```
<script type="text/javascript">
jQuery(document).bind('gform_post_render', function(){
    // destroy default Gravity Form datepicker
    jQuery("#input_1_1").datepicker('destroy');
    // create new custom datepicker
    jQuery("#input_1_1").datepicker({ defaultDate: '+1d', minDate: '+1d',     gotoCurrent: true, prevText: '', showOn: 'both', buttonImage: 'http://www.discountdumpsters.com/wp-content/plugins/gravityforms/images/calendar.png',    buttonImageOnly: true });
});
</script> 
```

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:23:13.123

我认为您必须将脚本排入页脚而不是头部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:07:04.607

实际上我已经在外部 js 文件上使用了您的代码，即使使用 noweekends 声明它也可以正常工作

```
jQuery(document).bind('gform_post_render', function(){
// destroy default Gravity Form datepicker
jQuery(".datepicker").datepicker('destroy');
// create new custom datepicker
jQuery(".datepicker").datepicker({ 
    defaultDate: '+1d', 
    minDate: '+1d',  
    gotoCurrent: true, 
    prevText: '', 
    showOn: 'both', 
    buttonImage: '/wp-content/themes/teloaggiustoio/images/calendar_icon.png',    
    buttonImageOnly: true,  
    beforeShowDay: $.datepicker.noWeekends

}); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T19:33:42.617

意识到我从来没有回答过这个问题。这是对我有用的最终代码：

```
jQuery(document).bind('gform_post_render', function(){
    // destroy default Gravity Form datepicker
    jQuery("#input_1_1").datepicker('destroy');
    // create new custom datepicker
    var oneWorkingDays = new Date();
    var adjustments = [0, 1, 1, 1, 1, 1, 0]; // Offsets by day of the week
    oneWorkingDays.setDate(oneWorkingDays.getDate() + 1 + adjustments[oneWorkingDays.getDay()]);
    jQuery("#input_1_1").datepicker({ beforeShowDay: jQuery.datepicker.noWeekends, minDate: '+1d', gotoCurrent: true, prevText: '', showOn: 'both', buttonImage: '/wp-content/plugins/gravityforms/images/calendar.png', buttonImageOnly: true });
}); 
```

# javascript - || 的使用 {} 在 JavaScript 中

> ID：13016235
> 
> 赞同：18
> 
> 时间：2012-10-22T17:05:42.163
> 
> 标签：javascript

我在 Javascript 中看到了这样的内容：

```
 function name (secret) {
          secret = secret || {}; 
```

我在任何地方都找不到究竟是什么意思**秘密=秘密|| {};**

这是否意味着使用传递的参数或对象的值创建全局变量？

你什么时候使用它？什么时候没有参数通过？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T17:06:51.277

## 这是什么意思

如果变量`secret`是假*的（以下之一*）：

*   `false`
*   `0`
*   `''`（空字符串）
*   `null`
*   `undefined`
*   `NaN`

..然后将其设置为`{}`（一个空对象 - 它与 相同`new Object()`）。

* * *

## 替代代码

也可以这样写：

```
if (!secret) secret = {}; 
```

但由于它更长，大多数人更喜欢上面的。

* * *

## 为什么？

此解决方案很有用，因为 javascript 没有默认函数参数。

例如，PHP 中的示例可能如下所示：

```
<?php
    function foo($bar = 'default') {
        echo $bar;
    }
?> 
```

在 JS 中*可能*是

```
function foo(bar) {
    bar = bar || 'default';
    console.log(bar);
}
foo(); //default
foo(NaN); //default
foo(undefined); //default
foo(null); //default
foo(false); //default
foo(0); //default
foo(''); //default
foo('something'); //something
foo(12); //12
foo(1.2); //1.2 
```

* * *

## 如果我*只想*设置默认值，如果没有设置其他内容怎么办？

如果你**只想**检查没有值（没有假值），那么你可以使用[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)JS 中的函数：

```
function foo(bar) {
    if (typeof bar == 'undefined') bar = 'default';
    console.log(bar);
}
foo(); //default
foo(undefined); //default
foo(NaN); //NaN
foo(null); //null
foo(false); //false
foo(0); //0
foo(''); //(empty string)
foo('something'); //something
foo(12); //12
foo(1.2); //1.2 
```

# asp.net - 如何从 Gridview 列中获取值

> ID：13016237
> 
> 赞同：0
> 
> 时间：2012-10-22T17:05:47.607
> 
> 标签：asp.net, gridview

我有一个可编辑的 GridView，它通过电子邮件将其内容发送给所有公司。Gridview 的第一行包含公司名称（每行只有一个名称）。我想根据第一行中的公司名称将 Gridview 通过电子邮件发送到特定的电子邮件地址。例如 - 如果第一行等于 companyname1，则将电子邮件发送到 company one；如果第一行等于公司二，则将电子邮件发送给公司二。我尝试了以下操作：

//C# - 按钮后面的代码片段

```
foreach (GridView item in gvCompanies.Rows)
        {
            if (item.SelectedRow.Cells[1].Text == "company1")
            {
                txtEmailAddresses.Text = "company1@gmail.com";
            }
            else if (item.SelectedRow.Cells[1].Text == "company2")
            {
                txtEmailAddresses.Text = "company2.com";
            }

            else if (item.SelectedRow.Cells[1].Text == "company3")
            {
                txtEmailAddresses.Text = "company3@aol.com";
            }

            else if (item.SelectedRow.Cells[1].Text == "company4")
            {
                txtEmailAddresses.Text = "company@aol.com";
            }
        } 
```

...有人可以就这里做错了什么提供一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:55:37.550

Try Something like this...

```
protected void gvCompanies_SelectedIndexChanged(object sender, EventArgs e)
{
 //for (int i = 0; i < gvCompanies.Rows.Count; i++)
 //       {
            if (gvCompanies.SelectedIndex == i)
            {
                String compName = gvCompanies.Rows[i].Cells[1].Text; //Gets the data cell value from the grid to string
                if(compName == "company1")
                {
                txtEmailAddresses.Text = "company1@gmail.com";
                }
                else if(compName == "company2")
                {
                txtEmailAddresses.Text = "company2@gmail.com";
                }
                ........and so on
            }
      // }
} 
```

You need to set the folowing 2 properties of gridview.

1] `AutoGenerateSelectButton="true"` and
2] `onselectedindexchanged="GridView1_SelectedIndexChanged"`.

# asp.net-mvc-3 - 在 MVC3 中上传文件而不使用

> ID：13016240
> 
> 赞同：1
> 
> 时间：2012-10-22T17:05:58.467
> 
> 标签：asp.net-mvc-3, file-upload

我正在尝试单击我的操作链接并让它执行与标签相同的操作。

```
@Html.ActionLink("Import Excel Document", "ImportFromExcel", "ExcelUpload",FormMethod.Post , new {@enctype = "multipart/form-data", @class = "btn btn-inverse"}) 
```

基本上我想单击按钮并立即拉出选择文件窗口，然后在选择时将其发送到控制器。如果可以避免的话，我不想使用输入标签（与我的网站的外观风格不符）。

有什么建议么？

# javascript - 道场验证

> ID：13016242
> 
> 赞同：2
> 
> 时间：2012-10-22T17:06:14.610
> 
> 标签：javascript, dojo

有没有办法阻止 Dojo 验证文本框 onBlur？

```
var textbox = new ValidationTextBox({
     placeholder : "search",
     name : "userQuery",
     required : true,
     missingMessage : "Please enter search term",
     onBlur : function(){
          //function to stop onBlur validation
     }
}, textboxNode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:14:23.760

从技术上讲，是的。但我不确定它何时会验证它是否不是 onBlur。

```
var textbox = new ValidationTextBox({
  placeholder : "search",
  name : "userQuery",
  required : true,
  missingMessage : "Please enter search term",
  validator: function(value, constraints){
    if (this.hasOwnProperty("focused")) { //true if textbox is loaded
      if (!this.focused) { // if textbox not focused (onblur)
        return true;  // considered valid
      }
    }
    return value !== ""; // test if value is empty
  }
}, textboxNode); 
```

# python - Python - XML 解析

> ID：13016244
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:06:30.123
> 
> 标签：python, xml, xml-parsing, minidom

我得到了以下[xml 代码](http://dpaste.com/816679/)。如何使用 minidom.parse 函数从该 xml 中获取“评论”？我可以获得“用户：”和单元格值，但不能使用“评论”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:30:22.900

假设您的 xml 代码保存到“test.xml”：

```
from xml.dom.minidom import parse

dom1 = parse("test.xml")

for node in dom1.getElementsByTagName('t'):
    print node.childNodes[0].nodeValue 
```

这应该打印所有标签“”的内部值。

# vba - 如何提高VBA宏代码的速度？

> ID：13016249
> 
> 赞同：9
> 
> 时间：2012-10-22T17:06:51.463
> 
> 标签：vba, excel

我没有太多编写宏的经验，因此需要这个社区的帮助来解决以下遇到的问题：

我的宏复制在一个工作表中垂直范围内输入的一系列值，然后将这些值水平（转置）粘贴到另一个工作表中。理论上，它会将第一张工作表中的值粘贴到没有内容的第二张工作表的第一行。由于前五行有内容，因此它将值粘贴到第六行。我在运行宏时遇到的问题是我觉得它太慢了，因此我希望它运行得更快。

我有相同的宏做同样的事情，但是将值粘贴到另一个工作表的第一行，它运行完美。

因此，我最好的猜测是第二个宏运行缓慢，因为它必须在第六行开始粘贴，并且前 5 行可能有一些内容需要很长时间才能让宏通过（有很多对其他工作簿的单元格引用）以确定下一行粘贴的位置。这是我最好的猜测，因为我对宏几乎一无所知，所以我不能确定问题出在哪里。

我特此向您提供我的宏的代码，并真诚地希望有人能告诉我是什么让我的宏变慢，并为我提供如何使其运行更快的解决方案。我在想一个解决方案可能是宏不应该考虑前五行数据并立即开始在第 6 行粘贴第一个条目。然后在下一次第 7 行，等等。这可能是一个解决方案，但我不知道如何以一种可以做到这一点的方式编写代码。

感谢您花时间帮助我找到解决方案，这里是代码：

```
Sub Macro1()
Application.ScreenUpdating = False

    Dim historyWks As Worksheet
    Dim inputWks As Worksheet

    Dim nextRow As Long
    Dim oCol As Long

    Dim myCopy As Range
    Dim myTest As Range

    Dim lRsp As Long

    Set inputWks = wksPartsDataEntry
    Set historyWks = Sheet11

      'cells to copy from Input sheet - some contain formulas
      Set myCopy = inputWks.Range("OrderEntry2")

      With historyWks
          nextRow = .Cells(.Rows.Count, "A").End(xlUp).Offset(1, 0).Row
      End With

      With inputWks
          Set myTest = myCopy.Offset(0, 2)

          If Application.Count(myTest) > 0 Then
              MsgBox "Please fill in all the cells!"
              Exit Sub
          End If
      End With

      With historyWks
          With .Cells(nextRow, "A")
              .Value = Now
              .NumberFormat = "mm/dd/yyyy hh:mm:ss"
          End With
          .Cells(nextRow, "B").Value = Application.UserName
          oCol = 3
          myCopy.Copy
          .Cells(nextRow, 3).PasteSpecial Paste:=xlPasteValues, Transpose:=True
          Application.CutCopyMode = False
      End With

      'clear input cells that contain constants
      With inputWks
        On Error Resume Next
           With myCopy.Cells.SpecialCells(xlCellTypeConstants)
                .ClearContents
                Application.GoTo .Cells(1) ', Scroll:=True
           End With
        On Error GoTo 0
      End With

Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:27:30.177

只是重申已经说过的话：

```
Option Explicit

Sub Macro1()

'turn off as much background processes as possible
With Excel.Application
        .ScreenUpdating = False
        .Calculation = Excel.xlCalculationManual
        .EnableEvents = False
End With

    Dim historyWks As Excel.Worksheet
    Dim inputWks As Excel.Worksheet

    Dim nextRow As Long
    Dim oCol As Long

    Dim myCopy As Excel.Range
    Dim myTest As Excel.Range

    Dim lRsp As Long

    Set inputWks = wksPartsDataEntry
    Set historyWks = Sheet11

      'cells to copy from Input sheet - some contain formulas
      Set myCopy = inputWks.Range("OrderEntry2")

      With historyWks
          nextRow = .Cells(.Rows.Count, 1).End(Excel.xlUp).Offset(1, 0).Row
      End With

      With inputWks
          Set myTest = myCopy.Offset(0, 2)

          If Excel.Application.Count(myTest) > 0 Then
              MsgBox "Please fill in all the cells!"
              GoTo QuickExit
          End If
      End With

      With historyWks
          With .Cells(nextRow, 1)
              .Value = Now
              .NumberFormat = "mm/dd/yyyy hh:mm:ss"
          End With
          .Cells(nextRow, 2).Value = Excel.Application.UserName
          oCol = 3
          myCopy.Copy
          .Cells(nextRow, 3).PasteSpecial Paste:=Excel.xlPasteValues, Transpose:=True
          Excel.Application.CutCopyMode = False
      End With

      'clear input cells that contain constants
      With inputWks
        On Error Resume Next
           With myCopy.Cells.SpecialCells(Excel.xlCellTypeConstants)
                .ClearContents
                Excel.Application.Goto .Cells(1) ', Scroll:=True
           End With
        On Error GoTo 0
      End With

    Calculate

QuickExit

With Excel.Application
        .ScreenUpdating = True
        .Calculation = Excel.xlAutomatic
        .EnableEvents = True
End With

End Sub 
```

我会逐行浏览宏，以尝试找出哪条线慢。

另一种选择 - 虽然不确定它是否会加快速度 - 是避免剪贴板并丢失，`copy/paste`因此您将应用如下方法来移动数据：

```
Option Explicit

Sub WithoutPastespecial()

'WORKING EXAMPLE

Dim firstRange As Range
Dim secondRange As Range

Set firstRange = ThisWorkbook.Worksheets("Cut Sheet").Range("S4:S2000")
With ThisWorkbook.Worksheets("Cutsheets")
    Set secondRange = .Range("A" & .Rows.Count).End(Excel.xlUp).Offset(1)
End With

With firstRange
      Set secondRange = secondRange.Resize(.Rows.Count, .Columns.Count)
End With
secondRange.Value = firstRange.Value

End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-08T11:18:57.167

根据我的经验，提高性能的最佳方法是处理代码中的变量，而不是每次要查找值时都访问电子表格。将要使用的任何范围保存在变量（变体）中，然后像工作表一样遍历它。

```
 dim maxRows as double
    dim maxCols as integer.
    dim data as variant
with someSheet
    maxRows = .Cells(rows.count, 1).end(xlUp).row             'Max rows in sheet
    maxCols = .Cells(1, columns.count).end(xlToLeft).column   'max columns in sheet
    data = .Range(.Cells(1,1), .Cells(maxRows, maxCols))      'copy range in a variable
end with 
```

从这里您可以访问数据变量，就好像它是电子表格一样 - 数据（行，列）具有更快的读取速度。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T06:06:12.467

请也看看这篇文章。 [如何加快计算速度，提高性能...](http://www.databison.com/index.php/how-to-speed-up-calculation-and-improve-performance-of-excel-and-vba/)

无论如何， Application.calculation= xlCalculationManual 通常是罪魁祸首。但我们可以注意到，易失的 Excel 表格函数在大规模数据处理和功能方面大多会扼杀您的应用程序。

此外，对于您当前的代码，以下帖子可能不直接相关。我发现它对于全面优化 Excel/VBA 性能的技巧很有用。

[75个Excel加速技巧](http://chandoo.org/wp/2012/03/27/75-excel-speeding-up-tips/)

PS：我没有足够的声誉来评论你的帖子。所以添加为答案..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T01:20:16.163

正如评论中其他一些人所建议的那样，您绝对应该将 Application.Calculation 更改为 xlCalculationManual 并记住最后将其设置回 xlcalculationAutomatic 。也尝试设置 Application.Screenupdating = False （并再次打开它）。另外，请记住 .Copy 是复制单元格值的一种非常低效的方法 - 如果您真的只想要这些值，请循环通过范围设置 .Value 到旧范围中的 .Values 。如果您需要所有格式，您可能会被.Copy 卡住。

当您关闭计算/屏幕刷新标志时，请记住在所有情况下都将它们重新打开（即使您的程序在不同的点退出，或导致运行时错误）。否则各种不好的事情都会发生。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T17:53:50.230

只是一些建议（会作为评论发布，但我想我没有代表）：

1.  尝试引用单元格地址而不是命名范围（怀疑这是原因，但可能会对性能造成一些影响）

2.  您的工作簿公式是否包含指向其他工作簿的链接？尝试在链接断开的文件上测试代码，看看它是否能提高性能。

3.  如果这些都不是问题，我的猜测是，如果公式过于复杂，可能会增加一些处理开销。在仅包含值的文件上尝试代码以查看是否有任何改进的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-20T16:51:42.253

您可以通过在更改单元格值期间停止计算来提高速度，然后您可以启用它。请点击链接。 [http://webtech-training.blogspot.in/2013/10/how-to-stop-heavy-formula-calculation.html](http://webtech-training.blogspot.in/2013/10/how-to-stop-heavy-formula-calculation.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-09T10:31:33.777

.Cells(nextRow, 3).PasteSpecial Paste:=xlPasteValues, Transpose:=True Application.CutCopyMode = False

我不会那样做的。就处理器利用率而言，在操作系统中，剪切、复制和粘贴操作是成本最高的操作。

相反，您可以将一个单元格/范围中的值分配给另一个单元格/范围，如

```
 Cells(1,1) = Cells(1,2)  or Range("A1") = Range("B1") 
```

希望你明白我的意思..

# java - Java字符串比较不起作用？

> ID：13016252
> 
> 赞同：12
> 
> 时间：2012-10-22T17:07:00.527
> 
> 标签：java, string, comparison

我想这很简单，但我就是不明白怎么做高中系统（所以忽略瑞典语并查看字符串比较。这里的问题是统计函数变量在程序结束时仍然设置为 0。

```
import javax.swing.*;

public class Uppgift1 {
private String[] subjects = {"Matematik","Svenska","Engelska","Idrott",
            "Bild","Fysik","Biologi","Kemi","Historia","Geografi",
            "Samhällskunskap","Religionskunskap"};`

private String[] grades = new String[subjects.length]; // Lika många element som ämnen

public void setGrades() {
    for(int i = 0; i < grades.length; i++){
        grades[i] = JOptionPane.showInputDialog("Ange betyg i " + subjects[i] + " (IG, G, VG, MVG)");
    }
}

public void statistics() {
    int ig = 0;
    int g = 0;
    int vg = 0;
    int mvg = 0;
    int points = 0;

    for(int i = 0; i < grades.length; i++){
        if(grades[i].equals("IG")){
            ig++;
        }

        else if(grades[i] == "G"){
            g++;
            points += 10;
        }

        else if(grades[i] == "VG"){
            vg++;
            points += 15;
        }

        else if(grades[i] == "MVG"){
            mvg++;
            points += 20;
        }
    }

    String output = new String("BETYGSSTATISTIK\n");
    output += "IG: " + ig + "\n";
    output += "G: " + g + "\n";
    output += "VG: " + vg + "\n";
    output += "MVG: " + mvg + "\n";
    output += "Betygspoäng: " + points;

    JOptionPane.showMessageDialog(null, output);
}

public static void main(String[] args) {
    Uppgift1 prog = new Uppgift1();
    prog.setGrades();
    prog.statistics();
}
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-22T17:08:28.563

您已经正确使用了第一个比较，但后来，您以某种方式错误地得到了它。

在比较字符串的内容时总是使用`equals()`方法，就像你在第一种情况下所做的那样。

此外，如果它不能以某种方式工作，可能是因为您的字符串中有`leading`空格`trailing`。尝试以这种方式使用它：-

```
if (grades[i].trim().equals("IG")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T17:09:13.763

您需要使用该方法进行所有`String`验证。`equals`改变你的 ifs 来做，而不是与`==`

# generics - 使用 F# 的静态类型参数和编码数字常量

> ID：13016257
> 
> 赞同：5
> 
> 时间：2012-10-22T17:07:09.277
> 
> 标签：generics, f#, numbers, bit-manipulation, inline

我在 F# 中编写了一个库¹，它提供了一些按位操作，我想确保尽可能多的函数是`inline`let 与静态类型参数的绑定（这允许我编写一个函数并将其用于`int16`、`int32`，也许即使`bignum`开销很小）。这条路线在某些时候肯定会失败。所述库提供的一些功能有些复杂。

*¹注意：我知道通过公共接口公开内联 let 绑定的问题。*

但是，我想将其扩展到最大范围。现在，我正在尝试以这种形式编写[人口计数](http://aggregate.org/MAGIC/#Population%20Count%20%28Ones%20Count%29)算法，但遇到了一个问题。我不确定如何编码`0x3333...`出现在这些算法中的掩码，例如 。我可以使用一些额外的技巧来解决移位常量和类似问题。

我可以使用任何技巧，无论是通过 F# 的类型推断和静态类型参数，还是通过位旋转，以我想要的方式编写算法？有什么方法可以在静态通用函数中编码这些类型的常量吗？

一个更模糊的问题：我可以依靠一些具体的东西来充分利用静态类型参数，尤其是在数字的上下文中？例如，我大量使用`GenericOne`and `GenericZero`。还有更多这样的事情，我可能会错过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:40:37.750

首先，您可以使用[数字文字](http://msdn.microsoft.com/en-us/library/ee353820%28v=vs.100%29.aspx)来避免丑陋的使用`GenericOne`and `GenericZero`。这是一个简短的例子：

```
module NumericLiteralG = begin
  let inline FromZero() = LanguagePrimitives.GenericZero
  let inline FromOne() = LanguagePrimitives.GenericOne
  let inline FromInt32 (n:int) =
        let one : ^a = FromOne()
        let zero : ^a = FromZero()
        let n_incr = if n > 0 then 1 else -1
        let g_incr = if n > 0 then one else (zero - one)
        let rec loop i g = 
            if i = n then g
            else loop (i + n_incr) (g + g_incr)
        loop 0 zero 
end

// Usage
let inline ten() = 10G
ten() + 1
ten() + 2L 
```

其次，F# 似乎不支持*通用*的六进制数字文字。一个技巧是使用双反引号，以便您具有指示性名称：

```
let inline shift x = 
    let ``0x33333333G`` = 858993459G
    ((x >>> 2) &&& ``0x33333333G``) + (x &&& ``0x33333333G``)

// Usage
shift 20
shift 20L
shift 20uy 
```

关于数字文字有一些很好的问题。如果你走这条路，我会提供一些参考：

*   [F# 静态成员类型约束](https://stackoverflow.com/questions/2840714/f-static-member-type-constraints)
*   [完整、高效的 NumericLiteral 模块实现](https://stackoverflow.com/questions/4740857/complete-efficient-numericliteral-module-implementation?lq=1)
*   [如何为通用数字编写函数？](https://stackoverflow.com/questions/4732672/how-to-write-a-function-for-generic-numbers)

# c++ - C代码的内存要求

> ID：13016263
> 
> 赞同：2
> 
> 时间：2012-10-22T17:07:38.073
> 
> 标签：c++, c

有没有办法知道我的 C 代码的内存需求？例如，我制作了`int arrey[1000]`. 那么运行时它将在RAM中消耗多少内存，我可以用任何代码/工具知道它而不手动计算它吗？（系统：Ubuntu）

编辑：就像知道我们可以给时间一样的时间 ./a.out 这将为程序提供完美的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:09:43.380

您可以启动程序，同时在不同的终端窗口中，键入

```
top 
```

这将为您提供有关系统上正在运行的信息：CPU 使用率、内存、用户、时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:10:21.100

*要找到数组的内存需求，您可以使用sizeof*函数找到整个数组的大小：

```
cout << "bytes used: " << sizeof(arrey) << endl; 
```

要找到每个元素的内存：

```
cout << "byte per element: " << sizeof(int) << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:42:09.907

如果你有代码并且你已经编译了它，你可以使用`valgrind` . 此控制台工具将打印堆摘要，以及由于内存失败而分配的内存丢失了多少以及它们在代码中的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:08:56.420

使用以下 Linux 命令获取有关系统内存使用情况的统计信息：

```
$ free
...
$ cat /proc/meminfo
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T17:10:34.600

使用`ps`命令，您可以获得进程分配的内存页数。它不是一个完美的索引；如果您想要更精确，请使用内存分析器，例如*gperftools*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T17:11:30.100

只需使用 sizeof`cout<<sizeof(arrey);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T19:14:49.470

从您自己的应用程序内部，您可以阅读 (sequentially)`/proc/self/statm`等。在[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页中`/proc/self/maps`阅读有关`/proc`文件系统的更多信息。

（通过对 C 源代码的静态分析来限制内存消耗通常是难以处理或不可能的）

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-10-22T17:10:37.813

1000 * 4 = 4000，在堆栈上。

# c# - 如何编写 nhibernate 代码以获取从数据库返回的特定行中的特定内容

> ID：13016264
> 
> 赞同：0
> 
> 时间：2012-10-22T17:07:39.403
> 
> 标签：c#, nhibernate

可以说我的存储过程类似于

```
create procedure mySp
As

    select a, b, c, d, e from aTable

End 
```

我想获得`d`最后一行的值。这是我感兴趣的唯一值。我不想将结果映射到 C# 对象或任何东西。只需要`d`最后一行的值。

我的休眠查询应该是什么样的？这是我开始通话的方式。但我无法得到它的其余部分：

```
return unitOfWork.Session.CreateSQLQuery("exec mySP"). ?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:48:34.920

您想使用对象关系映射工具但没有对象和映射。最方便的方法 - 不要这样做，只需使用老派`SqlCommand`。

如果你只有一把锤子，一切看起来都像钉子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:30:04.897

如果您需要从存储过程中获取一些值，但不或不会将其映射到另一个对象，那么只需在 UnitOfWork 接口中公开一个连接。

或者简单地添加“int MySpecialDbCall()”方法并称之为一天。

这很“丑陋”，但我不得不做类似的事情。

# delphi - 注册表“忘记”值

> ID：13016267
> 
> 赞同：3
> 
> 时间：2012-10-22T17:07:47.637
> 
> 标签：delphi, windows-7, registry, antivirus

我的软件在 HKCU\Software\mysoftware 中存储了一些从未出现过问题的值。但是，我现在还在 HKCU\Software\mysoftware\Licenses 中存储了一些值 - 即现有数据的子目录。但是，24 小时后，这些值就会消失。

我登录我的软件以检查它没有删除密钥并且没有日志条目，这是完全可以预料的，因为该软件甚至没有运行。有人建议使用可以跟踪注册表事件的进程查看器（来自 Microsoft）：但是，它放弃了工作（事件太多，即使我只看 HKCU\Software\mysoftware 注册表事件）所以我仍然没有找到*什么*是删除这些键！

我用阿瓦斯特！其他人建议的防病毒可能是罪魁祸首。实际密钥的格式为 REG_SZ，带有“[keyname]=[base64string]”。没什么花哨的，大约150个字符。软件关闭几个小时后，我可以使用注册表编辑器查看这些值。但过了一段时间，他们走了！我很少重启。

那么还有什么可以删除密钥？

**更新**

这是 Delphi 6 代码：

```
procedure XXX;
var
    registry : TRegistry;
    code : string;
begin
    try
        registry := TRegistry.Create;
        if registry.OpenKey(REGISTRY_ROOT, true) then begin
            code := [...a base64 string, around 150 chars on average...];
            registry.WriteString(simname, code);
        end;
    finally
        FreeAndNil(registry);
    end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:56:27.317

仍然没有找到解决方案；但是，我能想到的（在其他地方建议）只是将应用程序限制在沙箱中的防病毒软件，尽管没有这样的通知。

# ruby-on-rails - action_mailer config in its own file

> ID：13016271
> 
> 赞同：0
> 
> 时间：2012-10-22T17:07:55.927
> 
> 标签：ruby-on-rails, gmail, actionmailer

I don't want to put the account and password for our gmail account in the production app config file.

Rather I would like to set things up so that this information is in a separate yml file that will not be stored on our git repository. We do this with other data that needs to be secured, but I don't see a straight forward way to do it with action_mailer.

In otherwords I want action_mailer to read its config info from something like action_mailer_config.yml NOT from the environments/production.rb config file.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:23:49.660

Just create an initializer file that assigns an environmental variable. So in your production environment you would have:

```
 config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "chicheng.com.tw",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"],
    password: ENV["GMAIL_PASSWORD"],
    :openssl_verify_mode  => 'none'
    } 
```

Then you add an initializer file that assigns the username and password like this:

```
ENV["GMAIL_USERNAME"] = "your_username@gmail.com"
ENV["GMAIL_PASSWORD"] = "your_password" 
```

One important thing to remember is that you add this initializer file to your git ignore. You would then need to manually make sure this file is included when you push it up.

To be honest instead of using a separate file, I prefer just setting the ENV on the server directly. This way I do not have to worry about the file accidentally getting pushed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:24:45.470

最近在 railscasts 中涵盖了此要求。[http://railscasts.com/episodes/85-yaml-configuration-revised](http://railscasts.com/episodes/85-yaml-configuration-revised)

确保检查替代宝石的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T00:56:03.060

这是一个较老的问题，因此您可能已经有了答案，但我使用 Heroku 进行了部署，它们允许您从其 cli 设置配置变量（如 ENV）。值得检查您的提供程序是否允许类似的实现。它让事情变得容易多了。 [这](https://devcenter.heroku.com/articles/config-vars)是一篇有更好解释的文章。

# android - Creating a web/server database to be used with android app

> ID：13016275
> 
> 赞同：6
> 
> 时间：2012-10-22T17:08:03.147
> 
> 标签：android

I have experience building android applications but now I would like to start building applications that interact with some sort of web database to push and pull data.

What type of database should i set up on a remote server for my application to interact with? From what i understand I need a database on the remote server and some service that my android app can communicate with?

What can i read that will clear up how this works and how i can get started?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:19:35.580

在我看来，最简单（通常也是最灵活）的组合是 PHP 和 MySQL。PHP 作为脚本语言，从应用程序调用（通过 http），并处理所有数据库访问。MySQL 作为数据库。当然，PostgreSQL 也是数据库的一个选项。如果您可以访问 .NET、JSP 或类似的东西，那也是一种选择。但是带有 Apache、PHP 和 MySQL 的 Web 服务器是免费的、功能强大且易于维护的，并且大多数/许多 Web 主机都有它们。

它的工作方式（无论您选择哪种基于 Web 的服务/服务器都是一样的），是这样的： - 数据库安装在服务器上 - 您有一个 Web 区域（在 Web 服务器上）可以访问数据库（这是典型的网络酒店解决方案的情况） - 您将脚本（f.ex. PHP）放在网络区域 - 网络脚本访问数据库，具有获取和/或存储信息的功能 - 您的应用程序使用 httpclient 或类似的东西向 PHP 脚本发送 http GET 或 POST 请求，发送信息或询问信息，或两者兼而有之

也可以直接在您的应用程序中编写数据库访问代码（与 C og C++ 等语言相比，这在 Java 和 C# 中非常容易）。但是，大多数主机不允许远程访问其数据库服务器，因此您很可能必须自己设置数据库服务器。此外，直接访问数据库服务器存在安全风险，我不建议这样做。

至于你能读到什么，网上有很多教程、howtos 和具体示例。搜索“php access mysql database”，f.ex.，了解如何编写处理数据库事务的 php 脚本。如果您有更详细的描述，我可能会为您指出更具体的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:29:47.213

我强烈建议在您的应用程序和数据库之间添加 Web 服务层，使用 JSON 或 XML。直接暴露数据库可能会带来安全风险，而且很少是可行的方法。

# jquery - Can jQuery tell if the s of a element are currently displayed? Possible Duplicate: Is there a way to determine if a <select>dropdown menu is open? My customer would like me to display some simple instructions once the us ID：13016276 赞同：7 时间：2012-10-22T17:08:04.817 标签：jquery, html, css, select, option 回答 #1 赞同：0 时间：2012-10-22T17:11:45.563 如果$('myID:focus')还不够，我怀疑还有另一种方法。 回答 #2 赞同：0 时间：2012-10-22T17:28:59.390 就像是 HTML <select id="sselect"> <option value="1st">1st</option> <option value="2nd">2nd</option> <option value="3rd">3rd</option> </select> <br><br> <div id="ddiv"></div> JS $('#sselect') .on('keyup', function() { $('#ddiv').show().text($(this).val()) }) .on('mouseenter', 'option', function() { $('#ddiv').show().text($(this).val()) }) .on('mouseleave', function() { $('#ddiv').hide() }) 看到它在这里工作：http: //jsfiddle.net/RASG/QfMGR/ 用 FF 15 测试</select>

# c# - 在回调中呈现服务器控件

> ID：13016281
> 
> 赞同：0
> 
> 时间：2012-10-22T17:08:29.187
> 
> 标签：c#, asp.net, custom-server-controls

我有一堆不同的面板，它们是自定义服务器控件，它们继承了 CompositeControl。面板是使用 CreateChildControls() 呈现的。我有一个页面，我根据用户从组合框中的选择来显示它们。当您更改选择时，它会为回调面板（DevExpress 控件）进行回调，这就像一个更新面板。根据选择，它将面板添加到回调面板。但似乎如果您从回调中执行此操作，则服务器控件生命周期不会开始，因此它永远不会调用 CreateChildControls() 或 OnPreRender()。关于如何使这项工作的任何想法？EnsureChildControls() 似乎没有帮助。

这是其中一个面板的一些示例代码

```
 protected override void CreateChildControls()
    {
        base.CreateChildControls();

        String strParentID = this.ClientInstanceName.Length > 0 ? this.ClientInstanceName : this.ClientID;
        String strID = "";//Used as ID and ClientInstanceName.
        String strKey = "";//Used in the ID and as the ControlInfo key.

        if (!DesignMode)
        {
            //*******************************************************************

            ASPxLabel lblUnit = new ASPxLabel();
            lblUnit.Text = "Select Unit(s)";
            callbackEdit.Controls.Add(lblUnit);

            //*******************************************************************

            strKey = "btnUnitSelector";
            strID = strParentID + "_" + strKey;
            btnUnitSelector = new ASPxButton()
            {
                ID = strID,
                ClientInstanceName = strID,
                CssFilePath = this.CssFilePath,
                CssPostfix = this.CssPostfix,
                SpriteCssFilePath = this.SpriteCssFilePath,
            };

            btnUnitSelector.Width = Unit.Pixel(180);
            btnUnitSelector.AutoPostBack = false;

            this.listControlInfo.Add(new ControlInfo(strKey, btnUnitSelector.ClientInstanceName, btnUnitSelector.ClientID));
            callbackEdit.Controls.Add(btnUnitSelector);

            //*******************************************************************

            strKey = "unitPopup";
            strID = strParentID + "_" + strKey;

            unitPopup = new UnitPopup.UnitPopup();
            unitPopup.ID = strID;
            unitPopup.ClientInstanceName = strID;
            unitPopup.btnOk_AutoPostBack = false;
            unitPopup.ShowOnlyUnits = false;
            unitPopup.DataSource = GlobalProperties.Company_UnitsAndAreas;
            unitPopup.DataBind();
            btnUnitSelector.ClientSideEvents.Click = "function (s, e) { " + unitPopup.ClientInstanceName + ".Show(); }";
            unitPopup.ClientSideEvents.MemberSet = "function (s, e) { " + btnUnitSelector.ClientInstanceName + ".SetText(" + unitPopup.ClientInstanceName + ".selectedMemberName); }";

            Controls.Add(unitPopup);
            //*******************************************************************
        }
    }

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);

        ClientScriptManager cs = this.Page.ClientScript;

        //Register an embedded JavaScript file. The JavaScript file needs to have a build action of "Embedded Resource".
        String resourceName = "QSR_ServerControls.Controls.DashboardControls.SalesChart.SalesChart.js";
        cs.RegisterClientScriptResource(typeof(SalesChart), resourceName);
    } 
```

这是添加面板的一些示例代码

```
 private void PopulatePanel(string panel)
    {
        tblDescCell.Controls.Add(new LiteralControl(GetPanels().Select("[PanelName] = '" + panel + "'")[0]["PanelDescription"].ToString()));
        if (panel == "SalesChart")
            tblTopLeftCell.Controls.Add(new SalesChart.SalesChart());
    }

    void callbackMain_Callback(object sender, DevExpress.Web.ASPxClasses.CallbackEventArgsBase e)
    {
        PopulatePanel(e.Parameter);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:32:42.057

在回调请求期间，不执行 PreRender 和 Render 方法（这是与 PostBack 请求的主要区别）。但是应该执行 CreateChildControls。请提供更多信息或代码示例。

# .net - 从表单中提取所有可本地化的字符串

> ID：13016282
> 
> 赞同：1
> 
> 时间：2012-10-22T17:08:34.380
> 
> 标签：.net, winforms, localization

我们有一个现有的 WinForms 应用程序需要翻译。我们希望每个解决方案使用一个资源文件，因此我们不会设置表单的可本地化属性。

我想开发一个工具，给定一个表单，在设计器中提取所有可本地化的硬编码字符串。当本地化属性设置为 True 时，类似于 Visual Studio 的操作。
我只需要提取文本、标题。

我该怎么做？

第二步是在资源文件中自动添加提取的字符串，并可能用新的标识符替换硬编码的字符串。

# extjs - 无限滚动EXTJS网格上的鼠标滚轮滚动不起作用

> ID：13016285
> 
> 赞同：0
> 
> 时间：2012-10-22T17:08:41.263
> 
> 标签：extjs, extjs4

我们正在使用 EXTJS 4.0.5 并且鼠标滚轮滚动存在一些问题。

我们有一堆需要设置的无限滚动网格：

`verticalScrollerType: 'paginggridscroller'`

所以我们把这个设置放在一个基类上，并让所有的网格都继承自这个类。它们都滚动良好，并且在您滚动时无限分页有效，但鼠标滚轮行为已关闭。

禁用此设置可修复网格上的鼠标滚轮滚动，但显然会破坏网格的无限滚动分页。

我看到的行为是鼠标滚轮在光标位于网格中的记录上方时不会滚动，但如果光标位于滚动条上方则会滚动。

以前有人见过这个问题吗？我在有关鼠标滚轮滚动的文档中一无所获。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:15:51.087

也许这在 ExtJS 4.0.7 中已修复？请参阅发行说明@http [://dev.sencha.com/deploy/ext-4.0.7-gpl/release-notes.html](http://dev.sencha.com/deploy/ext-4.0.7-gpl/release-notes.html)

如果可以，我建议您升级到 4.0.7 或 4.1.2。在这些版本中修复了许多错误。

# terminal - 打开终端时自动使用源命令

> ID：13016286
> 
> 赞同：1
> 
> 时间：2012-10-22T17:08:40.683
> 
> 标签：terminal

我经常使用命令 SOURCE 来打开软件。所以我输入：

源 /usr/blabla/blabla

软件启动

我想知道每次启动终端时是否可以调用源命令。所以我只需要启动 et 终端并输入 softwarelaunch。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:11:49.363

这就是文件`~/.bashrc`的用途！

`source`每次打开终端窗口时，该文件都会得到d。如果要执行，`/usr/bla/bla`则可以在`~/.bashrc`文件末尾添加一行：

```
source /usr/bla/bla 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:52:08.487

将这样的内容添加到您的`~/.bashrc`：

```
if [ -f /usr/local/foo/bar ]; then
   . /usr/local/foo/bar
fi 
```

# ruby-on-rails - 身份验证失败时抛出 404 错误：设计 + rails 自定义身份验证策略

> ID：13016288
> 
> 赞同：0
> 
> 时间：2012-10-22T17:08:44.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个自定义身份验证策略（它是默认策略），它有一个身份验证！功能。

```
def authenticate!
  if validation_success
    success!(resource)
  else
    fail(:invalid_token)
  end
end 
```

我想修改它，以便在循环的“其他”部分中，我直接从该代码本身返回一个 404。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:35:48.187

```
raise ActiveRecord::RecordNotFound 
```

生产环境使用 404 自动处理未找到记录和路由错误。

# ruby-on-rails - 将 css 类添加到 rails link_to helper

> ID：13016295
> 
> 赞同：69
> 
> 时间：2012-10-22T17:09:00.150
> 
> 标签：ruby-on-rails

我正在尝试使用以下代码使用 css 设置 rails 链接的样式：

```
<%= link_to "Learn More", :controller => "menus", :action => "index", :class => "btn btn-inverse" %> 
```

我希望这会创建一个如下所示的链接：

```
<a href="menus/" class="btn btn-inverse">Learn More</a> 
```

相反，rails 正在渲染这个 -

```
<a href="/menus?class=btn+btn-inverse">Learn More</a> 
```

有没有其他人有这个问题/知道我做错了什么？我知道我可以通过手动创建锚标记而不是使用助手来避免这个问题，但我想知道是否有办法将 css 类信息传递给助手本身。我正在使用 Rails 3.2.6。

谢谢！

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-10-22T17:09:41.430

你有语法问题。试试这个：

```
<%= link_to "Learn More", {controller: "menus", action: "index"}, class: "btn btn-inverse" %> 
```

[一些文档供您使用 link_to Helper 进一步了解](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

他们说：

> *使用较旧的参数样式时要小心，因为需要额外的文字哈希：*
> 
> ```
> link_to "Articles", { :controller => "articles" }, :id => "news", :class => "article"
> # => <a href="/articles" class="article" id="news">Articles</a> 
> ```
> 
> *离开散列会给出错误的链接：*
> 
> ```
> link_to "WRONG!", :controller => "articles", :id => "news", :class => "article"
> # => <a href="/articles/index/news?class=article">WRONG!</a> 
> ```

* * *

我建议您使用路由配置后生成**的 URL 帮助程序。**在你的情况下：

```
link_to "Learn More", menus_path, :class => "btn btn-inverse" 
```

关于生成的 Helpers 的一点提醒：

```
# routes.rb
resources :users

# any view/controller
users_path #=> /users
edit_user_path(user) #=> /users/:id/edit
user_path(user) #=> /users/:id  (show action)
new_user_path(user) #=> /users/new 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-19T08:08:21.917

尝试新的参数约定：

```
<%= link_to 'Learn More', 'menus#index', class: 'btn btn-inverse' %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-27T18:40:24.157

如果您没有链接所需的控制器操作/路由，则可以将 nil 作为占位符传递，并根据需要获取要应用的类

```
<%= link_to 'link verbiage', nil,  class: 'classes for action tag'%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T18:54:33.023

我顺便解决了我的问题

```
<%= link_to image_tag("imageexamplo.png", class: 'class or id examplo css'),{controller: "user" , action: "index"}%> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-16T22:21:24.760

这就是我使用另一个视图引擎*HAML*解决它的方法，以防万一其他开发人员有这种需要

```
%i= link_to "Add New Blog Post", user_post_edit_new_url(current_user), :class  => "fa fa-plus-circle" 
```

# android - 两个带有独立文本的编辑文本

> ID：13016296
> 
> 赞同：0
> 
> 时间：2012-10-22T17:09:03.710
> 
> 标签：android, input, android-edittext

我有一个自定义键盘和两个`EditText`s. 我在第一个编辑文本中输入数字，然后将焦点发送到第二个编辑文本并将其返回到第一个编辑文本。我的问题是我不能独立于第一个编辑文本写入第二个编辑文本。这是我的代码：

```
private class BtnListener implements OnClickListener {

    public void onClick(View view) {

        switch (view.getId()) {

        case R.id.btnNum0Id:
        case R.id.btnNum1Id:
        case R.id.btnNum2Id:
        case R.id.btnNum3Id:
        case R.id.btnNum4Id:
        case R.id.btnNum5Id:
        case R.id.btnNum6Id:
        case R.id.btnNum7Id:
        case R.id.btnNum8Id:
        case R.id.btnNum9Id:

            String inDigit = ((Button) view).getText().toString();

            if (inStr.equals("0")) {

                inStr = inDigit; 

              } else {
                inStr += inDigit;
              }

            editX.setText(inStr);

            editX.addTextChangedListener(new TextWatcher() {

                public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

                public void onTextChanged(CharSequence s, int start, int before, int count) {
                //Para Numero
                    if(editY.requestFocus() == true && editY.length() == 0 )
                    {
                        btnCalcula.setOnClickListener( new OnClickListener(){ 
                            public void onClick(View arg0){

                                int inNum = Integer.parseInt(inStr);

                                inStr = "0";

                                if (lastOperator == ' ') {
                                  result = inNum;//Asignacion de suma
                                  } else if (lastOperator == '+') {
                                      result += inNum; //Suma
                                      }

                                editZ.setText(String.valueOf(result).substring
                                        (0,editX.getText().length()-2));
                                mData.add(new Data(result));
                                mAdapter.notifyDataSetChanged();
                                lastOperator = '+';

                                    }   
                                });     
                    }

                }

                public void afterTextChanged(Editable s) {
                    //Para Pale
                    if(s.length() == 4 && editY.requestFocus() == true ){
                        btnCalcula.setOnClickListener( new OnClickListener() {
                            public void onClick(View v){
                                        if(editY.requestFocus() == true)
                                        {
                                            int inNum = Integer.parseInt(inStr);

                                            inStr = "0";

                                            if (lastOperator == ' ') {
                                              result = inNum;//Asignacion de suma
                                              } else if (lastOperator == '+') {
                                                  result += inNum; //Suma
                                                  }

                                            editZ.setText(String.valueOf(result).substring
                                                    (0,editY.getText().length()));
                                            mData.add(new Data(result));
                                            mAdapter.notifyDataSetChanged();
                                            lastOperator = '+';
                                            editY.clearFocus();
                                        }   
                                    }
                            });
                        //para Tripleta
                    }else if (s.length() == 6){
                        btnCalcula.setOnClickListener( new OnClickListener() {
                            public void onClick(View v){
                                //editY.requestFocus();
                                        if(editY.requestFocus() == true)
                                        {
                                            int inNum = Integer.parseInt(inStr);

                                            inStr = "0";

                                            if (lastOperator == ' ') {
                                              result = inNum;//Asignacion de suma
                                              } else if (lastOperator == '+') {
                                                  result += inNum; //Suma
                                                  }

                                            editZ.setText(String.valueOf(result).substring
                                                    (0,editY.getText().length()));
                                            mData.add(new Data(result));
                                            mAdapter.notifyDataSetChanged();
                                            lastOperator = '+';
                                            editY.clearFocus();
                                        }   
                                    }
                            });
                    }

                }

            });

                if (lastOperator == '=') {
                   result = 0;
                   lastOperator = ' ';
                }

              break;

           case R.id.btnClearId:
             result = 0;
             inStr = "0";
             lastOperator = ' ';
             editZ.setText("");
             editX.setText("");
             editY.setText("");
             mData.clear();
             mAdapter.notifyDataSetChanged();

              break;
           case R.id.btnAnula: 
               editX.setText("");
               editY.setText("");
               editY.clearFocus();
               break;
           case R.id.btnImprim:
               //Buscar Api
               break;
           case R.id.btnReimp:
               //Reimplementar api
               break;
           }
        }

} 
```

# iphone - UICollectionView 中的大单元格在仍显示的情况下被删除

> ID：13016302
> 
> 赞同：16
> 
> 时间：2012-10-22T17:09:23.507
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`包含一些大的`UICollectionViewCells`. 这些单元格非常大，以至于它们完全填满了`UICollectionView`边界并延伸到屏幕外。

问题是大单元格`UICollectionView`在它们仍然显示时从 中删除并排队等待重用，从而导致空白视图。如果我继续在空白`UICollectionView`区域滚动，最终会出现单元格的最后一部分，并且下一个单元格的开头会出现在正确的位置。

我已经有效地禁用了单元格重用，并且问题仍然明显出现，因为`UICollectionView`认为单元格不再显示，因为集合视图的范围内没有角落。

为了演示制作一个单列且具有 10000 像素高的单元格的集合视图，当滚动到非常高的单元格时，它将在大约 1000 像素的内容滚出屏幕后消失，并重新出现以显示最后 1000 像素的内容为细胞。

您可以在以下位置下载一个显示此问题的简单原型应用程序：http: [//jack.cox.s3.amazonaws.com/collectionviewprototype.zip](http://jack.cox.s3.amazonaws.com/collectionviewprototype.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T19:45:00.503

这个问题与调试日志中的警告一起发生在我身上：

> 的行为`UICollectionViewFlowLayout`未定义，因为：项目`height`必须小于`UICollectionView` 减去部分`insets` `top`和`bottom`值的高度。

开箱即用`UICollectionViewFlowLayout`似乎不支持大于屏幕的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:40:38.220

这个问题被跟踪为雷达#12889164

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T22:57:45.617

如果您仍在寻找快速解决方案，请尝试此修复：当检测到单元格的高度大于持有它的集合视图时，集合视图只需大于单元格。因此将 collecitonView 框架设置为更大并更正内容和指示器插图。

```
- (void)updateCollectionViewForLargeCellHeight:(CGFloat)largeCellHeight {
    CGFloat currentCollectionViewHeight = CGRectGetHeight(self.collectionView.frame);
    if (largeCellHeight > currentCollectionViewHeight) {
        self.collectionViewBottomConstraint = -largeCellHeight; 
        //This is the bottom constraint of the collectionView to its superview. 
        //If you are not using constraints, simply set the frame for the collectionView
        UIEdgeInsets edgeInset = UIEdgeInsetsMake(0, 0, largeCellHeight, 0);
        self.collectionView.contentInset = edgeInset;
        self.collectionView.scrollIndicatorInsets = edgeInset;
        [self.collectionView needsUpdateConstraints];
    }
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    CGSize size;
    [self updateCollectionViewForLargeCellHeight:size.height];
    return size;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T10:38:30.667

我已经使用`UICollectionView`了屏幕大小的单元格。对于 iPad，单元格大小为 768x1024。并且没有发现任何问题。请确保您已设置`Min Spacing For Cells`并且`For Lines`也`0`返回正确`CGSize`，`UIEdgeInsets`如下所示

* * *

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    CGSize retval;
    retval.width=maxWidth; //768 in case of iPad
    retval.height=maxHeight; //1024 in case of iPad
    return retval;
} 
```

* * *

```
- (UIEdgeInsets)collectionView:
(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
return UIEdgeInsetsMake(0 , 0, 0, 0);
} 
```

# javascript - json兄弟数据

> ID：13016304
> 
> 赞同：1
> 
> 时间：2012-10-22T17:09:27.197
> 
> 标签：javascript, jquery, ajax, json

（如果我使用了稍微不正确的语言，请原谅我 - 请随时根据需要进行建设性的更正）

有几篇关于从返回对象中的兄弟姐妹的 JSON 数据中获取数据的帖子，但我无法将该信息应用于我的情况：

我有一堆对象从 REST 调用中以 JSON 形式返回，并且对于每个具有特定键节点的对象：值我需要提取特定键的兄弟节点的数值。例如：

对于以下对象列表，我需要将每个具有匹配“desc”的对象的“file_size”中的数字相加，并将其返回到页面上匹配的输入值。

```
{"ResultSet":{

  Result":[

    {
        "file_size":"722694",
        "desc":"description1",
        "format":"GIF"
    },

    {
        "file_size":"19754932",
        "desc":"description1",
        "format":"JPEG"
    },

    {
        "file_size":"778174",
        "desc":"description2",
        "format":"GIF"
    },

    {
        "file_size":"244569996",
        "desc":"description1",
        "format":"PNG"
    },

    {
        "file_size":"466918",
        "desc":"description2",
        "format":"TIFF"
    }

  ]

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:11:49.977

那是一个嵌入在对象中的数组，所以

```
data.ResultSet.Result[2].file_size 
```

会给你`778174`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:18:07.350

```
var sum = {}, result = ResultSet.Result

// Initialize Sum Storage
for(var i = 0; i < result.length; i++) {
  sum[result[i].desc] = 0; 
}

// Sum the matching file size
for(var i = 0; i < result.length; i++) {
  sum[result[i].desc] += parseInt(result[i]["file_size"]
} 
```

执行上述代码后，您将拥有一个`sum`像这样命名的 JSON

```
sum = {
  "description1": 20477629,
  "description2": 1246092
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:29:04.960

像下面这样的迭代应该可以完成这项工作，

```
var result =  data.ResultSet.Result;
var stat = {};
for (var i = 0; i < result.length; i++) {    
    if (stat.hasOwnProperty(result[i].cat_desc)) {       
        if (result[i].hasOwnProperty('file_size')) {
        stat[result[i].cat_desc] += parseInt(result[i].file_size, 10);   
        }
    } else {
        stat[result[i].cat_desc] = parseInt(result[i].file_size, 10);
    }   
} 
```

**演示：http:** [//jsfiddle.net/HtrLu/1/](http://jsfiddle.net/HtrLu/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:29:36.427

您可以使用以下功能：

```
function findSum(description, array) {
    var i = 0;
    var sum = 0;

    for(i = 0; i < array.length; i++) {
        if(array[i]["desc"] == description && array[i].hasOwnProperty("file_size")) {
            sum += parseInt(array[i]["file_size"], 10);
        }
    }

    alert(sum);
} 
```

并这样称呼它：

```
findSum("description1", ResultSet.Result); 
```

`"description1"`显示包含所有文件大小总和的警报。

一个工作的 JSFiddle 在这里：http: [//jsfiddle.net/Q9n2U/](http://jsfiddle.net/Q9n2U/)。

* * *

为了响应您的更新和评论，这里有一些新代码创建了一些`div`带有所有描述的总和的 s。我取出`hasOwnProperty`代码是因为您更改了数据集，但请注意，**如果数据数组中有没有`file_size`属性的对象，则必须使用`hasOwnProperty`来检查它**。你应该能够`.each`很容易地为你的 jQuery 调整它。

```
var data = {};
var array = ResultSet.Result;

var i = 0;
var currentDesc, currentSize;
var sizeDiv;
var sumItem;

//Sum the sizes for each description
for(i = 0; i < array.length; i++) {
    currentDesc = array[i]["desc"];
    currentSize = parseInt(array[i]["file_size"], 10);

    data[currentDesc] =
        typeof data[currentDesc] === "undefined"
        ? currentSize
        : data[currentDesc] + currentSize;
}

//Print the summations to divs on the page
for(sumItem in data) {
    if(data.hasOwnProperty(sumItem)) {
        sizeDiv = document.createElement("div");
        sizeDiv.innerHTML = sumItem + ": " + data[sumItem].toString();
        document.body.appendChild(sizeDiv);
    }
} 
```

一个工作的 JSFiddle 在这里：http: [//jsfiddle.net/DxCLu/](http://jsfiddle.net/DxCLu/)。

# apache - CakePHP 重定向到同一域下的外部源

> ID：13016305
> 
> 赞同：2
> 
> 时间：2012-10-22T17:09:29.463
> 
> 标签：apache, cakephp, redirect

我已经开发（使用 CakePHP）并在 Apache 服务器（不是由我管理）上部署了一个网站，该服务器在[http://www.domain.com/stats](http://www.domain.com/stats)下提供使用统计服务。我如何告诉 routes.php（或应该在哪里完成）不要尝试将“/stats”与 StatsController 链接，而是显示 Apache 提供的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:52:52.350

通常，当您希望它们可以在蛋糕之外访问时，您会将文件放在 webroot 中。但是，在您的情况下，这听起来是不可能的。您可以尝试在 cake 根目录中的 .htaccess 文件中添加条件。

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   RewriteCond %{REQUEST_URI} !^/stats
   RewriteRule    ^$ app/webroot/    [L]

   RewriteCond %{REQUEST_URI} !^/stats
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

我还没有对此进行测试，但如果路径以 /stats 开头，那么这个想法是为了防止重定向，这将避免蛋糕。

看：

[http://book.cakephp.org/2.0/en/installation/advanced-installation.html](http://book.cakephp.org/2.0/en/installation/advanced-installation.html) [http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

# notifications - 我可以强制用户接受我的应用程序仅作为锁屏应用程序吗？

> ID：13016306
> 
> 赞同：0
> 
> 时间：2012-10-22T17:09:31.380
> 
> 标签：notifications, windows-8, microsoft-metro, windows-phone, lockscreen

我的 Windows 8 应用程序需要运行由接收从 Windows Phone 8 应用程序发送的原始通知触发的后台任务。响应该事件以调用后台任务显然只允许用于锁屏应用程序：

[http://dotnet.dzone.com/articles/windows-store-app-development-10?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+zones%2Fdotnet+%28.NET+Zone%29](http://dotnet.dzone.com/articles/windows-store-app-development-10?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+zones%2Fdotnet+%28.NET+Zone%29)

通常，用户可以控制是否允许应用程序成为锁屏应用程序。不过，就我而言，它必须是这样的，或者基本上是脑死亡。那么，我是否可以强制执行：IOW，通知用户“将其安装为锁屏应用程序，或者根本不安装它”？

我的意思是：假设用户保留最终控制权，是否会让他们知道如果没有他们允许它成为锁屏应用程序，该应用程序将无法正常工作，导致它无法通过认证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:11:11.877

你敢打赌，这就是它的完成方式。

想强迫他们允许吗？禁用“阻止”按钮。（开个玩笑，你不能）

请记住，这是您的应用程序。

查看商店应用程序如何“支持”快照视图。这是一个很好的例子，表明至少可以“满足”认证要求。

![在此处输入图像描述](../Images/945d0f3209734007910cc63c6583e9d1.png)

当您阅读证书要求时。从字面上阅读它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:09:44.600

> 响应该事件以调用后台任务显然只允许用于锁屏应用程序：

不完全正确。但无论如何，对您的问题的简短回答是**否定**的。实际上，我看不出用户为什么要使用您的应用程序，如果它不断地在后台做事并因此耗尽他们的电池寿命，没有充分的理由。

您可能想详细说明您的应用实际会做什么，以获得更准确的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:54:59.263

不，只有用户决定在他们的锁定屏幕上是什么，什么不是。因为用户决定了锁屏应用列表上的内容，所以如果应用不在锁屏上，它们最好应该提供不错的降级体验。可以在应用程序中提供消息以使用户意识到降级的体验，但同样，这最终取决于用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T20:29:41.160

要回答您的问题“它是否会通过认证”，否。您可以在运行时以编程方式请求用户将您的应用升级到锁定屏幕，但如果他们不这样做，您应该考虑优雅地降级。（例如，注册一个计时器事件，让您的应用有时间定期自我更新，或者通过 WNS 发送通知并随后处理它。）

虽然假设您的用户希望在锁定屏幕下运行您的应用程序很好，但在不同条件下提供一致、令人愉快的体验会让您与众不同。

# c# - 在 Visual Studio 2012 中，页面控件和事件转到代码隐藏的哪个位置？

> ID：13016317
> 
> 赞同：7
> 
> 时间：2012-10-22T17:10:06.620
> 
> 标签：c#, events, visual-studio-2012, code-behind, web-controls

我一生都无法弄清楚如何做一些我在 VS2008 和更早的 VS 2012 中永远做的事情。

创建 Web 应用程序时，在页面上放置一些服务器端控件，然后转到代码隐藏，代码编辑器顶部有 2 个下拉菜单。左侧显示页面和页面上的控件，选择其中一个说 GridView，然后将在右侧下拉列表中显示该控件的事件。因此，我可以双击它并创建其中一个事件，而无需记住并在代码中输入该事件。

在我的 VS 2012 中，左侧仅显示页面（大帮助），没有控件。选择该选项后，右侧的下拉菜单会显示控件，但选择它只会加载该页面的设计器和该控件的条目。

是我没有设置的设置，还是如何以及为什么更改，如何在 VS2012 中再次执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:12:33.490

它位于属性窗口中，但您必须单击闪电图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T11:45:35.943

您可以在文件后面的代码顶部重新启用事件导航栏，如下所示：

1) 从**工具**菜单中选择**选项**

2) 从左侧的选项中选择**所有语言**

**3) 从右侧的选项中，单击导航栏**旁边的复选框，然后再次选中它。

将其关闭然后重新打开非常重要。

这将覆盖您的开发环境设置，并强制事件导航栏出现在所有文本编辑器的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T16:09:30.057

双击设计视图中的控件（按钮），为其 Click 事件创建一个处理程序。

# asp.net - 带有 autofac 的 asp.net - webform 上的所有控件均为空

> ID：13016323
> 
> 赞同：0
> 
> 时间：2012-10-22T17:10:35.053
> 
> 标签：asp.net, null, controls, httphandler, autofac

我正在将 autofac 与 asp.net 一起使用。在 Global.asax 我注册了我所有的网页：

```
AssertNotBuilt();
// Register Web Pages
m_builder.RegisterAssemblyTypes(typeof(AboutPage).Assembly)
  .Where(t => t.GetInterfaces().Contains(typeof(IHttpHandler)))
  .AsSelf().InstancePerLifetimeScope();

m_container = m_builder.Build();
m_wasBuilt = true; 
```

然后我使用自定义的 httpHandler 来获取当前网页：

```
 public class ContextInitializerHttpHandler : IHttpHandler, IRequiresSessionState
    {
        public void ProcessRequest(HttpContext context)
        {
            //Get the name of the page requested
            string aspxPage = context.Request.Url.AbsolutePath;

            if (aspxPage.Contains(".aspx"))
            {
                // Get compiled type by path
                Type webPageBaseType = BuildManager.GetCompiledType(aspxPage).BaseType;

                // Resolve the current page
                Page page = (Page)scope.Resolve(webPageBaseType);

                //process request
                page.ProcessRequest(context);

            }
        }
        public bool IsReusable
        {
        get { return true; } 
        }
  } 
```

一切正常，但是当它进入 web page_load 时，我看到页面上存在的所有 asp 控件都是空的。为什么它们为空，我该如何初始化它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:07:27.610

我想到了。我注册的页面不像我可以从我的 http 处理程序的上下文中获取的页面那样编译：

```
string aspxPage = context.Request.Url.AbsolutePath;
Type webPageBaseType = BuildManager.GetCompiledType(aspxPage); 
```

这些是我需要的包含所有控件的页面。问题是，我无法在我的 http 处理程序中注册它们，因为它们是动态的并且以 somewebpage_aspx 的形式查看，并且程序集是 App_Web_somewebpage.aspx.cdcab7d2.r3x-vs2n，Version=0.0.0.0，Culture=neutral，PublicKeyToken =空。

所以解决方案（或hack ..）不是注册网页，而是从范围内解析页面控件：

```
ILifetimeScope scope = IocInitializer.Instance.InitializeCallLifetimeScope();
Type webPageType = BuildManager.GetCompiledType(aspxPage);
Page page = (Page)Activator.CreateInstance(webPageType);

foreach (var webPageProperty in webPageType.GetProperties(BindingFlags.SetProperty | BindingFlags.Instance | BindingFlags.Public))
{
    if (scope.IsRegistered(webPageProperty.PropertyType))
    {
        var service = scope.Resolve(webPageProperty.PropertyType);
        webPageProperty.SetValue(page, service, null);
    }
} 
```

# android - GetElevation 格式问题

> ID：13016331
> 
> 赞同：0
> 
> 时间：2012-10-22T17:10:57.807
> 
> 标签：android, altitude

我使用此方法使用经度和纬度坐标检索高度

```
private double getAltitude(int long, int lat) {
    Double longitude=Double.valueOf((double)(long/1e6)); 
    Double latitude=Double.valueOf((double)(lat/1e6));
    double result = Double.NaN;
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    String url = "http://gisdata.usgs.gov/"
            + "xmlwebservices2/elevation_service.asmx/"
            + "getElevation?X_Value=" + String.valueOf(longitude)
            + "&Y_Value=" + String.valueOf(latitude)
            + "&Elevation_Units=METERS&Source_Layer=-1&Elevation_Only=true";
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = httpClient.execute(httpGet, localContext);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();
            int r = -1;
            StringBuffer respStr = new StringBuffer();
            while ((r = instream.read()) != -1)
                respStr.append((char) r);
            String tagOpen = "<double>";
            String tagClose = "</double>";
            if (respStr.indexOf(tagOpen) != -1) {
                int start = respStr.indexOf(tagOpen) + tagOpen.length();
                int end = respStr.indexOf(tagClose);
                String value = respStr.substring(start, end);
                result = Double.parseDouble(value);
            }
            instream.close();
        }
    } catch (ClientProtocolException e) {} 
    catch (IOException e) {}
    return result;
} 
```

这使用网络服务[http://gisdata.usgs.gov/xmlwebservices2/elevation_service.asmx](http://gisdata.usgs.gov/xmlwebservices2/elevation_service.asmx)

传递的坐标是从谷歌地图获得的int

```
int long=(int)(map.getLong()*1e6);
int lat=(int)(map.getLatitude()*1e6); 
```

参数格式出了点问题，因为使用这种方法我得到完全错误的高度或负值 -1,8398598E4..

我已经用法国某个地方的坐标进行了测试

***44.783333 纬度******10.516667 长***

# android - 准备（）上的 Android MediaPlayer 错误（-1、4）

> ID：13016334
> 
> 赞同：0
> 
> 时间：2012-10-22T17:11:21.910
> 
> 标签：android, media-player, android-mediaplayer

我有一个用于本地音频文件的 MediaPlayer 实例。它起作用了，但是经过一些更改（对我来说很糟糕，无法弄清楚它到底是什么），这个错误开始出现：//message

准备失败。：状态=0xFFFFFFFC

//在LogCat中

```
error(-1, 4)
MEDIA_ERROR(mPreparySync) signal application thread 
```

那么，可能的原因有哪些？要播放的文件存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:13:07.013

出乎意料的是，我猜文件格式不适合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:21:00.737

每当我尝试播放不受支持的文件格式（如 wmv）时，都会出现此错误。所以我会先检查一下这些链接： [Android MediaPlayer 没有准备。错误 (1, -4)](https://stackoverflow.com/questions/11970574/android-mediaplayer-not-preparing-error-1-4) 和 [MediaPlayer.setDataSource 导致有效文件的 IOException](https://stackoverflow.com/questions/9657280/mediaplayer-setdatasource-causes-ioexception-for-valid-file)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:20:24.490

首先检查文件路径，确保你有一个有效的 Uri。另一个原因是你实例化了许多玩家。

# c - 计算C中文本文件中完整基因的数量

> ID：13016342
> 
> 赞同：0
> 
> 时间：2012-10-22T17:11:42.857
> 
> 标签：c, count, counter

我想用 C 语言从一个文本文件中计算基因的数量，一个三元组是一组 3 个字母。基因由包含开头和结尾的三联体序列组成。

*基因开头：* ATG

*基因末端：* TAA、TGA 或 TAG

如果开始和结束之间的至少一个三元组（例如 TAA ATG）不是有效基因，则认为该基因是有效的

文本文件示例，文本文件可以有多行

> **ATG** *GCA TAT ATG TGG AAG* **TAA** GTT GTA **ATG** *CAC GAT GGC AAC GGC GGC* **TAG** CCA ATG AAA

这个例子包含两个基因

我试了至今，不知道如何找到开头然后结尾。

```
 int Count (char *file) {   
    FILE *ptr = NULL;   
    int count = 0;  

    char *start = "ATG";
    char *end = "TAA"; // miss TGA, TAG

    char chr;
    int occur, i;

    ptr = fopen(filename, "r");  //open text file

        if (ptr == NULL)
            return -1;

    chr = fgetc(ptr);
    while(chr != EOF){

             if(ch == start[0]){                 
                  for(i=1; i< StrLen(start); i++){
                    chr = fgetc(ptr);

                       if(chr == EOF){
                            occur = 0;
                            break;
                       }
                       else if(chr != start[i]){
                            chr = fgetc(ptr);
                            occur = 0;
                            break;
                       }
                       else
                            occur = 1;
                  }   

                  if(occur == 1){
                        count++;
                  }

             } else{
                chr = fgetc(ptr);
             }              
        }

    if (!feof(ptr)){
        return -1;
    }
    fclose(ptr);

    return count;
}

int StrLen(char *word){
 int i = 0;
 char c = word[0];
 while(c != '\0'){
  i++;
  c = word[i];
 }
 return i;
} 
```

请帮帮我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:04:33.187

一种方法是使用 flex 创建一个扫描仪，然后让扫描仪完成工作。看看[恐龙](http://dinosaur.compilertools.net/).compilertools.net和[FLEX](http://dinosaur.compilertools.net/flex/index.html)。有一堆老式的**领域特定语言**工具可以帮助为 c/c++ 生成代码，以处理文本序列的语法、句法和解析。您只需在 c 程序中使用生成的代码。附带说明：如果您的要求允许，您可能应该使用`perl`它，因为它是为此类任务量身定制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:08:39.307

尝试从更高的层面看待你的问题。你想找到由一系列三联体组成的基因。为此，您必须阅读三胞胎并测试它是基因的开始还是结束，或者介于两者之间。

所以，这可能看起来像这样：

```
char triplet[4];
while (read_triplet(fp, triplet)) {
    if (is_beginning(triplet)) {
        /* handle beginning */
    } else if (is_end(triplet)) {
        /* handle end of gene */
    } else {
        /* is between */
    }
} 
```

然后为三元组处理定义函数：

```
int read_triplet(FILE *fp, char *triplet) { /* ... */ }
int is_beginning(const char *triplet) { return strcmp(triplet, "ATG") == 0; }
int is_end(const char *triplet)
{
    if (strcmp(triplet, "TAA") == 0)
        return 1;

    if (strcmp(triplet, "TGA") == 0)
        return 1;

    if (strcmp(triplet, "TAG") == 0)
        return 1;

    /* No, it's not an end triplet */
    return 0;
} 
```

希望这有助于开始。

# php - Magento 中允许的内存大小耗尽错误仅在一个子类别中

> ID：13016346
> 
> 赞同：0
> 
> 时间：2012-10-22T17:11:48.413
> 
> 标签：php, magento-1.7

在 Magento 1.7 的一个子类别页面中，我在第 51 行的 Gd2.php 中得到 Allowed memory size exhausted 错误，即： `$this->_imageHandler = call_user_func($this->_getCallback('create'), $this->_fileName);`

因此您会认为某些图像太大或其他什么*，但是*当我查看上一级的类别页面并将其设置为在一个页面上查看所有产品时，它显示正常。因此，它显示了问题类别中的所有产品以及更多产品，而不会耗尽内存。

我检查了类别配置页面，它的设置与所有其他子类别相同，并且该类别没有分配图片，也没有任何不同的布局或皮肤。

--更多信息
我创建了另一个类别，将其命名为相似，添加了所有相同的产品，然后两者都起作用。如果我删除其中一个，从一个或另一个中删除所有产品，或者将一个或另一个设置为禁用或隐藏，那么它会再次出错。错误是相同的，但尝试分配的数量从 13824 变为 3456 字节（共 128mb）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:52:00.890

它似乎是由不良产品引起的。我一次添加一个，直到它起作用，找到一个产品，然后重新创建它。现在它似乎永久有效。

# quartz-scheduler - 石英手动作业运行未获取触发器数据

> ID：13016351
> 
> 赞同：0
> 
> 时间：2012-10-22T17:12:00.587
> 
> 标签：quartz-scheduler

我有一个石英作业，其中有多个触发器，每个触发器都安排在不同的时间运行。每个触发器也有其`<job-data-map></job-data-map>`. 当我手动运行作业时`scheduler.triggerJob(jobName, groupName)`——Quartz 不会拾取与每个触发器关联的作业数据。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:23:38.157

你在回答自己。您有一个没有作业数据的作业和一组与该作业关联的触发器。

当您使用以下方式手动运行作业时：

```
scheduler.triggerJob(jobName, groupName) 
```

它基本上会即时创建一些临时触发器并立即运行该作业。显然，没有与该触发器关联的作业数据。毕竟，如果每个触发器都有不同的作业数据，那么在没有指定触发器的情况下应该使用哪一个呢？

为什么不使用[`triggerJob(JobKey, JobDataMap)`](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/QuartzScheduler.html#triggerJob%28org.quartz.JobKey,%20org.quartz.JobDataMap%29)允许您传递任意作业数据的方法呢？

# django - Django - 避免验证码，机器通过自动化提交数据

> ID：13016352
> 
> 赞同：0
> 
> 时间：2012-10-22T17:12:02.243
> 
> 标签：django, django-forms

有什么方法可以避免验证码识别表单是由人类提交的吗？现在一天，验证码对最终用户来说很烦人。所以我只是想知道，如何在后端处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:43:27.967

与验证码相反的替代方案是蜜罐。这是一个不向用户显示的字段，也不应该填写：但被赋予了一个明显的字段名称，以便自动化系统被吸引填写它。然后后端只需要检查字段不包含值：如果它确实包含任何值，则表单无效。Django 的评论框架使用了这种技术。它不是特别可靠，但它确实过滤掉了一些最糟糕的机器人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:16:02.840

一些论坛会向用户提出简单的问题：

> 什么是反红？
> 
> 什么是 2 + 3？
> 
> 用所有大写字母输入单词“your”
> 
> 如果你有 10 个苹果，我拿走了 3 个，你有几个？

只是简单的问题，但是随机的，因此程序无法轻松回答它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:16:16.310

您可以通过在表单上创建完全被 CSS 隐藏的字段来部分防御不针对任何特定站点的漫游机器人。人类永远不会填写这些字段，但机器人不会意识到该字段对人类是不可见的，并且可能会填写它们。

但是，对于专门为攻击您的站点而编写的机器人，这并不能提供保护。这个问题需要某种验证码或其他。

# objective-c - 子视图显示在父 UIView 的边界之外

> ID：13016354
> 
> 赞同：27
> 
> 时间：2012-10-22T17:12:03.703
> 
> 标签：objective-c, ios

我有一个包含另一个子视图的 UIView。子视图的框架超出了超级视图的范围。但是当我运行应用程序时，整个子视图都是可见的。例子：

```
++++++++++++++++++++++++++++
+                          +
+       Super view         +
+                          +
+                          +
+     --------------------------                    
+     -  Subview           +   -                     
+     -                    +   -                     
+     --------------------------                    
+                          +
+                          +
++++++++++++++++++++++++++++ 
```

应该：

```
++++++++++++++++++++++++++++
+                          +
+       Super view         +
+                          +
+                          +
+     ---------------------+                  
+     -  Subview           +                       
+     -                    +                     
+     ---------------------+                   
+                          +
+                          +
++++++++++++++++++++++++++++ 
```

任何的想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-22T17:14:42.043

如果您在代码中设置视图，请将超级视图的`clipsToBounds`属性设置为`YES`.

如果您在 nib 中设置视图，请打开超级视图**上**的“剪辑子视图”复选框。默认情况下它是关闭的，如下图所示：

![剪辑子视图复选框](../Images/3ce49065cefd275f5c02115b1966a120.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-05T08:20:41.687

以编程方式

**`[YourSuperview setClipsToBounds:YES]`**

# ios - 当 x 轴改变时调整核心图中的 y 轴

> ID：13016357
> 
> 赞同：0
> 
> 时间：2012-10-22T17:12:10.177
> 
> 标签：ios, core-plot

我有一个图表，只显示了一定范围的情节。当我向右滚动时，会显示不同的范围。工作正常。但是如何将 y 轴调整到当前显示的点范围？我不想要情节的所有点的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:26:57.323

唯一的内置方法设置 x 和 y 范围以适合所有绘图数据。您可以将 设置`yRange`为您想要的任何内容。要么在你的数据集中搜索所有可见点并计算这些点的范围，要么使用一些关于数据的知识（例如，它总是在增加），如果你有任何使范围计算更容易的话。

# r - 如何从列表中的所有嵌套列表中直接选择同一列？

> ID：13016359
> 
> 赞同：35
> 
> 时间：2012-10-22T17:12:28.933
> 
> 标签：r, nested-lists

是否可以直接选择列表中所有嵌套列表的列？
我的列表是使用带有 table() 的 aggregate() 创建的：

```
AgN=aggregate(data,by=list(d$date),FUN=table,useNA="no") 
```

`AgN$x`好像：

```
$`0`

      1           2           3           9          11 
0.447204969 0.438509317 0.096894410 0.009937888 0.007453416 

$`1`

          1           2           4           8          11 
0.489974937 0.389724311 0.102756892 0.006265664 0.011278195 

…

$n 
```

我想获取每个表的特定列的向量，例如一个包含所有名为“1”的列的值的向量。我仍然是 R 初学者，但即使经过长时间的搜索和尝试，我也没有找到好的解决方案。如果我想得到一个列表的字段，我可以简单地用括号索引它，例如[i，j]。
在网上我找到了一些矩阵的例子，所以我尝试做同样的事情，起初只选择一个嵌套列表的列`AgN$x[1][1]`，但仍然选择了整个列表：

> $`0`
> 
> ```
>  1           2           3           8          11 
> ```
> 
> 0.447204969 0.438509317 0.096894410 0.009937888 0.007453416

我的下一次尝试是`AgN$x[[1]][1]`，它正在工作：

> ```
>  1 
> ```
> 
> 0.447205

所以我尝试同样选择所有嵌套列表的每一列的值：

```
AgN$x[[1:length(AgN$x]][1]
Recursive indexing failed at level 2 
```

显然问题在于，如果使用双括号，则禁止选择范围。

我最后一次尝试是使用 for 循环：

```
cduR=NULL 
for (i in 1:length(AgN$x)){
t=AgN$x[[i]]
cduR=c(cduR,as.vector(t["1"]))
} 
```

最后，到目前为止，这似乎奏效了。但是这样每次我想选择列时我都必须建立一个循环。没有直接的方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-22T17:30:00.327

假设您有以下内容：

```
myList <- list(`0` = c(`1` = 10, `2` = 20, `3` = 30, `4` = 72),
               `1` = c(`1` = 15, `2` = 9, `3` = 7))
myList
# $`0`
#  1  2  3  4 
# 10 20 30 72 
# 
# $`1`
#  1  2  3 
# 15  9  7 
```

使用`sapply()`or`lapply()`进入您的列表并提取您想要的任何列。一些例子。

```
# As a list of one-column data.frames
lapply(myList, `[`, 1)
# $`0`
#  1 
# 10 
# 
# $`1`
#  1 
# 15 

# As a list of vectors
lapply(myList, `[[`, 1)
# $`0`
# [1] 10
# 
# $`1`
# [1] 15

# As a named vector
sapply(myList, `[[`, 1)
#  0  1 
# 10 15 

# As an unnamed vector
unname(sapply(myList, `[[`, 1))
# [1] 10 15 
```

也可以让您到达那里的其他语法变体包括：

```
## Same output as above, different syntax
lapply(myList, function(x) x[1])
lapply(myList, function(x) x[[1]])
sapply(myList, function(x) x[[1]])
unname(sapply(myList, function(x) x[[1]])) 
```

## *嵌套*列表示例

如果您*确实*有嵌套列表（列表中的列表），请尝试以下变体。

```
# An example nested list
myNestedList <- list(A = list(`0` = c(`1` = 10, `2` = 20, `3` = 30, `4` = 72),
                              `1` = c(`1` = 15, `2` = 9, `3` = 7)),
                     B = list(`0` = c(A = 11, B = 12, C = 13),
                              `1` = c(X = 14, Y = 15, Z = 16)))

# Run the following and see what you come up with....
lapply(unlist(myNestedList, recursive = FALSE), `[`, 1)
lapply(unlist(myNestedList, recursive = FALSE), `[[`, 1)
sapply(unlist(myNestedList, recursive = FALSE), `[[`, 1)
rapply(myNestedList, f=`[[`, ...=1, how="unlist") 
```

注意for`lapply()`和`sapply()`需要使用`unlist(..., recursive = FALSE)`while for `rapply()`(recursive apply)，直接引用列表即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-02T04:13:30.960

我认为没有明确列出但也有效的一个示例是，如果您有一个带有行和列名称的 data.frames、matrix、xts、zoo 等列表，您可以随后返回一整行、列或集合以下语法：

### 包含格式对象的列表：

```
 0%              1%             10%              50%              90%             99%            100%
Sec.1           -0.0005259283   -0.0002644018   -0.0001320010   -0.00005253342    0.00007852480    0.0002375756    0.0007870917
Sec.2           -0.0006620675   -0.0003931340   -0.0001588773   -0.00005251963    0.00007965378    0.0002121163    0.0004190017
Sec.4           -0.0006091183   -0.0003994136   -0.0001859032   -0.00005230263    0.00010592379    0.0003165986    0.0007870917
Sec.8           -0.0007679577   -0.0005321807   -0.0002636040   -0.00005232452    0.00014492480    0.0003930241    0.0007870917
Sec.16          -0.0009055318   -0.0007448356   -0.0003449334   -0.00005290166    0.00021238287    0.0004772207    0.0007870917
Sec.32          -0.0013007873   -0.0009552231   -0.0005243472   -0.00007836480    0.00028928104    0.0007382848    0.0013002350
Sec.64          -0.0016409500   -0.0012383696   -0.0006617173   -0.00005280668    0.00042354939    0.0011721508    0.0018579966
Sec.128         -0.0022575471   -0.0018858823   -0.0008466965   -0.00005298436    0.00068616576    0.0014665900    0.0027616991 
```

### 代码（注意空的第一行索引，指定所有行）

```
simplify2array(lapply(listOfIdenticalObjects,`[`,,"50%")) 
```

### 输出

```
 ListItem1        ListItem2        ListItem3        ListItem4         ListItem5
Sec.1           -0.00005253342   -0.00004673443    -0.0001112780   -0.00001870960    -0.00002051009
Sec.2           -0.00005251963   -0.00004663200    -0.0001112904   -0.00001878075     0.00000000000
Sec.4           -0.00005230263   -0.00004669297    -0.0001112780   -0.00001869911    -0.00002034403
Sec.8           -0.00005232452   -0.00004663635    -0.0001111296   -0.00001926096     0.00000000000
Sec.16          -0.00005290166   -0.00004668207    -0.0001109570    0.00000000000     0.00000000000
Sec.32          -0.00007836480    0.00000000000    -0.0001111667   -0.00001894496     0.00000000000
Sec.64          -0.00005280668    0.00000000000    -0.0001110926   -0.00001878305     0.00000000000
Sec.128         -0.00005298436    0.00004675191     0.0000000000   -0.00005582568     0.00001020502 
```

# java - Java：ArrayList 到字符串？

> ID：13016361
> 
> 赞同：0
> 
> 时间：2012-10-22T17:12:38.087
> 
> 标签：java, arrays, string, arraylist

我尝试在没有任何 for 循环的情况下打印输入数字的反向。但是我在打印 Arraylist 时遇到了一些问题。如何将 Arraylist [3, 5, 4, 1] 打印为 3541 - 不带括号、逗号和空格？

如果不可能，如何将我的 ArrayList 元素添加到 stringlist 然后打印？

```
public static void main(String[] args) {

    int yil, bolum = 0, kalan;
    Scanner klavye = new Scanner(System.in);
    ArrayList liste = new ArrayList();
    //String listeStr = new String();
    System.out.println("Yıl Girin: "); // enter the 1453
    yil = klavye.nextInt();

    do{ // process makes 1453 separate then write in the arraylist like that [3, 5, 4,1]

        kalan = yil % 10;
        liste.add(kalan);
        bolum = yil / 10;
        yil = bolum;

    }while( bolum != 0 );

    System.out.println("Sayının Tersi: " + ....); //reverse of the 1453
    klavye.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:16:16.347

*   将条目作为字符串读取
*   反转它`String reverse = new StringBuilder(input).reverse().toString();`
*   可选：如果您需要使用该 int 进行一些计算，请将其解析为 int。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:28:08.807

**- 反向**可以很容易地使用`Collections.reverse(List<?> l)`

**例如：**

```
ArrayList<String> aList = new ArrayList<String>();

Collections.reverse(aList); 
```

**-**使用`For-Each`循环打印出来。

**例如：**

```
for(String l : aList){

    System.out.print(l);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:23:30.103

```
public static void main(String[] args) {

    int yil, bolum = 0, kalan;
    ArrayList liste = new ArrayList();
    System.out.println("Yıl Girin: "); // enter the 1453
    yil = 1453;

    String s="";
    do { // process makes 1453 separate then write in the arraylist like that [3, 5, 4,1]

        kalan = yil % 10;
        liste.add(kalan);
        s= s + kalan;  // <------- THE SOLUTION AT HERE  -------

        bolum = yil / 10;
        yil = bolum;

    } while (bolum != 0);

    System.out.println("Sayının Tersi: " + s ); //reverse of the 1453

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:22:51.510

```
List strings = ...
List stringsRevers = Collections.reverse(strings);
// Have to reverse the input
// 1,23 -> 231 
// otherwise it would be 321   
StringBuilder sb = new StringBuiler();
for(String s: stringsRevers ){
    sb.ppend(s);
}
String out = sb.toString(); 
```

# c# - 覆盖样式中的视觉状态而不覆盖控件模板

> ID：13016364
> 
> 赞同：2
> 
> 时间：2012-10-22T17:12:43.373
> 
> 标签：c#, silverlight, xaml, silverlight-4.0, visualstatemanager

我正在尝试稍微调整现有的（相当复杂的）控件。到目前为止，除了对动画进行一些调整外，我可以对样式进行所有更改。我知道我可以覆盖样式中的 controltemplate 并在那里更改 VisualStateManager 的东西，但我真的不想碰它的模板。有谁知道通过样式更改 VisualState 而不必复制完整的 ControlTemplate 的方法？（或者有没有人确定它不能完成？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:10:29.357

您必须在 ControlTemplate 中引用控件及其属性以在状态更改期间为它们设置动画，所以是的，您必须复制控件模板。您还能如何指定您实际想要为特定状态更改的内容？

# javascript - 使用 JS (jQuery) 从 JSON 对象创建无序列表

> ID：13016366
> 
> 赞同：1
> 
> 时间：2012-10-22T17:12:57.673
> 
> 标签：javascript, ajax, jquery

我想在下面的代码中使用 jQuery`.each()`为 JSON`entry`对象创建一个无序列表

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "http://query.yahooapis.com/v1/public/yql?q=SELECT%20title%2C%20description%2C%20link%2C%20pubDate%0AFROM%20feed(0%2C5)%0AWHERE%20url%3D'http%3A%2F%2Ffeeds.feedburner.com%2FffAggregator'&format=json&diagnostics=true&callback=friendFeed",
        data: { get_param: 'value' },
        success: function (data) {
            var names = data

            $('#results').html(data);
        }
    });
}); 
```

我想单独使用 JavaScript (jQuery) 来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:14:41.370

在您的 AJAX 请求中将 JSONP 设置为数据类型并指定`friendFeed`为回调函数。

在成功回调函数中，您可以直接从 JSON 数据构建无序列表。只需遍历您要使用的对象并将`li`元素附加到`ul`元素。例子：

```
$.ajax({
    type: "GET",
    url: "http://query.yahooapis.com/v1/public/yql?q=SELECT%20title%2C%20description%2C%20link%2C%20pubDate%0AFROM%20feed(0%2C5)%0AWHERE%20url%3D'http%3A%2F%2Ffeeds.feedburner.com%2FffAggregator'&format=json&diagnostics=true&callback=friendFeed",
    data: { get_param: 'value' },
    jsonpCallback: 'friendFeed',
    dataType: "jsonp",
    success: function (data) {
        var obj = data.query.results.entry,  // get entry object (array) from JSON data
            ul = $("<ul>");                    // create a new ul element
        // iterate over the array and build the list
        for (var i = 0, l = obj.length; i < l; ++i) {
            ul.append("<li><a href='" + obj[i].link.href + "'>" + obj[i].title.content + "</a></li>");
        }
        $("#results").append(ul);    // add the list to the DOM
    }
}); 
```

# cpu - 计算英特尔处理器的 gFLOP

> ID：13016369
> 
> 赞同：2
> 
> 时间：2012-10-22T17:13:07.963
> 
> 标签：cpu, intel, processor, flops

如何测量我的计算机每个周期的 gFLOP？我正在使用以下处理器 - Intel(R) Pentium(R) CPU G620。它运行@ 2.60 GHz。

# java - 杰克逊双向映射

> ID：13016373
> 
> 赞同：0
> 
> 时间：2012-10-22T17:13:24.313
> 
> 标签：java, json, jackson

我在父母和它的孩子之间有一个oneToMany双向关系，2个jsp页面来显示数据。对于父页面，它显示父页面和底层子页面。在子页面中，它显示了孩子及其父母。所以我需要一个双向结构。

父页面：父到子 子页：子到父

我使用杰克逊并尝试使用@JsonBackReference，但这实际上跳过了单向关系。这样做的正确方法是什么？我知道如果我只设置一种方式关系它可以工作。但是因为我使用 jpa 并且需要以两种方式加载数据。这意味着我必须在加载后以一种方式修剪它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:57:42.553

看起来您想要（反）序列化循环图而不进入“无限循环”。

@JsonIdentityInfo注释对此非常[有用](http://wiki.fasterxml.com/JacksonFeatureObjectIdentity)，但我想它在 JSP 中不起作用：您可能正在使用 AJAX 加载 JSON 数据，我认为 JSON.parse() 不支持对象引用。

或者您可以使用[自定义序列化程序](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)。据我所知，没有简单的方法可以向 Jackson 提供有关序列化上下文的信息。可以使用[杰克逊值注入](http://wiki.fasterxml.com/JacksonFeatureValueInjection)或将数据存储在 ThreadLocal 中来实现这一目标。

# operating-system - iret 和 int 指令的堆栈

> ID：13016375
> 
> 赞同：1
> 
> 时间：2012-10-22T17:13:32.303
> 
> 标签：operating-system, x86, kernel, interrupt

中断会导致 CPU 将 EFLAGS、CS 和 IP 寄存器保存到“堆栈”中，然后 iret 指令将它们从堆栈中弹出。这个堆栈在哪里？CPU如何知道它（我假设某个地方有一些寄存器）？我想要肮脏的细节。我正在研究基于 Unix 的系统。说Linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T05:07:17.667

首先，查看英特尔手册了解所有细节： http: [//www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

至于你的问题：

> 堆栈位于何处？

在中断时，x86 内核从任务状态段 (TSS) 加载堆栈指针。IDT 通过任务选择器字段指定要使用的 TSS。在 32 位模式下，TSS 提供 4 个堆栈指针，每个保护级别一个。由于保护级别通常只有 0 或 3，因此只有两个堆栈相关。在 64 位模式下，中断描述符条目可以选择指定索引 0-7，在给定的 64 位 TSS 中使用哪个堆栈指针。但是，由于重入问题，这种 64 位堆栈选择机制大部分都被破坏了，并且操作系统求助于软件切换。查看 x86 程序员参考卷 3，图 7-2。

如果中断将内核移动到更高的特权级别（数值上较低的 CPL），那么内核会将中断堆栈帧推送到这个新堆栈上，而不是被中断进程的当前堆栈。如果特权级别保持不变，那么内核只是将中断堆栈帧推送到当前堆栈上。

> CPU是怎么知道的？

中断描述符表 (IDT) 为每个中断向量提供一个描述符，0-255。描述符条目告诉内核使用哪个 TSS（即堆栈），用户模式是否可以通过向量调用，是否在 ISR 条目上禁用中断等。参见 PRM 第 3 卷第 6 章。所以，所有的中断处理都是真的由 IDT 中的信息锚定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:52:49.270

中断不会导致操作系统保存 EFLAGS、CS 和 IP。CPU 自己执行此操作，无需操作系统。

第一个堆栈是由复位后在 CPU 上执行的第一个代码建立的。通常它是首先执行此操作的 ROM BIOS 代码。它设置 SS 和 SP 寄存器以指示堆栈位置。然后堆栈可以并且通常是由引导加载程序更改/移动，然后它可能会被内核再次移动。

只要有足够大小的可读可写内存，上述代码段想要定位堆栈的任何位置都可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:28:32.657

SS:(E)SP - SS(堆栈段) SS 是 CPU 内部可用的 16 位寄存器，(E)SP 是 16（实模式）、32、64 位大小的保护模式。

1.  在初始 BIOS POST 时，有效的 SS:(E)SP 由 BIOS 设置。
2.  BIOS 将控制权交给 MBR，然后在您的 MBR 引导加载程序代码中，您可以重置并设置有效的 SS:(E)SP 值。
3.  在保护模式下，我们需要为添加段CS，DS，SS设置有效的GDT值，然后将适当的值加载到段中是CPU的责任，因为这个OS应该协调。

# javascript - javascript单击时平滑滚动

> ID：13016379
> 
> 赞同：16
> 
> 时间：2012-10-22T17:13:58.157
> 
> 标签：javascript, scrolltop

我正在使用这个链接：

```
<a class="" onclick="location.href='#top'" href="superContent">superContent</a> 
```

它同时做两件事：

1.  将用户跳转到页面顶部
2.  执行这个其他（不相关的）ajax 加载功能

一切都很好，除了我试图弄清楚如何让它更顺利地滚动到顶部。我尝试添加 .scroll 以将其附加到我的 jquery scrollTo 插件，但没有任何反应，这可能与我使用 javascript onclick 的事实有关，而 href 属性则完全是其他事情。

有没有办法将动画平滑滚动附加到 onclick="location.href='#top'" ？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-22T17:16:57.753

试试这个，它会为`scrollTop()`函数设置动画。

设置链接的id：

```
<a id="link">link</a> 
```

jquery滚动：

```
$('#link').click(function(e){
  var $target = $('html,body');
  $target.animate({scrollTop: $target.height()}, 500);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-23T22:28:15.417

```
document.querySelector('button').addEventListener('click', function(){
   scrollTo( document.querySelector('aside'), Math.floor(Math.random() * 1000) + 1  , 600 );   
});

function scrollTo(element, to, duration) {
    var start = element.scrollTop,
        change = to - start,
        currentTime = 0,
        increment = 20;

    var animateScroll = function(){        
        currentTime += increment;
        var val = Math.easeInOutQuad(currentTime, start, change, duration);
        element.scrollTop = val;
        if(currentTime < duration) {
            setTimeout(animateScroll, increment);
        }
    };
    animateScroll();
}

//t = current time
//b = start value
//c = change in value
//d = duration
Math.easeInOutQuad = function (t, b, c, d) {
  t /= d/2;
  if (t < 1) return c/2*t*t + b;
  t--;
  return -c/2 * (t*(t-2) - 1) + b;
};
```

```
button{ float:left; }
aside{ height:200px; width:50%; border:2px dashed red; overflow:auto; }
aside::before{
  content:''; 
  display:block; 
  height:1000px;  
  background: linear-gradient(#3f87a6, #ebf8e1, #f69d3c);
}
```

```
<button>click to random scroll</button>
<aside></aside>
```

# meteor - 将 Filepicker.IO 与 Meteor 集成

> ID：13016382
> 
> 赞同：4
> 
> 时间：2012-10-22T17:14:05.793
> 
> 标签：meteor, filepicker.io

我一直在检查 Meteor 作为 Web 应用程序的潜在框架，我需要做的一件事是允许我的客户通过应用程序上传文件。我开始检查 Filepicker.io 作为整合此功能的途径，但我无法让拖放字段呈现。它在测试 Rails 应用程序上运行良好，但在我的演示 Meteor 应用程序上，它看起来就像一个空白输入框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:26:02.497

[我通过 wget http://api.filepicker.io/v1/filepicker.js](http://api.filepicker.io/v1/filepicker.js)将库导入到我的 /client 文件夹

那么我可以

```
meteor.startup ->
  filepicker.setKey 'lalala' 
```

然后创建小部件

```
Template.fileUpload.rendered = ->  
  filepicker.constructWidget document.getElementById('uploadWidget') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T10:08:24.203

为了方便起见，我发布了一个可以与 Meteorite 一起安装的 Atmosphere 包（ [github loadpicker ）。](https://github.com/guido4000/loadpicker)

文件选择器脚本在调用时动态加载，并且在文件选择器成功回调上设置密钥。从创建的模板或渲染的模板加载脚本是保存的。

安装：

```
mrt add loadpicker 
```

使用您的个人 filepicker.io 键和回调函数调用脚本以创建拖放区域：

```
loadPicker(key, cb); 
```

示例集成如下所示：

```
 if (Meteor.isClient) {
  Session.set("widgetSet", false);
  var key = "xxxxxxxxxxxxxxxxx";
  var cb = function () {
    filepicker.makeDropPane($('#exampleDropPane')[0], {
      dragEnter: function() {
        $("#exampleDropPane").html("Drop to upload").css({
          'backgroundColor': "#E0E0E0",
          'border': "1px solid #000"
        });
      }
    });
  };

  Template.home.created = function ( ) { 
    if (!Session.get("widgetSet")) {  
      loadPicker(key, cb);
    }
  };
} 
```

HTML

```
<h1>Drop Pane</h1>
<div id="exampleDropPane">Drop Here!</div>
<div><pre id="localDropResult"></pre></div> 
```

CSS

```
#exampleDropPane {
  text-align: center;
  padding: 20px;
  background-color: #F6F6F6;
  border: 1px dashed #666;
  border-radius: 6px;
  margin-bottom: 20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:16:15.923

我现在正在处理同样的问题，但那是因为您需要在模板渲染后渲染文件选择器。现在文件选择器在模板之前运行，所以在模板渲染之后再次运行文件选择器渲染代码。

```
filepicker.constructWidget(document.getElementById('inputID')); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T05:01:03.733

以下代码在咖啡脚本中。

首先，您需要正确设置密钥：

```
Meteor.startup ->
  filepicker.setKey 'YOUR API KEY' 
```

然后，您可以通过使用 API 来设置客户端行为：

```
'click .upload': (e) ->
  filepicker.pickMultiple
    extensions: ['.png', '.jpg', '.gif', '.doc', '.xls', '.ppt', '.docx', '.pptx', '.xlsx', '.pdf', '.txt']
    container: 'modal'
    services: ['COMPUTER']
    (fpfiles) =>
        #do whatever you want to process the data filepicker provided you after upload was done
        Meteor.call 'uploadFiles', fpfiles 
```

# c# - 企业库错误

> ID：13016383
> 
> 赞同：7
> 
> 时间：2012-10-22T17:14:07.630
> 
> 标签：c#, enterprise-library

我收到了关于我们的实时环境中出现罕见且间歇性错误的报告。我试图重现它没有成功，而且错误本身有点神秘。除此之外，它似乎涉及到企业库跟踪（我们使用的是 5.0 版）——总而言之，有点痛苦。这发生在 Windows Sever 2008 上，应用程序位于 .Net Framework 4.0 (WPF) 上。

错误消息和堆栈跟踪如下：

```
ArgumentNullException: Value cannot be null. Parameter name: category

<StackTrace>  
  Server stack trace:
  at Microsoft.Practices.EnterpriseLibrary.Logging.LogEntry.BuildCategoriesCollection(String category)
  at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.WriteTraceMessage(String message, String entryTitle, TraceEventType eventType)
  at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.WriteTraceEndMessage(String entryTitle)
  at Microsoft.Practices.EnterpriseLibrary.Logging.Tracer.Dispose()
  at TestApplication.ViewModelTest.&lt;UpdateUsers&gt;d__1a.MoveNext()

  Exception rethrown at [0]:
  at System.Runtime.CompilerServices.AsyncVoidMethodBuilder.&lt;SetException&gt;b__1(Object state)
  at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
  at System.Threading.ExecutionContext.runTryCode(Object userData)
  at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
  at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
  at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
  at System.Threading.ThreadPoolWorkQueue.Dispatch()
  at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
</StackTrace> 
```

任何人都可以阐明可能导致这种情况的原因吗？

编辑：我没有修改 LogEntry.BuildCategoriesCollection。BuildCategoriesCollection(String category) 方法的输入为空。

UpdateUsers 方法如下：

```
async void UpdateUsers()
{
    Processing = true;

    using (traceMgr.StartTrace("Trace"))
        using (var engine = new EngineClient())
        {
            Users = new List<UserMasterDataModel> { _blankUser };
            var users = await engine.GetPossibleTagsTask(SelectedOutcomeId, _queue.SystemCd, _queue.QueueCd);
            Users.AddRange(users);
        }

    if (SelectedUser != _blankUser)
    {
        // If null user selected then initialize to the case's tag, otherwise try to find the previously selected UserName
        var userNameToFind = SelectedUser == null ? _details.TagTo : SelectedUser.UserName;
        SelectedUser = Users.FirstOrDefault(user => user.UserName == userNameToFind) ?? _blankUser;

        OnPropertyChanged("SelectedUser");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T22:58:33.080

在以前的版本中，这个问题似乎也是 E-Lib 的一个已知错误。

称为：从多个线程使用日志记录 AB 时出现未处理的异常。

“根本问题是，在 .NET 2.0 RTM 中，如果创建子线程时存在这样的堆栈，则父线程的操作堆栈与其子线程共享。”

在这里阅读更多：http: [//entlib.codeplex.com/workitem/9592](http://entlib.codeplex.com/workitem/9592)

很难为此提出通用解决方案，因为它在很大程度上取决于您的应用程序的架构。

# javascript - wordpress xmlrpc 调用 wp.editPost 使内容为空

> ID：13016388
> 
> 赞同：-2
> 
> 时间：2012-10-22T17:14:15.323
> 
> 标签：javascript, wordpress, xml-rpc

我正在使用[wordpress xmlrpc javascript api](https://github.com/developerworks/wordpress-xmlrpc-javascript-api)，这是一个简洁的 javascript api，用于从 javascript 访问 wordpress 的 xmlrpc api。

我的问题是，`wp.editPost`退货后`true`，帖子内容简直是空白！

这是我的相关代码：

```
var wp = new WordPress(blog, username, password);
var blogId = 1;
var object = wp.getPost(blogId, postId);
// alert(JSON.stringify(object));
var currentContent = object.post_content;
alert(currentContent); // works fine
var newContent = currentContent.replace('</ul>', strToInsert + '</ul>')
alert(newContent); // works, and it is what I want the content to be after editing
object = wp.editPost(blogId, postId, {post_content:newContent});
alert(JSON.stringify(object)); // works, alerts true 
```

现在，刷新我的**页面**，更改不会发生，而是我的内容现在变为空。

![空内容](../Images/d4bd0d4e61c2a6b1124327534f450a6d.png)

知道有什么问题吗？我确信它必须与wordpress有关。我可以调查一下，但我想知道你们是否也有类似的问题！

注意：我在登录时刷新了页面。这有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:54:08.847

好吧，问题出在`newContent`. 它是 html，而 wordpress 不喜欢它。经过多次尝试，我`newContent`在发送之前通过转义解决了它，使用[这个 SO answer's code](https://stackoverflow.com/a/7124052/1273830)。而且，它现在有效。

感谢@Anentropic。

# c - 使用带有逻辑运算符的标志而不是条件语句（例如 if()）

> ID：13016389
> 
> 赞同：0
> 
> 时间：2012-10-22T17:14:15.473
> 
> 标签：c, optimization, flags, logical-operators

假设我想在设置标志时更改变量的值。一个明显的方法如下。

```
int a = 1, b = 2;
if(Flag)
    {
    a=b;
    Flag = false;
    } 
```

然而，WRT 为执行操作而生成的代码是非常低效的。我发现以下生成的代码减少了 40% 来执行操作。

```
a = ((!Flag)*a)+((Flag)*b);
Flag = false; 
```

我的问题：我宁愿不使用乘法“*”运算符，因为乘法/除法运算符在我的目标上执行速度较慢。在不增加代码空间的情况下，我还能用什么来加快速度？

**编辑：**目标设备是在 kHz 范围内运行的 MSP430。代码空间和执行时间至关重要。编译器是 IAR C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:30:52.610

我会这样写，不考虑微优化：

```
int b = 2, a = Flag ? b : 1;

Flag = false; 
```

看看效率如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:28:49.617

以下内容无需使用乘法或任何条件即可实现您想要的逻辑：

```
unsigned int mask = Flag-1;
a = (mask & a) | (~mask & b); 
```

所以当 Flag==1 你得到

```
a = (0x0 & a) | (0xffff & b); 
```

当 Flag==0 你得到

```
a = (0xffff & a) | (0x0 & b); 
```

（你也不需要一个单独的变量来掩码。你可以做`--Flag`并使用`Flag`而不是`mask`，我只是认为它会使解决方案更清晰一些。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:18:11.823

您的编译器能够比此*hack*更好地优化您的代码（检查生成的程序集）。除了在比较慢的处理器上（例如 PowerPC），你应该避免它。无论如何，看看[这里](http://cellperformance.beyond3d.com/articles/2006/04/more-techniques-for-eliminating-branches.html)，如果你仍然有动力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:28:12.950

您的初始代码尽可能有效。如果您能够通过其他一些晦涩难懂的混淆生成更有效的代码，那么您的编译器的优化要么配置不正确，要么写得不好。前者更有可能，但如果是后者，请询问 IAR 为什么他们的编译器会生成错误的代码。不要试图通过编写混淆代码来修复他们的编译器。

您不需要使用条件 ?: 运算符，它应该生成完全相同的代码。

此外，我对 MSP430 了解不多，但它平均为 16 位，并且没有任何超高级指令缓存或分支预测，如果你认为它有，你只是在自欺欺人。即使有，您仍然不应该混淆您的代码。

# android - 获取在 Android 中使用数据的应用程序列表

> ID：13016390
> 
> 赞同：1
> 
> 时间：2012-10-22T17:14:22.913
> 
> 标签：android

我想为 Android 创建数据使用监控工具。我浏览了 Android SDK 中可用的一些 API，发现 TrafficStats 类提供了获取特定 UID 的数据使用情况的方法。我需要知道是否有一种方法可以识别应用程序何时开始发送或接收数据。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:39:21.743

> 我需要知道是否有一种方法可以识别应用程序何时开始发送或接收数据。

不是真的，因为这可能在任何时候发生，并且没有为此发送到其他应用程序（例如，广播）的事件。

话虽如此，当`TrafficStats`UID 的值在检查之间发生变化时，您就知道它访问了网络。

# mysql - 使用声明的语法错误

> ID：13016391
> 
> 赞同：1
> 
> 时间：2012-10-22T17:14:25.440
> 
> 标签：mysql, sql

使用 "declare" 时出现语法错误：

```
 delimiter $$
  begin

 declare @StartDay INT, @EndDay INT, @StartMonth INT, @EndMonth INT
 Select @StartDay = 01, @StartMonth = 10, @EndDay = 30, @EndMonth = 09

 Select year(a.created_at) as years , jd.JobDomain, count(a.Id) as nb_answer,   a.Job_id,   j.JobTitle 
 from JobAppliance a
 inner join Job j on a.Job_id =  j.PublicId
 inner join JobDestination d on j.Id=d.Job_id
 inner join Jjobdomain jd on  j.Id = jd.Job_id

 and 
 (
 @StartMonth = @EndMonth And 
 Month(a.created_at) = @StartMonth And 
 Day(a.created_at) >= @StartDay And 
 Day(a.created_at) <= @EndDay
 ) Or (
 @StartMonth != @EndMonth And (
 (
 Month(a.created_at) = @StartMonth And
 Day(a.created_at) >= @StartDay
 ) Or (
 Month(a.created_at) Between @StartMonth + 1 And @EndMonth - 1
 ) Or (
 Month(a.created_at) = @EndMonth And
 Day(a.created_at) <= @EndDay
 )
 )
)

group by year(a.created_at) , a.Job_id, j.JobTitle;

end$$
delimiter ; 
```

我正在使用 Mysql 工作台

编辑 ：

```
You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near 
'@StartDay int, @EndDay int, @StartMonth int, 
     @EndMonth intSelect @StartDay = 0' at line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:24:12.507

你错过了行分隔符

```
DELIMITER $$

DECLARE MyVal INT$$

SELECT
...
$$

DELIMITER ; 
```

另一方面，为什么必须更改分隔符？

并且 Declare 只能在文档中所述的 BEGIN 和 END 之间使用。因此，如果您没有在存储过程（例如简单查询）中使用这部分，则不能使用 DECLARE

所有以@ 开头的变量都是会话变量，不需要声明。

所以这里有一份给你的copy'n'paste

```
SET @StartDay = 01, @StartMonth = 10, @EndDay = 30, @EndMonth = 09; -- look here the ;

Select year(a.created_at) as years , jd.JobDomain, count(a.Id) as nb_answer,   a.Job_id,   j.JobTitle 
from JobAppliance a
inner join Job j on a.Job_id =  j.PublicId
inner join JobDestination d on j.Id=d.Job_id
inner join Jjobdomain jd on  j.Id = jd.Job_id

and 
(
@StartMonth = @EndMonth And 
Month(a.created_at) = @StartMonth And 
Day(a.created_at) >= @StartDay And 
Day(a.created_at) <= @EndDay
) Or (
@StartMonth != @EndMonth And (
(
Month(a.created_at) = @StartMonth And
Day(a.created_at) >= @StartDay
) Or (
Month(a.created_at) Between @StartMonth + 1 And @EndMonth - 1
) Or (
Month(a.created_at) = @EndMonth And
Day(a.created_at) <= @EndDay
)
)
)

group by year(a.created_at) , a.Job_id, j.JobTitle; 
```

# jquery - 使用 jQuery + 添加导航箭头将 div 滑出屏幕

> ID：13016392
> 
> 赞同：2
> 
> 时间：2012-10-22T17:14:26.393
> 
> 标签：jquery, animation, html, carousel, slide

任何人都可以帮助在此处找到的代码片段中添加导航箭头

[使用 jQuery 将 div 滑出屏幕](https://stackoverflow.com/questions/4741880/slide-a-div-offscreen-using-jquery) 并给出第一个答案.... [http://jsfiddle.net/jtbowden/ykbgT/2/](http://jsfiddle.net/jtbowden/ykbgT/2/)

我希望能够添加方向箭头或上一个/下一个链接

下面的代码

html:

```
<div id="container">

    <div id="box1" class="box">Div #1</div>
    <div id="box2" class="box">Div #2</div>
    <div id="box3" class="box">Div #3</div>
    <div id="box4" class="box">Div #4</div>
    <div id="box5" class="box">Div #5</div>

</div> 
```

CSS：

```
body {
    padding: 0px;    
}

#container {
    position: absolute;
    margin: 0px;
    padding: 0px;
    width: 100%;
    height: 100%;
    overflow: hidden;  
}

.box {
    position: absolute;
    width: 50%;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 150%;
    top: 100px;
    margin-left: -25%;
}

#box1 {
    background-color: green;
    left: 50%;
}

#box2 {
    background-color: yellow;
}

#box3 {
    background-color: red;
}

#box4 {
    background-color: orange;
}

#box5 {
    background-color: blue;
} 
```

javascript:

```
$('.box').click(function() {

    $(this).animate({
        left: '-50%'
    }, 500, function() {
        $(this).css('left', '150%');
        $(this).appendTo('#container');
    });

    $(this).next().animate({
        left: '50%'
    }, 500);
}); 
```

它工作得很好，但导航是一个方向，通过单击框激活

提前致谢

奥尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:48:01.893

Should be easy to do :)

make a "navigation control" wrapper element:

```
var $controller = $('<div class="control-wrapper" />); 
```

add 2 main elements to act as left and right movement buttons:

```
var $left = $('<span class="move left" />').appendTo($controller),
    $right = = $('<span class="move right"/>').appendTo($controller); 
```

add an event handler to each movement element for each animation:

```
$left.click(function(event) {
 ////MOVE THE NAV LEFT
};

$right.click(function(event) {
 ////MOVE THE NAV RIGHT
}; 
```

replace the comments with function calls to move the nav (you already have the logic to move it left ;) )

NOTE: Make sure you add "**cursor: pointer**" to the button element CSS classes so that they appear to be clickable to the user.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T09:56:08.057

如果有人对此感兴趣，可以为类似的问题提供更详细的答案，而且效果很好！[jQuery 动画 div 使用导航箭头按顺序打开/关闭屏幕](https://stackoverflow.com/questions/18822477/jquery-animate-divs-on-off-screen-sequentially-with-navigation-arrows/18823296?noredirect=1#comment27767749_18823296)

# google-apps-script - 以编程方式获取电子表格“在网络上发布[ed]”

> ID：13016395
> 
> 赞同：3
> 
> 时间：2012-10-22T17:14:36.117
> 
> 标签：google-apps-script, google-docs-api, google-spreadsheet-api

暂时我相信这是一堵真正的墙，但让我们尝试一下：

有没有办法通过 GAS 或使用任何 Google API（Google 电子表格、Google 文档列表等）和 UrlFetch 以编程方式将电子表格设置为“在网络上发布 [ed]”？

目标是匿名访问表单提要。

请注意，可以将工作表“公开”（通过 Google 文档列表：这是一个“共享”选项），或使用 GAS setAnonymousAccess() 我认为，但据我所知，不是“已发布”，这是另一杯茶（它是通过“文件->在网络上发布”手动设置的）。“公开”工作表没有提要，而“已发布”工作表（甚至不需要“公开”）有一个。

谢谢。

# jquery - 在行之前但在表格之外添加元素？

> ID：13016398
> 
> 赞同：2
> 
> 时间：2012-10-22T17:14:52.620
> 
> 标签：jquery, html, css, dom, jqgrid

我有一个表格（jqGrid），我想在文档加载时动态添加一个小图标/图像。图像将根据网格的隐藏列值之一（日期）插入；它应该将行的重要性/紧迫性标记到页面/网格查看器。我精通 jQuery，我的逻辑很混乱，但我唯一遇到的问题是应该在 DOM 结构中的哪个位置插入这个元素，因为它不应该是实际网格的一部分。它应该浮动在网格外行的左侧。所以基本上，我要问的是：

1) 这个元素应该插入到 DOM 结构的什么地方？包含实际表的 div 容器？

2）应该如何设置样式（CSS）？

我想出的唯一方法是获取相关行的 y 坐标并将其插入设置为该 y 坐标的 div 容器（包含表格）中。我不确定这是否是最好或正确的方法。

**编辑：**这里有很多好的方法。我正在考虑将“afterInsertRow”事件与 David 的方法结合起来。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:35:21.193

为什么要在外部添加任何元素`table`？只需使用隐藏单元格来包含您想要显示的图像/元素和样式以响应`:hover`parent `tr`，给定标记：

```
<table>
    <thead>
        <tr>
            <th></th>
            <th>Column 'one'</th>
            <th>Column 'two'</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td></td>
            <td>row one</td>
            <td>row one</td>
        </tr>
        <tr>
            <td></td>
            <td>row two</td>
            <td>row two</td>
        </tr>
    </tbody>
</table> 
```

和CSS：

```
tr th:first-child,
tr td:first-child {
    visibility: hidden;
    border: 0 none transparent; /* hide the borders */
    width: 1em; /* define the width, to avoid the visible content */
}               /* causing page-jumps */

tr th:first-child + th,
tr td:first-child + td {
    border-left: 2px solid #000; /* style the cell *after* the first-child */
}                                /* with a border to 'fake' the look of the */
                                 /* new content being appended outside */
td, th {
    visibility: visible;
    border: 1px solid #000;      /* show borders to continue the illusion */
    height: 2em;                 /* or whatever... */
    line-height: 2em;
} 
```

这种方法*似乎*有效（我认为也*应该在 IE 中有效）：* [JS Fiddle demo](http://jsfiddle.net/davidThomas/wX9z8/3/)，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:10:48.963

您可以使用 jqGrid 中的 afterInsertRow 事件：

```
var my_jqGrid = $('#id_table').jqGrid({
   ... //Other configs

   afterInsertRow: function(rowid, rowdata, rowelement){

       console.log(rowdata);
       //Here you code condition to insert in other div
       if(rowdata['key']=='status_ok'){
           $('#div_id').append( '<img src="image/ok.png" />'  );
       }          
   }

}); 
```

[在这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)查看维基

好吧，我附加了一个简单的图像，您可以附加一个 div 容器图像并使用 css 设置高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:35:37.513

最简单的解决方案是使用 jQuery 的“my at of”定位：

1）将元素附加到页面的主体。

2) 使用 jQuery "my at of" 定位将元素放置在您尝试标记为紧急的行元素旁边。[http://docs.jquery.com/UI/API/1.8/Position](http://docs.jquery.com/UI/API/1.8/Position)

# ios - appDelegate 实践

> ID：13016402
> 
> 赞同：2
> 
> 时间：2012-10-22T17:15:18.600
> 
> 标签：ios, cocoa-touch, appdelegate

我有一个 json 存储在我的应用程序文档文件夹中，我需要在我的视图中使用它。我正在加载 json 并将其添加到每个视图中的 NSMutableArray 中。但现在我了解到，我可以简单地将数组加载到 AppDelegate 内的 NSMutableArray 一次，并在需要时直接从 AppDelegate 获取信息。

这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:33:44.007

我最好为您的, 使用[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)`JSON storage`，而不是`AppDelegate`.

因此，您可以在代码中的任何位置使用它，例如：

```
[[Storage sharedInstance] dataArray]; 
```

随着项目的发展，您可以向此类添加新方法

这是[一篇](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)如何在 Objective-C 中实现单例的文章

# c - 带有填充的结构的大小

> ID：13016404
> 
> 赞同：3
> 
> 时间：2012-10-22T17:15:30.550
> 
> 标签：c, memory-management, struct, structure

我有以下结构。其中尺寸是在侧面计算的。填充后结构的大小应为 30Bytes。但大小是 28 。28的结构尺寸如何？

```
#include <stdio.h>
struct a
{
    char t;      //1 byte+7 padding byte      Total = 8bytes
    double d;    //8 bytes                    Total = 16bytes
    short s;     //2 bytes                    Total = 18Bytes
    char arr[12];//12 bytes 8+8+4+12=32\.      Total = 30Bytes
};
int main(void)
{
    printf("%d",sizeof(struct a));  // O/p = 28bytes
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:24:29.970

您可以使用`offsetof`来了解每个结构成员之后的实际填充：

```
#include <stddef.h>

printf("Padding after t: %zu\n", 
    offsetof(struct a, d) - sizeof (((struct a *) 0)->t));

printf("Padding after d: %zu\n",
    offsetof(struct a, s) - offsetof(struct a, d)
    - sizeof (((struct a *) 0)->d));

printf("Padding after s: %zu\n",
    offsetof(struct a, arr) - offsetof(struct a, s)
    - sizeof (((struct a *) 0)->s));

printf("Padding after arr: %zu\n",
      sizeof(struct a) - offsetof(struct a, arr)
      - sizeof (((struct a *) 0)->arr)); 
```

如前所述`R.`，您可能在一个`32-bit`对齐`double`为 4 个字节而不是 8 个字节的系统上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T17:24:07.290

您错误地计算了字节填充。这取决于编译器选项和其他东西。您应该查看 pragma 的 pack 指令以向您显示正确的填充值。例如：

```
#pragma pack(show) 
```

应该通过警告的方式向您显示字节填充。您还可以明确设置它以根据您的需要定制您的代码。在msdn上查一下。这是链接 [http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:21:11.053

我认为它在 32 位边界上对齐，而不是 64 位。这个怎么样：

```
struct a
{
    char t;      //1 byte+3 padding bytes     Total = 4bytes
    double d;    //8 bytes                    Total = 12bytes
    short s;     //2 bytes+2 padding bytes    Total = 16Bytes
    char arr[12];//12 bytes 4+8+4+12=28\.      Total = 28Bytes
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T17:21:55.770

`double`我怀疑您正在构建一个没有 8 字节对齐要求的 32 位架构，在这种情况下，对齐变为：

```
struct a
{
    char t;      //1 byte+3 padding byte      Total = 4bytes
    double d;    //8 bytes                    Total = 12bytes
    short s;     //2 bytes                    Total = 14Bytes
    char arr[12];//12 bytes +2 padding bytes  Total = 28Bytes
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T14:32:47.557

在这种情况下，对于每个结构成员，内存以 4 字节的倍数给出，

char t - 4bytes，double d - 8bytes，short s - 4bytes 和 char arr[12] - 12bytes。

总计 4(char)+8(double)+4(short)+12(char array)=28bytes

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T17:20:44.673

最有可能的是，char 后面跟着 3 个字节的填充（所以 double 从 4 字节的边界开始），而 short 后面也跟着 2 个字节的填充。

但是......为什么不打印成员偏移量自己看看呢？

# html - 仅在我安装的 Chrome 中，HTML5 视频模糊且对比度低

> ID：13016405
> 
> 赞同：0
> 
> 时间：2012-10-22T17:15:31.667
> 
> 标签：html, google-chrome, html5-video, blurry, contrast

我在 Windows 7 x64 中，使用 Chrome 22。当我在视频标签中查看 MP4 视频时，与在 Media Player Classic 中本地查看的源视频相比，它显得模糊且对比度低。

屏幕测量应用程序显示，两个播放器都以其原始尺寸 (400x300) 显示视频。

这似乎只是我安装 Chrome 的问题。该视频在其他机器、Mac 和 PC 上看起来很完美。我尝试重新安装 Chrome，禁用所有扩展，卸载我的编解码器包 (CCCP)，并重新安装我的编解码器包，但均无济于事。

```
<video src="http://d.pr/f/Nq6a+" width="400" height="300" controls ></video>​ 
```

[jsFiddle](http://jsfiddle.net/X9As8/)

[视频文件](http://d.pr/f/Nq6a+)

我的比较截图：

**jsFiddle 中的视频标签**

[d.pr/i/RqLW](http://d.pr/i/RqLW)

**媒体播放器经典**

[d.pr/i/BZ69](http://d.pr/i/BZ69)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-08T10:30:06.283

这实际上是一个视频大小问题。有点棘手，但......试试这个： [http ://webz.ro/blurry-html5-video/](http://webz.ro/blurry-html5-video/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:24:51.393

感谢您的建议 - 我尝试了一切，然后有些没有运气。但是，由于这帮助我发现它是某种与我的设置唯一相关的编解码器/软件问题，而不是“编程”问题，这使它成为一个全新的问题，所以我将把它标记为已回答.

**更新** 查看新接受的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:33:07.043

我没有看到任何区别，但尝试删除宽度/高度属性。

# java - Netty 处理大负载的能力

> ID：13016406
> 
> 赞同：12
> 
> 时间：2012-10-22T17:15:42.930
> 
> 标签：java, netty

我在我的开源项目中使用 Apache MINA。但是，我遇到了性能障碍，无法处理从移动设备上传到服务器的大型有效负载。我收到内存不足错误。我从未使用过 Netty，并希望将 MINA 与 Netty 交换。

我对 Netty 团队的问题是 Netty 在大量传入有效负载的负载下如何执行。在我的性能测试中，我使用 1000 个并发设备生成负载，每个设备发送 1MByte 大小的有效负载。它倾向于在 5 分钟内生成 1GIG 的上传数据。这种负载往往会破坏 MINA。

Netty 能否支持这种负载等等。非常感谢您对此的意见。

顺便说一句：我确实使用 JProfiler 分析了应用程序。它确实指出 MINA 堆栈是罪魁祸首。我什至完全断开了我的服务器端堆栈，并将其留在消耗数据并返回数据的普通 MINA 服务器上。在这种模式下，即使我的后端没有进行真正的处理，它也会在大约 15 到 20 分钟内开始耗尽内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:54:25.783

这似乎是对库的不正确使用，而不是库本身的实际问题。如果不是用户错误，IMO Netty 可能会做同样的事情。我以前在高带宽应用程序中使用过 MINA，但没有这个结果。可能是您的网络已经饱和，缓冲区只是消耗了所有等待上传的内存。只是我的2美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:32:59.697

我过去曾在一个项目中使用过 Netty，我们试图构建一个能够通过 HTTP 流式传输大量数据的平台。在您概述的场景下，我们没有机会对 Netty 进行负载测试。当我们考虑选择哪个框架时，Netty 是因为它的性能和 API 优于 MINA 和其他类似框架。有很多网站进行了 Netty 与 MINA 的比较。IMO，您应该能够通过使用 Direct ByteBuffers 的组合并在读取数据时将数据写入磁盘/存储来满足您的用例。

# javascript - javascript函数事件

> ID：13016407
> 
> 赞同：2
> 
> 时间：2012-10-22T17:15:55.223
> 
> 标签：javascript, jquery

为什么要检查事件是否未定义...？

```
function onMouseMove(e) {

        if (typeof e === 'undefined' || typeof e.pageX === 'undefined') {
            return;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:20:55.353

该检查源于不同的浏览器以自己的方式调用事件。有些浏览器不传入`e`，它被定义为`event`每次调用 mouseHandler 时必须访问的全局对象。

例如，以下代码将始终为您提供事件对象，而不管浏览器如何：

`e = e || window.event`

有关更多详细信息，请查看由以下人员找到的文章`raina77ow`：

[http://www.quirksmode.org/js/events_access.html](http://www.quirksmode.org/js/events_access.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:36:25.743

```
if (typeof e === 'undefined' || typeof e.pageX === 'undefined') 
```

它检查偶数处理程序是否不足或不返回任何其他内容..因为这是 ie 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:18:34.193

如果您传递事件对象 onMouseMove 则无需检查。但是在这种情况下，可以通过传递参数调用这个函数，需要检查 e。

**[现场演示](http://jsfiddle.net/NMmBg/)**

```
<div id="div1" onmousemove="onMouseMove(event)" > mouse move test, with event </div>

<div id="div1" onmousemove="onMouseMove()" > mouse move test, without event </div>​

function onMouseMove(e) {         
    if (typeof e === 'undefined' || typeof e.pageX === 'undefined') {
        alert("With e");
    }
    else
    {       
        alert("Without e");
    }        
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:22:59.853

检查输入通常是一种很好的做法，尤其是在 JavaScript 这样的松散类型语言中。在这种情况下，我们要确保预期的输入都已定义，如果已定义，我们需要确保它是具有属性的对象`pageX`。仅检查该条件的第一个子句是不够的，因为它可能会丢失，并且如果完全未定义`pageX`，仅检查第二个子句会引发错误。`e`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T17:21:33.553

我唯一能想到的就是检查函数是被浏览器中的真实事件调用，还是被其他 JS 代码调用。

例如，这将在触发事件时执行，并传入一个事件对象。

```
$('#someID').on('mousemove', onMouseMove); 
```

但是，这根本不会传递任何参数

```
onMouseMove(); 
```

为什么你需要检查你的代码虽然有点奇怪。您通常不会直接调用事件处理程序。所以有点奇怪。

# html - 位置固定元素导致整个页面重绘/重绘

> ID：13016410
> 
> 赞同：2
> 
> 时间：2012-10-22T17:16:03.483
> 
> 标签：html, css, positioning

我有一个图像非常重的页面以及许多 CSS3 过渡。我还在页面顶部有一个导航栏，它是视口的全宽，位置固定。滚动页面时非常缓慢。据我所知，导航是导致重绘和/或重绘的罪魁祸首。

有什么技术可以减少这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:45:43.927

Nicole Sullivan 提供了一些技巧和窍门来缓解这些问题：

[http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

# php - 如何使用 PHP 显示来自我的网络摄像头的最后六张图像？

> ID：13016413
> 
> 赞同：0
> 
> 时间：2012-10-22T17:16:13.833
> 
> 标签：php, image, webcam

> **可能重复：**
> [如何从 PHP 目录中获取 X 个最新文件？](https://stackoverflow.com/questions/1018080/how-to-get-x-newest-files-from-a-directory-in-php)
> [使用 PHP 递归获取最新文件](https://stackoverflow.com/questions/2924433/get-most-recent-files-recursively-with-php)

我有一个脚本接收上传到 www.bovicam/webcam 的最新网络摄像头图像：

```
<?php
$dir = 'webcam/';
$base_url = 'http://www.bovicam.com/webcam/';
$newest_mtime = 0;
$show_file = 'BROKEN';
if ($handle = opendir($dir)) {
    while (false !== ($file = readdir($handle))) {
        if (($file != '.') && ($file != '..')) {
            $mtime = filemtime("$dir/$file");
            if ($mtime > $newest_mtime) {
                $newest_mtime = $mtime;
                $show_file = "$base_url/$file";
            }
        }
    }
}

print '<img src="' .$show_file. '" alt="Current Bovicam webcam image - views across        Bovisand Bay" style="width:90%; margin-top:7%; margin-bottom:3%;" class="displayed" id="webcam_image">';
?> 
```

我想在网络摄像头下方的页面中显示最后六张图像。我没有能够按日期“标记”相机中的文件的奢侈，那么有没有办法通过上面的“最后修改”来做到这一点？

# ruby-on-rails - 动态包含 rails 模块

> ID：13016417
> 
> 赞同：0
> 
> 时间：2012-10-22T17:16:20.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在使用 Ruby on Rails，我想知道如何从具有相同名称的模块中包含一个模块。

所以，我有一个名为 Course 的 ActiveRecord 模型

它需要根据 course.level 包含 CourseModuleFactory 有 2 个 CourseModuleFactory 模块，它们的名称相同但位于不同的文件夹中。

所以我需要这样的代码：

```
after_initialize :course_module_factory_level

def course_module_factory_level
  if self.level == "A"
    self.class.send(:include, CourseModuleFactory ) #from folder A
  else
    self.class.send(:include, CourseModuleFactory ) #from folder B
  end
end 
```

此代码将在课程模型中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:29:00.387

在不质疑您的实现的情况下，也许您可​​以使用它：

```
def course_module_factory_level

  # will remove the module definition
  remove_const(CourseModuleFactory)

 if self.level == "A"
    # will reload the file and redefine the module. Note that require only loads once.
    load('./A/course_module.rb')
    self.class.send(:include, CourseModuleFactory)
  else
    load('./B/course_module_factory.rb')
    self.class.send(:include, CourseModuleFactory)
  end
end 
```

也许您可以尝试找到更好的设计，例如以不同的方式重命名这些模块，避免一次又一次地重新定义相同的模块

# jquery - 无法编辑 slideDown 手风琴中的内容

> ID：13016418
> 
> 赞同：0
> 
> 时间：2012-10-22T17:16:23.413
> 
> 标签：jquery, html

我有一些按钮，当单击它们时，会向下滑动带有一些文本输入字段的模块。我似乎无法与这些“抽屉”中的内容互动。在 jsFiddle 上，我无法点击输入框，而且我似乎无法与 (+) 产品集进行交互。想法？

![在此处输入图像描述](../Images/5ab46294c58940053d57c6461165a2ae.png)

**[小提琴。](http://jsfiddle.net/pN9ff/55/)**

```
$(".clause").click(function() {
    var $this = $(this);
    $(".clause").css("box-shadow", "none");
    var tmp = $this.next("div.drawer");
    if(tmp.is(":hidden")) {
        tmp.slideDown('2s');
        $this.css("box-shadow", "0px 3px 5px #AAA");
        clicked = true;
    }
    else {
        tmp.slideUp('2s');
        clicked = false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:18:42.033

因为你正在使用`z-index: -999;` [**My Fiddle**](http://jsfiddle.net/pN9ff/56/)

删除`z-index`else use`z-index: 1;`或仅用于我使用过的演示`999`

```
.drawer {
    width:300px;
    padding:10px 6px 3px 6px;
    position:relative;
    margin-top:-3px;
    background:#F4F4F4;
    z-index:999;
    display:none;
    transition: display 2s ease;
    font-size:12px;
    font-family:Helvetica, sans-serif;
    font-weight:light;
} 
```

# android - 无法识别 Android 支持库

> ID：13016425
> 
> 赞同：0
> 
> 时间：2012-10-22T17:16:46.067
> 
> 标签：android

我在使用 Android 支持库时遇到问题。我已经下载并显示在我的 SDK 中（在 Extras 下）。但是，当我尝试导入`android.support.v4.content.CursorLoader`到 Activity 时，会出现错误：

> import android.support 无法解决

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:34:14.533

或者，您也可以右键单击您的项目 > Android 工具 > 添加支持库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T17:19:05.973

您需要获取支持库 jar 文件并将其放置在您的项目“libs”文件夹中以便检测到它。您需要的 jar 文件位于 \extras\android\support\v4 下的 SDK 文件夹中，名为“android-support-v4.jar”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T15:02:43.880

项目属性_> java构建路径->添加外部jar

.......\sdk_v13\extras\android\compatibility\v13

为我工作，那里也有早期版本的支持库。

# regex - 使用多个参数重写 Nginx URL

> ID：13016427
> 
> 赞同：2
> 
> 时间：2012-10-22T17:16:53.413
> 
> 标签：regex, nginx, seo, rewrite

我正在尝试通过 Nginx 重写以下 URL：

```
http://www.domain.com/script.php?title=LONGSTRING&desc=LONGSTRING&file=LONGSTRING&id=THREELETTERS 
```

变成这样的东西：

```
http://www.domain.com/script/LONGSTRING/LONGSTRING/LONGSTRING/LONGSTRING/THREELETTERS.html 
```

到目前为止，我所能找到的只是如何包含一个变量。我有五个变量要传递，每个变量都以“/”结尾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:45:25.193

您可以通过[$arg_name](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)变量访问`name`nginx 中的脚本参数

将带有脚本参数的 url 重写为对 seo 友好的 url，然后变成一个简单的重写，如下所示：

```
location /script/script.php {
  rewrite ^ /script/$arg_title/$arg_desc/$arg_file/$arg_id.html last;
} 
```

相反，将 seo 友好的 url 重写为 php 脚本版本将是：

```
location /script/ {
  rewrite "^/script/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]+)/([a-zA-Z]{3})$" 
          /script.php?title=$1&desc=$2&file=$3&id=$4 last;
} 
```

基本上你有正则表达式捕获（每个圆括号对都是一个捕获），然后你可以用 $1, $2, ... 变量引用

# actionscript-3 - 如何在 AS3 中将图像发送回

> ID：13016433
> 
> 赞同：3
> 
> 时间：2012-10-22T17:17:03.757
> 
> 标签：actionscript-3

我想把太阳和阳光送到舞台后面：

```
function CreateRays():Shape
{
    var ray:Shape = new Shape();

    ray.graphics.beginFill(0xFF9900,.5);
    ray.graphics.lineStyle(1,0xFF9900,.5);
    ray.graphics.lineTo(600,-20);
    ray.graphics.lineTo(600,20);
    ray.graphics.lineTo(0,0);
    ray.graphics.endFill();

    return ray;
}

var sun:Shape = new Shape();

sun.graphics.beginFill(0xFF9900,1);
sun.graphics.drawCircle(0,0,30);
sun.graphics.endFill();

addChild(sun); 
setChildIndex(sun, 0); 
```

我看到`setChildIndex(sun, 0);`应该这样做，但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:14:06.133

从您对添加对象的内容以及您提供的代码语法的困惑来看，我猜您已经在顶级对象上。试试这个：

```
this.addChildAt(sun,0); 
```

这将`sun`作为第一项添加到父对象（first = back，last = front）。如果我对您当前所在的对象是正确的，那么它也应该是舞台上的第一个项目。

确保在使用它们之前阅读了这样的内容：[DisplayObjectContainer.addChildAt()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChildAt%28%29)

# .net - Sencha Touch 可以使用 JSON.NET 生成的 JSON Schema 定义吗？

> ID：13016436
> 
> 赞同：0
> 
> 时间：2012-10-22T17:17:21.947
> 
> 标签：.net, wcf, sencha-touch, sencha-touch-2, json.net

我们目前有一个使用 JSON 作为响应和请求格式的 .NET WCF Web 服务。每次构建时，我们都会为每个被序列化/反序列化的实体生成和发布 JSON Schema 文件（通过 JSON.NET）。

如果您从未见过 JSON Schema 文件，它们的格式如下：

```
{
  "type": "object",
  "properties": {
    "Id": {
      "required": true,
      "type": "integer"
    },
    "Name": {
      "required": true,
      "type": [
        "string",
        "null"
      ]
    },
    "Email": {
      "required": true,
      "type": [
        "string",
        "null"
      ]
    }
  }
} 
```

Sencha Touch 有没有办法轻松使用这些生成的文件并将它们用作模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:44:14.820

您可以编写自己的数据阅读器。因此，您可以解析和转换所需的每个数据。

[data.reader api 文档（sencha touch 2）](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Reader)

# twig - Twig - 动态模板包含

> ID：13016438
> 
> 赞同：21
> 
> 时间：2012-10-22T17:17:29.217
> 
> 标签：twig

我需要包含具有动态名称的模板：

我试过：

```
{% for plugin in plugins %}
    {% include 'plugins/{{ plugin.name }}/navbar_left.tpl' %}
{% endfor %} 
```

但随后它显示：

> 致命错误：未捕获的异常“Twig_Error_Loader”和消息“无法找到模板“插件/{{ plugin.name }}/navbar_left.tpl”

如您所见，它不会取代`{{ plugin.name }}`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-22T18:51:18.613

它是这样工作的：

```
{% include 'plugins/' ~ plugin.name ~ '/navbar_left.tpl' %} 
```

作为`~`Twig 中的 concats 字符串。

# php - 查找在具有许多值的平面数组中完全表示的数组

> ID：13016445
> 
> 赞同：0
> 
> 时间：2012-10-22T17:18:06.970
> 
> 标签：php, arrays, multidimensional-array, array-intersect

这是我第三次发布有关此主题的帖子。用户巴巴每次都帮助我。由于 SO 网站没有用户消息系统 - 不幸的是 - 我在帖子中提出了一个问题。再次。

在用户 Baba 的帮助下，我们设法创建了一个函数来检查一个数组是否包含另一个数组，但该函数会多次确定它并创建一个索引列表。该函数缺少并且我需要知道的是该函数在预期的异常中不会返回-1。函数可能返回不相关的值，函数不一致。我们只需要检查哪些数组与主数组（$leftArray）匹配并返回这些数组的索引。如果没有任何匹配的数组，该函数必须返回 -1。

请查看此代码并帮助我：

```
<?php
$leftArray = array(7,6,14,15,8,0,1,4,5,9); 
//contains $GroupOfFour[6] and $GroupOfFour[1], and some excess
//numbers. Function should return array(6,1), If there is not a
//matching case the function should return -1.
//i've realised that the exception cases and the multiple
//grouping does not work.

$GroupOfFour = array (
                     array(3,2,7,6),
                     array(7,6,15,14),
                     array(15,14,11,10),
                     array(1,3,5,7),
                     array(5,7,13,15),
                     array(13,15,9,11),
                     array(0,1,4,5),
                     array(4,5,12,13),
                     array(12,13,8,9),
                     array(0,4,12,8),
                     array(1,5,13,9),
                     array(3,7,15,11),
                     array(2,6,14,10),
                     array(0,1,3,2),
                     array(4,5,7,6),
                     array(12,13,15,14),
                     array(8,9,11,10),
                     array(0,2,8,10),
                     array(0,1,8,9),
                     array(1,3,9,11),
                     array(3,2,11,10),
                     array(0,4,2,6),
                     array(4,12,6,14),
                     array(12,14,8,10)
                     );

function searchFourTerms($leftArray, $GroupOfFour) {
    global $GroupOfFour, $leftArray;
    $len4 = count($leftArray);
    $len4_carry = count($leftArray);
    $list4 = array();
    for($i4 = 0; $i4 < count($GroupOfFour); $i4 ++) {
        $intercept4 = array_intersect($GroupOfFour[$i4], $leftArray);
        $len4 = count($intercept4);
        if (count($intercept4) % 4 == 0) {
            $list4[$i4] = $len4;
        }
    }
    arsort($list4);
    if (empty($list4) || ($len4_carry<4))
        return - 1;
    return key($list4);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:04:35.687

key($list4) 只会返回 list4 的当前索引。在您的情况下，它将返回 18。

试试这个，它对我有用。我没有返回 key($list4)，而是返回了一个匹配索引的数组。

```
function searchFourTerms($la, $gof) {
$i3=0;
if(count($la)<4){
    return -1;
}
$list4 = array();
for($i4 = 0; $i4 < count($gof); $i4++) {
    $intercept4 = array_intersect($gof[$i4], $la);
    $len4 = count($intercept4);
    if(count($intercept4)==4) {
        $list4[$i3] = $i4;
        $i3++;
    }
}
if (empty($list4)){
    return - 1;
}
$list5= array();
$i7=0;
for($i4=0; $i4<count($list4); $i4++){
    $i6=0;
    for($i5=0; $i5<count($list4); $i5++){
        if($i4!=$i5){
            $i6+=count(array_intersect($gof[$i4], $gof[$i5]));
        }
    }
    if($i6<count($gof[$i4])){
        $list5[$i7]=$list4[$i4];
        $i7++;
    }
}
return $list5;
} 
```

如果 $leftArray = array(0,1,3,2,7,6,8,9)，对返回的数组执行 var_dump 会打印以下数组，该数组不包括 [13]，因为它包含来自 [0] 的所有重复项和[18]：

```
array(2) {
[0]=>
int(0)
[1]=>
int(18)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:56:25.513

这就是您返回超过 1 个键所需的全部内容

```
var_dump(searchFourTerms($leftArray, $GroupOfFour)); 
```

输出（所有组使用 array_slice 选择任意 2 个）

```
array
  0 => int 18
  1 => int 1
  2 => int 14
  3 => int 6
  4 => int 20 
```

您修改后的功能

```
function searchFourTerms($leftArray, $GroupOfFour) {
    $len4 = count($leftArray);
    $len4_carry = count($leftArray);
    $list4 = array();
    for($i4 = 0; $i4 < count($GroupOfFour); $i4 ++) {
        $intercept4 = array_intersect($GroupOfFour[$i4], $leftArray);
        $len4 = count($intercept4);
        if (count($intercept4) % 4 == 0) {
            $list4[$i4] = $len4;
        }
    }
    arsort($list4);
    if (empty($list4) || ($len4_carry < 4))
        return - 1;
    return array_keys($list4);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-11T07:45:27.917

我重命名了输入变量并减少了 MCVE 中的数据量。

您只需要执行迭代`array_intersect()`调用。如果未声明输出数组，则返回`-1`。

代码：（[演示](https://3v4l.org/0aHB4)）

```
$haystack = [7, 6, 14, 15, 8, 0, 1, 4, 5, 9];
$needles = [
    [3, 2, 7, 6],
    [7, 6, 15, 14],
    [15,14,11,10],
    [1,3,5,7],
    [5,7,13,15],
    [13,15,9,11],
    [0,1,4,5],
    [4,5,12,13],
];

function getIndexOfMatchingArrays(array $needles, array $haystack) {
    if (!$haystack) {
        return -1;
    }
    foreach ($needles as $index => $needle) {
        if ($needle === array_intersect($needle, $haystack)) {
            $fullMatch[] = $index;
        }
    }
    return $fullMatch ?? -1;
}

var_export(
    getIndexOfMatchingArrays($needles, $haystack)
); 
```

输出：

```
array (
  0 => 1,
  1 => 6,
) 
```

# jquery - 使用 Jquery .ready() 和 .append() 在表单中插入内容

> ID：13016447
> 
> 赞同：1
> 
> 时间：2012-10-22T17:18:18.327
> 
> 标签：jquery

我需要帮助。我正在尝试在 $(document).ready() 中使用 Jquery .append() 在表单中插入一个 html 标记。

这是我测试过但不工作的：

```
Jquery part:
$(document).ready(function(){
    $(".inner").append('<input type="checkbox" class="checkboxall">');
});

HTML part:
<form class="inner" action="" method="post">
</form> 
```

我究竟做错了什么？先感谢您。

LE：我已经分析了 firebug 中的代码，我注意到表单看起来像这样：http: [//i.imgur.com/Fxjtp.png](http://i.imgur.com/Fxjtp.png)。表格的阴影颜色是什么？

LE：处理 html 验证部分，非常重要，对我来说没有工作，因为 html 代码在我实现此 POC 的文档中无效。（见上图）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:23:38.407

你没有做错什么。

我刚刚复制/粘贴您的代码，它正在工作：http: [//jsfiddle.net/gA9ry/](http://jsfiddle.net/gA9ry/)

```
Jquery part:
$(document).ready(function(){
    $(".inner").append('<input type="checkbox" class="checkboxall">');
});

HTML part:
<form class="inner" action="" method="post">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:22:41.853

这对我有用：

```
$(document).ready(function(){
    $(".inner").append('<input type="checkbox" class="checkboxall" />');
}); 
```

还要检查所有 jQuery 是否已加载等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:22:48.077

对我来说它有效。查看您的错误控制台。我确信 jQuery 没有正确加载，并且会出现像 '$' is not defined 之类的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:23:35.987

我的页面从上到下有效：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script>
$(document).ready(function(){
    $(".inner").append('<input type="checkbox" class="checkboxall">');
});
</script>

<form class="inner" action="" method="post">
</form> 
```

# php - 即使选择了另一个视频，特色区域中的视频也会继续播放

> ID：13016449
> 
> 赞同：0
> 
> 时间：2012-10-22T17:18:24.443
> 
> 标签：php, wordpress, youtube

网站 www.newswars.org 主页顶部的精选视频存在问题。

当您单击视频时，它会在特色区域播放。如果我单击精选视频中的另一个视频，则旧视频会继续播放。

当新视频在特色部分开始播放时，我需要使旧视频停止播放。

如果之前的视频完全失去了它的位置，请不要介意......

# android - 将活动嵌入到另一个活动中

> ID：13016450
> 
> 赞同：0
> 
> 时间：2012-10-22T17:18:25.053
> 
> 标签：android, android-layout, android-activity

我有几个必须下载和显示图像的活动。图像从 URL 下载到内部存储，按比例缩小，然后显示。

有没有办法避免在多个活动中重复相同的代码？我可以创建一个包含所有代码的活动，也许我将 URL 作为 Intent Extra 传递。（请注意，所有 HTTP 方法都已经在一个单独的类中，我不想重复 UI 功能，例如计算图像纵横比和为图像布局分配高度和宽度）

我正在寻找的不是对话活动。类似于将图像活动的 UI 嵌入到调用活动的 UI 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:49:54.163

我会将用于下载和缩放图像的代码放入一个实用程序类中，所有活动都可以使用 AsyncTasks 调用该实用程序类。您可以在 onPostExecute 中显示它。

# bash - 是否可以使用 printf 将此整数输出为以下形式的浮点数？

> ID：13016455
> 
> 赞同：0
> 
> 时间：2012-10-22T17:18:42.477
> 
> 标签：bash

在一个脚本中，我将执行多个命令的累积时间（以 ms 为单位）存储在一个变量中，让我们调用它`total_elapsed_Time`。这包含例如值

```
1001 
```

或者

```
12 
```

现在，我想要的是以以下形式输出这个值（以 s 为单位的时间，以毫秒为单位）

```
1.001 
```

对于第一个值，

```
0.012 
```

为第二个值。目前，我这样做

```
printf '%d.%03d s' "$((total_elapsed_time / 1000))" "$((total_elapsed_time % 1000))" 
```

这没关系，似乎可行，但我想知道是否没有更简单的方法（所以我只需要将变量传递给 printf 和 printf 负责格式化数字）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:43:14.237

```
for x in 1001 12 1 10 100 1000 10000 ; do
    x=00$x                              # Prepend two zeros, so we can safely
    x=${x:0: -3}.${x: -3}               # insert the dot on the third position from right.
    printf '%.3f\n' $x
done 
```

# h.264 - 将 .264 转换为 .avi（音频不同步）

> ID：13016457
> 
> 赞同：2
> 
> 时间：2012-10-22T17:18:43.150
> 
> 标签：h.264, avi

我正在将带有 .wav 文件的 .264 转换为 .avi，并且生成的文件的持续时间小于应有的持续时间。这对我来说是个问题，因为视频与音频不同步。

我测试了几个参数（-async、-vsync、sync_file_id），并没有注意到文件有任何变化。例如：

```
avconv -r 15 -i input.264 -i input.wav -c:a copy -map 0:a -map 1:v  output.avi 
```

有人有想法么？

ps: .264 和 .wav 文件是使用 Videosnarf 程序从 pcap 文件中提取的

# regex - preg_match 反向引用以查找结束标记

> ID：13016458
> 
> 赞同：0
> 
> 时间：2012-10-22T17:18:47.143
> 
> 标签：regex, preg-match

我正在尝试使用正则表达式来解析我拥有的模板。我想找到`_stop`标签的`_start`标签。我需要找到特定的，因为可以有嵌套`_stop`和`_start`标签。

我正在使用的正则表达式是

```
/{(.*?)_start}.*{(\1_stop)}/s 
```

把它扔进一个`preg_match`

和模板

```
<div data-role="collapsible-set" class="mfe_collapsibles" data-theme="c" data-inset="false">
        {MakeAppointment_start}
        <div id="appointmentHeading" data-action-id="appointmentNext" data-action-text="Next" data-a data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">New {AppointmentTerm}</h3>
            <p>
                {AppointmentForm}
            </p>
        </div>
        {MakeAppointment_stop}
        {RegisterSection_start}
        <div id="registerHeading" class="preRegistration" data-action-id="register" data-action-text="Register" data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">Register</h3>
            <p>
                {RegisterForm}
            </p>
        </div>
        {RegisterSection_stop}
        <div data-role="collapsible" class="preRegistration" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">Login</h3>
            <p>
                {LoginForm}
            </p>
        </div>

    </div>
</div> 
```

结果是

```
Array
(
    [0] => {MakeAppointment_start}
        <div id="appointmentHeading" data-action-id="appointmentNext" data-action-text="Next" data-a data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-iconpos="right">
            <h3 class="collapsibleMainHeading">New {AppointmentTerm}</h3>
            <p>
                {AppointmentForm}
            </p>
        </div>
        {MakeAppointment_stop}
    [1] => MakeAppointment
    [2] => MakeAppointment_stop
) 
```

索引 0 是正确的，但 1 和 2 不正确。1 应该有注册标签和内容，2 不应该存在。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:22:45.207

首先，`preg_match`只返回一个匹配项。改为使用`preg_match_all`。其次，您获得的索引 1 和 2 是您的捕获组。您可以简单地忽略它们，尽管您的第二个捕获组非常多余；您可以删除正则表达式中的第二对或括号。使用`preg_match_all`将产生完整匹配和所有匹配的所有捕获组。

我也认为你应该逃避你的`{`and`}`因为它们是正则表达式元字符。我想知道为什么引擎不会以这种方式阻塞它们，但我认为最好还是逃避它们。

# c# - 为什么 MSDN 中记录的 FileVersionInfo.FileMinorPart (an int) 可能为空？

> ID：13016461
> 
> 赞同：3
> 
> 时间：2012-10-22T17:19:08.453
> 
> 标签：c#, msdn

在 MSDN [Diagnostics.FileVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.productminorpart.aspx)中，它表示，例如，`ProductMinorPart`返回一个 int 或`null`该值是否未定义。但是它不是`Nullable<int>`- 它如何返回 null？我检查了 ILDasm，定义是一个普通的 int，没有 Nullable ......

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:24:39.357

不，你似乎没有遗漏什么。我会说文档不准确。

如果次要部分丢失，或者整个版本一起丢失，则该属性似乎返回 0。

# c# - 错误 26 无法连接到数据库

> ID：13016463
> 
> 赞同：2
> 
> 时间：2012-10-22T17:19:13.093
> 
> 标签：c#, database, linq

我拿了一个别人做的旧软件，它需要连接到扩展名为 .mdf 的数据库。

但是当我运行该软件时，我有一个`error 26`. 我显然已经检查了谷歌，似乎主要问题是防火墙。但如果我禁用它，问题不会消失。

下面是连接数据库的代码：

```
DataClasses1DataContext db = new DataClasses1DataContext(Environment.CurrentDirectory + "\\bddgestionvin.mdf"); 
```

我注意到，当我尝试将数据库与 datacontext 类连接时，它也会以相同的`error 26`. （见下面的截图）

这个类使用的字符串连接是：

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\bddgestionvin.mdf;Integrated Security=True;Connect `Timeout=30;User Instance=True` 
```

我知道我有点含糊，但我从来没有做过那种事情（连接到 .mdf 数据库）而且代码不是我的，请随时询问进一步的解释/代码。欢迎任何帮助！

PS错误信息是

> SqlException was unhandled 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

![在此处输入图像描述](../Images/5256b01430c31e7be58e112b56ba73c6.png)

（对不起法语软件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:43:46.317

嗨，我不知道您可能会看到这些步骤。确保这些步骤应该通过。

> 我们收到此错误消息的原因是客户端堆栈无法从 SQL 浏览器接收 SSRP 响应 UDP 数据包。很容易隔离问题。以下是步骤：
> 
> 1) 确保您的服务器名称是正确的，例如，名称上没有错字。
> 
> 2）确保您的实例名称正确，并且您的目标机器上确实有这样的实例。[更新：某些应用程序将 \ 转换为 . 如果您不确定您的应用程序，请在连接字符串中同时尝试 Server\Instance 和 Server\Instance]
> 
> 3) 确保服务器机器可访问，例如，DNS 可以正确解析，您可以 ping 服务器（并非总是如此）。
> 
> 4) 确保 SQL Browser 服务正在服务器上运行。
> 
> 5) 如果服务器启用了防火墙，则需要将 sqlbrowser.exe 和/或 UDP 端口 1434 置于异常中。

[你可以从这里](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)阅读更多

您还可以尝试[PortQry](http://support.microsoft.com/kb/832919)并验证您的防火墙不会阻止 SQL 浏览器 UDP 数据包

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。 `Failed to establish a connection with SQL Server.`

服务器未找到或无法访问。 `May be server is stopped, you don't have permission to access the server, or the instance name is not correct .`

验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

`Please goto SSMS and try connecting the server. Verify the SQL Server is running and your account is configured to access the service.`

（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

谢谢

# sql-server - 动态设置 Crystal Report Viewer 参数默认值

> ID：13016466
> 
> 赞同：0
> 
> 时间：2012-10-22T17:19:26.557
> 
> 标签：sql-server, crystal-reports-xi, visual-foxpro

我们正在使用带有 VFP 前端的 Crystal Report 查看器（我相信是 XI，但我们可以升级）。

有没有办法在运行时动态设置参数默认值？例如，如果用户正在查看发票并尝试运行报告，我希望它自动默认为当前发票。就目前而言，即使他们已经打开了实际发票，他们也必须输入发票编号。

如果没有，是否有更好的查看器可以用来实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:26:18.290

我目前在 Accountmate SQL (AMSQL) 中将 VFP 与 Crystal Reports 一起使用。AMSQL 有自己的黑盒代码来执行您的要求，因此我无法详细说明它是如何完成的，但我确实设置了动态参数（例如发票#），Crystal 会根据发送的参数生成报告。

我知道您可以通过在 VFP 中创建 Crystal Reports 对象来完成此操作，从而将 Crystal 属性、事件和方法公开给 VFP。Craig Bernston 有一篇关于您正在寻找的内容的好文章：[http ://www.craigberntson.com/docs/integratingcr.pdf](http://www.craigberntson.com/docs/integratingcr.pdf)

# java - 使用 LanguageTool 检测无意义和/或语法错误的句子

> ID：13016469
> 
> 赞同：3
> 
> 时间：2012-10-22T17:19:41.680
> 
> 标签：java, nlp, grammar, text-processing, languagetool

我需要检查文本中的拼写和语法，所以我开始使用 LanguageTool API（[可以在这里找到](http://www.languagetool.org/development/)）。现在，当我编写他们提供的启动代码时，如下所示 -

```
JLanguageTool langTool = new JLanguageTool(Language.ENGLISH);
langTool.activateDefaultPatternRules();
List<RuleMatch> matches = langTool.check("Eat I rice" +
    "every day and go school to good as a boy");
for (RuleMatch match : matches) {
  System.out.println("Potential error at line " +
      match.getEndLine() + ", column " +
      match.getColumn() + ": " + match.getMessage());
  System.out.println("Suggested correction: " +
      match.getSuggestedReplacements());
} 
```

我没有收到任何错误。对不起，如果我错了，但是“每天吃我的米饭，像个男孩一样上学”这句话是正确的句子吗（语法上）？如果是这样，或者如果不是，那么有没有办法使用该工具检测这些句子（无意义和/或语法错误）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T12:25:43.270

Languagetool 是基于规则的。显然，“每天吃我米饭，像个男孩一样上学”这句话还没有被任何规则所抓住。

[http://wiki.languagetool.org/tips-and-tricks](http://wiki.languagetool.org/tips-and-tricks)有关于如何将用户定义的规则添加到 Languagetool 的信息。

以下是此类规则的示例：

```
<rule>
  <pattern>
    <token>
      <exception regexp="yes">(that|ha[ds]|will|must|could|can|should|would|does|did|may|might|t|let)</exception>
      <exception inflected="yes" regexp="yes">feel|hear|see|watch|prevent|help|stop|be</exception>
      <exception postag="C[CD]|IN|DT|MD|NNP|\." postag_regexp="yes"></exception>
      <exception scope="previous" postag="PRP$"/>
    </token>
    <token postag="NNP" regexp="yes">.{2,}<exception postag="JJ|CC|RP|DT|PRP\$?|NNPS|NNS|IN|RB|WRB|VBN" postag_regexp="yes"></exception></token>
    <marker>
      <token postag="VB|VBP" postag_regexp="yes" regexp="yes">\p{Lower}+<exception postag="VBN|VBD|JJ|IN|MD" postag_regexp="yes"></exception></token>
    </marker>
    <token postag="IN|DT" postag_regexp="yes"></token>
  </pattern>
  <message>The proper name in singular (<match no="2"></match>) must be used with a third-person verb: <suggestion><match no="3" postag="VBZ"></match></suggestion>.</message>
  <short>Grammatical problem</short>
  <example correction="walks" type="incorrect">Ann <marker>walk</marker> to the building.</example>
  <example type="correct">Bill <marker>walks</marker> to the building.</example>
  <example type="correct">Guinness <marker>walked</marker> to the building.</example>
  <example type="correct">Roosevelt and Hoover speak each other's lines.</example>
  <example type="correct">Boys are at higher risk for autism than girls.</example>
  <example type="correct">In reply, he said he was too old for this.</example>
  <example type="correct">I can see Bill looking through the window.</example>
  <example type="correct">Richard J. Hughes made his Morris County debut in his bid for the Democratic gubernatorial elections.</example>
  <example type="correct">... last night got its seven-concert Beethoven cycle at Carnegie Hall off to a good start.</example>
  <example type="correct">... and through knowing Him better to become happier and more effective people.</example>
  <!-- TODO: Fix false-positive: The library and Medical Center are to the north.-->
  <!-- The present Federal program of vocational education began in 1917\. -->
</rule> 
```

有一个在线规则编辑器可在

[http://community.languagetool.org/ruleEditor2/](http://community.languagetool.org/ruleEditor2/)

该问题的一个简单解决方案是

```
<!-- English rule, 2014-09-19 --> 
<rule id="ID" name="EatI"> 
   <pattern> <token>Eat</token> <token>i</token> </pattern> 
   <message>Instead of <match no="2"/> <match no="1"/> it should be <match no="1"/> <match no="2"/></message> 
  <url>http://stackoverflow.com/questions/13016469/detecting-meaningless-and-or-grammatically-incorrect-sentence-with-languagetool/25933907#25933907</url> 
  <short>wrong order of verb and nown</short> 
  <example type='incorrect'><marker>Eat i</marker> rice</example> <example type='correct'>I eat rice</example> 
</rule> 
```

但当然这只会涵盖动词“吃”——但我希望你能明白它是如何工作的……

# ms-access - 无法将数据添加到访问数据库的前端

> ID：13016470
> 
> 赞同：1
> 
> 时间：2012-10-22T17:19:46.953
> 
> 标签：ms-access, ms-access-2010

我有一个 2010 Access 数据库，我将其拆分为多个用户可以同时使用该数据库。但是，现在我无法通过表、查询等任何方式将数据添加到前端。当我去后端时，它说它是只读的，我也不能在那里添加数据或修改设计，是的，我有适当的权限来查看所有内容。我什至尝试将权限设置为具有完全访问权限的每个人，但它仍然不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:33:48.053

当您打开后端 db 文件时，Access 必须能够创建一个锁定文件，或者如果锁定文件已经存在，则更新该锁定文件。如果两者都没有发生，则 db 文件将以只读方式打开。

当您直接在 Access 会话中打开后端 db 文件时，该要求适用。当您从前端数据库*间接*打开后端时，它也适用。

锁定文件使用与您的 db 文件相同的基本名称，但文件扩展名不同：.ldb 用于 MDB db；或 .laccdb 用于 ACCDB 数据库。

确保您的用户有权在后端 db 文件所在的文件夹中创建和删除文件。或者，您可以在创建锁定文件后授予他们修改锁定文件的权限。

如果问题不是锁定文件问题，请从前端在数据表视图中打开其中一个链接表，看看是否可以进行更改（添加和删除行，以及更新现有行中的值）。如果链接表被视为只读，请删除链接并重新创建它们。确保通知 Access 将哪个字段或字段组合用作主键。在没有该信息的情况下，Access 将以只读方式链接这些表。

如果链接表不是只读的，请检查表单的记录源和其他属性。一些查询仍然可以是只读的，即使它们的源表是可编辑的。表单属性表的“数据”选项卡包括诸如“允许添加”、“允许删除”和“添加编辑”等属性，这些属性会影响可以通过该表单进行的更改类型。

最后，确保所有前端用户都将默认打开模式设置为共享。如果任一用户的打开方式设置为独占，则后面的所有用户只能以只读方式打开。

# android - Async vs Handler vs IntentService

> ID：13016480
> 
> 赞同：0
> 
> 时间：2012-10-22T17:20:43.383
> 
> 标签：android

`Intentservice`通过对,`AyncTask`和的一些研究`Handler`，我了解到这三个都进行后台处理。但我无法理解的是它们每个是如何在内部实现的？

有人可以扔一些光或指出我正确的方向。任何指示或建议都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:23:39.387

Android 是开源平台，因此您需要获取其源代码并潜伏在相关文件中以检查您所追求的所有内部细节。

[以下是下载源代码的方法](http://source.android.com/source/downloading.html)

或者

请参阅[在哪里可以在线找到 Android 源代码？](https://stackoverflow.com/questions/449763/where-can-i-browse-android-source-code-on-line)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:52:11.523

这实际上取决于您需要实现的目标。根据我的经验，我曾使用 IntentServices 进行后台处理，无论工作多长或多短。IntentServices 的优点在于它为您在其上安排的每个作业部署了一个工作线程。您可以安排 n 个任务，IntentService 将在其 onHandleIntent 方法上一次执行每个任务，完成后，它将自动关闭。要在作业完成后获得对活动的响应，您可以实现广播或结果接收器。

我对 Handler 或 AsyncTask 的工作还不够，但根据我的阅读和理解，当您安排它们的工作不需要完成或调度 Activity 完成时优先级不高时，它们会更好地使用。

希望能帮助到你。

# ruby-on-rails - 如何将数据收集从哈希更改为数组？

> ID：13016483
> 
> 赞同：0
> 
> 时间：2012-10-22T17:21:00.553
> 
> 标签：ruby-on-rails, ruby, nokogiri

现在我正在从另一个 url 获取数据......这是我的代码：

```
require 'rubygems'
    require 'nokogiri'

    html = page.body

    doc = Nokogiri::HTML(html)
    doc.encoding = 'utf-8'

    rows = doc.search('//table[@id = "MainContent_GridView1"]//tr')
      @details = rows.collect do |row|
          detail = {}
          [
            [:car, 'td[1]/text()'],
            [:article, 'td[2]/text()'],
            [:group, 'td[3]/text()'],
            [:price, 'td[4]/text()'],
          ].each do |name, xpath|
            detail[name] = row.at_xpath(xpath).to_s.strip
          end
          detail
      end
    @details 
```

我试图通过数组而不是哈希来做到这一点。但我得到了很多错误......有什么想法吗？我需要它用于另一种方法...

我还在这里将数据（此结果哈希）设置为另一辆车：

```
oem_art = []
    @constr_num.each do |o|
      as_oem = get_from_as_oem(o.ARL_SEARCH_NUMBER)
      if as_oem.present?
        oem_art << as_oem
      end
    end    

    @oem_art = oem_art.to_a.uniq 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:46:00.493

Do you just want to change a hash into an array? If so, just use the `to_a` method on your hash.

```
hash = {:a => "something", :b => "something else"}
array = hash.to_a
array.inspect #=> [[:a, "something"], [:b, "something else"]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:26:24.260

看起来您正在寻找类似[hash['key'] 到 Ruby 中的 hash.key 的东西](https://stackoverflow.com/questions/1753336/hashkey-to-hash-key-in-ruby)

默认情况下， Hash 类不支持`.key`符号，OpenStruct 从 Hash 创建一个对象，因此您可以使用点符号来访问属性。总的来说，它基本上只是带有开销的语法糖。

建议的代码（来自链接的答案）

```
>> require 'ostruct'
=> []
>> foo = {'bar'=>'baz'}
=> {"bar"=>"baz"}
>> foo_obj = OpenStruct.new foo
=> #<OpenStruct bar="baz">
>> foo_obj.bar
=> "baz" 
```

所以在你的例子中，你可以这样做：

```
# Initialised somewhere
require 'ostruct'
DETAIL_INDICES = { 
  :car => 1,
  :article => 2,
  :group => 3,
  :price => 4,
}

# ** SNIP **
@details = rows.map do |row|
  DETAIL_INDICES.inject({}) do |h,(k,v)| 
    h.merge(k => row.at_xpath("td[#{v}]/text()").to_s.strip) 
  end
end.collect { |hash| OpenStruct.new hash }

@details.each do |item|
  puts item.car
end 
```

当然，如果性能是一个问题，你可以合并你的 map&collect （它们是相同的），但这只是基本语义差异的一个小分离，虽然我通常只`map`用于一致性，所以请随意选择自己:)

编辑——简化编辑中的附加代码

```
@oem_art = @constr_num.select do |item|
  as_oem = get_from_as_oem(item.ARL_SEARCH_NUMBER)
  as_oem.present?
end

puts @oem_art.uniq 
```

# localization - NSIS 消息框本地化指南

> ID：13016493
> 
> 赞同：0
> 
> 时间：2012-10-22T17:21:38.497
> 
> 标签：localization, nsis

我正在为我们的应用程序编写 NSIS 脚本。除了消息框本地化之外，一切都很好：问题是消息框中的文本已经本地化，而`OK`,`CANCEL`和其他按钮则没有。

我检查了语言文件，定义是正确的，我还加载了所需的语言文件，之前`.onInit`并用于`LangDLL`输入用户的安装语言。我搜索了 NSIS wiki 和帮助文件，但找不到任何关于此问题的信息。

你能指导我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:02:02.920

实际上你不需要编写全新的插件 - 你可以使用适合在 NSIS 中创建新窗口的**nsWindows**插件 (http://forums.winamp.com/showthread.php?t=304431&highlight=nswindows) .

为 MessageBox 创建替换 - 带有标签、图标、标题和此窗口的适当方法的新窗口。

这是很多工作，但这是唯一的方法，这样的窗口将独立于 Windows（语言）（正如安德斯所说）。此外，设置字体样式/大小/宽度也可以进行许多其他自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:33:32.400

NSIS 使用[MessageBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)函数，因此按钮将使用与 Windows 相同的语言。解决这个问题的唯一方法是编写一个自定义的 NSIS 插件......

# javascript - 为什么当我在具有 src 属性的同一脚本标记中使用 jquery/javascript 代码时它不起作用

> ID：13016496
> 
> 赞同：0
> 
> 时间：2012-10-22T17:21:58.140
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [带有 src 和内容的脚本标签是什么意思？](https://stackoverflow.com/questions/6528325/what-does-a-script-tag-with-src-and-content-mean)

我在我的 html 页面中使用了以下内容

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="resources/scripts/jquery-1.8.2.min.js">

$(document).ready(function(){
  alert("ABC");
});
</script>
</head>

<body>
<p>THIS IS MY INDEX PAGE.</p>
</body>
</html> 
```

jquery 在这里不起作用，这意味着在其中放入警报后我看不到它的任何效果。

`<script>`但是当我像下面那样放入单独的标签时，它可以工作，

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="resources/scripts/jquery-1.8.2.min.js">
</script>
<script>
$(document).ready(function(){
  alert("ABC");
});
</script>
</head>

<body>
<p>If you click on me, I will disappear.</p>
</body>
</html> 
```

所以如果有人解释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:26:40.017

来自 w3schools：

[http://www.w3schools.com/tags/tag_script.asp](http://www.w3schools.com/tags/tag_script.asp)

“注意：如果存在“src”属性，则该元素必须为空。”

当您使用脚本标签时，您可以使用 src 属性或标签内部提供源代码，但不能同时提供两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T17:25:12.790

这是因为，您正在为 src 标记提供 javascript。

src 文件内容将扩展为`<script>`（开始和结束）标签的内容。

如果需要，您可以使用 firebug 进行检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:26:45.990

您的第一个标签所做的是告诉浏览器脚本的内容位于外部文件中。它将忽略实际标记中的任何脚本，以支持文件的内容。

您需要使用单独的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:40:52.303

我不知道 。但是，如果您在标签内的“src”中分配的来源是在线来源。

如果您保存，请转到该来源并复制脚本并将其保存在本地。然后

分配您本地的“src”然后它将起作用。IE。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="../polin/jquery_library.js">
function fn()
{alert("pp");}
</script>
<script type="text/javascript">
$(document).ready(function(){
alert("ABC");
});
function fn()
{alert("oo");}
</script>
</script>
 </head>

<body onload="fn()">
<p>THIS IS MY INDEX PAGE.</p>
</body>
</html> 
```

src="../polin/jquery_library.js" 这个文件在我本地保存 jquery 源脚本的地方。它工作

# javascript - Javascript全局变量未更新

> ID：13016498
> 
> 赞同：1
> 
> 时间：2012-10-22T17:21:59.517
> 
> 标签：javascript

我有我正在制作的这个网站。我想从另一个函数更新全局变量。全局变量`i`初始化为 0。我创建了 2 个函数，第一个用于更新全局变量并通过警报显示新值，第二个函数将仅提醒更新后的全局变量的新值。现在的问题是，当我调用第一个函数时，它会提醒新的更新值，但是当我调用第二个函数时，它会提醒原始值为零。

这是我的代码：-

```
 var i=0; var users=new Array(); 
 var password=new Array(); 
 users[0]="clydewinux";
 password[0]="moonfang";
 users[1]="freddipasquale";
 password[1]="evastar182";

 function verifyInput() {   //function one
    var u = login.username.value;
    var p = login.password.value;
    for (var c = 0; c <= 1; c++) {
        if (u === users[c] && p === password[c]) {
            i++;
            alert(i);
            window.location.replace("login.htm");
            break;
        } else {
            document.getElementById("username").value = "Invalid username...";
            window.location.href("home.htm");
            break;
        }
    }
}

function logout() {  //function two
    alert(i);
    window.location.replace("home.htm");
} 
```

*笔记; 函数 verifyInput() 是第一个函数，函数 logout 是第二个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:25:09.237

当您调用第一个函数时，您通过加载新页面来更改页面内容。

Javascript 变量不会从一页保存到另一页。

调用or`i`后的新值也是如此。`window.location.replace``window.location.href=`

如果您想将某些值从一页保留到另一页，您可以使用`localStorage`：

```
var i = parseInt(localStorage['i'] || '0', 10); // loads the old saved value of i
function verifyInput() {
    var u = login.username.value;
    var p = login.password.value;
    for (var c = 0; c <= 1; c++) {
        if (u === users[c] && p === password[c]) {
            i++;
            localStorage['i'] = i; // stores the incremented i
            alert(i);
            window.location.replace("login.htm"); // this ends the script and reload the page
            break; // this is useless : the script has ended
        } else {
            document.getElementById("username").value = "Invalid username...";
            window.location.href("home.htm"); // this is buggy
            break;
        }
    }
}

function logout() {
    alert(i);
    window.location.replace("home.htm");
} 
```

旁注：`window.location.href("home.htm");`不起作用：使用`window.location.href = "home.htm";`

# speech-recognition - Sphinx4 音素分割

> ID：13016499
> 
> 赞同：2
> 
> 时间：2012-10-22T17:22:14.433
> 
> 标签：speech-recognition, voice-recognition, cmusphinx, sphinx4

我正在开发一个系统，我需要单词或句子中每个音素的*起始帧*、*结束帧*和*分割分数*。我一直在使用 Sphinx-3 命令：sphinx3_align，以获得以下结果（示例）：

```
 SFrm  EFrm   SegAScr Phone
        0    21    -67327 SIL
       22    37   -236740 AH SIL K b
       38    41    -61028 K AH S i
       42    56    -82368 S K EH i
       57    67   -106366 EH S P i
       68    86   -101908 P EH T i
       87   106    -89226 T P SIL e
      107   113    -82281 SIL
 Total score:     -827244 
```

问题是，我必须多次运行此命令，这在我的服务器中消耗了大量内存。我尝试在控制文件中传递许多输入，但这需要很长时间来处理，而且我的应用程序不能有很长的响应时间。

因此，为了消耗更少的内存来维持响应时间，我试图在 Sphinx-4 中实现相同的系统。这样我就可以在对齐后立即返回结果，而不必在每次运行时卸载应用程序。

我的疑问是是否可以在 Sphinx-4 中显示上述输出（类似于 sphinx3_align）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:38:27.763

在目前的状态下是不可能的。此功能未实现。

# android - 对改变焦点采取行动

> ID：13016500
> 
> 赞同：0
> 
> 时间：2012-10-22T17:22:17.800
> 
> 标签：android, button, view, focus

如何在视图上更改焦点时执行操作？特别是当焦点位于某个按钮上时，我会更改 LinearLayout 视图的某些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:24:35.487

我认为 onFocusChangeListener 可以帮助你：

[onFocusChanged(boolean, int, android.graphics.Rect)](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)

# java - java中非常简单的脚本解析器

> ID：13016502
> 
> 赞同：3
> 
> 时间：2012-10-22T17:22:22.870
> 
> 标签：java, parsing, scripting

我目前正在用 java 做一个小项目，我需要为我制作的机器人处理一种非常轻量级的脚本语言。

它不需要处理算术或任何复杂的功能，只需要运行某些命令并处理 if 和 while 语句。

它可能看起来像这样：

```
turn(90,cw)
move(25)
sleep(5000)
get(temp)
turn(90,ccw)
get(image) 
```

这是我没有遇到过的问题，并且能够很快地让它工作。然而，一旦我开始考虑 if 和 while 语句，我意识到事情可能要复杂得多。

例如，管理这样的事情会很简单：

```
while(temp > 50)
    move(25)
    turn(90,cw) 
```

但是我对如何开始处理这样的语句感到非常困惑：

```
while(temp > 50)
    if(light < 100)
        move(25)
    turn(90,cw)
    move(10) 
```

看着它，我可以看到事情很快变得非常混乱！

是否有处理此类“轻量级脚本”的首选方法？或者我会更好地坚持使用它并制定某种手动解析器吗？

感谢你给与我的帮助！

**编辑**- 感谢大家的帮助，我使用 Java 脚本引擎让它工作得非常快！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:27:47.987

编写自定义语言很难，认真。

从 6.0 开始，Java 有一个内置的 JavaScript 引擎。改用它，您的用户会很高兴您使用他们熟悉的语法。其他替代方案是 Groovy、JRuby，甚至是 Lua。

# 也可以看看

*   [使用 Java 创建元语言](https://stackoverflow.com/questions/7575085)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:25:30.930

我会考虑使用[BeanShell](http://www.beanshell.org/)而根本不解析。您只需要将语句编写为 beanshell 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:14:36.857

如果您准备使用类似 Java 的大括号而不是类似 Python 的缩进级别，[Groovy对编写这样的特定于域的语言有很好的支持。](http://groovy.codehaus.org)

```
while(temp > 50) {
  if(light < 100) {
    move(25)
  }
  turn(90,cw)
  move(10)
} 
```

这可以实现类似

```
GroovyShell gs = new GroovyShell()
Script script = gs.parse(stringContainingTheScript)
Binding b = script.binding
// utility values
b.cw = true
b.ccw = false

b.light = theRobot.getLight()
b.temp = theRobot.getTemperature()

def mc = script.metaClass

mc.move = { distance ->
  theRobot.move(distance)
  // update from sensors
  b.light = theRobot.getLight()
  b.temp = theRobot.getTemperature()
}

mc.turn = { angle, direction ->
  if(direction) theRobot.turnClockwise(angle)
  else theRobot.turnCounterclockwise(angle)
}
mc.sleep = { time ->
  sleep(time) // Groovy builtin
  // update from sensors
  b.light = theRobot.getLight()
  b.temp = theRobot.getTemperature()
}

script.run() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:32:37.967

我已经使用 Jython（在 JVM 上移植的 Python）来完成类似的任务。主要优点包括“主机”（Java 环境）和 Jython 解释器（从 Java 调用）之间的强大互操作性。您可以从脚本访问您的 JVM 世界：类、方法、字段，在 Java 环境中定义。都可以从您的脚本中进行操作。

# java - 自动代码生成器来使用来自 Android 的 Web 服务

> ID：13016509
> 
> 赞同：1
> 
> 时间：2012-10-22T17:22:45.430
> 
> 标签：java, android, web-services, ksoap2

我正在使用 ksoap2 来使用来自 Android 项目的 Web 服务。一切正常，但我错过了库中的一些我认为很常见的属性。

在 Visual Studio 中，添加 Web 服务引用所有必要的代码，以便您可以使用 Web 服务，更重要的是，为 Web 服务返回的对象/类型创建必要的类。使用 Java EE 时，同样可以在 XCode 或 Eclipse 中完成。

我在 Android 中越接近这个是[http://code.google.com/p/android-soap-enabler/wiki/FiveMinutesTutorial](http://code.google.com/p/android-soap-enabler/wiki/FiveMinutesTutorial)我试过但我遇到了一些问题，我放手了。

很难相信没有解决这个问题的标准方法。我的意思是，我猜存在这么多使用 Web 服务的 Android 应用程序，没有比使用 ksoap2 库手动解析 xml 响应更好的方法了吗？最终让它变得更奇怪的是，我没有发现有人问这个问题。我问的事情有那么奇怪吗？我是第一个遇到这个问题的人吗？

我想知道是否有任何工具/库/项目/任何东西可以自动创建使用 Web 服务的必要代码。

# wordpress - 用 wordpress 上的自定义分类法替换帖子的标题

> ID：13016516
> 
> 赞同：0
> 
> 时间：2012-10-22T17:23:15.957
> 
> 标签：wordpress, title, custom-taxonomy

使用过滤器/挂钩，我将如何用从自定义分类中选择的任何术语替换 wordpress 帖子的标题。

希望所附图片能解释我正在尝试做的事情。

![在此处输入图像描述](../Images/ed0677c8042cbcdd4dac9d38b51dccf5.png)

假设我选择了“Powerchrono” - 我希望将帖子的标题替换为所选术语，并且它是父项。

任何帮助将非常感激。

我显然也希望帖子的网址也得到更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:16:16.823

我不能保证这会直接工作，因为它未经测试。但这应该让你开始：

*函数.php*

```
<?php
add_action('save_post', 'update_term_title');
function update_term_title($post_id)
{
    if(defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) 
        return;
    if(!current_user_can('edit_post', $post_id))
        return;

    //Replace 'manufacturer' with whatever your custom taxonomy slug is
    $terms = wp_get_post_terms($post_id, 'manufacturer');

    if(empty($terms))
        return;

    $title = false;
    foreach($terms as $term)
    {
        if($term->parent)
        {
            $parent = get_term($term->parent, 'manufacturer');
            $title = $term->name.' '.$parent->name;
            break;
        }
    }
    /*Default to first selected term name if no children were found*/
    $title = $title ? $title : $terms[0]->name;

    /*We must disable this hook and reenable from within
    if we don't want to get caught in a loop*/
    remove_action('save_post', 'update_term_title');
    $update = array(
        'ID'=>$post_id,
        'post_name'=>sanitize_title_with_dashes($title),
        'post_title'=>$title
    );
    wp_update_post($update);
    add_action('save_post', 'update_term_title');
}
?> 
```

# wix - 为什么 WiX 设置项目生成 wixlib 而不是 MSI？

> ID：13016519
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:23:31.477
> 
> 标签：wix, windows-installer, visual-studio-2012

我是 WIX 的新手，正在尝试创建一个 MSI 来安装服务。安装项目正在生成一个 .wixlib 对象，而不是一个 msi。我正在研究[这个例子](http://blog.tentaclesoftware.com/archive/2009/01/01/21.aspx)。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <!-- TODO: Put your code here. -->
<Product Name="Smart Elf Service"
       Id="*"
       UpgradeCode="927E7BBE-58C0-4832-A821-24A6B19AEE63"
       Version="1.0.0.0"
       Manufacturer="Me!"
       Language="1033">
<Package
  Manufacturer="Me!"
  InstallerVersion="100"
  Languages="1033" />
  <Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder" Name="Program Files(x86)">
      <Directory Id="CorporationFolder" Name="Corporation">
        <Directory Id="SmartElfFolder" Name="SmartElf Service">
          <Component Id="SmartElfService">
            <File Id="SmartElfServiceBinary" Name="ElfVerificationService.exe" Source ="..\ElfVerificationService\bin\debug\ElfVerificationService.exe" KeyPath="yes" Vital="yes"/>
            <ServiceInstall
              Id="SI_SmartElfService"
              Vital="yes"
              Name="sesvc"
              DisplayName="SmartElf Service"
              Start="auto"
              ErrorControl="normal"
              Type="ownProcess"
            />

            <ServiceControl
              Id="SC_SmartElfService"
              Name="sesvc"
              Start="install"
              Stop="both"
              Remove="uninstall"
              Wait="yes"
            />
          </Component>
        </Directory>
      </Directory>
    </Directory>
  </Directory>
<Feature Id="DefaultFeature" Level="1">
  <ComponentRef Id="SmartElfService"/>
</Feature>
</Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:43:10.053

右键单击解决方案资源管理器中的项目，然后选择属性。确保输出类型设置为 Windows Installer Package (.msi)。

# continuous-integration - Jenkins Build Flow Plugin 在构建之间传递参数时遇到问题

> ID：13016528
> 
> 赞同：1
> 
> 时间：2012-10-22T17:23:52.083
> 
> 标签：continuous-integration, jenkins, build-automation

我在 Jenkins 中有一组参数化构建，我必须单击“立即构建”，然后输入参数值（在本例中称为 GIT_TAG_NAME）。我想触发一组这些参数化构建，它们都使用相同的参数而无需多次输入。

我试图通过构建一个触发所有其他构建的主构建流程来使用构建流程插件（https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin），但我不理解插件语法，或者这可能是不可能的。

我的 DSL 看起来像：

```
out.println "-------------------------" 
out.println 'Building all OTA builds at tag: '
out.println params["GIT_TAG_NAME"]
out.println "-------------------------"

build( "SomeOTA-Build-1", param1: params["GIT_TAG_NAME"] )
build( "SomeOTA-Build-2", param1: params["GIT_TAG_NAME"] ) 
```

print 语句正确打印了参数，但是子构建似乎没有将参数传递给它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:34:28.983

尝试使用[**参数化触发器插件**](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)-

1.  使用参数设置*Job-A*`GIT_TAG_NAME` - 这是您的“前端”

2.  使用相同的参数设置*Job-B1*、*Job-B2*和*Job-B3*`GIT_TAG_NAME` - 那些做实际工作

3.  将*Job-A*设置为**在其他项目上触发参数化构建**（在**Post-build Actions**中）
    并将**当前构建参数**传递给触发的作业
    （每个派生作业需要一个触发器 - 具有相同或不同的条件）

现在，运行*Job-A*将绑定其他作业，同时将`GIT_TAG_NAME`.

编辑：[TIKAL](http://www.tikalk.com/)
有一个使用不同方法的插件：**[Multijob Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Multijob+Plugin)**试图将所有工作步骤压缩到一个大工作 中（没有尝试过，因此无法评论这种方法）。

如果采用第一种方法，您可能需要查看**[Join Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Join+Plugin)** -
该插件允许在所有直接下游作业结束后运行作业。

# c# - GridView ' ' 触发了未处理的事件 RowUpdating。asp.net 后面的 C# 代码

> ID：13016531
> 
> 赞同：1
> 
> 时间：2012-10-22T17:24:06.227
> 
> 标签：c#, asp.net

Stackoverflow 和其他网站上有类似的问题，但我似乎错过了一些东西。

我有一个绑定到来自数据库的 DataTable 的 GridView。我的目标是使用同一行中调用以下方法的按钮一次更新一行。

```
 protected void TestsToBeDone_RowUpdating(object sender, GridViewEditEventArgs e)
    {
        SqlConnection myConnection = getConnection();
        myConnection.Open();

        int index = Convert.ToInt32(e.NewEditIndex);

        GridViewRow selectedRow = TestsToBeDone.Rows[index];
        TableCell LABAVIDc = selectedRow.Cells[1];
        int LABAVID = Convert.ToInt32(LABAVIDc.Text);

        TableCell assistentc = selectedRow.Cells[5];

        string query = "UPDATE Labaanvraag " +
                       "SET Status='4' "+
                                 "WHERE LABAVID ='"+LABAVID+"'";
        }

        SqlCommand commandZ = new SqlCommand(query, myConnection);
        commandZ.ExecuteNonQuery();            

        myConnection.Close();

        SetPatientTestGrid(Session["PATID"], e);
    } 
```

从这里调用它：

```
 <asp:GridView ID="TestsToBeDone" runat="server" EnableModelValidation="True" OnRowEditing="TestsToBeDone_RowUpdating">
    <Columns>
        <asp:ButtonField ButtonType="Button" CommandName="Update" 
            HeaderText="Afgenomen" ShowHeader="True" Text="Afgenomen" />
    </Columns>
</asp:GridView> 
```

在我第一次尝试时，我在后面的代码中有一个带有 GridViewCommandEventArgs 的 OnRowCommand。

但它仍然会引发相同的异常，尽管我在几个网站上阅读过将其更改为 OnRowEditing 和 GridViewEditEventArgs 可以解决问题。

提前致谢，

蒂姆一个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:27:20.117

ASP.NET 中的 GridView 有一些内置命令 - `Deleted`、`Update`等。发生的情况是您的按钮的命令名称为`Update`，而 Gridview 正在从您那里劫持它并触发一个`RowUpdating`事件而不是您的`RowEditing`事件。将您的按钮命令名称更改为`Edit`，并使用`RowEditing`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T16:08:52.900

如果您使用`Row_Command`事件进行编辑，则不要使用按钮命令名称“更新”来表示更新，而“删除”则表示删除。相反，请分别使用 Edit 或 UP 和 Del。

# php - PDO 更新问题

> ID：13016533
> 
> 赞同：0
> 
> 时间：2012-10-22T17:24:08.070
> 
> 标签：php, pdo

我正在使用 PDO 的更新功能更新表单。由于某种原因，它没有通过。

这是代码：

```
$data = "UPDATE insuranceverificationdisclaimer SET InsCoName =:insur, PhoneNumber = :phone, Policy = :policy, InsuredName = :insurname
, MailingAdrs = :mailingad, EffDate = :effdate, ExpDate = :expdate, Email1 = :email, YrVehicle = :yr, Make = :make
, Model = :model, VIN = :vin, TraineeUserName = :user, EmpName = :empname, EmpCoName = :empcomp, AgencyNumber = :agnum
, SignDate = :signdate, AgentName = :agname, AgentPhone = :agphone, AgentEmail = :agemail, Combinedlimit = :csl, bodyinjur = :body
, bodyinjureachacc = :acc
, propertydmg = :prop WHERE TraineeUsername = :user";
        echo"1";

$insertdata = $DBH->prepare($data);
$insertdata->execute(array(':insur' => $compname, ':phone' => $phone , ':policy' => $policynum, ':insurname' => $nameofPolicyholder
, ':mailingad' => $newMailingAdrs, ':effdate' => $Policyeffdate, ':expdate' => $Policyexpdate, ':email' => $newEmployeeEmail
, ':yr' => $YearOfVehicle, ':make' => $MakeOfVehicle, ':model' => $ModelOfVehicle, ':vin' => $Vehicleid, ':user' => $username, ':empname' => $EmployeeName, ':empcomp' => $EmployeeCompanyName, ':agnum' => $Agencynum
, ':signdate' => $TodaysDate, ':agname' => $agentname, ':agphone' => $agentphone, ':agemail' => $agentemail, ':csl' => $singlelimit
, ':body' => $bodyinjur, ':acc' => $eachacc, ':prop' => $propertydmg )); 
```

从哪里`, ':csl' => $singlelimit, ':body' => $bodyinjur, ':acc' => $eachacc, ':prop' => $propertydmg`开始这是不起作用的功能，这些是数据库中的整数，值是整数。如果我从选择和数组中删除它会起作用，但除此之外它不会。

需要帮助请叫我！

已更新---------------

一旦你点击执行页面就不会通过只是保持白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:48:51.150

您应该按照 Michael Berkowski 的建议打开错误报告。现在我只能假设错误是由未定义的参数数据类型引起的。您可以尝试以下方法：

```
$insertdata->bindParam(':insur', $compname, PDO::PARAM_STR);
$insertdata->bindParam(':csl', $singlelimit, PDO::PARAM_INT);
//...bind the other params 
$insertdata->execute(); 
```

# macos - Cocoa - 将 onClick 事件分配给 NSMenu

> ID：13016541
> 
> 赞同：3
> 
> 时间：2012-10-22T17:24:50.453
> 
> 标签：macos, cocoa, nsmenu

我希望我的状态菜单在单击时调用一个函数。让我分配该动作的方法是什么？下面是这样的，但对于菜单本身。

`NSMenuItem* item = [[NSMenuItem alloc] initWithTitle:@"Title" action:@selector(doX) keyEquivalent:@""];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:54:11.760

您可以通过设置菜单的委托并`-[<NSMenuDelegate> menuWillOpen:]`在您指定的委托中实现协议方法来挂钩菜单打开事件。

# javascript - 编写 jQuery 选择器的最佳实践

> ID：13016542
> 
> 赞同：2
> 
> 时间：2012-10-22T17:24:52.337
> 
> 标签：javascript, jquery, html, jquery-selectors

我目前正在我的 jQuery 代码中编写非常明确的选择器。例如给定这个标记

```
<div class="codeblue">
    <div class="codeyellow">
        <div class="codeorange">
            <div class="codewhite">
                <select id="codeChoice">
                    <option>red</option>
                    <option>green</option>
                    <option>black</option>
                </select>
            </div>
        </div>
    </div>
</div> 
```

我使用这个显式选择器

```
var $select = $('.codeblue .codeyellow .codeorange .codewhite #codeChoice'); 
```

这样做会更好吗？

```
var $codeBlue = $('.codeblue');
var $select = $codeBlue.find('#codeChoice'); 
```

不使用显式选择器是否会影响性能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T17:26:15.477

实际上，由于 ID 是唯一的，您只需从一开始就选择 ID。

```
var $select = $('#codeChoice'); 
```

至于你的另一个问题，没有简单的答案。多个选择器可能会导致速度变慢，但您确实必须尝试知道。此外，它取决于浏览器。检查它的最佳选择是使用[http://jsperf.com/](http://jsperf.com/)

此外，正如[本文](https://stackoverflow.com/questions/6028555/jquery-selector-optimization)所述，您应该确保将不太具体的选择器放在左侧，如下所示：

```
var $codeBlue = $('.codeblue #codeChoice'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:27:17.140

如果使用具体的 ID，jQuery 会更快，因为它使用原生方法 document.getElementById(); 由于您的第一个选择器包括 4 个类（= 慢检测）和 1 个 id（= 更快检测），而您的第二个选择器 1 个类（= 慢检测）和 1 个 Id（= 更快检测），第二个会更快。

通常选择器会更快，因为包含的片段更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:26:47.723

```
var $select = $("#codeChoice"); 
```

应该足够了，因为`id`应该是唯一的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:27:21.743

在 jQuery 中选择元素的最快方法是通过 ID。按 ID 访问元素有利于性能。因为 id 在页面上是唯一的。

[高性能 Javascript 书籍](https://rads.stackoverflow.com/amzn/click/com/059680279X)

```
var $select = $('#codeChoice"); 
```

# ios - 多次翻转动画不起作用

> ID：13016543
> 
> 赞同：1
> 
> 时间：2012-10-22T17:24:56.657
> 
> 标签：ios, multithreading, animation, flip

我遇到了一些奇怪的事情。我正在尝试创建一个不断翻转的 UIView 网格。为此，我创建了以下类：

```
@implementation LMFlipViewController

@synthesize viewOne=_viewOne, viewTwo=_viewTwo, animationDuration=_animationDuration, pause=_pause, animationFlag=_animationFlag;

-(LMFlipViewController *)initWithViewOne:(UIView *)viewOne viewTwo:(UIView *)viewTwo animationDuration:(CGFloat)animationDuration andPauseInBetweenAnimation:(CGFloat)pause {
    [super init];
    [self.view setFrame:viewOne.bounds];
    _viewOne=viewOne;
    _viewTwo=viewTwo;
    _animationDuration=animationDuration;
    _pause=pause;
    return self;
}

-(void)viewDidLoad{
    [super viewDidLoad];
    NSLog(@"0");
    _animationFlag=NO;
}

-(void)viewDidUnload{
    [super viewDidUnload];
}

-(void)viewWillAppear:(BOOL)animated {
    [self.view addSubview:_viewOne];
//    [self performSelector:@selector(loopAnimation) withObject:nil afterDelay:_pause];
    [NSTimer scheduledTimerWithTimeInterval:_pause
                                     target:self
                                   selector:@selector(loopAnimation)
                                   userInfo:nil
                                    repeats:NO];
    NSLog(@"1");
}

-(void)triggerAnimation {
    NSLog(@"5");
    if (_animationFlag) {
        NSLog(@"Animation flag: YES");
        _animationFlag=NO;
        [UIView transitionWithView:self.view duration:_animationDuration options:(UIViewAnimationOptionTransitionFlipFromLeft) animations: ^{
            [_viewTwo removeFromSuperview];
        } completion:^(BOOL finished) {
            [UIView transitionWithView:self.view duration:_animationDuration options:(UIViewAnimationOptionTransitionFlipFromLeft) animations: ^{
                [self.view addSubview:_viewOne];
            } completion:nil];
        }];
    }else{
        NSLog(@"Animation flag: NO");
        _animationFlag=YES;
        [UIView transitionWithView:self.view duration:_animationDuration options:(UIViewAnimationOptionTransitionFlipFromLeft) animations: ^{
            [_viewOne removeFromSuperview];
        } completion:^(BOOL finished) {
            [UIView transitionWithView:self.view duration:_animationDuration options:(UIViewAnimationOptionTransitionFlipFromLeft) animations: ^{
                [self.view addSubview:_viewTwo];
            } completion:nil];
        }];
    }
    NSLog(@"6");
}

-(void)loopAnimation {
    NSLog(@"2");
    [self triggerAnimation];
    NSLog(@"3");
//    [self performSelector:@selector(loopAnimation) withObject:nil afterDelay:_pause];
    [NSTimer scheduledTimerWithTimeInterval:_pause
                                     target:self
                                   selector:@selector(loopAnimation)
                                   userInfo:nil
                                    repeats:NO];
    NSLog(@"4");
}

@end 
```

然后，我尝试了这样的课程：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIView *viewOne=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewOne.backgroundColor=[UIColor redColor];

    UIView *viewTwo=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewTwo.backgroundColor=[UIColor purpleColor];

    LMFlipViewController *flipViewController=[[LMFlipViewController alloc] initWithViewOne:viewOne viewTwo:viewTwo animationDuration:0.5 andPauseInBetweenAnimation:3];
    [self.view addSubview:flipViewController.view];

    UIView *viewThree=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewThree.backgroundColor=[UIColor blackColor];

    UIView *viewFour=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewFour.backgroundColor=[UIColor blueColor];

    LMFlipViewController *flipViewControllerTwo=[[LMFlipViewController alloc] initWithViewOne:viewThree viewTwo:viewFour animationDuration:0.5 andPauseInBetweenAnimation:3];
    [flipViewControllerTwo.view setFrame:CGRectMake(0, 60, 100, 50)];
    [self.view addSubview:flipViewControllerTwo.view];
} 
```

这种方式效果很好。关键是，我需要以这种方式实例化几个翻转视图，并且需要在“for”循环中实现它们。所以我尝试了这个：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    for (int i=0;i<2;i++) {
        UIView *viewOne=[[UIView alloc] initWithFrame:CGRectMake(0, i*60, 100, 50)];
        viewOne.backgroundColor=[UIColor redColor];

        UIView *viewTwo=[[UIView alloc] initWithFrame:CGRectMake(0, i*60, 100, 50)];
        viewTwo.backgroundColor=[UIColor purpleColor];

        [self.view addSubview:[[LMFlipViewController alloc] initWithViewOne:viewOne viewTwo:viewTwo animationDuration:0.5 andPauseInBetweenAnimation:3].view];
    }
} 
```

当我尝试使用循环时，第一个视图动画正确，但其他视图没有。动画只是被跳过，视图切换是直接的。

有谁知道为什么？我的猜测是这是一个线程问题或类似的东西，但我对这些东西一无所知。欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:36:24.877

2个版本之间有一点点不一致`viewDidLoad`。我会这样写循环的：

```
- (void)viewDidLoad {
  [super viewDidLoad];
  for (int i=0;i<2;i++) {
    UIView *viewOne=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewOne.backgroundColor=[UIColor redColor];

    UIView *viewTwo=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
    viewTwo.backgroundColor=[UIColor purpleColor];

    LMFlipViewController *flipViewController=[[LMFlipViewController alloc] initWithViewOne:viewThree viewTwo:viewFour animationDuration:0.5 andPauseInBetweenAnimation:3];
    [flipViewController.view setFrame:CGRectMake(0, i*60, 100, 50)];
    [self.view addSubview:flipViewController.view];

  }
} 
```

不知道这是否会改善情况。

还有另一个问题（因为您说您没有使用 ARC）：您的所有`LMFlipViewController`对象都会泄漏，因为它们是分配/初始化的并且从未释放（它们不能，因为它们没有被存储并且它们引用之后只是“丢失”退出`viewDidLoad`方法）。

解决此问题的方法是保留`NSMutableArray`您实例化的所有控制器中的一个：

```
self.flipControllers = [NSMutableArray arrayWithCapacity:...];

... 
```

然后在`viewDidLoad`（ARC案例）中：

```
[self.flipControllers addObject:[[LMFlipViewController alloc] initWithViewOne:viewOne viewTwo:viewTwo animationDuration:0.5 andPauseInBetweenAnimation:3]];
[self.view addSubview:[self.flipControllers lastObject].view]; 
```

# android - 如何检查 webview 是否无法加载页面（android）？

> ID：13016544
> 
> 赞同：36
> 
> 时间：2012-10-22T17:24:56.043
> 
> 标签：android

我的应用程序中有一个 webview，但有时由于连接性，webview 无法加载，我得到默认网页不可用页面。如果 webview 加载失败，我想显示一个 alertdialog。无论如何我可以检查（可能在 shouldOverridePageLoad 函数中）webview 是否成功加载？再次感谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-22T17:29:41.587

在您的 Web 视图上使用 WebClient，如下所示：

```
webView.setWebViewClient(new WebViewClient(){

@Override public void onReceivedError(WebView view, WebResourceRequest request,
      WebResourceError error) {
    super.onReceivedError(view, request, error);
    // Do something
  }
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-05-29T07:13:33.543

扩展 Damien 对 using 的回答`WebViewClient`，有四个侦听器可`WebViewClient`用于检查加载网页的成功和失败。

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
    }

    @Override
    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {
    }

    @Override
    public void onReceivedHttpError(
            WebView view, WebResourceRequest request, WebResourceResponse errorResponse) {
    }

    @Override
    public void onReceivedSslError(WebView view, SslErrorHandler handler,
                                   SslError error) {
    }
}); 
```

还有：

```
@Override
public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
   }
}); 
```

不推荐使用上面代码中提到的重载。

# ios - 为我的 IOS 应用程序创建一个配置文件，这将使第 3 方能够测试我的应用程序

> ID：13016545
> 
> 赞同：2
> 
> 时间：2012-10-22T17:24:57.563
> 
> 标签：ios

我的应用程序不断被第 3 方（Nuance）拒绝，因为我显然无法创建正确的配置文件。他们的安装日志说

“应用程序安装失败。错误提示找不到此可执行文件的有效配置文件。”

现在这只是一个猜测，但我认为当我创建配置文件时，我选择了错误的 App ID。苹果开发者网站上的界面是这样的

[https://developer.apple.com/ios/manage/provisioningprofiles/index.action](https://developer.apple.com/ios/manage/provisioningprofiles/index.action)

我选择分发选项卡，然后选择新建配置文件。当我需要从它提供的 App Id 的下拉列表中进行选择时，我的疑问就出现了。其中一些可能是伪造的，但如果不只是连续猜测和提交，我不确定哪个是正确的。有没有办法通过在某处查看 Xcode 来验证我的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:43:21.773

您可以查看项目目标摘要选项卡并检查捆绑标识符。应该为该捆绑包创建您的应用程序 ID（除非它带有通配符）。

# php - 从 PHP 表单更新 MySQL

> ID：13016546
> 
> 赞同：1
> 
> 时间：2012-10-22T17:25:07.797
> 
> 标签：php, mysql, forms

作为一个新手 MySQL 用户，我尝试插入，但我刚刚阅读了 MySQL 文档，您只能在空白行上插入。我的 UPDATE 语句需要工作，但我不确定我的语法是否正确。

```
$query3 = "UPDATE `offices` SET `scash`="$total" WHERE `officename`="$office""; 
```

office 是表名。scash 是要更新的行。$total 是从帖子中提取的变量。$office 是从同一数据库中提取的变量。我只想将 scash 设置为 officename 为 $office 的总计。

解析错误：语法错误，意外的 T_VARIABLE 是我得到的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:26:28.253

```
$query3 = "UPDATE `offices` SET `scash`='$total' WHERE `officename`='$office'"; 
```

用字符串中的普通引号替换双引号，因为双引号是字符串分隔符，不能在字符串中使用。

正如 Marc B 提到的那样，您的代码可能会受到 SQL 注入的影响。请参阅[这篇文章](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)如何避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:48:22.590

如果您仍想在双引号内使用双引号，请将其转义..

您的查询可以修改如下..

```
$query3 = "UPDATE `offices` SET `scash`=\"$total\" WHERE `officename`=\"$office\""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:27:51.850

你在报价上出错了

```
$query3 = "UPDATE `offices` SET `scash`="$total" WHERE `officename`='$office'"; 
```

**`LIMIT 1`**如果您只想更新一行，也请始终使用...

并在更新您的行之前清理您的输入，至少使用`mysqli_real_escape_string()`

# html - HTML5 img 大小属性

> ID：13016549
> 
> 赞同：1
> 
> 时间：2012-10-22T17:25:13.420
> 
> 标签：html

如果我有一个 600x600 的图像，并且我想在移动设备上以 100x100 显示它。我应该在 Photoshop 中调整第一个图像的大小还是应该只使用宽度/高度属性（这种方法会强制用户先下载一个大图像然后调整它的大小吗？）。

我知道可以使用 JS 调整大小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:27:03.077

浏览器可以使用 CSS 动态调整图像大小，但它们看起来并不总是像在 Photoshop 中那样好。您应该为移动设备调整它的大小，以减少所需的文件大小和带宽。

# algorithm - n 个圆盘/圆的交点的质心

> ID：13016550
> 
> 赞同：0
> 
> 时间：2012-10-22T17:25:16.250
> 
> 标签：algorithm, geometry

假设 n 个磁盘/圆共享一个公共区域，这意味着它们中的每两个彼此相交，并且我们知道它们的坐标（x1,y1,r1), (x2,y2,r2), ..., (xn,yn ,rn)，其中 xi,yi,rn 分别表示 x 轴坐标、y 轴坐标和第 i 个圆盘/圆的半径，你能提供一种方法来计算它们的交点的质心坐标吗磁盘/圆圈？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:22:20.137

Let's assume that all the circles overlap such that one can trace a path from any point in one of the circles to an arbitrary point in any other circle while traversing only points contained by circles. And, for generality, that the circles may be of different radii.

Per the [wiki page](https://en.wikipedia.org/wiki/Centroid#By_geometric_decomposition) you can decompose this shape into separate geometric regions. That is, you can find an intermediate value for the centroid by considering each circle separately (i.e. pretending they do not overlap).

Unfortunately some of the circles overlap, so you will be counting regions of the figure twice. The figure below, taken from [this page](http://blog.csharphelper.com/2010/08/27/partition-an-area-with-circles-and-draw-each-regions-count-in-c.aspx), shows these regions of overlap. You therefore must find the centroid of the circle-circle intersection and subtract this from your intermediate centroid (see the wiki page's description of geometric decomposition for further details).

![enter image description here](../Images/d7db39bdd7affc945d0c290d33fc3b67.png)

Since you can determine which circles overlap just do these for each overlapping pair and then each region of space will be counted only once. Your problem then reduces to finding the centroid of a circle-circle intersection.

You can find this by using geometric decomposition to break each lens of intersection into [circular segments](https://en.wikipedia.org/wiki/List_of_centroids) with the height of the segment given via a method [here](http://mathworld.wolfram.com/Circle-CircleIntersection.html) and coupling the result with appropriate coordinate transformations to rotate and translate the centroid to a location relative the center of one of the circles.

# .net - 在带 SOS 的 WinDbg 中查找静态字段的地址

> ID：13016553
> 
> 赞同：3
> 
> 时间：2012-10-22T17:25:38.210
> 
> 标签：.net, static, windbg, memory-address, sos

我无法弄清楚如何使用带 SOS 的 WinDBG 获取静态 .NET 类成员的地址。给定这样的输入程序：

```
namespace windg_static_test
{
    class StaticTest
    {
        public static bool static_bool_field = true;
        public void show_and_set()
        {
            while (static_bool_field)
            {
                Console.WriteLine("static_bool_field = " + static_bool_field + "\nEnter new value: ");
                static_bool_field = Console.ReadLine()[0] == '0' ? false : true;
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            StaticTest st = new StaticTest();
            st.show_and_set();
        }
    }
} 
```

我可以使用 !name2ee 找到 EEClass，并且可以使用带有 name2ee 值的 !dumpclass 查看值。

```
0:004> !dumpclass 1c12e0
Class Name:      windg_static_test.StaticTest
mdToken:         02000002
File:            C:\Develop\Projects\windg static test\bin\Release\windg static test.exe
Parent Class:    64f84920
Module:          001c2e94
Method Table:    001c3844
Vtable Slots:    4
Total Method Slots:  6
Class Attributes:    100000  
Transparency:        Critical
NumInstanceFields:   0
NumStaticFields:     1
      MT    Field   Offset                 Type VT     Attr    Value Name
65377208  4000001       1f       System.Boolean  1   static        1 static_bool_field 
```

但我似乎无法弄清楚如何获取该值实际存储的地址。一般来说，这是如何完成的？

谢谢， 埃格林

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T18:29:25.237

SOS 不显示该字段的地址。请改用 !sosex.mdt。!sosex.mdt windbg_static_test.StaticTest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:41:52.773

SOS 仅在地址为引用类型对象时才显示该地址。对于 int,bool 它直接显示值，因为它们是值类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:47:30.960

浏览反汇编让我看到从 .data 段中提取的静态值。我无法弄清楚如何制定通用解决方案以从 !dumpclass/!dumpobj 为您提供的值类型的偏移量中获取正确的位置，但索引对于静态引用类型成员确实可以正常工作找出基指针后堆。我猜我必须深入研究 PE 格式的细节，才能更好地了解信息是如何存储在 .data 段中的，尽管我不确定从哪里开始，或者此时是否值得追求.

谢谢大家的帮助。

# sql-server - 使用事务

> ID：13016556
> 
> 赞同：2
> 
> 时间：2012-10-22T17:25:42.553
> 
> 标签：sql-server, stored-procedures, transactions, try-catch

我如何更改以下过程，如果由于 PrimaryKey 或某些原因未成功执行插入语句，则也不得执行 Delete 语句，而且它应该生成一条我自己编写的错误消息。

```
CREATE PROCEDURE [dbo].[ReAdmissionInsert]
@GRNo varchar(4),
@ClassId numeric(2),
@FacultyId numeric(1),
@Section varchar(1),
@SessionId numeric(1)
AS
begin
insert into ReAdmissionDtl(GRNo,ClassId,FacultyId,Section,SessionId) values(@GRNo,@ClassId,@FacultyId,@Section,@SessionId)
delete from Discharge where GRNo = @GRNo
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:27:18.917

您使用`BEGIN TRAN`&创建一个事务，如果您的or失败`COMMIT`将回滚：`INSERT``DELETE`

```
CREATE PROCEDURE [dbo].[Readmissioninsert] @GRNo      VARCHAR(4),
                                           @ClassId   NUMERIC(2),
                                           @FacultyId NUMERIC(1),
                                           @Section   VARCHAR(1),
                                           @SessionId NUMERIC(1)
AS
  BEGIN
      BEGIN TRAN  --<= Starting point of transaction

      INSERT INTO readmissiondtl
                  (grno,
                   classid,
                   facultyid,
                   section,
                   sessionid)
      VALUES     (@GRNo,
                  @ClassId,
                  @FacultyId,
                  @Section,
                  @SessionId)

      DELETE FROM discharge
      WHERE  grno = @GRNo

      COMMIT --<= End point of transaction
  END 
```

[文档](http://msdn.microsoft.com/en-us/library/ms188929.aspx)

您可以将 a`TRY CATCH`用于错误消息：

*   [如何在 TSQL 中回滚事务](https://stackoverflow.com/a/639267/679449)
*   [TRY CATCH THROW：错误处理 T-SQL 中的更改](http://rusanu.com/2010/11/22/try-catch-throw-exception-handling-in-t-sql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:40:28.060

使用事务和 try catch 块。在 catch 块中提出错误，如下所示：

```
CREATE PROCEDURE [dbo].[ReAdmissionInsert]
@GRNo varchar(4),
@ClassId numeric(2),
@FacultyId numeric(1),
@Section varchar(1),
@SessionId numeric(1)
AS
begin
Begin transaction
Begin try
    insert into ReAdmissionDtl(GRNo,ClassId,FacultyId,Section,SessionId)
       values(@GRNo,@ClassId,@FacultyId,@Section,@SessionId)
    delete from Discharge where GRNo = @GRNo
    Commit transaction
End try
Begin catch
    Rollback
    Raiserror(999999,'my message',16,1)
End catch
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:02:42.230

**使用事务编写 SQL Server 存储过程的最佳实践 -**

1.  封闭`TRY..CATCH`块
2.  错误检查`@@TRANCOUNT`和`ROLLBACK`交易
3.  `RAISE`实际`ERROR`报警调用程序

**样本 -**

```
CREATE PROCEDURE [dbo].[ReAdmissionInsert]
@GRNo varchar(4),
@ClassId numeric(2),
@FacultyId numeric(1),
@Section varchar(1),
@SessionId numeric(1)
AS
BEGIN
SET NOCOUNT ON
BEGIN TRY   
    BEGIN TRAN

    insert into ReAdmissionDtl(GRNo,ClassId,FacultyId,Section,SessionId)
       values(@GRNo,@ClassId,@FacultyId,@Section,@SessionId)

    delete from Discharge where GRNo = @GRNo

    COMMIT TRAN     
END TRY    
BEGIN CATCH

    IF @@TRANCOUNT > 0
        ROLLBACK TRAN

    /*ERROR OCCURED*/  
    DECLARE @ERROR_MESSAGE NVARCHAR(4000);--MESSAGE TEXT           
    DECLARE @ERROR_SEVERITY INT;--SEVERITY           
    DECLARE @ERROR_STATE INT;--STATE        

    SELECT @ERROR_MESSAGE = ERROR_MESSAGE(),        
        @ERROR_SEVERITY = ERROR_SEVERITY(),        
        @ERROR_STATE = ERROR_STATE() 

    /*RETURN ERROR INFORMATION ABOUT THE ORIGINAL ERROR THAT CAUSED
      EXECUTION TO JUMP TO THE CATCH BLOCK.*/           
    RAISERROR (@ERROR_MESSAGE, @ERROR_SEVERITY, @ERROR_STATE)

END CATCH   
END 
```

请注意，`@@TRANCOUNT`已检查以验证是否有任何打开的事务和`ERROR`消息被保留并引发，因此程序将接收`SqlException`.

# c# - 访问数据时如何解决“调用目标引发异常”？

> ID：13016561
> 
> 赞同：0
> 
> 时间：2012-10-22T17:26:08.947
> 
> 标签：c#, sqlite, exception, windows-8

在选择更改事件中，我正在访问我的一张表中的数据。但是会抛出“异常已被调用的目标抛出”。

```
var query = conn.Table<auto_fares>().Where(x => x.city == cbCity.SelectedItem);
var result = await query.ToListAsync();
foreach (var item in result)
{
    txtDistance.Text = item.min_km.ToString();
    lblDayFare.Text = item.min_fare.ToString();
    lblNightFare.Text = item.night_charges.ToString();
} 
```

添加 Dispose 语句后，我收到以下错误：“await 运算符只能在异步 lamhda 表达式中使用。考虑使用 'async' 修饰符制作此 lamhda 表达式。”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:00:36.907

尝试像这样重写您的代码：

```
var selectedCity = cbCity.SelectedItem;
var query = conn.Table<auto_fares>().Where(x => x.city == selectedCity);
var result = await query.ToListAsync();
foreach (var item in result)
{
    txtDistance.Text = item.min_km.ToString();
    lblDayFare.Text = item.min_fare.ToString();
    lblNightFare.Text = item.night_charges.ToString();
} 
```

您正在尝试从非 UI 线程 (await query.ToListAsync() ) 访问 UI 组件 (cbCity.SelectedItem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:36:14.473

这个 foreach 是异步执行的，您正在从不同的线程访问您的 UI。将您的 foreach 包装在 Dispatcher.Invoke() 中。

像这样：

```
Dispatcher.CurrentDispatcher.Invoke( new Action( () => {... your foreach...}   ); 
```

# objective-c - 将曲线拟合到一组点

> ID：13016563
> 
> 赞同：0
> 
> 时间：2012-10-22T17:26:23.280
> 
> 标签：objective-c, ios, math, interpolation, gaussian

基本上，我有一组多达 100 个坐标，以及曲线的第一个点和最后一个点**所需的切线。**

我研究了各种曲线拟合方法，我的意思是一种算法，它采用输入的数据点和切线，并输出治愈方程，例如高斯法和插值法，但我真的很难理解它们。

我不是要代码（如果你选择给它，那是可以接受的:)），我只是在寻找这个算法的帮助。它最终将被转换为 iPhone 应用程序的 Objective-C，如果这改变了任何东西..

**编辑：** 我知道所有点的顺序。它们并不太靠近，因此必须通过所有点 - 也就是插值（除非有人可以提出其他建议）。据我所知，代数曲线是我正在寻找的。顺便说一句，这一切都是在**二维**平面上完成的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:50:32.553

我建议考虑三次样条。[在数字食谱书（第 3.3 章）](http://apps.nrbook.com/c/index.html)中有一些解释和代码可以用纯 C 语言计算它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:37:41.760

大多数插值方法最初使用函数：给定一组*x*和*y*值，它们计算一个函数，该函数为每个*x值计算一个**y*值，满足指定的约束。由于函数只能为每个*x*值计算一个*y*值，因此这样的曲线不能在自身上循环。

 ***要将其转换为真正的 2D 设置，您需要*两个*分别计算*x*的函数。*y*值基于一些通常称为*t*的参数。所以第一步是计算输入数据的*t*值。您通常可以通过对欧几里德距离求和来获得一个很好的近似值：考虑一条将所有点与直线段连接起来的折线。然后参数将是每个输入对沿这条线的距离。

所以现在你有两个插值问题：一个从 t 计算x *，**另一个*从t*计算**y*。您可以将此公式化为[样条插值](http://en.wikipedia.org/wiki/Spline_interpolation)，例如使用三次样条。这为您提供了一个大型线性方程组，您可以迭代求解，直至达到所需的精度。

 ***样条插值的结果将是合适曲线的分段描述。如果你想要一个单一的方程，那么拉格朗日插值就可以满足这个要求，但是对于许多输入数据集，结果可能会有奇怪的曲折。******

# c - C - 从流中读取煮熟的输入

> ID：13016567
> 
> 赞同：1
> 
> 时间：2012-10-22T17:26:30.470
> 
> 标签：c, input, fgets, termios

我知道有很多关于“阅读输入”的问题，但为了澄清我正在尝试阅读熟输入。由于某种原因 fgets 没有煮熟（不确定这是默认情况还是我需要使用 termios 打开它）所以有什么帮助吗？ncurses 不是一个选项。

示例：输入 hey 然后退格，输出为 hey^H，表示原始输入模式

顺便说一句，我尝试通过 termios 打开规范模式，但我仍然无法获得熟输入。

# c++ - C++：为指针成员赋值

> ID：13016573
> 
> 赞同：0
> 
> 时间：2012-10-22T17:26:36.270
> 
> 标签：c++, pointers

我有以下代码：

```
template<class T>
class RandomTreeNode {
private:
    RandomTreeNode<T> *left;
    RandomTreeNode<T> *right;
public:
    RandomTreeNode(): left(0), right(0) {}

    void create_left_child(){ left = &RandomTreeNode<T>();}
    void create_right_child(){ right = &RandomTreeNode<T>();} 
```

但这给了我一个编译错误，因为我指向一个临时变量的地址。我不希望创建的新 RandomTreeNode 在函数结束时被销毁，我该如何实现呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T17:28:02.913

采用：

```
void create_left_child()
{
    left = new RandomTreeNode<T>();
}

void create_right_child()
{
    right = new RandomTreeNode<T>();
} 
```

请记住，当您不再需要它们时（可能在整个树被破坏时，或者当该特定节点被删除时），您必须删除它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T17:31:50.487

这是我的做法：

```
template<class T>
class RandomTreeNode {
    std::unique_ptr<RandomTreeNode<T> > left;
    std::unique_ptr<RandomTreeNode<T> > right;

    RandomTreeNode(): left(0), right(0) {}

    void create_left_child(){ left.reset(new RandomTreeNode<T>());}
    void create_right_child(){ right.reset(new RandomTreeNode<T>());}
} 
```

不需要析构函数，也不需要手动内存管理。

# c# - 跨平台的 Sqlite

> ID：13016578
> 
> 赞同：8
> 
> 时间：2012-10-22T17:27:00.057
> 
> 标签：c#, sqlite

我正在编写一个需要在 iOS、Android、Windows Phone、WPF、Windows 8 Metro、Linux 和 Mac 上运行的应用程序。我在跨平台领域拥有大约 95% 的代码，但 UI 和某些东西显然需要针对每个平台进行专门编码。

现在，我们需要在应用程序中添加一些非常简单的数据库支持，我很想在我的代码中使用跨平台领域的 Sqlite。这可以使用任何现有的 Sqlite 包装器完成，还是我需要创建自己的？或者我应该使用几个具有相同语法的 Sqlite 包装器，并且只从我的不同 csproj 文件（每个平台）中引用不同的库？

我已阅读此 Q/A [SQLite 是否有 .NET/C# 包装器？](https://stackoverflow.com/questions/93654/is-there-a-net-c-wrapper-for-sqlite)但是经过一个小时的阅读，我仍然不确定如何在所有这些平台上运行，所以我认为有人可能在我之前就已经考虑过这些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-15T17:28:07.030

使用 SQLite 进行跨平台 .NET/C# 开发的一些选项是：

## SQLitePCL.raw

*用于对 SQLite 进行低级（原始）访问的可移植类库 (PCL)*

SQLitePCL.raw 在 SQLite C API 之上提供了一个非常薄的 C# 包装器。SQLitePCL.raw 公开的 API 从应用程序开发人员的角度来看是敌对的，但被设计为用作可以构建更友好包装器的通用可移植层。

**许可证**：Apache 许可证 v2

**源代码**：[https ://github.com/ericsink/SQLitePCL.raw](https://github.com/ericsink/SQLitePCL.raw)

**Nuget**：[https ://www.nuget.org/packages/SQLitePCLRaw.core](https://www.nuget.org/packages/SQLitePCLRaw.core)

**平台**：Xamarin.Android、Xamarin.iOS、UWP、Windows Phone 8.1、.NET 4.5、.NET 4.0、.NET 3.5、Linux、MacOS、NetStandard 1.1、Windows Phone 8（有限制）、Windows Phone 8.1 Silverlight（有限制)

* * *

## SQLitePCL.pretty

*SQLitePCL.raw 上的漂亮面孔*

该库使用友好的 C# 面向对象 API 包装了 SQLitePCL.raw 提供的 C like SQLiteAPI。SQLitePCL.pretty 具有广泛的单元测试覆盖率，并支持最新 SQLite 版本中提供的许多新功能。

**许可证**：Apache 许可证 v2

**源代码**：[https ://github.com/bordoley/SQLitePCL.pretty](https://github.com/bordoley/SQLitePCL.pretty)

**Nuget**：[https ://www.nuget.org/packages/SQLitePCL.pretty](https://www.nuget.org/packages/SQLitePCL.pretty)

**平台**：与 SQLitePCL.raw 相同

* * *

## SQLite 网络

*简单、强大、跨平台的 SQLite 客户端和 .NET 的 ORM*

SQLite-net 被设计为一个快速方便的数据库层。很容易与现有项目集成并在所有 .NET 平台上运行，使用非常简单的方法来安全地执行 CRUD 操作和查询（使用参数）并以强类型方式检索这些查询的结果。

**许可证**：麻省理工学院许可证

**源代码**：[https ://github.com/praeclarum/sqlite-net](https://github.com/praeclarum/sqlite-net)

**Nuget**：[https ://www.nuget.org/packages/sqlite-net-pcl](https://www.nuget.org/packages/sqlite-net-pcl)

**平台**：与 SQLitePCL.raw 相同

* * *

## Microsoft.Data.Sqlite

System.Data.Common 接口的 SQLite 实现

该项目是 ASP.NET Core 的一部分，由 Microsoft 维护

**许可证**：Apache 许可证 v2

**源代码**：[https ://github.com/aspnet/Microsoft.Data.Sqlite](https://github.com/aspnet/Microsoft.Data.Sqlite)

**Nuget**：[https ://www.nuget.org/packages/Microsoft.Data.SQLite](https://www.nuget.org/packages/Microsoft.Data.SQLite)

**平台**：.NET Framework、Mono、.NET Core（.NET Native、CoreCLR、Windows Universal）、Xamarin（计划中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:49:36.527

我建议使用 SQLite 包装器的 Mono 版本 (http://www.mono-project.com/SQLite)。包装器本身完全用托管代码编写，您只需要为各自的环境提供 Sqlite 库。

通过这样做，我有一个在 linux 和 windows 上运行的 C# 项目。

您可能能够摆脱使用官方 C# 包装器（http://system.data.sqlite.org/），但我不确定它如何处理多个平台。

# android - 为 Android 安装 Xamarin Mono：安装程序看不到已安装的 SDK

> ID：13016591
> 
> 赞同：3
> 
> 时间：2012-10-22T17:27:53.977
> 
> 标签：android, mono, xamarin.android

在为 Android 安装 Xamarin Mono 时，它说找不到 Java SDK 和 Android SDK，然后继续下载它们。但我已经安装了 Java SDK 和 Android SDK。

我查看了安装日志 (c:\users\\appdata\local\xamarin\monoforandroid)，发现它查找注册表项：'SOFTWARE\Wow6432Node\JavaSoft\Java Development Kit'，值 'CurrentVersion' 和 'SOFTWARE\ JavaSoft\Java Development Kit'，值'CurrentVersion'。它没有找到它。我查看了注册表，看到了键“HKLM\SOFTWARE\JavaSoft\Java Development Kit”。

为什么设置看不到密钥？

日志中的详细信息如下：

```
[Info] Checking whether JDK needs to be installed.
[Debug] Attempting to read registry subkey 'SOFTWARE\Wow6432Node\JavaSoft\Java Development Kit', value 'CurrentVersion'
[Debug] Attempting to read registry subkey 'SOFTWARE\JavaSoft\Java Development Kit', value 'CurrentVersion'
[Info] JDK not detected.
[Info] JDK 1.6 needs to be installed. 
```

有没有办法告诉安装程序安装了 Java SDK 和 Android SDK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T21:12:37.673

我在使用 Xamarin 安装程序时遇到了一些类似的问题。我通常会允许 Xamarin 安装程序为我设置所有内容，但它不起作用。所有工具都已安装并且似乎可以正常工作，但我无法启动设备来运行示例 hello world 应用程序。我怀疑这是因为默认情况下安装 SDK 的位置（并且在安装过程中没有提示我！）。默认位置似乎在 c:\users\\appdata... 中结束了...但是我办公室的 IT 政策使它成为一个时髦的同步驱动器，我发现大多数事情都不是因为它。

为了解决这个问题，我删除了 ADT 包，认为除了拥有 SDK 之外，我还想通过 eclipse 来愚弄视觉设计师。一些谷歌搜索和解析安装日志让我意识到我需要一些注册表项才能让安装实用程序找到 SDK。通过将以下内容放入 adt.reg 然后运行它来修复它。

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\Wow6432Node\Android SDK Tools]
"Path"="C:\\lib\\adt-bundle-windows\\sdk"

[HKEY_CURRENT_USER\SOFTWARE\Android SDK Tools]
"Path"="C:\\lib\\adt-bundle-windows\\sdk"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Android SDK Tools]
"Path"="C:\\lib\\adt-bundle-windows\\sdk"

[HKEY_LOCAL_MACHINE\SOFTWARE\Android SDK Tools]
"Path"="C:\\lib\\adt-bundle-windows\\sdk" 
```

不过，Xamarin 设置似乎仍然打算使用 sdk 进行更新。我特别喜欢日志中的这一行。

> 组件 'Android SDK' v. 21.0.0.0 存在，但需要更新到 v. 20

至少现在一切似乎都在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T11:53:05.890

安装程序会尝试在注册表的“当前用户”部分中查找密钥。但是 Java JDK（以及其他产品）安装程序将其放置在“本地机器”部分。

使固定！

注册表编辑器 (regedit.exe) 可以使用脚本通过命令启动，只不过是带有 *.reg 扩展名的文本文件。

● 打开记事本！

● 粘贴以下内容。

[http://pastebin.com/XECCj5Mm](http://pastebin.com/XECCj5Mm)

如果您安装了 1.7 JDK，请使用它！

[http://pastebin.com/QSSasyzS](http://pastebin.com/QSSasyzS)

● 将文件另存为anything.reg！确保为“另存为类型”选择“所有文件 ( *.* )”！

● 双击您保存的*.reg 文件！单击“确定”获取 UAC 消息（如果您正在运行 => vista） 单击“确定”获取来自注册表编辑器的有关将 *.reg 文件的内容合并到系统注册表的消息。

● 单击“确定”获取信息消息。

● 重新启动 Xamarin Mono for Android 安装程序。

至于缺少的 Android SDK，您可能缺少这些，所以让安装程序下载吧！

# python - 在python字符串中做一些详细的解释

> ID：13016598
> 
> 赞同：2
> 
> 时间：2012-10-22T17:28:25.550
> 
> 标签：python, regex, comments

使用Java，我可以拆分字符串并给出一些详细的解释

```
String x = "a" + // First
           "b" + // Second
       "c";  // Third

// x = "abc" 
```

如何在python中进行等价？

我可以拆分字符串，但我不能像使用 Java 那样对此发表评论。

```
x = "a" \
"b" \
"c" 
```

我需要这个特性来解释正则表达式的用法。

```
Pattern p = Pattern.compile("rename_method\\(" + // ignore 'rename_method('
                        "\"([^\"]*)\"," +    // find '"....",' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T17:29:30.993

这

```
x = ( "a" #foo
      "b" #bar
    ) 
```

将工作。

魔术在这里通过括号完成——python 自动在任何未终止的括号 ( `([{`) 内继续行。请注意，当字符串彼此相邻放置时，python 还会自动连接字符串（我们甚至不需要`+`运算符！）——真的很酷。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T17:31:36.470

如果你想专门为正则表达式做这件事，你可以很容易地用`re.VERBOSE`标志来做。从 Python[文档](http://docs.python.org/howto/regex.html)（向下滚动一点以查看`VERBOSE`标志的文档）：

```
charref = re.compile(r"""
 &[#]                # Start of a numeric entity reference
 (
     0[0-7]+         # Octal form
   | [0-9]+          # Decimal form
   | x[0-9a-fA-F]+   # Hexadecimal form
 )
 ;                   # Trailing semicolon
""", re.VERBOSE) 
```

# arduino - Arduino中断处理

> ID：13016607
> 
> 赞同：1
> 
> 时间：2012-10-22T17:29:00.280
> 
> 标签：arduino, sd-card, interrupt, i2c

## 背景

我需要一个在“Arduino 兼容”chipKit UNO32 板上运行的数据记录应用程序，并带有连接的传感器。数据应记录到“Arduino Wireless SD shield”上的 SD 卡中。传感器通过 I2C 连接。

我的问题是，当我使用 Arduino SD 库时，写入速度很慢：每次 print() 操作需要 25 毫秒，这给了我最多 40 赫兹的频率，这与我传感器的 100-800 赫兹数据速率相比是可笑的。

## 我的错误解决方案

幸运的是，传感器配备了可存储 32 个传感器值的片上 FIFO。这意味着我可以毫无问题地达到至少 200Hz，因为填充 FIFO 的时间远大于写入卡的时间。但我仍然很想达到至少 400Hz，所以我想我应该有以下设置：

1.  告诉传感器将数据放入 FIFO
2.  当 FIFO 快满时，传感器会触发中断（传感器会这样做，并且有效，我可以捕获中断）
3.  当 Arduino 接收到中断时，它会轮询传感器的数据（通过 I2C）并将数据存储在 SRAM 的缓冲区中。
4.  当 SRAM 缓冲区已满时，将其内容写入 SD 卡。

不幸的是，这似乎不起作用，因为处理 I2C 的 Arduino Wire 库使用中断，并且不能从中断处理程序中调用。我试过了，它冻结了微控制器。

## 我的问题

似乎还有其他不依赖中断的 Arduino I2C 库。我应该尝试这条路线吗？

还是我的思维方式（在 ISR 中获取大量数据）从一开始就不好？我应该采取另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:28:02.390

只需使用中断设置标志并完成 ISR。从主循环执行调用 I2C 而不是直接从 ISR 调用。

```
boolean fifoFull = false;

void fifoISR() {
    fifoFull = true;
}

void loop() {
    if(fifoFull) {
        // Do I2C
        fifoFull = false;
    }
} 
```

# java - 将检查的异常作为 RuntimeException 抛出可能会引发什么问题？

> ID：13016610
> 
> 赞同：5
> 
> 时间：2012-10-22T17:29:09.700
> 
> 标签：java, exception-handling

我有一段代码在 JSON 字符串中编码某种业务数据：

```
public String encodeDataAsJsonString(Data data) throws JSONException {
    JSONObject o = new JSONObject();
    o.put("SomeField1", data.getSomeProperty1());
    o.put("SomeField2", data.getSomeProperty2());
    ...
    return o;
} 
```

事情是：

*   JSONException 是一个检查异常，但是
*   我真的不知道如何在编译时处理它。*如果 JSONException 真的发生，它可能是代码中的一个错误，应该由已经存在*的常规“全局未捕获异常处理程序” （例如[this](https://stackoverflow.com/q/2764394/87698)）处理，并且已经执行了所有必要的日志记录和清理。

因此，我最终在调用方法中这样做了：

```
...
try {
    encoded = encodeDataAsJsonString(data);
} catch (JSONException e) {
    throw new RuntimeException(e);
}
... 
```

这似乎比在调用堆栈上的每个方法中`throws JSONException`添加*a更小。*但是，它仍然感觉很脏，因此我的问题是：

**如果我想要一些特定的已检查异常走“常规未检查异常路线”，是否将其重新作为 RuntimeException 使用正确的习惯用法？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:45:19.443

情况很简单：如果你的异常没有商业价值，也就是说，它只是一个失败，一定要使用未经检查的异常。如果您需要以特定于该异常的方式处理该异常，这在大多数情况下意味着处理代码会涉及业务逻辑，那么使用未经检查的异常仍然可以，但是使用未检查的异常至少有一些好处检查异常。但是，无论哪种情况，您从 JSON API 获得的原始异常都是无用的，它只是公共 API 设计不佳的标志。

作为旁注，有一个“偷偷摸摸的抛出”习语，它允许您在不包装的情况下抛出原始的检查异常：

```
public static <R> R sneakyThrow(Throwable t) {
  return UncheckedThrower.<RuntimeException, R>sneakyThrow0(t);
}
@SuppressWarnings("unchecked")
private static <E extends Exception, R> R sneakyThrow0(Throwable t) throws E { throw (E)t; } 
```

不用说，在项目中使用这种方法时应该非常小心。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T17:32:06.347

简短的回答，是的。

您可能可以创建自己的异常类（运行时异常的子类）并重新抛出它以使其更容易记录，在必要时捕获/处理它。像休眠这样的事情通过使用 HibernateException 来实现，客户端/调用代码不会强制捕获它，但当可以使用它完成某些逻辑/应用程序特定的事情时，它总是可以捕获它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:57:11.337

好吧，如果您不打算在应用程序代码中处理异常，那么您可以将其作为`RuntimeException`.

我更喜欢用它`com.google.common.base.Throwables`来传播这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T17:33:39.980

在 Java 代码中*只*使用未经检查的异常是有争议的。如果您想遵循这种方法，那么像您所做的那样包装已检查的异常是唯一明智的做法。FWIW，我已经多次使用这种方法并且它很有用。

即使您不想接受这种风格，将一些已检查的异常转换为运行时异常可能仍然有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T17:33:46.377

我一直这样做。是的，这是一个很好的方法。不，这不是一种肮脏的方法。就个人而言，我不能忍受检查异常。我将所有检查的异常包装为运行时异常，无论它是什么类型的异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T17:33:21.507

检查异常是开发人员之间进行交流的一种方式。检查的异常说“处理我”。如果您知道自己在做什么，则可以重新抛出异常（并记录）。

编辑：与其他答案一样，重新包装异常也是很好的建议。

# mysql - mysql计算多列的总数

> ID：13016623
> 
> 赞同：0
> 
> 时间：2012-10-22T17:30:14.133
> 
> 标签：mysql, sql

嗨，我有一张桌子如下：

用户表

```
id  val1 val2 val3
1    2    3    2
2    0    0    1 
```

我想知道如何从 id = 1 的列 val1,val2,val3 中计算值？这意味着`id = 1`总计为 7，`id = 2`总计为 1。大多数 SO 示例计算所有 id 的整个列。我的解决方案如下似乎没有得到首选结果

```
select count(*) as tot
from (
select val1 as total from user
where id=1
union
select val2 as total from user
where id=1
union
select val3 as total from user
where id=1
) as x 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:31:02.743

您可以简单地将列添加在一起：

```
SELECT val1 + val2 + val3 FROM user WHERE id = 1 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/9f06c/1/0)上查看。

* * *

**更新**

要排除`NULL`值，请使用 MySQL 的[`IFNULL()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_ifnull)函数：

```
SELECT IFNULL(val1,0) + IFNULL(val2,0) + IFNULL(val3,0) FROM user WHERE id = 1 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/9f06c/2/0)上查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:34:13.880

看起来您需要对每个用户 ID 的列值求和。这将做：

```
select id, coalesce(val1, 0) + coalesce(val2, 0) + coalesce(val3, 0) 
from user 
```

请注意，coalesce 是一个 SQL ANSI 定义的函数，因此，它也适用于其他 DBMS。您可以使用`IFNULL()`，但这仅适用于 MySQL。

# objective-c - 在核心数据中获取属性

> ID：13016624
> 
> 赞同：6
> 
> 时间：2012-10-22T17:30:18.267
> 
> 标签：objective-c, ios, cocoa, core-data, nsmanagedobject

在我的核心数据模型中，a`Person`有一个或多个`Cars`，由无序对多关系“汽车”指定。通常，我需要检索由`datePurchased`或订购的人员的汽车`dateLastUsed`。

到目前为止，我一直在将自己的方法添加到`Person`for `carsByDatePurchased`。这使用排序描述符对 NSSet 进行排序`cars`并返回一个 NSArray。

我可以/应该为此使用 Fetched 属性吗？每次我需要按特定顺序的汽车时，我都会使用排序描述符遇到一些性能开销，甚至实现我自己的`carsByDatePurchased`. 看起来为我缓存了获取的属性 - 对吗？

获取的属性与我自己的实现有什么限制？

至关重要的是，获取的属性值在执行之间是否持续存在？如果我更新获取的属性并保存我的上下文，是否会在下次启动应用程序时存储该值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:02:16.863

获取的属性将起作用，实际上我在我自己的项目中使用了它，它具有需要按“添加日期索引”排序的 Post->Comment 关系。

有许多警告：您不能在可视化编辑器中指定排序描述符，而必须在代码中指定它。

我用这样的东西

```
 // Find the fetched properties, and make them sorted...
for (NSEntityDescription *entity in [_managedObjectModel entities])
{
    for (NSPropertyDescription *property in [entity properties])
    {
        if ([property isKindOfClass:[NSFetchedPropertyDescription class]])
        {
            NSFetchedPropertyDescription *fetchedProperty = (NSFetchedPropertyDescription *)property;
            NSFetchRequest *fetchRequest = [fetchedProperty fetchRequest];

            // Only sort by name if the destination entity actually has a "index" field
            if ([[[[fetchRequest entity] propertiesByName] allKeys] containsObject:@"index"])
            {
                NSSortDescriptor *sortByName = [[NSSortDescriptor alloc] initWithKey:@"index"
                                                                           ascending:YES];

                [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortByName]];
            }
        }
    }
} 
```

在我的帖子实体中，我有一个名为“sortedComments”的获取属性，其定义为：

```
post == $FETCH_SOURCE 
```

帖子有一对多“评论”关系，评论有“帖子”逆

与此处的其他答案相反：使用这样的获取属性的好处是，CoreData 负责缓存并使缓存无效，因为评论或拥有它们的帖子发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T19:05:27.433

如果您想获得一些性能，请使用 NSFetchedResultsController 进行获取并使其与缓存一起使用。下次您执行相同的提取时，提取会更快。在您的特定名称中，您将不得不缓存名称。查看 NSFetchedResultsController[文档](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:01:11.243

获取的属性基本上是一个获取请求。我不知道如何在 GUI 中向这些属性添加排序描述符，但我可能错了。但是为什么不在你的`carsByDatePurchased`方法中创建一个获取请求并提供一个排序描述符呢？它返回一个数组或结果（您可以将其廉价地包装在设置为 no 的`NSOrderedSet`标志`copyItems:`中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-27T13:32:17.730

```
AppDelegate *delegate = [UIApplication sharedApplication].delegate;
NSManagedObjectContext *context = [delegate managedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"DataRecord" inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSError *error;
fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
for (NSManagedObject *obj in fetchedObjects) {
    NSLog(@"Name: %@", [obj valueForKey:@"name"]);
    NSLog(@"Info: %@", [obj valueForKey:@"info"]);
    NSLog(@"Number: %@", [obj valueForKey:@"number"]);
    NSLog(@"Create Date: %@", [obj valueForKey:@"createDate"]);
    NSLog(@"Last Update: %@", [obj valueForKey:@"updateDate"]);
}
NSManagedObject *obj = [fetchedObjects objectAtIndex:0];
[self displayManagedObject:obj];
selectedObject = obj; 
```

# objective-c - 如何在 Interface Builder 中更改 UIButton 的背景图像并保留其形状？

> ID：13016627
> 
> 赞同：0
> 
> 时间：2012-10-22T17:30:34.990
> 
> 标签：objective-c, ios, xcode, uibutton, interface-builder

我正在编写我的第一个`Hello World`iOS应用程序，我什至不知道基本的东西，所以如果这个问题很愚蠢，我很抱歉。我想更改按钮的背景图像。但是当我这样做时，这个按钮会改变它的形状并变成方形而不是 `Rect Square`（具有非零角半径）。所以问题是有一些方法可以直接通过 Interface Builder 或通过在`.xib`文件中操作类似 XML 的语言或任何其他方式来更改背景和保留按钮的形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:37:56.503

添加一个按钮并将其类型属性设置为自定义。使用此方法，您可以为按钮定义图像，因为您希望它不仅显示在圆角矩形内的背景。

![在此处输入图像描述](../Images/b3eb51a0abafbacf0eb26a4896b673dd.png)

# html - 在 jwplayer 中播放 dailymotion 视频

> ID：13016633
> 
> 赞同：2
> 
> 时间：2012-10-22T17:31:29.483
> 
> 标签：html, flash, video, jwplayer

嗨，我想看看你们是否可以帮我解决这个问题我想用 jwplayer 播放 dailymotion 视频我可以播放 youtube 视频，但我也需要它来播放 dailymotion 视频请帮我解决这个问题 1 这是它播放 youtube 视频的代码但是当我输入一个dailymotion url，它给了我这个错误“任务队列在第5步失败：由于跨域策略限制，无法加载播放列表。” 这是可以在 jwplayer 中播放的 youtube 视频的代码

```
<script src="swfobject.js" type="text/javascript"></script>
<script src="jwplayer.js" type="text/javascript"></script>
    <script type="text/javascript">
        jwplayer("jwplayer").setup({
        'flashplayer': "player.swf",
        'width': '641',
        'height': '391',
        'allowfullscreen':'true',
        'allowscriptaccess':'always',
        'wmode':'opaque',
        'controlbar':'over',
        'dock':'true',
        'dock.position':'left',
        'mute':'false',
        'stretching':'uniform',
        'autostart': 'true',
        'file': 'http://www.youtube.com/embed/qBW59yz-_ZM',
        'logo.file':'logo.png',
        'logo.hide':'false',
        'logo.position':'top-right',
        'logo.link':'link',
        'abouttext':'text',
        'aboutlink':'somesite',
        'skin':'bekle.zip'
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:54:47.487

这是令人失望的，但根据这个线程：

[http://www.longtailvideo.com/support/forums/jw-player/using-playlists/30409/play-dailymotion-videos-in-jwplayer/](http://www.longtailvideo.com/support/forums/jw-player/using-playlists/30409/play-dailymotion-videos-in-jwplayer/)

目前，JWplayer 不支持 YouTube 以外的第三方来源。

更新：
如果您不必使用 JWplayer，可以尝试 MediaElemnt Player [http://mediaelementjs.com/](http://mediaelementjs.com/)它可以播放 YouTube 和 DailyMotion 视频，您只需要提供登录页面的 URL。dailymotion“插件”位于[https://github.com/johndyer/mediaelement/pull/663](https://github.com/johndyer/mediaelement/pull/663)

# php - PHP 中 Wordpress 自定义字段的问题

> ID：13016640
> 
> 赞同：0
> 
> 时间：2012-10-22T17:31:55.473
> 
> 标签：php, html, wordpress, custom-fields

我在使用自定义字段正确输出滑块中的图像目录时遇到了问题。我正在使用的代码如下：

```
<div class="container">
    <?php
    //path or directory where the images are stored
    $directory = "echo get_post_meta($post->ID, 'directory', true)";

    //read all files with a .jpg extension
    $images = glob($directory . "*.jpg");

    //output the required HTML code to display the images in the gallery
    foreach($images as $image)
    {
        echo '<div class="content"><div><a href="'.$image.'"><img src="'.$image.'" width="120" height="80" alt="this is a test" class="thumb" /></a></div></div>'."\n";
    }
    ?>
</div> 
```

我想要动态输出的值是 $directory = ""，它通常类似于 $directory = "images/product1/"。我将自定义字段“目录”设置为 images/product1/。有任何想法吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:41:44.097

看起来问题出在这一行：

```
$directory = "echo get_post_meta($post->ID, 'directory', true)"; 
```

将导致尝试像这样进行 glob：

```
glob("echo get_post_meta($post->ID, 'directory', true)*.jpg"); 
```

这显然是无效的。

相反，您实际上应该调用该`get_post_meta()`函数

```
$directory = get_post_meta($post->ID, 'directory', true); 
```

# .net - 如何访问 Windows.Management.Deployment 命名空间？

> ID：13016645
> 
> 赞同：2
> 
> 时间：2012-10-22T17:32:03.960
> 
> 标签：.net, windows-8, windows-runtime, windows-store-apps

我有一个集成测试套件，我正在尝试扩展它以允许测试适用于 Windows 8 的程序版本。我的目标工作流程很简单：创建 appx 包、安装、运行 appcert.exe、卸载包、清理其他东西

所以，我正在尝试访问 Windows.Management.Deployment 命名空间，它应该允许我完成包的所有安装和管理。问题是这个命名空间显然需要使用 .Net 的 WinRT 版本，这对我们来说是行不通的，因为它需要大量的转换，特别是因为我们不需要它作为 Windows 应用商店应用程序运行，并且不喜欢它。他们的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.management.deployment.packagemanager)还说：

> 重要您不能在 Windows 应用商店应用程序中使用此类。

那么你到底想如何利用这个类！？我尝试手动添加对 Windows.winmd 的引用，但我得到“您只能将 WinMD 引用添加到面向 Windows 8.0 或更高版本的项目”，我并不完全理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:36:25.830

您可以[从桌面应用程序使用 WinRT API](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)。

只需添加

```
<PropertyGroup>
    <TargetPlatformVersion>8.0</TargetPlatformVersion>
</PropertyGroup> 
```

到`.csproj`.

# c++ - 虚函数和 static_cast

> ID：13016653
> 
> 赞同：2
> 
> 时间：2012-10-22T17:32:43.753
> 
> 标签：c++, casting, static-cast

在以下代码或UB的情况下，在多态类上使用static_cast后，我可以安全地调用虚函数吗？

```
#include <iostream>

class Base
{
public:
   virtual void foo() { std::cout << "Base::foo() \n"; }
};

class Derived : public Base
{
public:
   virtual void foo() { std::cout << "Derived::foo() \n"; }
};

int main()
{
   Base* derived = new Derived;
   Derived* _1 = static_cast<Derived*>(derived);
   _1->foo();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:36:31.467

是的你可以。尽管在您的具体示例中我没有看到这样做的意义。只是把它称为

```
derived->foo(); 
```

没有任何演员表会产生完全相同的效果。`static_cast`即，在这种情况下，虚拟调用机制会隐式执行某种操作。

请注意，您`static_cast`不会以任何方式抑制呼叫的“虚拟”性质。

这实际上让我想知道你的问题到底是关于什么的。你为什么还要问这个？你想做什么？在您的代码示例中真正代表您正在尝试做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:39:11.370

如果编译器允许您`static_cast`并且在运行时对象的动态类型符合预期，那么是的，您可以。问题是你为什么要这样做...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:43:59.553

是的，但正如其他人所说，您不需要将指针强制转换为派生类型来调用虚函数。

[`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast)但是，在处理继承的类时使用它通常更安全。`dynamic_cast`如果在运行时类型信息不正确，使用将产生正确的错误。

```
Derived* d = dynamic_cast<Derived*>(derived); //safer, but still unnecessary in this situation 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:42:33.583

正如所写，这将起作用，主要是因为`derived` *是*一个`Derived*`. 所以，演员所做的只是告诉编译器你已经知道了什么。再说一次，即使没有静态演员表，你最终也会得到`Derived::foo`你的输出。所以，这有点毫无意义。尽管如此，您可能需要在您绝对确定您知道变量的实际实例类型并且出于某种原因需要访问一些非虚拟成员的情况下执行此操作。例如，如果您使用的是设计糟糕的类库...

但是，一般来说，静态向下转换是一个坏主意。您最终可能会尝试向下转换*不是*a的变量`Derived*`，在这种情况下，调用虚拟（或非虚拟）函数（或者实际上，将该指针用于几乎所有非平凡操作）会导致未定义行为。

# c# - 优化 C# 中的空方法调用

> ID：13016654
> 
> 赞同：1
> 
> 时间：2012-10-22T17:32:49.217
> 
> 标签：c#, optimization, abstract, method-call

我有一个抽象类，它应该成为一个巨大的类层次结构的基础。除其他外，它具有一定的抽象方法。在执行期间，它会被一个只知道这个抽象类而不知道它的子类的系统不断地调用这个类的所有对象：

```
 foreach( AbstractClass object in allTheObjects )
        object.DoStuff(); 
```

然而，实际上它的很多孩子并没有重写这个方法（在基类中它是空的）；使用它的和不在类层次结构中分布的。C# 会处理这个空方法，还是我必须以某种方式对其进行优化？

PS：我知道过早的优化是邪恶的，但这让我很好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:38:35.237

我不会担心的。在 C# 中，方法调用非常便宜。即使您对此进行优化，我也怀疑您会看到任何不同。请参阅[此](https://stackoverflow.com/questions/2082735/performance-of-calling-delegates-vs-methods)帖子以供参考。

我会更担心您是否可以避免遍历所有内容，或者数据结构`allTheObjects`是什么。我想说那里有更多的优化潜力。

此外，您可能会考虑是否真的需要一个大的继承结构，或者您是否可以通过组合或接口来实现您的目标。

您还将[在此处](http://tips.x-tensive.com/2008/10/method-call-performance.html)找到更多信息（接口方法与委托与普通方法调用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:39:39.067

> 但是，实际上它的很多孩子都会有这个方法为空

也许您需要将此方法声明为虚拟而不是抽象？因此，您可以提供默认的空实现。

# php - 更改父级或删除时更新嵌套集

> ID：13016655
> 
> 赞同：6
> 
> 时间：2012-10-22T17:32:51.557
> 
> 标签：php, mysql, database, sql-update, nested-sets

我有以下表结构，为了方便起见，它[也在 sqlfiddle](http://sqlfiddle.com/#!2/8080f)上：

```
+---------+------------+---------+----------+------ -----+--------------------------------+------------ ------------+--------+--------------+-------------+ ---------------+------------+
| 规则ID | parent_id | left_id | right_id | 规则类型 | 规则标题 | 规则描述 | 公共 | parse_bbcode | 解析链接 | parse_smilies | group_ids |
+---------+------------+---------+----------+------ -----+--------------------------------+------------ ------------+--------+--------------+-------------+ ---------------+------------+
| 1 | 0 | 1 | 6 | 猫 | 样品类别 1 | | 1 | 0 | 0 | 0 | 1 2 7 |
| 2 | 1 | 2 | 3 | 规则 | 示例规则 1 | 这是一个示例规则描述 | 1 | 1 | 1 | 1 | 1 2 7 |
| 3 | 0 | 7 | 8 | 猫 | 样品类别 2 | | 1 | 0 | 0 | 0 | 1 7 2 |
| 4 | 0 | 9 | 10 | 猫 | 样品类别 3 | | 1 | 0 | 0 | 0 | 1 7 2 |
| 5 | 1 | 4 | 5 | 规则 | 示例规则 3 | 大声笑| 1 | 1 | 1 | 1 | 1 2 7 |
+---------+------------+---------+----------+------ -----+--------------------------------+------------ ------------+--------+--------------+-------------+ ---------------+------------+

```

如您所见，`rule_type`可以是`'cat'`或`'rule'`。

`cat`代表**类别**，类别是根节点：`parent_id`总是如此`0`。在我的代码中，我们可以通过检查 if`rule_type = 'cat'`或来识别类别`parent_id = 0`。

您还可以看到我正在为我的项目使用嵌套集，这就是问题所在。

我已经成功创建了以下功能：

*   上下移动规则和类别；和

*   将新规则或类别放在各自位置的末尾。

但是我没有设置**规则** `right_id`，`left_id`如果我们改变它`parent_id`！如果我们删除规则或类别，`right_id`我也无法设置。`left_id`

### 例子

我将尝试用一个例子来解释。请注意，这只是一个示例，而不是实际情况，我需要一个一般性的答案。

从上表中，我们看到我们有 3 个类别`rule_id IN (1, 3, 4)`和两个规则`rule_id IN (2, 5)`。

带的**规则**是带`rule_id = 2`的类别的一部分，我们可以从列`rule_id = 1`中看到。`parent_id`如果我更改`parent_id`为 4 怎么办？如何设置`right_id`&`left_id`以使一切都恢复原状？我知道我们需要更新两者`rule_id IN (1, 4)`以重新排序所有内容，但我不知道我的查询会是什么样子。

删除也是如此...例如我删除`rule_id = 2`（这是一个**规则**），我将如何以正确的顺序设置`right_id`& ？或者当我删除一个类别时？我将如何重新排序类别？`left_id``parent_id = 1`

我并没有真正尝试在这里做任何事情，因为我不知道如何做这样的事情，因此我寻求你们的帮助，伙计们。

我希望我说清楚了。如果没有，请告诉我，我会尝试更具描述性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T11:08:37.257

我假设您已成功设置 PDO 连接。

此外，请注意以下示例仅在所有类别都是根节点时才有效（如主题中）。更改此代码以使用嵌套类别不是问题。

**删除规则**

1.  检索其`right_id`和`left_id`值。

2.  从数据库中删除行。

3.  更新表集`right_id`- 2，其中`right_id`大于`right_id`删除规则。

4.  相同的`left_id`

*例子：*

```
 $ruleIdForDel = 2;
    $leftId = 2;
    $rightId = 3;

    $pdo->beginTransaction();
    try {
        $pdo->exec("DELETE FROM rules WHERE rule_id = $ruleIdForDel");
        $pdo->exec("UPDATE rules
                    SET left_id = CASE
                            WHEN left_id > $leftId THEN left_id - 2
                            ELSE left_id
                        END,
                        right_id = CASE
                            WHEN right_id > $rightId THEN right_id - 2
                            ELSE right_id
                        END");
        $pdo->commit();
    } catch (Exception $e) {
        $pdo->rollBack();
        throw $e;
    } 
```

**更新规则`parent_id`**

假设我们要将节点移动到新父节点的最后一个位置

1.  检索更新规则的`left_id`and `right_id`( `$ruleLeftId`and `$ruleRightId`)

2.  检索新的父规则的`left_id`and `right_id`( `$newParentRuleLeftId`and `$newParentRuleRightId`)

3.  检查一个节点是否在树上向上或向下移动，并根据它为更新规则（和）生成新的`left_id`和`right_id`值`$ruleNewLeftId``$ruleNewRightId`

4.  更新规则`left_id`并`right_id`取决于更新规则的目的地

5.  更新规则`parent_id`的更新`left_id``right_id`

如果更新规则`right_key`小于新的父规则`right_id`，则规则向下移动树，否则向上移动。

如果规则沿着树向下移动，我们将对`left_id`位于更新规则`left_id`( `$ruleLeftId`) 和 new `left_id`( `$ruleNewLeftId`) + 1 之间的规则的值移动负 2。否则，将`left_id`位于新规则`left_id`($ruleNewLeftId) 和之间的规则的值移动 2初始`left_id`（`$ruleLeftId`）。

对`right_id`.

*例子：*

```
 // Updating rule
    $ruleId = 2;
    $ruleLeftId = 2;
    $ruleRightId = 3;

    // New parent rule
    $newParentRuleId = 3;
    $newParentRuleLeftId = 7;
    $newParentRuleRightId = 8;

    // Generate new rule's left and right keys
    // Moves up
    if ($newParentRuleRightId < $ruleRightId) {
        $ruleNewLeftId = $newParentRuleRightId;
        $ruleNewRightId = $newParentRuleRightId + 1;
    // Moves down
    } else {
        $ruleNewLeftId = $newParentRuleRightId - 2; // 6
        $ruleNewRightId = $newParentRuleRightId - 1; // 7
    }

    $pdo->beginTransaction();
    try {
        $pdo->exec("UPDATE rules
                            SET left_id = CASE
                                /* Moves down */
                                WHEN $ruleNewRightId > $ruleRightId AND
                                     left_id > $ruleLeftId AND
                                     left_id <= $ruleNewLeftId + 1 THEN left_id - 2
                                /* Moves up */
                                WHEN $ruleNewRightId < $ruleRightId AND
                                     left_id >= $ruleNewLeftId AND
                                     left_id < $ruleLeftId THEN left_id + 2
                                ELSE left_id
                            END,
                            right_id = CASE
                                WHEN $ruleNewRightId > $ruleRightId AND
                                     right_id > $ruleRightId AND
                                     right_id <= $ruleNewRightId THEN right_id - 2
                                WHEN $ruleNewRightId < $ruleRightId AND
                                     right_id >= $ruleNewLeftId AND
                                     right_id <= $ruleRightId THEN right_id + 2
                                ELSE right_id
                            END");
        $pdo->exec("UPDATE rules
                    SET parent_id = $newParentRuleId,
                        left_id = $ruleNewLeftId,
                        right_id = $ruleNewRightId
                    WHERE rule_id = $ruleId");
        $pdo->commit();
    } catch (Exception $e) {
        $pdo->rollBack();
        throw $e;
    } 
```

我没有使用任何`PDO::Statement`只是为了节省空间。

我没有正确测试它，所以如果你发现一些问题，请发布一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:11:55.900

> rule_id = 2 的规则是 rule_id = 1 的类别的一部分，我们可以从 parent_id 列中看到。如果我将 parent_id 更改为 4 会怎样？如何设置 right_id 和 left_id 以便一切都恢复原状？我知道我们需要同时更新 rule_id IN (1, 4) 以重新排序所有内容，但我不知道我的查询会是什么样子。

试试这样的东西，我还没有测试过，但它可能会让你走上正轨

```
UPDATE table SET parent_id = 4, 
                 right_id = (CASE WHEN parent_id = 4 THEN 1 END), 
                 left_id = (CASE WHEN parent_id = 4 THEN 2 END) 
```

# string - 如何使用 switch case 获取字符串参数？

> ID：13016657
> 
> 赞同：0
> 
> 时间：2012-10-22T17:33:01.183
> 
> 标签：string, switch-statement

如何将字符串输入作为 switch case 参数？我可以用一个`int`但不是字符串来做到这一点。

如果我使用输入，下面的代码将起作用`int`，但如果我更改为字符串，它将不起作用。

```
#include <iostream>
#include <sstream>
#include <string>
#include <math.h>
class MissionPlan //start of MissionPlan class
{
    public:
    MissionPlan();
    float computeCivIndex(string,int,int,float,float);
}; //end of MissionPlan class

LocationData::LocationData()
{
    switch(sunType)
    {
        case "Type A": //compute 
                      break;
        case "Type B": //compute
                       break;
         //and many more case..
        default: break;
    }
}
int main()
{

    for(;;)
    {
    MissionPlan plan;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:38:48.640

抱歉，您不能在 C++ 中的字符串上使用 switch 语句。最好的办法是使用枚举。如果您不想使用枚举，那么您唯一的其他选择就是执行一堆 if else 来检查字符串是否相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:39:19.870

C/C++ 不支持`switch`带字符串的语句。改用`if-else-if`：

```
if (sunType.compare("Type A") == 0) {
     //compute
} else if (sunType.compare("Type B") == 0) {
     // compute
} else {
     // default
} 
```

# c# - 如何使 ASP.NET 按钮调用客户端 javascript 而不是回发

> ID：13016660
> 
> 赞同：2
> 
> 时间：2012-10-22T17:33:12.867
> 
> 标签：c#, javascript, asp.net, .net

我在 ASP.NET 中有一个 Web 应用程序，后面有 C# 代码。主登录页面将有一种触摸板类型的 UI，其中有 0-9 的按钮用于输入 pin #。

所以，我是 ASP.NET 和 JavaScript 的新手。当在 UI 上单击这些数字按钮时，无需在服务器端执行任何操作 - 根本不应该有任何回发。所需要做的就是在标签的文本上附加一个数字。我试图弄清楚如何在 JavaScript 中做到这一点，而按钮不会导致任何类型的回发。

为了使示例更简单，假设我在屏幕上有一个带有单个标签和单个按钮的 UI，并且每次单击该单个按钮时，它都应该在标签的文本中附加一个 1。这是我的 .aspx，但是当我尝试运行它时，在运行时出现“预期对象”异常......

编辑：我已经修改了我的示例以包含以下答案中提出的建议，但仍然存在问题。要重现，可以将此.aspx 代码复制到一个新的VS Web 应用程序项目的default.aspx 中，然后运行它并单击1 按钮；它应该将 1 附加到标签的值，但它会引发“预期对象”异常。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestJavascript._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
  <form id="form1" runat="server">
    <div>
      <asp:Table ID="baseTable" runat="server" HorizontalAlign="Center">
        <asp:TableRow ID="labelRow" runat="server" HorizontalAlign="Center" Width="100" Height="30">
          <asp:TableCell ID="labelCell" runat="server" HorizontalAlign="Center" Width="100%" Height="100%" BorderStyle="Solid" BorderWidth="1px">
            <asp:Label ID="inputLbl" runat="server"/>
          </asp:TableCell>
        </asp:TableRow>
        <asp:TableRow ID="buttonRow" runat="server" HorizontalAlign="Center">
          <asp:TableCell ID="buttonCell" runat="server" HorizontalAlign="Center">
            <asp:Button ID="btn1" runat="server" Text="1" Height="70px" Width="70px" OnClientClick="btn1Click()"/>
          </asp:TableCell>
        </asp:TableRow>
      </asp:Table>
    </div>
  </form>
  <script type="txt/javascript">
    void btn1Click()
    {
        document.getElementById('<%= inputLbl.ClientID %>').value += "1";
        return false;
    }
  </script>
</body>
</html> 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T17:35:01.697

您可以使用`OnClientClick`asp 按钮的属性并添加`return false;`它以防止回发：

```
<asp:Button ID="1Btn" runat="server" Text="1" Height="70px" Width="70px" 
    OnClientClick="btn1Click(); return false;" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:35:14.473

使用`return false;`语句，它将停止回发；如果您需要回发，`return true;`则从函数中。

```
<script type="text/javascript">
void btn1Click()
{
    this.inputLbl.Text += "1";
    return false;
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:42:16.970

首先，变量名不应该以数字开头，所以`1Btn`用一个有意义的名字（`btnAppendOne`）替换。

1.  在您的方法中将`onclick`客户端事件绑定到您的 , ：`Button``PageLoad`

    ```
    btnAppendOne.Attributes.Add("onclick", "return btnAppendOneClick();"); 
    ```

2.  使用正确的javascript（`return false`应该取消回发）：

    ```
    <script type="text/javascript">
         function btnAppendOneClick()
         {
             var updatedLabel = document.getElementById('<%=inputLbl.ClientID %>');
             updatedLabel.innerHTML = updatedLabel.innerHTML + "1";
             return false;
         }
    </script> 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-10T13:59:57.773

您的 Script 标签中有错字。第一行 (1)

```
 <script type="**text**/javascript">
void btn1Click()
{
    document.getElementById('<%= inputLbl.ClientID %>').value += "1";
    return false;
} 
```

# macos - Osx：核心音频：使用 AudioToolbox 解析原始压缩音频数据（以获取 PCM）

> ID：13016668
> 
> 赞同：1
> 
> 时间：2012-10-22T17:33:35.673
> 
> 标签：macos, audio, core-audio

我正在使用我自己的 c++ http 客户端（即 mp3、aiff 等）下载各种声音文件。现在我想使用 Core Audio 的*AudioToolbox*解析它们，以获取线性 PCM 数据，以便使用 OpenAL 进行播放。根据此文档：[https](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/ARoadmaptoCommonTasks/ARoadmaptoCommonTasks.html) ://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/ARoadmaptoCommonTasks/ARoadmaptoCommonTasks.html ，也应该可以从内存中创建音频文件。不幸的是，我在浏览 API 时没有找到任何方法，那么常见的方法是什么？请不要说我应该先将文件保存到我的硬盘。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:26:45.633

我已经使用输入内存缓冲区完成了这项工作，避免了任何文件，在我的情况下，我从 AAC 音频格式开始并使用苹果的 api：AudioConverterFillComplexBuffer 将硬件解压缩为 LPCM。诀窍是您必须定义一个回调函数来提供每个输入数据包。该 api 调用基于每个数据包进行格式转换。在我的情况下，我必须编写代码来解析压缩的 AAC 数据以识别数据包开始（0xfff），然后使用回调将每个数据包喂入 api 调用。我还在使用 OpenAL 进行音频渲染，这有其自身的挑战来避免使用输入文件。

# ios - HTTP response header content-length to verify image download

> ID：13016672
> 
> 赞同：1
> 
> 时间：2012-10-22T17:33:48.963
> 
> 标签：ios, http, asihttprequest, content-length, response-headers

I'm using ASIHTTP in my iOS app to download a queue of images. The problem is that under bad 3g connections sometimes the image download will fail and you will get a partially downloaded image (with the rest of the image being gray).

Now the question:

I'm getting from my webserver in the HTTP Headers the content-length value. Is this value going to be the correct size of the whole image, so I can verify against this the downloaded image, or if the connection is interrupted the content-lenght will only include the bytes that where downloaded at that moment, meaning I can't verify this way if the image was downloaded complete?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:10:04.767

You might want to look at the answers posted for [this question](https://stackoverflow.com/questions/8766219/if-i-check-the-content-length-header-is-it-100-accurate), usually it is indeed correct, otherwise it serves little purpose, however I'm not sure if it's as easy as comparing the two numbers after the download has finished, but it's probably reliable 99% of the time.

# php - PHP更改您的页面名称

> ID：13016673
> 
> 赞同：0
> 
> 时间：2012-10-22T17:33:49.650
> 
> 标签：php, get

我有一个作品集，在一页中显示 3 行图像。它被称为portfolio.php。

我想这样做，所以当您单击下一个按钮时，它将转到具有相同内容的下一页（portfolio2.php），只是不同的图像 URL 并将该页面重命名为portfolio.php?page=2 但不使用分页脚本。

有没有办法在不使用任何高级 PHP 脚本进行分页的情况下更改页面名称？有朋友告诉我这样做：

```
<?php
// Get the page ID
    $page_id = $_GET['page'];

    // Create the page string
    $page_string = "images_page" . $page_id . ".php";

    // Include the page
    include($page_string);
?> 
```

但我不确定如何使用此脚本收到内部服务器错误。

有什么方法可以将指定页面重命名为 portfolio.php?page=2 之类的东西？诸如（位置：）之类的东西..

我想这样做是因为我对 PHP 真的一无所知。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:37:38.563

你可以这样做......

```
if(isset($_GET['page']) && $_GET['page'] != '') {
   $pageno = $_GET['page']; /* Sanitize Here */
} else {
   /* You can redirect user to home page */
}

if(isset($pageno)) {
  if($pageno == '1') {
       /* Page 1 content */
  } elseif($pageno == '2') {
    /* Page 2 content */
  }
} 
```

**注意**： - 始终清理您的数据

# asp.net-mvc - 使用具有复杂类型的 EF Code First 时不会显示验证

> ID：13016674
> 
> 赞同：0
> 
> 时间：2012-10-22T17:33:53.067
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

这是这个问题[模型类和映射的延续](https://stackoverflow.com/questions/13000887/model-class-and-mapping)

我的 Client 类现在工作正常，它被定义为

```
using System;

using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

using DataAnnotationsExtensions;
using System.ComponentModel.DataAnnotations.Schema;
using System.Collections.Generic;

namespace CardNumbers.Objects
{
    [ComplexType]
    public class PhoneInfo
    {
        [DataType(DataType.PhoneNumber)]
        [StringLength(10)]
        [DisplayName("Phone")]
        public virtual string Phone { get; set; }

        [StringLength(5)]
        [DisplayName("Ext")]
        public virtual string Ext { get; set; }

        public bool HasValue
        {
            get
            {
                return (Phone != null || Ext != null);
            }
        }

    }

      [ComplexType]
      public class ContactDetail
      {
          //Constructor
          public ContactDetail()
          {
              phoneInfo = new PhoneInfo();
          }

          [StringLength(100)]
          [DisplayName("Contact Name")]
          [DisplayFormat(NullDisplayText = "")]
          public virtual string Contact { get; set; }

          [Email]
          [StringLength(100)]
          [DisplayName("Email")]
          public virtual string Email { get; set; }

          public virtual PhoneInfo phoneInfo { get; set; }
          public bool HasValue
          {
              get
              {
                  return (Contact != null || Email != null || phoneInfo.HasValue);
              }
          }
      }

/// <summary>
/// Client class (Client No, Client Name, Address, Contact1, Contact2 info, Created By, Modified By (operator and date)
/// </summary>
    public class Client
    {
        public Client()
        {
            Contact1 = new ContactDetail();
            Contact2 = new ContactDetail();
     }

        [Key]
        [Column("ClientId",TypeName = "int")]
        public virtual int Id { get; set; }
        [Required]
        [DisplayName("Client No")]
        [Column("client_no", TypeName = "smallint")]
        public virtual Int16 Number { get; set; }

        [Required]
        [Column("client_name", TypeName = "varchar")]
        [DisplayName("Client Name")]
        [MaxLength(30, ErrorMessage = "Client Name should not be longer than 30 characters" )]
        [MinLength(3, ErrorMessage = "Client Name is too short")]
        public virtual string Name { get; set; }

        [DataType(DataType.MultilineText)]
        public virtual string Address { get; set; }

        public virtual ContactDetail Contact1 {get; set;}
        public virtual ContactDetail Contact2 {get; set;}

        [ForeignKey("EnteredByOperator")]
        public string EnteredBy { get; set; }

        [InverseProperty("ClientsEnteredBy")]
        public virtual Operator EnteredByOperator { get; set; }

        [ForeignKey("ModifiedByOperator")]
        public string ModifiedBy { get; set; }

        [InverseProperty("ClientsUpdatedBy")]
        public virtual Operator ModifiedByOperator { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Created on")]
        public DateTime EnteredOn { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Modified on")]
        public DateTime? ModifiedOn { get; set; }

        public virtual ICollection<ClientOrder> ClientOrders { get; set; }

        public virtual ICollection<Reorder> Reorders { get; set; }
    }
} 
```

我使用 Fluent API 映射列名，并且我还重新定义了我原来的“存储库”类，使其与本教程[http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8中定义的非常相似](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8)

这是我当前对名为 _ClientForm 的客户端表单的部分视图：

```
@using WebDemo.Helper
@model CardNumbers.Objects.Client
<fieldset>
    <legend>Client Info</legend>

    @Html.ValidationSummary(true)

    <input type="hidden" id="fntype" name="fntype">
    @Html.HiddenFor(model => model.Id)
    @Html.EditorFor(model => model.Number, EditorTemplate.TextBox)

    @Html.EditorFor(model => model.Name, EditorTemplate.TextBox)

    @Html.EditorFor(model => model.Address, EditorTemplate.EditBox)

    <div id="ContactsInfo">
        @*Contact 1*@

        <div id="Contact1">

         @*@Html.EditorFor(model=>model.Contact1)*@
            @Html.EditorFor(model=>model.Contact1.Contact, EditorTemplate.TextBox)
            @Html.EditorFor(model=>model.Contact1.Email, EditorTemplate.TextBox)
        </div>

        @*Contact2*@
        <div id="Contact2">

        @*   @Html.EditorFor(model => model.Contact2)*@
        </div>
    </div>
    @*<div class="clear"></div>*@
    <div id="SaveCancel" class="float-right">
        <button type="Submit" id="btnSave">Save</button>
        <button type="reset" id="btnCancel">Cancel</button>
    </div>
</fieldset> 
```

我已经尝试恢复到只有一个级别的原始方式，并且我还评论了第二个 Contact2 信息，但电子邮件验证仍然不起作用，所有其他验证似乎也不起作用。

EditorFor 文本框是根据这篇博文定义的[http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-助手-数据注释-amp-jquery.aspx](http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-helpers-dataannotations-amp-jquery.aspx)

这些是我添加的两个新 EditorFor：PhoneInfo.cshtml

```
@using WebDemo.Helper
@model CardNumbers.Objects.PhoneInfo

<div id="PhoneInfo">
    <div class="float-left">
        @Html.EditorFor(model => model.Phone, EditorTemplate.TextBox)
    </div>
    <div class="float-right">
        @Html.EditorFor(model => model.Ext, EditorTemplate.TextBox)
    </div>
</div> 
```

和 ContactDetail.cshtml

```
@using WebDemo.Helper
@model CardNumbers.Objects.ContactDetail

@Html.EditorFor(model => model.Contact, EditorTemplate.TextBox)
@Html.EditorFor(model => model.Email, EditorTemplate.TextBox)
@Html.EditorFor(model=>model.phoneInfo) 
```

因此，如您所见，视图的代码现在非常紧凑。

然而，随着所有这些都到位，验证不会再触发了。我曾经通过输入一些垃圾来测试电子邮件验证。它用于在文本框附近提供验证消息。现在我观察到电子邮件文本框采用红色边框，但没有消息。

您是否看到我现在缺少的内容以及是否可以使用复杂的类型和验证？

为了澄清，_ClientForm 是从这个客户端视图中调用的：

```
@model CardNumbers.Objects.Client

@{
    ViewBag.Title = "Client";
}

@section scripts {
    <script src="@Url.Content("~/Scripts/Clients.js")" type="text/javascript" ></script>
}

 <form id="frmClientsSearch">
        <label for="clientNo">Client No: </label>
        <input type="number" name="searchClientNo" class="numericOnly" /><br />
        <label for="clientName">Client Name: </label>
        <input type =  "text" size =25 value ="Please enter the search value" class="SelectOnEntry"
            name ="searchClientName" />

       <input type="button" id="btnClientsSearch" value ="Find / Refresh" />      
</form>
<div style="padding-left: 150px; padding-top: 50px; padding-bottom: 50px;" id="ClientsResults">
    <table id="flexClients" style="display: none">
    </table>
</div>
<div style="display: none">
   <form id="sform" title="Client Info">

        @{Html.RenderPartial("_ClientForm", Model)   ;}

    </form>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:44:57.977

我在您的页面上的任何地方都没有看到表单。验证工作需要表单上下文。您需要将 Editor 属性包装在 BeginForm 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:29:06.463

经过一些试验和错误，我发现 TextBox EditorFor 视图是罪魁祸首。我在这里记录了我在答案中找到的内容[http://forums.asp.net/t/1855963.aspx/1?Validation+messages+don​​+t+show+up+ what+is+missing+](http://forums.asp.net/t/1855963.aspx/1?Validation+messages+don+t+show+up+what+is+missing+)

基本上只要我用这个EditorFor

```
@*@using WebDemo.Helper*@
@model CardNumbers.Objects.PhoneInfo

<div id="PhoneInfo">
    <div class="float-left">
        @* @Html.EditorFor(model => model.Phone, EditorTemplate.TextBox)*@
        <div class="editor-label">
            @Html.LabelFor(model => model.Phone)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Phone)
            @Html.ValidationMessageFor(model => model.Phone)
        </div>
    </div>
    <div class="float-right">
        @*@Html.EditorFor(model => model.Ext, EditorTemplate.TextBox)*@
        <div class="editor-label">
            @Html.LabelFor(model => model.Ext)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Ext)
            @Html.ValidationMessageFor(model => model.Ext)
        </div>
    </div>
</div> 
```

一切似乎都正常。但是，如果我尝试切换到更短的语法并将此 EditorFor 用于文本框：

```
<div class="editor-label">
    @Html.Label((ViewData.ModelMetadata.DisplayName??ViewData.ModelMetadata.PropertyName),
        new Dictionary<string, object>
            {
                { "for", ViewData.ModelMetadata.PropertyName }
            })
</div>
<div class="editor-field">
    @Html.TextBox("", (object)Model,
        new Dictionary<string, object>
            {
                { "id", ViewData.ModelMetadata.PropertyName },
                { "name", ViewData.ModelMetadata.PropertyName },
                { "class", "text-box single-line"},
                { "data-bind", "value: " + ViewData.ModelMetadata.PropertyName },
            })
    @Html.ValidationMessage(ViewData.ModelMetadata.PropertyName,
        new Dictionary<string, object>
            {
                { "data-valmsg-for", ViewData.ModelMetadata.PropertyName }
            })
</div> 
```

验证消息不再显示。

希望这个答案会对某人有所帮助，或者您可能会在这里看到我缺少的东西。

# php - 在 PHP 中选择用户选择的复选框（动态创建）

> ID：13016675
> 
> 赞同：0
> 
> 时间：2012-10-22T17:33:53.957
> 
> 标签：php

嗨，我有一个动态创建的复选框，如下所示；（这里不是完整的代码）创建了许多复选框，因此名称是一个数组。（我在里面启动数组的方式是否正确`<td></td>`？）

```
while ($rec = mysqli_fetch_array($result))
{
echo "<tr>";    
echo "<td class='tbldecor1'><input type='checkbox' name='delete[]' value='$Val1'></td>";
echo "</tr>";    
} 
```

我需要让用户选择的复选框值循环以删除选择的记录。如果我忘记了它的删除部分，为了让用户选择的值进入一个循环，我使用了类似下面的东西；

```
$AA = $_POST['delete'];
while($AA == 'checked')
{
echo $AA; // trying to print the user checked options so that I can subsequently code  to delete them.
} 
```

但似乎是一种错误的做法！有人可以给我一个想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:38:44.600

```
foreach($_POST['delete'] AS $key => $val) {
   ...
} 
```

未在表单中选中的复选框不会提交，因此您只会自动获得 _POST 数据中选中的复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:36:41.307

它是输入字段数组，它为您提供了 $_POST 中的所有检查值到数组中，因此请使用以下方式

```
if(isset($_POST['delete'])) {
  foreach($_POST['delete'] as $value){
    echo $value;
    //do stuff
  }
} 
```

# java - Java，听众建议，摇摆舞曲

> ID：13016684
> 
> 赞同：1
> 
> 时间：2012-10-22T17:34:30.267
> 
> 标签：java, swing, compiler-errors, jframe, jpanel

感谢您为我看这个，这是我的问题：

MyFrame 类中的 If 语句说“MyShape 是抽象的，无法实例化”我也不知道如何完成我的 actionlistener，以便它创建我从 jmenu 中选择的形状的实例。最后将我的 Jslider 的尺寸设置为我的 sqaure 的大小和面积，并将其添加到 JtextField。

1.  如何修复错误“MyShape 是抽象的，无法实例化”？
2.  关于如何完成我的 if 语句的任何提示，以便我选择的形状链接到我的 Jslider，以便将它的值添加到该形状，即方形或圆形类？
3.  然后我如何将 2 种方法用于查找该类的长度和面积，即正方形或圆形到 2 个 Jtext 字段？

我很乐意为您提供任何帮助，如果您能解释一下我需要做的事情，那么对于像我这样的编程新手来说，这是一种简单的方法可以理解:)

* * *

我的框架

* * *

```
 package assignment;

    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.JMenu;
    import javax.swing.JMenuBar;
    import javax.swing.JMenuItem;

    public class MyFrame extends javax.swing.JFrame {

    public MyFrame() {

    // Create the menu
    JMenuBar topMenu = new JMenuBar();
    this.setJMenuBar(topMenu);

    //create the menu button "shapes"
    JMenu shapes = new JMenu("Shapes");
    topMenu.add(shapes);
    //Create the 3 shapes for the menu
    JMenuItem square = new JMenuItem("Square");

    JMenuItem circle = new JMenuItem("Circle");
    JMenuItem triangle = new JMenuItem("Triangle");

    //add shapes to menu
    shapes.add(circle);
    shapes.add(triangle);
    shapes.add(square);

    //add the menu
    setJMenuBar(topMenu);

    MyControlPanel pane = new MyControlPanel();
    this.add(pane);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );

    pack();
    }// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(MyFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new MyFrame().setVisible(true);
        }
    });

    class squareAction implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            JMenuItem clickedMenu = (JMenuItem) e.getSource();
            if (clickedMenu.getText().equals("Square")) {
                MyShape ASquare = new MyShape() {
                };
            } else if (clickedMenu.getText().equals("Circle")) {
                MyShape Circle = new MyShape();
            } else if (clickedMenu.getText().equals("Triangle")) {
                MyShape Triangle = new MyShape();
            }
        }
    }
    }
    } 
```

* * *

## Jpanel - 我的控制面板

```
 package assignment;

    //import java.awt.FlowLayout;
    import java.awt.BorderLayout;
    import java.awt.FlowLayout;
    import javax.swing.GroupLayout;
    import javax.swing.GroupLayout.Alignment;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JSlider;
    import javax.swing.JTextField;
    import javax.swing.event.ChangeEvent;
    import javax.swing.event.ChangeListener;

    public class MyControlPanel extends javax.swing.JPanel {

JSlider slider;
JLabel sliderLabel;
JLabel sliderdimension;
JLabel blank;
JLabel dl;
JLabel area1;

/**
 * Creates new form MyControlPanel
 */
public MyControlPanel() {

    slider = new JSlider();
    slider.setValue(50);
    slider.addChangeListener(new MyChangeAction());
    slider.setMajorTickSpacing(10);
    slider.setPaintLabels(true);
    slider.setPaintTicks(true);
    slider.setBounds(300, 50, 100, 50);

    sliderLabel = new JLabel("50");
    blank = new JLabel("     ");
    sliderdimension = new JLabel("Shape Dimension:");

    JTextField boundary_length = new JTextField("Boundary Length");
    JTextField area = new JTextField("Area");

    dl = new JLabel("Boundary Length =");
    area1 = new JLabel("Area =");

    setLayout(new BorderLayout());

    JPanel sliderPanel = new JPanel();
    sliderPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 0));

    sliderPanel.add(sliderdimension);
    sliderPanel.add(sliderLabel);
    sliderPanel.add(slider);
    sliderPanel.add(dl);
    sliderPanel.add(boundary_length);
    sliderPanel.add(area1);
    sliderPanel.add(area);
    this.add(sliderPanel, BorderLayout.PAGE_END);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>                        
// Variables declaration - do not modify                     
// End of variables declaration                   

public class MyChangeAction implements ChangeListener {

    //complete code here
    public void stateChanged(ChangeEvent ce) {
        int value = slider.getValue();
        String str = Integer.toString(value);
        sliderLabel.setText(str);

    }
    } // end class
    } 
```

* * *

我的形状

* * *

```
 package assignment;

    public abstract class MyShape
 {

double thelength;
double thearea;

public abstract double computeBoundaryLength(double Length);

public abstract double computeArea (double Length);
 } 
```

* * *

一个正方形

* * *

```
 package assignment;

    public class ASquare extends MyShape {

@Override
public double computeBoundaryLength(double Length) 
{
    thelength=(4*Length);
    return thelength;
}

@Override
public double computeArea(double Length) 
{
    thearea=(Length*Length);
    return thearea;
}

} 
```

* * *

类 shapeAction 实现 ActionListener{ public void actionPerformed(ActionEvent e){

```
 JMenuItem clickedMenu = (JMenuItem)e.getSource();
            if (clickedMenu.getText().equals("Square")){
                 //implement abstract methods
            MyShape ASquare = new ASquare();  
            ASquare.addActionListener(new shapeAction());
            }
            else if (clickedMenu.getText().equals("Circle")){ 
                 //implement abstract methods
                MyShape ACircle = new ACircle();
            ACircle.addActionListener(new shapeAction());
            }
            else if (clickedMenu.getText().equals("Triangle")){ 
                 //implement abstract methods
                MyShape ATriangle = new ATriangle();
            ATriangle.addActionListener(new shapeAction()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:24:18.073

*   你`squareAction`的本意是听所有可能的菜单选择（每种形状一个），所以它应该被命名`ShapeMenuAction`或类似的东西。如果您希望在选择菜单选项时执行`ShapeMenuAction`'s `actionPerformed`，您必须创建它的一个实例并将其添加到每个实例中，并在其上`MenuItem`使用`addActionListener`方法。否则，什么都不会发生。

在 MyFrame 中：

```
JMenuItem square = new JMenuItem("Square");
square.addActionListener(new ShapeAction());
JMenuItem circle = new JMenuItem("Circle");
circle.addActionListener(new ShapeAction());
JMenuItem triangle = new JMenuItem("Triangle");
triangle.addActionListener(new ShapeAction()); 
```

*   在您的内部，您`actionPerformed`必须实例化`MyShape`. 现在你除了实例化一个形状什么都不做，你必须在方法结束之前对对象做一些事情，对吧？在你的方法中创建一个`setShape`方法`MyControlPanel`并从 actionPerformed 中调用它，将新创建的形状传递给它。

在 ShapeAction 中：

```
 public void actionPerformed(ActionEvent e) {
       JMenuItem clickedMenu = (JMenuItem) e.getSource();
       if (clickedMenu.getText().equals("Square")) {
           MyShape aSquare = new ASquare();
           myControlPanel.setShape(aSquare);
       } else if (clickedMenu.getText().equals("Circle")) {
           MyShape aCircle = new ACircle();
           myControlPanel.setShape(aCircle);             
       } else if (clickedMenu.getText().equals("Triangle")) {                 
           MyShape aTriangle = new MyShape();  
           myControlPanel.setShape(aTriangle);           
       }         
    } 
```

您必须在 MyFrame 中创建一个名为 myControlPanel 的 MyControPanel：

```
private MyControlPanel myControlPanel 
```

并添加它

```
myControlPanel = new MyControlPanel();
getContentPane().add(myControlPanel); 
```

前

```
pack(); 
```

*   现在`MyControlPanel`，您可以根据滑块值和所选形状更新标签，每次其中一个更改时。

    私人 MyShape 形状；公共无效设置形状（MyShape 形状）{ this.shape = 形状；更新标签（）；}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:40:59.637

你可能想写：

```
 MyShape circle = new ASquare();
   MyShape triangle = new ASquare(); 
```

代替：

```
 MyShape circle = new MyShape(); 
```

        MyShape 三角形 = new MyShape();

如果您尝试为 and 实现新的内联类`circle`，`triangle`您可能需要编写：

```
 MyShape circle = new MyShape (){
      //implement abstract methods
   }

   MyShape triangle = new MyShape (){
      //implement abstract methods
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T17:41:35.757

编译器不会说谎——你需要使用具体的类。抽象类类型本身不能被实例化，所以你可以使用这个：

```
MyShape aSquare = new ASquare(); 
```

但不是这个：

```
MyShape aSquare = new MyShape (); 
```

同样，如果您有可用的混凝土圆形和三角形：

```
MyShape circle = new MyCircle();
...
MyShape triangle = new MyTriangle(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T17:42:49.913

该消息表明您无法实例化它`MyShape`：`abstract`

它被定义为抽象的：

```
public abstract class MyShape { 
```

这意味着你不能做

```
new MyShape(); //compilation error 
```

永远记住，你不能在 Java 中实例化抽象类和接口。

您可以实例化既不是抽象也不是接口的具体类。

# xml - 使用 xmldocument 获取 xml 属性名称

> ID：13016686
> 
> 赞同：1
> 
> 时间：2012-10-22T17:34:39.390
> 
> 标签：xml, xmldocument, xml-attribute

我正在使用 C#，框架 3.5。我正在使用 xmldocument 读取 xml 值。我可以获取属性的值，但无法获取属性名称。示例：我的 xml 看起来像

```
<customer>
 <customerlist name = AAA Age = 23 />
 <customerlist name = BBB Age = 24 />
</customer> 
```

我可以使用以下代码读取值：

```
foreach(xmlnode node in xmlnodelist)
{
  customerName = node.attributes.getnameditem("name").value;
  customerAge = node.attributes.getnameditem("Age").value;
} 
```

如何获取属性名称 (name,Age) 而不是它们的值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:38:41.570

[XmlNode](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.aspx)有一个Attributes[集合](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.attributes.aspx)。此集合中的项目是[XmlAttributes](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.aspx)。XmlAttributes 具有[Name](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.name.aspx)和[Value](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.value.aspx)属性[等](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute_properties.aspx)。

下面是一个循环遍历给定节点的属性的示例，并输出每个属性的名称和值。

```
XmlNode node = GetNode();

foreach(XmlAttribute attribute in node.Attributes)
{
    Console.WriteLine(
        "Name: {0}, Value: {1}.",
        attribute.Name,
        attribute.Value);
} 
```

请注意，来自[XmlNode.Attributes](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.attributes.aspx)的文档：

> 如果节点是 XmlNodeType.Element 类型，则返回节点的属性。否则，此属性返回 null。

**更新**

如果您知道恰好有两个属性，并且同时想要它们的两个名称，则可以执行以下操作：

```
string attributeOne = node.Attributes[0].Name;
string attributeTwo = node.Attributes[1].Name; 
```

请参阅[http://msdn.microsoft.com/en-us/library/0ftsfa87.aspx](http://msdn.microsoft.com/en-us/library/0ftsfa87.aspx)

# github - 如何更改我的 github 存储库的远程源？

> ID：13016696
> 
> 赞同：1
> 
> 时间：2012-10-22T17:35:26.320
> 
> 标签：github, fork

我分叉了一个 repo 并在我的本地机器上设置了所有内容。但是，当我执行“git remote -v”时，它会将原始存储库显示为我的获取和推送源。我希望它来自我的分叉回购。如何在不重新开始的情况下将其更改为那个？然后，如何在原始仓库中添加上游？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:42:10.467

从[git 远程手册页](http://www.kernel.org/pub/software/scm/git/docs/git-remote.html)：

```
 git remote set-url origin https://github.com/user/forkname
 git remote add upstream https://github.com/maintainer/reponame 
```

另请参阅 GitHub 的示例[：更改远程 URL](https://help.github.com/articles/changing-a-remote-s-url)。

```
set-url 
```

> 将 URL 远程点更改为。

然后，您将能够从上游获取，并推送到原点：
请参阅“ Github[和](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)[Github](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)[之间的区别`origin``upstream`](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”。

# c++ - 指针的 C++ 帮助，尤其是“->”运算符

> ID：13016702
> 
> 赞同：1
> 
> 时间：2012-10-22T17:36:05.253
> 
> 标签：c++, pointers

大家好，我对“->”运算符有疑问。这是我的代码：并`OfferingPair * weeklySchedule ;`在`Schedule`类中清除，而 OfferingPair 在头文件中清除。

```
struct     OfferingPair
{
  Offering     * off     ;
  OfferingPair * nextOff ;

}

Schedule::Schedule ()
{
    this->weeklySchedule=new OfferingPair[5];

    for(int i=0;i<5;i++)
    {
        weeklySchedule[i]->off=NULL;
        weeklySchedule[i]->nextOff=NULL;
    }   
} 
```

并且因为：

```
weeklySchedule[i]->off=NULL;
weeklySchedule[i]->nextOff=NULL; 
```

我收到一条错误消息：

```
base operand of ‘->’ has non-pointer type ‘OfferingPair’ 
```

但是weeklySchedule[i] 是一个指针，为什么我不能使用“->”？提前谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T17:37:08.220

`weeklySchedule[i]`返回对象本身，而不是指针，所以你必须使用`.`

```
weeklySchedule[i].off=NULL;
weeklySchedule[i].nextOff=NULL; 
```

我建议您将代码修改为：

```
std::vector<OfferingPair> weeklySchedule 
```

尽管。这是 RAIIght (c) 要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:23:58.257

The array index operator is basically defined as follows:

`a[b]` = `*(a + (b))`

The `->` operator is basically defined as follows:

`a->b` = `(*a).b`

So when you write:

```
weeklySchedule[i]->off=NULL; 
```

You are writing this:

```
(*(*(weeklySchedule + i))).off=NULL; 
```

Notice how you are dereferencing the pointer twice. Clearly this is incorrect!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:55:35.290

Others already pointed out the problem of `->` vs. dot (`.`) syntax.

But I'd like to elaborate a bit on other sides.

Since you are initializing your `OfferingPair::off` and `nextOff` data members to `NULL`, maybe this work should be done inside `OfferingPair` *default constructor*:

```
struct OfferingPair
{
  ....

  OfferingPair()
    : off(NULL)
    , nextOff(NULL)
  {
  }
}; 
```

And you can just use a `std::vector` instead of a raw C-like array to store instances of the above structure. Add a data member to your `Schedule` class like this:

```
 std::vector<OfferingPair> m_weeklySchedule; 
```

And then in the default constructor create a `std::vector` of 5 items:

```
Schedule::Schedule()
  : m_weeklySchedule(5)
{
} 
```

Note how your code is *simplified*.

Note also that you don't need an explicit `delete[]` in your destructor to release the array dynamically allocated memory: `std::vector`'s destructor will be *automatically* called and will take care of that.

Moreover, the compiler generated copy constructor and copy `operator=` will do the right thing with *member-wise copy* (calling the corresponding `std::vector` copy operations), instead with a raw C-like array you have to write proper code for copy constructor and `operator=` (or ban them, declaring them `private`).

**EDIT:** You seem to have edited your original post adding new code, in particular some sketch of the `OfferingPair` data structure:

```
struct OfferingPair
{
  Offering     * off;
  OfferingPair * nextOff;
}; 
```

The fact that you have a *pointer to the next* `OfferingPair` inside `OfferingPair` makes me think that maybe you just need a linked list of `Offering`'s? Unless this is a learning exercise for linked lists, maybe you just need a `std::list<Offering>`, or a C++11 `std::forward_list<Offering>`?

# c# - 在 C# 中将用于 Windows 手机上下文菜单的 Silverlight 工具包添加到列表框项

> ID：13016703
> 
> 赞同：1
> 
> 时间：2012-10-22T17:36:07.297
> 
> 标签：c#, windows-phone-7, silverlight-toolkit

我有一组 ListBoxItems，当我的应用程序使用 C# 加载时，我将它们动态添加到 StackPanel，并且我试图使用适用于 Windows Phone 的 Silverlight 工具包提供这些上下文菜单中的每一个，我想知道我该怎么做？

我无论如何都找不到访问 C# 中的工具包，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:10:39.017

[有](http://windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API)你想要的。

你可以在那个网站上下载最新版本的takeit。

# php - php动态生成带参数的文件

> ID：13016710
> 
> 赞同：-2
> 
> 时间：2012-10-22T17:36:29.513
> 
> 标签：php

我是网络编程新手，刚开始使用 php。我想知道是否有一种方法可以通过传递参数来动态生成文件（如 html）。就像通过调用一些函数

```
some_function($my_arr) 
```

和

```
$my_arr={$obj1, $obj2, $obj3} 
```

而 obj 只是一个包含一些类成员的类。是否可以动态生成 3 个文件（例如 html），将三个对象的信息分别打印为某种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:42:18.810

如果此文件仅生成一次并且您不检查该文件是否已在之前生成，则此脚本对您很有用。

```
//let generate_files be our function with $array which is an array as the parameter
// this script generates txt files with names as array element values

function generate_files ( $array )
    {
       foreach ( $array as $value )
          { 
            $handle = fopen($value.'txt', 'w') or die('Cannot open file:  '.$value);
            $data = 'This is the data inside each file';
            fwrite($handle, $data);
          }  
    } 
```

如果这些文件是临时生成的，那么您可以在操作后使用 unlink($my_file); 删除所有这些文件。功能。

# forms - Oracle 按钮问题

> ID：13016711
> 
> 赞同：2
> 
> 时间：2012-10-22T17:36:30.247
> 
> 标签：forms, oracle, oracle10g

从事甲骨文项目。我是 Oracle 表单的新手。我目前正在使用 10g 表格。我成功地从数据块向导开发了我的第一个表单。它最初包含 10 行。之后我尝试制作一个按钮，但出现了 10 个按钮。它们都具有相同的名称并表现得像一个单元，但它们看起来像 10 个按钮。

[http://postimage.org/image/breymi2pn/](http://postimage.org/image/breymi2pn/)

以下是我在表单画布上获得的按钮图像：

![在此处输入图像描述](../Images/1363df82851bc33b31ba4154d3f8b8ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:20:41.897

多个按钮的原因是您已将按钮添加到多记录块。您可以通过将按钮移动到单个记录控制块来解决此问题。如果您需要在多记录块中有按钮但只想显示一个按钮，那么您需要将按钮项目的“显示的项目数”项目级别属性设置为 1。

![项目属性 显示的项目数](../Images/8c8c186b8dc072ecca0a12cb2bc29cca.png)

# android - onConfigurationChanged 没有在旋转时被调用

> ID：13016716
> 
> 赞同：0
> 
> 时间：2012-10-22T17:36:50.323
> 
> 标签：android, onconfigurationchanged

我的问题是 onConfigurationChanged 没有被调用。

代码如下：

```
 public void onConfigurationChanged(Configuration newConfig) {
    Log.i("onconfig", "#### CALLED!"); 
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
        LinearLayout listContainer = (LinearLayout)findViewById(R.id.list_container);

        if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE){
            listContainer.setOrientation(LinearLayout.HORIZONTAL);
        }
        else{
            listContainer.setOrientation(LinearLayout.VERTICAL);
        }
//      end if else
        }
// end of on configuration changed 
```

在清单中我有：

```
<activity
        android:name=".FirstListActivity"
        android:label="@string/title_activity_fruits_list"
            android:configChanges="orientation">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

感谢任何能提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:42:20.950

在属性标签中添加`screenSize`值。`android:configChanges`有关更多信息，请阅读[此答案](https://stackoverflow.com/questions/11630530/how-to-handle-screen-orientation-changes-when-there-is-an-asyntask-running-with/11631017#11631017)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T14:51:56.100

看到这个答案：[https ://stackoverflow.com/a/6109206/1182515](https://stackoverflow.com/a/6109206/1182515)

您是否在 onCreate 中使用此方法？

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

使用它时，您将不会收到方向更改。

尝试链接帖子中给出的解决方案。

# javascript - 为什么左侧边栏高度没有变化？

> ID：13016718
> 
> 赞同：1
> 
> 时间：2012-10-22T17:37:00.510
> 
> 标签：javascript, jquery, css, wordpress

我需要根据内容的高度设置左侧边栏的高度。这是我得到的错误

> sidebarheight.js:1 Uncaught TypeError: Object # has no method 'ready'

我已经加载了 jquery，以及非常基本的几行 js：

```
$(document).ready(function() {
    $("#left").css({'height':($("#right").height()+'px')});
}); 
```

基本的html结构

```
<div id="left">sidebar content</div>
<div id="right">page content</div> 
```

在此处查看工作副本：http: [//keganquimby.com/122sk](http://keganquimby.com/122sk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:42:09.663

如果您使用 jQuery 而不是 $ 尝试此代码，它可以工作：

```
jQuery("#left").css({'height':jQuery("#right").height()+'px'}); 
```

好吧，至少在您提供的 URL 处，如果您执行此代码侧边栏高度，如果它们不相等，它们似乎会发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:43:34.130

您的网站上有原型，并且它也在使用`$`.

尝试：

```
jQuery(document).ready(function($) { // This way you have no conflict with the $. In here $ refers to jQuery. All other places $ refers to document.getElementById (From prototype)
    $("#left").css({'height':($("#right").height()+'px')});
}); 
```

* * *

所以实际上发生的事情是：

```
$(document) -> document.getElementById(document)* -> null
->
null.ready -> "sidebarheight.js:1 Uncaught TypeError: Object # has no method 'ready'" 
```

> * Think $(...) 返回一个原型 GLOBAL.Element 集合

`null`是对象吗？

> 是的

```
alert(typeof null); // object 
```

* * *

和.....

`jQuery(document).ready(...`可以短路`jQuery(...`：

```
jQuery(function($) { // This way you have no conflict with the $. In here $ refers to jQuery all other places et's refers to document.getElementById (From prototype)
    $("#left").css({'height':($("#right").height()+'px')});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T17:50:23.210

您的脚本引用有问题，请检查一下，因为在浏览器的控制台中我无法调用函数的 jquery 方法，请在控制台中尝试此操作并会出现错误：

```
var div = $('<div></div>')
undefined
div.fadeIn()
TypeError: Cannot call method 'fadeIn' of null 
```

没有`$`引用 jQuery ether，因为它不包含在页面中或与另一个自由冲突。

# ruby-on-rails - 创建新的 Rails 应用程序 - 依赖项 API 关闭？

> ID：13016725
> 
> 赞同：2
> 
> 时间：2012-10-22T17:37:56.343
> 
> 标签：ruby-on-rails, api, rubygems, dependencies

我正在尝试创建新的 Rails 应用程序：

```
rails new NewRailsApp 
```

并不断收到错误：

```
 create
  create  README.rdoc
  create  Rakefile
  ...
  create  vendor/plugins/.gitkeep
     run  bundle install
Fetching gem metadata from https://rubygems.org/.
Error Bundler::HTTPError during request to dependency API
Fetching full source index from https://rubygems.org/
Could not reach https://rubygems.org/ 
```

是我这边的错误还是由 Rubygems Dependecy API 关闭引起的？[（据此](http://status.rubygems.org/)已经停机四天了）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T18:01:37.730

暂时使用

```
source "http://bundler-api.herokuapp.com" 
```

在你的`Gemfile`.

来源：[http ://hone.herokuapp.com/bundler%20heroku/2012/10/22/rubygems-and-the-dependency-api.html](http://hone.herokuapp.com/bundler%20heroku/2012/10/22/rubygems-and-the-dependency-api.html)

# twitter-bootstrap - Codekit & Bootstrap：variables.less 不会实时重新加载

> ID：13016726
> 
> 赞同：0
> 
> 时间：2012-10-22T17:38:06.830
> 
> 标签：twitter-bootstrap, livereload

我正在尝试使用引导较少文件和实时重新加载功能的 Codekit :)

我直接编辑文件夹“less”中的less文件，这些文件将在“bootstrap.less”中导入bootstrap.less，然后将编译为在index.html中链接的“css/bootstrap.css”。

一切运行良好，所以当我在像 navbar.less 这样的 less 文件中编辑一些代码并保存它时，浏览器会按预期重新加载，但由于某种原因，如果我更改“variables.less”文件中的变量值并保存它，浏览器不会实时重新加载。我必须手动重新加载。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:04:35.470

`//`如果没有策略性地放置评论，我遇到了一些自动重新加载无法正常工作的问题。

看看您是否可以将任何注释移动到 bootstrap.less 中的新行，或者只删除所有注释。

可以肯定的是，我还会从 codeKit 中删除该项目并重新添加它。

由于我们正在讨论这个主题，您可能需要考虑使用[Kickstrap](http://getkickstrap.com)，它是 Bootstrap 的扩展框架，它允许您在单独的层中编写您的自定义。这样，您将永远不必编辑核心 Bootstrap 文件，并且可以持续保持 Bootstrap 最新，而不会影响您的修改。

# vb.net - vb.net 中的简单 rot13 编码器

> ID：13016727
> 
> 赞同：0
> 
> 时间：2012-10-22T17:38:09.623
> 
> 标签：vb.net

我正在寻找一种将输入文本编码为 Rot13 的简单方法。在能够将单词分离为单个字符和整数的阶段，我遇到了障碍，以便我可以更改每个字符并输出结果。我可以使用下面列出的简单 if 语句用单个字母来完成，但如果有人能帮助我用一种方法来处理整个单词，我将非常感激。

```
If kInput = "a" then kOutput = "n" 
```

谢谢，凯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:02:12.957

看起来你让这种方式变得比它必须的更难。无需分隔单词等，绝对不需要大的 If/Else 块：

```
Public Function Rot13(ByVal input As String) As String
    Dim result As Char() = input.ToCharArray()

    For i As Integer = 0 To result.Length - 1
        Dim temp As Integer = Asc(result(i))
        Select Case temp
           Case 65 to 77, 97 To 109 'A - M
               result(i) = Chr(temp + 13)
           Case 78 to 90, 110 To 122 'N - Z
               result(i) = Chr(temp - 13)
        End Select
    Next i

    Return New String(result)
End Function 
```

请注意，这是直接输入到浏览器窗口中的，并且完全未经测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:17:37.387

看起来人们对此给出了很好的答案，但这是我的尝试。

```
Dim input As String = "This is a Test!! Guvf vf n Grfg!!"
Dim result As StringBuilder = New StringBuilder()

For Each ch As Char In input

    If (Not Char.IsLetter(ch)) Then
        result.Append(ch)
        Continue For
    End If

    Dim checkIndex As Integer = Asc("a") - (Char.IsUpper(ch) * -32)
    Dim index As Integer = ((Asc(ch) - checkIndex) + 13) Mod 26

    result.Append(Chr(index + checkIndex))

Next

Console.WriteLine(result.ToString()) 
```

编辑：改进以消除对大写检查的需要。这将正确处理循环内只有 1 个 if 语句的大小写和特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:04:11.447

调用一次编码，再次调用解码。

```
Private Function ROT13_Encode(ByVal Input As String) As String
Dim chrs As Char() = Input.ToCharArray()
Dim ReturnString As String = ""
Dim CharInt As Integer

For Each Chr As Char In chrs
    CharInt = Asc(Chr)
    If CharInt >= 65 And CharInt <= 77 Then 'A-M
        CharInt += 13
    ElseIf CharInt >= 78 And CharInt <= 90 Then 'M-Z
        CharInt -= 13
    ElseIf CharInt >= 97 And CharInt <= 109 Then 'a-m
        CharInt += 13
    ElseIf CharInt >= 110 And CharInt <= 122 Then 'm-z
        CharInt -= 13
    End If
    ReturnString &= ChrW(CharInt)

Next

Return ReturnString
End Function 
```

# eclipse - 无法下载 Aptana studio 3 eclipse 插件 - 没有可用的存储库

> ID：13016731
> 
> 赞同：0
> 
> 时间：2012-10-22T17:38:31.510
> 
> 标签：eclipse, eclipse-plugin, aptana, aptana3

在过去的几天里，我在尝试为 Eclipse 安装 Aptana 3 插件时收到了同样的错误：

[“在http://download.aptana.com/studio3/plugin/install](http://download.aptana.com/studio3/plugin/install)找不到存储库。”

这个问题是否已知并且广泛传播？是否有下载和安装此插件的替代方法？

我正在尝试将它安装在 Eclipse JavaEE Indigo 上，并且我已经在另一台机器上成功完成了它，但那是几个月的时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:20:24.280

aptana 似乎已经建立了一个 CDN (http://en.wikipedia.org/wiki/Content_delivery_network) 来提供他们的更新站点，它似乎被破坏了......我没有看到任何解决方案 appart 修复了 CDN 配置.

您应该在 aptana 论坛中提问，以引起 aptana 操作的注意。

问候

# c# - 不同类型应用程序使用的实体框架类库中的上下文实例化

> ID：13016734
> 
> 赞同：0
> 
> 时间：2012-10-22T17:38:40.123
> 
> 标签：c#, data-access-layer, entity-framework-5

我正在使用最新的实体框架和代码优先的方法来创建一个数据访问程序集，然后可以由多个项目使用。stackoverflow 上的许多线程似乎建议在 MVC Web 应用程序中为每个请求创建一个上下文。但我也想使用 WinForms 或控制台应用程序中的相同程序集 - 如果要在这样的不同程序之间共享，应该使用哪种方法来处理上下文实例化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:26:25.490

正如 John Saunders 所说，每个逻辑操作一个上下文听起来不错，我想我只需要在不同类型的应用程序中以不同的方式使用它（例如将它放在网页的请求对象中，并可能为控制台应用程序传递一个实例）。

# assembly - 组装：堆栈与堆？

> ID：13016736
> 
> 赞同：0
> 
> 时间：2012-10-22T17:38:42.583
> 
> 标签：assembly, heap-memory, stack-memory

在x86汇编中，`esp`堆栈指针`ebp`是堆指针吗？为什么我们有两种数据结构而不是只有一种？

什么`esi`/`edi`代表什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T18:11:27.257

一般来说，机器架构上的寄存器不需要专门用于任何目的。实际上，通过指定一个寄存器来支持常用功能，该寄存器成为那个/那些功能的特殊用途。

在 x86 上，ESP 指针被 PUSH/CALL 指令和各种中断/陷阱用来存储可恢复状态，例如返回地址。这些在支持编程方面非常有吸引力，因此由编译器和操作系统供应商承诺，ESP 基本上不能用于任何其他目的。因为可以从任意索引中引用内存，所以它可以用于管理“堆栈”和当前函数堆栈帧。

但是，变量（当前堆栈帧的局部变量）相对于 ESP 的索引偏移量会随着程序将值压入和弹出堆栈以及 ESP 的变化而变化。编译器可以跟踪所有这些，因此可以使用正确的索引偏移量。但是如果你是手工编写汇编代码，你实际上不能可靠地做到这一点，而且拥有一个基于堆栈帧的指针会更容易；那么变量的索引偏移量可以是相对于堆栈帧指针的常量。英特尔很早就为此目的指定了 EBP，甚至还有特殊的索引模式来支持这一点，以及用于构建*显示*的特殊 EBP 相关指令（一组指向词汇封闭堆栈帧的指针，采用 Algol 风格）。

但是您/编译器不必为此目的使用 EBP。在具有少量寄存器（x86）的机器中，拥有另一个空闲寄存器可以帮助生成更小/更紧凑的代码。在较旧的 CPU 上，不使用 EBP 有不同的惩罚：局部变量的 ESP 索引偏移量往往大于堆栈帧基数的索引偏移量，因此使用 EBP 作为空闲寄存器可以通过更大的偏移量为您提供更大的程序用于 ESP。当获取指令很昂贵时，这曾经很重要。由于指令缓存与它们一样好，这几乎不再是问题。微软的 C 编译器（我怀疑是 GCC）有一个不使用帧指针的开关，从而放弃了一些程序大小以获得更快的代码。

堆变量只是那些不在堆栈帧中的变量。您可以使用任何寄存器来访问它们。

一些语言（例如，我们的 PARLANSE 编译器）只使用堆分配；甚至堆栈帧都是从堆中获取的（并且 ESP 设置为分配的空间块的顶部）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T17:50:03.687

通常，ESP 指向堆栈的顶部，而 EBP 指向堆栈帧的底部，因此它们都将指向堆栈上的地址，而不是堆上的地址。在大多数情况下，并不完全需要保留指向堆栈帧底部的指针，因此一些编译器可能会简单地将 EBP 用作另一个通用寄存器。

ESI 和 EDI 是通用寄存器，但有一个例外：字符串指令（例如 movs、lods）分别将它们视为源地址和目标地址。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T17:44:51.380

虽然有一些特定于寄存器和的事物和行为`xBP`，但它们并不绑定到任何一个函数。您可以在汇编代码中随意使用它们。`xSI``xDI`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T17:44:16.220

整个内存被组织成 4 个段。代码、数据、堆栈和其他。堆用于多用途存储（如动态分配（malloc 等）），而堆栈专门用于指令指针和在调用另一个过程时（如在递归期间）存储变量。数据段用于全局变量和静态变量。

对于 ESI/EDI 请参阅关于 SO 的此问题：[ESI 和 EDI 寄存器的目的？](https://stackoverflow.com/questions/1856320/purpose-of-esi-edi-registers)

编辑：也看到这个：[堆与数据段与堆栈分配](https://stackoverflow.com/questions/6204834/heap-vs-data-segment-vs-stack-allocation)

# actionscript-3 - 带有一些额外效果的 Flash AS3 打字机

> ID：13016742
> 
> 赞同：2
> 
> 时间：2012-10-22T17:39:15.360
> 
> 标签：actionscript-3, flash

我正在尝试重新创建在此页面上看到的效果：http: [//flupie.net/blog/2010/12/typewriter-effect-with-textanim-as3/](http://flupie.net/blog/2010/12/typewriter-effect-with-textanim-as3/)（示例＃2）但没有所有单独的文件。

我不只是使用该代码的原因是因为 A）它使用字符串中的文本，我希望能够将效果应用于文本字段。B）它使用单独的.as文件，我希望它都是1个文件（我想稍后在DeviantArt上上传这个，据我所知，你只能上传.swf）

那么是否可以重新创建矩阵式打字机效果，而无需使用单独的 .as 文件并将其应用于文本字段？我真的更像是一个设计师而不是一个程序员，所以这对我来说有点太多了。

编辑：为了更清楚地了解我打算实现的目标。我想为一个虚构角色制作一个角色表（想想：名字、外表、背景等），因为这个角色是未来​​的，我想给它一种未来的感觉。所以最终结果将包含几个单独的文本字段，可能还有一些图像。所有这些文本字段应该同时“运行”。也许我还会添加更多“页面”，但我假设这是通过向时间轴添加另一个帧和一个链接到它的按钮来完成的。

我目前正在尝试破译上面链接的代码，因为这正是我想要实现的目标，包括字体和发光效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:07:38.007

我写了一个类（只为你而写！- 但它很简单，我很无聊......）你可以用它来实现这个效果。显然，在某些时候查看此代码符合您的兴趣，但我将向您展示如何使用它 - 它非常简单 - 不知道它是如何工作的：

在 Flash 中，创建一个新的 ActionScript 文件，将以下代码复制到其中并将其保存为 TypeFX.as - 在与 .fla 项目文件相同的目录中：

```
package  {
    import flash.utils.Timer;
    import flash.text.TextField;
    import flash.events.TimerEvent;

public class TypeFX {

    private var timer:Timer;
    private var text:String;
    private var pos:int = 0;
    private var field:TextField;

    public function TypeFX(field:TextField, speed:int = 200, text:String = null) {
        // constructor code

        this.field = field;

        if(text != null)
        {
            this.text = text;
        }
        else
        {
            this.text = field.text;
        }

        field.text = '';

        timer = new Timer(speed, this.text.length);
        timer.addEventListener(TimerEvent.TIMER,update);
        timer.addEventListener(TimerEvent.TIMER_COMPLETE,kill);
        timer.start();
    }

    private function update(e:TimerEvent):void
    {
        pos++;
        field.text = text.substr(0,pos);
    }

    private function kill(e:TimerEvent):void
    {
        timer.removeEventListener(TimerEvent.TIMER,update);
        timer.removeEventListener(TimerEvent.TIMER_COMPLETE,kill);
        timer.stop();
        timer = null;
        text = null;
        field = null;
    }

    }

} 
```

同样，您无需了解即可使用它，但分解后它非常简单，您可能会喜欢看看它是如何工作的。

现在，获取一个要应用打字机效果的 TextField - 确保将其设置为“动态文本”并为其指定实例名称。例如，让我们称之为`myField`- 现在，打开“操作”面板。您可以通过以下几种方式应用此效果：

如果您想使用已在字段中的文本创建打字机效果（它将清除它，然后将其输入），请将以下代码添加到操作面板：

```
new TypeFX(myField); 
```

这将输入字段中存在的文本，字母之间的间隔为 200 毫秒 - 如果要更改此间隔，请添加第二个参数：

```
new TypeFX(myField,500); 
```

这会将延迟增加到 500 毫秒

你也可以发送一个字符串来输入，而不是使用已经在字段中的文本（这是推荐的，以后会更容易阅读，相信我！）：

```
new TypeFX(myField, 500, "The text to type into the field"); 
```

请注意，如果您使用此方法（传递字符串），则需要指定时间（例如上面的 500），如果您只使用字段文本，则不能将其留空。

希望这会有所帮助，如果您遇到困难，请告诉我！

# mysql - 数据截断错误

> ID：13016745
> 
> 赞同：1
> 
> 时间：2012-10-22T17:39:26.610
> 
> 标签：mysql

对于以下 SQL，我收到错误：

> 写入列 0Data 时发生数据截断，长度为 0 字节，传输了 0 字节。

代码：

```
CREATE TABLE faculty_members
(
fid        INTEGER AUTO_INCREMENT PRIMARY KEY,   
first_name VARCHAR(30) NOT NULL,
last_name  VARCHAR(30) NOT NULL,
rank       VARCHAR(25) NOT NULL,        
office     CHAR(8),                        
phone      CHAR(12),            
dob        DATE NOT NULL,
salary     DECIMAL(8,2),
CONSTRAINT faculty_members_pk PRIMARY KEY(fid),         
CONSTRAINT faculty_members_ck UNIQUE(first_name,last_name,dob),    
CONSTRAINT valid_salary CHECK(salary > 0) 
```

);

这些是 INSERT 语句

```
INSERT INTO faculty_members(first_name,last_name,rank,office,phone,dob,salary) VALUES
('Charles', 'Xavier', 'Professor', 'HSC 641', '563-555-6020', '11/09/1942', 125000),
('Bruce', 'Banner', 'Associate Professor', 'FO1 120', '563-555-8212', '06/20/1969', 87000),
('Hank', 'McCoy', 'Professor', 'FO1 120', '563-555-8212', '06/20/1972', 95000),
('Jeane', 'Grey', 'Assistant Professor', 'ECS 547', '563-555-8239', '03/19/1975', 95000),
('Erik', 'Lehnsherr', 'Professor', 'HSC 641', '563-555-6020', '11/09/1940', 115000),
('Diana', 'Prince', 'Associate Professor', 'HSC 400', '563-555-8212', '07/28/1967', 105100),
('Logan', 'Wolverine', 'Assistant Professor', 'ECS 540', '563-555-8100', '02/27/1964', 82000),
('Ororo', 'Storm', 'Assistant Professor', 'ECS 540', '563-555-8101', '05/01/1973', 82500); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:40:22.977

你的`dob`价值观不正确。MySQL 的日期格式是`yyyy-mm-dd`. 最喜欢你得到默认`0000-00-00`存储和数据截断错误。

# crystal-reports - Crystal Report--> 运行外部参数列表的子报表

> ID：13016755
> 
> 赞同：1
> 
> 时间：2012-10-22T17:40:26.780
> 
> 标签：crystal-reports

我有一个子报告，提供由给定人产生的销售额：

```
Person XXX

Item Name    Items Sold
A4 .............. 10
A6 ............... 8
A7 ............... 6 
```

我想修改此报告以生成单页报告，以便通过主报告传递销售人员列表。

我的问题是如何设置这样的报告。我不确定在为主报告指定参数时要使用哪些选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:24:33.180

将所需的变量传递到子报告中（站点/位置、员工编号、开始日期、结束日期等）。设置子报告如下：

```
<Report Header a> Person XXX 
<Report Header b> Item Name    Items Sold
<Group Header #1> (suppress)
<Group Footer #1> A4 ............. 10
<Group Footer #1> A6 .............  8
<Group Footer #1> A7 ............. 16
<Report Footer>   (suppress) 
```

该组将是 Item Name Items sold 是一个运行总计字段

```
Field to Summarize: Item Name
Type of summary: count (not distinct count)
Evaluate: for each record
Reset: On change of group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:00:07.240

您必须使用未链接的子报表。请在下面找到详细信息

[http://resources.businessobjects.com/support/communitycs/TechnicalPapers/scr_subreports.pdf](http://resources.businessobjects.com/support/communitycs/TechnicalPapers/scr_subreports.pdf)

# android - 如果返回 SQL DB，则捕获 NULL 和 ''

> ID：13016756
> 
> 赞同：0
> 
> 时间：2012-10-22T17:40:26.780
> 
> 标签：android, sql, null

为了从我的数据库中捕获一个空字段，我使用以下代码：

```
int score;
            if (c.isNull(11)) {
                score = 100;
            } else {
                score = c.getInt(11);
            }
            q.setScore(score); 
```

但是，现在看来，当我过去不小心突出显示 SQL Lite 浏览器中的一个单元格并将其导出（甚至留空）时，它不再显示为`NULL`，而是显示为`''` . 我试过`c.getInt(11) = ''`了，但又一次，这不起作用......

关于我如何赶上的任何想法`''`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:47:04.970

如果您正在使用`getInt()`，`null`并且“空”SQL 值`0`在 Java 中变为（因为`null`不是有效的整数值），请使用：

```
if(c.getInt(11) == 0) 
```

如果这会产生逻辑问题，因为`0`在您的上下文中可能意味着其他内容，您可以在表上运行 UPDATE 命令以将每个`''`值更改`-1`为该特定列中的每个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:46:38.927

返回的列`''`将导致`c.getInt`返回 0。

# javascript - 在 CSS 中为 div 指定百分比（即宽度：25%）是否有用

> ID：13016759
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:40:32.257
> 
> 标签：javascript, jquery, html, css

我注意到关于 div 的位置和尺寸的问题被问了很多，请注意：

1.  [并排 div](https://stackoverflow.com/questions/4285483/side-by-side-divs)
2.  [div在容器中并排](https://stackoverflow.com/questions/10656698/divs-side-by-side-in-container)
3.  [2个div并排](http://welovecss.com/showthread.php?t=465)

但我发现很多——当然不是全部——对 div 的尺寸进行硬编码。我主要使用百分比，因为我更喜欢让我的 div 处于相对位置。我首先在我的`css`文件中指定宽度/高度百分比，如下所示

```
div #menu {
   width: 75%;
   min-width: 75%;
} 
```

但后来不得不像这样用jQuery强制最小宽度：

```
function onload ()
{
   $( "#menu" ).css( "min-width", 0.75 * window.width() ) );
} 
```

我觉得到处都在声明 CSS 代码有点白痴，所以我的问题是：我是否应该费心在 CSS 样式表中指定 width/min-width 属性，还是有更好的方法来处理这些情况。

这是一个[jsfiddle 示例](http://jsfiddle.net/pukster/tDBSf/1/)，它说明了我遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:13:59.790

一些问题：

1.  您的 CSS 隐含地依赖`<body>`来拉伸到窗口的大小。事情不是这样运作的。你需要一个明确的规则：

    ```
    body, html { width: 100%; height: 100%; padding: 0; } 
    ```

2.  你的选择器是错误的。“div #A”中的空格应该被删除；事实上，“div”也应该如此。当通过“id”选择时，您只需要“id”，除非您正在为动态小部件进行某种限定（例如“body.touch #foo”以仅在触摸屏设备上应用样式）。
3.  在 jsfiddle 中，您不提供整个 HTML 标记。该工具会为您做到这一点。您在 HTML 面板中放入的只是`<body>`内容。

[这](http://jsfiddle.net/Pointy/tDBSf/2/)是您的代码的固定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:15:58.027

感谢Pointy的建议，我找到了问题所在。我在`div #A {...}`应该使用的时候使用`#A {...}`。之后，我还用这条线将身体拉伸到 100%：

```
body {
   margin: 0px;
   height: 100%;
   min-height: 100%;
   min-width: 100%;
} 
```

然后它按预期工作。在这里[看到jsfiddle](http://jsfiddle.net/pukster/tDBSf/3/)

# ios - iOS6 背景音频重叠

> ID：13016760
> 
> 赞同：2
> 
> 时间：2012-10-22T17:40:36.053
> 
> 标签：ios, cordova, ios6, html5-audio, avaudiosession

我有一个使用 Pphonegap 1.8.1 和 Sencha Touch 2 制作的 iOS 应用程序，它可以播放`HTML5`音频。我在 info.plist 中设置了 UIBackgroundModes -> audio 并按照这个[答案](https://stackoverflow.com/a/12414719/1765995)在 iOS6 上允许背景音频。

我的问题是，每当我在后台播放音频时，它都会持续存在并与之前播放的曲目重叠。重现：

1.  在 iOS 6 设备上的应用内播放 HTML5 音频。
2.  关闭和打开显示器，以便您处于锁定屏幕（音频继续按预期播放）。
3.  解锁并返回应用程序。
4.  停止 HTML5 音频并播放另一个曲目。
5.  关闭和打开显示器，以便您处于锁定屏幕（音频继续按预期播放）。
6.  双击主页按钮以在锁定屏幕上显示音频控件，然后点击暂停按钮。

**结果：**
当前播放的音频被暂停，但之前的音频（来自步骤 1）现在开始播放。如果您点击下一曲目按钮，然后点击上一曲目，然后点击播放，它将同时播放两个音频项目。

**注意：**
在 iOS 5.1 上，之前播放的背景音频不会保留。

有没有办法确保只有应用程序中最后播放的音频在 iOS 6 的后台可用？

# mysql - 用户资料的数据库设计

> ID：13016762
> 
> 赞同：0
> 
> 时间：2012-10-22T17:40:42.973
> 
> 标签：mysql, sql, database, database-design

用户可以创建两种配置文件类型之一，例如自由职业者和公司。此配置文件类型有几个常见和几个独特的字段。公司可能有许多用户作为工人。

更清楚一点：用户 HAS_ONE 个人资料（自由职业者或公司）；公司 HAS_MANY 用户；

关于这种情况的最佳数据库设计有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:42:41.197

一个数据库表，其外键指向配置文件类型`ProfileTypeID`值，可能包括但不限于以下内容：

*   自由职业者
*   公司

这一字段将帮助您确定哪些附加属性与用户相关联。其余的都是简单的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:52:42.107

是传承。当您面对这种情况时，您有 3 个选择。

第一个选择是一张供公司和自由职业者使用的大桌子，上面有一张`typeid`桌子可以知道它是公司还是自由职业者，但在你的情况下，你最终会得到很多`nulls`.

第二个选项是公司和自由职业者的 2 个单独的表以及用户表中的公共属性。然后你必须`typeId`在你的用户表中添加才能知道它是公司还是自由职业者

第三种选择是为用户、自由职业者和公司制作一张大桌子，但这将是空值最多的选项。

在您的情况下，最好的选择是第二种选择，因为您有几个常见的和几个独特的字段。

# php - 如何更改 .php 文件中的旋转速度

> ID：13016765
> 
> 赞同：0
> 
> 时间：2012-10-22T17:40:46.067
> 
> 标签：php, wordpress, rotation, duration, testimonials

下面是我的 testimonials.php 文件。我想改变推荐的旋转速度，但是我不确定要写什么代码。感谢您的帮助！

```
 <?php
/**
 * Testimonials
 *
 */
 ?>
<div class="testimonials sixteen columns alpha omega marT20 marB40 padT40 padB20">
    <?php
        $args = array(
            'post_type' => 'testimonial', 
            'order' => 'DSC',
            'posts_per_page' => 100
        );
        $query = new WP_Query($args); ?>

    <ul class="testimonial-content">

        <?php while ( $query->have_posts() ) : $query->the_post(); ?>

        <li>
            <h5 class="marB8"><?php the_content(); ?></h5>
            <h5 class="marB0"><strong><?php the_title(); ?></strong></h5>
        </li>

        <?php endwhile; wp_reset_query(); ?>

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:58:00.377

从类名来看`testimonial-content`，您可能正在使用 WordPress 推荐小部件。在此处查看最后的设置：

![推荐小部件屏幕截图](../Images/82cd281308aebc0dc6c772029da55ffe.png)

如果您需要以编程方式更改它，请在`/wp-content/plugins/testimonials-widget/`.

# r - 增加样本数据的大小 - R

> ID：13016772
> 
> 赞同：3
> 
> 时间：2012-10-22T17:41:06.020
> 
> 标签：r, random-forest

我的一位同事表示，`randomForest()`在非常大的数据集上表现不佳。现在，我只是想弄清楚是否真的如此，但由于数据集无法共享（敏感信息），我想我不妨尝试提出一个大型数据集。我尝试了以下操作，但无法理解错误消息：

```
library(randomForest)
data(iris)
dataFile <- iris
newdataFile <- dataFile[sample(dataFile, size= 1:1000000000, replace=T),] 
```

错误信息：

```
Error in xj[i] : invalid subscript type 'list' 
```

有人可以在这里指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:50:42.663

`sample`接受一个向量。从 data.frame 中采样时，通常通过将行称为数字来对行进行采样，这很类似于子集，但在这种情况下，需要替换。

```
newdataFile <- iris[sample(nrow(iris),100000,replace=T),] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:12:04.830

随机森林在大型数据集上表现不佳的断言是荒谬的。从样本量和多变量的角度来看，它特别适合高维问题。RF 的主要问题和非常大的问题是：1) 易处理性和 2) 样品平衡。

如果您遇到一个类按比例较大 (>30%) 的问题，则引导程序可能存在偏差，并且 OOB 验证以及可能的估计不正确。结果，例如 [0=10000,1=200] 的二进制问题，对于 0 的预测率非常高，对于 1 的预测率非常低，从而导致模型的 OOB 错误率非常好，但相当膨胀，但是1级的表现非常差。

这显然不能代表模型性能，并且您对第 1 类的预测流行率将非常低。如果您遇到类平衡问题，我将遵循 Chen 等人的方法。al., (2004) 或 Evans & Cushman (2009)。

Chen C, Liaw A, Breiman L (2004) 使用随机森林学习不平衡数据。[http://www.stat.berkeley.edu/tech-reports/666.pdf](http://www.stat.berkeley.edu/tech-reports/666.pdf)

Evans, JS 和 SA Cushman (2009) 使用随机森林对针叶树物种进行梯度建模。景观生态学五：673-683。

# hive - Hive 创建表忽略来自 protobuf 的“字节”类型

> ID：13016773
> 
> 赞同：0
> 
> 时间：2012-10-22T17:41:09.683
> 
> 标签：hive, protocol-buffers

我在使用用于创建表的 protobuf 时遇到问题。

我有一个 .proto 文件，结构中有 2 个字段。Hive 似乎只使用 1 个字段 (EMetaData) 并忽略表中的“字节”类型字段。

```
message EE {
 required EMetaData header = 1;
 optional bytes cl = 2;
}

message EMetaData {
 required uint32 version = 1;
 optional string root_pid = 2;
} 
```

该表在 Hive 中是这样创建的。

```
Hive>desc pbtest2;

OK
key     struct<header:struct<rootpid:string,version:int>>  from deserializer
value   struct<header:struct<rootpid:string,version:int>>  from deserializer 
```

下面是我的创建表语句。

```
create table pbtest2 row format serde 'MyProtobufDeserializer' with serdeproperties ('KEY_SERIALIZE_CLASS'='CEMessages$EE','VALUE_SERIALIZE_CLASS'='CEMessages$EE') stored as inputformat 'MyInputFormat' outputformat 'org.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat' 
```

表中不存在字节类型 cl 字段。不确定是什么问题。有没有人遇到过这个问题？如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:01:06.543

发现我的 SerDe 需要一些更改。它没有处理 .proto 文件中的“字节”类型。处理完之后，我可以看到为表创建的“二进制”类型字段。

# excel-2007 - 在 VBA 中设置范围时出现“对象变量或未设置块变量”错误

> ID：13016776
> 
> 赞同：3
> 
> 时间：2012-10-22T10:40:26.813
> 
> 标签：excel-2007, vba, range

我有一个创建数据透视表的函数，但是当我尝试设置一个将被合并的范围并添加一个标题时出现错误。

在下面的代码中，`pivot_title_range`是一个“字符串”变量，在调用函数时是可选的。`title_range`是一个“范围”变量。设置范围的两行（无论用户是否声明`pivot_title_range`）都会导致相同的错误。

```
If pivot_title_range = "" Then
    title_range = ActiveSheet.Range("B3:E4")
Else
    title_range = ActiveSheet.Range(pivot_title_range)
End If 
```

这是我得到的错误 -

```
Run-time error '91':
Object variable or With block variable not set 
```

如果需要，这里是一个完整功能的 Pastebin - [http://pastebin.com/L711jayc](http://pastebin.com/L711jayc)。违规代码从第 160 行开始。

有人能告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T10:49:49.567

你需要使用

```
If pivot_title_range = "" Then
    Set title_range = ActiveSheet.Range("B3:E4")
Else
    set title_range = ActiveSheet.Range(pivot_title_range)
End If 
```

因为你定义`title_range as range`了 - 这是一个对象；）

# c# - 增加 rdlc 中的标题高度边距

> ID：13016780
> 
> 赞同：1
> 
> 时间：2012-10-22T17:41:40.867
> 
> 标签：c#, export, report, rdlc, doc

在我的 rdlc 文件中，我有页眉、内容和页脚。我想做的是增加标题的上边距。但是，我无法做到这一点。

我尝试了以下方法： **1.**调整报表属性中的上边距。这会调整内容的上边距，*但不会调整 header*。另外，**2.**调整页眉的高度。无论我增加多少高度，当.doc文件生成时，它仍然和以前一样大小，这非常令人沮丧。

有什么方法可以方便地设置标题的高度（并且无需进行大量更改，例如在标题中插入空文本框等）？非常感谢...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:56:27.287

我很害怕，但明确解释说，当您以 Word 格式呈现报告时，不支持标题高度。

> 页眉和页脚在 Word 中呈现为页眉和页脚区域。如果页眉或页脚中出现报表页码或指示报表页总数的表达式，它们将被转换为 Word 字段，以便在呈现的报表中显示准确的页码。**如果在报表中设置了页眉或页脚高度，Word 不支持此设置**。

[MSDN 源码](http://msdn.microsoft.com/en-us/library/dd283105%28v=sql.105%29.aspx#ReportHeadersFooters)

在这里[您可以](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/6d752bf2-a656-4807-b047-8148114feacd)在 msdn 论坛中找到有关它的主题

# postgresql - 使用 Pentaho 访问 PostgreSQL 中的非公共模式

> ID：13016786
> 
> 赞同：1
> 
> 时间：2012-10-22T17:41:51.413
> 
> 标签：postgresql, postgresql-9.1, pentaho

首先让我说，我对 Pentaho 的了解不会填满一个段落。我对 PostgreSQL 更了解。我正在与一些承包商合作，他们正在为我的公司在 Pentaho (v. 4.5) 中构建一组月度报告。一些数据需要通过 ETL 流程并汇总以用于报告目的。从 dba(ish) 的角度来看，我想将这些表移动到单独的 PostgreSQL 模式中。

我知道 Pentaho 经常与 MySQL（没有模式）一起使用，我担心这可能会导致问题。我已经做了一些“谷歌搜索”，但我并没有在该主题上出现很多点击，但我确实发现了[几年前的一个已关闭的错误](http://jira.pentaho.com/browse/PDI-3441)- 因此暗示应该支持该功能。

在我这样做之前，我想看看是否有人知道这将失败或不是一个坏主意的原因。（或者如果你已经完成并且效果很好，也请告诉我）。

最后说明：我使用的是 PostgreSQL 9.1.5，我无法访问 Pentaho 实例，甚至无法自己测试。而且我希望 Stackoverflow 社区中的好人能够分享他们的专业知识，让我不必安装一个，并且为了了解这是一个坏主意而花费大量时间进行游戏/测试。

编辑：

我有点知道这个问题有点含糊，但我希望有人会阅读它并分享他们的任何经验。所以，让我更清楚地说明它并提出更*明确*的问题。

我什么都没做。我不知道彭塔霍。我不想学习 Pentaho（不是说 Pentaho 有什么问题……只是现在不是我的兴趣所在）。我的公司雇用了承包商（我没有雇用他们）。他们有使用 Pentaho 的经验，但使用的是 MySQL。他们对 PostgreSQL 一无所知。PostgreSQL 和 MySQL 之间有一些重要的区别。包括 PostgreSQL 支持模式的事实（而 MySQL 使用单独的数据库......在概念上相似但在某些方面表现不同）。一些 ORM（和工具）并不真正喜欢这个......例如，[Django](https://code.djangoproject.com/ticket/6148)框架仍然没有真正完全支持 Postgresql 中的模式（我知道这一点，因为我经常使用 Python 和 Django，当我将东西保存在“公共”模式中时，我的生活会好得多）。由于我在 Django 和 PostgreSQL 模式方面的经验，我对将这些数据移动到新模式有点怀疑。

我确实明白，无论表格在哪里，它们都需要权限才能访问数据。

我的*明确*问题：

*   您是否使用 Pentaho 访问 PostgreSQL 数据库以访问“公共”（默认）以外的模式中的表。
*   如果是这样，它是否有效（没有问题）？
*   如果您遇到问题，您愿意与我（以及 Stackoverflow 社区）分享任何对您有帮助的在线资源吗？或者您愿意详细说明您在这里记得的内容吗？
*   你知道有什么不能正常工作的吗？例如，与此主题相关的 Pentaho 中的一个未解决的错误。

同样，这不是您的标准问题。我希望那里的人有经验并愿意在这里分享它，让我不必花时间设置一个新的 Pentaho 实例并尝试学习 Pentaho 来测试它等等。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:20:05.563

你可以走两条路：

1) 之前的帖子所说的（“Pentaho 步骤（表输入、输出等）通常允许您指定数据库模式。”）

2）在数据库连接中，高级选项卡，“首选模式名称”。

如果您使用不同的架构，您可以为每个架构创建一个数据库连接。使用这种方法，您可以将输入/输出步骤中的架构字段留空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T23:19:30.370

我们使用 MS SQL 服务器，我可以告诉你，Pentaho 确实在模式的想法上遇到了困难。他们的许多应用程序允许您选择模式，但 Pentaho 就像您所说的那样，是为使用 mySQL 之类的东西而构建的。

让您的 pentaho 数据库用户像在 mySQL 中一样工作。

我们将数据库用户默认为 dbo，然后我们构建了 dbo.dimDimension、dbo.factFactTable 等表。基本上，仅将 dbo 用于 Pentaho 目的。（或者你想默认的任何模式。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T23:36:44.000

我每天都广泛使用 PDI 和 PgSQL 以及一堆不同的模式。它工作正常。您可能遇到的唯一麻烦是 Pg 的麻烦做法是强制不带引号的标识符小写而不是大写。当我将高级连接属性设置为“引用数据库中的所有内容”时，我很快意识到一切都变得更容易了。

是的，如果 PDI 不为您执行 SQL，则您必须在键入 SQL 时引用所有内容，但它工作得很好。尚未尝试强制所有标识符为小写，但我希望这也能奏效。

是的，也可以使用“首选模式名称”，但请注意，某些步骤使用该选项，而其他步骤则不使用。例如，您不能期望它将模式名称添加到您在表输入步骤中键入的 SQL。

您可能遇到的唯一其他问题是 Pg 的 JDBC 驱动程序的限制。它不如 SQL Server 或 DB2，但我遇到的唯一问题是当 Table Output 步骤处于批处理模式时，将错误行从 Table Output 步骤发送到另一个步骤。

玩得开心学习 PDI。它可以很好地补充您的 DBA 技能。

布赖恩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T20:05:42.240

Pentaho 步骤（表输入、输出等）通常允许您指定数据库模式。

我使用 PDI 和我们的 8.4 Postgres 实例进行了快速测试，并且能够探索、读取和写入不同模式中的表。

所以，我认为这是一个合理的方向。希望这可以帮助。

# perl - 如何使用 DBD::CSV 手动指定列名？

> ID：13016794
> 
> 赞同：0
> 
> 时间：2012-10-22T17:42:36.123
> 
> 标签：perl, csv, dbd

我正在使用[DBD::CSV](http://search.cpan.org/~hmbrand/DBD-CSV-0.36/lib/DBD/CSV.pm#Driver_specific_attributes)来显示 csv 数据。有时文件不包含列名，所以我们必须手动定义它。但是在我遵循文档之后，我陷入了如何使属性 skip_first_row 工作的问题。我的代码是：

```
#! perl
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect("dbi:CSV:", undef, undef, {
    f_dir            => ".",
    f_ext            => ".txt/r",
    f_lock           => 2,
    csv_eol          => "\n",
    csv_sep_char     => "|",
    csv_quote_char   => '"',
    csv_escape_char  => '"',
    csv_class        => "Text::CSV_XS",
    csv_null         => 1,
    csv_tables       => {
        info => {
            file => "countries.txt"
        }
    },  
    FetchHashKeyName => "NAME_lc",
}) or die $DBI::errstr;

$dbh->{csv_tables}->{countries} = {
  skip_first_row => 0,
  col_names => ["a","b","c","d"],
};

my $sth = $dbh->prepare ("select * from countries limit 1");
$sth->execute;
while (my @row = $sth->fetchrow_array) {
  print join " ", @row;
  print "\n"
}
print join " ", @{$sth->{NAME}}; 
```

country.txt 文件是这样的：

```
AF|Afghanistan|A|Asia
AX|"Aland Islands"|E|Europe
AL|Albania|E|Europe 
```

但是当我运行这个脚本时，它返回

```
AX Aland Islands E Europe
AF AFGHANISTAN A ASIA 
```

我希望它要么返回：

```
AF AFGHANISTAN A ASIA
a b c d 
```

或者

```
a b c d
a b c d 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:14:17.433

出于某种原因，与文档相反，除非您将它们传递给`connect`.

```
my $dbh = DBI->connect("dbi:CSV:", undef, undef, {
    f_dir            => ".",
    f_ext            => ".txt/r",
    f_lock           => 2,
    csv_eol          => "\n",
    csv_sep_char     => "|",
    csv_quote_char   => '"',
    csv_escape_char  => '"',
    csv_class        => "Text::CSV_XS",
    csv_null         => 1,
    csv_tables       => {
        countries => {
            col_names => [qw( a b c d )],
        }
    },
    FetchHashKeyName => "NAME_lc",
}) or die $DBI::errstr; 
```

然后它工作正常：

```
my $sth = $dbh->prepare ("select * from countries limit 1");
$sth->execute;

print "@{ $sth->{NAME} }\n";      # a b c d

while (my $row = $sth->fetch) {
    print "@$row\n";              # AF Afghanistan A Asia
} 
```

# php - LOAD DATA LOCAL INFILE 失败 - 从 php 到 mysql（在 Amazon rds 上）

> ID：13016797
> 
> 赞同：7
> 
> 时间：2012-10-22T17:42:50.197
> 
> 标签：php, mysql, amazon-rds, load-data-infile

我们正在将我们的数据库从网络服务器上移动到单独的服务器（从 Amazon EC2 网络服务器到 RDS 实例。）

我们有一个之前工作的 LOAD DATA INFILE，现在需要添加 LOCAL 关键字，因为数据库将位于与 Web 服务器不同的机器上。

在我的开发服务器上测试，结果它不起作用：

*   我仍然可以像以前一样从 php 加载数据输入文件
*   我可以从 mysql 命令行加载 DATA LOCAL INFILE（使用 --local_infile=1）
*   我无法从 php 加载数据本地文件。

在这两个有效的事情之间，它排除了：

*   sql 或 php 代码的问题
*   上传文件的问题，包括语法和文件权限
*   mysql服务器设置问题

我得到的错误是： ERROR 1148 (42000): The used command is not allowed with this MySQL version（如果我不使用 --local_infile=1，我会从 mysql 命令行得到该错误）

* * *

其他一些相关信息：

*   Ubuntu 12.04、mysql 5.5.24、php 5.3.10
*   我正在使用 php 的 mysql_connect（而不是 mysqli，因为我们计划使用不支持 mysqli 的 facebook 的 hiphop 编译器。）
*   因此，连接命令需要一个额外的标志集：

    ```
    mysql_connect($dbHost, $dbUser, $dbPass, false, 128); 
    ```

*   我已经使用 phpinfo() 来确认`mysql.allow_local_infile = On`
*   我已经在 Amazon RDS 上尝试过（以防我的开发服务器出现问题），但它在那里也不起作用。（打开 local_infile 参数。）

我读到的唯一没有尝试过的就是在我的开发服务器上编译 mysql 服务器并打开标志以允许本地 infile ......但即使我在我的开发服务器上工作它也不会帮助我使用 Amazon RDS。（除此之外， LOAD DATA LOCAL INFILE 确实可以从 mysql 命令行工作。）

* * *

这似乎是 php 的 mysql_connect() 的具体问题

任何使用 LOAD DATA LOCAL INFILE（可能来自 Amazon RDS）的人都知道让它工作的诀窍吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T12:20:27.320

我已经放弃了，因为我认为这是 php 中的一个错误——尤其是现在已弃用的 mysql_connect 代码。可以通过使用类似于@eggyal 提到的错误报告中提到的步骤自行编译 php 并更改源来解决它：[https ://bugs.php.net/bug.php?id=54158](https://bugs.php.net/bug.php?id=54158)

相反，我将通过执行 system() 调用并使用 mysql 命令行来解决它：

```
$sql = "LOAD DATA LOCAL INFILE '$csvPathAndFile' INTO TABLE $tableName FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\\\"' ESCAPED BY '\\\\\\\\' LINES TERMINATED BY '\\\\r\\\\n';";
system("mysql -u $dbUser -h $dbHost --password=$dbPass --local_infile=1 -e \"$sql\" $dbName"); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-05T23:58:10.573

**这是一个排除这个讨厌的错误的清单：**

* * *

1- 在 MySQL 中授予用户 FILE 权限，phpMyAdmin 一般不涵盖此权限：

```
GRANT FILE ON *.* TO 'db_user'@'localhost'; 
```

2- 在 /etc/mysql/ 或您的 mysql 路径中编辑 my.cnf：

```
[mysql]
local-infile=1
[mysqld]
local-infile=1 
```

3- 在 /etc/php5/cli/ 或类似的 php.ini 中：

```
mysql.allow_local_infile = On 
```

您可以选择`ini_set`在脚本中运行：

```
ini_set('mysql.allow_local_infile', 1); 
```

4- 数据库处理程序库必须使用正确的选项。
*PDO*：

```
new PDO('mysql:host='.$db_host.'.;dbname='.$db_name, $db_user, $db_pass,
array(PDO::MYSQL_ATTR_LOCAL_INFILE => 1)); 
```

*mysqli*：

```
$conn = mysqli_init();
mysqli_options($conn, MYSQLI_OPT_LOCAL_INFILE, true);
mysqli_real_connect($conn,server,user,code,database); 
```

5- 确保 INFILE 命令使用文件的绝对路径并且它存在：

```
$sql = "LOAD DATA INFILE '".realpath(is_file($file))."'"; 
```

6- 检查目标文件*和父目录*是否可以被 PHP 和 MySQL 读取。

```
$ sudo chmod 777 file.csv 
```

7-如果您在本地工作，则可以`LOCAL`从 SQL 中删除：

```
LOAD DATA INFILE 
```

代替：

```
LOAD DATA LOCAL INFILE 
```

* * *

注意：*如果您编辑它们的配置文件，请记住重新启动 MySQL 和 PHP 服务。*

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-09T15:44:21.277

如[本文](https://serverfault.com/questions/451100/mysql-php-configuration-does-not-allow-load-data-local-infile)所述，需要向 mysql_connect 添加第三个和第四个参数才能使 LOAD LOCAL DATA INFILE 正常工作。它帮助了我。任何其他建议（在互联网上广泛讨论的 my.cnf 中的 apparmor、local-infile=1）都没有帮助。以下 PHP 代码对我有用！

```
mysql_connect(HOST,USER,PASS,false,128); 
```

没错，这也在[手册](http://php.net/manual/en/function.mysql-connect.php)中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-22T09:48:16.080

使用客户端使用 infile true 激活的以下行

mysql --local-infile=1 -u root -p

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T13:13:34.440

如果您在 2020 年执行此操作，建议您检查 phpinfo.php 或 php --ini 以了解配置文件的位置。对我来说，我使用的是 virtualmin 并更改了 php ini 文件，但我的网站有它自己的特定 ini 文件。一旦我找到了它的位置并改变了它，一切都恢复了正常。

# ios - Cocos2D：如何在不同类之间发送事件

> ID：13016799
> 
> 赞同：0
> 
> 时间：2012-10-22T17:42:54.377
> 
> 标签：ios, events, cocos2d-iphone, cclayer, game-loop

我读过的大多数教程只解释了 HelloWorld 类中的 Cocos2D 示例，但是当我开始构建一个简单的游戏时，我需要知道如何将事件发送到不同的类，并让它们在发生时做出响应.

我有 GameSceneLayer，一个 CCLayer 类，它加载到我不同的 Sprite 的 CCLayers 中：

```
@implementation GameSceneLayer
+ (CCScene *)scene {
    CCScene *scene = [CCScene node]; // Create a container scene instance
    GameSceneLayer *gameLayer = [GameSceneLayer node]; // Create an instance of the current layer class
    [scene addChild:gameLayer]; // Add new layer to container scene
    return scene; // Return ready-made scene and layer in one
}
-(id)init
{
self = [super init];
if (self != nil)
{
    Background *background = [Background node];
    [self addChild:background z:0];
    Player *player = [player node];
    [self addChild:player z:1];
    MainMenu *mainMenu = [MainMenu node];
    [self addChild:mainMenu z:2];

}
return self;
}
@end 
```

但是，当我的 MainMenu CCLayer START 精灵被触摸时，我希望它从 Player CCLayer 的 PLAYER 精灵中生成。

我猜我需要一个 GlobalVariables.h 类似的东西：

```
 #define gameStart @"0" 
```

因此，当按下 START 精灵时，它会将 gameStart 更改为 1，并且在 PLAYER 精灵中的某处有

```
 if (gameStart == 1)
{
    [self addChild:PLAYER];
} 
```

但是我不确定如何设置代码，以便播放器精灵始终在寻找该信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:11:33.283

你有对象（类的实例）。您希望一个对象与另一个对象进行通信。在 Objective-C 中，这称为发送消息。在其他语言中，它只是调用一个方法。

您不需要全局变量。相反，接收对象 MainMenu 需要向 Player 对象发送消息（调用方法）。如何让两个对象相互认识？你可以把它们放在一个臭气熏天、吵吵闹闹、人满为患的迪斯科舞厅里，然后寄希望于最好的结果。

或者你可以简单地让他们互相交谈，但很可惜，他们不应该这样做。由于两者都是 GameSceneLayer 的兄弟姐妹，因此它们本身不应持有彼此的引用（除非您使用弱引用，否则会产生保留循环的危险）。

但两者都有相同的父母。那么当两个兄弟姐妹不互相交谈时，一个好父母会怎么做呢？它传递信息！

在 MainMenu 中，向父 GameSceneLayer 发送消息：

```
[(GameSceneLayer*)self.parent gameWillStart]; 
```

GameSceneLayer 实现了该选择器，并将消息转发给任何其他应该被告知开始游戏的对象：

```
-(void) gameWillStart
{
    [player gameWillStart];
    [ingameUI gameWillStart];
    // etc.
} 
```

并且 Player 还实现了上述选择器：

```
-(void) gameWillStart
{
    [self addChild:PLAYER];
} 
```

还有一件事：在 GameSceneLayer 中，使玩家和所有其他对象 ivars（实例变量），以便 GameSceneLayer 可以随时使用这些引用。另一种方法是标记（不太常用的）对象，然后使用 getChildByTag：

PS：在我看来，将 PLAYER 添加为孩子看起来很可疑。如果您已经创建了任何节点 PLAYER，您应该立即添加它，如有必要，将其设置为不可见和/或在游戏尚未开始时暂停。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:55:36.653

您可以使用单例 GameState 管理器，它保存有关游戏状态的信息。

这是一个小片段：

```
+(GameManager*) sharedGameManager {
if (!_sharedGameManager) {
    _sharedGameManager = [[self alloc] init];
}
return _sharedGameManager;
}

+(id) alloc {
    NSAssert(_sharedGameManager == nil, @"Cannot create second instance of singleton Game Manager");
    return [super alloc];
}

- (id)init
{
    self = [super init];
    if (self) {

    }
    return self;
} 
```

在该游戏管理器中，您可以拥有一个包含游戏状态的枚举，并为其设置一个属性。

```
//Header

typedef enum {
     kGameStarted,
     kGameEnded
 }GameState

@interface GameManager : CCNode {

}
@property (nonatomic) GameSate gameState; 
```

然后回到你的实现文件中，合成 GameState 属性，并创建你自己的 setter

```
//Implementation
@synthesize gameState = _gameState;

//Create your own setter, so you can notify all listeners
    -(void) setGameState:(GameState) newGameState {
    if (newGameState != _gameState) {
        _gameState = newGameState;

        //Notify listeners via NSNotification
        [[NSNotificationCenter defaultCenter] postNotificationName:@"gameState" object:nil];
    }
} 
```

在您想要获取消息的类中，您只需订阅“gameState”通知，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(onGameStateChange:) 
        name:@"gameState"
        object:nil];

  -(void) onGameStateChange{
          if ([GameManager sharedManager].gameState == kGameStarted){
          //start game
          }
   } 
```

# php - 表格邮件不支持拉丁字符

> ID：13016809
> 
> 赞同：0
> 
> 时间：2012-10-22T17:43:31.803
> 
> 标签：php, forms, utf-8

我无法收到我的（图像）上传表单正在发送的电子邮件，以支持拉丁字符。

```
 $headers .= "\nMIME-Version: 1.0\n" .
                  "Content-Type: multipart/mixed\n" .
                  " boundary=\"{$mime_boundary}\"";

      $message ="This is a multi-part message in MIME format.\n\n";
      $message.="--{$mime_boundary}\n";
      $message.="Content-Type: text/html; charset=utf-8\n";
      $message.="Content-Transfer-Encoding: 7bit\n\n"; 
```

有什么想法吗？

抱歉内容太少了，这会更有帮助吗？

```
 $fileatt      = $_FILES['attachment']['tmp_name'];
    $fileatt_type = $_FILES['attachment']['type'];
    $fileatt_name = $_FILES['attachment']['name'];

    $headers = "From: $emailfrom";

      $semi_rand = md5(time());
      $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

      $headers .= "\nMIME-Version: 1.0\n" .
                  "Content-Type: multipart/mixed\n" .
                  " boundary=\"{$mime_boundary}\"";

      $subject='Presentación de la fotografía';

      $message ="This is a multi-part message in MIME format.\n\n";
      $message.="--{$mime_boundary}\n";
      $message.="Content-Type: text/html; charset=utf-8\n";
      $message.="Content-Transfer-Encoding: 7bit\n\n";
      $message.="".$namefrom." nos envía este foto.<br />\n\n";

    if (is_uploaded_file($fileatt)) {
      // Read the file to be attached ('rb' = read binary)
      $file = fopen($fileatt,'rb');
      $data = fread($file,filesize($fileatt));
      fclose($file);

      // Base64 encode the file data
      $data = chunk_split(base64_encode($data));

      $message .= "--{$mime_boundary}\n" .
                  "Content-Type: {$fileatt_type};\n" .
                  " name=\"{$fileatt_name}\"\n" .
                  //"Content-Disposition: attachment;\n" .
                  //" filename=\"{$fileatt_name}\"\n" .
                  "Content-Transfer-Encoding: base64\n\n" .
                  $data . "\n\n" .
                  "--{$mime_boundary}--\n";
    }

    $envs = array("HTTP_USER_AGENT", "REMOTE_ADDR", "REMOTE_HOST");
    foreach ($envs as $env)
    $message .= "$env: $_SERVER[$env]\n";

    if(!mail($to,$subject,$message,$headers)) {
        exit("Disculpa se ha producido un error. Inténtalo de nuevo. Gracias<");
    } else {
        echo '<div id="formfeedback">'. $thanksmessage .'</div>';
        unset($_SESSION['myForm']);
        print_form();

    } 
```

奇怪的是，当我在我的 Mac 上收到我的测试邮件时，我得到了无效字符，但在我的 iPhone 上却显示正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:28:36.440

以下钉了它

形式：`$message.="Content-Type: text/html; charset=utf-8\n";` 在 html 中：`<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">`

我真正改变的唯一一件事是（在 html 元中）将 UTF-8 转换为大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:50:18.280

使用字符集 ISO-8859-1。它支持西欧、Latin-1。UTF-8 是 ASCII 兼容的多字节 8 位 Unicode。

# linq - IQueryable 整数属性表达式在哪里使用？

> ID：13016811
> 
> 赞同：0
> 
> 时间：2012-10-22T17:43:36.393
> 
> 标签：linq, entity-framework, linq-to-entities, iqueryable

所以我有一个使用实体框架 LINQ 构建的查询。取决于搜索参数和被搜索参数的类型。

我创建了一个这样的函数：

```
public static IQueryable<T> WhereInt<T>(this IQueryable<T> query, string propertyName, string contains)
        {
            var parameter = Expression.Parameter(typeof(T), "type");
            var propertyExpression = Expression.Property(parameter, propertyName);

            MethodInfo method = typeof(string).GetMethod("First");
            var someValue = Expression.Constant(contains, typeof(string));
            var containsExpression = Expression.Call(propertyExpression, method, someValue);

            return query.Where(Expression.Lambda<Func<T, bool>>(containsExpression, parameter));

        } 
```

像这样使用：

```
WhereInt(DCs, searchfield, search); 
```

`searchfield`可以是用户 ID、用户名、整数或字符串，理想情况下我想做：

```
searchfield.value == search.toInt32() 
```

某种特征。

我也想让`DateTime`类型可搜索。也许我会`WhereDateTime`为此做一个。

我收到一个错误`var containsExpression = Expression.Call(propertyExpression, method, someValue);`

这适用于字符串，但失败并出现错误：

```
Value cannot be null.
Parameter name: method 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:07:42.507

整数值没有`.First()`方法。我真的不知道你为什么认为这会帮助你生成一个表达式`searchfield.value == search.toInt32()`（它没有`First`在任何地方说）。请改用 Equal 表达式。

我认为您正在寻找更多类似这些方面的东西。

```
public static IQueryable<T> WhereInt<T>(IQueryable<T> query, string propertyName, string value)
{
    var parameter = Expression.Parameter(typeof(T), "type");
    var propertyExpression = Expression.Property(parameter, propertyName);

    var someValue = Expression.Constant(int.Parse(value), typeof(int));
    var containsExpression = Expression.Equal(propertyExpression, someValue);

    return query.Where(Expression.Lambda<Func<T, bool>>(containsExpression, parameter));
} 
```

# javascript - 禁用 javascript 的浏览器的当前接受/首选处理

> ID：13016812
> 
> 赞同：2
> 
> 时间：2012-10-22T17:43:39.390
> 
> 标签：javascript, html

我有一个正在创建的表单，由于它的敏感性，我正在进行相当多的 javascript 验证，如果未启用 JS，我不能允许用户在表单上启动。过去，我会发布关于使用 NOSCRIPT 标签的通知。我看到它们仍然可以在 HTML5 中使用，但它们似乎即将淘汰。是否有处理这种情况的新/首选方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:47:23.333

With more HTML5 stuff, JavaScript isn't required for quite as much. For instance, form validation doesn't need JS anymore. Audio/Video doesn't require JavaScript or Flash anymore. And so on.

However, `<noscript>` remains the most reliable way to inform people that JavaScript is needed for certain features. The alternative is to just put the "JavaScript is needed" text in the page, and use JavaScript to remove it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:47:52.693

In the past I have done this with a redirection prior to the page.

Something like window.location() to your form and them a meta-refresh tag to a page saying it doesn't support it.

The problem is if there is no JavaScript how do you hide or prevent things on the page.

You could do what I suggested on the same page. Have a meta refresh load by default and then have the javascript stop it.

Or perhaps have javascript set a hidden variable and then you can block the form server side.

Just some options. Other than using NOSCRIPT tags but those are probably the best.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:49:09.373

您应该始终在服务器端提供验证并返回任何不带 javascript 的验证错误。Javascript 验证永远不应该被当作实际的数据验证来依赖。

`disabled`话虽如此，您可以简单地在输入上使用属性呈现表单，而在消息中使用 no `action`，然后使用 javascript 将操作添加到表单并删除禁用属性。`form``noscript`

```
<form id="myform" method="post">
 <input type="text" name="something" id="myinput1" disabled />
 <input type="submit" id="sbmtbtn" disabled />
</form>
<noscript>You must have Javascript!</noscript>
<script>
  document.getElementById('myform').setAttribute('action', '/formpost/url');
  document.getElementById('myinput1').removeAttribute('disabled');
  document.getElementById('sbmtbtn').removeAttribute('disabled');
  // You get the picture  
</script> 
```

# iphone - 使用 CGContextSetLineDash 绘制虚线

> ID：13016816
> 
> 赞同：7
> 
> 时间：2012-10-22T17:43:47.780
> 
> 标签：iphone, objective-c, ios, cgcontext

我正在尝试用`CGContextSetLineDash`.

这是我的代码：

```
float dashPhase = 0.0;
float dashLengths[] = {30, 30};
CGContextSetLineDash(context, dashPhase, dashLengths, 20.0);
self.previousPoint2 = self.previousPoint1;
self.previousPoint1 = previous;
self.currentPoint = current;

self.mid1 = [self pointBetween:self.previousPoint1 andPoint:self.previousPoint2];
self.mid2 = [self pointBetween:self.currentPoint andPoint:self.previousPoint1];

UIBezierPath* newPath = [UIBezierPath bezierPath];

[newPath moveToPoint:self.mid1];
[newPath addLineToPoint:self.mid2];
[newPath setLineWidth:self.brushSize]; 
```

但是，如果我画得很慢，它们就不会出现虚线（见下图顶部），但如果我画得很快，它们会出现（见下图底部）。

![在此处输入图像描述](../Images/92e868ee585564872ee9cacbdcb4c9e3.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:58:18.403

您已设置`dashPhase = 0.`，因此每次开始新行时，模式都会以 30 单位的已绘制线段开始，然后是 30 单位的未绘制线段。如果线段很短，则将绘制整条线。

因此，要么使用单个路径，只附加线段，要么为每个新的子路径计算`dashPhase`模式的开始位置。

（不应该是的最后一个参数`CGContextSetLineDash`是的长度`dashLengths[]`，即`2`？）

**更新：**正如我们在讨论中发现的那样，只要用户绘制相同的曲线，问题的解决方案确实是在最后一个贝塞尔路径中添加线段：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    // ...
    // Compute nextPoint to draw ...
    UIBezierPath *lastPath = [self.paths lastObject]; 
    [lastPath addLineToPoint:self.nextPoint];
    // ...
} 
```

# objective-c - dispatch_async 与 beginBackgroundTaskWithExpirationHandler

> ID：13016822
> 
> 赞同：1
> 
> 时间：2012-10-22T17:44:36.260
> 
> 标签：objective-c, ios, grand-central-dispatch

我需要在 iOS 应用程序中实现一个后台进程，该进程每 60 秒执行一次作业。我知道这只能在应用程序处于焦点时完成，但我确实希望这项工作在应用程序关闭后在后台完成运行。我将使用 GCD 调度一个计时器，该计时器每 60 秒使用`dispatch_async`或异步调用我的作业`beginBackgroundTaskWithExpirationHandler`。

我想知道哪种方法最好，或者它们是否基本相同。`beginBackgroundTaskWithExpirationHandler`即使应用程序处于前台，也可以使用它来执行作业吗？还是我最好在应用程序状态更改时尝试取消作业，然后将作业作为后台任务重新启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:47:52.817

`-beginBackgroundTaskWithExpirationHandler:`不在后台线程/队列上运行代码。它告诉操作系统，当您的应用程序不活动时，您将继续工作。

两者的用途完全不同。

# php - 在 Yii 中即时排除相关模型数据

> ID：13016825
> 
> 赞同：0
> 
> 时间：2012-10-22T17:44:53.410
> 
> 标签：php, yii

是否可以即时从查找条件中排除相关模型数据？

我有一个包含多个图像的 Post 模型，我做了一个 findByPK($id) 它同时加载与 Post 相关的 Post 和 Images 模型。

如何即时排除这些相关模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:17:41.753

它实际上并没有加载任何东西，Yii 默认使用延迟加载。也就是说，它只根据请求加载相关模型。所以：

```
$post = Post::model()->findByPK($id);
//At this point images are not yet loaded

When you call the images, Yii notices they are not loaded and loads them
$post->images; 
```

这意味着，除非您需要它们，否则不会加载您的图像。

# c# - 在asp.net c#中将数据插入SQL Server数据库

> ID：13016827
> 
> 赞同：0
> 
> 时间：2012-10-22T17:44:58.493
> 
> 标签：c#, asp.net

我正在使用以下代码将数据插入数据库。它既不会给出错误，也不会将数据添加到数据库中。我错过了什么吗？

列分别是和`univ_regno`具有`email`数据类型`nvarchar(50)`

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (chkaccept.Checked)
    {
        try
        {
            con = new SqlConnection(ConfigurationManager.ConnectionStrings["SQL Connection String"].ConnectionString);
            con.Open();
            com = new SqlCommand("INSERT INTO stdtable ([univ_regno],[email]) values(@univ_regno,@email)", con);

            com.Parameters.Add("@univ_regno", txtuniv.Text);
            com.Parameters.Add("@email", txtemail.Text);

            com.ExecuteNonQuery();
            con.Close();

            /*show javascript message */
            Type cstype = this.GetType();
            ClientScriptManager cs = Page.ClientScript;
            String cstext = "alert('Record Added Successfully');";
            cs.RegisterStartupScript(cstype, "PopupScript", cstext, true);
        }
        catch (System.Exception err)
        {
           Type cstype = this.GetType();
           ClientScriptManager cs = Page.ClientScript;
           String cstext = "alert('"+  err.Message.ToString() +" ');";
           cs.RegisterStartupScript(cstype, "PopupScript", cstext, true);
        }
   }
   else
   {
       Type cstype = this.GetType();
       ClientScriptManager cs = Page.ClientScript;
       String cstext = "alert('Not checked ');";
       cs.RegisterStartupScript(cstype, "PopupScript", cstext, true);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:57:13.687

![在此处输入图像描述](../Images/a9ce690ee8d4d6f036c1459fd71f776b.png) com.Parameters.Add("@univ_regno", txtuniv.Text);

这会将值添加到参数中吗？它调用 Parameters.Add(string name, SqlDbType type) 重载

参考这个链接：

[Parameters.Add 和 Parameters.AddWithValue 之间的区别](https://stackoverflow.com/questions/9999751/difference-between-parameters-add-and-parameters-addwithvalue)

尝试将参数添加为

```
cmd.Parameters.Add("@univ_regno", SqlDbType.VarChar).Value = txtuniv.Text; 
```

# assembly - 如何将 AT&T 样式汇编代码移至 Visual Studio 和 Intel 样式语法？

> ID：13016828
> 
> 赞同：1
> 
> 时间：2012-10-22T17:45:00.900
> 
> 标签：assembly, x86-64, intel, att

我有一个非常专业的文件，用 x86-64 程序集为 Linux 编写，在 GCC 下编译。我需要将该代码移到 Visual Studio 项目中，并且 mll64.exe 希望程序集文件采用 Intel 格式。

我试图构建一个跨平台的 DLL，但它不起作用：

> 15:47:19 cpudiag2 > gcc -shared -o my.dll my.o
> 
> /usr/bin/ld: my.o: 重定位 R_X86_64_32S 反对 `a local symbol' 在制作共享对象时不能使用；使用 -fPIC my.o 重新编译：无法读取符号：错误值 collect2：ld 返回 1 退出状态
> 
> 15:47:19 cpudiag2 > gcc -fPIC my.S
> 
> /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crt1.o：在函数`_start'中：（.text+0x20）：未定义的引用to `main' collect2: ld 返回 1 退出状态

因此，我尝试让 GCC 从目标文件反编译为 Intel 语法，但这也不起作用。以下两个命令都会产生 AT&T 语法中的反编译汇编代码。为什么？

> objdump -d -M=intel my.o
> 
> gcc -S -masm=intel my.o

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:30:21.533

那里有各种混乱。

1.  命名文件`my.dll`不会改变其格式
2.  由于 linux 和 windows 上的库格式不同，所以不能制作跨平台的 dll
3.  `-fPIC`不会神奇地制作手写 asm PIC，它只适用于编译器生成的代码
4.  要获取目标文件，您应该将`-c`switch 传递给`gcc`（但在这种情况下这对您没有帮助）
5.  `gcc -S`不反汇编目标文件，它用于从 C 代码生成汇编
6.  `objdump -d -M=intel my.o`应该可以工作，但它产生的东西不适合组装（尤其是在 Windows 上，因为它使用不同的调用约定）

您最好的选择可能是将所述代码组装到 windows 目标文件（使用`gcc`/`gas`以 windows 为目标）并将其作为二进制文件包含在您的项目中（仅用于链接），并在需要时使用一个小的粘合层来调用约定转换。但是，不允许您编辑程序集源。

# ios - 在 UITabBarController 视图之间共享变量

> ID：13016837
> 
> 赞同：1
> 
> 时间：2012-10-22T17:45:40.510
> 
> 标签：ios, ios5, uiviewcontroller, singleton, uitabbarcontroller

我正在为在 prepareForSegue 方法上设置的视图控制器设置一个属性。然后这个视图控制器通过 TabBar 中的一个项目显示，该项目使用 segues 推送

问题是我为此 viewcontroller 设置的这个属性将用于 3 个视图（所有这些都可以通过 tabbarviewcontroller 访问）。

基本上我有：

```
| View Controller | -> | TabBarController | -> |ViewController|
                                            -> |ViewController|
                                            -> |ViewController| 
```

在所有视图控制器之间共享数据的最佳方式是什么？我正在考虑使用单例作为管理器，而不是在 prepareForSegue 方法中设置属性，而是在此管理器中设置值并在所有视图中调用它，但也许有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:57:44.510

如果您要在三个视图控制器之间共享数据，我想最好的方法是创建一个“模型”对象（如在模型视图控制器中），并使其可用于您应用程序中的所有对象。

单例将是完美的，您可以在`prepareForSegue`视图控制器需要访问它之前根据需要对其进行修改。

# css - 使用 :checked 为页面上任何位置的元素切换 CSS？

> ID：13016839
> 
> 赞同：0
> 
> 时间：2012-10-22T17:45:49.183
> 
> 标签：css, checkbox, css-selectors, pseudo-class

我最近听说过一种方法，它使用复选框来设置与其相邻的元素的样式，使用：

```
.checkbox-whatever:checked + .toggling-element{
 Some css
} 
```

现在我想做同样的事情，但在全球范围内应用一段 css 而不仅仅是下一个元素。所以基本上，当复选框被选中时，css 的行为就像是：

```
.toggling-element{
Some css
} 
```

然后它将应用于所有具有“toggling-element”类的元素，而不仅仅是与复选框相邻的元素。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:47:45.293

假设您的`.toggle-element`元素不是您的所有兄弟姐妹`.checkbox-whatever`：

*不*，没有 JavaScript 就无法做到这一点，因为 CSS 无法选择父元素。

我认为可以肯定地假设您不会以这种方式构建您的标记。这太不切实际了。

# css - Force YouTube Playlist to HTML5 playback

> ID：13016842
> 
> 赞同：3
> 
> 时间：2012-10-22T17:46:22.710
> 
> 标签：css, youtube, html5-video

As I would like to be able to manipulate the z-index of an embedded Youtube playlist, I tried adding the html5 parameter, set to 1, but this seems to work for single video embedding only.

This works:

```
<iframe width="300" height="225" src="http://www.youtube.com/embed/VIDEO_ID?html5=1" frameborder="0"> 
```

But this doesn't:

```
<iframe width="300" height="225" src="http://www.youtube.com/embed/videoseries?list=PLAYLIST_ID&amp;html5=1" frameborder="0"> 
```

Many thanks :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:51:24.323

您正在以正确的方式强制使用 html 5 播放器，youtube 目前不支持此功能，这仅适用于单个视频。

还有其他解决方案可以让 html5 播放器在 html5 中播放多个 youtube 视频。

使用 mediaelement.js，您可以自己构建一些东西（检查哪个 vid 正在播放，下一个是哪个，如果视频完成了，等等......）。[http://mediaelementjs.com/](http://mediaelementjs.com/)

在快速谷歌之后，我找到了一个实际上支持播放列表的 HTML5 播放器：http: [//mediafront.org/osmplayer/#.UK1L3eOe-pY](http://mediafront.org/osmplayer/#.UK1L3eOe-pY)

# android - 当“Minimum SDK”小于 Build SDK 时，某些属性不可用

> ID：13016845
> 
> 赞同：0
> 
> 时间：2012-10-22T17:46:40.527
> 
> 标签：android

我刚刚在Android中遇到了一个奇怪的问题。也就是说，我使用默认设置在 Eclipse 中创建了我的项目。Eclipse 已将“Android 2.3.3 (API10) 作为“构建 SDK”和“API8:Android 2.2 (Froyo)”作为“最低要求的 SDK”。

但是，我[在这里](https://stackoverflow.com/questions/13014440/setting-up-textboxes-in-same-straight-line/13014536#comment17662128_13014536)问了一个问题，他们要求我使用属性“ `android:layout_toRightOf`”但该属性不可用！以下是以 开头的可用属性`android:layout_`，它们是宽度、高度、重量、重力、边距、边距左、边距顶部、边距右和边距底部。

但是，然后我打开了另一个项目，其中“Android 2.3.3 (API10) 作为“Build SDK”并且与“Minimum required SDK”相同。现在，那些属性就在那里！！

为什么是这样？我是否必须选择与构建 sdk 相同的 API 和最低要求的 sdk？请帮忙！

**编辑**

以下代码具有这些属性，当我第一次尝试使用时没有出现

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
 >

<TextView 
    android:id="@+id/firstTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/firstNumber"
    android:alignParentLeft="true"
    android:alignParentTop="true"
    />

<EditText 
    android:id="@+id/firstNumberTxt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:toRightOf="@+id/firstTextView"
    android:marginLeft=30dp 
    />

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/secondNumber"
    android:alignLeft="@+id/firstTextView"
    android:below="@+id/firstTextView"
    />

<EditText 
    android:id="@+id/secondNumberTxt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:alignLeft="@+id/firstNumberTxt"
    android:below="@+id/firstTextView"
    />

     <RadioGroup
         android:id="@+id/radioGroup"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:orientation="horizontal"
         >

         <RadioButton 
             android:id="@+id/sum"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/sum"
             />

         <RadioButton 
             android:id="@+id/min"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/min"
             />

         <RadioButton 
             android:id="@+id/max"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/max"
             />

         <RadioButton 
             android:id="@+id/dev"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/dev"
             />
     </RadioGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:49:24.880

您使用的是相对布局吗？toRightOf 仅在这种布局中可用！

# tracking - how can I detect floor movements such as push-ups and sit-ups with Kinect?

> ID：13016847
> 
> 赞同：2
> 
> 时间：2012-10-22T17:46:42.943
> 
> 标签：tracking, kinect, depth

I have tried to implement this using skeleton tracking provided by Kinect. But it doesn't work when I am lying down on a floor.

According to Blitz Games CTO Andrew Oliver, there are specific ways to implement with depth stream or tracking silhouette of a user instead of using skeleton frames from Kinect API. You may find a good example in video game Your Shape Fitness. Here is [a link](https://www.youtube.com/watch?v=Q1GfXhQjxmI) showing floor movements such as push-ups!

Do you guys have any idea how to implement this or detect movements and compare them with other movements using depth stream?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:30:54.457

如果开发了一种 360 度传感器，它不仅可以直接识别前方、左侧或右侧的运动，而且还可以针对上方（？）/下方的运动进行优化？我刚才想象的图像是球形的 360 度运动传感器，通常用于安全建筑物等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:38:00.637

如果没有其他传感器，我认为您需要自己跟踪深度数据。[这](http://research.microsoft.com/apps/pubs/?id=145347)是一篇论文，其中详细介绍了 MS 如何在 Kinect SDK 中实现骨骼跟踪，这可能会让您入门。他们在解析深度数据以捕获身体关节的同时实现对象匹配，您可能需要实现一些对象模板和算法来自己进行匹配。除非您可以重用一些骨骼跟踪库来为您从深度数据中解析出对象。

# ravendb - How do you update a document based on an index in RavenDB?

> ID：13016850
> 
> 赞同：1
> 
> 时间：2012-10-22T17:46:54.987
> 
> 标签：ravendb

Taking the Stack Overflow tagging system as the canonical example, how can I get back a tag object with its count?

Given these entities:

```
// Represents the data from the TagCount index
public class TagCount
{
    public string Tag { get; set; }
    public int Count { get; set; }
}

// Represents the data used to populate a tag-wiki
public class Tag
{
    public string Tag { get; set; }
    public DateTime Created  { get; set; }
    public string Description { get; set; }
}

public class Question
{
    // elided
    public List<string> Tags { get; set; }
    // elided
} 
```

And the following definition of the TagCount index

```
// Map
from question in docs.Questions
from Tag in question.Tags
select new { Tag, Count = 1 }

// Reduce
from result in results
group result by result.Tag into g
select new 
{
    Tag = g.Key,
    Count = g.Sum(x=>x.Count)
} 
```

On the tags page (e.g. [https://stackoverflow.com/tags](https://stackoverflow.com/tags)) we need to display a combination of the Tags collection and the TagCounts index. That is, we need to display the Tag.Name and Tag.Description from the Tags collection and TagCount.Count from the TagCount index. In SQL Server this would be achieved by a join, but this is obviously the relational way of thinking. What is the idiomatic RavenDB way of achieving this?

Is there a way to add a Count property to the Tag entity and have the index automatically update that property?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:15:36.250

您可以通过修补来做到这一点，在 API 中也称为 UpdateByIndex。你可以在这里看到这个：http: [//blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching](http://blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching)

# sql - PostgreSQL: Sub-select inside insert

> ID：13016851
> 
> 赞同：41
> 
> 时间：2012-10-22T17:46:59.353
> 
> 标签：sql, postgresql, insert, subquery

I have a table called `map_tags`:

```
map_id | map_license | map_desc 
```

And another table (`widgets`) whose records contains a foreign key reference (1 to 1) to a `map_tags` record:

```
widget_id | map_id | widget_name 
```

Given the constraint that all `map_license`s are unique (however are not set up as keys on `map_tags`), then if I have a `map_license` and a `widget_name`, I'd like to perform an insert on `widgets` all inside of the same SQL statement:

```
INSERT INTO
    widgets w
(
    map_id,
    widget_name
)
VALUES (
    (
        SELECT
            mt.map_id
        FROM
            map_tags mt
        WHERE
            // This should work and return a single record because map_license is unique
            mt.map_license = '12345'
    ),
    'Bupo'
) 
```

I *believe* I'm on the right track but know right off the bat that this is incorrect SQL for Postgres. Does anybody know the proper way to achieve such a single query?

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-22T17:50:51.267

使用`INSERT INTO SELECT`变体，包括`SELECT`语句中的任何常量。

PostgreSQL`INSERT`语法是：

```
INSERT INTO table [ ( column [, ...] ) ]
 { DEFAULT VALUES | VALUES ( { expression | DEFAULT } [, ...] ) [, ...] | query }
 [ RETURNING * | output_expression [ [ AS ] output_name ] [, ...] ] 
```

记下上面第二行末尾的**查询选项。**

这是一个给你的例子。

```
INSERT INTO 
    widgets
    (
        map_id,
        widget_name
    )
SELECT 
   mt.map_id,
   'Bupo'
FROM
    map_tags mt
WHERE
    mt.map_license = '12345' 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-22T17:51:30.367

```
INSERT INTO widgets
(
    map_id,
    widget_name
)
SELECT
    mt.map_id, 'Bupo'
FROM
    map_tags mt
WHERE
    mt.map_license = '12345' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-30T00:17:48.787

**快速回答：** 您没有“**一条记录**”，您有一个“**设置有 1 条记录**”如果这是 javascript：您有一个“具有 1 个值的数组”而不是“1 个值”。

**在您的示例**中，可能会在子查询中返回一条记录，但您仍在尝试将记录的“数组”解压缩为单独的实际参数，并将其放入仅接受 1 个参数的位置。

我花了几个小时来思考“为什么不”。当我试图做一些非常相似的事情时：

这是我的笔记：

```
tb_table01: (no records)
+---+---+---+
| a | b | c | << column names
+---+---+---+

tb_table02:
+---+---+---+
| a | b | c | << column names
+---+---+---+
|'d'|'d'|'d'| << record #1
+---+---+---+
|'e'|'e'|'e'| << record #2
+---+---+---+
|'f'|'f'|'f'| << record #3
+---+---+---+

--This statement will fail:
INSERT into tb_table01
    ( a, b, c )
VALUES
    (  'record_1.a', 'record_1.b', 'record_1.c' ),
    (  'record_2.a', 'record_2.b', 'record_2.c' ),

    -- This sub query has multiple
    -- rows returned. And they are NOT
    -- automatically unpacked like in 
    -- javascript were you can send an
    -- array to a variadic function.
    (
        SELECT a,b,c from tb_table02
    ) 
    ; 
```

基本上，**不要**将“ **VALUES** ”视为 可以解包记录数组的可变参数函数**。**这里没有像在 javascript 函数中那样解包的参数。如：

```
function takeValues( ...values ){ 
    values.forEach((v)=>{ console.log( v ) });
};

var records = [ [1,2,3],[4,5,6],[7,8,9] ];
takeValues( records );

//:RESULT:
//: console.log #1 : [1,2,3]
//: console.log #2 : [4,5,7]
//: console.log #3 : [7,8,9] 
```

**回到你的 SQL 问题：**

此功能不存在的现实不会因为您的子选择仅包含一个结果而改变。它是“一个记录的**集合”，**而不是“**一个记录**”。

# ios - RemoteIO: effecting audio produced by app

> ID：13016853
> 
> 赞同：0
> 
> 时间：2012-10-22T17:47:05.063
> 
> 标签：ios, avfoundation, core-audio, audiounit, remoteio

In a nutshell: Is there a way to capture/manipulate all audio produced by an app using RemoteIO?

I can get render callbacks which allow me to send audio to the speaker by hooking into RemoteIO's output bus for the input scope. But my input buffer in that callback does not contain the sound being produced elsewhere in the app by an AVPlayer. Is manipulating all app audio even possible?

Here is my setup:

```
-(void)setup
{
    OSStatus status = noErr;

    AudioComponentDescription remoteIODesc;
    fillRemoteIODesc(&remoteIODesc);
    AudioComponent inputComponent = AudioComponentFindNext(NULL, &remoteIODesc);

    AudioComponentInstance remoteIO;
    status = AudioComponentInstanceNew(inputComponent, &remoteIO);
    assert(status == noErr);

    AudioStreamBasicDescription desc = {0};
    fillShortMonoASBD(&desc);

    status = AudioUnitSetProperty(remoteIO,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Input,
                                  0,
                                  &desc,
                                  sizeof(desc));
    assert(status == noErr);

    AURenderCallbackStruct callback;
    callback.inputProc = outputCallback;
    callback.inputProcRefCon = _state;

    status = AudioUnitSetProperty(remoteIO,
                                  kAudioUnitProperty_SetRenderCallback,
                                  kAudioUnitScope_Input,
                                  0,
                                  &callback,
                                  sizeof(callback));
    assert(status == noErr);

    status = AudioUnitInitialize(remoteIO);
    assert(status == noErr);

    status = AudioOutputUnitStart(remoteIO);
    assert(status == noErr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:44:48.707

简短的回答：不，不幸的是，它不是那样工作的。您将无法对通过 AVFoundation 生成的音频添加任意处理（从 iOS 6 开始）。

您误解了 RemoteIO 单元的用途。RemoteIO 让您可以访问两件事：音频输入硬件和音频输出硬件。如中，您可以使用 RemoteIO 从麦克风获取音频，或将音频发送到扬声器。RemoteIO 单元不会让您抓取应用程序的其他部分（例如 AVFoundation）发送到硬件的音频。无需过多讨论，这是因为 AVFoundation 不使用与 RemoteIO 一起使用的相同音频路径。

要在您想要的级别上操作音频，您将不得不比 AVFoundation 更深入。[音频队列服务](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)是下一层，它可以让您以音频队列处理水龙头的形式访问音频。这可能是开始处理音频的最简单方法。不过，还没有太多关于它的文档。目前最好的来源可能是标题`AudioToolbox.framework/AudioQueue.h`注意，这仅在 iOS 6 中引入。

比这更深的是[Audio Units](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009492-CH1-SW1)。这就是 RemoteIO 单元所在的位置。您可以使用 AUFilePlayer 从音频文件中产生声音，然后将该音频提供给其他音频单元进行处理（或自己处理）。这将比 AVFoundation（轻描淡写）更加棘手/冗长，但是如果您已经设置了 RemoteIO 单元，那么您可能可以处理它。

# asp.net-mvc - MVC - null object in model, how do I render textboxfor with this

> ID：13016854
> 
> 赞同：0
> 
> 时间：2012-10-22T17:47:07.577
> 
> 标签：asp.net-mvc, razor, null, html.textboxfor

how do I render a textbox using textboxfor in MVC when I have a null class in the model.

For example I have the following I am using as my model

```
public class ClassOne
{
    public string classOneProperty {get;set;}
    public ClassTwo classTwoObject {get; set;}
}

public class ClassTwo
{
    public string classTwoProperty {get;set;}
} 
```

So I have a table of class one values and the user clicks to edit an existing item of ClassOne. In ClassOne the object ClassTwo is null since it wasnt set at the initial creation of the item in the table, so when i try to do `@Html.TextBoxFor(m => m.classTwoObject.classTwoProperty)` I get a null reference error.

How can I use the TextBoxFor to edit fields that have null objects in them since I still want them to bind to the model on postback?

Thanks, DMan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:50:44.387

当您返回时，`ClassOne`您需要将`classTwoObject`属性初始化为`new ClassTwo()`

- 就像上面提到的布鲁克。打败我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:53:27.637

您可以创建一个初始化 classTwoObject 的构造函数

```
public class ClassOne
{
    public string classOneProperty {get;set;}
    public ClassTwo classTwoObject {get; set;}
    public CLassOne()
    {
        classTwoObject = new ClassTwo();
    }

} 
```

或者只是内联初始化它

```
new ClassOne(){classTwoObject=new ClassTwo()}; 
```

# ios - Transitioning to a view does not respect orientation

> ID：13016855
> 
> 赞同：1
> 
> 时间：2012-10-22T17:47:08.717
> 
> 标签：ios, cocoa-touch, view, orientation

I had a bug where I would call to transitionWithView and the new view would appear in Portrait while my app and all XIBs are only marked as Landscape as well as the origin view.

I found how to fix the problem thanks to [this question](https://stackoverflow.com/questions/4707606/animated-transition-doesnt-work-correctly-in-landscape-orientation) (+1) :

I would like to understand though ( and it is not explained there ) - why does it behave this way ? Where in the application is the orientation stored, when is the view notified about the orientation and why views which are transitioned to are unaware of the orientation vs views which are added using addSubview...

Searched a lot but did not find clues . thanks

# asp.net-mvc-3 - How do I stop an HTML helper from encoding the value attribute of an HTML element?

> ID：13016859
> 
> 赞同：1
> 
> 时间：2012-10-22T17:47:19.467
> 
> 标签：asp.net-mvc-3, razor, underscore.js

I have this input element which works fine with underscore templating.

```
<input id="color" name="color" value="<%= color %>" /> 
```

I want to use the `Html.Helper` method to generate the element instead.

I initially tried just the basic helper

```
@Html.TextBox("color", "<%= color %>") 
```

But that gives me

```
<input id="color" name="color" type="text" value="&lt;%= color %>" /> 
```

I tried wrapping the value attribute with `Html.Raw` but that gives the same result, and wrapping the entire helper results in the same thing.

The entire block is wrapped in a `<script type="text/template">` tag.

Why is it converting `<` to `&lt;` and how do I get it to stop?

This works, but is a little messy

```
@MvcHtmlString.Create(Html.TextBox("color", "<%= color %>").ToString().Replace("&lt;", "<")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:07:03.697

如果您尝试使用从代码隐藏提供的颜色，将 Color 属性放在绑定到视图的模型上不是更好吗？然后你可以使用：

```
public class MyModel
{
    public string ColorField {get;set;} //not sure whether you wanted string color or hex color here.  CHange it as necessary
    //also add whatever else you need the UI to bind to
} 
```

在您的控制器中，当您设置模型时，您将输入默认值：

```
public ViewResult MyViewName()
{
     MyModel model = new MyModel { ColorField = "blue"; // or hex color / etc.}
     //add other initialization here
     return View(model);
} 
```

那么在你看来

```
@model MyModel

@Html.TextBoxFor(model=>model.ColorField, "color") 
```

在我看来，您将传统的 ASP.NET 语法与 Razor 语法混合在一起，但我没有将 ASP.NET 语法与 MVC 一起使用，所以我可能是错的，我想彻底摆脱旧的语法。

无论如何，我上面描述的方式是我总是将默认值放入我的表单字段中，并且效果很好。

# c++ - What in C++ can make Windows 8 apps not run on ARM?

> ID：13016861
> 
> 赞同：17
> 
> 时间：2012-10-22T17:04:55.463
> 
> 标签：c++, windows-8, microsoft-metro

Building a Windows 8 app, developers can choose HTML/JavaScript, XAML/.Net (C#/VB), and XAML/C++. I want to write my app in XAML/C++.

Building applications in the first two choices *almost* guarantees that your application will execute on both Intel and ARM architectures.

But I have heard that if I do certain things in my C++ app, I can cause the application NOT to execute on the ARM architecture. But I don't know the details.

Does anyone know what C++ Windows 8 apps should avoid so that they can run on ARM okay? Are these architecture decision or just differences in technique?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:51:59.283

为了在每个架构上运行，显然您首先需要为每个架构进行编译。如果您编写标准 C++（并且如果您不依赖未定义的行为和/或特定于平台的行为），那么在架构之间移植时通常会引起麻烦的事情是：

（此列表是一个示例）

*   int、long、long long（和其他）的大小可能因平台而异
*   char 的签名
*   如何填充结构
*   浮点数的二进制布局
*   字节序
*   等等。

如果你避免疯狂的指针算术和强制转换，通常你是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T19:48:33.363

我不知道有什么会使您的代码根本无法在 ARM 下执行或编译（内联汇编除外）。

但是，您可以做一些事情，这会使 ARM 给出错误的答案。

ARM 处理器是“弱排序”的，这篇最近的文章为您提供了低调

[http://preshing.com/20121019/this-is-why-they-call-it-a-weakly-ordered-cpu](http://preshing.com/20121019/this-is-why-they-call-it-a-weakly-ordered-cpu)

但总而言之，ARM 处理器可能会重新排序内存访问，如果您不小心，这可能会给您在多线程应用程序中的 x86 和 ARM 架构之间带来不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T05:47:04.610

MFC 应用程序不能在基于 ARM 的 Windows 8 系统上运行。

您可以使用 C++ 构建 Metro 风格的应用程序，您只需遵循 Metro“风格”指南。

如果您希望您的所有程序都支持基于 ARM 的 Windows 8 系统以及基于 x86 的系统，请将您的程序更改为使用 HTML/CSS 或 XAML 和 WinRT API 而不是 MFC 和 Win32 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:51:44.160

ARM 仅支持 Windows 应用商店应用。

> 系统要求
> 
> 支持的体系结构：适用于 Windows 8 的 Windows SDK 支持为以下体系结构构建应用程序： x86 x64 ARM（Windows 应用商店应用程序） 注意：适用于 Windows 8 的 Windows SDK 不能直接安装在 ARM 体系结构上。您可以在 x86 或 x64 平台上安装 Windows SDK，以构建面向 ARM 架构的应用程序。

[这是您可以参考的文章的链接。](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)

# performance - BigData analysis: scalability but quick development

> ID：13016866
> 
> 赞同：0
> 
> 时间：2012-10-22T17:47:55.183
> 
> 标签：performance, algorithm, bigdata

Which do you consider is the best language to processing (getting statistical results) of analysing some GB of data information, taking into account these limitations:

*   Open source code.
*   Data can be analyzed in matrixes.
*   Developing time limited.
*   Cost of processing also limited.

For, example, Octave, Fortran, C++, C, Python, etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:52:12.413

无论您最熟悉哪种语言。所有这些语言都有非常高性能的开源选项来做大矩阵数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:46:15.373

我会寻找带有 NumPy 扩展的 Python。

# spring - 如何在 github 中下载开源项目（如 Spring）

> ID：13016869
> 
> 赞同：0
> 
> 时间：2012-10-22T17:48:01.067
> 
> 标签：spring, git, github

我想从 [https://github.com/SpringSource/spring-framework](https://github.com/SpringSource/spring-framework)下载 spring 源 我已经在我的本地 Windows Vista 机器中安装了 Git。如何在 Eclipse 项目中下载和设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:51:18.483

要么直接从[https://nodeload.github.com/SpringSource/spring-framework/zipball/master](https://nodeload.github.com/SpringSource/spring-framework/zipball/master)以 zip 文件的形式下载它，要么`git clone`通过命令行 ( `git clone git://github.com/SpringSource/spring-framework.git`) 使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:53:16.797

查看 spring-framework 存储库中的[自述文件](https://github.com/SpringSource/spring-framework#building-from-source)，了解如何构建项目并将其导入 eclipse。

如果您使用 Eclipse 的[EGit](http://www.eclipse.org/egit/)插件，您应该能够从 eclipse 中克隆 spring-framework 存储库并将其设置为新项目。

# linq - LINQ 如何平均一个内部列表

> ID：13016877
> 
> 赞同：1
> 
> 时间：2012-10-22T17:48:59.553
> 
> 标签：linq

下面的平均需要的 LINQ 语法是什么。Select 和 SelectMany 都让我失望。我可以 Max() 和 Sum() 我的内部列表，但 Average() 不会编译。

简单列表的 JSON 版本看起来像

```
[{"Week":6, "Matches":[{"Game":189},{"Game":149},{"Game":132}]} ....

var hiGame = games.Max(g => g.Matches.Max(m => m.Game)); // ok
var hiSeries = games.Max(g => g.Matches.Sum(m => m.Game)); // ok
var ave = games.Average(g => g.Matches.SelectMany(m => m.Game)); // no go 
```

无法从用法中推断方法“System.Linq.Enumerable.SelectMany(System.Collections.Generic.IEnumerable, System.Func>)”的类型参数。尝试明确指定类型参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:51:27.187

我想你想要你`SelectMany`的在外面：

```
var ave = games.SelectMany(g => g.Matches) // Flatten to a sequence of matches
               .Average(m => m.Game);      // Average by value of Game 
```

# javascript - 如何在 vb.net 的网络浏览器中禁用消息弹出窗口

> ID：13016883
> 
> 赞同：2
> 
> 时间：2012-10-22T17:49:42.063
> 
> 标签：javascript, vb.net

我想禁用它，当您关闭一个网站时，它会显示一条消息，例如（“呆在那里......你真的想离开吗？”）。我该怎么做？该网站位于网络浏览器中，我无法禁用 javascript，因为我需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:55:50.400

The code "do you really want to leave?" confirmation message is triggered on the `window.onbeforeunload` event. So you could add a javascript to the page which would overwrite that confirmation:

```
window.onbeforeunload = function () {}; 
```

To Register the javascript, use the `ClientScript.RegisterClientScript` method (can be added in your `Page_Load` :

```
Page.ClientScript.RegisterStartupScript(Me.GetType(), "BeforeUnloadScript", "window.onbeforeunload = function () {};", True); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T19:51:24.290

如果我理解正确，这是一个桌面应用程序，您需要将 javascript 注入 webbrowser 控件。您可以扩展现有的 webbrowser 控件，或者在 document_complete 中执行类似的操作： [如何在 WebBrowser 控件中注入 Javascript？](https://stackoverflow.com/questions/153748/how-to-inject-javascript-in-webbrowser-control)

如果它是弹出窗口调用的函数，则需要注入 window.onbeforeunload（取决于您浏览的站点）。

# biztalk - 使用 BizTalk 2006 SQL 适配器汇集多条消息

> ID：13016885
> 
> 赞同：1
> 
> 时间：2012-10-22T17:49:47.093
> 
> 标签：biztalk, biztalk2006r2

我有一个 StoredProcedure，它返回一个包含多条记录的简单表：

> DECLARE @STEPS_TABLE AS TABLE (OrchestrationID uniqueidentifier, [Message] nvarchar(1000));
> 
> -- 在此处加载值
> 
> SELECT * FROM @STEPS_TABLE 作为 XML AUTO、XMLDATA、ELEMENTS 的步骤

我使用 SQL 传输模式生成向导来创建我的模式并且可以正确配置端口。如果我在编排中使用此架构，它会完美运行。每次@STEPS_TABLE 有超过 1 条记录时，BizTalk 都会启动一个业务流程实例。

阅读 Microsoft 技术文档，他们建议在一次调用中获取多条消息，然后使用 XML 管道将多行 BizTalk 消息分解为单行 BizTalk 消息。

我以前没有使用过 XML 管道，所以我尝试了提供的步骤，但无法让它工作。

有人可以给我一个“如何做”的链接（经过几个小时的搜索，直到现在才找到任何东西）或者给我一些成功的提示。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:57:58.630

......几个小时后，我可以自己弄清楚。因此，如果有人遇到与我相同的问题，这里有一些指导方针可以让它在你的环境中工作。

最后，我遵循了 Microsoft 的不同演练，完全避免了管道推荐。我找到的文档称为“使用 SQL 适配器反汇编结果集”，并且完全符合我的要求。您可以按照 Microsoft 的整个演练，但避免创建发送端口并对接收端口进行一些小调整。

在遵循技术文档之后，您最终会得到两个模式，为了这个练习，我将它们称为消息和信封（包含几条消息）。在您的编排中，您可以创建一个映射到消息的接收端口，然后当您将其配置为 SQL 端口并将其链接到您的存储过程（或选择语句）时，您只需将文档根元素名称更改为信封根名称；XML 接收管道（在 BizTalk 2006 中默认提供）将分解包含在信封中的消息并为每条消息实例化一个业务流程。

Microsoft“使用 SQL 适配器反汇编结果集”演练可在以下位置找到：

[http://msdn.microsoft.com/en-us/library/aa562098(v=bts.20).aspx](http://msdn.microsoft.com/en-us/library/aa562098(v=bts.20).aspx)

任务完成 ：）

# javascript - 哪些代码质量/代码覆盖率工具可用于检查 Jasmine 中的 Javascript 测试？

> ID：13016890
> 
> 赞同：1
> 
> 时间：2012-10-22T17:50:16.437
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, tdd, jasmine

Jasmine 有哪些代码质量/代码覆盖率工具可用？

在 Rails 3.2.2 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:13:57.083

您可以结合使用[JsTestDriver](http://code.google.com/p/js-test-driver/wiki/CodeCoverage)和[这个 Jasmine 适配器](https://github.com/ibolmo/jasmine-jstd-adapter)来获取覆盖率指标。

[JSCoverage](http://siliconforks.com/jscoverage/)是一个基于 C 的工具，您可以从命令行中带外运行。

[JesCov](https://github.com/jescov/jescov)是一个支持 Jasmine 的 Java 解决方案。您可以从命令行运行它，因此如果系统具有 JRE，那么与 Rails 集成应该相当简单：

`java -jar jescov-0.0.1.jar one.js two.js three.js`

几个月前，我为一个 Grails 项目调查了 JesCov，但从未真正尝试过，所以如果你尝试的话，我很想听听你的经验。

# signalr - 可以使用 SignalR 流式传输视频吗？

> ID：13016894
> 
> 赞同：25
> 
> 时间：2012-10-22T17:50:30.803
> 
> 标签：signalr, signalr-hub, signalr.client

好吧，我正在尝试对视频流进行证明，我正在使用 asp.net c#。我有点迷茫，你有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-04-24T16:07:04.387

我在 SignalR 之上实现了视频流。[您可以在http://weblogs.asp.net/ricardoperes/archive/2014/04/24/video-streaming-with-asp-net-signalr-and-html5.aspx](http://weblogs.asp.net/ricardoperes/archive/2014/04/24/video-streaming-with-asp-net-signalr-and-html5.aspx)找到我的示例。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-23T01:12:47.450

不，SignalR 基于仅流式传输基于文本的 JSON 消息的标准（WebSockets、LongPolling、ForeverFrame 等）。您可能最好查看[WebRTC 规范](http://en.wikipedia.org/wiki/WebRTC)。现在，您可以通过使用 SignalR 发送控制消息来将这两种技术结合在一起，该消息会触发一些 JavaScript，从而更改浏览器当前显示的 WebRTC 提要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-01-20T11:55:42.117

是的，最新版本的 SignalR 核心支持[流式传输](https://docs.microsoft.com/en-us/aspnet/core/signalr/streaming?view=aspnetcore-6.0)。Microsoft 提供的
一些[示例。](https://github.com/dotnet/AspNetCore.Docs/tree/live/aspnetcore/signalr/streaming/samples)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-31T09:52:53.913

我不知道 SignalR 是否旨在处理视频流，但 SignalR 是客户端到客户端客户端到服务器和服务器到客户端之间的集线器容器。如果我想要视频聊天，为什么我不能将它用作我的中心？无论如何，SignalR 也可以处理字节数组，而不仅仅是字符串，然后让我们尝试将每个帧作为字节 []（流）发送。至少当我只使用 .Net 时，我可以集线器字节 []。当我输入 Python 时，我需要使用 base64 序列化为字符串，它也可以从我的 PI 中工作。关注我推入 GIT 的实验室解决方案。[https://github.com/Guille1878/VideoChat](https://github.com/Guille1878/VideoChat)

**SignalR Hub（默认，非无服务器）**

```
namespace ChatHub
{
    public interface IVideoChatClient
    {
        Task DownloadStream(byte[] stream);
    }

    public class VideoChatHub : Hub<IVideoChatClient> 
    {
        public async Task UploadStream(byte[] stream)
        {
            await Clients.All.DownloadStream(stream);
        }
    }
} 
```

**视频发送者：（UWP）**

```
while (isStreamingOut)
{
      var previewProperties = mediaCapture.VideoDeviceController.GetMediaStreamProperties(MediaStreamType.VideoPreview) as VideoEncodingProperties;

      VideoFrame videoFrame = new VideoFrame(BitmapPixelFormat.Bgra8, (int)previewProperties.Width, (int)previewProperties.Height);

      Var frame = await mediaCapture.GetPreviewFrameAsync(videoFrame)

      if (frame == null)
      {
            await Task.Delay(delayMilliSeconds);
            continue;
      }

      var memoryRandomAccessStream = new InMemoryRandomAccessStream();
      var encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.JpegEncoderId, memoryRandomAccessStream);
      encoder.SetSoftwareBitmap(frame.SoftwareBitmap);  
      encoder.IsThumbnailGenerated = false;
      await encoder.FlushAsync();

      try
      {
             var array = new byte[memoryRandomAccessStream.Size];
             await memoryRandomAccessStream.ReadAsync(array.AsBuffer(), (uint)memoryRandomAccessStream.Size, InputStreamOptions.None);

             if (array.Any())
                  await connection.InvokeAsync("UploadStream", array);                   
       }
       catch (Exception ex)
       {
              System.Diagnostics.Debug.WriteLine(ex.Message);
       }

       await Task.Delay(5);
} 
```

**视频接收器：（UWP）**

```
private async void StreamVideo_Click(object sender, RoutedEventArgs e)
{
      isStreamingIn = StreamVideo.IsChecked ?? false;
      if (isStreamingIn)
      {
            hubConnection.On<byte[]>("DownloadStream", (stream) =>
            {
                  _ = this.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
                  {
                       if (isStreamingIn)
                           StreamedArraysQueue.Enqueue(stream);
                  });
             });

             if (hubConnection.State == HubConnectionState.Disconnected)
                  await hubConnection.StartAsync();

              _ = BuildImageFrames();
           }
       }     
}

private async Task BuildImageFrames()
{
      while (isStreamingIn)
      {
            await Task.Delay(5);

            StreamedArraysQueue.TryDequeue(out byte[] buffer);

            if (!(buffer?.Any() ?? false))
                  continue;

            try
            {
                    var randomAccessStream = new InMemoryRandomAccessStream();
                    await randomAccessStream.WriteAsync(buffer.AsBuffer());
                    randomAccessStream.Seek(0); 
                    await randomAccessStream.FlushAsync();

                    var decoder = await BitmapDecoder.CreateAsync(randomAccessStream);

                    var softwareBitmap = await decoder.GetSoftwareBitmapAsync();

                    var imageSource = await ConvertToSoftwareBitmapSource(softwareBitmap);

                    ImageVideo.Source = imageSource;
             }
             catch (Exception ex)
             {
                    System.Diagnostics.Debug.WriteLine(ex.Message);
             }
       }
} 
```

> 我正在使用“SignalR 核心”

# javascript - 将 AJAX 请求从 HTML 发送到 ASPX

> ID：13016897
> 
> 赞同：0
> 
> 时间：2012-10-22T17:50:32.733
> 
> 标签：javascript, asp.net, ajax

我正在尝试将 AJAX 请求从标准 .html 页面发送到 .aspx 页面。我只是想看看这是否可以完成，但我不断收到“状态代码：HTTP/1.1 500 内部服务器错误”。有人告诉我，aspx 不打算以这种方式工作，但可以做到。

我的Javascript：

```
function handleload(e) {
            alert(req.responseText);
        }

        var req = new XMLHttpRequest();
        req.open('POST', 'helloworld.aspx' , true);
        req.addEventListener('error', function(e) {console.log(e)}, false);
        req.addEventListener('load', handleload, false);
        req.send(); 
```

我的 aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true"
CodeFile="helloworld.aspx.cs" Inherits="helloworld" %> 
```

我的 aspx.cs 页面：

```
using System;

public partial class helloworld : System.Web.UI.Page
{
    public void Page_Load()
    {
        Response.ContentType = 'text/html';
        Response.Write("Hello World!")
        Response.End();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:53:52.257

> I was told that aspx is not intended to work this way, but that it can be done.

While probably not the ideal way to make an AJAX call to a .NET stack, this is not true.

I recommend debugging your server-side code to see why it is throwing the 500 error.

# java - 当自定义类加载器加载类时，如何将类包含到运行时环境中？

> ID：13016903
> 
> 赞同：0
> 
> 时间：2012-10-22T17:50:45.377
> 
> 标签：java, classloader

我确信这对大多数 java 程序员来说似乎很明显——我“认为”我知道答案，但我的问题是我需要使用自定义类加载器。我想使用自定义类加载器，并且仍然能够像使用任何包含的类一样在我的代码中使用这些类。

例子：

```
// returns my class loader -- set earlier on the thread.
ClassLoader cl = Thread.currentThread().getContextClassLoader();
Class loadedVersion = Class.forName("org.example.MyClass"); // works
// loadedVersion's class loader is also equal to cl

// generates "java.lang.NoClassDefFoundError" at runtime on the following line
org.example.MyClass m = new org.example.MyClass(); 
```

我将如何着手这样做，以便我可以使用自定义类加载器加载类，并且仍然能够在编辑器中“简单地”使用我的类？

编辑：修改后的标题具有误导性——类*加载*得很好。如我原来的帖子所示。我的理解是，问题是我目前无法在常规声明语句中使用这些类（在编辑器中，就像我使用任何 java.* 类一样）。

**更新，我希望这能更好地解释我正在尝试做的事情。**

```
// set the thread's class loader
ClassLoader cloader = new MyClassLoader(); // internal mess to load bytecode omitted
Thread.currentThread().setContextClassLoader(cloader);

// This works:
Method m = cloader.loadClass("my.SuperClass").getMethod("doStaticMagic", new Class<?>[] {});
m.invoke(null, null);

// This does not work:
my.SuperClass.doStaticMagic(); // NoClassDefFoundError 
```

这就是“问题”。我想在编辑器中“简单地”使用我的课程（我真的不知道正确的词）。我不想加载每个单独的方法——这不是类加载器的用途吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:56:05.043

如果您在类路径上只有接口并通过类加载器或其他方式加载实现会更好，如下面的代码所示：

```
Class loadedVersion = Class.forName("org.example.MyClass"); 

IMyClass m = (IMyClass)loadedVersion.newInstance(); 
```

其中 IMyClass 是由`org.example.MyClass`. 通过这种方式，您可以将类的实现与客户端代码完全分离

**编辑**

`NoClassDefFoundError`当您在初始化静态变量或执行静态块初始化程序时出现异常时也会出现。检查你的课程，也许它会抛出这样的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:58:46.703

我认为您想使用[newInstance() 方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance%28%29)。由于您有“Class loadedVersion”，您可以使用它来调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:41:32.740

这是我对原始问题的解决方案（答案）。我仍然不认为这是理想的，但这确实有效。

我创建了一个“引导”应用程序，它首先加载所有自定义的 3rd 方 jar，然后加载并调用我的应用程序类。通过这种方式，我可以获得第 3 方 jar 的自动完成和来源提示。

我希望这对某人有所帮助，或邀请进一步的评论。

# c# - 如何在 ac# 服务器（WinRT/Metro）和 android 客户端之间进行通信？

> ID：13016904
> 
> 赞同：0
> 
> 时间：2012-10-22T17:50:46.890
> 
> 标签：c#, java, android, microsoft-metro

我正在寻找一种在 android 和 C# 2012 之间通过 TCP 或 HTTP 进行通信的方法。这是我到目前为止所拥有的

JAVA客户端：

```
package com.example.test;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView tc;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn = (Button)this.findViewById(R.id.button1);
        tc = (TextView) this.findViewById(R.id.textView1);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                Thread th = new Thread(new Runnable() {

                    public void run() {
                        connect();
                    }

                });
                th.start();
            }

        });

    }

    private void connect() {

        InetAddress[] server;
        try {
            server = InetAddress.getAllByName("192.168.1.100");

            Socket socket = new Socket(server[0], 3975);

            if (socket.isConnected()){
                Log.d("connected", "connected");
            }

            PrintWriter w = null;
            BufferedReader r = null;

            w = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 
            r = new BufferedReader(new InputStreamReader(socket.getInputStream()));                

            w.println("test");
            /*String m = null;

            while ((m=r.readLine())!= null) {
                w.write(m,0,m.length());
                w.flush();
             }*/

        } catch (Exception e) {
            // TODO Auto-generated catch block
            Log.d("error", e.getMessage());
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

C# 服务器：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

/// <summary>
/// Invoked when this page is about to be displayed in a Frame.
/// </summary>
/// <param name="e">Event data that describes how this page was reached.  The Parameter
/// property is typically used to configure the page.</param>
protected override void OnNavigatedTo(NavigationEventArgs e)
{

}

public async void ServiceButtonClick(object sender, RoutedEventArgs e)
{

    StreamSocketListener listener = new StreamSocketListener();
    listener.ConnectionReceived += OnConnection;

    try
    {
        await listener.BindServiceNameAsync("3975");
        lblMessage.Text = "We are listening for connections...";
    }
    catch (Exception ee)
    {
        lblMessage.Text = "Unable to bind service.. " + ee.Message;
    }
}

private async void OnConnection(StreamSocketListener sender, StreamSocketListenerConnectionReceivedEventArgs args)
{

    DataReader reader = new DataReader(args.Socket.InputStream);

    this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
    {
        lblMessage.Text = "We are connected to the client";
    });

    try
    {
        while (true)
        {
            uint sizeFieldCount = await reader.LoadAsync(sizeof(uint));
            if (sizeFieldCount != sizeof(uint))
            {
                this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
                {
                    lblMessage.Text = "the underlying socket was closed before we were able to read the whole data - 1";
                });
                return;
            }
            uint stringLength = reader.ReadUInt32();
            uint actualStringLength = await reader.LoadAsync(stringlength);
            if (stringLength != actualStringLength)
            {
                this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
                {
                    lblMessage.Text = "the underlying socket was closed before we were able to read the whole data - 2";
                });
                return;
            }

            string temp;
            temp = reader.ReadString(actualStringLength);

            this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                lblMessage.Text = "Client said - " + reader.ReadString(3);
            });

        }

    }
    catch (Exception e)
    {
        this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
        {
            lblMessage.Text = "ERROR: " + e.Message + " - " + e.Source + " - " + e.StackTrace;
        });
    }

} 
```

}

现在，当我单击客户端上的按钮时，套接字已连接，但是当我从手机向 C# 服务器发送数据时，服务器上没有显示任何内容。我在接收端或发送端做错了什么吗？我只是想通过 TCP 发送基本字符串。

# windows - 在 Windows R 中设置主目录

> ID：13016907
> 
> 赞同：10
> 
> 时间：2012-10-22T17:51:01.407
> 
> 标签：windows, r, directory

> **可能重复：**
> [更改 path.expand 位置（Win 7）](https://stackoverflow.com/questions/11004531/change-path-expand-location-win-7)

我想更改在`path.expand("~/")`Windows 系统上引用的目录。目前，默认情况下会转到“C:/Users/home/Documents/”。如何改变这一点？请注意，这与设置的工作目录不同`setwd()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T17:55:46.843

您可以通过将 R_USER 变量添加到您的 Rprofile.site 文件来更改此设置。

```
Sys.setenv(R_USER="/my/desired/path/to/tilde") 
```

这不适用于 linux 系统。查看相关问题：[How to reset path.expand on tilde](https://stackoverflow.com/questions/11460556/how-to-reset-path-expand-on-tilde)

# html - 如何自动填充在 Fireworks 中创建的文本区域？

> ID：13016908
> 
> 赞同：0
> 
> 时间：2012-10-22T17:51:00.893
> 
> 标签：html, css, html-table, fireworks

我使用 Adob​​e Fireworks 创建了一个标题，并为文本和 html 代码分割了一个区域。在该区域内，我放置了一个搜索栏，但需要它在不扩展的情况下正确适应，因为这会破坏背景。我一直在尝试使用填充父级的 div 标签，但它仍然扩展了该区域。我怎么可能只填满单元格，而不是更多？

```
<td rowspan="2" colspan="4" valign="top" bgcolor="#ffffff">
    *AREA WHERE I WANT TO PLACE CODE WITHOUT EXPANSION*
</td> 
```

搜索栏示例：

```
<td rowspan="2" colspan="4" valign="top" bgcolor="#ffffff">
     <select style="float:left;">
            <option>Option 1</option>
            <option>Option 2</option>
            <option>Option 3</option>
        </select>
            <form style="float:right;">
                <textarea style="width:100%; height=50%; resize:none;" cols="0" rows="0"></textarea>
            </form>
   </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:54:29.793

You can play with the overflow.

Scroll

```
<td rowspan="2" colspan="4" valign="top" bgcolor="#ffffff" style="overflow:scroll;">
    *AREA WHERE I WANT TO PLACE CODE WITHOUT EXPANSION*
</td> 
```

Hide

```
<td rowspan="2" colspan="4" valign="top" bgcolor="#ffffff" style="overflow:hidden;">
    *AREA WHERE I WANT TO PLACE CODE WITHOUT EXPANSION*
</td> 
```

# java - 需要清晰的休眠二级缓存

> ID：13016916
> 
> 赞同：6
> 
> 时间：2012-10-22T17:51:24.403
> 
> 标签：java, hibernate, caching, memcached

我需要对 Hibernate 二级缓存进行一些说明。

1.  hibernate二级缓存是如何工作的？

2.  它是否从在 Java EE 环境中启动的服务器上的实体类中具有 @Cacheable 注释（相对于休眠注释）的表中加载所有数据？

3.  当这些表有更新时，缓存会同步吗？如何同步？

4.  最后一个有什么方法可以让我的 DAO 代码在我感兴趣的某个表上有更新时得到通知？（寻找任何可以密切关注表格更新的听众）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:55:23.530

1.  *hibernate二级缓存是如何工作的？*

    当您的实体被标记为可缓存并且您已配置二级缓存时，hibernate 将在第一次读取后将该实体缓存到二级缓存。

    Hibernate 提供了插入任何遵循 hibernate 规范的缓存实现的灵活性。有关二级缓存和配置选项的更多详细信息，请参阅[Hibernate 手册。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-cache)

2.  *它是否从在 Java EE 环境中启动的服务器上的实体类中具有 @Cacheable 注释（相对于休眠注释）的表中加载所有数据？*

    我认为没有任何配置可以实现这一目标。间接地，您可以通过在启动时读取整个表来实现这一点，这会对系统启动时间产生不利影响。*（我不喜欢这个）*。如果实体在外部被修改，那么休眠将无法同步它，您最终会得到陈旧的数据。

3.  *当这些表有更新时，缓存会同步吗？如何同步？*

    表更新后缓存不会立即更新。获取更新记录的后续调用将进入数据库，hibernate 通过使用会话时间戳在内部实现这一点。

4.  最后一个有什么方法可以让我的 DAO 代码在我感兴趣的某个表上有更新时得到通知？（寻找任何可以密切关注表格更新的听众）。

    不，休眠不支持这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:46:29.210

1.  这是一个太宽泛的问题，无法在这里回答。

2.  不，它懒惰地填充缓存。每次从数据库中获取可缓存实体时，使用休眠 API 或查询，该实体都会存储在缓存中。稍后，当`session.get()`使用缓存中实体的 ID 调用时，不需要进行数据库查询。

3.  如果通过 Hibernate 进行更新，则更新缓存。如果它是使用外部应用程序、SQL 查询，甚至是批量更新 HQL 查询完成的，那么缓存将不知道更新。这就是为什么您需要注意使哪些实体可缓存，选择哪些生存时间等。有时，返回陈旧值没有问题，有时它是不可接受的。

4.  不。

# python - 在一行中排序数字

> ID：13016918
> 
> 赞同：9
> 
> 时间：2012-10-22T17:51:27.280
> 
> 标签：python, string, sorting

我们在这样的字符串中有数字：

```
numbers = "1534423543" 
```

我们想要对此进行排序并返回：

```
"1,2,3,4,5" 
```

（只有唯一的数字！）

如何在一行中做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-22T17:52:27.897

用于`set()`获取独特的项目，然后使用对其进行排序`sorted()`，最后使用`",".join()`

```
In [109]: strs="1534423543"

In [110]: ",".join(sorted(set(strs)))
Out[110]: '1,2,3,4,5' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T17:56:02.190

Ashwini 的答案就在每个人的指尖——如果您准备进口，您可以...

```
from itertools import groupby; ','.join(k for k, g in groupby(sorted(nums))) 
```

这*几乎*是一行:)

# php - 从 Apache 迁移后 IIS7 上的链接错误

> ID：13016926
> 
> 赞同：0
> 
> 时间：2012-10-22T17:51:49.893
> 
> 标签：php, mysql, apache, iis-7

我将 PHP 应用程序从 Apache 迁移到 IIS7，所有链接都是从包含路径目录的 MySQL 表记录中加载的。我的 PHP 代码和 MySQL 数据库具有相同的结构。但是，当我单击链接时，PHP 代码不会执行，它只适用于我的主页。我收到以下错误：

> HTTP 错误 404.0 - 未找到
> 您要查找的资源已被删除、名称已更改或暂时不可用。

这是 IIS 配置问题吗？

> 这是主页：

```
<ul>                  
<?php
echo $class->menu->topmenu( $patharray[0] ) ?>                                        
</ul> 
```

> 以下是链接：

```
function topmenu ( $path = 'home' )
    {
        $home = $this->fetchOne ( $this->query( "SELECT * FROM admin_menu WHERE parent = 0" ) ) ;
        $links = $this->fetch ( $this->query ( "SELECT admin_menu.*, aus.value FROM admin_menu LEFT JOIN admin_user_status aus ON ( aus.id = admin_menu.status ) WHERE parent = 1 AND active ='yes'  ORDER BY sort ASC" ) ) ;

        if ( $links )
            foreach ( $links as $key => $link )
            {

                if ( $key == 0)
                    $url = '/';

                else 
                    $url = $link->url;

                //if ( $link->priv == 'open' || ( $link->priv == 'private' && $this->userinfo->status == 225 ) )
                if( $this->check_user_priv( $link ) )
                {
                    if( stripos( $link->url, $path ) === false )
                        $result .= "<li class='mainlevel'><a href='$url'  >$link->text</a></li>" ;
                    else 
                        $result .= "<li class='mainlevel'><b><a href='$url'  >$link->text</a></b></li>" ;
                }

            }

return $result; 
} 
```

> 上面的 url 链接是从表中加载的，但是当我单击它们时，我得到 HTTP 错误 404.0 - 未找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:46:28.773

> 我通过将 Apache mod_rewrite 规则导入 IIS 7 中的 URL 重写模块解决了我的问题。我从 Apache 的迁移具有需要为 web.config 转换的 .htaccess 规则。我希望这对其他人有帮助。

# cordova - PhoneGap destinationType 属性返回不正确的文件 uri

> ID：13016927
> 
> 赞同：1
> 
> 时间：2012-10-22T17:51:52.040
> 
> 标签：cordova, sencha-touch-2

我在应用程序上使用 PhoneGap + Sencha Touch。我设法拍照并上传到服务器。我在从照片库中选择图片时遇到问题。

```
selectPicture: function () {
    navigator.camera.getPicture(this.uploadPicture.bind(this), this.getPictureError.bind(this), {
      // camera options
      quality: 50,
      destinationType: navigator.camera.DestinationType.FILE_URI,
      sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
    });
  } 
```

我认为destinationType 属性有问题。在我的 uploadPicture 函数中，imageURI 返回一个目录，如：'content://media/external/images/media/[一些随机数]'。

我认为 imageURI 应该是这样的：'file://storage/sdcard/DCIM/Camera/myimage.jpg'

我尝试使用 window.resolveLocalFileSystemURI ，如果您正在拍照，它可以正常工作，但在选择图片时却不行。这是我想从照片库中选择图片时的代码（我正在使用 sencha touch 2）：

```
selectPicture: function () {
    navigator.camera.getPicture(this.resolveFileURI.bind(this), this.getPictureError.bind(this), {
      // camera options
      quality: 50,
      destinationType: navigator.camera.DestinationType.FILE_URI,
      sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
    });
},

resolveFileURI: function (entry) {
    console.log(entry);
    window.resolveLocalFileSystemURI(entry, this.uploadPicture.bind(this), this.fail.bind(this));
},

uploadPicture: function (entry) {
    console.log(entry.fullPath)
} 
```

根据 logcat，我什至没有进入 resolveFileURI 函数。事实上，我的应用程序崩溃了。logcat中的错误是：

10-23 14:39:24.552: E/AndroidRuntime(2975): 致命异常: main 10-23 14:39:24.552: E/AndroidRuntime(2975): java.lang.RuntimeException: 传递结果失败 ResultInfo{who=null , request=17, result=-1, data=Intent { dat=content://media/external/images/media/584 }} 到活动 {com.dwmobile.android/com.dwmobile.android.AndroidSencha}: java .lang.NullPointerException 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.deliverResults(ActivityThread.java:3141) 10-23 14:39:24.552: E/AndroidRuntime(2975) : 在 android.app.ActivityThread.handleSendResult(ActivityThread.java:3184) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.access$1100(ActivityThread.java:130) 10- 23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1243) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.os.Looper.loop(Looper .java:137) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 10-23 14:39:24.552: E/AndroidRuntime(2975) ): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 java.lang.reflect.Method.invoke(Method.java:511) 10 -23 14:39:24.552: E/AndroidRuntime(2975): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 10-23 14:39:24.552: E/AndroidRuntime(2975 ): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 dalvik.system.NativeStart.main(Native Method) 10 -23 14：39：24.552：E/AndroidRuntime(2975): 由: java.lang.NullPointerException 10-23 14:39:24.552: E/AndroidRuntime(2975): at org.apache.cordova.CameraLauncher.onActivityResult(CameraLauncher.java:453) 10- 23 14:39:24.552: E/AndroidRuntime(2975): 在 org.apache.cordova.DroidGap.onActivityResult(DroidGap.java:823) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android. app.Activity.dispatchActivityResult(Activity.java:5192) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.deliverResults(ActivityThread.java:3137)552: E/AndroidRuntime(2975): 在 android.app.Activity.dispatchActivityResult(Activity.java:5192) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.deliverResults(ActivityThread .java:3137)552: E/AndroidRuntime(2975): 在 android.app.Activity.dispatchActivityResult(Activity.java:5192) 10-23 14:39:24.552: E/AndroidRuntime(2975): 在 android.app.ActivityThread.deliverResults(ActivityThread .java:3137)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:08:10.660

这在Android上是正确的。您可以使用内容 URI 来设置图像源属性。您甚至可以将该 uri 传递给[FileTransfer.upload](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#FileTransfer_upload)。但是，如果您想获得一个真实的文件类型 uri，请将其发送到[window.resolveLocalFileSystemURI](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#LocalFileSystem_resolve_local_file_system_uri_quick_example)，成功回调将为您提供文件路径。

# jquery - 使用 MVC 4 验证实现 Twitter Bootstrap 的任何方法？而不是使用jquery？

> ID：13016929
> 
> 赞同：3
> 
> 时间：2012-10-22T17:52:04.453
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4, twitter-bootstrap

如标题中所述，任何建议将不胜感激。另外，无论如何要知道如何实现 jquery 从下拉列表中发布数据，选中复选框到 MVC 4 服务器端并回复？像，哇用 Twitter Bootstrap 组件实现 System.Web.Mvc.Html 和 System.Web.Mvc.Ajax 库？

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) 没有办法展示如何实现上面提到的那些信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T21:08:07.050

这是一个 HtmlHelper 扩展方法，它将使用 Twitter Bootstrap 错误警报（列出模型错误）。

用途：

```
@Html.ValidationSummaryBootstrap(); 
```

多个模型错误的结果示例：

![多个错误示例](../Images/6c1307fe864d8da556d7201f5341b970.png)

单个模型错误将导致如下所示： ![单个错误示例](../Images/01c747525d64fccda93455ec93d84017.png)

这是代码：（要突出显示字段 - 请参阅此答案的底部）。

```
using System.Linq;

namespace System.Web.Mvc
{
    public static class HtmlExtensionMethods
    {
        /// <summary>
        /// Returns an error alert that lists each model error, much like the standard ValidationSummary only with
        /// altered markup for the Twitter bootstrap styles.
        /// </summary>
        public static MvcHtmlString ValidationSummaryBootstrap(this HtmlHelper helper, bool closeable)
        {
            # region Equivalent view markup
            // var errors = ViewData.ModelState.SelectMany(x => x.Value.Errors.Select(y => y.ErrorMessage));
            //
            // if (errors.Count() > 0)
            // {
            //     <div class="alert alert-error alert-block">
            //         <button type="button" class="close" data-dismiss="alert">&times;</button>
            //         <strong>Validation error</strong> - please fix the errors listed below and try again.
            //         <ul>
            //             @foreach (var error in errors)
            //             {
            //                 <li class="text-error">@error</li>
            //             }
            //         </ul>
            //     </div>
            // }
            # endregion

            var errors = helper.ViewContext.ViewData.ModelState.SelectMany(state => state.Value.Errors.Select(error => error.ErrorMessage));

            int errorCount = errors.Count();

            if (errorCount == 0)
            {
                return new MvcHtmlString(string.Empty);
            }

            var div = new TagBuilder("div");
            div.AddCssClass("alert");
            div.AddCssClass("alert-error");

            string message;

            if (errorCount == 1)
            {
                message = errors.First();
            }
            else
            {
                message = "Please fix the errors listed below and try again.";
                div.AddCssClass("alert-block");
            }

            if (closeable)
            {
                var button = new TagBuilder("button");
                button.AddCssClass("close");
                button.MergeAttribute("type", "button");
                button.MergeAttribute("data-dismiss", "alert");
                button.SetInnerText("x");
                div.InnerHtml += button.ToString();
            }

            div.InnerHtml += "<strong>Validation error</strong> - " + message;

            if (errorCount > 1)
            {
                var ul = new TagBuilder("ul");

                foreach (var error in errors)
                {
                    var li = new TagBuilder("li");
                    li.AddCssClass("text-error");
                    li.SetInnerText(error);
                    ul.InnerHtml += li.ToString();
                }

                div.InnerHtml += ul.ToString();
            }

            return new MvcHtmlString(div.ToString());
        }

        /// <summary>
        /// Overload allowing no arguments.
        /// </summary>
        public static MvcHtmlString ValidationSummaryBootstrap(this HtmlHelper helper)
        {
            return ValidationSummaryBootstrap(helper, true);
        }
    }
} 
```

对于各个字段，我有点懒惰，只是将其编码到视图中（待重构）。

```
<div class="control-group @if (!ViewData.ModelState.IsValidField("UserName")) { @Html.Raw("error"); }">
    <label class="control-label" for="UserName">User name</label>
    <div class="controls">
        <div class="input-prepend input-append">
            <span class="add-on"><i class="icon-user"></i></span>
            @Html.TextBoxFor(x => x.UserName, new { @class = "input-medium", @required = true })
            <input class="btn" type="button" value="Check" />
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-08T06:51:01.113

使用[TwitterBootstrapMvc](https://www.twitterbootstrapmvc.com/)。

对于验证摘要，您可以使用以下语法：

```
@Html.Bootstrap().ValidationSummary() 
```

它将呈现一个警报，其中列出了所有错误，就像 PeteGo 的答案一样。但是，与 PeteGo 的答案相反，对于单个字段，编写如下内容就足够了：

```
@Html.Bootstrap().ControlGroup().TextBoxFor(x => x.UserName) 
```

该助手还负责处理所有不显眼的验证属性。

* * *

免责声明：我是 BMVC 的作者。使用它是 Bootstrap 2 是免费的。对于 Bootstrap 3，它需要许可证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T19:35:32.317

看看这些 Visual Studio 模板。他们使用 MVC4 方式实现验证。这更多是您需要的，但您可以获取他们使用的验证脚本，然后在您自己的项目中使用它。

[Bootstrap脚手架MVC模板](https://github.com/carlosblanco/BootstrapScaffoldMVCTemplates)

BootstrapScaffoldMVCTemplates 旨在与[MVC 4 TwitterBootstrap Starter Layout Page (Razor)](http://visualstudiogallery.msdn.microsoft.com/268d0b05-6ba5-4793-9a10-7d9d2a478881)一起使用。

# .net - 如何根据默认样式创建样式？

> ID：13016932
> 
> 赞同：79
> 
> 时间：2012-10-22T17:52:18.000
> 
> 标签：.net, wpf, xaml, silverlight

如何在 Silverlight 中基于默认样式创建样式？

例如，在 WPF 中，我们将其设为：

```
<Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
  <Setter Property="Margin" Value="2" />
  <Setter Property="Padding" Value="2" />
</Style> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-22T19:19:17.780

几乎相同的。只需减去`x:Type`具有更明确命名的 。

```
<Style TargetType="TextBox" BasedOn="{StaticResource DefaultTextBoxStyle}"> 
```

[文档中的](http://msdn.microsoft.com/en-us/library/system.windows.style.basedon%28v=vs.95%29.aspx)更多信息。PS，如果您需要默认模板，例如 TextBox 通常可以在 CoreStyles.xaml 中找到

如果您在第一次阅读答案时感到困惑，请按照评论中的要求进行附录；

“**您确实需要一个基本样式**，这很容易做到，因为您打算在默认情况下（wpf/uwp 等没有这些）创建像 ToolkitStyles.xaml 这样的文件的应用程序主题中做到这一点、SDKStyles.xaml、CoreStyles.xaml 等...答案中的静态资源名称来自哪里，因为它针对的是最初回答该问题的那一年的 silverlight 版本。”

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-11T13:48:14.883

*仅适用于 Silverlight*：

要根据默认样式创建样式，需要先创建命名样式，然后根据命名样式制作默认样式（[http://weblogs.asp.net/lduveau/silverlight-how-to-inherit-from -an-implicit-style](http://weblogs.asp.net/lduveau/silverlight-how-to-inherit-from-an-implicit-style) )

```
<Style x:Key="DefaultCustomControlStyle" TargetType="local:CustomControl">
    <Setter Property="Padding" Value="2" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:CustomControl">
                <ContentPresenter />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="local:CustomControl" BasedOn="{StaticResource DefaultCustomControlStyle}" /> 
```

如果您使用的是 WPF，则改用原始问题中的代码要简单得多。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-11-12T17:21:20.153

我建议你看看： [https](https://justinmchase.com/2009/05/29/derived-styles-based-on-unnamed-default-styles/) ://justinmchase.com/2009/05/29/derived-styles-based-on-unnamed-default-styles/ 它会像你这样：

```
<Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}"> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-05-13T22:29:18.937

如果我理解正确，您正在寻找 OverridesDefaultStyle

```
<Style TargetType="{x:Type TextBox}">
      <Setter Property="OverridesDefaultStyle" Value="False" />
      <Setter Property="Margin" Value="2" />
      <Setter Property="Padding" Value="2" />
</Style> 
```

# jquery - jquery UI draggable：满足某些条件时控制（暂停）拖动

> ID：13016938
> 
> 赞同：2
> 
> 时间：2012-10-22T17:52:53.223
> 
> 标签：jquery, jquery-ui, draggable

当拖动一个元素时，我正在做一些计算，并且当某个条件匹配时，我希望拖动**暂停**。

我不想触发 mouseup 事件，只是暂停。

我在这个[JS FIDDLE上有一个完美的例子](http://jsfiddle.net/bq7YP/)

请查看容器和矩形列表。我想要实现的与遏制有些相反...

如果我将容器设置为 .draggable_wrapper，那么我的 UL 列表将被限制在里面......我不想要那个

我想要的是，当我拖动列表时，如果列表位置大于零（> 0）暂停向右拖动并只允许向左拖动（所以到负位置）...

我不希望第一个 LI 的左边框到达容器左边框的右侧...

而在另一边完全相同的事情......当向左拖动时......我想在 8\. li 的右边界穿过容器的右边界时停止（这发生在位置 < 小于 -55px 的示例中;

所以让它更具可读性

```
$(....).draggable({
....
drag: function(){
var p_left = $(this).position().left;

if(left > 0) stop_dragging_right, allow only left;
if(left < -55px) sto_dragging_left, allow_only_right;

}); 
```

我怎样才能做到这一点？约束时类似

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T18:08:12.583

您可以使用[offset()获取包装元素的坐标，并通过在](http://api.jquery.com/offset/)[包含](http://api.jqueryui.com/draggable/#option-containment)选项中传递一个数组来提供您自己的包含框：

```
var wrapperOffset = $(".draggable_wrapper").offset();
$('.draggable_wrapper ul').draggable({
    distance: 3,
    axis: "x",
    revert: false,
    scroll: false,
    containment: [
        wrapperOffset.left - 55,
        wrapperOffset.top,
        wrapperOffset.left,
        wrapperOffset.top
    ],
    drag: function(e) {
        $('#posx').val($(this).position().left);
    }
}); 
```

[你会在这里](http://jsfiddle.net/bq7YP/9/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:00:33.380

如果您的条件为假，您可以覆盖被拖动元素的位置并应用相同的位置。

这个小提琴是位置覆盖的一个例子：http: [//jsfiddle.net/QvRjL/74/](http://jsfiddle.net/QvRjL/74/)

这个小提琴是一个例子，你可以如何检查拖动的元素是否靠近容器的边框：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

```
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
}); 

$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Force the helper position

            if(myCondition)
            {
                //The draggable element can be moved
                ui.position.left = window.mouseXPos - $(this).draggable('option','cursorAt').left;
                ui.position.top = window.mouseYPos- $(this).draggable('option','cursorAt').top; 
            }
            else
                return false; //No move allowed
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:05:21.773

可以通过定义可拖动区域的边界来限制/约束可拖动元素的移动。在这里查看 jquery UI[示例](http://jqueryui.com/draggable/#constrain-movement)

您是否有可能有一个外部父级/包含来限制阻力？您可以执行以下操作..

```
$( "#draggable5" ).draggable({ containment: "parent" }); 
```

该父级在两侧扩展，满足您的计算约束..

希望这可以帮助 ..

# sql - 所有可能的组合都未转

> ID：13016939
> 
> 赞同：3
> 
> 时间：2012-10-22T17:52:55.110
> 
> 标签：sql, sql-server-2012

我一直在研究一个我无法弄清楚的问题。我已经尝试过交叉连接、CTE、窗口函数等的不同组合，但永远无法做到。我也不想走动态 SQL 路线。有人可以帮忙吗？

给定一组可变的分组值，垂直产生所有可能的组合（派生组，值）

附加信息：

1.  无论顺序如何，任何 2 个组合都不应具有相同的一组值。示例：如果您已经有 (1,2) 则不产生 (2,1)，如果 (1,2,3) 则不产生 (1,3,2),(2,1,3),(2 ,3,1),(3,1,2),(3,2,1)
2.  同一组的值不应合并
3.  所有值都是唯一的，与组无关。初始分组的唯一原因是应用规则 #2

示例：给定起始组和值

**输入组值**

*   1 8
*   2 7
*   2 9
*   3 1
*   3 6
*   3 3

产生这个输出

**输出组值**

*   1 8
*   2 7
*   3 9
*   4 1
*   5 6
*   6 3
*   7 8
*   7 7
*   8 8
*   8 9
*   9 8
*   9 1
*   10 8
*   10 6
*   11 8
*   11 3
*   12 7
*   12 1
*   13 7
*   13 6
*   14 7
*   14 3
*   15 9
*   15 1
*   16 9
*   16 6
*   17 9
*   17 3
*   18 8
*   18 7
*   18 1
*   19 8
*   19 7
*   19 6
*   20 8
*   20 7
*   20 3
*   21 8
*   21 9
*   21 1
*   22 8
*   22 9
*   22 6
*   23 8
*   23 9
*   23 3

这是生成输出的手动非垂直方法

```
CREATE TABLE #temp1 (GroupID INT, MyValue INT)

INSERT INTO #temp1 (GroupID, MyValue)
VALUES  (1,8),(2,7),(2,9),(3,1),(3,6),(3,3)

--1st set of possibilities
SELECT MyValue
FROM #temp1

--2nd set of possibilities
SELECT a.MyValue, b.MyValue
FROM #temp1 a
JOIN #temp1 b
ON a.GroupID < b.GroupID

--3rd set
SELECT a.MyValue, b.MyValue, c.MyValue
FROM #temp1 a
JOIN #temp1 b
ON a.GroupID < b.GroupID
JOIN #temp1 c
ON b.GroupID < c.GroupID

DROP TABLE #temp1 
```

我的问题是可以有可变数量的起始值考虑到这一点，我的输出需要在分组的垂直集中，所以我只返回 2 列。1 将数字和数字本身组合在一起。对于这个特定示例，应该有 46 行和 23 个不同的组，如上所示

我写了 CTE，我一直在修改并最终报废：

```
WITH    MyCTE
          AS (SELECT    1 AS Level, DENSE_RANK() OVER (ORDER BY GroupID, MyValue) AS DgroupID, GroupID, MyValue
              FROM      #temp1
              UNION ALL
              SELECT    a.Level + 1, DENSE_RANK() OVER (ORDER BY b.GroupID, b.MyValue), b.GroupID, b.MyValue
              FROM      MyCTE a
              JOIN      #temp1 b
                        ON a.GroupID < b.GroupID)

SELECT  DENSE_RANK() OVER (ORDER BY Level, DgroupID), MyValue
FROM    MyCTE 
```

这样做的明显问题：

1) 我用来为每一行赋予增量值的窗口函数没有按预期工作。这可能是由于 CTE 的工作方式。对性能好，对我不好。ROW_NUMBER 窗口函数做同样的事情。我要做的就是在每次迭代中自动增加行数，以便在表“未透视”时识别组。我相信 CTE 如此之快的原因是因为它们实际上是基于集合的操作，所以即使存在递归，我也不能依赖循环/迭代的思维模式来产生预期的结果。随时纠正我的所有假设

2) 去中心化。我需要获取一组行并将列转换为行，每个行都保留原始行的标识符以显示它们被组合在一起。SQL Server 有一个名为 UNPIVOT 的绝妙命令，它对我完全没有帮助，因为您需要知道在设计时要取消多少列。这样做的重点是能够提供可变数量的输入并产生可预测的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:44:51.083

因此，您尝试将所有“Group 1”值与所有“Group 2”值和所有“Group 3”值分组，但要防止重复，如您所说的 ex：1,2 和 2,1。您的手动方法看起来不错，但是我不明白为什么您要比较组，而不是“值”小于先前的值，这样..

```
SELECT a.MyValue, b.MyValue
FROM #temp1 a
JOIN #temp1 b
ON a.MyValue < b.MyValue AND a.GroupID <> b.GroupID

--3rd set
SELECT a.MyValue, b.MyValue, c.MyValue
FROM #temp1 a
JOIN #temp1 b
ON a.MyValue < b.MyValue AND a.GroupID <> b.GroupID 
JOIN #temp1 c
ON b.MyValue < c.MyValue AND a.GroupID <> c.GroupID AND b.GroupID <> c.GroupID 
```

根据您的反馈，上述调整应该有效，只是需要额外的肌肉，因为它必须渗透到第 1 组、第 2 组以及第 2 组、第 1 组，因为第 1 组可能存在于第 2 组中，但第 1 组有5 的低数字。如果您始终使 a.Group 小于 b.Group，则您永远不会在第 2 个位置获得值 1，因为第 2 组大于第 1 组。

这对你的场景有意义吗？

# c# - ASP.Net MVC4 成员资格

> ID：13016940
> 
> 赞同：4
> 
> 时间：2012-10-22T17:53:00.570
> 
> 标签：c#, asp.net-mvc

我刚刚开始学习 ASP.NET MVC(4)。为了练习目的，我从一个微博项目开始。所以它显然会有用户数据库。当我创建 ASP.Net MVC4 项目时，它附带了已经存在的 Membership 模块（AccountsController.cs、AccountModel.cs 和查看文件）。

我现在没有数据库，所以我将使用带有设计/模型优先方法的 EF。我尝试使用数据库创建示例应用程序。当我注册一个用户（使用 Asp.Net MVC4 提供的注册页面）时，我在我的数据库中看不到任何用户表。我想知道包含用户、用户角色信息的表在哪里。我在我的数据库中找不到它。

还有一件事，我应该使用 MVC4 身份验证还是为用户创建一个新表？

请帮我解决这个问题..

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:47:07.707

默认的 ASP.NET MVC 4“Internet 应用程序”项目模板带有一些默认的成员资格功能。如果您搜索并更新以下行，则将在您的数据库中创建 Membership 表（如果它们尚不存在）：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

更多信息在这里：

[http://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html](http://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:00:22.077

MVC 4 默认使用 SimpleMembership，它使用您的计算机 machine.config 中指定的默认 LocalSqlServer 连接字符串。这会在项目的 App_Data 目录中的数据库中创建数据。

# linux - 如何使用netlink监控用户空间deamon中的内核arp表？

> ID：13016941
> 
> 赞同：1
> 
> 时间：2012-10-22T17:53:01.740
> 
> 标签：linux, sockets, netlink

我知道我们可以使用带有 RTM_F_NOTIFY 标志的 'NETLINK_ROUTE' 套接字来通知用户是否根据 RFC3549 更改路由。但是我找不到一种在 arp 表更改时通知用户的方法。

PS：我用的是linux内核3.0.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-16T09:21:12.617

一个应该使用`NETLINK_ROUTE`套接字和`bind()`组`RTNLGRP_NEIGH`。

之后，可以通过 获取`ndmsg`通知`recv()`。请注意，必须使用所有通知，否则套接字将在溢出后引发`ENOBUF`异常。`recv()`

或使用外部`ip(8)`实用程序：

```
$ ip monitor all    # get all the notifications
$ ip monitor neigh  # get only arp notifications 
```

或者使用 Python[库](https://github.com/svinota/pyroute2)：

```
from pyroute2 import IPRoute
from pprint import pprint

ip = IPRoute()
ip.bind()  # subscribe to all the events
while True:
    pprint(ip.get()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-15T09:11:59.883

如果我理解你的话 - 我建议你分析“ip”程序的来源。当您运行“ip monitor”并添加或删除任何 ARP 条目时，“ip monitor”将向您显示相应的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T05:21:37.970

我不知道纯 arp 通知，但您可以使用在用户空间中运行的 arpd，它适用于 arp 表非常大的情况。如果您使用 arpd 并对其进行修改，则可以使其向您发送有关 arp 表更改的通知。

# haxe - 检查类的属性和类型

> ID：13016946
> 
> 赞同：2
> 
> 时间：2012-10-22T17:53:19.087
> 
> 标签：haxe

得到一个类，该类带有一个方法，该方法接受一个对象并循环遍历它，将对象的值分配给该类。这可能在应用程序中发生相当多的情况，我想知道是否有一种有效且最好与语言无关的语法来验证对象的属性名称是否存在并在分配给类之前确认值类型？我将需要将此代码至少导出到 flash 和 javascript，以后可能还会用到其他代码。我需要保持方法通用，因为它存在于基类中。大致如下：

```
public function updateProperties(propsObj:Object):void {
  for (var prop in propsObj) {
    if (/* this has prop && typeof propsObj[prop] == typeof this[prop] */) {
      this[prop] = propsObj[prop];
    }
  }
} 
```

Haxe 的新手，所以我在为这类事情找到方法系列时遇到了一些麻烦。反射似乎有接近我正在寻找的方法，但很多方法看起来可能对我需要的东西来说太过分了，希望有一些见识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:34:34.230

这似乎有效。

```
public function updateProperties(props:Dynamic) {
  for (prop in Reflect.fields(props)) {
    if (Reflect.hasField(this, prop)) {
      Reflect.setProperty(this, prop, Reflect.getProperty(props, prop));
    } else {
      trace("cannot set property " + prop + " on " + this);
    }
  }
} 
```

# objective-c - Objective-C - 原始类型的静态字段或 ivar

> ID：13016952
> 
> 赞同：1
> 
> 时间：2012-10-22T17:53:48.697
> 
> 标签：objective-c, static, ivars

我最近陷入了在 ivar 和静态字段之间进行选择的过程中。例如：我需要在红绿灯之间切换。所以我放了一个名为 isRed 的标志。到目前为止，我已经为此目的使用了一个静态布尔值，它的效果很好。现在我想我也可以为此使用实例变量，但我不知道它们之间的区别。这两种方式之间的真正区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:58:17.653

当您知道应用程序中只有一个红绿灯（并且永远会有）时，您可以使用具有静态存储持续时间的变量（您称之为静态字段）。

在几乎所有情况下，最好将状态放入控制状态的类中——即使用 ivar。这种方法称为“面向对象设计”。

# java - 在Java中递归地反转一个句子

> ID：13016956
> 
> 赞同：0
> 
> 时间：2012-10-22T17:54:18.620
> 
> 标签：java, recursion

我想递归地反转一个句子，下面是我的以下代码。我想知道我需要处理哪些其他基本案例。对于基本情况，如果字符串为空，应该如何处理？

```
public String reverse(String s) {
int n = s.indexOf(' ');
if(n == -1)
    return s;
return reverse(s.substring(n+1))+" "+s.substring(0,n);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:00:10.603

`null`is的反面`null`，所以很简单：

```
if(s == null) return null; 
```

因为您的方法有可能返回，所以在引用您的语句中的值并尝试附加到它`null`之前，我还会进行一些空检查。`return`所以，像...

```
String reversed = reverse(s.substring(n+1));
if(reversed != null) return reverse + " " + s.substring(0,n);
else return s; 
```

其他一切看起来都很好。您不需要任何其他基本案例。当然，这将完全按原样反转句子，包括标点符号和大小写信息。如果你想做这种事情，就需要更加费力的处理。

为了确保适当的大写和小写结构，我可能会在您的正常基本情况下做这样的事情：

```
if(n == -1) {
    s = s.toLowerCase();
    String firstLetter = new String(s.charAt(0));
    s = s.replaceFirst(firstLetter, firstLetter.toUpperCase());
    return s;
} 
```

标点符号变得有点复杂，特别是如果你有不止一个结束句号、感叹号或问号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:16:19.930

在您的情况下，如果字符串为空，您可以返回一个空字符串（“”）。返回 null 将要求您在调用函数中处理 null，如果您遗漏了一个案例，您可能会遇到 NullPointerException

# php - 在javascript中的setTimeout中使用php

> ID：13016958
> 
> 赞同：-1
> 
> 时间：2012-10-22T17:54:20.320
> 
> 标签：php, javascript

我在 javascript 函数 setTimeout 中使用我的 php 代码时遇到问题。代码在一个 php 文件中，但它并没有像应有的那样等待五分钟将用户发送到我网站的索引页面，而是立即执行。有任何想法吗？

这是代码：

```
<script>
  setTimeout(function() { <?php header( 'Location: /index.html' ); ?> }, 300000);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:56:41.243

是的。这是因为 PHP 代码首先被执行，因为它是服务器端的。所以你必须修改你的代码：

```
<script>
  setTimeout(function() { window.location.href='/index.html'  }, 300000);
</script> 
```

# linux - Grep Syntax with Capitals

> ID：13016961
> 
> 赞同：0
> 
> 时间：2012-10-22T17:54:32.870
> 
> 标签：linux, bash, grep

I'm trying to write a script with a file as an argument that greps the text file to find any word that starts with a capital and has 8 letters following it. I'm bad with syntax so I'll show you my code, I'm sure it's an easy fix.

```
grep -o '[A-Z][^ ]*' $1 
```

I'm not sure how to specify that:

a) it starts with a capital letter, and

b)that it's a 9 letter word.

Cheers

EDIT:

As an edit I'd like to add my new code:

```
while read p
do
echo $p | grep -Eo '^[A-Z][[:alpha:]]{8}'
done < $1 
```

I still can't get it to work, any help on my new code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:19:35.247

`'[A-Z][^ ]*'`将匹配 A 和 Z 之间的一个字符，后跟零个或多个非空格字符。所以它会自己匹配任何 AZ 字符。

用于`\b`指示单词边界和大括号内的*量词*，例如：

```
grep '\b[A-Z][a-z]\{8\}\b' 
```

如果您刚刚这样做`grep '[A-Z][a-z]\{8\}'`，则将匹配（例如）“aaaaHellosailor”。

我使用`\{8\}`，大括号需要转义，除非你使用`grep -E`，也称为`egrep`，它使用扩展正则表达式。您正在使用的Vanilla`grep`使用基本正则表达式。另请注意，这`\b`不是标准的一部分，但通常受支持。

如果你`^`在开头和`$`结尾都使用，那么它不会在“威尔特郡猪做伟大的香肠”中找到“威尔特郡”，它只会找到*仅*由 9 个字符的代词组成的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:59:37.750

这对我有用：

```
$ echo "one-Abcdefgh.foo" | grep -o -E '[A-Z][[:alpha:]]{8}'
$ echo "one-Abcdefghi.foo" | grep -o -E '[A-Z][[:alpha:]]{8}'
Abcdefghi
$ 
```

请注意，这不处理扩展名或前缀。如果您想强制输入为 9 字母大写单词，我们需要更明确：

```
$ echo "one-Abcdefghij.foo" | grep -o -E '\b[A-Z][[:alpha:]]{8}\b'
$ echo "Abcdefghij" | grep -o -E '\b[A-Z][[:alpha:]]{8}\b'
$ echo "Abcdefghi" | grep -o -E '\b[A-Z][[:alpha:]]{8}\b'
Abcdefghi
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:22:10.333

I have a test file named 'testfile' with the following content:

```
Aabcdefgh
Babcdefgh
cabcdefgh
eabcd 
```

Now you can use the following command to grep in this file:

```
grep -Eo '^[A-Z][[:alpha:]]{8}' testfile 
```

The code above is equal to:

```
cat testfile | grep -Eo '^[A-Z][[:alpha:]]{8}' 
```

This matches

```
Aabcdefgh
Babcdefgh 
```

# ruby-on-rails - "Unsubscribe" for email categories/types through Sendgrid, Mailchimp, SES

> ID：13016965
> 
> 赞同：3
> 
> 时间：2012-10-22T17:55:17.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email

I've got a Rails 3.2 app that will need to send various transactional & bulk (marketing) types of emails. Ideally I'd be able to use a service (like Sendgrid or Amazon SES) to improve deliverability and for unsubscribe support. I've mostly used Sendgrid in the past, but I need the 'unsubscribe' to be just for a specific category of the email (there are around 6 categories). I can't have someone unsubscribing from a marketing email and miss out on notification or invitation emails. Does anyone know of an service that supports this, or does this just have to be done internally? It seems like there's a lot to deal with related to best practices for deliverability, list-unsubscribe, etc. if you manage it yourself.

I see this discussion on sendgrid, but seems to be pending still: [http://community.sendgrid.com/sendgrid/topics/unsubscribe_and_categories](http://community.sendgrid.com/sendgrid/topics/unsubscribe_and_categories)

I'm happy to go with any service if it integrates relatively easily with Rails and can support category/type based subscription management. Or perhaps a hybrid approach with different services or separate accounts on the same service, if they allow that for the same domain?

I very much appreciate any feedback on how others have tackled this.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:31:02.107

SendGrid 目前正在开发此功能，我们希望尽快推出。目前还没有发布此功能的确切时间，但听起来这正是您正在寻找的。查看 SendGrid 的博客，它将在此功能可用于 beta 测试时更新。

[http://www.sendgrid.com/blog](http://www.sendgrid.com/blog)

谢谢布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:26:23.593

看起来 CritSend(1) 有他们所谓的“标签”支持，并[在他们的网站上](http://www.critsend.com/compliance/)声明以下内容：

> 我们的取消订阅处理是按标签完成的，因此，如果有人取消订阅您的一封标记为“newsletter1”的电子邮件，并且不会取消订阅任何其他标签。

不清楚的一件事是 Ruby 支持的级别。

CritSend 名称 MxmConnect 作为用于发送电子邮件的 gem。CritSend 事件 API有一个[critsend_events](https://github.com/cutalion/critsend_events) gem。

(1) 注意，我与 CritSend 没有隶属关系

# php - php and html form input

> ID：13016969
> 
> 赞同：-3
> 
> 时间：2012-10-22T17:55:39.420
> 
> 标签：php, html, forms

i have a php code like this

```
<html>
<body>
<center>
<FORM action=""  method="post">
<input type="hidden" name="form_action" value="1">
<table border=1>
<tr><td>test post</td><td><input type="text" size="60" name="post" value="http://site.com/"></td></tr>
</table>
<br>
<INPUT class=submit type="submit" value="[SUBMIT]" name="Submit">
</FORM>
</center>
</body>
</html>
<?
if ($_POST['form_action']) {

print_r($_POST['post']);
}
?> 
```

i want to print the form post when Some one press the submit button.Where is the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:59:24.940

尝试：

```
<?
if (isset($_POST['form_action'])) {

echo($_POST['post']);
}
?> 
```

isset 看起来是否定义了变量/键。

这应该有效。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:26:40.080

这肯定会工作..

但我认为你应该付出更多的努力自己解决这些愚蠢的问题..!! :-)

```
<?php
if ( isset($_POST['form_action'])) {

print_r($_POST['post']);
exit;
}

print '
<html>
<body>
<center>
<FORM action=""  method="post">
<input type="hidden" name="form_action" value="1">
<table border=1>
<tr><td>test post</td><td><input type="text" size="60" name="post"     value="http://site.com/"></td></tr>
</table>
<br>
<INPUT class=submit type="submit" value="[SUBMIT]" name="Submit">
</FORM>
</center>
</body>
</html>';

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:06:22.727

该代码可以工作。

当表单还没有发布时，这一行可能会出错，但它在底部，所以应该已经生成了 HTML 表单。

```
if ($_POST['form_action']) 
```

您可以将其更改为

```
if (array_key_exists('form_action', $_POST)) 
```

这将更正检查。

之后，表单应该可以工作，但请注意表单将在每次请求时再次生成，并且您的实际输出`print_r`位于输出的底部。因为它在 html 正文之外，它可能会呈现在页面底部，也可能根本不呈现。

当您查看页面的源代码时，您应该能够看到输出。

# android - APK expansion file onFinishDownload

> ID：13016971
> 
> 赞同：2
> 
> 时间：2012-10-22T17:55:44.113
> 
> 标签：android, messages, expansion, messenger

I have this code with wich I download **APK expension file**

```
private void performAPKExpansionCheckAndDownload(){
        String APK_LOG = "APK_LOG";
        String mainFileName = Helpers.getExpansionAPKFileName(this, true, 2);
        Log.d(APK_LOG,"mainFileName  "+mainFileName);
        boolean fileExists = Helpers.doesFileExist(this, mainFileName, 38783430L, false);
        Log.d(APK_LOG,"fileExists  "+fileExists);
        if (!fileExists) {
            Intent launcher = getIntent();
            Intent fromNotification = new Intent(this, getClass());
            fromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
            fromNotification.setAction(launcher.getAction());
            if (launcher.getCategories() != null) {
                for (String cat : launcher.getCategories()) {
                    Log.d(APK_LOG,"cat  "+cat);
                    fromNotification.addCategory(cat);
                }
            }
            PendingIntent pendingIntent = PendingIntent.getActivity(
                    this, 0, fromNotification, PendingIntent.FLAG_UPDATE_CURRENT);
            try {
                int result = DownloaderClientMarshaller.startDownloadServiceIfRequired(
                        this, pendingIntent, MyDownloaderService.class);
                Log.d(APK_LOG,"result  "+result);
                if (DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED != result) {
                    // implement Downloading UI.
                    return;
                }
            } catch (NameNotFoundException e) {
                Log.e("apk-expansion-files", "NameNotFoundException occurred. " + e.getMessage(), e);
            }
        }
    } 
```

The problem is that I need to handle ***callbacks*** like ***onDownloadFinished*** and ***onProgressUpdate***. I know that thous messages are posted somewhere but I don't know how to handle them. Since I haven't worked with **messages** in **Android** any help would be good.

UPDATE:

All downloading happens here:

```
int result = DownloaderClientMarshaller.startDownloadServiceIfRequired(
                         this, pendingIntent, MyDownloaderService.class);
if (DownloaderClientMarshaller.NO_DOWNLOAD_REQUIRED != result) {
    // implement Downloading UI.
    return;
} 
```

I guess those callbacks must be connected to that **DownloaderClientMarshaller** class.

# python - How to convert list of tuple to an array

> ID：13016977
> 
> 赞同：1
> 
> 时间：2012-10-22T17:56:04.530
> 
> 标签：python, numpy

```
new = zero(rows_A,cols_B)
for i in range(rows_A):
    for j in range(cols_B):     
        new[i][j] += np.sum(A[i] * B[:,j]) 
```

If I'm using this form of array `[[0, 0, 0], [0, 1, 0], [0, 2, 1]]` in `B` it is giving me an error

`TypeError: list indices must be integers, not tuple`

but if I'm using same array `B`, in place of `A`, it's working well.

I am getting this type of return array

```
[[0, 0, 0], [0, 1, 0], [0, 2, 1]] 
```

so i want to convert it into this form

```
[[0 0 0]
[0 1 0]
[0 2 1]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:58:50.680

`numpy.asarray`会这样做。

```
import numpy as np

B = np.asarray([[0, 0, 0], [0, 1, 0], [0, 2, 1]]) 
```

这产生

```
array([[0, 0, 0],
       [0, 1, 0],
       [0, 2, 1]]) 
```

可以用 索引`[:, j]`。

此外，看起来您正在尝试做矩阵产品。你可以用一行代码做同样的事情`np.dot`：

```
new = np.dot(A, B) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:59:35.077

看起来这`B`是一个列表。您不能将其索引为`B[:,i]`- 隐含传递给`__getitem__`as `(slice(None,None,None),i)`- 即元组。

您可以`B`先转换为 numpy 数组（`B = np.array(B)`），然后从那里开始......

# php - Is there a maximum to the output of PDO::debugDumpParams?

> ID：13016978
> 
> 赞同：7
> 
> 时间：2012-10-22T17:56:12.287
> 
> 标签：php, mysql, pdo

When using the PDO::debugDumpParams, is there a maximum number of characters the output will show for the "selected" query? After approx 500 characters the query is being ended in the middle of the query, while when outputting the prepare $query variable, the full query is being shown.

Also when removing certain parts of the query, it still show a part and not the full query (what I saw first, minus the part I remove, added a new piece which didn't show before).

Is this a know issue or is this something I can overwrite with the settings?

With kind regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T21:23:19.427

使用以下脚本，我已经能够`$pdoStmt->debugDumpParams()`写出 4000 多个字符。您遇到的 500 的限制似乎不是功能本身的硬限制。也许您编写查询的一项操作限制为 500 个字符？

```
$db = new PDO('mysql:dbname=test;host=localhost', 'user', 'pass');

$stmt = $db->prepare('SELECT ' . implode(', ', array_fill(0, 500, "'test'")));

$stmt->debugDumpParams(); 
```

（这是在 PHP 5.2.11 上。）

# c# - C# How do I make a switch ignore invalid input?

> ID：13016989
> 
> 赞同：0
> 
> 时间：2012-10-22T17:56:51.250
> 
> 标签：c#

I am trying to make a simple console game that starts with a title screen. The user inputs 'N' for a new game, 'L' to load a game, or 'E' to exit. I have this set up as a switch, but I need to know how to make the program ignore any input other than the aforementioned keys. I've Googled this question but didn't find an answer. Please help if you can.

I don't see much point in posting the code as 10 lines of a simple switch probably wouldn't be terribly helpful to solving the problem. Also, if there would be an easier / more efficient way than a switch, I would love to know.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:59:13.427

您可以使用[`default:`语句](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)来处理其他（未知）情况：

```
switch(inputString.ToLower())
{
     case "n":
       // Handle new
       break;
     //.. handle known cases
     default:
         Console.WriteLine("Unknown option chosen.  Please enter valid option:");
         // Re-read values, etc?
         break;
} 
```

在您的其他案例之一中未指定的任何内容都将属于该`default`案例，然后您可以使用它来提示有效输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:03:34.797

如果您想实际忽略除有效键之外的所有键，您可以执行以下操作：

```
public static char ReadKey(IEnumerable<char> validKeys)
{
    var validKeySet = new HashSet<char>(validKeys);
    while (true)
    {
        var key = Console.ReadKey(true);
        if (validKeySet.Contains(key.KeyChar))
        {
            //you could print it out if you wanted.
            //Console.Write(key.KeyChar);
            return key.KeyChar;
        }
        else
        {
            //you could print an error message here if you wanted.
        }
    }
} 
```

当您使用指示时，它将拦截该密钥并且不会将其显示在控制台上`ReadKey(true)`。`true`这使您可以选择确定它是有效的还是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:01:03.940

如果一个`switch`语句没有`default`块，并且如果被打开的表达式不匹配任何`case`块，则该`switch`语句什么也不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:33:28.690

感谢您的回复，伙计们。我设法通过执行以下操作来解决问题：

```
static void titleInput()
    {
        ConsoleKeyInfo titleOption = Console.ReadKey(true);

        switch (titleOption.Key)
        {
            case ConsoleKey.N:
                Console.Clear();
                break;
            case ConsoleKey.L:
                break;
            case ConsoleKey.E:
                Environment.Exit(0);
                break;
            default:
                titleInput();
                break;

        }
    } 
```

我不确定这有多“正确”，但它可以满足我的需要。除了“N”、“L”和“E”之外的任何键都不再执行任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T18:03:22.677

当您只有 3 个案例时，开关并不比简单的`if-else`构造更有效。

```
if (input == "N")
{
    // New game
}
else if (input == "L")
{
    // Load game
}
else if (input == "E")
{
    // Exit game
}
// if none of the cases match, the input is effectively ignored. 
```

如果您坚持使用开关，那么您的构造非常相似：

```
switch (input)
{
    case "N":
        //New Game
        break;
    case "L":
        //Load Game
        break;
    case "E":
        //Exit Game
        break;
    default:
        //Do nothing (ignore unmatched inputs)
        break;
} 
```

# asp.net - Differential validation of a textbox in asp.net webforms

> ID：13016991
> 
> 赞同：0
> 
> 时间：2012-10-22T17:56:58.107
> 
> 标签：asp.net, webforms

I am working on an asp.net webforms project. I have a usercontrol with a boolean public property, named as IsRequired, which can be set either to true or false. I have a text box where the user will enter the social security number (SSN). If IsRequired = true, then the user has to enter the SSN value, otherwise validation should fail and "SSN is required" message should be displayed next to the textbox. If IsRequired = false, then if the user doesn't enter a SSN value, then a messagebox should be displayed with the message, "If you have a SSN, please enter it". Essentially the message encourages the suer to enter SSN. If the click "OK" on the messagebox, then they could enter the value. otherwise they could submit the page, and the validation should not fail.

I am using DevExpress controls, and came up with the following solution:

on ascx page:

```
<dx:ASPxTextBox  ID="SsnTextBox" runat="server" OnValidation="SocialSecurity_Validation">
                <MaskSettings Mask="999999999"></MaskSettings>
            </dx:ASPxTextBox> 
```

on the codebehind:

```
 if (IsSubscriber && (e.Value == null || (string)e.Value == ""))
        {
            SsnTextBox.ErrorText = "Required";
            e.IsValid = false;
        }        
        else if (!IsSubscriber && (e.Value == null || (string)e.Value == ""))
        {
            e.IsValid = true;
            Page.ClientScript.RegisterClientScriptBlock(this.Page.GetType(), "UserControl",
                                                   "confirm('If Social Security Number is available, please enter it!')", true);
        } 
```

The problem with the code it works only partially. For example, the message box is displayed, but when either ok or cancle is clicked, the page is posted without giving the option to enter a value. If IsRequired = true, and a value is not entered, validation fails, still the page gets submitted. Any help to resolve this or a better code is appreciated. The solution need not be DevExpress specific, instead it could a generic one.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:21:18.290

Rather than use the confirm method; which will return either a true or false depending on what the user selects, why not use Alert() instead?

I.E

```
return Alert('If Social Security Number is available, please enter it!') 
```

There won't be a choice for the user - just an OK button. 'return' will also prevent the postback.

# .net - Wpf 用户控件：使复杂的属性可编辑

> ID：13016992
> 
> 赞同：1
> 
> 时间：2012-10-22T17:56:58.920
> 
> 标签：.net, wpf, user-controls

假设你在 wpf 中创建了一个标准的 UserControl 或 CustomControl，然后声明了一个复杂类型的属性

公共 ComplexPropertyType AProperty { 获取；放; }

复杂类型是具有一堆属性的简单类

```
public class ComplexPropertyType 
{
    public int IntP { get; set; }

    public String Strp { get; set; }
} 
```

在设计时 AProperty 不可编辑。

![如您所见，AProperty 属性不可编辑](../Images/71f4056ed075868e75b04112184a476d.png)

我记得 System.ComponentModel 中有一些属性允许我指定使用标准属性编辑器来使该属性可编辑，但我不记得了。

任何人都有一个显然不需要编写自定义属性编辑器的解决方案？毕竟如果我在我的控件中声明一个属性，它是复杂类型 Es 的集合。

公共 ObservableCollection ACollOfProperty { 获取；放; }

设计人员自动使用能够编辑我的复杂类型的 System.ComponentModel.Design.CollectionEditor

![在此处输入图像描述](../Images/d9712447a42d6387dd4c15bc1d9ad1ed.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:03:33.310

在 wpf 中，您可以使用此[http://wpg.codeplex.com/](http://wpg.codeplex.com/)或使用此 [winform contro](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/HostingaWindowsFormsPropertyGridinWPF.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:30:48.143

我能够自己找到属性，是 TypeConverter。您应该使用 TypeConverterAttribute 在用户控件中声明该属性，指定 ExpandableObjectconverter

```
 [TypeConverter(typeof(ExpandableObjectConverter))]
    public ComplexPropertyType AProperty { get; set; } 
```

现在您应该在设计器中看到一个不错的 NEW 按钮，允许您在设计时填充值

![现在属性是可设计的](../Images/295ad8025303410b5efc38cbcb99996d.png)

按 new 将创建 ComplexPropertyType 的一个实例，因此可以直接从设计器中对其进行编辑。

![VS中的复杂类型编辑](../Images/e1780841706c34ed41ff4fab7033d1a5.png)

阿尔克。

# javascript - 使用默认值验证可选表单字段

> ID：13016994
> 
> 赞同：1
> 
> 时间：2012-10-22T17:57:02.820
> 
> 标签：javascript, jquery, html, forms, validation

这是我的javascript：

```
$("#cname, #cemail, #curl, #ccomment").focus(function(){
  if( this.value == this.defaultValue ) {
    $(this).val("");
  }
}).blur(function() {
  if( !this.value.length ) {
    $(this).val(this.defaultValue);
  }
});

$.validator.addMethod("noName", function(value, element) {
return value != element.defaultValue;
}, "Please enter your name.");
$.validator.addMethod("noComment", function(value, element) {
return value != element.defaultValue;
}, "Please enter your comment.");

$("#commentForm").validate(); 
```

实际形式：

```
 <form id="commentForm" action="">
   <p>
     <input id="cname" name="name" size="25" class="required noName" value="Name">
   </p>
   <p>
     <input id="cemail" name="email" size="25" class="email" value="Email">
   </p>
   <p>
     <input id="curl" name="url" size="25" class="url" value="URL">
   </p>
   <p>
     <textarea id="ccomment" name="comment" rows="5" cols="35" class="required noComment">Comment</textarea>
   </p>
   <p>
     <input class="submit" type="submit" value="Submit">
   </p>
 </form> 
```

这是一个测试： [http ://dl.dropbox.com/u/4017788/Labs/form-validation.html](http://dl.dropbox.com/u/4017788/Labs/form-validation.html)

如果单击提交按钮，您会在*电子邮件*和*URL*字段中收到错误消息，而它们是可选的。我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:14:39.153

简单的方法：在*电子邮件*和*URL字段中添加一个**igonre*类，并在焦点/模糊上删除类/添加类。测试： [http ://dl.dropbox.com/u/4017788/Labs/form_validation.html](http://dl.dropbox.com/u/4017788/Labs/form_validation.html)

 **有关详细信息，请参阅[验证选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)。

或者，您可以完全摆脱 class 属性，然后：

焦点 >> *this.className = 'url'*
模糊 >> *this.className = ''*

不更改验证调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:18:31.507

您不能对这两个表单字段使用“url”和“email”类，因为插件将尝试验证它们，因为它们是插件中的“保留”类。我建议尝试对电子邮件和 url 字段执行类似[的操作。](https://stackoverflow.com/questions/8993356/how-to-add-custom-but-not-required-method-to-jquery-validation-plugin)

我没有尝试过，但它表明您可以自定义，但不是必需的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T18:36:42.640

您可以完全使用 HTML5 占位符元素，但测试占位符支持，如果不可用，则对其进行 polyfill，例如

```
//test
function placeholderIsSupported() {
    var test = document.createElement('input');
    return ('placeholder' in test);
}
//polyfill
if(!(placeholderIsSupported())) {
  $('[placeholder]').focus(function () {
    var input = $(this);
    if (input.val() == input.attr('placeholder')) {
      input.val('');
      input.removeClass('placeholder');
    }
  }).blur(function () {
    var input = $(this);
    if (input.val() == '' || input.val() == input.attr('placeholder')) {
      input.addClass('placeholder');
      input.val(input.attr('placeholder'));
    }
  }).blur();
  $('[placeholder]').parents('form').submit(function () {
    $(this).find('[placeholder]').each(function () {
      var input = $(this);
      if (input.val() == input.attr('placeholder')) {
        input.val('');
      }
    })
  }); 
```

但是，严格来说，您所做的是为输入提供标签而不是示例值，因此使用元素`<label>`并将它们放置在输入后面，然后在输入集中时隐藏它们可能会更正确/标准/ 有非空值，例如：

HTML：

```
<p class="row">
  <label for="name">Name</label>
  <input id="cname" name="name" size="25" class="required noName" value="">
</p> 
```

CSS：

```
.row {
  position: relative;
}

input,
label {
  display: block
}

label {
  position: absolute;
  /*tweak these until label correctly positioned behind input*/
  top: 0;
  left: 0;
}

input {
  background-color: transparent;
}

input:focus,
input.has-value {
  background-color: #fff; //hide the label behind the bg color when focused or non-empty
} 
```

jQuery：

```
//toggle a class depending on whether an input has content or not
input.on('blur', function(){
  var $this = $(this);
  if ($this.val === "") {
    $this.removeClass('has-value');
  }
  else {
    $this.addClass('has-value');
  }
}); 
```

鉴于屏幕阅读器支持不完整，第二个选项更具语义性且更易于`placeholder`访问**

# sql - 使用 JOIN 语句查询驻留在不同数据库中的表的最佳实践

> ID：13016996
> 
> 赞同：3
> 
> 时间：2012-10-22T17:57:11.960
> 
> 标签：sql, sql-server

您好，非常感谢您抽出宝贵时间。我正在使用 SQL Server 2008。我的挑战如下：

我有 3 个数据库`Q_DB`, `CAN_DB`, `USA_DB`. `CAN_DB`并且`USA_DB`有相同的表格，但代表两个不同的国家

有`Q_DB`队列表。一个表被调用`ACCOUNTS`，感兴趣的列是`ACCOUNTID`和`SERVER`

我想从.的字段中查询其他两个数据库的信息`ACCOUNTS`。一个例子是：

**Q_DB.dbo.ACCOUNTS**

*   ID123 CAN_DB
*   ID456 USA_DB
*   ID789 CAN_DB

我知道我可以这样做，但我想知道是否有其他方法可以获得结果。

```
SELECT ACTNAME, AMTDUE, SHIPCOUNTY  
FROM CAN_DB.dbo.Accts 
WHERE ACCTID IN(SELECT ACCOUNTID FROM Q_DB.dbo.ACCOUNTS WHERE SERVER IN('CAN_DB')
UNION ALL
SELECT ACTNAME, AMTDUE, SHIPCOUNTRY 
FROM USA_DB.dbo.Accts
WHERE ACCTID IN(SELECT ACCOUNTID FROM Q_DB.dbo.ACCOUNTS WHERE SERVER IN('USA_DB') 
```

任何帮助或意见或建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:03:48.697

我不明白您为什么使用`IN`单个值（`CAN_DB`）。

此外，您应该预先识别`EXISTS`而不是`IN`.

```
SELECT ACTNAME, AMTDUE, SHIPCOUNTRY  
FROM CAN_DB.dbo.Accts a1
WHERE EXISTS (SELECT * FROM Q_DB.dbo.ACCOUNTS WHERE ACCTID = a1.ACCTID AND SERVER = 'CAN_DB')
UNION ALL
SELECT ACTNAME, AMTDUE, SHIPCOUNTRY 
FROM USA_DB.dbo.Accts a2
WHERE EXISTS (SELECT * FROM Q_DB.dbo.ACCOUNTS WHERE ACCTID = a2.ACCTID AND SERVER = 'USA_DB') 
```

注意：使用`UNION ALL`将返回重复项（如果有的话）。要让查询选择唯一行，请改用关键字`UNION`。

编辑：如果你想`AMTDUE`根据相同的`ACTNAME`和从两台服务器求和`SHIPCOUNTRY`：

```
SELECT  COALESCE(can.ACTNAME,usa.ACTNAME) as ACTNAME,
        COALESCE(can.AMTDUE,0)+COALESCE(usa.AMTDUE,0) as AMTDUE,
        COALESCE(can.SHIPCOUNTRY,usa.SHIPCOUNTRY) as SHIPCOUNTRY  
FROM    CAN_DB.dbo.Accts can
FULL OUTER JOIN USA_DB.dbo.Accts usa
ON      can.ACTNAME = usa.ACTNAME AND 
        can.SHIPCOUNTRY = usa.SHIPCOUNTRY 
```

# c# - 对象层次结构中的多线程

> ID：13016998
> 
> 赞同：2
> 
> 时间：2012-10-22T17:57:13.020
> 
> 标签：c#, wpf, multithreading, asynchronous, hierarchy

我正在使用 C# 和 MVVM 在 WPF 中创建一个 LOB 应用程序。我创建了工厂来构造我的所有对象，它们工作正常，但对于复杂的对象图它们很慢。我想知道是否建议实现复杂对象层次结构的每一级的异步创建。例如，如果 objA 有一个大的 objB 集合，而每个 objB 有一个大的 objC 集合，我可以异步创建每个类型的子集合吗？如果有怎么办？我是多线程编码的新手，我无法选择方向。BackgroundWorker vs TPL vs Rx。任何指导将不胜感激。